# StackOverflow 问答 11791000-11791999

# android - 如何在phonegap中使用android原生代码？

> ID：11791000
> 
> 赞同：9
> 
> 时间：2012-08-03T07:12:50.413
> 
> 标签：android, cordova

我正在使用 phonegap 开发一个 android 应用程序，与 phonegap 相比，我遇到了一些在 android 本机代码中很容易实现的东西。所以我想知道有没有什么方法可以通过不改变我的phonegap跨平台来使用android代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T07:40:49.327

类似的问题：[如何通过 Javascript 在 Phonegap 中调用本机函数？](https://stackoverflow.com/questions/11609326/how-can-i-call-native-functions-in-phonegap-through-javascript/11610435#11610435)

你可以写phonegap插件

[http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html)

# objective-c - 我如何在 AUGraph 的两条总线中播放两种不同的声音

> ID：11791004
> 
> 赞同：-1
> 
> 时间：2012-08-03T07:12:59.610
> 
> 标签：objective-c, api, core-audio, audio-streaming, sound-synthesis

嘿伙计们可以帮助我吗，我如何在 AUGraph 中分别在两条不同的总线中播放两种不同的声音。（例如，一条总线有一种声音，另一条总线有另一种声音，我需要分别播放这两种声音），任何非常感谢您的帮助。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:46:36.067

苹果提供了一个名为 MixerHost 的示例应用程序，它向您展示了如何做到这一点。

链接在这里：

[http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html)

# graph - 从边缘由欧几里得距离截止值确定的点构造图

> ID：11791009
> 
> 赞同：1
> 
> 时间：2012-08-03T07:13:30.390
> 
> 标签：graph, distance, triangulation, edges

我在 R^3 中有一组带有欧几里德距离度量的点。我想构建一个图，每个点由一个节点表示，边缘仅在距离 d < r 的点之间，其中 r 是某个截止值。

搜索 stackoverflow 产生了一个有趣的解决方案：计算数据点的 Delaunay 三角剖分，然后删除比阈值距离更长的边。

（来源：[3D Connected Points Labeling based on Euclidean distances](https://stackoverflow.com/questions/3687270/3d-connected-points-labeling-based-on-euclidean-distances)）

还有其他更有效的方法吗？

另外，去除比截止距离长的边缘的有效方法是什么？

如果没有，有人知道 Python 中的 Delaunay 三角测量实现吗？

编辑：别管最后一个问题，matplotlib 可以做三角测量，scipy for 3d。

谢谢。

PS - 有点相关：由于 Delaunay 三角剖分是 Voronoi 图的对偶图，并且 k-means 聚类将空间拆分为 Voronoi 单元，这里描述的方法是否与 k-means 聚类相同（或密切相关）？我是机器学习算法的初学者，所以我希望得到一些专家的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T22:04:11.437

您的结果可能是完整的图表，因此 Delaunay 三角剖分将无济于事。但是您可以使用 kD-Tree。

[http://en.wikipedia.org/wiki/K-d_tree](http://en.wikipedia.org/wiki/K-d_tree)

# iphone - 如何动态添加国家代码？

> ID：11791015
> 
> 赞同：0
> 
> 时间：2012-08-03T07:13:57.007
> 
> 标签：iphone, ios4

当我从下拉列表中选择一个国家时，我需要将国家代码动态添加到电话号码中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:35:34.767

您需要将这两个东西都存储在手机中（即国家名称和国家代码）。当用户选择一个特定的国家名称然后标记其行索引并从其数组中访问相同索引的国家代码并将其添加到电话号码中。这是您可以使用的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:04:35.153

您可以像这样在不同的数组中获取所有国家/地区名称以及国家/地区代码：

```
NSArray *countryArray = [NSLocale ISOCountryCodes]; // All country code array
NSMutableArray *sortedCountryArray = [[NSMutableArray alloc] init];
for (NSString *countryCode in countryArray) 
{
    NSString *displayNameString = [locale displayNameForKey:NSLocaleCountryCode value:countryCode];
    [sortedCountryArray addObject:displayNameString];
}
[sortedCountryArray sortUsingSelector:@selector(compare:)]; //All country array 
```

# spring - 动态 Spring 表单动作

> ID：11791016
> 
> 赞同：1
> 
> 时间：2012-08-03T07:13:58.457
> 
> 标签：spring, servlets, dynamic, spring-mvc

我正在尝试在 Spring MVC 中创建一个表单。

我想使用*scriplet*或其他东西**动态**设置元素的*动作*属性。`<form>`

 ***我的表格：

```
<form:form id="myForm" modelAttribute="myFormBean"
    action="<%=baseUrl%>/myFormControllerPattern" name="myForm">
    <fieldset>
        <table>
            <tr>
                <th>Name</th>
                <td><form:input path="name" /></td>
            </tr>
            <tr>
                <th>Age</th>
                <td><form:input path="age"/></td>
            </tr>
        </table>
    </fieldset>
</form:form> 
```

> > 错误：%>" 的属性未正确终止

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:03:24.353

找到了解决方案。感谢*果冻*。

在我的控制器中添加了*baseUrl ，如下所示：*

```
model.setAttribute("baseUrl",url); 
```

然后在 JSP 中以我的形式使用它：

```
<form action="${baseUrl}/myFormControllerPattern"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T21:12:54.727

c:url 标签很有用

包含到jsp

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%> 
```

接着

```
<form id="myForm" action="<c:url value="/myFormControllerPattern" />" name="myForm"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:42:51.350

改为使用 javascript 更改表单操作。`baseUrl`在 spring 控制器中作为模型变量传递，并使用这样的 javascript 函数来更改表单操作：

```
function changeAction () {
    var baseUrl = "${baseUrl}";
    var form = document.getElementById("myForm");
    form.action = baseUrl;
} 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:44:50.850

尝试使用 javascript/jQuery 技巧：

```
var curl = document.location.pathname;
    curl = curl.substring(0, curl.indexOf(".html")); 
```

第一行将获取您的应用程序地址，然后您剪切“.html”子字符串，从而可以将“/myFormControllerPattern”添加到字符串的末尾。***

# facebook - facebook邀请中的“要邀请的朋友”和“所有朋友”选项有什么区别

> ID：11791018
> 
> 赞同：0
> 
> 时间：2012-08-03T07:14:10.880
> 
> 标签：facebook

facebook邀请对话框中的“要邀请的朋友”和“所有朋友”选项有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:20:27.093

要邀请的朋友：您可以明确选择要邀请的朋友

所有朋友：这很冗长。您邀请所有与您成为朋友的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:17:10.593

要邀请的朋友意味着您可以邀请列表中的朋友，

所有朋友意味着您所有朋友的列表

# apache-flex - 最后一列中的 DataGrid 额外空间

> ID：11791020
> 
> 赞同：3
> 
> 时间：2012-08-03T07:14:12.857
> 
> 标签：apache-flex, flex3

试图删除最后一列中的额外空间，我尝试了各种方法，但没有任何效果，每当出现滚动条时，网格会以奇怪的方式表现，注意最后一列的宽度是 70，但不知何故网格会增加一些额外的空间。

![即使在使其无法调整大小后，最后一列也有额外的空间](../Images/9b9f74a806e73585d14b7b57ba8192f4.png)

```
 <?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
    <mx:Script>
        <![CDATA[
            import mx.events.ResizeEvent;
            import mx.collections.IViewCursor;
            import mx.collections.ArrayCollection;
            import mx.rpc.events.ResultEvent;
            import mx.controls.dataGridClasses.DataGridColumn;
            import mx.managers.CursorManager;

            [Bindable]
            private var itemAC:Array = [
                {name:"ABC", quantity:5, color:"Red", size:54, hasLogo:true},
                {name:"ABC1", quantity:6, color:"Green", size:46, hasLogo:false}
                ];

        ]]>
    </mx:Script>
    <mx:Canvas width="25%" height="45%"  backgroundColor="red" horizontalCenter="0"
               verticalCenter="0" id="stuff" verticalScrollPolicy="off" horizontalScrollPolicy="off">
        <mx:DataGrid height="100%" width="100%" id="dg" dataProvider="{itemAC}"
                     horizontalScrollPolicy="auto">
            <mx:columns>
                <mx:DataGridColumn width="70" dataField="name"/>
                <mx:DataGridColumn width="70"  dataField="quantity"/>
                <mx:DataGridColumn width="70"  dataField="color"/>
                <mx:DataGridColumn width="70"  dataField="size"/>
                <mx:DataGridColumn width="70"  dataField="hasLogo" resizable="false"/>
            </mx:columns>
        </mx:DataGrid>
    </mx:Canvas>

</mx:Application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:48:44.020

您将数据网格的宽度指定为 100%。因此，无论每列的宽度是多少，它都会占据整个可用空间。由于您使用的空间少于分配的空间，因此剩余的空间只是简单地附加在末尾。因此，请尝试根据您的要求调整宽度

这是使 Canvas 可以水平滚动的 MXML。并删除 Datagrid 的 width 属性

```
<mx:Canvas width="352" height="45%"  backgroundColor="red" horizontalCenter="0"
               verticalCenter="0" id="stuff" verticalScrollPolicy="off" horizontalScrollPolicy="auto">
        <mx:DataGrid height="100%" id="dg" dataProvider="{itemAC}"
                     horizontalScrollPolicy="auto">
            <mx:columns>
                <mx:DataGridColumn width="70" dataField="name"/>
                <mx:DataGridColumn width="70"  dataField="quantity"/>
                <mx:DataGridColumn width="70"  dataField="color"/>
                <mx:DataGridColumn width="70"  dataField="size"/>
                <mx:DataGridColumn width="70"  dataField="hasLogo" resizable="false"/>
            </mx:columns>
        </mx:DataGrid>
    </mx:Canvas> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:30:48.950

设置数据网格宽度=350。如果您不想要水平滚动条，请将其设置为 360

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T11:06:05.420

不要给所有的宽度留下第一个，你的代码将是类似的。

```
<mx:Canvas width="25%" height="45%"  backgroundColor="red" horizontalCenter="0"
           verticalCenter="0" id="stuff" verticalScrollPolicy="off" horizontalScrollPolicy="off">
    <mx:DataGrid height="100%" width="100%" id="dg" dataProvider="{itemAC}"
                 horizontalScrollPolicy="auto" resizableColumns="false">
        <mx:columns>
            <mx:DataGridColumn width="70" dataField="name"/>
            <mx:DataGridColumn width="70"  dataField="quantity"/>
            <mx:DataGridColumn width="70"  dataField="color"/>
            <mx:DataGridColumn width="70"  dataField="size"/>
            <mx:DataGridColumn dataField="hasLogo"/>
        </mx:columns>
    </mx:DataGrid>
</mx:Canvas> 
```

问题在于**resizable="false"**被DataGrid中的**resizableColumns="false"替换。**

这肯定会解决你的问题。

有@Nice DAY.....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-30T21:03:49.233

我知道它来得太晚了。但是，迟到总比没有好。

我遇到了完全相同的问题，我的解决方案是在右侧添加一个空的哑列。它将占用空白空间，并为用户提供一点摆动空间来调整最右侧列的大小。

```
//add an empty column at the right side
col = new AdvancedDataGridColumn("");
col.width = 80;
col.sortable = false;
col.draggable = false;
col.editable = false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T08:33:12.040

我在这里遇到了类似的问题。

解决方案 ：

额外空间确实是因为您指定了 datagrid width = 100%

这有助于将应用程序的大小调整为多种分辨率。

```
<mx:Canvas id="datagridCanvas" width="25%" height="45%"  backgroundColor="red" horizontalCenter="0"
       verticalCenter="0" id="stuff" verticalScrollPolicy="off" horizontalScrollPolicy="off">
<mx:DataGrid height="100%" width="100%" id="dg" dataProvider="{itemAC}"
             horizontalScrollPolicy="auto" resizableColumns="false">
    <mx:columns>
        <mx:DataGridColumn minWidth="70" width="{datagridCanvas.width  * 0.2}" dataField="name"/>
        <mx:DataGridColumn minWidth="70" width="{datagridCanvas.width  * 0.2}" dataField="quantity"/>
        <mx:DataGridColumn minWidth="70" width="{datagridCanvas.width  * 0.2}" dataField="color"/>
        <mx:DataGridColumn minWidth="70" width="{datagridCanvas.width  * 0.2}" dataField="size"/>
        <mx:DataGridColumn minWidth="70" width="{datagridCanvas.width  * 0.2}" dataField="hasLogo"/>
    </mx:columns>
</mx:DataGrid> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T07:17:42.990

试试这个 Horizo​​ntalScrollPolicy="off"

# ios - 创建 xmpp muc 房间时遇到问题：代码 503（服务不可用）

> ID：11791022
> 
> 赞同：7
> 
> 时间：2012-08-03T07:14:20.257
> 
> 标签：ios, xcode, ios5, xmpp, xmppframework

我创建房间的代码：

```
XMPPRoomCoreDataStorage *rosterstorage = [[XMPPRoomCoreDataStorage alloc] init];
XMPPRoom *xmppRoom = [[XMPPRoom alloc] initWithRoomStorage:rosterstorage jid:[XMPPJID jidWithString:@"groupchat@xmpp.getkismet.com/groupchat"] dispatchQueue:dispatch_get_main_queue()];

[xmppRoom activate:[[self appDelegate] xmppStream]];
if ([xmppRoom preJoinWithNickname:@"nameToCreateRoom"]) 
{
    NSLog(@"room created");
    [xmppRoom joinRoomUsingNickname:self.userName history:nil];
}
[xmppRoom fetchConfigurationForm];
[xmppRoom configureRoomUsingOptions:nil];
[xmppRoom addDelegate:[self appDelegate] delegateQueue:dispatch_get_main_queue()]; 
```

调试：

```
2012-08-03 07:46:29.204 iPhoneXMPP[9887:fb03] room created
2012-08-03 07:46:29:230 iPhoneXMPP[9887:15003] SEND: <iq type="get" to="groupchat@xmpp.getkismet.com" id="B793062B-0E09-492F-BC0F-703503AAA664"><query xmlns="http://jabber.org/protocol/muc#owner"/></iq>
2012-08-03 07:46:29:237 iPhoneXMPP[9887:15003] SEND: <iq type="set" to="groupchat@xmpp.getkismet.com" id="392D5BFC-707B-4F68-A829-56F949F4E96D"><query xmlns="http://jabber.org/protocol/muc#owner"><x xmlns="jabber:x:data" type="submit"/></query></iq>
2012-08-03 07:46:29:326 iPhoneXMPP[9887:14f03] SEND: <presence to="groupchat@xmpp.getkismet.com"><x xmlns="http://jabber.org/protocol/muc"/><x xmlns="vcard-temp:x:update"><photo>91217a961321f8f6380ea2feefd0632353ad296c</photo></x><c xmlns="http://jabber.org/protocol/caps" hash="sha-1" node="http://code.google.com/p/xmppframework" ver="VyOFcFX6+YNmKssVXSBKGFP0BS4="/></presence>
2012-08-03 07:46:29:327 iPhoneXMPP[9887:14f03] RECV: <iq xmlns="jabber:client" from="groupchat@xmpp.getkismet.com" to="lee@xmpp.getkismet.com/41068195801343976386548353" type="error" id="B793062B-0E09-492F-BC0F-703503AAA664"><query xmlns="http://jabber.org/protocol/muc#owner"/><error code="503" type="cancel"><service-unavailable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>
2012-08-03 07:46:29:343 iPhoneXMPP[9887:fb03] iPhoneXMPPAppDelegate: xmppStream:didReceiveIQ:
2012-08-03 07:46:29:421 iPhoneXMPP[9887:15003] RECV: <iq xmlns="jabber:client" from="groupchat@xmpp.getkismet.com" to="lee@xmpp.getkismet.com/41068195801343976386548353" type="error" id="392D5BFC-707B-4F68-A829-56F949F4E96D"><query xmlns="http://jabber.org/protocol/muc#owner"><x xmlns="jabber:x:data" type="submit"/></query><error code="503" type="cancel"><service-unavailable xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>
2012-08-03 07:46:29:440 iPhoneXMPP[9887:fb03] iPhoneXMPPAppDelegate: xmppStream:didReceiveIQ: 
```

我看到它正在创建/加入 groupchat@xmpp.getkismet.com 而不是 groupchat@xmpp.getkismet.com/groupchat 就像我指定的那样。我读到这很可能是问题所在。但是，我已经指定了完整的 jid，所以我迷路了。

提前感谢所有帮助的人。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-05T13:28:03.937

首先，看这里[XEP-0045: Multi-User Chat](http://xmpp.org/extensions/xep-0045.html#entity)。
如您所见，首先您必须发现您的用户 (XMPPJID) 在 Jabber 服务器上具有哪些功能。

为此，将下一个命令发送到您的 Jabber 服务器：

```
<iq from='user@jabber.server.com/resource' id='some_expression' to='jabber.server.com' type='get'>
    <query xmlns='http://jabber.org/protocol/disco#items'/>
</iq> 
```

或使用 XMPP 库函数在 Objective-C 中编写：

```
NSError *error = nil;
NSXMLElement *query = [[NSXMLElement alloc] initWithXMLString:@"<query xmlns='http://jabber.org/protocol/disco#items'/>" 
                                                        error:&error];
XMPPIQ *iq = [XMPPIQ iqWithType:@"get" 
                             to:[XMPPJID jidWithString:@"jabber.server.com"] 
                      elementID:[xmppStream generateUUID] child:query];
[xmppStream sendElement:iq]; 
```

现在在 XMPPStream 委托中监听来自服务器的响应`- (BOOL)xmppStream:(XMPPStream *)sender didReceiveIQ:(XMPPIQ *)iq`，服务器响应应该是这样的：

```
<iq from='jabber.server.com' id='some_expression' to='user@jabber.server.com/resource' type='result'>
    <query xmlns='http://jabber.org/protocol/disco#items'>
        <item jid='im.jabber.server.com' name='Instant Message Service'/>
        <item jid='conference.jabber.server.com' name='Chatroom Service'/>
    </query>
</iq> 
```

或目标 c：

```
- (BOOL)xmppStream:(XMPPStream *)sender didReceiveIQ:(XMPPIQ *)iq
{

    if([iq isResultIQ])
    {
        if([iq elementForName:@"query" xmlns:@"http://jabber.org/protocol/disco#items"])
        {
            NSLog(@"Jabber Server's Capabilities: %@", [iq XMLString]);
        }
    }
} 
```

现在，对于返回的每个项目，将 IQ 发送到您的服务器以获得它的属性，并确定哪一个是**Conference**类型，如下所示：

```
<iq from='user@jabber.server.com/resource' id='some_expression' to='conference.jabber.server.com' type='get'>
    <query xmlns='http://jabber.org/protocol/disco#info'/>
</iq> 
```

或在目标 c 中：

```
- (BOOL)xmppStream:(XMPPStream *)sender didReceiveIQ:(XMPPIQ *)iq
{

    if([iq isResultIQ])
    {
        if([iq elementForName:@"query" xmlns:@"http://jabber.org/protocol/disco#items"])
        {
            NSXMLElement *query = [iq childElement];
            NSArray *items = [query children];
            for(NSXMLElement *item in items)
            {
                NSError *error = nil;
                NSXMLElement *sendQuery = [[NSXMLElement alloc] initWithXMLString:@"<query xmlns='http://jabber.org/protocol/disco#info'/>" 
                                                                            error:&error];
                XMPPIQ *sendIQ = [XMPPIQ iqWithType:@"get" 
                                                 to:[XMPPJID jidWithString:[item attributeStringValueForName:@"jid"]] 
                                          elementID:[xmppStream generateUUID] 
                                              child:sendQuery];
                [xmppStream sendElement:sendIQ];
            }
        }
    }
} 
```

监听来自服务器的响应：

```
<iq from='conference.jabber.server.com' id='some_expression' to='user@jabber.server.com/resource' type='result'>
    <query xmlns='http://jabber.org/protocol/disco#info'>
        <identity category='conference' name='Server Group Chat Service' type='text'/>
        <feature var='http://jabber.org/protocol/muc'/>
    </query>
</iq> 
```

并从身份中获取群聊域`category:conference`

```
- (BOOL)xmppStream:(XMPPStream *)sender didReceiveIQ:(XMPPIQ *)iq
{

    if([iq isResultIQ])
    {
        if([iq elementForName:@"query" xmlns:@"http://jabber.org/protocol/disco#items"])
        {
            ...
        }
        else if([iq elementForName:@"query" xmlns:@"http://jabber.org/protocol/disco#info"])
        {
            NSXMLElement *query = [iq childElement];
            NSXMLElement *identity = [query elementForName:@"identity"];
            if([[identity attributeStringValueForName:@"category"] isEqualToString:@"conference"])
            {
                groupChatDomain = [iq fromStr];
            }
        }
    }
} 
```

最后，当我们获得群聊域时，我们可以创建类似这样的聊天室：

```
XMPPJID *chatRoomJID = [XMPPJID jidWithUser:@"chat_room" 
                                     domain:groupChatDomain 
                                   resource:@"user"];
XMPPRoomMemoryStorage *roomMemoryStorage = [[XMPPRoomMemoryStorage alloc] init];
XMPPRoom *xmppRoom = [[XMPPRoom alloc] initWithRoomStorage:roomMemoryStorage
                                                       jid:roomChatJID
                                             dispatchQueue:dispatch_get_main_queue()];
[xmppRoom activate:xmppStream];
[xmppRoom addDelegate:self delegateQueue:dispatch_get_main_queue()];
[xmppRoom joinRoomUsingNickname:user history:nil]; 
```

`<XMPPRoomDelegate>`并在您的视图控制器及其委托中添加协议：

```
- (void)xmppRoomDidCreate:(XMPPRoom *)sender
- (void)xmppRoomDidDestroy:(XMPPRoom *)sender
- (void)xmppRoom:(XMPPRoom *)sender didConfigure:(XMPPIQ *)iqResult
- (void)xmppRoom:(XMPPRoom *)sender didNotConfigure:(XMPPIQ *)iqResult
- (void)xmppRoomDidJoin:(XMPPRoom *)sender
- (void)xmppRoomDidLeave:(XMPPRoom *)sender
- (void)xmppRoom:(XMPPRoom *)sender occupantDidJoin:(XMPPJID *)occupantJID withPresence:(XMPPPresence *)presence
- (void)xmppRoom:(XMPPRoom *)sender occupantDidLeave:(XMPPJID *)occupantJID withPresence:(XMPPPresence *)presence
- (void)xmppRoom:(XMPPRoom *)sender didReceiveMessage:(XMPPMessage *)message fromOccupant:(XMPPJID *)occupantJID 
```

**注意：**在邀请其他用户加入聊天室之前，您必须发送并确认房间配置（可以邀请其他用户，但不能发送消息）。
因此，您可以在创建 Room（`- (void)xmppRoomDidCreate:(XMPPRoom *)sender`调用委托）或您的用户已加入（`- (void)xmppRoomDidJoin:(XMPPRoom *)sender`调用委托）聊天室后执行此操作。

要发送和确认房间配置，请执行以下操作之一：

```
- (void)xmppRoomDidCreate:(XMPPRoom *)sender
{
    [sender configureRoomUsingOptions:nil];
} 
```

或者

```
- (void)xmppRoomDidJoin:(XMPPRoom *)sender
{    
    [sender configureRoomUsingOptions:nil];
} 
```

发送`nil`以接受默认选项，或者您可以使用以下语法将 IQ 发送到您的服务器：

```
<iq type='set' from='user@jabber.server.com/resource' id='some_expression' to='chat_room@conference.jabber.server.com'>
    <query xmlns='http://jabber.org/protocol/muc#owner'>
        <x xmlns='jabber:x:data' type='submit'>
            <field var='FORM_TYPE'>
                <value>http://jabber.org/protocol/muc#roomconfig</value>
            </field>
            <field var='muc#roomconfig_roomname'>
                <value>My Chat Room</value>
            </field>
              .
              .
              .
        <x>
</query>
</iq> 
```

或目标c代码：

```
NSError *error = nil;
NSXMLElement *query = [[NSXMLElement alloc] initWithXMLString:@"<query xmlns='http://jabber.org/protocol/muc#owner'/>" 
                                                        error:&error];
NSXMLElement *x = [NSXMLElement elementWithName:@"x" 
                                          xmlns:@"jabber:x:data"];
[x addAttributeWithName:@"type" stringValue:@"submit"];
NSXMLElement *field1 = [NSXMLElement elementWithName:@"field"];
[field1 addAttributeWithName:@"var" stringValue:@"FORM_TYPE"];
NSXMLElement *value1 = [NSXMLElement elementWithName:@"value" 
                                         stringValue:@"http://jabber.org/protocol/muc#roomconfig"];
[field1 addChild:value1];

NSXMLElement *field2 = [NSXMLElement elementWithName:@"field"];
[field2 addAttributeWithName:@"var" stringValue:@"muc#roomconfig_roomname"];
NSXMLElement *value2 = [NSXMLElement elementWithName:@"value" 
                                         stringValue:@"My Chat Room"];
[field2 addChild:value2];

//Add other fields you need, just like field1 and field2

[x addChild:field1];
[x addChild:field2];

[query addChild:x];

NSXMLElement *roomOptions = [NSXMLElement elementWithName:@"iq"];
[roomOptions addAttributeWithName:@"type" stringValue:@"set"];
[roomOptions addAttributeWithName:@"id" stringValue:[xmppStream generateUUID];
[roomOptions addAttributeWithName:@"to" stringValue:@"chat_room@conference.jabber.server.com"];

[roomOptions addChild:query];

[sender configureRoomUsingOptions:roomOptions]; 
```

并且所有可能的配置表单字段的列表都[在这里](http://xmpp.org/extensions/xep-0045.html#createroom-reserved)

# c# - 如何在 C# 中从智能卡中读取凭据

> ID：11791036
> 
> 赞同：4
> 
> 时间：2012-08-03T07:15:41.143
> 
> 标签：c#, active-directory, credentials, smartcard

在我的组织中，用户必须使用 SmartCard 交互式登录到 Windows 站（95、Vista 和 7）。几乎每天，我们都需要读取存储在 SmartCard 中的凭据并将它们与 ActiveDirectory 进行比较，而无需实现自定义凭据管理器。我们比较的字段是：userPrincialName 和 sAMAccountName。

您能否向我展示一个代码，该代码演示如何从智能卡读取凭据或引导我访问 Internet 上的文章/代码？

通过 Internet 搜索建议实施凭证管理器或使用其他语言（如 C、C++）。另外，我看到了这篇文章：[http://www.codeproject.com/Articles/17013/Smart-Card-Framework-for-NET](http://www.codeproject.com/Articles/17013/Smart-Card-Framework-for-NET)由 orouit 编写，它是一个使用 SmartCards 的框架 - 但我认为这太过分了对于我的简单任务。你怎么看？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T04:44:41.930

好吧，如果在 windows 下开发，一旦你插入智能卡，windows 就会从智能卡中获取所有证书，并将它们放到我的证书存储中。

```
var smartCardCerts = new List<X509Certificate2>();
var myStore = new X509Store(StoreName.My, StoreLocation.CurrentUser);
myStore.Open(OpenFlags.ReadOnly);
foreach(X509Certificate2 cert in myStore.Certificates)
{
  if( !cert.HasPrivateKey ) continue; // not smartcard for sure
  var rsa = cert.PrivateKey as RSACryptoServiceProvider;
  if( rsa==null ) continue; // not smart card cert again
  if( rsa.CspKeyContainerInfo.HardwareDevice ) // sure - smartcard
  {
     // inspect rsa.CspKeyContainerInfo.KeyContainerName Property
     // or rsa.CspKeyContainerInfo.ProviderName (your smartcard provider, such as 
     // "Schlumberger Cryptographic Service Provider" for Schlumberger Cryptoflex 4K
     // card, etc
     var name = cert.Name;
     rsa.SignData(); // to confirm presence of private key - to finally authenticate
  }
} 
```

现在基本上很多加密 API 都可以通过 .NET 获得。但你也可以直接使用 API [Crypto API](http://msdn.microsoft.com/en-us/library/aa380252%28v=vs.85%29)

例如，您可以通过直接访问智能卡

```
CryptAcquireContext(&hProv,"\\.\<Reader Name>\<Container Name>",...) 
```

其中读卡器名称是读卡器名称，容器名称是上面代码片段中的任何 rsa.KeyContainerName。有多种方法可以访问这样的信息，而 Crypto API 不是很一致或直接。作为提示 .NET 版本的 CryptAcquireContext 是带有 CspParameters 的 RSACryptoServiceProvider，如果需要，您可以在其中指定容器名称。

在 ActiveDirectory 中找到用户可以通过 System.DirectoryServices.DirectoyEntry 和 System.DirectoryServices.DirectorySearcher 完成，但不要忘记 System.DirectoryServices.ActiveDirectory.Forest 和相关 API，这使得一些事情更容易弄清楚。

你将能够得到

# c# - 大对象堆碎片，数组问题

> ID：11791038
> 
> 赞同：9
> 
> 时间：2012-08-03T07:15:53.340
> 
> 标签：c#, memory-management, out-of-memory, large-object-heap

我正在用 C# 编写一个必须处理大量内存的分析应用程序。我使用 ANTS Memory Profiler 7.4 来优化我的内存管理。这样做时，我意识到我使用的所有 double[,] 数组（并且我需要它们）都放在 LOH 上，尽管这些数组中最大的大约是 24.000 字节。据我所知，对象不应该放在 85.000 字节之前。现在的问题是，由于我有大约数千个这些 double[,] 数组的实例，我有很多内存碎片（我的总内存使用量中约有 25% 是我无法使用的空闲内存）。其中一些存储在 LOH 上的数组甚至只有 1.036 字节大小。问题是，有时我必须执行更大规模的分析，然后由于 LOH 碎片导致大量内存丢失，最终导致内存不足异常。

有谁知道为什么会发生这种情况，尽管根据定义它不应该是一个大对象？

![使用 ANTS Memory Profiler 的应用程序的 Memroy 快照](../Images/99a72ecdbf454d2f5f5082effa79f75c.png)

![小型双精度数组也受此影响（数组中只有 70 个元素）](../Images/95f999287255e5b501e45dcaac45101e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T09:06:22.450

在 LOH 上放置双精度数组的阈值大小远低于其他类型。这样做的原因是 LOH 上的项目始终是 64 位对齐的，并且双倍受益于 64 位对齐。

请注意，这只影响以 32 位运行的程序。以 64 位运行的程序具有始终在 64 位边界上对齐的对象，因此 LOH 启发式不用于 64 位程序。

阈值大小为 1000 双倍。

另请参阅[https://connect.microsoft.com/VisualStudio/feedback/details/266330/](https://connect.microsoft.com/VisualStudio/feedback/details/266330/)

# windows - 启用 Windows 命令行历史记录

> ID：11791047
> 
> 赞同：1
> 
> 时间：2012-08-03T07:16:33.213
> 
> 标签：windows, shell, windows-7, command-line

我了解 Windows 命令行工具不存储用户发出的输入历史记录。有没有办法自动启用它，允许对发出的命令进行事后检查？

否则，是否有替代方法来调查特定系统管理员在命令行中执行了哪些命令？

适用的操作系统为 Windows 7，以及所有版本的 Windows Servers

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:27:33.893

我相信默认情况下 windows cmd 不支持这个。所以你的问题的直接答案是它是不可能的。

但是，您可以通过使用 PowerShell 来实现您要求的效果。 [看这里](http://blogs.msdn.com/b/powershell/archive/2006/07/01/perserving-command-history-across-sessions.aspx) Disclamer，我没有自己使用它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T09:49:34.357

press F7 while on command prompt

# html - 在 Firefox 中将长词包装在一个灵活的 html 表中

> ID：11791048
> 
> 赞同：2
> 
> 时间：2012-08-03T07:16:40.827
> 
> 标签：html, html-table, word-wrap, word-break

我有一个有两列的表。第一栏有一个很长的词。我想把长字包起来。

[您可能已经注意到这与HTML table 中的 Word-wrap](https://stackoverflow.com/questions/1258416/word-wrap-in-a-html-table)相同。该线程中选择的答案是添加“table-layout：fixed”，这意味着必须固定列宽。但是我需要表格保持灵活，以便第二列仅在第一列中的内容太长而无法容纳一行时为其内容使用足够的宽度。

下面的[代码](http://jsfiddle.net/uhZYF/)演示了这个问题。它在 IE/Chrome 中运行良好。但在 Firefox 中，该行没有换行。

有没有人有任何想法可以在 FireFox 中解决这个问题？

**更新：**我刚刚在 9 天前发布的 FireFox 15 Beta 中对其进行了测试。Firefox 15 现在支持“断词”。但我可能仍需要对以前的版本进行解决，因为 15 可能需要一段时间才能发布并成为多数。

```
<table style="width: 100%;">
    <tr>
        <td><div style="word-break:break-all;">LongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWord</div>
        </td>
        <td>
            <a href='#' style="white-space:nowrap;">Action</a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-03T07:42:49.327

标记中的一些更改，请参见以下代码：

```
<table style="width: 100%; table-layout:fixed;">
    <tr>
        <td>
            <div style="word-break:break-all; word-wrap: break-word;">LongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWordLongWord</div>
        </td>
        <td>
            <a href='#' style="white-space:nowrap;">Action</a>
        </td>
    </tr>
</table> 
```

*   添加`table-layout:fixed;`表格样式。
*   `word-wrap: break-word;`与风格搭配使用`word-break:break-all;`。`<div>`

**它适用于所有主流浏览器 IE、FF、Safari 和 Chrome。**

## [看演示](http://jsfiddle.net/8nVqX/)

# sql-server - 检查购物车的适用组查询

> ID：11791049
> 
> 赞同：0
> 
> 时间：2012-08-03T07:16:47.117
> 
> 标签：sql-server, sql-server-2008, tsql

我有折扣检查条件之一的问题。我的表格结构如下：

**购物车**表`(id, customerid, productid)` **集团**表`(groupid, groupname, discountamount)` **集团产品**表`(groupproductid, groupid, productid)`

下订单时，购物车中会有多个商​​品，如果该组包含购物车中的所有产品，我想检查那些最顶部的商品？

**示例**：如果第 1 组包含 2 个产品并且这两种产品存在于购物车表中，则应返回第 1 组折扣。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:16:00.410

这很棘手，没有真正的表定义或样本数据。所以我编了一些：

```
create table Carts(
    id int,
    customerid int,
    productid int
)
create table Groups(
    groupid int,
    groupname int,
    discountamount int
)
create table GroupProducts(
    groupproductid int,
    groupid int,
    productid int
)

insert into Carts (id,customerid,productid) values
(1,1,1),
(2,1,2),
(3,1,4),
(4,2,2),
(5,2,3)
insert into Groups (groupid,groupname,discountamount) values
(1,1,10),
(2,2,15),
(3,3,20)
insert into GroupProducts (groupproductid,groupid,productid) values
(1,1,1),
(2,1,5),
(3,2,2),
(4,2,4),
(5,3,2),
(6,3,3)

;With MatchedProducts as (
    select
        c.customerid,gp.groupid,COUNT(*) as Cnt
    from
        Carts c
            inner join
        GroupProducts gp
            on
                c.productid = gp.productid
    group by
        c.customerid,gp.groupid
), GroupSizes as (
    select groupid,COUNT(*) as Cnt from GroupProducts group by groupid
), MatchingGroups as (
    select
        mp.*
    from
        MatchedProducts mp
            inner join
        GroupSizes gs
            on
                mp.groupid = gs.groupid and
                mp.Cnt = gs.Cnt
)
select * from MatchingGroups 
```

这产生了这个结果：

```
customerid  groupid     Cnt
----------- ----------- -----------
1           2           2
2           3           2 
```

我们在这里所做的称为“关系除法”——如果您想在其他地方搜索该术语。在我目前的结果中，每个客户只匹配一个组 - 如果有多个匹配项，我们需要一些打破平局的条件来确定要报告哪个组。我在评论中提示了两个建议（最低`groupid`或最高`discountamount`）。您对“较早添加”的回复没有帮助 - 我们没有包含组添加日期的列。SQL 中的行没有固有的顺序。

我们将在定义`MatchingGroups`和最终选择中打破平局：

```
MatchingGroups as (
    select
        mp.*,
        ROW_NUMBER() OVER (PARTITION BY mp.customerid ORDER BY /*Tie break criteria here */) as rn
    from
        MatchedProducts mp
            inner join
        GroupSizes gs
            on
                mp.groupid = gs.groupid and
                mp.Cnt = gs.Cnt
)
select * from MatchingGroups where rn = 1 
```

# mysql - 将 microsoft sql 转换为 mysql

> ID：11791055
> 
> 赞同：-3
> 
> 时间：2012-08-03T07:17:15.367
> 
> 标签：mysql, sql-server

我正在将它从 mssql 转换为 mysql，但它给了我这个错误：

**错误代码：1415 不允许从函数返回结果集**

我究竟做错了什么？

```
DELIMITER $$  

CREATE    FUNCTION GetPositionList (orderDetID NUMERIC)  
RETURNS NVARCHAR(200)    
DETERMINISTIC   
BEGIN   
DECLARE strToReturn NVARCHAR(50);  
DECLARE strPos NVARCHAR(50);  
DECLARE strPosOtherRes NVARCHAR(50);  
DECLARE strTPos NVARCHAR(50);  
DECLARE strTPosOtherResr NVARCHAR(50)

SET strToReturn = '';  
SET strPos = SELECT `POSITION` FROM orderdetails WHERE OrderID = orderDetID;
SET strPosOtherRes = SELECT SecPosition FROM orderdetails WHERE OrderID = orderDetID;
SET strTPos = SELECT TeamPosition FROM orderdetails WHERE OrderID = orderDetID;
SET strTPosOtherResr = SELECT TeamSecPosition FROM orderdetails WHERE OrderID = orderDetID;

IF(strPos != '') THEN SET strToReturn = CONCAT(strPos , ',');
END IF;
IF(strPosOtherRes != '' ) THEN SET strToReturn = CONCAT(strToReturn ,  strPosOtherRes , ',');
END IF;
IF(strTPos != '' ) THEN SET strToReturn =  CONCAT(strToReturn ,  strTPos , ',');
END IF;
IF(strTPosOtherResr != '' ) THEN SET strToReturn =  CONCAT(strToReturn , strTPosOtherResr , ',');
END IF;     
RETURN SUBSTRING( strToReturn, 0, LENGTH(strToReturn) );  
END $$  
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:03:09.080

在 MySQL 中为变量选择值的语法是[`select ... into`](http://dev.mysql.com/doc/refman/5.5/en/select-into.html). 例如你可以写：

```
SELECT POSITION, SecPosition FROM orderdetails 
WHERE OrderID = orderDetID INTO strPos, strPosOtherRes; 
```

消息“不允许从函数返回结果集”意味着现在的选择语句将从函数返回结果集，并且函数只能返回单个值。

# php - 将数据插入mysql数据库不起作用

> ID：11791057
> 
> 赞同：0
> 
> 时间：2012-08-03T07:17:25.007
> 
> 标签：php, html

我正在将数据从 iphone 应用程序插入到 mysql，但它没有将数据插入到表中我回显结果和输入的值，但它也没有显示任何值

页面的 HTML 代码

```
 <html>

  <head>
  <title>data to server</title>
  </head>
  <body>
  <form action="surveyAnswer.php" method="post" enctype="multipart/form-data"><br>

  <INPUT TYPE = "Text" VALUE ="1" NAME = "survey_question_response_id">

  <INPUT TYPE = "Text" VALUE ="1" NAME = "survey_id">
  <INPUT TYPE = "Text" VALUE ="1" NAME = "question_id">
  <INPUT TYPE = "Text" VALUE ="1" NAME = "survey_response_answer_id">
   <input type="submit" value="Upload File">
  </form>
  </body>
  </html>

     <?php
     $host = ""; 
     $user = ""; 
     $pass = ""; 
     $database = ""; 

     $linkID = mysql_connect($host, $user, $pass) or die("Could not connect to host."); 
     mysql_select_db($database, $linkID) or die("Could not find database."); 

     $survey_question_response_id=$_POST['survey_question_response_id'];
     $survey_id=$_POST['survey_id'];
     $question_id=$_POST['question_id'];
     $survey_response_answer_id=$_POST['survey_response_answer_id'];
     echo($survey_question_response_id);
     $query=("INSERT INTO survey_question_responses   (survey_question_response_id,survey_id,question_id,survey_response_answer_id)
     VALUES ('$survey_question_response_id', '$survey_id','$question_id','$survey_response_answer_id')");
     mysql_query($query,$con);
     printf("Records inserted: %d\n", mysql_affected_rows());
     echo($survey_id) 
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:20:04.320

您的`form`方法是`POST`并且您正在使用`$_GET`来捕获变量。使用`$_POST`代替`$GET`来解决您的问题。

此外，错误的标签语法。

`<form action="surveyAnswer.php" method="post" enctype="multipart/form-data">`

这指向`surveyAnswer.php`。因此，将下面的代码放入`surveyAnswer.php`页面中，并将其从显示 html 表单的页面中删除。

```
 <?php

       $survey_question_response_id=$_POST['survey_question_response_id'];
       $survey_id=$_POST['survey_id'];
       $question_id=$_POST['question_id'];
       $survey_response_answer_id=$_POST['survey_response_answer_id'];
       $query=("INSERT INTO survey_question_responses     (survey_question_response_id,survey_id,question_id,survey_response_answer_id)
      VALUES ('$survey_question_response_id', '$survey_id','$question_id','$survey_response_answer_id')");
     mysql_query($query,$con);
     printf("Records inserted: %d\n", mysql_affected_rows());
     echo($survey_id);

 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:21:44.227

您使用**POST**进行操作，但在您的 PHP 代码中使用 $_GET

更改所有 $_GET：

```
 <?php
   $survey_question_response_id=$_POST['survey_question_response_id'];
   // OR eighter to
   $survey_question_response_id=$_REQUEST['survey_question_response_id'];
   .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:23:39.300

在您的表单中，您有 form method="post" ，当您使用 GET 存储值时，可以更改您的表单 method="GET" 或使用

```
$_POST['survey_question_response_id']; 
```

代替

```
$_GET['survey_question_response_id']; 
```

等其他变量也是如此。

你也缺少“;” 这里“回声（$survey_id）”

# eclipse - 在 Eclipse JUnit 视图中显示 Jenkins 测试结果

> ID：11791059
> 
> 赞同：2
> 
> 时间：2012-08-03T07:17:37.953
> 
> 标签：eclipse, junit, jenkins

有没有办法将 Jenkins JUnit 测试结果导入 Eclipse 的 JUnit 视图？我在 Eclipse 中找到了“从 URL 导入...”。Jenkins 有没有办法创建必要的 XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T14:17:14.287

我想我真正想要的是由 Mylyn 的 Hudson/Jenkins 连接器提供的。

`Install new features...`使用 Mylyn 的更新站点在 Eclipse 中安装它

*   对于 Eclipse Juno：http: [//download.eclipse.org/mylyn/releases/juno](http://download.eclipse.org/mylyn/releases/juno)
*   对于 Eclipse 开普勒：http: [//download.eclipse.org/mylyn/releases/kepler](http://download.eclipse.org/mylyn/releases/kepler)

并勾选相应的 Mylyn 构建连接器。

![安装截图](../Images/18861dbb6d1f93c65fc2e945cbd7e6fe.png)

`Window > Show View > Others`安装后，使用并选择打开适当的视图`Mylyn > Builds`

![显示视图截图](../Images/8debe09a6f4cc8071d72a1c3b231f3fa.png)

奇迹般有效！您可以监控和启动 Hudson/Jenkins 构建，并直接在 Eclipse 中查看构建控制台和 JUnit 结果！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:37:40.787

您可以直接从`workspace`文件夹中获取最新的测试结果文件（您可以查看最后一个构建文件`/jenkins/jobs/XXXXXXX/builds/YYY`以了解它的位置）。

但是对于以前的版本，恐怕 Jenkins 会在`/jenkins/jobs/XXXXXXX/builds/YYY`.

因此，除非您有在某处为您复制结果的任务，否则我认为您无法在 Eclipse 中导入它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:28:03.043

我确信可以使用 Jenkins 创建使用 ANT Junit 报告。然后可以将该 XML 文件作为 URL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-05T22:44:52.640

除了使用 Mylyn 连接器外，在 Jenkins 中还需要在项目配置页面的“构建后操作”部分指定“**发布 JUnit 测试结果报告**”。该参数是测试结果的 xml 文件的模式，或者是 JUnitReport 任务的 xml 文件的模式（如果使用的话）。

那是对我有用的东西。我不知道那个选项当时是否存在。

# android - 图库仅显示选定的图片

> ID：11791063
> 
> 赞同：0
> 
> 时间：2012-08-03T07:17:51.933
> 
> 标签：android, gallery

我正在使用 Android 2.3.6 和 2.3.1 。

我有一个不受欢迎的行为`Gallery`：来自画廊项目的侧面图片不会显示。

我的画廊占用了所有可用空间，并且包含`ImageView`and a的布局`TextView`设置为`WRAP_CONTENT`但仍占据所有屏幕，因此侧面项目超出了界限......

这是画廊的xml

```
<RelativeLayout xmlns:a="http://schemas.android.com/apk/res/android"
    a:layout_width="match_parent"
    a:layout_height="match_parent"
    a:layout_margin="0dp"
    a:padding="0dp">

    <ImageView
        a:id="@+imagePopup/selected"
        a:layout_width="60dp"
        a:layout_height="35dp"
        a:layout_alignParentLeft="true"
        a:layout_alignParentTop="true"
        a:src="@drawable/ic_cancel"
        a:contentDescription="@string/lng" />
    <TextView
        a:id="@+imagePopup/title"
        a:layout_alignParentTop="true"
        a:layout_toRightOf="@+imagePopup/selected"
        a:layout_alignWithParentIfMissing="true"
        a:layout_width="match_parent"
        a:layout_height="35dp"
        a:background="@drawable/rounded"
        a:text="dynamic text"
        a:textSize="23dp"
        a:textColor="#ffffffff"
        a:gravity="center"
        style="@style/trad"/>
    <Gallery
        a:id="@+imagePopup/gallery"
        a:layout_width="match_parent"
        a:layout_height="match_parent"
        a:layout_below="@+imagePopup/title"
        a:layout_alignWithParentIfMissing="true"
        a:background="#ff000000"/>
</RelativeLayout> 
```

及其内容xml

```
<RelativeLayout xmlns:a="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    a:layout_width="wrap_content"
    a:layout_height="wrap_content"
    a:background="#ffff55ee">

    <ImageView
        a:id="@+imageContent/imageView"
        a:layout_width="wrap_content"
        a:layout_height="wrap_content"
        a:layout_alignParentTop="true"
        a:padding="0dp"
        a:layout_margin="0dp"
        a:src="@drawable/ic_cancel" />

    <TextView
        a:id="@+imageContent/textOver"
        a:layout_width="wrap_content"
        a:layout_height="wrap_content"
        a:layout_alignParentTop="true"
        a:layout_centerHorizontal="true"
        a:layout_marginTop="4dp"
        a:shadowColor="#FF000000"
        a:shadowRadius="4"
        a:textColor="#ffffffff"
        a:textSize="16dp"
        a:textStyle="bold" />

</RelativeLayout> 
```

我在图片容器的背景 ( `RelativeLayout`) 中添加了丑陋的背景颜色，以显示它的行为：

![画廊展示](../Images/02841d917c1e48bee59b25b85287726f.png)

有人可以告诉我我在这里做错了什么......我就是无法摆脱它。

提前谢谢^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:24:58.607

我认为问题与您的图像有关。您正在尝试显示一个更可能覆盖整个屏幕的巨大图像。

您必须为您的图像提供一些预定义的宽度和高度属性。

而不是 wrap_content 您提供的内容如下所示，

```
 <ImageView
        a:id="@+imageContent/imageView"
        a:layout_width="wrap_content"
        a:layout_height="wrap_content"
        a:layout_alignParentTop="true"
        a:padding="0dp"
        a:layout_margin="0dp"
        a:src="@drawable/ic_cancel" /> 
```

尝试提供这样的东西，

```
 <ImageView
    a:id="@+imageContent/imageView"
    a:layout_width="150dip"
    a:layout_height="150dip"
    a:layout_alignParentTop="true"
    a:padding="0dp"
    a:layout_margin="0dp"
    a:src="@drawable/ic_cancel" /> 
```

**注意：**我在这里指定的布局宽度和高度只是虚构的。你必须提供你自己的。

而且您必须知道 wrap_content、fill_parent 和实际硬编码宽度和高度之间的区别。

1.  Wrap_cotent - 这意味着，它将使用您实际图像的宽度和高度。

2.  fill_parent - 无论图像的大小如何，它都会占据整个屏幕。

3.  通过我们自己的方式提供高度和宽度，您可以通过提供特定的宽度和高度属性使其均匀显示的图像大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:45:38.640

最后，我找到了一种更好的方法，更“自然”：这是我的代码的修改部分：

```
<RelativeLayout xmlns:a="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    a:layout_width="wrap_content"
    a:layout_height="match_parent"
    tools:ignore="ContentDescription">

    <ImageView
        a:id="@+imageContent/imageView"
        a:layout_width="wrap_content"
        a:layout_height="match_parent"
        a:layout_alignParentTop="true"
        a:scaleType="fitXY"
        a:adjustViewBounds="true"
        a:src="@drawable/ic_cancel" /> 
```

`scaleType="fitXY"`很快就`adjustViewBounds="true"`做到了，多亏了这个[问题](https://stackoverflow.com/questions/10123830/android-imageview-scaletype-and-item-height)

# entity-framework - EF 4：缺少基本功能？

> ID：11791066
> 
> 赞同：0
> 
> 时间：2012-08-03T07:18:18.617
> 
> 标签：entity-framework, foreign-keys

想象一下我有这门课

```
public class Case
{
    [Key]
    [DataMember]
    public int CaseId { get; set; }

    [DataMember]
    public string Title { get; set; }

    [DataMember]
    public string PublicStatusName { get; set; }
} 
```

基本上，我想获取类似这个查询的结果集

```
select c.Id, c.Title, sp.Name
from Case c
inner join StatusGrouping sg on sg.InternalStatusId = c.StatusId
inner join StatusPublic sp on sp.PublicStatusId = sg.PublicStatusId 
where c.Id = 42 
```

并将其放入上面的类中。

我知道我可以在 EF 中制作导航属性和表达外键关系等。因此，一种（丑陋的）可能性是在 Case 类上只具有一个 StatusGrouping 属性。然后在 StatusGrouping 类上有一个 StatusPublic 属性，然后在我读取数据时让 EF 连接层次结构。

但是 StatusGrouping 表只是一个关系表，在这种情况下我不关心。此外，我不关心 PublicStatusId，我只关心每当我从数据库中获取案例时，我希望将正确的 StatusPublic.Name 映射到 Case 类中的 PublicStatusName 中。

是在 EF 中执行此操作以在 db 上查看并映射到该视图的唯一方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:34:18.717

您可以在 .edmx 文件中使用定义查询。通过这种方式，您可以将查询直接映射到您的模型类。

有关定义查询的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/cc982038.aspx](http://msdn.microsoft.com/en-us/library/cc982038.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:00:49.103

您的查询包含 c.StatusId 但您的课程不包含。所以我添加了它。

```
var query = from c in Case
            join sg in StatusGrouping on c.StatusId equals sg.InternalStatusId
            join sp in StatusPublic on sg.PublicStatusId equals sp.PublicStatusId
            where c.CaseId == 42
            select new Case { CaseId = c.CaseId, Title = c.Title, PublicStatusName = sp.Name}; 
```

# wpf - 从presentationmodel引用的WPF TextBox变得不同步？

> ID：11791067
> 
> 赞同：0
> 
> 时间：2012-08-03T07:18:25.177
> 
> 标签：wpf, prism

我的 wpfgrid 上有一个文本框，我需要执行一些 tekst 插入等。为此，从视图中将文本框引用到演示模型中`ReferenceToTextBox`（我们使用 Prism 进行 MVP）。此外，视图中的文本框`TextDescription`绑定到`Description`模型上的 -property。

我们还有一个下拉列表，其中包含一些预定义的文本块（地址、增值税号等）。当您选择其中之一时，它们应插入到插入符号当前位置的文本框中。由于您无法在 CaretIndex 上绑定，因此采用了上述解决方法。下拉列表在 SelectedItem 上绑定到模型上的属性，因此当 SelectedItem 更改时，属性会更改，并且在属性的设置器中调用方法将所选项目的文本插入`ReferenceToTextBox`“虚拟”模型中的文本框（应该只是对视图中文本框的引用）。

但是，如果我从视图中的文本框中删除所有文本并添加一个新的预定义文本块。该`ReferenceToTextBox.Text`属性仍然包含我删除的所有文本。似乎`ReferenceToTextBox`不再只是一个参考，而是一个完整的文本框。这使得更新以`ReferenceToTextBox.Text`实际更新视图上的“视觉”文本框时更加奇怪。

这里实际发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:38:13.430

不是对您的问题的直接回答，但是实际上允许绑定到其`CaretIndex`属性的派生 TextBox 类呢：

```
public class TextBoxEx : TextBox
{
    public static readonly DependencyProperty CaretIndexProperty = DependencyProperty.Register(
        "CaretIndex", typeof(int), typeof(TextBoxEx),
        new FrameworkPropertyMetadata(0, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, CaretIndexChanged));

    public new int CaretIndex
    {
        get { return (int)GetValue(CaretIndexProperty); }
        set { SetValue(CaretIndexProperty, value); }
    }

    protected override void OnTextChanged(TextChangedEventArgs e)
    {
        base.OnTextChanged(e);
        CaretIndex = base.CaretIndex;
    }

    protected override void OnKeyDown(KeyEventArgs e)
    {
        base.OnKeyDown(e);
        CaretIndex = base.CaretIndex;
    }

    protected override void OnKeyUp(KeyEventArgs e)
    {
        base.OnKeyUp(e);
        CaretIndex = base.CaretIndex;
    }

    protected override void OnMouseDown(MouseButtonEventArgs e)
    {
        base.OnMouseDown(e);
        CaretIndex = base.CaretIndex;
    }

    protected override void OnMouseUp(MouseButtonEventArgs e)
    {
        base.OnMouseUp(e);
        CaretIndex = base.CaretIndex;
    }

    private static void CaretIndexChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        if (obj is TextBox)
        {
            ((TextBox)obj).CaretIndex = (int)e.NewValue;
        }
    }
} 
```

# c# - 在 c# 中获取 form2 中的用户输入并在 form1 中显示数据

> ID：11791071
> 
> 赞同：0
> 
> 时间：2012-08-03T07:18:31.153
> 
> 标签：c#, forms

![在此处输入图像描述](../Images/d732ec184848b286ecce49ee063c2805.png) ![在此处输入图像描述](../Images/08db03fe427a2bc5768e286639b7fe5f.png)

在左图中，有搜索按钮。点击时会弹出第二个表单（右图）。

在搜索表单（form2）上输入关键字时，数据将出现在form1。如何将用户在form2中输入的单词传递给form1？

这是form1中的代码。

```
private void button5_Click(object sender, EventArgs e)
    {            
        Form2 form2 = new Form2();
        form2.ShowDialog();   //open form2-search form  

        //kene get data input dr form2
        XmlDocument xml = new XmlDocument();            
        xml.Load("C:\\Users\\HDAdmin\\Documents\\SliceEngine\\SliceEngine\\bin\\Debug\\saya.xml");
        XmlNodeList xnList = xml.SelectNodes("/Patient/Patient/Name");
        foreach (XmlNode xn in xnList)
        {
            string name = xn.InnerText;
            listBox21.Items.Add(name);                
        }
    } 
```

这是form2中的代码。

```
private void button1_Click(object sender, EventArgs e)
    {
        if (textBox1.Text == "")
        {
            MessageBox.Show("Please enter keyword to search");
        }
        else 
        {
            //send data input to form1.
        } 
```

谁能帮我这个？谢谢你

===编辑===

我指的是[这个链接](http://codeincsharp.blogspot.com/2008/04/how-to-pass-values-to-another-form.html)来解决这个问题。有两种方法，我使用的是第二种方法，效果很好。我为此大声哭泣。谢谢博主楼主。

我还发现，为了查看数据，我需要在 TextBox 而不是 ListBox 中查看。我之前所做的是试图在 ListBox 中查看它。我不知道为什么，但就是这样。无论如何，这个问题解决了！再次感谢那些在这个话题上帮助我的人。我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:23:10.243

例如，您可以简单地使用一个属性：

**表格2：**

```
public string UserText { get; set;}

...

private void button1_Click(object sender, EventArgs e)
{
    if (textBox1.Text == "")
    {
        MessageBox.Show("Please enter keyword to search");
    }
    else 
    {
        UserText = textBox1.Text; // set the Text
    } 
```

**表格1：**

```
private void button5_Click(object sender, EventArgs e)
{            
    Form2 form2 = new Form2();
    form2.ShowDialog();   //open form2-search form  

    string text = from2.UserText; get the Text

    .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:23:36.187

在 Form2 上创建一个属性（或多个属性），以公开所需控件的值。因此，如果您想要搜索词，请执行以下操作：

```
public string SearchTerm
{
   get { return this.textBox1.Text; }
} 
```

另外，在旁注中；不要忘记检查用户是否真的按搜索。

你现在拥有它的方式，当用户用 x 关闭表单时，它也会搜索。这对用户来说似乎不合逻辑。

在您的 Form2 ModalResult.OK 上制作按钮并这样做：

```
if (form2.ShowDialog() == ModalResult.OK)
{
  // Do your thing
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:40:55.080

您可以在 Form1 类中为 Form2 按钮单击事件签名：

```
// Form1's button5 clicked event handler.
private void OnButton5Clicked(object sender, EventArgs e)
{
    form2.button1.click += this.OnSearchButtonClicked;
}

// form2.button1 clicked event handler.
// this method will rise when form2.button1 clicked.
private void OnSearchButtonClicked(object sender, EventArgs e)
{
    if (form2.textBox1.Text == "")
        {
            MessageBox.Show("Please enter keyword to search");
        }
        else 
        {
            // unsign from event!!!
            form2.button1.click -= this.OnSearchButtonClicked;

            // here you can use form2.textBox1.text
            string searchRequest = form2.textBox1.Text;
        }

    // your business-logic...
} 
```

但是，@BigYellowCactus 和@Gerald Versluis 提出的答案更简单，更可取。

By the way, do not use default button names. It'll be hard to understand their purposes in future. You can rename *form1*.**button5** in *form1*.**showFindWindowButton** and *form2*.**button1** in *form2*.**startSearchButton**.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:37:53.007

几天前，我在我的项目中使用了一个简单的解决方案。我建议使用内部类形式。创建一个普通表单来获取搜索字符串（就像你做的那样），例如 fSearch，然后使用 ShowModal 来显示它而不是 Show()。这是一个示例（伪 C#）：

```
class MainClass : form
{
  String search = String.Empty;
  private void button5_Click(object sender, EventArgs e)
  {
     SearchString s = new SearchString();
     s.ShowModal();

     search = s.search;
  }
.
.

  class SearchString : Form
  {

     public String strString = String.Empty;

     private void btnOK_Click(object sender, EventArgs e)
     {
      this.strString = text1.text;
      this.close();
      }
  }
} 
```

# java - Java 中如何为“new Integer(1)”分配内存？

> ID：11791074
> 
> 赞同：1
> 
> 时间：2012-08-03T07:18:52.597
> 
> 标签：java, memory-management

我对java的内存分配技术有点困惑。任何人都可以帮助我，java将如何为以下代码分配内存？

```
Integer a;
a = new Integer(1); 
```

我问的是`Integer a`，jvm 将创建 64 位引用，并`a = new Integer(1)` 为此分配更多内存来存储值 1。这是正确的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T07:20:04.937

`Integer a;`将在堆栈中分配内存以保存参考值并初始化为`null`

`new`在堆内存中创建实例

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:00:05.050

大多数 JVM（甚至是 64 位的）都使用 32 位引用。（较新的 JVM 使用 32 位引用来处理高达近 32 GB 的堆）引用位于堆栈或 CPU 寄存器中，通常不计算在内。Integer 在堆上分配。

```
Integer i = new Integer(1); // creates a new object every time.
Integer j = 1; // use a cached value. 
```

使用自动装箱不仅更短，而且可以更高效，因为它可以使用缓存。

当然最有效的是

```
int k = 1; // not object created and no heap used. 
```

对于自动装箱的值，与基元相比，性能差异非常小，并且参考可能与`int`值的大小相同。但是，对于较大的值，可能存在显着的性能差异。

# c - 库的 Makefile

> ID：11791076
> 
> 赞同：12
> 
> 时间：2012-08-03T07:18:57.300
> 
> 标签：c, makefile, static-libraries

每次我想使用库执行程序时，我都必须在终端上运行这 4 个命令。

线条是

```
cc -m32 -c mylib.c
ar -rcs libmylib.a mylib.o
cc -m32 -c prog.c
cc -m32 prog.o -L. -lmylib
./a.out 
```

如何为上述命令制作一个 makefile 并运行它？详细的程序将不胜感激。谢谢。

* * *

编辑：这是解决方案：

```
a.out: prog.o libmylib.a
      cc prog.o -L. -lmylib

prog.o: prog.c mylib.h

libprint_int.a: mylib.o
      ar -rcs libmylib.a mylib.o

print_int.o: mylib.c mylib.h

clean:
      rm a.out prog.o libmylib.a mylib.o 
```

这在第 2 行出现错误，因为我使用了空格而不是制表符。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T07:42:13.737

就像是：

```
program_NAME := a.out

SRCS = mylib.c prog.c

.PHONY: all

all: $(program_NAME)

$(program_NAME): $(SRCS) 
    ar -rcs libmylib.a mylib.o
    cc -m32 prog.o -L. -lmylib 
```

可能会让你开始

我自己才刚刚开始使用makefile，我认为它们非常棘手，但是一旦你让它们工作，它们会让生活变得更轻松（这可能充满了错误，但一些更有经验的SO人员可能会帮助修复它们）

至于运行，请确保将文件保存为“Makefile”（大小写很重要）

然后从 cmd 行（确保你 cd 到包含 Makefile 的目录）：

```
$ make 
```

就是这样！

*更新*

如果中间静态库是多余的，您可以使用这样的 Makefile 跳过它：

```
program_NAME := a.out

SRCS = mylib.c prog.c
OBJS := ${SRCS:.c=.o}

CFLAGS += -m32

program_INCLUDE_DIRS := 
program_LIBRARY_DIRS :=
program_LIBRARIES := mylib

CPPFLAGS += $(foreach includedir,$(program_INCLUDE_DIRS),-I$(includedir))
LDFLAGS += $(foreach librarydir,$(program_LIBRARY_DIRS),-L$(librarydir))
LDFLAGS += $(foreach library,$(program_LIBRARIES),-l$(library))

CC=cc

LINK.c := $(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS)

.PHONY: all

all: $(program_NAME)

$(program_NAME): $(OBJS) 
    $(LINK.c) $(program_OBJS) -o $(program_NAME) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:23:34.440

我认为没有比make命令的官方文档更详细的程序了：[http ://www.gnu.org/software/make/manual/make.html#Overview](http://www.gnu.org/software/make/manual/make.html#Overview)

基本上，您必须创建一个目标并将您的命令放入其中。如果您希望它在您键入“make”时工作，目标可以是“全部”。一个好的 makefile 肯定会使用变量等来保持它对 lib/sources 添加的灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:55:28.053

[Cprogramming.com](http://www.cprogramming.com/tutorial/makefiles.html)中提供了了解 make 文件的最简单教程。一旦你理解了它，你就可以阅读[制作文件](http://www.gnu.org/software/make/manual/make.html)手册。

# java - 在 Java 字符串中将 # 替换为 \u0023

> ID：11791077
> 
> 赞同：0
> 
> 时间：2012-08-03T07:19:02.177
> 
> 标签：java, string, replace

在如下所示的 Java 字符串中替换`#`为：`\u0023`

> {subjectCategory:"s123", subjectId:"111222333", content:"test #comment999", ownerId:"111", ownerName:"tester"}

```
String.replace("#","\\u0023"); 
```

我已经尝试过上面的功能，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:21:42.893

您需要用另一个反斜杠转义反斜杠：

```
string = string.replace("#", "\\u0023"); 
```

测试：

```
String s = "hello # world";
s = s.replace("#","\\u0023");
System.out.println(s); // prints hello \u0023 world 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T07:22:28.777

**不要忘记分配给变量**：

```
String toUse = myString.replace("#", "\\u0023"); 
```

可能，您希望在`replace()`调用后使用相同的字符串。但是，字符串是**不可变**的，因此将通过`replace()`调用创建一个新字符串。你需要使用它，所以使用`toUse`变量。

**注意：**正如评论中所说，您也可以再次使用旧变量，而不是声明新变量。但确保将`replace`调用结果分配给它：

```
myString = myString.replace("#", "\\u0023"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:23:17.117

您需要在`replace`要替换的字符串实例上应用，而不是静态方法`String`：

```
myString="test #comment999";
myString.replace("#", "\\u0023"); 
```

# c - 这个奇怪的函数将字符串转换为二进制吗？

> ID：11791078
> 
> 赞同：0
> 
> 时间：2012-08-03T07:19:09.233
> 
> 标签：c, binary, unsigned-char

我正在对我们系统中的旧 c 代码进行错误修复（奇怪的是，它不是标准 c。它不是由 gcc 编译的）。我来到这个代码，它似乎正在将字符串转换为无符号字符格式的二进制代码。逻辑让我感到困惑（粗体部分）。这对你们有意义吗？

我需要理解这段代码，因为我必须复制它并在另一个长度不是 13 而是 11 的字符串上重用它。

```
char l_call_dest_no[25];
int l_loop_cnt;
unsigned char l_bcd_byte;
unsigned char l_call_dest_no_in_bcd[13];

...some other code as input...

    for (l_loop_cnt = 0; l_loop_cnt < 13; l_loop_cnt++)
            {
                l_bcd_byte = '\0';
                switch (l_call_dest_no[l_loop_cnt * 2])
                {
                    case '0':
                    case '1':
                    case '2':
                    case '3':
                    case '4':
                    case '5':
                    case '6':
                    case '7':
                    case '8':
                    case '9':
                        l_bcd_byte = (l_call_dest_no[l_loop_cnt * 2] - 48) * 16;
                        break;
                    case 'A':
                        l_bcd_byte = 10 * 16;
                        break;
                    case 'B':
                        l_bcd_byte = 11 * 16;
                        break;
                    case 'C':
                        l_bcd_byte = 12 * 16;
                        break;
                    case 'D':
                        l_bcd_byte = 13 * 16;
                        break;
                    case 'E':
                        l_bcd_byte = 14 * 16;
                        break;
                    case 'F':
                    case ' ':
                        l_bcd_byte = 15 * 16;
                        break;
                    default:
                        printf("*** invalid call destination number ***\n");
                        return_status = FAILURE;
                        break;
                }

                if (l_loop_cnt < 12)
                {
                    switch (l_call_dest_no[l_loop_cnt * 2 + 1])
                    {
                        case '0':
                        case '1':
                        case '2':
                        case '3':
                        case '4':
                        case '5':
                        case '6':
                        case '7':
                        case '8':
                        case '9':
                            l_bcd_byte = l_bcd_byte + (l_call_dest_no[l_loop_cnt * 2 + 1] - 48) ;
                            break;
                        case 'A':
                            l_bcd_byte = l_bcd_byte + 10;
                            break;
                        case 'B':
                            l_bcd_byte = l_bcd_byte + 11;
                            break;
                        case 'C':
                            l_bcd_byte = l_bcd_byte + 12;
                            break;
                        case 'D':
                            l_bcd_byte = l_bcd_byte + 13;
                            break;
                        case 'E':
                            l_bcd_byte = l_bcd_byte + 14;
                            break;
                        case 'F':
                        case ' ':
                            l_bcd_byte = l_bcd_byte + 15;
                            break;
                        default:
                            printf("*** invalid call destination number ***\n");
                            return_status = FAILURE;
                            break;
                    }
                }
                else
                    l_bcd_byte = l_bcd_byte + 15;

                if (l_bcd_byte == 255)
                    l_call_dest_no_in_bcd[l_loop_cnt] = '\0';
                else
                {
                    l_call_dest_no_in_bcd[l_loop_cnt] = l_bcd_byte;
                        l_call_dest_no_bcd_length++;
                }
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:30:46.430

该代码将包含十六进制（例如）的字符串转换`"002A40FF160AD"`为包含原始二进制值（例如）的字节数组`{0x00, 0x2A, 0x40, 0xFF, 0x16, 0x0A, 0xDF}`。该函数有一些陷阱：

*   奇怪的是，字符串的长度不是偶数，所以在字符串的末尾暗示了一个额外的“F”。（`else l_bcd_byte = l_bcd_byte + 15;`）。
*   额外的奇怪之处在于`"FF"`转换为 0x00。
*   `'F'`和（空格）都`' '`被视为`'F'`
*   该函数还可以作为字符串到压缩十进制 (BCD) 转换器，因为压缩十进制看起来像仅使用数字 0-9 的十六进制数（例如，十进制中的 15 是`0x15`压缩十进制）。~~但是，最终`F`使此功能复杂化。~~

**编辑**

最后的 F 使压缩十进制格式实际上*更易于*使用：压缩十进制数字末尾的 F 表示该数字是无符号的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:25:32.157

那是一个定制的 BCD 变压器。查找 BCD 格式并很好地掌握如何将数字从 BCD 格式转换为常规数字。

之后，如果您要迁移旧代码，请确保在函数中移动整个代码块。即使它有一个错误。旧代码可能取决于该错误。在您证明通向旧代码的所有代码路径都被覆盖并且没有错误之后，您可以开始修复/更改行为。

我确实有一个问题要问你，为什么它不是标准的 C 代码？gcc 在该代码上给您的错误是什么？你的 -std= 参数是什么样的？（我会通过回复你的帖子来问这个问题，但显然我不允许这样做。）

# c++ - atoi 和字符串数组

> ID：11791080
> 
> 赞同：0
> 
> 时间：2012-08-03T07:19:33.723
> 
> 标签：c++, arrays, string, atoi

我有一个字符串数组和一个整数数组。我想将字符串数组的元素转换为整数，然后将它们存储在整数数组中。我写了这段代码：

```
string yuzy[360];
int yuza[360];

for(int x = 0;x<360;x++)
{
    if(yuzy[x].empty() == false)
    {

         yuza[x]=atoi(yuzy[x]);
         cout<<yuza[x]<<endl;
    }
    else
        continue;
} 
```

这段代码给出了这个错误：error: cannot convert 'std::string {aka std::basic_string}' to 'const char*' for argument '1' to 'int atoi(const char*)'

当我在 atoi 函数中写入字符串（-75dbm）的内容时，它工作正常。但是当我写 (yuzy[x]) 时，我得到了错误。如何使 atoi 与字符串数组一起工作？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T07:21:16.780

`atoi()`接受 C 字符串（字符指针）而不是 C++ 字符串对象。利用

```
atoi(yuzy[x].c_str()); 
```

反而。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T07:24:05.870

作为 的替代方法，如果您支持 C++11 `atoi`，您可以使用[std::stoi和相关函数。](http://en.cppreference.com/w/cpp/string/basic_string/stol)

```
yuza[x] = std::stoi(yuzy[x]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:23:34.053

`atoi`接受一个 c 风格的字符串作为参数，所以，你可以使用`atoi(yuzy[x].c_str());`

# php - 获取当前月份，然后显示动态索引页面

> ID：11791084
> 
> 赞同：0
> 
> 时间：2012-08-03T07:19:50.170
> 
> 标签：php, date, calendar

我有五个文件，即`index.php`和`first.php .. fourth.php`.

`first.php`through`fourth.php`表示一个年历，分为 4 个季度（每个文件 3 个月）。现在，我只需要在索引页面中显示当前季度。例如，既然是 8 月，我的索引应该显示`third.php`，其中包含 7 月、8 月和 9 月。简而言之，我需要使我的索引页动态化。

这是我当前的代码，显然是静态的：

```
 if(!isset($_GET['quarter']) && !isset($_GET['year'])){
    include ('/thirdq2012.php');
    } 
```

另外，我将如何测试这个？

编辑：问题已解决！我还有一个问题，在每一页的顶部，我有一个下拉年份按钮，它从 2011、2012、2013 切换。我的下一个问题是如何在不创建多个文件的情况下显示所选年份的特定季度？例如，2011 年第 1 季度（1 月、2 月、3 月）包含用户输入的数据和其他值，但 2012 年第 1 季度不包含任何内容。我将如何从那里打开？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T07:24:41.053

```
<?php

    $now   = new DateTime();
    $month = (int)$now->format("m");

    if ($month >= 1 AND $month <= 3) {
        echo "First Quarter!";
    }
    elseif ($month >= 4 AND $month <= 6) {
        echo "Second Quarter!";
    }
    elseif ($month >= 7 AND $month <= 9) {
        echo "Third Quarter!";
    }
    else {
        echo "Fourth Quarter!";
    } 
```

# mysql - ERROR 1241 (21000): 操作数应在多个选择中包含 1 列

> ID：11791085
> 
> 赞同：0
> 
> 时间：2012-08-03T07:19:49.990
> 
> 标签：mysql

```
 select
        (select sum(sal)as sal_tp, sum(local_conv) as lc_tp from budget_tp),
        (select sum(sal) from budget_fos_veri) as sal_veri,
        (select sum(sal) from budget_fos_picks)as sal_pick,
        (select sum(sal) from budget_bpo_other)as sal_bpo; 
```

我明白了

```
ERROR 1241 (21000): Operand should contain 1 column(s). 
```

有什么方法可以完成我的要求吗？该查询实际上是一个示例。我有许多包含多列的表，我想查看所有表的各个列的总和，我只是尝试在第一行一次查看两个我收到此错误，如果我尝试仅检索一列，那么它美好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:27:22.180

每个子查询应返回一个字段。试试你的查询 -

```
 select
        (select sum(sal) from budget_tp) as sal_tp,
        (select sum(local_conv) from budget_tp) as lc_tp,
        (select sum(sal) from budget_fos_veri) as sal_veri,
        (select sum(sal) from budget_fos_picks)as sal_pick,
        (select sum(sal) from budget_bpo_other)as sal_bpo; 
```

另一个：

```
 select
        (select concat(sum(sal), ',' ,sum(local_conv)) from budget_tp) as sal_tp_and_lc_tp
        (select sum(local_conv) from budget_tp) as lc_tp,
        ... 
```

# java - 在 java 1.4 中以编程方式设置 SOAP 绑定 1.2

> ID：11791092
> 
> 赞同：1
> 
> 时间：2012-08-03T07:20:01.573
> 
> 标签：java, web-services, soap, soap-client

您好，我有一个 Java Web 服务要调用。Web 服务正在使用 SOAP Binding 1.2。

通过 Oracle J-Developer 向导（Oracle IDE 10.1.2.18.57），我从 WSDL 文件开发了客户端。

但是正在创建的 SOAP 消息使用的是 SOAP Binding 1.1，因此在调用时会出现异常。

我有 Java 1.4，我需要以编程方式将 SOAP 绑定设置为 1.2。

如果可以做到这一点，请提供帮助。

如果没有，请提供一些替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:18:29.837

我做了一些研发，McDowell 的评论是正确的，我必须使用 Java 1.5 来做这样的事情。甚至在没有注释的情况下做到这一点。

谢谢

# oracle - DDL Oracle 到 Postgres 的转换

> ID：11791103
> 
> 赞同：2
> 
> 时间：2012-08-03T07:20:41.727
> 
> 标签：oracle, postgresql, ddl, database-migration, dbmigrate

我在现有应用程序的 Oracle 中有一个非常巨大的 DDL 脚本，它没有存储过程。只是表、序列和约束。

将其转换为 Postgres 的最佳方法是什么？

有人说最好用手做，有人说有免费的工具。任何人都可以建议我最好的方法吗？

如果是手动的，请建议我必须进行哪些更改。

下面给出了 Oracle DDL 的示例， **请在转换为以下 DDL 的 Postgres 时通知要进行的更改**。

```
-  DDL for Table ACTOR_ROLE_INFO
--------------------------------------------------------

  CREATE TABLE "PAYTM_RELEASE1"."ACTOR_ROLE_INFO" 
   (    "ACTOR_ROLE_ID" NUMBER, 
    "ACTOR_ID" NUMBER, 
    "ROLE_ID" NUMBER, 
    "STATUS" NUMBER, 
    "CREATED_BY" NUMBER, 
    "CREATED_ON" TIMESTAMP (6) WITH TIME ZONE, 
    "MODIFIED_BY" NUMBER, 
    "MODIFIED_ON" TIMESTAMP (6) WITH TIME ZONE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ACTOR_TYPES
--------------------------------------------------------

  CREATE TABLE "PAYTM_RELEASE1"."ACTOR_TYPES" 
   (    "ACTOR_TYPE_ID" NUMBER, 
    "ACTOR_TYPE" VARCHAR2(100 BYTE), 
    "ACTOR_DESCRIPTION" VARCHAR2(100 BYTE), 
    "CREATED_BY" NUMBER, 
    "CREATED_DATE" TIMESTAMP (6) WITH TIME ZONE, 
    "MODIFIED_BY" NUMBER, 
    "MODIFIED_DATE" TIMESTAMP (6) WITH TIME ZONE
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT)
  TABLESPACE "USERS" ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:14:55.787

使用 Ora2PG [http://sourceforge.net/projects/ora2pg/](http://sourceforge.net/projects/ora2pg/)开始，但不要盲目使用生成的架构。正如克雷格建议的那样，看看数据类型。NUMBER 到 NUMERIC 的转换虽然简单，但会占用更大的磁盘空间。它还会导致更大的索引大小，这将减慢整个应用程序的速度。您生成的架构不应包含任何 NUMERIC 列，除非您的应用程序确实需要 abritrary percision 并且它应该是例外，而不是规则。

# payment-gateway - paymate return url 接受付款后不返回帖子

> ID：11791104
> 
> 赞同：1
> 
> 时间：2012-08-03T07:20:43.853
> 
> 标签：payment-gateway

paymate 中已成功接受付款，然后当它将客户返回到我的网站时，它根本不返回输出参数。我用来发布值的付款网址： [https ://www.paymate.com/PayMate/ExpressPayment?mid=mypaymateID&amt=100&ref=123&return=http://bondiclassifieds.com/paymatereturn.php&popup=true](https://www.paymate.com/PayMate/ExpressPayment?mid=mypaymateID&amt=100&ref=123&return=http://bondiclassifieds.com/paymatereturn.php&popup=true)

在返回 URL 上，我同时使用 POST 和 REQUEST 来捕获 paymate 传递的值 - 但我什么也没得到。

他们的支持只是给了我这个 URL——我从第一天就开始关注这个 URL：http: [//www.paymate.com/cms/index.php/resources/integrating-paymate/website-a-cart-integration](http://www.paymate.com/cms/index.php/resources/integrating-paymate/website-a-cart-integration)

任何遇到类似问题的人？我在我的网站和 retun URL 中使用自定义 PHP 代码，并在他们谈论输入和输出参数时了解 paymate 方法的基础知识。

谢谢

# iphone - 如果我想在 iPhone 中的 Facebook 上发布视频，该代码需要做些什么更改？

> ID：11791105
> 
> 赞同：0
> 
> 时间：2012-08-03T07:20:47.487
> 
> 标签：iphone, ios, facebook-graph-api, video, upload

我想在 Facebook 上传视频。

为此，我正在使用我的这个旧代码，但它不允许我在 Facebook 上发布视频。

```
- (id)initWithImage:(UIImage *)upload_image {

if (self = [super init]) {
    self.uploadImage = upload_image;
}
return self;
} 
```

/** * 通过这种方式，该类很容易扩展到其他文件 * 类型，因为 FB 允许我们将它们上传到图表中... * 对代码几乎没有任何修改 **/

```
- (void)appendDataToBody:(NSMutableData *)body {

/**
 * Facebook Graph API only support images at the moment, surely videos must occur soon.
 **/

        NSData *picture_data = UIImagePNGRepresentation(uploadImage);
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"media\";\r\nfilename=\"media.png\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:picture_data];

} 
```

谁能告诉我我应该在这里改变什么？在 Facebook 上发布视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:50:25.480

您可以下载以下链接提供的官方视频上传教程

[视频上传的官方演示](https://developers.facebook.com/attachment/VideoUploadTest.zip)

并更改为创建的 API 密钥

[https://developers.facebook.com](https://developers.facebook.com)

在那里复制API密钥并放入以下方法

```
- (void)viewDidLoad
{
    facebook = [[Facebook alloc] initWithAppId:@"Your Key"];
} 
```

并且也更改为 plist 文件

![在此处输入图像描述](../Images/82a64dddbf15f79a71bf4137ed55c4c7.png)

谢谢并恭祝安康，

霓虹塞缪尔

# sql-server - 检测和比较sql server数据变化？

> ID：11791110
> 
> 赞同：0
> 
> 时间：2012-08-03T07:21:41.963
> 
> 标签：sql-server, asp.net-mvc

在 StackOverflow 中，例如，如果用户的点数大于 20，他们可以投反对票。检测这些变化的最佳方法是什么。我正在使用 ASP.NET MVC。我应该用 C# 控制数据更改和数据比较还是在数据库中解决（存储过程、函数等）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:27:36.213

我真的不认为会有一个万能的答案，这取决于。

对于您的示例，您将不得不在某个时候从数据库中获取信息。因此，您可以选择由数据库进行计算，也可以由您的业务逻辑进行计算。无论哪种方式，这几乎肯定会以布尔字段结束。

对于其他示例，它可能更复杂并且需要相当多的逻辑来确定状态，在这种情况下，DB 将是最好的选择。

再说一遍，它可能是依赖的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:26:16.373

这些需求应该由您的业务层处理，而不是由数据库处理。

# algorithm - 确定文本宽度的算法

> ID：11791113
> 
> 赞同：0
> 
> 时间：2012-08-03T07:21:49.110
> 
> 标签：algorithm

在我用一种未命名的语言编写的程序中，我有一个宽度未知的文本块，而我所知道的只是该文本块的最大宽度。鉴于此信息，我需要找出此文本可能的最小宽度（假设我不能使用字符/字形或字符数的度量）。到目前为止，我只有一个蛮力解决方案，如下所示：

```
for (int i = .1; i < maxTextWidth; i += .1)
{
       if (textFitsInGivenWidth(text, i))
       {
             textWidth = i;
             break;
       }
} 
```

我想尽可能地尝试和优化它。我的第一个想法是使用二进制搜索，但我无法以正确的方式实现它（并且不确定它是否可能）。有没有人对我可以在这里做些什么以仅使用我在上述解决方案中给出的内容来改善运行时间有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:34:14.443

二进制搜索确实是答案。

[http://en.wikipedia.org/wiki/Binary_search_algorithm](http://en.wikipedia.org/wiki/Binary_search_algorithm)

对于整数二进制搜索，它可以是：

```
minW=0, maxW=maxTextWidth
while(minW<=maxW){

  mid=(minW+maxW)/2;
  if (textFitsInGivenWidth(text, mid)){
    maxW=mid-1;
  }else{
    minW=mid+1;
  }
}
textWidth=minW 
```

这个想法是，如果你有`textFitsInGivenWidth(text, mid) == True`，

那么你必须`textFitsInGivenWidth(text, i) == True`为所有`i>=mid`，

如果它是假的，那么你就拥有`textFitsInGivenWidth(text, i) == False`了`i<=mid`

所以每次我们检查要检查的区间的中间，并将区间减半。时间为 O(logN)，其中 N=maxTextWidth

更新：对于浮动支持，请参见下面的示例：

```
float minW=0, maxW=maxTextWidth
while(1){
  if (maxW-minW<0.05)
    break;
  float mid=(minW+maxW)/2;
  if (textFitsInGivenWidth(text, mid)){
    maxW=mid;
  }else{
    minW=mid;
  }
}

textWidth=minW 
```

要获得 0.1 的精度，只需将最后一行更改为：

```
textWidth=int(minW*10)/10.0 
```

# jquery - 从滚动中删除滑块

> ID：11791116
> 
> 赞同：1
> 
> 时间：2012-08-03T07:22:04.937
> 
> 标签：jquery, scroll

我尝试为智能手机phonegap + html5 + jquerymobile编写软件遇到问题

我需要在一页上放两个列表，以便它们是独立的，即每个都有自己的卷轴。我得到了[http://jsfiddle.net/nalsur/skqmy/1/](http://jsfiddle.net/nalsur/skqmy/1/)

但坦率地说，它看起来并不多：（我想保留当前功能但要删除滑块，这样两个列表之间就没有任何项目

这可能吗？

谢谢

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:25:26.727

如果我理解正确 - 尝试使用 only`overflow:auto;`并删除`overflow:scroll;`. 这意味着只有在需要时才会显示滚动条。

# php - Zend 框架刷新

> ID：11791121
> 
> 赞同：0
> 
> 时间：2012-08-03T07:22:30.977
> 
> 标签：php, zend-framework, reflection

在 zend 框架中，在模块中，如果 XYZ 人在一个模块中执行某些操作，我有不同的模块，我们如何在不反映它的情况下反映另一个人的更改。例如：-如果 XYZ 人删除任何记录，它应该反映在其他人模块中无需刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:29:02.630

您需要使用 AJAX 并每隔几秒左右检查一次更改。

您可以尝试[这篇文章](http://blog.jtclark.ca/2010/03/zend-framework-and-ajax/)作为开始。

# javascript - 使用 javascript 删除 HTML 中的远程内容链接

> ID：11791122
> 
> 赞同：1
> 
> 时间：2012-08-03T07:22:52.243
> 
> 标签：javascript, html, dom

我必须扫描 HTML 以查找远程内容（Iframe 标签、Img 标签、脚本标签等），并根据某些黑名单删除其中存在的链接。我能够删除 src 指向黑名单 URL 的 iframe 、img 、脚本标签。

```
var mySpan = document.createElement(\"span\");
 mySpan.innerHTML = \"\";
 var block = p[key];
 var re = new RegExp(block);
 a = document.getElementsByTagName('iframe');
 for(i=0;i<a.length;i++)
 {
    var str = a.item(i).src;
    if(str.match(re))
     {

          a[i].parentNode.replaceChild(mySpan, a[i]);
        // + "a.item(i).src = '';
    }
 } 
```

对于 script 和 img 标签也是如此。但是可以有更多这样的标签。我可以有一个通用的解决方案来遍历 HTML 中的所有标签并查找/替换被列入黑名单的链接吗？我对 Javascript 非常陌生，所以它的基础知识有点薄弱。[这个解决方案](https://stackoverflow.com/a/828330/340068)可以在我的情况下工作吗？我不想使用 JQuery 等库，因为我在 Android 上这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:03:28.043

不要在 HTML 上使用任何正则表达式 - 使用 DOM。

1.  查看 HTML 标准以获取可包含外部链接的标签的属性列表。
2.  循环从[`document.getElementsByTagName(tagname)`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName).
3.  [`.getAttribute`](https://developer.mozilla.org/en/DOM/element.getAttribute)根据黑名单检查属性并使用and进行清理[`.removeAttribte`](https://developer.mozilla.org/en/DOM/element.removeAttribute)（奖励：您将拥有标准化的数据，无需担心人们试图通过时髦的转义偷偷溜走！）。
4.  其中许多属性将被称为`src`，因此您可能希望`"*"`使用此属性循环标记名称，以防万一/偏执。或者只是遍历所有元素的所有属性。虽然这会很慢，但仍然不能保证有人不会避免使用难以与纯文本区分的 URL（如 IP 或没有协议的域名），因此我建议不要进行全面扫描。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:10:08.477

获取文档中的所有元素`document.getElementsByTagName('*')`

一旦你这样做了，使用你认为适合的代码来检查每个元素是否符合你的条件。

这将确保您已经检查了所有内容，如果您使用的是 jQuery，我可以让思考变得更简单。

但是非常尊重作为一个纯粹的 JavaScripter ！

# javascript - onunload 适用于浏览器刷新但不适用于关闭

> ID：11791123
> 
> 赞同：0
> 
> 时间：2012-08-03T07:22:54.600
> 
> 标签：javascript

我写了一些代码，在离开页面之前会要求确认。如果我说是离开页面，那么需要进行一些清理。现在的问题是`onunload`方法得到了`executed for page refresh`但是`not for page close`，为什么？

代码：

```
function checkBrowser(){

    window.onbeforeunload=warning;
    window.onunload = unloadPage;

}
function unloadPage() {
        if($('#loginOrNot').val() == 'loggedIn'){
            setTheExpertStatusToOffline();
            cleanUpChat();
        }
}
function warning(){
        if($('#loginOrNot').val() == 'loggedIn'){
            return "You are leaving the page"; 
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T06:37:27.653

```
window.onload=function(){

document.getElementById('refresh').onclick=function() {
    window.onbeforeunload = null;
    window.location.reload(); // replace with your code
}

window.onbeforeunload = function() {        
    return "Are you sure you want to leave?";        
}

}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:28:12.673

`onunload`事件仅在页面被重定向或刷新时起作用。仅`onbeforeunload`在关闭时有效..

**编辑：** 简单来说原因可能是一旦浏览器关闭，它就不会执行应该为`onunload`事件发生的代码

# php - MySQL中的“许多连续中断的连接请求”是什么？

> ID：11791128
> 
> 赞同：8
> 
> 时间：2012-08-03T07:23:15.390
> 
> 标签：php, mysql

我经常遇到以下错误：

*PHP 致命错误：未捕获的异常 'PDOException' 与消息 'SQLSTATE[HY000] [1129] 主机'MY SERVER' 由于许多连接错误而被阻止；使用 'mysqladmin flush-hosts' 解除阻塞*

*使用常规（如 crontab） mysqladmin flush-hosts*命令或增加 max_connect_errors 系统变量很容易解决问题，如此[处](http://dev.mysql.com/doc/refman/5.1/en/blocked-host.html)所述。

但 ！什么是“**许多连续中断的连接请求**”，为什么会这样？

我宁愿阻止上游的问题，而不是纠正阻塞。

MySQL 版本：5.5.12。我正在使用 Zend Framework 1.11.10 和 Doctrine 2.1.6。

我的 PHP 代码中没有 mysql_close() 和 mysqli_close()。

max_connect_errors 的默认值为 10，我还不想增加它，我想了解为什么会出现错误。我使用 cron，每 5 分钟执行一次 mysqladmin flush-hosts 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:39:36.440

此响应设计为一种安全措施，是达到 mysql 的**max_connection_errors**值的结果。 [这是](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/communication-errors.html "Oracle 在这方面的资源")Oracle 提供的链接，其中详细说明了大多数可能的原因和解决方案。

最终，这意味着有太多连续的连接失败，以至于 MySql 停止响应连接尝试。

> 我使用 cron，每 5 分钟执行一次 mysqladmin flush-hosts 命令。

由于您如此迅速地达到此限制，因此只有几个可能的罪魁祸首：

1.  服务器未正确配置为使用 PDO。
2.  运行代码包括非常频繁地创建新连接。
    *   导致快速达到**max_connections**值，导致所有后续连接尝试失败......从而快速达到**max_connection_errors**限制。
3.  代码遇到无限循环或级联故障。
    *   明显的可能性，但必须提及。
    *   （即：pageA调用pageB和pageC，pageC调用PageA）
4.  PDO 运行良好，但有些脚本需要很长时间才能运行，或者永远不会结束。
    *   最简单的方法是关闭**max_execution_time**。

无论如何，这很可能很难追查。

1.  记录每个 mysql 连接尝试的堆栈跟踪，以查找导致此问题的代码。
2.  检查 mysql.err 日志文件

虽然 PDO 不需要显式关闭 mysql 连接，但对于这种情况，有一些做法可以防止此类 ServerAdmin 搜索。

*   始终明确关闭 mysql 连接。
    *   构建一个[简单的类](http://edrackham.com/php/simple-php-mysql-class/ "edrackham.com")来处理所有连接。打开，返回数组，关闭。
    *   唯一需要保持连接打开的是游标。
*   始终在一个且只有一个文件中定义连接参数，该文件包含在需要的任何地方。
*   除非你知道你需要它并且你知道服务器可以处理它，否则永远不要增加**max_execution_time 。****如果**您需要它，请仅显式增加需要它的脚本的值。*php.net/manual/en/function.set-time-limit.php*
    *   如果增加**max_execution_time**，则增加**max_connections**。

dev.mysql.com/doc/refman/5.0/en/cursors.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:50:03.507

这意味着 mysqld 收到了许多来自给定主机的连接请求，这些请求在中间被中断。查看文档中的此[链接](http://dev.mysql.com/doc/refman/5.0/en/blocked-host.html)以获取更多信息。

# android - Android 中的 ListView 是如何工作的？我很困惑

> ID：11791134
> 
> 赞同：1
> 
> 时间：2012-08-03T07:23:35.813
> 
> 标签：android, android-listview, android-relativelayout, android-arrayadapter

我在android中尝试了一个简单的列表视图。我从某个网站上得到了一个例子。有效。下面的代码：

主布局文件：（res/layout/main.xml）

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
      android:orientation="vertical"  
      android:layout_width="fill_parent"  
      android:layout_height="fill_parent">  

    <ListView android:layout_width="fill_parent"   
      android:layout_height="fill_parent"   
      android:id="@+id/mainListView">  
    </ListView>  

</LinearLayout> 
```

行文件：（res/layout/simplerow.xml）

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"  
 android:id="@+id/rowTextView"   
 android:layout_width="fill_parent"   
 android:layout_height="wrap_content"  
 android:padding="10dp"  
 android:textSize="16sp" >  
</TextView> 
```

主要活动：

```
package com.windrealm.android;  

import java.util.ArrayList;  
import java.util.Arrays;  

import android.app.Activity;  
import android.os.Bundle;  
import android.widget.ArrayAdapter;  
import android.widget.ListView;  

public class SimpleListViewActivity extends Activity {  

  private ListView mainListView ;  
  private ArrayAdapter<String> listAdapter ;  

  /** Called when the activity is first created. */  
  @Override  
  public void onCreate(Bundle savedInstanceState) {  
  super.onCreate(savedInstanceState);  
  setContentView(R.layout.main);  

  // Find the ListView resource.   
  mainListView = (ListView) findViewById( R.id.mainListView );  

  // Create and populate a List of planet names.  
  String[] planets = new String[] { "Mercury", "Venus", "Earth", "Mars",  
                                  "Jupiter", "Saturn", "Uranus", "Neptune"};    
  ArrayList<String> planetList = new ArrayList<String>();  
  planetList.addAll( Arrays.asList(planets) );  

  // Create ArrayAdapter using the planet list.  
  listAdapter = new ArrayAdapter<String>(this, R.layout.simplerow, planetList);  

  // Add more planets. If you passed a String[] instead of a List<String>   
  // into the ArrayAdapter constructor, you must not add more items.   
  // Otherwise an exception will occur.  
  listAdapter.add( "Ceres" );  
  listAdapter.add( "Pluto" );  
  listAdapter.add( "Haumea" );  
  listAdapter.add( "Makemake" );  
  listAdapter.add( "Eris" );  

  // Set the ArrayAdapter as the ListView's adapter.  
  mainListView.setAdapter( listAdapter );        
  }  
} 
```

我试图添加图像，甚至不是动态的。我只是想在文件中添加一个布局`simplerow.xml`。但它不起作用。

下面的代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/songs"
        android:src="@drawable/song_bg" />

    <ImageView
        android:id="@+id/albumArt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="5dp"
        android:contentDescription="@string/album"
        android:src="@drawable/albumart_shanghai" />

    <TextView
        android:id="@+id/rowTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/albumArt"
        android:layout_toRightOf="@+id/albumArt"
        android:layout_marginLeft="10dp"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@android:color/black" />

    <ImageButton
        android:id="@+id/imageView3"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:background="@null"
        android:contentDescription="@string/arrow"
        android:src="@drawable/arrow_icon" />

</RelativeLayout> 
```

我们不能在 ListView 中添加相对布局？请帮助我从一个月开始就对 ListView 感到震惊。我什至不能移动一步:(我是java和XML的新手。请有人告诉我正确的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:11:05.633

Vogella给出了完美的理解。请通过它。它甚至为您提供一步一步的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:47:19.503

首先你需要扩展 ListActivity，比如

```
public class MyListActivity extends ListActivity{} 
```

那么您可以简单地将适配器指定为

```
setListAdapter(adapter); 
```

你的布局文件有问题，android list view id应该是`@android:id/list`，android开发者网站说

> 你自己的视图必须包含一个 ID 为“@android:id/list”的 ListView 对象

**编辑**

基本上，您使用的数组适配器构造函数签名是，

```
ArrayAdapter(Context context, int textViewResourceId, List<T> objects) 
```

但是如果你想使用更复杂的布局，使用

```
public ArrayAdapter (Context context, int resource, int textViewResourceId, List<T> objects) 
```

where`textViewResourceId`应该引用布局中的 textview id。

这显然会导致，您可以拥有具有多个文本字段的布局，但给定的文本将显示在 id 指定的文本字段中。

因此，要完成任务，您需要创建自己的适配器来扩展 BaseAdapter。在该适配器中，您需要覆盖

```
public View getView(int position, View convertView, ViewGroup parent) {} 
```

方法，您可以在其中扩展布局并设置适当的值。

我想你至少会对此有所了解，然后看看[这个](http://www.vogella.com/articles/AndroidListView/article.html)关于listview的解释最多的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:40:41.293

**列表视图示例**

**布局文件：**

```
 <?xml version="1.0" encoding="utf-8"?>
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="20sp" >
    </TextView> 
```

**主要活动：**

```
public class MainActivity extends ListActivity {

static final String[] NUM= new String[] { "1", "2", "3",
        "4", "5", "6", "7", "8",
        "9", "10", "11", "12", "13" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new ArrayAdapter<String>(this, R.layout.list_num,NUM));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // When clicked, show a toast with the TextView text
            Toast.makeText(getApplicationContext(),
            ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
        }
    });

}

} 
```

# c++ - 将 QLineEdit 变量的值分配给 QStringList 变量

> ID：11791137
> 
> 赞同：1
> 
> 时间：2012-08-03T07:23:51.397
> 
> 标签：c++, qt, qt4

谁能告诉我如何将 lineEdit 中的所有内容分配给 QStringList 变量？假设我在 QLineEdit 中输入了 xyz，并且我想将其转移到 QstringList 变量，我该怎么做

`QStringList abc;`

如何将所有输入的内容从 lineEdit 转移到 abc？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:49:34.203

您可以简单地将 QLineEdit 的值添加到 QStringList：

```
abc->append(lineEdit->text()); 
```

或者使用来自 QLineEdit 的文本创建新的 QStringList：

```
QStringList abc(lineEdit->text()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:43:36.537

lineedit 可以将其内容导出到 QString

```
QString xLineEditContent = xLineEdit.text(); 
```

然后您可以将此字符串附加到 QStringList

```
QStringList xStringList;
xStringList << xLineEditContent; 
```

它应该可以工作（您也可以组合行以避免 xLineEditContent 实例化）。

# javascript - 在 JavaScript 中获取某个“原型”的所有对象

> ID：11791138
> 
> 赞同：0
> 
> 时间：2012-08-03T07:23:52.087
> 
> 标签：javascript

我最近开始搞乱 JavaScript 并构建自己的 jQuery 插件，并且在使用原型时偶然发现了一个问题（我仍然不太了解，但开始了解它的要点）。我已经对我的问题进行了相当详细的搜索，如果这是一个骗局，我找不到任何道歉的东西。

当 DOM 加载时，我让它在一组元素中循环，并`MyObject`使用在`MyObject.prototype`. 是否有可能在控制台或稍后我可以通过并检索该`MyObject`类型的所有对象？

抱歉，如果我的描述没有多大意义，我是 JavaScript 世界的新手，而且术语让我有点不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T12:54:14.927

我最终建立了一个`MyObject`s 的寄存器并引用它，正如[jfriend00](https://stackoverflow.com/users/816620/jfriend00)在对该问题的评论中所建议的那样，它工作得很好，谢谢大家！

# javascript - Ajax 使用 jquery UI next button click 提交各种输入值

> ID：11791140
> 
> 赞同：6
> 
> 时间：2012-08-03T07:24:01.713
> 
> 标签：javascript, jquery, ajax

我目前正在使用 jquery ui 选项卡和 ajax/post 提交而无需刷新页面。在一些指导下，我已经能够`#wmd-preview`在单击下一步按钮时提交 div。问题是，当在各个选项卡中单击下一个按钮时，我还想同时提交其他字段。

单击下一步按钮时，如何提交不同选项卡中各种输入字段的输入值？[例子](http://webprolearner.ueuo.com/dropdown-menu/test1.php)

*（对于一些测试，我目前有其他输入字段通过 keyup 和计时器设置提交）*

JS- NEXT/Previous 按钮与提交/ajax 合并

```
<script>
        var currentTab = 0;
          $(function() {
            var $tabs = $('#tabs').tabs({
                disabled: [0, 1, 2]
                , select: function() {
                    if (currentTab == 0) {
                        $.ajax({
                        type: "POST",
                        url: "test1.php",
                        data: { "wmdVal": $("#wmd-preview").html() },
            success: function(result) {
                $('#wmd_result').html( $('#resultval', result).html()); 
            }
                      });
                    }
                }
                , show: function(event, ui) {
                    currentTab = ui.index;
                }
            });

            $(".ui-tabs-panel").each(function(i) {
                var totalSize = $(".ui-tabs-panel").size() - 1;
                if (i != totalSize) {
                    next = i + 2;
                    $(this).append("<a href='#' class='next-tab mover' rel='" + next + "'>Next Page &#187;</a>");
                }
                if (i != 0) {
                    prev = i;
                    $(this).append("<a href='#' class='prev-tab mover' rel='" + prev + "'>&#171; Prev Page</a>");
                }
            });

            $('.next-tab, .prev-tab').click(function() {
                var tabIndex = $(this).attr("rel");
                $tabs.tabs('enable', tabIndex)
                    .tabs('select', tabIndex)
                    .tabs("option","disabled", [0, 1]);
                return false;
            });
        });
</script> 
```

**HTML**

```
<div id="tab-1" class="ui-tabs-panel ui-tabs-hide">
  <label for="title">Title</label>
  <input type="text"  id="title" name="title" size="60" autocomplete="off" value="<? $title ?>"/>
           <div id="wmd-editor" class="wmd-panel">
                    <div id="wmd-button-bar"></div>
                    <textarea id="wmd-input" name="wmd-input"></textarea>
           </div>
           <div id="wmd-preview" class="wmd-panel"></div>
           <div id="wmd_result"></div>
           <div id="title_input"style="padding:20px;"></div>
</div>

<div id="tab-2" class="ui-tabs-panel ui-tabs-hide">
    <label for="name">Name</label>
    <input type="text"  id="name" name="name" size="60" autocomplete="off" value="<? $name ?>"/>
    <div id="name_input"></div>         
</div> 
```

**PHP**

```
 <?
if (isset($_POST['title'])){
    $wmdVal = $_POST['title']; 
        echo ('<div id="title_input"><span id="resultval"><h2>Title Echo result:</h2>'.$wmdVal.'</span></div>');
}

if (isset($_POST['wmdVal'])){
        $wmdVal = $_POST['wmdVal']; 
        echo ('<div id="wmd_result"><span id="resultval"><h2>Description Echo result:</h2>'.$wmdVal.'</span></div>');
}

if (isset($_POST['name'])){
    $name = $_POST['name']; 
        echo ('<div id="name_input"><span id="resultval"><h2>Description Echo result:</h2>'.$name.'</span></div>');
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T08:02:51.053

据我所知，无论字段是在标签中还是隐藏，只要它们有ID，你就可以得到它们。例如，当使用 :`$('#bla').val()`时，它将搜索整个页面，直到找到 ID 为“bla”的元素。

因此，只需将其添加到 中`data option`，如下所示：

```
{key1: 'value1', key2: 'value2'} 
```

尝试：

```
data: { "wmdVal": $("#wmd-preview").html() , "name": $("#name").val() , "title": $("#title").val() }, 
```

应该工作（未经测试）

**更新：**

查看您网站的源代码后，我想我发现了问题。从单击下一步按钮的结果中，您可以了解到有一个 $_POST['title'] 变量 (isset) ，但是它是空的。所以ajax请求有问题，这一行：

> "标题": $("#title").html()

你不是在寻找`html()`那个`input field`。你正在寻找`val()`.

将上面的行更改为：

> "标题": $("#title").val()

现在应该可以工作，如果没有，请更新我

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T02:55:56.683

如果您想在更改选项卡时运行 AJAX POST。您必须删除此条件：*if(currentTab == 0){*。因为这个是强制代码运行，就在第一个TAB被选中的时候。

除此之外，您可以发布您想要的任何数据。您只需要将它们传递给ajax 的**“数据：”**属性。而且由于它们是全局且唯一的，因此您可以通过它们的 ID 调用它们中的任何一个。像那样：

```
data:{ 
        param1: $("#input1").val(),
        param2: $("#input2").val(),
        paramHtml1: $("#elementHtml1").html()
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:35:50.050

```
"title": $("#title").html() should be  
"title": $("#title").val() -> you want the value of the field in question. This will send the correct value to the server. 
```

现在您似乎在问为什么“标题回声结果：”区域中没有打印任何内容。

我认为一个好的下一步可能是：

```
success: function(result) {
    // fill title_input with the result of the ajax call
    $('#title_input').html(result);
} 
```

这会给你一些输出，但我认为可能不是你想要的输出。也许在“标题回显区域”中回复您想要的内容

# oracle - Oracle 应用服务器日志记录

> ID：11791143
> 
> 赞同：0
> 
> 时间：2012-08-03T07:24:05.677
> 
> 标签：oracle, logging, webserver

有人可以告诉我在哪里可以设置 Oracle 应用程序服务器上的应用程序日志文件的路径，因为我在网络上找不到任何东西。例如，我有一个已部署在服务器上的 Web 应用程序，该应用程序具有重定向错误输出日志，我的问题是从哪里设置日志的文件路径？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:25:24.817

我不确定您在寻找什么，但听起来您需要**OPMN**配置。
这些通常可以在“ORACLE_HOME/opmn/conf/”中找到（取决于您的版本）。
您可能想要的文件是“opmn.xml”

[这](http://docs.oracle.com/cd/B13597_05/core.904/b12057/intro.htm#i1017874)是一些文档的链接

# spring - Spring JDBCTemplate VS Hibernate 在性能方面

> ID：11791145
> 
> 赞同：45
> 
> 时间：2012-08-03T07:24:13.163
> 
> 标签：spring, hibernate, jdbctemplate

在我们的项目中，我们必须在 Spring JDBCTemplate 和 Hibernate 之间做出选择。

我想知道在**性能、实现和设计方面哪个更好。**如何？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-03T07:46:05.227

如果你尽你所能使这两种实现都非常快，那么 JDBC 模板可能会快一点，因为它没有 Hibernate 的开销。但它可能需要更多的时间和代码行来实现。

Hibernate 有它的学习曲线，你必须了解幕后发生的事情，何时使用投影而不是返回实体等。但是如果你掌握了它，你将获得更多的时间，并拥有比使用 JDBC 更简洁的代码基于的解决方案。

我想说，在 95% 的情况下，Hibernate 足够快，甚至比未优化的 JDBC 代码还要快。对于剩下的 5%，没有什么可以禁止您使用其他东西，例如 Spring-JDBC。两种解决方案并不相互排斥。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-08-03T08:39:29.313

这取决于您的项目以及 Hibernate 模型与您的想法的匹配程度。速度/性能无关紧要：如果您无法完全理解 Hibernate 的工作原理，您的项目将充满奇怪的错误，需要很长时间才能找到和修复。

另请注意，Hibernate 的内部结构会泄漏到您的模型和 DAO 中。值得注意的冲突点通常`equals()/hashCode()`是事务之外的集合的延迟加载。由于 Hibernate 的示例非常简单，并且您可以在短时间内完成很多工作，这可能会导致人们误以为 Hibernate 很简单。它不是。Hibernate 做了很多假设，迫使你以某种方式思考和编码。

使用`JdbcTemplate`起来更容易，因为它只是 JDBC 本身的一个非常薄的包装器。这里的代价是你将编写数千行非常无聊的代码。此外，您会发现 SQL 字符串确实很难维护。当您的数据模型发生变化时，您将不得不在整个代码库中搜索所有可能受到影响的地方。不会很漂亮

对于我们自己的项目，我们决定不使用 Hibernate，因为我们有非常复杂的数据结构（修订后的树结构）并且必须在运行时构建复杂的搜索查询。相反，我们使用[jOOQ](http://www.jooq.org/)编写了自己的 DAO 层。jOOQ 是一个围绕 JDBC 的瘦包装器，它允许您使用 Java 中的 DSL 编写 SQL：

```
create.selectFrom(BOOK)
      .where(PUBLISHED_IN.equal(2011))
      .orderBy(TITLE) 
```

与 Hibernate 一样，jOOQ 也有一些你应该遵守的规则，否则你会不高兴，但这些规则要宽松得多。

作为另一种选择，您应该看看[Spring Data](http://www.springsource.org/spring-data/)。简而言之，Spring Data 允许您将数据存储到任何远程类似于数据库的东西中。这意味着您可以使用 Hibernate 和 NoSQL 数据库管理您的模型。或者，您可以根据需要轻松迁移模型的一部分。

关键特性之一是 DAO**实现**如下所示：

```
public interface UserRepository extends Repository<User, Long> {

  List<User> findByEmailAddressAndLastname(String emailAddress, String lastname);
} 
```

现在您可能想知道实现在哪里，因为这只是一个带有方法定义的接口，仅此而已。在运行时，Spring Data 将为您生成实现此方法的代码。这是可能的，因为您需要的所有查询中有 99% 的形式是“查询 X 列为 ... 的所有行的表”，因此他们优化了这个用例。

OTOH，如果您已经知道要在运行时构建非常复杂的搜索查询，那么 Spring Data 可能不会有太大帮助。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-03T07:55:34.460

在我们的项目中，我们同时使用`JdbcTemplate`和`Hibernate`。您需要做的是在和`DataSource`之间共享。我们可以根据操作检查两者的性能，哪个更好，我们使用更好的一个。大多数情况下，我们将hibernate用于正常操作，如果有大查询或繁重的操作，我们会检查jdbc和hibernate的性能，无论我们使用哪个更好。`hibernate``jdbcTemplate`

好处是[HibernateTransactionManager](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/HibernateTransactionManager.html)适用于（JdbcTemplate，plain jdbc）和休眠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-14T11:42:33.350

你的数据库设计对hibernate友好吗？如果是，那么使用休眠......如果不是，那么你可能想要避免它。Jdbctemplate 有很多优点，并且有一些方法可以确保您的 SQL 查询易于维护。有一个包含所有这些的类或从文件中读取它们等。如果必须更新列，有一种方法可以使用标准 jdbc 来获取结果集元数据，从而允许您检索列名。这可能是复杂但有趣的解决问题的方法。Hibernate 是一个很棒的工具，但复杂的数据模型使它变得非常棘手。

# oracle - dom4j makeElement 带有@xpath，但是asXML 结果不能被Oracle extractvalue 函数解析

> ID：11791147
> 
> 赞同：0
> 
> 时间：2012-08-03T07:24:34.640
> 
> 标签：oracle, xml-parsing, dom4j

我正在使用 dom4j 开发一个 XML 消息处理程序，并且遇到了 XML 节点属性解析的问题。业务需求是：解析并验证输入的XML，如果字段或属性无效，则返回一个XML，其结构表示错误。我在下面截取了一个测试程序：

```
import org.dom4j.Document;
import org.dom4j.DocumentHelper;
import org.dom4j.Element;
import org.dom4j.Node;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class XPathStudy {
    private final static Logger log = LoggerFactory.getLogger(XPathStudy.class);
    private static String xmlInput;

    private static void initXmlInput() {
        xmlInput = "<RootTag> <BizRec FLAG=\"5\">";
        xmlInput += " <FieldOne>11111</FieldOne>";
        xmlInput += " <FieldTwo></FieldTwo>";
        xmlInput += " <FieldThree>33333</FieldThree>";
        xmlInput += " </BizRec> </RootTag>";
    }

    private static Document makeErrRspsDoc(String xpath, String errCode, String errDesc) {
        Document errDoc = DocumentHelper.createDocument();
        Element errElem = DocumentHelper.makeElement(errDoc, xpath);
        errElem.addElement("ErrCode").addText(errCode);
        errElem.addElement("ErrDesc").addText(errDesc);
        return errDoc;
    }

    public static void main(String[] args) throws Exception {
        initXmlInput();
        log.info("xmlInput = " + xmlInput);
        Document doc = DocumentHelper.parseText(xmlInput);
        log.info("xmlInput parsed done");

        String xpath = "*//FieldTwo";
        Node node = doc.getRootElement().selectSingleNode(xpath);
        if (node == null) {
            log.warn("node [" + xpath + "] not found");
            System.exit(1);
        }
        log.info("node [" + node.getPath() + "] located");
        if (node.getText().trim().isEmpty()) {
            Document errDoc = makeErrRspsDoc(node.getPath(), "1201", "FieldTwo can not be empty");
            log.warn("errDoc: " + errDoc.asXML());
        } else {
            log.info("FieldTwo validation ok");
        }

        xpath = "*//@FLAG";
        node = doc.getRootElement().selectSingleNode(xpath);
        if (node == null) {
            log.warn("node [" + xpath + "] not found");
            System.exit(1);
        }
        log.info("node [" + node.getPath() + "] located");
        int flagVal = Integer.parseInt(node.getText().trim());
        if (flagVal == 1 || flagVal == 2) {
            log.info("FLAG " + flagVal + " is ok");
        } else {
            Document errDoc = makeErrRspsDoc(node.getPath(), "1001", "FLAG attr should be 1 or 2");
            log.warn("errDoc: " + errDoc.asXML());
        }
    }
} 
```

运行它，日志信息如下：

```
15:01:08.143 [main] INFO  XPathStudy - xmlInput = <RootTag> <BizRec FLAG="5"> <FieldOne>11111</FieldOne> <FieldTwo></FieldTwo> <FieldThree>33333</FieldThree> </BizRec> </RootTag>
15:01:08.203 [main] INFO  XPathStudy - xmlInput parsed done
15:01:08.255 [main] INFO  XPathStudy - node [/RootTag/BizRec/FieldTwo] located
15:01:08.259 [main] WARN  XPathStudy - errDoc: <?xml version="1.0" encoding="UTF-8"?>
<RootTag><BizRec><FieldTwo><ErrCode>1201</ErrCode><ErrDesc>FieldTwo can not be empty</ErrDesc></FieldTwo></BizRec></RootTag>
15:01:08.260 [main] INFO  XPathStudy - node [/RootTag/BizRec/@FLAG] located
15:01:08.260 [main] WARN  XPathStudy - errDoc: <?xml version="1.0" encoding="UTF-8"?>
<RootTag><BizRec><@FLAG><ErrCode>1001</ErrCode><ErrDesc>FLAG attr should be 1 or 2</ErrDesc></@FLAG></BizRec></RootTag> 
```

一切似乎都正常，errDoc 将被记录到 Oracle10g 表（一个 VARCHAR2(1000) 字段），以下 SQL 是可以的：

```
select extractvalue(xmltype('<RootTag><BizRec><FieldTwo><ErrCode>1201</ErrCode><ErrDesc>FieldTwo can not be empty</ErrDesc></FieldTwo></BizRec></RootTag>'),
'*//ErrCode') as err_code from dual;
1201 
```

但是这个 SQL 会失败：

```
select extractvalue(xmltype('<RootTag><BizRec><@FLAG><ErrCode>1001</ErrCode><ErrDesc>FLAG attribute should be 1 or 2</ErrDesc></@FLAG></BizRec></RootTag>'),
'*//ErrCode') as err_code from dual;

Error starting at line 1 in command:
select extractvalue(xmltype('<RootTag><BizRec><@FLAG><ErrCode>1001</ErrCode><ErrDesc>FLAG attribute should be 1 or 2</ErrDesc></@FLAG></BizRec></RootTag>'),
'*//ErrCode') as err_code from dual
Error report:
SQL Error: ORA-31011: XML parsing failed
ORA-19202: Error occurred in XML processing
LPX-00231: invalid character 64 ('@') found in a Name or Nmtoken
Error at line 1
ORA-06512: at "SYS.XMLTYPE", line 301
ORA-06512: at line 1
31011\. 00000 -  "XML parsing failed"
*Cause:    XML parser returned an error while trying to parse the document.
*Action:   Check if the document to be parsed is valid. 
```

Oracle 的文档解释说 XML 的节点不能包含特殊字符。所以，我的问题是：如何更改我的 Java 代码来解决 'FLAG' 属性的错误响应问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T22:01:44.440

`<@FLAG>`不是合法的 XML 元素名称，因为该`@`字符不能是名称的开头。DOM4J 在执行格式良好且有效的 XML 文档方面并不以同类最佳而著称。

要将失败节点作为 XPath 表达式进行通信，请考虑将其存储在属性中或作为文本节点。

# android - 在侧面导航菜单上显示通知数量

> ID：11791150
> 
> 赞同：0
> 
> 时间：2012-08-03T07:24:58.037
> 
> 标签：android, navigation, horizontalscrollview, spannablestring

我正在使用 Horizo​​ntal ScrollView 来获得像侧面导航一样的 facebook

像这样：

![在此处输入图像描述](../Images/668b5d1a4c9e3eceeaf82504facda49d.png)

但是如何在菜单中的事件项旁边显示“2”？

在我的应用程序中，我使用 ViewUtil 类来获取此菜单：

```
public class ViewUtils {

    private ViewUtils() {

    }

    public static void setViewWidths(View view, View[] views) {
        int w = view.getWidth();
        int h = view.getHeight();
        for (int i = 0; i < views.length; i++) {
            View v = views[i];
            v.layout((i + 1) * w, 0, (i + 2) * w, h);
            printView("view[" + i + "]", v);
        }
    }

    public static void printView(String msg, View v) {
        System.out.println(msg + "=" + v);
        if (null == v) {
            return;
        }
        System.out.print("[" + v.getLeft());
        System.out.print(", " + v.getTop());
        System.out.print(", w=" + v.getWidth());
        System.out.println(", h=" + v.getHeight() + "]");
        System.out.println("mw=" + v.getMeasuredWidth() + ", mh="
                + v.getMeasuredHeight());
        System.out.println("scroll [" + v.getScrollX() + "," + v.getScrollY()
                + "]");
    }

    public static void initListView(Context context, ListView listView,
            String prefix, int numItems, int layout) {
        // By using setAdpater method in listview we an add string array in
        // list.
        String[] arr = new String[numItems];
        arr[0] = "Feed";
        arr[1] = "Friends";
        arr[2] = "Notifications";
        arr[3] = "Feedback";
        arr[4] = "Logout";
        listView.setAdapter(new ArrayAdapter<String>(context, layout, arr));

    }
} 
```

并在 Activity 中像这样设置适配器：

```
 ViewUtils.initListView(this, myListView, "Menu ", 5,
            android.R.layout.simple_list_item_1); 
```

我的“通知”文本类似于“通知 n”，其中 n 类似于上图中的“2”。我尝试使用 Spannable String 但我无法将 Spannable String 设置为字符串数组“arr”

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:44:58.523

我假设这些类别（新闻提要、消息、...）是`ListView`.
此外，为了显示“2”，我假设您需要一个自定义适配器。

在这种情况下，您只需将一个添加`TextView`到您的行 XML 文件并在`getView()`您的自定义适配器的方法中设置适当的值，或者，如果您在该`getView()`方法中以编程方式创建 TextView。

# java - spring security - 有没有办法在我的应用程序中获取会话注册表（无需明确自定义并发过滤器）

> ID：11791154
> 
> 赞同：11
> 
> 时间：2012-08-03T07:25:06.157
> 
> 标签：java, spring, session, spring-security, httpsession

我指的是[这个](http://forum.springsource.org/showthread.php?110686-SessionRegistry-getAllPrincipals)线程，在`Rob Winch`（Spring Security Lead）的最后第二篇文章中，他提到我们可以访问 sessionRegisty ：

```
<session-management>
  <concurrency-control session-registry-alias="sessionRegistry"/>
</session-management> 
```

因此，我注册了`HttpSessionEventPublisher`过滤器并在我的部分中`web.xml`指定了上述设置。`<http>`我**不**添加这个：

```
<beans:bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl" /> 
```

在我的课堂上，我注入了一个 sessionRegistry 的实例，如下所示：

```
@Autowired
private SessionRegistry sessionRegistry 
```

这就是我试图找出用户会话的方式：

```
List<SessionInformation> userSessions = sessionRegistry.getAllSessions(username,false);
        for (SessionInformation userSession : userSessions){
            userSession.expireNow();
        } 
```

主体是用户的用户名。调试时，`sessionRegistry`变量`principals`和`sessionids`变量为空。我在这里做错了什么，还是[克拉姆斯博客](http://krams915.blogspot.in/2010/12/spring-security-mvc-querying.html)提到的步骤是唯一的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:42:06.093

那么你可以自动装配 sessionRegistry。没有错误。我用它来跟踪`SessionInformation`和注册会话`UserPrincipal`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T04:47:08.210

仅当我将 session-registry-alias 更改为 session-registry-ref 时，它才对我有用，然后定义了默认的 impl：

```
<security:session-management>
    <security:concurrency-control max-sessions="10" session-registry-ref="sessionRegistry"/>
</security:session-management>

 <bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-10T12:57:05.077

好吧，这取决于您使用哪个版本的 Spring Security。

在 Spring Security **3.0**中，配置如下就足够了：

```
<security:session-management>
    <security:concurrency-control max-sessions="1"/>
</security:session-management> 
```

因为在内部使用了**ConcurrentSessionControlStrategy**类，它在**sessionRegistry**对象上调用**registerNewSession 。**

 **在 Spring Security **3.2**中有所不同，您必须使用更详细的配置。[Spring Security 参考文档](http://docs.spring.io/autorepo/docs/spring-security/3.2.7.RELEASE/reference/htmlsingle/#concurrent-sessions "弹簧安全文档")中有一个示例让**sessionRegistry**填充数据 的最重要部分如下：

```
<beans:bean id="sas" class="org.springframework.security.web.authentication.session.CompositeSessionAuthenticationStrategy">
  <beans:constructor-arg>
    <beans:list>
      <beans:bean class="org.springframework.security.web.authentication.session.ConcurrentSessionControlAuthenticationStrategy">
        <beans:constructor-arg ref="sessionRegistry"/>
        <beans:property name="maximumSessions" value="1" />
      </beans:bean>
      <beans:bean class="org.springframework.security.web.authentication.session.RegisterSessionAuthenticationStrategy">
        <beans:constructor-arg ref="sessionRegistry"/>
      </beans:bean>
    </beans:list>
  </beans:constructor-arg>
</beans:bean>

<beans:bean id="sessionRegistry"
    class="org.springframework.security.core.session.SessionRegistryImpl" /> 
```

**sessionRegistry**中新会话的注册在**RegisterSessionAuthenticationStrategy**类中执行。

希望它会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:18:17.607

太长的评论，所以我回答。

1.  打开 Spring Security 调试（添加到`log4j.properties`line `log4j.logger.org.springframework.security=DEBUG`）。这应该是此类问题的标准程序，因为调试会打印出许多可以显示问题所在的方便信息。

2.  如果在记录后调用`public void registerNewSession(String sessionId, Object principal)`内部方法，您可以调试吗？`SessionRegistryImpl`如果不是，则表示`HttpSessionEventPublisher`未正确设置。

3.  你`@Autowired private SessionRegistry sessionRegistry;`在课堂上使用，不是吗？

4.  **编辑**：你能检查一下注册表中是否有任何负责人吗？

    ```
    List<Object> userSessions = sessionRegistry.getAllPrincipals(); 
    ```

    其中`Object`s 是您使用的主体实例。**

# algorithm - 快速数据提取算法

> ID：11791156
> 
> 赞同：0
> 
> 时间：2012-08-03T07:25:19.590
> 
> 标签：algorithm, information-extraction

我必须有 2 个 utf-8 文本文件。在文件的每一行中都有一个字符串，可以包含语言特定的字符，如 Ü、Ö、ą、ę。字符串是随机的顺序和长度，并且可以重复。在第一个文件中至少有 300 万行（很容易超过 1 mld 行）。第二个文件较小，它通常有大约 40 万行（但可以更大）。

我需要创建一个新文件，其中包含文件一中的条目，其中删除了出现在文件二中的条目以及所有重复条目。

目前我正在对两个文件进行排序并删除重复条目。接下来我将它们写入新文件，同时检查它们是否出现在第二个文件中。

有没有更快的方法来做到这一点？

编辑

内存是个问题。我不会将此字符串复制到内存中，而是对文件进行操作。我的朋友建议不要复制到内存，而是处理文件流。在此之后执行时间显着下降。

计算机管理员不想在其上安装数据库。

在循环中对我的代码符文进行排序后：

```
if stringFromFile1 < stringFromFile2 then writeToFile3 and get next stringFromFile1
else if stringFromFile1 == stringFromFile2 then dropStringFromFile1 and get next stringFromFile1
else if stringFromFile1 > stringFromFile2 then get next stringFromFile2 and go to line 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:54:46.500

有许多可能的优化。

正如 Roman Saveljev 建议的那样，您可以在内存中保留一个 trie 结构。根据数据的熵，它可以很容易地放入内存中。

在对第二个文件进行排序后，您可以运行二进制搜索来检查记录是否存在（如果您还没有这样做）。

您还可以在内存中保留一个布隆过滤器，以便轻松检查那些不重复的记录，以避免每次都进入磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:34:18.387

如果您有可用的数据结构（例如哈希集），则可以*遍历*文件并添加每一行。集合不允许重复，hashset*应该*为您提供一种检查元素是否已经存在的常量方法（至少在 Java 中，该`add`方法检查元素是否存在，如果不存在，它将项目添加到常量集合中时间）。

浏览完这两个文件后，您就可以遍历哈希集并将其内容存储到文件中。这应该为您提供一种可以在线性时间内完成的算法。

忘了提：我假设您对内存消耗没有限制。如果这样做，您可能想尝试将每一行保存到数据库中，使用每行的哈希作为主键。插入具有两个主键的元素应该会失败，从而确保您在数据库中具有唯一的字符串。完成插入后，您可以检索数据库中的值并将其存储到文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:26:49.857

我的建议是预处理文件二并从中形成树形结构。例如，假设您有这种文件二：

```
bad
bass
absent 
```

那么你的树结构将是这样的：

```
BEGIN -> b -> a -> d -> END
|             |
|             + -> s -> s -> END
|
+-> a -> b -> s -> e -> n -> t -> END 
```

`END`指定单词分隔符（无论是空格还是换行符或其他）

然后您将文件一打开到文件流中并逐字节读取。一旦你遇到文件的开头或在分隔符后选择下一个字符，你就开始走你的树。如果使用流式字节，您可以将其带到`END`，这意味着您找到了匹配的单词，您应该丢弃它。如果不是，则该词是唯一的，无需删除。如果发现是唯一的，则必须将单词添加到树结构中以丢弃其进一步的重复。

树结构将占用大量内存，但无论如何它都比在某种数组中保存唯一单词要少

# android - 我可以举一个使用 runOnUiThread 显示 toast 的示例吗？

> ID：11791157
> 
> 赞同：26
> 
> 时间：2012-08-03T07:25:23.393
> 
> 标签：android, multithreading, toast

我搜索了很多地方，但找不到“runOnUiThread”实现的完整工作示例。我尝试了很多，但得到了很多错误。我只想显示线程中的祝酒词。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-03T14:42:13.980

所以这是最终的完整代码。感谢所有回复的人。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MainActivity.this.runOnUiThread(new Runnable() {

        public void run() {
            Toast.makeText(MainActivity.this, "This is Toast!!!", Toast.LENGTH_SHORT).show();

        }
    });
}

} 
```

关于 XML，它是创建的默认 XML 文件。无需更改。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-03T07:28:04.997

```
YourActivityName.this.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                Toast.makeText(YourActivityName.this, "This is Toast!!!", Toast.LENGTH_SHORT).show();

            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T23:53:36.677

为了回答[Nefariis](https://stackoverflow.com/users/982786/nefariis)的问题，我遇到了同样的问题，并且需要从非活动类中敬酒，要解决它，您可以将 Context 传递给您调用的函数`runOnUiThread`。

例如：

```
public class FlashCardsUtil
{
    public static void fillTableFromFile(SQLiteDatabase pSqLiteDatabase, final Context pContext, String pFileName)
    {
        ...

        runOnUiThread(new Runnable()
        {
            public void run()
            {
                Toast.makeText(pContext, "Success filling database", Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
```

# python - 如何使用 python 读取十六进制数据？

> ID：11791161
> 
> 赞同：-1
> 
> 时间：2012-08-03T07:25:37.497
> 
> 标签：python, enums, flags

我有这个 c# 应用程序，我试图与一个用 python 编写的应用程序合作。c# 应用程序向 python 应用程序发送简单的命令，例如我的 c# 应用程序正在发送以下内容：

```
 [Flags]
        public enum GameRobotCommands
        {
            reset = 0x0,
            turncenter = 0x1,
            turnright = 0x2,
            turnleft = 0x4,
            standstill = 0x8,
            moveforward = 0x10,
            movebackward = 0x20,
            utility1 = 0x40,
            utility2 = 0x80
        } 
```

我正在通过 TCP 执行此操作并启动并运行 TCP，但我可以在 Python 中明确执行此操作以检查标志：

```
if (self.data &= 0x2) == 0x2:
    #make the robot turn right code 
```

在 python 中有没有一种方法可以定义与 c# 中相同的枚举（以获得更高的代码可读性）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:01:23.507

十六进制*符号*就是这样，一种写下整数的方法。您可以输入`0x80`您的源代码，也可以将其写为`128`，这对计算机来说意味着同样的事情。

在这方面， Python 支持与 C[相同的整数文字语法](http://docs.python.org/reference/lexical_analysis.html#integer-and-long-integer-literals)；在类定义中列出相同的属性，并且您拥有与枚举等效的 Python：

```
class GameRobotCommands(object):
    reset = 0x0
    turncenter = 0x1
    turnright = 0x2
    turnleft = 0x4
    standstill = 0x8
    moveforward = 0x10
    movebackward = 0x20
    utility1 = 0x40
    utility2 = 0x80 
```

[C# 应用程序可能使用标准 C 字节表示形式](https://en.wikipedia.org/wiki/Integer_%28computer_science%29)发送这些整数，您可以使用[`struct`模块](http://docs.python.org/library/struct.html)解释它们，或者，如果作为单个字节发送，则使用[`ord()`](http://docs.python.org/library/functions.html#ord)：

```
>>> ord('\x80')
128
>>> import struct
>>> struct.unpack('B', '\x80')
(128,) 
```

# asp.net-mvc-4 - $.connection.(hubname) 未定义。信号器/集线器 501（未实现）

> ID：11791162
> 
> 赞同：3
> 
> 时间：2012-08-03T07:25:39.857
> 
> 标签：asp.net-mvc-4, signalr, signalr-hub

我有一个 MVC 4 应用程序，它有一个注册页面。

集线器的代码如下：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using SignalR.Hubs;

[HubName("messageHub")]
public class MessageHub : Hub
{
    /// <summary>
    /// Broadcast the message to all clients
    /// </summary>
    /// <param name="message">message to be broadcasted</param>
    public void Broadcast(string message, string messagetype, string messagetitle)
    {
        this.Clients.showMessage(message, messagetype, messagetitle);
    }
    public void Getsubscription()
    {

    }
} 
```

同样，JS hub 代码是：-

```
<script type="text/javascript" src="@Url.Content("~/Scripts/json2.js")"></script>
<script src= "@Url.Content("~/Scripts/jquery.signalR-0.5.2.js")" type="text/javascript"></script>
<script src="@Url.Content("~/signalr/hubs")" type="text/javascript"></script>
<h2>Index</h2>
<script type="text/javascript">
    $(document).ready(function () {
        //Initialize hub
        var hub = $.connection.messageHub;

        // hub.start();
        $.connection.hub.start();
        //Append event to Button
        //hub.broadcast("c","b","a");

    });

</script> 
```

现在，运行后得到 $.connection.messageHub as undefined

![调试模式截图](../Images/6f4a0858c2e5dc378da89b40b221ec50.png)

其次，我的 chrome 网络显示；- ![网络-Chrome](../Images/f207f304d7844a345e3b21e367687117.png)

第三，当单击信号器/集线器的启动器时，我得到未实现错误：- ![在此处输入图像描述](../Images/e79f83371716c43a983453f08754b238.png)

我尝试更改脚本的 URL，也作为 IIS 运行，但无法正常工作。如果我将我的脚本保存在 .cshtml（视图）中并更改 -> 使用本地 IIS Web 服务器，它的工作正常任何帮助。！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T18:16:40.203

> @Scripts.Render("~/bundles/modernizr")
> 
> @Scripts.Render("~/bundles/jquery")

在布局部分对此部分进行了评论，并为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T14:17:21.773

我发现`/signalr/hubs`在捆绑配置中添加引用不起作用，因为它是在运行时生成的，而捆绑发生在编译时。
所以我这样做了：
1-在我需要参考的每个视图中创建了一个这样的部分`signalr/hubs`：

```
 @section SignalRScripts{
    <script src="/signalr/hubs"></script>
    } 
```

2-在我的布局文件中渲染所有其他脚本后，渲染了这个部分：

```
 @Scripts.Render("~/js")  
    @RenderSection("SignalRScripts", required: false)  
    @RenderSection("Scripts", required: false) 
```

然后它工作正常。

# .net - .net activex dll 仅在与使用它的应用程序 (VB6) 位于同一文件夹中时才有效

> ID：11791164
> 
> 赞同：1
> 
> 时间：2012-08-03T07:25:43.990
> 
> 标签：.net, dll, com, vb6, activex

我们有一个用 C# 构建的 ActiveX DLL；DLL 用于 VB6 应用程序（它也将被经典的 ASP 应用程序使用）。

DLL 是一个 C# 类库项目

*   源代码中的类和接口 Guids 属性
*   项目中的 COM 相关属性/设置
*   源代码中的 progid 属性

所有显然都正确设置。

证明是，我们已经使用 regasm /codebase /tlb:xxxxx 注册了 DLL，并且 VB6 dev env 可以在引用窗口中看到 COM 对象。

将 COM DLL 引用添加到项目后，Intellisense 工作并看到一切正常，应用程序编译正确。

问题是，如果我们不将 DLL 的副本与已编译的应用程序 exe 文件放在同一文件夹中，则在尝试实例化 DLL 中的类的实例时会失败；返回的错误是“系统找不到指定的文件”。如果 DLL 的副本与应用程序 exe 位于同一位置，则一切正常。

我发现了对类似问题的引用，但没有关于如何解决的提示或线索。

马里奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:49:11.847

首先，VB6 仅将 TypeLib 用于智能感知，因此这并不能证明关于 DLL 的任何内容。

我建议你使用 ProcessMonitor，在[这里](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)找到来监控加载 VB6 dll 的过程。确保它不在 app 文件夹中，将其保存在您注册的位置。您将能够看到用于定位路径的注册表查找，以及在搜索路径时的文件 IO。

如果这不能解决问题，请发回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:38:13.197

在 VB6 中，如果您使用 RegAsm 并且未将程序集放在 GAC 中，则它必须与正在执行的应用程序位于同一目录中，除非您在 RegAsm'ing 文件时使用 /Codebase 选项。

# ios5 - 使用授权令牌下载谷歌文档

> ID：11791169
> 
> 赞同：1
> 
> 时间：2012-08-03T07:26:12.427
> 
> 标签：ios5, google-docs

我已经使用[https://www.google.com/accounts/ClientLogin](https://www.google.com/accounts/ClientLogin) url 访问了这些中的 google 文档，我可以成功登录并获得授权令牌。任何人都可以帮助我使用这些授权下载所有文件谷歌文档中的令牌。

谢谢

# c# - xna 4 顶点缓冲区和顶点声明，用于不同的三角形计数

> ID：11791174
> 
> 赞同：0
> 
> 时间：2012-08-03T07:26:29.877
> 
> 标签：c#, windows, xna

我根据microsoft提供的基本效果示例开始了一个项目。然后我附加了键输入来移动相机。最后一步是从 DXF 文件加载测试 3d 数据。我自己编写了 DXF 导入，只是代表 3d 三角形的简单 3dface 对象。我调整了基本效果示例中的代码以读取变体顶点数。但是我得到一个错误 Normal0 丢失 - 即使顶点声明和顶点缓冲区在正确设置顶点的情况下也是如此。我认为问题出在顶点声明中。原始样本只有 12 个三角形，我的第一个样本 DXF 大约有一千个。我认为问题出在这里：

```
private void CreateVertexBuffer()
{
vertexDeclaration = new VertexDeclaration(new VertexElement[]
    {
        new VertexElement(0, VertexElementFormat.Vector3, VertexElementUsage.Position, 0),
        new VertexElement(12, VertexElementFormat.Vector3, VertexElementUsage.Normal, 0),
        new VertexElement(24, VertexElementFormat.Vector2, VertexElementUsage.TextureCoordinate, 0)
    }
);
vertexBuffer = new VertexBuffer(
    graphics.GraphicsDevice,
    vertexDeclaration,
    number_of_vertices,
    BufferUsage.None
    );
Vertices = new VertexPositionNormalTexture[number_of_vertices];
InitializeVerts();
vertexBuffer.SetData<VertexPositionNormalTexture>(Vertices);
graphics.GraphicsDevice.SetVertexBuffer(vertexBuffer); 
```

}

顶点元素 12 ... 顶点元素 24 ... 这些是问题区域吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:51:04.230

如果您要声明自定义顶点类型，那么您将无法使用`VertexNormalTexture`该类作为您的顶点类型的数据。您需要创建一个新结构来保存从`IVertexType`该类派生的数据。然后，在结构中，您可以通过方法使顶点声明可用。

然后，您使用新结构作为该`Type`字段的参数来构造缓冲区。

请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb976065.aspx)。

# sitecore - 在代码隐藏中设置子布局的 Path 属性不起作用

> ID：11791175
> 
> 赞同：0
> 
> 时间：2012-08-03T07:26:30.400
> 
> 标签：sitecore, sitecore6

我有一个子布局，我想在几个不同的布局中静态绑定。因此，我不想在子布局的每个实例上以声明方式指定设计器中的路径属性。我真正想要做的是有一个常量文件（或配置文件），其中包含子布局的路径，然后我使用它在包含子布局的文件的代码后面设置给定子布局的路径。

但是，当我尝试在`on_load`或中设置路径属性时`on_init`，子布局不会呈现到页面。我错过了什么吗？

例子：

```
private void Page_Load(object sender, EventArgs e) {
   plBakingTips.Path = "/layouts/User Defined/Sublayouts/Products/Product List/Product/Product Bake It Yours.ascx";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:21:31.393

Sitecore 默认设置 PreInit 中的所有页面控件。您可以更改它，但它是一个全局设置，我不确定是否建议更改它。

但是，您可以覆盖一个“工厂”来构建子布局，这可能允许您执行此操作。实现自定义 SublayoutRenderingType 并覆盖 web.config 中 Sitecore 的默认值。

在此处查看示例： [http ://sitecoreblog.alexshyba.com/2011/08/sitecore-output-caching-kick-it-up.html?m=1](http://sitecoreblog.alexshyba.com/2011/08/sitecore-output-caching-kick-it-up.html?m=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:52:55.463

尝试在路径前加上 ~

```
Path = "~/layouts..."; 
```

此外，这是一个文件系统路径，而不是子布局项目路径（我提到这一点是因为您的路径看起来像一个项目路径）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:56:32.633

这应该正是您所需要的。它允许您在后面的代码中添加子布局

[临时更改 Sitecore 项目的布局](https://stackoverflow.com/questions/9666805/temporarily-change-a-sitecore-items-layout)

我曾经更改过子布局的数据源，并且效果很好。

# struts2 - 使用struts 2调用在jsp内部传递参数的方法

> ID：11791176
> 
> 赞同：0
> 
> 时间：2012-08-03T07:26:31.167
> 
> 标签：struts2, struts-action

我有一个场景，我需要调用 Action 类的方法。下面是代码。

```
<s:if test="#session['EXECUTOR'] != null">  
<tr>
    <td width="80%">
    Test: 
    <!-- <s:property value="#moveETHAction_fetchExecutorData(#session['EXECUTOR'])" /> -->
    <s:push value="#moveETHAction_fetchExecutorData(#session['EXECUTOR'])">
         <s:property value="top">
    </s:push>
    </td>
</tr>   
</s:if> 
```

但是它不起作用，抛出一些 Jasper 异常-“**根据 TLD，标签 s:property 必须为空，但不是**”

我如何调用该方法并返回`String`数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:29:22.583

不应该是：

```
<s:property value="top"/> 
```

代替

```
<s:property value="top"> 
```

# android - 禁用按两次的android按钮

> ID：11791179
> 
> 赞同：0
> 
> 时间：2012-08-03T07:26:43.780
> 
> 标签：android, button, android-activity, back

我有一个包含后退按钮的活动。当它被按下时，它会启动另一个在相同位置包含一个后退按钮的活动。但问题是启动活动需要几秒钟，因为它在后台执行一些繁重的任务。现在的问题是，如果用户在开始新活动之前再次按下返回按钮，第二次按下会转到新活动，并且它会从新活动导航到另一个新活动。我想你的问题很清楚。知道如何解决这个问题吗？？？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:29:10.063

在加载新活动之前，使后退按钮不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:30:22.503

您可以在按下一次时禁用按钮

```
Button1.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

                    Button1.setEnabled(false);

                }

            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:30:16.500

听起来您正在阻塞主线程来执行“繁重的任务”，我建议您启动新的 Activity，然后 onCreate 触发 AsyncTask 来执行您的“繁重的任务”。

这样，视图将快速加载，您可以向用户显示一个对话框，告诉用户它正在加载。

链接到 AsyncTask 教程： [http ://droidapp.co.uk/2011/05/12/android-dev-pre-loading-with-asynctask/](http://droidapp.co.uk/2011/05/12/android-dev-pre-loading-with-asynctask/)

# c# - 通过 xslt 或 C# 代码添加 xml 节点

> ID：11791180
> 
> 赞同：0
> 
> 时间：2012-08-03T07:26:51.087
> 
> 标签：c#, asp.net, xml, xslt

我有一个输入xml如下，

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<root>
  <employee>
    <firstname>Kaushal</firstname>
    <lastname>Parik</lastname>
  </employee>
  <employee>
    <firstname>Abhishek</firstname>
    <lastname>Swarnkar</lastname>
  </employee>
</root> 
```

我需要输出 xml 作为

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="cdcatalog.xsl"?>
<root>
  <employee>
    <firstname>Kaushal</firstname>
    <lastname>Parik</lastname>
    <status>Single</status>
  </employee>
  <employee>
    <firstname>Abhishek</firstname>
    <lastname>Swarnkar</lastname>
    <status>Single</status>
  </employee>
</root> 
```

“status”的值在所有节点中都是“Single”....我知道如何通过c#代码添加这个静态文本“Single”....但是，我不知道如何添加节点“status” “通过xslt在xml中......当我尝试时，它被添加到节点“名字”下方，而不是如图所示的预期位置......请帮助我如何实现这一点...... xslt和C＃我使用的代码是，

XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
            xmlns:myUtils="pda:MyUtils">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="employee/firstname">
    <xsl:element name="firstname">
      <xsl:value-of select="myUtils:FormatName(.)" />
    </xsl:element>
    <xsl:element name ="status">
      <xsl:value-of select ="Single"/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

aspx.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Xml;
using System.Xml.Xsl;
using System.Xml.XPath;
using System.IO;

public partial class nirav : System.Web.UI.Page
{
    public class MyXslExtension
    {
        public string FormatName(string name)
        {
            return "Mr. " + name;
        }
        public int GetAge(string name)
        {
            int age = name.Count();
            return age;
        }
    }  
    protected void Page_Load(object sender, EventArgs e)
    {
        string outputpath = "nirav.xml";
        XsltArgumentList arguments = new XsltArgumentList();
        arguments.AddExtensionObject("pda:MyUtils", new MyXslExtension());
        using (StreamWriter writer = new StreamWriter(outputpath))
        {
            XslCompiledTransform transform = new XslCompiledTransform();
            transform.Load("http://localhost:4329/XsltTransform/nirav.xslt");
            transform.Transform("http://localhost:4329/XsltTransform/nirav.xml", arguments, writer);
        }

    }
} 
```

非常感谢您的帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:38:59.367

*我个人*认为为此使用 XSLT 是多余的。我只会使用：

```
XDocument doc = XDocument.Load("http://localhost:4329/XsltTransform/nirav.xml");
foreach (var employee in doc.Descendants("employee"))
{
    employee.Add(new XElement("status", "Single"));
}
doc.Save(outputPath); 
```

当然，如果您有其他原因使用 XSLT，那很好 - 只是不要认为这是在 .NET 中修改 XML的*唯一方法 :)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:42:13.193

您的 XSLT 有几个问题。首先，这个表达式是不正确的

```
<xsl:value-of select="Single"/> 
```

这将选择输入 XML 中不存在的元素**Single的值。**您实际上想要输出文字值 'Single'

```
<xsl:value-of select="'Single'"/> 
```

或者更确切地说，您可以“按原样”输出整个元素

```
<status>Single</status> 
```

其次，您似乎想要将**状态添加为****员工**元素的最后一个元素。在这种情况下，您需要一个模板来匹配**员工**元素，该模板复制所有现有元素，然后添加新的**状态**元素

```
<xsl:template match="employee">
   <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
      <status>Single</status>
   </xsl:copy>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="employee">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
         <status>Single</status>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<root>
   <employee>
      <firstname>Kaushal</firstname>
      <lastname>Parik</lastname>
      <status>Single</status>
   </employee>
   <employee>
      <firstname>Abhishek</firstname>
      <lastname>Swarnkar</lastname>
      <status>Single</status>
   </employee>
</root> 
```

（注意，我已经删除了对扩展函数的引用，因为我自己的 PC 上没有这些）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:38:11.293

您可以使用 linq to xml：

```
 var document = XDocument.Parse(xml);

    foreach (var element in document.Root.Elements("employee"))
    {
        element.Add(new XElement("status", "Single"));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:36:59.913

怎么样

```
<root>
    <xsl:for-each select="\\root\employee">
        <employee>
            <xsl:copy-of select="firstname"/>
            <xsl:copy-of select="lastname"/>
            <status>Single</status>
        </employee>
    </xsl:for-each>
</root> 
```

# c++ - 是否可以在 C++ 的命名空间中放置一个宏？

> ID：11791187
> 
> 赞同：33
> 
> 时间：2012-08-03T07:27:15.447
> 
> 标签：c++, macros, namespaces

我的应用程序使用标准输出之外的另一个输出来记录信息，这就是我编写自己的、 和`Log()`函数`Error()`的原因。为了很好地组织事情，我将所有调试内容都包含在一个命名空间中。`Panic()``Assert()``Debug`

该函数还提供源文件和行号会更有意义`Assert()`，这只能使用`__LINE__`and`__FILE__`宏。然而，总是必须指定这两个参数是非常不愉快、低效的等等。

所以这就是我的代码的样子：

```
namespace Debug {
   void Assert (int condition, std::string message, std::string file, int line);
} 
```

我的问题是，是否可以在命名空间内放置一个包含这两个参数的宏`Debug`？像这样：

```
namespace Debug {
   void Assert_ (int condition, std::string message, std::string file, int line);
   #define Assert(a,b) Assert_(a, b, __FILE__, __LINE__)
}

// .... Somewhere where I call the function ....
Debug::Assert (some_condition, "Some_condition should be true");

// Output: Assertion failed on line 10 in file test.cpp:
//           Some_condition should be true 
```

这是有效的 C++ 吗？如果没有，有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-03T07:28:21.513

`#define`是一个预处理器指令。除了删除注释（这意味着，在编译之前）之外，宏会在其他任何事情*之前*被替换。因此，在替换宏时，编译器对您的命名空间一无所知。

正如其他人所说，在你的情况下它会很好。但是，这就是您遇到问题的方式：

```
namespace A
{
 void Assert_ (int condition, std::string message, std::string file, int line)
 {
     std::cout << "A";
 }
   #define Assert(a,b) Assert_(a, b, __FILE__, __LINE__)

}
namespace B
{
 void Assert_ (int condition)
 {
     std::cout << "B";
 }
   #define Assert(a,b) Assert_(a)

}

int main(int argc, char *argv[])
{
    A::Assert(0,"asdasd");
    B::Assert(0,"asdasd");
} 
```

因此，虽然定义看起来像是“在命名空间中”，但它们*不是*，并且`#define`将始终使用最后一个，在这种情况下会导致编译时错误，因为 main 中的代码将被替换为：

```
A::Assert(0);
B::Assert(0); 
```

代替

```
A::Assert(0,"asdasd", _FILE_, _LINE_);
B::Assert(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:05:35.360

```
namespace Debug
{
    void Assert_(int condition, std::string message, std::string file, int line);
    #define Assert(a,b) Assert_(a, b, __FILE__, __LINE__)
}

// .... Somewhere where I call the function ....
Debug::Assert (some_condition, "Some_condition should be true"); 
```

这种特定的用法完全可以满足您的需求，但是*Assert 宏绝不是 Debug 命名空间*的一部分……就像您已经完成了一样：

```
namespace Debug
{
    void Assert_(int condition, std::string message, std::string file, int line);
}

#define Assert(a,b) Assert_(a, b, __FILE__, __LINE__)

// .... Somewhere where I call the function ....
Debug::Assert (some_condition, "Some_condition should be true"); 
```

在这里，替换工作不是因为`Assert`在`Debug`命名空间中（它不在您的代码或此代码中，并且预处理器不知道命名空间是关于什么的） - 它之所以有效，是因为`Assert`被识别为宏的标识符，替换`Assert_`了，然后稍后正确的编译器碰巧发现有一个`Debug::Assert_` 所以，假设您稍后在翻译单元中的某个地方有一些完全不相关的代码：

```
my_object.Assert(my_functor); 
```

宏替换仍然会产生编译时错误，说明您的宏参数数量错误。说不相关的代码是：

```
my_object.Assert(my_functor, "some text"); 
```

然后将替换为：

```
my_object.Assert_(my_functor, "some text", __FILE__, __LINE__); 
```

（另外，在预处理器宏名称中不使用小写字母是标准做法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:32:22.433

不，预处理器根本不关心命名空间。事实上，预处理器至少在概念上是在编译器看到任何东西之前运行的。

对于我自己，我只是做一个标准的 ASSERT 宏，并期望没有“理智的命名空间”有一个叫做 ASSERT 的东西。问题解决了。如果我需要一个拥有自己的 ASSERT 的库，那么我仍然可以决定如何处理这个问题；但是，我目前使用自己的“断言”的唯一库将其称为 BOOST_ASSERT 或类似的东西......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T02:03:43.170

您可以尝试使用 __PRETTY_FUNCTION __ 宏来打印所有命名空间，包括函数参数。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-03T07:30:32.737

是的，您的宏将扩展至您所期望的。

```
Debug::Assert (some_condition, "Some_condition should be true"); 
```

将被替换为

```
Debug::Assert_(some_condition, "Some_condition should be true", __FILE__, __LINE__) 
```

# c# - 从 windows live 中提取 nameidentifier 声明

> ID：11791190
> 
> 赞同：0
> 
> 时间：2012-08-03T07:27:32.750
> 
> 标签：c#, azure, live, claims-based-identity, acs

我需要从 windows live 中提取 nameidentifier 声明。我搜索了代码，大部分地方，我发现使用 Azure 访问控制服务。我不想使用 Azure ACS。是否可以仅使用 C#、asp.net 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:38:53.543

您能否从 Live ID 取回 SAML 令牌？如果是这样，则应在 saml:Subject 中找到 NameIdentifier。

如果您的网站正在使用 WIF，那么在成功验证后，您应该已经在 IClaimsPrincipal 对象中找到了这个 nameidentifier 声明。（例如 HttpContext.Current.User）

# java - 并发 HashMap 迭代器：Threading 的安全性如何？

> ID：11791193
> 
> 赞同：4
> 
> 时间：2012-08-03T07:27:42.070
> 
> 标签：java, multithreading, thread-safety, concurrenthashmap

我使用并发哈希图来创建矩阵。它的指数范围为 100k。我创建了 40 个线程。每个线程访问矩阵的这些元素并对其进行修改并将其写回矩阵为：

```
ConcurrentHashMap<Integer, ArrayList<Double>> matrix = 
    new ConcurrentHashMap<Integer, ArrayList<Double>>(25);

for (Entry(Integer,ArrayList<Double>)) entry: matrix.entrySet())
    upDateEntriesOfValue(entry.getValue()); 
```

我没有发现它是线程安全的。值经常返回为 null 并且我的程序正在崩溃。有没有其他方法可以使其线程安全。或者这是线程安全的，我在其他一些地方有错误。一件事是我的程序不会在单线程模式下崩溃。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T07:33:57.020

`iterator`确实是线程安全的`ConcurrentHashMap`。

但是你的代码中不是线程安全的是`ArrayList<Double>`你似乎更新了！您的问题可能来自此数据结构。

您可能希望使用适合您需要的[并发数据结构。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:41:47.930

对矩阵使用映射确实效率低下，而且按照您使用它的方式，它甚至不会特别好地支持稀疏数组。

我建议您使用 double[][] 锁定每一行（或列，如果这样更好）如果矩阵足够小，您最好只使用一个 CPU，因为这可以为您节省相当多的开销。

我建议您创建的线程数不要超过核心数。对于 CPU 密集型任务，使用更多线程可能会更慢，而不是更快。

> 矩阵最大为 100k*50

编辑：根据您正在执行的操作，我会尝试确保您首先具有较短的尺寸，以便您可以有效地在不同的线程中处理每个长尺寸。

例如

```
double[][] matrix = new double[50][100*1000];
for(int i=0;i<matrix.length;i++) {
   final double[] line = matrix[i];
   executorService.submit(new Runnable() {
       public void run() {
          synchronized(line) {
              processOneLine(line);
          }
       }
   });
} 
```

这允许所有线程同时运行，因为它们不共享任何数据结构。它们还可以有效地访问每个 double，因为它们在内存中是连续的并且尽可能高效地存储。即 100K 双打使用大约 800KB，但`List<Double>`使用 2800KB 并且每个值可以在内存中随机排列，这意味着您的缓存必须更加努力地工作。

> 谢谢，但实际上我总共有 80 个内核

为了有效地使用 80 个内核，您可能希望将较长的行分成两到四行，以便让所有内核保持忙碌，或者找到一种方法一次执行多个操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:37:17.513

对 Map的`ConcurrentHashMap`访问将是线程安全的，但如果多个线程可以同时对同一个 List 实例进行操作，那么提供的`Lists`服务必须是，因此请使用一段时间进行修改。`thread-safe``thread-safe` `list`

在您的情况下，工作 `ConcurrentHashMap`是安全的，但是当线程进入时`ArrayList`不是这样`synchronized`，因此多个线程可以同时访问它，这使得它不是线程安全的。您可以`synchronized block`在列表中执行修改的地方使用

# sharepoint - SPuser 查找组成员身份

> ID：11791194
> 
> 赞同：1
> 
> 时间：2012-08-03T07:27:59.463
> 
> 标签：sharepoint, spuser

我有一个代码，我必须在其中检查用户是否属于某个组（比如说“GroupA”）。

我将用户详细信息存储在 Sharepoint 变量 SPUser 中。现在我需要检查这个用户是否是 GroupA 的一部分，然后采取一些措施。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:40:08.750

来源： [如何检查用户是否存在于组中](https://sharepoint.stackexchange.com/questions/1799/how-to-check-if-a-user-exists-in-a-group)

您可以使用以下扩展方法，如下所示：

```
public static bool InGroup(this SPUser User, string GroupName)
{
    return User.Groups.Cast<SPGroup>().Any(g => g.Name.ToLower() == GroupName.ToLower());
} 
```

然后像这样调用它：

```
bool inGroup = spuser.InGroup("GroupName"); 
```

如果要检查当前用户，则另一种方法可以是这样的：
来自：[检查用户是否已存在于指定的 SharePoint 组中](http://social.technet.microsoft.com/Forums/ta/sharepoint2010programming/thread/f18d51dd-8262-4460-8636-b6c6c1fb6866)

```
SPWeb web = SPContext.Current.Web;
SPGroupCollection webGroups = web.Groups;

foreach (SPGroup group in webGroups)
{
 //Checking the group
 if (group.ContainsCurrentUser)
 {
  // perform action
 }
 else
 {
  //perform action
 }
} 
```

更多参考：

[通过 Web 服务判断用户是否存在于 SharePoint 组中](https://stackoverflow.com/questions/1881451/tell-if-user-exists-in-sharepoint-group-through-web-service)

# powershell - 通过 C# 使用 Powershell 执行脚本

> ID：11791196
> 
> 赞同：0
> 
> 时间：2012-08-03T07:28:11.273
> 
> 标签：powershell

我需要执行以下脚本：Get-MailboxDatabase -Status | 选择服务器名称、名称、数据库大小

我尝试了一些使用 Powershell 和 Command 类的解决方案，但它们不起作用。我收到的错误：值参数不能为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:25:00.813

我认为这将满足您的需求：

```
private string RunLocalExchangePowerShell(string script)
{
    // create the runspace and load the snapin
    RunspaceConfiguration rsConfig = RunspaceConfiguration.Create();
    PSSnapInException snapInException = null;
    Runspace runSpace = RunspaceFactory.CreateRunspace(rsConfig);
    runSpace.Open();
    rsConfig.AddPSSnapIn("Microsoft.Exchange.Management.PowerShell.E2010", out snapInException);
    Pipeline pipeLine = runSpace.CreatePipeline();

    // load the script and convert the output to a string
    pipeLine.Commands.AddScript(script);
    pipeLine.Commands.Add("out-string");

    // get the results
    Collection<PSObject> results;
    results = pipeLine.Invoke();

    // loop through the results and build the output
    StringBuilder sb = new StringBuilder();
    foreach (PSObject obj in results)
    {
        sb.AppendLine(obj.ToString());
    }

    // close the pipeline and runspace
    pipeLine.Dispose();
    runSpace.Close();

    return sb.ToString();
} 
```

示例用法：

```
Console.WriteLine(prog.RunLocalExchangePowerShell("Get-MailboxDatabase -Status | select ServerName,Name,DatabaseSize")); 
```

# apache-flex - 将 flex 插件安装到 flash builder 中的步骤

> ID：11791200
> 
> 赞同：0
> 
> 时间：2012-08-03T07:28:14.220
> 
> 标签：apache-flex

我只想将 flex 插件安装到 flash builder 中。我目前正在使用 eclipse juno。我用谷歌搜索得很好。但没有成功。我怎么能在这个过程中迈出一步？

我想做如下图：

![在此处输入图像描述](../Images/352d6851e5b6c73a1cf9a10de08d2612.png)

# android - Android：从照片中按手指区域选择的副本

> ID：11791213
> 
> 赞同：0
> 
> 时间：2012-08-03T07:28:59.557
> 
> 标签：android, camera, copy, photo, crop

我需要裁剪相机图像拍摄的图像，而不是矩形。用户应该通过触摸图像上的一个区域来绕过，然后这个区域应该被复制/删除。

如何确定用户在照片上追踪的区域？然后抹掉呢？

# php - 如何取消设置 json 对象

> ID：11791221
> 
> 赞同：1
> 
> 时间：2012-08-03T07:29:29.383
> 
> 标签：php, json, codeigniter, unset

我正在写的是一个临时禁止脚本，供那些喜欢用小型僵尸网络纠缠我的网站的人使用。

我遇到的唯一问题是如何取消设置 json 对象。

我有以下代码

```
/* JSON blocking script written by Michael Dibbets
 * Copyright 2012 by Michael Dibbets
 * http://www.facebook.com/michael.dibbets - mdibbets[at]outlook.com
 * Licenced under the MIT license http://opensource.org/licenses/MIT
 */
    // Turn on error reporting
    ini_set("display_errors", 1);
    error_reporting(E_ALL);  
    // Create our codeigniter filepath
    $filepath = FCPATH.'pagemodules/blocked.json';
    // Load file helper to be able to be lazy
    $this->load->helper('file');
    // Read the json file
    $data = read_file($filepath,'c+');
    // Have we succeeded? Then continue, otherwise fail graciously
    if($data !== false)
        {
            // Let's make it readable
        $json = json_decode($data);
            // Display it for debug purposes
        echo $data;
            // Iterate through every object, get the key to be able to unset it
        foreach($json as $key => $obj)
            {
                    // Dump the object for debug purposes
            var_dump($obj);
            echo "<P>";
                    // Has it's life time expired?
            if((int)$obj->{'endtime'} < strtotime("+2 hours 2 minutes"));
                {
                            // remove the object from the array
                unset($json[$key]);
                }
            }
            // Remove the file so we can overwrite it properly
        unlink($filepath); 
        }
    // Add some values to our array
    $json[] = array('ip' => $_SERVER['REMOTE_ADDR'],'endtime' => strtotime('+2 hours'));
    // Encode it
    $data = json_encode($json);
    // Write it to file
    write_file($filepath,$data,'c+'); 
```

我遇到的问题是 json encode 不会将其编码为数组而是作为对象。问题是以下不起作用：

```
// This gives the error Fatal error: Cannot use object of type stdClass as array in /public_html/ocs_application/controllers/quick.php on line 37
unset($json[$key]);
// This doesn't report anything, and does nothing
unset($json->{$key}); 
```

如何取消设置 json 对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T07:40:19.317

老兄，当您使用 json json_decode 时，将布尔值 true 作为第二个参数传递给它。

这样你就可以驾驭血腥的 stdClass。

现在，如果您想删除一个 json 对象，基本上它是一个字符串，所以只需做一些链接 `$var = null;`

如果要取消设置其中的一部分，则必须先对其进行解码，然后再对其进行编码。

```
$my_var = json_decode($json, true); // convert it to an array.

unset($my_var["key_of_value_to_delete"]);

$json = json_encode($my_var); 
```

始终将 true 作为第二个参数传递给 json_decode，以强制它对 json 对象进行递归转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:07:23.547

只是为了明确这`unset()`适用于 JSON 对象和数组：

```
$json_str = '{"foo": 1, "bar": 2, "baz": 3}';
$json_obj = json_decode($json_str);
$json_arr = json_decode($json_str, true);

var_dump($json_obj); // object(stdClass)#1 (3) { ["foo"]=> int(1) ["bar"]=> int(2) ["baz"]=> int(3) }
var_dump($json_arr); // array(3) { ["foo"]=> int(1) ["bar"]=> int(2) ["baz"]=> int(3) }    

unset($json_obj->baz);
unset($json_arr['baz']);

var_dump($json_obj); // object(stdClass)#1 (2) { ["foo"]=> int(1) ["bar"]=> int(2) }
var_dump($json_arr); // array(2) { ["foo"]=> int(1) ["bar"]=> int(2) }

$key = 'bar';
unset($json_obj->$key);
unset($json_arr[$key]);

var_dump($json_obj); // object(stdClass)#1 (1) { ["foo"]=> int(1) }
var_dump($json_arr); // array(1) { ["foo"]=> int(1) } 
```

# asp.net-mvc - IIS 不在 ASP.NET MVC 应用程序的工作服务器上显示 Silverlight 5 应用程序

> ID：11791224
> 
> 赞同：1
> 
> 时间：2012-08-03T07:29:41.133
> 
> 标签：asp.net-mvc, silverlight, iis-7.5

我的 SL 应用程序在我的开发机器上的所有 Web 服务器（嵌入式、IIS 7.5）的所有浏览器（Opera、FF、IE）中正确显示。但在工作网络服务器（IIS 7.5）中，没有一个浏览器显示我的 SL 应用程序。没有错误，什么都没有 - 只是空的地方。但它包含我的 SL 应用程序的所有标记：

```
<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="200px" height="40px">
          <param name="source" value="@Url.Content("~/Apps/SilverlightApplication1.xap")"/>
          <param name="onError" value="onSilverlightError" />
          <param name="background" value="white" />
          <param name="minRuntimeVersion" value="5.0.61118.0" />
          <param name="autoUpgrade" value="true" />
          <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0" style="text-decoration:none">
              <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
          </a>
</object> 
```

此外，在我的开发机器上，我在 SL 上下文菜单中有“在此 PC 上设置 SL 应用程序...”按钮，但在我的工作服务器上没有。

所有 IIS（在开发和工作服务器机器上）都具有应用程序池 .NET 版本和集成管道的设置“.NET 4 FW”。

我可以直接通过浏览器的地址栏获取 .xap 文件，但无法通过 HTML 页面获取。

似乎 SL 应用程序在我的工作服务器上不可见。如何解决？

添加。工作服务器上没有任何 Silverlight 开发或客户端框架 - 可以提供线索吗？

**更新。**我将对象标签中的数据和类型属性更改为“application/x-silverlight-app”。现在出现“邀请安装 SL”图像而不是我的 SL 应用程序。但是我已经有了最新版本的 SL 插件，安装 SL 时安装程序会告诉我有关它的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:42:43.810

如果你得到的只是一个白色的屏幕，那么你应该进入 silverlight.js 并制作它，以便将错误抛出到你可以看到的某种消息框。

如果它是纯白色的，则存在某种错误，并且如果在设置中基本上关闭了调试（即不向用户显示错误），那么您将不知道问题是什么。

[编辑]

添加 .xap application/x-silverlight-app 作为 MIME 类型。

# c# - Windows Phone 上的异步 CTP - 不能离线使用？

> ID：11791226
> 
> 赞同：1
> 
> 时间：2012-08-03T07:30:13.150
> 
> 标签：c#, windows-phone-7, async-ctp

我有这个 WP7 应用程序用于阅读网络提要。我正在使用 Async CTP 下载提要，将它们保存在本地并使用它们，这样我就可以离线使用 App。

当我连接到 wifi 或蜂窝网络时，一切都很好。但是当我离线时，应用程序在开始时崩溃并出现错误：

> 远程服务器返回错误：NotFound。

调用堆栈位置：

> AsyncCTPLibrary_Phone.dll!System.Runtime.CompilerServices.AsyncVoidMethodBulder.SetException.AnonymousMethod_2（对象状态）

堆栈跟踪：

> 在 System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 在 System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System.Net.WebClient.GetWebResponse(WebRequest 请求，IAsyncResult 结果) 在 System.Net .WebClient.DownloadBitsResponseCallback(IAsyncResult result) at System.Net.Browser.ClientHttpWebRequest.<>c_ *DisplayClassa.b* _8(Object state2) at System.Threading.ThreadPool.WorkItem.WaitCallback_Context(Object state) at System.Threading.ExecutionContext.Run （ExecutionContext executionContext，ContextCallback 回调，对象状态）在 System.Threading.ThreadPool.WorkItem.doWork(Object o) 在 System.Threading.Timer.ring()

知道为什么吗？我不会自动下载任何东西......

**编辑：**这是代码的开始部分，如果我离线，我真的尽量避免调用网络客户端：

```
private void MainPage_Loaded(object sender, RoutedEventArgs e)
 {
     MainPage_Init();
 }

private async void MainPage_Init()
 {
     string isConfig = await Load_Config("");

         if (isLoaded == false)
         {
        if (RSS.Parameters.AutoUpdate == "On")
                {
                    string isDataOk = await Refresh_data(); 
                    Refresh_ui();
                }
            else
                {
                    Refresh_ui();
                }
        isLoaded = true;
         }
 }

async Task<string> Load_Config(string force)
 {
     if (!DeviceNetworkInformation.IsNetworkAvailable)
     {
         MessageBox.Show(RSS.Parameters.MessageNetwork);
         //Load Config from IsoStore
         return "No Network";
     }
     else
     {
         string data = await new WebClient().DownloadStringTaskAsync(url);
         return await GetConfig_Save_Local_XML_Async(data);
         //Load Config from Web, Save to IsoStore
     }
 }

private async Task<string> Refresh_data() //load feeds form Internet and save them to IsoStore
 {
     IsolatedStorageSettings isoStorage = IsolatedStorageSettings.ApplicationSettings;

     if (!DeviceNetworkInformation.IsNetworkAvailable)
     {
         ProgressBarSwitch("off");
         MessageBox.Show(RSS.Parameters.MessageNetwork);

     }
     else
     {
         foreach (RSSFeedInfo sfi in RSS.Parameters.FeedsInfo)
         {
        await Load_Web_XML(new Uri(sfi.Web_XML), sfi.Local_XML);
         }
         isoStorage["SettingsLastUpdate"] = System.DateTime.Now;
         isoStorage.Save();
         ProgressBarSwitch("off");
     }
     return "ok";
 }

private void Refresh_ui() //load feeds from IsoStore
 {
     //use local data
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:30:15.600

你应该*总是*有一个`try`/`catch`围绕网络代码。有很多可能的错误情况，离线只是其中一种。

例如，如果您连接到没有 Internet 的本地 WiFi ，即使没有 Internet 访问，`IsNetworkAvailable`也会返回。`true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:13:19.127

从 MSDN看[这篇文章](http://msdn.microsoft.com/en-us/library/hh202859%28v=vs.92%29.aspx)，即使没有连接任何底层服务也`IsNetworkAvailable`可以返回：`true`

所以一些像这样的代码：

```
private void button1_Click(object sender, RoutedEventArgs e){
  var sb = new StringBuilder();
  sb.Append("Network available:  ");
  sb.AppendLine(DeviceNetworkInformation.IsNetworkAvailable.ToString());
  sb.Append("Cellular enabled:  ");
  sb.AppendLine(DeviceNetworkInformation.IsCellularDataEnabled.ToString());
  sb.Append("Roaming enabled:  ");
  sb.AppendLine(DeviceNetworkInformation.IsCellularDataRoamingEnabled.ToString());
  sb.Append("Wi-Fi enabled:  ");
  sb.AppendLine(DeviceNetworkInformation.IsWiFiEnabled.ToString());
  MessageBox.Show(sb.ToString());} 
```

可以为您提供以下方面的输出：

*   可用网络：真
*   蜂窝网络启用：假
*   漫游启用：假
*   已启用 Wi-Fi：错误

# node.js - 如何找到 nodejs 的连接设备名称？

> ID：11791227
> 
> 赞同：0
> 
> 时间：2012-08-03T07:30:14.440
> 
> 标签：node.js

有没有办法找到通过 http 连接到 nodejs 服务器的设备的名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:35:40.183

您可以查看 http 请求中的用户代理字符串。npm 中还有用于用户代理嗅探的包。

# jquery - 如何重新加载嵌入在html页面中的pdf

> ID：11791239
> 
> 赞同：1
> 
> 时间：2012-08-03T07:31:34.093
> 
> 标签：jquery, html, pdf

我正在使用类似于以下代码的 HTML5 页面上嵌入 pdf 文档：

```
<div style="background: transparent url(loading.gif) no-repeat">
    <object height="1250px" width="100%" type="application/pdf" data="aaa.pdf">
       <param value="aaa.pdf" name="src"/>
       <param value="transparent" name="wmode"/>
    </object>
</div> 
```

（[这个](https://stackoverflow.com/questions/1138232/html-embedded-pdfs-onload)问题的答案）

在某个时刻，我想重新加载嵌入的 pdf 文件而不重新加载整个页面。这怎么能做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:34:54.983

您可以使用 javascript 重写包含 div 的 innerHTML。所以给它一个id，然后当你决定重新加载时重新分配这个div的内容：

```
$('#pdf').html('<object height="1250px" ......</object>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:41:06.830

将其放入 iframe 中，然后您只需重新加载即可。应该是最简单的解决方案，它会起作用。

或者试试这个也可能有用

```
<object id="pdfDoc" ...>
    ...
</object>

$("#pdfDoc").replaceWith($("#pdfDoc")); 
```

# android - 将图像发送到服务器以在 android 中创建 Blob 键

> ID：11791245
> 
> 赞同：0
> 
> 时间：2012-08-03T07:32:18.893
> 
> 标签：android

我想将相机捕获的图像发送到创建 blob 密钥的服务器。我不知道如何将该图像发送到服务器。图像以哪种格式发送？

我正在尝试通过`HttpParams`.

这是我的代码，但数据不会发送到服务器。问题是什么？

```
String name=tname.getText().toString();
String addr=taddr.getText().toString();
String age=tage.getText().toString();
String cnct=tcnct.getText().toString();
String gen=tgen.getText().toString();
String wtm=twtm.getText().toString();
ba1=Base64.encodeToString(imageform, 0);
Date d=new Date();
String date=d.toString();

InputStream i1;
String back="";
HttpParams p=new BasicHttpParams();

p.setParameter("vname",name);
p.setParameter("address", addr);
p.setParameter("age", age);
p.setParameter("contact", cnct);
p.setParameter("gender", gen);
p.setParameter("whomto", wtm);

p.setParameter("myFile", ba1);

try {
    HttpClient httpclient = new DefaultHttpClient(p);

    HttpPost res=new HttpPost(result);
    HttpResponse response = httpclient.execute(res);

    HttpEntity entity = response.getEntity();
    i1 = entity.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(i1,"iso-8859-1"),8);
    StringBuilder sb = new StringBuilder();

    if ( reader.readLine() == null) {
        Log.e("inside if","No data");
    } else {
        String line = reader.readLine();
        i1.close();
        back=sb.toString();
    } 
```

我没有收到任何错误或异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:06:27.823

使用 , 将图像编码`Base64`为 a`String`并使用`MultipartEntity`. 在 php 中检索字符串并将其解压缩`base64_decode`到图像中。检查这个问题： [https ://stackoverflow.com/questions/10145417/android-send-image-through-http-post](https://stackoverflow.com/questions/10145417/android-send-image-through-http-post)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:49:11.567

您应该制作一个`MultipartPost`并将文件添加到您的文件中`MultipartEntity`，如下所示：

```
 multipartEntity.addPart("data", new FileBody(capturedImagePath)); 
```

你应该看看这个答案[Multipart post with Android](https://stackoverflow.com/questions/2017414/post-multipart-request-with-android-sdk)以获得更详细的答案。

# c# - C# DataGridView - 从 CellEndEdit 事件调用排序

> ID：11791254
> 
> 赞同：1
> 
> 时间：2012-08-03T07:33:23.517
> 
> 标签：c#, .net, event-handling, datagridviewtextboxcell

目前我正在使用`this.EndInvoke(this.BeginInvoke(new MethodInvoker( this.resortRows )));`调用检查空单元格然后对 DGV 进行排序的方法。但我是从 CellEndEdit 调用它的。

如果通过按 Enter 或 Tab 调用事件，一切正常，但如果我在仍处于 EditMode 时单击另一个单元格，我会在使用排序命令的行出现错误：

```
Operation is not valid because it results in a reentrant call to the SetCurrentCellAddressCore function. 
```

这是排序命令：

```
this.dataGridView1.Sort(this.dataGridView1.Columns[2], ListSortDirection.Ascending); 
```

我试图`MouseClick`像这样处理这个事件：

```
private void dataGridView1_MouseClick(object sender, MouseEventArgs e)
{
  this.dataGridView1.EndEdit();
} 
```

但这只有在我单击 DGV 内部的灰色区域（不在任何单元格或标题上）时才有效。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:04:41.813

我实际上尝试了您的代码，似乎问题出在`EndInvoke`.
只需将其删除（即仅使用`BeginInvoke`），它就会正常工作。

**编辑 ：**

在处理程序退出后立即执行`BeginInvoke`不使用调用的方法。`EndInvoke``CellEndEdit`

如果需要在每次排序后调用代码，只需将其放在调用方法的末尾即可。

# android - 是什么导致 NullPointerException？

> ID：11791255
> 
> 赞同：0
> 
> 时间：2012-08-03T07:33:28.707
> 
> 标签：android

我只是编写我想到的 Android 应用程序，以便更多地学习 SDK，但在使用模拟器尝试我的程序时遇到了问题。该应用程序正常安装，然后关闭只是给我一个 logcat 说在主类中有一个 NullPointerException。我无法在任何地方找到它，研究表明有一个对象在没有被初始化的情况下被使用？我不认为这是可能的，好像是这样，Eclipse 会给我一个错误，但在这种情况下它是一个运行时异常。我没有很多编程经验，尤其是在 Android 中，这个错误阻止我查看我的程序的其余部分是否有效！

继承人的[来源](http://pastebin.com/hFiX71uc)

这是[Logcat](http://pastebin.com/QMBeaa3a)

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:42:55.790

错误发生在 IOweYou.java 中 onCreate 方法的第 80 行。您可以在您发布的堆栈跟踪中的第 19 行看到它。

```
08-03 07:11:35.068: E/AndroidRuntime(681):      at com.andrei.iou.IOweYou.onCreate(IOweYou.java:80) 
```

localEL 是否正确定义？

编辑：使您的活动扩展 ExpandableListActivity 而不是活动。然后删除 setContentView。并改变

```
localEl.setListAdapter(mAdapter); 
```

到

```
this.setListAdapter(mAdapter); 
```

你的清单就会显示出来。然而，点击该项目仍会使其崩溃，但它是一个开始！

EDIT2：这是我找到的一个例子。 [http://smartandroidians.blogspot.com.es/2010/04/expandablelistactivity-in-android.html](http://smartandroidians.blogspot.com.es/2010/04/expandablelistactivity-in-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:00:20.807

我认为问题在于您的`ExpandableListActivity localEl`已创建但尚未启动。当您`localEL.setListAdapter(mAdapter);`在内部调用它时，它会调用它`setContentView`，如日志中所示。可能`getWindow()`返回 null 因为活动尚未初始化。

在不知道您想做什么的情况下，也许您的活动应该从 ExpandableListActivity 继承？

# android - 应用程序安装时的商店/市场位置 - 推荐人

> ID：11791267
> 
> 赞同：0
> 
> 时间：2012-08-03T07:34:25.203
> 
> 标签：android, google-play, referrer

我检查了一些与我的问题类似的线程，但没有设法找到我的询问的完整答案。

是否有可能在 android 应用程序（不使用 android 的 google 分析）中捕获引荐来源 - 用户下载/安装应用程序的市场。

例如，我在
a 中发布应用程序。谷歌/游戏商店
b. 亚马逊商店
C. getjar

现在我需要在代码中获取从哪个商店下载/安装在 url 或任何其他形式的信息。

这需要在应用程序中产生一些小的差异 - 对于不同的商店。例如显示不同的更多应用程序链接，因为我们在所有商店中都没有相同的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:22:35.813

您可以使用[getInstallerPackageName()](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)来检查谁安装了该应用程序。这显然只有在实际安装应用程序后才有效，您必须通过实验找到软件包。

通常，使用资源标志等为不同的商店创建不同的构建是一个更好的主意。

# tridion - 图像正在发布，TCM id 附加图像名称

> ID：11791268
> 
> 赞同：5
> 
> 时间：2012-08-03T07:34:27.963
> 
> 标签：tridion, tridion-2011

发布方式 - 静态

我正在尝试发布图像，但问题是每当我发布这些图像时，它们的 TCM URI 都会附加到它们的名称之后（即，如果图像名称是`example`并且它的 TCM URI 类似于`tcm:1-115`，则图像文件名将变为`example_tcm1-115`）。

我写了以下代码：

```
public void Transform(Engine engine, Package package)
{
    Filter MMCompFilter = new Filter();
    MMCompFilter.Conditions["ItemType"] = Tridion.ContentManager.ItemType.Component;
    Folder folder = engine.GetObject("tcm:1-1-2") as Folder;

    foreach (Component MMcomp in folder.GetItems(MMCompFilter))
    {
        Binary binary = engine.PublishingContext.RenderedItem.AddBinary(MMcomp);
        String binaryurl = binary.Url;
        char[] array = binaryurl.ToCharArray();
        Array.Reverse(array);
        string obj = new string(array);
        string final = newImagepath(obj);
        char[] array2 = final.ToCharArray();
        Array.Reverse(array2);
        string obj2 = new string(array2);

        package.PushItem("Image", package.CreateHtmlItem(obj2));
    }

    public string newImagepath(string filePath)
    {
        int formatIndex =filePath.IndexOf(".");
        string format= filePath.Substring(0,formatIndex);
        int finalPath=filePath.IndexOf("_");
        string newPath=filePath.Substring((finalPath+1));
        return (format+"."+newPath);
    }
} 
```

我想发布没有附加 TCM URI 的图像。请建议如何做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T08:16:34.190

Chris Summers 就这个主题写了一篇非常好的文章[http://www.urbancherry.net/blogengine/post/2010/02/09/Unique-binary-filenames-for-SDL-Tridion-Multimedia-Components.aspx](http://www.urbancherry.net/blogengine/post/2010/02/09/Unique-binary-filenames-for-SDL-Tridion-Multimedia-Components.aspx)

这基本上是一件非常简单的事情，但可能会产生巨大的后果，您应该注意！

您只能在单个位置发布具有特定文件名的二进制文件一次（并且二进制文件只能发布到演示服务器上的单个位置，除非您将其作为变体发布）。但是，在 CMS 中，很容易在不同的文件夹中创建具有相同二进制文件名的多媒体组件，如果它们发布到相同的位置将会发生冲突。这就是默认情况下 SDL Tridion 将 TCM URI 附加到文件名以使其唯一的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T08:49:13.497

最简单的总是最好的。

在您的 TBB 中，只需将单个图像推送到包中：

```
package.PushItem(package.CreateMultimediaItem(component.Id)); 
```

然后使用“PublishBinariesInPackage”TBB 将这些图像发布到您的演示服务器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T10:00:25.397

您可以为此目标使用 RenderedItem.AddBinary 方法。该方法的一些重载版本允许将图像作为流发布，并传递任何文件名。例如：

```
public Binary AddBinary(
    Stream content,
    string filename,
    string variantId,
    string mimeType
) 
```

# java - 来自 MappedByteBuffer 的 DataInputStream

> ID：11791270
> 
> 赞同：1
> 
> 时间：2012-08-03T07:34:37.853
> 
> 标签：java, memory-mapped-files, bytebuffer, datainputstream

我想知道是否可以创建由 MappedByteBuffer 实例支持的 DataInputStream ？

```
MappedByteBuffer buff = (initialize...);
ByteArrayInputStream bis = new ByteArrayInputStream(buff.array()); 
```

此代码片段引发[UnsupportedOperationException](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CG8QFjAA&url=http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/UnsupportedOperationException.html&ei=IX4bULD0OOmn4gTnoYDoAw&usg=AFQjCNGpz54HJPh7w5G3b6LLuk10FHPVaQ)，因为映射的字节缓冲区不受可访问数组的支持。

然后我尝试通过调用[load](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/MappedByteBuffer.html#load%28%29)方法将字节加载到物理内存，这是没有用的。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:38:13.267

您可以覆盖 DataInputStream 中的方法以使用 MappedByteBuffer。

但是，最简单的方法是直接使用 MappedByteBuffer，因为它支持几乎所有相同的方法。

# ruby-on-rails - Rails：将两个查询合二为一

> ID：11791277
> 
> 赞同：0
> 
> 时间：2012-08-03T07:35:02.240
> 
> 标签：ruby-on-rails, ruby, rails-models

我是新来的轨道。以下是以 Foo 作为模型对象的代码：

```
a = Foo
a = Foo.where(age: 18)
if params[:sort] == "desc"
  a = a.order("name desc") 
end 
```

这里执行了两个查询，我想将它们合并为一个，或者你可以说我想执行 `Foo.where(age=18).order("name asc")`

请记住，可能存在不需要 order 的情况，即 params[:sort] 不等于 desc。

请不要给出解决方案

```
if params[:sort] == "desc"
    a = a.where(age=18).order("name desc") 
else
    a = a.where(age=18)
end 
```

因为它使代码变得多余，而且对于更多参数，它可能不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T07:38:40.853

不，你错了。实际上，这里不执行任何查询。

```
a = Foo
a = Foo.where(age=18)
if params[:sort] == "desc"
  a = a.order("name desc") 
end 
```

实际查询发送到您开始检索数据的位置。也就是说，做类似的事情

```
a.each do |b|
  # do something with b
end 
```

在此之前，您可以安全地链接标准构建方法（`where`、`order`和`select`其他方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:39:27.173

实际上你的代码只会执行一个查询。这是因为在 Rails 中，只有在您访问结果后才会调用数据库。因此，当您编写 a.first （或类似的东西）时，它将进行数据库调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:39:58.467

如果这就是你的意思......一个简单的解决方案是：

```
a.where(age: 18).order("name #{params[:sort] || 'asc'}") 
```

因此，如果`params[:sort]`是`nil`，它将默认为`asc`.

# ios - 是否可以在 ios 应用程序中注销 Twitter？

> ID：11791289
> 
> 赞同：0
> 
> 时间：2012-08-03T07:35:55.873
> 
> 标签：ios, twitter

我已经使用推文表在我的应用程序中发推文，效果很好，但设置后无法注销..我必须重新启动应用程序才能发推文，但我想要的是制作一个单独的登录按钮，但在推特中是否有可能从应用程序内的 twitter 登录和注销？提前感谢负载:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:37:20.037

我不认为这是可能的。您必须在手机设置中注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:54:06.457

您必须为 Twitter 登录提供自己的 UI。例如，一旦用户输入 Twitter 凭据，您可以先添加 Twitter 帐户，然后调用 Tweet 表。

我怀疑是否可以使用 SDK 注销或删除帐户。

添加推特账号的示例代码：

```
ACAccountStore *store = [[ACAccountStore alloc] init] ;

        ACAccountType *twitterType = [store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
        [store requestAccessToAccountsWithType:twitterType withCompletionHandler:^(BOOL granted, NSError *error) {
            if(granted) {
                ACAccount *twitterAccount = [[ACAccount alloc] initWithAccountType:[store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter]];

                ACAccountCredential *outhCredential = [[ACAccountCredential alloc] initWithOAuthToken:token.key tokenSecret:token.secret];
                twitterAccount.credential = outhCredential;

                [store saveAccount:twitterAccount withCompletionHandler:^(BOOL success, NSError *error) {
                    if(success)
                    {
                        [self performSelectorOnMainThread:@selector(showTweetSheet) withObject:nil waitUntilDone:NO];
                    }
                }];

                [outhCredential release];
                [twitterAccount release];
                [store release];
            }
            // Handle any error state here as you wish
        }]; 
```

# jquery - JQuery：如果选择值更改，则在日期选择器函数之间更改

> ID：11791292
> 
> 赞同：0
> 
> 时间：2012-08-03T07:36:20.130
> 
> 标签：jquery, function, dynamic, user-interface, datepicker

我有一个带有选择列表和两个文本框的页面。文本框与 JQuery 链接到 JQuery UI Datepicker。我需要一种能够更改文本框功能的方法，这样，如果用户从选择列表中选择一个选项，它就会使用特定的功能，或者如果选择了另一个选项，则会使用另一个功能。

就像是：

```
$(document).ready(function(){
    $('#dates').change(function(){
      var value = $(this).val();
      if (value.indexOf('1') >= 0){
      $(function() {
          $('#datepicker_start').datepicker( {
                    changeMonth: true,
                    changeYear: true,
                    dateFormat: 'yy-mm-dd'
                    });
            $('#datepicker_end').datepicker( {
                    changeMonth: true,
                    changeYear: true,
                    dateFormat: 'yy-mm-dd'
                });
            });
        } else {
            $(function() {
                $('#datepicker_start').datepicker( {
                    changeMonth: true,
                    changeYear: true,
                    showButtonPanel: true,
                    dateFormat: 'yy-mm-dd'
                });
                $('#datepicker_end').datepicker( {
                    changeMonth: true,
                    changeYear: true,
                    showButtonPanel: true,
                    dateFormat: 'yy-mm-dd'
                });
            });
        }
    });
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:02:23.107

如果两个选项之间的差异仅是 showButtonPanel，也许这就是您想要的

```
$(function(){
    $("#datepicker_start,#datepicker_end").datepicker({
          changeMonth: true,
          changeYear: true,
          dateFormat: 'yy-mm-dd'

    });
    $('#dates').change(function(){
         var value = $(this).val();
         var toShowButtonPanel = true; 
         if (value == ANYVALUEYOUDEFINED){
             toShowButtonPanel = false;  
         }
         $("#datepicker_start,#datepicker_end").datepicker("option","showButtonPanel",[toShowButtonPanel]);
    });

}); 
```

# iphone - iPod 应用程序兼容性

> ID：11791293
> 
> 赞同：0
> 
> 时间：2012-08-03T07:36:24.273
> 
> 标签：iphone

是否有任何 iphone 应用程序可以以适当的屏幕分辨率运行到 ipod？

我在设计时有点困惑，如果我为 iPhone 和 iPod 制作应用程序，那么我是否需要为两者设计不同的屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:12:12.010

iPod 和 iPhone 目前具有相同尺寸的屏幕。正如其他评论者所指出的，视网膜和非视网膜之间有不同的模型，它们具有不同的分辨率，因此您将为它们提供@2x 和正常大小的图形。

但是，iPad 的屏幕尺寸和分辨率大不相同。如果您只为 iPhone/iPod 编写代码，您也可以在 iPad 上运行，但它只会占用一小部分屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:53:55.777

不，基本上是一样的。但是，您需要注意设备功能，例如 iPod 没有电话功能（如果您打算使用它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:59:34.843

目前 iPod touch 和 iPhone 的屏幕尺寸相同。它们可能具有不同的分辨率，但屏幕尺寸是相同的，除了提供不同尺寸的图像资源外，应该没有问题。

# tsql - 对于 TSQL 插入/更新触发器，插入和删除都可以为空吗？

> ID：11791294
> 
> 赞同：4
> 
> 时间：2012-08-03T07:36:40.350
> 
> 标签：tsql, triggers

我一直在使用 TSQL 触发器，假设插入的表始终包含插入或更新的记录，而删除的表始终包含更新的记录（我忽略了删除）。

这是相关的 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/ms191300.aspx](http://msdn.microsoft.com/en-us/library/ms191300.aspx)

但是，我遇到过插入和删除都是空的情况。这是我一直在使用的测试触发器。

```
CREATE TRIGGER [dbo].[InsertUpdateTest] ON [dbo].[Test] 
AFTER INSERT, UPDATE 
AS
    DECLARE @countInserted INT
    DECLARE @countDelete INT

    SET @countInsert = (SELECT COUNT(*) FROM INSERTED)
    SET @countDeleted = (SELECT COUNT(*) FROM DELETED)

    IF (@countInserted = 0 AND @countDelete = 0)
    BEGIN
        print 'Inserted and deleted are both empty'
    END 
```

在什么条件下会发生这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T07:42:52.580

回答我自己的问题。当触发表上的更新语句没有更新任何行时，就会发生这种情况。触发器仍会触发，但插入和删除的表为空。例如：

```
UPDATE Test Set somefield=0 WHERE id='Values does not exist' 
```

# javascript - 在Javascript中将所有复选框值作为数组传递

> ID：11791296
> 
> 赞同：3
> 
> 时间：2012-08-03T07:36:58.313
> 
> 标签：javascript, html, ajax

我有以下复选框，我需要将它们作为数组值获取。

```
<input type="checkbox" id="contact_id" value="4" />
<input type="checkbox" id="contact_id" value="3" />
<input type="checkbox" id="contact_id" value="1" />
<input type="checkbox" id="contact_id" value="5" /> 
```

我需要将它们作为数组传递给一个 ajax 请求，如下所示：

```
xmlHttp.open("POST","?action=contact&contact_id=" +contacts,true); 
```

我正在使用这个函数来获取值但不能将它们作为数组传递给函数，像这样传递`4,3,1,5.`我需要像这样传递它们

`contact_id[]=4&contact_id[]=3&contact_id[]=1&contact_id[]=5`

我这样做如下

```
function getContacts(){
            var contacts = document.myform.contact_id, ids = [];
            for (var i = 0; i < contacts.length; i += 1){
                if (contacts[i].checked)
                     ids.push(contacts[i].value);
            }
            return ids;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:56:42.960

[http://jsfiddle.net/xQezt/](http://jsfiddle.net/xQezt/)

这个小提琴做你想做的吗？序列化是幼稚的，但您可以在其他地方或使用 Zepto、jQuery 或 YUI 之类的框架找到正确的方法来执行该操作。

首先，我找到了一种“提交”数据的方法。输出到控制台，所以打开你的萤火虫。不过可以去任何地方。

```
//submit event registration
submitButton.onclick = function () {
    var contactArray = inputsToArray(contacts.children);
    var data = serializeArray(contactArray, 'contact_id[]');
    console.log(data);
} 
```

然后我让你的方法“getContacts”更通用：

```
function inputsToArray (inputs) {
    var arr = [];
    for (var i = 0; i < inputs.length; i++) {
        if (inputs[i].checked)
            arr.push(inputs[i].value);
    }
    return arr;
} 
```

这是天真的序列化函数。我不希望这在所有情况下都能正常工作，所以你应该做一些研究，从哪里获得一个**好的**序列化算法：

```
function serializeArray (array, name) {
    var serialized = '';
    for(var i = 0, j = array.length; i < j; i++) {
        if(i>0) serialized += '&';
        serialized += name + '=' + array[i];
    }
    return serialized;
} 
```

我还稍微修改了您的 HTML：

```
<div id="contacts">
<input type="checkbox" value="4" />
<input type="checkbox" value="3" />
<input type="checkbox" value="1" />
<input type="checkbox" value="5" />
</div>

<button id="submit">Submit</button> 
```

这让我可以像这样查询 DOM：

```
var d=document;
var submitButton = d.getElementById('submit');
var contacts = d.getElementById('contacts'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:07:26.667

您输入的 id 是重复的。所以我建议你使用 name 而不是 id

例如，您的 HTML 将如下所示：

```
<form id='contactform'>
<input type="checkbox" name="contact[]" value="4" />
<input type="checkbox" name="contact[]" value="3" />
<input type="checkbox" name="contact[]" value="1" />
<input type="checkbox" name="contact[]" value="5" />
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

然后，如果您想获取查询字符串的值，请使用[JQuery Serialize](http://api.jquery.com/serialize/)

```
$('#contactform').serialize(); 
// this will take some thing like this, Example check the second and the fourth
// contact%5B%5D=3&contact%5B%5D=5 
```

jsfiddle：http: [//jsfiddle.net/Eqb7f/](http://jsfiddle.net/Eqb7f/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-16T06:06:25.033

```
$(document).ready(function() {
  $("#submit").click(function(){
    var favorite = [];
    $.each($("input[class='check']:checked"), function(){   
      favorite.push($(this).val());
    });
    document.getElementById('fav').value = favorite.join(", ");
  });
}); 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<div class="cd-form-list">
  <div>
    <input type="checkbox" id="cd-checkbox-2" class="check" value="A">
    <label for="cd-checkbox-1">A for Apple</label>
  </div>
  <div>
    <input type="checkbox" id="cd-checkbox-2" class="check" value="B">
    <label for="cd-checkbox-2">B for Ball</label>
  </div>
  <div>
    <input type="checkbox" id="cd-checkbox-3" class="check" value="C">
    <label for="cd-checkbox-3">C for Cat</label>
  </div>
  <div>
    <input type="checkbox" id="cd-checkbox-4" class="check" value="D">
    <label for="cd-checkbox-4">D for Dog</label>
  </div>
  <div>
    <input type="checkbox" id="cd-checkbox-5" class="check" value="E">
    <label for="cd-checkbox-5">E for Ear</label>
  </div>
  <div>
    <input type="checkbox" id="cd-checkbox-6" class="check" value="F">
    <label for="cd-checkbox-6">F for Fish</label>
  </div>
  <div>
    <input type="checkbox" id="cd-checkbox-7" class="check" value="G">
    <label for="cd-checkbox-7">G for God</label>
  </div>
  <div>
    <input type="checkbox" id="cd-checkbox-8" class="check" value="H">
    <label for="cd-checkbox-8">H for Hen</label>
  </div>
</div>
<div>
  <input type="submit" value="Submit" id="submit">
</div>
<input name="services" id="fav"> 
```

# wpf - WPF ItemsControl -> ContentPresenter

> ID：11791298
> 
> 赞同：3
> 
> 时间：2012-08-03T07:36:59.827
> 
> 标签：wpf, mvvm, grid, itemscontrol, contentpresenter

我希望有人可以帮助我解决我的`ItemsControl`问题:)

我使用 a`ItemsControl`作为`Grid`在MVVM（以及单元格内容）`ItemsPanel`中添加/删除的一个，`Column/RowDefinitions`这工作正常，但是当我尝试添加一个`GridSplitter`拆分器时，显示但他不工作。原因是为每个项目`ItemsControl`添加一个新的......`ContentPresenter`

当children 属性中的项目是 typeof时，有什么方法可以用`ContentPresenter`Control`GridSplitter`替换？`Type``SplitterVM`

我也在尝试将`Splitters`on绑定`Grid`为 an`DependencyProperty`但是当我使用`ItemsPanel`它时它不起作用，因为我无法添加`Children`到`Panel`...

这是我的代码：

```
<DataTemplate DataType="{x:Type vm:GridVM}">
    <ItemsControl ItemsSource="{Binding Children}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <view:LayoutGridControl Rows="{Binding Rows}"  Columns="{Binding Columns}" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemContainerStyle>
            <Style>
                <Setter Property="Grid.Row" Value="{Binding Model.RowIndex}"/>
                <Setter Property="Grid.Column" Value="{Binding Model.ColumnIndex}"/>
                <Setter Property="Grid.RowSpan" Value="{Binding Model.RowSpan}"/>
                <Setter Property="Grid.ColumnSpan" Value="{Binding Model.ColumnSpan}"/>
            </Style>
        </ItemsControl.ItemContainerStyle>
    </ItemsControl>
</DataTemplate> 
```

# asp.net - modalpopupextender 总是显示并且 targetcontrolid 不工作

> ID：11791300
> 
> 赞同：1
> 
> 时间：2012-08-03T07:37:09.327
> 
> 标签：asp.net

我有一个中继器，里面有一列链接按钮。我想将这些链接按钮添加到，`targetcontrolid`但它失败了，因为它们在**中继器**中。所以我创建了一个额外的隐形按钮，如下所示：

```
<asp:Button ID="btnFakePopUp" runat="server" Text="" visible="false" 
    onclick="btnFakePopUp_Click"/> 
```

在我尝试将链接按钮链接到此代码中的不可见按钮：

```
 protected void lbtnPosition_Click(object sender, EventArgs e) {
        btnFakePopUp_Click(sender, e);
    }

    protected void btnFakePopUp_Click(object sender, EventArgs e)
    {
        popupJob.Show();
    } 
```

这是我的`modalpopupextender`代码（我的前缀是 asp: 所以不要混淆）：

```
 <asp:ModalPopupExtender ID="popupJob" runat="server" PopupControlID="panelPopup" CancelControlID="popupClose" TargetControlID="btnFakePopUp"
    Drag="true" PopupDragHandleControlID="panelPopup">
</asp:ModalPopupExtender>
<asp:Panel ID="panelPopup" runat="server" BackColor="#ebf0ff" Width="300px">
<div>
    test<br />
    <asp:Button ID="btnSave" runat="server" Text="Save" />
    <asp:Button ID="btnApply" runat="server" Text="Apply" />
    <input id="popupClose" type="button" value="Close" />
</div>
</asp:Panel> 
```

问题是： 1.`panelpopup`总是显示...（它应该被隐藏，只有在用户单击链接按钮时才显示）2.当我尝试单击链接按钮时没有任何反应（`panelpopup`应该显示）谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T11:52:19.070

对于不可见的 btnFakePopup，您可以使用 CSS 设置 display:none

例子：

```
<asp:ImageButton ID="btnFakePopUp" runat="server" style="display: none"></asp:ImageButton> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:12:44.070

我不明白为什么，但设置`btnFakePopUp`可见性来`true`纠正问题。现在我`modalpopupextender`的运行顺利。

# c# - 如何将 Action 提取到成员函数中？

> ID：11791304
> 
> 赞同：2
> 
> 时间：2012-08-03T07:37:24.820
> 
> 标签：c#, .net, linq, lambda

我有这个代码：

```
class SomeClass {
    void someFunction()
    {
          Action<string> myAction = (what)=>
          {
             //whatever
          }
          new List<string>().ForEach(myAction);
    }
} 
```

我想将里面的代码提取`myAction`到一个单独的成员函数中。

我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T07:39:25.170

```
class SomeClass
{
    void someFunction()
    {
        Action<string> myAction = Whatever;
        new List<string>().ForEach(myAction);
    }

    public void Whatever(string what)
    {
        // ... whenever
    }
} 
```

或者直接，不定义局部`Action<string>`变量（无论如何，这可能会在发布模式下被优化）：

```
new List<string>().ForEach(Whatever); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T07:40:43.857

你在找这个吗？

```
class SomeClass { 
    void someFunction() 
    { 
          new List<string>().ForEach(SeparateMemberFunction); 
    }
    void SeparateMemberFunction(string s)
    {
        //whatever
    } 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T07:40:52.547

这应该是等效的：

```
class SomeClass {

    void myAction(string what)
    {
        // whatever
    }

    void someFunction()
    {
          new List<string>().ForEach(item => myAction(item));
    }
} 
```

既然`Action<string>`意味着`a method with a string parameter which does not return a value`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T07:51:59.197

我使用不同的方式：

```
class SomeClass
{
    public void SomeFunction()
    {               
        new List<string>().ForEach(e => this.MyAction(e));
   }

    private void MyAction(string str){ /* ... */ }
} 
```

我发现它更清楚，因为我第一眼看到的`MyAction`是一种方法，而不是 a`field`或 a `property`

# eclipse-plugin - Eclipse RCP 热部署到导出版本

> ID：11791314
> 
> 赞同：1
> 
> 时间：2012-08-03T07:38:15.030
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在研究 Eclipse RCP，其中我探索了我的项目所需的一些概念，我知道如何导出 RCP 产品（它是可移植的）。

1.  我的开发方法是，对于每个 Java 文件更改，我都会删除以前导出的产品并再次导出它。我认为我的方法很愚蠢，可能有更好的方法。

2.  对于 java 文件中的修复，每次导出都很耗时。作为一种解决方法，我想将 bin 中生成的类文件替换为我的插件 jar，但是对于我的 java 文件，有多个使用 classname$1.class 等生成的类文件。很难将所有这些类文件替换到我的插件中。罐。

在这种情况下有什么更好的做法。专家 RCP 开发人员会做什么，以便将 Java 更改反映到产品导出版本而不删除产品或创建新产品。是不是有什么热部署之类的东西，比喻Jsp变成Application server就是热部署。

期待建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:26:26.073

日常我通常只是在调试器中运行我的产品——代码更改会立即反映出来。但是，您可以使用 p2 更新以前导出的产品 - 尽管这需要先导出产品的新版本以生成兼容的 p2 存储库。另一种方法是将您的更改推送到构建服务器并让它为您构建新产品和 p2 存储库。我发现[Tycho](http://www.eclipse.org/tycho/)是帮助自动化构建的好选择。

# html - 使用上传类在codeigniter中使用文本字段上传文件

> ID：11791315
> 
> 赞同：0
> 
> 时间：2012-08-03T07:38:18.757
> 
> 标签：html, forms, codeigniter, input, upload

我有一个表单，其中有两种类型的字段意味着输入 text 、 radio 、 select 、 textarea 和文件上传字段。
我使用相同的表格进行插入和编辑。
我的问题是我必须上传文件并将数据插入表中。
控制器功能

```
function myUploadwithInsert(){

if($category    =   $this->input->post())
{
    $this->load->library('form_validation');

    if(!$this->imageUpload()){

            $error = array('error' => $this->upload->display_errors());

            $this->load->view('my_view', $error);

    }else{

        $this->form_validation->set_rules('name', 'Category Title', 'trim|required');

        if ($this->form_validation->run() == TRUE)
        {
            if ($id = $this->categories_model->create($category))
            {
                redirect('admin/categories');
            }
        }else{
            $this->load->view('my_view');
        }           
    }

    }else{

        $this->load->view('my_view');
    }    
} 

public function uploadImage()
{
    $config['upload_path']      = './uploads/';
    $config['allowed_types']    = 'gif|jpg|png|jpeg';
    $config['max_size']     = '100';
    $config['max_width']        = '1024';
    $config['max_height']       = '768';

    $this->load->library('upload', $config);        

    if ( ! $this->upload->do_upload())
    {
        return false;
    }
    else
    {
        $data = $this->upload->data();

        return $data;
    }       

} 
```

现在的问题是，如果上传图像并且出现表单输入错误，表单将再次显示，用户更正表单字段并再次填写图像字段。然后图像将再次上传。
当我先定义输入条件然后上传同样的问题时，同样的事情会出现。我怎样才能解决这个问题？有没有其他方法可以完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T12:18:41.940

经过一番研究，我在这里找到了解决方案

使用 Codeigniter 表单验证库

[http://codeigniter.com/user_guide/libraries/form_validation.html](http://codeigniter.com/user_guide/libraries/form_validation.html)

和

[http://keighl.com/post/codeigniter-file-upload-validation](http://keighl.com/post/codeigniter-file-upload-validation)

一篇很棒的文章。解决我的问题

# java - 我怎样才能结合两个类？

> ID：11791317
> 
> 赞同：0
> 
> 时间：2012-08-03T07:38:34.337
> 
> 标签：java, arrays, string

我有两个`.txt`文件。首先，我将 的内容`file1.txt`放入字符串数组中。之后，我使用另一个类对另一个文件做同样的事情：`file2.txt`. 然后，我将两个字符串数组的内容相互比较（特别是字符串数组中的单词。）如何将我的两个类相互组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:43:31.017

欢迎来到 SO，

混合 DataInputStream 和 BufferedReader 没有意义。一个更简单的模式是执行以下操作

> 我可以比较两个txt文件的这些内容吗？

```
public static void main(String... args) throws IOException {
    List<String> strings1 = readFileAsList("D:\\Denemeler\\file1.txt");
    List<String> strings2 = readFileAsList("D:\\Denemeler\\file2.txt");
    compare(strings1, strings2);
}

private static void compare(List<String> strings1, List<String> strings2) {
    // TODO
}

private static List<String> readFileAsList(String name) throws IOException {
    List<String> ret = new ArrayList<String>();
    BufferedReader br = null;
    try {
        br = new BufferedReader(new FileReader(name));
        String strLine;
        while ((strLine = br.readLine()) != null)
            ret.add(strLine);
        return ret;
    } finally {
        if (br != null) br.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:16:55.290

Jes 'Peter Lawrey' 是对的。

Java 是一个面向对象的程序，我们必须牢记这一点。使用通用方法并避免使用一个类。

如果您想了解内部类，请查看这个[Java Inner 类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:48:45.070

您想在一个程序中执行所有这些操作。一个程序只有一个活动方法`main`，当您启动程序时将执行该方法。

*   将 file1.txt 读入字符串数组
*   将 file2.txt 读入字符串数组
*   比较结果

您的主要方法将如下所示：

```
public static void main(String[] args) {
   String[] s1 = read("file1.txt");
   String[] s2 = read("file2.txt");
   compare(s1, s2);
} 
```

现在你`String[] read(File f)`用自己的逻辑和方法实现方法`compare(String[] s1, String[] s2)`

# c# - 将从下拉列表中选择的值获取到字符串变量c#

> ID：11791319
> 
> 赞同：1
> 
> 时间：2012-08-03T07:38:36.677
> 
> 标签：c#, asp.net, drop-down-menu

```
static public String Titl; 
```

现在用简单的编程语言假设我的表单上有一个下拉列表。当我调试时，我发现写入时 ID 为 dropdownlist1 的 dropdowlist

```
dropdownlist1.text; 
```

包含我在下拉菜单中选择的值。但是，当我做这样的事情时：

```
titl = dropdownlist1.text; 
```

我没有得到 title 变量中的值。需要帮助。谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:43:46.983

如果你想要文字，请检查这个..然后

```
 title=dropdownlist1.selecteditem.text; 
```

如果你想要价值然后

```
 title=dropdownlist1.selecteditem.value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:05:05.000

```
int selectedIndex=dropdownlist1.SelectedIndex;//get index
string selectedText=dropdownlist1.SelectedItem.Text;//get text
string selectedValue=dropdownlist1.SelectedItem.Value;//get value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:47:58.773

```
 Titl = dropdownlist1.SelectedValue; 
```

作品！谢谢你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:44:29.157

```
 Title = !string.IsNullorEmpty(dropdownlist1.SelectedItem.Text) ?
 dropdownlist1.SelectedITem.Text : ""; 
```

# android - 如何在android中动态添加和删除视图

> ID：11791326
> 
> 赞同：0
> 
> 时间：2012-08-03T07:39:15.030
> 
> 标签：android, android-layout

我想在屏幕下方设计 ![在此处输入图像描述](../Images/7aaec740dc90bfa1c6b9295a2ac88a28.png)

当我按下“添加号码”按钮时，它会在下面的可滚动布局中插入一个条目。当我按下“X”按钮时，它应该删除该特定行。如何做到这一点？任何的想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:43:13.053

采用

```
ViewGroup.addView(View view); 
```

为某些布局添加视图。

要动态创建布局，请使用：

```
TextView txtView=new TextView(this);
//Its an example, you can create layouts, buttons, image view, and other components. 
```

要动态删除布局或视图，请获取布局的父级并删除，方法是：

```
ViewGroup.removeView(View view); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:45:55.563

您应该使用`ListView`由`ArrayList`of `Objects`or支持的 a `Strings`。当您想从 中删除项目时，请从`ListView`中删除该对象`ArrayList` ：

```
mData.remove(object); 
```

然后通知`ListView`日期已更改：

```
mAdapter.notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-03T09:51:29.490

1.  使用 ListView 显示模式列表
2.  为每个列表项创建自定义布局。例如

    ```
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="555*" />
    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="matched 5 " />       
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="X" />
    </LinearLayout> 
    ```

3.  创建一个扩展 BaseAdapter 的自定义适配器类

    *   它可以维护要显示的模式列表
    *   在自定义适配器的 getView 方法中——
        *   膨胀xml
        *   使用列表根据索引参数设置信息（如模式和匹配数）
        *   为按钮设置 onclick 监听器（从列表中删除该项目并调用 notifyDatasetInvalidated()）
        *   返回视图。
4.  在“添加编号”上将项目添加到适配器中的列表

# c# - 面板中的面板显示不同的文本框宽度

> ID：11791332
> 
> 赞同：0
> 
> 时间：2012-08-03T07:39:34.800
> 
> 标签：c#, winforms, panel

我的 winforms 项目包含一些带有文本框的面板，它们的宽度均为 300。其中一个面板包含另一个面板，但内部面板的文本框看起来要大得多。当我将内部面板的大小设置为它自己的设计器中的大小时，它会切断文本框。如何让我的文本框看起来相同大小，无论它们在哪个面板中？最好的问候， 期待

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:46:27.643

您是否明确设置了文本框的宽度？

您可以通过以下三种方式之一执行此操作：

*   在使用设计器时的“属性”窗口中（首先选择一个文本框）。
*   在 formName.Designer.cs 文件中设置 TextBox.Width 属性。
*   `textBox1.Width = 300;`在 ( )后面的代码中显式设置 TextBox.Width 属性。

# php - 一个 href 在 facebook 画布 url 页面中不起作用

> ID：11791334
> 
> 赞同：0
> 
> 时间：2012-08-03T07:39:36.050
> 
> 标签：php, facebook, redirect

我正在开发一个脸书应用程序。我的问题是，我试图从 Facebook 应用程序重定向到谷歌。它在物理网址[http://movie.jobslanda.com/fb/上运行良好，但在应用程序网址](http://movie.jobslanda.com/fb/)[http://apps.facebook.com/moviereviewforyou/](http://apps.facebook.com/moviereviewforyou/)上不起作用。请帮我找出问题所在。而canvas url页面中的代码只是

```
<?php header("Location:http://google.com");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:48:48.173

你必须使用`top.location.href="";`

# sql - 如何将字段内的值总和分配给变量？

> ID：11791337
> 
> 赞同：4
> 
> 时间：2012-08-03T07:40:01.867
> 
> 标签：sql, sql-server, variables, aggregate-functions, variable-assignment

我有一个 SQL 语句，它从我的数据库中的表中选择各种数据，并且我在我的代码中声明了变量，例如：

```
DECLARE @TotalAge int; 
```

假设表中的一个字段是`Age`，我将如何对从查询中收集的值求和并将它们作为总计分配给变量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T07:45:32.880

第一组`@TotalAge`：

```
set @TotalAge=(select sum(Age) from TableName) 
```

然后选择`@TotalAge`您想要的位置：

```
select @TotalAge 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:43:06.450

你可以使用：

```
 SET @TotalAge = (SELECT SUM(Age) FROM YourTable) 
```

或者

```
 SELECT @TotalAge  = SUM(Age) FROM YourTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:48:26.850

用于`SET`分配一些：

```
SET @TotalAge = (SELECT SUM(Age) FROM YourTable) 
```

# android - 从标题设置文本字段的值

> ID：11791339
> 
> 赞同：0
> 
> 时间：2012-08-03T07:40:12.050
> 
> 标签：android, ruby-on-rails, ruby

在我的应用程序中，我想动态设置来自标题的文本字段值。这是代码

在android项目中，我设置了标题纬度和经度，我正在尝试在rails视图上获取它。

```
public static String getAddress(final String dir_atoken, final String data_atoken, final float lat, final float lng) throws Exception {

        final HttpGet get = new HttpGet("http://192.168.1.4:3000/address/lookup");

        get.setHeader(LAT,String.valueOf(lat));
        get.setHeader(LNG,String.valueOf(lng));

        return getResponse(get, 200, true);
    } 
```

这是我的 lookup_address 控制器

```
def lookup_address
    @lat = request.headers['Lat']
    @lng = request.headers['Lng']
  end 
```

这是我的lookup_address.html.erb

```
<% form_for @location do |f| %>
    <%=  f.error_messages %>

    <p>
        <%= f.label :latitude %><br />
        <%= f.text_field :latitude, :value => request.headers['Lat'] %>
    </p>
    <p>
        <%= f.label :longitude %><br />
        <%= f.text_field :longitude, :value => request.headers['Lng'] %>
    </p>
    <p>
        <%= f.submit 'Create' %>
    </p>
<% end %> 
```

当我设置`:value =>request.headers['Lat']`它总是返回null。

我应该怎么做才能没有得到空值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:55:10.547

建在哪里`@location`？`@location.latitude`猜猜设置和`@location.longitude`在控制器中会更正确。

```
def lookup_address
  @location = Location.new #Not sure how you build the @location
  @location.latitude = request.headers['Lat']
  @location.longitude = request.headers['Lng']
end 
```

lookup_address.html.erb

```
<% form_for @location do |f| %>
    <%=  f.error_messages %>

    <p>
        <%= f.label :latitude %><br />
        <%= f.text_field :latitude %>
    </p>
    <p>
        <%= f.label :longitude %><br />
        <%= f.text_field :longitude %>
    </p>
    <p>
        <%= f.submit 'Create' %>
    </p>
<% end %> 
```

# xml - 这两个 XQuery 有什么区别

> ID：11791349
> 
> 赞同：3
> 
> 时间：2012-08-03T07:40:51.590
> 
> 标签：xml, xpath, xquery, basex

我有一个巨大的 XML 文件存储在 BaseX 中。以下是 XML 节点的结构

```
Datas   (Parent Node)
  - Data  (Child of above)
     - Desc  (Child of above)
        - P    (Child of above) and contains the actual text 
```

`P`标签包含所有文本，我必须计算`P`标签内特定单词的出现次数。

我创建了一个全文索引。现在要计算特定单词的出现次数，我使用以下 2 个查询

```
ft:count(doc('BHCR')/Datas/Data/Desc[. contains text 'revolution']) 
```

此查询返回 2177 并花费了 25 秒。

另一个

```
ft:count(doc('BHCR')/Datas/Data/Desc[text() contains text 'revolution']) 
```

此查询返回 3684 并花费了 52 毫秒。

哪一个是对的？谁能解释这两个查询之间的区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:07:22.313

在您的第一个查询中，上下文项`.`将导致元素的所有文本节点的合并（即，创建其*字符串值*），然后将用于查找全文标记。这种合并可能会产生新的关键字。例如，以下查询将返回 true...

```
<xml><b>H</b>i</xml>/. contains text 'hi' 
```

..where as 以下查询将返回 true...

```
<xml><b>H</b>i</xml> contains text 'hi' 
```

由于新的关键字不能存储在全文索引中，因此不会进行索引访问，查询时间会更长。

您的第二个查询将返回其子文本节点中的所有`Desc`元素。`revolution`如果要解析`Desc`元素的所有降序文本，以下查询将为您提供预期结果：

```
ft:count(doc('BHCR')/Datas/Data/Desc[.//text() contains text 'revolution'] 
```

BaseX 文档中的全文：混合上下文部分将为您提供更多详细信息[。](http://docs.basex.org/wiki/Full-Text#Mixed_Content)

希望这会有所帮助，克里斯蒂安

# java - Convert java Object to CSV

> ID：11791353
> 
> 赞同：10
> 
> 时间：2012-08-03T07:40:59.310
> 
> 标签：java, gson

What API should I use to convert Java object to CSV. Can I use google-gson for java object conversion to CSV format?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T20:30:39.987

[Jackson](http://jackson.codehaus.org)提供了与 CSV（使用 Java 和/或 JSON）的轻松转换。

[http://www.cowtowncoder.com/blog/archives/2012/03/entry_468.html](http://www.cowtowncoder.com/blog/archives/2012/03/entry_468.html)上的帖子很好地描述了如何使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-10T21:35:15.017

库[json2flat](https://github.com/opendevl/Json2Flat)可以将**JSON**文档转换为**CSV**格式。

它不依赖于任何 POJO 来获取 CSV。

毕竟，用户希望如何以**CSV**表示形式查看**JSON**文档。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:02:50.943

请告诉我您对 GSON 的具体要求。

Gson 提供 toJson() 和 fromJson() 方法将 Java 对象转换为 JSON，反之亦然。

你能参考这个[链接吗](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)？此链接提供了 GSON 下可用的 API 列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-20T16:18:08.150

这实际上是对上述关于使用[Jackson CSV](https://github.com/FasterXML/jackson-dataformat-csv)的补充。我遇到的一个问题是，当我以编程方式而不使用任何注释时，它会在对象中不在 CSV 模式中的任何属性上引发任何错误。这是一些可能有用的示例代码。如果您想了解更多关于为什么需要过滤器和注释内省器的信息，请参阅[此处](https://stackoverflow.com/questions/26509033/how-to-include-only-specific-properties-when-serializing-with-jackson)。

```
public class CsvWriter {

private final static String CSV_FILTER_NAME = "csvFilter";

public void writeObjects( OutputStream outputStream,
                          List<?> objects,
                          CsvSchema csvSchema ) throws IOException
{
    HashSet<String> columnNames = new HashSet<String>();
    for (CsvSchema.Column column : csvSchema) {
        columnNames.add( column.getName() );
    }

    SimpleBeanPropertyFilter csvReponseFilter =
            new SimpleBeanPropertyFilter.FilterExceptFilter(columnNames);
    FilterProvider filterProvider = new SimpleFilterProvider().addFilter( CSV_FILTER_NAME, csvReponseFilter );

    CsvMapper csvMapper = new CsvMapper();
    csvMapper.setFilters( filterProvider );
    csvMapper.setAnnotationIntrospector( new CsvAnnotationIntrospector() );

    ObjectWriter objectWriter = csvMapper.writer(csvSchema);
    objectWriter.writeValue( outputStream, objects);
}

private class CsvAnnotationIntrospector extends JacksonAnnotationIntrospector {
    @Override
    public Object findFilterId(Annotated a) {
        return CSV_FILTER_NAME;
    }
}

} 
```

这是一个如何使用它的例子：

```
public class CsvWriterTest extends TestCase {

public void testWriteObjects() throws Exception {
    Vector <Entity> entities = new Vector<Entity>();
    entities.add( new Entity("Test entity 1", "Test description 1", "Test unused field"));
    entities.add(new Entity("Test entity 2", "Test description 2", "Test unused field"));

    CsvSchema csvSchema = CsvSchema.builder()
            .addColumn("name")
            .addColumn("description")
            .setUseHeader( true )
            .build()
            .withLineSeparator("\r\n");

    CsvWriter csvWriter = new CsvWriter();
    csvWriter.writeObjects(System.out, entities, csvSchema);
}

public class Entity {
    private String name;
    private String description;
    private String unusedField;
    // constructor, getter and setter methods omitted for brevity
}

} 
```

测试方法的输出是：
name,description
"Test entity 1","Test description 1"
"Test entity 2","Test description 2"**

# android - 如何使用 ant 构建带有外部库的 android 应用程序（错误找不到符号）？

> ID：11791356
> 
> 赞同：1
> 
> 时间：2012-08-03T07:41:22.910
> 
> 标签：android, ant

我想用ant用libs中的jar来构建我的项目，生成`build.xml`成功，但是当我执行`ant release`时，编译时出错。

```
[javac] E:\Project\Pascal\Source\workspace\xxx\src\com\xxx\xxx\uti
ls\CommonUtil.java:1267: cannot find symbol
[javac] symbol  : method setOTAMode()
[javac] location: class android.os.RecoverySystem
[javac]             RecoverySystem.setOTAMode();
                     ^ 
```

但是在eclipse中，我可以编译成功。所以我是否需要手动在 build.xml 中添加 jar，但是我被告知 android ant 会照看我在 base_rules.xml 中找到的 libs 目录中的 jar

```
<property name="jar.libs.dir" value="libs" />
<property name="jar.libs.absolute.dir" location="${jar.libs.dir}" />
<property name="native.libs.absolute.dir" location="libs" / 
```

那么我该如何解决这个问题。

编辑：我的应用程序是为具有方法的指定 BSP 开发的`setOTAMode`，但我使用标准 SDK 开发，所以为了编译成功，我`android.os.RecoverySystem`在 BSP 中添加了一个具有相同包名的 jar 来伪造 java 编译器。然后当你在 BSP 中运行应用程序时，会调用 BSP 中的真实方法。

所以`android.os.RecoverySystem`在 jar 中定义并`setOTAMode`声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:56:52.197

该符号不是来自您的 JAR，因为您的 JAR 中没有`android.os`代码。`android.os.RecoverySystem`来自Android SDK。Android SDK 中没有`setOTAMode()`此类的方法，因此此代码永远不会构建。Android源代码中甚至没有`setOTAMode()`方法AFAICT。

# android - Myadapter.notifyDataSetChanged() 抛出错误

> ID：11791357
> 
> 赞同：0
> 
> 时间：2012-08-03T07:41:26.483
> 
> 标签：android

我正在尝试刷新适配器以及我的列表。但是我对将方法 Myadapter.notifyDataSetChanged() 和 list.clear() 放置在哪里几乎没有什么困惑，这样它们就可以为我工作......任何人都可以编辑我的代码并帮助我摆脱它..这是我的代码

@覆盖

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    calendars = Uri.parse("content://com.android.calendar/events");
    managedCursor = getContentResolver().query(calendars, null, null, null, null);
    if(managedCursor.getCount()==0){
        Toast.makeText(getBaseContext(), "There Is No Event To Show", Toast.LENGTH_SHORT).show();
        Intent i=new Intent(DisplayEventActivity.this,EventCalendarActivity.class);
        startActivity(i);
        finish();

    }else{
    setContentView(R.layout.displayevent);
    id=getIntent().getExtras().getLong("ID");
    event_ListView=(ListView)findViewById(R.id.eventList);
    event_ListView.setOnItemClickListener(this);

    }
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    model.getEventTitleList().clear();  
    myadapter.notifyDataSetChanged();
    event_ListView.setAdapter(myadapter);

    if(id==9){
        model=new MyEventModel(managedCursor);
        myadapter=new MyListAdapter(getApplicationContext(), model.getEventTitleList());
        event_ListView.setAdapter(myadapter);

    }else if(id==10){
        model=new MyEventModel(managedCursor);
        myadapter=new MyListAdapter(getApplicationContext(), model.getEventTitleList());
        event_ListView.setAdapter(myadapter);
    }

}

public void onItemClick(AdapterView<?> arg0, View view, int position, long arg3) {
    event_Id=model.getEventId();
    System.out.println("Event id from disp="+event_Id);
    Intent i=new Intent(DisplayEventActivity.this,UpdateEvent.class);
    i.putExtra("EventId", event_Id);
    startActivity(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:07:27.220

您正在使用 myadapter.notifyDataSetChanged(); 在初始化 myadapter 之前。使用前先初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:48:25.920

您应该在适配器中设置数据后通知数据更改。

```
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    model.getEventTitleList().clear();  
    event_ListView.setAdapter(myadapter);

    if(id==9){
        model=new MyEventModel(managedCursor);
        myadapter=new MyListAdapter(getApplicationContext(), model.getEventTitleList());
        event_ListView.setAdapter(myadapter);

    }else if(id==10){
        model=new MyEventModel(managedCursor);
        myadapter=new MyListAdapter(getApplicationContext(), model.getEventTitleList());
        event_ListView.setAdapter(myadapter);
    }
    myadapter.notifyDataSetChanged();

} 
```

# excel - 我可以使用字符串作为条件编译常量吗

> ID：11791360
> 
> 赞同：1
> 
> 时间：2012-08-03T07:41:40.263
> 
> 标签：excel, vba, ms-access, outlook, ms-word

是否可以在 VBA 的条件编译中使用字符串常量？

例如：

```
#Const This_File_Concept="Chancleta"
'
#If This_File_Concept="Chancleta" then
     ''...Something happens

#End If
'    
#If This_File_Concept="Auto" then
     ''...Something different happens

#End If
'    
#If This_File_Concept="Freesbee" then
     ''...Another thing happens

#End If 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:00:53.907

简短的回答：是的

示范：

```
#Const This_File_Concept = "Chancleta"

#If This_File_Concept = "Chancleta" Then
     Dim zx As Long
#End If
'
#If This_File_Concept = "Auto" Then
     Dim zx As String
#End If
'

Sub Demo_OK()
    #If This_File_Concept = "Chancleta" Then
         zx = 1
    #End If
    '
    #If This_File_Concept = "Auto" Then
        zx = "Hello"
    #End If
End Sub

Sub Demo_Error()
    #If This_File_Concept = "Chancleta" Then
         zx = "Hello"
    #End If
    '
    #If This_File_Concept = "Auto" Then
        zx = 1
    #End If
End Sub 
```

运行 Sub`Demo_OK`工作正常，没有错误。

运行 Sub`Demo_Error`不工作，返回错误 13，`type mismatch`

# regex - 在目录的所有文件中查找表达式的频率

> ID：11791363
> 
> 赞同：1
> 
> 时间：2012-08-03T07:41:46.190
> 
> 标签：regex, shell, unix

我正在尝试编写一个 shell 脚本，它将在当前目录中的每个文件中搜索正则表达式，而不使用临时文件。

最初，我使用临时文件进行存储`echo * | sed 's/ /\n/g'`，然后循环遍历该文件的每一行，`cat`在每个文件上使用，然后 grepping 我的表达式并计算输出的行数。我在搜索临时文件时遇到了一些麻烦，我想知道我是否可以使用变量或一些非临时文件方法来做所有事情（我也不想为临时文件创建一个单独的目录）。

我在使用变量时遇到的问题是，在将变量的值设置为 的输出之后`echo * | sed 's/ /\n/g'`，我不知道如何遍历每一行，以便从文件中获取表达式计数。

我只希望以下工作（我对表达式进行硬编码）：

```
% ls
% file1 file2 file3
% ./countMost.sh
% file2(28)
% ls
% file1 file2 file3 
```

表示 file2 具有最多的表达式实例（其中 28 个）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:51:43.737

你可以尝试这样的事情：

```
grep -c regex files | sed -e 's/^\(.*\):\(.*\)$/\2 \1/' | sort -r -n | head -n 1 
```

`regex`您的正则表达式在哪里（也可以使用`egrep`）以及`files`您的文件列表。

给定3个文件：

```
file1:
qwe
qwe
qwe
asd
zxc

file2:
qwe
asd
zxc

file3:
asd
qwe
qwe
qwe
qwe 
```

我跑：

```
grep -c 'qwe' file[1-3] | sed -e 's/^\(.*\):\(.*\)$/\2 \1/' | sort -r -n 
```

我得到输出：

```
4 file3
3 file1
1 file2 
```

此外，`| head -n 1`在最后添加只会给我：

```
4 file3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:00:55.150

Job Lin 解决方案的类似版本使用 sort args 而不是 sed：

```
grep -c -e "^d" file* | sort -n -k2 -t: -r |head -1 
```

（在这里我寻找以“d”开头的行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:27:06.430

这应该为您提供前十个最常见的小写单词（您将正则表达式更改为任何内容），用于一个名为 test with counts 的目录中的一堆文件。

```
grep -rhoE "[a-z]+" test | sort | uniq -c | sort -r | head
      3 test
      2 wow
      2 what
      2 oh
      2 foo
      2 bar
      1 ham 
```

如果要按文件名计数，请删除 grep 上的 h 标志

```
 grep -roE "[a-z]+" test | sort | uniq -c | sort -r | head
      3 test/2:test
      1 test/2:wow
      1 test/2:what
      1 test/2:oh
      1 test/2:foo
      1 test/2:bar
      1 test/1:wow
      1 test/1:what
      1 test/1:oh
      1 test/1:ham 
```

# drupal - Drupal 中的空白内容

> ID：11791365
> 
> 赞同：0
> 
> 时间：2012-08-03T07:41:49.170
> 
> 标签：drupal, drupal-7, drupal-modules

我尝试弄清楚如何在 Drupal 中有空白内容，没有主题，没有标题......等等。我应该使用哪种方法？创建一个新主题？创建新视图？安装合适的模块？解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:52:43.120

使用**纯 CSS 和响应式设计**原则很容易实现这一点。响应式设计的一个简洁的定义是：

> “响应式设计是一种利用灵活布局、灵活图像和级联样式表媒体查询的网页创建方法。响应式设计的目标是构建能够检测访问者屏幕尺寸和方向并相应更改布局的网页。 " [资源](http://whatis.techtarget.com/definition/responsive-design)

[这篇文章](http://www.onextrapixel.com/2012/05/17/responsive-web-design-ideas-technology-and-examples/)不到两个月，不仅涵盖了原理，还提供了示例和教程链接。

所以，解决方案是：弄清楚你想要什么时候使用这个裸露的显示，并创建一个 CSS 来隐藏所有这些元素，使用`display:none;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:13:35.200

如果我理解正确，您只希望在没有任何样式的情况下打印您的内容。

您可以创建一个主题并去除 html.tpl.php、page.tpl.php 和 node.tpl.php 文件。

此外，我认为您可以在模板文件中创建主题功能以删除字段周围的所有 html。

# java - 有条件地生成方法体以满足 Java 中的大型接口

> ID：11791367
> 
> 赞同：3
> 
> 时间：2012-08-03T07:41:51.383
> 
> 标签：java, eclipse, templates, code-generation, pattern-matching

Java OpenGL GL 接口包含大约 2000 个方法，出于调试目的，我想包装一个实例并将调用委托给它，同时进行一些日志记录。在每种情况下，日志代码都可以推送到相同的方法，因此写出方法实现的任务看起来可以自动化。我正在尝试做的一个例子：

```
import javax.media.opengl.GL;

public class GLErrorLogger implements GL {
  private final GL backing;

  public GLErrorLogger(GL delegateToMe) {
    backing = delegateToMe;
  }

  private void checkErrorCode() {
    // Log frame and thread details depending on gl state
  }

  /**
   * Example of a method
   */
  @Override
  public int glGenLists(int arg0) {
    checkErrorCode();
    int retVal = backing.glGenLists(arg0);
    checkErrorCode();
    return retVal;
  }

  // rest of methods here...
} 
```

换句话说，将方法名称和参数（减去它们的类型）复制到对支持对象的调用中，围绕对日志记录方法的调用，如果有返回类型，则将结果分配给该类型的变量并返回它在方法结束时。

我查看了创建一次性 Eclipse 代码模板来自动生成方法，但是没有一种立即明显的方法来对返回类型进行模式匹配。任何人都可以建议一种在 Eclipse 或其任何代码生成工具中执行此操作的方法来节省我拉出正则表达式工具包的时间吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T07:52:44.027

您可能希望使用 Aspect 为您创建必要的字节码，而不是生成所有源代码。在此处查看 Traceing Aspect 示例：[Traceing Aspect Example](http://www.eclipse.org/aspectj/doc/released/progguide/examples-development.html)。

作为替代方案，如果您不想将 AspectJ 用作第三方库，则可以创建 Java 动态代理。请参考[动态代理教程](http://www.roseindia.net/javatutorials/dynamic_proxies_tutorial.shtml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:01:50.920

按照建议使用 JDK 代理，或者：使用像[EasyMock](http://www.easymock.org/)或[Mockito](http://code.google.com/p/mockito/)这样的 Mock 框架。

```
GL mock = EasyMock.createMock(GL.class);
EasyMock.expect(mock.someMethod()).andReturn(someValue);
// or, if you need to do more computing:
EasyMock.expect(mock.someOtherMethod()).andAnswer(new IAnswer<String>() {
        public String answer() throws Throwable {
            return "some value you calculate here";
        }
    });
EasyMock.replay(mock); 
```

现在您可以将`mock`Object 用于您配置的所有方法。有关详细信息，请参阅[EasyMock 自述](http://www.easymock.org/EasyMock3_0_Documentation.html)文件。

# python - django-admin.py：找不到命令

> ID：11791368
> 
> 赞同：3
> 
> 时间：2012-08-03T07:41:54.583
> 
> 标签：python, django, django-admin

我在 usr/local/bin 中有 django-admin.py，我已经尝试了网络上提供的所有帮助来创建符号链接，但它仍然显示 django-admin.py: command not found。

我正在尝试在 django 中开始我的第一个项目：- django-admin.py startproject mysite。

无论我做什么，我都会继续获取 django-admin.py: command not found。

我正在使用 ubuntu 11.10。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T12:04:29.847

只需键入

```
django-admin startproject mysite 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:12:42.553

我建议删除它并再次安装 Django。

或使用 virtualenv [http://www.mahdiyusuf.com/post/5282169518/beginners-guide-easy-install-pip-and-virtualenv-1](http://www.mahdiyusuf.com/post/5282169518/beginners-guide-easy-install-pip-and-virtualenv-1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-12T20:58:12.963

我也有同样的问题。对`django-admin.py`我来说是在这条路上`~/.local/bin`。这是因为我跑`pip instal --user django`

# vba - 在 visio 中连接两个二维形状

> ID：11791373
> 
> 赞同：1
> 
> 时间：2012-08-03T07:42:19.890
> 
> 标签：vba, visio

我正在尝试做最简单的事情 - 使用带有 GlueTo 的宏在 visio 中连接两个 2d 形状。我已经删除了两个形状，用“In”和“Out”添加到它们的连接点。现在，当我尝试用鼠标连接它们时 - 一切正常。然后我录制了一个宏：

```
Sub Macro1()

'Enable diagram services
Dim DiagramServices As Integer
DiagramServices = ActiveDocument.DiagramServicesEnabled
ActiveDocument.DiagramServicesEnabled = visServiceVersion140

Dim UndoScopeID1 As Long
UndoScopeID1 = Application.BeginUndoScope("1")
ActiveWindow.DeselectAll
ActiveWindow.Select Application.ActiveWindow.Page.Shapes.ItemFromID(1), visSelect
Application.ActiveWindow.Selection.Move -1.161417, 0.669291
Dim vsoCell1 As Visio.Cell
Dim vsoCell2 As Visio.Cell
Set vsoCell1 = Application.ActiveWindow.Page.Shapes.ItemFromID(1).CellsU("PinX")
Set vsoCell2 = Application.ActiveWindow.Page.Shapes.ItemFromID(15).CellsSRC(7, 0, 0)
vsoCell1.GlueTo vsoCell2
Dim vsoCell3 As Cell
Dim vsoCell4 As Cell
Set vsoCell3 = Application.ActiveWindow.Page.Shapes.ItemFromID(1).CellsSRC(visSectionConnectionPts, 0, 0)
Set vsoCell4 = Application.ActiveWindow.Page.Shapes.ItemFromID(15).CellsSRC(visSectionConnectionPts, 0, 0)
vsoCell3.GlueTo vsoCell4
Application.EndUndoScope UndoScopeID1, True

'Restore diagram services
ActiveDocument.DiagramServicesEnabled = DiagramServices

End Sub 
```

而且它不起作用...如果我解开这些形状并运行录制的宏，它将抛出“此操作的源对象不合适”

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:26:47.653

录制的代码非常特定于录制宏时的绘图状态。当您编辑绘图时，它会很快损坏。例如，记录的代码假定页面上已经存在一个一维形状，并且该页面的形状集合中的 ID 为 15。录制的宏中还有许多其他非常脆弱的假设。

我建议更好的方法是学习如何自己编写宏代码，因为您知道功能要求以及可以对绘图状态做出的假设。请参阅《开发 Visio 解决方案》一书的这一部分，了解如何编写代码以将形状连接在一起：[从程序创建连接的绘图](http://msdn.microsoft.com/en-us/library/office/aa201778%28v=office.10%29.aspx)。

# php - 我的路线返回 404，我该如何修复它们？

> ID：11791375
> 
> 赞同：88
> 
> 时间：2012-08-03T07:42:28.293
> 
> 标签：php, laravel, routing, laravel-routing, laravel-3

我刚刚开始学习 Laravel 框架，但遇到了路由问题。

唯一有效的路由是附加到 Laravel 开箱即用的默认主路由。

我在 Windows 上使用 WAMP，它使用 PHP 5.4.3 和 Apache 2.2.22，我还启用了 mod_rewrite，并从 application.php 配置文件中删除了“index.php”以留下一个空字符串。

我创建了一个名为**User**的新控制器：

```
class User_Controller extends Base_Controller {

    public $restful = true;

    public function get_index() 
    {
        return View::make('user.index');
    }
} 
```

我在 application/views/user/ 中创建了一个名为**index.php**的视图文件，其中包含一些基本的 HTML 代码，在 routes.php 中我添加了以下内容：

```
Route::get('/', function () {
    return View::make('home.index');
});

Route::get('user', function () {
    return View::make('user.index');
}); 
```

在我的网络浏览器中访问根目录 ( `http://localhost/mysite/public`) 时，第一条路线工作正常，但是当我尝试使用第二条路线时，`http://localhost/mysite/public/user`我收到 404 Not Found 错误。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2015-01-19T18:43:59.777

在我的 Ubuntu LAMP 安装中，我通过以下 2 处更改解决了这个问题。

1.  在 apache 服务器上启用 mod_rewrite `sudo a2enmod rewrite`：。
2.  编辑**/etc/apache2/apache2.conf**，更改 /var/www 目录（这是我的主文档根目录）的“AllowOverride”指令：`AllowOverride All`

然后重启 Apache 服务器：`service apache2 restart`

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2013-01-23T22:33:38.823

使用 WAMP 单击 wamp 图标 ->apache->apache modules->scroll 并检查 rewrite_module 重新启动 LoadModule rewrite_module

请注意，启用“rewrite_module”后，服务器应用程序会自动为您重新启动

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-12-26T19:30:50.203

你有没有试过检查

```
http://localhost/mysite/public/index.php/user 
```

工作了吗？如果是这样，请确保所有路径的文件夹都没有任何大写字母。我有同样的情况，将字母转换为小写有帮助。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-08-03T15:38:42.190

您是否尝试将其添加到您的路线文件中`Route::get('user', "user@index")`？

`@`在这种情况下，之前的一段文本`user`会将页面定向到用户控制器，而 , 之后的一段文本`@`会将`index`脚本定向到`user`函数`public function get_index()`。

我看到您正在使用`$restful`，在这种情况下，您可以将您的设置`Route`为`Route::any('user', 'user@index')`. 这将同时处理`POST`and `GET`，而不是分别写出它们。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-12-21T14:27:19.157

我在使用 EasyPHP 时遇到了同样的问题。发现我必须**`AllowOverride All`**在我的`<Directory>`块中指定`httpd.conf`. 没有这个，Apache 有时会忽略你的`.htaccess`.

我的最后变成了这个样子……

```
<Directory "D:/Dev">
    Options FollowSymLinks Indexes
    #### NEXT IS THE CRUCIAL LINE ####
    AllowOverride All                  
    Order deny,allow
    Allow from 127.0.0.1
    Deny from all
    Require all granted     
</Directory> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-12-22T18:17:03.787

您可以尝试移动`root/public/.htaccess`到`root/.htaccess`它应该可以工作

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-08-03T14:57:27.547

**路线**

使用它们来定义不受控制器管理的特定路由。

**控制器**

当你想使用传统的 MVC 架构时使用它们

**解决您的问题**

除非您想要一个特定的“命名”路由用于控制器操作，否则您不会将控制器注册为路由。

无需为您的控制器操作创建路由，只需注册您的控制器：

```
Route::controller('user'); 
```

现在您的控制器已注册，您可以导航到`http://localhost/mysite/public/user`并`get_index`运行您的控制器。

您还可以一次性注册所有控制器：

```
Route::controller(Controller::detect()); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-05-31T23:25:27.250

不要忘记你的“ `RewriteBase`” `public/.htaccess`：

例如 ：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /your/folder/public 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-03-15T18:31:55.530

好的，所以在这个问题上猛烈抨击了一天多之后......我起床并做了我昨天应该做的事情，并调试了发生的事情！

Laravel 在这里尝试做的是将文件插入到`index.php`作为 Route 给出的路径的正前方。例如，如果您在浏览器上指定 a`Route::get('/account/create', ...,`并执行您的应用程序`localhost/laravel/authenticate/public/account/create`，那么 laravel 想要执行`localhost/authenticate/public/index.php/account/create`，但要做到这一点.... Apache 需要通过该请求查看`/wamp/www/laravel/laravel/authentication/public`（您的路径可能会有所不同，具体取决于您的laravel 应用程序实际上已安装，但尾随`public`是需要进行替换的地方）必须应用“重写规则”。

值得庆幸的是，laravel`.htaccess`在您应用程序`public`文件夹中的一个方便文件中提供了正确的重写规则。问题是，“.htaccess”文件中的代码不适用于开箱即用的 WAMP 配置方式。这个 SEEMS 的原因是 muvera 在该线程顶部提出的问题 - rewrite_module 代码需要由 Apache 加载，然后`RewriteRule`才能工作。哎呀，这是有道理的。

没有意义的部分：简单地说`stopping`，`restarting`Apache 服务不会接受 WAMP 所需的更改，以便使用您的 RewriteRule 做正确的事情——我知道，我尝试了很多次！

工作原理：进行 muvera 建议的更改（请参阅线程顶部）以加载正确的模块。然后，重置整个 Windows 会话，从而将 Apache 完全耗尽内存。重新启动（重新加载）WAMP，瞧！修复有效，应用了正确的 RewriteRule，yada，yada；我从此过着幸福的生活。

好消息是：我现在对 , 和 files 有了更多`.htaccess`的`RewriteRule`了解`httpd.conf`。有一个很好的（性能）论据可以将逻辑从您的应用程序`public` `.htaccess`文件中移出，并将其放入`Directory ...`您的 Apache 'bin' 文件夹 BTW 中的 httpd.conf 的一部分（特别是如果您有权访问该文件夹）。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-07-08T09:41:04.900

只需在您的终端中运行。

```
php artisan route:clear 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-30T00:06:00.467

尝试在 php.ini 中启用短 php 标签。WAMP 通常将它们关闭，而 laravel 需要它们。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-12-27T10:56:28.673

```
Route::get('/', function()
{
return View::make('home.index');
});

Route::get('user', function()
{
return View::make('user.index');
}); 
```

将上面更改为

```
Route::get('user', function()
{
return View::make('user.index');
});

Route::get('/', function()
{
return View::make('home.index');
}); 
```

您必须在路线的末尾使用 '/'(home/default)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-03-29T17:43:29.413

你必须使用 Laravel 5 命令

```
 class User_Controller extends Controller {
  public $restful = true;
  public function get_index(){
  return View('user.index');
  }
  } 
```

并在 routes.php

```
 Route::get('/', function()
  {
  return view('home.index');
  });

  Route::get('user', function()
  {
  return view('user.index');
  }); 
```

视图和控制器的 Laravel 5 命令更改请参阅我之前遇到相同错误的文档

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-02T11:50:54.477

只需在您的终端中运行。

```
 composer dump-autoload 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-08-01T09:15:45.487

路由不工作的主要问题是macos中有mod_rewrite.so模块，apache配置的httpd.conf文件中没有启用linux，所以.htaccess可以工作。我通过取消注释该行解决了这个问题：

```
# LoadModule rewrite_module libexec/apache2/mod_rewrite.so 
```

`#`从上面的行中删除`httpdf.conf`. 然后它将起作用。
请享用！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-08-28T18:12:56.143

我认为您已经删除了 laravel 公共文件夹中的默认 .htaccess 文件。上传文件，它应该可以解决您的问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-12-01T07:30:55.897

自动加载依赖项的简单命令

```
composer dump-autoload 
```

并且仍然发现您的一些重要文件丢失了，所以去这里查看整个过程

[https://codingexpertise.blogspot.com/2018/11/laravel-new.html](https://codingexpertise.blogspot.com/2018/11/laravel-new.html)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-17T23:46:28.620

如果您通过 Homestead 使用 Vagrant，则安装共享文件夹可能会出错。看起来 Vagrant 从该文件夹中获取您的文件并在启动时换出实际在主机上的文件，因此如果出现错误，您实际上是在尝试从您第一次创建 Laravel 安装时访问它（其中这就是为什么你只得到“家”——这是在安装过程中生成的）。

您可以通过 ssh 进入您的 vm 并检查 routes/web.php 文件以查看它是否真的是您的文件，从而轻松地检查这一点。如果不是，退出和`vagrant halt`, `vagrant up`，并在启动时查找错误。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-06-08T04:34:34.117

1.  设置 .env 文件
2.  配置`index.html`
3.  确保你有`.htaccess`
4.  `sudo service apache2 restart`

很可能是由于缓存问题

# php - 将东北坐标转换为正常的纬度和经度

> ID：11791385
> 
> 赞同：2
> 
> 时间：2012-08-03T07:43:02.853
> 
> 标签：php

我有一个 gps 设备女巫输出坐标，例如：**4425.7819N 02607.5766E**。

如何使用 PHP 将它们转换为正常的纬度和经度？例如。**44.432395,26.125751**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:01:20.130

似乎您的 GPS 设备以 MinDec 格式输出。

[有关信息，请参阅http://en.wikipedia.org/wiki/Geographic_coordinate_conversion](http://en.wikipedia.org/wiki/Geographic_coordinate_conversion)中的“从 MinDec 到十进制度数的转换” 。

更新：

请参阅我为您编写的以下函数来转换它：

```
function convert($input)
{
    $input = ltrim($input, 0);
    $mCount = preg_match('/([0-9]{2})([^NESW]+)(N|E|S|W)/', $input, &$matches);
    if($mCount > 0)
    {
        $deg = intval($matches[1]);
        $degMin = floatval($matches[2]) / 60;
        $ret = $deg + $degMin;
        return ($matches[3] == 'S' || $matches[3] == 'W' ? '-' : '') . $ret;
    }
    return null;
}

var_dump(convert('4425.7819N'));
var_dump(convert('02607.5766E')); 
```

希望有帮助吗？

# hibernate - 休眠环境不工作

> ID：11791391
> 
> 赞同：0
> 
> 时间：2012-08-03T07:43:15.957
> 
> 标签：hibernate, hibernate-envers

我只想使用 hibernate envers 来审计我的实体。我正在使用 envers-1.2.2.ga-hibernate-3.3.jar,hibernate-annotations-3.5.6-Final.jar,hibernate-core-3.5.2 -Final.jar 和 hibernate-jpa-2.0-api-1.0.0.Final.jar。

我的实体在下面

用户.java

```
@Entity
@Audited

@Table(name = "ACCT_USER")

@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class User extends IdEntity {

    private String loginName;
    private String password;
    private String name;
    private String email;
    private List<Role> roleList = Lists.newArrayList();

    @Column(nullable = false, unique = true)
    public String getLoginName() {
        return loginName;
    }

    public void setLoginName(String loginName) {
        this.loginName = loginName;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

} 
```

这是我配置环境的应用程序上下文

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd"
    default-lazy-init="true">

    <description>Spring</description>

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
        <property name="ignoreResourceNotFound" value="true" />
        <property name="locations">
            <list>

                <value>classpath*:/application.properties</value>
            </list>
        </property>
    </bean>

    <context:component-scan base-package="net.top" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
        <!-- Connection Info -->
        <property name="driverClassName" value="${jdbc.driver}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />

        <!-- Connection Pooling Info -->
        <property name="maxIdle" value="${dbcp.maxIdle}" />
        <property name="maxActive" value="${dbcp.maxActive}" />
        <property name="defaultAutoCommit" value="false" />
        <property name="timeBetweenEvictionRunsMillis" value="3600000" />
        <property name="minEvictableIdleTimeMillis" value="3600000" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="namingStrategy">
            <bean class="org.hibernate.cfg.ImprovedNamingStrategy" />
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
                <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop>
                <prop key="hibernate.cache.provider_configuration_file_resource_path">ehcache/ehcache-hibernate-local.xml</prop>
            </props>
        </property>
        <property name="packagesToScan" value="net.top.*.entity.*" />

    </bean>

<!-- Envers Info -->
     **<bean id="envers" class="org.hibernate.envers.event.AuditEventListener">

       <property name="eventListeners">
            <map>
                <entry key="post-insert" value-ref="envers"/>
                <entry key="post-update" value-ref="envers"/>
                <entry key="post-delete" value-ref="envers"/>
                    <entry key="post-collection-recreate" value-ref="envers"/>
                <entry key="pre-collection-remove" value-ref="envers"/>
                <entry key="pre-collection-update" value-ref="envers"/>
            </map>
          </property>

          </bean>**

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true" />
</beans> 
```

执行应用程序时没有错误，但在添加或删除用户时也没有创建审计表。我需要做任何其他配置吗？

更新

我明白了，我只是像这样编辑我的应用程序上下文

应用程序上下文.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd"
        default-lazy-init="true">

        <description>Spring</description>

        <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
            <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE" />
            <property name="ignoreResourceNotFound" value="true" />
            <property name="locations">
                <list>

                    <value>classpath*:/application.properties</value>
                </list>
            </property>
        </bean>

        <context:component-scan base-package="net.top" />

        <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
            <!-- Connection Info -->
            <property name="driverClassName" value="${jdbc.driver}" />
            <property name="url" value="${jdbc.url}" />
            <property name="username" value="${jdbc.username}" />
            <property name="password" value="${jdbc.password}" />

            <!-- Connection Pooling Info -->
            <property name="maxIdle" value="${dbcp.maxIdle}" />
            <property name="maxActive" value="${dbcp.maxActive}" />
            <property name="defaultAutoCommit" value="false" />
            <property name="timeBetweenEvictionRunsMillis" value="3600000" />
            <property name="minEvictableIdleTimeMillis" value="3600000" />
        </bean>

        <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="namingStrategy">
                <bean class="org.hibernate.cfg.ImprovedNamingStrategy" />
            </property>
            <property name="hibernateProperties">
                <props>
                    <prop key="hibernate.dialect">${hibernate.dialect}</prop>
<prop key="hibernate.hbm2ddl.auto">update</prop>
                    <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                    <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
                    <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop>
                    <prop key="hibernate.cache.provider_configuration_file_resource_path">ehcache/ehcache-hibernate-local.xml</prop>
                </props>
            </property>
<property name="eventListeners">
                <map>
                    <entry key="post-insert" value-ref="envers"/>
                    <entry key="post-update" value-ref="envers"/>
                    <entry key="post-delete" value-ref="envers"/>
                        <entry key="post-collection-recreate" value-ref="envers"/>
                    <entry key="pre-collection-remove" value-ref="envers"/>
                    <entry key="pre-collection-update" value-ref="envers"/>
                </map>
              </property>
            <property name="packagesToScan" value="net.top.*.entity.*" />

        </bean>

    <!-- Envers Info -->
        <bean id="envers" class="org.hibernate.envers.event.AuditEventListener"/>

        <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
            <property name="sessionFactory" ref="sessionFactory" />
        </bean>

        <tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true" />
    </beans> 
```

谢谢你的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:17:52.360

您需要使用兼容版本的 Hibernate 和 Envers。您正在为 Hibernate 3.3、Hibernate-core 3.5.2 和 annotations 3.5.6 使用 Envers jar。

只需在任何地方使用相同的版本。

# php - 资源 id #.. php 上的 sql

> ID：11791395
> 
> 赞同：-3
> 
> 时间：2012-08-03T07:43:31.787
> 
> 标签：php, mysql

我在 php 上使用 sql，我得到了`Resource id #...`，

例如`Resource id #21`，

这是什么意思？我在哪里可以找到包含这些 id 的所有含义的表格？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:50:58.210

您必须从通过`mysql_query()`命令结果接收到的实际结果中获取。例如在代码之后

```
 $res = mysql_query("some query"); 
```

这个返回的结果资源应该被传递给`mysql_fetch_array()`和其他处理结果表的函数，以访问返回的数据。

例子：

```
$row = mysql_fetch_array($res, MYSQL_ASSOC); 
```

如果您的结果需要多于一行，则必须使用循环。

您可以在此处找到有关使用这些函数的文档：http: [//php.net/manual/en/ref.mysql.php](http://php.net/manual/en/ref.mysql.php)

# dns - flash 不适用于自定义域 blogspot

> ID：11791398
> 
> 赞同：0
> 
> 时间：2012-08-03T07:43:38.980
> 
> 标签：dns, flash, blogspot

我在 blogspot (satudekadefn.blogspot.com) 中创建了一个博客并发布了一个 flash，它运行良好。

然后我为博客创建了一个自定义域（该域现在是 satudekadefn.felzhiro.com），并且 flash 不再工作了。我没有更改代码，想知道这个问题出了什么问题。如果我将域恢复为 blogspot，则 Flash 将再次工作。

下面是代码：

```
<div id="flashContent">
   <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="800" height="600" id="satudekadefn" align="middle">
    <param name="movie" value="https://sites.google.com/site/satudekadefn/flash/satudekadefn.swf" />
    <param name="quality" value="high" />
    <param name="bgcolor" value="#000000" />
    <param name="play" value="true" />
    <param name="loop" value="true" />
    <param name="wmode" value="window" />
    <param name="scale" value="exactfit" />
    <param name="menu" value="true" />
    <param name="devicefont" value="false" />
    <param name="salign" value="" />
    <param name="allowScriptAccess" value="sameDomain" />
    <!--[if !IE]>-->
    <object data="https://sites.google.com/site/satudekadefn/flash/satudekadefn.swf" type="application/x-shockwave-flash" width="800" height="600" align="middle">
     <param name="movie" value="https://sites.google.com/site/satudekadefn/flash/satudekadefn.swf" />
     <param name="quality" value="high" />
     <param name="bgcolor" value="#000000" />
     <param name="play" value="true" />
     <param name="loop" value="true" />
     <param name="wmode" value="window" />
     <param name="scale" value="exactfit" />
     <param name="menu" value="true" />
     <param name="devicefont" value="false" />
     <param name="salign" value="" />
     <param name="allowScriptAccess" value="sameDomain" />
    <!--<![endif]-->
     <a href="http://www.adobe.com/go/getflash">
      <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
     </a>
    <!--[if !IE]>-->
    </object>
    <!--<![endif]-->
   </object>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:57:38.677

会不会是 SWF 文件被站点锁定了？（包含说明它只适用于某些网站的代码）

# c# - 如何通过 RDP 连接可靠地“打印屏幕”（保存屏幕内容）？

> ID：11791399
> 
> 赞同：3
> 
> 时间：2012-08-03T07:43:45.170
> 
> 标签：c#

我制作了一个简单的 PrintScreen 方法，当我的自动化测试失败时我会使用它。这只是为了让我可以在错误发生时通过电子邮件发送错误和屏幕的打印屏幕。这就是 PrintScreen.Save() 的代码的样子。

```
public static class PrintScreen
{
    public static string Save(string fileName)
    {
        var printScreen = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);
        var graphics = Graphics.FromImage(printScreen);
        graphics.CopyFromScreen(0, 0, 0, 0, printScreen.Size);
        if (File.Exists(fileName))
            File.Delete(fileName);
        printScreen.Save(fileName, ImageFormat.Jpeg);
        Thread.Sleep(500);
        return fileName;
    }
} 
```

当我在我的计算机上运行测试时，该方法运行良好。但是我们使用另一台计算机进行预定的自动化测试。我通过 RDP 连接到它（自动化测试需要与桌面交互，在计算机锁定时无法运行。）这是我的问题。有时打印屏幕没有占用屏幕。

**所以我的问题是**：有没有其他方法可以编写“更好”的方法，或者我当前的方法有问题吗？欢迎任何建议。

我的调查得出了这样的结论。

*   屏幕保护程序或类似停用。
*   它可以在我的本地机器上完美运行。
*   当我调试它时，一切都很好。
*   远程计算机只有一个屏幕。

从保存到文件中是否有任何我丢失的错误？

最好的问候乔纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:31:16.643

很抱歉打扰你们这个问题。但是代码中没有任何具体的错误。原来是防病毒程序删除了其中一些文件，但不是所有人。而且我本地计算机上的病毒程序也不一样。我现在已经设法将我的流程添加为安全流程，现在我认为它可以工作。我已经尝试了几次，效果更好。

感谢您的回复，他们让我更深入地考虑了我的代码，很抱歉占用您的时间。//乔纳斯

# bash - Shell 脚本：如何从 bash 变量中修剪空格

> ID：11791402
> 
> 赞同：10
> 
> 时间：2012-08-03T07:43:48.167
> 
> 标签：bash, shell, unix

> **Possible Duplicate:**
> [How to trim whitespace from bash variable?](https://stackoverflow.com/questions/369758/how-to-trim-whitespace-from-bash-variable)

I have searched and attempted a number of solutions but nothing seems to work for me...

I have a shell variable which is causing issues due to leading and trailing spaces. how can we get rid of all the spaces in a single line using shell script?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T07:50:56.167

我可以想到两个选择：

```
variable="  gfgergj lkjgrg  "
echo $variable | sed 's,^ *,,; s, *$,,' 
```

要不然

```
nospaces=${variable## } # remove leading spaces
nospaces=${variable%% } # remove trailing spaces 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:54:26.073

有很多方法可以实现这一点，awk oneliner：

```
kent$  echo "    foo  -  -  -  bar   "|awk '{sub(/^ */,"",$0);sub(/ *$/,"",$0)}1'
foo  -  -  -  bar 
```

# asp.net - 如何在 Windows 的默认媒体播放器上播放视频？

> ID：11791405
> 
> 赞同：0
> 
> 时间：2012-08-03T07:43:58.003
> 
> 标签：asp.net

这是场景：当您单击主页上的图像时，视频应该打开。它不应该在浏览器中嵌入视频。视频应在默认播放器中打开。没有浏览器窗口。

我的主页上有一张静态图片。当我单击此图像时，我只需要视频在默认播放器上运行。视频文件位于服务器上。

有没有可能？如果可能的话，我们如何才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:21:40.800

如何设置适当的 HTTP 标头强制下载和打开给定的视频？

```
Content-Type: application/force-download
Content-Disposition: attachment; filename="video.avi" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:59:07.090

要完成这项工作，您需要`*.avi`在文件末尾使用扩展名，并将其放在链接上。

现在，每台计算机上的行为都会有所不同。浏览器将要求用户将文件保存在某处，然后如果用户单击它将使用默认播放器打开。或者在某些情况下它可能会直接让他用默认播放器打开它，浏览器保存它然后播放它。

现在这么好的用户界面。

# javascript - 对象等于自身或空对象

> ID：11791412
> 
> 赞同：1
> 
> 时间：2012-08-03T07:44:32.677
> 
> 标签：javascript

我有一个 JavaScript 使用这个符号来确保一个对象被初始化：

```
MyObject = MyObject || {}; 
```

我了解它的作用，即检查 MyObject 是否是任何东西，如果没有将空对象分配给`MyObject`. 我真的不太了解 JS 的所有内部结构，所以我看不出如何在赋值中使用逻辑比较。

它是如何工作的？是否有任何其他语言允许这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:47:19.463

这种语法的意思是“分配`MyObject`给它自己，如果它被定义了。否则，给它一个空对象。”

它之所以有效，是因为 Javascript 将未定义的值视为 false，而将已定义的值视为 true。将其与逻辑表达式的惰性求值相结合，您将获得上述行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:48:01.537

取决于语言。

例如，在 Ruby 中，您可以使用这种样式。

但是在 PHP 中，你不能使用这种风格，因为在 PHP 中，逻辑运算符总是返回一个布尔值（真/假）。

***结论：***

如果逻辑运算符总是**返回一个布尔值**，那么你就不能使用这种风格。

如果逻辑运算符**在第一个值评估为 true 时返回第一个值，否则返回第二个值**，那么您可以使用这种样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:46:52.237

逻辑“或”运算符具有短路语义，这意味着仅当左侧操作数评估为 时才评估右侧操作数`false`。因此 if`MyObject` *被*初始化，语句读取`MyObject = MyObject;`（它什么都不做），否则它是`MyObject = {};`.

# android - 如何在表格行上实现长按/滑动和删除 - android Titan？

> ID：11791413
> 
> 赞同：2
> 
> 时间：2012-08-03T07:44:32.363
> 
> 标签：android, mobile, view, titanium, tableview

我有一个 tableView 有一些带有标签的行。我想在特定行上长按/滑动时删除行。我已经为 tableView 添加了长按事件，但它的回调方法将参数重新设置为 tableViewRow 中的标签。

如何获取该行的选定索引？？？

```
table.addEventListener('longpress', function(e) {
            alert(e.source); //showing LabelProxy@2389hf

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:02:59.097

尝试以下代码删除 longClick 上的行。

```
var win = Ti.UI.currentWindow;
var data=[];
for (var x = 0; x < 4; x++) {
//var view = Ti.UI.createView();
var label = Ti.UI.createLabel({
    text : 'Row Label ' + x,
    height : 'auto',
    width : 'auto',
    color : '#336699',
    left : 10
});
var row = Ti.UI.createTableViewRow({
    height : 50
});
row.add(label);
    data.push(row);
}

// create table view
var tableview = Titanium.UI.createTableView({
    data : data
});
tableview.addEventListener('longclick', function(e) {
    tableview.deleteRow(e.index);
});
win.add(tableview); 
```

# yii - 两个模型的错误摘要消息

> ID：11791414
> 
> 赞同：1
> 
> 时间：2012-08-03T07:44:36.733
> 
> 标签：yii

我想显示 errorSummary 自定义文本，但有两个模型。

```
 <?php echo CHtml::errorSummary(array($a,$b)); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:10:11.207

Yii 已经支持这一点。您可以将模型数组传递给该方法，如此[处](http://www.yiiframework.com/doc/api/1.1/CHtml#errorSummary-detail)所述。

# php - 如何从数组中获取第一个数据

> ID：11791416
> 
> 赞同：0
> 
> 时间：2012-08-03T07:44:56.140
> 
> 标签：php, codeigniter-2

我的 codeigniter 的视图文件中有以下代码。

```
<?php foreach ($records as $rows){?>
 <?  echo $rows['product_name']; ?> <br>
 <? } ?> 
```

我的模型

```
 $this->db->select('*');
        $this->db->from('products');
        $this->db->order_by('product_name','ASC');
        $getData = $this->db->get('');
        if($getData->num_rows() > 0)
        return $getData->result_array();
        else
        return null; 
```

如果我运行上面的代码，我会得到以下结果

```
 Pepsi
    Coke
    Mountain Dew 
```

我试图只显示第一个结果（百事可乐）。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T00:54:36.647

$records 是一个数组。您可以指定索引，如

```
<?=$records[0]['product_name']?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:47:14.470

这应该有效：

```
$query = $this->db->limit(0, 1); 
```

见文档：[http ://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)

另请参阅：[CodeIgniter 数据库查询限制](https://stackoverflow.com/questions/4889869/codeigniter-database-query-limit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:53:00.930

reset 是解决此问题的另一种方法。 [http://www.php.net/manual/en/function.reset.php](http://www.php.net/manual/en/function.reset.php)

所以在这个例子中， $first_element = reset($records);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:45:45.173

用于`LIMIT`告诉数据库仅从数据库中提取有限数量的记录

```
$this->db->from('products LIMIT 0,1'); 
```

# java - Eclipse：安装查找错误不允许，

> ID：11791419
> 
> 赞同：0
> 
> 时间：2012-08-03T07:45:09.303
> 
> 标签：java, eclipse-plugin

安装 find bug eclipse 时出现问题，“无法连接到存储库[http://findbugs.cs.umd.edu/eclipse/site.xml](http://findbugs.cs.umd.edu/eclipse/site.xml) 连接被拒绝：连接”

任何人都可以帮助我为什么连接拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:29:16.847

您的 Eclipse 中似乎缺少一些网络设置。您必须在 Eclipse 首选项中明确设置您的代理。您可以在此处执行此操作：首选项 -> 常规 -> 网络连接。

# javascript - 为什么 Javascript 中的类变量在尝试多次调用它们或将它们分配给局部变量时会消失？

> ID：11791421
> 
> 赞同：1
> 
> 时间：2012-08-03T07:45:17.733
> 
> 标签：javascript, variables, canvas, html5-canvas, variable-assignment

```
var width = 10;
var data = image.data;
var height = 10;

for ( var x = 0; x < width; x++ ) {

  for ( var y = 0; y < height; y++ )

    var index = 4 * (y * height +  x); // 0

    var local_variable = ArbitraryClassInstance.getBrightness(x, y); // 0

    data[ index ] = ArbitraryClassInstance.getBrightness(x, y); // 0 for both index/call
    data[ index + 1 ] = ArbitraryClassInstance.getBrightness(x, y); // 0 for both index/call

  }

}

context.putImageData(image, 0, 0); 
```

当我执行代码时 index 和 local_variable 都等于零。Image是一个javascript图像对象，data是图像数据，width和height是图像的尺寸。该类返回亮度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:52:19.490

弄清楚了。我没有关闭我的大括号。对所有人的警告。

Chrome/Firefox 优雅降级，不要抛出错误！你不会相信我追踪这个错误多久了。

检查你的语法 - javascript 会抛出像 C 中的指针这样的错误（它不会）。

# image - 更改图像宽度 Ajax，浏览器内存泄漏

> ID：11791423
> 
> 赞同：1
> 
> 时间：2012-08-03T07:45:30.897
> 
> 标签：image, internet-explorer, firefox, memory, memory-leaks

这是我的 html 测试页面：

```
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
    <style type="text/css">
        #imager img{
            width: 1050px;
            height:650px;
        }
    </style>
    <script type="text/javascript" src="jquery-1.4.2.min.js"></script>
    <script type="text/javascript">
        var index = 0;
        var max = 1;

        //! get next image
        function getImage(){
            if (index  >= max ) index = 0;
            var objTest = {
                "index" : index++
            };
            $.ajax({
                type: 'POST',
                url: "prova.php",
                data: objTest,
                success: function(response){
                    max = response.max;
                    imageToLoad = response.imageToLoad;
                    //! Clean div
                    $("#imager").html("");
                    //! Display new image
                    $("#imager").append("<img src='"+imageToLoad+"'></img>");

                },
                dataType: "json"
            });
        }
    </script>
</head>
   <body>
    <button onclick="getImage()">get img</button>
    <div id="imager"></div>
</body> 
```

这是我的 prova.php 测试页面：

```
$max = 0;
$imgToLoad = null;

// Open image dir
if ($handle = opendir('img')) {

  while (false !== ($entry = readdir($handle))) {
    if($entry == '.' || $entry == '..' ) continue;

    if($_POST['index'] == $max)
        // Save next image to show
        $imgToLoad =$entry;

    // Image counter
    $max++;
  }
  closedir($handle);
}

$array = array(
 "max" => $max,
 "imageToLoad" => "http://192.168.1.96/prove/cache/img/".$imgToLoad
);
// Return next image and max number of image the we can show
echo json_encode($array); 
```

问题是每次我调用“getImage()”时，内存浏览器都会增加（IE 和 Firefox 测试）。我的“img”文件夹包含很多非常大的图像，大约 4600x3000px (400kb)，一段时间后内存浏览器大约为 1 gb，依此类推。

感谢帮助

# .net - Win 表格字体设置

> ID：11791425
> 
> 赞同：1
> 
> 时间：2012-08-03T07:45:36.927
> 
> 标签：.net, vb.net, fonts, styles

我有一个屏幕截图要显示。左边是我的 vb.net 应用程序的设置对话框，右边是 Microsoft SkyDrive 对话框。

[http://croos.org/so.jpg](http://croos.org/so.jpg)

差异是巨大的。SkyDrive 对话框中的字体是什么？按钮、标签、标签？我的程序使用 Font = SystemFonts.MessageBoxFont (Segoe ui) 但还不够好。

我怎样才能使我的对话框看起来像右边的一个。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:08:33.533

我相信您显示的 Skydrive 屏幕截图使用的是 Tahoma（或非常相似的字体）而不是 Segoe UI。

试试这个代码：

```
Private Sub Form_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Me.Font = New Font("Tahoma", 8)
End Sub 
```

或者只是在属性窗口中设置表单字体。

我使用 Tahoma 字体创建了一个新表单——这看起来和我几乎一模一样。左边是我的表格，右边是你的原始表格，以便比较：

![在此处输入图像描述](../Images/8a62e20191f5bb2e960cd01c6f3635a5.png)

# android - 如何检测应用程序或活动何时在 Android 中启动？

> ID：11791435
> 
> 赞同：2
> 
> 时间：2012-08-03T07:46:27.120
> 
> 标签：android, logcat, launching-application

我希望能够从我的服务中检测到另一个应用程序/活动的启动。

我以前可以通过检查 logcat 消息来做到这一点，特别是：

```
I/ActivityManager: Starting: Intent ... cmp=packagename} from pid xxxx 
```

一旦我检测到这一点，我会检查包名是否匹配。

但是，一些非 AOSP 手机（例如带有 ICS 的三星 Galaxy S2）在启动应用程序时不会显示此信息。

然而，有些应用程序能够检测 Galaxy S2 上的应用程序/活动启动，例如 Smart App Protector。我查看了应用程序权限，它确实请求访问 logcat。但是，如果手机在应用程序/活动启动时没有向 logcat 打印任何内容，那有什么用呢？

有哪些可能的方法来做到这一点？

谢谢！

# javascript - YUI 嵌套选择器

> ID：11791439
> 
> 赞同：0
> 
> 时间：2012-08-03T07:46:47.107
> 
> 标签：javascript, yui

我是 YUI(AUI) 初学者。在 jQuery 中我会做

```
$(image).find(selector).text(); 
```

这如何在 YUI 中实现？

```
AUI().use('event', 'node', function(A) { 

var subImages = A.all('.sub_image_conatiner');
for (var i = 0; i < subImages.size(); i++){

    var image = subImages.get(i);
    //get child elements of image here
}   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:02:20.843

我以为`Y.all(foo).all(selector).get('text')`会起作用，但不幸的是没有。

我建议您只使用一个选择器来匹配子元素：

```
Y.all('.parent-class .child-class').get('text'); 
```

如果你不能，那么你不必像普通的 JS 数组那样遍历节点。您可以使用`.each()`.

```
var texts = [];
Y.all(foo).each(function (node, i) {
  texts = texts.concat(node.all(bar).get('text'));
});
console.log(texts); 
```

我将向 YUI 提交一个错误，看看添加是否有意义`Y.NodeList.prototype.all`

# regex - 如何设置正则表达式进行真正的匹配判断？

> ID：11791443
> 
> 赞同：0
> 
> 时间：2012-08-03T07:47:00.110
> 
> 标签：regex, actionscript-3, flash, actionscript

我想设置一个RegExp与String进行匹配判断。我尝试使用 pattern.test(str)，但如果 pattern 是 string 的一部分，那将是真的。这不是我想要的。

例如，我将我的模式设置为“/[az]/”，str 设置为“abc123”，pattern.test(str) 将为 true。我更喜欢的结果是假的，因为 str 包含“123”，不是每个字符都是 az。我怎样才能做到这一点？谢谢！

```
package  {
    import flash.display.Sprite;

    public class regexp extends Sprite{
        var pattern:RegExp=/[a-z]/;
        var str:String="abc123";

        public function regexp() {
            trace(pattern.test(str));
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:04:55.573

试试这个：

```
var pattern:RegExp=/^[a-z]+?$/; 
```

# internet-explorer - 使用 adobe activex 插件打印文件

> ID：11791445
> 
> 赞同：0
> 
> 时间：2012-08-03T07:47:08.503
> 
> 标签：internet-explorer, pdf, printing, adobe, activex

我需要使用 abobe 插件在 IE 中打印 pdf 文件（可以从远程 URL 下载）的能力。在此之前，我用的是java小程序，但现在不可能了。我知道我可以使用 javascript 来访问一些 adobe activex 对象。也许有人有例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:13:07.330

[我在SO](https://stackoverflow.com/questions/5501182/print-pdf-at-clientside-browser-without-opening-pdf)的这个问题中找到了这段代码：

```
<html>
<script language="javascript">
timerID = setTimeout("exPDF.print();", 1000);
</script>
<body>
<object id="exPDF" type="application/pdf" data="111.pdf" width="100%" height="500"/>
</body>
</html> 
```

对您来说重要的部分是您可以`print();`在显示 PDF 文件的对象上调用该方法。

# silverlight - 在 windows phone 7 中将数据模板添加到列表框和全景项目窗体程序

> ID：11791452
> 
> 赞同：0
> 
> 时间：2012-08-03T07:47:30.133
> 
> 标签：silverlight, windows-phone-7, listbox, windows-phone-7.1, panorama-control

我正在动态地将全景项目添加到全景控件中，它们添加成功没有任何问题

但是当我尝试将列表框添加到全景项目时，它给出了错误。我也看不到异常，应用程序自动关闭，之后我看到了模拟器主屏幕。

以下是我为创建全景项目和列表框而编写的代码

```
lstAnniversaries = new ListBox()
lstAnniversaries.Width = 420;
                        lstAnniversaries.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
                        lstAnniversaries.Foreground = new SolidColorBrush(FacebookQueries.GetColorFromHexString("#000000"));
                        lstAnniversaries.Background = new SolidColorBrush(FacebookQueries.GetColorFromHexString("#ffffff"));
                        lstAnniversaries.Tap += new EventHandler<System.Windows.Input.GestureEventArgs>(lstUpcoming_Tap);
                        lstAnniversaries.ItemTemplate = (DataTemplate)XamlReader.Load(@"<DataTemplate xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"" xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml"">
<Grid  Height=""100"" Margin=""0,0,0,0"">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width=""90"" />
                <ColumnDefinition Width=""210"" />
                <ColumnDefinition Width=""*"" />
            </Grid.ColumnDefinitions>
            <Image Source=""{Binding ImageSource}"" Height=""90"" Width=""90"" Margin=""0,0,11,0"" />
            <StackPanel Grid.Column=""1"" Margin=""0,10,0,0"">
                <TextBlock Text=""{Binding NameSource}"" Style=""{StaticResource ProfileNameStyleForTextBlock}""  />
                <StackPanel Orientation=""Horizontal"" Margin=""0,-2,0,0"">
                    <TextBlock Text=""{Binding EventName}"" Foreground=""#000000"" Style=""{StaticResource EventNameStyleForTextBlock}""   />
                    <TextBlock Text=""{Binding EventDate}"" Foreground=""{Binding EventColor}"" Style=""{StaticResource EventDateStyleForTextBlock}""  />
                </StackPanel>
            </StackPanel>
            <Button VerticalAlignment=""Center"" Height=""Auto""     Name=""btnAnniversary"" Width=""75"" Margin=""5,0,0,0"" HorizontalAlignment=""Left""     Visibility=""{Binding EllipseStatus}"" Tag=""{Binding BindsDirectlyToSource=True}""     Click=""btnAnniversary_Click"" Canvas.ZIndex=""1"" Grid.Column=""2"">
                <Image  Source=""/GiftGiv;component/Assets/bubble.png"" />
            </Button>
        </Grid>
    </DataTemplate>");
                        pan_anniversaries = new PanoramaItem();
                        pan_anniversaries.HeaderTemplate =     (DataTemplate)XamlReader.Load(@"<DataTemplate     xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation""     xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml""><TextBlock Text=""anniversaries""    FontSize=""54"" Foreground=""Black"" Margin=""-10,0,0,0""></TextBlock></DataTemplate>");

                        Grid grd = new Grid();
                        grd.Children.Add(lstAnniversaries);

                        pan_anniversaries.Content = grd;

                        PanoramaControl.Items.Add(pan_anniversaries); 
```

## 编辑：

**输出窗口文本**

```
A first chance exception of type 'System.InvalidOperationException' occurred in System.Core.dll
A first chance exception of type 'System.InvalidOperationException' occurred in System.Core.dll
Step into: Stepping over method without symbols 'System.Reflection.RuntimeMethodInfo.InternalInvoke'
Step into: Stepping over method without symbols 'System.Reflection.MethodBase.Invoke'
Step into: Stepping over method without symbols 'System.Delegate.DynamicInvokeOne'
Step into: Stepping over method without symbols     'System.MulticastDelegate.DynamicInvokeImpl'
Step into: Stepping over method without symbols 'System.Delegate.DynamicInvoke'
Step into: Stepping over method without symbols     'System.Windows.Threading.DispatcherOperation.Invoke'
Step into: Stepping over method without symbols 'System.Windows.Threading.Dispatcher.Dispatch'
Step into: Stepping over method without symbols 'System.Windows.Threading.Dispatcher.OnInvoke'
Step into: Stepping over method without symbols 'System.Windows.Hosting.CallbackCookie.Invoke'
Step into: Stepping over method without symbols 'System.Windows.Hosting.DelegateWrapper.InternalInvoke'
Step into: Stepping over method without symbols 'System.Windows.RuntimeHost.ManagedHost.InvokeDelegate'
A first chance exception of type 'System.Exception' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in     System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'System.Exception' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
A first chance exception of type 'MS.Internal.WrappedException' occurred in System.Windows.dll
The thread '<No Name>' (0xf640c32) has exited with code 0 (0x0).
The thread '<No Name>' (0xf450ca6) has exited with code 0 (0x0).
The thread '<No Name>' (0xf050d2e) has exited with code 0 (0x0).
The thread '<No Name>' (0xf820cda) has exited with code 0 (0x0).
The thread '<No Name>' (0xecb0e52) has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:08:07.887

不要在代码文件中创建，而是在页面或APP的资源部分`DataTemplates`添加代码。`DataTemplate`

使用以下方式将解决评论中提到的@igrali 的问题

```
 lstAnniversaries.ItemTemplate = this.Resources["AnniversariesTemplate"] as DataTemplate;
 lstAnniversaries.Style = this.Resources["EventsListStyle"] as Style; 
```

# scala - 任何 Int 上的 Scala 方法 hashCode() 是相同的数字吗？

> ID：11791453
> 
> 赞同：2
> 
> 时间：2012-08-03T07:47:30.193
> 
> 标签：scala

为什么任何 Int 上的 Scala 方法 hashCode() 返回相同的数字

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T07:50:13.097

因为这就是定义整数的 hashCode 的方式。

它很好地履行[了合同：](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)

> *   *如果根据方法两个对象相等`equals(Object)`，则对两个对象中的每一个调用该`hashCode`方法必须产生相同的整数结果。*

最重要的是，它遵守建议

> *   *不要求如果两个对象根据`equals(java.lang.Object)`方法不相等，则对两个对象中的每一个调用该`hashCode`方法必须产生不同的整数结果。但是，程序员应该意识到，**为不相等的对象生成不同的整数结果可能会提高哈希表的性能***

事实上，这是一个[完美哈希函数](http://en.wikipedia.org/wiki/Perfect_hash_function)的例子。

# javascript - 如何更改孙 iframe 的位置？

> ID：11791457
> 
> 赞同：1
> 
> 时间：2012-08-03T07:47:41.983
> 
> 标签：javascript, iframe, grandchild

请考虑以下示例。

TopPage (siteA.com)

```
|- iFrameB (siteB.com)

 |- iFrameC (siteC.com) 
```

首页有 iframeB 在原点上运行。在 iFrameB 中，有 iFrameC，其内部文档位置为[http://siteC.com](http://siteC.com)

TopPage(siteA.com) 有没有办法将 iFrameC 的位置从[http://siteC.com](http://siteC.com)更改为另一个页面？（请注意 TopPage 和 iFrameB 在不同的来源上运行）

我正在拼命寻找答案。

# sharepoint - 如何从 SPWebApplication 获取具有完全控制权的 SPUser

> ID：11791458
> 
> 赞同：0
> 
> 时间：2012-08-03T07:47:42.783
> 
> 标签：sharepoint

我需要获取用户，该用户已添加到具有完全控制权的 Web 应用程序的 CA 中。请注意，我不希望来自 SPWebObject 的用户，因为 WebApplication 可以包含许多网站集，因此我想直接通过中央管理员获取或验证特定用户的用户权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:18:43.687

我认为您想为您的 Web 应用程序使用[SPWebApplication.Policies属性。](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.sppolicycollection)我确信这可以更有效地完成，但这是我尝试过的似乎有效的方法：

```
 System.Uri uri = new Uri("http://sp");
        SPWebApplication webApplication = SPWebApplication.Lookup(uri);
        SPPolicyCollection policyCollection = webApplication.Policies;
        SPPolicyRoleCollection policyRoles = webApplication.PolicyRoles;

        foreach (SPPolicy p in policyCollection)
        {
            Console.WriteLine("{0} - {1}", p.DisplayName, p.UserName);
            foreach (SPPolicyRole pr in p.PolicyRoleBindings)
            {
                Console.WriteLine("     {0} - IsAdmin: {1}, FullControl: {2}", 
                                   pr.Name, 
                                   pr.IsSiteAdmin, 
                                   pr.GrantRightsMask == SPBasePermissions.FullMask);
            }
        } 
```

# java - SELECT e From Employee e——为什么是多余的“e”？

> ID：11791459
> 
> 赞同：1
> 
> 时间：2012-08-03T07:47:50.220
> 
> 标签：java, jpa, syntax, jpql

[示例](http://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF)查询：

```
SELECT e FROM Employee e WHERE SUBSTRING(e.name, 3) = 'Mac' 
```

在这种语法中，很直观地说`SELECT e`，`e`现在已声明或定义（？）。`e`但是，第二个:不是`FROM Employee e`多余的吗？

[这是与SQL SELECT 语法](http://dev.mysql.com/doc/refman/5.0/en/select.html)的倒退或相似之处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:01:11.360

第二个`e`是[*识别变量*](http://docs.oracle.com/javaee/5/tutorial/doc/bnbuf.html#bnbuj)。它实际上是`e`通过告诉 JPQL 解析器您`e`在查询中的其他地方使用它来定义的，并且它引用了`Employee`实体。第一个出现的`e`地方是你使用那个`e`。

所以，这不是多余的。如果您忽略第一个，JPQL 解析器不知道要选择什么。如果您第二次忽略它，您将选择 JPQL 解析器不知道的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:05:09.570

JPQL 语法与普通 SQL 语法略有不同。根据您的示例，第一个 e 代表普通 SQL 的 *。所以它不是多余的。但是你使用 JPA 2.x，使用条件查询比 JPQL 更好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T15:09:53.083

我带着和你一样的担忧来回答这个问题。我注意到，当您**选择 ***时，结果以列的形式出现，而当您**选择 e**时，只有一列带有某种序列化实体作为结果。[所以我在http://www.thejavageek.com/2014/03/17/jpa-select-clause/](http://www.thejavageek.com/2014/03/17/jpa-select-clause/)找到了一个很好的解释

* * *

```
SELECT e FROM Employee e 
```

这与 SQL 非常相似，不同之处在于：

*   此查询不会从列中返回一组记录，而是返回一个实体。
*   该实体别名为 e ，称为标识变量。
*   此标识变量与 Employee 类型相关联，这意味着结果将是 Employee 类型的实体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:55:41.737

如果您有这样的单个查询，IMO 在这种情况下不需要使用第二个 e （是的，它是多余的）。当您连接两个表时这是有意义的，如果这两个表具有共同的列名，那么您将使用该表别名“e”选择每一列

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:12:08.307

免责声明：这仅适用于 Hibernate 作为 JPA 实现，因为此信息对应于 HQL。

在这个简单的情况下，您不必使用`e`（只不过是别名）。由于您选择的是完整的实体，因此您甚至不必编写该`select e`部分。所以你可以写：

```
FROM Employee WHERE SUBSTRING(name, 3) = 'Mac' 
```

解释：

*   在该`from`部分中，您指定要查找的实体。`e`后面的只是`Employee`一个别名`Employee`，您可以使用它来处理整个对象（`select`部分）或其中的属性。在简单的查询中你不需要它，但是一旦你的查询中有一个连接，使用别名总是一个好主意。
*   查询的`select`一部分是用于选择您想要返回的实体的哪些属性。如果`part or just specify the alias (`在这种情况下省略“select e”），JPA 会返回整个实体。在 SQL 中，这通常不起作用（至少对于 Oracle 而言）。

要在评论中回答您的问题：您可以在查询部分*使用*别名。但为了做到这一点，您必须教 JPA 这指的是什么。这就是该部分正在做的事情。`e``select``e``from Employee e`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T07:50:26.870

你看。” （你有哪些列）

```
 SELECT e.name, e.e FROM Employee e WHERE SUBSTRING(e.name, 3) = 'Mac' 
```

# .net - 将 JsonWriter 命名空间添加到我的项目中

> ID：11791461
> 
> 赞同：0
> 
> 时间：2012-08-03T07:47:55.453
> 
> 标签：.net, json, wcf

我想使用 JsonWriter 创建自定义对象的表示，问题是我找不到 JsonWriter 类所在的命名空间，它是外部库还是已经嵌入到 .netFramework 中？我正在使用 Microsoft Visual Studio 2010，该项目是使用 .net 4.0 的 Windows 通信服务

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:53:12.627

您可以安装[JSON.NET NuGet](http://json.codeplex.com/)：

```
Install-Package Newtonsoft.Json 
```

该类`JsonWriter`在程序集中定义，在`Newtonsoft.Json`您安装 NuGet 时将自动添加到您的项目中。或者您也可以手动下载该程序集并将其引用到您的项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:56:15.123

鉴于您提到的帖子，看起来您在使用[Json.NET](http://json.codeplex.com)（[NuGet 包](http://nuget.org/packages/newtonsoft.json)，[文档](http://james.newtonking.com/projects/json/help/)）。

一旦你安装了它，你应该知道你*不必*直接使用`JsonWriter`- 这是一个相对较低级别的 API。我已经在几个项目中使用过 Json.NET，而且从来不需要这么低——根据我的经验，在大多数情况下，[“LINQ to JSON”API更适合。](http://james.newtonking.com/projects/json/help/index.html?topic=html/LINQtoJSON.htm)

它有点像 XML API - 您*可以*使用`XmlWriter`and `XmlReader`，但是使用 DOM 表示（例如 LINQ to XML）通常更简单。

另请注意，如果您不想要外部依赖项，则可以使用[`DataContractJsonSerializer`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx).NET 内置的。

# struts2 - 是否会在 struts2 中为调用相同操作的不同方法创建不同的操作对象？

> ID：11791463
> 
> 赞同：3
> 
> 时间：2012-08-03T07:48:01.130
> 
> 标签：struts2

我有一个带有 3 种方法的 Action 类。我知道对于 Action 类的每个请求，它都会创建一个实例。但在这里，我请求使用不同方法的相同 Action 类。

将创建多少个对象？3，还是只有 1？

我怎样才能知道？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T11:51:53.783

动作实例的创建不依赖于动作类中方法的数量。这完全取决于您提出的请求数量。因此，如果您提出`n`请求，`n`则会创建实例。而且我相信一旦动作类实例完成服务请求，该实例就会被销毁。

# dependency-injection - 如何将存储库注入 UnitOfWork？

> ID：11791467
> 
> 赞同：3
> 
> 时间：2012-08-03T07:48:03.853
> 
> 标签：dependency-injection, repository, unit-of-work

我已经实现了我的 UnitOfWork，以便它保留对所有存储库的引用。

```
public interface IUnitOfWork
{
   void Commit();
   void RollBack();
}

public interface IMyUnitOfWork : IUnitOfWork
{
   IFooRepository Foos { get; }
   IBarRepository Bars { get; }
   // Other repositories ...
} 
```

请注意，存储库实现了通用类型的存储库接口。

```
public interface IFooRepository : IRepository<Entities.Foo>
{
    // FooRepository specific methods goes here.
}

public interface IRepository<T> : IRepository
    where T : class
{
} 
```

现在如何将这些存储库注入我的 UnitOfWork。当然，我希望它们具有延迟加载行为。例如：

```
public class ConcreteUnitOfWork : IMyUnitOfWork
{
   private readonly IUnityContainer unityContainer;
   private IFooRepository fooRepository;

   public ConcreteUnitOfWork(IUnityContainer unityContainer)
   {
      this.repositoryFactory = repositoryFactory;
   }

   public IFooRepository Foos
   {
      get 
      { 
         return this.fooRepository ?? 
            (this.fooRepository = unityContainer.Resolve<IFooRepository>()); 
      }
   }
} 
```

我知道将 Unity 容器传递给 UnitOfWork 是不正确的，但你会提供什么模式来解决这个问题？

您可能会提到我不应该在 UnitOfWork 中保留存储库引用，但请假设一个需要多个存储库的服务类。通过这种设计，我可以将 UnitOfWork 作为构造函数参数（构造函数注入）传递给服务类，但是如果我没有在 UnitOfWork 中保留存储库引用，我将不得不将所有需要的存储库作为构造函数参数传递，你知道什么它导致。

- 更新 -

如果我绝对错了，请告诉我，我永远不应该在 UnitOfWork 中编写存储库。那么请在这里给我一个关于“构造函数过度注入”的解决方案。

-- 更新 2 --

似乎从 UnitOfWork 组合（引用）存储库打破了开放/封闭原则，因为我们需要在添加新存储库（添加新属性）时更改 UnitOfWork 类。

如果它是正确的，那么我应该考虑重构。你能给我一些想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T16:19:26.367

当前的设计方案似乎在 IMyUnitOfWork 接口中混合了多个职责。您说这是因为否则服务类可能需要独立获取每个存储库。我假设你的意思是这样的：

```
public MyService(
   IUnitOfWork uow,
   IFooRepository fooRepository,
   IBarRepository barRepository) 
```

在我看来，这是一个更简单、更清洁的设计。

但是构造函数过度注入呢？

好吧，就是这样……但问题是，这与您现在使用 ConcreteUnitOfWork 实现时遇到的问题完全相同。你根本没有解决构造函数过度注入的气味——你只是把它移到另一个类。

实际上，通过将其移至 ConcreteUnitOfWork，您使处理这种情况变得*更加困难。*因为 ConcreteUnitOfWork 是一个纯粹的基础设施类（或支持类，如果你愿意的话）它没有任何业务上下文，所以很难在这里提出解决构造函数过度注入气味的方法。

另一方面，给定的服务（或者可能是控制器）往往会更加专业化并且了解业务上下文，因此它不需要*每个*存储库来完成它的工作 - 或者如果它需要，它可能试图做太多。

这样一个特定的业务组件可以更好地[重构为 Facade Service](http://blog.ploeh.dk/2010/02/02/RefactoringToAggregateServices.aspx)。

# android - 使用 gradle 构建 android 项目

> ID：11791469
> 
> 赞同：3
> 
> 时间：2012-08-03T07:48:21.113
> 
> 标签：android, gradle

我正在尝试使用 gradle 构建工具构建一个简单的 android 应用程序。但我收到这样的错误

没有方法签名：org.gradle.api.internal.artifacts.dsl.dependencies.DefaultDependencyHandler.compile() 适用于参数类型：(java.lang.String) 值：[org.gradle.api.plugins:gradle- android-plugin:1.2.0-SNAPSHOT] 可能的解决方案：module(java.lang.Object)

这是一个简单的 build.gradle 配置

```
buildscript {
 repositories {
     mavenCentral()
  }
  dependencies {
    compile 'org.gradle.api.plugins:gradle-android-plugin:1.2.0-SNAPSHOT'
  }
}

apply plugin: 'android'

repositories {
   mavenCentral()
} 

processResource {
    expand (project.properties)
}

task configureDebug << {
    jar.classifier = "debug"
}

task configureRelease << {
    proguard.enabled = true
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T08:58:04.863

确保您在 android studio hierarchy 中的应用程序 build.gradle "YourProjectName->yourprojectname->build.gradle" 上编写依赖块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:11:25.853

应用插件时，您想告诉您构建脚本以在其类路径中使用它。编译不需要它，因此只需将配置更改`compile`为`classpath`. 更多信息参见[51.5.1。](http://gradle.org/docs/current/userguide/custom_plugins.html)在 Gradle 用户指南中的[另一个项目中使用您的插件。](http://gradle.org/docs/current/userguide/custom_plugins.html)

```
buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath 'org.gradle.api.plugins:gradle-android-plugin:1.2.0-SNAPSHOT'
    }
} 
```

**编辑：**目前该插件不支持 Android SDK 的 r20。有关详细信息，请参阅此[问题](https://github.com/jvoegele/gradle-android-plugin/issues/65)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T03:27:13.973

使用 android gradle 工具

```
repositories {
    mavenCentral()
}
dependencies {
    classpath 'com.android.tools.build:gradle:0.4'
} 
```

# java - 以 web.xml 以外的方式启用/禁用 servlet

> ID：11791470
> 
> 赞同：1
> 
> 时间：2012-08-03T07:48:21.753
> 
> 标签：java, jakarta-ee, tomcat, servlets, web.xml

我想知道除了 web.xml 是否有办法启用或禁用 servlet（或至少 servlet 的映射）。我有多种使用相同 web.xml 的服务器（我无法更改它），所以这就是为什么另一种启用/禁用 servlet 的方法会很有用。

谢谢，泰奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:50:56.787

您可以[`@WebServlet`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html)在 servlet 3.0 及更高版本中使用注释，不确定这是否适合您的要求，如果这不是您想要的方式，请发表评论

```
@WebServlet("/hello")
public class HelloServlet extends HttpServlet {
// code code code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:23:37.400

据我所知，除了部署描述符之外，没有诸如以编程方式禁用 servlet 之类的东西。

我处理此类问题的方法如下：

- 我会在我想要控制访问的每个 servlet service() 方法中添加一个 if 语句，例如：

```
if(MyCustomSecurity.isServletAccessible(request)){
  //here is your code that you have right now
}else{
  //redirect request to an error page maybe
} 
```

- 在 MyCustomSecurity 类中创建此方法 isServletAccessible()，该方法将返回一个布尔值，判断是否允许用户访问 servlet

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:30:16.383

如果您使用的是 Tomcat 7.x / Servlet 3.0，您可以通过编程方式添加一个 servlet 过滤器来动态启用/禁用对某些 servlet 的访问，而无需接触您的 web.xml 文件或应用程序代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:31:06.533

我只是创建一个 Web 过滤器，它读取某种配置并在特定的配置路径上传递或重定向。

另一种选择是阻止安全层上的路径，例如 Spring Security（实际上它使用如上所述的东西）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:32:14.527

创建一个**过滤器**（一个实现的类`javax.servlet.Filter`）怎么样，然后在一个`xml`或`properties`文件中，甚至在 中`database`，您可以添加用户可以访问或无法访问的 servlet 名称。

# android - 为 Android 设备获取支持的编解码器

> ID：11791473
> 
> 赞同：13
> 
> 时间：2012-08-03T07:48:27.397
> 
> 标签：android, codec, mediarecorder

有没有办法询问 Android 设备它支持哪些音频和视频编解码器进行编码？

我发现不支持 [http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)中列出的某些编解码器的设备， 并且似乎有些设备支持未列出的其他编解码器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-27T14:08:27.673

这对你来说可能很有趣：

```
 private static MediaCodecInfo selectCodec(String mimeType) {
     int numCodecs = MediaCodecList.getCodecCount();
     for (int i = 0; i < numCodecs; i++) {
         MediaCodecInfo codecInfo = MediaCodecList.getCodecInfoAt(i);

         if (!codecInfo.isEncoder()) {
             continue;
         }

         String[] types = codecInfo.getSupportedTypes();
         for (int j = 0; j < types.length; j++) {
             if (types[j].equalsIgnoreCase(mimeType)) {
                 return codecInfo;
             }
         }
     }
     return null;
 } 
```

[在这里](http://developer.android.com/reference/android/media/MediaCodecInfo.html)找到它。如您所见，您获得了已安装编解码器的数量`MediaCodecList.getCodecCount();`。随着`MediaCodecInfo codecInfo = MediaCodecList.getCodecInfoAt(i);`您从列表中获取有关特定编解码器的信息。`codecInfo.getName()`例如告诉您编解码器的标题/名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T10:53:34.897

> 有没有办法询问 Android 设备它支持哪些音频和视频编解码器进行编码？

我真的希望有，但没有，至少通过 ICS。

Jelly Bean 提供一门`MediaCodec`课程。虽然它没有“给我支持的编解码器列表”，但它确实有`createEncoderByType()`，您可以在其中传入 MIME 类型。据推测，如果不支持您想要的 MIME 类型，这将抛出`RuntimeException` 或返回。`null`而且我不能保证仅仅因为`MediaCodec`报告编码器可用就可以保证它可以工作，例如，`MediaRecorder`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-30T13:16:50.120

最简单的方法是使用

```
MediaCodecList(MediaCodecList.ALL_CODECS).codecInfos 
```

它返回一个包含您设备上可用的所有编码器和解码器的数组，[例如此图像](https://i.stack.imgur.com/93TmG.png)。

然后，您可以使用`filter`查询您正在寻找的特定编码器和解码器。例如：

```
MediaCodecList(MediaCodecList.ALL_CODECS).codecInfos.filter {
    it.isEncoder && it.supportedTypes[0].startsWith("video")
} 
```

这将返回所有可用的视频编码器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-07T04:34:54.070

这是基于 Jonson 的答案的更新代码，用 Kotlin 编写，不使用过时的方法：

```
 fun getCodecForMimeType(mimeType: String): MediaCodecInfo? {
    val mediaCodecList = MediaCodecList(MediaCodecList.REGULAR_CODECS)
    val codecInfos = mediaCodecList.codecInfos
    for (i in codecInfos.indices) {
        val codecInfo = codecInfos[i]

        if (!codecInfo.isEncoder) {
            continue
        }

        val types = codecInfo.supportedTypes
        for (j in types.indices) {
            if (types[j].equals(mimeType, ignoreCase = true)) {
                return codecInfo
            }
        }
    }

    return null
} 
```

# javascript - 什么是javascript中的根节点

> ID：11791475
> 
> 赞同：2
> 
> 时间：2012-08-03T07:48:40.500
> 
> 标签：javascript

为什么我们使用根节点。在下面给定的函数中，他们使用根节点函数。我也想了解这个函数'！rootNode'是什么意思。

```
 function getElementsByClassName(cn, rootNode) {
  if (!rootNode) {
    rootNode = document;
  } 
  for (var r=[], e=rootNode.getElementsByTagName('*'), i=e.length; i--;) {
    if ((' '+e[i].className+' ').indexOf(' '+cn+' ')>-1) {
      r.push(e[i]); 
    }
  }
  return r;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:51:08.737

在您的示例中，`rootNode`是 HTML 元素，从该元素开始递归搜索分层[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)树（这是网页在 JavaScript 中的表示方式）以查找具有 class name 的元素`cn`。

这允许您的函数的调用者指定他们要从哪里搜索具有类 name 的元素`cn`。如果调用者没有指定`rootNode`该函数，则只返回整个网页中的每个元素的类名`cn`。

该数组`r=[]`被初始化为一个空数组，找到的元素被添加到该数组中（使用`push`）。

`i--`之所以使用循环，是因为`for`循环开始于- 函数遍历从数组末尾到开头`i=e.length`返回的元素。`getElementsByTagName`循环将`for`结果评估`i--`为布尔值，当`i`命中时退出`-1`（因为在此迭代中，布尔评估将针对 falue 进行`0`，因为`i--` [后递减](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)的值`i`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:50:43.793

`rootNode`在该函数中是您要从中查找元素的顶级节点。 `document`将查看整个文档。 `document.body`只会查看文档的正文。正文中的其他一些元素只会在该元素的子元素中查找。

该声明：

```
if (!rootNode) { 
```

正在检查您是否为该参数传递了任何内容，如果您没有传递或传递或传递`undefined`任何`null`其他虚假值，则默认将文档作为根节点。这允许人们使用如下功能：

```
var items = getElementsByClassName("foo"); 
```

并且该功能将查看整个文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:51:43.310

如果您不提供 rootNode 作为参数，则将搜索整个文档。否则将搜索给定根节点的所有下降节点。

# c# - 在 VC# 2010 中逐页读取 docx 文件

> ID：11791479
> 
> 赞同：0
> 
> 时间：2012-08-03T07:49:07.253
> 
> 标签：c#, docx

我一直在使用下面的代码来阅读整个 word 文档。

```
Microsoft.Office.Interop.Word.ApplicationClass wordObject = new Microsoft.Office.Interop.Word.ApplicationClass();
                //Microsoft.Office.Interop.Word.ApplicationClass wordObject = new ApplicationClass();
                object file = file_path.Text; //this is the path
                object nullobject = System.Reflection.Missing.Value;
                Microsoft.Office.Interop.Word.Document docs = wordObject.Documents.Open
                    (ref file, ref nullobject, ref nullobject, ref nullobject,
                    ref nullobject, ref nullobject, ref nullobject, ref nullobject,
                    ref nullobject, ref nullobject, ref nullobject, ref nullobject,
                    ref nullobject, ref nullobject, ref nullobject, ref nullobject
                                    );

                docs.ActiveWindow.Selection.WholeStory();                
                docs.ActiveWindow.Selection.Copy();
                IDataObject data = Clipboard.GetDataObject();
                //docx_contents.Text = data.GetData(DataFormats.Text).ToString();
                pages = data.GetData(DataFormats.Text).ToString();
                docs.Close(ref nullobject, ref nullobject, ref nullobject); 
```

我得到了 pages 变量中的所有内容。请建议我如何在字符串数组中逐页阅读？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:19:24.140

这是我的代码的一部分

```
 DOCXStructure[] returnval = null;

        object file = filePath;
        object nullobj = System.Reflection.Missing.Value;
        object read_only = true;

        wordApp = new Word.ApplicationClass();

        FileInfo fileInfo = new FileInfo(filePath);

        string fileName = filePath.Substring(filePath.LastIndexOf('\\'));
        fileName = "~" + fileName;

        document = wordApp.Documents.Open(ref file, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj,
            ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj, ref nullobj);

        Word.WdStatistic stat = Word.WdStatistic.wdStatisticPages;
        int PageNum = document.ComputeStatistics(stat, ref nullobj);

        returnval = new DOCXStructure[PageNum];

        for(int i=0; i<PageNum; i++){
            returnval[i] = new DOCXStructure();

            object what = Word.WdGoToItem.wdGoToPage;
            object which = nullobj;
            object count = i+1;
            object name = nullobj;
            object Page = "\\Page";

            wordApp.Selection.GoTo(ref what, ref which, ref count, ref name);

            Word.Range range = document.Bookmarks.get_Item(ref Page).Range;
            returnval[i].page = i+1;
            returnval[i].context.AddRange(range.Text.Split('\r', '\n', '\t'));
        }
        document.Close(ref nullobj, ref nullobj, ref nullobj); 
```

# java - 如何将 2 个相同大小的 imagicons 添加到一个 jlabel 中并很快将它们组合在另一个之上？

> ID：11791480
> 
> 赞同：0
> 
> 时间：2012-08-03T07:49:07.177
> 
> 标签：java, swing, icons, jlabel, imageicon

有谁知道如何做到这一点？imageicons 是相同的尺寸，但在一个上具有透明度，以便您可以看到背景图标。

* * *

```
 tiles[w][h] = new JLabel();
             if(tiles[10][15] == tiles[w][h]){
                 icon2 = new ImageIcon(Map.tileGrid[8][11]);
                 icon = new ImageIcon(Map.map[w][h]);
                 top.setIcon(icon2);
                 bottom.setIcon(icon);
                 top.setBounds(2, 0, 30, 30);
                 bottom.setBounds(0, 0, 30, 30);
                 resources.add(top, new Integer(1));
                 resources.add(bottom, new Integer(2));
                 tiles[w][h].add(resources);
             } 
```

像这样的东西，因为我还没有实现布局管理器，所以它没有显示在我的地图上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:14:38.060

从组合中构建一个新的 ImageIcon：

```
// create the new image, canvas size is the max. of both image sizes (a and b are ImageIcons)
int w = a.getIconWidth();
int h = a.getIconHeight();
BufferedImage combined = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

// paint both images, preserving the alpha channels
Graphics g = combined.getGraphics();
g.drawImage(a.getImage(), 0, 0, null);
g.drawImage(b.getImage(), 0, 0, null);
ImageIcon result = new ImageIcon(combined); 
```

然后，您将`result`用作标签的图标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:54:23.250

1.  您可以使用基于[JXLayer (Java6)的](http://java.net/projects/jxlayer/)[JLayer (Java7 )](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

2.  你可以使用[OverlayLayout](http://www.java2s.com/Tutorial/Java/0240__Swing/1401__OverlayLayout.htm)

3.  使用[JLayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)（可能不是好方法，但是基于一堆示例）

4.  `JLabel`尚未实现任何`LayoutManager`（与`JFrame`or相比`JPanel`），您必须添加适当的`LayoutManager`

# generics - 如何在 VHDL 中将整数数组指定为泛型？

> ID：11791484
> 
> 赞同：6
> 
> 时间：2012-08-03T07:49:16.950
> 
> 标签：generics, instantiation, vhdl

我正在尝试为基于 SPI 的 IO 扩展器创建通用驱动程序。这个想法是在实例化中传递与请求的 IO 设置相匹配的初始化值。

我目前的尝试如下所示：

```
entity max7301_simple is
   generic ( 
        IO_cfg : array (1 to 7) OF integer range 0 to 255 := (16#55#, 16#55#, 16#55#, 16#55#, 16#55#, 16#55#, 16#55#)
           );
     port  (
        -- Application interface :
        clk_i       :   in std_logic;        -- input clock, xx MHz.
        rst_i       :   in std_logic;        -- sync reset.
        en_i        :   in std_logic;        -- enable, forces re-init of pins on MAX7301.
        output_i    :   in std_logic_vector(27 downto 0);   --data to write to output pins on MAX7301
        irq_o       :   out std_logic;       -- IRQ, TODO: what triggers, change on inputs ?
        input_o     :   out std_logic_vector(27 downto 0);  --data read from input pins on MAX7301
        -- MAX7301 SPI interface
        sclk        :   out std_logic;        -- SPI clock
        din         :   in std_logic;        -- SPI data input
        dout        :   out std_logic;       -- SPI read data
        cs          :   out std_logic        -- SPI chip select
    );
end max7301_simple; 
```

问题出在 IO_cfg 数组上，我尝试了各种尝试 w/wo 初始化值等。似乎无法弄清楚如何指定数组。

我相信已经读到您可以将数组作为泛型传递，但仍然没有太多运气。Xilinx ISE 只是告诉我“'array' 附近的语法错误”，这不足以让我前进。

任何帮助，将不胜感激

实例化此模块时，我总是需要 7 个值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T08:43:32.953

您可以将数组用作泛型参数，但是您不能在其中将其*声明*为动态的匿名类型。

您必须首先在一个单独的包中声明您的整数数组类型（可以在同一个文件中或在单独的文件中），然后`use`在您的实体中以及在实例化它时声明该包。

这是一个如何做到这一点的例子：

```
-- package declaration
package mytypes_pkg is

     type my_array_t is array (1 to 7) of integer range 0 to 255;

end package mytypes_pkg;

-- entity "uses" the package   
use work.mytypes_pkg.all;

entity max7301_simple is
   generic ( 
        IO_cfg : my_array_t := (16#55#, 16#55#, 16#55#, 16#55#, 16#55#, 16#55#, 16#55#)
           );
   -- ports [...]
end max7301_simple; 
```

还要注意`use`体系结构中实例化您的实体的包。

* * *

（选读）

**为什么像你这样写它真的是一个*语法错误？***

查看[VHDL (2002) 标准](http://ceit.aut.ac.ir/~szamani/1076%20Ieee%20Standard%20Vhdl%20Language%20Reference%20Manual.pdf)中的 VHDL 语法，每个通用参数的声明都是 a`interface_constant_declaration`并且您具有以下语法规则：

```
[§ 4.3.2]
interface_constant_declaration ::=  
            [ constant ] identifier_list : [ in ] subtype_indication [ := static_expression ]

[§ 4.2]
subtype_indication ::= 
            [ resolution_function_name ] type_mark [ constraint ] 
```

类型引用只能是现有类型的名称 ( `type_mark`) 或现有类型的限制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-29T11:06:56.227

**我通过使用2008 VHDL**标准和预定义属性提出了一种更通用的方法- 这允许**传递任意长度的数组**。在你的包中定义你的类型，如下所示：

```
package data_types is
    type array_of_integers is array(natural range <>) of integer;
end package; 
```

现在在您的代码中传递通用数组，如下所示：

```
generic(
    COEFFICIENTS : array_of_integers := (-1, 0, 1)
); 
```

现在软件将使用默认索引方案。**可以通过预定的“左**属性”来考虑它 （参考可以在：[http](http://www.csee.umbc.edu/portal/help/VHDL/attribute.html) ://www.csee.umbc.edu/portal/help/VHDL/attribute.html 找到）：

```
-- First coefficient
    ... <= COEFFICIENTS(COEFFICIENTS'left);
-- Second coefficient
    ... <= COEFFICIENTS(COEFFICIENTS'left + 1); 
```

通常，您应该在某种**循环**或**生成**语句中使用此数组：

```
GENERATE_STATEMENT: for entry in 0 to COEFFICIENTS'length-1 generate
    out(entry) <= std_logic_vector(to_signed(COEFFICIENTS(COEFFICIENTS'left + entry), out(entry)'length));
end generate; 
```

作为对**Quartus II**用户的一点补充说明 - 也可以在**.bdf**原理图文件中使用通用数组。将参数类型设置为**Auto**并以此格式重写参数值 - ***A(D"-1", D"0", D"1")***，其中***D***代表**十进制数据类型**（有用链接：[http://quartushelp.altera .com/14.0/mergedProjects/assign/asd/asd_tab_param.htm](http://quartushelp.altera.com/14.0/mergedProjects/assign/asd/asd_tab_param.htm)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T15:42:31.497

如果您不介意约束较少的泛型，您可以执行以下操作：

```
generic (IO_cfg : integer_vector); 
```

只要你有 VHDL-2008 编译器。

# mysql - MySQL 存储过程和游标

> ID：11791496
> 
> 赞同：0
> 
> 时间：2012-08-03T07:50:08.097
> 
> 标签：mysql, cursor

我是stackoverflow的初学者，我希望你能给我解决我的问题，我会解释：

我有两个表：第一个表（表 A）包含（电话号码，持续时间），第二个表（表 B）包含（国际前缀、目的地、每分钟费用和长度（前缀））

所以我需要做的是对两个表中的所有数据进行更新，之后我将解释算法，首先这是更新命令： /* 我们将在表 A 中添加一个列包含我们的结果，我们将其命名为“结果” */

```
 UPDATE table Table A SET result  = CASE WHEN left (phone_number,length(prefix)) = prefix_inter 
  THEN  (duration * fee per minute) 
```

这就是我想要**为每个电话号码**做的事情，我已经**按前缀** *对表 B 进行了排序，以便在顶部具有最大的前缀，*以便第一个检查的是最大的代码。

此代码将计算 VOIP 的连接，因此我们需要通过验证电话号码是否包含准确的国际前缀来检测电话号码的目的地（例如，我们可以有 0044123 和 0.156 欧元/分钟，0044 用于 0.08 €每分钟，这就是为什么我们必须从验证中最大的代码开始）

**每个电话号码都必须使用表 B 中的所有前缀进行验证** 所以最后，我需要你给我解决方案，因为我在这个领域没有足够的知识......

*PS：我正在使用 MySQL 5.5* 感谢和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:02:25.233

那么，你想用这两张表来计算一个电话的价格吗？一种方法是在子选择中查找每分钟的费用：

```
UPDATE A SET result = (select A.duration*B.fee_per_minute from B where
    locate(B.prefix, A.phone_number) = 1 order by length(prefix) desc limit 1); 
```

如果 B 已经按前缀长度排序，则可以删除“order by”。

# android - 纬度和经度总是得到零 android 但在 logcat 我得到当前位置

> ID：11791499
> 
> 赞同：0
> 
> 时间：2012-08-03T07:50:15.073
> 
> 标签：android, geolocation

我已经完成了编码，当我按下按钮时，我会收到当前位置的邮件

这是代码

```
 LocationManager mlocManager =                                           (LocationManager)mContext.getSystemService(Context.LOCATION_SERVICE);
    //mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 5.0f, new MyLocationListener());
    LocationListener mlocListener = new MyLocationListener();
    //mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 3000,1000,mlocListener);
    /*if(mlocManager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 3000,1000,mlocListener);
    }
    else {

    }*/
    Criteria criteria = new Criteria();
    String provider = mlocManager.getBestProvider(criteria, true);
    if(provider!=null) {
        Location location = mlocManager.getLastKnownLocation(provider);
        if(location!=null) {
            lat = Integer.parseInt(location.getLatitude()+"");
            lang = Integer.parseInt(location.getLongitude()+"");
    }
    else
    {
        mlocManager.requestLocationUpdates(provider, 1, 0, mlocListener);
    } 
```

现在发送邮件

```
 class MyLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        lat = Integer.parseInt(location.getLatitude()+"");
        lang = Integer.parseInt(location.getLongitude()+"");

                SendMail sender = new SendMail(mContext.getResources().getString(R.string.username), mContext.getResources().getString(R.string.password));

                try {
                    sender.sendMail(
                            "The Location is ",
                            " Latitude :- " + lang  + 
                         "\n Longitude :-"  + lat,
                            "xxxxx@gmail.com",
                            "xxxx@gmail.com");
                } catch (Exception e) {
                    e.printStackTrace();
                }

             } 
```

现在我收到邮件但零纬度和零经度

现在我已经检查了 logcat 我正在获取位置

```
 08-03 13:14:45.339: D/libloc(221): Event RPC_LOC_EVENT_PARSED_POSITION_REPORT (client 0)
    08-03 13:14:45.339: D/libloc(221): Session status: RPC_LOC_SESS_STATUS_IN_PROGESS   Valid mask: 0x6069
    08-03 13:14:45.339: D/libloc(221): Latitude:  22.2790718 (intermediate)
    08-03 13:14:45.339: D/libloc(221): Longitude: 70.7710290
    08-03 13:14:45.339: D/libloc(221): Accuracy: 0.0000000
    08-03 13:14:45.339: D/libloc(221): loc_eng_deferred_action_thread signalled
    08-03 13:14:45.339: D/libloc(221): loc_eng_deferred_action_thread event 1
    08-03 13:14:45.339: D/libloc(221): loc_eng_process_loc_event: 1
    08-03 13:14:45.339: D/libloc(221): loc_eng_deferred_action_thread. waiting for events
    08-03 13:14:45.469: D/libloc(221): Event RPC_LOC_EVENT_NMEA_1HZ_REPORT (client 0)
    08-03 13:14:45.469: D/libloc(221): loc_eng_deferred_action_thread signalled 
```

所以请谁能告诉我如何获得这个当前位置

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:17:07.327

好的，从你的代码中我发现你写了以下几行，

```
lat = Integer.parseInt(location.getLatitude()+"");
lang = Integer.parseInt(location.getLongitude()+""); 
```

`location.getLagetLatitude()`将写入您以整数形式解析的双精度值。

我建议您将 lat,lon 变量作为`double`，您的问题将得到解决。

# c# - 在这个简单的正则表达式中更正

> ID：11791500
> 
> 赞同：0
> 
> 时间：2012-08-03T07:50:15.623
> 
> 标签：c#, regex

我是正则表达式的新手，我写的可能是一个非常简单的表达式，但不知道我错在哪里。

```
@"^([a-zA-Z._]+)@([\d]+)" 
```

此 RE 用于以下字符串：

```
somename@somenumber 
```

现在我正在尝试检索 somename 和 somenumber。这就是我所做的：

```
ac.name = m.Groups[0].Value;
ac.number = m.Groups[1].Value; 
```

这里 ac.name 读取**完整的 string**，而 ac.number 读取**somenumber**。我在 ac.name 中哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:01:00.937

我猜这个正则表达式是正确的，问题是，你得到的 ac.name 不是来自第 1 组，而是来自 group(0)，它是整个字符串。试试这个：

```
ac.name = m.Groups[1].Value;
ac.number = m.Groups[2].Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:00:12.940

这个正则表达式是[正确](http://regexr.com?31njf)的。我认为你的错误在其他地方。您似乎使用 C#。因此，您应该考虑[语言中的正则表达式用法](http://www.dotnetperls.com/regex-match)。

查看 MSDN 中[的代码示例](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx#remarksToggle)，您需要在访问时使用从**1 开始的**索引，而`Groups`不是从零开始的索引（正如 Kent[建议](https://stackoverflow.com/a/11791661/471214)的那样）。所以，使用这个：

```
String name   = m.Groups[1].Value;
String number = m.Groups[2].Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T08:08:39.970

使用这个正则表达式`(\w+)@(\d+([.,]\d+)?)`

`Groups[1]`将包含名称

`Groups[2]`将包含数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:53:18.430

我认为您应该将其`+`移入捕获组：

```
@"^([a-zA-Z._]+)@([\d]+)" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:04:40.353

如果这是 C#，请尝试不使用 ^

```
([a-zA-Z\._]+)@([\d]+) 
```

我刚试了一下，它正确分组

更新：逃脱了 .

如果您只想要一个匹配项（因此原始表达式中的 ^ ），请使用`.Match`代替`.Matches`方法。请参阅[有关正则表达式类的 MSDN 文档](http://msdn.microsoft.com/en-us/library/30wbz966%28v=vs.71%29.aspx)。

# php - 为什么这个 jquery 脚本不起作用？

> ID：11791511
> 
> 赞同：1
> 
> 时间：2012-08-03T07:51:04.080
> 
> 标签：php, javascript, jquery

所以我有一个网站，允许用户输入链接，然后提取信息并将其放入列表中。

现在一切正常，直到昨天我的网络托管合作伙伴进行了一些升级。我知道 mysql & php 一直在升级，但不知道还有什么。

首先，我遇到了无法登录数据库的问题（必须删除并重新创建用户）。然后是 JSON 的 PHP 序列化问题（需要更改代码）。然后是 412 无效的前置条件错误（需要托管合作伙伴设置的特殊规则）。现在最后一个 jquery 脚本已经停止工作。但我不知道为什么。它以前有效，但也许那是运气（我在这方面没有那么经验）。

无论如何，发生的事情是

1.  用户输入链接。
2.  jquery 调用返回 JSON 的链接。
3.  解析 JSON 并使用结果更新网页。
4.  用户单击保存并将数据输入到数据库中。

使用 firebug 并在我的 javascript 中放置警报，然后我可以看到第 1 步、第 2 步工作正常。返回的 JSON 是有效的（我已经用 JSONlint 验证过），但第 3 步不起作用。我的脚本在下面；

```
function getURLData(form)
{
    var listid = $('input#listid').val();
    var memberid = $('input#memberid').val();
    var link = $('input#link').val();
    var sendstr = "http://www.wishindex.com/ajax.php?link=\"" + link + "\"&listid=" + listid + "&memberid=" + memberid;

alert(sendstr);
        $.getJSON(sendstr,function(result)
        {   
            alert('inside');        
            if(result['Itemname'] != "")
            {
                alert('inside2');
                $('#itemname').val(result['Itemname']);
                $('#itemname').attr('readonly', 'true');
                $('#desc').val(result['Description']);
                $('#category').val(result['Category']);
                $('#category').attr('readonly', 'true');
                $('#price').val(result['Price']);
                $('#price').attr('readonly', 'true');
                $('#choosepicture').attr('onclick', 'window.open(\'http://www.wishindex.com/picture.php?link=' + result['Link'] + '\')');
                if (result['PictureLink'] != "")
                {
                    $('#picturelink').val(result['PictureLink']);
                    $('#picturelink').attr('readonly', 'true');                 
                }
                else
                    $('#choosepicture').removeAttr('disabled');

                $('#automatic').attr('value', 'true');      
                $('#currency').val(result['Currency']);
                $('#currency').attr('readonly', 'true');
            }
            else
            {           
                $('#automatic').attr('value', 'false');
                $('#manual').html('Please enter details manually');
                $('#choosepicture').removeAttr('disabled');
                $('#choosepicture').attr('onclick', 'window.open(\'http://www.wishindex.com/picture.php?link=' + result['Link'] + '\')');
            }
        });
} 
```

如果我启用警报，那么我看到调用的链接是正确的，JSON 是有效的（通过 firebug 并手动调用链接）并且 alert('inside') & alert('inside2') 被执行，所以它达到了这个代码段，但我的 html 元素没有更新！

正如我所说，在升级之前它很好，但也许我做错了什么，所以任何帮助都将不胜感激，因为我花了几个小时在这方面却找不到问题。

我的 JSON 响应；

```
[{"ID":"","MemberID":"24","Listid":"41","Itemname":"LEGO Star Wars 9489: Endor Rebel Trooper and Imperial Trooper","Description":null,"NumberDesired":null,"NumberPurchased":null,"Category":{"0":"TOYS_AND_GAMES"},"Link":"\"http:\/\/www.amazon.co.uk\/LEGO-Star-Wars-9489-Imperial\/dp\/B005KISGAI\/ref=pd_rhf_gw_shvl1\"","PictureLink":{"0":"http:\/\/ecx.images-amazon.com\/images\/I\/51fQnt%2BlppL._SL160_.jpg"},"Price":"9.89","Currency":"\u00a3","Priority":null,"SuggestedPurchaser":null,"ActualPurchaser":null,"PurchaseStatus":null,"Productid":"B005KISGAI","Site":"amazon.co.uk","DateAdded":null,"DatePurchased":null,"Domain":null,"Temp":["LEGO-Star-Wars-9489-Imperial","dp","B005KISGAI","ref=pd_rhf_gw_shvl1\""],"Error":"","Warning":null}] 
```

您可以调用它来获取 JSON 结果示例

[http://www.wishindex.com/ajax.php?link=%22http://www.amazon.co.uk/LEGO-Star-Wars-9489-Imperial/dp/B005KISGAI/ref=pd_rhf_gw_shvl1%22&listid=41&memberid =24](http://www.wishindex.com/ajax.php?link=%22http://www.amazon.co.uk/LEGO-Star-Wars-9489-Imperial/dp/B005KISGAI/ref=pd_rhf_gw_shvl1%22&listid=41&memberid=24)

可以在此处找到工作演示（根据要求）； [http://www.wishindex.com/test_newitem.php?listid=41](http://www.wishindex.com/test_newitem.php?listid=41)

去测试;

1.  在链接字段中输入来自 amazon.co.uk 的产品链接，例如 [http://www.amazon.co.uk/LEGO-Star-Wars-9489-Imperial/dp/B005KISGAI/ref=pd_rhf_gw_shvl1](http://www.amazon.co.uk/LEGO-Star-Wars-9489-Imperial/dp/B005KISGAI/ref=pd_rhf_gw_shvl1)
2.  单击获取详细信息，其余字段应自动填充，但它们不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:19:00.817

您的 json 是数组中的一个对象。所以你应该只能像这样访问数据：`result[0]['Itemname']`或者`result = result[0]`在你访问它之前做。

所以它到达'inside2'，因为`result['Itemname']`它`undefined`是`!= ""`

# java - 将字符串转换为日历。最简单的方法是什么？

> ID：11791513
> 
> 赞同：3
> 
> 时间：2012-08-03T07:51:06.800
> 
> 标签：java, android, date, datetime, calendar

将格式化的字符串转换为日历的最简单和最简单的方法是什么？例如“dd.MM.yyyy”到日历？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-03T07:54:30.767

```
DateFormat df = new SimpleDateFormat("dd.MM.yyyy");
Calendar cal  = Calendar.getInstance();
cal.setTime(df.parse(stringInstanceRepresentingDate)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:55:45.023

试试这段代码：

```
String dateStr = "04/05/2010"; 

SimpleDateFormat curFormater = new SimpleDateFormat("dd/MM/yyyy"); 
Date dateObj = curFormater.parse(dateStr); 
Calendar calendar = Calendar.getInstance();
calendar .setTime(dateObj) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T07:53:26.163

尝试：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd.MM.yyyy");
Calendar calendarDate = Calendar.getInstance();
if (calendarDate!= null) {
strdate = sdf.format(calendarDate.getTime());
} 
```

# asp.net - 从用户控件内部获取 Html 生成？

> ID：11791517
> 
> 赞同：1
> 
> 时间：2012-08-03T07:51:24.790
> 
> 标签：asp.net, user-controls, lifecycle

我开发了一个自定义用户控件。对于特定的需要，我必须从其中的 usercontrol 生成 html 并仅在页面正文中显示它。

我认为可能会重载 RenderControl(HtmlTextWriter writer) 但我不知道如何。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:03:51.330

您可以在内存中呈现控件，将其放在字符串上，然后按照您所说的在页面上的某个位置打印此字符串。这是加载控件并将其呈现在内存中的代码，然后将结果存储在字符串中。

```
 // load the control
    var oTesto = Page.LoadControl("Testo.ascx");

    // here you need to run some initialization of your control
    //  because the page_load is not loading now.

    // a string writer to write on it
    using(TextWriter stringWriter = new StringWriter())
    {
      // a html writer
      using(HtmlTextWriter GrapseMesaMou = new HtmlTextWriter(stringWriter))
      {
        // now render the control inside the htm writer
        oTesto.RenderControl(GrapseMesaMou);

        // here is your control rendered output.
        strBuild = stringWriter.ToString();
      }
    } 
```

要捕获控件的呈现，您可以将[Render](http://msdn.microsoft.com/en-us/library/aa338806(VS.71).aspx)用作：

```
protected override void Render(HtmlTextWriter writer)
{
    System.IO.StringWriter stringWriter = new System.IO.StringWriter();

    HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter);

    // now the control is inside the htmlWriter as final rendered text
    base.Render(htmlWriter);

    // here is how to make the control render itself
    // base.Render(writer);
} 
```

您将渲染放在您的控件类中。

# php - Onclick 事件不工作，但 Onmouse 工作

> ID：11791518
> 
> 赞同：0
> 
> 时间：2012-08-03T07:51:26.073
> 
> 标签：php, javascript, mysql, html, ajax

我已经用 AJAX 构建了一个即时搜索，就像当你开始输入结果时出现，然后如果你点击正文上的任何地方结果消失，鼠标悬停在输入字段结果重新出现。在输入字段内单击时，结果消失。

在输入字段中单击鼠标事件后，我希望此结果保持打开状态。为此，我添加了一个点击事件，但它不起作用。

请查看代码并建议任何可能的方法来做到这一点。

```
<script type="text/javascript">
    function showResult(str) {
        if (str.length == 0) {
            document.getElementById("search-result").innerHTML = "";
            document.getElementById("search-result").style.border = "0px";
            return;
        }
        if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        }
        else { // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("search-result").innerHTML = xmlhttp.responseText;
                document.getElementById("search-result").style.border = "1px solid #A5ACB2";
                document.getElementById("search-result").style.display = "block";
                document.getElementById("search-input").onmouseover = function() {
                    show_box()
                };
                document.getElementById("search-input").onclick = function() {
                    show_box()
                };
            }
        }
        xmlhttp.open("GET", "instant-search.php?keyword=" + str, true);
        xmlhttp.send();
    }

    function close_box() {
        fadeOut();
        document.getElementById("search-result").style.display = "none";

    }

    function show_box() {
        setOpacity(0);
        document.getElementById("search-result").style.display = "block";
        fadeIn();
    }
    document.onclick = function() {
        close_box()
    };

    function setOpacity(value) {
        document.getElementById("search-result").style.opacity = value / 10;
        document.getElementById("search-result").style.filter = 'alpha(opacity=' + value * 10 + ')';
    }

    function fadeIn() {
        for (var i = 20; i <= 100; i++)
        setTimeout('setOpacity(' + (i / 5) + ')', 5 * i);
    }

    function fadeOut() {
        for (var i = 20; i <= 100; i++)
        setTimeout('setOpacity(' + (5 - i / 5) + ')', 5 * i);
    }
</script> 
```

HTML 代码

```
<input name="keyword" type="text" size="50" id="search-input" onkeydown="showResult(this.value)"    autocomplete="off" />
<div id="search-result"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:28:38.333

试试这个？

`<input name="keyword" type="text" size="50" id="search-input" onclick="showResult(this.value)" autocomplete="off" />`

或测试 onclick 是否有效

```
<input name="keyword" type="text" size="50" id="search-input" onclick="alert('replace this with your function you want to call');"    autocomplete="off" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:29:43.303

我非常喜欢 jQuery，以至于我忘记了 IE 是有区别的。

```
if(!e) {
  e = window.event;
}

if(e.stopPropagation && e.preventDefault) {
  e.stopPropagation();
  e.preventDefault();
} else {
  e.cancelBubble = true;
  e.returnValue = false;
} 
```

# xml - Visual Basic 中的 domdocument 问题

> ID：11791519
> 
> 赞同：0
> 
> 时间：2012-08-03T07:51:28.087
> 
> 标签：xml, visual-studio-2010, vba, domdocument, ixmldomdocument

我正在考虑在 Visual Basic 中处理 xml 文件。当我使用 DOMDOCUMENT visual basic 尝试它时显​​示错误。它无法识别 domdocument 是什么。我是否必须调用任何库才能使其正常工作。看看我的代码

```
Attribute VB_Name = "Module1"
Function getDistance(Origin As String, Destination As String) As Double
    Dim HttpReq As Object
    Dim myDomDoc As DOMDocument60
    Dim distanceNode As IXMLDOMNode
    Set HttpReq = CreateObject("MSXML2.XMLHTTP")
    HttpReq.Open "GET", "http://maps.googleapis.com/maps/api/distancematrix/xml?origins=" & Origin & "&destinations=" & Destination & "&sensor=false", False
    HttpReq.send
    MsgBox HttpReq.responseText
    Set myDomDoc = New DOMDocument60
    myDomDoc.LoadXML HttpReq.responseText
    Set distanceNode = myDomDoc.SelectSingleNode("/DistanceMatrixResponse/row/element/distance/value")
    getDistance = distanceNode.Text / 1000
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:53:12.310

项目参考：

```
System.XML 
```

添加`Imports System.Xml`到您的进口清单

创建一个类似于以下内容的变量：

```
Dim MyXMLDoc As New XmlDocument 
```

要加载文档，请使用：

```
 MyXMLDoc.Load("Document path here") 
```

要读取与此类似的节点，应该可以：

```
Dim Items as Xml.XmlNodeList = MyXMLDoc.SelectNodes("ParentNode/ChildNodes")
Dim Item as Xml.XmlNode
Try
  For Each Item in Items
    Dim randomstring As String = Item.GetAttributes.GetNamedItem("ItemName").value
  Next
Catch ex As Exception
End Try 
```

ETC...

希望这有点用

# c# - 如何获取Datagrid行索引以获取上一行的单元格值

> ID：11791524
> 
> 赞同：0
> 
> 时间：2012-08-03T07:51:47.863
> 
> 标签：c#, asp.net, datagrid

如果前一行的特定单元格的值发生变化，我想更改一行的颜色。我有一个绑定数据集数据的 Datagrid。例如。

编号 质量 价格 美分 MM 尺寸

* * *

1 AQ 78000 0.001 0.70

* * *

2 AQ 78000 0.001 0.75

* * *

3 AQ 76000 0.011 0.76

* * *

4 AQ 76000 0.012 0.77

* * *

*如果Price*的值发生变化，我想更改下一行的颜色。我无法在 Datagrid 中获取 rowindex。我尝试使用`ItemBound`事件如何更改与其先前值相比的行颜色。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:19:26.827

您可以访问 RowDataBound 事件中的行。

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
               // do stuff
        }
    } 
```

# c - 哪种方法快，比较两个数字字符串或将它们转换为数字字符串然后比较

> ID：11791526
> 
> 赞同：0
> 
> 时间：2012-08-03T07:52:11.643
> 
> 标签：c

我有一个简单的 C 代码需要与数字进行比较。但是数字是字符数组。哪种方法可以快速比较这些数字 1) 使用 strcmp 函数与数字数组进行比较。2）使用 atoi 函数将每个数字字符串转换回数字，然后比较两者。

最后，我必须将这些数字放回文本文件中。

```
int main(int argc, char* argv[]){
char nubmer1[] = "12823423";
char number2[] = "12453453";

//compare logic here. and need help with this.

//print to .txt file logic here. i have this with me.
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T07:57:51.720

如果通过“比较”您*只*需要知道它们是否不相等，strcmp 是最快的，因为将它们转换为整数将包括扫描字符串并在进行比较之前进行一些乘法运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:03:54.557

但这不会是正确的。如果你有前导0怎么办？strcmp 不会匹配它，但转换为数字会。

在决定之前，您应该考虑这是否重要。如果数字始终保证为纯整数，则去除前导零然后 strcmp 将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:49:05.557

首先，您需要有一个统一的、预定义的数字表示格式。这简化了以下逻辑。

您可以检查两个数字是否*相等*，建议使用 strncmp() == 0。（但出于安全原因，请避免使用 strcmp）。

如果要检查一个数字是大于还是小于另一个数字： 1\. 首先检查它们是正数还是负数。2.如果条件1为真，检查字符串长度。长度越大的显然越大。否则检查具有 -ve 符号的哪个小于正数或无符号数。3\. 如果两个字符串的长度相同，则逐字节比较，找出哪个更大或更小。注意当比较负数和正数时，逻辑是不同的。-2<-1，但 +2>+1

您可以根据您的设计在上述给定逻辑中进一步优化。

您不需要将它们转换为整数以进行 >、<、= 等操作，除非您正在处理非常大的数字并且必须进行一些算术计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:02:27.677

strcmp 将检查两个数字是否相等。如果两个数字的长度不相等，它不会检查大于或小于的情况。所以首先使用 strlen 进行检查，如果它们的长度相等，则使用 strcmp 进行检查。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-03T08:18:12.470

我认为您可以对此进行实验，编写一个测试程序，这对您来说是件好事。

# android - 无法在 android 模拟器中加载 func glGetActiveUniform

> ID：11791529
> 
> 赞同：0
> 
> 时间：2012-08-03T07:52:26.807
> 
> 标签：android

我 Geeta gond，我在午餐项目时遇到问题，然后模拟器启动但在完成错误发生之前。“无法加载 func glGetActiveUniform 无法加载 func glGetAttachedShaders 无法加载 func glGetAttribLocation 无法加载 func glGetProgramiv 无法加载 func glGetProgramInfoLog 无法加载 func glGetShaderiv 无法加载 func glGetShaderInfoLog 无法加载 func glGetShaderSource 无法加载 func glGetUniformfv 无法加载 func glGetUniformiv 无法加载 func glGetUniformLocation 无法加载 func glShaderSource 无法加载 func glStencilMaskSeparate 无法加载 func glBlendEquationSeparate”

就像这些类型的错误即将来临，我不知道为什么。

请就此向我提出建议。

“谢谢”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:36:14.023

当我在带有 Q33 express 芯片组的盒子上安装 Intel 最新的图形驱动程序时遇到了这个问题。该驱动程序支持具有 OpenGL 2 支持的更高芯片组，但由于 Q33 不支持 OpenGL 2，我最终不得不恢复到更早的驱动程序以消除该错误。

ARM 的 OpenGL ES 2.0 仿真器通过将这些指令转换为 OpenGL 2.0 来工作，然后再将它们传递给图形适配器。我假设 AVD（4.0.3 及更高版本）上的 GPU 仿真以相同的原理工作。因此，我得出结论，如果盒子的显卡芯片组和驱动程序不支持 OpenGL 2，则 OpenGL ES 2.0 代码将无法在 AVD 上运行。

# mysql - MYSQL 错误 1414 - 错误没有意义

> ID：11791530
> 
> 赞同：0
> 
> 时间：2012-08-03T07:52:29.960
> 
> 标签：mysql, asp.net-mvc-3

这是我的存储过程，它在我的本地机器上运行良好，但在 PRODUCTION 上，它给了我上述错误：它抱怨 OUT 参数，最后一个：

```
-- --------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- --------------------------------------------------------------------------------
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `insert_projects`(
        IN userName varchar(20),
        IN projectName text,
        IN projectDescription text,
        IN projectCurrency text,
        IN projectBudget1 double,
        IN projectBudget2 double,
        IN projectEndDate DATETIME,
        IN expectedDelivDate DATETIME,
        IN projectMessageForBidder text,
        OUT projectCode bigint)
BEGIN

DECLARE 
    l_project_code bigint;

        insert into projects
        (PROJECT_CODE,
         SR_USER_NAME ,
         PROJECT_NAME,
         PROJECT_DESCRIPTION,
         PROJECT_CURRENCY,
         PROJECT_BUDGET1 ,
         PROJECT_BUDGET2 ,
         PROJECT_STATUS,
         PROJECT_END_DATE,
         PROJECT_PAID,
         EXPECTED_DELIV_DATE,
         PROJECT_MESSAGE_FOR_BIDDER,
         PROJECT_CREATION_DATE,
         PROJECT_UPDATE_DATE)
        values
        (
         0,
         userName,
         projectName,
         projectDescription,
         projectCurrency,
         projectBudget1,
         projectBudget2,
         'Active',
         projectEndDate,
         null,
         expectedDelivDate,
         projectMessageForBidder,
         NOW(),
         NOW());

         SELECT LAST_INSERT_ID() into l_project_code;

         SET projectCode = l_project_code;
END 
```

下面是我的 C# 代码，用于设置参数：

```
 MySqlCommand command = new MySqlCommand("insert_projects", dbcontroller.conn);
                command.CommandType = System.Data.CommandType.StoredProcedure;

                // Add parameters for the insert_projects STORED PROC
                command.Parameters.Add(new MySqlParameter("userName", SessionBag.Current.UserName));
                command.Parameters["@userName"].Direction = System.Data.ParameterDirection.Input;

                command.Parameters.Add(new MySqlParameter("projectCode", MySqlDbType.Int64));
                command.Parameters["@projectCode"].Direction = System.Data.ParameterDirection.Output;

                command.Parameters.Add(new MySqlParameter("projectName", model.projectName));
                command.Parameters.Add(new MySqlParameter("projectDescription", model.projectDescription));
                command.Parameters.Add(new MySqlParameter("projectCurrency", model.projectCurrency));
                command.Parameters.Add(new MySqlParameter("projectBudget1", model.projectBudget1));
                command.Parameters.Add(new MySqlParameter("projectBudget2", model.projectBudget2));
                command.Parameters.Add(new MySqlParameter("projectEndDate", model.projectEndDate));
                command.Parameters.Add(new MySqlParameter("expectedDelivDate", model.expectedDelivDate));
                command.Parameters.Add(new MySqlParameter("projectMessageForBidder", model.projectMessageForBidder));

                try
                {
                    command.ExecuteNonQuery();

                    TempData["projectCode"] = (Int64)command.Parameters["?projectCode"].Value;
                    TempData["frompage"] = "AddProject";

                    dbcontroller.conn.Close();
                    return RedirectToAction("MyProjectsHeaderSR", "Projects");
                } 
```

为什么抱怨这个？我的本地机器工作正常。表“项目”包含一个名为 project_code 的字段，该字段设置为 BIGINT 自动增量......其余字段是普通数据类型。

好的，我创建了一个变量..并将其传递给..同样的错误

```
 if (dbcontroller.DBConnection())
            {
                Int64 projectCode = 0;

                MySqlCommand command = new MySqlCommand("insert_projects", dbcontroller.conn);
                command.CommandType = System.Data.CommandType.StoredProcedure;

                // Add parameters for the insert_projects STORED PROC
                command.Parameters.Add(new MySqlParameter("userName", SessionBag.Current.UserName));
                command.Parameters["@userName"].Direction = System.Data.ParameterDirection.Input;

                command.Parameters.Add(new MySqlParameter("projectCode", projectCode));
                command.Parameters["@projectCode"].Direction = System.Data.ParameterDirection.Output; 
```

它仍然不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:36:50.607

您描述的错误是旧版本 MySQL 中的错误的结果，已[在 MySQL 5.5.3 中解决](http://dev.mysql.com/doc/refman/5.5/en/news-5-5-3.html)。很可能您的本地计算机正在运行已修复错误的 MySQL 版本，而生产服务器正在运行旧版本。

尽管最好的解决方案可能是升级服务器，但在此之前作为一种**解决方法**，您可以更改过程以简单地选择`LAST_INSERT_ID()`（不是进入变量，而是进入结果集），然后将结果处理到您的变量中。

`INOUT`顺便说一句，在使用参数时可能会出现类似的情况。尽管您正在使用`OUT`参数（因此以下内容不适用于您的情况），但当`INOUT`参数但未提供要填充的变量时会出现这种情况，以下内容同样适用。

该行：

```
command.Parameters.Add(new MySqlParameter("projectCode", MySqlDbType.Int64)); 
```

...正在为命令对象提供一个命名参数和一个类型，但没有给它任何要填充的东西。如果您使用的是`INOUT`参数，则需要提供一个空变量并将其传入；它会给SP一些输出。

# c# - 应用程序/用户权限问题

> ID：11791532
> 
> 赞同：0
> 
> 时间：2012-08-03T07:52:32.307
> 
> 标签：c#, privileges, rights

我使用 C# 构建了一个应用程序，它访问注册表和安装文件夹以获取读/写信息。具有有限权限的普通用户在访问/写入信息（在注册表或安装文件夹中）时遇到错误。

有没有一种方法可以让所有类型的用户都能顺利运行该应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:59:04.240

这是可能的，尽管它并不完全简单。您将不得不冒充另一个用户（反过来，他必须拥有所有必需的权限）。

检查此问题以获取详细信息：[Windows Impersonation from C#](https://stackoverflow.com/questions/559719/windows-impersonation-from-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:59:44.783

有两种方法，简单的和复杂的。首先 - 按用户而不是按计算机安装程序。第二 - 编写将在特权用户下运行的服务，并为您的应用程序执行必要的程序（访问/写入信息）。

# php - 维护 php 中页面之间的会话？

> ID：11791534
> 
> 赞同：3
> 
> 时间：2012-08-03T07:52:43.543
> 
> 标签：php, mysql, forms, session

我对 PHP 很陌生。

我想在页面之间传输数据。

在我的要求中，我首先有主页，因为我有 3 个字段：*name*，*address*，*pin*然后*submit button*。

当我输入上述字段然后单击提交时，它移动到`page2.php`，它有表单数据。

我已将第一个表单数据转移到第二页。现在在第二页我有一个提交按钮。当我单击该按钮时，数据将提交到 MySQL 数据库。

我的问题是，如何将首页值移动到`insertdata.php`页面并提交数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T08:03:01.913

有两种方法可以做到这一点

1.  会话
2.  隐藏的输入字段

# 会话

要将数据从一个页面传递到另一个页面，您首先需要调用`session_start()`所有将使用`$_SESSION`超全局变量的页面。然后你可以通过使用将你的值存储在会话中

```
$_SESSION['name'] = $_POST['name'];
$_SESSION['address'] = $_POST['address'];
$_SESSION['pin'] = $_POST['pin']; 
```

要在第二页中使用这些值，只需通过它们的名称来调用它们。前任：

```
$name = $_SESSION['name']; // will contain the value entered in first page 
```

==================================================== =================================

# 隐藏的输入字段

这是一种更乏味的方法，但它仍然可以完成这项工作。该过程涉及将需要传递到不同页面的数据存储在隐藏字段中，然后通过`$_POST`或`$_GET`超全局访问它们。

**page1.php**（发布到 page2.php）

```
<input type="text" value="Page 1 content" name="content" />
<input type="text" value="Page 1 body" name="body" /> 
```

**page2.php**（发布到 page3.php）

```
<input type="hidden" value="<?php echo $_POST['content']; ?>" name="content" />
<input type="hidden" value="<?php echo $_POST['body']; ?>" name="body" />
<input type="text" value="Page 2 content" name="content2" />
<input type="text" value="Page 2 body" name="body2" /> 
```

**page3.php**

```
echo $_POST['content']; // prints "Page 1 content"
echo $_POST['body']; // prints "Page 1 body"
echo $_POST['content2']; // prints "Page 2 content"
echo $_POST['body2']; // prints "Page 2 body" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:57:30.557

只需在您的第一页中`<?php session_start(); ?>` 使用以下代码，并在您的第二页中使用以下代码

```
<?php
$name = $_SESSION['name'];
$address = $_SESSION['address'];
$pin = $_SESSION['pin'];
echo $name."<br/>";
echo $address."<br/>";
echo $pin."<br/>";
?> 
```

或者您可以使用`post`或`get`方法如下

对于 GET 方法

```
<?php
$name = $_GET['name'];
$address = $_GET['address'];
$pin = $_GET['pin'];
echo $name."<br/>";
echo $address."<br/>";
echo $pin."<br/>";
?> 
```

对于 POST 方法

```
 <?php
    $name = $_POST['name'];
    $address = $_POST['address'];
    $pin = $_POST['pin'];
    echo $name."<br/>";
    echo $address."<br/>";
    echo $pin."<br/>";
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:58:04.667

就像`REQUEST`，PHP 为会话维护一个映射，您可以在其中转储这些值并跨页面转储。例如

```
$_SESSION['name']='foo'; 
```

但是要使用会话的页面，需要使用 方法启动会话`session_start();`。但是这个方法调用应该是你 php.ini 中的第一行。

[http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:58:21.873

要在页面更改之间存储数据，您可以使用超全局 $_SESSION 数组。

*例子*

**第 1 页**

```
$_SESSION['name'] = "John"; 
```

**第2页**

```
echo $_SESSION['name']; 
```

**输出**

```
John 
```

确保将`session_start()`需要使用会话的每个页面放在顶部。

[单击此处了解有关会话的更多信息。](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:01:39.277

基本上，当您在第一页中提交数据时，将它们保存在会话中，然后重定向到第二页。

在第二页中加载它们。

第 1 页：

```
<?php session_start(); 

     $_SESSION["var_name"]  = $some_value;

?> 
```

第2页：

```
<?php session_start(); 

     $my_var = $isset($_SESSION["var_name"])?$_SESSION["var_name"]:null;

?> 
```

您测试 my_var 的值，如果它为空，则重定向到第一页或显示错误消息。

会话教程 [http://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

Mysql插入教程 [http://www.tizag.com/mysqlTutorial/mysqlinsert.php](http://www.tizag.com/mysqlTutorial/mysqlinsert.php)

POST/GET 教程 [http://www.tizag.com/phpT/postget.php](http://www.tizag.com/phpT/postget.php)

# javascript - $(window).resize()：之前

> ID：11791537
> 
> 赞同：4
> 
> 时间：2012-08-03T07:52:51.613
> 
> 标签：javascript, jquery, resize

每次触发 resize()**之前是否有可能获取浏览器的宽度/高度？**

```
$(window).resize(function() {

}); 
```

这是因为我正在计算浏览器调整大小（）之前/之后的差异。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T07:54:56.450

您必须存储以前的值，有点像这样

```
var prevHeight = 0;
var prevWidth = 0;

$(document).ready(function() {
    prevHeight = $(window).height();
    prevWidth = $(window).width();
});

$(window).resize(function() {
    var currentHeight = $(window).height();
    var currentWidth = $(window).width();

    //do difference stuff

    prevHeight = currentHeight;
    prevWidth = currentWidth;
}); 
```

# mysql - 形成 SQL 查询

> ID：11791538
> 
> 赞同：0
> 
> 时间：2012-08-03T07:52:55.713
> 
> 标签：mysql, sql

在我的 android 应用程序中，我从 Google Place API 获取附近餐馆的列表。

但不幸的是，这个列表没有给出餐厅的菜单。

我有`T_RESTAURANT`和`T_MENU`桌子。

比方说，我在 API 返回的列表中有 4 家餐厅，那么我应该如何进行查询以提取数据。

如果我做： `SELECT name, votes, review FROM T_MENU WHERE restaurant_name = REST_NAME_1;`

我必须为每个餐厅触发这个查询，即`4 times in this case.`

谁能给我一个好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:56:22.000

```
SELECT name,
       votes,
       review
FROM   T_MENU
WHERE  restaurant_name 
     IN ( <four restaurant names comma separated> ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:04:11.267

您可以使用“IN”关键字代替“=”。A 还建议使用餐厅 ID 而不是名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:10:33.993

试试这个：

```
select T.name, T.votes, T.review ,M.<menu_items> 
from  T_RESTAURANT R join T_MENU M
where R.restaurant_name=T.restaurant_name 
```

# c# - 引用类型与可空类型 ToString()

> ID：11791542
> 
> 赞同：21
> 
> 时间：2012-08-03T07:53:17.410
> 
> 标签：c#, null, nullable, value-type, reference-type

有人可以解释一下为什么调用`ToString()`空引用类型会导致异常（在我看来这很有意义，你不能什么都不调用方法！）但是调用`ToString()`空`Nullable(Of T)`返回`String.Empty`？这让我很惊讶，因为我认为这种行为在不同类型中是一致的。

```
Nullable<Guid> value = null;
Stock stock = null;
string result = value.ToString(); //Returns empty string
string result1 = stock.ToString(); //Causes a NullReferenceException 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T07:59:00.183

`Nullable<T>`实际上是 a `struct`，它具有一些编译器支持和实现支持以表现得像 a`null`而实际上不是`null`.

您看到的是实现之间的冲突，允许您像对待`null`任何其他引用类型一样自然地将其视为 a，但允许发生方法调用，因为`Nullable<T>`它实际上不是 null，它内部的值是 null。

*从视觉*上看，它看起来不应该工作，这仅仅是因为你*看不到*后台为你做了什么。

当您在空引用类型上调用扩展方法时，可以看到其他此类视觉技巧......该调用有效（违背视觉预期），因为在引擎盖下它被解析为静态方法调用，将您的空实例作为参数传递。

[Nullable<T> 类型如何在幕后工作？](https://stackoverflow.com/questions/5602773/how-does-a-nullablet-type-work-behind-the-scenes)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T07:55:18.523

Nullable 是一个值类型，对它的赋值`null`导致它被初始化为`Value=null`and `HasValue=false`。

此外， Nullable.ToString() 实现如下：

```
public override string ToString()
{
    if (!this.HasValue)
    {
        return "";
    }
    return this.value.ToString();
} 
```

所以你所看到的是预期的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T07:55:27.117

可空类型有点棘手。当您将其设置为`null`它实际上不是`null`因为它不是引用类型（它是值类型）。当你用它初始化这样的变量时，`null`它会创建新的结构实例，其中`HasValue`属性是`false`并且它`Value`是`null`，所以当你调用`ToString`方法时，它在结构实例上运行良好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T11:26:33.167

调用引发的异常`default(object).ToString()`是`NullReferenceException`有原因的，它在空引用上调用方法。`default(int?)`另一方面，不是空引用，因为它不是引用；它是一个值类型，其值*等同*于 null。

最大的实际问题是，如果这样做了，那么以下操作将失败：

```
default(int?).HasValue // should return false, or throw an exception? 
```

它还会破坏我们混合可空值和不可空值的能力：

```
((int?)null).Equals(1) // should return false, or throw an exception? 
```

以下变得完全无用：

```
default(int?).GetValueOrDefault(-1); 
```

我们可以摆脱`HasValue`并强制与 null 进行比较，但是如果在某些情况下与 null 比较时，可以为 null 的值类型的相等覆盖可以返回 true 怎么办。这可能不是一个好主意，但它可以做到，并且语言必须应对。

让我们回想一下为什么要引入可空类型。引用类型可以为 null 的可能性是引用类型概念中固有的，除非努力强制执行不可为空性：引用类型是引用某事物的类型，这意味着一个人不引用任何事物的可能性，这我们称之为*null*。

虽然在许多情况下很麻烦，但我们可以在各种情况下使用它，例如表示“未知值”、“没有有效值”等（例如，我们可以将它用于*null*在数据库中的含义） .

在这一点上，我们已经在给定的上下文中赋予了*null*一个含义，而不仅仅是给定的引用不引用任何对象的简单事实。

由于这很有用，因此我们可能希望将`int`or设置`DateTime`为 null，但我们不能，因为它们不是引用其他内容的类型，因此不能处于不引用任何内容的状态作为哺乳动物，我可能会失去我的羽毛。

2.0 引入的可空类型通过与引用类型不同的机制为我们提供了一种可以具有语义*null的值类型。*如果它不存在，您可以自己编写大部分代码，但特殊的装箱和升级规则允许更明智的装箱和操作员使用。

好的。现在让我们首先考虑一下为什么`NullReferenceExceptions`会发生。两个是不可避免的，一个是 C# 中的设计决定（并不适用于所有 .NET）。

1.  您尝试调用虚拟方法或属性，或访问空引用上的字段。这必须失败，因为没有办法查找应该调用什么覆盖，也没有这样的字段。
2.  您在空引用上调用非虚拟方法或属性，该引用又调用虚拟方法或属性，或访问字段。这显然是第一点的变体，但我们接下来要进行的设计决策的优点是保证它在一开始就失败，而不是部分完成（这可能会令人困惑并有长期的副作用） .
3.  您在不调用虚拟方法或属性的空引用上调用非虚拟方法或属性，或访问字段。没有内在的理由不应该允许这样做，并且某些语言允许这样做，但是在 C# 中，他们决定使用`callvirt`而不是`call`强制 a`NullReferenceException`以保持一致性（不能说我同意，但你去吧）。

这些情况都不适用于可空值类型。不可能将可空值类型放入无法知道要访问哪个字段或方法覆盖的条件中。just的整个概念在`NullReferenceException`这里没有意义。

总之，不抛出 a`NullReferenceException` **与**其他类型一致——当且仅当使用空引用时，通过它的类型。

请注意，在调用可空类型为 null 的情况下，它会抛出 ，`GetType()`因为`GetType()`它不是虚拟的，并且当调用值类型时，总是有一个隐含的装箱。其他值类型也是如此，因此：

```
(1).GetType() 
```

被视为：

```
((object)1).GetType() 
```

但在可空类型的情况下，装箱会将带有 false 的类型`HasValue`转换为空，因此：

```
default(int?).GetType() 
```

被视为：

```
((object)default(int?)).GetType() 
```

这导致在`GetType()`一个空对象上被调用，因此抛出。

这顺便让我们明白了为什么不伪装`NullReferenceType`是更明智的设计决策——需要这种行为的人总是可以装箱。如果您希望它通过然后使用`((object)myNullableValue).GetString()`，那么语言无需将其视为特殊情况来强制异常。

**编辑**

哦，我忘了说背后的机制`NullReferenceException`。

测试`NullReferenceException`非常便宜，因为它通常只是忽略问题，然后在发生异常时从操作系统捕获异常。换句话说，**没有 test**。

请参阅[引发/生成空引用异常背后的 CLR 实现是什么？](https://stackoverflow.com/questions/11239410/what-is-the-clr-implementation-behind-raising-generating-a-null-reference-except/11241755#11241755)并注意这些都不适用于可空值类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T07:58:09.003

如果您调查`Nullable<>`定义，则会有一个覆盖 ToString 定义。在此函数中，ToString 被覆盖以返回 String.Empty。

```
 // Summary:
    //     Returns the text representation of the value of the current System.Nullable<T>
    //     object.
    //
    // Returns:
    //     The text representation of the value of the current System.Nullable<T> object
    //     if the System.Nullable<T>.HasValue property is true, or an empty string ("")
    //     if the System.Nullable<T>.HasValue property is false.
    public override string ToString(); 
```

另一方面， Stock 是一个自定义类，我假设 ToString 没有被覆盖。因此它返回 NullReferenceException 因为它使用默认行为。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T08:04:32.287

根据 MSDN 备注

> [Guid.ToSTring()](http://msdn.microsoft.com/en-us/library/97af8hh4.aspx)方法 根据提供的格式说明符，返回此 Guid 实例值的字符串表示形式。

根据 MSDN Remarks on [Nullable](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)

> 如果一个类型可以被赋值或可以被赋值为 null，则称该类型可空，这意味着该类型没有任何值。因此，可空类型可以表示一个值，或者不存在值。例如，String 等引用类型可以为空，而 Int32 等值类型则不能。值类型不能为空，因为它有足够的能力只表达适合该类型的值；它没有表达 null 值所需的额外容量。

# javascript - 在javascript中引用正则表达式文字？为什么不？

> ID：11791546
> 
> 赞同：1
> 
> 时间：2012-08-03T07:53:34.070
> 
> 标签：javascript, regex, string-literals

在[这个问题](https://stackoverflow.com/a/6751356/385571)的答案以及许多其他地方，我在 javascript 中看到了未引用的字符串。

例如：

```
var re = /\[media id="?(\d+)"?\]/gi; 
```

为什么不应该是：

```
var re = '/\[media id="?(\d+)"?\]/gi'; 
```

是对正则表达式的某种特殊处理，还是可以这样声明任何字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:55:37.943

```
var re = /\[media id="?(\d+)"?\]/gi; 
```

是正则表达式文字，而不是字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T07:56:04.243

它仅适用于正则表达式，不适用于字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T07:57:19.177

因为，在 JavaScript 中，Regex 是一种内置类型，而不是传递给某些解析器的字符串模式，例如在 C# 或 Java 中。

这意味着当您编写 时`var regex = /pattern/`，JavaScript 会自动将该文字用作正则表达式模式，从而生成该类型`regex`的对象。`RegExp`

请参阅：[https ://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T07:58:37.610

> 是对正则表达式的某种特殊处理吗？

是的，正则表达式得到特殊处理。正如[MDN 指出的那样](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Regular_Expressions)，有一个内置的 JavaScript 正则表达式类型，它有自己的文字语法。

> 或者可以这样声明任何字符串吗？

不，因为正则表达式是对象而不是字符串，所以如果你尝试用正则表达式文字编写字符串，你会得到一个正则表达式对象，而不是字符串。

# sharepoint - SharePoint 2010 具有多个位置的查找字段

> ID：11791553
> 
> 赞同：1
> 
> 时间：2012-08-03T07:53:53.040
> 
> 标签：sharepoint, custom-field-type

伙计们！

在我最近的项目中，我遇到了需要为 Share Point 2010 开发“棘手的”自定义字段类型 (CFT) 的情况。该 CFT 必须表现得像一个开箱即用的查找字段，但它必须指出到几个不同的位置。例如，Lookup 字段可以指向 web A、web A 中的列表 B 以及列表 B 中的某个字段——让我们将其称为位置，但我的字段必须能够指向多个位置同时。除了这个主要要求之外，我的 CFT 必须是可排序的、可过滤的，并且表示能够使用 CAML 按 EQUAL 进行搜索，例如查找字段。有人面临这样的任务吗？SharePoint 高手，请指导我正确的路径！

# c# - c# 初始化

> ID：11791557
> 
> 赞同：4
> 
> 时间：2012-08-03T07:54:18.977
> 
> 标签：c#, initialization

是否有必要初始化自动属性？

```
public string thingy { get; set; } 
```

我问的原因是因为我刚刚遇到一堆代码，它在哪里使用，默认值 null 是一个可接受的值。

编译器不会抱怨。

一般来说，如果编译器将默认数字为零并且对象引用仍然为空，为什么编译器会强制执行初始化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T08:05:08.443

`default(T)`如果你想用特殊值初始化 autopropeties，你可以使用支持字段：

```
private string _thingy = "value";
public string Thingy
{
    get { return _thingy; }
    set { _thingy = value; }
} 
```

或在构造函数中设置值

```
public class MyClass
{
    public string Thingy{get;set;}
    public MyClass()
    {
        Thingy = "value";
    }
} 
```

或以任何方法设置

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:17:53.327

编译器强制对局部变量进行初始化，而不是对字段或属性进行初始化。C# 要求明确分配局部变量，因为使用未分配的局部变量是程序错误的常见来源。这并不是因为未分配的变量可能包含垃圾——CLR 保证它不会——而是因为程序员可能在代码中犯了错误。

编译器不会以相同的方式处理字段或属性，因为不可能跨可以按任何顺序调用的多个方法进行必要的流分析。

# objective-c - __VA_ARGS__ 宏扩展

> ID：11791559
> 
> 赞同：4
> 
> 时间：2012-08-03T07:54:21.510
> 
> 标签：objective-c, macros, variadic-functions

我试图让我的宏像`NSLog()`接受可变参数一样工作。下面的代码会导致解析问题。

定义这个的正确方法是什么？

```
#define TF_CHECKPOINT(f, ...) \
do { \
NSString *s = [[NSString alloc] initWithFormat:f arguments:__VA_ARGS__] autorelease]; \
[TestFlight passCheckpoint:[NSString stringWithFormat:@"%@: %@", [self class], s]]; \
} while (0) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T08:12:14.257

您忘记了`autorelease`消息的左括号。

此外，`-[NSString initWithFormat:arguments:]`期望一个`va_list`参数，而`__VA_ARGS__`被所有传递的参数替换。在这里，您需要使用`-[NSString initWithFormat:]`or `+[NSString stringWithFormat:]`。

最后，您可以`__VA_ARGS__`使用`##`. 通过这样做，当没有参数时，前面的逗号被删除。

试试这个：

```
#define TF_CHECKPOINT(f, ...) \
do { \
NSString *s = [NSString stringWithFormat:(f), ##__VA_ARGS__]; \
[TestFlight passCheckpoint:[NSString stringWithFormat:@"%@: %@", [self class], s]]; \
} while (0) 
```

# popup - “喜欢”后弹出窗口中的内容错误

> ID：11791564
> 
> 赞同：0
> 
> 时间：2012-08-03T07:54:25.340
> 
> 标签：popup, window, facebook-like

我在我的网站上添加了like facebook 按钮，它运行良好，只是弹出窗口没有显示正确的内容。

简单示例：在我网站的主页中，我将标题标签设置为它的名称，假设它被称为“宇宙”。然后我转到另一个标题为“太阳很热”的页面。如果我在此页面上单击“喜欢它”，弹出内容会显示“宇宙”。这是错误的，我想要“太阳很热”。

如何在弹出窗口上设置正确的内容？“喜欢”按钮是否带有标题标签或其他什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:54:49.570

点赞按钮是指主页的网址，而不是您实际所在的页面吗？点赞按钮现在的工作方式是它们从点赞按钮的 url 中提取元 Open Graph 标签，因此按钮调用的页面上的元标签决定了内容。如果您将其作为具有正确元数据的当前页面的 url，则应该可以修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:34:27.663

[通过Facebook 的调试工具](https://developers.facebook.com/tools/debug)运行您喜欢的按钮指向的页面 这将显示 Facebook 为该 URL 检测到的元数据，和/或如果您最近更新了站点上的元标记，则清除缓存

# python - 排除以特定字符开头的列表元素的最pythonic方法是什么？

> ID：11791568
> 
> 赞同：9
> 
> 时间：2012-08-03T07:54:51.667
> 
> 标签：python, coding-style

我有一个字符串列表。我想获得一个新列表，其中排除以 '#' 开头的元素，同时保留顺序。最pythonic的方法是什么？（最好不使用循环？）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-03T07:56:40.217

```
[x for x in my_list if not x.startswith('#')] 
```

这是最 Pythonic 的方式。这样做的任何方式最终都会在 Python 或 C 中使用循环。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T08:01:47.727

不使用循环？有`filter`内置：

```
filter(lambda s: not s.startswith('#'), somestrings) 
```

请注意，在 Python 3 中，它返回可迭代的，而不是列表，因此您可能必须用`list()`.

# php - 有没有办法自动引用通过 Zend 中的模型/对象的所有输入？

> ID：11791569
> 
> 赞同：-3
> 
> 时间：2012-08-03T07:54:54.120
> 
> 标签：php, security, zend-framework

.. 还是我必须遍历我的每个模型/对象并在每个数据输入上使用 ->quote？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:29:40.503

正如您可能从评论中了解到的那样，这并不是一个绝妙的主意，但是如果您真的想我可以用 func_get_args 做一些事情（http://php.net/manual/en/function.func- get-args.php）并覆盖原始变量，但这不是一个漂亮的黑客。

您也可以使用 $_POST 和 $_GET 做一些技巧，但总而言之，这可能不是一个好的解决方案。

# c# - 长期误判

> ID：11791571
> 
> 赞同：3
> 
> 时间：2012-08-03T07:54:56.910
> 
> 标签：c#

以下代码中的 long 数据类型有什么问题，它返回 -666167296，time=42 和 TimeStyle.Days？

```
 private long ConvertToMilliSeconds(int time, TimeStyle style)
    {
        long t = 0;
        switch (style)
        {
            case TimeStyle.Millisecons:
                t = time;
                break;
            case TimeStyle.Seconds:
                t = time * 1000;
                break;
            case TimeStyle.Minutes:
                t = time * 1000 * 60;
                break;
            case TimeStyle.Hours:
                t = time * 1000 * 60 * 60;
                break;
            case TimeStyle.Days:
                t = time * 86400000;
                break;
            default:
                break;
        }

        return t;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T07:57:13.183

`time`是`int`, make it `long`or cast to `long`or`* 86400000L`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T07:59:47.493

当您进行这样的计算时：

```
t = time * 86400000 
```

`t`这是 a的事实`long`是无关紧要的：赋值运算符右侧的算术以 32 位执行，因为`time`和`86400000`都是`int`值。您需要在`long`算术中执行操作以避免溢出。

考虑到`long`毫秒数是合理的，我只想更改`t`为`long`. 如果无法识别枚举值，我也会抛出异常，而不仅仅是返回 0：

```
private static long ConvertToMilliSeconds(long time, TimeStyle style)
{
    switch (style)
    {
        // Note: fixed typo in enum name
        case TimeStyle.Milliseconds: return time;
        case TimeStyle.Seconds:      return time * 1000;
        case TimeStyle.Minutes:      return time * 1000 * 60;
        case TimeStyle.Hours:        return time * 1000 * 60 * 60;
        case TimeStyle.Days:         return time * 86400000;
        default:
            throw new ArgumentOutOfRangeException("style");
    }
} 
```

您可能还想将这些值更改为常量：

```
private const long MillisecondsPerSecond = 1000;
private const long MillisecondsPerMinute = MillisecondsPerSecond * 60;
private const long MillisecondsPerHour = MillisecondsPerMinute * 60;
private const long MillisecondsPerDay = MillisecondsPerHour * 24; 
```

...并在方法中使用它们。

最后，为了避免在错误单位中获得值时可能出现的任何混淆，您可能只想使用`TimeSpan`开头... 如果您仍然发现日期/时间 API 很痛苦，您可能需要查看在我的[野田时间](http://noda-time.googlecode.com)图书馆:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:00:18.203

42 * 86400000 太长了。如果我在visual-studio中输入它，我会得到一个编译器错误：

> 在检查模式下，操作在编译时溢出

# events - Drupal 7 在菜单更新/更改时触发？

> ID：11791573
> 
> 赞同：0
> 
> 时间：2012-08-03T07:55:05.693
> 
> 标签：events, drupal, menu, triggers, hook

`Menu`在 Drupal 7 中，无论何时更改，我都需要进行一些处理。（保存/更新/删除）
我怎样才能得到它？有人可以告诉我`hook`应该触发哪个或地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:59:43.857

不确定，但我认为您可能想知道菜单链接何时更改，而不是整个菜单。但以防万一这里有两个钩子......

以下是菜单修改的钩子：

*   [`hook_menu_insert`](http://api.drupal.org/api/drupal/modules!menu!menu.api.php/function/hook_menu_insert/7)
*   [`hook_menu_update`](http://api.drupal.org/api/drupal/modules!menu!menu.api.php/function/hook_menu_update/7)
*   [`hook_menu_delete`](http://api.drupal.org/api/drupal/modules!menu!menu.api.php/function/hook_menu_delete/7)

以下是菜单链接修改的钩子：

*   [`hook_menu_link_insert`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu_link_insert/7)
*   [`hook_menu_link_update`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu_link_update/7)
*   [`hook_menu_link_delete`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu_link_delete/7)

# android - 如何从列表视图和数据库中删除选中的项目

> ID：11791587
> 
> 赞同：0
> 
> 时间：2012-08-03T07:55:50.327
> 
> 标签：android, android-listview

嗨，我想从列表视图和数据库中删除选中的项目。我正在使用菜单。如果从菜单中选择删除，那么我想从列表视图和数据库中删除选定的项目。如果单击全选菜单我想设置列表项的所有复选框已选中，然后从列表视图中删除所有值并删除数据库中的所有记录。我使用以下代码在列表视图中使用复选框填充数据库中的数据。如果有人知道，请帮助我。

代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.senthistory);               
        lvhistory = (ListView) findViewById(android.R.id.list);     
        PopulateSentList();             
    }

    public void PopulateSentList() {

        String strquery = "SELECT * FROM sent_history";
        Cursor Cursor = (MainscreenActivity.JEEMAAndroSMSDB).rawQuery(
                strquery, null);

        MyAdapter adapter = new MyAdapter(SentHistoryActivity.this, Cursor);
        setListAdapter(adapter);    
        lvhistory.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {
                // TODO Auto-generated method stub
                SQLiteCursor selectedValue = (SQLiteCursor) getListAdapter()
                        .getItem(position);
                String id1 = selectedValue.getString(0);
                System.out.println("DATA-->>>" + id1);
                Intent intent = new Intent(getApplicationContext(),
                        Historydisplay.class);
                intent.putExtra("Id", id1);
                final int result = 1;
                startActivityForResult(intent, result);
            }           
        });
    }

    public void onBackPressed() {
        super.onBackPressed();
        Intent intent = new Intent(SentHistoryActivity.this,
                MainscreenActivity.class);
        startActivity(intent);
        finish();
    }

    private void CreateMenu(Menu menu) {
        menu.setQwertyMode(true);
        MenuItem mnu1 = menu.add(0, 0, 0, "Delete");
        {
            mnu1.setAlphabeticShortcut('D');
        }
        MenuItem mnu2 = menu.add(0, 0, 0, "Select All");
        {
            mnu2.setAlphabeticShortcut('S');
        }
    }

    private boolean MenuChoice(MenuItem item) throws Exception {
        switch (item.getItemId()) {
        case 0:
            int count = (int) getListAdapter().getCount();
            for (int i = 1; i <= count; i++) {
                if (this.lvhistory.isItemChecked(i)) {
                    listItems.remove(i);
                    adapter.notifyDataSetChanged();
                    MainscreenActivity.JEEMAAndroSMSDB.delete(
                            MainscreenActivity.Table_SentHistory, "_id=" +i, null); 
                    finish();
                    Intent intent = new Intent(getApplicationContext(),
                            SentHistoryActivity.class);
                    startActivity(intent);
                }
            }

            return true;
        }
        return false;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        CreateMenu(menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        try {
            return MenuChoice(item);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return false;
    }       

    private class MyAdapter extends ResourceCursorAdapter {

        public MyAdapter(Context context, Cursor cur) {
            super(context, R.layout.dummy, cur);
        }

        @Override
        public View newView(Context context, Cursor cur, ViewGroup parent) {
            LayoutInflater li = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            return li.inflate(R.layout.dummy, parent, false);
        }

        @Override
        public void bindView(View view, Context context, Cursor cur) {
            TextView tvListText = (TextView)view.findViewById(R.id.Mobile);
            final CheckBox chkBox = (CheckBox)view.findViewById(R.id.check);            

            tvListText.setText(cur.getString(cur.getColumnIndex(MainscreenActivity.COL_Mobile)));
            chkBox.setTag(cur.getString(cur.getColumnIndex(MainscreenActivity.COL_Sent_id))); 

            chkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    // TODO Auto-generated method stub
                    Log.v("Checked", chkBox.getTag().toString());                      
                }
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:12:50.380

要删除选中的项目，您可以对 CheckBox 使用 isChecked() 方法。在您的代码中，您可以按以下方式使用。

```
 chkBox.setOnClickListener(new new OnClickListener() {               
            @Override
            public void onClick(View v) { 
                // TODO Auto-generated method stub              
            CheckBox cb = (CheckBox)v;

            if(cb.isChecked() == true)
             { 
                  String getStrinValue = cb.getTExt().toString(); // here you will get the value of selected CheckBox
                     //  And now you have to perform your deletion operation as usual.                
              }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:20:36.930

好的，我将概述如何完成。这就是我为我的应用程序所做的。

首先，您需要为列表项创建一个模型类，该模型类具有维护状态（选中）的属性，然后每当您从数据库中获取项目时，都会创建项目列表，例如 arraylist。

然后，每当检查复选框时，请更改特定列表项目的状态属性。最后，当您从菜单中单击删除时，将分为三个步骤

1.  从arraylist中获取选中的项目
2.  从适配器中删除项目
3.  从数据库中删除项目

我认为这是有道理的

**编辑**

你试过[这个](https://stackoverflow.com/questions/10418764/deleting-checked-listview-items?rq=1)以前的SO问题吗？顺便说一句，这仅有助于从适配器中删除项目。您必须找到一种从数据库中删除项目的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-11T10:28:46.840

我就是这样做的。我发现这是始终匹配正确 ID 的最简单的解决方案。因为适配器和光标将始终具有相同的计数和位置。两者的起始索引均为 0。

这就是我的菜单项的内容。我还添加了一个警报对话框作为安全步骤。

```
 if (mListView.getCount() == 0 || mListView.getCheckedItemCount() == 0) {
        Toast.makeText(this, "Select an item by holding", Toast.LENGTH_SHORT).show();
        return false;
    }
    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
    builder.setMessage("Are you sure you want to delete these items?");
    builder.setCancelable(true);

    builder.setPositiveButton(
        "Yes",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                SparseBooleanArray selection = mListView.getCheckedItemPositions();
                Cursor data = mDBHandler.getAllIDs(); // "SELECT " + COLUMN_ID + " FROM " + TABLE_NAME;
                int itemID;
                int itemCount = arrayAdapter.getCount();
                for (int i=itemCount-1; i >= 0; i--) {
                    if (selection.get(i)) {
                        data.moveToPosition(i);
                        itemID = data.getInt(data.getColumnIndexOrThrow("id")); // COLUMN_ID = "id"
                        mDBHandler.deleteItem(itemID);
                    }
                }
                selection.clear();
                updateListView();
                dialog.cancel();
            }
        });

    builder.setNegativeButton(
        "No",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int id) {
                dialog.cancel();
            }
    });

    AlertDialog alertDelete = builder.create();
    alertDelete.show();
    return true;

public void updateListView() {
    mListView.setAdapter(arrayAdapter);
    Cursor data = mDBHandler.getItems();
    arrayList.clear();
    while (data.moveToNext()) {
        arrayList.add(data.getString(1));
    }
    arrayAdapter.notifyDataSetChanged();
} 
```

# iphone - iOS 应用程序用户界面未在设备上更新

> ID：11791591
> 
> 赞同：0
> 
> 时间：2012-08-03T07:56:06.273
> 
> 标签：iphone, ios5, user-interface

当我在设备上运行我的应用程序时，我遇到了一个奇怪的问题：一切都是最新的，除了旧的用户界面。在模拟器中我有这个结果：

![模拟器](../Images/b4d4112e3a683c294fdc7bbcd8270475.png)

但在设备上我有这个：

![设备](../Images/ddc6e7b588e53b9bda6e5fd4819d0999.png)

我尝试卸载并重新安装，甚至卸载、关闭并重新安装应用程序，但没有任何改变..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:02:45.477

尝试以下操作：

1.  Shift-Command-K 进行干净的构建。
2.  Shift-Option-Command-K 清理构建文件夹。
3.  退出 Xcode。删除 ~/Library/Developer/Xcode/DerivedData/(你的项目名称)。有时旧的 .xib 文件会挂在这里。
4.  打开 iOS 模拟器并转到 iOS 模拟器 -> 重置内容和设置。

这个可爱的功能今天下午给我带来了一个小时的麻烦——希望你能过得更轻松。

# java - 如何获取html元素的绝对路径

> ID：11791596
> 
> 赞同：3
> 
> 时间：2012-08-03T07:56:21.790
> 
> 标签：java, html, xpath, jsoup

```
String html = Jsoup.connect(url).timeout(1000*1000).get().html();
Document doc = Jsoup.parse(html);
Elements H2 = doc.select("div h2");
for (Element e: H2) {
  //get absolute path of element e
} 
```

似乎没有办法仅使用 Jsoup 来做到这一点。如果没有，任何其他java包帮助实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:11:01.983

Jsoup 仍然不支持直接从元素获取 Xpath。

仍有[待实施的建议](https://github.com/jhy/jsoup/issues/187)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:54:43.067

这个问题有解决方案。

**曾几何时，我提供了这个**答案：

[https://stackoverflow.com/a/4747858/36305](https://stackoverflow.com/a/4747858/36305)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:08:41.343

以下链接说明了如何在 jsoup 中应用 XPATH

[jsoup：Java HTML 解析器](https://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/)

在这篇文章的最后，作者有自己的评论：

> “如果您想从 HTML 中提取特定数据，那么 Jsoup 就是您的最佳选择。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:59:17.400

没有元素的“绝对”路径之类的东西。有许多不同的路径可以选择一个元素。人们有时要求的此类路径的示例是：

```
/a/b/c/d
/a[1]/b[2]/c[3]/d[4]
/*[1]/*[2]/*[3]/*[4] 
```

前两种情况的问题是，如果涉及命名空间，它们就不起作用。第三条路径解决了这个问题，但这条路径并不像人们有时想要的那样提供丰富的信息。如果您想要一个既能提供信息又独立于命名空间上下文的路径，那么您需要使用形式谓词的东西`*[local-name()='a' and namespace-uri()='......']`。

命名空间的困难意味着您找不到许多返回元素路径的库例程。

# php - 从 $_GET['year'] 切换页面基础而不创建多个文件

> ID：11791599
> 
> 赞同：0
> 
> 时间：2012-08-03T07:56:38.410
> 
> 标签：php

我有一个下拉年份按钮，它从 2011、2012、2013 切换。我的问题是如何在不创建多个文件的情况下显示所选年份的特定季度？例如，2011 年第 1 季度（1 月、2 月、3 月）包含用户输入的数据和其他值，但 2012 年第 1 季度不包含任何内容。所以如果我切换到 2012 年，第 1 季度仍然显示但没有值，因为它首先没有值。将如何进行那种切换？

这是我的代码

```
<?php    
     if(isset($_GET['year'])){
        $getyear=$_GET['year'];
     } else {
        $getyear=date("Y");
     }
?> 
```

用于获取 sql 数据：

```
mysql_query("SELECT * FROM data WHERE month='$monthnow' AND type = 'Consumer' 
      AND year = '$getyear' AND category='$categid') 
```

请忽略其他数据，我唯一的问题是年份部分。

# html - 如何使用 HTML 或 CSS 代码创建滚动菜单？

> ID：11791603
> 
> 赞同：-2
> 
> 时间：2012-08-03T07:56:42.947
> 
> 标签：html, css, drop-down-menu, menu

我正在尝试重新创建一个菜单，就像在[Beyonce 的 Tumblr 页面](http://iam.beyonce.com/)上看到的那样。我使用什么 html/css 标签来创建这种效果？我指的是单击箭头时滑过的菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:14:40.660

这是一个实现。您需要在不同的部分插入以下内容：

***头部部分：***

```
<style>
<!--
#slidemenubar, #slidemenubar2{
position:absolute;
border:1.5px solid black;
background-color:#F2F2F2;
layer-background-color:#F2F2F2;
font:bold 12px Verdana;
line-height:20px;
}
-->
</style> 
```

***身体部分***

```
<script language="JavaScript1.2">

var slidemenu_width='160px' //specify width of menu (in pixels)
var slidemenu_reveal='12px' //specify amount that menu should protrude initially
var slidemenu_top='170px'   //specify vertical offset of menu on page

var ns4=document.layers?1:0
var ie4=document.all
var ns6=document.getElementById&&!document.all?1:0

if (ie4||ns6)
document.write('<div id="slidemenubar2" style="left:'+((parseInt(slidemenu_width)-    parseInt(slidemenu_reveal))*-1)+'px; top:'+slidemenu_top+'; width:'+slidemenu_width+'"     onMouseover="pull()" onMouseout="draw()">')
else if (ns4){
document.write('<style>\n#slidemenubar{\nwidth:'+slidemenu_width+';}\n<\/style>\n')
document.write('<layer id="slidemenubar" left=0 top='+slidemenu_top+'     width='+slidemenu_width+' onMouseover="pull()" onMouseout="draw()" visibility=hide>')
}

var sitems=new Array()

///////////Edit below/////////////////////////////////

//siteitems[x]=["Item Text", "Optional URL associated with text"]

sitems[0]=["<big><font face='Arial'>Site Menu</font></big>", ""]
sitems[1]=["Link 1", "http://www.google.com/"]
sitems[2]=["Link 2", "http://www.link2.com/"]
sitems[3]=["Link 3", "http://www.link3.com/"]
sitems[4]=["Link 4", "http://www.link4.com/"]
sitems[5]=["Link 5", "http://www.link5.com/"]
sitems[6]=["Link 6", "http://www.link6.com/"]
sitems[7]=["Link 7", "http://www.link7.com/"]

//If you want the links to load in another frame/window, specify name of target (ie:     target="_new")
var target=""

/////////////////////////////////////////////////////////

if (ie4||ns4||ns6){
for (i=0;i<sitems.length;i++){
if (sitems[i][1])
document.write('<a href="'+sitems[i][1]+'" target="'+target+'">')
document.write(sitems[i][0])
if (sitems[i][1])
document.write('</a>')
document.write('<br>\n')
}
}

function regenerate(){
window.location.reload()
}
function regenerate2(){
if (ns4){
document.slidemenubar.left=((parseInt(slidemenu_width)-parseInt(slidemenu_reveal))*-1)
document.slidemenubar.visibility="show"
setTimeout("window.onresize=regenerate",400)
}
}
window.onload=regenerate2

rightboundary=0
leftboundary=(parseInt(slidemenu_width)-parseInt(slidemenu_reveal))*-1

if (ie4||ns6){
document.write('</div>')
themenu=(ns6)? document.getElementById("slidemenubar2").style :     document.all.slidemenubar2.style
}
else if (ns4){
document.write('</layer>')
themenu=document.layers.slidemenubar
}

function pull(){
if (window.drawit)
clearInterval(drawit)
pullit=setInterval("pullengine()",10)
}
function draw(){
clearInterval(pullit)
drawit=setInterval("drawengine()",10)
}
function pullengine(){
if ((ie4||ns6)&&parseInt(themenu.left)<rightboundary)
themenu.left=parseInt(themenu.left)+10+"px"
else if(ns4&&themenu.left<rightboundary)
themenu.left+=10
else if (window.pullit){
themenu.left=0
clearInterval(pullit)
}
}

function drawengine(){
if ((ie4||ns6)&&parseInt(themenu.left)>leftboundary)
themenu.left=parseInt(themenu.left)-10+"px"
else if(ns4&&themenu.left>leftboundary)
themenu.left-=10
else if (window.drawit){
themenu.left=leftboundary
clearInterval(drawit)
}
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:08:09.790

这是一个非常基本的示例，可以帮助您入门。

HTML

```
​&lt;div id="menu">
    Hello world!
    <div class="tab">&gt;</div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS

```
​#menu {
    width: 600px;
    height: 300px;
    background: #000;
    position: absolute;
    left: -600px;
    top: 50px;
    color: #FFF;
}

.tab {
    width: 40px;
    height: 40px;
    background: red;
    position: absolute;
    right: -40px;
    top: 0;
    color: #FFF:
} 
```

jQuery

```
$(document).ready(function() {
    $(".tab").toggle(function() { 
        $('#menu').animate({ left: '0' }, 500);
    }, function() {
        $('#menu').animate({ left: '-600' }, 500);
    });​
}); 
```

[工作示例](http://jsfiddle.net/yW8Gb/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T08:03:12.063

您想阅读[这篇文章](http://cssmenumaker.com/blog/tutorials/css3-menu-with-rounded-corners-and-drop-shadows)以在 CSS3/HTML 中创建基本菜单，在网站中，您可以使用 HTML/CSS 生成菜单...但要获得更多效果，您可以使用 Javascript 库 [示例：[JqueryUI 演示效果]](http://jqueryui.com/demos/)。 ..

# qt - 使用 Qt 将文件上传到 Rapidshare

> ID：11791605
> 
> 赞同：0
> 
> 时间：2012-08-03T07:57:05.183
> 
> 标签：qt, qt4, rapidshare

我正在尝试使用 Rapidshare API 和 Qt 上传文件。可以通过 POST 方法调用 API，使用 POST 方法中的所有参数。

我可以上传文件，但是如果文件包含像“&”这样的字符，则文件不会完全上传（在某种程度上，当我从 rapidshare 下载相同的文件时，我会收到损坏的文件）。

我通过以下代码进行操作：

```
 QByteArray postData;

    postData.append(QString("sub=upload&login=%1&password=%2&filename=%3").arg(...).arg(...).arg(...));

    QByteArray data;    

    if(FileMan.ReadFromDataFile(data) == true){
         // Read file data
    }

    postData.append("&filecontent=").append(data);

    ...

    QNetworkReply *reply = manager->post(request, postData);

    connect(reply, SIGNAL(finished()), this, SLOT(onUploadCompleted()));

    ... 
```

在发布文件数据时，为什么 rapidshare 将 '&' 之类的字符解释为查询分隔符，我还使用十六进制转储将原始文件与上传的文件进行了比较，并发现其解释 'CR' 字符也。我尝试设置原始标题但无济于事。

如何使用 API 将二进制数据按原样发送到 rapidshare。如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:04:04.273

`postData.append("&filecontent=").append(data.toPercentEncoding());`

# python - 缺乏对多变量赋值 Python 的理解

> ID：11791613
> 
> 赞同：5
> 
> 时间：2012-08-03T07:57:31.533
> 
> 标签：python, list, tuples, list-comprehension

我是 Python 新手（以 Java 为基础）。我阅读了[Dive Into Python](http://www.diveintopython.net/)书籍，在第 3 章中找到了关于`Multi-Variable Assignment`. 也许你们中的一些人可以帮助我理解下面这段代码中发生的事情：

```
>>> params = {1:'a', 2:'b', 3:'c'}
>>> params.items() # To display list of tuples of the form (key, value).
[(1, 'a'), (2, 'b'), (3, 'c')]

>>> [a for b, a in params.items()] #1
['a', 'b', 'c']
>>> [a for a, a in params.items()] #2
['a', 'b', 'c']
>>> [a for a, b in params.items()] #3
[ 1 ,  2 ,  3 ]
>>> [a for b, b in params.items()] #4
[ 3 ,  3 ,  3 ] 
```

*到目前为止我所理解的是`#1`and`#2`具有相同的输出，显示元组的值。`#3`显示元组的键，`#4`只显示元组列表中的最后一个键。*

我不明白上述每种情况下变量`a`和变量的用法：`b`

1.  `a for b, a ...`-> 显示值
2.  `a for a, a ...`-> 显示值
3.  `a for a, b ...`-> 显示键
4.  `a for b, b ...`-> 显示最后一个键

**谁能详细说明上述每种情况的循环流程？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T08:07:42.393

您在那里使用的列表理解大致翻译如下：

```
[a for b, a in params.items()] 
```

变成

```
result = []
for item in params.items():
    b = item[0]
    a = item[1]
    result.append(a) 
```

* * *

```
[a for a, a in params.items()] 
```

变成

```
result = []
for item in params.items():
    a = item[0]
    a = item[1] # overwrites previous value of a, hence this yields values, 
                # not keys
    result.append(a) 
```

* * *

```
[a for a, b in params.items()] 
```

变成

```
result = []
for item in params.items():
    a = item[0]
    b = item[1]
    result.append(a) 
```

* * *

```
[a for b, b in params.items()] 
```

变成

```
result = []
for item in params.items():
    b = item[0]
    b = item[1]
    result.append(a) # note use of a here, which was not assigned 
```

最后一张很特别。它之所以起作用，是因为您`a`在之前的语句中使用了该变量，并且分配给它的最后一个值是`3`. 如果你先执行这个语句，你会得到一个错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T08:05:34.143

在所有四种情况下，元组中的名称都按顺序绑定到序列对中的每个元素。第四个实例是 Python 2.x 中（错误）行为的示例；该名称被绑定到它拥有的最后一个对象，即使在 LC 之外。此行为在 3.x 中已修复。

```
>>> [x for x in (1, 2, 3)]
[1, 2, 3]
>>> x
3

3>> [x for x in (1, 2, 3)]
[1, 2, 3]
3>> x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'x' is not defined 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T08:14:00.843

元组只是将变量打包在一起。当你打电话时你会得到这些对

```
params.items() 
```

正如您在评论中所写的那样。

要解压一个元组，你需要做的是：

```
>>> a, b = (2, 3)
>>> a
2
>>> b
3 
```

使用列表推导时也是如此。

```
>>> [a for a, b in [(2, 3), (4, 5)]]
[2, 4] 
```

here a takes out the first element of the tuple for every tuple in the list. This is #1 in your case using the params list instead of my short list.

If you instead write

```
>>> [b for a, b in [(2, 3), (4, 5)]]
[3, 5] 
```

you get the second element. This corresponds to your #3.

The other two does not really make sense. In #2 you have

```
>>> [a for a, a in [(2, 3), (4, 5)]]
[3, 5]
>>> a,a = (2,3)
>>> a
3 
```

which just lets a be first the first and then directly overwrites it with the second argument in each unpacking. You can se this same thing happen with the single tuple.

Last #4 is simply wring. Had you not already used a as a variable this would not have worked since a then doesn't exist.

```
>>> [a for b, b in [(2, 3), (4, 5)]]
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined 
```

I hope this answers your questions.

# zend-framework - 在 ZF2 RC2 上安装 Doctrine ORM 模块时出现问题

> ID：11791621
> 
> 赞同：0
> 
> 时间：2012-08-03T07:58:05.003
> 
> 标签：zend-framework, doctrine-orm, zend-framework2

我正在尝试将[`DoctrineORMModule`](https://github.com/doctrine/DoctrineORMModule)模块与之集成，[`ZF2 RC2`](https://github.com/zendframework/zf2/tree/release-2.0.0rc2)但我遇到了问题。我`./composer.json`的如下并且`php composer.phar update`运行良好：

```
"require": {
    "php": ">=5.3.3",
    "doctrine/data-fixtures": "dev-master",
    "doctrine/doctrine-module": "dev-master",
    "doctrine/orm": ">2.2,<2.4-dev",
    "doctrine/dbal": ">2.2,<2.4-dev",
    "doctrine/migrations": "dev-master",
    "zendframework/zendframework": "dev-master#a59928a3a37e420193939f9799ece27fb39bb84e"
},
"autoload": {
    "psr-0": {
        "DoctrineORMModule": "src/",
        "DoctrineORMModuleTest": "tests/"
    }
} 
```

但是，添加的模块之一`./application/application.config.php`会导致问题：

```
'modules' => array(
    'Application',
    'DoctrineModule',    // WORKS FINE
    'DoctrineORMModule', // 'Module (DoctrineORMModule) could not be initialized.'
), 
```

这在我发出`./vendor/bin/doctrine-module`命令时得到确认：

> PHP 致命错误：未捕获的异常 'Zend\ModuleManager\Exception\RuntimeException' 带有消息“模块（DoctrineORMModule）无法初始化。” 在 ./vendor/zendframework/zendframework/library/Zend/ModuleManager/ModuleManager.php:139

如果我在我的`vendor`目录中搜索 Doctrine 名称空间，我可以找到`DoctrineModule`（`grep "namespace DoctrineModule" -R ./vendor`找到东西）但不是`DoctrineORMModule`（`grep "namespace DoctrineORMModule" -R ./vendor`没有）的名称空间。

**`DoctrineORMModule`为了与之集成，我缺少什么`ZF2 RC2`？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:11:49.950

你忘了要求“教义/教义-orm-module”

DoctrineModule 包含一堆抽象类，为 ORM/MongoDB 和其他数据库提供相同的 API。

在此处阅读有关安装 DoctrineORMModule 的更多信息 [https://github.com/doctrine/DoctrineORMModule](https://github.com/doctrine/DoctrineORMModule)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:21:14.233

我想你只需要添加

`"doctrine/DoctrineORMModule": "dev-master"`

像这样

```
{
    "name": "zendframework/skeleton-application",
    "description": "Skeleton Application for ZF2",
    "license": "BSD-3-Clause",
    "keywords": [
        "framework",
        "zf2"
    ],
    "homepage": "http://framework.zend.com/",
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "dev-master#a59928a3a37e420193939f9799ece27fb39bb84e",
        "doctrine/DoctrineORMModule" : "dev-master"
    }
} 
```

然后运行

> php composer.phar 更新

# jquery - jQuery DateTime Picker 在 AJAX 选项卡控件中不起作用

> ID：11791632
> 
> 赞同：0
> 
> 时间：2012-08-03T07:59:09.643
> 
> 标签：jquery, ajax, datetimepicker

在我的表单中，我有 AJAX 选项卡控件，里面有 jQuery DateTime Picker。

当 DateTimePicker 在 AJAX 选项卡控件之外但在它内部不起作用时，它工作正常。以下是我的设计来源。谁能帮我解决这个问题？

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.8.21/jquery-ui.min.js"></script>
<link rel="stylesheet" media="all" type="text/css" href="http://code.jquery.com/ui/1.8.21/themes/ui-lightness/jquery-ui.css"
/>
<link rel="stylesheet" media="all" type="text/css" href="css/jquery-ui-timepicker-addon.css"
/>
<script type="text/javascript" src="js/jquery-ui-timepicker-addon.js"></script>
<script type="text/javascript" src="js/jquery-ui-sliderAccess.js"></script>
<script type="text/javascript">
    $(function () {

        $('#txtTimeStarts').datetimepicker({
            ampm: true
        });
    });
</script>
<script type="text/javascript">
    $(function () {

        $('#txtDefTimeStarts').datetimepicker({
            ampm: true
        });
    });
</script> 
```

身体的一部分 ：

```
 <asp:UpdatePanel ID ="OfferDeal" runat ="server">
            <ContentTemplate>
             <cc1:Tabcontainer CssClass="Tab" id="TabContainer1" runat="server"  
                  activetabindex="0" AutoPostBack="True" >

 <cc1:TabPanel runat="server" HeaderText="Define Loyalty Offer" ID="TabPanel1"  >

            <ContentTemplate>
            <div class="createoffer">
              <div class="setup-offer"  style="display:block;">
                <div class="sec-main"><span class="sec-title">Define your offer</span> <span class="note">For example: "Buy 7 coffee drinks and get the next one free" or "Make 10 purchases over $25 and receive 10% off your next purchase"</span>
                  <div class="textareafld">
                    <div class="field">
                      <%--<label for="txtareOffer1" class="infield">Lorem ipsum dolor sit amet, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat.</label>--%>
                     <%-- <textarea class="textfield" id="txtF9" ></textarea>--%>

                        <asp:TextBox ID="txtareaOfferDesc" runat="server" CssClass="textfield" 
                            TextMode="MultiLine" ></asp:TextBox>
                    </div>
                  </div>
                </div>
                <div class="sec-main"><span class="sec-title">Define Offer Validity:</span>
                  <div class="datefld">
                    <label class="name">Offer start date</label>
                    <div class="field">
                      <asp:TextBox ID="txtTimeStarts" runat="server" CssClass="textfield"></asp:TextBox>
                         <span class="date"></span>            
                    </div>
                    <span class="error">Error message</span></div>
     </ContentTemplate>

    </cc1:TabPanel>
<cc1:TabPanel runat="server" HeaderText="Define Deals" ID="TabPanel2" class="pannel_outer">
 <ContentTemplate>
              <div class="setup-offer" style="display:block; border:1px solid #ddd; margin:0px 0 0 3px;">
                <div class="sec-main"><span class="sec-title">Define your Deal</span> <span class="note">For example: "Buy 7 coffee drinks and get the next one free" or "Make 10 purchases over $25 and receive 10% off your next purchase"</span>
                  <div class="textareafld">
                      <asp:TextBox ID="txtDefineDeal" runat="server" CssClass="textfield" 
                          TextMode="MultiLine"></asp:TextBox>
                    </div>
                </div>
                <div class="sec-main"><span class="sec-title">Define Offer Validity:</span>
                  <div class="datefld">
                    <label class="name">Offer start date</label>
                    <div class="field">
                      <asp:TextBox ID="txtDefTimeStarts" runat="server" CssClass="textfield"></asp:TextBox>
                        <span class="date"></span>
                    </div>
                    <span class="error">Error message</span></div>
 </ContentTemplate>
            </cc1:TabPanel>
        </cc1:Tabcontainer>
        </ContentTemplate></asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:25:19.417

谢谢大家

它通过替换 ID 来工作，如下所示：

```
txtTimeStarts to #Tabcontainer_TabPanel1_txtTimeStarts 
txtTimeEnds to #Tabcontainer_TabPanel2_txtTimeEnds 
```

因为默认情况下，它获取 ajax 选项卡控件 ID 为`parentID`

# c++ - 具有副作用的 C++11 移动构造函数

> ID：11791644
> 
> 赞同：6
> 
> 时间：2012-08-03T08:00:04.500
> 
> 标签：c++, c++11, move-semantics, move-constructor

在 C++ 中，不能依赖从 return 语句调用的复制构造函数，因为标准中的一个特殊子句允许编译器忽略对由 return 语句产生的复制构造函数的调用，即使复制构造函数有副作用。因此，编写一个除了复制构造实例之外做其他事情的复制构造函数是不好的风格。

C++11 标准中是否有类似的语句允许编译器在某些情况下消除对移动构造函数的调用 - 如果是这样，那些情况是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T08:04:36.183

复制省略同样适用于移动构造，它是完全相同的子句，复制构造的省略和移动构造的省略统称为“复制省略”。

`§12.8 [class.copy] p31`

> 当满足某些条件时，允许实现省略类对象的复制/移动**构造**，即使对象的复制/**移动构造函数**和/或析构函数具有副作用。[...]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:05:15.710

当允许复制省略时，不会执行复制，因此不会调用移动复制构造函数，即使对象是可移动的。因此，复制省略胜过移动，您无法确定（至少不是以可移植的方式）它何时会发生。因此，这是对移动复制构造产生副作用的一种情况，这是一个坏主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T08:09:02.207

复制和移动的省略定义相同。该标准没有任何具体的移动措辞，因为它们的定义相同。

# jquery - 如何使用 AJAX 接收 JSON 文件并使用 javascript 解析它？

> ID：11791651
> 
> 赞同：0
> 
> 时间：2012-08-03T08:00:23.043
> 
> 标签：jquery, ajax, json, parsing, foursquare

我正在尝试解析foursquare 给我的这个非常长且复杂的JSON。这是我的 AJAX 请求：

```
 $.ajax({
      url: 'https://api.foursquare.com/v2/venues/explore',
      dataType: 'json',
      data: 'limit=7&ll='+latitude+','+longitude+'&client_id='+client_id+'&client_secret='+client_secret+'',
      async: false,
      success: getVenues(data)
}); 
```

getVenues 是我正在制作的一个函数，用于对 JSON 进行排序并在页面上显示相关内容。我遇到的第一个问题是我不知道如何告诉成功函数它应该处理从服务器接收到的数据——这些数据是否存储在某个变量中？我目前正在做 getVenues(data) 但它告诉我“数据”不是一个定义的变量。然而，许多在线教程似乎很乐意对这个神秘的“数据”做一个功能，而且他们的功能似乎有效。

接下来，我无法解析 JSON 本身。这是我正在尝试处理的 JSON 的缩短版本：http: [//pastie.org/4382619](http://pastie.org/4382619)。如何选择场地名称和 ID 等并在页面上显示？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:05:32.283

您在网上看到的教程很可能将`success`回调声明为匿名函数。在这些情况下，`data`不会将其**传递**给函数，而是将其声明为该函数的参数。jQuery 可以很好地处理将 AJAX 调用的响应作为第一个参数传递给成功函数，无论您选择如何命名它（`data`只是最有意义）。

此外，如果您`dataType: 'json'`在`$.ajax()`调用中指定，jQuery 将在将 JSON 响应传递给该函数之前对其进行解析，以确保它是有效的 JSON 并且您在函数内部有一个可以使用的对象。如果响应**不是**有效的 JSON，`success`则不会执行回调，而是会执行`error`回调（如果您已指定）。

在您的情况下，您正在传递一个函数引用，因此假设您的 getVenuesfunction 如下所示：

```
function getVenues(data) {
    // do something
} 
```

那么你可以简单地做：

```
success: getVenues 
```

在您传递给的对象中`$.ajax()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:05:46.327

你应该做：

```
$.ajax({
    // some other code
    success: getVenues
}); 
```

您是在告诉 ajax：“使用 getVenues 函数”，而不是“使用 getVenus(data) 值”。至于第二个问题：

```
var l = data.response.groups.length;
for (var i = 0; i < l; i++) {
    var group = data.response.groups[i];
    var k = group.items.length;
    for (var j = 0; j < k; j++) {
        var venue = group.items[j].venue;
        // use venue as you wish
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T08:06:48.660

ajax 调用中对象的成功属性只需要函数名或函数对象。你要么给它一个名字，就像这样：

```
 $.ajax({
      url: 'https://api.foursquare.com/v2/venues/explore',
      dataType: 'json',
      data: 'limit=7&ll='+latitude+','+longitude+'&client_id='+client_id+'&client_secret='+client_secret+'',
      async: false,
      success: getVenues
}); 
```

或者你这样做：

```
 $.ajax({
      url: 'https://api.foursquare.com/v2/venues/explore',
      dataType: 'json',
      data: 'limit=7&ll='+latitude+','+longitude+'&client_id='+client_id+'&client_secret='+client_secret+'',
      async: false,
      success: function(data) { getVenues(data) }
}); 
```

# c# - LINQ查询后将数据从var复制到DataTable

> ID：11791652
> 
> 赞同：1
> 
> 时间：2012-08-03T08:00:28.480
> 
> 标签：c#, .net, linq, datatable

我正在使用 LINQ 查询来过滤数据表中的数据并将数据放入另一个数据表中。为此，我使用 foreach 语句将值从 var 复制到数据表。数据表将包含一个非常大的编号。行，所以你能建议我一种可以一次性完成复制的方法吗？

```
 var drdatedisp = from row in dtfullreport.AsEnumerable()
                             group row by row.Field<string>("Order_Date") into g
                             select new
                             {
                                 Order_Date = g.Key,
                                 totalQnty = g.Sum(a => a.Field<int>("Item_Quantity")),
                                 totalTax = g.Sum(a => float.Parse(a.Field<decimal>("TAXAMT").ToString())),
                                 totalAmt = g.Sum(a => float.Parse(a.Field<decimal>("VALAMT").ToString()))
                             };
            DataTable dtdatedisp = new DataTable();
            dtdatedisp.Columns.Add("Order_Date");
            dtdatedisp.Columns.Add("Item_Quantity");
            dtdatedisp.Columns.Add("TAXAMT");
            dtdatedisp.Columns.Add("VALAMT");
            dtdatedisp.Rows.Clear();
            foreach (var g in drdatedisp)
            {
                DataRow newRow1 = dtdatedisp.NewRow();
                newRow1[0] = g.Order_Date;
                newRow1[1] = g.totalQnty;
                newRow1[2] = String.Format("{0:0.00}", g.totalTax);
                newRow1[3] = String.Format("{0:0.00}", g.totalAmt);
                dtdatedisp.Rows.Add(newRow1);
            }
        } 
```

请注意，迭代次数将非常少......

有什么办法吗？？你能帮助我吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T09:21:00.313

不幸的是，有一个名为 CopyToDataTable 的扩展方法位于 IEnumerable Data Row 对象上。但是使用以下链接，您可以创建/复制将在任何 IEnumerable 对象上调用的相同扩展方法，这将符合您的要求。

[链接在这里](http://msdn.microsoft.com/en-us/library/bb669096.aspx#Y105)

有了这个，你可以直接在你的代码中写这样的东西

drdatedisp.CopyToDataTable();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-18T03:57:12.063

使用 CopyToDataTable(); 验证结果：

```
 var results = (from myRow in myData.AsEnumerable()
                          where myRow.Field<double>("Num1") == 1
                          select myRow).CopyToDataTable(); 

            DataTable dtTemp = (DataTable)results;
            gvMain.DataSource = dtTemp; 
```

# css - 掩码未延伸到可滚动部分

> ID：11791654
> 
> 赞同：0
> 
> 时间：2012-08-03T08:00:32.053
> 
> 标签：css, extjs, mask

我已经设定

```
.x-mask {
   height:100% !important;
} 
```

但是父窗口是可滚动的。所以当我滚动窗口时，底部没有掩码。有什么办法可以解决这个问题？

我正在使用 extjs。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:52:17.150

```
x-mask {
 position:fixed;
 height:100%;
 width:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:02:52.253

您的 CSS 编写不正确：

```
.x-mask {
 height:100%;
} 
```

如果这不能解决您的问题，您将不得不向我们提供更多代码和/或指向您网站的链接或显示问题的小提琴。

# c++ - 如何解决自动返回类型 C++ - 续

> ID：11791655
> 
> 赞同：1
> 
> 时间：2012-08-03T08:00:35.430
> 
> 标签：c++, templates, sfinae

仅当我注释方法 dotProduct(It source, const size_t size) 时，以下代码才在 gcc 上编译，但我需要以某种方式修复它，以便它在未注释此方法的情况下编译。方法的名称必须保持不变，因为我的意图是自动检测返回类型。有人可以帮我修改代码以使其编译吗？

```
#include <stdlib.h> 
#include <iterator> 
#include <iostream>  
#include <limits>

using std::cerr; 

   //! Template IF predicate implementation
  template <bool B, typename TrueResult, typename FalseResult> 
  class TemplateIf {
  public:
    //! The result of template IF predicate
    typedef TrueResult Result;
  };

  //! Template IF predicate implementation - specialization for false condition
  template <typename TrueResult, typename FalseResult>
  class TemplateIf<false, TrueResult, FalseResult> {
  public:
    //! The result of template IF predicate
    typedef FalseResult Result;
  };

  template <typename T1, typename T2>
  class DetermineComputationType {
  public:
    //! The determined result type
    // If (isSpecialized(T1) && isSpecialized(T2)) {
    typedef typename TemplateIf< std::numeric_limits<T1>::is_specialized && std::numeric_limits<T2>::is_specialized,
      // If (! isInteger(T1) && isInteger(T2) )
      //   return T1;
      typename TemplateIf< ! std::numeric_limits<T1>::is_integer && std::numeric_limits<T2>::is_integer, T1,
      // Else if (! isInteger(T2) && isInteger(T1) )
      //   return T2;
      typename TemplateIf< ! std::numeric_limits<T2>::is_integer && std::numeric_limits<T1>::is_integer, T2,
      // Else if ( sizeof(T1) > sizeof(T2) )
      //   return T1;
      typename TemplateIf< (sizeof(T1) > sizeof(T2)), T1,
      // Else if ( sizeof(T2) > sizeof(T1) )
      //   return T2;
      typename TemplateIf< (sizeof(T2) > sizeof(T1)), T2,
      // Else if ( isSigned(T2) )
      //   return T1;
      // Else
      //   return T2; 
      // }
      typename TemplateIf< std::numeric_limits<T2>::is_signed, T1, T2>::Result >::Result >::Result >::Result >::Result,
      // Else if ( sizeof(T2> > sizeof(T1) )
      //   return T2;
      // Else
      //   return T1;
      typename TemplateIf< (sizeof(T2) > sizeof(T1)), T2, T1 >::Result >::Result Result;
  };

template <typename It1,typename It2> struct DotProduct 
{   
  typedef typename std::iterator_traits<It1>::value_type VT1;   
  typedef typename std::iterator_traits<It2>::value_type VT2;   
  typedef typename DetermineComputationType<VT1,VT2>::Result Result;
};  

  template <typename R, typename Ct, typename It>
  inline R dotProductRCtIt(It source, const size_t size)
  {
    Ct result = Ct();
    for (size_t i = 0; i < size; ++i)
      result += static_cast<Ct>(source[i]) * static_cast<Ct>(source[i]);

    return static_cast<R>(result);
  }

 //! For description see cpputil::dotProduct()
  template <typename R, typename Ct, typename It, typename It2>
  inline R dotProductRCtItIt2(It source, It2 source2, const size_t size) {
    Ct result = Ct();
    for (size_t i = 0; i < size; ++i)
      result += static_cast<Ct>(source[i]) * static_cast<Ct>(source2[i]);

    return static_cast<R>(result);
  }

template <typename T>
struct DetermineSingleType {
  typedef typename std::iterator_traits<T>::value_type Result;
};

//! Convenience method - see above for description
// !!! COMMENT THIS METHOD AND IT WILL START WORKING !!!
template <typename It> 
inline typename DetermineSingleType<It>::Result  dotProduct(It source, const size_t size) {
  typedef typename DetermineSingleType<It>::Result ItType;

  return dotProductRCtIt<ItType, ItType, It>(source, size);
}

template<typename Result,typename It, typename It2> Result dotProduct(It source1, It2 source2, const size_t size) 
{
  //typedef typename std::iterator_traits<It>::value_type ItType;
  //typedef typename std::iterator_traits<It2>::value_type It2Type;
  //typedef typename DetermineComputationType<Result, ItType>::Result Ct;
 typedef typename DotProduct<It, It2>::Result Ct;

  return dotProductRCtItIt2<Result, Ct, It, It2>(source1, source2, size);
}  

template<typename It1, typename It2> typename DotProduct<It1,It2>::Result   dotProduct(It1 source1, It2 source2, const size_t size) 
{   
  typedef typename DotProduct<It1,It2>::Result Result;   
  return dotProductRCtItIt2<Result, Result, It1, It2>(source1, source2, size);
}

template<typename R, typename Ct, typename It, typename It2> R dotProduct(It source, It2 source2, const size_t size)
{
 return dotProductRCtItIt2<R, Ct, It, It2>(source, source2, size);
}

int main(int argc,char **argv) 
{   
  const char *s1 = "abc";   
  const char *s2 = "def";   
  cerr << dotProduct<int>(s1,s2,3) << "\n";   
  cerr << dotProduct(s1,s2,3) << "\n";   
  return EXIT_SUCCESS; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:24:28.227

您正在将 int 类型传递给 iterator_traits。iterator_traits 模板仅适用于暴露适当类型定义的指针和类。

现在，我不清楚为什么编译器在第一次重载时会抛出错误，尤其是这个重载对于您正在进行的调用是不正确的。我会说它看起来像是编译器中的一个错误，但我不是 100% 确定。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T12:36:42.107

问题是结果类型确定类需要依赖于函数参数。一种解决方案看起来像为此“滥用” const size_t size 参数：

模板类型名称确定SingleType::value_type dotProduct(It source, St size) { ... }

对于调用： dotProduct((char *) s1, 3);

这样，在确定 St 的类型之前无法运行生成的类型确定，因此参数匹配过程开始将使用的参数与模板类型匹配，并且由于无法从 char* 到 int 的隐式转换而失败。

然而，这个解决方案的坏处是 const size_t size 参数必须被模板化和误用。添加另一个具有默认值的虚拟参数不会防止编译错误。

目前我不知道任何其他更好的解决方案和滥用尺寸参数的解决方案不是一个好的解决方案。因此，我很可能不得不放弃自动返回类型确定。还有其他想法吗？

# jquery - wp nav 菜单在特定 LI 之后添加图像

> ID：11791656
> 
> 赞同：0
> 
> 时间：2012-08-03T08:00:38.373
> 
> 标签：jquery, wordpress, jquery-selectors

```
<div id="menubar">
        <ul id="menu">
            <li><a href="#">HOME</a></li>
            <li><a href="#">ABOUT US</a></li>
            <li><a href="#">EVENTS</a></li>
            <li><a href="#">CLIENTS</a></li>
            <li><a href="#">CAREER</a></li>
            <li class="last-child"><a href="#">CONTACT US</a></li>
        </ul>
    </div><!-- menubar --> 
```

这是我使用 wp_nav_menu 的菜单结构，我可以使用 'link_before' => 在 li 之前或之后添加图像。但我只想要我的 EVENTS li 之后的图像，该怎么做？请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:04:58.207

试试这个......我希望这是你想要的。

```
​$('#menu li:contains("EVENTS")')​​​​​​.after('<img src="Your img source" alt="ALT tag"/>')​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​;​​​​​ 
```

[**小提琴**](http://jsfiddle.net/QUDyz/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:13:01.257

WordPress 菜单的特点是，菜单中的每个元素都有一个唯一的 id。因此，只需选择项目“EVENTS”的唯一 ID 并将您的图像应用到它。

使用 chrome 检查元素或 Firebug 获取事件菜单的 id

[**检查这个小提琴**](http://jsfiddle.net/libinvbabu/m5beq/)。

在此，我为 EVENTS 放置了一个唯一的 ID `menu-item-3`，并放置了一个位置正确的背景图像。

希望这会帮助你。

# iphone - 如何在 UITextView iPhone 应用中控制复制、粘贴、全选、定义？

> ID：11791658
> 
> 赞同：6
> 
> 时间：2012-08-03T08:00:40.293
> 
> 标签：iphone, ios, menu, controls, uitextview

我正在使用 UITextView 在 iPhone 应用程序中工作。我想让**用户只能复制消息和粘贴消息**。但我**不想显示全选、选择、定义和其他**。我正在按照下面的代码来控制选项。但是，所有选项都显示在 UITextView 点击。

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(paste:))
    {
        return NO;
    }
    else if (action == @selector(copy:))
    {
        return NO;
    }

    return [super canPerformAction:action withSender:sender];
} 
```

谁能帮我做到这一点。而且我不想`|.Text.|`在复制消息时显示。请帮助我做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:22:23.650

首先，如果您上面的代码不起作用，那么您可能忘记将 UITextView 的类更改为实现上述方法的自定义类。

一旦你完成了你所拥有的应该可以工作，然后你应该为全选返回 no

```
 if (action == @selector(selectAll:))
        {
            return NO;
        } 
```

您也可能希望为 cut 返回 no：还假设您不希望用户从 textView 中删除文本。

此外，这些不需要是 if else 语句，因为它们不相互依赖

它们实际上是按此顺序调用的

剪切：复制：选择：全选：粘贴：删除：

因此，酌情删除功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:28:23.733

创建 UITextField 的子类并覆盖该类中的方法 canPerformAction:withSender:。

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(paste:) ||action == @selector(copy:))
   {
       return [super canPerformAction:action withSender:sender];
   }

   return NO;
 } 
```

# c# - 为什么 WPF 窗口没有打开

> ID：11791663
> 
> 赞同：1
> 
> 时间：2012-08-03T08:01:16.360
> 
> 标签：c#, wpf, window

我想制作程序名称 Cyan Pembuat Soal(Cyan Question Maker) 我将启动事件添加到此代码：

```
using System;
using System.Windows;

namespace Cyan_Pembuat_Soal {
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application {
        private void Application_Startup(object sender, StartupEventArgs e){
            if (FindPlace(e.Args) != null) {
                Cyan_Pembuat_Soal.MainWindow a = new Cyan_Pembuat_Soal.MainWindow();
                a.Activate();
            } else {
                Cyan_Pembuat_Soal.MainWindow a = new Cyan_Pembuat_Soal.MainWindow();
                a.Activate();
                a.Closed += delegate(object senders, EventArgs es) {this.Shutdown();};
            }
        }
        private static string FindPlace(string[] a) {
            if (a.Length == 0) {
                return null;
            }
            int b = 0;
            System.Uri c;
            for (b = 0; b < a.Length; b++) {
                if(Uri.TryCreate(a[b], UriKind.RelativeOrAbsolute, out c)){
                    break;
                }
            }
            c = null;
            return a[b];
        }
    }
} 
```

但是该代码无法正常工作。这个程序有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:13:54.433

我会尝试添加`a.ShowDialog();`或`a.Show();`添加到`a.Activate();`.

不确定您为什么使用`Activate()`，但请确保它按照您的意愿执行。 [http://msdn.microsoft.com/en-us/library/system.windows.window.activate.aspx](http://msdn.microsoft.com/en-us/library/system.windows.window.activate.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:18:34.750

使用 a.Show() 而不是 a.Activate(); 并确保您的处理程序已在 App.Xaml 中注册：

```
<Application 
    ...
    Startup="Application_Startup"> 
```

# vim - 打开一行 ('o') 自动缩进 - 如何在 .txt 文件中避免？

> ID：11791665
> 
> 赞同：2
> 
> 时间：2012-08-03T08:01:19.860
> 
> 标签：vim

每当我想在 Vim 中打开一个新行时`o`，它会自动缩进（而不是从行首开始）。这是为什么？我怎样才能解决这个问题？（我不想关闭自动缩进，这对其他文件类型非常有用。）

# 更新：

它似乎与实际文本有关：自动缩进（`=`）以下两行缩进第二行（为什么？--我希望这两行都从第 1 列开始！）

```
*in golf: failing to make par is a loss, missing a birdie putt is a foregone gain, not a loss
*negotiations, especially renegotiations: concessions you make cause you much more pain 
```

# 更新2（我的.vimrc）：

```
:set cpoptions+=$
:set virtualedit=all
:filetype plugin indent on
:set foldexpr=getline(v:lnum)=~'^\\s*$'&&getline(v:lnum+1)=~'\\S'?'<1':1
:set fdm=expr
:set gfn=Ubuntu\ Mono\ 11
setlocal autoindent
setlocal cindent
setlocal cinwords=if,else,elseif,do,while,foreach,for,case,default,function,class,interface,abstract,private,public,protected,final
setlocal cinkeys=0{,0},0),!^F,o,O,e
setlocal nosmartindent " don't use smart indent option 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:04:54.653

您可以将选项设置为仅对特定文件生效。例如，我的 vimrc 中有以下内容：

```
if has("autocmd")
    augroup LISP
        au!
        au BufReadPost *.cl :set autoindent
    augroup END
    augroup C
        au!
        autocmd BufNewFile,BufRead *.cpp set formatprg=c:\\AStyle\\bin\\AStyle.exe\ -A4Sm0pHUk3s4
    augroup END
endif 
```

使用它，我可以打开自动缩进，或文件格式化，或任何有意义的文件，但一般不打开它，当它在其他情况下可能会惹恼我时。在这种情况下，我为 .cl 文件打开自动缩进，但不一定为其他文件。

理论上，您也可以使用相同的方法关闭 .txt 文件的自动缩进。

# c# - 捕获由于框架引起的异常

> ID：11791688
> 
> 赞同：0
> 
> 时间：2012-08-03T08:02:58.600
> 
> 标签：c#, .net

我想知道在以下情况下是否可以捕获异常：

应用程序可以使用较旧的 .net 框架版本（2.0 或 3.0）运行，但当应用程序尝试使用较新框架版本（3.5）的功能时（因为它可能未安装在系统上），则会引发异常. 有没有办法抓住这个？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:08:05.090

如果您构建 .net 3.5 应用程序，则无法在较旧的 .net 2.0 环境中启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:08:37.393

实际上，您可以以编程方式检查文件夹是否存在，并管理您的代码，例如，如果文件夹：

> C:\WINDOWS\Microsoft.NET\Framework\v3.5

存在然后使用此版本的功能，否则执行其他操作，例如显示消息或引发异常

但是我会为我的客户设置一些条件来使用该应用程序，其中一些是系统要求，例如拥有您在开发应用程序时使用的 .Net 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:13:27.383

如果安装了 .Net 3.5，您可以在 .Net 2.0 上编写一个应用程序，它将检查 .Net 的版本，并运行主应用程序。

# java - 如何在android上加载本机库？

> ID：11791689
> 
> 赞同：3
> 
> 时间：2012-08-03T08:02:58.513
> 
> 标签：java, android, android-ndk, native

我有一个 .so 库，它是从另一个 APK 中提取的。

我已将其复制到项目中的 /libs/armeabi 位置。

在我的课堂上，我正在加载它

```
static {
    System.loadLibrary("mylib"); 
} 
```

该应用程序崩溃

```
08-03 07:52:08.089: E/AndroidRuntime(932): FATAL EXCEPTION: main
java.lang.ExceptionInInitializerError
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1319)
at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
at android.app.ActivityThread.access$600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)

Caused by: java.lang.UnsatisfiedLinkError: Couldn't load mylib: findLibrary returned null
at java.lang.Runtime.loadLibrary(Runtime.java:365)
at java.lang.System.loadLibrary(System.java:535)
at com.example.mytestandroidapp.MainActivity.<clinit>(MainActivity.java:11)
08-03 07:52:08.089: E/AndroidRuntime(932):  ... 15 more 
```

我在eclipse中这样做。

这是我的项目布局的屏幕：

![在此处输入图像描述](../Images/97bd26898e34ddcc9b72243c688d3665.png)

我应该怎么做才能开始工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:15:57.767

重命名`mylib.so` ，`libmylib.so`然后再次运行您的程序（不修改 loadLibrary 参数）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T06:56:13.207

“重命名`mylib.so`，`libmylib.so`然后再次运行您的程序（不修改 loadLibrary 参数）”来自黑带

+

该文件夹`libs/armeabi-v7a`还应包含`libmylib.so`库。如果您的手机是新手机，他会在那里查看图书馆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T02:09:05.523

尝试lib位置路径参考：

> context.getApplicationInfo().dataDir + "/lib"

如果您使用 API 级别 9，或者直接转到 lib 目录

> context.getApplicationInfo().nativeLibraryDir

# c# - 如何使用 LINQ 在一行中查找与一个谓词匹配的 5 个元素，但第六个元素不匹配？

> ID：11791691
> 
> 赞同：4
> 
> 时间：2012-08-03T08:03:03.853
> 
> 标签：c#, .net, linq

我正在尝试学习 LINQ，似乎应该可以找到一系列与谓词匹配的“n”元素，但我似乎无法弄清楚如何解决这个问题。

我的解决方案实际上需要第二个不同的谓词来测试序列的“结束”，但是在至少 5 个通过测试的元素的序列之后找到第一个没有通过测试的元素*也会*很有趣。

这是我天真的非 LINQ 方法....

```
 int numPassed = 0;
 for (int i = 0; i < array.Count - 1; i++ )
 {
     if (FirstTest(array[i]))
     {
        numPassed++;
     }
     else
     {
        numPassed = 0;
     }

     if ((numPassed > 5) && SecondTest(array[i + 1]))
     {
          foundindex = i;
          break;
     }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:31:58.723

一个高性能的 LINQ 解决方案是可能的，但坦率地说相当难看。这个想法是隔离与描述匹配的子序列（一系列 N 项与谓词匹配，当找到与第二个谓词匹配的项时结束），然后选择其中具有最小长度的第一个。

假设参数是：

```
var data = new[] { 0, 1, 1, 1, 0, 0, 2, 2, 2, 2, 2 };

Func<int, bool> acceptPredicate = i => i != 0;

// The reverse of acceptPredicate, but could be otherwise
Func<int, bool> rejectPredicate = i => i == 0; 
```

`GroupBy`使用一堆丑陋的有状态代码可以隔离子序列（这是固有的尴尬——你必须保持非平凡的状态）。这个想法是通过一个人为的和任意的“组号”进行分组，每当我们从一个可能可以接受的子序列移动到一个绝对不可接受的子序列时选择一个不同的数字，并且当相反的情况发生时：

```
var acceptMode = false;
var groupCount = 0;
var groups = data.GroupBy(i => {
    if (acceptMode && rejectPredicate(i)) {
        acceptMode = false;
        ++groupCount;
    }
    else if (!acceptMode && acceptPredicate(i)) {
        acceptMode = true;
        ++groupCount;
    }
    return groupCount;
}); 
```

最后一步（找到可接受长度的第一组）很容易，但还有最后一个陷阱：确保您不选择不满足规定条件的*组*：

```
var result = groups.Where(g => !rejectPredicate(g.First()))
                   .FirstOrDefault(g => g.Count() >= 5); 
```

以上所有这些都是通过源序列上的单次传递来实现的。

请注意，此代码将接受也结束源序列的项目序列（即它不会终止，因为我们找到了一个满足的项目，`rejectPredicate`而是因为我们用完了数据）。如果您不希望这样做，则需要稍作修改。

[**看到它在行动**](http://ideone.com/X66uL)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:15:46.623

不优雅，但这会起作用：

```
var indexList = array
                 .Select((x, i) => new 
                     { Item = x, Index = i })
                 .Where(item => 
                     item.Index + 5 < array.Length && 
                     FirstTest(array[item.Index]) && 
                     FirstTest(array[item.Index+1]) && 
                     FirstTest(array[item.Index+2]) && 
                     FirstTest(array[item.Index+3]) && 
                     FirstTest(array[item.Index+4]) && 
                     SecondTest(array[item.Index+5]))
                 .Select(item => item.Index); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T08:43:14.853

与其尝试组合现有的扩展方法，不如使用[`Enumerator`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.getenumerator.aspx).

* * *

**例子：**

```
IEnumerable<T> MatchThis<T>(IEnumerable<T> source, 
                            Func<T, bool> first_predicate,
                            Int32 times_match,
                            Func<T, bool> second_predicate)
{
    var found = new List<T>();
    using (var en = source.GetEnumerator())
    {
        while(en.MoveNext() && found.Count < times_match)
            if (first_predicate((T)en.Current))
                found.Add((T)en.Current);
            else
                found.Clear();

        if (found.Count < times_match && !en.MoveNext() || !second_predicate((T)en.Current))
            return Enumerable.Empty<T>();

        found.Add((T)en.Current);
        return found;
    }
} 
```

**用法：**

```
var valid_seq = new Int32[] {800, 3423, 423423, 1, 2, 3, 4, 5, 200, 433, 32};
var result = MatchThis(valid_seq, e => e<100, 5, e => e>100); 
```

**结果：**

![在此处输入图像描述](../Images/dd5e526d8e6542caea867866e620c2fc.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:46:29.770

看起来你想要连续的 6 个元素，其中前 5 个匹配 predicate1，最后一个（第 6 个）匹配 predicate2。您的非 linq 版本工作正常，在这种情况下使用 linq 有点不情愿。并且试图在一个 linq 查询中解决问题会使问题变得更加困难，这是一个（也许）更干净的 linq 解决方案：

```
int continuous = 5;
var temp = array.Select(n => FirstTest(n) ? 1 : 0);
var result = array.Where((n, index) => 
               index >= continuous 
               && SecondTest(n) 
               && temp.Skip(index - continuous).Take(continuous).Sum() == continuous)
    .FirstOrDefault(); 
```

[如果你有方法，](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs?r=f85495b139a19bce7df2be98ad88754ba8932a28)事情会更容易。[`Morelinq.Batch`](http://code.google.com/p/morelinq/source/browse/MoreLinq/Batch.cs?r=f85495b139a19bce7df2be98ad88754ba8932a28)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:53:20.800

```
var result = array.GetSixth(FirstTest).FirstOrDefault(SecondTest);

internal static class MyExtensions
{
      internal static IEnumerable<T> GetSixth<T>(this IEnumerable<T> source, Func<T, bool> predicate)
       {
            var counter=0;
            foreach (var item in source)
            {
                if (counter==5) yield return item;
                counter = predicate(item) ? counter + 1 : 0;
            }
        }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-03T08:53:12.467

就像其他人提到的那样，LINQ 并不是这种模式匹配需求的理想解决方案。但是，它仍然是可能的，而且它不一定是丑陋的：

```
Func<int, bool> isBody = n => n == 8;
Func<int, bool> isEnd = n => n == 2;
var requiredBodyLength = 5;

//    Index:       0  1  2  3  4  5  6  7  8  9 10 11 12 13 14
int[] sequence = { 6, 8, 8, 9, 2, 1, 8, 8, 8, 8, 8, 8, 8, 2, 5 };
//                                         ^-----------^  ^
//                                             Body      End

// First we stick an index on each element, since that's the desired output.
var indexedSequence = sequence.Select((n, i) => new { Index = i, Number = n }).ToArray();

// Scroll to the right to see comments
var patternMatchIndexes = indexedSequence
    .Select(x => indexedSequence.Skip(x.Index).TakeWhile(x2 => isBody(x2.Number)))             // Skip all the elements we already processed and try to match the body
    .Where(body => body.Count() == requiredBodyLength)                                         // Filter out any body sequences of incorrect length
    .Select(body => new { BodyIndex = body.First().Index, EndIndex = body.Last().Index + 1 })  // Prepare the index of the first body element and the index of the end element
    .Where(x => x.EndIndex < sequence.Length && isEnd(sequence[x.EndIndex]))                   // Make sure there is at least one element after the body and that it's an end element
    .Select(x => x.BodyIndex)                                                                  // There may be more than one matching pattern, get all their indices
    .ToArray();

//patternMatchIndexes.Dump();   // Uncomment in LINQPad to see results 
```

**请注意，此实现根本不是高性能的，它只是作为一种教学辅助工具来展示如何在 LINQ 中完成某些事情，尽管以这种方式解决它并不合适**。

# javascript - 如何将焦点设置到 iframe 跨域中的顶部框架。

> ID：11791693
> 
> 赞同：0
> 
> 时间：2012-08-03T08:03:17.913
> 
> 标签：javascript, html, cross-domain, same-origin-policy

我的网页中有一个 iframe。因此，当在 iframe 内按下 Esc 时，我需要将焦点设置在文档的顶部框架上。iframe 来自不同的域。![在此处输入图像描述](../Images/bd99d81517f12e162c10399e052a8059.png)

这里 Frame-B URL 将是一些 abc.com，而 frame-A 将来自 xyz.com

因此，当在 Frame-B 中触发事件时，我需要关注 Frame-A。

我可以在 Frame-A 和 Frame-B 中绑定任意数量的事件。

我找到了一种像“iframe 中的 iframe 中的 iframe”这样的旧方法。不感兴趣的。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:26:43.883

如果您对外部框架有一些控制（假设它是您的站点，但仍然与 B 不同），那么您的问题有多种解决方案。**如果您无法控制外框**（例如，因为它是 google.com），**那么您无能为力**。浏览器旨在防止它。见乔纳斯的回答。

那么如果可以控制外页呢？以下任何一项都可以：

*   使用[postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)。您所要做的就是在 Frame-A 中添加一个非常通用的事件侦听器。它适用于除 IE7 及以下版本的“所有”浏览器。
*   使用服务器作为中间人。从 Frame-B 向您的服务器发送一个请求，并让 Frame-A 从那里访问它。如果您不想轮询，您可以在 Frame-A 中使用 Web 套接字（或者更确切地说是一个好的 Web 套接字库，如果 Web 套接字不存在，则可以使用其他技术）。
*   使用片段标识符破解。您可以在此处阅读相关内容（以及其他几种技术）：http: [//softwareas.com/cross-domain-communication-with-iframes](http://softwareas.com/cross-domain-communication-with-iframes)

# java - java字符文本字段验证

> ID：11791696
> 
> 赞同：-1
> 
> 时间：2012-08-03T08:03:36.063
> 
> 标签：java

我想要名称文本字段验证，并且我正在使用此代码，但无法正常工作。

```
Name_text.addKeyListener(new KeyAdapter() {

            @Override
          public void keyPressed(KeyEvent EVT){

            if(EVT.getKeyChar()>='a'&& EVT.getKeyChar()<='z'|| EVT.getKeyChar()>='A'&& EVT.getKeyChar()<='Z'|| EVT.getKeyChar()==8|| EVT.getKeyChar()==26){

            Name_text.setEditable(true);
            }
            else{

         JOptionPane.showMessageDialog(null, "enter characters only");

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:43:26.403

[你真的应该使用DocumentFilter](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)类来执行这种类型的验证，这正是它的设计目的。如果用户将文本粘贴到字段中或您使用`setText`，您将不会通过`KeyListener`

您还可以查看[这个](http://www.jroller.com/dpmihai/entry/documentfilter)以获取一些示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:07:49.930

我猜您想使用以下代码进行验证：

```
 if (Character.isDigit(EVT.getKeyChar())) {
                Name_text.setEditable(true);
                Name_text.setText("");
            } else {
                JOptionPane.showMessageDialog(null, "enter characters only");
            } 
```

由您的评论编辑。

# arrays - Postgresql - 在大数据库中使用数组的性能

> ID：11791698
> 
> 赞同：23
> 
> 时间：2012-08-03T08:03:38.133
> 
> 标签：arrays, performance, postgresql, join, bigdata

假设我们有一个包含 600 万条记录的表。有 16 个整数列和几个文本列。它是只读表，因此每个整数列都有一个索引。每条记录大约 50-60 字节。

表名是“Item”
服务器是：12 GB RAM，1,5 TB SATA，4 个核心。postgres 的所有服务器。
此数据库中有更多表，因此 RAM 不会覆盖所有数据库。

我想在表“项目”中添加一列“a_elements”（大整数的数组类型）每条记录在该列中的元素不超过 50-60 个。

之后，我将在此列上创建索引 GIN，典型的查询应如下所示：

```
select * from item where ...... and '{5}' <@ a_elements; 
```

我还有第二个更经典的选择。

不要将列 a_elements 添加到表项，而是创建具有两列的表元素：

*   id_item
*   id_element

该表将有大约 2 亿条记录。

我能够对这些表进行分区，因此表元素中的记录数将减少到 2000 万，表项中的记录数将减少到 500 K。

第二个选项查询如下所示：

```
select item.* 
from item 
    left join elements on (item.id_item=elements.id_item) 
where .... 
and 5 = elements.id_element 
```

我想知道从性能的角度来看，哪种选择会更好。postgres 是否能够在单个查询中使用带有索引 GIN（选项 1）的许多不同索引？

我需要做出正确的决定，因为导入这些数据需要 20 天。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-03T11:46:49.960

我认为你应该使用一张`elements`桌子：

*   Postgres 将能够使用统计信息来预测在执行查询之前将匹配多少行，因此它将能够使用最佳查询计划（如果您的数据分布不均匀则更为重要）；

*   您将能够使用本地化查询数据`CLUSTER elements USING elements_id_element_idx`；

*   当 Postgres 9.2 发布时，您将能够利用仅索引扫描；

但我对 10M 元素做了一些测试：

```
create table elements (id_item bigint, id_element bigint);
insert into elements
  select (random()*524288)::int, (random()*32768)::int
    from generate_series(1,10000000);

\timing
create index elements_id_item on elements(id_item);
Time: 15470,685 ms
create index elements_id_element on elements(id_element);
Time: 15121,090 ms

select relation, pg_size_pretty(pg_relation_size(relation))
  from (
    select unnest(array['elements','elements_id_item', 'elements_id_element'])
      as relation
  ) as _;
      relation       | pg_size_pretty 
---------------------+----------------
 elements            | 422 MB
 elements_id_item    | 214 MB
 elements_id_element | 214 MB

create table arrays (id_item bigint, a_elements bigint[]);
insert into arrays select array_agg(id_element) from elements group by id_item;

create index arrays_a_elements_idx on arrays using gin (a_elements);
Time: 22102,700 ms

select relation, pg_size_pretty(pg_relation_size(relation))
  from (
    select unnest(array['arrays','arrays_a_elements_idx']) as relation
  ) as _;
       relation        | pg_size_pretty 
-----------------------+----------------
 arrays                | 108 MB
 arrays_a_elements_idx | 73 MB 
```

所以另一方面数组更小，索引更小。在做出决定之前，我会进行一些 200M 元素测试。

# android - 当用户从联系人的完整操作使用菜单中选择我的应用程序时如何获取联系人

> ID：11791699
> 
> 赞同：0
> 
> 时间：2012-08-03T08:03:40.957
> 
> 标签：android

我正在写自动拨号器。我的主要活动有一个编辑文本，可以在他们单击“从联系人添加”时输入电话号码或从联系人中检索。它工作正常。

现在，我的要求是我需要将我的应用程序添加到 Contact 的 Complete Action Using 菜单中。

它也完成了。但是当用户使用菜单从完整的操作中选择我的应用程序时，我想要选择的电话号码并设置电话号码。在我的主屏幕上。

现在只有我的应用程序被打开并且电话号码。是黑色的。

我想知道如何获得选定的电话号码。当他们从联系人启动我的应用程序时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T14:07:41.510

这是我对我的问题的回答。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    Intent intent = getIntent();
    String action = intent.getAction();
    if(action != null){

        // Set the user selected phone number when action lunch directly
        // from
        // contacts
        if (action.equalsIgnoreCase(INTENT_CALL_PRIVILEGED)) {
            setCallPrivilegedData();
        }
    }
    setCardSpinner();

}

private void setCallPrivilegedData() {
    phoneNumber = getIntent().getDataString();
    EditText phoneNoEditText = (EditText) findViewById(R.id.phone_no);
    try {
        phoneNoEditText.setText(URLDecoder.decode(phoneNumber.substring(4),
                "utf-8"));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# javascript - 使用 Javascript SDK 时是否需要传递访问令牌？

> ID：11791702
> 
> 赞同：0
> 
> 时间：2012-08-03T08:03:51.503
> 
> 标签：javascript, facebook-javascript-sdk

我刚刚开始使用 Graph API 和 Javascript SDK。我有一个页面将使用 fb:login 按钮对用户进行身份验证，并且我已使用 /me/feed 成功发布了状态更新。但是，当我尝试检索事件列表或帖子时，响应是一个空数组。我已经从 FB 文档中剪切并粘贴了一些示例，它们会导致未定义的对象。

我在身份验证上遗漏了什么吗？我的用户正在授权 user_events 和friend_events。我想如果我可以发帖，我应该可以阅读。希望这是显而易见的。

这是总是导致错误情况的代码示例：

```
function getFriends() {
    FB.api('/me/friends', function(response) {
        if(response.data) {
            $.each(response.data,function(index,friend) {
                alert(friend.name + ' has id:' + friend.id);
            });
        } else {
            alert("Error!");
        }
    }); 
```

和我的登录按钮和初始化代码：

```
<fb:login-button autologoutlink="true" perms="status_update,publish_stream,user_events,friends_events"></fb:login-button>
<script language="javascript" type="text/javascript">
    FB.init({
        appId: 'myappid',
        status: true,
        cookie: true,
        xfbml: true
    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:17:13.347

不，您不必传递 access_token .... 也许这只是一个复制粘贴错字，但您在代码中错过了一个右括号

# php - 通过电子邮件请求系统

> ID：11791703
> 
> 赞同：2
> 
> 时间：2012-08-03T08:03:54.180
> 
> 标签：php, mysql, email, cron, request

我需要为网站创建服务。这是一个通过电子邮件的请求系统：将消息写入电子邮件服务器，这将产生一个动作。

**例如**：当使用主题*mysecretpassword*向电子邮件地址写入`reboot@midominio.com`时，它将在服务器上运行命令 reboot。

我想到了几种可能。

*   创建服务来解释 MTA 请求并将其委托给 PHP 解释器等...
*   使用 Postfix 并将电子邮件保存在 MySQL 和*cron*阅读器中
*   使用常规邮件服务器并使用*cron*启动访问 POP3/IMAP 服务器并读取邮箱的 PHP 脚本。

请参阅：这些选项中哪个最有趣？你知道任何开源项目都喜欢获取代码的想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:07:42.097

正常的做法是创建一个[管道别名](https://stackoverflow.com/a/2466271/20862)，然后在脚本中从标准输入读取和解码消息。

# android - 将不透明度设置为形状

> ID：11791705
> 
> 赞同：0
> 
> 时间：2012-08-03T08:03:56.353
> 
> 标签：android

我有这样的形状：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

<stroke
  android:width="1dp"
  android:color="#d5dce5" />

<corners android:radius="5dp" />

<gradient
  android:angle="270"
  android:centerColor="#e7eff8"
  android:endColor="#e9f0f8"
  android:startColor="#e0e8f1" />

</shape> 
```

我在我的布局中包含这样的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

....

  <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/rectangle"
        android:layout_width="276dp"
        android:layout_height="wrap_content"
        android:background="@drawable/rectangle"
        android:layout_gravity="center_horizontal">
  </LinearLayout>

....

</LinearLayout> 
```

如何将此形状的不透明度设置为 50%？是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:08:54.873

这是十六进制颜色的工作原理：

```
# + Transparent + Transparent + Red + Red + Green + Green + Blue + Blue. 
```

所以让我们取你的中心颜色： android:centerColor="#e7eff8"

FF 的 50% = 7F。

最终结果 = #7fe7eff8"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:08:20.130

您将需要使用 RGBA 颜色而不是 RGB：

[http://en.wikipedia.org/wiki/RGBA_color_space](http://en.wikipedia.org/wiki/RGBA_color_space)

其中前 2 个是 Alpha，第 2 个 2 是红色，第 3 个 2 是绿色，第 4 个 2 是蓝色

# kernel - 当另一个硬件中断出现时内核会做什么，同时处理一个中断

> ID：11791708
> 
> 赞同：2
> 
> 时间：2012-08-03T08:04:10.950
> 
> 标签：kernel

当内核处理中断时，如果硬件提出另一个中断请求，它会做什么，简单地放弃它？或者这种行为有害吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:08:46.927

在linux kernel 2.6+中，会将中断请求加入到队列中，请求处于等待状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:09:00.840

中断将一直等待，除非它的优先级高于前一个，在这种情况下它可能会抢占前一个。此外，如果有太多的中断挂起，内核将（至少 linux）恢复到软件排队中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T09:26:34.107

小心带有各种 RT 补丁的内核：那里的中断具有优先级，因此可能在另一个中断内部有一个中断。实际上，这种情况下的自旋锁不再是自旋锁，它们变成了一种互斥锁；因此可以用更高优先级中断一个低优先级中断。

例如，请参阅[此演示文稿](http://elinux.org/images/e/ef/InterruptThreads-Slides_Anderson.pdf)。

祝你好运。

# xamarin.ios - 实现以下自定义布局的最佳方法是什么？

> ID：11791709
> 
> 赞同：0
> 
> 时间：2012-08-03T08:04:30.697
> 
> 标签：xamarin.ios, xamarin

我有点想知道定制 UI 的推荐方法是什么。我有大约 5 个屏幕，它们将共享一些相同的元素。一个是顶部栏，有点像导航栏，但不同。它的左侧有标题，没有后​​退按钮，右侧有背景图像和徽标。另一个是底部的菜单，其中包含用于栏的 UIImageView、3 个 UIButtons 打开 2 个不同的屏幕和一个打开相机。我想在所有 5 个屏幕上重复使用顶部栏和底部栏。有点像在 ASP.NET 上使用 UserControl。

目前我已经创建了 5 个 ViewControllers，这给了我 5 个 XIB 文件，我必须在上面放置相同的元素，并且我必须连接相同的事件。我想创建 2 个元素（顶部和底部栏），我可以在所有屏幕上重复使用它们。或者是否有一个更简单的解决方案来解决所有这些问题，例如将不同的中间部分推入其中的 1 个屏幕或类似的东西？就这件事而言，MonoTouch 是初学者，所以我很想知道这样的事情的发展方向是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T10:16:01.867

如果您无法自定义/重用标准 UINavigationController 等，您可以 -

1.  在 Xamarin / Monotouch 中为每个可重用元素创建一个自定义**UIView**，然后根据需要将它们插入每个 ViewController（以编程方式可能是最简单的）。这将提供一些代码重用，类似于您提到的**UserControl示例。**

2.  或者**，对于 IOS5+**，您可以创建一个自定义 ViewController 容器，它将所有公共部分放在一个地方，并有一个容器 UIView，然后您可以根据需要切换其余的 Content ViewController。

实际上，我刚刚完成了一个 github 示例，这可能会有所帮助-

[https://github.com/wickedw/ViewControllerContainer](https://github.com/wickedw/ViewControllerContainer)

# interface-builder - Interface Builder XIB 编译器错误

> ID：11791710
> 
> 赞同：2
> 
> 时间：2012-08-03T08:04:31.953
> 
> 标签：interface-builder, xcode4.4

将两个 UISwipeGestureRecognizers 连接到 XIB 文件内我的项目中的单个视图时，我收到此错误消息（尽管奇怪的是不在新项目中）。有人知道这个错误是什么意思吗？这是一个编译错误，而不是运行时错误。我正在使用 Xcode 4.4（这个错误实际上不会发生在 Xcode 4.5 上）。这是来自界面生成器内部的错误。

> -[IBCocoaTouchToolObjectPackage connectionsByProcessingConnections:]、/SourceCache/IBSimulatorComponents/IBSimulatorComponents-223/IBCocoaTouchTool/IBCocoaTouchToolObjectPackage.m:1132012-08-03 16:52:01.428 Interface Builder Cocoa Touch Tool[5646:11903] 产生异常的 nib 中的断言失败：不匹配为合并出口连接及其片段之一添加ContentToExistingCollection 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:14:55.413

我怀疑这是因为 Interface Builder 允许您的网点进入不一致的状态。这是 Interface Builder 中的一个逻辑错误，在编译器中表现为运行时异常`ibtool`。我能够通过断开我最近创建的插座和插座集合来解决它，然后重新连接它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T17:02:29.797

实际上，我可以通过删除 XIB 中的整个面板来消除错误，然后撤消删除。Clean + Build，错误消失了。不确定这是否也适用于其他人。

# django - Django 管理员登录背景

> ID：11791717
> 
> 赞同：1
> 
> 时间：2012-08-03T08:04:52.173
> 
> 标签：django, django-admin, django-templates

如何在 django 中仅更改管理员登录站点的背景图像？我尝试了一些方法，但没有实现。

我已将 base_site.html 放在模板\管理员下。

关于背景图像的编码下一步是什么？

```
{% extends "admin/base.html" %}
{% load i18n %}

{% block title %}{{ title }} | {% trans 'Django site admin' %}{% endblock %}

{% block extrastyle %}
<style type="text/css">
# body {background-color: #444444;}
</style>
{% endblock %}

{% block branding %}
<h1 id="site-name">{% trans 'Admin Login' %}</h1>
{% endblock %}

{% block nav-global %}{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:25:09.497

正确的代码是：

```
{% block extrastyle %}
<style type="text/css">
body.login {background-color: #444444;}
</style>
{% endblock %} 
```

问题是`#`在 css 中它指的是一个 id，即`<some_tag id="body">`而不是`<body>`. `body.login`以带有`login`类的 body 标签为目标，即`<body class="login">`django 管理站点用来识别登录屏幕的正文。

# javascript - 我如何使文本字段在文本中间可编辑

> ID：11791718
> 
> 赞同：0
> 
> 时间：2012-08-03T08:04:52.080
> 
> 标签：javascript

```
//The porpost of this function is prevent user type any thing intext field except 0-9 and .

//For recieve value,event and keycode from text field.    
    function allowOnlyFloatingPointNumbers(textbox,val,key)
        {
        var MaxLen = 11;
        var val2 = val.replace(/,/g,"");
        var letterNumber = /^[0-9.]+$/;
         if((val2.match(letterNumber)))
          {
                textbox.value = val;
          }
        else
          {
                textbox.value = val.substr(0,val.length-1);
                return;
          }

            var valtmp = val;
            if(valtmp.indexOf(".")<0)
            {
                if(valtmp.replace(/,/g,"").length>MaxLen)
                {
                    textbox.value = addCommas(val.substr(0,val.length-1));
                }
                else
                {
                    textbox.value = addCommas(valtmp.replace(/,/g,""));
                }
            }
            else
            {
                val = val.replace(/[^0-9.]/g, "");         // strip non-digit chars
                textbox.value = addCommas(val);            // replace textbox value
                var indx = val.indexOf(".");
                if(indx>-1)
                {
                    var lng = val.substr(indx+1).length;
                    if(lng>2)
                    {
                        textbox.value = addCommas(val.substr(0,val.length-1));
                    }
                }
            }

        }
    function addCommas(nStr)
                {
                        nStr += "";
                        x = nStr.split(".");
                        x1 = x[0];
                        x2 = x.length > 1 ? "." + x[1] : "";
                        var rgx = /(\d+)(\d{3})/;
                        while (rgx.test(x1)) {
                            x1 = x1.replace(rgx, "$1" + "," + "$2");
                        }
                        return x1 + x2;
                } 
```

现在如果我输入 987654321 它将是 987,654,321 在文本框中

但是如果我需要在文本中间进行编辑，例如将 5 更改为 0，则文本将为 987,643,210，在文本末尾插入零，我需要将其设置为 987,604,321，我应该更改函数的哪一部分。

我使用 IE 9。

这是示例[http://jsbin.com/arivug/1](http://jsbin.com/arivug/1)

# java - 如何使用 HTMLUnit 确定页面更改？

> ID：11791728
> 
> 赞同：2
> 
> 时间：2012-08-03T08:05:24.810
> 
> 标签：java, web-scraping, htmlunit

我正在寻找一种聪明的方法来确定自从我上次使用 HTMLUnit 对它进行检查以来网站是否发生了变化。

我正在使用 HTMLUnit 来抓取网页的一些值，但由于页面的布局发生了变化，这些值有时会失败。在这些情况下，我希望收到通知，该页面自上次访问以来看起来有所不同。

我考虑过通过简单地将其写入文件来持久化通过 HTMLUnit 获得的页面对象。下次我运行我的程序时，我可以将新对象与持久对象进行比较。

对此有何看法？有没有更聪明的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:16:10.147

如果您需要做的只是与新布局进行交互而不管它是否已更改的信息，请在执行任何后续调用之前再次尝试执行`page.refresh()`or调用。`getPage()`否则...好吧，我只是查看了[`HtmlPage`API](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/HtmlPage.html)，而您需要的功能目前似乎还没有内置到其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:01:30.527

由于似乎没有更聪明的方法来处理这个问题，我做了我在问题中提出的建议。获取页面，持久化源代码，并在我下次运行程序时将这个持久化的 html 源代码与新的源代码进行比较。

缺点是它不适用于像 google.com 这样的页面，因为它们似乎是动态创建页面。大多数其他网站都可以工作。

# java - Java：MDB 和 Spring 的 SingletonBeanFactoryLocator

> ID：11791734
> 
> 赞同：0
> 
> 时间：2012-08-03T08:05:39.413
> 
> 标签：java, spring, ejb

在我继承的代码库中，有一个`MDB`which 正在调用`SingletonBeanFactoryLocator().getIntance().useBean()`以在其 中获取工厂引用`ejbCreate()`，然后从该工厂获取特定的 bean 并将其存储为`MDB`实例变量。（工厂类型为“ `ClassPathXmlApplicationContext`”）。

**令人困惑的部分是：**`release()`在获得该 bean 之后，它在同一个工厂引用上调用“ ” `ejbCreate()`。

现在，这`MDB`是与 poolsize ' `x`' 合并的，我观察到的是，其中定义的 bean`context xml`被创建了 ' `x`' 次数。所以我的猜测是，每次 ' `ejbCreate()`' 执行时，它都会重新创建一个上下文及其 bean。

我检查了 Spring 文档的 '`release()`上面说：

```
In an EJB usage scenario this would normally be called from `ejbRemove()` and `ejbPassivate()`. 
```

所以这是我的问题：

1）是否真的创建了一个新的上下文并`everytime ejbCreate()`调用了新的bean？

2) 如果是，那么在上一次调用中创建的上下文/bean 会发生什么情况（例如，如果 bean 本身是单例的，它们会被*销毁*吗）？

3）这是在上面的上下文中使用`SingletonBeanFactoryLocator`（可能是线程安全问题）的正确方法吗？

4）如果没有，正确的使用方法*是*什么？

编辑：我能想到的一种可能性是使相关的 bean`prototype`使每个 MDB 实例线程安全，因此无需释放和重新创建上下文。等待其他意见/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:47:45.410

1.  是的
2.  没发生什么事。相同的对象仍将位于相同的 MDB 中。MDB 不在乎，此时 Spring 已不在考虑范围之内。
3.  这真的取决于使用环境。如果你只是使用 Spring 来组装对象并且每个 MDB 都应该有它自己的实例，那么答案是肯定的。
4.  根据用例`SpringBeanAutowiringInterceptor`，可能是也可能不是更好的选择。
5.  原型可能很棘手。您必须充分了解您的 bean 及其后果，才能使其达到您的预期。这就是为什么通常最好让春豆无国籍。

**更新：** 实际上存在竞争条件。如果容器决定`ejbCreate()`并行运行两个 MDB，那么它们最终将共享相同的应用程序上下文。

**更新 2：** 我找不到明确允许通过并行线程创建 EJB 的部分，但我也找不到明确禁止它的部分。

鉴于规范中的以下部分，我认为这样做符合规范的精神。

* * *

## 2.4.2 消息驱动对象

一个典型的 EJB 容器提供了一个可伸缩的运行时环境来同时执行大量的消息驱动对象。

# 5.2 目标

消息驱动 bean 模型的另一个目标是允许通过容器提供的消息驱动 bean 实例池的方式并发处理消息流。

# 5.4 消息驱动 Bean 实例与其容器之间的协议

容器负责确保消息驱动的 bean 在容器启动时出现，并且 bean 的实例在消息传递开始之前准备好接收异步消息传递。

## 5.4.11 消息处理的并发性

容器允许消息驱动的 bean 类的多个实例同时执行，从而允许并发处理消息流。不保证将消息传递到消息驱动 bean 类的实例的确切顺序，尽管容器应该在不损害消息处理的并发性的情况下尝试按顺序传递消息。

# java - JPA Long @Id as JAXB @XmlID 生成 XSD 验证错误

> ID：11791735
> 
> 赞同：5
> 
> 时间：2012-08-03T08:05:44.687
> 
> 标签：java, jpa, jaxb, jpa-2.0

我已经实现了一个基于 JPA 和 JAXB 的 REST API。

我有一个大致像这样的课程（非常简化）：

```
@Entity
@XmlRootElement
...
public class Thing {
    @Id
    @GeneratedValue
    ...
    @XmlAttribute
    @XmlID
    @XmlJavaTypeAdapter(JAXBLongAdapter.class)
    private Long id;
    ...
} 
```

Hibernate（我当前的 JPA 提供程序）生成数字作为 id 值，但它们自然只对一种类型是唯一的，在本例中为 Thing。

现在 XSD 说 xsd:id (@XmlID) 是一个不能是普通数字的 NCString，所以我在 JAXBLongAdapter 中的数字前添加了一个“_”。- 像'_1'

现在模式验证器抱怨：

```
[org.xml.sax.SAXParseException: cvc-id.2: There are multiple occurrences of ID value '_1'.] 
```

如果我理解正确，则 xsd:ID 元素必须具有在 xml 文档中全局唯一的（字符串）值。但这与在数据库中使用 ID 的常见方式完全相反。

现在我该怎么做？我想到了三件事：

*   为具有特定类型前缀的每种类型创建一个 JAXBLongAdapter？
*   使用另一个 JPA id 生成器，也许是 UUID？- 但是哪一个？
*   停止使用@XmlID 和@XmlIDREF，这会造成冗余和一般混乱。

看来我现在必须更改数据库模式以使用不同的 ID。- 但如果 ID 保持简短就更好了，因为它们出现在 URL 中。

我的问题：是否有一个速度相当快且全球唯一的 ID 生成器？还是有另一种解决方法？

编辑：

这个 hack 有点工作，让 JPA ID 保持不变。

```
@XmlID
@XmlAttribute(name="id")
private String getXmlID(){
    return String.format("%s-%s", this.getClass().getSimpleName(), this.getId().toString());
}

private void setXmlID(String xmlid){
    String prefix = String.format("%s-", this.getClass().getSimpleName());
    if(xmlid.startsWith(prefix)){
        this.id = Long.parseLong(xmlid.substring(prefix.length()));
    }else{
        throw new IllegalArgumentException(xmlid+" does not look like "+prefix+"###");
    }
} 
```

通过将 JAXB 注释从字段移动到 XmlID 的专用私有 getter/setter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:22:46.137

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**答案应该是什么**

答案应该是在和属性`@XmlSchemaType`上都使用注释。不幸的是，JAXB RI 没有利用这种组合，而 EclipseLink MOXy 仅将它用于. 我输入了以下 MOXy 错误，如果您对此方法感兴趣，我们可以修复它：`@XmlID``@XmlIDREF``@XmlID`

*   [http://bugs.eclipse.org/386569](http://bugs.eclipse.org/386569)

**员工**

```
package forum11791735;

import java.util.List;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Employee {

    @XmlID
    @XmlJavaTypeAdapter(JAXBLongAdapter.class)
    @XmlSchemaType(name="long")
    private Long id;

    @XmlIDREF
    @XmlSchemaType(name="long")
    private Employee manager;

    @XmlElement(name="report")
    private List<Employee> reports;

} 
```

**解决方法**

您看到的错误似乎是由于架构验证。您是否可以禁用模式验证或设置 a`ValidationEventHandler`以`Unmarshaller`忽略这些错误？

*   [http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html](http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html)

**备择方案**

如果您使用`@XmlID`/`@XmlIDREF`来映射双向关系，那么您可能对 MOXy 的`@XmlInverseReference`扩展感兴趣：

*   [http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html](http://blog.bdoughan.com/2010/07/jpa-entities-to-xml-bidirectional.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:34:15.860

这正是我一段时间以来所做的。

`@XmlID`你可以问自己，这个域对象在编组时实际上是什么？

我曾经想过`@XmlID`并且`@XmlIDREF`可以解决 JAXB 中的循环问题。

下面是我对 JPA 实体以及 JAXB 注释所做的事情。

不要放弃`simple JPA @Id`。这就是 JPA 的核心。

```
@XmlRootElement
public class Parent {

    @Id
    @XmlAttribute
    private Long id;

    @OneToMany
    @XmlElement(name = "child")
    @XmlElementWrapper
    private Collection<Child> children;
}

@XmlRootElement
public class Child {

    @XmlAttribute
    private Long getParentId() {
        return parent.getId();
    }

    @Id
    @XmlAttribute
    private Long id;

    @ManyToOne
    @XmlTransient // for preventing infinite circular problem
    private Parent parent;
} 
```

# symfony - 再生蛞蝓学说2

> ID：11791738
> 
> 赞同：1
> 
> 时间：2012-08-03T08:05:54.467
> 
> 标签：symfony, doctrine-orm, slug

我正在尝试为我在安装 Doctrine2 的 Sluggable 扩展之前创建的实体重新生成 slug，如下所述：[重新生成 slug](http://www.gediminasm.org/article/sluggable-behavior-extension-for-doctrine-2#advanced-examples)，但是当我将其设置为空字符串或 null 时，不会重新生成它，它只是设置为 null .

我做错了什么？

实体：

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Gedmo\Mapping\Annotation as Gedmo;

/**
* @ORM\Entity
* @ORM\Table(name="product")
*/
class Product
{

/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(type="string", length=200)
 * @Assert\NotBlank()
 */
protected $name;

/**
 * @ORM\Column(type="text")
 * @Assert\NotBlank()
 */
protected $description;

...

/**
 * @Gedmo\Slug(fields={"name"})
 * @ORM\Column(length=200, unique=true)
 */
private $slug;

public function getSlug()
{
    return $this->slug;
}
public function setSlug($slug)
{
    $this->slug = $slug;

}
} 
```

然后我试试这个：

```
$repository = $this->getDoctrine()->getRepository('CommonBundle:Product');
$product = $repository->findOneBy(array("id"=>1));
$product->setSlug('');
$em = $this->getDoctrine()->getEntityManager();
$em->persist($product);
$em->flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:08:44.330

好的。我知道发生了什么。您可能正在使用旧版本的 Doctrine Extensions，可能是 2.1.0 版。如果您使用 Symfony 2.0.X 进行开发，就会出现这种情况，因为这是推荐的版本。检查你的 deps 文件，你可能有类似的东西：

```
[gedmo-doctrine-extensions]
    git=http://github.com/l3pp4rd/DoctrineExtensions.git
    version=v2.1.0 
```

那些旧版本的扩展不支持文档中描述的行为（如果它是空的，则重新生成 slug）。您将需要升级您的扩展版本，但这可能意味着您可能必须将您的 Doctrine 版本升级到 2.2，不太确定。

# r - 在 R 中使用 sprintf 评估动态表达式

> ID：11791742
> 
> 赞同：2
> 
> 时间：2012-08-03T08:06:18.347
> 
> 标签：r, printf

我试图通过以下方式在评估之前动态创建一个表达式：

```
authors <- c("John1","John2")
exp1 <- "(Author1==%s & Author2==%s)" 
```

我想得到以下字符串：

```
desired_output <- "(Author1==\"John1\" & Author2!=\"John2\")" 
```

，然后可以使用 eval() 进行评估。

我试过：`sprintf(exp1,authors)`，但这不起作用......解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:29:07.990

你可以使用这个：

```
library(plyr)
splat(sprintf)(c(exp1, authors)) 
```

或者没有图书馆：

```
do.call(sprintf,as.list(c(exp1,authors))) 
```

# javascript - 如何通过 javascript 从 state.xml 文件中检索所有状态名称？

> ID：11791745
> 
> 赞同：-1
> 
> 时间：2012-08-03T08:06:27.370
> 
> 标签：javascript, xml, foreach

# javascript

```
<states>
<state name="Rajkot" colour="#ff0000"> 
 <point lat="23.463246" lng="68.444284"/>
 <point lat="23.986253" lng="68.708496"/>
</state>
<state name="Surat" colour="#ff0000"> 
 <point lat="23.463246" lng="68.444284"/>
 <point lat="23.986253" lng="68.708496"/>
</state> 
<state name="Baroda" colour="#ff0000"> 
 <point lat="23.463246" lng="68.444284"/>
 <point lat="23.986253" lng="68.708496"/>
</state> 
```

我有这个名为 state.xml 的 xml 文件。我想要每个州名（baroda，surat，rajkot），然后每个州名的每个点都通过javascript使用循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:19:07.013

这里是一个使用 jquery 的例子：http: [//jsfiddle.net/ynKEk/](http://jsfiddle.net/ynKEk/)

使用 jquery，您可以将 xml 字符串解析为如下对象：

```
var $xml = $(xmlString); 
```

之后，您可以像这样遍历这个对象：

```
$xml.find('state').each(function() {

    var state = {};
    state.name = $(this).attr('name');

} 
```

# postgresql - 如何在 Doctrine 2 中使用“DISTINCT ON (field)”？

> ID：11791748
> 
> 赞同：11
> 
> 时间：2012-08-03T08:06:47.060
> 
> 标签：postgresql, doctrine-orm

我知道如何在 Doctrine 2 中使用“DISTINCT”，但我确实需要使用“DISTINCT ON (field)”，而且我不知道如何使用 QueryBuilder 执行此操作。

我的 SQL 查询如下所示：

```
SELECT DISTINCT ON (currency) currency, amount FROM payments ORDER BY currency 
```

而且这个查询很完美，但我不能将它与 QueryBuilder 一起使用。也许我可以用其他方式写这个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-17T21:02:30.047

我建议`SELECT DISTINCT ON (..)`PostgreSQL 支持的结构在 Doctrine 核心的对象关系模型 (ORM) 之外。或者，也许换一种说法，因为`SELECT DISTINCT ON (..)`在 SQL 实现中很少见 Doctrine 没有为它编码。

不管它不起作用的实际逻辑如何，我建议您尝试 Doctrine 的“ [Native SQL](http://doctrine-orm.readthedocs.org/en/latest/reference/native-sql.html) ”。您需要将查询结果映射到 ORM。

> 您可以执行本机 SELECT SQL 语句并将结果映射到`NativeQuery`Doctrine 实体或 Doctrine 支持的任何其他结果格式。
> 
> 为了使这种映射成为可能，您需要向 Doctrine 描述结果中的哪些列映射到哪个实体属性。该描述由一个`ResultSetMapping`对象表示。
> 
> 使用此功能，您可以将任意 SQL 代码映射到对象，例如高度供应商优化的 SQL 或存储过程。

`SELECT DISTINCT ON (..)`我认为属于**供应商优化的 SQL**，因此使用`NativeQuery`应该允许您访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T11:57:52.447

Doctrine QueryBuilder 有一些限制。即使我没有检查是否可以使用查询生成器，当我不知道如何使用查询生成器编写查询时，我也会毫不犹豫地使用 DQL。

[在http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#dql-select-examples](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#dql-select-examples)查看这些示例

希望这有帮助。

# .htaccess - .htaccess 防止 B 标志编码 + 符号或将 %20 的出现更改为 +?

> ID：11791753
> 
> 赞同：0
> 
> 时间：2012-08-03T08:07:13.127
> 
> 标签：.htaccess

我的 .htaccess 文件的这一行基本上会转义并将第一个目录转换为查询字符串。

```
RewriteRule ^([^/]+)/?$ /a/?s=$1 [L,QSA,B] 
```

我这样做主要是为了转义 & 符号，但它会转义所有非字母数字字符，包括“+”符号。我不想逃避这些，以便网址更干净。

```
eat%20a%20pizza 
```

我想：

```
eat+a+pizza 
```

是否可以以某种方式将 '%20' 替换为 '+' 或阻止 B 标志编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:17:05.700

不确定是否有办法具体说明`B`标志的工作方式，但您可以将其更改`%20`为`+`：

```
RewriteRule ^(.*)%20(.*)$ /$1+$2 [NE,L] 
```

您可能需要找到合适的位置来放置它，因为它需要循环以摆脱所有`%20`'s.

# asp.net-mvc - 在asp.net MVC3中提交ajax表单后更新div内容

> ID：11791762
> 
> 赞同：1
> 
> 时间：2012-08-03T08:07:41.543
> 
> 标签：asp.net-mvc, razor, updatepanel, asp.net-mvc-validation, asp.net-mvc-ajax

```
<div id="myDiv">
    <ul class="purpose">
    @{ 
        var purpose = CommonMethod.getPurpose("");
        for(int i=0;i<10 && i<purpose.Count();i++)
        {
            <li><a href="#" >@purpose[i].Text</a></li>
        }
     }
    </ul>
</div> 
```

从列表中选择上述单一用途时，它将在 ajax 表单下方显示以进行更新

```
@using (Ajax.BeginForm("UpdatePurpose", "Admin", new AjaxOptions { UpdateTargetId = "updateDiv" }))
{
    <div  class="profile">
    @Html.Hidden("PurposeID")
    <table>

        <tr>
             <td>Purpose</td>
             <td>:</td>
             <td> width="30%">@Html.TextBox("Description")</td>         
        </tr>
        <tr>
            <td>Admin Password</td>
            <td>:</td>
            <td>@Html.Password("Passwd1")</td>
        </tr>
    </table>
   <input type="submit"  value="submit" />
   </div>
} 
```

在 Subting 之后调用下面的动作

```
[HttpPost]
public ActionResult UpdatePurpose(string PurposeID,string Description, string Passwd1)
{

    if (Request.IsAjaxRequest())
    {
        if (!Membership.ValidateUser(User.Identity.Name, Passwd1))
        {
            ModelState.AddModelError("", "Invalid Admin Password");
        }
        if (ModelState.IsValid)
        {
            var id = Convert.ToByte(PurposeID);
            var pur = db.Purposes.Where(p => p.PurposeID == id).SingleOrDefault();
            pur.Description = Description;

            db.SaveChanges();
            ViewBag.Result = "Data Updated Successfully.";
            return View();
        }
    }
    return View();
} 
```

在提交上面的 ajax 表单更新目的时，如果管理员密码无效，我想显示验证消息错误，并且如果模型状态有效，我想加载 myDiv 内容并向用户提供成功更新消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:23:57.077

移除`Ajax.BeginForm`HTML Helper 并编写一些手写的 jQuery 代码。然后，您可以进行任何类型的自定义。

我会像这样保留您的标记（删除 AjaxForm，使用普通表单声明，添加 css 类名称以提交按钮）

```
<div  class="profile">
<form>
@Html.Hidden("PurposeID")
<table>
    <tr>
         <td>Purpose</td>
         <td>:</td>
         <td> width="30%">@Html.TextBox("Description")</td>         
    </tr>
    <tr>
        <td>Admin Password</td>
        <td>:</td>
        <td>@Html.Password("Passwd1")</td>
    </tr>
</table>
<input type="submit" value="submit" class="btnSavePurpose" /> 
```

并添加一些像这样的javascript

```
<script type="text/javascript">
 $(function(){

    $(".btnSavePurpose").click(function(e){
       e.preventDefault();
       var item=$(this);
       $.post("@Url.Action("UpdatePurpose","Admin")", 
                         item.closest("form").serialize(), function(data){
           if(data.Status=="Success")
           {
             //Let's replace the form with messsage                
             item.closest(".profile").html("Updated Successfully");
           }    
           else
           {
              alert(data.ErrorMessage);
           }

       });   
    });   

 });

</script> 
```

现在更新您的 Action 方法以返回`JSON`数据

```
[HttpPost]
public ActionResult UpdatePurpose(string PurposeID,string Description, string Passwd1)
{        
    if (Request.IsAjaxRequest())
    {
        if (!Membership.ValidateUser(User.Identity.Name, Passwd1))
        {
            return Json( new { Status="Error",
                               ErrorMessage="Invalid Admin Password"});
        }
        if (ModelState.IsValid)
        {
            var id = Convert.ToByte(PurposeID);
            var pur = db.Purposes.Where(p => p.PurposeID == id).SingleOrDefault();
            pur.Description = Description;

            db.SaveChanges();
            return Json( new { Status="Success"});
        }
    }
    return View();
} 
```

它所做的是，当用户单击具有该 CSS 类的按钮时，它将序列化容器表单并将其发送到`Action`方法。然后操作方法完成它的工作，如果验证失败，它将`JSON`以以下格式发送回客户端

```
 { "Status": "Errorr", "ErrorMessage": "Invalid Admin Password"} 
```

如果没问题，它将执行数据库更新并以这种格式将 JSON 发送回客户端。

```
 { "Status": "Success"} 
```

在 out 函数的回调中`ajax(POST)`，我们正在检查`Status`in 的值`JSON`并向用户显示适当的消息。

简单干净:)

# django - MongoDB - MongoEngine - 我如何遵循“另一方”的参考？

> ID：11791765
> 
> 赞同：4
> 
> 时间：2012-08-03T08:07:55.263
> 
> 标签：django, mongodb, reference, mongoengine

自从四天以来，我试图弄清楚如何从一个类到另一个类的引用，从被引用的类开始。在 SQL-Django 中，有一个`related_name`可以实现这一点...

例如我有这个类：

```
class MyClass(Document):
    ...
    other_classes = ListField(ReferenceField(Other_Class)) 
```

和这个：

```
class Other_Class(Document):
    ... 
```

现在我想去...`Other_Class`有`MyClass`什么想法吗？

谢谢，

罗恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T09:35:36.597

这是一个显示如何查询它的测试用例：

```
import unittest
from mongoengine import *

class StackOverFlowTest(unittest.TestCase):

    def setUp(self):
        conn = connect(db='mongoenginetest')

    def test_one_two_many(self):

        class MyClass(Document):
            other_classes = ListField(ReferenceField("OtherClass"))

        class OtherClass(Document):
            text = StringField()

        MyClass.drop_collection()
        OtherClass.drop_collection()

        o1 = OtherClass(text='one').save()
        o2 = OtherClass(text='two').save()
        m = MyClass(other_classes=[o1, o2]).save()

        # Lookup MyClass that has o1 in its other_classes
        self.assertEqual(m, MyClass.objects.get(other_classes=o1))

        # Lookup MyClass where either o1 or o2 matches
        self.assertEqual(m, MyClass.objects.get(other_classes__in=[o1, o2])) 
```

主要问题是您是否需要将参考列表存储在`MyClass`? `OtherClass`将关系存储在..上可能更有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:34:39.113

在思考我的问题时，我想出了一个解决方案。

我只是将我引用的类的 ID 添加到我的模型中。

这是一个例子：

```
class MyClass(Document):
    ...
    other_classes = ListField(ReferenceField(Other_Class))

class Other_Class(Document):
    myclass = ReferenceField(MyClass) 
```

我不太确定这是否是 Mongo 的方式，但我很确定它有效:)

或者，您可以省略`other_classes`属性`MyClass`以避免冗余，但是您需要这样的查询来获取“子”对象：

```
Other_Class.objects(myclass = myclass.id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:38:36.513

试试这个查询：

```
oc = Other_Class()
MyClass.objects.find( other_classes__all = [oc.id] ) 
```

# objective-c - Mac OSX 上意大利语的 POS-Tagging API

> ID：11791771
> 
> 赞同：0
> 
> 时间：2012-08-03T08:08:15.403
> 
> 标签：objective-c, ruby, nlp, pos-tagger, part-of-speech

我需要帮助寻找适用于意大利语文档的 POS-Tagging API。我更喜欢开源代码（可能是 ruby​​、jruby、macruby、java、scala）。我编写的程序将在 Mac OsX 上运行，我已经浏览过[这个列表](http://www-nlp.stanford.edu/links/statnlp.html#Taggers "统计自然语言处理和基于语料库的计算语言学：带注释的资源列表")，但“意大利语”没有太多内容

[从 10.8 开始，Cocoa NSLinguisticTagger 为西班牙语和意大利语提供了词性标签和词条](https://developer.apple.com/library/mac/#releasenotes/Cocoa/Foundation.html "Mac OS X 开发者发行说明")，我可以尝试一下，但在升级我的 OSX 10.7 之前，请告诉我你是否认为真的值得，或者我是否有其他好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:07:45.780

[Tree Tagger](http://www.ims.uni-stuttgart.de/projekte/corplex/TreeTagger/)支持意大利语并在 OS X 上运行。

# python - 从 scons 文件运行 epydoc 和/或 pylint 构建器

> ID：11791776
> 
> 赞同：0
> 
> 时间：2012-08-03T08:08:19.693
> 
> 标签：python, scons, epydoc

我将如何从构建的[scons](http://www.scons.org/)创建运行[epydoc](http://epydoc.sourceforge.net/)或/和[pylint](http://www.logilab.org/857/)的构建器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:18:51.977

您可以使用[Command() 构建器](http://www.scons.org/doc/production/HTML/scons-user/apd.html#f-Command)，而不是创建自己的构建器。

例如，您可以按如下方式执行 epydoc：

```
# SCons will substitute $SOURCE and $TARGET accordingly
# add any extra cmd line args you need to the cmd string
cmd = 'epydoc $SOURCE $TARGET'
env.Command(target = yourTarget, source = yourSourceFile_s, action = cmd) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:25:05.593

[根据Brady](https://stackoverflow.com/users/1158895/brady)的[回答](https://stackoverflow.com/a/11791924/232794)，这是我最终使用的。

```
## Create epydoc!
import os.path
if os.path.isfile('/usr/bin/epydoc'):
    sources = Split("__init__.py ook/ eek/ fubar/")
    cmd = "epydoc -q --name 'Isotek Python Module collection' " + \
          "--html --inheritance listed --graph all -o docs --css white " + \
          "--parse-only --debug $SOURCES"
    env.Command(target = Dir('docs'), source = sources, action = cmd)
else:
    print "WARNING -- Cannot run epydoc so documentation will not be generated."
    print "WARNING -- To install epydoc run 'sudo yum -y install epydoc'." 
```

请注意，我在 Fedora 上运行，不需要担心在其他地方运行的代码，因此我可以假设路径以及如何安装 epydoc。欢迎进行更一般的编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:58:45.127

这是另一种方法，可能更适合大型项目。

首先，`epydoc.py`在`site_scons/site_tools`（或任何你有这些的地方）定义为：

```
# -*- coding: utf-8 -*-
import SCons.Builder
import SCons.Action

def complain_epydoc(target, source, env):
    print 'INFORMATION: epydoc binary was not found (see above). Documentation has not been built.'

def generate(env):
    env['EPYDOC'] = find_epydoc(env)
    if env['EPYDOC'] != None:
        opts = '--quiet --html --inheritance listed --graph all --css white --parse-only '
        env['EPYDOCCOM'] = '$EPYDOC ' + opts + '-o $TARGET  $SOURCES'
        env['BUILDERS']['epydoc'] = SCons.Builder.Builder(action=env['EPYDOCCOM'])
    else:
        env['BUILDERS']['epydoc'] = SCons.Builder.Builder(action=env.Action(complain_epydoc))

def find_epydoc(env):
    b=env.WhereIs('epydoc')
    if b == None:
        print 'Searching for epydoc: not found. Documentation will not be built'
    else:
        print 'Searching for epydoc: ', b
    return b

def exists(env):
    if find_epydoc(env) == None:
        return 0
    return 1 
```

在主`SConstruct`文件中，添加：

```
import epdoc
env.Tool("epydoc") 
```

然后，在您的`SConstruct`文件中`SConscript`，您可以像这样构建文档：

```
Alias('epydoc', env.epydoc(source=python_code_files, target=Dir('docs'))) 
```

**注意**：您可以对 ctags 和 pylint 执行相同的操作，仅举几例。

# php - 图片上传在 IE 中不起作用且未提交表单

> ID：11791777
> 
> 赞同：0
> 
> 时间：2012-08-03T08:08:22.093
> 
> 标签：php, javascript, internet-explorer, codeigniter

我有这段代码，并且在除 IE 之外的所有其他浏览器中运行良好。什么也没发生，我也参考了这个链接[IE image caching with jQuery form: Force image reloading](https://stackoverflow.com/questions/9207090/ie-image-caching-with-jquery-form-force-image-reloading) then also not working

```
//jquery.form.js version: 3.10 .

$(document).ready(function () {
    $('#imageuploadform1').live('change', function () {
        var counter = 0;
        $("#preview").html('');
        $("#preview").html('<img src="loader.gif?c=' + counter + '" alt="Uploading...."/>');
        counter++;
        $("#imageform").ajaxSubmit({
            target: '#preview'
        });
    });
}); 
```

我怎么解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:37:18.610

IE 不允许您对不使用本机文件输入并涉及用户物理单击提交按钮的文件上传做任何事情。这是所有浏览器中的一项安全功能，但 IE 对它的处理更为严格。根据我的经验，没有办法在 IE 中做你想做的事，你应该简单地打开一个开关，以便非 IE 用户得到你正在寻找的 wiz-bang，但 IE 用户必须这样做“老式”的方式。

# php - Jquery Infinite-Scroll不是无限过去的第2页

> ID：11791782
> 
> 赞同：1
> 
> 时间：2012-08-03T08:08:40.287
> 
> 标签：php, jquery, jquery-masonry, infinite-scroll

我正在使用带有动态数据的无限滚动，但似乎无法超过第 2 页...

当页面最初加载时，我在 URL 中有一个偏移量，所以我们从 0 开始，所以，

```
test2.html?offset=0 
```

这是加载日期的代码

```
$offset = $_GET['offset'];

$data = mysql_query("select * from list limit 30 offset $offset;",$db);         

echo '<div id="wall" class="transitions-enabled infinite-scroll clearfix">';

while ($databack33 = mysql_fetch_array($data)){

echo '<div class="block">';

echo '<a href=#><img src="'.$databack33[item_pic_url].'"></a>';

echo '</div>';

} 
```

然后加载我使用的下一页：

```
<nav id="page-nav">

<? $offset = $offset+30; ?>

<a href="test2.html?offset=<?=$offset?>"></a>

</nav> 
```

这适用于第一页和第二页，但它告诉我没有更多的页面可以加载，尽管有更多的数据。

如果我查看页面源代码是正确的`test2.html?offset=60`

这是砌体/无限滚动设置

```
<script type="text/javascript">
$(function(){

var $container = $('#wall');

$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.block',
    isAnimated: true,
    animationOptions: {
        duration: 750,
        easing: 'linear',
        queue: false
      }
  });
});

$container.infinitescroll({
  navSelector  : '#page-nav',    // selector for the paged navigation 
  nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
  itemSelector : '.block',     // selector for all items you'll retrieve
  loading: {
      finishedMsg: 'No more pages to load.',
      img: 'http://i.imgur.com/6RMhx.gif'
    }
  },
  // trigger Masonry as a callback
  function( newElements ) {
    // hide new items while they are loading
    var $newElems = $( newElements ).css({ opacity: 0 });
    // ensure that images load before adding to masonry layout
    $newElems.imagesLoaded(function(){
      // show elems now they're ready
      $newElems.animate({ opacity: 1 });
      $container.masonry( 'appended', $newElems, true ); 
    });
  }
);

  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T20:33:04.150

为了让无限滚动与“offset =”分页一起工作，我做了以下事情：

存储当前的“下一页”url，并获取偏移值。

```
var nextSelector = '#page-nav a';
var origNextUrl = $(nextSelector).attr('href');
var offsetRegex = /(offset=)([0-9]+)/;
var offset = origNextUrl.match(offsetRegex)[2]; 
```

然后在无限滚动中为“路径”选项分配一个函数，该选项接受页码并返回用于加载下一页的 url。

```
$container.infinitescroll({
    // other options
    path: function(pageNum) {
        return origNextUrl.replace( offsetRegex, ("$1" + (offset * pageNum)) );
    },
    //callback
 }); 
```

# java - 如何从字符串中删除特定的特殊字符模式

> ID：11791784
> 
> 赞同：5
> 
> 时间：2012-08-03T08:08:41.107
> 
> 标签：java, string

我有一个字符串名称 s，

```
String s = "<NOUN>Sam</NOUN> , a student of the University of oxford , won the Ethugalpura International Rating Chess Tournament which concluded on Dec.22 at the Blue Olympiad Hotel"; 
```

我想从字符串中删除所有 < **NOUN** > 和 < **/NOUN > 标记。**我用它来删除标签，

```
s.replaceAll("[<NOUN>,</NOUN>]",""); 
```

是的，它删除了标签。**但它也会从字符串中删除字母 'U' 和 'O' 字符，**这给了我以下输出。

```
 Sam , a student of the niversity of oxford , won the Ethugalpura International Rating Chess Tournament which concluded on Dec.22 at the Blue lympiad Hotel 
```

谁能告诉我如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T08:11:53.843

尝试：

```
s.replaceAll("<NOUN>|</NOUN>", ""); 
```

在 RegEx 中，语法`[...]`将匹配括号内的每个*字符*，无论它们出现的顺序如何。因此，在您的示例中，所有出现的“<”、“N”、“O”等都被删除。而是使用管道 ( `|`) 来匹配“<NOUN>”和“</NOUN>”。

以下内容也应该有效（并且可以被认为更加干燥和优雅），因为它将匹配带有和不带有正斜杠的标签：

```
s.replaceAll("</?NOUN>", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:14:21.373

String.replaceAll() 将正则表达式作为其第一个参数。正则表达式：

```
"[<NOUN>,</NOUN>]" 
```

在括号内定义要识别并因此删除*的字符集。*因此，您要求删除字符`<`, `>`, `/`, `N`, `O`,`U`和逗号。

也许做你想做的*最简单的方法是：*

```
s.replaceAll("<NOUN>","").replaceAll("</NOUN>",""); 
```

这在它要删除的内容中是明确的。更复杂的正则表达式显然是可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:23:39.180

您可以为此使用一个正则表达式：“<[/]*NOUN>”所以

```
s.replaceAll("<[/]*NOUN>",""); 
```

应该做的伎俩。“[/]*”匹配“<”之后的零个或多个“/”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-13T09:31:47.163

试试这个 ：`String result = originValue.replaceAll("\\<.*?>", "");`

# ruby-on-rails - 当表单出现错误时，jQuery Chosen 选择消失（使用 AJAX）

> ID：11791786
> 
> 赞同：0
> 
> 时间：2012-08-03T08:08:51.223
> 
> 标签：ruby-on-rails, ajax, jquery-chosen

我有这个问题： ![](../Images/0e3a453d7bdd3070e1cc64589771f43d.png)

正如你所看到的，没有选择，但它应该在那里： ![](../Images/7f566f52714168f5599c8617e1b8e1be.png) 我也在这种形式中使用 AJAX。

也许我应该用 jQuery 做点什么，比如：

```
 $("#tool-form").bind("ajax:error", function() {
  //do something here
}); 
```

**为什么会发生这种情况，我该如何解决？**

```
 <%= form_for(@website, :remote => true) do |f| %>
       <% if @website.errors.any? %>
         The form contains <%= pluralize(@website.errors.count, "error") %>
         <% @website.errors.full_messages.each do |msg| %>
      * <%= msg %>
    <% end %>
    ...
       <%= f.select :language, options_for_select(%w[English Chinese Ukrainian])%>
 <%end%> 
```

调用选择代码：

```
 $("#website_language").chosen(); 
```

# c# - 如何更新数据集中的数据表

> ID：11791788
> 
> 赞同：0
> 
> 时间：2012-08-03T08:08:56.300
> 
> 标签：c#, sql-server, winforms, datatable, dataset

1.  我有一个数据集。
2.  我使用 SQL 服务器在其中填充了一个数据表`tableadapter`
3.  我使用 Rows 属性从数据集中提取数据。数据进入未绑定的列表视图
4.  我更改列表视图中的数据
5.  现在我必须更新列表，正确的方法/方法是什么

从更新的列表视图更新数据表的正确方法是什么一旦数据回到数据表中，更新 sql 服务器的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:05:02.657

你可以在你的数据表上绑定你的列表视图，所以很容易更新它（和 sql server 也是）看到这个网址： [http ://www.velocityreviews.com/forums/t687274-bind-listview-to-datatable-why -is-this-a-problem.html](http://www.velocityreviews.com/forums/t687274-bind-listview-to-datatable-why-is-this-a-problem.html)

# sql-server-2008 - 带有 SMO 的 VS 中的“无法解析符号”错误

> ID：11791794
> 
> 赞同：1
> 
> 时间：2012-08-03T08:09:13.197
> 
> 标签：sql-server-2008, c#-4.0, sql-server-2008-r2, resharper, smo

```
Microsoft.SqlServer.ConnectionInfo.dll
Microsoft.SqlServer.Smo.dll
Microsoft.SqlServer.SmoEnum.dll
Microsoft.SqlServer.SqlEnum.dll
Microsoft.SqlServer.Management.Sdk.Sfc.dll 
```

我已经在我的 C# 项目中引用了上述所有程序集，但是当我输入

```
 Microsoft.SqlServer.Management.Smo.Backup bkpDatabase = new Backup(); 
```

即使我有以下 using 语句，我也会收到此错误“无法**解析符号备份”**

```
using Microsoft.SqlServer.Management.Smo;
using Microsoft.SqlServer.Management.Common; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:15:13.257

除了上面提到的程序集之外，我还没有在我的项目中引用 Microsoft.SqlServer.SmoExtended。

# ruby-on-rails - 未建立 ActiveRecord 连接

> ID：11791795
> 
> 赞同：-1
> 
> 时间：2012-08-03T08:09:18.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我用这个命令创建了一个应用程序 rails new guestbook

然后我用了：-

```
rails generate scaffold Person name:string 
```

在 routes.rb 我取消了哈希`root :to => 'people#index'`

然后我在地址栏中写了 localhost:3000/people 并收到以下错误：-

```
ActiveRecord::ConnectionNotEstablished

ActiveRecord::ConnectionNotEstablished
Rails.root: /home/rudraksha/rbtest/gbook 
```

请尽快回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:24:39.913

无论如何，问题是无法与数据库建立连接。

您是否根据您的数据库配置了 database.yml？如果没有，您必须先配置它。

如果您使用的是 mysql，则必须`mysql`通过将其添加到 gemfile 并相应地运行`bundle install`和配置 database.yml 来安装 gem。

带有 mysql 的 database.yml 示例：

```
development:
  adapter: mysql
  encoding: utf8
  reconnect: false
  database: <db_name>
  pool: 5
  username: <your_mysql_username>
  password: <your_mysql_password>
  host: localhost

production:
  adapter: mysql
  encoding: utf8
  reconnect: false
  database: <db_name>
  pool: 5
  username: <your_mysql_username>
  password: <your_mysql_password>
  host: localhost 
```

# vb.net - VB随机函数两次返回相同的值

> ID：11791797
> 
> 赞同：0
> 
> 时间：2012-08-03T08:09:28.057
> 
> 标签：vb.net, visual-studio-2008

```
Dim top = RandomPosition()
Dim left = RandomPosition()    
End Sub

Function RandomPosition()
    Dim rand As New Random()
    Dim number = rand.Next(1, 100)
    Return number
End Function 
```

嗨，伙计们，我正在尝试获得 2 个不同的随机值（现在。一旦成功，我将需要更多）。问题是用上面的代码`top`总是`left`等于相同的随机数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:12:11.253

您每次调用时都会创建一个*新*`RandomPosition`的随机序列，但是因为您快速连续调用它，它们将具有相同的种子（基于时间）。相同的种子意味着相同的序列。

您应该创建`rand`一次变量，然后继续使用它，例如：

```
Dim rand as New Random()
Dim top = rand.Next (1, 100)
Dim left = rand.Next (1, 100) 
```

或者，如果您*真的*希望它在自己的函数中，请将随机生成器设为静态，以便它在调用之间保持其状态：

```
Function RandomPosition()
    Static rand = New Random()
    Return rand.Next(1, 100)
End Function 
```

以下完整的 VB2010 程序显示了这一点：

```
Module Module1
    Function RandomPosition()
        Static rand As Random = New Random()
        Return rand.Next(1, 100)
    End Function

    Sub Main()
        Dim top = RandomPosition()
        Dim left = RandomPosition()
        MsgBox("top = " & CStr(top) & ", left = " & CStr(left))
    End Sub
End Module 
```

它在各种运行中输出：

```
top = 7, left = 93
top = 45, left = 90
top = 44, left = 62 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:22:42.450

如何创建一个实例`static`来保留相同的实例？

```
Public Function RandomPosition(r) As Integer
    Static rand As System.Random = New System.Random()
    Return rand.Next(1, 100)
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T14:34:16.880

您可以在初始化 Random 对象之前等待 1 毫秒。

```
System.Threading.Thread.Sleep(1)
Dim rand As New System.Random 
```

# sql-server-2008 - 用于测量的最佳性能表设计

> ID：11791798
> 
> 赞同：0
> 
> 时间：2012-08-03T08:09:28.930
> 
> 标签：sql-server-2008, tsql, database-design

我需要创建一个表来保存由设备 id (int)、logdate (datetime) 和 value (decimal) (SQL Server 2008) 组成的测量值。测量值总是在季度，例如 00:00, 00:15, 00:30, 00:45, 01:00, 01:15 ......所以我认为一个 int 定义了自某个日期以来的季度数量将导致比日期时间更好的性能。

检索通常使用以下方法完成：

```
 -where DeviceId = x and QuarterNumber between a and b
  -where DeviceId in (x, y, ...) and QuarterNumber between a and b
  -where DeviceId = x and QuarterNumber = a 
```

这张桌子的最佳设计是什么？

```
PK DeviceId int
PK QuarterNumber int
   Value int 
```

或者

```
PK MeasurementId int
UQ QuarterNumber int
UQ DeviceId int
   Value int 
```

（UQ=唯一索引）

还是完全不同的东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:24:46.027

如果您有数百万行，则可以通过定义自某个日期以来的四分之一小时数来获得稍微更好的 SELECT 性能。

就个人而言，我认为边际性能提升不值得降低可读性。我也不喜欢将设计基于四分之一小时的假设。（根据我的经验，这种要求通常会随着时间的推移而变化。）您现在*可以*在日期时间列上包含一个四分之一小时的 CHECK 约束，如果该要求发生变化，稍后将其删除。

但是，当您可以测试和衡量时，依靠意见是没有意义的。建三张表，加载几百万行样本数据，研究查询计划。（将 5000 万行加载到每个表中并非*完全*不切实际。我有时会在回答关于 SO 的问题时将 2000 万行加载到测试表中。）不要假设您对索引的第一次尝试是最佳的。考虑多个索引，也考虑一个多列索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T09:19:26.360

我认为您的标准没有任何具体的指导方针。您可能需要创建和测试（您可以在每个中插入演示数据）。由于您希望提高性能，我建议您在表中使用索引。

# solr - 将新字段更新到现有文档

> ID：11791803
> 
> 赞同：11
> 
> 时间：2012-08-03T08:10:00.240
> 
> 标签：solr

是否有可能将新字段更新为现有文档？例如：有一个包含多个字段的文档，例如

```
ID=99999
Field1:text
Field2:text 
```

该文档已经在索引中，现在我想在没有旧数据的情况下向该文档插入一个新字段：

```
ID=99999
Field3:text 
```

目前，将删除旧文档并创建具有 ID 的新文档。因此，如果我现在搜索 ID 99999，结果将是：

```
ID=99999
Field3:text 
```

我在 Solr Wiki 上读到了这个

> 如何更新现有文档的特定字段？
> 
> 我想更新文档中的特定字段，这可能吗？我只需要为>一个特定文档索引一个字段。我必须为此索引所有文档吗？
> 
> 不，只有一份文件。假设您有一个 CMS，并且您编辑了一个文档。您只需要对整个文档使用 add solr 语句来重新索引该文档（不仅仅是一个字段）。
> 
> 在 Lucene 中更新文档的操作实际上是先删除再添加。您将需要 > 添加完整的文档，因为 Lucene 中没有这样的“仅更新字段”语义。

那么有什么解决方案吗？这个功能会在以后的版本中实现吗（我目前使用的是 3.6.0）。作为一种解决方法，我考虑编写一个脚本或应用程序，它将收集现有字段、添加新字段并更新整个文档。但我认为这会影响性能。你还有其他建议吗？

此致

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T09:13:16.767

我有 2 个答案给你（或多或少都不好）：

1.  要在 Solr 中更新文档中的归档，您必须重新索引整个文档（要更新文档 ID：99999 中的 Field3，您必须使用所有字段的值重新索引该文档）
2.  在 Solr 4 中，他们实现了类似的功能，但他们有一个条件：必须存储所有字段，而不仅仅是索引。发生的事情是他们在后台使用存储的值和重新索引文档。如果你有兴趣，有一篇关于它的好文章：http: [//solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/](http://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/)这个解决方案有明显的缺陷，那就是大小存储所有字段时的索引。

我希望这能帮助你解决你的问题。如果您还有其他问题，请询问

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-10T20:16:49.883

It is possible to do this in Solr 4\. E.g. Consider the following document

```
{
 "id": "book123",
 "name" : "Solr Rocks"
} 
```

In order to add an author field to the document the field value would be a json object with "set" attribute and the field value

```
$ curl http://localhost:8983/solr/update -H 'Content-type:application/json' -d '
[
 {"id"       : "book123",
  "author"   : {"set":"The Community"}
 }
]' 
```

Your new document

```
$ curl http://localhost:8983/solr/get?id=book123 
```

will be

```
{
 "doc" : {
    "id"    : "book123",
    "name"  : "Solr Rocks"
    "author": "The Community"
 }
} 
```

Set will add or replace the author field. Along with set you also have the option to increment(inc) and adding(add)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-11T08:59:29.393

从 Solr 4 开始，您可以更新 solr 中的字段 ....无需重新索引整个索引 .... 支持各种修饰符，例如 ....

set – 设置或替换特定值，如果将 null 指定为新值，则删除该值 add – 将附加值添加到列表中 remove – 从列表中删除值（或值列表） removeregex – 从列表中删除与给定 Java 正则表达式匹配的列表 inc – 将数值递增特定数量（使用负值递减）

例子 ：

文档

```
{
 "id": "1",
 "name" : "Solr"
 "views" : "2"
} 
```

现在更新

```
$ curl http://localhost:8983/solr/demo/update -d '
[
 {"id"         : "1",
  "author"   : {"set":"Neal Stephenson"},
  "views"   : {"inc":3},
  }
]' 
```

将导致

```
{
 "id": "1",
 "name" : "Solr"
 "views" : "5"
 "author" : "Neal Stephenson"
} 
```

# python - Lo 类别的基数

> ID：11791804
> 
> 赞同：2
> 
> 时间：2012-08-03T08:10:05.207
> 
> 标签：python, unicode

我试图弄清楚 Unicode 类别的基数，例如`Lo`. 似乎我找不到有关此的权威信息。例如[Fileformat.info](http://www.fileformat.info/info/unicode/category/Lo/index.htm)`11788`维护这个类别中有字符的视图，[Codepoints.net](http://codepoints.net/search?gc=Lo)低至`122`，而 Python 的`unicodedata`，即使仅限于基本平面，也提供了`45301`!:

```
In [219]: Lo=[unichr(c) for c in xrange(65536) 
              if unicodedata.category(unichr(c)) == 'Lo']

In [220]: len(Lo)
Out[220]: 45301 
```

任何人都可以指出一个可靠的来源来解决这个问题吗？！

编辑：

Python 代码段中的结果`len(Lo)`取决于所使用的[UCD](http://www.unicode.org/ucd/)版本，因此取决于 Python 版本。我的结果是 Python 2.6 使用 UCD 5.1 版，Python 2.7 和 UCD 5.2 产生`45877`相同的表达式，而 Python 3.2 和 UCD 6.0 可能会产生另一个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:22:14.360

最终信息将是[Unicode 标准](http://www.unicode.org/)本身。特别是，有关字符数据库的信息可[在此处](http://www.unicode.org/ucd/)获得，其中提供了有关 Unicode 字符数据库的信息。当前标准有 11788 个 Lo 分类代码点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:27:51.743

引用 Python 的文档`unicodedata`：

> 该模块提供对 Unicode 字符数据库的访问，该数据库定义了所有 Unicode 字符的字符属性。此数据库中的数据基于可从[ftp://ftp.unicode.org/](ftp://ftp.unicode.org/)公开获得的 UnicodeData.txt 文件版本 5.2.0 。
> 
> 该模块使用 UnicodeData 文件格式 5.2.0 定义的相同名称和符号（参见 [http://www.unicode.org/reports/tr44/tr44-4.html](http://www.unicode.org/reports/tr44/tr44-4.html)）。它定义了以下函数：

Unicode 联盟在他们的“关于我们”中：

> Unicode 联盟是一个非营利组织，致力于开发、维护和推广软件国际化标准和数据，特别是 Unicode 标准，它规定了所有现代软件产品和标准中的文本表示。Unicode 联盟积极开发国际化领域的标准，包括定义 Unicode 字符之间的行为和关系。该联盟与 W3C 和 ISO 密切合作，特别是与负责维护 ISO/IEC 10646 的 ISO/IEC/JTC 1/SC2/WG2，这是与 Unicode 标准同步的国际标准。

查看主页，当前标准似乎是 6.1（2012 年 5 月），因此可能自 5.2 版（2009 年 10 月）以来，一些“Lo”字符已被重新分类。

检查：[http ://www.unicode.org](http://www.unicode.org)

# postgresql - pip install 失败并显示 /usr/bin/clang: No such file or directory

> ID：11791806
> 
> 赞同：8
> 
> 时间：2012-08-03T08:10:09.193
> 
> 标签：postgresql, pip, psycopg2, osx-mountain-lion

我正在将我的开发环境迁移到 10.8，但是我遇到了 pip 问题。

具体来说，我正在使用 virtualenvs/virtualwrapper 但不能`pip install psycopg2`，并且在构建`psycopg2._psycopg`扩展程序期间，我得到：

```
unable to execute /usr/bin/clang: No such file or directory
error: command '/usr/bin/clang' failed with exit status 1 
```

任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T08:55:50.233

这可能是因为您在升级后没有重新安装命令行工具。

通常 XCode 应该升级到最新版本（4.4）（我相信当我更新到 10.8 时，我还更新了一大堆其他应用程序，包括 XCode）。更新后您需要重新安装命令行工具。现在可以通过 XCode 中的设置来完成：

转到“首选项-> 下载”并安装“命令行工具”。

现在您在安装需要编译的软件包时应该没有更多问题了。

# https - Https 连接被服务器拒绝

> ID：11791808
> 
> 赞同：2
> 
> 时间：2012-08-03T08:10:13.147
> 
> 标签：https, rsa

我正在尝试编写一个将由 bat 文件调用的独立程序。我发现了类似信任所有证书管理器的东西。

```
TrustManager[] trustAllCerts = new TrustManager[]{
        new X509TrustManager() {
            public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                return null;
            }

            public void checkClientTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
            }

            public void checkServerTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
            }
        }
    };

// Install the all-trusting trust manager
        try {
            SSLContext sc = SSLContext.getInstance("SSL");
            sc.init(null, trustAllCerts, new java.security.SecureRandom());
            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

        URL url = new URL("--insert server url here--");
//url.openStream();
//  URLConnection urlConnection = url.openConnection();
            HttpsURLConnection urlConnection = (HttpsURLConnection) url.openConnection();
} catch (MalformedURLException mfe) {
            mfe.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

它在我的 ide 中运行良好，但是在我通过 bat 文件构建并运行它之后，它一直给我这个错误

```
javax.net.ssl.SSLException: Server key
        at sun.security.ssl.Handshaker.throwSSLException(Unknown Source)
        at sun.security.ssl.ClientHandshaker.processMessage(Unknown Source)
        at sun.security.ssl.Handshaker.processLoop(Unknown Source)
        at sun.security.ssl.Handshaker.process_record(Unknown Source)
        at sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)
        at sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source
)
        at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
        at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
        at sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source)
        at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect
(Unknown Source)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown So
urce)
        at java.net.HttpURLConnection.getResponseCode(Unknown Source)
        at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(Unk
nown Source)
        at sss.Sss.main(Sss.java:65)
Caused by: java.security.NoSuchAlgorithmException: NONEwithRSA Signature not ava
ilable
        at java.security.Signature.getInstance(Unknown Source)
        at sun.security.ssl.JsseJce.getSignature(Unknown Source)
        at sun.security.ssl.RSASignature.<init>(Unknown Source)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)

        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)

        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Sou
rce)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at java.lang.Class.newInstance0(Unknown Source)
        at java.lang.Class.newInstance(Unknown Source)
        at java.security.Provider$Service.newInstance(Unknown Source)
        at sun.security.jca.GetInstance.getInstance(Unknown Source)
        at java.security.Signature.getInstance(Unknown Source)
        at sun.security.ssl.JsseJce.getSignature(Unknown Source)
        at sun.security.ssl.RSASignature.getInstance(Unknown Source)
        at sun.security.ssl.HandshakeMessage$DH_ServerKeyExchange.<init>(Unknown
 Source)
        ... 13 more 
```

难道我做错了什么？我应该签署证书才能连接到服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T01:31:09.263

已经找到上述问题的答案，需要将 sunjce_provider.jar 包含到独立程序的 lib 文件夹中。

# java - 长名称如何影响响 应大小？

> ID：11791809
> 
> 赞同：0
> 
> 时间：2012-08-03T08:10:14.407
> 
> 标签：java, playframework

我正在使用游戏框架进行 Web 开发。我想知道更长的变量对用户的查询处理有什么影响。换句话说，变量的名称如何影响查询大小？更长的名称是否意味着要发送更长的查询，从而需要更长的时间来处理用户请求？更短的 JSON 是否意味着对用户的响应时间更短？较短的变量名会显着降低代码的可读性。

## 我发现了什么

如果我将我的变量重命名为从 autoEngineId 发送到 aeId 的 json 中，那么性能并没有太大提升，但这可能是因为我没有大量的用户请求需要处理。该站点处于开发模式。

有人可以告诉我 JSON 中较小的变量名称的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:18:03.770

除非您的变量名称是大学论文的长度，否则网络上的响应时间不会有明显差异。花时间优化重要的地方。这将是分析告诉你它会计数的地方。

较短名称的主要优点是程序员的打字更少。使名称足够长，以便当您在一个月后回到您的代码时，该名称将至少提供有关其用途的线索。因为你会忘记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:18:49.050

我建议您分析您的应用程序以确定可以提高性能的地方。即使经过 20 年的性能系统调优经验，我仍然发现测量是确保您 a) 致力于最显着的性能改进 b) 您不会让事情变得更糟的唯一方法。

在您的情况下，我假设您有特别的理由相信属性名称的长度是一个性能问题，它只是您更改的东西。这种性能调整方法更有可能使事情变得更糟而不是更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:21:53.737

较小的变量名称可能会为您节省一点带宽，但性能影响（除非您有数十万个对象数组条目）将非常小，您不太可能注意到任何事情。

从长远来看，没有有意义的变量名的影响会让你付出更多的代价。性能和可扩展性很便宜，而人力则不然，从长远来看，设计良好的代码总是会为自己付出很多倍的代价。

# linux - 通过 TIOCGICOUNT 检索错误计数器总是返回错误 (-1)

> ID：11791813
> 
> 赞同：4
> 
> 时间：2012-08-03T08:10:32.663
> 
> 标签：linux, ioctl, ftdi

在为 USB 到 RS422 转换器模块开发接口应用程序时，我遇到了一个显示停止问题。

我需要为帧、溢出、奇偶校验和中断错误检索 UART 错误计数器。但是对 ioctl 的调用总是返回 -1 并且来自检索到的结构的计数器值会跳到非常大的数字。

我用来检索计数器的代码如下：

```
struct serial_icounter_struct counters;
int ret = ioctl(portDescriptor, TIOCGICOUNT, &counters); 
```

要设置 portDescriptor，我使用了类似的代码：

```
int portDescriptor = open("/dev/ttyUSB0", O_RDWR | O_NOCTTY | O_NDELAY);

struct termios new_port_settings;
//clear the new struct
memset(&new_port_settings, 0, sizeof(new_port_settings)); 

//set port settings
new_port_settings.c_cflag = B57600 | CS8 | CLOCAL | CREAD;
new_port_settings.c_oflag = 0;
new_port_settings.c_lflag = 0;
new_port_settings.c_cc[VMIN] = 0;
new_port_settings.c_cc[VTIME] = 0;

int error = tcsetattr(portDescriptor, TCSANOW, &new_port_settings) 
```

有时我们还需要启用流量控制或奇偶校验，例如

```
new_port_settings.c_cflag = new_port_settings.c_cflag | CRTSCTS; 
```

我已经在 Ubuntu 11.10 32 位和 SLES11 SP1 64 位上尝试了代码，两者都带有 FTDI_SIO 内核模块。

有人知道关于 TIOCGICOUNT 使用的任何问题，还是我做错了什么？

# jquery - 如何在鼠标悬停时显示/隐藏 div

> ID：11791818
> 
> 赞同：0
> 
> 时间：2012-08-03T08:11:22.423
> 
> 标签：jquery, html, hide, mouseover, show

当您将鼠标悬停时，我正在尝试显示一个 div。

我正在使用 jQuery 1.3。

这是我所拥有的：

```
$('#hoveroverthis').hover(function() {$('#showbox').show()}); 
```

这不应该工作吗？

编辑：固定。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:16:57.683

您可以在函数中编写此代码`$.document.ready()`并检查它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:17:05.120

这个问题的最终答案是：**是**的，*假设*您输入了正确的元素 ID，并且在运行此脚本时存在具有这些 ID 的元素，那么这应该可以工作。

为确保文档已准备好被 JavaScript 操作，请将您的代码包装在文档“就绪”事件的句柄中。jQuery为此提供了一个快捷方式：

```
$(function() {
    // Everything in this context will be executed when the document is ready
    $('#hoveroverthis').hover(function() {$('#showbox').show()});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:19:50.633

你可以使用这个：

```
$(document).ready(function(){//when document is ready (loaded) these functions will initialise
  $('#hoveroverthis').hover(function() {
     $('#showbox').show()
  },function() {//mouseleave event
     $('#showbox').hide()
  });  
}); 
```

# c# - 在测试中抛出新异常

> ID：11791827
> 
> 赞同：0
> 
> 时间：2012-08-03T08:12:23.500
> 
> 标签：c#, exception, testing, fitnesse

在浏览我的应用程序代码时，我遇到了这个问题：

```
private string[] ReadFromFile(string path)
{
    string[] data = null;
    try
    {
        data = File.ReadAllLines(path);
    }
    catch (Exception)
    {
        throw new Exception("The file is not correct");
    }

    return data;
} 
```

好的，所以我知道这段代码不好，我正要重构它。但是，此代码用于 FitNesse 的某些测试的定义中。此代码**从未**在生产中使用。此方法*中给出的参数应该*始终正确。所以我想删除整个 try/catch 块，如果它应该让它崩溃。FitNesse 会给我们关于抛出异常的全部细节，但由于它是一个测试夹具，我想知道它是否*可以*。

`File.ReadAllLines`可以抛出十几个不同的异常。

所以我的问题是：在生产环境之外拥有这样的代码是否可以接受，即使用于测试生产代码，并且在受控制的环境中？还是在任何情况下都不好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:18:54.347

在单元测试中使用这样的代码比在生产代码中使用更糟糕。在生产代码中，有时隐藏一些异常细节可能是有意义的（尽管它们仍然应该通过`InnerException`例如交付）但在单元测试中你应该总是尽可能多地看到，因为它们是为**你**完成的（开发人员，而不是最终用户） . 所以我认为应该删除整个 try/catch 块。

此外，如果在其他情况下您希望测试失败，那么我建议使用`Assert.Fail("message")`构造，因为它更清楚，如果达到这一点，测试应该被视为失败。不确定它是否可以应用于 FitNesse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:01:06.317

我会抓住它，然后抛出一个简化的异常，该异常将利用 FitNesse 的功能

```
private string[] ReadFromFile(string path)
{
    string[] data = null;
    try
    {
        data = File.ReadAllLines(path);
    }
    catch (Exception)
    {
        throw new Exception("message:<<Problem reading in file: " +e.getMessage() + ">>");
    }

    return data;
} 
```

如果您这样做，错误消息将出现在上下文中并且更容易识别。不幸的是，未包装的异常将出现在与有问题的夹具分开的异常块中。e.printStackTrace() 将在输出页面上为您提供可以为您提供更多详细信息的信息。

我同意其他人的观点，即在单元测试代码中，您希望异常发生在代码的上下文中。但是，在单元测试中，您的受众是不同的。与它一起工作的人应该始终是开发人员。对于 FitNesse 测试，您正在与 BA 和测试人员合作，他们可能会从一些额外的诊断中受益。

我添加的代码是 Java，我知道这是 ac# 测试，但精神是相同的，“消息：<< 异常”在 FitSharp 中应该同样适用于 slim。我在 Java 和 ruby​​ 中工作，所以我的 c# 真的很弱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:16:17.170

如果你捕捉到异常，你应该对它做点什么，写日志，例如如果你只抛出你自己的异常，你会丢失最后一个异常的堆栈跟踪。

# keypress - 如何在 FF 中停止 Gxt TextBox KeyPress 事件，因为它在 IE 上工作

> ID：11791828
> 
> 赞同：1
> 
> 时间：2012-08-03T08:12:38.933
> 
> 标签：keypress, gxt, onkeypress

在 IE 中，当“KeyPress”事件未调用导航键时，但在 FF 中它正在触发“KeyPress”事件，如何停止此操作。我正在使用带有 KeyPress 事件的 Gxt 'TextField'，如下所示

```
firstNameField.addListener(Events.KeyPress, getKeyPressListener());

private Listener<FieldEvent> getKeyPressListener(){
    return new Listener<FieldEvent>() {
        public void handleEvent(FieldEvent be) {
             char key = getChar(be.getEvent());
             if (!((key+"").matches("^[A-Za-z \\'\\-\\&]+$"))) {
                 be.stopEvent();
             }
        }
        // needed due to GWT 2.1 changes
        private native char getChar(NativeEvent e) /*-{
            return e.which || e.charCode || e.keyCode || 0;
        }-*/;
    };
} 
```

我已经配置了一些正则表达式，它只允许用户输入“A-Za-z”、“-”和“&”，除了这些值之外，它会阻止用户输入。

此代码在 IE 中运行良好，因为它不会在导航键按下时触发“KeyPress”事件，但是当涉及到 FF 时，“KeyPress”事件会在每次按键时触发。所以让'FF'像'IE'一样工作

# django - Errno 13 权限被拒绝：带有本地主机的媒体文件夹

> ID：11791833
> 
> 赞同：4
> 
> 时间：2012-08-03T08:12:59.350
> 
> 标签：django, file-upload, permissions, media, ioerror

我收到一条消息

[Errno 13] Permission denied: u'/home/.../...jpg' 当我尝试在 django 中上传文件时。但是只有当我尝试使用 localhost/ 时才会出现问题。当我使用 localhost:8000 运行或调试它时，我没有遇到任何问题。

当我运行脚本来设置我的数据库时，我使用函数创建文件夹。

我的代码：

```
def handle_uploaded_file(request,f):
    user=Users.objects.get(id_u=request.user.id)
    url=settings.MEDIA_URL+'images/'+user.mail+'/gallery/'+f.name
    fullurl=settings.MEDIA_ROOT+'images/'+user.mail+'/gallery/'+f.name
    #comprobar si existe el archivo
    if not os.path.exists(fullurl): 
        destination = open(fullurl, 'wb+') 
    ...
        destination.close() 
```

文件夹媒体中的权限。我想将文件上传到“图像”文件夹中。这里我看到其他人没有写权限，但是up文件夹有777。那么，为什么我的脚本在创建子文件夹时会更改权限？

```
4 drwxrwxrwx  3 bernardo www-data 4096 ago  3 09:42 .
4 drwxrwxr-x 11 bernardo www-data 4096 jul 31 12:36 ..
4 drwxrwxr-x  5 bernardo bernardo 4096 ago  3 09:42 images 
```

我的 http.config

```
ServerName localhost

WSGIPythonPath /home/bernardo/workspace/mbosoziales

Alias /media/ /home/bernardo/workspace/mbosoziales/media/
Alias /static/ /home/bernardo/workspace/mbosoziales/static/

<Directory /home/bernardo/workspace/mbosoziales/static>  
Order deny,allow
Allow from all
</Directory>

<Directory /home/bernardo/workspace/mbosoziales/media>
Order deny,allow
Allow from all
</Directory>

WSGIScriptAlias / /home/bernardo/workspace/mbosoziales/mbosoziales/wsgi.py

<Directory /home/bernardo/workspace/mbosoziales/mbosoziales>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

因此，每次运行为用户创建文件夹的第一个脚本后，我都必须更改权限，因为尽管我认为权限是正确的，但他们没有写入媒体文件夹的权限。

```
sudo chgrp -R www-data images/
chmod -R o+w images/ 
```

任何帮助，将不胜感激。对不起我的英语:)

添加了完整的例外：环境：

```
Request Method: POST
Request URL: localhost:8000/user/upload/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'admin',
 'login',
 'suchen',
 'user',
 'photologue')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in             get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/home/bernardo/workspace/mbosoziales/user/views.py" in upload
  332\.             handle_uploaded_file(request,request.FILES['file'])
File "/home/bernardo/workspace/mbosoziales/user/views.py" in handle_uploaded_file
  344\.         destination = open(fullurl, 'wb+')

Exception Type: IOError at /user/upload/
Exception Value: [Errno 13] Permission denied: u'/home/bernardo/workspace    /mbosoziales    /media/images/bern@ardo.com/gallery/list.csv' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T08:04:02.057

当您使用`runserver`时，该进程以您的普通用户身份运行；该用户有权`/home/username/`创建文件夹和文件。

当您在 Apache 下运行它时，代码将作为 apache 进程运行 - 通常`www-data`，并且该用户无权在您的主目录下创建文件夹。

解决方案不是*即使*`chmod 777`这有效。有两种更好的方法来解决这个问题：

1.  对于生产使用，将文件路径更改为`www-data`用户通常具有权限的目录；这*不应该*是您的主目录。

2.  如果您必须使用主目录下的位置；创建一个新路径并将其父级的所有者设置为`www-data:www-data`. 这将允许它在不授予一揽子`777`权限的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:13:10.270

我认为没有，因为之前我有

```
if not os.path.exists(fullurl): 
```

所以，只有在没有文件的情况下才会打开。我已经调试了好几次并且工作正常，但是权限存在问题。现在我找到了一个解决方法

```
os.chmod(url,0777) 
```

我第一次运行服务器并创建文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:04:43.187

您在这里创建的文件有可能吗？

```
destination = open(fullurl, 'wb+') 
```

当您尝试执行代码时，是否已在某处创建并打开或使用？

# c# - 尝试在 Ubuntu 12 中运行 XobotOs - 失败

> ID：11791839
> 
> 赞同：1
> 
> 时间：2012-08-03T08:13:19.293
> 
> 标签：c#, android, mono, xobotos

我打算在我的机器上构建 XobotOs。在构建之前，我想执行预构建版本，即`binaries/managed/XobotOs.exe`. 为此，如随附的屏幕截图 ( `binaries/managed/videos`) 所示，我从以下位置运行了以下命令`binaries/managed/`：

`mono XobotOs.exe Fragments.dll`

但它与以下登录终端崩溃：

```
Unhandled Exception: System.TypeLoadException: Could not load type 'XobotOS.Runtime.XobotActivityManager' from assembly 'XobotOS, Version=0.0.0.0, Culture=neutral, PublicKeyToken=0a30277e6179bbc2'.
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: Could not load type 'XobotOS.Runtime.XobotActivityManager' from assembly 'XobotOS, Version=0.0.0.0, Culture=neutral, PublicKeyToken=0a30277e6179bbc2'. 
```

我的理解是，这是一个`mono`崩溃。任何人都可以阐明正在发生的事情以及如何解决这个问题？

这是的输出`mono --version`：

```
Mono JIT compiler version 2.10.8.1 (Debian 2.10.8.1-1ubuntu2.2)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
    TLS:           __thread
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  amd64
    Disabled:      none
    Misc:          softdebug 
    LLVM:          supported, not enabled.
    GC:            Included Boehm (with typed GC and Parallel Mark) 
```

# multithreading - Parallel.ForEach - 如果不存在，则将对象添加到 Db

> ID：11791841
> 
> 赞同：1
> 
> 时间：2012-08-03T08:13:24.280
> 
> 标签：multithreading, c#-4.0, unique-constraint

嗨，伙计们和女孩们:) 我有一个关于 C# 中的并行性和 ms sql 的问题

我有针对特定对象查看 Db 的方法。如果它不存在，它将添加到 Db。不幸的是，它是用 Parallel.ForEach 完成的，所以我遇到了一些情况，使用线程 A 和 B：

A：查找代码为“xxx”的实体 - 结果：不存在 B：查找代码为“xxx”的实体 - 结果：不存在 A：将实体添加到 Db - 结果正常 B：将实体添加到 Db - 结果：“违规UNIQUE KEY 约束 (...) 重复键值为 'xxx'"

我应该怎么做才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:34:50.670

对于没有这个重复的错误，你想在这里捕捉

```
try{
    //execute you insert in base
}catch(Exception ex){
    // If your constraint is not respected, an error is thrown.
    console.WriteLine("db error : "+ex.Message);
} 
```

但是，它是暂时的，它是功能性的，但它很糟糕，它不合适......

为了拥有正确的代码，您需要创建一个后台处理程序：

```
class Spooler{
    public System.Collections.Generic.List<String> RequestList = new System.Collections.Generic.List<String>();

    public Spooler(){
        // Open you Database
        // Start you thread will be verify if a request adding in the collection
        SpoolThread = new Thread(new ThreadStart(SpoolerRunner));
        SpoolThread.Start();
    }

    public createRequestDb(String DbRequest){
        RequestList.Add(DbRequest);
    }

    private void SpoolerRunner()
    {
        while (true)
        {
            if (RequestList.Count() >= 1){
                Foreach (String request in RequestList){
                    // Here, you want to verify your request, if args already exist
                    // And add request in Database 
                }
             }
            // Verify is request exist in the collection every 30 seconds..
            Thread.Sleep(30000);
        }
    }

} 
```

为什么要使用后台处理程序？

只是因为，当您在调用线程之前初始化假脱机程序时，您想在每个线程中调用假脱机程序，并且对于每个请求，您在集合中添加请求，并且假脱机程序将一个接一个地处理......而不是在在每个不同的线程中同时...

**编辑：** 这个假脱机程序是一个示例，用于在您的数据库中一个一个地插入一个字符串请求，您可以为您想要的对象创建一个带有集合的假脱机程序，如果不存在则插入到数据库中......这只是一个示例一个解决方案，当你有很多线程时，一个接一个地进行治疗^^

# cuda - 如何使用 OpenACC 优化矩阵乘法？

> ID：11791843
> 
> 赞同：6
> 
> 时间：2012-08-03T08:13:28.903
> 
> 标签：cuda, opencl, gpgpu, openacc

我正在学习 OpenACC（使用 PGI 的编译器）并尝试优化矩阵乘法示例。到目前为止，我提出的最快的实现如下：

```
void matrix_mul(float *restrict r, float *a, float *b, int N, int accelerate){

#pragma acc data copyin (a[0: N * N ], b[0: N * N]) copyout (r [0: N * N ]) if(accelerate)
{
# pragma acc region if(accelerate)
{
# pragma acc loop independent vector(32) 
for (int j = 0; j < N; j ++)
{    
   # pragma acc loop independent vector(32) 
   for (int i = 0; i < N ; i ++ )
   {
      float sum = 0;
      for (int k = 0; k < N ; k ++ ) {
         sum += a [ i + k*N ] * b [ k + j * N ];
      }
      r[i + j * N ] = sum ;
   }
}
}
} 
```

这会产生大小为 32x32 线程的线程块，并为我提供迄今为止最好的性能。以下是基准：

```
Matrix multiplication (1500x1500): 
GPU: Geforce GT650 M, 64-bit Linux 

Data sz             : 1500     
Unaccelerated:
     matrix_mul() time    : 5873.255333 msec
Accelerated:
     matrix_mul() time    : 420.414700 msec

Data size             : 1750 x 1750     
    matrix_mul() time    : 876.271200 msec
Data size             : 2000 x 2000     
    matrix_mul() time    : 1147.783400 msec
Data size             : 2250 x 2250     
    matrix_mul() time    : 1863.458100 msec
Data size             : 2500 x 2500     
    matrix_mul() time    : 2516.493200 msec 
```

不幸的是，我意识到生成的 CUDA 代码非常原始（例如，它甚至不使用共享内存），因此无法与手动优化的 CUDA 程序竞争。作为参考实现，我采用了 Arrayfire 库，结果如下：

```
Arrayfire 1500 x 1500 matrix mul
CUDA toolkit 4.2, driver 295.59
GPU0 GeForce GT 650M, 2048 MB, Compute 3.0 (single,double)
Memory Usage: 1932 MB free (2048 MB total)
af:  0.03166 seconds

Arrayfire 1750 x 1750 matrix mul
 af:  0.05042 seconds
Arrayfire 2000 x 2000 matrix mul
 af:  0.07493 seconds
Arrayfire 2250 x 2250 matrix mul
 af:  0.10786 seconds
Arrayfire 2500 x 2500 matrix mul
 af:  0.14795 seconds 
```

我想知道是否有任何建议如何从 OpenACC 获得更好的性能？也许我选择的指令不正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T11:54:09.627

你得到了 14 倍的加速，根据我的经验，这对 PGI 的编译器来说非常好。

首先，您是否使用 -Minfo 进行编译？这将为您提供来自编译器的大量关于优化选择的反馈。

您正在使用 32x32 线程块，但根据我的经验，16x16 线程块往往会获得更好的性能。如果省略 vector(32) 子句，编译器会选择什么调度？

用 restrict 声明 a 和 b 可能会让编译器生成更好的代码。

仅通过查看您的代码，我不确定共享内存是否有助于提高性能。只有当您的代码可以在那里存储和重用值而不是转到全局内存时，共享内存才有助于提高性能。在这种情况下，您不会在阅读后重用 a 或 b 的任何部分。

还值得注意的是，在共享内存使用方面，我对 PGI 的编译器有过不好的体验。它有时会做一些有趣的事情并缓存错误的值（如果你向后迭代循环似乎主要发生），产生错误的结果。实际上，我必须使用未记录的 -ta=nvidia,nocache 选项编译我当前的应用程序，以使其正常工作，完全绕过共享内存使用。

# android - 水平居中包装器 DIV 在 Android 中不起作用

> ID：11791844
> 
> 赞同：2
> 
> 时间：2012-08-03T08:13:32.797
> 
> 标签：android, html, css

我正在为客户开发一个项目，在我的 Android 设备上测试网站时遇到了问题。基本上，我只想将包含大部分正文内容的 DIV 居中。

```
<img src="images/lightingOverlay.png" style="z-index: 1000; position: absolute; left: 0; right: 0; margin: 0 auto; top: 0;" />
<div style="border: solid 5px black; height: 50px; width: 978px; position: absolute; left: 0; right: 0; margin: 0 auto; top: 100px;" >
  wrapped content!
</div> 
```

我现在使用内联样式。即使 div 和图像使用相同的代码，在默认的 Android 浏览器上查看时，图像会居中，而 DIV 不会。

我尝试使用 left: 50% 定位，负边距也等于元素宽度的一半，但这似乎也不起作用。

无论如何，在过去的两天里，我基本上一直在使用代码并在 Chrome v21 和 Android 中对其进行测试，试图找出问题所在......正如你在示例中看到的那样，我已经精简到没有任何运气的最简单的元素。任何人都知道如何让水平居中在Android中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:23:58.490

如果您删除绝对位置，左侧，顶部和右侧的代码位，您应该没问题。

DIV 应该只需要 margin:0 auto 才能居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:24:58.803

我建议不要在这种情况下使用 absolute 而是使用 margin-left:auto; 和边距右：自动；

```
<div style="border:solid 5px black; height:50px; width:978px; margin-left:auto; margin-right:auto; margin-top:100px;" >
  wrapped content!
</div> 
```

**编辑：**

你也可以试试这个实现

```
<div style="width:100%; text-align:center;">
  <div style="border:solid 5px black; height:50px; width:978px; margin-top:100px;" >
    wrapped content!
  </div>
</div> 
```

>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:27:26.223

好的，使用后居中现在可以工作了

```
style="width: 1200px; position: absolute; left: 0; right: 0; margin: 0 auto; top: 0;" 
```

这里的 1200px 宽度是我在页面上使用的大图像叠加层的宽度，这也发生在页面上最宽的对象上。似乎移动浏览器采用屏幕上最宽元素的宽度，并对其进行缩放，以使该宽度等于屏幕宽度。然后它会进行其余的渲染。如果在那之后重新调整屏幕大小，显然它不会打扰重新定位东西？

好的，所以我不确定为什么会这样……只是确实如此。希望它可以帮助遇到同样问题的其他人。

# entity-framework - 使用块中的实体框架上下文

> ID：11791852
> 
> 赞同：0
> 
> 时间：2012-08-03T08:14:10.760
> 
> 标签：entity-framework, exception-handling

我正在编写一个服务层应用程序，它使用实体框架与数据库交互。

我将我的个人“工作单元”包含在一个 using 块中，我在其中初始化我的数据上下文。

但是我需要抛出一些异常，将数据库错误传达给使用我的服务应用程序的应用程序。所以我正在做这样的事情：

```
using (dbcontext = new DbContext())
{
 throw new Exception("Error while Saving data");
} 
```

谁能确认这是否可以？即使在引发异常后，实体框架数据上下文是否会被正确处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:31:24.137

是的。使用块内的处理逻辑进行编译时，[使用](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块将转换为块。`try/finally``finally`

`Dispose`但是，如果方法抛出异常，您的异常将不会被抛出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:31:59.423

是的，这是正确的。来自[MSDN](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)：

> 当到达 using 语句的末尾或抛出异常并且控制在语句结束之前离开语句块时，可以退出 using 语句。

话虽如此，我会抛出一个比那个更具体的异常`Exception`。

# javascript - 如何检测文本输入何时随 ie8 更改

> ID：11791855
> 
> 赞同：6
> 
> 时间：2012-08-03T08:14:15.730
> 
> 标签：javascript, jquery

我想检测文本输入何时更改。我尝试了这些，它们在 Firefox 中有效，但在 ie 8 中无效。

```
$('#taskSearch').bind('input', function() {
     alert($(this).val());
});
$('#taskSearch').live('input', function() {
    alert($(this).val());
});
$('#taskSearch').change(function() {
    alert($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T09:56:54.637

您可以`onpropertychange`用于 IE6+：

```
$("#taskSearch").on("propertychange", function(){
alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-01T18:56:43.283

以下解决方案适用于我在 IE8 和现代浏览器中通过按键、滚动或 a type="num" 输入字段中的箭头按钮进行的​​更改：

```
$('#element').on('keyup change', function() {
  // do something
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T08:17:29.473

最后一个（并且只有最后一个）是正确的，但是您缺少右括号：

```
$('#taskSearch').change(function() {
    alert($(this).val());
}); 
```

`.live()`已弃用（并且语法不正确），并且 for 的语法`.bind()`也不正确；事件的名称是`'change'`，不是`'input'`。请参阅[`.change()`](http://api.jquery.com/change/).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-14T02:10:34.027

[https://github.com/spicyj/jquery-splendid-textchange](https://github.com/spicyj/jquery-splendid-textchange)是一个插件，用于修复在 IE8 和 IE9 中模拟“输入”的怪癖。

作者在他的博文（[http://benalpert.com/2013/06/18/a-near-perfect-oninput-shim-for-ie-8-and-9.html](http://benalpert.com/2013/06/18/a-near-perfect-oninput-shim-for-ie-8-and-9.html)）中描述了他是如何实现这个解决方案的，这确实很复杂，如果您想了解详细信息，请阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T08:18:04.160

```
$('#taskSearch').change(function() {
    alert($(this).val()); // not the extra brace I've added
}); 
```

应该只是工作。PS[请停止](https://stackoverflow.com/questions/5772018/jquery-add-event-handler/5772031#5772031)使用[`.live()`](http://jsperf.com/jquery-live-vs-delegate-vs-on)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-11T20:53:09.643

在输入值更改时立即触发：

```
$('#example')on('keyup input', function(e){
    alert(e.type); // Displays 'keyup' in IE8, 'input' in browsers
}); 
```

（这是马克答案的变体）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-29T14:21:44.973

这将检测在 IE8 中何时按下该键

$("#input").on('keyup', function (event) { alert('keypress'); });

# php - 从行集构建多维数组

> ID：11791856
> 
> 赞同：0
> 
> 时间：2012-08-03T08:14:16.377
> 
> 标签：php, mysql, tree, multidimensional-array

> **可能重复：**
> [如何从列表中创建多维数组？](https://stackoverflow.com/questions/7884337/how-to-create-multi-dimensional-array-from-a-list)
> [PHP 从具有关系数据的数组创建多维数组](https://stackoverflow.com/questions/11239652/php-create-a-multidimensional-array-from-an-array-with-relational-data)

我的数据库中目前有一个父子模型。该表如下所示：

```
id         int  
parent_id  int
text       int 
```

假设我已经完成`SELECT *`查询以检索该表上的所有列，我将如何从该结果集中构建一个多维数组，其中每个数组包含一个子数组，其中 parent_id 等于行 id .

样本数据：

```
id   parent_id   text
1     NULL       Blah1
2     1          Blah 2 
3     2          Blah3
4     1          Blah 4 
```

最后，一旦构建了该数组，您将如何遍历它以打印出类似缩进结构的树？

```
Blah1 
    Blah2
        Blah3
    Blah4 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:23:52.657

尝试这个

```
$items = array(
    array('id' => 1, 'parent_id' => null, 'text'=>'text'),
    array('id' => 2, 'parent_id' => 1 , 'text'=>'text'),
    array('id' => 3, 'parent_id' => 2, 'text'=>'text'),
    array('id' => 4, 'parent_id' => 1 , 'text'=>'text'),
);

$childs = array();

foreach($items as $item)
  $childs[$item['parent_id']][] = $item;

foreach($items as $item) if (isset($childs[$item['id']]))
  $item['childs'] = $childs[$item['id']];

$tree = $childs[0];

var_dump($tree); 
```

# django - 带有多个模型的 Django 聚合

> ID：11791857
> 
> 赞同：2
> 
> 时间：2012-08-03T08:14:20.757
> 
> 标签：django

我有这些模型：

```
class Package(models.Model):
    title = CharField(...)

class Item(models.Model)
    package = ForeignKey(Package)
    price = FloatField(...)

class UserItem(models.Model)
    user = ForeignKey(User)
    item = ForeignKey(Item)
    purchased = BooleanField() 
```

我正在尝试以最佳性能实现 2 个功能：

1.  在我的模板中，我想计算所有项目的每个包裹价格总和。（我假设的总和？）

2.  更复杂：我希望每个用户都能总结出所有购买物品的价格。所以购买的=真。

假设我在一个包裹中有 10 件物品，每件售价 10 美元，包裹总价应为 100 美元。假设用户购买了 5 件商品，第二笔金额应为 50 美元。

我可以很容易地用 Templetetags 做简单的查询，但我相信它可以做得更好？（希望）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:31:36.097

要汇总特定包裹的价格，`a_package`您可以使用此代码

```
Item.objects.filter(package=a_package).aggregate(Sum('price')) 
```

有[一个关于如何进行此类查询的指南](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)，以及描述了所有不同功能的[聚合文档。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#aggregation-functions)

这种查询也可以解决你的第二个问题。

```
UserItem.objects.filter(user=a_user).filter(purchased=True).aggregate(sum('price')) 
```

您还可以使用`annotate()`将计数附加到每个对象，请参阅上面的第一个链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:44:11.343

*我认为*最优雅的方法是在 Model 类上定义一个方法`total`并将其装饰为[property](http://docs.python.org/library/functions.html#property)。这将返回`total`（使用 Django ORM 的[Sum aggregate](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-over-a-queryset)）`Package`或`User`。

类的例子`Package`：

```
from django.db.models import Sum

...

class Package(models.Model):

    ...

    @property
    def total(self):
        return self.item_set.aggregate(Sum('price')) 
```

在您的模板代码中，您可以将`total`其用作任何其他模型属性。例如：

```
{{ package_instance.total }} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T08:46:18.143

@Vic Smith 得到了解决方案。

但如果你愿意，我会在模型上添加一个`price`属性`package`

> 可能的最佳性能

您将向 Item 添加一个`on_save`信号，如果创建，您将更新相关`package`对象。

这样您可以非常快速地获得包裹价格，甚至可以进行快速排序、比较等。

另外，我并没有真正理解该`purchased`属性的用途。`Item`但是您可能希望在和之间建立多对多关系`User`，并将其定义`UserItem`为与`trhough`参数的连接。

无论如何，我的经验是，您通常希望在`Item`和对象之间建立关系，该`Purchasse`对象链接到`User`，而不是直接链接（除非您开始遇到性能问题......）。将“用户购买这个和那个`Purchasse`”作为事件记录使事情更容易处理。

# sql-server - 在运行时更改变量类型

> ID：11791859
> 
> 赞同：1
> 
> 时间：2012-08-03T08:14:27.100
> 
> 标签：sql-server, tsql, variables, declare

是否可以在 SQL Server 中更改变量类型？就像当你有

```
DECLARE @a INT;
SET @a = 3 
```

但是以后你想用来`@a`存放`VARCHAR`？有没有办法取消声明它，改变它可以存储的数据类型？T-SQL 允许这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T08:19:22.410

```
declare @s sql_variant
select @s=3
select @s='hello' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T08:22:38.013

变量名称在 sql 批处理中必须是唯一的，一旦声明就不能更改类型。

```
 Declare @a int
 Set @a=4
 Select @a

Declare @a varchar(10)
set @a='Sample'
Select @a 
```

您将收到一个错误

```
 The variable name '@a' has already been declared. Variable names must be
 unique within a query batch or stored procedure. 
```

但是，您可以使用[go](http://msdn.microsoft.com/en-us/library/ms188037.aspx) to end of a batch Transact-SQL statements 然后再次声明变量

```
 Declare @a int
 Set @a=4
 Select @a
 Go
 Declare @a varchar(10)
 set @a='Sample'
 Select @a 
```

否则你可以使用[sql_variant](http://msdn.microsoft.com/en-us/library/aa259247%28v=sql.80%29.aspx)来存储未指定的数据。但是它不能用于 text、ntext 和 timestamp 没有转换

# android - layout_below 和多行 TextView 问题

> ID：11791860
> 
> 赞同：0
> 
> 时间：2012-08-03T08:14:32.547
> 
> 标签：android, android-relativelayout

我使用一个RelativeLayout 和一些TextView 一个在另一个下面，最后是一个ViewPager。

ViewPager 在他的参数中有 android:layout_below="@id/dialog_access_right" ， dialog_access_right 是最后一个 TextView 。

我的问题是这个特定的 TextView 可以（但不一定）是多行的（最多 3 个）。但是 ViewPager 始终位于第一行之后，因此它隐藏了 TextView 的其余部分。

我尝试使用多行，将行参数设置为 3（如果在某些情况下有两个空白行也不错），将默认文本与两个换行符放在一起。没有这个工作。

有没有办法告诉 ViewPager 重绘和对齐自身（我尝试在 relativelayout 上无效，但没有...）与上面的视图？

```
<TextView
    android:id="@+id/dialog_access_right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/access_right_title"
    android:layout_alignBottom="@id/access_right_title"
    android:layout_toRightOf="@id/access_right_title"
    android:text="@string/dialog_access_right" />

<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/dialog_access_right" /> 
```

编辑：这是显示我的问题的屏幕截图，“Can Read” TextView 实际上是一个多行 TextView，有 2 行（可以是 3），蓝线是 ViewPager 内的 PagerTabStrip ![截屏](../Images/0a4dd9fa8ff333aa649e4cc7e7a09491.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:23:31.433

我发现了为什么（嗯，如何解决这个问题）会发生这种情况。

这是因为

```
 android:layout_alignBottom="@id/access_right_title" 
```

似乎这个参数是罪魁祸首。当我删除它（layout_alignBaseline 也是）并将其替换为另一个参数（在这种情况下为 android:layout_below）时，ViewPager 的位置是正确的。

```
<TextView
    android:id="@+id/dialog_access_right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/last_modified_date_name"
    android:layout_toRightOf="@+id/access_right_title"
    android:text="TextView" />

<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/dialog_access_right" /> 
```

我不知道这是一个错误还是想要的东西，但即使在我的情况下 android:layout_below 完成了这项工作，它可能并不总是......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:10:38.663

您可以尝试先将 ViewPager 设置在底部，然后将 textView 放在其上方。您也没有真正为您的标签提供单独的视图。您可以只提取一个字符串资源并将其连接起来。这不仅优化了视图绘制，还使您的 XML 文件更小，更易于理解和调试。

```
<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:align_parentBottom="true" />

<TextView
    android:id="@+id/dialog_access_right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:above="@id/viewpager"
    android:below="@id/dateModified"
    android:text="@string/dialog_access_right" /> 
```

# java - 哪个顺序更适合字段声明

> ID：11791861
> 
> 赞同：0
> 
> 时间：2012-08-03T08:14:36.150
> 
> 标签：java

```
private static final Logger LOGGER = Logger.getLogger(AbstractDbClient.class);

protected Connection connection;

protected Connection connection;

private static final Logger LOGGER = Logger.getLogger(AbstractDbClient.class); 
```

哪个顺序更适合字段声明？有些书指出应该通过私有/公共/受保护/等来订购它们，如果基于此，第二个代码更好，但看起来很糟糕。如果包含静态最终变量或静态变量？哪个顺序规则是？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T08:20:34.650

我建议你保持一致，但我更喜欢按照设置的顺序排列字段，因为这样更容易理解代码和调试它。恕我直言。

```
 static final fields

 final fields

 mutable fields. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T08:20:05.060

一个常见的标准是将所有公共变量放在最上面，然后是受保护的，然后是私有的。有些人将类/静态变量放在实例变量之前，有些人将它们放在之后。

如果您在一个正在编写新代码的团队中工作，最好聚在一起并决定一个共同的约定。如果您已经有要添加的现有代码，请仔细检查并找出以前的作者遵循的约定。您不希望在同一个代码库中混合多种样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T08:39:58.300

数据布局实际上具有性能属性，除了根据您的喜好对字段进行排序。我倾向于遵循以下内容：

*   静态最终字段，
*   静态字段
*   最终字段
*   可修改字段
*   按用例分组的可变字段

而有时

```
private field usedOnlyInFoo
method foo(){
} 
```

[更多关于](https://sites.google.com/site/1024cores/home/lock-free-algorithms/false-sharing---false)为什么数据布局很重要的话题。虽然除了数组/直接缓冲区之外没有正式的方式在 Java 中强制执行数据布局，但编译器 (JVM) 通常会将字段按其声明顺序放置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T08:26:04.013

就我个人而言，我喜欢我所有的静态数据都放在一个类的顶部，并且所有字段都处于公共、受保护、默认、私有顺序。

例如

```
public static final Integer a;
private static final Integer b;

public Integer c;
Integer d
private Integer d; 
```

我也倾向于在静态和非静态字段之间添加一条线。

但这是一个见仁见智的问题。也许问问你的同事你和谁一起工作。最好在这种事情上保持一致。

# javascript - jquery中setOptions的问题

> ID：11791869
> 
> 赞同：2
> 
> 时间：2012-08-03T08:15:08.310
> 
> 标签：javascript, jquery, jquery-autocomplete

我真的很抱歉提出这样一个新问题，但我不知道还能做什么。

我尝试执行以下操作

```
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<link rel="stylesheet" type="text/css" href="./js/jquery.autocomplete.css">

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/jquery.autocomplete.js" type="text/javascript" charset="utf-8"></script>
     <script type="text/javascript">
     $(document).ready(function() {
           $("a").click(function() {

            alert('1');
            $("#producto").setOptions({max: 2}); 

            alert('2');
           });
 });
     </script>

</head>
<body >

    <a href="">Link</a>

     <input id="producto" name="producto" value="hola" />
</body></html> 
```

它总是给出对象不接受方法“setOptions”的相同错误。

我什么错了！！？？？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:23:53.773

您没有`autocomplete`为此输入字段初始化插件。因此`setOptions`没有定义。

查看[文档](http://jqueryui.com/demos/autocomplete/#default)，尤其是自动完成插件的示例/来源。

例如

```
<script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:27:01.840

首先，您必须初始化自动完成：

```
 $("#producto").autocomplete("", {
    width: 320,
    max: 14,
    highlight: false
    //..Some Options
}); 
```

然后你可以使用 .setOptions() 和其他方法。

PS： [自动完成 Jquery 插件页面](http://docs.jquery.com/Plugins/Autocomplete) 说：

> 注意（2010-06-23）：此插件已弃用，不再开发。它的文件不由 JQUERY 项目维护，也不能在 JQUERY.COM 上获得。
> 
> 它的继任者是 jQuery UI 的一部分：
> 
> [http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:26:21.347

您缺少自动完成方法：

也许这会帮助你：

```
var ac = $('#query').autocomplete(options);
ac.setOptions({ zIndex: 1001 }); 
```

[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)

# google-maps - 我网站中的 Google Map API

> ID：11791870
> 
> 赞同：1
> 
> 时间：2012-08-03T08:15:10.990
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我对我将在我的网站上实施关于这个情节的 Google Map API 感到困惑。

1 - 我的管理员用户将在谷歌地图上设置一个地点的地址（可能在文本框中） 2 - 用户可以查看管理员设置的地点，并且在该特定地点已经有一个标记。

v2 和 v3 有什么区别？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:30:44.807

要使用 API V2，您需要一个密钥，但现在无法获得一个，因为 API V2 已于 2010 年 5 月 19 日正式弃用，就像[Marcelo](https://stackoverflow.com/users/408519/marcelo)在评论您的问题时所说的那样。

您将需要使用 Api V3。查看[Google Maps JavaScript API v3](https://developers.google.com/maps/documentation/javascript/)了解更多详情。

# android - 蓝牙配对

> ID：11791875
> 
> 赞同：1
> 
> 时间：2012-08-03T08:15:35.917
> 
> 标签：android, bluetooth

是否有可能强制向用户显示对话框以输入 PIN。

我有一个条形码阅读器，在服务器端（我认为），他需要获取 PIN 码。但问题是所有 2.2 以上的机器人都不会显示对话框。（2.2\. 显示对话框和配对都可以）。

在我的代码中，我发现了设备，下一步是配对。

我会很感激你给我一些解释

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:40:33.260

一个简单的答案是**NO**`PIN dialog` ，因为它是系统生成的，所以无法强制用户进入。

您可以创建自己的系统检查蓝牙配对。BroadCastReceiver 将在这件事上为您提供帮助。

# php - php5读取远程文件的有效方式

> ID：11791876
> 
> 赞同：2
> 
> 时间：2012-08-03T08:15:38.090
> 
> 标签：php, include

我最近从 php4 升级到 php5，随之而来的通知是我的所有远程 php 文件访问都不再有效。我一直在对此进行大量研究，但对于在 php5 中包含远程 url 的正确方法，我似乎没有明确的答案。

第一个示例是以这种方式包含文件

```
<?php
   $data = file_get_contents("http://example.com/example.inc.php",0);
   echo $data;
?> 
```

第2个是这样

```
<?php
   $ch = curl_init("http://example.com/example.inc.php");
   curl_exec($ch);
   curl_close($ch);
?> 
```

第三是在我的 php.ini 文件中设置

```
allow_url_include = On      
allow_url_fopen = On 
```

并使用好旧的

```
<?php include_once('http://example.com/example.inc.php');?> 
```

我想正确且安全地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:40:12.357

所有解决方案都是正确的，安全 AFAIK 没有真正的区别。

我认为差异可以总结如下：

ini-settings 提供了以前版本中已知的行为。默认情况下禁用它们的原因是安全线程，但这等于所有三个解决方案。无论您是否控制远程站点，包括远程文件都是一个安全问题。

file_get_contents() 和 curl 扩展会产生一些开销，因为您必须缓冲内容，但对于 php 包含文件，这更像是一种装饰性的东西。通读脚本时，它们的用法稍微复杂一些。但是缓冲也增加了好处：例如，您可以创建一个本地缓存或一个校验和，以进行基本的合理性检查。还可以在执行之前进行语法检查，从而防止调用脚本崩溃。

Curl 作为 php 扩展提供。因此 curl 解决方案仅在安装扩展程序时才有效，但它提供了更高级别的自由度和更多选项。如果您不需要那些保留内置函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:51:25.623

出色地，

第一种方法 => 是正确的，您不必担心使用它。

第二种方法=> 是正确的，但是应该启用curl扩展

第三种方法 => 是正确的，但不建议使用此选项，因为启用 allow_url_include 可能会使您的网站易受攻击。有关更多详细信息，请参阅[http://en.wikipedia.org/wiki/Include_vulnerability](http://en.wikipedia.org/wiki/Include_vulnerability)和此链接[http://wiki.dreamhost.com/Allow_url_include](http://wiki.dreamhost.com/Allow_url_include)

# windows - msctf/d3d11 在 exit() 时崩溃

> ID：11791877
> 
> 赞同：1
> 
> 时间：2012-08-03T08:15:40.117
> 
> 标签：windows, directx-11

我有一个使用 DX11 的应用程序。调试版本运行良好。但是发布版本崩溃了`exit()`。

堆栈：

```
000007fef697d630()  
user32.dll!DispatchHookA()  + 0x72 bytes    
user32.dll!CallHookWithSEH()  + 0x27 bytes  
user32.dll!__fnHkINLPMSG()  + 0x59 bytes    
ntdll.dll!KiUserCallbackDispatcherContinue()    
user32.dll!NtUserPeekMessage()  + 0xa bytes 
user32.dll!PeekMessageW()  + 0x89 bytes 
msctf.dll!RemovePrivateMessage()  + 0x52 bytes  
msctf.dll!SYSTHREAD::DestroyMarshalWindow()  - 0x1b7a bytes 
msctf.dll!TF_UninitThreadSystem()  + 0xc4 bytes 
msctf.dll!CicFlsCallback()  + 0x40 bytes    
ntdll.dll!RtlProcessFlsData()  + 0x84 bytes 
ntdll.dll!LdrShutdownProcess()  + 0xa9 bytes    
ntdll.dll!RtlExitUserProcess()  + 0x90 bytes    
msvcr100.dll!doexit(int code=0, int quick=0, int retcaller=0)  Line 621 + 0x11 bytes 
```

如果我在调用`LoadLibrary("d3d11.dll")`之前调用`exit()`，则不会崩溃。

# ruby-on-rails - Rspec & FactoryGirl 验收验证

> ID：11791881
> 
> 赞同：7
> 
> 时间：2012-08-03T08:15:53.957
> 
> 标签：ruby-on-rails, validation, rspec, tdd, factory-bot

我一直对这个简单的验证感到头疼，但我无法对其进行验证。我有以下模型：

```
class Attendance < ActiveRecord::Base
  belongs_to :user, counter_cache: true
  belongs_to :event, counter_cache: true

  validates :terms_of_service, :acceptance => true
end 
```

这是我的工厂：

```
 factory :attendance do
    user
    event
    terms_of_service true
  end 
```

这是我的测试：

```
 describe "event has many attendances" do
    it "should have attendances" do
      event = FactoryGirl.create(:event)
      user1 = FactoryGirl.create(:user, firstname: "user1", email: "mail@user2.nl")
      user2 = FactoryGirl.create(:user, firstname: "user2", email: "mail@user1.nl")

      attendance1 = FactoryGirl.create(:attendance, event: event, user: user1, terms_of_service: true)    
    end
  end 
```

这不应该带来任何错误，但确实如此。

```
Running spec/models/workshop_spec.rb
.............F

Failures:

  1) Event event has many attendances should have attendances
     Failure/Error: attendance1 = FactoryGirl.create(:attendance, event: event, user: user1, terms_of_service: true)
     ActiveRecord::RecordInvalid:
       Validation failed: Terms of service must be accepted
     # ./spec/models/event_spec.rb:33:in `block (3 levels) in <top (required)>' 
```

当我在浏览器中执行这些操作并接受 tos 时，一切顺利。我在这里想念什么？！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T08:29:45.260

是否`:terms_of_service`映射到 db 列？的默认值为`validates :acceptance`字符串“1”，而不是`true`. 如果它映射到 db 列，请尝试添加`:accept => true`到验证：

```
validates :terms_of_service, :acceptance => {:accept => true} 
```

如果该字段未映射，或者 DB 列不是布尔值，请尝试在测试和工厂中使用“1”而不是 true。

# objective-c - ArcGIS 当前位置

> ID：11791888
> 
> 赞同：1
> 
> 时间：2012-08-03T08:16:35.253
> 
> 标签：objective-c, ios, xcode4.3, arcgis

我在使用 ArcGIS 获取我所在位置的位置服务时遇到问题。这是代码的一部分：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    [self.activityView startAnimating];
    //self.mapView.layerDelegate = self;
    self.mapView.touchDelegate = self;
    self.mapView.calloutDelegate = self;
    NSURL *mapUrl = [NSURL URLWithString:kTiledMapServiceURL];
    AGSTiledMapServiceLayer *tiledLyr = [AGSTiledMapServiceLayer tiledMapServiceLayerWithURL:mapUrl];
    [self.mapView addMapLayer:tiledLyr withName:@"Tiled Layer"];

        //Create Bus Graphic layer
    AGSGraphicsLayer *busGraphicLayer = [AGSGraphicsLayer graphicsLayer];
    [self.mapView addMapLayer:busGraphicLayer withName:@"BusLayer"];

//Create Graphic layer
    AGSGraphicsLayer *graphicLayer = [AGSGraphicsLayer graphicsLayer];
    [self.mapView addMapLayer:graphicLayer withName:@"GraphicsLayer"];

    //Create Service layer
    AGSGraphicsLayer *serviceLayer = [AGSGraphicsLayer graphicsLayer];
    [self.mapView addMapLayer:serviceLayer withName:@"ServiceLayer"];

    //Create Path layer
    AGSGraphicsLayer *pathLayer = [AGSGraphicsLayer graphicsLayer];
    [self.mapView addMapLayer:pathLayer withName:@"PathLayer"];
 }

- (void) showMarkingOnMap:(Service *) ser
{
    id<AGSLayerView> graphicsLayerView = [self.mapView.mapLayerViews objectForKey:@"ServiceLayer"];
    AGSGraphicsLayer *graphicsLayer = (AGSGraphicsLayer*)graphicsLayerView.agsLayer;
    [graphicsLayer removeAllGraphics];

    // Create a symbols png graphic
    AGSPictureMarkerSymbol *genSymbol = [AGSPictureMarkerSymbol pictureMarkerSymbolWithImageNamed:@"pushpin.png"];
    ServiceInfoTemplate *infoTemplate = [[ServiceInfoTemplate alloc] init];
    AGSGraphic *genGraphic;
    AGSPoint *genPt;
    NSMutableDictionary *dic= [[NSMutableDictionary alloc] init];
    [dic setObject:[ser name] forKey:@"NAME"];
    if([ser.location isEqualToString: @"\n"] || (ser.location == nil)){
        [dic setObject:@"" forKey:@"DESC"];
    } else {
        [dic setObject:[ser location] forKey:@"DESC"];
    }
    genPt = [AGSPoint pointWithX:[[ser xcoordinate] floatValue]
                                y:[[ser ycoordinate] floatValue]
                 spatialReference:self.mapView.spatialReference];

    destinationX = [[ser xcoordinate] floatValue];
    destinationY = [[ser ycoordinate] floatValue];

    genGraphic = [[AGSGraphic alloc] initWithGeometry:genPt symbol:genSymbol attributes:dic infoTemplateDelegate:infoTemplate];
    [graphicsLayer addGraphic:genGraphic];

    [graphicsLayer dataChanged];

    [self.mapView zoomWithFactor:0.1 atAnchorPoint:CGPointMake(destinationX, destinationY) animated:NO];
    [self.mapView centerAtPoint:genPt animated:YES];
} 
```

这个方法是我调用当前位置的地方

```
- (IBAction) directionAction:(id)sender{
    NSString *format = [NSString stringWithFormat:@"http://www....&routeStops=%f,%f;%f,%f&routemode=DRIVE&avoidERP=0"",         
                        self.mapView.gps.currentPoint.x, self.mapView.gps.currentPoint.y, destinationX, destinationY];

} 
```

这`self.mapView.gps.currentPoint.x`会给我返回一个 0 但它应该返回我所在的当前 x 坐标。有人知道它有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:37:06.623

我没有从您的代码中看到您在 mapView 上启用了 gps 对象。您需要首先通过将[enable 属性](http://help.arcgis.com/en/arcgismobile/10.0/apis/iphone/reference/interface_a_g_s_g_p_s.html)设置为 YES 来启用它。然后等待 gps 有一个有效的位置（currentPoint != nil），然后再尝试使用 currentPoint。您可以在 currentPoint 属性上设置一个键值观察器并等待它更改的通知并检查它是否有效然后使用它。

```
self.mapView.gps.enabled = YES;   // enable the GPS

// add the observer like this:
[self.mapView.gps addObserver:self forKeyPath:@"currentPoint" options:0 context:nil]; 
```

然后添加一个方法以在通知发生更改时获取通知：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([keyPath isEqualToString:@"currentPoint"]) {
        AGSPoint *point = self.mapView.gps.currentPoint;
        if (point==nil) return;

        // now we have a valid gps location
    }
} 
```

希望能给你一些想法。

# sql - 如何批量显示通过和失败学生的总数

> ID：11791894
> 
> 赞同：1
> 
> 时间：2012-08-03T08:17:09.650
> 
> 标签：sql, sql-server-2000

我有一个`tbl_marksObtained`包含以下数据的表：

```
 stdID          sub       marks_Obtained
 201bct2007   computer      45
 201bct2007   Drawing       0
 202bct2007   computer      0
 203bct2007   Drawing       65
 .
 230bct2007   computer     77
 301bct2008   physics      0
 301bct2008   computer     55
 .
 .
 401bct2009 and so on.. 
```

现在我想将结果显示为：

```
 year   sub      pass    fail
 2007   computer  20      10
 2007   Drawing   15      15
 2008   computer  28      2
 2009   computer  20      10 
```

我通过以下代码获得了特定年份和主题的通过失败：

```
 SELECT 
    SUM( CASE WHEN marks_obtained > '0' THEN 1 END) AS pass,
    SUM( CASE WHEN marks_obtained = '0' THEN 1 END) AS fail  
 FROM   
    tblstudentexammarks 
 WHERE 
    sub ='computer' AND stdID LIKE '%bce2007' 
```

但我将如何获得上述结果的年度数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:29:10.293

```
select 
       RIGHT(stdID,4) as year,
       sub,
       sum(CASE WHEN marks_Obtained>0 then 1 else 0 end) as pass,
       sum(CASE WHEN marks_Obtained=0 then 1 else 0 end) as fail 

from tblstudentexammarks 
group by RIGHT(stdID,4),sub 
order by 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:26:33.700

尝试这个：

```
 select stdID [Year],sub, 
 sum(case when PF='P' then 1 else 0 end) as Pass,
 sum(case when PF='F' then 1 else 0 end) as Fail
 from(
     select RIGHT(stdID,4) stdID,sub,
     case when marks_Obtained=0 then 'F' else 'P' end PF
     from mark_sheet)a
 WHERE 
 sub ='computer' AND stdID LIKE '%bce2007' 
 group by stdID,sub 
```

# android - 我怎样才能杀死 requestWindowFeature(Window.FEATURE_NO_TITLE)

> ID：11791897
> 
> 赞同：0
> 
> 时间：2012-08-03T08:17:26.183
> 
> 标签：android, request

我在我的对话框中使用此代码-->requestWindowFeature(Window.FEATURE_NO_TITLE)，但是当我单击按钮并返回我的 main 并且我的应用程序自行关闭并返回此错误时 -> requestFeature() 必须在添加内容之前调用。我该如何处理它或如何在调用后终止我的请求。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:35:04.227

我猜你用

```
requestWindowFeature(Window.FEATURE_NO_TITLE) 
```

在方法 setContentView(layout) 使您的应用程序崩溃之后

试试这个 ：

```
private void setFullScreen(){
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
}

private void cancelFullScreen(){
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
} 
```

希望对你有帮助！

# google-maps - 融合表层的渐变

> ID：11791898
> 
> 赞同：3
> 
> 时间：2012-08-03T08:17:28.410
> 
> 标签：google-maps, google-maps-api-3, google-fusion-tables

谁能解释为什么渐变不适用于下面的地图？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html><head><title>Riks.txt - Google Fusion Tables</title>
<style type="text/css">
 html, body, #map_canvas {
   margin: 0;
   padding: 0;
   height: 100%;
 }
</style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.7&amp;sensor=false">

</script>
<script type="text/javascript">
function initialize() 
{
  map = new google.maps.Map
  (document.getElementById('map_canvas'), 
  {
    center: new google.maps.LatLng(59.53726545292721,18.12209266712103),
    zoom: 11,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  layer = new google.maps.FusionTablesLayer({
    map: map,
    heatmap: { enabled: false },
    query: {
      select: "MP",
      from: "1TlGuMJwdZy-75LQvyEEq6GrvDob2LRREWI60Ji4",
      where: ""
    },

styles: [
  {
    styleId: 2,
    polygonOptions: {
      fillOpacity: 1,
      fillColorStyler: {
        expression: "MP",
        min: 0,
        max: 100,
        gradient: ['#0000ff', '#00ffff', '#00ff00', '#ffff00', '#ff0000']
      },
      strokeWeight: 1,
      strokeOpacity: 0.3,
      strokeColor: '#000000'
    }
  }
]

});

  layer.setOptions({
    styleId: 2,
    templateId: 0
  });
}

google.maps.event.addDomListener(window, 'load', initialize);
</script></head>
<body><div id="map_canvas"></div></body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:16:50.603

我找不到动态应用渐变的语法（您的示例来自哪里？）。有[Fusion Tables 返回的样式的描述](https://developers.google.com/fusiontables/docs/v1/reference/style)，但返回的样式的语法似乎不起作用。所以我的猜测是，它（还没有？）可能做到。

*但是，如果动态*执行此操作对您来说并不重要，您可以在 Fusion Tables Web UI 中定义渐变：

![使用 Fusion Tables Web UI 定义地图样式](../Images/e4c4ba01d452a51df2939259ee37d1fb.png)

如果要创建多个样式，可以添加多个地图。为此，您必须切换到切换到新外观（请参见右上角的 web ui 中的链接“切换到新外观”）。然后您可以使用“+”按钮添加新地图：

![将另一个地图添加到 Fusion Table](../Images/fb0dc134582f7d74ce6f2a43d1a1e6db.png)

如果您在 Web UI 中指定了所有您需要的样式，您可以像这样[在 FusionTablesLayer 中开始使用它们](https://developers.google.com/fusiontables/docs/v1/using#WorkingStyles)（我复制了您的表格以进行测试）：

```
layer = new google.maps.FusionTablesLayer({
    map: map,
    query: {
        select: "MP",
        from: "1oCgiRAPUPp638T1XJlR98IGLMIdhHQiyR-IY85E",
        where: ""
    },
    styleId: 2
}); 
```

`styleId`1 是默认值，然后 2 是您添加的第一个，3 是第二个，依此类推。我为复制的表格创建了 2 种样式。

这是 jsFiddle 上的示例，可以试用：http: [//jsfiddle.net/odi86/gPjE3/](http://jsfiddle.net/odi86/gPjE3/)

只需将`styleId: 2`(gradient on column `MP`) 更改为`styleId: 3`(gradient on column `M`) 看看会发生什么。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:40:14.487

只有一小部分支持的样式映射通过 Maps API 进行动态设置。请参阅[FusionTablesPolygonOptions 的地图 API 文档](https://developers.google.com/maps/documentation/javascript/reference#FusionTablesPolygonOptions)。

要实现您指定的样式：

*   在 Fusion Tables 界面的地图可视化中设置您想要的样式
*   `styleId`从 Fusion Tables 中检索存储的数据。使用[API Explorer](https://developers.google.com/fusiontables/docs/v1/reference/style/list#try-it)检索所有存储的样式。
*   通过 Maps API 设置所需的样式，方法是参考`styleId`

## 示例 API 使用

```
layer = new google.maps.FusionTablesLayer({
  map: map,
  heatmap: { enabled: false },
  query: {
    select: "MP",
    from: "1TlGuMJwdZy-75LQvyEEq6GrvDob2LRREWI60Ji4",
    where: ""
  },
  styleId: 3
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:53:34.777

假设您没有制作热图（您应该在其中使用 Goog Drive 中的默认样式器），正确的方法是通过查询手动创建自己的渐变。

在初始化...创建您的普通融合层

```
var fusionlayer = new google.maps.FusionTablesLayer({
    query: {
        select: '*',
        from: tableID
    }
}); 
```

我更喜欢将样式器放入函数中，因为您可能会调用不同的数据列来进行渐变。

```
function changeMap(tableValue) { 
    var newStyle = [
    {
      where: tableValue + "< 0.01",
      polygonOptions: {
        fillColor: "#CCCCCC",
        strokeColor: "#FFFFFF",
        strokeWeight: 0
      }
    }, {
      where: tableValue + ">= 0.01 AND" + tableValue + "< 0.05",
      polygonOptions: {
        fillColor: "#fefb8c",
        strokeColor: "#FFFFFF",
        strokeWeight: 0
      }
    }, {
      where: tableValue + " >= 0.05 AND" + tableValue + "< 0.10",
      polygonOptions: {
        fillColor: "#ff9233",
        strokeColor: "#FFFFFF",
        strokeWeight: 0
      }
    }, {
      where: tableValue + ">= 0.10",
      polygonOptions: {
        fillColor: "#800000",
        strokeColor: "#FFFFFF",
        strokeWeight: 0
      }
    }];

    fusionLayer.setOptions({
      'styles': newStyle,
    });
}; 
```

根据需要自定义大于或等于查询和颜色。

我还有一个重置功能来“清除”地图。这一点很重要，因为您只是在更改地图的视觉外观。

```
function defaultMap() { 
    fusionlayer.setOptions({
      'styles': [{ 
          polygonOptions: {
            fillColor: "#cccccc",
            strokeColor: "#dddddd",
            strokeWeight: 0
          }     
        }],
    });

    } 
```

# html - HTML5 webapp 设计：应用缓存

> ID：11791899
> 
> 赞同：1
> 
> 时间：2012-08-03T08:17:28.807
> 
> 标签：html, html5-apps

我正在开发一个移动网络应用程序，我想利用新的 HMTL5 缓存功能。该应用程序包含一个照片管理器：用户可以创建相册、存储照片、编辑图片和数据等。我使用 jQuery Mobile 框架，所有数据都存储在客户端（webstorage），除了上传到服务器的图像。

我还没有添加 HTML5 缓存，但我依赖于普通浏览器缓存图像，当用户编辑图像并将其上传到服务器时，我更改了附加到图像请求的查询字符串，因此我得到了更新的版本（我在stackoverflow上了解到的一个技巧）。

我想对除图像之外的所有内容使用 HTML5 缓存，因为这个技巧就像一个魅力，但我知道一旦我添加了 HMTL5 缓存，每个资源都是：

*   在检测到新清单之前缓存并且不更新/我以编程方式执行（并且我无法选择要更新的资源）（CACHE 部分）
*   或根本不缓存并每次都重新加载（网络部分）

有没有办法既能吃蛋糕又能吃呢？:-)

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:30:00.007

一旦您开始缓存，并非所有资源都会被缓存，这取决于清单文件中指定的内容，因此您可以尝试从清单中取出您不想缓存的图像 url。

# javascript - JS中函数执行错误

> ID：11791902
> 
> 赞同：1
> 
> 时间：2012-08-03T08:17:38.893
> 
> 标签：javascript, validation

我有这段代码，但是为什么当我使用这个函数来验证我的输入字段时，一切正常，除了 + 和 - 键，即使我认为它们是真的。我做错了什么？

```
function validateNumber(event)
{
    var key = window.event ? event.keyCode : event.which;

    if (event.keyCode == 8 || event.keyCode == 46 || event.keyCode == 37 ||
        event.keyCode == 39 || event.keyCode == 107 || event.keyCode == 109 ||
        event.keyCode == 32 )
    {
        return true;
    }
    else if(key < 48 || key > 57)
    {
        return false;
    }
    else return true;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:27:42.167

我没有看到您检查`189`( `-`) 和`187`( `=`，这实际上是您键入`+`) 时发生的情况。您可能想检查是否`Shift`按下了键`+`。

如前所述，总体而言，验证用户输入是一种错误的方式。您需要检查输入的值，而不是单个击键。

首先，定义一个验证函数，该函数将使用正则表达式检查任意文本：

```
function checkArithmetic(str) {
    var regexp = /^[0-9+-]$/;
    return regexp.test(str);
} 
```

接下来，将处理程序添加到您的输入元素：

```
input.addEventListener('input', function (e) {
    var value = input.value;

    if (checkArithmetic(value)) {
        // OK!
    } else {
        // error
    }
}, false); 
```

# powershell - 循环遍历子文件夹

> ID：11791905
> 
> 赞同：12
> 
> 时间：2012-08-03T08:17:50.110
> 
> 标签：powershell

嗨，我想创建一个批处理文件来获取所有子文件夹。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T12:33:12.140

这在批处理文件或 PowerShell 中都很简单：

批：

```
for /r %%x in (*.sql) do (
    rem "(or whatever)"
    sqlcmd "%%x"
) 
```

电源外壳：

```
Get-ChildItem -Recurse -Filter *.sql |
    ForEach-Object {
        sqlcmd $_.FullName # or whatever
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T17:16:21.823

这是我用来获取每个用户主文件夹的子文件夹中“学校”文件夹大小的 powershell 脚本。IE。N:\用户名\用户名OSXProfile\学校

SizeOfSchoolFolder.ps1

```
$schoolFolderTotalSize=0

$foundChildren = get-childitem *\*OSXProfile\School
foreach($file in $foundChildren){
    $schoolFolderTotalSize = $schoolFolderTotalSize + [long](ls -r $file.FullName | measure -s Length).Sum
}

switch($schoolFolderTotalSize) {
  {$_ -gt 1GB} {
    '{0:0.0} GiB' -f ($_/1GB)
    break
  }
  {$_ -gt 1MB} {
    '{0:0.0} MiB' -f ($_/1MB)
    break
  }
  {$_ -gt 1KB} {
    '{0:0.0} KiB' -f ($_/1KB)
    break
  }
  default { "$_ bytes" }
} 
```

我从中提取了相加数字： [Adding up numbers in PowerShell](https://stackoverflow.com/questions/13630559/adding-up-numbers-in-powershell)

并且使文件夹大小看起来很漂亮： [Get Folder Size from Windows Command Line](https://stackoverflow.com/questions/12813826/windows-command-line-get-folder-size)

和 \*\*OSXProfile\School 作为特定子文件夹的搜索。 [限制 Get-ChildItem 递归深度](https://stackoverflow.com/questions/13249085/limit-get-childitem-recursion-depth)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-23T20:28:42.827

要将所有文件名中的 'xyz' 替换为 'abc'：

```
Get-ChildItem -Recurse -Filter *.mp3 | Rename-Item –NewName { $_.name –replace 'xyz','abc' } 
```

# c# - 长轮询 停止其他请求 1 或 2 分钟

> ID：11791911
> 
> 赞同：2
> 
> 时间：2012-08-03T08:18:10.950
> 
> 标签：c#, jquery, asp.net, long-polling

在创建聊天系统期间，我使用 long life request 来获取消息，并使用 jquery 请求来发送消息，如下所示：

**发送： **

```
$("#btn").click(function () { 
    $.ajax({
        type: "POST",
        url: "Chat.aspx/Insert",
        data: "{ 'Str' :'" + $("#txtStr").val() + "' }",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
        },
        error: function () {

        }
    });
}); 
```

**收到 ：**

```
function Refresh() {

    $.ajax({
        type: "POST",
        url: "Chat.aspx/GetRecords",
        data: "{ 'Id' : " + $("#hdnV1").val() + "}",
        success: function (data) {

            $.each($(data.d), function () {

               //Show it to user

            });

        },
        complete: function () {
            return Refresh();
        },

        contentType: "application/json; charset=utf-8",
        dataType: "json",
        traditional: true,
        async: true
    });

} 
```

这是我获取消息的服务器端代码：

```
[WebMethod]
public static object GetRecords(int Id)
{
    TestEntities db = new TestEntities();
    int count = 0;
    while (true)
    {
        if (count++ >= 300)
            return null;

        System.Threading.Thread.Sleep(1000);
        var list = db.Commets.Where(rec => rec.Id > Id).Select(rec => new { Id = rec.Id, Str = rec.Str }).ToList();

        if (list.Count > 0)
            return list;

    }
} 
```

当用户写东西并点击发送按钮时，请求进入挂起状态，我的事情是因为长寿命请求正在执行

我在萤火虫中检查它们，有没有人可以帮助我！？！更多细节请评论我，对不起我的英语语法不好，我是英语新手

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T04:25:34.787

这不是在 asp.net 中建立聊天的最佳方法。随着用户数量的增加，此方法将无法扩展。

看看[SignalR](http://signalr.net/)是构建聊天应用程序的好选择。

但是，如果您出于某种原因确实想自己做，在 asp.net 中构建聊天的最有效方法是使用[IHttpAsyncHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)和 ajax 请求。

Asp.net 的工作线程数量有限。让其中一个进入睡眠状态只会杀死您的应用程序，即使对于相对较少的用户也是如此。

异步请求允许您延迟请求的响应，直到发生外部事件。
用户调用此处理程序并等待有人向他发送消息。
一旦您将消息发送给用户，它们就会被传递。

收到消息后，客户端发出另一个请求并等待下一条消息。这就是保持持久连接打开并允许服务器将数据推送到客户端的方式。

这比轮询站点以检查消息是否到达要有效得多。
使用异步处理程序还可以确保在用户等待消息到来时不会浪费任何 asp.net 线程。使用计时器轮询您将很快用完线程来处理 asp.net 中的请求。

这可以确保即使网站的用户数量增加，您的聊天也可以很好地扩展。

这是一个与 ajax 一起[实现这个的完全工作的项目。](http://www.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push)

避免使用数据库作为您网站上用户之间的通信方式。如果要记录聊天记录，请进行所有写入异步调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:35:10.980

由于您在评论中写道您正在`Session`应用程序中使用状态，因此长时间运行的请求阻止更新可能是正确的。

原因是 Asp.Net 阻止了对`Session`. 有关详细信息，请参阅MSDN 上的[此链接](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)。具体（靠近页面底部）：

> 但是，如果对同一个会话发出两个并发请求（通过使用相同的 SessionID 值），则第一个请求将获得对会话信息的独占访问权。第二个请求仅在第一个请求完成后执行。

解决它的一种方法可能是设置`EnableSessionState="ReadOnly"`或`EnableSessionState="False"`在有问题的页面上。这假设您不需要使用`Session`聊天系统访问特定页面中的 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:30:19.950

您也应该异步发送插入，就像使用 GetRecords 一样。那应该可以解决您的问题。添加`async: true`到发送请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:32:46.960

问题是`GetRecords`可能永远不会回来。除非您使用 WebSockets 之类的东西，否则这是一个问题。这意味着连接永远不会完成（直到超时），您很可能不会收到任何数据。

你应该做的是`GetRecords`立即返回，然后每隔 X 秒在你的 jQuery 中轮询新记录。

您还可以尝试`Sleep`在 while 循环中添加一个（以及最大循环限制）以允许其他线程在系统中工作并防止无限循环。IE

```
int maxLoops = 50;
int loopNum = 0;
while (loopNum < maxLoops)
{
        var list = db.Commets.Where(rec => rec.Id > Id).Select(rec => new { Id = rec.Id, Str = rec.Str }).ToList();

        if (list.Count > 0)
            return list;

        Thread.Sleep(250); //Wait 1/4 of a second
        loopNum++;
} 
```

# c# - 如何避免 C# 字符串中的双引号转义？

> ID：11791913
> 
> 赞同：6
> 
> 时间：2012-08-03T08:18:14.003
> 
> 标签：c#, c#-4.0, double-quotes

在 Ruby 中，可以使用字符串而不需要转义字符串中的双引号，例如 Q/Some my string with "double quotes"/

C# 是否可以使用字符串而不需要转义双引号？出于一个很好的原因，我需要编写内联 SQL，每次我将 SQL 查询从 DB 控制台放到 C# 代码时，转义双引号非常烦人。

我知道可以使用 \" 或 "" 作为一个双引号。但是是否可以避免需要转义双引号？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T08:20:09.200

不，基本上。您可以选择`"foo \" bar"`或`@"foo "" bar"`，您已经提到了这两个选项。然而，坦率地说，我很少发现`"`SQL 有必要。您有`'`文字字符串和`[`/`]`用于对象/列名 - 当然，这可能只是因为我通常使用 SQL Server。

唯一*不*涉及任何转义的替代方法是将 SQL 移动到外部资源文件，可能是文本文件。不过，这可能比仅使用`""`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T08:19:27.523

不，这在 C# 中是不可能的。你可以将你的 SQL 写在一个单独的文件中，然后从那里读取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T08:25:39.703

> 出于一个很好的原因，我需要编写内联 SQL，每次我将 SQL 查询从 DB 控制台放到 C# 代码时，转义双引号非常烦人。

如果您正在编写内联 Sql 查询，如果您通过 SqlParameters 传递值，则无需担心引号。这样你就不会在任何地方看到烦人的双引号，甚至你的查询也不会受到 Sql Injection 的影响

# php - Zend 中的quote 和quoteInto 有什么区别？

> ID：11791914
> 
> 赞同：1
> 
> 时间：2012-08-03T08:18:17.063
> 
> 标签：php, zend-framework

我不知道quoteInto 与quote 有什么不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T08:24:30.843

`quoteInto()`用于为 sql 查询准备数据。该`quote()`函数仅引用可能终止字符串文字的内容，例如 '、"、\0 等。

```
$sql = 'SELECT * FROM users WHERE enabled = ? AND country = ?';
$sql = $users->getAdapter()->quoteInto($sql, 1);
$sql = $users->getAdapter()->quoteInto($sql, 'UK');

//SELECT * FROM users WHERE enabled = 1 AND country = 'UK'

print $db->quote("%some'stuff%") . "\n"; 
// Output: '%some\'stuff%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T13:31:23.393

我不认为 quoteInto() 是最好的解决方案，因为它只转义特殊字符，并在其周围应用引号。转义通常有几个问题，例如您必须有规范列表。使用 DBMS 的字符并维护这个列表 - 你怎么知道 Zend 有这个 100% 完美的 DBMS 列表？在我看来，只有一个真正安全的解决方案 -> 使用参数化查询。

# silverlight - 如何使 TextBlock 大小适合文本大小

> ID：11791917
> 
> 赞同：4
> 
> 时间：2012-08-03T08:18:22.863
> 
> 标签：silverlight, xaml, expression-blend

我在 Silverlight 中为嵌入式窗口工作，我想将文本放入图片中的 TextBlock，我希望 textBlock 适合文本（我想删除附加图片中的黄色空间）

![图片](../Images/7d67f8862203e5e85141eed1a36cdc26.png)

有人可以帮我弄这个吗？

最好的问候，卢卡

这是我目前使用的 XAML：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="FullTest.PUIsocUI"
d:DesignWidth="480" d:DesignHeight="272">

<Grid x:Name="LayoutRoot" Background="White">
    <StackPanel Orientation="Horizontal"        VerticalAlignment="Bottom" Height="64" Grid.Row="1">
        <RadioButton x:Name="PowerMeasurement"      GroupName="PowerTabControls" IsChecked="True" Checked="PowerMeasurement_Checked" Unchecked="PowerMeasurement_Unchecked" Content="POWER" BorderThickness="0"/>
        <RadioButton x:Name="PowerMode"             GroupName="PowerTabControls" Checked="PowerMode_Checked" Unchecked="PowerMode_Unchecked"/>      
        <RadioButton x:Name="PowerLimit"            GroupName="PowerTabControls" IsChecked="False" Click="PowerLimit_Click" Checked="PowerLimit_Checked" Unchecked="PowerLimit_Unchecked"/>     
    </StackPanel>
    <Grid>
        <Grid x:Name="PowerMeasurementPage" Margin="0,0,0,64" >
         <!-- tab page za meritev-->
            <TextBlock Text="POWER" Style="{StaticResource FunctionNameTextBlockStyle}" HorizontalAlignment="Left" VerticalAlignment="Top"/>
            <TextBlock Text="11.555" Style="{StaticResource ResultNameTextBlockStyle}"  />
        </Grid>
        <Grid x:Name="PowerModePage" Margin="0,0,0,64">
        <!-- tab page za Mode-->
        </Grid>
        <Grid x:Name="PowerLimitPage" Margin="0,0,0,64">
        <!-- tab page za Limita-->
        </Grid>
    </Grid>
</Grid> 
```

```
<Style TargetType="TextBlock" x:Key="FunctionNameTextBlockStyle">
        <Setter Property="FontFamily" Value="ALTERNATE_GOTHIC#AlternateGothic2 BT"/>
        <Setter Property="FontSize" Value="44"/>
        <Setter Property="Margin" Value="57,27,0,0"/>
    </Style> 
```

这就是我想要得到的->

![图2](../Images/1b850a4cf755e474cc1b173a6afff2a2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:39:35.190

```
<TextBlock Text="POWER" FontSize="44" FontWeight="SemiBold" RenderTransformOrigin="0.5,0.5">
   <TextBlock.RenderTransform>
     <CompositeTransform ScaleY="2"/>
   </TextBlock.RenderTransform>
</TextBlock> 
```

在我提供的示例中，请参阅 ScaleY 声明？调整该值以满足您的需求。这是在不使用 ViewBox 的情况下实现该效果的一种方法。另一个可能是将 TextBlock 转换为 Path 并根据需要进行调整，但它必须是静态标签才能有用。

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:24:34.000

另一种方法甚至要简单得多。你只需**要让** `TextBlock`调整自己的大小，它会根据文本自行排列。您可能应该查看它的容器（可能粘贴一些代码？）。尝试`TextBlock`这样设置：

```
<TextBlock Text="POWER" HorizontalAlignment="Center" VerticalAlignment="Center" /> 
```

**更新**查看VS，对我来说它似乎只是一个字体保留空间。不知道如何避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T23:33:16.407

在 VS2015 中，您可以使用[TextLineBounds](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.textblock.textlinebounds)属性轻松完成此操作（在您的情况下将其设置为 Tight ）。我在 UAP 中使用它，不确定它在 Silverlight 中是否可用。然而，它会被截断为小写字母，如 g、q 等，如下所示：[TextLineBounds snipping bottom of letters](https://stackoverflow.com/questions/27829414/textlinebounds-snipping-bottom-of-letters)

# objective-c - 使用另一个项目的故事板

> ID：11791920
> 
> 赞同：1
> 
> 时间：2012-08-03T08:18:41.273
> 
> 标签：objective-c, ios, storyboard

我正在开发一个 Iphone 应用程序，我想从另一个项目中获取故事板。

我将情节提要和所有视图控制器和图像添加到我的项目中（我从另一个项目中复制粘贴它们）

然后我将它设置为 info,plist 文件中的主要故事板。

我没有收到任何编译错误或警告，但是如果我尝试运行该项目，我会收到`signal SIGABRT`错误消息。

（如果我回到原来的故事板，应用程序会正常运行）

知道可能导致问题的原因吗？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:58:50.223

您是否将所有故事板对象连接到正确的 ViewController ？我经常忘记接线代表=）

![ss](../Images/2224c2b6572c6eecaf1ef4ff0098744c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:27:55.110

在摘要选项卡中，确保在“项目名称”/summery/iPhone/iPod 部署信息下选择主情节提要

# android - Android：使用 MediaRecorder 录制音频

> ID：11791921
> 
> 赞同：0
> 
> 时间：2012-08-03T08:18:44.747
> 
> 标签：android, audio, microphone, recording, mediarecorder

我正在尝试在我的应用程序中执行一个功能来记录录音，然后在获得录音后进行一些声音分析。

我想使用 MediaRecorder 库，因为我需要声音文件，它似乎是一个更简单的选择。

但是，我似乎无法根据[http://developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)开始录制。编辑：感谢@faz15，我可以录制音频而不会崩溃。但是，我无法停止录制，因此无法获取声音片段。我的代码如下：

```
package helloworld.app;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

import java.io.File;
import java.io.IOException;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.Button;

public class StartRecording extends Activity {
    final AudioRecorder recorder = new AudioRecorder("/audiometer/temp"); 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.start_recording);
        //startRecording();
        try {
            recorder.start();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    }
    public void stopRecording(View view) {
        try {
            recorder.stop();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Intent intent = new Intent(this, next_page.class);
        startActivity(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:33:18.077

您是否在 Android 清单中添加了适当的权限？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:34:45.237

以防万一，在

`android.permission.RECORD_AUDIO`

也许您的虚拟设备需要音频录制和播放支持？编辑您的 AVD，并将其添加到硬件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T03:06:45.933

我不确定您所说的“您无法停止录制”是什么意思。

但是，如果它对任何人有帮助，则`recorder.release()`应该在之后调用，`stop()`并且如果您完成了该对象，则必须将记录器设置为 null。

# html - 让 li 标签全部洗牌

> ID：11791929
> 
> 赞同：0
> 
> 时间：2012-08-03T08:19:05.670
> 
> 标签：html, html-lists, css

是否可以使 ul 标签中的所有 li 项目彼此对齐，而不是它们都对齐最长。我知道这没有多大意义，所以我做了一个例子！哈哈

[http://jsfiddle.net/S4GhV/1/](http://jsfiddle.net/S4GhV/1/)

我的意思是，我希望第二行的框位于第一行的框下方，例如，第二行的第二个框紧贴在第一行的第二个框下方，而不是对齐到第 2 行的第一个框水平。与框 3 相同。

希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:26:19.520

这是关于 SA 的一个非常常见的问题，答案几乎总是使用这个：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

恐怕没有纯 CSS 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:50:21.907

您可以通过模拟列获得所需的结果，但它涉及额外的 div：[JSFiddle](http://jsfiddle.net/S4GhV/26/)

此外，`li {vertical-align: bottom;}`会让所有东西都紧密排列，但它只适用于两行，可能不是你需要的。

# django - Django在创建对象而不传递必填字段时不会引发错误

> ID：11791936
> 
> 赞同：1
> 
> 时间：2012-08-03T08:19:28.257
> 
> 标签：django, django-models

我有一个这样的 Django 模型：

```
class Registration(models.Model):
    appId =models.CharField(max_length = 100)
    registeredUser = models.ForeignKey('auth.User', null=True, blank=True) 
```

当我使用 python manage.py shell 转到 Django Shell 界面并尝试在不传递 appId 字段（这是必填字段）的情况下创建一个注册对象时，如下所示：

```
Registration.objects.create(registeredUser = userobject) 
```

它创建了一个注册对象而不给我错误**您不能将 appId（不可为空的字段）设置为无！**.这是怎么发生的？为什么它没有给我错误？我做错了什么或者我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T08:32:03.210

Registration 对象的 appID 的值为 ''（即空字符串）。

另外，请查看[null 选项的文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#null)，您会发现没有 null 选项并不意味着该字段不可为空。相反，`null=True`意味着空值在数据库中存储为 NULL。

如果您想避免空字符串，请向该模型字段的验证添加规则，或通过您的表单。

# security - 我如何知道运行我的 Azure 角色的 VM 的密码要求？

> ID：11791937
> 
> 赞同：0
> 
> 时间：2012-08-03T08:19:36.127
> 
> 标签：security, azure, passwords, windows-server-2008-r2

我尝试将我的 Azure 服务从 Windows Server 2008 切换到 Windows Server 2008 R2。现在创建本地用户的代码失败了

> System.DirectoryServices.AccountManagement.PasswordException 密码不符合密码策略要求。检查最小密码长度、密码复杂性和密码历史要求。

显然 R2 不喜欢我分配给本地用户的密码。

我如何知道究竟违反了哪些密码复杂性要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:43:13.080

这是一篇涵盖Windows Server 2008 R2[密码复杂性最低要求的 TechNet 文章](http://technet.microsoft.com/en-us/library/cc736605%28v=WS.10%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:44:13.033

我刚刚在我的 2008 R2 实例之一上进行了验证，默认情况下这些策略处于活动状态：

*   密码最长使用期限：42 天
*   密码必须满足复杂性要求

> 密码必须满足复杂性要求
> 
> 此安全设置确定密码是否必须满足复杂性要求。
> 
> 如果启用此策略，密码必须满足以下最低要求：
> 
> 不包含超过两个连续字符的用户帐户名或用户全名部分 长度至少为六个字符 包含以下四个类别中的三个字符： 英文大写字符（A 到 Z） 英文小写字符（a 到 z ) 以 10 位为基数（0 到 9） 非字母字符（例如，!、$、#、%） 更改或创建密码时会强制执行复杂性要求。

密码复杂度还可以，但密码最长使用期限可能是个问题。您可以通过 RDP 修改一次，导出这些设置，然后编写一个导入这些设置的启动任务来禁用此功能。以下是您可以使用的命令：

```
secedit /export /cfg settings.inf
secedit /import /db secedit.sdb /cfg settings.inf 
```

# c# - Lambda 表达式中的多个句子

> ID：11791942
> 
> 赞同：0
> 
> 时间：2012-08-03T08:19:56.780
> 
> 标签：c#, lambda

我从 Lambda 表达式开始了解如何使用它定义匿名方法。

我有以下简单的代码：

```
delegate void AddNumber(int number);
class LambdaExpressionSample
{
   static void Main(string[] args)
   {
      AddNumber method = r => Console.WriteLine(r + r);Console.Read();
      method(1);
   }
} 
```

我想要的是该方法等于这个：

```
AddNumber method = new AddNumber(delegate(int number) 
{ 
   Console.WriteLine(number+number); 
   Console.Read(); 
}); 
```

但是带有 lambda 表达式的代码不能正常工作，因为 lambda 表达式显然以分号“;”结尾 在 Console.WriteLine 之后。

如何使用我的 lambda 示例让我的方法执行 Console.WriteLine 和 Console.Read？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:24:21.330

您可以简单地将代码包装在大括号之间，如下所示：

```
delegate void AddNumber(int number);
class LambdaExpressionSample
{
    static void Main(string[] args)
    {
        AddNumber method = r =>
        {
            Console.WriteLine(r + r);
            Console.Read();
        };
        method(1);
    }
} 
```

`Action`封装了一个具有单个参数且不返回值的方法。因此，为了避免代码中到处都有自定义委托的委托地狱，您应该使用：

```
Action<int> addNumber; 
```

代替：

```
delegate AddNumber(int number); 
```

这是您的新代码，其中包含更改：

```
class LambdaExpressionSample
{
    static Action<int> addNumber;
    static void Main(string[] args)
    {
        this.addNumber = r =>
        {
            Console.WriteLine(r + r);
            Console.Read();
        };
        this.addNumber(1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:23:02.357

如果您有多个语句，则必须使用大括号

```
AddNumber method = r => 
{
    Console.WriteLine(r + r);
    Console.Read();
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:29:14.567

为多行代码添加花括号解决了您的问题

```
AddNumber method = r => 
                 {
                       Console.WriteLine(r + r);
                       Console.Read();
                 }; 
```

# android - Achartengine：以 XML 显示视图

> ID：11791943
> 
> 赞同：0
> 
> 时间：2012-08-03T08:19:59.150
> 
> 标签：android, xml, achartengine

几天来，我一直在使用**AchartEngine**。我修改了 TrignometricFunctionsChart 以显示各种可能的图表。现在我希望用户输入函数并为该函数绘制图表。为此，我需要一个 EditText 和一个图表内的按钮。我尝试阅读[Android：我正在使用 AChartEngine 图形库，但无法将 achartengine 的图形视图与 android xml 集成？](https://stackoverflow.com/questions/4062161/android-i-am-using-achartengine-library-for-graphs-but-not-able-to-integrate-a)却无法完成任务。我尝试编辑 XYChartBuilder（包含在 XML 文件中的唯一图表），但无法将 TrignometricFunctionsChart 插入其中。

我不知道如何迁移这段代码：

```
public Intent execute(Context context) {
String[] titles = new String[] { "sin", "cos" };
List<double[]> x = new ArrayList<double[]>();
List<double[]> values = new ArrayList<double[]>();
int step = 4;
int count = 360 / step + 1;
x.add(new double[count]);
x.add(new double[count]);
double[] sinValues = new double[count];
double[] cosValues = new double[count];
values.add(sinValues);
values.add(cosValues);
for (int i = 0; i < count; i++) {
  int angle = i * step;
  x.get(0)[i] = angle;
  x.get(1)[i] = angle;
  double rAngle = angle/57.295779513082;
  sinValues[i] = rAngle;
  cosValues[i] = 0.25*rAngle;
}
int [] colors = new int[] { Color.BLUE, Color.CYAN };
PointStyle[] styles = new PointStyle[] { PointStyle.POINT, PointStyle.POINT };
XYMultipleSeriesRenderer renderer = buildRenderer(colors, styles);
setChartSettings(renderer, "Trigonometric functions", "X (in degrees)", "Y", 0, 360, -1, 1,
    Color.GRAY, Color.LTGRAY);
renderer.setXLabels(20);
renderer.setYLabels(10);
return ChartFactory.getLineChartIntent(context, buildDataset(titles, x, values), renderer);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:35:26.430

开始将图表嵌入到布局中的最佳位置正是您提到的那个。我建议更仔细地阅读演示代码。

确保您了解演示图表如何从其父类继承行为。例如，buildRenderer()、buildDataset() 等都位于 AbstractDemoChart 中。

# c# - DLLImport 不工作

> ID：11791944
> 
> 赞同：2
> 
> 时间：2012-08-03T08:20:00.643
> 
> 标签：c#, .net, dllimport

我正在尝试编写一个使用 C++ 中定义的函数的 WPF 应用程序。C++ 应用程序编译为 DLL。

我正在做的是使用 DllImport 属性来导入函数并使用它。这在我的机器上运行良好，但是当我尝试在另一台机器上运行我的 WPF 应用程序时，它会给出“找不到 DLL”错误。

我的 C# (WPF) 代码摘录：

```
[DllImport("Dll.dll")]
public static extern int MyFunc();

public MainWindow()
{
  InitializeComponent();
  MessageBox.Show("Starting");
  try
  {
    MessageBox.Show(MyFunc().ToString());
  }
  catch (Exception exc)
  {
    while (exc != null)
    {
      MessageBox.Show(exc.Message);
      exc = exc.InnerException;
    }
} 
```

我的 C++ 代码：

```
extern "C" __declspec(dllexport) int MyFunc() {
  return 3;
} 
```

谁能看到我的错误可能在哪里？

在此先感谢您的帮助！

编辑：看来问题是不存在依赖项“MSVCR100D”。我的理解是，这是我安装的 VC++ Redistributable 包中的一个文件，但无济于事。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T08:25:24.913

您的 DLL 可能依赖于其他计算机上未安装的其他 DLL。您可以使用[Dependency Walker](http://www.dependencywalker.com/)检查依赖项。

典型的缺失依赖项是 Visual Studio C/C++ 运行时库。如果他们不见了，只需用谷歌搜索即可。Microsoft 为他们提供了可再发行包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:24:47.883

dll是否也在另一台机器上注册？尝试将 Build ACtion 设置为 Content 并将 Copy to Output 文件夹设置为始终用于 dll 文件

# html - 使用截止设置框阴影元素的样式

> ID：11791947
> 
> 赞同：0
> 
> 时间：2012-08-03T08:20:08.570
> 
> 标签：html, css

我们正在尝试创建一个 HTML 页面，该页面由包含图片和标题的砖石风格浮动元素组成。元素有阴影，页面有轻微的渐变背景。已经访问过的目标有一个折角。

![我们正在努力实现的示例](../Images/13d555e4fea29b33f5c3be3efc3f8040.png)

折叠角会导致几个问题：

1）我们怎样才能使元素的盒子阴影在右侧和底部的折叠角之前结束？`div`我们是否必须使用包含半透明渐变的 s以 CSS3 之前的方式制作阴影？

2）如何做折角本身？我们不能只在白色背景上的右下角添加一个图像，因为页面的背景渐变必须显示出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:43:30.367

到目前为止，我已经想到了四种方法：

**方法一**：这个思路是先用两个伪元素`.box`得到角，再用两个伪元素`.box-text`得到角的阴影[**-demo**](http://dabblet.com/gist/3246830)。这个最大的问题是它……嗯，丑陋。

HTML结构：

```
<div class="box">
    <header></header>
    <div class="box-text">
        <p>Text</p>
    </div>
</div> 
```

相关CSS：

```
body {
    background: #ccc;
}
.box {
    box-shadow: 2px 2px 13px #000;
    position: relative;
    background: white;
}
.box:before, .box:after, .box-text:before, .box-text:after {
    position: absolute;
    content: '';
}
.box:before {
    bottom: -25px;
    right: -25px;
    width: 75px;
    height: 75px;
    background: #ccc;
}
.box:after {
    bottom: 0;
    right: 0;
    width: 50px;
    height: 50px;
    box-shadow: -2px -2px 2px #777;
    background: linear-gradient(-45deg, transparent 38%, #333 50%, #faf0f0 50%);
}
.box-text:before {
    bottom: 32px;
    right: -15px;
    width: 15px;
    height: 18px;
    background: radial-gradient(top left, #333 0%, transparent 40%);
}
.box-text:after {
    bottom: -15px;
    right: 32px;
    width: 18px;
    height: 15px;
    background: radial-gradient(top left, #333 0%, transparent 40%);
} 
```

* * *

**方法2**：使用倾斜的伪元素为那个特定的角以更好的方式组合阴影（我会在伪元素上有阴影） -[**演示**](http://dabblet.com/gist/3246978)

我认为这个看起来更好，并且还具有在 IE9 中工作的优势（前一个没有，因为它使用了 CSS 渐变）。

HTML 将完全相同，CSS 将变为：

```
.box {
    box-shadow: 0 0 5px 1px #777;
    position: relative;
    background: white;
}
.box:before, .box:after, .box-text:before {
    position: absolute;
    z-index: 2;
    content: '';
}
.box:before {
    bottom: -38px;
    right: -38px;
    width: 71px;
    height: 71px;
    transform: rotate(45deg);
    z-index: 1;
    background: #ccc;
}
.box:after {
    bottom: 0;
    right: 0;
    border: solid 23px #f9f0f0;
    border-bottom-color: transparent;
    border-right-color: transparent;
    box-shadow: -1px -1px 2px #777;
    z-index: 4;
}
.box-text:before {
    right: 0;
    bottom: 22px;
    width: 47px;
    box-shadow: 2px 2px 3px 1px #777;
    transform: skewY(-45deg);
} 
```

* * *

**方法3**：我从之前的方法中得到了一个想法[**——demo**](http://dabblet.com/gist/3247255)。不过我觉得上一张好看一点。。。

已更改的 CSS：

```
.box:before {
    bottom: -24px;
    right: -7px;
    width: 35px;
    height: 70px;
    box-shadow: inset 2px 0 3px 1px #999;
    transform: rotate(45deg);
    z-index: 1;
    background: #ccc;
}
.box:after {
    bottom: 0;
    right: 0;
    border: solid 23px #f9f0f0;
    border-bottom-color: transparent;
    border-right-color: transparent;
    box-shadow: -1px -1px 2px #777;
    z-index: 4;
}
.box-text:before {
    bottom: -27px;
    right: -10px;
    width: 35px;
    height: 70px;
    transform: rotate(45deg);
    background: #ccc;
} 
```

**方法 4**：在盒子上只使用 2 个伪元素 -[**演示**](http://dabblet.com/gist/3247461)

```
.box:before, .box:after {
    position: absolute;
    z-index: 2;
    content: '';
}
.box:before {
    right: -8px;
    bottom: 22px;
    width: 65px;
    box-shadow: 2px 2px 5px 1px #777, 0 25px 0 25px #ccc;
    transform: rotate(-45deg);
}
.box:after {
    bottom: 0;
    right: 0;
    border: solid 23px #f9f0f0;
    border-bottom-color: transparent;
    border-right-color: transparent;
    box-shadow: -1px -1px 2px #777;
    z-index: 4;
} 
```

# jquery - iPhone 上的 SoundManager2 - 在 jQuery Load 上没有播放声音

> ID：11791949
> 
> 赞同：0
> 
> 时间：2012-08-03T08:20:14.393
> 
> 标签：jquery, iphone, html, audio, soundmanager2

我正在尝试使用 SoundManager2 作为 iPhone Web App 的一部分，以便在使用 jQuery 提交表单后播放声音。播放的特定声音取决于结果，因此结果页面设置了一个变量来标识要播放的声音文件。

这一切都可以在桌面上顺利运行，但在 iPhone 上运行时，它会失败。

iPhone 上的调试控制台显示它正在尝试...

```
1124: SMSound.play(): "ValidSound" is loading - attempting to play...
1124: SMSound.play(): "ValidSound" is starting to play
1124: setPosition(0): delaying, sound not ready
1124: HTML5::loadstart: ValidSound
1124: HTML5::suspend: ValidSound 
```

...但每次播放都没有声音。

关于可能导致此失败的任何想法？我已经包含了主页的代码，以及使用 jQuery 返回的“响应”页面的示例：

**主要的**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="sm/script/soundmanager2.js"></script>
<script> 
soundManager.setup({

  url: 'sm/swf/',
  useHTML5Audio: true,

  onready: function() {

    soundManager.createSound({
      id: 'ValidSound',
      useHTML5Audio: true,
      preferFlash: false,
      url: 'http://www.example.com/example sound.mp3'
    });

  }

});
</script>

</head>

<body onload="window.top.scrollTo(0,1);">

<div class="scannerform">
  <form id="scanner" name="scanner" method="post" action="ok.php">
    <input type="text" name="scan" id="scan" />
    <input type="submit" name="button" id="button" value="Submit" />
  </form>
</div>

<div class="loadingDiv" id="loadingDiv">Loading...</div>
<div class="wrapper" id="wrapper"><div name="data" id="data"></div></div>

<script>
$('#loadingDiv')
    .hide()
    .ajaxStart(function() {
        $(this).show();
    })
    .ajaxStop(function() {
        $(this).hide();
    })
;

$("#scanner").submit(function(event) {

    $("#loadingImage").show();

    event.preventDefault(); 
    var $form = $( this ),
        scanned_data = $form.find( 'input[name="scan"]' ).val(),
        url = $form.attr( 'action' );

    $.post( url, { scanned_data: scanned_data },
      function( data ) {
          var content = $( data );
          $( "#data" ).empty().append( content );
          $("#loadingImage").hide();
          if (playSound) playSound();
          soundManager.play(SoundToPlay);
      }
    );
  });
  </script>
</body>
</html> 
```

**回复**

```
<script>
function playSound()
{
  SoundToPlay="ValidSound";
}
</script>

<div id="example">Hello World</div> 
```

谢谢你的帮助！

J。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T01:31:33.220

你知道 iPhone Safari 应用了声音限制吗？基本上，如果用户以某种方式（通过触摸屏）与页面交互，它就不会播放声音。所以忘记通过“onLoad”或任何其他事件播放的自动声音。

虽然使用 SoundManager2 和我的 iPhone，但有时我觉得它有点棘手。我很确定在我的应用程序中手指单击至少 1 次后它会自动播放声音（甚至几个）（例如关闭初始 html 弹出窗口（基本上))

所以至少检查一下这个线索......

托马斯

资源：

[http://buildingwebapps.blogspot.com/2012/04/state-of-html5-audio-in-mobile-safari.html](http://buildingwebapps.blogspot.com/2012/04/state-of-html5-audio-in-mobile-safari.html)

[http://blog.logicking.com/2012/03/cross-platform-sounds-for-html5-games.html](http://blog.logicking.com/2012/03/cross-platform-sounds-for-html5-games.html)

# wcf - Delphi Rest Client 与 C# Rest 服务器对话的问题

> ID：11791956
> 
> 赞同：1
> 
> 时间：2012-08-03T08:20:56.967
> 
> 标签：wcf, delphi, rest, delphi-2009

我正在编写一个 REST WCF 服务，并让它适用于来自 C# 客户端的连接，但在通过 Delphi 2009 客户端连接时遇到问题。我遇到的问题是一个 PUT 请求，它看起来（目前）如下所示。它需要一个包含文档对象的 XML 请求。

```
 [WebInvoke(UriTemplate = "Document/{id}", Method = "PUT", RequestFormat=WebMessageFormat.Xml)]
    public void UpdateDocument (string id, Document document)
    {
        Document doc = document;

        // this should update or something!
        Console.WriteLine(doc.Id);
    } 
```

当我尝试通过我的 Delphi 客户端调用它时（如下所示），我收到一个“错误请求”。奇怪的是，如果我发送一个空文档，请求被接收，但显然没有数据。

```
 ...

     msg := '<?xml version="1.0"?>' +
    '<Document>' +
    '<Id>123456788888</Id>' +
    '</Document>';

  XMLDocument1.LoadFromXML(msg);
  xmlStream := TMemoryStream.Create;
  idHttp1.Request.ContentType := 'application/xml';
  XMLDocument1.SaveToStream(xmlStream);
  url := 'http://localhost:50435/service1/Document/12345678';
  result := idHttp1.Put(url, xmlStream);
  ShowMessage (result);

  ... 
```

任何想法，因为我现在有点迷路了！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:42:20.157

URI 到服务器方法的映射不正确。根据默认映射，PUT 请求将调用 AcceptDocument 方法，而 POST 请求将调用 UpdateDocument 方法。

[http://docwiki.embarcadero.com/RADStudio/en/REST](http://docwiki.embarcadero.com/RADStudio/en/REST)

将 TStream 作为参数传递也可能会遇到困难。您可以使用 JSON 吗？我不确定 Delphi 2009 是否支持 JSON。

[编辑：来自 Delphi文档](http://docwiki.embarcadero.com/RADStudio/en/DataSnap_REST_Messaging_Protocol)的引用：

> 默认情况下，“更新”前缀分配给任何使用 POST 调用的方法。类似地，'cancel' 前缀用于 DELETE 请求，'accept' 前缀用于 PUT 请求。可以通过在方法名称周围加上引号来避免这种前缀

以上报价适用于德尔福。也许也适用于 WCF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T07:25:09.940

根据我上面的评论，安装 Fiddler 让我查看了 Web 服务输出的实际页面，这有助于提供示例 XML 和 json 结构。我错过了对象的命名空间，所以我猜 WCF 端不知道要翻译什么，将消息更改为以下使其工作：

```
msg := '<?xml version="1.0"?>' +
'<Document xmlns="http://schemas.datacontract.org/2004/07/Contracts.Contracts">' +
'<Id>123456788888</Id>' +
'</Document>'; 
```

# php - 如何通过 AJAX 删除 img 并显示 CMultiFileUpload

> ID：11791957
> 
> 赞同：0
> 
> 时间：2012-08-03T08:20:57.240
> 
> 标签：php, ajax, yii, yii-extensions, cmultifileupload

状态：带有 ajax 上传文件字段的表单。Q1 : 如何在通过 ajax 删除图像后显示 CMultiFileUpload 小部件？

Q2 : 上传图片后如何立即显示图片？

我的模型没有任何变化

我的观点

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'fa-depreciation-form',
    'enableAjaxValidation'=>false,
    'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); ?>
<div class="row" id="file_upload">
    <?php
        if ($model->file_name){
            $file = '/images/'. $model->id . '/'. $model->file_name;
            echo '<div id="forAjaxRefresh">';
            echo '<img src="http://' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . $file.'" width="150px" />';
            echo "<br />";
            echo CHtml::ajaxLink('remove', array('delimg', 'id'=>$model->id), array('update'=>'#forAjaxRefresh'));
            echo '</div>';

        }else{      
            $this->widget('CMultiFileUpload', array(
                 'model'=>$model,
                 'name'=>'file_name',
                 'attribute'=>'file_name',
                 'accept'=>'jpg|gif|png',
                 'options'=>array(
                    //'onFileSelect'=>'function(e, v, m){ alert("onFileSelect - "+v) }',
                    //'afterFileSelect'=>'function(e, v, m){ alert("afterFileSelect - "+v) }',
                    //'onFileAppend'=>'function(e, v, m){ alert("onFileAppend - "+v) }',
                    //'afterFileAppend'=>'function(e, v, m){ alert("afterFileAppend - "+v) }',
                    'onFileRemove'=>'function(e, v, m){ alert("onFileRemove - "+v) }',
                    //'afterFileRemove'=>'function(e, v, m){ alert("afterFileRemove - "+v) }',
                    'max'=>3,
                 ),
              ));
        }
        ?>
    </div>      
<div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

我的控制器

```
public function upload($id)
    {
        // THIS is how you capture those uploaded images: remember that in your CMultiFile widget, you set 'name' => 'images'
        $images = CUploadedFile::getInstancesByName('file_name');

        // proceed if the images have been set
        if (isset($images) && count($images) > 0) {

            // make the directory to store the pic:
            if(!is_dir(Yii::getPathOfAlias('webroot').'/images/fadepreciation/'. $id)) {
                mkdir(Yii::getPathOfAlias('webroot').'/images/fadepreciation/'. $id);
                chmod(Yii::getPathOfAlias('webroot').'/images/fadepreciation/'. $id, 0755); 
                // the default implementation makes it under 777 permission, which you could possibly change recursively before deployment, but here's less of a headache in case you don't
            }

            // go through each uploaded image
            foreach ($images as $image => $pic) {
                $pic->saveAs(Yii::getPathOfAlias('webroot').'/images/tmp/' . $pic->name);
                echo '<img src="'.   Yii::getPathOfAlias('webroot').'/images/tmp/'.$id . '/' . $pic->name.' /><br />';
                if ($pic->saveAs(Yii::getPathOfAlias('webroot').'/images/fadepreciation/'.$id . "/" . $pic->name)) {
                    // add it to the main model now
                    $model=$this->loadModel($id);   
                    $model->file_name = $pic->name; //it might be $img_add->name for you, filename is just what I chose to call it in my model

                    $model->save(); // DONE
                    unlink(Yii::getPathOfAlias('webroot').'/images/tmp/' . $pic->name);
                }
            }
        }
    }

    /**
     * Creates a new model.
     * If creation is successful, the browser will be redirected to the 'view' page.
     */
    public function actionCreate()
    {
        $model=new FaDepreciation;

        if(isset($_POST['FaDepreciation']))
        {
            //Assign our safe attributes
            $model->attributes=$_POST['FaDepreciation'];

            //Save the model to the database
            if($model->save()){ 
                $this->upload($model->id);
                $this->redirect(array('view','id'=>$model->id));
            }           
        }

        $this->render('create',array(
            'model'=>$model,
        ));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:30:57.443

> Q1 : 如何在通过 ajax 删除图像后显示 CMultiFileUpload 小部件？

有两种选择：

*   创建一个单独的控制器并将其呈现为您的小部件（删除图像后将通过 ajax 发送请求）
*   在页面上直接渲染小部件，并在删除后借助 javaScript 也通过 CSS 显示它。

> Q2 : 上传图片后如何立即显示图片？

*   最明显的方法是将响应以 JSON 格式发送，并在客户端将 html 块与图像组合在一起。
*   第二个选项是在服务器上呈现带有图像的页面并将其发送给客户

# c# - 带有输出值的 ExecuteStoreQuery

> ID：11791959
> 
> 赞同：0
> 
> 时间：2012-08-03T08:21:10.867
> 
> 标签：c#, sql, entity-framework

有谁知道我如何使用 ExecuteStoreQuery 以及存储过程的结果返回输出值？

谢谢

编辑：

这是我的SP：

[http://pastebin.com/KgGLTzEe](http://pastebin.com/KgGLTzEe)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:25:07.430

`ExecuteStoreQuery`执行产生结果集的 SQL

你想要`ExecuteFunction`（或`ExecuteStoreCommand`）

`ExecuteFunction`获取存储过程的参数列表。

```
var parameter = new ObjectParameter("OutputParameterName", typeof(int));
var results = context.ExecuteFunction<YourEntity>("ProcName", 
    parameter
    ).ToList();
var parameterresult = parameter.Value; 
```

# macos - 如何仅在窗口边界中显示弹出框？

> ID：11791963
> 
> 赞同：0
> 
> 时间：2012-08-03T08:21:37.787
> 
> 标签：macos, nspopover

显示弹出框的按钮位于窗口的按钮左角。如何仅在窗口边界中显示弹出框？注意力！苹果系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:22:07.593

这是不可能的。NSPopover 是一个浮动窗口，它连接到某个其他窗口，但在其他方面完全独立。但是，您可以通过计算使弹出框与该区域保持一致的弹出位置来尝试手动将其保持在屏幕上的特定范围内。但这无论如何都不会在所有情况下都有效（例如，如果用户移动应用程序窗口以致弹出窗口没有足够的空间）。

# c# - 使用 linq 过滤列表的最佳方法？

> ID：11791967
> 
> 赞同：0
> 
> 时间：2012-08-03T08:21:52.310
> 
> 标签：c#, linq

对于这是否是检索我需要的东西的最佳方法，我有点困惑。我有一个使用 ftp 从目录中获取的文件列表。我需要根据用户输入的文件掩码过滤文件名列表`List<string>`。我喜欢 LINQ，但几个月没有使用它，我似乎已经失去了一些技能。到目前为止，我已经想出了以下内容。如果有人可以验证我所做的是最好的方法，我会很感激。

```
foreach (string s in fileMasks)
{
    fileNames.AddRange(
        directory.Files.ToList().Where(a => a.Name.EndsWith(s))
        .Select(b => b.Name)
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:25:25.153

你可以简化你的查询

```
fileNames.AddRange(directory.Files.Select(f => f.Name).Where(a => a.EndsWith(s)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T08:25:53.203

看起来不错，但你可以跳过`.ToList()`中间的。

您还可以使用查询语法重写

```
fileNames.AddRange(
    from file in directory.Files
    where file.Name.EndsWith
    select file.Name
); 
```

我经常发现查询语法更容易阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T08:30:10.800

你不需要任何`foreach`循环`AddRange`，你可以使用`SelectMany`扩展方法：

```
List<string> result = directory
    .Files
    .SelectMany(f => fileMasks.Where(m => f.Name.EndsWith(m)), (f, m) => f.Name)
    .ToList(); 
```

或者，如果您更喜欢使用 LINQ 语法：

```
List<string> result =
    (from f in directory.GetFiles()
    from m in fileMasks
    where f.Name.EndsWith(m)
    select f.Name).ToList(); 
```

那是LINQ。但是由于您正在处理过滤目录，因此您可以使用文件掩码。该`DirectoryInfo.GetFiles`方法允许您执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:32:57.000

没有 foreach 语句的解决方案

```
fileNames.AddRange(
    (from file in directory.Files
    from m in fileMasks
    where file.Name.EndsWith(m)
    select file.Name)); 
```

# c# - C# 检查是否传递了参数

> ID：11791969
> 
> 赞同：34
> 
> 时间：2012-08-03T08:22:04.883
> 
> 标签：c#, args

我有这个代码：

```
public static void Main(string[] args)
{         
    if (string.IsNullOrEmpty(args[0]))  // Warning : Index was out of the bounds of the array
    {
        ComputeNoParam cptern = new ComputeNoParam();
        cptern.ComputeWithoutParameters();
    }
    else
    {
        ComputeParam cpter = new ComputeParam();
        foreach (string s in args){...}
    }
} 
```

也试过`if(args.Length==0)`了，还是不行。

基本上我想知道用户是否用参数调用了程序。如果不是，程序将要求输入。

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-03T08:23:33.830

`if(args.Length==0)`应该可以工作，`args[0]`至少需要一个参数才能不崩溃。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-03T08:24:13.347

```
if(args == null || args.Length == 0)
{
    // no arguments
}
else
{
    // arguments
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T08:26:08.630

它是一个数组，有两种情况可能意味着没有传递参数。取决于你的语义

`args == null`或者`args.Length == 0`

在这种情况下，当程序执行时调用该方法（例如，不调用该方法作为单元测试的一部分），args 参数永远不会为空（使第一个测试变得多余）我已经包含它是为了完整性，因为在 main 之外的其他方法中可能很容易遇到相同的情况

如果您按该顺序测试它们，则不必担心后一个表达式中的 args 为空

```
if(args == null || args.Length == 0){
    ComputeNoParam cptern = new ComputeNoParam();
    cptern.ComputeWithoutParameters();
}
else
{
    ComputeParam cpter = new ComputeParam();
    foreach (string s in args){...}
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-03T08:27:18.543

这也应该有效：

```
if (args.Length < 1)
{
    //no args passed
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-06T15:47:41.980

如果您已经在使用，另一个可用选项是`System.Linq`使用`Any()`扩展，例如：

```
public static void Main(string[] args)
{
    if (args == null && !args.Any())
    {
        // No parameters passed.
        ComputeNoParam cptern = new ComputeNoParam();
        cptern.ComputeWithoutParameters();

        return;
    }

    // process parameters
    ComputeParam cpter = new ComputeParam();
    foreach (string s in args){...}
} 
```

这也可以写成：

```
public static void Main(string[] args)
{
    if (!args?.Any() ?? true)
    {
        // No parameters passed.
        ComputeNoParam cptern = new ComputeNoParam();
        cptern.ComputeWithoutParameters();

        return;
    }

    // process parameters
    ComputeParam cpter = new ComputeParam();
    foreach (string s in args){...}
} 
```

这只是显示了另一个可供您使用的选项，我同意使用`.Length`，尽管我会放弃空检查并改用条件访问，所以。

```
if (args?.Length == 0) {
    // Code hit if args is null or zero
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-21T13:44:50.203

这应该适用于您的场景：

```
if (args == null || args.Length == 0)
{
    //Code when no arguments are supplied
}
else
{
    //Code when arguments are supplied
} 
```

注意使用 ||`check args == null`之前应该如何执行 `args.Length == 0`或者 ＆＆。这称为“条件短路”，其中 C# 将开始评估第一个条件，如果为真，则不会查看第二个条件。在这种情况下，只有当第一个条件为假时，C# 才会评估第二个条件。

假设如果您的条件与 as 对齐`if(args.Length == 0 || args == null)`并`args`成为`null,`它，它将在第一个条件下抛出异常，尽管第二个条件为真。

这是我们在放置条件时需要牢记的。

# django - 将 TabularInline 添加到 django 中的用户模型

> ID：11791971
> 
> 赞同：1
> 
> 时间：2012-08-03T08:22:10.650
> 
> 标签：django, django-admin

我想将管理员中的 TabularInline 模型添加到 User 模型中。

我该怎么做这样的事情？因为我不负责注册？

我可以向用户模型添加内联吗？我可以重新注册吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:33:11.993

您可以取消注册任何模型对象并根据您的自定义需求重新注册它

```
admin.site.unregister(User)
admin.site.register(User, YourCustomAdmin) 
```

# macos - 如何在 Mac 机器上设置 Xfig？

> ID：11791976
> 
> 赞同：3
> 
> 时间：2012-08-03T08:22:35.373
> 
> 标签：macos, osx-lion, eps

用户手册说我需要

> 获取 xfig (xfig.3.2.5-alpha3.full.tar.gz) 和 gunzip 的源并解压缩文件： 要么执行： gunzip -c xfig.3.2.5-alpha3.full.tar.gz | tar xvf - 或 gunzip xfig.3.2.5-alpha3.full.tar.gz tar xvf xfig.3.2.5-alpha3.full.tar

它还说

> 有一个移植版本的 xfig 可以在 XFree86 的 Darwin 移植下的 MacIntosh 上运行。

但是我没有找到如何设置 XFree86 甚至 xfig，因为我对 Mac OS 或 UNIX 都很陌生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T08:53:06.550

最简单的方法可能是使用包管理器，如[Macports](https://www.macports.org/)、[Fink](https://www.finkproject.org/)、[Homebrew](https://brew.sh/)等。

对于macports，步骤基本上是

1.  [从此处](https://www.macports.org/install.php)从正确的 .dmg 安装 macports
2.  安装 Xcode
3.  更新 macport`sudo port selfupdate`
4.  在其他目录之前检查您的 shell 在路径上是否有 /opt/local/bin
5.  安装 xfig 端口`sudo port install xfig`

其他经理将有一套类似的指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T22:46:11.157

在xfig中画线时，右键是取消操作按钮。要结束该行，请按中间按钮。我不知道你是如何让mac鼠标模拟中键或右键的。

# java - Java 基于 Web 的防火墙身份验证

> ID：11791977
> 
> 赞同：0
> 
> 时间：2012-08-03T08:22:36.907
> 
> 标签：java, post, firewall

每天，我必须通过一个基于 Web 的身份验证系统（防火墙），它的工作原理如下：一旦我连接到网络并输入任何网址，例如`www.google.com`，我会看到一个基于 Web 的登录表单（输入任何地址都会带来使用相同的表单）并在提交后从路由器获得一个经过身份验证的响应页面，地址为： `192.168.2.254:1000/keepalive?somejibberjabbernumberwhichchangeseverytime`

该页面必须在 200 秒后刷新，否则您将被注销。这是自动完成的，但有时会失败。

之后，启用互联网并且可以浏览。我想制作一个简单的应用程序（java）来为我完成这项无聊的任务。它会将我的凭据发送到服务器。登录我。说 30 秒后自动发送刷新命令。

关于如何做到这一点有什么建议吗？我需要创建一个独立的桌面应用程序而不是服务器端应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:40:16.597

所以基本上，你想用你的应用程序“玩浏览器”吗？[像httpunit](http://httpunit.sourceforge.net/)这样的Web 测试库非常适合此类任务。基本上，这就是你要做的：

*   查询某个页面（GetMethodWebRequest），期望被重定向
*   检查您是否被重定向
*   提取表单（response.getFormWithID），填写您的凭据，提交
*   最有可能是棘手的部分：获取弹出窗口 URL。
*   定期轮询提取的 URL

看看 httpunit 的食谱和教程，我猜你会在那里找到解决问题所需的所有信息。

# java - 如何在休眠中更新父对象时避免更新子对象？

> ID：11791981
> 
> 赞同：1
> 
> 时间：2012-08-03T08:22:46.537
> 
> 标签：java, hibernate

我不知道我的设计本身是错误的还是什么。但任何机构都可以给我一个解决方案。我有一个对象，PlanningItem。由此我需要使用 PlanningItem 的两个属性从另一个表中获取记录。所以我创建了视图并将该视图添加为 PlanningItem 中的一对多关系记录。当我更新计划项目时，我遇到了错误。在此，我准备将视图更改为子选择或其他任何内容。请提出继续进行的想法。

下面是我的代码。

查看PlannigItem.hbm.xml

```
<class
        name="com.cotyww.ipmasterdata.core.entity.master.ViewPlannigItem" 
        table="VW_PLANNING_ITEM"  >
        <id name="planningIrc" type="string" column="PLANNING_IRC">
            <generator class="assigned" />
        </id>

        <property name="planningIRCDesc" column="PLANNING_ITEM_DESC"
            type="string" />

        <property name="programId" column="PROGRAM_ID" type="string" />

        <property name="salesOrgId" column="SALES_ORG_ID"
            type="integer" />

        <property name="salesBrandId" column="SALES_BRAND_PKEY"
            type="integer" />

        <many-to-one name="salesBrand" update="false" insert="false"
            class="com.cotyww.ipmasterdata.core.entity.master.SalesBrand"
            column="SALES_BRAND_PKEY" />

        <many-to-one name="salesOrg" update="false" insert="false"
            class="com.cotyww.ipmasterdata.core.entity.master.SalesOrg"
            column="SALES_ORG_ID" />

    </class> 
```

规划项目.hbm.xml

```
<class 
        name="com.cotyww.ipmasterdata.core.entity.master.PlanningItem"
        table="Planning_Item">
        <id name="planningIrc" type="string" column="PLANNING_IRC">
            <generator class="assigned" />
        </id>

        <property name="programId" column="Program_Id" type="string" />

        <property name="planningitemDesc" column="Planning_Item_Desc"
            type="string" />

        <many-to-one name="hierarchyCode" update="false" insert="false"
            class="com.cotyww.ipmasterdata.core.entity.master.GmmBrand"
            column="Gmm_Hierarchy_Code" />

        <property name="gmmhierarchyCode" column="Gmm_Hierarchy_Code"
            type="string" />

        <many-to-one name="gmmcategoryCode" update="false"
            insert="false"
            class="com.cotyww.ipmasterdata.core.entity.master.GmmCategory"
            column="Category_Code" />
        <property name="categoryCode" column="Category_Code"
            type="string" />

        <set name="lstViewPlanningItem"  cascade="none" >
            <key column="PLANNING_IRC" />
            <one-to-many not-found="ignore" 
                class="com.cotyww.ipmasterdata.core.entity.master.ViewPlannigItem" />
            <filter name="planningsalesORg"
                condition="SALES_ORG_ID = :salesOrgId" />
        </set>

        <property name="modifiedBy" column="Audit_User" type="string" />
        <property name="modifiedDate" column="Audit_Date" type="date" />
        <property name="createdBy" column="Created_By" type="string" />
        <property name="createdDate" column="Created_Date" type="date" />

    </class>
    <sql-query name="nextPlanningItemSequenceValueC1US">
        <![CDATA[ SELECT SQ_PLANNING_ITEM_PKEY_C1US.nextVal FROM dual ]]>
    </sql-query>

        <sql-query name="nextPlanningItemSequenceValueC1CA">
        <![CDATA[ SELECT SQ_PLANNING_ITEM_PKEY_C1CA.nextVal FROM dual ]]>
    </sql-query>

        <sql-query name="nextPlanningItemSequenceValueL1US">
        <![CDATA[ SELECT SQ_PLANNING_ITEM_PKEY_L1US.nextVal FROM dual ]]>
    </sql-query>

        <sql-query name="nextPlanningItemSequenceValueL1CA">
        <![CDATA[ SELECT SQ_PLANNING_ITEM_PKEY_L1CA.nextVal FROM dual ]]>
    </sql-query>

        <sql-query name="nextPlanningItemSequenceValueP1US">
        <![CDATA[ SELECT SQ_PLANNING_ITEM_PKEY_P1US.nextVal FROM dual ]]>
    </sql-query>

        <sql-query name="nextPlanningItemSequenceValueP1CA">
        <![CDATA[ SELECT SQ_PLANNING_ITEM_PKEY_P1CA.nextVal FROM dual ]]>
    </sql-query>
    <filter-def name="planningsalesORg">
        <filter-param name="salesOrgId" type="integer" />
    </filter-def> 
```

数据库视图

```
CREATE OR REPLACE FORCE VIEW COREMASTER.VW_PLANNING_ITEM
(PLANNING_IRC, PLANNING_ITEM_DESC, PROGRAM_ID, SALES_ORG_ID, SALES_BRAND_PKEY, 
 GMM_HIERARCHY_CODE)
AS 
SELECT  P.PLANNING_IRC,
            P.PLANNING_ITEM_DESC,
            P.PROGRAM_ID,
            nvl(MAP.SALES_ORG_ID,MAP1.SALES_ORG_ID) as sales_org,
            nvl(MAP.SALES_BRAND_PKEY,MAP1.SALES_BRAND_PKEY) as sales_brand_pkey,
            P.GMM_HIERARCHY_CODE
     FROM   PLANNING_ITEM P,
            GMM_MAP MAP,
            GMM_MAP MAP1    
     WHERE  
            P.GMM_HIERARCHY_CODE = MAP.GMM_HIERARCHY_CODE(+)
            AND P.CATEGORY_CODE = Map.GMM_CATEGORY_CODE(+)
            AND P.GMM_HIERARCHY_CODE = MAP1.GMM_HIERARCHY_CODE(+)
            AND Map1.GMM_CATEGORY_CODE IS NULL; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:28:30.847

尝试在您的一对多关系参数中设置 inverse="true"。这将告诉 hiberante 在更新父级时不要更新关系（FK 列）。

我的意思是下一个：

```
<set name="lstViewPlanningItem"  cascade="none"  inverse="true">
         <key column="PLANNING_IRC" />
         <one-to-many not-found="ignore"
                class="com.cotyww.ipmasterdata.core.entity.master.ViewPlannigItem" />
         <filter name="planningsalesORg"
                condition="SALES_ORG_ID = :salesOrgId" />
</set> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:29:20.603

这不是您通常使用 Hibernate 的方式。将您的对象直接与相关表相关联，然后您可以定义查询以使用您放入视图中的过滤等来获取它们。我建议阅读[JPQL](http://docs.oracle.com/html/E24396_01/ejb3_langref.html)以使用 JPA 对象进行查询。

# html - embed.swf 使 Firefox 窗口无法调整大小

> ID：11791984
> 
> 赞同：2
> 
> 时间：2012-08-03T08:23:07.120
> 
> 标签：html, flash, firefox, swfobject

有人可以告诉我，为什么下面的 html 代码会使 firefox 窗口（在 windows7 上）无法调整大小？

```
<!doctype html>
<html>
<head>
<title>Flash</title>
<script src="jquery.js"></script>
<script src="swfobject.js"></script>
<script type="text/javascript">
$(document).ready( function() {
    swfobject.embedSWF("Menu.swf", "flashdiv", "100%", "100%", "10");
});
</script>
<style>
html,body,#flashdiv
{
width:100%;
height:100%;
margin:0;
padding:0;
overflow:hidden;
}
</style>
</head>
<body><div id="flashdiv"></div></body>
</html> 
```

现场测试用例：[http ://www.embege.com/misc/ff.html](http://www.embege.com/misc/ff.html)

编辑：我已经尝试禁用所有插件。我也尝试了 Firefox beta，但是当我在这个页面时，窗口大小仍然被锁定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:45:40.383

对于 Firefox 和 Flash Player 的特定组合，这是 Firefox 和 Adob​​e Flash Player 的一个已知错误。该错误已通过 Adob​​e 和 Firefox 提交，您可以在[Mozilla Bugzilla 条目](https://bugzilla.mozilla.org/show_bug.cgi?id=765788#c34)中阅读有关此错误的详细信息。

如果您对错误的技术细节感兴趣，这里是导致问题的原因的描述：

> Jeromie 报告说，问题在于 Flash 过早地发布了 Mouse Capture。据我所知，这是正确的。Flash 似乎也在吃掉我们的 WM_CAPTURECHANGED 消息，这些消息没有过滤到 Firefox WndProc。在 Flash 11.4 中，我们收到了这些消息。因此，不仅鼠标捕获被提前释放，而且我们没有被告知，因此我们不能尝试自己捕获鼠标捕获（尽管无论如何这都是不可取的）。

该错误已[在 Adob​​e Flash Player 错误数据库中报告为已关闭](https://bugbase.adobe.com/index.cfm?event=bug&id=3217427)，升级到最新版本的 Firefox 和 Flash Player 应该可以解决问题。如果您不是这种情况，请尝试按照[Mozilla 错误条目的评论 #58 中](https://bugzilla.mozilla.org/show_bug.cgi?id=765788#c58)描述的步骤进行操作。

# asp.net - 在 ASP.NET 3.5 中使用 Remote PC 绑定树视图控件

> ID：11791985
> 
> 赞同：0
> 
> 时间：2012-08-03T08:23:10.457
> 
> 标签：asp.net, treeview, .net-3.5

我正在 3.5 中制作 ASP.NET Web 应用程序。是否可以有一个与远程 PC 绑定的树视图控件（通过 IP，例如 //10.227.124.53/SharePath/Documents）并显示文件和文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:19:24.427

据我所知，这种方法是不可能的。我正在做同样的事情。我在远程机器上使用 wcf 服务，并在用户展开树时调用函数来按需构建树。它运行良好，您不会有任何用户权限问题，这意味着它可以正常工作。

# c# - 从 datagridview 的变化更新数据库

> ID：11791988
> 
> 赞同：0
> 
> 时间：2012-08-03T08:23:31.483
> 
> 标签：c#, database, datagridview

我收到此错误：

> 参数化查询“(@SupplierName nvarchar(50),@CostPrice nvarchar(50))UPDATE CostP”需要未提供的参数“@SupplierName”。

这里有什么问题？

```
con = new System.Data.SqlClient.SqlConnection();
con.ConnectionString = "Data Source=tcp:SHEN-PC,49172\\SQLEXPRESS;Initial Catalog=LSEStock;Integrated Security=True";
con.Open();

String updateData = "UPDATE CostPrice SET SupplierName = @SupplierName, CostPrice = @CostPrice WHERE PartsID = '" +textBox1.Text+"'";
SqlCommand update = new SqlCommand(updateData, con);

update.Parameters.Add("@SupplierName", SqlDbType.NVarChar, 50, "SupplierName");
update.Parameters.Add("@CostPrice", SqlDbType.NVarChar, 50, "CostPrice");

update.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:44:36.220

我认为问题在于您如何设置值 - 我认为这是导致您的错误消息的原因。

尝试这个：

```
update.Parameters.Add("@SupplierName", SqlDbType.NVarChar, 50).Value = "SupplierName"; 
```

我在下面链接到的 MSDN 页面上有一个替代方案，这也可能有所帮助。

MSDN 链接： http: [//msdn.microsoft.com/en-us/library/e5xwx8sc (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/e5xwx8sc(v=vs.80).aspx)