# StackOverflow 问答 11989000-11989999

# node.js - 通过 Node.js 中的 OAuth2 对 BigQuery REST API 进行身份验证

> ID：11989001
> 
> 赞同：2
> 
> 时间：2012-08-16T14:09:20.943
> 
> 标签：node.js, oauth-2.0, google-bigquery

新手试图弄清楚如何让 Node.js 应用程序进行身份验证和查询 Google BigQuery，试图[从 Java 改编本 CodeLab 教程](https://developers.google.com/bigquery/articles/gettingstartedwithjava#createandauth)。我可能会错过哪一步？

首先，我使用我的 clientid 创建这个 Oauth2 URL：

```
https://accounts.google.com/o/oauth2/auth?
    client_id=1047877053699-den6kbs4v3f2bft6clonsirkj1pc7t6j.apps.googleusercontent.com
    &scope=https://www.googleapis.com/auth/bigquery
    &redirect_uri=http://localhost:3000/oauth2callback
    &access_type=offline
    &response_type=code 
```

这成功到达谷歌，提示

> **第三方服务正在请求访问您的 Google 帐户的权限。**

同意生成第二个提示：

> Nodejs_Test 正在请求以下权限： 查看和管理您在 Google BigQuery 中的数据

同意这一点，回调 URL 被调用，带有一个参数`accessToken`。

我*认为*以下 url 应该列出我的 BigQuery 项目/数据集中的表：

[https://www.googleapis.com/bigquery/v2/projects/1047877053699/datasets/visits&accessToken=4%2FC196NizZwlNgWSt5oNqQwendmLNW.0vgUrlGJ6kMRshQV0ieZDApig3NfcgI](https://www.googleapis.com/bigquery/v2/projects/1047877053699/datasets/visits&accessToken=4%2FC196NizZwlNgWSt5oNqQwendmLNW.0vgUrlGJ6kMRshQV0ieZDApig3NfcgI)

但无论是否使用 accessToken 调用都会返回以下消息“需要登录”。

```
 {
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "required",
    "message": "Login Required",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Login Required"
 }
} 
```

我知道由于权限、过期令牌等原因，您无法重复代码。但我想知道我在概念上可能遗漏了哪一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:51:35.397

您是否尝试过将 accesstoken 作为授权标头而不是作为 url 参数发送？

如在

```
https://www.googleapis.com/bigquery/v2/projects/1047877053699/datasets/visits
Authorization: OAuth Your-access-token-here-not-urlencoded 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T18:38:52.770

仅供参考 - 看起来您最初`accessToken`在 URL 中使用了该参数。它应该改为`access_token`，看起来它工作正常。当然，如果你能够做到，Jordan 建议使用 Header 会更好——它更安全，因为它不太可能登录访问日志、代理服务器日志等。

# loops - OpenCV：使用范围设置矩阵值

> ID：11989003
> 
> 赞同：0
> 
> 时间：2012-08-16T14:09:24.167
> 
> 标签：loops, opencv, matrix

我正在使用以下视频帧代码来设置一定范围内的矩阵值：

```
for ( int row = 0, i = 0; row < srcMat.rows; ++row, i ++ )
{
   uchar* p = medianMat.ptr ( row );
   for ( int col = 0, j = 0; col < srcMat.cols; ++ col, j ++ )
   {
     dstMat ( cv::Range::all(), cv::Range ( i * 5 +1, i * 5 + 4 )).setTo ( *p );
     data++;
   }
} 
```

我需要将 *p 复制到 dstMat 的三个连续值，并在它们之前和之后留下一个零空间。也就是说，如果我的 dstMat 全部为零，并且 *p 值为“1,2,3”，那么我的目标是让 dstMat 看起来像“01110 02220 03330”等。我希望我让这个容易理解。我的问题是：一帧大约需要 70 到 80 毫秒，这对我的情况来说太慢了。我最多有 30 毫秒的单帧。有没有更有效的方法来做到这一点？此外，“dstMat " 值在 "for" 循环之外都是零。你有什么想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:29:29.420

类似的东西

```
for ( int row = 0; row < dstMat.rows; ++row ){
   uchar* pMed = medianMat.ptr ( row );
   uchar* pDest = dstMat.ptr ( row );  // resulting image
   pDest++; // skip the first place '0'

   for ( int col = 0; col < dstMat.cols; col+=5 )    {
     // copy the value from median into the destination in 3 consecutive values
     *pDest++ = *pMed; // copy 1 to dest
     *pDest++ = *pMed; // copy 1 to dest
     *pDest++ = *pMed; // copy 1 to dest

     pDest+=2; // skip the two zeros
     pMed++; // move to the '2'
   }
} 
```

您可以使用 cv::zeros 将新的 cv::mat 初始化为零

# xcode - 哪里可以获得适用于 Xcode 的 macOS SDK 10.6？

> ID：11989007
> 
> 赞同：22
> 
> 时间：2012-08-16T14:09:38.030
> 
> 标签：xcode, osx-lion, osx-snow-leopard, openframeworks

我正在使用`Xcode 4.4`OS X Lion。我想安装 Mac 10.6 SDK - 也​​称为 macosx10.7 SDK - 因为我需要编译 openFrameworks。

我发现我需要从[这个站点](https://developer.apple.com/downloads/index.action)下载其他工具。但是我在那里没有找到任何 10.6 SDK。我也尝试查看 Xcode Preferences -> Downloads -> Components，但没有办法。

我想知道如何为 Xcode 安装以前的 SDK？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-16T14:41:07.917

不幸的是，Apple 往往比你想要的更难。您无法自行下载 SDK。它们是 Xcode 特定版本的一部分。所以你必须下载正确版本的 Xcode。搜索“10.6”，你会看到你想要 Xcode 4.1。

下载后，您可以安装它（该版本将进入 /Developer，因此它不会破坏您的 /Applications 版本），或者您可以打开包并在其中找到 SDK。如果您不知道如何破解打开这些包，只需安装它即可。

完成后，搜索“MacOSX10.6.sdk”。我忘记了它在那个特定版本中的确切位置。

我当时所做的是将 sdk 复制到 /SDKs 目录中。这样我总是拥有它们。

现在，您需要将它添加到您当前版本的 Xcode 中。您可以通过在 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs 中创建符号链接来做到这一点。如果您愿意，您可以使用我的小型[link-sdks](https://gist.github.com/3370649)脚本。

* * *

更新：在现代版本的 Xcode (7.3+) 中使用旧版 SDK`MinimumSDKVersion`在此处编辑：

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Info.plist 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-03T17:44:50.527

所有旧版 MacOS SDK 都可以在 GitHub 上找到 - [https://github.com/phracker/MacOSX-SDKs](https://github.com/phracker/MacOSX-SDKs)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T23:03:08.773

例如，如果您搜索[openFrameworks 论坛](http://forum.openframeworks.cc/)，就会发现一些帖子中人们会从他们的公共 Dropbox 文件夹中提供下载链接。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-09T16:12:04.143

有点离题，但我在尝试使用[kerl](https://github.com/yrashk/kerl)安装 Erlang 时遇到了一个非常相似的问题。

在“kerl build ...”步骤之前，一切都对我有用。构建日志显示以下错误：

```
odbcserver.c:117:10: fatal error: 'sql.h' file not found #include "sql.h" 
```

问题是 ODBC 不再是 Mavericks 安装的一部分（即未安装 MacOS 10.6 SDK）。将来自各种站点的建议拼凑在一起，但没有一个单独起作用，以下一组步骤解决了这个问题：

1.  **brew install unixodbc** - 安装缺少的 ODBC 库和包含文件（例如 sql.h）。
2.  将 CFLAGS 设置为指向 unixodbc 安装的包含目录，作为 kerl 构建命令的一部分（例如）：

    CFLAGS="-I/usr/local/Cellar/unixodbc/2.3.2/include" ./kerl build R15B R15B

这会将构建指向 ODBC 包含文件。

我的环境是 Mavericks、xcode 命令行工具和 xcode v5.1.1。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T15:46:19.743

您可以从直接链接下载一些 SDK（带有 Xcode）。在这里列出：http: [//iphonesdkdev.blogspot.ru/2010/04/old-versions-of-iphone-sdk.html](http://iphonesdkdev.blogspot.ru/2010/04/old-versions-of-iphone-sdk.html)

有些不起作用，但您仍然可以下载一些东西。例如： [http ://adcdownload.apple.com/Developer_Tools/xcode_3.2.6_and_ios_sdk_4.3__final/xcode_3.2.6_and_ios_sdk_4.3.dmg](http://adcdownload.apple.com/Developer_Tools/xcode_3.2.6_and_ios_sdk_4.3__final/xcode_3.2.6_and_ios_sdk_4.3.dmg)

# seo - 搜索引擎优化，从谷歌删除旧页面？

> ID：11989008
> 
> 赞同：0
> 
> 时间：2012-08-16T14:09:38.987
> 
> 标签：seo, web-crawler

我最近工作的一个网站曾经是基于 joomla 的，里面有很多文章，整个业务都不同。

在清除站点 (FTP) 并重新开始并最终完成所有工作之后，谷歌上的站点排名受到不再存在的旧页面的困扰。此外，谷歌似乎认为这些页面确实存在。

我的印象是，在重新抓取网站后（在它认为合适的任何时间），它会识别出这些页面现在不存在并在可能的情况下替换它们。

它让我发疯。有 100 多页，所以我不能提出将它们全部删除的请求，它们不会自动被删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:12:55.890

这将需要一段时间，但他们最终会停止寻找这些页面。他们继续尝试了一会儿，假设他们的失踪是一个错误，他们会回来。如果您不打算提出删除请求，那么您将不得不等待它完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T10:39:13.080

确保所有旧页面都返回 404 或 410 状态。如果 Googlebot 多次遇到 404/410 状态，它将从索引中删除它们。

还建议检查这些页面是否有反向链接。如果 Googlebot 不断遇到指向过时页面的反向链接，它可能仍会将它们保留在搜索索引中。如果有一些页面具有有效的反向链接，建议 301（重定向）它们到有效页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T01:21:17.613

使用您可以在[此处找到的](https://stackoverflow.com/questions/2710665/remove-deleted-page-from-google-search-results)**Google WebMaster Tools**尝试答案。

# c# - 处理 LIKE 比较的参数值中的特殊字符

> ID：11989011
> 
> 赞同：1
> 
> 时间：2012-08-16T14:09:56.797
> 
> 标签：c#, .net-4.0, sql-server-2008-r2

假设我正在查询 Sql Server DB 的行计数，该`LIKE`比较基于对通过 windows 窗体文本输入提供的值的列的比较。由于可能的用户输入导致注入，因此在此处使用参数很重要。最终我要在我命名`ExecuteScalar()`的实例化对象上执行成员函数，但首先我必须添加参数。例如：`SqlCommand``cmd`

```
cmd.Parameters.AddWithValue("@param1", textBox1.Text); 
```

Sql Server 使用特殊字符`%`作为通配符匹配进行`LIKE`比较。我想做的是允许用户使用`*`通配符。因此，一个简单的替换：

```
textBox1.Text.Replace('*','%'); 
```

问题是我遇到了包含特殊符号`%`和`_`. 搜索文字`%`而不是将其用作通配符的一种方法是将其括在方括号中：`[%]`.

所以，现在我的替换必须变成：

```
textBox1.Text.Replace("%","[%]").Replace("_","[_]").Replace('*','%'); 
```

顺序在这里也很重要，因为如果最后一个`Replace`做得更快，`%`就会被错误地对待。

我不确定我是否已经覆盖了所有的基础，这里还有其他我需要担心的角色吗？这真的可以防止注射吗？有没有其他首选的方式来做到这一点？

示例查询可能是这样的：

```
SELECT COUNT(*) FROM [MyTable] WHERE [Column1] = @param1 
```

您的表名在哪里`MyTable`，并且`Column1`是`MyTable`. 我们可以假设这`Column1`是某种`nvarchar`类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:59:09.797

你不应该真的需要任何其他东西，但我会确保从用户输入中测试奇怪的东西。您没有考虑到的一些字符在 中具有特殊含义`LIKE`：

```
^
- 
```

由于您将参数传递到语句中而不是盲目地附加字符串，因此注入的危险*应该*很小，但您可能想尝试用户输入的变化，例如：

```
foo'; DELETE dbo.[UnimportantTable];
foo''; DELETE dbo.[UnimportantTable];
foo''''; DELETE dbo.[UnimportantTable]; 
```

同样，我不确定你是否容易受到攻击，因为我看不到整个事情，但我确实认为构建各种测试非常容易，这样你就可以通过广泛的潜在样本了解所有潜在结果输入。

正如@Bryan 指出的那样，当然，限制风险的一个好方法是使用登录进行连接，该登录仅对您希望他们能够读取的对象具有非常明确的只读权限。然后，即使他们确实利用了你脚手架上的一些漏洞，进入也不会给他们带来太多好处。

# android - 如何在没有互联网访问的情况下创建跨平台多人游戏

> ID：11989012
> 
> 赞同：3
> 
> 时间：2012-08-16T14:09:55.917
> 
> 标签：android, ios, networking, cross-platform, multiplayer

我正在开发一个跨平台的 android 和 ios 多人游戏。我需要在没有主服务器的设备之间创建直接网络连接，以便能够在没有任何互联网访问的情况下播放（例如在地铁中）。

我已经尝试过这种名为“[荣耀的天空](http://www.prnewswire.com/news-releases/social-gaming-network-launches-first-cross-platform-mobile-game-to-enable-live-iphone-to-android-gameplay-over-3g-wifi-and-bluetooth-98598769.html)”的游戏，玩家之间的链接是直接进行的，无需互联网访问。例如电脑游戏，客户端玩家可以在其中一个玩家创建的游戏服务器上查看和连接。

我找不到能够提供这种网络功能的“免费”游戏框架，因此我尝试找到一种标准化的方式来查看主机服务器并建立通信，而无需通过无线连接（wifi 或蓝牙）进行任何用户提示。iOS 和 Android 是独立的世界，但两个平台都支持大多数网络标准。

> > 那么怎么做呢？

我已经排除了解决方案：

*   Android 的 WIFI 直连：与 iOS 不兼容，在 4.x 上可用，所以它太有限了。
*   OSI 的高级协议，因为它假设在同一个托管网络中（在城域中不可能）

我的线索

*   将其中一台设备作为路由器，但无需用户操作。
*   如果在两个操作系统上都可以使用 Piconet 技术。

如果有人有其他想法......

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:58:43.843

在 iOS 上，您可以尝试使用 Bonjour [http://en.wikipedia.org/wiki/Bonjour_(software](http://en.wikipedia.org/wiki/Bonjour_(software) ) [https://developer.apple.com/technologies/ios/networking.html](https://developer.apple.com/technologies/ios/networking.html)但您自己的编程量相当可观这将是构建您需要的东西所必需的。

在 Android 上，如果您可以找到合适的现有端口或使用 NDK自行移植，则可以使用 zeroconf [http://en.wikipedia.org/wiki/Zero_configuration_networking 。](http://en.wikipedia.org/wiki/Zero_configuration_networking)

# android - 如何正确使用 CyanogenMod 特定的 API

> ID：11989013
> 
> 赞同：1
> 
> 时间：2012-08-16T14:10:01.317
> 
> 标签：android, google-play, cyanogenmod

我对[ProfileManager](https://github.com/CyanogenMod/android_frameworks_base/blob/jellybean/core/java/android/app/ProfileManager.java) api 感兴趣，但我想问一些更通用的问题。

1.  如何包含氰基模组的课程？
    是否有任何 SDK/库包，或者我应该下载整个`android_frameworks_base`项目？

2.  如何配置 eclipse 来使用这个库？
    我应该 `android_frameworks_base`作为图书馆检查吗？还是我必须复制接口类？

3.  是否可以在 google play 上将此应用程序限制为 cyanogenmod？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T01:59:36.323

请按照以下页面中的步骤操作。虽然它适用于 android 内部 API，但对于任何 CM API 来说都是一样的，所以它可以正常工作。在识别 API 之前的步骤之后，您可能需要重新启动 IDE，至少对我来说使用 IntelliJ。

[https://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-2-hacking-around/](https://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-2-hacking-around/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-14T20:46:16.330

我在这里的谈话已经相当晚了，但作为对任何进一步了解的人的洞察力——CM 已经推出了一个平台 SDK，它使得 Profile API 之类的东西可以通过静态链接的 sdk jar 访问。

CM 平台 SDK 的详细信息可以在这里找到： [https ://github.com/Cyanogenmod/cm_platform_sdk/wiki](https://github.com/Cyanogenmod/cm_platform_sdk/wiki)

此处提供预建 jars（当前和未来）： [https ://github.com/CyanogenMod/android_prebuilts_cmsdk](https://github.com/CyanogenMod/android_prebuilts_cmsdk)

# jquery - 使用 Jquery 将两个元素传递给函数

> ID：11989017
> 
> 赞同：0
> 
> 时间：2012-08-16T14:10:37.657
> 
> 标签：jquery

对于类上的单击事件，我有以下 jquery 函数：

JS

```
$('a[rel=blue]').click(function(){
    $('.ffHide').css("display", "none");
}); 
```

现在这很好用，除了我想将两个类传递给函数，我该怎么做？

我想做的事：

```
$('a[rel=blue]', 'a[rel=black]').click(function(){
    $('.ffHide').css("display", "none");
}); 
```

但这不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:12:22.613

```
$('a[rel=blue], a[rel=black]').click(function(){
    $('.ffHide').css("display", "none");
}); 
```

只是一个旁注-您最好`.on()`用于附加事件侦听器，例如：

```
$('a[rel=blue], a[rel=black]').on("click", function() {
    $('.ffHide').css("display", "none");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:12:32.673

`'a[rel=blue]', 'a[rel=black]'`应该是`'a[rel=blue], a[rel=black]'`。

```
$('a[rel=blue], a[rel=black]').click(function(){
   $('.ffHide').css("display", "none");
}); 
```

### 多个选择器将在单引号内用逗号分隔。

### 笔记

您尝试的是`$(target, context)`格式，它`target`在`context`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T14:12:38.393

```
$('a[rel=blue], a[rel=black]').click(function(){
  $('.ffHide').css("display", "none");
}); 
```

很近...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T14:13:30.533

尝试

```
$('a[rel=blue], a[rel=black]').click 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-16T14:16:30.470

```
$('a[rel=blue], a[rel=black]').click(function(){
                $('.ffHide').css("display", "none");
            }); 
```

这应该工作

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-16T14:17:25.930

将其传递为 -

```
$('a[rel=blue], a[rel=black]').click(function(){
  $('.ffHide').toggle();
}); 
```

# iphone - 显示锁定屏幕时后台音频应用程序崩溃

> ID：11989020
> 
> 赞同：2
> 
> 时间：2012-08-16T14:10:56.370
> 
> 标签：iphone, avaudioplayer, background-process, nszombie

我有一个播放音频的应用程序，它使用：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

在后台播放音频。

按下设备的唤醒/睡眠按钮¹将锁定屏幕并关闭显示屏。如果音频播放大约 8 分钟，并且我按下睡眠/唤醒或主页按钮，应用程序将崩溃。

这很奇怪，有几个原因：

1.  该应用程序未“恢复”，仅显示正在打开并显示锁定屏幕。
2.  没有调用 App 委托方法：`-applicationWillEnterForeground:`,`-applicationDidBecomeActive:`
3.  该应用程序不会通过以下方式在锁定屏幕上显示任何艺术品`MPNowPlayingInfoCenter`

我启用了 NSZombies，然后我得到：

```
 *** -[__NSArrayM removeObject:]: message sent to deallocated instance 0x10bf9060 
```

回溯看起来像这样（没有多大帮助！）：

![回溯](../Images/56b35ebc9fdf969a3d03a19023bcd90e.png)

### 控制台输出

这是崩溃时的控制台输出。

```
Aug 29 11:37:30 unknown SpringBoard[51] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=1
Aug 29 11:37:30 unknown UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 0
Aug 29 11:37:30 unknown SpringBoard[51] <Notice>: MultitouchHID: detection mode: 255->0 (deferring until bootloaded)
Aug 29 11:37:30 unknown SpringBoard[51] <Notice>: MultitouchHID: device bootloaded
Aug 29 11:37:30 unknown SpringBoard[51] <Notice>: MultitouchHID: detection mode: 0->0
Aug 29 11:37:30 unknown myapp[19495] <Error>: *** -[__NSArrayM removeObject:]: message sent to deallocated instance 0x12158bc0
Aug 29 11:37:38 unknown SpringBoard[51] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=0
Aug 29 11:37:38 unknown SpringBoard[51] <Notice>: MultitouchHID: detection mode: 0->255
Aug 29 11:37:38 unknown UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 1
Aug 29 11:37:49 unknown kernel[0] <Debug>: AppleSerialMultiplexer: mux-ad(eng)::dormancySetIntervalGated: Setting dormancy interval to 0 ms with mask 0 
```

关于如何追踪问题的任何建议？当显示锁定屏幕时，似乎有一些系统级调用被发送到应用程序，但我不知道它们是如何触发`-removeObject`调用的，甚至谁拥有这个对象？

> ^(1\. iPhone顶部的右侧是唤醒/睡眠按钮。它是一个薄的、不显眼的按钮。激活它需要相当大的压力。再加上不显眼，意外激活的可能性较小。它还提供了良好的触觉反馈。唤醒/睡眠按钮有两个主要用途，即让 iPhone 立即进入睡眠模式并将其从睡眠模式中唤醒。您还可以按两次将来电直接发送到语音信箱，这是一项只需触摸即可完成的有用功能。)

# asp.net-mvc - MVC如何在提交时更改按钮文本

> ID：11989023
> 
> 赞同：0
> 
> 时间：2012-08-16T14:11:03.433
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试创建一个带有几个按钮的简单 MVC 4 应用程序，当单击这些按钮时，它们的文本值会增加一个。问题是当我使用 < input > 按钮时，我在提交表单时无法更改文本值，而当我使用 < button > 时，没有任何内容传递给操作。

我有一个控制器命中的简单 SQL 数据库，它是初始 ViewData 值的来源以及它如何存储按钮的当前值。

另外，我目前正在尝试使用多种形式来做到这一点，但如果可以使用一种形式，那将是理想的。

```
@using (Ajax.BeginForm("AddOne", "Home", null, new AjaxOptions { UpdateTargetId = "btn-tc-top"}, new { @class = "rectangle-top" }))
{   
     <input type="submit" class="button" name="button" id="btn-tc-top" value="@ViewData["ct-t"]"/>
}
@using (Ajax.BeginForm("AddOne", "Home", null, new AjaxOptions { UpdateTargetId = "btn-tc-bottom"}, new { @class = "rectangle-bottom" }))
{   
      <button type="submit" class="button" name="button" id="btn-tc-bottom">@ViewData["ct-b"]</button>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:31:07.843

您可以订阅`OnSuccess`处理程序：

```
@using (Ajax.BeginForm("AddOne", "Home", new { id = "btn-tc-top" }, new AjaxOptions { OnSuccess = "addSuccess" }, new { @class = "rectangle-top" }))
{   
    <input id="btn-tc-top" class="button" type="submit" name="button" value="@ViewData["ct-t"]" />
}
@using (Ajax.BeginForm("AddOne", "Home", new { id = "btn-tc-bottom" }, new AjaxOptions { OnSuccess = "addSuccess" }, new { @class = "rectangle-bottom" }))
{   
    <input id="btn-tc-bottom" class="button" type="submit" name="button" value="@ViewData["ct-b"]" />
} 
```

可以这样定义：

```
function addSuccess(result) {
    $('#' + result.id).val(result.text);
} 
```

和控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewData["ct-t"] = "1";
        ViewData["ct-b"] = "2";
        return View();
    }

    [HttpPost]
    public ActionResult AddOne(string id, int button)
    {
        return Json(new { id = id, text = button + 1 });
    }
} 
```

# .net - 将网络框架从 4 降级到 2

> ID：11989026
> 
> 赞同：0
> 
> 时间：2012-08-16T14:11:13.963
> 
> 标签：.net, visual-studio-2010, .net-4.0, .net-2.0

我们为我正在开发的应用程序将 .net 框架升级到 4.0，但由于应用程序运行的服务器尚未为 4.0 做好准备，客户希望应用程序仍然在框架 2.0 上运行。

将框架切换回 2.0 后，我遇到了很多与 ajaxcontroltoolkit 相关的错误。您可以在此页面查看屏幕截图： http://gyazo.com/a95f0895f77f7c2d330f5a7622d22481.png? [1345125742](http://gyazo.com/a95f0895f77f7c2d330f5a7622d22481.png?1345125742)。

[我从这个网站http://ajaxcontroltoolkit.codeplex.com/releases/view/11121](http://ajaxcontroltoolkit.codeplex.com/releases/view/11121)找到了一个 ajaxcontroltoolkit ，我认为“AjaxControlToolkit-NoSource.zip”可以解决错误，但这并没有帮助。

我想知道我需要做什么来解决这个错误。

# android - 寻找代码示例以显示类似气泡的消息

> ID：11989028
> 
> 赞同：3
> 
> 时间：2012-08-16T14:11:23.260
> 
> 标签：android

我想实现一个消息界面，其中传入的消息显示在像图标的气泡内。

我想知道是否有任何机构做过这样的代码并愿意分享。我只是在寻找在气泡状图像中显示文本的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:14:32.393

这里没有什么特别的。这些气泡只是带有 9 个补丁背景图像的简单视图。

如果您不熟悉 9 个补丁图像，请花一些时间熟悉它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T14:14:43.693

以下是一些有用的链接：

[http://warting.se/2012/06/04/chat-bubbles-in-android/](http://warting.se/2012/06/04/chat-bubbles-in-android/)

[http://warting.github.com/AndroidChatBubbles/](http://warting.github.com/AndroidChatBubbles/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:13:59.363

你在寻找这样的东西[吗](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)？

# java-me - 如何控制多个 Rss 文件的流

> ID：11989031
> 
> 赞同：2
> 
> 时间：2012-08-16T14:11:31.800
> 
> 标签：java-me, lwuit, nokia, midp

我使用 LWUIT j2me(java) 为 2 个 xml 文件开发了 RssFeed 应用程序，现在我想在 LWUIT 选项卡上显示这 2 个 xml 文件。

这意味着，当我的应用程序运行时，将显示默认选项卡（在该选项卡上应显示我的第一个 Rss xml 文件标题），并且当用户单击 tab2 时，应显示我的第二个 Rss xml 标题。

我能够在两个选项卡上显示一个 rss 文件的相同标题，如何控制我的流程来完成我的任务？

这是我的代码：

```
public class XMLMidlet extends MIDlet implements ActionListener {

    public XMLMidlet() {
        Display.init(this);
        news = new Vector();
        m_backCommand = new Command("Back");

        cmdExit = new Command("EXIT");
        cmdDetails = new Command("Details");
    }

    public void startApp() {
    //RssFeed URL's     
   String urls[] = {"http://topnews-23.rss",
      "http://topstory-12.rss"};

  for(int i=0;i<urls.length;i++){
        ParseThread myThread = new ParseThread(this,urls[i]);
        //this will start the second thread
        myThread.getXMLFeed(urls[i]);
            }
    }

     //method called by the parsing thread

    public void addNews(News newsItem,String url) {
        try{
        news.addElement(newsItem);
        form1 = new Form();

        myNewsList = new List(newsVector);
        newsList    =new List(newsVector);
        myNewsList.setRenderer(new NewsListCellRenderer());
        newsList.setRenderer(new NewsListCellRenderer());

        tabs=new Tabs(Component.TOP);

        tabs.addTab("TopNews", myNewsList);

        tabs.addTab("Topstory",newsList);

        form1.addComponent(tabs);
        form1.show();
  }

        catch(Exception e){
       e.printStackTrace();     
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:17:13.160

你应该移动到下面的代码

```
myNewsList = new List(newsVector);
newsList    =new List(newsVector);
myNewsList.setRenderer(new NewsListCellRenderer());
newsList.setRenderer(new NewsListCellRenderer());
tabs=new Tabs(Component.TOP);
form1 = new Form();
tabs=new Tabs(Component.TOP);
tabs.addTab("TopNews", myNewsList);
tabs.addTab("Topstory",newsList); 
```

从`addNews`方法到构造函数`XMLMidlet`。`addNews`方法应该使用`url`参数来区分指向哪个列表`newsItem`。

**更新**

以下是我认为你应该如何实现`addNews`方法：

```
public void addNews(News newsItem, String url) { 
  if (url.endsWith("topnews-20.rss")) {
    myNewsList.addElement(newsItem);
  } else if (url.endsWith("topstory-25.rss")) {
    newsList.addElement(newsItem);
  }
} 
```

`serRenderer`不需要调用 from`addNews`并且`form1.show()`应该移动到`startApp`.

# ruby-on-rails - 选择助手不显示字段值

> ID：11989032
> 
> 赞同：0
> 
> 时间：2012-08-16T14:11:37.877
> 
> 标签：ruby-on-rails, form-helpers

我正在尝试使用 select 构建一个表单。我希望选择显示用户名并将其映射到他们的数据库记录的 id。我遇到的麻烦不是显示名称，因为选项是对象ID的方式

```
 #<User:0x007fac10de06c0> 
```

这是用于选择助手的代码

```
select :task, :assigned_to , @project.team.users{|user| [user.profile.name, user.id] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:48:26.017

我认为应该是`@project.team.users.collect`

# .net - 进程监视器 Oracle 数据库连接检查

> ID：11989034
> 
> 赞同：-1
> 
> 时间：2012-08-16T14:11:55.853
> 
> 标签：.net, database, oracle11g, odac

我有 Windows 7（64 位）。我收到 ORA：12154 无法解决 tns 名称问题。我做了基本调查，没有任何结果。使用进程监视器如何查看应用程序在哪里获取 TNSNAMES.ORA 文件。还有什么应该我检查使用进程监视器来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:57:00.093

好的，发现.TNSNAMES.ORA 文件位于不正确的文件夹中

# php - 无需用户登录即可从 Instagram 获取与标签相关的图像

> ID：11989036
> 
> 赞同：2
> 
> 时间：2012-08-16T14:12:00.763
> 
> 标签：php, api, instagram

我正在构建一个小型网络游戏，其中涉及玩家从 Instagram 下拉 6 张与标签相关的公共图像。

我不希望玩家必须登录 Instagram 才能玩游戏。

Instagram API 文档似乎非常倾向于用户登录。

我在 GitHub 上找到了一个 Instagram 课程（链接如下），这是我找到的最接近我正在寻找的东西。然而，它主要用于用户登录，它确实有可供公共访问的位。

[https://github.com/galen/PHP-Instagram-API](https://github.com/galen/PHP-Instagram-API)

我有 Instagram 对象，但我无法使用它

我是所有 API 的新手，所以答案可能很明显。

网站拉入公共图像 [http://searchinstagram.com/](http://searchinstagram.com/) http://london-now.jit.su/

问题 ？有人可以告诉我一种使用 PHP 从 Instagram 中提取与标签相关的图像的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:58:36.927

我有一个 jQuery 插件 - [https://github.com/rickydazla/Hashtagagram](https://github.com/rickydazla/Hashtagagram)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:31:47.110

我在 Instagram 的文档中找到了这个网址，但它与“官方”网址非常相似： [https](https://api.instagram.com/v1/tags/edinburgh/media/recent?client_id=CLIENT_ID&callback=CALLBACK_URL) ://api.instagram.com/v1/tags/edinburgh/media/recent?client_id=CLIENT_ID&callback=CALLBACK_URL ，其中创建应用程序时已定义 CLIENT_ID 和 CALLBACK_URL。

# ruby-on-rails - 使用 PitFalls 和 Trap 将 Rails 2.3.5 迁移到 Rails 3.xx 步骤

> ID：11989039
> 
> 赞同：0
> 
> 时间：2012-08-16T14:12:12.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, migration, ruby-on-rails-2

**更新：问题仍然存在，欢迎任何评论，评论**

正如我已经知道关于我的主题的stackoverflow中的很多QA，但其中大多数都已关闭并且没有正确回答。

**问题 1)**将 Rails 2.3.5 迁移到 Rails 3.xx 的步骤

**问题 2)**陷阱和陷阱

**问题 3)**容易出错和痛苦的迁移阶段

***注意：我需要真正的答案、资料、评论和建议，欢迎参与从 Rails 2.xx 到 Rails 3.xx 的项目迁移的人***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:44:40.427

这已在另一个问题中得到解答，[如何将 rails 2.3.10 更新为 3.x](https://stackoverflow.com/questions/6100723/how-to-update-rails-2-3-10-to-3-x)

但这是我从升级尝试中学到的。由于第一次尝试失败，必须再试一次。

我在其中发现的最有用的东西之一就是这个插件。 [https://github.com/rails/rails_upgrade/blob/master/README](https://github.com/rails/rails_upgrade/blob/master/README) 这将回答1）升级步骤。

此外，升级到 3.0 比升级到 3.1 或 3.2 容易得多。3.0 -> 3.1 破坏了很多东西。建议是分别做 2.3 -> 3.0 -> 3.1 -> ...

2) 2.3 中使用的命名范围不适用于 3.x - 它们必须替换为 Rails 3 版本的范围。对我来说，最烦人的事情是一些没有升级到使用 Rails 3 的 gem，所以我必须找到一个替代品或者把它们扔掉。此外，Rails 3 坚持将我从助手和其他所有地方输出的所有文本都标记为不安全，这真的很烦人。我现在不记得我们做了什么来解决这个问题。

3) 升级 Rails 一切都非常痛苦。

编辑：我今天发现了这个演示文稿，似乎信息量很大，[http://www.slideshare.net/crnixon/rails-3-7983843](http://www.slideshare.net/crnixon/rails-3-7983843)

# objective-c - 将变量和字符串写入文本文件（objective-c）

> ID：11989046
> 
> 赞同：0
> 
> 时间：2012-08-16T14:12:28.240
> 
> 标签：objective-c, file

我在网上冲浪了很多，但我仍然没有找到我的问题的答案：如何将变量写入 .txt 文件以及将 NSStrings 写入 .txt 文件的最佳方法是什么。我试过使用**writeToFile**方法，但是如果我有两次调用这个方法，那么在第一次调用时写入的文本将被覆盖。我想了解所发生的事情的历史，以及我的 .txt 文件中一些变量的值。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:58:03.423

如果您只想将字符串附加到 .txt 文件，您可以这样做：

```
NSString *string = ...;   // your string
NSString *path = ...;     // path to your .txt file
// Open output file in append mode:
NSOutputStream *stream = [[NSOutputStream alloc] initToFileAtPath:path append:YES];
[stream open];
// Make NSData object from string:
NSData *data = [string dataUsingEncoding:NSUTF8StringEncoding];
// Write data to output file:
[stream write:data.bytes maxLength:data.length];
[stream close]; 
```

# c - 在 winnt.h 的 Mingw32 中未定义 LPCTSTR 到 LPWSTR 的转换

> ID：11989048
> 
> 赞同：0
> 
> 时间：2012-08-16T14:12:34.030
> 
> 标签：c, winapi, mingw, mingw32

我正在使用 mingw32，我在其中找不到 LPCTSTR 到 LPCWSTR 的类型定义。但在 mingw64 中定义如下。

`typedef LPCWSTR PCTSTR,LPCTSTR;`

但是`works fine in mingw32`即使我在代码中添加了我的代码也没有任何错误`LPCTSTR`，如果我将编译器选项更改为 mingw64，我会遇到很多错误。

mingw32 中的 Winnt.h：

```
typedef TCHAR TBYTE,*PTCH,*PTBYTE;
typedef TCHAR *LPTCH,*PTSTR,*LPTSTR,*LP,*PTCHAR;
typedef const TCHAR *LPCTSTR; 
```

mingw64 中的 winnt.h：

```
typedef LPWSTR LPTCH,PTCH;
typedef LPWSTR PTSTR,LPTSTR;
typedef LPCWSTR PCTSTR,LPCTSTR;
typedef LPUWSTR PUTSTR,LPUTSTR;
typedef LPCUWSTR PCUTSTR,LPCUTSTR;
typedef LPWSTR LP; 
```

如何解决这个问题？为什么在定义 UNICODE 的 mingw32 中我没有收到任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:58:34.003

`LPCTSTR`在 mingw32 中被定义为：

```
typedef const TCHAR *LPCTSTR; 
```

`UNICODE`定义时，`TCHAR`映射到`WCHAR`，`LPCTSTR`等效于`LPCWSTR`。

`UNICODE`未定义时，改为`TCHAR`映射到`CHAR`，`LPCTSTR`等效于`LPCSTR`.

# linux - Tomcat 上 Solr 的日志文件

> ID：11989051
> 
> 赞同：2
> 
> 时间：2012-08-16T14:12:38.157
> 
> 标签：linux, tomcat, solr, lucene, centos

我正在使用 Tomcat6 在 CentO 上部署 Solr。我在哪里可以找到日志文件来找出 Solr 给出的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-19T14:34:00.557

您需要将日志记录配置从 solr/ 复制到类路径上的某个位置。

```
cp SOLR_HOME/example/resources/log4j.properties TOMCAT_HOME/conf/ 
```

然后重新启动您的 tomcat 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:37:37.163

我认为您可以在搜索名为“catalina”的文本文件之后在此目录中找到它在 2012-11-05 所以文本文件将像 catalina.2012-11-05 一样锁定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T06:30:39.267

solr 给出的错误可以在 catlina.out 中看到，但如果您希望它在单独的文件中，这是您可以配置它的方式。

添加在apache tomcat/conf 文件夹中的**logging.proeperties中的条目。**

```
6localhost.org.apache.juli.FileHandler.level = FINE
6localhost.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
6localhost.org.apache.juli.FileHandler.prefix = solr. 
```

在所有其他处理程序所在的文件的顶部注册处理程序：

```
6localhost.org.apache.juli.FileHandler 
```

在最后添加以下条目

```
org.apache.solr.level=INFO
org.apache.solr.handlers=6localhost.org.apache.juli.FileHandler 
```

您将获得一个单独的 solr.log 文件，其中包含所有 solr 日志。

# php - 从 iPad 开始 xdebugging PHP 脚本

> ID：11989054
> 
> 赞同：0
> 
> 时间：2012-08-16T14:12:41.073
> 
> 标签：php, xdebug, phpstorm

我知道大多数书签使用 cookie 来触发调试开始。可以通过 GET 参数完成相同的操作吗？

我希望将其 mod_rewrite 到 URL 中，因此来自 iPad（或任何设备）的 API 请求可以触发调试。

（顺便说一句，我正在使用 PhpStorm/XDebug）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:54:56.890

是的，你可以为 xdebug 做到这一点。

[http://xdebug.org/docs/remote](http://xdebug.org/docs/remote) -- 滚动到“HTTP 调试会话”部分（页面中间的某处）。

发送参数（`XDEBUG_SESSION_START=name`GET 或 POST）以启动会话`IDEKey``name`

发送`XDEBUG_SESSION_STOP`（无参数）以停止此类会话并销毁调试 cookie。

**PS** 但也许在需要时使用浏览器扩展来启动这样的会话会更简单？当然，这取决于您的实际要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:49:48.807

xdebugger 查看的所有 cookie 也可以作为请求参数发送[http://kb.zend.com/index.php?View=entry&EntryID=434](http://kb.zend.com/index.php?View=entry&EntryID=434)

```
RewriteCond %{HTTP_USER_AGENT} ^.*(iPad).*$ [NC]
RewriteRule ^(.*)$ $1?start_debug=1 [R,L] 
```

# java - javax 身份验证失败

> ID：11989057
> 
> 赞同：1
> 
> 时间：2012-08-16T14:12:47.867
> 
> 标签：java, android

我正在android上尝试一个电子邮件应用程序。我首先输入用户名和密码，
然后在下一个活动中我接受收件人地址主题和味精并发送电子邮件。我收到错误**JavaX 身份验证失败**。这是我的邮件身份验证和发送代码。发送按钮的 OnClick 函数调用此类

```
public class MailHandler {
final String username;
final String password;
public MailHandler(String username,String password){
    this.username=username;
    this.password=password;

}

public void sendMail(String Sub,String msg,String sender,String cc,String to) {
    Properties props = new Properties();
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.port", "587");

    Session session = Session.getInstance(props,
      new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(username, password);
        }
      });

    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress(sender));
        message.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse(to));
        message.setSubject(Sub);
        message.setText(msg);

        Transport.send(message);

        System.out.println("Done");

    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:41:36.633

一个简单的解决方案是使用最终`String`参数，例如 `public void sendMail(final String username ,final String password );`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:44:19.770

您的代码有效。我复制了它并使用我的 gmail 凭据编译并运行它。您确定使用正确的 gmail 凭据发送邮件吗？

```
MailHandler m = new MailHandler("myAccount@gmail.com", "myPassword");
m.sendMail("Test", "Testing", "myOtherAccount@gmail.com", "myWork@myCompany.com", "myOtherWork@myCompany.com"); 
```

// 运行后，我检查了我的工作电子邮件并看到了消息。

如果我使用无效密码，我会得到以下 statcktrace。这是你看到的吗

```
535 5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 jl8sm4152932obb.18

    at MailHandler.sendMail(MailHandler.java:50)
        at MailHandler.main(MailHandler.java:56)
Caused by: javax.mail.AuthenticationFailedException: 535-5.7.1 Username and Password not accepted. Learn more at
535 5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 jl8sm4151848obb.18
    at com.sun.mail.smtp.SMTPTransport$Authenticator.authenticate(SMTPTransport.java:823)
    at com.sun.mail.smtp.SMTPTransport.authenticate(SMTPTransport.java:756)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:673)
    at javax.mail.Service.connect(Service.java:317)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at MailHandler.sendMail(MailHandler.java:45)
    ... 1 more 
```

# html - 在带有布尔属性“自动对焦”的淘汰赛中使用 attr 绑定

> ID：11989058
> 
> 赞同：7
> 
> 时间：2012-08-16T14:12:49.093
> 
> 标签：html, knockout.js

对于某些属性，属性的存在会产生影响——分配给它的值是无关紧要的。例如，可以将 autofocus 属性设置为“false”或“true”或“banana”，并且元素仍会自动获得焦点。IE，以下都是等效的，并导致 div 获得焦点：

```
<div autofocus="false" contenteditable="true"></div>
<div autofocus="true" contenteditable="true"></div>
<div autofocus="banana" contenteditable="true"></div> 
```

Knockout 有一个 'attr' 绑定，但它似乎只用于为*属性**分配*值，而不是用于添加/删除属性。

 *是否有另一种方法可以在淘汰赛中做到这一点，还是我被迫从 javascript 设置它？

注意 在 ubuntu 上使用 chrome。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T11:24:17.467

使用布尔 false 值删除属性，使用字符串“false”设置属性。你还需要什么？

例如：

```
// Set as boolean, removes the attribute
autofocus(false);   

// Set as boolean, adds the attribute
autofocus(true);  

// Set as string, adds the attribute
autofocus('false');   

// Set as string, adds the attribute
autofocus('true'); 
```

见这里的例子：http: [//jsfiddle.net/badsyntax/XMDFh/](http://jsfiddle.net/badsyntax/XMDFh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:20:36.397

您可以使用`hasfocus`淘汰赛绑定：

```
<input data-bind="hasfocus: isSelected" /> 
```

在这里阅读更多：http: [//knockoutjs.com/documentation/hasfocus-binding.html](http://knockoutjs.com/documentation/hasfocus-binding.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T01:46:00.923

您可以编写一个使用 jquery 删除属性的 kohandler。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T22:05:32.093

Knockout 中没有用于添加或删除属性的本机绑定，仅用于设置属性。

绑定展示其行为的原因`hasFocus`是因为它使用元素的本机`.focus()`和`.blur()`方法来添加或删除焦点。

以前曾报道过难以管理非布尔属性的淘汰赛，这是 Michael Best 提到不会解决的一个示例：

[https://github.com/SteveSanderson/knockout/issues/391](https://github.com/SteveSanderson/knockout/issues/391)

**更新：**

您可以按照以下方式创建绑定处理程序：

```
ko.bindingHandlers.toggleAttr = {    
    update: function (element, valueAccessor) {    
        var options = ko.utils.unwrapObservable(valueAccessor());
        var attr = ko.utils.unwrapObservable(options.attr);
        var param = ko.utils.unwrapObservable(options.param);

        param ? element.setAttribute(attr, true) : element.removeAttribute(attr);        
    }
}; 
```

这将允许你这样做：

```
<input data-bind="toggleAttr: { attr: 'autofocus', param: focusMe }" /> 
```

这是一个小提琴：http: [//jsfiddle.net/nathanjones/9EzBD/](http://jsfiddle.net/nathanjones/9EzBD/)*

# ruby - 如何让 Markdown gem 不将评论呈现到生成的 HTML 中？

> ID：11989059
> 
> 赞同：1
> 
> 时间：2012-08-16T14:12:53.980
> 
> 标签：ruby, markdown

我有以下 Ruby 代码处理 Markdown 文件：

```
html = Markdown.new(markdownContents).to_html 
```

这样做的结果包括文件顶部的注释块，我不希望它*这样*做，但我似乎无法在文档中找到*不*呈现此注释块的选项。

```
<!-- === begin markdown block =====================================================
   generated by markdown 1.0.0 on Ruby 1.9.3 (2012-04-20) [i386-mingw32]
        on 2012-08-15 15:34:51 -0400 with Markdown engine kramdown (0.13.7)
          using options { !to be done! }
--> 
```

有这个选项，还是我必须提交一个拉取请求？;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:04:29.213

添加此标头的代码似乎已添加[到此提交](https://github.com/geraldb/markdown/commit/ff7c8d503471c535b686a65dfc5101800b60e89b)中，并且仅适用于 kramdown 引擎。似乎解决方案是：

*   提交带有代码的拉取请求以使其可选
*   配置`Markdown`为使用不同的引擎。**Markdown 引擎加载顺序**部分中的详细[信息](http://geraldb.github.com/markdown/)

# c++ - 以下模板函数的含义？

> ID：11989061
> 
> 赞同：4
> 
> 时间：2012-08-16T14:12:56.503
> 
> 标签：c++, template-function, explicit-instantiation

```
#define Create_Function(Type) \
    template void Function( std::vector<boost::shared_ptr<Type>>&)

Create_Function(std::string); 
```

我在遗留代码中看到了上面的代码，但不知道它的含义。它既不是常规的非特化函数定义，也不是完整的特化函数定义。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:13:43.593

它执行**显式模板实例化**（请参阅[MSDN](http://msdn.microsoft.com/en-us/library/by56e477%28v=vs.80%29.aspx)）

> 显式实例化允许您创建模板类或函数的实例化，而无需在代码中实际使用它。因为这在您创建使用模板进行分发的库 (.lib) 文件时很有用，所以未实例化的模板定义不会放入对象 (.obj) 文件中。

给定一个通用函数模板

```
template<typename T>
void Function( std::vector<boost::shared_ptr<T>>&)
{
    // bla bla
} 
```

对宏的调用`Create_Function(std::string);`将扩展为

```
template void Function( std::vector<boost::shared_ptr<std::string>>&); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T14:23:59.380

那是函数模板的显式实例化。给定一个模板，如：

```
template <typename T>
void Function( std::vector<boost::shared_ptr<T> >& ); 
```

（可能在标头中声明并在 .cpp 文件中定义），代码：

```
template void Function( std::vector<boost::shared_ptr<int> >& ); 
```

要求编译器*实例化*此翻译单元中的特化（为其生成代码）。这可以用来减少编译时间，因为模板的用户只需要查看模板的声明，并且不会在使用它的每个翻译单元中实例化它。不利的一面是，它要求对于与该模板一起使用的每种类型，显式实例化都在可以访问模板定义的翻译单元中执行，这将模板的使用限制为这些实例化。

```
// tmpl.h
template <typename T>
void Function( std::vector<boost::shared_ptr<T> >& );

// tmpl.cpp
template <typename T>
void Function( std::vector<boost::shared_ptr<T> >& p ) {
    ... 
}
template void Function( std::vector<boost::shared_ptr<int> >& );
template void Function( std::vector<boost::shared_ptr<double> >& );

// user.cpp, user2.cpp, user3.cpp
#include <tmpl.h>
...
    std::vector<boost::shared_ptr<int> > v;
    Function( v );                             // [1] 
```

在这个例子中，当编译“user#.cpp”时，我们不会在*所有**使用*它的翻译单元中产生`Function`模板实例化的成本，只有在“tmpl.cpp”中，这可能会减少编译时间。

 **有时不利的*一面*实际上是这种方法的原因，因为您可以有效地将实例化类型限制为您为其提供了显式实例化的子集（即在上面的代码中，如果“userN.cpp”试图调用`Function`传递向量指向链接器的共享指针`std::string`会抱怨）。

最后，在少数情况下，当可使用的类型集有限*时*，我将其视为对库用户隐藏模板的实际实现的一种方式。**

# scheduler - 如何设置 sun Grid Engine 调度策略来满足这一点？

> ID：11989063
> 
> 赞同：0
> 
> 时间：2012-08-16T14:12:59.350
> 
> 标签：scheduler, policy, sungridengine

我们使用太阳网格引擎（实际上是开放的调度器网格）作为drms。假设我们有 3 个用户：uA、uB、uC。uA 提交 100000 个工作，然后 uB 提交 10 个工作，然后 uC 提交 1 个工作。在默认的调度策略下，Grid Engine 会运行 uA 的 100000 个作业，然后是 uB 的 10 个，然后是 uC 的 1 个作业，因此 uB 和 uC 需要等待很长时间。

我们希望调度器可以像这样选择要运行的作业：

首先，选择1 uA的工作，1 uB的工作，1 uC的工作

然后，选择 19 uA 的工作，19 uB 的工作

然后，选择uA的其他工作

如何设置适合此的策略？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T15:46:18.923

我通过使用单个用户 = 默认设置共享树策略来做到这一点。您还需要设置优先级的快速半衰期衰减（我使用了 1 小时）。此外，将 0 优先权放在作业等待时间上。（将 100% 放在共享树策略上。）我这样做是在 qmon 中四处探索并尝试不同的值。

# jquery - 网站地址中的随机href属性

> ID：11989064
> 
> 赞同：0
> 
> 时间：2012-08-16T14:13:05.840
> 
> 标签：jquery, random, href

我正在创建一个使用 CSS3 全屏图库的网站。基本上，当我更改图像时，我的网站地址会更改。例如，[http://www.mysite/index.html#image7](http://www.mysite/index.html#image7)或[http://www.mysite/index.html#image20](http://www.mysite/index.html#image20)。

我需要一种使用 jQuery 或纯 JS 在页面加载时显示随机图像的方法。通过在文档就绪功能中包含此行，我可以轻松地指向精确的图像：

```
document.location.href = "http://www.mysite/index.html#image13"; 
```

我对 JavaScript 不太擅长，但也许创建一些图像数组然后使用一些随机函数就可以了？

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:10:49.353

好的，我自己设法做到了。我将一些值存储到一个数组中，然后将它与 document.location.href 一起使用

```
 var images = [],
        index = 0;

        images[0] = "http://www.mysite/index.html#image13";
        images[1] = "http://www.mysite/index.html#image17";
        images[2] = "http://www.mysite/index.html#image5";

        index = Math.floor(Math.random() * images.length);

        document.location.href = images[index]; 
```

# javascript - 如何通过相机旋转使 3D 物体进入轨道

> ID：11989067
> 
> 赞同：1
> 
> 时间：2012-08-16T14:13:12.687
> 
> 标签：javascript, math, three.js

我刚开始接触 three.js，我有一个固定在 0,0,0 的相机，可以旋转 360 度。我有一个 3D 对象，它从相机前面开始，我希望围绕相机的轨道与相机的旋转相切，这样基本上 3D 对象就不会离开相机的视线

相机的代码非常标准

```
 phi     = TDP.toRadians( 90 - lat );    
    theta   = TDP.toRadians( lon );         

    camera.target.x = Math.sin( phi ) * Math.cos( theta );
    camera.target.y = Math.cos( phi );
    camera.target.z = Math.sin( phi ) * Math.sin( theta ); 
```

至于更新 3D 对象的代码

```
 arrow.position.x = - Math.sin( TDP.toRadians( lon ) ) * camera.target.x + arrow.position.x;
    arrow.position.z = Math.cos( TDP.toRadians( lon ) ) * camera.target.z + arrow.position.z; 
```

我一直在玩这个等式，并且在数学方面陷入困境。物体沿 x 轴的运动是可行的，但 z 位置偏离了。提前感谢您的帮助。

# vb.net - vb.net - 在用户控件中命名我的刷新（数据）方法

> ID：11989068
> 
> 赞同：0
> 
> 时间：2012-08-16T14:13:13.157
> 
> 标签：vb.net, user-controls, naming-conventions

每次我创建一个`UserControl`显示一些数据并且我需要一个刷新数据的方法时，我都会遇到这个问题。我喜欢对所有事物使用简单的通用名称，并遵循最不惊讶的原则，并使用对其他人（或 6 个月后的我）直观易懂的名称。

我的方法的明显名称是`Refresh`，但基类已经使用了它。我不想这样做`Override`，因为我不需要每次基类调用这个方法时都刷新我的数据。数据刷新和屏幕刷新只是不同的功能，我认为它们不应该混为一谈。

我也不想这样做`Shadow`，因为我不想干扰它的运行。

我还没有学到的东西，对我来说很有趣，如果我学`Overloads`了，`MyBase.Refresh()`就会带我到**Object Browser**，然后`Me.Refresh()`带我去我的方法。

```
 Public Overloads Sub Refresh()
    'Code to refresh data
  End Sub 
```

`Me.Refresh()`显示在我的类下的**对象浏览器**`Refresh`中，并且属于`Control`显示在`UserControl`. 很有趣，因为我以前从未注意到这一点。

我不确定这是否在所有情况下都避免了与基类的冲突！我的意思是，后期绑定呢？就像我说的那样，我什至不确定编译器是如何区分它们的，但我可以看到它确实如此。

这似乎是一个巧妙的技巧，但它会让任何使用我控制的人感到惊讶，对吧？这会让你吃惊吗？

这种函数的标准名称是什么？

**更好的是，是否有基本常见操作的行业标准 vb.net 方法名称列表？**

**细节：**

从技术上讲，它并不总是 a `Reload`，因为我并不总是重新加载所有数据；也许我只是在逐步同步它。`Load`表示初始加载，而不是刷新。`Sync`更像是它，但我认为这不是大多数人会在智能感知中寻找这种方法的第一个地方。这个名字本身不应该令人惊讶。`Update`模棱两可；谁在更新谁，即更新的方向是什么？`DataBind`如果我实际上没有使用数据绑定或数据源，则在技术上是不正确的。***我***能想到的任何符合所有这些标准的名称都可能不常用——`RefreshData`例如。更不用说，最后，一个单词的名字会更简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T15:47:41.813

`Reload`还不错。我认为重新加载名称不必担心如何重新加载（同步与完全加载）。

# backbone.js - Backbone.js 点击事件不会触发

> ID：11989069
> 
> 赞同：0
> 
> 时间：2012-08-16T14:13:18.380
> 
> 标签：backbone.js, backbone-events, backbone-views

我一直在尝试学习backbone.js，但我无法弄清楚为什么当我点击主页链接时我的点击事件没有触发。我对骨干很陌生，我只是不确定我错过了什么？我在网上查了很多不同的教程，但似乎找不到失败的洞。请帮忙！

骨干网.js

```
 var HomeView = Backbone.View.extend({
        el: $('.content'),

        events:{
            "click #home": "animateNavigation"
        },
        initialize: function(){
            _.bindAll(this, 'displayTrips'); 

            // Add the model collections
            this.collection = new ModelList();
            this.collection.bind('add', this.displayTrips); // Collection event binder
        },
        animateNavigation: function(){
            alert('test');

            return false;
        },
        displayTrips: function(params){
            var items = params.get('data');
        }
    });

    var home_view = new HomeView(); 
```

HTML

```
<div class="content">
     <div class="left">
        <ul>
            <li>
                <div class="nav_arrow"></div>                   
                <a href="home" class="active" id="home">
                    <img alt="Home" src="/assets/img/nav/left/star.png">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="tropical" id="tropical">
                    <img alt="Tropical" src="/assets/img/nav/left/fins_grey.png">
                    <span>Tropical</span>
                </a>
            </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:34:32.260

您在声明模型时找到元素。如果您的脚本位于标题或此内容之前的任何位置，则该元素尚不存在。我不知道应该有什么好的理由在`$('.content')`这里使用，只需使用`'.content'`

编辑：嗯，我看到你也在声明你的视图的一个新实例。我不知道该行是否真正代表了您在脚本中的内容，或者您​​只是为了展示您的基本用途而将其放在那里。我通常在页面逻辑的其他地方定义视图和模型（这将具有这些事物的实例），主要是为了我可以重用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:05:48.360

我发现这为我解决了这个问题：

`var home_view = new HomeView({el:$('.content')});`

更新 - 比这更好，这样做：

`var home_view = new HomeView({el:'.content'});`

然后`this.$el`将按照上面的帖子所说的那样工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:28:36.533

你能补充一下吗

```
console.log(home_view.$el.html()); 
```

最后，请检查 home_view 的 Dom 元素。我假设将视图绑定到 Dom 元素时出现问题。

# c# - 检查数组是否已排序的最快方法

> ID：11989071
> 
> 赞同：16
> 
> 时间：2012-08-16T14:13:19.847
> 
> 标签：c#, .net, algorithm, sorting

考虑到从一个非常大的函数返回的数组。

`fastest`测试数组是否已排序的方法是什么？

一个最简单的方法是：

```
/// <summary>
/// Determines if int array is sorted from 0 -> Max
/// </summary>
public static bool IsSorted(int[] arr)
{
for (int i = 1; i < arr.Length; i++)
{
    if (arr[i - 1] > arr[i])
    {
    return false;
    }
}
return true;
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-16T14:16:04.547

您将不得不访问数组的每个元素以查看是否有任何未排序的元素。

您的 O(n) 方法几乎与它一样快，没有任何关于数组可能状态的特殊知识。

您的代码专门测试数组是否*在较低的索引处使用较小的值进行*排序。如果这不是您想要的，那么您的*if*会变得稍微复杂一些。您的代码注释确实表明这就是您所追求的。

如果您对可能的状态有特殊的了解（例如，您知道它通常已排序但新数据可能会添加到末尾），您可以优化访问数组元素的顺序，以允许测试在数组未排序。

您可以利用硬件架构知识通过对阵列进行分区来并行检查阵列的多个部分，首先比较分区的边界（快速检查失败），然后在单独的线程上为每个内核运行一个阵列分区（不超过每个 CPU 内核 1 个线程）。请注意，如果数组分区远小于缓存行的大小，线程将倾向于相互竞争以访问包含数组的内存。多线程只会对相当大的数组非常有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-05T10:39:09.867

更快的方法，平台目标：任何 CPU，首选 32 位。
一个有 512 个元素的排序数组：快 25%。

```
static bool isSorted(int[] a)
{
    int j = a.Length - 1;
    if (j < 1) return true;
    int ai = a[0], i = 1;
    while (i <= j && ai <= (ai = a[i])) i++;
    return i > j;
} 
```

目标：x64，相同的阵列：快约 40%。

```
static bool isSorted(int[] a)
{
    int i = a.Length - 1;
    if (i <= 0) return true;
    if ((i & 1) > 0) { if (a[i] < a[i - 1]) return false; i--; }
    for (int ai = a[i]; i > 0; i -= 2)
        if (ai < (ai = a[i - 1]) || ai < (ai = a[i - 2])) return false;
    return a[0] <= a[1];
} 
```

忘了一个，比我的第一个代码块慢一点。

```
static bool isSorted(int[] a)
{
    int i = a.Length - 1; if (i < 1) return true;
    int ai = a[i--]; while (i >= 0 && ai >= (ai = a[i])) i--;
    return i < 0;
} 
```

测量它（见灰胡子的评论）。

```
using System;                                  //  ????????? DEBUG ?????????
using sw = System.Diagnostics.Stopwatch;       //  static bool abc()    
class Program                                  //  {   // a <= b <= c ?  
{                                              //      int a=4,b=7,c=9;  
    static void Main()                         //      int i = 1;  
    {                                          //      if (a <= (a = b))  
        //abc();                               //      {  
        int i = 512;                           //          i++;  
        int[] a = new int[i--];                //          if (a <= (a = c))
        while (i > 0) a[i] = i--;              //          {    
        sw sw = sw.StartNew();                 //              i++;  
        for (i = 10000000; i > 0; i--)         //          }  
            isSorted(a);                       //      }  
        sw.Stop();                             //      return i > 2;  
        Console.Write(sw.ElapsedMilliseconds); //  }  
        Console.Read();                        //  static bool ABC();
    }                                          //  {
                                               //      int[]a={4,7,9};    
    static bool isSorted(int[] a) // OP Cannon //      int i=1,j=2,ai=a[0]; 
    {                                          //  L0: if(i<=j)    
        for (int i = 1; i < a.Length; i++)     //        if(ai<=(ai=a[i]))  
            if (a[i - 1] > a[i]) return false; //          {i++;goto L0;}  
        return true;                           //      return i > j;  
    }                                          //  }  
} 
```

目标：x64。四核/线程。具有 100,000 个元素的排序数组：~55%。

```
static readonly object _locker = new object();
static bool isSorted(int[] a)  // a.Length > 3
{
    bool b = true;
    Parallel.For(0, 4, k =>
    {
        int i = 0, j = a.Length, ai = 0;
        if (k == 0) { j /= 4; ai = a[0]; }                        // 0 1
        if (k == 1) { j /= 2; i = j / 2; ai = a[i]; }             // 1 2
        if (k == 2) { i = j - 1; ai = a[i]; j = j / 2 + j / 4; }  // 4 3
        if (k == 3) { i = j - j / 4; ai = a[i]; j = j / 2; }      // 3 2
        if (k < 2)
            while (b && i <= j)
            {
                if (ai <= (ai = a[i + 1]) && ai <= (ai = a[i + 2])) i += 2;
                else lock (_locker) b = false;
            }
        else
            while (b && i >= j)
            {
                if (ai >= (ai = a[i - 1]) && ai >= (ai = a[i - 2])) i -= 2;
                else lock (_locker) b = false;
            }
    });
    return b;
} 
```

1,000,000 件物品？

```
if (k < 2)
    while (b && i < j)
        if (ai <= (ai = a[i + 1]) && ai <= (ai = a[i + 2]) &&
            ai <= (ai = a[i + 3]) && ai <= (ai = a[i + 4])) i += 4;
        else lock (_locker) b = false;
else
    while (b && i > j)
        if (ai >= (ai = a[i - 1]) && ai >= (ai = a[i - 2]) &&
            ai >= (ai = a[i - 3]) && ai >= (ai = a[i - 4])) i -= 4;
        else lock (_locker) b = false; 
```

让我们忘记百分比。
原始：0.77 ns/item，现在：0.22 ns/item。
2,000,000 件物品？四核：快 4 倍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T06:10:00.200

林克解决方案。

```
public static bool IsSorted<T>(IEnumerable<T> list) where T:IComparable<T>
{
    var y = list.First();
    return list.Skip(1).All(x =>
    {
        bool b = y.CompareTo(x) < 0;
        y = x;
        return b;
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-30T19:29:48.107

这是我的函数 IsSorted 的版本

```
public static bool IsSorted(int[] arr)
{               
    int last = arr.Length - 1;
    if (last < 1) return true;

    int i = 0;

    while(i < last && arr[i] <= arr[i + 1])
        i++;

    return i == last;
} 
```

虽然这个函数比问题中的要快一点，但它所做的分配和比较比迄今为止发布的任何东西都要少。在最坏的情况下，它会进行 2n+1 次比较。如果您可以对数据的性质做出合理的假设，例如最小数据大小或数组包含偶数个元素，它仍然可以改进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T14:22:57.207

我能想到的唯一改进是同时检查数组的两端，这个小小的改变将在一半时间内完成......

```
public static bool IsSorted(int[] arr)
{
int l = arr.Length;
for (int i = 1; i < l/2 + 1 ; i++)
{
    if (arr[i - 1] > arr[i] || arr[l-i] < arr[l-i-1])
    {
    return false;
    }
}
return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-10T07:58:57.113

如果顺序无关紧要（降序或升序）。

```
private bool IsSorted<T>(T[] values) where T:IComparable<T>
{
    if (values == null || values.Length == 0) return true;

    int sortOrder = 0;

    for (int i = 0; i < values.Length - 1; i++)
    {
        int newSortOrder = values[i].CompareTo(values[i + 1]);

        if (sortOrder == 0) sortOrder = newSortOrder;

        if (newSortOrder != 0 && sortOrder != newSortOrder) return false;
    }

    return true;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-04T06:22:09.973

这就是我想出的，并且发现效果更好，特别是对于更大尺寸的数组。该函数是递归的，将在第一次调用，比如在这样的 while 循环中

```
while( isSorted( yourArray, 0 ) 
```

if 语句检查是否已达到数组的边界。

else if 语句将递归调用自身，并在条件变为 false 时随时中断

```
 public static bool IsSorted(int[] arr, int index)
    {
        if (index >= arr.Length - 1)
        {
            return true;
        }
        else if ((arr[index] <= arr[ index + 1]) && IsSorted(arr, index + 1))
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-16T19:03:18.510

我想到的问题是“为什么”？

是为了避免重新排序已经排序的列表吗？如果是，只需使用 Timsort（Python 和 Java 中的标准）。它非常擅长利用已经排序或几乎排序的数组/列表。尽管 Timsort 在这方面做得很好，但最好不要在循环内排序。

另一种选择是使用先天排序的数据结构，如treap、红黑树或AVL树。这些是在循环内排序的好方法。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-06-28T19:10:34.940

这可能不是最快的，但它是完整的解决方案。**索引低于 i**的每个值都会根据i 处的**当前值进行**检查。这是用 php 编写的，但可以很容易地翻译成 c# 或 javascript

```
for ($i = 1; $i < $tot; $i++) {
        for ($j = 0; $j <= $i; $j++) {
            //Check all previous values with indexes lower than $i
            if ($chekASCSort[$i - $j] > $chekASCSort[$i]) {
                return false;
            }
        }
    } 
```

# zend-framework - 将每个新产品分配到一个类别

> ID：11989072
> 
> 赞同：2
> 
> 时间：2012-08-16T14:13:22.890
> 
> 标签：zend-framework, magento, magento-1.7

在 Magento 中，有没有办法让每个新产品创建自动分配到一个类别？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:53:04.977

不是原生的，至少我知道没有，但这是一件非常简单的事情，如果你知道你可以观察catalog_product_before_save事件的类别并添加类别的ID - 这应该照顾它. 您可以检查产品是否已经有一个类别作为比较点，以决定是否继续。Magento 还有一种返回新产品的方法，您可以使用它来分配类别。

# jquery - 随着输入值的变化自动竞争搜索

> ID：11989073
> 
> 赞同：0
> 
> 时间：2012-08-16T14:13:29.350
> 
> 标签：jquery, forms, search, input

我有一个像 -

[图片在这里](http://i.stack.imgur.com/Z7dKk.png)

我想要做的是使用 jquery 和 php 获得结果，因为用户更改了任何表单元素的值，但我只能在所有表单元素都被视为单个并且没有其他选项时才能做到。但我想在任何表单值发生变化时触发偶数。

```
google.load("jquery", "1.3.1");
google.setOnLoadCallback(function()
{
    // Safely inject CSS3 and give the search results a shadow
    var cssObj = { 'box-shadow' : '#888 5px 10px 10px', // Added when CSS3 is standard
        '-webkit-box-shadow' : '#888 5px 10px 10px', // Safari
        '-moz-box-shadow' : '#888 5px 10px 10px'}; // Firefox 3.5+
    $("#suggestions").css(cssObj);

    // Fade out the suggestions box when not active
     /*$("input").blur(function(){
        $('#suggestions').fadeOut();
     });*/
});

function lookup(inputString) {
    if(inputString.length == 0) {
        $('#suggestions').fadeOut(); // Hide the suggestions box
    } else {
        $.post("regularsearch.php", {queryString: ""+inputString+""}, function(data) { // Do an AJAX call
            $('#suggestions').fadeIn(); // Show the suggestions box
            $('#suggestions').html(data); // Fill the suggestions box
        });
    }
} 
```

以上是我的元素搜索之一的 jquery。如何一次搜索所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:20:59.803

这是我编写的一个 jquery 插件，可以帮助您解决问题。它使用 ajax 作为用户类型从服务器检索数据。

[http://jsfiddle.net/alforno/g4stL/](http://jsfiddle.net/alforno/g4stL/)

# c# - 使用 roslyn 获取所有类型

> ID：11989075
> 
> 赞同：2
> 
> 时间：2012-08-16T14:13:30.483
> 
> 标签：c#, roslyn

我想使用 Roslyn 来获取一段代码中使用的所有类型。我从以下 SyntaxWalker 开始：

```
public class DependenciesCollector : SyntaxWalker
{
    public override void VisitIdentifierName(IdentifierNameSyntax node)
    {
        if (!(node.Parent is UsingDirectiveSyntax))
        {
            Console.WriteLine(node.PlainName);
        }
        base.VisitIdentifierName(node);
    }

    public override void VisitMemberAccessExpression(MemberAccessExpressionSyntax node)
    {
        Console.WriteLine(node.Expression + "." + node.Name);
        base.VisitMemberAccessExpression(node);
    }
} 
```

但是，它不仅向我显示了使用的（部分）类型，还显示了 using 语句，而我（如您所见）试图不显示 using 语句。你能告诉我这段代码有什么问题吗？

简而言之：我只想要不包括名称空间的类型。这甚至可能吗？（System.Console 之类的东西可以，系统不行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T18:55:12.950

我想你可能有点困惑。此代码根本不会向您显示类型。它将向您展示源代码中使用的标识符名称，以及任何成员访问表达式 (ab)。其中一些可能是类型名称，但很可能它们只是代码表达式。

如果在方法体中你写：

```
System.Console.WriteLine("x") 
```

从语法上讲，编译器还不知道这`System.Console`是一个类型名称。它将对解析为成员访问表达式，与部分没有什么不同`Console.WriteLine`。

在其他语法位置，编译器知道得更好。例如，在本地声明中：

```
Syntax.Console x = null; 
```

编译器知道它`Syntax.Console`指的是一个类型，所以它被解析为一个限定名，而不是一个成员访问表达式。

如果您真的想知道代码使用了哪些类型，您应该使用语义模型来发现这些带点名称对应的类型符号。

# iphone - UITableView 单元格全部重复第一个单元格

> ID：11989077
> 
> 赞同：0
> 
> 时间：2012-08-16T14:13:33.877
> 
> 标签：iphone, uitableview

我有一个 UITableView 工作正常，直到我向它添加部分 - 现在来自第一个单元格的数据在所有其他单元格中重复。当我删除下面的部分行时，一切都恢复正常。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSInteger sections = self.objects.count;

    return sections;
} 
```

关于这里可能发生什么的任何想法？顺便说一下，我的数据源是 Core Data。

**编辑**

因为`numberOfRows`我要返回 1。

这是我实现单元格的方式：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath {

Item *p = [[[ItemStore defaultStore] allItems]
                                objectAtIndex:[indexPath row]];

    ItemCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ItemCell"];

    [cell setController:self];
    [cell setTableView:tableView];

    [[cell nameLabel] setText:[p itemName]];
    [[cell serialNumberLabel] setText:[p serialNumber]];
    [[cell valueLabel] setText:[NSString stringWithFormat:@"$%d", [p valueInDollars]]];

    [[cell thumbnailView] setImage:[p thumbnail]];

return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:27:18.940

您可能正在使用

```
cell.textlabel.text = [self.objects objectAtIndex: indexPath.row]; 
```

在您的 cellForRowAtIndexPath 方法中。

这将在一个部分的表格视图中工作，因为行号每次都会增加。但是，如果您有多个部分，则每个部分中第一行的行号将重置回 0。因此， indexPath.row 将始终在 cellforRowAtIndexPath 方法中返回 0，因此您每次都获得第一个对象。您必须检查您所在的部分，甚至使用部分编号作为从数组中获取正确对象的一种方式。

编辑：查看您发布的代码，这正是正在发生的事情！查看确定您所在的部分，并适当地填写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:18:17.917

这通常是因为在 iOS 中重用单元格的方式。

确保您在`cellForRowAtIndexPath:`方法中设置了所有可用选项：

```
// init cell etc...
cell.textLabel.text = @"Your dynamic text";
cell.textLabel.textColor = [UIColor myColor];
// etc...

return cell; 
```

此外，当您使用核心数据时，请确保您从您可能正在使用的 NSArrays 和 NSDictionaries 中选择正确的数据。

如果这没有帮助，请添加更多信息，包括一些代码等。

# jquery - 动态替换不带斜线的 RegExp 对象

> ID：11989081
> 
> 赞同：0
> 
> 时间：2012-08-16T14:13:54.290
> 
> 标签：jquery, regex

我对动态创建`RegExp`的对象有问题（在[文件上传插件](https://github.com/blueimp/jQuery-File-Upload/)中）

这是插件的初始化代码：

```
$('#fileupload').fileupload('option', {
    acceptFileTypes: /(\.|\/)(doc|pdf)$/i
}); 
```

该代码更改了正则表达式：

```
$('#files-list').change(function() {
   $('#fileupload').fileupload(
            'option',
            'acceptFileTypes',
            new RegExp('(\.|\/)('+$(this).find(":selected").attr('f-ext')+')$/i')
                );
            }); 
```

`/`并在该正则表达式的开头和结尾添加字符。

见下图。第 1 和第 2 行是插件初始化后的第 3 和第 4 行。这会导致文件名验证失败。

![在此处输入图像描述](../Images/bdbc813e5753ccf4f2d4d7f952787102.png)

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:18:04.170

要使用不区分大小写的修饰符，您应该执行以下操作

```
new RegExp( regexp_expression , 'i' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:18:34.173

JS 正则表达式的修饰符，当在构造函数中提供时，应单独指定：

```
...new RegExp('(\.|\/)('+$(this).find(":selected").attr('f-ext')+')$', 'i'); 
```

一般[语法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)是：

```
var newRegex = new RegExp(pattern [, flags]); 
```

# r - R中system（）的运算符

> ID：11989083
> 
> 赞同：2
> 
> 时间：2012-08-16T14:13:56.987
> 
> 标签：r

我想让 R 更容易执行系统命令。像 ipython 与 python 之类的东西。以下是一些想法：

*   定义 cd 函数以通过包装 getwd 和 setwd 来更改工作目录
*   定义一个运算符来包装 system() 命令，以便我可以运行类似 "$ls" 的东西来替换 system("ls")

第一个很容易实现。但是，我坚持使用第二个。我发现没有办法在 R 中为字符串重新定义运算符。然后我退后一步，我尝试定义一个 sys(param)。但是现在，我仍然需要输入引号。例如，我需要运行 sys("ls") 而不是 sys(ls) 来列出目录。有没有办法让参数假设它是一个字符串，即使没有引号？谢谢。欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:18:57.967

**更新**以简化功能（删除正则表达式）并添加对字符输入的支持

您可以`match.call`在函数内部使用，这样您就可以在不使用引号的情况下调用该函数。

```
sys <- function(...) {
  command <- match.call()[[2L]]
  if (!is.character(command)) {
    command <- gsub("- ", "-", deparse(command))
  }
  system(command)
} 
```

现在，以下任何一个都等效于`system("ls -a")`

```
sys("ls -a")
sys(ls -a) 
```

上面的`sys`函数提取了调用的第二个组成部分，即括号之间的内容。即`ls -a`或`"ls -a"`在这些示例中。然后将其传递给`system`（`deparse`如果不是，则首先通过`character`）

[我添加了对字符串的支持，因为否则它不适用于正斜杠、点等。例如，`sys(ls /home)`不起作用，但`sys("ls /home")`确实如此。]

但是，这仍然需要使用括号:-(

* * *

为避免使用括号，您可以屏蔽运算符。在这个答案的初始版本中，我展示了如何屏蔽`!`这不是一个好主意。您建议`?`在评论中使用可以这样做。

```
`?` <- function(...) {
  command <- match.call()[[2L]]
  if (!is.character(command)) {
    command <- gsub("- ", "-", deparse(command))
  }
  system(command)
} 
```

现在，这与`system("ls -a -l")`

```
?ls -a -l 
```

但是，如果您需要使用正斜杠，则必须使用这样的引号

```
?"ls /home" 
```

* * *

或者，您可以创建一个特殊的二元运算符

```
"%sys%" <- function(...) {
  system(sub("%sys%", "", deparse(match.call())))
} 
```

你可以像这样使用它

```
ls %sys% -l
ls %sys% . 
```

如果您需要使用正斜杠，您必须引用右侧

```
ls %sys% "/home" 
```

一个缺点是它需要运算符右侧的一个参数。

# python - 列表范围细化

> ID：11989092
> 
> 赞同：3
> 
> 时间：2012-08-16T14:14:25.420
> 
> 标签：python

我一直在使用`a[0:2]`范围的格式，但它一直困扰着我，如果我有`a = range(0, 5)`我得到`a[0, 1, 2, 3, 4]`但如果我使用`a[0:-1]`我得到`a[0, 1, 2, 3]`.

我知道如果我使用`a[0:]`我会得到完整的范围，但是如果我想要由变量定义的范围的结尾（例如：`c = -1`then `a[0,c]`），如果不使用条件语句（例如: `if c == -1: c = None`)。

是否有一些不错的格式可以用来访问整个范围，同时使用变量作为限制？或者我是否需要一个条件语句？

谢谢。

编辑：看来我有两个选项可用，我可以将变量设置为`None`有条件的，也可以设置变量以便最后一项设置为`len(a)`. 我还不是 100% 确定我要走哪条路，但谢谢大家的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:17:02.333

只需分配`None`给`c`：

```
c = None
a[2:c] 
```

它可以按您的意愿工作。实际上这就是创建切片（而不是范围）的方式。

它们实际上是普通的 Python 对象。你甚至可以在里面使用它们`[]`。

```
a = [0, 1, 2, 3]
s = slice(2, None)
a[s]  # equal to a[2:] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:28:06.907

`a[0:]`只是语法糖`a[0:len(a)]`

因此

```
c = len(a)
a[0:c]         #a[:c], a[:], a[0:] all work as well 
```

为您提供全方位的服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:16:43.180

您可以使用三元运算符：

```
a[0:c if c>0 else None] 
```

但这很丑陋。

我认为更好的问题是“为什么要使用 -1 来获得完整的切片？”。Python 已经使用`-1`了（但不包括）最终元素。改变这种行为只会给熟悉该语言的人带来意想不到的结果。只需记录这样一个事实，即如果此函数的用户想要获得完整的切片，他们应该通过`None`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:20:45.333

您可以使用`slice`：

```
endLimit = int(raw_input("what is the limit?"))
if endLimit == 0:
    endLimit = None
range(5)[slice(0,endLimit)] 
```

slice 实际上是表示 的`[start:end:jumps]`一部分的对象`range(5)[start:end:jumps]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T15:01:04.023

编辑：现在我完全了解 OP 正在寻找什么，这就是这样做的方法：

```
a[0:c if c != 0 else len(a)] 
```

哪个使用三元，或者如果你真的真的不想使用条件，我很确定这正是你想要的，并在 c = 0 上给你一个完整的切片：

```
a[0:((c-1) % len(a)) + 1] 
```

---------------------- 旧帖 -------------- -

好吧，我可能会遗漏一些东西，但你可以任意高。如果你这样做：

```
a = range(5)
a[0:200] 
```

你得到：

```
[0, 1, 2, 3, 4] 
```

因此，如果 c 只是在增长或在做自己的事情，那么每次 c ≥ len(a) 时都会给出完整的范围。

# c# - 检测映射到自己类别中的 USB 设备

> ID：11989093
> 
> 赞同：0
> 
> 时间：2012-08-16T14:14:25.687
> 
> 标签：c#, usb, device-driver, device

我正在尝试以编程方式检测已使用 USB 连接到我的计算机的 National Instruments 设备。检测所有 USB 设备的代码工作正常。但是，NI USB 设备被映射为它自己的一个类别（从设备管理器中看到）。类别名称是“NI-CAN 设备”。下面给出了检测 USB 设备的代码。为了检测 NI 设备，我必须更改什么？

```
using (var searcher = new ManagementObjectSearcher(@"Select * From Win32_USBHub"))
            collection = searcher.Get(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:42:43.120

它使用类 Win32_DeviceBus 工作。已使用此类检测到所有设备。

# django - 处理对 Django Web 应用程序的计算密集型请求，可能使用预分叉 RPC 服务器

> ID：11989094
> 
> 赞同：3
> 
> 时间：2012-08-16T14:14:29.250
> 
> 标签：django, nginx, gunicorn, pyro, rpyc

我正在运行一个基于 Django 的 web 服务，在 nginx 后面使用 Gunicorn 作为反向代理。

我的网络服务提供了一个 Django 视图，该视图使用 MATLAB 的外部实例执行计算。因为 MATLAB 启动本身需要几秒钟的时间，所以即使是只产生非常简单的 MATLAB 计算的请求也需要这么长的时间来回答。

此外，由于在我的代码中完成了 MATLAB 沙盒，因此对于 Web 服务器进程，同时运行一个 MATLAB 实例非常重要。（因此，目前我正在使用 Gunicorn 同步工作者模型，它实现了预分叉网络服务器，但不使用任何多线程。）

为了改善用户体验，我现在想通过保持一些（例如 3-5 个）“就绪”的 MATLAB 实例运行并在请求进入时使用它们来消除 MATLAB 启动的等待时间。在为请求提供服务后，MATLAB 进程将被终止并立即启动一个新的，为另一个请求做好准备。

我一直在评估两种方法来做到这一点：

1.  继续使用 Gunicorn 同步工作器模型并为每个 Web 服务器进程保留一个 MATLAB 实例。

    这个问题似乎是传入的请求没有以循环方式分发到网络服务器工作进程。因此，可能会发生所有计算密集型请求都命中同一进程而用户仍需等待的情况，因为该单个 MATLAB 实例无法按需要尽快重新启动。

2.  将 MATLAB 计算外包给后端服务器，后端服务器执行实际工作并由网络服务器进程通过 RPC 进行查询。

    在我的概念中，会有许多 RPC 服务器进程在运行，每个进程都托管一个正在运行的 MATLAB 进程。处理请求后，将重新启动 MATLAB 进程。因为 RPC 服务器进程是循环查询的，所以用户永远不必等待 MATLAB 启动（除非总体请求太多，但这是不可避免的）。

由于第一种方法描述的问题，我认为 RPC 服务器（方法 2）会更好地解决我的问题。

我已经看过一些 Python 的 RPC 解决方案（尤其是 Pyro 和 RPyC），但是我找不到为 RPC 服务器使用预分叉服务器模型的实现。请记住，由于沙箱，多线程是不可能的，如果服务器只在连接被接受后分叉，我仍然需要在这之后启动 MATLAB，这会阻碍整个想法。

有人知道我的问题的更好解决方案吗？还是 RPC 服务器实际上是最好的解决方案？但是然后我需要一个预分叉 RPC 服务器（= 分叉一些进程并让它们都在同一个套接字上的 accept() 上旋转）或至少一个可以轻松修改的 RPC 框架（猴子补丁？） -分叉。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T00:39:16.380

我通过使我的沙箱线程安全解决了这个问题。现在我可以使用任何单进程网络服务器并使用[队列](http://docs.python.org/library/queue.html)来获取在辅助线程中生成的备用 MATLAB 实例。

# google-app-engine - 在 app.yaml 中设置 http_headers 不起作用

> ID：11989101
> 
> 赞同：4
> 
> 时间：2012-08-16T14:14:51.810
> 
> 标签：google-app-engine, http-headers

我正在使用 appengine 1.7.0 (python) 开发一个应用程序，并且我正在尝试通过 app.yaml 以这种方式将自定义标头添加到静态目录：

```
- url: /js
  static_dir: static/js
  http_headers:
    X-Test-Http-Headers: yo 
```

问题是没有设置 http 标头，即使在重新启动应用程序之后也是如此。

有什么建议么？

**编辑：**
它在开发和生产环境中都不起作用

**编辑 2：**
使用 Charles 进行调试，返回的标头如下：

```
HTTP/1.1 200 OK
ETag: "f_-W8g"
Date: Fri, 17 Aug 2012 09:40:10 GMT
Expires: Fri, 17 Aug 2012 09:40:15 GMT
Cache-Control: public, max-age=5
Content-Type: application/x-javascript
Content-Encoding: gzip
Server: Google Frontend
Content-Length: 8876 
```

**编辑3：** 我发现了问题。我更改了版本，因此在线版本不是部署的版本。恢复版本号使部署的版本在线可用，因此添加了标头：

```
HTTP/1.1 200 OK
X-Test-Http-Headers: yo
ETag: "DdNIcQ"
Date: Fri, 17 Aug 2012 10:19:01 GMT
Expires: Fri, 17 Aug 2012 10:19:06 GMT
Cache-Control: public, max-age=5
Content-Type: application/x-javascript
Content-Encoding: gzip
Server: Google Frontend
Content-Length: 8876 
```

# java - 使用 Jackson JSON Mapper 在 JSON 到 POJO 之间映射时出现 400 错误请求

> ID：11989102
> 
> 赞同：1
> 
> 时间：2012-08-16T14:14:52.777
> 
> 标签：java, json, spring, jackson

我有一个 JSON 格式

```
var array1 = 新数组；
var array2 = 新数组；
//将一些字符串推送到array1和array2
var data = JSON.stringify({'email':email,'age':age,'array1':array1,'array2':array2});

```

我如何使用 Jackson JSON Mapper 将其映射到 POJO 以避免 400 Bad Request。

我试过了

```
公共类 MyPOJOs{
  私人字符串电子邮件；
  私有字符串年龄；
  私人 MyList 数组1；
  私人 MyList 数组2；
  //getter 和 setter
}
公共类 MyList{
  私有 ArrayList 列表；
  //getter 和 setter
}

```

我的控制器

```
公共 @ResponseBody 响应 myController(@RequestBody MyPOJOs myPOJOs){
   字符串电子邮件 = myPOJOs.getEmail();
   logger.log("嗨" + 电子邮件);
   返回空值；
}

```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:35:26.263

I do not really know Jackson JSON processor but I would be surprised that it is able to map your arrays to your custom `MyList` objects.

I would expect the `MyPOJOs` class to have member like `private String[] array1` or `private List<String> array1` or a `Collection`.

btw: There are many mistakes in your code that make me think you do not post real code here. Misspelled type names etc.

# oracle - Oracle 中的临时表，如 SQL Server

> ID：11989105
> 
> 赞同：0
> 
> 时间：2012-08-16T14:15:03.513
> 
> 标签：oracle, oracle10g, oracle11g, temp-tables

在 SQL Server 中，可以执行以下操作

```
declare @t as table(id int)

insert into @t values(1)
insert into @t values(2)

delete from @t where id=1 
```

在没有创建物理表的情况下，Oracle 中是否存在等价的情况。现在，我曾经创建物理表来执行此操作并稍后删除。

我已经转到此链接[如何在 Oracle 中创建临时表，](https://stackoverflow.com/questions/2671518/how-to-create-a-temporary-table-in-oracle)但那是 2010 年，[参考链接](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:48812348054)提到了 Oracle 8i。Oracle 10g 和 11g 仍然是这种情况吗？我访问过的另一个链接是[在 Oracle SQL 中构建临时表](https://stackoverflow.com/questions/10730364/constructing-a-temporary-table-in-oracle-sql)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-02T11:07:04.030

在大多数情况下，您不需要它。在 Oracle 中，当您需要临时表时，“您的设计是错误的”。不要试图将 MS SQL 模式改写成 Oracle 的确切措辞。在 MS SQL 中使用临时表的地方，您在 Oracle CTE（嵌套子查询、查询分解）`CURSOR`或某些 PL/SQL 构造中使用。

临时表不是您需要的。它只是您用来实现某些目标的工具。在 Oracle 中，您应该使用其他工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:31:44.183

CREATE GLOBAL TEMPORARY TABLE admin_work_area (startdate DATE, enddate DATE, class CHAR(20)) ON COMMIT DELETE ROWS;

此语句创建一个特定于事务的临时表。有关详细信息，请使用以下链接：

[http://docs.oracle.com/cd/B28359_01/server.111/b28310/tables003.htm#i1006400](http://docs.oracle.com/cd/B28359_01/server.111/b28310/tables003.htm#i1006400)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T10:14:29.473

使用关联数组:)

```
declare
type temp_rec is record(v integer);
type temp_table is table of temp_rev indexed by pls_integer;

my_temp_table temp_table;

begin
  -- Here you can do do your stuff :)
end
/ 
```

# php - PHP ~ 列数与第 1 行的值数不匹配

> ID：11989112
> 
> 赞同：16
> 
> 时间：2012-08-16T14:15:30.643
> 
> 标签：php, mysql

我正在创建一个注册，我只使用直接的 PHP 而不是 JavaScript 将我的表单发送到 MySQL 数据库，所以一切正常，没有语法错误或其他任何东西，但我填写了所有信息并单击“注册”然后它返回一条消息“列计数与第 1 行的值计数不匹配”。

我只有 14 岁，所以这对我来说很困惑，有人有解决方案吗？

这是我的 INSERT INTO 代码：

```
 $sql = mysql_query("INSERT INTO users(firstname, lastname, email, password, day, month, year, gender) 
 VALUES('$firstname','$lastname','$email','$db_password','$day','$month','$year')")  
 or die (mysql_error()); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-16T14:27:57.167

您正在尝试将 7 个值插入 8 列 - 您缺少插入性别。

正确的代码是：

```
$sql = mysql_query("INSERT INTO users(firstname, lastname, email, password, day, month, year, gender) 
VALUES('$firstname','$lastname','$email','$db_password','$day','$month','$year', '$gender')")  
or die (mysql_error()); 
```

顺便说一句，如果您还没有这样做，我强烈建议您先转义字符串，然后再将它们传递给查询，如下所示：

```
$firstname=mysql_real_escape_string($firstname) 
```

您应该对上述所有变量执行此操作。[在这里](http://php.net/manual/en/function.mysql-real-escape-string.php)您可以找到有关转义功能的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:25:48.173

有了你的代码，我看到你忘记插入 $gender。

将数据插入 MySQL 表时，您必须指定哪些数据进入哪一列。您可以通过在 VALUES 部分之前指定列名来执行此操作：

```
INSERT INTO tblA (col1, col2) VALUES ('value1','value2'); 
```

如果省略该信息，MySQL 将期望所有列：

如果你的表是这样的：

```
 CREATE TABLE tblA (
     col1 INT,
     col2 INT 
 ); 
```

您可以插入如下信息：

```
INSERT INTO tblA VALUES ('value1', 'value2'); 
```

如果您省略列名并且没有为所有列指定值，MySQL 将出现“列数与行的值数不匹配”错误，因为 MySQL 不知道在缺少的列中放入什么。有了上面的表结构，

```
INSERT INTO tblA VALUES ('value1'); 
```

将导致该错误。

在非严格模式下，MySQL 将为省略的列名插入默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:28:47.327

您错过了性别列的值（最后一个）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T14:31:54.193

您完全缺少性别值：

```
$sql = mysql_query("INSERT INTO users(firstname, lastname, email, password, day, month, year, gender) 
VALUES('$firstname','$lastname','$email','$db_password','$day','$month','$year', 'gender goes here')") 
or die (mysql_error()); 
```

# matlab - UTC 到 MATLAB 中的本地时间

> ID：11989119
> 
> 赞同：0
> 
> 时间：2012-08-16T14:15:52.640
> 
> 标签：matlab, utc, hour

我有这个单元格数组：

```
 date_hour = '30/07/2012 00:00'
                '30/07/2012 01:00'
                '30/07/2012 02:00'
                '30/07/2012 03:00'
                '30/07/2012 04:00'
                '30/07/2012 05:00'
                '30/07/2012 06:00'
                '30/07/2012 07:00'
                '30/07/2012 08:00'
                '30/07/2012 09:00'
                '30/07/2012 10:00'
                '30/07/2012 11:00'
                '30/07/2012 12:00'
                '30/07/2012 13:00'
                '30/07/2012 14:00'
                '30/07/2012 15:00'
                '30/07/2012 16:00'
                '30/07/2012 17:00'
                '30/07/2012 18:00'
                '30/07/2012 19:00'
                '30/07/2012 20:00'
                '30/07/2012 22:00'
                '30/07/2012 21:00'
                '30/07/2012 23:00' 
```

小时以 UTC 给出。一旦当地时间为-3，如何转换为当地时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:20:05.873

由于 matlab 日期格式是自 0000 年 1 月 1 日起的天数，时间为小数，您可以简单地从 matlab 日期格式中减去 3/24。

```
localDateNum = datenum(date_hour,'dd/mm/yyyy HH:MM') - 3/24; 
```

然后，您可以使用 datestr 将其转换回字符串。

```
date_hour_local = datestr(localDateNum,'dd/mm/yyyy HH:MM'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-08T10:47:09.853

只是为了让您了解另一种解决方案，您可以使用 MATLAB `addtodate`-function：

```
date_local_num = addtodate(datenum(date_hour,'dd/mm/yyyy HH:MM'),-3,'hour');
date_local = datestr(date_local_num,'dd/mm/yyyy HH:MM'); 
```

有关更多信息，请参阅文档：

[http://de.mathworks.com/help/matlab/ref/addtodate.html](http://de.mathworks.com/help/matlab/ref/addtodate.html)

# c++ - OpenCV 2.4.2 imread 函数导致运行时错误

> ID：11989127
> 
> 赞同：3
> 
> 时间：2012-08-16T14:16:30.750
> 
> 标签：c++, opencv

我是 OpenCV 的初学者。我的编程环境是 VC++ Express 2010 + OpenCV 2.4.2 + Win 7 64 位。

我在我的 VC++ 和 Path 中使用纯 32 位配置。

我输入以下代码：

```
#include "opencv2\highgui\highgui.hpp"
#include "opencv2\core\core.hpp"
using namespace cv;

int main(int argc, char** argv) {
    char* imgPath = "logo.png";
    Mat img = imread(imgPath);
    namedWindow( "Example1", WINDOW_AUTOSIZE);
    imshow("Example1", img);
    waitKey(0);
    return 0;
} 
```

然后我编译并运行。它确实提出了一个窗口（但没有图片），但后来给了我这个（运行时错误？）

```
Unhandled exception at 0x770515de in Helloworld2.exe: Microsoft C++ exception: cv::Exception at memory location 0x001ef038.. 
```

然后我将 imread 更改为 cvLoadImage 并且它可以正常工作。

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:23:15.440

我已经尝试过您提供的代码。它与我安装的 OpenCV 完美配合。

但是，我在线收到警告：

```
char* imgPath = "logo.png";

main.cpp:6:21: warning: deprecated conversion from string constant to 'char*' [- 
```

写字符串]

我认为这不会导致代码崩溃，但这可能是您的问题，因为我没有使用 VC++ 进行编译。

您可以尝试检查这是否是问题是`imgPath`直接替换为字符串，所以代码现在就像

```
Mat img = imread("logo.png"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T10:01:07.330

我也遇到了这个问题，但我用以下方法解决了这个问题。重点是使用相对路径以外的绝对路径，将文件路径中的“\”改为“/”。

```
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>

int main() {
    cv::Mat image = cv::imread("D:/projects/test/Debug/1.jpg");
    if (image.empty()) {
        return 0;
    }
    cv::namedWindow("my image");
    cv::imshow("my image", image);
    cv::waitKey(5000);
    return 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T11:14:19.413

`cvLoadImage`和之间的区别`imread`可以在opencv文档中看到：

> C++: Mat imread( **const string& filename** , int flags=1 )

和

> C: CvMat* cvLoadImageM( **const char* 文件名**, int iscolor=CV_LOAD_IMAGE_COLOR )

但是有一个从`const char *`to的隐式转换`string`。正如 masad 所指出的，这种转换已被弃用，因此它非常依赖于编译器。

为`cvLoadImage`您工作，您似乎应该将代码更改为以下内容：

```
#include "opencv2\highgui\highgui.hpp"
#include "opencv2\core\core.hpp"
#include <string>
using namespace cv;

int main(int argc, char** argv) {
    std::string imgPath("logo.png");
    Mat img = imread(imgPath);
    namedWindow( "Example1", WINDOW_AUTOSIZE);
    imshow("Example1", img);
    waitKey(0);
    return 0;
} 
```

Visual Studio 中的 C++ 接口存在一些[问题](https://stackoverflow.com/a/7015015/634150)，但您可以尝试看看它是否适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:28:12.903

我遇到了同样的问题，我遇到了[在 Visual C++ 2010 Express 中安装 OpenCV 2.4.3](https://stackoverflow.com/questions/10901905/installing-opencv-2-4-in-visual-c-2010-express?lq=1)，它提到在为链接器添加依赖项时使用更新的库集 *d.lib。我试过了，C++ 接口工作了。不确定这是否是一般情况。我在 64 位 Windows 机器上使用 OpenCV 2.4 和 Visual Studio 2010。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-16T14:23:40.407

# c# - 我如何知道哪些对象可以在 C# 中使用关键字 USING？

> ID：11989133
> 
> 赞同：3
> 
> 时间：2012-08-16T14:16:51.190
> 
> 标签：c#, using

鉴于在适用时应始终使用关键字“使用”，我想这样做。问题是，我怎么知道我可以使用哪些对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:17:49.270

实现的对象[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)可以与[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx)构造一起使用。

您可以查看类的文档、代码中的定义，或使用 Visual Studio 中的对象资源管理器查找已实现的接口。

此外，如果您尝试使用未`IDisposable`在`using`块中实现的类型，编译器将发出警告。这意味着如果有疑问，您可以随时尝试，如果编译器抱怨，您不应该使用`using`. 但是，您应该始终了解您使用的是哪些对象`IDisposable`并相应地对待它们。

的主要目的`IDisposable`（尽管我已经看到它用于（和误用）其他东西），是确保及时释放非托管资源。此处使用的术语非托管资源可能是硬件设备句柄、文件、流、连接等。您希望确保在完成资源后立即处理任何内容，而不是等待 GC踢进去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:26:16.860

您可以使用[FxCop](http://msdn.microsoft.com/en-us/library/bb429476%28v=vs.80%29.aspx)或[CodeRush](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)之类的工具来识别未`Dispose`在`using`实现`IDisposable`. 在这种情况下，他们会警告您。

此外，在 Visual Studio 中，您可以使用[对象浏览器](http://msdn.microsoft.com/en-us/library/exy1facf%28v=vs.80%29.aspx)查看哪些类型实现了`IDisposable`.

![在此处输入图像描述](../Images/f27b5e7ff6398e41cb28ac962b554475.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:18:06.383

建议在大多数情况下，[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)应在[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)块中使用实现的类。

要查看一个类是否实现了`IDisposable`，您只需查看它的定义即可。`IDiposable`如果实现未正确处理，FXCop 等代码风格分析工具也会提醒您。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T14:18:05.590

将它用于实现的所有类的本地实例`IDisposable`。他们有一个`Dispose`方法。

# sql - 编写防止重复的单个 UPDATE 语句

> ID：11989135
> 
> 赞同：0
> 
> 时间：2012-08-16T14:17:00.793
> 
> 标签：sql, sql-server, oracle11g

我已经尝试了几个小时（可能比我需要的更多）来找出编写更新 sql 查询的最佳方法，该查询将禁止我正在更新的列上的重复项。

意思是，如果 TableA.ColA 已经有一个名称“TEST1”，那么当我更改另一条记录时，我根本无法为 ColA 选择一个值为“TEST1”。

只需将查询分成一个选择，并使用允许条件逻辑的服务器层代码，这很容易：

```
SELECT ID, NAME FROM TABLEA WHERE NAME = 'TEST1'

IF TableA.recordcount > 0 then
    UPDATE SET NAME = 'TEST1' WHERE ID = 1234
END IF 
```

但我更感兴趣的是这两个查询是否可以组合成一个查询。

我正在使用 Oracle 来解决问题，但我也希望看到 SQL Server 查询。我认为 MERGE 语句可以工作，但由于显而易见的原因，您不能拥有该子句：

```
..etc.. WHEN NOT MATCHED UPDATE SET ..etc.. WHERE ID = 1234 
```

并且如果在联接中提到了列，则不能更新它（oracle 限制但不限于 SQL Server）

另外，我知道您可以对防止重复值的列施加约束，但我很想看看是否有这样的查询可以在不使用约束的情况下执行此操作。

这是我的一个示例启动尝试，只是为了看看我能想出什么（没有必要对其失败进行解释）：

错误：ORA-01732：此视图上的数据操作操作不合法

```
UPDATE (
    SELECT d.NAME, ch.NAME FROM (
        SELECT 'test1' AS NAME, '2722' AS ID
        FROM DUAL
    ) d
    LEFT JOIN TABLEA a
    ON UPPER(a.name) = UPPER(d.name)
)
SET a.name = 'test2'
WHERE a.name is null and a.id = d.id 
```

我尝试过合并，但只是放弃了认为这是不可能的。我也认为不存在（但我必须小心，因为我可能会不小心更新不符合条件的所有其他记录）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:24:36.820

它应该很简单：

```
update personnel
set personnel_number = 'xyz'
where person_id = 1001
and not exists (select * from personnel where personnel_number = 'xyz'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:23:10.707

如果我理解正确，您想有条件地更新一个字段，假设找不到该值。以下查询执行此操作。它应该适用于 SQL Server 和 Oracle：

```
update table1
    set name = 'Test1'
    where (select count(*) from table1 where name = 'Test1') > 0 and
          id = 1234 
```

# perl - 文件长度不是0大小而是空的，如何消除这个？

> ID：11989144
> 
> 赞同：0
> 
> 时间：2012-08-16T14:17:28.537
> 
> 标签：perl

我编写了一个 Perl 包装器，应用了一些 unix 命令，将输出写入日志文件。但是我看到它创建了一些空文件，但我看到一些正在创建的文件不是 0 大小，而是声明 1byte；因此，对于某些后期处理内容，我在使用“if (-s "file") do something else do other thing”时遇到了问题。有人可以帮助我的代码为什么创建一个空行（我想，虽然我已经在那里放置了一个 chomp），有没有办法消除那个空行，这样如果没有数据，输出日志文件将始终变为 0 字节处理unix命令后被捕获？否则..你能建议一种有效的方法来检查文件是否为空，这样的情况。

```
sub sub_unaccessfiles {
    my ($disk) = @_ ;
    @disk_sorted = split (/\s+/, $disk) ;
    $disk_Name = $disk_sorted[4] ;
    my $aging_disk = basename ($disk_Name) ;
    open (OUT3, ">./diskmonitor_logs/char_disks/aging_files_$aging_disk") || die "Cannot create ./diskmonitor_logs/char_disks/aging_files_$aging_disk: $!\n" ;
    my $cmd_aging_grab = `find $disk_Name -type f -name .snapshot -prune -o -atime +180 -printf '%u\t%s\t%t\t%p\n'` ;  
    chomp $cmd_aging_grab ;
    print OUT3 "$cmd_aging_grab\n" ;
    close OUT3 ;
       ..
       ..
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:38:09.613

您的打印行：

```
print OUT3 "$cmd_aging_grab\n" ; 
```

里面有一个 '\n' - 每次都会导致空行 - 即使 $cmd_aging_grab 的内容是空的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:37:39.260

`\n`在写入输出文件时删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:48:21.620

尝试：

```
print OUT3 "$cmd_aging_grab\n" if $cmd_aging_grab =~ /\S/; 
```

# c# - ASP.net WebApi - 格式错误的帖子数据的自定义消息

> ID：11989145
> 
> 赞同：5
> 
> 时间：2012-08-16T14:17:29.177
> 
> 标签：c#, .net, asp.net-mvc, asp.net-web-api

我有一个 MVC 4 WebAPI 应用程序。我想要做的是过滤掉`ModelState`由于放置/发布期间发送的格式错误的数据而发生的任何错误。

我有一个`ActionFilterAttribute`检查是否`ModelState`有效。我想将状态的`ErrorMessage`s 发回给用户。这部分工作正常。

```
/// <summary>
/// This filter will validate the models that are used in the webapi
/// </summary>
public class MyValidationFilter :System.Web.Http.Filters.ActionFilterAttribute
{
    public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        if (!actionContext.ModelState.IsValid)
        {
            //ErrorResponse is just a simple data structure used to hold response
            ErrorResponse errorResponse = new ErrorResponse();

            //loop through each key(field) and see if it has any errors
            foreach (var key in actionContext.ModelState.Keys)
            {
                var state = actionContext.ModelState[key];
                if (state.Errors.Any())
                {
                    string validationMessage = state.Errors.First().ErrorMessage;
                    errorResponse.ErrorMessages.Add(new ErrorMessage(validationMessage));                      
                }
            }

            //this is a custom exception class that i have that sends the response to the user.
            throw new WebAPIException(HttpStatusCode.BadRequest, errorResponse );

        }

    }
} 
```

正常验证（必需、字符串长度、正则表达式）都可以正常工作，因为我可以控制这些消息。

```
[Required(ErrorMessage = "ID is required")]
public string ID { get; set; } 
```

但是，如果有人传递了格式不正确的 XML 或 JSON 数据，我将无法控制该消息。如果发生这种情况，那么我可能会得到

> 未终止的字符串。预期分隔符：\"。路径 ''，第 1 行，第 9 位。

或者

> 解析属性名称后出现无效字符。应为“：”，但得到：}。路径''，第 1 行，位置 9。

或者这些显示我的命名空间的那些。

> 将值“Medium”转换为“MyNameSpace.Tenant.WebAPIs.Library.IndividualRegistrationInfo”时出错。路径 ''，第 1 行，位置 8。
> 
> 第 1 行位置 7 出错。从命名空间“http://schemas.datacontract.org/2004/07/MyNameSpace.Tenant.WebAPIs.Library.IndividualRegistrationInfo”中期待元素“IndividualRegistrationInfo”。遇到名称为“asdf”的“元素” , 命名空间 ''

发生这种情况时，我想以某种方式发回通用的“无效数据”消息。是否有另一个我可以使用的过滤器，或者其他可以捕获和覆盖这些消息的地方？

**更新**

这是我根据克里斯的建议最终做的事情：

我为 JSON 和 XML 创建了 2 个新的格式化程序。

```
public class JsonFormatter : JsonMediaTypeFormatter
{
    public override System.Threading.Tasks.Task<object> ReadFromStreamAsync(Type type, System.IO.Stream stream, System.Net.Http.Headers.HttpContentHeaders contentHeaders, IFormatterLogger formatterLogger)
    {

       System.Threading.Tasks.Task<object> task = base.ReadFromStreamAsync(type, stream, contentHeaders, formatterLogger);

        //parse error if null
       if (task.Result == null)
       {
           //handle error here.
       }

       return task;
    }
}

public class XMLFormatter : XmlMediaTypeFormatter
{
    public override System.Threading.Tasks.Task<object> ReadFromStreamAsync(Type type, System.IO.Stream stream, System.Net.Http.Headers.HttpContentHeaders contentHeaders, IFormatterLogger formatterLogger)
    {

        System.Threading.Tasks.Task<object> task = base.ReadFromStreamAsync(type, stream, contentHeaders, formatterLogger);

        //parse error if null
        if (task.Result == null)
        {
            //handle error here
        }

        return task;
    }
} 
```

并`Application_Start`在 global.asax 中的方法中

```
GlobalConfiguration.Configuration.Formatters.Insert(0, new JsonFormatter());
GlobalConfiguration.Configuration.Formatters.Insert(1, new XMLFormatter()); 
```

我不确定是否有更好的方法，但这似乎有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:39:35.477

我不完全确定，但您可能只是重载默认值`JsonMediaTypeFormatter`和`XmlMediaTypeFormatter`实现，并用您自己的异常包装它们的异常。这样做的好处是将您的异常处理直接与问题的根源（即格式化程序）联系起来，而不是尝试通过`IExceptionFilter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T14:44:28.737

这是我根据克里斯的建议最终做的事情：

为 JSON 和 XML 创建了 2 个新的格式化程序。

```
public class JsonFormatter : JsonMediaTypeFormatter{
public override System.Threading.Tasks.Task<object> ReadFromStreamAsync(Type type, System.IO.Stream stream, System.Net.Http.Headers.HttpContentHeaders contentHeaders, IFormatterLogger formatterLogger)
{

   System.Threading.Tasks.Task<object> task = base.ReadFromStreamAsync(type, stream, contentHeaders, formatterLogger);

    //parse error if null
   if (task.Result == null)
   {
       //handle error here.
   }

   return task;
}} 
```

```
 public class XMLFormatter : XmlMediaTypeFormatter
{
    public override System.Threading.Tasks.Task ReadFromStreamAsync(Type type, System.IO.Stream stream, System.Net.Http.Headers.HttpContentHeaders contentHeaders, IFormatterLogger formatterLogger)
    {

        System.Threading.Tasks.Task task = base.ReadFromStreamAsync(type, stream, contentHeaders, formatterLogger);

        //parse error if null
        if (task.Result == null)
        {
            //handle error here
        }

        return task;
    }
} 
```

并在 global.asax 的 Application_Start 方法中

```
 GlobalConfiguration.Configuration.Formatters.Insert(0, new JsonFormatter());
GlobalConfiguration.Configuration.Formatters.Insert(1, new XMLFormatter()); 
```

我不确定是否有更好的方法，但这似乎有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-23T09:53:29.530

所以这里的问题是：

1.  它是`MediaTypeFormatter`消耗`System.IO.Stream`与 HTTP 请求相关联的；
2.  虽然该格式化程序将调用`IFormatterLogger.OnError(string,Exception)`，但第一个参数只是一个“路径”（无论解析器选择如何构想它），而不是输入本身的副本。

所以，是的，如果您想查看和响应（或记录）导致错误的请求，您需要实现并注册自己的 MediaTypeFormatter，进行自己的解析/反序列化，并根据自己的情况进行处理协议（除了 WebApi 协议）。

# javascript - Twitter Bootstrap 下拉菜单的事件处理程序？

> ID：11989146
> 
> 赞同：88
> 
> 时间：2012-08-16T14:17:30.263
> 
> 标签：javascript, twitter-bootstrap

我想使用[Twitter Bootstrap 下拉按钮](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)：

```
 <div class="btn-group">
      <button class="btn dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
      <ul class="dropdown-menu">
        <li><a href="#">Action</a></li>
        <li><a href="#">Another action</a></li>
        <li><a href="#">Something else here</a></li>
      </ul>
    </div><!-- /btn-group --> 
```

当用户将按钮的值更改为“另一个动作”时，而不是简单地导航到`#`，我实际上想以自定义方式处理该动作。

[但是我在下拉插件](http://twitter.github.com/bootstrap/javascript.html#dropdowns)中看不到任何用于执行此操作的事件处理程序。

实际上是否可以使用 Bootstrap 下拉按钮来处理用户操作？我开始怀疑它们是否仅用于导航 - 该示例提供了一个操作列表，这令人困惑。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-16T14:24:42.213

Twitter bootstrap 旨在提供基线功能，并且仅提供***在 screen 上***执行某些操作的基本 javascript 插件。任何其他内容或功能，您必须自己做。

```
<div class="btn-group">
  <button class="btn dropdown-toggle" data-toggle="dropdown">Action <span class="caret"></span></button>
  <ul class="dropdown-menu">
    <li><a href="#" id="action-1">Action</a></li>
    <li><a href="#" id="action-2">Another action</a></li>
    <li><a href="#" id="action-3">Something else here</a></li>
  </ul>
</div><!-- /btn-group --> 
```

然后用 jQuery

```
jQuery("#action-1").click(function(e){
//do something
e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-16T17:55:37.910

试试这个：

```
$('div.btn-group ul.dropdown-menu li a').click(function (e) {
    var $div = $(this).parent().parent().parent(); 
    var $btn = $div.find('button');
    $btn.html($(this).text() + ' <span class="caret"></span>');
    $div.removeClass('open');
    e.preventDefault();
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-06-25T16:53:16.130

在 Bootstrap 3 中，“dropdown.js”为我们提供了触发的各种事件。

```
click.bs.dropdown
show.bs.dropdown
shown.bs.dropdown 
```

ETC

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-16T14:27:03.837

这是一个工作示例，说明如何为锚点实现自定义功能。

[http://jsfiddle.net/CH2NZ/43/](http://jsfiddle.net/CH2NZ/43/)

您可以将 id 附加到您的锚点：

```
<li><a id="alertMe" href="#">Action</a></li> 
```

然后使用 jQuery 的点击事件监听器来监听点击动作并触发你的函数：

```
$('#alertMe').click(function(e) {
    alert('alerted');
    e.preventDefault();// prevent the default anchor functionality
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-20T12:42:13.787

我一直在看这个。在填充下拉锚点时，我给了它们一个类和数据属性，所以当需要做一个动作时，你可以做：

```
<li><a class="dropDownListItem" data-name="Fred Smith" href="#">Fred</a></li> 
```

然后在 jQuery 中做类似的事情：

```
$('.dropDownListItem').click(function(e) {
    var name = e.currentTarget;
    console.log(name.getAttribute("data-name"));
}); 
```

因此，如果您在下拉列表中动态生成了列表项，并且需要使用的数据不仅仅是项目的文本值，您可以在创建下拉列表项时使用数据属性，然后只为每个项目提供类事件，而不是引用每个项目的 id 并生成点击事件。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-03T13:44:49.443

任何在这里寻找 Knockout JS 集成的人。

给定以下 HTML（标准引导下拉按钮）：

```
<div class="dropdown">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
        Select an item               
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu" role="menu">
        <li>
            <a href="javascript:;" data-bind="click: clickTest">Click 1</a>
        </li>
        <li>
            <a href="javascript:;" data-bind="click: clickTest">Click 2</a>
        </li>
        <li>
            <a href="javascript:;" data-bind="click: clickTest">Click 3</a>
        </li>
    </ul>
</div> 
```

使用以下 JS：

```
var viewModel = function(){
    var self = this;

    self.clickTest = function(){
        alert("I've been clicked!");
    }  
}; 
```

对于那些希望基于淘汰赛可观察数组生成下拉选项的人，代码看起来像：

```
var viewModel = function(){
    var self = this;

    self.dropdownOptions = ko.observableArray([
        { id: 1, label: "Click 1" },
        { id: 2, label: "Click 2" },
        { id: 3, label: "Click 3" }
    ])

    self.clickTest = function(item){
        alert("Item with id:" + item.id + " was clicked!");
    }  
};

<!-- REST OF DD CODE -->
<ul class="dropdown-menu" role="menu">
    <!-- ko foreach: { data: dropdownOptions, as: 'option' } -->
    <li>
        <a href="javascript:;" data-bind="click: $parent.clickTest, text: option.clickTest"></a>
    </li>
    <!-- /ko -->
</ul>
<!-- REST OF DD CODE --> 
```

> 请注意，可观察数组项被隐式传递到 click 函数处理程序以在视图模型代码中使用。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-31T03:58:36.060

无需更改您的按钮组，您可以执行以下操作。下面，我假设您的下拉列表`button`中有一个`id`of `fldCategory`。

```
<script type="text/javascript">

$(document).ready(function(){

  $('#fldCategory').parent().find('UL LI A').click(function (e) {
    var sVal = e.currentTarget.text;
    $('#fldCategory').html(sVal + ' <span class="caret"></span>');
    console.log(sVal);
  });

});

</script> 
```

现在，如果您将该项`.btn-group`本身的 of 设置为具有`id`of `fldCategory`，这实际上是更高效的 jQuery 并且运行得更快一些：

```
<script type="text/javascript">

$(document).ready(function(){

  $('#fldCategory UL LI A').click(function (e) {
    var sVal = e.currentTarget.text;
    $('#fldCategory BUTTON').html(sVal + ' <span class="caret"></span>');
    console.log(sVal);
  });

});

</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-18T20:27:36.553

在这里，选项具有值、标签和 css 类，它们会在选择时反映在父元素上。

```
$(document).on('click','.update_app_status', function (e) {
            let $div = $(this).parent().parent(); 
            let $btn = $div.find('.vBtnMain');
            let $btn2 = $div.find('.vBtnArrow');
            let cssClass = $(this).data('status_class');
            let status_value = $(this).data('status_value');
            let status_label = $(this).data('status_label');
            $btn.html(status_label);
            $btn.removeClass();
            $btn2.removeClass();
            $btn.addClass('btn btn-sm vBtnMain '+cssClass);
            $btn2.addClass('btn btn-sm vBtnArrow dropdown-toggle dropdown-toggle-split '+cssClass);
            $div.removeClass('show');
            $div.find('.dropdown-menu').removeClass('show');
            e.preventDefault();
            return false;
    });
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" rel="stylesheet"/>

   <div class="btn-group">
   <button type="button" class="btn btn-sm vBtnMain btn-warning">Awaiting Review</button>
   <button type="button" class="btn btn-sm vBtnArrow btn-warning dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
       <span class="sr-only">Toggle Dropdown</span>
   </button>
   <div class="dropdown-menu dropdown-menu-right">
     <a class="dropdown-item update_app_status" data-status_class="btn-warning" data-status_value="1" data-status_label="Awaiting Review" href="#">Awaiting Review</a>
     <a class="dropdown-item update_app_status" data-status_class="btn-info" data-status_value="2" data-status_label="Reviewed" href="#">Reviewed</a>
     <a class="dropdown-item update_app_status" data-status_class="btn-dark" data-status_value="3" data-status_label="Contacting" href="#">Contacting</a>
     <a class="dropdown-item update_app_status" data-status_class="btn-success" data-status_value="4" data-status_label="Hired" href="#">Hired</a>
     <a class="dropdown-item update_app_status" data-status_class="btn-danger" data-status_value="5" data-status_label="Rejected" href="#">Rejected</a>
   </div>
   </div>
```

# r - 总结R中循环的结果？

> ID：11989148
> 
> 赞同：1
> 
> 时间：2012-08-16T14:17:38.397
> 
> 标签：r, loops, summarization

我已经创建了这个小代码，并且无法总结循环的结果。有人可以帮我吗？

```
a = array(c(1,1,1,1,1,1,1,2,1,1,1,1,1), dim=c(4,3))
b = array(c(0,0,0,0,0,1), dim=c(2,3))

dist <- array()
for (j in 1:2) { 
  for (i in 1:4) {
  dist <- sqrt (sum ((a[i, ]-b[j, ])^2))
  print(dist)
  }
} 
```

结果我得到8个数字，但只能显示最后一个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:43:33.200

或者，您可以使用该`outer`函数（如果有人想出更好的方法来矢量化匿名函数，请随时编辑）

```
(dist <- outer(1:4, 1:2, FUN = Vectorize(function(x,y)sqrt(sum((a[x,]-b[y,])^2)))))
         [,1]     [,2]
[1,] 1.732051 1.414214
[2,] 1.732051 1.414214
[3,] 1.732051 1.414214
[4,] 2.449490 2.236068 
```

`1:4`用于索引`a`，`1:2`用于索引`b`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T14:34:28.640

您需要随时填写`dist`矩阵。

```
dist <- array(dim=c(4,2))
for (j in 1:2) {
  for (i in 1:4) {
    dist[i,j] <- sqrt (sum ((a[i,1:3]-b[j,1:3])^2))
  } 
}
dist 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T03:41:59.137

您还可以使用内置`dist`函数并避免所有这些嵌套的 for 循环

`dist`计算欧几里德距离（可能性数量的默认值）。这似乎是你想要的。

查看`?dist`更多详情

```
# give a and b some rownames

row.names(a)  <- paste0('a',1:nrow(a))
row.names(b)  <- paste0('b',1:nrow(b))
#combine into one matrix
ab <- rbind(a,b)

# get the distance between the points

distances <- as.matrix(dist(ab))

# subset those you are interested in
distances[row.names(a),row.names(b)]

##           b1       b2
## a1 1.732051 1.414214
## a2 1.732051 1.414214
## a3 1.732051 1.414214
## a4 2.449490 2.236068 
```

# ios5 - iOS 网络服务

> ID：11989149
> 
> 赞同：0
> 
> 时间：2012-08-16T14:17:38.687
> 
> 标签：ios5

我将编写一个 iOS 程序，我在 Android 中也有一个类似的程序，它为一些数据访问 Web 服务，这些数据返回我解析的 json 数组。这在 iOS 中会是一个可行的选择，还是有更好的方法来获取/解析来自 Web 服务的数据请求？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:20:46.700

您可以在 iOS 中使用 json，所以这样做可能更容易。看看这个框架：[https](https://github.com/stig/json-framework/) ://github.com/stig/json-framework/它非常适合在 ios 应用程序中解析和使用 json。

您可以做的另一件事是将 Web 服务的输出更改为 iOS 的 plist 格式。Plist 格式在 iOS 上原生使用，因此有原生支持。将 plist 转换为 NSArray 或 NSDictionary 非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:21:00.703

iOS 有[原生的 JSON 解析器](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)，所以会更容易。

**注意**：我假设您想支持 iOS 5.0 而不是 iOS 4.0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:21:07.783

那会很好用。许多应用程序都这样做，而 JSON 通常是移动设备的首选方法，有效负载较小。如果您想要一个好的 JSON 解析器，请使用

[http://stig.github.com/json-framework/](http://stig.github.com/json-framework/)

# c# - 在没有 TableFormat 的 Excel 中打开 XML 文档

> ID：11989154
> 
> 赞同：0
> 
> 时间：2012-08-16T14:17:54.230
> 
> 标签：c#, xml, excel, excel-interop

我正在尝试使用以下代码在 Excel 中打开 XML 文档：

```
Excel.Application app = new Excel.Application();
Excel.Workbook wb = (Excel.Workbook)app.Workbooks.OpenXML(@"c:\test.xml", Type.Missing, Excel.XlXmlLoadOption.XlXmlLoadImportToList); 
```

该文档可以正常打开，但会立即应用表格格式。我只想在没有任何颜色或任何其他格式的普通 Excel 工作表中加载日期。

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:24:25.117

我知道如何读取 excel，指定要读取的单元格范围，创建 xml 文档及其相应的节点，并从 excel 中选择数据以将其存储到 xml 文档中。那是你要的吗？

# sql - 每当有第 1 列的重复条目时，如何使用每列 2 的最后一个条目更新两列 Access 表？

> ID：11989160
> 
> 赞同：1
> 
> 时间：2012-08-16T14:18:07.803
> 
> 标签：sql, ms-access, vba, ms-access-2007

为了更好地说明我的示例，这通常是我正在寻找的那种东西：

这就是我要开始的：

```
Column 1 | Column 2
-------------------
    A    |   1
    B    |   2
    A    |   3 
```

我想以以下任一结尾：

1）这样比较可取，因为表中的数据会更少，但绝对没有必要

```
Column 1 | Column 2
-------------------
    A    |   3
    B    |   2 
```

2)

```
Column 1 | Column 2
-------------------
    A    |   3
    B    |   2
    A    |   3 
```

所以为了解释得更清楚一点，我有一张表，里面有一堆数据。用户可以随时导入数据。问题是偶尔会更新一些条目。在这种情况下，我需要使用最后添加的数据状态来更新表中的所有条目。例如，如果最初 A 的值为 1，而表后来更新为 A 的值为 3 的条目，我需要更新整个表以显示 A 的值仅为 3。

此外，虽然我知道如何在查询中执行此操作，但我需要能够在表上执行此操作。现在我想到了几个想法，但似乎没有一个可行。我尝试了一个更新查询：

```
"UPDATE tblData SET column2 = Last(Column2) GROUP BY Column1" 
```

但这似乎并不奏效。我也试过：

```
"UPDATE tblData Set Column2 = DLast('Column2', 'tblData')" 
```

这更接近。但是，它正在使用最后一条记录更新所有条目，如下所示：

```
Column 1 | Column 2
-------------------
    A    |   3
    B    |   3
    A    |   3 
```

我猜这是因为没有“GROUP BY”子句告诉它只对 Column1 的每个实例执行此操作，但通过研究，看起来您不能将“GROUP BY”放在“UPDATE”中陈述。我应该如何处理以获得我正在寻找的结果？

编辑：此外，虽然我对此不是 100% 确定，但我认为解决此问题的方法是使用 DLast 的第三个可选参数，即 [criteria] 参数。我能想到的唯一方法是为 Column1 指定一个确切的值，这就是为什么我不确定如何在这里使用它，但我觉得必须有一种方法来操纵它以应用于每个单独的值第 1 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:57:20.810

KryptKeeper - 对于 HansUp 的回应，对 column2 的更新不一定是更高的数字，不是吗？如果没有，那么 max(column2) 将不起作用。你没有提到你的桌子是计数器还是累加器或类似的东西。如果更新的记录在第 2 列中的值也可能下降，那么您可能必须携带一个日期时间戳作为额外的列，以便您可以在日期时间列上获取 max()。

# mysql - 使用 JOIN 对 MySQL 查询进行排序

> ID：11989161
> 
> 赞同：0
> 
> 时间：2012-08-16T14:18:15.553
> 
> 标签：mysql, join, phpmyadmin

当我尝试在 phpmyadmin 结果中排序我的列时出现错误。这是错误：

![在此处输入图像描述](../Images/7c26db7feb888e309bce871a3a813913.png)

我的查询是：

```
SELECT Cliente.Codigo, Cliente.Nome, Contato.Nome, Grupo.Nome FROM Cliente JOIN Grupo ON ( Grupo.codigo = Cliente.Codigo_Grupo ) JOIN Contato ON ( Contato.Codigo_Cliente = Cliente.Codigo ) GROUP BY Cliente.Codigo ASC 
```

当我单击列的标题时，会自动添加 ORDER BY。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:24:04.867

我怀疑这是错误生成的 SQL：尝试

```
SELECT Cliente.Codigo AS Codigo, Cliente.Nome, Contato.Nome AS Contato, Grupo.Nome AS Grupo 
FROM Cliente 
JOIN Grupo ON ( Grupo.codigo = Cliente.Codigo_Grupo ) 
JOIN Contato ON ( Contato.Codigo_Cliente = Cliente.Codigo ) 
GROUP BY Cliente.Codigo 
ORDER BY `Grupo` ASC
LIMIT 0,30 
```

在评论中讨论之后，事实证明，框架中的一个潜在错误是罪魁祸首： - 没有别名`Grupo.Nome`会阻塞`Nome`部分 - 使用别名`Grupo.Name`会阻塞别名

有一个非常非常肮脏的方法 - 但请注意，这是一种解决方法（充其量），而不是解决方案

这样做一次：

```
CREATE VIEW GrupoWorkaround SELECT Grupo.*,Grupo.Nome AS Grupo FROM Grupo 
```

这将创建一个平行视图。

没有将您的查询更改为

```
SELECT Cliente.Codigo AS Codigo, Cliente.Nome, Contato.Nome AS Contato, GrupoWorkaround.Grupo
FROM Cliente 
JOIN GrupoWorkaround ON ( GrupoWorkaround.codigo = Cliente.Codigo_Grupo ) 
JOIN Contato ON ( Contato.Codigo_Cliente = Cliente.Codigo ) 
GROUP BY Cliente.Codigo 
ORDER BY `Grupo` ASC
LIMIT 0,30 
```

实际上`Grupo`替换`GrupoWorkaround`并因此消除了对别名的需要。

# javascript - 如何在谷歌地图V3中制作信息窗口的圆角？

> ID：11989162
> 
> 赞同：4
> 
> 时间：2012-08-16T14:18:14.993
> 
> 标签：javascript, google-maps, google-maps-api-3

我目前正在使用 Google Map 的 API V3 创建具有多个标记的地图。单击标记会触发信息窗口的显示，该信息窗口描述了后者的详细信息。

我需要知道如何像 Google Map 的 API V2 那样使 InfoWindow 的角变成圆形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:28:31.213

您无法自定义现有 InfoWindow 的 css，但可以将其替换为更可自定义的内容。我喜欢 InfoBox，因为它与常规 InfoWINdow 非常相似，但具有更多样式选项。InfoBox 实际上是 geocodezip 链接到的同一个 Google Maps Utility Library 的一部分。我建议下载两者，看看哪一个最适合您的需求。

[google-maps-utility-library-v3](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T22:08:24.387

我用这段代码作为一个肮脏的黑客来实现这一点：

```
google.maps.event.addListener(this._w, 'domready', function () {
$('#map .bubbleContent')
    .parent().parent().parent().prev()
    .css('borderRadius', 5);
}); 
```

这段代码使用了jQuery（也可以做width plain JS）。选择器`#map .bubbleContent`找到我放入 infoWindow 的 HTML 内容的包装 div。`#map`是我的地图容器，只是为了确保不要从地图中选择任何 div。

**笔记！** 每当 Google 更改信息窗口的标记时，此代码可能会中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:42:37.687

infobubble允许您创建自定义信息窗口并（几乎）按照您喜欢的方式配置它们[。](http://google-maps-utility-library-v3.googlecode.com/svn-history/r307/trunk/infobubble/examples/example.html)

# python - Numpy 均值结构化数组

> ID：11989164
> 
> 赞同：4
> 
> 时间：2012-08-16T14:18:19.307
> 
> 标签：python, numpy, mean, recarray

假设我有一个结构化的学生数组（字符串）和测试分数（整数），其中每个条目是特定学生在特定测试中获得的分数。自然，每个学生在这个数组中都有多个条目。

## 例子

```
import numpy
grades = numpy.array([('Mary', 96), ('John', 94), ('Mary', 88), ('Edgar', 89), ('John', 84)],
                     dtype=[('student', 'a50'), ('score', 'i')])

print grades
#[('Mary', 96) ('John', 94) ('Mary', 88) ('Edgar', 89) ('John', 84)] 
```

如何轻松计算每个学生的平均分数？换句话说，我如何在“分数”维度中取数组的平均值？我想做

```
grades.mean('score') 
```

并让 Numpy 返回

```
[('Mary', 92), ('John', 89), ('Edgar', 89)] 
```

但 Numpy 抱怨

```
TypeError: an integer is required 
```

有没有一种 Numpy 式的方法可以轻松做到这一点？我认为这可能涉及查看具有不同 dtype 的结构化数组。任何帮助，将不胜感激。谢谢。

### 编辑

```
>>> grades = numpy.zeros(5, dtype=[('student', 'a50'), ('score', 'i'), ('testid', 'i'])
>>> grades[0] = ('Mary', 96, 1)
>>> grades[1] = ('John', 94, 1)
>>> grades[2] = ('Mary', 88, 2)
>>> grades[3] = ('Edgar', 89, 1)
>>> grades[4] = ('John', 84, 2)
>>> np.mean(grades, 'testid')
TypeError: an integer is required 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:30:23.867

NumPy 并非旨在将行分组在一起并将聚合函数应用于这些组。你可以：

*   使用[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)和重建数组；
*   使用[Pandas](http://pandas.pydata.org/)，它基于 NumPy，擅长分组；或者
*   为测试 id 的数组添加另一个维度（因此本例将是一个 2x3 数组，因为看起来有两个测试）。

这是`itertools`解决方案，但正如您所见，它非常复杂且效率低下。我会推荐其他两种方法中的一种。

```
np.array([(k, np.array(list(g), dtype=grades.dtype).view(np.recarray)['score'].mean())
          for k, g in groupby(np.sort(grades, order='student').view(np.recarray),
                              itemgetter('student'))], dtype=grades.dtype) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T21:05:21.537

matplotlib.mlab.rec_groupby 正是我想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:55:01.163

`itertools`不使用 view()的基于 的更快和更简单的解决方案是

`[(k,e['score'][list(g)].mean()) for k, g in groupby(argsort(e),e['student'].__getitem__ )]`

这与 ecatmur 的想法相同，但在使用 argsort() 而不是 sort 的索引方面起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-20T19:20:32.013

collapseByField(grades,'student') 给出你想要的，之后：

```
def collapseByField(e,collapsefield,keepFields=None,agg=None):
   import numpy as np
   assert isinstance(e,np.ndarray) # Structured array
   if agg is None:
       agg=np.mean
   if keepFields is None:
       newf=[(n,agg,n) for n in e.dtype.names if n not in (collapsefield)]
   import matplotlib as mpl
   return(mpl.mlab.rec_groupby(e,[collapsefield],newf)) 
```

# ruby-on-rails - 在 Rake 任务中的 `db:test:prepare` 之后访问 ActiveRecord 模型

> ID：11989166
> 
> 赞同：0
> 
> 时间：2012-08-16T14:18:30.457
> 
> 标签：ruby-on-rails, rake

在我的 Rails 应用程序中，我创建了一个 rake 任务，它使用 重置数据库`db:reset`，使用 准备测试数据库，`db:test:prepare`然后尝试使用 ActiveRecord 使用示例数据重新填充数据库：

```
namespace :db do
  task :repopulate => :environment do
    Rake::Task['db:reset'].invoke
    Rake::Task['db:test:prepare'].invoke
    puts Course.first.inspect
  end
end 
```

不幸的是，当我运行它时任务失败，抱怨它`Could not find table 'courses'`。此外，它似乎没有正确准备测试数据库，因为我的测试都失败了，直到我手动运行`rake db:test:prepare`. 如果我注释掉调用`db:test:prepare`一切的行似乎工作正常（当然，除了它没有准备测试数据库）。任何想法是什么问题或我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:29:57.190

在 rake 任务之后尝试 Course.reset_column_information。

# sql-server - JPA 使 MSSQL 事务锁定

> ID：11989170
> 
> 赞同：2
> 
> 时间：2012-08-16T14:18:47.037
> 
> 标签：sql-server, hibernate, jpa, glassfish, ejb-3.0

我们有一个在 Glassfish 3.0.1 上运行的 Java EE 应用程序，它使用 EJB、JPA 和 Hibernate 作为实现，并使用 MS SQL Server 2008 R2 作为数据库引擎，使用 JTDS 作为 JDBC 驱动程序。我们通过在每个实体上指定 @version 字段来选择乐观锁定策略。数据库访问可以是并发的，并且在 JTA 事务期间可能会请求大量数据库读取。

我们试图通过将它们分解为一个小的工作单元来使我们的交易尽可能快。

不幸的是，我们处于一种情况，即我们获得了永无止境的数据库锁。我们可以从 MS SQL Server 活动监视器中看到，一个事务锁定了其他事务，并且那个特定的事务在我们杀死它之前永远不会停止。如果我们查看该语句，它是对历史表的​​插入，它阻塞了其他事务，这些事务只是在与历史表无关的另一个表上选择。

第一个问题，既然我们采用了乐观锁定策略，为什么 SQL Server 会锁定表？我们如何防止这种行为？

# javascript - 使用 jQuery UI Accordion 和 javascript 在正文中加载防止 FOUC

> ID：11989171
> 
> 赞同：0
> 
> 时间：2012-08-16T14:18:54.823
> 
> 标签：javascript, html5boilerplate, jquery-ui-accordion, fouc

我目前的问题是我的网页使用 jQuery UI Accordion 插件和在我的 html-body-tag 末尾加载的 javascript 遭受 FOUC 的影响。当我在头部包含 javascript 时，一切都加载得很好。html5boilerplate 建议[将所有 javascript 放在 body-tag 的末尾，](https://github.com/h5bp/html5-boilerplate/blob/master/index.html)以避免页面加载缓慢。

在我初始化手风琴后，我还尝试`display: none`了手风琴和`show()`它在文件上的准备，但这也不令人满意。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:05:28.610

我确实有问题。阅读那篇文章-> [http://www.learningjquery.com/2008/10/1-way-to-avoid-the-flash-of-unstyled-content](http://www.learningjquery.com/2008/10/1-way-to-avoid-the-flash-of-unstyled-content)帮助很大。

# jquery - jQuery 模态对话框 onclick

> ID：11989174
> 
> 赞同：1
> 
> 时间：2012-08-16T14:18:57.943
> 
> 标签：jquery, modal-dialog, jquery-ui-dialog

所以，我有一个链接，

```
<a href="javascript: void(0)" id="dialog_link">I'm the link</a> 
```

当您单击链接时，我试图打开一个模式对话框，带有一个接受按钮，当您单击接受按钮时，它将转发到一个新页面。这是对话脚本，

```
<script>
$(document).ready(function() {
    $('#dialog').dialog({ autoOpen: false })
    $('#dialog_link').click(function(){ 
        $( "#dialog" ).dialog('open', {
            modal:true,
            buttons: {
                Accept: function() {
                    $( this ).dialog( "close" );
                }
            }
        }); 
    });
}); 
```

现在接受应该只是关闭框。我遇到的问题是打开对话框，但没有获取我指定的任何选项。谁知道怎么修它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:25:22.080

```
$('#dialog').dialog({ autoOpen: false })
$('#dialog_link').click(function(){
    $( "#dialog" ).dialog({
        modal:true,
        buttons: {
            Accept: function() {
                $( this ).dialog( "close" );
            }
        }
    });
    $('#dialog').dialog('open');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:26:01.763

无需先调用对话框：

```
$(document).ready(function() {
    $('#dialog_link').click(function(){ 
        $( "#dialog" ).dialog({
            modal:true,
            autoopen: true,
            buttons: {
                Accept: function() {
                    $( this ).dialog( "close" );
                }
            }
        }); 
    });
}); ​ 
```

[http://jsfiddle.net/HtYQd/](http://jsfiddle.net/HtYQd/)

# python - 如何从自定义对象中按字段堆积

> ID：11989178
> 
> 赞同：6
> 
> 时间：2012-08-16T14:19:03.170
> 
> 标签：python, python-2.7

我从客户端接收服务器对象（每个对象都具有相同的结构并具有包含该对象创建时间的字段 self.utc_time）。我需要存储在某种结构中，所以我总是按升序排序，所以当我弹出时，我会按 utc_time 弹出最旧的对象，而不是按我收到的时间。我想使用 heapq 中的优先级队列，但是如何说通过自定义对象中的 utc_time 字段进行 heaify 呢？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-16T14:46:07.187

将[魔术`__cmp__`比较方法](http://docs.python.org/reference/datamodel.html#object.__cmp__)添加到您的类中，以避免需要执行 Maksim 描述的元组装饰：

```
>>> import heapq
>>> class MyObject(object):
...     def __init__(self, val):
...         self.val = val
...     def __cmp__(self, other):
...         return cmp(self.val, other.val)
...         
...     
... 
>>> q = []
>>> heapq.heappush(q, MyObject(50))
>>> heapq.heappush(q, MyObject(40))
>>> heapq.heappush(q, MyObject(30))
>>> heapq.heappush(q, MyObject(20))
>>> heapq.heappush(q, MyObject(200))
>>> obj = heapq.heappop(q)
>>> print obj.val
20 
```

注意：**`__lt__`**在**Python 3**中覆盖，`__cmp__`仅在 Python 2 中

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-16T14:31:21.883

[Python 文档](http://docs.python.org/library/heapq.html#basic-examples)隐含地提供了以下解决方案：

> 堆元素可以是元组。这对于在跟踪的主记录旁边分配比较值（例如任务优先级）很有用：

```
 h = []
 heappush(h, (5, 'write code'))
 heappush(h, (7, 'release product'))
 heappush(h, (1, 'write spec'))
 heappush(h, (3, 'create tests'))
 heappop(h)
   => (1, 'write spec') 
```

您可以以类似的方式执行此操作 - 存储元组，其中第一个元素将包含`utc_time`放置到 PQ 的对象的 a 和第二个元素 - 对对象本身的引用。

在类似的[SO question](https://stackoverflow.com/a/8875823/276274)中，建议创建一个易于使用的包装器，该包装器将允许以更简洁的方式使用优先级队列。

# nsstring - 如何在 NSString 中获取数字（同时包含数字和字符）？

> ID：11989187
> 
> 赞同：0
> 
> 时间：2012-08-16T14:19:40.033
> 
> 标签：nsstring, numbers, character

我将数据从站点提取到 NSString 中，如下所示：

```
 <td><font color=#ffffff>35</td>
        <td><font color=#ffffff>0</td>
        <td><font color=#ffffff>0</td>
        <td><font color=#ffffff>0</td>
        <td><font color=#ffffff>1</td>
        <td><font color=#ffffff>2</td>
        <td><font color=#ffffff>0</td>
        <td><font color=#ffffff>1</td>
        <td><font color=#ffffff>16</td>
        <td><font color=#ffffff>45.2</td>
        <td><font color=#ffffff>3.153</td> 
```

我只想用数字转换成 NSArray。

我已经尝试了许多分类和方法..floatValue、componentsSeparatedByString、substringWithRange、..所有看起来都很糟糕而且效率低下。有没有解决这个问题的基本方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:09:15.157

解决此问题的最佳通用方法是使用正则表达式。正则表达式

`-?[0-9]*\.?[0-9]*`

匹配一个可选的负号，后跟一些数字，后跟一个可选的小数点，可选地再跟一些数字。请查看[http://www.regular-expressions.info/floatingpoint.html](http://www.regular-expressions.info/floatingpoint.html)，了解如何将数字与正则表达式进行最佳匹配。我在这里给出的正则表达式比该页面上显示的任何正则表达式都简单，但它的健壮性稍差。

要匹配 Objective-C 中的正则表达式，可以使用 NSRegularExpression。它有一个名为 enumerateMatchesInString 的函数，每次在字符串中获得匹配时都会调用一个代码块。这是一个如何使用它来构建 NSNumbers 数组的示例：

```
NSString *str = @"<td><font color=#ffffff>35</td>\
<td><font color=#ffffff>0</td>\
<td><font color=#ffffff>0</td>\
<td><font color=#ffffff>0</td>\
<td><font color=#ffffff>1</td>\
<td><font color=#ffffff>2</td>\
<td><font color=#ffffff>0</td>\
<td><font color=#ffffff>1</td>\
<td><font color=#ffffff>16</td>\
<td><font color=#ffffff>45.2</td>\
<td><font color=#ffffff>3.153</td>";
NSMutableArray *numbers = [NSMutableArray new];
NSNumberFormatter *formatter = [NSNumberFormatter new];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"-?[0-9]*\\.?[0-9]*" options:NSRegularExpressionAllowCommentsAndWhitespace error:nil];
[regex enumerateMatchesInString:str options:0 range:NSMakeRange(0, [str length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop){
    NSString *substr = [str substringWithRange:[match range]];
    NSNumber *number = [formatter numberFromString:substr];
    if (number) {
        [numbers addObject:number];
    }
}];
NSLog(@"ARRAY: %@", numbers); 
```

# matlab - 有没有办法在没有 Java 支持的情况下在 Matlab 上通过 TCPIP 进行通信

> ID：11989190
> 
> 赞同：0
> 
> 时间：2012-08-16T14:19:49.810
> 
> 标签：matlab, tcp

我在 Monkeylogic（matlab 的扩展）中工作，但它需要没有 java 支持才能获得更好的时间分辨率。我还需要通过以太网与另一个 comp 通信，但 matlab 中的 tcpip 命令需要 java 支持。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:01:09.577

如果您可以使用 C/C++，您可以创建一个客户端/服务器套接字类并将其编译成 mex 文件并使用这些文件与 MatLab 来回对话，但这可能并不比 Java 好多少。

# php - Facebook 在某些帖子上获取错误的缩略图

> ID：11989194
> 
> 赞同：1
> 
> 时间：2012-08-16T14:20:06.663
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph

我们有一个带有一些图片的新站点，我们使用调度程序应用程序在 Facebook 页面上分享新帖子。一切都很好，除了某些帖子的缩略图不正确，例如这篇帖子的缩略图错误：[Quidditch Practice](http://www.moodfactory.net/cuteness/785-quidditch-practice/)

您可以在 Facebook 页面上看到：[我们的 FB 页面](http://www.facebook.com/pages/When-you-just-say-k-or-lol-I-close-the-convo/462924665001)

如果您查看源代码，您会看到 og:image 标记始终被填写，并带有正确的图像 URL。我已经修改了代码，这个 og:image 标签抓取了较小的 150x150 版本的图像。我希望 Facebook 无法随机抓取更大的图像，但这不是解决方案，仍然得到错误的缩略图。

我现在没有想法，因为 Facebook 调试器工具总是用正确的缩略图显示这篇文章，所以我真的不知道出了什么问题......

调度程序应用程序也使用正确的缩略图获取此帖子！

你有什么主意吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:29:03.397

服务器正在缓存您以前的图像，将其表示为实时图像。给它一些时间在服务器之间传播。

# php - 在 PHP 中的文本中搜索代码

> ID：11989195
> 
> 赞同：0
> 
> 时间：2012-08-16T14:20:14.127
> 
> 标签：php, regex, search, full-text-search

我想在文本中找到“代码”，这些代码可以包含字母和数字，并且可以有不同的长度。文本可能如下所示：

```
This is a example text, it contains different codes like this one 8de96217e0fd4c61a8aa7e70b3eb68 or that one a7ac356448437db693b5ed6125348. 
```

如何以正确的顺序（从第一个到最后一个）找到并回显它们。我认为 prey_match() 有一种方法，但我不知道如何制作正则表达式。附加信息：代码都大约 30 个字符长，只包含小写字母和数字。

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:24:15.473

```
preg_match_all("/[a-z0-9]{25,}/", $text, $matches);
print_r($matches); 
```

简单但应该适用于您的情况。

输出：

```
Array
(
    [0] => Array
        (
            [0] => 8de96217e0fd4c61a8aa7e70b3eb68
            [1] => a7ac356448437db693b5ed6125348
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:28:05.160

您可以使用以下代码：

```
$string = "This is a example text, it contains different codes like this one 8de96217e0fd4c61a8aa7e70b3eb68 or that one a7ac356448437db693b5ed6125348."
preg_match_all("/[0-9a-z]{30,}/", $string, $matches) 
```

where`$matches`是一个包含所有匹配项的数组。如果您愿意，可以将 {30,} 调整为更高或更低的数字。这只是连续字符的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:24:16.067

基本上，

```
$words = explode($text);
foreach($words as $word)
{
  if(strlen($word)==30)
    echo $word;
} 
```

如果你想消除像 #+$*... 这样的字母，你应该使用正则表达式

编辑：Forlan07 的答案显然更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:28:27.830

如果您的要求是“哈希”*同时包含*字母和数字，您可以尝试类似的操作：

```
$string = "This is a example text, it contains different codes like this one 8de96217e0fd4c61a8aa7e70b3eb68 or that one a7ac356448437db693b5ed6125348.";

$words = explode(" ", $string);
$hashes = array();

foreach ($words as $currWord)
{
    $hasLetter = false;
    $hasNumber = false;

    for ($index = 0; $index < strlen($currWord); $index++)
    {
        if (ctype_alpha($string[$index]))
            $hasLetter = true;
        else
            $hasNumber = true;
    }

    if ($hasLetter && $hasNumber)
        $hashes[] = $currWord;
} 
```

# windows - Perl system() 调用失败，返回码 65280

> ID：11989196
> 
> 赞同：4
> 
> 时间：2012-08-16T14:20:14.357
> 
> 标签：windows, perl, clearcase, cleartool

我在下面运行 perl 代码。

```
$retCode = ClearCase($cmd); 
```

可以正常工作，但是`65280`当我运行它时它会返回：

```
$retCode = ClearCase($logcmd); 
```

我在 XP 和 Windows 2003 服务器上尝试过，结果相同，都使用 ActiveState Perl v5.14.2。

这段代码在 2 年前在其他地方工作。

```
 $g_HPPC_DEV_DRIVE =  "M";
  $g_HPPC_DEV_VIEW = "bldforge_AOMS_DEV";
  $g_logfile = "logfile.txt";

  $cmd = "startview $g_HPPC_DEV_VIEW";
  $logcmd = $cmd . " >> $g_logfile 2>>&1";

  $targetDir = $g_HPPC_DEV_DRIVE . ":\\" . $g_HPPC_DEV_VIEW;
  print "\$targetDir = $targetDir\n"; 
  print "Starting view .......\n"; 
  #$retCode = system("cleartool startview bldforge_AOMS_DEV >> logfile.txt");
  #$retCode = `cleartool startview bldforge_AOMS_DEV`;

  $retCode = ClearCase($logcmd);
  #$retCode = ClearCase($cmd);

sub ClearCase
{
  my $retCode = 0;
  my $args = $_[0];

  my $cmd = "cleartool " . $args;
  $retCode = Execute($cmd);

  return $retCode;

}

sub Execute
{
  my $retCode = 0;
  my $cmd = $_[0];

  if ($g_HPPC_BUILD_SIMULATION ne "Y")
  {

     print("Execute() Running...:   $cmd\n");     
     $retCode = system($cmd);
     #$retOut = `$cmd`;     
     #$retCode = $?;
     #print("Command execute output: $retOut\n");
  }
  else
  {
     print("Execute() *** SIMULATION:   $cmd\n");     
  }

  print("Execute() retCode = $retCode, $cmd\n");

  return $retCode;
} 
```

这个 65280 退出代码是什么意思？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T17:18:52.237

请记住，如[perldoc -f system](http://perldoc.perl.org/functions/system.html)`system`中所述， “ ...的返回值*是等待调用返回的程序的退出状态。要获得实际的退出值，请右移 8...* ”。将 65280 移动 8 得到 255。

但不幸的是，这也不是很有帮助，因为据我所知，每个可能的`cleartool`退出代码的确切含​​义都没有记录。[我能找到的最接近的是cleartool 文档](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/cleartool.htm)中的这个链接，其中它指出，“*单命令模式的退出状态取决于命令是成功（零退出状态）还是生成错误消息（非零退出状态）。* ”

所以你有它; a 255 是一个非零退出状态，表示错误情况。从好的方面来说，它可能会生成一条您没有看到的错误消息。

作为一种故障排除技术，由于您已经在打印`$cmd`，因此从命令行调用`cleartool`您的程序生成的相同命令。如果你得到相同的结果，那么问题就变成了一个`cleartool`问题而不是 Perl 问题。幸运的是，错误条件会生成一条您可以实际看到的错误消息，而不仅仅是退出代码。

另一方面，如果您得到正确的行为，请开始查看 Perl 运行时环境和命令行环境之间的不同之处；权限、环境变量、路径、工作目录等

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T17:53:09.100

使用 cleartool 时，最好确保使用`ccperl`（[现在称为`ratlperl`](http://www-01.ibm.com/support/docview.wss?uid=swg21245227)）与 ClearCase 一起打包的 perl，而不是[最新的 Active Perl](http://www.activestate.com/activeperl)（[实际上是 5.14.2](http://www.activestate.com/activeperl/downloads)）。

因此，不要默认启动你的 perl 脚本，而是选择你的第一个`perl.exe`可用的脚本`%PATH%`，尝试[使用 ClearCase 中包含的 perl](http://www-01.ibm.com/support/docview.wss?uid=swg21245227)调用它：

*   `ratlperl`: 在`C:\Program Files\Rational\Common`。
*   或遗产`ccperl`：在`C:\Program Files\Rational\ClearCase\bin`.

并查看错误是否仍然存在。

根本原因是一个`PATH`问题：有几个`perl`可用：

*   来自 Rational ClearCase
*   来自 Active Perl 的那个

通过确保`PATH`唯一的参考`perl`（ClearCase 附带的），脚本可以成功启动。

# c# - 从控制器加载数组值：MVC WInforms

> ID：11989197
> 
> 赞同：0
> 
> 时间：2012-08-16T14:20:18.937
> 
> 标签：c#, xml, winforms, model-view-controller

我正在研究[这个网站上的 MVC Pattern Winforms 示例项目](http://www.codeproject.com/Articles/383153/The-Model-View-Controller-MVC-Pattern-with-Csharp)

程序.cs

```
static void Main()
        {

            UserView view = new UserView();
            view.Visible = false;

            UserController controller =  new UserController(view, listLoad());
            controller.LoadView();
            view.ShowDialog();
        }

 private static IList listLoad()
        {
            var users = new ArrayList();
            users.Add(new User("Vladimir", "Putin", "122", "Government of Russia", User.SexOfPerson.Male));

            return users;
        } 
```

![在此处输入图像描述](../Images/c1a97cb3e3a4c894e91d6d9836d18145.png)

```
 public  void SaveXML()
        {
            XmlSerializer serializer = new XmlSerializer(_users.GetType());

            using (FileStream fileStream = new FileStream(@"C:\test\Users.xml", FileMode.Create))
            {
                serializer.Serialize(fileStream, _users);
            }
        } 
```

上面的代码有什么问题？

*问题 1*：如何从控制器添加用户值而不是从 program.cs 文件中加载`IList users = new ArrayList();`？

*问题 2*：我想将列表的所有行保存到 XML 文件中，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:45:23.507

当您说**从控制器添加用户值时**，您到底是什么意思？你能不能在控制器上没有一个名为“AddUsers”的方法来做到这一点？我很感激您必须阻止 IList _users 只读才能这样做，但是...

至于写入 XML 文件，我想说你最好的方法是 XML 序列化。为此，您可能希望在控制器中执行以下操作：

```
XmlSerializer serializer = new XmlSerializer(_users.GetType());            

using (FileStream fileStream = new FileStream("Users.xml", FileMode.Create))
{
    serializer.Serialize(fileStream, _users);
} 
```

# servicestack - ServiceStack 版本兼容性

> ID：11989198
> 
> 赞同：1
> 
> 时间：2012-08-16T14:20:27.383
> 
> 标签：servicestack

我在 ServiceStack.Text 中看到了很多我想升级的错误修复，但此时我无法升级 ServiceStack。

ServiceStack.Text.dll 版本 3.9.4.0 是否与 ServiceStack.dll 3.6.9 兼容。*

我找不到任何文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:52:13.507

我们努力避免进行任何向后不兼容的更改，但尚未对旧版和新版 dll 配置进行测试。

[ServiceStack](http://www.servicestack.net/)版本在所有不同的组件上保持相同的版本号，并且旨在相互配合，并且应该同时以锁步方式部署在一起。

# matlab - Matlab：获取变量的值

> ID：11989200
> 
> 赞同：-3
> 
> 时间：2012-08-16T14:20:33.763
> 
> 标签：matlab

> **可能重复：**
> [matlab获取char的值](https://stackoverflow.com/questions/11952267/matlab-get-the-value-of-char)

从 Matlab 命令，y 的值为：

```
y =

            toto
            titi 
```

在变量工作区中，值为 <1x49 char> 我需要获取 toto 和我尝试过的titi `y{1} and y{2}`，但这不起作用，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:41:32.457

你有一个字符数组，也很不方便。您可以通过执行以更易于管理的形式将此数组转换为

```
a = cellstr(a);
a = a(~cellfun(@isempty, a));
a = cellfun(@(x)strtrim(x),a,'uni',false); 
```

然后你可以参考`toto`and `titi`by

```
>> b = a{1}
b = 
toto

>> c = a{2}
c = 
titi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:31:10.247

y{1} 和 y{2} 仅在 y 是元胞数组时才有效。如果 y 是一个数组，那么您需要像 y(1) 和 y(2) 一样访问它。如果您键入 whos('y')，它将为您提供有关变量的信息。

# javascript - 将 jquery .position() 转换为谷歌地图 latlng

> ID：11989204
> 
> 赞同：0
> 
> 时间：2012-08-16T14:20:41.250
> 
> 标签：javascript, jquery, google-maps, jquery-plugins

我有一个有点有趣的问题，我很难弄清楚。我正在从地图外部实现一个可拖动的 div，并希望将其拖到地图上。我已经触发了事件并抓住了下降的位置，但现在我需要将其翻译成地图可以理解的东西。

有没有办法将 .position() 返回的值转换为谷歌地图可以理解的纬度或点？我一直在搞乱地图投影，但似乎无法让它相对于地图上的视口工作。朝着正确方向的任何一点都会很棒。

```
$('#map').droppable({
        drop: function(e, ui) {
            console.log(e);
            console.log(ui);
            var rawMouseLocation = $('#map').mapPlugin('mouseLocation', ui.position);

            mouseLocation = rawMouseLocation.toString().replace(/[()]/g,'')
            var field = $(ui.draggable[0]).data('fieldID');
            var iconPath = $(ui.draggable[0]).find('img').attr('src');

            $('.'+field).val(mouseLocation).removeClass('default-text');
            var layerName = $('#map').mapPlugin('addNewFieldLayer',field, rawMouseLocation, {
                "iconPath":iconPath, 
                'onDragEnd':self.updateField
                });
            newLayers.push(layerName); 
            $(ui.draggable).draggable( 'disable' );
        }
    }); 
```

在“mouseLocation”函数内部，我需要一种方法将该位置转换为地图坐标。我什至不确定这是可能的，但任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:24:38.177

我能够想出一个使用地图叠加视图的解决方案。

```
 // bunch of stuff to get an overlay set up to convert a pixel location to a lat/long
            MyOverlay.prototype = new google.maps.OverlayView();
            MyOverlay.prototype.onAdd = function() { }
            MyOverlay.prototype.onRemove = function() { }
            MyOverlay.prototype.draw = function() { }
            function MyOverlay(map) { this.setMap(map); }

            overlay = new MyOverlay(aMap);

            google.maps.event.addListener(aMap, 'idle', function() { 
                // Get projection
                projection = overlay.getProjection();
            }) 
```

然后在我的 mouseLocation 函数中，我这样做：

```
 // need to convert mouse location into a lat/long point
         var point = new google.maps.Point(eventPosition.pageX, eventPosition.pageY);
            var latlng= projection.fromContainerPixelToLatLng(point);
            return latlng; 
```

其中有鼠标位置的latlng！谢谢！@Vesliq

# mysql - 将 MySQL 列从一个表复制到另一个表

> ID：11989211
> 
> 赞同：0
> 
> 时间：2012-08-16T14:20:56.133
> 
> 标签：mysql, phpmyadmin

我想在 phpmyadmin 中将许多行从一个表复制到另一个表。我要复制的表是`profile`表。`user`我要复制到的表已经存在，但列不存在。我正在 phpmyadmin 的 SQL 选项卡中尝试以下命令。

```
INSERT INTO user 
   (profileImage, 
   skypeName, 
   facebookProfile, 
   twitterProfile, 
   reputation, 
   genderPreference, 
   agePreference, 
   fluentLanguage, 
   desiredLanguage) 

(SELECT profileImage, skypeName, facebookProfile, twitterProfile, reputation, genderPreference, agePreference, fluentLanguage, desiredLanguage FROM profile) 
```

出于某种原因，这不适合我。我收到一个错误：

`#1054 - Unknown column 'profileImage' in 'field list'`

`profileImage`存在于`profile`表中，即它是我的字段之一的名称

有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:25:25.170

如果错误是`#1054 - Unknown column 'proileImage' in 'field list'`，那么简单地说，该列在您的个人资料或用户表中的任何一个（或两者）*中都不存在。*

只需运行查询的选择部分，即。 `SELECT profileImage, skypeName, facebookProfile, twitterProfile, reputation, genderPreference, agePreference, fluentLanguage, desiredLanguage FROM profile`

那样有用吗？

如果是这样，您确定`profileImage`存在于用户表中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T08:04:05.833

您可以在 phpmyadmin 中将表 1 的结构复制到表 2，然后可以运行查询将某些行从表 1 复制到表 2。

# android - Android Developers MyFirstApp - “菜单无法解析或不是字段”

> ID：11989214
> 
> 赞同：7
> 
> 时间：2012-08-16T14:20:59.257
> 
> 标签：android, eclipse

我正在尝试使用Eclipse 中[的 android 提供的教程构建我的第一个应用程序。](http://developer.android.com/training/basics/firstapp/building-ui.html)

我已经完成了一切，但我收到错误消息...“菜单无法解析或不是字段”。该教程没有提到任何关于菜单的内容，我确信我没有对它做任何事情。它抱怨的那一行我已经在评论中标记了。

```
package com.example.my.first.app;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);        <!--this line-->
    return true;
}
} 
```

这是教程要求我编辑的主要活动页面，如下所示...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">
<EditText android:id="@+id/edit_message"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send" />
</LinearLayout> 
```

离开我在其他问题上找到的建议，我试图点击它并包括它所要求的内容，即“在'R'类型中创建字段'菜单'或“在'R'类型中创建常量'菜单' . 我已经分别完成了，每次我保存项目以便重建时，它都会自动删除包含的行。

对于该领域，这已经完成。- 公共静态对象菜单；对于常数，这是完成的。- 公共静态最终字符串菜单 = null；

所以我现在有点卡住了，希望得到一些急需的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T14:25:52.400

onCreateOptionsMenu 方法指的是必须位于 /res/menu 文件夹中并以 XML 形式实现的菜单。看起来像这样：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100" />
</menu> 
```

您可以复制/粘贴此代码，将其另存为 activity_main.xml 在您的 /res/menu 文件夹中（如果没有，请创建一个）或删除整个方法

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);        <!--this line-->
    return true;
} 
```

这样做是在您点击设备上的菜单按钮时打开一个菜单，如果您删除该方法，您将不会有这样的菜单。如果需要，您仍然可以创建一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T17:59:35.410

检查并查看您是否正在导入 android.R。如果是这样，请删除该行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:23:11.153

确保将 menu.xml 文件放在 res/menu/ 目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-31T08:44:01.073

使用 Eclipse IDE--->Package Explore in Eclipse > res > menu > main.xml 或 main_activity_actions 文件...检查其名称.. 并放入语句 inflater.inflate(R.menu.main, menu); 您在 inflater 语句中使用的名称无法解析或者是您的应用程序中的字段.. 所以首先确认它然后确认菜单目录中的正确文件名是什么，然后在您的语句中使用它。

# c# - Windows 货币符号

> ID：11989215
> 
> 赞同：1
> 
> 时间：2012-08-16T14:20:59.050
> 
> 标签：c#, .net, windows-7, localization

我想获取 Windows 使用的货币符号；可以使用控制面板中的*区域和语言选项查看和修改此符号。*

`RegionInfo.CurrentRegion`表示当前线程使用的语言的区域信息；`RegionInfo.CurrentRegion.CurrencySymbol`因此不一定与操作系统用户选择的货币符号相匹配。

如果我只修改*Region and Language* > *Advanced settings...* > *Currency*中的货币符号，我希望能够从 C# 程序中访问该符号。如何才能做到这一点？

感谢您阅读我的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:56:46.153

`RegionInfo`不反映用户更改的设置。我想像

```
CultureInfo.CurrentCulture.NumberFormat.CurrencySymbol 
```

将工作。

**添加**（在接受答案后）：

我测试了一下，似乎在某些情况下`RegionInfo` **确实**反映了用户设置。尽管[规范](http://msdn.microsoft.com/en-us/library/System.Globalization.RegionInfo.aspx)说：*与 CultureInfo 相比，RegionInfo 不代表用户的偏好，也不依赖于用户的语言或文化。*

在我的 Windows 7 电脑上，我得到了这个结果：`RegionInfo`确实反映了用户设置，即使我构造了一个`new`实例`RegionInfo`（而不是使用`CurrentRegion`getter）。所以现在我们很困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:24:19.250

它可以在[RegionInfo.CurrencySymbol中找到](http://msdn.microsoft.com/en-us/library/system.globalization.regioninfo.currencysymbol%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:28:04.750

你确定你最初的假设是正确的吗？当我在“区域和语言 > 其他设置 > 货币 > 货币符号”下更改/编辑货币符号时

根据以下变化：

```
RegionInfo.CurrentRegion.CurrencySymbol 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-04T18:05:38.133

这是我今天学到的一些陷阱 - 我的代码验证我的发现如下。我将系统设置为西班牙语 - 多米尼加共和国，并将货币符号从“RD$”更改为“$”。然后我将我的文化/UI 文化设置为 es-DO 而不是 en-US。

*   使用`number.ToString("C2")`不遵循用户自定义设置。因此，如果您将`System.Globalization.CultureInfo.CurrentCulture`/设置`CurrentUICulture`为 es-DO 和 do `1.00M.ToString("C2")`，它将返回 RD$1.00。

*   要让它实际使用用户自定义设置，您必须有一个`var info = new CultureInfo("es-DO")`变量，然后`string.Format(info, "{0:C2}", 1.00M)`根据上面的更改使用来获得预期的 1.00 美元。

*   您不能使用`string.Format(CultureInfo.CurrentCulture, "{0:C2}", 1.00M)`，因为它不会返回用户自定义 - 在这种情况下，它将返回 RD$1.00。

我认为这很愚蠢，但如果有人知道这种行为背后的真正原因，请分享，因为我很好奇。

这是复制的代码：

```
var esdo = new CultureInfo("en-US");
{en-US}
esdo = new CultureInfo("es-DO");
{es-DO}
var resdo = new RegionInfo("es-DO");
{es-DO}
        CurrencyEnglishName: "Dominican Peso"
        CurrencyNativeName: "Peso"
        CurrencySymbol: "$"
        DisplayName: "Dominican Republic"
        EnglishName: "Dominican Republic"
        GeoId: 65
        IsMetric: true
        ISOCurrencySymbol: "DOP"
        Name: "es-DO"
        NativeName: "República Dominicana"
        ThreeLetterISORegionName: "DOM"
        ThreeLetterWindowsRegionName: "DOM"
        TwoLetterISORegionName: "DO"
esdo.NumberFormat
{System.Globalization.NumberFormatInfo}
        CurrencyDecimalDigits: 2
        CurrencyDecimalSeparator: "."
        CurrencyGroupSeparator: ","
        CurrencyGroupSizes: {int[1]}
        CurrencyNegativePattern: 1
        CurrencyPositivePattern: 0
        CurrencySymbol: "$"
        DigitSubstitution: None
        IsReadOnly: false
        NaNSymbol: "NeuN"
        NativeDigits: {string[10]}
        NegativeInfinitySymbol: "-Infinito"
        NegativeSign: "-"
        NumberDecimalDigits: 2
        NumberDecimalSeparator: "."
        NumberGroupSeparator: ","
        NumberGroupSizes: {int[1]}
        NumberNegativePattern: 1
        PercentDecimalDigits: 2
        PercentDecimalSeparator: "."
        PercentGroupSeparator: ","
        PercentGroupSizes: {int[1]}
        PercentNegativePattern: 1
        PercentPositivePattern: 1
        PercentSymbol: "%"
        PerMilleSymbol: "‰"
        PositiveInfinitySymbol: "Infinito"
        PositiveSign: "+"
var dsa = 1.00M;
string.Format(esdo,"{0:C2}",dsa)
"$1.00"
dsa.ToString("C2")
"RD$1.00"
string.Format(System.Globalization.CultureInfo.CurrentCulture,"{0:C2}",dsa)
"RD$1.00"
string.Format(System.Globalization.CultureInfo.CurrentUICulture,"{0:C2}",dsa)
"RD$1.00"
System.Globalization.CultureInfo.CurrentUICulture
{es-DO}
string.Format(esdo,"{0:C2}",dsa)
"$1.00" 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-01-12T11:57:59.027

```
//    Do something like that maybe
public static string getSeparator()
        {
            string output = string.Empty;
            try
            {
                RegistryKey reg = Registry.CurrentUser.OpenSubKey("Control Panel").OpenSubKey("International");
                output = reg.GetValue(EnumClass.String.sList.ToString(), output).ToString();

                reg.Dispose();
            }`enter code here`
            catch (Exception ie)
            {
                // catch error
            }
            return output;
        } 
```

# .htaccess - htaccess 重定向链接

> ID：11989217
> 
> 赞同：0
> 
> 时间：2012-08-16T14:20:59.913
> 
> 标签：.htaccess, redirect

我试过谷歌，很多教程，但在重定向一些链接时仍然存在一些问题。也许我的实际 htaccess 会产生一些冲突？

例如试过

```
RewriteCond %{REQUEST_URI} ^/kanaly_rss
RewriteRule rss\.php\?kat=(.*) /rss/$1 [R,L] 
```

任何其他组合。

我想重定向链接：kanaly_rss/rss.php?kat=XXX

至

RSS/XXX

我的.htaccess：

选项 +FollowSymLinks +ExecCGI

```
<IfModule mod_rewrite.c>
 RewriteEngine On
  RewriteBase /

  RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
  RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

  # we skip all files with .something
  #RewriteCond %{REQUEST_URI} \..+$
  #RewriteCond %{REQUEST_URI} !\.html$
  #RewriteRule .* - [L]

  # redirect old links
  RewriteCond %{REQUEST_URI} !redirected_oldlink
  RewriteCond %{QUERY_STRING} co=
  RewriteRule (.*) /redirected_oldlink.php?%{QUERY_STRING} [L]

  RewriteCond %{THE_REQUEST} ^.*\/index\.php/?\ HTTP/
  RewriteRule ^(.*)index\.php/?$ "/$1" [R=301,L]

  # we check if the .html version is here (caching)
  RewriteRule ^$ index.html [QSA]
  RewriteRule ^([^.]+)$ $1.html [QSA]
  RewriteCond %{REQUEST_FILENAME} !-f

  # no, so we redirect to our front web controller
  RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:25:20.247

尝试添加这些牵引线：

```
RewriteCond %{QUERY_STRING} ^(.*&)?kat=([^$]*)&?
RewriteRule ^kanaly_rss/rss.php /rss/%2? [L,R=301] 
```

# java - 将日期和时区从 GAE 服务器发送到 GWT 客户端

> ID：11989219
> 
> 赞同：6
> 
> 时间：2012-08-16T14:21:00.490
> 
> 标签：java, google-app-engine, gwt, timezone, gwt-rpc

好的，伙计们，我已经解决这个问题大约 2 周了，现在尝试了我能想到的一切，并在这里查看了大量的答案，感觉他们会回答这个问题，但我就是不知道我是怎么想的做我想做的事，这让我绝对疯了！似乎没有人在任何地方都有答案，到处都有一半的答案，但似乎没有人真正做我需要做的事情，肯定有人以前解决过这个问题！请原谅这个非常长的问题，但正确地提出问题很重要，这样答案才能真正满足需求！:D

另外，如果您可能提供任何没有考虑到我的数据存储区/服务器是 Google App Engine (GAE)，并且我的客户端是用 Google Web Toolkit (GWT) 编写的任何答案，请不要再阅读任何内容是用 Java 编写的，我对 Python 或 MySQL 或 PHP 或类似的东西一无所知

最后，如果有人知道一个更好的地方来解决这样的问题，请让我知道，因为我不断提出这样的问题并且不知道如何在这里找到解决方案，或者花费数小时搜索谷歌对于已经设法弄清楚的其他人。我也不明白如何从 JavaDocs 中找出任何东西 - 抱歉，但在有人向我解释之前，我只是不明白

我在服务器上存储了一个日期时间（显然是 UTC）我还在服务器上存储了一个 TimeZone，用于存储为字符串（例如`"America/New_York"`）的每个企业主。此字符串是通过`java.util.TimeZone.getAvailableIDs()`在服务器上使用并让企业主为其业务选择相关时区来获得的（默认情况下，`"Europe/London"`如果他们不选择任何内容 - 无需挂断该位）我需要将任何日期时间传回在将来的某个时间到客户端 PC，忽略其 PC 上的本地时区，因为日期时间需要根据企业所有者的时区显示。

例如，企业主是伦敦的一名理发师，他们有一个在线预约时间表，可供他们的任何潜在客户查看。其中一位客户（也在伦敦）想要预约，在 9 月 3 日星期一 BST 上午 9 点看到一个空档并进行预约。

然后将其作为 UTC 时间（实际上是 0800，因为 BST 是 UTC+1）存储在 Datastore 中，当然，企业主已经选择`"Europe/London"`了他们的时区。到目前为止一切都很好。

现在，在未来的某个时间点，客户在纽约参加商务会议，并意识到他们在下周有一个在伦敦理发的预约，并且他们想将它提前一周，因此他们尝试查看预约（在美发师预约簿中），但他们不想将其视为纽约时间凌晨 4 点，而是希望将其视为英国时间上午 9 点。

所以我的问题是，当客户在 9 月 3 日点击查看约会时，服务器可以发回 UTC 日期时间 0800 和`java.util.TimeZone`ID 字符串`"Europe/London"`

但是因为在客户端我只能使用

```
com.google.gwt.i18n.client.TimeZone 
```

它不允许我使用该功能

```
TimeZone bizTimeZone=TimeZone.getTimeZone("Europe/London")
(which works for `java.util.TimeZone`) 
```

因为它会导致错误

```
"The method getTimeZone(String) is undefined for the type TimeZone" 
```

它建议将其更改为

```
com.google.gwt.i18n.client.TimeZone.createTimeZone("Europe/London") 
```

但是这个版本需要一个 GWT `com.google.gwt.i18n.client.TimeZoneConstants`“对象”（示例显示在此消息的末尾），而不是`java.util.TimeZone.createTimeZone()`将接受的简单字符串。

我可以使用以下方法创建它：

```
final TimeZoneConstants constTz = GWT.create(TimeZoneConstants.class);
final TimeZone timeZoneCali = TimeZone.createTimeZone(constTz.europeLondon()); 
```

但是当我开始`"Europe/London"`和/或我不知道如何将此对象存储到 App Engine 数据库中然后稍后检索它时，我不知道如何执行此操作。

顺便说一句，在注释文本中，我还尝试使用以下几行：

```
//Calendar tmad = new GregorianCalendar(TimeZone.getTimeZone("Europe/London"));
//Calendar cal = Calendar.getInstance(someTimeZone);
//DateFormat df1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
//df1.setTimeZone(TimeZone.getTimeZone("Europe/London"));
//final TimeZone timeZoneClient = TimeZone.createTimeZone("Europe/London");
//dtf.format(date,timeZoneClient) 
```

必须有一个标准的方法来做这个肯定，我真的不能成为第一个必须解决这个问题的人！

> constTz.europeLondon()={"转换": [19394, 60, 24770, 0, 28130, 60, 33506, 0, 36866, 60, 42242, 0, 45602, 60, 50978, 0, 54506, 60, 59714, 0, 63242, 60, 68450, 0, 71978, 60, 77354, 0, 80714, 60, 86090, 0, 89450, 60, 94826, 0, 98521, 60, 103561, 0, 107257, 60, 1122 115993, 60, 121033, 0, 124729, 60, 129937, 0, 133633, 60, 138673, 0, 142369, 60, 147409, 0, 151105, 60, 156145, 0, 164781, 0,60, 159841, 0,60, 60, 173785, 0, 177313, 60, 182521, 0, 186217, 60, 191257, 0, 194953, 60, 199993, 0, 203689, 60, 208729, 0, 212425, 0, 60, 2176,25 226201, 0, 230065, 60, 235105, 0, 238801, 60, 243841, 0, 247537, 60, 252577, 0, 256273, 60, 261481, 0, 265009, 60, 7870217, 0,20, 265009, 60, 7870217, 0,20, 0, 282649, 60, 287689, 0, 291385, 60, 296425, 0, 300121, 60, 305329, 0, 308857, 60, 314065, 0, 317593, 60, 322801, 0,326329, 60, 331537, 0, 335233, 60, 340273, 0, 343969, 60, 349009, 0, 352705, 60, 357913, 0, 361441, 60, 366649, 0, 3708177, 0,60, 3708177, 0,60, 60, 384121, 0, 387817, 60, 392857, 0, 396553, 60, 401593, 0, 405289, 60, 410497, 0, 414025, 60, 419233, 0, 422761, 0, 60, 42796, 6, 3, 436705, 0, 440401, 60, 445441, 0, 449137, 60, 454345, 0, 457873, 60, 463081, 0, 466609, 60, 471817, 0, 475513, 60, 488553, 60, 488553, 60, 488553, 0, 0, 48 0, 492985, 60, 498025, 0, 501721, 60, 506929, 0, 510457, 60, 515665, 0, 519193, 60, 524401, 0, 528097, 60, 533137, 0, 53687, 0, 53687, 33, 4, 545569, 60, 550777, 0, 554305, 60, 559513, 0, 563041, 60, 568249, 0, 571777, 60, 576985, 0, 580681, 60, 585721, 0, 59445, 7, 0, 060 names": ["GMT", "Greenwich Mean Time", "BST", "British Summer Time"],“id”：“欧洲/伦敦”，“std_offset”：0}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:12:58.023

我对 v2.4 有类似的问题。

我认为莱利·拉克是对的。

*TimeZone.createTimeZone("Asia/Tokyo")*在 GWT 2.4 中不起作用

但是，我发现我可以通过以下方式使用浏览器的默认设置来获取东京区域：

```
Date d = new Date();
TimeZone timezone = TimeZone.createTimeZone(d.getTimezoneOffset()); 
```

这确实是 Riley Lark 对你的建议，因为 europeLondon 有 "std_offset": 0 ...

> TimeZone timezone = TimeZone.createTimeZone(0);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:03:47.390

例如，您是否尝试过`TimeZone.createTimeZone("Europe/London");`？至少在较新版本的 GWT 中，此方法接受一大堆名称，显然是“从 CLDR 和 Olson 时区数据库 [原文如此]”准备的。该文档专门引用了您的用例：通过 json 传输时区。

查看[属性文件](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/i18n/client/constants/TimeZoneConstants.properties?r=3655)- 它似乎具有时区的所有标准名称。

如果这对您不起作用，您可以以分钟为单位传输时区的偏移量，然后使用`TimeZone.createTimeZone(offsetInMinutes)`.

# java - 继承和类型差异

> ID：11989220
> 
> 赞同：1
> 
> 时间：2012-08-16T14:21:01.500
> 
> 标签：java, inheritance

我有一个由轴子类型扩展的整体轴模型。问题是正在实现的抽象方法将是一个类中的日期和另一个类中的双精度。我能想出的唯一解决方案是使它们成为泛型并在实例化这些类时做出假设。有没有更优雅的解决方案？下面是一些示例代码来显示我正在尝试做的事情。

```
public class abstract axisModel {
 abstract double method();
}

public class priceAxisModel extend axisModel {
 public double method() {
  //do stuff
 }
}

public class dateAxisModel extend axisModel {
 public date method() {
  //do stuff
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:24:34.197

正如您所指出的，在这种情况下使用泛型将是一个很好的解决方案。例如：

```
public class abstract AxisModel<T> {
 abstract T method();
}

public class PriceAxisModel extend AxisModel<Double> {
 public Double method() {
  //do stuff
 }
}

public class DateAxisModel extend AxisModel<Date> {
 public Date method() {
  //do stuff
 }
} 
```

至于我，这段代码看起来很优雅。

# performance - 有人可以提供一个准备好的语句有利于提高效率的场景吗？

> ID：11989221
> 
> 赞同：0
> 
> 时间：2012-08-16T14:21:04.980
> 
> 标签：performance, prepared-statement

不适用于 sql 注入保护。我知道这种好处，但就编译部分和效率更高的部分而言，我找不到可以提高效率的*方案*。我希望在这里。含糊我知道，但除了这里我不知道在哪里问。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:35:57.850

场景很简单：事务处理。

正如 Edokan 所说，准备语句消除了编译 SQL 和创建执行计划的开销。在更复杂的查询中，这种开销是最小的。但是，如果您每秒运行 100 或 1000 个事务，那么这种开销可能会影响数据库的有效使用。

当然，查询计划可能不是最好的，尤其是当基础表的统计信息发生变化时。准备时的特征用于确定最佳查询计划。这些可能会随着时间而改变，不同的查询计划可能会变得更好。对于更复杂的查询，这更是一个问题。由于这些通常需要更长的时间才能运行，因此编译开销不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:52:42.177

可以很容易地列出准备好的语句的好处

1.  你摆脱了编译开销
2.  您无需准备执行计划
3.  由于没有声明，而只有参数需要通过线路传输，因此您获得了带宽。

如果您有一个语句要在很长一段时间内工作数百万次，那么所有这些项目对于效率都很重要。如果它很容易开发（如存储过程），这是一个双赢的局面，但是......

我曾经不得不使用“C with Embedded SQL”开发一个直接连接到 AS/400 系统的代码，您在 C 代码中编写 sql，将其提供给预处理器以输出可编译代码和活页夹文件，然后提供活页夹文件到 as/400 系统准备语句。都是因为他们拒绝安装 ODBC 支持他们的服务器。

编写和测试该代码很痛苦。它工作*得非常*缓慢，改变任何东西肯定会破坏系统。编写这样的代码**效率**不高。

效率取决于变量，这些变量取决于您的观点。

在我的示例中，AS/400 人员很高兴，因为他们通过不安装一些*cr.p*软件来保持系统**高效。**客户很高兴，因为他们强迫开发人员使用**低效**的方法编写代码的方法足够**有效，可以及时处理。**这对网络管理员来说很**有效**，因为只有很少的数据通过网络传输（甚至没有元数据）。这对开发人员来说**效率**非常低，因为它既费时又容易出错。但是对于同一开发人员来说，在简历上获得“看起来不错”的东西也是**有效的。**

 *******现在你可以看到了？*******

# javascript - 为什么 }!{ 在 JavaScript 控制台中导致 False？

> ID：11989226
> 
> 赞同：8
> 
> 时间：2012-08-16T14:21:20.250
> 
> 标签：javascript

如果你把`}!{`你的 JavaScript 控制台放在 Chrome 中，结果你会得到`false`.

为什么我们不会得到错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T14:26:03.710

这种行为的原因是因为 Chrome 将您输入到控制台的任何内容都用另一段代码包装起来。

它包装的代码（在撰写本文时）如下：

```
with ((window && window.console && window.console._commandLineAPI) || {}) {
    // Your code here.
} 
```

输入`}!{`关闭代码块大括号，并在最后创建一个新的（否定的）对象。

正如您在控制台中看到的那样`!{}`返回`false`。

* * *

我经历了相当长的调查过程来找到答案，我的原始评论保留在下面

**原答案：**

只是一个理论；我想在控制台中输入的代码在函数内部被调用

`function execUserCode() { code }`

你正在做的是创造

`function execUserCode() { }!{ }`

控制台正在返回最后一个结果，实际上是`!{ }`=`false`

* * *

**编辑：**

很多关于这可能是错误的评论。我同意。这只是一个理论。

我喜欢这类谜题，所以我对 Chromium 源进行了挖掘，这对我来说有点多，但我会留下一些指示，以防其他人有刺。

JS 控制台被称为“检查器”，可以在这里找到：

`chromium/src/third_party/WebKit/Source/WebCore/inspector/`

我一直在看，`inspector/front-end/ConsoleView.js`我想我发现了一些用户代码的执行位置。

```
evaluateUsingTextPrompt: function(expression, showResultOnly)
{
    this._appendCommand(expression, this.prompt.text, false, showResultOnly);
}, 
```

* * *

# 原因！

小脑电波。我在控制台中做了这个

```
> myEval = eval
> eval = function(str) { console.log(str); myEval(str) }
> }!{ 
```

结果：

```
with ((window && window.console && window.console._commandLineAPI) || {}) {
}!{
} 
```

我很接近，但现在我们有了答案:)

该代码`chromium/src/third_party/WebKit/Source/WebCore/inspector/InjectedScriptSource.js`目前在第 440 行左右生成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T14:42:03.980

只是一个猜测。如果脚本包含在 中`{}`并使用 执行`eval`，则会发生这种情况。

用户脚本： `"}!{"`

enclosed in `{}`: `"{}!{}"`

then `eval("{}!{}")` gives `false`

So I guess this is what happens in browser console.

# java - Servlet 结合来自两个不同请求和回复的数据？

> ID：11989229
> 
> 赞同：0
> 
> 时间：2012-08-16T14:21:25.213
> 
> 标签：java, ajax, jsp, servlets, asynchronous

我有一个 servlet，它获取一个 ID 作为参数并返回三个值。由于 servlet 代码很大，所以只提供必要的细节。

获取详细信息.jsp

```
Inputs : ID //as a query string
Returns: ID, average, count // As a JSON string 
```

从客户端我一个一个地发出两个异步 javascript 请求（在第一个请求之后紧接着第二个）具有不同的 ID。来自服务器的响应如下：

响应：

```
For ID1 : ID1, average1, count1
For ID2 : ID1, average2, count2 
```

对于 ID2，它给出正确的平均值和计数，但返回 ID1（第一个请求的 ID）。

当我在 getdetails1.jsp 中的 getdetails.jsp 中放入相同的代码并对每个 servlet 发出每个请求时，我得到了正确的结果。

回应：

```
For ID1 : ID1, average1, count1
For ID2 : ID2, average2, count2 
```

这可能是什么原因以及如何纠正这个问题？

编辑：getdetails.jsp 的代码：

```
<%!
String ID;
JsonObject details = new JsonObject();  //using Google JSON Lib
%>
<%
ID=request.getParameter("id");
details.addProperty("ID",ID);
...   //accessing corresponding average and count
details.addProperty("average",average);
details.addProperty("count",count);
out.println(details);
%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:24:20.170

我的猜测是您可能已经将请求参数值分配给 Servlet 实例变量。

只创建一个 servlet 实例，所有请求共享同一个实例。这导致了这种类型的国家腐败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:27:18.313

`The number of servlet instances created by a servlet will always be one.`

如果您已将请求参数分配给 servlet 实例，则可能会出现此问题。

如果不是这种情况，

分享一下id在servlet中的实现，供大家分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T15:32:10.507

问题是@thinksteep 建议的。JSP 代码被翻译并编译成一个 Servlet。使用 JSP 声明`<%! %>`会创建非线程安全的实例变量。您应该声明变量，以便通过从部分中删除它们并在`<%! %>`部分中声明它们来为每个请求创建新的变量`<% %>`。

# javascriptmvc - jmvc 3.2.2 - 控制器继承和窃取加载顺序

> ID：11989230
> 
> 赞同：0
> 
> 时间：2012-08-16T14:21:27.410
> 
> 标签：javascriptmvc

我在文件夹 [app]/main/create_parent/create_parent.js 中有一个基本控制器

定义为

```
 $.Controller('Impress.Main.CreateParent', 
```

我有几个扩展 CreateParent 的子控制器，例如 [app]/contact/create/create.js

定义为

```
 Impress.Main.CreateParent('Impress.Contact.Create', 
```

这一切都很好（大部分）未压缩，随机我得到错误说它找不到基本控制器......一旦压缩和打包，我一直收到错误说基本控制器没有定义。

由于窃取加载顺序问题，这是显而易见的。在我的主要 [app name].js 中，我有：

```
 steal('jquery')
       .then('./resources/jquery-ui', './resources/image_uploader')
       .then('jquery/controller/subscribe')
       .then(
    'impress/main/create_parent','impress/main/list_parent')
       .then(
          './impress.css', // application CSS file
          './models/models.js', // steals all your models
          'impress/contact/create',
       ... 
```

所以我先“偷”了基地吃的父母，然后“偷走了”其余的控制器……所以看来我做得对吗？即使我首先在我的contact/create/create.js 文件中窃取了basec 控制器，它仍然会抱怨。

再说一次，这一切在未压缩时在大多数负载上都可以正常工作，尽管我确实随机得到了错误，但一旦压缩它是一致的。我显然误解了steal的功能，因为我认为“then”语法是定义加载顺序？

谢谢汉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T13:49:53.897

我有一个类似的问题，这是由覆盖 string.split 函数引起的。

# android - 如何在Android中获取字符串值？

> ID：11989231
> 
> 赞同：-6
> 
> 时间：2012-08-16T14:21:27.847
> 
> 标签：android, string

目前我在Android中工作，我有一个类似于下面提到的结果的字符串供您参考，但我没有得到这个，请帮助我

```
String result ="error: not allowed | Native: XYZ ABC - Vodofone | Amount balance: 434" 
```

如何获得像“XYZ ABC - Vodofone”这样的原生价值

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:24:09.750

类的使用`split`方法`String`：

```
String result ="error: not allowed | Native: XYZ ABC - Vodofone | Amount balance: 434"
String[] results = result.split("|");
// results[0] = "error: not allowed "
// results[1] = "Native: XYZ ABC - Vodofone "
// results[2] = "Amount balance: 434 " 
```

注释中显示的结果条目现在放置在`String`数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:28:02.917

你可以这样做：

`result.substring(result.indexOf('|'), result.lastIndexOf('|'));`

或者`result.split("|");`

# .net - .net 4.0，iis 7.5 的温莎城堡

> ID：11989232
> 
> 赞同：0
> 
> 时间：2012-08-16T14:21:30.033
> 
> 标签：.net, dependency-injection, inversion-of-control, castle-windsor

在我的应用程序中，我使用了 .net 4.0、iis 7.0 和 Castle Windsor 旧版本。现在我将这个应用程序移动到新机器上，只需将 iis 7.0 更改为 7.5。

但是当我在新服务器上部署应用程序时，它无法正常工作，它给出了应用程序错误。

错误详情。

```
Error Message :The type name Platform.Data.VisualDao, Platform.Data could not be located    
Stack Trace :   at Castle.Windsor.Installer.DefaultComponentInstaller.ObtainType(String typeName)
   at Castle.Windsor.Installer.DefaultComponentInstaller.SetUpComponents(IConfiguration[] configurations, IWindsorContainer container)
   at Castle.Windsor.Installer.DefaultComponentInstaller.SetUp(IWindsorContainer container, IConfigurationStore store)
   at Castle.Windsor.WindsorContainer.RunInstaller()
   at Castle.Windsor.WindsorContainer..ctor(IConfigurationInterpreter interpreter)
   at Platform.Data.DaoFactory..cctor() in D:\DaoFactory.cs:line 21  
Base Exception : System.Configuration.ConfigurationErrorsException: The type name Platform.Data.VisualDao, Platform.Data could not be located
   at Castle.Windsor.Installer.DefaultComponentInstaller.ObtainType(String typeName)
   at Castle.Windsor.Installer.DefaultComponentInstaller.SetUpComponents(IConfiguration[] configurations, IWindsorContainer container)
   at Castle.Windsor.Installer.DefaultComponentInstaller.SetUp(IWindsorContainer container, IConfigurationStore store)
   at Castle.Windsor.WindsorContainer.RunInstaller()
   at Castle.Windsor.WindsorContainer..ctor(IConfigurationInterpreter interpreter)
   at Platform.Data.DaoFactory..cctor() in D:DaoFactory.cs:line 21 
```

代码：

```
internal class DaoFactory : IDaoFactory    
    {
        static  ILog _logger = LogManager.GetLogger("DaoFActory");
        private readonly static Dictionary<Type, object> _daoRegistry;

        static DaoFactory()
          {
            _logger.Debug("Starting cctor");  

                // TODO Implement this Dynamically                
                string daoConfigFile = ConfigurationManager.AppSettings["daoComponents"];
                _logger.Debug("Path"+daoConfigFile);

                _logger.Debug("Initilizing container");  
                IWindsorContainer container = new WindsorContainer(new XmlInterpreter(daoConfigFile));

                _logger.Debug("Initilized....Creating reg");  
                _daoRegistry = new Dictionary<Type, object>();

                _daoRegistry[typeof(IPMUserDao)] = container.Resolve("pmUserDao");
                _daoRegistry[typeof(IPMRoleDao)] = container.Resolve("pmRoleDao");
}
} 
```

初始化容器时出现异常：

IWindsorContainer 容器 = 新 WindsorContainer(new XmlInterpreter(daoConfigFile));

daoConfigfile 是我从中获取 Platform.data 的 xml 文件的路径

platform.data 在 bin 文件夹中可用。

请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:54:11.097

通常这是一个配置问题。这可能是一个简单的大小写问题或不正确的组件声明。

# python - 根据python中列表对象的属性交错两个对象列表

> ID：11989234
> 
> 赞同：0
> 
> 时间：2012-08-16T14:21:44.683
> 
> 标签：python, list

我有两个标记对象列表：

```
class Marker():
    def __init__(self,marker_number, marker_data):
        self.marker_number = marker_number
        self.marker_data = marker_data 
```

我想做的是：

```
>>> existing_markers = [Marker(marker_number=1, marker_data= 'a'),
                     Marker(marker_number=2, marker_data= 'b'),
                     Marker(marker_number=3, marker_data= 'c'),
                     Marker(marker_number=4, marker_data= 'd'),
                     Marker(marker_number=5, marker_data= 'e'),]

>>> new_markers = [  Marker(marker_number=1, marker_data= 'aa'),
                     Marker(marker_number=3, marker_data= 'bb'),
                     Marker(marker_number=5,  marker_data= 'cc'),]

>>> interlace_markers(existing_markers, new_markers)

[Marker(marker_number=1, marker_data= 'a'),
Marker(marker_number=2, marker_data= 'aa'),
Marker(marker_number=3, marker_data= 'b'),
Marker(marker_number=4, marker_data= 'c'),
Marker(marker_number=5, marker_data= 'bb'),
Marker(marker_number=6, marker_data= 'd'),
Marker(marker_number=7, marker_data= 'e'),
Marker(marker_number=8,  marker_data= 'cc')] 
```

因此，当我交错标记时，new_markers 列表中与原始标记列表具有相同编号的标记出现在原始标记之后，但编号会更新以保持编号序列。这是我目前的做法：

```
def interlace_markers(current_markers_list, new_markers_list):

    interlaced_markers = []
    #interlace the markers
    for existing_marker in current_markers_list:
        interlaced_markers.append(existing_marker)
        for new_marker in new_markers_list:
            if new_marker.marker_number== existing_marker.marker_number:
                interlaced_markers.append(new_marker)

    #reset the sequence
    sequence_index = 1
    for marker in interlaced_markers:
         marker.marker_number= sequence_index
         sequence_index += 1

    return interlaced_markers 
```

我这里有两个问题：

1.  什么是最pythonic的方式来做到这一点
2.  原始列表可能很大~10k，并且是从外部文件创建的，但新列表会很小~100-300 长，有没有比使用列表更有效的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:29:11.637

如果我理解正确，我认为这很容易通过简单的排序来完成：

```
interlace_markers = existing_markers + new_markers
interlace_markers.sort(key = lambda x: x.marker_number) 
```

现在如果你想改变编号，你可以在一个简单的循环中做到这一点：

```
for i,marker in enumerate(interlace_markers):
    marker.marker_number = i+1 #indexing is 1 based instead of zero based 
```

请注意，这是有效的，因为 python 的排序是*稳定*的，这意味着如果不必更改顺序，则不会更改。

这导致了 O(n) + O(nlogn) = O(nlogn) 算法，这还不错。

# java - 将带有依赖项的 jar 安装到 maven 存储库（Android gcm-server 推送库）

> ID：11989236
> 
> 赞同：8
> 
> 时间：2012-08-16T14:21:48.520
> 
> 标签：java, android, maven, push-notification, google-cloud-messaging

我在一个工业化的大型 maven 项目上工作，在一个应用程序模块上，我需要能够向 Android 发送推送通知（使用新的 Google Cloud Messaging）。

谷歌似乎为自己提供了服务器端库来发送通知，并且根据邮件列表，他们不提供任何 Maven 存储库。

谷歌文档中提到的第一步是：

```
Copy the gcm-server.jar file from the SDK's gcm-server/dist directory to your server classpath. 
```

我不打算这样做，所以我已将 jar 添加到我的本地存储库并将其添加到我们的企业 Nexus。

```
mvn install:install-file
 -Dfile=gcm-server.jar
 -Dsources=gcm-server-sources.jar
 -DgroupId=com.google.android.gcm
 -DartifactId=gcm-server
 -Dversion=r3
 -DgeneratePom=true
 -Dpackaging=jar 
```

但我刚刚注意到该库具有依赖项（simple-json、mockito 和 junit）。如果它们是运行时或测试，则并不精确，但我想在运行时只使用 simple-json。我认为从我们的 Nexus 检索 GCM 依赖项也应该允许检索像这个 simple-json 库这样的传递依赖项，对吗？

因此我应该怎么做？我应该自己为我不拥有的项目创建一个 pom 文件，然后将项目导入我的 maven 存储库`-DpomFile=my-custom-pom.xml`吗？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T16:55:39.413

最后，我已经结束了创建自己的 pom。

我在 github 上创建了一个 maven 存储库： [https ://github.com/slorber/gcm-server-repository](https://github.com/slorber/gcm-server-repository)

因此，任何人都可以使用 maven 及其传递依赖项下载这个 jar。

我已经添加了文件/命令，以便您知道我是如何完成的。

添加存储库：

```
<repository>
    <id>gcm-server-repository</id>
    <url>https://raw.githubusercontent.com/slorber/gcm-server-repository/master/releases/</url>
</repository> 
```

和依赖：

```
<dependency>
    <groupId>com.google.android.gcm</groupId>
    <artifactId>gcm-server</artifactId>
    <version>1.0.2</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T20:44:30.930

使用：

```
 <dependency>
        <groupId>com.google.android.gcm</groupId>
        <artifactId>gcm-server</artifactId>
        <version>1.0.2</version>
 </dependency> 
```

和

```
<repository>
        <id>gcm-server-repository</id>
        <url>https://github.com/slorber/gcm-server-repository/raw/master/releases/</url>
</repository> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T15:24:43.610

请参阅[https://groups.google.com/forum/#!msg/android-gcm/oukjcHpbLj4/lql_IzpjmUkJ%5B1-25%5D](https://groups.google.com/forum/#!msg/android-gcm/oukjcHpbLj4/lql_IzpjmUkJ%5B1-25%5D)。

谷歌似乎根本没有在任何 Maven 存储库中发布这个 jar。你有两个选择：

1.  在存储库中包含所有（传递）依赖的 jar
2.  （就像你说的）创建你自己的 pom 文件

我会选择第二种选择。这并不难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T05:14:13.783

如果您使用 Linux 或 Mac，您可以使用以下脚本保存为 mvn-intall-jar：

```
#!/bin/sh
# Script to mavenize any JAR files
# by Muhammad Ichsan <ichsan@gmail.com>
#

desc=$1
binary=$2
source=$3

if [ $# -lt 2 ]; then
    echo "Usage $0 <DESCRIPTION> <BINARY JAR FILE> [SOURCE JAR FILE]"
    echo "e.g. $0 com.google.android.gcm/gcm-server/2.1.4 gcm-server.jar gcm-server-src.jar"
    exit 1
fi

groupId=`echo $desc | awk -F '/' '{print $1}'`
artifactId=`echo $desc | awk -F '/' '{print $2}'`
version=`echo $desc | awk -F '/' '{print $3}'`

if [ "$version" = "" ]; then
    echo "Invalid DESCRIPTION"
    exit 1
fi

if [ "$source" != "" ]; then
    mvn install:install-file\
 -Dfile=$binary\
 -DgroupId=$groupId\
 -DartifactId=$artifactId\
 -Dversion=$version\
 -DgeneratePom=true\
 -Dpackaging=jar\
 -Dsources=$source
else
    mvn install:install-file\
 -Dfile=$binary\
 -DgroupId=$groupId\
 -DartifactId=$artifactId\
 -Dversion=$version\
 -DgeneratePom=true\
 -Dpackaging=jar
fi 
```

并使用这个：

```
<dependency>
    <groupId>com.google.android.gcm</groupId>
    <artifactId>gcm-server</artifactId>
    <version>1.0.2</version>
</dependency> 
```

# seo - SEO sitemap.xml 动态内容

> ID：11989237
> 
> 赞同：2
> 
> 时间：2012-08-16T14:21:53.757
> 
> 标签：seo, sitemap, dynamic-data

假设我们得到了这些页面：

```
1\. http://www.mywebsite.com/users/thomas-roberts
2\. http://www.mywebsite.com/pages/thomas-roberts/1
3\. http://www.mywebsite.com/pages/thomas-roberts/hello-kitty-collection 
```

是否有可能在 sitemap.xml 中执行此操作：

```
<?xml version="1.0" encoding="utf-8"?>

<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc>http://mywebsite.com/users/^(\w+)$/</loc>
        <lastmod>2006-11-18</lastmod>
        <changefreq>daily</changefreq>
        <priority>1</priority>
    </url>
    <url>
        <loc>http://mywebsite.com/users/^(\w+)$/pages/^(\w+)$</loc>
        <lastmod>2006-11-18</lastmod>
        <changefreq>daily</changefreq>
        <priority>0.8</priority>
    </url>
    <url>
        <loc>http://mywebsite.com/users/^(\w+)$/pages/^(\d+)$</loc>
        <lastmod>2006-11-18</lastmod>
        <changefreq>daily</changefreq>
        <priority>0.6</priority>
    </url>
</urlset> 
```

我希望我的示例很清楚，我们并没有真正在 sitemap.xml 文件中指定新的“url”元素，而是将正则表达式与 url 匹配，并且每次都回来更新。

如果这可能不是一个解决方案，那么 Twitter 和 Facebook 如何在 Google 中索引他们的所有页面（个人资料页面等）？他们是否会在每次创建新用户时生成新的站点地图，并在有人更新他们的页面/个人资料时更新他们的站点地图？

我非常好奇，如果我们必须以某种方式生成 sitemap.xml（其限制为 50.000 个项目和 10mb），如果内容被修改，生成站点地图会是一个好主意吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:25:33.163

站点地图必须包含实际的 URL。正则表达式是不可接受的，而且毫无用处，因为它们不会告诉搜索引擎任何事情。

站点地图只是告诉搜索引擎在哪里可以找到您的内容。因此，如果页面的内容被修改，就搜索引擎而言，站点地图确实不会影响它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T00:51:55.590

不幸的是，站点地图文件中需要明确的 URL。Robots.txt 文件通过 * 和 + 符号承认某种**通配符语法**来表示一组 URL，但站点地图文件并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-06T09:25:10.310

我认为最好的办法是使用由 cron 作业运行的脚本更新数据库（或缓存）中的 url。如果可以在服务器时间限制内生成 sitemap.xml，那么让它使用数据动态运行。请参阅此处的示例：[https ://stackoverflow.com/a/29468042/4058484](https://stackoverflow.com/a/29468042/4058484)

但是，如果您有大量数据，那么最好将 URL 定位在多个站点地图中，只要列出 robots.txt 中指定的 sitemap.xml，就可以在此处查看详细信息： [http ://www.sitemaps.org/协议.html#sitemapIndexXMLExample](http://www.sitemaps.org/protocol.html#sitemapIndexXMLExample)。

# 3d - 如何在 DrawUserPrimitive 之前剪辑？

> ID：11989238
> 
> 赞同：0
> 
> 时间：2012-08-16T14:21:57.800
> 
> 标签：3d, xna, monogame

在其他几种情况下，在 2D（Android 的 Canvas、GDI 的图形）中，我曾经在调用绘图方法之前剪辑我的绘图。

我如何使用 XNA 实现这一目标？

由于我正在绘制一些图元`DrawUserPrimitive`，但还没有找到任何方法来剪辑这些图元。可能吗？如何？

改变视口或类似的东西会允许这样做吗？使用 a`BasicEffect`时，还有`World`,`View`和`Projection`矩阵。我还没有深入研究这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:49:07.303

一个。您可以更改视口

```
 GraphicsDevice.Viewport = yourCamera.Viewport;   
 GraphicsDevice.Viewport = new Viewport(yourClippingArea); 
```

湾。您可以使用剪刀矩形...设置启用剪刀测试的光栅化状态...

```
 GraphicsDevice.ScissorRectangle = yourClippingArea;    
 GraphicsDevice.RasterizerState = 
     new RasterizerState( ) { ScissorTestEnabled = true }; 
```

C。你可以使用模板缓冲区和模板操作..基本上这个方法是关于创建一个掩码并应用它

d。您可以在绘制之前剪辑...

```
 (2D)
 if (yourCamera.WorldBounds.Intersects( sprite.WorldBounds )
 {
    sprite.Draw();
 }

 (3D)
 BoundingFrustum boundingFrustum = new BoundingFrustum( yourCamera.ViewProjection );

 if (boundingFrustum.Contains(model.BoundingSphere)
 {
    mode.Draw();
 } 
```

# ninject - Ninject 指定非引用组件的绑定范围

> ID：11989240
> 
> 赞同：1
> 
> 时间：2012-08-16T14:22:04.617
> 
> 标签：ninject, ninject.web, ninject-3

我有一个用于桌面应用程序和网络应用程序的库。

这个库引用了一个外部数据访问组件，在桌面上应该绑定为单例，在 web 上应该在请求范围内。

*   桌面项目参考核心项目
*   Web 项目参考核心项目
*   核心项目引用 ExternalComponent

今天我被迫在网络客户端上这样做：

```
Bind<ExternalComponent.IDataAccessComponent>()
     .To<ExternalComponent.DataAccessComponent()
     .InRequestScope()
     .WithConstructorArgument(...); 
```

在桌面客户端上，相同但`InSingletonScope()`强制我的 Web 和桌面应用程序引用 ExternalComponent.dll，这不是我的意图。

如何进行绑定，以便我可以从客户端（Web 或桌面）指定我需要此外部组件所在的范围，而无需客户端引用此数据访问组件？

我正在考虑核心项目上的一些方法，它接收客户端需要的范围并进行所有设置，但我在 Ninject API 中找不到让我这样做的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:41:04.723

我不确定为什么这是必要的，但只有在使用接受的语法时才有可能`System.Type`：

```
public class CoreModule : NinjectModule
{
    public override void Load()
    {
        this.Extend(this.Bind(typeof(IDataAccessComponent)).To(typeof(DataAccessComponent))).WithConstructorArgument("foo", "bar");
    }

    protected virtual IBindingNamedWithOrOnSyntax<object> Extend(IBindingInSyntax<object> bindingWhenInNamedWithOrOnSyntax)
    {
        return bindingWhenInNamedWithOrOnSyntax;
    }
}

public class WebClientModule : CoreModule
{
    protected override IBindingNamedWithOrOnSyntax<object> Extend(IBindingInSyntax<object> bindingWhenInNamedWithOrOnSyntax)
    {
        return bindingWhenInNamedWithOrOnSyntax.InRequestScope();
    }
}

public class ClientModule : CoreModule
{
    protected override IBindingNamedWithOrOnSyntax<object> Extend(IBindingInSyntax<object> bindingWhenInNamedWithOrOnSyntax)
    {
        return bindingWhenInNamedWithOrOnSyntax.InSingletonScope();
    }
} 
```

上面删除了强绑定语义。

# c# - 防止 wtrealm 中的跨站点脚本

> ID：11989244
> 
> 赞同：2
> 
> 时间：2012-08-16T14:22:17.837
> 
> 标签：c#, security, wif, adfs, ws-federation

我们正在创建一条消息，如下所示`SignInRequestMessage`

```
var message = Microsoft.IdentityModel.Protocols.WSFederation.WSFederationMessage.CreateFromUri(Request.Url); 
```

它具有以下属性：

`Microsoft.IdentityModel.Protocols.WSFederation.SignInRequestMessage`

`Action: "wsignin1.0"`

`message.Parameters`

```
Count = 2
    [0]: {[wa, wsignin1.0]}
    [1]: {[wtrealm, javascript:alert(/test/)]} 
```

注意消息中的第二个参数是一个 javascript，当 adfs 重定向到它时，我们实际上看到了警报。

当用户登录时会发生这种情况，并且在同一个会话中，我们尝试输入如下 URL

```
https://localhost/StarterSTSLib/Login.aspx?wa=wsignin1.0&wtrealm=javascript:alert(/test/) 
```

有人对我们如何防止`wtrealm`这个跨站点脚本漏洞有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:30:58.870

您在这里需要的是 URL 编码。非字母数字字符需要替换为它们的 %xx (hex) 表示...

[https://example.com/StarterSTSLib/Login.aspx?wa=wsignin1.0&wtrealm=javascript%3aalert%28%2ftest%2f%29](https://example.com/StarterSTSLib/Login.aspx?wa=wsignin1.0&wtrealm=javascript%3aalert%28%2ftest%2f%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:37:34.553

像 ADFS 这样的生产就绪 STS 不依赖 wtrealm 回复令牌。管理 ADFS 的人将设置应用程序/依赖方并指定将令牌发布到的 ednpoint。

WIF“add sts reference”生成的STS会以wtrealm为端点发布token。这就是为什么它是一个开发 STS，而不是生产就绪。

简而言之，取决于 STS 实现是否使用 wtrealm 作为端点。您应该有一个将领域与诸如 adfs 之类的 URL 相关联的存储库。

# html - 使用 .htaccess 屏蔽子目录 URL/重定向 URL

> ID：11989246
> 
> 赞同：0
> 
> 时间：2012-08-16T14:22:35.960
> 
> 标签：html, .htaccess, redirect, masking

嗨 Stack Overflow 社区，

我有一个关于网络设置的问题。我的主要网站位于我的“public_html”目录的根目录中。在这个目录中，我创建了一个名为“subsite”的子文件夹。所以这个的文件地址是：“public_html/subsite”。要访问我的主站点，我会访问***www.example.com***。我还有一个指向我的“子站点”目录的附加域，即***www.subsite.com***。

*我的网址行为不正确。*当我转到***www.subsite.com***时，它指向我的主站点根文件夹中的相应子目录，仅用于主页。但是，一旦我开始使用我的子站点导航到其他页面，例如，url 就会变回***www.example.com/subsite/about.php***。我想屏蔽访问者的所有 url，所以当用户访问我的子站点上的页面时，页面 url 将是***www.subsite.com/about.php***。

当用户以这种方式导航到站点时：“ ***www.example.com/subsite/...*** ”，它会将他们重定向到具有适当地址的***www.subsite.com 。***如果页面也可以重定向，那就太好了！前任。“www.example.com/subsite/about.php”重定向到“www.subsite.com/about.php”。

另外，我的子域也有类似的问题。当我导航到内页时， “ ***customers.example.com*** ”重写为“ ***www.example.com/customers/... ”。***我认为这与我上面发生的主要网站问题类似。

谢谢你的帮助！如果您有一个很好的教程可以回答这个问题，请指出我。如果没有，我将不胜感激您提供的任何自助服务！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:39:48.433

作为临时修复，请尝试将这些行添加到您的根 .htaccess 文件中：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteRule ^subsite(/(.*))?$ http://www.subsite.com/$2 [L,QSA,R=301]

RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteRule ^customers(/(.*))?$ http://customers.subsite.com/$2 [L,QSA,R=301] 
```

但是您应该真正尝试解决重定向的源问题。

# mysql - 从mysql中的不同表中选择不相等的列

> ID：11989248
> 
> 赞同：1
> 
> 时间：2012-08-16T14:22:47.707
> 
> 标签：mysql

我正在使用 mysql，我有三个表 T1、T2、T3，它们包含如下数据：

```
+-------+
| t1.id |
+-------+
| 1    |
| 2    |
| 3    |
| 4    |
| 5    |
+------+

+-------+
| t2.id |
+-------+
| 1    |
| 2    |
| 3    |
| 4    |
+-------+

+-------+
| t3.id |
+-------+
| 1    |
| 2    |
| 3    |
+-------+

    I want to be able to select data as follows:

id      t1.id   t2.id   t3.id
1       1       1       1
2       2       2       2
3       3       3       3
4       4       4       null
5       5       null    null 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:26:45.147

假设您打算`T1`用作 base `id`，一对`LEFT JOIN`s 将为您提供所需的结果：

```
SELECT 
  /* base id */
  T1.id AS id,
  /* Redundant t1.id */
  T1.id AS t1_id,
  T2.id AS t2_id,
  T3.id AS t3_id
FROM
  T1
  LEFT JOIN T2 ON T1.id = T2.id
  LEFT JOIN T3 ON T1.id = T3.id 
```

请注意，这会冗余使用`T1.id`，但这正是您在建议的输出中所拥有的，所以我在这里复制了它。

如果您真正想要的是从所有表中获取所有可能的 id，请使用 a`UNION`来加入。这会将三个表中不同的 id 集组合成一个子查询`allids`，用作`LEFT JOIN`其他三个表中每个表的基本 id。如果一个特定的 id 存在`T2`但*不* `T1`存在，它仍然会出现在输出中。

```
SELECT 
  allids.id AS id,
  T1.id AS t1_id,
  T2.id AS t2_id,
  T3.id AS t3_id
FROM
  ( SELECT id FROM T1 UNION SELECT id FROM T2 UNION SELECT id FROM T3 ORDER BY id) allids
  LEFT JOIN T1 ON allids.id = T1.id
  LEFT JOIN T2 ON allids.id = T2.id
  LEFT JOIN T3 ON allids.id = T3.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:28:28.297

```
SELECT t1.id, t2.id, t3.id
FROM t1 
LEFT JOIN t2 ON t1.id=t2.id
LEFT JOIN t3 ON t1.id=t3.id 
```

工作，如果`t1`保证有一个严格的所有ID超集。

如果没有，您将需要一个辅助表：

```
SELECT th.id,t1.id, t2.id, t3.id
FROM (
  SELECT id FROM t1
  UNION DISTINCT 
  SELECT id FROM t2
  UNION DISTINCT 
  SELECT id FROM t3
) AS th
LEFT JOIN t1 ON th.id=t1.id
LEFT JOIN t2 ON th.id=t2.id
LEFT JOIN t3 ON th.id=t3.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:32:27.827

我认为您想要的解决方案涉及完全外部联接：

```
SELECT coalesce(t1.id, t2.id, t3.id) as id,
       T1.id as t1_id, T2.id as t2_id, T3.id as t3_id
FROM T1 full outer JOIN
     T2 ON T2.id = T1.id full outer JOIN
     T3 ON T3.id = coalesce(t1.id, t2.id) 
```

我建议使用完整的外连接，以防其他两个表中的 id 不在 T1 中。您没有指定 t1 是驱动表。

# android - Android项目中的Subversion号

> ID：11989251
> 
> 赞同：0
> 
> 时间：2012-08-16T14:23:06.443
> 
> 标签：android, svn, maven

我在我的 Android 应用程序中添加 svn 修订号时遇到问题。我在谷歌做了一项研究，我发现了这个：[http](http://ballardhack.wordpress.com/2010/09/28/subversion-revision-in-android-app-version-with-eclipse/) ://ballardhack.wordpress.com/2010/09/28/subversion-revision-in-android-app-version-with-eclipse/ 但我不想在 Eclipse 中构建这个项目。我通过 'mvn clean install android:deploy' 编译项目

我还发现了这个： http: [//maven-svn-revision-number-plugin.googlecode.com/svn/site/examples/resource_filtering.html](http://maven-svn-revision-number-plugin.googlecode.com/svn/site/examples/resource_filtering.html)

我在 /res/raw 中创建文件“revision.txt”并在 pom.xml 中添加：

```
<build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>

        <resources>
            <resource>
                <directory>res/raw/</directory>
                <filtering>true</filtering>
            </resource>
        </resources>

        <plugins>
           <plugin>
                <groupId>com.google.code.maven-svn-revision-number-plugin</groupId>
                <artifactId>svn-revision-number-maven-plugin</artifactId>
                <version>1.13</version> <!-- please use the latest version -->
                <executions>
                    <execution>
                        <goals>
                            <goal>revision</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <entries>
                        <entry>
                            <prefix>prefix</prefix>
                        </entry>
                    </entries>
                </configuration>
            </plugin> 
```

但它不起作用！构建后（mvn clean install）我打开文件'revision.txt'，我有这个：

```
repository = ${prefix.repository}
path = ${prefix.path}
revision = ${prefix.revision}
mixedRevisions = ${prefix.mixedRevisions}
committedRevision = ${prefix.committedRevision}
committedDate = ${prefix.committedDate}
status = ${prefix.status}
specialStatus = ${prefix.specialStatus} 
```

如何使用 Maven SVN 修订号插件将修订号归档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T13:56:25.017

我找到了解决方案！Insted 从文件中读取颠覆，我更新了 AndroidManifest.xml。

在 pom.xml 我添加：

```
<plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>update-manifest</id>
                        <goals>
                          <goal>manifest-update</goal>
                        </goals>
                        <configuration>
                          <manifest>
                            <versionName></versionName>
                            <versionCode>${prefix.revision}</versionCode>
                            </manifest>
                            </configuration>
                      </execution>
                </executions>

            </plugin> 
```

在java代码中：

```
int version = 0;
        try {
            PackageInfo pi = getPackageManager().getPackageInfo(getPackageName(), 0);
            version = pi.versionCode;
        } catch (PackageManager.NameNotFoundException e) {
            Log.e("TAG", "Version number not found in package", e);
        }

        String version_name = "??";
        try {
            PackageInfo pi = getPackageManager().getPackageInfo(getPackageName(), 0);
            version_name = pi.versionName;
        } catch (PackageManager.NameNotFoundException e) {
            Log.e("TAG", "Version name not found in package", e);
        }
        TextView tv_version = (TextView)findViewById(R.id.version);
        tv_version.setText("Version: "+ version_name + "." + String.valueOf(version)); 
```

最后工作:)

# ios - 从新应用版本中删除应用内购买项目

> ID：11989252
> 
> 赞同：2
> 
> 时间：2012-08-16T14:23:08.537
> 
> 标签：ios, iphone, in-app-purchase

我在应用商店中有第二个 1.0.1 版本的应用，其中包含一些应用内购买项目。在新版本中，我不想使用一个项目，我想从 IAP 项目中删除它。有人遇到过这样的情况吗？我认为只是不使用 IAP API 购买或恢复购买新版本中的该项目，并将该项目留在 iTunes Connect 中以获取旧版本。你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:03:33.037

继续 iTunes 连接并从您应用的应用内购买模块中删除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-03T15:50:14.143

不要在 iTunes Connect 中删除或从销售中删除您购买的商品。如果你这样做；当前用户无法打开/使用该功能。如果您想在您的应用中删除应用内购买，只需在不使用购买项目的情况下设计您的应用（使其免费），然后提交。因此，在您的应用发布新版本之前，当前用户可以毫无问题地购买该商品。

我建议不要急于在新版本发布后删除您在 iTunesconnect 中的应用内购买项目。因为有些用户可能不会很快更新他们的应用程序。

# autotools - GNU Autotools：在没有版本信息的情况下重建

> ID：11989255
> 
> 赞同：9
> 
> 时间：2012-08-16T14:23:10.747
> 
> 标签：autotools, autoconf, automake

我需要构建一个配置了自动工具的库。通常的`configure && make && make install`步骤会生成版本化的共享库，例如`libfoo.so.x.x`是否可以修改 configure.ac 或 Makefile.am （当然还要跟进 autoreconf ），以便构建未版本化的库。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T06:24:58.437

是的，假设库是用 构建的`libtool`，您可以通过将`-avoid-version`标志添加到库的 LDFLAGS 来删除版本信息。

例如，如果之前有 `libfoo_la_LDFLAGS = -version-info 1:0`您将其更改为`libfoo_la_LDFLAGS = -avoid-version`. 在此之后，您将重新生成并重新运行配置 (autoreconf -vfi && ./configure) 并重建。

仅仅删除`-version-info ...`是不够的，因为 libtool 会生成一个版本信息为 0.0.0 的库。

有关更多信息，请参阅 libtool 手册：[http ://www.gnu.org/software/libtool/manual/html_node/Link-mode.html](http://www.gnu.org/software/libtool/manual/html_node/Link-mode.html)

# bash - sed：删除文件中 A 之前和 Z 之后的行

> ID：11989258
> 
> 赞同：0
> 
> 时间：2012-08-16T14:23:21.517
> 
> 标签：bash, sed

使用 sed，我试图删除定义模式之前的所有内容以及不同模式之后的所有内容。

`head`并且`tail`不要完全删除它，因为它们只是删除线条，而不是字符。

从：

```
0
0
0A
Z0
)
> 
```

至：

```
A
Z 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:31:51.260

单程：

```
sed -ne '
    /A/,/Z/ {
        /A/ s/^[^A]*//;
        /Z/ s/\(Z\).*$/\1/;
        p;
    }
' infile 
```

假设`infile`内容：

```
0
0
01234A56789
1
2
01234Z56789
)
> 
```

结果将是：

```
A56789
1
2
01234Z 
```

# css - CSS：强制浮动：div内的元素

> ID：11989259
> 
> 赞同：0
> 
> 时间：2012-08-16T14:23:22.920
> 
> 标签：css, css-float

不确定我是否只是没有看到树木的木材，但我试图迫使一堆 DIV 向左浮动 - 在一个受限制的块内。

我的包装器是 600px x 600px，在其中我有一堆 DIV（全部，也是 600x600），我使用 jQuery 滚动到每个 DIV。问题是，它们坐在一起而不是排成一排。

本质上，我想水平滚动，而不是垂直滚动。我确定我以前已经解决了这个问题，也许我正经历着这样的一天，但我今天无法得到它:(

任何指针表示赞赏。

```
<style>
#parent {width:600px; height:600px;}
.kids {width:600px; height:600px; float:left;}
</style>

...

<div id="parent">
    <div class="kids"> ... some content ... </div>
    <div class="kids"> ... some content ... </div>
    <div class="kids"> ... some content ... </div>
</div>

...

<nav>
   <a>{onclick srolls #parent to left:600px}</a>
</nav> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:40:14.717

你可以尝试使用`inline-block`和`white-space: nowrap`

```
<style>
#parent {width:600px; height:600px; white-space: nowrap; overflow: hidden;}
.kids {display: inline-block; width:600px; height:600px;}
</style> 
```

# java - 在 Java 中连接字符串是否总是会导致在内存中创建新字符串？

> ID：11989261
> 
> 赞同：25
> 
> 时间：2012-08-16T14:23:25.137
> 
> 标签：java, string, compiler-construction, string-concatenation

我有一个不适合屏幕宽度的长字符串。例如。

```
String longString = "This string is very long. It does not fit the width of the screen. So you have to scroll horizontally to read the whole string. This is very inconvenient indeed."; 
```

为了便于阅读，我想到了这样写——

```
String longString = "This string is very long." + 
                    "It does not fit the width of the screen." +
                    "So you have to scroll horizontally" +
                    "to read the whole string." +
                    "This is very inconvenient indeed."; 
```

但是，我意识到第二种方法使用字符串连接，并将在内存中创建 5 个新字符串，这可能会导致性能下降。是这样吗？或者编译器是否足够聪明，可以找出我真正需要的只是一个字符串？我怎么能避免这样做呢？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-16T14:27:32.370

> 我意识到第二种方法使用字符串连接并将在内存中创建 5 个新字符串，这可能会导致性能下降。

不，不会的。由于这些是字符串文字，它们将在编译时进行评估，并且**只会创建一个字符串**。这在[Java 语言规范 #3.10.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)中定义：

> 长字符串文字总是可以被分解成更短的部分，并使用字符串连接运算符 + [...]写成（可能带括号的）表达式。
> 此外，字符串文字总是引用 String 类的相同实例。
> 
> *   由常量表达式（第 15.28 节）计算的字符串在编译时计算，然后将其视为文字。
> *   在运行时通过连接计算的字符串是新创建的，因此是不同的。

测试：

```
public static void main(String[] args) throws Exception {
    String longString = "This string is very long.";
    String other = "This string" + " is " + "very long.";

    System.out.println(longString == other); //prints true
} 
```

但是，下面的情况情况有所不同，因为它使用了一个变量——现在有一个连接并创建了几个字符串：

```
public static void main(String[] args) throws Exception {
    String longString = "This string is very long.";
    String is = " is ";
    String other = "This string" + is + "very long.";

    System.out.println(longString == other); //prints false
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T14:28:27.260

> 在 Java 中连接字符串是否总是会导致在内存中创建新字符串？

不，它并不总是这样做。

如果连接是编译时常量表达式，则由编译器执行，并将生成的 String 添加到已编译类常量池中。在运行时，表达式的值是`String`对应于常量池条目的实习生。

这将发生在您问题的示例中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T07:40:08.643

请根据您的输入检查以下代码段：

```
String longString = "This string is very long. It does not fit the width of the screen. So you have to scroll horizontally to read the whole string. This is very inconvenient indeed.";

String longStringOther = "This string is very long. " + 
        "It does not fit the width of the screen. " +
        "So you have to scroll horizontally " +
        "to read the whole string. " +
        "This is very inconvenient indeed.";

System.out.println(" longString.equals(longStringOther) :"+ longString.equals(longStringOther));      
System.out.println(" longString == longStringother : " + (longString == longStringOther )); 
```

**输出：**

longString.equals(longStringOther) :true
longString == longStringother : true

**第一种情况**：两个字符串相等（内容相同）

**第二种情况**：表明连接后只有一个字符串。**所以只创建了一个字符串。**

# grails - jqGrid复选框值未绑定

> ID：11989262
> 
> 赞同：0
> 
> 时间：2012-08-16T14:23:26.443
> 
> 标签：grails, jqgrid, checkbox

将 jqGrid (4.4) 与 Grails (2.0.3) 一起使用。

我有一个带有复选框列的网格。数据是本地的，不使用 Grails 的 editUrl 属性来提交数据。我正在使用常规提交按钮将整个页面提交给后端控制器。

问题来了……假设网格包含 5 行，并且 5 个复选框（索引 0-4）的值为（真、假、真、真、假）。通过 params 映射到控制器的是一个包含 3 个复选框值的数组，所有值都为 true，索引为 0、1、2。因此，只有“true”值被传递给控制器​​，但我不知道它们属于哪一行到。

请指教。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:14:22.470

不特定于 grails，这只是一个常见的 html/webdevelopment 问题。

1.  提交表单时，未选中的复选框不会发送到服务器。
2.  而且您不必将复选框的提交值保持为真，您可以使用任何自定义值（值属性），然后在服务器上您可以根据值确定检查了哪些复选框

也看到这个[线程](https://stackoverflow.com/questions/476426/submit-an-html-form-with-empty-checkboxes)

# c# - 字符串日期比较 C#

> ID：11989270
> 
> 赞同：0
> 
> 时间：2012-08-16T14:23:52.497
> 
> 标签：c#, mysql

我有一个从 MySQL 数据库中提取日期的应用程序（字符串格式：01-jan-2000）。我需要将此数据与在文本框中输入的日期进行比较。

这是我到目前为止所拥有的：

```
String query = "select * from tb_demographic_data where date_of_birth LIKE '%" +
       txb_startDate.Text + "' OR (str_to_date(date_of_birth,'%d,%b,%Y') <= 
       str_to_date('"+txb_startDate.Text+"','%d,%b,%Y')) 
```

当我运行查询时，我没有得到任何结果。我的 sql 代码没有任何问题。我认为当我将字符串更改为带有`str_to_date()`. 任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:11:46.650

不要对日期进行字符串比较。将数据库中的列更改为日期，并使用参数化语句或类似语句更新查询以接受日期值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:31:23.643

正如 Nikhil 所指出的，让用户在日期/日历/时钟控件中输入日期通常是更好的选择。此外，我强烈建议不要从文本框中获取用户输入并将其简单地粘贴到 SQL 字符串中。这会导致[SQL](http://en.wikipedia.org/wiki/SQL_injection) [注入](http://xkcd.com/327/)。

我建议您要么使用上述推荐的控件之一让用户指定特定的控件`DateTime`，要么[将文本框中的数据转换为`DateTime`对象](http://msdn.microsoft.com/en-us/library/6fw7727c)。假设您使用`DbCommand`对象来运行查询，那么您可以使用参数化查询并将您的`DateTime`作为参数传递，而不是直接将其放入命令中。您的 SQL 可能如下所示：

```
select * from tb_demographic_data
where date_of_birth <= @startDate 
```

然后，您必须将 a 添加`DbParameter`到您`DbCommand`的 a `ParameterName`of`"@startDate"`和 a`Value`您的`DateTime`对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:30:28.400

看起来你的日期格式是错误的......`'%d,%b,%Y'`是说分隔符是逗号。我想你想要类似的东西`'%d-%b-%Y'`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T17:46:28.677

我想到了。我确信这不是最有效的方法，但我对此很陌生。就是这样：我只是将两个字符串解析为日期并计算了它们之间的日期差异。如果答案是肯定的，那么第一个日期在第二个之前，反之亦然

```
select * from tb_demographic_data 
where date_of_birth 
    LIKE '%" + txb_startDate.Text + "' 
    OR (datediff(str_to_date('" + txb_startDate.Text + "', 
                             '%d-%b-%Y'), 
                 str_to_date(date_of_birth,
                             '%d-%b-%Y'))>=0) 
```

# css - 基本 CSS 布局

> ID：11989274
> 
> 赞同：-1
> 
> 时间：2012-08-16T14:24:08.923
> 
> 标签：css

我有一个容器 div 900px 宽的页面，边距是自动的。我在这个 150 像素高的地方有一个标题标签。

我希望标题由左侧的图像、一些文本和右侧的另一个图像组成（与左侧的图像相反）。当我在标题 div 中放置两个 img 标签时，第二个图像低于第一个图像。我试过修改内联显示，但没有任何运气。

有任何想法吗？

CSS

```
html, body {
    background-color: #ccd6cc;
    margin: 0px;
    padding: 0px;   
}

body {
    font-family: Arial, Helvetica, Verdana, Sans-serif;
    font-size: 12px;
    color: #666666; 
}

.hidden {
    display: none;
}

#page-container {  
    width: 900px;
    margin: auto;
    background-color: white;
}

#header {
    height: 150px;
    background-color: yellow;
}

#content {
    line-height: 18px; 
}

img#mcclogo {   
    display:inline;
    float:left;
    margin:0;
    padding:0;
}

img#bactulogo {
    display:inline;
    float:right;
    margin:0;
    padding:0;
} 
```

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<script type="text/javascript" src="curvy.corners.trunk.js"></script>
<head>
    <title>Intranet Layout</title>
    <link rel="stylesheet" type="text/css" href="test_layout.css" media="screen" />
</head>
<body>

<div id="page-container">
    <div id="header">
    <img id="mcclogo" src="../images/logo.gif" alt="xx" width="244" height="48" />  
    <img id="bactulogo" src="../images/bactu3.gif" alt="xx" width="260" height="124" /> 
    </div>  

    <div id="content">
    Content 
    </div>
</div>
</body>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:42:25.143

假设 html 是正确的，[http://jsfiddle.net/sbAvB/](http://jsfiddle.net/sbAvB/)

css 应该是这样的：

```
#main{
    width:900px;
    margin: auto; }

#header{
    height:150px;
    width:100%
}

#picL
{
    float:left;
}

#text{
    position:absolute;
    left:50%;
    right:50%;
    width:70%;
}

#picR
{
    float:right;
    margin-right:0px;   }​ 
```

问题可能是缺少在 css 属性中设置的位置/边距变量。要将多个对象对齐一行，一种方法是。

# php - Symfony 1.4 未加载 sfTestFunctional 失败，找不到类

> ID：11989282
> 
> 赞同：0
> 
> 时间：2012-08-16T14:24:20.580
> 
> 标签：php, symfony-1.4, functional-testing

我已经完成了功能测试，现在我想运行它们。但是，每次我运行它们时，我都会找不到 sfTestFunctional 类。

据我所知，functional.php 引导程序不会从框架中自动加载类。这可能是什么原因？

这是我的功能引导

```
// guess current application
if (!isset($app))
{
  $traces = debug_backtrace();
  $caller = $traces[0];

  $dirPieces = explode(DIRECTORY_SEPARATOR, dirname($caller['file']));
  $app = array_pop($dirPieces);
}

require_once dirname(__FILE__).'/../../config/ProjectConfiguration.class.php';
$configuration = ProjectConfiguration::getApplicationConfiguration($app, 'test', isset($debug) ? $debug : true);

sfContext::createInstance($configuration);

// remove all cache
sfToolkit::clearDirectory(sfConfig::get('sf_app_cache_dir'));

$doctrine = new sfDoctrineDropDbTask($configuration->getEventDispatcher(), new sfAnsiColorFormatter());
$doctrine->run(array(), array("--no-confirmation","--env=test"));

$doctrine = new sfDoctrineBuildDbTask($configuration->getEventDispatcher(), new sfAnsiColorFormatter());
$doctrine->run(array(), array("--env=test"));

$doctrine = new sfDoctrineInsertSqlTask($configuration->getEventDispatcher(), new sfAnsiColorFormatter());
$doctrine->run(array(), array("--env=test")); 
```

这就是我的功能测试中的内容

```
include(dirname(__FILE__).'/../../bootstrap/functional.php');

$browser = sfTestFunctional(new sfBrowser());
Doctrine_Core::loadData(sfConfig::get('sf_test_dir').'/fixtures/fixtures_initial.yml'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T12:52:14.000

好的。因此，在将头撞到墙上后，我找到了解决方案。

由于某些原因，在测试环境中自定义过滤器不会自动加载。解决方案是将所有自定义过滤器的 require_once 添加到 ProjectConfiguration 文件中。这是我所做的示例：

```
if(sfConfig::get('sf_environment') == 'test' && sfConfig::get('sf_app') == 'frontend')
{
    require_once sfConfig::get('sf_app_lib_dir').'/myFilter.class.php';
    require_once sfConfig::get('sf_app_lib_dir').'/myotherFilter.class.php';
    require_once sfConfig::get('sf_app_lib_dir').'/lovefiltersFilter.php';
    require_once sfConfig::get('sf_app_lib_dir').'/eventsManagement.class.php';

    require_once sfConfig::get('sf_test_dir').'/ProdPadTestFunctional.class.php';
} 
```

我还必须添加我的自定义 testFuntional 类。使用 autoload.yml 文件可能会更优雅地完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:57:23.683

我发现了问题：

```
$browser = sfTestFunctional(new sfBrowser()); 
```

你应该写：

```
$browser = new sfTestFunctional(new sfBrowser()); 
```

# c++ - 匿名 c 类型的 c++ 别名

> ID：11989283
> 
> 赞同：3
> 
> 时间：2012-08-16T14:24:23.837
> 
> 标签：c++

我热衷于尽量减少对第三方标头（[kiss_fft.h](http://kissfft.hg.sourceforge.net/hgweb/kissfft/kissfft/file/b354a59534b0/kiss_fft.h "亲吻fft.h")）的依赖。标头中定义了一个*匿名结构*，我真的很想在我的代码中互换使用我自己的*别名（或一些模糊的等价物）。*

我不应该改变的外部定义：

```
typedef struct {
    float r;
    float i;
} kiss_fft_cpx; 
```

我的第一次尝试：

```
typedef kiss_fft_cpx FTBuffer;
// yields error: 'kiss_fft_cpx' does not name a type 
```

我的第二次尝试：

```
struct FTBuffer : public kiss_fft_cpx {};
// yields error: expected class-name before '{' token 
```

我想我的问题是**Kiss_fft_cpx**是一个变量而不是一个类型，但也许有一个你知道的解决方法......？

我已经在这里和更广泛的网络上搜索了解决方案，但没有任何东西跳出来。我希望这只是我的知识差距，但接受可能没有可取的解决方案。乐观的提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:28:25.797

```
typedef struct {
    float r;
    float i;
} kiss_fft_cpx;

typedef kiss_fft_cpx FTBuffer;

int main()
{} 
```

作为 C++ 和 C 都可以正常工作，所以问题是你做的其他事情（或者更确切地说，不做）。

# java - Java中另一个令人困惑的泛型

> ID：11989284
> 
> 赞同：0
> 
> 时间：2012-08-16T14:24:29.210
> 
> 标签：java, generics

我在 Utility 类中有一个静态方法：

```
public static final <T extends Foo & IBar>  Foo1<T> getBaz(Class<T> fooAndIBarClazz) 
```

我还有一堂课：

```
public class FooBar<T extends Foo> {
     private Class<T> fooClazz;
//...
} 
```

从`FooBar`我想调用的实例内部`Utility.getBaz()`

```
public void aMethod() {
   Utility.getBaz(fooClazz); // fails with not a valid substitute for the bounded parameter
   //Utility.<IBar>getBaz(fooClazz); // fails as well
} 
```

是否可以在不进行额外转换的情况下以这种通用方式调用实用程序方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:32:51.367

Java 中的泛型添加了编译时类型检查，基本上可以帮助您避免强制转换。如果有些事情你不能用铸造做，你也不能用泛型做。

如果您无法确认您正在使用 IBar 调用该方法的类，您希望被调用的方法对它做什么？显然，它需要 IBar 定义的方法（否则它不会有那个签名）。所以它不能执行它的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:37:52.147

您发布的代码似乎不完整。这一切都对我有用。

富吧

```
public class FooBar<T extends Foo> {

    public void aMethod() { 
        Utility.getBaz( Foo.class ) ;
    }

} 
```

富

```
public class Foo<T> implements IBar {

} 
```

效用

```
public class Utility {
    public static final <T extends Foo & IBar>  Foo<T> getBaz(Class<T> fooAndIBarClazz){

        try {
            return fooAndIBarClazz.newInstance() ;
        } catch( InstantiationException e ) { 
            e.printStackTrace();
        } catch( IllegalAccessException e ) {
            e.printStackTrace();
        } 

        return null ;  

    }
} 
```

伊巴尔

```
public interface IBar {

} 
```

# c# - 通过网页映射网络驱动器

> ID：11989285
> 
> 赞同：0
> 
> 时间：2012-08-16T14:24:31.980
> 
> 标签：c#, network-drive

我创建了一个在我们本地公司内部网上运行的小型网页。它所做的只是使用此代码映射网络驱动器

```
System.Diagnostics.Process.Start("net.exe", "use H: "+DropDownList1.SelectedValue); 
```

当我在本地运行网页时，这工作正常。但是当我从网络服务器上运行它时，它就不起作用了。

有任何想法吗？

谢谢，我应该用javascript做这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:26:58.967

这在远程客户端上不起作用，因为代码*在服务器上运行*。当您在本地进行测试时，此代码将在您的 Web 服务器中运行，该服务器与 Web 客户端位于同一台计算机上。

您不能在浏览器客户端中执行此操作。在浏览器中运行的所有代码都在沙箱中运行，而沙箱只是不提供对主机操作系统的这种级别的访问权限。

当用户远程运行它时，您会发现他们重新映射了服务器上的 H: 驱动*器*。当下一个用户出现时，他们在*服务器上**重新映射*H :。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:29:53.880

Eric J 的回答是完全正确的。

肮脏的建议-您可以在服务器上动态生成一个批处理文件，其中包含您的问题中的“net use”语句，允许客户端下载它，并要求用户运行它？*

# jquery - 以欧洲货币格式排序列表项

> ID：11989288
> 
> 赞同：1
> 
> 时间：2012-08-16T14:24:37.570
> 
> 标签：jquery, sorting, locale, currency

我目前正在制作一个包含大量产品的页面，需要按名称、受欢迎程度和价格进行排序。

我正在使用 tinySort 插件，该插件在使用货币小数点的语言环境中运行良好，但在将价格格式化为“12,95 €”的欧洲语言环境中效果不佳

基本上，我需要一个将价格属性转换为可排序数字的函数。

每个框使用以下代码

```
<li class="box" id="234860200" >
    <img src="#" alt="" class="packshot" title="">
    <p class="productTitle"></p>
    <div class="bottomAlign">
    <p><span class="price"></span> <span class="strikethrough strikeOFF"></span></p>

    <input id="" type="checkbox" name="product" data-price="" class="calculation-item" value=""/>
<label for="" class="calculation-label"><span class="checkboxTitle"></span><span class="defaultAdd">Add to Basket</span></label>
    </div>
    <div class="clear"></div>                     
</li> 
```

排序按钮使用如下js

```
function priceLow() {
    $('ul#productList>li').tsort('span.price');
} 
```

如果有人可以帮助我，那将是惊人的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:34:46.157

这应该这样做：

```
function priceLow() {
    $('ul#productList>li').tsort('span.price',
      {
         sortFunction: function(a,b) {
           var a_val = parseFloat(a.s.replace(/,/, "."));
           var b_val = parseFloat(b.s.replace(/,/, "."));

           return (a_val==b_val) ? 0 : ((a_val>b_val) ? 1 : -1);
         }
      }
    );
} 
```

# javascript - css / html5：拖放后悬停状态保持不变

> ID：11989289
> 
> 赞同：7
> 
> 时间：2012-08-16T14:24:41.280
> 
> 标签：javascript, jquery, css, drag-and-drop, hover

我正在使用 html5 的拖放功能在屏幕上重新排列 dom 元素 - 当我这样做时，我将 css 行为附加到拖放的各种状态，但我遇到的问题是即使在我之后悬停状态仍然存在已从 DOM 元素中拖放、鼠标移出。这是我的代码：

JAVASCRIPT：

```
function addDragListeners(){
    $('.segmentListItem').each(function(index){
        $(this)[0].addEventListener('dragstart',handleDragStart,false); //rollover for current
        $(this)[0].addEventListener('drop',handleDrop,false); //drops dragged element
        $(this)[0].addEventListener('dragover',handleDragOver,false); //allows us to drop
        $(this)[0].addEventListener('dragenter',handleDragEnter,false); //rollover for target
        $(this)[0].addEventListener('dragleave',handleDragLeave,false); //sets dragged item back to normal
        $(this)[0].addEventListener('dragend',handleDragEnd,false); //sets all back to normal
    });
}

function handleDragEnter(e) {
        // this / e.target is the current hover target.
        this.classList.add('over');
}

function handleDragLeave(e) {
        this.classList.remove('over');  // this / e.target is previous target element.
}

function handleDragEnd(e){
    $('.segmentListItem').removeClass('over'); //removes the over class on all elements
}

function handleDragStart(e){
    draggedItem = this;
    e.dataTransfer.effectAllowed = 'move';
}

function handleDragOver(e) {
    if (e.preventDefault) {
        e.preventDefault(); // Necessary. Allows us to drop.
    }
    e.dataTransfer.dropEffect = 'move';  // See the section on the DataTransfer object.
    return false;
}

function handleDrop(e){
    if (e.stopPropagation) {
        e.stopPropagation(); 
    }

    if (draggedItem != this) { //MH - swap if we're not dragging the item onto itself

        var draggedIndex = $('.segmentListItem').index($(draggedItem));
        var targetIndex = $('.segmentListItem').index($(this));

        if (draggedIndex > targetIndex){
            $(draggedItem).insertBefore($(this));
        } else {
            $(draggedItem).insertAfter($(this));
        }
    } 

    return false;
} 
```

CSS：

```
a { border-radius: 10px; }
a:hover { background: #ccc; }
.segmentListItem { text-align:center; width: 50px; margin-right: 5px; font-size: 16px; display:inline-block; cursor:move; padding:10px; background: #fff; user-select: none; }
.segmentListItem.over { background: #000; color: #fff; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-03T12:40:25.647

## 状态（六年后）

根据[https://bugs.webkit.org/show_bug.cgi?id=134555](https://bugs.webkit.org/show_bug.cgi?id=134555)这曾经是一个错误。但是，它必须同时修复，因为它不能再在现代浏览器中重现。我仍然可以复制它的唯一浏览器是 IE11。

## 工作修复

您可以将 CSS 替换为从 JS 切换`:hover`的`.hover`类，以便更好地控制悬停状态：

```
document.querySelectorAll('.segmentListItem a').forEach(function (item) {
  item.addEventListener('mouseenter', function () {
    this.classList.add('hover');
  });
  item.addEventListener('mouseleave', function () {
    this.classList.remove('hover');
  });
}); 
```

下面的代码片段：

```
function addDragListeners() {
  $(".segmentListItem").each(function(index) {
    $(this)[0].addEventListener("dragstart", handleDragStart, false); //rollover for current
    $(this)[0].addEventListener("drop", handleDrop, false); //drops dragged element
    $(this)[0].addEventListener("dragover", handleDragOver, false); //allows us to drop
    $(this)[0].addEventListener("dragenter", handleDragEnter, false); //rollover for target
    $(this)[0].addEventListener("dragleave", handleDragLeave, false); //sets dragged item back to normal
    $(this)[0].addEventListener("dragend", handleDragEnd, false); //sets all back to normal
  });
}

function handleDragEnter(e) {
  // this / e.target is the current hover target.
  this.classList.add("over");
}

function handleDragLeave(e) {
  this.classList.remove("over"); // this / e.target is previous target element.
}

function handleDragEnd(e) {
  e.preventDefault();
  $(".segmentListItem").removeClass("over"); //removes the over class on all elements
}

function handleDragStart(e) {
  draggedItem = this;
  e.dataTransfer.effectAllowed = "move";
}

function handleDragOver(e) {
  if (e.preventDefault) {
    e.preventDefault(); // Necessary. Allows us to drop.
  }
  e.dataTransfer.dropEffect = "move"; // See the section on the DataTransfer object.
  return false;
}

function handleDrop(e) {
  if (e.stopPropagation) e.stopPropagation();

  if (draggedItem != this) {
    //MH - swap if we're not dragging the item onto itself

    var draggedIndex = $(".segmentListItem").index($(draggedItem));
    var targetIndex = $(".segmentListItem").index($(this));

    if (draggedIndex > targetIndex) {
      $(draggedItem).insertBefore($(this));
    } else {
      $(draggedItem).insertAfter($(this));
    }
  }

  return false;
}

// JS fix starts here:
document.querySelectorAll('.segmentListItem a').forEach(function(item, idx) {
  item.addEventListener('mouseenter', function() {
    this.classList.add('hover');
  });
  item.addEventListener('mouseleave', function() {
    this.classList.remove('hover');
  });
});
// and ends here. Comment these lines, and uncomment the `a:hover` rule in CSS in order to see the initial code

addDragListeners();
```

```
a {
  border-radius: 10px;
}

/* a:hover {
  background: #ccc;
} */

.segmentListItem {
  text-align: center;
  width: 50px;
  margin-right: 5px;
  font-size: 16px;
  display: inline-block;
  cursor: move;
  padding: 10px;
  background: #fff;
  user-select: none;
}

.segmentListItem.over {
  background: #000;
  color: #fff;
}

.hover {
  background: #ccc;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<ul>
  <li class="segmentListItem">
    <a href="#">test1</a>
  </li>
  <li class="segmentListItem">
    <a href="#">test2</a>
  </li>
  <li class="segmentListItem">
    <a href="#">test3</a>
  </li>
</ul>
```

# wpf - Tabitem 标题图片

> ID：11989292
> 
> 赞同：0
> 
> 时间：2012-08-16T14:24:53.307
> 
> 标签：wpf

当我将图像设置为 TabItem 的标题时，它看起来像某个灰色区域中的图像。如何去除这个周边区域？ ![在此处输入图像描述](../Images/8e4f708463020b0cb0070a712c79e54b.png)

```
<TabControl TabStripPlacement="Left" 
        HorizontalContentAlignment="Left" 
        VerticalContentAlignment="Top">
<TabItem ToolTip="Элементы, в которых найдены несоответствия" Height="200" 
         Style="{StaticResource TabItemHeaderImageStyle}">
    <TabItem.Header>
        <Image Source="{StaticResource CheckImage}"
               Margin="0"
               Height="25" Width="25" />
    </TabItem.Header>
    <ListBox ItemsSource="{Binding unmatched.vs}"
             MaxHeight="200" 
             ItemTemplate="{StaticResource VertexPresenterNotConformTemplate}" />
</TabItem>
<TabItem ToolTip="Элементы, соответствующие шаблону"
         Style="{StaticResource TabItemHeaderImageStyle}">
    <TabItem.Header>
        <Image Source="{StaticResource UncheckImage}"
               Height="25" Width="25" />
    </TabItem.Header>
    <ListBox ItemsSource="{Binding unmatched.vs}"
             MaxHeight="200" 
             ItemTemplate="{StaticResource VertexPresenterConformTemplate}" />
</TabItem> 
```

```
 <Style x:Key="TabItemHeaderImageStyle" TargetType="{x:Type TabItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">
                <Grid>
                    <Border Name="Border" 
                            Margin="0,0,-4,0"                                
                            BorderThickness="1,1,1,1" 
                            CornerRadius="2,12,0,0" >
                        <ContentPresenter x:Name="ContentSite"
                                          VerticalAlignment="Center"
                                          HorizontalAlignment="Center"
                                          ContentSource="Header"
                                          Margin="12,2,12,2"
                                          RecognizesAccessKey="True"/>
                    </Border>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我希望的（TabItem 的标题在彼此下方，周围没有灰色区域）： ![在此处输入图像描述](../Images/28dea7647daf226c8055d7b410829f06.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:33:06.780

TabItem 的标题周围可能有一个灰色的边框（因此在图像周围产生阴影）。请参阅[此链接](http://msdn.microsoft.com/en-us/library/ms752032%28v=vs.85%29.aspx)以获取 TabItem ControlTemplate。

我会尝试摆弄 controltemplate 或使用[WpfInspector](http://wpfinspector.codeplex.com/)之类的应用程序来查看模板有什么问题并获得正确的值。

# selenium - 如何处理自动化测试中超长的定位器？

> ID：11989295
> 
> 赞同：1
> 
> 时间：2012-08-16T14:24:56.800
> 
> 标签：selenium, automated-tests, robotframework

我想知道使用机器人框架和/或硒处理极长定位器的常用方法是什么？

我说的是很长的定位器：

`<input id="all00$SPWebExample1$g_bcd023df_3ba6_4f8f_bef3_164383c266aa$ctl00$$HereComesAnotherText1$rblFoundIs" />`

显而易见的方法是将它们“隐藏”在资源文件中，这样它们就不会污染测试用例文件。我见过的另一种方法是创建一个包含测试网站的完整结构的静态 xml 文件并解析 xml 文件（如果需要，我可以提供示例）。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:35:57.447

恕我直言，解决方案是不要使用丑陋的自动生成的 ID。您的测试最终会变得脆弱，因为如果框架更改 ID 生成方法，它们都会中断。相反，使用 XPath 或 CSS 选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T22:35:29.693

如果 id 是自动生成的，那么将它们存储在这样的长定位器中并不是一个好主意。

* * *

代替：

```
string superLongLocatorID = "all00$SPWebExample1$g_bcd023df_3ba6_4f8f_bef3_164383c266aa$ctl00$$HereComesAnotherText1$rblFoundIs" 
```

采用：

```
string xpathLocator = "//input[contains(@id, 'rblFoundIs')]" 
```

* * *

XPath 版本要短得多，而且不会像存储完整 ID 那样容易破解。

如果有多个输入元素包含相同的文本，那么还有其他方法可以缩小结果范围。

# google-chrome - Chrome扩展，重解析性能优化

> ID：11989296
> 
> 赞同：2
> 
> 时间：2012-08-16T14:24:59.530
> 
> 标签：google-chrome, google-chrome-extension

我正在使用一个必须解析大量文本的 Chrome 扩展程序。到目前为止，一切都发生在内容脚本中。但是，由于解析可能需要长达 2 秒，我不想冻结 UI。

我在这里有什么选择？

将解析移至后台页面？不确定 Chrome 是如何处理这个问题的。后台页面是否与内容脚本共享相同的执行线程？

从内容脚本设置网络工作者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:04:44.353

我的意见是

1.  将长时间的任务放在后台页面。
2.  使用[消息传递](http://developer.chrome.com/extensions/messaging.html#simple)将解析结果传输到您的内容脚本。

# asp.net-mvc-3 - 在中等信任级别上运行 Ninject 3

> ID：11989300
> 
> 赞同：1
> 
> 时间：2012-08-16T14:25:18.023
> 
> 标签：asp.net-mvc-3, nhibernate, medium-trust

我有一个带有 Ninject 3 的 ASP.NET MVC3 应用程序。Ninject 3 是使用 NuGet 安装的，现在我正在尝试在使用中等信任级别的主机上发布此应用程序。

所以在我在谷歌上搜索了一下之后，我在 Ninject GoogleCode 项目网站上找到了一个用于中等信任环境的特定版本，所以我下载并更改了我的项目的引用，在我发布它之后，我仍然得到同样的错误。

我已经改变了创建内核的方式，并且正在使用：

```
var kernel = new StandardKernel(new NinjectSettings { UseReflectionBasedInjection = true }); 
```

我仍然得到错误。

所以有人已经遇到过这个问题并解决了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T19:45:41.577

尝试这个：

打开这个文件：MyProjectName\Properties\ **AssemblyInfo.cs** 然后添加这一行

**[程序集：AllowPartiallyTrustedCallers]**

在 Global.asax 中：

```
 INinjectSettings settings = new NinjectSettings
        {
            UseReflectionBasedInjection = true,    // disable code generation for partial trust
            InjectNonPublic = false,               // disable private reflection for partial trust
            InjectParentPrivateProperties = false, // reduce magic
            LoadExtensions = false                 // reduce magic
        };

        IKernel kernel = new StandardKernel(settings); 
```

# iphone - 动态获取键盘边框

> ID：11989306
> 
> 赞同：33
> 
> 时间：2012-08-16T14:25:24.617
> 
> 标签：iphone, ios, keyboard, uitextview

是否可以动态获取键盘的框架，实际上是它的高度？因为我有一个`UITextView`，我想根据键盘框架的高度来调整它的高度，当键盘的输入法改变时。如您所知，不同的输入法可能有不同的键盘框架高度。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-08-17T03:57:37.313

试试这个：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(keyboardWasShown:)
                                         name:UIKeyboardDidShowNotification
                                       object:nil];

- (void)keyboardWasShown:(NSNotification *)notification
{

// Get the size of the keyboard.
CGSize keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

//Given size may not account for screen rotation
int height = MIN(keyboardSize.height,keyboardSize.width);
int width = MAX(keyboardSize.height,keyboardSize.width);

//your other code here..........
} 
```

[教程了解更多信息](http://iosdevelopertip.blogspot.in/2014/10/scroll-uitextfield-above-keyboard-in.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T14:29:23.710

只需按照 Apple 的本教程进行操作，您就会得到您想要的。[苹果文档](https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)。为了确定键盘覆盖的区域，请参考本[教程](https://www.cocoanetics.com/2011/07/calculating-area-covered-by-keyboard/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-08T09:59:29.610

对于 Swift 3 用户，@Hector 代码（有一些补充）将是：

在您`viewDidLoad`添加观察者：

```
NotificationCenter.default.addObserver(self, selector: #selector(self.keyboardDidShow(_:)), name: .UIKeyboardDidShow , object: nil)
NotificationCenter.default.addObserver(self, selector: #selector(self.keyboardDidHide(_:)), name: .UIKeyboardDidHide , object: nil) 
```

然后实现这些方法：

```
func keyboardDidShow(_ notification: NSNotification) {
     print("Keyboard will show!")
     // print(notification.userInfo)

     let keyboardSize:CGSize = (notification.userInfo![UIKeyboardFrameBeginUserInfoKey] as! NSValue).cgRectValue.size
     print("Keyboard size: \(keyboardSize)")  

     let height = min(keyboardSize.height, keyboardSize.width)
     let width = max(keyboardSize.height, keyboardSize.width)

}

func keyboardDidHide(_ notification: NSNotification) {
        print("Keyboard will hide!")
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-30T17:47:01.783

您可以将此代码添加到包含 Swift 3 中的文本字段的视图中。这将使文本字段使用键盘上下动画。

```
private var keyboardIsVisible = false
private var keyboardHeight: CGFloat = 0.0

// MARK: Notifications

private func registerForKeyboardNotifications() {
    NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillShow(notification:)), name: NSNotification.Name.UIKeyboardWillShow, object: nil)
    NotificationCenter.default.addObserver(self, selector: #selector(keyboardWillBeHidden(notification:)), name: NSNotification.Name.UIKeyboardWillHide, object: nil)
}
private func deregisterFromKeyboardNotifications() {
    NotificationCenter.default.removeObserver(self, name: NSNotification.Name.UIKeyboardWillShow, object: nil)
    NotificationCenter.default.removeObserver(self, name: NSNotification.Name.UIKeyboardWillHide, object: nil)
}

// MARK: Triggered Functions

@objc private func keyboardWillShow(notification: NSNotification) {
    keyboardIsVisible = true
    guard let userInfo = notification.userInfo else {
        return
    }
    if let keyboardHeight = (userInfo[UIKeyboardFrameBeginUserInfoKey] as? NSValue)?.cgRectValue.height {
        self.keyboardHeight = keyboardHeight
    }
    if !textField.isHidden {
        if let duration = userInfo[UIKeyboardAnimationDurationUserInfoKey] as? NSNumber,
            let curve = userInfo[UIKeyboardAnimationCurveUserInfoKey] as? NSNumber {
            animateHUDWith(duration: duration.doubleValue,
                           curve: UIViewAnimationCurve(rawValue: curve.intValue) ?? UIViewAnimationCurve.easeInOut,
                           toLocation: calculateTextFieldCenter())
        }
    }
}

@objc private func keyboardWillBeHidden(notification: NSNotification) {
    keyboardIsVisible = false
    if !self.isHidden {
        guard let userInfo = notification.userInfo else {
            return
        }
        if let duration = userInfo[UIKeyboardAnimationDurationUserInfoKey] as? NSNumber,
            let curve = userInfo[UIKeyboardAnimationCurveUserInfoKey] as? NSNumber {
            animateHUDWith(duration: duration.doubleValue,
                           curve: UIViewAnimationCurve(rawValue: curve.intValue) ?? UIViewAnimationCurve.easeInOut,
                           toLocation: calculateTextFieldCenter())
        }
    }
}

// MARK: - Helpers

private func animateHUDWith(duration: Double, curve: UIViewAnimationCurve, toLocation location: CGPoint) {
    UIView.beginAnimations(nil, context: nil)
    UIView.setAnimationDuration(TimeInterval(duration))
    UIView.setAnimationCurve(curve)
    textField.center = location
    UIView.commitAnimations()
}

private func calculateTextFieldCenter() -> CGPoint {
    if !keyboardIsVisible {
        return self.center
    } else {
        let yLocation = (self.view.frame.height - keyboardHeight) / 2
        return CGPoint(x: self.center.x, y: yLocation)
    }
} 
```

# clojure - 在clojure中，为什么包含url的块注释会抛出异常？

> ID：11989313
> 
> 赞同：10
> 
> 时间：2012-08-16T14:25:42.780
> 
> 标签：clojure, functional-programming

为什么以下不起作用？这就是为什么它会抛出异常？：

```
(comment 

Replicate a Sequence
http://www.4clojure.com/problem/33

        (= (__ [1 2 3] 2) '(1 1 2 2 3 3))

) 
```

用另一个字符串替换url，它似乎没问题。

```
(comment 

Replicate a Sequence
replace the url and all is well. why 

        (= (__ [1 2 3] 2) '(1 1 2 2 3 3))

) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T14:39:38.760

因为 url 不是有效的令牌：

```
Clojure> http://www.4clojure.com/problem/33
java.lang.RuntimeException: Invalid token: http://www.4clojure.com/problem/33 
```

而您拥有的另一个字符串*可以*读取为 Clojure 形式：

```
Clojure> (quote (replace the url and all is well. why))
(replace the url and all is well. why) 
```

也就是说，Clojure 无法解析第一个示例，无论它是否在`(comment ...)`.

为了完整起见，请注意网址可以带有`;`注释：

```
Clojure> 3 ; http://www.4clojure.com/problem/33
3 
```

# vba - vba多张纸冲突

> ID：11989315
> 
> 赞同：0
> 
> 时间：2012-08-16T14:25:47.910
> 
> 标签：vba, excel

我正在打开 4 个运行宏的不同 xlsm 文件。宏从单元格中读取数据。宏单独工作，但在一起会搞砸。因为

```
Cells(1, 1).Value 
```

取自活动工作表，而不是我想要的工作表。

反正有没有像

```
workbook("example1").sheet("sheet1").Cells(1, 1).Value
workbook("example2").sheet("sheet1").Cells(1, 1).Value 
```

?

编辑：（感谢Gimp）我试过了

```
Dim oWorkSheet As Worksheet    
Set oWorkSheet = Workbooks("example1.xlsm").Sheets("sheet1")
    oWorkSheet.Cells(1, 1).Value 
```

并出现运行时错误

```
"Object doesn't support this property and method" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:36:33.377

是的，如果您没有完全限定您的对象，这是一个非常常见的问题。让我们举个例子。如果我们有 4 个工作簿并且所有四个工作簿都有名为“Sheet1”的工作表，那么我们应该如何确保从正确的单元格中获取数据？

```
Cells(1, 1).Value 
```

将始终从当前活动工作表中获取数据，这可能不是您真正想要的工作表。

如果您通过宏打开 4 个文件，那么这是正确的做法。

```
Sub Sample()
    Dim wb1 As Workbook, wb2 As Workbook, wb3 As Workbook, wb4 As Workbook
    Dim ws1 As Worksheet, ws2 As Worksheet, ws3 As Worksheet, ws4 As Worksheet

    Set wb1 = Workbooks.Open("C:\File1.xlsx")
    Set ws1 = wb1.Sheets("Sheet1")

    Set wb2 = Workbooks.Open("C:\File2.xlsx")
    Set ws2 = wb2.Sheets("Sheet1")

    Set wb3 = Workbooks.Open("C:\File3.xlsx")
    Set ws3 = wb3.Sheets("Sheet1")

    Set wb4 = Workbooks.Open("C:\File4.xlsx")
    Set ws4 = wb4.Sheets("Sheet1")

    '~~> Now you can work with the relevant cells
    Debug.Print ws1.Cells(1, 1).Value
    Debug.Print ws2.Cells(1, 1).Value
    Debug.Print ws3.Cells(1, 1).Value
    Debug.Print ws4.Cells(1, 1).Value
End Sub 
```

如果您没有通过宏打开这四个文件，您仍然可以将它们设置为 wb1、wb2 等，然后按上述方式工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:28:52.820

是的，使用：

```
workbooks("example1.xlsm").sheets("sheet1").Cells(1, 1).Value
workbooks("example2.xlsm").sheets("sheet1").Cells(1, 1).Value 
```

**更新** 您的工作簿或工作表名称不起作用。

尝试`msgbox Workbooks("example1.xlsm").name`如果可行，那么您的问题可能与该`sheets()`部分有关。如果没有，那么您可能需要完全限定该部分，例如`Workbooks("C:/Folder1/example1.xlsm")`

# python - 带有附加查询参数的金字塔 route_url

> ID：11989317
> 
> 赞同：15
> 
> 时间：2012-08-16T14:25:53.103
> 
> 标签：python, url-routing, pyramid

在 Pyramids 框架中，函数`route_path`和`route_url`用于从路由配置中生成 url。所以，如果我有路线：

```
config.add_route('idea', 'ideas/{idea}') 
```

我可以使用它为其生成 url

```
request.route_url('idea', idea="great"); 
```

但是，有时我可能想添加额外的 get 参数来生成 url，例如：

```
idea/great?sort=asc 
```

这个怎么做？

我努力了

```
request.route_url('idea', idea='great', sort='asc') 
```

但这没有用。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-16T14:25:53.103

`_query`您可以向传递字典的 url 添加其他查询参数

```
request.route_url('idea', idea='great', _query={'sort':'asc'}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-22T17:28:11.087

如果您使用的是 Mako 模板，`_query={...}`则无法使用；相反，您需要这样做：

```
${request.route_url('idea', idea='great', _query=(('sort', 'asc'),))} 
```

2 元组的元组用作字典。

# c++ - C++ 使用 11 个字符的代码交换两个数字

> ID：11989319
> 
> 赞同：1
> 
> 时间：2012-08-16T14:25:54.193
> 
> 标签：c++, obfuscation

我的朋友给我发了一个他不会做的练习：
（C++）

```
int main()
{
    unsigned int x = 0xB0FF14a5;
    unsigned int y = 0x7340c00e;
    // enter code here
    if(x==0x7340c00e && y==0xB0FF14a5) victory();
    return 0;
} 
```

主要目标是运行`victory()`功能。
假设：
-max 11 个字符
-你不能使用：“main”、“victory”、“asm”、“&”、“*”、“(”、“/”
-你只能使用

我试过的一个分号`#define`还有其他一些事情，但什么都没有（我不是 C++ 大师）：/
我不知道如何解决这个问题；感谢您的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T14:30:30.433

使用[XOR 交换算法](http://en.wikipedia.org/wiki/XOR_swap_algorithm)：

```
x^=y^=x^=y; 
```

这相当于（通常，见下文）：

```
 //x==A,   y==B
x ^= y;   //x==A^B, y==B
y ^= x;   //x==A^B, y==A
x ^= y;   //x==B,   y==A 
```

它之所以有效，是因为对同一数字进行两次异或运算会为您提供原始数字。

在 C++03 中，单表达式版本是未定义的行为，因此可能无法在所有编译器/平台上正常工作。这是因为在修改和使用变量之间没有顺序点。

在 C++11 中，它是明确定义的。该标准说（5.17.1）：

> 在所有情况下，赋值都在左右操作数的值计算之后和赋值表达式的值计算之前进行排序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T14:31:11.307

未定义的行为，但在我的电脑上工作：

```
x^=y^=x^=y; 
```

**更新**：显然，这是自 2011 年以来的明确定义；见interjay的回答。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T14:36:24.673

13 个字符，违反了其他规则，但完成了工作，太可爱了，不能发帖：

```
#include<iostream>

void victory()
{
   std::cout << "Yes we can\n";
}

int main()
{
    unsigned int x = 0xB0FF14a5;
    unsigned int y = 0x7340c00e;
    #define if(x)
    if(x==0x7340c00e && y==0xB0FF14a5) victory();
    return 0;
} 
```

在[Ideone上输出](http://ideone.com/hwICn)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T14:31:52.477

看看这个算法：[XOR swap algorithm](http://en.wikipedia.org/wiki/XOR_swap_algorithm) 但是你会得到一个编译警告，比如：

```
warning: operation on ‘x’ may be undefined 
```

如果你只在一行中使用这个算法

```
x ^= y ^= x ^= y; 
```

# asp.net-mvc-4 - ASP.NET MVC 4 表单发布到 url

> ID：11989326
> 
> 赞同：2
> 
> 时间：2012-08-16T14:26:12.323
> 
> 标签：asp.net-mvc-4

才刚刚开始使用 MVC 4，我不确定如何执行以下操作。

我有一个显示博客文章列表'/blog'的页面，该页面还包含一个带有日期列表的选择列表，选择一个日期应该自动将表单发布到像'/blog/date/20-05这样的URL -2015' 此 URL 路由到控制器中的 ActionResult，该控制器返回从该日期开始的博客文章列表。

我不知道如何让我的表单自动发布到像“/blog/date/20-05-2015”这样的 URL

路线：

```
routes.MapRoute(
            "blogsByDates",
            "blog/date/{date}",
            new { controller = "Blog", action = "IndexByDate" }
            ); 
```

控制器

```
public ActionResult IndexByDate(DateTime date)
    {
        var query = from c in db.Blogs
                    where c.PublishDate >= date
                    select c;

        return View("Index", query.ToList());
    } 
```

查看（部分）

```
@using (Html.BeginForm())
  { 
<select name="ddlMonth" id="ddlMonth">
<option value="01-06-2012">June 2012</option>
<option value="01-05-2012">May 2012</option> 
</select> 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T23:18:40.720

您必须使用 jQuery 或其他工具来更改表单的 ACTION 属性。没有其他方法可以更改表单发布到的目的地。尽管为什么在不向服务器发送任何特殊数据时使用表单。只需将其设为可点击链接列表即可。

# xcode - UITableViewCell：原型单元格的自定义行高

> ID：11989329
> 
> 赞同：22
> 
> 时间：2012-08-16T14:26:20.280
> 
> 标签：xcode, uitableview, row-height

在我的故事板文件中，我正在 UITableView 中设计多个原型单元。每个单元格都有自己唯一的单元格标识符。

根据部分和行，我将方法中的一个原型单元格出列 - tableView:cellForRowAtIndexPath:

对于大多数原型单元格，我没有更改行高。在我的故事板上，它们的高度似乎由 UITableView 的“大小检查器”下的属性“行高”确定。

对于一个原型单元格，我通过特定 UITableViewCell 的“大小检查器”下的属性“行高”更改了高度。复选框“自定义”也被选中。

在我的故事板上，这似乎运作良好。但是在运行时，当我的单元格被出列并添加到 TableView 时，所有单元格都会获得默认的行高。

现在，我知道其他帖子中提到的 tableView:heightForRowAtIndexPath: 方法，但使用起来似乎有点奇怪，因为我已经在我的故事板中设置了自定义行高。

有人知道为什么这个属性不起作用吗？这个属性是否可以在不同的情况下使用？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-22T15:45:07.343

如果你想在 Xcode 5 中使用 Interface Builder 来改变表格视图中行的高度而不需要代码，你可以在两个地方做到这一点：

*   选择表格视图，显示**大小检查**器并在**表格视图大小**部分的**行高中**键入它 。

 **![默认行高](../Images/32600c4cec6c6094150298b6996fd393.png)

*   选择原型单元格，显示**Size 检查**器，在**Table View Size**部分选中**Custom**并在关联文本字段中键入行高。

 **![自定义行高](../Images/75ee95ca8c721c2c34b0912770ae5b56.png)

会不会是你用的是第二种方法？尝试使用第一种方法设置表格视图中所有行的默认高度，第二种方法告诉 Interface Builder 异常。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-16T20:39:16.477

`heightForRowAtIndexPath`*在显示单元格之前*调用（对于表格的每一行），即`cellForRowAtIndexPath`调用 before。这是计算底层滚动视图、滚动指示器等的布局所必需的。****

# .net - WCF 服务 - 如果 wcf 客户端/通道未显式关闭会发生什么？

> ID：11989330
> 
> 赞同：0
> 
> 时间：2012-08-16T14:26:20.670
> 
> 标签：.net, wcf, garbage-collection, wcf-client

假设我们在客户端应用程序中有以下类：

```
public class TestClass
{
    public void CallWCFService()
    {
        WCFClient svcClient = new WCFClient("endpointName");

        var x = svcClient.GetFoo();

        // no Close() or Abort() method here...    
    }
} 
```

如果我`TestClass`从不同的类创建一个实例并调用它的`CallWCFService()`方法会发生什么？

垃圾收集是否会处理 svcClient？

这是否意味着服务主机有一个不可用的通道，直到 svcClient 最终以某种方式死亡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:35:55.457

是的，直到会话（如果有）达到超时，您将有一个挂起的连接，这取决于您的服务的配置方式，这通常会导致很大的问题

# php - PHP：使用购物车中的值更新股票

> ID：11989334
> 
> 赞同：0
> 
> 时间：2012-08-16T14:26:45.260
> 
> 标签：php, mysql, cart

我目前正在开发一个电子商务网站，但我需要一些关于库存管理的建议。

我希望购物车按以下方式工作：

*   CostumerA 将产品O 添加到购物车，数量为“1”。
*   CostumerB 尝试将相同的产品添加到他们的购物车，但没有成功。
*   CostumerA 注销或他们的会话到期。
*   CostumerB 尝试再次添加 productO 并被允许这样做，因为该产品尚未添加到 CustomerA 的购物车...

我想出了两个解决方案，但从我的角度来看，两者都不可靠：

1.  将字段“冠军”添加到最初具有 product.quantity 值但随购物车移动而变化的表产品。
2.  添加表购物车并使用购物车移动对其进行更新。

如您所见，这两种解决方案都需要大量工作。有没有更好的方法来实现我的购物车。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:10:14.227

我认为更好的方法可能是仅在用户结帐并在产品列表页面上查看库存时才进行更新。

缺点是以下情况：

*   用户 A 将商品添加到购物车
*   用户 B 将相同的商品添加到他们的购物车
*   用户 A 结账，该项目现在缺货
*   用户 B 结账，但商品缺货

您需要在此过程中的每一点检查库存，并告知您的用户发生了什么。

通过让用户将库存放入购物车来捆绑库存是一个坏主意。如果用户 A 将一件商品的所有可用库存添加到他们的购物车中，那么在他们注销或您以某种超时方式将其注销之前，其他人都无法购买它。

# regex - 将电子邮件地址与地址标签匹配的正则表达式

> ID：11989337
> 
> 赞同：0
> 
> 时间：2012-08-16T14:26:50.310
> 
> 标签：regex, email

> **可能重复：**
> [是否有用于电子邮件地址验证的 php 库？](https://stackoverflow.com/questions/161342/is-there-a-php-library-for-email-address-validation)
> [如何在php5中验证电子邮件？](https://stackoverflow.com/questions/5855811/how-to-validate-an-email-in-php5)

我知道有很多关于电子邮件地址正则表达式的问题。我的问题有一个特定的要求，我一直无法找到答案。

我需要一个匹配电子邮件地址**并允许[地址标签](http://en.wikipedia.org/wiki/Email_address#Address_tags)**的正则表达式，例如“testing+tags@gmail.com”。我发现的大多数正则表达式在包含标签的电子邮件地址上都失败了。

**注意**请不要把我指向[这个链接](http://www.ex-parrot.com/~pdw/Mail-RFC822-Address.html)。我正在寻找实用的东西，而不是完美的东西

**编辑** 我知道大多数网络应用程序框架中都存在内置验证。RoR、PHP、Django 等都内置了它。但有时，无论出于何种原因，都有特殊需要。也许用户不能使用验证。也许他们正在用一些晦涩难懂的语言编写他们的应用程序，这些语言没有内置的验证功能，或者有它们，但它们已经过时了。在这种情况下，正则表达式仍然有用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T14:42:58.077

您~~可以~~ 改为使用[filter_var](http://www.php.net/manual/en/function.filter-var.php)**来**验证电子邮件

```
var_dump(filter_var('bob@example.com', FILTER_VALIDATE_EMAIL)); 
```

您的案例示例：

```
echo filter_var('bob+long@example.com', FILTER_VALIDATE_EMAIL) !== false? 'Valid': 'Invalid'; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T14:45:55.417

我个人最喜欢的一直是这个：

```
/\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i 
```

另一个流行的也是

```
/\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/ 
```

如果您在 PHP 中执行此操作，并且如果您的问题可行，我建议您[`filter_var`](http://www.php.net/filter_var)按照其他建议使用。*如果您需要*一个实用且被理解为不完美的正则表达式，这只是一个建议。

# android - Android ImageViews 彼此/淡入淡出

> ID：11989344
> 
> 赞同：0
> 
> 时间：2012-08-16T14:27:08.920
> 
> 标签：android, animation, alpha

我有两个 ImageView，我尝试淡出一个并淡入另一个。

问题是他们应该“躺在”彼此身上。

```
<RelativeLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<ImageView
android:id="@+id/imageView1"
android:layout_width="124dp"
android:layout_height="94dp"
android:src="@drawable/dgreen"
android:visibility="visible" />

<ImageView
android:id="@+id/imageView"
android:layout_width="124dp"
android:layout_height="94dp"
android:src="@drawable/blank" />
</RelativeLayout>

Animation animation = AnimationUtils.loadAnimation(this.getApplicationContext(),R.anim.fade_out );
animation.setFillAfter(true);
Animation animation1 = AnimationUtils.loadAnimation(this.getApplicationContext(),R.anim.fade_in );
animation1.setFillAfter(true);
iV.startAnimation(animation);

iV1.startAnimation(animation1); 
```

但是第一个图像视图下方的图片不会“发光”。

编辑：这是我的淡入/淡出代码：

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator"
android:fromAlpha="1.0" android:toAlpha="0.0"
android:duration="1000" />

<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_interpolator"
android:fromAlpha="0.1" android:toAlpha="1.0"
android:duration="1000" /> 
```

我使用阿尔法转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T22:22:20.103

您可以使用 Framelayout 并像[这里一样使用重力并应用](http://slife.io/Mi0)[这里](http://slife.io/MWg)的动画

# angularjs - 如何将数据从模型带回控制器

> ID：11989349
> 
> 赞同：2
> 
> 时间：2012-08-16T14:27:25.793
> 
> 标签：angularjs

我有一个对象数组...举个具体的例子，让我们调用数组`People`，其中每个对象`person`都有 a `uniqueID`、 a`name`和 a `tagline`。

我正在使用 foreach 模板来显示这些人的列表，如下所示：

```
<ul>
    <li ng-repeat="person in People">
        {{person.name}}: {{person.tagline}}
        ... 
```

很简单，可以从控制器中获取数据并将其同步到模型中。

现在，我想点击一个人并对他们的信息做一些复杂的事情。像这样：

```
<ul ng-controller="myCtrl">
    <li ng-repeat="person in People" ng-click="clickHandler($event)">
        ... 
```

现在，我可以像这样访问 DOM 元素：

```
$scope.clickHandler = function($event) {
    var domElement = $event.currentTarget;
        ... 
```

但是，我如何从相关`person`对象（被点击的对象）中获取数据，以便我可以查看它们`uniqueID`（未存储在 DOM 中）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:59:38.647

尝试`$scope.clickHandler`在父控制器上定义`ng-click="clickHandler(person)"`，这样您将使用父范围，并且不需要为每一行实例化一个控制器

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T14:47:36.307

每当您使用 ng-repeat 时，您应该记住它会创建一个新范围。此范围继承自父范围。但是对于 ng-repeat 中的每个项目，都会创建一个新范围。

为了访问这个范围，您还必须引入一个与该范围一起工作的控制器。所以你必须做

```
 <li ng-repeat="person in People" ng-click="clickHandler($event)" ng-controller="PersonController">
 ... 
```

在你的 javascript

```
function PersonController($scope){
  //In here you will be able to access the person from "person in People"

  $scope.clickHandler = function($event){
    console.log($scope.person);    
  }
} 
```

正是这个范围将具有 person 变量。现在，您还可以在此处声明一个 clickHandler。

您应该注意，将为 People 中的每个人创建一个新范围以及一个新控制器（PersonController）。在你的人控制器中，你将能够访问和操纵你的人，让你心满意足。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-30T06:00:59.317

`$event`您可以直接将对象传递给函数，而不是传递`person`，然后您可以在那里执行任何复杂的操作。例如

```
 <li ng-repeat="person in People" ng-click="clickHandler(person)">
           Name: {{person.name}}, Tagline: {{person.tagline}},  Id:  {{person.uniqueId}}
  </li> 
```

**工作示例：**

```
var myApp = angular.module("myApp", []);

(function() {
    "use strict";
    myApp.controller("myCtrl", function($scope) {
        $scope.People = [{
                "name": "Sam",
                "tagline": "Sam Test",
                "uniqueId": 123

            },
            {
                "name": "Dominik",
                "tagline": "Dominik Test",
                "uniqueId": 100

            },
            {
                "name": "Chris",
                "tagline": "Chris Test",
                "uniqueId": 555

            }
        ];

        $scope.clickHandler = function(person) {
            console.log(person);
            // You can perform any complex operation here as you have access to person here. 
        }
    });
})();
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular.min.js"></script>

<div ng-app="myApp">
  <div ng-controller="myCtrl as ctrl">
   <li ng-repeat="person in People" ng-click="clickHandler(person)">
       Name: {{person.name}}, Tagline: {{person.tagline}},  Id:  {{person.uniqueId}}
     </li>
  </div>
</div>
```

# javascript - 用于删除特殊字符的 Javascript 和 RegEx

> ID：11989358
> 
> 赞同：1
> 
> 时间：2012-08-16T14:27:47.610
> 
> 标签：javascript, regex

我在javascript中有一个字符串，里面有一些特殊字符。

```
var string = xxxx &dagger; yyyy &sect; zzzz 
```

我想删除那些特殊字符并只得到：

字符串 = xxxx yyyy zzzz

我试过这个正则表达式：

```
&#?[a-z0-9]+; 
```

像那样：

```
string = string.replace(/&#?[a-z0-9]+;/g, ""); 
```

但是特殊字符与此正则表达式不匹配。

你知道我该怎么做吗？

正则表达式运行良好，请参见示例：[http ://regexr.com?31rrj](http://regexr.com?31rrj)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:32:11.833

它对我来说很好。
工作示例： http: [//jsfiddle.net/JwrZ6/](http://jsfiddle.net/JwrZ6/)

这可能是您的语法，字符串必须用 " 围绕它们来定义。

```
var string = "xxxx &dagger; yyyy &sect; zzzz"; 
```

不是

```
var string = xxxx &dagger; yyyy &sect; zzzz; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:29:55.720

你应该使用`RegExp`如下：

```
string.replace( new RegExp( regexp_expression, 'g' ), '' ); 
```

接下来是类的语法`RegExp`：

```
var regexp = new RegExp(pattern [, flags]); 
```

您可以阅读有关此类的[文档。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:32:50.807

使用 JavaScript 的 string.replace() 方法怎么样？它可能比 RegEx 更快，并且绝对更具可读性，尽管它可能需要几行代码。

这是关于替换[http://www.bennadel.com/blog/142-Ask-Ben-Javascript-String-Replace-Method.htm](http://www.bennadel.com/blog/142-Ask-Ben-Javascript-String-Replace-Method.htm)的完整文章- Ben 也将 RegEx 与 string.replace 一起使用。这应该有你需要的一切。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T14:36:39.620

您可以使用正则表达式删除 HTML 实体，如下所示：

```
function removeEntities(str) {
  return (''+str).replace(/&\w+;\s*/g, '');
}

removeEntities("xxxx &dagger; yyyy &sect; zzzz"); // => "xxxx yyyy zzzz" 
```

# symfony - FosUserBundle 和学说请求

> ID：11989361
> 
> 赞同：1
> 
> 时间：2012-08-16T14:27:57.090
> 
> 标签：symfony, doctrine-orm, fosuserbundle

当我执行这个查询

```
public function SearchByfournisseur($keyWord)
{
           $qb = $this->createQueryBuilder('p')->distinct()->select('p');  
           $qb ->leftJoin('p.Fournisseur', 'f'); 
                   $qb ->where($qb->expr()->eq('f.username', $keyWord)); 
                   $query = $qb->getQuery();      
           $products = $query->getResult();  
           return $products;

 } 
```

我收到了这个错误：

> [语义错误] 第 0 行，“测试”附近的第 110 列：错误：“测试”未定义。

但这一个完美地工作：

```
public function SearchByfournisseur($keyWord)
{
           $qb = $this->createQueryBuilder('p')->distinct()->select('p');  
           $qb ->leftJoin('p.Fournisseur', 'f'); 
                   $qb ->where($qb->expr()->eq('f.id', $keyWord)); 
                   $query = $qb->getQuery();      
           $products = $query->getResult();  
           return $products;
 } 
```

这意味着我无法访问用户的属性，除了他的`id`.

有没有办法解决这个问题？

编辑：这是有关实体：

```
 <?php
namespace Ecommerce\boutiqueBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use FS\SolrBundle\Doctrine\Annotation as Solr;

/**
 * Ecommerce\boutiqueBundle\Entity\Produit
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Ecommerce\boutiqueBundle\Entity\ProduitRepository")
 */

 class Produit
{

    /**
     * @var integer $id
     *@Solr\Id
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

     /**
     * @ORM\ManyToOne(targetEntity="Ecommerce\UserBundle\Entity\User",inversedBy="Produits")
     *
     * @ORM\JoinColumn(name="Fournisseur_id", referencedColumnName="id")
     */
    private $Fournisseur;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set Fournisseur
     *
     * @param string $Fournisseur
     */
   public function setFournisseur( $Fournisseur)
    {
        $this->Fournisseur = $Fournisseur;
    } 

     /**
     * Get Fournisseur
     *
     * @return string 
     */
     public function getFournisseur()
    {
        return $this->Fournisseur;
    } 
    } 
```

Fournisseur 实体：

```
<?php
namespace Ecommerce\UserBundle\Entity;
use FOS\UserBundle\Entity\User as BaseUser;
use Doctrine\ORM\Mapping as ORM;
/**
* @ORM\Entity
* @ORM\Table(name="Ecommerce_user")
*/
class User extends BaseUser
{
    public function __construct()
        {
        parent::__construct();
        $this->Produits = new \Doctrine\Common\Collections\ArrayCollection();

        }

    /**
    * @ORM\Id
    * @ORM\Column(type="integer")
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    protected $id;

     /**
    * @ORM\OneToMany(targetEntity="Ecommerce\boutiqueBundle\Entity\Produit",
    * mappedBy="Fournisseur")
    */
    protected $Produits;

    public function addProduit(\Ecommerce\boutiqueBundle\Entity\Produit $Produit)
    {
    $this->Produits[] = $Produit;
    $Produit->setCategorie($this);
    }

    public function getProduits()
    {
        return $this->Produits;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:36:54.360

您必须在`leftJoin()`通话中指定加入条件。

```
public function SearchByfournisseur($keyWord)
{
    $qb = $this->createQueryBuilder('p')->distinct()->select('p');  
    $qb ->leftJoin('p.Fournisseur', 'f', 'WITH', $qb->expr()->eq('f.username = ?', $keyWord));   
    $products = $query->getResult();  
    return $products;
} 
```

我建议您阅读有关[`QueryBuilder`](http://doctrine-orm.readthedocs.org/en/latest/reference/query-builder.html).

# iphone - 解密 md5 iphone

> ID：11989365
> 
> 赞同：0
> 
> 时间：2012-08-16T14:28:04.690
> 
> 标签：iphone, ios, ipad, md5

我正在使用以下代码使用 md5 加密字符串

```
const char* str = [@"123456" UTF8String];
unsigned char result[CC_MD5_DIGEST_LENGTH];
CC_MD5(str, strlen(str), result);

NSMutableString *ret = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH*2];
for(int i = 0; i<CC_MD5_DIGEST_LENGTH; i++) {
    [ret appendFormat:@"%02x",result[i]];
}
NSLog(@"%@", ret); 
```

现在我想要一个源代码来解密编码的字符串，有帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:29:14.990

您无法解密 MD5 HASH，它是一种单向加密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:15:25.113

MD5 不是加密。它是一个哈希函数。从散列函数中找到原始值通常是不可能的。

# html - 在不同的图像尺寸上使用边框图像

> ID：11989368
> 
> 赞同：2
> 
> 时间：2012-08-16T14:28:06.970
> 
> 标签：html, css

我发现的所有使用border-image的例子都是固定的x和y。有没有办法让边框图像使用百分比来补偿不同的宽度或高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:53:32.737

如果您正在谈论切片图像边框图像切片是您需要的属性，您可以在 percantage 中指定，请参阅[http://www.w3schools.com/cssref/css3_pr_border-image.asp](http://www.w3schools.com/cssref/css3_pr_border-image.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:19:10.490

You're not going to be able to do this with straight CSS. You're going to need some javascript to figure out how large the images are and set the borders accordingly. I've created a quick mockup on jsbin. [Check it out here.](http://jsbin.com/olocag/3)

# .net - 我可以在实体框架 5 中指定 localdb 数据库的文件名吗？

> ID：11989371
> 
> 赞同：14
> 
> 时间：2012-08-16T14:28:09.683
> 
> 标签：.net, entity-framework, localdb

如果我将 Entity Framework 5 与 LocalDb 一起使用，有没有办法在 app.config/web.config 文件中指定数据库的文件名？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-21T06:19:08.737

在进一步调查中，它看起来真的很简单，但在阅读文档时并不清楚。

首先你需要有实体框架部分的配置

```
 <entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="v11.0" />
  </parameters>
</defaultConnectionFactory> 
```

一旦你有了它，你就需要指定你的连接字符串。默认情况下，连接字符串名称是您的上下文的完全限定名称。所以在我的测试应用程序中，上下文被称为“DataModel.Context”，所以我需要一个“DataModel.Context”的连接字符串

```
 <connectionStrings>
<add name="DataModel.Context" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=database;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\database.mdf" providerName="System.Data.SqlClient" /> 
```

然后使用项目数据目录中的文件“database.mdf”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-13T22:41:37.297

正如尼克提到的，您需要提供标签的`connectionString` **外部**。`<entityFramework>`所以一个样本`App.config`可能是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="CSOMLocalDataProvider.CSOMContext"
    connectionString="Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=D:\path\to\Database.mdf;Integrated Security=True" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="mssqllocaldb" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework>
</configuration> 
```

另请注意，这`<parameter value="mssqllocaldb" />`取决于您的 SQL Server 的版本。[检查此答案以获取更多信息](https://stackoverflow.com/questions/27197359/localdb-sql-server-2014-express-creates-2-instances-localdb-projectsv12-loc)。

# bash - 如何在 Bash 中测试一个字符串是否比另一个字符串“更大”？

> ID：11989373
> 
> 赞同：27
> 
> 时间：2012-08-16T14:28:11.473
> 
> 标签：bash, numeric-conversion

在 Bash 中，我可以编写以下测试

```
[[ "f" > "a" ]] 
```

这导致返回 0，即 true。bash 实际上是如何执行这个字符串比较的？据我了解`>`，进行整数比较。它是否尝试比较操作数的 ASCII 值？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-16T14:38:25.423

来自`help test`：

```
 STRING1 > STRING2
                 True if STRING1 sorts after STRING2 lexicographically. 
```

在内部，bash 使用`strcoll()`或`strcmp()`为此：

```
else if ((op[0] == '>' || op[0] == '<') && op[1] == '\0')
  {
    if (shell_compatibility_level > 40 && flags & TEST_LOCALE)
      return ((op[0] == '>') ? (strcoll (arg1, arg2) > 0) : (strcoll (arg1, arg2) < 0));
    else
      return ((op[0] == '>') ? (strcmp (arg1, arg2) > 0) : (strcmp (arg1, arg2) < 0));
  } 
```

后者实际上比较 ASCII 代码，前者（在启用区域设置时使用）执行更具体的比较，适合在给定区域设置中进行排序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T14:38:44.767

这是一个字母比较（AI​​UI 的排序顺序可能会受到当前语言环境的影响）。它比较每个字符串的第一个字符，如果左边的值较高，则为真，如果较低，则为假；如果它们相同，则比较第二个字符等。

这*与*整数比较不同，因为您使用`[[ 2 -gt 1 ]]`or `(( 2 > 1 ))`。为了说明字符串和整数比较之间的区别，请考虑以下所有内容都是“正确的”：

```
[[ 2 > 10 ]]     # because "2" comes after "1" in ASCII sort order
[[ 10 -gt 2 ]]   # because 10 is a larger number than 2
(( 10 > 2 ))     # ditto 
```

这里有一些更多的测试，作为字符串比较是正确的，但对于整数比较会是错误的：

```
[[ 05 < 5 ]]    # Because "0" comes before "5"
[[ +5 < 0 ]]    # Because "+" comes before the digits
[[ -0 < 0 ]]    # Because "-" comes before the digits
[[ -1 < -2 ]]   # Because "-" doesn't change how the second character is compared 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:41:43.040

是的，它比较 ascii 值，如果相等，则在下一个字符中重复比较。

```
/* Copyright (C) 1991, 1996, 1997, 2003 Free Software Foundation, Inc. 
   This file is part of the GNU C Library. 

   The GNU C Library is free software; you can redistribute it and/or 
   modify it under the terms of the GNU Lesser General Public 
   License as published by the Free Software Foundation; either 
   version 2.1 of the License, or (at your option) any later version. 

   The GNU C Library is distributed in the hope that it will be useful, 
   but WITHOUT ANY WARRANTY; without even the implied warranty of 
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU 
   Lesser General Public License for more details. 

   You should have received a copy of the GNU Lesser General Public 
   License along with the GNU C Library; if not, write to the Free 
   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 
   02111-1307 USA.  */ 

#include <string.h> 
#include <memcopy.h> 

#undef strcmp 

/* Compare S1 and S2, returning less than, equal to or 
   greater than zero if S1 is lexicographically less than, 
   equal to or greater than S2\.  */ 
int 
strcmp (p1, p2) 
     const char *p1; 
     const char *p2; 
{ 
  register const unsigned char *s1 = (const unsigned char *) p1; 
  register const unsigned char *s2 = (const unsigned char *) p2; 
  unsigned reg_char c1, c2; 

  do 
    { 
      c1 = (unsigned char) *s1++; 
      c2 = (unsigned char) *s2++; 
      if (c1 == '\0') 
        return c1 - c2; 
    } 
  while (c1 == c2); 

  return c1 - c2; 
} 
```

# c++ - std::ostream 的浮点格式

> ID：11989374
> 
> 赞同：49
> 
> 时间：2012-08-16T14:28:20.653
> 
> 标签：c++, floating-point, cout, ostream

如何使用 std::cout 执行以下操作？

```
double my_double = 42.0;
char str[12];
printf_s("%11.6lf", my_double); // Prints " 42.000000" 
```

我正准备放弃并使用 sprintf_s。

更一般地说，我在哪里可以找到关于 std::ostream 格式的参考，它在一个地方列出所有内容，而不是在一个长教程中将它们全部展开？

编辑 2017 年 12 月 21 日 - 请参阅下面的答案。它使用了我在 2012 年问这个问题时不可用的功能。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-16T14:30:05.547

```
std::cout << std::fixed << std::setw(11) << std::setprecision(6) << my_double; 
```

您需要添加

```
#include <iomanip> 
```

你需要[流操纵器](http://www.cplusplus.com/reference/iostream/manipulators/)

你可以用你想要的任何字符“填充”空的地方。像这样：

```
std::cout << std::fixed << std::setw(11) << std::setprecision(6) 
          << std::setfill('0') << my_double; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-16T14:40:19.387

```
std::cout << boost::format("%11.6f") % my_double; 
```

你必须`#include <boost\format.hpp>`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-07-14T16:24:53.977

在 C++20 中，您将能够做到

```
double my_double = 42.0;
char str[12];
std::format_to_n(str, sizeof(str), "{:11.6}", my_double); 
```

或者

```
std::string s = std::format("{:11.6}", my_double); 
```

同时，您可以使用[提供](https://github.com/fmtlib/fmt)`format_to_n`.

**免责声明**：我是 {fmt} 和 C++20 的作者`std::format`。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-16T15:47:58.557

通常，您希望避免在输出点指定诸如`11`和之类的内容。`6`那是物理标记，你需要逻辑标记；例如`pressure`，或`volume`。这样，您可以在一个地方定义压力或音量的格式，如果格式发生变化，您不必搜索整个程序以找到更改格式的位置（并意外更改其他格式的格式） . 在 C++ 中，您通过定义一个操纵器来做到这一点，该操纵器设置各种格式选项，并最好在完整表达式的末尾恢复它们。所以你最终会写出这样的东西：

```
std::cout << pressure << my_double; 
```

虽然我绝对不会在生产代码中使用它，但我发现以下`FFmt`格式化程序对快速工作很有用：

```
class FFmt : public StateSavingManip
{
public:
    explicit            FFmt(
                            int                 width,
                            int                 prec = 6,
                            std::ios::fmtflags  additionalFlags 
                                    = static_cast<std::ios::fmtflags>(),
                            char                fill = ' ' );

protected:
    virtual void        setState( std::ios& targetStream ) const;

private:
    int                 myWidth;
    int                 myPrec;
    std::ios::fmtflags  myFlags;
    char                myFill;
};

FFmt::FFmt(
    int                 width,
    int                 prec,
    std::ios::fmtflags  additionalFlags,
    char                fill )
    :   myWidth( width )
    ,   myPrec( prec )
    ,   myFlags( additionalFlags )
    ,   myFill( fill )
{
    myFlags &= ~ std::ios::floatfield
    myFlags |= std::ios::fixed
    if ( isdigit( static_cast< unsigned char >( fill ) )
             && (myFlags & std::ios::adjustfield) == 0 ) {
        myFlags |= std::ios::internal
    }
}

void
FFmt::setState( 
    std::ios&           targetStream ) const
{
    targetStream.flags( myFlags )
    targetStream.width( myWidth )
    targetStream.precision( myPrec )
    targetStream.fill( myFill )
} 
```

这允许编写如下内容：

```
std::cout << FFmt( 11, 6 ) << my_double; 
```

并记录在案：

```
class StateSavingManip
{
public:
    StateSavingManip( 
            StateSavingManip const& other );
    virtual             ~StateSavingManip();
    void                operator()( std::ios& stream ) const;

protected:
    StateSavingManip();

private:
    virtual void        setState( std::ios& stream ) const = 0;

private:
    StateSavingManip&   operator=( StateSavingManip const& );

private:
    mutable std::ios*   myStream;
    mutable std::ios::fmtflags
                        mySavedFlags;
    mutable int         mySavedPrec;
    mutable char        mySavedFill;
};

inline std::ostream&
operator<<(
    std::ostream&       out,
    StateSavingManip const&
                        manip )
{
    manip( out );
    return out;
}

inline std::istream&
operator>>(
    std::istream&       in,
    StateSavingManip const&
                        manip )
{
    manip( in );
    return in;
} 
```

StateSavingManip.cc：

```
namespace {

//      We maintain the value returned by ios::xalloc() + 1, and not
//      the value itself.  The actual value may be zero, and we need
//      to be able to distinguish it from the 0 resulting from 0
//      initialization.  The function getXAlloc() returns this value
//      -1, so we add one in the initialization.
int                 getXAlloc();
int                 ourXAlloc = getXAlloc() + 1;

int
getXAlloc()
{
    if ( ourXAlloc == 0 ) {
        ourXAlloc = std::ios::xalloc() + 1;
        assert( ourXAlloc != 0 );
    }
    return ourXAlloc - 1;
}
}

StateSavingManip::StateSavingManip()
    :   myStream( NULL )
{
}

StateSavingManip::StateSavingManip(
    StateSavingManip const&
                        other )
{
    assert( other.myStream == NULL );
}

StateSavingManip::~StateSavingManip()
{
    if ( myStream != NULL ) {
        myStream->flags( mySavedFlags );
        myStream->precision( mySavedPrec );
        myStream->fill( mySavedFill );
        myStream->pword( getXAlloc() ) = NULL;
    }
}

void
StateSavingManip::operator()( 
    std::ios&           stream ) const
{
    void*&              backptr = stream.pword( getXAlloc() );
    if ( backptr == NULL ) {
        backptr      = const_cast< StateSavingManip* >( this );
        myStream     = &stream;
        mySavedFlags = stream.flags();
        mySavedPrec  = stream.precision();
        mySavedFill  = stream.fill();
    }
    setState( stream );
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-16T14:52:25.040

```
#include <iostream>
#include <iomanip>

int main() {
    double my_double = 42.0;
    std::cout << std::fixed << std::setw(11)
        << std::setprecision(6) << my_double << std::endl;
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-02T03:09:25.997

对于喜欢使用 std::ostream 的实际 printf 样式格式规范的未来访问者，这里还有另一个变体，基于 Martin York 在另一个 SO 问题中的出色帖子：[https](https://stackoverflow.com/a/535636) ://stackoverflow.com/a/535636 ：

```
#include <iostream>
#include <iomanip>
#include <stdio.h> //snprintf

class FMT
{
public:
    explicit FMT(const char* fmt): m_fmt(fmt) {}
private:
    class fmter //actual worker class
    {
    public:
        explicit fmter(std::ostream& strm, const FMT& fmt): m_strm(strm), m_fmt(fmt.m_fmt) {}
//output next object (any type) to stream:
        template<typename TYPE>
        std::ostream& operator<<(const TYPE& value)
        {
//            return m_strm << "FMT(" << m_fmt << "," << value << ")";
            char buf[40]; //enlarge as needed
            snprintf(buf, sizeof(buf), m_fmt, value);
            return m_strm << buf;
        }
    private:
        std::ostream& m_strm;
        const char* m_fmt;
    };
    const char* m_fmt; //save fmt string for inner class
//kludge: return derived stream to allow operator overloading:
    friend FMT::fmter operator<<(std::ostream& strm, const FMT& fmt)
    {
        return FMT::fmter(strm, fmt);
    }
}; 
```

用法示例：

```
double my_double = 42.0;
cout << FMT("%11.6f") << my_double << "more stuff\n"; 
```

甚至：

```
int val = 42;
cout << val << " in hex is " << FMT(" 0x%x") << val << "\n"; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-22T20:32:09.727

是我，OP，Jive Dadson - 五年过去了。C++17 正在成为现实。

具有完美转发的可变参数模板参数的出现使生活变得如此简单。ostream<< 和 boost::format% 的连锁疯狂可以省去。下面的功能oprintf 填补了账单。工作正在进行中。随意加入错误处理等...

```
#include <iostream>
#include <string.h>
#include <stdio.h>
#include <string_view>

namespace dj {

    template<class Out, class... Args>
    Out& oprintf(Out &out, const std::string_view &fmt, Args&&... args) {
        const int sz = 512;
        char buffer[sz];
        int cx = snprintf(buffer, sz, fmt.data(), std::forward<Args>(args)...);

        if (cx >= 0 && cx < sz) { 
            return out.write(buffer, cx);
        } else if (cx > 0) {
            // Big output
            std::string buff2;
            buff2.resize(cx + 1);
            snprintf(buff2.data(), cx, fmt.data(), std::forward<Args>(args)...);
            return out.write(buff2.data(), cx);
        } else {
            // Throw?
            return out;
        }
    }
}

int main() {
    const double my_double = 42.0;
    dj::oprintf(std::cout, "%s %11.6lf\n", "My double ", my_double);
    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-02T09:22:23.790

已经有一些很好的答案；向那些致敬！

这是基于其中的一些。我为 POD 类型添加了类型断言，因为它们是唯一可用于`printf()`.

```
#include <iostream>
#include <stdio.h>
#include <type_traits>

namespace fmt {
namespace detail {

template<typename T>
struct printf_impl
{
    const char* fmt;
    const T v;

    printf_impl(const char* fmt, const T& v) : fmt(fmt), v(v) {}
};

template<typename T>
inline typename std::enable_if<std::is_pod<T>::value, std::ostream& >::type
operator<<(std::ostream& os, const printf_impl<T>& p)
{
    char buf[40];
    ::snprintf(buf, sizeof(buf), p.fmt, p.v, 40);
    return os << buf;
}

} // namespace detail

template<typename T>
inline typename std::enable_if<std::is_pod<T>::value, detail::printf_impl<T> >::type
printf(const char* fmt, const T& v)
{
    return detail::printf_impl<T>(fmt, v);
}

} // namespace fmt 
```

示例用法如下。

```
std::cout << fmt::printf("%11.6f", my_double); 
```

[试试 Coliru 吧](http://coliru.stacked-crooked.com/a/8da6e790b149c497)。

# f# - 结合类型测试和文字的模式

> ID：11989377
> 
> 赞同：2
> 
> 时间：2012-08-16T14:28:26.703
> 
> 标签：f#, f#-3.0, active-pattern, guard-clause

[此问题](https://stackoverflow.com/q/11978234/162396)中的活动模式在升级到 VS 2012 RTM 后无法编译。它提供了一种进行类型测试并匹配单个模式中的文字的方法。例如：

```
let (|Value|_|) value = 
  match box value with
  | :? 'T as x -> Some x
  | _ -> None

let getValue (name: string) (r: IDataReader) =
  match r.[name] with
  | null | :? DBNull | Value "" -> Unchecked.defaultof<_>
  | v -> unbox v 
```

这可以在没有活动模式的情况下完成吗？我意识到`when`可以使用警卫 ( `:? string as s when s = ""`) 但它不能与其他模式结合使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:22:34.130

您应该能够使用参数化的活动模式：

```
let (|Value|_|) v x = 
    if unbox x = v then 
        Some() 
    else None 
```

用法应该与您现在所拥有的完全一样。

**编辑**

虽然我不知道重大更改是否是故意的，但我认为通常应该避免使用与输入类型无关的通用返回类型的活动模式。当与类型推断结合使用时，它们可以轻松掩盖细微的错误。考虑以下示例，使用您的原始`(|Value|_|)`模式：

```
match [1] with
| Value [_] -> "Singleton"
| _ -> "Huh?" 
```

看起来这不是你真正会尝试的东西——顾名思义，它`Value`只能与文字一起使用；参数化的活动模式恰好支持这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:45:46.620

kvb 的变体（它不会做完全相同的事情，因为它*假设*类型测试成功）可以修改以产生类似的模式：

```
let (|Value|_|) x value =
  match box value with
  | :? 'T as y when x = y -> Some()
  | _ -> None 
```

但是，存在细微的性能差异。原始的活动模式转换为：

```
public static FSharpOption<T> |Value|_|<a, T>(a value)
{
    object obj = value;
    if (!LanguagePrimitives.IntrinsicFunctions.TypeTestGeneric<T>(obj))
    {
        return null;
    }
    return FSharpOption<T>.Some((T)((object)obj));
} 
```

也就是说，它会进行类型测试和强制转换。它的用法（`match x with Value "" -> ...`）转换为：

```
FSharpOption<string> fSharpOption = MyModule.|Value|_|<object, string>(obj);
if (fSharpOption != null && string.Equals(fSharpOption.Value, ""))
{
    ...
} 
```

最值得注意的是，从模式返回的类型化值使用典型的编译器转换模式匹配（`string.Equals`用于字符串）。

更新后的模式转换为：

```
public static FSharpOption<Unit> |Value|_|<T, a>(T x, a value)
{
    object obj = value;
    if (LanguagePrimitives.IntrinsicFunctions.TypeTestGeneric<T>(obj))
    {
        T y = (T)((object)obj);
        T y3 = y;
        if (LanguagePrimitives.HashCompare.GenericEqualityIntrinsic<T>(x, y3))
        {
            T y2 = (T)((object)obj);
            return FSharpOption<Unit>.Some(null);
        }
    }
    return null;
} 
```

它使用泛型相等性并且比匹配文字效率低。用法稍微简单一些，因为模式中包含了相等性：

```
FSharpOption<Unit> fSharpOption = MyModule.|Value|_|<string, object>("", obj);
if (fSharpOption != null)
{
    ...
} 
```

无论如何，它有效。但我更喜欢原版。

# asp.net - 依次运行批处理文件

> ID：11989382
> 
> 赞同：1
> 
> 时间：2012-08-16T14:28:35.007
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008, batch-file

有谁知道如何从 ASP.Net 的 Windows 2008R2 服务器运行一系列批处理文件？

我有一个 \winservice_stop.bat 和 \winservice_start.bat 我需要在我的 .net 应用程序中一个接一个地运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:34:35.030

这里将所有批处理文件按顺序放入主批处理文件中作为main.bat。然后在asp.net中使用下面的代码

```
string str_Path = Server.MapPath(".") + "\\main.bat";
        ProcessStartInfo processInfo = new ProcessStartInfo(str_Path);
        processInfo.UseShellExecute = false;
        Process batchProcess = new Process();
        batchProcess.StartInfo = processInfo;
        batchProcess.Start(); 
```

# jquery - 由于图像宽度导致的jquery循环间隙

> ID：11989390
> 
> 赞同：0
> 
> 时间：2012-08-16T14:28:54.303
> 
> 标签：jquery, cycle

我正在使用 jquery 循环来随机播放一些图像。我有 div 容器向左浮动，因此它们并排。中间 div 和右 div 之间有一个间隙，我认为这是因为第一个图像是 100px 宽，第二个是 200px 宽。有没有办法让容器调整到显示的图像的宽度，所以没有间隙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:06:59.923

这对我有用：

JS

```
/* Cycle plugin fit width */
$('#slider1 ul').cycle({
    fx:     'scrollLeft',
    easing: 'easeOutBack',

    nowrap:  0 ,
    delay:  -2200,
    before: function(curr, next, option){

           var w = curr.style.width;
           $('#slider1 ul').css({'width': w});

    }
}); 
```

HTML

```
<div id="slider1" style="float:left;width:auto;margin:0">
<ul  style="width: 150px; margin:0; padding:0">
<li style="width: 200px"><img src="shuff/1.jpg" height="165" width="150"  /></li>
<li style="width: 150px"><img src="shuff/2.jpg" height="165" width="200" /></li>
</ul>
</div> 
```

# c# - 从具有多个值的公共方法中检索单个值c#

> ID：11989391
> 
> 赞同：1
> 
> 时间：2012-08-16T14:28:59.537
> 
> 标签：c#

是否有可能有一个返回多个值的公共方法，然后调用该方法只检索您想要的值？

```
public static string Values()
{
    string length = DAL.Util.getlength();
    string Name = DAL.Util.getName(ddlID.SelectedValue);
    return length + Name;
} 
```

现在我知道我是否要通过说来调用此方法

```
string a = Values(); 
```

它会返回长度和名称的串联字符串，但无论如何，即使它有 10 个变量长，是否也只能从该方法调用特定变量？

感谢您提供的任何建议和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:31:16.283

听起来您*实际上*应该返回对包含各种不同状态位的对象的引用，而不是返回单个字符串。然后调用者可以决定他们真正感兴趣的状态位，并直接检索这些属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:32:41.930

您可以返回一个包含您需要的所有值的对象。

例如

```
public class MyClass
{
   public string Length { get; set; };
   public string Name { get; set; };
} 
```

然后你可以从你的函数中返回这个对象：

```
public static MyClass Values()
{
    MyClass myClass = new MyClass();
    MyClass.Length = DAL.Util.getlength();
    MyClass.Name = DAL.Util.getName(ddlID.SelectedValue);
    return MyClass;
} 
```

然后，您可以获得所需的任何属性：

```
MyClass myClass = Values();

string name = myClass.Name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:33:06.300

听起来你真正想要的是一个结构（或一个类）

```
public struct MyStruct
{
    public string length
    public string name
}

public static MyStruct Values()
{
    MyStruct result;
    result.name = DAL.Util.getName(ddlID.SelectedValue);
    result.length = DAL.Util.getlength();
    return (result);
} 
```

然后，您可以根据需要查看结构的不同元素。

```
MyStruct data = Values();
Console.WriteLine(data.name);
Console.WriteLine(data.length); 
```

# php - 每个闪存实例的访问者数量

> ID：11989394
> 
> 赞同：0
> 
> 时间：2012-08-16T14:29:08.337
> 
> 标签：php, actionscript-3, flash, multiple-instances, visitors

我有一个关于我正在开发的视频聊天解决方案的问题。我有一个 swf 文件 (viewer.swf)，它在网站上的多个地方（针对每个表演者）使用，我想知道每个地方的访问者数量。

我目前将 swf 文件中的访问者数量写入 txt 文件，但我需要每个表演者的此信息。

我正在使用 ModenaChat。

我该怎么做呢？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:06:15.657

我认为，您的 SWF 文件监控实现起来有点困难。也许，你必须有一个服务器和数据库。还有更多需要复杂的服务器端通信。

所以我推荐这个网站：[https ://www.mochibot.com/index.html](https://www.mochibot.com/index.html)

mochibot 是很棒的 SWF 监控平台..

# ruby-on-rails - 如何将具有名称（值）对的键名解析为具有原始值的键/值对的散列？

> ID：11989395
> 
> 赞同：1
> 
> 时间：2012-08-16T14:29:10.043
> 
> 标签：ruby-on-rails, ruby

我有一个像这样的大哈希：

```
{"id"=>"1", 
"contact_id"=>"15062422", 
"status"=>"Complete",
"[question(12), option(24), piped_page(32]" => "Yes", 
"[question(13), option(32)]" => "Robert",
"[question(14)]" => "Thing"} 
```

我需要解析以 '[' 开头的键来分隔名称（值）对。每个键中的名称（即问题、选项等）的数量是可变的，但存在已知数量的可能性。

我想将每一对转换成一个新的，如下所示：

```
{:question => 12, :option => 24, :piped_page => 32, :value => "Yes"} 
```

我曾考虑在每个散列元素上使用 .to_s，然后在 eval 之后进行各种字符串替换，但是 .to_s 转义了双引号，这确实使事情变得复杂。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:39:36.607

您可以使用正则表达式来解决它：

```
str = "[question(12), option(24), piped_page(32)]"
Hash[str.scan /(\w+)\((\w+)\)/]

=> {"question"=>"12", "option"=>"24", "piped_page"=>"32"} 
```

# python - CouchDB-Python：如何使用“_show”和“_list”函数？

> ID：11989397
> 
> 赞同：1
> 
> 时间：2012-08-16T14:29:11.383
> 
> 标签：python, couchdb, couchdb-python

python-couchdb 包（用作 import couchdb）提供了一个 db.view() 函数来访问 couchdb “_view”，但是如何访问“_show”或“_list”函数呢？

之前有人问过这个问题（http://stackoverflow.com/questions/5491851/couchdb-and-python-how-to-use-show-and-list-functions），其中一位作者说它现在包含在库，但他没有提到如何使用它（db.show() 不起作用），我在网上找不到任何文档。

任何人都可以让我知道功能/方法 - 或 - 将我指向解释如何执行此操作的页面。我对“_show”特别感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:57:42.107

目前，您需要从[存储库](http://code.google.com/p/couchdb-python/source/checkout)中获取 couchdb-python ：已实现数据库方法来调用[_show](http://code.google.com/p/couchdb-python/source/browse/couchdb/client.py?r=411949038d1c79ecf11738d9a6150aaf0ce65755#829)、[_list](http://code.google.com/p/couchdb-python/source/browse/couchdb/client.py?r=411949038d1c79ecf11738d9a6150aaf0ce65755#846)和[_update](http://code.google.com/p/couchdb-python/source/browse/couchdb/client.py?r=411949038d1c79ecf11738d9a6150aaf0ce65755#862)函数。

# php - 在javascript中字符串变量的“'”之前添加'\'

> ID：11989401
> 
> 赞同：0
> 
> 时间：2012-08-16T14:29:18.283
> 
> 标签：php, javascript

我有一个 javascript 变量，它保存从其他地方获取的值（假设从 API 调用中获取），获取的字符串如下所示，

```
He's the reason for this 
```

我将此字符串分配给变量名称“sample”。但是当我打印它时，它不起作用，因为字符串有“'”字符。我想在“'”字符之前添加“\”。我试过用这个，

```
var sample = (get the string from a api call).replace(/'/g,"\\\'"); 
```

但它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:44:52.157

> 在我`window.location.href = "test.php?detail="+sample;`用来发送数据的 javascript 文件中。

用于[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)转义字符串以插入 URI。

> 在我的 test.php 中，我使用`$detail = $_GET["detail"];`and`echo $detail;`来打印它。

如果您要将其打印成 HTML，请使用[`htmlspecialchars`](http://php.net/htmlspecialchars)以使其安全。

如果您将其打印到 JavaScript 中，请使用[`json_encode`](http://php.net/json_encode)以确保其安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:41:19.923

你过度使用转义字符：

```
var sample = (get the string from a api call).replace(/'/g,"\\'"); 
```

就足够了，用双引号分隔的单引号不需要转义，所以只需转义一个反斜杠。
不过，附带说明：如果您要检查的字符串是返回值，则单引号应该不是问题（如果是，api 代码会在返回字符串之前中断）。如果您*真的真的*很想成为*超级超级确定*并且字符串很长：

```
var sample = (get the string from a api call).split('\'').join('\\\'');
//or (to avoid confusion with all that escaping
var sample = (get the string from a api call).split("'").join("\\'"); 
```

对于较长的字符串（不是短字符串，因为调用数组构造函数，创建数组对象，循环...），拆分更快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:52:49.010

大概问题出在`(get the string from a api call)`. 如果你有一些像这样的服务器端代码（PHP？）：

```
var sample = <?php echo $mystring ?>.replace(…); 
```

…它产生的输出发送到浏览器，如下所示：

```
var sample = 'my dad's car'.replace(…); 
```

…那么你的服务器端代码产生了语法上无效的 JavaScript，无法通过更多的 JavaScript 来修复。相反，您需要在服务器上修复它，例如：

```
var sample = <?php echo json_encode($mystring); ?>; 
```

但是，如果没有您的实际代码详细信息，就不可能进一步帮助您。

# c# - 在 RichTextBox 中分配行后，ScrollBar 和 Caret Position 搞砸了

> ID：11989405
> 
> 赞同：0
> 
> 时间：2012-08-16T14:29:26.580
> 
> 标签：c#, richtextbox

我的问题是，当我在 RichTextBox 的 Lines 属性上书写时，光标会飞到文本框的顶部，并停留在那里。我根本无法移动它，没有箭头键或鼠标工作。这是我的代码，

代码：（当插入符号改变位置而不键入时调用）*箭头键或鼠标单击*

```
private void UpdateVisibleLines()
{

    string[] tmpArr = this.Lines;
    if (this.LineCount > 5)
    {
        tmpArr[3] = "blah";
    }
    this.Lines = tmpArr;
} 
```

我正在阅读并发现自己也无法这样做来为文本框中的每一行分配新字符串

```
rtb.Lines[i] = "Blah"; 
```

我必须创建一个 tmp 数组，然后将 rtb.Lines 分配给它。我认为我的问题是当我将 rtb 的文本分配为新数组时。但我无法弄清楚为什么插入符号会出现在文本的顶部，然后停留在那里......

# python - 何时断开与 mongodb 的连接

> ID：11989408
> 
> 赞同：3
> 
> 时间：2012-08-16T14:29:29.977
> 
> 标签：python, mongodb, pymongo

我对数据库相当陌生，刚刚弄清楚如何在 Ubuntu 12.04 上的 python2.7 中使用 MongoDB。我正在编写的应用程序使用多个连接到数据库的 python 模块（导入到主模块中）。基本上，每个模块首先打开与 DB 的连接，然后将其用于各种操作。

但是，当程序退出时，主模块是唯一“知道”退出的模块，并关闭它与 MongoDB 的连接。其他模块不知道这一点，也没有机会关闭它们的连接。由于我对数据库的经验很少，我想知道在退出时是否有任何问题让连接保持打开状态。

我是不是该：

*   就这样放着？

*   而是在每次操作之前打开连接并在每次操作后关闭它？

*   完全改变我的应用程序结构？

*   用不同的方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:32:08.297

您可以跨不同模块使用一个 pymongo 连接。您可以在单独的模块中打开它，并根据需要将其导入其他模块。程序完成工作后，您可以关闭它。这将是最好的选择。

关于其他问题：

1.  您可以像这样离开（脚本完成执行后所有连接都将关闭），但不关闭某些东西是一种不好的形式。
2.  您可以为每个操作打开/关闭连接（但建立连接是一项耗时的操作。
3.  这就是我的建议（见这个答案的第一段）
4.  我认为这一点可以与3合并。

# c - openssl 在 C 中创建 rsa 密钥对并将其导出

> ID：11989410
> 
> 赞同：1
> 
> 时间：2012-08-16T14:29:43.943
> 
> 标签：c, openssl, export, rsa

我想在 C/C++ 中创建一个 RSA 密钥对并将其导出到一个字符串以使用它。

我设法创建了密钥

```
rsa = RSA_generate_key(bits, exp, NULL, NULL);
if(RSA_check_key(rsa)!=1){
    std::cout << "Error while checking key" << std::endl << std::flush;
}

pkey = EVP_PKEY_new();
EVP_PKEY_assign_RSA(pkey, rsa); 
```

从这一点开始，我可以使用 PEM_write_PUBKEY() 和 PEM_write_PrivateKey() 将私钥和公钥写入文件。但我想要做的是将 pkey 中的私钥和公钥直接放入一个变量中，最好采用 PEM 格式。我已经环顾四周，但找不到合适的功能。有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T15:27:50.087

如果您真的需要 PEM 表示，那么`PEM_write_bio_RSA_PUBKEY()`和`PEM_write_bio_RSAPrivateKey()`（以及它们的`read`对应物）就是您想要的功能；给他们内存 BIO 让他们写入内存缓冲区。

`BIO`您可以通过调用例如创建内存

```
BIO * b = BIO_new(BIO_s_mem()); 
```

并通过调用获取内存缓冲区

```
void * buf;
BIO_get_mem_ptr(b, &buf); 
```

`BIO`您还可以通过调用例如围绕​​现有内存创建内存

```
BIO * b = BIO_new_mem_buf(buf, 9001) 
```

但结果`BIO`将是只读的。

# c# - 从 DIV 类/标签类中动态获取值

> ID：11989426
> 
> 赞同：1
> 
> 时间：2012-08-16T14:30:22.083
> 
> 标签：c#, selenium, webdriver

我有这个：

```
<div class="keyinfo">
<label for="ctl00_ContentHolder_DecisionControl_ctl00_lb_ApplicationReference">Application Number:</label>

<label class="formanswer">C017206461P</label> 
</div>
<br /> 
```

编号 C017206461P 每次都会改变。我需要捕获它并将其存储在一个变量中。

我在 Selenium webdriver 中的 C# 代码：

```
string val1 = driver.FindElement(By.XPath("//label[@class='formanswer']")).Text; 
```

也试过

```
string val1 = driver.FindElement(By.XPath("//div[*[@class='Keyinfo']]//label[*[@class='formanswer']]")).Text; 
```

但它不起作用；它将 Val1 的值设为 Null。

您能否建议如何获取动态变化的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:34:37.203

试试这个 XPath：

```
"//div[contains(@class, 'keyinfo')]/label[contains(@class, 'formanswer')]" 
```

因此，要获取文本，您可以这样做：

```
string elementXPath = "//div[contains(@class, 'keyinfo')]/label[contains(@class, 'formanswer')]"
string wantedText = driver.FindElement(By.XPath(elementXPath)).Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T16:45:28.697

尝试这个：

```
var scriptExecutor = driver as JavaScriptExecutor;
var result = scriptExecutor.ExecuteScript("return $('.formanswer').first().val();").ToString(); 
```

# wix - 选择特征时设置并传递变量（或类似变量）

> ID：11989429
> 
> 赞同：2
> 
> 时间：2012-08-16T14:30:34.630
> 
> 标签：wix, wix3.6

我的问题是：是否可以设置（环境）变量或属性，仅在选择功能时？（例如在特征树中）什么会更好，变量，属性......？

以及如何保留或传递该值，以便可以在带有 InstallCondition 的 ExePackage 或 MsiPackage 中检查它？

我希望有人有一个想法，因为我尝试了我想到的所有可能的方法，但没有一个奏效。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:41:20.073

这篇[博](http://www.joyofsetup.com/2008/04/09/feature-states-in-component-conditions/)文描述了这个问题。一种可能性可能是创建一个 reg 密钥组件并将其添加到您尝试检查的功能中。然后您可以使用该组件作为测试来查看是否正在安装该功能。您还可以查询该 reg 密钥以确定该功能是否稍后安装在另一个安装程序中。

# c# - 保持应用程序 x 秒

> ID：11989431
> 
> 赞同：0
> 
> 时间：2012-08-16T14:30:42.463
> 
> 标签：c#, .net, multithreading, sleep

如果标题令人困惑，我很抱歉，但我正在尝试录制 5 秒钟的音频，然后运行关闭功能。

我想我只是这样做

```
StartFunction();
Thread.Sleep(5000);
StopFunction(); 
```

但这不起作用，因为它在线程休眠时也不会记录。

然后我想，如果我创建一个新线程，可以在其中执行睡眠和停止功能。但是当我这样做并尝试运行停止功能时，它似乎不再停止，因为它试图停止另一个线程中的记录，如果那样的话说得通。

所以如果有人知道我该如何解决这个问题，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:36:30.883

您在不同线程中执行此操作的想法是正确的（尽管您可能想查看[timers](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)，因为它们会为您完成这项工作）。

我不是 C#-er，但我相信您正在寻找停止录制的方法称为同步方法。[此页面](http://msdn.microsoft.com/en-us/magazine/cc188793.aspx)应为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:36:53.330

一种可能的解决方案是：

*   开始录音
*   启动一个计时器（每 100 毫秒可以）并设置`DateTime startTime = DateTime.Now`
*   当定时器事件引发时，检查`(DateTime.Now - startTime)`它是否 >= 5000ms：如果是，则停止定时器并停止录制

这使您可以在屏幕上设置递减计时器。
如果你想让它更容易，你可以运行一个延迟 5 秒的计时器，并在计时器事件时停止它并停止录制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:41:14.097

您需要使用`Timer`. .NET 中有三个计时器`System.Threading.Timer`：`System.Timers.Timer`和`System.Windows.Forms.Timer`.

只有后者可以向您保证它将在同一个线程中运行。为此，您需要一个 Windows 应用程序。

```
Class MyClass
{
    Timer timer = new Timer();

    public MyClass()
    {
        timer.Tick += new EventHandler(timer_Tick);
        timer.Interval = 5000;
    }

    void Record()
    {
        StartFunction();
        timer.Start();        
    }

    void timer_Tick(object sender, EventArgs e)
    {
         timer.Stop();
         StopFunction();
    }
} 
```

# javascript - div 显示/隐藏 UJS，当表单包含错误和渲染（动作：：新）发生时记住状态

> ID：11989433
> 
> 赞同：0
> 
> 时间：2012-08-16T14:30:48.077
> 
> 标签：javascript, ruby-on-rails, ujs

使用“form_for”为“人”模型构建人。这是 UJS 在复选框单击时显示和隐藏 div。

### 人.js

```
 window.onload = function() {
    $('#is_student_chkbx').click(function() {
      return $('#student_properties').toggle();
    });
    return true;
  }; 
```

### 生成页面人员/新

```
...
<input id="is_student_chkbx" name="person[role_attributes][is_student]" type="checkbox" value="true" />

<div id='student_properties' style='display:none;'>
  <p>Test text</p>
</div>
... 
```

### people_controller.rb

```
class PeopleController < ApplicationController
  def new
    @person = Person.new
    @person.build_role
  end

  def create
    @person = Person.new(params[:person])
    ...
    @person.save ? redirect_to(person_path(@person)) : render(action: :new)
  end
end 
```

但有一个问题。当表单包含错误（例如由于模型中的验证而导致“名称不能为空”）时，`render(action: :new)`会发生但`'student_properties'`即使`'is_student_chkbx'`选中了 div 也是不可见的。因此，当我再次单击`'is_student_chkbx'`时-> 未选中复选框，但`'student_properties'`显示了 div。

那么如何记住这个div的状态呢？

我试图添加`if ($('#is_student_chkbx').is(':checked')) {$('#student_properties').show();}`，`window.onload`但它没有发生`render(action: :new)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:46:47.400

为了让它工作，我使用了（感谢 rb512，他指出了我的注意）：

```
<div id='student_properties' style='display:<%= @person.role.is_student ? 'block' : 'none' %>;'> 
```

代替：

```
<div id='student_properties' style='display:none;'> 
```

但更好的方法是[使用 CSS Class](https://stackoverflow.com/a/11255963/1041467)：

```
.hidden {
  display:none;
} 
```

然后目标字符串将如下所示：

```
<div class='your_other_class <%= 'hidden' unless @person.role.is_student %>' id='student_properties'> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T10:17:18.430

在您的新操作中添加以下内容：
**更新：错过了引号**
`@person.role.is_student = false || params['is_student_chkbx']`

# c# - 在c#中处理流式日志，richtextbox太慢了

> ID：11989438
> 
> 赞同：0
> 
> 时间：2012-08-16T14:31:06.237
> 
> 标签：c#, wpf, winforms, richtextbox

我在 c# winforms 中有一个客户端应用程序，除其他任务外，它还通过 tcp 套接字从另一个应用程序接收实时日志。如果我只是将日志文本添加到富文本框中，应用程序很快就会陷入困境。显然，用户无法以输入的速度阅读文本，但我们必须能够停止和启动系统，以便我们可以回顾日志。有比richtextbox更好的选择吗？我想保留为文本着色的能力和回滚日志的能力。WPF中的某些东西会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:05:24.817

您可以将所有行添加到一个看起来像这样的列表：

```
public class LogLine
{
    public string Message { get; set; }
    public Color Color { get; set; }
    public DateTime TimeStamp { get; set; }
}

 List<LogLine> _log = new List<LogLine>(5000); 
```

并使用支持虚拟化的控件来显示 LogLines。您还可以使用例如 10 个标签/文本块创建自己的标签/文本块，您可以根据滚动位置从列表中手动分配值。如果您让列表无限增长，该解决方案将占用内存。如果您需要大量日志，您应该使用文件系统来保存数据并定期截断列表。

# android - 异步任务上的模态HUD

> ID：11989446
> 
> 赞同：3
> 
> 时间：2012-08-16T14:31:19.403
> 
> 标签：android

我正在研究 Android 中的一些东西。将有一个菜单，当访问时，从服务器（500+）请求相当大的用户列表，大约需要 5 秒。在此期间，应用程序冻结。我如何去显示一个进度 hud（如 MBProgressHud），用户知道某事正在发生并且在它完成之前无法触摸它。

MBProgressHud：

![HUD 示例](../Images/a0e019b39e71d20576982c5d5b9fca1c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:36:01.913

使用 AsyncTask ：

```
public class MyAsyncTask extends AsyncTask<Void, Void, Result>{

                        private Activity activity;
                        private ProgressDialog progressDialog;

            public MyAsyncTask(Activity activity) {
                            super();
                this.activity = activity;
            }

            @Override
            protected void onPreExecute() {
            super.onPreExecute();
                progressDialog = ProgressDialog.show(activity, "Loading", "Loading", true);
            }

            @Override
            protected Result doInBackground(Void... v) {
            //do your stuff here
            return null;

            }

            @Override
            protected void onPostExecute(Result result) {
                progressDialog.dismiss();
                Toast.makeText(activity.getApplicationContext(), "Finished.", 
                        Toast.LENGTH_LONG).show();
            }

} 
```

从活动中调用它：

```
MyAsyncTask task = new AsyncTask(myActivity.this);
task.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:34:36.797

您需要使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)并[`ProgressDialog`](http://developer.android.com/reference/android/app/ProgressDialog.html)实现此功能。它将在单独的线程上卸载繁重的工作（网络调用），将您的 UI 线程设置为不受 ANR（应用程序无响应）的影响。

有关更多信息，请阅读[此](https://stackoverflow.com/a/3893691/966550)答案。

# sql - 这个 mssql 语句有什么问题？

> ID：11989447
> 
> 赞同：0
> 
> 时间：2012-08-16T14:31:20.773
> 
> 标签：sql, sql-server, stored-procedures

```
Create Procedure ssp_InsertClientDefaults(
@cid int
)
AS
BEGIN
INSERT INTO ClientTermData
  (ClientID, TermID, NormCount, NormProb, DiscCount, DiscProb, Weight) 
WHERE NOT EXISTS
  (SELECT 
   @cid, GlobalTermData.TermID, GlobalTermData.NormCount, GlobalTermData.NormProb, 
   GlobalTermData.DiscCount, GlobalTermData.DiscProb, GlobalTermData.Weight 
   FROM GlobalTermData, DefaultTerms 
  WHERE DefaultTerms.TermID = GlobalTermData.TermID);
END
GO 
```

'Where' 出现错误。我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:40:38.137

你的意思可能是这样的：

```
Create Procedure ssp_InsertClientDefaults
(
        @cid int
    )
AS
        BEGIN
            Insert into ClientTermData(ClientID,TermID,NormCount,NormProb,DiscCount,DiscProb,Weight) 
                Select @cid, GlobalTermData.TermID, GlobalTermData.NormCount, 
                   GlobalTermData.NormProb,GlobalTermData.DiscCount,GlobalTermData.DiscProb,
                    GlobalTermData.Weight 
                from GlobalTermData
                Where not exists( Select 1 
                                  from GlobalTermData INNER JOIN DefaultTerms 
                                  on DefaultTerms.TermID = GlobalTermData.TermID
                                  where DefaultTerms.TermID = GlobalTermData.TermID
                                -- And possibly some other exclusion filter using @cid here
                    );
        END
GO 
```

**编辑**

*解释*- 正如其他人指出的那样，您不能以这种方式将 where 子句中的“选择”列返回到插入。此外，exists 函数几乎可以检查任何内容 - 无需将所有列都放入存在中。最后，更多的是样式问题，但最好进行内部连接，而不是使用 where 连接条件的交叉连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:35:52.790

你不能那样使用`WHERE`子句。检查 MSDN 中的INSERT..INTO [sintax](http://msdn.microsoft.com/en-us/library/aa933206%28v=sql.80%29.aspx)

您应该执行以下操作：

```
INSERT your_table(your_columns)
SELECT your_values
  FROM other_table
 WHERE your_where_conditions 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:33:35.190

我不完全确定，但是`VALUES ('foo','bar')`您在 ? 之后是否缺少插入的一部分`INSERT INTO (derp,cookies)`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:33:38.280

您没有值列表 - 您不能将 where 子句作为插入语句的值列表。您需要一个选择语句。您的查询应该是这样的：

```
 Create Procedure ssp_InsertClientDefaults( 
@cid int 
) 
AS 
BEGIN 
Insert into ClientTermData(ClientID,TermID,NormCount,NormProb,DiscCount,DiscProb,Weight) 
select [something] from [table]
Where not exists( Select @cid,GlobalTermData.TermID,GlobalTermData.NormCount,GlobalTermData.NormProb,GlobalTermData.DiscCount,GlobalTermData.DiscProb,GlobalTermData.Weight from GlobalTermData,DefaultTerms where DefaultTerms.TermID = GlobalTermData.TermID); 

END 
GO 

```

另外，不要忘记您的选择值列表必须与您的 insert into 语句相匹配。

# php - 如何防止此脚本回显任何内容？

> ID：11989457
> 
> 赞同：1
> 
> 时间：2012-08-16T14:31:56.720
> 
> 标签：php, curl

该脚本一次执行多个 URL，并自动回显 URL 的内容，我想阻止此脚本回显任何内容，但`echo 'something';`除了我注释掉的行之外，我没有看到任何行。

这是脚本：

```
    函数批处理执行（$urls）
        {
            $i = 0;
            $块 = 数组（）；
            $curl_handles = 数组（）；

            foreach ($urls 作为 $url)
            {
                $curl_handles[$url] = curl_init();
                curl_setopt($curl_handles[$url], CURLOPT_URL, $url);
                curl_setopt($curl_handles[$url], CURLOPT_CONNECTTIMEOUT, 100);
            }

            $curl_multi_handle = curl_multi_init();

            foreach ($curl_handles 作为 $a_curl_handle)
            {
                $i++;

                curl_multi_add_handle($curl_multi_handle, $a_curl_handle);

                $block[] = $a_curl_handle;

                if (($i % 10 == 0) 或 ($i == count($curl_handles)))
                {
                    $运行=空；

                    做
                    {
                        $running_before = $running;

                        curl_multi_exec($curl_multi_handle, $running);

                        if ($running != $running_before)
                        {
    // echo("正在等待 $running 站点完成...\n");
                        }

                    } while ($running > 0);

                    foreach ($block as $handle)
                    {
    // $code = curl_getinfo($handle, CURLINFO_HTTP_CODE);

    // $curl_errno = curl_errno($handle);

                        $curl_error = curl_error($handle);

                        如果 ($curl_error)
                        {
    // echo(" *** cURL 错误: ($curl_errno) $curl_error\n");
                        }

                        curl_multi_remove_handle($curl_multi_handle, $handle);
                    }

                    $块 = 数组（）；
                }
            }

            curl_multi_close($curl_multi_handle);
        }

```

帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:37:05.707

打开输出缓冲区`ob_start()`将在打印到屏幕之前捕获所有输出。

`ob_end_clean()`然后使用或关闭缓冲区`ob_end_flush()`。Flush 将在关闭缓冲区之前打印缓冲区的内容。

[在此处](http://php.net/manual/en/book.outcontrol.php)查看有关输出控件的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T21:05:43.960

创建单个 cURL 句柄时，将选项设置为`CURLOPT_RETURNTRANSFER`，`1`并且 cURL 在发出请求时不会将内容输出到标准输出。

请求完成后，如果您想访问单个句柄的响应正文，请调用[`curl_multi_getcontent()`](http://php.net/curl_multi_getcontent)该句柄，它将返回响应的内容。

您可以使用`CURLOPT_NOBODY`，但副作用是请求更改为`HEAD`许多服务器可能不接受的请求。

使用输出缓冲也是一种可能，但如果您需要将响应正文与单个请求隔离开来，则无济于事。

# c - 唯一随机数

> ID：11989458
> 
> 赞同：0
> 
> 时间：2012-08-16T14:32:05.330
> 
> 标签：c, random

我一直在研究一个随机数生成器，它创建了 6 个唯一的随机数 1-49，我可以让它工作，所以有 6 个随机数 1-49，或 6 个唯一的随机数，但不是以上所有的同时。我可以编译代码，但每次我尝试`% 49 +1`在不同的地方使用它时它都会崩溃。

我正在使用的代码是：

```
{
                int numbers [SIZE];
                int i, j, n;

                srand (time(NULL));

                for (i = 0; i < SIZE; i++)
                    numbers[i] = i;

                for(i = 0; i < SIZE; i++)
                {
                j = rand() % 49 + 1;
                n = numbers[j];
                numbers[j] = numbers[i];
                numbers[i] = n;
                }

                for (i = 0; i < SIZE; i++)
                MyOutputDebugString ("%d\n", numbers[i]); 
```

SIZE 定义为 6。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:35:18.197

> SIZE 定义为 6。

所以，你的数组`numbers`就像

```
int numbers [6]; 
```

一次

```
j = rand() % 49 + 1; 
```

被执行，`j`会在[1; 49 ]，所以，如果它 > 5，在这一行上，你将有一个超出范围的索引::

```
n = numbers[j]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:16:30.650

错误来自调用不存在的数组的一部分。

```
n = numbers[j]; 
```

j 的值将是您的随机数，并且很可能大于您的 SIZE。

更改这部分代码：

```
 for (i = 0; i < SIZE; i++)                           
                    numbers[i] = i;

                for(i = 0; i < SIZE; i++)
                   {                       
                   j = rand() % 49 + 1; 
                   n = numbers[j];  
                   numbers[j] = numbers[i];
                   numbers[i] = n;
                   } 
```

您可以像这样在一个循环中实现相同的效果：

```
for (i = 0; 1 < SIZE; i++)
{
   numbers[i] = rand() % 49 + 1;
} 
```

我希望这有帮助。

# matlab - 需要帮助发现非常大的 .mat 文件的内容

> ID：11989460
> 
> 赞同：1
> 
> 时间：2012-08-16T14:32:11.210
> 
> 标签：matlab, import, matrix

我有一个 .mat 文件太大（2.72 GB）无法加载。有什么方法可以在不打开的情况下知道文件的内容？我需要知道要在代码中使用的 .mat 文件中的矩阵名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:50:14.463

你可以使用：

```
>> whos('-file','yourfilename.mat') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:51:12.257

'whos' 函数将为您列出 mat 文件中的变量。

```
whos('-file','matFile.mat') 
```

# javascript - 为什么 .html() 方法返回的代码比 div 中的多

> ID：11989462
> 
> 赞同：0
> 
> 时间：2012-08-16T14:32:12.897
> 
> 标签：javascript, jquery

在这个小提琴中：http: [//jsfiddle.net/m7q3H/52/](http://jsfiddle.net/m7q3H/52/)

我正在访问 div“toupdate”中返回的 html。我希望它会返回， `<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>` 而是返回：

```
 <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script><a name="pd_a_6343621" style="display: inline; padding: 0px; margin: 0px;"></a><div class="PDS_Poll" id="PDI_container6343621"><div style="margin-bottom: 0px; margin-top: 0px;" name="PDI_form6343621" id="PDI_form6343621"><div class="pds-box"><div class="pds-box-outer"><div class="pds-box-inner"><div class="pds-box-top"><div class="pds-question"><div class="pds-question-outer"><div class="pds-question-inner"><div class="pds-question-top"> New Poll</div></div></div></div><div class="pds-answer"><span id="pds-answer6343621"><span class="pds-answer-group"><span class="pds-answer-input"><input class="pds-radiobutton" type="radio" id="PDI_answer28688772" value="28688772" name="PDI_answer6343621"></span><label for="PDI_answer28688772" class="pds-input-label"><span class="pds-answer-span">Answer A</span></label><span class="pds-clear"></span><br></span><span class="pds-answer-group"><span class="pds-answer-input"><input class="pds-radiobutton" type="radio" id="PDI_answer28688773" value="28688773" name="PDI_answer6343621"></span><label for="PDI_answer28688773" class="pds-input-label"><span class="pds-answer-span">Answer B</span></label><span class="pds-clear"></span><br></span><span class="pds-answer-group"><span class="pds-answer-input"><input class="pds-radiobutton" type="radio" id="PDI_answer28688774" value="28688774" name="PDI_answer6343621"></span><label for="PDI_answer28688774" class="pds-input-label"><span class="pds-answer-span">Answer C</span></label><span class="pds-clear"></span><br></span></span></div><div class="pds-vote"><div class="pds-votebutton-outer"><a id="pd-vote-button6343621" class="pds-vote-button"><span>Vote</span></a><span class="pds-links"><a href="javascript:PD_vote6343621(1);" class="pds-view-results">View Results</a><br><a href="http://polldaddy.com/signup-free/?ad=poll-front" target="_blank" class="pds-pd-link">Polldaddy.com</a><span class="pds-clear"></span></span><span class="pds-clear"></span></div></div></div></div></div></div></div><img src="http://pixel.quantserve.com/pixel?a.1=p-18-mFEk4J448M&amp;a.2=p-ab3gTb8xb3dLg&amp;labels.1=type.polldaddy.poll" style="display: none;" border="0" height="1" width="1" alt="Quantcast"></div><div id="PD_superContainer"></div> 
```

这段代码来自哪里？我可以通过单独的 jquery 方法而不是 .html() 访问所有这些 javascript 代码吗？

小提琴代码：

```
<body>
    <div id="toupdate">
    <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>
    </div>

    </body>​

$(document).ready(function() {
    console.log('HTML is '+$('#toupdate').html());
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:33:48.543

它由 JS 输出`http://static.polldaddy.com/p/6343621.js`

`.html()`将实时 DOM 序列化为 HTML 的映射`.innerHTML`，它没有获取原始源。

如果您想要原始来源，您需要向文档的 URI 发出新的 HTTP 请求，然后将其作为文本处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:34:07.950

该脚本有一些`document.write()`调用，它们被评估以向页面添加内容。

当浏览器看到该`<script>`标签时，它会加载脚本并立即执行代码。因此，脚本代码写入页面的内容最终会在该`<div>`元素内结束，因为结束标记尚未看到（浏览器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:37:10.773

看起来脚本在里面生成了一些东西`touupdate`

![在此处输入图像描述](../Images/6af3686031ac3a7c607a6e5fdd66d4aa.png)

# velocity - 将 Velocimacro 的结果传递给另一个 Velocimacro

> ID：11989464
> 
> 赞同：3
> 
> 时间：2012-08-16T14:32:20.150
> 
> 标签：velocity

我在一些模板中使用了一些速度宏（Velocimacros）；我想将日期格式宏的结果传递给另一个填充字符串值的宏。我正在尝试以下操作：

```
#pad(#dateFormat("my date"), 30) 
```

我收到一个异常消息，“VM #pad 中的 arg #0 无效 ...”

不能将宏的结果传递给另一个宏吗？我尝试使用以下方法将“#dateFormat”宏的值设置为变量：

```
#set ($myParam = #dateFormat("my date")) 
```

但是，我遇到了另一个例外。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T16:09:48.380

使用字符串插值：

```
#pad( "#dateFormat('my date')", 30) 
```

仅适用于字符串值，但它确实有效。:)

# sql - sql如何强制选择查询

> ID：11989465
> 
> 赞同：23
> 
> 时间：2012-08-16T14:32:24.380
> 
> 标签：sql, sql-server-2008

是否可以将强制转换函数应用于选择语句？如果是，如何？我有一个查询返回一个数字，我必须使用一个字符串从另一个表中获取其他信息。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-16T14:35:05.177

你就`CAST()`这样

```
SELECT cast(yourNumber as varchar(10))
FROM yourTable 
```

然后如果你想`JOIN`基于它，你可以使用：

```
SELECT *
FROM yourTable t1
INNER JOIN yourOtherTable t2
    on cast(t1.yourNumber as varchar(10)) = t2.yourString 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T14:38:23.233

是的，你可以做到。

语法`CAST`：

```
CAST ( expression AS data_type [ ( length ) ] ) 
```

例如：

```
CAST(MyColumn AS Varchar(10)) 
```

`CAST`在`SELECT`声明中：

```
Select CAST(MyColumn AS Varchar(10)) AS MyColumn
FROM MyTable 
```

有关详细信息，请参阅[CAST 和 CONVERT (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T15:09:29.183

我将这个问题解释为在子查询上使用强制转换。是的，你可以这么做：

```
select cast((<subquery>) as <newtype>) 
```

如果这样做，则需要确保返回一行和一个值。而且，由于它返回一个值，您可以将转换放在子查询中：

```
select (select cast(<val> as <newtype>) . . .) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:33:46.873

如果您使用的是 SQL（您没有说）：

```
select cast(column as varchar(200)) from table 
```

您可以在任何语句中使用它，例如：

```
select value where othervalue in( select cast(column as varchar(200)) from table)
from othertable 
```

如果你想做一个连接查询，答案已经在另一篇文章中了:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-31T13:23:04.520

当您使用案例时：

```
CASE
WHEN TB1.COD IS NULL THEN
    TB1.COD || ' - ' || TB1.NAME
ELSE
    TB1.COD || ' - ' || TB1.NAME || ' - ' || TB.NM_TABELAFRETE
END AS NR_FRETE, 
```

# facebook - Facebook 视频自动播放

> ID：11989468
> 
> 赞同：0
> 
> 时间：2012-08-16T14:32:41.290
> 
> 标签：facebook, video

我可以自动播放嵌入 Facebook 视频吗？尝试添加`<param name=\"autoplay\" value=\"true\" />` ，但没有帮助。

```
<object width=\"{0}\" height=\"{1}\" >
<param name=\"allowfullscreen\" value=\"true\" />
<param name=\"movie\" value=\"http://www.facebook.com/v/{2}\" />
<param name=\"autoplay\" value=\"true\" />
<embed src=\"http://www.facebook.com/v/{2}\" type=\"application/x-shockwave-flash\" allowfullscreen=\"true\" width=\"{0}\" height=\"{1}\"></embed>
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:02:11.897

在视频的 src 之后添加这个... &autoplay=1

# regex - 使用正则表达式计数器作为输出

> ID：11989469
> 
> 赞同：0
> 
> 时间：2012-08-16T14:32:41.277
> 
> 标签：regex, counter, bbedit

是否有一个可以输出正则表达式“使用”的计数器？

例如，如果我有这个文本：

```
(),
(),
(),
() 
```

我想使用正则表达式模式将计数添加到每个匹配的输出中。所以在这种情况下，期望的结果是：

```
(1),
(2),
(3),
(4) 
```

当然有一个内部计数器，但它可以用作输出吗？

# vba - VBA 子活动时文本框未更新

> ID：11989481
> 
> 赞同：1
> 
> 时间：2012-08-16T14:33:09.603
> 
> 标签：vba, excel

我在“主”表中有一个大单元格，其中包含几个文本控件。这些链接到工作表“Refs”中的命名单元格。“main”中有一个按钮可以启动 VBA 子程序。

一开始，潜艇确实...

```
Application.ScreenUpdating = False
Application.DisplayAlerts = False
Application.Calculation = xlCalculationManual 
```

然后它更新工作表“Refs”中名称后面的单元格每个更新都被包围

```
Application.ScreenUpdating = True
Application.Calculation = xlCalculationAutomatic

RefsSheet.Cells(row_downldstat, col_downldstat) = state

Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual 
```

VBA sub 需要一段时间才能完成，因此我们的想法是向用户提供关于正在发生的事情的反馈。不幸的是，在 VBA 子返回之前，文本框不会更新。

如果我将公式 =Down_State 放在“主”工作表的单元格中，我会看到它随着 VBA 例程的运行而更新。Down_State 与 RefsSheet.Cells(row_downldstat, col_downldstat) 相同。我不喜欢使用这种方法，因为有几个文本框，整个想法是从这样的设计中迁移出来。

请注意，文本框只是在单元格中，而不是在表单中。

我确实知道 application.statusbar 但这不是很明显。

如何在 VBA 子处于活动状态时更新这些文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:53:51.950

把你`UpdateStatus`改成这个。

```
Sub UpdateStatus(state As String)
    Application.ScreenUpdating = True
    Application.Calculation = xlCalculationAutomatic

    RefsSheet.Cells(row_downldstat, col_downldstat) = state

    Wait 1

    Application.ScreenUpdating = False
    Application.Calculation = xlCalculationManual

    Application.DisplayStatusBar = True
    Application.StatusBar = state
End Sub 
```

并在上面添加这个新的子。

```
Private Sub Wait(ByVal nSec As Long)
    nSec = nSec + Timer
    While nSec > Timer
        DoEvents
    Wend
End Sub 
```

现在测试它;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:32:50.570

我不确定这是否正是您正在寻找的：

你说

> 这个想法是向用户提供关于正在发生的事情的反馈

如果您无法更新单元格，那么创建一个在代码运行时出现的用户表单可能会很有用。

这是您可以使用的一种用户表单的链接，它仅显示一个进度条（当您进行大量循环时最容易使用，但只要您不关心，就可以在线性代码中使用关于百分比准确度）

[http://spreadsheetpage.com/index.php/tip/displaying_a_progress_indicator/](http://spreadsheetpage.com/index.php/tip/displaying_a_progress_indicator/)

从链接：

```
 PctDone = Counter / (RowMax * ColMax)
    With UserForm1
        .FrameProgress.Caption = Format(PctDone, "0%")
        .LabelProgress.Width = PctDone * (.FrameProgress.Width - 10)
    End With 
```

' DoEvents 语句负责更新 DoEvents 的表单

如果您愿意，您可以编辑用户表单和代码以简单地更新

```
 .frameprogress.caption =format(pctdone, "0%") 
```

到

```
 .frameprogress.caption = "String of desired text" 
```

这是您可以向用户反馈子正在运行的一种方式，但它可能不是您的需求的最佳选择

# php - 如何在 PHP 中用 UTF-8 支持替换所有非字母字符

> ID：11989482
> 
> 赞同：9
> 
> 时间：2012-08-16T14:33:18.560
> 
> 标签：php, regex, utf-8, preg-replace

我想从字符串中删除所有非字母字符。问题是我不知道字母范围，因为它是 UTF8 字符串。

它可以是英语、ՀԱՅԵՐԵՆ、ქართული、УКРАЇНСЬКИЙ、РУССКИЙ

我通常会这样做：

```
$str = preg_replace('/[^a-zA-Z]/', '', $str); 
```

或者

```
$str = preg_replace('/[^\w]/u', '', $str); 
```

但它们都清除了外来字符。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T14:42:20.127

使用[Unicode 字符属性](http://php.net/manual/en/regexp.reference.unicode.php)：

```
$str = preg_replace('/\P{L}+/u', '', $str); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T14:37:38.677

**更新：**至于 Unicode，RegExp 看起来像这样**`[^\p{L}\s]+`**（不替换空格）

它将用 UTF8 支持替换所有非字母字符。

*   `\P{L}+`- 匹配任何非字母符号
*   `\p{P}+`- 仅删除标点符号

以下是一些有用的参考文档：

*   [RegExp UTF8 教程](http://www.regular-expressions.info/unicode.html)
*   [Unicode 字符属性](http://php.net/manual/en/regexp.reference.unicode.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:43:00.557

字母的 Unicode 属性是`\pL`，对于非字母是`\PL`

```
$str = preg_replace('/\PL+/u', '', $str); 
```

# mysql - 按最低的 second_field 选择条目过滤具有相同字段的行

> ID：11989483
> 
> 赞同：1
> 
> 时间：2012-08-16T14:33:23.837
> 
> 标签：mysql, sql

我有一张像这样的桌子：

```
id(int)    flag(int)    price(float)

1          0            50
2                       400
3          4            200
4          3            150
5          3            100
6          3            400
7          2            120 
```

我想选择所有具有 distinct 的行，在每组中`flag`选择最低的 所以，在这个例子中我会得到：`price``flag`

```
id(int)    flag(int)    price(float)

1          0            50
2                       400
3          4            200
5          3            100
7          2            120 
```

请注意，这`flag`不是强制性的，因此它可以有一个值（int）或什么都没有（null）。

问候

编辑：

只是为了让它更清楚。

我想选择所有具有 a`id`和 a的行`price`，而不是按价格过滤。然后我想只加入每组价格最低的行`flags`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:35:24.613

```
SELECT id, flag, price
FROM tbl t
WHERE NOT EXISTS (
  SELECT 1
  FROM tbl tt
  WHERE t.flag = tt.flag
    AND (tt.price < t.price 
         OR (tt.price = t.price AND t.id < tt.id))); 
```

这是一个[sqlfiddle](http://sqlfiddle.com/#!2/9249b/1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:37:33.643

以下查询查找每个标志的最低价格，然后将它们连接到原始数据以获取 id（以及该行的其他信息）。

```
select t.*
from table t join
     (select flag, min(price) as minprice
      from table t
      group by flag
     ) tsum
     on (tsum.flag = t.flag or tsum.flag is null as t.flag is null) and
        (tsum.minprice = t.price) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:46:20.493

我认为您需要 Id 列，如果不需要，您只需要这样做

```
SELECT flag, MIN(price) as price FROM Table GROUP BY flag 
```

如果你需要它，你必须这样做

```
SELECT TBL1.*
FROM table TBL1
LEFT JOIN (SELECT flag, MIN(price) as price FROM table GROUP BY flag) TBL2
ON TBL1.flag = TBL2.flag AND TBL1.price = TBL2.price
WHERE TBL2.price IS NOT NULL 
```

最后一个查询使用分组的结果，再次与原始表连接，然后过滤价格与最小值不同的行

# android - 如何更新特定行中的 SQLite 数据库？

> ID：11989496
> 
> 赞同：0
> 
> 时间：2012-08-16T14:33:49.780
> 
> 标签：android, sqlite

我试过这个：

```
 public void updateCharacter(String charName, int level, int stamina) 
        {
            ContentValues args = new ContentValues();
            //args.put(KEY_CHAR_NAME, charName);
            args.put(KEY_LEVEL, level);
            args.put(KEY_STAMINA, stamina);

           db.update(CHARACTERS_TABLE, args,  KEY_CHAR_NAME + "=" + charName, null);
        } 
```

这是我的函数调用：

```
 db.updateCharacter("myPlayer", 2, 2); 
```

得到这个例外：

```
android.database.sqlite.SQLiteException: no such column: myPlayer: , while compiling: UPDATE characters_table SET level=?, stamina=? WHERE charName=myPlayer 
```

我 99% 确定我有这样一列我可以打印出来，我在布局中看到它在第一列中明确得到 myPlayer，即 KEY_CHAR_NAME (charName)，那么有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:46:42.787

用这个

> db.update(CHARACTERS_TABLE, args, KEY_CHAR_NAME + "=?" , new String[]{charName})

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:43:52.010

代替

```
db.update(CHARACTERS_TABLE, args,  KEY_CHAR_NAME + "=" + charName, null); 
```

尝试这个

```
db.update(CHARACTERS_TABLE, args,  KEY_CHAR_NAME + "=" + "charName", null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:45:44.660

我希望您需要将角色名称放在引号中。大概是这样的：

```
db.update(CHARACTERS_TABLE, args,  KEY_CHAR_NAME + "=\"" + charName + "\"", null); 
```

# image - 如何从没有扩展名的 URL 获取图像？

> ID：11989498
> 
> 赞同：-2
> 
> 时间：2012-08-16T14:33:57.967
> 
> 标签：image, url, file-extension

[https://lh4.ggpht.com/HSXdsQpFEOTgh0QywV4NzNJIPADnWnkCVOsMmQkIgG9K08pQcwpNiWlu3Ls73mzYMTM=h230](https://lh4.ggpht.com/HSXdsQpFEOTgh0QywV4NzNJIPADnWnkCVOsMmQkIgG9K08pQcwpNiWlu3Ls73mzYMTM=h230)

如何使用 PHP 从这个 URL 获取扩展或图像本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:40:11.560

但它没有扩展名。而且它没有内容处置标头来为您提供线索。

下载此图像时，您需要检查内容类型标头以找出图像格式。

# python - 将“\r\n”替换为“\n”

> ID：11989501
> 
> 赞同：20
> 
> 时间：2012-08-16T14:34:09.603
> 
> 标签：python

我有一些文本数据正在打印出实际字符“\r\n”（总共四个字符）。我想用单个“\n”字符替换这四个字符，但我似乎无法让 Python 为我做这件事。我目前正在尝试：

```
mytext.replace("\r\n", "\n") 
```

但这只会打印出“\n”（两个字符，而不是一个）。我觉得我可能遗漏了一些明显的东西，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-16T15:08:15.390

我建议使用分割线而不是正则表达式或搜索/替换

```
"\n".join(mytext.splitlines()) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-16T14:37:24.687

```
mytext.replace(r"\r\n", r"\n") 
```

'r' 表示一个原始字符串，它告诉 python 将文本中的反斜杠解释为文字字符而不是转义字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-04T08:40:15.230

`"\n".join(mytext.splitlines())` 这对我有用。 `mytext.replace(r"\r\n", r"\n")`，这行不通。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-27T18:18:35.120

如果上述任何一项都不起作用，这是一个尝试的解决方案（我使用 Python3 的 Anaconda 发行版就是这种情况）。

```
mytext.replace("\\r\\n", "\\n") 
```

这与 \ 被用作转义字符有关。我认为使用原始字符串格式化程序的上述答案会达到同样的效果，但无论出于何种原因，这对我不起作用，而这确实有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T14:36:34.813

对不起，我看错了你的问题：

在这种情况下，您应该在字符串前面加上 ar 以使用原始字符串：

```
mytext.replace(r"\r\n", r"\n") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-02T01:58:27.620

当您将文件读取到变量时，python 会自动将 '\r\n' 转换为 '\n'，反之亦然。但是，如果您使用“二进制模式”写回文件，那么 python 会将您的内容准确地写入文件。因此，只需将文件读取到变量并以二进制模式回写即可在 Windows 平台中自动将 '\r\n' 转换为 '\n'。

```
file_name = 'test.sh'
file_content = ''
with open(file_name) as f:
    file_content = f.read()

with open(file_name, 'wb') as f:
    f.write(file_content) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-03T01:31:38.737

```
 LINEBREAK = "\n"

with open(filename) as f:
    s = f.read()
    s = LINEBREAK.join(s.splitlines())
with open(new_filename, "wb") as f:
    f.write(s + "\n") 
```

如果您想使用 '\r\n' 作为换行符，只需更改`LINEBREAK`.

# python - 从字符串 python 生成所有字谜

> ID：11989502
> 
> 赞同：9
> 
> 时间：2012-08-16T14:34:08.967
> 
> 标签：python

我今天正在考虑这个问题，我带来了以下伪代码（Python 3.2）：

```
def anagrams( string ):

    for c in string:
      anagram = c + anagram( string - {c} ) # remove the char from its position in the string
      print(anagram)

    return

def main():

    word = "abcd"
    anagrams( word )

    return 
```

但是，我想知道执行此操作的 pythonic 方式： anagram = c + anagram( string - {c} )

如何从字符串中删除该字符？例如：

```
"abc" -> 'a' + "bc" -> 'a' + 'b' + "c" -> 'a' + 'b' + 'c' = 'abc'
             + "cb" -> 'a' + 'c' + "b" -> 'a' + 'c' + 'b' = 'acb'
      -> 'b' + "ac" -> 'b' + 'a' + "c" -> 'b' + 'a' + 'c' = 'bac'
             + "ca" -> 'b' + 'c' + "a" -> 'b' + 'c' + 'a' = 'bca'
      -> 'c' + "ba" -> 'c' + 'b' + "a" -> 'c' + 'b' + 'a' = 'cba'
             + "ab" -> 'c' + 'a' + "b" -> 'c' + 'a' + 'b' = 'cab' 
```

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-16T14:39:27.910

为什么不只使用[itertools](http://docs.python.org/library/itertools.html)？

```
>>> import itertools
>>> ["".join(perm) for perm in itertools.permutations("abc")]
['abc', 'acb', 'bac', 'bca', 'cab', 'cba'] 
```

该[文档](http://docs.python.org/library/itertools.html#itertools.permutations)还包含如何完成排列的代码。

* * *

**编辑：**

[没有`itertools`](https://stackoverflow.com/a/104436/142637)：

```
def all_perms(elements):
    if len(elements) <=1:
        yield elements
    else:
        for perm in all_perms(elements[1:]):
            for i in range(len(elements)):
                yield perm[:i] + elements[0:1] + perm[i:]

word = "abc"
print list(all_perms(word)) 
```

没有`itertools`和没有`generators`：

```
def all_perms(elements):
    if len(elements) <=1:
        return elements
    else:
        tmp = []
        for perm in all_perms(elements[1:]):
            for i in range(len(elements)):
                tmp.append(perm[:i] + elements[0:1] + perm[i:])
        return tmp 
```

**结果：**

> ['abc', 'bac', 'bca', 'acb', 'cab', 'cba']

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T14:39:21.567

使用`itertools`模块。

```
import itertools
perms = [''.join(perm) for perm in itertools.permutations('abc')] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-10T02:41:52.000

请注意，如果字符串包含多个字母的实例，@sloth 的答案会给出一个稍微出乎意料的结果 - 重复排列：

```
["".join(perm) for perm in itertools.permutations('aabc')] 
```

结果是：

```
['aabc',
 'aacb',
 'abac',
 'abca',
 'acab',
 'acba',
 'aabc',
 'aacb',
 'abac',
 'abca',
 'acab',
 'acba',
 'baac',
 'baca',
 'baac',
 'baca',
 'bcaa',
 'bcaa',
 'caab',
 'caba',
 'caab',
 'caba',
 'cbaa',
 'cbaa'] 
```

如果这不是想要的结果，使用'set' 将消除重复。虽然如果你想要一个列表，你需要重新列出（'set' 也不能保持顺序，所以使用'sorted'）：

```
sorted(set(["".join(perm) for perm in itertools.permutations("aabc")])) 
```

结果是：

```
['aabc',
 'aacb',
 'abac',
 'abca',
 'acab',
 'acba',
 'baac',
 'baca',
 'bcaa',
 'caab',
 'caba',
 'cbaa'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:41:35.763

您可以将单词转换为列表，运行 remove 然后使用 join 将其重新组合在一起。

```
word = 'abca'
letters = list(word)
letters.remove('a')  # Only deletes the first 'a'
word = ''.join(letters) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-02T13:09:59.503

以下是一些用于制作新脚本的建议，称为`anagram`

```
$ anagram hit
hit
hti
iht
ith
thi
tih 
```

## 字谜

```
#!/usr/bin/env python3
import argparse
import itertools
import sys

parser = argparse.ArgumentParser()
parser.add_argument("word", help="A word to generate anagrams for.")
args = parser.parse_args()

perms = [''.join(perm) for perm in itertools.permutations(args.word)]
for perm in perms:
    print(perm) 
```

# blackberry - blackberry - 发送 pushapi 注册请求导致连接超时

> ID：11989505
> 
> 赞同：0
> 
> 时间：2012-08-16T14:34:14.473
> 
> 标签：blackberry

当我以编程方式/在浏览器中尝试此操作时，它会超时。知道我哪里出错了吗？我的请求看起来像这样 -

[http://pushapi.eval.blackberry.com/mss/PD_subReg?serviceid=myServiceId&osversion=5.0.0.436&model=9520](http://pushapi.eval.blackberry.com/mss/PD_subReg?serviceid=myServiceId&osversion=5.0.0.436&model=9520)

# xml - TextMate 中的 XML 补全

> ID：11989506
> 
> 赞同：1
> 
> 时间：2012-08-16T14:34:20.697
> 
> 标签：xml, macos, textmate

如何在 Mac OSX 上将 XML 补全与 TextMate 结合使用？它甚至支持 XML 代码完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:06:20.300

我不相信它目前这样做。

我已经在 AppCode 和 Oxygen 中设置了架构和代码完成工作。不适用于 XCode 或 TextMate。我尝试安装 XMLMate 插件，但没有帮助。

然而，这不是一个非常明确的答案，因为到目前为止还没有任何回应。. . .

# localization - Orchard CMS 中的本地化 DisplayName 属性

> ID：11989507
> 
> 赞同：0
> 
> 时间：2012-08-16T14:34:23.067
> 
> 标签：localization, data-annotations, orchardcms

我已经以其他形式看到过这个问题（主要与验证有关），但无法理解答案。

我有以下内容：

```
 [Required, DisplayName("First Name")]
    public virtual string GivenName { get; set; } 
```

我想让 DisplayName 本地化。我通过创建一个RequiredAttribute Extension 来进行尝试，就像其他人一样：

```
public class RequiredFieldAttribute : System.ComponentModel.DataAnnotations.RequiredAttribute
    {
        public RequiredFieldAttribute()
        {
            T = NullLocalizer.Instance;
        }

        public Localizer T { get; set; }

        public override string FormatErrorMessage(string name) {
            var field = T(name).Text;
            return T("Please fill in {0}.", field).Text;
        }
    }
} 
```

返回的错误消息不断返回英文名称。但我确信有翻译，因为当我在视图中使用以下内容时，我得到了本地化名称：

```
@Html.LabelFor(m => register.GivenName, T("First Name")) 
```

消息本身（请填写...）也已本地化。除了字段名称不是。在视图中请求字段名的字符串时如何本地化它，但在扩展中使用它时却没有。

在查看关于 codeplex 的讨论时，我看到一些变更集修复了有关命名空间中本地化数据注释的问题`Orchard.MVC.DataAnnotations`。但我在现有模块中找不到任何关于如何使用这些模块的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-25T08:34:10.477

这个问题可能已经过时了，但我在 Orchard CMS 1.8.1 中问自己同样的问题。所以这就是我的做法。

假设您有一个看起来像的模型

```
public class Message
{
  [System.ComponentModel.DataAnnotations.Required(ErrorMessage="Please select a date."]
  public System.DateTime Date { get; set; }
  ...
} 
```

并且您希望对所需的验证消息进行德语翻译，然后`App_Data\Localization\de-DE\orchard.module.po`在模块中创建一个文件并将以下段落放入其中

```
msgctxt "System.ComponentModel.DataAnnotations.RequiredAttribute"
msgid "Please select a date."
msgstr "Bitte wählen Sie ein Datum." 
```

您甚至可以跳过 msgctxt 行（这是翻译的范围），因为它也可以在没有它的情况下工作。.po 文件格式的描述可以在[http://pology.nedohodnik.net/doc/user/en_US/ch-poformat.html](http://pology.nedohodnik.net/doc/user/en_US/ch-poformat.html)找到。

如果翻译不起作用，那么以下方法是一个很好的调试入口点：

```
Orchard/Localization/Text.cs
public LocalizedString Get(string textHint, params object[] args) ...

Orchard/Localization/Services/DefaultLocalizedStringManager.cs
public string GetLocalizedString() ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:17:35.947

我也遇到了这个问题。我想知道你是否解决了。

您提到您找不到 Orchard.MVC.DataAnnotations 示例。它们位于（如果您使用 Orchard 源代码（从 1.6 开始））`~/Orchard.Framework/Mvc/DataAnnotations`。

这`LocalizedRequiredAttribute.cs`看起来像：

```
namespace Orchard.Mvc.DataAnnotations {
public class LocalizedRequiredAttribute : RequiredAttribute {
    public LocalizedRequiredAttribute(RequiredAttribute attribute, Localizer t) {
        AllowEmptyStrings = attribute.AllowEmptyStrings;

        if ( !String.IsNullOrEmpty(attribute.ErrorMessage) )
            ErrorMessage = attribute.ErrorMessage;

        T = t;
    }

    public Localizer T { get; set; }

    public override string FormatErrorMessage(string name) {
        return String.IsNullOrEmpty(ErrorMessage)
            ? T("The {0} field is required.", name).Text
            : T(ErrorMessage, name).Text;
    }
} 
```

~~所以你必须用`[LocalizedRequiredAttribute]`.~~ 抱歉，我现在的理解是，在此示例中，您将继续像以前一样使用 [Required]，而 Orchard 会为您进行更改。但是，您必须手动创建`.po`文件，因为 TranslationManager 不会提取这些文件。

我自己在尝试本地化`[Display(Name="")]`属性时遇到了麻烦。我的部分困惑在于`System.ComponentModel`并且`System.ComponentModel.DataAnnotations`因为它们都具有相似的属性（`DisplayNameAttribute`对于前者，`DisplayAttibute`对于后者）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T17:06:29.817

您可以在 orchard 项目中使用普通验证相同的普通 mvc 项目您只需将这些设置添加到 webconfig ：

```
<appSettings>
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

结尾

# symfony - QueryBuilder Symfony2，ASC 中的 10 个最后结果

> ID：11989516
> 
> 赞同：3
> 
> 时间：2012-08-16T14:34:40.100
> 
> 标签：symfony, query-builder

我的 QueryBuilder 查询：

```
 <?php    $qb = $this->createQueryBuilder('m')  
                   ->join('m.sender', 's')
                   ->join('m.target', 't')
                               ->addSelect('s')
                   ->addSelect('t')
                   ->where('(m.sender = '.$Myid.'OR m.target = '.$Myid.')')
                   ->andWhere('m.grouper ='.$groupe) 
                   ->orderBy('m.created_date', 'ASC')
                   ->setMaxResults('10');

                   return $qb->getQuery()
                   ->getResult(); 
```

如何在 ASC 中显示最后 10 个结果？谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:43:21.663

来自 Doctrine 的文档：

> **15.2.3\. 限制结果**
> 
> 为了限制结果，查询构建器有一些与 Query 对象相同的方法，这些方法可以从`EntityManager#createQuery()`.
> 
> ```
>  <?php
>     // $qb instanceof QueryBuilder
>     $offset = (int)$_GET['offset'];
>     $limit = (int)$_GET['limit'];
> 
>     $qb->add('select', 'u')
>        ->add('from', 'User u')
>        ->add('orderBy', 'u.name ASC')
>        ->setFirstResult( $offset )
>        ->setMaxResults( $limit ); 
> ```

如您所见，您必须使用`setFirstResult()`and `setMaxResults()`。

* * *

我建议你看一下关于 QueryBuilder 的章节，以**避免你丑陋的参数连接**......

# working-directory - 如何在太阳网格引擎中找到工作目录？

> ID：11989519
> 
> 赞同：2
> 
> 时间：2012-08-16T14:34:43.893
> 
> 标签：working-directory, sungridengine

`qsub`假设我们在 path 下提交作业`/path/to/working/dir`，在作业挂起后，我们可以获得作业的一些信息`qstat`，但没有提供**工作目录**信息`qstat`。

我们怎样才能得到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T01:03:52.457

如果您运行 qstat -j jobId，您将获得包含字段“sge_o_workdir:”的输出，该字段应该包含您需要的信息。例如，如果您的 jobID 是 1234，您的命令将如下所示。

```
qstat -j 1234 
```

输出如下所示。

```
==============================================================
job_number:                 1234
exec_file:                  job_scripts/1234
submission_time:            Wed Oct 10 19:00:03 2012
owner:                      user
uid:                        1000
group:                      group
gid:                        1000
sge_o_home:                 /home/user
sge_o_log_name:             user
sge_o_path:                 /usr/local/packages/sge-root/bin/lx24-amd64:/usr/bin:/bin
sge_o_shell:                /bin/sh
sge_o_workdir:              /path/to/workDir
sge_o_host:                 host
account:                    sge
stderr_path_list:           NONE:NONE:/path/to/error/
mail_list:                  
notify:                     FALSE
job_name:                   myJobName
stdout_path_list:           NONE:NONE:/path/to/output/
jobshare:                   0
hard_queue_list:            all.q
env_list:                   
script_file:                /some/script.sh
project:                    
usage    1:                 cpu=00:28:22, mem=83.71677 GBs, io=252.35721, vmem=234.090M, maxvmem=256.438M
scheduling info: 
```

# php - 如何使用 cron 作业与 php mysql 请求

> ID：11989522
> 
> 赞同：0
> 
> 时间：2012-08-16T14:34:52.587
> 
> 标签：php, mysql, cron

我在这里阅读了很多关于使用 php 在后台使用 mysql 的问题，其中许多人说“使用 cron 作业”，但我该如何使用这些？谷歌搜索并没有给我太多，所以这就是我在这里问的原因......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:41:31.693

如果您正在运行 Linux（运行 cron），您可以这样做：

1.  跑`crontab -e`
2.  如果它在 vi 中打开，您需要在编辑之前按 i。如果它是用 nano 打开的（底部会有组合键），你就可以开始编辑了
3.  添加您的 cron 作业（详情如下）
4.  使用`Esc`then`:wq<Enter>`保存并退出 (vi) 或`Ctrl+o`,`Ctrl+x`保存并退出 (nano)

Senouci 发布的链接将帮助您了解详细信息，但这里有一个在午夜运行作业的示例：

```
0 0 * * * php /path/to/file.php 
```

或在重新启动时：

```
@reboot php /path/to/file.php 
```

请注意，此方法仅在您具有 shell 访问权限时才有效。如果您使用的是 cPanel，请在允许的情况下使用那里的控制面板。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T14:36:02.160

[http://www.pantz.org/software/cron/croninfo.html](http://www.pantz.org/software/cron/croninfo.html)

[http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)

这花了我 2 秒

那我不好，这是一个链接，解释了如何在 cpanel 下完成它：

[http://www.siteground.com/tutorials/cpanel/cron_jobs.htm](http://www.siteground.com/tutorials/cpanel/cron_jobs.htm)

# css - z-index 下拉菜单落后于页面文本

> ID：11989523
> 
> 赞同：1
> 
> 时间：2012-08-16T14:35:00.897
> 
> 标签：css, drop-down-menu, z-index

我遇到了一个问题，我的 CSS 下拉菜单仍然显示在所有页面文本的后面。我`z-index: 9999;`在我的 UL 项目上使用 ，但仍然没有。我在下面添加了一个屏幕截图，你可以[在这里查看我的现场演示](http://byjakewithlove.com/code/basic-responsive/)。

![zindex ul 菜单错误](../Images/ec740a4e4be5c05d49f51d6635ad9040.png)

我已经尝试将 z-index 属性添加到大多数容器中，但仍然没有运气。这个小问题要了我的命！我一定会很感激我能得到解决这个问题的任何帮助:)谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:36:26.950

你`z-index`是对的，它出现在内容上，你只是忘了`background-color`在你的菜单中添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:38:55.060

是的，绝对是背景颜色，因为悬停时它会覆盖后面的内容。

我也在我的检查员身上尝试过，将颜色设置为白色并正常工作。

# sql - 列默认优先于 INSERT..SELECT 语句中的插入值

> ID：11989525
> 
> 赞同：0
> 
> 时间：2012-08-16T14:35:06.047
> 
> 标签：sql, oracle11g

`TARGET_TABLE`在with 下面的语句中插入值时`INSERT..SELECT`，列的默认值`lastupdate`似乎优先于`SELECT`语句产生的值。

即使在`SOURCE_TABLE`.

例子：

`SOURCE_TABLE`包含`lastupdate = 16.08.12 15:41:44`

执行语句后，`lastupdate`in`TARGET_TABLE`被设置为`SYSDATE`，例如`16.08.12 15:49:14`：

```
INSERT INTO TARGET_TABLE (A, B, C, D, LASTUPDATE, F)
        SELECT A, B, C, D, LASTUPDATE, F
            FROM SOURCE_TABLE
            WHERE B = 'some_value';

CREATE TABLE TARGET_TABLE
(
ID NUMBER NOT NULL,
A VARCHAR2(255 CHAR) NOT NULL,
B VARCHAR2(255 CHAR) NOT NULL,
C CLOB NOT NULL,
D VARCHAR2(255 CHAR),
LASTUPDATE DATE DEFAULT SYSDATE,
E DATE DEFAULT SYSDATE
) 
```

Oracle 版本：Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production

我希望将值从复制`SOURCE_TABLE`到`TARGET_TABLE`而不是设置为`SYSDATE`。

我在这里想念什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:48:34.440

您可以从显示此行为的 SQL*Plus 会话中复制和粘贴吗？它不会在我的 11.2 数据库上重现，这不是我亲眼见过的事情。

```
SQL> CREATE TABLE TARGET_TABLE
  2  (
  3  ID NUMBER NOT NULL,
  4  A VARCHAR2(255 CHAR) NOT NULL,
  5  B VARCHAR2(255 CHAR) NOT NULL,
  6  C CLOB NOT NULL,
  7  D VARCHAR2(255 CHAR),
  8  LASTUPDATE DATE DEFAULT SYSDATE,
  9  E DATE DEFAULT SYSDATE
 10  );

Table created.

SQL> ed
Wrote file afiedt.buf

  1  CREATE TABLE SOURCE_TABLE
  2  (
  3  ID NUMBER NOT NULL,
  4  A VARCHAR2(255 CHAR) NOT NULL,
  5  B VARCHAR2(255 CHAR) NOT NULL,
  6  C CLOB NOT NULL,
  7  D VARCHAR2(255 CHAR),
  8  LASTUPDATE DATE DEFAULT SYSDATE,
  9  E DATE DEFAULT SYSDATE
 10* )
SQL> /

Table created. 
```

我不得不将您更改`INSERT`为`SOURCE_TABLE`指定列`E`，而不是`F`因为该`CREATE TABLE`语句只有一个列`E`。

```
SQL> insert into source_table( id, a, b, c,d, lastupdate, e )
  2    values( 1, 'A', 'some_value', empty_clob(), 'D', date '2012-01-01', sysdate );

1 row created. 
```

我还必须将您更改`INSERT`为`TARGET_TABLE`添加`ID`列，因为它有一个`NOT NULL`约束。我假设在您的实际示例中，这可能是由`TARGET_TABLE`从序列中选择数据的触发器填充的。这个触发器（或其他触发器）是否也可以设置该`LASTUPDATE`值？

```
SQL> ed
Wrote file afiedt.buf

  1  INSERT INTO TARGET_TABLE (ID, A, B, C, D, LASTUPDATE, E)
  2          SELECT ID, A, B, C, D, LASTUPDATE, E
  3              FROM SOURCE_TABLE
  4*             WHERE B = 'some_value'
SQL> /

1 row created.

SQL> select id, lastupdate from target_table;

        ID LASTUPDAT
---------- ---------
         1 01-JAN-12 
```

# sql-server-2008 - 完全禁用对 SQL Server 的远程访问

> ID：11989526
> 
> 赞同：12
> 
> 时间：2012-08-16T14:35:10.197
> 
> 标签：sql-server-2008, remote-access

我处于恐慌模式。今天，当导航到我的网站时，我看到该网站因 SQL Server 超时而关闭（在遭受数百万次登录尝试的攻击之后）。无法处理 ASP.Net 页面，因为 SQL Server 请求不起作用。

SQL Server 2008 中是否有用于远程访问的开/关按钮？我看到了很多关于添加防火墙规则的模糊线程。我永远不需要远程访问 SQL Server，所以我不需要过滤访问，我只需要将其限制为 127.0.0.1。这可行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:39:00.510

在服务器属性/连接下，您可以取消选中

> “允许远程连接”

盒子。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T14:59:43.000

您还可以使用配置管理器禁用 tcp-ip

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-24T06:36:58.040

1）您应该关闭“允许远程连接” - 在 SQL Server Management Studio 中执行此操作（右键单击服务器、属性、连接）

2）确保您的防火墙被阻止（MSSQL - 右键单击​​并将其设置为阻止）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-07T17:49:21.970

不要复活一个老问题，但我最近自己也遇到了这种需求。远程连接按钮是服务器到服务器的通信，通常用于执行存储过程，例如上一篇文章中提到的。如果您出于开发目的或独立服务器在笔记本电脑上运行 SQL 并且不希望 SQL 侦听任何外部端口，则禁用 TCP/IP 和命名管道的防火墙规则应阻止外部连接。

# php - 我需要将一个 php 变量传递给 DataTables.Editable sUpdateURL

> ID：11989530
> 
> 赞同：0
> 
> 时间：2012-08-16T14:35:23.923
> 
> 标签：php, javascript, jquery, mysql, datatables

嗨，我需要将一个调用的变量传递`$process_id`给文件`"config/update.php"`，该文件是负责使用 DataTables.Editable 更新实时表的文件。

这个变量是一个整数，用于创建一个表（例如table1），所以为了更新我需要的特定表`UPDATE table$process_id SET...`并且能够做到这一点，我需要将该变量传递给更新表的脚本。

这是我在对[Datatables.Editable Wiki](http://code.google.com/p/jquery-datatables-editable/w/list)进行一些研究后得出的结论：

DataTables 初始化和添加 makeEditable 函数：

```
$('#example').dataTable().makeEditable({
    sUpdateURL: "config/update.php",
    oUpdateParameters: { 
        "process_id": "<?php echo $process_id; ?>"
    }
}); 
```

和`update.php`文件

```
<?php
$id = $_REQUEST['id'] ;
$value = $_REQUEST['value'] ;
$column = $_REQUEST['columnName'] ;
$columnPosition = $_REQUEST['columnPosition'] ;
$columnId = $_REQUEST['columnId'] ;
$rowId = $_REQUEST['rowId'] ;
$column_name = trim($column);

$process_id = $_REQUEST['process_id'];

include("config.php");

// mysql_query(" UPDATE $sTable SET $column = $value WHERE trl_id = $id ");
mysql_query("UPDATE tw_tg_sim_lines$process_id SET $column_name = '$value' WHERE trl_id = '$id'");

echo $id;

?> 
```

我已经尝试过不同的方法，例如 $_POST、$_GET 和 $_REQUEST。似乎没有任何效果，所以问题出在`oUpdateParameters`.

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:42:09.037

我完全在思考这个问题，我为此道歉。但是，如果你和我在同一条船上，看不清这个……

这是我为解决此问题所做的工作：

```
$('#table').dataTables().makeEditable({
    sUpdateURL: "config/update.php?process_id=<?php echo $process_id; ?>"
}); 
```

这使我能够在 update.php 上执行以下操作：

```
$id = $_REQUEST['id'] ;
$value = $_REQUEST['value'] ;
$column = $_REQUEST['columnName'] ;
$columnPosition = $_REQUEST['columnPosition'] ;
$columnId = $_REQUEST['columnId'] ;
$rowId = $_REQUEST['rowId'] ;
$column_name = trim($column);
$process_id = $_GET['process_id'];

mysql_query("UPDATE tw_tg_sim_lines$process_id SET $column_name = '$value' WHERE trl_id = '$id'"); 
```

这个超级简单，我确实有点不好意思。但在这里。

有时简单的很难看。

谢谢你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:45:51.417

我猜你需要对 php 脚本进行 ajax 调用

这在过去使用 jquery 对我有用

```
var dataString = ('process_id='+ <?php echo $process_id; ?>);

   $.ajax({
      type: "GET",
      url: "config/update.php",
      data: dataString,
      success: function(data) {
        $('.result').html(data);
        alert('Load was performed.');
      }
    }); 
```

在这里引用[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c# - 检查清单 匹配用户定义的字符串

> ID：11989536
> 
> 赞同：1
> 
> 时间：2012-08-16T14:35:41.493
> 
> 标签：c#

我很难找到一种合适的方法来搜索`List<>`我拥有的字符串以匹配用户指定的字符串，我什至不确定我是否会以最好的方式进行处理，但到目前为止我得到的是：

```
 // This is the input string.
        string input = userDefinedStr.ToLower(); //New variable and made into lower cases.           

        for (int i = 0; i < listBox1.Items.Count; i++)
        {
            if (listBox1.Items[i].ToString().IndexOf(input, stringComparison.OrdinalIgnoreCase) >= 0)
            {
                listBox1.SetSelected(i, true);
            }
            else
            {
                MessageBox.Show("Sorry, There was no matches found.", "An oupps happend!");                    
            }

        } 
```

问题是在`List`包含用户定义字符串的字符串中可能有更多的一个字符串，我猜最好的方法实际上是在其中显示所有`List<string>`匹配项，`listBox1`而不是仅仅标记找到的第一个匹配项。

还是可以用另一种更有效的方式来完成？！？

我是 C# 和一般编码的新手，所以我觉得我不知道最好的方法，我已经阅读了很多文章和帖子，但我找不到指向我正确方向的文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:45:26.010

您可以过滤列表框的内容以仅显示与搜索条件匹配的项目。所有其他项目都被删除。这意味着`listBox1`不包含实际数据，而只是对数据的一个视图，并且完整的数据存储在其他地方。用户还必须有一种方法来重置过滤器，以便再次使用完整的数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:52:41.233

您展示了一个良好的开端，但是使用 . 中的该`if`语句`for`，您将得到一个针对每个不匹配的项目弹出的消息框。

如果您希望使用目前的代码，只需`bool`在（初始化为 false）之前添加一个，`for`并在找到匹配项时将其设置为 true。一旦`for`完成，测试它`bool`，如果它仍然是错误的，没有找到匹配的，所以你应该显示你的消息框。

我怀疑它可以在 Linq 中用更少的击键来完成，但它可能不是那么容易阅读/理解，取决于和可维护（/易于阅读/理解）代码比聪明更可取，因为你*必须*稍后修复它。

# java - 如何在使用 SAXParser 解析 XML 时添加 AsyncTask？

> ID：11989539
> 
> 赞同：0
> 
> 时间：2012-08-16T14:35:51.413
> 
> 标签：java, android

> 我需要添加一个 AsyncTask ，因为它不适用于 API LEVEL 10-15。或 Gingerbread 到 ICS。试图添加，但我没有任何成功。

```
public class GBXMLParser extends Activity {
/** Create Object For SiteList Class */
SiteList sitesList = null;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    /** Create a new layout to display the view */
    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(1);
    /** Set the layout view to display */
    this.setContentView(layout);

    /** Create a new TextView array to display the results */
    TextView name[];
    TextView website[];
    TextView category[];

    try {
        /** Handling XML */
        SAXParserFactory spf = SAXParserFactory.newInstance();
        SAXParser sp = spf.newSAXParser();
        XMLReader xr = sp.getXMLReader();

        /** Send URL to parse XML Tags */
        URL sourceUrl = new URL("http://url.xml");

        /** Create handler to handle XML Tags ( extends DefaultHandler ) */
        MyXMLHandler myXMLHandler = new MyXMLHandler();
        xr.setContentHandler(myXMLHandler);
        xr.parse(new InputSource(sourceUrl.openStream()));
    } catch (Exception e) {
        System.out.println("XML Pasing Excpetion = " + e);
    }

    /** Get result from MyXMLHandler SitlesList Object */
    sitesList = MyXMLHandler.sitesList;

    /** Assign TextView array length by arrayList size */
    name = new TextView[sitesList.getName().size()];
    website = new TextView[sitesList.getName().size()];
    category = new TextView[sitesList.getName().size()];

    /** Set the result text in TextView and add it to layout */
    for (int i = 0; i < sitesList.getName().size(); i++) {
        name[i] = new TextView(this);
        name[i].setText("Name = " + sitesList.getName().get(i));
        website[i] = new TextView(this);
        website[i].setText("Website = " + sitesList.getWebsite().get(i));
        category[i] = new TextView(this);
        category[i].setText("Website Category = "
                + sitesList.getCategory().get(i));
        layout.addView(name[i]);
        layout.addView(website[i]);
        layout.addView(category[i]);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:38:33.970

```
 public class MyAsyncTask extends AsyncTask<Void, Void, Result>{

                        private Activity activity;
                        private ProgressDialog progressDialog;

            public MyAsyncTask(Activity activity) {
                            super();
                this.activity = activity;
            }

            @Override
            protected void onPreExecute() {
            super.onPreExecute();
                progressDialog = ProgressDialog.show(activity, "Loading", "Loading", true);
            }

            @Override
            protected Result doInBackground(Void... v) {
            //do your stuff here
            return null;

            }

            @Override
            protected void onPostExecute(Result result) {
                progressDialog.dismiss();
                Toast.makeText(activity.getApplicationContext(), "Finished.", 
                        Toast.LENGTH_LONG).show();
            }

} 
```

从活动中调用它：

```
MyAsyncTask task = new AsyncTask(myActivity.this);
task.execute(); 
```

# html - 在 div 内仅在两行内换行文本

> ID：11989546
> 
> 赞同：119
> 
> 时间：2012-08-16T14:36:07.343
> 
> 标签：html, css

我想在特定宽度的 div 内仅两行内包装文本。如果文本超过两行的长度，那么我想显示省略号。有没有办法使用 CSS 做到这一点？

例如

```
Sample text showing wrapping
of text in only two line... 
```

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-08-16T14:42:40.473

如果设置元素的 and 和 set `line-height`，则可以使用 CSS 将输出限制为两行文本：`height``overflow:hidden;`

```
#someDiv {
    line-height: 1.5em;
    height: 3em;       /* height is 2x line-height, so two lines will display */
    overflow: hidden;  /* prevents extra lines from being visible */
} 
```

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/jackwanders/sxk8n/)

或者，您可以使用 CSS`text-overflow`和`white-space`属性添加省略号，但这似乎仅适用于单行。

```
#someDiv {
    line-height: 1.5em;
    height: 3em;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    width: 100%;
} 
```

还有一个演示：

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/jackwanders/sxk8n/1/)

实现多行文本和省略号似乎是 javascript 的领域。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2015-09-15T11:35:02.107

另一个简单快速的解决方案

```
.giveMeEllipsis {
   overflow: hidden;
   text-overflow: ellipsis;
   display: -webkit-box;
   -webkit-box-orient: vertical;
   -webkit-line-clamp: N; /* number of lines to show */
   line-height: X;        /* fallback */
   max-height: X*N;       /* fallback */
} 
```

原始问题和答案的参考在[这里](https://stackoverflow.com/a/13924997/842386)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-11-06T22:44:39.980

我见过的最好的只有 CSS 和响应式的来自[Mobify 开发者博客 - CSS Ellipsis: How to Manage Multi-Line Ellipsis in Pure CSS](http://www.mobify.com/blog/multiline-ellipsis-in-pure-css/)：

[JS 小提琴示例](http://jsfiddle.net/0dqef9da/)

CSS：

```
html, body, p { margin: 0; padding: 0; font-family: sans-serif;}

.ellipsis {
    overflow: hidden;
    height: 200px;
    line-height: 25px;
    margin: 20px;
    border: 5px solid #AAA; }

.ellipsis:before {
    content:"";
    float: left;
    width: 5px; height: 200px; }

.ellipsis > *:first-child {
    float: right;
    width: 100%;
    margin-left: -5px; }        

.ellipsis:after {
    content: "\02026";  

    box-sizing: content-box;
    -webkit-box-sizing: content-box;
    -moz-box-sizing: content-box;
    float: right; position: relative;
    top: -25px; left: 100%; 
    width: 3em; margin-left: -3em;
    padding-right: 5px;

    text-align: right;

    background: -webkit-gradient(linear, left top, right top,
        from(rgba(255, 255, 255, 0)), to(white), color-stop(50%, white));
    background: -moz-linear-gradient(to right, rgba(255, 255, 255, 0), white 50%, white);           
    background: -o-linear-gradient(to right, rgba(255, 255, 255, 0), white 50%, white);
    background: -ms-linear-gradient(to right, rgba(255, 255, 255, 0), white 50%, white);
    background: linear-gradient(to right, rgba(255, 255, 255, 0), white 50%, white); } 
```

html:

```
<div class="ellipsis">
    <div class="blah">
        <p>Call me Ishmael. Some years ago &ndash; never mind how long precisely &ndash; having little or no money in my purse, and nothing particular to interest me on shore, I thought I would sail about a little and see the watery part of the world. It is a way I have of driving off the spleen, and regulating the circulation. Whenever I find myself growing grim about the mouth; whenever it is a damp, drizzly November in my soul; whenever I find myself involuntarily pausing before coffin warehouses, and bringing up the rear of every funeral I meet; and especially whenever my hypos get such an upper hand of me, that it requires a strong moral principle to prevent me from deliberately stepping into the street, and methodically knocking people's hats off &ndash; then, I account it high time to get to sea as soon as I can.</p>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-08-16T14:45:04.420

我相信纯 CSS 解决方案`text-overflow: ellipsis`仅适用于一行，因此您将无法走这条路：

```
.yourdiv {

    line-height: 1.5em; /* Sets line height to 1.5 times text size */
    height: 3em; /* Sets the div height to 2x line-height (3 times text size) */
    width: 100%; /* Use whatever width you want */
    white-space: normal; /* Wrap lines of text */
    overflow: hidden; /* Hide text that goes beyond the boundaries of the div */
    text-overflow: ellipsis; /* Ellipses (cross-browser) */
    -o-text-overflow: ellipsis; /* Ellipses (cross-browser) */
} 
```

您是否为 jQuery尝试过[http://tpgblog.com/threedots/ ？](http://tpgblog.com/threedots/)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2019-06-21T20:25:43.217

**仅 CSS**

```
 overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical; 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-03-28T10:28:53.203

Webkit 的唯一 CSS 解决方案

```
// Only for DEMO
$(function() {

  $('#toggleWidth').on('click', function(e) {

    $('.multiLineLabel').toggleClass('maxWidth');

  });

})
```

```
.multiLineLabel {
  display: inline-block;
  box-sizing: border-box;
  white-space: pre-line;
  word-wrap: break-word;
}

.multiLineLabel .textMaxLine {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  overflow: hidden;
}

/* Only for DEMO */

.multiLineLabel.maxWidth {
  width: 100px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="multiLineLabel">
  <span class="textMaxLine">This text is going to wrap automatically in 2 lines in case the width of the element is not sufficiently wide.</span>
</div>
<br/>
<button id="toggleWidth">Toggle Width</button>
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-12-17T10:45:46.407

尝试这样的事情：http: [//jsfiddle.net/6jdj3pcL/1/](http://jsfiddle.net/6jdj3pcL/1/)

```
<p>Here is a paragraph with a lot of text ...</p>

p {
    line-height: 1.5em;
    height: 3em;
    overflow: hidden;
    width: 300px;
}

p::before {
   content: '...';
   float: right;
   margin-top: 1.5em;
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-06-25T16:29:18.817

通常，单行截断非常简单

```
.truncate-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
} 
```

两行截断有点棘手，但可以用 css 来完成，这个例子是在 sass 中。

```
@mixin multiLineEllipsis($lineHeight: 1.2rem, $lineCount: 2, $bgColor: white, $padding-right: 0.3125rem, $width: 1rem, $ellipsis-right: 0) {
  overflow: hidden; /* hide text if it is more than $lineCount lines  */
  position: relative; /* for set '...' in absolute position */
  line-height: $lineHeight; /* use this value to count block height */
  max-height: $lineHeight * $lineCount; /* max-height = line-height * lines max number */
  padding-right: $padding-right; /* place for '...' */
  white-space: normal; /* overwrite any white-space styles */
  word-break: break-all; /* will break each letter in word */
  text-overflow: ellipsis; /* show ellipsis if text is broken */

  &::before {
    content: '...'; /* create the '...'' points in the end */
    position: absolute;
    right: $ellipsis-right;
    bottom: 0;
  }

  &::after {
    content: ''; /* hide '...'' if we have text, which is less than or equal to max lines and add $bgColor */
    position: absolute;
    right: 0;
    width: $width;
    height: 1rem * $lineCount;
    margin-top: 0.2rem;
    background: $bgColor; /* because we are cutting off the diff we need to add the color back. */
  }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-08-16T14:45:06.190

请参阅[http://jsfiddle.net/SWcCt/](http://jsfiddle.net/SWcCt/)。

只需设置`line-height`一半`height`：

```
line-height:20px;
height:40px; 
```

当然，为了`text-overflow: ellipsis`工作，您还需要：

```
overflow:hidden;
white-space: pre; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-03T20:13:11.087

@Asiddeen bn Muhammad 的解决方案对 css 进行了一些修改，对我有用

```
 .text {
 line-height: 1.5;
  height: 6em; 
white-space: normal;
overflow: hidden;
text-overflow: ellipsis;
display: block;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
 } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-29T08:42:33.730

下面为我​​工作：

CSS：

```
.longWordBreakParent {
  display: flex;
}
.longWordBreak {
  word-break: break-all;
} 
```

HTML：

```
<div className="longWordBreakParent">
    <span className='longWordBreak'>someverylongtextthatcannotbefitinoneline</span>
</div> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2021-06-15T11:13:39.197

在所有这些示例中，假设我们有：

```
#someDiv {
  width: 250px;
  overflow: hidden;
} 
```

# sql - 如何将 XML 值中的两个子节点解析为 SQL？

> ID：11989547
> 
> 赞同：0
> 
> 时间：2012-08-16T14:36:08.060
> 
> 标签：sql, xml, sql-server-2008, xml-parsing, nodes

我有以下 XML：

```
<xmlRoot>
  <DomainName>sample.com</DomainName>
  <UserCountsByTemplate>
    <KeyValueOfstringint>
      <Key>default</d2p1:Key>
      <Value>20</d2p1:Value>
    </KeyValueOfstringint>
    <KeyValueOfstringint>
      <Key>basic</d2p1:Key>
      <Value>66</d2p1:Value>
    </KeyValueOfstringint>
  </UserCountsByTemplate>
</xmlRoot> 
```

我试图让两行像这样返回：

```
Domain      TemplateName  TemplateCount
----------  ------------  -------------
sample.com  default       20
sample.com  basic         66 
```

我尝试了以下方法：

```
DECLARE @info XML
SELECT @info = '<xmlRoot><DomainName>sample.com</DomainName><UserCountsByTemplate><KeyValueOfstringint><Key>default</Key><Value>20</Value></KeyValueOfstringint><KeyValueOfstringint><Key>basic</Key><Value>66</Value></KeyValueOfstringint></UserCountsByTemplate></xmlRoot>'
SELECT 
      row.value('DomainName[1]','NVARCHAR(255)') AS [DomainName]
    , row2.value('.','NVARCHAR(255)') AS [TemplateName]
    , row3.value('.','INT') AS [TemplateCount]
FROM @info.nodes('/xmlRoot[1]') T1(row)
CROSS APPLY @info.nodes('/xmlRoot/UserCountsByTemplate/KeyValueOfstringint/Key') T2(row2)
CROSS APPLY @info.nodes('/xmlRoot/UserCountsByTemplate/KeyValueOfstringint/Value') T3(row3) 
```

但是得到以下结果：

```
Domain      TemplateName  TemplateCount
----------  ------------  -------------
sample.com  default       20
sample.com  basic         20
sample.com  default       66
sample.com  basic         66 
```

关于我在哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:40:29.190

您没有关联对 Key 的访问和对 value 的访问 - 因此您有效地在所有键和所有值之间产生了交叉连接。

```
DECLARE @info XML
SELECT @info = '<xmlRoot><DomainName>sample.com</DomainName><UserCountsByTemplate><KeyValueOfstringint><Key>default</Key><Value>20</Value></KeyValueOfstringint><KeyValueOfstringint><Key>basic</Key><Value>66</Value></KeyValueOfstringint></UserCountsByTemplate></xmlRoot>'
SELECT 
      row.value('DomainName[1]','NVARCHAR(255)') AS [DomainName]
    , row2.value('Key[1]','NVARCHAR(255)') AS [TemplateName]
    , row2.value('Value[1]','INT') AS [TemplateCount]
FROM @info.nodes('/xmlRoot[1]') T1(row)
CROSS APPLY @info.nodes('/xmlRoot/UserCountsByTemplate/KeyValueOfstringint') T2(row2) 
```

相反，我提取`KeyValueOfstringInt`节点，然后访问`value()`调用中的不同元素。但是两个`value()`调用都在*同一个*节点上运行（对于每一行）。

# iphone - 应用程序中的多个用户配置文件/帐户 - 持久性

> ID：11989548
> 
> 赞同：1
> 
> 时间：2012-08-16T14:36:12.017
> 
> 标签：iphone, objective-c, ios, ipad, core-data

如何在应用程序中实现多个用户帐户/配置文件？我在我的项目中使用 Core Data，但我不知道如何设计我的模型。我应该为每个用户创建一个 NSPersistentStore 还是什么？还是做一些顶级实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:34:06.497

拥有一个顶级实体`UserSession`并在其下存储所有消息、朋友等。现在您可以通过 的某些属性过滤所有内容`UserSession`，例如`userID`.

# c++ - 使用 C++ POST 二进制数据

> ID：11989549
> 
> 赞同：0
> 
> 时间：2012-08-16T14:36:21.913
> 
> 标签：c++, post, http-headers, base64, binaryfiles

我有一个二进制文件，我认为无法发送（使用 Wininet、POST 方法、C++），而无需编码为 base64。在这种情况下，即使在设置请求标头“Content-Transfer-encoding:base64”之后，在服务器端接收到的编码数据也不会自动解码回二进制。有人可以启发我正确的做法吗？

注意：我尝试在服务器中解码并且它有效。Stackoverflow 中有关同一主题的先前问题未得到正确回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:42:38.897

您可以使用 POST 请求发送二进制数据。HTTP 标头指定有效负载的长度，可以将其视为原始字节序列。

# ios - 如何在 iPhone/iPad/iOS 应用上实现 AirPrint 按钮？

> ID：11989553
> 
> 赞同：1
> 
> 时间：2012-08-16T14:36:28.463
> 
> 标签：ios, cordova, sencha-touch, phonegap-plugins, airprint

我为 iPhone / iPad 实现了一个应用程序，用 Sencha Touch 和 Phonegap 开发。在之前的测试中，当应用程序可以在 Safari（不是 IPA）上显示时，有可能使用浏览器具有的 AirPrint 按钮进行打印。我丢失了这个按钮来生成 ios 安装程序。有人实施过这样的事情吗？我认为有一个名为 print 的插件，但我想要更多指导。

我看到了[这个插件](https://github.com/purplecabbage/phonegap-plugins/blob/master/iPhone/PrintPlugin/READEME.md)，但它对我不起作用。

先感谢您

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-04T11:52:48.220

不知道我明白你的问题；但我采取的标准方法是

```
if (![UIPrintInteractionController isPrintingAvailable]) {
   .. config UI right 
```

弄清楚打印对话是否有意义。如果是的话；标准的苹果代码（例如[http://www.iphonedevsdk.com/forum/iphone-sdk-development/67176-airprint-tutorial-simple-print-file-30-lines-of-code.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/67176-airprint-tutorial-simple-print-file-30-lines-of-code.html)）会做得很好吗？

并使用来自 Phonegap 的常用突破到 Objective-C - 这意味着它是特定于 iOS 的。

谢谢，

德。

# java - 获取直到午夜的毫秒数

> ID：11989555
> 
> 赞同：35
> 
> 时间：2012-08-16T14:36:30.337
> 
> 标签：java, android, date, milliseconds

我正在创建一个我想在每晚午夜更新的 Android 小部件。我正在使用一个`AlarmManager`，我需要找出从当前时间到午夜还剩下多少毫秒。这是我的代码：

```
AlarmManager mAlarmManager = (AlarmManager)context.getSystemService(android.content.Context.ALARM_SERVICE);
mAlarmManager.set(AlarmManager.ELAPSED_REALTIME, millisecondsUntilMidnight, mSrvcPendingingIntent); 
```

如何计算距离午夜还有多少毫秒？

先感谢您。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-16T14:42:09.530

使用日历来计算它：

```
 Calendar c = Calendar.getInstance();
        c.add(Calendar.DAY_OF_MONTH, 1);
        c.set(Calendar.HOUR_OF_DAY, 0);
        c.set(Calendar.MINUTE, 0);
        c.set(Calendar.SECOND, 0);
        c.set(Calendar.MILLISECOND, 0);
        long howMany = (c.getTimeInMillis()-System.currentTimeMillis()); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-09-20T20:30:54.467

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T14:43:42.050

尝试以下操作：

```
Calendar c = Calendar.getInstance();
long now = c.getTimeInMillis();
c.add(Calendar.DATE, 1);
c.set(Calendar.HOUR_OF_DAY, 0);
c.set(Calendar.MINUTE, 0);
c.set(Calendar.SECOND, 0);
c.set(Calendar.MILLISECOND, 0);

long millisecondsUntilMidnight = c.getTimeInMillis() - now;

AlarmManager mAlarmManager = (AlarmManager)context.getSystemService(android.content.Context.ALARM_SERVICE);
mAlarmManager.set(AlarmManager.ELAPSED_REALTIME, millisecondsUntilMidnight, mSrvcPendingingIntent); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T14:44:31.580

这行得通吗？

```
long MILLIS_IN_DAY = 86400000;

long currentTime = System.currentTimeInMillis();

long millisTillNow = currentTime % MILLIS_IN_DAY;

long millisecondsUntilMidnight = MILLIS_IN_DAY - millisTillNow; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-14T14:55:04.533

您可以使用[`AlarmManager.RTC`](http://developer.android.com/reference/android/app/AlarmManager.html#RTC)而不是`AlarmManager.ELAPSED_REALTIME`，只需将日历设置为您想要的时间：

```
// Create a calendar for midnight
Calendar todayMidnight = Calendar.getInstance();
todayMidnight.add(Calendar.DATE, 1);
todayMidnight.set(Calendar.HOUR_OF_DAY, 0);
todayMidnight.set(Calendar.MINUTE, 0);
todayMidnight.set(Calendar.SECOND, 0);

// Create an alarm going off at midnight
mAlarmManager.set(
   AlarmManager.RTC, 
   todayMidnight.getTimeInMillis(), 
   mSrvcPendingingIntent
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-20T08:19:24.183

使用以下方式，无需担心设置 DAY_OF_MONTH。

```
 long msInDay = 86400000;
    Calendar c = Calendar.getInstance();
    c.set(Calendar.HOUR_OF_DAY, 0);
    c.set(Calendar.MINUTE, 0);
    c.set(Calendar.SECOND, 0);
    c.set(Calendar.MILLISECOND, 0);

    System.out.print(msInDay - (System.currentTimeMillis() - c.getTimeInMillis())); 
```

# xml - 为同一个根元素创建 2 种不同的类型

> ID：11989566
> 
> 赞同：0
> 
> 时间：2012-08-16T14:36:40.710
> 
> 标签：xml, xsd, jaxb

我想为 2 个不同的 xml 创建一个架构文件（我可以将其拆分为 2 个架构，但由于根元素相同，我想将其保存在一个文件中）。

现在我有 2 个不同的 XML。

```
<orderStatus shipStatus="SHIPPED/PENDING">
    <orderId>1234</orderId>
    <orderedBy>userName</orderedBy>
    <orderedOn>2012-07-23T11:35:51.000-04:00</orderedOn>
</orderStatus> 
```

第二个 XML 是

```
<orderStatus modifyShipStatus="SUSPENDED/PENDING">
    <shipStatus>101</shipStatus>
</orderStatus> 
```

我怎样才能为这 2 个 xml 提供 1 个 xsd？当我尝试使用一种 1 类型创建根元素时，它工作正常，但是当我尝试添加另一种类型时，JAXB 会抛出该元素已定义的错误。这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:30:22.490

答案部分取决于您到底想说什么，部分取决于您使用的模式语言：DTD？XSD 1.0？XSD 1.1？放松？其他 ...？哦，对了，我看到问题被标记为 XSD，所以我假设您正在寻找 XSD 解决方案。

如果你想说一个`orderStatus`元素可以有*序列*、、或*序列*作为子元素，并且属性和是可选的，那么在内容模型中这样说很简单。`orderId``orderedBy``orderedOn` *`shipStatus``shipStatus``modifyShipStatus`*

 *在 DTD 表示法（我在这里使用它是因为它的紧凑性）你会写：

```
<!ELEMENT orderStatus ((orderId, orderedBy, orderedOn) | shipStatus) >
<!ATTLIST orderStatus
          shipStatus CDATA #IMPLIED
          modifyShipStatus CDATA #IMPLIED
> 
```

或者在 XSD 表示法中，写

```
<xs:element name="orderStatus" type="my:orderStatus"/>  
<xs:complexType name="orderStatus">
  <xs:choice>
    <xs:sequence>
      <xs:element ref="my:orderId"/>
      <xs:element ref="my:orderedBy"/>
      <xs:element ref="my:orderedOn"/>
    </xs:sequence>
    <xs:element ref="my:shipStatus"/>
  </xs:choice>
  <xs:attribute name="shipStatus"/>
  <xs:attribute name="modifyShipStatus"/>
</xs:complexType> 
```

然后你就完成了。

如果您只想允许这两个属性中的一个，或者如果您希望合法子代取决于是否存在一个或另一个属性，那么事情会更加复杂。（一些文档设计者会说，如果你想要这样，你有两种截然不同的元素类型，你坚持用相同的名称来调用它们，这使得验证变得不必要地困难。）

在这种情况下，您的选择是：

*   使用如上所述的 DTD 和/或 XSD 1.0 模式，并在文档中或使用 Schematron 或通过其他方法表达附加约束。

*   使用 XSD 1.1，如上所述定义内容模型和属性，并添加断言来表示

    *   正是属性之一`shipStatus`，`modifyShipStatus`必须出现。
    *   `shipStatus`当且仅当出现一个名为的子项时，该属性必须出现`orderId`。
    *   `modifyShipStatus`当且仅当出现一个名为的子项时，该属性必须出现`shipStatus`。
*   使用 XSD 1.1，为两种形式的元素定义两种不同的类型，`orderStatus`并使用条件类型赋值来说明在以下情况下应用哪种类型：

XSD 看起来像这样：

```
 <xs:complexType name="orderStatus1">
      <xs:sequence>
        <xs:element ref="my:orderId"/>
        <xs:element ref="my:orderedBy"/>
        <xs:element ref="my:orderedOn"/>
      </xs:sequence>
      <xs:attribute name="shipStatus"/>
    </xs:complexType>  
    <xs:complexType name="orderStatus2">
      <xs:element ref="my:shipStatus"/>
      <xs:attribute name="modifyShipStatus"/>
    </xs:complexType>

    <xs:element name="orderStatus">
      <xs:alternative test="@shipStatus" type="my:orderStatus1"/> 
      <xs:alternative test="@modifyShipStatus" type="my:orderStatus2"/>
    </xs:element> 
```

*   我会顺便指出，它的爱好者经常引用 Relax NG 制定此类约束的能力作为其优势之一。*

# c# - 从数组创建位图对象

> ID：11989567
> 
> 赞同：3
> 
> 时间：2012-08-16T14:36:51.883
> 
> 标签：c#, winforms, bitmap

我有一个像`byte[] pixels`. 有没有办法在不复制数据的情况下从中创建`bitmap`对象？`pixels`我有一个小型图形库，当我需要在`WinForms`窗口上显示图像时，我只需将该数据复制到一个`bitmap`对象，然后我使用 draw 方法。我可以避免这个复制过程吗？我记得我在哪里见过它，但也许我的记忆力很差。

编辑：我试过这段代码，它可以工作，但这安全吗？

```
byte[] pixels = new byte[10 * 10 * 4];

pixels[4] = 255; // set 1 pixel
pixels[5] = 255;
pixels[6] = 255;
pixels[7] = 255;

// do some tricks
GCHandle pinnedArray = GCHandle.Alloc(pixels, GCHandleType.Pinned);
IntPtr pointer = pinnedArray.AddrOfPinnedObject();

// create a new bitmap.
Bitmap bmp = new Bitmap (10, 10, 4*10, PixelFormat.Format32bppRgb, pointer);

Graphics grp = this.CreateGraphics ();
grp.DrawImage (bmp, 0, 0);

pixels[4+12] = 255; // add a pixel
pixels[5+12] = 255;
pixels[6+12] = 255;
pixels[7+12] = 255;

grp.DrawImage (bmp, 0, 40); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:39:01.083

有一个构造函数接受指向原始图像数据的指针：

[位图构造函数（Int32、Int32、Int32、PixelFormat、IntPtr）](http://msdn.microsoft.com/en-us/library/zy1a2d14.aspx)

例子：

```
byte[] _data = new byte[]
{
    255, 0, 0, 255, // Blue
    0, 255, 0, 255, // Green
    0, 0, 255, 255, // Red
    0, 0, 0, 255,   // Black
};

var arrayHandle = System.Runtime.InteropServices.GCHandle.Alloc(_data,
        System.Runtime.InteropServices.GCHandleType.Pinned);

var bmp = new Bitmap(2, 2, // 2x2 pixels
    8,                     // RGB32 => 8 bytes stride
    System.Drawing.Imaging.PixelFormat.Format32bppArgb,
    arrayHandle.AddrOfPinnedObject()
);

this.BackgroundImageLayout = ImageLayout.Stretch;
this.BackgroundImage = bmp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:51:28.517

你不能只使用：

```
System.Drawing.Bitmap.FromStream(new MemoryStream(bytes)); 
```

我认为这些方法调用不会进行任何复制，因为 MSDN 中没有任何内容表明：http: [//msdn.microsoft.com/en-us/library/9a84386f](http://msdn.microsoft.com/en-us/library/9a84386f)

# javascript - 扩展 javascript 标准类型的陷阱

> ID：11989572
> 
> 赞同：0
> 
> 时间：2012-08-16T14:37:00.617
> 
> 标签：javascript

我知道 Object.prototype 的扩展充满了陷阱。扩展其他标准Javascript原型时是否有：String.prototype、Array.prototype、Function.prototype？

提前致谢。

[编辑] 相关：[扩展 Object.prototype 的陷阱是什么？](https://stackoverflow.com/questions/8341123/what-are-pitfalls-of-extending-object-prototype)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:45:35.137

> 1.  如果未来的浏览器版本实现`Array.prototype.remove`（因为升级到 EcmaScript 标准，或者通过他们自己的意愿），它们的实现将被我们的自定义版本覆盖，这不仅会降低效率（我们不能在方法优化的服务），但更重要的是，它们可能有不同的、非标准的结果。
>     
>     
> 2.  扩展原生对象会扰乱对象迭代周期。论点是这样的：由于 for in 循环将访问对象原型链中的所有可枚举属性，因此自定义本机属性将意外地包含在此类迭代中。
>     
>     
> 3.  Object.prototype 的后代（即原型不明确为 null 的每个对象）如果碰巧定义了同名的属性，将失去对扩展属性的访问权。

[http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/](http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T14:39:40.283

真的很有帮助

[在 Javascript 中扩展 Native](http://javascriptweblog.wordpress.com/2011/12/05/extending-javascript-natives/)

[编辑] 这不仅应该显示你可以，而且应该如何避免陷阱。:)

那么扩展 Natives 可以吗？

我已经描述了一些不增加原生原型的原因；你可能知道其他人。您需要决定您计划的扩展是否会解决这些问题，以及扩展是否会为您的代码库增加功能和清晰度。

# php - isset 在本地服务器上工作，但不在实时服务器上工作

> ID：11989580
> 
> 赞同：0
> 
> 时间：2012-08-16T14:37:28.650
> 
> 标签：php, apache, wamp, isset, litespeed

我的代码在本地服务器上运行良好，但在实时服务器上无法运行。

我的本地服务器是 WAMP，而实时服务器是带有 LiteSpeed、PHP 和 MySQL 的 Unix。

问题是我希望仅在不存在时才创建新会话。请问有人可以帮忙吗？

确切的代码如下：

```
$cart = $_SESSION["cart"];

if (isset($cart))// this checks if session has been created already.
$cart = $cart; // if session is already set, it uses the random value already created.
else {
$_SESSION["cart"] = rand(111111111,999999999);// if session has not be created        before a new randome number is picked.
$cart = $_SESSION["cart"];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:43:39.843

在`isset()`检查是否设置了变量时，这很明显：

```
$cart = $_SESSION["cart"]; // setting the variable $cart and assigning it some value

if (isset($cart)) // this checks if session has been created already
  // and it will return TRUE anyway because `$cart` is already defined above regardless value it was assigned 
```

这部分代码不检查是否`$_SESSION['key']`设置，而是检查`$cart`变量。实际上已经设置好了。这里可以检查它的`is_null()`or `empty()`，但不是`isset()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:40:36.170

确保会话已启动并检查是否设置了原始购物车。

```
session_start();
if(!isset($_SESSION['cart']))
{
    $_SESSION['cart']=rand(111111111,999999999);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:41:56.120

这个应该可以在任何地方工作：

```
if(empty($_SESSION["cart"])){
    $_SESSION["cart"] = rand(111111111,999999999);
    $cart = $_SESSION["cart"];
} else
    $cart = $_SESSION["cart"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:42:21.203

分配后立即尝试`var_dump($cart)`并发布结果。

您可能还想检查`$_Session[cart]`而不是分配和检查，

# javascript - 无法输出值：JavaScript

> ID：11989584
> 
> 赞同：0
> 
> 时间：2012-08-16T14:37:33.910
> 
> 标签：javascript

我正在尝试在文本框中输入一个数字，并通过 switch 功能在另一个 div 标签中将消息显示为当天的名称。我传递给 switch 函数的变量必须从文本框中获取值。但我无法在单击按钮时输出该功能，它显示消息“未定义”。请帮忙 ：）。谢谢

```
<input type = "text" id = "test" />
<br>
<div id="box3" style = "border:solid 2px blue; height:15px;width:100px;"></div>
<br>
<input type = "button" onClick = "myTest()" value = "Click me" />

<script type="text/javascript">
function myTest(){
var x;
var d =document.getElementById('test').value;
switch (d)
{
case 0:
x="Today it's Sunday";
break;
case 1:
x="Today it's Monday";
break;
case 2:
x="Today it's Tuesday";
break;
case 3:
x="Today it's Wednesday";
break;
case 4:
x="Today it's Thursday";
break;
case 5:
x="Today it's Friday";
break;
case 6:
x="Today it's Saturday";
break;
}
document.getElementById('box3').innerHTML=x;
}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:42:44.440

您需要先将其转换为整数：

```
var d = parseInt(document.getElementById('test').value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:48:07.357

你的情况都是整数，来自dom的所有东西都是一个字符串，所以你必须解决这个问题：

```
var d = +(document.getElementById('test').value);//+ converts to number 
```

确保其中没有字符，尽管当`+someString`字符串`NaN`看起来像`123fdsf`. `parseInt`可以处理数字，后跟字符，但对带有前导空格和前导零的字符串不太友好（将输入解释为八进制），因此`parseFloat`如果输入可能包含字符/前导零，则最好使用。

或者，引用您的案例，并提供默认案例：

```
case '6': x = 'Today is Saturday'; break;
default: x = 'Don\'t know what '+d+' is'; 
```

所以你可以看到你传递给开关的值

* * *

作为对@KooiInc 的回应`Let's simplify`：让我们进行优化，诚然，让我们变得复杂（但提高性能）：

闭包：（这里需要先加载dom）

```
var test = (function(dayArray)
{
    var out = document.getElementById('box3');//only search dom once
    var in = document.getElementById('test');
    return function()
    {
        var day = dayArray[in.value] || 'Don\'t know day ' + in.value;
        out.innerHTML = 'Today is ' + day;
    }
})('Sunday,Monday,Tuesday,Wednessday,Thursday,Friday,Saturday'.split(',')); 
```

功能属性：

```
function test()
{
    if (!test.inElem)
    {
        test.inElem = document.getElementById('test');//search dom on first call
    }
    if (!test.outElem)
    {
        test.outElem = document.getElementById('box3');
    }
    if (!(test.days instanceof Array))
    {
        test.days = 'Sunday,Monday,Tuesday,Wednessday,Thursday,Friday,Saturday'.split(',');//create array once
    }
    var day = dayArray[test.inElem] || 'Don\'t know day ' + test.inElem;
    test.outElem.innerHTML = 'Today is ' + day;
} 
```

这些例子只是为了好玩。我知道过早的优化是万恶之源，所以在这个阶段不要太担心。只需知道函数是对象，因此您可以设置属性，即使在函数返回后仍保留在内存中，并且知道闭包也可以做到这一点（还有更多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:43:22.740

它将值作为字符串读取，而不是 int。

您可以将 switch 语句中的值转换为 int，或者将大小写更改为字符串。

例如对于每个案例陈述

```
case '1': 
```

代替

```
case 1: 
```

或者

```
switch ( d ) { 
```

变成

```
switch ( Number ( d ) ) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:44:15.350

每当您从输入中获取数字时，您确实需要将其解析为数字类型。

```
var d = parseInt(document.getElementById('test').value, 10); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T14:47:42.553

我建议使用数组而不是 switch 语句。您还需要将输入解析为数字。

```
function myTest() {
    var days = [
        'Sunday',
        'Monday',
        'Tuesday',
        'Wednesday',
        'Thursday',
        'Friday',
        'Saturday'
    ];

    var d = parseInt(document.getElementById('test').value, 10);

    document.getElementById('box3').innerHTML = 'Today is ' + days[d];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-16T14:49:15.833

让我们简化一下：

```
function dayOfWeek(val){
 // create an array of weekdays
 var dow = 'Sunday,Monday,Tuesday,Wednessday,Thursday,Friday,Saturday'
            .split(',');
 // print a string in #box3
 document.getElementById('box3').innerHTML = 
     'Today it\'s '+dow[Number(val)] || 'can\'t determine';
}
dayOfWeek(document.getElementById('test').value); 
```

见[jsfiddle](http://jsfiddle.net/Q7hWc/)

# salesforce - Visualforce 中的命令按钮无法从动态下拉列表中读取所选项目

> ID：11989585
> 
> 赞同：0
> 
> 时间：2012-08-16T14:37:35.547
> 
> 标签：salesforce, visualforce

我正在寻求 Visualforce (Salesforce) 页面专家的帮助。

背景：有一个下拉列表（就 Visualforce 页面而言，apex:selectList）。它的选择选项由 jQuery 构建，并使用 RemoteAction（在控制器中）返回的数据（JSON 格式）。

问题：当我单击将所选项目值发送到控制器的命令按钮时，它总是报告错误消息（j_id0：j_id2：j_id3：j_id4：orgList：验证错误：值无效）。

有什么想法吗？非常感谢。

特洛伊

Visualforce 标记：

```
<apex:panelGrid columns="2">
<apex:selectList id="orgList" value="{!selected}"  size="1">
</apex:selectList>
<apex:commandButton value="Add" action="{!add}" style="width:80px">
</apex:panelGrid> 
```

JavaScript：

```
$j("input[id$='azc']").keyup(function(){
   var op = $j("select[id$=orgList]");
    if($j(this).val().length >= 6){
             op.empty().append('<option value=""></option>');
             OrgController.findOrgs($j(this).val(), function(result, event){
                  if(event.status){
                      var data =  $j.parseJSON('[' + result.replace(/'/g, '"') + ']');
                      $j.each(data, function(){
                          $j('<option />', {value: this['value'], text: this['label']}).appendTo(op);
                      }); 
                  }else{
                      alert(event.message);             
                  } 
              },{escape:true});
        } 
```

组织控制器

```
public String selected { get; set; }
public PageReference add(){
    Customer__c customer =  findSelected(selected);
    if(customer != null){
      customer.Pending__c = 'Yes';
      update customer; 
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:13:45.860

我会尝试使用普通的（html）选择列表并将选定的值发送到每个隐藏字段的控制器，如下所示（对我有用）：

```
<!-- If the user selects an option - we will fill out the hidden field with that value -->
<select size="1" id="orgList" onChange="jQuery('[id$=hiddenField]').val(document.getElementById(this.id).value);">
    <option value="none">--Please select--</option>
</select>

<!-- Now add new options -->
<script>
    var myOptions = {
        val2 : 'Val 2',
        val3 : 'Val 3'
    };

    var mySelect = jQuery('#orgList');

    jQuery.each(myOptions, function(val, text) {
        mySelect.append( jQuery('<option></option>').val(val).html(text) );
    });

</script>

<!-- Here is the hidden field assigned to the apex variable -->
<apex:inputHidden value="{!myselected}" id="hiddenField"/>

<apex:commandButton reRender="none" value="Get value"/> 
```

# shopify - 通过 API 从 Shopify 获取订单时是否包含产品元字段？

> ID：11989588
> 
> 赞同：1
> 
> 时间：2012-08-16T14:37:39.993
> 
> 标签：shopify

我们正在构建一个应用程序来从 Shopify 中提取订单并将其导入第三方系统。作为其中的一部分，我们需要访问产品的元字段数据。这是否包含在 API 调用返回的产品详细信息中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:13:55.917

不.. 如果您通过 API 调用拉取产品、订单或任何其他资源，则需要通过单独调用拉取与该资源相关联的元字段。分配给变体或任何其他资源的元字段也是如此。它们始终是单独的 API 调用。

# java - 如何在 Java 中从另一个线程暂停和恢复一个线程

> ID：11989589
> 
> 赞同：6
> 
> 时间：2012-08-16T14:37:49.123
> 
> 标签：java, multithreading, swing

我正在用 Java Swing 编写一个应用程序。我需要的是一个程序，我可以使用图形界面中的按钮停止“精心制作”线程。

这是一个专注于我需要的简单项目

```
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JTextArea;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 *
 * @author Nikola
 */
public class Main extends javax.swing.JFrame
{
    private MyThread THREAD;

    public Main()
    {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("Pause Thread");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jScrollPane1.setViewportView(jTextArea1);

        jButton2.setText("Resume Thread");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        jButton3.setText("Start Thread");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jButton3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 63, Short.MAX_VALUE)
                        .addComponent(jButton2)
                        .addGap(18, 18, 18)
                        .addComponent(jButton1))
                    .addComponent(jScrollPane1))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 244, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jButton1)
                    .addComponent(jButton2)
                    .addComponent(jButton3))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt)
    {
        THREAD = new MyThread(jTextArea1);
        THREAD.start();
    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)
    {
        try
        {
            THREAD.pauseThread();
        }
        catch (InterruptedException ex)
        {
            ex.printStackTrace();
        }
    }

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt)
    {
        THREAD.resumeThread();
    }

    public static void main(String args[])
    {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try
        {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels())
            {
                if ("Nimbus".equals(info.getName()))
                {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        }
        catch (ClassNotFoundException ex)
        {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        catch (InstantiationException ex)
        {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        catch (IllegalAccessException ex)
        {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        catch (javax.swing.UnsupportedLookAndFeelException ex)
        {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable()
        {

            public void run()
            {
                new Main().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextArea1;
    // End of variables declaration
}

class MyThread extends Thread
{
    JTextArea area;

    private final Object lock = new Object();

    public MyThread(JTextArea area)
    {
        super();
        this.area = area;
    }

    @Override
    public void run()
    {
        for(int i=0 ; ; i++)
            area.setText(i+"");
    }

    public void pauseThread() throws InterruptedException
    {
        synchronized(lock)
        {
            lock.wait();
        }
    }

    public void resumeThread()
    {
        synchronized(lock)
        {
            lock.notify();
        }
    }
} 
```

问题很简单：在实际应用程序中，用户设置一些选项，然后启动对所选数据进行细化的线程。

我想提供一个“暂停”按钮，以便用户可以暂时停止详细说明并进行一些必要的检查，然后可以恢复操作。

我编码的方式是停止的图形线程，而不是“精心制作”的线程。

如果您运行我的示例代码并按“开始”，则 textarea 开始计数。我需要的最终结果是，当我按下“暂停”按钮时，线程进入“睡眠”并且计数停止，当我按下“恢复”按钮时，线程“唤醒”并且文本区域中的计数开始再数。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T14:42:17.687

您无法以您想要的方式*明确地将一个线程与另一个线程暂停。*

相反，您需要做的是通过设置某种标志来发出另一个线程应该停止的信号*。*有问题的线程必须具有检查此标志并在发生这种情况时暂停其工作的逻辑。

所以在这种特殊情况下，也许改变`MyThread`如下：

```
class MyThread extends Thread {

    private volatile boolean running = true; // Run unless told to pause

    ...

    @Override
    public void run()
    {
        for(int i=0 ; ; i++)
        {
            // Only keep painting while "running" is true
            // This is a crude implementation of pausing the thread
            while (!running)
                yield;

            area.setText(i+"");
    }

    public void pauseThread() throws InterruptedException
    {
        running = false;
    }

    public void resumeThread()
    {
        running = true;
    }

} 
```

这是一个粗略的例子，为了简洁起见，它使用了一种自旋锁，而不是适当的基于监视器的睡眠。希望它传达了您如何使用标志来控制线程暂停的想法。

请注意，如果您在块中执行一些长时间运行的步骤集，而不仅仅是`setText`调用，最好`Thread.currentThread().interrupted()`在每个步骤之间进行检查 - 如果设置了 itnerrupt 标志，则退出循环。这大致是内置阻塞方法（例如 I/O）所做的，以便它们可以被其他线程中断 - 因为`running`每个循环只检查一个标志，所以如果每个循环都设置它并没有多大用处需要20分钟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T14:57:36.660

试试这样：

```
class MyThread extends Thread {
    JTextArea area;
    private final Object GUI_INITIALIZATION_MONITOR = new Object();
    private boolean pauseThreadFlag = false;

    public MyThread(JTextArea area) {
        super();
        this.area = area;
    }

    @Override
    public void run() {
        for(int i=0 ; ; i++) {
            checkForPaused();
            area.setText(i+"");
        }
    }

    private void checkForPaused() {
        synchronized (GUI_INITIALIZATION_MONITOR) {
            while (pauseThreadFlag) {
                try {
                    GUI_INITIALIZATION_MONITOR.wait();
                } catch (Exception e) {}
            }
        }
    }

    public void pauseThread() throws InterruptedException {
        pauseThreadFlag = true;
    }

    public void resumeThread() {
        synchronized(GUI_INITIALIZATION_MONITOR) {
            pauseThreadFlag = false;
            GUI_INITIALIZATION_MONITOR.notify();
        }
    }
} 
```

像你一样使用显示器是个好主意。但是你不能从外面强迫等待。你必须告诉线程等待，直到你再次通知他（通过监视器）。在这种情况下，您只需使用这个简单的方法`checkForPaused()`，您必须将其置于战略位置，这样在线程暂停之前不会有很长的延迟。

你也可以扩展这个函数，这样你就可以询问线程他是否被设置了一个标志`checkForPaused()`和一个`public boolean isPausing()`.

# windows - 在 IIS8 中将自定义帐户设置为身份

> ID：11989590
> 
> 赞同：3
> 
> 时间：2012-08-16T14:37:51.063
> 
> 标签：windows, iis

我正在尝试将应用程序池标识更改为我们自己在 IIS8 中的自定义帐户。我在我们的一台 Windows 2012 服务器上成功地做到了这一点。但是在其他 2012 年的服务器上我得到了

`There was error while Performing this operation. Details : Value doesnot fall within the Expected Range`

是什么原因..我在事件查看器中也没有看到任何不同

任何帮助，将不胜感激

# c# - 如何反序列化 BinaryFormatter

> ID：11989592
> 
> 赞同：0
> 
> 时间：2012-08-16T14:37:56.640
> 
> 标签：c#, serialization, memory-mapped-files, binaryformatter

我正在尝试将我的 MMF 序列化为文件，这是代码：

```
class MMF {
    private const string filename = @"c:\NFS";
    private long offset = 0;
    private long length = 194;
    private byte[] buffer;
    public MMF() {
        using (var mmf =
            MemoryMappedFile.CreateFromFile(filename, FileMode.OpenOrCreate, null, offset + length, MemoryMappedFileAccess.ReadWriteExecute)) {
            using (var accessor = mmf.CreateViewAccessor(offset, length, MemoryMappedFileAccess.ReadWriteExecute)) {
                buffer = new byte[194];
                /*FS fs = new FS();
                fs.Files[0].Path = "test";
                accessor.WriteArray<byte>(0, buffer, 0, (int)length);*/
                accessor.ReadArray<byte>(0, buffer, 0, (int)length);
                FS fs = (FS)ToObject(buffer);
                Console.WriteLine(fs.Files[0].Path);
                }
            }
        }
    private byte[] ToByteArray(object source) {
        var formatter = new BinaryFormatter();
        using (var stream = new MemoryStream()) {
            formatter.Serialize(stream, source);
            return stream.ToArray();
            }
        }
    private object ToObject(byte[] source) {
        var formatter = new BinaryFormatter();
        using (var stream = new MemoryStream(source)) {
            formatter.Deserialize(stream);
            return stream;
            }
        }
    } 
```

在反序列化部分我收到错误：

> mscorlib.dll 中出现“System.Runtime.Serialization.SerializationException”类型的未处理异常
> 
> 附加信息：二进制流“0”不包含有效的二进制标头 BinaryHeader。可能的原因：无效的流或序列化和反序列化之间的对象版本更改。

如何正确反序列化文件？我的错误在哪里？

*谢谢你*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:41:11.523

您可能希望让 MMF 实现[ISerializable](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)并实现 GetObjectData 方法。

# php - 为什么这个上传文件代码在 CakePHP 中不起作用

> ID：11989598
> 
> 赞同：0
> 
> 时间：2012-08-16T14:38:20.383
> 
> 标签：php, mysql, cakephp

我在 CakePHP 2.1 中上传文件时遇到问题。事实上，我总是有错误：

```
Column not found: 1054 Unknown column 'Array' in 'field list'. 
```

对于视图：

```
<?php echo $this->Form->create('Ecole',array('enctype' => 'multipart/form-data')); ?>
<?php echo $this->Form->input('Ecole.logo_ecole', array('type'=>'file','class'=>'','label'=>'')); ?> 
```

当我删除时，`array('enctype' => 'multipart/form-data')`我没有错误，但上传也不起作用。

对于控制器：

```
if(!empty($this->data))
{    
  debug($this->data);
  $ext  = 'jpg';

  // Save success
  if($this->Ecole->save($this->data))
  {      
    // Destination folder, new filename and destination path
    $dest_folder = IMAGES . DS . 'galleries' . DS . $this->Ecole->id;
    $new_filename = $this->Ecole->id. '.' .$ext;
    $dest_path = $dest_folder . DS . $new_filename;

    // Check if destination folder exists and create if it doesn't
    if(!is_dir($dest_folder))
    {
      mkdir($dest_folder, 0755, true);
    }

    // We move the picture and rename it with his id
    if(move_uploaded_file($this->data['Ecole']['logo_ecole']['tmp_name'], $dest_path))
    {
      // Show success flash message
      $this->Session->setFlash(__('Picture successfully added !', true), 'default', array('class' => 'success'));
        echo  "<script>  parent.location.reload(true); parent.jQuery.fancybox.close(); </script>";
    }
    // Move failed
    else
    {
      // Delete picture
      //$this->Ecole->delete($this->Ecole->id);

      // Show error flash message
      $this->Session->setFlash(__('Error occurred while adding picture !', true), 'default', array('class' => 'error'));
    }
  }
  // Save failed
  else
  {      
    // Show error flash message
    $this->Session->setFlash(__('Error occurred while adding picture !', true), 'default', array('class' => 'error'));
  }
} 
```

谁能解释我做错了什么以及如何做对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T17:13:50.120

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:34:04.803

我修改了你的代码请看一下

请不要删除`array('enctype' => 'multipart/form-data')`表格中的这一行

```
<?php

if(!empty($this->data))
{    
    debug($this->data);
    $ext  = 'jpg';

      // Destination folder, new filename and destination path
    $dest_folder = IMAGES . DS . 'galleries' . DS . $this->Ecole->id;
    $new_filename = $this->Ecole->id. '.' .$ext;
    $dest_path = $dest_folder . DS . $new_filename;

    // Check if destination folder exists and create if it doesn't
    if(!is_dir($dest_folder))
    {
      mkdir($dest_folder, 0755, true);
    }

    $image='';

    // We move the picture and rename it with his id
    if(move_uploaded_file($this->data['Ecole']['logo_ecole']['tmp_name'], $dest_path))
    {
        $image = basename($this->data['Ecole']['logo_ecole']['name'])

        // Show success flash message
        $this->Session->setFlash(__('Picture successfully added !', true), 'default', array('class' => 'success'));
        echo  "<script>  parent.location.reload(true); parent.jQuery.fancybox.close(); </script>";

    }else
    {
      // Delete picture
      //$this->Ecole->delete($this->Ecole->id);

      // Show error flash message
      $this->Session->setFlash(__('Error occurred while adding picture !', true), 'default', array('class' => 'error'));
    }   

    $this->data['Ecole']['logo_ecole'] = $image;

      // Save success
      if(!$this->Ecole->save($this->data))
      {      
        // Show error flash message
        $this->Session->setFlash(__('Error occurred while adding picture !', true), 'default', array('class' => 'error'));
      }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T18:33:09.123

这可能是因为您试图保存上传文件时生成的数组 cake （`$this->data['Ecole']['logo_ecole']`是一个数组）。您的意思是仅将文件名保存到数据库中吗？

# java - JavaFX2.2（稳定版）忽略“socksProxyHost”和“socksProxyPort”的设置属性？

> ID：11989607
> 
> 赞同：0
> 
> 时间：2012-08-16T14:38:39.443
> 
> 标签：java, proxy, javafx-2, socks

首先，我想提一下，当**2.2**仍然是 beta 时，我也遇到了这个问题（迫使我恢复到**2.1.1**）。

今天安装了**JavaSE 7u6 （与****JavaFX 2.2** *stable*捆绑在一起）。**NetBeans**能够自动检测`Default JavaFX Platform`.

创建了一个新`JavaFX Application`项目（也尝试了**FXML**衍生产品，结果相同）。试过这段代码：

```
package javafxapplication;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import javafx.application.Application;
import javafx.stage.Stage;

public class JavaFXApplication extends Application 
{

    public static void main(String[] args) 
    {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) 
    {
        System.setProperty("socksProxyHost", "127.0.0.1");
        System.setProperty("socksProxyPort", "9050");

        try
        {
            URLConnection conn = new URL("http://www.wikipedia.org").openConnection();
            BufferedReader br = new BufferedReader(new InputStreamReader(conn.getInputStream()));

            String line;

            while ((line = br.readLine()) != null)
            {
                System.out.println(line);
            }
        }
        catch (Exception e) { e.printStackTrace(); }

        System.exit(0);
    }
} 
```

它有效。不会因为错误的 socks 代理设置而导致无法建立连接的错误（我的机器上的该端口上**没有**运行任何东西）。这些属性被默默地忽略，连接**直接**发生。这是一个错误吗？我已经在 2 台运行**Win7 x64**的机器上对此进行了测试。**不会**发生在2.1.1**上**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:11:49.303

JavaFX 2.2 引入了对系统代理的支持（参见[http://javafx-jira.kenai.com/browse/RT-21705](http://javafx-jira.kenai.com/browse/RT-21705)）。

它可能会干扰 socks 代理设置。您可以尝试删除系统代理或尝试在 JVM 选项旁边添加：`-Djavafx.autoproxy.disable=true`

# iphone - iPhone / iOS - UIButton 在视图较低时未收到触摸

> ID：11989608
> 
> 赞同：1
> 
> 时间：2012-08-16T14:38:38.940
> 
> 标签：iphone, ios, uibutton, touch

我有一个非常奇怪的问题。我有一个 UIView，在那个视图上我有 3 个 UIButton。

UIView 有一个框架

```
CGRectMake(0, 0, 320, 300) 
```

我将按钮放在一个相邻的框架上，UIView 底部的高度为 50 像素，但仍在其中。

出于某种原因，UIButtons 没有收到触摸，但如果我提高他们的高度，他们会这样做......这个奇怪问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:45:10.363

也许在同一个地方有一个组件与具有不同 zindex 的按钮尝试使用此方法将您的 btn 放在前面

```
`[yourView bringSubviewToFront:yourButton]`
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:58:47.473

尝试将 CGRectMake(0, 0, 320, 300) 更改为 CGRectMake(0, 100, 320, 300) 或类似方法，以将视图向下移动到页面中，并将行为与在视图内移动按钮进行比较。

这是否与移动按钮具有相同的效果？

这应该可以帮助您确定问题是在此视图内还是在此视图之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:51:35.660

您还可以查看`UIButton's`父视图的框架大小。当我开始时，我经常忽略这一点，实际上发生的事情是按钮并不完全在父级内部。但由于父视图没有剪裁该视图，我可以看到它......但不能与它的部分或全部交互。`

# c# - 未来框架版本中的 C# 抖动改进

> ID：11989614
> 
> 赞同：7
> 
> 时间：2012-08-16T14:39:20.803
> 
> 标签：c#, optimization, jit

我注意到 C# jitter 产生的代码比 C++ 编译器慢得多，即使没有使用“托管开销”结构（例如带有检查索引的数组）。

为了量化它，我对以下简单循环进行了计时：

```
public static int count = 1000000000;
public static int Main()
{
    int j = 0;
    for (int i = 0; i < count; ++i)
    {
        j += (i % 2 == 0) ? ((i + 7) >> 3) : (i * 7);
    }
    return j;
} 
```

这个循环需要 3.88 秒来执行（用 /o 编译）。使用 VC 2010 (-O2) 编译的等效循环需要 2.95 秒。

为了验证是否确实生成了劣质代码，我比较了机器代码：从 VC 编译器创建了一个列表 (/FAs)，并将调试器附加到 C# 程序（循环完成后）。

事实上，C++ 版本正在使用一些巧妙的技巧。例如，为了避免代价高昂的乘以 7，有一个单独的寄存器，每次循环计数都会增加 7。C# 版本每次都进行乘法 (imul)。还有其他差异。

我知道 C# jitter 在运行时编译代码的时间比 VC 在构建时要少得多。但例如Java jitter 正在动态优化常用方法。C# 似乎没有这样做。

我的问题是：是否有计划在未来的框架版本中改进 C# 抖动？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T18:34:08.617

发布版本，VS2008SP1，.NET 3.5SP1，平均 10 次测试：

```
.NET, x86:   2.646 seconds
C++, x86:    2.652 seconds
.NET, x64:   2.352 seconds
C++, x64:    2.090 seconds 
```

经典错误假设 /o 很重要，测量抖动时间，运行调试构建，使用附加的调试器进行测试，因此禁用了抖动优化器。

x64 抖动使用您提到的相同技巧，它不是 C++ 代码生成器所独有的：

```
00000030  xor         r9d,r9d 
... 
00000059  add         r9d,7 
```

.NET 4.5 的一项新功能是配置文件引导优化。

像微软这样的公司永远不会分享未来的计划，猜测它们是没有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:30:44.103

> 是否有计划在未来的框架版本中改进 C# 抖动？

你是在问微软和 Xamarin 上个月是否真的举行过一次秘密会议，他们一致认为，虽然他们在过去十年里都在改善各自的不安，但从现在开始，他们厌倦了让事情变得更好，并且会不再打扰，MS 会重新分配每个人，而 Xamarin 会拒绝任何提交的改善抖动的补丁？

我会说这不太可能，就像世界上其他所有积极开发的软件项目一样，也有改进它的计划。

此外，如果我真的想尽快运行您提供的代码，我会将其手动优化为`return 161315136;`. 这样的代码可以证明在特定情况下实现 A 比实现 B 慢，但没有说明任何实现背后的人应该集中精力在哪里。

# c# - 哪个更好地访问属性值？

> ID：11989616
> 
> 赞同：2
> 
> 时间：2012-08-16T14:39:23.747
> 
> 标签：c#

哪个更好地访问属性值？

像这样访问

```
propertyobjA.objB.Prop1
propertyobjA.objB.Prop2 
```

或分配给 var

```
var objB = propertyobjA.objB;
then call objB.Prop1 and objB.Prop1 
```

哪一个提高了 c# 的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:43:06.827

老实说，答案很可能是第二个会更快，但我几乎可以保证*它一点也不重要*。您应该小心不要过早地考虑优化。99% 的性能问题都归结为更大的问题，例如过于频繁地访问数据库等，而不是像这样的微不足道的问题。即使这两种情况之间存在微小差异，除非这是地球上一些对时间最关键的软件，否则重要的是可读性（在这种情况下不是很难阅读），而不是哪个更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:43:21.337

这取决于 objB 是什么。如果你正在计算一些东西（你*不应该*做但*可以*做），那么当然将它分配给一个值会产生更好的性能。

另一个注意事项，您应该避免依赖于变量的子属性，因为您在类之间放置了更高的耦合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:43:51.213

我认为这不会对性能产生很大影响（第二种选择可能会更快一些）。但这不是您的性能问题（如果有的话）的来源。

**更新**`propertyobjA.objB`：考虑一下，获取`Prop1`和之间的值可能会发生变化`Prop2`，因此这两种选择不能被视为相同的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:44:05.870

对性能的影响很大程度上取决于属性 getter的*实现。*`propertyObjA.objB`例如，如果它简单地实现为：

```
public Foo objB { get { return this._objB; } } 
```

然后调用两次对性能的影响可以忽略不计。

但是，如果相同的属性在计算上做了一些昂贵的事情，那么你的第二个建议会表现得更好。

话虽如此，框架指南声明您不应该使用属性获取器来隐藏可能计算昂贵的操作，而是更喜欢方法调用，例如：

```
public objB ComputeB (); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T14:47:09.840

在用 c# 等高级语言编写代码时，你真的不应该关心这样的事情。

诸如 c# 和 java 等语言的现代编译器非常复杂，将对您的代码执行各种优化。作为开发人员的最终结果是，在以一种或另一种方式编写特定的琐碎代码时，您永远不会看到性能差异。编译器将选择最优化的方式。

其他一切都取决于偏好。如果您想链接多个属性访问，那很好。如果您想将中间结果分配给变量以提高代码的可读性，那也可以。

# c# - 如何根据 C# 中的应用程序设置创建填充有 SQL 数据的动态数据形式

> ID：11989619
> 
> 赞同：0
> 
> 时间：2012-08-16T14:39:27.873
> 
> 标签：c#, sql, layout, datagridview, tablelayout

我有带有 SQL Server 后端的 ac# .net 应用程序。该应用程序根据条形码记录公司内的物品移动。用户将他们的项目与用户一起添加到软件中，每个用户都分配了一个条形码。该软件附带一个位于墙上的物品跟踪系统。系统跟踪钥匙，例如，有一块板有 100 个条形码钥匙，板上的每个位置编号为 1-100。在软件中，用户需要能够看到一个“虚拟物品板”，它显示了在虚拟板上布置的信息，一目了然地显示出哪个钥匙在，哪个钥匙在外面，谁有什么等。

用户在第一次安装软件时将他们使用的容量系统编程到软件中，因此软件随后知道他们使用的是 100 系统。我的问题是，如何动态创建表格或某种形式的布局来以类似网格的格式呈现这些数据？我已经使用 tablelayoutpanel 控件进行了研究，但它似乎没有做我需要的事情。我在 Form_Load 事件中有以下代码：

```
private void frmItemBoard_Load(object sender, EventArgs e)
{
    try
    {
        // table data linked to form controls (first 5)
        if (Properties.Settings.Default.systemsize == "5" || Properties.Settings.Default.systemsize == "5")
        {
            // load the layout for a 5 system
        }
        else if (Properties.Settings.Default.systemsize == "10")
        {
            // load the layout for a 10 system
        }
        else if (Properties.Settings.Default.systemsize == "25")
        {
            // load the layout for a 25 system
        }

        // etc.....
        // other system sizes can go here. The software needs to support at least up to 20,000 keys somehow
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString(), ex.Message, MessageBoxButtons.OK, MessageBoxIcon.Error);
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:15:39.350

像这样的东西怎么样

```
int size = Properties.Settings.Default.systemsize;
int height = 0;
int width = 0;

//check our sizes
if (size == 5)
{
    height = 1;
    width = 5;   
else if (size == 10)
{
    height = 2;
    width = 5;
}
else if (size == 25)
{
    height = 5;
    width = 5;
}

//build a table
string table = "<table>";

for (int i = 1, i<=height,i++)
    {
    table += "<tr>"

    for (int j = 1, j<=width,i++)
        {
        table += "<td>"
        table += "some content"
        table += "</td>"
        }

    table += "</tr>"
    }

table += "</table>"

//write table to your page 
```

# python - Python os- 当我使用 os.mkdir 创建目录时，os.path.isdir 告诉我该目录不存在

> ID：11989624
> 
> 赞同：1
> 
> 时间：2012-08-16T14:39:44.003
> 
> 标签：python, operating-system

我正在编写一个相当简单的日记条目程序，我需要检查一个目录是否存在，如果不存在，我需要创建一个。

在 journal.py 中，我正在导入另一个模块：文件。该模块处理文件和目录的创建和删除

**日记.py**

```
if __name__ == '__main__':
    if files.testForDir('entries') == False:
        print 'Directory "entries" does not exist'
        print 'Attempting to create directory'
        files.createDir('entires') 
```

**文件.py**

```
def testForDir(dirname, path=os.getcwd()):
    pathtotest = os.path.join(path, dirname)
    return os.path.isdir(pathtotest)

def createDir(dirname, path=os.getcwd()):
    dirpath = os.path.join(path, dirname)
    try:
        os.mkdir(dirpath)
    except OSError as error:
        print error 
```

**我的问题：**当我在 Ubuntu 中创建目录时，*testForDir()*返回正确的结果。当我在没有 /entries 的情况下运行程序时，它也可以正常运行。它使用*os.mkdir()*创建目录，并且 /entries 出现在 Ubuntu 中。但是，当我在 os.mkdir() 创建目录后运行它时*，* testForDir *()*返回 False 并引发 OSError 异常，因为该文件夹已经存在。

*因此，正式提出问题，并重复我自己：当我使用os.mkdir()*创建目录时，*os.path.isdir()*告诉我该目录不存在。

**系统信息：** Ubuntu 12.04 LTS 32bit，Python 2.7。

文件结构：home/name/Programs/journal/.

日志包含：entrys.py（空白）、files.py、journal.py、entrys（dir）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T14:43:07.900

你有一个拼写错误：

```
'entries' != 'entires' 
```

停止在多个地方对相同的字符串进行硬编码（拼写错误是一种风险，但以后更改也会带来不必要的痛苦）。

把它放在一个变量中，如果你拼错了变量名，Python 会警告你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:45:52.247

我认为整个事情可以更简单：

```
try:
    somfunc(dirpath)
except:
    os.mkdir(dirpath)
    somfunc(dirpath) 
```

# erlang - Erlang中的空进程邮箱

> ID：11989627
> 
> 赞同：5
> 
> 时间：2012-08-16T14:39:53.987
> 
> 标签：erlang, message-passing

当您向 shell 进程发送消息时，您可以通过调用将所有消息清除：[`c:flush().`](http://www.erlang.org/doc/man/c.html#flush-0)

```
C:\Windows\System32>erl
Eshell V5.9（使用 ^G 中止）
1>自我（）！乔希。
乔希
2>自我（）！我。
我
3> 自我（）！你。
你
4> 冲洗（）。
壳牌得到了乔什
壳牌得到了我
壳牌得到你
行
5>

```

在我看来，这清空了shell进程的邮箱。清空任何erlang进程的邮箱的等效方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T14:54:55.710

此函数应刷新邮箱中的所有消息（在您调用它的任何进程中）：

```
flush() ->
        receive
                _ -> flush()
        after
                0 -> ok
        end. 
```

# regex - 如何在 perl 脚本中指定空格范围？

> ID：11989628
> 
> 赞同：-6
> 
> 时间：2012-08-16T14:39:53.340
> 
> 标签：regex, perl, grep

我有两个文件，即`abc_0123_4567.dat`在*Aug 3*创建和`abc_0012_0043.dat`在*Aug 14*创建。

当我们`ls -ltra`在 shell 中输入时，我们得到

```
-rw-r--r--   1 user  sample   640578  Aug  3  03:15  abc_0123_4567.dat
-rw-r--r--   1 user  sample   488542  Aug 14  03:20  abc_0012_0043.dat 
```

我们使用`ls -ltra abc* | grep "Aug 3"` 的时候会显示

```
-rw-r--r--   1 user  sample   640578  Aug  3  03:15  abc_0123_4567.dat 
```

你可以看到日期，`Aug 3`中间有两个空格，中间`Aug 14`有一个空格。

我希望在 perl 中使用与 shell 命令相同的空格进行编码时看到相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:16:19.963

我认为您要问的是一个同时接受一位数和两位数情况的正则表达式。

首先，如果您实际上并不关心空格数，则可以这样做：

```
qr/ ( \b        # At word boundary
      (?:Jan|Feb|Mar|Apr|May|Ju[ln]|Aug|Sep|Oct|Nov|Dec) # 3-letter months
      [ ]{1,2}   # minumum 1, maximum 2 spaces
      \d{1,2}    # minumum 1, maximum 2 digits
    )
   /x; 
```

但这允许`'Aug..14'`(where `'.'`-> `' '`)，如果这应该发生的话。

其次，如果您想要更严格的规范，您可以执行以下操作

```
qr/ ( \b        # At word boundary
      (?:Jan|Feb|Mar|Apr|May|Ju[ln]|Aug|Sep|Oct|Nov|Dec) # 3-letter months
      [ ]       # exactly one space
      [ 123]    # it's a *date* after all
      \d        # ending with a digit
    )
   /; 
```

因此，您得到一个三字符序列、一个确定的空格、一个空格或等于或小于 3 的可能数字，以及一个任意大小的确定数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:39:52.910

如果您试图获取一堆文件的修改日期，那么使用 stat 运算符返回的 mtime 比解析 ls 的输出要好得多。

这将是一个数字，您可以使用 localtime() 运算符将其分解为日期字段。

解析 ls 输出几乎从来都不是正确的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:49:39.013

正则表达式总是匹配精确的空格：

```
ls -ltra abc* | perl -nE "print if /Aug  3/" 
```

几乎等同于：

```
ls -ltra abc* | grep "Aug  3" 
```

# android - 获取处理器架构的 API 调用

> ID：11989629
> 
> 赞同：41
> 
> 时间：2012-08-16T14:39:54.470
> 
> 标签：android, cpu-architecture

作为我的应用程序的一部分，我正在使用 NDK，并且想知道是否值得将 x86 和 mips 二进制文件与标准 ARM 二进制文件捆绑在一起。

我认为最好的方法是跟踪我的用户实际拥有什么，是否有一个 API 调用来获取处理器架构，以便我可以将它传回我的 Google 分析实例？

谢谢

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-22T12:26:34.703

实际上，您完全不需要反思就可以获得架构：

```
String arch = System.getProperty("os.arch"); 
```

从我的测试中它返回`armv71`并且`i686`.

编辑：

在 MIPS 架构上，它返回“mips”或“mips64”

在 64 位 ARM/Intel 上，它分别返回“aarch64”或“x86_64”。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-16T14:35:35.437

你也可以使用android SDK，看看`Build`类：

```
 /** The name of the instruction set (CPU type + ABI convention) of native code. */
    public static final String CPU_ABI = getString("ro.product.cpu.abi");

    /** The name of the second instruction set (CPU type + ABI convention) of native code. */
    public static final String CPU_ABI2 = getString("ro.product.cpu.abi2"); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-12-26T02:36:29.377

您可以使用[Build](http://developer.android.com/reference/android/os/Build.html)类：

`import android.os.Build;`

然后阅读：

`Build.CPU_ABI`

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-04-06T03:57:44.353

您可以使用 adb 命令

adb shell getprop ro.product.cpu.abi adb shell getprop ro.product.cpu.abi2

并参考[站点]：[如何在 Android lollipop 中以编程方式知道应用程序的进程是 32 位还是 64 位？](https://stackoverflow.com/questions/27121199/how-to-know-a-process-of-an-app-is-32-bit-or-64-bit-programmatically-in-android)

如果您正在寻找 Lollipop API

```
import android.os.Build;

Log.i(TAG, "CPU_ABI : " + Build.CPU_ABI);
Log.i(TAG, "CPU_ABI2 : " + Build.CPU_ABI2);
Log.i(TAG, "OS.ARCH : " + System.getProperty("os.arch"));

Log.i(TAG, "SUPPORTED_ABIS : " + Arrays.toString(Build.SUPPORTED_ABIS));
Log.i(TAG, "SUPPORTED_32_BIT_ABIS : " + Arrays.toString(Build.SUPPORTED_32_BIT_ABIS));
Log.i(TAG, "SUPPORTED_64_BIT_ABIS : " + Arrays.toString(Build.SUPPORTED_64_BIT_ABIS)); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-01-24T09:22:54.770

试试这个命令：

```
adb shell getprop ro.product.cpu.abi 
```

它告诉 cpu 是 ARM 还是 Intel（分别为 64 或 86_64）

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-08-16T14:54:33.883

您正在寻找的价值观是

> ro.product.cpu.abi

和

> ro.product.cpu.abi2

这些可以使用内部 api SystemProperties.get 获得，因此您必须在 SystemProperties 上使用反射。

如果您不太热衷于反思，可以使用函数 getSystemProperty。[在这里](https://stackoverflow.com/questions/11796562/read-modem-firmware-version-android/11824150#11824150)检查

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-04-09T20:03:47.017

`termux-app`使用不同的方法并有解释：

```
private static String determineTermuxArchName() {
    // Note that we cannot use System.getProperty("os.arch") since that may give e.g. "aarch64"
    // while a 64-bit runtime may not be installed (like on the Samsung Galaxy S5 Neo).
    // Instead we search through the supported abi:s on the device, see:
    // http://developer.android.com/ndk/guides/abis.html
    // Note that we search for abi:s in preferred order (the ordering of the
    // Build.SUPPORTED_ABIS list) to avoid e.g. installing arm on an x86 system where arm
    // emulation is available.
    for (String androidArch : Build.SUPPORTED_ABIS) {
        switch (androidArch) {
            case "arm64-v8a": return "aarch64";
            case "armeabi-v7a": return "arm";
            case "x86_64": return "x86_64";
            case "x86": return "i686";
        }
    }
    throw new RuntimeException("Unable to determine arch from Build.SUPPORTED_ABIS =  " +
        Arrays.toString(Build.SUPPORTED_ABIS));
} 
```

From: [https://github.com/termux/termux-app/blob/master/app/src/main/java/com/termux/app/TermuxInstaller.java](https://github.com/termux/termux-app/blob/master/app/src/main/java/com/termux/app/TermuxInstaller.java)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-08-20T20:25:01.853

我的代码看起来像这样

```
private String cpuinfo()
{
String arch = System.getProperty("os.arch");    
String arc = arch.substring(0, 3).toUpperCase();
String rarc="";
if (arc.equals("ARM")) {
    rarc= "This is ARM";
    }else if (arc.equals("MIP")){
        rarc= "This is MIPS";
    }else if (arc.equals("X86")){
        rarc= "This is X86";
    }
    return rarc;
} 
```

# jsf-2 - 跳过执行 当父 UI 组件未呈现时

> ID：11989631
> 
> 赞同：8
> 
> 时间：2012-08-16T14:40:01.680
> 
> 标签：jsf-2, include, facelets

为了根据某些操作有条件地呈现页面片段，我在我的 webapp 的几个地方有以下构造：

```
<h:panelGroup rendered="#{managedBean.serviceSelected == 'insurance'}">
    <ui:include src="/pages/edocket/include/service1.xhtml" />
</h:panelGroup> 
```

我观察到，`<ui:include>`即使`rendered`属性评估，仍然会执行`false`。`service1.xhtml`这会不必要地创建与包含的文件关联的所有支持 bean 。

如何`<ui:include>`在未呈现父 UI 组件时跳过执行，以免不必要地创建所有这些支持 bean？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T16:47:48.880

Unfortunately, this is by design. The `<ui:include>` runs as being a taghandler during the view build time, while the `rendered` attribute is evaluated during the view render time. This can be better understood by carefully reading this answer and substituting "JSTL" with "`<ui:include>`": [JSTL in JSF2 Facelets... makes sense?](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

There are several ways to solve this, depending on the concrete functional requirement:

1.  Use a view build time tag like `<c:if>` instead of `<h:panelGroup>`. This however puts implications into the `#{managedBean}`. It can't be view scoped and should do its job based on HTTP request parameters. Exactly those HTTP request parameters should also be retained in subsequent request (by e.g. `<f:param>`, `includeViewParams`, etc) so that it doesn't break when the view is restored.

2.  Replace `<ui:include>` by a custom [`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html) which invokes [`FaceletContext#includeFacelet()`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletContext.html#includeFacelet%28javax.faces.component.UIComponent,%20java.lang.String%29) during the [`UIComponent#encodechildren()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#encodeChildren%28javax.faces.context.FacesContext%29) method. So far no such component exist in any of the existing libraries. But I can tell that I've already such one in mind as a future addition for [OmniFaces](http://omnifaces.org) and it works as intuitively expected here at my test environment (with Mojarra). Here's a kickoff example:

    ```
    @FacesComponent(Include.COMPONENT_TYPE)
    public class Include extends UIComponentBase {

        public static final String COMPONENT_TYPE = "com.example.Include";
        public static final String COMPONENT_FAMILY = "com.example.Output";

        private enum PropertyKeys {
            src;
        }

        @Override
        public String getFamily() {
            return COMPONENT_FAMILY;
        }

        @Override
        public boolean getRendersChildren() {
            return true;
        }

        @Override
        public void encodeChildren(FacesContext context) throws IOException {
            getChildren().clear();
            FaceletContext faceletContext = ((FaceletContext) context.getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY));
            faceletContext.includeFacelet(this, getSrc());
            super.encodeChildren(context);
        }

        public String getSrc() {
            return (String) getStateHelper().eval(PropertyKeys.src);
        }

        public void setSrc(String src) {
            getStateHelper().put(PropertyKeys.src, src);
        }

    } 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T22:13:38.807

使用条件表达式作为 ui:include src：

```
<h:panelGroup>
    <ui:include 
        src="#{managedBean.serviceSelected == 'insurance' ?
            '/pages/edocket/include/service1.xhtml'
            :
            '/pages/empty.xhtml'}"
    />
</h:panelGroup> 
```

# mongodb - MongoDB：是否可以默认设置 BsonElement 的大小写？

> ID：11989632
> 
> 赞同：4
> 
> 时间：2012-08-16T14:40:04.417
> 
> 标签：mongodb, mongodb-.net-driver

我正在使用 Mongodb 官方驱动程序，我想默认将元素的命名设置为小写以避免这样的代码：

```
public class Localization
{
    [BsonId(IdGenerator = typeof(ObjectIdGenerator))]
    public int Id { get; set; }
    [BsonRequired]
    [BsonElement("country")]
    public string Country { get; set; } 
```

在这个示例中，我希望元素名称默认为“国家”而不是“国家”，即小写。是否可以？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-17T08:12:00.193

自 BsonClassMap.RegisterConventions 被标记为过时以来的一个小更新

```
var camelCaseConventionPack = new ConventionPack { new CamelCaseElementNameConvention() };
ConventionRegistry.Register("CamelCase", camelCaseConventionPack, type => true); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T17:00:50.150

```
var conventions = new ConventionProfile();
conventions.SetElementNameConvention(new CamelCaseElementNameConvention());

BsonClassMap.RegisterConventions(conventions, t => true); 
```

[MongoDB CSharp 驱动序列化教程](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Conventions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T14:29:36.780

是的。您可以创建一个 ConventionProfile 并覆盖 ElementName 约定。请参阅此处的文档了解如何操作：[http ://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Conventions](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Conventions)

# java - OpenNLP Namefinder API 中的自定义特征生成

> ID：11989633
> 
> 赞同：6
> 
> 时间：2012-08-16T14:40:06.983
> 
> 标签：java, machine-learning, named-entity-recognition, opennlp

我正在尝试将 OpenNLP 的自定义功能生成用于 Named Finder API。

[http://opennlp.apache.org/documentation/1.5.3/manual/opennlp.html](http://opennlp.apache.org/documentation/1.5.3/manual/opennlp.html)

我浏览了文档，但无法理解如何指定不同的功能。

它只是说：

```
AdaptiveFeatureGenerator featureGenerator = new CachedFeatureGenerator(
     new AdaptiveFeatureGenerator[]{
       new WindowFeatureGenerator(new TokenFeatureGenerator(), 2, 2),
       new WindowFeatureGenerator(new TokenClassFeatureGenerator(true), 2, 2),
       new OutcomePriorFeatureGenerator(),
       new PreviousMapFeatureGenerator(),
       new BigramNameFeatureGenerator(),
       new SentenceFeatureGenerator(true, false)
       }); 
```

但是您如何实际使用这些不同的特征生成器来创建我自己的自定义特征。有人可以发布一个定义这些特征生成器的示例代码，以及我们如何使用它来生成自定义特征。感谢期待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-15T06:41:47.963

我也没有找到任何文档，但是对于大多数功能生成器来说，[代码](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/)是很容易解释的。以下是源存储库的一些链接：

*   [令牌特征生成器](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/TokenFeatureGenerator.java?view=markup)
*   [TokenClassFeatureGenerator](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/TokenClassFeatureGenerator.java?view=markup)
*   [结果优先特征生成器](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/OutcomePriorFeatureGenerator.java?view=markup)
*   [PreviousMapFeatureGenerator](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/PreviousMapFeatureGenerator.java?view=markup)
*   [句子特征生成器](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/SentenceFeatureGenerator.java?view=markup)
*   [BigramNameFeatureGenerator](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/BigramNameFeatureGenerator.java?view=markup)
*   [窗口特征生成器](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/WindowFeatureGenerator.java?view=markup)
*   [缓存特征生成器](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/util/featuregen/CachedFeatureGenerator.java?view=markup)

此外，您参考的[文档](https://opennlp.apache.org/documentation/1.5.3/manual/opennlp.html#tools.namefind.training.featuregen)指出引用的功能生成器**类似于**默认功能生成器。但是，[源代码](https://svn.apache.org/viewvc/opennlp/trunk/opennlp-tools/src/main/java/opennlp/tools/namefind/NameFinderME.java?view=markup)显示它实际上**与**默认的特征生成器相同。

# ios - iOS >> 为什么我无法访问 UIView.layer.properties？

> ID：11989635
> 
> 赞同：1
> 
> 时间：2012-08-16T14:40:08.370
> 
> 标签：ios, uiview, properties, layer

我在 .xib 文件中有一个 UIView 作为 IBOutlet 连接到它的相关 .h 文件。我希望设置它的图层属性：borderColor、borderWidth 和cornerRadius。

我以前做过一次，这很容易。它是这样的：

```
-(void) viewDidLoad {
     [super viewDidLoad];
     self.myView.layer.borderColor = [UIColor blueColor].CGColor;
     self.myView.layer.borderWidth = 1.0f;
     self.myView.layer.cornerRadius = 10.0f;
} 
```

出于某种原因，当我在这个新项目中执行此操作时，这些图层属性不可用。当我写“self.myView.layer”时。我没有选择填写。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:43:13.303

你必须

```
#import <QuartzCore/QuartzCore.h> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T14:42:57.990

将 QuartzCore 框架添加到您的项目中

```
#import <QuartzCore/QuartzCore.h> 
```

在您的 .h 或 .m 文件中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T14:54:03.230

试试这个 1\. 将 QuartzCore 框架添加到您的项目中

```
#import <QuartzCore/QuartzCore.h> 
```

2.

```
 -(void) viewDidLoad {
     [super viewDidLoad];
     CALayer *myViewlayer = self.myView.layer;
     [myViewlayer setBorderColor:[UIColor blueColor].CGColor];
     [myViewlayer setBorderWidth:1.0f];
     [myViewlayer setCornerRadius:10.0f];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:43:34.987

如果您有所有的进口商品：

```
#import <QuartzCore/QuartzCore.h> 
```

那么这可能是旧版本 XCode 中的一个已知索引问题

打开文件夹`~/Library/Developer/Xcode/DerivedData`并删除与您的应用名称相似的文件夹

# android - 有没有办法在 Android 中制作自定义路径效果？

> ID：11989636
> 
> 赞同：0
> 
> 时间：2012-08-16T14:40:10.757
> 
> 标签：android, graphics, android-canvas

我想制作一个可以显示线条图的 Android 应用程序，并且我想制作一些漂亮的东西（巨大的挑战）。

基本上，该应用程序将显示基于 xy 坐标的绘图。结果必须与基于 Web 的应用程序中的另一个绘图相同。对于基于 Web 的应用程序，我们将使用[这个库](http://projects.mattytemple.com/html5/harmony/)。

我知道如何在 Android 应用程序的画布上绘制路径，但我不知道如何对其应用自定义效果。我注意到我可以通过这种方法使用[PathEffect](http://developer.android.com/reference/android/graphics/PathEffect.html)：

```
paint.setPathEffect(myEffect); 
```

但我不确定如何创建除可用效果之外的其他效果（ComposePathEffect、CornerPathEffect、DashPathEffect、DiscretePathEffect、PathDashPathEffect、SumPathEffect）。

任何提示和帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:52:32.113

一种选择是查看这些路径效果的源代码，了解它们是如何工作的，想法是什么，并推导出如何制作自己的路径效果。

# jquery - 将 jQuery 单击事件分配给正文中的所有内容，除了一些 div 及其子项

> ID：11989640
> 
> 赞同：4
> 
> 时间：2012-08-16T14:40:19.467
> 
> 标签：jquery, javascript-events

当我在页面上按下 div 时，会出现一个弹出窗口。当您再次单击 div 时，弹出窗口消失。当您在 div 外部单击时，弹出窗口消失 - 到目前为止一切都很好。

问题是，当我单击弹出窗口时，我想要它以便弹出窗口及其子项是可点击的（它们是无序列表中的链接）。但是，我似乎无法让它发挥作用。这是我的代码

```
 $(function () {
            $('#messageNotification').click(function (event) {
            $("body").one('click', function () {

                jQuery(".userInfo").fadeOut();
            });
            event.stopPropagation();
        });

          <body>
            <div id="messageNotification"><div class="notif same">0</div></div>
            <div id="messages">
                <ul class="userInfo" style="">
                    <li></li>
                </ul>
            </div>

          </body> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T15:04:41.047

如果我对您的理解正确，您可以按选择器进行过滤。例如：

```
$('body').on('click', 'a', function(){ ... }); 
```

这会将`click`事件绑定到与选择器匹配的所有元素`a`。

如果要将单击绑定到与弹出窗口*不*匹配的所有元素，可以执行以下操作：

```
$('body').on('click', ':not(#popup)', function(){ // code to dismiss popup here }); 
```

有关更多信息，请参阅[:not()](http://jqapi.com/#p=not-selector)和[.on()](http://jqapi.com/#p=on)的 jquery 文档...

# java - 什么是检查 SERIAL/COM 端口是否在 Java 中使用的可移植方法

> ID：11989641
> 
> 赞同：0
> 
> 时间：2012-08-16T14:40:19.757
> 
> 标签：java, serial-port

我正在使用 Java 框架，我需要检查空闲的串行 COM 端口（未被任何其他应用程序打开）。是否可以在 Java 中进行检查？一个警告是我不能向应用程序添加任何包，我只能使用标准 Java 类。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:46:28.360

这可以使用 JDK 1.6.0_21 并且`javax.comm`由 Sun/Oracle 提供，但我不知道它是否符合您将标准 java 类定义为单独安装的定义。

```
import java.util.Enumeration;
import javax.comm.CommPortIdentifier;

public class PortList {
  public static void main(String[] args) {
    Enumeration<?> ports = CommPortIdentifier.getPortIdentifiers();
    StringBuffer buffer =  new StringBuffer("Ports:\n");
    while (ports.hasMoreElements()) {
      CommPortIdentifier port = (CommPortIdentifier) ports.nextElement();
      String type;
      switch (port.getPortType()) {
      case CommPortIdentifier.PORT_PARALLEL:
        type = "Parallel";
        break;
      case CommPortIdentifier.PORT_SERIAL:
        type = "Serial";
        break;
      default: /// Shouldn't happen
        type = "Unknown";
        break;
      }
      buffer.append(String.format("%s : %s Owner: %s\n",port.getName(),type,port.getCurrentOwner()));

    }
    System.out.println(buffer.toString());
  }
} 
```

关键方法/类是 `CommPortIdentifier.getPortIdentifiers()`

# jquery - asp.net mvc 3 ajax 发布请求

> ID：11989649
> 
> 赞同：0
> 
> 时间：2012-08-16T14:40:50.567
> 
> 标签：jquery, ajax, asp.net-mvc-3, post

您好我正在创建一个应用程序，该应用程序将跟踪用户何时发送发布请求。一旦它有一定数量的发布请求，它将重定向到另一个页面。我知道我需要创建一个 ajax 函数，并且它必须处于循环状态以继续检查帖子是否已到达，但要确定这是如何完成的。

如果有人可以帮助解决这个问题，或者至少为我指明正确的方向，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:01:55.440

您可以使用该[`window.setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)函数定期执行某些功能：

```
window.setInterval(function() {
    // this will run every second
    if (user reached POST limit) {
        // redirect him somewhere
        window.location.href = 'http://www.google.com';
    }
}, 1000); 
```

[或者，如果您正在跟踪我在这里向您展示](https://stackoverflow.com/a/11972410/29407)的 POST 请求的数量：

```
var count = 0;

$.ajaxSetup({
    beforeSend: function(jqXHR, settings) {
        if (settings.type == 'POST') {
            count++;
        }

        // Allow only 3 POST AJAX requests for this page 
        // and if there are more abort them
        if (count > 3) {
            window.location.href = 'http://www.google.com';
            return false;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:02:10.563

如果您所做的只是在 HTTP 帖子进入 Web 服务器时记录它们，您可以执行以下操作：

1 检查 cookie 以查看这是否是重复请求 如果 cookie 符合您的条件，则重定向到不同的页面。那时您可能想清除或重置 cookie，因为我怀疑您可能也想在该入口点登录 2 记录操作

这不一定是 Ajax 请求，但可以。对于 Web 服务器来说，请求就是请求。

# java - 不使用 3rd 方库（核心 Java）从 HTTP 请求字符串解析 HTTP 标头的最佳方法

> ID：11989651
> 
> 赞同：5
> 
> 时间：2012-08-16T14:41:01.473
> 
> 标签：java, http

给定 HTTP 请求标头，是否有人有建议或知道现有代码以正确解析标头？我正在尝试仅使用 Core Java 执行此操作，没有第三方库

编辑：

尝试从此字符串中查找关键字段，例如：

GET / HTTP/1.1User-Agent: curl/7.19.7 (x86_64-pc-linux-gnu) libcurl/7.19.7 OpenSSL/0.9.8k zlib/1.2.3.3 libidn/1.15Host: localhost:9000Accept: */*

想解析出Method和method

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:54:12.917

首先阅读和理解[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616.html)。

请求行和标头由 CR LF 序列（十进制值 13 和 10 的字节）分隔，因此您可以读取流并分离出每一行。我*相信*标头必须以 US-ASCII 编码，因此您可以简单地将字节转换为字符并附加到 a `StringBuilder`（但检查规范：它可能允许 ISO-8859-1 或其他编码）。

标题的结尾由 CR LF CR LF 表示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-15T17:42:16.610

我编写了一个库[RawHTTP](https://github.com/renatoathaydes/rawhttp)，其唯一目的是解析 HTTP 消息（请求和响应）。

如果您不想使用库，您可以将源代码复制到您自己的代码库中，从以下开始：[https ://github.com/renatoathaydes/rawhttp/blob/a6588b116a4008e5b5840d4eb66374c0357b726d/rawhttp-core/src/main/ java/com/athaydes/rawhttp/core/RawHttp.java#L52](https://github.com/renatoathaydes/rawhttp/blob/a6588b116a4008e5b5840d4eb66374c0357b726d/rawhttp-core/src/main/java/com/athaydes/rawhttp/core/RawHttp.java#L52)

这会将 HTTP 消息的行一直拆分到元数据部分的末尾（起始行 + 标头）。

有了手头的元数据行列表，您就可以调用该[`parseHeaders`](https://github.com/renatoathaydes/rawhttp/blob/a6588b116a4008e5b5840d4eb66374c0357b726d/rawhttp-core/src/main/java/com/athaydes/rawhttp/core/RawHttp.java#L335)方法，该方法将为您创建标题。您可以轻松地将其调整为仅返回 a`Map<String, List<String>>`以避免还必须导入头类。

也就是说... RawHTTP 没有依赖项，所以我会使用它来代替:) 但这取决于你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T14:59:40.187

您连接的单行字符串不是 HTTP 标头。

正确的 HTTP 请求消息应如下所示（并非总是如此）

```
GET / HTTP/1.1 CRLF
Host: localhost:9000 CRLF
User-Agent: curl/7.19.7 blar blar CRLF
Accept: */* CRLF
Content-Length: ?? CRLF
...: ... CRLF
CRLF
octets 
```

见这里[http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html)

如果你想在没有任何 Sevlets、JavaEE 容器帮助的情况下实现 HTTP 服务器，你应该使用 Sockets。

1.  阅读第一行 [Request-Line = Method SP Request-URI SP HTTP-Version CRLF]
2.  逐行读取请求标题，直到得到空行
3.  对于每个标题行，您可以解析 [fieldName: fieldValue]
4.  读取实体主体。

这不是 HTTP 消息合约的唯一情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T11:37:58.163

我正在使用 guava 库来包含我的方法的先决条件。您可以删除它们以支持空检查。

```
 /**
   * @return a string consisting of the HTTP headers, concatenating the keys and values delimited by
   * CFLR (empty line) capable of serialization to the database.
   */
  public static final String httpHeadersToString(final HttpResponse httpResponse) {
    Preconditions.checkNotNull(httpResponse);
    Preconditions.checkNotNull(httpResponse.getAllHeaders());

    final Header[] allHeaders = httpResponse.getAllHeaders();
    StringBuffer sb = new StringBuffer();
    int index = 0;
    while(index < allHeaders.length) {
      Header header = allHeaders[index];

      sb.append(header.getName())
         .append(System.getProperty("line.separator"))
         .append(header.getValue());

      if (++index < allHeaders.length) {
        sb.append(System.getProperty("line.separator"));
      }
    }
    return sb.toString();
  }

  /**
   * @return reconstruct HTTP headers from a string, delimited by CFLR (empty line).
   */
  public final HttpHeaders stringToHttpHeaders(final String headerContents) {
    HttpHeaders httpHeaders = new HttpHeaders();
    final String[] tempHeaderArray = headerContents.split(System.getProperty("line.separator"));
    int i = 0;
    while (i + 1 <= tempHeaderArray.length) {
      httpHeaders.add(tempHeaderArray[i++], tempHeaderArray[i++]);
    }
    return httpHeaders;
  } 
```

# php - YII 下拉菜单，2 个模型

> ID：11989652
> 
> 赞同：0
> 
> 时间：2012-08-16T14:41:07.680
> 
> 标签：php, yii

我是 PHP 和 yii 框架的新手，所以我需要下拉菜单方面的帮助。在我的数据库中，我有 2 个表 - 类别 - id、名称和新闻 - id、标题、内容、category_id。我怎样才能在这两个控制器之间建立关系？当我发布新闻时，我必须从下拉菜单中选择类别。我很抱歉这个愚蠢的问题，但我现在不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:50:28.390

只需将其放在您的新闻模型中：

```
 /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'category' => array(self::BELONGS_TO, 'Category', 'category_id'),
        );
    } 
```

这在您的类别模型中：

```
 /**
 * @return array relational rules.
 */
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'newsItems' => array(self::HAS_MANY, 'News', 'category_id'),
    );
} 
```

每当您拥有类别的实例时，您都可以像这样引用多个新闻项目：

```
$category = Category::model()->findByPk(1);

$category->newsItems; //an array of News objects 
```

您可以像这样参考该类别：

```
$news = News::model()->findByPk(1);

$category = $news->category; //a Category object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:50:27.520

我认为您在**创建**新闻项目时询问如何显示所有类别以供选择。在您创建新闻对象的表单中，您需要以下内容：

```
$cats = Category::model()->findAll();
$cats = CHtml::listData($cats, 'id', 'name');
$form->dropDownList($model, 'category', $cats); 
```

对于它们之间的关系以及之后访问它，请参阅 Benjamin Bytheway 的回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:09:06.623

您可以像这样在一行中完成 paystey 所写的所有内容：

```
<?php echo $form->dropDownList($model,'Category', CHtml::listData($CategoryModel::model()->findAll(array('order'=>'Text ASC')), 'CategoryID', 'Text'), array('empty'=> ' -- Select A Category -- '));?> 
```

列表数据的最后一个参数就是页面加载时应该显示的内容。

# php - 如何通过 php 从 HTML 表单发送多个复选框响应？

> ID：11989656
> 
> 赞同：0
> 
> 时间：2012-08-16T14:41:13.437
> 
> 标签：php, forms

我已经设置了一个联系表格，并将其设置为通过电子邮件将回复发送到电子邮件帐户。表单的一部分是一系列复选框，我需要将它们作为列表显示在电子邮件中。这是我下面的代码，它目前返回“数组”而不是复选框的值。有什么建议么？

HTML：

```
<h3>Service required:</h3>
<input type="text" id="name" name="name" placeholder="Name" required />
<input type="email" id="email" name="email" placeholder="Email" required />
<input class="check-box styled" type="checkbox" name="service[]" value="Service / repairs" /><label> Service / repairs</label>
<input class="check-box styled" type="checkbox" name="service[]" value="MOT" /><label> MOT</label>
<input class="check-box styled" type="checkbox" name="service[]" value="Cars for sale" /><label> Cars for sale</label> 
```

这是php：

```
<?php
    if (isset($_POST['service'])) {
    $service = $_POST['service'];
    // $service is an array of selected values
}
$formcontent= "From: $name \n Service(s) required: $service \n";
$recipient = "name@email.com";
$subject = "You have a new message from $name";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You! We will get back to you as soon as we can.";
?> 
```

谢谢，

杰森

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:47:03.077

你应该将你的数组元素加入（例如用'，'内爆）到一个字符串。

```
<?php
$formcontent= "From: $name \n Service(s) required: ".implode(", " ,$service)." \n";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:49:12.850

由于在 中存储了几个复选框`$_POST['service']`，因此它本身就是一个数组，并且已经变成了二维的。它的不同索引可以像这样访问：`$_POST['service'][0]`.

要对 做某事`$_POST['service']`，您可以使用 foreach 遍历所有索引：

```
foreach($_POST['service'] as $post){
    //Do stuff here
} 
```

或者，使用[implode()](http://php.net/manual/en/function.implode.php)简单地连接所有索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:47:48.763

为什么不循环遍历数组以将所需的结果转换为字符串？

```
if (isset($_POST['service'])) {
    $service = $_POST['service'];
    // $service is an array of selected values
    $service_string = "";
    for($i=0;$i<count($service);$i++)
    {
        if($i!=0)
        {
            $service_string = $service_string . ", ";
        }
        $service_string = $service_string . $service[$i];
    }
} 
```

然后，您将获得每个勾选项目的逗号分隔列表的输出作为 $service_string。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:51:10.323

您的输入类型 checkbix 必须具有唯一的名称。否则最后一个复选框将在 $_POST 中找到。或者您可以按照上面的讨论循环。将您的电子邮件设为 html 格式并将一串 html 写入 $formcontent。例如

```
$formcontent = "<html><head></head><body>";
$formcontent .= "<ul><li>".$_POST["checkbox1"]."</li>";
$formcontent .= "<li>".$_POST["checkbox2"]."</li>";
$formcontent .= "</ul></body></html>"; 
```

要以 html 格式编写电子邮件，请参阅 php 网站上的邮件功能。

# azure - Windows Azure 预览版的新功能

> ID：11989659
> 
> 赞同：2
> 
> 时间：2012-08-16T14:41:19.820
> 
> 标签：azure, web, ftp, alias, preview

关于 Windows Azure Website Preview 服务（将我的网站放到云端）的 3 个问题： 1\. 有点尴尬，但是我找不到我的 FTP 凭证。我尝试了我的网站设置凭据以及数据源字符串。两者都不适用。那么它在哪里呢？2\. 我也需要数据库访问权限，但似乎也找不到相应的入口 URL。任何输入表示赞赏。3\. 最后，我买了自己的域名。如何创建别名（可能来自 Apache 或 IIS，但不确定）以便用户只能看到 example.com 而不是 example.azurewebsites.net？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:58:24.240

1.  您将在发布配置文件中找到 FTP 凭据。在 Windows Azure 门户中，只需打开该站点的仪表板并选择**下载发布配置文件**。使用任何文本编辑器打开该文件，您将看到 FTP 凭据。
2.  如果要使用数据库，请转到该站点的仪表板并选择添加链接资源。在那里您将能够添加一个 SQL 数据库。完成后，您将在**Quick Glance > 查看连接字符串下看到连接字符串**
3.  只有使用具有 CNAME[的保留实例才能](https://stackoverflow.com/questions/11027635/can-i-point-my-domain-name-to-an-azure-web-site/11027704#11027704)将您自己的域用于 Windows Azure 网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:48:11.920

如果您想通过 FTP 将您的应用程序部署到 Windows Azure 网站，您可以在[此处查看我的博客，](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/19/windows-azure-website-uploading-downloading-files-over-ftp-and-collecting-diagnostics-logs.aspx)该博客解释了与 FTP 部署相关的大部分信息。

正如 Sandrino 解释的那样，您可以快速浏览查看连接设置，如果您在此处查看[文章中的](https://www.windowsazure.com/en-us/manage/services/web-sites/how-to-configure-websites/)以下部分，您将获得更多关于这方面的信息：

1.  如何：配置网站以使用 SQL 数据库
2.  如何：配置网站以使用 MySQL 数据库

休息已经为您解答。

# windows - Linux 上的 apache jenkins 是否也需要 http 服务器？

> ID：11989666
> 
> 赞同：1
> 
> 时间：2012-08-16T14:41:36.577
> 
> 标签：windows, linux, http, jenkins

Apache Jenkins 入门。查看 Apache Jenkins 的 Windows 版本，当它安装时，它似乎在端口 8080 上的特定网页上运行。它是否也包含一个 http 服务器作为该安装的一部分？

Linux 安装也是如此吗？

此外，有关使用 Jenkins 的一些相关问题提到了 http 服务器 - 安装单独的 http 服务器的具体原因是什么 - 是为了安全/身份验证/控制？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:49:07.580

它带有一个 bultin 服务器，但这并不是真正为生产流量而设计的。如果您的服务器是面向公众的，那么将其视为应用服务器并在前面放置一个真正的 http 服务器来代理它可能是一个好主意。

# jquery - 当对象（在单元格中）没有值数组时，无法在 jqGrid 中显示行（单元格值）

> ID：11989667
> 
> 赞同：0
> 
> 时间：2012-08-16T14:41:36.420
> 
> 标签：jquery, jqgrid

当我将 jqgrid 与来自服务器的跟随 json 绑定时，我的行被重新渲染但没有单元格文本，对于每个单元格，我使用一个对象而不是一个值数组，当我使用 addRowGrid 方法直接所有工作正常：

```
{"total":1,"records":2,"page":1,"rows":[{"id":14,"cell":{"Edital":{"OpcaoDesclassificacaoRegraDezPorcento":false,"DataInclusaoEdital":"0001-01-01T00:00:00","NumeroEdital":"99902/2012","DescricaoObjeto":"BURGO","DataInicioFase":"2012-08-02T14:50:00","DataHoraUltimaAlteracao":"0001-01-01T00:00:00","InformacaoAtributoPadrao":false,"Lotes":[],"EditalConvidados":[],"EditalAdendos":[],"EditalAnexos":[],"MembrosEquipe":[],"Interessados":[],"Objetivo":"","NomeModalidade":"","NomeModalidaCompleta":"","NomeSituacao":"","NomeOrgaoPromotor":"","NomeUnidadeCompradora":"","ChaveIdentificacaoDocumento":"DOCUMENTO_EDITAL","VenceMenorOferta":false,"Versao":0,"Chave":8005},"Modalidade":{"Descricao":"Pregão","Chave":1},"TipoLicitacao":{"Descricao":"Pública","SiglaSistemaBbmnet":"LIC","Chave":1},"TipoCotacao":{"Descricao":"Menor Preço","Chave":1},"OrgaoPromotor":{"NomeResumido":"CESAT OrgPub","IsAtivo":false,"Chave":1162},"EtapaLote":{"Descricao":"Não iniciado","Chave":1},"SituacaoLote":{"Descricao":"Em Andamento","Chave":1},"TipoTermino":{"IsRandomico":true,"Chave":1},"Lote":{"QuantidadeCasaDecimal":0,"DataHoraAlteracao":"0001-01-01T00:00:00","OfertasVencedoras":[],"Ofertas":[],"ItensLote":[],"LoteAdendos":[],"NumeroLote":1,"ValorTotalItensLote":0.0,"NumeroRodada":1,"Eventos":[],"DescricaoProduto":"","SomaPrecoProdutos":0.0,"DescricaoSituacaoLote":"","EditalLoteFormatado":"","DescricaoTipoLicitacao":"","DescricaoModalidade":"","NomeOrgaoPromotor":"","DataHoraInicio":"","Objeto":"","Versao":0,"OfertasMPEPP":[],"QuantidadeOfertasAtivas":0,"Chave":8029},"LoteItem":{"QuantidadeProduto":100.00000,"UnidadeProduto":{"DataInclusao":"0001-01-01T00:00:00","Chave":0.0},"PrecoProduto":0.0,"PrecoProdutoAtual":0.0,"DataHoraAlteracao":"0001-01-01T00:00:00","Numero":0,"CodigoDescricaoProduto":"","PrecoProdutoFormatado":"0,00","Ofertas":[],"Chave":8283},"CodigoUnidade":"Unidade","TempoDecorrido":0,"PrecoReferencia":50000.0000000000000,"PercentualVariacao":0.00,"DataHoraUltimaAlteracao":"2012-08-02T14:33:22","Estado":{"Chave":"AC"},"DivulgacaoPreco":false,"DataHoraUltimoInicio":"2012-08-02T14:50:00","QuantidadeInteressado":0.00000,"DescricaoModalidade":"Pregão Pública Menor Preço","PrecoReferenciaExibicao":50000.0000000000000,"PercentualVariacaoExibicao":0.00,"TempoDecorridoExibicao":1197202,"QuantidadeProdutoExibicao":"100,00000Unidade","SituacaoExibicao":"Não iniciado/Em Andamento","Legendas":[4],"MelhorLanceExibicao":0.0,"Chave":14}},{"id":15,"cell":{"Edital":{"OpcaoDesclassificacaoRegraDezPorcento":false,"DataInclusaoEdital":"0001-01-01T00:00:00","NumeroEdital":"99902/2012","DescricaoObjeto":"BURGO","DataInicioFase":"2012-08-02T14:50:00","DataHoraUltimaAlteracao":"0001-01-01T00:00:00","InformacaoAtributoPadrao":false,"Lotes":[],"EditalConvidados":[],"EditalAdendos":[],"EditalAnexos":[],"MembrosEquipe":[],"Interessados":[],"Objetivo":"","NomeModalidade":"","NomeModalidaCompleta":"","NomeSituacao":"","NomeOrgaoPromotor":"","NomeUnidadeCompradora":"","ChaveIdentificacaoDocumento":"DOCUMENTO_EDITAL","VenceMenorOferta":false,"Versao":0,"Chave":8005},"Modalidade":{"Descricao":"Pregão","Chave":1},"TipoLicitacao":{"Descricao":"Pública","SiglaSistemaBbmnet":"LIC","Chave":1},"TipoCotacao":{"Descricao":"Menor Preço","Chave":1},"OrgaoPromotor":{"NomeResumido":"CESAT OrgPub","IsAtivo":false,"Chave":1162},"EtapaLote":{"Descricao":"Não iniciado","Chave":1},"SituacaoLote":{"Descricao":"Em Andamento","Chave":1},"TipoTermino":{"IsRandomico":true,"Chave":1},"Lote":{"QuantidadeCasaDecimal":0,"DataHoraAlteracao":"0001-01-01T00:00:00","OfertasVencedoras":[],"Ofertas":[],"ItensLote":[],"LoteAdendos":[],"NumeroLote":2,"ValorTotalItensLote":0.0,"NumeroRodada":1,"Eventos":[],"DescricaoProduto":"","SomaPrecoProdutos":0.0,"DescricaoSituacaoLote":"","EditalLoteFormatado":"","DescricaoTipoLicitacao":"","DescricaoModalidade":"","NomeOrgaoPromotor":"","DataHoraInicio":"","Objeto":"","Versao":0,"OfertasMPEPP":[],"QuantidadeOfertasAtivas":0,"Chave":8030},"LoteItem":{"QuantidadeProduto":50.00000,"UnidadeProduto":{"DataInclusao":"0001-01-01T00:00:00","Chave":0.0},"PrecoProduto":0.0,"PrecoProdutoAtual":0.0,"DataHoraAlteracao":"0001-01-01T00:00:00","Numero":0,"CodigoDescricaoProduto":"","PrecoProdutoFormatado":"0,00","Ofertas":[],"Chave":8284},"CodigoUnidade":"Caixa","TempoDecorrido":0,"PrecoReferencia":5000.0000000000000,"PercentualVariacao":0.00,"DataHoraUltimaAlteracao":"2012-08-02T14:33:22","Estado":{"Chave":"AC"},"DivulgacaoPreco":false,"DataHoraUltimoInicio":"2012-08-02T14:50:00","QuantidadeInteressado":0.00000,"DescricaoModalidade":"Pregão Pública Menor Preço","PrecoReferenciaExibicao":5000.0000000000000,"PercentualVariacaoExibicao":0.00,"TempoDecorridoExibicao":1197202,"QuantidadeProdutoExibicao":"50,00000Caixa","SituacaoExibicao":"Não iniciado/Em Andamento","Legendas":[4],"MelhorLanceExibicao":0.0,"Chave":15}}]} 
```

按照我的代码：

```
$("#gridRelacaoLote").jqGrid({
        url: '<%= this.ResolveClientUrl("~/Handlers/RelacaoLoteHandler.ashx") %>',
        datatype: 'json',
        contentType: 'application/json',
        ajaxGridOptions: { contentType: 'application/json; charset=utf-8' },
        mtype: 'GET',
        colNames: ['ID', 'Situacao Exibição', 'Cod. Unidade', 'Modalidade'],
        colModel: [{ name: 'Chave', index: 'Chave', width: 20, align: 'right', editable: false, hidden: true },
                   { name: 'SituacaoExibicao', index: 'SituacaoExibicao', width: 200, editable: false },
                   { name: 'CodigoUnidade', index: 'CodigoUnidade', width: 80, editable: false, align: 'left' },
                   { name: 'DescricaoModalidade', index: 'DescricaoModalidade', width: 80, editable: false, align: 'left' }
                      ],
            pager: $('#paginadorRelacaoLote'),
            rowNum: 10,
            rowList: [10, 15, 20, 25],
            sortname: 'Chave',
            sortorder: 'asc',
            viewrecords: true,
            autowidth: true,
            height: 160,
            recordtext: "Lotes de {0} até {1} / {2}",
            emptyrecords: "Nenhum lote encontrado.",
            loadtext: "Aguarde, carregando dados...",
            pgtext: "Página {0} de {1}",
            caption: "Lotes", 
            beforeProcessing: function(data) {

            }            
        }); 
```

![有问题的网格](../Images/483a644432c148e860d5c05d7d66a6e8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:12:11.590

我解决了我的问题，

在 jqGrid 选项中放：

```
jsonReader: {
                repeatitems: false,
                id: "Chave"
            } 
```

并更改了 json 格式，从 json 中删除了单元格属性：

```
{"total":1,"records":2,"page":1,"rows":[{"**Edital":{"OpcaoDesclassificacaoRegraDezPorcento":false,"DataInclusaoEdital":"0001-01-01T00:00:00","NumeroEdital":"99902/2012","DescricaoObjeto":"BURGO","DataInicioFase":"2012-08-02T14:50:00","DataHoraUltimaAlteracao":"0001-01-01T00:00:00","InformacaoAtributoPadrao":false,"Lotes":[],"EditalConvidados":[],"EditalAdendos":[],"EditalAnexos":[],"MembrosEquipe":[],"Interessados":[],"Objetivo":"","NomeModalidade":"","NomeModalidaCompleta":"","NomeSituacao":"","NomeOrgaoPromotor":"","NomeUnidadeCompradora":"","ChaveIdentificacaoDocumento":"DOCUMENTO_EDITAL","VenceMenorOferta":false,"Versao":0,"Chave":8005},"Modalidade":{"Descricao":"Pregão","Chave":1},"TipoLicitacao":{"Descricao":"Pública","SiglaSistemaBbmnet":"LIC","Chave":1},"TipoCotacao":{"Descricao":"Menor Preço","Chave":1},"OrgaoPromotor":{"NomeResumido":"CESAT OrgPub","IsAtivo":false,"Chave":1162},"EtapaLote":{"Descricao":"Não iniciado","Chave":1},"SituacaoLote":{"Descricao":"Em Andamento","Chave":1},"TipoTermino":{"IsRandomico":true,"Chave":1},"Lote":{"QuantidadeCasaDecimal":0,"DataHoraAlteracao":"0001-01-01T00:00:00","OfertasVencedoras":[],"Ofertas":[],"ItensLote":[],"LoteAdendos":[],"NumeroLote":1,"ValorTotalItensLote":0.0,"NumeroRodada":1,"Eventos":[],"DescricaoProduto":"","SomaPrecoProdutos":0.0,"DescricaoSituacaoLote":"","EditalLoteFormatado":"","DescricaoTipoLicitacao":"","DescricaoModalidade":"","NomeOrgaoPromotor":"","DataHoraInicio":"","Objeto":"","Versao":0,"OfertasMPEPP":[],"QuantidadeOfertasAtivas":0,"Chave":8029},"LoteItem":{"QuantidadeProduto":100.00000,"UnidadeProduto":{"DataInclusao":"0001-01-01T00:00:00","Chave":0.0},"PrecoProduto":0.0,"PrecoProdutoAtual":0.0,"DataHoraAlteracao":"0001-01-01T00:00:00","Numero":0,"CodigoDescricaoProduto":"","PrecoProdutoFormatado":"0,00","Ofertas":[],"Chave":8283},"CodigoUnidade":"Unidade","TempoDecorrido":0,"PrecoReferencia":50000.0000000000000,"PercentualVariacao":0.00,"DataHoraUltimaAlteracao":"2012-08-02T14:33:22","Estado":{"Chave":"AC"},"DivulgacaoPreco":false,"DataHoraUltimoInicio":"2012-08-02T14:50:00","QuantidadeInteressado":0.00000,"DescricaoModalidade":"Pregão Pública Menor Preço","PrecoReferenciaExibicao":50000.0000000000000,"PercentualVariacaoExibicao":0.00,"TempoDecorridoExibicao":1207233,"QuantidadeProdutoExibicao":"100,00000Unidade","SituacaoExibicao":"Não iniciado/Em Andamento","Legendas":[4],"MelhorLanceExibicao":0.0,"Chave":14},{"Edital":{"OpcaoDesclassificacaoRegraDezPorcento":false,"DataInclusaoEdital":"0001-01-01T00:00:00","NumeroEdital":"99902/2012","DescricaoObjeto":"BURGO","DataInicioFase":"2012-08-02T14:50:00","DataHoraUltimaAlteracao":"0001-01-01T00:00:00","InformacaoAtributoPadrao":false,"Lotes":[],"EditalConvidados":[],"EditalAdendos":[],"EditalAnexos":[],"MembrosEquipe":[],"Interessados":[],"Objetivo":"","NomeModalidade":"","NomeModalidaCompleta":"","NomeSituacao":"","NomeOrgaoPromotor":"","NomeUnidadeCompradora":"","ChaveIdentificacaoDocumento":"DOCUMENTO_EDITAL","VenceMenorOferta":false,"Versao":0,"Chave":8005},"Modalidade":{"Descricao":"Pregão","Chave":1},"TipoLicitacao":{"Descricao":"Pública","SiglaSistemaBbmnet":"LIC","Chave":1},"TipoCotacao":{"Descricao":"Menor Preço","Chave":1},"OrgaoPromotor":{"NomeResumido":"CESAT OrgPub","IsAtivo":false,"Chave":1162},"EtapaLote":{"Descricao":"Não iniciado","Chave":1},"SituacaoLote":{"Descricao":"Em Andamento","Chave":1},"TipoTermino":{"IsRandomico":true,"Chave":1},"Lote":{"QuantidadeCasaDecimal":0,"DataHoraAlteracao":"0001-01-01T00:00:00","OfertasVencedoras":[],"Ofertas":[],"ItensLote":[],"LoteAdendos":[],"NumeroLote":2,"ValorTotalItensLote":0.0,"NumeroRodada":1,"Eventos":[],"DescricaoProduto":"","SomaPrecoProdutos":0.0,"DescricaoSituacaoLote":"","EditalLoteFormatado":"","DescricaoTipoLicitacao":"","DescricaoModalidade":"","NomeOrgaoPromotor":"","DataHoraInicio":"","Objeto":"","Versao":0,"OfertasMPEPP":[],"QuantidadeOfertasAtivas":0,"Chave":8030},"LoteItem":{"QuantidadeProduto":50.00000,"UnidadeProduto":{"DataInclusao":"0001-01-01T00:00:00","Chave":0.0},"PrecoProduto":0.0,"PrecoProdutoAtual":0.0,"DataHoraAlteracao":"0001-01-01T00:00:00","Numero":0,"CodigoDescricaoProduto":"","PrecoProdutoFormatado":"0,00","Ofertas":[],"Chave":8284},"CodigoUnidade":"Caixa","TempoDecorrido":0,"PrecoReferencia":5000.0000000000000,"PercentualVariacao":0.00,"DataHoraUltimaAlteracao":"2012-08-02T14:33:22","Estado":{"Chave":"AC"},"DivulgacaoPreco":false,"DataHoraUltimoInicio":"2012-08-02T14:50:00","QuantidadeInteressado":0.00000,"DescricaoModalidade":"Pregão Pública Menor Preço","PrecoReferenciaExibicao":5000.0000000000000,"PercentualVariacaoExibicao":0.00,"TempoDecorridoExibicao":1207234,"QuantidadeProdutoExibicao":"50,00000Caixa","SituacaoExibicao":"Não iniciado/Em Andamento","Legendas":[4],"MelhorLanceExibicao":0.0,"Chave":15}]} 
```

# php - 使用PHP“打破”一组带有H2的列表项

> ID：11989670
> 
> 赞同：1
> 
> 时间：2012-08-16T14:41:45.383
> 
> 标签：php, html, css, wordpress, while-loop

我正在使用**WordPress**生成帖子列表。

输出的 HTML 如下所示：

```
<ul>
<!-- HERE -->
<li id="post-258" class="grid_6 convenience-stores" data-id="post-258">
    <h1><a href="/?p=258">Local Store #2</a></h1>
</li>
<li id="post-109" class="grid_6 convenience-stores" data-id="post-109">
    <h1><a href="/?p=109">Local Store #1</a></h1>
</li>    
<!-- HERE -->
<li id="post-107" class="grid_6 where-to-buy" data-id="post-107">
    <h1><a href="/?p=107">Supermarket #2</a></h1>
</li>
<li id="post-105" class="grid_6 where-to-buy" data-id="post-105">
    <h1><a href="/?p=105">Supermarket #1</a></h1>
</li>
</ul> 
```

我使用以下 PHP 代码来生成它：

```
<?php

while (have_posts()) : the_post(); 

            $category = get_the_category();
            $class = $category[0]->slug;

            ?>

                <li data-id="post-<?php the_ID(); ?>" class="grid_6 <?php echo $class; ?>" id="post-<?php the_ID(); ?>">
                    <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
                    <?php the_content(); ?>
                    <?php if (has_post_thumbnail( $post->ID ) ): ?>
                        <?php the_post_thumbnail('small');?>
                    <?php endif; ?>
                </li>

            <?php endwhile; ?> 
```

你可以看到我有 2 个不同的类别/HTML 类名称“ **where-to-buy** ”和“ **convenience-stores** ”。

现在，我想做的是在类别更改时“打破”循环。

所以，在上面的 HTML 中我标记的地方`<!-- HERE -->`，我希望我可以添加一个`<h2>`元素来表示下一组帖子的标题。

这可能吗？

如果是这样，我该如何实现？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:52:35.013

跟踪`$class`(eg. `$prevClass`) 的先前值并在循环中对此进行检查。大概记录已经`$class`整理好了？

```
<?php
$prevClass = null;
while (have_posts()):
  the_post(); 

  $category = get_the_category();
  $class = $category[0]->slug;

  if ($class != $prevClass) {
    /* echo appropriate heading / li here */
    /* It needs to be contained in an LI here in order to be valid HTML */
    echo "<li><h2>$class</h2></li>";  // Change $class to appropriate heading
  }
?>

                <li data-id="post-<?php the_ID(); ?>" class="grid_6 <?php echo $class; ?>" id="post-<?php the_ID(); ?>">
                    <h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h1>
                    <?php the_content(); ?>
                    <?php if (has_post_thumbnail( $post->ID ) ): ?>
                        <?php the_post_thumbnail('small');?>
                    <?php endif; ?>
                </li>

<?php
$prevClass = $class;
endwhile;
?> 
```

但是请注意，对于您当前的 HTML 标记，在您标记的位置简单地输出 an 是无效的`H2`- 这些将需要在`li`. 或者，关闭并打开`ul`.

拥有多个`H1`s 也不一定是一个好主意，尽管几个 wordpress 主题似乎确实遵循这种结构。如果您使用的是 HTML5 和`article`/`section`那么这可能没问题。`H2`s 在这里可能更合适。

# wpf - WPF DataGrid 排序 - 数据以可视方式排序。基础数据未排序

> ID：11989672
> 
> 赞同：1
> 
> 时间：2012-08-16T14:41:54.733
> 
> 标签：wpf, datagrid

有人可以为这个问题提供一些指导：

我有一个绑定到 DataTable 的 DataGrid。

相关 XAML 和代码：

```
<DataGrid Name="dataGrid1" IsReadOnly="True" ItemsSource="{Binding}" 
<DataGrid.Columns>
<DataGridTextColumn Header="Name" Binding="{Binding Path=Name}" />
<DataGridTextColumn Header="Path" Binding="{Binding Path=Path}" />
</DataGrid.Columns>

dataGrid1.DataContext = gridData.dt; // this is a DataTable with 3 columns. 
```

第三个 dt 列未显示在网格上。它被用作 id。

数据表按第一列排序并显示内容。用户可以通过单击名称或路径列/标题对其进行排序，并且视觉排序是/显示正常。问题是当我通过选择特定行来检查网格的数据时，DataTable 的数据仍然未排序。

我的问题是，在用户对其中一列进行排序时更新网格基础数据的最佳方法是什么？（这需要在正确的列上对 DataTable 进行排序）

这是我观察到的：

1.  在 DataGridColumnHeader 上添加 Click 事件处理程序会触发该事件。我观察到 columnHeader.SortDirection 的值（在发件人中）是当前值，而不是目标值。说给定的列排序顺序经过这些阶段是否正确：null->升序降序->升序升序降序

IE 通过知道当前状态，可以确定下一个状态。

1.  我可以在 DataGridColumnHeader 的 SortDirection 属性中放置一个触发器，以查找 Ascending/Descending/null 但是然后呢？我可以对此执行代码吗？如果是这样，你能告诉我一个代码片段吗？

我浏览过类似的帖子并尝试执行以下操作：

*   通过将我的 DataGrid 绑定到一个来试验 CollectionViewSource。作为一个实验，我捕获了列标题单击事件并强制对列进行排序。这没有用。（我的实现可能是错误的？）

*   我将 SortedMemberPath= "xx" 添加到我的 XAML 到特定的 DataGridTextColumn 条目中。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:18:24.460

使用*DataGrid.Sorting*事件：

```
public class DataGrid : MultiSelector
{
    ...

    //
    // Summary:
    //     Occurs when a column is being sorted.
    public event DataGridSortingEventHandler Sorting;

    ...
} 
```

在事件处理程序中，使用*e.Column*属性找出用于对数据进行排序的列：

```
void dataGrid1_Sorting(object sender, DataGridSortingEventArgs e)
{
    e.Column ... // TODO
} 
```

# php - PHP Regex 与预期的字符串不匹配

> ID：11989676
> 
> 赞同：0
> 
> 时间：2012-08-16T14:42:02.003
> 
> 标签：php, regex

正则表达式：

```
https?://([a-zA-Z0-9-_]{1,50}[.])*[a-zA-z0-9-_]{1,50}[.]([(org)(gov)(com)]{3}|[(us)(fi)]{2}) 
```

测试者：

```
http://regex.powertoy.org/ 
```

编码：

```
if(preg_match_all('|https?://([a-zA-Z0-9-_]{1,50}[.])*[a-zA-z0-9-_]{1,50}[.]([(org)(gov)(com)]{3}|[(us)(fi)]{2})|',$row['text'],$links))
    {
        print_r($links[0]);
        /*for($x=0;$x<count(links[0]);$x++)
        {
            $row['text'] = str_replace($links[0][$x], 'link' . $link[0][$x] . 'link', $row['text'];
        }*/
    }else{
        echo 'Failure!';
    } 
```

正则表达式匹配测试器中的 URL，但在 HTML/PHP 前端完全不匹配。我不确定问题是什么。正则表达式/代码的要点基本上是匹配 URL，而不管子域的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:45:18.310

您的正则表达式模式的修复是：

```
https?:\/\/(?:[\w-]{1,50}\.)*[\w-]{1,50}\.(?:org|gov|com|us|fi) 
```

但我建议使用：

```
https?:\/\/(?:[a-zA-Z\d]+(?:\-[a-zA-Z\d]+)*\.)+(?:org|gov|com|us|fi) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:53:52.580

您正在使用该`|`字符作为分隔符，但您也在正则表达式中使用它。

我建议使用另一个字符并使正则表达式不区分大小写以避免出现问题，例如`a-zA-z`：

```
preg_match_all('#https?://([a-zA-Z0-9-_]{1,50}[.])*[a-zA-z0-9-_]{1,50}[.]([(org)(gov)(com)]{3}|[(us)(fi)]{2})#i',$row['text'],$links) 
```

# c# - 删除表中的行时如何更新自动增量ID？

> ID：11989679
> 
> 赞同：5
> 
> 时间：2012-08-16T14:42:07.003
> 
> 标签：c#, mysql

我正在创建在 C# 中使用 MYSQL 数据库的应用程序。我想删除行并更新表中 id 的自动增量值。例如，我有两列的表：id 和站，表是站列表。像这样的东西

> id 站
> 1 pt1
> 2 pt2
> 3 pt3

如果我删除第二行，删除表后看起来像这样：

> id 站
> 1 pt1
> 3 pt3

有什么方法可以更新表的 id，对于这个例子，第三行中的 id 而不是值 3 的值为 2？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:48:20.263

我建议您在删除行时不要做任何特别的事情。是的，您的 id 会出现空白，但您为什么要在意呢？这只是一个id。

如果您更改 id_station 的值，您还需要更新所有具有 id_station 字段的表中的值。它会导致更多不必要的更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T14:50:01.563

根据定义，自动增量列不应手动更改。
如果其他一些表使用此 ID (3) 作为外键来引用该表中的该记录，会发生什么情况？该表应相应更改。
（想想看，在您的示例中很简单，但是如果您在 max(ID) 为 100000 的表中删除 ID = 2 会发生什么？主表和引用表中有多少更新？）

最后，如果您的编号有空白，则没有真正的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T16:47:11.173

更改`id`其他行中列值的唯一方法是使用 UPDATE 语句。没有内置机制来完成你想要的。

我同意这里的其他答案；通常，当删除一行时，我们不会更改`id`其他行中的列的值。通常，该 id 列是一个主键，理想情况下，该主键值是不可变的（它被分配一次并且不会改变。）如果它确实改变了，那么对它的任何引用也需要改变。（外键的 ON UPDATE CASCADE 会将更改传播到子表，对于像 InnoDB 这样支持外键但不支持 MyISAM 的存储引擎。

基本上，改变一个`id`值会导致比它解决的问题更多的问题。

没有“自动”机制可以在删除行时更改其他行中的列值。

With that said, there are times in the development cycle where I have had "static" data, and I wanted control over the id values, and I have made changes to `id` values. But this is an administrative exercise, not a function performed by an application.

# .net - 没有网络连接且 URL 不正确的相同异常

> ID：11989689
> 
> 赞同：1
> 
> 时间：2012-08-16T14:42:23.523
> 
> 标签：.net

我正在尝试在执行以下操作时捕获异常：

```
myStreamRequest = GetRequestStream() 
```

问题是当我的电脑没有正确的网络连接（它被拔掉）并且请求的 URL 不正确时，我得到了同样的错误。例外是`WebException`status: `NameResolutionFailure`，我需要区分这两个错误。我一直在试图抓住一个可能的`innerException`，但在这种情况下它不会被抛出。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:57:00.467

您可以在发出请求之前检查[网络是否存在。](https://stackoverflow.com/a/520352/540345)

```
System.Net.NetworkInformation.NetworkInterface.GetIsNetworkAvailable() 
```

# c# - 哪个 oracle 数据库版本对 C# 有用？

> ID：11989694
> 
> 赞同：-5
> 
> 时间：2012-08-16T14:42:31.747
> 
> 标签：c#

我想在 c# 中使用 Oracle 数据库。请建议一个 Oracle 版本和 Oracle-SqlManager（和下载源），我可以使用它手动创建数据库和表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:53:14.713

他们都没有。Oracle 是一个很棒的数据库平台（对于非 MS 产品），但您确实应该使用 SqlServer 或 MySql 而不是 Oracle。来自 Oracle 的 .Net 供应商一直充满了让我们的最终用户头疼的错误。

# email - Jenkins 发送电子邮件进行手动构建

> ID：11989695
> 
> 赞同：1
> 
> 时间：2012-08-16T14:42:35.107
> 
> 标签：email, jenkins

有人知道当有人手动构建时会发送电子邮件的 Jenkins 插件或脚本吗？我们目前为我们的开发环境安排了每日构建，但有时我们需要进行手动构建，我希望 Jenkins 在发生这种情况时发送一封电子邮件，以警告我们的团队正在进行构建。但我不希望 Jenkins 为日常构建发送电子邮件，因为我认为我们都同意我们收到了太多的系统电子邮件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:21:59.233

您可以使用[扩展电子邮件插件](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)在构建开始时发送电子邮件。

显然，这意味着您必须有单独的手动和日常构建工作，但这是迄今为止我能够提出的最佳解决方案。如果您使用下游作业链，您仍然可以将相同的作业链接到手动和计划构建，以便工作流保持不变，并且您不需要链中所有作业的重复。

# triggers - Apex 触发器从自定义对象更新联系人

> ID：11989698
> 
> 赞同：0
> 
> 时间：2012-08-16T14:42:41.410
> 
> 标签：triggers, salesforce, apex-code

长话短说，我需要更新标准联系人中的自定义字段，该字段在更新不同的、不相关的自定义对象后触发。我试图编写一个触发器，将字段值从我的自定义对象传递给联系人，但我不断收到各种错误 - 其中最近的一个让我感到难过。最终目标是`Passing__c`从`Passing_Field__c`.

我在线`unexpected Token: "("`上遇到错误`for(Contact C:`。从字面上看，它是如此简单，我无法弄清楚。

下面是我的代码。我已经简化了命名约定以尝试使其更具相关性。任何帮助表示赞赏。我对 Apex 和 Triggers 还很陌生，而且我已经在这里工作了几个小时，希望一些建议可以让我回到“本垒板”。

```
trigger ContactUpdater on Custom_Object_Name__c (after update) {

     List<Contact> updatedContacts = new List<Contact>();
     Set<Id> ObjectIds = new Set<Id>();
     Set<String> ObjectCont = new Set<String>();
     Set<Boolean> ObjectActive = new Set<Boolean>();
     Set<String> ObjectPass = new Set<String>(); 

     for(Custom_Object_Name__c p : trigger.new)
        {
            If(p.Active__c == true){ 
              ObjectIds.add(p.Id);
              ObjectCont.add(p.Contact__c);
              ObjectActive.add(p.Active__c);
              ObjectPass.add(p.Passing_Field__c);
              }

        try{ for(Contact c : [SELECT Id, Passing__c FROM Contact WHERE (AccountId IN (Select Account__c from  Custom_Object_Name__c )) AND ObjectActive = true])
              {
                 set(c.Passing__c = p.Passing_Field__c);
                 c.FieldToUpdate = c.Passing__c;
                 updatedContacts.add(c);
              }
             update updatedContacts; 

           }

            catch(exception e){
               throw e;
              }
        }
} 
```

*注意：Active__c 是一个复选框。Passing__c 和 Passing_Field__c 都是文本框。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:56:08.563

我相信问题出在 SOQL 查询的 WHERE 子句中：

```
WHERE (AccountId = (Select Account__c from Custom_Object_Name__c )) 
```

Salesforce 期望您与`AccountId`某种 Id 进行比较，而不是与某些子查询的结果进行比较。您可能想尝试以下方法：

```
WHERE (AccountId in (Select Account__c from  Custom_Object_Name__c)) 
```

# resharper - 从 resharper 添加字符串文字

> ID：11989702
> 
> 赞同：0
> 
> 时间：2012-08-16T14:42:54.310
> 
> 标签：resharper

在以下示例中，我将如何`"UIIconUpBrush"`使用 resharper 7 转换为字符串常量。

```
borderMain.SetResourceReference(Border.BorderBrushProperty, "UIIconUpBrush"); 
```

使用 coderush 很容易，但我在 resharper 中看不到简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:53:06.633

*   选择整个字符串（例如通过双击，或使用`Ctrl`+ `W`（可能重复））
*   选择`Introduce Field...`（使用其直接快捷方式（通常为`Ctrl`+ `R`、`Ctrl`+ `F`），或从弹出的 Refactor This menu（通常为`Ctrl`++ `Shift`）`R`，或 from `ReSharper | Refactor`）
*   在`Introduce Field`对话框中，选择`Introduce Constant`单选按钮（并对默认值进行任何更改）
*   选择`Next`

你完成了。

# java - 如何在java中存储键值和分隔符

> ID：11989704
> 
> 赞同：-5
> 
> 时间：2012-08-16T14:42:54.857
> 
> 标签：java

对于规则

```
a==b&c>=d|e<=f&!x==y 
```

我想使用 &,|,& 来拆分规则！operator andt 还想存储运算符。

所以我想存储：

```
a==b
&
c>=d
|
e<=f
&!
x==y 
```

我还应该将其存储在字符串数组中吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:37:32.337

它可以在单行中实现，但它会涉及一个相当复杂的正则表达式，同时使用前瞻和后瞻。

```
str.split("(?<=&!?|\\|)|(?=&!?|\\|)"); 
```

那么这个正则表达式有什么作用呢？

正则表达式`&!?|\|`根据您的规则定义什么是有效运算符。它基本上读作“和`&`-sign 可选地后跟`!`-sign，或`|`-sign”。

其他部分是正则表达式构造lookahead 和lookbehind，即所谓的“零宽度断言”。 `(?=a)`是一个向前看，它向前看并确保下一个字符是“a”。例如，它匹配在“foobar”中的“b”和“a”之间开始和结束的零长度字符串。

因此，使用给定的正则表达式参数，我提出的 split 方法调用基本上可以：

在输入字符串中紧接在 a `&`、 a`&!`或`|`符号之前或之后的每个位置拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:55:47.557

这个正则表达式做你想要的..

```
 final String input = "a==b&c>=d|e<=f&!x==y";

    //this regex will yield pairs of one string followed by operator (&, | or &!)...
    final String mainRegex = "(.*?)(&!|&|\\|)";

    final Matcher matcher = Pattern.compile(mainRegex).matcher(input);

    while (matcher.find()) {
        System.out.println(matcher.group(1));
        System.out.println(matcher.group(2));
    }

    //...so we will need another regex to fetch what comes after the last operator
    final String lastOne = "(.*)(&|\\||!)(.*)";
    final Matcher lastOneMatcher = Pattern.compile(lastOne).matcher(input);

    if (lastOneMatcher.find()) {
        System.out.println(lastOneMatcher.group(3));
    } 
```

结果是：

```
 a==b
    &
    c>=d
    |
    e<=f
    &!
    x==y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:37:29.810

试试这个方法

```
String data = "a==b&c>=d|e<=f&!x==y";

Pattern p = Pattern.compile(
        "&!"+  // &! 
        "|" +  // OR 
        "&" +  // & 
        "|" +  // OR
        "\\|"  // since | in regex is OR we need to use to backslashes 
               // before it -> \\| to turn off its special meaning
        );
StringBuffer sb = new StringBuffer();
Matcher m = p.matcher(data);
while(m.find()){
    m.appendReplacement(sb, "\n"+m.group()+"\n");
}
m.appendTail(sb);
System.out.println(sb); 
```

输出

```
a==b
&
c>=d
|
e<=f
&!
x==y 
```

# ruby - ruby db 结果集为哈希中的数组

> ID：11989707
> 
> 赞同：2
> 
> 时间：2012-08-16T14:42:59.610
> 
> 标签：ruby, database, hash

我有一个 db 查询，它返回如下结果：

```
db_result.each {|row| puts row}
{"IP"=>"1.2.3.4","Field1"=>"abc","Field2"=>"123"}
{"IP"=>"1.2.3.4","Field1"=>"abc","Field2"=>"234"}
{"IP"=>"1.2.3.4","Field1"=>"bcd","Field2"=>"345"}
{"IP"=>"3.4.5.6","Field1"=>"bcd","Field2"=>"456"}
{"IP"=>"3.4.5.6","Field1"=>"bcd","Field2"=>"567"} 
```

并希望将其放入哈希中，例如：

```
{
  "1.2.3.4" => {
    "abc" => ["123", "234"],
    "bcd" => "345"
  },
  "3.4.5.6" => {
    "bcd" => ["456", "567"]
  }
} 
```

我目前正在做的是：

```
result_hash = Hash.new { |h, k| h[k] = {} }
db_result.each do |row|
  result_hash[row["IP"]] = Hash.new { |h, k| h[k] = [] } unless result_hash.has_key? row["IP"]
  result_hash[row["IP"]][row["Field1"]] <<  row["Field2"]
end 
```

哪个有效，但是想知道是否有更整洁的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:02:01.150

我同意迈克尔的观点，你的方法没有任何问题。代码背后的意图很容易看出。

如果你想变得花哨，这里有一个（许多）方法：

```
x = [
  {"IP"=>"1.2.3.4","Field1"=>"abc","Field2"=>"123"},
  {"IP"=>"1.2.3.4","Field1"=>"abc","Field2"=>"234"},
  {"IP"=>"1.2.3.4","Field1"=>"bcd","Field2"=>"345"},
  {"IP"=>"3.4.5.6","Field1"=>"bcd","Field2"=>"456"},
  {"IP"=>"3.4.5.6","Field1"=>"bcd","Field2"=>"567"}
]

y = x.inject({}) do |result, row|
  new_row = result[row["IP"]] ||= {}
  (new_row[row["Field1"]] ||= []) << row["Field2"]

  result
end 
```

我认为这应该产生与您的方法相同的时间复杂度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:09:39.917

将此视为同行评审。作为处理和维护的建议...

我建议您希望数据结构更加一致。

代替：

```
{
  "1.2.3.4" => {
    "abc" => ["123", "234"],
    "bcd" => "345"
  },
  "3.4.5.6" => {
    "bcd" => ["456", "567"]
  }
} 
```

我建议：

```
{
  "1.2.3.4" => {
    "abc" => ["123", "234"],
    "bcd" => ["345"]
  },
  "3.4.5.6" => {
    "abc" => [],
    "bcd" => ["456", "567"]
  }
} 
```

在每个子哈希中保持相同的键，并使值全部为数组。处理整个散列的代码将更加直接和易于理解。

# javascript - 为什么这不起作用？我认为这是一个转换问题

> ID：11989709
> 
> 赞同：2
> 
> 时间：2012-08-16T14:43:00.307
> 
> 标签：javascript, html

我是一个脚本新手，在 Codecademy 做了一段时间的 JavaScript 练习，我有机会在工作中通过构建一个非常简单的应用程序（HTML 和 JavaScript）来挑战自己，该应用程序允许某人计算他们的卡路里数量可以每天食用，同时满足他们的减肥目标。

我已经差不多了。我有一个工作版本（感谢一些帮助），在表格中要求人们以英寸为单位给出他们的身高。我想做的最后一个更改是增加他们以标准格式（英尺和英寸）输入身高并让应用程序将其转换为等式的功能。这就是麻烦开始的地方。我添加了第二个字段并重命名了创建转换所需的变量，但发生的事情很奇怪。

当在“英尺”字段中输入某些内容时，它会正确计算，但如果您还在表单的“英寸”字段中添加一些内容，它返回的结果是应有的 4 倍以上。

我尝试将转换下移到性别功能中，但没有任何区别。我没有更改以前工作的代码的任何其他内容，所以我认为问题必须在英寸变量或英寸表单元素或它们组合的高度变量中。后者在我看来最有可能，但我似乎找不到问题所在。

对于那些知道自己在做什么的人来说，这可能是显而易见的，如果你能花几秒钟的时间，你将帮助某人制作他们生活中的第一个现实世界使用的应用程序。

旁注：当我在浏览器（Chrome）中打开它时，第一次填写时，答案会闪烁并消失。之后，每次它都会在屏幕上正确显示答案。我不确定这是我犯的错误还是浏览器问题或什么。

```
<html>
<head>
<title>Daily Calorie Max</title>

</head>
<body>

<script type="text/javascript" language="javascript">

function Calculate() {

    var gender = document.getElementById("gender").value;
    var weight = document.getElementById("weight").value;
    var inches = document.getElementById("inches").value;
    var height = (document.getElementById("feet").value * 12) + inches;
    var age = document.getElementById("age").value;
    var goal = document.getElementById("goal").value;

    if(gender=="male") 
        {
            val1 = 6.23 * weight;
            val2 = 12.7 * height;
            val3 = 6.8 * age;
            dailyDeficit = (goal * 3500) / 90;

            result = 66 + val1 + val2 - val3;

            cals = result * 1.55;
            calMax = cals - dailyDeficit;

        }
    else if (gender=="female")
        {
            val1 = 6.23 * weight;
            val2 = 4.7 * height;
            val3 = 4.7 * age;
            dailyDeficit = (goal * 3500) / 90;

            result = 655 + val1 + val2 - val3;

            cals = result * 1.55;
            calMax = cals - dailyDeficit;
        }

document.getElementById("answer").textContent = 'Your Daily Calorie Max is: ' + calMax.toFixed(0); 

}

</script>

<form action="#">
    Gender  : <select id="gender"><option value="male">Male</option><option value="female">Female</option></select><br />
    Weight  : <input type="text" id="weight" />lbs.<br />
    Height  : <input type="text" id="feet" />ft. <input type="text" id="inches" />in.<br />
    Age     : <input type="text" id="age" /><br />
    Goal    : <select id="goal"><option value=5>Lose 5 Pounds</option><option value=10>Lose 10 Pounds</option><option value=15>Lose 15 Pounds</option><option value=20>Lose 20 Pounds</option><option value=25>Lose 25 Pounds</option></select><br />

    </fieldset>
    <input type="submit" value="Give me my Daily Calorie Max!" onclick="Calculate()" />
</form>
<div id="answer"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:45:20.397

问题在这里：

```
var inches = document.getElementById("inches").value;
var height = (document.getElementById("feet").value * 12) + inches; 
```

您最终将 for 的计算结果`feet`与字符串 for连接起来`inches`（这里发生了几种类型强制 - 从`feet`元素的值到用于乘法的整数，然后从生成的整数到用于与字符串连接的`inches`字符串）。

您应该为这些使用正确的类型：

```
var inches = parseInt(document.getElementById("inches").value, 10);
var height = (parseInt(document.getElementById("feet").value, 10) * 12) + inches; 
```

我还建议使用`parseFloat`浮点类型。

这是JavaScript中*[类型强制的结果。](http://www.java2s.com/Tutorial/JavaScript/0040__Operators/ArithmeticOperators.htm)*

该`+`运算符可用于将两个数字相加，但它也会连接字符串（即使这些字符串仅包含数字值）。如果你尝试`+`一个字符串和一个数字，你会得到一个字符串。

例如...

```
var resultOfAdd = 34 + 12; // resultOfAdd equals 46
var resultOfAdd = "34" + "12"; // resultOfAdd equals  "3412" ("34" and "12" are strings)
var resultOfAdd = "34" + 12; // resultOfAdd equals "3412" (12 gets coerced into a string)
var resultOfAdd = parseInt("34") + 12; // resultOfAdd equals 46! 
```

理解JavaScript中包含数字（例如`"42"`）和数字（例如 ）的字符串之间的区别非常重要。`42`他们是两个不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:54:55.353

你得到的 value() 是一个字符串，你应该使用 parseInt()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:50:51.893

我一直在[JSFiddle](http://jsfiddle.net/35BFU/)上玩你的代码，但无法改变它。我根据需要使用了 parseInt() 并将`submit`按钮更改为常规按钮。我要注意的一个主要变化是我使用`innerHTML`了`textContent`. 我相信这是写信的正确形式`<div>`。

我仍然无法让您的代码吐出答案。试一试，看看我是否误解了你的代码。

PS 请将您的代码保存在正文中`<head>`而不是正文中。

# objective-c - 将点坐标转换为新的坐标系

> ID：11989713
> 
> 赞同：0
> 
> 时间：2012-08-16T14:43:08.967
> 
> 标签：objective-c, ios, ios5

假设我有一个坐标为 (50,100) 的点，其中 (0,0) 位于视图的左上角。

如果我希望坐标系的开头是屏幕的中心（即宽度/2，高度/2），如何获得同一点的坐标？

请注意，我正在实现一个自定义视图，并且我正在其中进行绘图，我只想在同一个视图内转换坐标。我基本上是在实现一个图形计算器，我需要让我的坐标系从屏幕中间开始，这样图形才能看起来更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T16:43:39.110

我注意到您将其标记为 iOS 问题，因此请使用 Apple 在 UIView 中内置的方法：

`(CGPoint)convertPoint:(CGPoint)point fromView:(UIView *)view`

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-16T16:40:08.843

找到您将使用的中点，因此对于 100x100 屏幕，这将是 (50,50)。然后取你需要转换的点，从点X值中减去中点X值，再从中点Y值中减去点Y值。请注意，您没有对两个值执行相同的操作。

因此，如果该点是 (30,25)，则新点将是 (-20,25)，因为 30 - 50 = -20 和 50 - 25 = 25。

# java - JPA 外键 - id 或参考

> ID：11989714
> 
> 赞同：0
> 
> 时间：2012-08-16T14:43:10.840
> 
> 标签：java, postgresql, jpa, playframework-2.0, ebean

我有两个课程：`Forum`和`Topic`。
我之前告诉过我应该有论坛属性（在主题中），如下所示：

> @ManyToOne
> @JoinColumn(name = "forum")
> 受保护的论坛论坛；

而不是只保留论坛的ID。
我看到在 postgresql 中，论坛属性保存为“bigint”（论坛 id），那么持有论坛参考有什么意义呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:45:34.560

> 无论如何，举行论坛参考有什么意义？

这样您就可以`forum`以更“面向对象”的方式将字段视为类的真实字段，而不必关心数据库对对象图的表示。这是使用像 JPA/Hibernate 这样的 ORM 的一大胜利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:59:44.893

这正是您使用对象关系映射 (ORM) 解决方案（此处为 JPA）的原因。问题是：您不能真正将引用放入数据库中，但在您的代码中，引用比普通 id 好得多。JPA 为您执行此操作。您可以创建一个主题，将其论坛属性设置为论坛对象，JPA 负责插入数据库（您不必获取论坛的 id 属性，然后使用 sql 语句手动插入） .

考虑一下：

```
Forum f1 = new Forum();
Topic t1 = new Topic();
t1.forum = f1;
t1.forum.someMethod(); 
```

您可以简单地从主题向后导航到论坛，并调用论坛的方法。这个参考比在那里有一个 id 更好：

```
t1.forumId = f1.id;
//to navigate back without having f1 in your scope:
Forum f2 = entityManager.find(Forum.class, t1.forumId);
f2.someMethod(); 
```

在这里，您必须找到与该主题相关的论坛，因为您只有一个 ID。更糟糕。

**简单地说：您可以在您的 java 代码中轻松地向后导航（从主题到论坛），因此您的主题类中有一个引用，但这只能在 sql 中表示为外键。**

ps：更准确地说JPA是一个接口，您使用的实现（例如Hibernate，EclipseLink）是完成工作的ORM解决方案。

# string - 在bash中提取多个子字符串

> ID：11989716
> 
> 赞同：0
> 
> 时间：2012-08-16T14:43:13.383
> 
> 标签：string, bash, shell, sed

我有一个从 wiki 导出的页面，我想使用 bash 找到该页面上的所有链接。该页面上的所有链接都在表单中`[wiki:<page_name>]`。我有一个脚本：

```
...
# First search for the links to the pages                                                                                                                                    
search=`grep '\[wiki:' pages/*`

# Check is our search turned up anything                                                                                                                                     
if [ -n "$search" ]; then
    # Now, we want to cut out the page name and find unique listings                                                                                                         
    uniquePages=`echo "$search" | cut -d'[' -f 2 | cut -d']' -f 1 | cut -d':' -f2 | cut -d' ' -f 1 | sort -u`
.... 
```

但是，当出现一个包含多个`[wiki:`文本的 grep 结果时，它只会拉出最后一个而不是其他任何一个。例如，如果`$search`是：

> 在开始配置之前，必须安装所有必需的库才能被 Cmake 检测到。如果您错过了这一步，请参阅 [wiki:CT/Checklist/Libraries"Libr 通过按 [t] 您可以切换到具有更多详细信息的高级模式屏幕。这 5 个页面可用 [wiki:CT/Checklist/Cmake/advanced_mode此处]。要获取有关 ea 的信息 - '''安装 Cantera'''：如果尚未正确安装 Cantera 或者您没有获取安装文件 '''~/setup_cantera'''，您应该会收到以下信息消息。请参阅 [wiki:CT/FormulationCantera “Cantera 安装”] 页面来解决此问题。如果您计划使用内置传输、热力学和化学，您可以将 Cantera 选项设置为关闭。

然后它只会返回`CT/FormulationCantera`并且不会给我任何其他链接。我知道这是由于使用`cut`，所以我需要更换`$uniquepages`线路。

有人对bash有任何建议吗？如果需要，它可以使用 sed 或 perl，但如果可能的话，我希望单行来提取页面名称列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:47:40.743

```
egrep -o '\[wiki:[^]]*]' pages/* | sed 's/\[wiki://;s/]//' | sort -u 
```

更新。在没有空格的情况下删除所有内容`cut`

```
egrep -o '\[wiki:[^]]*]' pages/* | sed 's/\[wiki://;s/]//;s/ .*//' | sort -u 
```

# .net - mock 上的所有调用都必须有相应的设置

> ID：11989717
> 
> 赞同：7
> 
> 时间：2012-08-16T14:43:14.817
> 
> 标签：.net, unit-testing, mocking, moq, mstest

我有一些想要进行单元测试的遗留代码。我创建了第一个起订量测试，但出现以下异常：

> Moq.MockException:IConnection.SendRequest(ADF.Messaging.Contract.ConfigServer.GetDataVersionRequest) 调用失败，模拟行为严格。模拟上的所有调用都必须具有相应的设置。

重要的代码片段：

类属性：

```
Public Property Connection() As IConnection
    Get
        Return _connection
    End Get
    Set(ByVal value As IConnection)
        _connection = value
    End Set
End Property 
```

应该测试的方法： (_connection) 实际上是一个创建 tcp 套接字的类，我想模拟该属性，以便 SendRequest 返回我想要的。

```
Public Function GetVersion(ByVal appID As Contract.ApplicationID) As Contract.DataVersion
    EnsureConnected()
    Dim req As GetDataVersionRequest = New GetDataVersionRequest(appID)

    Dim reply As CentralServiceReply = _connection.SendRequest(req) //code I want to mock
    Utils.Check.Ensure(TypeOf reply Is GetDataVersionReply, String.Format("Unexpected type: {0}, expected GetDataVersionReply!", reply.GetType()))

    Dim version As Contract.DataVersion = CType(reply, GetDataVersionReply).Version
    version.UpgradeOwners()
    If (Not version.IsSupported) Then
        Return Contract.DataVersion.UNSUPPORTED
    End If

    Return version
End Function 
```

测试方法：

```
[TestMethod]
public void TestMethod2()
{
    Contract.CentralServiceRequest req = new Contract.ConfigServer.GetDataVersionRequest(new ApplicationID("AMS", "QA"));

    DataVersion v = new DataVersion();
    v.AppVersion = "16";
    CentralServiceReply reply = new GetDataVersionReply(v);

    var ConnectionMock = new Mock<IConnection>(MockBehavior.Strict);
    ConnectionMock.Setup(f => f.SendRequest(req)).Returns(reply);

    var proxy = new ConfigServerProxy(new ApplicationID("AMS", "QA"), "ws23545", 8001);
    proxy.Connection = ConnectionMock.Object; //assign mock object

    DataVersion v2 = proxy.GetVersion(new ApplicationID("AMS", "QA"));
    Assert.AreEqual(v.AppVersion, v2.AppVersion);
} 
```

当我调试单元测试时，我看到当 proxy.GetVersion 在 _connection.SendRequest 行上执行时，我们得到了错误。此外，当我在监视窗口中查看变量 (_connection) 时，我看到它是 moq 对象。所以我想财产分配进展顺利。

有人看到我哪里出错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T14:56:59.890

我想问题出在以下几点：

```
Contract.CentralServiceRequest req = new Contract.ConfigServer.GetDataVersionRequest(new ApplicationID("AMS", "QA")); 
```

代理调用获取应用程序版本，但不使用相同的请求对象（它可能会创建另一个具有相同参数的对象）。由于它是不同的对象并且模拟设置为期望相同，因此它失败了。

合理的解决方案是期待**任何**类型为 CentralServiceRequest 的请求。我不太熟悉起订量，但我想是这样的：

```
ConnectionMock.Setup(f => f.SendRequest(ItExpr.IsAny<Contract.CentralServiceRequest>())).Returns(reply); 
```

希望这可以帮助。

# c++ - OpenCV C++：Floodfill

> ID：11989722
> 
> 赞同：2
> 
> 时间：2012-08-16T14:43:28.710
> 
> 标签：c++, opencv

我得到了这张图片，我想用白色填充左上角的黑色区域，但我得到的只是一张全白的图片……知道我的代码有什么问题吗？

**代码：**

```
...
cv::Rect rect;
roi = cv::floodFill(roi, cv::Point(1,1), cv::Scalar(0), &rect, cv::Scalar(0), cv::Scalar(0), 4);
... 
```

**输入图像：**
![在此处输入图像描述](../Images/2c1d5953553494efd9db283933bcab38.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T17:49:03.437

这是我使用以下代码获得的图像：

```
int main()    
{
    cv::Mat image = cv::imread("TF2XE.jpg", -1);    
    cv::imshow("image before filling", image);    
    int filling = cv::floodFill(image, cv::Point(0,0), 255, (cv::Rect*)0, cv::Scalar(), 200);   
    cv::imshow("image after filling", image);    
    cv::waitKey();    
    return 0;    
} 
```

[![输出图像](../Images/cfedea7eb886150d9e23300f694adf93.png)](https://i.stack.imgur.com/jajVM.jpg)

请注意，我使用 200 作为 upDiff 参数，因为如果将其设置为 0，则连接组件内部将不会考虑一些灰色像素，如果这确实是您想要的，请更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:55:35.483

不确定，但根据我能够挖掘的[文档](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html)，它说`cv::floodFill()`返回一个`int`. 因此，假设这`roi`是一个矩阵并且 openCV 矩阵类定义`operator=`了`int`参数，您可以为`int`矩阵的每个元素分配一些。

# c# - 获取设置为 Auto 的 Grid 的实际宽度

> ID：11989724
> 
> 赞同：1
> 
> 时间：2012-08-16T14:43:32.563
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在使用 Windows 8 发布预览版和 C#(VS 2012) 开发 Metro 应用程序，有没有办法获得`Grid`设置为的宽度`Auto`， **简介**：我在其中包含`StackPanel`行数和列数（行和列正在动态生成）。我需要知道实际宽度，我试过了`Grid``n``n``Grid``StackPanel`

```
 1)var Actualwidth = grid.ActualWidth;            
 2)var Minwidth = grid.MinWidth;
 3)var width = grid.Width;
 4)var Renderwidth = grid.RenderSize.Width; 
```

结果如下

```
1 = 0.0
2 = 0.0
3 = NaN
4 = 0.0 
```

有什么方法可以得到实际宽度，请帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:59:35.020

`ActualWidth`直到控制测量和布置后才设置。尝试处理`OnLoaded`事件并在那里获取宽度。有关wpf 的解释，请参见[此处（与 winrt 的解释相同）。](https://stackoverflow.com/questions/1695101/why-are-actualwidth-and-actualheight-0-0-in-this-case)对于 Windows 8 api，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.actualwidth)：

> 出于 ElementName 绑定的目的，ActualWidth 在更改时不会发布更新（由于其异步和运行时计算的性质）。不要尝试将 ActualWidth 用作 ElementName 绑定的绑定源。如果您有需要基于 ActualWidth 进行更新的方案，请使用 SizeChanged 处理程序。

# asp.net-mvc-3 - 如何从 ViewBag 数据源仅向 DropDownList 添加一个特定项目？

> ID：11989726
> 
> 赞同：0
> 
> 时间：2012-08-16T14:43:36.387
> 
> 标签：asp.net-mvc-3

我正在尝试修复现有应用程序中的错误，而我的 MVC ViewBag 技能有限。首先，我没有时间重构并将代码从 ViewBag 更改为 ViewModel，尽管那将是我的首选方法。

我想从 ViewBag 中的对象填充 DropDownList。代码在这里：

```
if(Model != null && Model.WarehouseId != null && !Model.WarehouseId.Equals(String.Empty))                
{
    @Html.DropDownListFor(m => m.WarehouseId, (IEnumerable<SelectListItem>)ViewBag.WarehouseCodes)<br /> //<---
}
else
{
    @Html.DropDownListFor(m => m.WarehouseId, (IEnumerable<SelectListItem>)ViewBag.WarehouseCodes, "")<br /> 
} 
```

在 WarehouseID 不是 String.Empty 的情况下，我只想将该值加载到 DropDownList 中。我对这个问题的 C# 或 jQuery 答案持开放态度。

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:49:08.687

> 而且我的 MVC ViewBag 技能有限

如果您忘记了这些技能，那对您来说会更好。开个玩笑，它们可能有助于了解在 ASP.NET MVC 应用程序中**不应该做什么 :-)**

反正：

```
if (Model != null && Model.WarehouseId != null && !Model.WarehouseId.Equals(String.Empty))                
{
    @Html.DropDownListFor(
        m => m.WarehouseId, 
        ((IEnumerable<SelectListItem>)ViewBag.WarehouseCodes).Where(x => x.Value == Model.WarehouseId.Value)
    )
    <br />
}
else
{
    @Html.DropDownListFor(
        m => m.WarehouseId, 
        (IEnumerable<SelectListItem>)ViewBag.WarehouseCodes, 
        ""
    )
    <br /> 
} 
```

另一种方法是在您的控制器操作中处理这种情况：

```
public ActionResult Index()
{
    SomeModel model = ...
    IEnumerable<SelectItem> warehouseCodes = ...
    ViewBag.HasValue = false;
    if (model != null && model.WarehouseId != null && !string.IsNullOrEmpty(Model.WarehouseId.Value))
    {
        warehouseCodes = warehouseCodes.Where(x => x.Value == model.WarehouseId.Value);
        ViewBag.HasValue = true;
    }
    ViewBag.WarehouseCodes = warehouseCodes;
    return View(model);
} 
```

在您看来，您现在可以将其替换为`if`：

```
@Html.DropDownListFor(
    m => m.WarehouseId, 
    (IEnumerable<SelectListItem>)ViewBag.WarehouseCodes, 
    ViewBag.HasValue ? (string)null : ""
) 
```

# jquery - 使用 javascript 或 jquery 的 AudioBoo 日期格式

> ID：11989731
> 
> 赞同：0
> 
> 时间：2012-08-16T14:43:52.840
> 
> 标签：jquery, datetime, date-formatting

我已经从`AudioBoo`API 中提取数据。每个重新编码都有一个记录/提交的时间，但它是这种格式......

`2012-04-11T09:57:38Z`

有什么方法可以将其转换为类似

`11th April 2012`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:50:57.867

最好使用***[datajs](http://www.datejs.com/)***。这是***[doco](http://code.google.com/p/datejs/wiki/APIDocumentation)***和***[格式说明符](http://code.google.com/p/datejs/wiki/FormatSpecifiers)***。

```
var x = new Date('2012-04-11T09:57:38Z'),
    result = x.toString('ddS MMMM yyyy');

alert( result ); 
```

**[演示](http://jsfiddle.net/VHCUJ/)**

# c++ - 方法来唯一标识代码中的方法调用，以测试调用序列是否不变

> ID：11989734
> 
> 赞同：1
> 
> 时间：2012-08-16T14:44:11.043
> 
> 标签：c++

我们正在开发一种新的中断系统（在 c++ 中），以取代旧的不一致的系统。

它是这样工作的：

1.  想要使他的方法可中断的程序员接受一个`BreakFlag`对象作为该方法的参数。

2.  在方法过程中，程序员会检查`break_flag.is_set()`，如果是，则退出并整理。

`break_flag.is_set()`在对程序进行一些更改后，我们希望能够测试所有原始调用保持相同的顺序。（我们把同一个循环中的多次调用算作一次调用，这样大小不同的两个操作看起来是一样的）

我们的第一种方法是使用调用堆栈来识别每个实例。例如在代码中：

```
void A(BreakFlag& flag) {
  flag.is_set();
  B(flag);
  C(flag);
}

void B(BreakFlag& flag) {
  flag.is_set();
  C(flag);
}

void C(BreakFlag& flag) {
  flag.is_set();
} 
```

我们将在每次调用时查看调用堆栈`is_set`，并为此方法生成以下序列：

```
A
A, B
A, B, C
A, C 
```

然后我们可以使用它来检查每次我们测试程序时是否发生了这个检查序列，这样就不会有人来做这个：

无效 A(BreakFlag& 标志) { flag.is_set(); B（旗帜）；C（标志）；}

```
void B(BreakFlag& flag) {
  flag.is_set();
  //C(flag); // I HAVE COMMENTED THIS OUT BECAUSE I DONT LIKE FLAG!
}

void C(BreakFlag& flag) {
  flag.is_set();
} 
```

因为它会导致序列：

```
A
A, B
A, C 
```

这与我们原来的不符。

我们遇到的问题是，编译器有时会以调用堆栈更改的方式进行优化，这会导致我们建议的系统注册一个错误的失败测试，​​因为调用堆栈不是它所期望的，即使它是正确的。

我们可以通过执行类似于以下的操作来解决它：

```
#define CHECK_FLAG(x) actually_check_flag(__LINE__,__FILE__,x) 
```

这将允许我们在代码中识别每个实例。

除此之外，我们想不出任何方法来识别每个调用`.is_set`不会在优化代码中改变，你可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:52:56.250

您可以使用 RAII 手动维护调用堆栈。在进入每个函数时构造一个保护对象：

```
void B(BreakFlag& flag) {
    BreakFlagStackGuard guard(flag, "B");
    flag.is_set();
    C(flag);
} 
```

的构造`BreakFlagStackGuard`函数将函数名`"B"`推送到 a 上`flag.stack`，而析构函数`~BreakFlagStackGuard()`（将在`B`返回时调用）弹出它。

无论编译器做什么来优化它都需要尊重你的保护对象，这样你就可以保证观察到的调用堆栈反映了源代码。

# jquery - 如何为模块中的每个控制器加载默认模板（Zend）

> ID：11989735
> 
> 赞同：0
> 
> 时间：2012-08-16T14:44:11.820
> 
> 标签：jquery, zend-framework

我有一个带有两个不同模块（管理员和非管理员）的 Zend 应用程序布局是这样的：

```
app
|-- Bootstrap.php
|-- settings
|   `-- application.ini
`-- modules
   |-- adm
   |   |-- controllers
   |   `-- views
   |       `-- scripts
   |           `--index
   |-- nonadm
   |   |-- controllers    
   |   `-- views
   |       `-- scripts
   |            `--index
    `-- default
        `-- views
            `-- scripts
                |-- index
                `-- layout.phtml 
```

每个请求，无论是来自 adm 还是 nonadmn，都会在 layout.phtml 中呈现

因此，在进入管理模块的那一刻，会显示一堆 jquery 选项卡，这些选项卡是从管理模块的索引视图脚本文件夹中的 index.phtml 文件加载的，要访问其他选项卡，您需要先转到索引，然后点击那里的标签。

每个选项卡最初都是从 adm 索引控制器填充的。这意味着您可以直接从 offfest 转到选项卡。

我想更改设置以使这成为可能。

因此，如果我要转到 adm/somecontroller/indexaction，我将被定向到正确的选项卡，并且只会加载该选项卡的内容。

所以我知道我需要其中包含空选项卡的视图脚本，无论使用什么管理控制器，它都应该被渲染。控制器将填充我正在访问的选项卡，随后单击其他选项卡将导致 ajax 加载来自不同控制器的该选项卡的内容。

无论使用什么控制器，我如何始终加载此选项卡 phtml 文件？

以及如何将其自动加载到 layout.phtml 脚本中？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T15:28:11.623

您可以创建一个包含这些选项卡的布局，并让所有控制器/操作都使用此布局，这样无论如何，选项卡都会被渲染，然后内容会加载到正确的位置。

# java - 在树重新排序期间保存 GXT 树中的根节点数

> ID：11989738
> 
> 赞同：0
> 
> 时间：2012-08-16T14:44:26.970
> 
> 标签：java, gxt

GXT 的使用版本是 3.0.0

如何防止在根级别删除任何节点？在我的树中，我有 3 个根节点，我允许在内部重新排序，但我必须只保留 3 个节点作为根。反馈设置为 BOTH(insert+append) 并且可以放入叶子节点。

问候，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:39:10.803

答案，我发现是以适当的方式重载 TreeDropTarget 类的 handleInsert 或 handleAppend 方法。

# apache-flex - 按 mx DataGrid 上的两列排序

> ID：11989741
> 
> 赞同：0
> 
> 时间：2012-08-16T14:44:34.310
> 
> 标签：apache-flex, collections, datagrid

我有一个 DataGrid，我想对其应用两种类型。目前共有三栏。

姓名 | 类型 | 日期

当用户单击标题类型列时，它也按名称正确排序。键入 > 名称。

如果他们单击名称标题，我希望它正常排序（不是两列）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:11:57.183

在 DataGridColumn 上使用[sortCompareFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/dataGridClasses/DataGridColumn.html#sortCompareFunction)。

# django - Django：使用原始查询来限制 ModelForm 中的外键选择字段

> ID：11989742
> 
> 赞同：3
> 
> 时间：2012-08-16T14:44:39.153
> 
> 标签：django, forms, foreign-keys, choicefield

以经典的 foo bar 为例：

在`models.py`：

```
Class Foo(models.Model):
    name = models.CharField(max_length= 200)

Class Bar(models.Model):
    name = models.CharField(max_length= 200)
    foo = models.ForeignKey('Foo') 
```

在我的表单中，我试图将我的选择限制`foreignkey`为使用原始查询`Foo`的子集。`Foo`

在`forms.py`：

```
class BarForm(ModelForm):
    search_field = CharField(max_length=100, required=False)

    def __init__(self,*args,**kwargs):
        search_str = kwargs.pop('search_str', None)
        super(BarForm,self ).__init__(*args,**kwargs)
        self.fields['search_field'].initial = search_str
        self.fields['foo'].queryset = Bar.objects.raw("""
select f.id as id, f.name as name from bar_lookup(%s)""", [search_str])

    class Meta:
        model = Bar
        exclude = ('foo',) 
```

`bar_lookup(%s)`是一个返回表的 DB 过程。它搜索多个关系并以优化的方式处理结果的过滤和排序。它可以工作，我宁愿不必在 Django 代码中再次对其进行编码。

我收到以下错误：`"'RawQuerySet' object has no attribute 'all'"`。如果我使用普通格式，则该表单有效`Bar.objects.filter()`。

我应该如何将我的`RawQuerySet`变成一个正常的`QuerySet`？我应该使用该`self.fields['line_stop'].choice`选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:03:31.710

我遇到了类似的问题，并提出了这个棘手的解决方案：

```
class BarForm(ModelForm):
    search_field = CharField(max_length=100, required=False)

    def __init__(self,*args,**kwargs):
        search_str = kwargs.pop('search_str', None)
        super(BarForm,self ).__init__(*args,**kwargs)
        self.fields['search_field'].initial = search_str
        self.foo_choices = Bar.objects.raw("""
              select f.id as id, f.name as name from bar_lookup(%s)""", [search_str])
        self.fields['foo'].choices = [(x.id, x) for x in self.foo_choices]

    def clean_foo(self):
        foo = self.cleaned_data['foo']
        if foo not in self.foo_choices:
             raise forms.ValidationError("Some error!")
        return foo

    class Meta:
        model = Bar 
```

我知道它并不完美，继承 ModelChoiceField 会更好。

# c# - sqlCommand 对象并使用循环添加参数

> ID：11989744
> 
> 赞同：0
> 
> 时间：2012-08-16T14:44:46.470
> 
> 标签：c#, sqlcommand

我们可以使用 foreach 清除表单中的所有文本框，而无需为每个文本框输入代码来清除它们。

```
com.Parameters.Add(new SqlParameter("@",objPlayrInjr_P));

using (SqlCommand com = new SqlCommand())
{
    com.CommandText = "SPname";
    com.Connection = connection object;
    com.CommandType = CommandType.StoredProcedure;

    com.Parameters.Add(new SqlParameter("@SqlParameterName",objectName.propertyName));
} 
```

我需要一种通过循环添加`sqlParameters`到`Command`对象的方法，就像我在清除文本框时所做的那样。因此无需为每条语句编写代码，它将由循环完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:47:32.787

一种方法是将参数名称和值放在 a 中`Dictionary<string, object>`，然后

```
foreach (KeyValuePair<string, object> param in params)
{
    com.Parameters.AddWithValue(param.Key, param.Value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:02:50.200

这是使用注释的东西：

## 用参数名称标记属性的注解

```
[AttributeUsage(AttributeTargets.Property)]
public class ParameterAttribute : Attribute
{
    public string ParameterName { get; private set; }

    public ParameterAttribute(string parameterName)
    {
        ParameterName = parameterName;
    }
} 
```

## 示例类

```
public class Person
{
    [Parameter("FirstName")]
    public string FirstName { get; set; }

    [Parameter("LastName")]
    public string LastName { get; set; }

    [Parameter("EmailAddress")]
    public string Email { get; set; }
} 
```

## 用法

```
SqlCommand command = new SqlCommand();

Person person = new Person()
{
    FirstName = "John",
    LastName = "Doe",
    Email = "johndoe@domain.com"
};

foreach (var pi in person.GetType().GetProperties())
{
    var attribute = (ParameterAttribute)pi.GetCustomAttributes(typeof(ParameterAttribute), false).FirstOrDefault();

    if (attribute != null)
    {
        command.Parameters.AddWithValue(string.Format("@{0}", attribute.ParameterName), pi.GetValue(person, null));
    }
} 
```

# ruby-on-rails - 在 RegEx 中转义特殊字符？

> ID：11989746
> 
> 赞同：30
> 
> 时间：2012-08-16T14:44:49.327
> 
> 标签：ruby-on-rails, ruby, regex

我有一个表单，它将文本字段的内容发送到我的 Rails 应用程序，我必须生成这个字符串的正则表达式。

我试过这样：

```
regex = /#{params[:text]}/ 
```

通常这是可行的，但如果字符串中包含括号或特殊字符，则此方法将不起作用。

我不希望 Rails 处理这些字符。它们应该自动转义。

我试过这样：

```
/\Q#{params[:text]}\E/ 
```

但这也不起作用。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-16T14:54:09.893

你应该使用[`Regexp.escape`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-escape)

```
regex = /#{Regexp.escape(params[:text])}/
# in rails models/controllers with mongoid use:
# ::Regexp.escape(params[:text]) instead. ([more info][2]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T14:56:04.193

[`Regexp.escape`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-escape)转义特殊字符：

```
params[:text] = "[foo-bar]"
Regexp.new(Regexp.escape(params[:text]))
# => /\[foo\-bar\]/ 
```

# emc - 是否可以为 EMC Atmos 云存储系统上的文件生成公共 URL？

> ID：11989752
> 
> 赞同：1
> 
> 时间：2012-08-16T14:45:06.563
> 
> 标签：emc

我有一个应用程序，允许用户使用 CSS 和其他项目自定义网站。创建这些文件后，它们将存储在 Amazon S3 上，可供公众阅读。因此，我一直能够使用不需要我先连接到 S3 来生成 URL 的静态 url 来引用它们。

我们已将所有文件移至位于我们托管公司数据中心内的 EMC Atmos 系统。我知道如何从 Atmos 生成可共享的 URL，但只能通过首先建立连接。Atmos 有没有办法在对象上设置系统元数据，以便可以使用静态 URL 引用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:29:35.077

您无需连接到 Atmos 即可生成可共享的 URL。可共享 URL 的生成总是发生在客户端；它不会通过 HTTP 发生。

Atmos 系统元数据始终是不可变的。您可以使用可共享的 URL 生成“静态 URL”，并将过期设置为遥远的将来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T06:20:44.683

EMC Atmos**不需要**HTTP/HTTPS 连接来生成可共享的 URL。它**确实** 建立了一个 HTTP 连接来生成文件，但它可以由存储在云上的文件的最终用户来完成。

要创建 URL，需要在应用程序客户端进行签名（不需要 HTTP 连接）。原因是因为生成了唯一的签名。

要发送签名，您可以将签名放在 URL 中：

```
$url = "http://$server$resource?uid=$uid&expires=$expires&signature=$signature"; 
```

或者不是将签名放在 URL 中，而是通过 REST API 通过发布**x-emc-signature**的 HTTP 标头来发送它。

因此，一旦您生成了该 URL，您可以通过电子邮件或文本将其发送给其他人，他们可以稍后单击它们，只要该 URL 未过期，它将是有效的。

EMC Atmos 验证签名后，会将下载内容发送到客户端。请注意，系统时钟关闭超过 5 分钟的服务器将无法生成可共享 URL，因此请使用 NTP 守护程序在生成可共享 URL 的应用程序上保持时间同步。

因此，澄清一下，EMC Atmos 不需要与您的云存储提供商建立 HTTP 连接。HTTP 连接在第一次请求文件时完成。届时，该文件将公开可用。

# ember.js - 在 Ember.js 应用程序中分离对象

> ID：11989769
> 
> 赞同：0
> 
> 时间：2012-08-16T14:45:51.650
> 
> 标签：ember.js

有一个用 Ember.js 编写的简单消息应用程序。看看[这个小提琴](http://jsfiddle.net/EdcvY/17/)（没有CSS，对不起）。

```
/**************************
       * Application
       **************************/
App = Ember.Application.create({
  //rootElement: '#app_body'
});

/**************************
       * Models
       **************************/

App.Person = Ember.Object.extend({
  id: null,
  name: null,
  avatar: null,
  jid: null
})

App.Contact = App.Person.extend({
  isOnline : false
});

App.Message = Ember.Object.extend({
  from : null,
  //    to : null,
  text : null
  //    time : null
});

/**************************
       * Views
       **************************/

App.ApplicationView = Ember.View.extend({
  templateName:'application'
});

App.ContactListView = Ember.View.extend({
  templateName: 'contact-list'
});

App.ContactView = Ember.View.extend({
  templateName: 'contact'
});

App.TextView = Ember.View.extend({
  templateName : 'text',
  newMessage : '',
  messages : [],

  submit: function(event) {
    var message_body = this.get('newMessage')
    var message = App.Message.create({
      from : App.me.name,
      to : null,
      text : message_body,
      time : null
    });
    this.get('messages').pushObject(message);
  }
});

App.ConversationView = Ember.View.extend({
  templateName: 'conversation'
});

/**************************
       * Controllers
       **************************/
App.contactsController = Ember.ArrayController.create({

  content:[],

  pair:function () {
    content = this.get('content');
    var result = [];
    for (ii = 0; ii < content.length; ii += 2) {
      result.pushObject({
        "first":content[ii],
        "second":content[ii + 1] ? content[ii + 1] : null
      });
    }
    return result;
  }.property('content.@each')
});

// Define the main application controller. This is automatically picked up by
// the application and initialized.
App.ApplicationController = Ember.Controller.extend();

App.ConversationController = Ember.ObjectController.extend();
App.TextController = Ember.ObjectController.extend();

/**************************
       * Router
       **************************/
App.Router = Ember.Router.extend({

  enableLogging: true,

  root: Ember.Route.extend({

    goToContactList : Ember.State.transitionTo('contacts'),
    goToConversation : Ember.State.transitionTo('conversation.text'),

    index : Ember.Route.extend({
      route:'/',
      redirectsTo:"contacts"
    }),

    contacts : Ember.Route.extend({
      route:'/contacts',
      connectOutlets:function (router) {
        router.get('applicationController').connectOutlet('contactList'); // leads to ContactListView
      }
    }),

    conversation : Ember.Route.extend({

      route:'/conversation/:contact_id',
      //            modelClass: 'App.Contact',

      connectOutlets:function (router, contact) {
        // binds current contact to the conversationController so the text/video view can access it
        router.get('applicationController').connectOutlet('conversation', contact);
      },

      deserialize:function (router, params) {
        return App.contactsController.find(function(item) {
          return item.id == params.contact_id;
        });
      },

      serialize:function (router, context) {
        return context ? { contact_id : context.get('id') } : {};
      },

      index : Ember.Route.extend({
        route:'/',
        redirectsTo:"text"
      }),

      text : Ember.Route.extend({
        route:'/text',
        connectOutlets:function (router) {
          var conversationController = router.get('conversationController'),
              contact = conversationController.get('content');
          console.log(contact);
          conversationController.connectOutlet('text', contact);
        }

      })
    })
  })
});

/**************************
       * Data initialization
       **************************/

me = {"id" : 123, "name" : "Pavel"};
contacts = [
  {
    "id" : 1, 
    "name" : "Barrack Obama", 
    "avatar" : "http://www.barackobama.net/pictures/barack-obama-2.jpg"
  },
  {
    "id" : 2, 
    "name" : "Yehuda Katz", 
    "avatar" : "http://static.jquery.com/events/2011/boston/assets/images/avatars/yehuda-katz.jpg"
  }
];

// variables "me" and "contacts" are passed from the view as plain JS object
$.each(contacts, function(index, contact){
  App.contactsController.pushObject(App.Contact.create({
    "id" : contact.id,
    "name" : contact.name,
    "avatar" : contact.avatar
  }));
});

App.me = App.Person.create({
  "id" : me.id,
  "name" : me.name
});

$(function() {
  App.initialize();
}); 
```

您可以从各种联系人中进行选择并向他们发送消息。每个联系人都应该有自己的“消息队列”。

但是，在当前情况下，所有消息都混合在一起。我试图根据上下文拆分它们，但我不知道为什么。当 Ember.js 为您实例化所有路由和视图/控制器时，这可能吗？消息应该存储在哪里？

**编辑**：说清楚。我希望消息持续存在，但我想为每个联系人分开流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:05:14.957

根据您所说`Each contact should have its own "message queue".`，我已将消息存储在联系人本身中。由于每次调用 connectOutlet() 时都会实例化视图，因此您必须将数据保存在模型中。

在您的情况下，消息混杂在一起，因为您觉得自己陷入了灰烬陷阱。实际上，当您扩展一个类并将属性声明为空数组时，该数组将在所有实例之间共享。这样做的好方法是在 init() 方法中初始化空数组。

这是我生成的 jsfiddle，我希望这会有所帮助

[http://jsfiddle.net/Sly7/9jCL9/](http://jsfiddle.net/Sly7/9jCL9/)

# javascript - 从 javascript 向 div 添加内容

> ID：11989772
> 
> 赞同：1
> 
> 时间：2012-08-16T14:45:59.287
> 
> 标签：javascript, jquery, html

我想在我的 html 页面上加载一个包含 div 内容的脚本。我知道这是可能的，但我很难理解如何去做。这是我的html：

```
<html>
<body>
<script src="script.js"> </script>
<div id="helloWorld"> </div>
</body>
</html> 
```

script.js 必须是什么才能让 html 页面显示某些内容？我在想这样的事情（我知道这是不正确的，我是 javascript 的初学者。

```
function showText()
{
    $("#helloWorld").html("<p> Hello World! </p>")
    $("#helloWorld").show();

}
showText() 
```

有人可以告诉我我是否走在正确的轨道上，以及我该如何解决这个问题？谢谢，山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:50:52.507

你的代码是 jQuery：

```
$("#helloWorld").html("<p> Hello World! </p>")
$("#helloWorld").show(); 
```

你不需要`$("#helloWorld").show();`.

在纯 JavaScript 中，

```
function showText()
{
    document.getElementById("helloWorld").innerHTML="<p> Hello World! </p>";
}
showText() 
```

`showText()`但记得在 DOM 中加载 div 后调用！（例如，在`</body>`标签之前调用它）。

然后，

```
<html>
<head>
...
<script type="text/javascript" src="script.js"></script>
...
</head>
<body>
...
<script type="text/javascript">
showText();
</script>
</body>
</html> 
```

和 script.js：

```
function showText(){
    document.getElementById("helloWorld").innerHTML="<p> Hello World! </p>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:51:53.913

我认为它什么都不做（我假设）因为你的脚本标签在 div 本身之前。如果您使用的是 JQuery，则应将初始代码放入 ready 函数中，在您的情况下：

```
$(document).ready(function(){
  showText();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T14:52:12.043

当您的脚本加载时，HTML 元素 " `#helloWorld`" 仍然不存在。

像这样使用[`$(document).ready`](http://api.jquery.com/ready/)：

```
function showText() {
    $("#helloWorld").html("<p> Hello World! </p>")
    $("#helloWorld").show();
}
$(document).ready(function() {
    showText();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T14:53:52.133

您尝试使用的语法需要 JQuery。你可以在这里下载最新的 JQuery 库 [http://jquery.com/](http://jquery.com/)

然后您可以使用以下命令向您的 div 添加文本：

```
$(document).ready(function(){
  var showText = function(){
    $("#helloWorld").html("<p> Hello World! </p>")  
    $("#helloWorld").show();
  };    
  showText();
}); 
```

编辑：我在（文档）开头添加了 $ 字符，此外，没有必要`.show()`在您的 div 上具有该功能，因为它已经可见。但是，如果您确实将该 div 的显示设置为无，则应该使用`.show()`来显示该 div。

# php - 用户在文本框中输入一个数字，并根据使用 PHP 输入的数字重定向到另一个网页

> ID：11989775
> 
> 赞同：1
> 
> 时间：2012-08-16T14:46:08.357
> 
> 标签：php, javascript, jquery, html, redirect

我正在尝试创建一个文本框，用户可以在其中输入数字，单击按钮并根据用户输入的数字使用 PHP 重定向到另一个网页。我不确定为什么这不起作用。您可以将以下代码保存在 PHP 文件中。如果您有任何想法，请告诉我。如果您有其他使用 javascript、jQuery 或其他语言进行此类重定向的方法，请告诉我。非常感谢。祝你今天过得愉快。五。

```
<?php
$textboxdata = $_POST['textboxdata'];

if (isset($_POST['$textboxdata'])) {
    switch ($textboxdata)
    {
    case 1:
      header("Location: one.php");
      break;
    case 2:
      header("Location: two.php");
      break;
    case 5:
      header("Location: five.php");
      break;
    default:
      echo "Enter a number please.";
    }
}
?>

</head>
<body>

<FORM NAME ="form" METHOD ="post" ACTION = "">
<INPUT TYPE = "TEXT" VALUE ="username" METHOD ="post" name="textboxdata" >
<INPUT TYPE = "Submit" Name = "submit" VALUE = "Login">

</FORM>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:47:30.963

这有一个美元符号，不会评估为真：

```
if (isset($_POST['$textboxdata'])) { 
```

它应该是：

```
if (isset($_POST['textboxdata'])) { 
```

您可能还需要数据的整数值`$_POST`，因此请更改：

```
$textboxdata = $_POST['textboxdata']; 
```

对此：

```
$textboxdata = intval( $_POST['textboxdata']); 
```

因为请记住，用户可以在该框中输入**任何内容**，而不仅仅是数字。您可能希望在未来研究更多的输入卫生。

最后，您希望`exit()`在所有这些`header()`调用之后（并且`Location`值应该是完整的 URL，而不是相对的）。您想要这样做的原因`exit()`是因为您希望脚本在那里停止处理。

```
header("Location: one.php");
exit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T14:52:17.660

好吧，看到你分配`$_POST['textboxdata'];`给`$textboxdata`我会成功的

```
$textboxdata = $_POST['textboxdata']; 

if (isset($textboxdata)) { 
    switch ($textboxdata) 
```

如果`$textboxdata` 未通过初始分配设置，则不会命中 switch 语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T14:47:32.117

我怀疑这是问题所在：

```
if (isset($_POST['$textboxdata'])) { 
```

应该：

```
if (isset($_POST['textboxdata'])) { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T14:59:39.340

> 如果您有其他使用 javascript、jQuery 或其他语言进行此类重定向的方法，请告诉我。

jQuery解决方案：

```
<input type="text" value="username" id="inpt" />
<input type="button" value="login" id="btn" />

<script type="text/javascript">
    $(function() {
        $("#btn").on('click', function() {
            var value = $("#inpt").val();
            if (value.length) {
                switch (parseInt(value, 10)) {
                    case 1:
                      document.location.href = "one.php";
                      break;
                    case 2:
                      document.location.href = "two.php";
                      break;
                    case 5:
                      document.location.href = "five.php";
                      break;
                    default:
                      alert("Enter a number please.");
                }
            }
        });
    });
</script> 
```

# java - Java：套接字消息丢失

> ID：11989777
> 
> 赞同：4
> 
> 时间：2012-08-16T14:46:12.867
> 
> 标签：java, sockets

我们正在用 Java (1.6) 开发一个服务器应用程序，它是一个事务服务器，它通过 TCP 套接字侦听连接。每个新连接都会创建一个新线程，该线程在连接关闭之前一直保持活动状态。每个客户端都会将事务发送到将要处理的服务器，然后将响应发送回客户端。

这工作正常。当我们想通过同一个套接字发送许多异步事务（或消息）时，问题就出现了。我编写了一个小型应用程序，它发送 1000 个事务，每个事务之间的间隔为 10 毫秒。该应用程序是异步的，因此发送消息并在中间进行响应。

这是处理传入消息并将它们发送到另一个组件进行处理的部分的代码（该组件有一个线程池）：

```
public void run() {
...
...

  socketBuf = new BufferedInputStream(input);
  baos = new ByteArrayOutputStream();

  while ((bytes_read = socketBuf.read(buffer)) != -1) {

    if (bytes_read < 0) {
        log.error("Tried to read from socket, read() returned < 0,  Closing socket.");
        return;
    }

    baos.write(buffer, 0, bytes_read);
    break;
  }

  if (bytes_read >= 0) {

    baos.flush();
    byte data[] = baos.toByteArray();

    if (data.length > 0) {                      
        GWTranData tData = posMessage.decode(data, false);   
        if (tData.getMessageType() > 0) {

            // Send to the Pre-Online Manager to be processed                       
            PreOnlineJob newJob = new PreOnlineJob(tData);
            newJob.addJobStatusListener(this);
            GWServer.getPreOnlineInstance().addJob(newJob);
        }
    }
  }
  else {
    clientSocket.close();
    break;
  }

} while(true);
  } 
```

在短时间内发送许多事务时，我们面临的问题是某些消息丢失并且无法到达服务器。通过深入分析，我们发现当消息发送速度过快时，缓冲区中的消息不止一条，因此 data[] 有两条或多条消息但只会执行一条。发送的消息大小为 200 字节，因此 512 的缓冲区绰绰有余。

我实现套接字读取的方式有什么问题吗？有没有更好的办法？

多谢你们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:53:18.890

问题在于您使用从套接字读取的字节的方式。您的假设是每次阅读都会收到一条“消息”。这个假设是错误的 - TCP 不知道您的应用程序消息边界，但会为您提供字节*流*，因此您可以一次获取多条消息，或消息的一部分，或两者兼而有之。

您必须缓冲接收到的流中未处理的部分，检查是否收到完整的消息，再阅读一些内容，直到完成，处理消息，然后循环继续。

### 编辑0：

有几种方法可以在 TCP 之上设计*应用程序级协议：*

*   固定长度的消息（简单），
*   分隔消息（需要明确的字节序列来指定消息的结束/开始，如`SOH`在 FIX 或`\r\n`HTTP 中），
*   @Thomas 在评论中建议的长度前缀消息，
*   “自我描述”的消息——比如 s 表达式或其他什么，需要被解析，
*   也许其他人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T23:59:12.593

您需要调整代码以在消息到达时对其进行处理。目前，您正在将从 connect 到 EOS 的整个流累积到一个巨大的字节数组中，然后像只包含一条消息一样处理它。从“丢失”消息的角度来看，这不仅是错误的（是你在丢失），而且非常浪费时间和空间。您无需等待 EOS 即可处理第一条消息。你需要弄清楚如何读取流，直到你有一条消息，处理它，然后重复处理下一条消息，终止于 EOS。

# android - 无法将位图保存在手机内存中

> ID：11989785
> 
> 赞同：1
> 
> 时间：2012-08-16T14:46:47.280
> 
> 标签：android, bitmap, save, imageview, drawingcache

我在以下代码中得到位图 b 的 java null 异常：我能做什么？为什么 getDrawingCache 函数在创建位图时不起作用；启动操作的按钮的 onClickListener：

```
KaufenGListener = new OnClickListener() {

            @Override
            public void onClick(View v) {

                Coupon coupon = null;

                System.out.println("-- iv: " + couponView);

                if (clickedcoup == -1) {
                    Toast.makeText(getActivity(), "Please select a coupon", Toast.LENGTH_SHORT).show();
                } else {
                    for (int i = 0; i < coupons.size(); i++) {
                        if (clickedcoup == i) {
                            coupon = coupons.get(i);
                        }
                    }
                    String username;
                    Bitmap coupo = BitmapFactory.decodeResource(getResources(), R.drawable.coupon1);
                    Bitmap barcode = Util.generateEAN("9310779300005", getActivity(), coupo.getWidth() / 3);
                    // Drawable couponDraw = new
                    // BitmapDrawable(getResources(),b);
                    System.out.println("------------b : " + barcode);
                    if (user.address.Nachname != null) {
                        username = user.address.Nachname + " " + user.address.Vorname; // bla
                    } else {
                        username = "";
                    }
                    viewFlipperVino.setDisplayedChild(8);
                    // LayoutParams params = new LayoutParams();
                    // params.width=LayoutParams.MATCH_PARENT;
                    // params.height=(int) (params.width/1.5);

                    //couponView.buildDrawingCache();
                    couponView.setUp(coupo, barcode, coupon.Code, gutscheinName, username, coupon.Wert);
                    clickedcoup = -1;
                    String[] recipients = new String[] { "rosu_alin@ymail.com" };
                    String emailSubject = "Gutschein Schenken fur "+ gutscheinName;
                    String emailText = "Glückwunsch, Sie haben einen Gutschein für Wein & Co!!";
                    Intent intent = new Intent(Intent.ACTION_SEND);
                    intent.setType("plain/text");
                    intent.putExtra(Intent.EXTRA_EMAIL, recipients);
                    intent.putExtra(Intent.EXTRA_SUBJECT, emailSubject);
                    intent.putExtra(Intent.EXTRA_TEXT, emailText);
                    File root = Environment.getExternalStorageDirectory();
                    File file = new File(root, "gutschein.png");
                    try {
                        file.createNewFile();
                    } catch (IOException e1) {
                        e1.printStackTrace();
                    }                       
                    couponView.setDrawingCacheEnabled(true);
                    couponView.buildDrawingCache();
                    Bitmap b = couponView.getDrawingCache();
                    System.out.println("bitmapget drawin cache:   "+couponView.getDrawingCache());
                    Saver.saveImg(file, b, getActivity());
                    try {
                        System.out.println("bitmap"+b);
                           FileOutputStream out = new FileOutputStream(file);
                           b.compress(Bitmap.CompressFormat.PNG, 100, out);
                           System.out.println("bitmap.compress"+b.compress(Bitmap.CompressFormat.PNG, 100, out));
                    } catch (Exception e) {
                           e.printStackTrace();
                    }

                    if (!file.exists() || !file.canRead()) {
                        Toast.makeText(getActivity(), "Befestigung Fehler", Toast.LENGTH_SHORT).show();
                        return;
                    }
                    Uri uri = Uri.parse("file://" + file);
                    intent.putExtra(Intent.EXTRA_STREAM, uri);
                    startActivity(Intent.createChooser(intent, "Send email..."));
                }
            }

        }; 
```

这是扩展 View 的 CouponView 类： public class CouponView extends View {

```
private Bitmap coupon, barcode;
Paint paint = new Paint();
Paint paint2 = new Paint();
Paint paint3 = new Paint();
private String name;
private String code;
private String username;
private String wert;
int w;
int h;

public CouponView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

public CouponView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public CouponView(Context context) {
    super(context);
    init();
}

private void init() {

    paint.setColor(0xFF000000);
    paint.setTextSize(7);
    paint2.setColor(0xFF000000);
    paint2.setTextSize(10);
    paint3.setColor(0xFF000000);
    paint3.setTextSize(25);

}

public void setUp(Bitmap coupon, Bitmap barcode, String code, String name, String username,String wert) {
    this.coupon = coupon;
    this.barcode = barcode;
    this.name = name;
    this.username = username;
    this.code = code;
    this.wert = wert;
     w = coupon.getWidth();
     h = coupon.getHeight();
    System.out.println("height"+h);
    System.out.println("width"+w);

    invalidate();
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    System.out.println("-------------CouponView.onDraw()");
    canvas.drawBitmap(coupon, 0, 0, null);
    canvas.drawBitmap(barcode, w/1.61f, h/1.20f, null);
    canvas.drawText("9310779300005", w/1.429f, h/1.018f, paint);
    canvas.drawText("9310779300005", w/18.12f , h/1.073f, paint2);
    canvas.drawText(code, w/1.8875f, h/1.073f, paint2);
    canvas.drawText(username, w/11.32f, h/10.3f, paint2);
    canvas.drawText(name, w/11.32f, h/5.936f, paint2);
    canvas.drawText(wert, w/1.294f, h/1.641f, paint3);
}
} 
```

按照我的逻辑，我将 couponView 的绘图缓存设置为 (true)，然后我开始构建绘图缓存。然后我启动位图getDrawingCache()。仅此一项就可以保存我的文件。我错过了什么？此外，Saves.saveIMG 函数与之后的 try catch 执行相同的操作（我只从同事那里拿了它，因为它更有条理。我虽然它使用 imageView 来保存，而不是位图。

```
public class Saver {
public static void saveImg(File pic, Bitmap picture,Context context) {
    folderExists(pic);
    try {
        FileOutputStream out = new FileOutputStream(pic);
        picture.compress(Bitmap.CompressFormat.JPEG, 100, out);
        Log.i(Saver.class.toString(), " picture writed at: " + pic.getAbsolutePath());
        Toast.makeText(context, "pic saved", Toast.LENGTH_SHORT).show();
    } catch (Exception e) {
        pic.delete();
        Log.i(Saver.class.toString(), " picture writing error: " + e.getMessage());
        Toast.makeText(context, "pic not saved", Toast.LENGTH_SHORT).show();
    }
}

private static void folderExists(File dir) {
    System.out.println("-=-=- : " + dir.getAbsolutePath());
    if (!dir.getParentFile().exists()) {
        dir.mkdirs();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:56:41.450

不确定您的代码到底有什么问题，但这对我来说可以保存和读取手机内存中的位图：

**将位图写入内存：**

```
public void writeBitmapToMemory(String filename, Bitmap bitmap) {
        FileOutputStream fos;
        // Use the compress method on the Bitmap object to write image to the OutputStream
        try {
            fos = this.openFileOutput(filename, Context.MODE_PRIVATE);
            // Writing the bitmap to the output stream
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.close();

        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        } 
        catch (IOException e) {
            e.printStackTrace();

        }

    } 
```

**读书：**

```
public Bitmap readBitmapFromMemory(String filename) {
        Bitmap defautBitmap = null;
        File filePath = this.getFileStreamPath(filename);
        FileInputStream fi;
        try {
            fi = new FileInputStream(filePath);
            defautBitmap = BitmapFactory.decodeStream(fi);

        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        }

        return defautBitmap;

    } 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T07:56:34.700

我首先创建了一个空位图，并将其用作画布来绘制。代码：

```
couponView.setDrawingCacheEnabled(true);
  couponView.buildDrawingCache();
  couponView.setUp(coupo, barcode, coupon.Code, gutscheinName, username, coupon.Wert);
  Bitmap b = Bitmap.createBitmap(couponView.w, couponView.h, 
                            Config.ARGB_8888);
  Canvas canvas = new Canvas(b);
  couponView.draw(canvas);
  Saver.saveImg(file, b, getActivity());
  Uri uri = Uri.parse("file://" + file);
  intent.putExtra(Intent.EXTRA_STREAM, uri);
  startActivity(Intent.createChooser(intent, "Send email...")); 
```

# objective-c - 试图通过 NSFetchedResultsControllers 枚举

> ID：11989787
> 
> 赞同：0
> 
> 时间：2012-08-16T14:46:47.773
> 
> 标签：objective-c, nsfetchedresultscontroller, enumeration

我有 4 个表视图，它们都有自己的 NSFetchedResultsController

在某一时刻，我正在尝试全部重置/重新加载它们......就像这样

```
fetchedResultsControllerArray = [NSArray arrayWithObjects:__fetchedResultsController1, __fetchedResultsController2, __fetchedResultsController3, __fetchedResultsController4, nil];

for (NSFetchedResultsController __strong *frc in fetchedResultsControllerArray){

    frc.delegate = nil;
    frc = nil;

    [frc performFetch:&error];
}

[tv1 reloadData];
[tv2 reloadData];
[tv3 reloadData];
[tv4 reloadData]; 
```

这不起作用..表格未显示最新数据。

但是，如果我取出枚举并仅使用其中一个进行枚举，它会起作用吗？

```
fetchedResultsControllerArray = [NSArray arrayWithObjects:__fetchedResultsController1, __fetchedResultsController2, __fetchedResultsController3, __fetchedResultsController4, nil];

__fetchedResultsController1.delegate = nil;
__fetchedResultsController1 = nil;

[__fetchedResultsController1 performFetch:&error];

[tv1 reloadData];
[tv2 reloadData];
[tv3 reloadData];
[tv4 reloadData]; 
```

谁能解释我在枚举过程中可能做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:46:38.367

`[frc performFetch:&error]`in 循环没有效果，因为你之前已经设置`frc = nil`过了。

我假设它们`__fetchedResultsController1, ...`是 的实例变量，`self`并且您希望将它们设置为`nil`，以便在下次访问时重新创建它们？我认为没有一种不丑的方法可以循环执行此操作，并且可能不值得 4 个项目。

# cordova - Phonegap Camera.PictureSourceType.SAVEDPHOTOALBUM

> ID：11989788
> 
> 赞同：0
> 
> 时间：2012-08-16T14:46:58.133
> 
> 标签：cordova, camera

我有一个问题。我的程序在 iphone 的相册中拍照，但是当我点击*本地照片*按钮时，它直接打开*Camera Roll*而不是*Albums*。我的代码：

```
function startPhotoReplaceProcess(Context, ProfileType, PhotoId, Slot)
{
function getPhoto(source_type ) {

    function onPhotoURISuccess(uri) {

        Context.trigger("PhotoSelected", [true, ProfileType, PhotoId, Slot, uri]);
    }

    // Take picture using device camera, allow edit, and retrieve image
    //as base64-encoded string
    navigator.camera.getPicture(onPhotoURISuccess, onFail, {
        quality: 75,
        destinationType: navigator.camera.DestinationType.FILE_URI,
        //DATA_URL vs FILE_URI
        sourceType: source_type,
        allowEdit: true,
        encodingType: navigator.camera.EncodingType.JPEG,
        targetWidth: 100,
        targetHeight: 100,
        mediaType: navigator.camera.MediaType.PHOTO
    });
}

function onPhotoSourceDismissed(buttonId) {

     if (buttonId == 1) {
         getPhoto(navigator.camera.PictureSourceType.SAVEDPHOTOALBUM);
     }
     else if (buttonId == 2) {
         getPhoto(navigator.camera.PictureSourceType.CAMERA);
     }
 }

 navigator.notification.confirm(
   localization.confirms.photo_source.message,
   onPhotoSourceDismissed,
   localization.confirms.photo_source.title,
   localization.confirms.photo_source.album +","+localization.confirms.photo_source.camera+","+localization.confirms.photo_source.cancel
   );

} 
```

有人可以帮我打开 iphone 的*相册*，但不能打开*相机胶卷*（Pellicule）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T05:52:42.220

也许

`sourceType: source_type --> sourceType: navigator.camera.PictureSourceType.SAVEDPHOTOALBUM`

# sql - 如何在 sql 语句中返回 LOW VALUES HEX '00'？

> ID：11989795
> 
> 赞同：1
> 
> 时间：2012-08-16T14:47:19.777
> 
> 标签：sql, oracle, hex, utl-file

我需要在文件中（在字符串中间）写入一个 LOW VALUES HEX'00'。

我可以使用包 utl_file 使用下一个代码来做到这一点`utl_file.put_raw(v_file, hextoraw('000000'))`。但我可能只在文件的开头和结尾做，而不是在字符串的中间。

所以，我的问题是：如何在 select 语句中写一个 LOW VALUES HEX'00'。我尝试了一些变体，例如

```
Select ‘blablabla’ Q, hextoraw('000000'), ‘blablabla’ w from dual; 
```

将其保存到`.dat`文件中，然后在十六进制编辑器中打开它，但使用 utl_file 时结果不同。

任何人（如果可能的话）可以写一个正确的sql语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T09:42:16.947

如果我对您的理解正确，您正在尝试在输出中添加一个空值/二进制零。如果是这样，您可以使用`chr(0)`.

例如。`utl_file.putf(l_file, 'This is a binary zero' || chr(0));`

在十六进制编辑器中查看它会告诉你：

```
00000000  54 68 69 73 20 69 73 20  61 20 62 69 6e 61 72 79  |This is a binary|
00000010  20 7a 65 72 6f 00 0a                              | zero..| 
```

# abap - 如何在 ABAP 表视图中启用滚动条？

> ID：11989797
> 
> 赞同：0
> 
> 时间：2012-08-16T14:47:24.580
> 
> 标签：abap

我正在尝试使用内部表格填充表格。表格被完美填满，但我可以看到表格的第一行，其余的因为没有滚动条而看不到。

谁知道启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:41:58.237

是的，有一种方法可以通过使用表格控件来启用表格中的滚动条。我想分享一个来自 SAP 帮助的链接来演示这一点。 [表格控件：滚动](http://help.sap.com/saphelp_nw04/helpdata/en/9f/dbac4435c111d1829f0000e829fbfe/content.htm)

# intellij-idea - Lombok 在 IntelliJ 中使用“val”类型

> ID：11989798
> 
> 赞同：7
> 
> 时间：2012-08-16T14:47:27.697
> 
> 标签：intellij-idea, lombok

您好我在一个项目中使用 Project Lombok（版本 0.11.2）。我安装了 Intellij 和 Eclipse (STS)，lombok 与两个 IDE 集成（STS，通过 lombok JAR，IntelliJ 通过插件 [版本 0.4，22/01/12 发布]）。

当我尝试在 IntelliJ 中使用“val”数据类型时，它无法识别结果类型，但是相同的代码在 STS 中有效。

这是 IntelliJ 插件的问题，还是插件不支持此功能？

val 类型是在 lombok 0.10.0 中添加的，因此不是新功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-17T09:24:51.763

目前，根据 Lombok IntelliJ Plugin 的[文档](http://code.google.com/p/lombok-intellij-plugin/wiki/FeatureList)，尚不支持此功能。

披露：我是 Lombok 的核心开发人员之一。

# c# - monitor.wait 是否向其他线程发出信号

> ID：11989809
> 
> 赞同：2
> 
> 时间：2012-08-16T14:47:56.923
> 
> 标签：c#, multithreading, windows-phone-7

我正在为 windows phone 7 开发一个应用程序。现在我有 2 个线程。

线程 1

```
 lock(somelock)
 {
   //does some work 
   Monitor.Wait();
   //Does some work
 } 
```

线程 2

```
 lock(somelock)
 {
   //does some work
   Monitor.Signal();
   //does some work;
 } 
```

现在我想知道是否`Monitor.wait()`向另一个线程发出信号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:57:48.990

*未能*获得锁的线程被保留在*就绪队列*中。如果**有**锁的线程调用Wait，那么它就会产生锁，并且就绪队列中的任何线程都有资格被激活，从而获得锁。所以*在某种程度上*它们被激活了，但它们不是“脉冲的”，如果这就是你所说的信号的话。

相比之下，*主动调用 Wait*的线程在一个单独的队列中；它不会仅仅被产生锁的线程激活；线程返回就绪队列的唯一方法是，如果有锁的线程调用 Pulse/PulseAll，或者发生超时。请注意，Pulse/PulseAll***不会***产生锁——它们只是从睡眠队列到就绪队列的一个或多个线程。第二个例子中的锁只在离开`lock`语句时产生。因此，请注意，在持有独占锁的同时，Pulse（在您的示例中为 Signal）之后的“做一些工作”仍然完成（实际上，您不妨将 Pulse 移动到 lock 语句的末尾） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:51:23.980

不，但[`Monitor.Pulse()`](http://msdn.microsoft.com/en-us/library/system.threading.monitor.pulse.aspx)确实如此。当您想指示状态可能已针对某个`Monitor.Wait()`条件发生更改时，请使用 Monitor.Pulse()。

[http://www.albahari.com/threading/part4.aspx#_Signaling_with_Wait_and_Pulse](http://www.albahari.com/threading/part4.aspx#_Signaling_with_Wait_and_Pulse)

# iphone - 如果不点击 iPhone 应用程序，就无法在文本字段上显示数据？

> ID：11989812
> 
> 赞同：1
> 
> 时间：2012-08-16T14:48:07.830
> 
> 标签：iphone, objective-c, ios4

我正在开发一个支付处理 iPhone 应用程序，并且还能够使用读卡器设备将信息从卡读取到我的应用程序，但是在读取卡信息后，我无法将这些数据显示到我的视图的文本字段中，它只有在点击文本字段后才会显示，请参阅如果有人可以帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:12:34.907

听起来更新字段的代码在错误的位置。如果您已将代码放在委托方法中

```
textFielDdidBeginEditing 
```

在 textField 通过诸如点击之类的事件获得焦点之前，不会运行代码。尝试将其移动到它自己的方法中，该方法在读卡器完成时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:56:01.213

代码应该是这样的：

```
-(void)showCard{
nsstring *cardnumber = [[nsstring alloc]initwithformat:@"%@", cardData];
self.textField.text = cardnumber;} 
```

我就是这样做的，对我来说它会自动显示它确保它不在您点击文本字段的动作中并且它在它自己的方法中

# javascript - 使用 iframe 重叠网站

> ID：11989813
> 
> 赞同：1
> 
> 时间：2012-08-16T14:48:13.257
> 
> 标签：javascript, html, delphi, iframe, bho

我正在开发一个 BHO 来拒绝访问被禁止的网站。因此，当我找到某个 URL 时，我只需使用以下代码打开一个 iframe：

```
Document:= IE.Document as IHTMLDocument2;
iFrame:= Document.createElement('iframe');
iFrame.setAttribute('src', 'denied.html', 0);
iFrame.setAttribute('position', 'fixed', 0);
iFrame.style.width:= '100%';
iFrame.style.left:= '0px';
iFrame.style.top:= '0px';
iFrame.style.border:= '0px';
iFrame.style.height:= '100%';
(Document.body as IHTMLDomNode).appendChild(iFrame as IHTMLDomNode); 
```

但是这段代码只是将 iframe 打开到网站末尾的一个小空间中。如何将整个网站与我的 iframe 内容重叠？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:55:01.177

将位置设置为[绝对](http://www.w3schools.com/cssref/pr_class_position.asp)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T14:56:41.747

如果你想要绝对阻塞 - 你不应该添加元素，你应该替换它。

所以你必须制作成熟的 HTML 页面。然后您可能可以将浏览器重定向到它，更改 Document.Location 属性。或者用新的内容替换旧的内容 Document.OuterHTML := .... 你的字符串。

经验法则很简单 - 不是通过替换附加，一种或另一种方式。

PS：为什么可以在浏览器选项中轻松禁用仅 IE 的 BHO？我最好通过 \windows\system32\drivers\etc\hosts 或通过组策略禁止禁止站点。可靠得多。

# c# - @Master 声明给出语法错误

> ID：11989821
> 
> 赞同：2
> 
> 时间：2012-08-16T14:48:40.060
> 
> 标签：c#, asp.net, master-pages

我有一个母版页，我试图声明它是用 C# 编写的。

但是，当我将此输入到 Design.master 文件的顶部时，它会给出“语法错误”。

`<%@ Master Language="C#" %>`

我不明白的是，Visual Studio 正在为我编写代码......

这可能是什么原因造成的？

![在此处输入图像描述](../Images/591318e984f882eeb3d82469c0fe8341.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T11:02:49.550

我关闭了选项卡并重新打开它，然后成功验证了语法。

呸！

# node.js - 如何监控/计算 NodeJS 服务器的带宽使用情况？

> ID：11989822
> 
> 赞同：6
> 
> 时间：2012-08-16T14:48:41.553
> 
> 标签：node.js, video-streaming, socket.io, bandwidth

好的，所以在空闲时间我开发了一个流式传输视频的 nodejs/socketio 应用程序，但我想知道它在运行什么样的统计信息，我有我的活动监视器正在运行，目前有 2 个用户互相发送数据流和统计信息如下面所述：

```
%CPU: 6.0
Threads: 5
Real Memory: 59.6mb 
```

如何计算服务器上发送的总 MB/GB 数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T22:18:52.477

我的建议是在您的应用程序中添加一个计数器。

您应该能够添加如下内容：

`socket.on('message', function(message, callback) { myCounter += sizeof(message); })`

这里的关键是识别`sizeof`您发送的消息。如果它是一个缓冲区，那么你可以只计算字节数。我不清楚他们在发送 JSON 时使用什么类型的打包。

# objective-c - 使用base64时出现奇怪的目标c错误

> ID：11989824
> 
> 赞同：0
> 
> 时间：2012-08-16T14:48:45.510
> 
> 标签：objective-c

我刚刚尝试了以下代码段，但我遇到了错误：-

```
#import "JSONKit.h"
#import "Base64.h"
#import <Foundation/Foundation.h>

int main() { 
NSMutableDictionary *dict = [NSMutableDictionary dictionary]; [dict setObject:(id)@"value" forKey:(id)@"key"];

for(id key in dict) NSLog(@"%@\t%@\n", key, [dict objectForKey:key]);

[Base64 initialize]; 
NSData *jsonstr = [dict JSONStringWithOptions:JKSerializeOptionNone error:nil]; 
NSString *val = [Base64 encode: jsonstr]; 
NSLog(@"%@\n", val);

return 0; 
} 
```

我得到的错误是：-

```
test.m: In function ‘main’:
test.m:13: warning: incompatible Objective-C types initializing ‘struct NSString *’, expected ‘struct NSData *’
Undefined symbols:
  "_OBJC_CLASS_$_Base64", referenced from:
      __objc_classrefs__DATA@0 in cc23xlpr.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

为了消除警告，我将一行更改为：-

```
NSData *jsonstr = (NSData *)[dict JSONStringWithOptions:JKSerializeOptionNone error:nil]; 
```

但是，错误仍然存​​在——对 Objective-C 来说是新手，我发现这个错误非常神秘，有人可以帮助我理解问题的根源/解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:54:42.917

我想，该`[dict JSONStringWithOptions:JKSerializeOptionNone error:nil]`方法返回字符串，如果你想将该字符串序列化为 NSData ，你应该遵循：

```
[Base64 initialize]; 
NSString *jsonStr = [dict JSONStringWithOptions:JKSerializeOptionNone error:nil]; 
NSData *jsonstrData = [jsonStr dataUsingEncoding:NSUTF8StringEncoding];
NSString *val = [Base64 encode: jsonstrData]; 
NSLog(@"%@\n", val); 
```

# internet-explorer - 使用条件 CSS 对 IE 进行排版调整……还是其他？

> ID：11989826
> 
> 赞同：0
> 
> 时间：2012-08-16T14:48:51.353
> 
> 标签：internet-explorer, css, conditional-comments

我正在尝试为自己创建一个设计博客和画廊，这就是我对 CSS3 进行一些实验的原因。我在其他浏览器上实现了我想要的结果，现在 IE 让我很头疼。

我使用 CSS 为我的博客文章创建了旋转日期标记，如下所示：

```
.metadata {
margin-left: -108px;
margin-top: 140px;
width: 140px;
position: absolute;
text-align: right;
} 

.postdate {
display: block;
/* Safari */
-webkit-transform: rotate(-90deg);
/* Firefox */
-moz-transform: rotate(-90deg);
/* Opera */
-o-transform: rotate(-90deg);
font-size: 70px;
color: #ffffff;
} 
```

好吧，我是怎么做到的可能并不那么重要。无论如何：我也尝试在 IE 中旋转文本，并且我设法使用特定于 IE 的代码来做到这一点，但是呈现的结果实在是太糟糕了，以至于我不想使用它。现在，如果没有旋转代码等，日期标记自然离它们在 IE 中的位置很远。

我希望使用条件 CSS 为 IE 中的日期标记创建一个完全不同的外观，但我不确定如何，这是我第一次尝试这样的事情。

```
<!--[if IE ]>
<link rel="stylesheet" href="iecss.css"  type="text/css" media="screen">
<![endif]--> 
```

在那个 iecss 文件中，我包含了相同的 CSS 类，但规则略有不同：起初我只尝试将字体大小降低 50 像素。我的电脑上只有 IE 8，它在那里完全没有效果。我使用 IE NetRenderer 预览了我的网站，这暗示文本大小的更改在 IE 7 中*确实有效*（嗯，实际上在 IE 6 中也是如此，但我不愿意谈论设计中发生的其他事情）。

那么为什么它在 IE 8 和（根据 NetRenderer）IE 9 中没有做任何事情呢？我也尝试使用 [if gte IE 8] 但它也没有做任何事情。

问题是当 IE 理解主 CSS 文件中的规则并且可以正常显示结果时，它不能用相同类的新 CSS 规则覆盖效果？

有没有办法让所有版本的 IE 完全忽略这些 CSS 规则并遵循其他规则（这会使 IE 中的日期标记看起来完全不同）？或者，有没有办法告诉 IE 根本不显示日期标记？由于我的网站刚开始只是相当实验性的，所以不在 IE 中显示发布日期也没什么大不了的。PHP 可以为我做后者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:12:49.993

对于 IE 9 支持添加：

```
-ms-transform: rotate(-90deg);​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

对于 IE 8 及更低版本，请添加：

```
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); 
```

数字 3 表示 -90 (270) 度，0 表示 0 度，1 表示 90 度，2 表示 180 度。

链接：http:
[//jsfiddle.net/Eqkjh/2/](http://jsfiddle.net/Eqkjh/2/)
[http://css-tricks.com/snippets/css/text-rotation/](http://css-tricks.com/snippets/css/text-rotation/)

# c - 在 Quake 中使用 CreateEvent()

> ID：11989827
> 
> 赞同：1
> 
> 时间：2012-08-16T14:48:51.570
> 
> 标签：c, winapi, events, game-engine, quake

我很好奇 Quake 中 CreateEvent() 函数的使用。

我们在定义 WinMain() 的 c 文件中有以下全局：

```
static HANDLE tevent; 
```

在 WinMain() 函数本身中，我们看到：

```
tevent = CreateEvent(NULL, FALSE, FALSE, NULL); 
```

如果创建失败，则游戏退出。

然后它出现在以下函数中：

```
void SleepUntilInput (int time)
{
    MsgWaitForMultipleObjects (1, &tevent, FALSE, time, QS_ALLINPUT);
} 
```

最后在 Quit 函数中调用 CloseHandle(tevent)。

我不熟悉 WinAPI，所以这给我留下了两个问题。

- CreateEvent() 的使用返回什么？

- 这如何使 SleepUntilInput() 函数正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:00:24.413

`CreateEvent`返回新创建事件的句柄。

`SleepUntilInput`使用 `MsgWaitForMultipleObjcts 函数等待三件事之一发生：

1.  事件已发出信号，或
2.  输入可用，或
3.  `time`毫秒已经过去。

由于代码从不发出事件信号，因此条件 (1) 永远不会发生，因此唯一能唤醒它的是 (2) 或 (3)。

请注意，该事件实际上不是必需的。代码可以完成

```
void SleepUntilInput (int time) 
{ 
    MsgWaitForMultipleObjects (0, NULL, FALSE, time, QS_ALLINPUT); 
} 
```

但是编写代码的人没有想到这一点，所以他们转而传递了一个虚拟事件。

# java - WebView 最小缩放太大，内部显示的表格未正确调整大小

> ID：11989829
> 
> 赞同：1
> 
> 时间：2012-08-16T14:48:57.377
> 
> 标签：java, android, html, webview, html-table

我定义了一个`WebView`（称为时间表）并`loadDataWithBaseURL`像这样调用： `timeTable.loadDataWithBaseURL(null,"<html><head></head><body>" + str + "</body></html>", "text/html", "utf-8",null);`

基本上`str`是一个包含格式良好的 html 表的字符串。这是电脑里编译的表格： ![在此处输入图像描述](../Images/f41cfa3de039c6510e03596d5647abe7.png)

为了允许缩放，我调用了：

`timeTable.getSettings().setSupportZoom(true); timeTable.getSettings().setBuiltInZoomControls(true);`

加载后`WebView`，您会看到以下内容： ![在此处输入图像描述](../Images/2922f1fcea5aa1b0f893fe48a85261bf.png)

放大得太远了，这是可能的最远变焦。此外，如您所见，在我手机的屏幕截图中，显示了表格的左上角。例如，如果您查看左上角的单元格，您可以看到在手机中它被调整为 10 行不可读，而在计算机中它是 2 可读行。

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:06:09.200

要设置 WebView 的默认缩放，您可以尝试使用： `timeTable.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);`

[您可以在此处](http://developer.android.com/reference/android/webkit/WebSettings.ZoomDensity.html)找到有关缩放密度的更多信息。提供初始缩放值的其他方法是在 html 代码中使用视口元标记，例如：

`<meta name="viewport" content="initial-scale=1, maximum-scale=1">`

[可以在此处找到](http://blogs.msdn.com/b/iemobile/archive/2010/11/22/the-ie-mobile-viewport-on-windows-phone-7.aspx)有关此标签及其用法的有用信息。

# ruby-on-rails - 订单完成后重定向回“购买”页面

> ID：11989831
> 
> 赞同：1
> 
> 时间：2012-08-16T14:49:01.830
> 
> 标签：ruby-on-rails, ruby, shopify

我继承了一个使用旧版 shopify API 的应用程序，并且我的截止日期是 8 月 21 日，所以我想避免更新 API 来解决问题。

我们是卖电子文件的，目前的采购流程如下：

1.  用户搜索产品并将其放入购物车
2.  用户签出
3.  并在 Shopify 网站上完成购买流程

这一切似乎都很好。我们想要的是将用户重定向回我们的应用程序，并提供有关产品成功购买（或失败）的信息。目前，我们不知道用户购买了哪些产品，因此我们无法为他们提供下载文档的链接。

是否有一些参数我们可以传递给 shopify 以创建重定向，或者我们是否需要对过去购买的 API 执行 ping 操作，或者我们是否缺少其他一些步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:51:52.813

这很简单...... Shopify 在管理员（结帐和付款）中为您提供了一个 textarea 元素，您可以在其中粘贴代码。在此代码中，您可以访问整个订单内容。您可以使用 Liquid 解决此问题。

您所要做的就是呈现一个指向您的应用程序的链接，并通过该链接将订单详细信息传递给应用程序。现在，您的客户将看到“感谢您的购买”，以及一个按钮/链接，可单击以完成您希望的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:23:34.347

好的，事实证明我正在寻找的是shopify Webhooks：[http ://wiki.shopify.com/WebHook](http://wiki.shopify.com/WebHook)

该应用程序似乎已经设置为发送 order_create 和 order_payed，我们所要做的就是捕获发送给我们的数据。

# iphone - SOAP 关键字的 SudzC 问题

> ID：11989836
> 
> 赞同：0
> 
> 时间：2012-08-16T14:49:16.597
> 
> 标签：iphone, ios, soap, sudzc

我有这样的回应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:SurfaceElementListResponse xmlns:ns2="http://isiows.isiom.fr/schema/DmdCreation" xmlns:ns3="http://isiows.isiom.fr/schema/Error" xmlns:ns4="http://isiows.isiom.fr/schema/DmdDetail">
         <SurfaceElementListResult>
            <idSurfaceElement>9482</idSurfaceElement>
            <name>R04-</name>
            <type>NIVEAU</type>
         </SurfaceElementListResult>
         <SurfaceElementListResult>
            <idSurfaceElement>9486</idSurfaceElement>
            <name>Zone A</name>
            <type>ZONE</type>
         </SurfaceElementListResult>
      </ns2:SurfaceElementListResponse>
   </soap:Body>
</soap:Envelope> 
```

我正在等待将每个对象反序列化为 NSDictionary，因为它适用于除上述之外的所有其他 WS 响应。与其他响应相比，在 SOAP.m:`+ (id) deserialize: (CXMLNode*) element`方法中，语句的所有响应都`NSString* type = [Soap getNodeValue:element withName:@"type"];`返回 nil，所以它继续返回`[Soap deserializeAsDictionary:element];`，我得到了必要的结果。在我的情况下，当我到达`NSString* type = [Soap getNodeValue:element withName:@"type"];`该语句时，第一个对象返回“NIVEAU”，另一个对象返回“ZONE”，这不允许应用程序运行并执行`[Soap deserializeAsDictionary:element];`，我得到一个字符串对象而不是 NSDictionary 作为解析结果。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:00:01.463

在

```
// Deserialize an object as a generic object
+ (id) deserialize: (CXMLNode*) element{

    // Get the type
    NSString* type = [Soap getNodeValue:element withName:@"type"]; 
```

调查 [Soap getNodeValue]... 我发现，这个函数的使用太笼统了。它用于获取字段的属性，作为字段的值。

```
// Gets the value of a named node from a parent node.

+ (NSString*) getNodeValue: (CXMLNode*) node withName: (NSString*) name {

    // Set up the variables
    if(node == nil || name == nil) { return nil; }
    CXMLNode* child = nil;

    // If it's an attribute get it
    if([node isKindOfClass: [CXMLElement class]])
    {
        child = [(CXMLElement*)node attributeForName: name];
        if(child != nil) {
            return [child stringValue];
        }
    }

    // Otherwise get the first element
    child = [Soap getNode: node withName: name];
    if(child != nil) {
        return [child stringValue];
    }
    return nil;
} 
```

在这种情况下，我创建了一个只获取属性值的新方法：

```
// Gets the value of a node attribute
+ (NSString*) getNodeAttributeValue: (CXMLNode*) node withName: (NSString*) name{
    // Set up the variables
    if(node == nil || name == nil) { return nil; }
    CXMLNode* child = nil;

    // If it's an attribute get it
    if([node isKindOfClass: [CXMLElement class]])
    {
        child = [(CXMLElement*)node attributeForName: name];
        if(child != nil) {
            return [child stringValue];
        }
    }
    return nil;
} 
```

并在 Soap:deserialize 中替换它：

```
// Deserialize an object as a generic object
+ (id) deserialize: (CXMLNode*) element{

    // Get the type
    NSString* type = [Soap getNodeAttributeValue:element withName:@"type"];
//  NSString* type = [Soap getNodeValue:element withName:@"type"];
    if(type == nil || type.length == 0) { 
```

到目前为止，它对我来说非常有效。希望它能帮助其他有同样情况的人。

# c# - 在 Unity IoC 上注册所有存储库和服务

> ID：11989842
> 
> 赞同：0
> 
> 时间：2012-08-16T14:49:43.980
> 
> 标签：c#, .net, inversion-of-control, unity-container

我有一个 C#/asp.net mvc 应用程序，我正在尝试使用 MS Unity 实现 IoC。我的应用程序有一些`Services`依赖于NHibernate 的`Repositories`依赖。`ISessionFactory`我的 IoC 工作正常，但我的应用程序正在成长，我不想在容器上注册每个服务和存储库，所以我想知道如何自动完成？有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:55:49.920

您可以尝试[UnityConfiguration](https://github.com/thedersen/UnityConfiguration)扩展（也可从 NuGet 获得）。它允许一些“基于约定”的映射，我认为您可以设置自定义规则来自动注册映射。

# android - 有没有一种简单的方法可以用 ArrayList 填充 Spinner？

> ID：11989844
> 
> 赞同：2
> 
> 时间：2012-08-16T14:49:56.800
> 
> 标签：android, spinner

我有一堆充满数据的 ArrayList。我要做的就是使用数组列表填充微调器。在其他 SO 问题中，人们创建自己的适配器并将 ArrayList 存储为字段，但我不需要这样做。

我只想填充微调器。我不认为有这么简单的事情，但有什么类似的

```
mySpinner.populate( myList ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:53:29.663

只需使用内置的[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)，您不必编写自定义适配器。

```
List<String> list = new ArrayList<String>();
// Fill list with strings
...

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
Spinner spinner = (Spinner) findViewById(R.id.spinner);
spinner.setAdapter(adapter); 
```

您无需指定使用的数据类型，但这没关系：您可以轻松地将 ArrayAdapter 的子类型更改为`<Integer>`、`<Double>`，甚至自定义类`<Kittens>`（只要定义自定义类的 toString() 方法即可。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:56:11.793

`ArrayAdapters`有一种`add()`方法可以将事物存储到其内部列表中。无需创建自己的。尝试这样的事情：

```
for(Object ob : yourArrayList)
    <arrayAdapter>.add(ob);
<arrayAdapter>.notifyDataSetChanged(); 
```

我会变成你正在使用`Object`的任何集合。`List`

# c# - 如何从javascript postBack检索rowId

> ID：11989848
> 
> 赞同：0
> 
> 时间：2012-08-16T14:50:02.140
> 
> 标签：c#, asp.net

嗨，我在我的 gridview 中绑定，`OnRowCreated`事件到每一行跟随 javascript 代码

```
e.Row.Attributes["onclick"] = ClientScript.GetPostBackClientHyperlink(this.GridViewCategory, "Select$" + e.Row.RowIndex); 
```

现在我的问题是如何`rowIndex`在回发中检索它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:57:03.560

处理[SelectedIndexChanging](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanging.aspx)事件

# java - JSON 解析器错误

> ID：11989852
> 
> 赞同：1
> 
> 时间：2012-08-16T14:50:26.683
> 
> 标签：java, android, json

每次尝试从 android 连接到 php 帐户时，我都会收到 JSON 解析器错误。下面你会看到我得到的错误：

```
08-16 10:45:23.002: E/JSON Parser(848): Error parsing data org.json.JSONException: Value <br of type java.lang.String cannot be converted to JSONObject 
```

有人能帮助我吗...

PHP代码：

```
else{
            //Store user
            $user = $db->storeUser($name, $email, $password);
            if ($user) {
                // user stored successfully
                $response["success"] = 1;
                $response["uid"] = $user["unique_id"];
                $response["user"]["name"] = $user["name"];
                $response["user"]["email"] = $user["email"];
                $response["user"]["created_at"] = $user["created_at"];
                $response["user"]["updated_at"] = $user["updated_at"];
                echo json_encode($response);
            }else{
                //User failed to store
                $response["error"] = 1;
                $response["error_msg"] = "Oops something went wrong! Please try late.";
                echo json_encode($response);
            } 
```

安卓代码： 安卓代码：

公共 JSONObject getJSONFromUrl（字符串 url，列表参数）{

```
 //making HTTP request
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    BufferedReader reader;
    try {
        reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) !=null){
            sb.append(line + "n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    //Try parse the string to a json object
    try{
        jObj = new JSONObject(json);
    }catch(JSONException e){
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    //return JSON string
    return jObj; 
```

注册用户 JSONObject

```
public JSONObject registerUser(String name, String email, String password){
        //building Parameters
        List<NameValuePair> params = new ArrayList();
        params.add(new BasicNameValuePair("tag", register_tag));
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));

        //Getting JSON object
        JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);

        //return json
        return json;

    } 
```

PhP警告：

```
08-16 10:45:22.990: E/JSON(848): <br />n<b>Warning</b>:  mysql_num_rows() expects parameter 1 to be resource, boolean given in <b>C:\xampp\htdocs\thryfting_api\include\DB_Functions.php</b> on line <b>89</b><br />n{"tag":"register","success":0,"error":1,"error_msg":"Oops something went wrong! Please try late."}n 
```

php代码：

链接 89 是 $no_of_rows

```
public function isUserExisted($email) {
        $result = mysql_query("SELECT email from users WHERE email = ' $email'");
        $no_of_rows = mysql_num_rows($result);
        if ($no_of_rows > 0) {
            // user existed
            return true;
        } else {
            // user not existed
            return false;
        }
    } 
```

用户表结构：

```
create table users(
   uid int(11) primary key auto_increment,
   unique_id varchar(23) not null unique,
   name varchar(50) not null,
   email varchar(100) not null unique,
   encrypted_password varchar(80) not null,
   salt varchar(10) not null,
   created_at datetime,
   updated_at datetime null
); 
```

mysql_错误：

```
08-16 14:09:20.550: E/JSON(1028): <br />n<b>Warning</b>:  mysql_num_rows() expects parameter 1 to be resource, boolean given in <b>C:\xampp\htdocs\thryfting_api\include\DB_Functions.php</b> on line <b>89</b><br />nNo database selected{"tag":"register","success":0,"error":1,"error_msg":"No database selected"}n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:10:25.393

在php中构造之前缺少__

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:08:29.587

正如[tolgap](https://stackoverflow.com/users/1366455/tolgap)在他的评论中指出的那样，你有一些关于“br”的事实看起来你的页面正在发送一个 PHP 错误，它的 HTML 格式（因此是 BR）而不是 JSON 字符串。您应该先尝试修复该错误。

# sql - 分析隐式 CAST

> ID：11989854
> 
> 赞同：5
> 
> 时间：2012-08-16T14:50:32.360
> 
> 标签：sql, sql-server-2005, implicit-conversion, sql-execution-plan

我有一个学术场景，我想知道如何分析。

```
DECLARE @date DATETIME
SET     @date = getDate()
SET     @date = DATEADD(DAY, DATEDIFF(DAY, 0, @date-3), 3) 
```

这会将日期四舍五入到星期四。

我一直面临的挑战是证明存在*隐式*CAST。

我认为这必须发生的三个地方......

```
DATEADD(
  DAY,
  DATEDIFF(
    DAY,
    0,          -- Implicitly CAST to a DATETIME?
    @date-3     -- I presume the `3` is being implicitly cast to a DATETIME?
  ),
  3             -- Another implicit CAST to a DATETIME?
) 
```

然而，也许由于`0`and`3`是常量，这是在编译到执行计划期间完成的？

但是如果`3`'s 是 INT 变量，那会有所不同吗？

有没有办法分析执行计划或其他方法，以便能够确定这一点？

更复杂的是，我目前不在现场。我正在尝试远程协助一位同事。这意味着我无法直接访问 SSMS 等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T14:58:36.690

对于查询

```
DECLARE @date DATETIME  = getDate()
DECLARE @N INT = 3

SELECT  DATEADD(DAY, DATEDIFF(DAY, 0, @date-3), 3)
FROM master..spt_values

SELECT  DATEADD(DAY, DATEDIFF(DAY, 0, @date-@N), @N)
FROM master..spt_values 
```

查看执行计划，计算标量显示以下内容。

### 查询 1

```
[Expr1003] = Scalar Operator(dateadd(day,datediff(day,'1900-01-01 00:00:00.000',[@date]-'1900-01-04 00:00:00.000'),'1900-01-04 00:00:00.000')) 
```

### 查询 2

```
[Expr1003] = Scalar Operator(dateadd(day,datediff(day,'1900-01-01 00:00:00.000',[@date]-CONVERT_IMPLICIT(datetime,[@N],0)),CONVERT_IMPLICIT(datetime,[@N],0))) 
```

表明您的怀疑是正确的，它发生在文字值的编译时，但`CONVERT_IMPLICIT`int 变量需要在运行时

# security - 人工验证

> ID：11989856
> 
> 赞同：1
> 
> 时间：2012-08-16T14:50:42.343
> 
> 标签：security, captcha

`Enter certain text to verify you are human`

我在许多网站上都观察到了这一点，包括 SO。我对黑客一无所知，但我不明白为什么需要它？特别是在 SO 中进行编辑时，有时它会要求输入一些文本以验证它是否是人类。我的意思是，计算机程序（为此类黑客设计）如何进行编辑（根据 SO 的规则和限制编辑），然后保存？

是不是有什么其他的原因，这些验证的东西是在哪个网站上加的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:53:33.460

可以编写进行编辑的脚本并保存它们。如果有人想通过这样做来淹没某个特定的网站，他可以通过发布垃圾邮件等方式来做到这一点。为避免此类攻击，提供了诸如“输入某些文本以验证您是否是人类”之类的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:58:20.420

SO 并不神奇，它只是接收一些 HTTP 帖子，并对其做出响应。事实上，它甚至不会阻止我编写脚本，尽管如果某些东西表明脚本很糟糕（每分钟有很多帖子，很多重复），它会抛出验证步骤。（另外，请不要将讨厌的技巧称为“黑客”，这不礼貌）。

编辑：如何从脚本中重复上述内容，使其看起来像我做的那样，编辑出来：

```
POST http://stackoverflow.com/questions/11989856/answer/submit HTTP/1.1
Host: stackoverflow.com
User-Agent: Mozilla/5.0 (Windows NT 6.0; rv:14.0) Gecko/20100101 Firefox/14.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-IE,en;q=0.8,en-gb;q=0.5,en-us;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://stackoverflow.com/questions/11989856/human-verfication
Cookie: [THIS BIT EDITED OUT]
Content-Type: application/x-www-form-urlencoded
Content-Length: 471

post-text=SO+isn%27t+magic%2C+it%27s+just+receiving+some+HTTP+posts%2C+and+responding+to+them.+Indeed%2C+it+won%27t+even+stop+me+from+writing+a+script%2C+though+it+will+throw+up+the+verification+step+if+something+indicates+a+nasty+script+%28lots+of+posts+per+minute%2C+lots+of+repetition%29.+%28Also%2C+please+don%27t+call+nasty+tricks+%22hacking%22%2C+it%27s+not+polite%29.&fkey=[THIS BIT EDITED OUT]&author=&i1l=[THIS BIT EDITED OUT] 
```

我的浏览器将其发送到该站点。发送类似的东西，你就会发布到这个线程。

# apache - 将 http 流量转发到在虚拟内部网络上运行的 Web 服务器

> ID：11989859
> 
> 赞同：1
> 
> 时间：2012-08-16T14:50:51.500
> 
> 标签：apache, proxy, virtualbox, mod-proxy

我正在使用 Debian 来宾在 OSX 主机上运行 VirtualBox。我使用 Debian 来运行我的开发 LAMP 环境，我希望我的主机端口 80 上的所有流量都自动转发到 Debian 来宾。

目前我的 debian 服务器设置有 2 个网络适配器，一个 Host-Only 和一个 NAT（后者只是为了给它一个互联网连接，它不适合服务器任务）。

在我的 OSX 主机上，我已经像这样配置了 mod_proxy：

`ProxyPass / http://debian/`

（debian 是 debian 客户机的主机名）。这对我有用，因为我的主机与“debian”共享一个内部网络，但是如果我很快想向同事展示一些东西并将我的 url（192.168 等）发送给他们，那么他们就不会那么幸运了。

如何设置我的配置，使我的 OSX apache 服务器基本上充当我的 debian 服务器的完整代理解决方案？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:07:15.100

如果我正确阅读了您的问题，听起来好像您理解`ProxyPass`的工作类似于 HTTP 301/302 状态，这是不正确的。一个 302 HTTP 状态会告诉请求的客户端，“嘿，你自己从其他地址获取这个。” 在这种情况下，`debian`您的同事必须可以看到。

但是，`ProxyPass`（以及一般的反向代理）*为您*建立连接；在这种情况下，客户端不需要（而且通常不需要）直接访问上游服务器`debian`。长话短说，除非我读错了，否则你应该已经很好了，只要你的主机（你的物理机器）上的 Apache 正在监听他们可以看到的 IP 地址。

# java - 休眠Oracle连接错误

> ID：11989861
> 
> 赞同：0
> 
> 时间：2012-08-16T14:50:53.933
> 
> 标签：java, oracle, hibernate

我的应用程序有问题当我尝试从休眠状态访问我的数据库很长时间后没有重新启动 Tomcat 时，我收到此错误：

```
Line 2130 : Exception in thread "OracleTimeoutPollingThread" java.lang.NullPointerException
Line 2131 : at oracle.jdbc.driver.OracleTimeoutPollingThread.pollOnce(OracleTimeoutPollingThread.java:209)
Line 2132 : at oracle.jdbc.driver.OracleTimeoutPollingThread.run(OracleTimeoutPollingThread.java:166)
Line 2133 : #
Line 2134 : # An unexpected error has been detected by HotSpot Virtual Machine:
Line 2135 : #
Line 2136 : # EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d394aca, pid=4160, tid=5848
Line 2137 : #
Line 2138 : # Java VM: Java HotSpot(TM) Server VM (1.5.0_09-b03 mixed mode)
Line 2139 : # Problematic frame:
Line 2140 : # C [tcnative-1.dll+0x4aca]
Line 2141 : #
Line 2142 : # An error report file with more information is saved as hs_err_pid4160.log
Line 2143 : #
Line 2144 : # If you would like to submit a bug report, please visit:
Line 2145 : # http://java.sun.com/webapps/bugreport/crash.jsp
Line 2146 : #
Line 2147 :
Line 2148 : 2012-08-16 13:27:52 Commons Daemon procrun stdout initialized 
```

有人知道我的代码中有什么问题吗？也许是防火墙或其他东西？注意：我在 c3p0 中使用我的连接提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:30:50.953

除非您通过 JNI 使用本机代码，否则您会遇到 jvm 崩溃，这通常是 java 错误。

您的 java 版本比较旧，您应该升级到最新的 1.5 版本，或者如果可以升级到 1.6。

如果您希望我们帮助您，请尝试查看 konstantin 建议的 hs_err_pid4160.log 的内容，以排除一些内存错误配置并将其内容粘贴到此处

# ruby-on-rails-3.2 - Ubuntu 12.04 上 Rails 3.2+ 的任何问题。另外，32位还是64位？

> ID：11989866
> 
> 赞同：0
> 
> 时间：2012-08-16T14:51:22.153
> 
> 标签：ruby-on-rails-3.2, ubuntu-12.04

设置一个新的 Linode 服务器，虽然我在 10.04 LTS 上运气不错，但我决定尝试最新最好的版本。

有人对 12.04 LTS 有任何问题吗？另外，我打算使用 32 位，但默认下载是 64 位，所以我正在重新考虑。有人对使用 64 位有任何意见和警告吗？我知道 Linode 说它一般推荐 32 个发行版...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T16:44:14.583

我选择了 12.04 LTS 64 位。没有问题。使用 SQL Server 和 NGINX 成功运行 Rails 3.2。

# python - 我的 self.error() 是否在 Google App Engine 中被覆盖？

> ID：11989868
> 
> 赞同：0
> 
> 时间：2012-08-16T14:51:24.247
> 
> 标签：python, google-app-engine, http

在我的 Google App Engine 应用程序中，我有一个带有 PUT 请求方法的处理程序：

```
def postMethod(self, arg):
    response = do_backend_work(arg)
    if response.field is None:
        self.error(502)
        self.response.out.write(json.dumps(
                {'message': "you've been a bad boy!"}))
    else:
        <deal with well-formatted requests here>
         .
         .
         . 
```

但是，当我收到一个请求时，请求在哪里`response.field`返回`None`为 200。当我发现这个错误时，我`raise Exception(str(self.response))`在块之前插入`else`作为健全性检查，并在日志中发现了这一点：

```
raise Exception(str(self.response))
Exception: 502 Bad Gateway
Content-Type: text/html; charset=utf-8
Cache-Control: no-cache
Content-Length: 63

{"message": "you've been a bad boy!"}
INFO 2012-08-15 23:25:12,239 dev_appserver.py:2952] 
"PUT /url/resource HTTP/1.1" 200  - 
```

关于 App Engine 如何处理请求，我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:51:24.247

经过一番摸索，我发现了问题所在。在我的`do_backend_work`函数中，有一个流氓打印语句劫持了输出流！这个故事的寓意是：不要在您的 Google App Engine 后端写入标准输出。我发布这个问题是为了后代的利益。

# android - 谷歌地图中地址的地理编码列表

> ID：11989874
> 
> 赞同：0
> 
> 时间：2012-08-16T14:51:32.550
> 
> 标签：android, google-maps-api-3

我正在尝试使用**Google Maps API**制作一个小型应用程序。

它将显示一个区域中的每个快餐店位置。我知道已经有一些应用程序可以做同样的事情，但*我想学习并做我自己的事情*:)。

例如，我有一个包含 1000 个地址的列表，我希望*每个*地址都显示在地图上。小号

*   每次用户想要使用我的应用程序时，我的应用程序是否应该向 Google 发送 1000 次位置的经度和纬度请求？

*   或者我应该将经度和纬度存储在我的数据库中吗？如果是这样，*有没有办法通过请求获得它们？*我知道有一种方法可以一个一个获得，而不是全部获得。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:55:14.130

Geocoder API 对每个 API 密钥有一个请求限制（您必须获得其中一个）：每天 2500 次左右。我建议您使用地理编码器获取所有地址的纬度和经度并将它们保存到 SQLite，这样您就可以一直重复使用这些位置。只需编写一个遍历所有地址的循环，向谷歌发出请求并存储纬度/经度信息。如果你达到了他们的限制，你可以在第二天继续。

# qt - 我们可以在 Qt 中编写一个谷歌文档表单吗？

> ID：11989875
> 
> 赞同：1
> 
> 时间：2012-08-16T14:51:32.833
> 
> 标签：qt, google-docs-api

我正在 Qt 中开发一个应用程序，并希望自动写入 Google Doc 表单作为结果。可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:54:54.567

这取决于 Google Docs API，而不是 qt。从中猜测，似乎有可能[：](https://developers.google.com/google-apps/documents-list/#what_can_this_api_do)

> Google Documents List API 允许开发人员创建、检索、更新和删除 Google Docs（包括但不限于文本文档、电子表格、演示文稿和绘图）、文件和集合。

# wso2 - WSO2 ESB 4.0.3 代理服务问题：找不到操作的端点参考 (EPR)

> ID：11989880
> 
> 赞同：0
> 
> 时间：2012-08-16T14:51:41.007
> 
> 标签：wso2, task, wso2esb, esb, endpoint

您好我试图创建一个指向以下端点的代理“myfirst_proxy”：test_myapp

此端点指向`http://server1/myapp/service/test.php?wsdl`（我测试了 url，它返回成功）

我创建了一个序列：记录并删除并将其添加到代理配置中的输出序列中。

我添加了一个计划任务，在 9 点后每 2 分钟运行一次，只是为了测试：

```
 <task name="testtask" class="org.apache.synapse.startup.tasks.MessageInjector" group="synapse.simple.quartz">
    <trigger cron="0 0/2 9 * * ?"/>
    <property xmlns:task="http://www.wso2.org/products/wso2commons/tasks" name="message">
        <sendText xmlns=""/>
    </property>
    <property xmlns:task="http://www.wso2.org/products/wso2commons/tasks" name="to" value="http://myesbserver:8280/services/myfirst_proxy"/>
    <property xmlns:task="http://www.wso2.org/products/wso2commons/tasks" name="soapAction" value="urn:MYAPP#sendText"/>
    <property xmlns:task="http://www.wso2.org/products/wso2commons/tasks" name="format" value="soap11"/>
</task> 
```

现在，当我访问时，`http://myesbserver:8280/services/myfirst_proxy` 我将收到以下错误：未找到操作的端点引用 (EPR) 是 /services/myfirst_proxy 并且 WSA Action = null。如果此 EPR 以前可以访问

但是当我在末尾添加 ?wsdl 时，我看到了 WSDL 文件。

在日志文件中，我看到执行了以下计划任务：

```
INFO - LogMediator To: http://myesbserver:8280/services/myfirst_proxy, WSAction: urn:MYAPP#sendText, SOAPAction: urn:SLATE#sendText, MessageID: urn:uuid:87b2695a-ce95-43fa-b7d2-3d638c3d5f20, Direction: request, Envelope: <?xml version='1.0' encoding='utf-8'?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><sendApproval/></soapenv:Body></soapenv:Envelope> 
```

我检查了应用服务器是否收到来自 ESB 代理的任何请求，但没有，我使用 ESB 附带的 Try 工具，将字符串放在正文标签之间并运行它。响应成功。

所以我的问题是，我是否错过了允许我的任务与远程 WSDL 对话的步骤？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:22:16.597

嗨，您的端点 url 错误..它应该指向实际的服务端点..不是 wsdl url.. 可能是这样；

```
http://server1/myapp/service/test.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T11:21:47.457

定义这样的任务..

```
 <task name="testtask" class="org.apache.synapse.startup.tasks.MessageInjector" group="synapse.simple.quartz">

    <property xmlns:task="http://www.wso2.org/products/wso2commons/tasks" name="to" value="http://myesbserver:8280/services/myfirst_proxy/getparam?a=1"/>  
        </task> 
```

然后在主序路由中代理；

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="main">
   <in>
      <log level="full"/>
      <filter xmlns:ns="http://org.apache.synapse/xsd"
              xmlns:ns3="http://org.apache.synapse/xsd"
              source="get-property('To')"
              regex=".*/myfirst_proxy.*">
         <then>
            <property name="OUT_ONLY" value="true"/>
            <property name="FORCE_SC_ACCEPTED" value="true" scope="axis2"/>
            <log level="custom">
               <property name="***********MESSAGE******" value="executing myfirst Proxy Sequence"/>
            </log>
            <send/>
            <drop/>
         </then>
         <else/>
      </filter> 
```

# c++ - 仅 Directshow 预览以及使用单个图表进行捕获和预览

> ID：11989883
> 
> 赞同：1
> 
> 时间：2012-08-16T14:51:57.330
> 
> 标签：c++, video, directshow, capture, preview

我有一个需要预览网络摄像头视频的 Directshow 应用程序，当用户单击“录制”时，它需要开始将视频捕获到文件中。

为此，我创建了一个捕获图，其中 PREVIEW 引脚连接到 RENDER 过滤器，CAPTURE 引脚连接到保存到文件的 AVI_MUX 过滤器。

它看起来像这样：

```
 /[PREVIEW PIN]-->[VIDEO_RENDERER]--->[SCREEN]
[VIDEO CAPTURE FILTER] /
                       \
                        \[CAPTURE PIN]--->[AVI_MUX]--->[FILE WRITER] 
```

当我在图表上调用 Run() 时，视频会显示在屏幕上并正确保存到文件中。

我的问题是，我怎样才能只运行图表的 PREVIEW PIN 部分而没有 CAPTURE_PIN 部分。

我最初的想法是手动启动/停止相应的过滤器，但后来我查看了 Microsoft 的 Directshow amcap 示例，它们实际上创建了两个单独的图表。一个用于预览，一个用于捕获。如果用户想要预览视频，他们会破坏捕获图并创建预览图。如果用户想要录制视频，他们会破坏预览图并创建捕获图。

这似乎有点浪费，特别是因为单个图表已经包含 PREVIEW 和 CAPTURE 引脚。这里的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:49:19.487

过滤器图可以作为一个整体改变状态，你不能单独和分开运行它的部分。

最简单的解决方案是单独构建预览图，当您需要开始录制时，停止/关闭预览图并重建新的捕获图。这肯定会涉及响应“开始录制”命令的一定延迟。

另一种选择是使用多个图表，在两者之间共享数据，在代码中或使用[“桥接”](http://www.gdcl.co.uk/gmfbridge/)，并分别启动/停止图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T07:04:37.263

您可以尝试在两个不同的图表之间切换：

1）第一个简单的图表，而不是用户只看

2）第二个复杂图，比用户同时观看和记录

# html - 如何使 ul 居中

> ID：11989884
> 
> 赞同：0
> 
> 时间：2012-08-16T14:51:58.143
> 
> 标签：html, css

我试图`ul`在空间内水平居中，但无论我尝试什么，它都保持左对齐。

```
<nav>
    <div id="home">
    <ul id="topnav">
        <li class="home"><a href="#">home</a></li>
        <li class="products"><a href="#">products</a></li>
        <li class="support"><a href="#">support</a></li>
        <li class="wtb"><a href="#">where to buy</a></li>
        <li class="webstore"><a href="#" target="_blank">web store</a></li>
        <li class="contact"><a href="#">contact us</a></li>
        <li class="facebook"><a href="#" target="_blank"
            title="Hauppauge Computer Works">facebook</a></li>
    </ul>
    </div>
</nav> 
```

CSS： [这里的 CSS 文件](http://www.hauppauge.com/css/nav-sprite-styles2.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:55:29.827

```
ul#topnav {
    padding: 0px;
    list-style: none;
    margin-right: auto;
    margin-left: auto;
    margin-top: 0px;
    margin-bottom: 0px;
    position: relative;
    left: auto;
        width: 123px;
} 
```

# google-chrome - 将图标添加到多功能框的 Chrome 扩展程序

> ID：11989886
> 
> 赞同：4
> 
> 时间：2012-08-16T14:52:05.753
> 
> 标签：google-chrome, google-chrome-extension

我已经做了很多谷歌搜索，并且对此有所了解。我觉得我以前见过它，但我在我的武器库中找不到任何允许这样做的扩展。

我想做的是有一个 chrome 扩展，可以在 chrome 的多功能框右侧放置一个图标（或文本，甚至更好）。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T16:00:53.077

您要查找的内容称为[Page Action](http://developer.chrome.com/extensions/pageAction.html)。

我们应该在哪个应用程序中使用页面操作？如果您想将扩展程序的功能添加到几个特定页面，请使用页面操作。否则，如果您想在大多数页面中添加功能，请改用[浏览器操作](http://developer.chrome.com/extensions/browserAction.html)。无法在页面操作中添加文本，但可以通过使用徽章（在图标上分层的一点文本）在浏览器操作中添加限制。

这种扩展的一些很好的例子可以帮助你描绘这个概念：

*   [谷歌的 RSS 订阅扩展](https://chrome.google.com/webstore/detail/nlbjncdgjeocebhnmkbbbdekmmmcbfjd)。此扩展仅在找到页面上的 RSS 提要时才注入
*   [谷歌浏览器的歌词](https://chrome.google.com/webstore/detail/oglbipcbkmlknhfhabolnniekmlhfoek)。此扩展仅将其脚本注入 YouTube 页面，在视频旁边创建一个新 div 以显示音乐 vid 的歌词。

# php - iPhone/PHP：缓存 XML 结果

> ID：11989887
> 
> 赞同：0
> 
> 时间：2012-08-16T14:52:05.663
> 
> 标签：php, iphone, ios, xml

好吧，我的问题很奇怪，因为它真的没有意义。

1）我有一个PHP脚本，它带来了一个XML，其中一些信息存储在我的MySQL数据库中；

2）当我第一次使用这个脚本（或任何其他脚本）时，它会给我带来所有更新的信息（所有注册表都插入到那一刻）；

3）当我再次使用这个脚本（或任何其他）时，无论我的数据库中有多少新的注册表，它只会给我带来我第一次使用脚本时带来的注册表；

*我已经在我的浏览器上测试了这个脚本，它工作正常，总是带来数据库的最新状态。

我能做些什么？谢谢。

**编辑：**

1）我如何调用 XML 解析器：

```
NSString *strURL = @"localhost/scripts/bringmethexml-x5.php";
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

XMLProcessor *processor = [[XMLProcessor alloc]initProcessor];
[processor syncProcessorWithData:dataURL];
NSMutableArray *a = processor.xmlObjects; 
```

2）我的PHP脚本：

```
<?php
    header("Content-type: text/xml");
    echo "<?xml version=\"1.0\" encoding=\"LATIN-1\"?>";
    echo "<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">";
    echo "<plist version=\"1.0\">";

    function getXML($sql="SELECT user FROM database.Posts"){

        $conn   = mysql_connect ("localhost", "user", "password");
        $db     = mysql_select_db("database");
        $result = mysql_query($sql, $conn);
        $column = "";
        echo "<array>";

        while($row = mysql_fetch_assoc($result)){
        $column .= "<dict>";
            foreach ($row as $key => $value){
                $column .= "<key>$key</key>";
                $column .= "<string>$value</string>";
            }
            $column .= "</dict>";
        }

        echo $column;
        echo "</array>";
        echo "</plist>";
    }       
    getXML("SELECT user as USER, msg as MESSAGE, hashtag_1 as ST1, hashtag_2 as ST2, hashtag_3 as ST3, hashtag_4 as ST4, hashtag_5 as ST5, date as DATEPOSTED, coordinate_lat as COORLAT, coordinate_lon as COORLON FROM database.Posts;");
    mysql_close();
?> 
```

3) 我的 XML 是如何输出的：

```
<?xml version="1.0" encoding="LATIN-1"?><!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
    <array>
    <dict>
        <key>(key || nome da fileira do db)</key>
            <string>(valor||object)</string>
        <key>(key || nome da fileira do db)</key>
            <string>(valor||object)</string>
    </dict>
    <dict>
        <key>(key || nome da fileira do db)</key>
            <string>(valor||object)</string>
        <key>(key || nome da fileira do db)</key>
            <string>(valor||object)</string>
    </dict>
    </array>
</plist> 
```

4) XMLProcessor 是我制作的解析器，它从 NSURL 获取 NSData，然后将其转换为字符串，然后我对其进行解析以适应 NSMutableDictionary，这是该类的链接：

[http://www66.zippyshare.com/v/7711833/file.html](http://www66.zippyshare.com/v/7711833/file.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:21:09.943

解决此问题的一种简单但稍微有点笨拙的方法是向您不真正用于任何事情的 url 添加一个随机变量。

例如[http://www.yourwebsite.com/somestuff.xml?random=343453](http://www.yourwebsite.com/somestuff.xml?random=343453)

因为每次的url都不一样，所以不会使用缓存。

你也可以通过添加一个锚来做到这一点：[http ://www.yourwebsite.com/somestuff.xml#623764527](http://www.yourwebsite.com/somestuff.xml#623764527)

这是一个自动化它的功能，只需将其应用于您的 nsstring URLS

```
yourURL = [self getUniqueURL:yourURL];

-(NSString*)getUniqueURL:(NSString*)originalURL
{

    NSInteger random = (arc4random() % 100000000) + 1;

    NSString* uniqueURL = [NSString stringWithFormat:@"%@#%d",originalURL,random];

    return uniqueURL;

} 
```

# java - 从字符串到浮点的奇怪转换

> ID：11989890
> 
> 赞同：0
> 
> 时间：2012-08-16T14:52:14.600
> 
> 标签：java, javascript, android, jquery, string

我有一个带有 javascript 接口的 webview。

在这个 webview 中，我执行某些 javascript 操作。

在其中一个中，我为我的 web 内容中的一个元素设置了 onclick 属性。（使用jQuery）

```
button.attr("onclick", "Android.doStuff(".concat(stringContainingOnlyNumbers).concat(")")); 
```

正如您可能猜到的那样，变量 stringContainingOnlyNumbers 包含一个仅包含数字的字符串。

Android 是我的 javascript 界面的关键字。

如果我单击我操作的按钮，doStuff 方法将在界面上被调用。

到目前为止一切都很好。

但是 String Parameter 持有的东西看起来像一个浮点值。

所以在 js 端看起来像这样：

```
1344810353 
```

像这样出现在我的界面上：

```
1.34447e+09 
```

谁能在这里帮我解释一下为什么会发生这种转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:03:23.927

这并不是真正的转换，它只是使用科学记数法将其重写为更少的十进制数字。
1344810353 四舍五入为 1.34447e+09，即 1.34447 * 10^9。

它是一个浮点数，当将数字连接为字符串时，javascript 倾向于缩短数字。
这是一个示例： http: [//jsfiddle.net/YGC8B/](http://jsfiddle.net/YGC8B/)

您可以通过遍历数字并一一显示来解决此问题。

```
function getString(number) {
    var numstring = "";
    var num = number;
    while (num > 0) {
        numstring = num % 10 + numstring;
        num -= num % 10;
        num /= 10;
    }
    return numstring;
}
var number = 1344810353;
log(getString(number)); // or however your output it 
```

这是一个工作示例： http: [//jsfiddle.net/Tj5Zy/](http://jsfiddle.net/Tj5Zy/)

旁注：

最好不要使用元素的**onclick**属性，它已被略微弃用。我建议附上活动。
而且由于您使用的是 jQuery，所以一切都变得更加简单。

```
button.bind('click',function() {
    Android.doStuff(stringContainingOnlyNumbers);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:01:31.293

发生的事情不是转换为浮点数，但是您得到了该整数的科学记数法。它必须发生在 concat 中。你不能做这样的事情：

```
button.attr("onclick", "Android.doStuff(" + stringContainingOnlyNumbers + ")"); 
```

?

# c# - 将 \\ 替换为 \ 失败

> ID：11989891
> 
> 赞同：1
> 
> 时间：2012-08-16T14:52:17.750
> 
> 标签：c#, string

```
string DownloadDirectoryPath = @"C:\\Program Files\\companyname\\productname\\username\\0\\2012081617085746" 
```

（这是我从 sql 服务器获得的路径）但我的应用程序使用单斜杠，所以我尝试使用

```
DownloadDirectoryPath= DownloadDirectoryPath.Replace(@"\\", @"\"); 
```

但这不起作用，我得到相同的字符串。有什么建议吗？

请注意：

上面的值是我在监视窗口中看到的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:53:19.417

您的 DownloadDirectoryPath 值前面没有@，因此实际上没有任何 \\'s，只有 \'s

做一个 console.WriteLine(DownloadDirectoryPath) 来检查它到底有什么。

编辑（OP更新问题）：

如果在调试时将鼠标悬停在包含它的变量上（或使用监视窗口），那么 VS 将显示单个 \ 作为 \\ 以消除它与转义字符的歧义。将其写入控制台、文件或其他输出以检查它的真实情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:07:07.890

`@`告诉编译器逐字读取字符串。编写用于解释字符串的 SQL 的人。为了使用您所拥有的内容，请移除`@`

`string DownloadDirectoryPath = "C:\\Program Files\\companyname\\productname\\username\\0\\2012081617085746"`

另请注意，当您在调试器监视窗口中看到逐字字符串时，您将看到编译器添加的转义字符，而不是源代码中的逐字版本。

# asp.net-mvc-3 - 从磁盘上的文件读取与缓存 - 什么会更好？

> ID：11989893
> 
> 赞同：1
> 
> 时间：2012-08-16T14:52:22.763
> 
> 标签：asp.net-mvc-3, performance, outputcache

我对此不太确定，因此寻找最佳实践而不是实施。考虑到性能方面，这对我们来说确实非常重要。

我有一个网站，每天点击数百万。除了用于托管静态内容的 CDN 之外，在网站上我还有一个大型菜单，它基本上是从静态文件中读取的（将其视为 xml/html）。因此，对于每个访问者/页面视图，都会点击该文件并执行文件读取操作，然后将其呈现。

现在，如果我将静态文件的相同内容存储到输出缓存中，可以减少文件读取。我可以设置它每小时过期一次，这样它就可以保持新鲜。

它是否会有任何性能提升，因为每次点击都不需要读取操作？你怎么看？

**更新**

只是补充一点，我正在使用 razor 引擎在 ASP.net MVC3 C# 平台之上构建一个非常繁忙的网站。无论需要什么实现，都需要考虑 IIS7 /.net 支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:09:36.077

缓存代理将为您完成几乎相同的工作。
我（个人）不会使用 RAM 磁盘选项，因为它增加了文件系统访问的开销（显然它比真正的 FS 更快，但您仍然必须每次都读取目录结构才能访问文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T14:59:24.680

您可以设置一个 ramdisk 来存储大量读取的文件。这可以在 GNU/Linux 上很容易地完成，而且我听说它在 Windows 上也是可行的。

# c# - 在不同的 AppDomain 中加载具有依赖项的程序集

> ID：11989896
> 
> 赞同：3
> 
> 时间：2012-08-16T14:52:31.140
> 
> 标签：c#, clr, appdomain, appdomainsetup

我的目标是在 2 个给定文件夹之间进行缺失的依赖检查。想象一下以下设置。

根\DirA\A.dll

根\DirB\B.dll

B依赖于A。

因此，鉴于这些文件夹，我想创建一个新的 AppDomain，加载 B.dll 并在新的 AppDomain 中自动解析和隔离来自 DirA(A.dll) 的依赖项。

隔离是这里的关键，因为当我卸载这个 AppDomain 时，我想创建一个新的 AppDomain 可能再次作为依赖项，但是 DirC 库需要它，所以在 DirC 也依赖于 DirB 的情况下，我希望它抛出一个例外。

编辑：添加一个代码示例以帮助更好地描述我的问题。

```
AppDomainSetup setup = new AppDomainSetup();
setup.ApplicationBase = @"C:\Root";
setup.ApplicationName = "Isolated Domain"
setup.PrivateBinPath = @"DirA;DirB";
setup.PrivateBinPathProbe = "";//disable search in AppBase..
var domain = AppDomain.CreateDomain(Guid.NewGuid().ToString(),
                                    AppDomain.CurrentDomain.Evidence,
                                    setup,
                                    AppDomain.CurrentDomain.PermissionSet);
//The following statement in theory should pick B.dll's dependency from DirA.
var assembly = domain.Load(AssemblyName.GetAssemblyName(@"C:\Root\DirB\B.dll").Name);
//Do the same in a different domain for C.dll 
```

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T16:11:25.820

这看起来像是[ResolveEventHandler的工作（](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx) [MSDN 上有关解决未知程序集](http://msdn.microsoft.com/en-us/library/ff527268.aspx)的更多详细信息）

所以，你可以写类似

```
class MyResolver
{
  public static Assembly MyResolveEventHandler( Object sender, ResolveEventArgs args )
  {
    // confirm args.Name contains A.dll
    String dllName = args.Name.Split({','}, SplitStringOptions.None)[0];
    if (dllName == "A")
    {
      return Assembly.LoadFile(@"C:\Root\DirA\A.dll")
    }
    return null;
  }
} 
```

在您创建的域中，您将执行以下操作：

```
domain.AssemblyResolve += new ResolveEventHandler(MyResolver.MyResolveEventHandler); 
```

确保在 B 中引用 A 之前绑定事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:00:18.637

AppDomain 无法探测初始文件夹之外的 dll。他们可以在 GAC 和 PrivateBinPath 中更深入地探测文件夹，但不能探测其他文件夹。

# c# - 如何使用 AForge 将 RGB 值转换为 YCbCr

> ID：11989901
> 
> 赞同：0
> 
> 时间：2012-08-16T14:52:43.823
> 
> 标签：c#, colors, aforge

我正在尝试将 RGB 值转换为 YCbCr 颜色格式。使用 Afroge 库。但它给出了这样的结果，对于 Y：0.611，Cb：0.15，Cr：-0.18。这意味着所有值 < 1。但我需要 0 - 255 之间的值。这是我的代码。

```
 Bitmap bitmap = (Bitmap)pictureBox1.Image;

        double xRatio = (double)bitmap.Width / (double)pictureBox1.Width;
        double yRatio = (double)bitmap.Height / (double)pictureBox1.Height;

        Color gotColor = bitmap.GetPixel((int)((double)mX * xRatio), (int)((double)mY * yRatio));
        label1.Text = (" R : " + gotColor.R);
        label2.Text = (" G : " + gotColor.G);
        label3.Text = (" B : " + gotColor.B);

        YCbCr ycrcb = new YCbCr();
        RGB rgbcolor = new RGB(gotColor);

        ycrcb.Y = YCbCr.FromRGB(rgbcolor).Y;
        ycrcb.Cr = YCbCr.FromRGB(rgbcolor).Cr;
        ycrcb.Cb = YCbCr.FromRGB(rgbcolor).Cb;

        label4.Text = ycrcb.Y.ToString();
        label5.Text = ycrcb.Cr.ToString();
        label6.Text = ycrcb.Cb.ToString(); 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:33:28.523

这些是 YCrCb 的标准范围

但是，您可以将结果重新缩放到 0 - 255 范围内

```
 label4.Text = (ycrcb.Y *255).ToString();
    label5.Text = ((ycrcb.Cr + 0.5)*255).ToString();
    label6.Text = ((ycrcb.Cb + 0.5)*255).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T13:56:31.483

公式为：

```
Y = (byte)((0.299 * red) + (0.587 * green) + (0.114 * blue));
Cb = (byte)(128 - (0.168736 * red) + (0.331264 * green) + (0.5 * blue));
Cr = (byte)(128 + (0.5 * red) + (0.418688 * green) + (0.081312 * blue)); 
```

并且你可以使用jpg格式的YCbCr。结果值介于 0 和 255 之间。

# javascript - Google Chrome 地址栏正在捕获文本输入框的 Keyup 事件

> ID：11989902
> 
> 赞同：1
> 
> 时间：2012-08-16T14:52:46.287
> 
> 标签：javascript, jquery, google-chrome

当用户按下返回键时，我正在使用 keyup 事件来触发与单击搜索按钮相同的事件。单击搜索按钮时，它使用 Ajax 请求在页面上加载搜索结果。

调用工作正常，但是当我在之前关注输入框之后按下谷歌浏览器地址栏中的返回按钮时，keyup 事件被捕获，例如，如果用户在没有按返回的情况下键入搜索查询，而是去到使用 Google Chrome 地址栏的新网页，当他们在地址栏上按回车键时，我的页面中的搜索将在触发 keyup 事件的同时提交，即使页面，当然还有输入框，应该不再有焦点。

JavaScript

```
$("#search-box").on("keyup", function(event) {
   if(event.keyCode == 13){
       $("#search-submit-btn").click();
   }
}); 
```

HTML

```
<div class="input-append"/>
   <input id="search-box" type="text" />
   <button class="btn" id="search-submit-btn">Search</button>
</div> 
```

我也在使用 Twitter 引导程序来设置输入框的样式，但我认为这不会导致问题。

我已经在 Firefox 和 Safari 中测试了这个页面，没有任何问题。Google Chrome 的 keyup 事件是否有问题/这是一个已知问题吗？我正在努力寻找有关该问题的任何信息。

**编辑**

我想我已经通过使用 keydown 而不是 keyup 解决了我的问题。我还添加了检查元素是否仍然聚焦，但我认为这没有什么不同，因为它仍然具有与 keyup 相同的影响。

```
$("#search-box").on("keydown", function(event) {
    if($("#search-box").is(":focus")){
        if(event.keyCode == 13){
            $("#search-submit-btn").click();
        }
    }
}); 
```

这对我来说似乎是一个不错的解决方案，但它并不能解释为什么 keyup 在 Google Chrome 中的行为如此奇怪。如果有人有更多关于为什么在 Google Chrome 中以这种方式使用 keyup 的信息，或者我只是做错了什么，我很想听听。

# php - PHP google drive api 创建电子表格

> ID：11989906
> 
> 赞同：1
> 
> 时间：2012-08-16T14:52:52.573
> 
> 标签：php, google-drive-api

我需要使用 google drive PHP API 创建电子表格，我该怎么做？我已经有代码，它总是得到无标题文件，当我点击它时，这里没有数据是我的代码：

```
/**
* Insert new file.
*
* @param apiDriveService $service Drive API service instance.
* @param string $title Title of the file to insert, including the extension.
* @param string $description Description of the file to insert.
* @param string $parentId Parent folder's ID.
* @param string $mimeType MIME type of the file to insert.
* @param string $filename Filename of the file to insert.
* @return DriveFile The file that was inserted. NULL is returned if an API error occurred.
*/
function insertFile($service, $title, $description, $parentId, $mimeType, $data) {
$file = new DriveFile();
$file->setTitle($title);
$file->setDescription($description);
$file->setMimeType($mimeType);

// Set the parent folder.
if ($parentId != null) {
    $parentsCollectionData = new DriveFileParentsCollection();
    $parentsCollectionData->setId($parentId);
    $file->setParentsCollection(array($parentsCollectionData));
}

try {

    $createdFile = $service->files->insert($file, array(
        'data' => $data,
        'mimeType' => $mimeType,
    ));

    // Uncomment the following line to print the File ID
    // print 'File ID: %s' % $createdFile->getId();

    print_r($createdFile);
} catch (Exception $e) {
    print "An error occurred: " . $e->getMessage();
}
}
if(isset($_POST['insertFile'])){
$service = new apiDriveService($client);
insertFile($service,'Google Maps Mrakers.txt','ADD Google Map Mrakers To File',NULL,'text/plain',$_POST['data']);
exit;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T15:44:51.137

您遇到此问题是因为您使用的是 PHP 客户端库的过时版本。请将您的客户端同步到项目[存储库](https://code.google.com/p/google-api-php-client/source/checkout)的主干。

您将不得不重新编写一些代码，因为自从您第一次编写代码以来，客户端库已被重构。[Google Drive SDK 文档](https://developers.google.com/drive)中的[参考指南](https://developers.google.com/drive/v2/reference)已更新以反映此重构。

要创建 Google 电子表格，请插入一个没有内容并将其`mimeType`设置为`application/vnd.google-apps.spreadsheet`.

# xml - sql server xml解析

> ID：11989909
> 
> 赞同：1
> 
> 时间：2012-08-16T14:53:01.513
> 
> 标签：xml, sql-server-2008, xml-parsing

请在下面的脚本片段中找到

```
declare @xml xml
set @xml = '<Message>

<MessageData>
  <MessageDataSet >
  <id> 1 </id>
  <name>Vasan</name>     
  </MessageDataSet>  
   <MessageDataSet >

    <id> 2 </id>
    <name>Vivek</name>
  </MessageDataSet>  

</MessageData>

</Message>'

SELECT
t.c.value('(id)[1]','varchar(100)')
from
@xml.nodes('/Message/MessageData/MessageDataSet')  AS t(c) 
```

我得到了所有的“id”节点值，即“1”和“2”。我的需要，我必须直接获取第二个'id'的值，在这种情况下，它将是'2'。任何人都可以让我知道相同的 Select 查询语法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:06:08.420

这个怎么样：

```
SELECT
    @xml.value('(/Message/MessageData/MessageDataSet/id)[2]','varchar(100)') 
```

`2`作为我的值返回。这将抓取该 XML 中的第二个条目 - 如果它不存在，您将返回 NULL。

另外：为什么将其转换为`varchar(100)`-`int`在这里不是更合适的类型？

# java - Weblogic ApplicationLifecycleListener 未触发

> ID：11989911
> 
> 赞同：3
> 
> 时间：2012-08-16T14:53:05.050
> 
> 标签：java, weblogic

我有一个包含 ApplicationLifecycleListener 的 bean。像这样：

```
package vanzylvi.test;

import weblogic.application.ApplicationLifecycleEvent;

import weblogic.application.ApplicationLifecycleListener;

public class TestApplicationListener  extends ApplicationLifecycleListener {

     public void preStart(ApplicationLifecycleEvent evt) {
         System.out.println("preStart GO GO GO");
     }
} 
```

在我的**weblogic-application.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://www.bea.com/ns/weblogic/90">
<listener>
     <listener-class>vanzylvi.test.TestApplicationListener</listener-class>
</listener>
</weblogic-application> 
```

我永远无法启动 preStart 位，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-05T14:46:06.550

可能会稍后为您提供答案，但除非在 WebLogic 12 中，否则还可以设置[侦听器 URI以避免将类文件添加到普通的 ear 文件中：](http://docs.oracle.com/cd/E24329_01/web.1211/e24368/lifecycle.htm#i1049839)

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://www.bea.com/ns/weblogic/90">
<listener>
   <listener-class>vanzylvi.test.TestApplicationListener</listener-class>
   <listener-uri>startup.jar</listener-uri>
</listener>
</weblogic-application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:57:45.070

我很确定问题是 java.lang.ClassNotFoundException 因为我过去遇到过同样的问题。为了修复它，编译 TestApplicationListener 类并将它放在你的 EarContent/APP-INF/classes 下。你的 EarContent/APP-INF/classes 应该包含 vanzylvi/test/TestApplicationListener.class。

您的 weblogic-application.xml 和 TestApplicationListener 是正确的。

我希望这可以帮助你。

# iphone - 有没有办法查看 iOS 应用程序自启动以来的最大内存使用量？

> ID：11989913
> 
> 赞同：3
> 
> 时间：2012-08-16T14:53:06.760
> 
> 标签：iphone, ios, ipad, memory-management, instruments

如果有一个应用程序，我们启动它，我们可以使用 Instruments 逐秒查看内存使用情况，但如果在初始化过程中，内存在一瞬间飙升到 60MB，然后又降下来怎么办？（例如一些大型图形上下文和位图和 CALayers）。

有没有办法查看应用程序启动以来的最大值？我想到了一个穴居人的方法，就是在我们分配了大图形上下文和位图和 CALayers 之后，添加一个虚拟循环，比如一百万或一千万，这样内存使用在几秒钟内是恒定的，并且可以可以在 Instruments 中看到。

但是如果有 5 个图层，我们应该分配一个图形上下文，获取位图，并将其设置到图层，然后立即释放图形上下文，因为它不再需要了，这应该会更好。然后我们继续下一个图形上下文、位图和图层等，而不是创建五个图形上下文、位图，并在最后释放所有五个。但是要执行穴居人方法，我们需要在每次发布之前将虚拟循环添加到所有五个位置。有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:48:47.850

使用 Leaks or Allocations 模板并选择 Allocations 工具。分配工具旁边有一个图表。单击图表上方的时间线并按住鼠标按钮。当您沿着时间线拖动时，Instruments 将向您显示在该时间点分配的内存总量。

Leaks 和 Allocations 模板之间的区别在于 Leaks 模板将 Allocations 工具设置为跟踪所有分配，而 Allocations 模板将 Allocations 工具设置为仅跟踪活动分配。

# php - 读取带括号的标头时，PHP 的 imap_fetch_overview() 函数是否有错误？

> ID：11989915
> 
> 赞同：7
> 
> 时间：2012-08-16T14:53:16.273
> 
> 标签：php, email, email-headers

我正在使用以下代码在 PHP 中发送电子邮件：

```
<?php
error_reporting(E_ALL);

# write mail
###############################################################################
$recipient  = "mail@server.tld";
$subject    = mb_encode_mimeheader("Subject äöü ");
$text       = "Hallo";
$header     = "From:".mb_encode_mimeheader("Name with [], ÄÖÜ and spaces")." <webmaster@example.com>"
                . "\r\n" . "Reply-To: webmaster@example.com"
                . "\r\n" . "X-Mailer: PHP/" . phpversion();

// send e-mail
mail($recipient, $subject, $text, $header);
?> 
```

`imap_fetch_overview()`之后我尝试使用以下代码阅读电子邮件：

```
<?php
# receive mails
###############################################################################
$mailbox        = imap_open("{imap.server.tld/norsh}", "mail@server.tld", "********");

$MC = imap_check($mailbox);
$result = imap_fetch_overview($mailbox,"1:{$MC->Nmsgs}",0);

echo "<table>";
foreach ($result as $overview) {
    echo "<tr>"
        ."<td>".$overview->msgno."</td>"
        ."<td>".$overview->uid."</td>"
        ."<td>".$overview->date."</td>"
        ."<td>".$overview->udate."</td>"
        ."<td>".$overview->from."</td>"
        ."<td>".$overview->to."</td>"
        ."<td>".$overview->size."</td>"
        ."<td>".$overview->subject."</td>"
        ."</tr>";
}
echo "</table>";
?> 
```

我收到以下错误：

```
Notice: Undefined property: stdClass::$from in /mail_test.php on line 34 
```

而且`$overview->from`没有价值。

当“From:”部分不包含括号时，没有问题。**我还必须对括号进行编码吗？**如何？我以为`mb_encode_mimeheader()`正在做这项工作。

编辑：

结果`var_dump($overview)`是：

```
object(stdClass)#18 (14) {
  ["subject"]=>
  string(40) "Subject =?UTF-8?B?w4PCpMODwrzDg8K2IA==?="
  ["to"]=>
  string(16) "mail@server.tld"
  ["date"]=>
  string(31) "Thu, 16 Aug 2012 16:58:23 +0200"
  ["message_id"]=>
  string(58) "<**************************************>"
  ["size"]=>
  int(1585)
  ["uid"]=>
  int(18)
  ["msgno"]=>
  int(17)
  ["recent"]=>
  int(1)
  ["flagged"]=>
  int(0)
  ["answered"]=>
  int(0)
  ["deleted"]=>
  int(0)
  ["seen"]=>
  int(0)
  ["draft"]=>
  int(0)
  ["udate"]=>
  int(1345129104)
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T23:25:50.230

未添加 FROM 字段是因为您没有`from="john@doe.com"`活动（签`;`入），`php.ini`并且您`mb_encode_mimeheader`没有按照您的意愿进行转换，并且无法正确发送电子邮件。

对于带有 UTF-8 字符和名称的电子邮件，您应该使用`UTF-8`和进行编码`base64_encode`。

这是发送该电子邮件的正确方法：

```
$recipient  = "mail@server.tld";
$subject    = "=?UTF-8?B?".base64_encode('Subject äöü')."?=";
$text       = "Hallo";
$from_user  = "=?UTF-8?B?".base64_encode('Name with [], ÄÖÜ and spaces')."?= <webmaster@example.com>";
$header     = "From: ".$from_user." "
                . "\r\n" . "Reply-To: ".$from_user." "
                . "\r\n" . "MIME-Version: 1.0"
                . "\r\n" . "Content-Transfer-Encoding: 8bit"
                . "\r\n" . "Content-type: text/plain; charset=UTF-8"
                . "\r\n" . "X-Mailer: PHP/" . phpversion();

// send e-mail
mail($recipient, $subject, $text, $header); 
```

您应该会收到带有正确名称、电子邮件和主题的电子邮件。你仍然需要用`iconv_mime_decode($overview->from,0, "UTF-8")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:22:58.653

问题在于，

```
echo mb_encode_mimeheader("Name with [], ÄÖÜ and spaces"); 
```

返回

```
Name with [], =?UTF-8?B?w4PChMODwpbDg8KcIGFuZCBzcGFjZXM=?= 
```

这不是你想要的。

我[在 php.net 上找到了这个函数](http://de3.php.net/manual/de/function.mb-encode-mimeheader.php#90242)，它可能会对你有所帮助：

```
function EncodeMime($Text, $Delimiter) { 
    $Text = utf8_decode($Text); 
    $Len  = strlen($Text); 
    $Out  = ""; 
    for ($i=0; $i<$Len; $i++) 
    { 
        $Chr = substr($Text, $i, 1); 
        $Asc = ord($Chr); 

        if ($Asc > 0x255) // Unicode not allowed 
        { 
            $Out .= "?"; 
        } 
        else if ($Chr == " " || $Chr == $Delimiter || $Asc > 127) 
        { 
            $Out .= $Delimiter . strtoupper(bin2hex($Chr)); 
        } 
        else $Out .= $Chr; 
    } 
    return $Out; 
} 
echo EncodeMime("Name with [], ÄÖÜ and spaces", '%'); 
```

它返回

```
Name%20with%20[],%20%C4%D6%DC%20and%20spaces 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:22:41.783

不久前我在括号中遇到了同样的问题。没有人能告诉我，mail-header-adress-fields 中的括号是什么意思，为什么 PHP 不能管理它们。我的解决方案是在使用`imap_fetchheader()`.

# thin - Heroku 图像损坏

> ID：11989916
> 
> 赞同：1
> 
> 时间：2012-08-16T14:53:17.270
> 
> 标签：thin, corruption

通过 git 将图像上传到 heroku 时，图像从 Web 服务器发送时已损坏。我一直试图通过去`g rm --cached images/contact-me.png`然后再去修复它`g add images/contact-me.png`，然后推动。

还;

```
xyz@co-data:~/labs/exposeit-site$ sha1sum images/contact-me.png 
2d319cd64e94afe7cdd169347653670a1dd82581  images/contact-me.png
xyz@co-data:~/labs/exposeit-site$ wget http://exposeit.herokuapp.com/images/contact-me.png
--2012-08-16 16:50:35--  http://exposeit.herokuapp.com/images/contact-me.png
Resolving exposeit.herokuapp.com (exposeit.herokuapp.com)... 50.19.121.246, 174.129.192.155, 184.73.155.93, ...
Connecting to exposeit.herokuapp.com (exposeit.herokuapp.com)|50.19.121.246|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1230115 (1.2M) [image/png]
Saving to: `contact-me.png'

100%[=================================================================================>] 1,230,115    963K/s   in 1.2s    

2012-08-16 16:50:36 (963 KB/s) - `contact-me.png' saved [1230115/1230115]

xyz@co-data:~/labs/exposeit-site$ sha1sum contact-me.png 
74d97745d35bb67e5517611b683ed461bd0c1686  contact-me.png 
```

和

```
xyz@co-data:~/labs/exposeit-site$ g ls-files | grep contact-me
images/contact-me.png 
```

这是Heroku的问题吗？

**更新**：

档案：

```
web:  bundle exec thin start -R config.ru -e $RACK_ENV -p $PORT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:52:22.963

所以答案是`thin`gem 有一个错误，它采用字符串长度而不是作为底层图像的字节数组的长度。为什么它会首先被转换为字符串，我不知道。

解决方案是在您的 Gemfile 中添加：

```
 gem 'rack-jekyll', :git => 'https://github.com/adaoraul/rack-jekyll.git', :require => 'rack/jekyll' 
```

...它将从 github 而不是 RubyGems 下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:19:55.500

奇怪的。不过，你在我看来还不错。[http://exposeit.herokuapp.com/images/contact-me.png](http://exposeit.herokuapp.com/images/contact-me.png)

最好在其他地方托管图像和静态内容，而不是将兆字节放在源代码控制中 [https://devcenter.heroku.com/articles/s3](https://devcenter.heroku.com/articles/s3)

# php - 通过php脚本创建cpanel数据库

> ID：11989920
> 
> 赞同：5
> 
> 时间：2012-08-16T14:53:20.190
> 
> 标签：php, cpanel

我正在尝试使用 cpanel/whm 和 postwwwacct php 脚本自动安装一些自定义软件。这需要将文件复制到用户 public_html 文件夹，然后编辑配置并设置 eh 文件权限。到目前为止一切顺利，没有问题。在尝试创建数据库时，我遇到了一些问题。

```
 $db_create= $opts['user']. '_lol';  
    $db_host="immersion-networks.com";
    include("xmlapi.php");   
    $xmlapi = new xmlapi($db_host);    
    $xmlapi->password_auth("".$opts['user']."","".$opts['pass']."");    
    $xmlapi->set_debug(1);//output actions in the error log 1 for true and 0 false  
    $xmlapi->set_output('array');//set this for browser output  
    //create database    
    $createdb = $xmlapi->api1_query($opts['user'], "Mysql", "adddb", array($db_create));   
    //create user 
    $usr = $xmlapi->api1_query($opts['user'], "Mysql", "adduser", array($db_create, $opts['pass']));   
     //add user 
    $addusr = $xmlapi->api1_query($opts['user'], "Mysql", "adduserdb", array($db_create,$db_create, 'all')); 
```

其余代码运行正常，但未创建数据库，也未创建用户。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T11:56:45.770

```
require("xmlapi.php"); // this can be downlaoded from https://github.com/CpanelInc/xmlapi-php/blob/master/xmlapi.php
$xmlapi = new xmlapi("your cpanel domain");   
$xmlapi->set_port( 2083 );   
$xmlapi->password_auth($opts['user'],$opts['pass']);    
$xmlapi->set_debug(0);//output actions in the error log 1 for true and 0 false 

$cpaneluser=$opts['user'];
$databasename="something";
$databaseuser="else";
$databasepass=$opts['pass'];

//create database    
$createdb = $xmlapi->api1_query($cpaneluser, "Mysql", "adddb", array($databasename));   
//create user 
$usr = $xmlapi->api1_query($cpaneluser, "Mysql", "adduser", array($databaseuser, $databasepass));   
//add user 
$addusr = $xmlapi->api1_query($cpaneluser, "Mysql", "adduserdb", array("".$cpaneluser."_".$databasename."", "".$cpaneluser."_".$databaseuser."", 'all')); 
```

上面的代码对我有用！需要确保您使用的是 cpanel 用户/密码不是 root 并且您使用的是端口 2083

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-17T16:46:25.330

没有 xmlapi

```
function createDb($cPanelUser,$cPanelPass,$dbName) {

    $buildRequest = "/frontend/x3/sql/addb.html?db=".$dbName;

    $openSocket = fsockopen('localhost',2082);
    if(!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders  = "GET " . $buildRequest ."\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while(!feof($openSocket)) {
        fgets($openSocket,128);
    }
    fclose($openSocket);
}

function createUser($cPanelUser,$cPanelPass,$userName,$userPass) {

    $buildRequest = "/frontend/x3/sql/adduser.html?user=".$userName."&pass=".$userPass;

    $openSocket = fsockopen('localhost',2082);
    if(!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders  = "GET " . $buildRequest ."\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while(!feof($openSocket)) {
        fgets($openSocket,128);
    }
    fclose($openSocket);
}

function addUserToDb($cPanelUser,$cPanelPass,$userName,$dbName,$privileges) {

    $buildRequest = "/frontend/x3/sql/addusertodb.html?user=".$userName."&db=".$dbName.$privileges;

    $openSocket = fsockopen('localhost',2082);
    if(!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders  = "GET " . $buildRequest ."\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while(!feof($openSocket)) {
        fgets($openSocket,128);
    }
    fclose($openSocket);
}

//Create Db
createDb('CpanelUser','cPanelPass','dbName');

//Create User
createUser('cPanelUser','cPanelPass','dbUsername','dbUserPass');

//Add user to DB - ALL Privileges
addUserToDb('cPanelUsername','cPanelPass','dbUsername','dbName','&ALL=ALL');

//Add user to DB - SELECTED PRIVILEGES
addUserToDb('cPanelUsername','cPanelPass','dbUsername','dbName','&CREATE=CREATE&ALTER=ALTER'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-08-29T02:23:54.620

我通过将前缀定义放在 fn: addUserToDb()

```
<?php

$database_name = "dbname"; //without prefix
$database_user = $database_name; //database name and database username are both similar, change the value if you want
$database_pass = "random_password";
$cpanel_username = "my_cpanel_username";
$cpanel_pass = "my_cpanel_password";
$cpanel_theme = "paper_lantern"; // change this to "x3" if you don't have paper_lantern yet

function createDb($cpanel_theme, $cPanelUser, $cPanelPass, $dbName)
{
    $buildRequest = "/frontend/" . $cpanel_theme . "/sql/addb.html?db=" . $dbName;

    $openSocket = fsockopen('localhost', 2082);
    if (!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders = "GET " . $buildRequest . "\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while (!feof($openSocket)) {
        fgets($openSocket, 128);
    }
    fclose($openSocket);
}

function createUser($cpanel_theme, $cPanelUser, $cPanelPass, $userName, $userPass)
{
    $buildRequest = "/frontend/" . $cpanel_theme . "/sql/adduser.html?user=" . $userName . "&pass=" . $userPass;

    $openSocket = fsockopen('localhost', 2082);
    if (!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders = "GET " . $buildRequest . "\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while (!feof($openSocket)) {
        fgets($openSocket, 128);
    }
    fclose($openSocket);
}

function addUserToDb($cpanel_theme, $cPanelUser, $cPanelPass, $userName, $dbName, $privileges){

    /* Redefine prefix for user and dbname */
    $prefix = substr($cPanelUser,0,8);

    $buildRequest = "/frontend/" . $cpanel_theme . "/sql/addusertodb.html?user=" . $prefix . "_" . 
            $userName . "&db=" . $prefix . "_" . $dbName . "&privileges=" . $privileges;

    $openSocket = fsockopen('localhost', 2082);
    if (!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders = "GET " . $buildRequest . "\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while (!feof($openSocket)) {
        fgets($openSocket, 128);
    }
    fclose($openSocket);
}

//Create Db
createDb($cpanel_theme, $cpanel_username, $cpanel_pass, $database_name);

//Create User
createUser($cpanel_theme, $cpanel_username, $cpanel_pass, $database_user, $database_pass);

//Add user to DB - ALL Privileges
addUserToDb($cpanel_theme, $cpanel_username, $cpanel_pass, $database_user, $database_name, 'ALL PRIVILEGES');

//Add user to DB - SELECTED PRIVILEGES
//addUserToDb($cpanel_theme, $cpanel_username, $cpanel_pass, $database_user, $database_name, 'DELETE,UPDATE,CREATE,ALTER');

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-23T09:21:16.710

这个对我有用。我从@brunofitas 回答中做了一些更新

```
<?php

$database_name = "dbname"; //without prefix
$database_user = $database_name; //database name and database username are both similar, change the value if you want
$database_pass = "random_password";
$cpanel_username = "my_cpanel_username";
$cpanel_pass = "my_cpanel_password";
$cpanel_theme = "paper_lantern"; // change this to "x3" if you don't have paper_lantern yet

function createDb($cpanel_theme, $cPanelUser, $cPanelPass, $dbName)
{
    $buildRequest = "/frontend/" . $cpanel_theme . "/sql/addb.html?db=" . $dbName;

    $openSocket = fsockopen('localhost', 2082);
    if (!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders = "GET " . $buildRequest . "\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while (!feof($openSocket)) {
        fgets($openSocket, 128);
    }
    fclose($openSocket);
}

function createUser($cpanel_theme, $cPanelUser, $cPanelPass, $userName, $userPass)
{
    $buildRequest = "/frontend/" . $cpanel_theme . "/sql/adduser.html?user=" . $userName . "&pass=" . $userPass;

    $openSocket = fsockopen('localhost', 2082);
    if (!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders = "GET " . $buildRequest . "\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while (!feof($openSocket)) {
        fgets($openSocket, 128);
    }
    fclose($openSocket);
}

function addUserToDb($cpanel_theme, $cPanelUser, $cPanelPass, $userName, $dbName, $privileges)
{
    $buildRequest = "/frontend/" . $cpanel_theme . "/sql/addusertodb.html?user=" . $cPanelUser . "_" . $userName . "&db=" . $cPanelUser . "_" . $dbName . "&privileges=" . $privileges;

    $openSocket = fsockopen('localhost', 2082);
    if (!$openSocket) {
        return "Socket error";
        exit();
    }

    $authString = $cPanelUser . ":" . $cPanelPass;
    $authPass = base64_encode($authString);
    $buildHeaders = "GET " . $buildRequest . "\r\n";
    $buildHeaders .= "HTTP/1.0\r\n";
    $buildHeaders .= "Host:localhost\r\n";
    $buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
    $buildHeaders .= "\r\n";

    fputs($openSocket, $buildHeaders);
    while (!feof($openSocket)) {
        fgets($openSocket, 128);
    }
    fclose($openSocket);
}

//Create Db
createDb($cpanel_theme, $cpanel_username, $cpanel_pass, $database_name);

//Create User
createUser($cpanel_theme, $cpanel_username, $cpanel_pass, $database_user, $database_pass);

//Add user to DB - ALL Privileges
addUserToDb($cpanel_theme, $cpanel_username, $cpanel_pass, $database_user, $database_name, 'ALL PRIVILEGES');

//Add user to DB - SELECTED PRIVILEGES
//addUserToDb($cpanel_theme, $cpanel_username, $cpanel_pass, $database_user, $database_name, 'DELETE,UPDATE,CREATE,ALTER'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T20:12:59.347

cPanel 不允许您在 cPanel 虚拟主机上直接从 MySQL/PhpMyAdmin 创建数据库。每次需要新数据库时，您都必须登录 cPanel 并使用其界面创建数据库。cPanel Database Creator 将使这个过程变得更加容易。为了在您的托管服务器上创建数据库，您只需从浏览器、shell 或 cron 作业运行此脚本，并将数据库名称作为参数传递。

在使用此脚本之前，您需要使用 cPanel 用户名、密码和主机名（域或 IP）对其进行更新。

用法： cpanel_create_db.php?db=database-name&user=username&pass=password 其中 database-name 应替换为要在托管服务器上创建的数据库名称。Database Creator 还将创建一个数据库用户并将其分配给具有 ALL 权限的数据库。如果省略 user 参数，脚本将不会创建数据库用户。在这种情况下，用法是 cpanel_create_db.php?db=database-name

注意：如果脚本不起作用，请尝试通过 cURL 运行它。这需要在服务器上安装 cURL。默认 cURL 路径设置为 /usr/bin/curl。如果托管服务器上的 cURL 路径不同，请随意在脚本代码中更改它。

试试这个

```
<?php

###############################################################
# cPanel Database Creator 1.2
###############################################################
# Visit http://www.zubrag.com/scripts/ for updates
############################################################### 

// cPanel username (you use to login to cPanel)
$cpanel_user = "user";

// cPanel password (you use to login to cPanel)
$cpanel_password = "password";

// cPanel domain (example: mysite.com)
$cpanel_host = "host";

// cPanel theme/skin, usually "x"
// Check http://www.zubrag.com/articles/determine-cpanel-skin.php
// to know it for sure
$cpanel_skin = "x";

// Script will add user to database if these values are not empty
// User wil have ALL permissions
$db_username = '';
$db_userpass = '';

// Update this only if you are experienced user or if script does not work
// Path to cURL on your server. Usually /usr/bin/curl
$curl_path = "";

//////////////////////////////////////
/* Code below should not be changed */
//////////////////////////////////////

function execCommand($command) {
  global $curl_path;

  if (!empty($curl_path)) {
    return exec("$curl_path '$command'");
  }
  else {
    return file_get_contents($command);
  }
}

if(isset($_GET['db']) && !empty($_GET['db'])) {
  // escape db name
  $db_name = escapeshellarg($_GET['db']);

  // will return empty string on success, error message on error
  $result = execCommand("http://$cpanel_user:$cpanel_password@$cpanel_host:2082/frontend/$cpanel_skin/sql/adddb.html?db=$db_name");

  if(isset($_GET['user']) && !empty($_GET['user'])) {
    $db_username = $_GET['user'];
    $db_userpass = $_GET['pass'];
  }

  if (!empty($db_username)) {
    // create user
    $result .= execCommand("http://$cpanel_user:$cpanel_password@$cpanel_host:2082/frontend/$cpanel_skin/sql/adduser.html?user={$db_username}&pass={$db_userpass}");
    // assign user to database
    $result .= execCommand("http://$cpanel_user:$cpanel_password@$cpanel_host:2082/frontend/$cpanel_skin/sql/addusertodb.html?user={$cpanel_user}_{$db_username}&db={$cpanel_user}_{$db_name}&ALL=ALL");
  }

  // output result
  echo $result;
}
else {
  echo "Usage: cpanel_create_db.php?db=databasename&user=username&pass=password";
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-25T11:46:02.373

我们可以使用 cpanel API 来做到这一点，因为上述旧代码目前不适用于新版本的 cpanel。虽然这个问题是早些时候提出的，但我粘贴这个是为了帮助别人。

```
include "cpaneluapi.class.php"; //include the class file from here https://github.com/N1ghteyes/cpanel-UAPI-php-class/blob/master/cpaneluapi.class.php
$uapi = new cpanelAPI('cpanelusername', 'cpanelapssword', 'cpanel.domain.com'); 
//instantiate the object

$database = 'dbname';
$databaseuser = 'dbuser';
$databasepass = 'databasepass';

/**
 * Mysql - Create a database and user, then assign the user to that database.
 * For a full list of functions available for the Mysql module, see: 
    https://documentation.cpanel.net/display/SDK/Mysql
 * Mysql requires cPanel 11.44 +
  */

  $uapi->uapi->Mysql->create_database(array('name' => $database)); //Create the 
  database
  $uapi->uapi->Mysql->create_user(array('name' => $databaseuser, 'password' => 
  $databasepass)); //create a user for the new database
  //After you create the user, you must use the set_privileges_on_database 
  //function call to grant access to the

  //add the user, set all privileges - add specific privileges by comma 
  //separation. e.g. 'DELETE,UPDATE,CREATE,ALTER' 
  $uapi->uapi->Mysql->set_privileges_on_database(array('user' => $databaseuser, 
  'database' => $database, 'privileges' => 'ALL')); 
```

# ios - 使用 Cocos2D for iPhone 绘制线条

> ID：11989923
> 
> 赞同：1
> 
> 时间：2012-08-16T14:53:27.333
> 
> 标签：ios, cocoa-touch, cocos2d-iphone, callback, line-drawing

我正在使用 Cocos2D 制作一个简单的游戏。用户可以触摸和追踪小移动物体的路径。然后对象跟随路径。这类似于飞行控制游戏机制。

我的代码几乎一直运行良好。但是有时我尝试触摸和拖动对象但触摸回调不会触发。以下是我的代码的一般工作方式：

*   小移动物体继承`CCLayer`
*   我正在使用具有单个触摸参数（`ccTouchMoved:withEvent:`等）的触摸回调
*   所有回调`ccTouchBegan:withEvent:`都在对象上（而不是主游戏层）

**如何改进触摸处理以避免上述错误？**

到目前为止，这是我的想法：也许触摸回调没有触发，因为对象（总是在移动）在用户尝试触摸对象的时候略微移动。这可以通过使用具有触摸集合作为参数的回调处理主游戏层上的触摸来解决。由于总对象数量相对较少（比如少于 50 个），我可以将每个触摸位置与每个对象进行比较。

我还尝试增加对象的可触摸区域（注意 1.5 乘法）。这似乎有所帮助，但并没有消除问题。

```
- (BOOL) ccTouchBegan:(UITouch *) touch withEvent:(UIEvent *) event {
    CGSize size = self.contentSize;
    CGRect rect = CGRectMake(-size.width  / 2.0, 
                             -size.height / 2.0, 
                              size.width  * 1.5, 
                              size.height * 1.5);
    return CGRectContainsPoint(rect, [self convertTouchToNodeSpace:touch]);
} 
```

另一件要尝试的事情是提高对象的速度，看看回调是否不会更频繁地触发。此刻物体缓慢移动。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:29:59.970

IIRC, node's origin is in its bottom left corner. Try

```
CGRect rect = CGRectMake(0, 0, size.width, size.height);
return CGRectContainsPoint(rect, [self convertTouchToNodeSpace:touch]); 
```

# c# - 在以下 C# 代码中使用关键字 USING 的正确方法是什么？

> ID：11989928
> 
> 赞同：1
> 
> 时间：2012-08-16T14:53:45.087
> 
> 标签：c#, httpwebrequest, using, webrequest

我正试图纠正这一点，因为我觉得我错过了一些东西。`using`每当我有一个`IDisposable`对象时，我都想使用关键字。请注意代码有效，我只是想优化它。

我在这里有两个问题：

1）对于此代码：

`HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);`

像这样添加是什么意思`(HttpWebRequest)`？我要转换`WebRequest`成`HttpWebRequest`?

为什么我不能这样做？

```
HttpWebRequest rq = new HttpWebRequest();
rq.Create(url); 
```

2）在下面的功能代码中，我将如何`using`在适用的情况下使用关键字？

```
public static int UploadFileToixLibrary(string url, string file)
{
    NetworkCredential credentials = new NetworkCredential();
    credentials.UserName = AppVars.Username;
    credentials.Password = AppVars.Password;

    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url); 

    request.Credentials = credentials;
    request.Method = "POST";
    request.ContentType = "image/tiff";
    request.Headers.Add("X-Object-Key", Path.GetFileName(file));

    byte[] bytes = File.ReadAllBytes(file);
    Stream st = null;

    try
    { 
        request.ContentLength = bytes.Length;   
        st = request.GetRequestStream();
        st.Write(bytes, 0, bytes.Length);         
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
        return 1;
    }
    finally
    {
        if (st != null)
        {
            st.Close();
        }
    }

    try
    {
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        StreamReader sr = new StreamReader(response.GetResponseStream());
        response.Close();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
        return 1;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:00:15.147

问题一：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url); 
```

强制转换的原因是，静态[`Create`](http://msdn.microsoft.com/en-us/library/bw00b1dc.aspx)方法 on`WebRequest`返回一个最适合您在 url 中提供的方案的实例`WebRequest`（即， http:// 地址将返回一个`HttpWebRequest`， ftp:// 将返回`FtpWebRequest`等）。你知道你的 url 是 http，你知道你会得到一个`HttpWebRequest`，所以你可以显式地转换为正确的类型来访问`HttpWebRequest`abstract上的额外功能`WebRequest`。

现在，`WebRequest`is not `IDisposable`，所以你不能在 using 语句中使用它！

问题 2：在您的功能代码中，您可以使用`using`语句的唯一地方是`Stream`访问权限：

```
try
{ 
    request.ContentLength = bytes.Length;   
    st = request.GetRequestStream();
    st.Write(bytes, 0, bytes.Length);         
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
    return 1;
}
finally
{
    if (st != null)
    {
        st.Close();
    }
} 
```

可以重写：

```
request.ContentLength = bytes.Length;   
using(var st = request.GetRequestStream())
{
    st.Write(bytes, 0, bytes.Length);         
    st.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T15:00:02.497

1.  `WebRequest`是一个抽象类，它不会公开您将要使用的大多数属性/方法。您必须将其转换为适当的类型才能使用它。静态方法将根据您的 URL`Create`返回专门的对象。`WebRequest`如您所知，此 URL 使用 HTTP 协议 ( `http://`)，可以安全地将其转换为`HttpWebRequest`. 但是，它可能是一个`FtpWebRequest`.
2.  您可以将`GetRequestStream`初始化放在`using(...)`语句中。看起来`WebRequest`（及其孩子）没有实现`IDisposable`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:06:11.463

1.`Webrequest.Create`方法返回一个`WebRequest`引用，但实际对象有不同的类型，具体取决于你要做什么类型的请求。在您的情况下，您正在执行 HTTP 请求，因此实际对象是一个`HttpWebRequest`对象。您将引用转换为对象的实际类型，以访问特定于`HttpWebRequest`类的成员。

2.`HttpWebRequest`不是一次性的。为对象使用`using`块`HttpWebResponse`：

```
using (HttpWebResponse response = (HttpWebResponse)request.GetResponse()) {
  ...
} 
```

# robots.txt - 文件夹名称中的空格

> ID：11989935
> 
> 赞同：3
> 
> 时间：2012-08-16T14:54:04.837
> 
> 标签：robots.txt

我对搜索引擎优化有点陌生，我只是想写一个 robots.txt 文件。我想禁止条款和条件文件夹中的页面，其中有一个空格。

我应该写：

```
Disallow: /Page TermsAndConditions/ 
```

或者：

```
Disallow: /Page%20TermsAndConditions/ 
```

或两者兼而有之，还是无所谓？

（我想禁止这个文件夹，因为它充满了技术术语，*我认为*这些术语会混淆 googlebot 找到的内容关键字 - 还是我也有这个错误？）。

* * *

编辑：

我从 googe [Robots.txt Specifications](https://developers.google.com/webmasters/control-crawl-index/docs/robots_txt)找到了这个页面。其中说：“路径中的非 7 位 ASCII 字符可能包含为 UTF-8 字符或按照 RFC 3986 作为百分比转义的 UTF-8 编码字符”。所以我想这个问题的答案是没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:57:01.343

重命名没有空格的文件夹并避免该问题。

```
Disallow: /PageTermsAndConditions/ 
```

# xml - SET @xml = 文件路径

> ID：11989942
> 
> 赞同：3
> 
> 时间：2012-08-16T14:54:21.490
> 
> 标签：xml, database, import, sql-server-2008-r2

我需要将 XML 文件导入 SQL Server 2008 R2 数据库。

因此，我使用硬编码的 XML 数据进行了查询：

```
DECLARE @xml XML
SET @xml='
<goods_item>
<goods_level>1</goods_level>
<goods_isgroup>1</goods_isgroup>
<goods_code>51852</goods_code>
<goods_name></goods_name>
<goods_parent></goods_parent>
<goods_art></goods_art>
<goods_buhart></goods_buhart>
<goods_inpack>0</goods_inpack>
<goods_packtxt></goods_packtxt>
<goods_country></goods_country>
<goods_gtd></goods_gtd>
<goods_nds>0</goods_nds>
<goods_unit></goods_unit>
</goods_item>
<goods_item>
<goods_level>1</g    oods_level>
<goods_isgroup>1</goods_isgroup>
<goods_code>51852</goods_code>
<goods_name></goods_name>
<goods_parent></goods_parent>
<goods_art></goods_art>
<goods_buhart></goods_buhart>
<goods_inpack>0</goods_inpack>
<goods_packtxt></goods_packtxt>
<goods_country></goods_country>
<goods_gtd></goods_gtd>
<goods_nds>0</goods_nds>
<goods_unit></goods_unit>
</goods_item>' 
```

它工作正常。但是如何将硬编码 XML 数据更改为 XML 文件的路径？

关于这个：

```
SET @xml='D:\xml1.xml' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:04:35.750

您可以先将其导入到临时表中，如下所示：

```
declare @insert nvarchar(1000), @pathname varchar(200), @xml xml

set @pathname = 'your path here'

create table #tmp_xml(xmldata xml)

set @insert = 'INSERT INTO #tmp_xml(xmldata) SELECT bulkcolumn 
      FROM OPENROWSET (BULK N''' + @pathname+ ''', SINGLE_BLOB) AS data'

exec sp_executesql @insert

select @xml = xmldata from #tmp_xml

-- read, parse xml here ....
drop table #tmp_xml 
```

# ios - ios - iPhone/iPad 生态系统是否有可靠的崩溃报告系统？

> ID：11989947
> 
> 赞同：3
> 
> 时间：2012-08-16T14:54:36.270
> 
> 标签：ios, ios5

我知道在 Android 中，有一个非常可靠的内置系统可以通知我发生的崩溃。他们几乎立即将堆栈跟踪和其他一些信息写入 Google 文档。它工作得非常好。

我开始为 ios 研究同样的东西，但我没有发现任何类似的东西同样有效。我读过这篇文章：[Xcode 故事板：为什么 iPad 故事板显示 iPhone 大小的视图？](https://stackoverflow.com/questions/9877113/xcode-storyboard-why-does-the-ipad-storyboard-show-iphone-sized-views)

但我不确定是否仍然如此。谁能推荐我在用户设备上发生的崩溃报告中使用什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:12:11.007

您可以做的是创建一个新的未捕获异常处理程序，然后通过[NSSetUncaughtExceptionHandler](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSSetUncaughtExceptionHandler)注册它。这样，每次崩溃都可以在杀死之前被拦截，您可以将其记录/保存到某个地方以上传。

（我个人使用了这个链接中描述的方法：http: [//cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html](http://cocoawithlove.com/2010/05/handling-unhandled-exceptions-and.html)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:13:42.717

我将[Flurry](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMStackTrace.m?spec=svn535&r=535)与 uncaughtExceptionHandler 和[GTMStackTrace 一起使用](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMStackTrace.m?spec=svn535&r=535.)

异常处理程序可能如下所示：

```
void uncaughtExceptionHandler(NSException *exception) 
{
    @try 
    {
        NSString *fullBacktrace = GTMSBStackTraceFromException(exception);
        NSMutableString *backtrace = [NSMutableString stringWithUTF8String:""];
        NSArray *backtraceArray = [fullBacktrace componentsSeparatedByString:@"\n"];
        for (id entry in backtraceArray) 
        {
            NSRange testRange = [entry rangeOfString:[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleName"]];
            if (testRange.length)
            { 
                [backtrace appendString:entry];    
            }
        }

        NSCharacterSet *whitespaces = [NSCharacterSet whitespaceCharacterSet];
        NSPredicate *noEmptyStrings = [NSPredicate predicateWithFormat:@"SELF != ''"];

        NSArray *parts = [backtrace componentsSeparatedByCharactersInSet:whitespaces];
        NSArray *filteredArray = [parts filteredArrayUsingPredicate:noEmptyStrings];
        NSString *strippedBacktrace = [filteredArray componentsJoinedByString:@" "];   
        [FlurryAnalytics logError:@"uncaughtExceptionHandler"
                          message:[NSString stringWithFormat:@"%@", strippedBacktrace ? strippedBacktrace : @"no matching backtrace"]
                        exception:exception];
    }
    @catch (NSException *exception) 
    {
        NSLog(@"whoa!  could not handle uncaught exception!");
        [FlurryAnalytics logError:@"uncaughtExceptionHandler"
                          message:@"no matching backtrace"
                        exception:exception];
    }
} 
```

[Testflight](https://testflightapp.com/)也有一个很好的崩溃日志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T12:09:47.247

设置未捕获异常处理程序只会为您提供崩溃报告的子集，而且您通过这种方式获得的报告的详细信息非常有限。你没有得到所有线程的堆栈跟踪，你没有得到真正发生崩溃的异常的堆栈跟踪，你没有得到发生崩溃的代码的行号。此外，您不会收到任何由信号处理程序引起的崩溃报告。

此外，一旦发生崩溃，您不应该运行任何 Objective-C 代码，因为它不是异步安全的。有关它的更多信息，请参阅本文：[可靠的崩溃报告](http://landonf.bikemonkey.org/code/objc/Reliable_Crash_Reporting.20110912.html)

如果发布了有关您可以做什么作为以下问题的答案的更多详细信息： iOS和iOS 崩溃日志捕获、调试信息的[崩溃分析和报告](https://stackoverflow.com/questions/11832203/crash-analytics-and-reporting-for-ios/11837863#11837863)[。捕获并通过电子邮件发送给开发团队](https://stackoverflow.com/questions/8233388/ios-crash-log-catch-debug-info-catch-and-send-via-email-to-the-dev-team/8242215#8242215)

# ruby-on-rails - Rails 3.2 安全性

> ID：11989951
> 
> 赞同：0
> 
> 时间：2012-08-16T14:54:48.007
> 
> 标签：ruby-on-rails, security, ruby-on-rails-3.2, rails-models

在我的 Rails 应用程序中，我有一个用户模型，其中有一个属性：点

```
class User < ActiveRecord::Base
    attr_accessible :points
    has_many :answers
end 
```

有没有办法让属性只从特定的控制器动作更新？

```
class AnswersController < ApplicationController
   ....
   def create
      @user = current_user
      @answer = @user.answers.build(params[:answer])
      if @answer.save
        @user.points += 10  # <-- I want to make points updatable only from this action
        @user.save
      else
        ...
      end
     ... 
   end 
```

# php - Bing API 授权不起作用 - 您提供的授权类型不受支持。仅支持 Basic 和 OAuth

> ID：11989959
> 
> 赞同：6
> 
> 时间：2012-08-16T14:55:02.957
> 
> 标签：php, azure, api, bing, azure-marketplace

我最近收到一封来自 Microsoft 的电子邮件，说 Bing API 正在迁移到 Windows Azure Marketplace。似乎新请求之间的主要区别在于身份验证。

在论坛上阅读了很多帖子后，我发现了这一点：

```
$accountKey = '#########';
$api =  'https://api.datamarket.azure.com/Bing/Search/Web?$format=json&$top=8&Query=';
$context = stream_context_create(array(
    'http' => array(
        'request_fulluri' => true,
        'header'  => "Authorization: Basic " . base64_encode($accountKey . ":" . $accountKey)
    )
));
$request = $api.'%27'.$q.'%27&$skip='.$start;
$result = file_get_contents($request, 0, $context); 
```

但是，我仍然收到错误“不支持您提供的授权类型。仅支持 Basic 和 OAuth”。

有谁知道我该如何解决这个问题。我也尝试过 cURL，但它不起作用。感谢任何可以找到我解决方案的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:07:41.277

我认为 URL 已更改。此代码有效。请注意第一行中的 URL：

```
$api = 'https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?$format=json&$top=8&Query=';
$context = stream_context_create(array(
    'http' => array(
        'request_fulluri' => true,
        'header'  => "Authorization: Basic " . base64_encode($accountKey . ":" . $accountKey)
    )
));
$q = 'test';
$request = $api.'%27'.$q.'%27';

echo file_get_contents($request, 0, $context); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T13:21:36.697

这是搜索 API 的工作示例，只需将您的访问密钥替换为“XXXX”。即使我浪费了好几个小时来使用 cURL 让它工作，但它在本地失败了“CURLOPT_SSL_VERIFYPEER”的原因:(

```
$url = 'https://api.datamarket.azure.com/Bing/Search/Web?Query=%27xbox%27';
$process = curl_init($url);
curl_setopt($process, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($process, CURLOPT_USERPWD, "username:XXXX");
curl_setopt($process, CURLOPT_TIMEOUT, 30);
curl_setopt($process, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($process, CURLOPT_SSL_VERIFYPEER, false);
$response = curl_exec($process);

# Deliver
return $response;

# Have a great day!
curl_close($process); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T16:17:45.777

我遇到了同样的问题，现在已修复，root_url 已更改，现在类似于： [https://user:yourAccountKey@api.datamarket.azure.com/Bing/SearchWeb/Web?Query=%27leo%20fender%27&Market =%27en-US%27&](https://user:yourAccountKey@api.datamarket.azure.com/Bing/SearchWeb/Web?Query=%27leo%20fender%27&Market=%27en-US%27&) $top=50&$format=JSON">

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-26T11:34:37.810

当我将网站部署到新服务器时，我遇到了同样的问题。我认为我的托管公司禁用了 file_get_contents 到外部链接的某些功能。

```
 $url = 'https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/v1/Translate?Text=%27'.urlencode($text).'%27&To=%27' . $to . '%27&From=%27' . $from . '%27&$top=100&$format=json';

    $accountKey = 'APIKEY';
    $handle = curl_init ($url);
    if ($handle) {
        $curlOptArr = array(
            CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
            CURLOPT_USERPWD => $accountKey . ':' . $accountKey,
            CURLOPT_RETURNTRANSFER => TRUE

        );
        curl_setopt_array($handle, $curlOptArr);
        $response = curl_exec($handle);
        $data = json_decode($response,true);
        if (is_array($data)) {
            if (isset($data['d']['results'][0]['Text'])) {
                print $data['d']['results'][0]['Text'];
            } else {
                print false;
            }
        } else {
            print $text;
        }
        $errRet = curl_error($handle);
        curl_close($handle);
    } 
```

使用 cURL 时，这对我有用。

# filter - 有什么理由在阴影上使用 css box-shadow 吗？

> ID：11989961
> 
> 赞同：3
> 
> 时间：2012-08-16T14:55:06.797
> 
> 标签：filter, css, dropshadow

假设客户端兼容性，是否存在 CSS`box-shadow`优于`filter: drop-shadow`.

从[文章](http://www.html5rocks.com/en/tutorials/filters/understanding-css/)来看，它似乎`drop-shadow`是`box-shadow`. 这意味着我们应该基本上总是使用`drop-shadow`而不是`box-shadow`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:17:47.643

`box-shadow`和之间只有一个区别`filter: drop-shadow`。`box-shadow`可以使用inset **shadows**，但不能使用`filter: drop-shadow`. **一切都取决于你。** [检查这个例子](http://jsfiddle.net/vule/MUYBZ/)。

为什么使用`box-shadow`insted of更好`filter: drop-shadow`？

*   更好的浏览器支持
*   大多数开发人员都使用它
*   更少的代码，更多的选择
*   您可以使用嵌入阴影
*   您可以使用多个阴影

此外，还有一个[使用图像](http://jsfiddle.net/vule/SWuRf/)更好的示例`filter: drop-shadow`。第一个具有矩形阴影，但另一个具有跟随图像边缘的阴影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:04:06.543

问题是目前对浏览器`filter`的支持有限，`box-shadow`而且支持更多。

*   [浏览器对过滤器的支持](http://caniuse.com/#feat=css-filters)
*   [浏览器对 box-shadow 的支持](http://caniuse.com/#feat=css-boxshadow)

# android - 下面显示自动完成的下拉菜单

> ID：11989964
> 
> 赞同：0
> 
> 时间：2012-08-16T14:55:15.287
> 
> 标签：android, android-layout

我有一个布局，其中包含一些建议的自动完成编辑文本。下图是键盘滑入之前的正常行为。

![在此处输入图像描述](../Images/ff7543f777b0d31391b517aed4daaf14.png)

键盘出现后，下拉菜单位于隐藏我的 TO：字段的字段上方。如下所示。 ![在此处输入图像描述](../Images/936cdb54ce73316e659d9edb8296b3c7.png)

即使键盘向上滑动，我应该怎么做才能获得下面的下拉菜单。我希望结果是这样的。

![在此处输入图像描述](../Images/639c694d42d2410b7004561905444370.png)

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T08:11:08.667

我通过在显示键盘并关注此编辑文本时隐藏上部布局来解决此问题。一旦键盘滑出，上面的布局就会再次可见，这会带回原始屏幕。为了检测键盘slide_in/slide_out，我使用了类似的东西。

```
final View activityRootView = findViewById(R.id.activityRoot);
    activityRootView.getViewTreeObserver().addOnGlobalLayoutListener(
            new OnGlobalLayoutListener() {
                @Override
                public void onGlobalLayout() {
                    int heightDiff = activityRootView.getRootView()
                            .getHeight() - activityRootView.getHeight();
                    if (heightDiff > 100) { // if more than 100 pixels, its
                                            // probably a keyboard...
                        if (searchText.isFocused()) {
                            //keyboard is shown
                        }
                    } else {
                        if (searchText.isFocused()) {
                            //Keyboard is hidden.
                        }
                    }
                }
            }); 
```

# asp.net-mvc - 使用 MVC 从 Membership .Net 显示用户配置文件信息？

> ID：11989965
> 
> 赞同：2
> 
> 时间：2012-08-16T14:55:18.790
> 
> 标签：asp.net-mvc, gridview, asp.net-membership

我目前有一群用户坐在会员数据库中，我希望能够在 MVC 应用程序中创建一个页面，该页面旨在拉回所有用户信息并将其显示在页面上，我已经创建了解决方案下面但是我希望能够在网格视图而不是列表中显示数据：

控制器：

```
public ActionResult Index()
        {
            var systemUsers = Membership.GetAllUsers();
            return View(systemUsers);
        } 
```

看法：

```
 <ul>
        <%foreach (MembershipUser user in Model){ %>

        <li><%=user.UserName %></li>

        <% }%>
   </ul> 
```

有人可以告诉我如何获取用户数据并将其显示在视图上的网格视图中吗？我在想我可以有一个模型来存储数据，然后将其传递给视图，并且该模型可以由控制器更新？但我不确定哪种数据类型可用于存储用户数据然后传递给网格视图？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:03:24.807

IMO，直接在您的视图中使用`MembershipUser`不是一种非常纯粹的 MVC 方法。

IMO 您可以创建一个特定的 ViewModel，其中只包含您需要在控制器和视图之间传递的字段，如下所示：

```
public class UserViewModel
{
    public Guid UserId {get; set;}
    public string UserName {get; set;}
    // etc
} 
```

在您的控制器中获取所有用户之后，您可以将 MembershipUsers 投射到您的 UserViewModel 对象中，例如使用 LINQ 或 AutoMapper，然后将此枚举传递给视图。

```
public ActionResult Index()
{
    var systemUsers = Membership.GetAllUsers();       
    var vmUsers = new List<UserViewModel>();
    foreach (MembershipUser u in Membership.GetAllUsers())
    {
        vmUsers.Add(new UserViewModel()
        {
            UserId = (Guid)u.ProviderUserKey,
            UserName = u.UserName,
           // etc
        });
    }
    return View(vmUsers);
} 
```

我不确定“GridView”是什么意思（这是 MVC，而不是 WebForms），但[MVC WebGrid](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)应该可以：

```
@model IEnumerable<MyNamespace.UserViewModel>
@{
    var grid = new WebGrid(Model);
}

<div id="grid">
    @grid.GetHtml()
</div> 
```

显然，您需要稍微调整一下外观。

# attributes - 如何在 UML 属性中将枚举文字指定为默认值？

> ID：11989969
> 
> 赞同：1
> 
> 时间：2012-08-16T14:55:31.770
> 
> 标签：attributes, uml, default-value, metamodel

我目前正在使用 EMF-UML-Implementation 进行一些模型转换。在我的模型转换中，我创建了一个带有一些属性的 uml 类。属性是我还创建的枚举类型。某些属性应该获得默认值。默认值应该是枚举文字。

现在的问题是，如何将枚举文字添加`defaultValue`到`Property`.

我已经发现我必须使用`ValueSpecification`. 但是 UML 上层结构对此并没有说明太多（第 139 页 f.）。我必须使用哪些属性将 defaultValue 设置为枚举文字？

我认为我遇到的主要问题是，`ValueSpecification`我不清楚使用。目前我只`default`用来设置默认值，即String类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:43:59.327

-`defaultValue`属性接受一个`ValueSpecification`参数。所以在你的情况下，你需要一个`InstanceValue`为此目的（它派生自`ValueSpecification`）。`InstanceValue`本身有一个`instance`-property，它接受一个as`InstanceSpecification`参数。由于`EnumerationLiteral`派生自`InstanceSpecification`，您现在可以简单地将其中一个分配`EnumerationLiterals`给它。

# jquery - 使用表单添加带有 fullCalendar 的事件

> ID：11989970
> 
> 赞同：1
> 
> 时间：2012-08-16T14:55:33.100
> 
> 标签：jquery, fullcalendar

我正在尝试使用 fullCalendar 添加事件。这是我的 add_event.php 。我首先有一个表单，用户可以在其中放置事件标题、开始日期、结束日期等信息，在表单之后我有这个 jquery 代码。

```
<script type="text/javascript">

    function add_event()
    {  
        var form = $('#calendar').serialize();

        $.ajax({   
                type : 'POST',  
                url: '<?php echo site_url()."/public/calendar/addEvent" ?>',
                method: 'post',
                data: form,
                success: function(data)
                {   
                     if(data == 'true')
                       {   
                          var event = {
                        title : "AJAX",
                        start : "2012-08-16",
                        end   : "2012-08-17"
                           };

                                              $('#calendar').fullCalendar( 'renderEvent', event, true )
                     }                  
                     else
                    {   
                        // Display error
                    }  
            }

        });
    document.write('end');}

</script> 
```

现在我只是硬编码了“添加事件”，打印了“结束”，但事件没有添加到日历中。我做错了什么？另外，我想知道控制器如何发送开始日期、结束日期等的值？

谢谢您的帮助。

# php - 当数组元素数量变大时，foreach 会变得低效吗？

> ID：11989975
> 
> 赞同：1
> 
> 时间：2012-08-16T14:55:50.033
> 
> 标签：php, arrays

目前我在使用array_replace时使用foreach来搜索键：

```
$grades = array(
               0 =>array('id'=>1, 'grade'=>4),
               1 =>array('id'=>5, 'grade'=>2), 
               2 =>array('id'=>17,'grade'=>1),
             )
$replacement = array('id'=>17,'grade'=>3);

foreach($grades as $key=>$grade){
    if($grade->id ==$replacement['id'] )
       $found = $key;
}
$new_grades = array_replace($grades, array($found_key=>$replacement)); 
```

我想知道当 $grades 数组中的元素数量增长过多时，这是否会变得低效。有没有更好的方法来进行搜索和替换工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T14:59:06.410

执行时间随着数组中元素的数量线性增长 ( `O(N)`)。使用更好的数据结构，即以关联方式使用数组，以 ID 作为索引：

```
$grades = array(
    1 => array('grade'=>4),
    5 => array('grade'=>2), 
    17 => array('grade'=>1)
); 
```

那么[查找成本是常数 ( `O(1)`)](https://stackoverflow.com/questions/247467/how-are-associative-arrays-implemented-in-php)。你可以做：

```
$grades[$replacement['id']] = array('grade' => $replacement['grade']); 
```

或类似的东西，具体取决于您的数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T14:59:06.427

是的，这可以大大提高效率。

```
$grades = array(
    1   => 4,
    5   => 2,
    17  => 1,
);
$replacement = array(
    17  => 3,
);
$grades = array_merge($grades, $replacement); 
```

如果您需要与 ID 相关的更多信息而不仅仅是成绩，那么您仍然需要像 Felix Kling 那样涉及更多的数据结构。但是您的问题中没有这样的要求，所以我不假设。

# asp.net-mvc-4 - Google Plus API Nuget 包

> ID：11989977
> 
> 赞同：1
> 
> 时间：2012-08-16T14:55:58.857
> 
> 标签：asp.net-mvc-4, nuget, google-plus, nuget-package

我需要通过我的 ASP.NET MVC 4 应用程序创建帖子等。

有谁知道**Google Plus API**的体面库？*（最好作为 NuGet 包）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:29:35.953

目前没有公开记录的 API 可让您自动发布到您的 Google+ 信息页或信息流。

HootSuite 目前正在使用的 API 正在慢慢向其他供应商开放。请参阅[https://plus.google.com/u/0/104946722942277428266/posts/LUi2ZNyRHag](https://plus.google.com/u/0/104946722942277428266/posts/LUi2ZNyRHag)了解有关即将发生的事情以及如何注册以请求访问此内容的更多信息。这样您就可以在 Google+ 信息页上发帖。

还有一个“Google+ History API”，目前处于开发者预览版中，它允许您为用户创建时刻，但如果他们选择这样做，他们将需要在他们的流中手动分享这些时刻。有关详细信息，请参阅[https://developers.google.com/+/history/](https://developers.google.com/+/history/)。

# php - 通过 PHP 抓取外部网站上的部分链接

> ID：11989981
> 
> 赞同：0
> 
> 时间：2012-08-16T14:56:05.337
> 
> 标签：php, html, dom

我正在使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net)来获取我需要的一些值。我现在要做的是获取 URL 的一部分。

这是源的样子：

```
<a class="base-header-soldier-link" href="/bf3/soldier/someprofile/stats/123456789/">
  someprofile
</a> 
```

我正在尝试检索值“123456789”，而不使用 URL 的其余部分。

我正在使用此代码来检索 URL：

```
foreach($html->find('.base-header-soldier-name a') as $e)
{
    $battlelog_id = $e->href;
} 
```

所以基本上我想为 URL 的其余部分去掉它。

URL 可以根据用户名更改，因此“someprofile”将被替换。

你们中的任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T15:28:12.970

你可以通过几种方式做到这一点，最简单的是[basename()](http://php.net/manual/en/function.basename.php)

```
<?php 
$url = '/bf3/soldier/someprofile/stats/123456789/';
echo basename($url);//123456789
?> 
```

或者更健壮的方法是[pathinfo()](http://uk3.php.net/manual/en/function.pathinfo.php)

```
<?php 
$url = '/bf3/soldier/someprofile/stats/123456789/';
$url_parts = pathinfo($url);
/*
Array
(
    [dirname] => /bf3/soldier/someprofile/stats
    [basename] => 123456789
    [filename] => 123456789
)
*/

echo $url_parts['filename']; //123456789
?> 
```

甚至[爆炸（）](http://uk3.php.net/manual/en/function.explode.php)

```
<?php 
$url = '/bf3/soldier/someprofile/stats/123456789/';
$url_parts = explode('/', rtrim($url,'/'));

echo end($url_parts);//123456789
?> 
```

# c# - 具有完全相同命名空间的模棱两可的引用

> ID：11989983
> 
> 赞同：52
> 
> 时间：2012-08-16T14:56:07.627
> 
> 标签：c#, asp.net-mvc-3, ef-code-first, resharper

该类`RC`没有链接到数据库，它是一个简单的类。班级只有一个地方，不偏袒。Aérochem.Domain dll 项目编译得很好。

注意：如果我在快速修复菜单中选择两个相同的命名空间之一，它什么也不做。

注意2：这发生在几个类上（一些与数据库有关，一些与数据库无关）

有没有办法解决这个问题或找出问题所在？

![在此处输入图像描述](../Images/47006d2758bb04cc9b58c88065bea48d.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-01-13T16:10:29.600

我有同样的问题。我使用 ReSharper。我的问题的解决方案不是清理解决方案，而是删除`suo`-file。希望有帮助。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-05-20T09:17:11.190

至于任何未来用户的参考：这个线程涵盖了四个答案，而两个在评论中。我已经多次遇到这个问题，其中三个答案过去对我有帮助，所以如果您遇到同样的问题，请尝试以下任何一个：

*   清理和/或重建解决方案，然后重新分析 Resharper 中的文件。
*   重新启动 Visual Studio 然后重新分析
*   删除 bin/ 文件夹，然后重新分析
*   （显然删除 suo 文件也有帮助，虽然我从来没有这样做过，也不明白它应该如何帮助）
*   以上三者的结合。

（这并不是一个真正的新答案，它更多的是对发现的各种答案和评论的评论——它是一个社区维基，因此如有必要，请随时调整）

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-09-30T16:04:08.307

对于像我一样不想删除其解决方案文件的**ReSharper用户：**`*.suo`

**通过以下方式清除缓存**：`ReSharper -> Options -> Environment -> General -> Clear Caches`！

[![清除 ReSharper 缓存](../Images/d4c9ea65ad83c879bbe0c38d85bf8e6b.png)](https://i.stack.imgur.com/NrFAS.png)

感谢[AUSTX_RJL对此](https://stackoverflow.com/users/235343/austx-rjl)[答案](https://stackoverflow.com/a/21095924/177710)的评论。我想让他的宝贵信息更具知名度。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-03T15:34:59.410

`.dll`已经在我的文件`/bin`夹中了。

当我删除它时，它摆脱了这个错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-02T10:25:18.737

我遇到了这个问题，并且在 Visual Studio 上也安装了 ReSharper。

![打印屏幕 1](../Images/1a0185bbf813895f995585625e3d244b.png)

![打印屏幕 2](../Images/f473989d8369367c6de38fd79a66afbf.png)

[我在 ReSharper跟踪器](http://youtrack.jetbrains.com/issue/RSRP-415687)上打开了 bug 票，开发团队建议我这样做：

**解决方案：**

这个问题可以通过删除来解决`Solution User Options (.Suo) File`。此文件存储在项目根目录中但被隐藏。你需要检查`Folder Options-> View-> Show hidden files, folders, drives.`，如果你打开了这个项目，你需要关闭 Visual Studio，因为它被 Visual Studio 使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-01T11:51:43.917

对我来说，这是因为我通过项目引用和程序集引用都引用了 DLL。删除程序集引用解决了该问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-10T20:24:45.660

当两个包不明确地引用同一个 dll 时，我遇到了同样的问题，这对我有用：

`alias name`通过将以下内容放入我的`.csproj`文件中，我已经给了其中一个包（名为 Dapper.StrongName）：

```
 <Target Name="ChangeNameAlias" BeforeTargets="FindReferenceAssembliesForReferences;ResolveReferences">
    <ItemGroup>
      <ReferencePath Condition="'%(FileName)' == 'Dapper.StrongName'">
        <Aliases>AliasName</Aliases>
      </ReferencePath>
    </ItemGroup>
  </Target> 
```

然后添加`namespace`as`using AliasName::Dapper;`

我在这里添加了一个帖子：[不明确的扩展方法](https://stackoverflow.com/questions/32201437/dapper-ambiguous-extension-methods/55620553#55620553)

查看相关文章：

*   [外部别名（C# 参考）](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/extern-alias)
*   [:: 运算符（C# 参考）](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/namespace-alias-qualifer)
*   [C# 2.0：在一个应用程序中使用同一个 dll 的不同版本](https://blogs.msdn.microsoft.com/abhinaba/2005/11/30/c-2-0-using-different-versions-of-the-same-dll-in-one-application/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-19T21:33:27.220

我在一个 .NET 标准项目（我称之为宿主项目）中遇到了这个问题。导致问题的命名空间位于同一解决方案中的另一个引用项目（也是 .NET 标准项目）中。

我做了所有事情：清理、删除 resharper 缓存、关闭 soln、删除 .suo、删除二进制文件。似乎没有任何效果。

然后我将宿主项目转换为 .NET 框架，然后问题就消失了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-31T06:27:31.110

如果您的项目结构在一个解决方案下包含多个项目，那么您必须删除每个项目中 bin 文件夹的内容。这样做解决了我面临的错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-04-26T22:23:13.597

我知道这是一个很老的问题，但也许这会对某人有所帮助。如果在 Asp.Net Core 2+ 中使用 c# razor，如果你有这个问题。

1) 将文件内容复制到记事本。

2) 删除 .cshtml 文件。

3) 创建同名的 .cshtml 文件。

4) 将记事本中的内容复制到新文件中

我不知道这是否只是一个奇怪的错误，还是将项目从 Core 1.0 升级到 2+ 的结果，但它最终为我解决了这个问题。这对我来说在 Visual Studio 2017 和 2019 中都是一个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-01T15:58:46.977

就我而言，我在其内部引用了 proyect X。所以问题不在于 ReSharper（而是 ReSharper 添加了参考......）

# c# - C# 如何使用 TCPClient 发送多个字节流？

> ID：11989988
> 
> 赞同：-1
> 
> 时间：2012-08-16T14:56:22.503
> 
> 标签：c#, tcpclient, networkstream

我正在尝试使用 TCP Client来制作**登录功能。**我有两种形式：客户端和服务器端。

客户端处理用户输入，而服务器端连接到数据库。

问题是阅读器结果，它总是将两个输入组合成一个长字符串，如下所示：

```
 myusernamemypassword 
```

这是客户端**发送方**的一部分：

```
 byte[] byteUsername = Encoding.Unicode.GetBytes(username);
    byte[] bytePassword = Encoding.Unicode.GetBytes(password);

    NetworkStream stream = client.GetStream();

    stream.Write(username, 0, byteUsername.Length);
    stream.Write(password, 0, bytePassword.Length); 
        //if offset != 0, the code always return ArgumentOutOfRangeException 
```

和服务器端的**读者：**

```
 return Encoding.Unicode.GetString(buffer, 0, buffer.Length) 
```

经过长时间的搜索，我找到了解决方案，**但它只能处理两个字符串**；第三个+字符串将与第二个字符串组合在一起。我需要为其他功能发送至少 4 个字符串。

这是**更新的阅读器**代码：

```
List<string> list = new List<string>();
int totalRead = 0;
do
{
    int read = client.GetStream().Read(buffer, totalRead, buffer.Length - totalRead);

    totalRead += read;

    list.Add(Encoding.Unicode.GetString(buffer, 0, totalRead));

} while (client.GetStream().DataAvailable); 
```

我不太明白这段代码。它如何知道哪些字节是第一个字符串的一部分？`size`of`Read()`参数是`length-totalRead`which is `length - 0`，它应该返回整个缓冲区对吗？

大佬们有什么解决办法吗？

之前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:58:28.263

您应该在每个字符串前面加上它的长度（以字节为单位，而不是字符）作为 4 字节整数。
这样，服务器将知道要读入每个字符串的字节数。

# matlab - 如何处理非数字文本文件并最有效地转换为结构？

> ID：11989991
> 
> 赞同：2
> 
> 时间：2012-08-16T14:56:36.490
> 
> 标签：matlab

我有一堆`.txt`具有以下格式的文件：

```
|file | time | color     | tags       |
|1    | 1:10 | red       | ok, correct|
|2    | 2:20 | blue      | bad        |
|3    | 1:20 | yellow    | sometag    | 
```

第一行指定列名。随后的行是“数据库”条目。

我想读入这个文件，并将所有信息放入一个 Matlab 结构中。我想知道最有效的方法是什么。

*   `textread`单独处理`'delimiter', '\n'`每一行？
*   `textread``'delimiter', '|'`必须确定哪些条目属于一起？
*   `fread`逐行？

我喜欢 with 的便利性`textread`，但是为每一列（带有循环）`'delimiter', '\n'`取出单独的条目是相当痛苦的。`for`或者，我可以使用以下方法拆分每一行`regexp`：

```
regexp(file{1}, '\|', 'split') 
```

但这只会拆分每一行，并且不会处理空格（为此我需要再次`regexp`调用才能摆脱）。

那么最直接（甚至可能是最有效）的方法是什么？

**EDIT1**我想构建一个结构`db = struct('file', [], 'time', [], 'color', [], 'tags')`，一旦我读入第一行就很容易创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T15:24:45.697

让我们使用[textscan](http://www.mathworks.nl/help/techdoc/ref/textscan.html)：

```
fid = fopen('asdf.txt');
header = textscan(fid, '%s', 5, 'delimiter', '|');
data=textscan(fid, '|%d %s %s %s','delimiter','|');
fclose(fid); 
```

这使：

```
data =
    [3x1 double]    {3x1 cell}    {3x1 cell}    {3x1 cell} 
```

从这里很容易转到您想要的结构。字符串还有一些额外的空格，需要修剪：

```
data{2} = strtrim(data{2}); 
```