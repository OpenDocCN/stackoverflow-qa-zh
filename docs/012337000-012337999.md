# StackOverflow 问答 12337000-12337999

# java - Java CompareToIgnoreCase

> ID：12337001
> 
> 赞同：0
> 
> 时间：2012-09-09T06:24:34.497
> 
> 标签：java, string, string-comparison

我正在创建一种方法，其中用户输入必须键入 A/B 才能获得返回。如何使我的代码不区分大小写以使其正常工作？

```
 String examcode (String code) {
    if (code.compareToIgnoreCase("A")) {
        EXAM_NAME = "Subject A";
    }
    else if (code.compareToIgnoreCase("B")) {
         EXAM_NAME = "Subject B";
    }
    else {
        EXAM_NAME = "no code";
    }
    return EXAM_NAME;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T06:27:46.783

使用`equalsIgnoreCase()`，不使用`compareToIgnoreCase()`。

```
if (code.equalsIgnoreCase("A")) {
   EXAM_NAME = "Subject A";
} //... 
```

如果要用于`compareToIgnoreCase()`检查相等性，则需要将结果与`0`：

```
if (code.compareToIgnoreCase("A") == 0) {
    //... 
```

就像任何其他`compareTo`方法一样。但是在这里使用它没有任何优势。

## 编辑：

您的整个方法的替代方法可能是使用不区分大小写的映射。像这样的东西：

```
Map<String, String> subjects = new TreeMap<String, String>(String.CASE_INSENSITIVE_ORDER);

subjects.put("A", "Subject A");
subjects.put("B", "Subject B");

//...
String subjectName = subjects.get(code);
if ( subjectName == null ) {
    subjectName = "no code";
} 
```

或者，您也可以使用普通的区分大小写的映射，并在执行映射操作之前将所有键转换为小写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T06:28:22.623

只需使用该方法 - [`String.equalsIgnoreCase(java.lang.String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)它返回 a`boolean`并完成您正在寻找的工作。

`if (code.compareToIgnoreCase("A"))`无效，因为`compareToIgnoreCase`返回`int`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T06:30:21.460

阅读[String 的 javadoc 将为](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)您提供答案。谷歌本可以做到这一点。

*   使用`code.equalsIgnoreCase("your string")`which 返回一个布尔值，或

*   使用`code.compareToIgnoreCase("your string") == 0`. `compareToIgnoreCase`给你一种方法来确定两个字符串的“顺序”。再次，享受 javadoc。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T06:35:13.457

使用相同的代码，但使用 equalsIgnoreCase(String) 而不是 compareToIgnoreCase(String)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T06:28:40.383

你想要的是`String#equalsIgnoreCase(String)`返回一个布尔值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T06:29:48.293

在比较之前使用 String.toLowerCase()（或 String.toUpperCase()）。

```
if (code.toLowerCase().equals("a")) {
    EXAM_NAME = "Subject A";
} 
```

请注意，与所有字符串方法一样，code.toLowerCase 不会更改存储在 'code' 中的字符串，而是以小写形式返回 'code' 值的副本。

# php - 多语言选择框的数据返回值，而它是英文

> ID：12337002
> 
> 赞同：1
> 
> 时间：2012-09-09T06:24:44.823
> 
> 标签：php, forms, zend-framework, date

我正在使用 Zend 表单进行预订网站，其中预订日期作为 SELECT BOX 输入类型，日期格式类似于 MMMM d, yyyy 'Sun 09 Sep, 2012'。但我收到了多语言的值 .. 比如法语、阿拉伯语等，而选择中的日期值都是英语。

我需要这方面的帮助，请你让我知道如何用英文强制它..或者给我可能的解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:08:53.307

这里有几个使用[Zend_Filter的简单解决方案](http://framework.zend.com/manual/1.12/en/zend.filter.set.html)

```
$date = new Zend_Form_Element_Text('date');
$date->setLabel('Date');
$date->setAttrib('placeholder', 'DD/MM/YYYY'); //use of placeholder text may help encourage correct format
$date->addFilter('Digits'); //Option #1 filter out all characters except digits, add formatting back in controller or model (This is the one I prefer)
$date->addFilter('PregReplace', array('match' => '/pattern/', 'replace' => '/')); //option #2 filter and replace based on preg match       
$this->addElement($date); 
```

# javascript - 使用字符串作为 GPS 坐标

> ID：12337005
> 
> 赞同：4
> 
> 时间：2012-09-09T06:25:27.697
> 
> 标签：javascript, html, google-maps-api-3, gps

我正在使用 javascript，并且我有字符串形式的 GPS 坐标，我正在尝试将它们放入`google.maps.LatLng(59.327383, 18.06747)`格式中，但在决定如何做时遇到了麻烦。我有一个变量：

```
GPSlocation = "(37.700421688980136, -81.84535319999998)" 
```

我需要它进入 google.maps.LatLng(num, num) 格式。我怎样才能把这个字符串放在那里？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-09T06:41:04.317

您可以使用标准字符串操作来提取值：

```
var GPSlocation = "(37.700421688980136, -81.84535319999998)";
var LatLng = GPSlocation.replace("(", "").replace(")", "").split(", ")
var Lat = parseFloat(LatLng[0]);
var Lng = parseFloat(LatLng[1]);

google.maps.LatLng(Lat, Lng) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T06:32:52.673

您可以从中创建一个数组（使用`JSON.parse`），然后使用`apply`将坐标“提供”给该方法：

```
GPSlocation = JSON.parse( "(37.700421688980136, -81.84535319999998)" 
                          .replace(/^\(/,'[')
                          .replace(/\)$/,']')
                        );
google.maps.LatLng.apply(null,GPSlocation); 
```

或者，您可以替换括号并使用`split`来创建一个数组，并`LatLng`以常规方式调用该方法。此方法需要`Number`对 Array 值进行额外的转换。

```
GPSlocation = "(37.700421688980136, -81.84535319999998)"
               .replace(/^\(|\)$/,'')
               .split(',');
google.maps.LatLng(+GPSlocation[0],+GPSlocation[1]); 
```

要从字符串中检索坐标数组，您还可以使用：

```
GPSlocation = ''.slice.call('(37.700421688980136, -81.84535319999998)',
                             1,this.length-1)
                       .split(',')
                       .map(function(a){return +a;});
google.maps.LatLng(GPSlocation[0],GPSlocation[1]); 
```

# php - 定位元素

> ID：12337012
> 
> 赞同：1
> 
> 时间：2012-09-09T06:26:49.987
> 
> 标签：php, drupal, css, html

我想将所有子图片放在定义的灰色 (#999) div 元素中。我指定了相对的顶部和左侧元素，但图片一直放在我的文档中，而不是仅在我的 div 中相对 - 为什么会这样？我怎样才能正确地做到这一点？

```
<div style="height:400px;width:600px; background-color:#999999">
<?php

// Hiding notices:
error_reporting(E_ALL^E_NOTICE);

?>

<link rel="stylesheet" type="text/css" href="demo.css" />
<link rel="stylesheet"     href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/ui-darkness/jquery-ui.css" type="text/css" media="all" />
<link rel="stylesheet" type="text/css" href="fancybox/jquery.fancybox-1.2.6.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="gallery/fancybox/jquery.fancybox-1.2.6.pack.js">        </script>
<script type="text/javascript" src="gallery/script.js"></script>

<div id="main">
<div id="gallery">

<?php

/* Configuration Start */

$thumb_directory = 'gallery/img/thumbs';
$orig_directory = 'gallery/img/original';

$stage_width=400;   // How big is the area the images are scattered on
$stage_height=300;

/* Configuration end */

$allowed_types=array('jpg','jpeg','gif','png');
$file_parts=array();
$ext='';
$title='';
$i=0;

/* Opening the thumbnail directory and looping through all the thumbs: */

$dir_handle = @opendir($thumb_directory) or die("There is an error with your image     directory!");

$i=1;
while ($file = readdir($dir_handle)) 
{
/* Skipping the system files: */
if($file=='.' || $file == '..') continue;

$file_parts = explode('.',$file);
$ext = strtolower(array_pop($file_parts));

/* Using the file name (withouth the extension) as a image title: */
$title = implode('.',$file_parts);
$title = htmlspecialchars($title);

/* If the file extension is allowed: */ 
if(in_array($ext,$allowed_types))
{
    /* Generating random values for the position and rotation: */
    $left=rand(0,$stage_width);
    $top=rand(0,$stage_height);
    $rot = rand(-45,45);

    if($top>$stage_height-130 && $left > $stage_width-230)
    {
        /* Prevent the images from hiding the drop box */
        $top-=120+130;
        $left-=230;
    }

    /* Outputting each image: */

    echo '
    <div id="pic-'.($i++).'" class="pic" style="height:100px; width:138px; top:'.$top.'px;left:'.$left.'px;background:url('.$thumb_directory.'/'.$file.') no-repeat; -moz-transform:rotate('.$rot.'deg); -webkit-transform:rotate('.$rot.'deg); position: relative;">
    <a class="fancybox" rel="fncbx" href="/dev/'.$orig_directory.'/'.$file.'" target="_blank">'.$title.'</a>
    </div>';
}
}

/* Closing the directory */
closedir($dir_handle);

?>
</div>
</div>
</div> 
```

链接：http: [//inetgate.ca/dev/portfolio](http://inetgate.ca/dev/portfolio)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:42:18.047

如果要使用`top`and`left`属性，`position: absolute;`请在 div 及 `position: relative;`其父级 (#gallery) 上进行设置。

您可以使用以下两个 CSS 规则：

```
#gallery {
  position: relative;
}

.pic {
  position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T06:48:32.137

制作包含图像的 div

```
position: absolute; 
```

这里

```
echo '
<div id="pic-'.($i++).'" class="pic" style="height:100px; width:138px; top:'.$top.'px;left:'.$left.'px;background:url('.$thumb_directory.'/'.$file.') no-repeat; -moz-transform:rotate('.$rot.'deg); -webkit-transform:rotate('.$rot.'deg); position: absolute;">
<a class="fancybox" rel="fncbx" href="/dev/'.$orig_directory.'/'.$file.'" target="_blank">'.$title.'</a>
</div>'; 
```

# java - 密码模式匹配失败

> ID：12337013
> 
> 赞同：0
> 
> 时间：2012-09-09T06:26:54.417
> 
> 标签：java, regex

我的密码条件是，最少 8 个字符，最少 1 个特殊字符，最少 1 个数字

为此，我编写了一个简单的类来验证，但最终失败了。

非常感谢任何帮助。

```
public class PasswordVerifier {
    private static final String SPECIAL_CHARACTERS = "(`~!@#$%^&*()_+=-][;'/.,\\<>?|:\"}{)";

    public static void main(String... args) {
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        try {
            String password = in.readLine();
            if(!password.matches("^.*(?=.{8,})(?=.*[0-9])(?=.*[SPECIAL_CHARACTERS]).*$")){
                System.out.println("Password does not satisfy compliant");
            } else {
                System.out.println("Yes.. gets through");
            }
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:40:01.040

这可能适合您的要求：

```
private static final String SPECIAL_CHARACTERS = "(`~!@#$%^&*()_+=-\\]\\[;'/.,\\<>?|:\"}{)";

public static void main(String[] args) {
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    try {
        String password = in.readLine();
        if(!password.matches("((?=.*\\d)(?=.*["+SPECIAL_CHARACTERS+"]).{8,})")){
            System.out.println("Password does not satisfy compliant");
        } else {
            System.out.println("Yes.. gets through");
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

正则表达式指定：

*   输入必须包含 0-9 的一位数字
*   必须在您定义的 SPECIAL_CHARACTERS 列表中包含一个特殊符号
*   长度应至少为 8 个字符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T06:54:11.117

我不会费心尝试编写正则表达式。包含所有条件的 re 将难以编写，难以理解，并且可能效率不高。只需明确编码您的要求：

```
boolean isAcceptablePassword(String pwd) {
    boolean numeric = false, special = false;
    if (pwd.length() >= 8) {
        for (int i = pwd.length() - 1; !numeric && !special && i >= 0; --i) {
            char c = pwd.charAt(i);
            numeric = numeric || Character.isDigit();
            special = special || SPECIAL_CHARACTERS.indexOf(c) >= 0;
        }
    }
    return numeric && special;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T06:58:39.943

如果是字符类，则不能有`]`或`-`在中间，因为它们对字符类语法有意义。如果你想让它们在那里，它们必须是类中的前两个元素，`-`在`]`.

# jsp - 在jsp中打印响应头

> ID：12337017
> 
> 赞同：1
> 
> 时间：2012-09-09T06:27:48.833
> 
> 标签：jsp, http-headers, response

我试图理解 j2ee 中的响应标头概念。我在 servlet 中设置标头值。现在如何确认标头已更改或添加。是否可以在 jsp.js 中打印响应标头？
如果是，那么如何？

# c - 赋值 C/C++ 中的不兼容类型

> ID：12337020
> 
> 赞同：0
> 
> 时间：2012-09-09T06:28:34.927
> 
> 标签：c, char, variable-assignment

编写以下代码以从一个文件中选择一些数据并复制到另一个文件中，但我在通知位置收到错误“**分配中的类型不兼容**”。我无法弄清楚导致此错误的原因。我很高兴得到您的帮助。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
     FILE *myfile;
     myfile=fopen("write.txt","a");

char *name;
int id,i=0,check,*w,n=0;
if(myfile)
{
  do
  {
    printf("Enter ID and Name of the student\n");
    scanf("%d%s",&id, name);
    fprintf(myfile,"%d$ %s@", id, name);
    printf("Are there any more students [y/n]");
  }while(getch()=='y');
  fclose(myfile);
}
printf("Do you want to shortlist the students [y/n]?");
if(getch()=='y')
{
    myfile=fopen("write.txt","r");
    while(check!=EOF)
    {
        check=getc(myfile);
        i++;
        if(check=='%')
            n++;
    }
    fclose(myfile);

    myfile=fopen("write.txt","r");

    int x[i-1];
    char car[n][20];

    int yolo,y=0,q=0,j,h,temp;

    for(j=0;j<i;j++)
    {
        x[j]=getc(myfile);
        if(x[j]=='$')
        {
            w[q]=x[j-1];
            yolo=temp=j;
            q++;
        }
        else
        if(x[j]=='@')
        {
            yolo++;
            for(h=0;h<j-temp;h++)
                car[y]=(char)x[yolo]; // ERROR
            y++;
        }
    }
    fclose(myfile);
    //char data= new char[i++];
    //fscanf();
    myfile=fopen("shortlisted.txt","a");

    if(myfile)
    {
        printf("Type the ID of the student you want to shortlist:\n");
        scanf("%d",id);
    }
}
else
    printf("The file you specified doesn't exists");
printf("Hello world!\n");
return 0; 
```

}

这段代码目前需要做一些工作，但我想在完成代码之前删除所有可能的错误

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:31:00.467

car[y] 是一个字符数组，而 (char)x[yolo] 只是一个字符。您正在尝试将一个 char 分配给一个字符数组。

如果要将 car[y] 中的第一个字符设置为 x[yolo] 的值，只需使用 car[y][0] = (char)x[yolo]。请注意，这不会将 x[yolo] 转换为 int 的 char 表示形式。要获得整数的 char * 表示，您需要使用[itoa](http://www.cplusplus.com/reference/clibrary/cstdlib/itoa/)。但即便如此，直接分配也行不通：您必须使用[strcpy](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)。

编辑：我注意到使用[sprintf](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)比使用 itoa 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:31:36.093

的类型`car[y]` 是`char[20]`（即 20 个字符的数组），你尝试在里面写一个`char`。这是不正确的。

您可能想要使用字符串函数，如`snprintf`or `strncpy`（可能使用一些指针算法）

您应该在编译器上启用所有警告和调试信息（即用于`gcc -Wall -Wextra -g`在 Linux 上编译），并学习使用调试器（即`gdb`在 Linux 上）

# java - 在 Android 中扩展抽象类：一个 LocationProvider

> ID：12337024
> 
> 赞同：0
> 
> 时间：2012-09-09T06:29:12.100
> 
> 标签：java, android, class, location-provider

这可能是一个简单/愚蠢的问题。我找不到任何关于它的文档。我想在**Android**中创建自己的*LocationProvider*。*LocationProvider*是一个抽象类，没有构造函数。

 ***```
import android.location.LocationProvider;

public class provider extends LocationProvider {
    public provider() {
    }

    @Override
    public int getAccuracy() {
        // TODO Auto-generated method stub
        return 0;
    }

...

    @Override
    public boolean supportsSpeed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

*Eclipse*在这里给了我错误：“*隐式超级构造函数 LocationProvider() 不可见。必须显式调用另一个构造函数*”

但当然，空的超级构造函数是不可见的——LocationProvider*没有*构造函数。我应该如何创建没有构造函数的抽象类的子类？

例如，这会引发相同的错误：

```
public abstract class topabstractclass {
    private topabstractclass() {
    }
}

class mysubclass extends topabstractclass{
    mysubclass() {      
    }
} 
```

我无法修改 Android 的 LocationProvider，因此无法创建公开的构造函数。这只是一个本质上不可子分类的类吗？android 只是不希望我们创建 LocationProviders 吗？其他 LocationProviders 是如何完成的？谁能提供一个例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:43:00.707

你的假设是正确的。**不可能扩展一个所有构造函数都是私有的抽象类**。这意味着，正确地，谷歌不希望你扩展`LocationProvider`.

首先，请注意其他项目可能会[克隆`LocationProvider`](http://locify.googlecode.com/svn/branches/android/source/de/enough/polish/android/location/LocationProvider.java). 然后他们创建它的[子类](http://locify.googlecode.com/svn/branches/android/source/de/enough/polish/android/location/AndroidLocationProvider.java)，并且可以在他们认为合适的时候使用它们。

现在，我猜你想知道*为什么* `LocationProvider`以这种方式受到限制。文档对此进行了解释：

> 每个提供者都有一套可以使用它的标准；例如，一些供应商需要 GPS 硬件和对许多卫星的可见性；其他人则需要使用蜂窝无线电，或访问特定运营商的网络或互联网。它们还可能具有不同的电池消耗特性或用户的货币成本。Criteria 类允许根据用户指定的标准选择提供程序。

在这里，我们必须在字里行间稍微阅读一下。考虑有多少信息直接来自运营商并且是特定于电话的。这意味着在您的应用程序中对其进行篡改可能会阻止设备运行，因为其提供者不再遵循其深奥的规则。这就是 Android[为我们设置所有提供程序的](http://developer.android.com/training/basics/location/locationmanager.html)原因。*（此链接非常方便保留。它将向您展示如何在没有您自己的提供商的情况下访问该位置信息。）*

所以，不，你不能*暗示** extend `LocationProvider`。您必须使用已经存在的一种，因为它们是专门为在载体、硬件和软件之间工作而设计的。

**如@Funtik 的回答所示，您可以`LocationProvider`使用`String, ILocationManager`签名进行扩展。但是，它`{@hide}`在以前的版本中没有文档，标有 ，并且不受支持，因此您可能需要花一些时间来获得正确的构造方法。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T06:45:00.527

你在谈论`android.location.LocationProvider`吗？

根据 grepcode.com 它有一个公共构造函数`public LocationProvider(String name, ILocationManager service)`你可以试试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T06:50:10.463

你是对的，你不能从一个构造函数都是私有的类继承。通常我希望它们只是*包*私有的，这样同一个包中的其他类，可能是由它的实现者编写的，仍然可以从它继承。

但是，在 Android 4.1.1 上，它看起来`LocationProvider` *确实*有一个[public constructor](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/location/LocationProvider.java#LocationProvider.%3Cinit%3E%28java.lang.String,android.location.ILocationManager%29)。它的签名建议您应该实施[`ILocationManager`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/location/ILocationManager.java#ILocationManager)。

回顾版本，这个构造函数是在 2.3 中添加的。2.2.2 版[有一个](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2.2_r1/android/location/LocationProvider.java#LocationProvider.%3Cinit%3E%28java.lang.String%29)只需要一个`String`. 该构造函数一直追溯到 1.6。***

# asp.net - 在 IIS 7.5 中部署 Web 应用程序后链接不起作用

> ID：12337026
> 
> 赞同：0
> 
> 时间：2012-09-09T06:29:18.970
> 
> 标签：asp.net, .net, iis, deployment

在 IIS 7.5 中部署 Web 应用程序（在 VS 2010，ASP.NET 4.0 中开发）后，链接在 IE 9 中不起作用。但在我的开发系统中，Web 应用程序运行良好。我通过参考网站 www.shubho.net/2011/01/quick-deployment-of-aspnet-applications.html 部署 Web 应用程序

我给了这样的路径

```
<tr>
    <td colspan="2" align="center" class="style3">
        For new Registration please <a href="~/UserInfo.aspx">Click here</a> 
    </td>
</tr> 
```

我在第一页中给出了这样的链接。但是当我单击链接时，显示以下错误。我也试过“../UserInfo.aspx”。

无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。

请查看以下 URL 并确保其拼写正确。

请求的 URL：/UserInfo.aspx

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:48:24.763

波浪*号* **仅对**ASP.Net 控件`~`具有特殊含义。它是应用程序根目录的快捷方式（或占位符），并由具有正确路径的框架替换。它在“普通 html”中没有任何意义。

 **您上面的链接是标准的`HTML a tag (anchor tag)`。

如果您想让您的 HTML 成为 ASP.Net (HTML) 服务器控件的标记，则必须为其提供`id`属性`runat="server"`。然后它将“理解”波浪号的含义。

或者，如先前的答案所述，删除波浪号`~`并简单地提供相应的文档或资源的根相对链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:06:23.357

如果为链接指定绝对路径怎么办？

/用户信息.aspx

听起来对于某些文件夹，UserInfo.aspx 页面不包含在其中。**

# google-maps - 可拖动捕捉到道路距离标记

> ID：12337033
> 
> 赞同：1
> 
> 时间：2012-09-09T06:30:46.623
> 
> 标签：google-maps, google-maps-api-3

我正在使用在[http://exploregooglemaps.blogspot.com.br/2012/02/measuring-distance-with-markers.html](http://exploregooglemaps.blogspot.com.br/2012/02/measuring-distance-with-markers.html)找到的一些有用代码来添加标记和测量距离。

我希望标记在默认情况下捕捉到道路，但是当用户按住 shift 键时，会使用直线。

我已经设法为 shift 键实现了 if 语句，当我按住 shift 键时会绘制一条路径，但是默认情况下不会绘制到道路路径的捕捉。

我正在调用两个函数，一个用于绘制直线**drawPath**，另一个用于绘制与道路线**drawPathD的对齐**

任何帮助将非常感激。

```
<code>
var map,
service = new google.maps.DirectionsService(),
shiftPressed = false,
poly;

var path = [];

shiftPressed = false;
var markers = [];
var routePoints = [];

google.maps.event.addDomListener(document, "keydown", function () {
shiftPressed = true;
});
google.maps.event.addDomListener(document, "keyup", function () {
shiftPressed = false;
});

function $(id) {
return document.getElementById(id);
}

var map;
var mapOptions = {
center: new google.maps.LatLng(-23.5489433, - 46.6388182),
zoom: 15,
mapTypeId: google.maps.MapTypeId.ROADMAP
};

var markers = [];
var line;

function initialize() {
map = new google.maps.Map($("map_canvas"), mapOptions);
line = new google.maps.Polyline({
map: map,
strokeColor: "#FF3333",
strokeOpacity: 0.5,
strokeWeight: 8
});

google.maps.event.addListener(map, 'click', function (event) {
var marker = new google.maps.Marker({
map: map,
position: event.latLng,
draggable: true
});

if (shiftPressed) {

markers.push(marker);
drawPath();

} else {

markers.push(marker);
drawPathD();

}

google.maps.event.addListener(marker, 'dblclick', function (event) {
marker.setMap(null);
drawPath();
});

google.maps.event.addListener(marker, 'drag', function (event) {
drawPath();
});
});
}

function countMarkers() {
count = 0;
for (var i = routePoints.length - 1; i >= 0; i--) {
if (markers[i].getMap() == null) {
routePoints.splice(i, 1);
} else {
count++;
}
}
return count;
}

function drawPath() {
countMarkers();

var coords = [];
for (var i = 0; i < markers.length; i++) {
coords.push(markers[i].getPosition());
}
line.setPath(coords);

meters = google.maps.geometry.spherical.computeLength(coords);
$("distKm").value = Math.round(meters / 1000 * 100) / 100;
$("distMi").value = Math.round(meters / 1609 * 100) / 100;
}

function drawPathD(event) {
countMarkers();
var coords = [];

service.route({
origin: path[path.length - 1],
destination: event.latLng,
travelMode: google.maps.DirectionsTravelMode.WALKING
}, function (result, status) {
if (status == google.maps.DirectionsStatus.OK) {
path = path.concat(result.routes[0].overview_path);
routePoints.setPath(path);
}
});

meters = google.maps.geometry.spherical.computeLength(coords);
$("distKm").value = Math.round(meters / 1000 * 100) / 100;
$("distMi").value = Math.round(meters / 1609 * 100) / 100;
}

function clearMarkers() {
for (var i = 0; i < markers.length; i++) {
markers[i].setMap(null)
}
drawPath();
}
google.maps.event.addDomListener(window, 'load', initialize);

</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:40:06.570

以下是如何在 Google Maps API v3 中实现“对齐道路”功能： [polyline snap to road using google maps api v3](https://stackoverflow.com/questions/10513360/polyline-snap-to-road-using-google-maps-api-v3/)

# mysql - 3 表连接与 SUM 和 GROUP BY 不起作用

> ID：12337037
> 
> 赞同：3
> 
> 时间：2012-09-09T06:31:26.973
> 
> 标签：mysql, sql, group-by, left-join

我正在使用三张桌子。

1.  AccountingLine - 保存通用帐户详细信息
2.  Budget - 保存每个 AccountingLine 的预算数据（每个 AccountingLine 多行）
3.  实际 - 保存每个 AccountingLine 的实际成本数据（每个 AccountingLine 多行）

我试图在一个查询中获取结果，该查询将从 AccountingLine 表中返回 ALL ROWS，并从 Budget 和 Actuals 表中对每个 AccountingLine 的金额求和。

使用下面的 SQL，SUM 不适用于预算或实际数据。如果我删除其中一个连接和一个 SUM 函数，那么它会正确计算单个连接表。很奇怪……有人在 MySQL 中的三个或更多表上使用多个 SUM 函数遇到这个问题吗？

```
SELECT  A.*, SUM(B.`amount`) AS BudgetAmount, SUM(ACT.`amount`) as ActualAmount 
FROM accounting_line A 
LEFT JOIN budget B ON B.accounting_line_id = A.accounting_line_id
LEFT JOIN actual ACT ON  ACT.accounting_line_id = A.accounting_line_id
GROUP BY A.`accounting_line_id` 
```

通过发出上面的语句，我希望看到accounting_line 字段、每个accounting_line 的预算金额的SUM 和每个accounting_line 的实际金额的SUM。

我到处搜索，找不到多个 SUM 函数的实例。非常感谢您的任何建议。

乔什

表数据如下：

```
 Table: AccountingLine

      act_line_id   department
    ----------------------------------  
                1   Sales   
                2   HumanResources

Table: Budget

        budget_id   actg_line_id     amount
    ----------------------------------------------  
                1              1          3500.00
                2              2          5000.00
                3              2          15000.00

Table: Actual

        actual_id   actg_line_id     amount
    ----------------------------------------------  
                1              1        1000.00
                2              2         500.00
                3              2        9000.00 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T06:36:23.647

A`join`重复另一个表中的每个匹配行。因此，如果您在三个表中有 3 行并将它们连接在一起，那么您最终会得到 9 行。如果你求和，第二张和第三张表的每个总和都太高了 3 倍。

一种解决方案是在子查询中求和，以便`join`仅找到一行：

```
SELECT   A.*
,        B.SumAmount as BudgetAmount
,        ACT.SumAmount as ActualAmount 
FROM     accounting_line A 
LEFT JOIN 
        (
        select  accounting_line_id
        ,       sum(amount) as SumAmount
        from    budget
        group by
                accounting_line_id
        ) as B
ON      B.accounting_line_id = A.accounting_line_id
LEFT JOIN 
        (
        select  accounting_line_id
        ,       sum(amount) as SumAmount
        from    actual
        group by
                accounting_line_id
        ) as ACT 
ON      ACT.accounting_line_id = A.accounting_line_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T06:37:20.383

试试这个修改过的，计算它的总数`subquery`

```
SELECT  a.*, b.totalBudget, c.totalActual
FROM AccountingLine a LEFT JOIN
        (
        SELECT actg_line_id, SUM(amount) totalBudget
        FROM Budget
        GROUP BY actg_line_id
        ) b on a.act_line_id = b.actg_line_id
    LEFT JOIN
        (
        SELECT actg_line_id, SUM(amount) totalActual
        FROM Actual
        GROUP BY actg_line_id
        ) c on a.act_line_id = c.actg_line_id 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/2ae3a/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T06:48:41.170

试试这个

```
Select A.* ,SUM(B.Amount) As BudgetAmount,SUM(Act.Amount) As ActualAmount 
from AccountingLine  A
INNER JOIN Budget B 
ON B.budget_id = A.actg_line_id 
INNER JOIN Actual Act 
ON Act.actual_id = A.accounting_line_id  
Grounp By A.accounting_line_id 
```

# javascript - 如何初始化 html2canvas？

> ID：12337041
> 
> 赞同：1
> 
> 时间：2012-09-09T06:31:58.833
> 
> 标签：javascript, html, screenshot, html2canvas

我下载了[html2canvas javascript 插件](http://html2canvas.hertzen.com/)，它允许我在客户端（浏览器）上截取网页的屏幕截图，但我无法弄清楚我应该在页面标题中包含哪些文件以使用它，[我已经看到了有关如何使用它的示例](https://stackoverflow.com/questions/9250505/how-to-upload-a-screenshot-using-html2canvas)，但是我应该包含哪些文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T06:39:49.950

从[各种](https://github.com/niklasvh/html2canvas/blob/master/examples/demo.html) [演示](https://github.com/niklasvh/html2canvas/blob/master/examples/demo2.html) [页面](https://github.com/niklasvh/html2canvas/blob/master/examples/existing_canvas.html)中，您似乎只需要包含在标题中[的单个](https://github.com/niklasvh/html2canvas/tree/master/dist)脚本（[a](https://github.com/niklasvh/html2canvas/blob/master/dist/html2canvas.js)或[b ）。](https://github.com/niklasvh/html2canvas/blob/master/dist/html2canvas.min.js)

这与需要 jQuery、.`html2canvas.js`和. 的旧版本脚本不同`jquery.plugin.html2canvas.js`。

我无法评论 /dist 目录中包含的另外两个脚本（svg 脚本），因为我找不到它们的使用示例。

# selenium - 如何测试模糊 - Firefox Selenium 驱动程序？

> ID：12337046
> 
> 赞同：11
> 
> 时间：2012-09-09T06:33:02.150
> 
> 标签：selenium, firefox, selenium-firefoxdriver, firefox-driver

我正在使用 selenium `2.24`Firefox 驱动程序来测试输入框的**模糊**事件。目前，在我`sendKeys`进入一个输入框后，我让 selenium 单击另一个触发输入框模糊的区域。

但是，我认为这不是一个好方法，有人知道更好的测试方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T21:19:07.300

selenium WebDriver 无法正确触发模糊等事件。但是，您可以手动触发它们。假设您使用的是 jquery：

```
firefoxWebDriver.executeScript("$('#yourID').blur()"); 
```

或者没有 jquery：

```
firefoxWebDriver.executeScript("document.querySelector('#yourID').blur()"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-03T17:26:32.043

某些元素没有适合测试目的的鉴别器（例如，您希望在测试中绑定的 id 或其他 CSS 选择器）。

幸运的是，存在[activeElement](https://developer.mozilla.org/en-US/docs/Web/API/document.activeElement)的概念。因此，如果您希望测试元素的模糊功能，则可以使用本机 javascript 方式（不依赖于 jQuery 或类似方式）来测试它：

```
driver.ExecuteScript("!!document.activeElement ? document.activeElement.blur() : 0"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-09T21:38:17.957

我做了一个小调查。我发现 selenium 2.0 不支持 fire 事件。查看[详情](https://stackoverflow.com/questions/7696010/how-to-fire-js-event-in-selenium)。所以这段代码对我有用：

```
 driver.get("http://www.onliner.by/");

        String cssSelctr= "div.b-top-search-box input[id=\"g-search-input\"]";
        WebElement testElement=driver.findElement(By.cssSelector(cssSelctr));
        testElement.sendKeys("fvsdfs");

        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelctr+"\');");
        stringBuilder.append("x.blur();");
        js.executeScript(stringBuilder.toString()); 
```

希望现在这对您有所帮助）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-30T12:58:58.683

谢谢 eugene.polschikov。我不得不更改要调用的函数以`triggerHandler`使其对我有用。请参阅以下内容 - 只需将“element-id”替换为您的元素的 id。

```
JavascriptExecutor jsexec = (JavascriptExecutor) driver;
StringBuilder stringBuilder = new StringBuilder();
stringBuilder.append("var x = $('" + element-id + "');");
stringBuilder.append("x.triggerHandler('blur');");
jsexec.executeScript(stringBuilder.toString()); 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-22T06:44:48.890

将“elementId”替换为相关的元素 ID。这对我来说可以。“驱动程序”是您的 Selenium 驱动程序

> JavascriptExecutor jsexec = (JavascriptExecutor) 驱动程序；jsexec.executeScript("document.getElementById('" + elementId +"').onblur();");

# c# - datagridview 不显示数据

> ID：12337047
> 
> 赞同：3
> 
> 时间：2012-09-09T06:33:21.153
> 
> 标签：c#

我想将数据库中的数据显示到我的datagridview控件上

```
 private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.AutoGenerateColumns = false;
        FillData();

    }
    public void FillData()
    {
        using (SqlConnection myConnection = new SqlConnection("server=localhost;" +
                                   "Trusted_Connection=yes;" +
                                   "database=database; " +
                                   "connection timeout=10"))
        {
            myConnection.Open();

            using (SqlDataAdapter sqlDa = new SqlDataAdapter("select * from スコープ", myConnection))
            {
                DataTable dt = new DataTable();
                sqlDa.Fill(dt);
                dataGridView1.DataSource = dt;

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:48:24.197

我怀疑 datatable 的列与 datagridview 列没有匹配的列....检查 datagridview 的列与 datatable 列....

为了测试，制作`dataGridView1.AutoGenerateColumns`并`true`检查datagridview是否填充数据......

```
dataGridView1.AutoGenerateColumns= true; 
```

您可以通过以下方式创建 datagridview 列：

转到属性，`datagridview`然后转到列部分，您可以在其中根据您的数据表在 datagridview 中添加新列...。`DataPropertyName`与您的数据表列匹配并保持`AutoGenerateColumns`，`false`然后它会正常工作...

# javascript - 如何使用 javascript 将链接设置为 1 小时的 cookie？

> ID：12337049
> 
> 赞同：-6
> 
> 时间：2012-09-09T06:33:36.830
> 
> 标签：javascript, html, css

我有以下 HTML：

```
 <a href="/index.html" title="Click only if you are sure of your browser">
       I'm warned, <strong>let me in anyway</strong></a> 
```

有没有一种方法可以让我首先单击此链接，将一个名为“forceAccess”的 cookie 设置为“yes”值，该值会在 1 天后过期，然后才将我带到 index.html？我有以下功能，所以我想我只需要一种从上面调用它的方法：

```
function createCookie(name, value, days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        var expires = "; expires=" + date.toGMTString();
    }
    else var expires = "";
    document.cookie = name + "=" + value + expires + "; path=/";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:33:56.573

我认为您应该首先检查 cookie，然后您可以决定是否显示链接。

之前评论中的 w3schools 链接可能会有所帮助，但我也想建议您使用 jQuery，它可以帮助您以跨浏览器的方式操作 DOM。

```
$(document).ready(function(){
   if(getCookie("thisPersonIsSure") != true) { //getCookie is just pseudo-code
       var theLink = $("<a href=\"/index.html\" title=\"Click only if you are sure of your browser\">I'm warned, <strong>let me in anyway</strong></a>").click(function(){createCookie("thisPersonIsSure", true, 1);});          
       $(document.body).append(theLink);
   } else {
       //Go to the index.html immediately e.g. by doing this:
       window.location.href = "/index.html";
   }
}); 
```

干杯!

# javascript - 两个方向的经度和纬度的距 离公式

> ID：12337054
> 
> 赞同：0
> 
> 时间：2012-09-09T06:36:00.370
> 
> 标签：javascript, gps, distance

对于任何给定的纬度和经度，应该存在两个距离。一个是顺时针方向，另一个是逆时针方向。这就是有时航班的飞行方式。

下面的javascript在计算距离时效果很好。我不确定它是顺时针还是逆时针。（指南下和北上）

找到两个方向的公式是什么？

```
var R = 6371; // km
var dLat = (lat2-lat1).toRad();
var dLon = (lon2-lon1).toRad();
var lat1 = lat1.toRad();
var lat2 = lat2.toRad();

var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2); 
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c; 
```

编辑：

我想计算两点之间的顺时针和逆时针路径。实际上，航班使用顺时针和逆时针路径到达同一点。他们不只是出于商业和监管原因使用直接路径。

我只想要一个公式来计算到同一点的顺时针和逆时针路径。

距离明智，最短的直线路径和最长的直线路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:42:28.013

如果您阅读您[剪切和粘贴该代码](http://www.movable-type.co.uk/scripts/latlong.html)的网站的描述，您会发现它是[haversine forumla](http://en.wikipedia.org/wiki/Haversine_formula)，并且它提供了最短的距离。

这个方程没有给你一个简单的顺时针或逆时针路径，它是从点到点最直接的“旅程”。

# ruby - 迭代期间无法将新密钥添加到哈希中

> ID：12337069
> 
> 赞同：1
> 
> 时间：2012-09-09T06:40:02.557
> 
> 标签：ruby, mongoid

谁能向我解释这个运行时异常到底是什么意思？

```
can't add a new key into hash during iteration 
```

我在这段代码中有这个错误（我使用 Mongoid）：

```
new_item_entries = []

item.entries.each do |entry|
  new_item_entries << ItemEntry.new(name: entry.field) # exception here
end  

self.entries = new_item_entries
self.save 
```

但是这个例外在任何情况下都不会燃烧！在我的 Rspec 测试中，我有 70 次测试中的 3 次失败，但有此例外。大多数测试都使用上面的代码。

# android - 初始化首选项

> ID：12337070
> 
> 赞同：1
> 
> 时间：2012-09-09T06:40:19.700
> 
> 标签：android, settings

Android 指南建议在 XML 文件中定义首选项，然后可以将这些首选项加载到`PreferenceActivity`/ `PreferenceFragment`etc 以供用户查看和编辑。但在实际场景中，用户首先与其他活动交互，然后（可能）与 Preferences UI 交互。

如果启动活动需要其中一些偏好怎么办？它们还没有加载，因为偏好资源还没有被夸大。有没有办法预先访问 XML 文件中的首选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:52:12.600

是的。当您第一次请求首选项时，您可以为其提供默认值。例如，如果您正在加载 Int 类型的首选项，那么您可以通过以下方式从活动中执行此操作：

```
SharedPreferences defaultSettings = PreferenceManager.getDefaultSharedPreferences(this);
int preferenceValue = defaultSettings.getInt("PreferenceName", 7); 
```

这会将您的preferenceValue 加载为7（尚未初始化此首选项）。这是假设在您的 XML 首选项文件中，您具有键“PreferenceName”的首选项。如果您计划在运行 Preference 活动之前在活动中编辑此首选项，请确保使用 SharedPreferenceEditor 提交您的更改：

```
// ... change to preferenceValue occurs prior to this code
SharedPreferences.Editor defaultEditor = defaultSettings.edit();
defaultEditor.putInt("PreferenceName", preferenceValue);
defaultEditor.commit(); 
```

不过，我们可能希望在硬编码问题中避免使用“PreferenceName”，而是将其用作 strings.xml 文件中的字符串。这样，当首选项尚未保存时，它既可以从初始代码中获取，也可以从 Preference XML 文件中获取。这意味着我们上面的代码会将字符串“PreferenceName”替换为以下内容：

```
getResources().getString(R.string.pref_name) 
```

在您的 Preference XML 文件中，您可以通过以下方式引用密钥：

```
android:key="@string/pref_name"
android:defaultValue="7" 
```

这应该包括“预加载”首选项以及尝试将大部分应用程序设置保留在一个地方。在初始 Activity 发生之前是否创建/加载 XML 首选项确实可能存在重叠，但我尚未对此进行测试。

**编辑：**事实证明，您可以通过以下方法直接加载 XML 文件（使用其默认首选项），而不是使用上面的代码：

```
PreferenceManager.setDefaultValues(this, R.xml.preference, false); 
```

有关此方法的更多信息可以在 PreferenceManager 的文档中找到：http: [//developer.android.com/reference/android/preference/PreferenceManager.html](http://developer.android.com/reference/android/preference/PreferenceManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:43:55.360

如果你查看 SharedPreference API，你会看到这个

getString（字符串键，字符串 defValue）

因此，如果默认值不存在，您实际上可以定义它。

来源：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

您还可以使用 XML 在 XML 中预定义默认值

android:defaultValue="某事"

# tastypie - 验证/授权对美味派顶级 API 模式的访问

> ID：12337071
> 
> 赞同：2
> 
> 时间：2012-09-09T06:40:30.200
> 
> 标签：tastypie

我知道如何为美味派资源设置身份验证/授权：通过资源 Meta 类中的设置。我如何验证/授权对顶级架构的访问？

例如，我可以在 处验证/授权资源`/api/v1/resource`，但如何在 处验证/授权架构`/api/v1`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T14:41:32.040

默认情况下，使用美味派的默认机制并没有简单的方法来做到这一点。如果您查看[api.py](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/api.py)文件，您将看到该`top_level`方法没有应用身份验证/授权机制。

我认为实现您想要的最简洁的方法是扩展 Api 类并覆盖该`top_level`方法以检查是否允许用户查看结果。然而，这可能过于复杂，因为 Api 本身不使用自动化和身份验证方法。因此，您可能希望通过删除`top_level`那里的定义并将其放在资源中的 urls 中来覆盖 Api 的 urls 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T19:59:15.187

我也必须解决这个问题。这是 Anna 建议的代码示例：

```
class ApiWithAuth(Api):
    def top_level(self, request, api_name=None):
        auth = MyAuthentication()
        r = auth.is_authenticated(request)
        if r != True:
            return r

        return super(ApiWithAuth, self).top_level(request, api_name)

api = ApiWithAuth(api_name='v2')
api.register(MyResource())
api.register(MyOtherResource())
... 
```

# git - 如何使 svn 或 git 仅监视文件列表，而忽略其他任何内容

> ID：12337072
> 
> 赞同：0
> 
> 时间：2012-09-09T06:40:55.863
> 
> 标签：git, svn, version-control, gitignore, svnignore

例如，一个目录中有很多文件，但我只想监视 Makefile 和 rules.mk ... ，我应该输入 .gitignore 或 .svnignore 什么？

```
ls
bin        Config.in  docs                include  **Makefile**  Packages     README.SDK  scripts      target
build_dir  dl         feeds.conf.default  LICENSE  package   Packages.gz  **rules.mk**    staging_dir  tmp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:57:14.917

文件的规则`.gitignore`会忽略所有内容，然后排除`Makefile`和`rules.mk`

```
>>.gitignore cat
*
!Makefile
!rules.mk 
```

请注意，您可以在添加后忽略所有内容`Makefile`，`rules.mk`并且不会注意到差异。

# sql - SQL Server如何将大量数据从一张表复制到另一张表

> ID：12337073
> 
> 赞同：2
> 
> 时间：2012-09-09T06:41:00.480
> 
> 标签：sql

我想将大量数据从一个表复制到另一个表。我在存储过程中使用游标来做同样的事情。但它只适用于记录较少的表。如果表包含更多记录，它会长时间执行并且挂了。请给一些建议，我怎样才能更快地复制数据，我的SP如下：

```
--exec uds_shop

--select * from CMA_UDS.dbo.Dim_Shop
--select * from UDS.dbo.Dim_Shop
--delete from CMA_UDS.dbo.Dim_Shop

alter procedure uds_shop
as
begin
declare @dwkeyshop int
declare @shopdb int
declare @shopid int
declare @shopname nvarchar(60)
declare @shoptrade int
declare @dwkeytradecat int
declare @recordowner nvarchar(20)
declare @LogMessage varchar(600)

Exec CreateLog 'Starting Process', 1 

DECLARE cur_shop CURSOR FOR
    select 
    DW_Key_Shop,Shop_ID,Shop_Name,Trade_Sub_Category_Code,DW_Key_Source_DB,DW_Key_Trade_Category,Record_Owner
    from 
    UDS.dbo.Dim_Shop 

    OPEN  cur_shop
    FETCH NEXT FROM cur_shop INTO @dwkeyshop,@shopid,@shopname,@shoptrade, @shopdb ,@dwkeytradecat,@recordowner
    WHILE @@FETCH_STATUS = 0 
    BEGIN 
    Set @LogMessage = ''
    Set @LogMessage = 'Records insertion/updation start date and time : ''' + Convert(varchar(19), GetDate()) + ''''            

    if (isnull(@dwkeyshop, '') <> '')
        begin 
        if not exists (select crmshop.DW_Key_Shop from CMA_UDS.dbo.Dim_Shop as crmshop where (convert(varchar,crmshop.DW_Key_Shop)+CONVERT(varchar,crmshop.DW_Key_Source_DB)) = convert(varchar,(CONVERT(varchar, @dwkeyshop) + CONVERT(varchar, @shopdb))) )
        begin
        Set @LogMessage = Ltrim(Rtrim(@LogMessage)) + ' ' + 'Record for shop table is inserting...'         
                insert into 
                 CMA_UDS.dbo.Dim_Shop
                (DW_Key_Shop,DW_Key_Source_DB,DW_Key_Trade_Category,Record_Owner,Shop_ID,Shop_Name,Trade_Sub_Category_Code)
                values
                (@dwkeyshop,@shopdb,@dwkeytradecat,@recordowner,@shopid,@shopname,@shoptrade)
        Set @LogMessage = Ltrim(Rtrim(@LogMessage)) + ' ' + 'Record successfully inserted in shop table for shop Id : ' + Convert(varchar, @shopid) 

            end
            else

            begin 
             Set @LogMessage = Ltrim(Rtrim(@LogMessage)) + ' ' + 'Record for Shop table is updating...' 
             update 
             CMA_UDS.dbo.Dim_Shop
             set DW_Key_Trade_Category=@dwkeytradecat,
             Record_Owner=@recordowner,
             Shop_ID=@shopid,Shop_Name=@shopname,Trade_Sub_Category_Code=@shoptrade

             where       
                DW_Key_Shop=@dwkeyshop and DW_Key_Source_DB=@shopdb     
             Set @LogMessage = Ltrim(Rtrim(@LogMessage)) + ' ' + 'Record successfully updated for shop Id : ' + Convert(varchar, @shopid)
            end
        end
        Exec CreateLog @LogMessage, 0
        FETCH NEXT FROM cur_shop INTO @dwkeyshop,@shopid,@shopname,@shoptrade, @shopdb ,@dwkeytradecat,@recordowner
    end
    CLOSE cur_shop 
    DEALLOCATE cur_shop
End 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T06:44:45.007

假设`targetTable`并`destinationTable`具有相同的架构...

```
INSERT INTO targetTable t
SELECT * FROM destinationTable d
WHERE someCriteria 
```

除非没有其他方法（很少见），否则避免使用游标。

您可以使用该`WHERE`子句过滤掉任何重复记录。

如果您有标识列，请使用不包含标识列的显式列列表。

您还可以尝试禁用约束并删除索引，前提是您在之后替换它们（并确保检查约束）。

如果您使用的是 SQL Server 2008（更高版本），则可以使用该[`MERGE`](http://msdn.microsoft.com/en-us/library/bb510625%28v=sql.105%29.aspx)语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T06:44:12.947

根据我的个人经验，当您将大量数据从一个表复制到另一个表（具有类似约束）时，请删除要复制数据的表上的约束。复制完成后，再次恢复所有约束。

在我的情况下，我可以将复制时间从 7 小时减少到 30 分钟（1 亿条记录，有 6 个约束）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T07:00:31.750

众所周知，光标速度很慢，对于非常大的数据集，内存可能会开始成为问题。

看起来您确实在每次迭代中都做了很多记录，所以您可能会被光标卡住，但我会寻找一种方法将工作分解为多个调用，以便您可以保持较小的占用空间。

如果你有一个自动编号列，我会在过程中添加一个'@startIdx bigint'，并重新定义你的游标语句以获取'TOP 1000''WHERE [autonumberFeild] <= @startIdx Order by [autonumberFeild]'。然后创建一个新的存储过程，例如：

```
DECLARE @startIdx bigint = 0
WHILE select COUNT(*) FROM <sourceTable> > @startIdx
BEGIN
    EXEC <your stored procedure> @startIdx
END
SET @startIdx = @startIdx + 1000 
```

此外，请确保您的数据库文件设置为自动增长，并且它会以较大的增量进行，因此您不会将所有时间都花在增长数据文件上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T12:28:28.793

```
INSERT INTO targetTable 
SELECT * FROM destinationTable 
WHERE someCriteria (based on Criteria you can copy/move the records) 
```

# c# - 使用 taglib 使用 c# 读取 mp3 文件元数据时的编码问题

> ID：12337076
> 
> 赞同：0
> 
> 时间：2012-09-09T06:41:08.243
> 
> 标签：c#, taglib

我正在使用 C# 从 mp3 文件元数据中读取信息。此信息为阿拉伯语 .. 当我通过 windows 媒体播放器或任何其他媒体播放器打开此 mp3 文件时，我可以非常清楚地阅读信息，但是当我尝试通过[taglib](http://taglib.github.com/)阅读此信息时，一些文件显示正确，而其他一些文件则以陌生格式显示它不是阿拉伯语，也不是英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:16:29.000

这很可能是因为 ID3 标签中声明的编码不是用于写入标签的实际编码，taglib 将使用标签框架中指定的编码读取 id3 标签中的数据。最终结果是您将得到一个不同的字符串，因为使用了错误的编码。

# jquery - Jquery单击相似元素中的特定元素

> ID：12337085
> 
> 赞同：0
> 
> 时间：2012-09-09T06:42:51.087
> 
> 标签：jquery, click

这可能是一个小问题，但我无法弄清楚，所以请帮助我。在下面的代码中，我有一个 textarea 和一个按钮。按钮 div 最初设置为 display:none。单击 textarea 时，它会放大并显示按钮的 div。有一个名为 DUPLICATE 的链接，单击时会将一组类似的 textarea 和按钮附加到主 div。现在的问题是当有多个 textarea 时，jquery click 函数仅适用于原始 textarea，而不适用于其他 textarea。此外，该功能的效果会反映在所有 textareas 中，即所有 textareas 都被放大并显示按钮。我只想放大单击的特定文本区域并显示相应的按钮。分配动态 id'

```
 <script type="text/javascript">
        $(document).ready(function(){
            test={
                btn:function(){
                    $(this).css("height","100px");
                    $(this).parent().siblings(".btn").css("display","block");
                    },
                duplicate:function(e){
                    e.preventDefault();
                    $(".main").append('<div class="child"><textarea name="text" class="text" id="text"></textarea></div><div class="btn"><input type="button" value="Button" /></div>');
                    }

            }
            $("#text").click(test.btn);
            $("#duplicate").click(test.duplicate);
        });
    </script>
    <style type="text/css">
    .btn
    {
        display:none;
    }
    </style>
</head>
<body>
<div class="main">
    <a href="#" id="duplicate">DUPLICATE</a>
    <div class="child">
        <textarea name="text" class="text" id="text"></textarea>
    </div>
    <div class="btn">
        <input type="button" value="Button" />
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:06:44.727

试试这个，只是改变

```
$("#text").click(test.btn); 
```

至

```
$('.main').on('click', '.text', test.btn); 
```

并更改`btn`功能

```
btn:function(){
    $(this).css("height","100px");
    $(this).parent().next(".btn").css("display","block"); // this line only
} 
```

还要记住`id`在页面上应该是唯一的。

[**工作示例**](http://jsfiddle.net/ARJtB/5/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:04:34.620

**工作演示** [http://jsfiddle.net/Y4a7n/](http://jsfiddle.net/Y4a7n/)

有几点需要注意：

*   `id`对于您可以查看克隆的所有元素，应该是唯一的，但您可以`class`在这种情况下使用。
*   请使用`.on`API - [http://api.jquery.com/on/](http://api.jquery.com/on/) it - 将一个或多个事件的事件处理函数附加到所选元素。

*   如果您只想定位下一个按钮以在点击时显示，而不是`siblings`尝试使用Api。`next`

希望它适合你的事业`:)`

**代码**

```
$(document).ready(function() {
    test = {
        btn: function() {

        },
        duplicate: function(e) {
            $(".main").append('<div class="child"><textarea name="text" class="text" ></textarea></div><div class="btn"><input type="button" value="Button" /></div>');
        }

    }

    $("#duplicate").click(test.duplicate);
});

$(document).on('click', '.text', function() {
    $(this).css("height", "100px");
    $(this).parent().next(".btn").css("display", "block");
});​ 
```

# optimization - 统计程序决定

> ID：12337086
> 
> 赞同：0
> 
> 时间：2012-09-09T06:43:00.757
> 
> 标签：optimization, statistics, neural-network, algorithmic-trading, multivariate-testing

我手头有两个问题：

1.  我有一个因变量，比如说 GDP 和许多其他自变量。我需要知道我可以使用什么程序来查找 IV 中哪些是领先指标或滞后指标。我已经在 SAS 和 Excel 中开发了模型。

2.  根据基于 x 日 ema 和 y 日 sma 交叉的一些买卖规则，我需要计算回报。我需要知道我应该使用哪个程序来查找哪些值，`x`并将`y`给我最好的回报（`x`并且`y`是一个前缀值数组，如 (200,50)(300,30) 等）。这里可以使用神经网络吗？如果是这样，任何人都可以给我一个有关如何执行此操作的文档的链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:57:27.887

广告1：可能最简单的是计算时间序列之间的线性相关性。同时使用时间序列和偏移时间序列会告诉你一些关于领先/滞后的信息。

广告 2：研究优化，而不是神经网络。最初和最简单的方法是使用网格搜索：计算 X 和 Y 的每个组合的最佳回报。伪代码：

```
x = [50:50:500]
y = [10:10:100]

for i in x:
    for j in y:
        return(i,j) = calculate_returns(x(i),y(j))
    end
end 
```

# ios - 文件管理 iOS

> ID：12337088
> 
> 赞同：-5
> 
> 时间：2012-09-09T06:43:30.250
> 
> 标签：ios

我正在为 iOS 创建一个静态库，它从系统中必须存在的文件中读取数据（应用程序运行时我没有下载它们）并进行一些计算并返回结果。我需要将文件随应用程序一起发送。所以我的问题如下

1.  如何在项目中包含输入文件，以便它们与应用程序一起复制。
2.  应用程序运行时如何读取文件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:47:16.227

> 如何在项目中包含输入文件，以便它们与应用程序一起复制。

将它们复制到应用程序的捆绑目录中。

> 应用程序运行时如何读取文件。

现在这个问题已经足够广泛了。也许您正在寻找[NSFileManager](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)、[NSFileHandle](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilehandle_Class/Reference/Reference.html)和[NSData](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdata_Class/Reference/Reference.html)类。

# android - 如何从另一个应用程序更新小部件？

> ID：12337097
> 
> 赞同：0
> 
> 时间：2012-09-09T06:44:59.553
> 
> 标签：android, android-appwidget, homescreen, onupdate

我做了一个`application`和一个`widget`。我必须`widget`从应用程序更新我的，即将一些数据发送到小部件。我使用`sendBroadcast(Intent intent)`了应用程序中的方法。它在`onReceive(Context context, Intent intent)`MyWidgetProvider 应用程序的方法中很受欢迎。我能够获取数据，但该`onUpdate()`方法似乎不起作用，因此小部件没有 UI。

这是小部件应用程序的代码

```
public class MyWidgetProvider extends AppWidgetProvider {

    public String team1name;
    public String team2name;
    public String team1score;
    public String team2score;    
    public static boolean done=false;

        public void onReceive(Context c, Intent intent){
            Bundle extras = intent.getExtras();
            if (extras == null) {
              return;
            }
            team1name = extras.getString("team1name");
            team2name = extras.getString("team2name");
            team1score = extras.getString("team1score");
            team2score = extras.getString("team2score");    
            done=true;
        }

        private static final String ACTION_CLICK = "ACTION_CLICK";

          @Override
          public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {

            // Get all ids
            ComponentName thisWidget = new ComponentName(context,MyWidgetProvider.class);
            int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
            for (int widgetId : allWidgetIds) {
                Log.e("WidgetExample", "The victory is mine");

              RemoteViews remoteViews = new RemoteViews(context.getPackageName(),R.layout.widget_layout);
              // Set the text
              remoteViews.setTextViewText(R.id.update, team1name);

              // Register an onClickListener
              Intent i = new Intent(context, MyWidgetProvider.class);

              i.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
              i.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);

              PendingIntent pendingIntent = PendingIntent.getBroadcast(context,0, i, PendingIntent.FLAG_UPDATE_CURRENT);
              remoteViews.setOnClickPendingIntent(R.id.update, pendingIntent);
              appWidgetManager.updateAppWidget(widgetId, remoteViews);
            }
          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:22:07.650

I had to make use of RemoteViews in the onReceive method itself. This worked for me.

```
public void onReceive(Context context, Intent intent){
    Bundle extras = intent.getExtras();
    if (extras == null) {
        return;
    }

    team1name = extras.getString("team1name");
    team2name = extras.getString("team2name");
    team1score = extras.getString("team1score");
    team2score = extras.getString("team2score");
    player1 = extras.getString("player1");
    player2 = extras.getString("player2");
    extras = null;

    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

    remoteViews.setTextViewText(R.id.team1name, team1name);
    remoteViews.setTextViewText(R.id.team2name, team2name);
    remoteViews.setTextViewText(R.id.teamscore, team2score);  
    remoteViews.setTextViewText(R.id.batsman1, player1);
    remoteViews.setTextViewText(R.id.bowler, player2);

    ComponentName cn = new ComponentName(context, MyWidgetProvider.class);
    AppWidgetManager.getInstance(context).updateAppWidget(cn, remoteViews);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:51:15.263

```
public void onReceive(Context c, Intent intent){
    Bundle extras = intent.getExtras();
    if (extras == null) {
        return;
    }

    team1name = extras.getString("team1name");
    team2name = extras.getString("team2name");
    team1score = extras.getString("team1score");
    team2score = extras.getString("team2score");    
    done = true;
} 
```

您应该`onUpdate`从`onReceive`. 接收广播不仅会自行`AppWidgetProvider`调用 onUpdate。您需要手动执行此操作。

# sql-server - 用户“某人”登录失败

> ID：12337098
> 
> 赞同：2
> 
> 时间：2012-09-09T06:45:56.793
> 
> 标签：sql-server, vb.net, sql-server-2008, database-connection, connection-string

我在 Microsoft SQL Server 2008 R1 和 Visual Studio 2010 上工作。我的目标是将服务器克隆到新机器上。但是，在设置应用程序并在浏览器的 URL 中输入“local/storytelling”后，会出现错误消息。在谷歌可能的错误之后，我已将身份验证模式表单“Windows身份验证模式”设置为“SQL Server和Windows身份验证模式”。但是错误仍然存​​在......我现在不知道了。

这是错误消息：

> [SqlException (0x80131904): 用户 'storytelling' 登录失败。] System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +4846887 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +194 System. Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +2392 System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +35 System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin( ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) +144 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host,String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) +342 System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +221 System.Data.SqlClient.SqlInternalConnectionTds.. ctor（DbConnectionPoolIdentity identity，SqlConnectionString connectionOptions，对象 providerInfo，String newPassword，SqlConnection owningObject，Boolean redirectedUserInstance）+189 System.Data.SqlClient.SqlConnectionFactory.CreateConnection（DbConnectionOptions 选项，对象 poolGroupProviderInfo，DbConnectionPool 池，DbConnection owningConnection）+185 System.Data。 ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection,DbConnectionPool 池，DbConnectionOptions 选项）+31 System.Data.ProviderBase.DbConnectionPool.CreateObject（DbConnection owningObject）+433 System.Data.ProviderBase.DbConnectionPool.UserCreateRequest（DbConnection owningObject）+66 System.Data.ProviderBase.DbConnectionPool.GetConnection（DbConnection owningObject） ) +499 System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +65 System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +117 System.Data.SqlClient.SqlConnection.Open() +122 _Default .Page_Load(Object sender, EventArgs e) in D:\storytelling\Default.aspx.vb:21 System.Web.UI.Control.OnLoad(EventArgs e) +99 System.Web.UI.Control.LoadRecursive() +50 System.Web.UI.Page。ProcessRequestMain（布尔includeStagesBeforeAsyncPoint，布尔includeStagesAfterAsyncPoint）+627

我不知道代码有什么问题：（源文件：“Default.aspx.vb”）

```
Partial Class _Default
    Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)                      Handles Me.Load
    Dim conn As New SqlConnection(ConfigurationManager.ConnectionStrings("StoryTelling2ConnectionString").ConnectionString)       
Dim cmmd As New SqlCommand   
Dim strSQL As String
conn.Open() 
```

错误日志以红色突出显示 conn.Open()。我想这可能是我在克隆服务器时丢失了一些步骤。但我不知道我忽略了哪些步骤。请提供一些建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T01:54:35.807

我终于知道发生了什么事。很抱歉我的问题表现不佳。我参考了[this](https://stackoverflow.com/questions/4214625/sql-server-management-studio-wont-connect-to-sql-server)和[this](https://stackoverflow.com/questions/6001970/cannot-connect-to-local-sql-server-express-2008-r2)，发现windows server 2008已经为我安装了SQL Express版本。不过，我根本不知道，所以我安装了另一个 SQL Server。在这种情况下。我有两个 SQL server 版本，根据线程[MSDN FORUM](http://social.msdn.microsoft.com/Forums/en-US/sqldatabaseengine/thread/4675b346-8f36-468c-b706-e88af8f7879c/)，在“服务器名称”输入中登录到不同的服务器是完全不同的。

简而言之，我的连接字符串总是与“服务器名称”输入不兼容，因此登录过程总是失败。

# ios - 如何将图像从资产库移动到应用程序特定的私有位置？

> ID：12337099
> 
> 赞同：5
> 
> 时间：2012-09-09T06:46:28.510
> 
> 标签：ios, alassetslibrary

这是我尝试的代码片段：

```
[library    writeImageToSavedPhotosAlbum:self.checkInImage.CGImage metadata:self.metadata
            completionBlock             :^(NSURL * assetURL, NSError * error) {
        NSLog (@"Asset url = %@", assetURL);
         NSError *err;
        NSString *docDir = [NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        NSString *jpgFilePath = [NSString stringWithFormat:@"%@/test.jpg", docDir];
        NSFileManager *fileManager = [NSFileManager defaultManager];
                [fileManager moveItemAtURL:assetURL toURL:[NSURL URLWithString:jpgFilePath] error:&err];
                NSLog(@"error is %@", err);
    }]; 
```

我收到错误，因为 Error Domain=NSCocoaErrorDomain Code=262 “操作无法完成。（Cocoa 错误 262。）” UserInfo=0xb49a680 {NSURL=assets-library://asset/asset.JPG?id=6FAC823A- 33CB-489B-A125-714FBA5F0EE8&ext=JPG}

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T06:51:26.723

[文档（和谷歌）。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)此错误代码对应于`NSFileReadUnsupportedSchemeError`常量 - 即您不能只使用`assets-library://`URL 来使用 NSFileManager 移动文件。（关于 URL 的情况也是如此`ipod-library://`。）您必须使用 AssetsLibrary 框架来获取文件的*数据*，然后使用`- [NSData writeToFile:atomically:]`.

```
ALAssetsLibrary *lib = [ALAssetsLibrary new];
[lib assetForUrl:theURL // the asset URL you have obtained, NSURL object
    resultBlock:^(ALAsset *asset) {
        // get data
        ALAssetRepresentation *repr = [asset defaultRepresentation];
        CGImageRef cgImg = [repr fullResolutionImage];
        NSString *fname = [repr fileName];
        UIImage *img = [UIImage imageWithCGImage:cgImg];
        NSData *data = UIImagePNGRepresentation(img);
        [data writeToFile:[@"BaseDirectory/" stringByAppendingPathComponent:fname]
            atomically:YES];
        [lib release];
    }
    failureBlock:^(NSError *error) {
        // recover from error, then
        [lib release];
    }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T19:04:32.040

这就是我解决问题的方法：

1）我将没有元数据的文件保存在某个位置，并存储了它的urlpath。

2）然后使用以下代码将同一个文件与元数据一起保存。这里的 fileURL 是第 1 步得到的 urlpath。

```
CFURLRef url = CFURLCreateFilePathURL(NULL, (CFURLRef)fileURL, NULL);
// Creating Image source from image url
CGImageSourceRef imageSource = CGImageSourceCreateWithURL(url, NULL);

// This will be the data CGImageDestinationRef will write into
CFMutableDataRef data = CFDataCreateMutable(kCFAllocatorDefault, 0);
CGImageDestinationRef imageDestination = CGImageDestinationCreateWithData(data, CFSTR("public.jpeg"), 1, NULL);

BOOL success = (imageSource != NULL);

require(success, cleanup);

success = (imageDestination != NULL);
require(success, cleanup);

// Add the image contained in the image source to the destination, overidding the old metadata with our modified metadata
NSDictionary *metadata = someObj.metadata;
CGImageDestinationAddImageFromSource(imageDestination, imageSource, 0, (CFDictionaryRef)metadata);

// Tell the destination to write the image data and metadata into our data object.
success = CGImageDestinationFinalize(imageDestination);

require(success, cleanup);

// Write the data into the url
[(NSMutableData *) data writeToURL:fileURL atomically:YES]; 
```

清理：

```
if (data) {
    CFRelease(data);
    data = NULL;
}

if (imageSource) {
    CFRelease(imageSource);
    imageSource = NULL;
}

if (imageDestination) {
    CFRelease(imageDestination);
    imageDestination = NULL;
}

return success; 
```

希望这可以帮助。但我想对 H2C03 提出非常有用的建议，这有助于达成这个解决方案。请帮我怎么做。谢谢。

# java - 您如何确保使用公共 IP 地址将您的 pakcet 交付给正确的客户

> ID：12337101
> 
> 赞同：-2
> 
> 时间：2012-09-09T06:47:40.890
> 
> 标签：java, android, http, sockets, ip

所以私有 IP 地址是 192.168.00 ~ 192.168.255.255 或 10.0.0.0 或 172.16.0.0 ~ 172.31.255.255

如果我接受了一个客户端到我的 serversocket，我可以使用 socket.getremotesocketaddress(); 获取客户端的 remoteIp 地址。但我怀疑我从这种方法获得的 IP 地址只是公共 IP 地址，它必须有多个客户端使用与这个相同的公共 IP（就像你在访问网站 www.whatismyip 时看到的那样） .com）。因此，如果我想确保我的数据包使用某个 IP 地址或其他可以唯一标识一个人的东西传递给正确的人，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:12:18.270

我认为您不能以这种方式可靠地识别返回用户的机器。[NAT](http://en.wikipedia.org/wiki/Network_address_translation)将用您的服务器看到的公共 IP 地址替换“私有”IP 地址。当数据包到达您的服务器时，替代标识符（如[MAC 地址](https://stackoverflow.com/questions/839973/how-to-get-a-clients-mac-address-from-httpservlet)）也将消失。

在您的应用程序中构建应用程序级别标识（让用户或客户端进行身份验证）或使用不那么唯一的上下文标识符的组合，例如通过[浏览器指纹识别](https://softwareengineering.stackexchange.com/questions/122372/is-browser-fingerprinting-a-viable-technique-for-identifying-anonymous-users)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:13:58.043

> 您如何确保使用公共 IP 地址将您的 pakcet 交付给正确的客户

这个问题没有意义。如果您接受通过 TCP 的连接，则它已经连接到唯一的客户端。与该客户端交谈所需要做的就是通过该连接发送字节。您无需做任何事情来确保正确交付。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T07:31:05.470

在我看来，唯一的方法是使用 HTTPS 而不是 HTTP。HTTP是一个比较弱的协议；以蜜蜂相当容易欺骗和监视而闻名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T09:36:08.553

> 因此，如果我想确保我的数据包使用某个 IP 地址或其他唯一标识一个人的东西传递给正确的人，我应该怎么做？

你不能确保这一点。这在技术上是不可能的。

您*可以*做的是确保在将数据包交付给错误的人或机器时无法读取数据包。这可以使用各种强加密方案来实现。在应用程序级别，HTTPS 将确保这一点，前提是：

*   客户端彻底检查服务器提供的证书，并且
*   服务器的私钥不会泄露。

在正常情况下，HTTPS 服务器没有任何方法可以明确识别客户端计算机。您可以使用客户端证书解决此问题，但这需要大量的设置工作。此 IBM 说明提供了概述：

*   [http://www.ibm.com/developerworks/lotus/library/ls-SSL_client_authentication/](http://www.ibm.com/developerworks/lotus/library/ls-SSL_client_authentication/)

所以通常的做法是使用纯 HTTPS，结合一些应用程序级方案来验证用户；例如用户名和密码、双重身份验证、生物识别、令牌生成器等等。

* * *

> 但我怀疑我从这种方法获得的 IP 地址只是公共 IP 地址，它必须有多个客户端使用与此相同的公共 IP...

是的。鉴于 IPv4 空间已经用尽，这在如今变得越来越普遍。例如，NAT 网关允许具有“私有”IP 地址的客户端通过 NAT 网关与外部服务通信。对于外部服务，连接似乎将 NAT 网关的 IP 地址作为客户端地址。该服务无法找出“真实”IP 地址是什么，即使有办法，它也无法唯一标识客户端。

# c# - BackgroundWorker 和异步比较

> ID：12337102
> 
> 赞同：0
> 
> 时间：2012-09-09T06:48:08.330
> 
> 标签：c#, wpf

我们可以使用 BackgroundWorker 实现响应式 UI。这是示例。

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Thread test = new Thread(new ThreadStart(TestThread));
        test.Start();
    }
 private void TestThread()
    {
        for (int i = 0; i <= 1000000000; i++)
        {
            Thread.Sleep(1000);
            Dispatcher.Invoke(
                new UpdateTextCallback(this.UpdateText),
                new object[] { i.ToString() }
            );
        }
    }
    private void UpdateText(string message)
    {
        Tests.Add(message);
    }
public delegate void UpdateTextCallback(string message);
        private ObservableCollection<string> tests = new ObservableCollection<string>();

    public ObservableCollection<string> Tests
    {
        get { return tests; }
        set { tests = value; }
    } 
```

用户界面：

```
<StackPanel>
    <Button Content="Start Animation" Click="Button_Click" />
    <Button Content="Start work" Click="Button_Click_1" />
    <Rectangle Name="rec1" Fill="Red" Height="50" Width="50"/>
    <ListView ItemsSource="{Binding Tests}" ScrollViewer.CanContentScroll="True" />
</StackPanel> 
```

在这里我可以启动动画，同时我可以使用 BackGroundWorker 和 Dispatcher 更新 UI。

我可以通过这样的异步实现同样的事情：

```
 private async void GetTests(ObservableCollection<string> items)
    {
        for (int i = 0; i < 20; i++)
        {
            var s = await GetTestAsync(i);
            items.Add(s);
        }
    }

async Task<string> GetTestAsync(int i)
    {
        await Task.Delay(2000);
        return i.ToString() + " Call - " + System.Threading.Thread.CurrentThread.ManagedThreadId.ToString();
    } 
```

Q.1 与 BackgroundWorker 相比，使用异步有什么优势吗？

在哪些情况下我应该决定使用其中任何一种并避免使用另一种。

Q.2 我想了解 WPF 中 Async - Await 的使用。就像我们没有它不能做的事情一样，现在我们可以很容易地用它来做。

请指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:22:52.113

> Q.1 与 BackgroundWorker 相比，使用异步有什么优势吗？

当然——首先，代码要简单得多。在这种特殊情况下，您并没有做任何复杂的事情，但是一旦您开始协调多个任务，拥有更复杂的控制流（循环等），想要处理错误等，就会产生巨大的差异。

此外，在这种情况下，它节省了一个额外的线程 - 在您的第二次调用中，*一切*都发生在 UI 线程上。在更现实的示例中，您可能正在等待 Web 服务调用等，这绝对不需要占用额外的线程。

> Q.2 我想了解 WPF 中 Async - Await 的使用。就像我们没有它不能做的事情一样，现在我们可以很容易地用它来做。

理论上，你可以用 async 做的所有事情，如果没有它，你也可以做。在实践中，样板代码的数量以及正确有效地编写异步代码的*偶然复杂性是一个巨大的障碍。*

async/await 功能让您可以编写*看起来*像同步代码的异步代码，具有熟悉的控制流等。这意味着我们可以理解它，推理它，并且只担心异步带来的*固有*复杂性，而不是所有附带的编写回调等的复杂性。

# asp.net - 从业务层的 DDD 模式开始

> ID：12337105
> 
> 赞同：0
> 
> 时间：2012-09-09T06:48:35.447
> 
> 标签：asp.net, domain-driven-design, petapoco

我在我的解决方案资源管理器中分离了各个层（类库项目），如下所示：

我想使用 PetaPoco micro-ORM，[有人建议我](https://stackoverflow.com/questions/12288468/in-which-project-to-add-reference-to-petapoco)在 Repository 层添加 PetaPoco。按照建议，我将 PetaPoco 添加到 Repository 项目并从数据库生成模型。现在自动生成的 POCO 驻留在存储库中。

我没有关注的是当我想要实现 DDD 时，我想要模型中的所有 POCO，即业务层。

我在 WebUI 层添加了一个用于登录用户的 WebForm。现在要使用 DDD 时，需要 Model 中的接口吗？在哪里编写验证登录方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T18:54:11.047

我强烈建议你（重新）阅读 Eric Evans 关于领域驱动设计的书。你也应该看先生。埃文斯在本书之后的视频。DDD 与存储库、数据库、程序集或用户登录无关。

DDD 也有可能不是您真正想要的。似乎您正在寻找一种分层方法，在数据库顶部的一些存储库顶部的一些实体/应用程序服务顶部的用户界面。根据您正在构建的内容，这实际上可能就是您所需要的。

如果您想使用 PetaPoco 并且您的“orm”从数据库生成“模型”，那么将它们分开在不同的项目中没有多大意义。模型由 orm 生成的事实（以及它们将来可能需要重新生成的事实）使它们与 orm 完全耦合，因此将它们移动到单独的组件中不会给您带来任何好处。

要回答您的 ValidateLogin 问题，我建议将所有与身份验证相关的代码移动到与其他层正交（垂直）的基础设施层。应用程序用户不一定需要是“实体”。您可能还可以在处理身份验证的模型层中使用应用服务，但我通常发现身份验证是基础架构问题而不是业务问题。

最后，我建议您熟悉此类架构的缺陷和优势，然后确定它是否适合您正在构建的内容。另一方面，您需要意识到构建 DDD 并不便宜，而且（正如 Evand 先生所说）您可能不会在最初的几次中把它做好。

# emacs - Emacs 重复替换模式 - 宏？

> ID：12337109
> 
> 赞同：0
> 
> 时间：2012-09-09T06:49:15.023
> 
> 标签：emacs, macros, elisp, text-editor, emacs24

我想在多行中进行相同的更改。

例如，我想用下面这样的表格单元格元素将文件中的每一行括起来。

```
 <td>
  <div class="column" draggable="true"><header>A</header></div>
  </td> 
```

我希望下面的每一行都用上面的内容括起来。

```
 <div class="column" draggable="true"><header>B</header></div>
  <div class="column" draggable="true"><header>C</header></div>
  <div class="column" draggable="true"><header>D</header></div>
  <div class="column" draggable="true"><header>E</header></div> 
```

我们怎样才能做到这一点？据我了解，我们需要使用宏，你能指点一下吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T06:54:33.440

`C-x (` `<td>` `C-e` `</td>` `C-n` `C-a` `C-x )`在行首尝试while。

`<td>`这应该创建一个将当前行包含在,中的宏`</td>`。现在，`C-x e`尽可能多地重复它。

*更新*：我在评论中提到的截屏视频位于[http://emacsmovies.org/blog/2012/09/17/keyboard_macros/](http://emacsmovies.org/blog/2012/09/17/keyboard_macros/)以防您想看一看。

# java - Android - 使用正则表达式从 XML（Rss/Atom）Feed 过滤 html 标签

> ID：12337111
> 
> 赞同：0
> 
> 时间：2012-09-09T06:49:54.180
> 
> 标签：java, android, html, xml, regex

我正在为我的网站 http://www.werchelsea.com/ 开发一个新闻阅读器应用程序，该应用程序从提要中获取最新消息： [http :](http://www.werchelsea.com/feed/atom/) **//www.werchelsea.com/feed/atom/**我成功获得提要正确并将其转换为字符串。现在我的主要问题是我的提要描述包含带有 html 标签的数据，例如：

```
<p>It was Raul Meireles who came from the Merseyside to London to complete his move from Liverpool to Chelsea on the dead line day of the summer transfer window last year, when Chelsea failed to sign the highly-rated midfielder, Luka Modric. Chelsea were left with no other choice but to sign the Portuguese midfielder.</p>
<p>Meireles was a regular starter under the management of Villas-Boas, he really enjoyed working under

<a href='http://www.werchelsea.com/2012/09/05/time-to-say-good-bye-to-raul-meireles/303777_153113331443746_1122718871_n/' title='303777_153113331443746_1122718871_n'><img width="150" height="150" src="http://www.werchelsea.com/wp-content/uploads/2012/09/303777_153113331443746_1122718871_n-150x150.jpg" class="attachment-thumbnail" alt="Meireles first training session with Chelsea football club" title="303777_153113331443746_1122718871_n" /></a> 
```

我尝试用正则表达式替换所有这些标签，但由于某种原因，我无法找到正确的 RE 来匹配所有 html 标签类型。我用来代替的是：

```
protected String doInBackground(String... arg0) {

    String response="";
    try{
     URL feedwebsite=new URL(feedURL);
     SAXParserFactory spf=SAXParserFactory.newInstance();
     SAXParser sp = spf.newSAXParser();
     XMLHandler feedHandler=new XMLHandler();
     XMLReader feedReader=sp.getXMLReader();
     feedReader.setContentHandler(feedHandler);
     InputSource is=new InputSource(feedwebsite.openStream());
     feedReader.parse(is);
     response=feedHandler.getParsedFeed().replaceAll("<"+"[0-9a-zA-Z]+"+">","_").replaceAll("</"+"[0-9a-zA-Z]+"+">","-").replaceAll("<"+"[0-9a-zA-Z]+"+"/>",".");  
    }
    catch (Exception e)
    {
        response="Cannot Connect to the server.Please Check your Wifi/Data   Connection.";
        e.printStackTrace();
    }

    return response;
}*** 
```

如果使用 RE 替换字符串是正确的程序，或者还有其他方法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T11:35:43.747

要匹配 HTML 标记（打开或关闭），请使用此正则表达式：

```
<[^>]+?> 
```

# windows - 创建从源文件读取多个输入参数的批处理脚本

> ID：12337114
> 
> 赞同：1
> 
> 时间：2012-09-09T06:50:13.677
> 
> 标签：windows, batch-file

我需要编写一个批处理脚本，将一个文件夹的文件复制到另一个文件夹。用户将在文件中提供源文件夹和目标文件夹。该文件可能是 xml 或 cinfig 或文本文件。该文件有多个值。

例如文本文件可能有

```
<key="1" source="D:\test\" destination="E:\folderfile\"/>
<key="2" source="E:\test\" destination="F:\folderfile\"/>
<key="3" source="C:\test\" destination="D:\folderfile\"/>
<key="4" source="D:\test\" destination="E:\folderfile\"/>
<key="5" source="D:\test\" destination="E:\folderfile\"/> 
```

当批处理文件运行时，它要求用户输入键值。假设用户提供了 2、4、5 个值，批处理脚本应该从文件中获取密钥 2 的源和目标并复制文件等等，它也应该对 4 个和 5 个密钥执行。

请不要建议使用 power-shell 脚本或 vb 脚本，因为我应该只在批处理脚本中使用。任何帮助都将不胜感激。

谢谢普拉
文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:48:44.530

如果您要将文件格式化为简单的命令：

```
copy d:\test\ e:\folderfile\
copy e:\test\ f:\folderfile\
... 
```

您可以使用以下批处理文件：

```
setlocal enabledelayedexpansion
for /f "tokens=*" %%a in ('findstr /n . %1^|find "%2:"') do (
set searchtext = "%2:"
set linetext=%%a
set commandToCall=!linetext:%2:=!
)
call %commandToCall% 
```

使用：

```
mybatchfile.bat input.txt <linenumber> 
```

# bash - 用于复制特定文件集的 bash 脚本

> ID：12337115
> 
> 赞同：0
> 
> 时间：2012-09-09T06:50:18.267
> 
> 标签：bash

我有一组以 1 到 1000 .csv 的数字命名的文件，我想复制名称以 1 开头的 2 个或更少数字的文件（例如 1、10、11、12 等）。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:00:41.220

你可以轻松做到：

```
cp 1[0-9].csv /home
cp 1.csv /home 
```

将此另存为*file.sh* 然后运行为

```
$bash file.sh 
```

这会将所有文件复制到主目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T06:58:46.113

应该始终有效的正确方法：

```
find -regex '\./1[0-9]?\.csv' -exec cp {} destination \; 
```

由于`find`使用完整路径，我们必须`./`在开头匹配 a。然后是文字`1`，然后是可选的（注意`?`）范围中的字符`0-9`，最后是扩展名。任何`.`s 都必须转义为`\.`。

对于每个匹配的文件，`find`将执行由 给出的命令`-exec`，直到`\;`，替换`{}`为文件名。

要检查它是否捕获了正确的文件，请执行以下操作：

```
find -regex '\./1[0-9]?\.csv' 
```

* * *

一种更简单的方法，如果您的目录中没有其他混乱，则可以使用：

```
cp 1.csv 1?.csv destination 
```

# android - 捕获所有 Ctrl-? 安卓下

> ID：12337117
> 
> 赞同：1
> 
> 时间：2012-09-09T06:50:40.297
> 
> 标签：android, keyboard-shortcuts, hardware

我正在修改 ConnectBot 以利用硬件键盘，我需要捕获所有 Ctrl-？压力机。我已禁用所有字母菜单快捷方式（例如用于复制的 Ctrl-C），但 onKey 事件似乎仍未收到按键。

我对 Android 开发相当陌生（实际上是从今天开始修复 ConnectBot 以处理硬件键盘），并且快速的 Google 搜索似乎没有发现任何关于捕获 Ctrl-？按键。

我如何告诉 Android 将这些直接传递给 onKey 处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:05:57.593

事实证明，keyCode 被设置为正确的字符值（例如'C'）。但是，getUnicodeChar() 的结果为 0，因为 CTRL 被按住。

所需要的只是添加处理以获取 unicode 字符，而不管被按下的元键如何：

```
if (event.isCtrlPressed())
    event = new KeyEvent(KeyEvent.ACTION_DOWN, keyCode); 
```

后来，有必要在正在发送的关键数据中对“CTRL 被按住”信息进行编码，这已经是 ConnectBot 代码提供的功能。

# c - 使用 dup() 创建重复文件描述符和创建硬链接之间的区别？

> ID：12337122
> 
> 赞同：2
> 
> 时间：2012-09-09T06:52:55.310
> 
> 标签：c, linux, hardlink, dup

我刚刚试用了这个程序，我使用 dup 复制打开文件的文件描述符。

我已经对同一个文件进行了硬链接，并打开了同一个文件以读取程序中文件的内容。

我的问题是有什么区别？

我知道 dup 为我提供了对文件的运行时抽象，并且硬链接更多地指的是 filsystem 实现，但我不明白需要使用一个而不是另一个。

使用一个比另一个有什么优势？

如果我们想引用相同的文件位置而不是创建文件描述符，为什么不能显式引用硬链接，反之亦然？

我正在使用 Linux 和标准 C 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T06:56:16.460

硬链接在[i-nodes](http://en.wikipedia.org/wiki/Inode)上`dup`工作，在打开的[文件描述符](http://en.wikipedia.org/wiki/File_descriptor)上工作。这些是不同的动物。

一个文件主要是一个inode，目录条目指向那个inode（所以一些文件可以通过硬链接有多个名称，其他文件可以根本没有名称：一个临时文件仍然打开但未链接有一个i-node引用通过打开的文件描述符，但不再有任何名称）。I 节点在文件的持续时间内存在并被写入磁盘。

文件描述符仅存在于进程中（仅在内核内存中，不在磁盘上），因此无法写入磁盘（您只能写入其编号，这通常没有任何意义）。文件描述符（在内核内部）知道它的 inode，但也知道更多状态，特别是当前偏移量。

你可以有两个文件描述符在同一个文件上工作（同一个inode，可能是通过`open`两个不同的硬链接或符号链接路径）但具有不同的状态（例如不同的文件位置或偏移量）。

如果使用[dup(2)](http://man7.org/linux/man-pages/man2/dup.2.html)系统调用，两个文件描述符共享相同的状态（就在 dup 之后），特别是共享相同的文件偏移或位置。

如果使用[link(2)](http://man7.org/linux/man-pages/man2/link.2.html)系统调用，则两个目录条目指向同一个 inode。它们需要在同一个文件系统上。

并且[symlink(2)](http://man7.org/linux/man-pages/man2/symlink.2.html)系统调用创建了一个新的 inode（和一个新文件），它引用了符号名称。阅读有关[path_resolution(7)](http://man7.org/linux/man-pages/man7/path_resolution.7.html)和[symlink(7)](http://man7.org/linux/man-pages/man7/symlink.7.html)的其他手册页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T06:59:06.773

硬链接只是在两个不同目录中拥有相同文件的一种方式。这对于节省一些磁盘空间很有用。

Using`fdup`让你的程序中有两个不同的文件描述符指向同一个文件。如果您想复制某种包装文件描述符的逻辑对象，这很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T07:30:30.120

主要区别在于硬链接是持久的，而重复的文件描述符只持续与进程一样长。加上已经给出的原因。

# delphi - Delphi 7中的宽字符串到字符串转换

> ID：12337123
> 
> 赞同：6
> 
> 时间：2012-09-09T06:54:01.133
> 
> 标签：delphi, unicode, localization, delphi-7, ansi

我的应用程序是用 Delphi 7 编写的非 unicode 应用程序。

我想用这个函数将 unicode 字符串转换为 ANSI：

```
function convertU(ws : widestring) : string;
begin
  result := string(ws);
end; 
```

我也使用此代码来设置要转换的正确代码页。

```
initialization
  SetThreadLocale(GetSystemDefaultLCID);
  GetFormatSettings; 
```

它在 VCL 主线程中效果很好，但在 TThread 中效果不佳，在那里我得到了一些问号**“？”** 作为函数**convertU**的结果。

为什么不在 TThread 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T12:15:41.920

AFAIK`SetThreadLocale`不会改变当前系统Code Page，所以不会影响Delphi 7中依赖API调用的`widestring`to转换，即系统Code Page。`ansistring``GetACP`

系统代码页设置为例如在 Windows 7 中的控制面板中，然后是区域语言/管理选项卡/非 Unicode 应用程序的代码页。这需要重新启动系统。

Delphi 7 使用这个系统代码页，为所有转换 API 调用提供 0。所以 AFAIR`SetThreadLocale`不会影响 Delphi 7 中的`widestring`to`ansistring`转换。它会改变语言环境（例如日期/时间和货币格式），而不是系统用于其 Ansi <-> Unicode 转换的代码页。

较新版本的 Delphi 有一个`SetMultiByteConversionCodePage()`功能，能够设置用于所有`AnsiString`处理的代码页。

但是 API 调用（即在 Delphi 7中映射的*Windows.pas*`....A()`中的所有函数）将使用这个系统代码页。因此，如果要处理另一个代码页，则必须在转换为 Unicode 后调用宽 API。也就是说，Delphi 7 VCL 只能使用系统代码页，而不是.*`...()``...W()``SetThreadLocale`*

 *在 Delphi 7 下，我的建议是：

*   随处使用`WideString`，以及特定的“宽”API 调用——Delphi 7 有几组组件可以处理`WideString`;
*   使用您自己的类型，带有专用字符集，但在使用 VCL/RTL 或“Ansi”API 调用之前，您需要进行显式转换 - 例如`MyString = type AnsiString`（这是我们在 mORMot 中所做的，通过`RawUTF8`为内部 UTF-定义自定义类型8个过程）。

This is much better handled with Delphi 2009 and up, since you can specify a code page to every `AnsiString` type, and properly handle conversion to/from Unicode, for API calls or VCL process.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T07:31:17.703

`SetThreadLocale()`在块内调用`initialization`对`TThread`. 如果要设置线程的语言环境，则必须`SetThreadLocale()`在方法内部调用`TThread.Execute()`。

更好的选择是完全不依赖`SetThreadLocale()`。通过直接调用进行您自己的转换，`WideCharToMultiByte()`以便您可以指定要转换到的特定 Ansi 代码页。*

# php - SendGrid SMTP API

> ID：12337127
> 
> 赞同：4
> 
> 时间：2012-09-09T06:54:24.763
> 
> 标签：php, email, smtp, sendgrid

我正在使用 SendGrid 和 PHP (CakePHP)。我的服务器没有启用 SMTP。我是否需要在我的服务器上使用 smtp 才能使用 SendGrid 的 SMTP API？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T07:30:04.800

免责声明：我在 SendGrid 工作。

我们的 SMTP API 示例建议使用 Swift_SmtpTransport 库，该库建立与终端系统的低级套接字连接。当使用我们的示例进行配置时，Swift 会连接到我们的系统来传递您的消息，并且不需要您端的 SMTP 服务。

编辑，2014 年 6 月 20 日的新链接： [https ://sendgrid.com/docs/Code_Examples/php.html](https://sendgrid.com/docs/Code_Examples/php.html)

# xml - 如何从键中选择哪个字段不为空

> ID：12337130
> 
> 赞同：1
> 
> 时间：2012-09-09T06:55:07.037
> 
> 标签：xml, xslt, xslt-1.0, xslkey

我在下面有 xml 文件和 xslt 转换：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <?xml-stylesheet version="1.0" type="text/xml" href="pets.xsl" ?>
    <pets>
        <pet name="Jace" type="dog" />
        <pet name="Babson" type="" />
        <pet name="Oakley" type="cat" />
        <pet name="Tabby" type="dog" />
    </pets>

<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
    <xsl:key name="pets-key" match="pet" use="type" />
    <xsl:template match="/" >
        <html>
            <head><title></title></head>
            <body>
                <xsl:for-each select="key('pets-key', '' )" >
                    <xsl:value-of select="@name" />
                </xsl:for-each>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

**如何使用按键功能选择所有类型不为空的宠物？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:20:06.347

需要注意的两点：

1.  您的密钥定义中有错误。您需要使用 use="@type"，而不是 use="type"
2.  您需要设置差异来选择所有类型为非空的宠物，并且仍然使用 key() 函数。XPATH 1.0 中设置差异的一般方法是......

    $node-set1[count(. | $node-set2) != count($node-set2)]

总而言之，使用 key() 并列出所有非空类型的宠物的正确但低效的 XSLT 1.0 样式表是......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
<xsl:output method="html" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:key name="kPets" match="pet" use="@type" />

<xsl:template match="/" >
  <html>
    <head><title>Pets with a type</title></head>
    <body>   
      <ul>
        <xsl:for-each select="*/pet[count(. | key('kPets', '' )) != count(key('kPets', '' ))]" >
          <li><xsl:value-of select="@name" /></li>
        </xsl:for-each>
      </ul>
    </body>
   </html>
</xsl:template>

</xsl:stylesheet> 
```

这会产生输出......

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Pets with a type</title>
  </head>
  <body>
    <ul>
      <li>Jace</li>
      <li>Oakley</li>
      <li>Tabby</li>
    </ul>
  </body>
</html> 
```

* * *

话虽如此，这个问题并不适合作为使用键的一个很好的练习。在现实生活中，如果您想实现这个结果，一个更好、更高效的 XSLT 1.0 解决方案将是......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
<xsl:output method="html" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:key name="kPets" match="pet" use="@type" />

<xsl:template match="/*" >
  <html>
    <head><title>Pets with a type</title></head>
    <body>   
      <ul>
        <xsl:apply-templates />
      </ul>
    </body>
   </html>
</xsl:template>

<xsl:template match="pet[@type != .]">
  <li><xsl:value-of select="@name" /></li>
</xsl:template>  

</xsl:stylesheet> 
```

# python - 如何使用 django 设置静态文件服务器

> ID：12337131
> 
> 赞同：0
> 
> 时间：2012-09-09T06:55:32.320
> 
> 标签：python, django, web-services, web-applications, openshift

对于一个简单的事实，我根本无法使用 Amazon Web Services 来提供静态文件。

我搜索了一段时间，发现 Redhat 的[Openshift](http://openshift.com)提供“自己动手”PaaS。所以，我正在考虑设置我自己的静态文件服务器。

以下是我希望在其中拥有的东西：

1.  我想动态上传/删除文件（无需真正手动编辑代码）。
2.  该网站应该是绝对安全的。（如果可能，与 Amazon EC2 一样安全）
3.  我希望添加一个 JSON 响应，以便我可以轻松地做一些小魔术（例如：我可以对一些静态文件进行分组、搜索、知道静态文件的数量..）

所以，我想知道是否有人能告诉我应该从哪里开始？有没有任何教程。

我正在考虑使用 Django 来完成这项工作（因为我很擅长）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-15T16:45:11.577

我知道你发布这个问题已经有一段时间了，但我想我会让你知道我们确实有一个 django 快速入门，可以完成你提到的所有事情。如果您仍然感兴趣，请查看[https://github.com/openshift/django-example](https://github.com/openshift/django-example)。

# php - Codeigniter do_upload 在生产服务器中没有响应

> ID：12337132
> 
> 赞同：4
> 
> 时间：2012-09-09T06:55:39.090
> 
> 标签：php, codeigniter, file-upload

我制作了一个可以上传某些文件类型的页面。它在我的本地开发中运行良好，但在生产中却不行。它不会通过 do_upload() 函数。除此之外没有任何显示。

```
$path = 'uploads';
echo 'path: '. $path .' <br>'; 

//-- config for uplaod --
$configUpdload['upload_path']   = $path ;
$configUpdload['allowed_types'] = 'gif|jpg|png|xls|xlsx|pdf';
$configUpdload['max_size']   = '4000'; //size in kilobytes
$configUpdload['encrypt_name']  = TRUE;

//-- load upload library --
$this->load->library('upload');

$this->upload->initialize($configUpdload);

if ($_FILES['fileref']['name']!="")
{
    ini_set('display_errors', true);
    error_reporting(E_ALL);

    echo 'uploadAttachment<br>';

    $uploaded = $this->upload->do_upload("fileref");

    echo 'uploaded: '. $uploaded . '<br>';

    if ($uploaded == true)
    {
        echo 'uploaded data<br>';
        $inputUp = $this->upload->data();
        echo 'data: '. print_r($inputUp,true) . '<br>'; 
        $uploadInput['orig_name']   = $inputUp['orig_name'];
        $uploadInput['enc_name']    = $inputUp['file_name'];
        $uploadInput['extension']   = $inputUp['file_ext'];

        echo 'uploaded true<br>';
    }else{
        die($this->upload->display_errors());
    }
} 
```

我尝试将 upload_path 更改为不存在的文件夹，它显示“上传路径似乎无效”。意味着 do_upload() 工作正常吗？

上传文件夹权限为 777。

我也尝试使用绝对路径，但仍然没有显示任何通过 do_upload() 的内容。

或者和服务器有什么关系？

有谁知道发生了什么？非常感谢帮助。

谢谢。

[编辑1]

服务器的错误日志和正常日志中没有任何内容。我还设置了 $config['log_threshold'] = 4; 没有错误日志。

[编辑2]

生产服务器是 linux 下的第 3 方网络托管。我尝试了 php_info() 并跟踪与上传有关的任何事情。

```
file_uploads        On  On  
max_file_uploads    20  20  
pload_max_filesize  30M 30M  
upload_tmp_dir      /tmp/   /tmp/  
suhosin.upload.disallow_binary  0   0  
suhosin.upload.disallow_elf 1   1  
suhosin.upload.max_uploads  25  25  
suhosin.upload.remove_binary    0   0  
suhosin.upload.verification_script  no value 
```

   我还尝试减小文件大小 $configUpdload['max_size'] = '10'; 但 do_upload() 之后仍然没有消息。

[Edit3] 我的文件夹结构：

```
public_html/gtapp/
public_html/gtapp/csystem/ <- is system folder
public_html/gtapp/v1/ <- is application folder
public_html/gtapp/media/
public_html/gtapp/uploads/
public_html/gtapp/license.txt 
```

在 config.php 中：

```
$config['base_url'] = 'http://www.example.com/gtapp/ 
```

在 index.php 中：

```
$application_folder = 'v1'; 
```

当我`APPPATH . 'uploads';`对上面的代码进行显示时：

```
uploadAttachment
path: v1/uploads
uploaded: 
The upload path does not appear to be valid. 
```

我试过`$path = $_SERVER['DOCUMENT_ROOT'] . '/gtapp/uploads';` 它只是显示：

```
uploadAttachment
path: /home/user/domains/example.com/public_html/gtapp/uploads 
```

[编辑4]

我制作了原生 PHP 上传代码的粗略版本，它可以工作。我不认为这是服务器问题。下面是代码：

```
$name = 'fileref'; 

$upload_path    = './uploads/';
$allowed_types  = array("jpg", "jpeg", "gif", "png", "xls", "xlsx", "pdf");
$extension      = end(explode(".", $_FILES[$name]["name"]));
$max_size       = '4000';

if ($_FILES['fileref']['name']!="")
{
    if ((($_FILES[$name]["type"] == "image/gif")
        || ($_FILES[$name]["type"] == "image/jpeg")
        || ($_FILES[$name]["type"] == "image/pjpeg")
        || ($_FILES[$name]["type"] == "image/png")
        || ($_FILES[$name]["type"] == "image/x-png")
        || ($_FILES[$name]["type"] == "application/excel")
        || ($_FILES[$name]["type"] == "application/vnd.ms-excel")
        || ($_FILES[$name]["type"] == "application/msexcel")
        || ($_FILES[$name]["type"] == "application/pdf")
        || ($_FILES[$name]["type"] == "application/x-download"))
        && (round($_FILES[$name]["size"]/1024,2) < $max_size )
        && in_array($extension, $allowed_types))
        {

            if ($_FILES[$name]["error"] > 0)
            {
                echo $_FILES[$name]["error"]);
            }
            else
            {
                $uploadInput['orig_name']   = $_FILES[$name]["name"];
                $uploadInput['enc_name']    = sha1($_FILES[$name]["name"]);
                $uploadInput['extension']   = $_FILES[$name]["type"];

                $moved = move_uploaded_file($_FILES[$name]["tmp_name"], $upload_path . $uploadInput['enc_name'] . '.' . $extension);

                if($moved)
                    echo 'success';
                else
                    echo 'fail';

            }
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:58:07.263

我对 CI 有类似的问题，并试图验证应用程序文件夹之外的文件是否存在，并发现 CI 为自己保留了这个环境验证。APPPATH，它从你的应用程序和系统文件夹所在的 index.php 级别找到 CI 所在的核心文件夹。因此，如果您尝试替换`$configUpdload['upload_path'] = './uploads' ;`为`$configUpdload['upload_path'] = APPPATH.'uploads';`

你可能会遇到更多的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:19:40.373

我曾经遇到过这个问题，我所做的只是更改以下内容：

改变：

```
$path = 'uploads';
$configUpdload['upload_path'] = $path ; 
```

至：

```
$path = './uploads';
$configUpdload['upload_path'] = $path; 
```

要不就：

```
$configUpdload['upload_path'] = './uploads'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-16T10:14:08.203

更改此行

`$upload_path = './uploads/';`

至

`$upload_path = FCPATH.'uploads/';`

它也适用于生产服务器。

# php - php和插入sql的动态循环，放置和变量都必须是动态的

> ID：12337133
> 
> 赞同：1
> 
> 时间：2012-09-09T06:55:41.973
> 
> 标签：php, sql, loops, dynamic, insert

变量是`$ingval1`等等.. SQL 字段是相同的，显然没有 $..

我的脚本的这一部分没有更新表格，为什么？

```
 <?php // post

     $basename1 = 'ingval';$basename2 = 'ingamt';
     $basename3 = 'ingdes';$basename4 = 'ingcode';

     for ($y = 1; $y < 26; $y++) { 
         $tempname1 = $basename1 . $y; $tempname2 = $basename2 . $y; 
         $tempname3 = $basename3 . $y; $tempname4 = $basename4 . $y;  
         $$tempname1 = $_POST['ingval'.$y];
         $$tempname2 = $_POST['ingamt'.$y];
         $$tempname3 = $_POST['ingdes'.$y];
         $$tempname4 = $_POST['ingcode'.$y];

    }       // sql insert

    $basename1 = 'ingval';$basename2 = 'ingamt';
    $basename3 = 'ingdes';$basename4 = 'ingcode';

    for ($y = 1; $y < 26; $y++) { 

        $tempname1 = $basename1 . $y; $tempname2 = $basename2 . $y; 
        $tempname3 = $basename3 . $y; $tempname4 = $basename4 . $y; 

        $sql = "UPDATE $cookbookdb SET  

           ingval.$y = '" . $$tempname1 . "',
           ingamt.$y = '" . $$tempname2 . "',
           ingdes.$y = '" . $$tempname3 . "',
           ingcode.$y = '" . $$tempname4 . "'

        WHERE id = '" . $barcodeinput . "'";

        sql_query($sql)or die(mysql_error());

    } ?> 
```

我已经尝试了几种不同的方法，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T06:58:12.963

为什么在更新语句中使用[可变变量？](http://php.net/manual/en/language.variables.variable.php)它可能是有效的，但我无法从您的代码中看到任何使其有效的值。

应该是：

```
ingval.$y = '" . $tempname1 . "' 
```

而是在您的更新声明中？

从代码中，值`$tempname1`将是`ingval1`通过`ingval26`，但值将是调用的`$$tempname1`变量的值，我在代码中根本看不到。`$ingval1``$ingval26`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:05:16.957

你确定你已经连接到数据库。

```
 mysql_connect('host','username','password');
 mysql_select_db('db'); 
```

如果是这样，怎么 `mysql_error()`说？

# tomcat - 如何为每个组中具有不同角色的用户实现 JDBCRealm？

> ID：12337134
> 
> 赞同：0
> 
> 时间：2012-09-09T06:55:50.260
> 
> 标签：tomcat, jdbcrealm

我想使用 JDBCRealm 进行登录身份验证，但是我没有一个 user_role 表，而是有一个 groups 表，它有一个指向每个包含用户的组表的指针，并且它在该组中的角色，我应该如何为这种情况实现 JDBCRealm？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:49:31.623

您不能`JDBCRealm`用于此目的：您必须编写自己的 JDBCRealm 子类并更改用于授权的查询。

另一个提示：根本不要使用 JDBCRealm：它根本无法扩展，因为`Connection`所有数据库通信都使用一个 JDBC 对象。你最好使用`DataSourceRealm`.

# android - 重新调整 complexType 对象时，SoapObject 结果返回 anyType{} 作为值

> ID：12337137
> 
> 赞同：6
> 
> 时间：2012-09-09T06:56:32.187
> 
> 标签：android, android-ksoap2

我在我的 android 应用程序中调用 Web 服务，方法是 getGramaNiladhariData()，我得到的结果是 SoapObject。

```
result = (SoapObject) envelope.bodyIn;  Log.d("WS", String.valueOf(result)); 
```

这就是我得到的 **String.valueOf(result)**

### getGramaNiladhariDataResponse{getGramaNiladhariDataResult=anyType{gnName=anyType{}; 地址=anyType{}; 工作天=任何类型{}；gnDivision=anyType{}; 联系人号码=任何类型{}；}; }

这里我调用的方法返回一个 complexType 对象，由 5 个属性组成。正如我在互联网上发现的那样，作为返回 complexType 对象的 web 服务方法的结果，我无法获得一个 soap 对象。如果是这样，我应该如何获取这些值。

我要解决的是为什么我将 anyType{} 作为值，而不是实际值。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T09:50:27.820

已经来不及回答了。但仅供参考和其他认为这很有用的人，

通过做`String.valueOf(result)`你正在打印正文的全部内容。但为了使用参数获取您的值，首先您需要点击正确的`SoapObject`.

我不知道是否有任何简单的方法可以找到正确`SoapObject`的，但仍然可以这样做，一旦你得到正确的`SoapObject`，你就完成了。在下面找到如何找到正确的`SoapObject`，

首先，您需要首先检查参数的数量`SoapObject`，

```
result.getPropertyCount(); 
```

由于这是第一个封面，因此您将获得更少的计数，

然后，打印并查看哪个参数为您提供了正确的详细信息，

```
result.getProperty(0);
result.getProperty(1);
etc ... 
```

一旦你找到正确的参数，然后抓住它`SoapObject`。像这样，

```
SoapObject result2 = (SoapObject) result.getProperty(0); 
```

然后检查这个对象的计数。并执行与上述相同的操作，直到获得正确的`SoapObject`.

一旦找到最后一个`SoapObject`，它将像这样打印而没有无用的字符串，

```
anyType{gnName = Prasad; address = Address of the person; ; workingDays = 5; gnDivision = California; contactNumber = 0123456789} 
```

现在你可以像这样继续处理这个对象，

```
SoapObject result3 = (SoapObject) result2.getProperty(5);
Log.v("Name : ", result3.getProperty("gnName").toString()); 
```

您将在 DDMS 中获得如下输出，

```
Name : Prasad 
```

我想这会对您有所帮助，如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-05T04:42:26.907

当您从 Web 服务获取空值时出现 anytype{}。首先插入一些数据，然后尝试从 Web 服务获取数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-06T15:36:54.560

我制作自己的代码我刚刚完成现在我想与你分享它可能会有所帮助

我只在一张桌子上工作，那是我的工作，我将尝试解释步骤

```
 try {
        // Invole web service
        androidHttpTransport.call(SOAP_ACTION + "mywebservicecall", envelope);
        // Get the response

        SoapObject resultsString = (SoapObject) envelope.getResponse();
          //resultsString looks like this ==> anyType{schema=anyType{element=anyType{complexType=anyType{choice=anyT....etc
          //here i found some complex in getproperty(0) so i not need it
          //then i make Object1 that contain datatable from my database getproperty(1)

        SoapObject Object1 = (SoapObject) resultsString.getProperty(1);
           //object1 look like this ==> anyType{NewDataSet=anyType{Table1=anyType{ID_CAT=1; CAT_V_N=ma 
           //here my table1 i wanna to fitch the NewDataSet

        SoapObject tables = (SoapObject) Object1.getProperty(0);  //NewDataset
           //tables object now looks like this  ==> anyType{Table1=anyType{ID_CAT=1;CAT_N ...etc

           //now i wanna loop in my table to get columns valus it will be tablesObject properties depend on iteration to get row by row
        for (int i = 0; i < tables.getPropertyCount(); i++) {
            SoapObject Objecttable = (SoapObject) tables.getProperty(i); 
           System.out.println("ID_CAT = " + Objecttable.getProperty("ID_CAT").toString());
           System.out.println("CAT_N= " +Objecttable.getProperty("CAT_N").toString()); 
        }

    } catch (Exception e) {
        e.printStackTrace(); 
           System.out.println("ID_CAT = 0 ");
           System.out.println("CAT_N = None");
    } 
```

最后一个代码解释一个表

现在我刚刚结束的是如何控制多表

我也会解释的

```
 SoapObject resultsString = (SoapObject) envelope.getResponse(); 
        // the same
        SoapObject Object1 = (SoapObject) resultsString.getProperty(1); 
        // the same
        SoapObject tables = (SoapObject) Object1.getProperty(0); 
        // the same

        // the same
        for(int i = 0; i < tables.getPropertyCount(); i++){
            SoapObject Objecttable = (SoapObject) (SoapObject) tables.getProperty(i);

            try{ 

//tables.toString().substring(8,tables.toString().indexOf("=")).equals("Table1")
   // here i was try to get the name of the table to hundel it but i fount my table name in attribute id 
   // it not came as table name like if my table that comming from database is hi
   //the first row will be attrib=>id=>hi1 and sec row will be hi2 
   //the first row will be attrib=>rowOrder=>0 and sec row will be 1 
                    if(Objecttable.getAttribute("id").equals("Table1"+(Integer.valueOf(Objecttable.getAttribute("rowOrder").toString())+1))){
// so Objecttable.getAttribute("id") will be ( "Table11" ) in first row
//Objecttable.getAttribute("rowOrder").toString() ==> will be 0

//Integer.valueOf(Objecttable.getAttribute("rowOrder").toString())+1) well be 1 for first row of this table

// so Objecttable.getAttribute("id").equals("Table1"+(Integer.valueOf(Objecttable.getAttribute("rowOrder").toString())+1)) will be true 
/**
then i can loop and fitch data like single table 
*/
                }

                if(Objecttable.getAttribute("id").equals("Table2"+(Integer.valueOf(Objecttable.getAttribute("rowOrder").toString())+1))){

                }
            }catch (Exception e) {
            } 
```

希望这对你们来说很清楚，祝你好运

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-31T19:57:41.010

我以前遇到过这个问题。我解决了它。我以前遇到过这个问题。我解决了它。我似乎花了很多时间来寻找解决这个问题的方法。我的项目它的工作。我创建 Web 服务 .Net 对象数组。我希望这能帮到您。

```
 //.................................
        SoapObject requestx = new SoapObject(NAMESPACE, METHOD_NAME);

        SoapSerializationEnvelope envelopex = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelopex.dotNet = true;
        envelopex.setOutputSoapObject(requestx);
        HttpTransportSE httpTransportx = new HttpTransportSE(URL);          

        try  {                    
            httpTransportx.call(SOAP_ACTION, envelopex);
            SoapObject responsex = (SoapObject)envelopex.getResponse(); // not envelopex.bodyIn;

             int i=0;
             int RCount=responsex.getPropertyCount();
             int[] tbIDArray = new int[RCount+1];
             int[] iMonthAarray = new int[RCount+1];
             int[] iYearAarray = new int[RCount+1];
             String[] sDetailAarray = new String[RCount+1];

             for (i = 0; i < RCount; i++) {
                 Object property = responsex.getProperty(i);
                 if (property instanceof SoapObject) {
                     SoapObject info = (SoapObject) property;
                     String tbID = info.getProperty("tbID").toString();
                     String iMonth = info.getProperty("iMonth").toString();
                     String iYear = info.getProperty("iYear").toString();
                     String sDetail = info.getProperty("sDetail").toString();

                    tbIDArray[i] =Integer.valueOf(tbID);
                    iMonthAarray[i] =Integer.valueOf(iMonth);
                    iYearAarray[i] =Integer.valueOf(iYear);
                    sDetailAarray[i] =sDetail;
                 }//if (property instanceof SoapObject) {
             }//for (i = 0; i < RCount; i++) {

        }  catch (Exception exception)   {
            MsgBox1(exception.toString() , "Error");
        } 
```

# xcode - 如何使用 Xcode Utility 视图？

> ID：12337139
> 
> 赞同：0
> 
> 时间：2012-09-09T06:56:56.450
> 
> 标签：xcode, utility

抱歉问了这么一个基本问题。

在使用 MS Visual Studio 15 年后，我最近搬到了 Apple 和它的 Xcode。所以我真的是这个新工具的新手。我可以使用实用程序的一些非常基本的部分作为参考插座或类似的东西，但还有很多我在 Visual Studio 中从未见过的其他东西（作为文件所有者、可访问性参考......）

我正在寻找一个很好的教程。有人知道吗？任何建议将不胜感激。

![Xcode 实用工具边栏](../Images/089f73ea4e24d3dd522b0198973d7112.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:22:26.990

Apple 有关于他们的技术的非常有用的文档：[OSX](https://developer.apple.com/library/mac/navigation/)和[iOS](https://developer.apple.com/library/ios/navigation/)

开始使用 Xcode 的最佳位置是[Xcode 4 User Guide](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/000-About_Xcode/about.html#//apple_ref/doc/uid/TP40010215-CH1-SW1)和[Xcode Quick Start Guide](http://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/xcode_quick_start/000-About_Xcode/introduction.html#//apple_ref/doc/uid/TP40010575-CH1-SW1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T15:45:41.477

在 iTunesU 上观看斯坦福 iOS 课程。它非常好，如果您知道编程，它会非常快。请务必观看 2011 年秋季版，它是关于 iOS5 和 xcode4 的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T14:19:08.730

这类似于 VS 中的属性菜单。唯一的区别是您可以简单地更改为助手编辑器并按住 control+从每个编辑器直接拖动到您的代码。

记住这是基于 MVC（模型=数据，视图=你看到的和控制器）事实上视图和模型几乎是分开的，控制器是它们之间的连接器：

这可能对上图有所帮助：一切都基于控制器计算：OUT-let 可以提醒您控制器的输出：我的意思是从控制器到某物的命令。sender 表示向控制器发送消息的对象。当您将对象拖放到窗口并双击它们时，这些代码就像 Visual Studio 中的委托编码一样。(id)sender 对应于 VS 中的 (void)sender。

# javascript - 添加 data-ajax="false" 后退按钮不起作用

> ID：12337141
> 
> 赞同：1
> 
> 时间：2012-09-09T06:57:19.393
> 
> 标签：javascript, jquery-ui, jquery, jquery-mobile

嗨，我假设有两个 html 文件为 index.html 和 test.html。在 index.html 中，我有一个单击该按钮的按钮，我称之为 test.html。在 test.html 中，我正在显示一个表格。现在我的 index.html 就像：

```
<div data-role="page" id="home" data-theme="d">

        <div data-role="header" align="center">

            <a href="#" data-rel="back" data-icon="arrow-l">Back</a>
                <h1>MySite.com</h1>
            <a href="MainMenu.html"  data-icon="grid">Menu</a>

        </div>
    <div data-role="content" >

        <a href="UI/Equal/test.html" data-ajax="false" data-role="button" id="myButton">i ndex</a>          

    <ul data-role="listview" data-inset="true">
        <li><a href="UI/Equal/test.html"  data-ajax="false"> Order Book </a></li>
    </ul>

     </div>
</div> 
```

现在单击按钮并在列表中转到 test.html，并且表格正确显示。在我的 test.html 中有一个标题，其中我有后退按钮：

```
<div data-role="header" align="center">

        <a href="#" data-rel="back" data-icon="arrow-l">Back</a>
            <h1>Test.com</h1>
        <a href="MainMenu.html"  data-icon="grid">Menu</a>

    </div> 
```

现在，当我单击后退按钮时，它不会转到 index.html。如果我`data-ajax="false"`从 index.html 中删除，那么 test.html 的后退按钮可以正常工作，但现在在 test.html 中，我正在为我的表使用 .css 文件，现在该 .css 文件的效果不适用。如果我`data-ajax="false"`在 index.html 中使用，则正确绘制了 Test.html 表（意味着我的 .css 文件正确加载）。如何同时获得正确的后退按钮和表格。

任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T14:26:06.167

当您使用时，`data-jax="false"`您将禁用 jquery mobile 的 Ajax 导航，因此您链接到的页面无法访问 DOM 中的前一页。

要在第二页上有后退按钮，您需要使用传统链接将其硬编码到标题中`<a href="..."`，或者对其进行编码以从 DOM 中拉出上一页。

# javascript - 将全局变量传递给 jQuery 中的 $(document).ready 函数

> ID：12337142
> 
> 赞同：2
> 
> 时间：2012-09-09T06:57:25.250
> 
> 标签：javascript, jquery

我有一个网站，每首歌曲都有特定的字母数字 ID，比如`57bfab618de4191`在 jQuery 播放器中，必须通过链接分配 MP3 歌曲。

jplayer函数是这样的：

```
 $(document).ready(function (){
   function playAudio(val) {newVal=val}    

        $("#jquery_jplayer_1").jPlayer({
            ready: function (event) {
                $(this).jPlayer("setMedia", {
    mp3:"http://website.com/dlb.php?file="+newVal                       });
            },
            swfPath: "js",
            supplied: "mp3",
            wmode: "window"
        });
    }); 
```

我想为用户播放列表中存在的不同歌曲，所以我通过这样的按钮传递了歌曲`onClick`ID

```
 onClick="playAudio(<?php echo "'".$songid. "'"; ?>)" 
```

其中歌曲 ID 是数据库中指定歌曲的 ID，例如`57bfab618de4191`

这样我可以传递值，但我无法将 playAudio 函数的参数传递给`document.ready`函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:08:01.027

```
var val = 'whateveer'

function playAudio(nval) {
    var val = nval;
    $("#jquery_jplayer_1").jPlayer({
        ready: function(event) {
            $(this).jPlayer("setMedia", {
                mp3: "http://website.com/dlb.php?file=" + val
            });
        },
        swfPath: "js",
        supplied: "mp3",
        wmode: "window"
    });
} 
```

不需要`$(document).ready`

* * *

如果您需要更换歌曲：

```
var val = '12345'; // your first song
$(document).ready(function() {
    $("#jquery_jplayer_1").jPlayer({
        ready: function(event) {
            $(this).jPlayer("setMedia", {
                mp3: "http://website.com/dlb.php?file=" + val
            });
        },
        swfPath: "js",
        supplied: "mp3",
        wmode: "window"
    });
});

function playAudio(nval) {
    var val = nval;
    $("#jquery_jplayer_1").jPlayer({
        "setMedia", {
            mp3: "http://website.com/dlb.php?file=" + val
        }
    });
    // --- OR ---
    $("#jquery_jplayer_1").changeAndPlay("http://website.com/dlb.php?file=" + val);
} 
```

更多信息：

*   [通过单击 Amazon S3 上托管的链接更改 jPlayer 上的歌曲](https://stackoverflow.com/questions/8206608/changing-songs-on-jplayer-by-clicking-a-link-hosted-on-amazon-s3)
*   [http://www.jplayer.org/0.2.1/developer-guide/#jPlayer-change](http://www.jplayer.org/0.2.1/developer-guide/#jPlayer-change)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T07:17:30.860

您需要使用可变范围。

```
var newVal = 'default_song_to_play_if_any';

function playAudio(val){
    newVal = val;
    $("#jquery_jplayer_1").jPlayer("destroy");
    $("#jquery_jplayer_1").jPlayer({
       ready: function (event) {
          $(this).jPlayer("setMedia", {
             mp3:"http://website.com/dlb.php?file="+newVal
          });
       },
       swfPath: "js",
       supplied: "mp3",
       wmode: "window"
   });
}

//use this ready function only if you want to play a default song on load
$(document).ready(function(){
    playAudio(newVal); 
}); 
```

# android - Android 音频项目中未处理的异常

> ID：12337154
> 
> 赞同：0
> 
> 时间：2012-09-09T07:00:27.150
> 
> 标签：android, audio, handler

可能有两个问题，一个是关于`Handler`的，另一个是关于声音池的。这是错误日志：

```
09-09 06:36:24.743: W/dalvikvm(541): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
09-09 06:36:24.801: E/AndroidRuntime(541): FATAL EXCEPTION: main
09-09 06:36:24.801: E/AndroidRuntime(541): java.lang.NullPointerException
09-09 06:36:24.801: E/AndroidRuntime(541):  at com.example.helloandroid.WelcomeView.playSound(WelcomeView.java:78)
09-09 06:36:24.801: E/AndroidRuntime(541):  at com.example.helloandroid.TestHelloAndroidActivity$1.handleMessage(TestHelloAndroidActivity.java:67)
09-09 06:36:24.801: E/AndroidRuntime(541):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-09 06:36:24.801: E/AndroidRuntime(541):  at android.os.Looper.loop(Looper.java:137)
09-09 06:36:24.801: E/AndroidRuntime(541):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-09 06:36:24.801: E/AndroidRuntime(541):  at java.lang.reflect.Method.invokeNative(Native Method)
09-09 06:36:24.801: E/AndroidRuntime(541):  at java.lang.reflect.Method.invoke(Method.java:511)
09-09 06:36:24.801: E/AndroidRuntime(541):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-09 06:36:24.801: E/AndroidRuntime(541):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-09 06:36:24.801: E/AndroidRuntime(541):  at dalvik.system.NativeStart.main(Native Method) 
```

*任何人都可以请帮助！非常感谢。这是我的代码，请忽略评论中的汉字。非常感谢。:P*

**1.“TestAndroidActivity”代码：**

```
package com.example.helloandroid;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.os.Looper;
import android.os.Message;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.Window;
import android.view.WindowManager;

public class TestHelloAndroidActivity extends Activity { 
/** Called when the activity is first created. */ <br/>
View CurrentView; 
WelcomeView wv; 
ProgressView pv; 
GameView gv; 
boolean wantSound=true;         //是否开启声音,默认不开
Handler myHandler = new Handler(){                  //创建自定义的Handler
    public void handleMessage(Message msg) {            //重写处理消息的方法
        switch(msg.what){                           //判断Message对象的类型
        case 0:                                 //切换到开始游戏前的进度条界面
            pv = new ProgressView(TestHelloAndroidActivity.this, 4);    //target为0，进度条走完后去Gameview
            setContentView(pv);                     //切换屏幕到ProgressView
            CurrentView = pv;                       //记录当前View
            wv.soundPool.release();                 //释放SoundPool
            wv.soundPool = null;                        //声明SoundPool对象为null
            wv = null;                              //声明WelcomeView对象为null
            new Thread(){                           //创建并启动一个新线程
                public void run(){
                    Looper.prepare();
                    BitmapManager.loadGamePublic(getResources());   //加载游戏界面图片资源
                    updateProgress(40);                         //更新进度条
                    gv = new GameView(null);            //创建GameView对象
                    updateProgress(100);                        //更新进度条
                }
            }.start();
            break;
        case 4:                                 //开始游戏
            setContentView(gv);                     //切换屏幕到GameView
            CurrentView = gv;                       //记录当前View
            pv = null;                              //声明pv指向的ProgressView的
            break;
        /*case 1:                                   //显示帮助
            hv = new HelpView(RunActivity.this);            //创建HelpView对象
            setContentView(hv);                     //切换屏幕到HelpView
            currentView = hv;                       //记录当前View
            wv.resetMenu();                     //重置菜单按钮
            break; */
        case 2:                                 //退出游戏
            wv.stopSound(1);                        //停止声音的播放
            wv.soundPool.release();                 //释放WelcomeView的SoundPool对象
            android.os.Process.killProcess(android.os.Process.myPid());
        System.exit(0);                         //退出程序
            break;
        case 3:                                 //显示欢迎界面
            setContentView(wv);                     //设置当前屏幕为WelcomeView对象
            CurrentView = wv;                       //记录当前View
            if(wantSound){                          //如有需要，播放声音
                wv.playSound(1, -1);
            }
            pv = null;                              //将pv指向的ProgressView声明为垃圾
            break;
        }
    }
};
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //设置全屏
    getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    BitmapManager.loadSystemPublic(getResources());
    pv = new ProgressView(this, 3);                 //创建一个ProgressView对象，目标为3，即走满后去WelcomeView
    setContentView(pv);
    CurrentView = pv;
    new Thread(){
        public void run(){
            Looper.prepare();
            BitmapManager.loadWelcomePublic(getResources());    //加载欢迎界面的图片资源
            updateProgress(60);
            wv = new WelcomeView(TestHelloAndroidActivity.this);//初始化WelcomeView
            updateProgress(100);
        }
    }.start();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if(event.getAction() == MotionEvent.ACTION_UP){
        int x = (int)event.getX();          //获取屏幕点击处的X坐标
        int y = (int)event.getY();          //获取屏幕点击处的Y坐标
        if(CurrentView == wv){              //如果当前View为WelcomeView
            return wv.myTouchEvent(x, y);   //调用WelcomeView的相关事件处理方法
        }
        /*else if(CurrentView == gv){           //如果当前View为GameView
            return gv.myTouchEvent(x, y);   //调用GameView的相关事件处理方法
        } */
    }
    return true;
}

//方法：更新进度条 <br/>
public void updateProgress(int progress){
    if(pv != null){
        pv.setProgress(progress);
    }
}
} 
```

**2.欢迎查看：**

```
package com.example.helloandroid;
import java.util.HashMap;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.Typeface;
import android.media.AudioManager;
import android.media.SoundPool;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class WelcomeView extends SurfaceView implements SurfaceHolder.Callback {
TestHelloAndroidActivity father;
WelcomeDrawThread wdt;
int status = -1; //记录当前状态,0：背景渐显，1：美女移入，2：显示菜单，3：待命，4：有按钮点下
int selectedIndex=-1;//选择的菜单选项，如0为开始游戏/1为帮助/2退出
int mm_x = 129; //mm图片宽度
int mm_y = 289; //mm图片高度
int mmX; //终点X坐标0
int mmY; //终点Y左边191
int btnIndex = 0; //按钮帧索引
int btnSpan = 10; //按钮间隔
int btnHight = 25; //按钮高度
int alpha = 0;
Rect rectMenuStart = new Rect(105,334,317,359);//开始按钮矩形框
Rect rectMenuHelp = new Rect(105,369,317,394);//帮助按钮矩形框
Rect rectMenuQuit = new Rect(105,404,317,429);//退出按钮矩形框
Rect rectSoundMenu = new Rect(140,440,172,472);//声音按钮
SoundPool soundPool;        //SoundPool对象引用
HashMap<Integer,Integer> SoundMap;  //存放声音资源的Map

public WelcomeView(TestHelloAndroidActivity father) {
    super(father);
    this.father = father;
    getHolder().addCallback(this);
    wdt = new WelcomeDrawThread(this, getHolder());
}

public void doDraw(Canvas canvas){
    Paint paint = new Paint();  //创建画笔
    paint.setAlpha(alpha);      
    BitmapManager.drawWelcomePublic(0, canvas, 0, 0,paint);//画背景

    switch(status){
    case 1://状态：美女渐入
        BitmapManager.drawWelcomePublic(1, canvas, mmX, mmY, paint);

    case 4://状态：有按钮点下
    case 3://状态：待命状态，等待按钮按下
        BitmapManager.drawWelcomePublic((father.wantSound?6:5), canvas, 140, 440, paint);//画声音菜单，5表示开启那帧，6表示关闭那帧

    case 2://状态：显示菜单按钮, 光画框还没写字呢09.09
        paint.setAlpha(alpha);      //设置画笔透明度
        for(int i=0; i<3; i++){
        BitmapManager.drawWelcomePublic((i==selectedIndex?btnIndex+2:2), canvas, rectMenuStart.left, rectMenuStart.top+i*(btnHight + btnSpan), paint);
        }
        break;
    }   
}

//方法：初始化声音
    public void initSound(TestHelloAndroidActivity father){

        soundPool = new SoundPool(1,AudioManager.STREAM_MUSIC,100);
        int id = soundPool.load(father, R.raw.welcom_background, 1);
        SoundMap.put(1, id);    //加载背景音乐
    }
    //方法：播放声音
    public void playSound(int sound,int loop){
        AudioManager am = (AudioManager)getContext().getSystemService(Context.AUDIO_SERVICE);
        float streamVolumeCurrent = am.getStreamVolume(AudioManager.STREAM_MUSIC);   
        float streamVolumeMax = am.getStreamMaxVolume(AudioManager.STREAM_MUSIC);       
        float volume = streamVolumeCurrent / streamVolumeMax;           
        soundPool.play(SoundMap.get(sound), volume, volume, 1, loop, 1);
    }
    //方法：停止声音
    public void stopSound(int sound){
        soundPool.stop(SoundMap.get(sound));
    }       

    //方法：处理用户点击屏幕事件
    public boolean myTouchEvent(int x,int y){
        if(rectMenuStart.contains(x, y)){//点下开始按钮
            selectedIndex = 0;//设置按下的索引
            status = 4;//设置状态为4，即按下列按钮
        }
        else if(rectMenuHelp.contains(x, y)){//点下帮助按钮
            selectedIndex = 1;//设置按下的索引
            status = 4;//设置状态为4，即按下列按钮
        }
        else if(rectMenuQuit.contains(x, y)){//点下退出按钮
            selectedIndex = 2;//设置按下的索引
            status = 4;//设置状态为4，即按下列按钮
        }
        else if(rectSoundMenu.contains(x, y)){//点下了声音菜单按钮               
            if(father.wantSound){//按下之前是有声音的
                stopSound(1);//停止声音的播放
            }
            else{//按下之前没声音
                playSound(1, -1);
            }
            father.wantSound = !father.wantSound;//置反
        }

        return true;    
    }

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:23:40.510

您没有`initSound`从活动中调用 WelcomeView，因此在执行时`soundPool`仍然如此。`null``playSound`

# c# - 如何在一个 .c/.cgi 文件中打印 2 个 HTML 页面？

> ID：12337159
> 
> 赞同：0
> 
> 时间：2012-09-09T07:02:48.987
> 
> 标签：c#, cgi

我需要打印一个要求输入密码的 HTML 文件，以及另一个解析密码的 HTML 文件。我需要在一个 c 文件中完成。

我如何链接它？我怎样才能让程序知道它需要从第一个 HTML 页面解析数据，并同时打印它？

我没有使用 Perl、Python 或其他任何东西。只是简单的 c# 和 CGI​​。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:06:57.710

只需测试密码是否已发送：如果是，请执行密码解析页面的工作。如果没有，请显示您的第一个登录页面。

# jquery-mobile - Jquery Mobile 自动图像 Corousel

> ID：12337165
> 
> 赞同：0
> 
> 时间：2012-09-09T07:03:41.360
> 
> 标签：jquery-mobile

我在 jQuery Mobile 中使用移动网站。

我的主页需要使用自动图像轮播。我使用过`tiny carousel`，但它包含 css 参数的静态值，因此不能为 mobile 提供良好的结果`view.Kindly`。

你能推荐一个有用的吗？

# asp.net-mvc-3 - ASP.Net MVC3 中的验证

> ID：12337168
> 
> 赞同：0
> 
> 时间：2012-09-09T07:04:39.003
> 
> 标签：asp.net-mvc-3

在 MVC 3 中，它具有 DataAnnotations 以及用于在客户端进行验证的自定义验证。但我可以使用 Jquery 或 Javascript 将自己的验证写入 .js 文件。我的意思是我使用脚本标签和 type=text/javascript。那么我应该使用哪一个，MVC3 中的那个还是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:16:24.930

MVC 的数据注释在客户端使用 jquery 验证。关键是您使用一种方法进行验证，并且它适用于服务器和客户端。

您永远不想只进行客户端验证，因为恶意攻击者可以绕过您的 javascript 并发送非法值。客户端验证对用户来说是一件好事，但不应该在没有服务器端验证的情况下使用。

MVC 对数据注释都进行了处理，您只需在一个地方处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T15:41:47.937

正如 Mystere Man 所指出的，只需使用 MVC 的数据注释，因为它同时进行客户端和服务器端验证。

您的问题有点模糊，但根据您对 Mystere Man 的评论，我想您想知道如何自己更改验证消息？`@Html.ValidationSummary()`如果是这样，您可以使用类似的消息超载

```
@Html.ValidationSummary(false, "My error message") 
```

在您的模型上，您可以使用如下属性为每个模型创建自定义消息：

```
[Required(ErrorMessage = "Please enter your name, this will not be displayed to others.")]
public string Name { get; set; } 
```

您还可以创建自定义验证，例如必须选中复选框（因为该`[Required]`属性并不意味着`bool`必须是`true`。）要做到这一点以及更多，需要更多的工作，但在默认验证中非常可行。

# django - django：tinymce 和 unicode

> ID：12337188
> 
> 赞同：1
> 
> 时间：2012-09-09T07:08:57.783
> 
> 标签：django, unicode, django-tinymce

我正在使用 django-tinymce v1.5.1b2。

我也在使用这样的 HTMLField() 模型字段：

```
class Page(models.Model):
    title = models.CharField(max_length=512)
    slug = models.SlugField(max_length=512, default='', blank=True)
    content = tinymce_models.HTMLField(blank=True) 
```

一切正常。

但是我注意到，当我保存页面时，我在 MySQL 数据库的内容字段中得到了这个

`<p>&Alpha;&pi;ό &tau;&alpha; &chi;&rho;ό&nu;&iota;&alpha; &tau;&omicron;&upsilon; &Iota;&pi;&pi;&omicron;&kappa;&rho;ά&tau;&eta;...`

这是为什么？我知道 MySQL 支持 utf 数据。我可以更改 tinymce 的行为以存储普通的 utf 字符而不是 html 代码吗？

这对我来说很重要，因为我打算创建一个新标签来解析内容以查找某些单词并在向用户显示之前添加一些额外的 HTML。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T11:30:06.563

我找到了解决方案。我把它贴在这里给任何有同样问题的人，看看。

我刚刚在我的`TINYMCE_DEFAULT_CONFIG`字典中添加了这一行`setting.py`

```
TINYMCE_DEFAULT_CONFIG = {
            'entity_encoding': 'raw', 
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:05:26.393

我认为您可以使用{{“您将在 html 中使用 tiny_mce 显示的值”|safe}}，然后我认为问题会解决您还可以在这里看到： [为什么 Django 管理员中的 TinyMCE 输出 HTML 标记？](https://stackoverflow.com/questions/2889080/why-does-tinymce-in-django-admin-output-html-tags)

# javascript - 使用同一对象中的其他变量声明变量

> ID：12337190
> 
> 赞同：0
> 
> 时间：2012-09-09T07:08:58.317
> 
> 标签：javascript, variables

我想知道如何通过访问同一对象中的变量值来声明新变量。我试过`this.x`了`object.x`。都说`cannot read property of undefined`。

例如

```
var board = {
    width: 188, 
    height: 110, 
    left: (320 - board.width)/2,
    top: (480 - this.height)/8, 
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:15:00.937

您不能这样做，因为`board`在构造对象并执行分配之前未定义。（此外，`this`没有在函数之外定义。）您必须使用多个语句。

```
var board = { width : 188, height : 110 };
board.left = (320 - board.width) / 2;
board.top = (480 - board.height) / 8; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:32:20.307

替代方案：您可以考虑使用[立即调用的函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)：

```
var board = (function(){
    var width = 188 
       ,height = 110;
     return {
          width: width
         ,height: height
         ,left: (320 - width)/2
         ,top: (480 - height)/8
     };
   })(); 
```

# mysql - MYSQL考勤总结

> ID：12337192
> 
> 赞同：1
> 
> 时间：2012-09-09T07:09:45.630
> 
> 标签：mysql

嗨，我的系统上有以下时间卡结构。

![在此处输入图像描述](../Images/ec28c17197f29d7f6612047ed0103c9b.png)

从上面的时间卡中，我需要生成一个比较`start`来自`time_in`AND`end`的报告并将`time_out`其分组`emp_id`。

![在此处输入图像描述](../Images/5fbd5098dc1c9c1c262016cad1d4ed8b.png)

关于如何像上面那样显示它的任何提示都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:00:12.727

以下查询完成了这项工作。

```
SELECT date, emp_id, 
    MAX(IF(event='t_in',time_in - start, 0)) AS 't1_in_diff',
    MAX(IF(event='t_out',time_out - end, 0)) AS 't1_out_diff',
    MAX(IF(event='b1_in',time_in - start, 0)) AS 'b1_in_diff',
    MAX(IF(event='b1_out',time_out - end, 0)) AS 'b1_out_diff',
FROM timecard 
GROUP BY date, emp_id; 
```

如果结果可能为负（time_in/time_out 可能小于 start/end），则应将 0 设置为始终小于差值的值。

# php - 正则表达式帮助匹配字符串

> ID：12337194
> 
> 赞同：1
> 
> 时间：2012-09-09T07:10:49.450
> 
> 标签：php, regex, string

寻找一些正则表达式帮助使用`PHP`. 以下是什么`regex`：

```
EXACTLY {{file: THEN 24 characters from a-zA-Z0-9 THEN EXACTLY }} 
```

例子：

```
{{file:504c2ee3ff558cb40700000b}} 
```

寻找匹配该模式。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:16:05.843

尝试：

```
preg_match_all('/\{\{file:[a-zA-Z\d]{24}\}\}/', $str, $matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:28:56.580

试试这个，

```
preg_match_all('((\{{2})file:([a-z0-9]){24}(\}{2})/i', $str, $matches); 
```

# php - 如何在 MySQL 中将 DATE 和 TIME 与 DATETIME 分开

> ID：12337195
> 
> 赞同：96
> 
> 时间：2012-09-09T07:10:51.120
> 
> 标签：php, mysql, sql, datetime

我将 **DATETIME**字段存储在表中。每个值看起来像这样： **2012-09-09 06:57:12**。

我正在使用这种语法：

```
 date("Y-m-d H:i:s"); 
```

现在我的问题是，在获取数据时，如何使用单个 MySQL 查询**分别获取日期和时间？**

日期如**2012-09-09**和时间如**06:57:12**。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-09-09T07:14:31.087

您可以使用**[DATE_FORMAT()](http://davidwalsh.name/format-date-mysql-date_format)**来实现（*单击链接以获取更多其他格式*）

```
SELECT DATE_FORMAT(colName, '%Y-%m-%d') DATEONLY, 
       DATE_FORMAT(colName,'%H:%i:%s') TIMEONLY 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/1842)

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-09-09T07:18:11.867

根据 mysql 文档，DATE() 函数将提取日期时间字段的日期部分，而 TIME() 将提取时间部分。所以我会尝试：

```
select DATE(dateTimeField) as Date, TIME(dateTimeField) as Time, col2, col3, FROM Table1 ... 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-09T07:15:28.197

尝试：

```
SELECT DATE(`date_time_field`) AS date_part, TIME(`date_time_field`) AS time_part FROM `your_table` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T08:34:21.837

简单地说，
SELECT TIME(column_name), DATE(column_name)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-11-02T22:33:40.873

一个简单的方法是：

日期：

```
SELECT DATE(column_name) as mydate 
```

对于时间：

```
SELECT DATE(column_name) as mytime 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-12-06T06:42:29.437

仅供日期使用
`date("Y-m-d");`

并且仅供时间使用
`date("H:i:s");`

# google-maps - JQuery Mobile 中的谷歌地图尺寸

> ID：12337197
> 
> 赞同：0
> 
> 时间：2012-09-09T07:11:54.917
> 
> 标签：google-maps, html, jquery-mobile, google-maps-api-3

我在我的 JQuery 移动应用程序中使用 Google 地图，但是正如您在下面的屏幕截图中看到的那样，地图正在显示，但它的一部分不在屏幕上（在右侧），但在左侧没问题。

我怎样才能像左边一样显示右边的部分？并且有一个适用于所有手机的边距，所以我不想要固定值。

这也发生在网络浏览器中，不仅是移动设备。

使用的代码：

```
<!-- Home Page -->
<div id="home" data-role="page" data-fullscreen="true">
    <div data-role="content">
        <div id="map_canvas" style="height:97%; width: 97%; position: absolute"></div> 
```

![手机屏幕](../Images/f3ea292310bf10a26eef377c45724ebf.png)

# iphone - 如何同时设置 UITableView contentinset 和插入行？

> ID：12337207
> 
> 赞同：3
> 
> 时间：2012-09-09T07:13:30.297
> 
> 标签：iphone, ios, uitableview, uianimation

我正在尝试在 -44.0 偏移量（隐藏）处向我的 tableview 顶部添加一行，并且在屏幕上看不到任何动画。为此，我打电话给

```
[self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]] withRowAnimation:UITableViewRowAnimationNone]; 
```

和

```
UIEdgeInsets ins = self.tableView.contentInset;
    self.tableView.contentInset = UIEdgeInsetsMake(-44.0, ins.left, ins.bottom, ins.right); 
```

问题在于，由于设置了偏移量，这会使表格视图向上移动，然后由于添加行而动画回落。

我希望我现有的 tableview 看起来像它没有移动，并且只需在顶部（隐藏）添加新行，而没有人看到任何东西。

有人知道我如何在后台将行添加到顶部吗？

谢谢！

# php - 在 PHP 中移动整个目录树的最佳方法

> ID：12337208
> 
> 赞同：1
> 
> 时间：2012-09-09T07:13:38.837
> 
> 标签：php, copy, directory, file-rename

我想将文件从一个目录移动到另一个目录。但是，诀窍是，我想移动带有完整路径的文件。

说我有文件

```
/my/current/directory/file.jpg 
```

我想把它移到

```
/newfolder/my/current/directory/file.jpg 
```

如您所见，我想保留相对路径，以便将来`/my/current/directory/`如果需要，我可以将其移回。还有一件事是`/newfolder`空的-我可以复制其中的任何内容，因此没有预制结构（可以将另一个文件复制到`/newfolder/my/another/folder/anotherfile.gif`. 理想情况下，我希望能够创建一个方法，当我通过原始文件的路径。目的地总是相同的 -`/newfolder/...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:23:56.977

你可以简单地使用以下

```
<?php 
$output = `mv "/my/current/directory/file.jpg" "/newfolder/my/current/directory/file.jpg"`; 
if ($output == 0) { 
   echo "success"; 
} else { 
   echo "fail"; 
} 
?> 
```

请注意我使用反引号`来执行而不是使用像 exec 这样的函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:41:16.883

如果你在 unix/linux 环境中，你可以尝试这样的事情：

```
$original_file = '/my/current/directory/file.jpg';
$new_file = "/newfolder{$original_file}";

// create new diretory stricture (note the "-p" option of mkdir)
$new_dir = dirname($new_file);
if (!is_dir($new_dir)) {
    $command = 'mkdir -p ' . escapeshellarg($new_dir);
    exec($command);
}

echo rename($original_file, $new_file) ? 'success' : 'failed'; 
```

# spring - 在spring mvc中拦截@responsebody

> ID：12337210
> 
> 赞同：0
> 
> 时间：2012-09-09T07:14:17.963
> 
> 标签：spring, model-view-controller, spring-mvc, aop

我有一个带有控制器的 Spring MVC Web 应用程序，如下所示：

```
@Controller
public class ActionRestController {
@RequestMapping(value = "/list", method = GET)
@ResponseBody
public List<Action> list(Action action, SearhCriteria searchCriteria) {
     List<Action> ret = new ArrayList<Action>();
     // Call a service method to get the records
     // Copy the records into the list
     // return the list of objects
     return ret;
} 
```

当用户进行搜索时调用控制器。应用程序中有几个这样的控制器，每个可搜索实体一个。由于我无法很好解释的原因，在这里，我无论如何都无法修改这些控制器。

但是现在，我在 UI 中要求显示搜索条件和编号。记录和寻呼细节，以及。控制器不返回此信息。控制器返回的 JSON 仅包含记录列表。

我已经建立了一个不同的控制器来处理请求，获取并将额外的信息放入模型中，并将请求转发到现有的控制器，如下所示：

```
@Controller
public class ActionExtendedController {
@RequestMapping(value = "/searchlist", method = GET)
@ResponseBody
public List<Action> list(Action action, SearhCriteria searchCriteria, Model model) {
     model.addAttribute("searchParameters", searchCriteria);
     return "forward:/list";
} 
```

到目前为止，一切都很好。我想要做的是在从控制器返回列表的点处拦截请求，然后将其转换为 JSON，并返回包含列表和搜索参数的映射。

现在，由于“不可变”控制器用户 ResponseBody 控制转到 JacksonMessageConverter 并且响应从那里发出。我已经尝试了以下路径，但它们不起作用。

*   拦截器——当我到达这里的时候，响应已经写出来了，所以没有办法改变它。

*   JasksonMessageConverter 的自定义 ObjectMapper - 不起作用，因为我无权访问映射器内的模型对象，我只能访问控制器返回的列表。

*   Aspect @After 控制器切入点 - 我认为这种技术会起作用，但我无法让它发挥作用。该建议没有触发，我确信我在配置中遗漏了一些东西。

有没有办法让 Spring AOP 在带注释的控制器、处理程序方法上触发，或者任何人都可以建议另一种拦截处理程序返回值的方法（连同模型）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:51:38.550

为什么不将返回类型更改为 Map？像：

```
@Controller
public class ActionRestController {
@RequestMapping(value = "/list", method = GET)
@ResponseBody
public Map<String, Object> list(Action action, SearhCriteria searchCriteria) {  
    Map<String, Object> map = new HashMap<String, Object>();     
    List<Action> ret = new ArrayList<Action>();
     // Call a service method to get the records
     // Copy the records into the list
     // return the list of objects
    map.put("searchResult",ret);
    map.put("searchCriteria", searchCriteria);
    return map;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T14:18:14.893

在扩展控制器中对基本控制器进行简单委托怎么样：

```
@Controller
public class ActionExtendedController {
    @Autowired ActionRestController baseRestController;
    @Autowired MappingJacksonJsonView mappingJacksonJsonView;

    @RequestMapping(value = "/searchlist", method = GET)
    public View list(Action action, SearhCriteria searchCriteria, Model model) {
        List<Action> actions = baseRestController.list(action, searchCriteria, model);
        model.addAttribute("actions", actions);
        model.addAttribute("searchParameters", searchCriteria);
        return mappingJacksonJsonView;
    } 
```

这样，您将委派给原始控制器，但将这个新控制器用于视图。只需将 a 注册`mappingJacksonJsonView`为 bean，它会将所有模型对象（搜索条件和操作）序列化到 json 视图中。您甚至不需要返回视图，但也可以使用 @ResponseBody，其类型可以保存响应和搜索条件。

# c++ - POCO 库：可以设置 UDP 源端口吗？

> ID：12337218
> 
> 赞同：1
> 
> 时间：2012-09-09T07:15:32.050
> 
> 标签：c++, udp, poco-libraries

我正在使用 POCO c++ 库，我很茫然。发送UDP数据报时有什么方法可以设置源端口吗？看起来它总是设置为目标端口，但这肯定是可能的。

我的代码看起来像这样：

```
Poco::Net::SocketAddress bcast("255.255.255.255", m_txPort);
DatagramSocket dgs  = DatagramSocket(bcast,false);
dgs.setBroadcast(true);
dgs.sendTo(data,dataLength, broad); 
```

如果做不到这一点，我可能会改用 Boost - 我认为 boost 可以做到这一点，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:26:45.910

应该可以正常工作；您将带有源地址和端口的 SocketAddress 传递给`DatagramSocket`构造函数，该构造函数说明要绑定到哪个本地地址；以你为榜样；

```
Poco::Net::SocketAddress sourceAddress("255.255.255.255", source_port);
DatagramSocket dgs(source_address,false); 
```

然后将带有目标地址和端口的单独套接字地址传递到`SendTo`.

```
Poco::Net::SocketAddress destAddress(destination_address, destination_port);
dgs.setBroadcast(true);
dgs.sendTo(data,dataLength, destAddress); 
```

# jquery - 加载主题标签 url 内容

> ID：12337221
> 
> 赞同：0
> 
> 时间：2012-09-09T07:16:42.690
> 
> 标签：jquery, hashtag

这是我的[JSFiddle](http://jsfiddle.net/sureshmonster/UkSCq/)。昨天我发布了如何[创建主题标签 url](https://stackoverflow.com/questions/12331132/create-hashtag-url-using-jquery)的问题。我得到了答案，但如果我刷新，它会从初始开始。

例如：如果我在#content 2 上刷新，它会显示#content 1。我不希望这样。我想我应该在加载事件中使用。但不知道如何在这里实现。有什么解决方案吗？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:18:14.620

如果您希望跨页面记住您的选择，您需要将选择存储在会话/服务器上的某处。重新加载页面从头开始你的脚本，如果你想预先选择一些你需要从会话中取回数据的东西

另一种选择是使用 javascript 将选择写入 cookie，并读取该 cookie 以设置初始选择

[您可以在此处了解如何使用 cookie](http://www.w3schools.com/js/js_cookies.asp)。该示例使用 cookie 来存储用户名，但您可以使用它来存储变量“content_selection”。然后，当您的页面被加载时，读取 cookie 值并使用它来选择正确的初始内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T12:52:25.900

我已经在[Create hashtag url using jquery](https://stackoverflow.com/questions/12331132/create-hashtag-url-using-jquery)中回答了这个问题。只是在这里分享这个，因为链接的线程最初只是关于使用哈希标签（实际上是片段标识符）更新 URL，但是关于在重新加载后保留内容的相同问题最终由该线程中的 OP 提出。

对于那些不想多点击的人来说，代码非常简单。只需在之后添加以下内容`function setActive(i) { // codes }`：

```
 var url = window.location.hash; // retrieve current hash value
        if(url.indexOf('Content') != -1){ // do the following if URL's hash contains "Content"
            // remove "#" symbol from retrieved hash value
            var currentHash = window.location.hash.substring(1).split("#");
            // remove "-" symbol from retrieved hash value
            var contentTitle = currentHash.toString().replace(/-/g, ' ');
            // store hash value in "actualContent" variable
            var actualContent = "This is " + contentTitle;
            // remove "selected" for every instance of "myclass" to hide content first
            $(".myclass").removeClass("selected");
            // find div that contains retrieved hash value's text stored in "actualContent" variable and add "selected" class to that div to display the correct content
            $("div:contains('" + actualContent + "')").addClass("selected");
        } 
```

# python - 使用正则表达式比较元组？Python

> ID：12337225
> 
> 赞同：0
> 
> 时间：2012-09-09T07:17:08.480
> 
> 标签：python, dictionary, tuples

我有一本字典，其中的键是 n 个元素的元组。假设我只想找到 n-1 个元素匹配的元组，而另一个可以是任何值。例如，我希望前 6 个元素设置为 100，第 7 个元素可以是任何值，并且我将这些元组作为键：

```
 1\. (100,100,100,100,100,45,54)
 2\. (100,100,100,100,100,100,54)
 3\. (100,100,100,100,100,100,54)
 4\. (100,100,100,100,100,100,54)
 5\. (100,100,100,100,100,23,54) 
```

然后我只需要键 2-4，因为第一个和第五个在第 6 个元素中的值不同于 100。当然，我可以在遍历所有键时单独比较每个元素，但我想也许有更好的方法。关于如何在 Python 中做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:37:46.197

你可以做一个列表理解：

```
matched = [x for x in tuples if x[:6] == (100,100,100,100,100,100)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:42:49.367

像这样的东西应该工作：

```
matched = [x for x in dict.keys if len(set(x[:6])) == 1] 
```

# oracle10g - oracle SQL中的序列如何工作？

> ID：12337229
> 
> 赞同：1
> 
> 时间：2012-09-09T07:18:03.247
> 
> 标签：oracle10g, oracle11g

假设我必须制作 5 个需要数字作为主键的表。我可以对所有这些表使用相同的序列还是必须为每个表创建一个新序列？是否有一个语句 - 找出所有现有的序列，以便我们可以选择一个？- 显示特定用户/特定模式的所有序列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:27:31.777

您可以对所有序列使用一个序列，但如果您必须插入许多行，那么这将是一个瓶颈。每次插入一行时，其他插入都必须等待。我更喜欢为每个表使用一个序列。由于序列是数据库对象，您可以从目录中查询它们。

# c# - 两个线程在 c# 中没有正确使用相同的函数

> ID：12337232
> 
> 赞同：-2
> 
> 时间：2012-09-09T07:18:11.410
> 
> 标签：c#, multithreading

我的线程有问题，这是一个代码：

```
class myThread
{
    public int _start, _finish;
    string[] new_array = new string[10];
    public static string[] existed_array = new string[20];    
    public myThread(string name, int start, int finish)
    {
        _start = start;
        _finish = finish;
        Thread thread = new Thread(this.Get);
        thread.Name = name;
        thread.Start();//передача параметра в поток
     }

    void Get()
    {
        for (int ii = _start; ii < _finish; ii++)
        {
           // i put data in existed array in Main()
           // new array is just an array where i want to put existed data
           new_array[ii] = existed_array[ii];
           // but in output new_array[0]=null; new_array[1]=value
        }
    }
}

void Main ()
{
    // For example
    myThread.existed_array = {1, 2 , 3, ...}

    myThread t1 = new myThread("Thread 1", 0, 1);
    myThread t2 = new myThread("Thread 2", 1, 2);
} 
```

线程使用不同的参数运行 Get()，但在输出中只有第二个线程的参数。正如我从逐步程序中看到的那样，Get 函数中的每一行都运行了 2 次，所以这就是重点，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:59:49.747

如果我理解正确，您的代码将按预期运行。

在您的评论中，您声称“但在输出中 new_array[0]=null; new_array[0]=value”。我对此的解释是，在您的第二个线程中`new_array[0] = null`，以及在您的第一个线程中，`new_array[0] = <some value>`。

根据您的代码，`new_array`它是一个非静态变量，这意味着它不跨线程共享。

考虑到您提供给第二个线程的参数，它永远不会触及数组中的第 0 个。您已将起始值设置为 1，因此`ii`从 1 开始。这意味着您从未设置`new_array[0]`任何内容，因此默认为`null`.

# ssh - 通过 X11 远程运行 Octave 并在本地显示

> ID：12337234
> 
> 赞同：1
> 
> 时间：2012-09-09T07:18:20.260
> 
> 标签：ssh, x11, octave

我目前正在通过 octave 实现一些机器学习算法并在远程服务器中运行。一旦我输入了一些绘图命令，例如 hist() ，它就会显示

```
warning: X11 DISPLAY environment variable not set 
```

是否可以将环境设置为本地 X11 服务。怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:32:52.223

通过 ssh 连接远程服务器并添加选项 -X

```
ssh -X remote_server 
```

然后 ssh 将启用 X11 转发。

# c# - HttpWebRequest POST 登录错误 405

> ID：12337237
> 
> 赞同：0
> 
> 时间：2012-09-09T07:18:43.670
> 
> 标签：c#, stream, httpwebrequest, seek

我正在尝试制作一个小型登录系统，但我遇到了这个问题，当项目在 VS2010 上运行时它说：

```
The remote server returned an error: (405) Method Not Allowed. 
```

这是我的代码：

```
 //Our URL
        string uri = "https://************************/ValidateUsername";
        //Our postvars
        byte[] buffer = Encoding.ASCII.GetBytes( "username=user" );

        //Initialization
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.Accept = "application/json;odata=verbose";
        request.Headers.Add("Language", "es-MX");
        request.Headers.Add("Application", "-------------------");
        request.Headers.Add("Version", "1.0");

        //Our method is POST, otherway buffer would be useless
        request.Method = "POST";

        //We use form contentType, for the postvars
        request.ContentType = "application/x-www-form-urlencoded";

        //The lenght of the content its set by postvars (buffer) lenght
        request.ContentLength = buffer.Length;

        //We open a stream for writing the postvars
        Stream PostData = request.GetRequestStream();
        //Now we write, and afterwards, we close.
        PostData.Write(buffer, 0, buffer.Length); 
```

当我将指针悬停在“PostData”上，然后转到长度和位置属性时，我可以阅读：

```
Length = 'PostData.Length' threw an exception of type 'System.NotSupportedException'
base {System.SystemException} = {"This stream does not support seek operations."} 
```

我不确定这是否是真正的问题，但我试图提供尽可能多的信息。

```
 PostData.Close();

        //Get the response Handle
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        //lets show info about the response
        Console.WriteLine("Estatus de la respuesta:" + response.StatusCode);
        Console.WriteLine("Servidor : " + response.Server);

        //Now we read the response (the string), and output it
        //Stream answer = response.GetResponseStream();
        //StreamReader _answer = new StreamReader(answer);
        //Console.WriteLine("Respuesta: " + _answer.ReadToEnd()); 
```

在某个论坛上，我读到“_answer.ReadToEnd()”可能是问题所在，但即使我评论过，问题仍然存在。

我这样做是为了稍后我可以在 windows phone 上尝试，不知道我是否在浪费我的时间，因为它们不相关。

我希望有人能帮帮忙。提前致谢。

# linux - 如何更改 Unix/Linux 中“df”命令的默认值？

> ID：12337241
> 
> 赞同：0
> 
> 时间：2012-09-09T07:20:22.860
> 
> 标签：linux, unix

我在另一个人拥有的特定目录下的 Unix/Linux 终端中。在终端中，我正在尝试更改“df”命令的默认值。当我输入“df”命令时，我会看到 KILOBYTES 中列出的磁盘可用空间量。我想更改默认值，这样当我单独输入“df”时，我会看到 MEGABYTES 中的磁盘可用空间。我已经知道当我输入“df -m”或“df -h”时，我会在 MEGABYTES 中看到它，但我只想输入“df”，这样我就可以看到 MEGABYTES 中的值。如果我可以逐步了解如何将“df”命令的默认值更改为 MEGABYTES 任何关于我可以做什么的屏幕截图，我会喜欢的。有人告诉我命令行标志也会影响这个命令的工作方式，所以我也想澄清一下。我确实需要一步一步地处理这一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:21:44.103

在初始化脚本的某处添加别名：

```
alias df='df -m' 
```

因此，`~/.bash_profile`如果`~/.bashrc`您使用`bash`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T07:23:08.587

在 bash.rc 文件中创建一个别名，例如：

```
alias df='df -m' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T10:48:59.940

如果是 coreutils，另一种方法是在or`df`中导出所需的大小：`DF_BLOCK_SIZE``BLOCKSIZE`

```
export DF_BLOCK_SIZE=1048576
df 
```

# c# - 如何删除“<”和“>”之间的所有字符，包括“<”和“>”？

> ID：12337243
> 
> 赞同：0
> 
> 时间：2012-09-09T07:20:52.160
> 
> 标签：c#, .net, string

我有字符串：

```
window.google.ac.h(["hãy nghe lời ô",[["hãy nghe lời <b><i>cô<\/i><\/b>",30,[10,40]]],{"j":"13","o":"hãy nghe lời <sc>cô<\/sc>","p":"hãy nghe lời <se>ô<\/se>","q":"a3-RB5VEFG4py23rfvkQ1MtM5Vk"}]) 
```

但我想要字符串：

```
window.google.ac.h(["hãy nghe lời ô",[["hãy nghe lời cô",30,[10,40]]],{"j":"13","o":"hãy nghe lời cô","p":"hãy nghe lời ô","q":"a3-RB5VEFG4py23rfvkQ1MtM5Vk"}]) 
```

所有像`<b>`, 的子字符串`<\/b>`都应该被删除。

有什么办法可以通过 C# 做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T07:27:12.260

您可以使用正则表达式来删除标签：

```
result = Regex.Replace(source, "<.*?>", string.Empty); 
```

# ruby-on-rails-3 - Rails 3：表单提交失败后使用命名锚点/片段渲染动作

> ID：12337244
> 
> 赞同：3
> 
> 时间：2012-09-09T07:21:05.307
> 
> 标签：ruby-on-rails-3

我的一个模型的编辑视图包含选项卡，这些选项卡利用 url 中的锚点在 model/1/edit#tab1 和 model/1/edit#tab2 等设置之间切换。提交编辑表单但由于错误而无法保存后，有没有办法重定向到这些锚点？我当前的代码如下：

```
 def update
    @user = Product.new(params[:user])
    if @user.save
      flash[:success] = "Your user has been created"
      redirect_to @user
    else
      render 'edit' //want to render here with an anchor
    end
  end 
```

我想在提交表单之前存储包含锚点的 url，然后在呈现错误消息时使用相同的锚点重新呈现表单。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:23:21.937

最好的方法是使用[jquery cookie](https://github.com/carhartl/jquery-cookie)保存最后打开的选项卡，然后使用保存的 cookie 设置默认选项卡。

# c++ - 如何从 C++ 中的头文件实现 ::find() 和 ::count()？

> ID：12337246
> 
> 赞同：-2
> 
> 时间：2012-09-09T07:21:17.917
> 
> 标签：c++, count, find

我正在尝试从头文件中实现一个堆栈类。我使用 3 个文件——stack.h、stack.cpp 和 main.cpp 编写了它。

为了找到一个元素，我在 stack.cpp 中使用了以下代码。

```
bool stack::find (const string &elem) const
{
    vector<string>::const_iterator it = _stack.begin();
    return ::find(it,_stack.end(),elem))!=_stack.end();
} 
```

但是， find 一直返回 false 。我每次都收到“找不到单词”。你能帮我解决这个问题吗？

这是代码的 pastebin 链接：[PasteBin Link](http://pastebin.com/if37zDYv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:37:47.330

如果您正在进行迭代查找，则堆栈不是您要使用的数据结构。堆栈的要点是您必须弹出元素才能访问它们。如果您在搜索中遍历所有元素，则保留堆栈状态的唯一方法是将所有元素保存在单独的容器中，并在搜索完成后将它们推回堆栈。如果你这样做，为什么不直接使用像 std::vector 这样的随机访问容器呢？

所以你的问题的答案是：不要那样做，我们是一个不同的容器。

# matlab - 使用 MATLAB 将视频的第一帧替换为另一帧

> ID：12337247
> 
> 赞同：1
> 
> 时间：2012-09-09T07:21:29.050
> 
> 标签：matlab

我正在使用 MATLAB 进行视频处理任务。

**当我尝试使用 MATLAB 的mmreader**函数为灰度视频（视频具有 .FLV 扩展名）创建一个对象时，它显示了一条警告，指出它无法确定帧数。

然后，当我尝试使用**read(mmreader)**读取视频时，它显示一个错误，提示没有足够的内存用于 3246 帧。

因此，我只是阅读了视频的第一帧，对其进行了编辑，然后尝试将帧放置在视频第一帧的位置。

**我做过的事情：**

1.  使用MATLAB 的**mmreader**函数读取并提取灰度视频的第一帧（文件具有 .FLV 扩展名） 。

2.  我在框架中嵌入了一些文本。

**我想做并且需要你帮助的事情：**

1.  将源视频的第一帧替换为编辑后的帧（即其中嵌入文本的帧）

2.  保存并播放视频。

# c - malloc(-1) 返回 NULL 但 malloc(0) 不为什么？如何分配 0 内存空间

> ID：12337249
> 
> 赞同：1
> 
> 时间：2012-09-09T07:21:43.797
> 
> 标签：c, memory, null, malloc

> **可能重复：**
> [malloc(0) 有什么意义？](https://stackoverflow.com/questions/2022335/whats-the-point-in-malloc0)
> [malloc(0) 返回什么？](https://stackoverflow.com/questions/2132273/what-does-malloc0-return)

此代码显示“不成功”，但如果将 -1 替换为 0，则它不会为 NULL。我不明白如何分配 0 内存空间。我知道没有用但不是 NULL == 0L 所以它也应该是 == 0 ..

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
int *ptr;
if((ptr = malloc(-1)) == NULL)
    printf("unsuccessful: no memory space was allocated.\n");
else{
    printf("successful: memoryspace was allocated. \n");
    free(ptr);
}
getch();
return 0;

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T07:24:52.043

它是实现定义的：

> 7.22.3-1
> 
> 如果无法分配空间，则返回空指针。如果 **请求的空间大小为零，则行为是实现定义的**：要么返回空指针，要么行为就好像大小是某个非零值，但返回的指针不应用于访问对象.

所以它*可以*返回`NULL`，但不是*必须*的。此外，为了澄清`malloc(-1)`失败的原因，请注意它的原型是：

```
void *malloc(size_t size);
             ^^^^^^ 
```

因此，您正在转换`-1`为**unsigned type**，从而产生非常大的值。

# multithreading - Cromis IPC 同步 - 应用程序停止响应

> ID：12337259
> 
> 赞同：1
> 
> 时间：2012-09-09T07:23:28.737
> 
> 标签：multithreading, delphi, windows-services, ipc, ado

我有一个服务应用程序，它使用's对象连接到 MSSQL，`TADOConnection`并为客户端应用程序提供一些数据。此服务应用程序可能安装在运行 MSSQL 的同一台机器上，并且可能在服务之前启动。因此，我无法连接到 ADO 。我试图在 的情况下连接到 ADO ，但由于它在单独的线程中运行，我得到“尚未调用 CoInitialize”。然后，我尝试将其与我的主线程同步，如下所示：`Cromis.IPC``TIPCServer``MSSQL``OnServiceStart``OnExecuteRequest``TIPCServer`

```
TThread.Synchronize(nil, ConnectDB); 
```

但它没有用。我的应用程序立即停止响应。

接下来，我修改了`OnExecuteRequest`事件以将调用它的线程作为参数传递，我尝试了这个：

```
AThread.Synchronize(AThread, ConnectDB); 
```

但没有变化。当我打开 Use debug DCUs 时，我发现我的应用程序在这一行停止响应：

```
function WaitForSyncWaitObj(P: Pointer; Timeout: Cardinal): Integer;
begin
  Result := WaitForSingleObject(THandle(P), Timeout); // <-- I'm stuck here...
end; 
```

我完全迷路了。有任何想法吗？

* * *

PS：我没有提供我的代码来防止问题混乱。如果您需要它的任何部分，请告诉我。

* * *

PS 2：在此之前，我尝试在我的服务应用程序中使用 Timer 等待一段时间，然后再连接到 MSSQL。似乎 MSSQL 很快就启动了，甚至在加载网络驱动程序之前（我安装了 McAfee VSE 8.7，它替换了网络驱动程序）。我的服务连接到 MSSQL，但是，当加载网络驱动程序时，连接断开。如果有办法告诉Windows（XP及更高版本）在加载网络驱动程序*后*启动服务，我的问题就解决了。任何提示都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:35:28.367

调用`CoInitialize(nil);`你的`TThread`构造函数，并`CoUnitialize`在它的析构函数中。两者都在`ComObj`单元中声明；您可能需要将其添加到`uses`包含线程类的单元中的子句中。

数据库连接是线程特定的（意味着每个线程必须有自己的连接），并且`ADO`需要 COM；这意味着线程必须为自己初始化 COM，并在线程结束时释放它。

# linux - Mono/C# 库 DLL 的环境变量是什么？

> ID：12337262
> 
> 赞同：1
> 
> 时间：2012-09-09T02:57:47.863
> 
> 标签：linux, debian, environment-variables, mono, c#

我正在运行冻结的 Debian 7.0 Testing/Wheezy。

这是我的 C# 示例代码：

```
using System.Windows.Forms;
using System.Drawing;

public class Simple : Form
{
    public Simple()
    {
       Text = "Simple";
       Size = new Size(250, 200);
       CenterToScreen();
    }

    static public void Main()
    {
       Application.Run(new Simple());
    }
} 
```

在使用以下命令编译时，我使用 System.Drawing 和 System.Windows.Forms 引用以及在命令行中获得了在 Monodevelop 中工作的上述 C# WinForms 代码示例：

```
mcs /tmp/Simple.cs -r:/usr/lib/mono/4.0/System.Windows.Forms.dll \
       -r:/usr/lib/mono/4.0/System.Drawing.dll 
```

我试图在`mcs`不需要使用`-r`开关/参数的情况下使命令工作（顺便说一句，我无法通过查看 man mcs 找到有关信息 - 我基本上在某个随机网站上找到了这个开关/参数并且它有效） .

为了检查它是否暂时有效，我发出了

```
export PATH=$PATH:/usr/lib/mono/4.0/System.Windows.Forms.dll:/usr/lib/mono/4.0/System.Drawing.dll 
```

在发出之前`mcs /tmp/Simple.cs`，失败并出现以下输出中的错误：

```
deniz@debian:~$ cd /tmp
deniz@debian:/tmp$ export PATH=$PATH:/usr/lib/mono/4.0/System.Windows.Forms.dll:/usr/lib/mono/4.0/System.Drawing.dll
deniz@debian:/tmp$ mcs Simple.cs 
Simple.cs(1,14): error CS0234: The type or namespace name `Windows' does not exist in the namespace `System'. Are you missing an assembly reference?
Simple.cs(2,14): error CS0234: The type or namespace name `Drawing' does not exist in the namespace `System'. Are you missing an assembly reference?
Compilation failed: 2 error(s), 0 warnings
deniz@debian:/tmp$ 
```

上面的输出告诉我 mcs 编译器/实用程序没有看到 dll 文件，但我不知道还能尝试什么。

对于让 WinForms 和绘图库自动“查看”的任何帮助，我们将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T18:40:28.143

> 我正在尝试使 mcs 命令工作而不需要使用 -r 开关/参数

这是不可能的，除非您告诉 mcs 查找它们（使用 -r:... 完成），否则 mcs 不会查找库。

# c++ - 如何查看此模板代码创建的所有实例化？

> ID：12337263
> 
> 赞同：2
> 
> 时间：2012-09-09T07:24:35.913
> 
> 标签：c++, templates, instance

> **可能重复：**
> [C++ 模板元编程 - 是否可以输出生成的代码？](https://stackoverflow.com/questions/1219007/c-template-metaprogramming-is-it-possible-to-output-the-generated-code)

如何查看在我的 C++ 代码中编译模板后发生的所有实例化？例如，编译此代码后：

```
#include <iostream>
using namespace std;

template <class a_type> class TemplateClass {
    a_type m_one ;
    a_type m_two ;
};

int main (){
    TemplateClass<int> intClass ;
    TemplateClass<char> charClass ;

} 
```

我想查看一个带有类的 C++ 文件：

```
template <int> class TemplateClass {
    int m_one ;
    int m_two ;
}; 
```

和同班`char`。我更喜欢 Eclipse 或 Visual Studio 中的建议。

# iphone - iPhone应用程序使用什么逻辑进行跟踪？

> ID：12337264
> 
> 赞同：0
> 
> 时间：2012-09-09T07:24:38.877
> 
> 标签：iphone, xcode, trace

我花了很多时间寻找可以帮助我为 iPhone 构建追踪字母应用程序的示例或文档。

我正在为 iPhone 开发一个小应用程序，帮助孩子们学习写一些外语字母，该应用程序的目标是显示一个字母并要求孩子们跟踪绘图，每个字母可以包含一个或多个路径， 前任。（“n”有一条路径，而“t”有2条路径）。

# c++ - 范围树构建

> ID：12337266
> 
> 赞同：2
> 
> 时间：2012-09-09T07:24:55.570
> 
> 标签：c++, algorithm, tree, interval-tree

让我们考虑下面的图片 ![在此处输入图像描述](../Images/0bddcdfc4b2531fb4e58a6f6a6ea9d5e.png)

这是一个所谓的范围树。我不明白一件事，它看起来类似于二叉搜索树，所以如果我们要插入元素，我们可以使用与二叉搜索树插入相同的过程。那么区别是什么呢？

我已经阅读了一个教程，并猜测它是 kd 树、查询搜索树（如几何点搜索等）的变体，但是如何构建它呢？像二叉搜索树还是需要额外的参数？也许像这样

```
struct  range
{
int lowerbound;
int upperbound,
int element;

}; 
```

在插入过程中我们必须检查

```
 if(element>lowerbound && element <upperbound) 
then insert node 
```

请帮助我正确理解如何构建范围树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:10:17.557

在二叉搜索树中，当您插入一个值时，您会插入一个新节点。

范围搜索树更类似于[二叉索引树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)。这两种数据结构具有固定的结构。当您向给定范围添加/减去一个点时，您会更新节点中的值，但不会引入新节点。

这种结构的构造与[KD-tree](http://en.wikipedia.org/wiki/K-d_tree)的构造非常相似：根据给定的点，您可以选择最合适的分割点。

当您学习新的数据结构时，请始终考虑支持的操作 - 这将帮助您更快地理解结构。在您的情况下，它会帮助您区分二叉搜索树和范围树。

# c# - 无法将带有 [] 的索引应用于封装数组的“方法组”类型的表达式

> ID：12337268
> 
> 赞同：1
> 
> 时间：2012-09-09T07:25:25.367
> 
> 标签：c#, .net, arrays, compiler-errors

我正在构建这个简单的程序，但我遇到了一些问题。我将一个数组封装到一个类中，并用随机数填充它。当在 Main 我想使用 Console.WriteLine() 评估它时，它会给出一个错误：

> 无法将带有 [] 的索引应用于“方法组”类型的表达式。

我做错什么了？

```
class Program
{
    public static void Main(string[] args)
    {
        Arrays randomArray = new Arrays();

        Console.WriteLine("Please type in an integer!");

        int encryptionKey = Convert.ToInt32(Console.ReadLine());
        randomArray.MyArray.SetValue(encryptionKey, 0);

        int i = 0;
        while (i < 256)
        {
            Console.WriteLine(i + "  " + randomArray.MyArray[i]);
            i++;
        }
        Console.ReadLine();
    }

    public static int[] MakeArray()
    {
        Random rnd = new Random();
        var value = Enumerable.Range(0, 256)
                              .Select(x => new { val = x, order = rnd.Next() })
                              .OrderBy(i => i.order)
                              .Select(x => x.val)
                              .ToArray();
        return value;
    }
}

public class Arrays
{
    private int[] _myArray;

    public int[] MyArray
    {
        get
        {
            return _myArray;
        }
        set 
        {
            _myArray = Program.MakeArray();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:45:54.593

首先，排队

```
randomArray.MyArray.SetValue(encryptionKey, 0); 
```

程序给你一个异常（空引用），因为在这一行中 MyArray 的 get 部分将执行并将空返回给调用者。所以你必须在类 (Arrays) 的构造函数中设置你的数组 (MyArray) 值，我认为这部分的设计是错误的

```
set 
        {
            _myArray = Program.MakeArray();
        } 
```

试试这个

```
public class Arrays
{
    public int[] _myArray;

    public Arrays() {
           MyArray = Program.MakeArray();
    }

    public int[] MyArray
    {
        get; set;
    }
} 
```

这将解决问题

# arrays - 如何根据列中的值在matlab中将行与矩阵分开？

> ID：12337270
> 
> 赞同：-1
> 
> 时间：2012-09-09T07:25:33.760
> 
> 标签：arrays, matlab, matrix

我有一个矩阵，它是从文本文件中读取的二维数组。每行文本文件有 3 个条目。第 3 列的值范围为 1 到 4。我想根据该值分隔行并将它们放入不同的矩阵中。你能建议一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T14:13:11.683

`M`正如您所描述的，对于 Matrix

```
rowsContainingOne   = M( M(:,3)==1, :)
rowsContainingTwo   = M( M(:,3)==2, :)
rowsContainingThree = M( M(:,3)==3, :)
rowsContainingFour  = M( M(:,3)==4, :) 
```

要了解其工作原理，请查看以下部分的结果：

```
M(:,3)              %A vector of column three
M(:,3)==1           %A logical array, `true` where column 3 equals one
M( M(:,3)==1, :)    %All columns (indicated by `:`) from rows where the logical array is `true` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:46:06.083

使用功能`sortrows`。

伪代码：

```
%% Creating a matrix of the type you have mentioned.
A = zeros(10,3);   A(:,1:2) = rand(10,2);    A(:,3)=randi(4,10,1);
%% Use the "sortrows" function to sort all the rows as per the entries in column-3 of A    
B = sortrows(A,3); 
```

# jquery - 加载 jQuery 对话框后运行函数

> ID：12337271
> 
> 赞同：14
> 
> 时间：2012-09-09T07:26:28.987
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

这可能是一个简单的问题，但我无法让它发挥作用。我正在使用 jQuery 对话框来显示从我网站上的另一个页面加载的表单。用户单击一个链接，该链接将启动对话框。我要做的是在将 HTML 加载到对话框后运行一个函数。这是我加载对话框的代码：

```
$(document).ready(function () {
    $(".openDialog").live("click", function (e) {
        e.preventDefault();

        $("#dialogBox").dialog({
            title: $(this).attr("data-dialog-title"),
            close: function() { $(this).remove() },
            modal: true
        })
        .load(this.href);
    });

    $(".close").live("click", function (e) {
        e.preventDefault();
        $(this).closest(".dialog").dialog("close");
    });
}); 
```

我有一个函数 myFunction() 我想在 HTML 加载到对话框时调用它。环顾一番后，我尝试在 .load 中指定函数，如下所示：

```
.load(this.href, myFunction()); 
```

我也尝试使用 open 事件，如下所示：

```
open: myFunction(), 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-09T07:33:34.967

**解决方案#1：**

```
.load(this.href, myFunction); 
```

**解决方案#2：**

```
.load(this.href, function(){
  myFunction();
}); 
```

**解决方案#3（首选）：**

```
open: myFunction, 
```

**解决方案#4：**

```
open: function(){
  myFunction();
} 
```

* * *

这是为什么？

```
var foo = myFunction(); // `foo` becomes your function return value
var bar  = myFunction; // `bar` becomes your function
bar(); 
```

* * *

您的代码应如下所示：

```
$("#dialogBox").load('http://example.com').dialog({
  title: $(this).attr("data-dialog-title"),
  close: function() { $(this).remove() },
  modal: true,
  open : myFunction // this should work...
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-10T13:55:28.127

没有一个解决方案对我有用。我想这是因为`open`对话框完成打开时没有调用回调。我必须使用 a`setTimeout`才能使其工作。

```
$('#dialogBox').dialog('open');

setTimeout(function(){
    // myFunction();
},100); 
```

这显然取决于里面的东西`myFunction`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-25T08:56:47.347

对于 jQuery UI - v1.11.4，下面代码片段中的“完成”不再起作用：

```
show: {
    effect: 'clip',
    complete: function() {
        console.log('done');
    }
}, 
```

适用于 jQuery UI - v1.11.4 的解决方案。：

[如何在对话框显示中将回调附加到 jquery 效果？](https://stackoverflow.com/questions/6923647/how-to-attach-callback-to-jquery-effect-on-dialog-show#answer-18257205)

正如[losnir](https://stackoverflow.com/users/2678731/losnir)所建议的，使用 $(this).parent().promise().done：

```
$("#dialog").dialog({
show: {
    effect: "drop",
    direction: "up",
    duration: 1000
},
hide: {
    effect: "drop",
    direction: "down",
    duration: 1000
},
open: function () {
    $(this).parent().promise().done(function () {
        console.log("[#Dialog] Opened");
    });
},
close: function () {
    $(this).parent().promise().done(function () {
        console.log("[#Dialog] Closed");
    });
}
}); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-30T03:36:27.597

我有一个问题，我加载了一个外部页面，我还想在加载的页面上运行一个函数。显然使用 open: 在对话框方法中不起作用。

```
jQuery("#pop-sav").load('/external/page', my_function_name );

jQuery("#pop-sav").dialog({
      resizable: false,
      width:'90%',
      autoReposition: true,
      center: true,
      position: 'top',
      dialogClass: 'pop-dialog pop-sort'
}); 
```

**my_function_name**必须没有括号，只有函数本身的名称才能使其工作。我不确定这到底是如何工作的，但如果你弄清楚了，请在评论中告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-12T03:23:29.540

您还可以使用**焦点**事件，该事件将在对话框打开后以及获得焦点时触发。

[单击此处获取文档](http://api.jqueryui.com/dialog/#event-focus)

# android - BackupAgent 在 Jelly bean 中不起作用。果冻豆中的虫子？

> ID：12337273
> 
> 赞同：2
> 
> 时间：2012-09-09T07:26:34.157
> 
> 标签：android, android-4.2-jelly-bean, android-backup-service

我正在测试`BackupRestore`来自 Android SDK 16 的示例代码（使用我自己的密钥），但它不起作用。完全相同的代码适用于 ICS 和 GB。当我重新安装应用程序时，我得到了

```
09-08 23:55:27.159: I/BackupManagerService(149): New app com.example.android.backuprestore never backed up; scheduling 
```

重新安装后打开应用程序时，我得到了

```
09-08 23:53:48.240: I/PerformBackupTask(149): no backup data written; not calling transport 
```

我在 Stackoverflow 上找到了这个帖子，它说 JB 中可能存在错误。任何人都知道或可以确认确实存在错误？任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:55:05.713

我一直在 JB 中广泛使用这个，并且没有我知道的错误。从 ICS 到 JB，大部分与备份相关的 AOSP 代码都未触及。

请记住，标准的 BackupHelpers 不会为未更改的数据生成备份，并且如果没有要备份的数据，BackupManagerService 也不会调用传输。

# data-structures - 如何使用两个堆栈实现出队

> ID：12337278
> 
> 赞同：3
> 
> 时间：2012-09-09T07:27:46.223
> 
> 标签：data-structures, stack, queue, deque

Dequeue - 双端队列：可以从两端入队和出队。

如何使用 2 个堆栈定义出队的 ADT 操作。

实施还应考虑性能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T07:34:46.703

最简单的解决方案是使用一个堆栈作为队列的头部，一个作为尾部。入队操作将只是对相应堆栈的推送，而出队操作将只是对相应堆栈的弹出操作。

但是，如果要从中出列的堆栈为空，则必须从另一个堆栈中弹出每个元素并将其推回要从中出列的堆栈，然后将最后一个出列。这并不是很好的性能，所以这个实现的整体性能很大程度上取决于工作负载。如果您的工作负载是前/后入队和出队操作的数量平衡，那么这将非常非常快。但是，如果您的工作负载包含大量交替的头出列和尾出列，而队列很大，那么这显然是一个不好的方法。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-22T21:48:00.160

我就是这样做的，真正重要的是你确保当你不断从一个弹出并且它变空然后它开始从另一个弹出，（我们必须确保它从堆栈的末尾弹出）我们可以通过将一个堆栈清空到另一个堆栈来做到这一点。并继续在那里流行。

公共类 NewDeque {

```
Stack<E> frontstack;
Stack<E> endstack;

public NewDeque() {

    frontstack = new Stack<>();
    endstack = new Stack<>();

}

void addFirst(E e) {

    frontstack.push(e);
}

E delFirst() {
    if (frontstack.isEmpty()) {
        while (!endstack.isEmpty()) {
            frontstack.push(endstack.pop());
        }
        return frontstack.pop();
    }
    return frontstack.pop();
}

void addLast(E e) {

    endstack.push(e);
}

E delLast() {
    if (endstack.isEmpty()) {
        while (!frontstack.isEmpty()) {
            endstack.push(frontstack.pop());
        }
        return endstack.pop();
    }
    return endstack.pop();
}

int size() {
    return frontstack.size() + endstack.size();
}

boolean isEmpty() {
    return (size() == 0) ? true : false;
}

E get(int i) {
    if (i < endstack.size()) {
        return endstack.get(endstack.size() - i - 1);
    } else {
        return frontstack.get(i - endstack.size());
    }

}

static void print(NewDeque<Integer> ds) {
    for (int i = 0; i < ds.size(); i++) {
        System.out.print(" " + ds.get(i) + " ");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T05:53:12.207

一个有趣的方法如下

```
enqueue(q,  x)
  1) Push element x to stack1\. This very simple, the problem is dequeue

dequeue(q)
  1) If stacks1 and stack2 are empty then error  "UNDERFLOW"
  2) If stack2 is empty, then 
       while (stack1 is not empty) do
           push all element from satck1 to stack2.
        end while;
  3) Pop the element from stack2 and return it. 
```

# mysql - 我的查询模式的模型数据和索引？

> ID：12337279
> 
> 赞同：1
> 
> 时间：2012-09-09T07:28:09.127
> 
> 标签：mysql, sql, data-modeling

我应该如何在 MySql 中建模这些数据？

我的数据如下所示：

有许多项目，其中一些共享一个项目组。每个项目都有一个 0-10 或 20 个事件的列表。每个项目都可以处于 INPROGRESS 状态或 COMPLETED 状态。

我想通过两种方式查询这些数据：

1.  ITEMGROUP 中的所有项目。按需查询。
2.  一个带有唯一标识符的项目，以及与之关联的所有事件。按需查询。
3.  所有项目正在进行中。至少每小时一次。

每月输入 2,000,000 个项目。因此，一年后数据库将拥有 24,000,000 个项目。

为这些数据和这些查询模式建模我的数据和索引的最佳方法是什么？如果有的话，我应该注意这些数据和这些查询的哪些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:12:06.340

我不确定我是否理解你。但它是关系数据库的简单模式。像这样的东西？

```
Table: Item (Id, ...)
Table: ItemGroup (Id, FK_Item, ...)
Table: ItemEvent (Id, FK_Item, ...)

SELECT Item.* 
FROM Item JOIN ItemGroup ON Item.Id = ItemGroup.FK_Item 
WHERE ItemGroup.Id = ? ...

SELECT ItemEvent.* 
FROM Item JOIN ItemEvent ON Item.Id = ItemEvent.FK_Item 
WHERE Item.Id = ? ...

SELECT Item.* 
FROM Item JOIN ItemEvent ON Item.Id = ItemEvent.FK_Item 
WHERE ItemEvent.state = 'INPROGRESS' ... 
```

主键`Id`和所有外键的索引 ( `FK_...`)。在这种情况下，外键索引`ItemEvent.FK_Item`也应该包括该列`ItemEvent.state`。

# android - 仅在按下完成按钮时获取 DatePickerDialog 的值

> ID：12337282
> 
> 赞同：1
> 
> 时间：2012-09-09T07:29:18.543
> 
> 标签：android

通过引用`DateWidgets1.java`API 演示，我倾向于通过以下方式显示日期选择器小部件。

```
private void initDateTextView() {
    dateTextView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            showDialog(DATE_DIALOG_ID);                
        }            
    });
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
       // set date picker as current date
       return new DatePickerDialog(this, datePickerListener, 
                     this.year, this.month, this.date);
    }
    return null;
}

@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    switch (id) {
    case DATE_DIALOG_ID:
        ((DatePickerDialog)dialog).updateDate(this.year, this.month, this.date);
    }        
}

private static final int DATE_DIALOG_ID = 0;
private final DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {
    // When dialog box is closed, below method will be called.
    public void onDateSet(DatePicker view, int selectedYear, int selectedMonth, int selectedDay) {
        Log.i("CHEOK", selectedYear + ", " + selectedMonth + ", " + selectedDay);
    }
}; 
```

* * *

但是，我意识到，无论我按下对话框的**完成**按钮还是按下手机的软后退按钮，都将始终调用 onDateSet，并选择最新的微调器日期。

**当用户按下完成**按钮而不是返回按钮时，我只对获取所选日期感兴趣。

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:41:03.003

这似乎是[本文中讨论](https://stackoverflow.com/a/11493752/1023092)的框架中的一个错误（包括建议的解决方法）。

# java - Java 中的类加载器变体和用法

> ID：12337283
> 
> 赞同：0
> 
> 时间：2012-09-09T07:29:40.417
> 
> 标签：java, classloader

我知道 java.lang.ClassLoader 通常是我扩展的类加载器（需要时）。此外，当我看到 tomcat、Jetty 等的自定义类加载器从 java.lang.ClassLoader 扩展时。

我很想了解 com.sun.org.apache.bcel.internal.util.ClassLoader 的用途和用法。

有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:32:47.780

从包名的“bcel”部分判断，类加载器不只是加载类，它会即时更改字节码（参见[bcel](http://commons.apache.org/bcel/)主页）。

[编辑：可以在此处](http://www.java.net/node/643837)找到有关他们使用它的更多信息：“XSLTC 在内部使用 BCEL 将 XSLT 样式表“编译”成字节码以供执行”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:34:21.573

`com.sun.org.apache.bcel.internal`只是[Apache BCEL](http://commons.apache.org/bcel/)的重新包装。特别是，我们感兴趣的类 ( `ClassLoader`) 记录[在这里](http://commons.apache.org/bcel/apidocs/org/apache/bcel/util/ClassLoader.html)...

> 替代 JVM 的标准类加载器。您可以将它与 结合使用，以根据[`JavaWrapper`](http://commons.apache.org/bcel/apidocs/org/apache/bcel/util/JavaWrapper.html)需要动态修改/创建类。
> 
> 此类加载器以不同的格式识别特殊请求，即，当请求的类的名称包含“ *$$BCEL$$* ”时，它会调用[`createClass()`](http://commons.apache.org/bcel/apidocs/org/apache/bcel/util/JavaWrapper.html)具有该名称的方法（*$$BCEL$$*之前的所有内容都被认为是包名。您可以子类化类加载器并覆盖该方法。“普通”类可以通过覆盖[`modifyClass()`](http://commons.apache.org/bcel/apidocs/org/apache/bcel/util/ClassLoader.html#modifyClass(org.apache.bcel.classfile.JavaClass))之前调用的方法来修改[`defineClass()`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#defineClass(java.lang.String,%20byte%5B%5D,%20int,%20int))。

# java - Java retainAll 基于枚举值

> ID：12337291
> 
> 赞同：1
> 
> 时间：2012-09-09T07:31:13.583
> 
> 标签：java, enums

我有一个对象列表，它们都有一个名为 AssetType 的枚举值，是否可以使用 retainAll() 方法对列表进行排序，以便只保留具有 AssetType.BANK_ACCOUNT 的对象？

提前谢谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:36:59.987

如果您拉入`Guava`，您可以在对象和它的 之间进行实时转换`AssetType`，然后调用`retainAll`它：

```
Lists.transform(allAssets, assetTypeFn).retainAll(
   Collections.singleton(AssetType.BANK_ACCOUNT));

//...elsewhere...

public static final Function<MyObject, AssetType> assetTypeFn = 
  new Function<MyObject, AssetType>() {
     public AssetType apply(MyObject object) {
         return object.getAssetType();
     }
  }; 
```

`filter()`同样，如果您不想更改原始列表，可以使用该方法：

```
List<MyObject> bankAccounts = Lists.newArrayList(
    Iterables.filter(allAssets, isBankAccount));

public static final Predicate<MyObject> isBankAccount = new Predicate<MyObject>() {
    public boolean apply(MyObject asset) {
        return asset.getAssetType() == AssetType.BANK_ACCOUNT;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T13:50:31.147

（披露：我为 Guava 做出了贡献。）

一个更直观的基于 Guava 的实现将是

```
Iterables.removeIf(allAssets, new Predicate<MyObject>() {
  public boolean apply(MyObject asset) {
    return asset.getAssetType() != AssetType.BANK_ACCOUNT;
  }
}); 
```

...也就是说，老实说，我更喜欢愚蠢的纯 Java 实现：

```
Iterator<MyObject> itr = allAssets.iterator();
while (itr.hasNext()) {
  if (itr.next().getAssetType() != AssetType.BANK_ACCOUNT) {
    itr.remove();
  }
} 
```

# asp.net - 文件不存在，即使它在物理位置

> ID：12337296
> 
> 赞同：0
> 
> 时间：2012-09-09T07:32:29.450
> 
> 标签：asp.net, iis

我们的托管服务器最近从 Microsoft 服务器 2003 转移到 2008，因此我们配置了**IIS 7.0** 在我们的一个模块中，我们正在检查文件是否存在于特定的物理路径中

```
 if (File.Exists(@"C:\logo.jpg"))
        {
            // some logic
        } 
```

实际上，当我转到 logo.jpg 文件的**物理路径** 时确实存在，但从代码的角度来看它不存在我在这里做错了什么，这一切都在我的**IIS 6旧服务器上工作**

**注意：**我是从物理路径匹配的，因为我有很多这样的 *.jpg 文件（超过 10000 个）

请建议如果有任何线索

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:38:53.453

将您的徽标移动到 IIS 用户可以读取的某个位置，例如项目目录或该目录的子目录，然后更新代码以从那里读取徽标。

# python - Python：如何确保方法获取列表

> ID：12337297
> 
> 赞同：2
> 
> 时间：2012-09-09T07:32:39.137
> 
> 标签：python

我有一个采用字符串列表的方法。不幸的是，如果列表只有一项，Python 会将此列表视为字符串。

这篇文章有一个方法来检查某个东西是否是一个字符串，如果是，则将其转换为一个列表： [Python：如何定义一个获取字符串列表或字符串的函数](https://stackoverflow.com/questions/10654377/python-how-to-define-a-function-that-gets-a-list-of-strings-or-a-string)

但这似乎是一种非常多余的方法，可以让我作为列表传入的项目实际上是一个列表。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:38:32.577

您可能正在使用元组，而不是列表，并且忘记在单项元组文字中添加逗号。`('foo')`被解释为`'foo'`与您所说的内容相匹配的简单内容。但是，向单项元组文字添加逗号将解决此问题。`('foo',)`返回，嗯，`('foo',)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:38:19.310

我不确定我是否相信你，python 不应该那样做，而且它似乎不会：

```
>>> def foo(lst):
    print type(lst)

>>> foo(['bar'])
<type 'list'> 
```

那篇文章是关于另一件事的，他们希望能够传递单个字符串或字符串列表，并像处理字符串列表一样处理这两种情况。如果您只传递一个列表，则始终将其视为列表应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T07:48:29.910

Python 不应该使用列表来做到这一点。但是，单例元组的语法与单例列表不同：

```
(1) == 1                    # (1) is 1
[1] != 1                    # [1] is a singleton list
(1,) != 1                   # (1,) is a singleton tuple 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T12:29:07.450

你误会了。Python 没有对单个元素的列表进行这种转换。

双重，三重检查你是否把`[]`你正在传递的物品放在周围。

如果您仍然无法使其正常工作，请***向我们展示代码*！**

# jquery - 我的 Jquery 函数无法识别 DOM 中的变化

> ID：12337301
> 
> 赞同：0
> 
> 时间：2012-09-09T07:32:54.160
> 
> 标签：jquery

我有一个可排序的表格，每列的顶部都有按钮。单击按钮时，列按升序和降序排列。每次发生这种情况时，都会修改 th 类以表示当前状态，th.sorting、th.sorting_asc 和 th.sorting_desc ... 下面的代码用于更新排序箭头：

```
 $('th.sorting').on('click', 'span', function() {
    alert("sorting");
    $("span#i").html('');
    jQuery("span#i", this).html(' <i class=\"icon-chevron-up\"></i>');
    });

  $('th.sorting_asc').on('click', 'span', function() {
    alert("sorting_asc");
    $("span#i").html('');
    jQuery("span#i", this).html(' <i class=\"icon-chevron-down\"></i>');
    });

  $('th.sorting_desc').on('click', 'span', function() {
    alert("sorting_desc");
    $("span#i").html('');
    jQuery("span#i", this).html(' <i class=\"icon-chevron-up\"></i>');
  }); 
```

这是我尝试将上述功能应用于的代码示例：

```
<th class="sorting"><span>Device<span id="i"></span></span></th> 
```

我现在遇到的问题是，当我单击按钮时，上面的功能没有识别出 th 类已更改。我已经验证，当我对列进行排序时，该类实际上正在发生变化，并且数据已正确排序。

举个例子，其中一列加载为已排序的列，因此将被标记为 sort_asc 等。当我单击另一列排序按钮时，这会导致所有其他列变为 .sorting，而最近单击的列变为 . sort_asc ...但不知何故，即使我单击原始列（当它的类是.sorting时）我仍然收到一个警报，说“sorting_asc”

我修复了它：

```
$("th > span").click(function() {
     var th = $(this).parent("th"); 
     if($(th).hasClass("sorting")) {
       $("span#i").html('');
       jQuery("span#i", this).html(' <i class=\"icon-chevron-up\"></i>');
     } 

     if($(th).hasClass("sorting_asc")) {
       $("span#i").html('');
       jQuery("span#i", this).html(' <i class=\"icon-chevron-down\"></i>'); 
     } 

     if($(th).hasClass("sorting_desc")) {
       $("span#i").html('');
       jQuery("span#i", this).html(' <i class=\"icon-chevron-up\"></i>'); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:40:56.550

您使用了错误的委派目标。与其将事件委托给正在改变的元素，不如将事件委托给最近的静态父元素。在这种情况下，包含`table`似乎是一个合理的选择：

```
$('.class-of-the-table').on('click', 'th.sorting span', function () {...})
    .on('click', 'th.sorting_asc span', function () {...})
    .on('click', 'th.sorting_desc span', function () {...}); 
```

# google-maps - 仅使用 kml 将谷歌地图居中

> ID：12337304
> 
> 赞同：1
> 
> 时间：2012-09-09T07:33:27.653
> 
> 标签：google-maps, kml

我有一个网页，它接收一些参数并生成一个包含许多地标的 KML 文件。

是否有 KML 元素强制地图以我选择的点为中心打开和/或缩放？

谢谢，阿米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:39:14.743

尝试将[`<LookAt>`](https://developers.google.com/kml/documentation/kmlreference#lookat)元素添加到您的[`<Document>`](https://developers.google.com/kml/documentation/kmlreference#document).

# c++ - 使用 C++ 监控注册表

> ID：12337310
> 
> 赞同：3
> 
> 时间：2012-09-09T07:35:09.700
> 
> 标签：c++, winapi, registry, monitor

每当安装或删除应用程序时，我想监视何时更改/添加/删除注册表项。我已经测试了 msdn( [link](http://msdn.microsoft.com/en-us/library/ms724892%28v=VS.85%29.aspx) ) 中的示例代码，它工作正常。

但问题是它没有告诉我哪个键实际上已被修改/添加/删除。如何使用 C++ 检索这些信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T07:39:24.273

只有 3 种方法，没有一种既简单又足够：

*   [`RegNotifyChangeKeyValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724892.aspx): 不会为您提供所需的信息，但非常易于使用。

*   [`EVENT_TRACE_FLAG_REGISTRY`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364106.aspx)这是 ProcMon[使用](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)的[Windows 事件跟踪的一部分。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968803.aspx)它运作良好，但使用起来相当困难。 我不确定自己如何使用它，但是如果我弄清楚了，我会在这里发布。

*   [`CmRegisterCallback`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541918.aspx)：需要内核模式驱动程序，这在 64 位中很痛苦。
    但这是最完美的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T20:43:37.497

不幸的是，Windows 事件跟踪 (EWT) 不允许查看事件中的完整密钥路径。你只得到一个部分键名，一个奇怪的句柄实际上是一个键控制块。从这个块中获取信息并不是那么简单。是的，进程监视器使用 EWT，但它不使用 Windows 内核跟踪作为提供程序。

# flash - 动态缩放列表组件及其文本内容

> ID：12337313
> 
> 赞同：0
> 
> 时间：2012-09-09T07:36:08.247
> 
> 标签：flash, resolution, scaling

我的 Flash 应用程序中有一个列表组件，我不想在抛出 event.RESIZE 时动态缩放以适应不同的分辨率。

缩放实际列表很容易。我可以将列表设置为最小预期分辨率的静态大小，然后将其放大为当前分辨率与最小分辨率的比率。就像是：

```
if(stage.stageWidth > MIN_WIDTH_RESOLUTION)
    m_list.width = MIN_LIST_WIDTH * (stage.stageWidth / MIN_WIDTH_RESOLUTION) 
```

和类似的高度。

问题来自列表内部的文本字段。文本不随列表缩放。**是否有任何内置的 ActionScript 方法来处理这个问题？**

我尝试通过以类似于上面的代码片段的最小比率方式设置 textFields 的 fontSize 和列表的 rowHeight 来手动执行此操作。我遇到了问题，因为不能简单地从一维确定文本的大小。当舞台宽度增加时增加字体的大小也会增加字体的高度。

如果这可以通过 actionscript 以我不知道的方法在内部处理，那就太棒了，但如果不是，我会很感激一些关于如何手动处理的技巧或方程式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:30:42.657

您可以使用列表的变换属性来缩放或调整它（也是它的子级）。您需要做的是，只需进行缩放计算并将其分配到矩阵中，然后将该矩阵分配给变换。

示例：如果**mlist**是您的列表和**矩阵**，那么，

```
mlist.transform.matrix = matrix; 
```

以下链接可帮助您设置矩阵

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix.html)

我相信这条信息正是你想要的。

# python - Django Admin 界面的安全性如何

> ID：12337318
> 
> 赞同：0
> 
> 时间：2012-09-09T07:36:52.993
> 
> 标签：python, django, web-applications, django-admin

我在互联网上有几个应用程序，并希望使用另一个 Django 应用程序为这些应用程序*提供静态文件。**我根本负担不起将 Amazon Web Services 用于我的宠物项目。*

所以，我想设置一个管理界面，我可以轻松地管理静态文件。以下是我想包含在管理员中的操作。

1.  上传、删除静态文件
2.  对静态文件进行分组（创建新文件夹，向其中添加新/现有文件）；我不确定是否可能。
3.  检查我的模型

因此，我想知道 Django-Admin 界面有多安全！

与我们著名的网站（如 Yahoo、Facebook、Google Login's..）相比，它的安全性如何（至少在“破解”方面……django admin 是否可以轻松破解？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:05:41.957

除了通过 django 提供静态文件被认为是一个坏主意之外，django 管理员本身非常安全。您可以通过 .htaccess 保护它并强制对其进行 https 访问来采取额外措施。您还可以限制对某个 IP 的访问。如果管理员暴露在整个互联网上，您至少应该在选择凭据时小心。因为我不知道谷歌和雅虎到底有多安全，所以我无法与他们相比。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-09T07:42:52.570

谷歌登录有多安全；）？你不能说，因为你不能看幕后（**更新**：谷歌登录当然。）。我猜想 Django 的管理代码是相当安全的，因为它被用于许多生产系统中。尽管如此，除了代码之外，如何设置它也很重要。最后，这取决于您需要的安全级别。

# mongodb - MongoDB aggregation comparison: group(), $group and MapReduce

> ID：12337319
> 
> 赞同：39
> 
> 时间：2012-09-09T07:36:59.543
> 
> 标签：mongodb, mapreduce, mongodb-query, aggregation-framework

I am somewhat confused about when to use group(), aggregate with $group or mapreduce. I read the documentation at [http://www.mongodb.org/display/DOCS/Aggregation](http://www.mongodb.org/display/DOCS/Aggregation) for group(), [http://docs.mongodb.org/manual/reference/aggregation/group/#_S_group](http://docs.mongodb.org/manual/reference/aggregation/group/#_S_group) for $group.. Is sharding the only situation where group() won't work? Also, I get this feeling that $group is more powerful than group() because it can be used in conjunction with other pipeline operators from aggregation framework.. How does $group compare with mapreduce? I read somewhere that it doesn't generate any temporary collection whereas mapreduce does. Is that so?
Can someone present an illustration or guide me to a link where these three concepts are explained together, taking the same sample data, so I can compare them easily?

**EDIT:**
Also, it would be great if you can point out anything new specifically in these commands since the new 2.2 release came out..

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-09T15:15:49.253

It is somewhat confusing since the names are similar, but the [`group()` command](http://docs.mongodb.org/manual/reference/command/group/) is a different feature and implementation from the [`$group` pipeline operator](http://docs.mongodb.org/manual/reference/aggregation/group/#_S_group) in the Aggregation Framework.

The group() command, Aggregation Framework, and MapReduce are collectively *aggregation features* of MongoDB. There is some overlap in features, but I'll attempt to explain the differences and limitations of each as at MongoDB 2.2.0.

Note: *inline result sets* mentioned below refer to queries that are processed in memory with results returned at the end of the function call. Alternative output options (currently only available with MapReduce) could include saving results to a new or existing collection.

## `group()` Command

*   Simple syntax and functionality for grouping .. analogous to `GROUP BY` in SQL.

*   Returns result set inline (as an array of grouped items).

*   Implemented using the JavaScript engine; custom `reduce()` functions can be written in JavaScript.

*   **Current Limitations**

    *   Will not group into a result set with more than 20,000 keys.

    *   Results must fit within the limitations of a BSON document (currently 16MB).

    *   Takes a read lock and does not allow any other threads to execute JavaScript while it is running.

    *   Does not work with sharded collections.

*   See also: **[group() command examples](http://docs.mongodb.org/manual/reference/command/group/#examples)**.

## MapReduce

*   Implements the [MapReduce model](http://en.wikipedia.org/wiki/Mapreduce) for processing large data sets.

*   Can choose from one of several [output options](http://docs.mongodb.org/manual/reference/command/mapReduce/#out-options) (inline, new collection, merge, replace, reduce)

*   MapReduce functions are written in JavaScript.

*   Supports non-sharded and sharded input collections.

*   Can be used for incremental aggregation over large collections.

*   MongoDB 2.2 implements much better support for [sharded map reduce output](http://docs.mongodb.org/manual/core/map-reduce-sharded-collections/).

*   **Current Limitations**

    *   A single emit can only hold half of MongoDB's maximum BSON document size (16MB).

    *   There is a JavaScript lock so a mongod server can only execute one JavaScript function at a point in time .. however, most steps of the MapReduce are very short so locks can be yielded frequently.

    *   MapReduce functions can be difficult to debug. You can use `print()` and `printjson()` to include diagnostic output in the `mongod` log.

    *   MapReduce is generally not intuitive for programmers trying to translate relational query aggregation experience.

*   See also: **[Map/Reduce examples](http://docs.mongodb.org/manual/reference/command/mapReduce/#examples)**.

## Aggregation Framework

*   New feature in the MongoDB 2.2.0 production release (August, 2012).

*   Designed with specific goals of improving performance and usability.

*   Returns result set inline.

*   Supports non-sharded and sharded input collections.

*   Uses a "pipeline" approach where objects are transformed as they pass through a series of pipeline operators such as matching, projecting, sorting, and grouping.

*   Pipeline operators need not produce one output document for every input document: operators may also generate new documents or filter out documents.

*   Using projections you can add computed fields, create new virtual sub-objects, and extract sub-fields into the top-level of results.

*   Pipeline operators can be repeated as needed (for example, multiple `$project` or `$group` steps.

*   **Current Limitations**

    *   Results are returned inline, so are limited to the maximum document size supported by the server (16MB)

    *   Doesn't support as many output options as MapReduce

    *   Limited to [operators and expressions](http://docs.mongodb.org/manual/reference/aggregation/operators/) supported by the Aggregation Framework (i.e. can't write custom functions)

    *   Newest server feature for aggregation, so has more room to mature in terms of documentation, feature set, and usage.

*   See also: **[Aggregation Framework examples](http://docs.mongodb.org/manual/tutorial/aggregation-examples/)**.

> Can someone present an illustration or guide me to a link where these three concepts are explained together, taking the same sample data, so I can compare them easily?

You generally won't find examples where it would be useful to compare all three approaches, but here are previous StackOverflow questions which show variations:

*   [group() versus Aggregation Framework](https://stackoverflow.com/questions/12189273)
*   [MapReduce versus Aggregation Framework](https://stackoverflow.com/questions/12015064)

# jsf - 如何检查 JSF 标记中的条件

> ID：12337322
> 
> 赞同：2
> 
> 时间：2012-09-09T07:37:04.693
> 
> 标签：jsf

```
<h:commandLink value="next" action="#{student.getNext()}"  rendered="#{! (student.maximumSize<=student.idvalue.size)}" ></h:commandLink> 
```

但是我在 student.maximumSize<=student.idvalue.size 中遇到错误

<= 我可以在这里替换什么 .. ??

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T07:50:33.713

最好是删除`!`并使用`gt`

```
<h:commandLink rendered="#{student.maximumSize gt student.idvalue.size}" value="next" action="#{student.getNext()}"></h:commandLink> 
```

或试试这个

```
<h:commandLink rendered="#{not (student.maximumSize le student.idvalue.size)}" value="next" action="#{student.getNext()}"></h:commandLink> 
```

这里应该使用 el 表达式而不是诸如`==` `<` `>`etc 之类的符号...

```
==  -->  eq
!=  -->  ne
<   -->  lt
>   -->  gt
<=  -->  le
>=  -->  ge 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:48:57.953

您需要将 '<=' 更改为 'le'，或使用 < < 的语法。

# c++ - Qt中的空文件

> ID：12337328
> 
> 赞同：4
> 
> 时间：2012-09-09T07:37:58.447
> 
> 标签：c++, qt, qt4

我有一个名为 DBFile 的文件。我正在使用以下代码：

```
QString DBfile ="C:/Users/E543925/Desktop/VikuTB.xml";
QFile newFile(DBfile);
newFile.open( QIODevice::WriteOnly); 
```

现在我想在文件中写一些东西，如果它是空的。Qt中如何检查文件是否为空？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T10:48:04.957

**在通过newFile.size()**打开之前检查文件大小

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T08:16:18.440

添加附加标志并检查插入`pointer`：

```
newFile.open( QIODevice::WriteOnly|QIODevice::Append );
if (newFile.pos() == 0) {
  // is empty
} else {
  // some data inside
} 
```

免责声明：未经测试的代码，现在我会花时间尝试它......

*编辑*：经过测试，似乎运作良好......**

# android - 具有不同行布局的自定义 ListView 根据 Web 服务响应进行膨胀

> ID：12337331
> 
> 赞同：-5
> 
> 时间：2012-09-09T07:38:49.560
> 
> 标签：android, android-listview

我有列表视图。

我有 3 组视图：

1.  图像视图
2.  视频视图
3.  文本视图。

我有一个返回图像、视频和文本的网络服务器。因此，根据来自服务器的响应，我想为列表视图中的行增加视图。

我知道使用自定义适配器膨胀自定义布局。

我想知道如何使用自定义适配器膨胀视图类型？

**例如 ：**

如果网络服务器返回图像，则膨胀图像视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:07:52.537

将每个 Web 服务响应与 ID 0 相关联，图像为 1，文本为 1，视频为 2。将 ID 存储在 ArrayList 中。然后重写 getItemViewType() 和 getViewTypeCount()。在 getView() 中膨胀适当的视图。

```
 @Override

    public int getItemViewType(int position) 

    {

    int type;

    if (ID.get(position)== 0){
        type = TYPE_ITEM1;  //type 0 for image
    } else if (ID.get(position) == 1){
        type = TYPE_ITEM2; //type 1 for text
    }else {
        type = TYPE_ITEM3; //type 2 for videos
    }
    return type;
    }
@Override
public int getViewTypeCount() {
    return 3;    //three different layouts to be inflated
} 
```

# php - 未登录时获取 Zend Framework 的数据库会话数据

> ID：12337336
> 
> 赞同：1
> 
> 时间：2012-09-09T07:39:55.777
> 
> 标签：php, zend-framework

我无法找到任何关于如何提取第一次访问页面时由 php 自动插入的会话数据的明确信息。

我使用 application.ini 将会话存储到数据库中的常用方法。所以现在，我需要获取一个未登录的人的 sessionid。我使用什么命名空间来获取数据？这是我的application.ini

```
resources.session.saveHandler.class = "Zend_Session_SaveHandler_DbTable"

resources.session.saveHandler.options.name = "sessions"
resources.session.saveHandler.options.primary = "id"
resources.session.saveHandler.options.modifiedColumn = "modified"
resources.session.saveHandler.options.dataColumn = "data"
resources.session.saveHandler.options.lifetimeColumn = "lifetime" 
```

所以现在，我看到当一个人访问该站点时，它会添加一个会话，但是我如何才能访问该会话数据？

我只知道在用户登录时如何设置会话命名空间，但是当没有登录时，我不会手动创建会话或任何东西，所以我迷路了。

我无法弄清楚如何以更清晰的方式提出这个问题。

寻找类似的东西

```
$NonLoggedInSession = new Zend_Session_Namespace('Zend_Session_namesapce(?)');
$NonLoggedInSession -> sessionid // should return something like 21hir1GI31!1gotig1 (the session id it created in the database) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:32:09.573

`Zend_Session::getIterator()`应该返回一个包含所有对象的可迭代`Zend_Session_Namespace`对象。

`Zend_Session::getId()`可能是您正在寻找的，这将返回当前会话 cookie 的值，至少在我的应用程序中是这样。

检索该会话 cookie 的名称`Zend_Session::getOptions('name')`

请记住，我用来测试这些调用的应用程序没有明确设置任何会话 cookie。我确实使用 Zend_Session_Namespace 在应用程序的各个点保存数据。因此，任何会话 cookie 集都是 Zend 框架默认值的结果。

返回到我的应用程序的值与我在 Firefox 中查看 cookie 时出现的值相匹配。

# vim - 如何删除 vim easyMotion 插件中的 Press ENTER 消息

> ID：12337338
> 
> 赞同：1
> 
> 时间：2012-09-09T07:40:14.137
> 
> 标签：vim

我正在使用带有 EasyMotion 插件的 Vim。我当前的 .vimrc 如下：[https://github.com/iAdramelk/.dotfiles/blob/master/vimrc](https://github.com/iAdramelk/.dotfiles/blob/master/vimrc)

我想知道这个插件是如何工作的，每次我尝试使用它移动时，bot 都会打印以下消息，并且直到我按下回车键才移动：

```
EasyMotion: Jumping to [222, 41]                                                                                                                                              
Press ENTER or type command to continue 
```

EasyMotion demo 在它的 repo 中没有这样的行为。所以我假设我的配置中有一些错误。但即使我禁用所有插件和`set`选项错误仍然存​​在。

我该如何解决这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:55:43.050

你是通过 GitHub 使用插件，还是从 vim.org 网站获取官方版本？这看起来像是插件代码中留下的一些调试语句。

您可以通过`:silent`在其映射中使用或增加来解决该问题`'cmdheight'`，但我真的会联系插件作者以解决根本原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:58:17.727

通过卸载 vim（由带有 flag 的 homebrew 安装）修复错误`--with-features=big`，然后从这里`homebrew/dupes/vim`以巨大的配置重新安装它。

# java - 确定事件的任何方式，例如鼠标单击 Eclipse 应用程序中的标题栏

> ID：12337343
> 
> 赞同：0
> 
> 时间：2012-09-09T07:41:34.990
> 
> 标签：java, eclipse, swt

我正在使用`eclipse rcp`和`swt`开发应用程序。我有一个`list`并且我需要在标题栏的移动或当用户单击一个时将其可见性设置为 false `titleBar`。我找不到任何事件`titleBar`。有什么事件`titleBar`可以解决我的问题吗？或者任何可能解决我的问题的东西？我搜索但只能找到 flex

```
function panelClick ( event:MouseEvent ) : void
{
    trace( event.localX + '/' + event.localY );
} 
```

使用 eclispe 的 swt 是否有同样的事情。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:59:32.073

以下代码将在相应事件发生时输出“Move”和“Minimize”：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final Button dummy = new Button(shell, SWT.PUSH);
    dummy.setText("Dummy");

    shell.addListener(SWT.Move, new Listener() {

        @Override
        public void handleEvent(Event arg0) {
            System.out.println("Move");
        }
    });

    shell.addListener(SWT.Iconify, new Listener() {

        @Override
        public void handleEvent(Event arg0) {
            System.out.println("Minimize");
        }
    });

    shell.pack();

    shell.setSize(400, 300);

    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
} 
```

然而，该`SWT.MOVE`事件仅在外壳被移动**后触发，即当“移动”结束时。**

# php - # 在 CakePHP 中 $this->Html->link

> ID：12337348
> 
> 赞同：1
> 
> 时间：2012-09-09T07:42:19.083
> 
> 标签：php, cakephp

我想知道如何在 cakephp url 中添加“#”而不被转义。我试过 'escape' => false 但没有成功。我这样做是为了尝试链接到包含评论的页面的 id="comments" 部分。这是我的链接代码：

```
<?php echo $this->Html->link($post['Post']['total_comments'].' comments', array('controller' => 'posts', 'action' => 'view', $post['Post']['slug'].'#comments'),array('class' => 'comments-icon')); ?> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T07:48:35.043

试试这个：

```
echo $this->Html->link($post['Post']['total_comments'].' comments', array(
       'controller' => 'posts', 
       'action' => 'view', 
       $post['Post']['slug'], 
       '#' => 'comments' //Or #comments only without key
      ), array('class' => 'comments-icon')); 
```

# google-maps-api-3 - 使用 Google 地图 API 计算距离并在 javascript 和 C# 之间传递值

> ID：12337349
> 
> 赞同：0
> 
> 时间：2012-09-09T07:42:22.580
> 
> 标签：google-maps-api-3, distance

我是第一次使用谷歌地图 API，因此遇到的困难很少，需要帮助。我需要找到几个点之间的距离并将它们保存起来以备后用。以下是我面临的确切情况和问题。

我正在使用必须找到距离的纬度、经度数据。

**设想：**

*   查找点 A 和点 1、2、3 之间的距离。
*   查找点 B 和点 1、2、3 之间的距离。
*   查找点 C 和点 1、2、3 之间的距离。

我在 C# 代码中需要这个距离，目前我的实现如下 Javascript，它调用 Google Map API 驻留在 aspx 中。我使用下面的代码从 c# 调用这个 javascript

```
ClientScriptManager cs = Page.ClientScript;
cs.RegisterStartupScript(this.GetType(), "ValError", "testDistance(lat1,long1,lat2,long2)", true); 
```

我的 testDistance() 方法是用 javascript 编写的，它给了我正确的道路距离。

**问题：** 在服务器端恢复距离。我正在使用隐藏变量来保存距离并将其返回服务器端，但问题是，计算距离的调用必须在 c# 的 for 循环中执行，因为要计算和保存各种距离。

但我无法这样做，因为隐藏变量仅在第一次调用时设置，而在后续调用中派生的所有距离值都将丢失。

在javascript中，一旦我获得距离，我将其保存到如下隐藏值。

```
var hiddist= document.getElementById("hidDistance");
hiddist.value=hiddist.value+distance; 
```

请帮助并建议如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T23:28:07.170

我知道你在这方面的挣扎。我总是使用 jquery ajax post 来调用我在 C# 项目中拥有的 web 服务，以将数据从客户端传递回代码隐藏。请查看此网页，这显示了如何执行此操作的一个很好的示例，但可能有数百个。从我所见，这可能是处理这种情况的更好方法之一，这也是我创建所有谷歌地图页面的方式。

[http://dotnetguts.blogspot.com/2012/01/jquery-ajax-examples-by-calling-aspnet.html](http://dotnetguts.blogspot.com/2012/01/jquery-ajax-examples-by-calling-aspnet.html)

我要注意的另一件事是，我通常在代码隐藏中创建类，然后将它们全部连接在一起。（又名一个类的多个类，也许一个类是一个类的列表）然后当我通过类似的东西将它们传递给客户端时。：

```
return parentClass.toArray(); 
```

执行上述操作确实可以让您在客户端和代码隐藏之间处理/传递更多数据，并且以更统一的方式执行此操作，而不是传递十亿个变量的字符串。（附带说明一下，您实际上可以通过这种方式在客户端和代码隐藏之间传递太多数据，我遇到过这种情况，但我现在不用担心）HTH

# android - Android注入事件权限不起作用

> ID：12337351
> 
> 赞同：0
> 
> 时间：2012-09-09T07:42:41.743
> 
> 标签：android, root

我有`android.permission.INJECT_EVENTS`，`Manifest.xml`但我不能用`TouchEventExec()`。

我想我可以用 root 命令来做，但我不知道 root 命令`TouchEventExec()`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T11:02:03.080

`INJECT_EVENTS`出于明显的安全原因，普通的 SDK 应用程序无法持有该权限。您的应用程序必须使用与固件签名相同的签名密钥进行签名，这仅在您创建自己的固件时才实用。

# javascript - jQuery中的文本没有改变

> ID：12337355
> 
> 赞同：0
> 
> 时间：2012-09-09T07:43:09.433
> 
> 标签：javascript, jquery, html-table

我似乎在以下代码中做错了什么：http: [//jsfiddle.net/yunowork/qKj6b/1/](http://jsfiddle.net/yunowork/qKj6b/1/)

单击下一步时，跨度内的文本`.hiddentext`应显示在`.showtext`顶部的跨度中，并与右侧的 Race (Rn) 相对应。例如，当 R3 突出显示时，`.hiddentext`“Race 3
Oregon 14:30”的内容应显示在跨度内`.showtext.`

这是我犯错误的地方：

```
$('.showtext').text($('.hiddentext').first('td:first').text()); 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:54:06.983

让我们从简单的开始：

# 你的问题：

```
$('.showtext').text($('.hiddentext').first('td:first').text()); 
```

你在说，抓住所有`.hiddentext`，选择第一个有一个`td`......女巫不是你在代码中拥有的，你有，包含隐藏文本的td......所以，反过来。

![在此处输入图像描述](../Images/c7455851867ced4a2c2b48a3ad0dda6c.png)

您要做的只是获取当前的 NEXT td 并获取 hiddentext，因此，只需更改为：

```
$('.showtext').text($nextCol.find('.hiddentext').text()); 
```

现在，你能看到`<br/>`没有正确渲染吗？那是因为你正在设置`text`属性，你应该设置`html`属性。

![在此处输入图像描述](../Images/4f2c8ba14f9bbfe41f5718570ce66db5.png)

最终的代码应该是这样的：

```
$('.showtext').html($nextCol.find('.hiddentext').html()); 
```

现场示例：http: [//jsfiddle.net/qKj6b/8/](http://jsfiddle.net/qKj6b/8/)

![在此处输入图像描述](../Images/c8565d4b2452e310f637723d3047b962.png)

# 你的代码：

每次你需要有占位符来为上下文提供一些数据时，请不要使用 HTML TAGS 来保存这些值并隐藏它们......利用`data-`属性，女巫是 HTML5 兼容，并且在任何浏览器，即使它不支持 HTML5，例如 IE6。

您的表定义 ( `td`) 目前是：

```
<td class="visible" id="r2">
    <span class="hiddentext">Race 2<br />Santa Fe 12:00</span>
    <strong><a href="#" title="Race number 1">R2</a></strong>
</td> 
```

应该是这样的：

```
<td class="visible" id="r2" data-text="Race 2<br />Santa Fe 12:00">
    <a href="#" title="Race number 1">R2</a>
</td> 
```

女巫更容易阅读，从你的javascript代码中，你可以很容易地得到这个：

```
var hiddenText = $nextCol.data("text"); 
```

# 您的代码（第 2 部分）：

这个很容易知道

> 每次你重复自己，你都做错了

您拥有 Next 和 Prev 的方法几乎完全相同，因此，您正在重复所有内容，为此，您应该重构代码并仅使用一种简单的方法，这样，将来的任何更改都只会发生在一个地方，并且只有地方。

```
$(".next").click(function(e){
    e.preventDefault();
    var $nextCol = $('.highlighted').next('td');
    MoveCursor($nextCol, 'next');
});

$(".previous").click(function(e){
    e.preventDefault();
    var $prevCol = $('.highlighted').prev('td');
    MoveCursor($prevCol, 'prev');
});

function MoveCursor(col, side) {

    var maxCol = 8;

    if((side === 'next' && col.length != 0) || 
       (side == 'prev' && col.length != 0 && col.index() >= maxCol)) {

        $('.highlighted').removeClass("highlighted");
        col.addClass("highlighted");

        // show current title
        $('.showtext').html(col.data('text'));

        if (col.hasClass("invisible")) {
            col.removeClass("invisible");        
            col.addClass("visible");

            var $toRem;

            if(side == 'prev')
                $toRem = col.next('td').next('td').next('td').next('td').next('td').next('td');
            else
                $toRem = $nextCol.prev('td').prev('td').prev('td').prev('td').prev('td').prev('td');

            $toRem.removeClass("visible");
            $toRem.addClass("invisible");
        }
    }
} 
```

现场示例：http: [//jsfiddle.net/qKj6b/22/](http://jsfiddle.net/qKj6b/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T07:49:24.117

它应该是

```
$('.showtext').html($('.highlighted .hiddentext').html()); 
```

与上一个链接类似...

甚至更好，感谢@balexandre：

```
$('.showtext').html($nextCol.find('.hiddentext').html());
$('.showtext').html($prevCol.find('.hiddentext').html()); 
```

[小提琴](http://jsfiddle.net/qKj6b/6/)

更新以匹配@balexandre 提示：[Fiddle 2](http://jsfiddle.net/qKj6b/21/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T07:49:48.177

请执行下列操作：

```
 var $currCol = $('.highlighted'); //to get the current column
    $('.race strong').text($currCol.closest('.highlighted').first('td:first').text()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T07:52:56.200

试试这个（两者都一样）

```
$('.showtext').html($currCol.find('span.hiddentext').html()); 
```

[**工作示例**](http://jsfiddle.net/qKj6b/13/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T07:58:58.613

`.hiddentext`类选择所有跨度，并且`first()`总是会返回第一个`td`。只要确保您`.hiddentext`从当前突出显示的列中进行选择，您就可以开始了。

`$('.showtext').text($('.highlighted .hiddentext').first('td:first').text());`

# datatables - 数据未从 Datatables 传递到服务器

> ID：12337357
> 
> 赞同：0
> 
> 时间：2012-09-09T07:44:32.877
> 
> 标签：datatables, grails-plugin

我有一个非常简单的数据表配置，

```
 $("#providerTable").dataTable({
        "bLengthChange":false,
        "bAutoWidth":false,
        "bProcessing": true,
        "bServerSide":true,
        "sAjaxSource":"${createLink(controller: 'authorization', action: 'fetchProvider')}" ,
        "bInfo": true,
        "fnServerParams": function ( aoData ) {
            aoData.push( { "name": "more_data", "value": "my_value" } );
        },
        "fnInfoCallback": function( oSettings, iStart, iEnd, iMax, iTotal, sPre ) {
            return ("Showing " + iStart +" to "+ iEnd + " of " + iTotal);
        }
    }); 
```

一切正常，除了`more_data`应该传递给服务器的变量没有传递。我在服务器端使用 Grails，来自 Ajax 请求的快速参数转储给出以下结果：

```
wrappedMap=[iSortCol_0:0, sSearch_2:, bRegex:false, sSearch_3:, sSearch_0:, sSearch_1:, sSearch:, iSortingCols:1, mDataProp_0:0, mDataProp_1:1, mDataProp_2:2, mDataProp_3:3, mDataProp_4:4, bSortable_2:true, bSortable_1:true, bSortable_4:true, bSortable_3:true, bSortable_0:true, sColumns:, iColumns:5, _:1347175565036, sSearch_4:, bRegex_2:false, bSearchable_2:true, bSearchable_1:true, bRegex_3:false, bSearchable_0:true, bRegex_4:false, sSortDir_0:asc, iDisplayStart:0, iDisplayLength:10, sEcho:1, bSearchable_4:true, bRegex_0:false, bSearchable_3:true, bRegex_1:false, action:fetchProvider, controller:authorization] 
```

看，没有变量名的迹象`more_data`。除了变量之外，所有其他默认数据表变量以及控制器和操作名称都将被传递`more_data`。我在这里会犯什么错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:04:13.317

> fnServerParams 是一个新的 1.8.2 接口。如果您有 1.8.1 或更早版本，则没有 fnServerParams

[关于 fnServerParams 的问题](http://datatables.net/forums/discussion/6600/question-about-fnserverparams/p1)

升级到*1.8.2*或更高版本以使用`fnServerParams`

# android - 我需要哪个上下文？

> ID：12337359
> 
> 赞同：0
> 
> 时间：2012-09-09T07:44:47.470
> 
> 标签：android, android-intent, android-context

我有课：

```
PendingIntent pendingIntent;
public class xxx{

public void updateObjects(){

deleteIntents(Context context, int x);
(...)
for(...){
    //Update each object ofdb4o with the new object value's.
    (...)
    doIntents(context,mil,obj);
    }
            (...)
    }

public void doIntents(Context context, long mil, ClassObjects obj){
(...)
pendingIntent = PendingIntent.getBroadcast(context, obj.getId(), intent, PendingIntent.FLAG_UPDATE_CURRENT);
(...)
}
}

public void deleteIntents(Context context, int x){
            intent = new Intent(context, OnAlarmReceiver.class);
            for(int i=1;i<x;i++){
                pendingIntent = PendingIntent.getBroadcast(context, i, intent, PendingIntent.FLAG_UPDATE_CURRENT);
                alarmManager.cancel(pendingIntent);
            }
            Log.d(TAG,"intents removed");
        } 
```

工作没问题..但我需要`deleteIntents(Context context, int x)`从主活动中使用..有一个按钮：

```
xxx.deleteIntents(getApplicationContext(),x); 
```

但不起作用..我认为我的上下文有问题，但我不知道为什么..

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:08:20.587

每一个`Activity`都是一个`Context`对象。

所以在`Activity`类里面只使用“this”指针而不是`getApplicationContext()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:45:12.783

对不起，

我之前忘记实例化 AlarmManager：

```
public void deleteIntents(Context context, int x){
            alarmManager = (AlarmManager) context.getSystemService (Service.ALARM_SERVICE);
            intent = new Intent(context, OnAlarmReceiver.class);
            for(int i=1;i<x;i++){
                pendingIntent = PendingIntent.getBroadcast(context, i, intent, PendingIntent.FLAG_UPDATE_CURRENT);
                alarmManager.cancel(pendingIntent);
            }
            Log.d(TAG,"intents removed");
        } 
```

现在工作！谢谢你俩！！！！！

# javascript - Javascript 波浪号和补码

> ID：12337360
> 
> 赞同：12
> 
> 时间：2012-09-09T07:45:25.193
> 
> 标签：javascript, bit-manipulation

[二进制补码方法](http://en.wikipedia.org/wiki/Two%27s_complement)- 生成`-(x + 1)`.

例如，当 JavaScript 遇到波浪号时，他使用此方法：

```
~5 = -(5+1) = -6. 
```

很好 - 让我们更深入。

现在让我们谈谈二进制补码方法。

```
5        = 0000 0101
Flip     = 1111 1010
add one  = 1111 1011 
```

`1111 1011`也是`-5`。_

如何 ？

再次：翻转：

```
0000 0100 
```

添加一个：

```
0000 0101 
```

就这样`-5`。

那么这是如何解决的 `~5=-6`呢？

这`-6`是从哪里来的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-09T07:53:39.120

首先，你需要意识到这`~`是按位翻转运算符，它与否定运算符不同`-`。`~`只进行按位翻转，但取反运算符进行`-`按位翻转并加一（对于整数）。

正如您所解释的，如果您想从一个正数`n`转到`-n`使用两个补码方法，您可以按位翻转/而不是 n 并加 1。 ~n 只是按位不意味着那个`~n=-n-1`。

例如：

```
5               = 0000 0101
Flipped (~5)    = 1111 1010 
```

那么，`1111 1010`代表哪个数字呢？由于第一个数字是 1，我们知道它是负值。要找到哪个值，请执行

```
-(flip(1111 1010) + 1) =
-(0000 0101 + 1)
-(0000 0110) =
-6 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-09T07:55:06.133

`~5 = -(5 + 1) = -6`

到目前为止，一切都很好。但是，`~`不是二进制补码，而是二进制反转运算符。

```
5     = 0000 0101
flip  : 1111 1010 
```

这是-6

这说明清楚了吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T08:00:36.367

`~`是位非运算符（仅反转其操作数的位）。

对于正数`n`，

```
~n + 1 = -n 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-22T00:18:05.550

> [二进制补码方法](http://en.wikipedia.org/wiki/Two%27s_complement)- 生成`-(x + 1)`.

简而言之，二进制补码不会生成`-(x + 1)`。一个的补码（即〜/按位非/翻转位）。

二的补码（翻转位，加 1）是我们用来以纯位表示负数（并从中派生）的（逆）操作/编码[`-0`。](https://en.wikipedia.org/wiki/Signed_zero#Representations)`x`将生成的二进制补码`-x`。

`~5`无非是将位翻转`0000 0101`到`1111 1010`.

为了确定 的值`1111 1010`，我们返回`0000 0101`并添加 1: `0000 0110 (-6)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-10T09:50:35.830

波浪号(~) -

它只是翻转（n）。即〜5 =翻转（5）。在 java 脚本中，数字始终是 64 位签名的。让我们以 8 位作为参考，

```
 5==> 0000 0101 
~5 ==> filp(0000 0101)
~5 ==> 1111 1010 ==> -6 
```

2' 补 -

它是 filp(n) + 1。

```
5 ==> 0000 0101
2's complement of 5 ==> flip(0000 0101) + 0000 0001
2's complement of 5 ==> 1111 1010 + 000 0001
2's complement of 5 ==> 1111 1011 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-09T04:01:50.650

5 = 0000 0101

翻转 = 1111 1010

转换分解 1111 1010

```
0 x 2^0 = 0
1 x 2^1 = 2
0 x 2^2 = 0
1 x 2^3 = 8
1 x 2^4 = 16
1 x 2^5 = 32
1 x 2^6 = 64
- 1 x 2^7 = -128 
```

所以-128+64+32+16+8+0+2+0 = -6

# iphone - 在 xib 中使用按钮创建视图

> ID：12337361
> 
> 赞同：1
> 
> 时间：2012-09-09T07:45:49.713
> 
> 标签：iphone, ios, view, uibutton, xib

我想在 xib 中设计一个视图并加载它。

*（这将用作 tableView 的页脚视图，而我目前没有用于具有 tableView 的 viewController 的 xib。）*
*假设我将从多个地方使用此视图。（此 footerView 可以附加到表视图 1、表视图 2 等）*

xib 包含一个视图，此视图包含一个 UIButton

我想将 UIButton 的 touchUpInside 事件连接到某些东西（文件的所有者？，我在这里迷路了）

我应该怎么做才能使用这个 UIButton？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:13:49.120

您可能不知道这一点，但每个表格都有一个页眉和一个页脚（除了带有页眉和页脚的部分），您可以`UIView`直接在界面生成器中将新表格拖到表格视图的底部或顶部。所以像这样你真的不需要一个单独的 nib 文件。

一个你添加了 UIView 你可以你的按钮和其他控件。完成后，您只需 CTRL 从按钮拖动到您的`UIViewController`子类以创建`IBAction`按钮。

插图：

```
|-------- Table header --------|
|------ Section 1 header ------|
|--- Cell 1 for Section 1 -----|
|--- Cell 2 for Section 1 -----|
|--- Cell 3 for Section 1 -----|
|------ Section 1 footer ------|
|------ Section 1 header ------|
|--- Cell 1 for Section 2 -----|
|--- Cell 2 for Section 2 -----|
|--- Cell 3 for Section 2 -----|
|------ Section 1 footer ------|
|-------- Table footer --------| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T09:03:33.180

你的问题有歧义...

你有很多表视图，你想为每个表分配具有相同功能的相同页脚？！

- 如果您有一个没有笔尖的 viewController 并且后来决定在其上附加一个笔尖，您需要做一件简单的事情（还有另一种方法），通过“文件所有者”转到“身份检查器”，然后在自定义类下编写视图控制器的名称..

然后回到你的代码用 nibName 初始化这个 viewcontroller 并将其添加为委托方法的页脚

```
-(UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

我以前没有尝试过，但是如果是这种情况，我会以编程方式进行

如果您添加了一些代码，它将有所帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T07:52:37.753

使用下面的链接添加 UIButton。您需要做的就是将一个按钮与文件所有者连接起来，然后您需要在文件所有者中定义操作并将其与 UIButton 连接起来。

[http://www.servin.com/iphone/iPhone-Buttons.html](http://www.servin.com/iphone/iPhone-Buttons.html)

[http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk-interface-builder-basic-training/](http://mobile.tutsplus.com/tutorials/iphone/iphone-sdk-interface-builder-basic-training/)

# google-app-engine - Google App Engine - java.security.AccessControlException？

> ID：12337365
> 
> 赞同：1
> 
> 时间：2012-09-09T07:46:14.157
> 
> 标签：google-app-engine, properties, file-permissions, mechanicalturk, accesscontrolexception

每当我尝试访问位于 war/WEB_INF 文件夹中的文件时，我都会遇到这个问题。我知道 GAE 使用码头，对于码头，我们需要在 .policy 文件中设置一些权限，但我也无法找到该文件。这是我的堆栈跟踪：-

```
java.security.AccessControlException: access denied (java.io.FilePermission /war/WEB_INF/mturktest.properties read)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
at java.security.AccessController.checkPermission(AccessController.java:546)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:283)
at java.lang.SecurityManager.checkRead(SecurityManager.java:871)
at java.io.FileInputStream.<init>(FileInputStream.java:113)
at com.amazonaws.mturk.util.PropertiesClientConfig.<init>(PropertiesClientConfig.java:96)
at com.varundroid.testing.SiteCategory.<init>(SiteCategory.java:51)
at com.varundroid.testing.MTurkProjectServlet.doGet(MTurkProjectServlet.java:12)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我需要为 ex 执行什么额外的操作吗？在 appengine-web.xml 中添加一些行以使 GAE 能够读取此文件？

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T11:37:29.287

如果您可以访问打开文件的代码，GAE 中获取属性文件的最简单方法就是将其移动到 WEB-INF/classes 并使用它`getResourceAsStream`来获取`InputStream`它；

```
this.getClass().getClassLoader().getResourceAsStream("/mturktest.properties"); 
```

[此处描述的使用 getRealPath()](https://stackoverflow.com/a/4342095/477878)的其他选项可能会为您提供文件 I/O 使用的正确路径，但我从未使用 GAE 亲自测试过它们，因此我知道它们可以工作。

# php - PHP 中的内存缓存

> ID：12337368
> 
> 赞同：2
> 
> 时间：2012-09-09T07:47:01.760
> 
> 标签：php, azure, memcached

我正在 Azure 上建立一个 wordpress 站点。Wordpress 通过某些插件支持 Memcache，但我不确定 Azure 是否支持使用 PHP 的 memcache？我只在.NET上找到了[这篇](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/ "文章")关于它的文章
如果Azure不支持使用PHP的memcache，它是否支持其他类型的缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:54:41.240

Azure 看起来确实支持它（我自己从未尝试过，不是 PHP 人），请查看 Brian Swan 的这篇博客文章 [PHP、Memcache 和 Windows Azure 缓存](http://blogs.msdn.com/b/silverlining/archive/2012/07/03/php-memcache-and-windows-azure-caching.aspx)。

*注意 Azure 缓存现在支持 Memcache 协议。

高温高压

# silverlight - 是 Silverlight、Windows Phone 和 Metro 是否支持？

> ID：12337378
> 
> 赞同：5
> 
> 时间：2012-09-09T07:49:11.180
> 
> 标签：silverlight, clr, assembly-resolution, portable-class-library

`<bindingRedirect />`在完整的 .NET Framework 之外是否受支持？例如，普通的 .NET 应用程序（in`app.config`或`web.config`）支持以下内容：

```
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="PostSharp"  publicKeyToken="b13fd38b8f9c99d7" culture="neutral" />
        <bindingRedirect oldVersion="3.0.0.0-3.1.1.1" newVersion="3.1.1.1"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

如果不支持，如何解决间接程序集引用的问题？也就是说，如果组件 A 引用组件 B 和 C，并且 B 引用 D v1.0，C 引用 D v1.1，如果我们只发布 D v1.1，我们如何确保 B 找到它的依赖关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:09:49.943

Silverlight、Windows Phone 或 Windows 应用商店应用程序不支持无绑定重定向。但是，这是因为它们不是必需的。

假设我们在这里只讨论非平台程序集，基本上所有这三个平台都具有相似的绑定策略，因为它们将允许程序集的更高版本满足具有相同名称的早期版本。

在您的特定示例中，这意味着组件 B 将自动获取版本 D v1.1。

# jquery - 悬停一个 DIV 类和其他 5 个 DIV 类更改透明

> ID：12337379
> 
> 赞同：0
> 
> 时间：2012-09-09T07:49:13.353
> 
> 标签：jquery, css, hover

我已经为此苦苦挣扎了几天。我的主页共有 6 个 DIV 类，我想做一个简单的效果，当其中一个 DIV 类悬停时，其他 5 个 DIV 类将变得略微透明。

我尝试了几种方法，但似乎没有用。谁能帮我这个？多谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T07:55:00.300

尝试：

```
$(".test").hover(function() {
    $(".test").not($(this)).css({"opacity" : 0.1});
},
 function() {
     $(".test").css({"opacity" : 1});
}); 
```

参见：[jsFiddle](http://jsfiddle.net/agZMc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T07:52:32.537

更新：我第一次误解了你的问题。改进的答案。

我不知道你确切的 html 设置，但这样的事情应该可以解决问题：

```
jQuery(".myDivClass").mouseenter(function(){
    jQuery(this).siblings().css({"opacity": 0.7});
}).mouseleave(function(){
    jQuery(this).siblings().css({"opacity": 1});
});​ 
```

[在这里工作小提琴](http://jsfiddle.net/xbRwv/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:12:57.103

你可以尝试类似的东西；

```
$(".mydiv").mouseenter(function() {
  var currentId = $(this).attr('id');
$("div").not(this).css("background-color", "#7EA9D5");
  }).mouseleave(function() {
$(".mydiv").css("background-color", "#06C");
  }); 
```

您可以使用单个类和不同的 ID。给透明颜色一个值（或者可以使用 CSS `opacity`）***[这](http://jsfiddle.net/blasteralfred/uGBa4/1/)***是一个有效的 Live 演示。（我这里用了颜色）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T08:32:46.800

您应该仅使用 CSS 获得更好的性能：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/VeWM3/)

```
.container > div {
    background: #0FF;
}
.container:hover > div {
    opacity: 0.5;
    filter: alpha(opacity=50);
}
.container:hover > div:hover {
    opacity: 1;
    filter: alpha(opacity=100);
} 
```

# java - 检查数组列表大小

> ID：12337384
> 
> 赞同：0
> 
> 时间：2012-09-09T07:49:50.127
> 
> 标签：java

如果未初始化数组列表，如何检查 java 中的 sizeof 数组列表而不会从编译器中获取错误异常。我尝试了以下方法，但它不起作用。我收到了这条消息：线程“main”java.lang.IndexOutOfBoundsException中的异常：索引：1，大小：1

```
ArrayList<String> str = new ArrayList<>();
if (str.size()>0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:57:09.493

您发布的代码中没有任何内容会引发`IndexOutOfBoundsException`. `str.get(0)`我假设您之前没有进行尺寸检查就打电话了？

无论如何，您的代码很好，即您应该能够将其扩展为执行以下操作：

```
List<String> someStrings = new ArrayList<String>();
...
if (someStrings.size() > 0) {
    System.out.println("First element of list is: " + someStrings.get(0));
} else {
    System.out.println("List is empty");
} 
```

但是，为了清洁，我建议`if (!someStrings.isEmpty())`改用它，它检查与`if (someStrings.size() > 0)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:56:59.287

初始化是指对象是否已分配给引用

用代码

```
List<String> str; 
```

如果你调用 str.size() 它会抛出一个空指针异常，因为你没有给这个列表引用分配一个对象。

要分配参考，您可以这样做

```
List<String> str = new Arraylist<String>(); 
```

str 现在指向一个数组列表对象。

您现在可以致电

```
str.isEmpty() 
```

查看列表是否有任何内容。

列表是[从零开始的](http://en.wikipedia.org/wiki/Zero-based_numbering)，所以如果你调用 str.get(0) 那么你会得到一个 IndexOutOfBounds 异常。您无法获取第一个元素（索引 0），因为那里没有任何内容

如果你添加一个元素

```
str.add("hello") 
```

然后你可以打电话

```
str.get(0) 
```

这将返回“你好”

如果您再次调用 str.get(1)，您将再次获得 IndexOutOfBound，因为索引 1 实际上是数组列表中的第二个元素，并且它不存在。

# java - Java C/S 应用程序预加载器（如 Ajax）

> ID：12337387
> 
> 赞同：1
> 
> 时间：2012-09-09T07:50:07.320
> 
> 标签：java, swing, splash-screen, preloader

我想在 Java 桌面应用程序（我使用 Swing）中实现“等待”预加载消息，就像 Ajax/Flash 开发人员在 Web 应用程序中使用的预加载器一样。

我的应用程序使用客户端/服务器架构，由于服务器的响应时间，从一个窗口移动到另一个窗口时可能会有一些延迟，但是**在加载所有内容之前，用户应该无法做任何事情**。

**这样做的最佳做法是什么？** 我有两个想法，但我认为应该有更好的方法来处理这个问题：

1个想法）阻塞事件调度程序线程（这甚至可能吗？）

另一种想法）隐藏整个JFrame，直到与服务器的消息交换完成并且内容准备好，显示另一个“等待”JFrame，但我不太喜欢这个解决方案，因为主JFrame会在用户期间保持闪烁开/关相互作用

编辑：感谢一些提示，我想通了，但我不能给任何人答案（实际上没有人回答，我只有评论！），我应该投票删除这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T19:42:52.257

我使用 JDialog 解决了这个问题，使用 setVisible(true/false) 并拒绝用户通过按下 X 按钮关闭对话框，使用 setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);

```
public class PreloaderDialog extends JDialog {              

        publicPreloaderDialog() {

                initialize();
        }

        public final void initialize() {

                JLabel waittext = new JLabel("Wait, please");    
                add(waittext);

                setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
                setModalityType(ModalityType.APPLICATION_MODAL);

                setTitle("Loading in progress");

                setLocationRelativeTo(null);
                setSize(300, 120);
        }

        public void hide() {

           setVisible(false);                               
        }

        public void show() {                                       

            setVisible(true);                               
        }

} 
```

# node.js - MongoDB：删除唯一约束

> ID：12337388
> 
> 赞同：22
> 
> 时间：2012-09-09T07:50:09.090
> 
> 标签：node.js, mongodb, database-schema

我正在尝试“使用带有 Express 和 Mongoose 的 Node.js 开发 RESTful API”示例，但遇到了 MongoDB Schema 的问题：

```
POST: 
{ title: 'My Awesome T-shirt 2',
  description: 'All about the details. Of course it\'s black.',
  style: '12345' }
{ [MongoError: E11000 duplicate key error index: ecomm_database.products.$style_1  dup key: { : "12345" }]
  name: 'MongoError',
  err: 'E11000 duplicate key error index: ecomm_database.products.$style_1  dup key: { : "12345" }', 
```

架构定义中有一个独特的约束：

```
var Product = new Schema({  
    title: { type: String, required: true },  
    description: { type: String, required: true },  
    style: { type: String, unique: true },  
    modified: { type: Date, default: Date.now } }); 
```

我该如何摆脱它？当我删除 unique: true 并重新启动应用程序时，架构不会更新。

mongodb 如何处理模式的“更改”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-09T07:53:46.563

“mongodb如何处理模式的“改变”？

MongoDB 是*无模式的*

唯一强制执行唯一性的是在索引级别上，您可以在其中定义具有唯一标准的集合上的索引。因此，您可能希望删除相关索引并在必要时重新创建它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-01-18T09:31:42.083

我希望这会有所帮助。

```
db.collection_name.getIndexes() 
```

返回一个数组，其中包含标识和描述集合上现有索引的文档列表。现在从列表中找到您的索引名称，然后删除该索引，如下所示：

```
db.users.dropIndex("your_index_name_here") 
```

这是一个例子：

```
db.product.dropIndex({ style: 1 }) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-09T10:11:20.290

当您向 mongoose 模式添加唯一约束时，将在同一键上创建索引。例如：如果您有一个名为的模式键，`style`那么一个索引将被创建为`style_1`. 即使您修改架构，已创建的索引仍将存在。您需要删除此索引才能重置唯一约束。

如果您安装了 mongoDB Compass，那么您可以转到 collection->indexes 并删除它。Atlas Web 界面上也提供相同的界面。就我而言，我在 key 上有一个索引`url`，我已将其删除。

[![在此处输入图像描述](../Images/65076431de1da566f02173bed2368806.png)](https://i.stack.imgur.com/OTxqR.png)

# ruby-on-rails - Rails：在验证期间比较旧值和新值以进行编辑

> ID：12337398
> 
> 赞同：8
> 
> 时间：2012-09-09T07:51:55.813
> 
> 标签：ruby-on-rails

我想创建一个自定义验证函数，仅当当前字段在数据库中不为空时，才允许将字段保存为空/nil。如何在验证函数中访问数据库值（旧值）？我可以使用 self.name_of_field 访问新值。

这就是我现在所拥有的

```
validate :image_remote_url_change
  def image_remote_url_change
    if self.image_remote_url.blank? and self.image_remote_url_changed?
      errors.add(:field, "can't be blank once set")
      return false
    end
  end 
```

现在，如果我尝试编辑现有对象，它不会接受新的空值，但是在创建新对象时，即使从未设置旧值，它也会说“一旦设置就不能为空”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T08:09:58.683

您可以利用[ActiveModel::Dirty](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)。在您的自定义验证功能中，您可以检查字段是否为空白以及是否已更改：

```
validate :custom_validation_function

def custom_validation_function
  if self.field.blank? and self.field_changed?
      errors.add(:field, "can't be blank once set")
      return false
  end
end 
```

# android - 如何在 Android 的 Fragment.onPause() 中访问当前的片段事务？

> ID：12337405
> 
> 赞同：0
> 
> 时间：2012-09-09T07:53:34.593
> 
> 标签：android, android-fragments, android-activity

我的片段需要在其 onPause() 方法中区分是否将被替换或删除。如果我开始一个新事务来替换/删除它，或者用户是否要返回后台堆栈。任何想法如何解决它？

# php - 如何互连 Node.js 应用程序服务器和 LAMP 堆栈？

> ID：12337407
> 
> 赞同：1
> 
> 时间：2012-09-09T07:53:40.970
> 
> 标签：php, mysql, apache, node.js, lamp

我当前的 Web 应用程序需要 LAMP 堆栈和 Node.js WebSocket 服务器才能运行。MySQL 数据库和 Node.js 网络服务器之间的交互是绝对关键的。

我怎样才能让他们交流？我可能会在不同的 AWS 实例上托管 LAMP 堆栈和 Node.js 服务器。

非常感谢洞察力，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:15:32.647

Nodejs 有许多可以连接 MySQL 数据库的模块。[node-mysql](https://github.com/felixge/node-mysql)是比较流行的一种。

您需要指定 LAMP 堆栈的远程地址，而不是使用默认的 localhost。

只要您的 LAMP 堆栈和 nodejs 服务器都位于同一可用区，您就不应该有任何重大的性能问题。

# java - Java Jackson JSON 解析成 Map

> ID：12337409
> 
> 赞同：2
> 
> 时间：2012-09-09T07:53:56.123
> 
> 标签：java, json, jackson

我需要将 JSON 解析的映射传递到具有以下签名的某个方法中：

```
QUEUE.sendMsg(Map<String, String> data); 
```

不幸的是，我无法控制上述方法，杰克逊给了我在`Map<String, Object>`.

我需要一个`Map<String, String>`地方

1.  对于原始 JSON 类型，而不是 Integer、Long、Boolean，我想要它的 toString() 转换值。
2.  对于 List/Map 等复杂的 JSON 类型，将结果以原生 JSON 格式存储在 String 中。

例如，如果 JSON 输入是

```
{
  "name" = "John",
  "marked" = false,
  "age" = 30,
  "tags" = [ "work", "personal" ],
  "meta" = { "k1" : "v1", "k2" : "v2" },
} 
```

我想要`Map<String, String>`一个

```
map.get("name") returns "John",
map.get("marked") returns "false",
map.get("age") returns "30",
map.get("tags") returns "[ \"work\", \"personal\" ]",
map.get("meta") returns "{ \"k1\" : \"v1\", \"k2\" : \"v2\" }" 
```

有没有办法实现这个目标？

不幸的是，我几乎是 Java 新手，并且对 Jackson 没有先验知识（我必须使用 Jackson 来解决这个问题）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:29:24.173

是的，只要您确保传递 FULL 类型信息，隐式转换就应该起作用。所以像：

```
Map<String,String> map = mapper.readValue(jsonSource, new TypeReference<Map<String,String>>() { }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:02:54.520

像这样的东西应该工作......

```
final Map<String, Object> input = ...;
final Map<String, String> output = new Map<>(input.size());
final StringWriter writer = new StringWriter();
final StringBuffer buf = writer.getBuffer();
for (final Map.Entry<String, Object> entry : input.entrySet()) {
  try (final JsonGenerator gen = JsonFactory.createJsonGenerator(writer)) {
    gen.writeObject(entry.getValue());
  }
  output.put(entry.getKey(), buf.toString());
  buf.setLength(0);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:36:00.373

我想你正在寻找`keyAs`. 请查看[杰克逊文档](http://jackson.codehaus.org/1.5.7/javadoc/org/codehaus/jackson/map/annotate/JsonDeserialize.html)以获取更多详细信息

# javascript - 我可以让我的 Ajax 调用导致出现“进行中”光标吗？

> ID：12337419
> 
> 赞同：1
> 
> 时间：2012-09-09T07:55:10.950
> 
> 标签：javascript, jquery, html, css, ajax

我有以下代码：

```
 $("header")
    .on({
        ajaxStart: function () {
            $(this).addClass("ajax-loading");
        },
        ajaxStop: function () {
            $(this).removeClass("ajax-loading");
        }
    }); 
```

有没有一种方法可以更改此设置，以便在 Ajax 调用开始时光标更改形状以指示操作正在进行中并在调用停止后光标返回默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:27:01.547

尝试;

```
$("header")
    .on({
        ajaxStart: function () {
            $(this).css( 'cursor', 'progress' );
        },
        ajaxStop: function () {
            $(this).css( 'cursor', 'default' );
        }
    }); 
```

将光标移至标题上方的繁忙动画。你可以试试

```
$("header")
    .on({
        ajaxStart: function () {
            $('body').css( 'cursor', 'progress' );
        },
        ajaxStop: function () {
            $('body').css( 'cursor', 'default' );
        }
    }); 
```

使光标移动到整个身体上的忙碌动画。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T07:56:58.030

您可以使用以下`beforeSend`参数：

```
$.ajax({
  beforeSend: function() { //function to do whatever you want to do; }
}); 
```

# android - 我在哪里可以学习如何调整网站以适应许多 Android 分辨率？

> ID：12337421
> 
> 赞同：0
> 
> 时间：2012-09-09T07:55:27.080
> 
> 标签：android, html, css, android-layout, mobile

基本上，我正在为安卓手机设计网站，但是，我发现这些手机有许多不同的分辨率。最大的问题是有些手机的高度是 800 像素，而其他手机只有 320 像素，哈哈。我假设我需要进行流畅的布局，但我仍然对如何让移动网站填满整个用户的屏幕并且如果它的 800 像素高与 320 像素高相比仍然看起来不错，我仍然感到困惑。

我做了一个移动网站，但意识到使用模拟器在不同的安卓设备上看起来完全是废话（在某些设备上看起来像一个小图标）。

我发现这个堆栈溢出问题类似于我要问的问题：[针对 Android 浏览器优化网站的提示？](https://stackoverflow.com/questions/548892/tips-for-optimizing-a-website-for-androids-browser)

该人说他使用 Meta 标签：HandheldFriendly 和视口，这对于考虑实际设备大小是有意义的，因此不会调整大小，但随后他提到了“CSS 媒体查询”。他给出了这个 CSS 媒体查询的例子：

```
@import url(style-screen.css) screen;
@import url(style-small.css) print, handheld;
@import url(style-large.css) screen and (min-width: 801px);
@import url(style-small.css) screen and (max-width: 800px); 
```

我假设这是针对不同的屏幕尺寸的，但我仍然不明白他在做什么。我一直在寻找几个小时试图找到教程来向我展示如何基本上做到这一点，但是移动设备太新了，我认为那里没有很多资源，或者我错过了它们。我看过 android 网站，但它似乎是针对应用程序开发人员的，他们只列出屏幕尺寸，但不知道如何让它们成为漂亮的网站来填满整个人的屏幕哈哈。

如果有人有任何教程或提示或链接，他们可以与我分享，以了解如何让移动网站填满整个手机（或靠近它），而不是使用我的移动网站在其上显示的小图标。谢谢。

（当然，我还想添加一些经过优化的漂亮移动图像，但也不确定它是如何工作的，那也会流畅吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:01:28.503

css3 和媒体查询适合您的需求；[这里](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)有一些信息

# oracle - 迁移到 11g 后的默认工作区

> ID：12337422
> 
> 赞同：6
> 
> 时间：2012-09-09T07:55:29.207
> 
> 标签：oracle, oracle11g, oracle-apex

我在本地机器上安装了 11g，并使用 dmp 文件导入了我的数据。现在我的应用程序工作正常，而且我可以使用 sql developer 连接到数据库而没有任何问题。

但是当我尝试使用 apex 登录时，我不知道在`workspace`字段中输入什么。我使用`INTERNAL`工作区`admin`作为用户名。但我找不到我的表和模式。

我去了工作区管理器，发现只有`INTERNAL`一个用户（管理员）在那里定义了工作区。

如何使用 apex 查看和管理现有表？（正如我上面所说，我可以使用 sql developer 来完成。但我想使用 apex 来完成）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:37:20.343

Apex 是一个应用程序开发环境，它恰好有一些用于管理模式对象的工具，但在此目的上不如 SQL Developer 强大或易于使用。

如果您真的想要，您可以以管理员身份登录并创建一个工作区，但我宁愿使用 SQL Developer，除非我实际上打算将 Apex 用于其主要目的，即构建应用程序。

# ruby-on-rails-3 - 在 Appengine 上使用 JRails - 有问题吗？

> ID：12337423
> 
> 赞同：1
> 
> 时间：2012-09-09T07:55:31.020
> 
> 标签：ruby-on-rails-3, google-app-engine, jrails

是否可以通过 Appengine 运行 JRails 应用程序？是否有任何经验/陷阱需要考虑？

或者有没有其他方法可以通过 appengine 运行 Rails 应用程序？现在 Appengine 还支持 Google Cloud SQL，因此应用程序可以使用 RDBMS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:24:39.263

我认为您可能会混淆[jrails](https://github.com/aaronchi/jrails)（曾经无处不在，但现在已不复存在的 gem，用于将 jquery 插入您的应用程序）和 jruby，[众所周知，它可以](http://code.google.com/p/appengine-jruby/)在 appengine 上运行

# php - ajaxSubmit 返回数据追加

> ID：12337425
> 
> 赞同：0
> 
> 时间：2012-09-09T07:55:41.883
> 
> 标签：php, jquery, ajax

我正在尝试使用 ajax 制作上传图片库。我正在使用 ajax 表单的 ajaxSubmit .. 这就是我正在做的

```
 $(this).ajaxSubmit({
                target: '#picture',
                success:  afterSuccess 
            }); 
```

但这所做的是它删除了 div 中以前的 html 并将其替换为新的返回数据。我想要的是将新图像与#picture div 中的先前数据一起附加。请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T07:58:05.177

使用`append`函数，`success: function(data) { $("#div").append(data); }`。

# php - PHP & KML 文件：如何解码 KML 文件中的 utf8 编码名称？

> ID：12337426
> 
> 赞同：2
> 
> 时间：2012-09-09T07:56:04.193
> 
> 标签：php, utf-8, kml, decode

我必须在 PHP 中解析 KML 文件。KML 文件中的地标名称采用 UTF8 编码，如下所示：

```
<name>xD0<U+1ED3>ng ThxE1p</name> 
```

应该是“Đồng Tháp”。如何在 PHP 中正确解析它？谢谢你的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:25:17.723

正如我所见，编码适用于 utf-16。不是 utf8 [http://www.fileformat.info/info/unicode/char/1ed3/index.htm](http://www.fileformat.info/info/unicode/char/1ed3/index.htm)

# java - java真的是平台独立的吗？

> ID：12337427
> 
> 赞同：3
> 
> 时间：2012-09-09T07:56:22.170
> 
> 标签：java, jvm, platform-independent

不同的操作系统/平台有不同版本的 JVM。这意味着开发它的人已经为主要操作系统制作了不同的解释器。如果今天有一个新的操作系统出现，java 也会在它上面工作吗？那么，当我们说平台独立时，我们是在限制 JVM 可用的平台，还是 Java 实际上是平台独立的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T08:04:25.910

你在这里混淆了几个不同的东西。

它是独立于平台的*Java 编程语言*，并且通过扩展，任何用它编写的程序。

JVM 本身不是平台独立的：它是平台相关的手段，通过它实现语言的平台独立性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-09T07:58:30.417

显然，Java 不能在没有 JVM 的平台上运行。因此，从字面意义上来说，Java 并不是独立于平台的。但与此同时，您对平台独立性的定义没有用。任何可能的语言都不可能真正独立于平台，因为平台的某些方面需要能够解析语言。考虑到所有可能的平台，有些平台必然无法解析它。

因此，考虑到很多很多平台都运行 JVM，并且 Java 代码可以在任何具有相同含义的 JVM 上运行，Java 是平台相关的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T08:00:37.267

对于 Java，平台独立性仅指这样一个事实，即如果您正确编写代码，则生成的编译代码应该在任何支持 JVM 的平台上运行不变且完全相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-09T08:03:53.870

显然，如果没有 JVM，您就没有机会执行字节码。这个问题让我想知道将 JVM 移植到新平台实际上有多么困难。 [Wpedia](http://en.wikipedia.org/wiki/HotSpot#Supported_platforms)有（重新 HotSpot VM）：

> 第三方也可以为 Mac OS X 和各种其他 Unix 操作系统提供端口。支持多种不同的硬件架构，包括 x86、PowerPC 和 SPARC（仅限 Solaris）。
> 
> 移植 HotSpot 很困难，因为代码虽然主要用 C++ 编写，但包含大量汇编语言。为了解决这个问题，IcedTea 项目开发了 HotSpot 解释器的通用端口，称为零汇编程序 Hotspot（或零），几乎没有汇编代码。此端口旨在将 HotSpot 的解释器组件轻松适应任何 Linux 处理器架构。自 1.6 版起，HotSpot 的所有非 x86 端口（PPC、IA64、S390 和 ARM）都使用零汇编程序 Hotspot 的代码。
> 
> IcedTea 开发人员 Gary Benson 使用 LLVM 为 HotSpot 开发了一个独立于平台的即时编译器，称为 Shark，以补零。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-17T06:18:14.707

有不同的方面需要考虑：

**JVM**规范对平台独立性不是很严格，就像它没有说明应该如何实现**垃圾收集**一样。**因此，公司可以自由地将JVM**的某些组件作为平台依赖来优化性能。所以执行编译代码的**JVM**不是平台独立的。您需要特定于该平台的 JVM，即 windows JVM、linux JVM、Mac OS JVM 等，并且同一平台有不同的 JVM 实现。

但是**Java API**、**Java Language**和**Java Compiler**是平台无关的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-07T15:01:17.553

简而言之：没有JVM，您无法在任何平台上解释Java代码。JVM是平台相关的。因此，如果今天有新的操作系统出现，java 代码将无法运行。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-01-16T11:08:39.003

我不认为 Java 是完全独立于平台的。

因为：

1.  线程调度工作的时间片取决于处理器、操作系统和平台。

2.  AWT 图形随着输出设备的变化而变化，因此它显示了平台依赖性。

# awk - awk - 如何组合这两个命令？

> ID：12337429
> 
> 赞同：0
> 
> 时间：2012-09-09T07:56:44.440
> 
> 标签：awk, getline

我使用两个命令来扫描频道：

```
awk 'BEGIN{while(" w_scan -c PL -x " | getline ) print >> "tmp" }'

awk 'BEGIN{while(" w_scan -I tmp -E 0 -t 3 -F " | getline) print >> "channels" }' 
```

我也想做同样的事情，但使用一个命令。如何简化以跳过写入 tmp？

感谢您的帮助。

**编辑：**

我试过这个命令，但它不起作用：

```
awk 'BEGIN { while (" w_scan -c PL -x " | getline ){split($0, tab, RS) system( " w_scan -I \047" tab[1] "\047 -E 0 -t 3 -F " ">>" "channels" )}}' 
```

结果错误 ->[在此处输入链接描述](http://wklej.org/id/826192/)

**编辑-1**

当我使用此脚本时不起作用。

运行.awk

```
BEGIN { 
  while (" w_scan -c PL -x " | getline ) {
    split($0, tab, RS) 
    system( " w_scan -I '\047'" tab[1] "'\047' -E 0 -t 3 -F >> channels" )
  }
} 
```

结果错误 →[在此处输入链接描述](http://wklej.org/id/826487/)

当我使用这个脚本时，它运行良好。

sh脚本

```
#!bin/bash
awk 'BEGIN{while(" w_scan -c PL -x " | getline ) print >> "tmp" }'
awk 'BEGIN{while(" w_scan -I tmp -E 0 -t 3 -F " | getline) print >> "channels" }' 
```

结果 --> [在此处输入链接描述](http://wklej.org/id/826575/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:36:14.740

只需将它们都粘在`BEGIN`块中：

```
awk '
  BEGIN {
    while(" w_scan -c PL -x " | getline ) print >> "tmp"
    while(" w_scan -I tmp -E 0 -t 3 -F " | getline) print >> "channels"
  }
' 
```

如果您希望将整个内容放在一行中，则可以用分号分隔命令：

```
awk 'BEGIN { while(" w_scan -c PL -x " | getline ) print >> "tmp"; while(" w_scan -I tmp -E 0 -t 3 -F " | getline) print >> "channels" }' 
```

### 编辑

您正在`tmp`两个循环中访问，请确保在第二个循环之前使用`close`and编写它`sync`：

*运行.awk*

```
BEGIN {
  while(" w_scan -c PL -x " | getline ) 
    print >> "tmp"
  close("tmp")
  system("sync")
  while(" w_scan -I tmp -E 0 -t 3 -F " | getline) 
    print >> "channels"
} 
```

执行：

```
awk -f run.awk 
```

# css - 覆盖速记背景属性的一个属性

> ID：12337435
> 
> 赞同：1
> 
> 时间：2012-09-09T07:57:47.633
> 
> 标签：css, overriding

假设我使用定义多个属性的简写背景属性..例如：

```
.img
{
    background: url('/Content/images/a.png') no-repeat scroll 100% 3px;  
} 
```

如果我现在只想覆盖图像的背景位置，我应该使用带有更新位置的完整速记符号，例如：

```
.img
{
  background: url('/Content/images/a.png') no-repeat scroll 0 3px;  
} 
```

或者只是覆盖背景位置属性，如：

```
.img
{
   background-position: 0 3px;  
} 
```

如果是这样，有什么问题？仅覆盖该位置是否有轻微的性能提升？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T08:05:46.377

只需覆盖您需要的属性。事实上，这种技术在所谓的 CSS Sprites 中经常使用：

```
[class*=" icon-"] {
  background: url("../img/glyphicons-halflings.png") no-repeat scroll 14px;
}

.icon-glass {
  background-position: 0 0;
}

.icon-music {
  background-position: -24px 0;
}

.icon-search {
  background-position: -48px 0;
} 
```

这种方法（您首先定义一个通用的完整规则，然后使用速记规则为每个特定类指定它）有两个明显的优点：

*   它要短得多（...比您重复完整定义并更新一个属性时），因此 CSS 文件会更小
*   它也非常易读（没有人会猜测您是否错误地覆盖了某些先前的规则）。

# php - mysql结构复制从master到slave，slave数据完整

> ID：12337436
> 
> 赞同：4
> 
> 时间：2012-09-09T07:57:53.477
> 
> 标签：php, mysql, pdo, phpmyadmin

这是我想要实现的目标

1.  我想建立一个只保存表结构而没有数据的主数据库。
2.  从属数据库将采用主数据库的结构。只有从数据库将包含数据
3.  主数据库上的任何结构更改（例如更改表、删除表等）都应更新到从数据库，而不会丢失数据

我该如何实现这一点，因为现在我需要在每个数据库上手动运行查询，以保持结构同步，这不是一个好的选择。我想自动化这个过程，以便任何可以帮助我的人。非常感谢任何可以让我实现这一目标的建议或任何教程的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:33:17.550

它实际上无法完成，但是您可以通过某种方式破解。首先设置普通的从站。同步后，它们将具有与单个主控相同的架构。现在的诀窍是在主服务器上进行查询，这些查询传播到从服务器，但不要在主服务器上留下数据。首先像往常一样进行查询，确保每个表都有一个自动增量键：

```
INSERT INTO tbl (col1, col2, col3) VALUES (val1, val2, val3);
SELECT LAST_INSERT_ID(); 
```

当您进行查询时，记录时间，并将最后一个插入 id 保存在应用程序级别的队列中。间歇性地在从站上进行查询（例如，10 秒，具体取决于您的负载）：

```
SHOW SLAVE STATUS; 
```

并从当前系统时间中减去 Seconds_Behind_Master 值（调用此时间 t1）。现在遍历旧查询队列，只要该元素上的时间大于 t1，就删除第一个元素。每次删除队列中的元素时，您都希望从主服务器中删除该记录，但将其保留在从服务器上（您已经知道它是因为自从您进行所述查询以来它们已经更新）。所以现在清除主数据库（在给定时间将有大约 10 秒的数据）而不清除从属数据库：

```
SET sql_log_bin=0;
DELETE FROM tbl WHERE autoincrement_key=last_insert_id;
SET sql_log_bin=1; 
```

其中 last_insert_id 是存储的 LAST_INSERT_ID() 以供查询清除。

# java - ClassObject.getClass,ClassName.class 和 Class.forName("ClassName") 的区别

> ID：12337439
> 
> 赞同：1
> 
> 时间：2012-09-09T07:58:28.943
> 
> 标签：java, class, classname

我想了解 Class.forName("ClassName") 和 ClassObject.getClass 是否都返回类的运行时实例。那么为什么在比较从两者获得的结果类对象时会为我们获取一个布尔值 false（如果我们使用 == 或等于进行比较）。
我还想知道在类名上调用 .class 方法的确切用途是什么。我已经读过它是在编译时确定的等等，但目的是什么。Class.forName("ClassName") 不够吗？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:06:24.537

是的，它们是相同的——它们返回完全相同的对象。

例子：

```
public class Tryout {
    public static class A {     
    }
    public static class B extends A {   
    }
    public static void main(String[] args) throws Exception {
        A a = new A();
        A b = new B();
        //the same class object, one achieved statically and one dynamically.
        System.out.println(a.getClass() == A.class);
        //the same class object using forName() to get class name dynamically 
        System.out.println(Class.forName("Tryout$A") == A.class);
        //different class. B is not A!
        System.out.println(b.getClass() == A.class);
    }
} 
```

将产生：

```
true
true
false 
```

请注意，最后一个是产生的，`false`因为 - 尽管*静态类型*相同，但动态类型`B`不是`A`，因此`getClass()`返回`B`，这是 的动态类对象`b`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:05:39.570

`Class.forName`加载和初始化类。`obj.getClass()`返回加载到 permgen 中的类对象。如果该类由同一个类加载器加载，`==`则必须返回 true。当您看到`false`== 比较时，这意味着它们是由不同的类加载器加载的。

# wpf - 正确使用 PropertyChangedTrigger 和 ChangePropertyAction

> ID：12337442
> 
> 赞同：2
> 
> 时间：2012-09-09T07:59:15.837
> 
> 标签：wpf, xaml

`ItemsSource`当我的属性发生变化时，我正在尝试设置默认选择值`ComboBox`

我的xml：

```
<ComboBox ItemsSource="{Binding SelectedItemsSource, Mode=OneWay}" x:Name="c1">
   <i:Interaction.Triggers>
         <ei:PropertyChangedTrigger Binding="{Binding ItemsSource,RelativeSource={RelativeSource Self}}">
              <ei:ChangePropertyAction PropertyName="SelectedIndex" Value="{StaticResource zero}" TargetName="c1"/>
         </ei:PropertyChangedTrigger>                        
   </i:Interaction.Triggers>             
</ComboBox> 
```

我的 VM 中的 SelectedItemsSource 动态变化，我希望每次发生这种情况时都选择第一个项目。

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T18:18:34.720

除了引导我找到解决方案的当前答案之外，我实际需要完成的是在 itemsSources （复数）之间切换时检索最后一个选定的项目

从我发现的一篇文章中： [“对于每个 ItemsSource 绑定，都会生成一个唯一的 CollectionView ..”](http://shevaspace.blogspot.co.il/2008/06/when-selectorissynchronizedwithcurrenti.html)

我同意，只要视图存在，每个绑定都会生成自己的 CollectionView 并因此持有对 CurrentItem 和 CurrentPosition 的引用，如果用

**IsSynchronizedWithCurrentItem="True"**

所以我创建了自己的**ChangePropertyAction**类：

```
 public class RetriveLastSelectedIndexChangePropertyAction : ChangePropertyAction
 {                
    public int LastSelectedIndex
    {
        get { return (int)GetValue(LastSelectedIndexProperty); }
        set { SetValue(LastSelectedIndexProperty, value); }
    }

    public static readonly DependencyProperty LastSelectedIndexProperty =
        DependencyProperty.Register("LastSelectedIndex", typeof(int), typeof(RetriveLastSelectedIndexChangePropertyAction), new UIPropertyMetadata(-1));

    protected override void Invoke(object parameter)
    {
        var comboBox = this.AssociatedObject as ComboBox;
        this.SetValue(LastSelectedIndexProperty, comboBox.Items.CurrentPosition);            
    }        
 } 
```

**并使用PropertyChangedTrigger**调用它 ，如下所示：

```
 <ComboBox ItemsSource="{Binding SelectedItemsSource, Mode=OneWay}" 
           x:Name="c1" 
           IsSynchronizedWithCurrentItem="True">                                    
       <i:Interaction.Triggers>
          <ei:PropertyChangedTrigger Binding="{Binding ElementName=c1,Path=ItemsSource}">
              <local:RetriveLastSelectedIndexChangePropertyAction                   
                      PropertyName="SelectedIndex" 
                      Value="{Binding LastSelectedIndex}" 
                      TargetName="c1"/>
          </ei:PropertyChangedTrigger>                        
       </i:Interaction.Triggers>
  </ComboBox> 
```

如果有人需要在 DataContext 中没有任何杂乱代码的情况下检索他们最后选择的项目，希望这会有所帮助，享受吧。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T08:49:40.363

尝试为您的组合框设置属性[IsSynchronizedWithCurrentItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.issynchronizedwithcurrentitem.aspx "IsSynchronizedWithCurrentItem")`true`并完全删除触发器 -

```
<ComboBox ItemsSource="{Binding SelectedItemsSource, Mode=OneWay}"
          IsSynchronizedWithCurrentItem="True">             
</ComboBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T08:15:36.230

尝试从以下位置更改您的绑定：

```
<ei:PropertyChangedTrigger Binding="{Binding ItemsSource,RelativeSource={RelativeSource Self}}"> 
```

至

```
<ei:PropertyChangedTrigger Binding="{Binding ItemsSource,ElementName=c1}"> 
```

# clojure - clojure 中的类型是如何构造的？

> ID：12337445
> 
> 赞同：2
> 
> 时间：2012-09-09T08:00:21.110
> 
> 标签：clojure

如果我有一个类型存储在变量中

`(def ta java.util.Vector)`

如何使用存储在 a 中的符号初始化新的 Vector 类型？

例如。 `(initialize ta params)`=>`#Vector <params>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T08:26:15.867

那么你`ta`是[java.lang.Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)的一个实例，所以你可以直接使用该`newInstance`方法：

```
(.newInstance ta)
=> #<Vector []> 
```

如果您想使用构造函数的参数，您可以通过该`getConstructor`方法使用以下内容：

```
(defn build-constructor [klass & types]
  "Construct a new class instance dynamically at runtime"
  (let [constructor (.getConstructor klass (into-array java.lang.Class types))]
    (fn [& args]
      (.newInstance constructor (object-array args)))))

((build-constructor ta java.util.Collection) [1 2 3 4])
=> #<Vector [1, 2, 3, 4]> 
```

虽然这可能有点复杂，因为您需要完全匹配参数类型才能获得正确的构造函数......

# linux - 命令在 linux 终端中有效，但在 shell 脚本中无效

> ID：12337446
> 
> 赞同：0
> 
> 时间：2012-09-09T08:00:32.173
> 
> 标签：linux, bash, svn, shell

我正在尝试使用以下命令运行以下 shell 脚本：

```
$ bash linuxScript.sh 
```

这就是我的脚本的样子

```
#!/bin/bash
svnroot=.../resources
FINDBUGS_HOME="~/opt/findbugs-2.0.1"
svn help
svn export --force ".../resources/GUI.jar"

opt=$1 
case $opt in
     -normal)
    echo "normal mode"
    java -jar %FINDBUGS_HOME%\lib\findbugs.jar -textui -onlyAnalyze common.-,ufm.- -output UFMGUI_Normal.html -html GUI.jar;;
    ...
esac 
```

现在由于某种原因该命令`svn help`并`svn export`不能正常工作（我调用 svn help 只是为了强调我的观点）。

他们给出了以下错误：

```
'unknown command: 'help
Type 'svn help' for usage.
' is not properly URI-encodedaire.com/repos/ufm_ui/branches/UFM_3_7/tools/build/resources/GUI.jar 
```

如果我已经在问它，它也会对非 svn 相关的命令大喊：

```
:command not founde 7:
'inuxScript.sh: line 8: syntax error near unexpected token 'in
'inuxScript.sh: line 8: 'case $opt in 
```

现在奇怪的是，如果我在终端中输入 svn 命令，一切正常！我试图用谷歌搜索解决方案，我也搜索了这个论坛，但我找不到任何有用的东西。

非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:26:01.113

1.  以下命令的输出是什么？：

    > ```
    > $ which bash 
    > ```

    这是否如您预期的那样显示“/bin/bash”？

2.  以下 shell 脚本（假设 /tmp/x.sh）的输出是什么？：

    > ```
    > $ cat /tmp/x.sh
    > #!/bin/bash
    > svn help
    > 
    > $ bash /tmp/x.sh 
    > ```

    它应该是“svn help”输出。

3.  FINDBUGS_HOME 看起来是环境变量，它看起来错误地在以下行中被引用：

    > ```
    > java -jar %FINDBUGS_HOME%\lib\findbugs.jar ... 
    > ```

    %FINDBUGS_HOME% 是正确的符号吗？（它看起来像 DOS 表示法......）如果它意味着 shell env-var，它不是 $FINDBUGS_HOME 吗？

注意：上面的 $ 只是与您的帖子相同的 bash 提示符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:54:44.810

看起来您的脚本以 DOS 格式保存，尝试使用 vim 打开并查看文件格式

```
:set ff 
```

我想它会给你“dos”

要将其转换为 unix 格式，请使用

```
:set ff=unix
:w 
```

# drupal - 我无法更改 Drupal 7 站点中的临时目录

> ID：12337452
> 
> 赞同：2
> 
> 时间：2012-09-09T08:01:14.073
> 
> 标签：drupal, drupal-7

我正在将我的 Drupal 7 网站从开发转移到生产。现在我无法更改我网站的临时目录。

每次我尝试更改路径时，它都会给我一个无法执行`mkdir()`功能的错误。

我还尝试使用`devel`模块变量编辑器对其进行更改，它给了我一条成功的消息，但值保持不变。（旧值）

我还从`variable`表中删除了变量，它保持不变。

我真的不知道在这里做什么！

有任何想法吗 ？！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T01:42:25.997

虽然明显的罪魁祸首是权限，但还有其他问题，例如尝试将其设置为 /tmp 而不是 tmp。/tmp 归您的服务器操作系统所有。对文件夹中的 Drupal 目录使用不带斜杠的 tmp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T11:09:01.280

就我而言，网络用户无法访问 /tmp （我使用的是最新版本的 AlternC 控制面板[http://alternc.org/](http://alternc.org/)）

我刚刚更改了 drupal 变量表中的路径：

```
mysql> update variable set value='s:28:"/var/www/alternc/u/user/temp";' where name='file_temporary_path'; 
```

# c# - 避免将属性映射到表

> ID：12337453
> 
> 赞同：2
> 
> 时间：2012-09-09T08:01:16.880
> 
> 标签：c#, .net, entity-framework, ef-code-first

谁能告诉我如何避免使用代码优先方法将某些属性从我的模型映射到表？

例子：

```
public class Post
{
    [Key]
    public int Id { get; set; }

    [Display(Name = "Posted")]
    public DateTime Created { get; set; }

    [Display(Name = "Modified")]
    public DateTime? Modified { get; set; }

    [Required]
    [MaxLength(256)]
    public string Title { get; set; }

    [Required]
    public string Body { get; set; }

    public int? UserId { get; set; }

    public string UserName { get; set; }

    public virtual ICollection<Comment> Comments { get; set; }

    public virtual ICollection<Tag> Tags { get; set; } 
} 
```

我希望 UserName 不映射到表中。在 EF 中是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T08:03:32.140

添加一个

```
[NotMapped] 
```

属性到所需的属性：

```
public class Post
{
    [Key]
    public int Id { get; set; }

    [Display(Name = "Posted")]
    public DateTime Created { get; set; }

    [Display(Name = "Modified")]
    public DateTime? Modified { get; set; }

    [Required]
    [MaxLength(256)]
    public string Title { get; set; }

    [Required]
    public string Body { get; set; }

    public int? UserId { get; set; }

    [NotMapped]
    public string UserName { get; set; }

    public virtual ICollection<Comment> Comments { get; set; }

    public virtual ICollection<Tag> Tags { get; set; } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T08:05:12.217

首先在代码中，覆盖 DbContext 派生类中的 OnModelCreating 方法：

```
protected override void OnModelCreating(ModelBuilder modelBuilder)
{   
    base.OnModelCreating(modelBuilder);

    modelBuilder.Entity<Post>().Ignore(p => p.UserName);
} 
```

# ruby-on-rails - Rails - 一种形式，两种模型中的验证

> ID：12337454
> 
> 赞同：1
> 
> 时间：2012-09-09T08:01:16.803
> 
> 标签：ruby-on-rails, ruby, model, validation

我有一个新用户注册表格。表单中有这些输入：

*   名称（model_a）
*   年龄（model_a）
*   电子邮件（model_a）
*   icq (model_b)
*   Skype (model_b)

各个领域都需要。前 3 个字段在**model_a**中，最后两个在**model_b**中。在这两个模型中，我已经准备好了验证规则。

它应该这样工作：用户注册并进入表**model_a**将保存前 3 个字段，进入表**model_b**的最后两个字段。

但是如何以这种方式设置表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:04:45.377

看看*嵌套表格*

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# android - 等待服务中的网络更新，以便下载更新

> ID：12337458
> 
> 赞同：0
> 
> 时间：2012-09-09T08:02:03.337
> 
> 标签：android

我有一项服务，它会定期从网站下载一些更新。默认时间很长，大约 10 分钟，我使用启动此服务的 AlarmManager 来做到这一点。

网络可以开启或关闭，**以防它关闭服务应该在网络恢复后立即下载新闻**，因为间隔很长，在最坏的情况下，您可能需要等待 20 分钟才能进行下一次更新。

我制作了一个网络状态广播接收器，并且用很少的代码制作了一个 NetworkListener 接口：

```
public interface NetworkStateListener {
public void onNetworkOn();
public void onNetworkDown();
} 
```

所以我的服务有这两种方法，**可以知道网络何时开启或关闭**。

我的想法如下：在 onStart() 方法中，我生成一个新线程：如果网络关闭线程等待，否则下载。当 onNetworkOn() 被调用时，我调用了一个 notify()：

```
private boolean threadWaiting; //a flag so that I don't spawn multiple threads
public int onStartCommand(Intent intent, int flags, int startId) {
    if(!threadWaiting){//if already a thread waiting do nothing and exit
        Thread t = new Thread(new Runnable(){

            @Override
            public void run() {
                synchronized(binder){
                    while(!isNetworkOn())
                        try {
                            threadWaiting = true;
                            binder.wait();
                        }catch(InterruptedException ex){
                            ex.printStackTrace();
                        }
                }
                // blocks until network connection is available
               threadWaiting = false;
               //... operations ... 
```

这是 onNetworkOn() 方法：

```
public void onNetworkOn() {
    synchronized(binder){
        binder.notify();
    } 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:58:59.090

> 这是正确的方法吗？

恕我直言，这并不理想，因为您将服务保留在内存中。另外，如果您的服务是`IntentService`，您将泄漏一个线程并且可能永远不会发现连接更改。

我将`BroadcastReceiver`在清单中设置`CONNECTIVITY_ACTION`广播，最初禁用该接收器。如果发生警报时发现没有连接，请启用该接收器。当接收器接收到“我们有连接”广播时，让它调用`startService()`以向您的服务发送命令以完成工作，然后让接收器自行禁用。这样，您就不需要一直保持服务运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:37:47.210

已解决：我保留了一个布尔标志“我的服务中错过了更新”：

```
boolean missedUpdate = false; 
```

然后在我的 onStartCommand 中：

```
if(isNetworkOn()){
    //do actual code
}else
    missedUpdate = true; 
```

在我的网络上：

```
public void onNetworkOn(){
    if(missedUpdate){
       //download updated news
       // reset timer
       missedUpdate = false;
    }
} 
```

# c - 使用 FreeType 加载字体时出现分段错误

> ID：12337466
> 
> 赞同：1
> 
> 时间：2012-09-09T08:03:47.440
> 
> 标签：c, segmentation-fault, libpng, freetype

我正在尝试将 FreeType 库与 libpng 一起使用来输出字形的 PNG 图像。我的代码编译得很好，但是我遇到了分段错误。这是 gdb 的一些调试输出（我不知道该怎么做）：

```
(gdb) run
Starting program: /home/david/Desktop/a.out 

Program received signal SIGSEGV, Segmentation fault.
0x00007ffff76a58a5 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
(gdb) where
#0  0x00007ffff76a58a5 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ffff7bcb298 in png_write_row (png_ptr=0x611320, row=<optimized out>)
    at /usr/include/x86_64-linux-gnu/bits/string3.h:52
#2  0x00007ffff7bcb56c in png_write_image (png_ptr=0x611320, image=0x60d218)
    at pngwrite.c:608
#3  0x0000000000400c35 in main () 
```

这是代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <png.h>

#include <ft2build.h>
#include FT_FREETYPE_H

main() {

    // Declare FreeType variables
    FT_Library library;
    FT_Face face;
    FT_GlyphSlot slot;
    FT_UInt glyph_index = 30;
    char* font_file = "/usr/share/fonts/truetype/freefont/FreeMono.ttf";

    // Declare PNG variables
    png_uint_32 width = 100;
    png_uint_32 height = 100;
    int bit_depth = 16;
    int color_type = PNG_COLOR_TYPE_GRAY;
    char* file_name = "/home/david/Desktop/out.png";
    png_structp png_ptr;
    png_infop info_ptr;

    // Render font
    int error;
    error = FT_Init_FreeType(&library);
    error = FT_New_Face(library, font_file, 0, &face);
    error = FT_Set_Pixel_Sizes(face, 100, 100);
    error = FT_Load_Glyph(face, glyph_index, FT_LOAD_DEFAULT);
    error = FT_Render_Glyph(face->glyph, FT_RENDER_MODE_NORMAL);

    if (error) {
        printf("ERROR CODE: %d", error);
    }

    // Create a PNG file
    FILE *fp = fopen(file_name, "wb");

    // Create the PNG in memory
    png_ptr = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);
    info_ptr = png_create_info_struct(png_ptr);
    png_init_io(png_ptr, fp);

    // Write the header
    png_set_IHDR(png_ptr, info_ptr, width, height, bit_depth, color_type, PNG_INTERLACE_NONE, PNG_COMPRESSION_TYPE_BASE, PNG_FILTER_TYPE_BASE);
    png_write_info(png_ptr, info_ptr);

    // Write image data
    slot = face->glyph;
    png_write_image(png_ptr, &slot->bitmap.buffer);

    // End write
    png_write_end(png_ptr, NULL);

    fclose(fp);
} 
```

**更新**

我正在尝试一种稍微新的方法（使用 png_write_row 而不是 png_write_image）。

```
... SAME AS BEFORE ABOVE ....

// Write image data
slot = face->glyph;

int x, y, offset;
for (y = 0; y < slot->bitmap.rows; y++) {
    for (x = 0; x < slot->bitmap.width; x++) {
        offset = y*(slot->bitmap.width) + x;
        png_write_row(png_ptr, &slot->bitmap.buffer[offset]);
    }
}

// End write
png_write_end(png_ptr, NULL);

fclose(fp); 
```

}

现在我得到了一些更有用的 libpng 错误，但我仍然不确定如何处理它们：

```
libpng warning: zstream not in use (internal error)
libpng error: stream error
Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:25:56.510

两个建议：

1.  查看所有编译器警告，以查看指针类型是否正确匹配。

2.  更好地跟踪可能的错误。例如写这样的东西：

    ```
    int error;
    error = FT_Init_FreeType(&library);
    if (error) {
        printf("ERROR CODE: %d", error);
    }
    error = FT_New_Face(library, font_file, 0, &face);
    if (error) {
        printf("ERROR CODE: %d", error);
    }
    error = FT_Set_Pixel_Sizes(face, 100, 100);
    if (error) {
        printf("ERROR CODE: %d", error);
    }
    error = FT_Load_Glyph(face, glyph_index, FT_LOAD_DEFAULT);
    if (error) {
        printf("ERROR CODE: %d", error);
    }
    error = FT_Render_Glyph(face->glyph, FT_RENDER_MODE_NORMAL);

    if (error) {
        printf("ERROR CODE: %d", error);
    } 
    ```

此调用之一上的任何错误都可能导致可能触发分段错误的错误指针。

这很明显：

```
FILE *fp = fopen(file_name, "wb");
if ( fp == null ) {
    printf ("Unable to open file for writing"):
} 
```

但是，例如，如果您尝试将文件写入没有权限的目录中，则 fp 将指向 NULL 和进一步的分段错误。

# jquery - 使用 jQuery addClass 更改背景

> ID：12337468
> 
> 赞同：0
> 
> 时间：2012-09-09T08:04:12.367
> 
> 标签：jquery

我正在尝试通过添加具有另一种背景颜色的新类来更改背景颜色。但颜色不变。还是一样的颜色！我必须先删除旧的背景颜色吗？我想我的代码应该可以工作！？

```
$(".displayControl a:first").addClass("activeButton"); 
```

的CSS

```
.displayControl
{
padding: 20px 0 0 0;
float: right;
}

.displayControl a
{
background: #B7BABD;
margin: 0 5px 0 0;
padding: 5px 10px 5px 10px;
color: #ffffff;
}

.activeButton
{
background: #83AEE6;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T08:09:41.133

你被 CSS 的“特异性”规则打败了。尽管在样式表中更高，但更具体的指令赢得了胜利。

尝试将最后一个指令更改为：

```
.displayControl a.activeButton
{
background: #83AEE6;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:12:49.150

`.displayControl a`优先级高于`.activeButton`

试试这个，

```
.displayControl
{
padding: 20px 0 0 0;
float: right;
}

.displayControl a
{
background: #B7BABD;
margin: 0 5px 0 0;
padding: 5px 10px 5px 10px;
color: #ffffff;
}

.displayControl .activeButton
{
background: #83AEE6;
}​ 
```

[演示](http://jsfiddle.net/cVpUA/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T08:09:50.430

您的 .activeButton css 声明不够具体，“.displayControl a”选择器更具体，因此使用该声明的背景（它优先于不太具体的 .activeButton 声明）。您应该使您的 activeButton 选择器更具体，如下所示：

```
.displayControl a.activeButton{
    background: #83AEE6;
}  ​ 
```

[工作小提琴](http://jsfiddle.net/u5RaH/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T08:35:42.130

创意，

请你试试这个：

```
 <div class='asd'>
    Something
    </div>

    .asd{background:#B7BABD;}
    .new{background:red;}

   $('div.asd').addClass(function(){
   $(this).css('background','');
   $(this).addClass('new');       
   }); 
```

[在http://jsfiddle.net/QV2m3/](http://jsfiddle.net/QV2m3/)中查看

谢谢

# java - 使用 .mov 文件到字节数组

> ID：12337469
> 
> 赞同：1
> 
> 时间：2012-09-09T08:04:13.463
> 
> 标签：java, file, bytearray

我需要将文件转换为字节数组，但不能使用 .mov 文件（1.32 Gb）来完成。该方法适用于小型 .txt 文件和 JPEG 图像，但是当我尝试使用 MOV 文件时，我不能。我只是得到一个 NullPointerException。

代码：

```
public byte[] fileToByteArray(File file){
    ByteArrayOutputStream baos = null;
    InputStream fis = null;
    try{
        byte[] buffer = new byte[(int)file.length()];
        baos = new ByteArrayOutputStream();
        fis = new FileInputStream(file);
        int read;
        while((read = fis.read(buffer)) != -1){
            baos.write(buffer, 0, read);
        }
    }catch(Exception ex){
        System.out.println("Error: 1");
    }finally{
        try{
            if(baos != null){
                baos.close();
            }
        }catch(Exception ex){
            System.out.println("Error: 2");
        }
        try{
            if(fis != null){
                fis.close();
            }
        }catch(Exception ex){
            System.out.println("Error: 3");
        }
        return baos.toByteArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:12:49.650

在这一行：

```
return baos.toByteArray(); 
```

您正在*无条件地*取消引用`baos`......即使如果此行引发异常，它仍然为 null：

```
byte[] buffer = new byte[(int)file.length()]; 
```

我怀疑该行*已*引发异常（内存不足，猜测）...但是由于您的异常处理策略“捕获所有异常，将它们打印出来并忽略它们”，您在不应该的情况下继续进行.

对此的直接解决方法是仅捕获您*真正*想要捕获的异常——*如果有的话*`IOException`，几乎可以肯定只有在这种情况下。事实上，我可能根本不会在您编写的代码中使用任何子句，除了可能在代码上。（你不希望一个异常来掩盖其他地方的异常。如果你使用的是 Java 7，请使用 try-with-resources 语句使所有这些更容易开始。）*`catch``close``close`*

 *以你正在做的方式“处理”异常是一个非常糟糕的主意——你基本上是在说你想继续不管出了什么问题，如果你幸运的话，这只会导致一个错误导致另一个错误，或者如果你很不幸，你最终做出了糟糕的状态改变，例如用坏的数据覆盖好数据，甚至没有意识到这一点。

现在至于*更大*的问题——你试图分配一个巨大的数组，我怀疑你没有告诉 JVM 使用那么多内存。您需要从以下内容开始：

```
java -Xmx3G ... 
```

...假设您使用的是 64 位 JVM，它乐于使用这么多内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:12:37.873

1.32 GB 大约是*2^30.4*字节。`OutOfMemoryError`很可能会在这条线上抛出一个：

> ```
> byte[] buffer = new byte[(int)file.length()]; 
> ```

结果，代码流跳转到异常处理程序（它将尝试打印`"Error: 1"`，在这种情况下*可能会*或*可能**不会***工作）。结果，当代码流到达`finally`块时，仍然`baos`是.`null``NullPointerException`

我建议的解决方案是**不要尝试将 1.32 GB 的文件读入内存**……至少是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:31:51.777

你为什么不以 4K/8K/16K 字节数组的形式阅读它？这样，您将永远不会耗尽内存。我通过网络以这种方式复制了多达 20GB 的文件。*

# python - 如何从全局设置模块在 Django 中设置特定设置

> ID：12337472
> 
> 赞同：2
> 
> 时间：2012-09-09T08:04:48.297
> 
> 标签：python, django, module, settings

我们正在尝试确定最佳实践来为我们想要使用的不同环境设置 Django 设置，例如本地开发、登台和生产。

仔细阅读，我们发现使用了两种主要*技术*：

1.  在主 settings.py 文件末尾导入的 settings_local.py 文件，未版本化

2.  [设置模块方式，设置成为python模块，特定的env.py](http://www.deploydjango.com/django_project_structure/index.html#building-a-perfect-django-settings-module)文件在里面

我们更喜欢第二种方式，因为它看起来非常模块化和“python”方式，但是，作为指南仍然不完整，如何说 Django 为每个不同的环境使用哪个模块？

你认为这是管理 Django 设置的好方法吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:16:12.393

使用这两种方法也是正常的。例如，您可以在每台开发人员机器上拥有不同的环境，如“开发”、“暂存”、“生产”和仅限本地设置。

通常，只是从当前目录（或用于配置文件的特殊目录）`settings_local.py`的末尾导入。`settings.py`

为了管理不同的环境，我们使用`env`变量。它看起来像这样：

```
$ export MY_PROJECT_ENV=production
$ python
>>> import os
>>> os.environ["MY_PROJECT_ENV"]
'production' 
```

在`settings.py`这看起来像

```
ENV = os.environ.get("MY_PROJECT_ENV", "production")
LOGGING_LEVEL = "debug" if ENV == "development" else "error" 
```

为了更方便的操作`export`，您可以将所有此类导出添加到您的`~/.profile`（或类似的功能文件）。

# scala - Brew 安装 Scala 并与 Akka 一起玩引发异常

> ID：12337473
> 
> 赞同：1
> 
> 时间：2012-09-09T08:04:49.733
> 
> 标签：scala, playframework-2.0, sbt, akka

我的应用程序遇到了一个非常糟糕的错误。

我怀疑可能是因为默认播放版本，默认akka版本和默认scala版本冲突。这里似乎有两三个相互竞争的力量在起作用。首先，我使用的是 sbt-idea 插件，它不适用于 play 2.0.3。这意味着我使用的是 Play 2.0.1。其次，play 2.0.3 和 2.0.1 都没有 scala 2.9.2 版本，即使这些是从 brew 安装的版本，这是推荐的机制。我希望我错了，或者在这里遗漏了一些可以修复的东西。尝试使用 actor 时，会出现以下堆栈跟踪：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[MatchError:   ModuleSym(SymbolInfo(nameRef=34, ownerRef=9, flags=0x120, infoRef=35)) (of class org.scalastuff.scalabeans.sig.UnPickler$$anonfun$read$3$$anonfun$apply$1$$anon$13)]]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1-2.0.1.jar:2.0.1]
at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1-2.0.1.jar:2.0.1]
at akka.actor.Actor$class.apply(Actor.scala:311) [akka-actor-2.0.1.jar:2.0.1]
at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1-2.0.1.jar:2.0.1]
at akka.actor.ActorCell.invoke(ActorCell.scala:619) [akka-actor-2.0.1.jar:2.0.1]
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:196) [akka-actor-2.0.1.jar:2.0.1]
Caused by: scala.MatchError: ModuleSym(SymbolInfo(nameRef=34, ownerRef=9, flags=0x120, infoRef=35)) (of class org.scalastuff.scalabeans.sig.UnPickler$$anonfun$read$3$$anonfun$apply$1$$anon$13)
at org.scalastuff.scalabeans.sig.ClassDeclExtractor.parsePath(ClassDeclExtractor.scala:287) ~[scalabeans-0.2.jar:na]
at org.scalastuff.scalabeans.sig.ClassDeclExtractor$$anonfun$13$$anon$13.<init>(ClassDeclExtractor.scala:277) ~[scalabeans-0.2.jar:na]
at org.scalastuff.scalabeans.sig.ClassDeclExtractor$$anonfun$13.apply(ClassDeclExtractor.scala:276) ~[scalabeans-0.2.jar:na]
at org.scalastuff.scalabeans.sig.ClassDeclExtractor$$anonfun$13.apply(ClassDeclExtractor.scala:258) ~[scalabeans-0.2.jar:na]
at org.scalastuff.scalabeans.sig.Memoizable$$anon$1$$anonfun$apply$1.apply(Memoizable.scala:24) ~[scalabeans-0.2.jar:na]
at scala.collection.mutable.MapLike$class.getOrElseUpdate(MapLike.scala:188) ~[scala-library.jar:0.11.3-2] 
```

# php - 使用客户端 cookie 保护 PHP 记住我

> ID：12337477
> 
> 赞同：2
> 
> 时间：2012-09-09T08:05:19.000
> 
> 标签：php, mysql, cookies

我知道这个问题可能会被问很多次，但他们中的大多数人建议你存储 ip+username+password 并散列整个事情并进行比较，相反我为我的网站想出了一个不同的解决方案，我想做这样的事情：

正在使用会话存储用户名、用户 ID、时区偏移等，现在假设我们说用户登录并且他检查了**记住我**，我将设置会话，然后我将生成一个变量 uniqueid 保存随机 12-13 位数字 ID，之后设置这个我将在他的浏览器上使用这个唯一的 ID 和用户名创建一个 cookie，并将其存储在我的数据库中，当他回来时，我会检查是否设置了该 id 和用户名 cookie，如果是，而不是从数据库中选择用户名，remembermeid其中用户名 = cookie 用户名，然后再次设置会话并将他扔到主页上，否则重定向到登录页面..

如果他注销，我将删除所有 cookie，并在他选择记住并登录后更新唯一值...

这样做有什么问题吗？还是更好的方法？我不希望密码保存在 cookie 中，即使是散列状态..或者我在做什么是完美的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:33:00.513

因此，据我了解您的描述，当用户登录（并希望保持永久登录状态）时，您执行以下操作：

*   创建一个随机令牌。
*   将随机令牌保存在该用户的用户数据库记录中（或保存在包含用户名和令牌的单独表中）。
*   在包含用户名和令牌的用户浏览器上设置 cookie。

当用户返回并且没有活动会话，但确实设置了上面的 cookie 时，您在数据库中查找他们的用户名。如果数据库包含该用户的“记住我”令牌，并且该令牌与 cookie 中的令牌匹配，则您为该用户创建一个新会话。

当用户注销时，您会从他们的浏览器中删除 cookie，并从数据库中删除令牌。

* * *

如果是这样，这是一个非常安全的设计，*只要*令牌足够长并且由安全的随机数生成器生成（如`/dev/urandom`在 Unix 上）。您说您的令牌是“12-13 位长”，相当于 40 位多一点；这有点偏低，我建议至少两倍。另外，您没有*说明*您是如何生成令牌的；仅使用 PHP`rand`或`mt_rand`不安全，因为它们的输出可能是可预测的。

我还建议进行两项改进：首先，在将令牌存储到数据库之前对其进行哈希处理（任何加密哈希函数都可以，例如 SHA-1 - 对于长随机令牌，您不需要任何特殊的密码哈希函数，如 PBKDF2）所以设法复制数据库的攻击者不会获得所有令牌。其次，在数据库中包含令牌的到期日期，以便单个受损令牌不会永远保持有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:10:33.143

您永远不必在 cookie 中存储用户名和/或密码。您只需要存储一个唯一标识符（随机生成），它可以与数据库中的散列会话标识符进行比较。

# ios - CorePlot (IOS)：绘制可见区域（放大/缩小后）

> ID：12337484
> 
> 赞同：0
> 
> 时间：2012-09-09T08:06:50.847
> 
> 标签：ios, core-plot

问题：

假设我有一个方程：y = x^2

使用 core-plot 我这样做：

```
-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
    return 3000;
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
    {
        NSNumber *num = nil;

        switch ( fieldEnum ) {
            case CPTScatterPlotFieldX:
                num = [NSNumber numberWithUnsignedInteger:index];
                break;
            case CPTScatterPlotFieldY:
                num = [NSNumber numberWithUnsignedInteger:index*index];
                break;
        }

        return num;
    } 
```

但这只会绘制 3000 个点，即使在缩小后（当 X 轴显示从 0 到 5000 的点时）。所以其余区域未绘制。

我想要的是：缩小后，我可以在整个可见区域刷新绘图。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:24:49.173

首先，我会将点数限制为不超过可用于绘制绘图的像素数。除此之外，只是需要更多的时间来绘制而没有明显的好处。查看绘图区域边界的大小以获取绘图区域的尺寸。`contentsScale`如果您可能在配备 Retina 显示屏的设备上运行，则将宽度和高度乘以。

您可以使用绘图空间委托来了解用户何时缩放或滚动图形。在您的委托方法中调用`reloadData`绘图以重新计算绘图数据。

# get - 使用 HttpWebRequest 和 GET 方法登录

> ID：12337486
> 
> 赞同：0
> 
> 时间：2012-09-09T08:07:01.737
> 
> 标签：get, httpwebrequest

我在使用 HttpWebRequest 和 POST 方法将信息发送到第三方服务器以验证用户名时遇到问题，我不断收到错误 405 not method allowed，所以我在想是否可以使用方法 GET 进行登录，但我有对这个话题一无所知，所以我想寻求一些帮助、教程或参考，或者如果有人有一个小方法。

好提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:10:27.713

使用 GET 登录是个坏主意。GET 本质上发送了 URL 中的所有数据，这总是不太安全。GET 也是幂等的（可添加书签）。您永远不会希望您的登录信息可收藏（通过 URL）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-09T08:09:17.793

使用 GET 而不是 POST，您只需将参数添加到查询字符串即可。

```
http://domain.com/login?username=<username>&password=<password> 
```

与使用两个值（用户名和密码）发布表单相同。

# magento - Magento重新排列块不起作用

> ID：12337487
> 
> 赞同：0
> 
> 时间：2012-09-09T08:07:49.303
> 
> 标签：magento, block

我想改变一些块的顺序和位置。从标题到右侧的位置已更改，但订单块不起作用。

这是我的代码：

```
<reference name="header">
    <action method="unsetChild"><name>top.menu</name></action>
    <action method="unsetChild"><name>top.search</name></action>
    <action method="unsetChild"><name>top.links</name></action>
</reference>

<reference name="right">
    <remove name="right.poll" />

    <action method="insert">
        <blockName>top.menu</blockName>
    </action>

    <action method="insert">
        <blockName>top.search</blockName>
    </action>

    <action method="insert">
        <blockName>top.links</blockName>
        <after>top.menu</after> <!-- Here I want top.links to come after top.menuwhich is not working --> 
    </action>
</reference> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:17:08.010

这里，`<after>`是一个布尔值，你不能在里面写块名称。

```
<action method="insert">
        <blockName>top.links</blockName>
        <after>top.menu</after> <!-- Here I want top.links to come after top.menuwhich is not working --> 
</action> 
```

试试这个：

```
<action method="insert">
        <blockName>top.links</blockName>
        <sublingName>top.menu</sublingName>
        <after>1</after>
</action> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T09:41:45.603

另一种选择是从一个干净的基础开始

1.  移除方块
2.  重新创建它们

这是我个人更喜欢的，因为完整的布局更新都在 local.xml 中，这样更易​​于阅读和理解以进行维护。这也可以避免块嵌套中的冲突，因为我的解决方案建议重命名它们（top.links => right.links，top.search => right.search，top.nav => right.nav）。但这只是我根据我的经验得出的看法:)

![从上到右](../Images/0d1c137c8b3304e120d75ed00dffac56.png)

所以这是我在 Magento 1.7.0.1 上成功尝试过的 local.xml

```
<layout version="0.1.0">
    <default>
        <reference name="header">
            <remove name="top.menu"/>
            <remove name="top.search"/>
            <remove name="top.links"/>
        </reference>

        <reference name="right">

            <block type="core/text_list" name="right.menu" as="topMenu" translate="label" before="-">
                <label>Navigation Bar</label>
                <block type="page/html_topmenu" name="catalog.rightnav" template="page/html/topmenu.phtml"/>
            </block>

            <block type="page/template_links" name="right.links" as="rightLinks" after="right.menu">
                <action method="addLink" translate="label title" module="customer"><label>My Account</label><url helper="customer/getAccountUrl"/><title>My Account</title><prepare/><urlParams/><position>10</position></action>

                <block type="wishlist/links" name="wishlist_link" />
                <action method="addLinkBlock"><blockName>wishlist_link</blockName></action>

                <block type="checkout/links" name="checkout_cart_link">
                    <action method="addCartLink"></action>
                    <action method="addCheckoutLink"></action>
                </block>
            </block>

            <block type="core/template" name="right.search" as="rightSearch" template="catalogsearch/form.mini.phtml" after="right.links"/>

        </reference>
    </default>

    <customer_logged_in>
        <reference name="right.links">
            <action method="addLink" translate="label title" module="customer"><label>Log Out</label><url helper="customer/getLogoutUrl"/><title>Log Out</title><prepare/><urlParams/><position>100</position></action>
        </reference>
    </customer_logged_in>

    <customer_logged_out>
        <reference name="right.links">
            <action method="addLink" translate="label title" module="customer"><label>Log In</label><url helper="customer/getLoginUrl"/><title>Log In</title><prepare/><urlParams/><position>100</position></action>
        </reference>
    </customer_logged_out>
</layout> 
```

# android - 在 Windows 7 中找不到 jdk

> ID：12337490
> 
> 赞同：1
> 
> 时间：2012-09-09T08:08:29.370
> 
> 标签：android, sdk, java, android-sdk-2.3

我已经安装`jdk-7u7-windows-x64`在我的 Windows 7（64 位）机器上，但是当我尝试安装时 `installer_r20.0.3-windows`出现以下错误

> 未找到 Java SE 开发工具包。在“C:\Windows\system32\java.exe”上找不到 Java 版本。该系统找不到指定的文件

我已将系统变量设置`JAVA_HOME`为

> %程序文件%\Java\jre7\bin

但这无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:13:25.870

您设置的是 jre 路径而不是 jdk 路径。安装 JDK 后，默认路径类似于`C:\Program Files\Java\jdk1.7.07`. 将此添加到路径中`JAVA_HOME`，然后`javac -version`在命令行中使用 cmd 测试安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:16:36.090

因为`installer_r20.0.3-windows`是 Android SDK 的安装程序；

从 Android SDK 的系统要求（[这里，单击系统要求](http://developer.android.com/sdk/index.html)）

```
JDK 6 (JRE alone is not sufficient) 
```

您已经安装了未列为工作的 JDK7。我建议您安装 32 位 JDK6，因为它是已知的工作配置。64 位*应该可以*工作，但[已知安装程序对该版本有一些问题](https://stackoverflow.com/questions/4382178/android-sdk-installation-doesnt-find-jdk)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T09:56:52.250

我解决了问题。首先删除 c:\windows\system32\java.exe 。删除后重新安装JDK并运行installer_r22.0.1-windows（你的版本）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-02-13T22:44:19.133

删除或重命名此路径 windows/system32/java.exe 中的 java.exe，然后按照 SDK 安装使用上一个 - 完成安装后的下一个按钮返回 java.exe 原样

# android - 在 Bluez 中创建 dbus 接口

> ID：12337491
> 
> 赞同：1
> 
> 时间：2012-09-09T08:09:03.130
> 
> 标签：android, linux, bluetooth, a2dp

关于创建 dbus 接口的问题，例如

org.bluez.Audio, org.bluez.AudioSource

出现在 d-feet 调试器上。

运行 Bluez（例如笔记本电脑）的主机是否为充当蓝牙 A2DP 源的远程设备创建接口**org.bluez.AudioSource ？**

同样，如何在任何蓝牙手机上创建一个**org.bluez.AudioSink**接口，例如使其充当 A2DP 接收器？在这种情况下，主机（例如笔记本电脑）是否应该创建一个 AudioSink 接口来与手机端的 bluez 交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:08:50.027

在 C 中创建 A2DP 连接你可以使用这些参数

```
DBusMessage *msg;   
msg = dbus_message_new_method_call("org.bluez",btadrr_path,"org.bluez.AudioSource","Connect"); 
```

这里 btaddre_path 是我已经配对的蓝牙设备路径...

在 Python 中

```
manager = dbus.Interface(bus.get_object("org.bluez", "/"), "org.bluez.Manager")

adapter = dbus.Interface(bus.get_object("org.bluez", manager.DefaultAdapter()), "org.bluez.Adapter");

audiosrc = dbus.Interface(bus.get_object("org.bluez", adapter.FindDevice(bdaddr)), "org.bluez.AudioSource");

audiosrc.Connect() 
```

# c# - 在不同的过程中与班级交流

> ID：12337495
> 
> 赞同：2
> 
> 时间：2012-09-09T08:09:38.403
> 
> 标签：c#, process, communication

我有一个名为 的类`worker`，我想在一个新进程中创建这个类的新实例。
但是我希望能够在这个类在新进程中打开并能够发送和接收数据之后与它进行通信。

我想要做的是，在对`worker()`新实例的任何调用中都将在新进程中打开，因此我可以在任务管理器中看到很多 worker.exe。

我以前使用 vb com 包装器完成过，但现在我只想在 C# 中执行此操作而没有 COM，
我可以以最基本的方式执行此操作吗？

上课示例：

```
public class worker
{
    public worker()
    {
        // Some code that should be open in a new process
    }

    public bool DoAction()
    {
        return true;
    }
} 
```

主程序示例：

```
worker myWorker = new worker();//should be open in a new process
bool ret = myWorker.DoAction(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:13:38.290

您可以在 WCF 端点中公开您的操作。然后，从一个进程开始另一个进程。然后，您可以连接到该进程公开的端点以与之通信。

通常，这就是[WCF 命名管道用于](http://www.jmedved.com/2010/03/named-pipes-in-wcf/).

取自链接：

```
[ServiceContract(Namespace = "http://example.com/Command")]
interface ICommandService {

    [OperationContract]
    string SendCommand(string action, string data);

}

class CommandClient {

    private static readonly Uri ServiceUri = new Uri("net.pipe://localhost/Pipe");
    private static readonly string PipeName = "Command";
    private static readonly EndpointAddress ServiceAddress = new EndpointAddress(string.Format(CultureInfo.InvariantCulture, "{0}/{1}", ServiceUri.OriginalString, PipeName));
    private static readonly ICommandService ServiceProxy = ChannelFactory<ICommandService>.CreateChannel(new NetNamedPipeBinding(), ServiceAddress);

    public static string Send(string action, string data) {
        return ServiceProxy.SendCommand(action, data);
    }
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
class CommandService : ICommandService {
    public string SendCommand(string action, string data) {
        //handling incoming requests
    }
}
static class CommandServer {

    private static readonly Uri ServiceUri = new Uri("net.pipe://localhost/Pipe");
    private static readonly string PipeName = "Command";

    private static CommandService _service = new CommandService();
    private static ServiceHost _host = null;

    public static void Start() {
        _host = new ServiceHost(_service, ServiceUri);
        _host.AddServiceEndpoint(typeof(ICommandService), new NetNamedPipeBinding(), PipeName);
        _host.Open();
    }

    public static void Stop() {
        if ((_host != null) && (_host.State != CommunicationState.Closed)) {
            _host.Close();
            _host = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:49:44.890

您能否不仅拥有一个启动并启动 DoAction() 方法的工作应用程序。然后使用任何进程间通信方法（如命名管道）在它们之间进行通信。

这很好地解释了，[匿名管道](http://msdn.microsoft.com/en-us/library/bb546102.aspx)与我提到的命名管道相反。

> 匿名管道提供的功能比命名管道少，但也需要较少的开销。您可以使用匿名管道使本地计算机上的进程间通信更容易。您不能使用匿名管道通过网络进行通信。

# dll - Directshow 渲染窗口 DLL，

> ID：12337497
> 
> 赞同：0
> 
> 时间：2012-09-09T08:09:46.673
> 
> 标签：dll, window, directshow, renderer

有没有办法从 DLL 中弹出 directshow 渲染窗口。相同的代码会从 .exe 应用程序中弹出视频渲染窗口。DLL 是库，所以我想你不能有图形的反馈。好吧，我知道这是一场灾难，但这只是为了调试。

我遇到了这个。

[如何从本机 C DLL 显示简单的无模式窗口](https://stackoverflow.com/questions/8833250/how-to-show-a-simple-modeless-window-from-a-native-c-dll)

任何建议都会奏效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:42:26.790

不存在阻止您与 DLL 中的 DirectShow API 交互的约束。您可以从那里执行所有相同的 GUI。此外，不涉及任何黑客行为——您以一种直接的方式进行操作：您创建窗口，您创建 DirectShow 图形和过滤器，您设置所有内容并且它以相同的方式工作。

# md5 - 使用已弃用的模块 md5

> ID：12337503
> 
> 赞同：1
> 
> 时间：2012-09-09T08:11:20.023
> 
> 标签：md5, hashlib

我在 python 中使用以下代码：

```
from hashlib import md5
user_code = string.upper( md5.new(user_str).hexdigest() ) 
```

警告是

DeprecationWarning：不推荐使用 md5 模块；改用 hashlib

您能否帮助如何更新此代码，以便它也可以在当前版本的 python 上运行？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:26:36.890

您没有指定您使用的是哪个版本的 python。我假设您使用的是 2.7 而不是 3

```
import hashlib

user_str = "foo"    
user_code = hashlib.md5(user_str).hexdigest().upper() 
```

来自文档：[http ://docs.python.org/library/hashlib.html#module-hashlib](http://docs.python.org/library/hashlib.html#module-hashlib)

# java - HibernateTransactionManager 或 JpaTransactionManager

> ID：12337504
> 
> 赞同：43
> 
> 时间：2012-09-09T08:11:36.047
> 
> 标签：java, spring, hibernate, jpa

和朋友一起开发应用程序，但遇到了一个问题……我有这段代码：

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="configLocation">
        <value>classpath:hibernate.cfg.xml</value>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${jdbc.dialect}</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
        </props>
    </property>
</bean>

<tx:annotation-driven />
<bean id="transactionManager"
    class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="dataSource" ref="dataSource" />
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

他将其全部删除，将其更改为：

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="persistenceUnit"/>
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

**他说，这是更好的方法，但没有准确解释原因。关于不直接使用休眠的东西，这是否意味着我们根本不再使用休眠？真的是更好的方法吗？**

DAO 变成了这样：

我有：

```
@Autowired
private SessionFactory sessionFactory;

public void addUser(User user) {
    sessionFactory.getCurrentSession().save(user);
} 
```

现在是：

```
@PersistenceContext
private EntityManager entityManager;

public void addUser(User user) {
    entityManager.persist(user);
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-09T08:23:15.370

他希望您的代码依赖于 JPA，而不是 Hibernate。`javax.persistence.EntityManager`是 JPA (Java EE) 标准接口，`org.hibernate.SessionFactory`而是 Hibernate 属性接口。从 SessionFactory 迁移到 EntityManager 使您的类不再依赖于 Hibernate。使用 JPA 方式而不是 Hibernate 方式被当今大多数人认为是最佳实践。

请注意，您的系统仍然依赖于 Hibernate，因为您需要 JPA 提供程序。但是，如果您将来想更改为另一个 JPA 提供程序，那应该很简单。使用 JPA 的另一个优点是 JPA 接口比 Hibernate 接口更稳定。

# c# - 为什么我不能为 const int 字段赋值？

> ID：12337505
> 
> 赞同：-5
> 
> 时间：2012-09-09T08:11:37.683
> 
> 标签：c#, int, constants, variable-assignment, build-error

好的，所以我有一个叫做“Var1”的int：

```
public const int Var1 = 0; 
```

现在我想将它分配给一个 Int32 值，如下所示：

```
Var1 = Convert.ToInt32(Console.ReadLine()); 
```

然后它会给我这个错误：

> 赋值的左侧必须是变量、属性或索引器

帮助？我是新手，如果这是一个简单的错误，我很抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:13:20.847

[`const`](http://msdn.microsoft.com/en-us/library/e6w8fe1b%28v=vs.71%29.aspx)关键字意味着该字段是一个常量*，*因此只能分配*一次*：在声明时。

您已经分配了 value `0`，因此以后不能用新值覆盖它。

删除修饰符以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T08:14:02.173

想想你在那里做什么：

```
public const int Var1 = 0; 
```

`const`表示**常数**。这意味着您**无法**更改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T08:14:22.080

A`const`是一个*常数*；您不能在运行时更改其值（并且 iNitial alum 必须是在编译器处评估的常量表达式）。

只需删除`const`并且事情应该可以工作：

```
public int Var1 = 0;
// ...
Var1 = Convert.ToInt32(Console.ReadLine()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T08:14:32.020

您声明`Var1`为[const](http://msdn.microsoft.com/en-us/library/e6w8fe1b.aspx)（这本身就是一个矛盾的说法）。

`const`成员无法修改，因此无法分配给。如果要`Var1`可变，请删除`const`修饰符：

```
public int Var1 = 0; 
```

请注意，您不需要将成员显式初始化为`0`，因为它是`int`类型的默认值。你只需要写：

```
public int Var1; 
```

我还建议制作成员`private`并通过 aa 属性将其暴露给外界`public`，这被认为是一种更好的封装做法：

```
private int _var1;

public int Var1
{
    get {
        return _var1;
    }
    set {
        _var1 = value;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T08:17:15.137

好吧， Var1 被声明为 const 字段，这意味着您无法更改其值。如果要更改 Var1 的值，则必须删除“const”限定符。

# clojure - 如何使用 clojurescript repl 评估宏

> ID：12337509
> 
> 赞同：4
> 
> 时间：2012-09-09T08:12:19.553
> 
> 标签：clojure, clojurescript

一旦浏览器连接到 clojurescript repl，我以前无法从 repl 调用宏。这是一个过去让我放弃 clojurescript 的问题，我更喜欢直接使用 javascript。基本上，我觉得 cljs-repl 有点蹩脚，我又回到了编译/调试周期，在 clojure 中编写代码应该让我们从中解放出来。

在 clojurescript 中推送和测试代码是否有任何好的解决方法/工作流程？特别是如果可以评估宏？

我的问题的一个例子是：

1.  创建一个新的 cljs 项目

    > lein new cljs-template 等等

2.  启动服务器

    > 光盘等等
    > 
    > 来跑

3.  运行 web-repl

    > lein trampoline cljsbuild repl-listen

4.  有一个`src/blah/client/main.cljs`带有标题的文件

```
    (ns blad.client.main
      (:require [noir.cljs.client.watcher :as watcher]
                [clojure.browser.repl :as repl]
                [crate.core :as crate])
      (:use [jayq.core :only [$ append]])
      (:use-macros [crate.macros :only [defpartial]]))

```

注意线`(:use-macros [crate.macros :only [defpartial]])`

我不能`defpartial`在浏览器 repl 中使用，因为它是一个宏。我得到的错误是：

```
>> (crate.macros/defpartial [])
“评估错误：” (crate.macros/defpartial []) :as “crate.macros.defpartial.call(null,cljs.core.Vector.fromArray([]));\n”
#
TypeError：无法读取未定义的属性“defpartial”

```

现在defpartial 是一个非常有用的宏，如果没有它，它会很麻烦。

当我想在项目中定义另一个宏时，我的问题变得更糟了`:use-macros`。我根本无法调试我在 repl 或浏览器中写的内容，大约半天后，我发现使用 clj repl 更快，使用 macroexpand 测试宏，然后将结果复制回浏览器复制 大约一天后，我得到了一个 cljs 宏，它不是很有趣。这是大约 6 个月前的事了。我希望现在有一种更快的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T16:13:12.477

为了在带有 bREPL 的交互式会话期间加载宏，您需要首先在 bREPL 中显式评估 ns 表单。

即便如此，这还是有点烦人 - 一些工作已经登陆 master 以支持交互式宏扩展，但它需要更多的工作。W 也有一些想法，通过在启动时分析源文件来使 bREPL 更有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T18:20:23.047

今天我用[cemerick/austin](https://github.com/cemerick/austin)进行了检查：一个 clojureScript 浏览器-REPL，您可以不受限制地在 brepl 中使用和评估您的宏，也就是说，无需先在 brREPL 中明确评估 ns 形式。我在这个[演示项目](https://github.com/juanantonioruz/client)中使用core.async 宏和自定义域宏没有问题。

# java - 当我将具有已定义堆栈大小的本机线程附加到设置了 Xss 的 JVM 时会发生什么？

> ID：12337522
> 
> 赞同：2
> 
> 时间：2012-09-09T08:13:39.883
> 
> 标签：java, java-native-interface, stack

我试图了解当在创建时指定堆栈大小的本机线程附加到具有 -Xss 属性集的 JVM 时会发生什么。更具体地说，这两个设置是否不同，或者如果它们相同，当附加到 JVM 时，本机堆栈大小会发生什么变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T08:20:19.563

> 发生什么了 ...

没有。您的线程继续以您创建它的方式存在。-Xss 适用于 JVM 创建的线程，可能仅适用于 Java 线程。

事实上，在我熟悉的线程 API 中，没有办法在创建后更改线程的堆栈大小。

# java - 如何将 int 变量从 applet 发送到 PHP

> ID：12337531
> 
> 赞同：1
> 
> 时间：2012-09-09T08:16:32.350
> 
> 标签：java, php, mysql, http, applet

> **可能重复：**
> [如何在 java 中发送 HTTP 请求？](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)

我在一个小程序中运行 Java 代码，我想通过单击一个按钮将高分发送回 PHP，在那里可以根据数据库中保存的某些条件对其进行操作。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:23:17.750

使用 java.net.URL 类将数据 GET 或 POST 到 url。任何运行的小程序都应该能够做到。实现你的 PHP 来监听这个请求。

URL 可能看起来像`http(s)://<IP>:<PORT>/<CONTEXT>?myvar=<myvalue>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:30:57.217

您有多种选择：
1) 使用 Apache [HTTPClient](http://hc.apache.org/httpcomponents-client-ga/index.html)
2) 使用[URLConnection](http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html)
查看问题的答案：
1)[使用 Apache 的 HttpClient 与使用 JDK 的 URLConnection 从小程序内连接到 URL](https://stackoverflow.com/questions/1216165/connection-to-a-url-from-within-an-applet-using-apaches-httpclient-vs-using-the)
2)[如何使用 java.net。 URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

# c# - 对称加密算法功能

> ID：12337533
> 
> 赞同：4
> 
> 时间：2012-09-09T08:16:44.060
> 
> 标签：c#, encryption, encryption-symmetric

首先，我还在学习面向对象编程。好的，我有一个包含不同类型对称算法的组合框。

```
private void Form3_Load(object sender, EventArgs e)
{
    openencrypt();
    comboBox1.Items.Add("AES");
    comboBox1.Items.Add("DES");
    comboBox1.Items.Add("Rijndael");
    comboBox1.Items.Add("RC2");
    comboBox1.Items.Add("Triple DES");
    comboBox1.SelectedIndex = 0;
} 
```

然后我让我的加密函数检查它们是什么类型。

```
byte[] hpass;
string nFilepath = Set.nfilepath;
FileStream Open = new FileStream(oFilepath, FileMode.Open, FileAccess.Read);
FileStream Save = new FileStream(nFilepath, FileMode.OpenOrCreate, FileAccess.Write);
SHA512 sh512 = new SHA512Managed();
hpass = sh512.ComputeHash(Encoding.ASCII.GetBytes(textBox1.Text));
PasswordDeriveBytes pdb = new PasswordDeriveBytes(hpass, hash);

if (comboBox1.SelectedIndex.Equals(0))
{
    Aes alg = Aes.Create();
    alg.Key = pdb.GetBytes(32);
    alg.IV = pdb.GetBytes(16);
}
if (comboBox1.SelectedIndex.Equals(1))
{
    DES alg = DES.Create();
    alg.Key = pdb.GetBytes(32);
    alg.IV = pdb.GetBytes(16);
}
if (comboBox1.SelectedIndex.Equals(2))
{
    Rijndael alg = Rijndael.Create();
    alg.Key = pdb.GetBytes(32);
    alg.IV = pdb.GetBytes(16);
} 
```

但是当我不想在每个 if 语句中放置一个加密流时。那么有没有办法将检查卸载到函数并返回对称算法类型？用钥匙和 IV？我完全错了吗？##标题##

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:32:51.540

更面向对象的方法是：

创建要在组合框中显示的算法界面：

```
public interface IAlgorithmItem
{
    SymmetricAlgorithm CreateAlgorithm();

    string DisplayName { get; }
} 
```

然后，为每个所需的算法创建一个新类：

```
public class AesAlgorithm : IAlgorithmItem
{
    public AesAlgorithm()
    {
    }

    public SymmetricAlgorithm CreateAlgorithm()
    {
        return Aes.Create();
    }

    public string DisplayName
    {
        get { return "AES"; }
    }
}

public class RijndaelAlgorithm : IAlgorithmItem
{
    public SymmetricAlgorithm CreateAlgorithm()
    {
        return Rijndael.Create(); 
    }

    public string DisplayName
    {
        get { return "Rijndael"; }
    }
}

// ... 
```

然后，您可以创建一个新的项目列表：

```
var listItems = new List<IAlgorithmItem>() { new AesAlgorithm(), new RijndaelAlgorithm() }; 
```

然后你可以将你的组合框绑定到这个列表：

```
comboBox1.DataSource = listItems;
comboBox1.DisplayMember = "DisplayName"; 
```

稍后，您可以引用所选项目：

```
var algorithmItem = (IAlgorithmItem)comboBox1.SelectedItem;
var algorithm = algorithmItem.CreateAlgorithm(); 
```

编辑：更新了 Will 关于使用接口而不是抽象基类的建议。编辑 2：更新为使用创建方法而不是属性，因为操作的结果将在每次访问时创建一个新算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T08:44:37.300

好吧，我的第一个想法是为您提供指向[工厂方法](http://wikipedia.org/wiki/Factory_pattern)和[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern)模式的 Wikipedia 链接（在那里，我仍然这样做了），但是既然您说您是初学者，我们就不要提前拿出大炮。

基本上，您需要找到所有加密算法的共同特征并创建一个方法，该方法将返回具有该共同特征的对象实例。这种特征的表现可以是 C# 中的抽象类或接口，你很幸运，你选择的所有加密都派生自 SymmetricAlgorithm（“运气”可能是对 System.Security.Cryptography 设计者的侮辱，但我相信他们会为了说明而原谅我；）。

因此，只需通过引入一种新方法来[重构您的代码，可能遵循以下思路：](http://en.wikipedia.org/wiki/Refactoring)

```
private SymmetricAlgorithm GetAlgorithm(int index)
{
  switch (index)
  {
    case 0:
      return Aes.Create();
    case 1:
      return DES.Create();
    case 2:
      return Rijndael.Create();
    default:
      throw new NotSupportedException("unknown algorithm");
  }
} 
```

您可以从其余代码中轻松找出如何使用这种新方法。

# scala - sbt 系统级全局 .sbt 文件

> ID：12337536
> 
> 赞同：3
> 
> 时间：2012-09-09T08:17:39.687
> 
> 标签：scala, sbt

我知道我可以在 ~/.sbt 下进行全局设置。是否有系统级位置可以为所有用户放置全局 .sbt 文件？本质上，我打算将一般有用的插件配置等放在文件中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:45:34.287

我不知道 sbt 中有这样的功能。符号链接呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:08:58.017

虽然我还没有找到直接使用 sbt 执行此操作的方法，但您可以尝试将默认设置作为符号链接添加到 /etc/skel/.sbt/plugins 并将实际默认设置存储在（例如）/etc/sbt /settings/global.sbt。

在 /etc/sbt/settings/ 到 /etc/skel/.sbt/plugins 中为每个文件创建一个符号链接，任何新用户都将自动获取全局设置，并且任何更改也将自动传播。

不过，您将不得不手动将链接添加到现有用户（除非有一种方法可以在创建后从骨架更新用户的家？）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-08T07:35:56.967

一个更好的方法是：
1\. 编写一个`autoplugin`with`autoImport`和 triggers 作为`allDependencies`（并且不要让你的插件依赖于任何其他插件）
2\. 将你的插件发布到（你的组织的）repo ....或发布如果所有用户都使用共享机器，则在本地
3\. 将插件包含在所需的任何项目中

# sql - 关注 ADO.net 命令

> ID：12337537
> 
> 赞同：0
> 
> 时间：2012-09-09T08:18:09.150
> 
> 标签：sql, ado.net

我想执行以下命令文本（sql语句）我需要使用哪个命令？

```
command.CommandText="select Fname from table_name where Lname='abc'" 
```

我需要使用 ExecutScalar 或 ExecuteReader 命令，请您确认一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:23:03.037

要么会工作。这取决于预期的结果。

如果您只返回一个值，`ExecuteScalar`将是首选。

否则，使用`ExecuteReader`或填写`DataTable`

# c# - 如何获取“[\””和“\”，之间的所有字符？

> ID：12337540
> 
> 赞同：-3
> 
> 时间：2012-09-09T08:18:29.930
> 
> 标签：c#, string

> **可能重复：**
> [如何删除“<”和“>”之间的所有字符，包括“<”和“>”？](https://stackoverflow.com/questions/12337243/how-to-remove-all-characters-between-and-including-and)
> [当我尝试获取 [“ 和 ” 之间的所有子字符串时如何解决此错误，（有代码）？](https://stackoverflow.com/questions/12347475/how-to-fix-this-error-when-i-try-to-get-all-substring-between-and-have-co)

我有字符串：

```
window.google.ac.h(["new yor",[["new york times",0,[]],["new york",0,[]],["new york city",0,[]],["new york university",0,[]],["new york school",0,[]]],{"j":"13","q":"ggIoEiJIv-q5I7KyDDspEWBWyH0"}]) 
```

我想要这些字符串：

```
new yor
new york times
new york city
new york university
new york school 
```

所有这些字符串都是 betent`["`和`",`

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:22:17.727

使用正则表达式可以有效地完成您的任务。您的正则表达式可能如下所示：

```
(?<=\[")[^"]+ 
```

看到它住[在这里](http://regexhero.net/tester/?id=9d916435-330d-4e1c-8baa-10eb784b16f4)。

这`(?<=\[")`部分被称为lookbehind，你说你正在寻找后面的任何东西`["`。然后你只需取除任何字符`"`

摘自[.NET 正则表达式参考](http://msdn.microsoft.com/en-us/library/az24scfc)：

> **(?<= subexpression)**零宽度正向后向断言。
> 
> **[^ character_group ]**否定：匹配任何不在 character_group 中的单个字符。默认情况下，character_group 中的字符区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:25:27.577

您需要在返回此项索引的 int 的字符串上使用 .IndexOf("[\"") 扩展名，然后对其他字符串执行相同操作。

一旦您拥有两个索引的 int ，您就可以根据这些索引对其进行 .SubString 。

# haskell - 减少 GHC 生成的可执行文件的大小

> ID：12337543
> 
> 赞同：20
> 
> 时间：2012-09-09T08:18:47.987
> 
> 标签：haskell, executable, ghc

使用带有 -O3 等标志的 GHC 版本 7.4.2，我仍然可以生成巨大的可执行文件。我了解 GHC 进行静态链接，二进制文件的依赖项如下所示：

```
 linux-vdso.so.1 (0x00007fff49bff000)
    libpcre.so.1 => /usr/lib/libpcre.so.1 (0x00007fe658d6c000)
    librt.so.1 => /usr/lib/librt.so.1 (0x00007fe658b64000)
    libutil.so.1 => /usr/lib/libutil.so.1 (0x00007fe658961000)
    libdl.so.2 => /usr/lib/libdl.so.2 (0x00007fe65875d000)
    libpthread.so.0 => /usr/lib/libpthread.so.0 (0x00007fe658541000)
    libcurl.so.4 => /usr/lib/libcurl.so.4 (0x00007fe6582e3000)
    libgmp.so.10 => /usr/lib/libgmp.so.10 (0x00007fe658074000)
    libm.so.6 => /usr/lib/libm.so.6 (0x00007fe657d7a000)
    libgcc_s.so.1 => /usr/lib/libgcc_s.so.1 (0x00007fe657b65000)
    libc.so.6 => /usr/lib/libc.so.6 (0x00007fe6577be000)
    /lib/ld-linux-x86-64.so.2 (0x00007fe658fca000)
    libssh2.so.1 => /usr/lib/libssh2.so.1 (0x00007fe657595000)
    libssl.so.1.0.0 => /usr/lib/libssl.so.1.0.0 (0x00007fe65732b000)
    libcrypto.so.1.0.0 => /usr/lib/libcrypto.so.1.0.0 (0x00007fe656f22000)
    libz.so.1 => /usr/lib/libz.so.1 (0x00007fe656d0c000 
```

到目前为止，它看起来相当不错，但是在二进制文件中我可以看到以下行：

```
GHCi runtime linker: fatal error: I found a duplicate definition for symbol
* Specifying the same object file twice on the GHCi command line 

  ....BlockedIndefinitelyOnMVar.......BlockedIndefinitelyOnSTM........AsyncException..base....GHC.IO.FD.......FD......GHC.IO.FD.setSize. 
```

实际上有很多文本行，包括我的函数名称、在其他模块中定义的函数等等。问题是 - 是否可以删除这些文本，GHC 是否可以从外部库中删除未使用的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T08:59:45.970

与大多数其他编译器相比，LLVM 可以在链接时进行更多优化。也许 GHC 有一个 LLVM 后端，您可以使用 -O4 重新编译和链接您的部分/全部依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T08:37:45.597

如果您使用 gcc 后端，您可以传递`-optc-Os`标志`ghc`来优化输出的大小。也许您可以将二进制文件减少一些字节。但我也建议使用之前建议的动态链接，它的优点和缺点。

更新：

使用 UPX [http://en.wikipedia.org/wiki/UPX](http://en.wikipedia.org/wiki/UPX)或 gzexe 压缩可执行文件以减小可执行文件的大小。

# ios - NSStrings 在中间加入字符

> ID：12337553
> 
> 赞同：-1
> 
> 时间：2012-09-09T08:20:06.800
> 
> 标签：ios, xcode, nsstring

我正在尝试创建一个`NSString`基本上如下所示的单个“查询”对象：

```
query1=myFirstParameter&query2=mySecondParameter&query3=myThirdParameter 
```

我得到了如下所示的字符串：

```
query1=myFirstParameter
query2=mySecondParameter
  and
query3=myThirdParameter 
```

我的问题是：有没有一种简单的方法可以通过添加来组合这 3 个组件？考虑到字符串的数量，它们之间的字符是可变的？即，具有格式的简单字符串对于我的目的来说太不灵活了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T08:24:28.807

好吧，如果你有可变数量的字符串要连接，你可以将它们变成一个数组并通过`@"&"`字符串连接它们：

```
NSArray *components = [NSArray arrayWithObjects:query1, query2, query3, nil];
NSString *result = [components componentsJoinedByString:@"&"]; 
```

你甚至可以把它变成一个可变参数宏：

```
#define BUILD_QUERY(...) [[NSArray arrayWithObjects:__VA_ARGS__ , nil]
    componentsJoinedByString:@"&"] 
```

# ruby-on-rails - will_paginate 增量表id

> ID：12337557
> 
> 赞同：3
> 
> 时间：2012-09-09T08:20:35.267
> 
> 标签：ruby-on-rails

我有一张桌子，每页分页 20 个：

```
 <% @num = 0%>
    <table>
    <tr>
      <th>id</th>
      <th>title</th>
    </tr>

    <% for authors in @authors%>
    <tr>
       <td><%= @num += 1 %></td>
       <td><%= authors.title %></td>
    </tr>
    <% end %>

</table>
<%= will_paginate @authors%> 
```

我想让 id 行继续。当我点击第一页时，我应该看到 1,2 3, 4 等 ID。当我点击第二页时，我应该会看到 21、22、23 等，但它只是重新启动到 1、2 3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T08:29:09.703

而不是初始化`@num`为0，将其设置为

```
 @authors.offset 
```

当你这样做

```
@authors = Author.paginate(...) 
```

你得到的是一个`WillPaginate::Collection`. 这是 Array 的子类，具有总页数、每页项目数等方法。特别是`offset`给出当前页的偏移量。

# php - PHP会话时间不起作用

> ID：12337566
> 
> 赞同：1
> 
> 时间：2012-09-09T08:22:40.947
> 
> 标签：php

我一直在页面请求之间超时。有时它似乎有效，而另一些则无效。似乎看不到模式或原因。我在每个页面顶部使用以下代码并`$_SESSION['start']`在验证和登录用户时进行设置。

```
<?php 
session_start();
$inactive = 86400;
if(isset($_SESSION['start']) ) {
$session_life = time() - $_SESSION['start'];
if($session_life > $inactive){
    header("Location: login/logged_out.php");
}
}
$_SESSION['start'] = time();

$isLoggedIn = isset($_SESSION['first_name']) && isset($_SESSION['username']);

$_SESSION['url'] = $_SERVER['REQUEST_URI'];
?> 
```

我做错了什么，如何让用户保持登录状态？我必须设置一个cookie吗？或者是PHPINI文件中的默认会话到期时间低于我设置的时间，因此让我超时。任何想法我可以如何覆盖它并让用户在我指定的时间内保持登录状态。这开始让我有点发疯了。

我还看到使用`ini_set("session.cookie_lifetime","86400");`可能有效？

任何帮助都会非常受欢迎。

# c - tolow() 函数问题

> ID：12337570
> 
> 赞同：1
> 
> 时间：2012-09-09T08:23:08.013
> 
> 标签：c, unix, tolower

这是我的示例代码：

```
#include<stdio.h>
#include<string.h>
#include<ctype.h>

void convert(char *a, char *b) {
    int i;
    for(i=0; i<strlen(a); i++) {
        b[i]=tolower(a[i]);
    }
}

int main() {
    char a[20], b[20];

    fgets(a, sizeof(a), stdin);
    convert(a, b);
    printf("%s\n", b);
    return 0;
} 
```

但有时 convert() 函数也会比 strlen(a) 多转换一个字符（它是一个随机字符），例如这是一个输出：

```
ASDSA
asdsa
% 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T08:25:19.443

您必须在 .`'\0'`末尾添加一个空字符 ( ) `b`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T09:22:24.120

正如其他人所提到的，您需要以空值终止目标字符串。除此之外，请注意，您正在重新计算`a`循环每次迭代的长度。这对于小字符串无关紧要，但对于大字符串，您会注意到转换时间与字符串长度的平方成正比。标准的成语是计算一次长度并重复使用。通过这两个更改，函数将如下所示：

```
void convert(const char *a, char *b) {
    size_t i, len = strlen(a);
    for(i = 0; i < len; i++) {
        b[i] = tolower((unsigned char) a[i]);
    }
    b[len] = '\0';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T08:35:13.037

strlen 返回字符串的长度，例如 strlen("hello") 为 5。这不会复制用于终止字符串的 0 字符（这意味着内存中的字符串实际上是 6 个字符长：'h''e ''l' 'l' 'o' '0')

# c - 关于指向 char 的通用指针和严格的别名

> ID：12337574
> 
> 赞同：2
> 
> 时间：2012-09-09T08:23:55.890
> 
> 标签：c, char, strict-aliasing

我不知道为什么下面的代码工作正常，没有`gcc`错误（`-fstrict-aliasing -Wstrict-aliasing=1`）。

```
#include <stdio.h>

int 
main(void) 
{
    char  n = 42;
    char *p = &n;
    int  *q = (int *)p;

    *q = 10;

    printf("%d|%d\n", *p, *q);

    return 0;
} 
```

如果我遵循严格的别名规则：

> **n1570, § 6.5 表达式**
> 
> 对象的存储值只能由具有以下类型之一的左值表达式访问：
> 
> — 与对象的有效类型兼容的类型，
> 
> — 与对象的有效类型兼容的类型的限定版本，
> 
> — 与对象的有效类型相对应的有符号或无符号类型，
> 
> — 对应于对象有效类型的限定版本的有符号或无符号类型，
> 
> — 在其成员中包含上述类型之一的聚合或联合类型（递归地，包括子聚合或包含联合的成员），或
> 
> — 一种字符类型。

但`*q`不具有与 兼容的类型`*p`，要么是限定版本，要么是对应的有符号或无符号类型，要么是字符类型。

那么，为什么允许呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-23T19:24:42.460

不允许。您发布的标准部分显示了您允许为对象命名的类型。

编译的代码并不意味着它是正确的。您的代码存在三个问题，导致程序表现出未定义的行为。

首先是您将 char 指针分配给 int 指针。标准不强制它们的对齐和表示，因此结果指针无效。

```
int  *q = (int *)p; 
```

然后，您将`char n`对象解释为整数，违反了严格的别名。（请注意问题中标准的引用）。

```
*q; 
```

最后，您将 an`int`写入 char 对象 ( ) 的内存`char n`，这会导致溢出，因为 an 的大小`int`始终大于 a 的大小`char`。

```
*q = 10; 
```

# database - 文本参考软件开发。图形用户界面替代品？

> ID：12337575
> 
> 赞同：2
> 
> 时间：2012-09-09T08:24:01.007
> 
> 标签：database, sorting, reference, filtering

下面是一个 youtube 视频，展示了文本参考程序的功能。该程序已在其中嵌入技术信息，并允许您通过选择参数来浏览相关信息。我碰巧有这个程序，我发现它使用 Microsoft Access 数据库对信息进行排序和过滤。

> [http://www.youtube.com/watch?v=Iok87E1asoY](http://www.youtube.com/watch?v=Iok87E1asoY)

我正在尝试创建一个做同样事情的软件，而无需创建自己的软件并将其链接到 MS Access 数据库。为此，我希望已经有一些软件具有 GUI 来构建这些“知识数据库”并为它们过滤。

我试图实现的基本机制是在后台有一个巨大的文本信息列表，然后有复选框和下拉菜单（就像在视频中一样）有条件地过滤整个文本信息并只提取相关位把它们吐出来。

例如，让我们使用车辆交通规则。

*   如果交通灯是绿色的，请通过。
*   如果交通灯是红色的，请不要通过。
*   如果交通灯是黄色的，请减速。
*   如果红绿灯是绿色、黄色或红色，并且附近有现场救护车，请减速并在可能的情况下靠边停车。

那么你会有一个下拉菜单，询问交通灯是什么颜色。还有一个复选框，询问附近是否有现场救护车。

如果您从下拉菜单中选择“红绿灯为红色”，程序将显示“不要通过交叉路口”消息或“停止。不要走”。如果您选择绿色或黄色，还有其他明显的信息。

如果勾选了表示附近有现场救护车的复选框，则无论交通信号灯是什么颜色，您都会收到“如果可能，请减速并靠边停车”的消息。

当您拥有大量信息时，这将变得很有用，而且您不必每次需要阅读数百页来找出要做什么，而是可以快速过滤它。

# php - php 帮助 - 需要使用字符串来回显 php

> ID：12337576
> 
> 赞同：-6
> 
> 时间：2012-09-09T08:24:11.807
> 
> 标签：php, javascript

我正在尝试在我的 php 代码中添加下面提到的一些内容，但是当我尝试使用 firefox 或任何其他浏览器打开时，它会引发解析错误...因此希望对此有一些专业知识...

```
<?php

$var1 = array();
//These are two of my website abc.com & abcdef.info...
$var1[] = "http://abc.com";
$var1[] = "http://abcdef.info";

$var2   = $var1[array_rand($var1)];

?>

//Now i need to echo $var2 on all 3 strings below, but as you see sometimes the echo needs to be executed not only by the end of the string but between the links of the below mentioned strings, so that i would be able to echo the final result from $test onto $var3.
<?php

$tests = array();
//three strings
$tests[] = "http://www.123.com/folder/subfolder.php?u="<?php echo "$var2";?>"";
$tests[] = "http://www.456.com?u="<?php echo "$var2";?>"&myimagelink&mydescription";
$tests[] = "http://www.some-other-site.com/okay/?u="<?php echo "$var2";?>"&myimagelink&mydescription";

$test   = $tests[array_rand($tests)];

?>

//an example of what needs to be printed according to a browser point of view is $var3 = http://www.456.com?u=http://abcdef.info&myimagelink&mydescription";
$var3 = "<?php echo "$var2";?>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:25:55.877

[连接](http://php.net/manual/en/language.operators.string.php)。

```
$tests[] = "http://www.123.com/folder/subfolder.php?u=".$var2;
$tests[] = "http://www.456.com?u=".$var2."&myimagelink&mydescription";
$tests[] = "http://www.some-other-site.com/okay/?u=".$var2."&myimagelink&mydescription"; 
```

或者更简单，

```
$tests[] = "http://www.123.com/folder/subfolder.php?u=$var2";
$tests[] = "http://www.456.com?u=$var2&myimagelink&mydescription";
$tests[] = "http://www.some-other-site.com/okay/?u=$var2&myimagelink&mydescription"; 
```

# ruby-on-rails - Rails g迁移不起作用

> ID：12337577
> 
> 赞同：2
> 
> 时间：2012-09-09T08:24:20.517
> 
> 标签：ruby-on-rails, ruby, migration

当我运行命令时

> rails g 迁移 migration_name

我将收到“错误”消息：

```
Usage:
  rails new APP_PATH [options]

Options:
  -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
                                 # Default: /Users/radek/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
  -b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem path or URL)
  -m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
      [--skip-gemfile]           # Don't create a Gemfile
      [--skip-bundle]            # Don't run bundle install
  -G, [--skip-git]               # Skip Git ignores and keeps
  -O, [--skip-active-record]     # Skip Active Record files
  -S, [--skip-sprockets]         # Skip Sprockets files
  -d, [--database=DATABASE]      # Preconfigure for selected database (options: mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc)
                                 # Default: sqlite3
  -j, [--javascript=JAVASCRIPT]  # Preconfigure for selected JavaScript library
                                 # Default: jquery
  -J, [--skip-javascript]        # Skip JavaScript files
      [--dev]                    # Setup the application with Gemfile pointing to your Rails checkout
      [--edge]                   # Setup the application with Gemfile pointing to Rails repository
  -T, [--skip-test-unit]         # Skip Test::Unit files
      [--old-style-hash]         # Force using old style hash (:foo => 'bar') on Ruby >= 1.9

Runtime options:
  -f, [--force]    # Overwrite files that already exist
  -p, [--pretend]  # Run but do not make any changes
  -q, [--quiet]    # Suppress status output
  -s, [--skip]     # Skip files that already exist

Rails options:
  -h, [--help]     # Show this help message and quit
  -v, [--version]  # Show Rails version number and quit

Description:
    The 'rails new' command creates a new Rails application with a default
    directory structure and configuration at the path you specify.

    You can specify extra command-line arguments to be used every time
    'rails new' runs in the .railsrc configuration file in your home directory.

    Note that the arguments specified in the .railsrc file don't affect the
    defaults values shown above in this help message.

Example:
    rails new ~/Code/Ruby/weblog

    This generates a skeletal Rails installation in ~/Code/Ruby/weblog.
    See the README in the newly created application to get going. 
```

这是我第一次收到这条消息。在其他项目中，此命令运行良好，但在这里我仍然收到此消息...

是什么原因造成的？我错过了什么吗？（是的，我在相应项目的根目录中）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T08:28:12.053

您没有在 rails 生成的项目目录中运行它。你在它外面运行它。

编辑：也可能是缺少脚本文件夹。或者如果您在项目文件夹中执行它，则脚本文件夹中缺少 rails 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T11:15:22.543

我也有同样的情况，我通过以下方式修复：

```
cd /root/path/to/your/project

bundle install

bundle update 
```

瞧 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-13T13:14:50.297

尝试将名为**script**的文件夹添加到您的 rails 根目录。

在这个文件夹中添加一个名为**rails**的文件并添加到它

> APP_PATH = File.expand_path('../../config/application', **FILE** )
> 
> 需要 File.expand_path('../../config/boot', **FILE** )
> 
> 需要“导轨/命令”

并再次执行

> rails g 迁移 migration_name

# python - 保存键是带有json，python的元组的字典

> ID：12337583
> 
> 赞同：11
> 
> 时间：2012-09-09T08:25:22.897
> 
> 标签：python, json, tuples

我正在用python编写一个小程序，我正在使用一个字典（如标题所说）键和值是元组。我正在尝试按如下方式使用json

```
import json
data = {(1,2,3):(a,b,c),(2,6,3):(6,3,2)}
print json.dumps(data) 
```

问题是我不断得到`TypeError: keys must be a string`.

我该怎么做呢？我尝试查看 python 文档，但没有看到任何明确的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-09T08:37:51.560

您需要先将元组转换为字符串：

```
json.dumps({str(k): v for k, v in data.iteritems()}) 
```

当然，你最终会得到字符串而不是键的元组：

```
'{"(1, 2, 3)": ["a", "b", "c"], "(2, 6, 3)": [6, 3, 2]}' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-09T09:38:55.040

如果您想稍后加载数据，则无论如何都必须对其进行后处理。因此我只是转储`data.items()`：

```
>>> import json
>>> a, b, c = "abc"
>>> data = {(1,2,3):(a,b,c), (2,6,3):(6,3,2)}
>>> on_disk = json.dumps(data.items())
>>> on_disk
'[[[2, 6, 3], [6, 3, 2]], [[1, 2, 3], ["a", "b", "c"]]]'
>>> data_restored = dict(map(tuple, kv) for kv in json.loads(on_disk))
>>> data_restored
{(2, 6, 3): (6, 3, 2), (1, 2, 3): (u'a', u'b', u'c')} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T14:33:19.243

您可以使用 ujson 模块。ujson.dumps() 接受元组作为字典中的键。您可以通过 pip 安装 ujson。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-28T07:24:51.337

对于 Python 3* 用户：除了@Martijn Pieters 的回答，

`dictonary.iteritems()`无效，将其替换为`dictionary.items()`：

```
json.dumps({str(k): v for k, v in data.items()}) 
```

# algorithm - 对于给定的美分金额，如果所有硬币管都容纳 64 个但不需要填充，则尽量减少硬币管的数量

> ID：12337586
> 
> 赞同：5
> 
> 时间：2012-09-09T08:25:29.300
> 
> 标签：algorithm, language-agnostic

**编辑：**如果有人可以为著名的硬币找零问题提供一个解释性的递归答案（链接可以），这将有很大帮助

* * *

对于给定的美分金额，如果所有硬币管都可以容纳 64 个硬币，则尽量减少硬币管的数量。

每个管只能容纳一种硬币。

每个管子不需要完全填充。

* * *

例如，对于美国硬币，金额为 0.01 美元、0.05 美元、0.10 美元、0.25 美元、0.50 美元和 1.00 美元

6 美分可以作为 6 个 1 美分硬币在一个管中完成，

25 美分可以是一个带有单个 25c 硬币的管子，也可以是一个带有五个 5c 硬币的管子。

65 美分将作为 13 个 5c 硬币完成，因为 65 个 1c 硬币需要使用 2 个管子。

* * *

我正在尝试编写一个 minecraft 插件，但我在使用这个算法时遇到了很多困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:30:55.340

查找表是一个好方法。

```
int[] Coins = new[] { 100, 50, 25, 10, 5, 1 };
int[,] Table = new int[6,6400];

/// Calculate the number of coins of each type that minimizes the number of
/// tubes used.
int[] Tubes(int cents)
{
    int[] counts = new int[Coins.Length];
    if (cents >= 6400)
    {
        counts[0] += (cents / 6400) * 64; // number of coins in filled $1-tubes
        cents %= 6400;
    }
    for (int i = 0; i < Coins.Length; i++)
    {
        int count = Table[i, cents]; // N coins in (N + 63) / 64 tubes
        counts[i] += count;
        cents -= count * Coins[i];
    }
    return cents;
} 
```

要计算表格，您可以使用以下命令：

```
void CalculateTable()
{
    for (int i = Coins.Length-1; i >= 0; i--)
    {
        int coin = Coins[i];
        for (int cents = 0; cents < 6400; cents++)
        {
            if (i == Coins.Length-1)
            {
                // The 1 cent coin can't be divided further
                Table[i,cents] = cents;
            }
            else
            {
                // Find the count that minimizes the number of tubes.
                int n = cents / coin;
                int bestTubes = -1;
                int bestCount = 0;
                for (int count = cents / coin; count >= 0; count--)
                {
                    int cents1 = cents - count * coin;
                    int tubes = (count + 63) / 64;
                    // Use the algorithm from Tubes() above, to optimize the
                    // lesser coins.
                    for (int j = i+1; j < Coins.Length; j++)
                    {
                        int count1 = Table[j, cents1];
                        cents1 -= count1 * Coins[j];
                        tubes += (count1 + 63) / 64;
                    }
                    if (bestTubes == -1 || tubes < bestTubes)
                    {
                        bestTubes = tubes;
                        bestCount = count;
                    }
                }
                // Store the result
                Table[i,cents] = bestCount;
            }
        }
    }
} 
```

`CalculateTable`在几毫秒内运行，因此您不必将其存储到磁盘。

**例子：**

```
Tubes(3149)  -> [ 31,  0,  0,  0,  0, 49]
Tubes (3150)  -> [  0, 63,  0,  0,  0,  0]
Tubes (31500) -> [315,  0,  0,  0,  0,  0] 
```

数字表示硬币的数量。*N*个硬币可以放入 ( *N* + 63)/64 个管子中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:29:11.883

这是一个[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)、[启发式](http://en.wikipedia.org/wiki/Heuristic_%28computer_science%29)和[贪心](http://en.wikipedia.org/wiki/Greedy_algorithm)算法。

在数组`T`中，每个都`T[i]`包含一个由 6 个整数组成的数组。

如果给定的总和是`65`then 你打电话给`tubes(65)`then `print T[65]`。

```
coins[1..6] = {1, 5, 10, 25, 50, 100}

tubes(sum)
    if sum < coins[1]
        return
    for i = 1 to 6
        tubes(sum - coins[i])
    best-tubes[1..6] = {64, 64, 64, 64, 64, 64}
    for i = 1 to 6
        if sum - coins[i] >= 0
            current-tubes[1..6] = copy of T[sum - coins[i]]
            if current-tubes[i] < 64
                current-tubes[i] += 1
                if current-tubes is better than best-tubes*
                    best-tubes = current-tubes
    T[sum] = best-tubes 
```

为了**大大**提高运行时间，您可以检查当前`T[sum]`是否已经过评估。添加此检查完成了称为[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)的方法。

*`current-tubes is better than best-tubes`使用更少的管子，或使用相同数量的管子但硬币更少，或使用相同数量的管子，但管子的值更大。这是行动中的贪婪部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:21:39.207

像这样的东西：

```
a[0] = 100; //cents
a[1] = 50; a[2] = 25; a[3] = 10; a[4] = 5; a[5] = 1;

cnt[6]; //array to store how much coins of type i you use;

void rec(sum_left, p /* position in a array */) {
   if ( p == 5 ) {
      cnt[5] = sum_left;
      //count how many tubes are used by cnt array, update current answer if neccessary;
      return;
   }
   for ( int i = 0; i <= sum_left/a[p]; i++ )
      //take i coins of type a[p]
      rec(sum_left - i*a[i], p+1);
}

int main() {
   rec(sum, 0);
} 
```

# ios - 使用来自两个实体的 NSFetchedResultsController(s)

> ID：12337588
> 
> 赞同：-1
> 
> 时间：2012-09-09T08:25:36.837
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我在 UITableView 中显示用户的状态消息和对这些消息的评论，并尝试使用 Core Data 保存数据。我刚刚学习了如何在 UITableView 中使用 NSFetchedResultsController，但是大多数使用 NSFetchedResultsController 的情况只是针对一个实体。我想将用户的状态消息存储在一个实体中，并将​​评论存储在另一个实体中，并将​​ UITableView 划分为多个部分：每个状态消息一个部分。每个部分的第一行（UITableViewCell）是状态消息，同一部分的其他行是对该消息的注释：显示如下

```
status message 1
 comment
 comment
 ...
 comment
status message 2
 comment
 comment
 ...
 comment
... 
```

我想我必须使用两个 NSFetchedResultsControllers - 一个用于状态消息，一个用于评论 - 但无法弄清楚如何为评论设置 NSFetchedResultsController。有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:45:03.090

`UITableView`已经有节和节标题。如果您在每个部分的部分标题中显示状态消息，并且仅在表格视图行中显示注释，您的任务将变得容易得多。

您将只需要一个用于“评论”的获取结果控制器，但您必须设置`sectionNameKeyPath:`FRC 并提供排序描述符以根据状态消息将 FRC 的结果分组到部分中。

# php - 从命令行访问谷歌日历

> ID：12337601
> 
> 赞同：0
> 
> 时间：2012-09-09T08:27:17.287
> 
> 标签：php, oauth-2.0, google-calendar-api

我已经激活了 google API 控制台[https://code.google.com/apis/console](https://code.google.com/apis/console)并且我创建了一个项目，包括 OAuth 凭据。我选择了“桌面应用程序”设置，因为这个应用程序将在浏览器之外运行，**从 CLI**（实际上只在我的计算机上）。

我还下载了此处描述的客户端库：[https](https://code.google.com/p/google-api-php-client/) ://code.google.com/p/google-api-php-client/ 。

我已经编辑了编辑`google-api-php-client/src/config.php`键，，，，`application_name`而`oauth2_client_id`没有别的。`oauth2_client_secret``oauth2_redirect_uri``developer_key`

我也删除了所有其他服务`services`。

现在，我有以下应用程序，这些应用程序来自指南中的示例：

```
<?php
require_once 'google-api-php-client/src/apiClient.php';
require_once "google-api-php-client/src/contrib/apiCalendarService.php";

session_start();

$apiClient = new apiClient();
$apiClient->setUseObjects(true);
$service = new apiCalendarService($apiClient);

if (isset($_SESSION['oauth_access_token'])) {
  $apiClient->setAccessToken($_SESSION['oauth_access_token']);
} else {
  $token = $apiClient->authenticate();
  $_SESSION['oauth_access_token'] = $token;
}

$event = new Event();
$event->setSummary('Appointment');
$event->setLocation('Somewhere');
$start = new EventDateTime();
$start->setDateTime('2011-06-03T10:00:00.000-07:00');
$start->setTimeZone('America/Los_Angeles');
$event->setStart($start);
$end = new EventDateTime();
$end->setDateTime('2011-06-03T10:25:00.000-07:00');
$end->setTimeZone('America/Los_Angeles');
$event->setEnd($end);
$event->setRecurrence(array('RRULE:FREQ=WEEKLY;UNTIL=20110701T100000-07:00'));
$attendee1 = new EventAttendee();
$attendee1->setEmail('attendeeEmail');
// ...
$attendees = array($attendee1,
                   // ...
                   );
$event->attendees = $attendees;
$recurringEvent = $service->events->insert('primary', $event);

echo $recurringEvent->getId(); 
```

但是我收到以下错误：

```
Fatal error: Uncaught exception 'apiServiceException' with message 'Error calling POST https://www.googleapis.com/calendar/v3/calendars/primary/events?key=<the-key>: (401) Login Required' in /home/flav/projects/.../google-api-php-client/src/io/apiREST.php on line 86

apiServiceException: Error calling POST https://www.googleapis.com/calendar/v3/calendars/primary/events?key=<the-key>: (401) Login Required in /home/flav/projects/.../google-api-php-client/src/io/apiREST.php on line 86

Call Stack:
    0.0003     252600   1\. {main}() /home/flav/projects/.../gcal-api.php:0
    0.0202    1769344   2\. EventsServiceResource->insert() /home/flav/projects/.../gcal-api.php:38
    0.0202    1770288   3\. apiServiceResource->__call() /home/flav/projects/.../google-api-php-client/src/contrib/apiCalendarService.php:493
    0.0206    1781864   4\. apiREST::execute() /home/flav/projects/.../google-api-php-client/src/service/apiServiceResource.php:187
    0.2342    1794848   5\. apiREST::decodeHttpResponse() /home/flav/projects/.../google-api-php-client/src/io/apiREST.php:56 
```

如何解决这个问题？

哦，在 google API 控制台上，我有两个值和`Redirect URIs:`，我应该使用哪一个？`urn:ietf:wg:oauth:2.0:oob``http://localhost``oauth2_redirect_uri`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:56:55.003

我认为这可能是由几件事造成的。我的 2 美分：

您是否注册了多个日历？也许您想要插入事件的日历不是“主要”（=默认？）日历（或者您的 Oauth 信用数据引用不同的日历）。如果是这样，请替换此行

```
$service->events->insert('primary', $event); 
```

和

```
$calendar_id = "somelongstring@group.calendar.google.com"; //look this up from calendar /settings calendar details settings page at the bottom
$service->events->insert($calendar_id, $event); 
```

日历 id 有点难找……查一下。例如，您可以在您的谷歌帐户主页/日历/齿轮符号/设置/单击日历名称/日历详细信息设置页面底部找到它。

我的重定向 url（不过对于网络应用程序）指向发出 oauth 请求的 .php 页面。如果经过身份验证，我会定义另一个重定向，这次是我自己的。令人困惑？是的，但它对我有用。

# ios - iOS编程中如何在课堂上存储数据？

> ID：12337602
> 
> 赞同：-1
> 
> 时间：2012-09-09T08:27:19.793
> 
> 标签：ios, objective-c, iphone, class, store

目标是创建一个类，该类包含一组数据，供其他类在整个应用程序中使用。

我有这个 GlobalObject.h
它声明了用于存储数据的数组。

```
#import <Foundation/Foundation.h>

@interface GlobalObjects : NSObject
@property (retain) NSMutableArray *animals;

-(id)init;
@end 
```

我有这个 GlobalObject.m。
它包含 NSDictionary 数据并存储到数组中。

```
#import <Foundation/Foundation.h>

@interface GlobalObjects : NSObject
@property (retain) NSMutableArray *animals;

-(id)init;
@end

#import "GlobalObjects.h"

@implementation GlobalObjects

@synthesize animals;

-(id)init{
    self = [super init];
    if (self) {
        // Define the data
        NSArray *imagesValue = [[[NSArray alloc] initWithObjects:@"dog.wav",@"cat.png",@"bird.png",nil] autorelease];
        NSArray *audioValue =[[[NSArray alloc] initWithObjects:@"dog.wav",@"cat.wav",@"bird.wav",nil] autorelease];
        NSArray *descriptionValue = [[[NSArray alloc] initWithObjects:@"Dog",@"Cat",@"Bird",nil] autorelease];

        // Store to array
        for (int i=0; i<8; i++) {
            NSDictionary *tempArr = [NSDictionary dictionaryWithObjectsAndKeys:[imagesValue objectAtIndex:i],@"image", [audioValue objectAtIndex:i],@"audio", [descriptionValue objectAtIndex:i], @"description", nil];
            [self.animals addObject:tempArr];
        }
    }
    return self;
}
@end 
```

我是这样称呼它的。

```
// someOtherClass.h
#import "GlobalObjects.h"
@property (nonatomic, retain) GlobalObjects *animalsData;

// someOtherClass.m
@synthesize animalsData;
self.animalsData = [[[GlobalObjects alloc] init] autorelease];
NSLog(@"Global Object %@ ",self.animalsData.animals); 
```

现在的问题是，当我在另一个类中调用这个数组时，它总是返回 null。

我是 iOS 编程新手。所以可能我的方法是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:56:19.353

您忘记在“GlobalObjects”`animals`的方法中分配数组：`init`

```
self.animals = [[NSMutableArray alloc] init]; 
```

如果你不这样做，就是`self.animals`没有效果。`nil``addObject`

由于您不使用 ARC，因此请记住在`dealloc`.

**编辑：**正如@H2CO3 和@Bastian 所注意到的，我忘记了我的ARC 前课程。`self.animals`所以在你的 init 方法中分配的正确方法是

```
self.animals = [[[NSMutableArray alloc] init] autorelease]; 
```

你`dealloc`必须添加

```
self.animals = nil; 
```

打电话之前`[super dealloc]`。我希望我现在就明白了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:56:49.513

是的，这是错误的——实例变量并不与**类**本身相关，而是与类的特定**实例**相关联。这个问题的 Cocoa 标准解决方案是创建类的共享实例 - 而不是

```
elf.animalsData = [[[GlobalObjects alloc] init] autorelease]; 
```

写

```
elf.animalsData = [GlobalObjects sharedInstance]; 
```

并实现这样的`+ sharedInstance`方法：

```
+ (id)sharedInstance
{
    static shared = nil;
    if (shared == nil)
        shared = [[self alloc] init];

    return shared;
} 
```

As @MartinR pointed out, you make another mistake: you don't create the array you're adding objects to - then it remains nil, cancelling out the effect of all method calls on itself. You have to alloc-init a mutable array for it in the `- init` method.

# api - 在没有媒体的情况下嵌入推文

> ID：12337606
> 
> 赞同：3
> 
> 时间：2012-09-09T08:28:15.563
> 
> 标签：api, twitter

默认情况下，尝试让 Twitter 嵌入推文而不显示图像或 Youtube 视频。我正在使用 API 端点：[https://dev.twitter.com/docs/api/1/get/statuses/oembed](https://dev.twitter.com/docs/api/1/get/statuses/oembed)和 flag `hide_media`。无论我将其设置为真还是假，我仍然会看到媒体。有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T11:57:44.807

您可以使用

```
data-cards="hidden" 
```

以确保您嵌入的帖子中不显示任何媒体。

# php - Yii - 参数化主机名不起作用

> ID：12337607
> 
> 赞同：1
> 
> 时间：2012-09-09T08:28:19.527
> 
> 标签：php, apache, dynamic, yii, subdomain

我希望能够为在我的网站上注册的每家公司分配动态子域。我知道这个问题已经在 Stackoverflow 上被问过很多次（例如[Dynamic creation of subdomains](https://stackoverflow.com/questions/3390533/dynamic-creation-of-subdomains)），但这些解决方案对我不起作用。我可能在某个地方出现了其他问题，因此我创建了一个新线程。

我希望能够拥有这样的 URL：

`http://mycompany.testing.com/office`

我的网站位于这样的子目录中：

`htdocs/office`

我有这样的`urlManager`设置：

```
'urlManager' => array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    'rules' => array(
        'http://<company:\w+>.testing.com/office' => 'office',
        '/<action:\w+>' => '/index/<action>',
        '<controller:\w+>/<id:\d+>' => '<controller>/view',
        '<controller:\w+>/<action:\w+>/<id:\d+>' => '<controller>/<action>',
        '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
    ),
) 
```

我的 apache 虚拟主机条目如下所示：

```
<VirtualHost *.testing.com>
        ...
    DocumentRoot "C:/xampp/htdocs/office"
    ServerName www.testing.com
    ServerAlias *.testing.com
    <Directory "C:/xampp/htdocs/office">
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

我`127.0.0.1 *.testing.com`在我的 Windows`hosts`文件中添加了。我的 htaccess 文件如下所示：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

我曾尝试遵循 Yii 指南（这表明这是一项非常简单的任务），但我认为我可能在应用程序本身之外搞砸了一些东西。

任何输入将不胜感激:-)

祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:17:56.780

默认情况下，Windows 主机文件不接受通配符域。[但是，主机文件](https://stackoverflow.com/a/9695861/101158)有另一种选择。

这只是您的测试服务器，最简单的解决方案是在您的主机文件中添加一些测试子域，这应该可以工作（mycompany1.testing.com，mycompany2.testing.com ...）。

# php - 解析html代码并打印出来

> ID：12337608
> 
> 赞同：-3
> 
> 时间：2012-09-09T08:28:45.983
> 
> 标签：php, html

给这个带有多个（a href="https://twitter.com/$name) 的 html 页面（部分代码）我需要解析所有 $names 并在页面中打印我该怎么做？

```
 <td>Apr 01 2011<br><b>527
  </b> 
</td>
<td>
                                            <a href="https://twitter.com/al_rasekhoon" class="twitter-follow-button" data-show count="false" data-lang="" data-width="60px" > al_rasekhoon</a>
</td>                                   
</tr>
   <tr class="rowc"><td colspan="11"></td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:32:22.283

您需要遍历 $names 数组并`a`为该数组中的每个条目打印一个正确的标签。像这样：

```
<?php foreach($names as $name){ ?>
    <a href="https://twitter.com<?php echo $name ?>"><?php echo $name ?></a>
<?php }  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:47:59.070

听起来像是屏幕抓取，您需要为此遍历 DOM。RE 将非常不可靠。

DOMDocument 可能对您有所帮助，但您可能希望查看用于屏幕抓取的库，例如 BeautifulSoup（或一些 PHP 等效项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T10:55:30.903

如果我理解正确，您从某处获取 html 页面并想要提取所有链接的 twitter 用户？您可以解析 html 代码，也可以通过一些字符串拆分来执行此操作。这段代码未经测试，但应该给你一个想法：

```
$input = '(the html code)';
$links = explode('<a ', $input); //split input by start of link tags
for ($i = 0; $i < count($links); $i++) {
    //cut off everything after the closing '>'
    $links[$i] = explode('>', $links[$i], 2)[0]
    //skip this link if it doesn't go to twitter.com
    if (strpos($links[$i], 'href="twitter.com/') === False) { continue; }
    //split by the 'href' attribute and keep everything after 'twitter.com'
    $links[$i] = explode('href="twitter.com/', $links[$i], 2)[1]
    //cut off everything after the " ending the href attribute
    $links[$i] = explode('"', $links[$i], 2)[0]
    //now $links[$i] should contain the twitter username
    echo $links[$i]
} 
```

注意：如果页面上有其他指向 twitter 的链接不是主页或用户，它们也会被打印出来（例如，如果页面链接到 twitter 常见问题解答）。您需要手动过滤它们。

php 很烂，让我们在 python 中执行此操作！

```
input = '(the html code)'
links = [l.split(">", 1)[0] for l in input.split("<a ")}
twitter_links = [l for l in links if 'href="twitter.com/' in l]
twitter_hrefs = [l.split('href="twitter.com/', 1)[1] for l in twitter_links]
users = [l.split('"', 1)[0] for l in twitter_hrefs]
print '\n'.join(users) 
```

# oracle10g - 如何获得错误的确切原因 - ORA-00955：名称已被现有对象使用？

> ID：12337610
> 
> 赞同：1
> 
> 时间：2012-09-09T08:29:02.943
> 
> 标签：oracle10g, oracle11g

> ORA-00955: 名称已被现有对象使用

已经有这么多的陈述和这么多的对象。那么，如何找出导致此错误发生的对象（表、列、序列、视图等）？

我尝试了这些链接，但无法解决问题 -

*   [http://www.techonthenet.com/oracle/errors/ora00955.php](http://www.techonthenet.com/oracle/errors/ora00955.php)
*   [http://www.dba-oracle.com/t_ora_00955_name_already_used_by_existing_object.htm](http://www.dba-oracle.com/t_ora_00955_name_already_used_by_existing_object.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:33:39.347

如果您在 SQL*Plus 中运行脚本，`SET ECHO ON`则可以将输出假脱机到一个文件中以供以后分析。

# android - 为什么 SQLiteDatabase 的 getMaximumSize() 方法返回 1 TB？

> ID：12337612
> 
> 赞同：2
> 
> 时间：2012-09-09T08:29:09.680
> 
> 标签：android, database, sqlite, size

我正在尝试为 Android 创建一个简单的数据库程序，因此我决定使用 database.getMaximumSize() 检查文件限制，它返回大量字节，转换后的字节数为 1 TB。

假设某人在当前手机上实际上有 1 TB 的空间（随它一起滚动），那么在便携式（Android）设备上真的可能有一个很大的数据库，或者这个 getMaximumSize() 方法返回的东西与我想的不同?

我问这个是因为如果 getMaximumSize() 没有返回实际的最大大小，并且大小要小得多，比如 1 mb 左右，我将不得不对我的应用程序施加限制，这样用户就不会超过限制最后以强制关闭或其他方式结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:47:16.043

我希望最大数据库大小受到 SD 卡上可用空间量的限制。以下是[如何找出答案。](https://stackoverflow.com/a/5083482/871910)

如果您想进一步限制您的用户，我建议您通过主表的记录数而不是文件大小来限制他们 - 这对他们和您的应用程序更有意义。

# c - feof() 在 C 中的工作原理

> ID：12337614
> 
> 赞同：14
> 
> 时间：2012-09-09T08:29:22.167
> 
> 标签：c, file-handling, feof

feof() 检查文件指针当前位置的 eof 还是检查当前文件指针旁边的位置？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-09T08:30:58.523

每个`FILE`流都有一个内部标志，指示调用者是否已经尝试读取文件末尾。`feof`返回那个标志。该标志不指示当前文件位置是否为文件末尾，仅指示先前读取是否已尝试读取超过文件末尾。

作为一个例子，让我们来看看当读取一个包含两个字节的文件时会发生什么。

```
f = fopen(filename, "r"); // file is opened
assert(!feof(f));         // eof flag is not set
c1 = getc(f);             // read first byte, one byte remaining
assert(!feof(f));         // eof flag is not set
c2 = getc(f);             // read second byte, no bytes remaining
assert(!feof(f));         // eof flag is not set
c3 = getc(f);             // try to read past end of the file
assert(feof(f));          // now, eof flag is set 
```

这就是为什么以下是读取文件时使用 eof的**错误方法的原因：**

```
f = fopen(filename, "r");
while (!feof(f)) {
    c = getc(f);
    putchar(c);
} 
```

由于工作方式`feof`的原因，文件结束标志仅在`getc` 尝试读取文件末尾时设置一次。`getc`然后将返回`EOF`，它不是字符，循环构造导致`putchar`尝试将其写出，从而导致错误或垃圾输出。

每个 C 标准库输入方法都会返回成功或失败的指示：如果它试图读取文件末尾，或者读取时出错，则`getc`返回特殊值。`EOF`文件结束和错误的特殊值是相同的，这就是正确使用方法的地方 `feof`：您可以使用它来区分文件结束和错误情况。

```
f = fopen(filename, "r");
c = getc(f);
if (c == EOF) {
    if (feof(f))
        printf("it was end-of-file\n");
    else
        printf("it was error\n");
} 
```

`FILE`对于错误情况，对象 还有另一个内部标志： `ferror`. 测试错误而不是“不是文件结尾”通常更清楚。在 C 中读取文件的惯用方法如下：

```
f = fopen(filename, "r");
while ((c = getc(f)) != EOF) {
    putchar(c);
}
if (ferror(f)) {
    perror(filename):
    exit(EXIT_FAILURE);
}
fclose(f); 
```

（为简洁起见，此处的示例中省略了一些错误检查。）

该`feof`功能很少有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T09:08:57.407

`feof`通过了解其实施方式，您可以更好地了解其工作原理。这是第 7 版 Unix stdio 库如何实现的简化版本`feof`。现代库非常相似，添加的代码提供线程安全、提高效率和更简洁的实现。

```
extern  struct  _iobuf {
    char    *_ptr;
    int     _cnt;
    char    *_base;
    char    _flag;
    char    _file;
} _iob[_NFILE];

#define _IOEOF  020

#define feof(p)         (((p)->_flag&_IOEOF)!=0)

#define getc(p)         (--(p)->_cnt>=0? *(p)->_ptr++&0377:_filbuf(p))

int
_filbuf(FILE *iop)
{

    iop->_ptr = iop->_base;
    iop->_cnt = read(fileno(iop), iop->_ptr, BUFSIZ);
    if (iop->_cnt == 0) {
            iop->_flag |= _IOEOF;
            return(EOF);
    }
    return(*iop->_ptr++ & 0377); 
```

}

stdio 库为每个文件维护一个结构，该结构包含由`_base`. 缓冲区中的当前字符由 指向，`_ptr`可用字符数包含在`_cnt`. `getc`宏是许多高级功能的基础，例如，`scanf`它尝试从缓冲区返回一个字符。如果缓冲区是空的，它会调用`_filbuf`来填充它。 `_filbuf`反过来会打电话`read`。如果`read`返回 0，这意味着没有更多数据可用，`_filbuf`将设置`_IOEOF`标志，`feof`每次调用它时都会检查是否返回 true。

从上面可以理解，当您`feof`第一次尝试读取文件末尾的字符（或库函数代表您尝试）时，将返回 true。这对各种函数的行为有微妙的影响。考虑一个包含单个字符的文件：数字`1`。用 ,读取该字符后`getc`，`feof`将返回 false，因为`_IOEOF`未设置标志；还没有人试图读过文件的末尾。再次调用`getc`将导致调用标志`read`的设置，这将导致返回 true。但是，使用 , 从同一文件中读取数字后，将立即返回 true，因为`_IOEOF``feof``fscanf("%d", &n)``feof``fscanf`将尝试读取整数的其他数字。

# php - 根据 $_GET 值更改 div 内容

> ID：12337615
> 
> 赞同：0
> 
> 时间：2012-09-09T08:29:32.980
> 
> 标签：php, jquery

我有一个主 php 文件，其中有一个“导航栏”，其中包含指向各个页面的链接，单击“导航栏”项目我希望将 div 的内容替换为相应的页面。

导航栏.php：

```
<li id="nav-home"><a class="button" href="main.php">Home</a></li>
<li id="nav-attn"><a class="button" href="?nav=page1.php">Page1</a></li>    
<li id="nav-tran"><a class="button" href="?nav=page2.php">Page2</a></li>
<li id="nav-mr"><a class="button" href="?nav=page3.php">Page3</a></li> 
```

主.php：

```
<script>
$(document).ready(function() {  
$('#content').load('<?php echo $_GET['nav'] ?>');           
});
</script> 
```

使用此代码，我期望单击导航栏项时，div 内容必须更改为相应的页面参考。我发现，例如，当我单击 page1 时，我的 url 被更改为 main?nav=page1.php，但根本没有触发更改 div 内容的脚本。请纠正我，但我不想将链接更改为“#”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:33:12.477

```
<script>
$(document).ready(function() {  
  $('uL#navbar a').click(function(e){
    e.preventDefault();
    $('#content').load($(this).attr('href'));
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:33:31.453

你可以试试这个

```
$(document).ready(function() { 
    $('ul li a.button').on('click', function(e){
        e.preventDefault();
        $('#content').load($(this).attr('href'));           
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:36:28.323

您需要为此使用 AJAX

```
<script>
    $(function(){
        $('.button').on('click', function(e){
            e.preventDefault();
            $('#content').load($(this).attr('href'));
        });
    })
</script>

<li id="nav-home"><a class="button" href="main.php">Home</a></li>
<li id="nav-attn"><a class="button" href="?nav=page1.php">Page1</a></li>    
<li id="nav-tran"><a class="button" href="?nav=page2.php">Page2</a></li>
<li id="nav-mr"><a class="button" href="?nav=page3.php">Page3</a></li>
<div id="content"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T08:48:15.657

尝试;

```
$(document).ready(function() { 
    $('.button').on('click', function(e){
        e.preventDefault();
        $('#content').load($(this).attr('href'));           
    });
}); 
```

在您的 php 中，更改代码以使 echo 看起来像；

```
<li id="nav-attn"><a class="button" href="yourpage.php?nav=page1.php">Page1</a></li> 
```

# ios - IOS Core-Plot：如何获得 X 和 Y 轴的可见范围

> ID：12337622
> 
> 赞同：2
> 
> 时间：2012-09-09T08:31:41.993
> 
> 标签：ios, core-plot

在 Core-Plot 中，我只想绘制绘图的可见区域。为此，我需要放大和缩小后绘图的可见范围。

知道如何获得 X 轴的可见范围吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T17:09:01.330

您可以使用绘图空间委托来找出绘图范围何时发生变化。每个委托方法都接收对绘图空间的引用作为其参数之一。您可以阅读`xRange`和`yRange`以了解新范围是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T02:38:27.863

您可以使用如下代码获得 X 轴的可见范围： `space.graph.axisSet.xAxis.visibleAxisRange`

# ruby - 在 Ruby 中对多个文件使用继承

> ID：12337625
> 
> 赞同：5
> 
> 时间：2012-09-09T08:32:05.020
> 
> 标签：ruby

我是 Ruby 新手。我有一个关于在 Ruby 中使用 Inheritence 的问题。

我在名为 Doggy.rb 的文件中有一个名为 Doggy 的类

```
class Doggy
  def bark
    puts "Vicky is barking"
  end
end 
```

我在另一个名为 puppy.rb 的文件中编写了另一个名为 Puppy 的类

```
class Puppy < Doggy
end

puts Doggy.new.bark 
```

我收到此错误：

```
Puppy.rb:1:in `<main>': uninitialized constant Doggy (NameError) 
```

是否必须将这些类（Doggy 和 Puppy）仅包含在单个文件中？

已编辑

根据建议，我尝试使用 require 和 require_relative 如图所示，但我仍然低于错误

```
Puppy.rb:1:in `<main>': uninitialized constant Doggy (NameError)

    class Puppy < Doggy
    end
    require_relative 'Doggy.rb'
    puts Doggy.new.bark 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T08:37:55.097

您应该`Doggy`从文件 where `Puppy`is 要求包含类的文件。放

```
require './doggy' 
```

或者，如果您使用的是 ruby​​-1.9：

```
require_relative 'doggy' 
```

in `puppy.rb`（假设文件名是 doggy.rb 和 puppy.rb）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T09:37:44.877

在**puppy.rb**文件中进行的更改
假设这两个文件都在同一个目录中，您需要按以下方式要求该文件：

doggy.rb

```
class Doggy
  def bark
    puts "Vicky is barking"
  end
end 
```

小狗.rb

```
require File.expand_path('../doggy.rb', __FILE__)
class Puppy < Doggy
end

puts Doggy.new.bark 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T09:35:23.827

在继承自*之后*`Doggy`，您正在加载包含 的定义的文件。当然，那*是不可能的*。如果只加载包含第 3 行定义的文件，如何从第 1 行继承？*`Doggy`*`Doggy``Doggy`**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T08:35:56.223

另外，除了其他人所说的，`puts Dog.new.bark`总是会失败，因为你的类不叫**Dog**，它是*Doggy*。谨防。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-09T08:36:23.830

没有必要，您必须要求`Doggy`声明的文件。您可以使用[require](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-require)或[require_relative](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-require_relative)。

然后，无论如何请确保您使用您声明的名称：`Doggy`而不是`Dog`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T08:37:49.927

你必须在你的 Puppy 类中包含 Doggy.rb**

# facebook - 新帐户和登录的 Incho Facebook Connect 错误

> ID：12337634
> 
> 赞同：1
> 
> 时间：2012-09-09T08:33:01.120
> 
> 标签：facebook, magento, login, magento-1.7

您好，我已经为 Magento 安装了 Incho 的 Facebook 连接扩展。安装没有错误。当我使用他的普通电子邮件和用户名注册用户登录然后连接他的 Facebook 帐户时，他/她将来可以通过 Facebook 登录。

新用户/注册者总是会收到消息：Facebook 连接失败。此服务暂时不可用。请稍后再试。

因此，我认为创建帐户存在错误。任何人都知道在哪里检查以及如何解决这个问题？

Facebook Api / Secret 已检查并正确。Facebook 重定向 url 已检查并正确。我正在使用 Magento 1.7.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:01:50.247

上述问题通过集成另一个扩展而不是 Incho 的 Facebook Connect 来解决。来自 inchoo 的版本与 magenta 1.7.0.2 不兼容。

我用的是 Belvg.com 的那个。这个完美无缺。

# c++ - 将 WindowClass 更改为全屏

> ID：12337637
> 
> 赞同：1
> 
> 时间：2012-09-09T08:33:18.983
> 
> 标签：c++, winapi, window

所以我试图让我的窗口类全屏，但它不工作，它只是闪烁黑色然后它不会变成全屏这里是源代码： -

```
void InitEngine::Init(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nShowCmd, DesktopScreenInfo * ScreenInfo, LPSTR WindowName)
{
    mWindoClass = new WNDCLASSEX();
    ZeroMemory(mWindoClass,sizeof(WNDCLASSEX));
    if(ScreenInfo) mScreenInfo = ScreenInfo;
    else mScreenInfo = &DesktopScreen::GetScreenInfo();

    mWindoClass->cbSize        = sizeof(WNDCLASSEX);// window size
    mWindoClass->style         = CS_HREDRAW | CS_VREDRAW; // so it draw when Horizontal or Vertical change
    mWindoClass->lpfnWndProc   = WindowProc;
    mWindoClass->hInstance     = hInstance;
    mWindoClass->hCursor       = LoadCursor(NULL, IDC_ARROW); //load normal cursor
    mWindoClass->hbrBackground = (HBRUSH)COLOR_WINDOW;
    mWindoClass->lpszClassName = "PoPEngineClass";

    DEVMODE screen;
    memset(&screen,0,sizeof(screen));
    screen.dmSize = sizeof(screen);
    screen.dmPelsWidth = mScreenInfo->Width;
    screen.dmPelsHeight = mScreenInfo->Height;
    screen.dmBitsPerPel = mScreenInfo->ScreenDepth;
    screen.dmDisplayFrequency = mScreenInfo->FrameRate;
    screen.dmFields = DM_BITSPERPEL|DM_PELSWIDTH|DM_PELSHEIGHT;
    ChangeDisplaySettings(&screen, CDS_FULLSCREEN);

    RegisterClassEx(mWindoClass);

    WindowHandel = CreateWindowEx(NULL , mWindoClass->lpszClassName , WindowName , WS_POPUP, 0 , 0, mScreenInfo->Width, mScreenInfo->Height, NULL, NULL, hInstance, NULL);
    ShowWindow(WindowHandel, nShowCmd);
    UpdateWindow(WindowHandel);

    while (GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:25:05.333

ChangeDisplaySettings 实际上并没有使窗口全屏 - 尽管标志的名称可能具有误导性。要使窗口全屏显示，您基本上必须自己做很多工作：

*   记住旧位置
*   更改窗口样式以删除边框和标题栏
*   获取屏幕大小，设置窗口的新位置以覆盖屏幕
*   并将其放在其他窗口的顶部（后两个您可以使用 SetWindowPos 调用来完成。）

[在 SO 的其他地方](http://stackoverflow.com/questions/2382464/win32-full-screen-and-hiding-taskbar)有几个相同问题的答案——但它们存在问题。相反，建议阅读 Raymond Chen 的博客文章：[如何用全屏窗口覆盖任务栏？](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/05/414910.aspx)- 他所做的任何我上面的列表之间的区别在于他正在创建一个新窗口而不修改现有窗口；这实际上是一种更简洁的方法，因为这意味着您不需要处理记住/恢复旧位置的问题。

ChangedisplaySetting 的`CDS_FULLSCREEN`标志有不同的含义：调用是用于更改显示模式设置，而不是使窗口全屏；但是该标志告诉窗口模式更改是暂时的，因此不应保存。例如，如果以特定分辨率播放视频的应用程序正在全屏播放，它可能想要更改实际屏幕分辨率以匹配视频，但只要它是全屏的。或者 OpenGL 游戏或类似游戏可能会使用它来确保它以特定分辨率全屏运行。所以它的真正意思是“将显示设置更改为这些，但我这样做只是因为我要全屏显示，所以不要永久更改”。Raymond Chan[在他的博客上写了更多关于这个标志的信息。](http://blogs.msdn.com/b/oldnewthing/archive/2008/01/04/6973747.aspx). 如果您不关心屏幕分辨率设置，并且只想让窗口占据所有屏幕区域，则不需要此调用。

# php - 我可以在不启用 fopen 包装器的情况下使用 URL 作为 imagecreatefromjpeg() 的源吗？

> ID：12337639
> 
> 赞同：13
> 
> 时间：2012-09-09T08:33:33.083
> 
> 标签：php, url, image-resizing, imagecreatefrompng

我知道可以使用 imagecreatefromjpeg()、imagecreatefrompng() 等，并将 URL 作为 fopen() 的“文件名”，但由于安全问题，我无法启用包装器。有没有办法在不启用它们的情况下将 URL 传递给 imagecreatefromX() ？

我也尝试过使用 cURL，这也给我带来了问题：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"http://www.../image31.jpg"); //Actually complete URL to image
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec($ch);
curl_close($ch);

$image = imagecreatefromstring($data);
var_dump($image);

imagepng($image);
imagedestroy($image); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-09T08:43:40.663

您可以使用 cURL 下载文件，然后将结果通过管道传输到`imagecreatefromstring`.

例子：

```
 $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $imageurl); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // good edit, thanks!
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1); // also, this seems wise considering output is image.
    $data = curl_exec($ch);
    curl_close($ch);

    $image = imagecreatefromstring($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:45:24.540

您甚至可以使用[stream_wrapper_register](http://www.php.net/manual/en/function.stream-wrapper-register.php)为“http”实现基于 cURL 的流包装器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:39:07.393

您总是可以将图像（例如使用 cURL）下载到临时文件中，然后从该文件加载图像。

# c# - WCF WSDL IWsdlExportExtension 可空

> ID：12337641
> 
> 赞同：2
> 
> 时间：2012-09-09T08:34:37.233
> 
> 标签：c#, wcf, wsdl

我在 SO (http://stackoverflow.com/questions/5801128/flat-wsdl-for-wcf-4-service) 找到了这个服务主机，我用它来确定我想要的类的属性是 nillable=false 而不是默认的 true。我设法做到了，但现在需要实现一些逻辑来自动化这个功能。

主持人：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;
using System.Xml.Schema;
using ServiceDescription = System.Web.Services.Description.ServiceDescription;

namespace Thinktecture.ServiceModel.Extensions.Description {
    public class FlatWsdl : IWsdlExportExtension, IEndpointBehavior {
        public void ExportContract(WsdlExporter exporter, WsdlContractConversionContext context) {}

        public void ExportEndpoint(WsdlExporter exporter, WsdlEndpointConversionContext context) {
            XmlSchemaSet schemaSet = exporter.GeneratedXmlSchemas;

            ProcessNillable(schemaSet);
            ...
            ...
        }

        private static void WalkTheParticle(XmlSchemaParticle particle)
        {
            if (particle is XmlSchemaElement) {
                XmlSchemaElement elem = particle as XmlSchemaElement;

                Console.WriteLine(elem.Name);

                if (elem != null && String.Compare(elem.Name, "name", false) == 0)
                {
                    elem.IsNillable = false; //This works!
                    Console.WriteLine("Bazinga!");
                }

                if (elem.RefName.IsEmpty) {
                    XmlSchemaType type = (XmlSchemaType)elem.ElementSchemaType;
                    if (type is XmlSchemaComplexType) {
                        XmlSchemaComplexType ct = type as XmlSchemaComplexType;
                        if (ct.QualifiedName.IsEmpty) {
                            WalkTheParticle(ct.ContentTypeParticle);
                        }
                    }
                }
            }
            else if (particle is XmlSchemaGroupBase)
            //xs:all, xs:choice, xs:sequence
            {
                XmlSchemaGroupBase baseParticle = particle as XmlSchemaGroupBase;
                foreach (XmlSchemaParticle subParticle in baseParticle.Items)
                {
                    WalkTheParticle(subParticle);
                }
            }
        }

        private static void AddImportedSchemas(XmlSchema schema, XmlSchemaSet schemaSet, List<XmlSchema> importsList) { ... }

        private static void RemoveXsdImports(XmlSchema schema) { ... }

        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters) {}

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime) {}

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher) {}

        public void Validate(ServiceEndpoint endpoint) {}
    }
} 
```

现在，它可以在示例项目中使用，我需要将其放入实际项目中，其中包含大约 80 个合同，每个合同都足够复杂以拥有许多属性。有些是必需的，有些不是。我需要弄清楚如何自动取消所需的 nillable=true 。我希望放置`[DataMember(IsRequired=True)]`可以帮助我在上述`WalkTheParticle()`方法中找到该属性。但是，一旦进入该方法，除了元素的名称之外，我没有其他真正的东西可以让这项工作发挥作用，维护一个属性列表以标记为不可空是一件真正令人头疼的事情。我正在寻找更好的解决方案。

# qt - 在 Qt 中使用 hadoop

> ID：12337642
> 
> 赞同：1
> 
> 时间：2012-09-09T08:34:39.683
> 
> 标签：qt, hadoop, hadoop-streaming

有谁知道如何将 hadoop 与 Qt 一起使用，关于 hadoop 与 Qt 或任何 Qt 包装器或 hadoop 流与 Qt 的任何教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:54:34.317

Hadoop 的 map/reduce 有三个基本接口：

*   Java接口
*   管道（C++ 接口）
*   流式 API（任何语言）

因此，如果您想使用 C++ 编写您的 m/r 任务，您有两个选择 - 使用流 API 或/和管道。Pipes 只是一个 C++ 库，所以我认为将它与您的 Qt 程序链接起来没有问题。[有](http://developer.yahoo.com/hadoop/tutorial/module4.html#pipes)一本手册可以帮助你。

# ios - 将数据从 UITableView 推送到同一屏幕上的另一个 UIViewController

> ID：12337648
> 
> 赞同：1
> 
> 时间：2012-09-09T08:36:18.363
> 
> 标签：ios, ios5, uiviewcontroller

有一个问题。我有一个 ipad 应用程序，它在同一屏幕上包含一个视图控制器`UITableView`和一个详细视图（基本上是另一个显示详细信息的视图控制器）。我需要将执行`UITableView`时的行数据传递`-didSelectRowAtIndexPath`到此详细视图。我不知道该怎么做？有关如何执行此操作的任何帮助/指针/示例代码？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:15:39.080

在 UITableView 视图控制器中定义一个委托，并在详细视图控制器中实现它。当 didSelectRowAtIndexPath 被调用时，调用委托方法，将行数据传递给细节视图控制器。

委托定义将类似于：

```
@class MyTopLevelViewController;

@protocol MyTopLevelViewControllerDelegate <NSObject>

-(void)showDetail:(DetailObject *)detail;

@interface MyTopLevelViewController : UIViewController

@property (nonatomic, weak) id <MyTopLevelViewControllerDelegate> delegate;

@end 
```

并将委托添加到详细视图控制器标头：

```
@interface MyDetailViewController : UIViewController <MyTopLevelViewControllerDelegate> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T12:22:12.383

如果您愿意在同一屏幕上的 didSelectRowAtIndexPath 中的另一个视图控制器上传递数据，则可以在获得“objectAtIndex:indexPath.row”时使用数组。以下代码可能对您有所帮助：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    DetailFoodViewController *detailFoodViewController=[[DetailFoodViewController alloc]   initWithNibName:@"DetailFoodViewController" bundle:nil];

    JSCategory *jSCategory=[self.categoryResult.JSCategories objectAtIndex:indexPath.row];

    detailFoodViewController.jsCategory=jSCategory;

    detailFoodViewController.oldStoreLocationId=self.oldStoreId;

    [self.view addSubview:detailFoodViewController.view];
    [detailFoodViewController release];

} 
```

# java - JFace 对话框在按下 OK 按钮后保持打开状态

> ID：12337652
> 
> 赞同：1
> 
> 时间：2012-09-09T08:36:30.663
> 
> 标签：java, swt

我正在使用 SWT JFace 对话框。

我向 OK 按钮添加了一个侦听器，我想在用户单击 OK 按钮后显示一个消息框。这一步的问题是，当我单击 OK 按钮时，shell 会被处理掉。我怎样才能防止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:57:05.677

以下代码将防止对话框通过“确定”按钮关闭。只是不要调用方法`this.close()`：`okPressed()`

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    new OptionsDialog(shell).open();

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
}

private static class OptionsDialog extends Dialog {

    private Composite composite;

    public OptionsDialog(Shell parentShell)
    {
        super(parentShell);
        setShellStyle(parentShell.getStyle() | SWT.CLOSE | SWT.TITLE | SWT.BORDER | SWT.APPLICATION_MODAL);
        setBlockOnOpen(true);
    }

    protected Control createDialogArea(Composite parent) {
        this.composite = (Composite) super.createDialogArea(parent);

        GridLayout layout = new GridLayout(1, false);
        layout.marginHeight = 5;
        layout.marginWidth = 10;

        composite.setLayout(layout);

        createContent();

        return composite;
    }

    private void createContent()
    {
        /* add your widgets */
    }

    protected void configureShell(Shell newShell)
    {
        super.configureShell(newShell);
        newShell.setText("Shell name");
    }

    public void okPressed()
    {
        /* DO NOTHING HERE!!! */
        //this.close();
    }
} 
```

# algorithm - 从许多二进制序列中选择一些，使它们“或”在一起的结果是 1111111111....111

> ID：12337655
> 
> 赞同：4
> 
> 时间：2012-09-09T08:37:44.220
> 
> 标签：algorithm

我有 N 个长度为 L 的二进制序列，其中 N 和 L 可能非常大，而这些序列可能非常稀疏，比如 0 比 1 多得多。

我想从中选择M个序列，即b_1、b_2、b_3...，这样

```
b_1 | b_2 | b_3 ... | b_M = 1111...11 (L 1s) 
```

有没有实现它的算法？

我的想法是：

STEP1：对于从1到L的位置，计算在该位置有1的序列的总数。将其命名为“拥有号码”

STEP2：考虑拥有数最小的位置，从该位置的拥有序列中选择1个数最多的序列。

STEP3：忽略选择的序列，更新拥有号码并返回STEP2。

我相信我的方法无法产生最佳答案。

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T08:49:10.190

这是众所周知的[集合覆盖问题](http://en.wikipedia.org/wiki/Set_cover_problem)。它是[NP 难的](http://en.wikipedia.org/wiki/NP-hard)——事实上，它的决策版本是典型的 NP 完全问题之一，并且是[Karp 1972 年论文](http://www.cs.berkeley.edu/~luca/cs172/karp.pdf)中包含的 21 个问题之一——因此没有已知的有效算法可以解决它。

您在问题中描述的算法被称为“[贪婪算法](http://en.wikipedia.org/wiki/Set_cover#Greedy_algorithm)”并且（除非您的问题有一些您没有告诉我们的特殊功能）它本质上是最知名的方法。它找到不超过 O(log |N|) 乘以最小的此类集合大小的集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T08:42:24.097

听起来像是典型的[回溯](http://en.wikipedia.org/wiki/Backtracking)任务。

是的，如果你想快速得到一个好的答案，你的算法听起来很合理。如果您想组合尽可能少的样本，您最好尝试所有组合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T09:19:15.143

根据问题的确切结构，还有另一种通常效果很好的技术（并且实际上给出了*最佳*结果）：

让`x[j]`是一个布尔变量，表示选择是否在结果中包含第 j 个二进制序列。零抑制二元决策图现在可以表示（可能简洁 - 取决于问题的特征）集合族，使得对应`x[j]`于集合中包含的变量的二元序列的 OR 全为 1。如果 ZDD 简洁，则找到最小的此类集合（从而最小化包含的序列数量）相对容易。详细信息可以在计算机编程艺术第 7.1.4 章（第 4A 卷）中找到。

它也很容易适应*精确的*覆盖，通过采用一组集合，使得每个位置都有一个 1。

# java - JButton isselected 方法不起作用

> ID：12337659
> 
> 赞同：3
> 
> 时间：2012-09-09T08:38:01.257
> 
> 标签：java, swing, selection, jbutton, jtogglebutton

下面的代码是在选择 3 个按钮中的任何一个时更改背景颜色：红色、绿色或蓝色。当我选择其中任何一个时，实际上什么都没有发生。但是，从 JButtons 更改为 JRadioButtons 或 JToggleButtons 确实有效。有谁知道为什么？是因为 JButton.isselected() 方法被窃听并且它总是返回 false 吗？感谢您的帮助...谢谢。

```
public class bgcolor2 extends JFrame
{
private static final int FRAME_WIDTH = 300;
private static final int FRAME_HEIGHT= 400;
private ActionListener listener;
private JButton greenbutton;
private JButton redbutton;
private JButton bluebutton;
private JPanel colorpanel;
private JPanel buttonpanel;

public bgcolor2()
{
    colorpanel = new JPanel();
    add(colorpanel,BorderLayout.CENTER);

    class bgcolorlistener implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {
            changebgcolor();    
        }
    }
    listener=new bgcolorlistener();
    createbuttons();
    setSize(FRAME_WIDTH,FRAME_HEIGHT);
}

public void createbuttons()
{
    greenbutton = new JButton("Green");
    greenbutton.addActionListener(listener);
    bluebutton = new JButton("Blue");
    bluebutton.addActionListener(listener);
    redbutton = new JButton("Red");
    redbutton.addActionListener(listener);
    buttonpanel = new JPanel();

    buttonpanel.add(greenbutton);
    buttonpanel.add(redbutton);
    buttonpanel.add(bluebutton);
    add(buttonpanel,BorderLayout.SOUTH);
}

public void changebgcolor()
{
    if (greenbutton.isSelected()) 
        {
            colorpanel.setBackground(new Color(0,255,0));
        }
    if (bluebutton.isSelected()) 
        {
            colorpanel.setBackground(new Color(0,0,255));
        }
    if (redbutton.isSelected()) 
        {
            colorpanel.setBackground(new Color(255,0,0));
        }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T08:42:14.687

该`isSelected()`方法适用于切换按钮，不适用于常规按钮。

在您的情况下，您必须跟踪事件的来源。您可以使用 获取单击的按钮`event.getSource()`。

# three.js - three.js - 调整单个粒子的不透明度

> ID：12337660
> 
> 赞同：17
> 
> 时间：2012-09-09T08:38:17.403
> 
> 标签：three.js, point-clouds, particle-system

我试图根据粒子与平面的距离来改变粒子的不透明度。

[这个问题](https://github.com/mrdoob/three.js/issues/297)描述了我的问题，一年前的答案基本上是*“你不能”*。不透明度显然是材料的参数，而不是元素，因此单个粒子的不透明度是不可能的。

有什么改变吗，有什么办法可以实现吗？如果单个粒子着色是可能的，我想这并非遥不可及。

干杯

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-10T01:03:25.393

编辑 - 这个答案显示了如何使用自定义设置每点不透明度`ShaderMaterial`。有关[使用](https://stackoverflow.com/a/67892506/1461008)`PointsMaterial`. _

* * *

`ParticleSystem`已重命名为`PointCloud`，然后重命名为`Points`。

是的，您可以创建点云并动态改变每个粒子颜色的 alpha 值。

在three.js 中，您可以通过将点云的材质设置为`ShaderMaterial`具有等于每个粒子所需的alpha 值的属性来做到这一点。

如果您不熟悉`ShaderMaterials`顶点着色器和片段着色器，那么这里有一个*非常简单*的Fiddle，它实现了具有动态 alpha 的点云：http: [//jsfiddle.net/8mrH7/266/](http://jsfiddle.net/8mrH7/266/)。

编辑：更新小提琴

三.js r.129

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-01T16:49:55.070

不知道为什么，但提出的解决方案对我不起作用。我使用了一些棘手的阴影来使点在边缘变得圆形和模糊。所以点的角应该是透明的，但它们看起来是黑色的：http: [//jsfiddle.net/5kz64ero/1/](http://jsfiddle.net/5kz64ero/1/)

我的片段着色器的相关部分：

```
// Distance from 0.0 to 0.5 from the center of the point
float d = distance(gl_PointCoord, vec2(0.5, 0.5));

// Applying sigmoid to smoothen the edge
float opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));

gl_FragColor = vec4(opacity * vColor, opacity); 
```

我认为传统上这是通过深度排序（最远的点首先出现）来解决的，并且我发现一些证据表明`ParticleSystem`in Three 的一些较旧的实现包含`sortParticles`属性。但它已经不存在了。在我的情况下，排序确实涉及每次相机位置变化时重做。相反，我设置`depthWrite: false`它似乎解决了这个问题。

结果：http: [//jsfiddle.net/5kz64ero/6/](http://jsfiddle.net/5kz64ero/6/)

# c++ - JNI / Android NDK - 维护全局对象引用

> ID：12337661
> 
> 赞同：3
> 
> 时间：2012-09-09T08:38:22.007
> 
> 标签：c++, android-ndk, java-native-interface

我知道我不能保留对数组内部的引用，所以我想知道是否可以保留指向 java 数组对象或任何 java 对象的全局指针。以及我从 C++ 创建它是否有任何区别。

它有效，但我担心垃圾收集器可能会重新定位内存（我理解它的原因`Get...`和`Release...`方法`JNIEnv`）。

```
//global jfloatArray
jfloatArray jarray;

//called once
JNIEXPORT void Java_com_example_test1_Main_Init
  (JNIEnv *env, jclass thiz){
    //create once
    jarray = env->NewFloatArray(10);  //if valid, would it be as valid to pass it in?
}

//called repeatedly
JNIEXPORT void JNICALL
Java_com_example_test1_Main_loop(JNIEnv* env, jobject thiz) {    
    //use jarray in here
} 
```

**编辑：**

这是正确的代码。

```
//global jfloatArray
jfloatArray jarray;

//called once
JNIEXPORT void Java_com_example_test1_Main_Init
  (JNIEnv *env, jclass thiz){
      //create once
      //create it - this gives a local reference
      jfloatArray local_jarray = env->NewFloatArray(10);
      //get a global reference, cast it and set to the global "jarray"
      jarray = (jfloatArray) env->NewGlobalRef(local_jarray);
      //delete the local reference
      env->DeleteLocalRef(local_jarray);
}

//called repeatedly
JNIEXPORT void JNICALL
Java_com_example_test1_Main_loop(JNIEnv* env, jobject thiz) {    
    //use jarray in here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:47:46.373

您的参考只是一个参考。它不会阻止它引用的对象被重新定位。它将防止对象被重新收集*；*局部引用在返回后会自动销毁，但是由于你使用的是全局变量，所以你应该使用全局引用，这需要手动管理。见[`NewGlobalRef`](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html#NewGlobalRef)和[`DeleteGlobalRef`](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/functions.html#DeleteGlobalRef)。

# delphi - 如何使用 Delphi 在 activeX 中创建已发布的过程/函数？

> ID：12337667
> 
> 赞同：0
> 
> 时间：2012-09-09T08:39:09.017
> 
> 标签：delphi, activex, publish

> **可能重复：**
> [无法访问 delphi ActiveX 控件中的公共功能？](https://stackoverflow.com/questions/12336129/cant-access-public-function-in-delphi-activex-control)

我正在使用 Delphi 的 ActiveX 控件实现。在我的主要课程中，我有：

```
 type
      TezDICOMX = class(TActiveForm, IezDICOMX)
        ToolBar1: TToolBar;
        OpenBtn: TSpeedButton;
        PreviousBtn: TSpeedButton; 
```

....我将这些代码添加到类中。

```
 published
procedure abc; safecall; 
```

之后，我构建项目并注册 ActiveX 服务器。它生成 ezDICOMax.ocx。我打开visual studio，删除我之前嵌入的剩余ezDICOM activeX控件并嵌入新的。我将 activeX 控件拖到设计中并将其命名为 the_ezdicom。所以我认为，我应该可以调用 the_ezdicom.abc()，但是当我这样做时，编译器会抱怨

```
'AxezDICOMax.AxezDICOMX' does not contain a definition for 'abc' and no extension method 'abc' accepting a first argument of type 'AxezDICOMax.AxezDICOMX' could be found (are you missing a using directive or an assembly reference?) 
```

我做错了什么？如何使用 Delphi 在 ActiveX 控件中创建已发布的过程/函数？如果我更改类中的现有函数/过程并执行所有注册、嵌入步骤，当我从 C# 调用时该函数/过程的结果也会发生变化，所以我认为 activeX 控件已更新到我的 Delphi 源，但是我仍然无法添加已发布的过程/功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:09:40.670

你需要：

1.  编辑类型库（使用类型库编辑器）以添加新方法
2.  刷新实现（这可以由类型库编辑器自动完成，具体取决于您的 IDE 设置），在生成的方法体中编写您的实现代码
3.  构建并重新注册您的 ActiveX 服务器（以防您添加了新的接口或数据类型）；以管理员身份运行 regsvr32，因为它需要访问受保护的注册表分支。

在这种情况下，实现方法的 Delphi 可见性无关紧要：该类应该通过接口指针使用，而不是通过 Delphi 类实例指针。因此，我建议对其进行保护，由类型库编辑器生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:42:13.153

我发现这是 Visual Studio 的问题。因为我改变了我的activeX控件的界面，所以我必须在我的项目中删除对activeX控件的引用，重新添加。如果我们不改变界面，只需注销并注册activeX控件就足够了。

# django - Django - fk_name 是什么？

> ID：12337668
> 
> 赞同：3
> 
> 时间：2012-09-09T08:39:20.863
> 
> 标签：django, mptt

我正在寻找有关如何让我的 Django 项目管理员同时使用 treeadmin 拖放 thingy 和 mptt 模型的帮助。

开箱即用一切正常，但是当我在 admin.py 中尝试此操作时：

```
class ItemInline(TreeAdmin):
    model = MenuItems

class MenuAdmin(admin.ModelAdmin):
    model = Menu
    inlines = (ItemInline, )

admin.site.register(Menu, MenuAdmin) 
```

我收到一个错误：类型对象“ItemInline”没有属性“fk_name”。

现在，这个 fk_name 到底是什么，我如何将它添加到 ItemInLine？

这也是我的模型，以防它与任何事情有关：

```
class Menu(MPTTModel):
        name = models.CharField(max_length = 100)

        def __unicode__(self):
                return self.name

class MenuItems(MPTTModel):
        menu = models.ForeignKey(Menu)
        name = models.CharField(max_length=50, unique=True)
        parent = TreeForeignKey('self', null=True, blank=True, related_name='children')
        target = models.ForeignKey(Pages,null=True, blank=True)

        class MPTTMeta:
                order_insertion_by = ['name']

        def __unicode__(self):
                return self.name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T09:17:03.803

您不能只是将任何随机管理类变成内联。它实际上必须从`InlineModelAdmin`类继承，而`TreeAdmin`它显然不是。

您可以尝试通过使用 InlineModelAdmin 作为 mixin 来解决此问题 - 这*可能*有效：

```
class ItemInline(TreeAdmin, InlineModelAdmin): 
```

# c# - LINQ 中的条件 WHERE

> ID：12337670
> 
> 赞同：6
> 
> 时间：2012-09-09T08:39:57.963
> 
> 标签：c#, linq, entity-framework, tsql, linq-to-entities

嗨，关于基于搜索条件构建 LINQ 语句的任何建议？

我将传入一个所有参数都可为空的“SearchCriteria”类的实例。

然后我想

```
if (sc.a != null)
    // add to where

if (sc.b != null)
    // add to where 
```

关键是这些是 OR 而不是 AND。

有小费吗？

对于奖励积分，我想在 int 上使用“包含”？但我只能得到等于或不等于。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T08:43:47.210

尝试：

```
.Where(x =>
    (x.a != null ? x.a == a : false) &&
    (x.b != null ? x.b == b : false)); 
```

或者

```
.Where(x =>
    (x.a != null && x.a == a) ||
    (x.b != null && x.b == b)); 
```

* * *

还：

```
.Where(x => new int[] { 1, 2, 3 }.Contains(x.i)); 
```

# c# - 对多个任务使用 async/await

> ID：12337671
> 
> 赞同：481
> 
> 时间：2012-09-09T08:40:04.567
> 
> 标签：c#, .net, task-parallel-library, async-await, c#-5.0

我正在使用一个完全异步的 API 客户端，也就是说，每个操作要么返回`Task`要么`Task<T>`，例如：

```
static async Task DoSomething(int siteId, int postId, IBlogClient client)
{
    await client.DeletePost(siteId, postId); // call API client
    Console.WriteLine("Deleted post {0}.", siteId);
} 
```

使用 C# 5 async/await 运算符，启动多个任务并等待它们全部完成的正确/最有效的方法是什么：

```
int[] ids = new[] { 1, 2, 3, 4, 5 };
Parallel.ForEach(ids, i => DoSomething(1, i, blogClient).Wait()); 
```

或者：

```
int[] ids = new[] { 1, 2, 3, 4, 5 };
Task.WaitAll(ids.Select(i => DoSomething(1, i, blogClient)).ToArray()); 
```

由于 API 客户端在内部使用 HttpClient，我希望这会立即发出 5 个 HTTP 请求，并在每个请求完成时写入控制台。

* * *

## 回答 #1

> 赞同：669
> 
> 时间：2012-09-09T11:35:03.193

```
int[] ids = new[] { 1, 2, 3, 4, 5 };
Parallel.ForEach(ids, i => DoSomething(1, i, blogClient).Wait()); 
```

尽管您与上述代码并行运行这些操作，但此代码会阻止每个操作运行的每个线程。例如，如果网络调用需要 2 秒，则每个线程会挂起 2 秒，除了等待之外什么都不做。

```
int[] ids = new[] { 1, 2, 3, 4, 5 };
Task.WaitAll(ids.Select(i => DoSomething(1, i, blogClient)).ToArray()); 
```

另一方面，上面的代码`WaitAll`也阻塞了线程，并且在操作结束之前，您的线程将无法自由处理任何其他工作。

### 推荐方法

我更喜欢`WhenAll`哪个会以并行方式异步执行您的操作。

```
public async Task DoWork() {

    int[] ids = new[] { 1, 2, 3, 4, 5 };
    await Task.WhenAll(ids.Select(i => DoSomething(1, i, blogClient)));
} 
```

> 事实上，在上述情况下，你甚至不需要`await`，你可以直接从方法中返回，因为你没有任何延续：
> 
> ```
> public Task DoWork() 
> {
>     int[] ids = new[] { 1, 2, 3, 4, 5 };
>     return Task.WhenAll(ids.Select(i => DoSomething(1, i, blogClient)));
> } 
> ```

为了支持这一点，这里有一篇详细的博客文章，介绍了所有替代方案及其优缺点：[如何以及在何处使用 ASP.NET Web API 进行并发异步 I/O](http://www.tugberkugurlu.com/archive/how-and-where-concurrent-asynchronous-io-with-asp-net-web-api)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-09-30T05:25:02.317

我很想知道问题中提供的方法的结果以及接受的答案，所以我对其进行了测试。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

namespace AsyncTest
{
    class Program
    {
        class Worker
        {
            public int Id;
            public int SleepTimeout;

            public async Task DoWork(DateTime testStart)
            {
                var workerStart = DateTime.Now;
                Console.WriteLine("Worker {0} started on thread {1}, beginning {2} seconds after test start.",
                    Id, Thread.CurrentThread.ManagedThreadId, (workerStart-testStart).TotalSeconds.ToString("F2"));
                await Task.Run(() => Thread.Sleep(SleepTimeout));
                var workerEnd = DateTime.Now;
                Console.WriteLine("Worker {0} stopped; the worker took {1} seconds, and it finished {2} seconds after the test start.",
                   Id, (workerEnd-workerStart).TotalSeconds.ToString("F2"), (workerEnd-testStart).TotalSeconds.ToString("F2"));
            }
        }

        static void Main(string[] args)
        {
            var workers = new List<Worker>
            {
                new Worker { Id = 1, SleepTimeout = 1000 },
                new Worker { Id = 2, SleepTimeout = 2000 },
                new Worker { Id = 3, SleepTimeout = 3000 },
                new Worker { Id = 4, SleepTimeout = 4000 },
                new Worker { Id = 5, SleepTimeout = 5000 },
            };

            var startTime = DateTime.Now;
            Console.WriteLine("Starting test: Parallel.ForEach...");
            PerformTest_ParallelForEach(workers, startTime);
            var endTime = DateTime.Now;
            Console.WriteLine("Test finished after {0} seconds.\n",
                (endTime - startTime).TotalSeconds.ToString("F2"));

            startTime = DateTime.Now;
            Console.WriteLine("Starting test: Task.WaitAll...");
            PerformTest_TaskWaitAll(workers, startTime);
            endTime = DateTime.Now;
            Console.WriteLine("Test finished after {0} seconds.\n",
                (endTime - startTime).TotalSeconds.ToString("F2"));

            startTime = DateTime.Now;
            Console.WriteLine("Starting test: Task.WhenAll...");
            var task = PerformTest_TaskWhenAll(workers, startTime);
            task.Wait();
            endTime = DateTime.Now;
            Console.WriteLine("Test finished after {0} seconds.\n",
                (endTime - startTime).TotalSeconds.ToString("F2"));

            Console.ReadKey();
        }

        static void PerformTest_ParallelForEach(List<Worker> workers, DateTime testStart)
        {
            Parallel.ForEach(workers, worker => worker.DoWork(testStart).Wait());
        }

        static void PerformTest_TaskWaitAll(List<Worker> workers, DateTime testStart)
        {
            Task.WaitAll(workers.Select(worker => worker.DoWork(testStart)).ToArray());
        }

        static Task PerformTest_TaskWhenAll(List<Worker> workers, DateTime testStart)
        {
            return Task.WhenAll(workers.Select(worker => worker.DoWork(testStart)));
        }
    }
} 
```

结果输出：

```
Starting test: Parallel.ForEach...
Worker 1 started on thread 1, beginning 0.21 seconds after test start.
Worker 4 started on thread 5, beginning 0.21 seconds after test start.
Worker 2 started on thread 3, beginning 0.21 seconds after test start.
Worker 5 started on thread 6, beginning 0.21 seconds after test start.
Worker 3 started on thread 4, beginning 0.21 seconds after test start.
Worker 1 stopped; the worker took 1.90 seconds, and it finished 2.11 seconds after the test start.
Worker 2 stopped; the worker took 3.89 seconds, and it finished 4.10 seconds after the test start.
Worker 3 stopped; the worker took 5.89 seconds, and it finished 6.10 seconds after the test start.
Worker 4 stopped; the worker took 5.90 seconds, and it finished 6.11 seconds after the test start.
Worker 5 stopped; the worker took 8.89 seconds, and it finished 9.10 seconds after the test start.
Test finished after 9.10 seconds.

Starting test: Task.WaitAll...
Worker 1 started on thread 1, beginning 0.01 seconds after test start.
Worker 2 started on thread 1, beginning 0.01 seconds after test start.
Worker 3 started on thread 1, beginning 0.01 seconds after test start.
Worker 4 started on thread 1, beginning 0.01 seconds after test start.
Worker 5 started on thread 1, beginning 0.01 seconds after test start.
Worker 1 stopped; the worker took 1.00 seconds, and it finished 1.01 seconds after the test start.
Worker 2 stopped; the worker took 2.00 seconds, and it finished 2.01 seconds after the test start.
Worker 3 stopped; the worker took 3.00 seconds, and it finished 3.01 seconds after the test start.
Worker 4 stopped; the worker took 4.00 seconds, and it finished 4.01 seconds after the test start.
Worker 5 stopped; the worker took 5.00 seconds, and it finished 5.01 seconds after the test start.
Test finished after 5.01 seconds.

Starting test: Task.WhenAll...
Worker 1 started on thread 1, beginning 0.00 seconds after test start.
Worker 2 started on thread 1, beginning 0.00 seconds after test start.
Worker 3 started on thread 1, beginning 0.00 seconds after test start.
Worker 4 started on thread 1, beginning 0.00 seconds after test start.
Worker 5 started on thread 1, beginning 0.00 seconds after test start.
Worker 1 stopped; the worker took 1.00 seconds, and it finished 1.00 seconds after the test start.
Worker 2 stopped; the worker took 2.00 seconds, and it finished 2.00 seconds after the test start.
Worker 3 stopped; the worker took 3.00 seconds, and it finished 3.00 seconds after the test start.
Worker 4 stopped; the worker took 4.00 seconds, and it finished 4.00 seconds after the test start.
Worker 5 stopped; the worker took 5.00 seconds, and it finished 5.00 seconds after the test start.
Test finished after 5.00 seconds. 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-09-09T11:51:07.360

由于您调用的 API 是异步的，因此`Parallel.ForEach`版本没有多大意义。您不应该`.Wait`在该`WaitAll`版本中使用，因为这会失去并行性如果调用者是异步的，另一种选择是`Task.WhenAll`在执行后使用`Select`并`ToArray`生成任务数组。第二种选择是使用 Rx 2.0

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-01-07T19:39:31.810

您可以使用`Task.WhenAll`可以传递*n 个*任务的功能；`Task.WhenAll`当您传递的所有任务完成时，将返回一个运行完成的任务`Task.WhenAll`。您必须异步等待，`Task.WhenAll`以免阻塞 UI 线程：

```
 public async Task DoSomeThing() {

       Task[] tasks = new Task[numTasks];
       for(int i = 0; i < numTask; i++)
       {
          tasks[i] = CallSomeAsync();
       }
       await Task.WhenAll(tasks);
       // code that'll execute on UI thread
   } 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-09-14T19:28:28.313

`Parallel.ForEach`需要一个*用户定义的*工作人员列表和一个**非异步** `Action`来与每个工作人员一起执行。

`Task.WaitAll`并且`Task.WhenAll`需要 a `List<Task>`，根据定义，它们是异步的。

我发现[RiaanDP](https://stackoverflow.com/users/1820089/riaandp)的[回复](https://stackoverflow.com/questions/12337671/using-async-await-for-multiple-tasks#32858405)对于理解差异非常有用，但需要对`Parallel.ForEach`. 没有足够的声誉来回应他的评论，因此我自己的回应。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading;
using System.Threading.Tasks;

namespace AsyncTest
{
    class Program
    {
        class Worker
        {
            public int Id;
            public int SleepTimeout;

            public void DoWork(DateTime testStart)
            {
                var workerStart = DateTime.Now;
                Console.WriteLine("Worker {0} started on thread {1}, beginning {2} seconds after test start.",
                    Id, Thread.CurrentThread.ManagedThreadId, (workerStart - testStart).TotalSeconds.ToString("F2"));
                Thread.Sleep(SleepTimeout);
                var workerEnd = DateTime.Now;
                Console.WriteLine("Worker {0} stopped; the worker took {1} seconds, and it finished {2} seconds after the test start.",
                   Id, (workerEnd - workerStart).TotalSeconds.ToString("F2"), (workerEnd - testStart).TotalSeconds.ToString("F2"));
            }

            public async Task DoWorkAsync(DateTime testStart)
            {
                var workerStart = DateTime.Now;
                Console.WriteLine("Worker {0} started on thread {1}, beginning {2} seconds after test start.",
                    Id, Thread.CurrentThread.ManagedThreadId, (workerStart - testStart).TotalSeconds.ToString("F2"));
                await Task.Run(() => Thread.Sleep(SleepTimeout));
                var workerEnd = DateTime.Now;
                Console.WriteLine("Worker {0} stopped; the worker took {1} seconds, and it finished {2} seconds after the test start.",
                   Id, (workerEnd - workerStart).TotalSeconds.ToString("F2"), (workerEnd - testStart).TotalSeconds.ToString("F2"));
            }
        }

        static void Main(string[] args)
        {
            var workers = new List<Worker>
            {
                new Worker { Id = 1, SleepTimeout = 1000 },
                new Worker { Id = 2, SleepTimeout = 2000 },
                new Worker { Id = 3, SleepTimeout = 3000 },
                new Worker { Id = 4, SleepTimeout = 4000 },
                new Worker { Id = 5, SleepTimeout = 5000 },
            };

            var startTime = DateTime.Now;
            Console.WriteLine("Starting test: Parallel.ForEach...");
            PerformTest_ParallelForEach(workers, startTime);
            var endTime = DateTime.Now;
            Console.WriteLine("Test finished after {0} seconds.\n",
                (endTime - startTime).TotalSeconds.ToString("F2"));

            startTime = DateTime.Now;
            Console.WriteLine("Starting test: Task.WaitAll...");
            PerformTest_TaskWaitAll(workers, startTime);
            endTime = DateTime.Now;
            Console.WriteLine("Test finished after {0} seconds.\n",
                (endTime - startTime).TotalSeconds.ToString("F2"));

            startTime = DateTime.Now;
            Console.WriteLine("Starting test: Task.WhenAll...");
            var task = PerformTest_TaskWhenAll(workers, startTime);
            task.Wait();
            endTime = DateTime.Now;
            Console.WriteLine("Test finished after {0} seconds.\n",
                (endTime - startTime).TotalSeconds.ToString("F2"));

            Console.ReadKey();
        }

        static void PerformTest_ParallelForEach(List<Worker> workers, DateTime testStart)
        {
            Parallel.ForEach(workers, worker => worker.DoWork(testStart));
        }

        static void PerformTest_TaskWaitAll(List<Worker> workers, DateTime testStart)
        {
            Task.WaitAll(workers.Select(worker => worker.DoWorkAsync(testStart)).ToArray());
        }

        static Task PerformTest_TaskWhenAll(List<Worker> workers, DateTime testStart)
        {
            return Task.WhenAll(workers.Select(worker => worker.DoWorkAsync(testStart)));
        }
    }
} 
```

结果输出如下。执行时间是可比的。我在我的计算机进行每周一次的防病毒扫描时运行了这个测试。改变测试的顺序确实改变了它们的执行时间。

```
Starting test: Parallel.ForEach...
Worker 1 started on thread 9, beginning 0.02 seconds after test start.
Worker 2 started on thread 10, beginning 0.02 seconds after test start.
Worker 3 started on thread 11, beginning 0.02 seconds after test start.
Worker 4 started on thread 13, beginning 0.03 seconds after test start.
Worker 5 started on thread 14, beginning 0.03 seconds after test start.
Worker 1 stopped; the worker took 1.00 seconds, and it finished 1.02 seconds after the test start.
Worker 2 stopped; the worker took 2.00 seconds, and it finished 2.02 seconds after the test start.
Worker 3 stopped; the worker took 3.00 seconds, and it finished 3.03 seconds after the test start.
Worker 4 stopped; the worker took 4.00 seconds, and it finished 4.03 seconds after the test start.
Worker 5 stopped; the worker took 5.00 seconds, and it finished 5.03 seconds after the test start.
Test finished after 5.03 seconds.

Starting test: Task.WaitAll...
Worker 1 started on thread 9, beginning 0.00 seconds after test start.
Worker 2 started on thread 9, beginning 0.00 seconds after test start.
Worker 3 started on thread 9, beginning 0.00 seconds after test start.
Worker 4 started on thread 9, beginning 0.00 seconds after test start.
Worker 5 started on thread 9, beginning 0.01 seconds after test start.
Worker 1 stopped; the worker took 1.00 seconds, and it finished 1.01 seconds after the test start.
Worker 2 stopped; the worker took 2.00 seconds, and it finished 2.01 seconds after the test start.
Worker 3 stopped; the worker took 3.00 seconds, and it finished 3.01 seconds after the test start.
Worker 4 stopped; the worker took 4.00 seconds, and it finished 4.01 seconds after the test start.
Worker 5 stopped; the worker took 5.00 seconds, and it finished 5.01 seconds after the test start.
Test finished after 5.01 seconds.

Starting test: Task.WhenAll...
Worker 1 started on thread 9, beginning 0.00 seconds after test start.
Worker 2 started on thread 9, beginning 0.00 seconds after test start.
Worker 3 started on thread 9, beginning 0.00 seconds after test start.
Worker 4 started on thread 9, beginning 0.00 seconds after test start.
Worker 5 started on thread 9, beginning 0.00 seconds after test start.
Worker 1 stopped; the worker took 1.00 seconds, and it finished 1.00 seconds after the test start.
Worker 2 stopped; the worker took 2.00 seconds, and it finished 2.00 seconds after the test start.
Worker 3 stopped; the worker took 3.00 seconds, and it finished 3.00 seconds after the test start.
Worker 4 stopped; the worker took 4.00 seconds, and it finished 4.00 seconds after the test start.
Worker 5 stopped; the worker took 5.00 seconds, and it finished 5.01 seconds after the test start.
Test finished after 5.01 seconds. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2022-01-19T22:57:39.253

所有的答案似乎都很复杂。

以下代码对我有用，只需将常规 Task.Run() 放入数组中并使用 Task.WhenAll() 调用：

```
等待Task.WhenAll（新任务[] {
                Task.Run(() => Func1(args)),
                Task.Run(() => Func2(args))
            });

```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-12T07:26:02.123

我只想补充上面所有的好答案，如果你写了一个库，那么使用它`ConfigureAwait(false)` 并获得更好的性能是一个很好的做法，如此[处](https://devblogs.microsoft.com/dotnet/configureawait-faq/)所述。

所以这个片段似乎更好：

```
 public static async Task DoWork() 
 {
     int[] ids = new[] { 1, 2, 3, 4, 5 };
     await Task.WhenAll(ids.Select(i => DoSomething(1, i))).ConfigureAwait(false);
 } 
```

一个完整的小提琴链接[在这里](https://sharplab.io/#v2:CYLg1APgAgTAjAWAFBQAwAIpwKwG5lqZwB0AMgJYB2AjvijKgTAMzoDey6XmMM7n3QVgCcACgBEgHg3AIPviAlHUEBfAV1WZWWAGyYAHJh0ARAPYB1YwCcA1qLnp1HJIMFUALgG0AuunLAAzugAvOiUAKYA7l7s6HAANOgw8czxACzx2OhKis5cUMIGxKYAFqGUAIIANhWivn7EAMqhFaEAxq41QQB86Cb1xgC2oa5FVADmonE+ctPEAMLGlABm5KMArhahZeEAhuTti9sVfqEK6ipO3OpQmnA6UPpQRsZ9g8NjNZSu6NvxbugARnIHOpBAA3bYWdDAIKYfKPYgAMQsAwASqE/KsKu1tmBAdkuOclEA=)。

# iphone - 重新请求用户授予我的应用程序权限时遇到错误

> ID：12337673
> 
> 赞同：2
> 
> 时间：2012-09-09T08:40:15.703
> 
> 标签：iphone, facebook, ios5, pre-authentication

在测试新的 Facebook API 与我的 iOS 应用程序的集成时，我从我的 Facebook 帐户的应用程序设置中删除了该应用程序，期望这会强制 Facebook.authorize() 重新请求用户授予我的应用程序的权限。我遇到错误：app_name 发生错误，请稍后再试。

脚步：

1.  通过弹出对话框登录 Facebook。而且效果很好。

    [fbSession openWithBehavior:FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState state, NSError *error) { ...}];

2.  我从 Facebook 帐户的应用设置中删除了该应用。

3.  打开我的应用程序并再次登录 facebook，它遇到错误。![在此处输入图像描述](../Images/f226aad4db74ed888cc95ab43599e62b.png)

4.  如果我点击 Okay 按钮，它会直接进入我的 facebook 网站。而不是关闭弹出对话框。 ![在此处输入图像描述](../Images/4865b3d423a97d31a85c511e6d8e80a5.png)

# facebook - end_time 使用开发人员 api 密钥返回的结果与 facebook graph api 中的 access_token 不同

> ID：12337674
> 
> 赞同：1
> 
> 时间：2012-09-09T08:40:36.057
> 
> 标签：facebook, facebook-graph-api

在以下情况下获取事件信息时，我会得到不同的结果。在第一个示例中缺少 end_time，但在第二个示例中没有。

1)

这是我通过 facebook php 库使用我的 api 密钥对事件 335236606550968 执行图形 api 请求时得到的结果。我通过做 var_dump( $facebook->api("335236606550968"));

```

       数组（9）{
      [“身份证”]=>
      字符串（15）“335236606550968”
      [“所有者”]=>
      数组（3）{
        [“名称”]=>
        字符串（13）“SourceTech AB”
        [“类别”]=>
        字符串（17）“互联网/软件”
        [“身份证”]=>
        字符串（15）“177255652292215”
      }
      [“名称”]=>
      string(21) "SourceTech 论坛 2012"
      [“描述”]=>
      string(146) "Missa inte SourceTech Forum som kommer ge er ett par fantastiska dagar späckade med 灵感，fantastiska möten och motiverande discussioner。"
      [“开始时间”]=>
      字符串（10）“2012-10-17”
      [“位置”]=>
      string(38) "Täby park hotell, Hotell & Restaurang"
      [“场地”]=>
      数组（1）{
        [“身份证”]=>
        字符串（15）“121351554601098”
      }
      [“隐私”]=>
      字符串（4）“打开”
      [“更新时间”]=>
      字符串（24）“2012-07-02T11:50:38+0000”
    }

```

2)

这是我在加载此 URL 时通过与我自己的用户 access_token 进行 api 调用得到的结果： [https ://graph.facebook.com/335236606550968?access_token=YOURACCESSTOKENHERE](https://graph.facebook.com/335236606550968?access_token=YOURACCESSTOKENHERE)

```
    {
       "id": "335236606550968",
       “所有者”： {
          “名称”：“SourceTech AB”，
          “类别”：“互联网/软件”，
          “id”：“177255652292215”
       },
       "name": "SourceTech 2012 论坛",
       "description": "Missa inte SourceTech Forum som kommer ge er ett par fantastiska dagar sp\u00e4ckade med 灵感，fantastiska m\u00f6ten och motiverande discussioner.",
       "start_time": "2012-10-18T02:00:00",
       "end_time": "2012-10-19T02:00:00",
       "location": "T\u00e4by park hotell, Hotell & Restaurang",
       “场地”：{
          “id”：“121351554601098”
       },
       “隐私”：“打开”，
       “更新时间”：“2012-07-02T11:50:38+0000”
    }

```

在第一个示例中缺少 end_time，但在第二个示例中没有。大多数事件的 end_time 在第二天 start_time 似乎就是这种情况。将 php 库与我的 API 密钥一起使用时，如何为该事件检索正确的 end_time？

# assembly - 通过程序集隐藏消息框

> ID：12337681
> 
> 赞同：1
> 
> 时间：2012-09-09T08:41:14.020
> 
> 标签：assembly, mfc, ida

我的一个非常旧的程序有一个错误消息框，它一直显示，我需要摆脱它。我丢失了源代码，所以我现在正在使用程序集：

带有程序集和消息框的部分看起来像

```
Cmp, ebx 4F6h
Jl short loc 10000dec
Push 30h
Push offset caption ; error ...
Push offset detailsitspast08
Push 0
Call ds: messageboxa 
```

如何修改它使其不显示消息框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:30:39.093

IDA 很好，但您还需要一个十六进制编辑器，例如[Hex Workshop](http://www.hexworkshop.com/)或[XVI32](http://www.chmaas.handshake.de/delphi/freeware/xvi32/xvi32.htm)。以下是您的操作方法：

在 IDA 中，将文本光标放在要替换的第一行，`push 30h`. 查看反汇编窗口下方状态栏的左侧部分。您应该看到两个十六进制地址 - 物理地址和虚拟地址。注意物理的。现在专注于*之后* `call ds:MessageBoxA`的第一条指令。再次记下物理地址。

在十六进制编辑器中打开可执行文件（先备份！），然后导航到第一个物理地址。确保您覆盖字节而不是插入它们，并继续写入`0x90`值直到到达第二个地址。不要覆盖它。

以不同的名称保存这个更改的文件，在另一个 IDA 实例中打开它（如果覆盖原始文件，IDA 将无法并排打开新文件），导航到虚拟地址，并检查所有字节已正确替换。就是这样。

提示：如果你进入 IDA 的*Options* > *General*并将*操作码字节数*设置为非零值，例如 10，你将在左侧看到组成每条指令的字节。您可以计算这些以确保您替换了正确的字节数。（或者你可以从结束地址中减去开始地址，显然）。

这是一个示例截图（截图中的应用程序当然不同，但要点是相同的）：

前：

![原始指令](../Images/b107662fdf088427a042c73c4633cbb5.png)

后：

![修改后的指令](../Images/dbcfc7f8c67a0010e89c9d130074c32a.png)

# hadoop - HBASE 0.94.1 与 hadoop 的兼容性

> ID：12337683
> 
> 赞同：8
> 
> 时间：2012-09-09T08:41:20.580
> 
> 标签：hadoop, compatibility, hbase

我是 HBASE 和 HADOOP 的新手，需要可用的兼容版本的 hbase 和 hadoop 来运行我的实验。

“http://apache.techartifact.com/mirror/hbase/”的当前稳定版本是 hbase-0.94.1 。任何人都可以告诉我应该使用哪个版本的hadoop，这样就没有兼容性问题，也没有未来的数据丢失。

请从当前在线可用的 hadoop 和 hbase 版本中提出建议。

以下是我用来下载这些版本的网站

[http://apache.techartifact.com/mirror/hadoop/common/](http://apache.techartifact.com/mirror/hadoop/common/) (hadoop) [http://apache.techartifact.com/mirror/hbase/](http://apache.techartifact.com/mirror/hbase/) (hbase)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T20:51:38.260

如果您想确定`Hadoop`您正在使用的 HBase 发行版的兼容性，您可以考虑使用`Apache Bigtop`项目或`Cloudera CDH`包。

[大顶](http://incubator.apache.org/bigtop/)：

> Bigtop 的主要目标是围绕 Hadoop 相关项目的打包和互操作性测试建立一个社区。这包括由社区开发的各个级别（打包、平台、运行时、升级等）的测试，重点关注整个系统，而不是单个项目。

[云时代](https://ccp.cloudera.com/display/SUPPORT/Downloads)：

> CDH 由 100% 开源的 Apache Hadoop 以及来自 Hadoop 生态系统的其他九个开源项目组成。CDH 经过全面测试和认证，可与最广泛的操作系统和硬件、数据库和数据仓库以及商业智能和 ETL 系统集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T09:45:00.377

我使用**hadoop-0.20.203.0**和**hbase-0.94.1**没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:55:57.227

从 stable 文件夹下载两者。我不知道某些版本是否与其他版本不兼容。

# spotify - Spotify 的远程控制 API？

> ID：12337685
> 
> 赞同：6
> 
> 时间：2012-09-09T08:41:48.030
> 
> 标签：spotify

有没有像 Spotify 远程控制 API 这样的东西？我想编写一个应用程序，让用户控制 Spotify 桌面客户端（播放、暂停、音量、播放列表等），但我似乎无法在任何地方找到任何文档。

那里有 iOS 和 Android 远程控制应用程序，所以我只是想知道如果没有 API，他们是如何做到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:47:23.457

在 Mac OS X 上，可以使用 AppleScript，使用捆绑的 API 或系统事件服务“远程”（即从其他应用程序）控制 Spotify。

这是使用捆绑 API 的示例：[https ://github.com/activars/spotify-applescript/blob/master/spotify_control.applescript](https://github.com/activars/spotify-applescript/blob/master/spotify_control.applescript)

另一个使用系统事件（它不是那么优雅）：[http ://www.jacktams.net/2010/04/28/spotify-applescripts-version-0-4-3/](http://www.jacktams.net/2010/04/28/spotify-applescripts-version-0-4-3/)

官方文档有点薄，尽管您应该能够使用 AppleScript 编辑器的库功能来了解有关所提供方法的更多信息。

# php - 在模板中自定义 $singularHumanName

> ID：12337686
> 
> 赞同：1
> 
> 时间：2012-09-09T08:41:55.430
> 
> 标签：php, cakephp, cakephp-2.0

我有自定义模板 - 翻译自动生成的视图。例如有一行：

```
echo "<?php echo \$this->Html->link(__('Lista " . $pluralHumanName . "'), array('action' => 'index')); ?>"; 
```

我的模型有英文名称（正如蛋糕的约定所希望的那样），但我想在自动创建的视图中使用翻译后的模型名称。例如在标题模型中我试图声明：

```
$pluralHumanName = 'Stanowiska'; 
```

但生成的视图文件总是有英文名称......我必须手动翻译每个文件。有没有办法翻译/更改 $singularHumanName 和 $pluralHumanName ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:50:39.783

那你为什么要双译呢？

```
 __('Lista " . $pluralHumanName . "') 
```

__() 已经翻译了。因此，您尝试再次翻译您的翻译字符串（当然，您的 po 中没有翻译后的字符串）。

您应该坚持使用 __() 中的英文单词，然后将“Lista”和其他翻译字符串放入您的 po 文件中。

要不就：

```
'Lista " . __($pluralHumanName) . "' 
```

没有`__()`周围。但是`__()`，for $pluralHumanName 会立即在您的模板中进行翻译，并将成为您想要的名称（硬编码）。但正如我上面提到的，你通常不会那样做！

# java - Spring MVC与JSF+spring core+hibernate集成实现文件下载

> ID：12337687
> 
> 赞同：0
> 
> 时间：2012-09-09T08:42:08.223
> 
> 标签：java, spring-mvc, jsf-2, download

我已经使用 JSF 和 Hibernate 集成了 Spring 核心来开发我的 Web 应用程序。我正在开发一个文件下载功能，让用户可以从我们网络上的一个共享驱动器下载 pdf 文件。我想使用 Spring MVC 来实现这个文件下载功能。在这种情况下，我还需要定义 DispatcherServlet 和Web.xml 中的 URLHandlerMapping。还有哪些其他方法可以在 java 中实现此文件下载功能而没有任何复杂性。请提供 java 中文件下载的任何示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:50:31.150

使用 Servlet 非常容易。您必须生成一个带有 id 的链接（如果需要，也可以使用加密的 id）。之后，将您的文件刷新到 HttpServletResponse 中。标题也很重要。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T09:22:01.450

您可以拥有一个 REST 服务，该服务具有检索逻辑的实现。这样就可以重复使用了。

# excel - 在 Excel-vba 中停止执行直到循环

> ID：12337700
> 
> 赞同：0
> 
> 时间：2012-09-09T08:43:55.987
> 
> 标签：excel, do-loops, vba

我创建了这个宏来纠正一个错误（填补非闰年 2 月 29 日创建的空白）我在停止执行直到循环时遇到了问题。

宏做了它应该做的事情，但它没有按预期工作，`Do Until ActiveSheet.Cells(3, x) = "2012"`我希望它在单元格（3，x）是 2012 时停止

```
Sub Feb_CORRECTION()
Dim i, x As Integer
Dim year
Dim leapyear

Range("c64").Select
x = 3
Do Until ActiveSheet.Cells(3, x) = "2012"
year = ActiveSheet.Cells(3, x)
leapyear = year Mod 4
If leapyear > 0 Then
Range(ActiveCell, ActiveCell.End(xlDown)).Select
Selection.Cut
ActiveCell.Offset(-1, 0).Select
ActiveSheet.Paste
ActiveCell.Offset(1, 1).Select
Else
ActiveCell.Offset(0, 1).Select
x = x + 1
End If
Loop

End Sub 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:51:02.777

如果列中第 3 行的`x`值为“2012”，则您的循环设置为退出。

您初始化`x`为 3，然后检查第 3 行中的年份是否为闰年。如果是，您只会增加`x`，因此除非“C”列中的年份是闰年，`x`否则永远不会增加。

试试这个：

```
Sub Feb_CORRECTION()
Dim i As Integer
Dim x As Integer

Dim year As Integer
Dim leapyear As Integer

    Range("c64").Select
    x = 3

    Do Until ActiveSheet.Cells(3, x) = "2012"
        year = ActiveSheet.Cells(3, x)
        leapyear = year Mod 4

        If leapyear > 0 Then
            Range(ActiveCell, ActiveCell.End(xlDown)).Select
            Selection.Cut
            ActiveCell.Offset(-1, 0).Select
            ActiveSheet.Paste
            ActiveCell.Offset(1, 1).Select
        Else
            ActiveCell.Offset(0, 1).Select
        End If

        ' increment x regardless of leap year status
        x = x + 1
    Loop

End Sub 
```

您也有几个变量声明为变体，这是一个坏主意，除非您有非常具体的原因使用它们。变体可能会导致难以追踪的错误。我已经在上面的代码段中解决了这个问题。

请注意，代码中的这一行声明`i`为变体和`x`整数：

```
Dim i, x As Integer 
```

您还声明了`year`和`leapyear`作为变体。它们可能应该是整数。

最后的评论：用缩进格式化你的代码。如果格式正确，则更容易理解它在做什么。

# asp.net - 我想通过按钮单击将动态控件添加到面板，这不应该覆盖现有的动态创建的控件

> ID：12337701
> 
> 赞同：1
> 
> 时间：2012-09-09T08:43:59.650
> 
> 标签：asp.net, .net, vb.net

```
This is the Design:::

<asp:Panel ID="Panel1" runat="server">
</asp:Panel>
<asp:Button ID="Button2" runat="server" Text="Button" />
<asp:Label ID="l1" runat="server" Text="0"></asp:Label>
<asp:Label ID="l2" runat="server" Text="0"></asp:Label>

Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click
    Dim i As Integer = 0
    Dim j As Integer = 0
    l1.Text = l2.Text
    l2.Text = Val(l2.Text) + 10
    i = Val(l1.Text)
    j = Val(l2.Text)
    MsgBox(i & " " & j)
    While (i < j)
        Dim b As Button = New Button()
        b.ID = "b" + i.ToString()
        b.Text = b.ID
        Panel1.Controls.Add(b)
        i = i + 1
    End While
End Sub 
```

这包含一个单击按钮，它应该创建 10 个唯一按钮.. 我想将所有创建的按钮附加到现有按钮.. 但程序是覆盖而不是向面板添加控件帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:33:04.480

我刚试过这段代码。它不会覆盖任何东西。它将按钮添加到页面的最开始。如果您希望按钮出现在按钮“按钮 2”和标签之后，那么您应该放置面板，那么它应该是这样的

```
<asp:Button ID="Button2" runat="server" Text="Button" />
<asp:Label ID="l1" runat="server" Text="0"></asp:Label>
<asp:Label ID="l2" runat="server" Text="0"></asp:Label>
<asp:Panel ID="Panel1" runat="server">
</asp:Panel> 
```

如果您希望按钮与现有按钮和标签一起添加，那么代替面板，只需使用占位符，或将样式“显示：内联”添加到面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T11:26:38.567

我认为您想在每个按钮单击时添加 10 个动态控件。您面临的问题是，在第一次单击时，它会添加 10 个按钮控件，而在随后的单击中，它会覆盖以前的控件。每次请求页面时都会创建动态控件，因此您必须在每次请求时创建它们。

我编写了以下代码来解决您的查询并且它有效：

```
// Aspx code
<asp:Panel ID="Panel1" runat="server">
 </asp:Panel>
<asp:Button ID="Button2" runat="server" Text="Button" />
<asp:Label ID="l1" runat="server" Text="0"></asp:Label>
<asp:Label ID="l2" runat="server" Text="0"></asp:Label>

// Code BEhind

 Protected Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    Dim i As Integer = 0
    Dim j As Integer = 0
    l1.Text = l2.Text
    l2.Text = Val(l2.Text) + 10
    i = Val(l1.Text)
    j = Val(l2.Text)
    MsgBox(i & " " & j)

    Dim lst As List(Of Integer) = New List(Of Integer)  'Create a list of integer type
    lst.Add(i)  'Save value of i
    lst.Add(j)

    If Not Session("id_0") Is Nothing Then ' Will Check session for First Click exist or not

        For k As Integer = 0 To DirectCast(Session("click"), Integer)

            Dim mylst As List(Of Integer) = New List(Of Integer)
            mylst = DirectCast(Session("id_" & k), List(Of Integer)) ' Assign Session Value to List
            If Not mylst Is Nothing Then
                WriteControls(mylst(0), mylst(1)) ' Call the function
            End If

        Next

    End If

    Session("id_" & DirectCast(Session("click"), Integer)) = lst  ' Saves the entire list in Session

    WriteControls(i, j)  ' Function Call

End Sub

Private Sub WriteControls(i As Integer, j As Integer)  ' Function to write button control
    While (i < j)
        Dim b As Button = New Button()
        b.ID = "b" + i.ToString()
        b.Text = b.ID
        b.ViewStateMode = UI.ViewStateMode.Enabled
        Panel1.Controls.Add(b)
        i = i + 1
    End While
    Session("click") = DirectCast(Session("click"), Integer) + 1
End Sub

Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then          
        Session("click") = 0   ' Stores the no. of Clicks of the button
    End If

End Sub

' Output
' If I press three times button then there will be 30 buttons
b0 b1 b2 b3 b4 ............................................... b29
20 30 
```

# javascript - 为什么我不能延迟图像的填充？

> ID：12337702
> 
> 赞同：0
> 
> 时间：2012-09-09T08:44:03.743
> 
> 标签：javascript, jquery, html, image, dom

我正在从当前的 DOM 树中获取所有图像。我将它们显示到我的自定义统一 div 中并允许用户选择它们。

```
var allImgs = $('img');

allImgs.each(function (index) {
    var imgUrl = $(this).attr("src");
    var newImgTag = $('<img></img>');
    newImgTag.attr("src", imgUrl);
    newImgTag.attr("width", "100px");
    newImgTag.attr("height", "100px");

    $("#Image-Grid").append(newImgTag);  // this works

    newImgTag.click(function (event) {
        $('#Selected-Image').empty();
        $('#Selected-Image').append(newImgTag);   // this doesn`t work why????
    });
}); 
```

我能够让所有图像显示到我的统一 div 中。但是，当我从统一 div 中选择一张图片时。图像将无法正常显示。

例如，我随机选择一个时尚网站。 `http://www.abercrombie.com/webapp/wcs/stores/servlet/ProductDisplay?catalogId=10901&storeId=10051&langId=-1&categoryId=12266&parentCategoryId=%5bLjava.lang.String%3b%403dc73dc7&topCategoryId=12203&productId=1014475`

当我选择其中一张图片时，我注意到图片的 src 链接是这样的 `/anf/50817/img/global/logo-print.png`

为什么点击事件后面不能显示图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:05:47.580

```
newImgTag.click(function (event) {
        $('#Selected-Image').empty();
        $(this).clone().appendTo('#Selected-Image');
}); 
```

文件：

*   [http://api.jquery.com/clone/](http://api.jquery.com/clone/)

* * *

```
<div class="container">
  <div class="hello">Hello</div>
  <div class="goodbye">Goodbye</div>
</div> 
```

(...) 正如 .append() 的讨论中所示，通常当一个元素被插入到 DOM 中的某个位置时，它会从其旧位置移动。所以，给定代码：

```
$('.hello').appendTo('.goodbye'); 
```

生成的 DOM 结构将是：

```
<div class="container">
  <div class="goodbye">
    Goodbye
    <div class="hello">Hello</div>
  </div>
</div> 
```

为了防止这种情况，而是创建元素的副本，您可以编写以下内容：

```
$('.hello').clone().appendTo('.goodbye'); 
```

这将产生：

```
<div class="container">
  <div class="hello">Hello</div>
  <div class="goodbye">
    Goodbye
    <div class="hello">Hello</div>
  </div>
</div> 
```

# php - Cs-Cart v3 固定/静态菜单

> ID：12337705
> 
> 赞同：2
> 
> 时间：2012-09-09T08:44:39.200
> 
> 标签：php, smarty, 960.gs, cs-cart

我想看看如何在 CS-Cart v3 中做到这一点；我希望标题或“顶部包装”中的内容（例如“我的帐户”、“购物车内容”和菜单）保持固定。有关设计意图，请参阅这些网站。[http://studionudge.com/](http://studionudge.com/) 和[http://www.fullstopinteractive.com/](http://www.fullstopinteractive.com/)。

这些显然不是推车，但这是标题为静态或固定的基本原则。

如果它不能在 smarty/960gs 模板中完成，它可以在外部完成，为 account 和 cart 功能完成 tpl 调用。

谢谢

# java - Javamail 的 getUnreadMessagesCount() 返回全部邮件而不是未读邮件

> ID：12337706
> 
> 赞同：1
> 
> 时间：2012-09-09T08:44:42.053
> 
> 标签：java, jakarta-mail

我通过 POP3 连接到我的邮箱并获取未读邮件计数。盒子里有 10 封邮件，只有 1 封处于未读状态。但是 Folder.getUnreadMessagesCount() 返回 10 而不是 1。这是邮件提供商设置中的问题还是我做错了什么？

这就是我所做的：

```
Session session = Session.getDefaultInstance(props, new EMailAuthenticator(getLogin(), getPassword()));
Store store = session.getStore();
store.connect();

Folder inbox = store.getFolder("INBOX");
inbox.open(Folder.READ_ONLY);
inbox.getUnreadMessageCount(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:04:57.897

POP3 没有跟踪已读或未读消息的方法（请参阅[RFC1939](http://www.ietf.org/rfc/rfc1939.txt)），因此 JavaMail 会将所有消息视为未读。如果您希望能够跟踪已读和未读电子邮件，那么您需要使用 IMAP。

# php - Jquery 和 Ajax 不工作

> ID：12337709
> 
> 赞同：1
> 
> 时间：2012-09-09T08:45:09.707
> 
> 标签：php, jquery, ajax

我的页面中有 3 个按钮。它们是新按钮、删除和编辑。如果我单击新按钮将显示一个 add_new 表单，如果我单击以更改 edit_form 将出现。

我的问题是为什么在我的 edit_form 中单击提交或单击删除按钮删除数据后 new_form 没有出现。

我的代码是这样的

```
 <div  id="list_address">
        <table>
            <tr valign="top">
                <th>Name</th>
                <th>Address</th>
                <th>Action</th>
            </tr>
            <tr valign="top">
                    <td>Name 1</td>
                    <td>Adress 1</td>
                    <td>
                        <span><a href="#" onclick="javascript:show_editform(<?php echo $id_address;?>);">
                        Edit|</a></span><span><a href="#" 
                        onclick="javascript:deleteAddress(<?php echo $id_address;?>);">Delete</a></span>
                    </td>
            </tr>
            <tr>
                <td colspan="3"><span>
                    <button id="btn_add">Add New</button></span>
                </td>
            </tr>
        </table>
        <div>

        <div id="boxform">
             <div id="edit" style="display:none">
                    <form id="fm_edit" class="fm_address">
                        <input type="hidden"  value="1" name="submitted" id="submitted"/>
                        <input type="hidden"  id="id_address" name="id_address"/>
                        <fieldset>
                            <h3>Edit</h3>
                            <p>
                                <label>Address</label>
                                <input type="text" name="address1" id="address1" >
                                <sup>*</sup>
                            </p>
                            <p>
                                <label>Address (2)</label>
                                <input type="text" name="address2" id="address2" >
                            </p>
                            <p><input type="submit" value="Save"/></p>
                        </fieldset>
                    </form>
                </div>
            </div>
             <div id="add" style="display:none">
                    <form id="fm_add" class="fm_address">
                        <input type="hidden"  value="2" name="submitted" id="submitted"/>
                        <fieldset>
                            <h3>Edit</h3>
                            <p>
                                <label>Address</label>
                                <input type="text" name="address1" id="address1" >
                                <sup>*</sup>
                            </p>
                            <p>
                                <label>Address (2)</label>
                                <input type="text" name="address2" id="address2" >
                                <sup>*</sup>
                            </p>
                            <p><input type="submit" value="Save"/></p>
                        </fieldset>

                    </form>
                </div>
            </div>
        </div>

        <script>
        function getAddress(){
            $.ajax({
                type: "POST",
                url: "getAddress.php",
                success: function(response){
                $("#list_address").html(response);              
                }
            }); 
        }

        function clear_form() {
            $(".fm_address").find(':input').each(function() {
                switch(this.type) {
                    case 'password':
                    case 'select-multiple':
                    case 'select-one':
                    case 'text':
                    case 'textarea':
                    $(this).val('');
                    break;
                    case 'checkbox':
                    case 'radio':
                        this.checked = false;
                    }
            });
        }

        function show_editform(id){
            $("#add").hide();
            $("#edit").show();
            $("#id_address").val(id);
        }

        function show_insertform(){
            $("#edit").hide();
            $("#add").show();
        }

        $(document).ready(function() {  
            $("#btn_add").bind('click',function(){
                clear_form();
                show_insertform();
            });

        $("form#fm_edit").submit(function() {   
            var data = $("form#fm_edit").serialize();
                $.ajax({
                    type: "POST",
                    url: "address.php",
                    data: data,
                    success: function(response){
                        alert(response);
                        getAddress();
                    }   
                });
        return false;
        }); 

        $("form#fm_add").submit(function() {    
            var data = $("form#fm_add").serialize();
            alert(data);
            $.ajax({
                type: "POST",
                url: "address.php",
                data: data,
                success: function(response){
                    alert(response);
                    getAddress();
                }   
            });
        return false;
        }); 
    }); 

    </script> 
```

请帮助我..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:56:12.713

在尝试之后，您可以在**getAddress.php**和**address.php等两个 ajax 页面中添加以下脚本。**我相信它会起作用的。

您还有一件事要写**list_address** div。在 ajax 响应后，所有**list_address** div 数据都替换为 ajax 响应数据。

$("#list_address").html(响应);

```
 <script>
        function getAddress(){
            $.ajax({
                type: "POST",
                url: "getAddress.php",
                success: function(response){
                $("#list_address").html(response);              
                }
            }); 
        }

        function clear_form() {
            $(".fm_address").find(':input').each(function() {
                switch(this.type) {
                    case 'password':
                    case 'select-multiple':
                    case 'select-one':
                    case 'text':
                    case 'textarea':
                    $(this).val('');
                    break;
                    case 'checkbox':
                    case 'radio':
                        this.checked = false;
                    }
            });
        }

        function show_editform(id){
            $("#add").hide();
            $("#edit").show();
            $("#id_address").val(id);
        }

        function show_insertform(){
            $("#edit").hide();
            $("#add").show();
        }

        $(document).ready(function() {  
            $("#btn_add").bind('click',function(){
                clear_form();
                show_insertform();
            });

        $("form#fm_edit").submit(function() {   
            var data = $("form#fm_edit").serialize();
                $.ajax({
                    type: "POST",
                    url: "address.php",
                    data: data,
                    success: function(response){
                        alert(response);
                        getAddress();
                    }   
                });
        return false;
        }); 

        $("form#fm_add").submit(function() {    
            var data = $("form#fm_add").serialize();
            alert(data);
            $.ajax({
                type: "POST",
                url: "address.php",
                data: data,
                success: function(response){
                    alert(response);
                    getAddress();
                }   
            });
        return false;
        }); 
    }); 

    </script> 
```

# javascript - 使用 jQuery 显示内联确认

> ID：12337713
> 
> 赞同：2
> 
> 时间：2012-09-09T08:45:50.733
> 
> 标签：javascript, jquery, html, web

我正在尝试为链接创建一个“你确定”确认，类似于 reddit 帖子上的报告按钮上的那个。单击时，链接将替换为文本“您确定是/否”，其中“是”将执行操作，“否”将恢复链接。我可以用确认替换链接，但无法获得“否”链接来隐藏确认。

相关代码：

```
<span id="confirm"><a href="#>Confirm</a></span>

<script type="text/javascript">
$(function() {

   $("#confirm").click(function() {
     $(this).html('Are you sure? <a href="#">Yes</a> / <a id="unconfirm" href="#">No</a>');
   });

   $("#unconfirm").click(function() {
     $(this).parents("span").html('<a href="#">Confirm</a>');
   });

 });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T08:48:45.837

`#unconfirm`在执行事件绑定时，DOM 中不存在该元素。您需要将事件处理程序委托给 DOM 树的更上层：

```
$(document).on("click", "#unconfirm", function() {
    $(this).parents("span").html('<a href="#">Confirm</a>');
}); 
```

这使用该[`.on()`](http://api.jquery.com/on/)方法，它将事件处理程序绑定到选定元素（`document`），但仅当事件源自与第二个参数（）匹配的元素时才执行处理程序函数`#unconfirm`。

请注意，这`.on()`是在 jQuery 1.7 中添加的。如果您卡在旧版本上，则可以`.delegate()`改用。

另请注意，用其他一些祖先元素替换会更有效`document`（因为事件在触发委托的事件处理程序之前的传播距离更短）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T08:49:27.243

由于您的`#unconfirm`元素是动态生成的，因此您需要使用委托[`on()`](http://api.jquery.com/on/)来附加事件：

```
$(closestStaticParent).on('click', '#unconfirm', function() { ... }) 
```

# c# - 如何使用 C# 以编程方式安装证书

> ID：12337721
> 
> 赞同：25
> 
> 时间：2012-09-09T08:47:20.873
> 
> 标签：c#, visual-studio, certificate, x509

我学校的网页有自信任证书（必须手动安装）。我想创建一个程序，它将`certificate.cer`（来自 Visual Studio 资源）安装到本地用户的`Trusted root certificate authority`.

你知道我如何在 C# 中做到这一点吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-09T12:53:40.277

要以编程方式将证书添加到当前用户的受信任根存储，请使用[X509Store](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509store.aspx)和[X509Certificate2](http://msdn.microsoft.com/en-us/library/hh424018)类。例如：

```
string file; // Contains name of certificate file
X509Store store = new X509Store(StoreName.Root, StoreLocation.CurrentUser);
store.Open(OpenFlags.ReadWrite);
store.Add(new X509Certificate2(X509Certificate2.CreateFromCertFile(file)));
store.Close(); 
```

另请参阅“[如何使用 c# 以编程方式将证书安装到本地机器存储中？](https://stackoverflow.com/questions/566570/how-can-i-install-a-certificate-into-the-local-machine-store-programmatically-us) ”。

另一个选项是[证书管理器命令行 (certmgr.exe)](http://msdn.microsoft.com/en-us/library/e78byta0(v=vs.110).aspx)工具，具体来说：

```
certmgr /add cert.cer /s Root 
```

其中“cert.cer”是您的证书。这会将其导入当前用户的受信任根存储中。但是，certmgr.exe 是 Visual Studio 和 Windows SDK 的一部分，可能无法自由分发。

# c# - 列表框中的自动换行

> ID：12337724
> 
> 赞同：0
> 
> 时间：2012-09-09T08:47:39.320
> 
> 标签：c#, xaml, windows-8, windows-runtime

我的 ListBox 有一个 DataTemplate 并想包装一个 TextBlock，因此消息将显示在下一行...所以我编写了以下代码：

```
<ListBox x:Name="CareListBox" ItemsSource="{Binding}" Grid.Column="1" Background="Transparent">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Horizontal">
        <Image Source="pic.png" />
        <TextBlock Text="{Binding Message}" Style="{StaticResource SubheaderTextStyle}" Margin="25,0,0,0" HorizontalAlignment="Stretch" TextWrapping="Wrap"/>
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:54:02.140

我会使用具有两列的 Grid 而不是水平的 StackPanel，因为 StackPanel 没有宽度限制。

# android - Android分段下载

> ID：12337726
> 
> 赞同：2
> 
> 时间：2012-09-09T08:47:46.643
> 
> 标签：android, download, segment

我对 Android 还是很陌生，所以我对它的库和 API 还不是很熟悉。

我的第一个主要项目是支持分段下载的下载管理器。我已经可以下载文件，但是，我仍然不知道如何或从哪里开始分段下载。

我已经浏览了很多线程，但是我真的找不到任何关于Android分段下载的文章或线程。

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T08:55:10.633

该线程应该可以帮助您：[链接](https://stackoverflow.com/questions/11197158/multiple-http-connections-segmented-swarm-downloading-to-download-the-same-fil)

这个想法是在请求的标头中使用 Content-Range 关键字（您正在联系的服务器必须能够管理它）

您可以从中汲取灵感的示例代码：

```
public String readFirstChunk(String urlString, int byteCount) {
    String text = null;
    if (urlString != null) {
        org.restlet.Client restletClient = new org.restlet.Client(Protocol.HTTP);
        Request request = new Request(Method.GET, urlString);
        List<Range> ranges = Collections.singletonList(new Range(0, byteCount));
        request.setRanges(ranges);
        Response response = restletClient.handle(request);
        if (Status.SUCCESS_OK.equals(response.getStatus())) {
            text = processSuccessfulChunkRequest(response);
        } else if (Status.SUCCESS_PARTIAL_CONTENT .equals(response.getStatus())) {
            text = processSuccessfulChunkRequest(response);
        } else {
            System.err.println("FAILED "+response.getStatus());
        }
    }
    return text;
}

private String processSuccessfulChunkRequest(Response response) {
    String text = null;
    try {
        text = response.getEntity().getText();
    } catch (IOException e) {
        throw new RuntimeException("Cannot download chunk", e);
    }
    return text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T08:55:46.253

您应该研究[**Accept-Ranges**](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.5)标头以及 Android 中的[**HttpClient**](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)类。

分段下载将只涉及通过使用 HttpClient 的请求在 Accept-Ranges 标头中发送不同的值，接收部分内容，然后将所有接收到的内容合并到一个文件中。

# django - 使用 Haystack/Django/Solr 分离管理员和面向公众的搜索

> ID：12337732
> 
> 赞同：0
> 
> 时间：2012-09-09T08:48:34.827
> 
> 标签：django, search, solr, django-haystack

我的网站有可以发布或未发布的项目。未发布的项目不应该出现在前端，但应该出现在后端（我没有使用 Django 管理员）。

我有一个带有`get_queryset`返回方法的 ArticleIndex `Article.published.all()`（`published`是一个只处理已发布文章的自定义管理器）。

我应该如何实现所有项目（包括未发布）的第二个索引以在管理界面中使用？Haystack 2.0 的发布公告中提到了这一点（请参阅[主页](http://haystacksearch.org/)），但文档仅描述了使用两个独立搜索引擎的主/从设置，这似乎有点矫枉过正？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:27:28.497

通过遇到同样的问题并搜索发现了这个问题。有~~三种~~分离搜索的方法。

*   使用查询集： [https ://django-haystack.readthedocs.org/en/latest/searchqueryset_api.html](https://django-haystack.readthedocs.org/en/latest/searchqueryset_api.html)

*   为每种搜索类型创建单独的 Solr Core。

~~和一个秘密的第三个后端切换~~（完全不安全，实验性和容易出错）

# javascript - Backbone.js 视图事件未触发

> ID：12337736
> 
> 赞同：2
> 
> 时间：2012-09-09T08:49:34.437
> 
> 标签：javascript, backbone.js

我一直在学习backbone.js，最后把一些代码放在一起。一切都在[这里](http://jsfiddle.net/Vr8Q9/)。

问题正是，我认为`events`. 他们没有触发`click`.

如何让它发挥作用？我错过了任何“陷阱”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:13:03.777

视图监听从它绑定到的 DOM 元素中出现的事件。

您还没有将视图绑定到任何元素。这意味着视图的元素是一个空的`div`，实际上并没有放在任何地方。所以事件永远不会到达视图。您需要做的是将视图绑定到一个元素，该元素可以听到来自按钮的事件。

所以设置视图`el`，使其也包含按钮，瞧！

[http://jsfiddle.net/Vr8Q9/3/](http://jsfiddle.net/Vr8Q9/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T09:07:25.220

您需要通过设置`el`属性来定义视图的容器，然后它会按预期工作。

```
Backbone.View.extend({
    el: "body",
    events: {
        "click #add-contact": "addContact",
        "click #test": "alertMe"
    }, 
```

更新小提琴：http: [//jsfiddle.net/fAB28/1/](http://jsfiddle.net/fAB28/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T11:07:46.073

为了获得额外的荣誉并使事情变得更有趣:-)，您实际上不需要明确定义`el`Backbone.View 来正确委派您的事件。以此为例：

```
MyView = Backbone.View.extend({
    // The events to delegate
    events: {
        'click #test':'onClick'
    },
    initialize: function() {
        // delegateEvents() actually happens in constructor, before render()
        // At this point there is no #test
    },
    render: function() {
        // By default, el is an empty div
        this.$el.html('<button id="test">testButton</button>');
        return this;
    },
    onClick: function(event) {
        console.log('clicked');
    }
});

view = new MyView();
$('body').append(view.render().el);  // We append this view to end of body 
```

在前面的代码中，我们没有（明确地）定义一个`el`. 要记住的最重要的事情不是你有一个明确的`el`. 相反，这就是@jakee 在这里所说的：

> 视图监听从它绑定到的 DOM 元素中出现的事件。

您在视图中传入或定义的事件哈希会在视图中被侦听。无论是定义`el`的还是通用的 div，它都会侦听其中的内容，并且由于它委托事件处理程序，因此处理程序继续指向`this`视图。好的。

如果你做了这样的事情：

```
$('#test').remove();
$('body').prepend('<button id="test">Second Test</button>'); 
```

我们发现#test 现在超出了我们的视图（附加在我们正文末尾的通用 el。单击它不会……什么都没有。但最酷的是这个。

```
$('#test').remove();
$('div:last').html('<button id="test">Third Test</button>'); 
```

使用此代码，我们删除了主体顶部的#test 并将其添加回视图中。单击它，将恢复其`onClick()`功能。

# android - 使用自定义字体时，有没有办法最小化它们使用的大小？

> ID：12337743
> 
> 赞同：0
> 
> 时间：2012-09-09T08:51:06.837
> 
> 标签：android, fonts, apk, filesize

我们添加了 Arial、Arial Italic、Arial Bold 和 Georgia Italic - APK 从 ~ 500K 跃升至 > 1.5MB

有没有办法通过使用自定义字体来最小化文件大小的成本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T08:59:13.577

您始终可以使用 Font Forge 删除不使用的字符（例如，如果字体管理西里尔字符并且您不想提供相应的翻译）。

谷歌网络字体可能是另一种方式，它们通常制作 ~100ko 并且它们与 android >= 2.2 兼容（无论如何这就是你所需要的）。

# javascript - 使用jquery将输入字段转换为文本？

> ID：12337744
> 
> 赞同：9
> 
> 时间：2012-09-09T08:51:16.353
> 
> 标签：javascript, jquery

我需要转换`<input type="text" value="1" class="simpleCart_input">`为纯文本。

就像我需要它一样

```
<span class="simpleCart_input">1</span> 
```

但是怎么做？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-09T09:00:52.143

您可以使用`replaceWith`.

```
$('.simpleCart_input').replaceWith(function(){
   return '<span class='+this.className+'>'+this.value+'</span>'
}) 
```

[http://jsfiddle.net/fsVRe/](http://jsfiddle.net/fsVRe/)

或者：

```
$('.simpleCart_input').replaceWith(function(){
    return $('<span/>', {
              'class': this.className,
               text: this.value
           })
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T08:58:16.923

如果我理解正确，应该这样做：

```
var a = $('.simpleCart_input').html();
alert(a); 
```

根据您的评论，您想要这个：

```
var a = $('.simpleCart_input').val();
$('.simpleCart').text(a); 
```

（为了实现代码的目的，您需要一个带有 simpleCart 类的跨度。）

**最终建议：**

只是为了添加转换代码。这将删除输入字段并插入具有所需值的跨度。

```
$('.simpleCart_input').replaceWith(
    return '<span class='+this.className+'>'+this.value+'</span>'
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T08:59:59.477

尝试使用这个：**工作演示** [http://jsfiddle.net/gvRjn/](http://jsfiddle.net/gvRjn/)

[http://www.appelsiini.net/projects/jeditable/default.html](http://www.appelsiini.net/projects/jeditable/default.html)

希望它适合你的事业`:)`

PS - 这是使用[http://www.appelsiini.net/projects/jeditable](http://www.appelsiini.net/projects/jeditable)插件。

**代码**

```
$('.editable-element').editable({
    width: 250,
    indicator: 'Saving...'
});

​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-09T09:00:20.103

***HTML***

```
<span>
    <input type="text" class="simpleCart_input">
</span>​ 
```

***jQuery***

```
$('.simpleCart_input').blur(function() {
    var val = $.trim(this.value);
    $(this).parent().attr('class', $(this).attr('class')).html(val);
});​ 
```

***[演示](http://jsfiddle.net/JEDWv/1/)***

### 其他

```
$('.simpleCart_input').blur(function() {
    var val = $.trim(this.value);
    if( val ) 
    {
      $(this).wrap($('<span/>', {
        'class': $(this).attr('class'),
         html: val
      })).remove();
    }
});​ 
```

***[演示](http://jsfiddle.net/JEDWv/2/)***

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-09T09:00:55.300

你可以这样做：

```
$("input.simpleCart_input").replaceWith(function () {
  return '<span class="'+this.className+'">'+this.value+'</span>';
});​ 
```

***[工作演示。](http://jsfiddle.net/n8z8w/)***

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T08:53:59.393

你的意思是获取输入字段的值吗？如果是这样的话：

var val = $('.simpleCart_input').val();
警报（val）；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-09T09:02:42.753

```
var input = $('.simpleCart_input');
input.replaceWith(
    $('<span>').text(  // Uses text() to avoid breakage if the value contains HTML special characters.
        input.val()
    )
); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-09T09:03:33.783

其实很简单：

首先，您需要识别输入，因此我们将为它添加一个 id：

```
 <input id="my-input" type="text" value="Lorem ipsum" /> 
```

然后我们可以用文本替换输入，如下所示：

```
 var input = $('#my-input'),          // cache input
     value = input.attr('value'),  // read input value
     span  = $('<span></span>);    // create a span element     

 span.text(value); // Place the value inside the span     
 input.after(span); // Place the span after the input     
 input.remove(); // Remove the input since this was our mission 
```

这应该可以完成工作:)

# javascript - Firefox：根据实际内容调整 iframe 的大小

> ID：12337747
> 
> 赞同：0
> 
> 时间：2012-09-09T08:51:53.940
> 
> 标签：javascript, firefox, iframe

我有一个 iframe，我正在尝试根据它的实际内容调整它的大小（就像我没有得到任何滚动一样）。我尝试了以下方法：

> 警报（document.getElementById（iframe）.contentWindow.document.body.height）；警报（document.getElementById（iframe）.contentWindow.document.body.scrollHeight）；警报（document.getElementById（iframe）.contentWindow.document.body.offsetHeight）；

这些都不起作用。iframe 包含 iframe 的 id。最后两行在 Chrome 中有效。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:03:53.583

我认为您无法从外部文档访问 iframe 中文档的属性，但您可以通过其他方式进行操作：从该文档本身访问 iframe 中文档的属性，然后在外部调用函数文档。然后，此外部函数将进行调整大小，如下所述：[根据其中的内容高度调整 iframe 高度](https://stackoverflow.com/a/526373/246622)

# magento - Magento 备份错误

> ID：12337749
> 
> 赞同：1
> 
> 时间：2012-09-09T08:52:33.247
> 
> 标签：magento, backup, web-hosting, magento-1.6

我将我的 magento 网站从 godaddy 移到了 hostgator。我将所有文件复制到hostgator，然后将数据库从godaddy 导入到hostgator。但是，新站点几乎没有问题，例如缺少一些项目页面，例如 -`http://119.18.58.85/~homehero/index.php/shop/seating/union-jack-arm-chair (hostgator site),`来自 Godaddy 站点的相同链接 - [http://homehero.in/index.php/shop/seating/union-jack-arm-chair](http://homehero.in/index.php/shop/seating/union-jack-arm-chair)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:34:28.137

首先，你的 URL 中的 'index.php' 并不漂亮 - 在管理配置中启用 URL 重写来解决这个问题。

您可能想要重置所有 URL 并使它们达到应有的状态是清空 core_url_rewrite 表。之后您将需要重新索引，但是，它们都应该是干净的并且可以正常工作，并且不会在任何 URL 的末尾附加任何神秘的产品 ID。

您需要使用 phpmyadmin 或命令行 mysql 清除 core_url_rewrite。

希望有帮助。

# javascript - 如何在 JavaScript 中比较两个日期

> ID：12337752
> 
> 赞同：4
> 
> 时间：2012-09-09T08:52:55.653
> 
> 标签：javascript

> **可能重复：**
> [用 JavaScript 比较日期](https://stackoverflow.com/questions/492994/compare-dates-with-javascript)

我有两个日期，开始日期和结束日期。我像这样比较它们：

```
var fromDate = $("#fromDate").val();
var throughDate = $("#throughDate").val();

if (startdate >= enddate) {
    alert('start date cannot be greater then end date')
} 
```

它给出了正确的结果......唯一的问题是当我比较日期 01/01/2013 和 01/01/2014 时。

如何正确比较 JavaScript 中的日期？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T08:56:16.620

您可以使用它来进行比较：

```
if (new Date(startDate) > new Date(endDate)) 
```

使用[new Date(str)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)解析值并将其转换为 Date 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T08:54:12.327

您正在比较字符串。您需要先将它们转换为日期。您可以通过拆分字符串并构造一个[新的 Date来做到这一点](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

```
new Date(year, month, day [, hour, minute, second, millisecond]) 
```

根据您的日期格式，它看起来像

```
var parts = "01/01/2013".split("/");
var myDate = new Date(parts[2], parts[1] - 1, parts[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T09:04:50.960

```
 var fromDate = $("#fromDate").val();
      var toDate = $("#throughDate").val();

    //Detailed check for valid date ranges
        //if your date is like 09-09-2012
    var frommonthfield = fromDate.split("-")[1];
    var fromdayfield = fromDate.split("-")[0];
    var fromyearfield = fromDate.split("-")[2];

    var tomonthfield = toDate.split("-")[1];
    var todayfield = toDate.split("-")[0];
    var toyearfield = toDate.split("-")[2];

    var fromDate = new Date(fromyearfield, frommonthfield-1, fromdayfield);
    var toDate = new Date(toyearfield, tomonthfield-1, todayfield);

    if(fromDate.getTime() > today.getTime()){
        alert("from Date should be less than today")
        return;
    }
    if(toDate.getTime() > today.getTime()){
        alert("to Date should be less than today")
        return;
    }
    if(fromDate.getTime() > toDate.getTime()){
        alert("from date should be less than to date")
        return;
    } 
```

# android - 如何在 Android 中创建自定义指南针？

> ID：12337753
> 
> 赞同：1
> 
> 时间：2012-09-09T08:53:14.917
> 
> 标签：android, overlay

我有两个图像一个圆圈和一个箭头。我计算我当前的 GPS 坐标和地图上选择的坐标之间的距离。现在我需要将箭头放在圆形图像上并放在箭头计算距离上。我该如何实施？就像是

![在此处输入图像描述](../Images/8620cfc5e17f0c8a802c65d4a919e6e2.png)

编辑：如何将箭头图像放在中心并在箭头上放置文字？

```
 public class CompassOverlay extends Overlay
{  
private float angle;

public CompassOverlay(float angle)
{
    this.angle=angle;

}

  @Override
  public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
    super.draw(canvas, mapView, shadow);           

   Bitmap back =BitmapFactory.decodeResource(mapView.getResources(),R.drawable.tfm_compass_back);
   Bitmap arrowBitmap = BitmapFactory.decodeResource(mapView.getResources(),R.drawable.tfm_compass_arrow);

// Create blank bitmap of equal size for back
   Bitmap canvasBitmap = back.copy(Bitmap.Config.ARGB_8888, true);
   canvasBitmap.eraseColor(0x00000000);

   // Create canvas
    Canvas canvasBack = new Canvas(canvasBitmap);

    // Create rotation matrix
    Matrix rotateMatrix = new Matrix();
    rotateMatrix.setRotate(angle, canvasBack.getWidth()/2, canvasBack.getHeight()/2);

    canvas.drawBitmap(back, 0.0f, 0.0f, null);

   // Draw bitmap onto canvas using matrix
    canvasBack.drawBitmap(arrowBitmap, rotateMatrix, null);

    BitmapDrawable bitmapDrawable= new BitmapDrawable(canvasBitmap);
    canvas.drawBitmap(bitmapDrawable.getBitmap(), 0.0f, 0.0f, null);
    return true;
  }

} 
```

![在此处输入图像描述](../Images/f7aeead1c282ca4769c4b475f6d72639.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:23:56.207

你有一个示例应用程序。转到新建-> 项目-> Android -> Android 示例项目。那里选择 ApiDemoes。那里有一个包含完整代码的 Compass 应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T09:58:26.320

这看起来很有希望：

```
 // Create rotation matrix
  Matrix rotateMatrix = new Matrix();
  rotateMatrix.setRotate(angle, canvas.getWidth()/2, canvas.getHeight()/2);

  // Draw bitmap onto canvas using matrix
  canvas.drawBitmap(arrowBitmap, rotateMatrix, null); 
```

在这里找到：[如何在 MapView 中绘制显示行车方向的箭头？](https://stackoverflow.com/questions/4331794/how-can-i-draw-an-arrow-showing-the-driving-direction-in-mapview)

# android - 来自 XML 和来自代码差异的 TextView

> ID：12337754
> 
> 赞同：0
> 
> 时间：2012-09-09T08:53:20.877
> 
> 标签：android, android-layout, textview

当我从 XML 创建 TextView 时，里面的所有文本都是黑色的，但是当我从代码中创建它时，它是灰色的。为什么？

代码和 XML 中元素的位置是相同的：主要布局是 RelativeLayout（总是来自 XML）。

下面的所有元素在一种情况下是从 XML 创建的，在第二种情况下是从代码创建的：ScrollView -> TableLayout -> TableRow -> TextView。

在所有层次结构的这两种情况下，我都没有设置颜色/样式/外观参数。

代码：

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.o_layout);
ScrollView sv = new ScrollView(getApplicationContext());
TableLayout tl = new TableLayout(getApplicationContext());
float density = getResources().getDisplayMetrics().density;
tl.setPadding((int)(10 * density), (int)(4 * density), (int)(4 * density), 0);
for(String s: lista){
     add_row(tl, s);
}
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
params.addRule(RelativeLayout.BELOW, R.id.osobowe_search_field);
params.addRule(RelativeLayout.CENTER_HORIZONTAL);
sv.addView(tl);
layout.addView(sv, params);

private void add_row(TableLayout tl, String left_text){
    float density = getResources().getDisplayMetrics().density;

    TableRow tr = new TableRow(getApplicationContext());
    tr.setMinimumHeight((int)(30 * density));
    TableLayout.LayoutParams params = new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.bottomMargin = (int)(4 * density);

    TextView left = new TextView(getApplicationContext());
    left.setTextSize(android.util.TypedValue.COMPLEX_UNIT_DIP, 25);
    TableRow.LayoutParams left_params = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT);
    left_params.gravity = Gravity.CENTER_VERTICAL;
    left.setText(left_text);

    TextView right = new TextView(getApplicationContext());
    right.setTextSize(android.util.TypedValue.COMPLEX_UNIT_DIP, 18);
    right.setGravity(Gravity.CENTER_VERTICAL);
    TableRow.LayoutParams right_params = new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT, TableRow.LayoutParams.WRAP_CONTENT);
    right_params.leftMargin = (int)(10 * density);
    right_params.gravity = Gravity.CENTER_VERTICAL;
    //right_params.setMargins((int)(10 * density), 0, 0, 0);
    right_params.weight = 1;
    right.setText(get_desc("l", left_text));

    View line = new View(getApplicationContext());
    line.setBackgroundResource(R.drawable.line_on_bottom);
    TableLayout.LayoutParams line_params = new TableLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, (int)density);
    line_params.setMargins((int)(20 * density), 0, (int)(20 * density), 0);

    tr.addView(left, left_params);
    tr.addView(right, right_params);
    tl.addView(tr, params);
    tl.addView(line, line_params);

} 
```

XML:

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/o_details"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="10dip"
        android:paddingRight="4dip"
        android:paddingTop="4dip" >

        <TableRow
            android:id="@+id/o_row01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:minHeight="30dp"
            android:layout_marginBottom="4dip" >

            <TextView
                android:id="@+id/o_num01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:text="@string/_"
                android:textSize="25dip"
                /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T12:39:11.813

一个简单的解决方法如下 - 尝试在 onResume() 方法或 add-row 函数（上面的代码）中使用其已知 ID（根据上面的 xml）检索 TextView 并手动将颜色设置为黑色/灰色的。功能 setBackgroundColor 会有所帮助。

用法 -

```
mytextview.setBackgroundColor(getResources().getColor(R.color.darkgrey)); 
```

（如果您在资源/color.xml 中使用其十六进制值定义了颜色“darkgrey”）

# android - WebView：我做错了什么？

> ID：12337757
> 
> 赞同：0
> 
> 时间：2012-09-09T08:53:52.080
> 
> 标签：android, webview

看起来我已经非常接近我的 WebView 片段返回问题的解决方案了。这是我的活动代码：

```
package com.fragmentwebtest;

import java.util.ArrayList;

import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;
import android.view.KeyEvent;

public class TestSwipeABActivity extends FragmentActivity {

FragmentTransaction transaction;
static ViewPager mViewPager;
/** Called when the activity is first created. */
Fragment tabOneFragment = new TabOne();
Fragment tabTwoFragment = new TabTwo();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    PagerAdapter mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
    mPagerAdapter.addFragment(tabOneFragment);
    mPagerAdapter.addFragment(tabTwoFragment);

    //transaction = getSupportFragmentManager().beginTransaction();

    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mPagerAdapter);
    mViewPager.setOffscreenPageLimit(2);
    mViewPager.setCurrentItem(0);

    mViewPager.setOnPageChangeListener(
            new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    // When swiping between pages, select the
                    // corresponding tab.
                    getActionBar().setSelectedNavigationItem(position);
                }
            });

    ActionBar ab = getActionBar();
    ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    Tab tab1 = ab.newTab().setText("Tab One")
            .setTabListener(new TabListener<TabOne>(
                    this, "tabone", TabOne.class));

    Tab tab2 = ab.newTab().setText("Tab Two")
            .setTabListener(new TabListener<TabTwo>(
                    this, "tabtwo", TabTwo.class));

    ab.addTab(tab1);
    ab.addTab(tab2);
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public void onBackPressed(){
    if ( (TabOne) tabOneFragment != null )
        ( (TabOne) tabOneFragment).onBackPressed();
    else
        super.onBackPressed();
}

public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /** Constructor used each time a new tab is created.
      * @param activity  The host Activity, used to instantiate the fragment
      * @param tag  The identifier tag for the fragment
      * @param clz  The fragment's Class, used to instantiate the fragment
      */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }

    public void onTabReselected(Tab arg0,
            android.app.FragmentTransaction arg1)
    {
        // TODO Auto-generated method stub

    }

    public void onTabSelected(Tab arg0, android.app.FragmentTransaction arg1)
    {
        // TODO Auto-generated method stub
        mViewPager.setCurrentItem(arg0.getPosition());
    }

    public void onTabUnselected(Tab arg0,
            android.app.FragmentTransaction arg1)
    {
        // TODO Auto-generated method stub

    }
}

public class PagerAdapter extends FragmentPagerAdapter {

    private final ArrayList<Fragment> mFragments = new ArrayList<Fragment>();

    public PagerAdapter(FragmentManager manager) {
        super(manager);
    }

    public void addFragment(Fragment fragment) {
        mFragments.add(fragment);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mFragments.size();
    }

    @Override
    public Fragment getItem(int position) {
        return mFragments.get(position);
    }
}

} 
```

好，现在是 TabOne 片段：

```
package com.fragmentwebtest;

import android.net.Uri;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.support.v4.app.Fragment;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnKeyListener;
import android.view.ViewGroup;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class TabOne extends Fragment
{
 private WebView myWebView;
 @Override
    public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    }

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    View view = inflater.inflate(R.layout.tabone, container, false);
    myWebView = (WebView) view.findViewById(R.id.webview);
    myWebView.getSettings().setPluginsEnabled(true);
    myWebView.loadUrl("http://m.stirileprotv.ro");
    myWebView.setWebViewClient(new WebViewClient() {
    @Override public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (Uri.parse(url).getHost().equals("m.stirileprotv.ro")) {
                myWebView.loadUrl(url);
                return true;
            }
            else
            {
                return false;
            }
         }
    });
    return view;
}
public void onBackPressed() {
    if (getActivity() == null)
        return;
    if (myWebView != null && myWebView.canGoBack()) {
        myWebView.goBack();
    } else
        getActivity().finish();
}
} 
```

我不知道出了什么问题，为什么当我按下后退按钮时，WebView 不会返回。请有人帮助我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T13:00:11.043

The onKeyDown on your activity is suppressing the back key completely since you are always only returning true if the event is from the back key. So onBackPressed never gets called.

Try this instead:

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        onBackPressed();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# java - Java：使用字符扫描器搜索文件

> ID：12337762
> 
> 赞同：0
> 
> 时间：2012-09-09T08:54:31.647
> 
> 标签：java, file, search, char, user-input

我很难理解为什么这不起作用。它的目的是询问名称的第一个字母并根据匹配的字符返回结果。txt 文件设置了许多名称，例如：

*   埃迪·科克伦 1938 - 1960
*   克里夫伯顿 1938 - 1960
*   克里夫伯顿 1938 - 1960
*   詹姆斯·迪恩 1938 - 1960 1968 - 1970 1978 - 1980

目前它只是列出所有的名字和日期。谁能给我一些建议，谢谢。

```
import java.util.Scanner;
import java.io.File; 
import java.io.FileNotFoundException;

public class NameYear {

public static void main(String[] args) throws FileNotFoundException 
{

    Scanner keyboard = new Scanner(System.in);
    System.out.print("What is the first letter? ");
    String input = keyboard.next().toLowerCase();
    char firstLetter = input.charAt(0);

    File file = new File("names.txt");
    Scanner input = new Scanner(file);

    while(input.hasNext())
    {
       String firstName  = input.next(); 
       String surname  = input.next(); 
       String year = input.nextLine();  

        if(surname.charAt(0) == firstLetter);
         { 
           System.out.println(firstName + " " + surname + year);
         }
     }
 input.close();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:11:03.520

我认为你的问题是这一行：

```
if(surname.charAt(0) == firstLetter); 
```

去掉最后的分号。

这是删除括号后代码的样子。

```
if(surname.charAt(0) == firstLetter);
System.out.println(firstName + " " + surname + year); 
```

如您所见，这些只是一个接一个的陈述。

# objective-c - 使用类别覆盖 NSURL 方法

> ID：12337763
> 
> 赞同：2
> 
> 时间：2012-09-09T08:54:49.237
> 
> 标签：objective-c, ios, nsurl, objective-c-category

分类问题：

我想在 NSURL 上放置一个类别，除其他外，它会覆盖查询方法，以便能够从不符合 RFC 1808 的 URL 提供查询字符串。在我的类别中做这样的事情是否合法：

```
- (NSString *)query //real NSURL method
{
     if (stringIsRFC1808) //want to get the default implementation
          return [super query];
     else 
          return somethingElse; //want to get my custom implementation
} 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T09:06:12.747

代码原样无效，因为您正在使用`[super query]`- 这并没有完全按照您的预期进行。类别不是超类。这里`[super query]`将尝试调用`- [NSObject query]`- BOOM 一个无法识别的选择器错误。如果您使用类别来扩展一个类，您将无法调用原始方法 - 如果您不需要此功能，那么使用类别很好，但是，如果您确实需要它，您应该考虑子类化,（Foundation 对象的组合更好！）或使用 Objective-C 运行时执行[方法调配](http://funwithobjc.tumblr.com/post/1482839994/method-swizzling)——这样您就可以访问该方法的原始实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T09:01:47.993

您不应该使用类别来覆盖现有方法。类别用于**增强**类行为而不对其进行子类化。（尽管我认为您可以覆盖它，但 Apple 强烈反对）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T09:06:54.040

添加您自己的方法，以免与苹果 sdk 冲突。考虑您公司中使用此类别的某人：他所做的第一件事是查看开发人员库以了解此方法的作用。

导入您的类别后，它不再做它应该做的事情。苹果不推荐这个！

# objective-c - Objective-C，定期在后台运行 NSTask

> ID：12337765
> 
> 赞同：3
> 
> 时间：2012-09-09T08:55:03.813
> 
> 标签：objective-c, multithreading, nstask

我已经看到了一些关于如何保持 NSTask 在后台运行的好信息，尽管这并不完全是我想要做的。我想做的是在后台***定期***运行一个 NSTask （比如每 30 秒），然后杀死它；这可能是我想做的一个例子：

```
NSTask *theTask = [ [ NSTask alloc ] init ];
NSPipe *taskPipe = [ [ NSPipe alloc ] init ];

[ theTask setStandardError:taskPipe ];
[ theTask setStandardOutput:taskPipe ];
[ theTask setLaunchPath:@"/bin/ls" ];
[ theTask setArguments:[ NSArray arrayWithObject:@"-l" ] ];
[ theTask launch ];

// Wait 30 seconds, then repeat the task 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:08:20.700

也许您可以简单地将线程置于睡眠状态并在 do 循环中等待 30 秒：

```
do {

[ theTask launch ]; //Launch the Task
sleep(30);          //Sleep/wait 30 seconds 

} while (someCondition); 
```

否则，您可以使用[NSTimer](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)：

```
NSTimer *t = [NSTimer scheduledTimerWithTimeInterval: 30.0
                      target: self
                      selector:@selector(onTick:)
                      userInfo: nil repeats:YES];

- (void)onTick:(NSTimer *)timer {
    //In this method that will be get called each 30 seconds, 
    //you have to put the action that you want to perform ...
    [ theTask launch ];
} 
```

# bash - 大括号扩展和读取线

> ID：12337770
> 
> 赞同：4
> 
> 时间：2012-09-09T08:55:37.777
> 
> 标签：bash, readline

如果我有以下情况：

```
a=xyz
echo $a 
```

我可以在之后执行 readline 命令 CMe`$a`并得到：

```
echo xyz 
```

在命令执行之前。

但是，如果我输入：

```
echo a{x,y,z}b 
```

然后发出 readline 命令 CMe，我仍然得到：

```
echo a{x,y,z}b 
```

不像我预期的那样：

```
echo axb ayb azb 
```

是否有用于大括号扩展的 readline 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:22:27.010

从 bash 4.2 开始，无法对命令行输入执行大括号扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T08:58:59.777

bash 不支持它，您可以使用子外壳解决它：

```
echo `echo a{x,y,z}b` 
```

顺便说一下，zsh 支持大括号扩展。

# android - 在android中是否使用服务

> ID：12337784
> 
> 赞同：0
> 
> 时间：2012-09-09T08:57:09.453
> 
> 标签：android, service, notifications

在我的应用程序中，我希望用户根据时间收到通知。因此，它必须检查所有时间当前日期和时间，并为即将发生的事件发出通知。

我找到了这样的教程： [教程 1](http://mobiforge.com/developing/story/displaying-status-bar-notifications-android)

但是所有这些都是在按下按钮并设置诸如警报之类的东西后触发的。

但我希望我的应用程序能够一直进行“检查”。那么我必须使用服务还是有其他方法？在此之前我从未使用过服务，这就是为什么我不确定这是否是我需要的。

编辑：我想知道是否使用警报。在这种情况下，我的问题是我没有受到用户的任何干扰。我的意思是他不能按下按钮来设置闹钟，但应用程序必须像这样工作：第一个闹钟在：10 月 9 日星期日 11:00 下一个闹钟在：同一天 18:00 下一个：9 月 10 日 07:00 等等。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T08:59:56.257

如果您不需要在应用程序未运行时检查通知，您可以`Handler.postDelayed`在一段时间后使用让您的代码运行。

如果您想在应用程序未运行的情况下在后台查看通知，则需要使用警报。检查[`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)出来。

# javascript - 如何使用 jQuery 禁用多个链接？

> ID：12337785
> 
> 赞同：0
> 
> 时间：2012-09-09T08:57:13.610
> 
> 标签：javascript, jquery, css

我有以下 HTML：

```
<a title="Login" data-href="/MyAccount/Access/Login" 
   data-title="Admin" data-entity="n/a" 
   id="loginLink" class="nav-button dialogLink"><b>Login</b></a>

<a title="Register" 
   data-href="/MyAccount/Access/Register" 
   data-title="Admin" data-entity="n/a"
   id="registerLink" class="nav-button dialogLink"><b>Register</b></a> 
```

当用户单击#loginLink 或#registerLink 时，我想禁用链接并调用对话脚本。我创建了以下函数：

```
$("#loginLink, #registerLink")
    .click(function () {
        $('#loginLink').prop('disabled', true);
        $('#registerLink').prop('disabled', true);
        dialog(this);
    }); 
```

它正确调用对话框，但不会禁用链接，如果我多次单击按钮，它会调用多个对话框。有什么我做错了吗？我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:00:14.423

您必须使用 jQuery`on()`和`off()`方法来绑定/取消绑定事件。设置`disabled`属性对链接没有影响，点击事件仍然会被触发。

在这里你可以找到描述和演示： [http ://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T09:13:24.290

如果您想随时绑定和取消绑定事件，请将代码存储在函数中，然后您可以使用命名空间事件将事件与该函数相关联。

```
function dlog(e) {
  e.preventDefault();
  dialog(this);
}

var $els = $("#loginLink, #registerLink");

$els.on('click.dlog', function(e){ dlog(e) }); // bind
$els.off('.dlog'); // unbind 
```

**编辑：** 另一个选项是使用`one()`它只附加一次事件，然后您可以在对话框关闭时再次附加事件。

```
$els
  .one(function(e) { dlog(e) })
  .dialog({
     beforeClose: function() { 
       $els.one(function(e) { dlog(e) });
     }
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T08:59:48.840

你需要这样做

```
$("#loginLink, #registerLink").click(function(e) {
    e.preventDefault();
    dialog(this);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T09:06:33.450

```
$("#loginLink, #registerLink").on("click", function () {
 dialog(this);
 return false;
}); 
```

`return false`在 jQuery 中将执行两者，`e.preventDefault`而`e.stopPropagation`第二个将阻止事件冒泡，这就是你所追求的。

附加信息： [event.preventDefault() 与 return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

# itext - 文档预处理库

> ID：12337789
> 
> 赞同：0
> 
> 时间：2012-09-09T08:58:16.223
> 
> 标签：itext, apache-poi, java

我正在寻找用于文档预处理的库（和指南）。我的意思是，例如生成 PDF、MS Office (Excel/Word)、Open Office 格式文件。

我已经看到特别流行的 Apache POI 和 iText。您是否知道任何描述文档预处理库的书（对于 iText，我找到了“iText in Action”）？

我也想比较图书馆。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:04:03.327

对于文件格式本身，许多细节都可以在线获得。没有我知道的书。但这里有一些对一些办公文档文件格式的在线参考。

对于 Microsoft Office 文档（Word、Excel、PowerPoint），格式发布在 [http://www.microsoft.com/openspecifications/en/us/programs/osp/office-file-formats/default.aspx](http://www.microsoft.com/openspecifications/en/us/programs/osp/office-file-formats/default.aspx) 或 [http:// msdn.microsoft.com/en-us/library/cc313105%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/cc313105%28v=office.12%29.aspx)

Microsoft 站点包含一些关于如何解析 Office 类型文件的示例，这些示例可能对您有用。

对于 Open Office，您可以查看 [http://www.openoffice.org/xml/general.html](http://www.openoffice.org/xml/general.html) 或 [https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=office](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=office)

但以上内容更像是参考手册，而不是让您轻松解析这些文档的教程或库。

# android - 在andengine中的某个位置分离一个精灵

> ID：12337791
> 
> 赞同：0
> 
> 时间：2012-09-09T08:58:21.150
> 
> 标签：android, andengine, game-engine

我正在使用 AndEngine 开发游戏。在那我想在动作发生时分离动态附加到场景中的精灵。如何解决？..假设你有精灵的 X 和 Y 坐标。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:21:22.287

使用 Sprite.detachSelf() 方法从场景中分离精灵。

# java - 在其字段中使用逗号读取 csv 文件的问题

> ID：12337795
> 
> 赞同：1
> 
> 时间：2012-09-09T08:59:04.227
> 
> 标签：java, csv

在读取字段中带有逗号的 csv 文件时遇到问题。当读取 csv 并且将此数据传递到表中时，它会产生双引号，引号会重新排列不同列中值的位置。我用了“|” 将表格表示为视图，但用逗号分隔。

当它用excel打开时

```
 LD            |LA| L|       T            |A

 Car Park Store,|  |4a|South Bank Road     | 
```

当它用代码打开时

```
 LD            |LA| L|       T            |A

"Car Park Store |" |  |       4a           |South Bank Road 
```

这个想法是让它看起来像它在 excel 中的样子。

```
 public void readFromFile(){
   List<String> output = new ArrayList<String>();
  try{
    BufferedReader bufferedReader = new BufferedReader(new FileReader(filename));
    String line = "";

    while ((line = bufferedReader.readLine()) != null){
     output.add(line);
    }

    bufferedReader.close();

  } catch(FileNotFoundException fne){
    csvReaderErrorMessage +=  "File '" + filename + "' cannot be found.";

  }catch(IOException ioe){
    csvReaderErrorMessage +=  "Problem reading file: '" + filename+"'";
  }

  csvDataModel.setData(output);

 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T09:15:02.250

您提供的代码根本没有真正*解析*文件。它将它分成几行，但仅此而已。

您应该将这些行解析为值 - 幸运的是，您无需编写太多代码即可自己完成此操作。JavaCSV 、[OpenCSV](http://opencsv.sourceforge.net/)和[Super CSV等](http://supercsv.sourceforge.net)[库](http://sourceforge.net/projects/javacsv/)让这一切变得简单。

因此，在解析之后，您将拥有一组行，每行都是一组值。您可能希望创建一个类来处理每一行，以便您可以更干净地处理数据。你应该能够在你的 Swing UI 中很好地格式化它而不显示像“|”这样的东西 值之间。

尽可能以适当的形式处理数据是很重要的——所以当你读取一个文件时，尽可能早地完成所有的解析工作（当然，除非你有充分的理由不这样做）——剩下的就是*这样*你的代码可以更干净。您的 UI 代码根本不应该关心您碰巧从 CSV 文件加载数据。

# database - 索引顺序（升序还是降序）重要吗？

> ID：12337797
> 
> 赞同：3
> 
> 时间：2012-09-09T08:59:23.710
> 
> 标签：database, indexing

有人说对于复合索引，然后排序很重要。有人说订购无关紧要。

哪一个是对的？为什么？

我的意思是，如果我查看电话，我根本看不出电话是如何排序的。复合索引将如何变化？

**注意：**我的意思是*降序或升序*。我很清楚列的顺序很重要。

请注意，我们有 2 个高分成员的答案。有人说，即使对于复合索引，降序或升序也无关紧要。另一个说这很重要。所以是的，这里有争议。我（或我们）在哪里可以挖掘更多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T09:12:08.230

在一般情况下订购确实很重要。问题是：您指的是什么顺序，这对您的情况有影响吗？

1.  下降与上升。仅在您实际上希望以特殊顺序对结果进行排序的非常特殊的情况下才有意义。假设您希望您的结果如下所示：

    a 升序，b 降序，c 升序

但你的指数是

```
a asc, b asc, c asc 
```

数据库必须进行额外的排序。当您想根据某种顺序访问前 n 个元素时，这同样适用。这对于组合索引更为重要，因为单列方向的改变会导致完全不同的总排序，而单列索引中单列的排序只是颠倒了排序。

1.  列的排序，所以

    甲，乙，丙

对比

```
b, a, c 
```

如果您过滤所有列并没有太大区别，但如果您只过滤 a，第一个索引将比第二个索引更有用。

每当您有两个选项可以解决编程语言中的问题并且有人告诉您它们没有任何作用时，请询问为什么存在这两个选项。如果“某人”不能回答这个问题，我不会相信他关于两者等同的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T09:02:22.940

我认为混淆是基于“排序”的两种不同含义。

1.  索引项是按升序还是降序排序。
2.  在复合索引中，首先使用哪一列对项目进行排序

正如您提到的，第一个无关紧要。不过，第二个确实很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T09:01:44.483

假设您有两个字段，名称和姓氏。(name, surname) 上的复合索引与 (surname, name) 上的复合索引不同。搜索将从第一列开始，然后是第二列。因此，如果您使用 surname 进行搜索，则 (name, surname) 上的复合索引将比 (surname, name) 上的复合索引慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-26T11:14:45.523

例如，在字段 a 上为集合记录创建升序索引：

```
db.records.createIndex( { a: 1 } ) 
```

该索引可以支持升序排序`a`，也可以`a`通过逆序遍历索引来支持降序排序：

```
db.records.find().sort( { a: 1 } )
db.records.find().sort( { a: -1 } ) 
```

> 您对手机的看法是正确的，因为默认情况下搜索结果是按[https://docs.mongodb.com/manual/reference/method/cursor.sort/#return-in-natural-order](https://docs.mongodb.com/manual/reference/method/cursor.sort/#return-in-natural-order)`$natural`排序的

对于复合索引，排序很重要。例如，索引键模式`{ a: 1, b: 1 }` *可以*支持排序 on`{ a: 1, b: 1 }`但*不*支持on `{ b: 1, a: 1 }`。

对于使用复合索引进行排序的查询，cursor.sort() 文档中所有键的指定排序方向必须与索引键模式匹配或与索引键模式的逆向匹配。例如，索引键模式`{ a: 1, b: -1 }` *可以*支持排序 on `{ a: 1, b: -1 }`and`{ a: -1, b: 1 }`但*不*支持on `{ a: -1, b: -1 }`or `{a: 1, b: 1}`。

来源：[https ://docs.mongodb.com/manual/tutorial/sort-results-with-indexes/](https://docs.mongodb.com/manual/tutorial/sort-results-with-indexes/)

# php - 如何使用单选按钮设置 cookie 值？

> ID：12337805
> 
> 赞同：0
> 
> 时间：2012-09-09T09:00:11.153
> 
> 标签：php, javascript

用户单击单选按钮时如何设置cookie值？

### 设置.php

```
 <p><strong>Please select your shipping time (optional)</strong></p>

   <div id="first">
     <input type="radio" value="9am-11am" name="shipping_time"  />9am-11am<br />
   </div>

   <div id="second">
     <input type="radio" value="11am-1pm" name="shipping_time"/>11am-1pm<br />
   </div>

   <div id="third">
    <input type="radio" value="1pm-3pm" name="shipping_time"/>1pm-3pm<br />
   </div>

   <div id="four">
    <input type="radio" value="3pm-5pm" name="shipping_time"/>3pm-5pm<br />
   </div> 
```

### 视图.php

```
<p><strong>Shipping time</strong> : <?php echo $_SESSION['time_shiping']; ?></p> 
```

在我发布之前，我也尝试了下面的代码，但这并不能解决我的问题。

```
<script>
        $('#first input[type=radio]').click(function() { 
        <?php
            $_SESSION['time_shiping'] = '9am-11am';
        ?>
        });
        $('#second input[type=radio]').click(function() { 
        <?php
            $_SESSION['time_shiping'] = '11am-1pm';
        ?>
        });

        $('#third input[type=radio]').click(function() { 
        <?php
            $_SESSION['time_shiping'] = '1pm-3pm';
        ?>
        });

        $('#four input[type=radio]').click(function() { 
        <?php
            $_SESSION['time_shiping'] = '3pm-5pm';
        ?>
        });
    </script> 
```

有人可以告诉我如何使用 javascript 或 php 设置带有 onlick 功能的 cookie。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:07:41.940

如果要设置cookie，可以使用以下函数

```
function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = encodeURI(value) + ((exdays == null) ? "" : "; expires=" + exdate.toUTCString() + "; path=/");
    document.cookie = c_name + "=" + c_value;
}

setCookie('your_key', 'your_value', 'expire_time'); 
```

您可以使用以下代码在 php 端读取此值

```
$_COOKIE['key_on_js_side'] 
```

根据您的代码，您可以参考以下示例；

```
$('#first input[type=radio]').click(function() { 
     setCookie('time_shipping', '9-11', 3600);
}); 
```

希望能帮助到你

# c++ - 本地网络的在线 c/c++ 编译器

> ID：12337813
> 
> 赞同：1
> 
> 时间：2012-09-09T09:00:59.297
> 
> 标签：c++, compiler-construction

我想在远程服务器上编译我的 C/C++ 程序。编译器位于一台 PC（服务器）上，另一台客户端 PC 通过 LAN/WLAN 连接到服务器。客户端编写程序并将其发送到服务器。服务器编译程序并将输出/错误发送到客户端 PC。我怎么能这样做？如何以及在哪里开始这个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:42:59.550

试试[DistCC](http://code.google.com/p/distcc)，一个分布式 C/C++ 编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T09:30:09.567

詹金斯有时真的很慢并且有很多内存泄漏。如果您的服务器是一台慢速机器，那么我建议您使用 Buildbot 或编写您自己的脚本，该脚本将在新提交到存储库后触发。有python.git。

[http://trac.buildbot.net/](http://trac.buildbot.net/)

[https://gitorious.org/git-python](https://gitorious.org/git-python)

使用 ubuntu 它只是：

```
sudo apt-get install gitpython 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T09:17:43.530

上次一个非常流行的解决方案是 Jenkins。 [http://jenkins-ci.org/](http://jenkins-ci.org/)。

Jenkins 可以由您的存储库（如 SVN、GIT 等）触发。像看门狗一样 - 当你发现存储库中有新的提交时做一些事情。例如，当您提交到 GIT 存储库时，它将自动在服务器上运行脚本。

该脚本可以返回一个值。如果它会返回（例如）假，那么你的构建被破坏并且红球将出现在 jenkins HTTP 网站上并且用户将收到电子邮件。这是它的外观：

[http://www.findbestopensource.com/AppImages/Article/jenkins-img1.jpg](http://www.findbestopensource.com/AppImages/Article/jenkins-img1.jpg)

詹金斯可以点头。菜单中有控制台输出、责备、差异和很多免费插件。即使对于与 IT 无关的人，安装也非常容易。

因此，您需要将 jenkins 与本地计算机连接的唯一一点是存储库，您现在肯定正在使用它；）

# clojure - 变量 *read-eval* 有什么作用？

> ID：12337815
> 
> 赞同：9
> 
> 时间：2012-09-09T09:01:06.443
> 
> 标签：clojure

我从一个远程处理函数（clojurescriptone）中发现了这段代码，其中正在读取从浏览器发回的数据。我的问题是将 read-eval 设置为 false 的意义是什么？

> （绑定 [ *read-eval* false]（读取字符串数据））

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-09T09:17:15.213

这是一种安全措施，因此浏览器无法发送要在服务器中执行的代码。例如，如果客户端/浏览器发送`"#=(eval (System/exit 1))"`并且 *read-eval* 为真，则服务器进程将退出，这可能是您不想要的。

查看行为的差异：

```
(binding [*read-eval* false] (read-string "#=(eval (System/exit 1))"))
(binding [*read-eval* true] (read-string "#=(eval (System/exit 1))")) 
```

[另请参阅*read-eval*](http://clojuredocs.org/clojure_core/clojure.core/%2aread-eval%2a)上的文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-07T15:58:08.907

的主要目的`*read-eval*`是允许读者在阅读时评估表达式，通常是针对没有文字符号的东西。如果`*read-eval*`为真（默认值），`read`并将`read-string`计算 #= 后面的表达式。您可以看到当`*print-dup*`绑定为 true 时如何使用该功能——这意味着您希望以保留其精确类型的方式打印值，在这种情况下，您将看到一些使用 #= 表示法打印的值。默认为`*print-dup*`false —— 对于大多数情况，标准的 Clojure 表示法是可以的。例如，我们通常不关心整数和长整数之间的区别。

该`*read-eval*`功能对于加载代码很有用，但在与不受信任的输入一起使用时会产生安全风险。Clojure 1.5 之前的通常建议是`*read-eval*`在处理用户输入时绑定 false。但是，在读取 Java 对象时仍然存在一些问题，这些问题可能会导致问题。这在 Clojure 1.5 中已修复。更重要的是，Clojure 1.5 引入了，`clojure.edn/read`其中`clojure.edn/read-string`不支持任何`*read-eval*`特性。它们可以安全地读取代表 EDN 格式定义的常用 Clojure 值的用户输入。有关详细信息，请参阅[http://edn-format.org](http://edn-format.org)。

# php - Route::get()->uri() 记住当前控制器

> ID：12337818
> 
> 赞同：0
> 
> 时间：2012-09-09T09:02:03.423
> 
> 标签：php, kohana

如果我点击我的链接，我会被重定向到 /podstrony/podstrony/xyz。

我尝试通过以下方式与方法“Route::get()->uri()”建立链接：

```
 $url = Route::get('podstrony')->uri(array(
        'title' => 'xyz',
    )); 
```

我设置如下

```
 $view->body = __('Example text').'<a href="'.$url.'">click</a>';

    $this->response->body($view); 
```

bootstrap.php 中的路由看起来像

```
Route::set('podstrony', 'podstrony(/<title>)')
    ->defaults(array(
        'controller' => 'podstrony',
        'action'     => 'index',
    ));

Route::set('default', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
        'controller' => 'welcome',
        'action'     => 'index',
    )); 
```

并且基本 url 仅设置为“/”（我在根目录中有 kohana）。

如何摆脱重复的控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T11:48:41.257

我为这个问题找到了一些解决方案。我们可以将“Route::get(controller)->uri(params)”替换为“Route::url(controller, params)”。但是我想知道如何做一个相对链接网址。

# html - div上的CSS3滚动条样式

> ID：12337821
> 
> 赞同：54
> 
> 时间：2012-09-09T09:02:49.377
> 
> 标签：html, css, scrollbar

如何使用 CSS3 设置 webkit 滚动条的样式？

我的意思是这些属性：

```
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
} 
```

这是我的 div 标签：

```
<div class="scroll"></div> 
```

这是我当前的 CSS：

```
.scroll {
    width: 200px; height: 400px;
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-09-09T09:04:25.763

设置`overflow: hidden`隐藏滚动条。设置`overflow: scroll`以确保滚动条一直出现。

要使用该`::webkit-scrollbar`属性，只需`.scroll`在调用它之前定位即可。

```
.scroll {
   width: 200px;
   height: 400px;
    background: red;
   overflow: scroll;
}
.scroll::-webkit-scrollbar {
    width: 12px;
}

.scroll::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

.scroll::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
}
​ 
```

看这个活生生的[例子](http://jsfiddle.net/KMzgm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-14T04:48:35.240

css3 滚动条的问题在于，只能对内容进行交互。我们无法与触摸设备上的滚动条进行交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T09:04:38.580

```
.scroll {
   width: 200px; height: 400px;
   overflow: auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T09:08:02.107

你在设置`overflow: hidden`。这将隐藏任何对 来说太大的东西，`<div>`这意味着不会显示滚动条。给你`<div>`一个明确的宽度和/或高度，然后更改`overflow`为`auto`：

```
.scroll {
   width: 200px;
   height: 400px;
   overflow: scroll;
} 
```

如果您只想在内容长于 时显示滚动条`<div>`，请更改`overflow`为`overflow: auto`。您也可以使用`overflow-y`或仅显示一个滚动条`overflow-x`。

# video - 中断 10h

> ID：12337827
> 
> 赞同：2
> 
> 时间：2012-09-09T09:04:09.563
> 
> 标签：video, assembly, interrupt

中断10h可以使用的服务太多了，我想问一下我对其中两个感到困惑的问题

首先是，

```
 AH = 06H SCROLL UP WINDOW
 AH = 07H SCROLL DOWN WINDOW 
```

在DOS中编码时向上滚动/向下滚动是什么意思？

看看这个，

```
; AL = NUMBER OF LINES BY WHICH TO SCROLL UP (00H = CLEAR ENTIRE WINDOW)
; BH = ATTRIBUTE USED TO WRITE BLANK LINES AT BOTTOM OF WINDOW
; CH,CL = ROW,COLUMN OF WINDOW'S UPPER LEFT CORNER
; DH,DL = ROW,COLUMN OF WINDOW'S LOWER RIGHT CORNER 
```

这里说 BH 用于在窗口底部写空行，但是当我使用此代码时，

```
MOV AH, 06H
MOV AL, 00H
MOV CX, 00H
MOV DH, 25
MOV DL, 80
INT 10H 
```

并且没有定义 BH 的值，我的结果不会显示在屏幕上，一旦我声明了 Bh 的值，它实际上是在控制 DOS 屏幕的前景和背景颜色。那么为什么它说 BH 用于在窗口底部写空行？

第二个是，

```
;AH = 02 USED To SET CURSOR POSITION

    ;BH = PAGE NUMBER
    ;CH,CL = ROW,COLUMN OF WINDOW'S UPPER LEFT CORNER
    ;DH,DL = ROW,COLUMN OF WINDOW'S LOWER RIGHT CORNER 
```

这里 BH 等于页码 :confused: ? 正常 DOS 屏幕中的页码是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T10:31:46.867

我现在无法使用工具进行测试——事实上，你在 DOS 上的实模式汇编中到底在做什么？- 但从记忆中，这些应该是你的答案：

> 在DOS中编码时向上滚动/向下滚动是什么意思？

“向上滚动”将是“将屏幕上的所有内容向上移动”。AL 中的值由多少决定。例如，当 AL=2 时，“向上滚动”会将屏幕上的所有文本向上移动两行。

“向下滚动”会将其移向另一个方向。

您可以通过适当地设置 CX 和 DX 来移动屏幕的任意部分/窗口。例如，由于屏幕大概有 80x25 个字符，当 CH=1、CL=1、DH=23、DL=78 时，将移动的部分将是整个屏幕，除了每个边缘的一个字符的边框。

作为一种特殊情况，AL=0 将导致整个窗口被清除。

* * *

> 为什么它说 BH 用于在窗口底部写空行？

它说 BH 是编写空行时使用的*属性。*在文本模式下，偶数地址保存要显示的字符，而奇数地址保存用于显示的属性。BH 将为此调用写入的每个新字符提供属性。

属性主要是角色的前景色和背景色。通过设置背景颜色和清除屏幕，可以有效地用一种颜色填充屏幕。

* * *

我想澄清一点关于硬件寄存器的问题。你说

> 但是当我使用这段代码时，没有定义 BH 的值

请注意，BH 总是有价值的！您只是偶然使用了周围的那个。请将 BH 设置为您需要的任何值。例如 0x07 表示黑色上的普通白色。

* * *

> 正常 DOS 屏幕中的页码是什么意思？

它类似于现代图形编程中的多个屏幕缓冲区（前缓冲区、后缓冲区）。您可以通过调用`int 10h`AH=05 来切换页面。请参阅[Ralf Brown 的中断列表](http://www.ctyme.com/intr/rb-0095.htm)。

# facebook - Facebook 更新状态并标记打开图形位置

> ID：12337828
> 
> 赞同：1
> 
> 时间：2012-09-09T09:04:11.963
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我正在尝试更新 Facebook 状态并使用开放图形位置/位置对其进行标记

当我给**place=108424279189115** （纽约的 FB id）时，它工作正常

curl -X POST -F 'access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' -F 'message=Enjoying Cuilsrl2' [https://graph.facebook.com/me/feed](https://graph.facebook.com/me/feed)？**地方=108424279189115** -k

但是当我给**place=http://www.my-domain.com/f-jospas**（打开图形位置）时它失败了

```
Meta Tag:   <meta property="fb:app_id" content="my-id" />
Meta Tag:   <meta property="og:type" content="my-name-space:restaurant" />
Meta Tag:   <meta property="og:url" content="http://www.my-domain.com/f-jospas" />
Meta Tag:   <meta property="og:title" content="my title" />
Meta Tag:   <meta property="og:image" content="http://my-domain.com/thmb_nail?img_id=ahFzfmthbGx1bWFzdGVyLWhyZHIUCxIIQnVzaW5lc3MiBmpvc3Bhcww&amp;cnt=3" />
Meta Tag:   <meta property="place:location:latitude" content="28.5747994643" />
Meta Tag:   <meta property="place:location:longitude" content="77.3710309386" /> 
```

curl -X POST -F 'access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' -F 'message=Enjoying Curl2' [https://graph.facebook.com/me/feed](https://graph.facebook.com/me/feed)？**地点=http://www.my-domain.com/f-jospas** -k

**{"error":{"message":"发生未知错误。","type":"OAuthException","code":1}}**

为什么我不能用 opengraph place 标记 FB 状态更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:20:46.983

打开图形位置可用作打开图形操作的位置标签。它们目前不能用于标记状态更新。

# web - 需要 Spotify Web API 的帮助

> ID：12337830
> 
> 赞同：0
> 
> 时间：2012-09-09T09:04:13.500
> 
> 标签：web, spotify

所以我想知道是否有可能获得顶级播放列表，然后是用户播放列表等。使用 spotify web api 还是只可以使用 libspotify？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:53:10.323

Web API 目前根本没有播放列表功能。

# java - 使用 tth DefaultHTTPClient 时捕获 404 和 500 错误

> ID：12337834
> 
> 赞同：3
> 
> 时间：2012-09-09T09:04:46.540
> 
> 标签：java, android

我正在使用`DefaultHTTPClient`Android 中的来获取页面。我想捕获服务器返回的 500 和 404 错误，但我得到的只是`java.io.IOException`. 我怎样才能专门捕获这两个错误？

这是我的代码：

```
public String doGet(String strUrl, List<NameValuePair> lstParams) throws Exception {

    Integer intTry = 0;

    while (intTry < 3) {

        intTry += 1;

        try {

            String strResponse = null;
            HttpGet htpGet = new HttpGet(strUrl);
            DefaultHttpClient dhcClient = new DefaultHttpClient();
            dhcClient.addResponseInterceptor(new MakeCacheable(), 0);
            HttpResponse resResponse = dhcClient.execute(htpGet);
            strResponse = EntityUtils.toString(resResponse.getEntity());
            return strResponse;

        } catch (Exception e) {

            if (intTry < 3) {
                Log.v("generics.Indexer", String.format("Attempt #%d", intTry));
            } else {                
                throw e;                    
            }

        }

    }

    return null;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T09:13:05.023

你需要得到`statusCode`

```
HttpResponse resResponse = dhcClient.execute(htpGet);
StatusLine statusLine = resResponse.getStatusLine();
int statusCode = statusLine.getStatusCode();
if (statusCode == HttpURLConnection.HTTP_OK) {
    // Here status code is 200 and you can get normal response
} else {
    // Here status code may be equal to 404, 500 or any other error
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T09:25:14.747

您可以使用状态码比较，如下所示：

```
StatusLine statusLine = resResponse.getStatusLine();
int statusCode = statusLine.getStatusCode();
if (statusCode >= 400 && statusCode < 600) {
    // some handling for 4xx and 5xx errors
} else {
    // when not 4xx or 5xx errors
} 
```

但重要的是你需要消耗HTTPEntity，否则你的连接不会释放回连接池，这可能导致连接池耗尽。您已经使用 执行此操作`toString(entity)`，但如果您不想消耗资源来阅读不会使用的内容，您可以使用以下说明执行此操作：

```
EntityUtils.consumeQuietly(resResponse.getEntity()) 
```

您可以在[此处](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/util/EntityUtils.html#consumeQuietly%28org.apache.http.HttpEntity%29)找到文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T09:12:37.670

我用

```
if (response.getStatusLine().toString().compareTo(getString(R.string.api_status_ok)) == 0) 
```

检查响应代码。一切顺利时应该是 HTTP/1.1 200 OK。您可以轻松地创建一个开关来管理不同的案例。

# c - 在 C 中移动数组中的元素——基于指针

> ID：12337836
> 
> 赞同：1
> 
> 时间：2012-09-09T09:04:54.960
> 
> 标签：c

所以我现在正在尝试学习 C，我有两个功能：一个移动数组中的元素：

```
void shift(int a[], int n) {
   int i;
   for(i = 0; i != n-1; i++){
      a[i] = a[i+1];
   }
} 
```

和相同函数的一个版本，除了基​​于指针的：

```
void pointer_shift(int *a[], int n) {
   int i;
   for (i = 0; i != n - 1; i++) {
      *a[i] = *a[i + 1];
   }
} 
```

我不知道基于指针的版本是否正确，但我想我最重要的问题是我应该如何实际测试两者/任何一个都可以工作。除了这两个函数的定义，我还有：

```
#include <stdio.h>

void shift(int a[], int n);
void pointer_shift(int *a[], int n);

int main(void) {
    printf("Begin execution of testing Problem 1\n");
    int a1[] = {100, 101, 102};
    int i;
    for(i = 0; i<3;i++)
        printf("Before Shift: " "%d\n", a1[i]);
    //shift(a1, 3);
    pointer_shift(&a1, 3);
    for(i = 0; i<3;i++)
        printf("After Shift In Main: " "%d\n", a1[i]);
    return 0;
} 
```

> 班次(a1, 3)

工作正常，但我一生都无法弄清楚如何正确测试pointer_shift。

我得到两个错误；一个是在线的

> 指针移位(&a1, 3)

我从不兼容的指针类型传递参数 1。另一个错误是无法理解的，但我希望问题足够明显，以便有人能够帮助我。那么......如何在我的主要功能中测试我的两个功能？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:10:05.423

像这样更改基于指针的函数：

```
void pointer_shift(int *a, int n) {
   int i;
   for (i = 0; i != n - 1; i++) {
      *(a+i) = *(a+i+1);
   }
} 
```

您收到的是一个指针数组，而您从`main`. 由于数组衰减为指针，因此这里调用`shift(a1, 3)`就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T09:12:49.003

更改函数原型以接受`int*`

```
void pointer_shift(int *a, int n) 
```

然后像这样访问数组元素

```
*(a+1) = 4; 
```

这与

```
a[1] = 4; 
```

您仍然可以使用数组变量以相同的方式调用它，因为数组在作为参数传递给函数时会衰减为指向其第一个元素的指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T09:27:58.087

```
int main(void) {
    printf("Begin execution of testing Problem 1\n");
    int a1[] = {100, 101, 102};
    int *array_of_pointers[3];
    int i;

   array_of_pointers[0]= &a1[0];
   array_of_pointers[1]= &a1[1];
   array_of_pointers[2]= &a1[2];

   for(i = 0; i<3;i++)
       printf("Before Shift: " "%d %p\n ", a1[i], array_of_pointers[i]);

/*
  same as passing a1, the address of the array is
  the same value as the value of the array, just a different type
*/
   pointer_shift(array_of_pointers, 3);
   printf("After Shift, note that array_of_pointers has not shifted:\n");
   for(i = 0; i<3;i++)
       printf("After Shift In Main: " "%d %p\n", a1[i], array_of_pointers[i]);
   return 0;
} 
```

pointer_shift 需要一个指针数组，而不是一个 int 数组。这里的“移位”不在数组中，而是在数组中元素指向的值中，数组元素的值保持不变！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-09T09:20:10.880

您的第一个函数已经是基于指针的。定义类型的函数参数时`int[]`，编译器将其视为定义指针类型`int*`。因此，该函数可以传递一个指针或一个数组（将自动转换为指针）。

如果您将函数原型更改为 accept`int *a`而不是`int a[]`，则该函数将完全相同。

您的第二个函数不起作用，因为它需要一个指向 int 的指针数组，这不是您想要的。

# javascript - 如何将 *parameter* 从 JS 传递到 AS3？

> ID：12337838
> 
> 赞同：1
> 
> 时间：2012-09-09T09:05:15.867
> 
> 标签：javascript, jquery, flash, parameter-passing

我的 swf 文件中有一个函数：playSound()，我可以像这样通过 jQuery 调用它：

```
$.talkToFlash("interfaceSounds").playSound(); 
```

而 'talkToFlash' 只返回 swf 文件。这部分在这里有很好的记录并且工作正常。

但是，如何传递参数？

我相信 JS 这将是：

```
$.talkToFlash("interfaceSounds").playSound('swish.mp3'); 
```

但是我在 AS3 中做什么？

我尝试修改我的初始工作功能：

```
function playSound() {
    var s:swishSound = new swishSound; 
    var channel:SoundChannel = s.play();
}
ExternalInterface.addCallback("playSound", playSound); 
```

有了这个：

```
function playSound(mp3file) {
   trace(mp3file);
} 
```

但是“mp3file”只是空的。我试过

```
ExternalInterface.addCallback("playSound", playSound(mp3file)); 
```

和这个“主题”的其他变体，但似乎没有任何效果。我只是在这里和那里的语法上挣扎吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:19:23.557

你似乎快到了。这是一个修订版。让我知道它是否有效。

```
function playSound(mp3file::String) {
  trace(mp3file);
}

ExternalInterface.addCallback("playSound", playSound); 
```

另请参阅：[http ://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:12:40.307

事实证明是正确的开始。错误在其他地方，我忘记嵌入字体：/

尽管如此，对于那些构建类似东西的人来说，这里是完整的代码。我也不确定我停止轨道的方法是否正确，所以欢迎任何改进:)

AS3：

```
import flash.external.ExternalInterface;
import flash.media.Sound;
import flash.media.SoundLoaderContext;
import flash.net.URLRequest;

function playTrack(track_name) {

    var s:Sound = new Sound();
    soundName.text =track_name;
    track_name = '/path/to/mp3/' + track_name + ".mp3";
    var req:URLRequest = new URLRequest(track_name);
    var context:SoundLoaderContext = new SoundLoaderContext(8000, true);
    s.load(req, context);
    s.play();

}

function stopAllTracks() {
SoundMixer.stopAll();
}

ExternalInterface.addCallback("playTrack", playTrack);
ExternalInterface.addCallback("stopAllTracks", stopAllTracks); 
```

在 jQuery 中：

```
// play a song
  $.curPlay = '';
  $(".song_play").click(function() {    
    var id = $(this).attr('id');
    song = id.replace('play_', '');
    if(song==$.curPlay){  // stop the current song if the play btn is clicked twice
        $.stop_mp3();
        $.curPlay = '';
        return;
    }

    $.curPlay = song;
    $.play_mp3(song);
});

$.play_mp3 = function(file){ 
    $.stop_mp3();
    $.talkToFlash("interfaceSounds").playTrack(file);   
}

$.stop_mp3 = function(){  
    $.talkToFlash("interfaceSounds").stopAllTracks();   
}

//  movie referencer 
$.talkToFlash = function(swfFile){

  if (window.document[swfFile])   {
      return window.document[swfFile];
  }
  if (navigator.appName.indexOf("Microsoft Internet")==-1){
    if (document.embeds && document.embeds[swfFile])
      return document.embeds[swfFile]; 
  }
  else // if (navigator.appName.indexOf("Microsoft Internet")!=-1)
  {
    return document.getElementById(swfFile);
  }
} 
```

和 HTML/PHP：

```
 <div class='song_play'  id='play_<?=$songID?>'>play</div> 
```

我还有一个可能值得分享的技术，因为我发现这在使用 Flash 开发时非常有用。如果您在 PHP 中设置一些配置 Flash 的变量，则可以轻松更改容器的外观或爆破缓存：

```
<? 
$swf = "mp3_player.swf?".time();
$w = 1;
$h = 1;

$mp3Player = "<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8\" 
 codebase = \"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0\" 
 width=\"$w\" height=\"$h\" id=\"interfaceSounds\" align=\"middle\">
 <param name=\"allowScriptAccess\" value=\"always\" />
 <param name=\"allowFullScreen\" value=\"false\" />
 <param name=\"movie\"  value=\"/assets/swf/$swf\" />
  <param name=\"quality\" value=\"high\" />
 <embed src=\"/assets/swf/$swf\" quality=\"high\" width=\"$w\" 
 height=\"$h\" name=\"interfaceSounds\" align=\"middle\" 
 allowScriptAccess=\"always\"  allowFullScreen=\"false\"
  type=\"application/x-shockwave-flash\"    
 pluginspage=\"http://www.macromedia.com/go/getflashplayer\" />
 </object>"; 
```

稍后在您的 php 文档中，您只需在任何您想要的地方回显它：

```
 <?= $mp3Player ?> 
```

# iphone - 如何使用相同的 Obj C 代码创建多个对象，每个对象都有一个唯一的名称？

> ID：12337843
> 
> 赞同：-2
> 
> 时间：2012-09-09T09:06:05.897
> 
> 标签：iphone, objective-c, xcode, object, namespaces

**如何使用相同的代码创建多个对象，但每个对象都有一个唯一的名称？**

如果我在目标 C 中创建一个对象，例如：

```
MyClass *myObject = [[MyClass alloc] init]; 
```

我有一个名为 myObject 的对象，我可以引用它来执行以下操作：

```
[myObject setBackgroundColor:[UIColor blueColor]]; 
```

但是如果我想用相同的分配代码创建多个对象呢？例如，如果我在操作中使用此代码，那么每次点击按钮时都会创建一个新对象。然后我会有多个名为 myObject 的对象。因此，当我使用代码设置背景颜色时，它会将 myObject 的所有背景颜色变为蓝色。

如果创建的每个对象都有一个唯一的名称，这不会是一个问题，但是如何给使用相同代码创建的每个对象一个唯一的名称？

一种方法是在创建后重命名对象并附加一个数字增量，但是如何重命名对象？或者，也许我可以首先为每个创建的对象设置一个唯一的名称，但是如何为每个新对象的名称插入一个唯一的“字符串”？

谢谢阅读！

**更新！！**

我创建了一个“带有标签方法的初始化”，但每次创建新对象时，先前创建的对象也会收到新标签，因此每个对象都有相同的标签，而不是唯一的标签。有什么帮助吗？

初始化方法：

```
- (id) initWithTag:(int) theTag
{
    self = [self init];
    if (self)
    {
        self.tag = theTag;
    }
    return self;
} 
```

对象创建代码：

```
MyClass *myObject = [[MyClass alloc] initWithTag:tagCount];
tagCount ++; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:09:35.627

创建一个接受名称的初始化方法：

```
MyClass *myObject = [[MyClass alloc] initWithName:@"Current Object Name"]; 
```

和`initWithName:`代码：

```
- (id) initWithName:(NSString*) theName
{
    self = [super init];
    if (self)
    {
        self.name = theName;
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T09:20:54.633

我有同样的要求，很久以前。

我更喜欢这样做：

```
@implementation testViewController {
    NSMutableArray *myarray;
}

- (id)init
{
    self = [super init];
    if (self) {
        myarray = [NSMutableArray array];
    }
    return self;
}

- (void) buttonClickMethod {
    MyClass *myObject = [[MyClass alloc] init];
    [myObject setBackgroundColor:[UIColor blueColor]];
    [myarray addObject:myObject];
    [myObject release];
} 
```

所以你有一个数组，里面有单独的对象。你可以遍历它。您甚至可以将初始背景颜色（当您点击按钮时）设置为基于用户选择的颜色。（在我的示例中，颜色始终为蓝色）

# scala - 更多关于 scala 的类型参数，试图获得对类型的一致引用

> ID：12337846
> 
> 赞同：0
> 
> 时间：2012-09-09T09:06:26.583
> 
> 标签：scala, inheritance, types, covariance

好的，所以，我以前问过这个问题。理想情况下，我正在寻找一个通用答案，以帮助我理解如何一致地指定类型，但取而代之的是，我将解决如何解决特定问题。到目前为止，每个解决方案似乎又带来了 3 个问题，我试图避免将整个应用程序放在这里，但我的目标是找到一种方法，以一种有用的方式从任何地方引用递归参数化特征类型的类型，在一个非平凡的程序，其中该特征类型的值可以互换使用。

所以，这里有更多示例代码：

```
//trait file, shouldn't need to know about implementing class.
trait MyTrait[T <: MyTrait[T]] { self:T =>
  val listOfT: List[T]
  def getFirst:T
  def getOne:T = if( !listOfT.isEmpty ) getFirst else self
}

case class Foo[A <: MyTrait[A]](i: MyTrait[A])

object MyTrait {
  def doSomething
      [T <: MyTrait[T], U[X <: MyTrait[X]] <: MyTrait[X]]
      (t: U[T]): T = t.getFirst

  def testMethod1
      [T <: MyTrait[T], U[X <: MyTrait[X]] <: MyTrait[X]]
      (something:Foo[T]):T=
              //error! type mismatch.  found:T, required: ?U[?T]
              doSomething(something.i.getOne)

  def testMethod2
       [T <: MyTrait[T], U[X <: MyTrait[X]] <: MyTrait[X]]
      (something:Foo[T]):T=
        //error! type mismatch.  
        // found: something.i.type (with underlying type this.MyTrait[T]
        //required: T
        something.i

  def testMethod3
       [T <: MyTrait[T], U[X <: MyTrait[X]] <: MyTrait[X]]
      (something:Foo[U[T]]):U[T]=
        //error: type arguments [U[T]] do not conform to class 
        //Foo's type parameter bounds [A <: this.MyTrait[A]]
        something.i.getOne

  // this works! ...but aren't something.i.getOne and something.i the same type?
  // why does testMethod2 fail if this works ?
  // what if I want to have a method that might return something.i and might return
  // soemthing.i.getOne?  What would the interface for that look like?
  def testMethod4
       [T <: MyTrait[T], U[X <: MyTrait[X]] <: MyTrait[X]]
      (something:Foo[T]):T=
        something.i.getOne

  def testMethod5
       [T <: MyTrait[T], U[X <: MyTrait[X]] <: MyTrait[X]]
      (something:Foo[U[T]]):U[T]=
        //error: type mismatch;
        //found: something.i.type (with underlying type this.MyTrait[U[T]]
        // required: U[T]
        something.i

}

//class file, shouldn't need to have MyTrait anywhere except 'extends' line.
//should be a usefull class on its own without adding the trait.
class MyClass extends MyTrait[MyClass] {
  //the point of using the parameterized type is to be able to return of 
  //List[MyClass] here instead of List[MyTrait] without having to override
  // some 'type' attribute in anything that uses the trait.
  override val listOfT: List[MyClass] = List[MyClass](this)
  override def getFirst: MyClass = listOfT.head
}

//some client code:
val mc = new MyClass
val foo = Foo(mc)
MyTrait.doSomething(foo.i)
//MyTrait.testMethod1(foo) 
```

我从这个问题的答案中弄清楚了如何使用类型参数： [T <: MyTrait[T], U[X <: MyTrait[X]] <: MyTrait[X]]: [recursive type parameters in case class fields](https://stackoverflow.com/questions/12323173/recursive-type-parameters-in-case-class-fields/12323851)

我基本上又问了同样的事情，但把问题更进一步了。你可以在这里看到 something.i 基本上和 something.i.getOne 具有相同的类型，但是这些类型不能互换使用，因此这里的对象不能一致地用作不同函数的参数。如何使此代码以 something.i 和 something.i.getOne（甚至可能是同一个对象）具有编译器和类型系统识别的相同类型的方式工作？

这个特定问题的重点在示例代码中的 testMethod4 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:00:41.293

该模式`MyTrait[A <: MyTrait[A]]`意味着您将希望直接使用`A`，而不是再使用`MyTrait`，因为`A`扩展了此特征并保证在整个方法中返回自身的实例。

因此，错误在于 的定义`Foo`，应该很简单：

```
case class Foo[A <: MyTrait[A]](i: A) 
```

通过给定的更正`Foo`，您的`MyClass`编译和“客户端代码”也是如此。

* * *

此外，嵌套类型 like`U[X <: MyTrait[X]] <: MyTrait[X]]`没有任何意义。最终，您将拥有*一种*表示类型。方法参数处于逆变位置，因此具有类型参数就足够了，`T <: MyTrait[ T ]`并且您可以坚持任何表示类型，无论多么具体。换句话说，`Foo[U[T]]`它没有任何优势，`Foo[T]`反而使事情变得不必要地复杂。在您所有的测试方法中，您基本上可以删除`U`类型参数。

```
object MyTrait {
  def doSomething[T <: MyTrait[T]](t: T): T = t.getFirst

  def testMethod1[T <: MyTrait[T]](something: Foo[T]): T =
    doSomething(something.i.getOne)

  def testMethod2[T <: MyTrait[T]](something: Foo[T]): T = something.i    
  def testMethod3[T <: MyTrait[T]](something: Foo[T]): T = something.i.getOne
  def testMethod4[T <: MyTrait[T]](something: Foo[T]): T = something.i.getOne
  def testMethod5[T <: MyTrait[T]](something: Foo[T]): T = something.i
} 
```

# android - 如何计算 Lrucache 的 sizeof？

> ID：12337848
> 
> 赞同：0
> 
> 时间：2012-09-09T09:06:45.733
> 
> 标签：android

我有一个数据结构，如下所示：

```
public class Data{
  private String charData;
  private int intData;

  //get-set methods here
} 
```

现在，我想创建一个 lru 缓存，我需要覆盖 sizeof...因为 java 中的每个 char 占用 2 个字节，而 int 是 4 个字节，我虽然制作：

```
cachedData= new LruCache<String,Data>(CACHE_MB*1024*1024){
    protected int sizeOf(String k,Data v){ 
                 return 4 +2*v.getCharData().length();
 } 
```

但是字符串是对象，所以我认为它们不仅仅是字符的内存，而且数据也是一个对象，所以我不确定我的方法是否正确。

顺便说一句，如果我使用错误的 sizeOf 方法达到最大缓存大小会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T12:09:18.750

我想你不明白该[`sizeOf()`](http://developer.android.com/reference/android/util/LruCache.html#sizeOf%28K,%20V%29)方法的使用：

> **以用户定义的单位**返回键和值条目的大小。默认实现返回 1，因此 size 是条目数，而 max size 是最大条目数。

在缓存中存储的某些条目的大小明显大于其他条目的特定情况下，可以覆盖此方法（缓存位图时可能会发生这种情况）。通过这种方式，您可以根据您的大小单位而不是条目数来指定缓存保留的最大限制。达到此限制后，将逐出最近最少使用的条目。

在您的情况下，不需要覆盖它，除非 String 对象将存储极长的字符串。

如果你坚持要覆盖它，你可以这样做：

```
protected int sizeOf(String k, Data v) {
    return v.charData.length();
} 
```

正如文档所说，返回的大小可以是任何用户定义的单位。所以`String.length()`会做得很好。由于 s 的大小`int`与 long s 相比微不足道`String`，因此我将其省略了。

基本上，您需要返回一个表示条目相对大小的数字。

# .htaccess - htaccess：为什么最终页面具有来自起始重定向页面的 GET 参数？

> ID：12337850
> 
> 赞同：0
> 
> 时间：2012-09-09T09:07:09.227
> 
> 标签：.htaccess, redirect

我有这个规则：

```
RewriteCond %{QUERY_STRING} someGetParameter=1
RewriteRule ^someoldpage.php$ http://newdomain.ru/page/ [L,R=301] 
```

重定向后我得到

```
http://newdomain.ru/page/?someGetParameter=1 
```

代替

```
http://newdomain.ru/page/ 
```

为什么会出错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:12:52.413

它会“错误”，因为您的假设是错误的，请参阅[`RewriteRule`指令](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)：

> **修改查询字符串**
> 
> 默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。要组合新旧查询字符串，请使用`[QSA]`标志。

所以：

```
RewriteCond %{QUERY_STRING} someGetParameter=1
RewriteRule ^someoldpage.php$ http://newdomain.ru/page/? [L,R=301] 
```

# .net - 沿路径移动形状？

> ID：12337852
> 
> 赞同：0
> 
> 时间：2012-09-09T09:07:34.520
> 
> 标签：.net, wpf, interpolation, gsap

我想知道，在 WPF 中做运动路径的推荐方法是什么？那里有著名的图书馆吗？还是建议使用 WPF 本机框架？

我知道在谈论缓入和缓出、速度等时插值可能会变得复杂......我想要的是一些既方便又强大的东西。

我想知道社区正在使用什么来编写这样的功能，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T12:01:18.767

您可以在 StoryBoard 中创建使用 DoubleAnimationUsingPath 的动画。

这里有一个复杂的例子，它将帮助直观地展示一些可能性。

*   [http://www.blogs.intuidev.com/post/2010/09/14/AnimatingObjectsAlongAPath.aspx](http://www.blogs.intuidev.com/post/2010/09/14/AnimatingObjectsAlongAPath.aspx)

如果您想更好地控制速度和速度之类的东西，这可能无法通过更改 SpeedRatio 来实现，那么您可以深入研究动画时钟，但也许可以使用自定义缓动功能。

*   [http://10rem.net/blog/2009/11/04/creating-custom-easing-functions-in-wpf-4-and-silverlight](http://10rem.net/blog/2009/11/04/creating-custom-easing-functions-in-wpf-4-and-silverlight)

*   [http://blogs.msdn.com/b/wpfsdk/archive/2007/01/18/wpf-animations-tips-and-tricks.aspx](http://blogs.msdn.com/b/wpfsdk/archive/2007/01/18/wpf-animations-tips-and-tricks.aspx)

Codeplex 有许多基于动画的库可以帮助您：

*   [http://artefactanimator.codeplex.com/](http://artefactanimator.codeplex.com/)

*   [http://bling.codeplex.com/](http://bling.codeplex.com/)

*   [http://fluidkit.codeplex.com/](http://fluidkit.codeplex.com/) （有一些动画相关的类）

# javascript - 如何在 Kendo UI 中创建类转换效果？

> ID：12337855
> 
> 赞同：0
> 
> 时间：2012-09-09T09:08:03.657
> 
> 标签：javascript, jquery, jquery-ui, effects, kendo-ui

我工作的公司正在考虑用 Kendo UI 替换 jQuery UI。
我个人没有看到任何好处，而且我还发现 Kendo UI 的文档严重缺乏。

例如，在 jQuery UI 中，有这些漂亮的类过渡效果：http: [//jqueryui.com/docs/Effects/Methods#Class_Transitions](http://jqueryui.com/docs/Effects/Methods#Class_Transitions)

这些效果的 Kendo UI 等效项是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T09:49:23.387

kendo.fx.js 中有 kendoAddClass、kendoRemoveClass 和 kendoToggleClass，它们在可用时使用 CSS3 过渡，在不可用时回退到直接替换。它们还没有记录，因为动画是直接用 CSS 完成的，只能通过从元素中删除过渡来停止。

经过检查，似乎 jQuery 插件在 2012 年第二季度（内部版本 710）中损坏了。我已经修复了它们，修复将在下周随服务包一起发布。同时，您仍然可以使用曾经为它们提供动力的 kendo.toggleClass() 方法。它的用法是这样的：

```
kendo.toggleClass(element, classes, options, toggle);

element: jQuery object
classes: one or more classes to apply (separated by a space)
options: {
    exclusive: "all",
    duration: 400,
    easing: "ease-out"
} - options is optional, can be omitted, the values up there are default and fed to the transition CSS property, duration is in ms.
toggle: add/remove the class. 
```

从下周的服务包开始，您可以像这样直接使用它：

```
$("#test").kendoAddClass(classes, options); 
```

哦，忘了加个[jsBin的demo](http://jsbin.com/idaduc/11/edit)

# c# - 将不会应用禁用状态的 UserControl-Style

> ID：12337859
> 
> 赞同：1
> 
> 时间：2012-09-09T09:09:14.803
> 
> 标签：c#, wpf, xaml, user-controls

在将“Control-Disabled-Style”应用到我的用户控件时遇到一些问题后，我偶然发现了另一个问题。

如您所见，`IsEnabled == true`和有两个预定义的渐变`IsEnabled == false`。现在，如果我禁用我的用户控件，则不会应用禁用状态的渐变。我不知道为什么，但什么也没发生。控件看起来与启用时相同。我创建了一些其他的用户控件，如果禁用，让它们改变颜色 - 它有效。

我找不到任何错误也许你可以帮助我？

资源：

```
<UserControl.Resources>
    <LinearGradientBrush x:Key="NormalStateGradient" EndPoint="1.197,0.542" StartPoint="0.037,0.542">
            <GradientStop Color="#FF4D4D4D" Offset="0.741"/>
            <GradientStop Color="#29000000" Offset="1"/>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="DisabledStateGradient" EndPoint="1.197,0.542" StartPoint="0.037,0.542">
            <GradientStop Color="#FFFF0000" Offset="0.741"/>
            <GradientStop Color="#29000000" Offset="1"/>
    </LinearGradientBrush>
    <Style x:Key="ButtonEnableStates" TargetType="{x:Type Grid}">
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="True">
                <Setter Property="Background" Value="{DynamicResource NormalStateGradient}" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Background" Value="{DynamicResource DisabledStateGradient}"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources>

<Grid x:Name="LayoutRoot" Style="{DynamicResource ButtonEnableStates}" /> 
```

# .net - 使用 InstallShield LE 更新现有安装

> ID：12337860
> 
> 赞同：28
> 
> 时间：2012-09-09T09:09:15.893
> 
> 标签：.net, winforms, installshield

我们有一个非常简单的 WinForms 应用程序。我已经使用 InstallShield LE 创建了一个安装，它在第一次安装时运行良好。我希望用户也能够运行安装以更新现有副本。问题是我无法弄清楚创建此更新包的正确方法是什么。我试过了：

更改产品代码 - 安装正常，但正在添加/删除程序中创建一个新条目，并且旧条目未被删除。

保留产品代码 - Windows 安装程序喊道：“已安装此产品的另一个版本”

尝试使用其他代码（升级代码/产品版本） - 没有帮助

有没有简单的方法来创建这个？如果存在的话，也许可以告诉安装程序删除其以前的版本？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-14T08:20:18.933

在您的 InstallShield 设置项目中，您应该执行以下操作：

*   选择分支：*组织您的设置*->*升级路径*
*   添加新的*升级路径*，然后按*取消*按钮
*   如果您不打算从以下分支更改*产品版本*，则不应更改新*升级路径的默认属性：* *Organize your setup* -> *General Information*。如果您计划更改*产品版本*，那么您应该使用以下*升级路径*属性：*最小版本*/_包含最小版本_、*最大版本*/_包含最大版本_。
****   每次您需要创建新设置时，请从以下分支更改*产品代码：* *Organize your setup* -> *General Information*。*   请注意，不得更改*升级代码。****

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T12:45:15.220

1.  将 guid 从 /General info/"product code" 复制到 /Upgrade PAth / Upgrade code
2.  将 guid 从 /General info/"product code" 复制到 /General info/Upgrade code
3.  在 /General info/product code 中按下按钮“...”以生成新的 guid

4.  可选设置。在 /Upgrade 路径 / 升级代码

    *   禁用最高版本
    *   启用最低版本，例如您可以将版本 0.0.0.1 设置为最低版本。
    *   禁用语言依赖**

# linux - 我可以使用 puppet 来停止 linux 服务器上的服务吗？

> ID：12337862
> 
> 赞同：0
> 
> 时间：2012-09-09T09:09:32.010
> 
> 标签：linux, configuration, puppet, configuration-management

我们定期重启研发 Linux 和 Windows 服务器以进行服务器修补和其他额外维护。服务器上托管了许多不同的服务和开发环境，需要在重新启动服务器之前和之后停止/启动。

Puppet 可用于启动服务，并确保服务在工作时间内运行（作为守护程序）。我们可以在重新启动服务器之前使用 Puppet 停止服务吗？我正在考虑分别为启动和停止编写清单，禁用启动清单，然后手动应用停止清单。

但是，如果启动服务清单未禁用并且“重新启动”所依赖的资源正在尝试停止服务，而守护程序代理正在确保保持服务启动。我想知道那时会发生什么。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:49:35.973

我的建议是引入仪器（除了配置管理）。看看 MCollective[1] 和 Nanite[2]。两者都允许您编写自定义代理来执行自定义操作。MCollective 具有与 Puppet 紧密集成的优势。您可以使用它来编写自定义代理作为部署工作流程的一部分，这将停止服务等。无论如何，看看它是否对您有用。

1.  [http://puppetlabs.com/mcollective/introduction/](http://puppetlabs.com/mcollective/introduction/)
2.  [https://github.com/ezmobius/nanite](https://github.com/ezmobius/nanite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T09:28:26.993

是的你可以。

根据您的配置：

1.  如果 puppet 发送了重启信号，你可以在通过 ssh 重启之前执行命令：

```
ssh user@machine "command" 
```

命令可能在哪里：

```
service your_service stop 
```

2.  如果 puppet 不知道机器何时重新启动/关闭，您可以添加一个挂钩以便在关闭时执行脚本（停止服务）。

# c++ - 三元运算符中的抛出表达式

> ID：12337868
> 
> 赞同：0
> 
> 时间：2012-09-09T09:10:24.690
> 
> 标签：c++

根据 ISO/IEC 14882:2011，我们不能在三元运算符的第二个和第三个操作数中都使用 throw 表达式：

> 5.16 条件运算符 [expr.cond]
> 
> 2 如果第二个或第三个操作数的类型为 void，则在第二个和第三个操作数上执行左值到右值 (4.1)、数组到指针 (4.2) 和函数到指针 (4.3) 标准转换第三个操作数，并且以下之一应成立： — 第二个或第三个操作数（但不是两者）是 throw 表达式（15.1）；结果是另一个的类型并且是prvalue。— 第二个和第三个操作数都有 void 类型；结果是 void 类型并且是纯右值。[ 注意：这包括两个操作数都是 throw 表达式的情况。——尾注]

为什么 Comeau 编译器和 gcc 都允许这段代码？

```
int main()
{
   true ? throw 0 : throw 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:13:34.423

仔细阅读，标准并没有禁止它，甚至在注释中提到它。

# php - wp_nav_menu 将 PHP 代码放在 Navigation Label 中

> ID：12337869
> 
> 赞同：1
> 
> 时间：2012-09-09T09:10:40.727
> 
> 标签：php, wordpress

第一次到这里，想知道是否可以在Label Navigation Menu WP字段中直接使用PHP。目前情况如下......我向您展示两张图片以更好地了解我正在尝试做的事情：

[http://d.pr/i/nZ63](http://d.pr/i/nZ63)

这是页面的输出：

[http://d.pr/i/g2sN](http://d.pr/i/g2sN)

我想这样做是很不寻常的，而且在描述中使用相同的 php 代码我得到了与上面相同的问题。如果使用 HTML 代码示例：`<p><span>`没有问题。

Tnx U 全部。

* * *

好的。这是当前的测试情况：

```
 <?php wp_nav_menu(array(
    'theme_location' => 'top_navigation',
    'menu_class' => 'nav',
        //'container_class' => 'menu-{menu slug}-container',
            'container' => false,
            //'echo' => false,
    'before' => '',
    'after' => '<span>' . wp_title() . '</span>, 
```

没有错误，没有输出红色，但没有标题测试！我忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:41:20.430

我通常不使用插件，即使在这种情况下，我也会调用一个列出订阅者/作者的函数。

以这种方式回忆：`<?php attrac_list_authors(); ?>`在我的 WordPress 的任何部分，它都有效。如果我在导航标签菜单或描述中调用该函数，则会返回异常输出。

在撰写本文时，我尝试使用：

```
'after' => '<span>' . attrac_list_authors(); . '</span>, 
```

并且似乎给出了更好的结果，但我认为这是最好的解决方案。

# mysql - 从多个表中选择更新表

> ID：12337871
> 
> 赞同：1
> 
> 时间：2012-09-09T09:10:58.357
> 
> 标签：mysql

这个更新语句太慢了

```
UPDATE planner_ccy a
    SET     dxy =   (SELECT b.close FROM dxy b WHERE b.trade_date <= a.trade_date ORDER BY b.trade_date DESC LIMIT 1), 
        usd_rate = (SELECT c.interest_rate FROM usd_ir c WHERE c.set_date <= a.trade_date ORDER BY c.set_date DESC LIMIT 1),
        ccy_rate = (SELECT d.interest_rate FROM ccy_ir d WHERE d.set_date <= a.trade_date ORDER BY d.set_date DESC LIMIT 1),  
        coal = (SELECT e.price FROM coal e WHERE e.reported_date <= a.trade_date ORDER BY e.reported_date DESC LIMIT 1), 
        oil = (SELECT f.price FROM oil f WHERE f.reported_date <= a.trade_date ORDER BY f.reported_date DESC LIMIT 1), 
        ump = (SELECT g.ump_rate FROM usd_ur g WHERE g.reported_month <= a.trade_date ORDER BY g.reported_month DESC LIMIT 1), 
        inx = (SELECT h.close FROM inx h WHERE h.trade_date <= a.trade_date ORDER BY h.trade_date DESC LIMIT 1)/(SELECT i.gdp FROM fed_ i WHERE i.reported_year <= a.trade_date ORDER BY i.reported_year DESC LIMIT 1),
        total = (SELECT j.total FROM fed_ j WHERE j.reported_year <= a.trade_date ORDER BY j.reported_year DESC LIMIT 1)/(SELECT k.gdp FROM fed_ k WHERE k.reported_year <= a.trade_date ORDER BY k.reported_year DESC LIMIT 1), 
        dfn = (SELECT n.dfn FROM fed_ n WHERE n.reported_year <= a.trade_date ORDER BY n.reported_year DESC LIMIT 1)/(SELECT o.gdp FROM fed_ o WHERE o.reported_year <= a.trade_date ORDER BY o.reported_year DESC LIMIT 1), 
        tax = (SELECT p.tax_rate*p.tax_bracket FROM usd_tax p WHERE p.set_date <= a.trade_date ORDER BY p.set_date DESC LIMIT 1)/(SELECT q.gdp FROM fed_ q WHERE q.reported_year <= a.trade_date ORDER BY q.reported_year DESC LIMIT 1)/1000000000,
        forecast = (SELECT r.close FROM ccyusd r WHERE r.trade_date <= a.trade_date ORDER BY r.trade_date DESC LIMIT MasterSkip,1)

        WHERE a.trade_date >= Start; 
```

当我尝试使用下面的左连接时，只有几行得到更新。如何使用左连接？

```
UPDATE planner_ccy_ a
    LEFT JOIN (SELECT * FROM dxy ORDER BY trade_date DESC LIMIT 1) AS b
    ON b.trade_date <= a.trade_date 

    LEFT JOIN (SELECT * FROM usd_ir ORDER BY set_date DESC LIMIT 1) AS c
    ON c.set_date <= a.trade_date 

    LEFT JOIN (SELECT * FROM ccy_ir ORDER BY set_date DESC LIMIT 1) AS d
    ON d.set_date <= a.trade_date 

    LEFT JOIN (SELECT * FROM coal ORDER BY reported_date DESC LIMIT 1) AS e
    ON e.reported_date <= a.trade_date 

    LEFT JOIN (SELECT * FROM oil ORDER BY reported_date DESC LIMIT 1) AS f
    ON f.reported_date <= a.trade_date 

    LEFT JOIN (SELECT * FROM usd_ur ORDER BY reported_month DESC LIMIT 1) AS g
    ON g.reported_month <= a.trade_date 

    LEFT JOIN (SELECT * FROM inx ORDER BY trade_date DESC LIMIT 1) AS h
    ON h.trade_date <= a.trade_date 

    LEFT JOIN (SELECT * FROM fed_ ORDER BY reported_year DESC LIMIT 1) AS i
    ON i.reported_year <= a.trade_date 

    LEFT JOIN (SELECT * FROM usd_tax ORDER BY set_date DESC LIMIT 1) AS j
    ON j.set_date <= a.trade_date 

    LEFT JOIN (SELECT * FROM ccyusd ORDER BY trade_date DESC LIMIT MasterSkip,1) AS k
    ON K.trade_date <= a.trade_date 

    SET     a.dxy = b.close, 
        a.usd_rate = c.interest_rate,
        a.ccy_rate = d.interest_rate,  
        a.coal = e.price, 
        a.oil = f.price, 
        a.ump = g.ump_rate, 
        a.inx = h.close /i.gdp,
        a.total = i.total/i.gdp, 
        a.dfn = i.dfn/i.gdp, 
        a.tax = j.tax_rate*j.tax_bracket/i.gdp/1000000000,
        a.forecast = K.close

    WHERE a.trade_date >= Start; 
```

我需要通过从多个表中选择值来更新单个表。现在第一个太慢的选项可以正确执行，但效率不高。我一直在阅读连接更有效，实际上这个查询是从我以前的游标迁移过来的，而且太慢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:39:21.423

这似乎是一个艰难的过程。我可能会尝试将这个更新分解成几个更新语句。我可能会对每个源表（inx、ccyusd 等）进行一次更新查询。然后，并行发出查询。

这将让 mysql 专用更多线程来查找您想要的所有数据，然后随着线程完成，您将有更新的锁争用。

# ruby-on-rails-3 - 无法在 Rails 应用程序中加载omniauth

> ID：12337872
> 
> 赞同：1
> 
> 时间：2012-09-09T09:11:00.160
> 
> 标签：ruby-on-rails-3

我正在关注[rails 3 in action](http://manning.com/katz/)的源代码，当我运行应用程序时，出现以下错误：

```
[DEVISE] Devise.use_salt_as_remember_token is deprecated and has no effect. Please remove it.

Could not load 'omniauth'. Please ensure you have the omniauth gem >= 1.0.0 installed and listed in your Gemfile.
Exiting 
```

这是宝石文件：

```
gem 'rails', '3.2.8'
# gem 'arel'
gem 'rack'
gem 'sprockets'

gem 'sqlite3'

gem 'sass', '~> 3.1.0.alpha'
gem 'coffee-script'

gem 'dynamic_form'

gem 'devise'
gem 'cancan'

gem 'paperclip'

gem 'searcher'
gem 'kaminari'

gem 'jquery-rails'
gem "oa-oauth", :require => "omniauth/oauth"
gem "delayed_job"

# gem "forem"
gem "ticketee-forem"

gem 'sinatra'

group :test, :development do
  gem 'gmail'
  gem 'rspec-rails', '~> 2.6.1.beta1'
end

group :test do
  gem 'rack-test'
  gem 'cucumber-rails'
  gem 'capybara'
  gem 'database_cleaner'
  gem 'factory_girl'
  gem 'email_spec'
  gem 'launchy'
end

group :production do
  gem 'pg'
end 
```

当我运行`bundle check`它会成功。

还有我的宝石清单：

```
*** LOCAL GEMS ***

actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
addressable (2.2.8)
arel (3.0.2)
bcrypt-ruby (3.0.1)
builder (3.0.2)
bundler (1.1.4)
cancan (1.6.8)
capybara (1.1.2)
childprocess (0.3.5)
cocaine (0.3.0)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
cucumber (1.0.6)
cucumber-rails (1.0.2)
database_cleaner (0.8.0)
delayed_job (3.0.3)
devise (2.1.2)
diff-lcs (1.1.3)
dynamic_form (1.1.4)
email_spec (1.2.1)
erubis (2.7.0)
execjs (1.4.0)
factory_girl (4.0.0)
faraday (0.6.1)
ffi (1.1.5)
gherkin (2.4.21)
gmail (0.4.0)
gmail_xoauth (0.3.2)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.1.2)
json (1.7.5)
kaminari (0.14.0)
launchy (2.1.0)
libwebsocket (0.1.5)
mail (2.4.4)
mime (0.1)
mime-types (1.19)
multi_json (1.3.6)
multipart-post (1.1.5)
mysql2 (0.3.11)
nokogiri (1.4.7)
oa-core (0.2.4)
oa-oauth (0.2.4)
oauth (0.4.7)
oauth2 (0.4.1)
orm_adapter (0.4.0)
paperclip (3.2.0)
pg (0.14.1)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-protection (1.2.0)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
rspec (2.6.0)
rspec-core (2.6.4)
rspec-expectations (2.6.0)
rspec-mocks (2.6.0)
rspec-rails (2.6.1)
rubygems-bundler (1.0.2)
rubyzip (0.9.9)
rvm (1.11.3.3)
sass (3.1.21)
searcher (0.0.6)
selenium-webdriver (2.25.0)
sinatra (1.3.3)
sprockets (2.1.3)
sqlite3 (1.3.6)
term-ansicolor (1.0.7)
thor (0.16.0)
ticketee-forem (0.0.1)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
warden (1.2.1)
xpath (0.1.4) 
```

如您所见，我确实安装了 gem `oa-oauth (0.2.4)`。

为什么它给我这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T09:16:16.297

oa-oauth 不是omniauth gem ... 它是omniauth 的oauth 扩展... 添加omniauth gem `gem 'omniauth'`，就像错误消息告诉您的那样...

# ios - 使用单个 iOS 设备测试 iCloud 同步

> ID：12337875
> 
> 赞同：6
> 
> 时间：2012-09-09T09:12:02.970
> 
> 标签：ios, testing, core-data, icloud

我目前只有一台 iOS 设备，到目前为止还没有出现问题。但我现在想为我的应用程序（使用核心数据）添加 iCloud 同步支持。

在我得到第二台设备之前，测试是不可能的吗？或者是否可以将 iOS 模拟器与我的设备结合使用或伪造 iCloud 数据以测试 iCloud 同步？

**编辑：**不需要太多研究就可以发现 iCloud，尤其是使用 Core Data，肯定需要大量测试，这当然意味着要使用多个设备进行测试！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-31T15:37:55.340

在 Xcode 5 中：

> OS Simulator 现在支持 iCloud 同步应用程序内的文档和 KVS 数据，使应用程序能够使用 iCloud 在设备之间同步。在进行测试以确保应用程序文档和数据在多个设备之间正确同步时，此功能很有用。
> 
> 注意：在 iOS 模拟器中运行应用程序后，使用“设置”应用程序登录 Apple ID 帐户。登录后，使用 Debug 菜单中的“Trigger iCloud sync”命令告诉模拟器与其他设备同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T13:59:24.860

您可以使用您的 mac 作为第二台设备，并获取您的 iOS 核心数据代码的后端并为 mac 编写一个测试应用程序。您必须在 xcode 中将应用程序作为沙盒应用程序运行，并将相同的沙盒名称放在应用程序设置中，以便应用程序查看彼此的数据。

要完成这项工作，您需要在配置门户上创建一个 mac 应用程序（需要一个 mac 开发人员许可证 99 美元 - 比 iOS 设备便宜）并为 iCloud 启用它。

一般来说，除非您打算尝试管理应用程序中的合并冲突，否则您不需要测试 iCloud 本身。实际上，无处不在的容器中的任何内容都会被同步。如果您需要跨设备的事务控制（同一用户同时在多个设备上更新相同的文档，您将不得不处理冲突），这取决于您的应用程序的功能，这可能是一个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T23:33:02.870

您可以测试至少一个同步子集的一种方法是在您的设备上安装您的应用程序，添加一些数据，将该数据同步到 iCloud，然后从设备中删除该应用程序。

当您再次安装它并同步到 iCloud 时，您应该取回之前同步到 iCloud 的相同数据。

它不完全是实时的，但它应该给你一些可以使用的东西。

# ajax - 如何在 Sencha Touch 2 的 Ajax 请求中捕获请求异常？

> ID：12337879
> 
> 赞同：0
> 
> 时间：2012-09-09T09:12:14.567
> 
> 标签：ajax, sencha-touch-2

在我的 Sencha Touch 应用程序中，如果设备连接到 wifi 但没有互联网连接，Ext.device.Connection.isOnline() 将返回 true - 所以我的 Ajax 调用挂起。我正在尝试捕获 requestexception 事件，以便可以优雅地处理错误，但无法使其正常工作。这是代码：

```
Ext.Ajax.request({
                url:    [my url],
                jsonData:{ },
                params:{
                    op:     'myop'

                },

                method:"POST",
                success:function(response, opts){
                    // all good

                },
                failure:function(response, opts){
                    // failed
                },

                listeners: {
                    requestexception: function(connection, response, options,  eOpts) {

                        switch(response.status) {
                            case 0 :
                              Ext.Msg.alert('Error Loading', 'No Internet connection.');
                              break;

                            default :
                              Ext.Msg.alert('Whoops!', 'An unexpected error has occurred.');
                          }

                    }
                }

            }); 
```

不知道我做错了什么！

谢谢马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:58:14.843

`Ext.define('MyApp.store.MyJsonStore',`

`extend: 'Ext.data.Store',`

```
config: {
    storeId: 'MyJsonStore',
    proxy: {
        type: 'ajax',
        reader: {
            type: 'json'
        }
    }
},

constructor: function() {
    var me = this;
    me.callParent(arguments);
    me.getProxy().on([{
        fn: 'onAjaxproxyException',
        event: 'exception',
        scope: me
    }]);
},

onAjaxproxyException: function(server, response, operation, options) {
             //Your code here
} 
```

`});`

# mono - 通过单声道项目运行的带有 System.Timers.Timer 的程序会导致高 CPU 负载

> ID：12337884
> 
> 赞同：1
> 
> 时间：2012-09-09T09:12:53.987
> 
> 标签：mono, cpu-usage

我注意到`System.Timers.Timer`出现对象使用的程序非常消耗 CPU（单 CPU 内核几乎 100%）。

我使用的是 Ubuntu 11.10，这是我的单声道版本：

```
mono -V
Mono JIT compiler version 2.10.5 (Debian 2.10.5-1)
Copyright (C) 2002-2011 Novell, Inc, Xamarin, Inc and Contributors. www.mono-project.com
        TLS:           __thread
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  amd64
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            Included Boehm (with typed GC and Parallel Mark) 
```

这是示例程序，它会导致意外的高 CPU 使用率：

```
using System;
using System.Timers;

namespace MonoCPUTest
{
    class Program
    {
        static Timer _refresh = new Timer();

        static void Main(string[] args)
        {
            _refresh.Interval = 2000;
            _refresh.AutoReset = true;
            _refresh.Elapsed += (x, y) => refresh();
            _refresh.Start();

            while (true)
            {
                Console.WriteLine("loop");
                System.Threading.Thread.Sleep(10000);
            }
        }
        static void refresh()
        {
            Console.WriteLine("refresh");
        }
    }
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T22:17:30.797

我刚刚测试过（通过复制粘贴、编译和执行您的代码）并且无法重现该问题，CPU 负载约为 0。我正在使用较新版本的 Mono，特别是几天前从 git 树编译的版本；所以如果有这样的问题，它是固定的。

我猜想如果没有外部 PPA，升级你的 Mono 是不可能的，但如果你没有因为其他原因被迫使用这个版本，这就是应该做的。您也可以从源代码编译一个，就像配置、制作、安装一样简单；）

# ruby-on-rails - Ruby on rails 同一张表上的多个连接

> ID：12337891
> 
> 赞同：0
> 
> 时间：2012-09-09T09:13:41.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个模型：

```
Class Bar < ActiveRecord::Base
#...
belongs_to :foo_A, :class_name => "Foo"
belongs_to :foo_B, :class_name => "Foo" 
```

我想从表 Foo 中获取信息如下（代码不起作用）：

```
Bar.joins(:foo_A, :foo_B).select("bars.*, foos_a.name as foo_a_name, foos_b.name as foo_b_name").all 
```

当然，没有 foos_a 或 foos_b 表……只有 foos 表。

有没有办法在不编写整个 sql 查询的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:30:30.097

您必须为每个 belongs_to 设置 foreign_key。在同一模型中查看更多[关于两个 belongs_to 关联](https://stackoverflow.com/questions/5294775/same-model-for-two-belongs-to-associations)

```
belongs_to :foo_A, :class_name => "Foo", :foreign_key => 'foo_a_id'
belongs_to :foo_B, :class_name => "Foo", :foreign_key => 'foo_b_id' 
```

# asp.net - 如何将对象绑定到图表控件

> ID：12337893
> 
> 赞同：0
> 
> 时间：2012-09-09T09:14:23.363
> 
> 标签：asp.net, charts

我有课 ：

```
public class ChartEntity4
{
    public DateTime Date { get; set; }
    public string STM1Number { get; set; }
    public float Utilization{ get; set; }
    public string Type { get; set; }
} 
```

我想将它绑定到图表控件 ASP.net 4.0，使 Date>> X 访问 Utilization 到 Y 访问，并通过颜色或其他东西来区分类型，你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:31:07.137

类似的东西：在 aspx 代码中：

```
<asp:Series Name="Series1" XValueType="String" XValueMember="Date" YValueMembers="Utilization"
                                IsValueShownAsLabel="True" YValueType="float" ChartType="Pyramid" Palette="BrightPastel">
</asp:Series> 
```

在cs文件中：

```
var ListOfChartEntity4 = new List<ChartEntity4>;
ListOfChartEntity4.Add(new ChartEntity4(); //add some things...
ListOfChartEntity4.Add(new ChartEntity4(); //add some more things...
ListOfChartEntity4.Add(new ChartEntity4(); //add even more things...
chartID.DataSource = ListOfChartEntity4; //Your data!
chartID.DataBind(); 
```

# iphone - 在应用程序启动笔记应用程序

> ID：12337896
> 
> 赞同：-1
> 
> 时间：2012-09-09T09:14:57.370
> 
> 标签：iphone, ios, ipad, uibutton

我正在制作一个应用程序，并希望有一个链接到 iOS 5 的笔记应用程序的功能。是否有任何代码？例如，我有一个 UIButton，当用户按下它时，它会关闭应用程序并启动 iOS 笔记应用程序。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T09:25:05.797

对于 Notes，没有 URL 方案。Apple 在此处为其应用程序的可用方案提供了参考：

[http://developer.apple.com/library/safari/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html](http://developer.apple.com/library/safari/#featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T09:27:13.173

您还没有提到这是用于 AppStore 还是用于越狱/内部开发。如果是后者，您可以使用`SBSLaunchApplicationWithIdentifier()`SpringBoardServices 私有框架中的函数：

```
SBSLaunchApplicationWithIdentifier(CFSTR("com.apple.notes"), false); 
```

# git - git克隆有什么问题？index-pack 死于信号 99 错误

> ID：12337901
> 
> 赞同：12
> 
> 时间：2012-09-09T09:16:16.893
> 
> 标签：git, version-control, git-clone

这个问题不同于[Git push “错误：索引包死于信号 9”](https://stackoverflow.com/questions/7985124/git-push-error-index-pack-died-of-signal-9)

错误信息如下：

```
remote: Counting objects: 40512, done.
remote: Compressing objects: 100% (8896/8896), done.
remote: Total 40512 (delta 31079), reused 40394 (delta 30980)
Receiving objects: 100% (40512/40512), 6.05 MiB | 22 KiB/s, done.
error: index-pack died of signal 99)   
fatal: index-pack failed

real    1292050m43.682s
user    0m23.645s
sys     0m5.872s 
```

还有一个案例：

```
remote: Counting objects: 18389, done.
remote: Compressing objects: 100% (4951/4951), done.
fatal: The remote end hung up unexpectedly MiB | 22 KiB/s      
fatal: early EOF
fatal: index-pack failed

real    7m18.359s
user    0m4.448s
sys     0m1.860s 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T22:16:17.717

这很可能是网络连接丢失 - 错误 99 来自您的 ssh

```
Connection Closed By Remote Host 
```

尝试

```
GIT_TRACE=1 git clone REPO new_dir 
```

这会让你确切地知道它在哪里超时。

# c# - C# Dll 导入失败：“应用程序无法启动，因为它的并排配置不正确”

> ID：12337909
> 
> 赞同：6
> 
> 时间：2012-09-09T09:18:30.413
> 
> 标签：c#, c++, visual-studio-2010, dll, dllimport

我有 ac# .net 4 app ，使用 vs 2010。我试图导入一个 c++ dll（基于 vs 2005）。

```
 [DllImport("Card.dll")] 
```

我得到了失败：

> 无法加载 DLL 'Card.dll'：应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息。（来自 HRESULT 的异常：0x800736B1）

使用 sxstrace.exe 我得到：

> 错误：无法解析引用 Microsoft.VC80.DebugMFC，processorArchitecture="x86"

我还发现：

> 缺少 MFC80D.DLL 和 MSVCR80D.DLL

请注意，这不是 DebugCRT，因为此问题是由使用 Debug 编译的 DLL 而不是 Release 引起的。我现在使用Release编译的dll，问题是DebugMFC。

我已经尝试了任何我可以在网上找到的东西。为了节省时间，我将介绍我尝试过的内容，因此我不会再收到此建议：

1-我已经安装了 Microsoft Visual C++ 2010 Redistributable Package + SP1 + 安全更新

2- 我已经安装了 Microsoft Visual C++ 2008 Redistributable Package

3 - 我已经安装了 Microsoft Visual C++ 2005 Redistributable Package

4 - 我尝试将此应用程序作为“发布”而不是“调试”运行

5 - 我试图将 entryPoint 设置为 DllImport

非帮助。我仍然得到同样的错误。我没有在网上看到任何其他建议，而不是上面列出的建议。谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T11:01:00.100

因为它说“无法解析引用 Microsoft.VC80.DebugCRT,processorArchitecture="x86"，这意味着您缺少对 VC 8.0 的调试 crt 运行时的依赖项。这意味着您需要构建卡的发布版本，而不是调试版本.dll。微软没有提供用于调试 CRT 运行时的可再发行包。那些只随 Visual Studio 一起提供。因此构建 card.dll 的发布版本，这应该有助于您的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T10:45:26.183

你对建筑有控制权`Card.dll`吗？如果是，请查看它是如何构建的。它必须使用正确版本的 VC++（随 VS 2005 提供的版本）构建，并启用清单。然后，安装 2005 Redist。包必须解决问题。如果您无法自行构建`Card.dll`，则必须分析嵌入式清单（如果有）并联系作者以合作解决问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T19:06:27.307

默认情况下，静态库链接到动态运行时。

如果您在 VS2005 中重新构建 dll，请更改您的*配置属性 | C/C++ | 代码生成 | 运行时库*设置为静态运行时以避免该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-18T08:46:59.103

您可以使用[Dependency Walker](http://www.dependencywalker.com/)来尝试找出您的 dll 提取的依赖项。如果它说它想要`*d.dll`，那么它看起来不是一个发布版本。请您的同事检查构建配置。

要使用调试版本，您可以尝试以下操作：

1.  转到`c:\Program Files\Microsoft Visual Studio 9.0\VC\redist\Debug_NonRedist\x86\`（这是针对Visual Studio 2008，x86，根据您的系统调整路径）。
2.  将`Microsoft.VC90.DebugCRT`和`Microsoft.VC90.DebugMFC`目录复制到包含可执行文件的目录中。
3.  调整复制目录中清单文件中的程序集版本（声明如下：`<assemblyIdentity type="win32" name="Microsoft.VC90.DebugCRT" version="9.0.30729.6161" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>`，`9.0.30729.6161`根据您的dll需要更改。
4.  尝试运行应用程序。

所需的程序集版本可以在 sxstrace 的输出中或在`*.intermediate.manifest`其构建目录中 dll 旁边的文件中找到。抱歉，我没有 Visual Studio 2005，无法给出确切的数字。

# c++ - 在 Windows 错误检查中使用 C++ 向 gmail 帐户发送电子邮件

> ID：12337911
> 
> 赞同：1
> 
> 时间：2012-09-09T09:19:09.353
> 
> 标签：c++, sockets, email, visual-c++

我知道这已经被讨论了很多，但我不是在问怎么做，我只是在问为什么它不起作用。我做错了什么。它说电子邮件已成功发送，但我在收件箱中看不到它。我想向 gmail 帐户发送电子邮件，而不是通过它。

```
#include <iostream>
#include <windows.h>
#include <fstream>
#include <conio.h>
#pragma comment(lib, "ws2_32.lib")

// Insist on at least Winsock v1.1
const int VERSION_MAJOR = 1;
const int VERSION_MINOR = 1;

#define CRLF "\r\n"                 // carriage-return/line feed pair
using namespace std;

// Basic error checking for send() and recv() functions
void Check(int iStatus, char *szFunction)
{
  if((iStatus != SOCKET_ERROR) && (iStatus))
    return;

  cerr<< "Error during call to " << szFunction << ": " << iStatus << " - " << GetLastError() << endl;
}

int main(int argc, char *argv[])
{
  int         iProtocolPort        = 25;
  char        szSmtpServerName[64] = "";
  char        szToAddr[64]         = "";
  char        szFromAddr[64]       = "";
  char        szBuffer[4096]       = "";
  char        szLine[255]          = "";
  char        szMsgLine[255]       = "";
  SOCKET      hServer;
  WSADATA     WSData;
  LPHOSTENT   lpHostEntry;
  LPSERVENT   lpServEntry;
  SOCKADDR_IN SockAddr;

  // Check for four command-line args
  //if(argc != 5)
   // ShowUsage();

  // Load command-line args
  lstrcpy(szSmtpServerName, "smtp.gmail.com");
  lstrcpy(szToAddr, "xxxx@gmail.com");
  lstrcpy(szFromAddr, "xxx@gmail.com");

  // Create input stream for reading email message file
  ifstream MsgFile("D:\\d.txt");

  // Attempt to intialize WinSock (1.1 or later)
  if(WSAStartup(MAKEWORD(VERSION_MAJOR, VERSION_MINOR), &WSData))
  {
    cout << "Cannot find Winsock v" << VERSION_MAJOR << "." << VERSION_MINOR << " or later!" << endl;

    return 1;
  }

  // Lookup email server's IP address.
  lpHostEntry = gethostbyname(szSmtpServerName);
  if(!lpHostEntry)
  {
    cout << "Cannot find SMTP mail server " << szSmtpServerName << endl;

    return 1;
  }

  // Create a TCP/IP socket, no specific protocol
  hServer = socket(PF_INET, SOCK_STREAM, 0);
  if(hServer == INVALID_SOCKET)
  {
    cout << "Cannot open mail server socket" << endl;

    return 1;
  }

  // Get the mail service port
  lpServEntry = getservbyname("mail", 0);

  // Use the SMTP default port if no other port is specified
  if(!lpServEntry)
    iProtocolPort = htons(IPPORT_SMTP);
  else
    iProtocolPort = lpServEntry->s_port;

  // Setup a Socket Address structure
  SockAddr.sin_family = AF_INET;
  SockAddr.sin_port   = iProtocolPort;
  SockAddr.sin_addr   = *((LPIN_ADDR)*lpHostEntry->h_addr_list);

  // Connect the Socket
  if(connect(hServer, (PSOCKADDR) &SockAddr, sizeof(SockAddr)))
  {
    cout << "Error connecting to Server socket" << endl;

    return 1;
  }

  // Receive initial response from SMTP server
  Check(recv(hServer, szBuffer, sizeof(szBuffer), 0), "recv() Reply");

  // Send HELO server.com
  sprintf(szMsgLine, "HELO %s%s", szSmtpServerName, CRLF);
  Check(send(hServer, szMsgLine, strlen(szMsgLine), 0), "send() HELO");
  Check(recv(hServer, szBuffer, sizeof(szBuffer), 0), "recv() HELO");

  // Send MAIL FROM: <sender@mydomain.com>
  sprintf(szMsgLine, "MAIL FROM:<%s>%s", szFromAddr, CRLF);
  Check(send(hServer, szMsgLine, strlen(szMsgLine), 0), "send() MAIL FROM");
  Check(recv(hServer, szBuffer, sizeof(szBuffer), 0), "recv() MAIL FROM");

  // Send RCPT TO: <receiver@domain.com>
  sprintf(szMsgLine, "RCPT TO:<%s>%s", szToAddr, CRLF);
  Check(send(hServer, szMsgLine, strlen(szMsgLine), 0), "send() RCPT TO");
  Check(recv(hServer, szBuffer, sizeof(szBuffer), 0), "recv() RCPT TO");

  // Send DATA
  sprintf(szMsgLine, "DATA%s", CRLF);
  Check(send(hServer, szMsgLine, strlen(szMsgLine), 0), "send() DATA");
  Check(recv(hServer, szBuffer, sizeof(szBuffer), 0), "recv() DATA");
  //strat writing about the subject, end it with two CRLF chars and after that you can 
  //write data to the body oif the message
  sprintf(szMsgLine, "Subject: My own subject %s%s", CRLF, CRLF);
  Check(send(hServer, szMsgLine, strlen(szMsgLine), 0), "send() DATA");

  // Send all lines of message body (using supplied text file)
  MsgFile.getline(szLine, sizeof(szLine));             // Get first line

  do         // for each line of message text...
  {
    sprintf(szMsgLine, "%s%s", szLine, CRLF);
    Check(send(hServer, szMsgLine, strlen(szMsgLine), 0), "send() message-line");
    MsgFile.getline(szLine, sizeof(szLine)); // get next line.
  } while(!MsgFile.eof());

  // Send blank line and a period
  sprintf(szMsgLine, "%s.%s", CRLF, CRLF);
  Check(send(hServer, szMsgLine, strlen(szMsgLine), 0), "send() end-message");
  Check(recv(hServer, szBuffer, sizeof(szBuffer), 0), "recv() end-message");

  // Send QUIT
  sprintf(szMsgLine, "QUIT%s", CRLF);
  Check(send(hServer, szMsgLine, strlen(szMsgLine), 0), "send() QUIT");
  Check(recv(hServer, szBuffer, sizeof(szBuffer), 0), "recv() QUIT");

  // Report message has been sent
  cout<< "Sent " << argv[4] << " as email message to " << szToAddr << endl;

  // Close server socket and prepare to exit.
  closesocket(hServer);

  WSACleanup();
  _getch();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T11:10:23.993

Google Mail SMTP 服务器不会接受任何未经身份验证的邮件。如果发件人是非 GMail 用户，您可能会成功，并且您可以使会话看起来像是从另一个邮件服务器中继传递到 GMail 用户的邮箱，但是一旦您的发件人是`@gmail.com`此选项，则此选项不可用。

您必须进行身份验证，即启用 SSL 或 TLS 的会话（端口 465、587），然后进行密码身份验证。这样邮件服务器就会接受您的投递。您可以使用[SChannel API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374782%28v=vs.85%29.aspx)为您执行 TLS/SSL。

现在，当您拥有此代码片段时，您需要查看发送给您的响应。我相信你有一些东西可以解释身份验证是强制性的。

# linux - 为什么我在 Linux 中将 kmalloc 与 GFP_DMA 一起使用时会得到一个高地址？

> ID：12337914
> 
> 赞同：3
> 
> 时间：2012-09-09T09:19:14.753
> 
> 标签：linux, opensuse, dma, kmalloc

我正在为 Linux 中的 DMA 设备编写设备驱动程序。在[Linux 设备驱动程序第 15 章](http://lwn.net/images/pdf/LDD3/ch15.pdf "Linux 设备驱动程序，第三版，第 15 章")中，它说：

> 对于具有这种限制的设备，应通过将 GFP_DMA 标志添加到 kmalloc 或 get_free_pages 调用来从 DMA 区域分配内存。当此标志存在时，仅分配可以用 24 位寻址的内存。或者，您可以使用通用 DMA 层（我们稍后会讨论）来分配缓冲区以解决您设备的限制

我这样打电话`kmalloc`：

```
physical_pointer0 = kmalloc(number_of_bytes, GFP_DMA); 
```

并打印这样的结果：

```
 printk(KERN_INFO "pinmem:pinmen_write kmalloc succeeded.  pointer is %p, buffer size is %d\n", physical_pointer0, (unsigned)number_of_bytes); 
```

这就是我所看到的：

```
Sep  9 00:29:45 nfellman_lnx kernel: [  112.161744] pinmem:pinmen_write kmalloc succeeded.  pointer is ffff880000180000, buffer size is 320800 
```

如果我使用 GFP_DMA，如何获得`0xffff880000180000`不适合 24 位的指针？

难道这不是我的内存块的物理地址？如果不是（这意味着我完全误解`kmalloc`了），我怎样才能得到它的物理地址？

* * *

我在 OpenSuse 12 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T06:57:35.377

这个问题的答案似乎是它`kmalloc`实际上并没有返回一个物理指针，而是一个线性指针，我必须将它转换为物理指针`virt_to_phys`。

感谢[Alex Brown在](https://stackoverflow.com/users/121332/alex-brown "亚历克斯布朗在 Stackoverflow 上")[这里](https://stackoverflow.com/a/12346036/1084 "回答“kmalloc 如何返回大于物理地址大小的物理地址？”")提供答案。

# php - 使用 Codeigniter 2 和 Oracle 11g 执行存储过程

> ID：12337917
> 
> 赞同：1
> 
> 时间：2012-09-09T09:20:29.850
> 
> 标签：php, oracle, stored-procedures, oracle11g, codeigniter-2

一个小时以来，我在 Codeigniter 2 中执行 oracle 存储过程时遇到问题。我无法找到 CI+存储过程的正确文档。

**我的存储过程：**

```
CREATE OR REPLACE 
PROCEDURE SP_DISTRICT_INSERT(P_DST_NAME VARCHAR2, FLAG VARCHAR2 Default '0',P_USER_ID Number) AS

PKEY NUMBER:=0;

         BEGIN

             SELECT MAX(NVL(DST_ID,0))+1 INTO PKEY FROM DISTRICT ;

      INSERT INTO DISTRICT(DST_ID, DST_NAME, USER_ID, ENTERED_DATE, FLAG) VALUES(PKEY,P_DST_NAME,P_USER_ID,SYSDATE ,FLAG);

     COMMIT ;

EXCEPTION

        WHEN OTHERS THEN

 RAISE_APPLICATION_ERROR (-20001,PKEY|| 'INVALID_NO'|| P_DST_NAME|| 'DATAMISMATCH'|| SQLERRM, TRUE) ;

END SP_DISTRICT_INSERT ; 
```

**我像这样在我的模型中执行存储过程**

```
$ins=$this->db->query("call SP_DISTRICT_INSERT('abcdxyz',1,1)"); 
```

**显示错误的页面**

```
Error Number:

call SP_DISTRICT_INSERT('abcdxyz',1,1)

Filename: D:\xampp\htdocs\..\database\DB_driver.php

Line Number: 330 
```

**然而，**

如果我直接从 Navicat 调用程序，它可以工作

任何帮助将不胜感激。

**PS**我正在使用 Codeigniter 2 和 Oracle 11g

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-24T10:29:42.283

```
$rsponse = '';
    $s = oci_parse($this->db->conn_id, "begin packageName.procedureName(:bind1,:bind2,:bind3,:bind4,:bind5); end;");
               oci_bind_by_name($s, ":bind1", $data['fieldOne'],300);
               oci_bind_by_name($s, ":bind2", $data['fieldTwo'],300);
               oci_bind_by_name($s, ":bind3", $data['fieldThre'],300);
               oci_bind_by_name($s, ":bind4", $data['fieldFour'],300);
               oci_bind_by_name($s, ":bind4", $response,300);
               oci_execute($s, OCI_DEFAULT); 
echo $message; // returned value 
```

n 上述示例过程接受四个参数作为输入，一个参数作为输出。如果是直接调用程序，请删除“packageName”。就是这样...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T06:02:24.587

那么问题是数据库字段长度。场景是表单提交后，输入的字符串被转换成unicode格式，比如`&#129;`. 因此，如果数据库字段长度为 10，并且我输入了 4 个字符的字符串，则程序返回错误，因为 4 个字符在转换为 unicode 格式时变成了大约 24 个字符，这比数据库字段中允许的长度大。

# php - php 如何将 MySQL 数据抓取到多维数组中

> ID：12337921
> 
> 赞同：0
> 
> 时间：2012-09-09T09:21:55.617
> 
> 标签：php, mysql, multidimensional-array

```
mysql_select_db($my_db, $con);
$result = mysql_query("SELECT * FROM word_test");
$i=1;

while($row = mysql_fetch_array($result))
{

  $a = array(
    $i => array(
      0 => $row['question'],
      1 => $row['op_1'],
      2 => $row['op_2'],
      3 => $row['op_3'],
      4 => $row['op_4'],
      6 => $row['ans']
    ),
  );
  $i=$i+1;

}//while loop ended     
print_r($a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:34:04.057

您将在`$a`循环的每次迭代中覆盖数组。拉出`$a`循环外的定义，并使用[array_push](http://php.net/manual/en/function.array-push.php)追加每一行：

```
$a = array();
while($row = mysql_fetch_array($result))
{
    $i => array(
        0 => $row['question'],
        1 => $row['op_1'],
        2 => $row['op_2'],
        3 => $row['op_3'],
        4 => $row['op_4'],
        6 => $row['ans']
    );
    array_push($a, $i);
    $i=$i+1;
} 
```

# c - 两个线程可以同时读取同一个 CONST 内存块吗

> ID：12337926
> 
> 赞同：2
> 
> 时间：2012-09-09T09:22:30.063
> 
> 标签：c, windows, linux, cpu, memory-access

内存块在程序开始时被初始化和设置并且没有改变（CONST）。例如：

静态常量 int a = 10;

如果它依赖于环境/架构，那么这些设置是否安全：

*   英特尔/AMD
*   赢/Linux 32/64位
*   每个核心的线程或一个核心的所有线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:26:14.293

为所有架构阅读 const 是安全的

# jquery - jQuery Datepicker 有时只显示

> ID：12337930
> 
> 赞同：0
> 
> 时间：2012-09-09T09:23:02.760
> 
> 标签：jquery, jquery-ui

我在表单中添加了一个简单的 jQuery datepicker，一点也不复杂。

出于某种原因，在 IE9 中（没有测试过 IE8），它有时只显示。如果您不断刷新页面，有时会显示，有时不会。

该页面是[http://hotel.danielblackmore.co.uk](http://hotel.danielblackmore.co.uk)（它位于右上角的可用性检查器。

我已将其剥离并再次重新添加等，但有时仍仅显示。

Datepicker 在 jquery 网站上显示正常，所以我确定它是我所做的，但我无法解决这个问题。

有没有人经历过这个？

我的代码是：

```
 <script src="java/jquery.min.js" type="text/javascript"></script>
    <script src="java/jquery-ui.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="styles/jquery-ui.css" type="text/css" media="all" />
    <link rel="stylesheet" href="styles/ui.theme.css" type="text/css" media="all" />
    <link rel="stylesheet" href="styles/styles.css" type="text/css" media="all" />

    <script type="text/javascript">

        var $myBadDates = new Array                ("09/05/2011","13/09/2012","12/09/2012","26/09/2012","27/09/2012","15/05/2020");

        function checkBadDates(mydate){
        var $return=true;
        var $returnclass ="available";
        $checkdate = $.datepicker.formatDate('dd/mm/yy', mydate);
        for(var i = 0; i < $myBadDates.length; i++)
            {    
               if($myBadDates[i] == $checkdate)
          {
                $return = false;
                $returnclass= "unavailable";
                }
            }
        return [$return,$returnclass];
        }

        $(function() {
            $( "#arriving" ).datepicker({
                showOn: "button",
                buttonImage: "images/calendar.gif",
                buttonImageOnly: true,
                dateFormat: "dd/mm/yy",
                minDate: new Date(2012, 9 - 1, 9),
                beforeShowDay: checkBadDates,

            });

            $( "#departing" ).datepicker({
                showOn: "button",
                buttonImage: "images/calendar.gif",
                buttonImageOnly: true,
                dateFormat: "dd/mm/yy",
                minDate: new Date(2012, 9 - 1, 9),
                beforeShowDay: checkBadDates,

            });
        });
        </script> 
```

我也试过没有禁用日功能，没有运气

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:28:25.083

问题很可能是脚本正在运行并尝试在加载 DOM 之前执行。（这也可以解释为什么它有时会随机工作，但有时却不能。）将 Javascript 代码放在一个`$(document).ready(function() { ... });`块中。

更好的是，将脚本块移动到文档的末尾——这是最好的方法，因为它允许在脚本加载时加载并显示文档的其余部分。

# javascript - 动态更新jQuery jqPlot的canvasOverlay属性

> ID：12337931
> 
> 赞同：2
> 
> 时间：2012-09-09T09:23:15.177
> 
> 标签：javascript, jquery, jqplot

我想动态更新 jQuery jqPlot 的 canvasOverlay 属性。这将在我的 jqPlot 中提供时间线的效果。此效果应该类似于此[jFiddle](http://jsfiddle.net/5QA8r/93/)中显示的效果。但是，我想`canvasOverlay`每秒更新一次属性，而不是绘制点：

```
 canvasOverlay: {
                    show: true,
                    objects: [
                        { rectangle: { xmax: new Date(), xminOffset: "0px", xmaxOffset: "0px", yminOffset: "0px", ymaxOffset: "0px",
                                            color: "rgba(0, 0, 0, 0.1)", showTooltip: true } },
                    ]
                } 
```

我怎样才能做到这一点？我应该使用哪些功能？

更新：

我的想法是做这样的事情：

```
 canvasOverlay: {
                        name: 'current',
                        show: true,
                        objects: [
                            { rectangle: { xmax: new Date(), xminOffset: "0px", xmaxOffset: "0px", yminOffset: "0px", ymaxOffset: "0px",
                                                color: "rgba(0, 0, 0, 0.1)", showTooltip: true } },
                        ]
                    } 

/...

var co = plot.plugins.canvasOverlay;
var current = co.get('current');

current.options.objects.rectangle.xmax = new Date();
co.draw(plot); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T10:17:32.040

我找到了答案。希望它可能对某人有用：

```
canvasOverlay: {
                        show: true,
                        objects: [
                            { 
                                rectangle: { 
                                    name: 'current',
                                    xmax: new Date(), 
                                    xminOffset: "0px", 
                                    xmaxOffset: "0px", 
                                    yminOffset: "0px", 
                                    ymaxOffset: "0px",
                                    color: "rgba(0, 0, 0, 0.1)", 
                                    showTooltip: true 
                                } 
                            },
                 ]
             } 

                $('#buttonNext').bind("click", function() {
                    counter++;
                    UpdateTimeline(plot1);
                });

                $(document).ready(function() {
                    $('#buttonNext').click();
                });

                window.setInterval(function(){
                    $('#buttonNext').click();
                }, 1000);

function UpdateTimeline(plot1) {
                    var co = plot1.plugins.canvasOverlay;
                    co.get("current").options.xmax = new Date();
                    co.draw(plot1);
                    plot1.replot();                 
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-21T16:43:35.620

我有一个类似的问题，但还需要能够动态添加额外的覆盖（不仅仅是修改现有的）。

我使用以下方法使用新的/修改的覆盖对象数组重绘图表：

```
var chart = $.jqplot(...);
var overlayObjects = getOtherOverlayObjects();
chart.plugins.canvasOverlay = new $.jqplot.CanvasOverlay({
    show: true,
    objects: overlayObjects
});
chart.replot(); 
```

传递给 $.jqplot.CanvasOverlay() 函数的参数与最初传递给 $.jqplot() 的 canvasOverlay-options 具有相同的结构。

# android - Android开发应用程序在启动时崩溃

> ID：12337933
> 
> 赞同：0
> 
> 时间：2012-09-09T09:23:38.547
> 
> 标签：android, listview, android-arrayadapter

我目前正在开发一个包含自定义的应用程序`ListView`。我开发了一个自定义阵列适配器。我认为我的应用程序在这里崩溃：

```
ListView DirectoryView = (ListView) findViewById(R.id.fileListView); 
```

所以我认为错误在activity_main.xml中：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ListView
    android:id="@+id/fileListView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" >
</ListView> 
```

这是我的 LogCat：

```
09-09 11:19:21.254: E/Trace(1152): error opening trace file: No such file or directory (2)
09-09 11:19:21.484: D/AndroidRuntime(1152): Shutting down VM
09-09 11:19:21.484: W/dalvikvm(1152): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-09 11:19:21.504: E/AndroidRuntime(1152): FATAL EXCEPTION: main
09-09 11:19:21.504: E/AndroidRuntime(1152): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.teamdroid.explorer/com.teamdroid.explorer.MainActivity}: java.lang.NullPointerException
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.os.Looper.loop(Looper.java:137)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at java.lang.reflect.Method.invokeNative(Native Method)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at java.lang.reflect.Method.invoke(Method.java:511)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at dalvik.system.NativeStart.main(Native Method)
09-09 11:19:21.504: E/AndroidRuntime(1152): Caused by: java.lang.NullPointerException
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.Activity.findViewById(Activity.java:1825)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at com.teamdroid.explorer.listDirectory.getDirectory(listDirectory.java:20)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at com.teamdroid.explorer.MainActivity.onCreate(MainActivity.java:33)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.Activity.performCreate(Activity.java:5008)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-09 11:19:21.504: E/AndroidRuntime(1152):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-09 11:19:21.504: E/AndroidRuntime(1152):     ... 11 more 
```

请你帮帮我。我正在搜索此错误 2 天。谢谢！

**编辑：** 我有第三个文件，其中列出了一个目录`listview`：

```
 public class listDirectory extends ListActivity {

    String[] DirList;

    public void onCreate(Bundle icicle) {
        setContentView(R.layout.activity_main);
        super.onCreate(icicle);
    }   

    public void getDirectory (){
        MainActivity main = new MainActivity();
        String path = main.getPath();

        ListView DirectoryView = (ListView) findViewById(R.id.fileListView);
        CustomArrayAdapter adapter = new CustomArrayAdapter(getApplicationContext(), DirList);

        File file = new File(path);
        File[] FileList = file.listFiles();

        java.util.Arrays.sort(FileList);

        for(int i = 0; i < FileList.length; i++){
            if(FileList[i].isDirectory()){
                DirList[i] = (FileList[i].getName() + " [folder]");
            } else{
                DirList[i] = (FileList[i].getName() + " [file]");
            }
         }

         DirectoryView.setAdapter(adapter);
    }
} 
```

我认为在这个文件中是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T09:40:48.103

我认为您没有在 onCreate() 方法中设置内容视图，因此 findViewById 无法找到视图对象，因此返回 null。

假设您的 XML 布局文件是 my_layout.xml。在 onCreate(...) 里面添加这一行：

```
setContentView(R.layout.my_layout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-14T09:34:27.920

非常混乱的代码...

我认为在您的`MainActivity`新实例中`listDirectory`，不会`listDirectory.onCreate()`调用它，因此内容视图为空。所以`findViewById()`里面`listDirectory.getDirectory()`在listDirectory的内容视图中找到视图而不是MainActivity的，它是空的并导致NPE

# xmpp - XMPPFramework 我可以使用 XEP-0065 进行视频聊天吗

> ID：12337942
> 
> 赞同：0
> 
> 时间：2012-09-09T09:26:51.343
> 
> 标签：xmpp, xmppframework

我使用[ObjC XMPPFramework](https://github.com/robbiehanson/XMPPFramework)在我的应用程序中组织聊天（1-1，房间）。我们需要实施实时视频聊天。我知道，[Jingle](http://xmpp.org/about-xmpp/technology-overview/jingle/)是最好的解决方案，但它没有在 XMPPFramework 中实现。

但是，有 XEP-0065 实现，它说：

> 字节流可以是直接的（对等），使用的典型传输协议是 TCP，尽管也可以选择支持 UDP。

所以，我有一个想法——通过 XEP-0065 传输视频字节流

我可以这样做吗？

* * *

我知道，我只是在寻找更简单的方法来做到这一点。我明白了，Jingle 有很多 XEP - xmpp.org/about-xmpp/technology-overview/jingle - 我只需要 XEP-0166 还是我必须实现其他 XEP（例如 0167、0176）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T19:34:11.297

对于视频聊天，最简洁的方法是在客户端实现 XMPP Jingle 协议。

您需要查看规范：http: [//xmpp.org/extensions/xep-0166.html](http://xmpp.org/extensions/xep-0166.html)

据我所知，它没有在 XMPPFramework 中实现，因此您必须添加它。

# solr - 在 solr 方面查询搜索中使用通配符

> ID：12337944
> 
> 赞同：3
> 
> 时间：2012-09-09T09:27:20.223
> 
> 标签：solr, facet

如何在 solr 的 facet 查询中搜索单词（或者换句话说，如何在 facet 搜索中使用通配符）
例如，如果我有 facet 归档**MyField**并且它具有以下值：

```

1.  **ValX**值
2.  **ValX**
3.  ValZ ValW
4.  **阀值**阀值
5.  ValA **ValX**
6.  缬氨酸

```

现在如果我搜索`fq=MyField:ValX`，我只会得到第二条记录。如何搜索 ValX 并获得第 1、2、4 和 5 条记录？
你知道`fq=MyField:*ValX*`是不允许的，`fq=MyField:ValX*`也不会返回第 5 条记录。
任何想法都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T15:09:50.687

在 schema.xml 中 MyField 是如何定义的？在我看来好像它没有被标记化，例如

```
type="string" 
```

和

```
type="text" 
```

字段值被标记化，以便

```
fq=MyField:valx 
```

应匹配 1、2、4 和 5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T14:21:04.750

[Facet Query 上的通配符应该可以工作](http://blog.shutupandcode.net/?p=1425)。

由于通配符查询不经过任何分析，您可以尝试`fq=MyField:valx*`

您正在尝试的不是过滤，而是搜索。
使用带有小写过滤器和搜索的空格标记器，`q=MyField:valx`它会匹配结果。您也可以使用前缀和通配符查询。

# c++ - 数组声明和寻址

> ID：12337947
> 
> 赞同：-1
> 
> 时间：2012-09-09T09:28:02.750
> 
> 标签：c++, compiler-construction, compiler-errors

我有几个直截了当的问题：-

1.  根据普通的 c++ 编译器，以下内容是否正确？

    ```
    int arr[3][4];
    void func(int *a, int m, int n)
    {
     int i,j;
     cin>>i>>j; 
     cout<< a[i*n + j]; //is this way of addressing correct provided 0<=i<m and 0<=j<n
    } 

    int main()
    {
     func((int*)arr, 3,4);
    } 
    ```

2.  如果数组的边界严格必须是一个常量表达式，为什么以下不会产生编译器错误？

    ```
    int func(int m, int n)
    {
     int arr[m][n]; //m and n are not known until run time
    } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:31:17.927

> 根据普通的 c++ 编译器，以下内容是否正确？

是的，因为标准规定即使超过 1 维的数组在内存中也是连续的。**但！**您有点误解了数组索引和长度 - i 和 j 必须分别*严格小于*3 和 4。3 和 4 是数组在其二维中的大小，而*不是*最大可能的下标。

> 如果数组的边界严格必须是一个常量表达式，为什么以下不会产生编译器错误？

也许您正在使用支持此扩展的编译器（想想 GCC、Clang 等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T09:36:47.867

当您使用未初始化的 i 和 j 值访问数组时，这实际上是**未定义的行为。**`a`否则，如果您正确使用计算数组索引（在范围内），那么它是有效的。

在您的情况下，您可能正在对[可变长度数组](http://gcc.gnu.org/onlinedocs/gcc-4.3.5/gcc/Variable-Length.html#Variable-Length)使用 gcc 扩展。

# android - SimpleJSON C++ 类无法在 Android (NDK) 上解析字符串，但同一类可在所有其他平台上运行

> ID：12337949
> 
> 赞同：5
> 
> 时间：2012-09-09T09:28:21.517
> 
> 标签：android, c++, android-ndk, cocos2d-x, wchar-t

我已经成功地将我的游戏移植到了 Cocos2d-x，它在 Linux、QNX、iOS 和 Mac 上运行良好。我还设置了 Android NDK，并且能够在 Android 上成功构建和运行应用程序（全部来自完全相同的来源，这真的很整洁！）

然而，在 Android 上发生了一件奇怪的事情：我使用的 SimpleJSON.cpp 类无法解析格式正确的 JSON 字符串。我使用这个框架：[https ://github.com/MJPA/SimpleJSON](https://github.com/MJPA/SimpleJSON)

我已经查看了代码，但我不是 CPP 专家，看不出它有什么问题（如果有的话）（它适用于除 Android 之外的所有平台，并且编译得很好）。

我确实注意到该类非常广泛地使用 wchar_t，而且我也知道这可能是 Android 上的一个问题。

无论如何，在过去的 48 小时里，我一直在想办法让这个东西正常工作，但我失败了。有没有人可以指出我正确的方向？

是否有我忘记设置的编译器选项？这门课就不能在 Android 上运行吗？如何更改类以使其在 Android 上也能正常运行？

欢迎所有提示。

Rgds。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-13T14:57:35.947

确保使用最新的框架。还要在代码中查找#if defined(ANDROID)，可能编译为Android时有错误。

# django - 如何提供存储在 cassandra 数据库中的图像？

> ID：12337952
> 
> 赞同：4
> 
> 时间：2012-09-09T09:28:49.007
> 
> 标签：django, apache, nginx, cassandra

对于 django 项目，我计划将 jpeg 存储到 cassandra 数据库中。为网站提供图片的最佳方式是什么？我已经计划构建自己的 wsgi 模块，但有没有更好的方法：是否存在 nginx 或 apache 模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:05:47.120

我们使用带有缓存层（磁盘和内存，例如[Varnish](https://www.varnish-cache.org/) ）的 PHP 提供来自 Cassandra 的小文件（< 5 MB ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T13:53:56.387

Astyanax 支持文件流进出 cassandra。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T00:43:01.517

你可以使用我开发的 openresty 和[Lua CQL 客户端。](https://github.com/jbochi/lua-resty-cassandra/blob/master/README.md)

用法将是这样的：

```
cassandra = require("cassandra")
local session = cassandra.new()
session:set_timeout(1000)
assert(session:connect("127.0.0.1", 9042))
assert(session:set_keyspace("images"))
local rows, err = session:execute("SELECT * from chunks where chunk_id = ?", {chunk})
if not rows or #rows == 0 then
  return ngx.exit(ngx.HTTP_NOT_FOUND)
end
local data = rows[1].data
ngx.header.content_type = "image/jpeg"
ngx.header.content_length = #data
ngx.print(data) 
```

# awk - 如何用awk删除一行中的特定单词？

> ID：12337957
> 
> 赞同：1
> 
> 时间：2012-09-09T09:30:02.127
> 
> 标签：awk

我有一个如下所示的文本文件。我只需要 > 符号后的 PDB ID。我怎样才能用 awk 做到这一点？

```
>results for sequence "files/1H8U.pdb" starting "ASPILEGLUGLY"
DIEGREKQQPSRVS
>results for sequence "files/1P6K.pdb" starting "ILEALALYSASP"
IAKDVAKEGSDGATKQRTHPQDSASI 
```

期望的输出

```
>1H8U
DIEGREKQQPSRVS
>1P6K
IAKDVAKEGSDGATKQRTHPQDSASI 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:40:44.453

我可能会用`sed`这个，但这里是`awk`：

```
awk '/^>/ { sub (/[^\/]+\//,">", $0); sub (/\..+/, "", $0) }1' file.txt 
```

这是`sed`：

```
sed -r '/^>/s%[^/]+/%>%;s%\..+%%' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T13:19:05.130

这可能对您有用：

```
awk -F[/.] '/^>/{$1=">"$2;NF=1};1' file 
```

或者：

```
sed '/^>.*\/\([^.]*\)\..*/s//>\1/' file 
```

# apache - 重写规则问题

> ID：12337960
> 
> 赞同：0
> 
> 时间：2012-09-09T09:30:20.673
> 
> 标签：apache, .htaccess, url, rewrite

我的 Apache Rewrites 似乎有问题

```
RewriteEngine on

RewriteBase / 
RewriteRule ^wordpress/?$ / [NC,L,R=301] 

RewriteRule ^/$ wordpress/ [NC,L] 
```

我只需要从 URL 中删除 /wordpress，因为我在 Wordpress 中有页面我希望被视为主目录

目前的网址是

domain.com/wordpress/blog

我宁愿没有 /wordpress，而是 domain.com/blog

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T09:35:42.107

```
RewriteEngine on
RewriteBase /
RewriteRule ^wordpress/(.*)$ blog/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T06:39:24.050

> 目前的网址是
> 
> domain.com/wordpress/blog
> 
> 我宁愿没有 /wordpress，而是 domain.com/blog

因此，如果有人向没有位的 URL发出请求，您似乎想要**重定向**浏览器，然后在内部将位**重写***回 URI*？这绝对是可行的，但如果你在某处有 wordpress 重写规则，它们根本不会相互配合。`domain.com/wordpress/``wordpress`**`wordpress`**

 ***目录中的任何规则`/wordpress`都将取代您放在文档根目录中的任何规则，这是这些规则需要去的地方，并且您的 remove-the-wordress-from-URI 规则将被完全忽略。即使您打开了规则继承，`/wordpress`目录中的规则也会首先执行。

如果您所有的 wordpress 规则实际上都在文档根目录的 htaccess 文件中，那么只需确保将这些放在wordpress**之前：**

```
RewriteEngine on
RewriteBase / 

# redirect the browser if someone makes a request for domain.com/wordpress/
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /wordpress/
RewriteRule ^/?wordpress/(.*)$ /$1 [L,R=301]

# internally rewrite the wordpress bit back into the URI
RewriteRule %{DOCUMENT_ROOT}/wordpress%{REQUEST_URI} -f [OR]
RewriteRule %{DOCUMENT_ROOT}/wordpress%{REQUEST_URI} -d
RewriteRule ^(.*)$ /wordpress/$1 [L] 
```***

# php - Facebook 如何跟踪查看的帖子？

> ID：12337969
> 
> 赞同：0
> 
> 时间：2012-09-09T09:31:12.557
> 
> 标签：php

我正在开发一个用户可以发布的应用程序。我想在提交他们没有看到的新帖子时提醒用户。整个过程基本上就是facebook的设置方式。但是，我想知道如何跟踪用户已经看过的帖子。

Facebook是如何做到这一点的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T09:36:02.937

每当用户查看帖子（**发出返回所述帖子的请求**）时，向表中添加一个条目`views`。这是一个简单的图表

![意见](../Images/22445ae48fb8fc16525938f679d5fc18.png)

这样你就知道哪个用户查看了什么。此外，您可以添加一个`timestamp`字段来跟踪用户查看帖子的*时间。*

因此，如果您想知道谁查看了该帖子`666`，您可以简单地

```
SELECT DISTINCT u.user_id
FROM users u
INNER JOIN views v ON u.user_id = v.user_id
WHERE v.post_id = 666 
```

您还可以检查用户是否查看了某个帖子，以便您决定是否提醒他

```
SELECT DISTINCT u.user_id
FROM users u
INNER JOIN views v ON u.user_id = v.user_id
WHERE v.post_id = 666 AND v.user_id = 1000 
```

你可以工作一个简单的逻辑

```
if (lastQueryReturnedAResult){
   //User had seen the post
}else{
   alertUser();
   viewPostInDifferentColor();
} 
```

**注意：**这并不是 Facebook 真正的做法，因为这种方法不能很好地扩展。但这是基本思想。

# jquery - 如何使用 jQuery 选择 raphael svg 标签？

> ID：12337971
> 
> 赞同：0
> 
> 时间：2012-09-09T09:31:17.427
> 
> 标签：jquery, svg, raphael

我对 Raphael 很陌生，在它的文档中也很迷失......

我想通过 jQuery 操作一个 Raphael 对象：

```
$(".handle").hover(
               function() {
                     $("path[rel='"+$(this).attr('rel')+"']").addClass("pathhover");
               }, 
               function() {
                    $("path").removeClass("pathhover");
               }
            ); 
```

Path 是 Raphael 生成的路径，jQuery 似乎无法选择这个 svg 标签。

你知道如何实现这一目标吗？

谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T15:12:10.770

这是一个解决方案，感谢jacktheripper的帮助。

拉斐尔对象不能被jQuery直接操作；我们需要使用它对 DOM 的引用（它的[node](http://raphaeljs.com/reference.html#Element.node)）。

因此，jQuery 处理程序需要 Raphael 对象名称。在此示例中，我使用 rel 标签来存储 raphael 对象的名称。

```
$(".handle").hover(
               function() {
                     var path=eval($(this).attr('rel'));
                     path.node.setAttribute("class","pathhover");
               }, 
               function() {
                    var path=eval($(this).attr('rel'));
                    path.node.removeAttribute("class","pathhover");
               }
            ); 
```

# charts - 在 LineChart 中显示矩形

> ID：12337974
> 
> 赞同：0
> 
> 时间：2012-09-09T09:31:33.823
> 
> 标签：charts, javafx

如何在 javafx.scene.chart.LineChart 中显示 Rectangle 对象？将这样的数据添加到图表系列似乎没有帮助

```
new XYChart.Data<Number, Number>(point.getX(), point.getY(), 
        new Rectangle(point.getX(), point.getY(), 10, 10) {{
            setFill(Color.BLACK);
        }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T10:15:51.030

XYChart.Data 构造函数的 3d 参数是一个额外的值而不是节点值:)

# ruby-on-rails - rails g迁移错误

> ID：12337975
> 
> 赞同：0
> 
> 时间：2012-09-09T09:31:38.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不知道该怎么办。尝试使用命令

```
$ rails g migration vacancy 
```

但是这个命令给了我错误：

```
 invoke  active_record
/home/proger/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): mapping values are not allowed in this context at line 21 column 11 (Psych::SyntaxError)
    from /home/proger/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
    from /home/proger/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:151:in `parse'
    ... 
```

错误代码中有很多行

不知道怎么解决 谢谢

**更新**

> 开发：
> 适配器：mysql2
> 编码：utf8
> 重新连接：false
> 数据库：作业
> 池：5
> 用户名：root
> 密码：toor
> 套接字：/var/run/mysqld/mysqld.sock

**更新：** 使用 sqlite3 没有问题。mysql gem 中的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T09:33:44.930

看来您在 yaml 文件中有语法错误。大概是在`config/database.yml`

# c# - Jquery Post & ASP.NET MVC Anti-ForgeryToken 验证

> ID：12337978
> 
> 赞同：2
> 
> 时间：2012-09-09T09:32:04.277
> 
> 标签：c#, c#-4.0, jquery, antiforgerytoken, jquery-post

在我的控制器中，

```
 [HttpPost]
        [OutputCache(CacheProfile = "Short", VaryByParam = "id", VaryByCustom = "none")]
        [ValidateAntiForgeryToken(Salt = @ApplicationEnvironment.SALT)]
        public ActionResult username(string id) {
            try {
                if (id == null || id.Length < 3)
                    return Json(false, JsonRequestBehavior.AllowGet);

                var member = Membership.GetUser(id);

                if (member == null) {
                    //string userPattern = @"^([a-zA-Z])[a-zA-Z_-]*[\w_-]*[\S]$|^([a-zA-Z])[0-9_-]*[\S]$|^[a-zA-Z]*[\S]$";
                    string userPattern = "[A-Za-z][A-Za-z0-9._]{5,14}";
                    if (Regex.IsMatch(id, userPattern))
                        return Json(true, JsonRequestBehavior.AllowGet);
                }

            } catch (Exception ex) {
                CustomErrorHandling.HandleErrorByEmail(ex, "Validate LogName()");
                return Json(false, JsonRequestBehavior.AllowGet);
            }
            //found e false
            return Json(false, JsonRequestBehavior.AllowGet);

        } 
```

在我看来，我这样做是为了发布，我能够使用 HTTP Get 检索 getJSON 的数据。问题是，当用户在名称中添加一个空格时，它不会验证并给出 404。所以我认为我可以使用 post 方法执行此操作，但似乎我无法发送我的登录名，因为我是通过序列化在数据中发送 Antiforgery 令牌...

有人可以帮忙吗？我将感激不尽。

```
@{
    string SALT = ApplicationEnvironment.SALT;
}

<script type="text/javascript" defer="defer">
    $(function () { 
        if($("#LogName").length > 0){

            $("#LogName").blur(function(){
                var logValidate = "/Validation/username/" + $("#LogName").val();
                //anti-forgery token works don't need to create the input field here but if I pass the logname into the form as an input then if a user puts double quote/single quote then it will also crash.. so is there any other way around. 
                var data = $('<form>@Html.AntiForgeryToken(SALT)</form>').serialize();
                $.post(logValidate, data, function (json) {
                    alert(json);
                });
            });
            $("#Email").blur(function(){
                var emailValidate = "/Validation/email/" + $("#Email").val();

                alert("got it");
            });
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T12:52:17.013

发送请求时，您如何通过 jquery 获取防伪令牌的值？将您的防伪密钥生成为隐藏字段：

```
@Html.AntiForgeryToken() 
```

查看源代码并调整“#__RequestVerificationToken”选择器

```
var antiForgeryVal = $('#__RequestVerificationToken').val();
data["__RequestVerificationToken"] = antiForgeryVal ;
$.post(logValidate, data, function (json) {
    alert(json);
}); 
```

# c# - 带有过滤器的 Lucene 空查询字符串

> ID：12337979
> 
> 赞同：2
> 
> 时间：2012-09-09T09:32:35.023
> 
> 标签：c#, java, lucene, lucene.net

我在个人项目中使用 Lucene.Net，需要处理案例，但找不到一个好方法让 lucene 使用相同类型的查询来处理这两个案例。

基本查询使用 MultiFieldQueryParser 和 StandardAnalyzer 和 NumericRangedFilter 来按日期过滤（日期保存为长值）。

问题是我希望过滤器处理空搜索字符串，而不必使用两个不同的查询解析器，一个用于空搜索字符串，一个用于用户输入搜索字符串。当前，当使用空字符串时，MultiFieldQueryParser 会引发 ParseException。

有关处理此问题的最佳方法的任何建议？或者这是 Lucene 或 Lucene.Net 中的一个缺陷（有意或无意）。

**结果**

如果查询字符串为空，则我最终使用 MatchAllDocsQuery，否则使用普通查询。

此外，我不得不删除 NumericFields 和 NumericRangeFilter 的使用，因为当我使用它们时查询没有返回任何结果。我最终使用字符串和普通 RangeFilter 以旧方式进行日期范围过滤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T20:43:36.117

处理它的最佳方法是生成 a`MatchAllDocsQuery`并在输入为空字符串时绕过解析器。

[http://lucene.apache.org/core/old_versioned_docs/versions/2_9_4/api/all/org/apache/lucene/search/MatchAllDocsQuery.html](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_4/api/all/org/apache/lucene/search/MatchAllDocsQuery.html)

# javascript - Javascript正则表达式：如果没有被字母包围，则删除空格

> ID：12337983
> 
> 赞同：2
> 
> 时间：2012-09-09T09:33:38.193
> 
> 标签：javascript, html, regex

我正在尝试使用 javascript 清理一些 html 文本，在某些单词之前和之后包含空格（文本格式不正确）。

目前我有这个正则表达式：

```
$("#" + target + " *").replaceText(/([\S][\u05B0-\u05C4]*)/gi, '<span class="marked">$1<\/span>'); 
```

这将捕获所有非空白字符并将它们包装在 span 元素中，但不会捕获单词之间的空格（我需要 span）。

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:16:15.473

这将匹配多个重复`的（空格）并将它们替换为单个空格：`

 ````
'Quick   Brown      Fox'.replace(/[ ]+/g, ' '); //returns 'Quick Brown Fox' 
```

这将匹配多个重复`\n\r\t`的（空白符号 - 空格、制表符、换行符和换行符）并将它们替换为单个空格：

```
'Quick     Brown    Fox'.replace(/\s+/g, ' ');  //returns 'Quick Brown Fox' 
```

[摆弄](http://jsfiddle.net/ovfiddle/KctX7/)

我不明白你对你试图通过`span`环绕实现什么的解释，但你可以用上面的输出做任何你想做的事情。`

# c - C -- 基本结构问题

> ID：12337985
> 
> 赞同：0
> 
> 时间：2012-09-09T09:33:59.600
> 
> 标签：c, struct

所以我现在正在尝试学习 C，并且我有一些基本的结构问题想要解决：

基本上，一切都围绕着这段代码：

```
#include <stdio.h>
#include <stdlib.h>

#define MAX_NAME_LEN 127

typedef struct {
    char name[MAX_NAME_LEN + 1];
    unsigned long sid;
} Student;

/* return the name of student s */
const char* getName (const Student* s) { // the parameter 's' is a pointer to a Student struct
    return s->name; // returns the 'name' member of a Student struct
}

/* set the name of student s
If name is too long, cut off characters after the maximum number of characters allowed.
*/
void setName(Student* s, const char* name) { // 's' is a pointer to a Student struct |     'name' is a pointer to the first element of a char array (repres. a string)
    s->name = name;
}

/* return the SID of student s */
unsigned long getStudentID(const Student* s) { // 's' is a pointer to a Student struct
    return s->sid;
}

/* set the SID of student s */
void setStudentID(Student* s, unsigned long sid) { // 's' is a pointer to a Student struct | 'sid' is a 'long' representing the desired SID
    s->sid = sid;
} 
```

我已经对代码进行了注释，以巩固我对指针的理解；我希望他们都是准确的。

所以无论如何，我觉得 setName 和 setStudentID 不正确，但我不确定为什么。有人可以解释吗？谢谢！

编辑：

```
 char temp
 int i;
 for (i = 0, temp = &name; temp != '\0'; temp++, i++) {
     *((s->name) + i) = temp; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T09:36:33.677

你不是用这个复制全名数组

```
void setName(Student* s, const char* name) { 
   s->name = name;
} 
```

试试这个

```
strcpy(s->name,name); 
```

将此字符串复制到您的结构数组。您不能像当前那样简单地将指针参数分配给数组变量。您需要将指向的每个字符复制到`name`数组的元素中`s->name`。这就是`strcpy`将要执行的操作 - 它将元素从源复制到目标，直到找到终止的空字符。

编辑：或者，您可以`strncpy`按照评论中的建议使用。检查这个问题及其答案，看看为什么有些人认为这是个好主意[为什么你应该使用 strncpy 而不是 strcpy？](https://stackoverflow.com/questions/1258550/why-should-you-use-strncpy-instead-of-strcpy)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T09:35:41.610

> ```
> s->name = name; 
> ```

因为`s->name`是一个数组，**所以你不能分配给它**（它不是一个可修改的左值）——它应该是一个编译器错误。您将不得不`strcpy`或`memcpy`进入它，但请确保`name`不要太大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T09:36:43.213

setStudentID 非常好，但 setStudentName 不是。您正在尝试将 char* 分配给数组，但这是行不通的。您必须使用一个按元素复制它的函数，例如[strcpy](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)。

# java - 将 JText 字段值绑定到 Info 类

> ID：12337986
> 
> 赞同：2
> 
> 时间：2012-09-09T09:34:03.103
> 
> 标签：java, swing, data-binding, jtextfield, documentlistener

有没有办法将 Swing JTextFields 自动绑定到 Info Class。例如

```
 private JTextField receiptId;
 private JTextField Id;

 public class Info {
  private string receiptId;
  private String id;

  // Getters and Setters
  } 
```

当我从 Swing 页面输入值然后自动将值与我的 Info 类绑定时，有什么办法吗？之后，我可以将我的 Info 对象传递给其他类，而不是发送所有文本字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T09:52:11.957

这种“绑定”通常使用[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)完成。

调用你的 setter`Info.setReceiptId()`和`Info.setId()`从你的每个`JTextFields`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T16:43:45.910

这是您复制粘贴乐趣的有效解决方案:)

这是施展魔法的听众.. ;)

```
public class BindingListener implements DocumentListener {
    private ModelObject model;
    private String fieldName;

    public BindingListener(ModelObject model, String fieldName) {
        this.model = model;

        String firstChar = String.valueOf(fieldName.charAt(0));
        if (firstChar.equals(firstChar.toLowerCase())) {
            fieldName = firstChar.toUpperCase()
                    + fieldName.substring(1, fieldName.length());
        }

        this.fieldName = fieldName;
    }

    @Override
    public void insertUpdate(DocumentEvent e) {
        dataUpdated(e);
    }

    @Override
    public void removeUpdate(DocumentEvent e) {
        dataUpdated(e);
    }

    @Override
    public void changedUpdate(DocumentEvent e) {
        dataUpdated(e);
    }

    private void dataUpdated(DocumentEvent e) {
        try {
            String text = e.getDocument().getText(
                    e.getDocument().getStartPosition().getOffset(),
                    e.getDocument().getEndPosition().getOffset() - 1);
            System.out.println("Entered text: " + text);
            System.out.println("Field to be updated: " + fieldName);

            System.out.println("Old model values: " + model);

            Method method = model.getClass().getDeclaredMethod(
                    "set" + fieldName, String.class);
            method.invoke(model, text);

            System.out.println("New model values: " + model);
        } catch (BadLocationException e1) {
            e1.printStackTrace();
        } catch (NoSuchMethodException e1) {
            e1.printStackTrace();
        } catch (SecurityException e1) {
            e1.printStackTrace();
        } catch (IllegalAccessException e1) {
            e1.printStackTrace();
        } catch (IllegalArgumentException e1) {
            e1.printStackTrace();
        } catch (InvocationTargetException e1) {
            e1.printStackTrace();
        }
    }
} 
```

假设您的模型对象看起来像下面的类。

```
public class ModelObject {
    private String field1;
    private String field2;

    /**
     * @return the field1
     */
    public String getField1() {
        return field1;
    }

    /**
     * @param field1
     *            the field1 to set
     */
    public void setField1(String field1) {
        this.field1 = field1;
    }

    /**
     * @return the field2
     */
    public String getField2() {
        return field2;
    }

    /**
     * @param field2
     *            the field2 to set
     */
    public void setField2(String field2) {
        this.field2 = field2;
    }

    @Override
    public String toString() {
        return "ModelObject [field1=" + field1 + ", field2=" + field2 + "]";
    }
} 
```

假设您的 GUI 正在处理这样的代码..

```
JTextField textField1 = new JTextField();
textField1.setPreferredSize(new Dimension(100, 25));
JTextField textField2 = new JTextField();
textField2.setPreferredSize(new Dimension(100, 25));
panel.add(textField1);
panel.add(textField2);

ModelObject model = new ModelObject();

textField1.getDocument().addDocumentListener(new BindingListener(model, "field1"));
textField2.getDocument().addDocumentListener(new BindingListener(model, "field2")); 
```

更新：这里还有一些示例输出..

```
Entered text: x
Field to be updated: Field1
Old model values: ModelObject [field1=null, field2=null]
New model values: ModelObject [field1=x, field2=null]
Entered text: y
Field to be updated: Field2
Old model values: ModelObject [field1=x, field2=null]
New model values: ModelObject [field1=x, field2=y] 
```

# django - 用户的 Django 模型，例如，类似页面的情况

> ID：12337989
> 
> 赞同：2
> 
> 时间：2012-09-09T09:34:19.313
> 
> 标签：django, schema, models

我有一个用户模型和另一个页面模型。现在我想实现类似 Facebook 的*类似*. 用户可以喜欢任何页面。稍后我必须检索单个用户的所有喜欢的列表，以及喜欢特定页面的所有用户的列表。

我尝试为 Likes 制作一个单独的模型，并将两个字段设为 User (OneToOne) 和 Page(OnetoOne)。但是我以后如何获取数据呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T10:07:57.667

```
user = User.objects.get(username="foo")
user_likes = user.likes_set.all()

page = Page.objects.get(id=4)
page_likes = page.likes_set.all() 
```

您可以在 Like 模型中的字段定义中更改相关经理的默认名称：

```
user = models.ForeignKey(User, related_name="likes")
page = models.ForeignKey(Page, related_name="likes") 
```

然后你可以这样称呼它们：

```
user_likes = user.likes.all()
page_likes = page.likes.all() 
```

附带说明一下，有一些 Django 应用程序可以完成这项工作：

*   Django-Voting： [像 Django 中的应用程序](https://stackoverflow.com/questions/6318537/like-application-in-django)
*   Phileo，在 Pinax 项目下：[https ://github.com/eldarion/phileo](https://github.com/eldarion/phileo)

# windows-phone-7 - 从 Photochooser 中挑选照片或按住硬件后退按钮会导致活动计时器响铃

> ID：12337992
> 
> 赞同：0
> 
> 时间：2012-09-09T09:34:43.483
> 
> 标签：windows-phone-7

这是一个非常奇怪的问题，我要求确认的所有人都说它发生了。

我有一个`Threading.Timer`每 15 分钟触发一次的实例。如果我调用`PhotoChooser`视图然后从中选择一张照片，当返回调用页面时，我的应用程序会调用该计时器的回调！我尝试了不同的定时器，要么是来自线程命名空间的定时器，要么是调度器定时器。

在我的应用程序中也会发生同样的情况，我按住设备的后退按钮，然后从列表中选择应用程序。

我的应用程序尽可能简单 - 带有回调的计时器和调用 PhotoChooser 的方法。任何人都可以提供解决方案或解决方法吗？

**更新：**

我的代码构造如下：

```
private Timer _timer;

public void CallTimer()
{
    var period = 15 * 1000 * 60;
   _timer = new Timer(repeatTimer_Tick, null, 0, period);
}

private void repeatTimer_Tick(object state)
{
   // Some action here
}

private void Stop()
{
   if (_timer != null)
     _timer.Dispose();
}

private void CallPhotoChooser()
{
   // Some basic actions calling photochooser task
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T14:58:18.203

正如[Windows Phone 7 Tombstoning](http://msdn.microsoft.com/en-us/magazine/hh148153.aspx)中所解释的，当用户按下并按住后退按钮或调用启动器（如 ）时，应用程序很可能会被墓碑化`PhotoChooserTask`。除非页面在几秒钟内返回，否则会发生这种情况。

您需要以某种方式将计时器超时存储在您的应用程序状态中，或者将初始超时设置为 15 分钟，这样它就不会立即触发。`NavigatedFrom`要存储应用程序状态，请查看链接的文章，如果您可以在后面的页面代码中超载，建议您这样做。

在计时器触发之前剩下的时间有点困难。我想知道[`DateTime.UtcNow`](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)在创建计时器时需要获取超时时间（您可以将其存储在应用程序状态中）并计算下一次它将在恢复应用程序时触发的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:01:54.897

您不应该创建那些长时间运行的计时器 :) 只需处理激活/停用并重置您的计时器，然后在照片选择器将您返回到您的应用程序时恢复它们。

# python - 使用python将命令的输出保存在linux中的字符串中

> ID：12337995
> 
> 赞同：-1
> 
> 时间：2012-09-09T09:35:17.313
> 
> 标签：python

我正在使用 Fedora 17 xfce，并且正在使用 Python 2.7.3 进行编程。Fedora 使用名为 yum 的包管理器。我有一个 python 脚本可以搜索这样的包：

```
import os
package = raw_input("Enter package name to search: ")
os.system("yum list " + package) 
```

所以我想让python检查这个命令的输出中是否存在单词`No matching packages to list`。我检查了一个类似的问题，并[在这里](https://stackoverflow.com/questions/2502833/python-store-output-of-subprocess-call-in-a-string)尝试了一些方法， 但字符串只包含输出的第一行。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T09:41:34.217

os.system 不会返回任何输出。您链接到的问题有正确的答案。如果您只得到输出的第一行，也许您正试图逐行读取它？

获得整个输出的正确方法是：

```
import subprocess
package = raw_input("...")
p = subprocess.Popen(["yum", "install", package], stdout=subprocess.PIPE)
out, err = p.communicate()
# Wait for the process to exit before reading
p.wait()    

full_output = out.read() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T10:07:48.700

您可能希望为此使用[subprocess](http://docs.python.org/library/subprocess.html)模块，因为[os.system()](http://docs.python.org/library/os.html#os.system)只返回命令的退出代码：

```
from subprocess import check_output
out = check_output(['yum', 'list', raw_input('package name')]) 
```

你也可以直接使用 Yum 的[API](http://yum.baseurl.org/api/yum-3.2.26/yum.YumBase-class.html)来搜索包：

```
from yum import YumBase

base = YumBase()
for package, name in base.searchGenerator(['name'], ['python']):
    print(package.name, package.version) 
```

# algorithm - 枚举路径的算法

> ID：12337996
> 
> 赞同：2
> 
> 时间：2012-09-09T09:35:19.207
> 
> 标签：algorithm, counting

假设你站在实线上的 0 点。在每一步，您可以移动到左侧 l 个位置，也可以移动到右侧 r 个位置。您打算到达数字 p。另外，有些号码是不允许踩的。你想数一数你能做到这一点。提到的所有数字都是整数（当然，l 和 r 是正数）。什么是计算这个的好方法？

笔记。你也可以在旅途中踩到 p 本身，所以在某些情况下答案是无限的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:16:20.497

这不是算法问题，而是数学问题。不过，这是解决方案。让我们假设您的数字`l`和`r`是正整数（它们都不是零）。

当且仅当方程`r * x - l * y = p`具有非负整数解时，才存在解`(x, y)`。这个等式表达了这样一个事实，即我们以任意顺序`x`向右行走几次，向左行走多次。`y`这个方程被称为[Bézout 恒等式](http://en.wikipedia.org/wiki/B%C3%A9zout%27s_identity)，我们确切地知道它的解是什么样的。

如果`gcd(r,l)`除`p`则存在整数解`(x0, y0)`，并且所有其他解的形式为`x = x0 + k * r / gcd(l,r)`，`y = y0 + k * l / gcd(l,r)`其中`k`贯穿整数。显然， if`k`大于两者`-x0 * gcd(l,r) / r`，`-y0 * gcd(l,r) / l`then`x`和`y`是非负的，所以我们有无限多的解决方案。

如果`gcd(r,l)`不除`p`则没有解，因为左边总是能被整除，`gcd(l,r)`但右边不能。

总之，您计算解决方案的算法如下所示：

```
if p % gcd(l,r):
    return Infinity
else:
    return 0 
```

在这一点上，尝试列举所有路径似乎毫无意义，因为那将是一个相当无聊的练习。对于每个非负解`(x,y)`，我们简单地列举所有可能的安排`x`向右移动和`y`向左移动的方式。会有 `(x+y)!/(x! * y!)`这样的路径（在`x+y`步骤中选择`x`将向右移动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:33:53.063

就像“L*x+R*y=P 有多少整数 (x,y) 解决方案”。

我相信有很多关于这个问题的文章。

# android - android 的 BaseAdapter notifyDataSetChanged 方法是如何工作的？

> ID：12337997
> 
> 赞同：3
> 
> 时间：2012-09-09T09:35:21.467
> 
> 标签：android, android-listview, android-view, android-adapter, notify

`notifyDataSetChanged`在类方法的文档中`BaseAdapter`指出，*“通知附加的观察者基础数据已更改，任何反映数据集的视图都应自行刷新。”*

假设我更改了字符串数组中的第三个元素（数组数据`ListView`），*“任何反映数据集的视图都应该刷新自身”*是什么意思？我的列表视图中的第三个视图项目是否会收到通知？

还有，怎么`notifyDataSetChanged()`关心`getView()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T09:59:36.553

> 假设我更改了字符串数组中的第三个元素（列表视图的数组数据），“任何反映数据集的视图都应该刷新自身”是什么意思？

这意味着任何显示/基于/使用该数据（在您的情况下为字符串数组）的视图都应该无效（重新测量，重新绘制），以便向用户显示新的数据集。

> 我的列表视图中的第三个视图项目是否会收到通知？

`ListView`不，会通知家长。当您在 a 上设置适配器时，将为该适配器设置`ListView`一个观察者（来自`ListView`）。调用`notifyDataSetChanged`适配器将宣布`ListView`数据发生了某些事情的观察者。此时`ListView`将重新创建行以显示新数据。

> 另外，notifyDataSetChanged() 和 getView() 有什么关系？

我不确定我是否理解你的要求。每次需要时，`getView`都会使用适配器的方法来获取新行。`ListView`当您调用`notifyDataSetChanged`适配器时，这将触发`ListView`. 当需要重新创建列表时，`ListView`将调用`getView`适配器的方法来显示必要的行数（屏幕上可见的行数）。因此，每次调用`notifyDataSetChanged`该`getView`方法时，都会为可见行调用该方法。