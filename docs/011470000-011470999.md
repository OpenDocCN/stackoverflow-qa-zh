# StackOverflow 问答 11470000-11470999

# datatables - 数据表可折叠/可扩展分组 - 将列分组为普通列

> ID：11470000
> 
> 赞同：1
> 
> 时间：2012-07-13T11:54:37.780
> 
> 标签：datatables, grouping

我正在使用 Datatables Collapsible/Expandable Grouping： http: [//jsfiddle.net/nanoquantumtech/RgKPZ/](http://jsfiddle.net/nanoquantumtech/RgKPZ/) 并且我想拥有这种确切的样式，但不同之处在于将“渲染引擎”作为列，就像所有其他人一样. 我将不胜感激任何建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-27T20:03:20.733

这是用于指定应对哪一列进行分组的语法，其中索引 0 将是第一列。

```
$("#myTable").dataTable().rowGrouping({iGroupingColumnIndex:5}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:09:49.667

没有关于代码如何选择分组列的公开配置。然后我认为您应该尝试将 放在`Rendering engine`第一列，以检查此 JS 代码是否仅按它在表中找到的第一列进行分组。

# ruby-on-rails - ActiveRecord::SubclassNotFound

> ID：11470011
> 
> 赞同：23
> 
> 时间：2012-07-13T11:55:04.653
> 
> 标签：ruby-on-rails, ruby, redmine

我正在尝试将我的 redmine 从 1.3.0 升级到 2.0.0，但是我在数据库迁移方面遇到了问题。当我运行命令时：

```
rake db:migrate RAILS_ENV=production 
```

它显示一个错误，如

```
rake aborted!
uninitialized constant RAILS_ENV 
```

我的错误日志是：

```
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'GoogleAppsAuthSource'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite AuthSource.inheritance_column to use another column for that information.):
app/models/user.rb:139:in `try_to_login'
app/controllers/account_controller.rb:143:in `password_authentication'
app/controllers/account_controller.rb:138:in `authenticate_user'
app/controllers/account_controller.rb:30:in `login' 
```

这是我在旧 redmine 中使用的插件列表：

1.  谷歌应用插件

2.  Redmine 代码审查插件

3.  Redmine Hudson 插件

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-15T20:45:18.577

如果其他人在这里绊倒，有两种方法可以解决问题

1.  不要使用名为 type 的列。
2.  手动将列名设置为无意义的名称：

    ```
    self.inheritance_column = :_type_disabled 
    ```

    请参阅：[http ://apidock.com/rails/ActiveRecord/Base/inheritance_column/class](http://apidock.com/rails/ActiveRecord/Base/inheritance_column/class)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-13T12:49:37.847

单表继承错误可能是由`type`数据库中命名的列引起的。

如果 rails 遇到一个名为的列名`type`，它会假定它是一个具有子类的模型，因此类型会区分要使用的模型。我猜一些最初不是为 rails 构建的插件`type`在它的模型中使用了一个列，这会导致 Rails 失败。

# ios - iOS Phonegap：禁用自动锁定但允许关闭屏幕

> ID：11470012
> 
> 赞同：0
> 
> 时间：2012-07-13T11:55:04.983
> 
> 标签：ios, cordova

我正在使用 Phonegap，我正在尝试禁用自动锁定，但同时允许手机关闭屏幕。所以手机没有被锁定，但屏幕似乎关闭了。这是为了节省电池并让我的应用程序继续工作。

这可以实现吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:02:25.407

可以肯定的是，即使使用官方 Apple SDK，这是不可能的。

# android - 如何在 Galaxy Nexus 手机上设置电池电量

> ID：11470016
> 
> 赞同：1
> 
> 时间：2012-07-13T11:55:08.813
> 
> 标签：android, android-emulator

我知道您可以将android中模拟器上的电池电量设置为您想要的0-100之间的任何值。有什么方法可以在 Galaxy Nexus 设备或任何 Android 设备上进行同样的测试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:00:50.017

不，这些值在您的设备上是不可更改的。这是只能监控[BatteryManager](http://developer.android.com/reference/android/os/BatteryManager.html)的系统数据。

# ruby-on-rails-3 - 如何在不覆盖视图的情况下优化速度视图

> ID：11470023
> 
> 赞同：0
> 
> 时间：2012-07-13T11:55:45.293
> 
> 标签：ruby-on-rails-3, spree

我是新来的狂欢。我想对 spree 的视图进行一些更改，为此我找到了两种方法： 1\. 使用 Deface 2\. 通过覆盖视图

目前，我正在覆盖这些观点，但建议这种方法不是很好。我想使用 deface 但无法应用它：

```
Deface::Override.new(:virtual_path  => "spree/checkout/registration",
                     :insert_before => "div#registration",
                     :text          => "<p>Registration is the future!</p>",
                     :name          => "registration_future") 
```

请帮助我如何优化我的观点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:40:12.243

您可以通过在项目文件夹中`Deface`使用您的代码创建一个 ruby​​ 文件来替换内容和插入新内容`app/overrides`。

```
/app
  /overrides
    future_registration.rb 
```

将`future_registration.rb`有您粘贴的代码。如果您`spree/checkout/registration`在重新启动服务器后访问该 url，您应该会在页面中看到该消息。

# facebook - 表单在 Facebook 中未正确通过隐藏字段值，但在其他地方可以

> ID：11470024
> 
> 赞同：1
> 
> 时间：2012-07-13T11:55:46.407
> 
> 标签：facebook, forms, symfony-forms

我有一个脚本，它首先检查表单页面是否是从 GET 参数引用的

```
$page['is_referred'] = isset($_GET['rfr']) ? 1 : 0; 
```

然后将该设置值用作 Symfony2 表单中隐藏字段的值

```
$form = $app['form.factory']->createBuilder('form', $data)
    //....
    ->add('referred', 'hidden', array(
        'data' => $page['is_referred'],
    ))
    ->getForm(); 
```

然后

```
if ('POST' === $request->getMethod()) {

    $form->bindRequest($request);

    if ($form->isValid()) {

        //...
        $referred  = $form->get('referred')->getData();

        $msg_referer   = "Thanks from Referrer";
        $msg_noreferer = "Thanks";

        if( 1 == $referred ){
            $page['thanks'] = $msg_referer;
        }else{
            $page['thanks'] = $msg_noreferer;
        }
        //..
    }
} 
```

隐藏字段在 url 中时在主站点上可以正常读取`?rfr`，但当在 Facebook 中进行 iframe 并且`?rfr`存在时，会显示 $msg_noreferer 消息。关于为什么会发生这种情况的任何想法？

编辑：我还应该提到，当我检查源时，在 Facebook 中正确设置了字段值，但它似乎并没有正确发布数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T17:30:38.917

> 我还应该提到，当我检查源时，在 Facebook 中正确设置了字段值，但它似乎并没有正确发布数据

我想说，该值已发布，但表单验证不接受它，因为隐藏字段不会*在*验证时添加到表单中。

您是否*检查*过这一点，如果在处理从浏览器收到的 POST 请求时实际上正在执行将隐藏字段添加到表单的代码......？

# vim - 为什么 :s 命令正则表达式不理解“？”

> ID：11470025
> 
> 赞同：1
> 
> 时间：2012-07-13T11:55:48.247
> 
> 标签：vim, sed

当您尝试从一行中删除 html 标签时，一种可能的方法是使用 :s 命令并编写一个同时理解标签开头和结尾的正则表达式。我的目标是：

```
:s %</?center>%%g 
```

但是这样，vim 说它什么也没找到。所以我不得不改用以下方法，这很有效：

```
:s %</*center>%%g 
```

为什么一个有效而另一个无效？不应该`?`说“之前的角色可以来一次，或者根本不来”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:05:12.533

你需要`?`用`\`.

参考帮助页面：

```
:h pattern-overview 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:02:46.470

他们不一样。

> 这 ？（问号）**仅匹配前面的字符 0 或 1 次**，例如，colou?r 将同时找到 color（0 次）和 color（1 次）。
> 
> *（星号或星号）与前面的字符匹配**0 次或多次**，例如，tre* 将找到 tree（2 次）、tread（1 次）和 trough（0 次）。

你能告诉我们将被替换的比赛吗？

此外，我知道这种操作是使用该命令完成的，该命令`s/foo/bar/g`将替换每次出现的`foo`with`bar`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T13:21:40.287

如果你想像这样使用`?`必须使用 vim 的`very magic`正则表达式模式 ( `\v`)，但是这也将`<`和解释`>`为单词边界，所以现在需要对它们进行转义：

```
:%s,\v\</?center\>,,g 
```

正如您所发现的，这里较短的选项是转义`?`：

```
:%s,</\?center>,,g 
```

查看`:help /magic`更多。

# java - Admob 集成失败线程在基于 AndEngine 的应用程序上正常工作

> ID：11470026
> 
> 赞同：0
> 
> 时间：2012-07-13T11:55:50.790
> 
> 标签：java, android, mobile, andengine

我正在构建一个由 AndEngine 游戏框架提供支持的 android 游戏。
我正在使用以下代码与 Admob 集成：

```
@Override
protected void onSetContentView() {
    mRenderSurfaceView = new RenderSurfaceView(this, mEngine);
    mRenderSurfaceView.applyRenderer();
    setContentView(R.layout.main);

    final FrameLayout frameLayout = new FrameLayout(this);
    final FrameLayout.LayoutParams frameLayoutLayoutParams =
            new FrameLayout.LayoutParams(FrameLayout.LayoutParams.FILL_PARENT,
                                         FrameLayout.LayoutParams.FILL_PARENT);

    AdView adView = new AdView(this, AdSize.BANNER, "XXXXXXX");
    adView.refreshDrawableState();
    adView.setVisibility(AdView.VISIBLE);
    final FrameLayout.LayoutParams adViewLayoutParams =
        new FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT,
                                     FrameLayout.LayoutParams.WRAP_CONTENT,
                                     Gravity.CENTER_HORIZONTAL|Gravity.BOTTOM);

    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);       
    adRequest.addTestDevice(Secure.ANDROID_ID);
    adView.loadAd(adRequest);

    final android.widget.FrameLayout.LayoutParams surfaceViewLayoutParams =
        new FrameLayout.LayoutParams(super.createSurfaceViewLayoutParams());

    frameLayout.addView(this.mRenderSurfaceView, surfaceViewLayoutParams);
    frameLayout.addView(adView, adViewLayoutParams);

    this.setContentView(frameLayout, frameLayoutLayoutParams);
} 
```

在游戏中，当一个球被创建时，它会制作一个
我用线程制作的淡入动画：

```
 new Thread(new Runnable() {

        public void run() {
            mBody.setType(BodyType.StaticBody);
            mSprite.setAlpha(0.0f);
            try {
                while(mSprite.getAlpha() < 1.0f) {
                    mSprite.setAlpha(mSprite.getAlpha() + 0.01f);
                    Thread.sleep(3);
                }

                mBody.setType(BodyType.DynamicBody);
                mBody.setLinearVelocity(new Vector2(0, 10));

            } catch (InterruptedException e) {
                e.printStackTrace();
            }

        }
    }).start(); 
```

问题是：
动画效果很好，但是
当我添加 Admob 代码时，Sprite 会出现一秒钟
，然后就消失了。

在我看来，这两个“块”代码之间存在问题。
但我无法确定解决方案，甚至无法确定导致此问题发生的原因。

我只知道在我的应用程序中结合 Admob 代码时动画不起作用。

我想知道为什么以及如何解决它。谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:11:21.943

我建议您使用 XML 文件来放置您的管理员。它更干净，易于使用，并且根据我自己的测试，它比覆盖 onsetcontentview 更快。为了实现这一点，您需要扩展 LayoutGameActivity （该类还有一个简单版本。SimpleLayoutActivity 如果我没记错的话）

当我得到一台电脑时，我会改进答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:05:50.047

这可能完全不相关，但我最近遇到了随机消失的 Sprites 的问题，尽管与 Admob 无关。当我将以下行添加到设置引擎的位置时，问题就消失了：

```
engineOptions.getRenderOptions().disableExtensionVertexBufferObjects(); 
```

# eclipse - 产品导出时不显示闪屏

> ID：11470028
> 
> 赞同：4
> 
> 时间：2012-07-13T11:55:55.947
> 
> 标签：eclipse, splash-screen, rcp

当我在 Eclipse 中运行我的 rcp 应用程序时，初始屏幕会按应有的方式显示。但是，当我导出产品启动画面时，即使它是一个新的 rcp 应用程序，我根本没有更改启动画面

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T12:49:10.143

您是否将启动画面图像添加到 build.properties 文件中？

如果不是，则该图像不是您生成的 *.jar 文件的一部分

例子：

```
bin.includes = splash.bmp,\
               product.properties,\
               about.ini,\
               about.properties,\
               plugin_customization.ini,\
               META-INF/ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-09T20:50:46.510

好的，请确保/检查以下内容
（这些步骤始终针对您的应用程序导出目标目录执行，**而不是**eclipse IDE 目录）：

*   RCP 邮件模板示例是否正常工作？完全可以使用向导创建示例应用程序，然后通过清单编辑器第一页中的超链接导出。这个结果应该总是有效的。否则请检查您的 Eclipse 安装。
*   您是否使用了正确的启动器？有eclipse.exe和eclipsec.exe（后者是命令行版本=>无闪屏）
*   导出的结果必须在 /plugins 下包含您的 jar 包或目录形式的包（对于我们的产品，两种形式都可以使用）（包本身在逻辑上需要在根目录中包含您的 splash.bmp）。如果我没记错的话，它需要是具有某些参数的 BMP。通过检查 RCP 邮件模板示例找到它们。
    *   如果没有：检查您的产品定义（包括插件/功能）
*   尝试为您的应用使用 RCP 邮件模板示例图像。它也无法正常工作吗？如果是这样，请尝试使用 Windows Paint 打开/保存。
*   接下来，确保配置子文件夹中的“config.ini”具有以下条目：osgi.splashPath=platform\:/base/plugins/<your bundle without version appendix>
    (osgi.splashPath=platform:/base/ plugins/<your bundle w/o version> 也有效
    我不知道这个设置是否有任何默认值，但也许这次你应该明确告诉启动器在哪里寻找启动图像。:-)
*   确保没有 -D 参数覆盖启动器 (eclipse.exe) 旁边的 eclipse.ini 中的 config.ini 设置
    *   eclipse.ini 或 config.ini 中是否有“noSplash”？
*   如果您的包是 jar，请检查 bmp 是否在 configuration\org.eclipse.equinox.launcher 下的某处正确提取...
    *   如果不是：则图像未正确包含/在捆绑 jar 中找到。检查你的 build.properties
*   删除工作区并使用 -clean 启动您的 rcp 应用程序
*   也许从 -console -consoleLog 和 -noExit 开始以识别启动期间出现的错误消息

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-24T13:30:11.480

在我的例子中，splash.bmp 是 32 位的，并且没有显示。在我使用 GIMP 将其转换为 24 位后，它显示出来了（Eclipse 3.7）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-13T14:30:51.447

我没有添加包含启动画面的插件的位置...

> 产品->Splash->位置->插件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T23:44:20.207

还要确保您的产品依赖项（例如，在产品编辑器中，选项卡依赖项）包含插件 org.eclipse.ui.intro。此外，如果您的 Welcome 是基于 intro.universal 的，则必须添加额外的 org.eclipse.ui.intro.universal。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-03T07:01:54.790

可能为时已晚，但是按照上述所有步骤并没有解决我的问题。尝试以下步骤解决了我的问题。在依赖项选项卡下的 .prdocut 文件中，有一个检查按钮“在计算所需插件时包含可选依赖项”最终使我的初始屏幕可见。如果有人提到此答案，请确保您遵循上述答案并尝试此答案。

# android - readFromParcel 方法中的 Android 类型不匹配

> ID：11470034
> 
> 赞同：3
> 
> 时间：2012-07-13T11:56:22.093
> 
> 标签：android, arraylist, parcelable

< 想要从包含 Arraylist 的对象中创建一个 parcelable，但是在我的 readFromParcel 方法中，我收到错误类型不匹配：无法从 void 转换为 ArrayList。我该怎么做才能从我的包裹中正确读取我的 ArrayList？

**编辑：**在下面的答案的帮助下，我现在不再收到类型不匹配错误，但现在我收到消息“-令牌上的语法错误”>“，无效名称-令牌上的语法错误“>”，此之后的表达式令牌”

**编辑**清理项目时解决了新错误。

这是我的代码

```
public class Game implements Parcelable{

private ArrayList<Stone> allStones;

public Game(){
    allStones = new ArrayList<Stone>();
    for(int x=0; x<10; x++) {
        for(int y=0; y<10; y++) {
            if((x+y)%2 == 1 && y<4){
                Stone stone = new Stone(x, y, Stone.WHITE);
                allStones.add(stone);
            } else if((x+y)%2 == 1 && y>5){
                Stone stone = new Stone(x, y, Stone.BLACK);
                allStones.add(stone);
            }
        }
    }
}

public Game(Parcel in) {
    allStones = new ArrayList<Stone>();
    readFromParcel(in);
}

public ArrayList<Stone> getAllStones() {
    return allStones;
}

public void removeFromStones(Stone stone) {
    allStones.remove(stone);
}

public int describeContents() {
    return 0;
}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeTypedList(allStones);
}

private void readFromParcel(Parcel in) {
    in.readTypedList(allStones, Stone.CREATOR); //This line has the error in it
}
} 
```

和石头类

```
public class Stone implements Parcelable{
private int x, y, color;
private Boolean king;

public static final int BLACK = 0;
public static final int WHITE = 1;

public Stone(int x, int y, int color) {
    this.x = x;
    this.y = y;
    this.color = color;
    this.king = false;
}

public Stone(Parcel in) {
    readFromParcel(in);
}

public int getX() {
    return x;
}

public int getY() {
    return y;
}

public int getColor() {
    return color;
}

public boolean getKing() {
    return king;
}

public void setKing() {
    king = true;
}

public void setXY(int x, int y) {
    this.x = x;
    this.y = y;
}

public int describeContents() {
    return 0;
}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeInt(x);
    dest.writeInt(y);
    dest.writeInt(color);
    dest.writeByte((byte) (king ? 1:0));
}

public void readFromParcel(Parcel in) {
    x = in.readInt();
    y = in.readInt();
    color = in.readInt();
    king = in.readByte() == 1;
}

public final static Creator<Stone> CREATOR = new Parcelable.Creator<Stone>() {

    public Stone createFromParcel(Parcel source) {
        return new Stone(source);
    }

    public Stone[] newArray(int size) {
        return new Stone[size];
    }
};
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:35:46.070

`readTypedList()`不返回值。它将对象列表放入您作为第一个参数传递的列表中。您的代码应如下所示：

```
private void readFromParcel(Parcel in) {
    in.readTypedList(allStones, Stone.CREATOR); // Should work now
} 
```

# c# - 获取对象内的所有关联/复合对象（以抽象方式）

> ID：11470037
> 
> 赞同：6
> 
> 时间：2012-07-13T11:56:32.203
> 
> 标签：c#, entity-framework, oop, linq-to-sql, domain-driven-design

**业务**：

我有一个支付系统，可以通过 GiftCoupon、ClubMembershipCard 等进行支付。一个支付本身可以有多个支付组件

**类**：

我有一个付款课程。它具有GiftCouponPayment、ClubMembershipCardPayment、CashPayment等支付组件。每个组件类型都满足一个公共接口 IPaymentComponent。我已经使用有关现有类型的知识来实现​​它。

**问题**

1）如何以**抽象**的方式实现这个功能——不知道所有存在的类型是什么？这意味着它需要适用于所有实现 IPaymentComponent 接口的类型。

2）如果无法在LINQ to SQL中实现，是否可以在实体框架中实现？

**3) LINQ to SQL**在 Payment 对象中生成 GiftCouponPayment 实体时是关联/聚合还是组合？

注意：我使用 LINQ to SQL 作为 ORM。GiftCouponPayment 和 Payment 是自动生成的类，这些对象由 ORM 创建。我通过使用部分类为这些类添加了更多功能。

注意：在数据库中，每个 PaymentComponent（例如 GiftCouponPayment）都有自己的属性（例如 CouponValue、CardValue 等）。因此**Table-Per-Hierarchy 不会很好**。我们需要单独的表格。该行有解决方案吗？

注意：在此付款之前，GiftCouponPayment 已存在于数据库中。我们需要使用客户提供的 GiftCouponPaymentID 来识别 GiftCouponPayment 对象。我们只需要更新此表中的 PaymentID 列。

> 泄漏抽象是指任何已实现的抽象，旨在降低（或隐藏）复杂性，其中底层细节并未完全隐藏

**LINQ to SQL 图**

![在此处输入图像描述](../Images/17467bc653d9ae3c9ec39cf60423c81d.png)

**参考**：

1.  [实体框架 4，继承与扩展？](https://stackoverflow.com/questions/4127002/entity-framework-4-inheriting-vs-extending)
2.  如何选择继承策略[http://blogs.msdn.com/b/alexj/archive/2009/04/15/tip-12-choosing-an-inheritance-strategy.aspx](http://blogs.msdn.com/b/alexj/archive/2009/04/15/tip-12-choosing-an-inheritance-strategy.aspx)
3.  Fluent API 示例 - [http://blogs.msdn.com/b/adonet/archive/2010/12/14/ef-feature-ctp5-fluent-api-samples.aspx](http://blogs.msdn.com/b/adonet/archive/2010/12/14/ef-feature-ctp5-fluent-api-samples.aspx)

**C# 代码**

```
public interface IPaymentComponent
{
     int MyID { get; set; }
     int MyValue { get; set; }
     int GetEffectiveValue();
}

public partial class GiftCouponPayment : IPaymentComponent
{
    public int MyID
    {
        get 
        { 
            return this.GiftCouponPaymentID; 
        }
        set 
        { 
            this.GiftCouponPaymentID = value; 
        }
    }

    public int MyValue
    {
        get 
        { 
            return this.CouponValue; 
        }
        set 
        { 
            this.CouponValue = value; 
        }
    }

    public int GetEffectiveValue()
    {
        if (this.CouponNumber < 2000)
        {
            return 0;
        }
        return this.CouponValue;
    }
}

public partial class Payment
{
    public List<IPaymentComponent> AllPaymentComponents()
    {
        List<IPaymentComponent> allPayComps = new List<IPaymentComponent>();

        List<GiftCouponPayment> giftCouponPaymentList = new List<GiftCouponPayment>();
        List<CashPayment> cashPaymentList = new List<CashPayment>();

        foreach (GiftCouponPayment g in this.GiftCouponPayments)
        {
            giftCouponPaymentList.Add(g);
            allPayComps.Add(g);
        }

        foreach (CashPayment c in this.CashPayments)
        {
            cashPaymentList.Add(c);
            allPayComps.Add(c);
        }

        return allPayComps;

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:59:03.400

您可以尝试使用 T 类型的通用抽象层或数据访问层。或者至少使方法通用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T14:02:46.557

我想你可能想暂时退出设计。我听到的是这样的：

> 支付由一个或多个组件组成，每个组件可以是多种类型中的一种

听起来你需要的是一个`Payment`表，然后是一个`PaymentComponent`与表有外键关系的`Payment`表。`PaymentComponent`然后，您可以在表上为您的各种付款方式实现继承。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T16:26:45.900

## 您在这里基本上有一些问题：

1.  **如何对支付类型进行建模**

    假设我们想要采用经典的 OOP 方式：

    您需要一个抽象的基类 Payment（或 PaymentBase）以及从它继承的各种类，例如 PaymentInCash、PaymentWithCreditCard 等。

    另一种方法是将 PaymentDetails 添加到 Payment 并创建 PaymentDetails 的层次结构，如果您选择这样做，请在以下所有点中将 Payment 替换为 PaymentDetails。

    **对于使用多种方法的付款**，您可以：

    一种。
    在 Payment或
    b下有一个 PaymentDetails 集合。创建一个名为 AggregatePayment 的类型，其中包含付款列表。

2.  **如何将付款类型映射到表格**

    TPT 和 TPH 在这里都有效...

    **对于 TPT**，使用一张表进行付款，一张表用于每种付款。
    所有继承类型的表 PK 应该是基类型表的 FK。
    如果您有多个层次结构，则可以在第二（或任何其他）级别上使用 TPT 或 TPH（如果您使用的是 EF）。

    **对于 TPH**，使用一个带有鉴别列（例如 PaymentType）的表，并将未在层次结构中的所有实体之间共享的每一列标记为可为空。不要将同一列用于不同实体中的不同属性。在 EF 中，将每个实体映射到同一个表，条件为 PaymentType = (number goes here) 和 (column name(s) that should not be null) is not null。

    *我的建议是，如果您有许多窄类型（每个属性很少），请使用 TPH，如果您有一些宽类型，请使用 TPT。*

3.  **支付算法使用哪种设计模式/代码技术**

    您在这里有更多选择：

    一种。使用部分类并在基类上放置一个抽象的 ProcessPayment() 方法并在继承类中覆盖。

    湾。使用基本的 PaymentProcessor 类和每个支付类型的特定 PaymentProcessor，例如 PaymentInCashProcessor。在此方法中，您可以使用反射来加载正确的 PaymentProcessor 类型，方法是存储字典或更好，使用泛型：

 `````
abstract class PaymentProcessor
{
}

abstract class PaymentProcessor<TPayment> : PaymentProcessor
    where TPayment : class, Payment
{
}

class PaymentInCashProcessor : PaymentProcessor<PaymentInCash>
{
}

// Use reflection to find types that inherits from PaymentProcessor<PaymentInCash>
// create an instance of the type you found
// then cast the instance to PaymentProcessor<PaymentInCash> to use 
````  `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T13:38:59.550

如果您设计 EF 模型，则可以在名为 payment 的基类上使用抽象属性。并让继承该类的所有付款类型：

![实体框架模型](../Images/8e5b7127d77382dce334c19c7d9a6d8c.png)

付款将具有所有共同属性，并且每种特定类型都可以具有自己的属性。

如果你有这种模型，你可以只查询付款。

这将返回所有继承支付类型的对象：

```
 var allPayments = objectContext.Payments; 
`````

# 3d - gnuplot 数据 dgrid3d 将圆形更改为方形

> ID：11470041
> 
> 赞同：0
> 
> 时间：2012-07-13T11:56:48.550
> 
> 标签：3d, gnuplot

我的文件中有非结构化数据，那真的很长。我想创建一个彩色的 pm3d 图。据我了解，我必须使用 set dgrid3d 插入数据。但是，如果我这样做，我在圆形 xy 区域上的数据点将被插值到正方形。知道如何避免这种情况吗？手动对文件中的数据进行排序是没有选择的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:54:12.770

默认情况下，`dgrid3d`将所有内容放在非常稀疏的 10x10 网格上。您可以通过执行以下操作来增加分辨率：

```
 set dgrid3d 100,100 
```

并不是说在每个网格点（在本例中为 100000）都需要对整个数据集进行求和，从而得出一个算法，`O(nx*ny*N)`其中 nx,ny 是 dgrid3d 中的点数，N 是文件中的数据点数。（换句话说，这可能需要一段时间；））

# c# - 无法将“字符串”类型的表达式转换为“ScatterView”类型

> ID：11470045
> 
> 赞同：3
> 
> 时间：2012-07-13T11:56:59.537
> 
> 标签：c#, wpf, xaml, mvvm, pixelsense

我有一个[SurfaceRadioButton](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.surfaceradiobutton.aspx)必须更改 ScatterView 的[可见](http://msdn.microsoft.com/en-us/library/microsoft.surface.presentation.controls.scatterview.aspx)**性**（scatterViewCoordinates）

首先，我所做的是改变对象的可见性（）

```
private void CoordinatesChecked(object sender, RoutedEventArgs e)
{
    scatterViewCoordinates.Visibility = Visibility.Visible;
} 
```

之后我修改了 XAML 代码，并将 ScatterView 的名称包含在 SurfaceRadioButton 的 Tag 值中。

```
<s:SurfaceRadioButton Name="Coordinates" Content="Coordinates"
                      Checked="CoordinatesChecked" Tag="scatterViewCoordinates" /> 
```

现在我试图将 SurfaceRadioButton 中包含的 Tag 值转换为 ScatterView，然后调用 Visibility 方法。

```
private void CoordinatesChecked(object sender, RoutedEventArgs e)
{
    string senderName = ((SurfaceRadioButton)sender).Tag.ToString();
    ((ScatterView)senderName).Visibility = Visibility.Hidden;
} 
```

我得到这个错误

`Cannot cast expression of type 'string' to type 'ScatterView'`

有什么想法可以解决这个问题（我什至现在都不尊重 MVVM 概念：s）？

也欢迎提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:01:31.760

为什么这不起作用应该很明显，您不能只将对象的名称转换为它固有引用的对象。程序无法知道字符串的*含义*。

只是传递对象怎么样：

```
Tag="{Binding ElementName=scatterViewCoordinates}" 
```

```
var view = (ScatterView)((SurfaceRadioButton)sender).Tag; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:02:03.360

您正在尝试将“senderName”（一个字符串）转换为 ScatterView，就像错误所说的那样。您将需要根据名称查找 ScatterView 并设置其可见性。

# c++ - 我可以将值初始化为指针吗？

> ID：11470050
> 
> 赞同：1
> 
> 时间：2012-07-13T11:57:20.110
> 
> 标签：c++

```
int *p;
*p=100;
cout<<*p; 
```

这是正确的还是应该给出一些错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T11:59:08.847

这将调用**未定义的行为**；您正在取消引用未初始化的指针。但是，您的代码可能会“工作”，因为这是未定义行为的一种可能结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T11:59:24.173

两者都不。

这是不正确的，但是 C（或 C++）标准对实现没有要求它应该给出任何错误。

C（或 C++）中的某些东西是“未定义的行为”，这意味着标准不关心会发生什么。这是其中之一。实现可能会做出一些努力来告诉您有问题，但这不是必需的。您（作为程序员）有责任避免未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T11:59:02.037

语法上看起来不错，但当然你可以通过简单地运行它来找出发生了什么。

但是，考虑到您将值存储在未知的位置（我们不知道`p`指向哪里），因此结果行为也是未知的（即***未定义的行为***）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T12:00:41.580

您需要为整数分配一些空间。

IE

```
int *p = new int;
*p = 100;
cout << *p;
delete p; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-13T12:05:21.610

这是错误的。

指针保存的主要值是它指向的内存位置的地址。

语句 int *p 将 p 定义为指针。

它必须通过指向一个变量来初始化，比如说 x。

初始化后，打印 p 将为您提供 x 的内存地址，打印 *p 将为您提供 x 所持有的值。

它可能会执行某些功能，但绝对不会满足您的目的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-13T11:58:35.427

这会写入未初始化变量`p`指向的任何位置，因此由于未定义的行为，它可能会或可能不会起作用（如果它不认为它可以 - 它不是！）。它很可能会使您的程序崩溃。

具有正确选项（例如 gcc's ）的良好编译器`-Wall`将显示警告：

> 警告：“p”在此函数中未初始化使用

# iphone - 使用情节提要手动启动视图控制器。

> ID：11470053
> 
> 赞同：2
> 
> 时间：2012-07-13T11:57:22.840
> 
> 标签：iphone, ios, xcode, storyboard

我正在尝试使用情节提要手动启动视图控制器。

那是用代码编写的，而不是把它连接起来。我试过：

```
self initWithNibName:(NSString *) bundle:(NSBundle *) 
```

但我不确定它们是否被归类为笔尖，或者它们在情节提要中被归类为什么。任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T12:05:41.337

听起来您正在寻找这种方法：

```
AlertContainerViewController *alertContainerViewController = 
[[UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:NULL] 
instantiateViewControllerWithIdentifier:@"alertContainer"]; 
```

您需要给 Storyboard 中的 ViewController 对象一个唯一标识符并指定子类。您可以通过 Property Inspector 完成这两项操作。

# javascript - 如何从谷歌地图中的地址获取纬度经度值？

> ID：11470059
> 
> 赞同：1
> 
> 时间：2012-07-13T11:57:46.117
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个表单，其中有一个名为`address`. 当用户在文本框中输入地址并单击按钮时，我想获取纬度和经度值。我怎样才能做到这一点？我已经使用 PHP 完成了这项工作，但我需要使用 Javascript/Google API 获取纬度和经度。任何教程的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T00:40:00.970

您需要使用 AJAX创建一个[地理编码请求。](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingRequests)

以下是[有关来自 Google 的地理编码请求的更多信息。](https://developers.google.com/maps/articles/geocodestrat)

这里是[来自 JQuery 站点的关于 AJAX 的信息。](http://learn.jquery.com/ajax/)

# magento - 使用 Collection Magento 获取 ProductName

> ID：11470063
> 
> 赞同：0
> 
> 时间：2012-07-13T11:57:59.837
> 
> 标签：magento, magento-1.4

我有一个产品 ID 列表，基于该产品 ID，我想获取产品名称，但由于 catalog_product_entity 表不包含产品名称，所以我被困住了。

请检查我的代码，我试过左右加入，但没有得到名字

```
$collection = Mage::getModel('catalog/product')->getCollection()
    ->addAttributeToSelect('name')
    ->getSelect()->joinRight( 
        array('table_alias'=>'my_table'), 
        'entity_id = table_alias.product_id',
        array('table_alias.*')
    );

$result = null;

foreach ($collection as $temp) {    
    $result[] = array(
        'name' => $temp->getCustomer_name(),               
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:41:09.087

如果您希望您的收藏加载产品名称，那么您的代码的第一部分是正确的。这是一个简化版本：

```
$collection = Mage::getResourceModel('catalog/product_collection')
                  ->addAttributeToSelect('name');

$result = array();

foreach ($collection as $temp) {
    $result[] = array('name' => $temp->getName());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:16:46.630

这就是我解决它的方法

```
$resource        = Mage::getSingleton('core/resource');
                $readResource    = $resource->getConnection('core_read');
                $tableName       = $resource->getTableName('myTable');

                $results = $readResource->select('table_alias.*')
                ->from($tableName)
                ->joinLeft(
                                array('table_alias'=>'catalog_product_flat_1'), 
                                'product_id = table_alias.entity_id',
                                array('table_alias.*')
                            )->where('customer_id=?',$customerId);

                $products=$readResource->fetchAll($results);

                $dataList = array();

                foreach($products as $row)
                {
                    $dataList[] = array('productName'=>$row['name'],'price'=> $row['price'],'status'=>$row['status'],'myTable_id'=>$row['myTable_id']);
                } 
```

# css - 浮动内容的CSS问题

> ID：11470069
> 
> 赞同：0
> 
> 时间：2012-07-13T11:58:30.927
> 
> 标签：css

我需要在第一列正下方向上移动第四列。有没有可能在css中做到这一点？

```
<body>
    <div class="fleft">1 Lorem ipsum dolor sit amet</div>
    <div class="fleft">2 Lorem ipsum dolor sit amet, consectetur adipisicing elit</div>
    <div class="fleft">3 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>
    <div class="fleft">4 Lorem ipsum dolor sit amet, consectetur.</div>
    <div class="fleft">5 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</div>
</body> 
```

CSS

```
body  { width:600px;}
.fleft{ float:left; width:200px;}
​ 
```

请参考小提琴

[http://jsfiddle.net/9xbGC/](http://jsfiddle.net/9xbGC/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:01:05.917

鉴于您的原始结构 - 不，没有（使用唯一的 css 并且没有肮脏的黑客）。第四列必须服从第三列的高度。

也许这个 jQuery 插件可以帮助你：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:05:25.173

不，只有当您可以依赖第一个 div 的特定高度时。

```
#div4{
    position: absolute;
    margin-top: 20px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:09:59.633

不是浮动，因为浮动只调整元素的流动，而不是它们的顺序。您可以选择绝对/相对定位，javascript。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:11:03.823

指定 div 的宽度，以便第 4 个 div 适合第一个和第三个 div 之间，然后当您向左浮动第 4 个列时，它应该位于右边。

编辑：您还可以使用 Twitter Bootstrap 附带的很棒的网格系统，它非常有用，可以解决大量的布局问题。 [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T12:02:52.720

使用纯 CSS 的唯一方法是拥有 3 列并将内容在它们之间拆分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T12:03:33.673

您可以使用绝对位置并为每个设置 top 和 left 来执行此操作，但如果您不知道每个的高度，则应该使用 javascript 执行此操作

或者您可以使用 jquery 插件：[http ://www.wookmark.com/jquery-plugin](http://www.wookmark.com/jquery-plugin)

# php - PHP 字符串操作 - 在 PHP 中操作日期字符串以上传到 mysql

> ID：11470071
> 
> 赞同：-1
> 
> 时间：2012-07-13T11:58:36.523
> 
> 标签：php, regex, string

我的字符串：

```
10:44 13/7 
```

我需要什么：

```
2012-07-13 
```

有没有办法我可以做到这一点？？？年份将永远是当前年份。

目前，我有：

```
$string = '10:44 13/7';
$string = explode("/", $string);
$date = date('Y') . '-' . $string[0] . '-'. $string[1]; 
```

非常感谢

感谢它的解决方案：

```
 $updated = explode(" ", $updated);
        $updated[1] = explode("/", $updated[1]);

        $y = date('Y');
        $m = $updated[1][1];
        $d = $updated[1][0];

        $updated = $y . '-' . $m . '-' . $d;

        echo $updated; 
```

我认为对这个问题的评价有点苛刻......我们中的一些人不像其他人那样擅长字符串操作，只是开始掌握 PHP。如果你想把这个问题记下来，也许 stackoverflow 不适合你，或者你应该去尝试回答核心问题，而不是让试图学习的人觉得自己渺小。是的，你知道你是谁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:21:25.643

可能是一种更短的方式，但这对你有用：

```
$string = '10:44 13/7';

list($junk, $date) = explode(' ', $string);
list($day, $month) = explode('/', $date);
$full_date = date('Y-m-d', strtotime(date('Y') . "-{$month}-{$day}"));
echo $full_date; //2012-07-13 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:03:00.830

不是最优雅的方式，但它应该可以工作：

```
$string = "10:44 13/7/" + date("y");
echo date("y-m-d", strtotime($string)); 
```

# python - Python 日志记录和日语（或任何非 ascii）

> ID：11470078
> 
> 赞同：1
> 
> 时间：2012-07-13T11:58:59.660
> 
> 标签：python, django, logging, encoding, utf-8

在将一个遗留 Django 项目（基于 Django 1.1）本地化为日语后，当语言环境为日语时，一些日志（不是全部）正在输出如下内容：

```
Traceback (most recent call last):
  File "/home/deploy/.pythonbrew/pythons/Python-2.7/lib/python2.7/logging/__init__.py", line 838, in emit
    msg = self.format(record)
  File "/home/deploy/.pythonbrew/pythons/Python-2.7/lib/python2.7/logging/__init__.py", line 715, in format
    return fmt.format(record)
  File "/home/deploy/.pythonbrew/pythons/Python-2.7/lib/python2.7/logging/__init__.py", line 467, in format
    s = self._fmt % record.__dict__
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe9 in position 0: ordinal not in range(128) 
```

这可能是什么原因，有没有简单的方法来规避这个问题？如果没有，我该如何更仔细地调查这个问题，因为我什至不知道哪些行调用了失败的日志？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:45:11.737

找出字符串是什么的方法是编辑日志记录模块，为您提供有关错误的一些信息。您不必保留编辑，只需修改它们足够长的时间以找出导致问题的原因。

例如，在“/home/deploy/.pythonbrew/pythons/Python-2.7/lib/python2.7/logging/__init__.py”中，第 467 行是这一行：

```
s = self._fmt % record.__dict__ 
```

将其更改为：

```
try:
    s = self._fmt % record.__dict__
except UnicodeError:
    import pdb
    pdb.set_trace() 
```

然后当 UnicodeDecodeError 发生时，您将被放入调试器中。您可以检查格式字符串和记录以确定问题所在。

不过，这可能太费力了，所以另一种选择是：

```
try:
    s = self._fmt % record.__dict__
except UnicodeError:
    s = "*** Couldn't log properly: %r against %r" % (self._fmt, record.__dict__) 
```

这样，日志将包含一行指示失败的数据，并且每个失败的日志行都有一个。如果您随后检查日志文件，您可能会发现许多问题行。

不要忘记保留 logging/__init__.py 文件的原始版本，以便在完成调试时可以恢复到它。

这个问题的难点在于，可能有许多违规行，散布在你的代码中，除非你有 100% 的代码覆盖率并且可以保证命中所有他们在测试期间。

有关 Python 中 Unicode 潜在问题的更多信息，请参阅[Pragmatic Unicode，或者，如何停止痛苦？](http://bit.ly/unipain).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:49:13.467

为了避免这种异常，我在每个 .py 的顶部写下这一行：

```
# This Python file uses the following encoding: utf-8 
```

来自[PEP](http://www.python.org/dev/peps/pep-0263/)：

> 1.  没有解释器行，使用纯文本：
>     
>     
>     
>     ```
>      # This Python file uses the following encoding: utf-8
>       import os, sys
>       ... 
>     ```

# jquery - 简单的 AJAX 淡入淡出效果 + Loader + 当前类

> ID：11470079
> 
> 赞同：0
> 
> 时间：2012-07-13T11:59:01.543
> 
> 标签：jquery, ajax, fadein, fadeout, loader

您好，我正在尝试将 ajax 功能添加到我的网站，并且可以正常使用此代码。只是现在我在获取`fadeIn`和`fadeOut`加载动画时遇到了麻烦。

这是我用 jQuery 编写的脚本代码：

```
$(document).ready(function() {

    // initial page load
    $('#content-div').load('details/default.html'); 

    // handle menu click
    $('ul#sidenav li a').click(function(){

        var page = $(this).attr('href');        
        $('#content-div').load('details/'+ page +'.html');  
        return false;       
    })

}); 
```

这是html标记：

```
<ul class="square sidebar-list" id="sidenav">
    <li><a href="default">Description</a></li>
    <li><a href="greenhill" class="current">greenhill</a></li>
    <li><a href="introduction">Introduction</a></li>
</ul>
<div id="content-div">                  
    <div id="loading">Loading...</div>
</div> 
```

还想更改当前选定列表项的类**`sidenav`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:05:04.770

看看，是不是你要找的？

```
$('ul#sidenav li a').click(function(){
    $('#content-div').fadeOut();
    var page = $(this).attr('href');        
    $('#content-div').load('details/'+ page +'.html', function() {
       $('#content-div').fadeIn();
    });
    return false;       
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:06:28.980

将您的代码更新为：

```
// handle menu click 
$('ul#sidenav li a').click(function(){
    var page = $(this).attr('href');   
    $(this).removeClass('current');

    $('#content-div').fadeOut(200).load('details/'+ page +'.html', function(){
        $(this).fadeIn(200);
        $('#sidenav a[href='+page+']').addClass('current');
    });  

    return false;       
}); 
```

# actionscript-3 - 更改文档类的名称 - Flash CS Pro

> ID：11470092
> 
> 赞同：0
> 
> 时间：2012-07-13T12:00:04.740
> 
> 标签：actionscript-3, flash, timeline, document-class

在文档类，构造函数中，以下行产生以下错误：

```
name = "hello world";
Error: Error #2078: The name property of a Timeline-placed object cannot be modified. 
```

这是可行的还是可破解的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:38:31.953

我做了一些测试，似乎你不能。“MainTimeline 是用于文档类的默认类。文档类是加载 SWF 电影时添加到舞台的显示对象。在它下面是一个扩展 MovieClip 的普通类。” （在 SO 上找到）可能此类的实现会阻止您更改其名称。由于您没有实例化它，因此可能会为该实例分配一个名称并且不希望您更改它:)

# tsql - SQL Server 变量的微妙之处

> ID：11470097
> 
> 赞同：3
> 
> 时间：2012-07-13T12:00:23.183
> 
> 标签：tsql, variables, stored-procedures, sql-server-2008-r2

我有以下 SQL Server 存储过程：

```
CREATE PROCEDURE ispsDcOhcAgg @TmpTableName NVARCHAR(50), @ListItem NVARCHAR(50) 
AS
IF EXISTS (SELECT name 
           FROM sys.tables 
           WHERE name = @TmpTableName) 
DROP TABLE @TmpTableName; -- This will not work.
GO 
```

这显然行不通（请参阅上面的代码片段中的评论）。我发现解决这个问题的唯一（也是非常丑陋的）方法是执行以下操作

```
CREATE PROCEDURE ispsDcOhcAgg @TmpTableName NVARCHAR(50), @ListItem NVARCHAR(50) 
AS
DECLARE @SQL NVARCHAR(4000) 
SET @SQL = N'IF EXISTS (SELECT name ' +
           N'FROM sys.tables ' + 
           N'WHERE name = N' + N'''' + @TmpTableName + N''') ' + 
           N'DROP TABLE ' + @TmpTableName + N';'
EXEC sp_executesql @SQL;
GO 
```

这真的很臭，对于大型存储过程来说，这太可怕了！

**还有另一种我不知道的方法吗？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T12:03:54.770

不，如果要像这样动态使用表名，则需要使用动态SQL。

因此，您应该确保自己不会面临令人讨厌的 SQL 注入风险！

尝试这样的事情：

```
SET @SQL = 'IF EXISTS (SELECT name ' +
           N'FROM sys.tables ' + 
           N'WHERE name = @TableName) ' + 
           N'DROP TABLE ' + QUOTENAME(@TmpTableName) + ';'

EXEC sp_executesql @SQL, N'@TableName sysname', @TmpTableName; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:07:31.797

不，如果您想确定要在运行时删除的表，则没有动态 SQL 的替代方法。

There is a *slightly* less ugly way: you only use dynamic SQL for the command that needs to be dynamic (the `DROP` command):

```
DECLARE @SQL NVARCHAR(100) 
IF EXISTS (SELECT name 
       FROM sys.tables 
       WHERE name = @TmpTableName) 
BEGIN
    SET @SQL = N'DROP TABLE ' + @TmpTableName + N';'
    EXEC sp_executesql @SQL;
END 
```

# java - 如何获取 jtree 中每个节点的唯一 ID 或值？

> ID：11470098
> 
> 赞同：1
> 
> 时间：2012-07-13T12:00:25.653
> 
> 标签：java, swing, jtree

我是 jtree 的新手。我想获取具有相同父节点的各个节点的唯一 ID 或值。

我尝试使用 valuechanged() 方法，但我只能获取每个节点的字符串值。

我想将当前选择节点与特定节点的一些唯一值进行比较。我怎样才能做到这一点？

我想我说清楚了。

有没有可用的可能性？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T16:02:08.517

TreeNode 有一个 getParent() 方法，你可以将它返回的对象引用与 == 进行比较。

如果您确实需要基于对象身份的唯一 id，请考虑 System.identityHashCode。请参阅以下问题： [当 toString() 和 hashCode() 已被覆盖时，如何在 java 中获取对象的“对象引用”？](https://stackoverflow.com/questions/580984/how-do-you-get-the-object-reference-of-an-object-in-java-when-tostring-and-h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T16:31:39.683

我一直在为 DefaultMutableTreeNode 设置一个唯一的 Id。一种方法是创建一个简单的 CustomUserObject 类，该类具有两个属性，Id 和 Title。然后我们可以将 CustomUserObject 实例分配为 Node UserObject 属性。

为确保在 Tree 结构中仅显示 Title，请覆盖 CustomUserObject 类中的 toString() 方法。

```
/* CustomUserObjectClass */

public class CustomUserObject implements Serializable {

    private int Id = 0;
    private String Title = null;

    public CustomUserObject(int id, String title) {

        this.Id = id;
        this.Title = title;

    }

    public CustomUserObject() {

    }

    public int getId() {
        return this.Id;
    }

    public String getTitle() {
        return this.Title;
    }

    public void setId(int id) {
        this.Id = id;
    }

    public void setSutTitle(String title) {
        this.sutTitle = title;
    }

    @Override
    public String toString() {
        return this.Title;

    } 
```

现在创建一个新节点：

```
CustomUserObject uObj = new CustomUserObject(1, "My First Node");
DefaultMutableTreeNode childNode = new DefaultMutableTreeNode(uObj);

uObj = childNode.getUserObject();
uObj.getId();
uObj.getTitle(); 
```

# ruby-on-rails - each(:as => :hash) 适用于 localhost 但不适用于 Heroku

> ID：11470100
> 
> 赞同：0
> 
> 时间：2012-07-13T12:00:29.530
> 
> 标签：ruby-on-rails, ruby, heroku, foreach

在我计算机上的 Rails 代码中，我正在编写一个纯 SQL 查询（我喜欢 SQL），然后使用以下命令解析结果：

```
friends.each(:as => :hash) do |row| 
```

这一切都很好，但是当我尝试将它推送到 Heroku 时，我收到以下错误：

```
ArgumentError (wrong number of arguments(1 for 0)): 
```

它在抱怨每个循环。为什么会发生这种情况，Heroku 是否以某种方式落后，就像旧版本的 Ruby 一样，您无法做到这一点？或者它是 MySQL 与 PostGreSQL（我在我的计算机上使用 MySQL）的事情？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-05-28T16:10:35.843

您可以使用其他相关语法，例如

ActiveRecord::Base.connection.select_rows("select * from friends") 将返回结果作为数组数组。

或者

ActiveRecord::Base.connection.select_values("select * from friends") 它将返回所有选定记录的第一列值的数组。

# playframework-2.0 - 在 Play 2.0 项目中配置 ScalaQuery

> ID：11470102
> 
> 赞同：3
> 
> 时间：2012-07-13T12:00:36.703
> 
> 标签：playframework-2.0, scalaquery

我想尝试在 Play 中使用 ScalaQuery！框架（版本 2.0.2），但我无法让它工作。我在 Build.scala 文件中添加了以下行：

```
 val appDependencies = Seq(
    "org.scalaquery" %% "scalaquery" % "0.9.5"
  ) 
```

但是当我运行“播放依赖项”命令时，我不断得到

```
sbt.ResolveException: unresolved dependency: org.scalaquery#scalaquery_2.9.1;0.9.5: not found 
```

我试图将罐子添加到 IntelliJ，但显然这还不够，而且我不知道如何才能识别罐子。有没有人成功让 ScalaQuery（或 Slick）在 Play 2 中工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T07:00:07.887

根据当前的[ScalaQuery 下载页面](http://scalaquery.org/download.html)，它是针对 scala-2.9.0-1 构建的，而 Play 使用的是 scala-2.9.1。因此，您需要显式附加您想要的依赖项的 scala 版本：

```
"org.scalaquery" % "scalaquery_2.9.0-1" % "0.9.5" 
```

# python - Pandas 高级索引分配

> ID：11470105
> 
> 赞同：2
> 
> 时间：2012-07-13T12:00:42.607
> 
> 标签：python, pandas

在 Pandas (v0.8.0) 中`DataFrame`，我想用另一列覆盖一个列。

下面的代码抛出列出的错误。

实现这一目标的有效替代方法是什么？

```
df = DataFrame({'a' : range(0,7),
'b' : np.random.randn(7),
'c' : np.random.randn(7),
'd' : np.random.randn(7),
'e' : np.random.randn(7),
'f' : np.random.randn(7),
'g' : np.random.randn(7)})

# overwrite cols
df.ix[:,'b':'d'] = df.ix[:, 'e':'g']

Traceback (most recent call last):
File "C:\Python27\lib\site-packages\pandas\core\indexing.py", line 68, in __setitem__
self._setitem_with_indexer(indexer, value)
File "C:\Python27\lib\site-packages\pandas\core\indexing.py", line 98, in   _setitem_with_indexer
raise ValueError('Setting mixed-type DataFrames with '
ValueError: Setting mixed-type DataFrames with array/DataFrame pieces not yet supported 
```

* * *

**已编辑**

作为一种排列，我怎么还能指定要设置的行的子集

```
df.ix[df['a'] < 3, 'b':'d'] = df.ix[df['a'] < 3, 'e':'g'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T22:00:05.593

问题是 using`.ix[]`返回一个视图到该 DataFrame 子集的实际内存对象，而不是由其内容组成的新 DataFrame。

而是使用

```
# The left-hand-side does not use .ix, since we're assigning into it.
df[['b','c']] = df.ix[:,'e':'f'].copy() 
```

请注意，`.copy()`如果您打算使用`.ix`来进行切片，则需要，否则它会将列“b”和“c”设置为*内存*中与列“e”和“f”相同的对象，这看起来不像你想在这里做什么。

或者，为了避免担心复制你，你可以这样做：

```
df[['b','c']] = df[['e','f']] 
```

如果索引的便利性对您很重要，模拟这种效果的一种方法是编写您自己的函数：

```
def col_range(df, col1, col2): 
    return list(dfrm.ix[dfrm.index.values[0],col1:col2].index) 
```

现在您可以执行以下操作：

```
df[col_range(df,'b','d')] = df.ix[:,'e':'g'].copy() 
```

注意：在定义中`col_range`我使用了第一个索引，它将选择数据框的第一行。我这样做是因为仅仅为了选择一系列列而查看整个数据框似乎很浪费，而一行可能无关紧要。由于以这种方式切片会产生一个系列，因此提取列的方法是实际获取索引，并将它们作为列表返回。

**为额外的行切片请求添加：**

要在赋值中指定一组行，您可以使用`.ix`，但您只需在右侧指定一个值矩阵。在右侧有一个子数据帧的结构会导致问题。

```
df.ix[0:4,col_range(df,'b','d')] = df.ix[0:4,'e':'g'].values 
```

例如，您可以`[0:4]`用`[df.index.values[i]:df.index.values[j]]`或`[df.index.values[i] for i in range(N)]`什至用逻辑值替换 ，例如`[df['a']>5]`仅获取“a”列超过 5 的行。

您希望列 'a' 大于 5 且列 'e' 小于 10 的逻辑索引示例的完整切片可能如下所示：

```
import numpy as np
my_rows = np.logical_and(df['a'] > 5), df['e'] < 10)
df.ix[my_rows,col_range(df,'b','d')] = df.ix[my_rows,'e':'g'].values 
```

在许多情况下，您不需要使用`.ix`左侧的 （我建议不要使用它，因为它只在某些情况下有效，而在其他情况下无效）。例如，类似：

```
df["A"] = np.repeat(False, len(df))
df["A"][df["B"] > 0] = True 
```

将按原样工作，无需特别`.ix`识别条件为真的行。当`.ix`右边的事情很复杂时，左边似乎需要。

# sql - 在多个表中插入一行，并分别维护一个关系

> ID：11470106
> 
> 赞同：4
> 
> 时间：2012-07-13T12:00:46.603
> 
> 标签：sql, sql-server-2008, ssis

尝试使用 SSIS 将特定场景中的数据从 excel 表插入 4 个表时，我有点迷失了。

我的 excel 表的每一行都需要分成 3 个表。然后需要将标识列值插入到第 4 个映射表中以保存关系。如何使用 SSIS 2008 有效地实现这一目标？

请注意，在下面的示例中，它固定 col4 和 5 进入第三个表。

这是数据示例

**Excel**

```
col1  col2  col3  col4  col5
a     b     c     d     3
a     x     c     y     5 
```

**表格1**

```
PK  col
1   a
2   a 
```

**表2**

```
PK    col1  col2
1     b     c
2     x     c 
```

**表3**

```
PK  Col
1   d
2   3
3   y
4   5 
```

**地图表**

```
PK   Table1_ID  Table2_ID  Table3_ID
1    1          1          1
2    1          1          2
2    2          2          3
2    2          2          4 
```

即使只建议使用基于 SQL 的方法，我也很好，因为我没有任何授权只使用 SSIS。额外的挑战是，在表 2 中，如果存在相同的数据行，我想在映射表中使用该 ID，而不是插入重复的行！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:22:50.490

多播是您正在寻找的组件。该组件接受一个输入源并将其复制到尽可能多的输出中。在这种情况下，您可以拥有 Excel 源并复制流程以将数据插入 Table1、Table2 和 Table3。

现在，棘手的部分是将这些身份恢复到您的 Map_Table 中。要么您不使用 IDENTITY 并使用其他方式（如 GUID，或您自己的增量计数器，您将在多播之前将其设置为派生列），要么您使用`@@IDENTITY`检索最后插入的身份。对于您当前的情况，使用`@@IDENTITY`听起来对我来说很痛苦，但这取决于您。如果数据不是那么大，我会选择 GUID。

`@@IDENTITY`不适用于 BULK 操作。它将仅检索最后创建的身份。另外，请记住我谈到了@@IDENTITY，但您可能希望使用它`IDENT_CURRENT('TableName')`来检索特定表的最后一个身份。`@@IDENTITY`检索在会话中创建的最后一个身份，无论范围如何。您可以使用它`SCOPE_IDENTITY()`来检索您范围内的最后一个身份。

# objective-c - SVGKit 不显示 potrace 生成的图像

> ID：11470110
> 
> 赞同：1
> 
> 时间：2012-07-13T12:00:51.880
> 
> 标签：objective-c, ios, c, xml, svg

我正在使用[potrace](http://potrace.sourceforge.net/)从 bmp 图像生成 svg 图像。生成的图像在 Illustrator 中显示良好，但是当我尝试在 iPad 上使用[SVGKit](https://github.com/SVGKit/SVGKit/)显示它时，它会加载一个空白图像。

SVGKit 适用于我用 Illustrator 创建的 svg 图像。

为了简化事情，我创建了一个带有简单黑线的 bmp 图像。

这是 Illustrator 生成的（SVGKit 确实显示了这一点）：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 15.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="1024px" height="768px" viewBox="0 0 1024 768" enable-background="new 0 0 1024 768" xml:space="preserve">
    <g>
        <g>
            <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M1,0c341,0,682.001,0,1023,0c0,255.995,0,512.006,0,768
        c-341.333,0-682.667,0-1024,0C0,513,0,258,0,3C-0.086,1.581-0.165,0.168,1,0z M160,391c0,5.667,0,11.333,0,17
        c204.999,0,410,0,615,0c0-6.667,0-13.333,0-20c-204.661,0-409.337,0-614,0C159.835,388.168,159.914,389.581,160,391z"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M161,388c204.663,0,409.339,0,614,0c0,6.667,0,13.333,0,20
        c-205,0-410.001,0-615,0c0-5.667,0-11.333,0-17C159.914,389.581,159.835,388.168,161,388z"/>
        </g>
    </g>
</svg> 
```

这是 potrace 生成的（SVGKit 没有显示正确，但 Illustrator 显示）：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1024.000000pt" height="768.000000pt" viewBox="0 0 1024.000000 768.000000" preserveAspectRatio="xMidYMid meet">
    <metadata>
    Created by -protrace define- -version define-, written by Peter Selinger 2001-2011
    </metadata>
    <g transform="translate(0.000000,768.000000) scale(0.100000,-0.100000)" fill="#000000" stroke="none">
        <path d="M1600 3700 l0 -100 3075 0 3075 0 0 100 0 100 -3075 0 -3075 0 0 -100z"/>
    </g>
</svg> 
```

所以据我所知，标题存在一些差异，但即使我在 Potrace 的结果中使用 Illustrator 结果中的完全相同的标题，SVGKit 仍然无法显示它。

由于 SVGKit 无法显示，potrace 的结果有什么问题/不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:31:22.457

就是变身。SVGKit 的核心构建不支持转换。

我的实验分支（最终将合并到核心中）对转换有很好的支持——它包括矩阵、翻译……我不确定 Scale（如果它缺失，只需几分钟即可添加——如果你这样做了搜索“矩阵”我想你会很快找到代码。

注意：这个分支改变了加载 SVG 的语法。它要简单得多，但你必须调用一个不同的类（SVGKImage）。页面底部自述文件的完整说明：

[https://github.com/adamgit/SVGKit/tree/transforms](https://github.com/adamgit/SVGKit/tree/transforms)

# iphone - 如何在我的 iPhone 项目中实现单例模式？

> ID：11470112
> 
> 赞同：1
> 
> 时间：2012-07-13T12:00:52.410
> 
> 标签：iphone, objective-c, ios, design-patterns, singleton

我正在做一个项目，我想使用单例模式模型。我想要我这个项目的任何数据模型休闲单例模式。我研究了关于这个的苹果文档

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW6](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW6)

和

[http://www.oodesign.com/singleton-pattern.html](http://www.oodesign.com/singleton-pattern.html)

[http://www.daveoncode.com/2011/12/19/fundamental-ios-design-patterns-sharedinstance-singleton-objective-c/](http://www.daveoncode.com/2011/12/19/fundamental-ios-design-patterns-sharedinstance-singleton-objective-c/)

现在我知道我的自定义对象类应该遵循分配对象的主要规则，但是我需要完整的实现，比如使用这个类对象我是 iphone 应用程序开发的新手，所以如果我在这个问题的任何地方错了，请指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:04:19.467

尝试这个：

```
@implementation Singleton

+ (Singleton *)sharedInstance
{
     static Singleton *obj = nil;

    if (obj == nil)
        obj = [[self alloc] init];

    return obj;
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:09:35.043

如果你可以针对iOS 4或更高版本，我会采取以下方式：

```
//.h
+(MySingletonClass *)mySharedInstance;
-(void)doSomething;

//.m
+(MySingletonClass *)mySharedInstance {
    static dispatch_once_t pred;
    static MySingletonClass *shared = nil;

    dispatch_once(&pred, ^{
      shared = [[MySingletonClass alloc] init];
    });
    return shared;
}

-(void)doSomething
{
}

// override also the init if you want 
```

要访问它，请执行`#import MySingletonClass.h`并在任何您想要的地方使用它，如下所示：

```
MySingletonClass* mySharedInstance = [MySingletonClass mySharedInstance];
[mySharedInstance doSomething]; 
```

> 我想要我这个项目的任何数据模型休闲单例模式。

根据我的经验，我不会滥用单身人士。应用程序可能变得难以维护。为避免这种情况，请将数据模型放在单例中。您可以直接访问数据模型（围绕它们创建属性）或使用公共方法（例如`doSomething`）作为包装器。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:06:08.943

```
static MyClass *_sharedInstance;

+ (MyClass *)sharedMyClass
{
    @synchronized([MyClass class]) {
        if (_sharedInstance == nil)
            [[self alloc] init];

        return _sharedInstance;
    }

    return nil;
}

+(id) alloc
{
    @synchronized([MyClass class]) {
        NSAssert(_sharedInstance == nil, @"Attempted to allocate a second instance of MyClass.");
        _sharedInstance = [super alloc];
        return _sharedInstance;
    }

    return nil;
}

+ (id) allocWithZone:(NSZone *)zone 
{
    @synchronized([MyClass class]) {
        NSAssert(_sharedInstance == nil, @"Attempted to allocate a second instance of MyClass.");
        _sharedInstance= [super allocWithZone:zone];
        return _sharedInstance;
    }
    return nil; //on subsequent allocation attempts return nil
}

- (id) copyWithZone:(NSZone *)zone 
{
    return self;
}

- (id)retain
{
    return self;
}

- (NSUInteger)retainCount
{
    return NSUIntegerMax;
}

- (oneway void)release
{
    // Do nothing
}

- (id)autorelease
{
    return self;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-14T23:38:27.320

我用：

```
#import <Foundation/Foundation.h>

@interface iCode_Framework : NSObject

@property (readonly, nonatomic) unsigned int iBufCapacity;
@property (readonly, nonatomic) unsigned int iPort;
@property (readonly, nonatomic) NSString * urlStr;

@end

#import "iCode_Framework.h"

static iCode_Framework * instance;

@implementation iCode_Framework

@dynamic iBufCapacity;
@dynamic iPort;
@dynamic urlStr;

- (unsigned int)iBufCapacity
{
    return 1024u;
};

- (unsigned int)iPort
{
    return 1978u;
};

- (NSString *)urlStr
{
    return @"localhost";
};

+ (void)initialize
{
    if (!instance) {
        instance = [[super allocWithZone:NULL] init];
    }
}

+ (id)allocWithZone:(NSZone * const)notUsed
{
    return instance;
}

@end 
```

它的使用与普通类完全一样，您调用 alloc 和 init！分配给变量以给出简写通常很方便，因为 alloc 和 init 很长，例如：

```
#import "iCode_FrameworkTests.h"
#import "iCode_Framework.h"

static iCode_Framework * c;

@implementation iCode_FrameworkTests

+ (void)initialize
{
    c  = [[iCode_Framework alloc] init];
}

- (void)setUp
{
    [super setUp];

    // Set-up code here.
}

- (void)tearDown
{
    // Tear-down code here.

    [super tearDown];
}

- (void)testSingletonNotNil
{
    STAssertNotNil(c, nil);
}

- (void)testSingletonProperty
{
    STAssertEqualObjects(c, [iCode_Framework alloc], nil);
}

- (void)testIBufCapacity
{
    STAssertEquals(c.iBufCapacity, 1024u, nil);
}

@end 
```

这种方法的优点是它的使用与任何其他类完全一样，因此可以模拟进行测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T13:02:05.137

通常我在

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

方法并让它存在于该对象中。我使用宏将其提供给应用程序的其余部分：

```
#define APPLICATION ((AppDelegate*)([UIApplication sharedApplication].delegate)) 
```

作为应用程序委托的只读属性

如果您要进行模拟，这种方法的好处是它只是另一个对象属性，而不是隐藏的静态对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T12:05:55.793

这可能是一个有用的参考：[http ://cocoasamurai.blogspot.com/2011/04/singletons-your-doing-them-wrong.html](http://cocoasamurai.blogspot.com/2011/04/singletons-your-doing-them-wrong.html)

# c# - ADFS - Windows 集成 OR 表单身份验证

> ID：11470125
> 
> 赞同：3
> 
> 时间：2012-07-13T12:01:42.787
> 
> 标签：c#, .net, adfs

我正在配置 ADFS 服务器，并试图为我们的依赖方应用程序实现用户友好的登录。

据我所知，目前有两个相关选项：

*   **Windows 身份验证**：这作为单点登录提供程序非常有用，但如果用户当前不在正确的 Windows 域中，则会提供对用户不友好的弹出窗口。
*   **表单身份验证**：无论用户来自何处，这将始终要求登录方法。

我的问题是，是否有可能满足这些要求：

*   如果用户使用 windows 帐户登录，请提供 SSO
*   否则，显示表单登录页面并让用户输入他的 Windows 凭据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T13:45:02.233

一般而言，没有程序化的方式来检测用户是否在域上或不是来自网站。因为当您的站点配置了 Windows 身份验证（并禁用匿名）时，ntlm 质询会发送到浏览器，并且如果您不在域中，则会弹出凭据提示。

[https://serverfault.com/questions/380302/can-i-detect-authenticated-domain-users-in-iis-asp-net-without-prompting-every](https://serverfault.com/questions/380302/can-i-detect-authenticated-domain-users-in-iis-asp-net-without-prompting-every)

实现这一点的方法是使用 DNS，这也是 ADFS 通过引入代理角色所推荐的。您将让内部 DNS 解析`login.yourcompany.com`为启用了 Windows 身份验证的内部 ADFS，并将外部 DNS 解析`login.yourcompany.com`为启用了表单身份验证的代理 ADFS 角色。因此，您需要在 DMZ 上托管另一台服务器，以便网络/域之外的用户可以访问它。

除非您在同一 ADFS 服务器上绑定到外部 IP 的人工网站并且该网站重定向到“/adfs/ls/forms”，否则无法使用单个 ADFS 服务器执行此操作"

有关代理及其设置的更多信息 [http://blogs.technet.com/b/askds/archive/2012/01/05/understanding-the-ad-fs-2-0-proxy.aspx](http://blogs.technet.com/b/askds/archive/2012/01/05/understanding-the-ad-fs-2-0-proxy.aspx)

马蒂亚斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T17:25:53.097

您可能会发现它很有趣，根据浏览器通知的用户代理字符串定向形成身份验证或集成身份验证：[https ://blogs.ncl.ac.uk/isg/?p=296](https://blogs.ncl.ac.uk/isg/?p=296)

# c - 关于 C 列表的练习

> ID：11470129
> 
> 赞同：1
> 
> 时间：2012-07-13T12:01:54.727
> 
> 标签：c, list, linked-list

我需要有关链接列表的以下代码的帮助：

```
#include <stdlib.h>
#include <stdio.h>

struct nodo {
    int d;
    struct nodo *next;
};

struct nodo *full();

int main()
{
    struct nodo *l;
    /* l=(struct nodo *)malloc(sizeof(struct nodo)); */
    l = full();
    while(l!=NULL) {
        printf("-->%d\n", l->d);
        l  =l->next;
    }
    system("PAUSE");
}
struct nodo *full()
{
    int i;
    struct nodo *head, *nes;
    head = (struct nodo *)malloc(sizeof(struct nodo));
    head->next = NULL;
    for(i = 1; i < 5; i++) {
        nes = (struct nodo *)malloc(sizeof(struct nodo));
        printf("Insert the %d element:\n", i);
        scanf("%d", &nes->d);
        nes->next = head;
        head = nes;
    }
    return head;
} 
```

例如，如果我尝试输入`1, 2, 3, 4`，我会得到以下输出：

```
 -->4
 -->3
 -->2
 -->1
 -->9708864 
```

为什么我得到最后一个号码？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:27:06.423

正如@Vinska 在评论中指出的那样，第 3 行`full()`是不必要的；它正在创建一个额外的节点。

有问题的行是

`head = (struct nodo *)malloc(sizeof(struct nodo));`

相反，说

`head = NULL`

使用您现有的代码，您的链表有 5 个元素。第一个是在上述行上创建的。正如预期的那样，其余四个项目在循环中创建，总共有 5 个元素。

该`9708864`数字是垃圾值。它是您调用时发生在内存中的任何内容`malloc()`。这就是为什么您必须初始化所有变量的原因！或者，在这种情况下，使用`memset()`或`calloc()`将这些块设置为某个合理的值。（但是，无论如何，这条线在这里完全是多余的。）

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:31:20.617

在您的代码中，我没有看到您保留了链表的开头。我会这样做：

```
struct nodo *full()
{
    int i;
    struct nodo *head, *nes;
    head = (struct nodo *)malloc(sizeof(struct nodo));
    nes = head;

    for(i = 1; i < 5; i++) {
        nes->next = (struct nodo *)malloc(sizeof(struct nodo));
        printf("Insert the %d element:", i);
        scanf("%d", &nes->d);
        printf("%s","\n");
        nes = nes->next;
    }
    return head;
} 
```

这将创建列表的头部，然后使用您的“运行”或“当前”列表指针 - nes - 作为列表创建者。

在创建列表时，head 仍然指向列表的头部。

我进行了另一项修改，以便在您输入数字后出现行终止符。

# android - sqlite数据库中的数据丢失

> ID：11470136
> 
> 赞同：0
> 
> 时间：2012-07-13T12:02:06.630
> 
> 标签：android, sqlite

我正在使用 sqlite 在我的应用程序中存储数据。数据被正确存储（我可以在数据库中看到它）并且被正确提取。

然而，大约一天后，当我回到我的应用程序时，数据库丢失了一些数据。我已经进行了调试以验证正在显示的内容是存储在数据库中的内容。有谁知道发生这种情况的任何示例或场景？为什么会发生，我能做些什么来阻止它发生？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:49:08.393

听起来好像您可能正在开始交易，而不是完成交易。管理事务的正确方法是：

```
db.beginTransaction();
try {
    // insert data here
    db.setTransactionSuccessful();
} finally {
    db.endTransaction();
} 
```

# php - 无法获取最后一个数组值

> ID：11470138
> 
> 赞同：0
> 
> 时间：2012-07-13T12:02:22.503
> 
> 标签：php, arrays, for-loop

我不明白为什么我的数组会被循环切割？

```
Array
(
    [0] => Array
        (
            [name] => order
            [value] => asd
        )

    [1] => Array
        (
            [name] => item
            [value] => aa
        )

    [2] => Array
        (
            [name] => quant
            [value] => 5
        )

    [3] => Array
        (
            [name] => price
            [value] => 20
        )

) 
```

我的带有 for 循环的 php 代码：

```
for($i = 0; $i < count($json_array); $i++)
{
    echo $json_array[$i]['name'];
} 
```

我得到的结果是：`orderitemquant`但是为什么最后一个值`price`消失了？这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:06:25.447

你试过使用`foreach`吗？在我看来，它更适合迭代你的数组。

```
foreach($json_array as $sub_array) {
    echo $sub_array['name'];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T14:20:44.047

试试这个，一个错误：

```
for($i = 0; $i =< count($json_array); $i++)
{
    echo $json_array[$i]['name'];
} 
```

# android - 带有菜单的 android 对话框

> ID：11470150
> 
> 赞同：11
> 
> 时间：2012-07-13T12:03:19.727
> 
> 标签：android, menu, dialog

有什么方法可以通过膨胀菜单资源来创建对话框`custom_menu.xml`我希望它显示在我的自定义对话框中

想`Menu` 在自定义视图中添加对象

# slidedown - 事件 slideDown 无法正常工作

> ID：11470157
> 
> 赞同：0
> 
> 时间：2012-07-13T12:03:42.207
> 
> 标签：slidedown

我在 slideDown 方法中有问题。

事件 slideDown 无法正常工作...当我单击按钮运行 slideDown 方法时，这半部分打开并快速关闭：（此页面用于密码恢复并使用 PasswordRecovery

```
<asp:Content ID="Content2" ContentPlaceHolderID="js" runat="server">
        <script type="text/javascript">
            $(document).ready(function () {
                $(".passrecovery-btn").click(function () {
                    $("#pass-error").slideDown('slow'); 
                });
            });
        </script>
    </asp:Content>
    <asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
        <div class="page-content">
            <div class="password-recovery">
                <div class="identify-account">
                    <h1 class="identify">Identify Your Account</h1>
                    <hr />
                </div>
                <asp:PasswordRecovery ID="PassRecovery" runat="server">
                    <QuestionTemplate>
                        <table cellpadding="1" cellspacing="0" style="border-collapse:collapse;">
                            <tr>
                                <td>
                                    <table cellpadding="0">
                                        <tr>
                                            <td align="center" colspan="2">
                                                Identity Confirmation</td>
                                        </tr>
                                        <tr>
                                            <td align="center" colspan="2">
                                                Answer the following question to receive your password.</td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                User Name:</td>
                                            <td>
                                                <asp:Literal ID="UserName" runat="server"></asp:Literal>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                Question:</td>
                                            <td>
                                                <asp:Literal ID="Question" runat="server"></asp:Literal>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <asp:Label ID="AnswerLabel" runat="server" AssociatedControlID="Answer">Answer:</asp:Label>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="Answer" runat="server"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="AnswerRequired" runat="server" 
                                                    ControlToValidate="Answer" ErrorMessage="Answer is required." 
                                                    ToolTip="Answer is required." ValidationGroup="PassRecovery">*</asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="center" colspan="2" style="color:Red;">
                                                <asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right" colspan="2">
                                                <asp:Button ID="SubmitButton" runat="server" CommandName="Submit" Text="Submit" 
                                                    ValidationGroup="PassRecovery" CssClass="passrecovery-btn" />
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </QuestionTemplate>
                    <UserNameTemplate>
                        <table cellpadding="1" cellspacing="0" style="border-collapse:collapse;">
                            <tr>
                                <td>
                                    <table cellpadding="0">
                                        <tr>
                                            <td align="center" colspan="2">
                                                Forgot Your Password?</td>
                                        </tr>
                                        <tr>
                                            <td align="center" colspan="2">
                                                Enter your User Name to receive your password.</td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                                    ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                                    ToolTip="User Name is required." ValidationGroup="PassRecovery">*</asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>

                                            <td align="right" colspan="2">
                                                <asp:Button ID="SubmitButton" runat="server" CommandName="Submit" Text="Submit" 
                                                    ValidationGroup="PassRecovery" CssClass="passrecovery-btn" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="center" colspan="2" style="color:Red;">
                                                <div class="pass-error" id="pass-error"><asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal></div>
                                            </td>
                                        </tr>
                                </table>
                                <div class="loading">
                                    <img src="../Static/images/Loadloading.gif" width="16" height="11" alt="" />
                                </div>
                            </tr>
                        </table>
                    </UserNameTemplate>
                </asp:PasswordRecovery>
            </div>
    </div>
    </asp:Content>

                    Css:

                    div.password-recovery
                    {
                        border:1px solid #333;
                        width:300px;
                        margin:0px auto;
                        text-align:center;
                        padding:30px 60px 0px 60px;
                        margin-top:30px;
                        font-family: 'lucida grande', tahoma, verdana, arial, sans-serif;
                        font-size: 12px;
                        border-radius:5px;
                        overflow:visible;
                    }

                    div.pass-error{display:none;border:1px solid black;border-radius:5px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T15:55:11.960

您需要像这样在css中将要向下滑动的对象的显示设置为无

```
.passrecovery-btn {
          display: none;
} 
```

# facebook - 统一线程还没有对公众开放？

> ID：11470158
> 
> 赞同：4
> 
> 时间：2012-07-13T12:03:48.493
> 
> 标签：facebook, messaging, facebook-fql

根据 Facebook 的说法，他们早早发布了新的消息系统， [http://developers.facebook.com/blog/post/591/](http://developers.facebook.com/blog/post/591/)

从博客：

> 应用程序应迁移到新的消息传递 Graph API 端点和消息传递 FQL 表（'unified_message' 和 'unified_thread'）。我们将在未来宣布的日期正式弃用旧的消息传递 REST API、图形 API 和消息传递 FQL 表。

但我仍然得到“必须是开发人员”。这只是我，还是对任何人都有效？

我将尝试使用 FQL 中的统一线程表。Facebook 建议移到那张桌子，但 6 个月后它仍然无法正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:44:03.383

What method are you using to query the FQL? I am able to query this table without issue using the PHP SDK and making a graph call to /fql?q=query

# c# - C# MySQL Blob 字段 - 无法将存储在 blob 中的 zip 文件复制到另一个表

> ID：11470160
> 
> 赞同：1
> 
> 时间：2012-07-13T12:03:57.250
> 
> 标签：c#, mysql, blob, blobs, blobstorage

我有一个 zip 文件由我无法控制的第三方应用程序存储在表中。但是，我确实可以访问 MySQL 数据库。

我想要做的是执行一个 SELECT 语句来检索一个 blob 字段并将这条记录复制到另一个表中。但另一方面，我确实看到远处的 blob 字段，但它不是一个 zip 文件，它是一个文本文件，上面写着 System.Byte[] 就是这样 - 任何人都知道是什么原因以及如何修理它？

继承人我在下面 - 再次非常感谢任何帮助:)

```
OdbcCommand broadcastSelect = new OdbcCommand("select * from exchange where status='1' and type='UPDATE'", cloud);
                OdbcDataReader DbReader = Select.ExecuteReader();
                int fCount = DbReader.FieldCount;
                String type = "";
                String filename = "";
                byte[] data = null;
                int status = 0;

                while (DbReader.Read())
                {
                    if (DbReader.IsDBNull(0))
                    {
                        type = "BLANK";
                    }
                    else
                    {
                        type = (string)DbReader[0];
                    }
                    if (DbReader.IsDBNull(1))
                    {
                        filename = "BLANK";
                    }
                    else
                    {
                        filename = (string)DbReader[1];
                    }
                    if (DbReader.IsDBNull(2))
                    {
                        data = new byte[1];
                    }
                    else
                    {
                        data = (byte[])DbReader[2];
                    }
                    if (DbReader.IsDBNull(3))
                    {
                        status = 0;
                    }
                    else
                    {
                        status = (int)DbReader[3];
                    }

                    OdbcCommand Copy = new OdbcCommand("INSERT INTO exchange(type,filename,data,status) VALUES('" + type + "','" + filename + "','"
                        + data + "','" + status + "')", local);
                    Copy.ExecuteNonQuery();

                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:27:44.977

使用 sql 参数插入二进制数据。

```
OdbcParameter param = new OdbcParameter("@file", SqlDbType.Binary); 
```

---已更新，希望下面给出的代码对您有所帮助。

```
 OdbcCommand broadcastSelect = new OdbcCommand("select * from exchange where status='1' and type='UPDATE'", cloud);
        OdbcDataReader DbReader = Select.ExecuteReader();
        int fCount = DbReader.FieldCount;
        String type = "";
        String filename = "";
        byte[] data = null;
        int status = 0;
        OdbcParameter param = null;
        while (DbReader.Read())
        {
            if (DbReader.IsDBNull(0))
            {
                type = "BLANK";
            }
            else
            {
                type = (string)DbReader[0];
            }
            if (DbReader.IsDBNull(1))
            {
                filename = "BLANK";
            }
            else
            {
                filename = (string)DbReader[1];
            }
            if (DbReader.IsDBNull(2))
            {
                param = new OdbcParameter("@file", SqlDbType.Binary);
                param.DbType = DbType.Binary;
                param.Value = new byte[1];                
                command.Parameters.Add(param); 
            }
            else
            {
                param = new OdbcParameter("@file", SqlDbType.Binary);
                param.DbType = DbType.Binary;
                param.Value = (byte[])dbReader[2];
                param.Size = ((byte[])dbReader[2]).Length; 
                command.Parameters.Add(param); 
            }
            if (DbReader.IsDBNull(3))
            {
                status = 0;
            }
            else
            {
                status = (int)DbReader[3];
            }

            OdbcCommand Copy = new OdbcCommand("INSERT INTO exchange(type,filename,data,status) VALUES('" + type + "','" + filename + "',@file,'" + status + "')", local);
            Copy.ExecuteNonQuery(); 
```

# c# - 在哪里将业务模型转换为视图模型？

> ID：11470164
> 
> 赞同：18
> 
> 时间：2012-07-13T12:04:19.117
> 
> 标签：c#, asp.net-mvc, entity-framework, repository-pattern, unit-of-work

在我的 ASP.NET MVC 应用程序中，我使用工作单元和存储库模式进行数据访问。

使用工作单元类和其中定义的存储库，我在控制器中获取相关的实体集。以我的初学者知识，我可以想到两种方法来获取业务模型并将其转换为视图模型。

*   存储库将业务模型返回给控制器，该模型比映射到视图模型，或者
*   存储库本身将业务模型转换为视图模型，然后返回给控制器。

目前我正在使用第一种方法，但是对于具有很多属性的视图模型，我的控制器代码开始变得丑陋和冗长。

另一方面，我在想，由于我的存储库被称为 UserRepository（例如），它应该直接返回业务模型，而不是某些仅对单个视图有用的模型。

您认为其中哪一个是大型项目的更好实践？有替代方法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-13T12:10:06.577

存储库应该返回域模型，而不是视图模型。至于模型和视图模型之间的映射，我个人使用[AutoMapper](http://automapper.org/)，所以我有一个单独的映射层，但是这个层是从控制器调用的。

以下是典型的 GET 控制器操作的样子：

```
public ActionResult Foo(int id)
{
    // the controller queries the repository to retrieve a domain model
    Bar domainModel = Repository.Get(id);

    // The controller converts the domain model to a view model
    // In this example I use AutoMapper, so the controller actually delegates
    // this mapping to AutoMapper but if you don't have a separate mapping layer
    // you could do the mapping here as well.
    BarViewModel viewModel = Mapper.Map<Bar, BarViewModel>(domainModel);

    // The controller passes a view model to the view
    return View(viewModel);
} 
```

当然可以使用自定义操作过滤器来缩短它以避免重复的映射逻辑：

```
[AutoMap(typeof(Bar), typeof(BarViewModel))]
public ActionResult Foo(int id)
{
    Bar domainModel = Repository.Get(id);
    return View(domainModel);
} 
```

AutoMap 自定义操作过滤器订阅 OnActionExecuted 事件，拦截传递给视图结果的模型，调用映射层（在我的例子中为 AutoMapper）将其转换为视图模型并将其替换为视图。视图当然是视图模型的强类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T12:08:21.820

我认为您的存储库应该返回业务模型。

然后，您可以使用[**Automapper**](http://automapper.org/)之类的工具将属性自动映射到您的视图模型，并且可以摆脱手动映射代码。如果您不想将所有业务实体的属性或其复杂结构暴露给视图，这种方法非常有用。

您也可能会发现这篇[文章](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)很有帮助，您可以在其中摆脱手动映射调用（在某种程度上），它还提供了一个很好的示例，如何使用视图模型等（在我看来）-或者至少获得某种灵感。

摘自帖子（该属性将业务模型转换为视图模型）：

```
[AutoMap(typeof(Product), typeof(ShowProduct))]
public ActionResult Details(int id)
{
    var product = _productRepository.GetById(id);

    return View(product);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-26T01:20:03.837

正如其他答案中提到的，AutoMapper 是一个很好的解决方案。

但是，您也可以编写扩展方法来将您的实体转换为 ViewModel，反之亦然。也许这对于实体和模型类较少的小型项目更好。

例子：

```
public static class Extension
{
    public static MyViewModel ToModel(this MyEntity x)
    {
        return new MyViewModel
        {
            Id = x.Id,
            Name = x.FirstName + " " + x.LastName,
            UserId = x.User?.Id
        };
    }
} 
```

并使用：

```
// NOTE: "MyEntityTable" is of type "MyEntity"

List<MyViewModel> toReturn = _db.MyEntityTable
                  .Include(x => x.User) // Include other tables to join.
                  .Select(x => x.ToModel())
                  .ToList(); 
```

# javascript - Phonegap 本地存储和面向对象的 JS

> ID：11470167
> 
> 赞同：0
> 
> 时间：2012-07-13T12:04:37.360
> 
> 标签：javascript, html, cordova, sqlite, local-storage

我有以下方法：

```
DBConnection.prototype.successHandler = function(){
  console.log("DB_INFO: Schema created");
  for (k in this) console.log(k);
  this.setStatus(DB_STATUS_OK);
} 
```

我在这样的事务中调用它：

```
DBConnection.prototype.createSchema = function(){
  try {
    this.c2db.transaction(
      function(tx){
        tx.executeSql('CREATE TABLE IF NOT EXISTS person(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL DEFAULT "");',
        [], this.nullDataHandler, this.errorHandler);
        tx.executeSql("INSERT INTO person(id, name) VALUES (NULL, 'miloud');",
          [], this.nullDataHandler, this.errorHandler);
      },
      this.errorHandler,
      this.successHandler
    );
  } catch(e){
    console.log("DB_ERROR: error during insert with message: " + e);
    return;
  }
} 
```

问题是我得到：**Uncaught TypeError: Object [object Window] has no method 'setStatus'** 这清楚地表明我正在访问的不是`DBConnection`我在成功回调中使用的实例。怎么来的？this 在回调中指的是什么？有没有办法克服这个问题？

编辑

回调定义为：

```
DBConnection.prototype.errorHandler = function(errorMsg){
  console.log("DB_ERROR: error creating schema with msg " + errorMsg.message);
}
DBConnection.prototype.successHandler = function(){
  console.log("DB_INFO: Schema created");
  for (k in this) console.log(k);
  this.setStatus(DB_STATUS_OK);
} 
```

而 setStatus 方法为

```
DBConnection.prototype.setStatus = function(str_status){
  localStorage.setItem(db_name, str_status);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T15:42:06.793

发生这种情况是因为`this`在 javascript 函数中，在调用时以点符号表示它之前的对象。但是 javascript 中的函数是一等值，可以在对象之外调用（或者实际上，对于完全不同的对象）。例如，如果`obj`是一个对象：

```
obj.myFunc = function() { console.log(this) };
obj.myFunc(); // <- Here this === obj
var freeFunc = obj.myFunc; // The function is just a value, we can pass it around
freeFunc(); // <- Now this === the top object (normally window)
            // Still the same function, but *how* it was called matters 
```

您正在做的是将引用的函数传递给`this.successHandler`调用`transaction`，但该函数对您从中获取它的对象一无所知。当它被调用时，`transaction`它在没有对象的情况下执行，`this`只是变成`window`.

为了解决这个问题，您可以使用 javascript 具有闭包的事实并使用另一个匿名函数包装该函数：

```
DBConnection.prototype.createSchema = function(){
  try {

    var that = this;

    this.c2db.transaction(
      function(tx){
        tx.executeSql('CREATE TABLE IF NOT EXISTS person(id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL DEFAULT "");',
        [], this.nullDataHandler, this.errorHandler);
        tx.executeSql("INSERT INTO person(id, name) VALUES (NULL, 'miloud');",
          [], this.nullDataHandler, this.errorHandler);
      },
      this.errorHandler,
      function() { that.successHandler(); }
    );
  } catch(e){
    console.log("DB_ERROR: error during insert with message: " + e);
    return;
  }
} 
```

现在`successHandler`会用`that`as调用，`this`和原来的一样`this`。

这是一个常见的误解，`this`但网上也有很多解释，只是谷歌“javascript this”。

# css - css未在codeigniter中加载

> ID：11470171
> 
> 赞同：2
> 
> 时间：2012-07-13T12:04:47.183
> 
> 标签：css, codeigniter, base-url

我有这个代码

```
<link href = "<?php echo base_url(); ?>css/style.css” rel=”stylesheet" type="text/css" /> 
```

它应该`style.css`从 css 文件夹加载。`echo base_url()`本身有效。我也自动加载了`url helper`，所以我真的没有看到这里的问题，但它仍然没有加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:46:20.217

css 文件的默认位置与应用程序相同，即

```
/css
/application 
```

按照建议检查路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:20:48.473

还要确保该目录没有被`.htaccess`文件“阻止”，如果您使用它来删除 index.php

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

就我个人而言，我会将 css 目录移动到资产目录中：

```
/assets/css
/assets/js
/assets/img 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T14:32:49.393

查看页面的源代码并单击 css 文件链接，如果是 404s 然后检查您的 .htaccess 文件并确保该目录可用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:09:03.643

尝试在[user_guide上的函数中包含相对链接](http://codeigniter.com/user_guide/helpers/url_helper.html)

```
< link href = " < ? php echo base_url('css/style.css') ; ? >” rel=”stylesheet" type="text/css"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T12:10:10.333

application/views/globals/css/style.css" type="text/css" media="screen" />
或任何您的文件夹结构！

# google-app-engine - “无需更新 index.yaml”淹没控制台

> ID：11470172
> 
> 赞同：1
> 
> 时间：2012-07-13T12:04:47.923
> 
> 标签：google-app-engine

在我调试我的 App Engine 服务器的那一刻，我经常使用清除数据存储区的指令来启动它，然后向它发射几 KB 的数据，以期弄清楚我为什么会出现一些报告写的没有正确生成。

然而，阻碍开发并引起一些轻微担忧的一件事是控制台充斥着以下输出：

```
DEBUG    2012-07-13 11:44:34,033 datastore_stub_index.py:181] No need to update index.yaml
DEBUG    2012-07-13 11:44:34,221 datastore_stub_index.py:181] No need to update index.yaml
DEBUG    2012-07-13 11:44:34,406 datastore_stub_index.py:181] No need to update index.yaml
DEBUG    2012-07-13 11:44:34,601 datastore_stub_index.py:181] No need to update index.yaml 
```

我有两个问题：我是否应该担心大量表明不需要更改 index.yaml 的消息，如果不需要，有没有办法抑制警告？如果我应该担心，有人能指出我正确的方向吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T18:31:09.633

无需担心，只是表明 devserver 不需要向 index.yaml 文件添加新项目。[此处](https://developers.google.com/appengine/docs/python/config/indexconfig#About_index_yaml)将对此进行更详细的说明。

> 应用程序进行的每个数据存储查询都需要相应的索引。复杂查询的索引必须在名为 index.yaml 的配置文件中定义。
> 
> 当应用程序尝试执行需要在配置文件中没有适当条目的索引的查询时，开发 Web 服务器会自动将项目添加到此文件中。

如果我没记错的话，这应该只在`--debug`标志传递给开发服务器时打印，所以它可能设置为您用来调用开发服务器的工具中的一个选项。

# php - 如何使用 JQuery 设置文本 HTML 输入字段的值？

> ID：11470178
> 
> 赞同：1
> 
> 时间：2012-07-13T12:05:07.077
> 
> 标签：php, ajax, jquery

有一个`text`名为 fiche_tache_ref 的 HTML 元素。在`javascript`页面文件夹之外的文件（.js）内，我想根据所选列表框的值设置其值：

```
function changerNatureRefTache(nature_tache_id) { // nature_tache_id is from a listbox

    var http_ajax = $('#http_ajax').val();
    var html = $.ajax({
    data: "nature_tache_id="+nature_tache_id ,
    type: "POST",
    url: http_ajax+"referentiel/AjaxTacheChangerNatureTache.php" ,  
    async: false
    }).responseText;

        // here I want to set the value of the field

} 
```

AjaxTacheChangerNatureTache.php 的代码是：

```
<?php
    if (isset($_POST['nature_tache_id'])) {
        define("ROOT_PATH", "../../");
        require_once ROOT_PATH  . 'config.inc.php';
        require_once RP_MODELS  . 'nature_tache.class.php';
        $db     = new DbConn();
        $obj    = new nature_tache($db->getInstance());
        $ret    = $obj->recupererNatureTache($_POST['nature_tache_id']);
        $code   = $ret['nat_code'];
        echo $code;
    }
?> 
```

那么如何设置字段的值`JQuery`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:06:29.490

使用`val()`功能

```
$('#idofinput').val("text you want in the field"); 
```

由于您使用的是名称，您可以执行以下操作

```
$('input[name=fiche_tache_ref]').val("text you want in the field"); 
```

**由于名称不一定是唯一的，因此在使用名称作为选择器时要小心。我通常建议使用 id 代替。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:07:48.587

我没有正确理解您，但是这样的东西用于在 jquery 中设置输入元素的值：-

```
$("#elementid").val("myvalue"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:08:18.277

使用 的`val()`功能`Jquery`。

```
$('#IdOfTextbox').val("Some Text"); 
```

**[进一步参考](http://api.jquery.com/val/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:43:36.780

对于这个问题，你会得到很多相同的答案，因为这是 jquery 文档中容易实现的结果。

```
$("selector").val("new value"); 
```

但是我会给你一个提示，这将使你的 php 更干净一点，而不是像这样定义根路径：

```
define("ROOT_PATH", "../../"); 
```

您可以使用以下代码在 .htaccess 文件中设置包含路径：

```
php_value include_path ".:/path/to/your/application" 
```

然后您可以要求相对于该路径的文件（即`require_once('config.inc.php')`与您本质上所做的相反，即`require_once('../../config.inc.php')`.

.htaccess 文件应该位于包含您的应用程序的主目录中。

# opencv - 立体对中相机之间的距离

> ID：11470179
> 
> 赞同：1
> 
> 时间：2012-07-13T12:05:10.660
> 
> 标签：opencv, stereo-3d, point-clouds

我如何确定立体对中两个摄像头之间的最佳距离，以便使用 opencv 在点云中输出（对于城市中的广场）？

# c - 数组到结构铸造

> ID：11470185
> 
> 赞同：3
> 
> 时间：2012-07-13T12:05:30.023
> 
> 标签：c, arrays, pointers, structure

我有这三个结构，

```
typedef struct serial_header {
    int zigbeeMsgType;
    int seqNumber;
    int commandIdentifier;
    int dest;
    int src;
}serial_header_t;

typedef struct serial_packet {
  serial_header_t header;
  int data[];
} serial_packet_t; 
```

最后一个是

```
typedef struct readAttributePacket
{
     int                     u8SourceEndPointId;
     int                     u8DestinationEndPointId;
     int                     u16ClusterId;
     int                     bDirectionIsServerToClient;
     int                     u8NumberOfAttributesInRequest;
     int                     bIsManufacturerSpecific;
     int                     u16ManufacturerCode;
     int                     pu16AttributeRequestList[];
}readAttributePacket_t; 
```

我对这段代码感到不安，我只想将驻留在 serial_packet_t 中的 data[] 数组转换为 readAttributePacket_t 结构。我认为 data[] 应该是

```
data[]={0x01,0x01,0x04,0x02,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x01}; 
```

我需要将这些数据转换为 readAttributePacket_t 结构。但是下面的代码显示错误。

```
void main()
{
int a[]=  {0x32,0x00,0x31,0x69,0x69,0x00,0x00,0x01,0x01,0x04,0x02,0x00,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x01};
int i;
readAttributePacket_t *p;
serial_packet_t *data;

data = (serial_packet_t*)&a;

for(i=0;i<20;i++){
    printf(" %02x \n",a[i]);
}
p = (readAttributePacket_t *)&data->data;
printf("\nu8SourceEndPointId:%x \nu8DestinationEndPointId:%x \nu16ClusterId:%04x \nbDirectionIsServerToClient:%x \nu8NumberOfAttributesInRequest:%x \nbIsManufacturerSpecific:%x \nu16ManufacturerCode:%04x",p->u8SourceEndPointId,
    p->u8DestinationEndPointId,
    p->u16ClusterId,
    p->bDirectionIsServerToClient,
    p->u8NumberOfAttributesInRequest,
    p->bIsManufacturerSpecific,
    p->u16ManufacturerCode);

getch();
} 
```

输出应该像

```
u8SourceEndPointId=01
u8DestinationEndPointId=01
u16ClusterId=0402
bDirectionIsServerToClient=00
u8NumberOfAttributesInRequest=02
bIsManufacturerSpecific=00
u16ManufacturerCode=0000 
```

我怎样才能将 pu16AttributeRequestList[] 数组放入 readAttributePacket_t 结构中，应该这样，

```
pu16AttributeRequestList[0]=0000
pu16AttributeRequestList[1]=0001 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T12:09:59.587

您不能只将数组转换为结构，因为它们只是不兼容的类型。由于内存对齐限制，编译器需要在结构的字段之间插入填充，因此成员不会位于您可能期望的内存地址。解决方案：

1.  便携但手动操作更慢/更难（**首选**）：手动将结构的字段复制到数组。
2.  写得更短，但 GCC 特定：使用`__attribute__((packed))`关键字使 GCC 不会在结构字段之间引入填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:37:23.330

构造 3 个结构的并集。全部在相同的内存空间上。那么你甚至不需要投射。

# java - 充气城堡 1.47 和标准 JCE

> ID：11470188
> 
> 赞同：1
> 
> 时间：2012-07-13T12:05:47.027
> 
> 标签：java, bouncycastle, jce

我正在尝试创建一些辅助方法来创建（和签署）CSR、自签名证书等......我已经使用现已弃用的功能实现了一些方法。为了跟上最新的步伐，我已将 bouncycastle 升级到 1.47，这似乎有很大不同，我想知道两件事：

1）我似乎无法找到一个简明的例子列表。由于现在完成与以前类似的事情所必需的代码的额外冗长，这将是非常受欢迎的。

2) 在混入经典 JCE 内容的同时使用 bouncycastle 似乎非常困难，至少比以前要困难得多。是否有一个原因？

作为后者的一个例子，以生成一个 csr 为例，它曾经像这样做一样简单：

```
org.bouncycastle.jce.PKCS10CertificationRequest request = new org.bouncycastle.jce.PKCS10CertificationRequest(type.toString(), subject, pair.getPublic(), null, pair.getPrivate()); 
```

如果主题是“javax.security.auth.x500.X500Principal”，则私钥和公钥来自一般的“java.security.KeyPair”等。

现在我有类似的东西：

```
public byte[] generatePKCS10(KeyPair pair, SignatureType type, X500Principal subject) throws IOException {
    PKCS10CertificationRequestBuilder builder = new PKCS10CertificationRequestBuilder(
        new X500Name(subject.getName()),
        SubjectPublicKeyInfo.getInstance(pair.getPublic())
    );
    AlgorithmIdentifier sigAlgId = new DefaultSignatureAlgorithmIdentifierFinder().find(type.toString());
    AlgorithmIdentifier digAlgId = new DefaultDigestAlgorithmIdentifierFinder().find(sigAlgId);
    AsymmetricKeyParameter keyParam = PrivateKeyFactory.createKey(pair.getPrivate().getEncoded());
    try {
        ContentSigner signer = new BcRSAContentSignerBuilder(sigAlgId, digAlgId).build(keyParam);
        PKCS10CertificationRequest csr = builder.build(signer);
        ContentVerifierProvider verifier = new JcaContentVerifierProviderBuilder().setProvider(new BouncyCastleProvider()).build(pair.getPublic());
        csr.isSignatureValid(verifier);
        return csr.getEncoded();
    }
    catch (OperatorCreationException e) {
        throw new IOException(e);
    }
    catch (PKCSException e) {
        throw new IOException(e);
    }
} 
```

是否有很多我缺少的简单转换实用程序或重载方法或特定于 JCE 的实现？许多谷歌搜索突出旧的（阅读：不推荐的）做事方式并没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:38:58.707

发布此消息后不久，我偶然发现了一个符合 JCE 的解决方案。似乎他们的很多类都有一个特定于 JCA 的扩展来处理所有必要的转换。例如，“X509v1CertificateBuilder”可以实例化为“new JcaX509v1CertificateBuilder()”，它采用 JCE 参数而不是 bouncycastle 特定的参数。

对于上面的例子：

```
PKCS10CertificationRequestBuilder builder = new JcaPKCS10CertificationRequestBuilder(
    subject,
    pair.getPublic()
); 
```

我希望这种模式保持...

# android - 通过代码重新添加时，小部件不响应

> ID：11470189
> 
> 赞同：4
> 
> 时间：2012-07-13T12:05:46.950
> 
> 标签：android, android-widget, launcher

我正在开发一个启动器。它让用户从列表中添加小部件，效果很好。当用户在屏幕上添加一个小部件时，我将有关小部件的信息（PackageName、ClassName 和它在屏幕上的坐标）存储在我的数据库中。

当应用程序重新启动（或设备本身）时，我通过代码添加那些（用户选择的）小部件：

```
// APPWIDGET_HOST_ID is any number you like
appWidgetManager = AppWidgetManager.getInstance(this);
appWidgetHost = new AppWidgetHost(this, APPWIDGET_HOST_ID);
AppWidgetProviderInfo newAppWidgetProviderInfo = new AppWidgetProviderInfo();

// Get an id
int appWidgetId = appWidgetHost.allocateAppWidgetId();

// Get the list of installed widgets
List<AppWidgetProviderInfo> appWidgetInfos = new ArrayList<AppWidgetProviderInfo>();
appWidgetInfos = appWidgetManager.getInstalledProviders();

for(int j = 0; j < appWidgetInfos.size(); j++)
{
    if (appWidgetInfos.get(j).provider.getPackageName().equals(PackageName) && appWidgetInfos.get(j).provider.getClassName().equals(ClassName))
    {
        // Get the full info of the required widget
        newAppWidgetProviderInfo = appWidgetInfos.get(j);
        break;
    }
 }

// Create Widget
AppWidgetHostView hostView = appWidgetHost.createView(this, appWidgetId, newAppWidgetProviderInfo);
hostView.setAppWidget(appWidgetId, newAppWidgetProviderInfo);

// Add it to your layout
RelativeLayout widgetLayout = (RelativeLayout) findViewById(R.id.widgetLayout);
widgetLayout.addView(hostView); 
```

小部件已成功添加到布局中，但似乎未启用/更新。它不响应点击（例如，模拟时钟）并且不显示任何数据（例如，音乐播放器小部件），尽管我已经放了这个：

```
@Override
protected void onStart() {
    super.onStart();
    appWidgetHost.startListening();
}

@Override
protected void onStop() {
    super.onStop();
    appWidgetHost.stopListening();
} 
```

我坚持了很长时间。搜索了很多，但似乎我是这个世界上唯一有这个问题的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-06-04T06:23:19.353

我们可以调用一个对话框，要求用户允许我们的应用程序能够使用以下代码绑定小部件 ID：

```
Intent intent = new Intent(AppWidgetManager.ACTION_APPWIDGET_BIND);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, sSavedWidgetId);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_PROVIDER, mWidgetInfo.provider);
startActivityForResult(intent, REQUEST_BIND_WIDGET); 
```

并绑定小部件 ID 以使它们实际使用：

```
Bundle opts = new Bundle();
opts.putInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH, maxWidth);
opts.putInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT, minHeight);
opts.putInt(AppWidgetManager.OPTION_APPWIDGET_MAX_WIDTH, maxWidth);
opts.putInt(AppWidgetManager.OPTION_APPWIDGET_MAX_HEIGHT, maxHeight);

widgetManager.bindAppWidgetIdIfAllowed(widgetId, mWidgetInfo, opts); 
```

欲了解更多信息，请参阅：

*   [AppWidgetManager.ACTION_APPWIDGET_BIND](https://developer.android.com/reference/android/appwidget/AppWidgetManager.html#ACTION_APPWIDGET_BIND)
*   [AppWidgetManager.bindAppWidgetIdIfAllowed()](https://developer.android.com/reference/android/appwidget/AppWidgetManager.html#bindAppWidgetIdIfAllowed(int,%20android.content.ComponentName))

我希望有人会在 5 年前回答同样的问题。

# android - 如何在 android 平台上的可执行文件中使用 CallStack（在 CallStack.tpp 中）？

> ID：11470190
> 
> 赞同：3
> 
> 时间：2012-07-13T12:05:48.650
> 
> 标签：android, linux, build, stack-trace, callstack

来自[https://stackoverflow.com/a/11467040/1442443的问题](https://stackoverflow.com/a/11467040/1442443)

**我的最终目标是转储用户空间堆栈。**

我尝试将如下的 cpp 文件构建为android 平台上的**可执行文件。**因此，通过调用 tryToGetStack()，我可以在运行时获取可执行文件的调用堆栈。

```
#include <utils/CallStack.h>
namespace android
{
    extern "C" void tryToGetStack()
    {
        CallStack stack;
        stack.update();
        stack.dump("");
    }
} 
```

并将 lib 设置添加到 Android.mak，因为 CallStack.tpp 在 libutils 中

> LOCAL_SHARED_LIBRARIES += libutils

但我总是收到错误消息：

> 错误：未定义对 'android::CallStack::CallStack()' 的引用
> 
> 错误：未定义对 'android::CallStack::update(int, int)' 的引用
> 
> ...

似乎可执行文件在链接时解析符号而不是在运行时加载 .so 文件？我是否遗漏了什么或者 Android 构建系统有一些限制？

我知道这是一个简单的问题，但我真的需要帮助......

**更新1**

我尝试将代码添加到另一个**可执行文件**。结果是一样的……有人知道android构建系统的规则吗？

**更新2**

我的控制台中有一些关键词**"target StaticExecutable: ..."**，我认为是答案。

[http://en.wikipedia.org/wiki/Static_executable](http://en.wikipedia.org/wiki/Static_executable)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T09:30:02.503

我的最终目标是**转储用户空间堆栈**。

从网上google了这么多信息后，我发现有4种方法：

1.  **ptrace**：[http://en.wikipedia.org/wiki/Ptrace](http://en.wikipedia.org/wiki/Ptrace)

    用ptrace真的很难用，需要先停止线程再用ptrace附加

2.  **_unwind_backtrace** : CallStack 使用的方式（CallStack.cpp 中的CallStack 类）

    例如：[http ://git.stlinux.com/?p=stm/uclibc.git;a=blob;f=libubacktrace/sysdeps/sh/backtrace.c;h=18b91b1bb3fa26344a521927c631553a410fcf56;hb=d6a3d9ece5922a337800a8e2ed4db7e226f9ccb3](http://git.stlinux.com/?p=stm/uclibc.git;a=blob;f=libubacktrace/sysdeps/sh/backtrace.c;h=18b91b1bb3fa26344a521927c631553a410fcf56;hb=d6a3d9ece5922a337800a8e2ed4db7e226f9ccb3)

    它有一个缺点：如果您将它用作线程正在处理信号，它将转储信号堆栈而不是转储线程堆栈

    同样的问题：[How to get fullstacktrace using _Unwind_Backtrace on SIGSEGV](https://stackoverflow.com/questions/6254058/how-to-get-fullstacktrace-using-unwind-backtrace-on-sigsegv)

3.  **回溯**：[http ://www.gnu.org/software/libc/manual/html_node/Backtraces.html](http://www.gnu.org/software/libc/manual/html_node/Backtraces.html)

    一个 GNU 扩展函数，在 Android 使用的 Bionic libc 中没有实现

    参考：[https ://stackoverflow.com/a/8295238/1442443](https://stackoverflow.com/a/8295238/1442443)

    参考： http: [//lists.puredata.info/pipermail/pd-list/2012-02/094258.html](http://lists.puredata.info/pipermail/pd-list/2012-02/094258.html)

4.  **转储用户空间线程堆栈的补丁**：[http ://www.gossamer-threads.com/lists/linux/kernel/1525096](http://www.gossamer-threads.com/lists/linux/kernel/1525096)

    但只能在 X86 架构中实现... orz

    我尝试将它移植到 android，不，它只显示堆栈的第一帧，因为 arm 不使用帧指针。

所以... 2 是答案。

但是，我想知道是否有人可以解决这个问题：[How to get fullstacktrace using _Unwind_Backtrace on SIGSEGV](https://stackoverflow.com/questions/6254058/how-to-get-fullstacktrace-using-unwind-backtrace-on-sigsegv)

**更新：**

如果你可以使用交叉编译器来使用glic编译你的代码，也许你可以使用 3\. backtrace ！ [http://communities.mentor.com/community/cs/archives/arm-gnu/msg02514.html](http://communities.mentor.com/community/cs/archives/arm-gnu/msg02514.html)

**update2** 一篇好文章

[http://codingrelic.geekhold.com/2009/05/pre-mortem-backtracing.html](http://codingrelic.geekhold.com/2009/05/pre-mortem-backtracing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-19T03:25:42.987

因为这是一个如此重要的问题，所以我的回答对我有用。我的代码在 C 中，因此它必须调用可以访问 android::CallStack 的 C++ 函数。

堆栈转储.cpp：

```
#include < utils/CallStack.h >
extern "C" void dumpCallStack( char *label)
{
   android::CallStack cs;
   cs.update();
   cs.dump(label);
} 
```

我的主要代码（foo.c）：

```
void dumpCallStack(char *label);

...

dumpCallStack(\__FUNCTION__); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T09:32:52.353

我曾经遇到过同样的问题。而且很难解释。

语法当然是正确合理的！

我尝试了很多方法，但没有奏效。

最后，我有了一个想法，应该将 lib 引用“LOCAL_SHARED_LIBRARIES += libutils”放入生成动态库的生成文件中，而不是生成生成静态库的生成文件中。这是最后一个原因。

参考：http: [//yongbingchen.github.io/blog/2013/05/09/dump-stack-in-android-native-c-code/](http://yongbingchen.github.io/blog/2013/05/09/dump-stack-in-android-native-c-code/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-30T15:55:19.893

我也收到此错误，但我补充说：

```
LOCAL_STATIC_LIBRARIES += libutils 
```

`LOCAL_MODULE := xxx`在`vm/Android.m`三个目标的行之前并添加

```
LOCAL_SHARED_LIBRARIES += libcorkscrew 
```

在`vm/Android.mk`

和`libdex/Android.mk`, 和`dexlist/Android.mk`,`dexdump/Android.mk`

完成所有这些之后，它对我有用。

# c++ - 混合使用 freopen 和 ncurses

> ID：11470191
> 
> 赞同：2
> 
> 时间：2012-07-13T12:05:49.637
> 
> 标签：c++, ncurses, freopen

我在与 ncurses 库混合`freopen`时遇到问题。`stdin`

我所做的是将标准输入重新打开到一个文件，通过 flex+bison 解析它，然后我应该将它恢复回来并启动 ncurses。

交换代码如下：

```
void switchStdin(const char *newStream) {
  fflush(stdin);
  fgetpos(stdin, &pos);
  fd = dup(fileno(stdin));
  freopen(newStream, "r", stdin);
}

void revertStdin() {
  fflush(stdin);
  dup2(fd, fileno(stdin));
  close(fd);
  clearerr(stdin);
  fsetpos(stdin, &pos);
} 
```

在我的词法分析器中，这就是我所做的：

```
void parse() {
  Utils::switchStdin("./filename.ext");
  yyparse();
  Utils::revertStdin();
} 
```

在主文件中我只是做类似的事情

```
parse();

initscr();
keypad(stdscr, TRUE);
noecho();
cbreak();
... 
```

现在，如果我不评论`revertStdin`它只是在启动时停止，如果我评论它，解析确实有效，但 ncurses gui 没有响应并且不时闪烁。

由于这两个部分在独立使用时都可以工作，我猜想以我错过的顺序方式混合它们有一些警告。有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-19T21:39:58.213

问题不止一个，但重要的是`revertStdin`打开流没有成功：

*   `switchStdin`不必要地调用 non-portable `fflush(stdin)`。
*   它保存 in 的文件描述符和`stdin`in`fd`的文件位置`pos`。
*   不需要文件位置（因为终端不*这样做*）
*   `revertStdin`不必要地调用 non-portable `fflush(stdin)`。
*   它**试图**`stdin`覆盖使用已保存的文件描述符`fd`。那是行不通的。
*   在某些系统上，您无法为`stdin`;分配新值 碰巧[GNU C 库允许这样做](https://www.gnu.org/software/libc/manual/html_node/Standard-Streams.html)。如果您使用的是 Linux，则可以使用来解决问题`fdopen`，例如，

```
    标准输入 = fdopen(fd, "r");

```

*   如果不是（更便携），您将使用[**`newterm`**](http://invisible-island.net/ncurses/man/curs_initscr.3x.html#h3-newterm)而不是[**`initscr`**](http://invisible-island.net/ncurses/man/curs_initscr.3x.html#h3-initscr). 与 不同`initscr`，`newterm`允许您指定输入和输出的流。在这种情况下，您仍然会使用`fdopen`，但不会尝试分配给`stdin`。使用您自己的变量并将*其传递*给`newterm`.

# c# - C# 程序中的运行时错误 R6034

> ID：11470194
> 
> 赞同：1
> 
> 时间：2012-07-13T12:05:59.043
> 
> 标签：c#, c++, dll, c++-cli, runtime-error

我在 C# 中加载一个 C++/CLI 包装器 dll（到本机 C++ dll），如果我在发布模式下编译我的工具，我会收到 R6034 运行时错误和

```
A dynamic link library (DLL) initialization failed. (Exception from HRESULT: 0x8007045A). 
```

方案：

C# 工具 ---> 对 C++/CLI 包装器的引用 ---> 静态加载（隐式）本机 C++ dll（附加依赖项 -> lib 文件）

C++库的加载过程似乎有问题（但我在Debug模式下没有问题）！

任何提示或想法！？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:25:30.660

使用符号构建发布版本，然后在 C++ 调试器中对其进行调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:02:11.797

运行应用程序的发布版本时，您是否有 .lib 文件的发布版本？如果不是，那么您的发布版本将不会加载 dll 的调试版本以满足 .lib，因此应用程序将不会运行。

# android - 如何从多选 ListView 更改所选项目的颜色

> ID：11470196
> 
> 赞同：0
> 
> 时间：2012-07-13T12:06:01.660
> 
> 标签：android, android-listview

我有一个列表视图：

```
<ListView
        android:id="@+id/ListView01"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" 
        android:cacheColorHint="@android:color/transparent" /> 
```

在相应的活动中，我将列表视图中的元素设置为

```
listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, phoneContactList));
listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

在上面的代码中，`phoneContactList`是一个arrayList。

Onclick 列表中的项目，如何更改它的颜色？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T16:26:30.393

刚刚找到这个页面：[http](http://android.cyrilmottier.com/?p=454) ://android.cyrilmottier.com/?p=454帮了我很多

# c# - 从车辆图像中提取车牌

> ID：11470200
> 
> 赞同：1
> 
> 时间：2012-07-13T12:06:28.137
> 
> 标签：c#, image-processing, blob, aforge, anpr

我正在开发一个自动车牌识别应用程序。我设法通过在图像中定位矩形对象来定位车牌区域。首先，我为图像的车牌设置了最小高度和宽度，以便我可以过滤图像上不需要的微小矩形位。此外，我使用车牌高度和宽度比来过滤掉假车牌。

但我遇到的问题是我为最小和最大车牌高度和宽度设置的值，因为只要相机和车辆之间的距离发生变化，就无法识别车牌区域。

有没有办法克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T14:56:28.427

1.  识别图像中的所有线条。
2.  确定线的交汇点。（=潜在的角落）
3.  测试 Anglesum=360 度的 4 和 4 角组合。
4.  验证可接受的尺寸比。它们是矩形的并且在您想要检测的板范围内
5.  将潜在板提取到新的位图中并进行更正。（您不需要 3D 计算，只需进行插值步行..）
6.  过滤/调整
7.  运行 OCR
8.  结果合格或不合格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T15:19:32.833

就像在线程上讨论的那样，由于相机和车辆之间的距离，高度或宽度不是完美的解决方案。但是矩形斑点检测可以在一定程度上克服这个问题。

# asp.net - 为什么 GetServerVariable("HTTP_URL") 根据管道模式返回不同的值

> ID：11470203
> 
> 赞同：2
> 
> 时间：2012-07-13T12:06:29.637
> 
> 标签：asp.net, iis-7, integrated-pipeline-mode

在 IIS 中，为什么调用`GetServerVariable("HTTP_URL")`类`HttpWorkerRequest`会根据管道模式产生不同的值？

在**集成模式**下运行时，它返回原始 url（服务器看到的，例如“/SomeUrl/Default.ashx”）。

在**经典模式下**，它的值似乎是在浏览器中输入的 url（例如，我的 url 路由器映射 /someurl 到该特定处理程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:05:16.123

终于解决了这个问题。原来我们正在做一个`HttpContext.RewritePath`which (我认为) 改变了`GetServerVariable("HTTP_URL")`under **Integrated Mode**的结果。我们通过更新相应的`IHttpHandler`并调用它来替换它，而不是重写路径。

# functional-programming - 对于具有命令式语言背景的人来说，哪种函数式编程语言最简单？

> ID：11470206
> 
> 赞同：9
> 
> 时间：2012-07-13T12:07:07.030
> 
> 标签：functional-programming

我想学习一门函数式语言以拓宽我的视野。我有 Python 和 C/C++ 方面的知识，并且我希望一种语言易于从来自命令式语言领域的人那里学习。我不在乎语言是否足够强大。我只想要一门语言来学习函数式编程的基础，然后我会尝试更难（和更强大的语言）。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T12:11:15.010

我建议将[纯语言](https://agraef.github.io/pure-lang/)用于这些教学目的。它也很强大。如果您想要更流行/获得更多社区支持的东西，那么我会推荐 Scheme 或 OCaml，这取决于您是更愿意先处理不熟悉的语法（使用 Scheme）还是处理不熟悉的类型（使用 OCaml）。SML 和 F# 与 OCaml 仅略有不同。其他人已经或将提到 Clojure、Scala 和 Haskell。

Clojure 是Scheme 的一个变体，有它自己的特性（例如没有尾调用优化），所以使用它是从Scheme 开始的一种方式。不过，我希望您使用不那么特殊的 Scheme 实现会更轻松。[球拍](http://www.racket-lang.org/index.html)是经常用于教学的东西。Scala 看起来与 OCaml 基本相似，但这只是基于偶然的熟悉。

与 Haskell 不同，提到的其他语言都有两个优点：（1）默认情况下评估顺序是急切的，尽管您可以通过专门请求它来获得惰性评估。在 Haskell 中则相反。(2) 可以使用突变，尽管您将看到的大部分库和代码都没有使用它。实际上，我认为学习函数式编程在教学上更好，同时关注它如何与副作用交互，并在某种程度上努力实现单子风格的组合。所以我认为这是一个优势。不过，有些人会告诉你，最好先投入到 Haskell 更加隔离的 mutation 处理中。

CMU 的 Robert Harper[有一些关于教授函数式编程的不错的博客文章](http://existentialtype.wordpress.com/category/teaching-2/)。据我了解，他也更喜欢像 OCaml 这样的语言进行教学。

在我推荐的三类语言（Pure、Scheme and friends、OCaml and friends）中，前两类具有动态类型。第一个和第三个具有显式引用单元格（就像在 Python 中，您限制自己永远不会重新分配变量，但您仍然可以更改存储在列表索引中的内容）。Scheme 有隐式引用单元：变量本身看起来是可变的，就像在 C 和 Python 中一样，并且引用单元处理是在幕后完成的。在这样的语言中，您通常也有某种形式的显式引用单元格可用（如我刚刚在 Python 中给出的示例，或者在 Racket 中使用可变对/列表......在其他方案中，包括方案标准，这些是默认对/列表）。

Haskell 确实拥有的一个优点是一些教科书正在出现。（我的意思是真诚的，而不是刻薄的。）使用什么书/资源是另一个有争议的问题，有许多战争/封闭的问题。其他人推荐的 SICP 有很多粉丝，也有一些批评者。在我看来，有很多不错的选择。我不会冒险进一步讨论这些辩论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T12:13:58.737

首先，阅读计算机程序的结构和实现。我推荐 Lisp（例如，它是方言 Scheme）作为第一种函数式编程语言。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T12:29:36.420

另一个选择是 Clojure，我知道它比 Scheme/Racket 更“纯粹”的功能（不要在这里问我细节）并且可能足够相似，可以让您将它与 SICP（结构和解释）结合使用of Computer Programs，一本强烈推荐的书，另一个答案也建议）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-27T15:45:55.980

> 我想学习一门函数式语言以拓宽我的视野。我有 Python 和 C/C++ 方面的知识，并且我希望一种语言易于从来自命令式语言领域的人那里学习。我不在乎语言是否足够强大。我只想要一门语言来学习函数式编程的基础，然后我会尝试更难（和更强大的语言）。

好问题！

在 1990 年代后期开始进行函数式编程之前，我已经学习过 BASIC、Pascal、汇编程序、C 和 C++。然后我几乎同时开始使用两种函数式语言，Mathematica 和 OCaml，并在几年内完全使用它们。特别是，OCaml 让我可以编写看起来像我之前编写的代码的命令式代码。作为学习者，我发现这很有价值，因为它让我比较了不同的方法，这些方法使 ML 的优势显而易见。

然而，正如其他人所提到的，Mathematica 和 OCaml 的核心优势是模式匹配，这在技术上与函数式编程无关。我随后研究了许多其他函数式语言，但我不想回到缺乏模式匹配的语言。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-15T02:17:00.713

没有讨论的一个元素是代数数据类型的特殊模式匹配语法的可用性，如在 Haskell、ML 的所有风格以及可能提到的其他几种语言中。模式匹配语法倾向于帮助程序员将其函数视为*数学*函数。Haskell 的语法足够复杂，并且它的实现具有足够差的解析错误消息，该语法是不选择 Haskell 的一个正当理由。Scheme 可能比大多数其他选项更容易学习（并且 Scheme 可能是所有宏系统的王者），但是缺少模式匹配语法会让我远离它来介绍函数式编程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-13T12:11:34.010

这个问题可能是题外话，因为它会导致无休止的语言战争，但这里有一个一般性的建议：

有一类函数式编程语言有时被称为“大部分函数式”，因为它们允许在您想要它们的地方使用一些命令式特性。示例包括标准 ML、OCaml、F# 和 Scala。如果您希望能够掌握功能性惯用风格，同时仍然能够以相当熟悉的方式实现目标，您可以考虑其中一种。

过去我曾广泛使用标准 ML，但如果您正在寻找学习曲线较少的东西，我个人会推荐 Scala，它是我第二喜欢的编程语言。其原因包括图书馆的普及、健康规模的社区以及可以帮助您入门的好书和教程的可用性（特别是如果您曾经与 Java 打过交道）。

# android - 如何在android中删除共享首选项中保存的数据？

> ID：11470209
> 
> 赞同：2
> 
> 时间：2012-07-13T12:07:12.597
> 
> 标签：android, facebook, sharedpreferences

我在我的应用程序中使用 facebook api。它工作正常，我可以登录并在墙上发帖。但我无法删除登录信息。

这是代码

```
 public boolean saveCredentials(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());
        return editor.commit();
    }

    public boolean restoreCredentials(Facebook facebook) {
        SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
        return facebook.isSessionValid();
    }

    public boolean removeCredentials()
    {
        SharedPreferences prefs = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);

            facebook.setAccessToken(prefs.getString("", null));
        facebook.setAccessExpires(prefs.getLong("", 0));
        Editor editor = prefs.edit(); 
        editor.clear();
        editor.commit(); 
        return true; 
    } 
```

`removeCredentials()`调用方法未删除共享首选项详细信息。它只是在 facebook 墙上发布消息。

我只想删除保存的详细信息，如果用户再次请求在墙上发布消息，那么我需要弹出登录屏幕。

感谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T12:15:49.803

请参考以下链接

[https://stackoverflow.com/a/3687333/1441666](https://stackoverflow.com/a/3687333/1441666)

```
SharedPreferences.Editor.remove() followed by a commit() 
```

或者

```
SharedPreferences preferences = getSharedPreferences("Mypref", 0);
preferences.edit().remove("text").commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-03T09:45:04.900

**我在我的项目中使用它工作完美..**

Preferences = getSharedPreferences("这是您的偏好名称", Context.MODE_PRIVATE);

1.  编辑器 = 首选项.edit();
2.  编辑器.clear();
3.  editor.commit();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:16:26.240

这里的问题是*（IMO）*您从 中清除凭据`SharedPreferences`，这只会删除您的 Token 和 Date 表单 SharePreferences。

但是您不会取消`facebook`对象的会话，这就是为什么，现在您的 facebook 在其字段变量中有 Token 和 Date ，并且它能够发布该消息。

因为

*   创建 facebook 对象时，它会自动从`SharedPreferences`.
*   然后您删除凭据
*   但 facebook 对象有凭据，也请尝试将其无效。

**更新：** 因此，当您取消它们时，请务必在将任何活动发布到 Facebook 之前检查会话，如下所示：

```
facebook.isSessionValid(); //checks if the session valid 
```

# jquery - 防止 jQuery 自动完成过滤数据

> ID：11470215
> 
> 赞同：0
> 
> 时间：2012-07-13T12:07:30.970
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我有一个从[这个示例](http://jqueryui.com/demos/autocomplete/#custom-data)派生的 jQuery 控件，但远程数据源返回一个 JSON 对象。过滤结果的服务器方法有些先进，在描述文本的第二行和主要文本中进行搜索。无论键入的搜索词是否出现在主标签中，我都希望显示所有返回的数据。我可以强制 jQuery 不过滤结果并依靠我的服务器方法只返回相关的吗？

# unix - 为 Debian Lenny 编译 OpenCV 2.4.2

> ID：11470217
> 
> 赞同：3
> 
> 时间：2012-07-13T12:07:35.790
> 
> 标签：unix, opencv, cmake

**保持问答方面：**

我在最新的（v.2.4.2）OpenCV 版本中遇到了一个奇怪的问题，它无法安装并出现以下错误：

> 在 /OpenCV-2.4.2/modules/core/src/system.cpp:460 包含的文件中：
> /OpenCV-2.4.2/release/modules/core/version_string.inc:37:1：警告：缺少终止“字符在 /OpenCV-2.4.2/modules/core/src/system.cpp:460 包含的文件中：/OpenCV-2.4.2/release/modules/core/version_string.inc:37：错误：缺少终止“字符

那么出了什么问题呢？*看看我的回答。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T12:17:02.167

如[本错误报告](http://code.opencv.org/issues/2006)中所述，问题是 cmake 的旧版本（2.8.2）。所以解决方案是获取 cmake 源的新副本，编译它并使用它来安装 OpenCV。

**注意 18/09/2012：**这也适用于带有 cmake 2.8.9 的 Ubuntu 12.04！

```
# get the cmake src
wget http://www.cmake.org/files/v2.8/cmake-2.8.8.tar.gz

# extract archive
tar xfvz cmake-2.8.8.tar.gz

# build the new version
cd cmake-2.8.8
cmake . 
make 
sudo make install

# get the OpenCV src
wget -O OpenCV-2.4.2.tar.bz2 http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.4.2/OpenCV-2.4.2.tar.bz2/download

# extract it …
tar -xvf OpenCV-2.4.2.tar.bz2

# build it
mkdir build
cd build
/usr/local/bin/cmake -D CMAKE_BUILD_TYPE=RELEASE ..
make
sudo make install

# setup OpenCV
sudo echo “/usr/local/lib” >> /etc/ld.so.conf
sudo ldconfig 
```

而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:08:24.193

Unfortunately newer cmake depends on newer cmake than the outdated cmake 2.6-patch 0 in lenny. To compile cmake 2.8.8 as mentioned above, first you have to compile CMake 2.6.3 or above which builds with lenny outdated cmake 2.6-patch 0.

# javascript - 多个处理程序：jQuery $(document).on

> ID：11470220
> 
> 赞同：0
> 
> 时间：2012-07-13T12:07:51.343
> 
> 标签：javascript, jquery, jquery-mobile, jquery-events

是否只允许将 1 个事件绑定到 1 个事物？我的意思是，我有 2 个 js 文件要在同一个页面加载时初始化。所以我尝试了以下方法：

js1 / Mapmode.js：

```
$(document).ready(function () { initMapModeContent() });

function initMapModeContent(){
    alert('test');
    initPageHeader();
    var oldHTML = document.getElementById('mapmodeContent').innerHTML;
    var newHTML = oldHTML + '<div><a href="pages/Beskeder.jsp#beskeder" id="mapLink" name="mapLink"><img id="mapLinkImage" alt="a map which links to the beskeder" src="images/beskeder.png"/></a></div>';
    document.getElementById("mapmodeContent").innerHTML=newHTML;
} 
```

js2 / PageHeader.js：

```
$(document).on("pageinit", "#mapmode", function(event) {
        initPageHeader();
    });
    $(document).on("pageinit", "#beskeder", function(event) {
        initPageHeader();
    });

    function initPageHeader() {
        var id = document.getElementById('header').parentNode.id;
        //TODO getdata with the id(page we are currently on).
        $("#header").html(function(index, originalMarkup) {
            return '<a data-theme="a" data-wrapperels="span" data-iconshadow="true" data-shadow="true" ' + 'data-corners="true" class="ui-btn-left ui-btn ui-btn-up-a ui-shadow ui-btn-corner-all" href="#" ' + 'data-rel="back" data-role="button"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">' + '<img src="../images/back.png" alt="back" align="middle" vspace="2"></span></span></a>' + '<h1 aria-level="1" role="heading" class="ui-title">' + '<img src="../images/main_header.png" alt="logo" align="middle" vspace="2">' + '</h1><a data-theme="a" data-wrapperels="span" data-iconshadow="true" data-shadow="true"' + 'data-corners="true" class="ui-btn-right ui-btn ui-btn-up-a ui-btn-inline ui-shadow ui-btn-corner-all" ' + 'href="#first" data-role="button" data-inline="true"><span class="ui-btn-inner ui-btn-corner-all">' + '<span class="ui-btn-text">' + '<img src="../images/home.png" alt="picture to take you to the first page" align="middle">' + '</span></span></a>';
        });
    } 
```

html5:

```
<%-- 
    Document   : mapMode
    Created on : Jul 12, 2012, 10:36:22 AM
    Author     : ame
--%>

<!DOCTYPE html> 
<html>
    <head> 
        <title>Map</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="js/jquery.mobile-1.1.0.css" />
    </head> 
    <body> 
        <!-- Start of first page -->
        <div data-role="page" id="mapmode" name="mapmode">

            <div data-role="header" id="header" name="header">

                                <p>TEEEST</p>
            </div><!-- /header -->

            <div data-role="content" id="mapmodePageContent" name="mapmodePageContent"> 
                <p>I'm the first page in mapMode!.</p>      

            </div><!-- /content -->
        </div><!-- /page -->

        <script type="text/javascript" src="../js/jquery-1.7.2.js"></script>
        <script type="text/javascript" src="../js/jquery.mobile-1.1.0.js"></script>
        <script type="text/javascript" src="../js/Mapmode.js"></script>
        <script type="text/javascript" src="../js/PageHeader.js"></script>

    </body>
</html> 
```

我只是在文档中找不到它不应该工作？关于如何制作的任何建议，如果它不合法，或者任何可以发现我的错误的人。

它适用于 PageHeader.js 但不适用于 Mapmode.js，这就是我问这个的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:22:30.797

`.on()`将事件附加到选择器。

您可以为其分配任意数量的事件，例如单击、提交等...

但我认为将同一事件多次分配给同一元素是不明智的。我认为只有最后一个附加事件会触发。

# android - Android NDK - Eclipse 不能包含 jni.h

> ID：11470222
> 
> 赞同：1
> 
> 时间：2012-07-13T12:07:53.613
> 
> 标签：android, eclipse, android-ndk

所以我使用 Eclipse 4.2 来构建我的项目，这些项目在 Java 中导入本机函数。Eclipse 一切正常，昨天一切正常。

今天我的 Eclipse 停止解析 jni.h 头文件和其他 android 头文件并显示错误。我的项目构建正确，但 Eclipse 禁止我运行应用程序并显示我的应用程序中有错误消息。

我在项目路径和符号 c、cpp 中有符号的所有路径。它工作没有错误......我现在唯一的解决方案是构建项目，然后重新启动eclipse并运行应用程序......

编辑：哦......这很有趣......现在当我点击运行时eclipse不会启动android模拟器......

EDIT2：即使我创建新项目......

EDIT3：这很有趣......我不得不添加 avd 设备......我不知道这是怎么可能的，但是两天来我一直在使用它而没有 avd 设备并且它正在工作......（我没有'不要改变 api 或类似的东西，我还没有接触过 AVD 管理器）

EDIT4： eclipse 中发生了奇怪的事情......我仍然不知道为什么 eclipse 有包含问题......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T12:48:39.770

这是 ADT 20 中的一个错误。请参阅[http://code.google.com/p/android/issues/detail?id=33788](http://code.google.com/p/android/issues/detail?id=33788)

在 ADT 21 或 ADT 20 的补丁发布之前，请继续使用 Alex 的广告。

[编辑] 顺便说一句：您总是可以简单地删除`Problem`列表中的错误；-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T12:14:26.660

You can go to `Project|Properties|C/C++ General|Code Analysis` then uncheck everything in there. That will provide for running your app until you figure out the proper fix.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-02T08:53:32.820

您可以通过选择项目的属性来做到这一点

Properties -> C/C++ General -> Preprocessor Include..-> Entries -> Setting Entries -> CDT User Setting Entries

添加 -> 包含目录 -> 文件系统路径，然后输入包含的路径，如：${NDK_ROOT}\platforms\android-5\arch-arm\usr\include

我还发现只有当我选中“包含系统标题”复选框时，这才对我有用。

# c++ - 共享库加载和性能

> ID：11470230
> 
> 赞同：2
> 
> 时间：2012-07-13T12:08:32.287
> 
> 标签：c++, c, shared-libraries

我正在用 C/C++ 编写一个服务器端应用程序，它由 1 个主守护进程和几个子进程组成。

我希望子进程非常轻量级，以便可以在没有太多开销的情况下生成/杀死它们（超过操作系统施加的开销）。

我正在构建主守护程序和子应用程序以广泛使用共享库。事实上，主守护进程加载子应用程序所需的所有共享库，并设置所需的（共享）内存结构等。

我的基本假设是，由于主守护进程已经加载了共享库（其中一些是**巨大的**），子应用程序将能够快速启动并简单地附加到加载的库 - 无需加载共享库，并且因此导致产生的时间稍快 - 这个假设是否正确？

**[[添加]]**

我正在使用 Ubuntu 10.0.4 LTS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:29:33.483

您的共享库的代码段将由所有进程共享，对谁加载/生成没有特别限制。但是，这可能需要不同的时间，具体取决于过程中使用了多少符号，因为这些符号将在加载期间解决。

但是，如果您要分叉，则无需做太多事情，因此启动新二进制文件会很快。

# javascript - 第一次点击javascript后如何禁用锚标记？

> ID：11470237
> 
> 赞同：0
> 
> 时间：2012-07-13T12:09:12.410
> 
> 标签：javascript, asp.net, thickbox

我有一个带有 css 类厚框*的 href*标记，我需要在第一次单击后禁用链接。我怎么能这样做？

aspx 代码

```
<a href="SomePage.aspx?FDID=11&KeepThis=true&TB_iframe=true&height=150&width=400"
     onclick="return DoSomething(this)" class="thickbox" id="AnchorID">
<img id="MyImageButton" alt="Image" src="SiteImages/image.png" runat="server" />
</a> 
```

我的 JavaScript 方法

```
function DoSomething(element) {

                return true;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:13:47.463

在您的 javascript 中，您可以在元素中设置属性`disabled=""`。（看[这里](https://stackoverflow.com/a/4702086/394028)）

如果禁用，您的意思是不让浏览器转到 url，您必须调用`event.preventDefault()`（看[这里](https://stackoverflow.com/a/1164654/394028)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:30:26.213

为此，您必须创建一个隐藏字段，该字段将存储值示例 1 或 0。如果用户第一次单击链接，则将隐藏字段值设置为 1，并允许用户重定向，然后禁用超链接。如果用户再次单击超链接，则首先检查隐藏字段是否包含值 1，然后不允许他重定向。希望你明白我的意思。还要在 javascript 中设置 href 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:25:38.077

我不确定OP到底想做什么，但如果纯粹是为了让脚本在点击后运行一次，这样的事情会起作用......

```
function DoSomething(element) {
  if(element.getAttribute("block")==null){
    ...
    element.setAttribute("block","1");
    return true;
  }else{
    return false;
  }
} 
```

`disabled`这样做的好处是不通过设置属性来改变按钮的样式。

但是，`true`从函数返回然后又返回`true`到`OnClick`链接的处理程序将导致浏览器导航到`href`...中的 URL，所以我不明白为什么需要阻止第二次运行。（除非`thickbox`，我对此一无所知，以一种不正常的方式工作。）

# c# - 使用 C# 重写 URL

> ID：11470241
> 
> 赞同：-1
> 
> 时间：2012-07-13T12:09:21.397
> 
> 标签：c#, asp.net, url-rewriting

我正在开发 ASP.NET 网站（VS 2010，Framework 4.0）。

如何使用 C# 重写页面的 URL？有没有可用的第三方工具？谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:01:10.330

```
void Application_BeginRequest(object sender, EventArgs e)
{
    // Get the current path
    string CurrentURL = Request.Url.ToString();
     // Condition
    if (CurrentURL.Contains("HtmlResponce.aspx"))
    {
        HttpContext MyContext = HttpContext.Current;

        // Re write here
        MyContext.RewritePath("testPage.aspx");
    }
} 
```

我在 Global.asax 中尝试了这段代码。这个对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:36:34.603

如果您在 IIS 7.x 上，最好使用 URL-Rewriting Module 2.0，从这里：[http ://learn.iis.net/page.aspx/664/using-url-rewrite-module-20/](http://learn.iis.net/page.aspx/664/using-url-rewrite-module-20/)

上面发布的链接指向在 IIS6 时代使用的“旧”技术。

IIS 7.x 的新选项更简单、更方便。

# javascript - 通知用户登录时清除浏览器缓存

> ID：11470242
> 
> 赞同：0
> 
> 时间：2012-07-13T12:09:26.983
> 
> 标签：javascript

嗨，我正在开发一个 web 应用程序，它处理 jQuery、Javascript、Html 作为 UI 的一部分。我们有登录身份验证，它将要求输入用户名和密码。
所以我的问题是如何在用户清除缓存时自动通知用户登录我的应用程序。例如：登录 facebook。登录后清除浏览器缓存。您将立即收到再次登录的通知。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:16:08.160

将登录信息保存在 cookie 中。当它不再存在时 - 将用户重定向到您的登录页面。

# c# - ASP.NET MVC4 中的 Ninject

> ID：11470243
> 
> 赞同：20
> 
> 时间：2012-07-13T12:09:27.543
> 
> 标签：c#, ninject, asp.net-mvc-4

因此，经过一番折腾，我终于将 Ninject 连线并在我的 MVC4 应用程序中编译。我遇到的问题是 IDependencyScope 接口不再存在，并且 System.Web.Http.Dependencies 命名空间已被取消。

所以，我现在的问题是我已经连接了所有东西，并且在运行我得到的应用程序时：

```
 Sequence contains no elements

    [InvalidOperationException: Sequence contains no elements]
   System.Linq.Enumerable.Single(IEnumerable`1 source) +379
   Ninject.Web.Mvc.NinjectMvcHttpApplicationPlugin.Start() in c:\Projects\Ninject\ninject.web.mvc\mvc3\src\Ninject.Web.Mvc\NinjectMvcHttpApplicationPlugin.cs:53
   Ninject.Web.Common.Bootstrapper.<Initialize>b__0(INinjectHttpApplicationPlugin c) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:52
   Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map(IEnumerable`1 series, Action`1 action) in c:\Projects\Ninject\ninject\src\Ninject\Infrastructure\Language\ExtensionsForIEnumerableOfT.cs:31
   Ninject.Web.Common.Bootstrapper.Initialize(Func`1 createKernelCallback) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs:53
   Ninject.Web.Common.NinjectHttpApplication.Application_Start() in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\NinjectHttpApplication.cs:81 
```

我无法追踪甚至无法开始了解它的来源。

我在 Global.asax.cs 中的标准 Ninject 方法如下所示：

```
 protected override IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Load(Assembly.GetExecutingAssembly());
            kernel.Bind<IRenderHelper>().To<RenderHelper>();

            GlobalConfiguration.Configuration.ServiceResolver.SetResolver(new NinjectDependencyResolver(kernel));
            return kernel;
        }

        protected override void OnApplicationStarted()
        {
            base.OnApplicationStarted();
            AreaRegistration.RegisterAllAreas();
            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
            BundleTable.Bundles.RegisterTemplateBundles();
        } 
```

还有我的自定义解析器：

```
public class NinjectDependencyResolver : IDependencyResolver
{
    private readonly IKernel _kernel;

    public NinjectDependencyResolver(IKernel kernel)
    {
        _kernel = kernel;
    }

    public object GetService(Type serviceType)
     {
         return _kernel.TryGet(serviceType);
     }

     public IEnumerable<object> GetServices(Type serviceType)
     {
         try
         {
             return _kernel.GetAll(serviceType);
         }
         catch (Exception)
         {
             return new List<object>();
         }
     }

     public void Dispose()
     {
         // When BeginScope returns 'this', the Dispose method must be a no-op.
     }
} 
```

这里的任何见解将不胜感激。我已经花了太多时间试图将任何 DI 框架连接到在 .NET 4.5 上运行的最新 MVC4 RC 中，现在刚刚达到了我对根本不工作的容忍度。

**编辑 #1** 在 github 中深入研究 ExtensionsForIEnumerableOfT.cs 并没有太大帮助：

[https://github.com/ninject/ninject/blob/master/src/Ninject/Infrastructure/Language/ExtensionsForIEnumerableOfT.cs](https://github.com/ninject/ninject/blob/master/src/Ninject/Infrastructure/Language/ExtensionsForIEnumerableOfT.cs)

如果我自己写的话，我可能会开始理解这一点，但 Bootstrapper.cs 也没有太大帮助。

[https://github.com/ninject/Ninject.Web.Common/blob/master/src/Ninject.Web.Common/Bootstrapper.cs](https://github.com/ninject/Ninject.Web.Common/blob/master/src/Ninject.Web.Common/Bootstrapper.cs)

希望这些细节能让任何对 Ninject 有更多经验的人更容易。

**编辑 #2** 遇到的错误专门在 NinjectMvcHttpApplicationPlugin.cs 中：

违规行是：

```
ModelValidatorProviders.Providers.Remove(ModelValidatorProviders.Providers.OfType<DataAnnotationsModelValidatorProvider>().Single()); 
```

采用以下方法：

```
public void Start()
{
    ModelValidatorProviders.Providers.Remove(ModelValidatorProviders.Providers.OfType<DataAnnotationsModelValidatorProvider>().Single());
    DependencyResolver.SetResolver(this.CreateDependencyResolver());
    RemoveDefaultAttributeFilterProvider();
} 
```

ModelValidatorProviders 集合包含 2 个元素： {System.Web.Mvc.DataErrorInfoModelValidatorProvider} {System.Web.Mvc.ClientDataTypeModelValidatorProvider}

它正在尝试删除以下单个实例：

System.Web.Mvc.DataAnnotationsModelValidatorProvider

这显然没有加载到 ModelValidationProviders.Providers 集合中。从这里有什么想法吗？

**解决上述异常并进入下一个**

为了解决 ModelValidatorProviders 中的问题，我必须手动添加它所期望的对象。所以现在我的 CreateKernel 方法看起来像：

```
protected override IKernel CreateKernel()
{
    var kernel = new StandardKernel();
    kernel.Load(Assembly.GetExecutingAssembly());

    kernel.Bind<IRenderHelper>().To<RenderHelper>();
    kernel.Unbind<IDocumentViewerAdapter>();

    GlobalConfiguration.Configuration.ServiceResolver.SetResolver(new NinjectDependencyResolver(kernel));
    ModelValidatorProviders.Providers.Add(new DataAnnotationsModelValidatorProvider());
    FilterProviders.Providers.Add(new FilterAttributeFilterProvider());
    return kernel;
} 
```

现在它运行并进入了 Ninject 的实际内容，但仍然有一个问题，一个又没有意义的问题：

```
Exception Details: Ninject.ActivationException: Error activating IntPtr
No matching bindings are available, and the type is not self-bindable.
Activation path:
 3) Injection of dependency IntPtr into parameter method of constructor of type Func{IKernel}
 2) Injection of dependency Func{IKernel} into parameter lazyKernel of constructor of type HttpApplicationInitializationHttpModule
 1) Request for IHttpModule

Suggestions:
 1) Ensure that you have defined a binding for IntPtr.
 2) If the binding was defined in a module, ensure that the module has been loaded into the kernel.
 3) Ensure you have not accidentally created more than one kernel.
 4) If you are using constructor arguments, ensure that the parameter name matches the constructors parameter name.
 5) If you are using automatic module loading, ensure the search path and filters are correct. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-13T13:53:22.237

好吧，在我的头撞墙太久之后，我弄清楚发生了什么。在 .NET 4.5 上运行的 MVC4 的默认项目类型引用了 System.Web.Http 的原始 RC 版本，而不是更新版本。

命名空间丢失，对象不存在，生活并不美好。

解决步骤：

1.  在 MVC4 项目中删除对 System.Web.Http 的引用
2.  添加参考 -> System.Web.Http
3.  删除您为使 System.Web.Http 的旧垃圾版本正常工作而投入的所有变通方法
4.  在 Ninject 中重新应用标准流程进行接线。

    但是，以下错误：

    异常详细信息：Ninject.ActivationException：激活 IntPtr 时出错 没有匹配的绑定可用，并且类型不是自绑定的。激活路径：3）依赖IntPtr注入Func{IKernel}类型构造函数的参数方法2）依赖Func{IKernel}注入HttpApplicationInitializationHttpModule类型构造函数参数lazyKernel 1）请求IHttpModule

    建议： 1) 确保您已为 IntPtr 定义绑定。2) 如果绑定是在模块中定义的，请确保该模块已加载到内核中。3) 确保您没有意外创建多个内核。4) 如果您使用构造函数参数，请确保参数名称与构造函数参数名称匹配。5) 如果您使用自动模块加载，请确保搜索路径和过滤器正确。

**更新**通过将 MVC 从 MVC4 Beta 更新到 MVC4 RC 解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T13:09:53.987

查看[Pro ASP.NET MVC 3 书](https://rads.stackoverflow.com/amzn/click/com/1430234040)。我昨晚刚刚将此代码从 MVC3 移植到 MVC4 并正常工作。准确地说是第 322 页。

我没有看到您将接口映射到具体项目的位置。

```
Bind<ISomething>().To<Something>(); 
```

添加另一个构造函数并添加调用映射的方法；

```
public NinjectDependencyResolver() {
    _kernal = new StandardKernel();
    RegisterServices(_kernel);
}

public static void RegisterServices(IKernel kernel) {
    kernel.Bind<ISomething>().To<Something>();
} 
```

这是解析器可能/应该看起来的样子；

```
 public class NinjectDependencyResolver : IDependencyResolver {
    private IKernal _kernel;

    public NinjectDependencyResolver(){
        _kernal = StandardKernal();
        AddBindings();
    }

    public NinjectDependencyResolver(IKernel kernel)
    {
        _kernel = kernel;
    }

    public object GetService(Type serviceType)
     {
         return _kernel.TryGet(serviceType);
     }

     public IEnumerable<object> GetServices(Type serviceType)
     {
        return _kernal.GetAll(serviceType);
     }

    public IBindingToSyntax<T> Bind<T>() {
      return _kernal.Bind<T>();
    }

     public static void RegisterServices(IKernel kernel){
      //Add your bindings here. 
      //This is static as you can use it for WebApi by passing it the IKernel
     }
} 
```

全球.Asx -

> Application_Start()

方法

```
DependencyResolver.SetResolver(new NinjectDependencyResolver()); 
```

就是这样。

* * *

**2012 年 11 月 14 日更新**

附带说明一下，如果您正在使用 MVC WebAPI，您将需要使用来自[nuget](http://nuget.org/packages/WebApiContrib.IoC.Ninject)的 WebApiContrib.IoC.Ninject。此外，请查看他们的示例[asp.net.com](http://www.asp.net/web-api/samples)中的“联系人管理器” 。这有助于清理 Ninject 的实现

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-14T14:34:46.403

Just delete `NinjectWebCommon.cs` file from your project (it is in `App_Start` folder). and everything should be working.

Source: [http://mlindev.blogspot.com.au/2012/09/how-to-implement-dependency-injection.html](http://mlindev.blogspot.com.au/2012/09/how-to-implement-dependency-injection.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T17:55:56.543

当您从 NuGet 包安装最新的 Ninject.MVC3 时，我们会在`NinjectWebCommon.cs`文件顶部找到以下代码：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(MvcApplication1.App_Start.NinjectWebCommon), "Start")]

[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(MvcApplication1.App_Start.NinjectWebCommon), "Stop")] 
```

在这种情况下，我们不需要在 global.asax 中显式注册 ninject

[我在这里](https://web.archive.org/web/20130722154409/http://www.dotnetfever.com/implementing-dependency-injection-in-asp-net-mvc-4-using-ninject-di-container/)找到了关于使用 Ninject 和 MVC 4 的好内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T23:11:25.150

我倾向于将我的 Ninject 引导程序放在一个单独的项目中。为了使用 的`.InRequestScope()`扩展方法`IBindingInSyntax<T>`，我通过 Nuget 添加了**Ninject.Web.Common**库。唉，这个库包括 app_start 引导程序，导致重复的 NinjectWebCommon 类和通过 WebActivator 的附件（所述项目中的 1 个，MVC 项目本身中的 1 个）。

我从我的引导项目中删除了重复的 App_Start 文件夹，这解决了它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-28T20:41:04.160

我遇到了同样的问题，不太确定在以下更改后修复了什么

将 Ninject.MVC4 添加到项目中

删除了 NinjectWebCommon.cs（生成的文件，因为集成已经存在于 global.ascx.cs 文件中）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-12T06:39:03.743

我正在使用 DD4T，遇到了同样的错误。

在确认所有包都由 nuget 包管理器安装后，我发现缺少一些 DLL/引用（newtonsoft 等）：

然后，重新安装 Newtonsoft.Json（要重新安装包，请在 Nuget 包管理器中使用以下命令：Update-Package –reinstall Newtonsoft.Json），并从 Tridion Deployer bin 中放入 netrtsn.dll，我收到此错误 - “Sequence不包含任何元素”，其堆栈跟踪与此问题中给出的完全相同。

感谢 Naga，为提供此解决方案删除了​​ NinjectWebCommon.cs（生成的文件，因为集成已存在于 global.ascx.cs 文件中），哇哦！！！！所有错误都已解决，Tridion + MVC4 = DD4T 现在运行良好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-15T22:06:42.153

当我使用 nuget 在我的实际 MVC 网站项目引用的项目中安装 Ninject.MVC4 时，我也遇到了这个问题。

The trouble is that the NinjectWebCommon.cs file automatically installed in the App_Start directory of the referenced project conflicts with the (actual, useful) one installed in my website project. Removing the NinjectWebCommon.cs file from the referenced project resolves the error.

# facebook - 你能阻止用户使用 Janrain 或类似的社交网络登录多次登录吗？

> ID：11470269
> 
> 赞同：1
> 
> 时间：2012-07-13T12:11:53.610
> 
> 标签：facebook, social-networking, google-plus, janrain

我想在我的网站上启用从多个服务登录，但不希望用户使用 facebook 登录，然后注销，然后再使用 Google+ 登录。

我不确定是否有一种实用的方法可以检测到有人这样做了？

我看到Janrain提到了账号绑定，这是提供这种服务吗？

安全性不必是无懈可击的，但希望难以多次登录并从不同帐户发布。同时，由于并非每个人都使用 Facebook，因此希望拥有多个提供商。

感谢您提供任何帮助/信息/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:34:57.330

不幸的是，没有一点可以让您检查一项服务上的给定帐户是否与另一项服务上的帐户是同一个人。

一种方法是在他们使用服务 A 登录时在浏览器上放置一个 cookie，该 cookie 将指示用户上次登录时使用的服务。然后下次他们到达您的网站时，您可以检查您的 cookie，然后只显示他们以前使用的登录服务。

使从多个服务登录变得更加困难的另一个选项是从服务中请求用户的电子邮件地址，并查看它是否已经存在于您的数据库中的不同帐户下？

# c# - 使用 WCF 自托管在调试模式下运行 consol 应用程序？

> ID：11470271
> 
> 赞同：5
> 
> 时间：2012-07-13T12:11:56.973
> 
> 标签：c#, .net, wcf, self-hosting

我有一个托管在 consol 应用程序中的 WCF 服务（也充当 Windows 服务安装程序），请在此处查看更多信息：http: [//msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

这是 consol 应用程序中的类的样子：

```
public class MyAppWindowsService : ServiceBase
    {
        public ServiceHost _MyAppClientServiceHost = null;
        public ServiceHost _MyAppIntegrationServiceHost = null;
        public ServiceHost _MyAppserviceHost = null;

        public MyAppWindowsService()
        {
            // Name the Windows Service
            ServiceName = "MyApp Service";
        }

        public static void Main()
        {
            ServiceBase.Run(new MyAppWindowsService());
        }

        private void StopService(ServiceHost serviceHost)
        {
            if (serviceHost != null)
            {
                  serviceHost.Close();
                  serviceHost = null;
            }
        }
        private ServiceHost StartService(Type serviceType)
        {
            ServiceHost serviceHost = null;

            // Create a ServiceHost for the CalculatorService type and 
            // provide the base address.
            serviceHost = new ServiceHost(serviceType);

            // Open the ServiceHostBase to create listeners and start 
            // listening for messages.
            serviceHost.Open();

            return serviceHost;
        }
        private void StartServices()
        {
            StopService(_MyAppClientServiceHost);
            StopService(_MyAppIntegrationServiceHost);
            StopService(_MyAppServiceHost);

            _MyAppClientServiceHost = StartService(typeof(MyApp.ServiceImplementation.MyAppClientService));
            _MyAppIntegrationServiceHost = StartService(typeof(MyApp.ServiceImplementation.MyAppIntegration));
            _MyAppServiceHost = StartService(typeof(MyApp.ServiceImplementation.HL7Service));
        }
        private void StopServices()
        {
            StopService(_MyAppClientServiceHost);
            StopService(_MyAppIntegrationServiceHost);
            StopService(_MyAppHl7ServiceHost);
        }

        // Start the Windows service.
        protected override void OnStart(string[] args)
        {
            StartServices();
        }

        protected override void OnStop()
        {
            StopServices();
        }

    } 
```

这是为在 Windows 服务中运行而设计的，我该如何做才能在调试模式下（在开发期间）将其作为常规 selfhost 运行？还是我真的必须启动一个特殊项目才能在运行时调试此服务？

**编辑：**

我决定使用现有的 windows 服务项目，但将 main 更改为如下内容：

```
public static void Main()
        {
            if (Debugger.IsAttached)
            {
                Console.WriteLine("--- MyApp Services ---");
                Console.WriteLine("Starting services...");
                Instance.StartServices();
                Console.WriteLine("--Finished--");
                Console.WriteLine("Press any key to exit");
                Console.ReadKey();
                Instance.StopServices();
            }
            else
                ServiceBase.Run(new MyAppWindowsService());
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T12:26:35.843

这就是我所做的

**解决方案 A**

*   `InstallUtil`使用我的*Debug\bin*文件夹安装 Windows 服务
*   `sc start`使用或停止和启动服务`sc stop`
*   服务启动后，请执行*Debug > Attach to Process...*并将 VS 附加到服务

**解决方案 B**

在OnStart方法的第一行调用[Debugger.Break](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart.aspx) [。](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.break.aspx)

**解决方案 C**

添加一个临时单独的控制台应用程序，该应用程序与您的服务执行相同的工作。

# c# - 20 个最受关注的“代码”，包括“用户”和“语言”

> ID：11470274
> 
> 赞同：1
> 
> 时间：2012-07-13T12:12:11.677
> 
> 标签：c#, .net, linq

我有两个表“代码”和“视图”，并希望获得自 x 天前以来具有最多视图的 20 个代码的列表（这是我的变量 dt）。我能够获取列表并对其进行排序，但我有一个问题，我还想包括另外 2 个表“用户”和“语言”。

```
var query = from f in _db.Codes
            select new
            {
                Code = f,
                PostCount = f.ViewModels.Count(p => p.timestamp > dt)
            };

var result = query.OrderByDescending(x => x.PostCount).Select(y => y.Code).Take(20) 
```

但是在这样做之后，我无法包括我的其他表格。我尝试将结果转换为 ObjectQuery，但随后它变为空（在尝试转换之前结果中有 20 个代码）。

代码模型看起来像这样

```
 [Key]
    public int CodeID { get; set; }
    public int UserID { get; set; }
    public UserModel User { get; set; }

    [DisplayName("Language")] 
    public int LanguageID { get; set; }
    public LanguageModel Language { get; set; }

    public virtual ICollection<ViewModel> ViewModels { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T18:12:48.893

简单的解决方案：

```
IEnumerable<CodeModel> posts = _db.Codes
    .Include("User")
    .Include("Language")
    .OrderByDescending(f => f.ViewModels.Count(p => p.timestamp > dt))
    .Take(20); 
```

# performance - Neo4j 蓝图与原生遍历速度。.

> ID：11470275
> 
> 赞同：3
> 
> 时间：2012-07-13T12:12:13.790
> 
> 标签：performance, testing, neo4j

我正在对 neo4j 的蓝图和原生实现之间的遍历速度进行性能测试。我创建了一个包含 1000 个节点的图，每个级别有 1 个节点，即

O->O->O->O->。. . .->O

我使用此蓝图代码记录了 90 毫秒、93 毫秒和 79 毫秒（运行 3 次）的迭代（循环代码）时间：

```
Iterable<Vertex> vertices = testGraph.getVertices();

//Code block which was measured.
for(Vertex vertex : vertices){}; 
```

并使用本机代码 270ms、268ms 和 321ms：

```
Iterable<Node> nodes = Traversal.description().breadthFirst().relationships(CustomRelTypes.LINKED_TO, Direction.OUTGOING).evaluator(Evaluators.all()).traverse(rootNode).nodes();

//Code block which was measured.
for(Node node : nodes){} 
```

我无法理解 neo4j 的蓝图实现如何更快。我还没有对其中任何一个进行任何特殊配置。depthFirst 的时间也几乎相同。

有谁知道我如何加快本机性能以匹配蓝图？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T02:37:50.640

Blueprints 在底层使用 Neo4j 的原生 getAllNodes() 方法，而不是遍历 API：

[https://github.com/tinkerpop/blueprints/blob/master/blueprints-neo4j-graph/src/main/java/com/tinkerpop/blueprints/impls/neo4j/Neo4jGraph.java#L339](https://github.com/tinkerpop/blueprints/blob/master/blueprints-neo4j-graph/src/main/java/com/tinkerpop/blueprints/impls/neo4j/Neo4jGraph.java#L339)

所以等效的本机 Neo4j Java 代码将是：

```
g = new EmbeddedGraphDatabase('/path/to/graph-dir');
g.getAllNodes(); 
```

# android - ArrayList 不断填充相同的数据

> ID：11470276
> 
> 赞同：0
> 
> 时间：2012-07-13T12:12:24.547
> 
> 标签：android, json, arraylist, android-alertdialog

我有一个非常奇怪的问题。我有一些数据显示在对话框中。如果我关闭应用程序并再次重新打开它，我的 ArrayList 总是会再次添加原始数据（前 5 个条目 -> 关闭并重新打开 -> 10 个条目 -> 关闭并重新打开 -> 15 个条目等）。

这就是我将数据解析到 ArrayList 中的方式（这只在我的 TabHost 中发生一次）：

```
JSONArray jPDFs = json.getJSONArray("pdfs");
            for (int i = 0; i < jPDFs.length(); i++) {
                JSONObject c3 = jPDFs.getJSONObject(i);

                String pdf_title = c3.getString("title");
                String pdf_url = c3.getString("url");

                pdfListTitle.add(pdf_title);
                pdfListTitle2.add(pdf_title);
                pdfListURL.add(pdf_url);
            } 
```

这是我的代码，我在其中显示带有解析数据的对话框：

```
public void showDialog() {
    items = null; // have tried with and without...
    builder = null; // have tried with and without...

    builder = new AlertDialog.Builder(this);
    Log.e(TabHost.LOG_TAG, "pdfListTitle=" + TabHost.pdfListTitle.size()); // this always hops from 5 -> 10 -> 15 on every reopen (without killing the app with a taskkiller...)

    items = TabHost.pdfListTitle.toArray(new CharSequence[TabHost.pdfListTitle.size()]);

    builder.setTitle(R.string.choose_document);
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            WebView wv = (WebView) findViewById(R.id.webviewpdf);
            wv.setWebViewClient(new WebViewClient());
            wv.getSettings().setJavaScriptEnabled(true);
            wv.getSettings().setBuiltInZoomControls(true);
            wv.loadUrl("http://docs.google.com/gview?embedded=true&url="
                    + TabHost.pdfListURL.get(item));
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:19:49.183

我认为您已将**pdfListTitle**视为**TabHost中的****静态**，这可能是问题

 ****pdfListTitle** 应该在您的活动调用时初始化

例如，您可以使用这样的`onCreate()`方法编写此代码

```
ArrayList<T> pdfListTitle;

protected void onCreate(Bundle savedInstanceState) {

  pdfListTitle = new ArrayList<T>; <----

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:15:41.237

我猜在方法 `TabHost.pdfListTitle.toArray(..)`中，您应该重置每次填充数据的列表..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:19:07.317

简单而天真的解决方法是添加

`pdfListTitle.clear()`

在你用数据填充列表之前。

但这并不能解决每次显示对话框时都会调用该方法的问题，除非您需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:22:47.477

正如以前的用户所说，您应该手动清理列表（`pdfListTitle.clear()`），但更深入地了解问题很有用。

正如我所看到的，您将您`pdfListTitle`作为静态字段存储在您的类 TabHost 中（顺便说一下，使用 TabHost 之类的名称不是很好，因为 android API 中有 TabHost（[http://developer.android.com/reference/ android/widget/TabHost.html](http://developer.android.com/reference/android/widget/TabHost.html) )。静态字段在加载类时首先被初始化。并且没有任何保证这些类何时会被 Android 系统卸载，因为在 android 中没有“关闭”应用程序。它'阅读 Java 中的类加载器对你很有用（你可以很简单地用谷歌搜索它）。**

# jquery - 在 MVC3 中使用数据注释进行 Jquery 验证，而不使用 Unobtrusive

> ID：11470280
> 
> 赞同：0
> 
> 时间：2012-07-13T12:12:50.920
> 
> 标签：jquery, asp.net-mvc, validation, data-annotations

我有一堂课：

```
public class EditableOrder
{
    [Required(ErrorMessage = "Order ID is required.")]
    public int OrderID
    {
        get;
        set;
    }

    [StringLength(5, ErrorMessage = "Customer ID must be 5 characters.")]
    public string CustomerID
    {
        get;
        set;
    } 
```

}

我想`[Required(ErrorMessage = "Order ID is required.")]`在 jQuery 中获取上述类中定义的验证属性。

对于 jQuery 验证，我需要向输入元素添加类以验证输入。但我无法`[Required]`在 jQuery 中获取属性。

注意：不使用不显眼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:40:41.707

数据注释在您可以访问的相应输入字段上发出 HTML5 data-* 属性：

```
var requiredMessage = $('#OrderID').data('val-required'); 
```

# android - 为什么 Eclipse 错误日志显示错误“无法实例化”

> ID：11470287
> 
> 赞同：2
> 
> 时间：2012-07-13T12:13:16.060
> 
> 标签：android

错误日志显示错误`org.anddev.android.weatherforecast.view.SingleWeatherInfoView`未能实例化

包裹名字：`org.anddev.android.weatherforecast.view`

班级名称：`SingleWeatherInfoView`

请帮助我摆脱错误。

我的错误日志 [错误日志](http://i.stack.imgur.com/E6MIF.png)

```
package org.anddev.android.weatherforecast.views;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.Map;

import org.anddev.android.weatherforecast.R;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

/**
 * The View capable of showing a WeatehrIcon + a Temperature-TextView.
 */
public class SingleWeatherInfoView extends LinearLayout {

    // ===========================================================
    // Fields
    // ===========================================================

    private ImageView myWeatherImageView = null;
    private TextView myTempTextView = null;

    // ===========================================================
    // Constructors
    // ===========================================================

    public SingleWeatherInfoView(Context context) 
    {
        super(context);
    }

    public SingleWeatherInfoView(Context context, AttributeSet attrs) //,Map inflateParams
    {
        super(context,attrs);
        /* Setup the ImageView that will show weather-icon. */
        this.myWeatherImageView = new ImageView(context);
        this.myWeatherImageView.setImageDrawable(getResources().getDrawable(R.drawable.dunno));

        /* Setup the textView that will show the temperature. */
        this.myTempTextView = new TextView(context);
        this.myTempTextView.setText("? °C");
        this.myTempTextView.setTextSize(16);
        this.myTempTextView.setTypeface(Typeface.create("Tahoma", Typeface.BOLD));

        /* Add child views to this object. */
        this.addView(this.myWeatherImageView, new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        this.addView(this.myTempTextView, new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    }

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    public void reset() {
        this.myWeatherImageView.setImageDrawable(getResources().getDrawable(
                R.drawable.dunno));
        this.myTempTextView.setText("? °C");
    }

    /** Sets the Child-ImageView of this to the URL passed. */
    public void setRemoteImage(URL aURL) {
        try {
            URLConnection conn = aURL.openConnection();
            conn.connect();
            InputStream is = conn.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is);
            Bitmap bm = BitmapFactory.decodeStream(bis);
            bis.close();
            is.close();
            this.myWeatherImageView.setImageBitmap(bm);
        } catch (IOException e) {
            /* Reset to 'Dunno' on any error. */
            this.myWeatherImageView.setImageDrawable(getResources()
                    .getDrawable(R.drawable.dunno));
        }
    }

    public void setTempCelcius(int aTemp) {
        this.myTempTextView.setText("" + aTemp + " °C");
    }

    public void setTempFahrenheit(int aTemp) {
        this.myTempTextView.setText("" + aTemp + " °F");
    }

    public void setTempFahrenheitMinMax(int aMinTemp, int aMaxTemp) {
        this.myTempTextView.setText("" + aMinTemp + "/" + aMaxTemp + " °F");
    }

    public void setTempCelciusMinMax(int aMinTemp, int aMaxTemp) {
        this.myTempTextView.setText("" + aMinTemp + "/" + aMaxTemp + " °C");
    }

    public void setTempString(String aTempString) {
        this.myTempTextView.setText(aTempString);
    }
} 
```

# ruby - 如何自动创建目录中每个类的实例？

> ID：11470291
> 
> 赞同：3
> 
> 时间：2012-07-13T12:13:47.293
> 
> 标签：ruby, arrays, oop, class, directory

如何在 ruby​​ 中创建目录中每个文件中每个类的实例并将其作为数组提供？

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T12:26:36.687

您可以使用`ObjectSpace`来查找新类，然后实例化它们。

```
def load_and_instantiate(class_files)
  # Find all the classes in ObjectSpace before the requires
  before = ObjectSpace.each_object(Class).to_a
  # Require all files
  class_files.each {|file| require file }
  # Find all the classes now
  after = ObjectSpace.each_object(Class).to_a
  # Map on the difference and instantiate
  (after - before).map {|klass| klass.new }
end

# Load them!
files = Dir.glob("path/to/dir/*.rb")
objects = load_and_instantiate(files) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:30:44.653

假设它们都与包含的 .rb 文件共享相同的名称并且不使用任何参数来初始化...

```
#initialize array of objects
objects = []

#list ruby files in directory
classes = Dir.glob( "*.rb" )

#make method to easily remove file extension
def cleanse( fileName )
    return fileName.gsub( ".rb", "" )
end

classes.each do |file|
    #require the new class
    require fileName

    #add it to our array
    objects[objects.length] = eval( cleanse(file) + ".new()" )
end 
```

# android - 将用户重定向到 Web 视图中的特定页面

> ID：11470300
> 
> 赞同：0
> 
> 时间：2012-07-13T12:14:23.830
> 
> 标签：android

我正在 android 中创建一个应用程序，它可以扫描条形码并从我的数据库中检索信息。它工作正常，但现在我想将它与 Flipkart 数据库集成。或者将它们重定向到该产品的 Flipkart 页面。但是我如何访问 Flipkart 数据库. 假设我扫描了一本书 android ，现在我想将我的用户重定向到 Flipkart 上的特定页面。任何帮助将不胜感激......谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:00:21.420

当今最好的方法是使用 Flipkart 公开的公共 API。鉴于 Flipkart 没有这样做，因此没有一种简单的方法可以访问该信息。

存在网络爬虫，但在几乎所有情况下，您最终都会违反条款和条件和/或任何可接受的速率限制。即使你可能会想出一个网络爬虫解决方案，但如果有内部页面更改，它迟早会坏掉，这会让你再次编写新的逻辑。总而言之，这些都是不稳定的解决方案，不推荐使用，但在短期内，它可能看起来可行。

无论是 Flipkart 还是其他任何人，如上所述，公共 API 都是正确的集成机制。API 将明确定义：

1.  功能是什么，即 API 方法
2.  请求/响应的数据格式
3.  免费使用的可接受速率限制
4.  为更高的配额限制支付 API 费用

PS：Flipkart 很可能甚至有一个他们使用的私有 API，只是它不会暴露给外界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:27:38.590

最好问问flipkart他们是否有办法轻松做到这一点，更重要的是，如果它在他们的条款和条件范围内（这样你就不会违反任何法律）。

查看他们的网站，您似乎可以执行[http://www.flipkart.com/search/a/all?query=something](http://www.flipkart.com/search/a/all?query=something)并且它似乎也适用于 ISBN 条形码（尝试在该查询中替换为）`something`。`0671737635`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T15:20:01.893

对于 Junglee，我试过了，我发现你可以使用 URL 搜索项目，[http: //www.junglee.com/mn/search/junglee/ref=nav_sb_noss?url=node%3D792284031&field-keywords=](http://www.junglee.com/mn/search/junglee/ref=nav_sb_noss?url=node=792284031&field-keywords=)

因此，如果您的搜索产品是 iphone（不是 android 开发人员的最佳示例），请将其作为字符串传递给此 URL [http://www.junglee.com/mn/search/junglee/ref=nav_sb_noss?url=node%3D792284031&field -关键字=iphone](http://www.junglee.com/mn/search/junglee/ref=nav_sb_noss?url=node%3D792284031&field-keywords=iphone)

# sql - SQL Server 架构审计？

> ID：11470301
> 
> 赞同：4
> 
> 时间：2012-07-13T12:14:26.083
> 
> 标签：sql, database, sql-server-2008, database-administration, ddl-trigger

我们有一个 SQL Server 2008 Enterprise 数据库，它有两种不同的模式，一种是我们维护的锁定模式，另一种是开放的模式，我们允许外部开发团队根据自己的需要添加和修改。通常这对我们来说没问题，但一个特定的团队喜欢把它搞砸，它会影响其他所有人。所以2个问题：

1.  In hindsight I wish we had set up something robust from the outset but we did not, just the default install. It would be nice to be able to see what has been done to the schema so far, even if its as simple as 'User XYZ changed Procedure ABC on 07/12/2012 at 9:00 AM'. Is there anything built into SQL Server and enabled by default that tracks this that we might leverage, and if so where/how?
2.  As far as a long term solution goes, what would you recommend for this? I've been reading up on DDL triggers a bit and that seems like a promising option. If you've used this approach can you share a bit with how it worked and what you could do with it?

thank you

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T14:48:53.620

我有一个系统使用 DDL 触发器来处理这类事情。它足以满足我的需求。它最初是在 Sql Server 2005 上开发的，现在在 Sql Server 2008R2 系统上运行。它类似于 Aaron Bertrand 评论中的链接所描述的。

创建一个与此类似的表。

```
CREATE TABLE [dbo].[SchemaLog](
    [SchemaLogID] [int] IDENTITY(1,1) NOT NULL,
    [PostTimeUtc] [datetime] NOT NULL,
    [DatabaseUser] [nvarchar](128) NOT NULL,
    [Event] [nvarchar](128) NOT NULL,
    [Schema] [nvarchar](128) NULL,
    [Object] [nvarchar](128) NULL,
    [TSQL] [nvarchar](max) NOT NULL,
    [XmlEvent] [xml] NOT NULL,
 CONSTRAINT [PK_SchemaLog_1] PRIMARY KEY CLUSTERED 
(
    [SchemaLogID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

确保每个人都对表具有插入权限，然后创建一个类似于此的 ddl 触发器。

```
CREATE TRIGGER [ddlDatabaseTriggerLog] ON DATABASE  FOR DDL_DATABASE_LEVEL_EVENTS AS  
BEGIN     
    SET NOCOUNT ON;     
    DECLARE @data XML;     
    DECLARE @schema sysname;     
    DECLARE @object sysname;     
    DECLARE @eventType sysname;     
    SET @data = EVENTDATA();     
    SET @eventType = @data.value('(/EVENT_INSTANCE/EventType)[1]', 'sysname');     
    SET @schema = @data.value('(/EVENT_INSTANCE/SchemaName)[1]', 'sysname');     
    SET @object = @data.value('(/EVENT_INSTANCE/ObjectName)[1]', 'sysname')      
    IF @object IS NOT NULL         
        PRINT '  ' + @eventType + ' - ' + @schema + '.' + @object;     
    ELSE         
        PRINT '  ' + @eventType + ' - ' + @schema;     

    IF @eventType IS NULL         
        PRINT CONVERT(nvarchar(max), @data);     

    INSERT [dbo].[SchemaLog]          (         
        [PostTimeUtc]
    ,          [DatabaseUser]
    ,          [Event]
    ,          [Schema]
    ,          [Object]
    ,          [TSQL]
    ,          [XmlEvent]         )      
    VALUES          (         
        GETUTCDATE()
    ,          CONVERT(sysname, CURRENT_USER)
    ,          @eventType
    ,          CONVERT(sysname, @schema)
    ,          CONVERT(sysname, @object)
    ,          @data.value('(/EVENT_INSTANCE/TSQLCommand)[1]', 'nvarchar(max)')
    ,          @data         ); 

END; 
```

查看以按顺序选择更改

```
create view SchemaLogOrdered
as
SELECT top 10000 *
FROM            dbo.SchemaLog
ORDER BY  SchemaLogID DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T09:41:13.213

Redgate 选项如下。

1) 开始审核架构更改的最简单方法是安装[DLM Dashboard](https://www.red-gate.com/products/dlm/dlm-dashboard/)。这是一个免费工具，可使用 DDL 触发器提醒和记录所有更改，并将包含您要求的信息。

2) 正如 Andy Davies 已经提到的那样，正确的方法是开始源代码控制您的模式，就像您对应用程序代码一样。完成此操作后，您可以通过将数据库包含在持续集成和发布管理实践中来提高[数据库生命周期管理的成熟度。](http://www.red-gate.com/products/dlm/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T18:31:59.307

对于第二个问题，您可以考虑将触发器作为一个选项。在以下示例中，使用 SQL Server 的 EVENTDATA() 函数捕获有关触发触发器的事件的信息。SQL 脚本创建 DDL 触发器，该触发器在数据库级别捕获 CREATE、ALTER 和 DROP 事件（尽管可以在服务器级别创建触发器以捕获服务器上所有数据库的事件；应该使用 ON ALL SERVER 选项，而不是在数据库上）

```
CREATE TRIGGER Audit_DDL ON DATABASE
FOR CREATE_TABLE , ALTER_TABLE , DROP_TABLE
AS
DECLARE
@event xml;
SET @event = EVENTDATA(
                  );
INSERT INTO Audit_DDL_Events
VALUES( REPLACE( CONVERT( varchar( 50
                             ) , @event.query( 'data(/EVENT_INSTANCE/PostTime)'
                                             )
                    ) , 'T' , ' '
           ) , 
    CONVERT( varchar( 150
                    ) , @event.query( 'data(/EVENT_INSTANCE/LoginName)'
                                    )
           ) , 
    CONVERT( varchar( 150
                    ) , @event.query( 'data(/EVENT_INSTANCE/UserName)'
                                    )
           ) , 
    CONVERT( varchar( 150
                    ) , @event.query( 'data(/EVENT_INSTANCE/DatabaseName)'
                                    )
           ) , 
    CONVERT( varchar( 150
                    ) , @event.query( 'data(/EVENT_INSTANCE/SchemaName)'
                                    )
           ) , 
    CONVERT( varchar( 150
                    ) , @event.query( 'data(/EVENT_INSTANCE/ObjectName)'
                                    )
           ) , 
    CONVERT( varchar( 150
                    ) , @event.query( 'data(/EVENT_INSTANCE/ObjectType)'
                                    )
           ) , 
    CONVERT( varchar( max
                    ) , @event.query( 'data(/EVENT_INSTANCE/TSQLCommand/CommandText)'
                                    )
           )
  ); 
```

还必须为来自 EVENTDATA XML 的审计数据创建一个适当的存储表：

```
CREATE TABLE Audit_DDL_Events( DDL_Event_Time datetime , 
                           DDL_Login_Name varchar( 150
                                                 ) , 
                           DDL_User_Name varchar( 150
                                                ) , 
                           DDL_Database_Name varchar( 150
                                                    ) , 
                           DDL_Schema_Name varchar( 150
                                                  ) , 
                           DDL_Object_Name varchar( 150
                                                  ) , 
                           DDL_Object_Type varchar( 150
                                                  ) , 
                           DDL_Command varchar( max
                                              )
                         ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T13:22:18.213

您可以考虑将您的数据库置于源代码控制之下。也许让每个外部团队都采用您数据库的一个分支或分支。这使您可以通过提交审核更改，并能够选择要合并的更改和/或在合并之前查看/编辑这些更改。

查看[http://www.red-gate.com/products/sql-development/sql-source-control/](http://www.red-gate.com/products/sql-development/sql-source-control/)了解一种可用的产品。

结合 Github 或 Bitbucket 等解决方案，通过 Internet 更直接地向外部贡献者开放源代码控制存储库。

# .net - lock and unlock sql server tables from .net code without using stored procedures

> ID：11470303
> 
> 赞同：0
> 
> 时间：2012-07-13T12:14:36.257
> 
> 标签：.net, sql-server, sql-server-2008, locking

I need to block a table from being accessed by any other process unless my current operation(usually a INSERT or an UPDATE) is completed, Is there a way to lock and unlock sql server tables from .net code without using stored procedures, i need these to avoid business rules based duplicate records from being entered into the table.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:22:21.053

更好的是，不要锁定表（尤其是如果更新/插入数据需要很长时间），而是仅在所有数据都更新/插入后提交更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:08:56.760

你用一个提示

插入带有（tablock）（colx）值（'newValuex'）的表中；

如果 valuex 是主键或具有唯一约束，那么它将被强制执行。

但是您不需要 tabloc 来强制执行该约束。

如果您有多个语句，那么您可以将它们包装在一个事务中。

# c# - “转换”字典 进入列表 I have a Dictionary <string,int>dictionary1 and I need to convert it into a List <data>where Data has the properties lable = dictionary1.key a 问问题 问问题 2012-07-13T12:14:42.957 18866 次 This question shows research effort; it is useful and clear 9 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a Dictionary <string,int>dictionary1 and I need to convert it into a List <data>where Data has the properties lable = dictionary1.key and value = dictionary1.value. I don't want to use a for/foreach loop (written by myself) because in order to avoid it I am trying to use a Dictionary. Another option would be having two different dictionaries (dictionary2 and dictionary3) where dictionary2 <string,keyofdictionary1>and dictionary3<string,valueofdictionary1>. Do I make sense? Is that possible? Is there a better option? Uncaught SyntaxError: Unexpected token ILLEGAL? I am making an AJAX call via jQuery which results in the above mentioned error. The strange part is the code works fine on LAMP, WAMP but when it is ported to a real server its giving the problem. Here's my AJAX call: function wordAnalysis() { $("#spinner").show(); removeTopics(); $.ajax({ type: "POST", url: "{$site_root_path}pages/wordanalysis.php", data: "statuses="+json_statuses, success: function(msg){ $("#mainstage").html(msg); $("#spinner").hide(); } }); } Here's the Smarty .tpl file that is loaded from the AJAX call  <link rel="stylesheet" type="text/css" href="{$site_root_path}extlib/jQCloud/jqcloud.css">   {/literal} <link rel="stylesheet" type="text/css" href="{$site_root_path}assets/css/popup.css">  What could be the reason for such an error that too only on a real server and not on LAMP, WAMP ? I've basically tested it with chrome. Edit: The data is returned as JSON after the call. $words = StatusProcessing::findWords($statuses, $max, $avg); $words = 'var words = '.json_encode($words); $this->addToView('words', $words); (this addToView is a function that builds upon Smarty's assign function.) c#.netlinq 4 9 回答 9 This answer is useful 19 假设： class Data { public string Label { get; set; } public int Value { get; set; } } 然后： Dictionary <string, int="">dic; List <data>list = dic.Select(p => new Data { Label = p.Key, Value = p.Value }).ToList(); 于 2012-07-13T12:17:59.320 回答 This answer is useful 5 也许你可以使用 LINQ？ dictionary1.Select(p => new Data(p.Key, p.Value)).ToList() 然而，这正在使用yield，因此在后台循环...... 于 2012-07-13T12:17:22.883 回答 This answer is useful 4 myDictionary.Select(x => new Data(){ label = x.Key, value = x.Value).ToList(); 于 2012-07-13T12:17:32.863 回答 This answer is useful 2 我假设“无循环”实际上意味着“我想要 LINQ”： List <data>= dictionary1.Select( pair => new Data() { label = pair.Key, value = pair.Value })).ToList(); 于 2012-07-13T12:19:21.023 回答 This answer is useful 1 尝试 dictionary1.Select(p => new Data(p.Key, p.Value)).ToList(); 于 2012-07-13T12:18:16.043 回答 This answer is useful 1 .NET 已经有一种数据类型可以做的Data事情：KeyValuePair<t1,t2>. Dictionary 已经实现IEnumerable<keyvaluepair<t1,t2>>，只需转换为它。 Dictionary <string, int="">blah = new Dictionary<string, int="">(); IEnumerable<keyvaluepair<string, int="">> foo = blah; 于 2012-07-13T12:21:48.887 回答 This answer is useful 1 这是一个旧帖子，但只是为了帮助其他人;） 转换任何对象类型的示例： public List <t>Select<t>(string filterParam) { DataTable dataTable = new DataTable() //{... implement filter to fill dataTable } List<dictionary<string, object="">> rows = new List<dictionary<string, object="">>(); Dictionary <string, object="">row; foreach (DataRow dr in dataTable.Rows) { row = new Dictionary<string, object="">(); foreach (DataColumn col in dataTable.Columns) { row.Add(col.ColumnName, dr[col]); } rows.Add(row); } string json = new JavaScriptSerializer().Serialize(rows); using (MemoryStream stream = new MemoryStream(Encoding.UTF8.GetBytes(json))) { DataContractJsonSerializer deserializer = new DataContractJsonSerializer(typeof(T[])); var tick = (T[])deserializer.ReadObject(stream); return tick.ToList(); } } 于 2015-07-14T14:27:51.847 回答 This answer is useful 0 public class Data { public string Key { get; set; } public int Value { get; set; } } private static void Main(string[] args) { Dictionary <string, int="">dictionary1 = new Dictionary<string, int="">(); dictionary1.Add("key1", 1); dictionary1.Add("key2", 2); List <data>data = dictionary1.Select(z => new Data { Key = z.Key, Value = z.Value }).ToList(); Console.ReadLine(); } 于 2012-07-13T12:17:54.337 回答 This answer is useful 0 以防万一只是帮助任何人，我这样做了 - 将处理比单个值类型更复杂的对象，如 OP 所述。 // Assumes: Dictionary <string, myobject="">MyDictionary; List <myobject>list = new List<myobject>(); list.AddRange(MyDictionary.Values.ToArray()); 于 2017-06-21T23:48:47.647 回答 Related 1 objective-c - 监视 NSManagedObject 上的更改，类似于 NSFetchedResultsController 2 php - 压缩和下载 1 python - python登录网站，登录按钮没有“id”只有“class” 0 c++ - 开发 Chromecast 服务器 2 ehcache - 如何避免 Terracotta BigMemory Go 中的数据丢失 1 python - 带有条件表达式的无效语法 0 go - 我的 Result.Scan() 中的错误是什么？ 3 haskell - 与haskell文字等号 1 ios - iOS - 自动布局不适用于主 UIView - （内部截图） 1 xml - 基于其他两个节点相等返回节点集 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</myobject></myobject></string,></data></string,></string,></string,></string,></dictionary<string,></dictionary<string,></t></t></keyvaluepair<string,></string,></string,></keyvaluepair<t1,t2></t1,t2></data></data></string,></string,valueofdictionary1></string,keyofdictionary1></data></string,int></data></string,int>

> ID：11470305
> 
> 赞同：9
> 
> 时间：
> 
> 标签：c#, .net, linq

I have a `Dictionary<string,int> dictionary1` and I need to convert it into a `List<Data>` where `Data` has the properties `lable` = dictionary1.key and `value` = dictionary1.value. I don't want to use a for/foreach loop (written by myself) because in order to avoid it I am trying to use a Dictionary.

Another option would be having two different dictionaries (dictionary2 and dictionary3) where `dictionary2<string,keyOfDictionary1>` and `dictionary3<string,valueOfDictionary1>`.

Do I make sense? Is that possible? Is there a better option?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T12:17:59.320

假设：

```
class Data
{
    public string Label { get; set; }

    public int Value { get; set; }
} 
```

然后：

```
Dictionary<string, int> dic;
List<Data> list = dic.Select(p => new Data { Label = p.Key, Value = p.Value }).ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T12:17:22.883

也许你可以使用 LINQ？

```
dictionary1.Select(p => new Data(p.Key, p.Value)).ToList() 
```

然而，这正在使用`yield`，因此在后台循环......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T12:17:32.863

```
myDictionary.Select(x => new Data(){ label = x.Key, value = x.Value).ToList(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T12:19:21.023

我假设“无循环”实际上意味着“我想要 LINQ”：

```
List<Data> = dictionary1.Select(
    pair => new Data() {
        label = pair.Key,
        value = pair.Value
    })).ToList(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T12:18:16.043

尝试

```
dictionary1.Select(p => new Data(p.Key, p.Value)).ToList(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-13T12:21:48.887

.NET 已经有一种数据类型可以做的`Data`事情：`KeyValuePair<T1,T2>`. Dictionary 已经实现`IEnumerable<KeyValuePair<T1,T2>>`，只需转换为它。

```
Dictionary<string, int> blah = new Dictionary<string, int>();
IEnumerable<KeyValuePair<string, int>> foo = blah; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-14T14:27:51.847

这是一个旧帖子，但只是为了帮助其他人;）

转换任何对象类型的示例：

```
public List<T> Select<T>(string filterParam)
{    
    DataTable dataTable = new DataTable()

    //{... implement filter to fill dataTable }

    List<Dictionary<string, object>> rows = new List<Dictionary<string, object>>();
    Dictionary<string, object> row;

    foreach (DataRow dr in dataTable.Rows)
    {
        row = new Dictionary<string, object>();
        foreach (DataColumn col in dataTable.Columns)
        {
            row.Add(col.ColumnName, dr[col]);
        }
        rows.Add(row);
    }

    string json = new JavaScriptSerializer().Serialize(rows);

    using (MemoryStream stream = new MemoryStream(Encoding.UTF8.GetBytes(json)))
    {
        DataContractJsonSerializer deserializer = new DataContractJsonSerializer(typeof(T[]));
        var tick = (T[])deserializer.ReadObject(stream);
        return tick.ToList();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-13T12:17:54.337

```
 public class Data
    {
        public string Key { get; set; }

        public int Value { get; set; }
    }

    private static void Main(string[] args)
    {
        Dictionary<string, int> dictionary1 = new Dictionary<string, int>();
        dictionary1.Add("key1", 1);
        dictionary1.Add("key2", 2);

        List<Data> data = dictionary1.Select(z => new Data { Key = z.Key, Value = z.Value }).ToList();

        Console.ReadLine();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-21T23:48:47.647

以防万一只是帮助任何人，我这样做了 - 将处理比单个值类型更复杂的对象，如 OP 所述。

```
// Assumes: Dictionary<string, MyObject> MyDictionary;
List<MyObject> list = new List<MyObject>();
list.AddRange(MyDictionary.Values.ToArray()); 
```

# jquery - 未捕获的语法错误：意外的令牌非法？

> ID：11470306
> 
> 赞同：0
> 
> 时间：2012-07-13T12:14:43.453
> 
> 标签：jquery, ajax, json

我正在通过 jQuery 进行 AJAX 调用，这会导致上述错误。奇怪的部分是代码在 LAMP、WAMP 上运行良好，但是当它被移植到真正的服务器时，它就会出现问题。

这是我的 AJAX 调用：

```
function wordAnalysis() {
    $("#spinner").show();
    removeTopics();
    $.ajax({
            type: "POST",
            url: "{$site_root_path}pages/wordanalysis.php",
            data: "statuses="+json_statuses,
            success: function(msg){
                $("#mainstage").html(msg);
                $("#spinner").hide();
            }
    });
} 
```

这是从 AJAX 调用加载的 Smarty .tpl 文件

```
<script type="text/javascript">{$words}</script>
<script type="text/javascript" src="{$site_root_path}extlib/jQCloud/jqcloud-1.0.0.min.js"></script>
<link rel="stylesheet" type="text/css" href="{$site_root_path}extlib/jQCloud/jqcloud.css" />
<script type="text/javascript">
$(document).ready(function() {
    var max = {$max};
    var avg = {$avg};
    var time_taken = {$time_taken};
    var count = {$count};
    var size;
{literal}
    var text;
    var color;
    var span;
    var ele;
    var word_list = [];
    var table_height = $("#contentTable").height();
    var orig_table_height = 563;
    var ratio = table_height / orig_table_height;
    var max_font_size = 45;
    for (var word in words) {
        if (words[word]['total'] < avg) {
            continue;
        }
        color = Math.floor((words[word]['url']*100)/words[word]['total']);
        size = Math.floor((words[word]['total']/max)*max_font_size);
        size = Math.round(size*ratio);
        var item = new Array();
        item['text'] = word;
        item['weight'] = words[word]['total'];
        var html = new Array();
        if (color <= 10) { html['style']= "color: #68a1ff;"; }
        else if (color <= 20) { html['style']= "color: #4088ff;"; }
        else if (color <= 30) { html['style']= "color: #2477ff;"; }
        else if (color <= 40) { html['style']= "color: #0060ff;"; }
        else if (color <= 50) { html['style']= "color: #0057e6;"; }
        else if (color <= 60) { html['style']= "color: #004ece;"; }
        else if (color <= 70) { html['style']= "color: #0044b5;"; }
        else if (color <= 80) { html['style']= "color: #003996;"; }
        else if (color <= 90) { html['style']= "color: #002c75;"; }
        else { html['style']= "color: #002562;"; }
        html['style'] += " font-size: "+size;
        item['html'] = html;
        word_list.push(item);
    }
    $("#mainstage").jQCloud(word_list);
});
</script>
<style type="text/css">
    #mainstage span.w10, #mainstage span.w9, #mainstage span.w8, #mainstage span.w7 {
        text-shadow: 0px 1px 1px #ccc;
    }
    #mainstage span.w3, #mainstage span.w2, #mainstage span.w1 {
        text-shadow: 0px 1px 1px #fff;
    }
</style>
{/literal}
<link rel="stylesheet" type="text/css" href="{$site_root_path}assets/css/popup.css" />
<script type="text/javascript" src="{$site_root_path}assets/js/popup.js"></script> 
```

仅在真实服务器上而不是在 LAMP、WAMP 上出现这种错误的原因可能是什么？我基本上已经用chrome测试了它。

编辑：

调用后数据以 JSON 形式返回。

```
$words = StatusProcessing::findWords($statuses, $max, $avg);
$words = 'var words = '.json_encode($words);
$this->addToView('words', $words); 
```

（这个 addToView 是一个基于 Smarty 的 assign 函数的函数。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T03:01:00.600

尝试改变

`$words = 'var words = '.json_encode($words);`

至

`$words = json_encode($words);`

你不想`var words =`在你的 json 中，这是不合法的，见[http://json.org](http://json.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T11:03:54.703

Chrome doesn't specify this error. Debugging in Firefox (using Firebug) will give you more information.

# php - join two tables order by date and display results

> ID：11470307
> 
> 赞同：1
> 
> 时间：2012-07-13T12:14:43.657
> 
> 标签：php, mysql, join

I'm trying to make a function kinda similar to facebook's notification window. Their function seems to combine any kind of event and display them after date.

So i have 2 tables : Article and comments. both have 2 similar rows : uniquepostowner and date_posted.

I want to join them up and display them one after another. Example :

```
User A has posted a comment (04.05.2012 5:30)
User B Has posted a comment (04.05.2012 6:30)
User C has written an article (04.05.2012 7:30)
user D has posted a comment (04.05.2012 8:30) 
```

However, i'm struggling with both joining these 2 and displaying the results. Reading others with similar scenarios ive tried this as a query:

```
$sesid = $_SESSION['user_id'];
$sql = "SELECT X.* FROM ( SELECT * FROM `article` WHERE uniquepostowner = {$sesid} UNION SELECT * FROM `comments`  WHERE uniquepostowner  = {$sesid} ) X ORDER BY X.`date_posted`";
$result = mysql_query($sql); 
```

Then trying to fetch the results like this:

```
while($row = mysql_fetch_array($result))
{
echo $row['article.id'];
 } 
```

Tables:

```
**article**:
id
title
content
uniqueuser
date_posted
full_name
uniquepostowner

**comments**:
id 
pid (same as article.id)
date_posted
content
full_name
uniquepostowner 
```

there are more rows to these tables, but they are irrelevant. But no success. Any help is greatly appreciated as always! :)

Currently i'm trying this, but its not doing what i want.

```
$sql = "SELECT * FROM article a INNER JOIN comments c WHERE a.uniquepostowner = {$sesid} AND c.uniquepostowner = {$sesid} 
ORDER BY a.date_posted DESC , c.date_posted DESC "; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:51:10.457

我认为这是你需要的：

**更新：**

```
$sesid = $_SESSION['user_id'];
$sql = "
SELECT 
    X . *
FROM
    (SELECT 
        id,
        date_posted,
        content,
        full_name,
        uniquepostowner,
        'article' AS type
    FROM
        article
    WHERE
        uniquepostowner = {$sesid} UNION SELECT 
        id,
        date_posted,
        content,
        full_name,
        uniquepostowner,
        'comment' AS type
    FROM
        comments
    WHERE
        uniquepostowner = {$sesid}) X
ORDER BY X.date_posted
";
$result = mysql_query($sql); 
```

你可以迭代：

```
while($row = mysql_fetch_array($result))
{
        if($row['type']=='article'){
            echo "User " . $row['full_name'] . " has written an article (".$row['date_posted'].")<br>";
        } else {
            echo "User " . $row['full_name'] . " has posted a comment (".$row['date_posted'].")<br>";
        }
} 
```

您可以在以下位置查看：

[http://sqlfiddle.com/#!2/38778/8](http://sqlfiddle.com/#!2/38778/8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:24:46.657

您应该尝试改写您的 sql 以仅使用两个表共有的列：

```
SELECT uniquepostowner,date_posted FROM `article` WHERE uniquepostowner = {$sesid} 
UNION 
SELECT uniquepostowner,date_posted FROM `comments` WHERE uniquepostowner  = {$sesid} 
ORDER BY date_posted 
```

[mysql手册](http://dev.mysql.com/doc/refman//5.5/en/union.html)中有更多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:25:09.040

也许我错过了重点，但这不能解决问题：

```
SELECT  articles.*, comments.* FROM  articles, comments WHERE articles.uniqueuserid = $userId AND comments.postId = articles.Id ORDER BY articles.date_published DESC 
```

Ofc 所有表和字段名称都需要调整以适合您的代码。它的作用基本上是加载所有带有 uniquepostowner 或任何您的名字的文章以及按发布日期排序的相应评论。

这就是你所追求的吗？

**编辑** 实际上，评论和文章是分开的，你想并排显示它们吗？在这种情况下，您为什么不创建“事件”表，其中包含日期、所有者、类型（文章/评论/喜欢/照片/任何东西）和相应项目的 ID，并使用它来生成您的提要？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:28:19.633

您必须使联合的每个查询的列相等：

```
SELECT X.* FROM ( SELECT **uniquepostowner** FROM `article` WHERE uniquepostowner = {$sesid} UNION SELECT **uniquepostowner** FROM `comments`  WHERE uniquepostowner  = {$sesid} ) X ORDER BY X.`date_posted` 
```

这只是一个示例，在联合中，两个查询必须返回相同数量的字段，我建议您只返回两个表共有的字段。

# iphone - How to check live streaming url response iphone

> ID：11470312
> 
> 赞同：0
> 
> 时间：2012-07-13T12:15:14.593
> 
> 标签：iphone, mpmovieplayercontroller

In my app I am doing live streaming with the following code :

```
-(void)playurl:(id)sender
{
    self.mpPlayer=[[[MPMoviePlayerController alloc]initWithContentURL:[NSURL URLWithString:@"http://alwatan.lsops.net/live/alwradio_ar_audio.sdp/playlist.m3u8"]] autorelease];

    [self.mpPlayer prepareToPlay];

    if(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        self.mpPlayer.view.frame = CGRectMake(0, 50, 768, 400);        
    }
    else if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    {
        self.mpPlayer.view.frame = CGRectMake(0, 0, 1024, 500);
    }    
    [self.mpPlayer play];
    self.mpPlayer.movieSourceType = MPMovieSourceTypeStreaming;
    //self.mpPlayer.movieSourceType = MPMovieSourceTypeFile;
    self.mpPlayer.shouldAutoplay = TRUE;

    self.mpPlayer.controlStyle = MPMovieControlStyleDefault;
    [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification  object:mpPlayer]; 
    [scrollView addSubview:self.mpPlayer.view];
    if(isVideoPlay)
    {
        isVideoPlay = FALSE;
    }
    else
    {
        isVideoPlay = TRUE;
    }
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
    NSError *error = [[notification userInfo] objectForKey:@"error"];
    if (error) {
    }
    else
    {
        MPMoviePlayerController *moviePlayer = [notification object];  
        [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:moviePlayer]; 
    }
} 
```

Everything is fine but my problem is that is url is not runing then application will be crashed so how can I check the live streaming url response so I can mange the condition and give alert for url not respond.

Thanks,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:40:50.313

我的经验`MPMoviePlayerControler`是错误处理不是很好。一种可能性是首先请求 URL，然后仅在流运行时加载 .m3u8 文件。

您可以使用`NSURLConnection`和朋友尝试加载流，并在必要时读取文件以查找指示流正在运行的特定内容（可能存在包含`#EXTINF:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:21:20.877

使用以下通知

```
MPMoviePlayerPlaybackStateDidChangeNotification 
```

并检查

```
 if(moviePlayer.state == MPMoviePlaybackStateStopped)
{
// Alert
}
else  if(moviePlayer.state == MPMoviePlaybackStatePlaying)
{
// Alert
}
else  if(moviePlayer.state == MPMoviePlaybackStatePaused)
{
// Alert
}
else  if(moviePlayer.state == MPMoviePlaybackStateInterrupted)
{
// Alert
}

else  if(moviePlayer.state == MPMoviePlaybackStateSeekingForward)
{
// Alert
}
else  if(moviePlayer.state == MPMoviePlaybackStateSeekingBackward)
{
// Alert
} 
```

# c# - How to mock ObjectResult.FirstOrDefault() using Moq

> ID：11470313
> 
> 赞同：0
> 
> 时间：2012-07-13T12:15:18.817
> 
> 标签：c#, asp.net, unit-testing, asp.net-mvc-2, moq

I'm doing an ASP.Net MVC2 project and developing some unit test cases on it. In one of my controllers,

```
String AllowedActions = "";
AllowedActions = entities.sp_IsAuthorized(GetLoggedUserId(), 1, item.SubCategoryId, "CreateMeeting_HTML").FirstOrDefault(); 
```

I was unable to mock this sp_IsAuthorized() method ,

```
 public ObjectResult<global::System.String> sp_IsAuthorized(.....){

} 
```

I tried to mock it in this way,

```
var entity = new Mock<TestMVCProductEntities>();
entity.Setup(x => x.sp_IsAuthorized(...)).Return(???); 
```

but I have no clue how to return

ObjectResult

this type of object. Help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:59:50.003

您不能创建 ObjectResult 的新实例，也不能模拟它，因为它被标记为密封。我建议您将数据上下文的使用包装到工作单元或类似模式中，使其在单元测试中可测试。

# linux - 在共享内存文件上引发 Linux 轮询事件

> ID：11470322
> 
> 赞同：13
> 
> 时间：2012-07-13T12:15:57.633
> 
> 标签：linux

两个 Linux 进程打开并映射同一个 /dev/shm/ 共享内存文件并将其用作公共内存。问题：一个进程“唤醒”另一个进程以通知它应该在内存中查找的最简单和最好的方法是什么？例如，一个进程能否为另一个进程的文件描述符引发 poll() 事件？该解决方案不需要是可移植的，但我希望它简单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:12:12.017

这就是 POSIX 有条件变量的原因。

在共享内存区域中定义一个共享的 POSIX 条件变量及其关联的互斥锁。

然后让一个线程等待条件变量，当另一个线程希望另一个线程查看内存时，另一个线程发出条件变量事件的信号。

网络上有很多关于条件变量的资料。这是一个很好的简短的：[https ://computing.llnl.gov/tutorials/pthreads/#ConditionVariables](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T02:58:24.630

您也可以考虑使用信号量（POSIX 命名信号量）来解决这个问题。

一个简单的示例，使用共享内存（在示例中它在 System V 中，但您也可以将它与 POSIX 一起使用）和 POSIX 信号量在链接中， [两个进程如何在没有 pipe() 的情况下相互通信？](https://stackoverflow.com/questions/11363731/how-can-2-processes-talk-to-each-other-without-pipe/11369023#11369023)

# c - 如何“#define”这个变量？

> ID：11470328
> 
> 赞同：1
> 
> 时间：2012-07-13T12:16:19.233
> 
> 标签：c, pointers, memory-management

我在 0x102 地址中有一个整数值，我需要创建`#define ABC ...`宏。
ABC 是变量或其他东西（可以访问 0x102 单元格）。
必须可以进行这样的操作：

```
ABC = 666;  
int x = ABC*2 + 4;  
int *p = &ABC; 
```

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T12:20:35.553

假设您的对象是 16 位的（地址 0x102 是 2 字节对齐的）：

```
#define ABC  (*(volatile uint16_t *) 0x102) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:20:45.947

你可以这样做：

```
#define ABC *((int*)0x102)

int main() {
  ABC = -1;
  return 0;
} 
```

它设置了一个`int*`，然后一口气将其全部遵从。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:24:42.567

在编译时，编译器将 #defined 变量替换为实际值。

所以，如果你`#define ABC`

1)`ABC = 666;` 您将无法执行此操作。

2）`int x = ABC*2 + 4;` 您将能够执行此操作

3)`int *p = &ABC;` 您将无法执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:21:24.293

如果您将地址作为常量，则可以编写：

```
#define ABC (*(int *)0x102) 
```

如果您在该地址中有一个变量（名称如`my_variable`）：

您想要的是 C++ 所称的引用。在 C 中，它不存在。但是，正如您猜想的那样，您可以使用宏。

如果此变量与 位于同一范围内`ABC`，则您只需要：

```
#define ABC my_variable 
```

如果你有一个指向这个变量的指针（例如作为一个函数参数），你可以这样写：

```
#define ABC (*that_argument) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T16:37:27.630

您可以通过添加编译时宏来做到这一点。`ABC=(*(int*)0x102)`如果您使用的是 IDE，您可以在项目设置的 Preprocessor 字段中添加它。或者，如果您使用 CLI 编译器，例如，`gcc`您可以按如下方式编译程序。

```
gcc prog.c -DABC=(*(int*)0x102) 
```

或者您可以直接在程序中定义它，如下所示

```
#define ABC (*(int *)0x102)

int main()
{
    ABC = 666;  
    int x = ABC*2 + 4;  
    int *p = &ABC;  
    return 0;
} 
```

# java - Mahout 推荐器返回空结果

> ID：11470329
> 
> 赞同：0
> 
> 时间：2012-07-13T12:16:23.340
> 
> 标签：java, mahout

我有一个用户估计表。大约有1000个条目。从这些数据中，我想建立一个推荐，但返回一个空列表 Mahout。可能是什么问题？

```
JDBCDataModel dataModel = new MySQLJDBCDataModel(source, "rate", "userId", "eventId", "rate", null);

    dataModel.refresh(null);

    try {
        UserSimilarity userSimilarity = new PearsonCorrelationSimilarity(dataModel);
        userSimilarity.setPreferenceInferrer(new AveragingPreferenceInferrer(dataModel));

        UserNeighborhood neighborhood =
                  new NearestNUserNeighborhood(10, userSimilarity, dataModel);

        Recommender recommender =
                  new GenericUserBasedRecommender(dataModel, neighborhood, userSimilarity);
        Recommender cachingRecommender = new CachingRecommender(recommender);
        List<RecommendedItem> recommendations =
                    cachingRecommender.recommend(user.id, 10);

    } catch (TasteException e) {

        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T15:33:25.137

那只是意味着没有任何东西有资格获得推荐。您的数据集很小，而且我想太稀疏了。Pearson 不能很好地处理稀疏数据，因为它很少能计算任何相似性。

# iphone - 从 iphone 视图传递到另一个视图的空值

> ID：11470331
> 
> 赞同：2
> 
> 时间：2012-07-13T12:16:31.770
> 
> 标签：iphone

当我将字符串传递给另一个视图时，我有一个空值。我的代码是：

在视图`AddBarView.m`中，我有字符串：

```
nameAdded = nameField.text;   //nameAdded is defined as NSString in AddBarView.h
NSLog(@"namefrom addbarview: %@", nameAdded);  OK it works here , NsLog return the textfild 
```

现在在其他视图中 AddLocationController.m

```
@synthesize nameAdded;
- (void)addViewControllerDidFinish:(AddBarView *)controller
{
    AddBarView *controllerAdd;
    NSLog(@"namefrom addbarview: %@", controller.nameAdded);  //here

    [self dismissModalViewControllerAnimated:YES];
} 
```

返回一个（空`NSLog`）值。我的错在哪里？

提前发送！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:49:56.940

nameAdded = nameField.text; 你只保留了价值。如果稍后编辑 nameField.text，nameAdded 的值也会改变。您应该制作一份副本以保留价值。nameAdded = [nameField.text 副本]; 在 AddBarView 的 viewDidUnload 函数中检查您是否已释放 nameAdded。否则，两个nameAdded变量是同一个对象吗？请打印他们的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:22:07.733

您需要`nameAdded`按如下方式为字符串分配内存并使用 nameField 对其进行初始化。

```
nameAdded=[[NSString alloc] initWithFormat:@"%@",nameField.text]; 
```

**编辑** 将以下行放入 init 方法中。

```
nameAdded=[NSString stringWithFormat:@"%@",nameField.text]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T12:40:45.103

请参阅我的这篇文章，我在这里提供了一个**教程**，了解如何将一个类`NSString`从一个`ViewController`类传递到另一个[iOS - 将变量传递给视图控制器](https://stackoverflow.com/questions/11272864/ios-passing-variable-to-view-controller/11274661#11274661)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T13:28:54.323

实际上，您正在分配和初始化包含 textField 的类。所以它总是会返回 NULL 值，因为 textField 也已分配和初始化。如果在访问它的类之前调用​​了类“AddBarView”，您可以简单地将它传递给该类。相反，在访问它的类之后调用“AddBarView”，您可能希望将 textField 值存储在全局字符串中！

# c# - 如何将数据从 .Net Web 应用程序传递到我的 Java Applet

> ID：11470332
> 
> 赞同：0
> 
> 时间：2012-07-13T12:16:38.637
> 
> 标签：c#, java, .net

如何将我的 .Net Web 应用程序中的 ID 传递和恢复到在此 Web 应用程序中运行的 Java Applet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:17:41.263

通过序列化/反序列化数据，只是一个想法。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:21:26.093

有几种方法可以做到这一点...

*   使用 API 来回传递信息（例如 SOAP 或 REST），然后您可以为用户提供一个“令牌”，以便使用 QueryString 在两个应用程序之间传递，供服务器用作获取数据的主键。

*   使用查询字符串直接传递信息

*   （不太可靠）如果两个应用程序在同一个域上，则使用 cookie

*   使用通用数据存储（即数据库、memcached 等，具体取决于您尝试传递的内容）

每个都有其优点和缺点。您要传递什么类型的数据，用户是否参与了交易？

# actionscript-3 - 在 for 循环中使用 setInterval

> ID：11470333
> 
> 赞同：2
> 
> 时间：2012-07-13T12:16:40.977
> 
> 标签：actionscript-3, flash, actionscript

我目前在 AS3 中面临一个小问题。我想要实现的是在 for 循环中淡化图像。问题是循环没有等待 setInterval 函数完成。

```
for(var i in imageClips){
    setInterval(function(){
        fade(imageClips[i]);
    }, 6000);        
} 
```

一旦调用 setInterval 函数，行为就很清楚了，循环继续。我现在的问题是，有没有办法让循环等待 setInterval 函数中发生的事情完成？

在此先感谢，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:23:32.087

`setInterval`不会延迟循环执行。你可以这样做：

```
function fadeImages(imageClips) {
  // Create a clone
  var imageStack:Array = imageClips.concat();

  // Create the callback that will fade all images
  var doFade:Function = function() {
    if (imageStack.length > 0) {
      fade(imageStack.shift());
      setInterval(doFade, 6000);
    }
  }

  // Start fading images
  doFade();
}

// Fade specified images
fadeImages(imageClips); 
```

如果你想再次进行淡入淡出，只需再次使用该功能。

**编辑：**用函数包装片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:15:51.710

如果您使用诸如 Greensocks 的[TweenMax](http://www.greensock.com/tweenmax/)之类的库用于补间，您的生活会轻松很多。它几乎是 Flash 中程序化动画的标准，并提供了数量惊人的功能，包括设置补间延迟的能力。

使用 TweenMax，您的代码将如下所示：

```
var delay:int = 6; // delay between fades in seconds
var duration:int = 1; // duration of fade in seconds

for (var i in imageClips) 
{
    TweenMax.to(imageClips[i], duration, { alpha: 0, delay: i * delay });  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:23:22.033

您可以使用事件而不是等待动画结束。在每个动画结束时调度一个完整的事件（例如在电影剪辑的最后一帧）：

```
dispatchEvent(new Event(Event.COMPLETE)); 
```

然后为每个动画添加监听器：

```
var index:int = -1;

function fadeNext(event:Event = null):void {
    index += 1;
    if (index < imageClips.length) fade(imageClips[index]);
}

for (var i in imageClips) {
    imageClips[i].addEventListener(Event.COMPLETE, fadeNext, false, 0, true);
}

fadeNext(); 
```

这样您就可以更改动画的持续时间，而无需同步任何超时。

# actionscript-3 - AS3/AIR 设备横向还是纵向？

> ID：11470335
> 
> 赞同：2
> 
> 时间：2012-07-13T12:16:54.087
> 
> 标签：actionscript-3, air, adobe

启动时我想检查设备是纵向还是横向模式，到目前为止我有：

```
var startOrientation:String = stage.orientation;
        trace('startOrientation: '+ startOrientation);
        if (startOrientation == "default")
        {

        }
        if (startOrientation == "upsideDown")
        {

        } 
```

但这并不能告诉我它是风景还是肖像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-31T19:33:36.873

好吧，不知何故，上面发布的“答案”实际上只回答了有问题的人已经知道的内容...... stage.orientation 不会让你知道它的风景或肖像......

这可能不是您要寻找的……但是类似的东西怎么样？

```
var isLandscape:Boolean = this.stage.stageWidth>this.stage.stageHeight; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T14:21:41.527

当我做 ：

```
trace(stage.orientation); 
```

我得到“rotatedRight”

stage.orientation 可以是以下之一：

```
public static const DEFAULT : String = "default";
public static const ROTATED_LEFT : String = "rotatedLeft";
public static const ROTATED_RIGHT : String = "rotatedRight";
public static const UNKNOWN : String = "unknown";
public static const UPSIDE_DOWN : String = "upsideDown"; 
```

还有 stage.deviceOrientation 属性可用于确定设备的物理方向。

# css - iPhone/iPod 上的移动 Safari CSS hack

> ID：11470337
> 
> 赞同：6
> 
> 时间：2012-07-13T12:17:02.627
> 
> 标签：css, mobile-safari

有谁知道一个很好的现代 CSS hack，只针对 iPhone 和 iPod Touch 上的移动 safari？

我一直在看`@media screen and (max-device-width: 480px)`，但那是 3 年前的事情，现在与 Nexus S 匹配。

（这是为了解决一个微妙的布局问题。我意识到浏览器嗅探是邪恶的等等。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T12:33:06.877

[http://cssuseragent.org](http://cssuseragent.org)欢迎来到黑暗面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T12:24:09.237

您可以使用`only screen and (-webkit-min-device-pixel-ratio: 2)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:24:57.060

你也可以要求`-webkit-min-device-pixel-ratio: 2`。我不相信目前报告任何高于 2 的浏览器（尽管有些报告较低，所以使用 min-ratio） - 但是，这不包括 iPhone 3GS 和非视网膜 iPod Touch 设备。对于那些，你必须做一些用户代理嗅探。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:24:40.180

针对网络上特定设备的唯一方法是检查用户代理字符串。所有苹果设备在用户代理字符串中都有它们的名称。例如，iphone 将有“iphone”，而 ipod 将有“ipod”。使用它来动态应用或加载 css。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-31T20:42:53.907

如果您只需要在手机上定位 Safari，只需在此 hack 中添加媒体查询：

```
@media screen and (max-width: 767px) {
    _::-webkit-full-page-media, _:future, :root .safari_only {
        padding: 10px; //or any property you need
    }
} 
```

并且不要忘记将**.safari_only**类添加到您要定位的元素中，例如：

```
<div class='safari_only'> This div will have a padding:10px in a mobile with Safari  </div> 
```

一个细节：这也会影响 Android 设备中的 Safari 浏览器，但是......无论如何，谁在 Android 设备中使用 Safari :)

# gtk - GtkTextView 光标始终在中心线上

> ID：11470338
> 
> 赞同：1
> 
> 时间：2012-07-13T12:17:06.187
> 
> 标签：gtk, pygtk, gtktextview

我有一个`GtkTextView`，我希望能够将光标垂直居中在中心。

如果光标移动，文本应向上（或向下）滚动，但光标仍应保持在中心位置。

我尝试了几件事：在 textview 的第一个和最后一个字符上添加边距，但是在第一个和最后一个字符后面添加文本时会出现问题。如果选择第一行也不好，选择颜色会扩展到“空”房间。

简而言之，我需要：

1.  在第一行之前添加一个边距
2.  在最后一行后添加边距
3.  滚动文本以居中`cursor_move`或`text_changed`（我目前解决了这个问题

```
cursor_iter = self.TextBuffer.get_iter_at_mark(cursor)
fflines = round(self.window_height/(2*20))
cursor_iter.forward_visible_lines(fflines)
self.TextEditor.scroll_to_iter(cursor_iter, 0.0, True, 0, 0.5) 
```

但是，使用这种方法，我需要在我的 textview 末尾添加几个换行符。因此，如果有人知道更好的解决方案，我会很高兴听到它）

我正在考虑进行基于像素的滚动，但我不知道该怎么做。

我很乐意听到一些建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:26:55.283

显然没有人想出答案。

我终于一起破解了一些有效的东西。它可能不是最干净的代码，但谁在乎呢？

实际上，由于无法向文本框添加填充，它会在文本文件的开头和结尾添加换行符以获得某种填充。

你可以在这里找到我的实现：[UberWriter 的 Launchpad 项目](https://launchpad.net/uberwriter)

如果您想了解更多，请随时通过邮件询问我。

干杯，狼

# css - jQuery Mobile - Android 浏览器上没有应用 CSS

> ID：11470339
> 
> 赞同：2
> 
> 时间：2012-07-13T12:17:06.187
> 
> 标签：css, jquery-mobile, android-browser

我尝试使用 jquery mobile 准备一些“演示”站点。

使用 Safari、Google Chrome、Dolphin 浏览器在我的 iPhone 上一切正常。在我的桌面上，它也可以像在 iPhone 上一样以 1 : 1 的比例运行。

如果我想在我同事的三星 Galaxy Ace 上用 Android 测试它，原生 android 浏览器中没有 CSS 样式，在 Dolphin 浏览器中也是如此。

我还测试了几个网络仿真器，例如：http: [//www.howtogomo.com/en/d/test-your-site/#gomo-meter](http://www.howtogomo.com/en/d/test-your-site/#gomo-meter) 结果是一样的.. 该站点包含所有元素，但没有已应用 CSS 样式。

我在元素中使用了这个样式表定义：我必须添加一些其他样式，所以我将它们复制到这个文件的末尾。

这是我的演示网站：[http ://soundart.cz/mobile/index.php](http://soundart.cz/mobile/index.php)

非常感谢你的帮助！顺便提一句。我已经从你的 jqmgallery.com 测试了一些网站，它在同一个 android 浏览器上与 CSS 一起工作得很好。但我找不到其他网站和我的网站之间的区别:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:44:59.660

显然 jQuery 1.7.2 与 jQuery mobile 不完全兼容，因此将其恢复为 1.7.1。

这就是我添加 CSS 的方式：

```
<link rel="stylesheet" type="text/css" href="../lib/jquery.mobile-1.1.1/jquery.mobile-1.1.1.css" media="all" /> 
```

您可以尝试将其更改为（尽管您可以保留链接）。

# python - QTableView 单元格文本对齐 - 无需迭代即可更改

> ID：11470353
> 
> 赞同：1
> 
> 时间：2012-07-13T12:17:46.710
> 
> 标签：python, pyqt, pyside

有没有更好的方法来更改列文本对齐方式？我正在遍历列中的所有单元格：

```
for r in range(self.rowCount()):
    self.item(r, column).setTextAlignment(Qt.AlignmentFlag.AlignCenter) 
```

难道没有更好（更直接）的方式来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:15:43.693

不确定这是否适合您的其余代码，但您是否查看过 setColumnAlignment() 方法？

[http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qgraphicsgridlayout.html#setColumnAlignment](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qgraphicsgridlayout.html#setColumnAlignment)

好像这样就可以了。

# c# - FormsAuthenticationTicket UserData 和 UnitTesting

> ID：11470362
> 
> 赞同：0
> 
> 时间：2012-07-13T12:18:38.093
> 
> 标签：c#, unit-testing, forms-authentication, asp.net-mvc-4

我正在尝试在 MVC 中进行一些单元测试，但是我的一些功能需要 UserID 才能工作（即作为外键保存到数据库中）。

UserID 存储在`UserData`我将如何在单元测试时“伪造”UserID 的属性中，`FormsAuthenticationTicket`以便我可以使用假用户运行单元测试。这甚至可能吗？

我正在使用 Microsoft 的内置单元测试系统。

我计划使用的测试代码类似于

```
[TestMethod]
public void EnsureAddItemAddsItems()
{
   // Arrange
   ShoppingCartController controller = new ShoppingCartController();
   // These would be populated by dummy values
   Guid itemID = Guid.Empty;
   Guid itemTypeID = Guid.Empty;

   // Act
   ViewResult result = controller.AddItem(itemTypeID, itemID);

   //Assert
   Assert.AreEqual("Your shopping cart contains 1 item(s)",result.ViewBag.Message);
} 
```

一些示例代码可能如下所示：-

```
public ActionResult AddItem(Guid itemType, Guid itemID, string returnAction)
{
    ShoppingCartViewModel oModel = new ShoppingCartViewModel();

    string szName = String.Empty;
    int price = 0;

    using (var context = new entityModel())
    {
        // This is the section I'm worries about
>>>>>>>>> Guid gUserID = this.GetCurrentUserID(); <<<<<<<<<

        var currentSession = this.CreateOrContinueCurrentCartSession(gUserID);

        var oItem = new ShoppingCartItem();
        oItem.Id = Guid.NewGuid();
        oItem.ItemId = itemID;
        oItem.ItemTypeId = itemType;
        oItem.ItemName = szName;
        oItem.ShoppingCartSessionId = currentSession.ID;
        oItem.Price = 1;
        context.ShoppingCartItems.AddObject(oItem);
        context.SaveChanges();
    }

    this.FlashInfo("Item added to shopping cart");
    ViewBag.Message(string.Format("Your shopping cart contains {0} item(s)",AnotherFunctionThatJustCountsTheValues()));
    return this.View();

} 
```

突出显示的行是我获取用户 ID 的地方，该函数只是一个扩展函数，它不做任何复杂的事情，它只是获取保存为`FormsAuthenticationTicket.UserData`字段的用户 ID。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T13:07:04.293

> // 这是我担心的部分`Guid gUserID = this.GetCurrentUserID();`

这是因为通常这*部分*与您的控制器操作无关。所以让我们删除它，好吗？这样你就不用再担心了:-)

让我们先简化您的代码，因为它包含太多噪音。顺便说一句，您应该考虑[将您的控制器动作放在节食上，](http://www.viddler.com/explore/mvcconf/videos/1/)因为它太复杂并且做了太多事情。

重要的部分是这样的：

```
[Authorize]
public ActionResult AddItem()
{
    Guid gUserID = this.GetCurrentUserID();
    return Content(gUserID.ToString());
} 
```

现在，这确实很烦人，因为如果该`GetCurrentUserID`方法驻留在您的控制器中并尝试读取表单身份验证 cookie，您可能会遭受孤立的单元测试。

如果我们的代码如下所示：

```
[MyAuthorize]
public ActionResult AddItem()
{
    var user = (MyUser)User;
    return Content(user.Id.ToString());
} 
```

`MyUser`自定义主体在哪里：

```
public class MyUser : GenericPrincipal
{
    public MyUser(IIdentity identity, string[] roles) : base(identity, roles)
    { }

    public Guid Id { get; set; }
} 
```

那岂不是很壮观？这样，控制器操作就不再需要担心 cookie 和票证之类的东西了。那不是它的责任。

现在让我们看看如何对它进行单元测试。我们选择我们最喜欢的模拟框架（在我的例子中是[Rhino Mocks 以及](http://hibernatingrhinos.com/open-source/rhino-mocks)[MvcContrib.TestHelper](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)）并模拟：

```
[TestMethod]
public void AddItem_Returns_A_Content_Result_With_The_Current_User_Id()
{
    // arrange
    var sut = new HomeController();
    var cb = new TestControllerBuilder();
    cb.InitializeController(sut);
    var user = new MyUser(new GenericIdentity("john"), null)
    {
        Id = Guid.NewGuid(),
    };
    cb.HttpContext.User = user;

    // act
    var actual = sut.AddItem();

    // assert
    actual
        .AssertResultIs<ContentResult>()
        .Content
        .Equals(user.Id.ToString());
} 
```

所以现在剩下的就是看看自定义`[MyAuthorize]`属性的样子：

```
public class MyAuthorizeAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var authorized = base.AuthorizeCore(httpContext);
        if (!authorized)
        {
            return false;
        }

        var cookie = httpContext.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (cookie == null)
        {
            return false;
        }

        var ticket = FormsAuthentication.Decrypt(cookie.Value);
        var id = Guid.Parse(ticket.UserData);
        var identity = new GenericIdentity(ticket.Name);
        httpContext.User = new MyUser(identity, null)
        {
            Id = id
        };
        return true;
    }
} 
```

自定义授权属性负责读取表单身份验证 cookie 的 UserData 部分并将当前主体设置为我们的自定义主体。

# asp.net - 为 asp:chart 控件添加效果

> ID：11470363
> 
> 赞同：0
> 
> 时间：2012-07-13T12:18:38.977
> 
> 标签：asp.net, animation, graph, charts

我正在使用 asp:Chart 来显示图表。加载页面时会显示图表。我想为图表控件添加效果，比如条形应该慢慢地从 0 上升到某个值（取决于 y 值）。如何使用 asp:chart 添加这样的效果？

这是我在 .aspx 页面中的图形代码。

```
<asp:Chart ID="DashboardGraph" runat="server" BackColor="#D3DFF0" Palette="BrightPastel"
            BorderDashStyle="Solid" BackGradientStyle="TopBottom" BorderWidth="2" BorderColor="26, 59, 105"
            ImageLocation="~/TempImages/ChartPic_#SEQ(500,3)" Width="500px" Height="350px">
            <Titles>
                <asp:Title ShadowColor="32, 0, 0, 0" Font="Trebuchet MS, 14.25pt, style=Bold" ShadowOffset="3"
                    Text="Inventory Statistics" ForeColor="26, 59, 105">
                </asp:Title>
            </Titles>
          <Legends>
                <asp:Legend Docking="Right" BackColor="Transparent">
                </asp:Legend>
            </Legends>
            <BorderSkin SkinStyle="Emboss"></BorderSkin>
            <Series>
                <asp:Series Name="ProductName" ChartType="Column" YValueType="Int32" IsValueShownAsLabel="true">

                </asp:Series>
            </Series>
            <ChartAreas>
                <asp:ChartArea Name="ChartArea1" BorderColor="64, 64, 64, 64" BorderDashStyle="Solid"
                    BackSecondaryColor="Transparent" BackColor="64, 165, 191, 228" ShadowColor="Transparent"
                    BackGradientStyle="TopBottom" >
                    <Area3DStyle Rotation="10" Inclination="15" WallWidth="0" />
                    <AxisY LineColor="64, 64, 64, 64" LabelAutoFitMaxFontSize="8" Title="Quantity" >
                        <LabelStyle Font="Trebuchet MS, 8.25pt, style=Bold" />
                        <MajorGrid LineColor="64, 64, 64, 64" />
                    </AxisY>
                    <AxisX LineColor="64, 64, 64, 64" LabelAutoFitMaxFontSize="8" Interval="1" TitleAlignment="Near" Title="Products">
                        <LabelStyle Font="Trebuchet MS, 8.25pt, style=Bold" />
                        <MajorGrid LineColor="64, 64, 64, 64" />
                    </AxisX>
                </asp:ChartArea>
            </ChartAreas>
        </asp:Chart> 
```

下面是将 asp:chart 与数据表绑定的代码

```
 DataTable dtGraph = objDashboard.GetDahboardGraphData();
 DashboardGraph.DataSource = dtGraph;
 DashboardGraph.Series["ProductName"].XValueMember = "ProductName";
 DashboardGraph.Series["ProductName"].YValueMembers = "Total";

 DashboardGraph.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:37:24.243

抱歉，asp:Chart 控件不提供任何类型的动画，它们是渲染图像。虽然有很多产品可以用来创建您正在寻找的效果，例如[VISIfire](http://www.visifire.com/silverlight_chart_videos.php)和[DevExpress](http://www.devexpress.com/Products/NET/Controls/WPF/Charting/appearance.xml)，但它们使用 Silverlight 等技术来制作动画。如果您愿意购买它们，它们相对容易使用。

如果您查看来自 DevExpress 的[此](http://www.devexpress.com/Subscriptions/DXperience/WhatsNew2010v2/i/dxcharts-2d-bar-point-animation.swf)视频，它似乎完全按照您的要求进行。他们在[这里](http://help.devexpress.com/#Silverlight/CustomDocument5108)有很好的控制文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:37:48.233

我最近看到了这个，但它是客户端（javascript）[http://nickqizhu.github.com/dc.js/](http://nickqizhu.github.com/dc.js/)

# jquery-mobile - 可以将 jQuery Mobile 插入到 appMobi XDK 应用程序中吗？

> ID：11470366
> 
> 赞同：0
> 
> 时间：2012-07-13T12:18:58.053
> 
> 标签：jquery-mobile, appmobi

我是 appMobi 的新手，想知道是否可以将 jQuery Mobile 插入我的应用程序。我试图从文档站点[http://jquerymobile.com/test/docs/about/getting-started.html](http://jquerymobile.com/test/docs/about/getting-started.html)插入代码， 但它不起作用。我也尝试使用 appmobbi 的 aux_web ，但它给了我错误。

这些是错误：

```
Uncaught TypeError: Cannot read property 'availableTransitions' of undefined jq.ui.min.js:133
Uncaught TypeError: Cannot read property 'availableTransitions' of undefined all.js:58
Uncaught TypeError: Cannot set property 'autoLaunch' of undefined index.html:61
Resource interpreted as Font but transferred with MIME type font/truetype: 
```

* * *

我只使用 jqMobi 制作了一个应用程序，并在 Android 手机上对其进行了测试，但它有很多错误。所以我从 appmobi.com 下载了 phonegap XDK。但我也有一个问题，因为我不能同时使用phonegap的相机和jquery mobile。但如果我只使用相机或jquery mobile，它工作正常。你知道我必须做什么或在哪里我必须看看，因为我在 appmobi 中看到了所有文档，但我找不到 phonegap XDK appmobi 的任何信息。想

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:42:49.350

您可以将您的 jquery 移动应用程序插入到 appMobi 中，但是，您会注意到 Android 上的转换缓慢之类的事情。不再支持 AUX。我们发布了 jqMobi，它在 UI 方面做得更好。您可以从[https://github.com/appMobi/jQ.Mobi下载它](https://github.com/appMobi/jQ.Mobi)

# jquery - 切换盲+幻灯片效果在 Jquery 中不起作用

> ID：11470371
> 
> 赞同：3
> 
> 时间：2012-07-13T12:19:17.283
> 
> 标签：jquery, jquery-ui, toggle, slide

我使用 jquery ui 创建了这种组合效果。

[http://jsfiddle.net/wnmUj/2/](http://jsfiddle.net/wnmUj/2/)

问题是它不会像我们第一次单击时那样切换，我想要在我们第二次单击按钮时反转该效果，依此类推，但在第二次单击时它没有达到标记...

隐藏效果应该是这样的：-

```
$(".menuViewArea").hide( "blind", {direction: "vertical"}, 1000 ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T12:26:02.673

这是你要找的东西：http: [//jsfiddle.net/wnmUj/10/](http://jsfiddle.net/wnmUj/10/)？

我为显示和隐藏编写了不同的代码：

显示 - 你的代码

隐藏：

```
$(".menuViewArea").hide( "blind", {direction: "vertical"}, 1000,function() {
     $(".showmenu").toggle( "slide", {direction: "left"}, 1000);                
}); 
```

# mod-rewrite - Mod_Rewrite 通配符的 / 附加

> ID：11470373
> 
> 赞同：0
> 
> 时间：2012-07-13T12:19:25.913
> 
> 标签：mod-rewrite

我正在尝试在我的网站上使用一个类别制定一个全局规则，其中一些内容会自动添加到 url 的末尾。

一个例子：

www.websitename.com/category/page.html 更改为 www.websitename.com/category/page.html?somethingelse 并且随后任何 www.websitename.com/category/* 都附加有 ?somethingelse

我知道我可以通过单独的 301 重定向来做到这一点，但是是否有一条适合所有人的规则？由于当前每次创建新页面时，都必须进行新的重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:25:08.567

如果我对您的理解正确，这应该可以解决问题：

```
RewriteRule ^category/(.*.html)$ category/$1?somethingelse 
```

这意味着每个以 category 开头并以 html 结尾的 URL 都将被重写以在末尾添加 ?somethingelse。例子：

```
http://www.websitename.com/category/foo.html => http://www.websitename.com/category/foo.html?somethingelse
http://www.websitename.com/category/bar.html => http://www.websitename.com/category/bar.html?somethingelse 
```

# python - Python、OpenGL 和 GTK。

> ID：11470382
> 
> 赞同：1
> 
> 时间：2012-07-13T12:20:14.017
> 
> 标签：python, opengl, gtk, pygtk, pyopengl

我想要一个带有两个 OpenGL 区域的 GTK GUI，这些区域将绘制不同的场景。有谁知道这样做的代码示例？

[这篇博客文章](http://modarnis.com/Articles/gtk_gl_python.html)提供了一个完整的工作示例，但是当我尝试添加第二个 OpenGL 绘图区域时，似乎 OpenGL 将两个场景都绘制到了同一个小部件上。这当然是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:46:44.833

您可以使用其中的任意数量：

```
 widget = self.gtkBuilder.get_object('OpenGLDrawAreaOpenGLFuBar')
    self.OpenGLGizmo['fubar'] = OPenGLFuBar()
    glarea = gtk.gtkgl.DrawingArea( glconfig=self.glconfig,
                                    share_list=None,
                                    render_type=gtk.gdkgl.RGBA_TYPE)
    self.OpenGLWidget['fubar'] = glarea
    glarea.set_size_request(333, 333)
    red = (1.0, 0.0, 0.0, 0.0)
    glarea.connect_after('realize', self.OpenGLGizmo['fubar'].realize_main)
    glarea.connect('configure_event', self.OpenGLGizmo['fubar'].configure_event)
    glarea.connect('expose_event', self.OpenGLGizmo['fubar'].expose_event)
    glarea.set_flags(gtk.HAS_FOCUS | gtk.CAN_FOCUS)
    glarea.add_events(gtk.gdk.KEY_PRESS_MASK)
    glarea.connect('key_press_event', self.OpenGLGizmo['fubar'].key_callback)
    widget.add(glarea)
    glarea.show()
    glarea.realize()
    glarea.grab_focus() 
```

# javascript - 使用 JavaScript 时如何保护 API 密钥？

> ID：11470389
> 
> 赞同：33
> 
> 时间：2012-07-13T12:20:54.793
> 
> 标签：javascript, api, api-key

所以，我正在开发一个仅供我自己使用的小型应用程序，也许是一个 Git 上的开源项目。我正在使用来自 Envato Marketplaces 的 API，众所周知，有些操作不需要任何密钥，但同时有些操作确实需要。

我首先用 PHP 为 Envato API 制作了一个不错的 API 包装器，但后来我决定用 JavaScript 做一些实验，所以我正在用 JavaScript 开发相同的包装器。到目前为止，我对公共操作没有任何问题，但我现在必须使用 API Key。

我的问题是是否有办法保护 JavaScript 中的 API 密钥。我不能只是把它以纯文本的形式放在那里，因为它可以被其他看到代码的人使用。那么会有一个 API 保密的实现吗？也许从带有 XHR 的 JSON 文本文件中获取它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-13T12:31:16.947

简短的回答：没有

无论您做什么来混淆密钥，您仍然必须以某种方式发送它以使其在客户端上可用，因此可以使用 fx 提取它。萤火虫。

即使您设计了一种很棒的神奇方法来保密密钥，在某些时候您也必须发出实际的 API 请求，并且由于它必须从浏览器发送，攻击者将能够读出密钥来自 Firebugs 网络选项卡的纯文本。

正确的做法是围绕需要密钥的 API 调用创建一个 PHP 包装器，然后从 Javascript 调用该包装器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-23T17:34:22.603

我现在的解决方案是在 rust 中编写一个小包装器，然后将其放入 /cgi-bin 并调用它。这应该使 api-key、api creds 和 session 数据与客户端分开。

# asp.net-mvc-3 - 绑定到 CheckboxFor 的集合

> ID：11470391
> 
> 赞同：1
> 
> 时间：2012-07-13T12:21:00.993
> 
> 标签：asp.net-mvc-3, checkboxfor

我正在尝试实现一个权限屏幕，其中用户可以在特定屏幕上获得特定权限。为此，我正在生成一个 Checkboxfor 集合，绑定到一个 bool 属性集合。但是当我提交表单时，我要么得到所有 bool 属性 true 要么全部 false，这取决于我在 viewmodel 构造函数中将这些属性初始化为 true 还是 false。

这是 ViewModel 的代码：

方法一：

```
public class MyViewModel
{
    public MyModel Model { get; set; }        

    public IEnumerable<ScreenType> Screens { get; set; }
    public IEnumerable<SecurityType> SecurityTypes { get; set; }
    public List<PermissionType> Permissions { get; set; }        

    public MyViewModel()
    {
        LoadScreens();
        LoadSecurityTypes();
        LoadPermissions();
    }

    public void LoadPermissions()
    {
        Permissions = new List<PermissionType>();

        foreach (var screen in Screens)
        {
            foreach (var securityType in SecurityTypes)
            {
                Permissions.Add(
                    new PermissionType
                    {
                        PermissionId= Guid.NewGuid(),
                        ScreenId= screen.Id,
                        SecurityId = securityType.Id,
                        IsAllowed = false
                    });
            }
        }
    }    
} 
```

方法二

```
public class MyViewModel
{
    public MyModel Model { get; set; }        

    public IEnumerable<ScreenType> Screens { get; set; }
    public IEnumerable<SecurityType> SecurityTypes { get; set; }
    public List<bool> AllowedList { get; set; }        

    public MyViewModel()
    {
        LoadScreens();
        LoadSecurityTypes();
        LoadPermissions();
    }

    public void LoadPermissions()
    {
        AllowedList = new List<bool>();

        foreach (var form in Forms)
        {
            foreach (var security in Securities)
            {
                AllowedList.Add(false);
            }
        }
    }    
} 
```

这是我的观点的代码：

方法一：

```
 @using (Ajax.BeginForm("Create", "Role", null, new AjaxOptions { UpdateTargetId = "addStatus", InsertionMode = InsertionMode.Replace, OnSuccess = "onFormPostSuccess" }, new { @id = "AddForm" }))
    {  
        <div>
            <span><label>Screen</label></span>
            @foreach (var security in Model.SecurityTypes)
            { 
                <span><label>@security.Name</label></span>                    
            }
            <br />
            @foreach (var screen in Model.Screens)
            {
                <span>@screen.Name</span>
                foreach (var security in Model.SecurityTypes)
                { 
                    <span>@Html.CheckBoxFor(m => m.Permissions.Where(s => s.SecurityId == security.Id && s.ScreenId == screen.Id).Single().IsAllowed, new { @id = HtmlHelper.GenerateIdFromName("Create" + screen.Name + security.Name) })</span>                   
                }
                <br />
            }
        </div>
        <div>
            <span>
                <input type="image" src="/content/images/submit_button.png" value="submit" />
            </span> 
        </div>
        <div>
            <span id="addStatus" class="submitStatus"></span>
        </div>
    } 
```

方法二：

```
 @using (Ajax.BeginForm("Create", "Role", null, new AjaxOptions { UpdateTargetId = "addStatus", InsertionMode = InsertionMode.Replace, OnSuccess = "onFormPostSuccess" }, new { @id = "AddForm" }))
    {  
        <div>
            <span><label>Screen</label></span>
            @foreach (var security in Model.SecurityTypes)
            { 
                <span><label>@security.Name</label></span>                    
            }
            <br />
            @foreach (int i=0; i < Model.Screens.Count(); i++)
            {
                <span>@Model.Screens.ElementAt(i).Name</span>
                foreach (int j=0; j<Model.SecurityTypes.Count(); j++)
                { 
                    @* The index 5*i+j is because I have 5 security types *@ 
                    <span>@Html.CheckBoxFor(Model.AllowedList[5*i+j], new { @id = HtmlHelper.GenerateIdFromName("Create" + @Model.Screens.ElementAt(i).Name + @Model.SecurityTypes.ElementAt(j).Name) })</span>                   
                }
                <br />
            }
        </div>
        <div>
            <span>
                <input type="image" src="/content/images/submit_button.png" value="submit" />
            </span> 
        </div>
        <div>
            <span id="addStatus" class="submitStatus"></span>
        </div>
    } 
```

以下是 Controller 中 Create actionmethod 的代码：

```
 [Authorize]
    [HttpPost]
    public JsonResult Create(MyViewModel viewModel)
    {   
        if ( ModelState.IsValid)
        {                

            if (service.AddRole(viewModel))
            {                    
                return Json("Role Added !");
            }
            return Json("Role exists !");
        }
        return Json("Please correct errors");
    } 
```

当我在 Create actionmethod 中检查 viewModel 时，所有 IsAllowed 属性都是错误的。正如在视图模型构造函数中初始化的那样。从视图中选中/取消选中复选框没有任何效果。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T12:26:52.190

像 CheckBoxFor 这样的强类型 HTML 助手只能使用简单的表达式作为第一个参数（最多访问属性和数组索引）。下面的表达式完全超出了这个助手的能力：

```
m => m.Permissions.Where(s => s.SecurityId == security.Id && s.ScreenId == screen.Id).Single().IsAllowed 
```

我建议您在域模型和视图模型之间进行映射时使用真实的视图模型并在控制器级别执行此操作。

* * *

更新：

显然我对视图模型的回答不够清楚，所以让我试着举例说明我所说的*视图模型*的意思。

因此，我们首先定义实现该视图所需逻辑所需的视图模型：

```
public class CreateViewModel
{
    public IEnumerable<ScreenViewModel> Screens { get; set; }
}

public class ShowCreateViewModel: CreateViewModel
{
    public IEnumerable<SecurityTypeViewModel> SecurityTypes { get; set; }
}

public class ScreenViewModel
{
    public string ScreenName { get; set; }
    [HiddenInput(DisplayValue = false)]
    public int ScreenId { get; set; }
    public IEnumerable<SecurityTypeViewModel> SecurityTypes { get; set; }
}

public class SecurityTypeViewModel
{
    public string SecurityName { get; set; }
    [HiddenInput(DisplayValue = false)]
    public int SecurityTypeId { get; set; }
    public bool IsAllowed { get; set; }
} 
```

然后我们可以有一个控制器动作来负责从存储库或其他东西中获取域模型并映射到视图模型：

```
public class HomeController : Controller
{
    public ActionResult Create()
    {
        // The information will obviously come from a domain model that 
        // we map to a view model, but for the simplicity of the answer
        // I am hardcoding the values here
        var securityTypes = new[]
        {
            new SecurityTypeViewModel { SecurityTypeId = 1, SecurityName = "security 1" },
            new SecurityTypeViewModel { SecurityTypeId = 2, SecurityName = "security 2" },
            new SecurityTypeViewModel { SecurityTypeId = 3, SecurityName = "security 3" },
        };

        // The information will obviously come from a domain model that 
        // we map to a view model, but for the simplicity of the answer
        // I am hardcoding the values here
        return View(new ShowCreateViewModel
        {
            SecurityTypes = securityTypes,
            Screens = new[]
            {
                new ScreenViewModel 
                {
                    ScreenId = 1,
                    ScreenName = "Screen 1",
                    SecurityTypes = securityTypes
                },
                new ScreenViewModel 
                {
                    ScreenId = 2,
                    ScreenName = "Screen 2",
                    SecurityTypes = securityTypes
                },
            }
        });
    }

    [HttpPost]
    public ActionResult Create(CreateViewModel model)
    {
        // The view model passed here will contain all the necessary information
        // for us to be able to perform the actual Save: 
        // a list of the screen ids along with a list of the selected permission ids

        return Content(
            "Thank you for selecting the following allowed permissions:<br/>" + 
            string.Join("<br/>", model.Screens.Select(s => string.Format(
                "screen id: {0}, permission ids: {1}", 
                s.ScreenId, 
                string.Join(",", s.SecurityTypes.Where(st => st.IsAllowed).Select(st => st.SecurityTypeId))
            )))
        );
    }
} 
```

现在剩下的就是定义视图和相应的编辑器/显示模板。

让我们从主视图（`~/Views/Home/Create.cshtml`）开始：

```
@model ShowCreateViewModel

<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>

@using (Ajax.BeginForm("Create", "Home", null, new AjaxOptions { UpdateTargetId = "addStatus", InsertionMode = InsertionMode.Replace, OnSuccess = "onFormPostSuccess" }, new { @id = "AddForm" }))
{  
    <table>
        <thead>
            <tr>
                <th>Screen/Security type</th>
                @Html.DisplayFor(x => x.SecurityTypes)
            </tr>
        </thead>
        <tbody>
            @Html.EditorFor(x => x.Screens)
        </tbody>
    </table>    

    <div>
        <input type="submit" value="submit" />
    </div>

    <div id="addStatus" class="submitStatus"></div>
} 
```

接下来我们有一个模型的编辑器模板`ScreenViewModel`（`~/Views/Shared/EditorTemplates/ScreenViewModel.cshtml`）：

```
@model ScreenViewModel
<tr>
    <td>
        @Html.DisplayFor(x => x.ScreenName)
        @Html.EditorFor(x => x.ScreenId)
    </td>
    @Html.EditorFor(x => x.SecurityTypes)
</tr> 
```

然后是`SecurityTypeViewModel`模型的编辑器模板 ( `~/Views/Shared/EditorTemplates/SecurityTypeViewModel.cshtml`)：

```
@model SecurityTypeViewModel
<td>
    @Html.CheckBoxFor(x => x.IsAllowed)
    @Html.EditorFor(x => x.SecurityTypeId)
</td> 
```

最后是模型的显示模板`SecurityTypeViewModel`( `~/Views/Shared/DisplayTemplates/SecurityTypeViewModel.cshtml`)：

```
@model SecurityTypeViewModel
<th>
    @Html.DisplayFor(x => x.SecurityName)
</th> 
```

差不多就是这样：

![在此处输入图像描述](../Images/fbbbddad2ff14d59c7316a65e3001511.png)

我已经为你留下了你的实际领域模型和这里定义的视图模型之间的映射。

# ios - ios相机失焦

> ID：11470392
> 
> 赞同：1
> 
> 时间：2012-07-13T12:21:06.207
> 
> 标签：ios, camera, avfoundation

我使用 AVFoundation 进行连续拍摄。其中一些不在焦点范围内，即使我使用 mode `AVCaptureFocusModeContinuousAutoFocus`。

似乎`captureStillImageAsynchronouslyFromConnection`在相机仍在对焦时进行拍摄。就在投篮之前，我检查是否`AVCaptureDevice.adjustingFocus`是真的，但它总是假的。

我怎样才能找到合适的拍摄时间？或者我怎么知道什么时候调整了相机的焦距？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T13:58:17.157

我有一个关于这个和其他类似属性没有改变的长错误报告。苹果关于这个主题的文档大多是错误的。

一些提示。确保您已定义用于聚焦的区域（我的代码现在不方便，因此无法提供方法名称）。其次，在该属性上使用 KVM，但不要直接查看值，而是设置 kvonto 返回旧值和新值，以便您可以比较和检查值（这直接来自苹果在我的错误报告中。

在我的情况下，我只关注一次然后进行一系列操作，但想象一下 kvo 应该让你知道每次达到焦点时。

总而言之，Apple 的编码和记录工作做得很差——它真的无法与其他框架（恕我直言）相提并论。

# android - 在 ActionBar 选项卡中用 ViewPager 替换片段

> ID：11470394
> 
> 赞同：5
> 
> 时间：2012-07-13T12:21:11.290
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager

我有带有查看寻呼机功能的 ActionBar 选项卡。我的问题在这些选项卡中，我无法替换片段。我使用下面的代码替换片段但它没有替换，主要片段仍然存在。此外，在其他选项卡中也存在第二个片段。我的 TabListener 也在下面替换了片段。

```
private void addFragment(Fragment fragment, boolean addToBackStack, int transition)
{
    FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
    fragmentTransaction.replace(R.id.details_container, fragment);
    fragmentTransaction.setTransition(transition);
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.commit();
} 
```

* * *

```
public static class TabsAdapter extends FragmentPagerAdapter
        implements ViewPager.OnPageChangeListener, ActionBar.TabListener {
    private final Context mContext;
    private final ActionBar mBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(FragmentActivity activity, ActionBar bar, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mBar = bar;
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<? extends Fragment> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i=0; i<mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {

    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:25:40.600

我建议您查看[ViewPager](https://stackoverflow.com/q/7723964/685292)主题中的整个 Replace Fragment 并查看[https://stackoverflow.com/a/11974777/685292](https://stackoverflow.com/a/11974777/685292)中的示例。

# jquery - 需要在数组项之间添加逗号

> ID：11470395
> 
> 赞同：0
> 
> 时间：2012-07-13T12:21:13.080
> 
> 标签：jquery, arrays

我有一组使用 jQuery 将单词打乱成段落的单词。我正在尝试在它们之间添加一些逗号“，”。理想情况下，我需要在每 4 个单词中添加一个逗号，但这超出了我适度的 jQuery 技能。

这是我的代码：

```
 $("#generatebutt").click(function() {

    var dumpStr = "";

    var numberOfWords = $('#length').val();
    var numberpara = $('#numberpara').val();

    for (var i = 0; i < numberpara; i++) {
        Shuffle(melbArray);

        for (var j = 0; j < numberOfWords; j++) {
            var theWord = melbArray[j];
            dumpStr += theWord + " ";
        }

        dumpStr = dumpStr.trim();
        dumpStr += ".<br/><br/>";
    }

    $("#dump").html(dumpStr);

}); 
```

真心希望能帮到你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:25:21.727

如果您希望每*n*次迭代完成一次，那么您应该使用*模* `%`运算符。

运算符为您提供任何除法的`%`余数，例如`5 % 2`will be `1`。这很有用，因为您知道如果您希望每 n 次迭代发生一些事情并且您的迭代器是*i*，那么每*n*`i % n`次迭代将是 0 。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:25:01.477

```
$("#generatebutt").click(function() {

var dumpStr = "";

var numberOfWords = $('#length').val();
var numberpara = $('#numberpara').val();

for (var i = 0; i < numberpara; i++) {
    Shuffle(melbArray);

    for (var j = 0; j < numberOfWords; j++) {
        var theWord = melbArray[j];
        if(j % 4 == 0){
            dumpStr += theWord + ",";
        }
        else {
            dumpStr += theWord + " ";
        }
    }

    dumpStr = dumpStr.trim();
    dumpStr += ".<br/><br/>";
}

$("#dump").html(dumpStr);

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:25:32.317

`dumpStr += theWord + (j%4==0)? ", ": " ";`*

# spring-aop - 使用 Spring AOP 拦截 set 方法以检查值

> ID：11470404
> 
> 赞同：1
> 
> 时间：2012-07-13T12:21:30.260
> 
> 标签：spring-aop

对不起我的英语不好。

我正在开发一个将 XML 数据发送到另一个系统的系统。

为了创建 XML，我使用 XStream，所以我创建了将被序列化为 XML 的类。但我需要检查类中属性的大小。我想在类的 set() 方法中做到这一点。但是在每个类上，在每个 set() 方法中编写类似的代码并不好。所以我想我可以使用 Spring AOP 来做到这一点。

我是 AOP 的新手，我只知道我可以使用它来做到这一点，但我不知道该怎么做。

有人可以帮助我吗？

非常感谢。

# asp.net-mvc-3 - mvc 3 asp.NET 从控制器访问资源

> ID：11470409
> 
> 赞同：0
> 
> 时间：2012-07-13T12:21:51.110
> 
> 标签：asp.net-mvc-3

我正在使用 ASP.NET MVC3。我在 App_GlobalResources 的资源文件 Order.resx 中声明了资源字符串，我需要在我的控制器操作中访问这些字符串。资源命名空间在视图中未被识别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:00:13.397

确保资源文件属性中的自定义工具命名空间值设置为：

```
PublicResXFileCodeGenerator 
```

并进行完整的解决方案重建。然后尝试查看是否可以在视图中看到资源命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:40:18.560

我刚刚发现我的控制器项目与资源所在的项目不同。

# jquery - 在Jsp页面中使用jquery进行分页

> ID：11470412
> 
> 赞同：0
> 
> 时间：2012-07-13T12:22:09.573
> 
> 标签：jquery, jsp, struts-1

我想在 jsp 页面中使用 jquery 进行分页。

我希望页面导航和数据应该是动态的。以及当我要点击页码时，数据应该加载..它不能被预加载。

整个页面也不能重新加载..它应该是基于 ajax 的。

我正在使用struts 1.2。

您也可以建议使用 struts 显示标签的 ajax 实现。

请建议。

类似[英格丽德](http://reconstrukt.com/ingrid/src/example3.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:23:57.847

这是一个 jquery 分页插件列表。选择最适合您的。

[http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/#.UAPPVEjfszI](http://www.jquery4u.com/plugins/10-jquery-pagination-plugins/#.UAPPVEjfszI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:18:20.960

然后在您的项目中使用 DisplayTag

DisplayTag 是第三方插件，只需下载并将其添加到 Project。更多信息和教程[点击这里](http://www.dzone.com/tutorials/java/struts/struts-example/struts-display-tag-table-decorator-example-1.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:34:57.063

这个页面[http://www.tripwiremagazine.com/2012/10/jquery-pagination-plugins.html](http://www.tripwiremagazine.com/2012/10/jquery-pagination-plugins.html)有20个jquery插件，推荐你去寻找最合适的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T13:12:48.110

尝试 jPaginate

这是一个 jQuery 分页插件，带有一个转折：动画页码。用户可以通过单击或仅将鼠标悬停在箭头上滑过可用的页码。还提供指向第一页和最后一页的短链接。

[http://ankitchauhan22.blogspot.in/2010/01/pagination-using-jquery.html](http://ankitchauhan22.blogspot.in/2010/01/pagination-using-jquery.html)

# silverlight - 在 Silverlight 中使用滑块调整图像大小

> ID：11470413
> 
> 赞同：2
> 
> 时间：2012-07-13T12:22:09.920
> 
> 标签：silverlight, resize, slider

也许是一个愚蠢的问题，但我继承了开发图像编辑器的工作，该编辑器允许用户添加图像，然后保存画布上的内容，或者将项目的元素等保存到服务器和数据库以便稍后返回。图像宽度和高度等属性在加载时被发送和回调，因此图像被加载回画布上的位置。

部分功能是重新调整图像大小。我正在使用与图像宽度绑定的滑块来执行此操作。当我使用滑块时，图像会按比例变小，但图像高度的值或图像实际高度不会改变，这会在再次加载项目时导致问题，因为存储在数据库中的高度不正确。

滑块区域的 XAML：

```
<TextBlock Grid.Column="0" Grid.Row="0" Text="Width:" VerticalAlignment="Center" FontWeight="Bold" Margin="3" HorizontalAlignment="Left" />
                                    <TextBox Grid.Column="1" Grid.Row="0" Text="{Binding Path=Width, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="24" Margin="3" />
                                    <TextBlock Grid.Column="2" Grid.Row="0" Text="px" VerticalAlignment="Bottom" Margin="3,0,0,0" />

                                    <TextBlock Grid.Column="0" Grid.Row="1" Text="Height:" VerticalAlignment="Center" FontWeight="Bold" Margin="3" HorizontalAlignment="Left" />
                                    <TextBox x:Name="txtImageHeight" Grid.Column="1" Grid.Row="1" Text="{Binding Path=Height, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="24" Margin="3" />
                                    <TextBlock Grid.Column="2" Grid.Row="1" Text="px" VerticalAlignment="Bottom" Margin="3,0,0,0" />

                                    <TextBlock Grid.Column="0" Grid.Row="2" Text="Size:" FontWeight="Bold" Margin="3" HorizontalAlignment="Left" VerticalAlignment="Center" />
                                    <Slider Grid.Column="1" Grid.Row="2" Minimum="0" SmallChange=".01" LargeChange=".10" Maximum="{Binding Path=MaxWidth}"
                                        Value="{Binding Path=Width, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="3" Grid.ColumnSpan="2" ValueChanged="Slider_ValueChanged" /> 
```

高度文本框中的值显然也不会像我想要的那样改变。

和代码：

```
private void AddImageElement(object param)
    {
        bool? gotImage;
        string fileName;
        BitmapImage imageSource = GetImageFromLocalMachine(out gotImage, out fileName);

        if (gotImage == true)
        {
            Image image = new Image();
            image.Name = fileName;
            image.Source = imageSource;
            image.Height = imageSource.PixelHeight;
            image.Width = imageSource.PixelWidth;
            image.MaxHeight = imageSource.PixelHeight;
            image.MaxWidth = imageSource.PixelWidth;
            image.Cursor = Cursors.Hand;
            image.Tag = null;

            AddDraggingBehavior(image);
            image.MouseLeftButtonUp += element_MouseLeftButtonUp;

            this.Elements.Add(image);
            numberOfElements++;

            this.SelectedElement = image;
            this.SelectedImageElement = image;
        }
    } 
```

如何获取高度值以反映图像呈现的高度？

我对 Silverlight 和 .NET 完全陌生，所以也许我遗漏了一些明显的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:52:09.183

是的，Silverlight 在调整绑定大小方面存在一些已知不足。不久前，我构建了一个带有缩放功能的查看器，我想将其绑定到滑块，我发现需要一些小帮助工具。我使用`LayoutTransformer`Silverlight [Toolkit](http://silverlight.codeplex.com/)和[`AnimationMediator`Toolkit 开发人员之一的](http://blogs.msdn.com/b/delay/archive/2009/04/10/a-bit-more-er-than-meets-the-eye-easily-animate-and-update-layouttransformer-with-animationmediator.aspx)。

使用 ，`LayoutTransformer`您可以将其内容设置为任何内容，而不仅仅是图像，并对其应用任何转换，并且与通常的不同`RenderTransform`，它将影响布局和实际大小。我的元素不在其中`Canvas`，所以我不知道它在您的场景中会如何表现以及您是否可以使用它，但也许这个示例仍然可以对您有所帮助。

```
<Grid>
    <fs:AnimationMediator x:Name="ScaleXMediator" LayoutTransformer="{Binding ElementName=LayoutTransformer}" AnimationValue="{Binding ScaleX, ElementName=ScaleTransform, Mode=TwoWay}" />
    <fs:AnimationMediator x:Name="ScaleYMediator" LayoutTransformer="{Binding ElementName=LayoutTransformer}" AnimationValue="{Binding ScaleY, ElementName=ScaleTransform, Mode=TwoWay}" />

    <tkt:LayoutTransformer x:Name="LayoutTransformer" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <tkt:LayoutTransformer.LayoutTransform>
            <ScaleTransform x:Name="ScaleTransform" />
        </tkt:LayoutTransformer.LayoutTransform>

        <Image x:Name="MyImage" Source="mysource.png" Width="600" Height="800" />
    </tkt:LayoutTransformer>
</Grid> 
```

因为我不会在这里讨论 MultiBinding，所以您还必须手动处理`Slider`' 值更改事件，然后适当地设置`AnimationValue`s`ScaleXMediator`和`ScaleYMediator`。

希望能帮助到你！

# html - 是否有任何支持 MarkDown 或其 HTML 子集的报告引擎？

> ID：11470414
> 
> 赞同：1
> 
> 时间：2012-07-13T12:22:16.797
> 
> 标签：html, reporting, markdown

我正在寻找支持 MarkDown 或正确显示 MarkDown 格式文本所需的 HTML 子集的报告引擎，有吗？

我已经尝试过 Crystal Reports，但在我的测试中了解到`<ul>`并且`<ol>`不受支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:41:47.507

[myDBR](http://mydbr.com)报告工具允许您在报告输出中包含任意 HTML。有关详细信息，请参阅[http://mydbr.com/doc/?cmd.html.html](http://mydbr.com/doc/?cmd.html.html)。

# asp.net - 使用 Ninject 将 MVC 4 应用程序部署到 Azure 时出错

> ID：11470415
> 
> 赞同：1
> 
> 时间：2012-07-13T12:22:20.510
> 
> 标签：asp.net, asp.net-mvc, azure, ninject

我使用 Visual Studio 2012 RC 编写了一个 MVC 4 应用程序。它使用 Ninject 作为依赖注入器，并且在我的本地机器上使用 Azure Emulator 可以正常工作。该应用程序面向 .NET 4.0。但是，当我将它作为 Web 角色部署到 Azure 时，我得到了这个异常：

```
[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +117
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +247
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +106
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +84

[InvalidOperationException: An error occurred when trying to create a controller of type 'Poller.WebUI.Controllers.QuestionsController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +247
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +85
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +270
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +66
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +19
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +161
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +405
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375 
```

我不想将无参数构造函数添加到 QuestionsController，因为我需要那里的数据库存储库，它作为构造函数参数传递。此参数应由 Ninject 正确填写。

有人知道这里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:52:28.040

我也遇到了这个问题。我想说，在我们的案例中，我们必须确保我们的 MVC 应用程序使用的是 Windows 2008 R2，而不是 Windows 2008 SP1。您可以更新您的配置文件`OS="2"`或只登录到管理面板，选择您的网络角色，然后单击升级操作系统。不能确定这是否是您的问题，但它适用于 MVC 3 站点上的我们。

# php - 嵌套可变数量的键以创建多维数组而不使用 eval()

> ID：11470421
> 
> 赞同：1
> 
> 时间：2012-07-13T12:22:50.323
> 
> 标签：php, multidimensional-array, eval

我创建了一个函数，它根据另外两个数组的值和键返回一个嵌套数组，并将第三个值分配给最深的键（希望它对代码有意义）：

```
function myfunc_build_array($mydata,$keys,$value)
{
    $newarr=array();

    foreach ($mydata as $data)
    {
        $evalvar='$newarr';     
        foreach ($keys as $key)
        {           
            $evalvar.="['".$data[$key]."']";
        }
        $evalvar.='=$value;';
        eval($evalvar); 
    }
    return $newarr;
} 
```

所以，即如果我们有：

```
$mydata=array(
      0=>array('section'=>'NS1','subsection'=>'NS1A','employee'=>'2812','name'=>'Bob'),
      1=>array('section'=>'NS1','subsection'=>'NS1A','employee'=>'2811','name'=>'Bib'),
      2=>array('section'=>'NS1','subsection'=>'NS1B','employee'=>'2718','name'=>'Bub'),
    );

$keys= array('section','subsection','employee'); 
```

myfunc_build_array($mydata,$keys,"active"); 的结果 是：

```
array(1) {
  ["NS1"]=>
  array(2) {
    ["NS1A"]=>
    array(2) {
      [2812]=>
      string(6) "active"
      [2811]=>
      string(6) "active"
    }
    ["NS1B"]=>
    array(1) {
      [2718]=>
      string(6) "active"
    }
  }
} 
```

它工作正常，但由于我通常避免使用 eval()，我想知道是否有更好的方法，更优雅或更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:51:22.563

有一种方法可以在不`eval()`使用引用的情况下做到这一点。不知道它是否更快，但它可能更安全：

```
function myfunc_build_array($keySets,$keyIndices,$value)
{
    $slot = null;
    $newarr=array();
    foreach ($keySets as $keys)
    {
        $slot = &$newarr;
        foreach ($keyIndices as $keyIndex)
        {           
            $slot = &$slot[$keys[$keyIndex]];
        }
        $slot = $value;
    }
    return $newarr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:44:30.407

这对我有用，虽然我不一定称之为优雅：

```
function myfunc_build_array($mydata,$keys,$value)
{
    $newarr = array();

    end( $keys);
    $last_key = key( $keys);

    foreach ($mydata as $data)
    {  
        $temp =& $newarr; 
        foreach ($keys as $i => $key)
        {           
            $temp[$data[$key]] = isset( $temp[$data[$key]]) ? $temp[$data[$key]] : ($last_key === $i ? $value : array());
            $temp =& $temp[$data[$key]];
        }
    }

    return $newarr;
} 
```

你可以看到它产生[了这个输出](http://viper-7.com/E8OdY0)：

```
array(1) {
  ["NS1"]=>
  array(2) {
    ["NS1A"]=>
    array(2) {
      [2812]=>
      string(6) "active"
      [2811]=>
      string(6) "active"
    }
    ["NS1B"]=>
    array(1) {
      [2718]=>
      string(6) "active"
    }
  }
} 
```

# c++ - 达到字符串中的第三个单词

> ID：11470423
> 
> 赞同：-5
> 
> 时间：2012-07-13T12:23:05.923
> 
> 标签：c++, string, word

> **可能重复：**
> [到达字符串中的特定单词](https://stackoverflow.com/questions/11469591/reaching-a-specific-word-in-a-string)

我问了一个非常相似的问题，但显然我问错了。问题是我需要在 C++ 中达到字符串中的第三个单词，字符串是这样的：

> ```
> word1\tword2\tword3\tword4\tword5\tword6 
> ```

word2 里面可以有空格。

我试图逐个字符地读取字符串，但我发现它效率低下。我试过代码

```
std::istringstream str(array[i]); 
str >> temp >> temp >> word; 
array2[i] = word; 
```

由于word2中的空格，它不起作用。

你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:39:22.610

最直接的方法：

```
#include <iostream>
int main()
{
    //input string:
    std::string str = "w o r d 1\tw o r d2\tword3\tword4";
    int wordStartPosition = 0;//The start of each word in the string

    for( int i = 0; i < 2; i++ )//looking for the third one (start counting from 0)
        wordStartPosition = str.find_first_of( '\t', wordStartPosition + 1 );

    //Getting where our word ends:
    int wordEndPosition = str.find_first_of( '\t', wordStartPosition + 1 );
    //Getting the desired word and printing:
    std::string result =  str.substr( wordStartPosition + 1, str.length() - wordEndPosition - 1 );
    std::cout << result;
} 
```

输出：

```
word3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:39:36.207

试试下面的例子。您的第三个单词是 std::vector 中的第三个项目...

创建一个拆分字符串函数，它将一个大字符串拆分为一个 std::vector 对象。使用该 std::vector 来获取您的第三个字符串。

看下面的例子，尝试在一个空的 C++ 控制台项目中运行。

```
#include <stdio.h>
#include <vector>
#include <string>

void splitString(std::string str, char token, std::vector<std::string> &words)
{
    std::string word = "";
    for(int i=0; i<str.length(); i++)
    {
        if (str[i] == token)
        {
            if( word.length() == 0 )
                continue;

            words.push_back(word);
            word = "";
            continue;
        }

        word.push_back( str[i] );
    }
}

int main(int argc, char **argv)
{
    std::string stream = "word1\tword2\tword3\tword4\tword5\tword6";

    std::vector<std::string> theWords;
    splitString( stream, '\t', theWords);

    for(int i=0; i<theWords.size(); i++)
    {
        printf("%s\n", theWords[i].c_str() );
    }

    while(true){}
    return 0;
} 
```

# android - 表格布局分离

> ID：11470424
> 
> 赞同：1
> 
> 时间：2012-07-13T12:23:09.107
> 
> 标签：android, android-layout, tablelayout, android-tablelayout

在我的应用程序中，我显示了一个表格布局，如下图所示：

![输出](../Images/5bd78c0894064aefa8c4e3077eec571b.png)

这是我的输出。在那一行被划分，现在我想要将垂直划分成两半。是否可以在表格布局中使用？请帮帮我。提前致谢。

**XML:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TableLayout
    android:id="@+id/tablelayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingRight="2dip"
    android:stretchColumns="4" >

    <TableRow>

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Income" >
        </TextView>

        <TextView
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Expense" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow
        android:id="@+id/tablerowhouse"
        android:layout_marginTop="30px" >

        <TextView
            android:id="@+id/text40"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/houseinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/text41"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/houseexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Household:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow android:layout_marginTop="30px" >

        <TextView
            android:id="@+id/text42"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Travel:" >
        </TextView>

        <TextView
            android:id="@+id/trlinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Travel" >
        </TextView>

        <TextView
            android:id="@+id/text43"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Travel:" >
        </TextView>

        <TextView
            android:id="@+id/trlexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Travel:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow android:layout_marginTop="30px" >

        <TextView
            android:id="@+id/text44"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Education:" >
        </TextView>

        <TextView
            android:id="@+id/eduinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Education" >
        </TextView>

        <TextView
            android:id="@+id/text45"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Education:" >
        </TextView>

        <TextView
            android:id="@+id/eduexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Education:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow android:layout_marginTop="30px" >

        <TextView
            android:id="@+id/text46"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Group4:" >
        </TextView>

        <TextView
            android:id="@+id/grp4inctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group4" >
        </TextView>

        <TextView
            android:id="@+id/text47"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Group4:" >
        </TextView>

        <TextView
            android:id="@+id/grp4exptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group4:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow android:layout_marginTop="30px" >

        <TextView
            android:id="@+id/text48"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Group5:" >
        </TextView>

        <TextView
            android:id="@+id/grp5inctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group5" >
        </TextView>

        <TextView
            android:id="@+id/text49"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Group5:" >
        </TextView>

        <TextView
            android:id="@+id/grp5exptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group5:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow android:layout_marginTop="40px" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Total:" >
        </TextView>

        <TextView
            android:id="@+id/totincome"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="total" >
        </TextView>

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Total:" >
        </TextView>

        <TextView
            android:id="@+id/totexpense"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="total:" >
        </TextView>
    </TableRow>

    <TableRow android:layout_marginTop="40px" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="100dp"
            android:layout_span="6"
            android:text="Balance:" >
        </TextView>

        <TextView
            android:id="@+id/balance"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="-150dp"
            android:text="balance" >
        </TextView>
    </TableRow>
</TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:36:52.460

请试试这个新布局

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tablelayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="*" >

    <TableRow android:id="@+id/tablerowhouse" >

        <TextView
            android:id="@+id/text40"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Income" >
        </TextView>

        <TextView
            android:id="@+id/houseinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text41"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Expense" >
        </TextView>

        <TextView
            android:id="@+id/houseexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:text="" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow android:id="@+id/tablerowhouse" >

        <TextView
            android:id="@+id/text40"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/houseinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Household:" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text41"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Household:" >
        </TextView>

        <TextView
            android:id="@+id/houseexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Household:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text42"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Travel:" >
        </TextView>

        <TextView
            android:id="@+id/trlinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Travel" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text43"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Travel:" >
        </TextView>

        <TextView
            android:id="@+id/trlexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Travel:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text44"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Education:" >
        </TextView>

        <TextView
            android:id="@+id/eduinctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Education" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text45"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Education:" >
        </TextView>

        <TextView
            android:id="@+id/eduexptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="Education:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text46"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group4:" >
        </TextView>

        <TextView
            android:id="@+id/grp4inctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group4" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text47"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group4:" >
        </TextView>

        <TextView
            android:id="@+id/grp4exptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group4:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

    <TableRow>

        <TextView
            android:id="@+id/text48"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group5:" >
        </TextView>

        <TextView
            android:id="@+id/grp5inctot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group5" >
        </TextView>

        <View
            android:layout_width="1dp"
            android:layout_height="match_parent"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="2dp"
            android:background="#FF909090" />

        <TextView
            android:id="@+id/text49"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:text="Group5:" >
        </TextView>

        <TextView
            android:id="@+id/grp5exptot"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:layout_weight="1"
            android:gravity="right"
            android:text="group5:" >
        </TextView>
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <View
            android:id="@+id/line1"
            android:layout_width="wrap_content"
            android:layout_height="1dip"
            android:layout_weight="1"
            android:background="#FF909090"
            android:padding="2dip" />
    </TableRow>

</TableLayout> 
```

这是我在测试时得到的 ![表格截图](../Images/0677f7a9888b70cf549a1d76827923a2.png)

# javascript - 如何将 jquery 数组/对象传递给需要 MS Ajax 对象的函数

> ID：11470425
> 
> 赞同：0
> 
> 时间：2012-07-13T12:23:10.010
> 
> 标签：javascript, jquery, microsoft-ajax

我有一个大项目，其中仍然存在一些在整个项目中使用的 MS ajax 函数。我可以使用 jquery 重写它们，但现在这需要很长时间。

但是，我们现在对每个新功能都使用 jquery。

看看这个：

```
 $.each($("a[xonclick]"), function (index, value) {
            EnableButton(value);
        });
    function EnableButton(btn) {
        ...
        var xonclick = btn.getAttribute("xonclick");
        ...
    } 
```

当然我得到了javascript错误：

```
getAttribute is not a function 
```

我知道我可以使用`btn.attr("xonclick");`，但这不是我之前提到的选项。

是否有一些 jquery 函数可以为我提供一个用于 jquery 对象的 MS ajax 对象？然后我可以使用该对象并将其传递给 enableButton 函数。

更新：JSFiddle：http: [//jsfiddle.net/wsYCJ/1/](http://jsfiddle.net/wsYCJ/1/)

我希望我解释得很好，你们中的一些人知道解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:20:27.957

正如您在评论中所说，[$get()](http://msdn.microsoft.com/en-us/library/bb397717)是 ASP.NET AJAX 库的一部分，并返回一个增强的 DOM 元素（实际上是[Sys.UI.DomElement](http://msdn.microsoft.com/en-us/library/bb383788.aspx)的一个实例）。

另一方面，jQuery 的[$()](http://api.jquery.com/jQuery/)函数返回一个包装一个或多个 DOM 元素的 jQuery 对象。jQuery 对象不支持`getAttribute()`，DOM 元素支持。

您可以使用[get()](http://api.jquery.com/get/)或索引器语法从 jQuery 对象中获取实际的 DOM 元素。换句话说，你必须写：

```
function buttonClicked() {
     getAttr($("#test")[0]);
} 
```

代替：

```
function buttonClicked() {
     getAttr($("#test"));
} 
```

[你会在这里](http://jsfiddle.net/wsYCJ/2/)找到一个更新的小提琴。

# regex - 正则表达式仅替换由空格字符包围的字符串

> ID：11470426
> 
> 赞同：0
> 
> 时间：2012-07-13T12:23:17.333
> 
> 标签：regex, replace

我正在尝试替换一个由非单词字符包围的字符串。

我的目标字符串是

```
;ab.ab,abb... 
```

我想得到结果

```
;[ab].[ab],abb... 
```

这是我的模式

```
s/([^\w]+)(ab)([^\w]+)/$1[$2]$3/g 
```

但它不会替换第二个匹配项，因为第一个匹配项是 ;ab。第二场比赛是在 ab,abb 的尾巴上完成的......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:26:08.337

只使用[word-boundary](http://www.regular-expressions.info/wordboundaries.html)怎么样？

```
s/\b(ab)\b/[$1]/g 
```

# c# - 如何从操作系统中完全删除/杀死/删除 Windows 服务？

> ID：11470432
> 
> 赞同：1
> 
> 时间：2012-07-13T12:23:28.373
> 
> 标签：c#, .net, windows-services, setup-project

嗨，我准备了一个 Windows 服务，它通过批处理文件（.bat 文件）在服务器上设置。我也可以在运行 Uninstall.bat 后将其完全从系统中删除。Services 上没有 myservice。一切看起来都很好。

单击 Setup.exe 后，出现错误信息：错误 1001 指定的服务已存在：

如何从我的操作系统中完全删除旧的 Windows 服务。或者如何解决这个设置问题。我的uninstall.bat exe 运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:27:30.523

确实是 serverfault.com 的一个问题，但要完全删除它，请删除其在 HKLM\System\CurrentControlSet\Services 下的注册表项。

理想情况下，所有服务操作都应通过调用服务控制管理器 (SCM) 来完成。这可以通过 SC.EXE 手动完成。但是，听起来您的应用已尝试过此操作，因此请删除该密钥并重新启动 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:01:37.017

我根据描述的猜测是服务（或者更确切地说是注册表项）确实存在。如果不手动干预，您将无法解决此问题。似乎发生的事情是您确实删除了该服务，但似乎没有停止它（或者它无法停止）。

当服务从 SCM 数据库中删除时仍在运行时，服务密钥将在**内部**标记为删除，并且密钥中将有一个附加值告诉系统在启动时删除该密钥。这个想法是，如果系统正常关闭，要删除的服务的内部链接列表将用于删除服务密钥，这将在系统重新启动之前完成。但是，如果系统崩溃，则密钥将在启动时和 SCM 开始启动服务之前被删除。

内部链表可能是在这里给您带来麻烦的原因。因为当您通过 SCM API 时，就完成了。解决此问题的一种方法（我过去曾这样做过）是在具有战略意义的时间点重命名注册表中的密钥，并将其设置为在启动时将其删除，而不是使用 SCM API。

* * *

旁注：在 MSI 中，您应该始终使用`ServiceInstall`/`ServiceControl`和`Registry`表而不是使用代码（无论是批处理文件还是您的自定义操作）。这些动作已经存在，只需要排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:50:02.157

您可以使用 MSIZAP。我它将清除有关损坏的 msi 的所有信息：http: [//nerdoftherings.net/wp/ ?p=66](http://nerdoftherings.net/wp/?p=66)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T20:27:45.337

方法一：通过Setup.exe找到msi文件下载到的目录。并执行..

```
msiexec /uninstall [path to msi or product code] 
```

方法二（使用单片机）：

```
sc <server> delete [service name] 
```

试试吧，告诉我们会发生什么。

# javascript - Highcharts：在 xaxis 上设置定期间隔

> ID：11470433
> 
> 赞同：0
> 
> 时间：2012-07-13T12:23:29.247
> 
> 标签：javascript, highcharts

随着时间的推移，我有一系列数据值（由计数确定）。以*n*分钟间隔（计数 x 间隔）提供数据；通常数据将是 96 x 15（96 个 15 分钟间隔以给出 24 小时）。间隔的长度和计数都是动态的。数据系列可以是多种类型的数据；它可以是多种格式，例如 0.000123 或 1.23 或 198763.0000089675。

我希望我的 xaxis 以 1 小时为间隔显示时间（屏幕空间很小，因此可能需要 2 小时的间隔）。我有这个：

```
xAxis: {
    type : 'datetime',
    title: {
        text: 'Time ('+period+')'
        },
    dateTimeLabelFormats: {
        minute: '%H:%M',
        hour: '%H:%M'
        }
} 
```

和这样的系列：

```
[15999.999999999996,14999.999999999996,15999.999999999996,14999.999999999996,13999.999999999996,15999.999999999996,17999.999999999993,17999.999999999993,16999.999999999993,15999.999999999996,16999.999999999993,14999.999999999996,14999.999999999996,13999.999999999996,14999.999999999996,14999.999999999996,14999.999999999996,14999.999999999996,15999.999999999996,19999.999999999993,23999.999999999993,27999.999999999993,24999.999999999993,22999.999999999993,21999.999999999993,23999.999999999993,29999.999999999993,26999.999999999993,29999.999999999993,31999.999999999993,34999.999999999985,31999.999999999993,31999.999999999993,33999.999999999985,34999.999999999985,32999.999999999985,32999.99999999998,32999.99999999997,32999.99999999997,32999.99999999997,32999.999999999985,32999.999999999985,34999.999999999985,32999.999999999985,32999.999999999985,32999.999999999985,35999.999999999985,32999.999999999985,35999.999999999985,32999.999999999985,33999.999999999985,30999.999999999993,28999.999999999993,31999.999999999993,32999.999999999985,33999.999999999985,30999.999999999993,32999.999999999985,32999.999999999985,30999.999999999993,30999.999999999993,31999.999999999993,31999.999999999993,29999.999999999993,29999.999999999993,30999.999999999993,30999.999999999993,26999.999999999993,25999.999999999993,27999.999999999993,29999.999999999993,27999.999999999993,26999.999999999993,25999.999999999993,26999.999999999993,27999.999999999993,25999.999999999993,28999.999999999993,29999.999999999993,26999.999999999993,24999.999999999993,18999.999999999993,17999.999999999993,16999.999999999993,16999.999999999993,15999.999999999996,16999.999999999993,15999.999999999996,14999.999999999996,15999.999999999996,15999.999999999996,14999.999999999996,14999.999999999996,15999.999999999996,15999.999999999996,14999.999999999996] 
```

但 xaxis 上的值是：

```
00:00:00.020    00:00:00.040     00:00:00.020    00:00:00.020 
```

我已经浏览了 highcharts API，但我无法确定它如何处理时间序列。

如何告诉 highcharts 正确显示时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:35:46.300

如果轴是日期时间类型，那么图表将以它认为合适的最佳方式呈现它们。如果您不喜欢它们的呈现方式，您可以使用[dateTimeLabelFormats](http://api.highcharts.com/highcharts/xAxis.dateTimeLabelFormats)来控制图表的日期时间格式，就像您已经在做的那样。

根据当时数据的日期时间跨度，图表将选择以下默认格式之一：

```
second: '%H:%M:%S',
minute: '%H:%M',
hour: '%H:%M',
day: '%e. %b',
week: '%e. %b',
month: '%b \'%y',
year: '%Y' 
```

如果您想将它们全部强制为小时和分钟，无论范围是多少，请按如下方式设置它们：

```
second: '%H:%M',
minute: '%H:%M',
hour: '%H:%M',
day: '%H:%M',
week: '%H:%M',
month: '%H:%M',
year: '%H:%M' 
```

要控制显示日期的间隔，请使用[tickInterval](http://api.highcharts.com/highcharts/xAxis.tickInterval)。由于您的轴是 datetime 类型，因此您必须使用毫秒作为 tickInterval 的单位。因此，以毫秒为单位的 1 小时滴答间隔为 3600000。如果您希望它为 2 小时，请使用 7200000。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:34:36.637

粗略的猜测是您的系列中没有包含时间。如果您的 xAxis 是日期时间，您需要以某种方式将其提供给 HighCharts。例如，您的系列应如下所示：

```
[[timeInJSTime1, 15999.999999999996],
 [timeInJSTime2, 14999.999999999996],
 ....
] 
```

# ios - 是什么导致我的 Rubymotion 应用程序崩溃？

> ID：11470437
> 
> 赞同：2
> 
> 时间：2012-07-13T12:23:32.383
> 
> 标签：ios, rubymotion

自从我将 Rubymotion 升级到 1.17 后，我的应用程序在激活一秒钟左右后开始崩溃

没有显示错误消息，我无法从[崩溃日志](https://gist.github.com/b02f3707105b4ab070d5)中看到有什么问题，有人可以帮忙吗？

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000050000008 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:29:28.260

`EXC_BAD_ACCESS (SIGSEGV)`意味着您正在尝试访问`0x0000000050000008`无效的内存地址（在您的情况下）。该地址存在，但您的程序无权访问它。 [这个](https://stackoverflow.com/questions/7446655/exception-types-in-ios-crash-logs)问题列出了这些类型的信号以及一些处理它们的方法。

您确定这与 Rubymotion 的新版本有关，而不是您的代码更改吗？`motion support`如果是这样，您可能希望通过在终端中运行来提交错误报告。

# android - TtsService 中的什么可以解释 playEarcon() 缺少 onUtteranceCompleted() 的原因？

> ID：11470440
> 
> 赞同：34
> 
> 时间：2012-07-13T12:23:43.110
> 
> 标签：android, text-to-speech, android-mediaplayer, onutterancecompleted

前段时间，我发现`playEarcon()` [永远不会产生](https://stackoverflow.com/a/10144969) `onUtteranceCompleted()`.

当时，我只是将“在**合成**话语时调用”的文档解释为`onUtteranceCompleted()`不适用于耳控，因为耳控并不是 TTS 合成的真正结果。

但是再次查看 Android 的源代码，我根本找不到可以证明我的解释合理的解释。

关于[我的测试夹具](https://stackoverflow.com/q/10134646)的一些事实：

1.  `onUtteranceCompleted()`总是在 earcon 之前到达话语 ID。该话语是普通的 TTS 话语，而不是耳标。
2.  之后的earcon**确实**发挥了作用（即完全符合预期）。
3.  `onUtteranceCompleted()`因为那个耳标**永远不会**出现。这是非常一致且可重现的行为。

深入研究 TtsService 源代码，似乎只有 2 种方法会影响 的到达（或不存在）`onUtteranceCompleted()`：

1.  [TtsService.processSpeechQueue()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#TtsService.processSpeechQueue%28%29)
2.  [TtsService.onCompletion()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#708)

如果您检查该代码，您将看到第三个候选[者 TtsService.getSoundResource()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#975)被排除在外（因为我的earcon 缺少 onUtteranceComplete 负责），因为上面的事实＃2：earcon 总是播放，因此`getSoundResource()`不可能返回空值。

使用相同的逻辑，也可以排除第一个候选[者 TtsService.processSpeechQueue() ，因为相同的事实 #2：earcon 始终播放，因此始终执行以下 2 个关键语句：](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#TtsService.processSpeechQueue%28%29)

```
1108   mPlayer.setOnCompletionListener(this);
...
1111   mPlayer.start(); 
```

所以，我们只剩下第二个候选者，[TtsService.onCompletion()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#708)，作为为什么 a`playEarcon()` [从不产生](https://stackoverflow.com/a/10144969) `onUtteranceCompleted()`的可能解释：

```
public void onCompletion(MediaPlayer arg0) {
  // mCurrentSpeechItem may become null if it is stopped at the same
  // time it completes.
  SpeechItem currentSpeechItemCopy = mCurrentSpeechItem;
  if (currentSpeechItemCopy != null) {
    String callingApp = currentSpeechItemCopy.mCallingApp;
    ArrayList<String> params = currentSpeechItemCopy.mParams;
    String utteranceId = "";
    if (params != null) {
      for (int i = 0; i < params.size() - 1; i = i + 2) {
        String param = params.get(i);
        if (param.equals(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID)) {
          utteranceId = params.get(i + 1);
        }
      }
    }
    if (utteranceId.length() > 0) {
      dispatchUtteranceCompletedCallback(utteranceId, callingApp);
    }
  }
  processSpeechQueue();
} 
```

在那里，只有 2 个条件无法产生[dispatchUtteranceCompletedCallback()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#TtsService.dispatchUtteranceCompletedCallback%28java.lang.String,java.lang.String%29)：

1.  currentSpeechItemCopy == null
2.  utteranceId.length() == 0

但我确信可以排除条件 #2，因为我记录了所有 utteranceIds 并且耳标肯定存在。

此外，检查整个系统日志：

```
Log.v(SERVICE_TAG, "TTS callback: dispatch started"); 
```

丢失`onUtteranceCompleted()`可能是[dispatchUtteranceCompletedCallback()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#TtsService.dispatchUtteranceCompletedCallback%28java.lang.String,java.lang.String%29)没有被调用的结果，但也可能是`mCallbacksMap.get(packageName)`返回 null 的结果。

所以，我们再次留下了两种可能性，这两种可能性对我来说都没有多大意义：

1.  在调用 earcon 的[onCompletion()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#TtsService.onCompletion%28android.media.MediaPlayer%29)时，earcon 的`mCurrentSpeechItem`值为空。但是**为什么？**
2.  [mCallbacksMap](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/tts/TtsService.java#1223)为空。它是什么，它什么时候被填充？

解决这个谜团的任何建议或其他解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T07:29:28.270

检查[android.speech.tts.TextToSpeech#playEarcon()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.3_r1/android/speech/tts/TextToSpeech.java?av=h#789)在第[807](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.3_r1/android/speech/tts/TextToSpeech.java?av=h#807)行。传递给 text-to-speech 服务绑定器的 params 参数为 null，这意味着该服务永远不会收到您的话语 ID。

```
 public int playEarcon(String earcon, int queueMode,
         HashMap<String,String> params) {
     synchronized (mStartLock) {
         ...
         result = mITts.playEarcon(mPackageName, earcon, queueMode, null);
     }
     ...
 } 
```

# android - Phonegap|Android 4 - 从 PHOTOLIBRARY 拍照时，应用程序有时会崩溃

> ID：11470442
> 
> 赞同：0
> 
> 时间：2012-07-13T12:23:48.870
> 
> 标签：android, cordova, photolibrary

我使用以下代码在 Phonegap (cordova 1.9.0) 中获取来自画廊或相机的照片并将其包含在页面中：

```
function getPhotoByGallery() {
    navigator.camera.getPicture(onPhotoSuccess, onFail, {
        quality : 50,
        destinationType: navigator.camera.DestinationType.FILE_URI,
        sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
    });
}

function getPhotoByCamera() {
    navigator.camera.getPicture(onPhotoSuccess, onFail, {
        quality : 50
    });
}

function onPhotoSuccess(data) {
    var viewport = document.getElementById('viewport');
    //console.log(data);
    viewport.style.display = "";
    document.getElementById("test_img").src = data;
} 
```

测试设备：搭载 Android 4 的三星 Galaxy S3。用相机获取照片没问题。但是，当我多次尝试从图库中拍照时，应用程序经常崩溃（没有任何有用的错误）不是一直而是经常在不同的周期中崩溃。（有时是第三次从图库中挑选图像，有时是第五次，以此类推）

我不知道问题的原因可能是什么，因为该应用程序没有给我它遇到的问题的任何反馈......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:12:50.800

我遇到同样的问题 2 天，直到我发现您应该有权获取您在设备中拍摄的图像文件的权限。默认情况下，没有返回图像的权限，因此它返回 null 并且您的应用程序崩溃。

如果您在 XCode 中使用 Cordova/PhoneGap，那么您还应该在 www 文件夹中创建 Config.xml 文件并授予访问图像文件的权限。

```
<feature name="http://api.phonegap.com/1.0/device" />
<feature name="http://api.phonegap.com/1.0/battery"/>
<feature name="http://api.phonegap.com/1.0/camera"/>
<feature name="http://api.phonegap.com/1.0/contacts"/>
<feature name="http://api.phonegap.com/1.0/file"/>
<feature name="http://api.phonegap.com/1.0/geolocation"/>
<feature name="http://api.phonegap.com/1.0/media"/>
<feature name="http://api.phonegap.com/1.0/network"/>
<feature name="http://api.phonegap.com/1.0/notification"/> 
```

如果您使用的是 Android，请授予 AndroidManifest.xml 文件的权限。

您可以在此处找到 config.xml 文件的所有内容： [https ://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

Cordova/PhoneGap 没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:41:36.633

我突然在 Android 4（三星 Galaxy III）和 PhoneGap 2.0（通过 PhoneGap Build 构建）上运行的应用程序遇到了同样的问题。

附带说明一下，唯一需要的权限是：

```
<feature name="http://api.phonegap.com/1.0/camera"/>
<feature name="http://api.phonegap.com/1.0/file"/> 
```

我已经设置了（它适用于 Android 2.2 手机）。

**更新** 经过进一步测试，事实证明这个问题是众所周知的问题，Android 在需要更多内存时关闭打开的应用程序，例如当它打开网络摄像头时。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T12:25:52.037

设备是否已植根？如果是这样，您可以使用 logcat 程序（例如 alogcat）来尝试帮助。

# linux - 尝试使用 shell 脚本查找我的机器所需的所有内核模块

> ID：11470447
> 
> 赞同：10
> 
> 时间：2012-07-13T12:24:00.947
> 
> 标签：linux, perl, kernel, kernel-module

我现在正在开发内核模块，构建时间已经开始在我的皮肤之下。作为一个副作用，我在构建过程中需要太多的“咖啡”休息时间。

所以我一直在寻找一种方法来只构建我的平台所需的东西。“linux kernel in a nutshell”的第 7 章和第 8 章很好地详细说明了如何手动执行此操作。它是一个很好的阅读：[http ://www.kroah.com/lkn/](http://www.kroah.com/lkn/)

但是尽管我了解这些东西，但这仍然需要进行很多调整才能使其发挥作用。

2.6.32 及更高版本的内核添加了一个新目标`make localmodconfig`。它会扫描`lsmod`并适当地更改 .config 。所以我以为我找到了我的“自动化”。但是这个 perl 脚本也有一些问题。

该线程描述了问题：[https ://bbs.archlinux.org/viewtopic.php?pid=845113](https://bbs.archlinux.org/viewtopic.php?pid=845113)

还有一个显然对其他人有用的建议解决方案是直接运行脚本而不是使用make的目标。

虽然对我来说， make localmodconfig 根本不起作用。其原因如下：

```
make clean
make mrproper
cp /boo/config-'uname -r' .config
make localmodconfig 
```

它停止了

```
vboxguest config not found!!
nf_defrag_ipv6 config not found!!
vboxsf config not found!!
vboxvideo config not found!! 
```

问题是我的内核开发环境在 virtualbox 里面。这些 vbox 模块是在我选择安装“virtualbox guest addtion”时安装的。

并且 netfilter 模块可能是一个特定于发行版的模块（很多 netfilter 模块不是主线内核的一部分，所以这对我来说并不令人震惊），它不包含在主线内核中。

现在的解决方法显然是卸载这些模块并重试。但我在想是否有补丁`streamline_config.pl`可以让用户在她/他想要的时候排除某些模块。问题是我对 perl 的了解*为零*，我喜欢这样。

所以*简而言之我的问题*

1.  修补`streamline_config.pl`，以便我可以提供模块名称列表作为参数，它将从处理配置文件中排除。

    该脚本位于[kernel.org](http://git.kernel.org/?p=linux/kernel/git/stable/linux-stable.git;a=blob;f=scripts/kconfig/streamline_config.pl;h=bccf07ddd0b67a0e2f761fd5721f274a49bf9bbb;hb=HEAD)

2.  编辑：删除有关 perl 脚本未运行的内容。正如 mugen kenichi 指出的那样（我有多愚蠢？）。但是`localmodconfig`由于源代码树下没有一些模块代码，make 仍然不起作用。修补`streamline_config.pl`仍然有效的要求。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-14T11:41:53.897

任何其他试图构建最小内核映像也希望减少构建时间的人，应该执行以下操作：

1) 在源代码树中复制分发内核配置。可以使用下面给出的任一命令来完成：

```
$zcat /proc/config.gz > .config 
```

或者

```
$cp /boot/config-'uname -r' .config 
```

2) 使用 localmodconfig 目标。

```
$make localmodconfig 
```

它将`lsmod`用于查找此时加载了哪些模块。然后它将搜索分发的 .config 以启用它们并禁用其他。

重要的是要知道它并不总是完美无缺。因此，您应该使用`make menuconfig`. 您会看到一些模块仍被标记为要构建，这实际上对您的系统来说是不必要的。

有时，树外模块可能会导致 make localmodconfig 失败。如果是这种情况，您可以通过两种方式解决该问题：

a) 卸载树外模块并重试`make localmodconfig`。b) 直接运行 perl 脚本：

```
$chmod +x script/kconfig/streamline_config.pl
$perl script/kconfig/streamline_config.pl > .config 
```

3) 安装`ccache`[1]。它将显着缩短您的构建时间。它缓存对象。所以它会减少后续的构建。

ccache 可能包含在发行版的存储库中，以便您可以通过`apt-get`或安装它`yum`。在 CentOS 中，它在 EPEL 存储库中可用。[2]

4) 为构建工作提供尽可能多的核心

```
$make -j8 CC="ccache gcc" 
```

我的结果是：

```
real 3m10.871s
user 4m36.949s
sys 1m52.656s 
```

[1] [http://ccache.samba.org/](http://ccache.samba.org/) [2] [http://fedoraproject.org/wiki/EPEL](http://fedoraproject.org/wiki/EPEL)

# windows - 使用 CPU%、Disk% 和 memory % 计数器

> ID：11470448
> 
> 赞同：-1
> 
> 时间：2012-07-13T12:24:03.277
> 
> 标签：windows, performance, powershell, scripting

我正在尝试通过 PowerShell 获取这 3 个计数器，您能帮忙吗？如下所示：

```
Hostname1 : CPU% : 75%
Hostname1 : MEM% : 55%
Hostname1 : Disk1 % : 15%
Hostname1 : Disk2 % : 10%
Hostname1 : Disk3 % : 13%
Hostname1 : Disk4 % : 12%
Hostname2 : CPU% : 75%
Hostname2 : MEM% : 55%
Hostname2 : Disk1 % : 11%
Hostname2 : Disk2 % : 15%
Hostname2 : Disk3 % : 15% 
```

注意：我找不到 %used/memory 的计数器，所以我不会通过性能计数器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T05:50:36.763

可能您最简单的方法是使用 WMI。以下是我为您编写的用于演示该能力的脚本。

您需要进行格式化，而我遗漏了磁盘统计信息 - 所以需要一些工作。

```
# Lets import our list of computers
$computers = get-Content .\computer-list.txt
# computer-list.txt is your hostnames each on a new line

# Lets create our variables
$HostInfo = @()

# Lets loop through our computer list from computers
foreach ($computer in $computers) {
    # Lets get our stats
    # Lets create a re-usable WMI method for CPU stats
    $ProcessorStats = Get-WmiObject win32_processor -computer $computer
    $ComputerCpu = $ProcessorStats.LoadPercentage 
    # Lets create a re-usable WMI method for memory stats
    $OperatingSystem = Get-WmiObject win32_OperatingSystem -computer $computer
    # Lets grab the free memory
    $FreeMemory = $OperatingSystem.FreePhysicalMemory
    # Lets grab the total memory
    $TotalMemory = $OperatingSystem.TotalVisibleMemorySize
    # Lets do some math for percent
    $MemoryUsed = ($FreeMemory/ $TotalMemory) * 100
    $PercentMemoryUsed = "{0:N2}" -f $MemoryUsed

    # Lets throw them into an object for outputting
    $objHostInfo = New-Object System.Object
    $objHostInfo | Add-Member -MemberType NoteProperty -Name Name -Value $computer
    $objHostInfo | Add-Member -MemberType NoteProperty -Name CPULoadPercent -Value $ComputerCpu
    $objHostInfo | Add-Member -MemberType NoteProperty -Name MemoryUsedPercent -Value $PercentMemoryUsed

    # Lets dump our info into an array
    $HostInfo += $objHostInfo
}

# Lets output to the console
$HostInfo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-01T13:39:50.560

这有效：

```
$system = Get-WmiObject win32_OperatingSystem
$totalPhysicalMem = $system.TotalVisibleMemorySize
$freePhysicalMem = $system.FreePhysicalMemory
$usedPhysicalMem = $totalPhysicalMem - $freePhysicalMem
$usedPhysicalMemPct = [math]::Round(($usedPhysicalMem / $totalPhysicalMem) * 100,1)

$driveLetters = Get-WmiObject Win32_Volume | select DriveLetter
foreach ($driveLetter in $driveLetters)
{
    $drive = Get-WmiObject Win32_Volume | where {$_.DriveLetter -eq $driveLetter.DriveLetter}
    $usedDiskSpace = $drive.Capacity - $drive.FreeSpace
    $usedDiskSpacePct = [math]::Round(($usedDiskSpace / $drive.Capacity) * 100,1)
} 
```

# magento - Magento 在前端页面上返回不正确的客户数据

> ID：11470453
> 
> 赞同：1
> 
> 时间：2012-07-13T12:24:18.730
> 
> 标签：magento

这不是获取登录客户名称的正确方法吗？

```
<?php echo Mage::helper('customer')->getCustomer()->getName(); ?> 
```

我有一个具有实时聊天功能的网站。昨天，我被要求将电子邮件地址和登录用户的名称传递到网站头部的 Javascript 跟踪变量代码中。这样运营商就可以看到谁在网站上以及他们在与谁交谈，而无需询问他们的信息。

所以我将 Magento 中的信息传递到 Javascript 代码中，但现在我看到这件非常**奇怪的事情**正在发生。例如，

> 如果我使用凭据登录姓名 = John 电子邮件 = john12@yahoo.com

然后这个名称和电子邮件变量值随着页面的变化而变化。例如，如果我单击任何产品页面，我传递的变量值会更改为其他用户的信息。

> 名称变为 Ricky 电子邮件变为 ricky23@gmail.com

随着页面的变化，这个变量值不断变回 john 并从 john 变为其他值。所以操作员不知道他们在说谁，因为值一直在变化。此外，用户 ricky 或更改为的用户也存在于数据库中。所以它正在从数据库中随机选择一个人。

这就是我将代码传递给javascript的方法。如果这不是传递信息的正确代码，请告诉我。请检查我用来从 Magento 获取信息的 php 代码。粗略地说，我每 5 次收到一次不正确的值。请提供一些帮助。提前致谢。

```
<?php
$customer = Mage::getSingleton('customer/session')->getCustomer();
$email = $customer->getEmail();
$firstname = $customer->getFirstname();
$lastname= $customer->getLastname();
$name = $firstname . ' ' . $lastname;
?>
    <script type="text/javascript">
      if (typeof(lpMTagConfig) == "undefined"){ lpMTagConfig = {};}
      if (typeof(lpMTagConfig.visitorVar) == "undefined"){ lpMTagConfig.visitorVar = [];}
      lpMTagConfig.visitorVar[lpMTagConfig.visitorVar.length] = 'Email=<?php echo $email; ?>';
      lpMTagConfig.visitorVar[lpMTagConfig.visitorVar.length] = 'Name=<?php echo $name; ?>';

    </script> 
```

我还附上快照 ![我以 Gagan Sharma 的身份登录，但在 Google 开发人员工具中，您可以看到它向我展示了数据库 Warwick Burton 中的其他人](../Images/97b4617a3c0f198d1046edb7451de0b7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:20:21.353

我很想听听您是如何将此代码添加到页面的？它是在它自己的块中，还是你将它添加到`footer.phtml`，或类似的？如果您添加到现有块，请务必检查该模板的块缓存设置。

为了确认缓存假设，我会问以下问题：

*   您是否始终在同一页面上使用相同的名称？当您刷新页面时，您是否在 Javascript 中获得相同的名称和电子邮件？
*   禁用缓存后问题是否仍然存在？

这听起来根本不像一个单例问题。PHP 脚本的每次执行都与其他脚本隔离，服务于一个页面请求。另一个客户的对象不可能在脚本的调用之间移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T16:20:53.743

这是理解单例模式的问题。如果您两次调用您的代码：

```
$customer_1 = Mage::helper('customer')->getCustomer()->getName(); 
$customer_2 = Mage::helper('customer')->getCustomer()->getName(); 
```

你得到对象的**两个不同**实例。但是......如果其中一个已经在其构造函数中实现了单例模式或已经实现了单例`getInstance`，那么这两个对象实际上将指向同一事物。查看`customer/helper/Data.php`代码可以看到功能

```
public function getCustomer()
{
    if (empty($this->_customer)) {
        $this->_customer = Mage::getSingleton('customer/session')->getCustomer();
    }
    return $this->_customer;
} 
```

这意味着在其中一种情况下，单例已经实现/调用，而在另一种情况下 - 不是已经设置了属性。使用 quote/customer/cart 以始终​​获取正确数据的正确方法是始终使用单例模式。所以使用这个：

```
$customer = Mage::getSingleton('customer/session')->getCustomer(); 
```

始终保证您在该会话中获得正确的客户。您可能知道`singleton`模式基于以下`registry`模式`app/Mage.php`：

```
public static function getSingleton($modelClass='', array $arguments=array())
{
    $registryKey = '_singleton/'.$modelClass;
    if (!self::registry($registryKey)) {
        self::register($registryKey, self::getModel($modelClass, $arguments));
    }
    return self::registry($registryKey);
} 
```

并看着`app/Mage.php`：

```
public static function register($key, $value, $graceful = false)
{
    if (isset(self::$_registry[$key])) {
        if ($graceful) {
            return;
        }
        self::throwException('Mage registry key "'.$key.'" already exists');
    }
    self::$_registry[$key] = $value;
}
...
public static function registry($key)
{
    if (isset(self::$_registry[$key])) {
        return self::$_registry[$key];
    }
    return null;
} 
```

您可以看到 Magento 检查是否已设置。如果是这样，Magento 要么抛出一个异常，这是默认行为，要么返回`null`。希望这将帮助您了解您面临的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-17T07:11:48.497

我已经解决了这个问题。我已将代码从 footer.phtml 移动到 head.phtml 并且现在工作正常。值不再改变。如果有人知道背后的逻辑，请发布，我会改变我的答案。到目前为止，这是有效的。

# php - 发出 SOAP 请求

> ID：11470454
> 
> 赞同：1
> 
> 时间：2012-07-13T12:24:22.007
> 
> 标签：php, soap, request

我是 PHP 新手 - 一个多月前开始使用 PHP、JS 和 HTML，每天几个小时。

我在这方面做了很多功课，但在实施方面却一头雾水。我没有一个铁杆程序员可以和我坐在一起，因此在这里。但我敢肯定，如果这个问题得到解答，它将帮助那里的许多新手和有经验的程序员

问题 - 我可以理解 SOAP 的概念，但不知道如何发出简单的肥皂请求。PHP中的步骤是什么。

> //php SOAP 扩展安装正确

创建一个新的 SOAP 客户端：

```
$variable = new SoapClient ;

$inputxml = " the input XML file as a string ";

varibale__doRequest($input xml, "string location -?? 
```

我将 XML 输入作为变量.. 我指定什么位置.. 需要启用缓存和缓存位置？？，...）这就是我正在尝试使用的 php 函数 - 如何使用这个 [http:// www.php.net/manual/en/soapclient.dorequest.php](http://www.php.net/manual/en/soapclient.dorequest.php)

// 以 XML 形式获取响应的 PHP 代码 // 如何将响应作为字符串存储在变量中

有人可以在博客上使用 PHP 演示一个简单的 SOAP 请求吗？

我找不到一个例子，都专注于创建 SOAP 服务或 SOAP 服务器。我只想创建一个 SOAP 客户端并在 PHP 中发出请求 - 任何详细的外行指南 - PHP 特定的？

这是我正在努力解决的 SOAP 服务 - 按关键字查找公司

[http://developer.dnb.com/service-directory/sales/16682663-1.html](http://developer.dnb.com/service-directory/sales/16682663-1.html)

如果有人能写一篇解释细节的博文，将不胜感激

PS：不确定我的挫败感是否合理，但是 SOAP 和 REST 概念使编程听起来像 Rocket Science。我已经花了一个多星期，每天 8 小时，虽然我有一个公平的理解，但对发出 SOAP 请求没有一个清晰的想法SOAP 概念。就 REST 而言，它让我非常困惑——我现在不想在这里碰那个东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T13:45:46.030

有 php soap 客户端，但您不必使用它。您可以手动构建您的请求并使用 curl 发布它，然后您可以根据需要解析响应。

```
/**
* Request login body
*/
const REQUEST_LOGIN = '<?xml version="1.0" encoding="utf-8"?>
<env:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="http://www.company.com/soap" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:SOAP-ENC="http://www.w3.org/2003/05/soap-encoding">
 <env:Body>
  <ns1:RequestLogin xmlns:ns1="http://www.company.com/soap">
   <ns1:Name>%username%</ns1:Name>
   <ns1:OrgId>0</ns1:OrgId>
   <ns1:AuthType>simple</ns1:AuthType>
  </ns1:RequestLogin>
 </env:Body>
</env:Envelope>
'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:01:35.150

PHP 中的 SOAP 比看起来要容易一些。如果您正在寻找长篇教程，[DevZone](http://devzone.zend.com/25/php-soap-extension/)上有一个不错的教程。我还会将[SoapClient 类文档放在手边](http://www.php.net/manual/en/class.soapclient.php)。

使用 Soap 的要点

```
// $endpoint is the callback/uri of the WSDL.
// $options is an array of options.
$client = new SoapClient($endpoint, $options); 
```

[您可以在构造函数的详细信息中](http://www.php.net/manual/en/soapclient.soapclient.php)了解有关选项和端点的更多信息。

PHP 有一些[神奇的方法](http://us3.php.net/manual/en/language.oop5.magic.php)，[__call](http://us3.php.net/manual/en/language.oop5.overloading.php#object.call)就是其中之一。使用 SOAP 最简单的方法通常是调用一个可用的方法。例如：

```
$response = $client->getLoginToken(array(
    'siteid' => 'foo',
    'secid' => 'bar',
)); 
```

在这种情况下，getLoginToken 是一个 SOAP 方法调用。SOAP 客户端看到它不是对象上的方法并将其作为方法传递给 SOAP。传入的数组是作为参数传递给 SOAP 端点的参数。

我还会查看[soapCall 页面](http://www.php.net/manual/en/soapclient.soapcall.php)上的示例。祝你好运。

# mercurial - 如何在 IntelliJ IDEA 项目中使用 mercurial 源代码控制责备（注释）功能？

> ID：11470456
> 
> 赞同：2
> 
> 时间：2012-07-13T12:24:25.423
> 
> 标签：mercurial, intellij-idea, blame

我只想看看谁是最后一个从 IntelliJ IDEA（mercurial scm）内部修改特定代码行的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T13:10:03.427

注释操作不适合您吗？ `Main Menu -> VCS -> Mercurial -> Annotate`或单击编辑器左侧的装订线并选择`Annotate`那里。

# sql-server - 从查询中选择第 n 个结果

> ID：11470457
> 
> 赞同：10
> 
> 时间：2012-07-13T12:24:27.780
> 
> 标签：sql-server, sql-server-2012

我正在使用 SQL Server 2012，我想知道是否有一种方法可以选择，例如，查询的第三个结果。我已经研究了 LIMIT 和 OFFSET 但我不能 100% 确定它是否适用于 SQL Server，但是我被告知在 SQL Server 2012 中有一些我想做的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T12:31:26.690

```
SELECT  *
FROM     YourTable
ORDER BY OrderingColumn ASC 
OFFSET  2 ROWS /*Skip first 2 rows*/
FETCH NEXT 1 ROWS ONLY 
```

`OFFSET ... FETCH`注意：不先做`ORDER BY`就不能使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-28T03:38:23.993

我会推荐

```
select * from table ORDER BY OrderingColumn ASC LIMIT n,1 
```

这是一个限制的怪癖，如果你给它一个范围，它只会返回那个范围。它也适用于 MySQL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-09T04:38:13.137

你不能只选择第二个索引吗？这就是我会说我桌子上的第三个帖子的方式。

//index 3 $index3 = DB::query('SELECT * from posts')[2];

然后，您将拥有一个可供您使用的阵列。

# java - 在java TCP连接中绑定一个接口

> ID：11470459
> 
> 赞同：7
> 
> 时间：2012-07-13T12:24:32.927
> 
> 标签：java, networking, tcp, network-programming

我在 solaris 主机中有两个接口。我想通过两个接口启动到单个 TCP 服务器的两个 TCP 连接，如图所示。Java中是否有任何选项可以将接口绑定到TCP套接字以覆盖本地路由表？

我附上网络图，

![网络图](../Images/38d8b0476cd7f674db3a698b1587cf02.png)

我想同时使用串行链路带宽从服务器获取数据。因此，我想在两个接口上启动连接。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T12:47:20.093

您可以使用

```
Socket s = new Socket(hostname, port, localInterface, 0); 
```

然而，许多操作系统不遵守这个“提示”，并且无论如何都会使用路由表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:50:21.073

你的意思是这样的：

```
Socket socket1 = new Socket();
socket1.bind(new InetSocketAddress("10.1.1.1", port));
socket1.connect(new InetSocketAddress("10.1.3.1", port));

Socket socket2 = new Socket();
socket2.bind(new InetSocketAddress("10.1.2.1", port));
socket2.connect(new InetSocketAddress("10.1.3.1", port); 
```

# sql - SQL 参数 - 标量变量

> ID：11470462
> 
> 赞同：1
> 
> 时间：2012-07-13T12:24:37.223
> 
> 标签：sql, parameters

我正在尝试将 SQL 参数设置为小数，但是当我运行代码时出现错误

> 必须声明标量变量@Per_Cent..

代码如下，在此先感谢

```
SqlParameter PerCent = new SqlParameter("@PerCent", SqlDbType.Decimal, 5); 
PerCent.Value = PerCentV; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:27:47.547

显然，您将查询中的参数定义为`@Per_Cent`

而且您正在声明它的价值`@PerCent`

因此，使它们相等，将其添加到您的中`SqlCommand.Parameters`，它应该可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:27:22.660

您的错误是指名为“@Per_Cent”的变量，但您正在添加一个名为“@PerCent”的参数......

另外，我假设您随后将该 SqlParameter 添加到 SqlCommand

# python - 404错误服务blobstore图像python appengine

> ID：11470465
> 
> 赞同：0
> 
> 时间：2012-07-13T12:24:42.473
> 
> 标签：python, image, google-app-engine, rendering, blobstore

我有一个关于提供/渲染保存在 blobstore 中的图像的问题

我得到一个 404 错误它似乎找到了 url?? [http://clockinapple.appspot.com/serve/AMIfv97XybVYJy5Jk1e7WCSfCc-IO7zBtlVaC8ef8-Im](http://clockinapple.appspot.com/serve/AMIfv97XybVYJy5Jk1e7WCSfCc-IO7zBtlVaC8ef8-Im) /etc/

代码与示例基本相同 - 非常感谢任何帮助

这是我的处理程序代码：

```
class ServeHandler(blobstore_handlers.BlobstoreDownloadHandler):
    def get(self, resource):
        resource = unicode(str(urllib.unquote(resource)))
        blob_info = blobstore.BlobInfo.get(resource)
        self.send_blob(blob_info)

class GetBlobstoreUrl(BaseHandler):
    def get(self):
        upload_url = blobstore.create_upload_url('/upload/')
        self.response.out.write(upload_url)

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        upload_files = self.get_uploads('file')
        blob_info = upload_files[0]
        user_info = blobstore.BlobInfo.all().get().filename
        text = user_info
        head, sep, tail = text.partition('.')
        user_info = head
        photo = clockin.UserPhoto(blob_key=blob_info.key(), employee=user_info)
        photo.put()

class GetLogs(BaseHandler):
    def get(self):
        logs = clockin.UserPhoto.all() 
        params = {'logs': logs}

        return self.render_template('logs.html', **params) 
```

这是我的模型代码：

```
class UserPhoto(db.Model):
    employee = db.StringProperty(db.Key)
    blob_key = blobstore.BlobReferenceProperty()
    create_timestamp = db.DateTimeProperty(auto_now_add=True)
    update_timestamp = db.DateTimeProperty(auto_now=True) 
```

我的路线：

```
RedirectRoute('/serve/([^/]+)?', ServeHandler, name='serve_handler', strict_slash=True),
RedirectRoute('/logs/', GetLogs, name='get_logs', strict_slash=True),
RedirectRoute('/get_blobstore_url/', GetBlobstoreUrl, name='get_blobstore_url',   strict_slash=True), 
```

我如何为 html 提供服务：（我们是实例）

```
<td><img src='/serve/{{us.blob_key.key()}}'></img></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:19:32.977

我直接查询了blobstore并且图像正确显示我希望这可以帮助某人我的处理程序：

```
class PicDownload(BaseHandler):
    def get(self):
        emps = clockin.Employee.all().fetch(100)
        ekey = self.request.GET.get("select1")
        ekey = str(ekey)
        afile = [] 
        blob_info = blobstore.BlobInfo.all().filter('filename =', ekey+'.jpg').order('-  creation').fetch(20)
        for a in blob_info:
        afile.append(get_serving_url(a))

        form = 'get_pics.html'

        params = {'blob_info': blob_info,
                  'afile': afile,
                  }

        return self.render_template(form, **params) 
```

在 HTML 方面：

```
<select id="select1" name='select1' onchange='this.form.submit()'>
{% for e in emps %}
    <option value={{e.key()}} ><href a=/pic_download/{{e.key()}}>{{e.username}}
    </href>    
    </option>
{% endfor %}
</select> 
```

# redis - 如何在redis中搜索哈希键？

> ID：11470468
> 
> 赞同：39
> 
> 时间：2012-07-13T12:24:51.383
> 
> 标签：redis

我正在使用哈希键来存储用户详细信息，例如：

```
 hmset user:1 user_name lee  age 21
 hmset user:2 user_name david  age 25
 hmset user:3 user_name chris  age 25 
```

我需要搜索具有`age = 25`,的用户`name = lee`。如何在给定字段中搜索指定值？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-13T13:14:47.490

你不能。Redis 是键值对存储，而不是关系数据库。

为了搜索特定数据，您需要构建此数据的访问路径。例如，要获取年龄 = 25 的用户，您需要构建一个索引来将年龄值映射到用户。可以用一组来完成。这与名称相同。

一旦你有了年龄和姓名的集合，你就可以通过相交集合来搜索用户。例如：

```
# Add 3 users
hmset user:1 user_name lee age 21
hmset user:2 user_name david age 25
hmset user:3 user_name chris age 25

# Maintain age index
sadd age:21 1
sadd age:25 2 3

# Maintain name index
sadd name:lee 1
sadd name:david 2
sadd name:chris 3

# Get the ID of users having age = 25 and name = lee
sinter age:25 name:lee
  -> will return an empty set 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-17T15:51:04.053

Acually 您可以通过将值放入键中来做到这一点

```
HMSET lee:25 user_name lee age 25
HMSET massi:43 user_name massi age 43
HMSET lee:24 user_name lee age 24
HMSET lee:28 user_name lee age 28 city Berlin 
```

现在您可以使用“keys”命令找到它们

```
127.0.0.1:6379> keys *:25
1) "lee:25"
127.0.0.1:6379> keys lee*
1) "lee:25"
2) "lee:24"
3) "lee:28"
127.0.0.1:6379> keys massi:43
1) "massi:43" 
```

最后找到特定的哈希

```
127.0.0.1:6379> HGETALL lee:24
1) "user_name"
2) "lee"
3) "age"
4) "24" 
```

我所说的只是你可以分两步完成，把你需要的任意数量的值放在键中，然后找到它们。但是请考虑将所有值放入 key 中并不是一个好主意，只需放入您需要进行过滤的值即可。干杯:)

# android - 每个线程只能创建一个 Looper

> ID：11470472
> 
> 赞同：1
> 
> 时间：2012-07-13T12:25:00.527
> 
> 标签：android, android-asynctask

我有一个在 Internet 上请求数据信息的应用程序（客户端-服务器应用程序），但是这种通信非常慢，因此我决定创建一个 AsyncTask 来管理延迟。在 doInBackground 内部，我称之为`Looper.prepare()`“视图生成器（检索数据）”。

**详细（问题）：**

我有一个动态创建列表视图行的活动。但每次我尝试增加行时，android 都会抛出 Looper 异常“每个线程只能创建一个 Looper”

我按照以下步骤操作：

*   称呼`Looper.preapare()`
*   使用第一次膨胀来创建我的列表的容器
*   使用第二次膨胀来创建列表行

我想我不能充气两次，但我不知道如何解决这个问题

**异步任务**

```
private class DrawerView extends AsyncTask<ActivityGroup, String, View>{
    Exception exc=null;     

    @Override protected void onPreExecute() {
    super.onPreExecute();   
}

@Override protected View doInBackground(ActivityGroup... params) {
    try {
        Looper.prepare();
    return processAct();
    }catch (ConnectionException e) {    
        exc =e;
    return null;                
    }
    catch (Exception e) {
        exc = e;
    return null;
    }
}

@Override protected void onPostExecute(View result) {
    super.onPostExecute(result);
    if(exc!= null){
        Utils.usrMessage(getApplicationContext(), "Oh Noo!:\n"+exc.getMessage());
        Utils.logErr(getApplicationContext(), exc);
    finish();
    }
    if(result!= null){
        setContentView(result);
    }
}
} 
```

`processAct()`是这样实现的抽象方法

```
@Override protected View processAct() throws Exception {

    Bundle bundle = getIntent().getExtras();
    User user = (User)bundle.getSerializable("user");

    Team team =  Team.getTeamInformation(this,user.getTeamId());
    ArrayList<Player> players =Player.getPlayerList(this,user.getTeamId());

    PlayersListAdapter view = new PlayersListAdapter(this,players,team);
    return view;
} 
```

`PlayerListAdapter`是构建/设置第一个视图（列表容器）的类..这里是第一个通货膨胀

```
public PlayersListAdapter(Context context, ArrayList<Player> players,Team team) throws Exception{
    super(context);
    View view = inflate(getContext(), R.layout.team_players, this);

    TextView tv_teamName = (TextView)view.findViewById(R.id.tbplrs_tmnm);
    TextView tv_playersNum = (TextView)view.findViewById(R.id.tbplrs_nplrs);

    tv_teamName.setText(team.getName());

    String msg = players.size()+" ";
    msg += (players.size()!=1)?context.getString(R.string.playerPlural):context.getString(R.string.playerSingle);
    tv_playersNum.setText(msg);

    ListView lView = (ListView)view.findViewById(R.id.tbplrs_plrslst);
    PlayersRowListAdapter plAdapter = new PlayersRowListAdapter(context, players);
    lView.setAdapter(plAdapter);
} 
```

最后`PlayerRowListAdapter`扩展了 BaseAdapter，...这里是第二次通货膨胀

```
@Override public View getView(int position, View view, ViewGroup parent) {
    if (view == null){
        LayoutInflater lInflator = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = lInflator.inflate(R.layout.team_player_singlplayer,null);
    }
    ....
    ....
} 
```

注意如果我放弃第二个适配器`PlayerRowListAdapter`......一切正常......（显然没有列表）

问候

ps对不起我的英语

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-07T03:37:17.877

`Looper.prepare();`首先检查您的线程是否不存在 Looper，而不是仅仅调用，如果不存在，则调用该函数。像这样：

```
if (Looper.myLooper()==null)
    Looper.prepare(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:37:32.697

您需要调用的唯一原因`Looper.prepare()`是`Looper.loop()`当您希望`Handler`在不是 UI 线程的线程中接收消息时。基本上，它使线程永远保持活动状态，以便`Handler`在线程内创建的线程仍然可以发送和接收消息。`LocationListener`类似或类似的回调方法也是如此。您有责任通过在`Looper.getMyLooper().quit()`线程所在的线程内部调用来杀死线程。

如果你在 UI 线程中膨胀视图，那么你不需要调用`Looper.prepare()`或者`Looper.loop()`因为这已经在后台完成了。你不应该`Views`在 UI 线程之外膨胀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:38:18.813

AsyncTask 已经有自己的`Looper`. 如果您想从您的`doInBackground()`方法使用更新您的 UI [`publishProgress(..)`](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)，然后[`onProgressUpdate(..)`](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)在主线程中调用。在你的`onProgressUpdate`你可以膨胀你的视图并将它们添加到你的 UI 中。

编辑：示例代码：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:09:45.710

这是我解决这个问题的方法。

正如[AsyncTask 的开发人员参考](http://developer.android.com/reference/android/os/AsyncTask.html)所说， `doInBackground`创建一个新线程来管理它（这迫使我调用`Looper.prepare()`），同时`onPostExecute()`使用主线程。

所以我`processAct()`分成了两种方法：`prepareData()`检索数据和`createView()`调用适配器。

我已经把第一个方法放进去`doInBackground()`，第二个（`createView()`）我放进去`onPostExecute()`。

# javascript - 如何在联系人和帐户 SugarCRM javascript 之间创建关系

> ID：11470481
> 
> 赞同：0
> 
> 时间：2012-07-13T12:25:33.177
> 
> 标签：javascript, contacts, sugarcrm, accounts

嗨，有人可以帮我吗？我是使用 Javascript 编程的新手，我需要设置一个联系人到客户关系。

```
function SetRelationContact_Account(){
    $.get(CurrentServerAddress + '/service/v2/rest.php', {
        method: "set_relationship",
        input_type: "JSON",
        response_type: "JSON",
        rest_data: '{"session":"' + SugarSessionId +
        '","module_name":"Contacts","module_id":"' + CurrentContactId +
        '","link_field_name":"accounts","related_ids":["session":"' + SugarSessionId +
        '"]}'
    }, function(data) {
        if (data !== undefined) {
            var addAccountResult = jQuery.parseJSON(data);

        }

    });
} 
```

我尝试创建新联系人，并且想与现有帐户建立关系。在 jmertic 的建议下，我尝试了以下方法，但仍然无效：

```
function SetRelationContact_Account(){
    $.get(CurrentServerAddress + '/service/v2/rest.php', {
        method: "set_relationship",
        input_type: "JSON",
        response_type: "JSON",
        rest_data: '{"session":"' + SugarSessionId + '","module_name":"Contacts","module_id":"' + CurrentContactId + '","link_field_name":"accounts","related_ids":["name":"account_id","value":"' + CurrentAccountId + '"]}'
   }, function(data) {
       if (data !== undefined) {
           var addAccountResult = jQuery.parseJSON(data);

       }

   });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T03:41:22.577

“related_ids”应该是您关联的记录的帐户 ID，并且应该采用 javascript 数组的形式。

# java - 如何在ajax中解析Json对象

> ID：11470482
> 
> 赞同：1
> 
> 时间：2012-07-13T12:25:36.203
> 
> 标签：java, jquery

我无法解析从 ajax 中的 servlet 返回的 tje Json 对象，

我需要将 json 对象值放在相对字段中

从我的 java 代码中，我以 JSON 的形式发送以下字符串

```
String  webVisitorDetails = "{"+"companyName : \""+webVisitor.getCompanyName()+ "\","+
                                                "address : \""+webVisitor.getProfessionalAddress()+ "\","+
                                                "city : \""+webVisitor.getCity()+ "\","+
                                                "zipCode : \""+webVisitor.getZipCode()+ "\","+
                                                "clientId : \""+webVisitor.getCustomerAccountNumber()+ "\"}"; 
```

在阿贾克斯

```
$.ajax({
    url: "ships",
    data: {
        email: email.toString()
    },
    success: function(data) {
        $.each(data, function(k, v) {
            console.log(k + " Value " + v);
            $("#city").text(v.city);
            $("#zipcode").text(v.getZipCode);
            $("#Adress").text(v.getProfessionalAddress);
        });
    },
    error: function(data) {
        console.log("error:", data);
    },
    type: "post",
    datatype:"json",
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:31:32.243

请注意，jQuery 设置[`dataType`](http://jqapi.com/#p=jQuery.ajax)带有大写 T。要手动进行 JSON 解析，请使用该[`parseJSON`](http://jqapi.com/#p=jQuery.parseJSON)函数。但是，如果`Content-Type`将 servlet 响应设置为`application/json`，则应自动检测数据类型。

解决此问题后：它有效吗？`data`你的处理程序的参数值是`success`多少？

```
console.debug(data); 
```

正如 Neal 已经说过的，JSON 解析需要从 jQuery 1.4 开始的有效 JSON 字符串。您可以验证您的 JSON [jsonlint.com](http://jsonlint.com/)。

> [在 jQuery 1.4 中，JSON 数据以严格的方式解析；任何格式错误的 JSON 都会被拒绝并引发解析错误。（有关正确的 JSON 格式的更多信息，请参阅 json.org。）](http://api.jquery.com/jQuery.ajax/)

为避免手动构建 JSON 字符串，请使用[JSON-java](http://www.json.org/java/index.html)处理器（来自[iNan 的评论）或](https://stackoverflow.com/questions/11470482/how-to-parse-json-object-in-ajax#comment15144336_11470482)[json.org](http://json.org/)上列出的其他 Java 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:27:31.413

你的json字符串**不正确**

键**必须**用双引号括起来。

[在此处阅读要求](http://www.json.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:52:53.803

如果由于单反逗号 (') 而造成问题，那么只需执行以下操作：

```
jQuery.parseJSON(data.replace(/'/g, '"')) 
```

如果是这种情况，那么它应该对你有用......

# putty - Putty 服务器意外关闭网络连接

> ID：11470484
> 
> 赞同：2
> 
> 时间：2012-07-13T12:25:38.153
> 
> 标签：putty

使用 Putty 时出现此错误：

> 服务器意外关闭网络连接

我认为我办公室的网络有问题，因为我工作场所的所有计算机都有同样的问题。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:12:12.873

如果在您连接到主机一段时间后发生此错误，可能在您的工作网络中有一些路由器定期关闭连接，解决方法是让您的终端保持忙碌，当您离开时运行类似 top 的东西，但请记住这一点造成安全漏洞。

基本上，您的连接因不活动而关闭，如果您只是在终端中保持运行，则更有可能它不会关闭连接，我的意思是在不断刷新终端屏幕时运行的某些东西，如果您运行 Linux 机器，输入命令`top`，显示盒子加载并每 5 秒刷新一次。

# flash - RTMFP 连接

> ID：11470492
> 
> 赞同：0
> 
> 时间：2012-07-13T12:26:01.460
> 
> 标签：flash, rtmfp

对不起，我想和你澄清一下。使 RTMFP 连接成为可能的要素是……您需要 Cirrus 开发人员密钥、Flash Media Server 或 FMS 托管、Web 服务器和 Flash 播放器 10 或更高版本。最后，您是否需要在 Actionscript 或 Actionscript 3 中编辑您的 API。这是正确的还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T20:03:30.570

是的。您的客户端需要 Flash Player 10.1 或更高版本。如果您有 Cirrus 密钥并连接到 Cirrus，那么您不需要 Web 服务器来进行简单的点对点连接。

您的客户端还需要一个 ISP 连接和防火墙设置来取消阻止 UDP 端口。大多数流行的美国 ISP 都这样做。如果您不确定连接，可以在此处进行诊断：

连接检查器 [http://cc.rtmfp.net/](http://cc.rtmfp.net/)

例如 ActionScript API，这里是 Adob​​e 的视频聊天示例： http: [//labs.adobe.com/technologies/cirrus/samples/](http://labs.adobe.com/technologies/cirrus/samples/)

# javascript - 正则表达式获取 URL 中的特定查询字符串变量

> ID：11470493
> 
> 赞同：0
> 
> 时间：2012-07-13T12:26:01.653
> 
> 标签：javascript, jquery, regex

我有一个类似的网址

```
server/area/controller/action/4/?param=2" 
```

服务器可以在其中

```
http://localhost/abc
https://test.abc.com
https://abc.om 
```

我想用正则表达式获取上述 URL 中**“action/”之后的第一个字符，即 4。**js中的正则表达式是否可能，或者有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:31:43.883

使用正则表达式`\d+(?=\/\?)`

```
var url = "server/area/controller/action/4/?param=2"; 
var param = url.match(/\d+(?=\/\?)/); 
```

测试代码[在这里](http://ideone.com/nwJNk)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:23:22.980

在 JavaScript 中使用这个正则表达式：

```
action/(.) 
```

允许您访问第一个匹配组，该组将包含后面的*第一个字符*`action/`——请参阅[JSFiddle中的示例](http://jsfiddle.net/XTYH9/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T13:47:45.540

这种方式在 / 字符上拆分 URL 并提取最后一个元素

```
var url = "server/area/controller/action/4/?param=2".split ('/').slice (-2,-1)[0]; 
```

# java - java - 在java中序列化/反序列化单例类或没有默认或没有参数构造函数的类？

> ID：11470495
> 
> 赞同：1
> 
> 时间：2012-07-13T12:26:07.443
> 
> 标签：java, serialization

我们可以在java中序列化/反序列化单例类或没有默认或没有参数构造函数的类吗？

如果不是，那该怎么做？？创建一个无参数保护的构造函数有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:34:17.010

您应该为您的 Singleton 创建一个代理对象，并在 Singleton 中对其进行序列化。

您可以在此处阅读有关代理序列化的更多信息-> [http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy/](http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:32:02.047

您不能仅对类进行序列化/反序列化

# trigger.io - Trigger.IO：包括一个 mp3 文件

> ID：11470497
> 
> 赞同：1
> 
> 时间：2012-07-13T12:26:10.460
> 
> 标签：trigger.io

在一个非常简单的 trigger.io 项目的 src （或任何其他子文件夹）中包含一个 mp3 时，我遇到了一种奇怪的行为。

第一个构建工作正常。在第二个版本中，我收到以下错误：（我添加了德语内容的翻译）

```
2012-07-13 12:51:38,017 [  DEBUG] Checking API response for success or error
2012-07-13 12:51:38,131 [  DEBUG] configuration is identical to last run
2012-07-13 12:51:38,131 [  DEBUG] already authenticated - continuing
2012-07-13 12:51:38,131 [  DEBUG] GET https://trigger.io/api/app/69c8695eccc911e1a8c212313d1adcbe/should_rebuild
2012-07-13 12:51:38,394 [  DEBUG] Checking API response for success or error
2012-07-13 12:51:38,394 [   INFO] Configuration is unchanged: using existing templates
2012-07-13 12:51:48,394 [  ERROR] Something went wrong that we didn't expect:
2012-07-13 12:51:48,394 [  ERROR] [Error 183] Eine Datei kann nicht erstellt werden, wenn sie bereits vorhanden ist: 'development'
Translation: A file cannot be created if it exists allready: 'development'
2012-07-13 12:51:48,394 [  DEBUG] Traceback (most recent call last):
  File "C:\Users\asic\forge-tools-3.3.2\forge-tools\forge\async.py", line 96, in run
    result = self._target(*self._args, **self._kwargs)
  File "C:\Users\asic\forge-tools-3.3.2\forge-tools\forge\main.py", line 369, in development_build
    try_a_few_times(move_files_across)
  File "C:\Users\asic\forge-tools-3.3.2\forge-tools\forge\lib.py", line 25, in try_a_few_times
    f()
  File "C:\Users\asic\forge-tools-3.3.2\forge-tools\forge\main.py", line 365, in move_files_across
    shutil.copytree(defaults.TEMPLATE_DIR, 'development')
  File "C:\Python27\lib\shutil.py", line 174, in copytree
    os.makedirs(dst)
  File "C:\Python27\lib\os.py", line 157, in makedirs
    mkdir(name, mode)
WindowsError: [Error 183] Eine Datei kann nicht erstellt werden, wenn sie bereits vorhanden ist: 'development'
Translation: A file cannot be created if it exists allready: 'development' 
```

修复它的唯一方法是删除开发文件夹并从头开始构建..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T01:57:11.283

当我们进行“forge build”时，现有的“development”目录将被删除并重新创建。因此，如果您在 Windows 上的另一个应用程序中打开了 .mp3，这可能会阻止文件被删除，因此在第二个“forge build”中会看到这个问题。

# c# - 组织异步任务

> ID：11470498
> 
> 赞同：0
> 
> 时间：2012-07-13T12:26:23.813
> 
> 标签：c#, .net, task-parallel-library

我有三个任务A，B，C。

B 必须在 C 之前运行，但 A 可以与它​​们两者并行运行。这是最近改变的逻辑，我们目前的逻辑运行良好，我只是想知道是否有更好的解决方案来解决我们目前的问题：

```
public void RunTasks(...) {
    Action<IRunnableTask> runner = task => 
    {
        if (task.ShouldRun(request))
        {
            task.Run(request, response);
        }
    };

    // run parallel tasks
    Parallel.ForEach(parallelTasks, runner);

    // run serial tasks
    Array.ForEach(serialTasks, runner);
} 
```

在这里，A 和 B 将是并行任务，C 在串行任务列表中。问题在于代码会在 C 开始之前等待 A 完成，这是不必要的。

那么，是否有一个很好的干净解决方案，或者我是否需要开始进行回调等等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T12:32:17.090

您可以使用 TPL 中的任务。

您可以同时运行任务 B 和 A，然后让任务 C 作为任务 B 的延续运行

例如

```
Task.Factory.StartNew(()=>TaskA());
Task.Factory.StartNew(()=>TaskB()).ContinueWith(t=>TaskC(t)); 
```

在TaskB的延续中，可以传入Task来获取TaskB的任意结果传入TaskC方法中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:29:47.753

将一个任务添加到并行任务列表中，由谁负责依次执行串行任务呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:31:01.973

像这样的东西：

```
Action taskACallback = () => { };
Action taskBCallback = () => { };
Action taskCCallback = () => { };

Task taskA = new Task(taskACallback);
Task taskC = new Task(taskCCallback);
Task taskB = new Task(taskBCallback).ContinueWith(t => taskC.Start());
taskA.Start();
taskB.Start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T16:39:10.667

只是 sll 答案的略微修改版本，因为我不确定在这种程度上编辑代码的礼仪是什么。

```
Action taskACallback = () => Console.WriteLine ("Task A");
Action taskBCallback = () => Console.WriteLine ("Task B");
Action<Task> taskCCallback = task => Console.WriteLine ("Task C, continued off of task with status {0}", task.Status);

Task taskA = new Task(taskACallback);
Task taskB = new Task(taskBCallback);
Task taskC = taskB.ContinueWith(taskCCallback);
taskA.Start();
taskB.Start(); 
```

这给出了控制台输出：

```
Task A
Task B
Task C, continued off of task with status RanToCompletion 
```

# jquery - jquery 函数 blur() 除非单击 id="toto" 的元素

> ID：11470509
> 
> 赞同：2
> 
> 时间：2012-07-13T12:27:06.077
> 
> 标签：jquery, blur

> **可能重复：**
> [当 onblur 发生时，我怎样才能找出哪个元素焦点去*了*？](https://stackoverflow.com/questions/121499/when-onblur-occurs-how-can-i-find-out-which-element-focus-went-to)

我有一个 jquery 函数，当一个元素（这里是 selectionChamp）失去焦点时，我可以做一些事情：

```
$("#selectionChamp").blur(function() {      
    $("#detailChamp").attr('disabled', true, 'enabled', false);
    $("#supprChamp").attr('disabled', true, 'enabled', false);      
}); 
```

我想为函数添加一个条件，以便在您失去焦点时执行某些操作，除非您单击具有另一个 id 的元素。（例如 id="toto" ！^^）

一个主意？

# web-services - 从命令行运行包含在war存档中的junit测试

> ID：11470512
> 
> 赞同：2
> 
> 时间：2012-07-13T12:27:09.013
> 
> 标签：web-services, ant, war, tomcat7, junit4

我有一个打包在 .war 档案中的 Web 应用程序。它还包含单元测试类。我想将此应用程序部署在不同的机器上，并且每次都从命令行运行测试。考虑到测试在 .war 中，我该如何做到这一点？我使用Tomcat7。我不考虑使用 Ant。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T16:21:42.570

您需要一份 junit jar 的副本来运行测试运行程序。假设它已经在 WAR 文件中，可以按如下方式检索它：

```
unzip myapp.war WEB-INF/lib/junit-4.10.jar 
```

然后可以按如下方式运行 Junit：

```
java -cp WEB-INF/lib/junit-4.10.jar:myapp.war org.junit.runner.JUnitCore [test class name goes here] 
```

**笔记：**

*   如果您的测试需要在 WAR 中打包的任何其他 jar，那么它们也需要被拉出。

# iphone - 在 cocos2d 层之上的 uitableview 中制作自定义 uitableviewcell

> ID：11470518
> 
> 赞同：1
> 
> 时间：2012-07-13T12:27:33.430
> 
> 标签：iphone, ios, uitableview, uiviewcontroller, cocos2d-iphone

首先是显示包含 uitableview 的 uiviewcontroller 的代码：

```
//View Controller with navigation bar
InAppPurchaseViewController *purchaseViewController = [[InAppPurchaseViewController alloc] init];
purchaseViewController.title = @"Liste de packs";
purchaseViewController.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissViewController:)] autorelease];

//Creation de la navigation bar et release du viewcontroller
UINavigationController *navController = [[[UINavigationController alloc] initWithRootViewController:purchaseViewController] autorelease];
[purchaseViewController release];

container = [[UIViewController alloc] init];
[container setView:[[CCDirector sharedDirector] openGLView]];
[container setModalTransitionStyle: UIModalTransitionStyleCoverVertical];
[container presentModalViewController: navController animated: YES]; 
```

这是我的 uitableviewcell：

InAppPurchaseCell.h

```
@interface InAppPurchaseCell : UITableViewCell
@property (strong, nonatomic) IBOutlet UIImageView *ImageThumbnail;
@property (strong, nonatomic) IBOutlet UIButton *BuyButton;
@property (strong, nonatomic) IBOutlet UILabel *TitleLabel;
@property (strong, nonatomic) IBOutlet UILabel *PriceLabel;
@end 
```

InAppPurchaseCell.m

```
@implementation InAppPurchaseCell
@synthesize PriceLabel;
@synthesize TitleLabel;
@synthesize BuyButton;
@synthesize ImageThumbnail;

-(id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];  
}
@end 
```

InAppPurchaseCell.xib

所有 iboutlet 都正确链接

和 ：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellIdentifierCasual = @"ShopCell";
    InAppPurchaseCell *cell = (InAppPurchaseCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifierCasual];
    if (cell == nil) 
    {
        cell = (InAppPurchaseCell*)[[[NSBundle mainBundle] loadNibNamed:@"InAppPurchaseCell" owner:nil options:nil]lastObject];
        cell.selectionStyle = UITableViewCellSelectionStyleGray;
    }
    else
    {
        cell.selectionStyle = UITableViewCellSelectionStyleGray;
    }
    Packages *packages = [PackagesParser loadData];
    Package *package = [packages.Packages objectAtIndex:indexPath.row];

    cell.ImageThumbnail.image = [UIImage imageNamed:@"Icon-Small.png"];
    cell.PriceLabel.text = @"0,75$";
    cell.TitleLabel.text = package.Name; 

    return cell;
} 
```

表格弹出时发生了什么：

```
2012-07-13 13:56:55.378 Testing[1276:1c103] *** Terminating app due to uncaught 
exception 'NSUnknownKeyException', reason: '[<NSObject 0xa10da00> 
setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key ImageThumbnail.' 
```

在这一行：

```
cell = (InAppPurchaseCell*)[[[NSBundle mainBundle] loadNibNamed:@"InAppPurchaseCell" owner:nil options:nil]lastObject]; 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:53:55.277

这可能会帮助你

```
InAppPurchaseCell *cell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell==nil) {     
   cell=[[InAppPurchaseCell alloc]initWithFrame:CGRectMake(0, 0, 200, 100)     
   reuseIdentifier:@"ShopCell"];
} 
```

# android - Android 应用程序当前活动带来的问题

> ID：11470520
> 
> 赞同：13
> 
> 时间：2012-07-13T12:27:34.430
> 
> 标签：android, notifications, icons, statusbar, android-pendingintent

我有一个基本问题，我认为附加任何代码片段可能会有所帮助。当我们在应用程序位于前面时按下主页按钮时，我们会转到主页并且应用程序失去焦点。

现在，我的应用程序必须在状态栏中有通知图标。和在我的应用程序中一样，有可能有 2-3 个活动可见（在对话视图中一个在另一个之上）。在某些情况下，当我按下状态栏中的通知图标时，我不确定如何恢复这种状态。

但是，当我按下主页按钮，然后按下主屏幕中的应用程序图标时，我得到了预期的一切。

那么，有什么方法可以让我对通知栏图标做同样的事情。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T12:50:19.380

有两种方法可以做到这一点：

1.  [通知以恢复任务而不是特定活动？](https://stackoverflow.com/questions/6575730/notification-to-restore-a-task-rather-than-a-specific-activity)

2.  [从通知中恢复应用程序和堆栈](https://stackoverflow.com/questions/5502427/resume-application-and-stack-from-notification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:33:52.713

通知栏图标是`PendingIntent`，不是吗？只要您点击通知，PendingIntent 就可以接收 Intent 进行广播。[您可以在“ 3\. 定义通知的消息和 PendingIntent:](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Basics) ”中找到示例

# vb.net - 从 global.asax 文件调用存储过程

> ID：11470523
> 
> 赞同：-2
> 
> 时间：2012-07-13T12:27:40.073
> 
> 标签：vb.net, stored-procedures, global-asax

您好我已经开发了以下代码来将数据集保存在`Global.asax`文件中。要在`webpage.aspx.vb`文件中使用它，现在它工作正常。

以类似的方式，我如何调用存储过程`Global.asax`？
请帮忙，在此先感谢您！

```
Shared _cache As Cache = Nothing

Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
    _cache = Context.Cache
    RefreshCache(Nothing, Nothing, 0)
End Sub

Private Shared Sub RefreshCache(ByVal key As String, ByVal item As Object, ByVal reason As CacheItemRemovedReason)
    Dim adapter As New SqlDataAdapter("SELECT * FROM dbo.table where logid = 1", "server=server;database=database;uid=userid;pwd=password")

    Dim ds As New DataSet()
    adapter.Fill(ds, "Quotations")

    Dim onRemove As CacheItemRemovedCallback

    onRemove = New CacheItemRemovedCallback(AddressOf RefreshCache)

    _cache.Insert("Quotes", ds, New CacheDependency("C:\AspNetSql\Quotes.Quotations"), Cache.NoAbsoluteExpiration, Cache.NoSlidingExpiration, CacheItemPriority.[Default], onRemove)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:18:37.660

使用以下代码得到解决方案。

```
<%@ Application Language="VB" %>
<%@ Import Namespace="System.DirectoryServices.AccountManagement" %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace="System.Data.Common" %>
<%@ Import Namespace="System.Runtime.Remoting.Contexts" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<%@ Import Namespace="System.Web.Caching" %>
<%@ Import Namespace="System.Globalization" %>
<%@ Import Namespace="System.Web.Caching.Cache" %>

<script RunAt="server">

    Shared _cache As Cache = Nothing
    Protected Shared db As Database

    Private cnPubs As SqlConnection
    Private daPubs As SqlDataAdapter
    Private cmdSelPubInfo As SqlCommand

    Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)

        _cache = Context.Cache
        RefreshCache(Nothing, Nothing, 0)
    End Sub

    Public Sub New(ByVal databaseName As String)
        db = New Database(databaseName)
    End Sub

    Private Sub RefreshCache(ByVal key As String, ByVal item As Object, ByVal reason As CacheItemRemovedReason)

        cnPubs = New SqlConnection("server=Servername;database=databasename;uid=userid;pwd=password")
        'select command
        cmdSelPubInfo = New SqlCommand
        cmdSelPubInfo.Connection = cnPubs
        cmdSelPubInfo.CommandType = CommandType.StoredProcedure
        cmdSelPubInfo.CommandText = "storedprocedurename"

        cmdSelPubInfo.Parameters.Add(New SqlParameter("@pStartDate", "01/01/2011"))
        cmdSelPubInfo.Parameters.Add(New SqlParameter("@pEndDate", "01/01/2012"))
        cmdSelPubInfo.Parameters.Add(New SqlParameter("@pErrorMessage", ""))

        'DataApapter
        daPubs = New SqlDataAdapter
        daPubs.SelectCommand = cmdSelPubInfo
        Dim dsPubs = New DataSet

        'Dim ds As New DataSet()
        daPubs.Fill(dsPubs)

        Dim onRemove As CacheItemRemovedCallback

        onRemove = New CacheItemRemovedCallback(AddressOf RefreshCache)

        '' Add the DataSet to the application cache.
        _cache.Insert("Quotes", dsPubs, New CacheDependency("C:\AspNetSql\Quotes.Quotations"), Cache.NoAbsoluteExpiration, Cache.NoSlidingExpiration, CacheItemPriority.[Default], onRemove)
    End Sub
</script> 
```

# php - Mantis Bug 跟踪器严重性选项自定义

> ID：11470528
> 
> 赞同：2
> 
> 时间：2012-07-13T12:28:01.967
> 
> 标签：php, customization, mantis

当我们`Report Issue`在 Mantis 中时，有一个`Severity`选项，我想在其中添加一个自定义字段，该字段应显示在该下拉列表中。

知道哪些文件需要更改它，或者我们可以从数据库管理它吗？

有没有人对 Mantis 进行过这种定制？我使用的是 Mantis 1.1.6 版本，但其他版本更新也适用于我。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T13:28:17.647

由于严重性是 MantisBT 枚举，因此适用的文档是[Customizing MantisBT -> Enumerations](http://www.mantisbt.org/docs/master-1.2.x/en/administration_guide.html#ADMIN.CUSTOMIZE.ENUMS)。

# java - .getSize() 未更新

> ID：11470530
> 
> 赞同：3
> 
> 时间：2012-07-13T12:28:16.687
> 
> 标签：java, swing, user-interface, jpanel

我需要能够在事件函数中更改 JPanel 的大小，然后再次获取大小。在函数调用完成之前，JPanel 似乎没有更新。我怎样才能得到真正的尺寸？**这是一个SSCCE：**

```
import java.awt.*;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import javax.swing.*;

public class Test extends JFrame implements MouseWheelListener{
JPanel p;
Test(){
    setLayout(new FlowLayout());
    setPreferredSize(new Dimension(1000,1000));
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setVisible(true);

    p = new JPanel();
    p.setPreferredSize(new Dimension(200,200));
    p.setBackground(Color.red);
    add(p);

    addMouseWheelListener(this);
    pack();
}
public static void main(String args[]){
    new Test();
}
public void mouseWheelMoved(MouseWheelEvent e) {

    System.out.println(p.getSize());

    p.setPreferredSize(new Dimension(100,100));
    p.revalidate();

    System.out.println(p.getSize());
}
} 
```

代码工作正常，但如果我滚动鼠标一步，它会在控制台中打印以下内容：

java.awt.Dimension[宽度=200,高度=200]

java.awt.Dimension[宽度=200,高度=200]

**我希望它打印**：

java.awt.Dimension[宽度=200,高度=200]

java.awt.Dimension[宽度=100,高度=100]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T12:59:31.123

你的代码对我有用，但只在鼠标滚轮事件上工作，你必须用鼠标滚轮滚动

修改示例

```
import java.awt.*;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import javax.swing.*;

public class Test extends JFrame implements MouseWheelListener {

    private static final long serialVersionUID = 1L;
    private JPanel p;

    public Test() {
        setLayout(new FlowLayout());
        setPreferredSize(new Dimension(1000, 1000));
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        p = new JPanel();
        p.setPreferredSize(new Dimension(200, 200));
        p.setBackground(Color.red);
        add(p);
        addMouseWheelListener(this);
        pack();
        setVisible(true);
    }

    public void mouseWheelMoved(MouseWheelEvent e) {
        Dimension dim100 = new Dimension(100, 100);
        Dimension dim200 = new Dimension(200, 200);
        System.out.println(p.getSize());
        if (p.getPreferredSize().equals(dim100)) {
            p.setPreferredSize(dim200);
            p.revalidate();
            System.out.println(p.getSize());
        } else if (p.getPreferredSize().equals(dim200)) {
            p.setPreferredSize(dim100);
            p.revalidate();
            System.out.println(p.getSize());
        }
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

编辑：

必须延迟`System.out.println(p.getSize());`，invokeLater() 在这种情况下是最好的，因为在 EDT 中完成所有事件后容器返回更改的 Dimension

例子

```
import java.awt.*;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import javax.swing.*;

public class Test extends JFrame implements MouseWheelListener {

    private static final long serialVersionUID = 1L;
    private JPanel p;

    public Test() {
        setLayout(new FlowLayout());
        setPreferredSize(new Dimension(1000, 1000));
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        p = new JPanel();
        p.setPreferredSize(new Dimension(900, 900));
        p.setBackground(Color.red);
        add(p);
        addMouseWheelListener(this);
        pack();
        setVisible(true);
    }

    public void mouseWheelMoved(MouseWheelEvent e) {
        Dimension dim100 = p.getSize();
        System.out.println("before "+ p.getSize());
        p.setPreferredSize(new Dimension(dim100.height - 5, dim100.width - 5));
        p.revalidate();
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                System.out.println("after "+ p.getSize());
            }
        });
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

生成

```
before java.awt.Dimension[width=900,height=900]
after java.awt.Dimension[width=895,height=895]
before java.awt.Dimension[width=895,height=895]
after java.awt.Dimension[width=890,height=890]
before java.awt.Dimension[width=890,height=890]
after java.awt.Dimension[width=885,height=885]
before java.awt.Dimension[width=885,height=885]
after java.awt.Dimension[width=880,height=880]
before java.awt.Dimension[width=880,height=880]
after java.awt.Dimension[width=875,height=875]
before java.awt.Dimension[width=875,height=875]
after java.awt.Dimension[width=870,height=870]
before java.awt.Dimension[width=870,height=870]
after java.awt.Dimension[width=865,height=865]
before java.awt.Dimension[width=865,height=865]
after java.awt.Dimension[width=860,height=860] 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-13T12:38:13.267

你不需要调用paint() 来改变大小吗？

# android - ACTION_IMAGE_CAPTURE 的相机意图未出现在三星 Galaxy Nexus(4.0.2) 上

> ID：11470532
> 
> 赞同：6
> 
> 时间：2012-07-13T12:28:21.333
> 
> 标签：android, android-camera-intent

我使用以下代码从相机拍摄图片并获取图片的路径。

```
...
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(cameraIntent, CAMERA_IMAGE_CAPTURE); // image capture
...
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Log.d(TAG, "onActivityResult:" + resultCode + " request:" + requestCode);

    switch (requestCode) {
        case CAMERA_IMAGE_CAPTURE:
            Uri selectedImageUri = data.getData();
            userImagePath = getPath(selectedImageUri);
        break;
    }
} 
```

它适用于模拟器和不同的设备。但在三星 Galaxy Nexus(4.0.2) 上，它不会启动相机应用程序。但它会将 RESULT_OK 返回给 onActivityResult，我在 LogCat 中没有发现异常。请给我和建议如何解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T12:31:07.713

你失踪了`EXTRA_OUTPUT`，这可能会影响事情。我的 Galaxy Nexus 可以成功运行[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Camera/Content)，它使用以下代码请求图片：

```
Intent i = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
File dir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);

output = new File(dir, "CameraContentDemo.jpeg");
i.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(output));

startActivityForResult(i, CONTENT_REQUEST); 
```

# string - matlab中的fprintf（串行通信）

> ID：11470534
> 
> 赞同：0
> 
> 时间：2012-07-13T12:28:40.960
> 
> 标签：string, matlab, printf

我正在尝试通过 matlab 函数和 .mex 文件与差分驱动移动机器人通信。我可以使用以下命令成功移动机器人：

```
ref = serial('COM1');
set(ref,'BaudRate', 9600);
fopen(ref);

fprintf(ref,'C,1000,1000');
out = fscanf(ref)

fclose(ref)
delete(ref) 
```

但是，我制作的功能`fprintf`不起作用：

```
function r = Move(ref,left,right)

fprintf(ref,'C,left,right');
out = fscanf(ref) 
```

我知道问题是命令中使用了不同的字符串`fprintf`（即'C,1000,1000' 不等于'C,left,right'），但我无法解决这个问题。对不起，如果这太琐碎了。

答案是（见下面的评论）：

```
function r = Move(ref,left,right)

fprintf(ref,sprintf('C,%d,%d', left, right));
out = fscanf(ref); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:32:09.380

您可以尝试以下方法：

```
function r = Move(ref,left,right)

fprintf(ref,'C,%d,%d', left, right);
out = fscanf(ref) 
```

# jquery - 将 JqGrid 与 TreeGrid + GridDnd 一起使用

> ID：11470537
> 
> 赞同：0
> 
> 时间：2012-07-13T12:29:02.800
> 
> 标签：jquery, jqgrid, drag-and-drop, treegrid

一段时间以来，我一直在尝试使用 TreeGrid 和 GridDnD 功能实现 JqGrid，但遇到了麻烦。我以前看过它，所以我知道它可以做到。

这是我用来创建 TreeGrid 的代码，它可以按需要工作：

```
$("#documentmanagementtree").jqGrid({
            url: '<%: Url.Action("GetDocumentManagementFolderStructure", "Document") %>',
            datatype: 'json',
            mtype: 'post',
            colNames: ['Id','Type',
        '<%: Html.TranslateUiElement(Function(x) x.SharedTranslations.EntityTypeCaption) %>',
        '<%: Html.TranslateUiElement(Function(x) x.DocumentTranslations.FileNameCaption)%>',
        '<%: Html.TranslateUiElement(Function(x) x.DocumentTranslations.DocumentFileSizeCaption) %>',
        '<%: Html.TranslateUiElement(Function(x) x.DocumentTranslations.LastCheckinDateCaption)%>',
        '<%: Html.TranslateUiElement(Function(x) x.DocumentTranslations.DocumentDownloadCaption) %>'],
            colModel: [
        { name: 'id', index: 'id', hidden: true },
        { name: 'type', index: 'type', hidden: true },
        { name: 'icon', index: 'icon', width: 5, align: 'left' },
        { name: 'name', index: 'name', width: 15 },
        { name: 'size', index: 'size', width: 5, sortable: false, align: 'right' },
        { name: 'lastcheckindate', index: 'lastcheckindate', width: 10, align: 'center', sorttype: 'date', datefmt: '<%= Html.GetGridDateFormat()%>' },
        { name: 'downloadlink', index: 'downloadlink', width: 5, align: 'center' }
        ],
            height: 'auto',
            width: 1013,
            sortname: 'id',
            treeGrid: true,
            cellEdit: true,
            treeGridModel: 'adjacency',
            treedatatype: "json",
            ExpandColumn: 'icon'
        }); 
```

现在，当我实现 GridDnD 功能时，（我在其他页面中正常工作）没有任何反应。虽然，当我从 jqGrid 代码中注释掉“treeGrid：true”行时，我可以成功拖放。

注意：我使用“#”连接，因为我实现了 jqGrid 拖放到自身，我使用 jquery 的 droppable，它工作得很好。

```
$("#documentmanagementtree").gridDnD({
            connectWith: '#'
        }); 
```

所以问题是我无法让 TreeGrid 与 GridDnd 一起工作，尽管我可以让这两个功能单独工作得很好，而且我知道它可以完成，因为我已经看到了这种情况的演示（其中我无法重现结果）。

让我知道您可以建议帮助的任何事情，在此先谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:02:50.757

我已经使用 tableDnD 找到了一些东西，这是生成的代码：

```
 $("#documentmanagementtree").tableDnD({ scrollAmount: 0 });

            $("#documentmanagementtree").jqGrid({
            url: '<%: Url.Action("GetDocumentManagementFolderStructure", "Document") %>',
            datatype: 'json',
            mtype: 'post',
            colNames: ['Id', 'Type',
        '<%: Html.TranslateUiElement(Function(x) x.SharedTranslations.EntityTypeCaption) %>',
        '<%: Html.TranslateUiElement(Function(x) x.DocumentTranslations.FileNameCaption)%>',
        '<%: Html.TranslateUiElement(Function(x) x.DocumentTranslations.DocumentFileSizeCaption) %>',
        '<%: Html.TranslateUiElement(Function(x) x.DocumentTranslations.LastCheckinDateCaption)%>',
        '<%: Html.TranslateUiElement(Function(x) x.DocumentTranslations.DocumentDownloadCaption) %>'],
            colModel: [
        { name: 'id', index: 'id', key: true, hidden: true },
        { name: 'type', index: 'type', hidden: true },
        { name: 'icon', index: 'icon', width: 5, align: 'left' },
        { name: 'name', index: 'name', width: 15 },
        { name: 'size', index: 'size', width: 5, sortable: false, align: 'right' },
        { name: 'lastcheckindate', index: 'lastcheckindate', width: 10, align: 'center', sorttype: 'date', datefmt: '<%= Html.GetGridDateFormat()%>' },
        { name: 'downloadlink', index: 'downloadlink', width: 5, align: 'center' }
        ],
            height: 'auto',
            width: 1013,
            sortname: 'id',
            treeGrid: true,
            viewrecords: true,
            treeGridModel: 'adjacency',
            ExpandColumn: 'icon',
            gridComplete: function () {
                $("#documentmanagementtree").tableDnDUpdate();
            }
        }); 
```

jqgrid 的重要补充是：

```
 gridComplete: function () {
                 $("#documentmanagementtree").tableDnDUpdate();
            } 
```

尽管此拖放功能不如 gridDnD 功能好，但可以将其与 treeGrid 结合使用以更好地工作。

如果您遇到类似的问题，请尽情享受！

# xml - 检查 XML 是否有两种不同类型的元素节点如何使用 XSLT 将其带入输出 XML

> ID：11470538
> 
> 赞同：0
> 
> 时间：2012-07-13T12:29:09.540
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

我已经有一个输入 XML

```
<tutorial>
<lessons>
<lesson>
     chapter1 unit 1 page1
</lesson>
<lesson>
     unit 1 
</lesson>
</lessons>
</tutorial> 
```

输出应该是

```
<Geography>
<historical>
    <social>
       <toc1>
     <toc>
      <chapter>
    chapter1
      <chapter>
      <unit>
    unit 1
      </unit>
      <pages>
    page1
      </pages>
      </toc>
       </toc1>
    <social>
</historical> 
```

实际上我在这里感到困惑

```
 <lesson>
chapter1 unit 1 page1
</lesson>
<lesson>
 unit 1 
</lesson> 
```

这里我需要两个输出

对于第一节课，我需要它作为上面的输出

对于第二节课，我需要它作为输出，如下所示

```
 <historical>
    <social>
       <toc1>
  <toc>
      <unit>
    unit 1
      </unit>   
  <toc>
       </toc1>
    <social>
</historical> 
```

但有时我会在 xml 中输入两种类型我完全困惑如何做到这一点。

任何人都可以在这里指导我吗？它可以在 XSLT1.0 和 XSLT2.0 中

问候卡西克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:25:28.440

**这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

  <xsl:variable name="vNames" select="'chapter', 'unit', 'pages'"/>

 <xsl:template match="lessons">
    <Geography>
      <historical>
        <social>
           <toc1>
             <xsl:apply-templates/>
           </toc1>
        </social>
      </historical>
    </Geography>
 </xsl:template>

 <xsl:template match="lesson[matches(., '(chapter\s*\d+)?\s+(unit\s*\d+)\s+(page\s*\d+)?')]">
  <xsl:analyze-string select="."
   regex="(chapter\s*\d+)?\s+(unit\s*\d+)\s+(page\s*\d+)?">
    <xsl:matching-substring>
      <toc>
         <xsl:for-each select="1 to 3">
          <xsl:if test="regex-group(current())">
           <xsl:element name="{$vNames[current()]}">
                <xsl:sequence select="regex-group(current())"/>
           </xsl:element>
          </xsl:if>
         </xsl:for-each>
      </toc>
    </xsl:matching-substring>
  </xsl:analyze-string>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<tutorial>
    <lessons>
    <lesson>
         chapter1 unit 1 page1
    </lesson>
    <lesson>
         unit 1
    </lesson>
    </lessons>
</tutorial> 
```

**产生想要的正确结果：**

```
<Geography>
  <historical>
    <social>
      <toc1>
        <toc>
          <chapter>chapter1</chapter>
          <unit>unit 1</unit>
          <pages>page1</pages>
        </toc>
        <toc>
          <unit>unit 1</unit>
        </toc>
      </toc1>
    </social>
  </historical>
</Geography> 
```

**说明**：

正确使用 XSLT 2.0 正则表达式功能，例如：

1.  和**[`<xsl:analyze-string>`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#element-analyze-string)**指令**[`<xsl:matching-substring>`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#element-matching-substring)**。

2.  **[`regex-group()`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#regex-group)**功能。

# java - 获取大于 system.currentTimeInMillis 值的 rand 值的方法

> ID：11470540
> 
> 赞同：2
> 
> 时间：2012-07-13T12:29:18.877
> 
> 标签：java, random

如何生成大于 的值的随机值`System.currentTimeInMillis()`。我使用`Random`对象。如何获得最小范围为的值`System.currentTimeInMillis()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T12:30:25.590

不

```
long value = System.currentTimeMillis() + (long)random.nextInt(range); 
```

工作？

如果您要强制执行一个严格大于的值，请在其中`System.currentTimeMillis()`添加一个额外的 1。相应地设置范围以防止溢出（请参阅`assylias`的评论）。

根据评论编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:46:41.317

对于`currentTimeMillis`和之间的时间均匀分布`Long.MAX_VALUE`，**没有溢出**，您可以使用：

```
long time = System.currentTimeMillis();
long randomFutureTime = Math.abs(random.nextLong()) % (Long.MAX_VALUE - time) + time; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:47:35.187

这对于实时创建对象很有用，并且两个对象不能具有相同的时间戳，因此您可以对它们进行排序。

我将对象用作 UUID：

```
Const.DECAL_BIT = 20;
Const.DECAL_BIT_MASQUE = (Long.size() -1) -  next 20;

private final Long timeCreate = (System.currentTimeMillis() << Const.DECAL_BIT) 
       + (System.nanoTime() & Const.DECAL_BIT_MASQUE); 
```

因此，您可以拥有 100 年的有效日期：您将内部日期时间乘以 1M，并以纳秒精度获得一秒的经过时间。

阅读日期：`Date d = Date((Long) timeCreate>> Const.DECAL_BIT);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T12:37:13.383

如果您希望能够获得分布在整个范围内的数字，这是一种方法`System.currentTimeMillis()..Long.MAX_VALUE`：

```
long millis = System.currentTimeMillis();    
long l = Math.min(Long.MAX_VALUE - millis, Math.abs(random.nextLong())) + millis; 
```

Long.MAX_VALUE 将比这里的其他结果更常见，以防万一。

# ember.js - Ember-data 夹具适配器未加载所有数据

> ID：11470545
> 
> 赞同：4
> 
> 时间：2012-07-13T12:29:36.497
> 
> 标签：ember.js, ember-data

[我有一个看起来像这样](http://jsfiddle.net/pjmorse/NCUT6/)的 ember-data 模型定义：

```
Sylvius.Filter = DS.Model.extend({
  title: DS.attr('string'),
  slug: DS.attr('string'),
  // Belongs to Atlas
  atlas: DS.belongsTo('Sylvius.Atlas'),
  // Has images
  images: DS.hasMany('Sylvius.Image'),
  // May have AtlasExtras
  extras: DS.hasMany('Sylvius.AtlasExtra'),
  // Structures for this filter
  structures: DS.hasMany('Sylvius.Structure'),
  // This is the path to the thumbnails sprite.
  // Each image will have an index on this sprite
  thumbnailUrl: DS.attr('string'),
  // How big is each thumbnail?
  thumbnailHeight: DS.attr('number'),
  thumbnailWidth: DS.attr('number'),
  // How big are the images? 
  imageHeight: DS.attr('number'),
  // which image is selected?
  selectedImage: DS.belongsTo('Sylvius.Image')
}); 
```

我有一个像这样设置的 ember-data 固定适配器存储：

```
Sylvius.fixtureStore = DS.Store.create({
  revision: 4,
  adapter: DS.fixtureAdapter
}); 
```

...和看起来像这样的固定装置：

```
Sylvius.Filter.FIXTURES = [{
  "id": 1,
  "title": "Unlabeled",
  "slug": "unlabeled",
  "thumbnailUrl": "assets/img/surface_anatomy/photographic/srf-photo-unlabeled-tn.gif",
  "thumbnailWidth": 100,
  "thumbnailHeight": 75,
  "atlas_id": 1, 
  "images": [1, 2, 3, 4, 5, 6, 7],
  "structures": [0]
}]; 
```

（所有这些代码都在[这个演示问题的 jsfiddle](http://jsfiddle.net/pjmorse/NCUT6/)中。）

这是问题所在：标题可以很好地访问。蛞蝓也在那里。, `thumbnailUrl`, `thumbnailWidth`,`thumbnailHeight`都是未定义的。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T16:18:15.653

您没有遵循 ember-data 的以 rails 为中心的命名约定。您可以将夹具数据更改为：

```
{
  "id": 1,
  "title": "Dummy Title",
  "slug": "dummy-title",
  "thumbnail_url": "path/to/thumbnail.gif",
  "thumbnail_width": 100,
  "thumbnail_height": 75,
  "atlas_id": 1, 
  "images": [1, 2, 3, 4, 5, 6, 7],
  "structures": [0]
} 
```

或更改您的映射以包含一个键：

```
thumbnailUrl: DS.attr('string', { key: 'thumbnailUrl' }),
thumbnailHeight: DS.attr('number', { key: 'thumbnailHeight' }),
thumbnailWidth: DS.attr('number', { key: 'thumbnailWidth' }) 
```

# azure - 尝试通过服务管理 API 在 Azure 中创建虚拟机部署

> ID：11470551
> 
> 赞同：1
> 
> 时间：2012-07-13T12:30:02.423
> 
> 标签：azure, virtual-machine

尝试通过服务管理 API 在 Azure 中创建虚拟机部署。

但是得到 404 http 错误代码，虽然 uri 是正确的。我正确设置了以下格式的值，

[https://management.core.windows.net/](https://management.core.windows.net/) /services/hostedservices//deployments/

还有什么遗漏吗？还在为 SSL 身份验证设置证书。所有其他服务似乎都可以工作，但仅此一项就会引发 404 http 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:45:05.353

你提到你正在使用这个网址：

[https://management.core.windows.net//services/hostedservices//deployments/](https://management.core.windows.net//services/hostedservices//deployments/)

您是否正在输入您希望部署的订阅 ID 和托管服务？

网址应如下所示：

```
https://management.core.windows.net/<subscription-id>/services/hostedservices/<service-name>/deployments/ 
```

取自[http://msdn.microsoft.com/en-us/library/windowsazure/jj157194](http://msdn.microsoft.com/en-us/library/windowsazure/jj157194)

虽然在使用上述 URL 时，我也收到了 404 响应，但我需要删除末尾的斜杠。（“.../deployments”，而不是“.../deployments/”）在此之后我开始收到 BadRequest 响应，但这可能只是因为 XML 正文没有正确生成。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T17:28:45.497

我想你问的是 Windows Azure 虚拟机。在这种情况下，您可能没有使用正确的较新 Powershell cmdlet 来创建 Azure 虚拟机，因为在创建新的虚拟机 cmdlet 时，您不需要使用管理 URL。当您使用 PublishSettings 文件配置连接然后设置订阅时，这一切都是在第一次通话期间完成的。使用 Powershell cmdlet 创建新的 Azure 虚拟机的步骤如下：

*   Get-AzurePublishSettingsFile（[文档在这里](http://msdn.microsoft.com/en-us/library/windowsazure/jj156055.aspx)）
*   导入 AzurePublishSettingsFile *azuresettings* .publishsettings
*   New-AzureVM **（[文档/示例脚本在这里](http://msdn.microsoft.com/en-us/library/windowsazure/jj152815)）

如果您使用 PaaS Windows Azure Web/Worker 角色，那么您将使用：

*   New-AzureDeployment（[记录在这里](http://msdn.microsoft.com/en-us/library/windowsazure/jj152867)）

[此处](http://msdn.microsoft.com/en-us/library/windowsazure/jj152841)记录了所有新的 Windows Azure Powershell CMDlet 的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:15:11.883

终于成功了。MSDN 文档中有一些错误。

```
uri:https://management.core.windows.net/subscriptionID/services/hostedservices/servicename/deployments 
```

末尾没有斜线，但 MSDN 文档末尾有斜线。

# android - Android ListView 和更新列表视图的多个线程

> ID：11470556
> 
> 赞同：0
> 
> 时间：2012-07-13T12:30:25.707
> 
> 标签：android, multithreading, listview, android-activity

我有一个显示项目的列表视图的活动。这个活动有三个按钮和一个带有多个其他按钮的菜单。

当我按下一个按钮时，会启动一个新线程，从 Web 服务获取数据，填充列表视图。然后显示列表视图。

唯一的问题是每次我按下一个按钮时，我都会启动一个线程。根据检索数据所需的时间，有时列表视图未填充好的数据（用户不等待一个线程完成并按下另一个按钮）

首先，我尝试取消线程，但它不起作用（异步任务或使用 thread.interrupt）

我怎样才能停止以前的线程，以便列表视图将被最后的数据填充？

谢谢您的帮助 ：）

```
// Items to be displayed in the listview
    private ArrayList<HashMap<String, Object>> oItems = new ArrayList<HashMap<String, Object>>();

    // Launch the thread when toggle is checked
    button.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
                LoadListView();
            }

        }
    }); 

oMenu.setOnChildClickListener(new OnChildClickListener() {

            @Override
            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                LoadListView();
                return true;
            }

        });

    private void LoadListView() {   
        new Thread(ListViewRunnable).start();
    }

    private Runnable ListViewRunnable = new Runnable() {
        public void run() {
            while (GetItems() < 1) {    
            }

            MainHandler.post(new Runnable() {
                public void run() {

                }
            });
        }

        private int GetItems() {
            try {
                HashMap<String, Object> oItem;

                //Get items from web services
                List<ItemFromService> oItemsFromService = GetItemsFromWebService();

                for (oItemFromService : oItemsFromService) {
                    oItem = new HashMap<String, Object>();
                    oItem.put("ID", oItemFromService.get_iID());
                    oItem.put("Label", oItemFromService.get_sLabel());

                    oItems.add(oItem);
                }

                MainHandler.sendEmptyMessage(GOT_ITEMS);

            } catch (Exception e) {

            }

            return 1;
        }
    }

    private Handler MainHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {

            if (msg.what == GOT_ITEMS) {

                adapter.notifyDataSetChanged();
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:26:56.690

您可以使用 Thread 类而不是 AsyncTask。实例化 Thread 并维护它的句柄。利用：

```
hThread.interrupt() 
```

向线程发送中断消息，并在线程内部进行测试：

```
if (isInterrupted())
 return; 
```

离开线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:34:50.063

在获得完整的所需数据之前，不要使用`adaptername.notifyDataSetChanged()`方法，这样适配器的适配器`ListView`不会得到更新，旧数据会被持久化。

# django - Django 模板名称冲突

> ID：11470572
> 
> 赞同：13
> 
> 时间：2012-07-13T12:31:16.817
> 
> 标签：django, templates

> **可能重复：**
> [Django 视图 - 首先从调用应用程序的目录加载模板](https://stackoverflow.com/questions/3092865/django-view-load-template-from-calling-apps-dir-first)

我有带有许多应用程序的 Django 项目。实际上文件结构如下：

```
myproj/
  default/
    templates/
      index.html  (1)
  app1/
    templates/
      index.html  (2)
  app2/
    templates/
      index.html  (3) 
```

我希望在模板解析时活动应用程序的模板目录具有最高优先级。但实际上我根据 INSTALLED_APPS 的顺序得到了第一个模板！如果我更改已安装应用程序的顺序 - 模板会相应更改。

问题：有没有办法先从当前应用程序中获取模板？模板名称/显式目录规范的唯一性是实现它的唯一方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T12:55:35.790

通常的解决方案是将模板放在另一个以您的应用命名的子目录中，例如：

```
myproj/
  app1/
    templates/
      app1/
        index.html 
```

这是由随附的应用程序（例如`django.contrib.admin`）完成的，并且运行良好。我通常使用通用名称`index.html`，例如模板根目录中的项目特定文件（例如整个站点的索引）。

# r - 使用乘数 ggplot2 转换轴标签

> ID：11470579
> 
> 赞同：11
> 
> 时间：2012-07-13T12:31:39.593
> 
> 标签：r, ggplot2

以前在 ggplot2 中，我使用格式化函数将 Y 轴上的值乘以 100：

```
formatter100 <- function(x){ 
x*100 } 
```

使用新的 ggplot2 (v0.9.1)，我无法使用新的转换函数转换轴标签：

```
mult_trans <- function() {
        trans_new("mult", function(x) 100*x, function(x) x/100) } 
```

这是示例绘图功能

`library(scales)`

```
test<-data.frame(ecdf=c(0.02040816,0.04081633,0.06122449,0.08163265,0.10204082,0.14285714,0.14285714,0.16326531,0.24489796,0.24489796,0.24489796,0.24489796,0.26530612,0.28571429,0.30612245,0.32653061,0.36734694,0.36734694,0.38775510,0.40816327,0.42857143,0.46938776,0.46938776,0.48979592,0.53061224,0.53061224,0.59183673,0.59183673,0.59183673,0.61224490,0.63265306,0.65306122,0.67346939,0.69387755,0.71428571,0.73469388,0.75510204,0.77551020,0.79591837,0.81632653,0.83673469,0.85714286,0.87755102,0.89795918,0.91836735,0.93877551,0.95918367,0.97959184,0.99900000),lat=c(50.7812,66.4062,70.3125,97.6562,101.5620,105.4690,105.4690,109.3750,113.2810,113.2810,113.2810,113.2810,125.0000,136.7190,148.4380,164.0620,167.9690,167.9690,171.8750,175.7810,183.5940,187.5000,187.5000,191.4060,195.3120,195.3120,234.3750,234.3750,234.3750,238.2810,261.7190,312.5000,316.4060,324.2190,417.9690,507.8120,511.7190,562.5000,664.0620,683.5940,957.0310,1023.4400,1050.7800,1070.3100,1109.3800,1484.3800,1574.2200,1593.7500,1750.0000))

xbreaks<-c(50,100,150,200,300,500,1000,2000)
ybreaks<-c(1,2,5,10,20,30,40,50,60,70,80,90,95,98,99,99.5,99.9)/100

p <- ggplot( test, aes(lat, ecdf) ) 

p<-p + 
  geom_point()+
  scale_x_log10(breaks=xbreaks, labels = comma(xbreaks))+
  scale_y_continuous(trans='probit', 
                     labels = trans_format(mult_trans()), 
                     "cumulative probability %",
                     breaks=ybreaks)+
  xlab("latency ms")
p 
```

这将返回错误： scale$labels(breaks) 中的错误：找不到函数“trans”

看起来我误解了如何正确使用变换。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T13:56:05.593

转换实际上改变了规模本身。对于您的`y`轴，您只是在格式化中断。所以你真的不想使用`trans_new`，只是一个常规的格式函数。同样，您想使用`comma_format`而不是`comma`，因为前者实际上根据需要返回一个函数：

```
mult_format <- function() {
     function(x) format(100*x,digits = 2) 
}
p <- ggplot( test, aes(lat, ecdf) ) 
p<-p + 
  geom_point()+
  scale_x_log10(breaks = xbreaks,labels = comma_format()) +
  scale_y_continuous(trans='probit', 
                     labels = mult_format(), 
                     breaks=ybreaks) + 
  xlab("latency ms")
p 
```

![在此处输入图像描述](../Images/d30c7cda030766e2960bfd748f460abe.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-22T18:51:32.877

我将 y 轴的值乘以 6，但我想将未相乘的值显示为标签，所以我最终添加了这个：

```
scale_y_continuous(breaks=seq(-100,100,2)*6,labels=seq(-100,100,2)) 
```

# python - 如何将scrapy项目（或dict /命名元组）放入postgres存储过程（函数）中，使用psycopg2执行插入

> ID：11470582
> 
> 赞同：2
> 
> 时间：2012-07-13T12:31:47.730
> 
> 标签：python, sql, postgresql, scrapy, psycopg2

我正在为数据库创建服务层，因此我正在创建函数来执行某些操作。其中一些是简单的异步插入。但是，它们有大量的参数。

我正在使用scrapy来蜘蛛数据，我使用scrapy的[`item`概念](http://doc.scrapy.org/en/0.14/topics/items.html)，它有一个类似于python dict的api。我不想参数化存储过程签名/存储过程调用构造或插入语句中的所有字段。

请注意，复合类型在开始时被声明了两次。第一个`create table`在 postgres 的语句中，第二个在 scrapy 中使用 item 接口。所以 ：

什么是使用 pyscopg2 将类似 dict 的实体放入 postgres 的最简洁方法，而无需进行参数化，同时又是未来的证明（即，没有位置参数化）。

我在想`tablename%ROWTYPE`应该声明为存储过程输入参数，但是当我创建执行查询字符串时，如何映射类似 python 的对象？我认为与[psycopg2 中的复合类型外壳有关](http://initd.org/psycopg/docs/extras.html#composite-types-casting)。但是我无法从文档中看到完整的图片。

为了争论，让我们考虑一个`CREATE TABLE( name character varying, id integer primary key)`具有相应scrapy类型的用户表，并且主ID在域中隐式地唯一。任何关于插入如何看起来像默认值和 pkey 序列化程序的评论也将有所帮助：D

我可以使用[Sql Adaption Protocol](http://packages.python.org/psycopg2/extensions.html#sql-adaptation-protocol-objects)使用通用例程对 scrapy 项目进行子类化，以将 scrapy 项目转换为 postgres 复合类型吗？这会是明智的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T15:29:43.123

Postgres wiki 有这样的说法：

> 我想向您展示的最后一项是如何使用字典插入多行。如果您有以下情况：
> 
> ```
> namedict = ({"first_name":"Joshua", "last_name":"Drake"},
>             {"first_name":"Steven", "last_name":"Foo"},
>             {"first_name":"David", "last_name":"Bar"}) 
> ```
> 
> 您可以使用以下方法轻松地在字典中插入所有三行：
> 
> ```
> cur = conn.cursor()
> cur.executemany("""INSERT INTO bar(first_name,last_name) VALUES (%(first_name)s, %(last_name)s)""", namedict) 
> ```

hstore 模块具有创建结构化行类型的功能：

```
CREATE TABLE test (col1 integer, col2 text, col3 text);

SELECT * FROM populate_record(null::test,
                              '"col1"=>"456", "col2"=>"zzz"');
 col1 | col2 | col3 
------+------+------
  456 | zzz  | 
(1 row) 
```

# .net - 由线程未处理异常引起的 .NET 运行时异常

> ID：11470585
> 
> 赞同：2
> 
> 时间：2012-07-13T12:32:01.037
> 
> 标签：.net, multithreading, runtime-error, unhandled-exception

我有一种`Async`方法可以关闭一些浏览器弹出窗口。

有时，应用程序在退出时崩溃并出现`.NET Runtime`错误（**mscorwks.dll**异常代码为**0xc0000005**）。我怀疑它`Thread`是在被迫终止时发生的，因为我看不到记录的“线程退出”行。会不会是里面的代码`ExtendedIeBrowser`抛出一个`unhandled exception`?

您可以在下面找到源代码。

```
internal void KeepAliveAsync()
{
    PageController controller = new PageController();
    controller.Initialize(siteWebBrowser);

    var thread = new Thread(() =>
    {
        _logger.Debug("Thread start - KeepAliveAsync");
        try
        {
            while (!Program.ShouldAbortBackgroundOperations())
            {
                try
                {
                    if (controller.TryCloseTimeoutWarningPopup())
                    {
                        _logger.Info("KeepAliveAsync: Closed popup successfully");
                    }

                    Thread.Sleep(5000);
                }
                catch (Exception ex)
                {
                    _logger.ErrorException("KeepAliveAsync", ex);
                }
            }
        }
        catch (Exception ex)
        {
            _logger.ErrorException("KeepAliveAsync", ex);
        }
        _logger.Debug("Thread exit - KeepAliveAsync");
    });
    thread.Name = "KeepAliveAsync";
    thread.IsBackground = true;
    thread.SetApartmentState(ApartmentState.STA);
    thread.Start();
} 
```

使用`PageController`这个类：

```
public class ExtendedIeBrowser : IE
{
    private IntPtr hwnd;
    private static Logger _logger = LogManager.GetCurrentClassLogger();

    public ExtendedIeBrowser(WebBrowser webBrowserControl) : base(webBrowserControl.ActiveXInstance, false)
    {
    }

    public void Initialize(WebBrowser webBrowserControl)
    {
        hwnd = webBrowserControl.FindForm().Handle;

        // Start the dialog watcher or else the browser won't be able to attach the handler.
        StartDialogWatcher();
    }
    public override IntPtr hWnd
    {
        get
        {
            return hwnd;
        }
    }

    protected override void Dispose(bool disposing)
    {
        hwnd = IntPtr.Zero;
        base.Dispose(disposing);
    }
} 
```

这是：

```
 internal static bool ShouldAbortBackgroundOperations()
    {
        bool should = true;

        try
        {
            should &= Application.OpenForms.Cast<Form>().Count(f => f.ShowInTaskbar) == 0; // at least one form is shown in the taskbar
        }
        catch (Exception ex)
        {
            _logger.ErrorException("ShouldAbortBackgroundOperations", ex);
            should = false;
        }

        return should;
    } 
```

关闭弹出窗口的方法（字面意思是网页内的 div）：

```
 internal bool TryCloseTimeoutWarningPopup()
    {
        bool success = false;
        try
        {
            Div glassPane = Browser.Div(Find.ByClass(PageConstants.ModalGlassPaneClass));
            if (glassPane.Exists) // there is a popup
            {
                Div parent = (Div)glassPane.Parent;
                if (parent.InnerHtml.Contains(PageConstants.WarningLoggingOutPrimaryKeyword)) // correct content on popup
                {
                    WatiN.Core.Button button = parent.Divs[0].Buttons[0];
                    ClickOnElement(button);
                    success = true;
                }
            }
        }
        catch (Exception ex)
        {
            _logger.ErrorException("CloseTimeoutWarningPopup", ex);
            throw;
        }
        return success;
    } 
```

如果程序在 Abort 检查和 CloseTimeoutWarningPopup() 执行后关闭怎么办？我注意到在我关闭应用程序后的某个时间点，该`if (glassPane)`行正在等待元素出现并尝试访问已处置的对象。是否该对象的内存地址不再可用并因此被拒绝？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:58:06.600

问题是一些`controller`试图访问的控件在线程终止之前被释放，导致**访问冲突异常**。

# actionscript-3 - 想要动画

> ID：11470591
> 
> 赞同：0
> 
> 时间：2012-07-13T12:32:27.260
> 
> 标签：actionscript-3, apache-flex, air, flex4.5, flash-builder4.5

我的项目基于 Adob​​e AIR/Actionscript Project，它是一个小型桌面应用程序。`PopupManager`我使用Class打开了一个弹出窗口。所以这里是代码。

```
var _dataviewPopup = new dataviewPopup();
/*  PopUpManager.addPopUp(_dataviewPopup , FlexGlobals.topLevelApplication as DisplayObject, true);
PopUpManager.centerPopUp(_dataviewPopup); 
```

我使用删除弹出窗口

```
PopupManager.removePopUp(_dataviewPopup); 
```

所以我想在这个弹出窗口出现和消失时给它一些动画，有可能吗？有没有可用的图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:14:25.833

查看本教程，了解如何使用 NativeWindow 类为新窗口设置动画。希望对 [http://blog.flashdesign-store.com/?p=128 有所帮助](http://blog.flashdesign-store.com/?p=128)

# java - 如何获取jtree中根节点的所有子节点？

> ID：11470594
> 
> 赞同：9
> 
> 时间：2012-07-13T12:32:43.570
> 
> 标签：java, swing, jtree

我想获取根节点的所有子节点。

前任：

```
Root
   child1
      child1.child1
   child2
      child2.child1 
```

现在我想得到两个名为“child1”和“child2”的子节点。

怎么做？有没有可能？

请帮助我，提前谢谢..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-13T12:40:43.417

获取树的根：

```
 tree.getModel().getRoot(); 
```

然后获取此根节点的子节点数：

```
 tree.getModel().getChildCount(rootNode) 
```

然后从 0 到孩子的数量并调用

```
tree.getModel().getChild(rootNode, i) 
```

获取根节点的子节点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T12:42:50.400

如果你的元素实现了`TreeNode`接口，你可以使用可用的方法：

*   [`TreeNode#children`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeNode.html#children%28%29)
*   [`TreeNode#getChildAt`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeNode.html#getChildAt%28int%29)
*   [`TreeNode#getChildCount`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeNode.html#getChildCount%28%29)

否则，您可以直接查询`TreeModel`. 见

*   [`TreeModel#getRoot`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeModel.html#getRoot%28%29)
*   [`TreeModel#getChild`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeModel.html#getChild%28java.lang.Object,%20int%29)

方法

# c# - RowEditEnding 之前的新值

> ID：11470596
> 
> 赞同：0
> 
> 时间：2012-07-13T12:32:47.710
> 
> 标签：c#, wpf

我使用`RowEditEnding`事件，但是这段代码

```
DataRowView rowView = dataGrid1.SelectedValue as DataRowView;
MessageBox.Show(Convert.ToString(rowView[7])); 
```

退还我失去的价值，我怎样才能获得新的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:05:55.057

从你的活动中，这会带你去任何地方吗？

```
System.Data.DataRow modifiedRow = (e.Item as DataRowView).Row;
MessageBox.Show(Convert.ToString(modifiedRow )); 
```

# javascript - 与日期相关的 jQuery 价格倒计时

> ID：11470599
> 
> 赞同：0
> 
> 时间：2012-07-13T12:32:57.220
> 
> 标签：javascript, jquery, countdown

可悲的是，我不是 jQuery/JavaScript 大师，我被一个问题难住了。

简而言之，在两个日期之间，一些固定项目的价格会按分钟下降。

例如：

```
2012 07 25 - $1500 -> 2012 08 01 - $1000 
```

而我的问题是我什至不知道从哪里开始让它成为一个实时倒计时。只需要显示价格。任何帮助、指示、替代方案都会有很大帮助。

感谢回复，我能够创建一个解决方案。遗憾的是，Esailija 提供的纯 JS 版本不想工作，但基于此，我能够为此创建一个 php/ajax 解决方案。是的，我知道这会给服务器带来压力，但是 JS 版本显示了一组全新的未在范围内定义的数字，但是具有相同公式的 php 产生了有效的结果。您可以在下面找到完整的 php 代码。

```
<?php

$dateStart = strtotime("16 july 2012 00:00");
$dateEnd = strtotime("18 july 2012 9:30");
$curDate = strtotime("now");

$startPrice = 3628000;
$endPrice = 3499000;

$progress = ($curDate - $dateStart) / ($dateEnd - $dateStart);

$curPrice = $startPrice - ($startPrice-$endPrice) * $progress;

$curPrice = round($curPrice);

if ($dateStart > $curDate) {
   echo $startPrice;
} elseif ($curDate >= $dateEnd) {
   echo $endPrice;
} else {
   echo $curPrice;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:47:59.663

得到这样的价格：

```
function getPrice() {
    var startDate = Date.UTC(2012,06,25,0,0,0,0),
        endDate = Date.UTC(2012,07,01,0,0,0,0),
        startPrice = 1500,
        endPrice = 1000,
        rightNow = +new Date,
        progress,
        price;

    progress = ( rightNow - startDate ) / ( endDate - startDate );

    if( progress < 0 ) {
        price = startPrice;
    }
    else if( progress >= 1) {
        price = endPrice;
    }
    else {
        price = startPrice - Math.abs(startPrice-endPrice) * progress;
    }
} 
```

如果 right now 小于 startDate，则价格为 1500。
如果 right now 大于 endDate，则价格为 1000
如果 right now 介于两者之间，则计算

演示：http: [//jsfiddle.net/5v4yh/1/](http://jsfiddle.net/5v4yh/1/)

Demo使用`2012 07 10 - $1500 -> 2012 07 15 $1000`所以处于计算阶段

# mysql - mysql 从两个表中加入查询结果

> ID：11470602
> 
> 赞同：3
> 
> 时间：2012-07-13T12:33:12.830
> 
> 标签：mysql, join

我有两个表一个来存储问题和其他存储对问题的答复如下

我在表中显示了表结构和列，如下所示

**问题表**

```
Question_Id(PK) | 问题 | 姓名 | 电子邮件地址

```

**答案表**

```
Answer_Id | Question_Id | 问题 | 姓名 | 电子邮件地址               

```

发布的任何问题都将添加到问题表中，人们发布的任何回复都将添加到答案表中

现在，当有人发布对问题的回复时，我应该向发布问题的人和发布对问题的回复的人发送邮件

请为上述建议一个mysql查询

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:37:01.400

理论上，您应该在应用程序中知道某人正在回复的问题 (qid) 的 ID。基于此 ID，您可以发出以下查询：

```
Select EmailAddress from Question where Question_Id=qid
Union
Select EmailAddress from answer where Question_id=qid 
```

根据您的应用程序的逻辑，这也可能会选择当前用户的地址。如果您想避免这种情况，您应该在两个选择语句中都包含一个排除当前回复者的条件。就像是：

```
Select EmailAddress from Question where Question_Id=qid and EmailAddress!=curentUserAddress
Union
Select EmailAddress from answer where Question_id=qid and EmailAddress!=curentUserAddress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:21:37.893

```
Select * 
from questions 
left join answers 
on questions.id = answers.question_id 
where question_id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T14:15:00.153

```
select * from Question q, Answer a 
where q.Question_Id = a.Question_id and
      q.Question_Id = question_id 
```

# spring-mvc - Spring Roo 和 Spring MVC 的意外日期转换失败

> ID：11470604
> 
> 赞同：0
> 
> 时间：2012-07-13T12:33:18.093
> 
> 标签：spring-mvc, spring-roo

我将 Spring MVC 与 Spring Roo 一起使用，并且我已将 JPA finder 添加到我的一个实体中。我还有@RooWebScaffold 和@RooWebFinder 注释，如下所示：

```
@RooWebScaffold(path = "plis", formBackingObject = Pli.class)
@RooWebFinder 
```

我的一个 JPA 查找器使用 java.util.Date，当我运行 @RooWebFinder 时，我在控制台中系统地收到以下异常，我被重定向到 404：

```
2012-07-13 14:13:31,515 ["http-bio-8131"-exec-16] DEBUG org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver - Resolving exception from handler [public java.lang.String trc.suivi.controller.PliController.findPlisByIdentifiantLikeAndDateReceptionBetweenAndPaiementAndARAndNumeroARLikeAndFDVAndConteneurNumAndStatut(java.lang.String,java.util.Date,java.util.Date,java.lang.Boolean,java.lang.Boolean,java.lang.String,java.lang.Boolean,trc.suivi.domain.ConteneurNum,trc.suivi.domain.StatutPli,org.springframework.ui.Model)]: org.springframework.beans.TypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.util.Date'; nested exception is org.springframework.core.convert.ConversionFailedException: Failed to convert from type java.lang.String to type @org.springframework.web.bind.annotation.RequestParam @org.springframework.format.annotation.DateTimeFormat java.util.Date for value '2012-07-04'; nested exception is java.lang.IllegalArgumentException: Invalid format: "2012-07-04" is malformed at "12-07-04" 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:36:52.840

看起来您指定的日期格式不正确：格式无效：“2012-07-04”在“12-07-04”处格式错误

实体对象中字段的日期格式是什么？

可以试试两年的日期。

# c++ - 从 Gtk::TreeStore 删除图像的整洁方法

> ID：11470607
> 
> 赞同：0
> 
> 时间：2012-07-13T12:33:21.433
> 
> 标签：c++, gtk, gtktreeview

我有一个带有 Gtk::TreeView 的对话框窗口。这个 dialod 显示主文件系统树并提供选择磁盘上的文件夹的选项。当用户选择某个文件夹时，我将 Gtk::Stock 图像添加到代表该文件夹的行中。

为此，我创建了一个与树的最后一列关联的 Gtk::CellRendererPixbuf：

```
//appending columns
directory_tree.append_column("Folder List", dir_columns.name);
Gtk::TreeViewColumn *column = directory_tree.get_column(0);
if(column) column->set_expand(true);
Gtk::CellRendererPixbuf *cell = Gtk::manage(new Gtk::CellRendererPixbuf);
directory_tree.append_column("", *cell);
column = directory_tree.get_column(1);
if(column) column->add_attribute(cell->property_stock_id(), dir_columns.stock_id); 
```

链接到这段代码：[https ://github.com/mc-suchecki/Imagine/blob/master/gui/dialogs.cpp#L47](https://github.com/mc-suchecki/Imagine/blob/master/gui/dialogs.cpp#L47)

Gtk::CellRendererPixbuf 将在 'dir_columns.stock_id' 中找到的 Gtk::StockId “翻译”为位于树中的图像。当我像这样将图像添加到行时：

```
//selecting folder
(*folder)[fs_columns.stock_id] = Gtk::StockID(Gtk::Stock::FIND).get_string();
(*folder)[fs_columns.included] = true; 
```

一切都很好，但是当我尝试以这种方式删除图像时：

```
//unselecting folder
(*folder)[fs_columns.stock_id] = "";
(*folder)[fs_columns.included] = false; 
```

图像正确地消失了，但是这样的命令行中有一些错误（这不是确切的消息，我会在能够启动我的应用程序时发布它）：

```
(imagine:9376): Gtk-WARNING **: Gtk StockId not found 
```

当然警告的原因是显而易见的（没有与空白名称关联的 StockId 项），但是我的问题是：有没有办法从 Gtk::TreeView 行中删除不会生成任何 Gtk 警告的图像？

我取消选择文件夹的代码在这里： [https ://github.com/mc-suchecki/Imagine/blob/master/core/core.cpp#L207](https://github.com/mc-suchecki/Imagine/blob/master/core/core.cpp#L207)

非常感谢您，对我的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:37:17.640

`visible`如果要删除图像而不是属性，请将属性更改为 false `stock-id`。

# apache - 在自定义 php 站点上获取有效的 mod_rewrite 和 .htaccess

> ID：11470609
> 
> 赞同：0
> 
> 时间：2012-07-13T12:33:26.480
> 
> 标签：apache, .htaccess, url-rewriting

我只需要将此 URL`www.mysite.com/index.php?url=othersite.com`重写为`www.mysite.com/othersite.com`

我写了这个`.htaccess`

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?url=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ index.php?url=$1 
```

还将该代码添加到`.htaccess`文件中并与文件一起上传到站点根`index.php`目录，但无论如何，我总是得到`www.mysite.com/index.php?url=othersite.com`

非常感谢指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:02:17.537

嗯，就这样解决了。形式

```
<form method="post" name="downform" action="" onsubmit="return formSubmit()"> 
```

JS

```
function formSubmit() {
  domain = document.getElementById('domain_input').value;
  window.location = '/' + domain;
  return false;
} 
```

.htaccess

```
Options +FollowSymlinks
RewriteBase /
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_.-]+)$ index.php?domain=$1
RewriteRule ^([a-zA-Z0-9_.-]+)/$ index.php?domain=$1

<files .htaccess>
    order allow,deny
    deny from all
</files> 
```

PHP（只是为了看结果）

```
if($_SERVER['REQUEST_URI']!='/')
    echo trim($_SERVER['REQUEST_URI'],'/'); 
```

# node.js - MongoDB按字段返回所有文档而没有重复？

> ID：11470614
> 
> 赞同：2
> 
> 时间：2012-07-13T12:33:41.250
> 
> 标签：node.js, mongodb, mongo-shell

在mongo shell中有什么方法可以返回集合中的所有文档，但是按特定字段对它们进行排序并删除与其他文档具有相同字段的任何文档？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T13:13:07.437

对于排序，我会使用[sort](http://www.mongodb.org/display/DOCS/Sorting+and+Natural+Order)。删除具有相同值的文档：[distict](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)。

就像是：

```
db.collection.find().sort({field : 1}).distinct('field') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-05T15:41:14.357

您可以聚合使用组。

```
db.usersProject.aggregate([

{
   $group:
    {
      _id: { projectId: "$projectId" },
      dups: { $addToSet: "$_id" },
      count: { $sum:1 }
   }
 },
 {
   $match:
     {
       count: {"$gt": 1}
     }
 }
]); 
```

请关注[这篇](https://weknowinc.com/blog/how-remove-duplicates-mongodb)文章以供参考

# asp.net-mvc - 如何将动态对象从视图传递到控制器

> ID：11470615
> 
> 赞同：0
> 
> 时间：2012-07-13T12:33:48.283
> 
> 标签：asp.net-mvc, forms

我需要一个带有一些动态输入字段的局部视图。为此，我的模型包含一个“object”类型的对象，然后在我的控制器中创建一个具有相关对象类型“myobject”的新模型。

在 PartialViewResult 中一切正常，但在表单提交后，对象不包含我的对象类型“myobject”。

如何发送表单提交正确的对象？

控制器：

```
public PartialViewResult mypage()
{
myModel model = new myModel();
myObject obj = new myObject();
model.myobject = obj;

return PartialView(“mypage”,model);
}

public PartialViewResult Save (myModel model)
{
    // Here I need model.myobject!!!
} 
```

模型：

```
public class myModel
{
    public long id {get;set;}
    public object myobject {get;set;}
}

public myObject
{
    public string myname {get;set;}
} 
```

看法：

```
@model myModel
// form (code omitted)
@Html.EditorFor(model => model.myobject)

<button type="submit">Save</button> 
```

模板

```
@model myObject

@Html.EditorFor(model => model.myname) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:36:15.740

对象本身不会有任何属性 - 您需要将其转换为包含所需属性的类型。

如果您因为想为不同的 myobject 类型重用视图而不能这样做，那么您将需要使用接口和一些通常命名的属性。

另一种方法是使用属性包，即字典，并通过视图中的键名引用值。

然后，您可以在模型上定义一个属性：

```
 public Dictionary<string, string> MyItems {get;set;} 
```

并在您的页面中引用它们：

```
 model.MyItems["keyName"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:40:02.200

您必须转换返回的对象。是这样的：

```
MyObject myObject = (MyObject) objectReturned; 
```

# blackberry - 纹波模拟器在启动时冻结

> ID：11470618
> 
> 赞同：1
> 
> 时间：2012-07-13T12:33:52.260
> 
> 标签：blackberry, ripple

我一直在使用 Ripple (v0.9xx) 使用 Webworks SDK (v 2.3.xx) 开发 Blackberry 应用程序，但就在不久前，Ripple 已停止工作，仅在我尝试加载它时冻结。如果我卸载并重新安装，它会成功启动，但当我尝试将应用程序加载到模拟器时会崩溃。之后，它只会在我启动它时再次冻结。这种情况一直持续到我决定卸载并重新安装，然后循环再次开始。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T19:03:39.120

我假设您使用的是 Ripple 的独立版本。我们还没有切换回性能和稳定性显着提高的 Chrome 扩展模型。您可以从这里下载最新版本：

[https://developer.blackberry.com/html5/download/ripple](https://developer.blackberry.com/html5/download/ripple)

从那时起，Ripple 应该会为未来的版本自动更新。

# plugins - 在 QtWebkit 的演示浏览器中未检测到 Npapi 插件

> ID：11470621
> 
> 赞同：0
> 
> 时间：2012-07-13T12:33:53.267
> 
> 标签：plugins, npapi, qtwebkit

我也是 StackOverflow 和 QtWebkit 的新手。

我编写了一个非常基本的 Npapi 插件，它具有Mimetype`NP_GetMimeTypeDescription`和Mimetype description之类的功能。`Np_Initialise``application/basic-plugin``application/basic-plugin:bsc:Plug-ins SDK sample`

但是我在 QtWebKit 的演示浏览器和 Mozilla Firefox 上加载它时遇到了问题。我已将生成的 .so 文件放置在浏览器找到插件之类的`/usr/lib/mozilla/plugins/`路径和 Qt Lib 路径中。

我有一个包含 Mimetype 的 test.html 文件`application/basic-plugin`。我正在尝试在 Mozilla 浏览器和 QtWebKit 演示浏览器中启动这个插件但是在这两种情况下它都没有启动插件。

我无法找出原因。欢迎任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:25:10.213

感谢您的帮助和建议。
即使我将 .so 文件放在正确的文件夹 /usr/lib/mozilla/plugins/ 和 Qt Lib 路径中，我也能够找出为什么我的插件没有被调用的问题。

有2个原因...

1.  必须在编译期间启用定义 XP_UNIX (-DXP_UNIX) 作为编译器指令。这将考虑功能的不同原型以及实现

    ```
    extern "C"
    NPError OSCALL NP_Initialize(NPNetscapeFuncs *browserFuncs
    #ifdef XP_UNIX
                              , NPPluginFuncs *pluginFuncs
    #endif
                              )
    {
            // keep a pointer to the browser functions
            g_browser = browserFuncs;

            // any memory that is to be shared by all instances of 
            the browser plugin should be initialized here.
            ;

    #ifdef XP_UNIX
           // under Linux, as the browser won't call NP_GetEntryPoints() 
            explicitly, do it now to fill in <pluginFuncs>

            return NP_GetEntryPoints(pluginFuncs);
    #else

            return NPERR_NO_ERROR;
    #endif
    } 
    ```

和

```
 extern "C"
    #ifdef XP_UNIX
    NPError NP_GetValue(void* instance, NPPVariable variable, void *value)
    #else
    NPError NP_GetValue(NPP instance, NPPVariable variable, void *value)
    #endif 
```

2.. 有 2 个函数 NP_GetValue 和 NPP_GetValue。

```
extern "C"
NPError NP_GetValue(void* instance, NPPVariable variable, void *value); 
```

和

```
NPError NPP_GetValue(NPP instance, NPPVariable variable, void *ret_value); 
```

NPP_GetValue 是一个插件函数，其注册应在 NP_GetEntryPoints 中进行

```
 extern "C"
    NPError OSCALL NP_GetEntryPoints(NPPluginFuncs* NPPluginFuncsptr)
    {
            ......
            NPPluginFuncsptr->newp = NPP_New;
            NPPluginFuncsptr->getvalue = NPP_GetValue;
            NPPluginFuncsptr->setvalue = NPP_SetValue;
            return NPERR_NO_ERROR;
    } 
```

在我的代码中，仅实现了 NP_GetValue 而未实现 NPP_GetValue。所以 NPP_GetValue 在 .so 中未定义，因此 .so 没有加载。

在实现函数 NPP_GetValue 时，该函数被定义并导出到 .so 文件中，并且能够成功加载它。

从浏览器到插件的函数调用顺序如下...

1.  NP_Initialize -> 浏览器首先调用初始化函数。（在 Linux 的情况下，应通过显式调用 NP_GetEntryPoints 导出插件函数集，因为浏览器不会调用 GetEntryPoints）

2.  NP_GetEntryPoints -> 从 NP_Initialize for Linux 显式调用以公开/导出插件函数。

3.  NP_GetValue 变量：1 -> 从浏览器调用以获取插件名称 (NPPVpluginNameString)

4.  NP_GetValue 变量：2 -> 从浏览器调用以获取插件描述 (NPPVpluginDescriptionString)

5.  NP_GetMimeDescription -> 从浏览器调用以获取 MimeType 描述（此函数应返回 Mime 类型描述，例如：return("application/basic-plugin:bsc:Plug-ins SDK sample");)

6.  NPP_New -> 从浏览器调用以创建插件实例。

7.  NPP_GetValue PLUGIN:main.cpp,NPP_GetValue,446ENTRY - > 从浏览器调用以获取插件特定数据...

8.  ……

请注意，如果且仅当前一个函数调用返回成功时，才会调用上述序列中的下一个函数。:-)

# maven - 禁用万无一失并执行故障安全报告以在 Maven 项目中运行我的测试用例

> ID：11470622
> 
> 赞同：1
> 
> 时间：2012-07-13T12:33:55.607
> 
> 标签：maven, maven-failsafe-plugin

在我的父 POM 中，我已经配置了确定的火灾报告。但是在某些模块中，我需要跳过确定的火灾报告生成，而是我想运行故障安全插件来生成测试报告。

我试过像

```
<properties>
    <skipTests>true</skipTests>
    <skipFailsafeTests>false</skipFailsafeTests>
</properties>

      <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-failsafe-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <skipTests>${skipFailsafeTests}</skipTests>
            </configuration>
       </plugin>
       <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>

            <skipExec>${skipTests}</skipExec>
            <skipTests>${skipTests}</skipTests>
            </configuration>
       </plugin> 
```

但似乎确凿的报告仍在运行。有什么办法可以克服吗？

# android - 如何确保运行刚刚安装的代码？

> ID：11470623
> 
> 赞同：0
> 
> 时间：2012-07-13T12:34:16.277
> 
> 标签：android

在 Android 上开发，经常会发生以下情况：

*   我导出了我的应用程序的发布版本，将其安装在设备上并运行它。
*   我做了一些改变。我再次导出
*   我在设备上重新安装它
*   我从任务管理器中杀死一切
*   我再次运行安装

所以我希望新安装的应用程序版本能够运行。但相反，我仍在运行旧代码。我可以肯定地说出来，因为我添加了一些 Log.d() 跟踪并且它们没有出现在日志中。

所以，我猜旧版本的类仍然在内存中的某个地方，而新的类直到............直到某些东西才被加载。

那么我必须做什么（除了重启，请）以确保在运行应用程序时运行新安装的应用程序？

杀死应用程序还不够吗？

由于几个原因，我不想在重新安装之前卸载它。或者这是唯一的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T08:57:06.530

我的建议是将其保持在调试模式。

如果您正在交换，那么是的，您需要继续卸载。

从我看到的情况来看，Debug版本和release版本是一模一样的，我只是把release版本放在最后确保一切正常，然后才真正发布。

卸载应用程序，然后重新安装应该 100% 运行新代码。由于取消关联 - 不同的签名（出于您需要先卸载的确切原因），即使是存储的应用程序数据之类的东西也会丢失。

您可以随时尝试增加版本号，看看是否安装在顶部，而无需卸载。我没有测试过的东西，但会非常有用。

确保您正在成功构建它。并确保您使用的是正确的 APK，也就是不是旧的。（我在构建时覆盖了我的旧 APK）。只要它成功，你就会有新的代码。也许您的构建失败，因此您错误地使用了未更新的 APK。

不过，我仍然推荐调试模式。它使测试部署更有效，我没有注意到任何区别。

希望有些帮助。

# symfony - 教义迁移，使用自定义教义类型的问题

> ID：11470630
> 
> 赞同：6
> 
> 时间：2012-07-13T12:34:56.790
> 
> 标签：symfony, doctrine-orm, migration

我正在使用 Symfony2 + Doctrine2 构建一个应用程序。我的应用程序需要存储地理空间数据，所以我编写了适当的学说扩展。一切运行良好，该应用程序已经在生产环境中运行了很长时间。

现在我必须添加一些新功能，并且我需要在不删除所有数据的情况下更新数据库。我想使用 DoctrineMigrationBundle 但是当我运行时：

```
$ php app/console doctrine:migrations:status 
```

我收到了这个错误：

```
[Doctrine\DBAL\DBALException]                                                                     
  Unknown database type point requested,
  Doctrine\DBAL\Platforms\MySqlPlatform may not
  support it. 
```

这是我的 config.yml 的相关部分：

```
# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8
        types:
          point: App\EngineBundle\DoctrineExtensions\PointType 
```

自定义类型“点”已被映射，那么我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T14:18:52.787

我回答了我自己的问题，看来问题是 DoctrineMigrations 还需要自定义类型的映射。所以 config.yml 应该是这样的：

```
# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8
        types:
          point: App\EngineBundle\DoctrineExtensions\PointType 
        mapping_types:
          point: point 
```

# windows - Windows ping 超时参数似乎不起作用

> ID：11470633
> 
> 赞同：4
> 
> 时间：2012-07-13T12:34:59.470
> 
> 标签：windows, timeout, ping

如果我在我的 Windows XP（也是 Windows 7）框的命令提示符下执行“ping -w 5 google.com”，我会成功返回所有数据包，但所有数据包的行程时间都超过 5 毫秒。我是否误解了 -w 标志应该如何工作？

谢谢，艾尔。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-12-08T13:27:12.997

以下[文档](https://msdn.microsoft.com/en-us/library/dcc2xffs(v=vs.110).aspx)指出：

> 当为超时指定非常小的数字时，即使超时毫秒已经过去，也可以收到 Ping 回复。

经过一些测试，这似乎可以解释您的问题。我已经测试了 pinging example.com，我的回复时间在 70-85 毫秒之间。将超时设置为 80 毫秒时，有些 ping 会失败，有些则不会。因此，低于 80 毫秒的某个地方开始“非常小”。

# java - Java线程垃圾回收

> ID：11470637
> 
> 赞同：6
> 
> 时间：2012-07-13T12:35:24.477
> 
> 标签：java, multithreading, garbage-collection

`run()`当线程内的方法完成或调用它的函数完成时，是否会收集线程垃圾？

我没有问题或任何东西，但我想避免内存泄漏等。

对于喜欢代码的人：

```
public void SomeClass {
    public SomeClass() {

    }

    public void someMethod() {
        Object data = veryBigObject;

        while(true) {
            MyThread thread = new MyThread(veryBigObject);
            thread.run();

            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) { /* do nothing */ }
        }
    }

    public static void main(String[] args) {
        SomeClass myclass = SomeClass();
        myclass.someMethod();
    }
}

public class MyThread extends Thread {
    private Object data;

    public Thread(Object data) {
        this.data = data;
    }

    public void run() {
        // do stuff with data
    }
} 
```

在我知道的所有语言中，当方法结束时会收集垃圾（如果该语言有的话）。我认为Java也是如此。这意味着理论上我创建的线程`someMethod()`直到`someMethod()`结束才会被收集。如果我们假设 while 循环运行很长时间，应用程序将耗尽内存并崩溃。

我的问题：这是真的吗？如果是这样，应该怎么做才能避免呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T12:40:31.687

首先，Java GC 是非确定性的。当对象不再被引用时，适合在下次 GC 运行时被收集，但**不是强制**的。甚至调用`System.gc()`只是对 GC 系统的一个建议。

其次，重要的是引用。在循环的每个实例中，您都会覆盖对线程对象的引用。如果线程已经完成，则无需退出方法来收集它们（当然，在线程运行时它们不会被收集，即使您的代码没有引用它）。退出创建对象的方法的问题不相关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T12:40:24.650

GC 在需要时运行（例如，当您尝试分配内存并且伊甸园空间已满时）

这可能发生在您分配内存的任何代码行（在任何线程中）这意味着即使您不在一个线程中分配内存，GC 仍然可能发生，因为内存是在另一个线程中分配的。

您还可以显式触发 GC 或使用诸如 visualvm 之类的 JMX 工具。

简而言之：GC 可以随时发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:53:39.283

在另一个循环迭代开始后，MyThread 的每个实例都将被标记为由 GC 收集。如果您想将 MyThread 作为线程运行，您需要使用 start() 方法！

在您使用 start() 方法的情况下，MyThread 将在另一个循环迭代开始后立即被标记为由 GC 收集，并且！run() 方法的结束。

但是对于 GC 何时收集它并没有任何保证。这是 GC 特有的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:46:20.553

允许它在**完成工作并且不使用更多数据之后**在线程上被调用，但不是什么时候，因为垃圾收集器是由虚拟机定期自动调用或在某些事件发生时调用的。

因此，从线程终止且数据未使用时起，您无法知道数据是否已自动收集。

您也可以使用以下命令显式调用它：`System.gc()`。

如果您的线程被终止并且他的指向数据没有被更多使用，那么在显式调用之后它被授予它已被收集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:07:36.163

在您上面发布的代码中，实际上没有并行执行线程。要生成一个新线程，您需要调用`.start()`内部调用`.run()`线程方法的方法。现在，一切都在按顺序运行。所以你的 thread.run() 将完成它的执行，你当前的线程将休眠，你`while`将继续它的循环并一遍又一遍地执行它。

GC 可以在任何时候命中，并且正如其他人所说，正在运行的线程（**开始的线程`start()`**）只有在它们完成执行后才会被 GC。

# ruby-on-rails - 为什么字符串替换会修改原始变量值？

> ID：11470640
> 
> 赞同：5
> 
> 时间：2012-07-13T12:35:27.660
> 
> 标签：ruby-on-rails, ruby, string

9.3 我的行为很奇怪，我不明白为什么：

```
s = self.shopify_p
s.title
=> "Disco (Wholesale)" 
```

现在我想要一个包含 s.title 内容的新变量，没有“（批发）”部分。所以我做了以下事情：

```
original_title = s.title
=> "Disco (Wholesale)" 
original_title[" (Wholesale)"] = ""
=> "" 
```

现在，如果我这样做：

```
original_title
=> "Disco" 
```

没关系，但奇怪的是，最后一个字符串替换似乎甚至影响了原始的 s 变量：

```
s.title
=> "Disco" 
```

我真的无法理解……你能告诉我这里发生了什么吗？

s.title 仍然应该是“Disco (Wholesale)”...或者不是？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T12:39:35.817

这是相同的，因为您访问的是同一个对象。

```
irb(main):006:0> x = "aaaa"
=> "aaaa"
irb(main):007:0> y = x 
=> "aaaa"
irb(main):008:0> x.object_id 
=> 70358166435920
irb(main):009:0> y.object_id
=> 70358166435920
irb(main):010:0> 
```

你可以做的是

```
original_title = s.title.gsub(" (Wholesale)","") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T12:42:58.883

在`original_title = s.title`两者之后`original_title`并`s.title`引用同一个对象。

要实际*复制*字符串，请使用[`Object#dup`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-dup)：

```
original_title = s.title.dup 
```

> **重复 → an_object**
> 
> 生成*obj*的浅拷贝……</p>

或[`String.new`](http://ruby-doc.org/core-1.9.3/String.html#method-c-new)：

```
original_title = String.new(s.title) 
```

> **新的(str="") → 新的_str**
> 
> 返回一个包含*str*副本的新字符串对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T12:51:45.900

ruby 中的变量默认引用它们指向的对象，而不是复制它们。因此，如果您更改基础对象，任何更改都将显示在包含对该对象的引用的任何变量中。

如果 a、b、c 和 d 都指向同一个对象，则对任何对象的更改都将“更改”（通过它们可见）。

```
 a  b  c
   \ | /
   Object
     |
     d 
```

如果您想保留原始值，则需要以某种方式创建一个新变量。

```
irb(main):001:0> a = "Foo"
=> "Foo"
irb(main):002:0> b = a
=> "Foo"
irb(main):003:0> a << " Bar"
=> "Foo Bar"
irb(main):004:0> b
=> "Foo Bar"
irb(main):005:0> a
=> "Foo Bar"
irb(main):006:0> a += " Baz"
=> "Foo Bar Baz"
irb(main):007:0> a
=> "Foo Bar Baz"
irb(main):008:0> b
=> "Foo Bar" 
```

对于您的情况，@wlad 的 gsub（请注意，他没有使用 gsub！）建议似乎是一个不错的建议。

```
original_title = s.title.gsub(" (Wholesale)","") 
```

# .htaccess - 防止子域上的 htaccess 301 重定向

> ID：11470643
> 
> 赞同：0
> 
> 时间：2012-07-13T12:35:44.430
> 
> 标签：.htaccess, redirect

我有 301 重定向，将 /index.html 定向到 /site 文件夹，当我创建子域时，它还将链接重定向到 /site，导致 404 Not Found

例如：members.mysite.com 重定向到 members.mysite/site 导致 404 错误我可以为特定的 forlder 或其他内容添加执行而不更改重定向。

**.htaccess 内容**

```
AddType text/x-server-parsed-html .htm .html
RedirectMatch 301  ^/index.html(.*)$ /site$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:24:18.497

您可以使用 mod_rewrite 来检查主机：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^your-main.domain.com$ [NC]
RewriteRule ^index.html(.*)$ /site$1 [R=301,L] 
```

查看[`RewriteCond`文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)以更好地描述其功能。您可以定制正则表达式 ( `^your-main.domain.com$`) 以更符合您的需求，例如`(www\.)?`在前面添加一个来处理可选的“www”。

# jquery - 滚动效果淡入淡出

> ID：11470651
> 
> 赞同：5
> 
> 时间：2012-07-13T12:36:17.063
> 
> 标签：jquery, fade, fadeout

我添加了一个我在这里找到的脚本。这是一种享受。但是，在尝试对其应用淡入淡出效果时，我遇到了困难。此刻它只是切断了。

```
script type="text/javascript">

    $(document).ready(function() {

        $(window).scroll(function () {
              var height = $('body').height();
              var scrollTop = $('body').scrollTop();
              var opacity = 1;

              if(scrollTop > 400) {
                  opacity = 0;
              }

           $('.social').css('opacity', opacity);
        });
    });
</script> 
```

编辑：我把它绑起来了，它有效。非常感谢各位：

```
<script type="text/javascript"> 
$(window).scroll(function() { 
// The social div 
var $socialDiv = $('.social'); 

//Get scroll position of window 
var windowScroll = $(this).scrollTop(); 

//Slow scroll of social div and fade it out 
$socialDiv.css({ 
'margin-top' : - (windowScroll / 3) + "px", 
'opacity' : 1 - (windowScroll / 550) 
}); 
}); 
</script>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:42:05.993

您应该使用[.animate()](http://api.jquery.com/animate/)或[.fadeTo()](http://api.jquery.com/fadeTo/)来实现该效果。

使用`.css('opacity', opacity);`会使你的元素突然消失。

# php - 我可以在php中自由设置成员吗？

> ID：11470655
> 
> 赞同：2
> 
> 时间：2012-07-13T12:36:29.773
> 
> 标签：php, arrays, class, object

我可以自由地将某些东西分配给 php 中不存在或不存在的成员吗？成员名称和关联数组索引之间有什么区别吗？

我之间有什么区别

```
$a = array();
$a['foo'] = 'something'; 
```

和

```
 $a->foo = 'something'; 
```

如果有区别，那么如何创建“空”对象并动态添加成员？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T12:43:03.840

您正在混合[数组](http://php.net/array)（数据包/容器）和[对象](http://php.net/oop)（具有语义和功能的数据包装）。

## 数组访问

第一个是正确的，因为您使用的 Array在其他语言中的行为类似于[HashTable](http://en.wikipedia.org/wiki/Hash_table)或[Dictionary 。](http://en.wikipedia.org/wiki/Associative_array)

```
$a = array();               // create an empty "box"
$a['foo'] = 'something';    // add something to this array 
```

## 对象访问

第二个是对象访问。你会使用这样的东西：

```
class Foo {
    public $foo;
}

$a = new Foo();
$a->foo = 'something'; 
```

尽管在这种情况下更好的用法是使用这样的 setter/getter 方法。

```
class Foo {
    private $foo;
    public function setFoo($value) {
        $this->foo = $value;
    }
    public function getFoo() {
        return $this->foo;
    }
}

$a = new Foo();
$a->setFoo('something');
var_dump($a->getFoo()); 
```

## PHP 魔法

但是，仍然可以选择使用[PHP 魔术方法](http://php.net/manual/en/language.oop5.magic.php)来创建您所描述的行为。尽管如此，这应该被认为不是将数据存储到对象的常用方式，因为这会导致错误并给您（单元）测试带来更难的时间。

```
class Foo {
    private $data = array();
    public function __set($key, $value) {
        $this->data[$key] = $value;
    }
    public function __get($key) {
        return $this->data[$key];
    }
}

$a = new Foo();
$a->foo = 'something';   // this will call the magic __set() method
var_dump($a->foo)        // this will call the magic __get() method 
```

希望这确实可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T12:44:56.397

如果您想像在关联数组上一样将任意成员分配给对象，您可能需要研究 PHP 的神奇[属性重载](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)。

这是一个示例类，可让您分配和检索变量（主要取自 PHP 文档）：

```
<?php
class PropertyTest
{
    /**  Location for overloaded data.  */
    private $data = array();

    public function __set($key, $value) {
        $this->data[$key] = $value;
    }

    public function __get($key) {
        return $this->data[$key];
    }
}
// sample use:
$a = new PropertyTest();
$a->foo = "bar";

echo $a->foo; // will print "bar"
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T12:43:30.487

您可以创建一个空的类对象，然后为其添加属性，例如：

```
<?php
$myObject = new StdClass();
$myObject->id = 1;
$myObject->name = "Franky";
$myObject->url = "http://www.google.com";
var_dump($myObject); 
```

...这应该产生

```
object(stdClass)#1 (3) { ["id"]=> int(1) ["name"]=> string(6) "Franky" ["url"]=> string(21) "http://www.google.com" } 
```

就个人而言，我更喜欢使用对象类而不是数组。

# android - Android：从服务器下载文件并使用 AsyncTask 在通知栏中显示下载进度

> ID：11470656
> 
> 赞同：9
> 
> 时间：2012-07-13T12:36:32.450
> 
> 标签：android, download, notifications, android-asynctask

我正在使用此[示例](https://eliasbland.wordpress.com/2011/03/11/an-example-of-how-to-run-a-background-task-and-report-progress-in-the-status-bar-using-asynctask-on-android/)从服务器下载文件，`AsycTask`并在通知栏中显示下载进度。我刚刚修改了`doInBackground`方法以下载我的文件：

```
@Override
    protected Void doInBackground(String... Urls) {
        //This is where we would do the actual download stuff
        //for now I'm just going to loop for 10 seconds
        // publishing progress every second
        try {   
            URL url = new URL(Urls[0]);
            URLConnection connection = url.openConnection();
            connection.connect();
            // this will be useful so that you can show a typical 0-100%
            // progress bar
            int fileLength = connection.getContentLength();

            // download the file
            InputStream input = new BufferedInputStream(url.openStream());
            OutputStream output = new FileOutputStream( _context.getFilesDir() + "/file_name.apk");

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            while ((count = input.read(data)) != -1) {
                total += count ;
                // publishing the progress....
                publishProgress((int) (total * 100 / fileLength));
                output.write(data, 0, count);
            }
            output.flush();
            output.close();
            input.close();      
        }
        catch (Exception e){
            e.printStackTrace();
        }
        return null;
    }

protected void onPreExecute() {
        // Create the notification in the statusbar
        mNotificationHelper.createNotification();
    }

protected void onPostExecute(Void result) {
        // The task is complete, tell the status bar about it
        mNotificationHelper.completed();
    }

protected void onProgressUpdate(Integer... progress) {
        // This method runs on the UI thread, it receives progress updates
        // from the background thread and publishes them to the status bar
        mNotificationHelper.progressUpdate(progress[0]);
    } 
```

一切正常，只是我无法拉下通知栏。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T17:46:53.677

以下是从评论中挑选出来的。

> 你能在 publishProgress 之前放一个 sleep(1000) 方法并检查。只是一个猜测

-

> 是的，它可以工作，但下载速度很慢

希望你明白这个问题。由于您非常频繁地更新通知栏，因此您无法将其拉下。通过增加数据的块大小或每 4 或更多 kb 而不是 1kb 更新进度条，您可以避免此问题。

以上不会减慢数据下载速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T12:38:00.993

你应该重写[onProgressUpdate](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)方法来更新你的 UI。

# javascript - Javascript 图像动画在 Firefox 或 Internet Explorer 中不起作用

> ID：11470657
> 
> 赞同：0
> 
> 时间：2012-07-13T12:36:35.430
> 
> 标签：javascript, html, image, animation

我正在使用以下脚本来生成图像动画。

它适用于 Chrome，但不适用于 Firefox 或 Internet Explorer ...

Javascript

```
var lista = new Array('image1.gif','image1.gif','image1.gif','image1.gif'); 
var tiempo = 500; 
var tempor = null; 
var pos=0; 
var i = 0; 

function boucle_images(){ 
        var nombre_total_images = 6; 
        document.images.centro.src = lista[i] 
        pos=i; 
        i++; 
        i%=nombre_total_images; 
        tempor=setTimeout("boucle_images()",tiempo); 

} 

function avanza(){ 

  if (pos==(lista.length-1)) 
      pos=0; 
  else 
  pos++; 
  document.images.centro.src = lista[pos] 

} 

function retroceso(){ 

  if (pos==0) 
      pos=(lista.length-1); 
  else 
  pos--; 
  document.images.centro.src = lista[pos] 
} 

function automat(){ 
tempor = setTimeout("boucle_images()", tiempo) 
} 

function parar(){ 
clearTimeout(tempor); 
} 
```

HTML

```
<table width="52%" border="0" align="center"> 
                <tr> 
                    <td height="482" colspan="2" align="right">
                        <img id="centro" src="imagenes/cargando2.gif" alt="" width="640" height="480" /></td> 
                </tr>
                <tr> 
                    <td align="center"><div class="div_ani_sat">
                        <a href="javascript:retroceso()"><img src="imagenes/atras.png" width="48" height="48" alt="" /></a>
                        <a href="javascript:avanza()"><img src="imagenes/adelante.png" width="48" height="48" alt="" /></a>
                        <a href="javascript:boucle_images()"><img src="imagenes/play.png" width="48" height="48" alt="" /></a>
                        <a href="javascript:parar()"><img src="imagenes/pause.png" width="48" height="48" alt="" /></a></div>
                    </td> 
                </tr> 
            </table> 
```

并不是说我不能在其他浏览器中运行......你能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:55:08.977

[这](http://jsfiddle.net/wtpHC/)是您在 chrome + firefox 中测试的相同代码的工作版本

[setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)接受第一个参数作为对函数的引用。所以，我刚刚替换了你的`tempor=setTimeout("boucle_images()",tiempo)`to `tempor=setTimeout(boucle_images, tiempo)`。始终遵循这个因为它保存了一个评估

`document.images` 返回一个`HTML Collection`您可以像数组一样访问的 [但它不是数组] 但不像`document.image.centros`[至少跨浏览器] 因此我将其修复为`document.getElementById('centros')`

# c - 如何为中断注册和取消注册事件

> ID：11470658
> 
> 赞同：-1
> 
> 时间：2012-07-13T12:36:43.977
> 
> 标签：c, events, event-handling, interrupt, interrupt-handling

它不在标准 C 上，我试图在 C 中开发应用程序。这是场景：它就像处理器的电源模式实现，这样当处理器从睡眠中唤醒时，会产生一个中断，这样如果我那时有一个事件回调，我可以唤醒我的其他模块来完成它的进程。为此，我正在尝试使用静态分配来实现链表来访问内存池，这样当注册回调时，它就会存储在内存池中. 因此，当触发回调时，它会向已注册的模块发送事件通知。

但我不确定如何实现它。请提供一种实现方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:06:15.707

你是说信号吗？比如当你遇到崩溃或被零除？这是捕获信号的 posix 示例：

```
void abortHandler( int signum, siginfo_t* si, void* unused )
{
   const char* name = NULL;
   switch( signum )
   {
      case SIGABRT: name = "SIGABRT";  break;
      case SIGSEGV: name = "SIGSEGV";  break;
      case SIGBUS:  name = "SIGBUS";   break;
      case SIGILL:  name = "SIGILL";   break;
      case SIGFPE:  name = "SIGFPE";   break;
      case SIGPIPE: name = "SIGPIPE";  break;
   }

   if ( name )
      printf( "Caught signal %d (%s)\n", signum, name );
   else 
      printf( "Caught signal %d\n", signum );
}

void trapSignals()
{
   struct sigaction sa;
   sa.sa_flags = SA_SIGINFO;
   sa.sa_sigaction = abortHandler;
   sigemptyset( &sa.sa_mask );

   sigaction( SIGABRT, &sa, NULL );
   sigaction( SIGSEGV, &sa, NULL );
   sigaction( SIGBUS,  &sa, NULL );
   sigaction( SIGILL,  &sa, NULL );
   sigaction( SIGFPE,  &sa, NULL );
   sigaction( SIGPIPE, &sa, NULL );
} 
```

# jquery-mobile - jQuery Mobile 小复选框

> ID：11470659
> 
> 赞同：-1
> 
> 时间：2012-07-13T12:36:49.860
> 
> 标签：jquery-mobile

是否可以使用 JQuery Mobile 创建一个小复选框/类似按钮的切换按钮？

将它们放在字段集中并设置 class=custom 可以满足我的要求，但我找不到拉伸集合的方法，使其填充 100% 的客户端宽度。

使用 data-iconpos=center 将单个复选框放置在网格中也可以做到这一点，但复选框并不完全支持这种模式。

想法？

水平需要 7 个复选框。没有文字，只需检查或切换。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-13T12:38:04.357

对的，这是可能的。

为复选框制作一个精灵。

因此，当图像被“选中”时，显示选中的精灵，如果不是，则显示未选中的精灵。

# select - 如何从 Coldfusion 中的查询中选择特定记录？

> ID：11470660
> 
> 赞同：2
> 
> 时间：2012-07-13T12:36:50.093
> 
> 标签：select, coldfusion, resultset

我正在尝试使用 Coldfusion8/MySQL 优化产品搜索以在移动设备上使用。

现在发生以下情况：

```
1\. user searches for "FOO"
2\. Q1: search database for no of results
3\. Q2: search again to get actual data for results FROM TO depending on pagination
4\. user clicks details for a product
5\. redo Q1 to get no of results
6\. redo Q2 to get single result
7\. use single result to query for product details (sizes, colors, pricings...) 
```

我正在寻找一种跳过重做 Q1 和 Q2 的方法，因为用户从结果集中选择了一个结果，那么我为什么要再次重建结果集以获得一个结果。

**问题**：
我想方法是传递一个变量，表明我只需要现有查询中记录的详细信息。假设我有结果 1-20，并且我传递了一个变量“DETAIL”和一个文章编号“123”，我将如何从现有结果集中选择匹配记录 = 如何从结果集中选择特定记录？

**编辑：** 所以我认为我的情况的唯一方法是第一次运行查询，将结果存储在 Session.storage 中，然后从存储中选择相应的记录与重新运行我的初始搜索。

Query of Queries 不起作用，因为我的初始查询在 cfinvoke 方法中，所以当它完成后，它就消失了，在下一次通过时，我无法查询最后一个 cfinvoke 的结果。

我还尝试将其存储到我的 cfc 变量范围中。也不起作用，我想也是出于同样的原因。我不想开始使用 cfobject，因为我仍在运行 CF8，而且我正在阅读很多关于 cfobject 如何影响性能的内容。

反正。在我的第一个名为“结果”的查询中，我现在正在存储

```
<cfset Session.storate = results> 
```

当我转储会话存储时，我得到：

```
catch - query
    CACHED: false 
    EXECUTIONTIME: 2031 
    SQL: SELECT a.*, p.ek, p.vk, p.x, p.y
        FROM arts a
    LEFT JOIN p ON 
            ...
            LEFT JOIN f ON 
            ... 
            WHERE a.aktiv = "ja"
            AND 
            ... 20 conditions ...

    SQLPARAMETERS: [array]
    1) %402% 
    ... 20 parameters

    RESULTSET: 
     [Record # 1] 
        a: true
        style: 402
        price: 2.3
        currency: CHF
        ...
     [Record # 2] 
        a: true
        style: 402abc
        ... 
```

我现在的问题是：

如何循环**session.storage**并检查样式？如果找到，这是我的结果，我将从中构建详细视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T13:13:23.980

我不确定我是否关注，但如果我关注，您可以执行查询查询，它允许您查询在您的页面上运行的现有查询。

```
<cfquery name="getOneRecord" dbtype="query">
SELECT record
FROM originalqueryname
WHERE articlenumber = 123
</cfquery> 
```

如果您只需要检索一个结果，这可能是最快的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T15:30:19.350

我不确定我是否理解您为什么要重做搜索以获得一条记录。如果用户单击详细信息链接，该链接应该有一些标识符返回到所选项目。然后，我将使用该 ID 来查询数据库并获取产品详细信息。原始搜索查询应仅将相关数据返回到结果显示中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:27:52.543

要考虑的另一件事是缓存在属性内。

# objective-c - Objective-C – 如何隐藏实现协议的类的方法

> ID：11470664
> 
> 赞同：0
> 
> 时间：2012-07-13T12:36:59.497
> 
> 标签：objective-c, protocols

问题在标题中。代码示例：

```
UIViewController <MyProtocol> *viewcontroller = ...;

[viewcontroller methodFromProtocol]; // I expect to be able to call all methods that the protocol defines

//UIViewControllerSubclass implements MyProtocol

UIViewControllerSubclass *viewControllerSubclassWithoutMyProtocol = [[UIViewControllerSubclass alloc] init];
[viewControllerSubclassWithoutMyProtocol methodThatIsNotInTheInterfaceIsDisplayedHere]; // I only expect to be able to call the methods that are defined in this class' interface even though this class implements MyProtocol 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:05:42.360

您的问题并不完全清楚，但我认为您是在问您是否可以“私下”遵守协议？

这可以通过声明您符合实现文件中的协议来完成，而不是接口文件。使用视图控制器，您可以在 .m 文件中为您自动生成的类延续中执行此操作，否则您需要自己添加类延续：

```
@interface MyVCSubclass () <MyProtocol> 
```

现在，任何只导入头文件的类都不知道你的控制器符合协议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T13:16:06.333

> `[viewControllerSubclassWithoutMyProtocol methodThatIsNotInTheInterfaceIsDisplayedHere];`
> 
> 我只希望能够调用在这个类的接口中定义的方法，即使这个类实现了 MyProtocol

这是一个不好的期望。Objective-C 允许您调用对象实现的任何方法。如果你试图调用一个对象没有实现的方法，应该会发生两件事：

*   您会收到编译器警告（虽然不是错误）
*   当代码运行时，它会崩溃，除非您已采取措施处理此类事件。

如果一个类实现了一个协议，但没有在公共标头中声明它这样做，那么您仍然可以调用该方法（因为 Objective C 没有私有方法）。我原以为您会收到编译器警告，但是如果您从与对象相同的 Xcode 项目中的文件中调用它（也就是说，您没有构建静态库），那么 Xcode 可能是变得聪明并决定既然方法存在，那么调用它一定是可以的。

从您的问题中不清楚您期望发生什么以及实际发生了什么。如果您提供这些信息，我们将能够提供更好的答案。

# java - 关于使用小程序检测私有 IP 地址的建议

> ID：11470667
> 
> 赞同：0
> 
> 时间：2012-07-13T12:37:09.953
> 
> 标签：java, tomcat, web-applications, applet, ip

我在检测连接到我构建的 Web 应用程序的客户端私有 IP 时遇到了一些麻烦。看看我的测试结果（在运行 Windows 的机器上）： 1-在某些机器上（来自不同的位置，国家..）小程序给了我正确的 ip，但 2-在其他机器上我获得了 ip=127.0.0.1 : 我有什么办法解决这个问题？A- 例如：我已经停止了 avast 程序保护（网络防护），并且小程序开始给我正确的私有 IP。B- 在其他机器上，我尝试了“A 点”，但没有成功 C- 我也编辑主机文件，但效果不佳

我需要你帮助我了解正在发生的事情？在哪里寻找以解决此问题...请不要回答说“您为什么需要私有 ip？它可能会改变...”...我知道要连接到我的 Web 应用程序的所有机器所以我可以配置它们。

我的小程序使用的部分源代码：

```
private String PrivateIP(boolean flag)
{
    String s1 = "unknown";
    String s2 = getDocumentBase().getHost();
    int i = 80;
    if(getDocumentBase().getPort() != -1)
        i = getDocumentBase().getPort();
    try
    {
        String s = (new Socket(s2, i)).getLocalAddress().getHostAddress();
        if(!s.equals("255.255.255.255"))
            s1 = s;
    }
    catch(SecurityException _ex)
    {
        s1 = "FORBIDDEN";
    }
    catch(Exception _ex)
    {
        s1 = "ERROR";
    }
    if(flag)
        try
        {
            s1 = (new Socket(s2, i)).getLocalAddress().getHostName();
        }
        catch(Exception _ex)
        {
            Stat = "Cannot Lookup this IP";
        }
    return s1;
} 
```

我会告诉你更多信息：我已经训练了这个[http://www.auditmypc.com/digital-footprint.asp](http://www.auditmypc.com/digital-footprint.asp)以便从可能的其他方法获取 ip，但结果相同，我还运行了[http： //www.auditmypc.com/firewall-test.asp](http://www.auditmypc.com/firewall-test.asp)并在我无法获得正确 ip 的机器中获得了一条消息，例如“恭喜您没有任何端口可以打开”xD ...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:14:34.877

首先，如果有多个网络接口，客户端上可以有多个可用的 IP 地址。您的方法返回哪一个取决于用于`new Socket()`打开哪个。

现在，您不必打开套接字来获取客户端的 IP。你可以做的是像这样枚举它们：

```
String host = InetAddress.getLocalHost().getHostName();

InetAddress[] addressArray = InetAddress.getAllByName(host);

String[] ipArray = new String[addressArray.length];
for (int i = 0; i < addressArray.length; i++) {
    InetAddress addr = addressArray[i];
    ipArray[i] = addr.getHostAddress();
}

return ipArray; 
```

现在`ipArray`将保存客户端工作站上可用 IP 地址的列表。

# hadoop - Mapper 的输出 Key 类型可以在进入 Reducer 之前更改吗？

> ID：11470673
> 
> 赞同：0
> 
> 时间：2012-07-13T12:37:29.460
> 
> 标签：hadoop, mapreduce, hdfs

如果 mapper 发出一组键值对，我们可以在 sort 和 shuffle 方法中进行一些处理并更改键类型，以便 reducer 接受不同类型的键类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T18:06:42.157

尝试用组合器来做？将其设计为实际数据的传递，除非您只是修改数据类型。这是一个陌生的要求。您是否在重新利用旧代码？

# asp.net - 我需要将最简单的网页从 .jsp 移植到 .asp，但我收到 http 错误 500.100

> ID：11470676
> 
> 赞同：0
> 
> 时间：2012-07-13T12:37:34.243
> 
> 标签：asp.net, .net, iis, web

我有一个jsp页面，它从某个url读取一行并发送给客户端：

```
<%@page import="java.util.*" %>
<%@page import="java.net.*" %>
<%@page import="java.io.*" %>
<%
    URL myUrl = new URL("http://host.com");
  BufferedReader in = new BufferedReader(
                     new InputStreamReader(
                     myUrl.openStream()));

   out.println(in.readLine());
%> 
```

我想为 IIS 提供相同的功能：

```
<%@ Page Language="C#">
<%@ Import Namespace="System.IO" %>
<%@ Import Namespace="System.Net" %>
<%
WebRequest myWebRequest = WebRequest.Create("http://www.host.com"); 
WebResponse myWebResponse = myWebRequest.GetResponse(); 
Stream ReceiveStream = myWebResponse.GetResponseStream();
StreamReader reader = new StreamReader(ReceiveStream);
Response.Write(reader.ReadLine());
%> 
```

但我收到一个错误代码：错误类型：Active Server Pages, ASP 0221 (0x80004005) 指定的 'Page Language="C#"> <%@ Import Namespace="System.IO" ' 选项未知或无效。index.asp，第 1 行

我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T12:40:32.777

您正在尝试使用旧版 ASP，而不是 ASP.NET 来处理它。

# java - 如何将 android 库（作为 Angle）链接到我的 Eclipse 项目？

> ID：11470692
> 
> 赞同：0
> 
> 时间：2012-07-13T12:38:15.537
> 
> 标签：java, android, static-libraries, angle

我猜是Nooby问题，但是。[我从这里](http://code.google.com/p/angle/downloads/list)下载了名为 Angle 的免费 android 引擎。有一个来源和一个例子。我将此项目导入 Eclipse，现在出现错误：

```
Project 'ANGLE' is missing required source folder: 'gen' 
```

并且包中没有这样的目录，所以，我想，我需要创建它吗？在我创建的没有任何库的 helloWorld 中，我`R.java`在此文件夹中 (gen/com/companyName/appName/R.java)。

此外，还有另一个错误 - 项目是“android-3”，我有 sdk 从 2.2 (android-8) 开始。所以我将目标更改为 android 2.2 并出现错误

```
Android requires compiler compliance level 5.0 or 6.0.
Found '1.7' instead. Please use Android Tools > Fix Project Properties. 
```

那么，什么是“安卓工具”？没见过这个选项。

谢谢你的帮助。Eclipse 新手，Android 新手，所以需要一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:41:56.000

在您的项目上单击鼠标右键，您将在上下文菜单中看到“Android 工具”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:42:53.153

右键单击您的项目并选择 Android Tools > Fix Project Properties 如果它不起作用，请右键单击您的项目 => 属性并选择一个 android sdk 版本。清理项目并重建。

要将项目转换为库项目，右键单击 => 属性 => Android => 是库 => 确定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:43:35.357

右键单击项目 => Android 工具

也尝试将编译器更改为 1.7

连接库项目：右键单击=> android => 添加并选择库项目

# liferay - 选择哪个以及何时选择：Web 内容、动态列表记录还是特定模型？

> ID：11470695
> 
> 赞同：5
> 
> 时间：2012-07-13T12:38:44.560
> 
> 标签：liferay

我发现 Liferay 的概念很混乱。

当我添加新项目时，我不知道最好选择什么：

*   使用带有模板和结构的 Web 内容概念
*   使用动态列表记录
*   使用特定模型（使用服务构建器）。

所有这些都非常相似，可以实现相同的目标。

当您在 Liferay 中开发一些新功能时，您对选择什么概念有任何线索或建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T04:32:37.973

您应该以这种方式使用组件：

*   Web 内容：Web 内容提供方便的方式来创建、更新、查看、修改、创建 RSS 提要、自定义网站内容。它是 Liferay CMS 的主要组件之一。您应该在以下情况下使用网络内容，

    *   您有静态内容并希望向网站展示。
    *   您有特定的内容结构（例如带有内嵌图像和文档链接的内容），那么请使用具有结构和模板的网页内容
    *   您希望使用即用型内容 Portlet（Web 内容列表、Web 内容显示、Web 内容搜索），而不是为您自己的类型创建一组新的 Portlet。

毕竟，Liferay 通过允许用户添加新的内容类型、创建 RSS 提要、结构、模板、准备好的工作流程、内容类型角色等来提供 Web 内容的定制。

*   动态列表：将动态列表视为具有显示功能的数据库。在这里，您可以创建自定义类型的数据并提供显示功能。如果您有任何要求，例如用户可以创建他/她自己的列表类型来维护它们，那就去做吧。

*   自定义 Portlet：如果您的需求非常具体，您无法使用列表或 Web 内容或任何其他 Liferay Portlet（博客、维基、基于知识的文章等）来实现，那么请选择自定义 Portlet，请记住，在每个 Liferay升级时，您需要查看 portlet 并相应地更新代码，以防发生任何 API 更改或其他情况。对于OOB portlet，Liferay 会处理它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:51:40.200

它取决于您想要拥有什么以及您希望对代码拥有多少控制权。

*   为了使简单的应用程序使用带有模板和结构的网络内容概念。（不需要了解技术）
*   - 让一些复杂的应用程序使用动态列表记录

*   要制作极其复杂的应用程序并完全控制流程，请使用 liferay 服务构建器。（不需要成为专家 java 程序员）

希望有帮助:)

# html - 在另一个 div 下滚动带有 youtube 视频的 div

> ID：11470704
> 
> 赞同：0
> 
> 时间：2012-07-13T12:39:22.953
> 
> 标签：html, css, youtube

我的 HTML 如下

```
<html>
<body>
<div id="d1" 
  style="height:100px;width:100%;background-color:#CFE;position:fixed;z-index:1000"> 
</div>

<div id="d2" style="padding-top:110px;z-index:-1000;background-color:#CCE;height:1000px;">
<iframe width="420" height="315" 
   src="http://www.youtube.com/embed/XZxo7IznQnk" frameborder="0" allowfullscreen></iframe>
</div>
</body>
</html> 
```

顶部 div (d1) 是固定的。滚动底部 div(d2) 时位于顶部 div 后面。但 youtube 视频保持在首位。

我想把它放在顶部 div 后面。有办法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:45:41.797

问题可能是 iframe 将 flash youtube 视频放在顶部。它与 Flash 对象的 z-index 有关。

我之前成功使用过这个解决方案......

[http://manisheriar.com/blog/flash_objects_and_z_index](http://manisheriar.com/blog/flash_objects_and_z_index)

*   将您的 Flash 内容放入名为 flash 的包装 div
*   添加到您的对象标签
*   将 wmode="transparent" 添加到嵌入标签中
*   使用 CSS 为您的 div 设置位置和 z-index（不要设置负 z-index 值，因为它会隐藏您的 Flash）

使用这个 CSS：

```
#flash {
    position: relative; /*or absolute*/
    z-index: 0;
} 
```

编辑：您必须删除 iframe。Wich 首先是一个好主意，因为 iframe 很烂：p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:45:48.463

这是因为 ActiveX 对象往往位于所有 html 元素之上。你必须添加一个“无窗口”模式到你的

```
<object>
    <param name="wmode" value="window" />
</object> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T09:46:35.710

这是我解决它的方法。

```
<html>
<body>
<div id="d1" 
  style="height:100px;width:100%;background-color:#CFE;position:fixed;z-index:1000"> 
</div>

<div id="d2" style="padding-top:110px;z-index:-1000;background-color:#CCE;height:1000px;">
<iframe width="420" height="315" 
   src="http://www.youtube.com/embed/XZxo7IznQnk?wmode=transparent" 
     frameborder="0" allowfullscreen></iframe>
</div>
</body>
</html> 
```

注意 iframe 的 src 中的 ?wmode=transparent"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T09:04:38.633

当我遇到类似情况时我尝试了什么：

```
 #bridgeDIV
{
position:relative;
}

#riverDIV
{
position:fixed;
overflow-y:scroll;
} 
```

想象一下桥下流淌的河流。

# c - OpenMP：首先完成第一次迭代

> ID：11470705
> 
> 赞同：0
> 
> 时间：2012-07-13T12:39:32.090
> 
> 标签：c, loops, for-loop, openmp

我有一个 C 并行 for 循环，其中包括一条线

```
b[i] = b[0]; 
```

所以我需要在开始任何其他迭代之前完成第一次迭代。是否有强制执行此类行为的条款？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T12:52:43.023

只需将第一次迭代拉出循环并在索引 1 处开始循环。这是迄今为止最简单和最便宜的方法。其他方式涉及等待，这是低效的。

# android - 如何从安卓手机控制电脑？

> ID：11470708
> 
> 赞同：-5
> 
> 时间：2012-07-13T12:39:36.453
> 
> 标签：android

我不知道我应该从哪里开始看，我不知道我是否可以为此使用 RemoteControlClient 库，如果可以，如何使用它，

如果有人知道，请帮助我，谢谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:50:21.127

一种方法是通过 androidVNC 等 VNC 应用程序控制 pc 桌面。将您的 android 设备连接到网络（以及您的 PC），知道您的 PC IP 应该可以工作。

另一个有用的应用程序是 ftpcafe，可通过您的 android 设备浏览您的 PC 文件。

# backbone.js - 主干，model.save 后调用 view.render 时未设置一个字段

> ID：11470709
> 
> 赞同：0
> 
> 时间：2012-07-13T12:39:56.243
> 
> 标签：backbone.js, backbone-views

我有以下问题。在用户事件（点击 .twitterDefault）上，我调用 save 事件

```
twitter : {
                    handle : handle,
                    ignore : false
} 
```

然后调用成功函数并在模型上设置字段（klout、twitter 和 tester）。所有字段都已设置（记录语句都打印出适当的对象。

但是，然后我调用 view.render() 并且这里不再设置 twitter。我不知道为什么，保存后没有同步发生，所以 twitter 不会被覆盖（此外，我确保在调用成功方法之前，twitter 也保存在服务器上）。

非常感谢任何帮助！

代码如下（剥离以提高可读性）

> $（函数（）{
> 
> ```
> var ContactModel,
>     ContactModelCollection,
>     ContactView,
>     ContactCollectionView,
>     contacts,
>     contactCollectionView;
> 
> //base model
> ContactModel = Backbone.Model.extend({
>     defaults : {
>     },
>     initialize : function() {
>     }
> });
> 
> ContactModelCollection = Backbone.Collection.extend({
>     model : ContactModel,
>     url : '/api/contacts',
>     comparator : function(contact) {
>         return contact.get('strength_of_relationship');
>     },
>     initialize : function() {
>     }
> });
> 
> ContactView = Backbone.View.extend({
>     tagName : 'li', //attempting to create a new element
>     render: function() {
>         var compiled_tmpl = _.template($('#contact-template').html());
>         var html = compiled_tmpl(this.model.toJSON());
>         console.log('model.get("twitter")=('+JSON.stringify(this.model.get('twitter)'))+')');
>         console.log('model.get("klout")=('+JSON.stringify(this.model.get('klout'))+')');
>         console.log('model.get("tester")=('+JSON.stringify(this.model.get('tester'))+')');
>         this.$el.html(html);
>         console.log('rendered view successfully)');
>         return this;
>     },
>     initialize: function() {
>         console.log('contactView initalized');
>         this.model.bind('change', this.render, this);
>         this.model.bind('destroy', this.remove, this);
>     },
>     events: {
>         'click .twitterDefault' : 'assignDefaultTwitterHandle',
>     },
>     assignDefaultTwitterHandle : function(event) {
>         var handle = $(event.currentTarget).data('twitter');
>         this.assignTwitterHandle(handle);
>     },
>     assignTwitterHandle : function(handle) {
>         console.log('model assignTwitterHandle. handle='+handle+')');
>         var view = this,
>             model = view.model;
>         model.save({
>             twitter : {
>                 handle : handle,
>                 ignore : false
>             },
>             id : model.get('id')
>         }, {
>             error : function() {
>                 console.log('saving twitter handle failed');
>             },
>             success : function(model, response) {
>                 console.log('response=('+JSON.stringify(response)+')');
>                 if(response.error) {
>                     console.log('error on server ='+response.error);
>                 }
>                 if(response.twitter) {
>                     console.log('twitter is set');
>                     var twitter = {
>                         handle : handle,
>                         tweet : response.twitter,
>                         age : new Date()
>                     };
>                     console.log('setting twitter to '+JSON.stringify(twitter));
>                     model.set('twitter', twitter);
>                     model.set('tester', 'tester');
>                     console.log('twitter after setting it = '+JSON.stringify(model.get('twitter')));
>                     console.log('view\'s model twitter after setting it = '+JSON.stringify(view.model.get('twitter')));
>                 }
> 
>                 if(response.klout) {
>                     console.log('klout is set');
>                     var klout = {
>                         topics : response.klout
>                     }
>                     console.log('setting klout to '+JSON.stringify(klout));
>                     model.set('klout', klout);
>                 }
>                 if(response.twitter || response.klout) {
>                     console.log('Rerendering view after setting klout/twitter');
>                     view.render();
>                 }
>             }
>         });
>     }
> });
> 
> contacts = new ContactModelCollection;
> 
> ContactCollectionView = Backbone.View.extend({
>     el : $('#suggestions-list'),
>     initialize : function(){
>         contacts.bind('add', this.addOne, this);
>         contacts.bind('reset', this.addAll, this);
>         contacts.bind('all', this.render, this);
>     },
>     render : function(){
>         console.log('contactcollectionview render');
>     },
>     addOne : function(contact) {
>         console.log('addOne');
>         var view = new ContactView({model: contact});
>         var el = view.render().el;
>         console.log('el=('+el+')');
>         $('#suggestions-list').append(el); 
>     },
>     addAll : function() {
>         console.log('addAll');
>         contacts.each(this.addOne);
>     }
> });
> 
> contactCollectionView = new ContactCollectionView;
> 
> App.contacts = contacts;
> App.contactCollectionView = contactCollectionView; }); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T21:44:00.590

我想问题是`render`函数的范围。根据调用的位置，`this`取不同的值。

要始终`this`指向 View 范围的保修，请添加到您的`initialize`：

```
_.bindAll(this,"render"); 
```

此外，手动调用 view.render 也不是一个好习惯。你应该让事件完成它们的工作。[模型保存](http://backbonejs.org/#Model-save)已经触发了一些事件。只需听他们更新您的视图。

# android - 图库和褪色边缘

> ID：11470714
> 
> 赞同：3
> 
> 时间：2012-07-13T12:40:01.667
> 
> 标签：android, android-layout, gallery

我有一个画廊，里面有位图。这是代码：

```
 // Bitmap snoop = BitmapFactory.decodeResource(mContext.getResources(), mImageIds[position]);
   // i.setImageResource(mImageIds[position]);
   // i.setScaleType(ImageView.ScaleType.FIT_XY);
        BitmapFactory.Options options = new BitmapFactory.Options();

        // will results in a much smaller image than the original
        Bitmap b = BitmapFactory.decodeFile("/sdcard/DinEgen/"+name.get(position), options);
        Bitmap img = Bitmap.createScaledBitmap( b, width, height, true );
         b.recycle();
    i.setImageBitmap(img);
    //i.setBackgroundResource(mGalleryItemBackground);
    i.setGallery(g);
    i.setLayoutParams(new Gallery.LayoutParams(width, height));

    return i; 
```

当我启动应用程序时，一切看起来都很好。就像图片上的： ![在此处输入图像描述](../Images/16eef1f7e5146d091ece92e6073ee384.png)

当我转到下一页时，一切看起来都很糟糕： ![在此处输入图像描述](../Images/a016b6b811069924c16993e5bea94188.png)

颜色较浅，左侧有点像边缘，颜色很好。当我背面颜色也更浅并且这个边缘在右侧时。我在画廊里用过

android:fadingEdge="none" android:fadingEdgeLength="0px"

但仍然无法正常工作。知道为什么颜色会发生变化以及为什么当我转到下一页时会看到这个边缘吗？任何想法为什么会发生这种情况？

Edit1：我解决了一个边距问题。我在宽度中添加了 30： `i.setLayoutParams(new Gallery.LayoutParams(width+30, height))`但转到下一页后颜色仍然较浅。知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T23:36:48.463

尝试以下方法来停止图像重叠，从而消除您的问题：

```
Gallery gallery= (Gallery)findViewById(R.id.gallery);
gallery.setHorizontalFadingEdgeEnabled(false); 
```

# javascript - 这个js代码有什么错误

> ID：11470728
> 
> 赞同：0
> 
> 时间：2012-07-13T12:40:50.917
> 
> 标签：javascript, jquery, dom

```
 var RowNumber = row.rowIndex;
  alert(RowNumber);
  var a = document.createElement('a');
  a.textContent = 'Remove';
  a.style.cursor = 'pointer';
  //a.href = "javascript: document.getElementById(tblId).deleteRow(0);"; 
  a.setAttribute("onclick","alert(RowNumber)");
  cell1.appendChild(a); 
```

萤火虫说“未定义行号”，但我在上面定义了行号。还改变了 RowNumber 变量。

我的完整功能是=

```
function addRowToTable(tblId,icOptionArray,leavRowFromBottom,selectedValue,selectedQuantity)
{

  var tbl = document.getElementById(tblId);
  var lastRow = tbl.rows.length - (leavRowFromBottom + 0);
  // if there's no header row in the table, then iteration = lastRow + 1
  var iteration = lastRow;
//  var iteration = lastRow + 1;
  var row = tbl.insertRow(lastRow);

  //  cell 0
  var cell0 = row.insertCell(0);
  cell0.align='right';

  var el = document.createElement('label');
  el.textContent = 'IC Chips :';
  cell0.appendChild(el);

  //cell 1
  var cell1 = row.insertCell(1);

  var selector = document.createElement('select');
  selector.id = 'icchips';
  selector.name = 'icchips[]';
  selector.style.width = '200px';
  //alert(selector);

  for (var key in icOptionArray) 
  {   
      if(key == 'containsValue') continue;
      var option = document.createElement('option');
      if(key == selectedValue)
         option.selected = true;
      option.value = key;
      option.appendChild(document.createTextNode(icOptionArray[key]));
      selector.appendChild(option);
  }

  cell1.appendChild(selector);

  var space = document.createTextNode(' ');
     cell1.appendChild(space);  

  var lbl = document.createElement('label');
  lbl.textContent = 'Qty :';
  cell1.appendChild(lbl);  

  var selector = document.createElement('select');
  selector.id = 'additional_quantity';
  selector.name = 'additional_quantity[]';

  for (var key in QUANTITIES_ARR) 
  {   
      if(key == 'containsValue') continue;
      var option = document.createElement('option');
      if(key == selectedQuantity)
         option.selected = true;
      option.value = key;
      option.appendChild(document.createTextNode(QUANTITIES_ARR[key]));
      selector.appendChild(option);
  }

  cell1.appendChild(selector);  
  var space = document.createTextNode(' ');
  cell1.appendChild(space);

  var RowNumber = row.rowIndex;
  alert(RowNumber);
  var a = document.createElement('a');
  a.textContent = 'Remove';
  a.style.cursor = 'pointer';
  //a.href = "javascript: document.getElementById(tblId).deleteRow(0);"; 
  a.setAttribute("onclick","alert(RowNumber)");
  cell1.appendChild(a);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:42:48.943

这样做

```
a.onclick = function(){ alert(RowNumber); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:45:12.263

`RowNumber`问题是定义的本地范围与`onclick`调用处理程序的范围不同。@jancha 提出的解决方案解决了这个问题。他使用闭包确保处理程序中的 RowNumber 与本地范围内的相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:46:13.033

`RowNumber`未在创建元素的范围内定义，因为您使用 jQuery，您可以使用：

```
var RowNumber = row.rowIndex;
alert(RowNumber);
var a = document.createElement('a');
a.textContent = 'Remove';
a.style.cursor = 'pointer';
//a.href = "javascript: document.getElementById(tblId).deleteRow(0);"; 
$(a).click(function(e){
  alert(RowNumber);
}); 
```

# google-maps - Google Maps API 网络服务未提供准确的经纬度

> ID：11470731
> 
> 赞同：0
> 
> 时间：2012-07-13T12:40:54.033
> 
> 标签：google-maps, google-places-api, google-geocoding-api

我使用下面的代码在 C#.Net 中获取纬度和经度。但在某些情况下，它提供了错误的纬度/经度。例如，如果我搜索“Braås skola Växjö Sweden”，它会提供 [56.879004,14.805852]，这是 Växjö 的纬度/经度，而不是我们搜索的内容！那么我们如何解决这个问题以获得准确的纬度/经度。这个问题在很多情况下都会发生，例如“Braås förskola 44:an VÄXJÖ”、“Björkens förskola VÄXJÖ”。

```
private const String _googleUri = "http://maps.google.com/maps/geo?q=";
private const String _googleKey = "yourkey";
private const String _outputType = "csv";

private static Uri GetGeocodeUri(String address) {
    address = HttpUtility.UrlEncode(address);
    return new Uri(String.Format("{0}{1}&output={2}&key={3}", _googleUri, 
address, _outputType, _googleKey));
}
public static Coordinate GetCoordinates(String address) {
    WebClient client = new WebClient();
    Uri uri = GetGeocodeUri(address);    
    String[] geocodeInfo = client.DownloadString(uri).Split(',');
    return new Coordinate(Convert.ToDecimal(geocodeInfo[2]), Convert.ToDecimal(geocodeInfo[3]));
} 
```

请帮助我获得更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:37:28.797

请求[**places**](https://developers.google.com/places/documentation/#PlaceSearches) -service 而不是地理编码。

# r - 在 R 中读取表格？

> ID：11470734
> 
> 赞同：2
> 
> 时间：2012-07-13T12:41:10.527
> 
> 标签：r, read.table

我有一个具有以下结构的 txt 文件：

```
NAME     DATA1    DATA2
a        10       1,2,3
b        6        8,9
c        20       5,6,7 ,8 
```

第一行代表标题，数据由**制表符**分隔。我需要以`DATA1`一种可以逐个遍历元素的方式将 的元素放入列表或向量中。

此外，我需要提取`DATA2`for each的元素`NAME`并将它们放入列表中，以便我可以单独遍历，例如获取`NAME`b 的元素 8,9 并将其放入列表中。（请注意，第三条记录在列表中`DATA2`的`7`和逗号之间有一个空格）。

我怎么能做到这两个操作？我知道我可以使用`read.table`和`$`访问单个元素，但我被卡住了。

```
info<-read.table("table1", header=FALSE,sep="\t")
namelist<-list(info$NAME) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T13:06:44.137

运行此演示并查看、 和-- 的结构`n`，这应该可以帮助您开始：`d1``d2`

```
df = read.table(text="NAME\tDATA1\tDATA2
a\t10\t1,2,3
b\t6\t8,9
c\t20\t5,6,7 ,8", 
                header= TRUE, 
                stringsAsFactors=FALSE,
                sep='\t')

n  = df$NAME
d1 = df$DATA1
d2 = lapply(strsplit(df$DATA2, ","), 
            as.numeric)
names(d2) = n

d2['b'][1] # access first element in list named 'b'

lapply(d2, FUN=mean) # mean of all rows in d2 
```

# android - Facebook sso 集成不起作用

> ID：11470735
> 
> 赞同：0
> 
> 时间：2012-07-13T12:41:11.140
> 
> 标签：android, facebook, single-sign-on

我正在寻找正确的 fb sso。当我搜索时，我从 hackbook 获得了指导。但 Fb sso 有时工作 smetimetime 它不工作可能是什么原因。我没有收到任何错误。我也添加了以下内容

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    authenticatedFacebook.authorizeCallback(requestCode, resultCode, data);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:44:38.660

你的互联网连接掉线了吗？如果确实如此，并且您每次都尝试授权而不是检查现有令牌，那么缺乏互联网连接将导致它失败。这只是一个猜测，因为我看不到您的代码，也看不到您的问题中的任何堆栈跟踪。

# javascript - 显示 HTML 对象

> ID：11470737
> 
> 赞同：-1
> 
> 时间：2012-07-13T12:41:23.070
> 
> 标签：javascript, html

我希望在单击 onclick 功能时显示其他对象。当我单击该按钮时，它将隐藏一个对象并显示另外两个对象。我已经将 style.visibility 设置为可见。但是显示两个对象不起作用。

更新示例：

```
<input type="submit" id="show" name="show" value="show" onclick="RemoveDoc(); document.getElementById('docname').style.visibility='hidden'; document.getElementById('browse').style.visibility='visible'; return false;" />
//browse input
<input type ="file" name="browse" id="browse"> 
```

方法二：

```
 //Using my RemoveDoc() function, I want the button of browse being show out.
 function RemoveDoc(Doc)
 {
xmlhttp1=new XMLHttpRequest();

xmlhttp1.open("GET","functions/remove.php?Doc="+Doc,true);
xmlhttp1.onreadystatechange=function()
{
    if (xmlhttp1.readyState==4 && xmlhttp1.status==200)
    {
            //when i run debugging, it says that the style of null..
    document.getElementById("browse").style.visibility='visible';

    }
}
xmlhttp1.send();

    return false;
    }
    </script> 
```

我尝试了两种方法都无法显示浏览按钮。它应该在浏览对象上显示我的可见性，因为它是可见的......请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:12:52.280

[http://jsfiddle.net/y3Bad/](http://jsfiddle.net/y3Bad/)

一些事情：你应该在你的`removeDoc`函数中包含可见性代码，并从 javascript 中绑定处理程序，而不是在标记中。此外，您的变量`xmlhttp1`是隐式全局变量。你的`removeDoc`函数有一个参数，`Doc`但你从不向它传递任何东西。最后，`removeDoc`进行 ajax 调用，它是异步的，因此您显示浏览按钮的代码行不会立即执行，并且如果您的 ajax 调用失败，可能永远不会执行。

HTML：

```
<input type="button" id="show" name="show" value="show" /> 
```

JS：

```
​document.getElementById('show').onclick = function () {
    // use display instead of visibility if you don't want the hidden element to take up space

    // setting visibility to empty string will show the element
    document.getElementById('browse').style.visibility = '';
};​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:42:50.697

我使用这两个功能：

```
function hide(objId) {
    document.getElementById(objId).style.display="none";
}

function show(objId) {
    document.getElementById(objId).style.display="";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:52:30.300

也许您可以尝试使用 jQuery，如下所示：http: [//jsfiddle.net/7fJuu/](http://jsfiddle.net/7fJuu/)

# entity-framework - 在 EF4.0 中的方法中返回值时出现强制转换问题

> ID：11470739
> 
> 赞同：0
> 
> 时间：2012-07-13T12:41:48.293
> 
> 标签：entity-framework, entity-framework-4

我正在尝试使用实体框架加载员工。该方法应该返回员工列表。

它给出了这个错误:

```
Cannot implicit convert....<Class names and methods>.... An Explicit conversion exists. 
```

我认为这个问题与铸造有关。

请检查以下代码。

```
 public List<Employee> LoadEmployees()
     {
         try
         {
             EMployeeDB1Entities EE = new EMployeeDB1Entities();
             var Employees = EE.Employees.Where(p => p.Name.StartsWith("T"));
             return Employees;

         }
         catch
         {
             return null;
         }

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:47:35.327

```
var Employees = EE.Employees.Where(p => p.Name.StartsWith("T")).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:50:18.833

将您的代码更新为：

```
return Employees.ToList(); 
```

另请注意，这是`ToList()`实际触发数据库查询的方法。

`EE.Employees.Where(....)`不查询数据库。**当enumerated****的结果时`Where()`**查询数据库，这就是这样`.ToList()`做的。

* * *

> 谢谢它有效......还有一个问题，假设我想将上面的列表绑定到网格，那么我该如何绑定？

假设您使用的是 WPF 或 Silverlight：要将查询结果绑定到数据网格上，您可以公开类型为 的公共属性[`ObservableCollection`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)。该集合接受一个`IEnumerable<T>`对象作为构造函数。你可以写：

```
var myCollection = new ObservableCollection<Employee>(this.LoadEmployees()); 
```

然后将[`ItemSource`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.itemssource%28v=vs.95%29.aspx)数据网格的属性绑定到您的集合。

如果您在使用绑定时遇到更多问题，我建议您再问一个问题，因为主题完全不同。

# objective-c - UIActionSheet 中途出现

> ID：11470740
> 
> 赞同：1
> 
> 时间：2012-07-13T12:41:49.027
> 
> 标签：objective-c, ios, xcode, uipickerview, uiactionsheet

我正在寻找一种让 UIPickerView 显示“完成”、“取消”按钮的方法。
谷歌搜索我发现了好帖子，所有帖子都涉及 UIActionSheet。

所以我这样做了

container 是`UIView`
actionSheet 是`UIActinSheet`
pickerView 是`UIPickerView`

在**viewDidLoad**：

```
container = [[[UIView alloc] initWithFrame:CGRectMake(rect.origin.x,rect.origin.y, rect.size.width, rect.size.height)] autorelease];
[self.view addSubview:container];

actionSheet = [[UIActionSheet alloc] initWithTitle:@"myTitle" 
                                          delegate:nil
                                 cancelButtonTitle:nil
                            destructiveButtonTitle:nil
                                 otherButtonTitles:nil];

[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0, 40, 0, 0);

pickerView = [[[UIPickerView alloc] initWithFrame:pickerFrame]autorelease];
pickerView.showsSelectionIndicator = YES;
pickerView.dataSource = self;
pickerView.delegate = self;

UIToolbar *toolbar = [[[UIToolbar alloc] init] autorelease];
toolbar.frame = CGRectMake(0, 0, self.view.frame.size.width, 44);
NSMutableArray *items = [[[NSMutableArray alloc] init] autorelease];
[items addObject:[[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(dismissActionSheet)] autorelease]];
[items addObject:[[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:@selector(goActionSheet)] autorelease]];
[items addObject:[[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(goActionSheet)] autorelease]];
[toolbar setItems:items animated:NO];

[actionSheet addSubview:toolbar];
[actionSheet addSubview:pickerView];

[actionSheet showInView:container];

[actionSheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

该应用程序启动良好，整个事情看起来不错，应该在线：`[actionSheet showInView:container];`

现在，当我尝试关闭 ActionSheet 时，效果很好！

在**dismissActionSheet**中：

```
[actionSheet dismissWithClickedButtonIndex:1 animated:NO]; 
```

问题是，如何让它再次出现？

当我使用：

```
[actionSheet showInView:container]; 
```

我只使用按钮从底部选择工具栏，仅此而已。整个 PickerView 在底部，我看不到。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:32:43.503

操作表旨在更像警报一样使用，因为它们是独立的“立即做出选择”演示者。它们通常只在 iPhone 上部分显示。

您的选择器应该独立于操作表。如果您想要“完成”和“取消”按钮，也许您会考虑将它们添加到选择器的导航栏中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:37:51.080

您可以使用具有完成和取消按钮的**UIToolBar**和您的 PickerView，这很容易。

# java - 支持 JSON 的 Axis2

> ID：11470743
> 
> 赞同：3
> 
> 时间：2012-07-13T12:41:57.920
> 
> 标签：java, json, axis2

我有一个已部署的 Axis2 Web 服务，它使用 SOAP 与客户端通信。现在有一个新要求，即通过发送 JSON 请求和接收 JSON 格式的响应来启用 REST 调用。

按照这个小教程：[http ://code.google.com/p/jsonp-support-for-axis2/wiki/OneStopPage](http://code.google.com/p/jsonp-support-for-axis2/wiki/OneStopPage)

我能够正确配置我的 Axis 2 Web 服务。使用我的浏览器，我使用以下 URL 返回一个 Student 对象：

```
http://localhost:8181/Axis2Json/services/StudentService/getStudent?response=application/json&value=3 
```

**输出 ：**

```
{"return":{"@type":"ax21:Student","age":25,"firstName":"Mouhammed","lastName":"Soueidane"}} 
```

问题是返回的 JSON 看起来不像标准的 JSON 表示形式（甚至不是 badgerfish 格式）。例如，如果我想调用一个名为“setStudent”的方法，它接收一个 Student 对象，我真的不知道我需要传递给它的 JSON 字符串。

我尝试了很多东西，其中大部分都导致了铸造异常`(java.lang.ClassCastException: java.lang.String cannot be cast to org.codehaus.jettison.json.JSONObject)`

有没有人知道如何根据客户端的内容类型允许 Axis 2 Web 服务同时使用 SOAP 和 JSON？

# c# - 如何使用 C# 中的 Struct 作为参数在 C 代码中调用函数

> ID：11470744
> 
> 赞同：2
> 
> 时间：2012-07-13T12:42:04.480
> 
> 标签：c#, c, marshalling

我在 C 文件中有一个结构，如下所示

```
struct Parameter{
    char param1[20];
    char param2[20];
} 
```

以及 C 文件中的一个函数，该函数将此结构作为参数以及 char* 作为另一个参数，如下所示

```
extern "C" __declspec(dllexport) void GetValue(char* opt,struct Parameter param);
void GetValue(char* opt, struct Parameter params)
{
printf("%s", params->param1);
} 
```

我想使用编组从我的 C# 应用程序中调用它。我在 C# 中创建了一个类似的结构

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public class Parameters
{      
    public string Param1 { get; set; }     
    public string Param1 { get; set; }   
} 
```

并使用以下方法在 C# 中调用它

```
 [DllImport(@"C:\Test\CTestDll.dll",CallingConvention = CallingConvention.Cdecl,CharSet=CharSet.Ansi)]      
 public static extern void GetValue([MarshalAs(UnmanagedType.LPStr)]StringBuilder sbOut, [MarshalAs(UnmanagedType.LPStruct)]Parameters sbIn); 
```

但是打印语句的结果是打印 null。我在 C 编程方面不是很好。请帮我整理一下。我错了，是在 C 函数中还是从 C# 编组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:00:08.900

不同之处在于，在 C++ 中，您的结构包含原始字符，而在 C# 中，您的类包含对字符串的引用。MarshalAs 属性将使用 char 数组而不是对字符串的引用：

```
unsafe static class Program
{

[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct Parameters
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
    public String Param1;
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 20)]
    public String Param2;
}

[DllImport(@"CTestDll2.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
public static extern void GetValue(StringBuilder sbOut, Parameters sbIn);

static void Main(string[] args)
{
    var p = new Parameters
    {
        Param1 = "abc",
        Param2 = "dfc"
    };

    var s = new StringBuilder("some text");

    GetValue(s, p);
} 
```

}

C++：

```
// CTestDll.h

#pragma once

#include <stdio.h>

extern "C" __declspec(dllexport) void GetValue(char* opt, struct Parameter param);

struct Parameter{
    char param1[20];
    char param2[20];
};

void GetValue(char* opt, struct Parameter params)
{
    printf("param1: %s, param2: %s, string: %s", params.param1, params.param2, opt);
} 
```

# vba - Word 宏另存为带有当前文件名的文本

> ID：11470750
> 
> 赞同：0
> 
> 时间：2012-07-13T12:42:33.343
> 
> 标签：vba, ms-word

所以我要做的是获取一个word文档，将其保存为启用换行符的纯文本.txt。有人告诉我，宏是一种简单的方法，并且我取得了一些成功。我现在最大的问题是它没有将文档保存为当前文件名。我环顾四周，人们说要使用 ActiveDocument.Name，但由于某种原因，这对我不起作用，我最终将文档保存为 txt 文件，但实际上命名为 ActiveDocument.Name。这是我第一次尝试与 VBA 相关的任何事情，所以这可能是一些我看不到的简单的小语法错误。这是我当前的代码：

```
Sub WordtoTxtwLB()
'
' WordtoTxtwLB Macro
'
'
    ActiveDocument.SaveAs2 FileName:= _
        "\\Path\Path\FILENAME.txt", FileFormat:= _
        wdFormatText, LockComments:=False, Password:="", AddToRecentFiles:=True, _
        WritePassword:="", ReadOnlyRecommended:=False, EmbedTrueTypeFonts:=False, _
         SaveNativePictureFormat:=False, SaveFormsData:=False, SaveAsAOCELetter:= _
        False, Encoding:=1252, InsertLineBreaks:=True, AllowSubstitutions:=False, _
         LineEnding:=wdCRLF, CompatibilityMode:=0
End Sub 
```

注意：我确实将代码中的路径和文件名更改为通用名称（即“路径”和“文件名”），只是为了让事情变得更容易/更清晰。因此，如果我有一个名为 cat.doc 的文档，我希望宏将其保存为带有换行符和相同文件名的 .txt 文件。有什么帮助/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:31:42.547

名称 FILENAME 包含在引号内，因此它将用作文字。将其与引号分开以用作变量。此外，如果您使用 ActiveDocument.Name，它会将后缀作为字符串的一部分（“somefile.doc”）；您必须删除后缀。

```
 Sub WordtoTxtwLB()
    '
    ' WordtoTxtwLB Macro
    '
    '
        Dim fileName As String
        myFileName = "New_File"

        ActiveDocument.SaveAs2 FileName:= _
            "\\Path\Path\" & myFileName & ".txt", FileFormat:= _
            wdFormatText, LockComments:=False, Password:="", AddToRecentFiles:=True, _
            WritePassword:="", ReadOnlyRecommended:=False, EmbedTrueTypeFonts:=False, _
             SaveNativePictureFormat:=False, SaveFormsData:=False, SaveAsAOCELetter:= _
            False, Encoding:=1252, InsertLineBreaks:=True, AllowSubstitutions:=False, _
             LineEnding:=wdCRLF, CompatibilityMode:=0
    End Sub 
```

# mysql - 数据库（MySql）与引擎（InnoDB）的关系？

> ID：11470751
> 
> 赞同：6
> 
> 时间：2012-07-13T12:42:34.483
> 
> 标签：mysql, database, innodb, storage-engines

有 1000 万篇文章将 MyISAM 与 InnoDB（两个所谓的*数据库引擎*）进行比较，[维基百科](https://en.wikipedia.org/wiki/Database_engine)模糊地定义为：

> “ *...数据库管理系统 (DBMS) 用于从数据库中创建、读取、更新和删除 (CRUD) 数据的底层软件组件。* ”

但这究竟意味着什么？令人惊讶的是，我找不到一篇谈论数据库与其引擎的关系的文章！

引擎如何在具体的现实世界中表现出来？数据库真的只是一个二进制文件，它的“引擎”是`.exe`处理文件的所有 I/O 吗？引擎是否处理`EXPLAIN`AND QEP？

我想我要问的是：**您如何定义哪些职责是 MySQL 的，哪些活动是其底层引擎的职责？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T12:53:40.783

这张图有帮助吗？

![在此处输入图像描述](../Images/e7b3884d03c97703b76121a4618dca89.png)

取自： http: [//forge.mysql.com/wiki/MySQL_Internals_Custom_Engine#Overview](http://forge.mysql.com/wiki/MySQL_Internals_Custom_Engine#Overview)

# javascript - 在 P HTML 标记内的翡翠模板中添加 ID

> ID：11470752
> 
> 赞同：0
> 
> 时间：2012-07-13T12:42:35.513
> 
> 标签：javascript, html, node.js, pug

我使用有效的玉模板创建了这一段。我想在stackoverflow这个词周围加上一个ID或类，我怎么能在jade中做到这一点？我知道在使用普通 HTML 时，我们可以使用类似`<div class="className">'stackoverflow'</div>`或使用的东西`span`，我试图查看翡翠文档但找不到任何东西。

```
 p.we_are
  | We are 
  | in love with 'stackoverflow' so much
  | because it rules. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:52:14.747

这应该可以按您的预期工作。

```
p.we_are
   | We are 
   | in love with '
   p#id stackoverflow
   |' so much
   | because it rules. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T11:54:05.527

您可以使用内联标签：

```
p.we_are
  | We are 
  | in love with #[div#idName 'stackoverflow'] so much
  | because it #[div.className rules]. 
```

# asp.net-mvc - Chrome:cookie 在用户离开页面时被移除

> ID：11470753
> 
> 赞同：1
> 
> 时间：2012-07-13T12:42:40.733
> 
> 标签：asp.net-mvc, google-chrome, cookies, forms-authentication, payment-gateway

我有一个用户登录的 ASP.NET MVC1 站点。他登录是因为他有一个带有令牌值的 cookie“.ASPXAUTH”。

对于付款，用户被重定向到支付提供商。当他完成付款过程时，他会被重定向到我的网站。

这通常很好，但自 6 月 29 日以来，我有很多用户在被重定向到我们的网站时没有 cookie。

我无法重现此行为，但我看到了一种模式：大多数丢失 cookie 的用户在 Windows 上使用的是最新版本 (20.0.1132.47) 的 Chrome。

这两天有人遇到过这样的问题吗？我不知道可能是什么原因，但我怀疑它是 Chrome 的一个设置，现在被很多用户更改了，或者是一个插件改变了一些东西。

**编辑**

表单身份验证创建的 cookie 是会话 cookie。可能是某些浏览器改变了它们检测会话的方式。如果我有会话 cookie，请关闭浏览器并重新打开它，我仍然有 cookie。

# android - 银河 s3 模拟器

> ID：11470757
> 
> 赞同：2
> 
> 时间：2012-07-13T12:42:51.180
> 
> 标签：android, galaxy

启动 AVD 's3' 的模拟器

```
Failed to allocate memory: 8 T
his application has requested the Runtime to terminate it in an unusual way. 
Please contact the application's support team for more information. 
```

使用此配置运行 s3 模拟器时遇到此问题

```
Target: Google APIs - API Level 15 Skin: Built-in WXGA720

Hardware Back/Home: yes
Abstracted LCD density: 320
Keyboard lid support: no
Max VM application heap size: 48
Device ram size: 512 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:47:09.927

设置 AVD 时存在一个常见问题，您必须手动编辑配置文件才能修复。在我的 WinXP 计算机上，它位于

`C:\Documents and Settings\username\.android\avd\name_of_avd.avd\config.ini`

将内存设置从 更改`hw.ramSize=512`为`hw.ramSize=512MB`

保存文件并重新打开 avd。这对我有用，除了我使用`hw.ramSize=1024MB`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:50:43.030

手动将分辨率设置为 720x1280，而不是使用预定义的 WXGA720。

# wix - WiX 自定义操作 - MSI 复制本身

> ID：11470760
> 
> 赞同：2
> 
> 时间：2012-07-13T12:42:59.783
> 
> 标签：wix, custom-action

有人可以帮我在 MSI 中构建一个自定义操作，它会在成功安装到某个 X 位置后自行复制。我已经看到它可以使用 .exe 来完成，但我只想使用 CA.DLL (C#) 来完成，因为这个 exe 将是一个开销。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T21:19:03.560

这是一个示例 VB 脚本，它将按名称查找已安装的产品并复制 MSI 的缓存副本。这将适用于 Windows 7 及更高版本，因为完整的 MSI 被缓存并且任何嵌入的 cab 文件都保留在 MSI 中。您只需在旧系统上获得没有有效负载的 MSI。

```
Dim installer, products, product, productCode
Set installer = Wscript.CreateObject("WindowsInstaller.Installer")

For Each productCode In installer.Products
  If InStr(1, LCase(installer.ProductInfo(productCode, "ProductName")), LCase("My Product Name")) Then Exit For
Next

If IsEmpty(productCode) Then Wscript.Quit 2

Set products = installer.ProductsEx(productCode, "", 7)
filesys.copyFile products(0).InstallProperty("LocalPackage"), "c:\path\to\newcopy.msi" 
```

# windows - Windows 8 本地化

> ID：11470766
> 
> 赞同：1
> 
> 时间：2012-07-13T12:43:22.643
> 
> 标签：windows, xaml, windows-8, microsoft-metro

我对 Windows 8 中的本地化应用程序有一些疑问。

1.  除了元素类型之外，有没有办法自动将翻译绑定到 UI 元素？目前，我必须为文本块提供带有 id 的字符串，例如“welcomeText.text”，为按钮提供“welcomeButton.Content”。它使创建带有翻译的文件变得更加复杂。

2.  Windows 8 是否有与此类似的解决方案 -> [http://developer.android.com/guide/topics/resources/string-resource.html#Plurals](http://developer.android.com/guide/topics/resources/string-resource.html#Plurals)？

提前谢谢你，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:46:28.403

不幸的是，我认为这两个问题的答案是否定的。

至于问题1：

如果您使用本地化 Windows 8 应用程序的标准方法，则必须指定属性，这不是很好但可以理解；平台如何知道它应该绑定什么属性？也许我想绑定 Header 属性而不是 Content 属性。

除非我指定，否则平台无法确定我想要什么。

# facebook - Facebook 应用程序/页面选项卡登录 iframe 问题

> ID：11470769
> 
> 赞同：1
> 
> 时间：2012-07-13T12:43:33.090
> 
> 标签：facebook, facebook-iframe, iframe-app

我有一个 Facebook 应用程序，它要求用户使用 Facebook 登录才能发布到应用程序，我的问题是，如果用户是新用户，即没有授予应用程序使用登录的权限，他们在查看时会被引导到空白页面在页面选项卡 iframe 中的应用程序中。

所以基本上新用户找到我的粉丝页面，单击 iframe 选项卡查看应用程序，单击使用 Facebook 登录，在 iframe 选项卡中加载的页面是空白的。当人们有机地找到该站点时，一切正常，它仅在加载的 iframe 选项卡中失败。有没有办法解决？

# android - Android 文本视图中的文本重叠

> ID：11470772
> 
> 赞同：2
> 
> 时间：2012-07-13T12:43:37.380
> 
> 标签：android

我正面临一种奇怪的文本视图行为。当文本视图有多行时，这些行相互重叠。我试图解决它，但还没有得到任何线索。

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/googletv_bkgd_no_title"
    android:orientation="vertical" >

 <LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="fill_parent"
    android:layout_height="85dip"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <FrameLayout
        android:id="@+id/frameLayout1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent" android:paddingRight="50dip">

        <LinearLayout
            android:id="@+id/linearLayout3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:layout_gravity="right|center_vertical" android:gravity="center_vertical">

            <TextView
                android:id="@+id/navigationHeaderTxtView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#cccccc"
                android:visibility="gone" android:layout_gravity="center_vertical"/>

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceMedium" android:layout_gravity="left|center_vertical" android:layout_marginLeft="5dip" android:textColor="#ebebee" android:textStyle="bold"/>

        </LinearLayout>

    </FrameLayout>

</LinearLayout>
<!--    
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_gravity="top|right" android:layout_marginRight="20dip">

    <Button
        android:id="@+id/btnBack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip"
        android:background="@drawable/btn_back" />

    <Button
        android:id="@+id/btnHome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dip"
        android:background="@drawable/btn_home" />

</LinearLayout>-->

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" android:layout_gravity="top" android:layout_marginTop="20dip" android:gravity="center">

    <ImageView
        android:id="@+id/arrow_up"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/arrow_up" android:visibility="visible"/>

</LinearLayout>

<FrameLayout
    android:id="@+id/frameLayout3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" android:paddingLeft="80dip" android:paddingRight="80dip">

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="250dip"
        android:cacheColorHint="#00000000"
        android:horizontalSpacing="10dip"
        android:listSelector="@drawable/list_selector"
        android:numColumns="5"
        android:padding="10dip"
        android:verticalSpacing="10dip" >
    </GridView>

</FrameLayout>

    <LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" android:layout_gravity="top" android:layout_marginTop="20dip" android:gravity="center">

    <ImageView
        android:id="@+id/arrow_down"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/arrow_down" android:visibility="visible"/>

</LinearLayout>

<LinearLayout
    android:id="@+id/frameLayout2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/title_color"
        android:textSize="25dip" android:layout_gravity="center_horizontal"/>

     <TextView
    android:id="@+id/textDescription"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

我附上了有关该问题的屏幕截图。

![在此处输入图像描述](../Images/40c713f03b543d047dc0619fa97fecd8.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T15:53:39.637

您将需要调整行距以适应奇怪的自定义字体，例如`android:lineSpacingExtra`在您的`TextView`.

# root - 如何在 Tomcat 6 的 Web 应用程序中定义 context.xml 的上下文路径？

> ID：11470773
> 
> 赞同：0
> 
> 时间：2012-07-13T12:43:38.920
> 
> 标签：root, tomcat6, context.xml

谁能向我建议我必须将上下文路径放在 Tomcat 服务器中的哪个位置？我必须把它放进去`context.xml`还是我必须在里面创建一个新的 .xml `apache-tomcat-6.0.18\conf\Catalina\localhost`？

当我输入 URL 时，`http://localhost:9796/`这应该会将我重定向到登录页面。但我越来越`404 exception`。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:58:00.600

您可以在 Server.xml 中为部署在服务器中的所有 Web 模块 (WAR) 定义上下文根信息。

1.  如果您通过将 WAR 直接复制到 webapps 文件夹中直接从 tomcat 服务器部署应用程序，您可以在 server.xml 中添加上下文信息。
2.  如果您在 Eclipse 中部署应用程序，则需要在 META-INF 文件夹中创建一个 context.xml 并添加如下条目

> ```
> <Context crossContext="true" docBase="{urModuleName}" path="/{URL}"
> reloadable="true"> 
> ```

# jquery - 使用带有 HTML 表格的 jQuery UI 可排序

> ID：11470775
> 
> 赞同：86
> 
> 时间：2012-07-13T12:43:40.977
> 
> 标签：jquery, jquery-ui, html-table, jquery-ui-sortable

我想在 HTML 表中从数据库中输出一些数据，并且我希望用户能够重新排序表行。为此，我使用了可排序的 jQuery UI，因此：

```
<script>
    $(function() {
        $( "#sortable" ).sortable();
        $( "#sortable" ).disableSelection();
    });
    </script>
<?php 
 while($row = mysql_fetch_assoc($co_authors)) {
                    echo "<tr id='sortable'><td>{$row['author_email']}</td>
                         <td>{$row['coauthor_level']}</td>";
                         <td><button class='remove' id='remove' name='remove' email="<?php echo $row['author_email'] ?>"
                            paper="<?php echo $row['paper_id'] ?>">Remove</button></td>
                         </tr>";
                }
?> 
```

问题是当我拖动表格时`tr`，只有`td`被拖动。此外，最重要的是，只有第一行是可拖动的：效果不会应用于其他行。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-07-13T14:00:14.843

您可以调用`sortable`a`<tbody>`而不是单个行。

```
<table>
    <tbody>
        <tr> 
            <td>1</td>
            <td>2</td>
        </tr>
        <tr>
            <td>3</td>
            <td>4</td> 
        </tr>
        <tr>
            <td>5</td>
            <td>6</td>
        </tr>  
    </tbody>    
</table>​

<script>
    $('tbody').sortable();
</script> 
```

```
$(function() {
  $( "tbody" ).sortable();
});
```

```
 table {
    border-spacing: collapse;
    border-spacing: 0;
}
td {
    width: 50px;
    height: 25px;
    border: 1px solid black;
}
```

```
 <link href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" rel="stylesheet">
<script src="//code.jquery.com/jquery-1.11.1.js"></script>
<script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>

<table>
    <tbody>
        <tr>
            <td>1</td>
            <td>2</td>
        </tr>
        <tr>
            <td>3</td>
            <td>4</td>
        </tr>
        <tr> 
            <td>5</td>
            <td>6</td>
        </tr>
        <tr>
            <td>7</td>
            <td>8</td>
        </tr>
        <tr>
            <td>9</td> 
            <td>10</td>
        </tr>  
    </tbody>    
</table>
```

# c# - 从数据表创建网格

> ID：11470776
> 
> 赞同：1
> 
> 时间：2012-07-13T12:43:42.030
> 
> 标签：c#, forms, datatable, drawing

我有一个这种格式的数据表

```
ID X-coordinate Y-coordinate 
```

我想创建一个网格，该网格在节点处具有 ID，并且具有根据其 X、Y 位置连接到相邻 ID 的线。关于这样做的任何建议，我以前从未做过任何绘图。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:02:22.613

在表单上放置一个面板：

```
private DataTable dt;

public Form1() {
  InitializeComponent();

  dt = new DataTable();
  dt.Columns.Add("ID", typeof(int));
  dt.Columns.Add("XCord", typeof(int));
  dt.Columns.Add("YCord", typeof(int));

  DataRow dr1 = dt.NewRow();
  dr1["ID"] = 1;
  dr1["XCord"] = 10;
  dr1["YCord"] = 10;
  dt.Rows.Add(dr1);

  DataRow dr2 = dt.NewRow();
  dr2["ID"] = 2;
  dr2["XCord"] = 10;
  dr2["YCord"] = 50;
  dt.Rows.Add(dr2);

  DataRow dr3 = dt.NewRow();
  dr3["ID"] = 3;
  dr3["XCord"] = 25;
  dr3["YCord"] = 50;
  dt.Rows.Add(dr3);

  panel1.Paint += panel1_Paint;
} 
```

下面是绘制方法：

```
private void panel1_Paint(object sender, PaintEventArgs e) {
  e.Graphics.Clear(Color.White);

  for (int i = 1; i < dt.Rows.Count; i++) {
    e.Graphics.DrawLine(Pens.Red,
                        new Point(Convert.ToInt32(dt.Rows[i - 1]["XCord"]), Convert.ToInt32(dt.Rows[i - 1]["YCord"])),
                        new Point(Convert.ToInt32(dt.Rows[i]["XCord"]), Convert.ToInt32(dt.Rows[i]["YCord"])));
  }
} 
```

结果：

![在此处输入图像描述](../Images/f49bdef4b86bfd4d9c4926ffaf266e0b.png)

# jquery - 100% 宽度水平 jQuery 手风琴

> ID：11470778
> 
> 赞同：1
> 
> 时间：2012-07-13T12:43:57.787
> 
> 标签：jquery, fullscreen, accordion

我制作了这款手风琴，它只在 webkit 浏览器中运行良好。我无法弄清楚是什么导致它在非 webkit 浏览器中中断。

[http://jsfiddle.net/gurtfrobe/SMjxK/1/](http://jsfiddle.net/gurtfrobe/SMjxK/1/)

请原谅粗略的代码，我对 Javascript 不太感兴趣。

非常感谢所有输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T19:14:33.457

由您在上一个 IE、FF 和 Chrome 下的脚本与朋友一起制作 http://jsfiddle.net/quadrian/z94baosx/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:34:18.207

所以我已经弄清楚了一部分。它现在也适用于 Firefox、Opera 和 IE9。

只有 Webkit 浏览器才能以百分比形式检索元素的位置。Firefox 等人会将值转换为像素。因此假设 LEFT 值设置为百分比：

```
var myvar = $('#myitem').css('left'); 
```

将在 Chrome 和 Safari 中保存百分比值，但其他浏览器会将该百分比转换为像素值。

为了解决这个问题，您必须首先将 LEFT 值分配为内联样式，然后更改 jQuery 获取值的方式。现在变成：

```
var myitem = $('#myitem');
var myitemleft = myitem[0].style.left; 
```

请注意，可能有该代码的简写版本，但我的知识并不是那么好。

如果有人知道什么可能导致它在 IE7 和 8 中不起作用，我将不胜感激。如果我解决了它，我会在这里分享我的发现。

# php - 使用私钥进行 RSA 解密

> ID：11470779
> 
> 赞同：2
> 
> 时间：2012-07-13T12:43:59.237
> 
> 标签：php, encryption, rsa

我有一个私钥和加密字符串。实际上，字符串已使用 .NET 模块加密。现在我需要解密字符串。我在 php 中尝试过，但它引发了以下错误

```
 openssl_private_decrypt(): key parameter is not a valid private key 
```

我在 perl 中尝试过，但它需要自己的私钥，但它需要使用我自己的私钥，该私钥已在我们的服务器中生成。

请建议我解决这个问题。PHP ,Ruby , Perl 解决方案会更有帮助。

```
$crypttext="gKL/n5hkBg4jyjrLRqjQbf9gAS3xnbp1xmCmamPO33fW21JAJtlVQHYR6O1dOw3tfobMe/0uXm/kgivae9zHNey4Wt3UGzPwosUrx7V8zhC97AXya2tuENO1Fmc4Z8l9+UalwtUZxMGtl3Ua9DYuvxLP/TuavgRNpmG6eemGPag=";
$fp=fopen("private.pem","r");
$priv_key=fread($fp,8192);
fclose($fp);
openssl_private_decrypt(base64_decode($crypttext ),$newsource,false ) ;
echo "String decrypt : $newsource"**; 
```

**私钥**

```
<BitStrength>1024</BitStrength><RSAKeyValue><Modulus>t2G2WWIal1EinPn54ZPc3S1UgGTDxr6RFc+XEMR723VSg9toU8lSfTD7C26bUcbDxBwP1/1MbdQcx/dKX+7UlB5z79vrwfT89rUZGWeH7VZvuAawtHURgucyGMhqAZ9NxDEAl5Uo3nsNL9j1JlSBfeZf8pU5sf70KezqJTRsfrE=</Modulus><Exponent>AQAB</Exponent><P>82dZbOjQCJ7NV6EuVJXqPlh4FB65LBL1w9696sKFZuIr8refGwTZOY05se6oHbT9mn8OFXVA6A/wmz7oWNPk9w==</P><Q>wN8uixNk73DIF2SHb0aunnW5XxAIq3KxeQKoUTBAzL7BqXmKjk6XDnfxDbybmcT51wGhiO20lGg51zuxnsPXlw==</Q><DP>Kv4+VXZqCJvEOY5G2LoCPjDyRNuIabiPoKFfenARkDKzAJReji81D21am4tENrsZcIiwvCmR5WurXECoWchT0Q==</DP><DQ>qGRzW4O0VYVvfVUNFi9tF/aKwR/boe0CXDfgwvnRKbHGnfP67+JX6o73zFmGtQuQYpMO+OEpD4WsMmnw2z/7ww==</DQ><InverseQ>czq4+xiiVxb63ZtKwkxyJoDLFH0f18YlfFQTrEoAx7UE9HdjOjsJFpZ54g0yK3/S/yVgIXPwMcw6LU1QvqazPg==</InverseQ><D>Ktp/tWWSlzfToeFcvpVCMMGOFK73fTM9Tl6Di9yOoRtKnBuixqmuSCkxEVvYmgSb7PEt1qiPur6ttyEX1VFHhaugTr3aVhUpF+k7ULaHrCb8UymXXW3pp/yl/QOMPWuNKVv/GU3aQ3VTc3WUaYuOnaIkJk7uoYDQn0QqWtxtT60=</D></RSAKeyValue> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:52:57.570

您需要转换密钥并实际使用它：

```
$crypttext="gKL/n5hkBg4jyjrLRqjQbf9gAS3xnbp1xmCmamPO33fW21JAJtlVQHYR6O1dOw3tfobMe/0uXm/kgivae9zHNey4Wt3UGzPwosUrx7V8zhC97AXya2tuENO1Fmc4Z8l9+UalwtUZxMGtl3Ua9DYuvxLP/TuavgRNpmG6eemGPag=";
$priv_key = openssl_pkey_get_private("file://path/to/private.pem");
openssl_private_decrypt(base64_decode($crypttext ), $newsource, $priv_key ) ;
echo "String decrypt : $newsource"**; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T16:45:11.633

[phpseclib 是一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)，支持这种格式的 XML 私钥。使用示例：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->loadKey('...'); // private key

echo $rsa->decrypt($ciphertext);
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-02T09:18:20.233

`.pem`一种解决方案是使用 openssl （通常在 linux 下）以 PHP 期望的格式（文件，我认为该格式被调用`DER ASN.1`但我不确定）生成一个密钥，然后将其转换为仍然使用 OpenSSL 的格式`.NET`可以阅读。有关更多详细信息，请参阅[此 SO 答案](https://stackoverflow.com/a/10785707/324969)。

在 Linux 下：

```
openssl genrsa -out private.pem 1024
openssl rsa -in private.pem -out public.pem -pubout
openssl req -nodes -x509 -days 3650 -subj '/CN=www.example.com/emailAddress=info@example.com' -new -key private.pem -out certificate.crt
openssl pkcs12 -export -out certificate.pfx -inkey private.pem -in certificate.crt 
```

在 .NET 下：

```
// Get the public key
X509Certificate2 pubCertificate = new X509Certificate2("certificate.crt", "passphrase", X509Certificates.X509KeyStorageFlags.Exportable);
RSACryptoServiceProvider public = (RSACryptoServiceProvider)(pubCertificate.PublicKey.Key);
System.Console.WriteLine(public.ToXmlString(false));

// Get the private key
X509Certificate2 privCertificate = new X509Certificate2("certificate.pfx", "passphrase", X509Certificates.X509KeyStorageFlags.Exportable);
RSACryptoServiceProvider private = (RSACryptoServiceProvider)(privCertificate .PrivateKey);
System.Console.WriteLine(private.ToXmlString(true)); 
```

# magnetic-cards - Maestro 信用卡：从 MSR 转储中提取信息（任何语言）

> ID：11470780
> 
> 赞同：-1
> 
> 时间：2012-07-13T12:43:59.760
> 
> 标签：magnetic-cards, credit-card-track-data

我们有一个系统，允许您在 MSR 上扫描您的信用卡，然后从转储中提取所需的字段，例如 name/cc/exp。最近我们不得不为此添加全球化信用卡。对于提供的几乎所有卡片，我仍然能够提取信息，因为它们似乎都遵循一个标准。然而，一个例外是 Maestro 卡。格式完全不同，因为我既没有人验证卡上的实际数字与转储数据，也无法访问任何其他转储，我很难找出这些数据的正确格式。我还做了一些谷歌搜索，但从 MSR 转储中提取数据的运气不佳。

与几乎所有其他卡片不同，第一道不以“%B”开头，第二道不以“;”开头。两首曲目似乎都以“？”结尾 （基于分析整个转储，而不是跟踪）。Track 3 确实似乎是空的，这是正常的。

整个转储似乎缺少任何名称数据，并且基本上采用以下格式：

```
###=###?
###=###=###==#=###? 
```

请注意，除了单个 #，我有 3 它是可变长度的。

同样，我只能访问一个转储，出于显而易见的原因，我无法在此处发布。

如果有人有任何语言的示例代码，或者可以将我链接到一些帮助，我将非常感激。

提前致谢，

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T06:29:36.563

您正在测试的卡是否可能有故障，或者只是通常不支持的非标准卡？在假设您的系统出现故障之前，请尝试检查其他 maestro 卡的跟踪数据。

我这样说是因为 ISO 7813（交易卡的管理标准）非常明确，即磁道 2 数据以起始标记“;”开头。并且所有有效的银行卡在第 1 轨中的起始标记“%”之后都有一个格式代码“B”。

仔细检查标准并确保您的系统解析正确： [http ://www.gae.ucm.es/~padilla/extrawork/tracks.html](http://www.gae.ucm.es/~padilla/extrawork/tracks.html)

# php - 确定 .pdf 文件是否具有任何类型的任何表单元素

> ID：11470785
> 
> 赞同：2
> 
> 时间：2012-07-13T12:44:25.810
> 
> 标签：php, pdf, zend-pdf

我需要确定给定的 .pdf 文件中是否有任何表单元素（可能是文本输入、复选框、列表等...）

我不需要知道它们是什么类型或有多少，我只需要知道文件中有超过 1 个任何类型的字段。

我已经有了 PHP (5.3)、Zend_Pdf 和 tcpdf 供我使用。

Zend_Pdf 似乎没有提供任何东西来简单地列出或计算表单字段。

我的选择似乎是将 pdf 转换为 html 并解析表单字段的结果或将 pdf 转换为文本文件并解析它。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T20:24:59.297

该类`Zend_Pdf`具有您需要的信息，但无法通过函数访问或获得它。您需要添加一个公共函数来查看（对于 Zend_Pdf 对象本身）并查找存储在其中的字段的（字段类型）`$this->_trailer->Root->AcroForm->Fields->items`唯一值的频率。`->FT->value`

# winforms - StartPosition.CentreScreen 转换为什么点坐标

> ID：11470787
> 
> 赞同：0
> 
> 时间：2012-07-13T12:44:31.367
> 
> 标签：winforms

在 Windows 窗体上，您可以将`StartPosition`枚举属性设置`CenterScreen`为使窗体在主监视器的中心启动。

我从[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.formstartposition.aspx)了解到，在选择“启动位置枚举值”之一时，在幕后，`Location`表单的属性设置为`Point`类的实例，显然将两个整数作为构造函数中的值设置为构造函数，以设置表单的位置。

如果您选择`Manual`枚举，`StartPosition`您可以自己将`Location`属性设置为类的实例，`Point`将表单放置在您喜欢的任何位置。

我试图让我的 Windows 窗体始终从我的屏幕顶部中心开始，使用[戴尔坞站](http://www.delldock.com/images/version15d/dell_dock.jpg)作为我的灵感。所以我的问题是，当你选择`CenterScreen`你的`StartPosition`?

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:19:09.103

显然，您可以使用以下方法之一获取屏幕尺寸：

```
SystemInformation.PrimaryMonitorSize
SystemInformation.WorkingArea
SystemInformation.VirtualScreen
Screen.PrimaryScreen.Bounds
Screen.PrimaryScreen.WorkingArea 
```

然后只需使用公式将表单位置设置为中心

```
ScreenWidth / 2 - FormWidth / 2 
```

您可以将表单顶部位置设置为 0 假设您希望它位于顶部居中

# jquery - 比较 jQuery 中关于 CSS 类的两个数组

> ID：11470790
> 
> 赞同：1
> 
> 时间：2012-07-13T12:44:40.797
> 
> 标签：jquery, arrays

我有两个数组。一个看起来像这样：

```
var array_one = [".a", ".b", ".c", ".d"]; 
```

`.a`, `.b`, `.c`&`.d`是可以在 DOM 中找到的 CSS 类。

然后我得到另一个数组，其中包含当前在 DOM 中的`array_two`所有具有类的元素。`.lorem`

**现在**我如何通过比较两个数组找到具有`.a`、`.b`或`.c`的元素？`.d` **`.lorem`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:46:12.923

可以使用 jQuery 的[`filter()`](http://api.jquery.com/filter)方法，再加上[Array 的`join()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join);

```
$(array_two).filter(array_one.join(",")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:47:11.153

假设`array_two`你可以做一个 jQuery 对象：

```
array_two.has(array_one.join(",")); 
```

这是使用[`.has(...)`](http://api.jquery.com/has/)jQuery 函数。**

# ruby-on-rails - simple_form_for 和参数

> ID：11470796
> 
> 赞同：0
> 
> 时间：2012-07-13T12:45:01.223
> 
> 标签：ruby-on-rails, ruby, simple-form

我有一个愚蠢的问题：

```
= simple_form_for :session, url: :sessions do |f|
  = f.input :email
  = f.input :password
  = f.button :submit, 'Sign in!'

def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
      session[:user_id] = user.id
      redirect_to root_path, :notice => "Logged in!"
    else
      flash.now.alert = "Invalid email or password"
      render "new"
    end
end 
```

看起来我在参数中没有电子邮件和密码，因为在 Rails 控制台中一切正常。有人可以解释一下我的表单中的 :session 是什么意思吗？我怎样才能得到我的电子邮件和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:25:47.880

*（将其移至答案，因为似乎大多数人都同意我的建议是解决 OP 问题的方法）*

***一个小提示：**您可以通过将以下内容放在您的 create 方法的开头来转储`params`到浏览器中`render :text => params.to_s and return`。*

您可能需要在您的方法中引用`params[:session][:email]`和。`params[:session][:password]``create`

`form_for`的第一个参数中的符号[有据可查](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)；见**通用`form_for`**。

# java - 这个基本的通用示例真的无法实现吗？

> ID：11470800
> 
> 赞同：0
> 
> 时间：2012-07-13T12:45:19.820
> 
> 标签：java, generics

昨天看到这个帖子：[我如何实例化？包含代码](https://stackoverflow.com/questions/11465373/how-i-instantiate-this-generic-include-code)

用户无法获取泛型类的构造函数类型 X 以匹配传递给构造函数 IA 的对象类型，即使`<X extends IA>`.

我真的不喜欢提供的唯一答案，因为如果您必须将 M 构造函数类型从`X`to更改，它会使泛型的全部意义变得无用`IA<X>`。当然这就是为什么泛型类型`M`为`<X extends IA>`??

对于这个基本示例，真的没有办法使用泛型（没有任何抑制的警告）吗？

```
public interface IA<X extends IA<X>>{}

public class A<X extends IA<X>> implements IA<X>{}

public class W<X extends IA<X>>{}

public class M<X extends IA<X>> extends W<X>{
    X anx;

    public M(X x){} //Type X here is not compatibile with IA in the test code
}

//Testing code in a different class
public <X extends IA<X>> void check() {

    IA<X> a = new A<X>();
    W<X> s = new M<X>(a); //Doesn't compile because IA<X> is not the same as 'X', even though <X extends IA> 
    W<X> s = new M(a);    //Compiles, but with suppressed warnings

    X a = new A<X>();  //Doesnt compiler (ignoring dupicate 'a' variable)  
    W<X> s = new M<X>(a); compiles
} 
```

编辑以在任何地方包括 IA，包括“扩展”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:56:11.797

你必须做这样的事情：

```
//Testing code in a different class
public <X extends IA<X>> void check() {
    IA<X> a = new A<X>();
    W<subtypeofIA(IA works as well)> s = new M<subtypeofIA(IA works as well)>(a); //Doesn't compile because IA<X> is not the same as 'X', even though <X extends IA> 
    W<X> s = new M(a);    //Compiles, but with suppressed warnings 
} 
```

关于警告，我认为它们是不言自明的，它们可以概括为：当您拥有一个泛型参数化类型时，无论何时要使用它，都必须将泛型参数实例化为具体类型。引入了泛型参数是为了泛化代码，同时也为了强制类型安全。使用 IA 意味着你放弃了通过说 IA < ASpecificType > 可以获得的类型安全性，编译器会引起你的注意。

以下代码是我可以得到的最接近您的代码的代码，同时也具有一定的意义：

```
interface IA<X extends IA<X>>{}

class A<X extends IA<X>> implements IA<X>{}

class W<X extends IA<X>>{}

class M<X extends IA<X>> extends W<X>{
    X anx;

    public M(X x){} //Type X here is not compatibile with IA in the test code 
}

//Testing code in a different class
public <X extends IA<X>> void check() {

    IA<X> a = new A<X>();
    W<X> s = new M<X>(null); //Doesn't compile because IA<X> is not the same as 'X', even though <X extends IA> 
    W<X> ss = new M(a);    //Compiles, but with suppressed warnings

    X aa = new A<X>();  //this is completely illegal  
    W<X> sss = new M<X>(aa); //compiles
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:52:38.797

这个问题涉及许多没有意义的通用约束。`M<X>`的构造函数接受 type 的`X`参数，它是泛型方法的类型参数`check`（这意味着调用者可以决定`X`是任何东西，这仍然需要工作）。那么为什么你期望`a`（或其他任何事情）是正确的类型？

如果您想询问如何更改泛型约束以使其工作，这里有一个更简单的东西（它只是更改泛型（但保持原样）而不是原始的其他东西），它可以编译，并且可能更`W`接近于`M`无论如何你想要：

```
public interface IA<X>{}

public class A implements IA<A>{}

public class W<X extends IA<X>>{}

public class M<X extends IA<X>> extends W<X>{
    X anx;

    public M(X x){}
}

public void check() {

    A a = new A();
    W<A> s = new M<A>(a);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:06:43.310

问题是传入构造函数的 a 是 IA 类型。M 的构造函数需要 X。IA 不能强制转换为 X，因此这是一个语法错误。

第二个选项确实可以*编译*，但是如果您要实际运行它，您会将 amx 分配给一个实际上不是 X 实例的变量（因此您收到警告说这是一个坏主意的原因）。

如果您更改构造函数以接受 IA，那么一切正常。

# c++ - std::result_of 简单函数

> ID：11470802
> 
> 赞同：24
> 
> 时间：2012-07-13T12:45:40.967
> 
> 标签：c++, c++11, std, result-of

```
#include <iostream>
#include <type_traits>

double f(int i)
{
        return i+0.1;
}

struct F
{
        public:
        double operator ()(int i) { return i+0.1; }
};

int
main(int, char**)
{
        std::result_of<F(int)>::type x;     // ok
        // std::result_of<f(int)>::type x; // error: template argument 1 is invalid
        x = 0.1;
        std::cerr << x << std::endl;
} 
```

请解释为什么`std::result_of<f(int)>::type x;`无效...

cppreference 说“（`std::result_of`）在编译类型推导出函数调用表达式的返回类型。”。

有什么问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-13T14:14:48.483

`std::result_of<T>`需要`T`是一种类型——但不仅仅是任何类型。`T`必须是函数类型，因此`result_of`将使用以下部分特化：

```
template <class Fn, class... ArgTypes> struct result_of<Fn(ArgTypes...)>; 
```

这样：

```
decltype(INVOKE(declval<Fn>(), declval<ArgTypes>()...)) 
```

格式正确（C++11 20.9.7.6）。（INVOKE 在 20.8.2 中定义。）

原因`std::result_of<f(int)>`不起作用是因为`f`不是类型——它是函数类型的实例。要声明`x`为`f`应用于 an的返回类型`int`，只需这样写：

```
decltype(f(int{})) x; 
```

或者，如果您更喜欢硬编码`int`：

```
decltype(f(32)) x; 
```

如果`f`需要的类型，则使用：

```
using FuncPtr = decltype(f); 
```

然而，在提供的代码中`F`（即，不是小写`f`）是一个类型，因此`F(int)`定义了一个表示返回`F`接受 an`int`作为参数的函数的类型。显然这不是F！`F`的类型是一个结构体，其实例可以使用函数调用运算符。`F`也没有显式或隐式构造函数采用`int`等。这怎么行？简短的回答：模板“魔术”。

本质上， 的定义`std::result_of`采用类型，`F(int)`并将返回类型与参数类型分开，因此它可以确定 INVOKE() 的哪种情况允许它工作。INVOKE的案例有：

1.  F 是指向某个类 T 的成员函数的指针
2.  如果只有一个参数，则 F 是指向 T 类数据成员的指针，或者，
3.  F 的一个实例可以用作函数，即

```
declval<F>()(declval<int>()) 
```

这可以是一个普通的函数调用或某种类型的仿函数（例如，像你的例子）。

一旦确定了这一点，就可以确定`result_of`有效表达式的返回类型。这是通过`result_of`的`type`成员返回的内容。

这样做的美妙之处在于，用户`result_of`不需要知道这实际上是如何工作的。唯一需要了解的是`result_of`需要一个函数 TYPE。如果使用的名称不是代码中的类型（例如，`f`），则`decltype`需要使用该名称来获取表达式的类型。

最后，`f`不能将其视为类型的部分原因是因为模板参数也允许常量值，并且`f`是常量函数指针值。这很容易证明（使用问题的定义`f`）：

```
template <double Op(int)>
double invoke_op(int i)
{
  return Op(i);
} 
```

然后：

```
std::cout << invoke_op<f>(10) << std::endl; 
```

`f`因此，要获得正确调用某个表达式的返回值类型，`int`可以这样写：

```
decltype(f(int{})) 
```

（注意：`f`从不调用：编译器只是使用其中的表达式`decltype`来确定其结果，即在此实例中的返回值。）

# silverlight - 在 MapControl Tap 事件上添加图钉

> ID：11470804
> 
> 赞同：0
> 
> 时间：2012-07-13T12:45:44.047
> 
> 标签：silverlight, windows-phone-7, map, geolocation

我正在尝试将图钉添加到我的 MapControl on Tap。我面临的问题是， GestureEventArgs 传递了一个 Map 相对坐标，例如：

```
X = 216
Y = 197 
```

因此，我无法将图钉上的 Co-ods 分配到地图中。这正是我正在做的。

```
private void MainMap_Tap(object sender, GestureEventArgs e)
    {
        Point p = e.GetPosition(this.MainMap);
        GeoCoordinate g = new GeoCoordinate();
        g = MainMap.ViewportPointToLocation(p);

        MyPin.Location = g;
        MainMap.Children.Add(MyPin);
    } 
```

由于 MyPin.Location = g 处的空引用错误，我的代码中断。在 g 我得到像

```
g = {-0.00446319579627641, 0.00369071960449219} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:46:29.097

可能是因为您的 MyPin 未初始化。

如果图钉为空，则无法设置图钉的位置。

[http://msdn.microsoft.com/en-us/library/gg588563(v=vs.92](http://msdn.microsoft.com/en-us/library/gg588563(v=vs.92) )

# ios - 拍摄IOS游戏视频

> ID：11470807
> 
> 赞同：0
> 
> 时间：2012-07-13T12:45:49.437
> 
> 标签：ios, xcode4

> **可能重复：**
> [有没有办法可以将我的 iPhone 屏幕捕获为视频？](https://stackoverflow.com/questions/200049/is-there-a-way-i-can-capture-my-iphone-screen-as-a-video)

我知道您可以在 xcode 中从组织者那里截取屏幕截图。我查看了管理器，但找不到与此类似的拍摄视频的功能。有没有什么方法可以在 ios 设备上捕获游戏视频而无需实际拍摄屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:49:01.497

使用程序将您的 Mac 变成兼容 Airplay 的设备，例如： [http ://www.reflectionapp.com/](http://www.reflectionapp.com/)

通过这种方式，您可以将设备镜像到 Mac 屏幕上，并使用 Quicktime 等程序记录窗口。

# mysql - MySql 错误 2002 - Lion 服务器

> ID：11470808
> 
> 赞同：0
> 
> 时间：2012-07-13T12:45:53.390
> 
> 标签：mysql, installation, mysql-error-2002

我在lion服务器上安装了mysql，版本为5.25a。我还安装了 mysql 工作台。我曾尝试通过终端访问服务器，但无济于事，因为它说它缺少 mysql.sock。我浏览了诸如 /var/lib/mysql/ 和 /etc/my.cnf 之类的位置，那里什么都没有！我相信这可能是问题所在，我已经尝试重新安装、重新启动，并且我已经用谷歌搜索、搜索和搜索！

我真的需要一些帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:26:21.333

我似乎犯了一个严重的错误，我使用的是 32 位版本！安装64位，然后重启电脑。服务器自己启动了！魔法。

# c# - 您可以将 CMS Orchard 与您自己的 ASP.NET 网站一起使用吗？

> ID：11470822
> 
> 赞同：2
> 
> 时间：2012-07-13T12:47:08.447
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, orchardcms

我有一个 ASP.NET 网站，其中包含一些软件的各种实用程序脚本/页面，但没有公共网站。我想使用 Microsoft 的 Orchard CMS 创建网站供访问者查看 - 但这是否意味着我必须移动实用程序脚本？

您可以在 Orchard 旁边运行 ASP.NET 页面等，还是必须扩展 Orchard 才能为您完成这些任务？如果您可以同时运行脚本，您应该采取什么措施来防止干扰 Orchard？

我会接受有果园经验或推理能力强的人的回答。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:49:01.843

如果您谈论的是**现有的 ASP.NET WebForms 应用程序**，那么我想不会，至少这并不容易。

在这种情况下，您最好的选择是

*   使用适当的重写规则单独运行这些应用程序，因此对于最终用户来说，它看起来就像一个单独的应用程序。但是，使用这种方法，您将无法从现有应用程序访问 Orchard 功能（如用户管理）。
*   将您当前的页面重写为 MVC，并将这些页面与现有的实用程序脚本一起移动到单独的 Orchard 模块

如果您在谈论**现有的 ASP.NET MVC 应用程序**- 可以在[此处](https://stackoverflow.com/questions/5269170/integrate-existing-asp-net-mvc-application-with-orchard-cms)找到解决方案。

# asp.net-4.0 - 中继器和 tr runat=server。如何将类添加到行？

> ID：11470823
> 
> 赞同：1
> 
> 时间：2012-07-13T12:47:10.767
> 
> 标签：asp.net-4.0

我需要属性`class`（如果它不存在）位于中继器中的表行。代码里面有个问题。

**aspx**

```
<asp:Repeater runat="server">........
  <ItemTemplate> .....
      <tr runat="server" id="row" >
      ..................... 
```

**代码隐藏**

```
void rpt_ItemDataBound(object sender, RepeaterItemEventArgs e)
        {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
            {

                var row= e.Item.FindControl("row");
                //how do I use it? How do I add "class" (if not exists) to "row"?
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:50:24.960

该对象是一个 HtmlDataRow：

```
HtmlTableRow row = e.Item.FindControl("row") as HtmlTableRow;
if (row != null )
{
    if (string.isNullOrEmpty(row.Attributes["class"])) 
    {
         row.Attributes["class"] = "myClass"; 
    }
    else
    {
         row.Attributes["class"] = string.Format( "{0} {1}", row.Attributes["class"], "myClass");
    }
 } 
```

# mongoid - 使用 mongoid-paperclip gem 时未定义的方法“拒绝”

> ID：11470828
> 
> 赞同：2
> 
> 时间：2012-07-13T12:47:25.217
> 
> 标签：mongoid, paperclip

我得到的错误

```
NoMethodError (undefined method `reject' for #<ActionDispatch::Http::UploadedFile:0x007fab6ea5c370>):
  app/controllers/photos_controller.rb:3:in `create' 
```

表格（在 HAML 中）

```
 %form{:id => 'photo-upload-form', :method => 'post', :action => '/photos', :enctype => 'multipart/form-data'}
    %input{:type => 'file', :id => 'photo', :name => 'photo'}
    %input.btn{:type => 'submit', :value => 'Upload Photo'} 
```

photos_controller.rb 控制器

```
class PhotosController < ApplicationController
  def create # POST /photos
    photo = Photo.create(params[:photo])
    render :nothing => true
  end
end 
```

photo.rb 模型

```
class Photo
  include Mongoid::Document
  include Mongoid::Paperclip

  has_mongoid_attached_file :photo,
                            :storage => :s3,
                            :bucket => '<My_Bucket>',
                            :s3_credentials => {
                                :access_key_id => '<My_Access_Key>',
                                :secret_access_key => '<My_Secret_Access_Key>'
                            },
                            :styles => {
                                :thumb  => "100x100",
                                :medium => "200x200",
                                :large => "600x400"
                            }
end 
```

Gemfile（已运行捆绑安装）

```
gem 'mongoid-paperclip', :require => "mongoid_paperclip"
gem 'aws-sdk' 
```

版本

```
Ruby 1.9.3
Rails 3.2.3
Mongoid 2.4.8
Mongoid-Paperclip 0.0.7
Paperclip 3.1.2
aws-sdk 1.5.7 
```

代码相当简单，我遵循了文档。不知道我应该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T05:25:16.027

所以，问题是

```
 photo = Photo.create(params[:photo]) 
```

本来应该

```
 photo = Photo.create(params) 
```

现在，我希望你能原谅我，我去踢自己。:)

# iphone - UISplitViewController 从上到下而不是从右到左过渡

> ID：11470829
> 
> 赞同：3
> 
> 时间：2012-07-13T12:47:30.757
> 
> 标签：iphone, uisplitviewcontroller

我有一个根 UISplitViewController，其中包含一个与 DetailViewController 相关的 UINavigationController。DetailViewController 通过 storyboard push segue 调用另一个 ViewController，称为 SecondViewController。当用户点击 SecondViewController 工具栏中的 Back 按钮时，所有的 UISplitViewController 都有一个从上到下的过渡，而不是 DetailViewController 从右到左的过渡。在设计的 xCode 中，所有过渡样式属性都设置为“水平翻转”。有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:23:26.100

我在 ios 5 中遇到了同样的问题，横向。在 Master 和 Detail 控制器中添加 shouldAutorotateToInterfaceOrientation: 都解决了问题

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
} 
```

# mysql - 最快的 SQL 全文搜索

> ID：11470834
> 
> 赞同：2
> 
> 时间：2012-07-13T12:47:42.797
> 
> 标签：mysql, sqlite, full-text-search, benchmarking, fts3

我目前正在使用 SQLite FTS4 引擎，它的性能非常好。但是有人知道与 MySQL 的全文搜索（或任何其他 SQL 数据库）的任何基准/比较吗？

PS 我不是在寻找任何 Lucene/NoSQL 替代品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T14:35:23.543

来自 Percona 的 Bill Karwin 对全文搜索 MySQL、Sphinx 和 Lucene 进行了基准测试。你可以在这里找到幻灯片[http://bit.ly/M6DMsj](http://bit.ly/M6DMsj)

# android - 在android中获取db的日期值

> ID：11470835
> 
> 赞同：-2
> 
> 时间：2012-07-13T12:47:43.620
> 
> 标签：android, database, sqlite

我在我的 sqlite 数据库中以 2012-02-15 00:02:03 格式存储从日期和到日期。现在怎么能找回这个。我尝试了以下查询..我哪里出错了。

```
select category,sum(amount)  from inbox where  strftime(currentdate) > strftime(fastdate) 
```

它显示错误。谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:00:41.267

您没有正确使用 strftime。

`strftime('format', 'time')`

它需要时间的格式和字符串版本。您根本没有将时间作为字符串放入。

[您可以在此处](http://www.sqlite.org/lang_datefunc.html)查看所有不同的格式和一些示例。

你的比较应该是这样的......

strftime('%s','currentdate') > strftime('%s','fastdate')

# api - 如何检查，用户是否已经对应用程序进行了身份验证，还是必须通过 Linkedin api 进行身份验证？

> ID：11470839
> 
> 赞同：0
> 
> 时间：2012-07-13T12:48:18.650
> 
> 标签：api, popup, linkedin

我如何检查用户是否已经对应用程序进行了身份验证，或者它必须通过 Linkedin javascript api 进行身份验证？

我的问题是，如果用户没有对应用程序进行身份验证，他可以通过单击复选框来启动链接应用程序身份验证弹出窗口而不使用预定义的链接按钮？

- 我怎样才能在弹出窗口中显示这个脚本，而不是使用linkedin按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:42:36.720

加载[JavaScript API](https://developer.linkedin.com/documents/javascript-api-reference-0)，然后调用`IN.User.isAuthorized()`

[https://developer.linkedin.com/documents/inauth-inevent-and-inui](https://developer.linkedin.com/documents/inauth-inevent-and-inui)

如果用户没有授权，当他们点击复选框时，您可以打开授权弹出窗口并调用`IN.UI.Authorize().place()`

# vba - 检查文件夹中所有 CSV 文件的上次保存日期

> ID：11470841
> 
> 赞同：1
> 
> 时间：2012-07-13T12:48:30.720
> 
> 标签：vba, csv, excel, last-modified

我想真的很简单的问题。我如何修改以下内容，而不是查看 LOI.CSV，而是查看盘中文件夹中的所有 .CSV 文件？

```
LastSaved = FileDateTime("W:\Settlements\Intraday\LOT.csv")

If LastSaved < Date Then
  MsgBox ("The current day file for LOI was last saved " & LastSaved)
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:12:59.427

尝试这个

```
Const sPath As String = "W:\Settlements\Intraday\"

Sub LoopThroughFilesInAFolder()
    Dim StrFile As String

    StrFile = Dir(sPath & "\*.Csv")

    Do While Len(StrFile) > 0
        Debug.Print FileDateTime(sPath & "\" & StrFile)
        '~~> Rest of the code here
        StrFile = Dir
    Loop
End Sub 
```

# javascript - Javascript下拉菜单不起作用

> ID：11470846
> 
> 赞同：-5
> 
> 时间：2012-07-13T12:48:55.677
> 
> 标签：javascript, jquery, html, css

我正在重新设计网站，但我的 CSS/javascript 出了点问题，我无法弹出下拉菜单。我打错了JS，现在那里的JS是行不通的。

CSS

```
#menu {
font-size:large;
margin:0;
padding:0 0 0 .5em;
list-style:none;
width:100%;
text-align:left;
}

#menu ul, #menu li {
padding:0 0 0 2em;
background-color:gray;
width:auto;
border-bottom:1 gray solid;
}

/*LI display inline */
#menu li {
float:left;
background:white;
position:relative;
list-style:none;
margin:0 0 0 0;
text-align:center;

}

/*parent menu*/
#menu li a {
display:block;
padding:0 0 0 0;
height:40px;
font-weight:200;
float:left;
text-decoration:none;
text-align:center;
color:black;
border:1 1 1 1;
}

#menu li a:hover {
color:#eeeeee;
text-align:center;
}

/* style for default selected value */ 
#menu a.selected {
color:#6699FF;
}
/* submenu */ 
#menu ul {
position:absolute;
display:none;
margin:0 0 0 -1px;
padding:0;
list-style:none;
text-align:center;
}

#menu ul {
left: 0;
}
#menu ul ul {
top: -1px;
background:0063dc;
text-align:center;
color:black;
font-weight:200;
text-align:center;
}

#menu ul li {
/*overflow:hidden;*/
border-top:1px solid #eeeeee;
height:25px;
margin:0 0 0 -1px;
}

#menu ul li:hover {
position: relative;
}

#menu ul a {
display:block;
color:white;
}

#menu ul a:hover {
text-decoration:none;
} 
```

JS

$(文档).ready(函数() {

```
$("#menu ul").hover(
    function () {
    $(this).children("li").css({zIndex:90}).fadeIn(250);
    },function(){
    $(this).children("li").fadeOut(250);
});//hover 
```

}); HTML

```
 <input type="hidden" name="arav" />
                    <ul id="menu">
    <li><a href="#">HOME</a></li>
    <li><a href="#">MEMBERS</a></li>
    <li><a href="#">FACTS</a></li> 
    <li><a href="#">TEST</a></li>
    <li><a href="#">EDUCATION</a></li>
    <li><a href="#">RESOURCES</a></li>
    <li><a href="#">RESEARCH</a></li> 
    <li><a href="#">CONTACT US</a></li>

</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:51:39.443

你失踪了，`#nav`而不是你有`#menu`。

在 javascript 代码中更改为或在`#nav`您的 HTML 中更改为。`#menu``id="menu"``id="nav"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:53:35.433

在你的代码中你是你的，然后是你的 JavaScript 作为 $('#nav not menu :) 可能是这样，试试那个，让我知道你是怎么做的

更新

试试这个代码

```
$(document).ready(function() {

    $("#menu li").hover(function () {
      $(this).fadeIn(250);
    },function(){
      $(this).fadeIut(250);
    });//hover

});// document ready 
```

因为你已经选择在jquery中使用#menu li，所以不需要使用这个).children。这种方式实用得多。也只需在 CSS 文件中设置 z-index。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T12:54:11.730

更改以下内容

```
$("#nav li").hover( 
```

至

```
$("#menu li").hover( 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T12:54:11.530

将您的 jquery 代码更新为

```
$(document).ready(function() {

    $("#menu ul").hover(
        function () {
        $(this).children("li").css({zIndex:90}).fadeIn(250);
        },function(){
        $(this).children("li").fadeOut(250);
    });//hover

}); 
```

# mysql - How do I know one table's primary key field value is used in any another related tables in MySQL?

> ID：11470849
> 
> 赞同：0
> 
> 时间：2012-07-13T12:48:58.163
> 
> 标签：mysql

How do I know one table's primary key field value (eg ID) is used in any another related tables in MySQL?

Please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:55:41.223

You have to know the structure of your database. Then you can do something like

```
select * from your_table where id in 
(
    select id from ref_table1
    union
    select id from ref_table2
    union
    select id from ref_table3
) 
```

# matlab - 使用向量中的两个变量循环

> ID：11470852
> 
> 赞同：1
> 
> 时间：2012-07-13T12:49:02.297
> 
> 标签：matlab, loops

我有一个 30 向量**x**其中 x 的每个元素都**遵循**标准化的正态分布。所以在 Matlab 中，

我有：

```
for i=1:30;
x(i)=randn;
end; 
```

现在我想从向量中创建 30*30=900 个元素，**x**来制作一个 900 向量，**C**定义如下：

![在此处输入图像描述](../Images/7bbf15df245ee078a5ff999f9c68bbd5.png)

我无法正确执行两个变量（k 和 l）的循环。我有：

```
for k=1:30,l=1:30;
C(k,l)=(1/30)*symsum((x(i))*(x(i-abs(k-l))),1,30+abs(k-l));
end 
```

它说' *??? “double”类型的输入参数的未定义函数或方法“symsum”。*'

我希望从中获得一个 900 向量**C**，然后我会将其重写为矩阵。我使用两个索引 k 和 l 而不是一个的原因是因为我最终希望这些索引表示这样一个矩阵的 (k,l) 条目，所以重要的是我的 900 向量将采用以下形式**C** = [ row 1 row 2 row 3 ... row 30 ] 所以我可以使用重塑工具，即

```
C'=reshape(C,30,30) 
```

任何人都可以帮助我提供求和代码并获得这样一个 900 向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:12:06.530

让我们试着让它更有效率。

```
n = 30;
x = randn(n,1);

%# preassign C for speed
C = zeros(n); 

%# fill only one half of C, since it's symmetric
for k = 2:n
   for l = 1:k-1
      %# shift the x-vector by |k-l| and sum it up
      delta = k-l; %# k is always larger than l
      C(k,l) = sum( x(1:end-delta).*x(1+delta:end) );
   end
end

%# fill in the other half of C
C = C + C';

%# add the diagonal (where delta is 0, and thus each
%# element of x is multiplied with itself
C(1:n+1:end) = sum(x.^2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:03:38.307

在我看来，你想要一个 30x30 元素的矩阵 C。鉴于您提供的公式，我会做

```
x = randn(1,30)
C = zeros(30,30)
for k=1:30
    for l=1:30
        v = abs(k-l);
        for i =1:30-v
            C(k,l) = C(k,l) + x(i)*x(i+v);
        end
    end
end 
```

如果你真的需要这个向量，你可以从矩阵中获得它。

# java - 我们如何管理 SMS，哪种语言最好？

> ID：11470853
> 
> 赞同：3
> 
> 时间：2012-07-13T12:49:09.583
> 
> 标签：java, php, android, delphi, sms

我知道很多人一直在询问如何创建 SMS 服务器，但是由于有些人只是要求 C# 或 PHP 解决方案，因此知识的碎片化。我的情况不同：

**我需要开发两种不同的服务：**

1.  接收带有客户客户想要什么样的信息的关键工作的短信，例如“足球赛程”，并在某些数据库中搜索以发送回发件人的手机，例如“12/12 NY X LA at 14:00h \ n 13/12 DC X TX 在 21:00h";

2.  客户来到我的网站并支付了 1000 条短信“祝你们女孩圣诞快乐！” 可以根据他/她想要通知的人的类型输入数字或在我们自己的数据库中选择一个随机集合。

**为此，我可以使用：**

1.  Delphi*或*Java for Desktop/Web*或*Java for Android*或*PHP for Web；
2.  MySQL*或*火鸟
3.  个人服务器*或*互联网第 3 方服务器；
4.  Internet 上的 SMS API 服务*或*具有无限 SMS 发送包的个人手机。

所以，选择很多。我可以在手机中使用 Android 应用程序，也可以在通过 USB 连接到手机的 PC 中使用其他类型的应用程序。我还可以使用带有 3G 插槽的诺基亚上网本并通过我的应用程序对其进行管理。

我从未编写过处理任何手机网络服务的程序。

**我想从无限的 StackOverflow 用户智慧中知道的是：**

1.  在这些技术中 SMS 的可用资源问题上，哪些选项是最佳实践？
2.  是否有任何带有这些论点的已完成社区项目，我可以参与或导入任何代码/知识到我的？
3.  是否已经有包含这两种服务的 API？

我试图避免与手机网络提供商签约来提供该服务。成本将使其成为不可能。我们不打算获得丰厚的利润，只是为了在我所在的地区提供此类服务。

谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:05:03.033

全世界有大量的网络到短信网关。

通常他们为传入和传出的短信提供一个http接口。

所以最简单的解决方案是找到一个负担得起的网关提供商并设置任何类型的网络服务器来监听来自网关提供商的传入消息的 http 请求。这可以在您熟悉的任何环境中完成。

对于传出消息，您只需调用网关提供商的网址，例如
[http://examplegateway.com/send?msisdn=23443&message=Merry+Christmas+to+you+Girls&secret=somesecretash](http://examplegateway.com/send?msisdn=23443&message=Merry+Christmas+to+you+Girls&secret=somesecrethash)

这比直接在电话上编程更容易，而且通常也更便宜。至少在欧洲这里。

与网关供应商的合同有许多不同的风格，因为那里有供应商。预付、后付、批量价格、月费、现收现付，任你选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T13:00:11.587

1 ) 恕我直言，根据我的经验，选项 4 是最好的，因为此选项允许您拥有更好的可扩展性，并且您将 SMS 逻辑与您的内部逻辑分开。此外，您不需要一个人来维护任何服务器。

将来，也许您需要创建另一个服务或另一个应用程序。使用选项 4，您可以重用一些代码（或仅重用 SMS API）。现在您使用的是 Android，但在未来，您可能想创建一个 Java 桌面客户端，或者 iOS，或者 windows mobile，或者......

2）身份证：（...

3 ) IDK 2\. 我来自阿根廷，我们使用仅在此处提供的服务 (Intertron)

# python - 在 Python 中接收 REST 和响应 http 代码

> ID：11470856
> 
> 赞同：2
> 
> 时间：2012-07-13T12:49:12.137
> 
> 标签：python, rest, http-status-codes

我想在 Python 中制作非常简单的应用程序：

1.  当接收到 REST 调用 PUT/DEL/GET 时，响应代码为 200
2.  当接收到 REST 调用创建时，响应代码为 201

我尝试使用套接字，但我不知道如何发送 201。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:51:17.727

使用现有的 Web 框架，例如 Flask 或 Django。自己用套接字做这件事太费力了，不值得。

# javascript - jqGrid不显示搜索按钮

> ID：11470860
> 
> 赞同：0
> 
> 时间：2012-07-13T12:49:47.510
> 
> 标签：javascript, jquery-ui, jqgrid

我正在使用 jqGrid 来显示我的数据，但它不显示搜索按钮。这是为什么？代码如下。

```
$("#grdOpenItems").jqGrid({
  url: 'api/matchingservicewebapi/GetAllMatchItemForClient',
  datatype: 'json',
  mtype: 'GET',
  caption: 'Open Items',
  jsonReader: { root: "rows", repeatitems: false, id : "0"},
  colNames: ['Id', 'Account', 'Amount', 'Ref'],
  colModel: [
    { name: 'Amount', index: 'Amount', width: 200 },
    { name: 'Account', index: 'Account', width: 300 },
    { name: 'Amount', index: 'Amount', width: 300 },
    { name: 'Ref', index: 'Ref', width: 300 }
  ],
  rowNum: 5,
  rowList: [5, 10, 15],
  multiselect: true,
  pager: '#pagerOpenItems',
  viewrecoreds: true,
  sortname: 'Id',
  sortorder: "desc",
  imgpath: 'Themes/images'
}).navGrid(pager, {
  edit: true, add: true, del: true, refresh: true, search: true,
  searchtext: "Search" }); 
```

但它显示带有图像的页面导航按钮，而不是搜索和重新加载按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:53:49.377

一个问题：

```
viewrecoreds: true 
```

应该

```
viewrecords: true 
```

我不相信 jqGrid 中的搜索功能是神奇的，这意味着您必须连接实际的搜索代码。[查看search](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asearch_config)的文档。

# java - 下一个代码中类转换异常的确切原因是什么？

> ID：11470865
> 
> 赞同：0
> 
> 时间：2012-07-13T12:50:12.947
> 
> 标签：java, classcastexception

```
public class Main {
    public static void main(String[] args) {
        List<Object[]> list = getIt();

//        unsuccessful iteration, throws ClassCastException
        for (Object id : list) {
            System.out.println(id);
        }

//        successful iteration  
        Iterator iterator = list.iterator();
        while (iterator.hasNext()) {
            System.out.println(iterator.next());
        }
    }

    private static List<Object[]> getIt() {
        List list = new ArrayList();
        list.add(1L);
        return list;
    }
} 
```

我粗略估计会发生什么（编译器生成的迭代器包含显式转换），但想要一些好的答案，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:55:02.990

当我使用 Java 7 运行它时，我没有收到 ClassCastException，我也不希望它像`Object`main() 中那样转换对象；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:22:59.117

好吧，我认为这是因为在掩护下，java编译器会像这样生成smth：

```
Iterator iterator = list.iterator();
        while (iterator.hasNext()) {
            System.out.println((Object[])iterator.next());
        } 
```

并且显式转换给出了错误。通常，这是将泛型与原始类型混合的问题，但是，正如我已经说过的，我在这里不谈论最佳实践。

# r.java-file - R.java 不会生成。彻底寻找解决方案。清理没有帮助，我在 xml 或 res 名称中没有错误

> ID：11470870
> 
> 赞同：3
> 
> 时间：2012-07-13T12:50:23.913
> 
> 标签：r.java-file

昨天我离开我的电脑吃午饭，当我回来时，我的代码充满了红线。我发现我的 R.java 在清理后被删除了。我花了几个小时寻找解决方案，但没有任何效果。我尝试清理、构建、删除 gen 文件夹、删除调试文件、启动一个新项目并将我的项目文件放入该新项目中。我在 xml 中没有错误，并且我的所有 res 文件都已正确命名。当我开始一个新的空白项目时，r.java 就在那里，直到我通常尝试在`setContentView(R.layout.xxxx.);`命令中引用某些内容。

# reporting-services - 计算总计时忽略 SSRS 列组

> ID：11470872
> 
> 赞同：1
> 
> 时间：2012-07-13T12:50:25.123
> 
> 标签：reporting-services

我在 ssrs 中有一个这样的矩阵：

```
+--------------------+-------------------------+
|                    | Date                    |
+                    +----------+--------------+
|                    | Quantity | All Quantity |
+----------+---------+----------+--------------+
| Employee | Total   |          |              |
+          +---------+----------+--------------+
|          | Product |          |              |
+----------+---------+----------+--------------+ 
```

在这个表中`Employee`是一个`Row group`并且`Product`是一个孩子`row group`。`Date`是一个`column group`。在`Quantity`字段中，我有来自我的数据库的数字。在`All Quantity`列中，我需要`Quantity`在这个`Date group`. 但是使用我的表达式，它`All Quantity`使用来自 all 的数据进行计算`Date groups`。

我的意思是，对于日期“2012-07-13”，所有数量应该是 1000，对于日期“2012-06-12”，它应该是 500。但不是这样，在两个日期都显示 1500。我应该如何解决这个问题？

我的表达在这里：

```
Sum(Fields!Quantity.Value, "Employee") 
```

数据集如下所示：

```
Employee1   Product1    200 2012-01
Employee1   Product1    500 2012-02
Employee1   Product1    900 2012-03
Employee1   Product2    300 2012-01
Employee1   Product2    500 2012-02
Employee1   Product2    40  2012-03
Employee2   Product1    450 2012-01
Employee2   Product1    50  2012-02
Employee2   Product1    30  2012-03
Employee2   Product2    0   2012-01
Employee2   Product2    50  2012-02
Employee2   Product2    120 2012-03 
```

这是我拥有什么、得到什么以及需要什么的一个例子。

```
//IF I USE Sum(Fields!Quantity.Value)
                    Date1                       Date2
                    Quantity    All Quantity    Quantity    All Quantity
Employee1   Total   590         -               190         -
                    100         100             50          50
                    200         100             50          50
                    150         150             40          40
                    50          50              30          30
                    90          50              20          20

//IF I USE Sum(Fields!Quantity.Value, "Employee")
                    Date1                       Date2
                    Quantity    All Quantity    Quantity    All Quantity
Employee1   Total   590         -               190         -
                    100         780             50          780
                    200         780             50          780
                    150         780             40          780
                    50          780             30          780
                    90          780             20          780

//I NEED TO GET
                    Date1                       Date2
                    Quantity    All Quantity    Quantity    All Quantity
Employee1   Total   590         -               190         -
                    100         590             50          190
                    200         590             50          190
                    150         590             40          190
                    50          590             30          190
                    90          590             20          190 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:21:05.863

如果您可以在 SQL 中执行操作，它总是比在 RDL 中更快，但是，至少有一种方法可以在报告中执行。使用上面的第二个选项 Sum(Fields!Quantity.Value, "Employee")：

在我在下面指出的单元格上*，给它一个名字。它将是 textbox11 之类的，称为 EmployeeTotal。在我用插入符号^标记的单元格中，输入此表达式

```
=ReportItems!EmployeeTotal.Value 
```

然后你会得到你想要的（见附图）。[1](http://i.stack.imgur.com/gSPVy.png)

```
 Date1                       Date2
                    Quantity    All Quantity    Quantity    All Quantity
Employee1   Total   590*         -              190         -
                    100         590^            50          190
                    200         590^            50          190
                    150         590^            40          190
                    50          590^            30          190
                    90          590             20          190 
```

下次，如果您提供与您提供的要显示的内容相匹配的数据集示例，我们将更容易为您提供帮助。

例如，在我跑来测试这个的模型中，我使用这个查询来创建我认为是你真正的数据集：

```
![SELECT        'Employee1' AS Employee, 'Product1' AS Product, 100 AS Quantity, '2012-01' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product2' AS Product, 200 AS Quantity, '2012-01' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product3' AS Product, 150 AS Quantity, '2012-01' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product4' AS Product, 50 AS Quantity, '2012-01' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product5' AS Product, 90 AS Quantity, '2012-01' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product1' AS Product, 50 AS Quantity, '2012-02' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product2' AS Product, 50 AS Quantity, '2012-02' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product3' AS Product, 40 AS Quantity, '2012-02' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product4' AS Product, 30 AS Quantity, '2012-02' AS Date
UNION ALL
SELECT        'Employee1' AS Employee, 'Product5' AS Product, 20 AS Quantity, '2012-02' AS Date 
```

# sqlite - 附加两个内存数据库

> ID：11470874
> 
> 赞同：0
> 
> 时间：2012-07-13T12:50:43.733
> 
> 标签：sqlite

我每秒都在收集数据并将其存储在“：memory”数据库中。将数据插入此数据库是在事务中。

每次向服务器发送一个请求，服务器将从第一个内存中读取数据，进行一些计算，将其存储在第二个数据库中并将其发送回客户端。为此，我正在创建另一个“:memory:”数据库来存储第一个数据库的聚合信息。我不能使用相同的数据库，因为我需要进行一些大型计算才能获得聚合结果。这不能在事务内部完成（因为如果一个集合需要 5 秒，我将丢失所有 4 秒的数据）。我无法在同一个数据库中创建表，因为在收集和插入原始数据时我将无法写入聚合数据（它在事务内部并且每隔一秒收集一次）

-- 有时我想从两个数据库中检索数据。如何链接这两个内存数据库？使用附加数据库 stmt，我可以将第二个数据库附加到第一个数据库。但问题是下次当请求到来时，我将如何检查第二个数据库是否存在？

-- 假设，我将第二个内存数据库附加到第一个内存数据库。当我们将数据写入第一个数据库时，它会锁定第二个数据库吗？

-- 有没有其他方法来存储这些聚合数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:15:40.000

据我了解，我认为您根本不需要两个数据库。我想您误解了 sql 中事务的概念。

如果您正在开始一个事务，其他进程仍将被允许读取数据。如果您正在读取数据，您可能不需要数据库锁。

**可能的工作流程如下所示。**

1.  向数据库中插入一些数据（仅在插入过程中使用事务）
2.  对数据库执行大量计算（但不要使用事务，否则会阻止其他进程将任何数据插入数据库）。即使这一步包括非常繁重的计算，您仍然可以使用另一个进程插入和读取数据，因为`SELECT`语句不会锁定您的数据库。
3.  将结果写入数据库（同样，通过使用事务）

只需确保不在事务中执行繁重的计算。

如果您想更详细地了解此解决方案，请查看有关 sqlite3 的文件锁定行为的文档：[http ://www.sqlite.org/lockingv3.html](http://www.sqlite.org/lockingv3.html)

# jquery - Jquery 组合单击和更改以执行一次

> ID：11470879
> 
> 赞同：2
> 
> 时间：2012-07-13T12:51:04.153
> 
> 标签：jquery

> **可能重复：**
> [一次将函数绑定到不同元素的多个事件](https://stackoverflow.com/questions/4805818/bind-function-to-multiple-events-of-different-elements-at-once)

我需要为链接单击和更改事件执行相同的代码

```
$(".foo").click(function() {

  //same code

}

$(".bar").change(function() {

  //same code

} 
```

我将实现的正常方法是创建一个函数，然后在每个单独的事件上触发该函数 - 但我想知道 jquery 是否有更简单的方法来处理这个问题，类似于

```
 $(".bar, .foo"). 
```

但显然有不同的事件方法。

为了澄清我需要一个点击和一个更改，但不是同时点击和更改，这有意义吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T12:52:51.743

```
$(".foo, .bar").on("click change", function(e){

    var myClass = $(this).is(".foo") ? "foo" : "bar";

    if(e.type === "change"){
         //DO STUFF UNIQUE TO CHANGE
    }
    else if(e.type === "click") {
         //DO STUFF UNIQUE TO CLICK
    }

    //DO STUFF THAT IS THE SAME

}); 
```

# tree - 修改后的二叉搜索树进行排序？

> ID：11470888
> 
> 赞同：1
> 
> 时间：2012-07-13T12:51:23.243
> 
> 标签：tree, complexity-theory, sorting, binary-search-tree

我必须对数组进行排序。除了已经存在的排序类型之外，我想知道这样的算法是否可行，以及它的复杂性可能是什么。

我有一个要排序的数组。我创建了一个二叉搜索树。

所以如果我将数组的所有元素都插入到BST中，然后在进行树的中序遍历时，将它们一个一个地赋值回数组，我将得到一个排序的结果。（尽管由于树节点而消耗了更多的空间复杂性。不是就地排序。）

```
int i=0;

void sort_by_inorder(node *n)
{
    if(n==NULL)
    {
        return;
    }
    sort_by_inorder(n->leftchild);
    array[i++]=n->data;
    sort_by_inorder(n->rightchild);
} 
```

我知道 BST 不允许重复插入，所以也许我们可以考虑将 BST 插入算法修改为 <= 用于左子树，或者 >= 用于右子树。

这会是一个很好的实现（可行）吗？复杂度会是多少？

遍历复杂度是平均的`O(n)`。而插入只是`O(log n)`. 因此，据我所知，这应该是一种有效的算法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:10:28.847

在一般的二叉搜索树中，插入时间在最坏的情况下实际上是 O(n)。您需要一个平衡树才能使操作为 O(log(n))。

因此，在一般 BST 中，您的方法允许您在 O(n^2) 中进行排序。

# php - 问题解析 XML，未知编码

> ID：11470903
> 
> 赞同：0
> 
> 时间：2012-07-13T12:52:16.323
> 
> 标签：php, xml, character-encoding, xml-parsing, simplexml

我正在尝试读取 XML 提要，我不确定编码是否正确，但它设置为 UTF-8，当我尝试通过 SimpleXML 在 PHP 中解析它时，它在“BöðVar”上出错（注意特殊的“ o" 字符）。

```
libxml_use_internal_errors(TRUE);
$XMLOutputXMLObj = simplexml_load_string($xml_string);
if($XMLOutputXMLObj !== FALSE)
{
//do stuff
} 
```

这就是我得到的一个错误：

> 实体“ouml”未定义
> 
> 实体“eth”未定义

我尝试以各种方式使用“mb_convert_encoding”，但失败了。

我怎样才能为任何角色解决这个问题？IE**无需手动将**ö 替换为 &214; （当然有#）？

更好......有没有办法让它这样 SimpleXML 不关心它正在解析什么，只要标签是完整的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:58:44.903

您是否尝试过在节点的文本/值之前和之后使用`<![CDATA[`and标记来转义节点中的 XML 数据？`]]>`例如

```
<?xml version="1.0" encoding="UTF-8"?>
<fmsdata>
  <result><![CDATA[Success !@#$%^&*()]]></result>
</fmsdata> 
```

# objective-c - 在 UIView 动画之间添加延迟

> ID：11470905
> 
> 赞同：0
> 
> 时间：2012-07-13T12:52:23.247
> 
> 标签：objective-c, animation, delay

我在 UIView 的 touchesBegan 方法中有一些操作和动画，我将其子类化并作为类附加到我的视图中。我需要动画之间的一些延迟。

代码：

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // Add delay to imitate the hold for touch 1 second and if true continue
    // else cancel everything

    [self animateViewSize]; // Here animates the view frame

    // Add delay until sizing animation ends.....

    [self animateViewFlip]; // Here animates the view flip y axis

    [[NSNotificationCenter defaultCenter] postNotificationName:@"A Notification" object:self];
    // Notify the superview Controller that touch happened and do some operations with  animations too...

    // Some variables appending values for the UIView location when it touched
}

- (void) animateCardSize
{
    // Animate using UIView animation
}
- (void) animateFlipView
{
     // Animate flip using CABasicAnimation
} 
```

这是基本思想......

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:58:03.473

您可以使用基于块的 UiView 动画来做到这一点：

```
[UIView animateWithDuration:0.4 animations:^{
    //Your first anim here
} completion:^(BOOL finished){
    //Your second anim here
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:18:26.507

你也可以在你的方法中使用

```
[self performSelector:@selector(animateCardSize) withObject:nil afterDelay:(2.0f)];
//2.0 and animateCardSize as examples 
```

# android - 如何从对象中的 ArrayList 获取项目值

> ID：11470908
> 
> 赞同：-1
> 
> 时间：2012-07-13T12:52:41.387
> 
> 标签：android, xml, object, arraylist

我正在尝试处理来自 API 的 XML plist 数据，但是遇到了很多问题！

数据是 Apple plist 格式，我正在使用来自[此链接](https://stackoverflow.com/questions/3904418/apple-plist-form-of-xml-can-i-parse-it-through-android-java)的 Akos 代码进行解析，这似乎工作得很好。它将字符串、对象解析为 HashMap。我能够获得给定键的值，即。

```
Object childItems = items.mPlistHashMap.get("childItems");
System.out.println(childItems.getClass());
System.out.println(childItems); 
```

childItems.getClass() 显示为 -*类 java.util.ArrayList*

childItems 的 LogCat 输出显示 - **[{remoteFilePath=/Picture.png, host=www.host.com, ratingCount=1, targetId=82, commentCount=1, externalId=/demo.host.com/Private/Picture.png , fileSize=23738, entity_name=Item, memberAccessLevel=0, leaderAccessLevel=0, name=Picture.png, target=SystemUser, ownerAccessLevel=3, tagCount=1}, {lastName=Test, entity_name=User, username=Test, host =www.host.com, userId=82, firstName=Test, password=TestPwd, loginName=Test}, {typeId=0, entity_name=UserType, name=UserType_Teacher}]**

我认为我可以使用这个 ArrayList，但这是我要撤消的地方。例如，我想获取 remoteFilePath 值，并将其显示在 ListView 中（已经为本地文件工作）。

上面的示例 childItems 列表仅包含一个文件 (Picture.png)，但此列表可以包含任意数量的文件，因此我需要迭代列表并获取要显示的 remoteFilePath 的任何值。

任何帮助表示赞赏，我只是不知道如何“深入”到这个列表中，或者是否需要将 childItems 对象转换为新的 Array 等等。

如果我遗漏任何重要信息，请询问，我将提供:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:33:34.930

```
ArrayList<?> childItems = (ArrayList<?>) elockeritems.mPlistHashMap.get("childItems"); 
```

我现在可以处理这个了。我需要了解基本面！

# wpf - 在WPF中拖放后如何找出项目放置在哪个元素中

> ID：11470910
> 
> 赞同：0
> 
> 时间：2012-07-13T12:52:47.110
> 
> 标签：wpf

我如何知道拖放元素放置在哪个元素中？例如，我有 3 个按钮，分别命名为 Button1、Button2、Button3。拖动树视图项目并将其放入 3 个按钮之一。我怎样才能找出它被放置在哪个按钮中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:00:28.433

按钮控件有一个 OnDrop 方法和一个关联的 Drop 事件。您只需要连接每个按钮的事件。

[掉落事件](http://msdn.microsoft.com/en-us/library/system.windows.uielement.drop.aspx)

# windows - 剪贴板复制动作——内容是谁的文件？

> ID：11470912
> 
> 赞同：0
> 
> 时间：2012-07-13T12:52:51.673
> 
> 标签：windows, linux, copy, clipboard, paste

我需要跟踪 Windows 和 Linux 中的复制粘贴操作（我假设是 gnome/unity），以便我的应用程序监控剪贴板内容和**原始文件的位置（路径）**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:46:16.880

剪贴板传输包含数据，而不是元数据。它们可能根本不是“文件”。如果您想要一个标准的 GUI 隐喻来移动文件，也许您可​​以考虑拖放。

# asp.net - 在 asp.net 中使用键盘设置焦点

> ID：11470919
> 
> 赞同：2
> 
> 时间：2012-07-13T12:53:23.293
> 
> 标签：asp.net, access-keys

我正在创建一个登录页面，并希望让用户能够灵活地使用键盘控制焦点。我正在使用 AccessKey，但它似乎不起作用。任何帮助将不胜感激。

下面是我的仅用于电子邮件字段的 HTML。

```
<table>
    <tr>
      <td>
          <div class="loginLabel">
                <span class="emailPasswordText"><u>E</u>mail</span>
          </div>
          <asp:TextBox ID="txtUserName" runat="server"
               TabIndex="1" CssClass="inputCredential" MaxLength="60"
               AccessKey="E">
           </asp:TextBox>
      </td>
   </tr>
</table> 
```

我尝试在 Mozilla Firefox 中使用 Alt+E 和 Ctrl+E。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:07:47.103

我相信在 Firefox 中，访问键与`Alt`+`Shift`修饰键一起使用。所以如果你按`Alt`+ `Shift`+`E`你应该得到你的文本框。

[http://en.wikipedia.org/wiki/Access_key](http://en.wikipedia.org/wiki/Access_key)

Opera 有一个很酷的功能，按下`Shift`+会`Esc`列出页面上所有可用的访问键。它可能会帮助您进行调试。

# google-app-engine - 如何在应用程序范围而不是用户范围内使用 api 创建谷歌文档

> ID：11470925
> 
> 赞同：0
> 
> 时间：2012-07-13T12:53:38.040
> 
> 标签：google-app-engine

我想创建一个应用程序，它将使用谷歌驱动器来创建和存储文档。但是我有一个自定义身份验证模块，不会使用 gmail 身份验证。

打包的文档需要在应用程序范围内，而不是用户范围内。

我的意思是应用程序应该登录到谷歌驱动器并创建文档，而不是用户。

我该怎么做呢 ？

谢谢，穆尔塔萨

# iphone - iPhone应用商店，如何为客户发布预览应用

> ID：11470928
> 
> 赞同：0
> 
> 时间：2012-07-13T12:53:45.207
> 
> 标签：iphone, app-store, release, app-store-connect

我知道您可以发布您的应用程序抛出 iTunes 连接并使用 50 redoom 代码供客户免费下载。

但是，在我实际发布到应用商店之前，我可以使用预览商店让客户进行预览吗？

干杯菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:37:26.503

测试飞行是选项！！！！

我可以在：[testflight 的官方网站上阅读](https://www.testflightapp.com/)

# java - 获取带有希伯来字符 / UTF-8 的网页内容

> ID：11470929
> 
> 赞同：1
> 
> 时间：2012-07-13T12:53:47.150
> 
> 标签：java, android, apache, hebrew

我正在尝试将下一个网页内容（原样）带到我的 android 应用程序中的 TextView 中。

[http://www.kavim-t.co.il/include/getXMLStations.asp?parent=56_%20_2](http://www.kavim-t.co.il/include/getXMLStations.asp?parent=56_%20_2)

以下是 Chrome 与 Activity 的结果：

![在此处输入图像描述](../Images/2e90fb653d4df176e8014bb5005fa8e5.png)

如您所见，问题在于希伯来语/UTF-8/Windows-1255 字符显示为“???”。

我正在使用下一个代码（使用 org.apache.http）：

```
TextView tv = (TextView) findViewById(R.id.tv1);

HttpClient client = new DefaultHttpClient();
client.getParams().setParameter(CoreProtocolPNames.HTTP_CONTENT_CHARSET, HTTP.UTF_8);
HttpGet request = new HttpGet("http://www.kavim-t.co.il/include/getXMLStations.asp?parent=56_%20_2");

HttpResponse response = null;
response = client.execute(request);
BufferedReader rd = null;
rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

String line = "";
while ((line = rd.readLine()) != null) {
    tv.append(line);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T15:07:21.903

尝试为 InputStreamReader 指定字符集

[http://developer.android.com/reference/java/io/InputStreamReader.html#InputStreamReader(java.io.InputStream, java.lang.String)](http://developer.android.com/reference/java/io/InputStreamReader.html#InputStreamReader%28java.io.InputStream,%20java.lang.String%29)

```
rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:20:18.697

据我所知

Android 2.2 及更高版本支持希伯来语。

如果您在低于 2.2 版本的设备中进行测试，您将无法看到希伯来语文本

尝试在android 2.2及以上版本测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T19:51:40.607

这确实在一定程度上完善了这里给出的解决方案（至少对于 Eclipse 用户而言）。

如果您正在使用 Eclipse 并且控制台一直显示“???????” 而不是 UTF-8 非英语字符，请按照以下链接中的说明进行操作（在几乎失去理智后帮助了我）：

[http://decoding.wordpress.com/2010/03/18/eclipse-how-to-change-the-console-output-encoding/](http://decoding.wordpress.com/2010/03/18/eclipse-how-to-change-the-console-output-encoding/)

# youtube - 删除此脚本中的 YouTube 相关视频

> ID：11470930
> 
> 赞同：0
> 
> 时间：2012-07-13T12:53:47.537
> 
> 标签：youtube

我已经看到这个脚本可以自动静音嵌入在网站上的 youtube 中的视频：

[如何自动播放静音的 Youtube 视频 (IFrame API)？](https://stackoverflow.com/questions/8869372/how-do-i-automatically-play-a-youtube-video-iframe-api-muted)

该代码可在小提琴上找到：

[http://jsfiddle.net/9RjzU/3/](http://jsfiddle.net/9RjzU/3/)

但是我想知道要在此代码中添加什么以防止出现相关视频？

谢谢阿扎姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:10:11.133

在您的情况下，只需添加`'rel': 0`参数`PlayerVars`，如下所示：

```
function onYouTubePlayerAPIReady() {

    player = new YT.Player('player', {

        playerVars: { 
                      'autoplay': 1, 
                      'controls': 1,
                      'autohide': 1,
                      'wmode': 'opaque',
                      'rel': 0 
                    },

        videoId: 'JW5meKfy3fY',

        events: { 'onReady': onPlayerReady }
    });
} 
```

`iframe`您可能还对 YouTube API可用参数的完整列表感兴趣，可在此处找到： [https ://developers.google.com/youtube/player_parameters#Parameters](https://developers.google.com/youtube/player_parameters#Parameters)

# javascript - 来自用户输入的字母阴影

> ID：11470932
> 
> 赞同：-1
> 
> 时间：2012-07-13T12:53:52.657
> 
> 标签：javascript, css, animation, raphael

目标：用户在用户输入字段中输入名称，选择动画按钮，名称垂直打印，每个字母包含每个字母的阴影。Javascript 库 Raphael 可能是可取的。

问题：到目前为止，我所拥有的是并排垂直打印两次的名称。显然第二列应该是作为阴影的字母，但我不知道如何将它们的样式更改为看起来像阴影。

我的经理给了我一个提示：“我必须在文本下方创建第二个文本行......我在上面使用了 .blur() 方法。如果我必须给你另一个提示，我会提示你门。”

我在这里遇到了一些真正的麻烦。如果有人有建议，解决方案，任何东西，将不胜感激。

```
<html> 
<head> 
<script src="raphael-min.js"></script> 
<script src="jquery-1.7.2.js"></script>  
<script type="text/javascript">   

function animate() {  

var txt = document.getElementById("words").value;
var area = txt;
var splittxt = txt.split("");

document.getElementById("letters").innerHTML = "";
document.getElementById("letters2").innerHTML = "";
var i;
for (i = 0; i < splittxt.length; i++) {
document.getElementById("letters").innerHTML = document.getElementById("letters").innerHTML + splittxt[i] + "<br>";
document.getElementById("letters2").innerHTML = document.getElementById("letters2").innerHTML + splittxt[i] + "<br>";
}
//displays how many symbols are in text box and what is in text box
document.getElementById("num").innerHTML= txt.length;          
document.getElementById("msg").innerHTML = txt;          

r.clear();      
// Make our pink rectangle 
ellipse = r.ellipse(40, 15, 30, 5).attr({"fill": "#969696", "stroke": "none"}); 
ellipse.glow({width:10});  
}      

</script>
<style type="text/css">
#letters
{
background-color:yellow;
width:25px;
float:left;
}

#letters2
{
letter-spacing:0px;
display:block;
-moz-transform: rotate(80deg);  
margin-left:90px;
margin-top:80px;
width:25px;
color:#DEDEDE;
}
</style>

</head> 

<body>  

Text: <input type="text" id="words" value="" /> 
<input type="button" value="Animate" onclick="animate()" /> 
<div id='msg'></div> 
<div id='num'></div>
<div id='letters'></div>
<div id="letters2"></div>
<div id="draw-here-raphael" style="height: 200px; width: 400px; margin-top:0px;"> 
</div> 
<div id="elps" style="margin-left:100px;"/>  

<script type="text/javascript"> //all your javascript goes here  
var r = new Raphael("draw-here-raphael");  

</script>

</body> 
</html> 
```

健康长寿·繁荣昌盛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:54:17.230

你真的需要拉斐尔吗？我所做的只是将您的文字打印到一个元素上并使用 css 的 text-shadow 获得阴影。为了获得垂直文本，我`</br>`在每个字母后添加了一个。

看看小提琴：http: [//jsfiddle.net/joplomacedo/wVGbF/](http://jsfiddle.net/joplomacedo/wVGbF/)

这是您看不到小提琴的代码：

HTML

```
Text: <input type="text" id="words" value="" /> 
      <input id="animateBtn" type="button" value="Animate" />
      <div class="print"></div> 
```

CSS

```
.print {
    font: 44px/0.8em "Lobster", cursive;
    color: gold;
    text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.6);
}​ 
```

JS

```
var join = Array.prototype.join;

$('#animateBtn').on('click', function() {
    var txt = $('#words').val(),
        spaced_txt = join.call(txt, "</br>");

    $('.print').html(spaced_txt);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T15:27:59.973

这里也是 Raphael 的文本输出功能：

```
function draw_text() {
  var txt = document.getElementById("words").value;
  var posy = txt.length*10;
  r.clear();
  var attr = {font: "50px Helvetica", opacity: 0.5};
  var text = r.text(40, 40+posy, txt).attr(attr).attr({fill: "#0f0"}); // underlayer or "shadow"
  text.attr({transform: "r270"}); // rotate 270 degrees
  var text2 = r.text(43, 43+posy, txt).attr(attr).attr({fill: "#aa0"}); // text above
  text2.attr({transform: "r270"}); // rotate 270 degrees
  r.safari();
}

var r = new Raphael("draw-here-raphael"); 
```

基于此[示例](http://raphaeljs.com/text-rotation.html)的完整脚本在[此处](http://pastebin.com/rKdMfawk)。

# css - 为 IE 转换 CSS 的工具/站点？

> ID：11470935
> 
> 赞同：-2
> 
> 时间：2012-07-13T12:53:55.727
> 
> 标签：css, internet-explorer, plugins

是否有任何网站/工具可以转换 CSS 以使其与 IE 兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:54:55.227

我会非常怀疑 - 没有一揽子规则，因此很难自动化。为了让一些 CSS3 在 IE 中工作，你可以使用类似 css3pie 的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:58:13.400

我不这么认为；）那么脚本应该如何知道它应该是什么样子呢？使用正确的 CSS 并检查您可以做什么以及在 IE 中可以做什么以及哪个版本。

大多数问题导致人们没有使用正确的 CSS 并且有错误的元素或其他东西。

以下是提示的一些链接：

[http://scarfoo.com/archives/16](http://scarfoo.com/archives/16)
[http://www.webcredible.co.uk/user-friendly-resources/css/more-css-tricks.shtml](http://www.webcredible.co.uk/user-friendly-resources/css/more-css-tricks.shtml)

**编辑：**

[您可以使用jigsaw.w3.org](http://jigsaw.w3.org)检查您的 CSS 文件以检查其是否有效。

# javascript - 在 Javascript 中的函数之间共享变量

> ID：11470937
> 
> 赞同：0
> 
> 时间：2012-07-13T12:54:08.037
> 
> 标签：javascript

我有如下代码：

```
MyClass = {

   init: function(){
   marker = 0;
   //I call foo() and bar() from here
   },

   foo: function(){
   //I want to access & update marker here
   },

   bar: function(){
   //This function also accesses updates marker
   }
}; 
```

我可以`marker`通过将它作为参数传递给函数来访问它，但我将无法更新它。

那么，我如何管理创建一个变量`marker`以使所有三个函数都可以共享它？我不想在外面写任何代码`MyClass`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T12:55:13.397

放入`marker`MyClass，而不是 init，它现在所在的位置。

```
MyClass = {
   // marker is in MyClass now
   marker: 0,

   init: function(){
      console.log(this.marker);
   //I call foo() and bar() from here
   },

   foo: function(){
   //I want to access & update marker here
   },

   bar: function(){
   //This function also accesses updates marker
   }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:04:34.407

```
var MyClass = {
   marker: 0,

   init: function(){
     this.foo();
     this.bar();
     console.log(marker);
   },

   foo: function(){
     marker = 4;
   },

   bar: function(){
     marker = marker * 2;
   }
}; 
```

如果你执行`MyClass.init()`，它会在控制台中打印 8。

# javascript - 单击按钮然后弹出一个对话框然后提交按钮

> ID：11470940
> 
> 赞同：0
> 
> 时间：2012-07-13T12:54:14.387
> 
> 标签：javascript, jquery

```
<button onclick="productAddToCartForm.submit(this)" class="button btn-cart" title="Add to Cart" type="button"><span><span>Add to Cart</span></span></button> 
```

js代码：</p>

```
var productAddToCartForm = new VarienForm('product_addtocart_form');
            productAddToCartForm.submit = function(){
                    if (this.validator.validate()) {
                            this.form.submit();
                    }
            }.bind(productAddToCartForm); 
```

以上是正常步骤。单击按钮，然后提交表单。现在，我想在提交表单之前添加一个步骤。步骤是。单击按钮时，会弹出一个对话框。关闭对话框时。上面有一些内容。然后提交表格。

1，我想在页面中使用jquery。`productAddToCartForm.submit = function(){....}`如果页面已经加载了jquery library。但是我不知道如何在函数中添加jquery代码。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:00:05.513

**编辑：**这是我的答案的 jsfiddle 示例-> [jsfiddle](http://jsfiddle.net/se8Zt/6/)

如果您的弹出窗口将是一个 HTML 页面，您可以绑定到按钮上的单击事件，显示/关闭弹出窗口，然后调用 form.submit();

给你的按钮并形成一个ID：

```
<form id="myForm" action="/formsubmit.html" method="post"></form>
<button id="submitButton" class="button btn-cart" title="Add to Cart" type="button"><span><span>Add to Cart</span></span></button> 
```

然后用 jQuery 做这样的事情

```
$(document).ready(function () {
     $('#submitButton').click(function (e) {
         e.preventDefault(); //prevent the default action

         //show your popup
         //hide your popup

         $('#myForm').submit(); //submit the form

     });
}); 
```

如果弹出窗口上有一个用户将单击以关闭它的按钮，则可以通过绑定到用于关闭弹出窗口的任何元素的单击事件来调用提交函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:02:27.857

您可以使用 jQuery [show()](http://api.jquery.com/show/)和[hide()](http://api.jquery.com/hide/)。

```
 var productAddToCartForm = new VarienForm('product_addtocart_form');
                productAddToCartForm.submit = function(){
                        if (this.validator.validate()) {
                       $("#YourPopUp").show('slow', function() {
                       $('#YourPopUp').hide(1000,'slow', function() {
                       productAddToCartForm.form.submit();
                       });
                       });
                      }       
                    }
                }.bind(productAddToCartForm); 
```

# php - 如何在 php 扩展中包装 c++ 类？

> ID：11470945
> 
> 赞同：13
> 
> 时间：2012-07-13T12:54:30.830
> 
> 标签：php, c++, php-extension

我创建了 4 个文件来在 php Extension 中包装一个 c++ 类。现在我想运行用于包装的代码。但我对此一无所知。如何运行代码？

我正在学习[http://devzone.zend.com/article/4486](http://devzone.zend.com/article/4486)上的教程，这是我目前拥有的图形代码： **vehicle.cc**

```
#include "php_vehicles.h"
#include "car.h"

zend_object_handlers car_object_handlers;

struct car_object {
    zend_object std;
    Car *car;
};
zend_class_entry *car_ce;
void car_free_storage(void *object TSRMLS_DC)
{
    car_object *obj = (car_object *)object;
    delete obj->car; 

    zend_hash_destroy(obj->std.properties);
    FREE_HASHTABLE(obj->std.properties);

    efree(obj);
}

zend_object_value car_create_handler(zend_class_entry *type TSRMLS_DC)
{
    zval *tmp;
    zend_object_value retval;

    car_object *obj = (car_object *)emalloc(sizeof(car_object));
    memset(obj, 0, sizeof(car_object));
    obj->std.ce = type;

    ALLOC_HASHTABLE(obj->std.properties);
    zend_hash_init(obj->std.properties, 0, NULL, ZVAL_PTR_DTOR, 0);
    zend_hash_copy(obj->std.properties, &type->default_properties,
        (copy_ctor_func_t)zval_add_ref, (void *)&tmp, sizeof(zval *));

    retval.handle = zend_objects_store_put(obj, NULL,
        car_free_storage, NULL TSRMLS_CC);
    retval.handlers = &car_object_handlers;

    return retval;
}

PHP_METHOD(Car, __construct)
{
long maxGear;
    Car *car = NULL;
    zval *object = getThis();

    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "l", &maxGear) == FAILURE) {
        RETURN_NULL();
    }

    car = new Car(maxGear);
    car_object *obj = (car_object *)zend_object_store_get_object(object TSRMLS_CC);
    obj->car = car;

}
PHP_METHOD(Car, shift)
{
}
PHP_METHOD(Car, accelerate)
{
Car *car;
    car_object *obj = (car_object *)zend_object_store_get_object(
        getThis() TSRMLS_CC);
    car = obj->car;
    if (car != NULL) {
        car->accelerate();
    }
}
PHP_METHOD(Car, brake)
{
}
PHP_METHOD(Car, getCurrentSpeed)
{
Car *car;
    car_object *obj = (car_object *)zend_object_store_get_object(
        getThis() TSRMLS_CC);
    car = obj->car;
    if (car != NULL) {
        RETURN_LONG(car->getCurrentSpeed());
    }
    RETURN_NULL();
}
PHP_METHOD(Car, getCurrentGear)
{
}

function_entry car_methods[] = {
    PHP_ME(Car,  __construct,     NULL, ZEND_ACC_PUBLIC | ZEND_ACC_CTOR)
    PHP_ME(Car,  shift,           NULL, ZEND_ACC_PUBLIC)
    PHP_ME(Car,  accelerate,      NULL, ZEND_ACC_PUBLIC)
    PHP_ME(Car,  brake,           NULL, ZEND_ACC_PUBLIC)
    PHP_ME(Car,  getCurrentSpeed, NULL, ZEND_ACC_PUBLIC)
    PHP_ME(Car,  getCurrentGear,  NULL, ZEND_ACC_PUBLIC)
    {NULL, NULL, NULL}
};

PHP_MINIT_FUNCTION(vehicles)
{
    zend_class_entry ce;
    INIT_CLASS_ENTRY(ce, "Car", car_methods);
    car_ce = zend_register_internal_class(&ce TSRMLS_CC);
    car_ce->create_object = car_create_handler;
    memcpy(&car_object_handlers,
        zend_get_std_object_handlers(), sizeof(zend_object_handlers));
    car_object_handlers.clone_obj = NULL;
    return SUCCESS;
}

zend_module_entry vehicles_module_entry = {
#if ZEND_MODULE_API_NO >= 20010901
    STANDARD_MODULE_HEADER,
#endif
    PHP_VEHICLES_EXTNAME,
    NULL,        /* Functions */
    PHP_MINIT(vehicles),        /* MINIT */
    NULL,        /* MSHUTDOWN */
    NULL,        /* RINIT */
    NULL,        /* RSHUTDOWN */
    NULL,        /* MINFO */
#if ZEND_MODULE_API_NO >= 20010901
    PHP_VEHICLES_EXTVER,
#endif
    STANDARD_MODULE_PROPERTIES
};

#ifdef COMPILE_DL_VEHICLES
extern "C" {
ZEND_GET_MODULE(vehicles)
}
#endif 
```

**php_vehicles.h**

```
#ifndef PHP_VEHICLES_H
#define PHP_VEHICLES_H

#define PHP_VEHICLES_EXTNAME  "vehicles"
#define PHP_VEHICLES_EXTVER   "0.1"

#ifdef HAVE_CONFIG_H
#include "config.h"
#endif 

extern "C" {
#include "php.h"
}

extern zend_module_entry vehicles_module_entry;
#define phpext_vehicles_ptr &vehicles_module_entry;

#endif /* PHP_VEHICLES_H */ 
```

**配置.m4**

```
PHP_ARG_ENABLE(vehicles,
    [Whether to enable the "vehicles" extension],
    [  --enable-vehicles      Enable "vehicles" extension support])

if test $PHP_VEHICLES != "no"; then
    PHP_REQUIRE_CXX()
    PHP_SUBST(VEHICLES_SHARED_LIBADD)
    PHP_ADD_LIBRARY(stdc++, 1, VEHICLES_SHARED_LIBADD)
    PHP_NEW_EXTENSION(vehicles, vehicles.cc car.cc, $ext_shared)
fi 
```

**汽车.h**

```
#ifndef VEHICLES_CAR_H
#define VEHICLES_CAR_H

// A very simple car class
class Car {
public:
    Car(int maxGear);
    void shift(int gear);
    void accelerate();
    void brake();
    int getCurrentSpeed();
    int getCurrentGear();
private:
    int maxGear;
    int currentGear;
    int speed;
};

#endif /* VEHICLES_CAR_H */ 
```

**汽车.cc**

```
#include "car.h"

Car::Car(int maxGear) {
    this->maxGear = maxGear;
    this->currentGear = 1;
    this->speed = 0;
}

void Car::shift(int gear) {
    if (gear < 1 || gear > maxGear) {
        return;
    }
    currentGear = gear;
}

void Car::accelerate() {
    speed += (5 * this->getCurrentGear());
}

void Car::brake() {
    speed -= (5 * this->getCurrentGear());
}

int Car::getCurrentSpeed() {
    return speed;
}

int Car::getCurrentGear() {
    return currentGear;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T03:58:51.407

1.  确保模块在 PHP 中正确加载。您可以在命令行上进行检查。应该有一个与您的扩展名对应的条目 $ php -i | grep 车辆

2.  在 PHP 中，您可以执行以下操作

    `<?php $oCar = new Car(); $oCar->shift(1); ?>`

请参阅此处了解更多信息：[http ://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/](http://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T13:10:48.443

您应该首先编译模块。尝试下一个命令：

```
phpize && configure && make 
```

进入你的源代码目录出现编译好的so-module vehicle.so。通过创建具有“extension=/path/to/vehicles.so”内容的相应 ini 文件将该模块添加到您的 php 中，并将它们包含到 php.ini 中。不如试试

```
php -m | grep vehicles 
```

如果您看到模块名称，请尝试在您的 php 代码中使用创建的类。

# java - 如何通过 OsloneTimeZone 数据库在 Java 1.6 中获取 TimeZone 值

> ID：11470946
> 
> 赞同：0
> 
> 时间：2012-07-13T12:54:36.323
> 
> 标签：java, timezone

如何通过 OsloneTimeZone 数据库获取 Java 1.6 中的 TimeZone 值。

我正在传递 base64 字符串 timeZone lyk。“亚洲/加尔各答”。之后，我必须以 + 5.5 之类的数字格式获得这个 Tiezone 值。

如何做到这一点请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:36:50.683

相当简单。这个时区数据库内置在 java 1.6 中，但是您可能需要更新您的 tzdata 版本，请[在此处查看](http://www.oracle.com/technetwork/java/javase/tzdata-versions-138805.html)。

所以代码如下

```
TimeZone localTimeZone = TimeZone.getTimeZone("Asia/Kolkata");
// next line yields milliseconds
int rawOffset = localTimeZome.getRawOffset();
// next line converts to hours
double hourOffset = (rawOffset / 1000) / 3600.0; 
```

如果您对数字表示感到满意（如果值为正，则没有前导加号），那么您就完成了。如果您想要一个带有前导加号的版本，请添加以下行：

```
String hourOffsetString = (hourOffset > 0.0 ? "+" + hourOffset : "" + hourOffset); 
```

为我运行完整代码会产生 +5.5，我认为我们都同意这是加尔各答的正确偏移量。

# dynamics-crm-2011 - 更新子实体/将实体附加到上下文

> ID：11470950
> 
> 赞同：1
> 
> 时间：2012-07-13T12:54:49.403
> 
> 标签：dynamics-crm-2011

我正在为 CRM 2011 创建一个活动前插件，用于设置帐户所有者并更新具有同一所有者的所有子联系人。该插件已正确安装并正确更新主帐户记录，但子联系人所有者未更改。我已将所有者姓名推送到联系人的另一个字段中，以检查我的详细信息是否正确并且该字段正在更新。

我确信这与将子联系人附加到正确的上下文有关，但到目前为止我已经画了一个空白。

```
//Set new account owner - Works fine
account.OwnerId = new EntityReference(SystemUser.EntityLogicalName, ownerId);

//Pass the same owner into the contacts - Does not get updated
UpdateContacts(account.Id, ownerId, service, tracingService); 
```

系统正在成功更新账户所有者和子记录的描述标签。

```
public static void UpdateContacts(Guid parentCustomerId, Guid ownerId, IOrganizationService service, ITracingService tracingService)
    {
        // Create the FilterExpression.
        FilterExpression filter = new FilterExpression();

        // Set the properties of the filter.
        filter.FilterOperator = LogicalOperator.And;
        filter.AddCondition(new ConditionExpression("parentcustomerid", ConditionOperator.Equal, parentCustomerId));

        // Create the QueryExpression object.
        QueryExpression query = new QueryExpression();

        // Set the properties of the QueryExpression object.
        query.EntityName = Contact.EntityLogicalName;
        query.ColumnSet = new ColumnSet(true);
        query.Criteria = filter;

        // Retrieve the contacts.
        EntityCollection results = service.RetrieveMultiple(query);
        tracingService.Trace("Results : " + results.Entities.Count);

        SystemUser systemUser = (SystemUser)service.Retrieve(SystemUser.EntityLogicalName, ownerId, new ColumnSet(true));
        tracingService.Trace("System User : " + systemUser.FullName);

        XrmServiceContext xrmServiceContext = new XrmServiceContext(service);

        for (int i = 0; i < results.Entities.Count; i++)
        {                
            Contact contact = (Contact)results.Entities[i];
            contact.OwnerId = new EntityReference(SystemUser.EntityLogicalName, systemUser.Id);
            contact.Description = systemUser.FullName;

            xrmServiceContext.Attach(contact);
            xrmServiceContext.UpdateObject(contact);
            xrmServiceContext.SaveChanges();

            tracingService.Trace("Updating : " + contact.FullName);
        }
    } 
```

追踪服务打印出我所期望的一切。我是否还需要附加系统用户并以某种方式将实体引用附加到上下文？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T13:28:55.690

您必须使用[AssignRequest](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.assignrequest.aspx)进行单独的 Web 服务调用来更改记录的所有权。不幸的是，您不能只更改 Owner 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:29:20.507

我想我让自己陷入了这个插件的各种混乱，因为默认情况下更改帐户所有者会自动更改关联的联系人所有者。因此，我试图覆盖它已经在做的事情。

通过使用 AssignRequest 设置帐户所有者而不是子记录，它可以正常工作。克里斯为我指明了正确的方向。

所需要的只是将我的代码的第一行更改为使用 AssignRequest 并且整个 UpdateContacts 方法变得过时。

# iframe - Ext.getCmp 无法隐藏 Youtube Video Sencha Touch

> ID：11470957
> 
> 赞同：0
> 
> 时间：2012-07-13T12:55:29.830
> 
> 标签：iframe, youtube, hide, sencha-touch-2, panel

我在隐藏事件中设置元素（面板）的 HTML 以删除 Sencha Touch 2 中的 iFrame Youtube 视频时遇到困难。

隐藏事件正在工作并且正在被调用，因为我在被调用的隐藏函数中有一个 Ext.Msg.alert 并且它工作，但我无法停止隐藏视频。

这是我的面板代码：

```
Ext.define('TCApp.view.MyPanel0', {
extend: 'Ext.Panel',
alias: 'widget.mypanel0',

config: {
    hideOnMaskTap: true,
    scrollable: false,
    items: [
        {
            xtype: 'panel',
            html: '<iframe width="560" height="315" src="http://www.youtube.com/embed/-gv9RicOHNQ" frameborder="0" allowfullscreen></iframe>',
            itemId: 'videopanel',
            hideOnMaskTap: true
        }
    ]
} 
```

});

在我的控制器中，我有这个：

```
Ext.define('TCApp.controller.MyController', {
extend: 'Ext.app.Controller',
config: {
    control: {
        "#dataview": {
            itemtap: 'onDataviewItemTap'
        },
        "mypanel0": {
            hide: 'onVideopanelHide'
        }
    }
}, 
```

等等……</p>

和这个：

```
onVideopanelHide: function(component, options) {
    Ext.Msg.alert('Test onhide event');  <-- working hide event called

    Ext.getCmp('videopanel').setHtml("");
    Ext.getCmp('videopanel').setHtml('<div id="video1"><iframe width="560" height="315" src="http://www.youtube.com/embed/NSUucup09Hc?fs=1&amp;hl=en_US&amp;rel=0&autoplay=0" frameborder="0" allowfullscreen></iframe></div><img src="resources/images/thapelo3Fy.jpg" />');

} 
```

虽然 Ext.getCmp 不起作用，但我收到错误消息：'TypeError: 'undefined' is not an object (evalating 'Ext.getCmp('videopanel').setHtml')'

我试图在其上设置 HTML 的面板具有“视频面板”的 itemid，所以我不确定出了什么问题。有任何想法吗？

我仍然在 hide 事件中播放我的 iFrame Youtube 视频，我想完全删除它。

我也试过'Ext.getCmp('videopanel').destroy();' 但我得到与上面相同的错误。我只有 itemid 设置为 videopanel 而没有其他 ids...</p>

在此先感谢您的帮助……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T07:26:27.113

嘿@Digeridoopoo 只需更改一下MyPanel0，

你的代码

```
itemId: 'videopanel', 
```

至：

```
id: 'videopanel', 
```

`onVideopanelHide`我在你的控制器方法中做了一个类似这样的代码的版本。

```
Ext.define('myapp.view.MyPanel0', {
   extend: 'Ext.Panel',
   xtype: 'mypanel0',

   config: {
      hideOnMaskTap: true,
      scrollable: false,
      items: [
        {
           xtype: 'panel',
           html: '<iframe width="560" height="315" src="http://www.youtube.com/embed/-gv9RicOHNQ" frameborder="0" allowfullscreen></iframe>',
           id: 'videopanel',
           hideOnMaskTap: true
        }, {html: '<br/>'},
        {
           xtype: 'button',
           text: 'Change Video',
           width: '55%',
           handler: function() {
               Ext.getCmp('videopanel').setHtml('')
               Ext.getCmp('videopanel').setHtml('<div id="video1"><iframe width="560" height="315" src="http://www.youtube.com/embed/NSUucup09Hc?fs=1&amp;hl=en_US&amp;rel=0&autoplay=0" frameborder="0" allowfullscreen></iframe></div><img src="app/images/home.png" />')
           }
        }, {html: '<br/>'},
        {
          xtype: 'button',
          text: 'Video Stop',
          width: '55%',
          handler: function() {
              Ext.getCmp('videopanel').hide()
          }
        }
     ]
  }
}); 
```

**我希望这有帮助。:)**

![在此处输入图像描述](../Images/9f3bceb0f4a330cdc9f6e90d917c6981.png)

![在此处输入图像描述](../Images/37d7607edb1b9f72d12d5b49f44001c1.png)

![在此处输入图像描述](../Images/b9f16dea287bc18f793b2ad4cfc70f75.png)

# ruby-on-rails-3 - Rails 3，将本地IP地址插入记录字段

> ID：11470959
> 
> 赞同：0
> 
> 时间：2012-07-13T12:55:35.053
> 
> 标签：ruby-on-rails-3, controller, ip

我有一个 Rails 3 应用程序，我想在我的一个模型中添加一个字段，该字段将被称为 localip。

如何将当前本地 IP 添加到该字段？

控制器中的标准创建方法是这样的：

```
# POST /prescriptions
  # POST /prescriptions.json
  def create
    @prescription = Prescription.new(params[:prescription])

    respond_to do |format|
      if @prescription.save
        format.html { redirect_to @prescription, notice: 'Prescription was successfully created.' }
        format.json { render json: @prescription, status: :created, location: @prescription }
      else
        format.html { render action: "new" }
        format.json { render json: @prescription.errors, status: :unprocessable_entity }
      end
    end
  end 
```

有没有使用 create 方法插入它的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:53:03.820

我假设“当前本地 IP”是指客户端的 IP。如果是这样，那么您可以从控制器操作中的 env 哈希访问它 -

```
current_local_ip = request.env['REMOTE_ADDR'] 
```

或者

```
current_local_ip = request.env['REMOTE_HOST'] 
```

如果你的意思是服务器的 ip 通过当前本地 ip，只需查找 HTTP_HOST 键的值。

# javascript - 如何存储在数据库的输入文本字段中输入的值

> ID：11470964
> 
> 赞同：0
> 
> 时间：2012-07-13T12:56:01.563
> 
> 标签：javascript, grails, groovy

我正在使用springsourcetoolsuite，grails项目，并且遇到了将在文本字段中输入的值存储到在mysql中创建并连接到grails的数据库中的表中的问题。现在我有一个名为属性的域类，其中包含变量地址、城市、邮政编码、国家等，它们也是 mysql 数据库中表属性的字段。当我要求用户使用这段代码填写时-（gsp视图）

```
<body>
<g:textField name="address" maxlength="40" value="${propertyInstance?.address}" />
</body> 
```

它可以工作，并且值存储在数据库中。但是，我需要在每次单击按钮时附加一个输入字段，因此我将此输入字段放在一个名为 add() 的函数中。这是代码-

```
<head>
<script type="text/javascript">
function add() {
    var newP = document.createElement("p");
    var input1,
    area = document.getElementsByTagName("form")[0];
    input1 = document.createElement("input");
    input1.type = "g:textField";
    input1.placeholder = "street";
    input1.value = "${propertyInstance?.address}";
    newP.appendChild(input1);
    area.appendChild(newP);
}
</script>
</head>
<body>
<g:form name='prop' method="post" action="save">
<input type="button"  value="+Add" onclick= "add();" ><br>
<g:submitButton name="create" class="save" value="${message(code: 'default.button.create.label', default: 'Create')}" />
</g:form>
</body> 
```

现在，当我执行此操作并运行它时，它采用空值并打印一条错误消息“地址不能为空”。现在我看不出有什么问题，但如果有人熟悉 groovy/javscript .. 请帮我找出问题所在。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T14:07:29.700

我猜你首先没有使用[脚手架](http://grails.org/doc/latest/guide/scaffolding.html)功能来生成你的视图。如果你没有，这是开始了解 grails 基础知识的好方法。具体而言，您需要将要传递给控制器​​的字段（如地址）放在表单标签内。喜欢：

```
<body>
    <g:form name='prop' method="post" action="save">
        <g:textField name="address" maxlength="40" value="${propertyInstance?.address}" />
        <input type="button"  value="+Add" onclick= "add();" ><br>
        <g:submitButton name="create" class="save" value="${message(code: 'default.button.create.label', default: 'Create')}" />
    </g:form>
</body> 
```

另一件事是您不能创建标签输入并将其类型设置为“g:textfield”。html 输入字段只有有限的类型。在这种情况下，您要使用的实际上是“文本”。在任何情况下，grails 的标签都在 javascript 之前呈现（在服务器端），而 javascript 代码在客户端呈现。因此，第一次呈现页面时，它们将起作用。但是要在页面中动态插入内容，您需要[ajax](http://api.jquery.com/jQuery.ajax/)，因为 grails 的标签已经呈现。该值`${propertyInstance?.address}`需要在服务器上处理，返回并在您的字段中建立。因此，您需要发出异步请求。无论如何， [JQuery](http://api.jquery.com/)是你的人。此外，对于您正在做的事情，JQuery 有助于操作 HTML DOM，这将使您的工作更加轻松。

# android - 当用户触摸 Android 设备的主页按钮或返回按钮时，如何销毁应用程序？

> ID：11470965
> 
> 赞同：0
> 
> 时间：2012-07-13T12:56:02.080
> 
> 标签：android, android-intent

我想在用户触摸 Android 设备的主页按钮时销毁我的应用程序，并在用户触摸 Android 的“后退”按钮时开始 MainActivity。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:23:11.440

**在 Back 上关闭应用程序**

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (event.getAction() == KeyEvent.ACTION_DOWN) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_BACK :
            finish();

            return true;
        }
    }
    return super.onKeyDown(keyCode, event);
} 
```

**而且您无法获得主页按钮的单击事件，因此您想编写 onStop 方法。**

```
@Override
    protected void onStop() {
        finish();
        super.onStop();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:20:04.457

您可以通过调用 finish() 和 finishActivity() 方法来做到这一点。查看 API 指南[Shutting down an Activity](http://developer.android.com/guide/components/activities.html#ShuttingDown)的详细信息。从哪里调用这些方法取决于您的应用程序是如何实现的，但我想您可以通过侦听 KeyEvent 并过滤 Home 按钮键事件来从当前的焦点活动中执行此操作。

但是，您需要考虑，一旦您杀死了您的活动，按下后退按钮将不会让您回到您的应用程序活动，因为杀死活动会将它们从内存堆栈中清除。

还可以查看 Android 开发者网站上给出的[Activity 生命周期图](http://developer.android.com/guide/components/activities.html#Lifecycle)和详细描述。 ![在此处输入图像描述](../Images/d41d122b529c136f51750165c3633f5d.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:59:33.367

```
System.exit(0) 
```

但最好不要使用它。Android 不是为此目的而设计的。

[关闭应用程序并在 Android 上启动主屏幕](https://stackoverflow.com/questions/2042222/close-application)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T13:02:42.893

你可以`Activity`通过调用来关闭一个`finish()`，但你必须对每个`Activity`打开的都这样做。要在按下 HOME 按钮时发生这种情况，您必须注册一个`KeyEvent`. 我不太清楚如何执行此操作，但您可以在[此处找到文档](http://developer.android.com/reference/android/view/KeyEvent.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T13:15:15.457

调用`finish()`你的`onStop()`方法。或`android:noHistory="true"`在您的清单中使用。

# asp.net - 将 XML 绑定到 ASP.NET Gridview

> ID：11470966
> 
> 赞同：2
> 
> 时间：2012-07-13T12:56:09.083
> 
> 标签：asp.net, xml, data-binding, gridview

我有一个这样的 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<cars>
    <car type="Wagon" make="Volvo">
        <colours>
            <colour>Red</colour>
            <colour>Yellow</colour>
        </colours>
    </car>
    <car type="Sedan" make="Audi">
        <colours>
            <colour>Green</colour>
            <colour>Blue</colour>
        </colours>
    </car>
</cars> 
```

这是由 ASP.NET XmlDataSource 生成的，它使用 XSL 文件来转换 HTTP URL 的 XML 输出。

我想将 XmlDataSource 绑定到 ASP.NET gridview，但是当使用自动生成列时，只有 type 和 make 属性被绑定。

我希望将汽车的颜色绑定到 CSV 格式的第三列，如下所示：

```
Type     Make     Colours
Wagon    Volvo    Red, Yellow
Sedan    Audi     Green, Blue 
```

我知道可以修改我的转换文件以将颜色存储在 XML 属性中，但这会使 XmlDataSource 难以过滤颜色。

我计划动态修改 XmlDataSource 的 Xpath 属性，以便过滤显示的数据。

有什么方法可以使用 ASP.NET 实现此功能。我可以使用 .NET Framework 4.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:28:09.677

肯定有一个更简单的方法，但这里有一些东西可以开始......经过大量挖掘后得到了这个。

您需要一个模板字段。在其中您需要放置一个 XmlDataSource 和一个中继器。

将 xmldatasource 指向所考虑的文件。指定前面提到的相同的 http url 和 xslt 转换。在 XPath 中，您需要考虑汽车节点中的所有属性来选择节点

所以对于第一个 xmldatasource，Xpath 看起来像

```
cars/car[@type='Wagon' and @make='Volvo']/colours/colour 
```

在中继器 itemtemplate 中执行以下操作：

XPath(".")

如果您对此练习的代码示例感兴趣：

[http://www.coderun.com/ide/?w=aKnePm185kW3jo0Uzr_s3Q](http://www.coderun.com/ide/?w=aKnePm185kW3jo0Uzr_s3Q)

快乐编码。

# java - Java线程..导致线程在设定时间后终止

> ID：11470967
> 
> 赞同：0
> 
> 时间：2012-07-13T12:56:09.417
> 
> 标签：java, multithreading, thread-safety

我编写了一些代码，将一个可调用对象提交给执行程序，将未来存储在一个映射中的一个 id 中。在调用方法中，我等待设置一个标志，然后再继续。基本上我需要等待外部操作返回给我并说我们完成了 - 这是数据，现在你可以继续......我认为我所拥有的不正确：

```
public class MyClass implements Callable<Boolean> {

    ---
    ---
    private boolean done = false;

    @override
    public Boolean call() {

        --  wait for flag to be set...
        //continue....
    }

} 
```

--主要代码--

```
//create the above class..

//submit it...

//get the future store in map...

//-- wait for response from external application...

///tie it up with an id

//set the attribute so the callable can continue and complete.. 
```

问题：

1.  以上将不起作用，因为我返回的是 Future 而不是对象。我正在考虑创建一个继承自可调用类的新接口——这有意义吗？

2.  如果没有收到响应，我需要线程等待然后死掉。是否可以在线程上设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:02:31.927

您可以安排一个任务，该任务将取消等待的任务。当等待任务完成时，它可以取消计划任务。（先完成的将取消另一个）

这假设您首先有一个可中断的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:04:34.680

有一个等待（长时间超时）功能可用..这里有一些文档

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html)

使用这个 wait(long timeout) 函数，线程将一直等待，直到它得到一个 notify()（或 notifyAll()），或者直到超时到期。

以下任何一项都将打破 wait()；

1.  通知（）;
2.  通知所有（）；
3.  达到超时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:05:07.453

使用[`Future#get(long, TimeUnit)`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29).

这将等待一段时间以获得答案，[`TimeoutException`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html)如果在给定的时间段内没有返回值，则抛出 a。然后捕获异常并让线程优雅地完成。

# android - Android：更改手机的倾斜度使我返回到 main.xml 视图

> ID：11470972
> 
> 赞同：0
> 
> 时间：2012-07-13T12:56:32.850
> 
> 标签：android, layout

我一直在开发一个Android App，在将手机水平放置时遇到了一个小问题。

目前我有两个视图：主要视图（main.xml）和登录视图（login.xml）。当我在 login.xml 视图中转动手机时，它会返回到 main.xml 视图。如果手机处于水平位置 + login.xml 并且我再次转动它（回到 main.xml），也会发生同样的事情。

它看到每次都执行“OnCreate”，这是应用程序的代码：

```
 public class AppActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ImageButton bout= null;
    bout = (ImageButton)findViewById(R.id.imageButton1);

    bout.setOnClickListener(boutlisten);

}

private OnClickListener boutlisten = new OnClickListener(){
        public void onClick(View v) {
            setContentView(R.layout.login);

        }
    };
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:58:23.583

创建具有`setContentView(R.layout.login);`并启动 Activity 的新 Activity。

喜欢，

```
 public class LoginActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

}

} 
```

*   [看这里](http://developer.android.com/training/basics/firstapp/starting-activity.html)

***附录：***这是启动上面声明的活动的代码。还应该在清单文件中声明活动

```
 private OnClickListener boutlisten = new OnClickListener(){
        public void onClick(View v) {
            Intent myIntent = new Intent(v.getContext(), LoginActivity.class);
            startActivity(myIntent);

        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:11:24.167

此外，你必须已经知道......不要忘记在你的 AndroidManifest.xml 中声明新活动

```
<activity android:name=".LoginActivity" /> 
```

或者，您也可以强制您的活动仅垂直运行。只需将此添加到 AndroidManifest.xml 中的 Main 活动标记

```
<activity android:screenOrientation="portrait" ...../> 
```

# iphone - 保存 PDF 然后通过电子邮件发送

> ID：11470976
> 
> 赞同：2
> 
> 时间：2012-07-13T12:56:40.097
> 
> 标签：iphone, xcode, mfmailcomposeviewcontroller

我正在尝试从 url 保存 pdf，然后通过电子邮件发送。发送者似乎有它，但接收者没有得到它。

当我做一个我得到`NSLog`的`NSString file``/var/mobile/Applications/0ADE222E-6346-4C6C-8348-DA5327B980AA/Documents/myPDF.pdf`

它似乎保存但它不发送。这是我下面用于保存和发送的代码

**编辑**

**更新代码**

```
 // This pdfURL is 0 bytes
    NSData *pdfURL = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",webPage.urlString]]];

    //Store the Data locally as PDF File
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDirectory = [paths objectAtIndex:0];
    NSString *file = [documentDirectory stringByAppendingFormat:@"/myPDF.pdf"];

    [pdfURL writeToFile:file atomically:YES];

    //Sending the pdf
    MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
    composer.mailComposeDelegate = self;        
    if ([MFMailComposeViewController canSendMail]){
        //Changed email for privacy issues
        [composer setToRecipients:[NSArray arrayWithObjects:@"123@abc.com", nil]];
        [composer setSubject:[NSString stringWithFormat:@"%@ email",titleText]];
        [composer setMessageBody:@"your custom body content" isHTML:NO];

        NSLog(@"pdf %@",file);
        // This pdfData is 0 bytes
        NSData *pdfData = [NSData dataWithContentsOfFile:file];

        [composer addAttachmentData:pdfData mimeType:@"application/pdf" fileName:@"myPDF.pdf"];

        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        [self presentModalViewController:composer animated:YES];            
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T16:28:00.970

如果它来自 URL，则将其存储在 NSData 中：

```
NSData *pdfData = [NSData dataWithContentsOfURL[NSURL URLWithString:@"URL Of Pdf"]]; 
```

然后将其附加到邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:40:30.860

问题在于 webPage.urlString 为空。此代码只需确保 url 字符串不为空即可：P

# android - SyncAdapter for Android 使用具有 NTLM 凭据的 WCF 服务

> ID：11470977
> 
> 赞同：1
> 
> 时间：2012-07-13T12:56:40.620
> 
> 标签：android, authentication, rest, ntlm, android-syncadapter

我正在尝试按照[Dobjanschi](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)的模式开发一个 rest-client-application 。

因此，我正在使用来自谷歌的示例“ [samplesync](http://developer.android.com/tools/samples/index.html) ”，但我遇到的问题是我需要使用需要 NTLM 身份验证的 WCF 服务。

通过遵循链接中的模式，我已经成功地建立了与 Web 服务的[连接](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)。

但正如我所说，我想遵循开发 Web 服务的模式，所以我的问题是如何将 ntlm-authentication 集成到谷歌的同步模型中？

我认为它必须设置在 AuthenticatorActivity 或 Authenticator 类中的某个位置，但我不知道在哪里以及如何做，以便建立一个正常工作的 SyncAdapter。

如果有人可以帮助我，我将不胜感激。

已经感谢您的时间和支持。

# c++ - 实现一个复杂的基于旋转的相机

> ID：11470978
> 
> 赞同：22
> 
> 时间：2012-07-13T12:56:42.310
> 
> 标签：c++, math, matrix, directx, quaternions

我正在实现一个用于空间可视化的 3D 引擎，并且正在编写一个具有以下导航功能的相机：

*   旋转相机（即，类似于旋转头部）
*   围绕任意 3D 点（空间中的一个点，可能不在屏幕中心）旋转；相机需要围绕这个点旋转，保持相同的相对观察方向，即观察方向也会改变。这不直接看选择的旋转点）
*   在相机的平面中平移（因此在与相机的观察矢量正交的平面中向上/向下或向左/向右移动）

相机不应该滚动——也就是说，“向上”仍然是向上的。因此，我用一个位置和两个角度表示相机，围绕 X 和 Y 轴旋转（Z 将是滚动的。）然后使用相机位置和这两个角度重新计算视图矩阵。这适用于平移和旋转眼睛，但*不适*用于围绕任意点旋转。相反，我得到以下行为：

*   眼睛本身明显地向上或向下移动比它应该移动的更远
*   `m_dRotationX`当为 0 或 pi时，眼睛根本不会向上或向下移动。（云台锁？如何避免？）
*   `m_dRotationX`当在 pi 和 2pi 之间时，眼睛的旋转被反转（改变旋转使它在应该往下看的时候往上看，当它应该往上看时往下看） 。

**(a) 是什么导致了这种旋转“漂移”？**

这可能是[万向节锁](http://en.wikipedia.org/wiki/Gimbal_lock)。如果是这样，对此的标准答案是“使用四元数表示旋转”，在 SO 上多次说过（例如[1](https://stackoverflow.com/questions/1840314/when-do-i-need-to-use-quaternions)、[2](https://stackoverflow.com/questions/8919086/why-are-quaternions-used-for-rotations)、[3](https://stackoverflow.com/questions/2198163/what-are-the-pros-and-cons-of-using-matrices-euler-angles-and-or-quaternions-f)），但不幸的是**没有具体细节**（[例如](https://stackoverflow.com/questions/10082526/quaternion-camera-representation-in-6dof-fending-off-inherent-rolling)。这是我找到[的最佳答案](https://stackoverflow.com/questions/6280586/how-does-this-quaternion-rotation-code-work?rq=1)到目前为止；它很少见。）我一直在努力使用结合上述两种旋转类型的四元数来实现相机。事实上，我正在使用两个旋转构建一个四元数，但下面的评论者说没有理由 - 立即构建矩阵很好。

当围绕一个点旋转时更改 X 和 Y 旋转（表示相机的观察方向）时会发生这种情况，但不会仅在直接更改旋转时发生，即围绕自身旋转相机。对我来说，这没有意义。这是相同的价值观。

**(b) 不同的方法（例如四元数）是否更适合这台相机？如果是这样，我如何实现上述所有三个相机导航功能？**

如果另一种方法会更好，那么请考虑提供该方法的具体实施示例。（我正在使用 DirectX9 和 C++，以及 SDK 提供的 D3DX* 库。）在第二种情况下，我将在几天内添加并奖励赏金，届时我可以在问题中添加一个。这听起来像是我在抢先一步，但我的时间很短，需要快速实施或解决这个问题（这是一个截止日期很紧的商业项目。）详细的答案也将改进 SO 档案，因为大多数到目前为止，我读过的相机答案对代码很简单。

谢谢你的帮助 ：）

* * *

**一些说明**

感谢您到目前为止的评论和回答！我将尝试澄清有关该问题的一些事项：

*   每当其中之一发生变化时，都会根据相机位置和两个角度重新计算视图矩阵。矩阵本身永远不会累积（即更新） - 它会重新计算。但是，相机位置和两个角度变量是累加的（例如，每当鼠标移动时，一个或两个角度都会有少量添加或减去，具体取决于鼠标上下移动的像素数和/或在屏幕上左右显示。）

*   评论[者 JCooper](https://stackoverflow.com/users/666402/jcooper?tab=summary)说我遇到了万向节锁定问题，我需要：

> 在应用变换之前，在变换上添加另一个旋转，将 eyePos 旋转到完全位于 yz 平面中，然后再进行另一个旋转，然后将其移回。在应用 yaw-pitch-roll 矩阵之前和之后立即围绕 y 轴旋转以下角度（其中一个角度需要取反；尝试是确定哪个角度的最快方法）。 `double fixAngle = atan2(oEyeTranslated.z,oEyeTranslated.x);`

不幸的是，当按照描述执行此操作时，由于其中一个旋转，我的眼睛以非常快的速度从场景上方射出。我确信我的代码只是这个描述的一个糟糕的实现，但我仍然需要更具体的东西。一般来说，我发现算法的非特定文本描述不如注释的、解释的实现有用。 **我正在为一个与下面的代码集成的具体工作示例添加赏金**（即也与其他导航方法）。这是因为我想*了解*解决方案，并且有一些可行的方法，并且因为我由于我的最后期限很紧，因此需要实施一些快速有效的东西。

请，如果您回答算法的文本描述，请确保它足够详细以实现（“围绕 Y 旋转，然后变换，然后旋转回来”可能对您有意义，但缺乏了解您的意思的细节。 [好答案很清楚，有路标，即使有不同的基础，也能让其他人理解，是“坚固的防风雨信息板”。](https://ux.meta.stackexchange.com/questions/686/what-makes-a-good-answer)）

反过来，我试图清楚地描述问题，如果我能更清楚地告诉我。

* * *

**我当前的代码**

要实现上述三个导航功能，在鼠标移动事件中根据光标移动的像素移动：

```
// Adjust this to change rotation speed when dragging (units are radians per pixel mouse moves)
// This is both rotating the eye, and rotating around a point
static const double dRotatePixelScale = 0.001;
// Adjust this to change pan speed (units are meters per pixel mouse moves)
static const double dPanPixelScale = 0.15;

switch (m_eCurrentNavigation) {
    case ENavigation::eRotatePoint: {
        // Rotating around m_oRotateAroundPos
        const double dX = (double)(m_oLastMousePos.x - roMousePos.x) * dRotatePixelScale * D3DX_PI;
        const double dY = (double)(m_oLastMousePos.y - roMousePos.y) * dRotatePixelScale * D3DX_PI;

        // To rotate around the point, translate so the point is at (0,0,0) (this makes the point
        // the origin so the eye rotates around the origin), rotate, translate back
        // However, the camera is represented as an eye plus two (X and Y) rotation angles
        // This needs to keep the same relative rotation.

        // Rotate the eye around the point
        const D3DXVECTOR3 oEyeTranslated = m_oEyePos - m_oRotateAroundPos;
        D3DXMATRIX oRotationMatrix;
        D3DXMatrixRotationYawPitchRoll(&oRotationMatrix, dX, dY, 0.0);
        D3DXVECTOR4 oEyeRotated;
        D3DXVec3Transform(&oEyeRotated, &oEyeTranslated, &oRotationMatrix);
        m_oEyePos = D3DXVECTOR3(oEyeRotated.x, oEyeRotated.y, oEyeRotated.z) + m_oRotateAroundPos;

        // Increment rotation to keep the same relative look angles
        RotateXAxis(dX);
        RotateYAxis(dY);
        break;
    }
    case ENavigation::ePanPlane: {
        const double dX = (double)(m_oLastMousePos.x - roMousePos.x) * dPanPixelScale;
        const double dY = (double)(m_oLastMousePos.y - roMousePos.y) * dPanPixelScale;
        m_oEyePos += GetXAxis() * dX; // GetX/YAxis reads from the view matrix, so increments correctly
        m_oEyePos += GetYAxis() * -dY; // Inverted compared to screen coords
        break;
    }
    case ENavigation::eRotateEye: {
        // Rotate in radians around local (camera not scene space) X and Y axes
        const double dX = (double)(m_oLastMousePos.x - roMousePos.x) * dRotatePixelScale * D3DX_PI;
        const double dY = (double)(m_oLastMousePos.y - roMousePos.y) * dRotatePixelScale * D3DX_PI;
        RotateXAxis(dX);
        RotateYAxis(dY);
        break;
    } 
```

和方法非常简单`RotateXAxis`：`RotateYAxis`

```
void Camera::RotateXAxis(const double dRadians) {
    m_dRotationX += dRadians;
    m_dRotationX = fmod(m_dRotationX, 2 * D3DX_PI); // Keep in valid circular range
}

void Camera::RotateYAxis(const double dRadians) {
    m_dRotationY += dRadians;

    // Limit it so you don't rotate around when looking up and down
    m_dRotationY = std::min(m_dRotationY, D3DX_PI * 0.49); // Almost fully up
    m_dRotationY = std::max(m_dRotationY, D3DX_PI * -0.49); // Almost fully down
} 
```

并由此生成视图矩阵：

```
void Camera::UpdateView() const {
    const D3DXVECTOR3 oEyePos(GetEyePos());
    const D3DXVECTOR3 oUpVector(0.0f, 1.0f, 0.0f); // Keep up "up", always.

    // Generate a rotation matrix via a quaternion
    D3DXQUATERNION oRotationQuat;
    D3DXQuaternionRotationYawPitchRoll(&oRotationQuat, m_dRotationX, m_dRotationY, 0.0);
    D3DXMATRIX oRotationMatrix;
    D3DXMatrixRotationQuaternion(&oRotationMatrix, &oRotationQuat);

    // Generate view matrix by looking at a point 1 unit ahead of the eye (transformed by the above
    // rotation)
    D3DXVECTOR3 oForward(0.0, 0.0, 1.0);
    D3DXVECTOR4 oForward4;
    D3DXVec3Transform(&oForward4, &oForward, &oRotationMatrix);
    D3DXVECTOR3 oTarget = oEyePos + D3DXVECTOR3(oForward4.x, oForward4.y, oForward4.z); // eye pos + look vector = look target position
    D3DXMatrixLookAtLH(&m_oViewMatrix, &oEyePos, &oTarget, &oUpVector);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T20:53:17.020

在我看来，考虑到您形成视图矩阵的方式，“滚动”是不可能的。不管所有其他代码（其中一些看起来确实有点滑稽），调用`D3DXMatrixLookAtLH(&m_oViewMatrix, &oEyePos, &oTarget, &oUpVector);`应该创建一个没有滚动的矩阵，当`[0,1,0]`作为“向上”向量给出时，除非`oTarget-oEyePos`碰巧与向上向量平行。情况似乎并非如此，因为您限制`m_dRotationY`在 (-.49pi,+.49pi) 范围内。

也许你可以澄清你是如何知道“滚动”正在发生的。您是否有地平面并且该地平面的水平线偏离水平线？

顺便说一句，在 中`UpdateView`，`D3DXQuaternionRotationYawPitchRoll`似乎完全没有必要，因为您立即转身将其更改为矩阵。就像`D3DXMatrixRotationYawPitchRoll`在鼠标事件中一样使用。四元数用于相机，因为它们是一种方便的方式来累积眼睛坐标中发生的旋转。由于您仅以严格的顺序使用两个旋转轴，因此累积角度的方式应该没问题。(0,0,1) 的向量变换也不是必需的。`oRotationMatrix`应该已经在条目中有这些值`(_31,_32,_33)`。

* * *

**更新**

鉴于它不是滚动，这就是问题所在：您创建一个旋转矩阵以在*世界*坐标中移动眼睛，但您希望*俯仰*发生在*相机*坐标中。由于不允许滚动并且最后执行偏航，因此在世界和相机参考系中偏航始终相同。考虑下面的图像：

![局部旋转](../Images/03038475942d72ceebe5a47671f4e671.png)

您的代码适用于本地俯仰和偏航，因为它们是在相机坐标中完成的。

![围绕一个点的正常间距](../Images/772d21cbb64e1ccfe73c98da349cacc0.png)

但是当您围绕参考点旋转时，您正在创建一个位于世界坐标中的旋转矩阵，并使用它来旋转相机中心。如果相机的坐标系恰好与世界坐标系对齐，这可以正常工作。但是，如果您在旋转摄像机位置之前不检查是否达到了俯仰限制，那么当您达到该限制时，您会出现疯狂的行为。相机会突然开始在世界上滑行——仍然围绕参考点“旋转”，但不再改变方向。

![围绕一个点锁定间距](../Images/0b731b64d5fb0921cba4ddad684ea92f.png)

如果相机的轴与世界的轴不一致，就会发生奇怪的事情。在极端情况下，相机根本不会移动，因为您正试图让它滚动。

![离轴俯仰会导致滚动](../Images/e7ec8b330fe1829b5fc0d8c03b7d8907.png)

以上是通常会发生的情况，但由于您单独处理相机方向，相机实际上并没有滚动。

![相机方向与平移分开处理](../Images/4c41246a5ed3054de25d60f37995e19b.png)

相反，它保持直立，但你会得到奇怪的翻译。

处理此问题的一种方法是（1）始终将相机置于相对于参考点的规范位置和方向，（2）进行旋转，然后（3）完成后将其放回原处（例如，类似于将参考点平移到原点的方式，应用 Yaw-Pitch 旋转，然后平移回来）。然而，仔细想想，这可能不是最好的方法。

* * *

**更新 2**

我认为*通用人类的*答案可能是最好的。如果旋转是离轴的，问题仍然是应该应用多少俯仰，但现在，我们将忽略它。也许它会给你可接受的结果。

答案的本质是：在鼠标移动之前，您的相机位于**c [1]** =`m_oEyePos`并且由**M [1]** =定向`D3DXMatrixRotationYawPitchRoll(&M_1,m_dRotationX,m_dRotationY,0)`。考虑参考点**a** = `m_oRotateAroundPos`。从相机的角度来看，这个点是**a'=M [1] (ac [1] )**。

您想将相机的方向更改为**M [2]** = `D3DXMatrixRotationYawPitchRoll(&M_2,m_dRotationX+dX,m_dRotationY+dY,0)`。[*重要提示：*由于您不允许`m_dRotationY`超出特定范围，因此应确保 dY 不违反该约束。] 随着相机改变方向，您还希望其位置围绕**a**旋转到新点**2** . **[_]** 这意味着从相机的角度来看， **a**不会改变。即，**M [1] (ac [1] )==M [2] (ac [2] )**。

所以我们求解**c [2]**（记住旋转矩阵的转置与逆矩阵相同）：

**M [2] ^T M [1] (ac [1] )==(ac [2] )** =>

**-M [2] ^T M [1] (ac [1] )+a==c [2]**

现在，如果我们将其视为应用于**c [1]**的变换，那么我们可以看到它首先被取反，然后被**a**平移，然后被**M [1]**旋转，然后被**M [2] ^T**旋转，再次被取反，然后被平移**再次**。这些是图形库擅长的变换，它们都可以压缩成一个单一的变换矩阵。

@Generic Human 的答案值得称赞，但这里是它的代码。当然，您需要在应用之前实现该函数来验证音高的变化，但这很简单。这段代码可能有几个错别字，因为我没有尝试编译：

```
case ENavigation::eRotatePoint: {
    const double dX = (double)(m_oLastMousePos.x - roMousePos.x) * dRotatePixelScale * D3DX_PI;
    double dY = (double)(m_oLastMousePos.y - roMousePos.y) * dRotatePixelScale * D3DX_PI;
    dY = validatePitch(dY); // dY needs to be kept within bounds so that m_dRotationY is within bounds

    D3DXMATRIX oRotationMatrix1; // The camera orientation before mouse-change
    D3DXMatrixRotationYawPitchRoll(&oRotationMatrix1, m_dRotationX, m_dRotationY, 0.0);

    D3DXMATRIX oRotationMatrix2; // The camera orientation after mouse-change
    D3DXMatrixRotationYawPitchRoll(&oRotationMatrix2, m_dRotationX + dX, m_dRotationY + dY, 0.0);

    D3DXMATRIX oRotationMatrix2Inv; // The inverse of the orientation
    D3DXMatrixTranspose(&oRotationMatrix2Inv,&oRotationMatrix2); // Transpose is the same in this case

    D3DXMATRIX oScaleMatrix; // Negative scaling matrix for negating the translation
    D3DXMatrixScaling(&oScaleMatrix,-1,-1,-1);

    D3DXMATRIX oTranslationMatrix; // Translation by the reference point
    D3DXMatrixTranslation(&oTranslationMatrix,
         m_oRotateAroundPos.x,m_oRotateAroundPos.y,m_oRotateAroundPos.z);

    D3DXMATRIX oTransformMatrix; // The full transform for the eyePos.
    // We assume the matrix multiply protects against variable aliasing
    D3DXMatrixMultiply(&oTransformMatrix,&oScaleMatrix,&oTranslationMatrix);
    D3DXMatrixMultiply(&oTransformMatrix,&oTransformMatrix,&oRotationMatrix1);
    D3DXMatrixMultiply(&oTransformMatrix,&oTransformMatrix,&oRotationMatrix2Inv);
    D3DXMatrixMultiply(&oTransformMatrix,&oTransformMatrix,&oScaleMatrix);
    D3DXMatrixMultiply(&oTransformMatrix,&oTransformMatrix,&oTranslationMatrix);

    D3DXVECTOR4 oEyeFinal;
    D3DXVec3Transform(&oEyeFinal, &m_oEyePos, &oTransformMatrix);

    m_oEyePos = D3DXVECTOR3(oEyeFinal.x, oEyeFinal.y, oEyeFinal.z) 

    // Increment rotation to keep the same relative look angles
    RotateXAxis(dX);
    RotateYAxis(dY);
    break;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T08:26:25.487

我认为有一个更简单的解决方案可以让您回避所有轮换问题。

符号：*A*是我们要旋转的点，*C*是原始相机位置，*M*是将全局坐标映射到相机本地视口的原始相机旋转矩阵。

1.  *记下A*的局部坐标，它等于*A' = M* × ( *A - C* )。
2.  像在正常的“眼睛旋转”模式下一样旋转相机。更新视图矩阵*M*使其修改为*M [2]*并且*C*保持不变。
3.  现在我们想找到*C [2]*使得*A' = M [2]* × ( *A - C [2]* )。
    这很容易通过等式*C [2] = A - M [2] ^(-1) × A'*完成。
4.  瞧，相机已经旋转，因为*A*的局部坐标没有改变，所以*A*保持在相同的位置、相同的比例和距离。

作为额外的奖励，“眼睛旋转”和“点旋转”模式之间的旋转行为现在是一致的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T14:15:03.080

您通过重复应用小的旋转矩阵来围绕该点旋转，这可能会导致漂移（小的精度误差加起来），我敢打赌，一段时间后您不会真正做一个完美的圆圈。由于视图的角度使用简单的一维双精度，因此它们的漂移要小得多。

一个可能的解决方法是在您进入该视图模式时存储一个专用的偏航/俯仰和相对位置，并使用这些来进行数学计算。这需要更多的簿记，因为您需要在移动相机时更新它们。请注意，如果点移动，它也会使相机移动，我认为这是一种改进。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T13:19:43.850

如果我理解正确，您对最终矩阵中的旋转分量感到满意（除了问题#3 中的反向旋转控制），但对平移部分不满意，是这样吗？

问题似乎来自您对它们的不同处理：您每次都从头开始重新计算旋转部分，但会累积平移部分（m_oEyePos）。其他评论提到了精度问题，但它实际上比 FP 精度更重要：从小偏航/俯仰值累积旋转与从累积的偏航/俯仰值进行一次大旋转完全不同——在数学上。因此旋转/平移差异。要解决此问题，请尝试在旋转部分同时从头开始重新计算眼睛位置，类似于您如何找到“oTarget = oEyePos + ...”：

```
oEyePos = m_oRotateAroundPos - dist * D3DXVECTOR3(oForward4.x, oForward4.y, oForward4.z) 
```

`dist`可以固定或从旧的眼睛位置计算。这将使旋转点保持在屏幕中心；在更一般的情况下（您感兴趣），`-dist * oForward`这里应该替换为旧/初始`m_oEyePos - m_oRotateAroundPos`乘以旧/初始相机旋转以将其带到相机空间（在相机坐标系中找到一个恒定的偏移向量），然后乘以倒置的新相机旋转以获得世界的新方向。

当然，当俯仰垂直向上或向下时，这将受到云台锁定的影响。您需要精确定义在这些情况下您期望的行为来解决这部分问题。另一方面，锁定在 m_dRotationX=0 或 =pi 是相当奇怪的（这是偏航，不是俯仰，对吧？）并且可能与上述有关。

# java - 检查对象中的元素是否为空

> ID：11470979
> 
> 赞同：7
> 
> 时间：2012-07-13T12:56:55.353
> 
> 标签：java, class, null, nullpointerexception

我有一个简单的数据集类，类似于：

```
class DataSet {
    private String value;
    private String additionalValue;

    public DataSet(String value, String additionalValue) {
        this.value = value;
        this.additionalValue = additionalValue;
    }

    public String getAdditionalValue() {
        return this.additionalValue;
    }
} 
```

然后我创建了一个`ArrayList<DataSet>`并添加了一个新元素`DataSet("Value1", null)`。

现在在某些时候，我需要检查带有 value 的条目是否`"Value1"`有`additionalValue`，如果有，它是什么。

我做一个简单的循环检查 if `value.equals("Value1") == true`，然后我做：

```
if (element.getAdditionalValue() != null) {
    return element.getAdditionalValue();
} 
```

但是，一旦到达该`if`语句，它就会抛出一个错误，指出该值为`null`. 我怎样才能使它不会引发错误而只是跳过`return`语句 if `additionalValue`is `null`？

**编辑：**

但问题是元素不能在它通过条件`null`时检查的点。`additionalValue``element.getValue.equals("Value1")`

```
for (DataSet element : dataSet) {
    if (element.getValue.equals("Value1")) {
        if (element.getAdditionalValue() != null) {
            return element.getAdditionalValue();
        }
     }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-13T13:00:24.753

我认为问题在于你的`element`对象是`null`，所以你必须在检查之前检查它`additionalValue`。

```
if (element != null && element.getAdditionalValue() != null){
   return element.getAdditionalValue();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T13:01:05.870

这将为您整理：

```
if (element != null && element.getAdditionalValue() != null) {
    return element.getAdditionalValue();
} 
```

# c - 用于二进制文件中显示汇编的 C 程序

> ID：11470981
> 
> 赞同：-5
> 
> 时间：2012-07-13T12:57:05.270
> 
> 标签：c, assembly

我正在尝试在二进制文件中显示汇编指令，但我该怎么做？
我怎么知道 MOV 的参数（例如）是指针还是数字？
这是出于教育目的，我知道有 GDB 和其他工具。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:01:11.117

你是说[反汇编](http://en.wikipedia.org/wiki/Disassembler)？那么您有很多工具可供选择，例如：

*   OllyDbg
*   国际开发协会
*   对象转储

如果你想把它集成到现有的程序中，那么你需要一个反汇编引擎，比如[BeaEngine](http://www.beaengine.org/)或 diStorm。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T23:26:02.610

[您可以利用binutils](http://www.gnu.org/software/binutils/)中的许多库，例如**BFD**和**opcodes**。

**BFD** *二进制文件描述符库*，用于进行低级操作。

**opcodes**库用于汇编和反汇编机器指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T09:12:52.643

您可能会从源代码中找到有用的信息到[模拟器](https://codegolf.stackexchange.com/q/4732/2381)，它必须在执行模拟指令之前执行相同的解码任务。

我强烈建议首先针对一个小子集，理想情况下是裸机 8086，然后按照它们历史上发生的相同顺序添加扩展。这将帮助您决定在查找更多信息时忽略哪些内容。以免不知所措。

对于 MOV 操作，操作数由第二个字节 MOD-REG-REG/MEM 字节指定（以最一般的形式）。操作数几乎总是寄存器或内存位置（指针，可能使用“索引寄存器”即时构建）。只有少数指令接受文字操作数（一个数字）并且仅作为*源*，并且在第 180 页的[1979 8086 手册](http://matthieu.benoit.free.fr/cross/data_sheets/Intel_8086_users_manual.htm)表中清楚地标记了它们。

# php - 我在萤火虫控制台中得到 index.php html

> ID：11470983
> 
> 赞同：1
> 
> 时间：2012-07-13T12:57:12.763
> 
> 标签：php, javascript, extjs

我有 ext js 面板组件，提交时会在 firebug 控制台中引发 js 错误。我说

```
 'You're trying to decode an invalid JSON String: <html>

         ... index.php html code here

  </html><!-- use login javascript file --> <!--<script type="text/javascript"    src="http://localhost:9808/recorder/js/login.js"></script>--> 
   <script type="text/javascript">      
        login = true; 
   </script> 
   <div id="login_window"> </div>' when calling method: 
        [nsIDOMEventListener::handleEvent] 
```

有趣的是 html 代码在“html”标签之后与一些附加的 html 连接起来。我得到 index.php html 代码而不是 json。据我所知，check() 函数我只调用 ecoes json 数据。

我的组件代码是这样的

```
 login_group_combo = Ext.create('Ext.form.ComboBox',
   {
    name: 'combo_name',
    id: 'combo_id',
    fieldLabel: text_label,
    editable: false,
    //possible view options
    store: [
    ],
    listeners:
    {
        focus: function(elem, e)
        {
                function1();
        }
    }
}); 
```

function1() 看起来像这样

```
 function function1(){
      form1.submit({
         url: './index.php/mypage/check',
         success: function(f,a){
             // some code here
             echo json_encode($result_array);
         },
         failure: function(form, action){
            switch (action.failureType) {
               case Ext.form.action.Action.CLIENT_INVALID:
                   Ext.Msg.alert('Failure', 'Invalid data entered!');
                    break;
               case Ext.form.action.Action.CONNECT_FAILURE:
                   Ext.Msg.alert('Failure', 'Ajax communication failed');
                   break;
               case Ext.form.action.Action.SERVER_INVALID:
                  Ext.Msg.alert('Failure', action.result.msg);
             }
          }
      });
   } 
```

有趣的是执行进入function1(); 但不进入form1，成功或不失败块。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T20:40:32.503

如果您在浏览器中加载 ./index.php/mypage/check 并查看源代码，您看到的是 json 还是 html？服务器框架中的某些内容通常是通过页眉和页脚布局代码或类似的方式放入 html，并且需要设置一些配置，以便您可以返回原始 json 字符串。

# algorithm - 谷歌如何识别没有空格的 2 个单词？

> ID：11470985
> 
> 赞同：6
> 
> 时间：2012-07-13T12:57:22.580
> 
> 标签：algorithm, search, nlp

我想了解谷歌如何处理两个单词之间的空格。例如，有 2 个单词 - word1 和 word2。我在搜索框中写“word1word2”，它说你的意思是“word1 word2”还是只是理解寻找“word1 word2”。任何信息他们使用什么数据结构和算法？我在这个答案中看到[如何将没有空格的文本拆分为单词列表？](https://stackoverflow.com/questions/8870261/how-to-split-text-without-spaces-into-list-of-words)，建议使用trie数据结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T08:24:05.643

在拼写校正器的候选生成中，您允许省略空格，就像您允许省略其他字母一样......也许看看这里的拼写校正讲座：http: [//nlp-class.org/](http://nlp-class.org/) [对不起，自我推销] 或 Peter Norvig 的介绍： http: [//norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:10:55.470

我假设您必须有一个脚本（例如使用 ajax [http://net.tutsplus.com/tutorials/javascript-ajax/adding-a-jquery-auto-complete-to-your-google-custom-search-engine/](http://net.tutsplus.com/tutorials/javascript-ajax/adding-a-jquery-auto-complete-to-your-google-custom-search-engine/) )

基本上你检查字典中的单词。空格不能作为检查单词的条件，而只是一种可能性。例如，一个简单的算法（真的很简单）是：“severalwords”你检查了 3 个第一个字母，什么都没有？然后你检查4个第一...

以下是关于谷歌搜索引擎的一些解释： [https ://developers.google.com/search-appliance/documentation/60/admin_searchexp/ce_improving_search](https://developers.google.com/search-appliance/documentation/60/admin_searchexp/ce_improving_search)

也许这里也可以提供帮助： [http ://tm.durusau.net/?cat=1106](http://tm.durusau.net/?cat=1106)

# javascript - 在 javascript 中跨多个窗口共享数据（客户端）

> ID：11470987
> 
> 赞同：2
> 
> 时间：2012-07-13T12:57:37.753
> 
> 标签：javascript

因此，假设我有一个不需要登录的网站，但我希望能够根据他们在我的网站上单击的内容来跟踪用户的活动，并相应地显示数据。比如，如果他们一直看童书要买，我会推荐类似的童书。这在javascript中可能吗？我能想出的唯一解决方案是cookies，有没有更有效的方法？谢谢你。我希望这是一个可以在此处发布的可接受问题，因为它与代码无关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:05:11.013

您可以使用 HTML[本地或会话存储](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API)。这些都比 cookie 更容易使用。您还可以将[Modernizr 用于](http://theburningmonk.com/2010/12/having-fun-with-html5-local-storage-and-session-storage/)不支持 HTML5 的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:00:00.613

[html5 websockets](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)可能会有所帮助。

# javascript - 使用 jquery/json 填充表

> ID：11470994
> 
> 赞同：3
> 
> 时间：2012-07-13T12:58:26.323
> 
> 标签：javascript, asp.net, json, jquery

我有一个 asp.net 网页，我想用 jquery 填充表格，ajax web 服务调用一些东西。但我一点也不强。表格的 html 部分是：

```
<tbody id="testBody">
            <tr id="templateEquipment" class="hidden">
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td>
                </td>
                <td class="hidden">
                </td>
            </tr>
        </tbody> 
```

我已经定义了列，并且表在开始时是空的。在jQuery中

```
function SearchEquipment() {
$.ajax({
    type: "POST",
    url: pageName + "SearchEquipment",
    data: "{'oParams':" + JSON.stringify(BeginSearch()) + "}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (response) {
        if (response.d.length > 0) {

            $.each(response.d, function (i, item) {
            <!-- add row to fill the table--> 
```

谢谢你的帮助。我没有资源（欢迎链接）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T13:27:18.060

你可以这样做。

```
var html = $.map(response.d, function (item, i) {
  return "<tr><td>" + item.value1 + "</td><td>" + item.value2 + "</td></tr>";
}).join("");

$("#testbody").append(html); 
```

通过创建一个包含所有行和单元格的大字符串，您只需将其添加到 DOM 一次，这要快得多！

# python - 使用python调整两个字符串之间的1个空格

> ID：11470996
> 
> 赞同：11
> 
> 时间：2012-07-13T12:58:35.220
> 
> 标签：python

我有两个字符串：

```
>>> a = "abcd"
>>> b = "xyz"
>>> c = a + b
>>> c
abcdxyz 
```

添加and时如何得到`abcd xyz`结果？`a``b`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-13T12:59:47.787

只需在两个字符串之间添加一个空格：

```
a = "abcd" 
b = "xyz" 
c = a + " " + b  # note the extra space concatenated with the other two
print c 
```

这会给你

```
abcd xyz 
```

您可以使用诸如 之类的函数`.join()`，但是对于如此简短的内容，这似乎几乎违反直觉（并且 IMO “矫枉过正”）。即，首先使用两个字符串创建一个列表，然后使用该列表调用一个函数并在打印语句中使用该函数的返回......当您可以将所需的空间与两个字符串连接时。在语义上似乎也更清晰。

基于：“简单胜于复杂”。（*Python之禅“导入这个”*）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-13T13:00:04.093

您可以使用 join 将您的字符串与您选择的分隔符连接在一起。

```
a = "abcd"
b = "xyz"
c = " ".join([a, b]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-01T16:33:16.780

从 Python 3.6 开始，您可以使用 f-strings 轻松连接两个字符串。代码更简洁，变量直接在字符串的上下文中引用。

```
a = 'hello'
b = 'world'
c = f'{a} {b}'

print(c) 
```

上面的代码将输出以下内容：

```
hello world 
```

当您有许多字符串或字符串数​​量可能会有所不同时，该`.join()`函数仍然是要走的路。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-13T13:28:45.587

Python 支持[字符串格式化操作](http://docs.python.org/library/stdtypes.html#string-formatting-operations)和[模板系统](http://docs.python.org/library/string.html#template-strings)（后者在技术上是一个简单但功能强大的类）作为字符串模块的一部分。虽然**加号**运算符可以发挥作用，但缺少字符串格式会极大地影响代码的可读性。字符串格式化的基本示例：

```
c = '%s %s' % (a, b) 
```

# asp.net - 使用 windows 2008 R2 Datacenter 在 IIS 6.1 上增加 asp.net 2.0 中的会话超时

> ID：11470999
> 
> 赞同：0
> 
> 时间：2012-07-13T12:58:40.523
> 
> 标签：asp.net, iis-6, session-timeout

我坚持在 Windows 2008 R2 Datacenter 的 IIS 6.1 上增加 asp.net 2.0 中网站的超时。

thx 提前寻求帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:02:12.567

如果您使用 ASP.NET 2.0 的 sessionState 属性，那么您可以`timeout`在 web.config中调整

```
<sessionState 
mode="InProc" 
stateConnectionString="tcpip=127.0.0.1:42424" 
stateNetworkTimeout="10" 
sqlConnectionString="data source=127.0.0.1;Integrated Security=SSPI" 
sqlCommandTimeout="30" 
customProvider="" 
cookieless="UseCookies" 
cookieName="ASP.NET_SessionId" 
timeout="20"  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< HERE
allowCustomSqlDatabase="false" 
regenerateExpiredSessionId="true" 
partitionResolverType="" 
useHostingIdentity="true">
<providers>
  <clear />
</providers>
 </sessionState> 
```

查看[sessionState 属性的 MSDN 文档](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28vs.80%29.aspx)