# StackOverflow 问答 10065000-10065999

# wpf - 在不冻结 UI 的情况下运行长时间任务

> ID：10065000
> 
> 赞同：9
> 
> 时间：2012-04-08T17:54:35.670
> 
> 标签：wpf, task, microsoft-metro

我正在尝试在后台执行一项操作，而不冻结 UI。

当然，我可以为此使用 BackgroundWorker。

但是，我只想使用 Task API 来完成。

我试过：

```
async void OnTestLoaded(object sender, RoutedEventArgs e)
{
   await LongOperation();
}
// It freezes the UI 
```

和

```
async void OnTestLoaded(object sender, RoutedEventArgs e)
{
   var task = Task.Run(()=> LongOperation());
   task.Wait();
}

// It freezes the UI 
```

那么我应该回到BackgroundWorker 吗？或者是否有仅使用任务的解决方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T12:26:19.537

你非常接近。

```
async void OnTestLoaded(object sender, RoutedEventArgs e)
{
  await Task.Run(() => LongOperation());
} 
```

`async` [不在线程池线程上执行方法](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。

`Task.Run`在线程池线程上执行操作并返回`Task`表示该操作的 a。

如果你`Task.Wait`在一个`async`方法中使用，你[做错了](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。您应该`await`在方法中执行任务`async`，永远不要阻止它们。

# java - Jackson - 具有双向关系的实体序列化（避免循环）

> ID：10065002
> 
> 赞同：51
> 
> 时间：2012-04-08T17:54:38.820
> 
> 标签：java, json, jackson, cycle, bidirectional-relation

我有两个实体：

```
Parent {
   Child[] children;
}

and 

Child {
   Parent parent;
} 
```

我知道`@JsonBackReference`和`@JsonManagedReference`。它们很好，如果我要序列化`Parent`​​.

但我还需要传输实例，`Child`并且我希望`parent`填充该字段。

换句话说：

1.  在序列化时`Parent`它应该有`children`，但它们的父字段可能是空的（可以通过使用 json 引用注释来解决）。
2.  在它的序列化上`Child`应该有`parent`他们的`children`（但`children`不必`parent`填充。

有没有办法使用标准的杰克逊功能来解决它​​？

即跳过已经序列化的实体的序列化，而不是标记符合或不符合序列化条件的字段。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-09T17:21:24.123

Jackson 2.0 确实支持完整的循环对象引用。有关示例，请参阅“ [Jackson 2.0 发布](http://www.cowtowncoder.com/blog/archives/2012/03/entry_466.html)”（“处理任何对象图，甚至循环对象图！”一节）。

基本上，您需要将 new`@JsonIdentityInfo`用于需要 id/idref 样式处理的类型。在您的情况下，这将是`Parent`和`Child`类型（如果一个扩展另一个，只需将其添加到超类型就可以了）。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-03-07T01:21:02.427

jackson 2 库中提供了非常方便的接口实现

```
@Entity
@JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property="id")
public class Parent { ....

@Entity
@JsonIdentityInfo(generator=ObjectIdGenerators.PropertyGenerator.class, property="id")
public class Child { .... 
```

在 Maven 中

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.0.2</version>
</dependency> 
```

@StaxMan 提供了一个很好的链接开始

# android - 在列表视图适配器中使用数组声明元素的数量

> ID：10065005
> 
> 赞同：0
> 
> 时间：2012-04-08T17:55:15.023
> 
> 标签：android, listview, adapter

我有一个自定义列表视图适配器。我可以从字符串数组中填充它，但我应该知道有多少个字符串。

这是带有列表视图的活动：

```
public class MainListActivity extends ListActivity {

    private TextView myText;
    private ArrayList<ListData> catalog;
    String[] names = { some names };
    String[] desc = {some description };
    int[] cost = { prices };
    int[] img = { images };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myText = (TextView) findViewById(R.id.titleMain);

        catalog = new ArrayList<ListData>();
        for (int i = 1; i <= 6; i++) {
            catalog.add(new ListData(names[i - 1], cost[i - 1], img[i - 1],
                    desc[i - 1]));
        }

        CatalogAdapter catAdapter;
        catAdapter = new CatalogAdapter(this, catalog);
        setListAdapter(catAdapter);
    }
} 
```

在这里我必须指定元素的数量：

```
for (int i = 1; i <= 6; i++) {
    catalog.add(new ListData(names[i - 1], cost[i - 1], img[i - 1],
    desc[i - 1])); 
```

这是 ListData 活动：

```
public class ListData {
    String title;
    int price;
    int image;
    String discribe;

    ListData(String _title, int _price, int _image, String _discribe) {
        title = _title;
        price = _price;
        image = _image;
        discribe = _discribe;
    }
} 
```

我也有 AdapterActivity，但我认为我应该在这两个活动中改变一些东西。那么我应该如何将下面的代码更改为不声明数组中的元素数量？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T23:40:49.927

像这样的数组`String[]`并不是为了做这样的事情而设计的。使用`List`或`ArrayList`代替。您不必声明它们的大小。

（如果我理解你，并且大小不`names`应该是恒定的。）

# python - 在 pytest_generate_tests 函数中使用 funcarg 值

> ID：10065007
> 
> 赞同：1
> 
> 时间：2012-04-08T17:55:31.817
> 
> 标签：python, unit-testing, pytest

我是 py.test 的新手，我正在使用 funargs 在执行测试之前生成一些测试数据。我想让 pytest_generate 钩子使用 funcargs 值并将其传递给测试函数。例如，我有一个函数“do_something”，它查询数据库中给定的一组参数并相应地设置用户的环境。考虑到我们有一个多站点设置，我想在执行测试之前确保数据库具有执行测试的条目。

```
def pytest_funcarg__data(request):
    # Ensure test data exist in the data base
    # Perform all the checks
    # Final values
    values = [['option1', 'option2', 'option3'],
              ['option1', 'option2'],
              ['option2', 'option3']]
    # Expected result 
    results = [['output1'],
               ['output2'],
               ['output3']]

    return (values, results)

def test_do_something(value, result):       
    assert do_something(value) == result 
```

理想情况下。我想遍历这些值并将它们传递给我的测试函数。我怎样才能做到这一点？

目前我正在这样做：

```
def pytest_funcarg__data(request):
    #same as above

def pytest_funcarg__pass_data(request):
    data = request.getfuncargvalue("data")
    return (data[0][request.param],
                data[1][request.param])

def pytest_generate_tests(metafunc):
    if 'pass_data' in metafunc.funcargnames:
        # If number of test cases change the change needs to made here too
        metafunc.parametrize("pass_data", [0, 1, 2], indirect=True)

def test_do_something(pass_data):
    assert do_something(pass_data[0] == pass_data[1] 
```

现在，这行得通。但是每次我添加一个测试用例时，我都需要更新 generate_test 钩子。我在想可能有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T23:21:15.637

收集测试时执行 pytest_generate_tests 钩子。执行测试时调用 pytest_funcarg__data 工厂。测试执行发生在测试收集之后，因此您无法在收集期间调用诸如“getfuncargvalue”之类的东西。

但是，从您的示例中不清楚为什么要同时使用两者 - 这是一个应该直接与您的示例测试一起使用的 generate_tests：

```
def pytest_generate_tests(metafunc):
    params = [("input", "output")]
    metafunc.parametrize(("test_case", "result"), params) 
```

HTH。霍尔格

# java - java中的奇怪行为

> ID：10065008
> 
> 赞同：2
> 
> 时间：2012-04-08T17:55:31.970
> 
> 标签：java, return-type

这是朋友问的。奇怪的是，这个 java 代码可以正确编译和运行。

```
int getArray() [] { ... } 
```

我在这里错过了什么吗。难道不应该

```
int[] getArray() { ... } 
```

编辑： getArray() 是这里的一个函数，它返回一个整数数组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T17:58:46.253

从[JLS 的第 8.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)：

> 为了与旧版本的 Java SE 平台兼容，允许返回数组的方法声明将（部分或全部）空括号对放置在形参列表之后，这些空括号对构成数组类型的声明。以下过时的产品支持这一点，但不应在新代码中使用。

虽然我*偶尔会*在名称 (ick) 之后看到带有数组说明符的变量声明，但我*从未*见过它用于这样的方法声明。奇怪的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:58:12.383

根据 Java 语言规范的第[10.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.2)节，声明数组的两种语法在 Java 中是等效的：

```
int[] array;
int array[]; 
```

[根据 JSL 的第8.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4)节，方法的返回类型也是如此，正如 Jon Skeet 的回答中所引用的那样。

```
int[] getArray() { ... }
int getArray()[] { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T18:04:01.017

我在 Java 的 WTF 功能中看到了这一点：[https ://stackoverflow.com/a/1998146/1247298](https://stackoverflow.com/a/1998146/1247298)

当你第一次知道它时，很奇怪。:)

# android - 在列表视图中显示单行（每列一个列表视图条目）

> ID：10065011
> 
> 赞同：0
> 
> 时间：2012-04-08T17:55:53.930
> 
> 标签：android, sqlite, listview

我想在列表视图中显示数据库中的一行。

例如：我有一个三行四列的数据库。我想将第 2 行的列显示为列表视图（但我只想显示包含数据的列）。

我没有任何代码，因为我什至不知道从哪里开始。我过去只使用过简单的光标适配器。

对不起，我的英语不好。我搜索了很多，没有找到任何答案。如果那是一个愚蠢的问题，请不要太粗鲁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:05:30.640

好的，现在在游标中收集您的数据只需获取所有数据并将每个行对象存储在 wrapperClass 对象的 ArrayList 中，例如

```
Cursor c=null;
        c=db.getAllRecords();
        if(c.getCount()>0)
        {
            for(int j=0;j<c.getCount();j++)
            {
                c.moveToPosition(j); 
                employeewrapper cw=new employeewrapper();
                cw.id=c.getLong(0);
                cw.name=c.getString(1);
                cw.phone=c.getString(2);
                cw.web=c.getString(3);
                cw.address=c.getString(4);
                cw.des=c.getString(5);
                cw.qual=c.getString(6);
                cw.doj=c.getString(7);
                cw.sal=c.getString(8);
                if(cw.des.equalsIgnoreCase("Designer"))
                {
                designers.add(cw);
                }
                } 
        }   
        c.close();
        db.close(); 
```

npw 您可以显示您想要的任何行 创建一个新的字符串 ArrayList 来存储名称并将该数组列表传递给适配器，这样您就可以轻松地显示您的数据，并且可以轻松地将其传输到您想要的任何地方

# ruby-on-rails - 编辑父项后，更新与父列属性的关联？

> ID：10065012
> 
> 赞同：0
> 
> 时间：2012-04-08T17:55:59.567
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我无法使用我的产品更新我的订阅，也无法将产品的属性复制到与我的订阅表相同的字段中。

我的联想是，`subscriptions`属于`products`一个`User`，但一个`Product`有很多`subscriptions`。

**订阅.rb**

```
class Subscription
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true
end 
```

**产品.rb**

```
class Product
  belongs_to :user
  has_many :subscriptions, :as => :subscribable, :dependent => :destroy
end 
```

**用户.rb**

```
class User
  has_many :products, :dependent => :destroy
  has_many :subscriptions, :foreign_key => :subscriber_id, :dependent => :destroy
end 
```

然后与我试图复制相同列的`Product`表`Subscription`：

```
create_table :products do |t|
   t.string  :name
   t.decimal :price
   t.integer :user_id
end

create_table :subscriptions do |t|
   t.string  :name
   t.decimal :price
   t.integer :subscriber_id # same as user_id
   t.integer :subscribable_id
   t.string  :subscribable_type
end 
```

**产品控制器**

```
def edit
   @product = Product.find(params[:id])
end

def update
   @product = Product.find(params[:id])
   if @product.update_attributes(params[:product])
      redirect_to(@product, :notice => 'Successfully Updated.')   
   else 
      render :back
   end
end 
```

**产品观察员**

```
class ProductObserver < ActiveRecord::Observer
  def after_update(product)
    if self.subscriptions.find_by_subscribable_id_and_subscribable_type(subscribable_id, subscribable_type)
        subscription = Subscription.find_by_subscribable_id_and_subscribable_type(subscribable_id, subscribable_type)
        self.subscription.update_attributes(params[:subscription]).select{ |key, _| Subscription.attribute_names.include? key })
    end
  end
end 
```

应该`after_update`做的是：

1.  检查特定产品的订阅是否存在，如果存在......
2.  使用产品新编辑的属性更新当前用户订阅。

目前，订阅不会在产品更新时更新。我需要对此代码进行什么修复才能使其执行此操作？将产品字段复制到其订阅时会怎样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T20:47:47.950

不确定这是否只是一个错字，但您的观察者是错误的。`self`不是你的产品中的观察者。相反，您应该改用`product`(给定的参数)。

其次，您对订阅的查找似乎也是错误的。您正在使用`subscribable_id`并且`subscribable_type`未定义，因此只是`nil`. 我认为您想使用`product.id`and `'Product'`，但是您可以迭代该产品的所有订阅。`product.subscriptions`返回所有`subscriptions`链接到该产品。

最后，如果您要让订阅始终`price`与`name`链接的产品保持同步，为什么不这样做：

```
 create_table :products do |t|
   t.string  :name
   t.decimal :price
   t.integer :user_id
end

create_table :subscriptions do |t|
   t.integer :subscriber_id # same as user_id
   t.integer :subscribable_id
   t.string  :subscribable_type
end 
```

并在您的订阅模型中执行

```
class Subscription
  belongs_to :subscriber, :class_name => "User"
  belongs_to :subscribable, :polymorphic => true

  delegate :name, :price, :to => :subscribable, :allow_nil => true
end 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:56:29.237

尝试传入`:autosave => true`您的关联选项。

[你可以在这里](http://guides.rubyonrails.org/association_basics.html)阅读更多关于它的信息。

# jquery - 如何使用 chrome 扩展访问 localstorage

> ID：10065014
> 
> 赞同：2
> 
> 时间：2012-04-08T17:56:02.923
> 
> 标签：jquery, html, google-chrome-extension, local-storage

我正在开发 chrome 扩展，我能够成功地将信息存储到本地存储，但我的问题实际上是在本地存储中访问该信息。我没有什么不返回任何东西只是说NULL。

我有两个文件：options.html 和 content.js。options.html 是用户输入信息以保存到本地存储的地方，而 content.js 将访问要使用的信息。

**选项.html**

```
$(function() {
    // Insert new buttons (you'd probably not ACTUALLY use buttons, instead saving on blurs or every x seconds)
    $("#save_buttons").after("<input type='submit' value='Save Form' id='saveData'>").after("<input type='submit' value='Clear Saved Data' id='clearData'>");
    $("#saveData").click(function(e) {
        // Don't actually submit form
        e.preventDefault();

        // Bit of generic data to test if saved data exists on page load
        localStorage.setItem("flag", "set");

        // serializeArray is awesome and powerful
        var data = $("#hanes").serializeArray();

        // iterate over results
        $.each(data, function(i, obj) {
            // HTML5 magic!!
            localStorage.setItem(obj.name, obj.value);
        });
    });

    // Test if there is already saved data  
    if (localStorage.getItem("flag") == "set") {
        // Tell the user
        $("header").before("<p id='message'>This form has saved data!</p>");

        // Same iteration stuff as before
        var data = $("#hanes").serializeArray();

        // Only the only way we can select is by the name attribute, but jQuery is down with that.
        $.each(data, function(i, obj) {
            $("[name='" + obj.name +"']").val(localStorage.getItem(obj.name));
        });
    }

    // Provide mechanism to remove data. You'd probably actually remove it not just kill the flag
    $("#clearData").click(function(e) {
        e.preventDefault();
        localStorage.setItem("flag", "");
    });
});

<form id="hanes" name="hanes">
First name: <input type="text" name="firstname" id="firstname" /><br />
Last name: <input type="text" name="lastname" /><br />
Address: <input type="text" name="address" /><br />
City: <input type="text" name="city" /><br />
</form> 
```

**背景.html**

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if (request.method == "firstname")
      sendResponse({status: localStorage['firstname']});
    else
      sendResponse({});
});

chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if (request.method == "lastname")
      sendResponse({status: localStorage['lastname']});
    else
      sendResponse({});
}); 
```

**内容.js**

```
chrome.extension.sendRequest({method: "firstname"}, function(response) {
  alert(response.status);
});

chrome.extension.sendRequest({method: "lastname"}, function(response) {
  alert(response.status);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T08:42:34.893

内容脚本在他们自己的小世界中运行，甚至在您的扩展程序的世界之外（[Chrome 扩展程序代码 vs 内容脚本 vs 注入脚本](https://stackoverflow.com/questions/9915311/chrome-extension-auto-run-a-function/9916089#9916089)）。内容脚本无法访问您的扩展的 localStorage。
因此，您要么需要使用消息传递（[http://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)）与后台页面进行通信，要么如果您真的想避免使用后台页面，您可以使用 iFrame 技巧（[没有背景页面的启用选项的内容脚本 Chrome 扩展？](https://stackoverflow.com/questions/9033873/options-enabled-content-script-chrome-extension-without-background-page/9579856#9579856)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:03:53.770

使用`()`而不是`[]`.

```
var fname = window.localStorage.getItem('firstname'); 
```

# ruby-on-rails - FactoryGirl 传递 'nil' 而不是值

> ID：10065016
> 
> 赞同：2
> 
> 时间：2012-04-08T17:56:09.613
> 
> 标签：ruby-on-rails, rspec, tdd, factory-bot

我从 Rails 和 RSpec 开始，在使用 FactoryGirl 时遇到了麻烦。基本上该对象不接收属性。

模型/用户.rb

```
class User < ActiveRecord::Base

    attr_accessor :name, :email, :show_name, :company, :identity, :password, :phone, :mobile
    validates_presence_of :name, :show_name, :email, :company, :identity, :password, :phone
    validates_uniqueness_of :email

end 
```

规格/工厂.rb

```
FactoryGirl.define do
    factory :user do
        name "John Doe"
        email "john@example.org"
        show_name "John Doe"
        company "Company"
        identity "123.456.789-10"
        password "abc123"
        phone "1234-5678"
        mobile "1234-5678"
    end
end 
```

Rails 控制台

```
irb(main):001:0> u = FactoryGirl.create(:user)
   (0.1ms)  BEGIN
  User Exists (0.3ms)  SELECT 1 FROM `users` WHERE `users`.`email` = BINARY 'john@example.org' LIMIT 1
  SQL (0.4ms)  INSERT INTO `users` (`company`, `email`, `identity`, `mobile`, `name`, `password`, `phone`, `show_name`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL)
Mysql2::Error: Column 'company' cannot be null: INSERT INTO `users` (`company`, `email`, `identity`, `mobile`, `name`, `password`, `phone`, `show_name`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL)
   (0.1ms)  ROLLBACK
ActiveRecord::StatementInvalid: Mysql2::Error: Column 'company' cannot be null: INSERT INTO `users` (`company`, `email`, `identity`, `mobile`, `name`, `password`, `phone`, `show_name`) VALUES (NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL) 
```

有人知道怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T23:26:42.730

我想你可能意味着把 attr_accessible 而不是 attr_accessor

attr_accessible 是一个 rails 函数，用于将一个字段列入白名单以进行批量分配。attr_accessor 是一个 ruby​​ 函数，用于生成会干扰事物的 getter 和 setter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:15:47.080

不要`attr_accessor`用于保存在数据库中的属性。Active Record 为您生成这些访问器。通过使用`attr_accessor`，您将用那些不存储 Active Record 期望找到它们的值的访问器覆盖这些访问器。

# html - 为什么我的画布从不绘图？

> ID：10065017
> 
> 赞同：2
> 
> 时间：2012-04-08T17:56:27.230
> 
> 标签：html, canvas, dart, dart-html

我昨天开始玩 Dart，并想尝试制作一个简单的游戏引擎。我也是 canvas element 的新手，所以我确定我在某个地方犯了一个愚蠢的错误。

这是我的主要游戏循环。

```
class FunTime {

FunTime(){

   gameTime = new Date.now();

   gameState = new List<IDrawableGameComponent>();

   StartMenu startMenu = new StartMenu();

   gameState.add(startMenu);

   CanvasElement _canvas = document.query('#canvas');

   context = _canvas.getContext('2d');

 }

 List<IDrawableGameComponent> gameState;
 Date gameTime;
 CanvasRenderingContext2D context;

}

void main() {

  var exit = false;

  FunTime game = new FunTime();

  Date previousDraw = new Date.now();

  while (!exit){

    game.gameTime = new Date.now();

    //update
    game.gameState.last().update(game.gameTime);

     int elapsed = game.gameTime.difference(previousDraw).inMilliseconds;
     //draw (60 fps)
     if(previousDraw == null || elapsed > 16){

       //print("Draw Called{$elapsed}");
       previousDraw = game.gameTime;
       game.gameState.last().draw(game.gameTime, game.context);
     }

  }

} 
```

下面是 StartMenu 代码的代码：

```
class StartMenu implements IDrawableGameComponent{
  num positionX = 0;
  StartMenu(){

  }
  void load(){

  }
  void update(Date gameTime){
    //if(positionX < 200)
     // positionX++;
  }
  void draw(Date gameTime, CanvasRenderingContext2D ctx){
    ctx.clearRect(0, 0, 800, 600);
    ctx.fillStyle = 'black';
    ctx.fillRect(0,0,800,600);
    ctx.fillStyle = 'white';
    ctx.fillRect(positionX, 50, 400, 200);
  }
} 
```

出于某种原因，除非我单步执行代码，否则永远不会绘制矩形。几乎就像在调用下一个清除之前，浏览器没有足够的时间来绘制它。我试过增加绘制间隔，但它没有改变任何东西。

这是我解决问题的方法：

```
class FunTime {

FunTime(){

    gameTime = new Date.now();

    gameState = new List<IDrawableGameComponent>();

    StartMenu startMenu = new StartMenu();

    gameState.add(startMenu);

    canvas = document.query('#canvas');

    context = canvas.getContext('2d');

    _previousDraw = 0;

    animate(0);

  }

  animate(int time){

    int elapsed = time - _previousDraw;

    if( _previousDraw == 0 || elapsed > 16){

      this.gameState.last().draw(time, this.context);

      _previousDraw = time;

    }

    this.gameState.last().update(time);

    window.webkitRequestAnimationFrame(animate, this.canvas);
  }

  int _previousDraw;

  List<IDrawableGameComponent> gameState;

  Date gameTime;

  CanvasRenderingContext2D context;

  CanvasElement canvas;

}

void main() {

  FunTime game = new FunTime();

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:25:17.990

main() 方法中的 while 循环永远不会返回让浏览器线程绘制。这就是为什么它只有在您逐步完成时才有效。

这种替代方法有效：使用 window.setInterval，每 16 毫秒调用一次函数，但它可能不是游戏循环的正确方法。

```
void main() {
  var exit = false;
  FunTime game = new FunTime();
  Date previousDraw = new Date.now();

  window.setInterval(   () {   //note the callback
    game.gameTime = new Date.now();
    //update
    game.gameState.last().update(game.gameTime);

    int elapsed = game.gameTime.difference(previousDraw).inMilliseconds;
    //draw (60 fps)
    if(previousDraw == null || elapsed > 16){

      previousDraw = game.gameTime;
      game.gameState.last().draw(game.gameTime, game.context);
    }
  }, 16);  //16 ms
} 
```

# c++ - c ++，通过删除[] x [i]缩小动态数组

> ID：10065020
> 
> 赞同：0
> 
> 时间：2012-04-08T17:56:41.323
> 
> 标签：c++, dynamic-arrays

我有一个大小为 4（4 行）的二维数组。要使数组大小为 2（2 行），我可以使用以下内容吗？（对于我们的硬件分配细节没有指定，代码应该适用于常见的 c++ 标准）

我正在删除数组的后半部分。

```
const int newSize = flightsArraySize/2;
for(int i = newSize-1; i < flightsArraySize-1; i++)
   delete [] flights[i]; 
```

还是我必须重新创建大小为 2 的航班数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:18:40.747

假设您已经使用 new 创建了一个二维数组，如下所示：

```
int **arr = new int*[rows];
for(int i=0; i<rows; ++i)
    arr[i] = new int[cols]; 
```

然后要调整它的大小，您必须执行以下操作：

```
int newRows = rows/2;

// Create a new array for the right number of rows.
int **newArr = new int*[newRows];

// Copy the rows we're keeping across.
for(int i=0; i<newRows; ++i)
    newArr[i] = arr[i];

// Delete the rows we no longer need.
for(int i=newRows; i<rows; ++i)
    delete[] arr[i];

// Delete the old array.
delete[] arr;

// Replace the old array and row count with the new ones.
arr = newArr;
rows = newRows; 
```

但说真的，如果你只使用向量，这一切都会容易得多：

```
std::vector<std::vector<int>> v(rows);
for(int i=0; i<rows; ++i)
    v[i].resize(cols);
v.resize(v.size()/2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:01:24.193

好吧，它释放了指向后半部分指针的内存。但是指针本身会留下来，指针数组不会被缩短。

### 编辑

哦对不起。这似乎是一个错误。如果你有这样的代码：

```
int **ptr = new int*[4];

for(int i = 0; i < 4; i++)
{
    ptr[i] = new int[4];
} 
```

然后当你输入

```
delete[] ptr[3]; 
```

它将删除整个数组，因此您可以像这样创建新数组：

```
ptr[3] = new int[any_number]; 
```

你是这个意思吗？对不起，我读得太快了……

# ruby-on-rails - Ruby on Rails SOA 设计资源和示例

> ID：10065022
> 
> 赞同：24
> 
> 时间：2012-04-08T17:57:28.267
> 
> 标签：ruby-on-rails, ruby, soa

我正在寻找一些资源来获取现有的单体 Rails 3.0 应用程序 (35K LOC) 并将其分解为 SOA 设计。任何书籍、博客、截屏视频或示例应用程序都会很棒。

我希望回答的主要问题是：

*   SOA 是否是正确的设计？
*   我从哪说起呢？
*   我可以避免哪些常见的陷阱？
*   我现在应该考虑什么与以后可以做什么？（即性能）

我见过的一些资源，但不完全确定它们是否是正确的起点：

*   [使用 Rails 的面向服务的设计](https://rads.stackoverflow.com/amzn/click/com/0321659368)
*   [RESTful Web 服务](https://rads.stackoverflow.com/amzn/click/com/0596529260)
*   [Enterprise Rails](https://rads.stackoverflow.com/amzn/click/com/B0026OR380)（不确定这本书是否仍然适用）
*   [SOA 设计模式](https://rads.stackoverflow.com/amzn/click/com/0136135161)（也许太“企业化”了？）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-06T04:23:09.937

> SOA 是否是正确的设计？

这取决于。你不讨厌这样的答案吗？根据定义，使用消息传递或 API 调用将您的应用程序分解为松散耦合的服务将实现 SOA。

它的美妙之处在于您可以在不更改其接口的情况下交换服务实现，并允许独立部署而无需关闭整个应用程序。此外，我将通过专门的 API 控制器来实现 SOA，这些 API 控制器是版本化的并公开自定义状态，而不是您为经过身份验证的用户或基于角色的会话保留的整个状态。

根据我的经验，困境在于是实现同步调用还是异步调用。同步调用显然更容易编程，但可能会让您的用户在执行时挂起，并且您必须为长时间运行的查询处理超时。注意数据库和 Web 服务器超时。

如果你实现异步调用，比如说通过 ActiveMessaging 或类似方法，你必须处理回调或某种通知才能冒泡给你的用户。它还需要设置主要和辅助消息代理，可能还有一些 JavaScript 或轮询器来检查状态。不过这一切都很有趣！

> 我从哪说起呢？

我会先看看它是否“值得”：毕竟，SOA 很酷，但确实引入了您目前没有的多个故障点。如果您认为分解的应用程序会产生 HA 的离散服务并将为其他项目提供服务，那么我将从您提到的“druby 书”和“面向服务”开始。

> 我可以避免哪些常见的陷阱？

我认为最大的担忧是跨多个服务的事务以及在远程服务失败时回滚整个操作的能力。如果您在某些操作中调用 A 并且它调用 B 并且 B 调用 C 并且 C 失败，那么问题就开始了。谁知道C失败了？你将如何告诉 B 和 A 回滚？他们可以吗？他们保存状态吗？前期设计的棘手问题。

另一个问题是，当您将工作流置于 SOA 之上时，生活会变得复杂：谁是业务流程的守护者？集中式还是分布式？这一切又是绝对酷的东西，但沉重的东西悄悄蔓延，不是吗？但是，如果您必须迁移到 SOA，这就是生活。

> 我现在应该考虑什么与以后可以做什么？（即性能）

我会考虑现在可以在其他应用程序中使用的明显通用服务。我不会过度 SOA 您的环境以避免增加故障点并将 SOA 引入的故障点保持在最低限度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-12T01:22:16.230

这是 Crowdtap 的 CTO 朋友提供的绝佳资源。他们做了同样的事情，这确实帮助他们极大地提高了产品开发的速度，并为他们提供了更好的测试覆盖率。希望它有帮助[https://www.youtube.com/watch?v=KsiQXAXsQDQ](https://www.youtube.com/watch?v=KsiQXAXsQDQ)

# node.js - Forever.js 启动和重启多个脚本

> ID：10065024
> 
> 赞同：6
> 
> 时间：2012-04-08T17:57:48.443
> 
> 标签：node.js, deployment

我的网络应用程序有 3 个主要的 node.js 组件：网站、提要和作业。

要开始这些，我将永远使用：

```
//forever.js

var forever = require('forever');

function start(name){

  forever.start( ['coffee', name + '.coffee'], { /* log options */ } )

};

start('website');
start('feeds');
start('jobs'); 
```

我首先注意到的是，如果我运行脚本，它不会将它作为守护进程运行。（这很可能是正常的）

```
node forever.js 
```

所以我接下来要做的是用forever 运行forever.js 脚本。我不确定这是否正确，还有一个 forever.startDaemon 所以不确定我应该使用哪个。

```
forever start forever.js 
```

这可行，但问题是我想在发布我的应用程序的新版本时重新启动所有进程。我第一次使用 git 的 post-receive 挂钩来运行 forever.js，但如果我在每个 post-recieve 上执行此操作，它每次只会产生 3 个进程。

所以我想我需要一种方法来重新启动 3 个进程（如果它们已经在运行）。我想用 forever.list 做到这一点，但文档只说：

```
forever.list (format, callback)

Returns a list of metadata objects about each process that is being run using 
forever. This method is synchronous and will return the list of metadata as such.
Only processes which have invoked forever.startServer() will be available from
forever.list() 
```

首先，我不确定格式是什么意思，其次它需要一个回调，但它说它是同步的。这有点令人困惑，我不知道如何使用列表。

最后，我要做的就是在 git 的 post-receive 钩子上启动/重启 3 个 node.js 进程。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T20:33:29.063

我认为最好的方法是：

```
forever start website.js
forever start feeds.js
forever start jobs.js 
```

然后在你的 git post-receive 钩子中：

```
forever restart website.js
forever restart feeds.js
forever restart jobs.js 
```

将这些节点进程包装在单个进程中并不是一个好主意。我现在个人将[Supervisord 与 monit 一起](http://blog.fgribreau.com/2012/03/process-management-at-bringr.html)使用，而不是永远使用（supervisord 比永远恕我直言更稳定和强大）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-05T17:14:07.603

我这样做：

```
#!/bin/sh

# Make sure we're in the right place
DIR=$(cd $(dirname "$0"); pwd)
cd $DIR
echo "[ I am $USER and I changed PWD to $DIR ]"

forever restart --spinSleepTime=2000 api_daemon.js || (forever start --spinSleepTime=2000 api_daemon.js && forever list) 
```

像魅力一样工作，我从来没有使用 ./run.sh 得到重复的进程

要阅读日志，我使用 tail -f /path/to/.log

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-25T17:13:54.460

是的，这是可能的。您需要使用`npm run forever`命令来运行脚本。

将此添加到您的 package.json

```
"scripts": {
    "forever" : "forever start api/api-server.js && forever start www/www-server.js && forever start upload/upload-server.js && forever start static/static-server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
} 
```

您可以使用创建 package.json`npm init`

# java - 使用 cardme 从一个文件中读取多个 vcard

> ID：10065025
> 
> 赞同：0
> 
> 时间：2012-04-08T17:57:51.470
> 
> 标签：java, vcf-vcard

有没有办法使用cardme从一个文件中读取多个vcard？根据[此处](http://sourceforge.net/apps/mediawiki/cardme/index.php?title=Reading_a_VCard)显示的示例，这似乎是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T07:29:03.667

我不知道 parseMultiple() 方法是否比这篇文章更新，但这实际上可以在我使用的版本（v0.3.3）中实现。

这是一个遍历 Files 数组的方法，其中每个文件可能有多个 vcard，并将所有读取的 VCard 添加到列表中。

```
public List<VCard> importVCards() {
    List<VCard> vcards = new ArrayList<VCard>();
    vcardFiles = getFiles();        
    for(int i = 0; i < vcardFiles.length; i++){
        try {               
            vcards.addAll(vcardEngine.parseMultiple(vcardFiles[i]));
        }
        catch(IOException ioe) {
            System.err.println("Could not read vcard file:
                "+vcardFiles[i].getAbsolutePath());
            ioe.printStackTrace();
        }
    }

    return vcards;
} 
```

卡梅可以在这里找到：[https ://github.com/george-haddad/cardme](https://github.com/george-haddad/cardme)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T19:08:44.340

没有内置方法可以做到这一点。您可以逐行迭代文件，直到`END:VCARD`然后使用该方法`VCardEngine.parse(String)`逐个读取每个VCard。

像这样的东西可能会起作用：

```
BufferedReader buffer = new BufferedReader(new FileReader("allcards.txt"));

VCardEngine engine = new VCardEngine();
StringBuilder builder = new StringBuilder();
List<VCard> vcards = new ArrayList<VCard>();

String line;
while ((line = buffer.readLine()) != null) {
    builder.append(line);

    if (line.contains("END:VCARD")) {
        VCard vcard = engine.parse(builder.toString());
        vcards.add(vcard);
        builder = new StringBuilder();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:19:17.167

Cardme 版本 0.3.3 已发布，支持从 1 个文件解析多个 vcard。你可以在这里下载它[http://sourceforge.net/projects/cardme/files/Cardme/Card%20Me%20Version%200.3.3/](http://sourceforge.net/projects/cardme/files/Cardme/Card%20Me%20Version%200.3.3/)

# iphone - TTWeetComposeViewController 在发布新推文后执行自定义代码

> ID：10065040
> 
> 赞同：1
> 
> 时间：2012-04-08T17:59:42.623
> 
> 标签：iphone, objective-c, ios, xcode

因此，使用 iOS5 中的新 Twitter 框架，我们可以简单地使用以下简单代码发布 Twitter 更新：

```
if ([TWTweetComposeViewController canSendTweet]) {
    TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:@"Tweeting from Steamerduck :)"];
    [controller presentModalViewController:tweetSheet animated:YES];
} 
```

但是，我想在用户单击此处发送后执行一些自定义代码：

![在此处输入图像描述](../Images/4960e221317fddcbceb447f94d8ccc4f.png)

是否可以在 TWTweetComposeViewController 发送推文后执行一些自定义代码、我自己的一些方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:10:07.893

您可以指定在用户完成推文撰写后调用的完成处理程序。它看起来像这样（我还没有机会在设备上测试它）：

```
if ([TWTweetComposeViewController canSendTweet]) {
    TWTweetComposeViewController *tweetSheet = [[TWTweetComposeViewController alloc] init];
    [tweetSheet setInitialText:@"Tweeting from Steamerduck :)"];

    // Set a completion handler to be called when the user is done
    // composing their tweet

    [tweetSheet setCompletionHandler:^(TWTweetComposeViewControllerResult result) {
        if (result == TWTweetComposeViewControllerResultDone) {
            // Tweet was sent, do something
        } else if (result == TWTweetComposeViewControllerResultCancelled) {
            // Do something else if the user cancelled

            [controller dismissModalViewControllerAnimated:YES];
        }
    }];

    [controller presentModalViewController:tweetSheet animated:YES];
} 
```

# java - 设置按钮的大小和位置

> ID：10065046
> 
> 赞同：0
> 
> 时间：2012-04-08T18:00:16.707
> 
> 标签：java, swing

有两个按钮

```
 left = new JButton("prev");
    right = new JButton("next"); 
```

我像这样将它们添加到jframe

```
 mainframe.add(left,BorderLayout.WEST);
    mainframe.add(right,BorderLayout.EAST); 
```

但是有高度与主机的高度相同。如何设置自己的宽度和高度？

以及如何设置他们的位置（不仅在北，西，东，南）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T18:18:11.103

> 如何设置自己的宽度和高度

不要那样做，而只是使用`NORTH`or本身添加到外部（父）布局的or`SOUTH`来限制大小。`JPanel``EAST``WEST`

很像这样：

![边框图形用户界面](../Images/34560cd273812e2d98c05bc9b0b2700a.png)

```
import java.awt.*;
import javax.swing.*;

class BorderGUI {

    BorderGUI() {
        JPanel gui = new JPanel(new BorderLayout(2,2));

        JPanel westConstrain = new JPanel(new BorderLayout(2,2));
        // LINE_START will be WEST for l-r languages, otherwise EAST
        gui.add(westConstrain, BorderLayout.LINE_START);

        JPanel westControls = new JPanel(new GridLayout(0,1,2,2));
        for (int ii=1; ii<3; ii++) {
            westControls.add( new JButton("" + ii) );
        }
        westConstrain.add(westControls, BorderLayout.PAGE_START);

        JPanel eastConstrain = new JPanel(new BorderLayout(2,2));
        gui.add(eastConstrain, BorderLayout.LINE_END);

        JPanel eastControls = new JPanel(new GridLayout(0,1,2,2));
        for (int ii=1; ii<4; ii++) {
            eastControls.add( new JButton("" + ii) );
        }
        // show at the bottom
        eastConstrain.add(eastControls, BorderLayout.PAGE_END);

        gui.add( new JScrollPane(new JTextArea(6,10)), BorderLayout.CENTER );

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new BorderGUI();
            }
        });
    }
} 
```

# jquery - POST 在点击功能内不起作用

> ID：10065047
> 
> 赞同：0
> 
> 时间：2012-04-08T18:00:31.533
> 
> 标签：jquery

我有这个完美的工作：

```
$.post("check_i.php",  {value: '<?php echo md5($_SERVER['REMOTE_ADDR']);?>'},
    function(result) {
        if(result == 'true') {
            alert('true');
        } else {
            $.post("update_pop_count.php",  {site: '<?php echo $site;?>'});
        }
    }); 
```

但是，当我尝试将其放在点击链接函数中时，在萤火虫中我可以看到 check_i.php 需要永远，并且永远不会调用更新弹出计数（我可以在数据库中看到计数未更新）

这是我的点击功能代码：

```
$("a").click(function() {
        $.post("stats_include/ajax/check_i.php",  {value: '<?php echo md5($_SERVER['REMOTE_ADDR']);?>'},
        function(result) {
            if(result == 'true') {
                alert('true');
            } else {
                $.post("stats_include/ajax/update_pop_count.php",  {site: '<?php echo $site;?>'});
            }
        });     
    }); 
```

这一切都在 document.ready 函数中。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:05:51.553

尝试`"`_`'`

```
$("a").click(function() {
        $.post("stats_include/ajax/check_i.php",  {value: "<?php echo md5($_SERVER['REMOTE_ADDR']);?>"},
        function(result) {
            if(result == 'true') {
                alert('true');
            } else {
                $.post("stats_include/ajax/update_pop_count.php",  {site: "<?php echo $site;?>"});
            }
        });     
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:41:03.993

如果您使用的是 href... 那么这可能是您的问题。我有一个类似的问题并通过添加“return false;”来解决它 在点击事件结束时。看到这个：[jQuery Ajax HTTP Request INTO a click function - not working](https://stackoverflow.com/questions/2266011/jquery-ajax-http-request-into-a-click-function-not-working)

# java - 在数组中计算工资并返回答案

> ID：10065048
> 
> 赞同：-1
> 
> 时间：2012-04-08T18:00:37.687
> 
> 标签：java, arrays

问题：

> 编写一个方法，接收工资值数组和双倍加薪率，计算并返回加薪后的工资数组。例如，如果加薪率为 1.07，一个人的薪水为 20000 英镑，那么加薪后的薪水为 20000 X 1.07 = 21400。

请注意：这不是家庭作业，而是来自伦敦大学伯贝克分校软件与编程 1 的过去考试题。

到目前为止我有，但我认为它不太正确，因为编译后，我需要点击检查。

```
public class salary
{
    public static double [] salary ()
    {
        double [] salary = {20000};
        riseRate = 1.07;
        for (int i = 0; i<salary.length; i++)
        {
            salary [i] = salary[i] * riseRate;
        }
        return salary;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:06:45.210

> 编写一个接收工资值数组和双倍增长率的方法

```
public static void foo(double[] salaries, double riseRate){...} 
```

> 返回提高后的薪水数组

```
public static double[] foo(double[] salaries, double riseRate){...} 
```

> 例如，如果加薪率为 1.07，一个人的薪水为 20000 英镑，那么加薪后的薪水为 20000 X 1.07 = 21400

```
public static double[] foo(double[] salaries, double riseRate){
    for(double salary : salaries){
        salary *= riseRate;
    }  
    return salaries;
} 
```

构建这个简单方法所需的所有信息都在那里。

# java - 导入 com.mockobjects.sql 无法解析

> ID：10065049
> 
> 赞同：-1
> 
> 时间：2012-04-08T18:00:38.723
> 
> 标签：java, eclipse

导入 com.mockobjects.sql.*；

上面的行创建错误 The import com.mockobjects.sql cannot be resolve

谁能告诉我我必须下载什么才能使它工作？Wihch 库添加到构建路径？它让我发疯！

编辑：我已经将 mockobject jar 添加到我的类构建路径中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:10:39.850

我相信`com.mockobjects.sql`是[Mock Objects](http://sourceforge.net/projects/mockobjects/)的包装。[您可以从官方网站](http://sourceforge.net/projects/mockobjects/files/mockobjects-java/0.09/)下载大约 9 年前发布的最新版本，并将[下载的 jars 导入您的项目构建路径。](http://www.cs.duke.edu/courses/cps004g/fall05/assign/final/addlibrary.html)

# python - python-pandas 和 mysql 等数据库

> ID：10065051
> 
> 赞同：97
> 
> 时间：2012-04-08T18:01:13.310
> 
> 标签：python, pandas

Pandas 的文档中有大量关于处理以各种格式存储的数据的最佳实践示例。

但是，我找不到任何使用 MySQL 等数据库的好例子。

谁能指出我的链接或提供一些代码片段，说明如何使用**mysql-python**有效地将查询结果转换为 Pandas 中的数据帧？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-06-21T12:34:29.960

正如 Wes 所说，一旦您使用 DBI 兼容库获得了数据库连接，io/sql 的 read_sql 就会执行此操作。我们可以看两个使用`MySQLdb`和`cx_Oracle`库连接到 Oracle 和 MySQL 并查询它们的数据字典的简短示例。这是示例`cx_Oracle`：

```
import pandas as pd
import cx_Oracle

ora_conn = cx_Oracle.connect('your_connection_string')
df_ora = pd.read_sql('select * from user_objects', con=ora_conn)    
print 'loaded dataframe from Oracle. # Records: ', len(df_ora)
ora_conn.close() 
```

这是等效的示例`MySQLdb`：

```
import MySQLdb
mysql_cn= MySQLdb.connect(host='myhost', 
                port=3306,user='myusername', passwd='mypassword', 
                db='information_schema')
df_mysql = pd.read_sql('select * from VIEWS;', con=mysql_cn)    
print 'loaded dataframe from MySQL. records:', len(df_mysql)
mysql_cn.close() 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-07-30T07:04:38.090

对于这个问题的最新读者：pandas 在他们[的 14.0 版文档中](http://pandas.pydata.org/pandas-docs/stable/whatsnew.html)有以下警告：

> 警告：一些现有的函数或函数别名已被弃用，并将在未来的版本中删除。这包括：tquery、uquery、read_frame、frame_query、write_frame。

和：

> 警告：使用 DBAPI 连接对象时对“mysql”风格的支持已被弃用。SQLAlchemy 引擎 (GH6900) 将进一步支持 MySQL。

这使得这里的许多答案都过时了。你应该使用`sqlalchemy`：

```
from sqlalchemy import create_engine
import pandas as pd
engine = create_engine('dialect://user:pass@host:port/schema', echo=False)
f = pd.read_sql_query('SELECT * FROM mytable', engine, index_col = 'ID') 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-26T18:58:37.440

作为记录，这是一个使用 sqlite 数据库的示例：

```
import pandas as pd
import sqlite3

with sqlite3.connect("whatever.sqlite") as con:
    sql = "SELECT * FROM table_name"
    df = pd.read_sql_query(sql, con)
    print df.shape 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-04-28T03:08:09.287

我更喜欢使用[**SQLAlchemy**](http://www.sqlalchemy.org/)创建查询，然后从中创建一个 DataFrame。如果您打算一遍又一遍地混合和匹配事物，**SQLAlchemy**可以更轻松地以 Python 方式组合**SQL条件。**

```
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Table
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from pandas import DataFrame
import datetime

# We are connecting to an existing service
engine = create_engine('dialect://user:pwd@host:port/db', echo=False)
Session = sessionmaker(bind=engine)
session = Session()
Base = declarative_base()

# And we want to query an existing table
tablename = Table('tablename', 
    Base.metadata, 
    autoload=True, 
    autoload_with=engine, 
    schema='ownername')

# These are the "Where" parameters, but I could as easily 
# create joins and limit results
us = tablename.c.country_code.in_(['US','MX'])
dc = tablename.c.locn_name.like('%DC%')
dt = tablename.c.arr_date >= datetime.date.today() # Give me convenience or...

q = session.query(tablename).\
            filter(us & dc & dt) # That's where the magic happens!!!

def querydb(query):
    """
    Function to execute query and return DataFrame.
    """
    df = DataFrame(query.all());
    df.columns = [x['name'] for x in query.column_descriptions]
    return df

querydb(q) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-01-21T14:03:07.133

MySQL 示例：

```
import MySQLdb as db
from pandas import DataFrame
from pandas.io.sql import frame_query

database = db.connect('localhost','username','password','database')
data     = frame_query("SELECT * FROM data", database) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-10-11T07:18:29.813

同样的语法也适用于使用 podbc 的 Ms SQL 服务器。

```
import pyodbc
import pandas.io.sql as psql

cnxn = pyodbc.connect('DRIVER={SQL Server};SERVER=servername;DATABASE=mydb;UID=username;PWD=password') 
cursor = cnxn.cursor()
sql = ("""select * from mytable""")

df = psql.frame_query(sql, cnxn)
cnxn.close() 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-09-11T22:30:42.640

这就是您使用 psycopg2 驱动程序连接到 PostgreSQL 的方式（如果您使用的是 Debian Linux 衍生操作系统，请使用“apt-get install python-psycopg2”安装）。

```
import pandas.io.sql as psql
import psycopg2

conn = psycopg2.connect("dbname='datawarehouse' user='user1' host='localhost' password='uberdba'")

q = """select month_idx, sum(payment) from bi_some_table"""

df3 = psql.frame_query(q, conn) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-12-17T17:34:08.013

`pandas.io.sql.frame_query`已弃用。改为使用`pandas.read_sql`。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-01-09T22:36:02.513

对于 Sybase，以下工作（使用[http://python-sybase.sourceforge.net](http://python-sybase.sourceforge.net)）

```
import pandas.io.sql as psql
import Sybase

df = psql.frame_query("<Query>", con=Sybase.connect("<dsn>", "<user>", "<pwd>")) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-14T14:57:33.423

## 导入模块

```
import pandas as pd
import oursql 
```

## 连接

```
conn=oursql.connect(host="localhost",user="me",passwd="mypassword",db="classicmodels")
sql="Select customerName, city,country from customers order by customerName,country,city"
df_mysql = pd.read_sql(sql,conn)
print df_mysql 
```

这工作得很好，并使用 pandas.io.sql frame_works（带有弃用警告）。使用的数据库是 mysql 教程中的示例数据库。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-28T08:20:11.483

这有助于我从基于**python 3.x**的***lambda 函数*****连接到AWS MYSQL(RDS)**并加载到 pandas DataFrame

 ***```
import json
import boto3
import pymysql
import pandas as pd
user = 'username'
password = 'XXXXXXX'
client = boto3.client('rds')
def lambda_handler(event, context):
    conn = pymysql.connect(host='xxx.xxxxus-west-2.rds.amazonaws.com', port=3306, user=user, passwd=password, db='database name', connect_timeout=5)
    df= pd.read_sql('select * from TableName limit 10',con=conn)
    print(df)
    # TODO implement
    #return {
    #    'statusCode': 200,
    #    'df': df
    #} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-06T09:07:45.653

对于 Postgres 用户

```
import psycopg2
import pandas as pd

conn = psycopg2.connect("database='datawarehouse' user='user1' host='localhost' password='uberdba'")

customers = 'select * from customers'

customers_df = pd.read_sql(customers,conn)

customers_df 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-31T04:20:27.857

这应该工作得很好。

```
import MySQLdb as mdb
import pandas as pd
con = mdb.connect(‘127.0.0.1’, ‘root’, ‘password’, ‘database_name’);
with con:
 cur = con.cursor()
 cur.execute(“select random_number_one, random_number_two, random_number_three from randomness.a_random_table”)
 rows = cur.fetchall()
 df = pd.DataFrame( [[ij for ij in i] for i in rows] )
 df.rename(columns={0: ‘Random Number One’, 1: ‘Random Number Two’, 2: ‘Random Number Three’}, inplace=True);
 print(df.head(20)) 
```***

# c# - 我的 C# 设置方法，效果不好

> ID：10065053
> 
> 赞同：1
> 
> 时间：2012-04-08T18:01:14.520
> 
> 标签：c#, hotkeys

好的，我有一个名为 settings 的表单，用于在表单中设置热键和其他内容，但是一旦设置问题，您需要重新启动应用程序才能使其生效，我的代码是这样的：

在主课中：

```
public void setHotkeys()
{
        if (Properties.Settings.Default.F4 == true)
        {
            Pvt.HookedKeys.Add(Keys.F4);
            MessageBox.Show("checked F4");
        }
        if (Properties.Settings.Default.F5 == true)
        {
            Pvt.HookedKeys.Add(Keys.F5);
            MessageBox.Show("checked F5");
        }
        Pvt.KeyDown += new KeyEventHandler(ghk_startPvt);
        Group.KeyDown += new KeyEventHandler(ghk_startGroup);
} 
```

用于保存/设置设置的设置表单类：

```
private void settingsPwn4g3_Load(object sender, EventArgs e)
{
    settingsLoad();
}
public void saveFields()
{
    Properties.Settings.Default.autoAttach = Autoattach.Checked;
    Properties.Settings.Default.F5 = F5.Checked;
    Properties.Settings.Default.F4 = F4.Checked;
    Properties.Settings.Default.Save();
}
public void settingsLoad()
{
    Autoattach.Checked = Properties.Settings.Default.autoAttach;
    F5.Checked = Properties.Settings.Default.F5;
    F4.Checked = Properties.Settings.Default.F4;

}

private void button1_Click(object sender, EventArgs e)
{
    pwn4g3 Pwn4g3 = new pwn4g3();
        saveFields();
        Pwn4g3.setHotkeys();
} 
```

更不用说这种方式对于超过 200 种设置非常烦人，这可能需要几天时间。还有其他想法吗？我想使用一个变量来设置热键，然后有一些东西可以让他们按下热键并设置它，而不是键盘上每个键的 200 个复选框。

# c++ - 为什么 c++11 上的 std::list 更大？

> ID：10065055
> 
> 赞同：28
> 
> 时间：2012-04-08T18:01:36.133
> 
> 标签：c++, gcc, c++11, c++98

使用此代码：

```
#include <iostream>
#include <list>

int main() {
    std::cout << sizeof(std::list<void*>) << std::endl;
}; 
```

我设法注意到，在 GCC 4.7`std::list<void*>`上，C++98 的大小为 16 字节，而 C++11 的大小为 24 字节。

我想知道 std::list 上发生了什么变化使它变大了。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-08T18:06:45.017

C++11 要求`list::size()`在恒定时间内执行。GCC 通过[将大小添加为数据成员](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=49561)使这成为可能。GCC 没有为 C++98 模式这样做，因为那会破坏二进制兼容性。

不要将 C++98 模式下编译的代码与 C++11 模式下编译的代码混用。它不起作用。

**更新**：显然，GCC 人改变了主意，C++11 的一致性不如现在保持兼容性重要，因此`list::size()`在 GCC 4.7.2 中将不再以恒定时间执行。它将在未来的版本中，在 C++98 和 C++11 模式下。

# sql-server - SQL Server：row_number 按超时分区

> ID：10065057
> 
> 赞同：5
> 
> 时间：2012-04-08T18:01:53.950
> 
> 标签：sql-server, tsql, sql-server-2012, olap, row-number

我有一个包含一系列 (IP varchar(15), DateTime datetime2) 值的表。每行对应一个用户发出的 HTTP 请求。我想将会**话编号分配**给这些行。不同的 IP 地址有不同的会话号。**如果最后一个请求早于 30min ，**则应为相同的 IP 分配一个新的会话号。这是一个示例输出：

```
IP,      DateTime,         SessionNumber, RequestNumber
1.1.1.1, 2012-01-01 00:01, 1,             1
1.1.1.1, 2012-01-01 00:02, 1,             2
1.1.1.1, 2012-01-01 00:03, 1,             3
1.1.1.2, 2012-01-01 00:04, 2,             1 --different IP => new session number
1.1.1.2, 2012-01-01 00:05, 2,             2
1.1.1.2, 2012-01-01 00:40, 3,             1 --same IP, but last request 35min ago (> 30min) 
```

第 1 列和第 2 列是输入，第 3 列和第 4 列是所需的输出。该表显示了两个用户。

由于底层表确实很大，**如何有效地解决这个问题**？我更喜欢对数据进行少量恒定的传递（一个或两个）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T19:13:41.263

这里有几个尝试。

```
;WITH CTE1 AS
(
SELECT *,
IIF(DATEDIFF(MINUTE,
       LAG(DateTime) OVER (PARTITION BY IP ORDER BY DateTime),
       DateTime) < 30,0,1) AS SessionFlag
FROM Sessions
), CTE2 AS
(
SELECT *,
       SUM(SessionFlag) OVER (PARTITION BY IP 
                                  ORDER BY DateTime) AS IPSessionNumber
FROM CTE1
)
SELECT IP,
       DateTime,
       DENSE_RANK() OVER (ORDER BY IP, IPSessionNumber) AS SessionNumber,
       ROW_NUMBER() OVER (PARTITION BY IP, IPSessionNumber 
                              ORDER BY DateTime) AS RequestNumber
FROM CTE2 
```

这有两个排序操作（`IP, DateTime`然后按`IP, IPSessionNumber`），但假设`SessionNumber`可以任意分配，只要根据 ip 地址/30 分钟规则为每个新会话分配不同的唯一会话号。

`SessionNumber`按时间顺序依次分配s。我用了以下。

```
;WITH CTE1 AS
(
SELECT *,
IIF(DATEDIFF(MINUTE,
       LAG(DateTime) OVER (PARTITION BY IP ORDER BY DateTime),
       DateTime) < 30,0,1) AS SessionFlag
FROM Sessions
), CTE2 AS(
SELECT *,
       SUM(SessionFlag) OVER (ORDER BY DateTime) AS GlobalSessionNo
FROM CTE1
), CTE3 AS(
SELECT *,
       MAX(CASE WHEN SessionFlag = 1 THEN GlobalSessionNo END) 
               OVER (PARTITION BY IP ORDER BY DateTime) AS SessionNumber
FROM CTE2)
SELECT IP,
       DateTime,
       SessionNumber,
       ROW_NUMBER() OVER (PARTITION BY SessionNumber 
                              ORDER BY DateTime) AS RequestNumber
FROM CTE3 
```

但是，这会将排序操作的数量增加到 4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T07:28:05.953

这是一个使用表变量和 row_number 来创建可在递归 CTE 中使用的 ID 的版本。将性能与游标和一个查询（由 Martin 提供）版本进行比较可能是值得的。

```
CREATE TABLE #T
(
  IP varchar(15),
  DateTime datetime,
  ID int,
  primary key (IP, ID)
)

insert into #T(IP, DateTime, ID)
select IP, DateTime, row_number() over(partition by IP order by DateTime) 
from #sessionRequests

;with C as
(
  select IP,
         ID,
         DateTime,
         1 as Session
  from #T
  where ID = 1
  union all 
  select T.IP,
         T.ID,
         T.DateTime,
         C.Session + case when datediff(minute, C.DateTime, T.DateTime) >= 30 then 1 else 0 end
  from #T as T
    inner join C 
      on T.IP = C.IP and
         T.ID = C.ID + 1
)
SELECT IP,
       DateTime,
       dense_rank() over(order by IP, Session) as SessionNumber,
       row_number() over(partition by IP, Session order by DateTime) as RequestNumber
from C
order by IP, DateTime, SessionNumber, RequestNumber
option (maxrecursion 0) 
```

# java - 在 Java 中为 LSI 实现创建术语文档矩阵

> ID：10065060
> 
> 赞同：0
> 
> 时间：2012-04-08T18:02:04.800
> 
> 标签：java, search-engine, svd

我正在使用向量空间模型做一个搜索引擎项目，我需要为其创建一个术语文档矩阵，然后在其上应用 SVD。

*我应该将术语作为行并将文档作为列吗？*

我在java中做它应该是这样的：

> 计数[keywordList.size()][listOfFilesinCorpus.length];

还是应该反过来？我需要将此二维数组传递给 apache commons math：

> RealMatrix A = Array2DRowRealMatrix(TDM) ;

其中 TDM 是术语文档矩阵。

我需要这些术语作为维度，然后我将比较向量空间中的文档。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:22:18.080

没关系，你总是可以通过换位在两者之间切换！

但通常，行是术语，列是文档

# knockout.js - jsFiddle - 选择逻辑

> ID：10065063
> 
> 赞同：1
> 
> 时间：2012-04-08T18:02:15.597
> 
> 标签：knockout.js

我已经启动了一个 jsFiddle，看看是否有人可以帮助我解决我在尝试使用带有添加标题的级联选择时遇到的逻辑问题。它正在部分工作

[http://jsfiddle.net/cleytonjordan/4cDdD/4/](http://jsfiddle.net/cleytonjordan/4cDdD/4/)

我有两个选择，并想添加标题以建议用户做什么和期望。我曾尝试按照 Flo 的建议使用 ko.computed，但我的逻辑仍然不正确。

## 这就是逻辑

select1 = 海报选择 select2 = 客户选择

一张海报可以有很多客户。

1 - 如果视图模型的海报阵列列表为空，我将“无海报”标题添加到 select1。我还为 select2 'No Clients' 添加了一个标题并禁用了两个选择

2 - 如果视图模型的 POSTER ARRAY LIST 只有一个项目，我将显示当前项目并且没有标题

```
 if the selected Poster object has no ClientSite array, I 
```

为 select2 'No Clients' 添加标题

```
 if the selected Poster object has only one item in the 
```

ClientSite 数组，我在 select2 中显示当前 ClientSite 项并禁用 select2

```
 if the selected Poster object has a collection of 
```

ClientSites，我在 select2 中显示“选择客户端”标题

3 - 如果视图模型的 POSTER LIST 有很多项目，我会在 select1 'Select Poster' 中显示一个标题

```
 if the selected Poster object has no ClientSite array, I 
```

为 select2 'No Clients' 添加标题

```
 if the selected Poster object has only one item in the 
```

ClientSite 数组，我显示该项目并禁用 select2

```
 if the selected Poster object has more than one item in 
```

ClientSite 数组，我在 select2 中显示“选择客户端”

当我在 select1 中选择一个在 ClientSite 中有项目的项目，然后返回到标题“选择海报”时，我收到一个错误。我认为这样做的原因是我正在从一个对象更改为一个字符串，但 select2 期待一个对象。

请问有人可以分享一些光吗？

干杯

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:47:09.333

问题是当您在 select1 中选择“选择海报”值时。selectedPoster observable 设置为未定义。您的第二个选择包含依赖于该值的绑定，该值不是 null/undefined，因此会出现错误。

一个简单的解决方法是通过使用一些计算变量来保护第二个选择不受此状态的影响。

```
self.ClientOptions = ko.computed(function() {
    if (self.selectedPoster()) {
        return self.selectedPoster().ClientSite();
    }
    return [];
});

self.ClientOptionsDisabled = ko.computed(function() {
   if (self.selectedPoster()) {
      return !(self.selectedPoster().ClientSite());
   }
   return false;
}); 
```

并更改您的标记

```
<select id="Select2" data-bind="options: ClientOptions, optionsText: 'ClientName'
, optionsCaption:select2OptionsCaption(), value: selectedClient, 
disable: ClientOptionsDisabled"></select> 
```

这是一个小提琴。

[http://jsfiddle.net/madcapnmckay/sDt4r/](http://jsfiddle.net/madcapnmckay/sDt4r/)

希望这可以帮助。

# java - 命名 EJB 的本地/远程接口时的标准约定或良好实践？

> ID：10065065
> 
> 赞同：5
> 
> 时间：2012-04-08T18:02:44.630
> 
> 标签：java, jakarta-ee, domain-driven-design

为 EJB 命名接口时是否有任何约定或良好实践？我也在尝试在我的应用程序中应用一些 DDD 原则，因此我在作为外部世界接口的类上使用“服务”原型。

如果我有一个为客户端提供业务逻辑操作的 QuestionService EJB，那么@Local/@Remote 接口会被命名为什么？到目前为止，我读过的所有书籍都只将它们命名为 QuestionServiceLocal/QuestionServiceRemote。这是否足够（我不想花哨的命名，但我想知道是否有更好的命名约定）？

此外，在应用程序中命名“服务”的其他/更好的方法是否不仅仅是在每个类上添加“...服务”后缀？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:11:02.817

Java 命名约定由社区以及公司的老开发人员创建和采用。
因此，每次我们遇到命名问题时，我们都可以进行以下操作：

1.  如果项目已经存在，那么只需遵循项目命名约定
2.  如果这是您正在创建的新项目，那么
    ：`QuestionServiceLocal`/`QuestionServiceRemote`是一个很好的方法
    b. `QuestionService`命名服务绰绰有余

# c# - CLR 中的模块、程序集和标头

> ID：10065070
> 
> 赞同：10
> 
> 时间：2012-04-08T18:03:20.090
> 
> 标签：c#, .net, assemblies, clr

我一直在用 C# 3.0 阅读 CLR，我一直在思考程序集、模块和标题，但是事情变得复杂了。这是我所理解的，但如果有人能进一步澄清一些事情，那就太好了：

1.  模块是 csc.exe 的结果，其中包含 IL 代码和元数据表。元数据表包含三个不同的表，它们是：

    *   “ModuleDef、TypeDef、PropertyDef、MethodDef、EventDef、FieldDef”等定义表
    *   参考表，例如“TypeRef、ModuleRef、MemberRef 等”。
    *   清单表**
2.  程序集是包含许多模块以及图像、文档、pdf 等资源的容器。

3.  PE 文件代表 Portable Executable 文件可以是 .EXE 或 .DLL。这些文件具有 PE​​32 或 PE32+ 标头、CLR 标头、元数据、IL 代码。

书上说组装是一个由模块组成的容器，它还说托管模块是

**托管模块：**

> 托管模块是需要 CLR 执行的标准 32 位 Microsoft Windows 可移植可执行 (PE32) 文件或标准 64 位 Windows 可移植可执行 (PE32+) 文件。
> 
> 杰弗里里希特 (2010-02-05)。通过 C# 进行 CLR（Kindle 位置 696-697）。OReilly Media - A. Kindle 版。

**装配的定义：**

> 程序集是一个或多个模块或资源文件的逻辑分组。
> 
> 杰弗里里希特 (2010-02-05)。通过 C# 的 CLR（Kindle 位置 766-767）。OReilly Media - A. Kindle 版。

![在此处输入图像描述](../Images/4d169105b64eec6e022e9968431afac8.png)

因此，从同一本书中获取的图像中，托管模块实际上是程序集的一部分。

PE32 标头属于程序集，但作者也说它也属于托管模块等。

这里的分别是什么？为什么他使用可互换的模块和组件，即使它们看起来足够独立。

> 托管 PE 文件有四个主要部分：PE32(+) 标头、CLR 标头、元数据和 IL。PE32(+) 标头是 Windows 期望的标准信息。CLR 标头是一小块特定于需要 CLR（托管模块）的模块的信息。
> 
> 杰弗里里希特 (2010-02-05)。CLR 通过 C#（Kindle 位置 1628-1629）。OReilly Media - A. Kindle 版。

图像也清楚地显示模块只有元数据而不是 PE32(+)、CLR 标头等。你认为清单和元数据可以互换使用吗？

您能否也解释一下模块中的 **Manifest 表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T18:25:57.037

Richter 的书很棒，但“真相”是在[ECMA CLI 标准中定义的。](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)
根据官方标准，请查看第 5 章“术语和定义”中的定义。
我想你只要看看那里的定义，就会最好地理解不同术语之间的共性和差异。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T18:56:07.793

您发布的内容对于托管程序集是如何嵌入到 PE32 文件中的有点害羞。它是一种非常灵活的格式，最初旨在存储本机可执行代码和资源，但也足够灵活以存储数据。从 Windows 的角度来看，这确实是一个程序集。只有 CLR 可以将该数据转换为可执行文件。

PE32 文件包含的不仅仅是程序集。实际上也有本机代码。纯托管程序集的 5 个字节。它有一个跳转指令到 mscoree.dll，托管代码的引导程序。EXE 包含到 _CorExeMain 的跳转，DLL 包含到 _CorDllMain 的跳转。这进一步扩展了混合模式程序集，System.Data.dll 和 PresentationCore.dll 就是其中的示例。它们中有大量的本机代码，由托管类包装的代码。C++/CLI 编译器和链接器是创建这样的程序集的方法。.text 部分包含代码，.reloc 部分包含重定位信息，可帮助将 DLL 加载到内存中的任意地址。

大多数 PE32 文件还包含*非托管*资源。Windows 可以理解的格式。这存储在 .rsrc 部分中。例如，C# 编译器会自动在那里创建资源，您可以使用 /win32res 选项覆盖这些资源。您可以使用 File + Open + File 看到这一点并选择一个程序集。有三个重要的：

*   RT_MANIFEST，包含资源 ID 为 1 的清单。这是 Windows 需要了解 C# 程序与 UAC 兼容的内容。您可以通过将应用程序清单文件添加到项目来创建自己的清单。
*   ICON，包含一个被选为桌面快捷方式默认图标的图标
*   版本，包含非托管版本资源。在 Explorer Details 属性表中可见，由编译器从 AssemblyInfo.cs 中的程序集属性合成

Dumpbin.exe 是一个查看 PE32 文件内部结构的工具。不幸的是，它知道托管程序集，因此您无法看到所有内容。

# c# - 旋转整个关卡

> ID：10065072
> 
> 赞同：1
> 
> 时间：2012-04-08T18:03:47.967
> 
> 标签：c#, .net, xna

我有一个`XNA`程序可以绘制纹理的字段（50x50）

![在此处输入图像描述](../Images/4d82410761d0475ec46575053e68a5e7.png)

绘图的代码如下所示：

```
namespace Village
{
    public class DrawLogic
    {

        internal static void DrawCreatures(GameTime gameTime, GraphicsDevice graphicsDevice, SpriteBatch spriteBatch, Dictionary<string, Texture2D> creatureTextures, List<Creature> list, Coordinate current)
        {
            spriteBatch.Begin();
            foreach (var item in list)
            {
                Vector2 origin = new Vector2(0, 0);
                if (item.Selected)
                {
                    spriteBatch.Draw(creatureTextures["selected"], new Vector2((item.Coordinates.X * 32) - current.X, (item.Coordinates.Y * 32) - current.Y), new Rectangle(0, 0, creatureTextures["human"].Width, creatureTextures["human"].Height), Color.White, 0.0f, origin, 1f, SpriteEffects.None, 1f);
                }
                else
                {
                    spriteBatch.Draw(creatureTextures["human"], new Vector2((item.Coordinates.X * 32) - current.X, (item.Coordinates.Y * 32) - current.Y), new Rectangle(0, 0, creatureTextures["human"].Width, creatureTextures["human"].Height), Color.White, 0.0f, origin, 1f, SpriteEffects.None, 1f);
                }
            }
            spriteBatch.End();
        }

        internal static void DrawObjects(GameTime gameTime, GraphicsDevice graphicsDevice, SpriteBatch spriteBatch, Dictionary<string, Texture2D> creatureTextures, List<IHarvestable> list, Coordinate current)
        {
            spriteBatch.Begin();
            foreach (var item in list)
            {
                Vector2 origin = new Vector2(0, 0);

                spriteBatch.Draw(creatureTextures["tree"], new Vector2((item.Coordinates.X * 32) - current.X, (item.Coordinates.Y * 32) - current.Y), new Rectangle(0, 0, creatureTextures["tree"].Width, creatureTextures["tree"].Height), Color.White, 0.0f, origin, 1f, SpriteEffects.None, 1f);

            }
            spriteBatch.End();
        }

        internal static void DrawMap(GameTime gameTime, GraphicsDevice graphicsDevice, SpriteBatch spriteBatch, Dictionary<string, Texture2D> worldTextures, Block[,] map, Coordinate current)
        {
            spriteBatch.Begin();

            for (int i = 0; i < map.GetLength(0); i++)
            {
                for (int j = 0; j < map.GetLength(1); j++)
                {
                    if (map[i, j].GetType() == typeof(Grass))
                    {

                        Vector2 origin = new Vector2(0, 0);
                        spriteBatch.Draw(worldTextures["grass"], new Vector2((i * 32) - current.X, (j * 32) - current.Y), new Rectangle(0, 0, worldTextures["grass"].Width, worldTextures["grass"].Height), Color.White, 0.0f, origin, 1.0f, SpriteEffects.None, 1f);
                    }
                }
            }

            spriteBatch.End();
        }
    }
} 
```

我现在的问题是，我怎样才能旋转整个地图？

它应该是这样的：

![第一个形状是我现在的样子，第二个是它应该看起来的样子](../Images/03213b1914bc81a6fa4d81bd7d7b6037.png)

我不知道这样做的最佳方法是什么。

我应该旋转我的每个纹理并将它们按正确的顺序放置，还是有办法旋转整个关卡？

我认为如果我可以旋转整个关卡，我的生物的行走算法会更容易，因为它与我当前的算法没有什么不同。

另一种方式（旋转每一个纹理）会更难......我想。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:13:12.750

我这样做的方法是在绘制地图之前将旋转矩阵应用于投影矩阵。您可以在[此处](http://msdn.microsoft.com/en-us/library/bb197901%28v=xnagamestudio.10%29.aspx)的 XNA 文档中看到一个小的操作指南。

如果您正在寻找等距投影（我认为这是您真正想要的），XNA Resources 上的磁贴引擎教程将在[此处](http://www.xnaresources.com/default.asp?page=Tutorial%3aTileEngineSeries:4)介绍。

不过，我不确定我是否看到这将如何简化您的“行走算法”，因为在这方面旋转显示仅用于视觉目的，对幕后数据没有影响。您能否进一步详细说明您认为它会改变事情的原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:08:29.497

不要试图旋转世界——那是不可能的。而是转变你的观点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:14:17.390

您可以使用采用变换矩阵的重载方法 spriteBatch.Begin()。您可以设置使用 Matrix.CreateRotationZ() 和 Matrix.CreateTranslation 创建的矩阵。通过将它们相乘来组合它们。如果要围绕某个点旋转，则必须应用将相应点重新定位到原点的平移，然后旋转并向后平移。

# c# - % (mod) explanation

> ID：10065080
> 
> 赞同：45
> 
> 时间：2012-04-08T18:04:28.107
> 
> 标签：c#, math, operators, modulo

Today I was writing a program in C#, and I used **%** to calculate some index... My program didn't work, so I debugged it and I realized that "**%**" is not working like in other program languages that I know.

For example:

In Python `%` returns values like this:

```
for x in xrange (-5, 6):
     print x, "% 5 =", x % 5

-5 % 5 = 0
-4 % 5 = 1
-3 % 5 = 2
-2 % 5 = 3
-1 % 5 = 4
0 % 5 = 0
1 % 5 = 1
2 % 5 = 2
3 % 5 = 3
4 % 5 = 4
5 % 5 = 0 
```

In C#:

```
for (int i = -5; i < 6; i++)
{
    Console.WriteLine(i + " % 5 = " + i % 5);
}

-5 % 5 = 0
-4 % 5 = -4
-3 % 5 = -3
-2 % 5 = -2
-1 % 5 = -1
0 % 5 = 0
1 % 5 = 1
2 % 5 = 2
3 % 5 = 3
4 % 5 = 4
5 % 5 = 0 
```

Did I do something wrong or is `%` not working like it should?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-08T19:19:30.267

As explained in the comments, the different behaviour is by design. The different languages just ascribe different meanings to the `%` operator.

You ask:

> How can I use modulus operator in C#?

You can define a modulus operator yourself that behaves the same way as the Python `%` operator:

```
int mod(int a, int n)
{
    int result = a % n;
    if ((result<0 && n>0) || (result>0 && n<0)) {
        result += n;
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-08T19:29:22.730

Both answers are correct. Although personally I think the "always positive" one makes more sense.

You can define your own modulus function that only gives positive answers like this:

```
int mod(int a, int n) {
    return ((a%n)+n) % n;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-08T20:15:25.690

In [modular arithmetic](http://en.wikipedia.org/wiki/Modular_arithmetic), one defines *classes* of numbers based on the modulo. In other words, in modulo *m* arithmetic, a number *n* is equivalent (read: the same) to *n* + *m*, *n* - *m*, *n* + *2m*, *n* - *2m*, etc.

One defines *m* "baskets" and every number falls in one (and only one) of them.

> **Example**: one can say "It's 4:30 pm" or one can say "It's 16:30". Both forms mean exactly the same time, but are different *representations* of it.

Thus both, the Python and C# results are correct! The numbers are *the same* in the modulo *5* arithmetic you chose. It would also have been *mathematically* correct to return (5, 6, 7, 8, 9) for example. Just a bit odd.

As for the choice of representation (in other words, the choice on how to represent negative numbers), that is just a case of different design choices between the two languages.

> However, that is not at all what the % operator actually does in C#. The % operator is not the canonical modulus operator; it is the remainder operator. The A % B operator actually answer the question "If I divided A by B using integer arithmetic, what would the remainder be?"

— [*What's the difference? Remainder vs Modulus* by Eric Lippert](https://blogs.msdn.microsoft.com/ericlippert/2011/12/05/whats-the-difference-remainder-vs-modulus/)

* * *

Quick snippet to get the canonical modulus:

```
return ((n % m) + m) % m; 
```

* * *

Test implementation:

**Mono/C#**:

```
machine:~ user$ cat mod.cs
using System;

public class Program
{
    public static void Main (string[] args)
    {
        Console.WriteLine(Mod(-2, 5));
        Console.WriteLine(Mod(-5, 5));
        Console.WriteLine(Mod(-2, -5));
    }

    public static int Mod (int n, int m)
    {
        return ((n % m) + m) % m;
    }
}

machine:~ user$ mono mod.exe
3
0
-2 
```

**Python**:

```
machine:~ user$ cat mod.py
print -2%5;
print -5%5;
print -2%-5;

machine:~ user$ python mod.py
3
0
-2 
```

# php - 将 strpos 0 返回为 TRUE 的优雅方式

> ID：10065082
> 
> 赞同：2
> 
> 时间：2012-04-08T18:04:37.943
> 
> 标签：php, coding-style, strpos, boolean-operations

```
switch (true){
    case stripos($_SERVER['SERVER_NAME'],"mydomain.com", 0) :

        //do something 
        break;

        /*
        stripos returns 4 ( which in turn evaluates as TRUE )  
        when the current URL is www.mydomain.com
        */

    default:

        /*
        stripos returns 0 ( which in turn evaluates as FALSE )  
        when the current URL is mydomain.com
        */

} 
```

当 stripos 在大海捞针中找到针时，返回 0 或向上。当 stripos 没有找到针时，它返回 FALSE。这种方法可能有一些优点。但我不喜欢那样！

我来自VB背景。在那里，instr 函数（相当于 strpos）在找不到针头时返回 0，如果找到针头则返回 1 或以上。

所以上面的代码永远不会引起问题。

你如何优雅地处理 PHP 中的这种情况？这里的最佳实践方法是什么？

另外，换一种说法，您对使用

```
switch(true) 
```

这是开始编写代码的好方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T20:00:17.083

如果大海捞针中不存在针，strpos 将返回 false。默认情况下（使用非严格比较），PHP 会将 0 和 false 视为等价。您需要使用严格的比较。

```
var_dump (strpos ('The quick brown fox jumps over the lazy dog', 'dog') !== false); // bool (true)
var_dump (strpos ('The quick brown fox jumps over the lazy dog', 'The') !== false); // bool (true)
var_dump (strpos ('The quick brown fox jumps over the lazy dog', 'cat') !== false); // bool (false) 
```

# c++ - 链接错误：QtCore.framework/Versions/4/QtCore for architecture x86_64

> ID：10065085
> 
> 赞同：1
> 
> 时间：2012-04-08T18:04:48.877
> 
> 标签：c++, qt, linker

在 Mac 上编译 QT 项目时，遇到以下错误

```
ld: file not found: QtCore.framework/Versions/4/QtCore for architecture x86_64 
```

这不是真的，因为我有 64 位架构可用，如下所示

```
$ cd
/Library/Frameworks/QtCore.framework/Versions/4
$ file QtCore
QtCore: Mach-O universal binary with 2 architectures
QtCore (for architecture x86_64):   Mach-O 64-bit dynamically linked shared library x86_64
QtCore (for architecture i386): Mach-O dynamically linked shared library i386 
```

似乎是什么问题？

更新： ld 命令行是

```
/usr/bin/c++   -dynamiclib -Wl,-headerpad_max_install_names   -compatibility_version 1.0.0 -current_version 1.0.5 -o libjreen.1.0.5.dylib -install_name /Users/sb/Work/QuiKast/jabber/libjreen-1.0.5/build/libjreen.1.dylib ./src/abstractroster.cpp.o ./src/action.cpp.o ./3rdparty/jdns/moc_qjdns.cpp.o ./3rdparty/jdns/moc_qjdns_p.cpp.o -F/usr/local/lib /opt/local/lib/libQtNetwork.dylib /opt/local/lib/libQtCore.dylib -framework qca /usr/lib/libz.dylib 
```

和

```
$ file /opt/local/lib/libQtCore.dylib 
/opt/local/lib/libQtCore.dylib: Mach-O 64-bit dynamically linked shared library x86_64 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:31:27.477

添加

```
-framework QtCore 
```

解决了这个问题

# ios - 自定义 TableViewCell 移动抓取器

> ID：10065086
> 
> 赞同：0
> 
> 时间：2012-04-08T18:04:49.067
> 
> 标签：ios, objective-c, iphone, uitableview

我有一个表格视图，其中单元格是可移动的。在编辑模式下，这会显示右侧的图像，您可以抓取该图像以在单元格中移动。这工作正常。但是，我想对其进行一些自定义，以便您可以从单元格上的任何位置获取该图像，而不是该图像。有没有办法在不完全废弃移动和构建自己的苹果的情况下做到这一点？也许使用平移手势识别器？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:26:20.380

幸运的是，[FMMoveTableView](http://cocoacontrols.com/platforms/ios/controls/fmmovetableview)刚刚发布在 github 上。它允许通过简单地点击并按住单元格来重新排序任何表格。

# c++ - 虚函数的 Vtable 是如何工作的

> ID：10065088
> 
> 赞同：5
> 
> 时间：2012-04-08T18:05:17.187
> 
> 标签：c++, virtual, vtable

我对虚拟表有一点疑问，每当编译器遇到类中的虚函数时，它都会创建 Vtable 并将虚函数地址放置在那里。对于继承的其他类，它也会发生类似的情况。它是否在每个类中创建一个指向每个 Vtable 的新指针？如果不是，当创建派生类的新实例并将其分配给 Base PTR 时，它如何访问虚拟函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T18:20:01.687

每次创建包含虚函数的类或从包含虚函数的类派生时，编译器都会为该类创建一个唯一的 VTABLE。

如果您不覆盖在基类中声明为 virtual 的函数，编译器将使用派生类中基类版本的地址。

然后它将 VPTR 放入类中。使用简单继承时，每个对象只有一个 VPTR。必须将 VPTR 初始化为指向相应 VTABLE 的起始地址。（这发生在构造函数中。）一旦将 VPTR 初始化为正确的 VTABLE，对象实际上“知道”它是什么类型。但是，除非在调用虚函数时使用它，否则这种自知是毫无价值的。当您通过基类地址调用虚函数时（编译器没有执行早期绑定所需的所有信息的情况），会发生一些特殊情况。编译器不执行典型的函数调用，即简单地对特定地址进行汇编语言调用，而是生成不同的代码来执行函数调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T18:17:10.797

对于每个具有虚函数的类，都会创建一个 vtable。然后，当使用构造函数创建具有可行性的类的对象时，构造函数将适当的 vtable 复制到对象中。因此，每个对象都有一个指向其 vtable 的指针（或者在多重继承的情况下，必要时，一个指向其每个 vtable 的 Orr。）。编译器知道vtable在对象中的什么位置，所以当它需要调用虚方法时，它会输出字节码来阻止vtable，查找合适的方法，然后跳转到它的地址。

在单继承的简单情况下，子类从父类的 vtable 副本开始，然后为子类中覆盖父类方法的每个虚拟方法获取一个覆盖条目。（并且它还为子 clad 中*不*覆盖父类方法的每个虚函数获取一个新条目）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T12:24:46.913

每当程序编译时，都会为每个类创建虚拟表，这清楚地表明了虚拟表是基于每个类创建的。在运行时，当创建对象时，编译器将 vptr 分配给对象，该对象指向特定类对象的虚拟表。简而言之，vptr 是基于每个对象创建的。

# c# - C#多线程循环整个DataTable，同时将线程限制为4

> ID：10065089
> 
> 赞同：1
> 
> 时间：2012-04-08T18:05:17.687
> 
> 标签：c#, multithreading

这可能是一个棘手的问题，但我所拥有的是一个包含 1000 行的 DataTable。Foreach 我想在新线程上处理这些行。但是我想将线程限制为 4 个线程。所以基本上我一直保持 4 个线程运行，直到整个数据表被处理。

目前我有这个；

```
 foreach (DataRow dtRow in urlTable.Rows)
        {
            for (int i = 0; i < 4; i++)
            {
                Thread thread = new Thread(() => MasterCrawlerClass.MasterCrawlBegin(dtRow));
                thread.Start();
            }
        } 
```

我知道这是倒退的，但我不确定如何实现我想要的。我想到了一个非常复杂的 while 循环，但也许这不是最好的方法？任何帮助总是受到赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T18:10:03.407

最简单的解决方案是如果您有 4 个 CPU 内核 - 并行 LINQ +并行度 == 4 将为每个 CPU 内核提供一个线程，否则您必须在线程/任务之间手动分配记录，请参阅以下两种解决方案：

# PLINQ 解决方案：

```
urlTable.Rows.AsParallel().WithDegreeOfParallelism(4)
             .Select(....) 
```

手动分发：

您可以使用简单的技巧通过工作线程手动分配项目：N 线程将从`N+4`输入列表中获取每个项目，例如：

*   第一个线程：每个`0+4`== 0、3、7...
*   第二：每个`1+4`== 1、4、8 ...
*   第三：每个`2+4`== ...

# 任务并行库解决方案：

```
private void ProcessItems(IEnumerable<string> items)
{
     // TODO: ..
}

var items = new List<string>(Enumerable.Range(0, 1000)
                                       .Select(i => i + "_ITEM"));
var items1 = items.Where((item, index) => (index + 0) % 4 == 0);
var items2 = items.Where((item, index) => (index + 1) % 4 == 0);
var items3 = items.Where((item, index) => (index + 2) % 4 == 0);
var items4 = items.Where((item, index) => (index + 3) % 4 == 0);

var tasks = new Task[]
    {
       factory.StartNew(() => ProcessItems((items1))),
       factory.StartNew(() => ProcessItems((items2))),
       factory.StartNew(() => ProcessItems((items3))),
       factory.StartNew(() => ProcessItems((items4)))
    };

Task.WaitAll(tasks); 
```

MSDN：

*   [WithDegreeOfParallelism()](http://msdn.microsoft.com/en-us/library/dd383719.aspx)：
*   [PLINQ 简介](http://msdn.microsoft.com/en-us/library/dd997425.aspx)

# jquery - 使用jquery在顶部固定大小的图像上居中可变宽度跨度

> ID：10065090
> 
> 赞同：1
> 
> 时间：2012-04-08T18:05:24.447
> 
> 标签：jquery

这是**[jsfiddle](http://jsfiddle.net/LK2jq/)**

```
//Fade in and out animation on hove buttons - icon set, features.
$(window).load(function() {
    $("ul#features_icons li img").hover(function() {
        $(this).next("span").animate({ opacity: "show" }, "fast");
    }, function() {
        $(this).next("span").animate({opacity: "hide"}, "fast");
    });
}); 
```

我正在尝试实现悬停效果，其中跨度的内容将显示：无，但只要将鼠标悬停在它上面就会变成显示：块。使用css，我设法通过使用负边距将它放在图像的顶部，但我的问题是使这个跨度相对于图像居中。

有任何想法吗？

使用 css 是不可能的。那么一定是用jquery的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:23:11.233

## *[演示 jsFiddle](http://jsfiddle.net/LK2jq/2/)*

我们必须计算图像的中心（宽度/2）和跨度的中心（宽度/2）。
有了这个`var`s 之后，我们就可以玩**span** `marginLeft`了。

```
var spanW = 0;
var imgW = $('li img').width()/2;
$(window).load(function() {
    $("ul#features_icons li img").hover(function() {
        spanW = $(this).next("span").width()/2;
        $(this).next("span").css({marginLeft: -spanW-imgW }).stop().animate({ opacity: "show" }, "fast");
    }, function() {
        $(this).next("span").stop().animate({opacity: "hide"}, "fast");
    });
}); 
```

我什至`.stop()`在您的动画之前添加了以防止动画冒泡（在您的元素问题上快速移动鼠标）。

# php - php从mysql中检索多个数据

> ID：10065091
> 
> 赞同：1
> 
> 时间：2012-04-08T18:05:26.033
> 
> 标签：php, mysql, forms, select, insert

我使用 php post 表单将多个 id 从我的复选框插入到 MySQL 数据库。在示例中，我将`id`（复选框值表`test`）插入到 mysql。现在我需要一个函数来从 MySQL 检索数据并使用我的示例输出打印到我的页面（打印`test`数据 = 用户 ID 的表的水平列表名称）

我的复选框值（表名是`test`）：

```
 id | name
----+-------
  1 | test1
  2 | test2
  3 | test3
  4 | test4
  5 | test5
  6 | test6
  7 | test7
  9 | test9 
```

MySQL 数据插入（表名`usertest`）：

```
 id | data    | userid
----+---------+--------
  1 | 1:4:6:9 | 2
  2 | 1:2:3:4 | 5
  3 | 1:2     | 7 
```

示例输出：（打印表测试的水平列表名称，其中数据 = 用户 ID）

```
user id 2 choise : test1 - test4 - test6 - test9 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:49:39.560

假设您的 usertest 表只有示例中列出的三列，您应该将其替换为以下内容 -

```
CREATE TABLE usertest (
    data INTEGER NOT NULL,
    userid INTEGER NOT NULL,
    PRIMARY KEY (data, userid)
); 
```

然后您的数据将如下所示 -

```
+------+--------+
| data | userid |
+------+--------+
|  1   |   2    |
|  4   |   2    |
|  6   |   2    |
|  9   |   2    |
|  1   |   5    |
|  2   |   5    |
|  3   |   5    |
|  4   |   5    |
|  1   |   7    |
|  2   |   7    |
+------+--------+ 
```

然后查询这些数据变得微不足道 -

```
SELECT usertest.userid, GROUP_CONCAT(test.name SEPARATOR ' - ')
FROM usertest
INNER JOIN test
    ON usertest.data = test.id
GROUP BY usertest.userid 
```

您可以在此处阅读有关[GROUP_CONCAT 的更多信息](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

您可以使用 PHP 解决方案并将可能的复选框值存储在由其 id 索引的数组中。就像是 -

```
<?php

$db = new PDO('mysql:dbname=test;host=127.0.0.1', 'user', 'pass');
$sql = 'SELECT id, name FROM test';

$stmt = $db->prepare($sql);
$stmt->execute();

$array = array();

while ($row = $stmt->fetchObject()) {
    $array[$row->id] = $row->name;
}

$sql = 'SELECT userid, data FROM usertest';

$stmt = $db->prepare($sql);
$stmt->execute();

while ($row = $stmt->fetchObject()) {
    $data = explode(':', $row->data);
    foreach($data as $key => $val) {
        $data[$key] = $array[$val];
    }
    print "user id {$row->userid} choise : " . implode(' - ', $data) . "<br/>\n";
} 
```

# iphone - 类似eBay App的加载动画

> ID：10065093
> 
> 赞同：0
> 
> 时间：2012-04-08T18:05:32.840
> 
> 标签：iphone, objective-c, cocoa-touch, uiwebview, ebay-api

我正在制作一个主要专注于在 UIWebviews 中加载网页的 iPhone 应用程序。为了向用户显示网页当前正在加载，我希望屏幕在页面加载时显示加载动画，类似于 eBay 应用程序：

![eBay 应用加载动画](../Images/5ca8dba3e374103cc0e91636fc78e4fa.png)

**我怎样才能做到这一点？** **或者，至少，我可以使用哪些 UIWebView 方法来告诉我页面是否正在加载以及是否存在互联网连接（因此它不会盲目地尝试永远加载）。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:16:02.327

您可以使用[MBProgressHUD](https://github.com/matej/MBProgressHUD)，这是一个可以为您完成大量工作的开源组件。

您需要创建 UIWebView 的委托并响应 didStartLoading 和 didFinishLoading 消息（此时您将显示隐藏进度视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:11:46.340

一个简单的方法就是在你需要它之​​前将它放在那里，并将 alpha 从 0 设置为 1。

你只需要一个灰色的东西（或任何**东西**）和一个活动指示器。

您也可以深入了解苹果的警报部分，但我认为上述内容更容易。

# php - 需要更新我的单用户应用程序数据库以允许多个用户，如何修改数据库架构？

> ID：10065094
> 
> 赞同：1
> 
> 时间：2012-04-08T18:05:34.633
> 
> 标签：php, mysql, database, database-design

我为不久前经营飞盘联盟的当地团体构建了一个应用程序。我想把它建立起来，让它成为我可以提供给其他团体的东西。

Jist：人们注册参加比赛，应用程序创建团队，应用程序创建时间表，每个组都有管理员可以管理他们的联赛

问题是，我有一个数据库，它最初设置为只处理一个组的联赛。我将如何重新设计架构以允许多个组能够登录并仅修改他们自己的联赛。

我的想法是创建一个“帐户”表，并将“account_id”添加到每个表。这是一个好方法吗？我已经附上了模式，所以你应该能够看到我到目前为止所拥有的！

注意：我在 Codeigniter (php) 和 MySQL 中构建它。

![在此处输入图像描述](../Images/97f46ffd59803eda27174085447bd466.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T02:19:36.533

多个客户；一个托管应用程序。您正在描述一个多租户数据库。

构建多租户数据库时，需要考虑

*   查询
*   成本
*   数据隔离和保护
*   维护，和
*   灾难恢复。

多租户解决方案的范围从每个租户一个数据库（不共享任何内容）到每个租户一个行（共享所有内容）。

**“无共享”、“独立数据库”或每个租户一个数据库**

*   每个客户最昂贵。（大量的客户端意味着大量的服务器。）
*   最高程度的数据隔离。
*   单个租户的灾难恢复简单明了。
*   *理论上*维护更难，因为需要在每个数据库中进行更改。但是您的 dbms 可能很容易支持在每个数据库中运行存储过程。（例如，SQL Server 有一个未记录的系统存储过程 sp_msforeachdb。您可以自己编写。）“无共享”也是最容易定制的，但这也引发了更多的维护问题。
*   每个表的最少行数。查询速度接近最佳。

**“共享一切”，或“共享模式”，或“每个星球一个数据库”**

*   每个租户最便宜。
*   最低程度的数据隔离。每个表都有一个列，用于标识行属于哪个租户。由于租户行在每个表中都混合在一起，因此意外暴露其他租户的数据相对简单。
*   单租户容灾相对复杂；您必须恢复许多表中的各个行。
*   鉴于所有租户共享桌子，结构维护更简单。但是，它增加了通信负载，因为您必须与每个租户沟通和协调每次更改。它不容易定制。
*   每个表的最大行数。快速查询更难，但这取决于有多少租户和多少行。您可以轻松地进入 VLDB 领域。

在“无共享”和“共享一切”之间是“共享模式”。

**“共享架构”**

*   租户共享一个数据库，但每个租户都有自己的命名模式。成本介于“不共享”和“共享一切”之间；大型系统通常比“不共享”需要更少的服务器，比“共享一切”需要更多的服务器。
*   比“共享一切”更好的隔离。不像“什么都不分享”那样孤立。（您可以对模式授予和撤销权限。）
*   单个租户的灾难恢复需要还原许多架构之一。这要么相对容易，要么相当困难，具体取决于您的 dbms。
*   维护比“不共享”更容易；不像“共享一切”那么容易。编写将在数据库中的每个模式中执行的存储过程相对简单。在租户之间共享公用表比“不共享”更容易。
*   通常每台服务器的活跃租户比“不共享”更多，这意味着他们共享（降级）更多资源。但不如“共享一切”那么糟糕。

Microsoft 有一篇关于[多租户架构](http://msdn.microsoft.com/en-us/library/aa479086.aspx)的好文章，其中包含更多详细信息。（该链接仅指向多页文档的一页。）

# java - 在 Java 中克隆对象需要什么

> ID：10065095
> 
> 赞同：7
> 
> 时间：2012-04-08T18:05:38.207
> 
> 标签：java, clone

我正在阅读有关 Java 中的克隆、如何制作对象的浅/深副本等内容。

我想知道为什么我需要在 Java 中创建对象克隆？任何实时示例都可能有助于理解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T18:09:17.807

拥有某物的克隆副本意味着您可以拥有“之前”和“之后”版本。当您使用副本测试某些内容时，您可以不理会原件。您可以通过简单地恢复到原始版本来提供撤消。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T18:14:07.883

您经常希望使用不可变对象，在这种情况下，克隆是代码的重要组成部分。例如，如果您有一个具有列表或数组类型字段的不可变对象，则您的 getter 应始终返回列表或数组的克隆以保持不变性。

另一个典型用例是当您想要“事务性”修改时，当您调用多个状态更改方法但只希望在所有方法都成功时结果可见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T18:17:24.677

克隆的一个具体例子是： [原型设计模式](http://en.wikipedia.org/wiki/Prototype_pattern)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-11T14:47:47.713

正如克隆本身所说的复制某物，所以在 java 中，当我们说对象的克隆时，它意味着创建或拥有另一个与现有对象相同的对象。

我们什么时候做克隆？当我们看到每次创建新对象都非常耗时，或者我们需要与所有已创建的对象具有相同或少量差异的新对象时，我们使用克隆。

克隆在java中有3种类型

*   浅拷贝
*   深拷贝
*   克隆

**浅拷贝**

浅拷贝是将对象的状态复制到另一个对象的过程，但两个对象都指向堆区域中的相同引用。

**深拷贝**

在 Deep Copy 中，创建了两个单独的对象并处于 Deep Copy 中。在这种情况下，一个对象的每个字段都被复制到另一个对象。

现在在java中克服这个困难的第三类是克隆的概念。

**java中的克隆**是通过实现Cloneable接口来完成的。Cloneable 是标记界面。

有关克隆的更多深入知识，请参阅：**[Java 中的克隆](http://stuffarrow.com/concept-cloning-java/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T18:12:37.760

您可以使用对象的深层克隆副本，因为您可能需要稍后要使用的某些方法的部分结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T18:15:49.757

作为一种帮助保持封装（从而使您的代码更健壮）的方法，您可以在从 getter 返回对象之前克隆对象。例如，getDate 方法可能会在返回给调用者之前克隆一个日期字段。

# java - Java 或 Netbeans 中的错误？

> ID：10065099
> 
> 赞同：2
> 
> 时间：2012-04-08T18:05:57.747
> 
> 标签：java, netbeans, noclassdeffounderror

这可能需要一点时间来理解，但我会尽量让它尽可能简单。我在 Netbeans 中有以下项目（更改名称以保护无辜者）：

1.  核
2.  组件1
3.  组件2
4.  更细

Component1、Component2 和 Thinger 都需要 Core，因此在其库中包含指向该项目的链接。

Thinger 还需要 Component1。

Component1 还需要 Component2。

每个项目都自行编译（仅包含参考）。但是，一旦我在 Component1 内创建 Component2 的实例，我就会在运行时收到以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: somepackage.stuff/Component2 
```

请记住，所有项目都继续构建得很好，我很难过。我没有使用反射，只有当我在 Component1 中包含 Component2 someVar = new Component2() 行时才会发生这种情况。知道什么可能导致这种情况发生吗？

**更新 #1：**在构建 Thinger 时，它似乎并没有拉入 Component2 的 jar。有没有办法可以强制 Netbeans 这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:34:06.557

Simply add a dependency to Component2 in Thinger. Many times components will have dependencies that aren't necessarily require for runtime (could be optional functionality, for example), but only for building. So, simply add the extra dependency to Thinger and it will be all good.

# android - android ExpandableListView - NullPointerException

> ID：10065100
> 
> 赞同：1
> 
> 时间：2012-04-08T18:06:09.527
> 
> 标签：android, expandablelistview

> 块引用

我在 android 中使用 ExpandableListView

这是适配器类中getChildView的代码：

```
 @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
         ViewHolder holder; 
        if (convertView == null) {

            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.childrow, null);
            holder = new ViewHolder(); 

            holder.tv = (TextView) convertView
                    .findViewById(R.id.textView1);
                            // I added this line of code
                holder.stop = (Button) convertView.findViewById(R.id.button3);

            holder.position = groupPosition;
            convertView.setTag(holder);
            holder.stop.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {

               ViewHolder holder = new ViewHolder();
               holder = (ViewHolder) v.getTag();

                    int position = 0;

                        position = holder.position; ************* here

                    System.out.println("coolapse tag " + position);

                    expList.collapseGroup(position);

                }
            });

        } else {
             holder = (ViewHolder) convertView.getTag();
        }

        return convertView;
    } 
```

**它在****标记的行中给出 NullPointerException 有 什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:15:33.120

是什么`holder.stop`？`holder.stop`不是你设置标签的视图，所以当你尝试做时`v.getTag()`，你会得到一个空值`holder`（顺便说一下，我没有看到`holder.stop`被初始化）。不确定您到底要做什么，但解决它的一种方法是将持有者也设置在`stop`视图上：

```
convertView.setTag(holder);
holder.stop.setTag(holder);
holder.stop.setOnClickListener(.... 
```

# php - 设置调用 PHP 函数，使用 POST 变量作为参数，作为 HTML 表单操作

> ID：10065101
> 
> 赞同：1
> 
> 时间：2012-04-08T18:06:12.693
> 
> 标签：php, html, database, forms, function

我目前有一个 HTML 文件，其中包含一个表单，当提交 POST 表单并调用一个简单的短 PHP 文件，该文件使用 POST 变量作为参数调用另一个 PHP 文件中的函数。文件都在下面。我想知道我是否可以以某种方式跳过中间人 PHP 文件，而只需从我的 HTML 文件中调用该函数。理想情况下，这会将调用设置为函数：

```
insert_PE(new PE($_POST[Date],$_POST[Participant],$_POST[Time],$_POST[Result],$_POST[Notes])); 
```

作为表单动作。有谁知道如何/是否可以实现？

HTML：

```
<FORM ID="FORM1" METHOD="POST" AUTOCOMPLETE="off" ACTION = "writeToDL.php">
    <INPUT TYPE="hidden" NAME="Date" STYLE="WIDTH:0px; " MAXLENGTH="8" TITLE="Enter Date" Value="<?php $dt = date('Y-m-d'); echo $dt ?>"/>
    <INPUT TYPE="text" NAME="Time" STYLE="WIDTH:70px; " MAXLENGTH="7" ONCHANGE="validateTime();" />
    <SELECT NAME = "Result">
        <OPTION VALUE = OK></OPTION>
        <OPTION VALUE = C>C</OPTION>
    </SELECT>
    <SELECT NAME = "Participant" STYLE = "WIDTH: 187">
        <OPTION SELECTED VALUE = "">Select...</OPTION>
            <?PHP
                $allParticipants = getall_participants();
                foreach($allParticipants as &$value) {
                    $val = $value->get_id();
                    echo "<OPTION VALUE='",$val,"'>";
                    echo $value->get_first_name()," ",$value->get_last_name();
                    echo "</OPTION>";
                }
            ?>
    </SELECT>
    <TEXTAREA NAME='Notes' COLS='28' ROWS='5'></TEXTAREA>
    <INPUT TYPE="image" SRC = "images/submit.png" VALUE="Submit Participant"/>
</FORM> 
```

PHP 文件：

```
<?php
    include_once('database/PE.php');
    insert_PE(new PE($_POST[Date],$_POST[Participant],$_POST[Time],$_POST[Result],$_POST[Notes]));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:10:30.787

> 我想知道我是否可以以某种方式跳过中间人 PHP 文件，而只需从我的 HTML 文件中调用该函数。

不，客户端只知道 URI。

URI 可以映射到 PHP 程序。多个 URI 可以映射到同一个 PHP 程序。您可以使用逻辑来确定对给定 URI 运行哪些函数。您无法避免在您的程序中使用该逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:06:24.530

你可以这样做：

```
<?php

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    include_once('database/PE.php');
    insert_PE(new PE($_POST['Date'],$_POST['Participant'],$_POST['Time'],$_POST['Result'],$_POST['Notes']));
} ?>
<html>
... rest of your page here ...
</html> 
```

这样，PHP 代码只有在实际执行 POST 时才会触发。有些人会建议检查表单字段是否存在，但这是不可靠的——您可能会在以后更改表单并忘记更新`if()`. 检查请求方法保证100%可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:23:28.620

一种选择是把`method="_the_main_php_file_containing_function_to_be_called_"`
我希望它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-04T05:41:40.113

我认为您可以在表单上使用隐藏字段，并使用要在“destination.php”上运行的函数的名称填充它。然后“destination.php”上的 switch 语句可以从 POST 变量中提取函数的名称。

# java - 从文本文件中读取时如何忽略数字？

> ID：10065106
> 
> 赞同：1
> 
> 时间：2012-04-08T18:07:01.537
> 
> 标签：java, arrays, file-io, arraylist

现在我想存储一个像这样的文本文件：

1个苹果

2根香蕉

3橙

4 猞猁

5 卡布奇诺

等等变成一个数据结构。最好的方法是以某种方式将 int 映射到字符串，还是我应该创建一个数组列表？当我存储单词本身时，我应该忽略 int 和任何空格，只保留单词本身。成行阅读时如何忽略 int？这是我现在破解的代码：

```
 public Dictionary(String filename) throws IOException {
  if (filename==null)
      throw new IllegalArgumentException("Null filename");
  else{
      try {
            BufferedReader in = new BufferedReader(new FileReader(filename));
            String str;
            int numLines=0;
            while ((str = in.readLine()) != null) {
                numLines++;
            }
            String[] words=new String[numLines];
            for (int i=0; i<words.length;i++){
                words[i]=in.readLine();
            }

            in.close();
        } catch (IOException e) {
    }
  } 
```

}

提前感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:33:30.687

I suggest you use a `List` of items to store the results parsed from the file. One way to parse every text line is to use the `String.split(String)` method. Also note that you should handle exceptions in the code properly and do not forget to close the `Reader` when you are done (no matter whether flawlessly or with an exception => use a `finally` block). The following example should put you on track... Hope this helps.

```
 package test;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.io.Reader;
import java.util.ArrayList;
import java.util.List;

public class Main {

  public static void main(String[] args) throws IOException {
    Main m = new Main();
    m.start("test.txt");
  }

  private void start(String filename) throws IOException {
    System.out.println(readFromFile(filename));
  }

  private final class Item {
    private String name;
    private int id;
    public Item(String name, int id) {
      this.name = name;
      this.id = id;
    }
    public int getId() {
      return id;
    }
    public String getName() {
      return name;
    }
    @Override
    public String toString() {
      return "Item [name=" + name + ", id=" + id + "]";
    }
  }

  private List<Item> readFromFile(String filename) throws IOException {
    List<Item> items = new ArrayList<Item>();
    Reader r = null;
    try {
      r = new FileReader(filename);
      BufferedReader br = new BufferedReader(r);
      String line = null;
      while ((line = br.readLine()) != null) {
        String[] lineItems = line.split(" ");
        if (lineItems.length != 2) {
          throw new IOException("Incorrect input file data format! Two space separated items expected on every line!");
        }
        try {
          int id = Integer.parseInt(lineItems[0]);
          Item i = new Item(lineItems[1], id);
          items.add(i);
        } catch (NumberFormatException ex) {
          throw new IOException("Incorrect input file data format!", ex); // JDK6+
        }
      }
    } finally {
      if (r != null) {
        r.close();
      }
    }
    return items;
  }

} 

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T18:14:34.990

这将不起作用，因为您已经在文件末尾，因此 in.readLine() 方法将返回 null。

我会使用 Map 来存储名称和数量......像这样：

```
HashMap<String, Integer> map = new HashMap<String, Integer>();

while( (line = br.readLine() !=null){
    //also check if the array is null and the right size, trim, etc.
    String[] tmp = line.split(" ");
    map.put(tmp[1], Integer.parseInt(tmp[0]) );
} 
```

否则，您可以使用 Scanner 类进行尝试。祝你好运。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T18:22:55.930

只需实现正则表达式的强大功能：

```
List texts<String> = new ArrayList<String>();
Pattern pattern = Pattern.compile("[^0-9\\s]+"); 
String text = "1 apple 2 oranges 3 carrots"; 
Matcher matcher = pattern.matcher(text); 

while (matcher.find()) { 
  texts.add(matcher.group(0)); 
} 
```

如今，正则表达式非常流行。compile 方法用于编译您的搜索模式，您在参数中看到的数字是为了防止它们出现在您的搜索中。所以它是完全安全的。使用 apache 的 IOUtilities 将文本文件转换为字符串

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T18:16:39.590

你可以`regular expressions`试一试。

```
Pattern p = Pattern.compile("[^0-9\\s]+");
String s = "1 apple 2 oranges";

Matcher m = p.matcher(s);

while (m.find()) {
  System.out.println(m.group(0));
} 
```

输出 =

> 苹果
> 
> 橘子

了解正则表达式[Java regex tutorial](http://www.vogella.de/articles/JavaRegularExpressions/article.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T18:12:50.640

如果您的单词不包含空格，则可以使用`String.split( " " )`将其拆分为由空格分隔`String`的数组。`Strings`

然后只取数组的第二个元素（第一个元素是数字）。

此外，该`String.trim( )`方法将删除`String`.

注意：可能有一些您想要执行的错误检查（如果`String`没有按照您的预期格式化怎么办）。但是这个代码片段给出了基本的想法：

```
...
String s = in.readLine( );
String[] tokens = s.split( " " );
words[i] = tokens[1].trim( );
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T18:13:50.427

如果您想做一些简单的事情，只需通过计算数字来对原始工作进行子串：

```
int t = 0;
while (word.charAt(t) >= '0' && word.charAt(t) <= '9')
  ++t;

word = word.substring(t); 
```

如果单词从不包含空格，您也可以使用`word.split(" ")[1]`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T18:41:08.353

**我**不使用缓冲区读取器，而是使用 Scanner 类，而不是使用 Array，而是使用 ArrayList，如下所示：

```
import java.util.Scanner;
import java.util.ArrayList;

public class Dictionary {
  private ArrayList strings = new ArrayList();

code...

public Dictionary(String fileName) throws IOException {

code...

try {
  Scanner inFile = new Scanner(new fileRead(fileName));

  ArrayList.add("Dummy"); // Dummy value to make the index start at 1
  while(inFile.hasNext()) {
    int n = inFile.nextInt(); // this line just reads in the int from the file and
                              // doesn't do anything with it
    String s = inFile.nextLine().trim();

    strings.add(s);
    }
  inFile.close(); // don't forget to close the file
} 
```

然后由于您的数据为 1、2、3、4、5，您可以只使用索引来检索每个项目的编号。

通过做这个：

```
for(int i = 1; i < strings.size(); i++) {
int n = i;
String s = n + " " + strings.get(i);
System.out.println(s);
} 
```

# r - 用 NA 替换不需要的因子水平值

> ID：10065110
> 
> 赞同：3
> 
> 时间：2012-04-08T18:07:43.970
> 
> 标签：r, na, r-factor

我有一个包含空白缺失值和 NA 的大型数据框。执行 summary(factor(df$col)) 给了我类似的东西

```
A  
123  
B  
50000  

90000  
C  
26000
NA's  
12476 
```

（注意 . 之后的空白`50000`。）
并且`sum(is.na(df$col))`是 12476，与 s 的数量相同`NA`，但我希望它是空白和`NA`s 的总和。
我试图通过做
`levels(df$col) <- c("A", "B", "Blank", "C")`
然后尝试为空白创建一个级别`df$col <- factor(df$col, exclude="Blank")`，它说`NA`生成了's但我的输出是相同的。有谁知道如何根据因子水平创建 NA 或有更好的解决方案来替换缺失值？我认为问题可能是空格不止一个空格字符，所以它们没有变成`NA`'s 但我不知道如何确认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:38:53.987

试试这个：

```
df <- data.frame(a=11:18, col=c("C", "", "A", NA, "A", "", "C", NA))
levels(df$col) # ""  "A" "C"
sum(is.na(df$col)) # 2

df$col <- factor(df$col, levels=LETTERS[1:3])
levels(df$col) # "A" "B" "C"
sum(is.na(df$col)) # 4 
```

由于新级别不包括空白 ("")，所有空白都将变为 NA。

# r - gamlss 中 mu 参数的 p 值

> ID：10065112
> 
> 赞同：0
> 
> 时间：2012-04-08T18:08:12.213
> 
> 标签：r

我正在尝试将膨胀的 beta 回归模型拟合成比例数据。我正在使用该软件包`gamlss`并指定 BEINF 系列。我想知道如何提取`$mu.coefficients`. 当我输入命令时`fit.3$mu.coefficients`（如我的 r 代码底部所示），它只给了我 Mu 系数的估计值。以下是我的数据示例。

```
mydata = data.frame(y = c(0.014931087, 0.003880983, 0.006048048,  0.014931087,
+           0.016469269, 0.013111447, 0.012715517, 0.007981377), index = c(1,1,2,2,3,3,4,4))

mydata
        y      index
1 0.004517611     1
2 0.004351405     1
3 0.007952064     2
4 0.004517611     2
5 0.003434018     3
6 0.003602046     4
7 0.002370690     4
8 0.002993016     4

> library(gamlss)
> fit.3 = gamlss(y ~ factor(index), family = BEINF, data = mydata)
> summary(fit.3)

*******************************************************************
Family:  c("BEINF", "Beta Inflated") 

Call:  
gamlss(formula = y ~ factor(index), family = BEINF, data = mydata) 

Fitting method: RS() 

-------------------------------------------------------------------
Mu link function:  logit
Mu Coefficients:

                Estimate  Std. Error  t value   Pr(>|t|)
(Intercept)      -5.3994      0.1204  -44.858  1.477e-06
factor(index)2    0.2995      0.1591    1.883  1.329e-01
factor(index)3   -0.2288      0.1805   -1.267  2.739e-01
factor(index)4   -0.5017      0.1952   -2.570  6.197e-02

-------------------------------------------------------------------
Sigma link function:  logit
Sigma Coefficients:
             Estimate  Std. Error  t value   Pr(>|t|)
(Intercept)    -4.456      0.2514   -17.72  4.492e-07
-------------------------------------------------------------------
Nu link function:  log 
Nu Coefficients:
             Estimate  Std. Error    t value  Pr(>|t|)
(Intercept)    -21.54       10194  -0.002113    0.9984

-------------------------------------------------------------------
Tau link function:  log 
Tau Coefficients:
             Estimate  Std. Error    t value  Pr(>|t|)
(Intercept)    -21.63       10666  -0.002028    0.9984

-------------------------------------------------------------------
No. of observations in the fit:  8 
Degrees of Freedom for the fit:  7
      Residual Deg. of Freedom:  1 
                      at cycle:  12 

Global Deviance:     -93.08548 
            AIC:     -79.08548 
            SBC:     -78.52938 
*******************************************************************

fit.3$mu.coefficients
   (Intercept) factor(index)2 factor(index)3 factor(index)4 
    -5.3994238      0.2994738     -0.2287571     -0.5016511 
```

我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:26:01.873

使用 summary.gamlss 中的保存选项，就像上面的模型一样

```
fit.3 = gamlss(y ~ factor(index), family = BEINF, data = mydata)    
sfit.3<-summary(fit.3, save=TRUE)
sfit.3$mu.coef.table
sfit.3$sigma.coef.table
#to get a list of all the slots in the object
str(sfit.3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-27T15:46:33.337

```
fit.3 = gamlss(y ~ factor(index), family = BEINF, data = mydata.ex)    
sfit.3<-summary(fit.3, save=TRUE) 
fit.3$mu.coefficients
sfit.3$coef.table # Here use Brackets []
estimate.pval<-data.frame(Intercept=sfit.3$coef.table[1,1],pvalue=sfit.3$coef.table[1,4],
                          "factor(index)^2"=sfit.3$coef.table[2,1] ,pvalue=sfit.3$coef.table[2,4],
                          "factor(index)^3"=sfit.3$coef.table[3,1] ,pvalue=sfit.3$coef.table[3,4],
                         "factor(index)^4"=sfit.3$coef.table[4,1] ,pvalue=sfit.3$coef.table[4,4]) 
```

# actionscript-3 - 最小/最大字符

> ID：10065113
> 
> 赞同：0
> 
> 时间：2012-04-08T18:08:13.520
> 
> 标签：actionscript-3

我注意到 AS3 似乎不包含定义所需字符的最少数量的方法，但确实有一个最大值。

有什么办法可以用文本字段做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:54:47.570

每个最大字符数是作为 UI 元素本身`TextField`施加的硬约束，而不是管理它的 UI 逻辑。`TextField`最小字符不能以这种方式绑定到 UI 组件，因为不能输入最小字符，除非最小数字为零，这违背了这种约束的目的。

上限更多是为了维护 UI 的完整性，而不是限制输入，因为您想在编程逻辑中进行这些检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T16:04:23.713

[joncys](https://stackoverflow.com/users/1009933/joncys)已经死定了 - 你的 TextField 不能真的有除 0 以外的最小字符限制，但是如果他们尝试提交的信息字符太少，你可以给用户一条错误消息。

您的 TextField 应该有一个包含其内容的字符串变量。只需检查字符串的长度是否大于或等于您想要的最小值，并使用 else 子句给用户一个错误并且不让他们提交/进度。

```
if (string.length >= 5) {
    // do whatever. They've entered at least 5 characters
} else {
    // Throw an error at the user.
} 
```

# c# - Winforms 非模态通知

> ID：10065114
> 
> 赞同：0
> 
> 时间：2012-04-08T18:08:17.120
> 
> 标签：c#, winforms, messagebox, growl, non-modal

我有一个应用程序，当前在用户保存时显示一个消息框，上面写着“保存成功”。问题是，用户在使用这个应用程序时往往会经常保存，而消息框是@$$ 中的一个痛苦。我想要一个小通知框，它可以淡入淡出并且不需要用户交互，有点像 Growl 通知在 Mac 上的工作方式。

是否有任何 .net 库或免费的 3rd 方应用程序可以执行此类操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:10:41.270

没有必要为这样的事情使用 3rd 方库。

为您的通知创建一个表单，按照您的意愿设置样式。

当您需要通知时，您可以`Show`使用该[`Opacity`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.opacity.aspx)属性淡入淡出表单（使用计时器为更改设置动画）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:12:11.573

看看这个，看看它是否符合你的要求。 [类似 Office 2003 的弹出窗口](http://www.codeproject.com/Articles/13547/An-Office-2003-like-popup-notifier)

# macos - 滚动视图中的 NSMatrix；原点设置被锁定。为什么？

> ID：10065120
> 
> 赞同：0
> 
> 时间：2012-04-08T18:09:53.137
> 
> 标签：macos, cocoa, scrollview, nsmatrix

我有一个`NSMatrix`, 嵌入在滚动视图中（使用 IB）。效果很好，`-sizeToCells`在更改行数/列数后使用该方法。但我想在滚动视图中移动初始矩阵。IB 使 X 和 Y 设置变灰。为什么，以及如何改变原点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:06:48.007

IIRC，`NSScrollView`或其`NSClipView`将始终将`documentView`' 的原点设置为`(0,0)`。（可能在[`-[NSScrollView tile]`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScrollView_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScrollView/tile)？）

因此，IB 禁用原始设置，因为它们永远不会被使用。

如果您的应用程序正常运行，我不会担心它在 IB 中的样子。

# android - 带有 roboguice 抛出异常的简单 android 应用程序

> ID：10065123
> 
> 赞同：2
> 
> 时间：2012-04-08T18:10:19.960
> 
> 标签：android, roboguice

我有一个非常简单的应用程序，但是当我添加 roboguice 时它会抛出

> java.lang.RuntimeException：无法实例化应用程序 com.MyFirstApp.MyFirstApplication：java.lang.ClassNotFoundException：com.MyFirstApp.MyFirstApplication

应用类：

```
public class MyFirstApplication extends RoboApplication {

    @Override
    protected void addApplicationModules(List<Module> modules) {
        //modules.add(new DefaultModule());
    }
} 
```

主要活动：

```
public class MainActivity extends RoboActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

清单：

```
<manifest 
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.MyFirstApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk 
        android:minSdkVersion="14" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:name="MyFirstApplication">
        <activity
            android:name="com.MyFirstApp.Activities.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action 
                    android:name="android.intent.action.MAIN" />
                <category 
                    android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

我已将 guice-2.0-no_aop.jar 和 roboguice-1.1.3.jar 放在 assets 文件夹中，并将它们添加到构建路径中。

当我移除机器人部分时，它工作正常。谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T14:28:44.203

好吧，我发现了问题所在。我使用的是 SDK v17+，在那个版本中，外部库需要放在“libs”文件夹中，并且只能放在 libs 文件夹中。所以我找到了所有教程，他们只是把它放在错误的资产文件夹中。

链接到我得到答案的地方： http: [//groups.google.com/group/roboguice/browse_thread/thread/474116b05205​​0ae2](http://groups.google.com/group/roboguice/browse_thread/thread/474116b052050ae2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:19:28.957

首先，扩展 from`RoboApplication`是 RoboGuice 1.x 的东西，你真的应该使用 RoboGuice 2.0（你不再需要这样做）。现在，对于您的例外，您的 Application 课程真的在 `com.MyFirstApp.MyApplication`吗？如果没有，您将需要更新`name`属性以匹配。

# python - 人机可读——文件中的结构化数据存储

> ID：10065124
> 
> 赞同：0
> 
> 时间：2012-04-08T18:10:21.460
> 
> 标签：python, xml, ubuntu

我需要存储人类和机器可读的结构化文件数据。我主要使用 python 打开/编辑/读取这些文件。但是我可能还需要使用其他程序。

我曾经使用 XML/XPATH。然而，xpath 库是脆弱的，并且不能在大多数系统上运行而没有大量的挫败感。我厌倦了试图弄清楚 xpath，我将我的脚本移植到不同的平台。

```
 me@ubuntu:~/$ program -arg1 "foo" -arg2
   File "/home/me/bin/script.py", line 16, in <module>
     from xml import xpath 
 ImportError: cannot import name xpath 
```

顺便说一句，`sudo apt-get install python-xml`不能解决这个问题。

底线是我受够了 xml/xpath。我想要一个在所有情况下、在所有平台上都能正常工作的解决方案！

我可以使用什么？建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:14:48.077

[`xml.etree.elementTree`](http://docs.python.org/library/xml.etree.elementtree.html)自 Python 2.5 起是标准库的一部分。它还包含一个基本的 XPath[`findall`](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.findall)函数。

或者，您可以[使用 lxml 的 XPath 方法](http://lxml.de/xpathxslt.html#xpath)来模仿 的接口`xml.etree.ElementTree`，但支持更高级的 XPath 表达式。但是，需要[安装](http://lxml.de/installation.html)lxml，因为它（还）不是标准库的一部分。

对于许多任务，您还可以使用[JSON](http://docs.python.org/library/json.html)代替 XML。JSON 很容易使用您的编程语言的本机函数解析和遍历。

# java - JDBC + postgres 连接问题

> ID：10065126
> 
> 赞同：0
> 
> 时间：2012-04-08T18:10:31.573
> 
> 标签：java, postgresql, jdbc

当我使用 jdbc 连接到 postgresql 数据库时出现问题。我已经从 pgAdmin3 站点上的包下载安装了 postgresql 9.1（我需要 gui）。我正在使用 pgAdmin 毫无问题地连接到 db，但是当我尝试从 java 代码连接时，出现以下错误：

> org.postggresql.util.PSQLException：致命：用户 postgres 的密码验证失败

引发异常的代码是

```
public class ConnectionManager {
   private ConnectionManager(){};
   private static boolean driverLoad = false;
   private static final String pgDriver="org.postgresql.Driver";
   private static final String pgUrl="jdbc:postgresql:coffeeDB";
   private static final String usr="postgres";
   private static final String psw="password";

   public static Connection getConnection() throws ClassNotFoundException, SQLException {
       if(!driverLoad) {
           Class.forName(pgDriver);
           driverLoad=true;
       }
       return DriverManager.getConnection(pgUrl, usr, psw);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:49:21.527

我已经解决了。只需在 postgresql 的 URL 上添加默认端口即可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T06:18:23.197

我在 Play 2.2 中得到了这个。略有不同的味道

```
[error]c.j.b.h.AbstractConnectionHook - Failed to obtain initial connection Sleeping for 0ms and trying again. Attempts left: 0\. Exception: null.Message:FATAL: password authentication failed for user "root" 
```

问题是 application.conf 中 url 周围的引号。如果有特殊字符，需要引号

失败

```
db.default.url=jdbc:postgresql://myMachine:5432/mydb 
```

作品

```
db.default.url="jdbc:postgresql://myMachine:5432/mydb" 
```

密码也一样

失败

```
Passw)rd#! 
```

作品

```
"Passw)rd#!" 
```

# wpf - 在 ScrollViewer 可滚动区域中包含 Adorner

> ID：10065130
> 
> 赞同：3
> 
> 时间：2012-04-08T18:10:46.770
> 
> 标签：wpf, scrollviewer, adorner

我目前有一个`Adorner`内部的`ScrollViewer`. 滚动查看器底部的对象有时会在其下方显示一个大装饰器。不幸的是，该装饰器不包含在`ExtentHeight`滚动查看器中，因此装饰器的下部被滚动查看器视口的底部剪裁。

有没有办法让装饰层的内容包含在滚动查看器的可滚动区域中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T00:32:30.493

恐怕其他来源和调查时间的共识似乎是我提到的根本不可能。我的解决方案是简单地检测 ListBox 中的最后一项，并在显示 Adorner 时自动在其底部添加边距。这有点像 hack，但它实现了上面提到的所需行为。

# java - 使 Struts2 表单使用 setId(Long) 而不是 setId(String)

> ID：10065131
> 
> 赞同：0
> 
> 时间：2012-04-08T18:10:46.690
> 
> 标签：java, struts2, struts

首先，我有一个表单，用于编辑持久数据集。我有一个隐藏字段，其中包含要编辑的数据集的 id。当我提交表单时，我得到一个`NoSucheMethodException`，因为 Struts 想要一个方法`setId(String)`，但我的 bean 只有一个`setId(long)`.

我真的不想创建另一种方法，将 String 转换为 long。有什么方法可以让 Struts 自己解析这个值到 long 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:43:54.000

必须用 包围表单`<s:push value="nameOfYourBean">`，以使 Struts 按我的意愿行事。对不起，不必要的问题...

# android - 动态设置布局位置

> ID：10065134
> 
> 赞同：1
> 
> 时间：2012-04-08T18:11:37.753
> 
> 标签：android, android-layout, dynamic, position

我想动态创建4个RelativeLayout，以便每个后续布局都放在前一个布局之下。我正在尝试使用这段代码来做到这一点：

```
RelativeLayout layoutParent = (RelativeLayout)findViewById(R.id.layoutParent);
    int layouts = 4;

        int dp15 = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 15, getResources().getDisplayMetrics());

        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
            params.setMargins(dp15, dp15, dp15, dp15);

        for (int l = 0; l <= layouts; l++)
        {
            RelativeLayout queueLayout = new RelativeLayout(getApplicationContext());
            TextView one = new TextView(getApplicationContext());
            one.setText(String.valueOf(l));
            queueLayout.setId(2000 + l);
            if (l != 0) params.addRule(RelativeLayout.BELOW, queueLayout.getId() - 1);
            queueLayout.addView(one, params);
            layoutParent.addView(queueLayout);
        } 
```

但我无法获得每个布局的所需位置。有人能告诉我怎么做我想做的事吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:43:03.553

您设置了`BELLOW`规则，但在将子项添加到父布局时从不使用它`RelativeLayout`（如 MisterSquonk 所说）。`LayoutParams`还为孩子使用另一组`RelativeLayout`：

```
for (int l = 0; l <= layouts; l++) {
        RelativeLayout queueLayout = new RelativeLayout(getApplicationContext());
        TextView one = new TextView(getApplicationContext());
        one.setText(String.valueOf(l));
        queueLayout.setId(2000 + l);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        if (l != 0) lp.addRule(RelativeLayout.BELOW, queueLayout.getId() - 1);
        queueLayout.addView(one, params);
        layoutParent.addView(queueLayout, lp);
    } 
```

# ruby - Ruby Regex 奇怪的错误，这是怎么回事？

> ID：10065135
> 
> 赞同：0
> 
> 时间：2012-04-08T18:11:39.863
> 
> 标签：ruby, regex

我有以下程序：

```
class Matcher
  include Enumerable
  def initialize(string, match)
    @string = string
    @match = match
  end

  def each
    @string.scan(/[@#match]/) do |pattern|
      yield pattern
    end
  end
end

mch = Matcher.new("the quickbrown fox", "aeiou")
puts mch.inject {|x, n| x+n} 
```

它应该`aeiou`与字符串匹配字符`the quickbrown fox`

无论我把什么作为模式，它都会奇怪地打印出字符：`thc`. 这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:21:57.490

`@string.scan(/[@#match]/) do |pattern|`是不正确的。`#{@match}`就是你要找的。

# javascript - 如何在 Bootstrap 的附加组件后显示 jQuery Validate 错误消息？

> ID：10065138
> 
> 赞同：1
> 
> 时间：2012-04-08T18:11:56.923
> 
> 标签：javascript, jquery, css, jquery-validate, twitter-bootstrap

目前它显示在输入字段之后，因此它位于输入字段和.add-on之前，这是不正确的 - 请参阅[演示](http://jsbin.com/ukecog/3)。如何纠正？（另请注意，我使用[自定义的 errorPlacement](http://jsbin.com/ukecog/3/edit#source) - 此功能应保持不变）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:12:23.273

对于在任何引导附加元素后始终打印它的通用解决方案，请使用以下内容：

```
errorPlacement: function(error, element) {
var next = element.next();
if (next.hasClass('add-on'))
  $(error).insertAfter(next);
else
  $(error).insertAfter(element);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:43:01.647

Just change

```
$(error).insertAfter($(element)); 
```

To

```
$(error).insertAfter($(element).parent()); 
```

Or you cannot modify that js code? If so, it'll be necessary to create css hack or just change HTML markup.

# mysql - 如何使我的 MySQL 查询与连接更简洁？

> ID：10065146
> 
> 赞同：2
> 
> 时间：2012-04-08T18:13:19.943
> 
> 标签：mysql, sql

我有一个庞大的 MySQL 查询，它依赖于 JOIN。

```
SELECT m.id, l.name as location, CONCAT(u.firstName, " ", u.lastName) AS matchee, u.email AS mEmail, u.description AS description, m.time AS meetingTime
FROM matches AS m
LEFT JOIN locations AS l ON locationID=l.id 
LEFT JOIN users AS u ON (u.id=m.user1ID)
WHERE m.user2ID=2

UNION

SELECT m.id, l.name as location, CONCAT(u.firstName, " ", u.lastName) AS matchee, u.email AS mEmail, u.description AS description, m.time AS meetingTime
FROM matches AS m
LEFT JOIN locations AS l ON locationID=l.id 
LEFT JOIN users AS u ON (u.id=m.user2ID)
WHERE m.user1ID=2 
```

每个子语句的前 3 行除以 UNION 是相同的。如何遵守 DRY 原则，不重复这三行，让这个查询更简洁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:17:50.713

以这种方式尝试，应该可以工作：

```
SELECT m.id, l.name as location, CONCAT(u.firstName, " ", u.lastName) AS matchee, u.email AS mEmail, u.description AS description, m.time AS meetingTime
FROM matches AS m
LEFT JOIN locations AS l ON locationID=l.id 
LEFT JOIN users AS u 
ON ((u.id=m.user1ID AND m.user2ID=2) OR (u.id=m.user2ID AND  m.user1ID=2))
WHERE (m.user1ID=2 OR m.user2ID=2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T23:09:29.290

```
SELECT
  s.id,
  s.location,
  CONCAT(u.firstName, " ", u.lastName) AS matchee,
  u.email AS mEmail,
  u.description AS description,
  s.meetingTime
FROM (
  SELECT
    m.id,
    l.name AS location,
    m.time AS meetingTime,
    CASE m.user1ID when @userID THEN m.user2ID ELSE m.user1ID END AS userID
  FROM matches AS m
  LEFT JOIN locations AS l ON m.locationID = l.id
  WHERE m.user1ID = @userID OR m.user2ID = @userID
) AS s
LEFT JOIN users AS u ON s.userID = u.id 
```

子查询过滤`matches`指定用户 ID 上的表，将其连接到`locations`，从两个表中提取必要的列并准备单个`userID`列（使用`user1ID`或`user2ID`，取决于两者中的哪一个不是指定的 ID）与 连接`users`。外部查询将内部 SELECT 的结果集连接到`users`并提取作为连接结果获得的其余列。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-08T20:08:24.677

**1）**我看到您正在匹配用户，并且您保留了与该匹配相关的一些信息。

设计起来有点复杂。简单的方法就是使匹配中的数据冗余。通过这种方式，您将始终获得 user1ID=2 的匹配。意味着您需要将每个匹配项存储 2 次，一个是 user1ID 和 user2ID，另一个是 user1ID 和 user2ID 的相反值。但是，正如我所说，这是多余的，如果您期望有很多记录，我不推荐它。

**2）**其他方法是规范您的设计。创建另一个表 matchUser(matchId, userId) *（主键都是 attrs）*

```
SELECT ... FROM matches AS m
LEFT JOIN locations AS l ON locationID=l.id 
LEFT JOIN users AS u ON (u.id=mu2.userId)
INNER JOIN matchUser mu1 ON mu1.userId=2
INNER JOIN matchUser mu2 ON mu2.matchId=mu1.matchId AND mu2.userId != 2 
```

像这样，查询可能是错误的，我没有测试它，但你会明白的。

# ios - 有没有办法在 Interface Builder 中查看 Core Graphics 绘图？

> ID：10065147
> 
> 赞同：1
> 
> 时间：2012-04-08T18:13:19.583
> 
> 标签：ios, user-interface, interface-builder, core-graphics

以编程方式制作 UI 非常强大。但是有没有一种方法我会错过在 IB 中看到例如 CG 图形绘图而无需编译代码？

我想没有，但我更愿意要求在之后提及它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:16:10.917

不，如果不编译代码，IB 怎么知道要画什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T21:08:10.107

这个问题的新答案是：**是**的。

使用 Xcode 6，您可以让 Interface Builder 呈现您的自定义视图。此外，您还可以在可以从 Interface Builder 设置的自定义视图上创建 Interface Builder 可检查的属性，就像内置视图的属性一样。

您需要做的就是`IB_DESIGNABLE`在标题中的类声明上方添加一行。这将使 Interface Builder 通过调用其`drawRect:`方法来呈现您的自定义视图。

如果您还想要可检查的属性，只需添加`IBInspectable`属性声明，例如：`@property IBInspectable float myValue`，您就可以直接从 Interface Builder 设置该属性。

结合这两者，我目前正在设计一个自定义视图，通过更改属性（颜色、笔划宽度等），我可以实时看到效果，这可能正是您所要求的。

来的有点晚，但终于到了。

# c++ - 将size_t转换成long，有什么缺点吗？

> ID：10065150
> 
> 赞同：1
> 
> 时间：2012-04-08T18:13:54.620
> 
> 标签：c++, type-conversion, long-integer, sizeof, size-t

将 size_t 转换为 long 有什么缺点吗？因为，我正在编写一个在文件中维护linked_list 的程序。因此，我根据 size_t 遍历到另一个节点，并且还将列表的总数跟踪为 size_t。因此，显然会有一些 long 和 size_t 的转换或添加。这有什么缺点吗？如果有，那么我会让所有东西都变长而不是 size_t，甚至是尺寸。请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T18:52:07.623

不幸的是，“长”类型没有良好的理论基础。最初它是在 32 位 unix 端口上引入的，以区别于现有 PDP11 软件假定的 16 位“int”。后来“int”在这些平台上更改为 32 位（并引入了“short”），“long”和“int”成为同义词，它们在很长一段时间内都是同义词。

现在，在 64 位类 unix 平台（Linux、BSD、OS X、iOS 以及人们可能仍然关心的任何专有 unix）上，“long”是 64 位数量。但是，遗憾的是，不是在 Windows 上：现有标题中有太多遗留的“代码”使得 sizeof(int)==sizeof(long) 假设，所以他们使用了一个名为“LLP64”的可恶并留下了 32位。叹。

但是“size_t”不是那样的。它总是意味着一件事：它是在地址空间中存储本机指针大小的无符号类型。如果您有一个需要整数表示的无符号指针（！——如果您需要有符号算术，请使用 ssize_t 或 ptrdiff_t）指针（即您需要存储对象的内存大小），这就是您使用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T18:43:43.557

> 将 size_t 转换为 long 有什么缺点吗？

理论上 long 可以小于 size_t。此外，long 已签名。size_t 是无符号的。所以如果你开始在同一个表达式中使用它们，像 g++ 这样的编译器会抱怨它。很多。从理论上讲，由于有符号到无符号的分配，它可能会导致意外错误。

> 显然会有一些转换或添加 long

我不明白为什么应该对 long 进行一些转换或添加。您可以继续使用 size_t 进行所有算术运算。您可以将其键入定义为“ListIndex”或其他任何内容，并在整个代码中继续使用它。如果你混合类型（long 和 size_t），g++/mignw 会唠叨你到死。

或者，您可以选择具有保证尺寸的特定类型。较新的编译器具有 cstdint 标头，其中包括 uint64_t 之类的类型（例如，您极不可能遇到大于 2^64 的文件）。如果你的编译器没有头文件，它应该在 boost.js 中可用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T18:45:49.447

现在这不是问题，但将来可能会出现，具体取决于您将应用程序移植到哪里。这是因为 size_t 被定义为足够大以存储指针的偏移量，因此如果您有一个 64 位指针，则 size_t 也将是 64 位。现在，long 可能是也可能不是 64 位，因为 C/C++ 中基本类型的大小规则为一些变化提供了空间。

但是，如果要将这些值写入文件，则无论如何都必须选择特定的大小，因此除了转换为 long（或 long long，如果需要）之外别无选择。更好的是，使用一种新的特定于大小的类型，如 int32_t。

我的建议：在文件头的某处，存储您将 size_t 转换为的类型的 sizeof。通过这样做，如果将来您决定使用更大的尺寸，您仍然可以支持旧尺寸。并且对于当前版本的程序，您可以检查是否支持大小，如果不支持则发出错误。

# algorithm - 与使用 N rand() 调用相比，获得 N 准随机数的 CPU/时间效率更高？

> ID：10065151
> 
> 赞同：0
> 
> 时间：2012-04-08T18:13:59.060
> 
> 标签：algorithm, random

这是[另一个](https://stackoverflow.com/questions/10064550/generate-n-quasi-random-numbers-in-less-than-on)关于有效获得准随机数的问题的延续。

我需要得到 N 个唯一的准随机数，偏差/分布质量没什么大不了的。与使用 N 次调用 rand() 或 /dev/random 等相比，我可以更高效地获得它们的 CPU/时间效率吗？也许对一些随机数或类似的东西使用一些数学/按位操作。或使用预先计算的表或...

N 可以很大，例如 10000 或 1000000。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:19:30.067

[我在这里](http://en.wikipedia.org/wiki/Random_number_generation#Computational_methods)发现了类似的东西：

```
m_w = <choose-initializer>;    /* must not be zero */
m_z = <choose-initializer>;    /* must not be zero */

uint get_random()
{
    m_z = 36969 * (m_z & 65535) + (m_z >> 16);
    m_w = 18000 * (m_w & 65535) + (m_w >> 16);
    return (m_z << 16) + m_w;  /* 32-bit result */
} 
```

# c# - 双重派送

> ID：10065152
> 
> 赞同：1
> 
> 时间：2012-04-08T18:14:00.973
> 
> 标签：c#, design-patterns, double-dispatch

> **可能重复：**
> [C# 中的双重分派？](https://stackoverflow.com/questions/42587/double-dispatch-in-c)

*有人可以用C#*中的一个简单示例详细解释什么是*Double Dispatch 模式*吗？

 *我知道关于这个主题已经有一些关于 SO 的问题，但我不明白[反射示例](https://stackoverflow.com/questions/42587/double-dispatch-in-c)的意义。我相信还有其他场景可以更容易地解释双重调度。*

# vbscript - 如何使用VBScript将鼠标发送到div

> ID：10065154
> 
> 赞同：0
> 
> 时间：2012-04-08T18:14:07.650
> 
> 标签：vbscript, mouseup

我有简单的 VBScript 来执行下一步操作：

1.  打开浏览器
2.  填写输入（登录名、密码等）

有用于在页面上发送信息的按钮（看起来像）。此按钮的单击事件不起作用，因为它是 GWT 按钮。我想向这个按钮发送 MouseUp 事件。

我怎样才能使用 VBScript 来做到这一点？

```
Function Main
 Set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
 IE.Visible = True
 IE.Navigate "http://example.com"
 With IE.Document
  .getElementByID("login").value = "Login"
  .getElementByID("password").value = "Password"
  'It doesn't work
  .getElementByID("div-button").MouseUp 
 End With
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T00:04:50.500

[可以使用fireEvent](http://msdn.microsoft.com/en-us/library/ie/ms536423%28v=vs.85%29.aspx)方法触发事件。

```
.getElementByID("div-button").fireEvent "onmouseup" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T08:38:36.520

我通过使用解决了我的问题

```
Function Main
 ' ...
 Dim objShell
 Set objShell = CreateObject("WScript.Shell")
 objShell.SendKeys "{TAB}"
 objShell.SendKeys "{TAB}"
 objShell.SendKeys "{ENTER}"
End Function 
```

# php - Kohana 3.1 模块验证码。这个怎么运作？

> ID：10065161
> 
> 赞同：0
> 
> 时间：2012-04-08T18:15:24.993
> 
> 标签：php, kohana

我尝试将验证码（https://github.com/kolanos/kohana-captcha）安装到 Kohana 3.1。模块已安装，但仍然搞砸了，有问题无法找到答案。如果你特别是我无法理解它是如何工作的，这里是代码：

```
/**
    * Returns the img html element or outputs the image to the browser.
    *
    * @param boolean $html Output as HTML
    * @return mixed HTML, string or void
    */
   public function image_render($html)
   {
      // Output html element
      if ($html === TRUE)
         return '<img src="'.url::site('captcha/'.Captcha::$config['group']).'" width="'.Captcha::$config['width'].'" height="'.Captcha::$config['height'].'" alt="Captcha" class="captcha" />';

      // Send the correct HTTP header
        Request::instance()->headers['Content-Type'] = 'image/'.$this->image_type;
        Request::instance()->headers['Cache-Control'] = 'no-store, no-cache, must-revalidate, post-check=0, pre-check=0';
        Request::instance()->headers['Pragma'] = 'no-cache';
        Request::instance()->headers['Connection'] = 'close';

      // Pick the correct output function
      $function = 'image'.$this->image_type;
      $function($this->image);

      // Free up resources
      imagedestroy($this->image);
   } 
```

...这不在这堂课[http://prog-school.ru/forum/go.php?https://github.com/kolanos/kohana-captcha/blob/master/classes/captcha.php](http://prog-school.ru/forum/go.php?https://github.com/kolanos/kohana-captcha/blob/master/classes/captcha.php)

问题：

1.  在变量 $html 中，当您调用此方法时（默认为 config）为 true。因此返回和底层代码不应该被执行，但调试器说相反......它是如何工作的？

2.  稍后在变量 $function 中通过连接“image”和 $thos->image_type（如上所示 =“png”）传递一个字符串。结果是带有函数名称的行，它给出了 png 格式的图像（“imagepng”）。并且以下行使用了晦涩的语法： $function($this->image); 这些线是做什么的？

我希望有人能帮助我了解它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:46:10.777

1.  配置中的任何地方都没有`html`设置值。仅当 $html 为 TRUE 即返回才有效`image_render(TRUE)`。`image_render(1)`如果您调用或`image_render('some string')`由于语句中`===`使用了运算符，它将不会执行。[在这里](http://php.net/manual/en/language.types.boolean.php)`if`查看以了解更多转换为布尔类型的信息。
2.  第一行评估函数名称（例如[imagepng](http://php.net/manual/en/function.imagepng.php)），第二行调用此函数。有关详细信息，请参阅[变量函数。](http://php.net/manual/en/functions.variable-functions.php)

# linux - Linux 文件名和文件通配符

> ID：10065164
> 
> 赞同：4
> 
> 时间：2012-04-08T18:15:35.707
> 
> 标签：linux, filenames, glob

我有一个名为的文件列表：

文件000 文件 001文件
002
文件003 ... 文件1100

如何匹配数字大于 800 但小于 1000 的所有文件？我正在使用 linux bash

谢谢

* * *

## 编辑

实际上，我的文件被命名为：
ab869.enc
cp936.enc
g122345.enc
x2022.enc
abc8859-14.enc
aax5601.enc
cp936-1.enc

所以第一个解决方案不匹配正确的文件:(

如何匹配编号在 800-999 之间的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T18:28:35.990

在 shell 中，试试这个：

```
ls file{801..999} 
```

这将列出以 . 开头`file801`和结尾的文件`file999`。

解释见手册：

*   [http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion](http://www.gnu.org/software/bash/manual/bashref.html#Brace-Expansion)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T17:12:20.563

```
*[89][0-9][0-9].enc 
```

它使用 Bash 的“路径名扩展”功能（又名“globbing”）来匹配所有以 800 到 999 之间的数字结尾并后跟“.enc”的文件。（这不是正则表达式）。

例如，使用上面的表达式，您可以在脚本中执行此操作：

```
mv *[89][0-9][0-9].enc path/to/destination/ 
```

如果您还需要它来匹配名为“cp850-1.enc”的文件，那么您需要将表达式更改为：

```
*[89][0-9][0-9]*.enc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T23:58:24.177

这提供了一个有趣的扩展，但如果没有目录中的原始文件就无法进行测试。

```
echo [a-z,A-Z]*{801..999}[a-z,A-Z]*.enc 
```

两组括号后面都应该有一个星号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T19:27:09.413

任你选。

```
ls | awk -F'[^0-9]*' '800<$2&&$2<1000'  # assuming no filenames start with number

perl -le'/(\d+)/&&800<$1&&$1<1000&&print for<*>' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T00:43:33.257

这接近你想要的：

```
$ ls *{800..999}{,-*}.enc

ab869.enc  abc8859-14.enc  cp936-1.enc  cp936.enc 
```

问题是你接了`abc8859-14.enc`，你不想要。在这种情况下， egrep 将成为你的朋友：

```
$ ls *{800..999}{,-*}.enc | egrep '[^0-9][0-9]{3}(|-.*)\.enc' 
```

如果您想移动或复制文件，您可能希望将此表达式包装在一个`for`循环中（在某些情况下，您可能可以使用 xargs 而不是 for 循环）。

```
 for file in $(ls *{800..999}{,-*}.enc | egrep '[^0-9][0-9]{3}(|-.*)\.enc')
 do
      # copy abc859-14.enc to abc859-14.bak
      basefile=$(basename $file .enc)
      cp $file "$basefile.bak"
 done 
```

# html - 答：悬停不工作

> ID：10065170
> 
> 赞同：7
> 
> 时间：2012-04-08T18:16:09.980
> 
> 标签：html, css, hover

**HTML**

```
 <table width="100%">
<tr>
    <td width="90%"></td>
    <td><a href="#" id="logout"><strong>Logout</strong></a></td>
 </tr>
</table> 
```

**CSS**

```
@charset "utf-8";
/* CSS Document */

#logout {
color:#BBB;
}

a:hover {
color:#FFF;
} 
```

虽然注销的颜色似乎是 css 中给出的颜色，但当我将鼠标放在链接上时颜色不会改变*（变为白色）*。是什么原因 ？

我必须告诉还有其他 css 文件，当鼠标放在它们上面时，它们往往会改变链接的颜色并且它们工作正常。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-08T18:17:57.757

id 选择器 ( `#logout`) 比类型选择器 ( `a`) 加上伪类 ( `:hover`) 更具体，因此您的第一个规则集将始终[赢得级联](http://www.w3.org/TR/CSS21/cascade.html#specificity)。

改为使用`#logout:hover`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T18:29:00.077

**简化：**

您有两个适用于此锚点的 CSS 规则。

两条规则都会改变颜色。

只能适用一条规则；只能选择一种颜色。

浏览器必须在基于 ID ( `#logout`) 的规则和基于元素类型 ( `<a>`) 的规则之间进行选择。

在这种情况下，基于 ID 的规则获胜。指定一个 ID 比指定一个类型（锚点）的所有元素更具体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T22:00:34.013

您必须遵循层次结构顺序：

链接，悬停，访问

例如：

```
a:link
{
text-decoration:none;
color:#008b45;
}

a:hover
{
margin-bottom: 3px solid #ff7400;
    background:white;
}

a:visited
{
color:#ee9a00;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-14T06:08:31.393

给你！只是复制和意大利面

```
#logout{
color:#bbb;
}

#logout :hover{
color: #fff;
}
```

```
 <table width="100%">
<tr>
    <td width="90%"></td>
    <td><a href="#" id="logout"><strong>Logout</strong></a></td>
 </tr>
</table>
```

# jquery - jQuery Isotope - 如何禁用展开的 .item 中的可点击内容？

> ID：10065172
> 
> 赞同：0
> 
> 时间：2012-04-08T18:16:27.617
> 
> 标签：jquery, jquery-isotope

我正在使用 jquery Isotope 创建一个投资组合画廊，几乎一切都按预期工作，我唯一想改变的是打开内容的行为。现在，当您单击照片时，内容框会展开并显示带有一些文本的更大图像，问题是当您再次单击内容框（.item）时，内容会恢复到原始大小，我不想要那是因为一些盒子包含不止一个带有颜色框的图像。

最好的解决方案是在“大”容器上添加一个关闭按钮，而不是使用整个盒子区域，但事实证明这超出了我的处理能力。

这是我用来控制框大小和点击检测的代码：

```
 $(function() {

     var $container = $('#pageWrapper'),
          $items = $('.item');

    $('#filter').find('a').click(function() {
        // get the href attribute
        var filterName = '.' + $(this).attr('href').slice(1);
        filterName = filterName === '.show-all' ? '*' : filterName;
        $container.isotope({
            filter: filterName
        });
        return false;
    });

// change size of clicked element
    $container.find('.item').live('click', function() {
        if ($(this).is('.large')) {
            jQuery('.item-content', this).fadeToggle("fast", "linear");
            jQuery('.thumb', this).fadeToggle("fast", "linear");
            jQuery('h3', this).fadeToggle("fast", "linear");
            $(this).toggleClass('large');
            $container.isotope('reLayout');
        } else {
            jQuery('.large > .item-content');
            jQuery('.large > .thumb');
            jQuery('.large > h3');
            $container.find('.large').removeClass('large');

            jQuery('.item-content', this).fadeToggle("fast", "linear");
            jQuery('.thumb', this).fadeToggle("fast", "linear");
            jQuery('h3', this).fadeToggle("fast", "linear");
            $(this).toggleClass('large');
            $container.isotope('reLayout');

        }
    });

    // switch selected class on buttons
    $('#categories').find('.option-set a').click(function() {
        var $this = $(this);

        // don't proceed if already selected
        if (!$this.hasClass('selected')) {
            $this.parents('.option-set').find('.selected').removeClass('selected');
            $this.addClass('selected');
        }

    });
    // isotope behavior
    $container.isotope({
        itemSelector: '.item',
        masonry: {
            columnWidth: 10
        }, 
```

知道如何在单击时阻止“大”框关闭并添加一个按钮来关闭它而不是整个框吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T01:06:09.437

好吧，我终于完成了这项工作，所以我将分享我对代码所做的更改；可能不是最好的，但它有效。它可能对某人有用，所以你去吧。

这段代码将盒子缩小到原来的大小：

```
if ($(this).is('.large')) {
            jQuery('.item-content', this).fadeToggle("fast", "linear");
            jQuery('.thumb', this).fadeToggle("fast", "linear");
            jQuery('h3', this).fadeToggle("fast", "linear");
            $(this).toggleClass('large');
            $container.isotope('reLayout'); 
```

经过几天的努力，我将此代码更改为以下内容：

```
if ($(this).is('.large')) {
        jQuerycontainer.find('.large').each(function(){
        jQuery(this).toggleClass('large');  }); 
```

现在，一旦 .item 扩展为 .item.large，它不会调整大小，直到您单击另一个 .item，无论您单击大框多少次，它都将保持不变！所以现在我可以将多张图片添加到一个盒子中，然后使用 Lightbox 或 Colorbox 打开它们，而我的同位素 .item.large 不会缩小！:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T22:40:18.227

[我认为这](https://stackoverflow.com/a/11617391/963514)是一个很好的解决方案。基本上，您可以使*每个同位素元素内的***任何 div** 成为可点击的“最大化”或“最小化”元素；比如一个按钮、一个区域、一个图标、一个链接等等。而且，您不必担心会摆弄像 event.stopPropagation() 这样的 jQuery 方法。

# matlab - 如何将 f(x,y) 转换为二维矩阵（即查找表）？

> ID：10065181
> 
> 赞同：4
> 
> 时间：2012-04-08T18:17:11.680
> 
> 标签：matlab, function, matrix, octave, lookup-tables

给定，对于特定范围和域内的任何一个`f = @(x,y) [something with a scalar result]`，我可以计算一个查找矩阵的最佳方法是`A`什么？`A(x,y) == f(x,y)``x,y`

假设一个名为的函数`lookupTable(f,range,domain)`做了我想要的。然后`lookupTable(@(x,y) x * y, 12, 12)`将产生一个包含从`1*1=1`到的乘法表的矩阵`12*12=144`。

或者假设我想要一个除第 3 行第 5 列中的 1 外全为零的 6x6 矩阵。我可以写而不是直接写在那个矩阵中，或者创建一个全零矩阵然后修改它`lookupTable(@(x,y) x==3&&y==5, 6, 6)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:50:13.880

我将使用[MESHGRID](http://www.mathworks.com/help/techdoc/ref/meshgrid.html)的组合来为和生成二维输入网格，`x`并[使用 ARRAYFUN](http://www.mathworks.com/help/techdoc/ref/arrayfun.html)来评估每个网格对的标量函数。对于您的第一个示例，您可以这样做：`y``f`

```
[y, x] = meshgrid(1:12, 1:12);  %# Or just [y, x] = meshgrid(1:12);
lutable = arrayfun(f, x, y); 
```

请注意，我将输入和输出的顺序颠倒到 MESHGRID 以便`x`增加的值沿着生成的查找表的行向下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T18:22:52.840

像这样的东西？

```
function a = lookupTable(func, cols, rows)
    a = zeros(cols, rows);
    for i = 1:cols
        for j=1:rows
            a(i,j) = func(i, j);
        end 
    end
end 
```

用

```
lookupTable(@(x,y) x==3&&y==5, 6, 6) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T20:35:31.443

我已经做了一个功能来做到这一点，你可以使用它。

它适用于任意数量的输入。

```
function varargout = ndfun( fun, varargin )
%%% [A B]=ndfun(@foo,X,Y)
%%% ---> [A(i,j) B(i,j)]=foo(X(i),Y(j))
% Example:
% ndfun(@times,[1 2 3],[ 6 7 8 9])
% ans =
%      6     7     8     9
%     12    14    16    18
%     18    21    24    27
%%% par Oli 03/2012

args=cell(1,nargin-1);
[args{:}]=ndgrid(varargin{:});

varargout=cell(1,max(1,nargout));

[varargout{:}]=arrayfun(fun,args{:});

end 
```

# php - PHP str_replace 错误

> ID：10065182
> 
> 赞同：-1
> 
> 时间：2012-04-08T18:17:19.673
> 
> 标签：php, str-replace

谁能告诉我为什么这段代码不起作用？

`$bodytag = str_replace("id=\"", "id=1\"",`
`"$p = $_GET['p'];`
`echo '<link rel=\"stylesheet\" type=\"text/css\" href=\"styles.php?id=$p\">';`
`");`

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:21:51.843

这是你的意思吗？

```
$p = (int)$_GET['p'];
echo '<link rel="stylesheet" type="text/css" href="styles.php?id='.$p.'">'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:23:32.987

```
$bodytag = str_replace('id="', 'id='.$_GET['p'].'"','style.php?id="');
echo '<link rel="stylesheet" type="text/css" href="'.$bodytag.'">'; 
```

不知道为什么您在回显中转义“，因为您使用 ' 打印链接标签。如果您希望 /” 在您的 url 中而不是“，只需将其添加到代码中

/编辑：对不起，我没有考虑我写的内容。没有看我的东西就看到了错误。但 Ing 的解决方案要好得多。请记住使用 str_replace 的语法。

# mysql - 将 mysql 日期时间字段从 django 1.3 迁移到 django 1.4

> ID：10065190
> 
> 赞同：2
> 
> 时间：2012-04-08T18:18:05.007
> 
> 标签：mysql, django, timezone

在我的`settings.py`我`America/Chicago`用作我的默认`TIME_ZONE`变量。我将很快更新到 django 1.4。作为一个 MySql 用户，我想知道在升级之前是否有什么我需要知道的。

升级到 1.4 的原因当然是 django 1.4 提供的时区支持，这对我目前正在做的事情非常重要。我注意到 MySQL 时间戳对象不是 UTC 格式（我的模型都使用`DateTimeField()`）。

我应该做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:15:03.933

我现在正在处理这个升级，不幸的是没有明确的路径可以遵循。django 1.4 迁移指南指示需要转换数据库中的值，但这在确定性上[是不可能的](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#other-databases)！

因此，您必须转换这些值，但要知道在夏令时转换的某些情况下，转换并不完美。我计划在 django 1.4 中使用新的[make_aware(value, timezone)](https://docs.djangoproject.com/en/dev/ref/utils/#django.utils.timezone.make_aware)函数来转换日期时间值，我将通过在输入日期时间增加一小时后重试转换来处理异常。

以下是[在 python 中将本地时间转换为 UTC 的具体细节和更多示例代码](https://stackoverflow.com/questions/79797/how-do-i-convert-local-time-to-utc-in-python)

# c - 有没有一种简单的方法可以在 Mac 上从 C 源文件制作 .exe 文件？

> ID：10065191
> 
> 赞同：2
> 
> 时间：2012-04-08T18:18:08.093
> 
> 标签：c, windows, macos, exe

我在我的 Mac 上编写了一个国际象棋引擎，并试图在我更强大的 Windows 机器上运行它。我需要使用 WinBoard 运行它，因此这涉及从 CMD 运行东西并将引擎文件（应该是 .exe）连接到引擎。我遇到的问题是，我的 Windows 机器似乎没有命令行 c 编译器，使用 IDE（我从不这样做）非常麻烦，因为它们需要您通过向导来创建每个25 个左右的源文件，然后他们制作 .o 文件，而不是 .exe 文件。我的问题是，让我的 .c 源文件在我的 mac 上与我的电脑上的 WinBoard 一起运行的最简单方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:21:16.353

安装[MinGW](http://www.mingw.org/)（Windows 的 GCC 端口），您将获得一个命令行 C 编译器。请注意，您很可能需要调整您的代码，因为 Windows 与 POSIX 的兼容性很差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:28:12.080

[equation.com](http://equation.com/)有一个很好的打包 gcc 编译器和 MinGW 工具。

或者你也可以试试[Tiny C Compiler](http://bellard.org/tcc/)。

另外，我认为微软编译器可以在没有项目文件的情况下从命令行使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:04:43.533

Windows 的本机 C（和 C++）编译器当然是 Microsoft 编译器。您可以在这里获得免费的 Express Edition：

[Visual C++ 2010 速成版](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express)

即使它包含一个“麻烦的 IDE”，您也可以创建一个空项目并添加所有现有的源文件。向导只需运行一次...

# c++ - 静态类成员获得“未定义的引用”。不知道为什么

> ID：10065194
> 
> 赞同：3
> 
> 时间：2012-04-08T18:18:42.540
> 
> 标签：c++, static, class-members

我不知道这段代码有什么问题。我有以下非常简单的课程：

```
class SetOfCuts{
public:

  static LeptonCuts   Leptons;
  static ElectronCuts TightElectrons;
  static ElectronCuts LooseElectrons;
  //***
  //more code
}; 
```

例如，ElectronCuts 类型之前在同一个 .h 文件中定义为：

```
struct ElectronCuts{
  bool Examine;
  //****
  //other irrelevant stuff
}; 
```

没什么太复杂的，我想。

我的理解是，在主程序中，我可以这样做：

```
SetOfCuts::LooseElectrons.Examine = true; 
```

但如果我这样做，我会得到：

```
 undefined reference to `SetOfCuts::LooseElectrons' 
```

相反，如果我这样做：

```
 bool SetOfCuts::LooseElectrons.Examine = true; 
```

我得到：

```
error: expected initializer before '.' token 
```

我不知道为什么我不能访问结构的成员。我遗漏了一些关于静态数据成员的明显内容，但我不知道它是什么。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:22:46.087

任何静态引用也必须在特定的源文件中声明（不仅在头文件中），因为在链接完成时它必须存在于某个地方。

例如，如果你有这个`Foo.h`

```
class SetOfCuts{
public:

  static LeptonCuts   Leptons;
  static ElectronCuts TightElectrons;
  static ElectronCuts LooseElectrons;
}; 
```

然后在`Foo.cpp`你会有

```
#include <Foo.h>
LeptonCuts SetOfCuts::Leptons = whatever;
ElectronCuts SetOfCuts::ThighElectrons = whatever;
.. 
```

最后在你的 main.cpp 你将能够做到

```
#include <Foo.h>
SetOfCuts::Leptons = whatever; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T18:22:38.260

您收到的“未定义引用”错误是链接器错误，表示您已*声明*静态数据成员，但实际上并未在任何地方*定义*它们。在 C++ 中，使用静态变量有两个步骤 - 您首先在类中指定它，就像您所做的那样，然后必须在某处实际放置它的定义。这类似于您在头文件中定义函数的方式——您在头文件中对函数进行原型设计，然后在源文件中提供实现。

在您的情况下，在您为 实现成员函数的源文件中`SetOfCuts`，添加以下行：

```
LeptonCuts SetOfCuts::Leptons;
ElectronCuts SetOfCuts::TightElectrons;
ElectronCuts SetOfCuts:LooseElectrons; 
```

这告诉 C++ 在哪个翻译单元中实际定义了静态成员。如果您愿意，也可以在此处指定构造函数参数。请注意，您不要*在*此处重复`static`关键字。

希望这可以帮助！

# r - 如何在 geom_smooth 之后而不是 geom_line 之后显示直接标签？

> ID：10065196
> 
> 赞同：8
> 
> 时间：2012-04-08T18:19:03.720
> 
> 标签：r, ggplot2, direct-labels

我正在使用直接标签来注释我的情节。正如您在这张图片中看到的，标签在 geom_line 之后，但我希望它们在 geom_smooth 之后。这受直接标签支持吗？或任何其他想法如何实现这一目标？提前致谢！

[![在此处输入图像描述](../Images/cacb8c0ff7fe2a4dc757492a3086a14a.png)](https://i.stack.imgur.com/2vZmk.png)

这是我的代码：

```
library(ggplot2)
library(directlabels)

set.seed(124234345)

# Generate data
df.2 <- data.frame("n_gram" = c("word1"),
                   "year" = rep(100:199),
                   "match_count" = runif(100 ,min = 1000 , max = 2000))

df.2 <- rbind(df.2, data.frame("n_gram" = c("word2"),
                      "year" = rep(100:199),
                      "match_count" = runif(100 ,min = 1000 , max = 2000)) )

# plot
ggplot(df.2, aes(year, match_count, group=n_gram, color=n_gram)) +
  geom_line(alpha = I(7/10), color="grey", show_guide=F) +
  stat_smooth(size=2, span=0.3, se=F, show_guide=F) +
  geom_dl(aes(label=n_gram), method = "last.bumpup", show_guide=F) +
  xlim(c(100,220)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-04-22T10:14:00.040

这个答案采用了@celt-Ail 答案的基本概念，而不是函数、基础 R 和直接标签，而是尝试了一种 tidyverse 方法，从[这里](https://stackoverflow.com/a/55127487/4927395)为多个`loess`模型窃取了一些代码。

很高兴听到建议的改进。

```
set.seed(124234345)

# Generate data
df.2 <- data.frame("n_gram" = c("word1"),
                   "year" = rep(100:199),
                   "match_count" = runif(100 ,min = 1000 , max = 2000))

df.2 <- rbind(df.2, data.frame("n_gram" = c("word2"),
                               "year" = rep(100:199),
                               "match_count" = runif(100 ,min = 1000 , max = 2000)) )

#example of loess for multiple models
#https://stackoverflow.com/a/55127487/4927395
library(dplyr)
library(tidyr)
library(purrr)
library(ggplot2)

models <- df.2 %>%
  tidyr::nest(-n_gram) %>%
  dplyr::mutate(
    # Perform loess calculation on each CpG group
    m = purrr::map(data, loess,
                   formula = match_count ~ year, span = .3),
    # Retrieve the fitted values from each model
    fitted = purrr::map(m, `[[`, "fitted")
  )

# Apply fitted y's as a new column
results <- models %>%
  dplyr::select(-m) %>%
  tidyr::unnest()

#find final x values for each group
my_last_points <- results %>% group_by(n_gram) %>% summarise(year = max(year, na.rm=TRUE))

#Join dataframe of predictions to group labels
my_last_points$pred_y <- left_join(my_last_points, results)

# Plot with loess line for each group
ggplot(results, aes(x = year, y = match_count, group = n_gram, colour = n_gram)) +
  geom_line(alpha = I(7/10), color="grey", show.legend=F) +
  #stat_smooth(size=2, span=0.3, se=F, show_guide=F)
  geom_point() +
  geom_line(aes(y = fitted))+  
  geom_text(data = my_last_points, aes(x=year+5, y=pred_y$fitted, label = n_gram)) 
```

[![直接标签](../Images/010b5670649ceecb96ed8acd61d9e8e1.png)](https://i.stack.imgur.com/HGQM4.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T05:20:57.793

```
# use stat smooth with geom_dl to get matching direct labels.
span <- 0.3
ggplot(df.2, aes(year, match_count, group=n_gram, color=n_gram)) +
  geom_line(alpha = I(7/10), color="grey") +
  stat_smooth(size=2, span=span, se=F) +
  geom_dl(aes(label=n_gram), method = "last.qp", stat="smooth", span=span) +
  xlim(c(100,220))+
  guides(colour="none") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:01:45.253

这不是您要求的，因为我不知道该怎么做，但这可能对您更有用，因为您将减少标签的绘图区域：

```
PLOT <- ggplot(df.2, aes(year, match_count, group=n_gram, color=n_gram)) +
  geom_line(alpha = I(7/10), color="grey", show_guide=F) +
  stat_smooth(size=2, span=0.3, se=F, show_guide=F) 

mymethod <- list(
    "top.points", 
    dl.move("word1", hjust=-6.65, vjust=13),
    dl.move("word2", hjust =-7.9, vjust=20.25)
)

direct.label(PLOT, mymethod) 
```

产生：

![在此处输入图像描述](../Images/09c836a544095a61f6c906cb9853cf6b.png)

你也可以试试：

```
mymethod <- list(
    "top.points", 
    dl.move("word1", hjust=-6, vjust=14),
    dl.move("word2", hjust =-7.1, vjust=19.5)
)

ggplot(df.2, aes(year, match_count, group=n_gram, color=n_gram)) +
  geom_line(alpha = I(7/10), color="grey", show_guide=F) +
  xlim(c(100,220))+
  stat_smooth(size=2, span=0.3, se=F, show_guide=F) +
  geom_dl(aes(label=n_gram), method = mymethod, show_guide=F) 
```

产生：

![在此处输入图像描述](../Images/9b0076d859d113bb7b9b49f70c492e4a.png)

注意：要打印到其他图形设备（这是 windows rgui），您需要调整 vjust 和 hjust 以适应。但是如果有更直接的方法会更好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-09T06:46:21.200

我将在这里回答我自己的问题，因为我通过 Tyler Rinker 的回复弄明白了。

这就是我使用 loess() 来获取标签位置的方法。

```
 # Function to get last Y-value from loess
funcDlMove <- function (n_gram) {

  model <- loess(match_count ~ year, df.2[df.2$n_gram==n_gram,], span=0.3)
  Y <- model$fitted[length(model$fitted)]
  Y <- dl.move(n_gram, y=Y,x=200)
  return(Y)
}

index <- unique(df.2$n_gram)
mymethod <- list(
  "top.points", 
  lapply(index, funcDlMove)
  )

# Plot

PLOT <- ggplot(df.2, aes(year, match_count, group=n_gram, color=n_gram)) +
  geom_line(alpha = I(7/10), color="grey", show_guide=F) +
  stat_smooth(size=2, span=0.3, se=F, show_guide=F)

direct.label(PLOT, mymethod) 
```

这将产生这个情节：http: [//i.stack.imgur.com/FGK1w.png](http://i.stack.imgur.com/FGK1w.png)

# javascript - jQuery 暂停执行，直到一个事件被分派

> ID：10065200
> 
> 赞同：2
> 
> 时间：2012-04-08T18:19:35.253
> 
> 标签：javascript, jquery, events

好的，所以我试图实现类似控制台的行为，我需要暂停执行，直到调度某个事件，我真正需要的是：

```
var evt = $("element").waitForKeyDown(); 
```

这个假设的函数应该暂停执行，直到用户按下“元素”元素上的一个键，该元素被认为是一个文本字段。然后，当用户按下该文本字段上的任何键时，应继续执行，并且 evt 应包含与该事件相关的信息。

这可以在javascript中实现吗？或类似的亲密行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T18:30:14.320

你永远不想在 JavaScript 中等待——只有一个线程，你需要它来处理可能进入页面其他部分的其他事件。

相反，您想要做的是将在您想要等待的那一点之后应该发生的所有事情都打包成一个`function(){}`. （这个函数被称为“延续”，你会在 JavaScript 和其他高度异步的环境中到处遇到这种模式。）

从那里，您将使用以下 jQuery 注册新函数：

```
var evt = $("element").keydown(function(event){
   var keypressed = event.keyCode;

   // do whatever you'd like with the keypress.
}); 
```

您可以考虑使用[keypress](http://api.jquery.com/keypress/)而不是 keydown，但是 keypress（几乎是自相矛盾的）不会让您获得所有的按键，只是那些变成某种文本输入的按键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:23:23.623

恐怕javascript中没有阻止操作，除了警报和提示。这样做的唯一方法是（虽然可能是错误的）：

```
var evt = $("element").on("click",function(){
  //Continue here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:31:29.640

Use jQuery .keyDown [http://api.jquery.com/keydown/](http://api.jquery.com/keydown/)

```
var evt = $("element").keyDown(function(){
  //Rest of your code
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T18:29:39.130

只需使用 keydown 事件。它完全符合您的要求：仅在按下某个键时才执行操作。

# android - 在Android中添加图像时获取NullPointer

> ID：10065209
> 
> 赞同：0
> 
> 时间：2012-04-08T18:21:59.860
> 
> 标签：android, nullpointerexception, android-imageview

我正在尝试将我的图像设置在我的动画中某个点的视图中。但是我得到一个空指针异常。我知道我犯了一个新手错误，但我不知道我应该做什么......当我设置我的图像 onStart() 它工作正常......但是当我在 onAnimationEnd 中设置图像时，我得到了空指针。 ..请帮忙！

```
public class PhotoSyncActivity extends Activity implements AnimationListener {

private Bitmap[] images;
private AnimationPhotoViewA apa1;
private AnimationPhotoViewB apa2;
private static final int move1 = 1;
private static final int move2 = 2;
private static final int move3 = 3;
private static final int move4 = 4;
private static final int move5 = 5;
private int animationmove = 0;
ArrayList<String> photoPaths;
Bitmap resizedimage2= null;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.photo_sync_screen);
    ArrayList<String> photoPaths = new ArrayList<String>();
    photoPaths = getAllPhotos(Environment.getExternalStorageDirectory(),
            photoPaths);
    images = new Bitmap[photoPaths.size()];
    Log.v(ACCESSIBILITY_SERVICE, "photo array!" + photoPaths);

    apa1 = (AnimationPhotoViewA) findViewById(R.id.animation_viewA);
    apa2 = (AnimationPhotoViewB) findViewById(R.id.animation_viewB);
    animationmove = PhotoAnimationProcess.moveOne(this,apa1,animationmove);

    File imgFile1 = new File(photoPaths.get(0));

    File imgFile2 = new File(photoPaths.get(1));

    if (imgFile1.exists() && imgFile2.exists())
    {
        images[0] = decodeFile(imgFile1);
        images[1] = decodeFile(imgFile2);
    }
}

@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();

    // RESIZE THE IMAGE TO A STANDARD SIZE
    Bitmap resizedimage1 = setPictureSize(images[0]);
    resizedimage2 = setPictureSize(images[1]);

    // SET IMAGE IN THE VIEW

    apa1.setImageBitmap(resizedimage1);
    apa2.setImageBitmap(resizedimage2);//HERE THE CODE WORKS WITH NO PROBLEM!!

private ArrayList<String> getAllPhotos(File dir,ArrayList<String> photoPaths)
        {
    File[] files = dir.listFiles();
    if (files != null)
    {
        for (File f : files) 
        {
            if (f != null)
            {
                if (f.isDirectory())
                {
                    getAllPhotos(f, photoPaths);
                } else
                {
                    String filePath = f.getAbsolutePath();
                    if (filePath.matches(".*\\.(jpeg|jpg)$"))
                    {
                        photoPaths.add(filePath);
                    }
                }
            }
        }
    }
    return photoPaths;
}

public void onAnimationStart(Animation animation)
{
    // TODO Auto-generated method stub

}

public void onAnimationEnd(Animation animation)
{
    // TODO Auto-generated method stub

    switch (animationmove) 
    {
    case move1:
        animationmove = PhotoAnimationProcess.moveOne(this, apa1, animationmove);
        break;
    case move2:

        //HERE I AM GETTING THE NULL POINTER WHEN SETTING IMAGEapa2.setImageBitmap(resizedimage2);
        animationmove = PhotoAnimationProcess.moveTwo(this,apa1,animationmove);

        break;
    case move3:
        animationmove = PhotoAnimationProcess.moveThree(this,apa1,animationmove);
        break;
    case move4:
        animationmove = PhotoAnimationProcess.moveFour(this,apa1,animationmove);;
        break;
    case move5:
        animationmove = PhotoAnimationProcess.moveFive(this,apa1,animationmove);
        break;

    default:
        break;
    }

    Log.v(ALARM_SERVICE, "Animation Type" + animation.toString());

}

public void onAnimationRepeat(Animation animation) {
    // TODO Auto-generated method stub

}

// Downgrade the photos
private Bitmap decodeFile(File f)
{
    Bitmap ret = null;
    try 
    {
        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // The new size we want to scale to
        final int REQUIRED_SIZE = 70;

        // Find the correct scale value. It should be the power of 2.
        int scale = 1;
        while (o.outWidth / scale / 2 >= REQUIRED_SIZE
                && o.outHeight / scale / 2 >= REQUIRED_SIZE)
            scale *= 2;

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        ret = BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    }
    catch (FileNotFoundException e)
    {
        e.printStackTrace();

    }
    return ret;

}

private Bitmap setPictureSize(Bitmap bitmapOrg)
{

    int width = bitmapOrg.getWidth();

    int height = bitmapOrg.getHeight();

    int newWidth = 250;

    int newHeight = 250;

    // calculate the scale - in this case = 0.4f

    float scaleWidth = ((float) newWidth) / width;

    float scaleHeight = ((float) newHeight) / height;

    Matrix matrix = new Matrix();

    matrix.postScale(scaleWidth, scaleHeight);
    // matrix.postRotate(x);
    // this will create image with new size
    Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0, width,
            height, matrix, true);
    return resizedBitmap;
}

} 
```

错误：

```
04-08 21:27:14.764: E/AndroidRuntime(1654): FATAL EXCEPTION: main
04-08 21:27:14.764: E/AndroidRuntime(1654): java.lang.NullPointerException
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.graphics.Canvas.throwIfRecycled(Canvas.java:972)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.graphics.Canvas.drawBitmap(Canvas.java:998)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at com.uiu.registrationwizard.activities.AnimationPhotoViewB.drawPicture(AnimationPhotoViewB.java:79)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at com.uiu.registrationwizard.activities.AnimationPhotoViewB.onDraw(AnimationPhotoViewB.java:67)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.View.draw(View.java:7014)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewGroup.drawChild(ViewGroup.java:1732)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.View.draw(View.java:7017)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewGroup.drawChild(ViewGroup.java:1732)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.View.draw(View.java:7017)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewGroup.drawChild(ViewGroup.java:1732)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1459)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.View.draw(View.java:7017)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2054)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewRoot.draw(ViewRoot.java:1632)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1335)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1991)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.os.Looper.loop(Looper.java:150)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at android.app.ActivityThread.main(ActivityThread.java:4385)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at java.lang.reflect.Method.invoke(Method.java:507)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
04-08 21:27:14.764: E/AndroidRuntime(1654):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:53:52.547

从外观上看，`resizedImage2`当您在 onAnimationEnd 中设置它时为 null（注意：**使用调试器验证这一点！**）。重要的是要意识到*Android 可能会随时终止您的活动*。`onCreate`活动在收到 onAnimationEnd 后重新创建（即被调用），但不可见（因此 no `onStart`）。这意味着该`resizedImage2`活动的 未初始化，并且仍然为空。

`resizedImage2`简单的解决方案是改为初始化`onCreate`。

另一种解决方案是存储`resizedImage2`在[onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)中，并在`onCreate`存在捆绑包时将其恢复。

# php - php中的猴子补丁

> ID：10065210
> 
> 赞同：9
> 
> 时间：2012-04-08T18:22:14.283
> 
> 标签：php, monkeypatching

我试图弄清楚猴子补丁是如何工作的，以及如何让它在我自己的对象/方法上工作。

我一直在看这个库，它完全符合我自己想做的事情： [https ://github.com/antecedent/patchwork](https://github.com/antecedent/patchwork)

使用它，您可以从对象重新定义方法。它为此使用了“猴子补丁”技术。但是通过查看源代码，我无法真正弄清楚到底发生了什么。

所以假设我有以下对象：

```
//file: MyClass.php
namespace MyClass;

class MyClass {

    public function say()
    {
        echo 'Hi';
    }
} 
```

我想做这样的事情：

```
Monkeypatch\replace('MyClass', 'say', function() {
    echo 'Hello';
});

$obj = new MyClass();
$obj->say();  // Prints: 'Hello' 
```

但我不确定如何编写实际的修补部分。我知道在这种情况下命名空间很重要。但这究竟是如何让我修补某种方法的呢？我是否需要在某处使用 eval() （如果需要，如何）？

除了： [http ://till.klampaeckel.de/blog/archives/105-Monkey-patching-in-PHP.html](http://till.klampaeckel.de/blog/archives/105-Monkey-patching-in-PHP.html)

但我真的不知道如何将其应用于我自己的对象/方法。我希望有一个很好的解释或例子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:35:48.637

您可以使用[runkit](http://ca.php.net/runkit)进行运行时类修改。更具体地说，您可以使用[runkit_method_redefine](http://ca.php.net/manual/en/function.runkit-method-redefine.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T18:41:13.103

在[http://till.klampaeckel.de/blog/archives/105-Monkey-patching-in-PHP.html](http://till.klampaeckel.de/blog/archives/105-Monkey-patching-in-PHP.html)的情况下，真正不同的是第二个 strlen 前面使用的**\字符。**

当您使用命名空间时，您可以使用命名**`use`**空间并直接调用命名空间中声明的方法/类：

```
use TheNamespace;
$var = new TheClass(); 
```

或者使用类似的方法显式调用该类：

`$var = new \TheNamespace\TheClass();`

因此，通过调用`\strlen()`而不是`strlen()`您明确请求 PHP 使用默认 strlen 而不是为此命名空间定义的 strlen。

至于猴子补丁，您可以使用 runkit ( [http://ca.php.net/runkit](http://ca.php.net/runkit) )。[此外，关于拼凑，他们的网站（ http://antecedent.github.com/patchwork/docs/examples.html](http://antecedent.github.com/patchwork/docs/examples.html)）中有大量示例。您可以检查正在替换类中的函数的魔术方法示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-23T19:13:30.370

从 PHP 5.6 开始，仍然不支持猴子补丁；然而 PHP 5.3 引入了匿名函数。这个答案并不完全是您正在寻找的，并且可能会有所改进，但总体思路是使用数组、[匿名函数](http://php.net/manual/en/functions.anonymous.php)和[引用](http://php.net/manual/en/language.references.whatdo.php)来创建一个自包含、自引用的数组（一个“对象”，如果你会）：

**测试.php**

```
$inner = require('test2.php');
$inner['say'](); // Hi!

$inner['data']['say'] = 'Bye!';
$inner['say'](); // still says Hi!

$inner['set_say']('Bye!');
$inner['say'](); // Bye!

$inner = require('test2.php');
$inner['say'](); // Hi! 
```

**test2.php**

```
$class = array(
    'data' => array(
        'say' => 'Hi!'
    ),

    'say' => function() use (&$class){
        echo $class['data']['say'].'<br />';
    },

    'set_say' => function($msg) use (&$class){
        $class['data']['say'] =& $msg; 
    }
);

return $class; 
```

此外，**这里有一个免责声明**，上面的代码（以及 PHP 中的猴子补丁）几乎总是一个糟糕的想法，但有时这是绝对必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T23:33:29.450

我使用 eval() 和命名空间对一个类进行了猴子修补。但是，这可能不是您的答案，因为如果您正在猴子修补的类已经在命名空间中，这将不起作用。除了从 eval 字符串中修剪命名空间声明之外，我还没有想出如何解决这个问题。但是，这样做可能会破坏类方法中任何依赖于命名空间的代码。

就我而言，我正在对核心 PDO 类进行猴子修补，以对依赖于数据库交互的类进行单元测试。但是，也许看到我的技术会帮助你弄清楚如何让它适合你的情况。

我在这里的博客文章中有代码片段：http: [//chrisgriffing.com/coding/php/2012/04/12/how-to-mock-pdo-and-other-objects/](http://chrisgriffing.com/coding/php/2012/04/12/how-to-mock-pdo-and-other-objects/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-04-08T20:55:05.047

您可能已经想通了，但是，仅供参考，他们使用的是流包装器，

[http://php.net/manual/es/function.stream-wrapper-register.php](http://php.net/manual/es/function.stream-wrapper-register.php)

basically, they register an stream wrapper on file and phar, so when the code is loaded, thay can manipulate it, it doesnt work on code loaded from an opcache

# javascript - Javascript - “这个”是空的

> ID：10065212
> 
> 赞同：1
> 
> 时间：2012-04-08T18:22:29.010
> 
> 标签：javascript, object, scope

我正在尝试使用 Node.js 为我的 Web 应用程序编写服务器端。提取以下代码来模拟这种情况。问题是应用程序在尝试访问 actionExecuted “方法”中的 this.actions.length 时崩溃。属性 this.actions 在那里未定义（this == {} 在范围内），即使它是在“构造函数”（请求函数本身）中定义的。如何使其他“方法”也可以访问操作属性？

```
var occ = {
    exampleAction: function(args, cl, cb)
    {
        // ...

        cb('exampleAction', ['some', 'results']);
    },

    respond: function()
    {
        console.log('Successfully handled actions.');
    }
};

Request = function(cl, acts)
{
    this.client = cl;
    this.actions = [];
    this.responses = [];

    // distribute actions
    for (var i in acts)
    {
        if (acts[i][1].error == undefined)
        {
            this.actions.push(acts[i]);
            occ[acts[i][0]](acts[i][1], this.client, this.actionExecuted);
        }
        else
            // such an action already containing error is already handled,
            // so let's pass it directly to the responses
            this.responses.push(acts[i]);
    }
}

Request.prototype.checkExecutionStatus = function()
{
    // if all actions are handled, send data to the client
    if (this.actions == [])
        occ.respond(client, data, stat, this);
};

Request.prototype.actionExecuted = function(action, results)
{
    // remove action from this.actions
    for (var i = 0; i < this.actions.length; ++i)
        if (this.actions[i][0] == action)
            this.actions.splice(i, 1);

    // and move it to responses
    this.responses.push([action, results]);
    this.checkExecutionStatus();
};

occ.Request = Request;

new occ.Request({}, [['exampleAction', []]]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:34:39.427

问题是您定义回调的方式。它稍后被调用，因此它失去了上下文。您必须创建一个闭包或正确绑定`this`. 创建闭包：

```
var self = this;
occ[acts[i][0]](acts[i][1], this.client, function() { self.actionExecuted(); }); 
```

绑定到`this`：

```
occ[acts[i][0]](acts[i][1], this.client, this.actionExecuted.bind(this)); 
```

任何一个都应该工作。

# javascript - jquery：秒表

> ID：10065222
> 
> 赞同：3
> 
> 时间：2012-04-08T18:23:19.920
> 
> 标签：javascript, jquery

我正在使用`stopwatch`我在这里找到的代码：http: [//www.kellishaver.com/projects/stopwatch/](http://www.kellishaver.com/projects/stopwatch/)

```
(function($) {
    $.fn.stopwatch = function() {
        var clock = this;
        var timer = 0;

        clock.addClass('stopwatch');

        //console.log(clock);

        // This is bit messy, but IE is a crybaby and must be coddled. 
        clock.html('<div class="display"><span class="hr">00</span>:<span class="min">00</span>:<span class="sec">00</span></div>');
        clock.append('<input type="button" class="start" value="Start" />');
        clock.append('<input type="button" class="stop" value="Stop" />');
        clock.append('<input type="button" class="reset" value="Reset" />');

        //console.log(clock.html());

        // We have to do some searching, so we'll do it here, so we only have to do it once.
        var h = clock.find('.hr');
        var m = clock.find('.min');
        var s = clock.find('.sec');
        var start = clock.find('.start');
        var stop = clock.find('.stop');
        var reset = clock.find('.reset');

        stop.hide();

        start.bind('click', function() {
            timer = setInterval(do_time, 1000);
            stop.show();
            start.hide();
        });

        stop.bind('click', function() {
            clearInterval(timer);
            timer = 0;
            start.show();
            stop.hide();
        });

        reset.bind('click', function() {
            clearInterval(timer);
            timer = 0;
            h.html("00");
            m.html("00");
            s.html("00");
            stop.hide();
            start.show();
        });

        function do_time() {
            // parseInt() doesn't work here...
            hour = parseFloat(h.text());
            minute = parseFloat(m.text());
            second = parseFloat(s.text());

            second++;

            if(second > 59) {
                second = 0;
                minute = minute + 1;
            }
            if(minute > 59) {
                minute = 0;
                hour = hour + 1;
            }

            h.html("0".substring(hour >= 10) + hour);
            m.html("0".substring(minute >= 10) + minute);
            s.html("0".substring(second >= 10) + second);
        }
    };
})(jQuery); 
```

我像这样使用它：

```
<script type="text/javascript">
    $('#clock1').stopwatch();
</script> 
```

它工作正常，我可以使用停止按钮停止它。但是我希望能够使用 javascript 以编程方式停止它。像这样的东西：

```
<script type="text/javascript">
    $('#clock1').stop();
</script> 
```

我创建了函数`stop`，但无法访问. 我该怎么做？`timer``stopwatch()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T18:25:06.383

怎么样：

```
$('#clock1').find('.stop').trigger('click'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T18:43:43.317

您可以在代码中添加一个小 API 并使用以下方法附加它`$.data`：

```
var api = {
    stop: function() {
        stop.click(); // this should probably be improved, but you get the idea
    }
 };
 $(clock).data('stopwatch', api); 
```

然后使用：

```
$('#clock1').data('stopwatch').stop(); 
```

您还可以使用相同的逻辑将`reset`和函数添加到 API。`start`这里的一件好事是，您可以稍后在茶歇时改进执行代码，而无需更改外部程序使用 API 的方式。

# wordpress - wordpress中一个菜单项的两个链接？

> ID：10065223
> 
> 赞同：0
> 
> 时间：2012-04-08T18:23:21.720
> 
> 标签：wordpress, menu, hyperlink, menuitem

我正在为客户制作一个网站，他们想要一个导航项，其中包含两个链接到两个不同位置的单词。该项目是右边的最后一个，“twitter/facebook”。有任何想法吗？ [http://pixinkdesign.com/clients1/TedX/](http://pixinkdesign.com/clients1/TedX/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:30:49.373

您可以根据需要简单地将链接添加到您的模板和样式。无论如何，它们不是您网站的页面，因此模板中的简单链接就足够了。

登录到您的管理面板并转到：

```
Appearance > Editor 
```

并打开`Header.php`文件。

你会看到类似的东西：

```
<ul id="menu">
  <?php wp_list_pages('title_li='); ?>
</ul> 
```

您可以根据需要简单地添加：

```
<ul id="menu">
  <?php wp_list_pages('title_li='); ?>
  <li>
      <a href="http://twitter.com">Twitter</a>
      <a href="http://facebook.com">Facebook</a>
  </li>
</ul> 
```

# c++ - 结构中的 std::list 导致内存违规错误

> ID：10065226
> 
> 赞同：0
> 
> 时间：2012-04-08T18:23:26.803
> 
> 标签：c++, list, struct, std

我正在尝试在这样的结构中使用列表：

```
typedef struct _MS
{
    DWORD id;
    std::list<std::wstring> titles;
} MS; 
```

但是当我尝试使用它时遇到了一些问题。

当我在运行时'titles = 0xcdcdcdcd'的调试器下查看它时，当我尝试调用`_iterator = MS.titles.begin()`它时，它会因内存访问冲突而失败。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:29:35.397

MS 编译器使用该值`0xcdcdcdcd`来标记已删除的内存。

您的问题可能不在于`std::list`，而在于使用指向已删除对象的指针。

# linux - 从输出中删除 ./

> ID：10065230
> 
> 赞同：1
> 
> 时间：2012-04-08T18:23:35.717
> 
> 标签：linux, bash

我有一个将数据输出到 txt 文件的代码，但我想从每个文件名的输出中删除 ./

代码如下

```
#!/bin/bash

# fill with more extensions or have it as a cmd line arg
TYPES=( mov mp4 avi mp3 wma)

DIR=$1

# Create a regex of the extensions for the find command
echo "Available Media Files in Directory"

TYPES_RE="\\("${TYPES[1]}
for t in "${TYPES[@]:1:${#TYPES[*]}}"; do
    TYPES_RE="${TYPES_RE}\\|${t}"
done
TYPES_RE="${TYPES_RE}\\)"

# Set the field seperator to newline instead of space
SAVEIFS=$IFS
IFS=$(echo -en "\n\b")

# Generate output from path and size using: `stat -c "%s" filepath`
OUTPUT=""

for f in `find ${DIR} -type f -regex ".*\.${TYPES_RE}"`; do

OUTPUT=`echo ${f}`";"$OUTPUT

done

# Reset IFS
IFS=$SAVEIFS

# Reverse numeric sort the output and replace ; with \n for printing
echo $OUTPUT  | tr ';' '\n' | sed 's/.*/"&"/' | sort -nr >playlist.txt 
```

结果是：

```
"./You Da One.mp3"
"./Wiz Khalifa Roll Up.mp4"
"./Vybz Kartel neva get a gal.mp3"
"./Tyga Rack City.mp4"
"./Tyga Lap Dance.mp4"
"./Travis Porter Make It Rain.mp4"
"./Travis Porter ft. Tyga Ayy Ladies.mp4"
"./Snoop Dogg feat. Wiz Khalifa Bruno Mars Young Wild & Free.mp4"
"./Shot Caller.mp3"
"./Chris Brown - Your Body.mp4"
"./Chris Brown Turn Up The Music.mp4" 
```

需要从每个文件中删除 ./

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:25:48.260

您可以使用 basename 命令去除目录文件名，在您的脚本中，使用它的一个好方法可能是在 find 命令中，即

```
 find ${DIR} -type f -regex ".*\.${TYPES_RE}" -exec basename '{}' \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:34:06.133

change

```
echo $OUTPUT  | tr ';' '\n' | sed 's/.*/"&"/' | sort -nr >playlist.txt 
```

to

```
echo $OUTPUT  | tr ';' '\n' | sed 's/^\.\///gi' | sed 's/.*/"&"/' | sort -nr >playlist.txt 
```

# scala - 在相同的代码块上减少和折叠的奇怪行为

> ID：10065233
> 
> 赞同：0
> 
> 时间：2012-04-08T18:24:02.517
> 
> 标签：scala, conditional, ternary

**编辑**
好的，@dhg 发现如果 fold() 的代码块未绑定到 val 则需要点方法语法（为什么在同一个代码块中使用 reduce() 可以使用空格方法语法，我不知道）。无论如何，最终结果是非常简洁的：

```
result.map { row =>
  addLink( row.href, row.label )
}.fold(NodeSeq.Empty)(_++_) 
```

这在某种程度上否定了原始问题；即，在许多情况下，人们可以对非/或场景进行高阶处理，并避免“胖”、重复的 if/else 语句。

**ORIGINAL**
尝试在处理可能为空的集合（如 List[T]）时减少 if/else 处理

例如，假设我需要获取最新的新闻文章来构建html 新闻的*NodeSeq*`<li><a>links</a></li>`：

```
val result = dao.getHeadlines // List[of model objects]
if(result.isEmpty) NodeSeq.Empty
else 
  result map { row =>
    addLink( row.href, row.label ) // NodeSeq
  } reduce(_ ++ _) 
```

这没关系，非常简洁，但我发现自己想要采用三元风格来解决这些永远是非此即彼的情况：

```
result.isEmpty ? NodeSeq.Empty :
  result map { row =>
    addLink( row.href, row.label )
  } reduce(_ ++ _) 
```

我已经看到一些关于将三元数据拉到布尔值上的旧帖子，但很想知道有什么替代方案（如果有的话）来简化 if/else？

`match {...}`是，IMO 对于这种情况有点臃肿，而且`for {...} yield`似乎也没有多大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:26:51.997

你根本不需要检查空虚。只需使用`fold`而不是`reduce`因为`fold`允许您指定默认的“空”值：

```
scala> List(1,2,3,4).map(_ + 1).fold(0)(_+_)
res0: Int = 14

scala> List[Int]().map(_ + 1).fold(0)(_+_)
res1: Int = 0 
```

这是一个带有 a `List`of `Seq`s 的示例：

```
scala> List(1,2).map(Seq(_)).fold(Seq.empty)(_++_)
res14: Seq[Int] = List(1, 2)

scala> List[Int]().map(Seq(_)).fold(Seq.empty)(_++_)
res15: Seq[Int] = List() 
```

**编辑**：看起来您的示例中的问题与`.`在方法之间删除点 () 字符有关。如果您将它们保留在其中，则一切正常：

```
scala> List(1,2,3).map(i => node).fold(NodeSeq.Empty)(_ ++ _)
res57: scala.xml.NodeSeq = NodeSeq(<li><a href="/foo">Link</a></li>, <li><a href="/foo">Link</a></li>, <li><a href="/foo">Link</a></li>) 
```

# c++ - 在 linux 上被 geany 卡住了

> ID：10065236
> 
> 赞同：1
> 
> 时间：2012-04-08T18:25:07.150
> 
> 标签：c++, linux, class, geany

所以我开始在我的 linux 发行版中使用 geany，但我遇到了一些麻烦......

我正在尝试为一个类创建一个头文件并将其链接到一个 cpp 文件中，但它找不到我的头文件...

演示：

***我的类.hpp***

```
#ifndef MYCLASS_HPP
#define MYCLASS_HPP

class MyClass
{
    public:
    MyClass();
};

#endif 
```

***我的类.cpp***

```
#include "MyClass.hpp"

MyClass::MyClass()
{
} 
```

我得到的错误是：

> MyClass.cpp:1:23：致命错误：MyClass.hpp：没有这样的文件或目录

任何想法为什么会这样？:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:39:57.793

你是怎么编译的？可以试试

```
gcc *.cpp -I. 
```

# mysql - mysql总数

> ID：10065239
> 
> 赞同：-1
> 
> 时间：2012-04-08T18:25:42.573
> 
> 标签：mysql

我有一个这样的mysql表：

```
general
+----+------+
| ID | hits |
+----+------+
| 1  |  10  |
+----+------+
| 2  |  6   |
+----+------+
| 3  |  31  |
+----+------+ 
```

我怎样才能获得点击总数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:26:40.957

使用[`SUM`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_sum)聚合函数获取列的总数：

```
SELECT SUM(hits) FROM general 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:29:13.267

```
SELECT SUM(hits) FROM general; 
```

# php - 我的客户的部分信息被插入到数据库中，而有些则没有

> ID：10065243
> 
> 赞同：1
> 
> 时间：2012-04-08T18:25:59.570
> 
> 标签：php, mysql

我正在注册客户，注册需要地址，但 'houseno'、'addressa'、'addressb'、'addressc'、'county'、'state'、'country' 没有插入数据库，而其他信息是插入，在客户注册后

```
<?php
echo "<h2>Register</h2>";

$submit = $_POST['register'];
//form data
$fullname = mysql_real_escape_string(htmlentities(strip_tags($_POST['fullname'])));
$username = strtolower(mysql_real_escape_string(htmlentities(strip_tags($_POST['username']))));
$password = mysql_real_escape_string(htmlentities(strip_tags($_POST['password'])));
$repeatpassword = mysql_real_escape_string(htmlentities(strip_tags($_POST['repeatpassword'])));
$email = mysql_real_escape_string(htmlentities(strip_tags($_POST['email'])));
$houseno = mysql_real_escape_string(htmlentities(strip_tags($_POST['houseno'])));
$addressa = mysql_real_escape_string(htmlentities(strip_tags($_POST['addressa'])));
$addressb = mysql_real_escape_string(htmlentities(strip_tags($_POST['addressb'])));
$addressc = mysql_real_escape_string(htmlentities(strip_tags($_POST['addressc'])));
$county = mysql_real_escape_string(htmlentities(strip_tags($_POST['county'])));
$state = mysql_real_escape_string(htmlentities(strip_tags($_POST['state'])));
$country = mysql_real_escape_string(htmlentities(strip_tags($_POST['country'])));
$accept = mysql_real_escape_string(htmlentities(strip_tags($_POST['accept'])));

if ($submit)
{
$namecheck = mysql_query("SELECT username FROM reusers WHERE username='$username'");
$count = mysql_num_rows($namecheck);

if($count!=0)
{
die("Username already taken!");

}

//check for registration form details
    if ($fullname&&$username&&$password&&$repeatpassword&&$email&&$houseno&&$addressa&&$county&&$state&&$country)
{
if($accept == 1)
{
if ($password==$repeatpassword)
{
//check char lenght of username and fullname
if (strlen($username)>25||strlen($fullname)>25)
{
echo "Lenght of username or fullname is too long";
}
else
{
//check password length
if(strlen($password)>25||strlen($password)<6)
{
echo"Password must be between 6 and 25 characters";
}
else
{
//check password length
$emailcheck = mysql_query("SELECT email FROM reusers WHERE email='$email'");
$ecount = mysql_num_rows($emailcheck);
if($ecount!=0)
{
echo"email already registered Please sign in into your account to continue";
}
else
    {
       //generate random code
       $code = rand(11111111,99999999);

       //send activation email
       $to = $email;
       $subject = "Activate your account";
       $headers = "From: donotreply@rapsody.co.uk";
       $body = " Hello $fullname,\n\nUsername $username,\n\n Password $password ,\n\nYou registered and need to activate your account. Click the link below or paste it into the URL bar of your browser\n\nhttp://reacheasy.co.uk/activate.php?code=$code\n\nThanks!";

       if (!mail($to,$subject,$body,$headers))
           echo "We couldn't sign you up at this time. Please try again later.";

else

{
//register the user!
//encript password
$password = md5($password);
$repeatpassword = md5($repeatpassword);

$queryreg = mysql_query("

INSERT INTO reusers VALUES ('','$fullname','$username','$password','$email','$code','0','houseno','addressa','addressb','addressc','county','state','country')

");

die("You have been registered successfully! Please check your email ($email) to activate your account<a href='index.php'>Return to login page</a>");
}
}
}
}
}
else
    echo"Your passwords do not match!";

}
else
    echo"Please read and accept Terms and Conditions before registering!";
}
else
        echo "Please fill in <b>all</> fields!";

}
?>
</div>
<p>
<form action='reregister.php' method='Post' class='rl'>
    <div>
    <label for='fullname' class='fixedwidth'>Your full name*</label>
    <input type='text' name='fullname' id='username' value='<?php echo $fullname; ?>'/>
    </div>

    <div>
    <label for='username' class='fixedwidth'>Choose a user name*</label>
    <input type='text' name='username' id='username' value='<?php echo $username; ?>'/>
    </div>

    <div>
    <label for='password' class='fixedwidth'>Choose a password*</label>
    <input type='password' name='password' id='password'/>
    </div>

    <div>
    <label for='repeatpassword' class='fixedwidth'>Repeat your password*</label>
    <input type='password' name='repeatpassword' id='repeatpassword'/>
    </div>

    <div>
    <label for='email' class='fixedwidth'>E-mail*</label>
    <input type='text' name='email' id='email'/>
    </div>

    <h2>Personal details</h2>

    <div>
    <label for='houseno' class='fixedwidth'>HOUSE NAME/NO*</label>
    <input type='text' name='houseno' id='houseno' value='<?php echo $houseno; ?>' />
    </div>

    <div>
    <label for='addressa' class='fixedwidth'>ADDRESS LINE 1*</label>
    <input type='text' name='addressa' id='addressa' value='<?php echo $addressa; ?>' />
    </div>

    <div>
    <label for='addressb' class='fixedwidth'>ADDRESS LINE 2</label>
    <input type='text' name='addressb' id='addressb' value='<?php echo $addressb; ?>' />
    </div>

    <div>
    <label for='addressc' class='fixedwidth'>ADDRESS LINE 3</label>
    <input type='text' name='addressc' id='addressc' value='<?php echo $addressc; ?>' />
    </div>

    <div>
    <label for='county' class='fixedwidth'>COUNTY/LGA*</label>
    <input type='text' name='county' id='county' value='<?php echo $county; ?>' />
    </div>

    <div>
    <label for='state' class='fixedwidth'>STATE*</label>
    <input type='text' name='state' id='state' value='<?php echo $state; ?>' />
    </div>

    <div>
    <label for='country' class='fixedwidth'>COUNTRY*</label>
    <input type='country' name='country' id='country' value='<?php echo $country; ?>' />
    </div>

    <div>
    <input name="accept" type="checkbox" class="tickbox" value="1" />
    <a href="termsandcondition.php">Terms and Conditions</a>
    </div>

    <div class='buttonarea'>
            <p>
            <input type='submit' name='register' value='Register'>
            </p>
            </div>
            </p>

</form>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:30:42.407

您缺少`$`后面变量的前面，因此您只需插入 "houseno" 而不是变量`$houseno`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:30:48.350

我相信您的 SQL 查询中需要几个 $

```
$queryreg = mysql_query("
INSERT INTO reusers VALUES('','$fullname','$username','$password','$email','$code','0','houseno','addressa','addressb','addressc','county','state','country')
"); 
```

应改为

```
$queryreg = mysql_query("
INSERT INTO reusers VALUES('','$fullname','$username','$password','$email','$code','0','$houseno','$addressa','$addressb','$addressc','$county','$state','$country')
"); 
```

# mysql - mySql中的空值匹配

> ID：10065245
> 
> 赞同：1
> 
> 时间：2012-04-08T18:26:16.817
> 
> 标签：mysql

我在 mysql 数据库中有三个表。Deseasetype(DTID,TypeName) , Symptom(SID, SymptomName, DTID) , Result(RID, SID1, SID2, SID3, result).1st 两个表，我觉得够清楚了。

在结果表中：将有符号的组合，并且 SymID1/ SymID2/ SymID3 的任何值都可以为空。在这里，我发送了表格结果的图片。

![在此处输入图像描述](../Images/3e01d248a61d821c0df7e810762e3121.png)

我想输入一些症状，输出将是“结果”表的结果。为此我写了这个查询：

```
$query = "select Result from result where (result .SID1= '$symptom1') AND (result.SID2= '$symptom2' ) AND (result.SID3 = '$symptom3')"; 
```

这仅在三个症状具有价值时才有效。但如果任何症状为空，则找不到结果。可能是查询应该更完善。

**请避免在我的写作中出现任何语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:29:55.277

那是因为您将 NULL 与空字符串进行比较，并且它们不相等。你可以试试这个：

```
SELECT Result
FROM symptom
WHERE IFNULL(symptom.SID1, '') = '$symptom1'
AND IFNULL(symptom.SID2, '') = '$symptom2'
AND IFNULL(symptom.SID3, '') = '$symptom3' 
```

笔记：

*   您需要正确转义 $symptom1、$symptom2 和 $symptom3 的值。
*   这不会有效地使用索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:38:18.457

As mark pointed out, the query is eventually falling down to compare with null if you are not escaping the `null`. Or you can slightly change your logic to show a empty symptom with value '0' and then using the [coalesce](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce) function you can easily build your query.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:46:26.953

这行得通吗？

```
$query = "select Result from  result
                        where (result.SID1 = '$symptom1' OR result.SID1 IS NULL) AND 
                              (result.SID2 = '$symptom2' OR result.SID2 IS NULL) AND 
                              (result.SID3 = '$symptom3' OR result.SID3 IS NULL)"; 
```

# android - 如何获取 MMS id Android 应用程序

> ID：10065249
> 
> 赞同：5
> 
> 时间：2012-04-08T18:26:45.337
> 
> 标签：android, broadcastreceiver, mms

谁能帮我找到 MMS id，我使用 [此](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android/6446831#6446831)代码获取 MMS 文本，但我不知道 MMS id (mmsId)，所以我停止了！

我会感谢你的帮助

萨米拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:38:22.260

```
Uri mmsInboxUri = Uri.parse("content://mms");               
Cursor mmsInboxCursor = getContentResolver().query(mmsInboxUri ,new String[]     
    {"_id","msg_box","ct_t","date"}, "msg_box=1 or msg_box=2", null, null);
int count = mmsInboxCursor.getCount(); 
if(mmsInboxCursor != null){

    try{

         if (mmsInboxCursor.moveToFirst())
         {                  
            do{

                System.out.println("<====MONITORING MESSAGES====>");                                
                int id = mmsInboxCursor.getString(0); 
              }while(mmsInboxCursor.moveToNext());
        }
    }catch (Exception e) {

        System.out.println("MMSMonitor :: startMMSMonitoring Exception== "+ e.getMessage());
    }
} 
```

# cakephp - 谷歌浏览器中的 cakephp 2.1 黑洞

> ID：10065251
> 
> 赞同：0
> 
> 时间：2012-04-08T18:27:00.613
> 
> 标签：cakephp

我正在为 cakephp 2.1 开发插件，所有浏览器上的 localhost 都运行良好

但是这个插件不能在服务器上的谷歌浏览器上运行，但是它在 Firefox 上运行良好

我收到错误：当我提交表单时，在此服务器上找不到请求的地址“/登录”。

例如。

[http://umpremium.ektasoftwares.com/login](http://umpremium.ektasoftwares.com/login)

请在 google chrome 和 Firefox 上查看。有人可以帮帮我吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:34:52.767

我可以使用 Google Chrome 和 Firefox 访问该站点`Chrome 18.0.1025.151`

# c# - 具有共享 IP 地址的网络服务器上 MySQL 数据库的连接字符串 - C#

> ID：10065259
> 
> 赞同：0
> 
> 时间：2012-04-08T18:28:21.777
> 
> 标签：c#, mysql, connection-string

我是 MySQL 数据库的新手，我想使用我的 C# winform 应用程序将数据获取或设置到我的数据库中，因此我需要知道在具有共享 IP 地址的网络服务器上存在的数据库所需的连接字符串。我的数据库的名称是`shop_ListDatabase`，我的网站的共享IP地址是`91.215.159.xxx`，考虑用户名和密码是（用户名，密码），网站是example.com。

我在互联网上搜索了很多小时，但没有找到合适的答案。搜索结果都是关于本地计算机上的数据库，但我的数据库在我的网站上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:41:53.930

您需要指定端口。默认端口为：3306，在这种情况下，您的连接字符串应类似于：

```
Server=91.215.159.xxx;Port=3306;Database=myDataBase;Uid=myUsername;Pwd=myPassword; 
```

# git - GitHub：如何将公共存储库分叉为私有存储库中的子目录？

> ID：10065261
> 
> 赞同：6
> 
> 时间：2012-04-08T18:28:43.547
> 
> 标签：git, github

我的项目目前托管在一个私有存储库中。我希望将依赖项引入托管在 GitHub 上的公共存储库中的第三方库。如何分叉库，使其成为我项目中的子目录，但我仍然可以从该库的主干分支同步？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T18:31:10.193

这称为子模块，详细描述在[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-08T20:19:21.057

这个序列会让你设置：

```
cd <my-project-dir>
git submodule add <github repository> <my-third-party-dir>   # -b <branch> optionally
git submodule init
git submodule update 
```

此时，您的*my-third-party-dir*填充了特定的提交（分离的头）。您的项目将有两个更改。

```
git add .gitmodules <my-third-party-dir>
git commit -m 'Added <repository> as a submodule' 
```

# mysql - 如何计算 MySQL 中 NULL 运行的运行长度？

> ID：10065265
> 
> 赞同：0
> 
> 时间：2012-04-08T18:29:13.650
> 
> 标签：mysql, sql

假设我有一个主键`pk`和一个可为空的列`col`。我想找到`col`is的连续行序列`NULL`，按运行长度的降序排列。

我将接受一个仅返回运行长度的查询作为有效答案，但在未来（也许在一个单独的问题中）我会想知道一些`pk`指向我每次运行的起点或终点的信息。

示例数据：

```
pk    col
--    ---
1     'a'
2     NULL
3     'b'
4     NULL
5     NULL
6     NULL
7     'c'
8     NULL
9     NULL
10    'd' 
```

预期查询结果：

```
runlengths
----------
3
2
1 
```

如果可能的话，我更喜欢标准 SQL，但这是用于分析存储在 MySQL 中的生产数据集，所以在这种情况下最适合的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T18:39:30.430

试试这个。

```
DECLARE @a TABLE (
    pk INT IDENTITY(1,1),
    col CHAR(1)
)

INSERT @a (col)
VALUES  ('a'), (null), ('b'), (null), (null), (null), ('c'), (null), (null), ('d')

SELECT COUNT(*) as runlengths 
FROM @a AS A
INNER JOIN (
    SELECT 
        l.pk, 
        MAX(r.pk) AS prev
    FROM @a AS l
    INNER JOIN @a AS r
        ON l.pk > r.pk
    WHERE 
        l.col IS NOT NULL
        AND r.col IS NOT NULL
    GROUP BY 
        l.pk
) AS B
    ON A.pk < B.pk AND A.pk > B.prev
GROUP BY 
    B.pk 
```

是T-SQL方言，不过相信已经够清楚了。

此查询存在问题，如果第一行/最后一行具有 NULL 值，但不难解决。如何做到这一点取决于您的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T18:45:13.033

试试这个：

```
select count(*) runlengths from (
  select col, @count := @count + (col is not null) cnt
  from t, (select @count := 0) init
) final
where col is null
group by cnt
order by count(*) desc 
```

[在这里](http://sqlfiddle.com/#!2/71e88/1)拉小提琴。

# python - 有没有办法检查网站正在使用什么类型的身份验证？

> ID：10065267
> 
> 赞同：4
> 
> 时间：2012-04-08T18:29:29.100
> 
> 标签：python, urllib2, exchangewebservices, suds

我正在尝试使用带有 suds 的 python 连接到 Microsoft Exchange 服务器，但我无法验证和下载 services.wsdl 文件。

我也尝试过使用 urllib2 来尝试连接，但这也失败了。但是，我可以验证并下载 Outlook Web Access 页面。

我试过使用 ntlm auth，但这也给了我 401 错误。有没有办法检查我需要什么类型的身份验证，所以我可以首先检查我是否使用了身份验证类型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:37:39.497

如[RFC 2617, "HTTP Authentication: Basic and Digest Access Authentication"](http://www.ietf.org/rfc/rfc2617.txt)中指定的，`WWW-Authenticate`响应标头告诉您应该在请求中使用哪种身份验证方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-10-08T05:30:28.847

您可以使用[https://www.getpostman.com/apps](https://www.getpostman.com/apps)了解身份验证的类型。从这里点击一次 url，然后从错误中您将了解身份验证的类型。

# ruby-on-rails - Paperclip - 将图像尺寸从已上传到 S3 的图像保存到数据库

> ID：10065271
> 
> 赞同：0
> 
> 时间：2012-04-08T18:29:55.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, paperclip

我有大麻烦...

我已经通过我的 Rails 应用程序将大约 500 张图片上传到了 S3，有几种不同的尺寸。现在我意识到我需要将这些图像尺寸存储到我的数据库中。我这样做的方法是使用此迁移：

```
class AddImageDimensionsToImages < ActiveRecord::Migration
  def change

    # add image columns
    add_column :images, :small_width, :integer
    add_column :images, :small_height, :integer
    add_column :images, :medium_width, :integer
    add_column :images, :medium_height, :integer
    add_column :images, :large_width, :integer
    add_column :images, :large_height, :integer
    add_column :images, :original_width, :integer
    add_column :images, :original_height, :integer

    # loop all images
    Image.all.each do |image|

      # get sizes
      geo_small = Paperclip::Geometry.from_file(image.image.to_file(:small))
      geo_medium = Paperclip::Geometry.from_file(image.image.to_file(:medium))
      geo_large = Paperclip::Geometry.from_file(image.image.to_file(:large))
      geo_original = Paperclip::Geometry.from_file(image.image.to_file(:original))

      # set sizes
      image.small_width = geo_small.width if geo_small
      image.small_height = geo_small.height if geo_small

      image.medium_width = geo_medium.width if geo_medium
      image.medium_height = geo_medium.height if geo_medium

      image.large_width = geo_large.width if geo_large
      image.large_height = geo_large.height if geo_large

      image.original_width = geo_original.width if geo_original
      image.original_height = geo_original.height if geo_original

      # save image
      image.save

    end

  end

end 
```

当我运行此迁移时，它是这样的：

```
...

-- add_column(:images, :small_width, :integer)
   -> 2.0866s
-- add_column(:images, :small_height, :integer)
   -> 0.0092s
-- add_column(:images, :medium_width, :integer)
   -> 0.0073s

...

Command :: identify -format %wx%h '/app/tmp/HayUnFinal_1620120408-4-qpzyym.jpg[0]'
[AWS S3 200 0.106467] get_object(:bucket_name=>"aa",:key=>"original/34/HayUnFinal_16.jpg")

Command :: identify -format %wx%h '/app/tmp/HayUnFinal_1620120408-4-1vqo71y.jpg[0]'
[paperclip] Saving attachments.
[AWS S3 200 0.152898] get_object(:bucket_name=>"aa",:key=>"small/64/Portrait_2.jpg")

Command :: identify -format %wx%h '/app/tmp/Portrait_220120408-4-i1ohlr.jpg[0]'
[AWS S3 200 0.055378] get_object(:bucket_name=>"aa",:key=>"medium/64/Portrait_2.jpg")

Command :: identify -format %wx%h '/app/tmp/Portrait_220120408-4-viizzf.jpg[0]'
[AWS S3 200 0.079235] get_object(:bucket_name=>"aa",:key=>"large/64/Portrait_2.jpg")

Command :: identify -format %wx%h '/app/tmp/Portrait_220120408-4-1d2u00o.jpg[0]'
[AWS S3 200 0.066724] get_object(:bucket_name=>"aa",:key=>"original/64/Portrait_2.jpg")

Command :: identify -format %wx%h '/app/tmp/Portrait_220120408-4-jq9wmg.jpg[0]'
[paperclip] Saving attachments.
[AWS S3 200 0.104891] get_object(:bucket_name=>"aa",:key=>"small/58/Bansah_24.jpg")

Command :: identify -format %wx%h '/app/tmp/Bansah_2420120408-4-an2mpt.jpg[0]'
[AWS S3 200 0.064148] get_object(:bucket_name=>"aa",:key=>"medium/58/Bansah_24.jpg")

Command :: identify -format %wx%h '/app/tmp/Bansah_2420120408-4-tzmnup.jpg[0]'
[AWS S3 200 0.051090] get_object(:bucket_name=>"aa",:key=>"large/58/Bansah_24.jpg")

Command :: identify -format %wx%h '/app/tmp/Bansah_2420120408-4-1pa0rxh.jpg[0]'
[AWS S3 200 0.063531] get_object(:bucket_name=>"aa",:key=>"original/58/Bansah_24.jpg")

Command :: identify -format %wx%h '/app/tmp/Bansah_2420120408-4-kogk2g.jpg[0]'
[paperclip] Saving attachments.

rake aborted!
An error has occurred, this and all later migrations canceled:

can't convert nil into String 
```

耙中止！它似乎适用于几个图像，但随后迁移失败。我真的不知道那个 nil 来自哪里，以及如何防止它。谁能帮我这个？

额外问题：这是处理保存已上传图像的图像尺寸任务的一种方法吗？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:46:55.070

数据库中的某些图像行具有空图像值。像这样的检查成功了：

```
Image.all.each do |image|

  # check that we have an image
  if image.image_file_size

    ...

  end

end 
```

# jquery - 当 Web 服务器由 jquery 操作时，在客户端的 DOM 中维护特定 div 的副本的最佳方式是什么？

> ID：10065272
> 
> 赞同：1
> 
> 时间：2012-04-08T18:30:00.270
> 
> 标签：jquery, dom, client, headless

我正在用 javascript 和 jquery 构建一种 html 文档编辑器。我希望服务器保持文档的当前状态。服务器端将在 java 或 php 中实现。

在客户端上，我有一个 html 元素的调色板，用户可以将其添加到文档中。可以添加的所有内容都包含在 div 中。在文档中，用户将操作树结构，在 div 中分组/包装元素，并将 div 移动为兄弟姐妹的孩子。一些 div 中会有表单，我也需要表单中的值保留到服务器。

您认为最好的方法是什么，而不是每次发生更改时都将整个文档发送到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:52:50.750

在我看来，你有三个选择：

1.  您可以将整个文档发送到服务器，每次更改或在不活动的短暂暂停（例如 60 秒无活动）后（如自动保存）。
2.  您可以创建文档的骨架描述，该描述不是实际的 HTML，而且更加紧凑，但仍描述了所有预定小部件的位置。例如，一个特定的预定义小部件可以描述为简单的“A”，而不是组成它的已知 HTML。
3.  您可以只将每个更改发送到服务器（例如，将第 13 项移动到第 19 项的子项，或删除第 20 项），并通过在发生更改时应用每个更改来在服务器上维护一个重复的结构。

如果数据不大（例如 100k 以下）并且很容易解析服务器上的整个数据，那么实现第 1 项和第 2 项可能比实现项目更麻烦。

我建议实施选项#1，然后看看它是如何执行的，只有在必要时才去做更复杂的事情。

# oracle - 使用 Oracle 空间定位器

> ID：10065273
> 
> 赞同：2
> 
> 时间：2012-04-08T18:30:06.137
> 
> 标签：oracle, spatial

我可以运行下面的查询，但是当我将参数交换为 sdo_nn 时，我得到一个错误，即 SDO_NN 无法在不使用索引的情况下进行评估

作品：

```
SELECT
c.customer_id,
c.first_name,
c.last_name,
sdo_nn_distance (1) distance
FROM stores s,
customers c
AND sdo_nn
(c.cust_geo_location, s.store_geo_location, 'sdo_num_res=1', 1)= 'TRUE'
ORDER BY distance; 
```

不工作：

```
SELECT
c.customer_id,
c.first_name,
c.last_name,
sdo_nn_distance (1) distance
FROM stores s,
customers c
AND sdo_nn
(s.store_geo_location,c.cust_geo_location, 'sdo_num_res=1', 1)= 'TRUE'
ORDER BY distance; 
```

任何人都可以向我解释为什么顺序很重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:36:31.460

From [Oracle's online docs](http://docs.oracle.com/cd/B19306_01/appdev.102/b14255/sdo_operat.htm#i78067) `sdo_nn` needs the first parameter to be spatially indexed. the second parameter does not have that necessity/constraint.

So when swapping parameters you need to make sure the "now first" parameter (i.e. `s.store_geo_location`) is spatially indexed. See [this](http://docs.oracle.com/cd/B19306_01/appdev.102/b14255/sdo_objindex.htm) on how to create a spatial index in Oracle.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T05:03:47.307

添加编译器提示以告诉查询解析器使用什么索引，例如：

```
select
/*+ index(tableName,sdoIndexName) */
... 
```

**警告**编译器提示**静默失败**

# java - 如何在 Java 中的 JTextArea 中追加数据？

> ID：10065280
> 
> 赞同：0
> 
> 时间：2012-04-08T18:30:52.307
> 
> 标签：java, swing

我正在使用此代码在 a 中显示文本`JTextArea`：

```
jTextArea1.setText(jTextArea1.getText() + text + "\r\n");
jTextArea1.repaint(); 
```

但它显示了一个例外：

```
java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:34:18.903

You never instantiated your `JTextArea`. Also, you might want to check out [`JTextArea#append`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html#append%28java.lang.String%29).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:54:04.900

以下代码将文本添加到文本区域。请注意，文本系统在内部使用 '\n' 字符来表示换行符；有关详细信息，请参阅 DefaultEditorKit 的 API 文档。

```
private final static String newline = "\n";
...
textArea.append(text + newline); 
```

[资源](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:55:03.573

正如 Jeffrey 指出的那样，您必须先创建一个对象实例，然后再对其调用非静态方法。否则，您将获得一个`NullPointerException`. `JTextArea`另请注意，可以通过调用其`JTextArea.append(String)`方法轻松地将文本附加到 a 。有关更多详细信息，请参见以下示例代码。

```
 package test;

import javax.swing.JFrame;
import javax.swing.JTextArea;

public class Main {
  public static void main(String[] args) {
    Main m = new Main();
    m.start();
  }
  private void start() {
    JTextArea ta = new JTextArea();
    ta.append("1\n");
    ta.append("2\n");
    ta.append("3\n");
    JFrame f = new JFrame();
    f.setSize(320, 200);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.getContentPane().add(ta);
    f.setVisible(true);
  }
} 

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T18:43:09.463

```
jTextArea1.setText(jTextArea1.getText() + text + "\r\n");

StringBuilder sb = new StringBuilder();
if(jTextArea1.getText().trim().length() > 0){
    sb.append(jTextArea1.getText().trim());
}
sb.append(text).append("\r\n");

jTextArea1.setText(sb.toString()); 
```

以上两位朋友给了你答案。我想解释一下。因为第一次我也遇到了这个问题。我解决了这个问题，但今天解决了上面的代码片段。

# arrays - Bash参数扩展和数组索引操作

> ID：10065284
> 
> 赞同：4
> 
> 时间：2012-04-08T18:31:21.953
> 
> 标签：arrays, bash, parameters

*参数扩展将参数*中的`${parameter,,pattern}`字母字符转换为小写。

 *在**cygwin 1.7.11-1 Bash 4.1.10(4)**和我的**debian 挤压 Bash 4.1.5(1)**上；
如果我运行以下命令，我会得到一个奇怪的结果：

```
$ declare -a a=(Zero One Two Three); n=0; echo "${a[n],,}->${n}"; echo "${a[++n]}->${n}"; echo "${a[++n],,}->${n}"
zero->0
One->1
three->3
$ 
```

注意：发生类似结果：
for`,,*`或`^^`case 转换；
对于其他一些扩展，例如`${parameter##word}`;
用于使用前缀/后缀`++`或`--`运算符；
用于使用`$((++n))`而不是仅`++n`.

但是，长度扩展`${#parameter}`正如我所料：
在上面的代码片段中，`echo "${#a[++n]}->${n}"`而不是`echo "${a[++n],,}->${n}`会产生`3->2`而不是`three->3`~& a[2]="two" 的长度确实是 3 个字符。

我想*参数*扩展发生了两次。但是为什么会这样呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:10:50.127

我抓住了最新的 bash 源 & 看来这个版本的这个问题已经解决了：

```
$ ./bash --version
GNU bash, version 4.2.24(1)-release (x86_64-unknown-linux-gnu)
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
$ 
```

但是请注意，在我的 Debian Squeeze *stable*上，我有：

```
$ apt-cache policy bash
bash:
  Installed: 4.1-3
  Candidate: 4.1-3
  Version table:
 *** 4.1-3 0
        500 http://ftp.uk.debian.org/debian/ squeeze/main amd64 Packages
        100 /var/lib/dpkg/status
$
$ bash --version
GNU bash, version 4.1.5(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html> 
```

我认为这意味着目前在**Debian Squeeze**上，最新的稳定版本 bash 是**4.1.5(1)** & 包含这个错误。同样在**Cygwin 1.7.11-1**上，当前最新的可用 bash 包似乎是版本**4.1.10(4)**并且包含此错误。当然这个问题很容易解决，所以不需要构建**4.2**源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:45:14.207

我有

```
Zero->0
One->1
Two->2 
```

但是我认为“${a[++n]}->${n}”可能没有很好的定义。

尝试用

```
let n=$n+1 ; echo "${a[n],,}->${n}"; 
```

注入序列的概念。*

# c# - 为什么 ushort + ushort 等于 int？

> ID：10065287
> 
> 赞同：34
> 
> 时间：2012-04-08T18:32:17.413
> 
> 标签：c#, types, integer-arithmetic

今天之前我试图添加两个 ushort，我注意到我必须将结果转换回 ushort。我认为它可能已经变成了一个 uint（以防止可能的意外溢出？），但令我惊讶的是它是一个 int (System.Int32)。

这是否有一些聪明的理由，或者可能是因为 int 被视为“基本”整数类型？

例子：

```
ushort a = 1;
ushort b = 2;

ushort c = a + b; // <- "Cannot implicitly convert type 'int' to 'ushort'. An explicit conversion exists (are you missing a cast?)"
uint d = a + b; // <- "Cannot implicitly convert type 'int' to 'uint'. An explicit conversion exists (are you missing a cast?)"

int e = a + b; // <- Works! 
```

编辑：就像 GregS 的回答所说，C# 规范说两个操作数（在本例中为“a”和“b”）都应转换为 int。我对为什么这是规范的一部分的根本原因很感兴趣：为什么 C# 规范不允许直接对 ushort 值进行操作？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-14T21:28:52.540

简单而正确的答案是“因为 C# 语言规范是这样说的”。

显然你对这个答案不满意，想知道“为什么这么说”。您正在寻找“可靠和/或官方来源”，这会有点困难。这些设计决策是很久以前做出的，13 年是软件工程中很多狗的生活。正如 Eric Lippert 所说，它们是由“老前辈”制作的，他们已经转向更大更好的事情，并且不会在此处发布答案以提供官方来源。

然而，它可以被推断出来，只是冒着可信的风险。任何托管编译器，如 C# 的，都有为 .NET 虚拟机生成代码所需的约束。CLI 规范中详细描述了这些规则（并且非常易读）。[它是 Ecma-335 规范，您可以从这里](http://www.ecma-international.org/publications/standards/Ecma-335.htm)免费下载。

转到第 III 部分，第 3.1 和 3.2 章。它们描述了可用于执行加法的两条 IL 指令，`add`以及`add.ovf`. 单击表 2“二进制数值运算”的链接，它描述了这些 IL 指令允许的操作数。请注意，此处仅列出了几种类型。byte 和 short 以及所有无符号类型都丢失了。只允许使用 int、long、IntPtr 和浮点（float 和 double）。例如，对于用 x 标记的附加约束，您不能将 int 添加到 long 中。这些限制并不是完全人为的，它们是基于你可以在可用硬件上合理有效地做的事情。

任何托管编译器都必须处理此问题才能生成有效的 IL。这并不难，只需将 ushort 转换为表中较大的值类型，这种转换始终有效。C# 编译器选择 int，这是表中出现的下一个较大的类型。或者通常，将任何操作数转换为下一个最大值类型，以便它们具有相同的类型并满足表中的约束。

然而，现在有一个新问题，一个让 C# 程序员非常疯狂的问题。添加的结果是提升类型。在你的情况下，这将是 int。因此，添加两个 ushort 值，例如 0x9000 和 0x9000 具有完全有效的 int 结果：0x12000。问题是：这是一个不适合 ushort 的值。值*溢出*。但它*并没有*在 IL 计算中溢出，它只会在编译器试图将它塞回 ushort 时溢出。0x12000 被截断为 0x2000。一个令人眼花缭乱的不同值，只有当你用 2 根或 16 根手指而不是 10 根手指数时才有意义。

值得注意的是 add.ovf 指令不处理这个问题。它是用于自动生成溢出异常的指令。但事实并非如此，转换后的整数的实际计算没有溢出。

这是真正的设计决策发挥作用的地方。老前辈显然认为简单地将 int 结果截断为 ushort 是一个错误工厂。那当然是。他们决定你必须承认你*知道*加法可能会溢出，如果它发生也没关系。他们把它变成了*你的*问题，主要是因为他们不知道如何让它成为他们的问题并且仍然生成有效的代码。你必须投。是的，这太让人抓狂了，我敢肯定你也不想要这个问题。

相当值得注意的是，VB.NET 设计者对该问题采取了不同的解决方案。他们实际上把它*作为他们的*问题，并没有推卸责任。您可以添加两个 UShort 并将其分配给一个 UShort 而无需强制转换。不同之处在于 VB.NET 编译器实际上会生成*额外的*IL 来检查溢出情况。这不是便宜的代码，每一个简短的添加都会慢大约 3 倍。但除此之外，这也解释了为什么微软维护*两种*具有非常相似功能的语言。

长话短说：您付出了代价，因为您使用的类型与现代 cpu 架构不太匹配。这本身就是使用 uint 而不是 ushort 的一个非常好的理由。从 ushort 中获得牵引力是很困难的，在操纵它们的成本超过内存节省之前，你需要很多它们。不仅仅是因为有限的 CLI 规范，x86 内核需要额外的 cpu 周期来加载 16 位值，因为机器代码中的操作数前缀字节。实际上不确定今天是否仍然如此，当我仍然注意计算周期时，它曾经回来过。一年前的狗。

* * *

请注意，通过让 C# 编译器生成与 VB.NET 编译器生成的代码相同的代码，您可以更好地了解这些丑陋和危险的强制转换。所以当演员被证明是不明智的时，你会得到一个 OverflowException。使用项目>属性>构建选项卡>高级按钮>勾选“检查算术上溢/下溢”复选框。仅用于调试版本。为什么项目模板没有自动打开此复选框是另一个非常神秘的问题，顺便说一句，这是很久以前做出的决定。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-08T18:36:56.537

```
ushort x = 5, y = 12; 
```

以下赋值语句将产生编译错误，**因为赋值运算符右侧的算术表达式**默认计算为 int。

```
ushort z = x + y;   // Error: conversion from int to ushort 
```

[http://msdn.microsoft.com/en-us/library/cbf1574z(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/cbf1574z(v=vs.71).aspx)

编辑：
如果对 ushort 进行算术运算，操作数将转换为可以保存所有值的类型。这样就可以避免溢出。操作数可以按 int、uint、long 和 ulong 的顺序变化。请参阅本文档中的[C# 语言规范](http://www.microsoft.com/download/en/details.aspx?id=7029)，转到第 4.1.5 节整数类型（word 文档中的第 80 页左右）。在这里你会发现：

> 对于二进制 +、–、*、/、%、&、^、|、==、!=、>、<、>= 和 <= 运算符，操作数转换为 T 类型，其中 T 是第一个int、uint、long 和 ulong**可以完全表示两个操作数的所有可能值**。然后使用类型 T 的精度执行操作，结果的类型是 T（或关系运算符的 bool）。对于二元运算符，不允许一个操作数为 long 类型而另一个为 ulong 类型。

Eric Lipper 在一个[问题中说](https://stackoverflow.com/questions/8671427/why-some-types-do-not-have-literal-modifiers)

> 算术永远不会在 C# 中完成。算术可以用 int、uint、long 和 ulong 来完成，但算术永远不能用 short 来完成。Shorts 提升为 int 并且算术是在 int 中完成的，因为就像我之前所说的，绝大多数算术计算都适合 int。绝大多数不适合做空。在为整数优化的现代硬件上，短算术可能会更慢，而且短算术不会占用更少的空间；它将在芯片上以整数或长整数形式完成。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-08T18:42:11.467

来自 C# 语言规范：

7.3.6.2 二进制数字提升 二进制数字提升发生在预定义的 +、–、*、/、%、&、|、^、==、!=、>、<、>= 和 <= 二元运算符的操作数上. 二进制数字提升隐式地将两个操作数转换为一个公共类型，在非关系运算符的情况下，它也成为运算的结果类型。二进制数字提升包括应用以下规则，按照它们在此处出现的顺序：

· 如果任一操作数为十进制类型，则将另一个操作数转换为十进制类型，或者如果另一个操作数为浮点或双精度类型，则会发生绑定时错误。

· 否则，如果任一操作数是双精度类型，则另一个操作数将转换为双精度类型。

· 否则，如果任一操作数为浮点类型，则将另一个操作数转换为浮点类型。

· 否则，如果其中一个操作数是 ulong 类型，则另一个操作数将转换为 ulong 类型，或者如果另一个操作数是 sbyte、short、int 或 long 类型，则会发生绑定时错误。

· 否则，如果其中一个操作数是 long 类型，则另一个操作数将转换为 long 类型。

· 否则，如果任一操作数为 uint 类型，而另一个操作数为 sbyte、short 或 int 类型，则这两个操作数都将转换为 long 类型。

· 否则，如果任一操作数为 uint 类型，则将另一个操作数转换为 uint 类型。

· 否则，两个操作数都转换为 int 类型。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-08T19:03:23.343

没有理由这样做。这只是一种效果或应用重载决议的规则，该规则声明其参数的第一个重载存在适合参数的隐式转换，将使用该重载。

这在 C# 规范第 7.3.6 节中说明如下：

> 数值提升不是一种独特的机制，而是将重载决议应用于预定义运算符的效果。

它继续举例说明：

> 作为数字提升的示例，请考虑二元 * 运算符的预定义实现：
> 
> 整数运算符 *(int x, int y);
> 
> uint 运算符 *(uint x, uint y);
> 
> 长运算符 *(long x, long y);
> 
> ulong 运算符 *(ulong x, ulong y);
> 
> 浮点运算符 *(float x, float y);
> 
> 双运算符 *(双 x, 双 y);
> 
> 十进制运算符 *(十进制 x, 十进制 y);
> 
> 当重载决策规则（第 7.5.3 节）应用于这组运算符时，效果是从操作数类型中选择存在隐式转换的第一个运算符。例如，对于 b * s 操作，其中 b 是一个字节，s 是一个短字节，重载决策选择 operator *(int, int) 作为最佳运算符。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-14T03:52:11.483

你的问题其实有点棘手。这个规范成为语言一部分的原因是......因为他们在创建语言时做出了这个决定。我知道这听起来像是一个令人失望的答案，但事实就是如此。

* * *

然而，真正的答案可能涉及到 1999-2000 年的许多背景决定。我确信制作 C# 的团队对所有这些语言细节进行了激烈的辩论。

> *   ...
> *   C# 旨在成为一种简单、现代、通用、面向对象的编程语言。
> *   源代码可移植性非常重要，程序员的可移植性也很重要，尤其是对于那些已经熟悉 C 和 C++ 的程序员。
> *   支持国际化非常重要。
> *   ...

[*上面的引用来自维基百科 C#*](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)

所有这些设计目标都可能影响了他们的决定。例如，在 2000 年，大多数系统已经是原生的 32 位，因此他们可能决定限制比这更小的变量的数量，因为在执行算术运算时无论如何都会在 32 位上进行转换。这通常较慢。

那时，您可能会问我；如果这些类型存在隐式转换，为什么它们仍然包含它们？如上所述，他们的设计目标之一就是便携性。

因此，如果您需要围绕旧的 C 或 C++ 程序编写 C# 包装器，您可能需要这些类型来存储一些值。在这种情况下，这些类型非常方便。

这是 Java 没有做出的决定。例如，如果您编写一个与 C++ 程序交互的 Java 程序，以这种方式接收 ushort 值，那么 Java 只有 short（已签名），因此您不能轻易地将一个分配给另一个并期望正确的值。

我让你打赌，在 Java 中可以接收这种值的下一个可用类型是 int（当然是 32 位）。你刚刚在这里把你的记忆加倍了。这可能没什么大不了的，相反，您必须实例化一个包含 100 000 个元素的数组。

事实上，我们必须记住，这些决定是通过回顾过去和未来做出的，以便提供从一个到另一个的平稳转移。

但现在我觉得我与最初的问题有分歧。

* * *

所以你的问题很好，希望我能给你带来一些答案，即使我知道这可能不是你想听到的。

如果您愿意，您甚至可以阅读更多关于 C# 规范的信息，链接如下。有一些有趣的文档可能对您来说很有趣。

[积分型](http://msdn.microsoft.com/en-us/library/aa691145%28v=vs.71%29.aspx)

[已检查和未检查的运算符](http://msdn.microsoft.com/en-us/library/aa691349%28v=vs.71%29.aspx)

[隐式数值转换表](http://msdn.microsoft.com/en-us/library/y5b434w4%28v=vs.80%29.aspx)

顺便说一句，我相信您可能应该为此奖励[habib-osu](https://stackoverflow.com/users/961113/habib-osu)，因为他通过正确的链接为最初的问题提供了相当好的答案。:)

问候

# javascript - Head.js- 何时用于提高性能（减少加载时间）？

> ID：10065289
> 
> 赞同：1
> 
> 时间：2012-04-08T18:32:22.180
> 
> 标签：javascript, head.js

Head.js 似乎是减少页面和外部 .js 文件加载时间的绝佳解决方案。但是在更快的页面加载方面的性能提升与您使用的外部脚本的大小和数量有很大关系。

什么时候使用像 Head.js 这样的实用程序才有意义？

当您的外部文件的总大小大于某个数字时？这里有一个一般规则可以遵循吗？如果可能，尽量避免使用不必要的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:40:18.213

head.js 脚本本身很小。对于任何中等复杂的 Javascript Web 应用程序，使用 head.js 可以实现性能提升，因此我不会担心在您的 Web 应用程序中包含 head.js 的额外开销。head.js 的优点是您能够以非阻塞方式加载脚本，因此即使您只包含一个 Javascript 文件也很有意义。这将防止包含此文件阻止需要完成的其余渲染和加载工作。

# c++ - 错误：“类”中没有名为“value_type”的类型

> ID：10065291
> 
> 赞同：9
> 
> 时间：2012-04-08T18:32:43.543
> 
> 标签：c++, templates

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T18:42:25.903

The comparison class should be the 3rd parameter of the `std::priority_queue` template, the second being a container (like `std::vector<typename Graph::graph<U>::vertex>`) which will have a `value_type` member.

# php - 如何“对齐”2个字符串？

> ID：10065293
> 
> 赞同：3
> 
> 时间：2012-04-08T18:33:02.180
> 
> 标签：php, objective-c, string, algorithm, alignment

首先让我解释一下我所说的“对齐”是什么意思。

假设我们必须字符串：例如 AGBCDEF ABCDIEFK

他们的“对齐”将是：

```
A - G - B - C - D -   - E - F -
A -   - B - C - D - I - E - F - K
-----------------------------------

A - ? - B - C - D - ? - E - F - ? 
```

另一个（相当简化的）示例（因为我相信我的问题可能与 NLP 有关）：

```
I give Mary a kiss
I give Ann a book
----------------------
I give X a Y 
```

你会怎么做呢？关于算法的任何想法（甚至参考）？

我可能会用 Objective-C（或 PHP）来写这个，但任何代码都会受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:44:13.070

我认为您正在寻找的是与自然语言处理的最小编辑距离。[在此处查看](http://www.let.rug.nl/kleiweg/lev/)Levenshtein 距离算法的演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:53:08.067

我认为您正在寻找的是[最长的公共子序列。](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)

# grails - Gail Maven - OSGI Bundle 作为依赖项 - 解决问题

> ID：10065294
> 
> 赞同：1
> 
> 时间：2012-04-08T18:33:07.873
> 
> 标签：grails, maven, osgi

我正在尝试使用 hector-core 作为 grails maven 构建中的依赖项。

```
<dependency>
  <groupId>me.prettyprint</groupId>
  <artifactId>hector-core</artifactId>
  <version>1.0-3</version>
  <type>bundle</type>
</dependency> 
```

我收到一个错误

```
[ERROR] Failed to execute goal org.grails:grails-maven-plugin:2.0.1:maven-compile (default) on project igiveplatform: Failed to create classpath for Grails execution. Encountered problems resolving dependencies of the executable in preparation for its execution. Failure to find me.prettyprint:hector-core:bundle:1.0-3 in http://repo.grails.org/grails/core was cached in the local repository, resolution will not be reattempted until the update interval of grails has elapsed or updates are forced

Failed to execute goal on project igiveplatform: Could not resolve dependencies 
for project com.igivefirst:igiveplatform:war:0.1-SNAPSHOT: Failure to find
me.prettyprint:hector-core:bundle:1.0-3 in http://repo.grails.org/grails/core 
was cached in the local repository, resolution will not be reattempted until the 
update interval of grails has elapsed or updates are forced 
```

该构建正在尝试下载 .bundle 文件而不是 maven 存储库中的 .jar 文件。Grails 正常构建这个项目。

提前致谢！

按照下面的建议，我删除了类型标签......现在另一个错误

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.grails:grails-maven-plugin:2.0.1:maven-compile (default) on project igiveplatform: Failed to create classpath for Grails execution.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoExecutionException: Failed to create classpath for Grails execution.
    at org.grails.maven.plugin.AbstractGrailsMojo.generateGrailsExecutionClasspath(AbstractGrailsMojo.java:427)
    at org.grails.maven.plugin.AbstractGrailsMojo.runGrails(AbstractGrailsMojo.java:225)
    at org.grails.maven.plugin.AbstractGrailsMojo.runGrails(AbstractGrailsMojo.java:206)
    at org.grails.maven.plugin.MvnCompileMojo.execute(MvnCompileMojo.java:41)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)

Caused by: org.apache.maven.artifact.resolver.ArtifactNotFoundException: Failure to find me.prettyprint:hector-core:bundle:1.0-3 in http://repo.grails.org/grails/core was cached in the local repository, resolution will not be reattempted until the update interval of grails has elapsed or updates are forced 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:46:57.143

依赖类型应该是 jar，而不是 bundle。

（看看类似的问题，[为什么 maven 找不到 osgi bundle 依赖项？](https://stackoverflow.com/questions/9932923/why-cant-maven-find-an-osgi-bundle-dependency)）

# asp.net-mvc - Dropdownlist in MVC

> ID：10065301
> 
> 赞同：0
> 
> 时间：2012-04-08T18:34:15.060
> 
> 标签：asp.net-mvc

Here is what I have in my controller:

```
 Category x = new Category(1, "one", 0);
        Category y = new Category(2, "two", 1);

        List<Category> cat = new List<Category>();
        cat.Add(x);
        cat.Add(y);

        ViewData["categories"] = new SelectList(cat, "id", "name"); 
```

My view:

```
<%= Html.DropDownList("categories")%> 
```

But, my class Category has a property named idParent. I want the dropdown to be field with values like this: ParentName -> CategoryName

```
public class Category {int idParent, string name, int id} 
```

I tried like this:

```
ViewData["categories"] = new SelectList(cat, "id", "idParent" + "name"); 
```

but it's not working. Do you have any idea?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:20:58.290

向类添加属性以`Category`返回所需的值。

```
public class Category 
{
    int idParent; 
    string name; 
    int id;

    public Category(int idParent, string name, int id)
    {
        this.idParent = idParent;
        this.name = name;
        this.id = id;
     }

    public string FormattedName
    {
        get {return string.format("{0}->{1}", this.idParent, this.name);}
    }
} 
```

然后您的 SelectList 构造函数变为：

```
ViewData["categories"] = new SelectList(cat, "id", "FormattedName"); 
```

您可能需要根据您的需要调整此代码，但它应该会给您这个想法。

# css - jQuery Ui 按钮字体大小

> ID：10065306
> 
> 赞同：3
> 
> 时间：2012-04-08T18:34:57.583
> 
> 标签：css, jquery-ui, primefaces, font-size

我最近将 Primefaces 添加到我的 WEB 应用程序中，以便使用它的 dataTable UI。所以我决定将 dataTable 的字体大小增加到 12px，而不是它自带的默认 10px。所以我将它添加到我的 CSS 中：

```
.ui-widget,         .ui-widget .ui-widget {                
font-size: 12px !important;          
} 
```

无论如何，我还使用了一个`styleclass="button"`来自 jquery.ui 的按钮，现在它也影响了 12px 字体的样式，但我想将按钮字体保持为 10px。

有没有办法修复按钮的字体大小？还是我必须在上面的代码中添加一些东西才能让它只影响数据表？

该按钮如下所示：

```
<h:commandButton id="auditButton" action="#{auditBB.actionSearch}" styleClass="button"  value="Search"></h:commandButton> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T08:04:47.357

我花了一段时间才找到它，但我找到[了这个 Stack Overflow Question](https://stackoverflow.com/questions/3380580/changing-jquery-ui-button-size)并且上面有*一些*答案。我用来解决问题的方法是将以下代码添加到我的 Css 中。

```
.ui-button,  .ui-button-text .ui-button{  
font-size: 10px !important; 
} 
```

这照顾它，感谢阅读。我希望这对某人有所帮助。=)

# grails - 更新弹簧安全用户的密码字段？

> ID：10065308
> 
> 赞同：2
> 
> 时间：2012-04-08T18:35:20.917
> 
> 标签：grails, spring-security

我在更新 User 类的密码字段时遇到问题，我在 grails 中使用 SpringSecurity 插件，看到它应该像这样完成但不起作用......

```
user.password = springSecurityService.encodePassword(
                params.password, userInstance.username) 
```

也试过

```
user.password = springSecurityService.encodePassword(
                params.password) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T22:07:51.793

如果您使用的是更新版本的插件（1.2.7 或更高版本），那么您不希望像您正在做的那样明确编码密码，因为 User 类中生成的代码会为您完成。仅`springSecurityService.encodePassword`在您的域类没有调用时才调用，否则您将进行双重编码并且无法登录。

如果您自己对密码进行编码，那么您显示的第一个版本使用用户名作为盐，第二个版本没有盐。加盐密码是一个好主意，但不是必需的 - 您可以在文档第 12.2 节中阅读它 - [http://grails-plugins.github.com/grails-spring-security-core/docs/manual/](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:21:36.370

您可能想看看 Grails Spring Sec 插件的作者在他的 ui 插件中是如何做到的

[https://github.com/grails-plugins/grails-spring-security-ui/blob/master/grails-app/controllers/grails/plugins/springsecurity/ui/UserController.groovy](https://github.com/grails-plugins/grails-spring-security-ui/blob/master/grails-app/controllers/grails/plugins/springsecurity/ui/UserController.groovy)

# php - Need to get most recent date of category change (post addtion, modification) for 10000 categories

> ID：10065310
> 
> 赞同：2
> 
> 时间：2012-04-08T18:35:30.510
> 
> 标签：php, mysql, database

I have 10000 categories of posts and 1200000 posts (each post has publication dae). I want to get date of most recent post for each category using one or two SQL queries. This is structure of database:

```
Categories
+--+----+
|id|name|
+--+----+

CategoriesToPosts
+--------+----+
|category|post|
+--------+----+

Posts
+--+------------+-   -+
|id|lastModified| ... |
+--+------------+-   -+

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:39:03.423

Use a JOIN, GROUP BY and MAX:

```
SELECT
    CategoriesToPosts.category,
    MAX(Posts.lastModified) AS lastModified
FROM CategoriesToPosts
LEFT JOIN Posts
ON Posts.id = CategoriesToPosts.post
GROUP BY CategoriesToPosts.category 
```

# boost - Passing a boost::bimap between functions

> ID：10065312
> 
> 赞同：0
> 
> 时间：2012-04-08T18:36:00.463
> 
> 标签：boost, bimap

I'm new to the bimap functionality of the Boost libraries, and I'm having trouble passing a bimap into another function. My bimap looks like this:

```
typedef boost::bimap< int, int > bimap_type;
bimap_type bm; 
```

I have an add_values() function that adds a set of values to the bimap:

```
add_values(int a, int b)
{
 bm.insert(bimap_type::value_type(a, b));
} 
```

I then have a function that is meant to set the values of the bimap by getting them from a Singleton Class:

```
void set_values()
{
 MyClass::instance()->get_values(bm);
} 
```

And, in MyClass, get_values() looks like this:

```
void get_values(bimap_type myBimap)
{
 myBimap.add_values(3, 5);
} 
```

However, MyClass does not recognise 'bimap_type'. I try putting the typedef in a separate header file and including that in MyClass, but I get the error message:

```
'class bimap_type' has no member named 'add_values' 
```

How can I successfully pass the bimap to this Singleton Class in order to fill it with values from the Class? Does anyone know?

Thanks a lot.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:24:37.227

呃，[boost::bimap](http://www.boost.org/doc/libs/1_49_0/libs/bimap/doc/html/boost_bimap/reference/bimap_reference.html)本身没有`add_values`方法，从这些代码片段中很难判断为什么你会突然期待一个方法出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:27:56.887

考虑重命名您的函数：调用 get_values() 的 set_values() 调用 add_values() 是一个令人困惑的调用链......

当您需要修改函数中的对象时，您必须通过引用（或指针）来获取它。这个想法是您必须在函数内部和外部使用相同的对象。如果您按值传递，函数将看到一个副本，因此它对它所做的任何事情都不会反映在原始对象上。

```
// formerly known as add_values()
void initialize(bimap_type& bm, int a, int b)
{
    bm.insert(bimap_type::value_type(a, b));
} 
```

这就是你将如何称呼它：

```
initialize(myBitmap, 3, 5); 
```

确保更新您的整个调用链以在适当的情况下通过引用传递，因为目前您的 get_values() 也适用于副本。

# apache - Getting primefaces p:fileUpload to work under google appengine

> ID：10065313
> 
> 赞同：1
> 
> 时间：2012-04-08T18:36:00.220
> 
> 标签：apache, google-app-engine, jsf, jsf-2, primefaces

I've read that it is possible to get primefaces fileUpload to work with google appengine with a bit of tweaking. It requires apache fileupload and common io, so I added commons-fileupload-1.2.2.jar and commons-io-1.3.2.jar to my WEB-INF/lib folder.

Then following the instructions of primefaces, I added their servlet:

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    <init-param>
        <param-name>thresholdSize</param-name>
        <param-value>2147483647</param-value>
    </init-param>       
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

The thresholdSize is put purposefully high because it is the number of bytes by which the file will be saved to disk rather than retain it in memory, and since no files can be saved using google appengine, it can never be an option.

The actual usage is as follows:

```
<h:form enctype="multipart/form-data">
    <!-- Other text fields go here -->
    <p:fileUpload fileUploadListener="#{tjBean.onHandleFileUpload}"  
        mode="advanced"  
        update=":toolbarForm:globalMessages"  
        sizeLimit="500000"   
        allowTypes="/(\.|\/)(txml)$/" /> 
<p:commandButton value="Okay" ajax="false" actionListener="#{tjBean.onSaveAction}" />
</h:form> 
```

I've understood that the commandButton must not use ajax and that it must be a full page reload. It seems to let me upload the file without a hitch, but the actionListener never gets triggered. Submitting then the form with the commandButton triggers an exception:

```
java.lang.NoClassDefFoundError: Could not initialize class org.apache.commons.fileupload.disk.DiskFileItem
    at org.apache.commons.fileupload.disk.DiskFileItemFactory.createItem(DiskFileItemFactory.java:199)
    at org.apache.commons.fileupload.FileUploadBase.parseRequest(FileUploadBase.java:361)
... 
```

I'm not sure what I'm doing something wrong or I simply did not get the appropriate versions of the apache libraries to make this work properly. The version of primefaces that I'm using is 3.2\. When I search for a solution to this problem, the common response is that google appengine doesn't like the fact that I'm trying to save a file to the disk, and the solution is simply to increase the threshold, but the threshold is as high as it can be, so it shouldn't even be *attempting* to save the file to disk.

I'd appreciate any help or suggestions, especially if the solution is glaringly obvious and I have yet to see it. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:01:38.447

通过覆盖 Apache 文件上传库 1.2.2 的 DiskItem 修复了该问题。

具体来说，注释了静态字符串 UID（它使用列入黑名单的类 java.rmi.server.UID）和 write 方法的全部内容（我将阈值设置得很高，因此它永远不需要调用它）。

显然这不是理想的解决方案，但只要我不需要更新文件上传库，它就可以工作，我怀疑我在不久的将来需要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:19:06.500

尼尔，你不能写入磁盘（即你不能在 GAE 上使用 fileupload.disk）。

App Engine 文件系统对于您的应用程序始终是只读的。您可能会考虑的几个替代方案是：

*   [Blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview)
*   [谷歌云存储](https://developers.google.com/appengine/docs/java/googlestorage/overview)

另外，看看这个： http: [//primefaces-rocks.appspot.com/ui/fileUploadSimple.jsf](http://primefaces-rocks.appspot.com/ui/fileUploadSimple.jsf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T09:45:55.697

@尼尔

我很抱歉，但我无法发表评论。你能告诉我你是如何改变方法的吗

```
getTempFile() {
        if (tempFile == null) {
            File tempDir = repository;
            if (tempDir == null) {
                tempDir = new File(System.getProperty("java.io.tmpdir"));
            }

            String tempFileName = format("upload_%s_%s.tmp", UID, getUniqueId());

            tempFile = new File(tempDir, tempFileName);
        }
        return tempFile;
    } 
```

你用什么代替了UID？

# java - Hadoop Combiner Class for Text

> ID：10065314
> 
> 赞同：0
> 
> 时间：2012-04-08T18:36:06.850
> 
> 标签：java, map, hadoop, reduce, combiners

I'm still trying to get an intuition as to when to use the Hadoop combiner class (I saw a few articles but they did not specifically help in my situation).

My question is, is it appropriate to use a combiner class when the value of the pair is of the Text class? For instance, let's say we have the following output from the mapper:

```
fruit apple
fruit orange
fruit banana
...
veggie carrot
veggie celery
... 
```

Can we apply a combiner class here to be:

```
fruit apple orange banana
...
veggie carrot celery
... 
```

before it even reaches the reducer?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T00:58:16.970

组合器通常适用于您对数据执行某种形式的聚合、最小值、最大值等操作的问题 - 这些值可以在组合器中为地图输出计算，然后在归约器中再次为所有组合输出计算. 这很有用，因为这意味着您不会在映射器和减速器之间通过网络传输所有数据。

现在没有理由不能引入组合器来累积为每个键观察到的值的列表（我假设这就是您的示例所显示的），但是有些事情会使它变得更棘手。

如果您必须`<Text, Text>`从映射器输出对，并`<Text, Text>`在化简器中使用，那么您的组合器可以轻松地将值列表连接在一起并将其输出为文本值。现在在你的 reducer 中，你可以做同样的事情，将所有值连接在一起并形成一个大输出。

如果您想对输出列表进行排序和去重，您可能会遇到问题 - 因为组合器/归约器逻辑需要将 Text 对象重新标记为单词，对列表进行排序和去重，然后重建单词列表。

直接回答你的问题 - 什么时候合适，我可以想到一些例子：

*   如果您想查找与每个键关联的字典最小或最大值
*   每个键都有数百万个值，并且您想“随机”采样一小部分值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T08:29:48.480

当有使用交换或关联方法的情况时使用组合器类。交换例子：

abc=cba 在组合任务执行期间执行 (a*b=d),c 然后将 d,c 的值发送到减速器。现在，reducer 必须只执行一项任务而不是两项任务，即 a*b = d d*c 才能获得最终答案。如果你使用组合器只需要做 d*c。

同样，对于关联 (a+b)+c = a+(b+c) 关联（分组）和交换（移动）结果在乘法或加法方面不会有所不同。组合器主要用于遵循关联和交换的结构化数据。

合路器的优点：

*   它减少了 Map 和 reducer 之间的网络 I/O
*   它减少了减速器中的磁盘 I/O，因为它是在 Comabiner 中执行的一部分。

# java - JScrollPane 不起作用.. 为什么？

> ID：10065317
> 
> 赞同：0
> 
> 时间：2012-04-08T18:36:19.533
> 
> 标签：java, swing, layout, jscrollpane

我有一个有两个内部框架的框架。我创建了一个“Board”对象，它是 Board 类的一个实例。Board 类扩展了 JPanel。

```
class Layout extends JFrame{
   Dimension dimen=Toolkit.getDefaultToolkit().getScreenSize();
   public initializeWindows(){
       JInternalFrame dev=new JInternalFrame("Devices",true,true,false,false);
       JInternalFrame cir=new JInternalFrame("Circuit",true,true,false,false);
       Board b=new Board();
       cir.add(b);
       JScrollPane scroll=new JScrollPane(b);
       this.add(dev);
       this.add(cir);

       dev.setVisible(true);
       dev.setSize(150,650);
       dev.setLocation(0,100);
       dev.pack();

       inf.setVisible(true);
       inf.setPreferredSize(new Dimension((int)(dimen.width*0.88),(int)(dimen.height*0.75)));
       inf.setLocation(150,100);
       inf.setBackground(Color.WHITE);
       inf.pack();

   } 
```

但是滚动窗格没有出现。为什么是tat？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:39:44.283

因为您没有将其添加`JScrollPane`到内部框架中。

您实际上是在`Board`将`JInternalFrame cir`and 添加到`JScrollPane`while 您应该执行类似的操作

```
JInternalFrame cir=new JInternalFrame("Circuit",true,true,false,false);
Board b=new Board();
JScrollPane scroll=new JScrollPane(b);
cir.add(scroll)
this.add(cir); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:49:17.250

请设置`cir.setVisible(true)`而`cir.add(scroll)`不是`cir.add(b);`

如果您希望滚动条始终可见，您可以使用

```
scroll = JScrollPane(b,
  ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS,
  ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS) 
```

# c++ - 如何收集和存储tellp()、tellg()返回类型？

> ID：10065323
> 
> 赞同：2
> 
> 时间：2012-04-08T18:37:36.177
> 
> 标签：c++, file, type-conversion, long-integer, fstream

我正在编写一个在文件中维护linked_list 的程序。因此，我通过使用tellp()/tellg() 遍历文件并将其添加到特定的长整数（可以看作是偏移量）以到达新位置。

一个简单的例子是

```
 long next_offset =  sizeof(long) + sizeof(int) .... 
   //like size of all the elements in the record, etc

   curr_node = out.seekg();
   while(curr_node != -1) {
          out.read(...);
          **curr_node.seekg(curr_node.tellp() + next_offset);**
          out.read((char *)&curr_node,sizeof(long));
   } 
```

所以在这里基本上我将tellp（）值保存为long和dng一个长加法，这可以吗？或者当 pos_value 变大时我可能会丢失一些位？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:18:35.340

tellp/tellg (streampos) 返回的这些值用于存储您正在使用的平台中的最大文件大小，因此不能保证它们适合 long。事实上，它们可能不适合 size_t、long long 或任何最大的基本类型，因为磁盘存储空间通常比地址空间大几个数量级，并且基本类型是为后者定义的。

但是 IMO 实际要做的事情是不要使用另一种更大的类型，除非你正在编写一个真正需要处理大文件的程序（比如 DBMS 左右），这是一种罕见的情况。如果最大预期大小适合很长，只需在您的程序中添加安全措施以拒绝创建或处理大于该大小的文件。

另一方面，如果确实是这种情况，您可能必须处理大量文件，那么事情就会变得更加复杂，并且全面的答案会更长。

# sql - SQL - 选择单个字段的最大值而不是全部

> ID：10065326
> 
> 赞同：0
> 
> 时间：2012-04-08T18:37:41.397
> 
> 标签：sql, postgresql

运行一个查询，该查询应返回所有未解决的问题以及它们更新的最后更新时间。

其工作方式是将问题插入到 Question 表中，并将更新/答案插入到 qUpdate 表中，并使用原始问题的外键将它们关联起来。

这是我现在写的查询，但这不是我想要的：

```
SELECT MAX (qUpdate.UpdateTime) AS LastUpdateTime, Question.ID FROM Question
LEFT JOIN qUpdate ON qID = qUpdate.qID WHERE Status = 'open'GROUP BY Question.ID, Question.Status; 
```

结果：

```
 lastupdatetime     id
    2012-12-21 20:37:00;7
    2012-12-21 20:37:00;10
    2012-12-21 20:37:00;1000
    2012-12-21 20:37:00;5
    2012-12-21 20:37:00;2
    2012-12-21 20:37:00;9 
```

如您所见，它返回所有问题的最新更新，而不是每个问题的最新更新。我明白为什么，但我不知道如何解决这个问题。

对不起，我的解释有点模棱两可..

基本上：

目前，无论特定问题的更新时间是多少，它都会返回最后更新时间，即它找到所有问题的最大最后更新时间，并为所有打开的问题返回它......

我想做的是列出所有未解决的问题以及该特定工单的最后更新时间。

**我正在使用 Postgresql**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:44:15.427

看起来这是你的问题：

```
LEFT JOIN qUpdate ON qID = qUpdate.qID 
```

应该是这样的：

```
LEFT JOIN qUpdate ON qID = Question.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:44:28.430

试试这个。您不需要按状态分组。

```
SELECT MAX (qUpdate.UpdateTime) AS LastUpdateTime, Question.ID FROM Question
LEFT JOIN qUpdate ON qID = qUpdate.qID WHERE Status = 'open' GROUP BY Question.ID; 
```

# javascript - Forefox 和 Chrome 之间的 HTMLCollection.namedItem() 行为区别？

> ID：10065330
> 
> 赞同：0
> 
> 时间：2012-04-08T18:38:54.027
> 
> 标签：javascript, firefox, dom, google-chrome

[DOM4 规范](http://www.w3.org/TR/dom/#interface-htmlcollection)说 namedItem() 应该从集合中返回第一个具有 ID 或名称的元素。

我观察到 Firefox 行为正确，但 chrome 在 NodeList 对象中返回所有匹配的 Element 对象。

chrome 在 namedItem() 方法方面是否违反标准？

```
var hc = document.images
hc.length; //3
hc.namedItem("logo"); // 2 images with name="logo"

Object.prototype.toString.call(hc.namedItem("logo"))

Firefox -> "[object HTMLImageElement]"
Chrome ->  "[object NodeList]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T23:09:51.893

是的，Chrome 在这里违反了标准。

# eclipse - Flow Panel in a Dock Layout Panel issue

> ID：10065333
> 
> 赞同：1
> 
> 时间：2012-04-08T18:39:24.400
> 
> 标签：eclipse, gwt, webpage, gwt-widgets

I am working on a project that uses Google Web Toolkit (GWT). I am using a dock layout panel to layout a webpage. In the CENTER, I have a flow panel that adds a set of children with different sizes. When the number of widgets becomes large, then CENTER panel doesn't re-size to include these new widgets. How can I make the dock layout panel resize the center panel so that all the children widgets of the flow panel in the center panel are all shown clearly? I would greatly appreciate it if anyone could provide some information on this. I know that the dock layout panel uses absolute positioning but the flow panel I have is set to dynamically resize when the flow panel has multiple widgets.

Thanks,

MPH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:12:08.153

在 rootlayout 面板 den 上添加 docklayout 面板，它将正确调整大小：

DockLayoutPanel p = new DockLayoutPanel(Unit.EM);

/*添加NSEW组件*/

RootLayoutPanel rp = RootLayoutPanel.get();

```
rp.add(p); 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T01:18:38.650

GWT`***LayoutPanel`小部件的目的是在每个浏览器中提供可预测的、像素完美的布局，因此 DockLayoutPanel 无法调整其中心组件的大小。您的 N、S、E、W 组件具有固定大小。您如何期望 DockLayoutPanel 保持这些组件大小*并*调整中心组件的大小以适应内部不断增长的内容？

# c++ - CDialog *m_pages[6]; vs CDialog *m_pages = new CDialog[6];?

> ID：10065334
> 
> 赞同：0
> 
> 时间：2012-04-08T18:39:27.637
> 
> 标签：c++, visual-c++, mfc

不知道为什么我不能使用 CDialog 并在 cpp 文件中设置内存空间。它仅适用于头文件。这不是一样的吗？？？谢谢

* * *

头文件：

```
public:
    CDialog *m_pages[6];  // this works 
```

* * *

头文件：

```
CDialog *m_pages; 
```

.cpp 文件

```
m_pages = new CDialog[6];  //this fails 
```

* * *

在看到我做错了什么之后（第一张海报：“创建一个包含六个指向 CDialog 的指针的数组”）。这就是我错过的：（现在它起作用了！）

```
CDialog **m_pages = new CDialog*[6]; //double pointer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:46:39.993

检查[文档](http://msdn.microsoft.com/en-us/library/8zkyyhxw%28v=vs.80%29.aspx)。CDialogs 在其构造函数中至少需要一个参数，这就是为什么您不能在第二个示例中分配它们，因为它们没有默认构造函数。

在您的第一个示例中，您正在创建一个包含六个指向`CDialog`. 这与 6 的数组完全不同`CDialog`，这是您在第二个中尝试分配的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:04:21.557

这些 decl 非常不同：这`CDialog *m_pages[6];`是一个包含 6 个*指向*CDialog 的指针的数组，而`m_pages = new CDialog[6];`它是一个包含 6 个 CDialog 的数组。

要使用第二个声明，我认为您可以执行类似的操作

```
#include <iostream>
using namespace std;

struct Object  {
    Object(int id) : id(id) {}
    int id;
};

void main_construct_vector()
{
    Object *a = new Object[2] {Object(1), Object(2)};
    cout << a[0].id << ' ' << a[1].id << endl;
} 
```

该代码按预期输出

```
1 2 
```

当然，这不是通常的方式......

# phpfox - Is it possible to install website made in php fox on localhost?

> ID：10065337
> 
> 赞同：2
> 
> 时间：2012-04-08T18:39:37.090
> 
> 标签：phpfox

I have website made in php_fox framework and my client want some changes on website but he don't want that changes on his server directly so firstly i have install that website on my localhost. so is it possible to install that website on localhost??? because right now i am getting 505 internal server error :(

Thanks, Ruchita

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:47:44.467

是的，您只需从 apache 模块（wamp）激活 apache 中的**rewrite_module**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:17:04.977

请检查您的*`server.sett.php (\include\setting)`*

```
search $_CONF['core.url_rewrite'] 
```

*此变量的值在localhost*应为 2

 *```
$_CONF['core.url_rewrite'] = '2'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T09:39:02.820

请检查您的`server.sett.php (\include\setting)`

1.  更改以下内容`$_CONF['core.host'] = 'localhost';`
2.  将此编辑`$_CONF['core.folder'] = '/';`为`$_CONF['core.folder'] = '/<your_phpfox_dir>/';`
3.  并编辑`$_CONF['core.url_rewrite'] = '2';`
4.  另外配置数据库设置
5.  删除里面的所有东西`\file\cache`

现在在您的 localhost 中运行 phpfox 实例。*

# java - 将两个数组放在一起

> ID：10065342
> 
> 赞同：0
> 
> 时间：2012-04-08T18:40:13.707
> 
> 标签：java, android, arrays

我正在为 android 开发一个游戏，这个游戏读取一个 int[] 数组并从中形成一个地图

现在我想向这个数组随机添加更小的数组但是我该怎么做我没有任何线索

我在这里搜索过，但没有找到好的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:42:44.283

如果您需要多次执行此操作，则数组不是一个好的选择，因为它们具有固定大小，并且每次增加其大小时都必须重新分配。此外，您必须将旧数组中的值复制到新的更大的数组中。

来看看吧[`ArrayList<Integer>`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)。

如果这是您不时做的事情，您应该执行以下操作

```
int[] oldArray = new int[Y];
int[] smallArray = new int[X];
int[] newArray = Arrays.copyOf(oldArray,X+Y);
for (int i = Y; i < X+Y; ++i)
  newArray[i] = smallArray[i-Y]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:54:50.060

您可以使用

```
Vector<String> vec = new Vector<String>();
vec.add("a");
vec.add("b); 
```

假设这是带有两个数据的旧向量（或数组）。

如果您想添加更多数据或想要添加另一个数组。

```
for(int i=0;i<arr.length;i++)
{
    vec.add(arr[i]);
} 
```

您还可以使用获取向量的长度

```
 int i=vec.size(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:45:27.420

在 Java 中，数组的大小不会改变。您必须创建新的更大/更小的数据并复制数据。 [这](http://www.exampledepot.com/egs/java.lang.reflect/ExpandArray.html)可能会有所帮助。

# objective-c - iOS 检测 Tab 是否被改变

> ID：10065346
> 
> 赞同：1
> 
> 时间：2012-04-08T18:40:55.733
> 
> 标签：objective-c, ios5

我有标签的 iOS 应用程序。我需要知道哪个选项卡处于活动状态并检测选项卡何时更改。在情节提要中，我有一个选项卡视图控制器，当您单击选项卡时它会更改视图。我创建了一个类`TabBarController`，它的定义如下：

标题

```
@interface TabBarController : UITabBarController <UITabBarControllerDelegate>

@end 
```

执行

```
#import "TabBarController.h"

@implementation TabBarController

// In the initialization section, set the delegate
- (id) init
{
    self = [super init];
    if (self) 
    {
        self.delegate = self;
    }
    return self;
}

- (void)tabBarController:(UITabBarController *)tabBarController 
 didSelectViewController:(UIViewController *)viewController
{
    NSLog(@"controller class: %@", NSStringFromClass([viewController class]));
    NSLog(@"controller title: %@", viewController.title);
}

@end 
```

但是，我无法使用上面的代码检测选项卡更改。你认为问题是什么？

我没有将我的选项卡视图链接到任何网点，而是连接到其他视图。这是问题吗？那么，我应该将我的插座链接到哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:58:33.860

您是否确认`init`正在调用您的方法？我不认为`init`它是指定的初始化程序，`UITabBarController`并且在从 nib/storyboard 加载控制器时可能不会被调用。

如果是这种情况，您可能会发现在您的中设置委托更容易，`viewDidLoad`因为无论对象如何初始化，都会调用该委托，或者确保您在何时`-initWithNibName:bundle:`或`-initWithCoder`用于实例化对象时设置委托。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-24T14:56:50.360

**对此的解决方案是实现 viewDidLoad，如下所示：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    NSLog(@"Tabs showed up!");
    self.delegate = self;
} 
```

# c# - 使用 SqlDataReader 从连接表中获取值

> ID：10065354
> 
> 赞同：3
> 
> 时间：2012-04-08T18:41:27.387
> 
> 标签：c#, .net, sql-server, ado.net, sqldatareader

假设我们在数据库中有两个表，`user`（FK id_role）和`role`（PK 角色）。我们需要阅读有关用户及其权限的信息。

我使用以下 SQL 语句来执行查询：

```
SELECT * 
FROM [user] 
INNER JOIN role ON [user].id_role = role.id 
WHERE login = @login 
```

执行后，我尝试使用字符串索引器读取阅读器中的值：`reader[string name]`。

我需要解决的问题是重复名称：两者都`user`包含`role`，例如，字段`id`，我可以为用户读取（使用`reader["id"]`），但无法读取角色（使用`reader["role.id"]`）。

该属性`FieldCount`返回 12，这意味着已读取所有必填字段（`user`包含 6 个字段，也是如此`role`）。

在这种情况下，我是否可以按名称读取列？或者以唯一的方式使用两个查询或 SQL 'as' 运算符？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T18:47:57.523

您始终可以显式选择列并为其设置别名：

```
SELECT user.id AS user_id, user.*, role.id AS role_id, role.* 
FROM [user] 
INNER JOIN role ON [user].id_role = role.id 
WHERE login = @login 
```

然后用`reader["user_id"]`和选择它们`reader["role_id"]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:48:24.747

唯一可靠的方法是`AS`在 SQL 查询中使用以确保您的列名/别名是唯一的......否则您将通过索引（0 / 1 / 2 等）而不是名称来访问字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T18:48:37.110

```
SELECT role.id as RoleId, user.id as UserId
FROM [user] 
INNER JOIN role ON [user].id_role = role.id 
WHERE login = @login 
```

使用 AS

```
reader["RoleId"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T18:49:13.990

当然，您应该按名称选择列，但您需要这样做：

```
SELECT u.id as uid, r.id as rid, ... , FROM [user] u INNER JOIN role r ON [user].id_role = role.id WHERE login = @login 
```

使用**, ... ，** 我想选择两个表的剩余列。

最后，使用 reader["uid"]、reader["rid"] 等。

# ios5 - 使用 iOS5 将横向图像设置为 uinavegationBar

> ID：10065356
> 
> 赞同：0
> 
> 时间：2012-04-08T18:41:33.417
> 
> 标签：ios5, landscape-portrait

我正在开发具有横向和纵向两种位置的 iOS 应用程序。

使用 iOS5，我想将背景图像设置为自定义 UINavegationBar。

我用的是：

```
if([self.navBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {

    [self.navBar setBackgroundImage:[UIImage imageNamed:@"TabBarContactsPort.png"]  forBarMetrics:UIBarMetricsDefault];
    [self.navBar setBackgroundImage:[UIImage imageNamed:@"TabBarContactsLand.png"]  forBarMetrics:UIBarMetricsLandscapePhone];
} 
```

我在 viewDiLoad 方法中编写了这段代码，它适用于纵向，但在横向模式下使用相同的图像。

请帮助我和thaaanks。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:51:49.200

有条件地设置背景图像如下：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];

  if (UIDeviceOrientationIsLandscape(toInterfaceOrientation)) {
        [self.navBar setBackgroundImage:[UIImage imageNamed:@"TabBarContactsLand.png"]  forBarMetrics:UIBarMetricsLandscapePhone];
    }
    else if (UIDeviceOrientationIsPortrait(toInterfaceOrientation)) {
        [self.navBar setBackgroundImage:[UIImage imageNamed:@"TabBarContactsPort.png"]  forBarMetrics:UIBarMetricsDefault];
    }
} 
```

希望能帮助到你。

# c# - 通过其节点c#读取xml文件

> ID：10065357
> 
> 赞同：-1
> 
> 时间：2012-04-08T18:41:39.280
> 
> 标签：c#, asp.net, .net, xml, webforms

我想读取一个 XML 文件，然后将其显示到网页上，但我无法在 for 循环中执行此操作

```
XmlDocument doc = new XmlDocument();
doc.Load(@"c:/xmldatabase.xml");
XmlElement root = doc.DocumentElement;
XmlNodeList nodes = root.SelectNodes("//User");

foreach (XmlNode node in nodes)
{
    Label1.Text = node["Name"].InnerText;
    Label3.Text = node["Contact"].InnerText;
    Label4.Text = node["Email"].InnerText;
    Label2.Text = node["City"].InnerText;
    Label5.Text = node["Country"].InnerText;
} 
```

我的 XML 有数据！

```
<?xml version="1.0"?>
<User-Profile>
  <User>
    <Name>Jhon</Name>
    <Contact>4567897632</Contact>
    <Email>pri@dfdcm.com</Email>
    <City>xyz</City>
    <Country>abc</Country>
  </User>
    <User>
    <Name>Mike</Name>
    <Contact>8888888</Contact>
    <Email>acvb@dfdcm.com</Email>
    <City>xrtty</City>
    <Country>abffff</Country>
  </User>
  <User>
    <Name>Stone</Name>
    <Contact>875467</Contact>
    <Email>dfttgh@dfdcm.com</Email>
    <City>dfvbnj</City>
    <Country>ddccvv</Country>
  </User>
</User-Profile> 
```

我想使用循环或任何东西显示所有数据并将这些数据分配给我的网页标签是否可能？这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:53:39.783

你应该做的是使用中继器。然后，您可以在 foreach 循环中为每个用户添加一个列表，并使用该列表填充您的转发器。有关中继器以及如何填充它们的详细信息，请参阅[http://msdn.microsoft.com/en-us/magazine/cc163780.aspx](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T00:25:40.943

请在 c# 中使用“PlaceHolder”。您可以轻松拖放 PlaceHolder :) 然后使用此代码

```
foreach (XmlNode node in nodes)
{
  PlaceHolder1.Controls.Add(new LiteralControl("<table><tr><td>" + node["Name"].InnerText + "</td><td>"+node["Contact"].InnerText+"</td><td>"+node["Email"].InnerText+"</td><td>"+node["City"].InnerText+"</td><td>"+node["Country"].InnerText+"</td></tr></tabel>")); 
} 
```

重要提示：- 代码上方缺少一些文本。请与下图比较。然后您可以开发最佳代码。:)[图片](http://i.stack.imgur.com/eUQds.jpg)

# c# - 是否可以在循环中构建和新建结构？

> ID：10065361
> 
> 赞同：0
> 
> 时间：2012-04-08T18:42:20.247
> 
> 标签：c#

我想知道我怎样才能走过这个循环？这有一个根两个 chldren priv 和 nonpriv 以及它们的孩子 priv:0,1,2,...,1023 和 Nonpriv 的孩子：1024,..,65535

```
 |Any______________PORT|
                 |              |
             |Priv|          |Non-Priv|
            |||||...||||   ||||....|||||
            0123,.....1023 1024,...65535 
```

我的意思是 0 在不同的节点中 1 在不同的节点中 2 在不同的节点中 这些端口有父 PRIV 我区分它们的原因是也许有一天 0 会有
他们可能在列表中的子列表和我们可以有一个节点列表，或者它们可以在一个字符串列表中，但是我无法决定接下来要对字符串列表做什么，并且节点列表的问题在于我无法构建节点的 for 循环

现在我无法配置 for 循环我应该如何更正我的代码？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace IDS
{
    class Program
    {
        static void Main(string[] args)
        {
            Node root = new Node("Any_PORT");
            List<Node> portcat = new List<Node>();
            Node Priv = new Node("Priv");
            Node NonPriv=new Node("Non-Priv");
            root.setchildren(portcat);
            root.Thisisroot();
            root.setNodeinlist(Priv);
            root.setNodeinlist(NonPriv);
            Priv.setparent(root);
            NonPriv.setparent(root);
            List<Node> portsP = new List<Node>();
            Priv.setchildren(portsP);
            for (int i = 0; i < 1024; i++)
            {

            }
    //I tried this one but I can't fix between Nodes and list of a string        
    List<string> portsN = new List<string>();
            for (int i = 1024; i < 65535; i++)
            {
                portsN.Add(i.ToString());
            }
        }

        public class Node
        {
            public string Data;
            public List<Node> Children = new List<Node>();
            public Node parent;
            public Node(string r)
            {
                this.Data = r;
             }
            public Node Thisisroot()
            {
                this.parent = null;
                return this;
            }
            public void setchildren(List<Node> list)
            {
                this.Children = list;
            }
            public List<Node> getchildren()
            {
                return this.Children;
            }
            public void setparent(Node p)
            {
                this.parent = p;
            }
            public Node getparent()
            {
                return this.parent;
            }
            public void setNodeinlist(Node n)
            {
                this.Children.Add(n);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:44:26.593

您应该使用集合来保存对象，例如列表：

```
List<Node> nodes = new List<Node>();
for (int i = 0; i < 1024; i++)
{
    nodes.Add(new Node(i.ToString()));    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:44:43.693

你需要`List<Node>`而不是`List<string>`.

LINQ 寻求帮助：

```
IList<Node> nodes = Enumerable.Range(1024, 65535)
                              .Select(i => new Node(i.ToString))
                              .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T18:45:03.757

如果您指定变量名称，它将保存最后一次迭代的值，并且不会在循环外可见。您需要有一个节点类型对象的列表，然后在该列表中您可以在循环内添加类型节点的实例

```
List<Node> nodeList = new List<Node>()

     for (int i = 0; i < 1024; i++)
                {
                nodeList.Add(new Node(i.ToString()));    
                } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T18:53:14.370

也许您的意思是像这样手动构建一个列表：

```
Node first;
Node lastCreated = null;
for (int i = 0; i < 1024; i++)
{
    Node n = new Node(i.ToString());
    if(i == 0)
        first = n;
    n.parent = lastCreated;
    lastCreated = n;
} 
```

你仍然需要在每个项目中有另一个参考，如下所示：

```
class Node{
    public string Data;
    public Node parent;
    public Node child;
    public Node(string r)
    {
        this.Data = r;
     }
} 
```

然后

```
Node first;
Node lastCreated = null;
for (int i = 0; i < 1024; i++)
{
    Node n = new Node(i.ToString());
    if(i == 0)
        first = n;
    n.Parent = lastCreated;
    if(lastCreated != null)
        lastCreated.child = n;
    lastCreated = n;
} 
```

# java - Java 服务器在 Centos 5 中启动时挂起

> ID：10065364
> 
> 赞同：1
> 
> 时间：2012-04-08T18:42:34.940
> 
> 标签：java, struts2, centos, embedded-jetty, appassembler

因此，我正在使用嵌入式码头和 maven app-assembler 插件运行 Web 服务器。当我直接调用 app-assembler 应用程序（以 root 身份运行）时，服务器启动正常。即使在 nohup 下运行，Web 服务器也可以完全正常启动。

当我将 app-assembler 脚本注册为 init.d 脚本（Runlevels 235 / Start pri 98 / Stop pri 20 ）并使用 service 命令运行 init.d 脚本时，Web 服务器在启动期间挂起。

应用程序挂起的地方是在 Struts 2 约定插件中的类路径扫描期间。

如果我使用 'kill -QUIT' 杀死 Web 服务器，代码看起来就像卡在 Unix 文件系统中：

```
"main" prio=10 tid=0x09add800 nid=0xb33 runnable [0xb7361000]
   java.lang.Thread.State: RUNNABLE
        at java.io.UnixFileSystem.getBooleanAttributes0(Native Method)
        at java.io.UnixFileSystem.getBooleanAttributes(UnixFileSystem.java:228)
        at java.io.File.isDirectory(File.java:754) 
```

我做了一些研究，似乎 NFS、java 和文件系统访问可能存在性能问题。

我遇到的问题是我们没有在我们的服务器上运行 NFS，据我所知，我们正在以相同的方式由同一个用户运行应用程序。

即使模仿服务命令的工作方式（在脚本启动之前运行'env -i'），直接运行脚本也不会挂起。

寻找解决此问题的任何建议或指示，或解决此问题的任何方法。

**更新 (4/8/12)**

我正在使用 Sun(Oracle) JDK 1.6.0_31

```
/usr/java/latest/bin/java -version  
java version "1.6.0_31"  
Java(TM) SE Runtime Environment (build 1.6.0_31-b04)  
Java HotSpot(TM) Server VM (build 20.6-b01, mixed mode) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:43:20.170

所以，我想通了这个问题。看起来我看到的线程卡在文件系统操作中的问题是由于递归符号链接，Java 将无限期地遵循。从 Unix 系统的根目录开始的任何扫描，遵循符号链接，都应该导致相同的问题（100% 的 CPU 使用率，并且文件扫描挂起）。

问题最终是服务脚本从根目录运行，调用脚本直接从我当前的工作目录开始。我修改了我的启动脚本，在运行之前移动了应用程序组装脚本的根，一切都很好。

# html - Rails 3 - link_to() - 在单个链接中需要多个带有单独 HTML/CSS 类的文本段

> ID：10065377
> 
> 赞同：1
> 
> 时间：2012-04-08T18:44:31.363
> 
> 标签：html, css, ruby-on-rails-3, actionview

我正在使用`link_to`. 链接文本具有以一种 CSS 样式格式化的前缀部分和以不同 CSS 样式格式化的根部分。例如：

**预处理***_*

我已经能够通过两个背靠背的`link_to`语句粗略地实现这一点：

```
<div class="dual-format-link">
    <%= link_to 'pre', compound_path, :class => "prefix-style" %><%= link_to 'process', compound_path, :class => "root-style" %>
</div> 
```

不幸的是，翻转效果清楚地表明这是两个不同的链接，只是并排排列。它不是一个单一的、统一的链接这一事实会导致用户混淆。

我尝试将 HTML 放在`link_to`的第一个参数中，但它显示为原始 HTML。

有没有办法`link_to`做到这一点？是否有替代方案`link_to`可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:48:56.593

您必须告诉 Rails html 可以呈现为 html 而不是转义的纯文本，方法是使用`html_safe`：

```
<div class="dual-format-link">
    <%= link_to '<span class="prefix-style">pre</span><span class="root-style">process</span>'.html_safe, compound_path %>
</div> 
```

有关更多信息，请参阅[http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/](http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/)。

# client - 如何指定 iperf 客户端端口

> ID：10065379
> 
> 赞同：11
> 
> 时间：2012-04-08T18:44:45.173
> 
> 标签：client, port, iperf

有没有办法强制 iperf 客户端使用特定端口号作为其传出端口，而不是让 iperf 选择要使用的随机端口？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-08-05T15:39:56.120

iperf 3 用户文档[https://iperf.fr/iperf-doc.php](https://iperf.fr/iperf-doc.php)`--cport <port>`显示您可以使用and`-B --bind`选项分配特定的客户端端口。查看 iperf3 用户文档以获取更多详细信息。这是使用客户端端口号 5500 的示例。

服务器在 10.0.0.2 上运行：

```
> iperf3 -s 
```

客户端在 10.0.0.1 上运行：

```
> iperf3 -c 10.0.0.2 -B 10.0.0.1 --cport 5500 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-30T11:15:14.127

实际上，这些答案都不正确：它们指定了目标端口，而不是客户端端口。似乎客户端端口是随机的（但在一次运行中是一致的），没有办法指定它

**2019 年更新**：最新版本 --cport 选项指定客户端端口

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-07T08:48:04.530

```
-p, --port #    $IPERF_PORT The server port for the server to listen on and the client to connect to. This should be the same in both client and server. Default is 5001, the same as ttcp. 
```

-p 选项表示要在客户端或服务器中使用的端口号。然后您需要为服务器端和客户端站点设置相同的端口。

例如服务器

```
iperf -s -p 10000 
```

客户

```
iperf -c SERVER_IP -p 10000 -t60 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-30T15:04:16.890

```
iperf -c <remoteip> --port <remoteport> -B <localbindip>:<localbindport> 
```

我已经能够使用上述方法做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-20T23:20:59.143

这就是我在特定主机（224.25.7.0）和端口（25700）上为我解决它的方法：

`sudo apt install perf`在每台机器上

**在听方面（10.14.17.14）：**

`iperf -s -u -B 224.25.7.0%eno1 -i 1 -p 25700`

eno1 是接口名（可以用机器的ip地址代替）

**在发送方 (10.14.17.13)：**

`iperf -c 224.25.7.0 -u --ttl 5 -t 5 -B 10.14.17.13 -p 25700`

**码头工人**

要在 docker 容器或 k8s pod 中进行测试，可以使用 bagoulla/iperf 映像：

`sudo docker run --net=host --rm bagoulla/iperf:2.0 -s -u -B 224.25.7.0%eno1 -i 1 -p 25700`

您可以将 args 替换为您需要的任何内容

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-02T15:15:36.133

尝试：服务器端-

```
iperf -s -i1 -fm -w512k -p1 
```

客户端-

```
iperf -c <ipadr> -i1 -fm -w512k -p1 
```

-p 选项表示端口号。

# database - OpenSearchServer 返回空值 NaN

> ID：10065383
> 
> 赞同：0
> 
> 时间：2012-04-08T18:45:05.517
> 
> 标签：database, search-engine

按照[这些](https://stackoverflow.com/questions/10061011/how-do-i-access-opensearchserver-database-fields)关于自动完成的说明。我创建了一个名为建议的索引。但是当我执行查询时，它会返回空白 xml 节点或返回此 xml 代码

```
<response><header><status>0</status><query>expression:php</query></header><result name="response" numFound="108" collapsedDocCount="0" start="0" rows="10" maxScore="NaN" time="1"><doc score="NaN" pos="0">
</doc><doc score="NaN" pos="1">
</doc><doc score="NaN" pos="2">
</doc><doc score="NaN" pos="3">
</doc><doc score="NaN" pos="4">
</doc><doc score="NaN" pos="5">
</doc><doc score="NaN" pos="6">
</doc><doc score="NaN" pos="7">
</doc><doc score="NaN" pos="8">
</doc><doc score="NaN" pos="9">
</doc></result></response> 
```

请帮助我，我如何检索表达式字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:00:28.393

编辑查询，转到返回的字段选项卡面板，然后添加“表达式”字段。当结果按字段 (freq) 排序时，NaN 分数是一种正常行为。

我还在初始说明中添加了与字段设置相关的更多详细信息。

# templates - 在 typedef 中实例化具有不完整类型的列表

> ID：10065384
> 
> 赞同：3
> 
> 时间：2012-04-08T18:45:08.230
> 
> 标签：templates, typedef, clang, libc++

我在编译 llvm 时遇到问题。问题是我当前的编译器（clang + libc++）试图在模板参数被定义之前实例化一个模板。这是代码示例：

```
// ----- TYPEDEFS -----
class NodeEntry;
class EdgeEntry;

typedef std::list<NodeEntry> NodeList;
typedef std::list<EdgeEntry> EdgeList;

typedef NodeList::iterator NodeItr; // line 39 
typedef NodeList::const_iterator ConstNodeItr;

typedef EdgeList::iterator EdgeItr;
typedef EdgeList::const_iterator ConstEdgeItr;

typedef std::list<EdgeItr> AdjEdgeList;

typedef AdjEdgeList::iterator AdjEdgeItr;

class NodeEntry {
private:  
  AdjEdgeList adjEdges;
  ...
};

class EdgeEntry {
private:
  AdjEdgeItr node1AEItr, node2AEItr;
  ...
}; 
```

编译器的错误是这样的：

```
error: field has incomplete type 'PBQP::Graph::NodeEntry'

/Developer/Extras/llvm/include/llvm/CodeGen/PBQP/Graph.h:39:13: note: in instantiation of template class
  'std::__1::list<PBQP::Graph::NodeEntry, std::__1::allocator<PBQP::Graph::NodeEntry> >' requested here
typedef NodeList::iterator NodeItr;
        ^
/Developer/Extras/llvm/include/llvm/CodeGen/PBQP/Graph.h:31:11: note: forward declaration of 'PBQP::Graph::NodeEntry'
class NodeEntry; 
```

据我所知，编译器会尝试实例化`std::list<NodeEntry>`以获取迭代器。这失败了，因为尚未定义 NodeEntry。当然，EdgeEntry 正在使用 NodeEntry，反之亦然。

显而易见的问题是：我该如何解决？
教育问题是：为什么编译器在定义类型时尝试实例化模板？它不应该等到我们对列表做点什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T00:55:36.323

如果您想保证对不完整类型的支持，最好的办法是`unique_ptr`为它们创建 's：

```
typedef std::list<std::unique_ptr<NodeEntry>> NodeList;
typedef std::list<std::unique_ptr<EdgeEntry>> EdgeList; 
```

在过去，很多次`std::list<incomplete_type>`都会起作用。然而，对于 C++11 和`noexcept`规范，越来越有可能需要一个完整的类型，以便`noexcept`验证规范。

尽管有严格的限制，但C++11 保证`unique_ptr<incomplete_type>`并且会起作用。`shared_ptr<incomplete_type>`例如，无论在哪里`~unique_ptr()`执行，类型都必须在那里完成。但是您通常可以将此类代码概述到源代码中并在此时#include 完整类型。

`unique_ptr<incomplete_type>`并且`shared_ptr<incomplete_type>`是 C++11 std::lib 中唯一保证可以使用不完整类型的类模板。其他一切都是未定义的行为：

[res.on.functions]/p2/b5：

> 特别是，在以下情况下效果是不确定的：
> 
> ...
> 
> *   如果在实例化模板组件时将不完整的类型 (3.9) 用作模板参数，除非该组件特别允许。

如果由于某种原因`std::list`不需要拥有指向不完整类型的指针，那么`std::list<NodeEntry*>`效果会更好。您可能还想使用`vector`而不是娱乐，`list`因为移动指针（甚至`unique_ptr`'s）的成本相对较小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T05:02:34.307

根据已经链接的[clang 文档](http://clang.llvm.org/compatibility.html#undep_incomplete)，他们不愿意在 libc++ 中支持 stl 容器的不完整类型。

有趣的是，以下代码无法使用 libc++ 编译：

```
#include <list>

struct Tree {
    // ... more stuff ...
    std::list<Tree> mChildren;
}; 
```

但是这段代码编译得很好，因为列表的模板参数也依赖于模板参数：

```
template<typename T>
struct TreeT {
    // ... more stuff ...
private:
    std::list<TreeT<T> > mChildren;
}; 
```

这让我觉得很奇怪，因为后者更复杂。

在类似[的帖子](https://stackoverflow.com/a/8333633/506584)中，还包含对 ISO 部分关于模板中不完整类型的引用，[Boost.Container](http://www.boost.org/doc/libs/1_48_0/doc/html/container/containers_of_incomplete_types.html)被提及作为替代方案，因为它明确允许递归数据结构。我在诊断类似问题时遇到了这篇文章，这是我现在的解决方案。

# java - 在 h2 中重置自动增量

> ID：10065386
> 
> 赞同：10
> 
> 时间：2012-04-08T18:45:20.287
> 
> 标签：java, playframework, h2

我正在测试一个返回 json 响应的控制器，但测试在第一次后失败，因为 h2 数据库没有重置自动增量 ID。使用夹具或手动创建对象有同样的问题。

```
@Before
public void setUp() {
    Fixtures.deleteAllModels();
    Fixtures.loadModels("data.yaml");
} 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-09T03:43:01.797

启动您的 play 应用程序，使用此 url 启动浏览器（如果您在本地运行 play 应用程序）：

```
http://localhost:9000/@db 
```

输入您的 h2 db，然后键入以下命令并运行：

```
ALTER TABLE <table_name> ALTER COLUMN <column_name> RESTART WITH 1 
```

如果您想以编程方式执行此操作，`Fixtures.executeSQL()`可能会有用

有关更多信息，请查看[http://www.h2database.com/html/grammar.html#alter_table_alter](http://www.h2database.com/html/grammar.html#alter_table_alter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-28T08:15:18.933

如果您使用的是 Spring，我发现这篇[博客文章](https://www.petrikainulainen.net/programming/spring-framework/spring-from-the-trenches-resetting-auto-increment-columns-before-each-test-method/)建议使用`@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)`

这样每个测试都使用一个新的应用程序上下文，从而重置 db 增量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-08T16:45:08.653

在您的表上执行 SQL 脚本：

```
TRUNCATE TABLE my_table RESTART IDENTITY;
ALTER SEQUENCE my_table_id_seq RESTART WITH 1; 
```

H2 应该是 1.4.200 或更高版本。

见[https://www.h2database.com/html/commands.html](https://www.h2database.com/html/commands.html)

# pytables - pytables - 如何加快列表中数据的检索

> ID：10065387
> 
> 赞同：3
> 
> 时间：2012-04-08T18:45:20.107
> 
> 标签：pytables

我有一个查询以下列格式返回约 100 万行：

```
data = [[i['field1'], i['field2']] for i in tbl.where(conditions)] 
```

并且需要超过 5 分钟。

当我自己尝试时`tbl.where(conditions)`，查询花费了不到一秒的时间，所以大部分时间似乎都花在了迭代列表理解中的行上。

有没有更快的方法从查询中检索 field1/field2？（我有足够的 RAM 将结果存储在内存中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T19:42:21.130

我对你的“tbl”一无所知，但这里有一些我会看的东西：

1.  您的表是否使用压缩？`print tbl.filters.complevel`

2.  假设您的“条件”取决于表字段，您是否为这些字段创建了索引？`print tbl.indexedcolpathnames`
3.  如果你使用`idx = tbl.get_where_list(conditions)`,`tbl[:]['field1'][idx]`
4.  如果您有足够的 RAM，请尝试在内存中打开文件：
    `h5file = tables.open_file('myfile.h5', driver="H5FD_CORE")`
    `tbl = h5file.root.tbl`看看是否有帮助。

# c++ - 指向类的 C++ 指针

> ID：10065388
> 
> 赞同：0
> 
> 时间：2012-04-08T18:45:21.973
> 
> 标签：c++

我在程序中调用库“gum”的方法时遇到问题：

```
gum::BayesNet<double> *myBayNet=new gum::BayesNet<double>;
gum::DiscrereVariable* DV=new gum::DiscretizedVariable<double>;
int main()
{
  // error: invalid declaration
  // of 'gum::BayesNet<duoble>::add' & //forbids declaration of 'DV' 
  unsigned int gum::BayesNet<duoble>::add(const (*DV) str) 
  {
    return (*myBayNet).add(str);
  }
} 
```

（请参阅评论中的错误消息。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:50:53.467

大福是那个`const (*DV) str`？`DV`是一个变量，您正试图将其用作类型名。也不是写`(*myBayNet).add(str)`更简单（和更短）的方法是写`myBayNet->add(str)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:49:05.073

您不是在*调用*方法，而是在*定义*它。但是，您不得在`main()`任何其他函数范围内定义成员函数。它们必须在命名空间范围内定义。

# python - 特殊字符的不同命令

> ID：10065394
> 
> 赞同：0
> 
> 时间：2012-04-08T18:45:31.850
> 
> 标签：python, mongodb

我有存储在 mongodb 中的 JSON（字段：线程，作者，子计数），字符串属性（基本上是从论坛爬取的线程的名称）也有类似的字符，

```
'\n', '!' etc. 
The "Thread" field has entries like the following:

"Thread": "\n````1111Hellow What is you name----....." 
```

命令是：

```
collection.distinct(Thread) 
```

此类属性的命令但失败。Map reduce 在此类字符串上会更好地工作吗？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:20:50.743

我试图重现此问题，但无法重现。我使用的是 pymongo 2.0.1 版和 Mongo 2.1.1-pre 版。这是我在 iPython 中尝试过的：

```
In [13]: collection.save({"_id":1, "Thread": "\n````1111Hellow What is you name----....."})
Out[13]: 1

In [14]: collection.find_one()
Out[14]: {u'Thread': u'\n````1111Hellow What is you name----.....', u'_id': 1}

In [15]: collection.distinct("Thread")
Out[15]: [u'\n````1111Hellow What is you name----.....']

In [16]: 
```

一个可能的问题是“distinct”方法需要一个字符串作为输入。可以在此处找到有关 distinct 命令的文档：“http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct”

如果这不是您的问题的原因，您能否打印您为生成错误所采取的步骤以及错误消息本身？此外，您使用的是哪个版本的 Mongo 和 pyMongo？

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:06:16.253

你的问题没有完全的意义，但你的意思是：

```
def do_1():
  pass

def do_2():
  pass

commands = {
  '\n': do_1(),
  '!': do_2(),
  # ...
}

commands[c]() 
```

# iphone - iPhone：视差滚动效果，如 wp7 metro ui

> ID：10065400
> 
> 赞同：1
> 
> 时间：2012-04-08T18:46:14.000
> 
> 标签：iphone, scroll, microsoft-metro, parallax

对于 iOs 应用程序，我想在 Windows Phone 7 中重新创建集线器的视差效果。我可以使用以下代码来实现它：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView{

    CGRect lc_frame = hubBackgroundImageView.frame;
    lc_frame.origin.x=-hubItemsScrollView.contentOffset.x/2;
    hubBackgroundImageView.frame = lc_frame;
} 
```

但效果并不完美。在 WP7 中，在集线器的最后一页上，背景图像的右侧与视图的右侧完美契合。

在这里，如果我的图像小于我的滚动视图宽度/2，我可以看到我的 viewController 背景颜色...

![截屏](../Images/6da3af92d212d7903849a2604999b83c.png)

我想根据滚动视图 contentSize.width、image.frame.size.width 和新的 scrollview.contentOffset.x 来获取图像的新 x 位置。目标是在滚动视图的最后一页上，我的背景图像位置是

```
backgroundImage.frame.origin.x = -backgroundImage.frame.size.width+self.view.frame.size.width; 
```

请帮我 ！谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T11:47:40.393

知道了 ！这是我的功能：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView{

    float paralaxPlacementRatio=scrollView.contentOffset.x/(scrollView.contentSize.width-scrollView.frame.size.width);

    CGRect lc_frame = backgroundImageView.frame;
    lc_frame.origin.x=-backgroundImageView.frame.size.width*paralaxPlacementRatio+(self.view.frame.size.width*paralaxPlacementRatio);
    backgroundImageView.frame = lc_frame;
} 
```

我的观点结构是：

*   backgroundImageView（不知道宽度的UIImageView）
*   scrollView (UIScrollView pageEnabled 我不知道 contentSize.width)

结果是完美的，如果有人想要解释，问我！

# python - 在 Python 中，如果 x==1 或 x==5 或 x==10...，还有什么其他方法可以编写？

> ID：10065407
> 
> 赞同：9
> 
> 时间：2012-04-08T18:47:12.520
> 
> 标签：python, if-statement

我经常最终写出像这样的代码

```
if x == 1 or x == 5 or x == 10 or x == 22 :
    pass 
```

在英语中，不断重复似乎是多余的`x`，有没有更简单或更短的方法来写出这样的 if 语句？

也许检查元组中是否存在`x`' 值`( 1, 5, 10, 22, )`或什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-08T18:51:10.790

是的，你是对的 - 无论是在一个元组中，还是在一个集合中（如果重复进行此检查）。

所以要么做

```
if x in (1, 5, 10, 22):
    pass 
```

或者，如果您经常进行此检查并且值的数量足够大，

```
myset = set((1, 5, 10, 22))

[...]

if x in myset:
    pass 
```

这些`myset`东西越有用，您要检查的值就越多。4个值很少，所以你可以保持简单。400个值，你应该使用集合......

正如 Marcin 所指出的，另一方面是在集合中查找所需的散列可能比线性搜索列表或元组的所需值更昂贵。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T18:48:50.447

您可以`in`与集合一起使用：

```
if x in [1, 5, 10, 22]:
     # etc...

if x in {1, 5, 10, 22}:  # New syntax for creating sets  
     # etc... 
```

请注意，这将在每次执行该行时创建一个新列表。如果效率是一个问题，只创建一次集合并重用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T18:51:41.010

如果您需要良好的性能并且要多次重复相同的比较，请使用一组：

```
s = frozenset([1, 5, 10, 22]) # at the beginning

if x in s: # in your code
    pass 
```

# java - 为什么这个测试包会失败？

> ID：10065413
> 
> 赞同：1
> 
> 时间：2012-04-08T18:47:56.953
> 
> 标签：java, eclipse, osgi

我正在尝试做一个非常简单的 OSGi 测试，但我无法让它工作。似乎 OSGi 运行时找不到我的激活器类。有什么线索吗？

激活器.java：

```
package test;

import org.osgi.framework.BundleActivator;
import org.osgi.framework.BundleContext;

public class Activator implements BundleActivator 
{
    public void start(BundleContext context) throws Exception 
    {
        System.out.println("Hello world");
    }

    public void stop(BundleContext context) throws Exception 
    {
        System.out.println("Goodbye World");
    }
} 
```

清单文件

```
Manifest-Version: 1.0
Bundle-Name: Test
Bundle-SymbolicName: Test
Bundle-Version: 1.0.0
Bundle-Activator: test.Activator
Import-Package: org.osgi.framework 
```

我编译并打包我的激活器

```
$ javac -classpath /usr/share/java/org.eclipse.osgi.jar Activator.java
$ jar cmf MANIFEST.MF test.jar Activator.class 
```

并运行 OSGi

```
$ java -jar /usr/share/java/org.eclipse.osgi.jar -console

$ osgi> install file:///home/august/Documents/prog/java/osgi/test/test.jar
Bundle id is 1
$ osgi> start 1
org.osgi.framework.BundleException: The activator test.Activator for bundle Test is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:171)
...
at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.ClassNotFoundException: test.Activator 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:56:53.877

你看过 jar 档案吗？在我看来，您在 jar 命令中缺少“test”文件夹 - 如果 Activator.class 在 jar 根目录中而不是在正确的目录中，则类加载器将找不到它。

# java - useBean 类属性 logbean.LoginBean 的值无效

> ID：10065417
> 
> 赞同：0
> 
> 时间：2012-04-08T18:48:37.777
> 
> 标签：java, html, jsp, javabeans

我有以下代码，当我在我的 TOMCAT 服务器上运行时，它给了我错误： jspbeanlogin/loginbean.jsp (line: 7, column: 0) useBean 类属性 logbean.LoginBean 的值无效。我做错了什么，我不知道。有人可以解释我可能会错过什么。谢谢你。:-)

```
<HTML>   
<HEAD><TITLE>DataBase Search</TITLE></HEAD>  
<BODY>

<%@ page language="Java" import="java.sql.*" %>  

<jsp:useBean id="db" scope="request" class="logbean.LoginBean" >

<jsp:setProperty name="db" property="userName" value="<

%=request.getParameter(\"userName\")%>"/>
<jsp:setProperty name="db" property="password" value="<

%=request.getParameter(\"password\")%>"/>

  </jsp:useBean>
<jsp:forward page="hello">
<jsp:param name="username" value="<%=db.getUserName()%>" />
<jsp:param name="password" value="<%=db.getPassword()%>" />

</jsp:forward> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:46:48.267

更正这一行的财产`userName`

```
<jsp:setProperty name="db" property="userName" value="<%=request.getParameter(\"username\")%>"/> 
```

值来自这一行

```
<jsp:param name="username" value="<%=db.getUserName()%>" /> 
```

请参阅此链接，我觉得它解释了类似的问题[JavaBean 'useBean 类属性 classes.UserData 的值无效'](https://stackoverflow.com/questions/933320/javabean-value-for-the-usebean-class-attribute-classes-userdata-is-invalid)

# python - Python - 以高性能序列化数据的最佳方式？

> ID：10065419
> 
> 赞同：2
> 
> 时间：2012-04-08T18:48:51.673
> 
> 标签：python, serialization, marshalling, pickle

我需要序列化需要高性能的数据。分离的线程每秒都会访问它，并且必须将数据加载到内存中。将有大约 1000 - 10000 个关于用户会话（id、sessid、登录日期）的类似字典的条目。由于登录时间有一定的时间，一些数据会经常更新。

这些数据将在 python 服务器和 Django 应用程序之间共享。我认为使用 pickle 或其更快的版本 cPickle。我还找到了[marshal](http://docs.python.org/library/marshal.html#module-marshal)。

最好的方法是什么？cPickle 是否足够高效？或者也许是元帅？

**编辑**：非常重要的是访问时间。这将是一个实时 websocket 服务器，所以我需要非常低的延迟。每秒访问一次 cPickle 数据或连接到 Redis 之类的数据库是否更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:53:40.307

更好的方法可能是使用一些内存缓存 - memcached，如果您的需求很简单 - 或者具有更多功能集的东西，如 redis。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-02T16:21:53.530

`redis`仍然需要序列化任何 complex `python object`，因此`redis`除非您将所有数据表示为简单的键和简单的值，否则不能解决此问题。`redis`不是反序列化解决方案，它只是字符串的数据存储。无论如何，`redis`是较慢的选项之一： [https ://charlesleifer.com/blog/completely-un-scientific-benchmarks-of-some-embedded-databases-with-python/](https://charlesleifer.com/blog/completely-un-scientific-benchmarks-of-some-embedded-databases-with-python/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:03:27.157

使用内存中的真实数据库。不要使用 pickle、cPickle 或 marshal 或类似的东西。

# android - NoClassDefFoundError 与 EclEmma 代码覆盖工具

> ID：10065423
> 
> 赞同：1
> 
> 时间：2012-04-08T18:49:01.610
> 
> 标签：android, testing, code-coverage, android-testing, eclemma

我尝试使用 EclEmma 代码覆盖率工具检查测试用例的覆盖率，但出现以下错误：

```
java.lang.NoClassDefFoundError: android/test/ActivityInstrumentationTestCase2 
```

我怎样才能解决这个问题？

![在此处输入图像描述](../Images/393bded3bff9921c652d2a69fc9f908b.png) ![在此处输入图像描述](../Images/480276fb8ed842e84539152dbf578d43.png) ![在此处输入图像描述](../Images/beca990ce688f16195911a8e5ccb2d3e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:54:18.037

您可以在[eclEmma 主页](http://www.eclemma.org/devdoc/eclemma20.html)上阅读有关Java 7 不支持 eclEmma 的事实，因为它使用 java7 字节码失败：（如果您回到 Java6，您可以使用它！

# java - 本地接口和 REST Web 服务

> ID：10065429
> 
> 赞同：0
> 
> 时间：2012-04-08T18:49:28.757
> 
> 标签：java, jakarta-ee

如果我对本地 EJB 和 Web 服务 EJB 使用相同的接口，如下所示，我不能使用相同的创建方法。我该怎么办？我应该为 Web 服务方法创建另一个接口还是如下操作？还是有更好的选择？

```
@Local
@Path("questions")
public interface QuestionServiceLocal {

    @POST
    Response create(JAXBElement<Question> question);
    void create(Question question);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:01:40.987

你的用例是什么？您想创建一个 Restful Web 服务 API 吗？然后阅读 JAX-RS 规范[http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html](http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html)

1.  [RestEasy](http://www.jboss.org/resteasy) - 流行的 JAX-RS 实现。
2.  [Jersey](http://jersey.java.net/) - JAX-RS 规范的参考实现。
3.  [Restlet](http://www.restlet.org/) - 不那么受欢迎，但可行的选择之一。
4.  [Play Framework](https://stackoverflow.com/questions/4379485/restful-on-play-framework) - 个人最喜欢的，很容易上手。
5.  [Dropwizard](http://dropwizard.codahale.com/) - 新加入者，来自创建 Yammer 的人！

# javascript - Javascript 错误 myfuntion.create 不是函数

> ID：10065430
> 
> 赞同：0
> 
> 时间：2012-04-08T18:49:33.240
> 
> 标签：javascript, jquery, undefined

直到我添加了 jQuery，这才发生。

```
function mfunc() {}
mfunc.prototype.create = function(value) { 
alert("hi");
} 
```

**结束正文标记之前的脚本：**

```
$(document).ready(function(){
 var mfunc = new mfunc();
    alert("hi");
    alert(mfunc.create("hello"));

 }); 
```

**我在萤火虫中收到以下错误：**

> mfunc.create 不是函数

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:53:42.800

您正在遮蔽您的原型功能！您的原始函数称为`mfunc`，但随后您使用相同的变量名称来引用新实例。使用不同的变量名：

```
$(document).ready(function(){
    var mobj = new mfunc();
    alert("hi");
    alert(mobj.create("hello"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:54:10.063

尝试更改 func var 名称：

```
$(document).ready(function(){
 var mfunc2 = new mfunc();
    alert("hi");
    alert(mfunc2.create("hello"));

 }); 
```

演示：http: [//jsfiddle.net/TwKZu/](http://jsfiddle.net/TwKZu/)

# android - 是否有任何包含 TextView 的可点击区域

> ID：10065436
> 
> 赞同：0
> 
> 时间：2012-04-08T18:49:47.110
> 
> 标签：android

我正在尝试有一个可点击的项目列表视图...对于列表中的每个元素，我都有一个可点击的 TextView ....问题是用户只能单击 TextView 来访问里面的内容太有限了元素。相反，我希望包含 TextView 的整个列表项都是可点击的，以便用户可以轻松地点击任何地方（而不是专门点击文本）。任何人都可以帮忙吗？谢谢你。

```
import java.util.ArrayList;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Context;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.text.Layout;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ListViewActivity extends ListActivity implements OnCheckedChangeListener {

TextView label;
CheckBox checkBox;
Context c = this.getApplicationContext();
private ArrayList<Boolean> status = new ArrayList<Boolean>();

public class MyCustomAdapter extends ArrayAdapter<String> {

public MyCustomAdapter(Context context, int textViewResourceId,
String[] objects) {

super(context, textViewResourceId, objects);

    for (int i = 0; i < objects.length; i++) {
        status.add(false);
    }
  // TODO Auto-generated constructor stub
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
 // TODO Auto-generated method stub
 //return super.getView(position, convertView, parent);

 View row = convertView;

 if(row==null){
  LayoutInflater inflater=getLayoutInflater();
  row=inflater.inflate(R.layout.main, parent, false); 

 }  

 label=(TextView)row.findViewById(R.id.weekofday);
 label.setText(month[position]);
 label.setClickable(true);

//View l = (View)row.findViewById(R.id.linearLayout1);
 label.setOnClickListener(new View.OnClickListener() {

 public void onClick(View v) {

     Toast.makeText(getApplicationContext(), "The rest just clicked in " + position ,       Toast.LENGTH_SHORT).show();  

 }   });

 checkBox=(CheckBox)row.findViewById(R.id.checkBox);
 checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

   @Override
   public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {

         String event = null;

         if (isChecked) 
         {
         status.set(position, true);
         event = " just checked!";
         } 

        else 
         {
         status.set(position, false);
         event = " just unchecked!";
         }

         Toast.makeText(getApplicationContext(), "checkbox " + position +event,      Toast.LENGTH_SHORT).show();   

     }
 });
 checkBox.setChecked(status.get(position));

 return row;
}
}

 String[] month = {
 "January", "February", "March", "April",
"May", "June", "July", "August",
"September", "October", "November", "December"
  };

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
// setContentView(R.layout.main);
 /*setListAdapter(new ArrayAdapter<String>(this,
   R.layout.row, R.id.weekofday, DayOfWeek));*/

   setListAdapter(new MyCustomAdapter(ListViewActivity.this, R.layout.main, month));

 }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:57:28.827

您可以使用

```
listview.setOnItemOnClickListener(new OnItemClickListener(....)); 
```

# css - 为 CSS 边框使用 Outline

> ID：10065438
> 
> 赞同：0
> 
> 时间：2012-04-08T18:49:59.807
> 
> 标签：css

有没有其他人在 CSS 中使用大纲来创建双边框而不是嵌套的 div？因为我似乎不太受欢迎，所以在 CSS 中使用大纲有什么陷阱？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:52:44.963

你的意思是用单个实线边框代替两个 div 吗？

正如我所注意到的，这样做的缺点是您无法控制每种颜色，它们都必须相同......此外，您无法控制它们之间的距离，或者它们的每个尺寸等。

所以我认为这真的取决于你将使用双边框......但对于简单的双标准边框，它比制作两个 div 和两个边框要快得多......（IMO）

我认为它们不受欢迎，因为您多久会在网络上看到双边框？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:02:25.787

轮廓的主要问题是它在盒子模型之外，所以它可能会导致一些丑陋的崩溃。

此外，outline 被大量用于辅助功能，并且不要混淆辅助功能总是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:57:21.007

这取决于。`outline`在包括 IE8 在内的大多数浏览器中运行良好，快速示例[http://jsfiddle.net/elclanrs/jecEB/](http://jsfiddle.net/elclanrs/jecEB/)。

您也可以`box-shadow`用于相同目的，并且可以添加超过 2 个边框。当然，这只适用于支持这个 css3 特性的浏览器。

# css - 您可以在 css/html/jquery 中为鼠标指针添加阴影吗？

> ID：10065440
> 
> 赞同：4
> 
> 时间：2012-04-08T18:50:28.397
> 
> 标签：css, mouse, shadow

我在这里找不到这个问题：

有没有办法在网站上为鼠标创建阴影？如果可能的话，有人可以指出我的方向以找出如何做到这一点吗？

谢谢！

* * *

**update-1**
任何人都知道这样的 jquery 吗？

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:56:51.647

嗯，如果您想坚持使用每个操作系统的默认光标，我想这可能会变得很困难。您可以附加包含阴影的自定义图像

```
element{
    cursor:url(custom.cur),url(custom.gif),auto;
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:57:58.890

没有地方可以指点你，但你绝对可以有一个 div 包含一个图像，该图像是光标的模糊灰色版本（你可能必须检测用户正在使用什么操作系统来确定要提供什么图像，因为光标可能会有所不同），然后只需将 div 绑定到鼠标坐标，但偏移一点。

# objective-c - NSView 的 mouseMoved 事件

> ID：10065442
> 
> 赞同：2
> 
> 时间：2012-04-08T18:51:05.517
> 
> 标签：objective-c, xcode, cocoa

在我的应用程序委托中，我创建了一个窗口“helpWindow”，并将其内容视图设置为 NSView 子类。在我的子类中，我 drawRect 并确保它是关键窗口。我遇到的问题是，在我的鼠标事件中，鼠标按下事件与内容视图一起正常工作，但是，移动的鼠标不起作用并显示位置。我必须添加一些东西`mouseLocation`吗？我觉得drawRect掩盖了鼠标移动事件。谢谢！

//在我的 appDelegate.m

```
controlFilterBox = [[MoveFilter alloc] initWithFrame:helpWindow.frame];
[helpWindow setContentView:controlFilterBox];
[controlFilterBox release]; 
```

//在我的 NSView subclass.m

```
 -(void)drawRect:(NSRect)dirtyRect 
     {
        [[NSColor redColor] set];
        NSRectFill(dirtyRect);

        [[self window] makeKeyWindow]; 
     }

    -(void)mouseDown:(NSEvent *)theEvent 
      {

        NSPoint eventLocation = [theEvent locationInWindow];
        NSPoint location = [self convertPoint:eventLocation fromView:nil];

        NSLog(@"exit %f %f", location.x, location.y); 
      }

    -(void)mouseMoved:(NSEvent *)theEvent 
      {
        NSPoint mouseLoc = [NSEvent mouseLocation];
        NSLog(@"mouseMoved: %f %f", mouseLoc.x, mouseLoc.y);
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:25:46.547

我找到了答案，事实证明最好创建一个 NSTrackingArea 以便能够在 NSView 中使用 mouseMoved 事件。

# xcode4.2 - 故事板中的媒体播放器

> ID：10065444
> 
> 赞同：1
> 
> 时间：2012-04-08T18:51:10.010
> 
> 标签：xcode4.2, xcode-storyboard, mpmediaplayercontroller

我正在尝试让视频文件在故事板（Xcode 4.2）中的 UIView 中工作。我看到很多按下按钮来激活视频的例子。基本上我希望打开的 UIView 将视频放在屏幕的上半部分，然后用户点击它开始播放视频。或者我最好不要在情节提要中这样做，因为我将自己限制在运行 iOS 5.0 或更高版本的设备上。问候

阿米达布连

# database - Self Updating ORM

> ID：10065448
> 
> 赞同：1
> 
> 时间：2012-04-08T18:51:37.367
> 
> 标签：database, linq-to-sql, orm

I have been using LinqToSQL for quite a while as well as using Devart, for some projects. Are there any ORMs that will update with your DB schema?

I understand that most of these products are meant to be used when you DB schema is already nailed down, but I find that that's in a perfect world, unfortunately, I don't develop in one.

There are a number of ORM's out there for .net developers (Entity Framework, DevArt, telerik OpenAccess, Etc.) most of which give you the ability to update your DAL by just a few clicks of your mouse. Like mentioned below, I am thinking that by scheduling a batch file to run every so many minutes or hours may be the best way to mimic Real-time updating.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:05:22.673

In LINQ to SQL you can just recreate all tables and regenerate the model when the schema changes. This is actually quite convenient. You can recreate individual tables, too.

# c# - C# 转换为可空类型？

> ID：10065452
> 
> 赞同：31
> 
> 时间：2012-04-08T18:51:55.500
> 
> 标签：c#, .net-4.0, casting, clr

**除了**和之间的常规无聊差异`Cast`之外`As`

*   如果我*知道**苹果*是*水果*，所以我可以使用`(Fruit)apple`- 如果它不是，它会引发异常
*   `as value`可以检查 null 以查看是否成功[不会抛出异常...]

但是我一直在阅读@EricLippert关于此的[文章](http://blogs.msdn.com/b/ericlippert/archive/2009/10/08/what-s-the-difference-between-as-and-cast-operators.aspx)，并且有一个关于 Nullable Value Types 的很​​好的示例：

```
short? s = (short?)123;
int? i = s as int?; 
```

这*不会*编译...

[无法转换类型“短？” 到'int？通过引用转换、装箱转换、拆箱转换、包装转换或空类型转换]

**美好的。**

那么为什么这样：

```
 short? s = (short?)123;
    int? i = (int?)s; 
```

**是否**编译？（*出乎所有人的意料*！我**知道**那`s`不是 `int?` - 它应该会爆炸，但它不是......）

这里的 Cast 检查应该比前一个例子（它去 Bang）更致命

问起这个话题，我感觉很糟糕。

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-08T18:55:42.247

在您的第一个示例中，`as`操作员尝试将对象`s`用作`int?`. 由于`int?`不在 的继承链中的任何位置`short?`，因此此操作失败。

在您的第二个示例中，您实际上是在`int? i`使用 from 的值创建一个新的`short? s`。这是一个更慷慨的操作，因为它不必保留`s`左侧的原始对象。

**这里的重点`as`是不允许做任何不保留对象身份的事情。显式转换可以。**

以下是 C# 标准对`(int?)`表单工作方式的说明：

> 6.1.4 隐式可空转换
> 
> 对不可空值类型进行操作的预定义隐式转换也可以与这些类型的可空形式一起使用。对于从不可空值类型 S 转换为不可空值类型 T 的每个预定义隐式标识和数值转换，存在以下隐式可空转换：
> 
> · 从 S 的隐式转换？到T?。
> 
> · 从 S 到 T? 的隐式转换。
> 
> 基于从 S 到 T 的基础转换对隐式可空转换的评估如下进行：
> 
> · 如果可以为空的转换来自 S？到 T?:
> 
> o 如果源值为 null（HasValue 属性为 false），则结果为 T? 类型的 null 值。
> 
> o 否则，转换被评估为从 S？到 S，然后是从 S 到 T 的基础转换，然后是从 T 到 T 的包装（第 4.1.10 节）。
> 
> · 如果可以为空的转换是从 S 到 T?，则转换被评估为从 S 到 T 的基础转换，然后是从 T 到 T? 的换行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T18:55:00.330

这个例子：

```
int? i = (int?)s; 
```

编译器是否因为强制转换是您告诉编译器您知道它无法推断的东西，也就是说，`s`可以转换为`int?`.

如果强制转换不成功，您只会在运行时收到异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:55:26.490

我认为这是因为在`as`失败的情况下你会得到一个“有效”的`null`结果，所以*false positive*。在第二种情况下，允许强制转换，因为如果失败，它将引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T19:27:42.000

原因是int？只是`System.Nullable<int>`(`System.Nullable<T>`是类型) 的简写。short 类型定义了对 int 的显式转换，但是`System.Nullable<T>`没有任何这样的显式转换，因为 T 可以是任何其他值类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-25T12:34:51.030

我通过反射找到了这个可能的解决方案。这个想法是：

```
 var notNullableValue = 3;
    var someNullableType = typeof(Nullable<int>);
    var nullableValue = Activator.CreateInstance(someNullableType, new[] { notNullableValue }); 
```

In my case I could not use a direct cast because I was using arbitrary Types and Reflection to create an object and fill all properties.

# linq-to-sql - 克隆或复制同一表中的行

> ID：10065454
> 
> 赞同：1
> 
> 时间：2012-04-08T18:52:27.523
> 
> 标签：linq-to-sql

我正在使用 LINQ to SQL，我有一个名为“tblCourse”的表，我想根据某些条件从该表中选择一些行，然后将这些选定的行作为新记录插入到同一个表中。任何机构都可以提出一些帖子、链接或方向吗？

```
public IQueryable<tblCourseNeededHours> CloneAllCourseNeededHoursInDepartmentInSemester(int departmentId, string semester)
{
return from allCourses in _db.tblCourseNeededHours orderby allCourses.tblCourse.CourseName
where allCourses.tblCourse.tblInstitute.DepartmentID == departmentId && allCourses.Semester
== semester select allCourses;

var thisTable = from t in _db.tblCourseNeededHours where
t.tblCourse.tblInstitute.DepartmentID == departmentId && t.Semester == semester

//select everything except ID
select _db.tblCourseNeededHours {  Semester = ?, NeedHoursPerWeek = ?, AssignToInstitute=? 
(I want it null for new record), Freezed=? (I want it null for new record)    
}; 
_db.tblCourseNeededHours.InsertAllOnsubmit(thisTable);
_db.SubmitChanges(); 
```

现在当我使用

```
select _db.tblCourseNeededHours {  Semester = ?, NeedHoursPerWeek = ?, AssignToInstitute=? (I want it null), Freezed=? (I want it null)    
}; 
```

? 提到“我应​​该把什么放在这里，我在这里有错误，也在这条线上

```
_db.tblCourseNeededHours.InsertAllOnsubmit(thisTable); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:57:46.503

我不确定您的数据库架构，但是这样的东西应该适合您。

```
var oldItems= (from p on db.tblCourses where p.InstructorId=43 select p).ToList();
if(oldItems!=null)
{
  foreach(var item in oldItems)
  {
    tblCourse objNew=new tblCourse();
    objNew.Instructor="John";  
   // update someproperty values from old row if you need        
    objNew.Credits=item.Credits+2;
    db.tblCourses.Add(objNew);
  }
  db.SubmitChanges();
} 
```

假设 db 是您的数据上下文

# android - 触地得分按住 libgdx

> ID：10065467
> 
> 赞同：3
> 
> 时间：2012-04-08T18:54:04.877
> 
> 标签：android, libgdx

在 libGdx（在 Android 中）中是否有类似 touchdown 事件的等价物 - 所以当用户触摸屏幕（并连续按住手指）时，即 touchhelddown 方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T19:51:52.633

您可以使用[`GestureDetector`](http://code.google.com/searchframe#c5txscj0tnc/trunk/gdx/src/com/badlogic/gdx/input/GestureDetector.java&q=gesturedetector%20package:http://libgdx%5C.googlecode%5C.com). 它实现`InputAdapter`了，因此您可以使用它代替您的 InputAdapter 或与您的 InputAdapter 一起使用`InputMultiplexer`.

你需要提供一个`GestureListener`给它。GestureDetector 在检测到支持的手势时调用 GestureListener 的方法。这些方法和手势是：

```
public boolean touchDown (int x, int y, int pointer);
public boolean tap (int x, int y, int count);
public boolean longPress (int x, int y);
public boolean fling (float velocityX, float velocityY);
public boolean pan (int x, int y, int deltaX, int deltaY);
public boolean zoom (float originalDistance, float currentDistance);
public boolean pinch (Vector2 initialFirstPointer, Vector2 initialSecondPointer, 
                      Vector2 firstPointer, Vector2 secondPointer); 
```

您可以扩展`GestureAdapter`和覆盖您感兴趣的方法。在您的情况下，您将覆盖`longPress`方法。您还可以将`longPressDuration`其作为参数提供给构造函数。

# c# - 当我在单独的线程中调用 Application.Run() 时，我的表单离开了焦点

> ID：10065472
> 
> 赞同：0
> 
> 时间：2012-04-08T18:54:21.193
> 
> 标签：c#, winforms, multithreading, webbrowser-control

我在单独的线程中使用 Web 浏览器控件并防止线程立即退出，我在线程中调用 Application.Run()。在我调用 Application.Run() 的那一刻，我创建新线程的主窗体离开了焦点。

有没有办法避免这个问题？我需要在单独的线程中使用 WebBrowser 控件，但是在创建线程时不要离开主窗体的焦点。

谢谢

# php - 需要有关构建无状态 Web 应用程序的信息

> ID：10065487
> 
> 赞同：1
> 
> 时间：2012-04-08T18:56:12.973
> 
> 标签：php, javascript, api, session, authentication

如果有人可以向我指出一些关于构建无状态 Web 应用程序的好资源（或者只是在这里给我一些基础知识），那就太好了。

我正在制作一个完全在 JS 中具有表示层的 Web 应用程序。它将与我不想依赖会话的 RESTful API 交互。

如何在没有会话的情况下管理 API 和用户身份验证？（请注意，我这样做是为了了解更多信息，而不是因为它一定是我的网络应用程序的最佳解决方案）

非常感谢任何信息！

编辑：我不反对使用 cookie 来维护状态（只要有安全的方法来做到这一点），我只是不希望在服务器上打开会话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T18:57:19.563

在每个请求中发送所有身份验证数据。

# iphone - 从 Facebook 应用发布后返回自己的应用

> ID：10065488
> 
> 赞同：0
> 
> 时间：2012-04-08T18:56:18.183
> 
> 标签：iphone, objective-c, ios, facebook, cocoa-touch

我正在使用我设备上安装的 Facebook 应用程序在 Facebook 上发布数据。单击并在 Facebook 上发帖后，我想回到我的应用程序，但我没有办法做到这一点。有办法吗？

我通过 URL 方案在设备上打开 Facebook 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:02:38.647

如果您想在自己的应用程序中与 Facebook 通信，则需要使用 Facebook API 并将其编程到您的应用程序中。查看[此页面](https://developers.facebook.com/docs/guides/mobile/)以获取官方 Facebook API 以及如何将其集成到您的应用程序中的说明。

**编辑：**如果您通过 URL 方案打开 Facebook 应用程序，之后您将无法返回自己的应用程序。这样做需要您向 Facebook 应用程序本身添加一些代码。我建议您查看并使用 Facebook API。

# objective-c - 在 Objective-C 中比较两种方法的问题

> ID：10065491
> 
> 赞同：-1
> 
> 时间：2012-04-08T18:56:33.713
> 
> 标签：objective-c

我正在尝试比较从两种不同方法获得的数据：第一个来自实例方法，第二个来自类方法。我收到一个难以理解的警告和一个错误。

**这是界面：**

```
@interface RadioStation : NSObject {

NSString *name;
double frequency;
char band;

}
+(double) maxFMFrequency;
-(void) chackFrequency;

@end 
```

**这是实现：**

```
@implementation RadioStation

+(double) maxFMFrequency {

return 107.9;
}
-(void) chackFrequency {

    switch (band) {
        case 'F':
            if (self.frequency > [[self RadioStation] maxFMFrequency] ) //  in this line i get the warning and the error massage
                frequency=107.9;
            break;

@end 
```

这是我得到的**警告：**

`instance method '-RadioStation' not found (return type defaults to 'id')`

当我构建并运行程序时，我得到了**错误**：

`Thread 1: signal SIGABRT`

有谁知道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:59:27.167

应该读：

```
if (self.frequency > [RadioStation maxFMFrequency] ) 
```

如果按名称寻址，则不需要 Self 来寻址类。如果你想引用 self 你可以使用：

```
if (self.frequency > [[self class] maxFMFrequency] ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T21:57:51.617

从你的帖子中不清楚波段和频率的值来自哪里，所以我只是将它们放在 init 方法中进行测试，当我在这个类上调用 alloc init 时，这段代码运行良好：

```
@implementation RadioStation

-(id)init {
    if (self = [super init]) {
        band = 'F';
        frequency = 120;
        [self chackFrequency];
        return self;
    }else{
        return nil;
    }
}

+(double) maxFMFrequency {
    return 107.9;
}

-(void) chackFrequency {
    switch (band) {
        case 'F':
            if (frequency > [[self class] maxFMFrequency] )
                frequency=107.9;
            NSLog(@"%f",frequency);
            break;
    }
}
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:01:45.490

也许你的错误如下：

```
[[self RadioStation] maxFMFrequency] 
```

改变它

```
[RadioStation maxFMFrequency] 
```

# android - 带有外部 jar 的 NoClassDefFoundError

> ID：10065492
> 
> 赞同：1
> 
> 时间：2012-04-08T18:56:35.610
> 
> 标签：android, jar, external, noclassdeffounderror

我需要在我的 Android 项目中添加一些外部 jar。所以我用谷歌搜索了最好的方法是什么。我确实做了需要做的事情：

1.  我在我的项目中创建了一个名为 libs 的新文件夹（来自 eclipse 内部）
2.  我右键单击库并单击导入。General -> FileSystem 然后我浏览到外部 jar 文件。
3.  我右键单击我的项目，转到配置构建路径并在库选项卡中添加 jars（不是外部 jar）。
4.  在 Order and Export 选项卡中，我检查了我刚刚添加的罐子。完成此操作后，我的两个 jar 都显示在“引用的库”下。

但我仍然得到 NoClassDefFoundError。请帮我。我需要知道如何解决这个问题。谢谢。

这是 Logcat ：

```
04-09 00:14:54.799: D/AndroidRuntime(1673): Shutting down VM
04-09 00:14:54.799: W/dalvikvm(1673): threadid=1: thread exiting with uncaught exception (group=0x40a661f8)
04-09 00:14:54.803: E/AndroidRuntime(1673): FATAL EXCEPTION: main
04-09 00:14:54.803: E/AndroidRuntime(1673): java.lang.NoClassDefFoundError: javax.activation.DataHandler
04-09 00:14:54.803: E/AndroidRuntime(1673):     at com.example.easyMail3.GmailSender.sendMail(GmailSender.java:53)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at com.example.easyMail3.EasyMail3Activity.onCreate(EasyMail3Activity.java:18)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.app.Activity.performCreate(Activity.java:4465)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.os.Looper.loop(Looper.java:137)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at java.lang.reflect.Method.invoke(Method.java:511)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-09 00:14:54.803: E/AndroidRuntime(1673):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-08T19:04:29.740

在 Eclipse 中，如果它是一个 web 项目，保存 jar 的基本位置是在 WEB-INF 中的 lib 文件夹下。如果它是 JavaProject，请确保您在 BuildPath(libraries) 中找到您的库

如果你确定它们被正确放置，那么你真的没有得到正确的 jar 文件。

# android - Android部署APK，重新安装而不是更新

> ID：10065500
> 
> 赞同：1
> 
> 时间：2012-04-08T18:57:55.960
> 
> 标签：android

我想发送我的 apk 更新，但我做了一些数据库更改，这会使应用程序崩溃。

所以用户必须卸载然后重新安装它。有没有办法部署一个apk，所以这是自动完成的。

或者清除之前安装的app数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:04:19.847

您可以提供`onUpgrade()`方法，然后您可以执行`alter table`SQL 参见： http: [//developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)，这需要您更改数据库版本号，以便在何时检测到应用程序启动。如果您的架构确实不同并且您想要保存现有数据，那么您应该将数据复制到临时表中，删除并创建架构并再次将其复制回来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:01:45.190

没有人会忽略/不阅读您在“新增功能”部分中提供的任何说明，并且您无法自动执行此操作。

您应该在应用程序中优雅地升级您的数据库。OpenHelper 类提供了执行此操作所需的所有功能。

[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:26:43.967

正如其他答案所表明的那样，您应该覆盖 onUpate() 方法以获得完美的用户体验。重新安装和清理很好......对我来说就像 1980 年的风格和 Android 的设计方式我几乎不怀疑它是受支持的。

因此，要回答最初的问题，不，我认为不可能通过其他应用程序管理应用程序。尽管我对执行此任务的任何方法缺乏了解并不能证明我认为这更多的是底层结构的问题。

Android 是一个基于 unix 的系统，每个应用程序都在该系统中注册为用户。在这种环境下，用户权限设置得很好，这意味着另一个用户（应用程序）不能轻易访问其他应用程序的数据，因此无法注入/劫持/优化代码。一个例外是例如 SD 卡等外部存储。在这里，每个具有正确权限的应用程序都可以随心所欲地四处游荡。

However back on the actual system there are some ways to grant applications to access foreign packages. However from what I've read it seems more to be designed for sharing specific information and settings. I doubt an uninstall routine will be found there.

Just before finishing I thought about the idea that your new application could ask the older version to remove itself and not start up unless is has done. For this approach maybe you find more information here. [Is it possible to programmatically uninstall a package in Android](https://stackoverflow.com/questions/891141/is-it-possible-to-programmatically-uninstall-a-package-in-android)

Nevertheless I also recommend you the onUpdate() solution since it's the way the system was designed and therefore the experience for the user will be much more satisfying and less complex.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T16:05:50.413

I had a similar problem. In my case my app loaded a database from assets, and when upgrading the database didn't change. What I did to solve that was to change the database file name (in the assets folder) and worked perfectly, just like if I did another db. It's not the best way to fix it but it solves the problem.

# html - 为什么我的背景 CSS 图像不显示

> ID：10065502
> 
> 赞同：2
> 
> 时间：2012-04-08T18:57:57.403
> 
> 标签：html, css

所以我制作了一个背景图像，它只有两个彩色条来匹配我的标题和导航栏。我只是希望它水平重复但它没有出现。这是显示我的文件和图像的屏幕截图： ![在此处输入图像描述](../Images/47bad9149ff2bd12d2fd25a64b41be32.png)

谢谢你的帮助！

HTML

```
 <!doctype html>
<html lang="en">
<head>
   <meta charset="utf-8" />
   <title>Tech MAX'd</title>
   <link rel="stylesheet" href="css/main.css" type="text/css"/>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
   <script src="js/general.js" type="text/javascript"></script>
</head>

<body>  
   <div id="big_wrapper">
      <header id="top_header">
         <h1>Welcome to Tech MAX'd</h1>
      </header>

      <nav id="top_nav">
         <ul>
            <li>... 
```

CSS

```
*{
   margin:0px;
   padding:0px;
}
h1{
    padding: 2px;
    color: #ffffff;
    font: 24px Palatino;
    display: inline-block;
}
h2{
   font: bold 14px Palatino;
}
header, section, footer, aside, nav, article, hgroup{
   display:block;
}
body{
margin: 0px;
padding: 0px;
text-align: center;
background: #e0e0e0 url(images/tmbackground.gif) repeat-x;
}
#big_wrapper{
   min-width:1000px;
   max-width: 1000px;
   margin: auto;
   text-align:left;
}
#top_header{
   padding:20px;
   background-color: #820000;
}
#top_nav{
   padding:7px 7px 7px 20px; /* top,right,bottom,left */
   background: -webkit-gradient(linear, left top, left bottom, from(#e9e9e9), to(#b6b6b6))
}
#top_nav li{
   display:inline-block;
   list-style:none;
   padding-right:25px; /*space between links*/
   font: bold 14px Tahoma;
}
a.topLinks{
    color: #4e4e4e;
    font: bold 16px Century;
    text-decoration: none
}
a.topLinks:hover{
    color: #820000;
    font: bold 16px Century;
    text-decoration: none
}
#new_div{
   display:inline;
}
#main_section{
   min-width: 630px;
   max-width: 630px;
   border: 1px solid #820000;
   background-color: white;
   float: left;
   margin: 20px;
   padding: 20px;
}
#side_news_banner{
    float: left;
    margin-top: 20px;
    margin-left: 15px;
}
.side_news{
   border: 1px solid red;
   width:220px;
   margin: 20px 0px;
   padding: 30px;
   background: #66CCCC;
}
#the_footer{
    clear: both;
   text-align:center;
   padding: 20px;
   border-top: 2px solid green;
}
article {
   background: #FFFBCC;
   border: 1px solid ;
   padding: 20px;
   margin-bottom: 10px;
}
article footer{
   text-align:right;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T19:06:02.237

除非目录 images 是 css 的子目录，否则需要使用

```
url(../images/background.gif) 
```

因为该位置是相对于 css 文件的。

此外，通常在选择器和“{”之间留一个空格，`body {`而不是`body{`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T19:02:54.023

~~很可能~~您将其保留在`http://example.com/images/background.gif`. 你的样式表说它在`http://example.com/css/images/background.gif`所以你得到一个 404 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:04:01.877

我不太明白为什么你需要 body 的 width 属性。但问题可能出在您的网址中。我想它应该是“/images/background.gif”。如果您输入“images/background.gif”，它将指定 css/images/background.gif。

# iphone - AWS S3 IOS sdk 中的困惑？

> ID：10065504
> 
> 赞同：2
> 
> 时间：2012-04-08T18:57:58.580
> 
> 标签：iphone, amazon-s3, amazon-web-services

我有一个 iPhone 应用程序，我喜欢在其中包含 IOS sdk for s3。我怀疑 getobject 请求是否可用于将音频文件从 s3 流式传输到我的应用程序。大家都说可以下载。不用于流。此 sdk 中是否还有其他方法仅用于流式传输。所以我不想下载文件。我只需要从 s3 流式传输我的音频文件的 url 并在 avaudioplayer 上播放它。

```
s3Client = [[AmazonS3Client alloc] initWithAccessKey:ACCESS_KEY withSecretKey:SECRET_KEY];              
S3GetObjectRequest *request = [[S3GetObjectRequest alloc] initWithKey:@"YOURKEY" withBucket:@"YOURBUCKET"];
S3GetObjectResponse *response = [s3Client getObject:request]; 
```

够了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:26:19.520

我认为苹果的 http 直播可以帮助你。请在以下链接中找到详细信息。 [https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html)

# asp.net - 如何在 ASP.NET MVC 或 ASPNET 中激活服务器端调试

> ID：10065506
> 
> 赞同：1
> 
> 时间：2012-04-08T18:58:05.203
> 
> 标签：asp.net, asp.net-mvc-3, debugging

我在我的机器上编码，现在我部署了 asp.net mvc 应用程序（在 3w DOT acidh-rdc DOT org 上）所以，在本地它向我显示控制器中的错误，如果有的话！（文件和线路等）但是，在线它不显示任何内容，它只返回 500http 代码，而不是向我显示产生该错误的原因。有人能告诉我我必须在我的配置文件中设置哪个指令吗？不是

```
<customError mode="Off|On|RemoteOnly"> 
```

因为它将我重定向到错误页面。如果我可以这么说，我希望我能看到调试信息（LINE、FILE 等）！

如何允许它在 asp.net 中在线调试，其次在 asp.net MVC 中？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:01:20.520

您可以在 global.asax `Application_Error()`方法中的其他任何地方出现任何错误，然后您可以将其写入日志中的某个位置，或者只是处理并发送您计划执行的自定义错误 html 字符串。

# facebook - 我可以判断用户是否已通过我的网站注册吗？

> ID：10065507
> 
> 赞同：0
> 
> 时间：2012-04-08T18:58:16.097
> 
> 标签：facebook, facebook-graph-api

我正在使用 XFBML 和注册插件来帮助用户在我的网站上进行注册。如果用户尚未注册，我只想显示注册按钮。有什么方法可以查看用户是否已在我的网站上注册？

如果用户尚未通过 facebook 注册，我只想显示此内容。

```
<fb:login-button registration-url="/register_facebook.php" /> 
```

如果用户已注册，此按钮将成为 Facebook 登录按钮，我想在其他地方处理，所以我只想在他们尚未注册时显示它。

任何人都知道这是否可行，如果可以，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T01:44:08.310

Facebook js api 有 FB.getLoginStatus 方法。此方法返回用户登录状态，并告知用户是否未授权。可能这会有所帮助。

```
window.fbAsyncInit = function() {
    FB.init({
        'appId': "APPID",
        'status': true,
        'cookie': true,
        'xfbml': true,
        'oauth': true
    });

    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
        } else if (response.status === 'not_authorized') {
            // The user has not authorized your app so far
            // do your stuff here (registration)
        } else {

        }
    });

};​ 
```

# c# - 显示来自数据库 Nvarchar 类型的图像

> ID：10065510
> 
> 赞同：0
> 
> 时间：2012-04-08T18:58:41.217
> 
> 标签：c#, asp.net-mvc-3

嗨，我正在使用 nvarchar 并且也尝试过参考，直到地图也显示像 ~/image/pics.jpg 这样的图像。在我的表中，我得到了 3 列 ID、图像和文本。id=int，图像=nvarchar(max) 文本=nvarchar(50)。

我怎样才能显示它们？有谁知道我可以遵循的指南或教程？

我到处搜索，但他们使用二进制和图像类型。如果我愿意，我只能显示文本和 ID，但在图像上它显示应该是图像但它没有显示的图标？

控制器

```
public ActionResult Index()
    {
    var pics = db.image.ToList();

    return View(pics);
    } 
```

看法

```
@foreach (var item in Model)
<tr>
<img src='@item.image' />
<tr/>
<tr>
@item.text
<tr/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:18:59.247

我创建了一个在我的视图中使用的辅助方法：

```
public static IHtmlString Image(this HtmlHelper htmlHelper, string url)
{
     return Image(htmlHelper, url, null);
}

public static IHtmlString Image(this HtmlHelper htmlHelper, string url, object htmlAttributes)
{
     TagBuilder imgTag = new TagBuilder("img");
     UrlHelper urlHelper = new UrlHelper(htmlHelper.ViewContext.RequestContext);

     imgTag.MergeAttribute("src", urlHelper.Content(url));
     imgTag.MergeAttributes(new RouteValueDictionary(htmlAttributes));

     return new HtmlString(imgTag.ToString(TagRenderMode.SelfClosing));
} 
```

在我看来，我有以下几点：

```
@model MyProject.ViewModels.MyViewModel

@foreach (var file in Model.UploadedFiles)
{
     @Html.Image(file.Path)<br />
} 
```

我的视图模型：

```
public class MyViewModel
{
     public IList<UploadedFile> UploadedFiles { get; set; }
} 
```

上传文件类：

```
public class UploadedFile
{
     public string Path { get; set; }
} 
```

现在，如何填充 UploadedFiles 属性取决于您。我会用数据库调用来做这样的事情：

```
public ActionResult MyActionMethod()
{
     MyViewModel viewModel = new MyViewModel
     {
          // Database call to return paths
          UploadedFiles = fileService.GetFiles()
     };

     return View(viewModel);
} 
```

可能有更好的方法来做到这一点，但这会帮助你找到一个方向。希望这可以帮助。

# javascript - 如何使用 jquery 链接到 gif 图像？

> ID：10065511
> 
> 赞同：1
> 
> 时间：2012-04-08T18:58:48.627
> 
> 标签：javascript, jquery, jquery-selectors

我已经实现了无限滚动到我的网站用户帐户区域，并且在加载更多数据之前，当用户滚动文本时会短暂显示，如您在此处的代码中所见：

```
if ($('.pagination').length) {
  $(window).scroll(function() {
    var url;
    url = $('.pagination .next_page').attr('href');
    if (url && $(window).scrollTop() > $(document).height() - $(window).height() - 50) {
      $('.pagination').text("Fetching more products...");
       $.getScript(url);
    }
  });
  $(window).scroll();
}; 
```

我有一个动画 gif 图像，我想改为显示，想知道如何去做？是否可以直接链接到图像？

显示图像而不是文本的正确方法是什么？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:03:28.720

只需将方法从`text()`to更改为`html()`，例如：

```
$('.pagination').html('<img src="loading.gif" width="30" height="30" alt="loading..." />'); 
```

您可以在该方法中使用任何形式的 HTML，因此您可以将图像包装在链接或其他任何内容中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:01:52.703

```
$('.pagination').html($('<img src="yourimage.gif"/>'); 
```

或者

```
$('.pagination').html($('<img/>').attr('src','yourimage.gif')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T19:02:34.103

我认为没有“正确”的方式，但考虑到您现有的代码，这应该很简单：

```
$('.pagination').html('<img src="spinner.gif">'); 
```

另一个诱人的选择是使用一些 CSS 添加微调器：

```
.pagination.loading{background:url('spinner.gif') no-repeat} 
```

然后切换类：

```
$('.pagination').addClass('loading'); 
```

但同样，这一切都取决于您的工作流程和视觉偏好。

# c# - 适用于 Ubuntu 上 MonoDevelop 的 Android

> ID：10065513
> 
> 赞同：4
> 
> 时间：2012-04-08T18:59:19.053
> 
> 标签：c#, android, mono, monodevelop

我是 Ubuntu 的新手。之前，我在 Windows 中使用 VS 并使用 C# 开发应用程序。现在，我想开始开发 Android 应用程序。搜索后...我安装了 MonoDevelop。我开始为此阅读文档。在[此](http://docs.xamarin.com/android/getting_started/installation)页面上，我知道应该为 android 安装 Mono，但我在 Ubuntu 上找不到这个。仅适用于 Windows 和 Mac。我真的是首发！请帮我清理一下这意味着什么..！如果我有错误，请告诉我如何使用 MonoDevelop 和 C# 开始开发 Android 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:15:46.363

用于 Android 开发的 Mono 仅在 Windows 和 Mac OS X 上受支持。它目前不受任何 Linux 发行版的支持。

# linux - Linux 重击。2行有什么区别？

> ID：10065515
> 
> 赞同：2
> 
> 时间：2012-04-08T18:59:52.813
> 
> 标签：linux, bash, scripting

我有以下 bash 脚本：

```
 1  #!/bin/bash
 2  query='query= SELECT * WHERE { ?s ?p ?o } LIMIT 5'
 3  cmd="curl $1 -s -d \"$query\""
 4  echo "$cmd"
 5  # curl $1 -s -d "$query"
 6  # $cmd 
```

第 5 行和第 6 行也必须这样做。当我取消注释第 5 行时，一切正常。但是对于第 6 行，没有什么是行不通的。

所以我想知道有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:08:43.583

不; 在第 4 行中，您只是通过“回显”命令来显示命令；第 6 行实际执行命令。

例如

```
$eg="ls /var/www"
echo $eg #This would literally return ls /var/www"
$eg #This would return the directory listing of /var/www/ (actually run the command). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:25:34.660

`$query`第 5 行作为单个参数传递。第 6 行将每个单词 of`$query`作为单独的参数传递，`"`在第一个的开头和`"`最后一个的结尾。[把你的论点放在一个数组中。](http://mywiki.wooledge.org/BashFAQ/050)

# mysql - 通过脚本为 Drupal 6 安装创建 MySQL 数据库

> ID：10065517
> 
> 赞同：0
> 
> 时间：2012-04-08T18:59:58.767
> 
> 标签：mysql, shell, scripting, drupal-6

我正在尝试自动创建新的本地 Drupal 6 安装以进行模块开发等。

我知道如何编写 bash 脚本并在我的本地开发环境中安装了 drush，但我不知道如何编写将创建必要的 MySQL 数据库的脚本。任何建议都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T21:47:59.357

我对我的自动创建脚本使用以下查询：

```
GRANT USAGE ON *.* TO db_name@127.0.0.1 IDENTIFIED BY 'db_name' WITH MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0;
CREATE DATABASE IF NOT EXISTS db_name;
GRANT ALL PRIVILEGES ON *.* TO db_name@127.0.0.1;
FLUSH PRIVILEGES; 
```

shell 命令如下所示：

```
echo "$sql" | mysql -uuser -ppassword 
```

这取自 PHP 中的自定义 drush 命令脚本，但我认为在 bash 脚本中也可以正常工作。

# c# - 重命名后 Visual Studio 仍在寻找旧的 dll

> ID：10065518
> 
> 赞同：0
> 
> 时间：2012-04-08T19:00:02.853
> 
> 标签：c#, visual-studio, visual-studio-2010, asp.net-mvc-3

我有一个 MVC 3 项目，我从

```
FooApplication 
```

到

```
FooApplication.BackOffice 
```

现在，当我尝试运行该应用程序时，我收到如下异常：

```
error CS0246: The type or namespace name 'FooApplication' could not be found (are you missing a using directive or ... 
```

实际上应该是哪个`FooApplication.BackOffice`。

我确实从属性重命名了项目，还重命名了文件夹并再次添加到解决方案中。

我怎样才能解决这个问题？

**编辑：**当我在输出窗口中构建项目时，我可以看到`FooApplication.BackOffice`已生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T18:17:16.360

probably you should change the namespace to FooApplication.BackOffice, see if that works

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:02:57.643

应用 VS 重构。您可能更改了一些设置，但这些设置适用于完成此更改后创建的新文件。

**编辑**

如果这不起作用，还有其他一些选择...

*   使用 Visual Studio 的 Find and Replace 功能手动检查

*   相关文件（尤其是由 Visual Studio 自动生成的文件）并根据需要替换

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:10:12.193

我有过几次。

Delete your bin folder then rebuild the solution. When you rebuild vs solutions it doesn't remove invalid files. The error is misinformation, it should complain that the old dll still exists.

After the rebuild it should be fine.

# codeigniter - 在 CodeIgniter 中允许特殊字符

> ID：10065519
> 
> 赞同：0
> 
> 时间：2012-04-08T19:00:05.147
> 
> 标签：codeigniter, utf-8, character-encoding, character

我有问题：如果我使用`preg_replace`纯 PHP，它可以工作。但是在 CodeIgniter 中，它不起作用。我已经搜索并做了一些更改，例如：制作通用 UTF-8、设置`$config['permitted_uri_chars']`、使用`header('Content-type: text/html; charset=utf-8');`和使用`meta http-equiv="Content-Type" content="text/html; charset=utf-8"`...

...但是这些都没有解决问题。

例子：

```
$text='namé';
echo $text; 
```

结果是

```
nam� 
```

该字符串中的最后一个字符未正确呈现。

关于如何允许在 CodeIgniter 中编写特殊字符，任何人都可以帮助或指出正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:24:15.250

**解决方案：**

```
$text='namé';
$decoded= utf8_decode($text);
echo $decoded; 
```

**输出：**

```
namé 
```

# java - 如何通过 netty 连续流式传输数据？

> ID：10065520
> 
> 赞同：0
> 
> 时间：2012-04-08T19:00:15.747
> 
> 标签：java, netty

我想通过套接字按需将 RTP 数据流式传输给用户。我想每 100 毫秒流式传输大量数据。最初，我认为我可以通过使用 Netty 来做到这一点。但是，我遇到的问题是，当我每 100 毫秒通过 Channel.write 写入数据时，客户端每次调用 write 时都将数据视为单独的流。所以客户端应用程序无法使用我的流。

我想我可能无法正确创建 ChannelPipeline。我尝试寻找方法，但找不到示例。有人知道在netty中做到这一点的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:09:07.673

使用 Channel.write(..) 是正确的。我认为您只需要确保在每次写入时还包含正确的 rtp 标头，这样他们的接收器就可以再次正确组装所有内容。

# html - div 像面板一样

> ID：10065521
> 
> 赞同：2
> 
> 时间：2012-04-08T19:00:24.587
> 
> 标签：html

我有一个带有凹槽边框的 div。我希望它看起来像这个面板： http: [//www.devmanuals.com/images/images1/444Panel1.gif](http://www.devmanuals.com/images/images1/444Panel1.gif)

图片上的面板标题为“用户注册”。如何让我的 div 有一个像面板一样的标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:09:48.793

这称为**fieldset**，它是一个基本的 HTML 标记。

```
 <fieldset>
    <legend>User Registration</legend>
    User name: <input type="text" /><br />
    Password: <input type="text" /><br />
  </fieldset> 
```

我不愿意给你[这个网站](http://www.w3schools.com/tags/tag_fieldset.asp)的链接，但它确实有能力让你在那里试用你的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:14:22.690

尝试“字段集”：

```
<fieldset>
    <legend>caption goes here</legend>
</fieldset> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T22:44:38.500

您可以对字段集进行一些样式设置。

样式表.css

```
fieldset.panel
{
    border: 1px solid #000;
    width: 200px;
}
fieldset.panel input[type=text]
{
    width: 170px;
} 
```

用法

```
<fieldset class="panel">
    <legend>User Registration</legend>
    User name:<br/><input type="text"/><br/>
    Email-id:<br/><input type="text"/><br/>
    Password:<br/><input type="text"/><br/>
    Confirm password:<br/><input type="text"/><br/>
    <br/>
    <input type ="submit" value="Register"/>
</fieldset> 
```

基本上它使用一个字段集，但具有一些基本样式，css 类`panel`将使边框 1px 纯黑色，输入都将是 170px 宽度，因为 css 样式只会应用于`input`s`type`并且`text`在`fieldset`其内部`class`属性是`panel`, 翻译成 css 是这样的：`fieldset.panel input[type=text]`.

# text - 在远程 FTP 站点上的文件中搜索

> ID：10065524
> 
> 赞同：10
> 
> 时间：2012-04-08T19:00:28.727
> 
> 标签：text, cygwin, grep, lftp

我正在寻找一种在远程 ftp 服务器上的所有文件/目录中搜索特定文本行的方法。

到目前为止，我正在`Cygwin`使用`lftp`. 我最远的是使用命令：

> ls -l | grep 模式

...在 lftp 模式下。

但是，这只是查看为模式返回的文件名。我想在文件中搜索模式。

也许已经有一个软件包可以做到这一点。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T17:57:50.577

你必须要么有：

*   一个 FTP 客户端，它会下载所有内容，然后搜索它（*可能会失败*），或者
*   服务器必须有一些支持搜索的扩展（*我从未听说过*）

[askubuntu.com](http://askubuntu.com)上有[一些替代方案](https://askubuntu.com/questions/19291/is-there-an-ftp-client-gui-that-will-let-me-search-for-text-inside-files)可能会有所帮助，但除非您可以在远程服务器上访问，否则一切都将是*全部下载并在本地搜索*的变体。`shell / SSH`

# git - GitHub：如何将公共存储库的分支设为私有？

> ID：10065526
> 
> 赞同：377
> 
> 时间：2012-04-08T19:00:50.410
> 
> 标签：git, eclipse, github, egit

如何分叉公共存储库，但将我的分叉设为私有？我确实订阅了支持私有存储库。

* * *

## 回答 #1

> 赞同：553
> 
> 时间：2015-05-20T14:17:11.943

答案是正确的，但没有提到如何在公共 repo 和 fork 之间同步代码。

这是完整的工作流程（我们在开源[React Native](https://github.com/facebook/react-native)之前已经这样做了）：

* * *

首先，像其他人所说的那样复制 repo（详情请[点击此处](https://help.github.com/articles/duplicating-a-repository/)）：

`private-repo`通过[Github UI](https://github.com/new)创建一个新的 repo（我们称之为） 。然后：

```
git clone --bare https://github.com/exampleuser/public-repo.git
cd public-repo.git
git push --mirror https://github.com/yourname/private-repo.git
cd ..
rm -rf public-repo.git 
```

* * *

克隆私人仓库，以便您可以使用它：

```
git clone https://github.com/yourname/private-repo.git
cd private-repo
make some changes
git commit
git push origin master 
```

* * *

从公共回购中获得新的热点：

```
cd private-repo
git remote add public https://github.com/exampleuser/public-repo.git
git pull public master # Creates a merge commit
git push origin master 
```

太棒了，您的私人仓库现在拥有来自公共仓库的最新代码以及您的更改。

* * *

最后，创建一个 pull request 私有 repo -> public repo：

使用 GitHub UI 创建公共 repo 的 fork（公共 repo 页面右上角的小“Fork”按钮）。然后：

```
git clone https://github.com/yourname/the-fork.git
cd the-fork
git remote add private_repo_yourname https://github.com/yourname/private-repo.git
git checkout -b pull_request_yourname
git pull private_repo_yourname master
git push origin pull_request_yourname 
```

现在，您可以通过 Github UI 为 public-repo 创建一个拉取请求，如此[处](https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request-from-a-fork)所述。

一旦项目所有者审查了您的拉取请求，他们就可以合并它。

当然，整个过程可以重复（只需省略添加遥控器的步骤）。

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2015-01-28T11:35:52.090

现在还有一个选择（2015 年 1 月）

1.  创建一个新的私人仓库
2.  在空的回购屏幕上有一个“导入”选项/按钮 ![在此处输入图像描述](../Images/c642e29478ff4e9811e22cf95601064a.png)
3.  单击它并放置现有的 github repo url 没有提及 github 选项，但它也适用于 github repos。 ![在此处输入图像描述](../Images/2d03fa21db304151f0b36254312303c0.png)
4.  完毕

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2013-05-14T23:51:43.997

当前的答案有点过时了，为了清楚起见：

简短的回答是：

1.  做一个公共回购的**裸克隆**。
2.  创建一个新的私人。
3.  对新的私人**镜像推送。**

这记录在 GitHub 上：[duplicating-a-repository](https://help.github.com/articles/duplicating-a-repository)

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2012-11-08T07:57:58.140

你必须复制回购

你可以看到这个文档（来自 github）

> 要在不分叉的情况下创建存储库的副本，您需要对原始存储库运行特殊的克隆命令并将镜像推送到新存储库。
> 
> 在以下情况下，您尝试推送到的存储库——例如 exampleuser/new-repository 或 exampleuser/mirrored——应该已经存在于 GitHub 上。有关详细信息，请参阅“创建新存储库”。
> 
> ## 镜像存储库
> 
> 要进行精确复制，您需要同时执行裸克隆和镜像推送。
> 
> 打开命令行，输入以下命令：
> 
> ```
> $ git clone --bare https://github.com/exampleuser/old-repository.git
> # Make a bare clone of the repository
> 
> $ cd old-repository.git
> $ git push --mirror https://github.com/exampleuser/new-repository.git
> # Mirror-push to the new repository
> 
> $ cd ..
> $ rm -rf old-repository.git
> # Remove our temporary local repository 
> ```
> 
> 如果您想在另一个位置镜像存储库，包括从原始位置获取更新，您可以克隆一个镜像并定期推送更改。
> 
> ```
> $ git clone --mirror https://github.com/exampleuser/repository-to-mirror.git
> # Make a bare mirrored clone of the repository
> 
> $ cd repository-to-mirror.git
> $ git remote set-url --push origin https://github.com/exampleuser/mirrored
> # Set the push location to your mirror 
> ```
> 
> 与裸克隆一样，镜像克隆包括所有远程分支和标签，但每次获取时都会覆盖所有本地引用，因此它始终与原始存储库相同。设置推送的 URL 可以简化推送到您的镜像。要更新您的镜像，获取更新并推送，这可以通过运行 cron 作业来自动化。
> 
> ```
> $ git fetch -p origin
> $ git push --mirror 
> ```

[https://help.github.com/articles/duplicating-a-repository](https://help.github.com/articles/duplicating-a-repository)

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2019-01-11T01:15:07.713

GitHub 现在有一个导入选项，可让您选择您希望新导入的存储库公开或私有的任何内容

[![Github 存储库导入](../Images/d678026bb5e52636847253a58718555e.png)](https://i.stack.imgur.com/PHw4z.png)

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2020-09-01T03:01:55.400

只需转到[https://github.com/new/import](https://github.com/new/import)。

[![GitHub 导入](../Images/a9ec5693fbca11deb38280f8a2de9730.png)](https://i.stack.imgur.com/szUcA.png)

在“您的旧存储库的克隆 URL”部分中粘贴您想要的存储库 URL，然后在“隐私”中选择`Private`.

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2021-02-28T07:38:00.197

## 2021 更新

我是 git 新手，所以想在 eclipse GUI（v2020-12；EGit v5.11）中做尽可能多的事情。详情如下。

***--->***其他答案中的导入方法仅适用于 Subversion、Mercurial 或 TFS 项目。正如我亲身了解到***的，GitHub 不支持 git 项目。***它可能有效，但为什么要冒险呢？

* * *

**存储库和 GitHub 连接**

`eclipse/org.aspectj`是*原始公共仓库*，`upstream`远程获取
`cb4/org.aspectj`是*分叉*，`origin`远程推送
`cb4/remPrivAJ`是*远程私有仓库*，`private`远程推送
`I:\local`是*本地仓库*

对于 github 身份验证，我使用 ssh 和 ed25519 密钥（[此 SO 答案中的步骤](https://stackoverflow.com/questions/66179890/how-to-add-an-ed25519-ssh-key-to-eclipse-for-use-with-github)），因此我的连接 URI 如下所示`ssh://git@github.com/<user>/<repo>`：

**符号：** `->` 是鼠标点击或选择；`right->` 是右键单击。

* * *

**脚步**

1.  在 github 上，将原始公共仓库[fork](https://docs.github.com/en/github/getting-started-with-github/fork-a-repo)到您的 github 帐户
2.  在 github 上，[创建空的远程私有仓库](https://docs.github.com/en/github/getting-started-with-github/create-a-repo)
3.  在 eclipse Git Perspective 中，将 fork 克隆到新的本地 repo 并进行配置

*   3.1`-> Clone a Git Repository and add clone to this view -> Clone URI -> Next`
    *   3.1.1 根据需要输入 URI、连接和身份验证信息`-> Next`
    *   3.1.2。选择所需的分支（我只选择了master）`-> Next`
    *   3.1.3\. 输入本地仓库的目标目录
    *   3.1.4。现在导入项目或稍后再做，然后`-> Finish`填充本地仓库
*   3.2\. 将原始公共 repo 配置为一个新的远程，命名`upstream`为下拉更新
    *   3.2.1。`right-> Remotes -> Create Remote ->`并输入姓名`upstream`
    *   3.2.2\. `-> Configure fetch -> Create -> Change ->`输入原始回购 URI`-> Finish`
    *   3.2.3。`-> Save and Fetch ->`所有分支都已下载`-> Close`
    *   3.2.4。注意：我只想要主分支，所以这样做*而不是*步骤 3.2.3
    *   3.2.5。`-> Advanced`下`Specifications to fetch`，删除那里的唯一条目
    *   3.2.6。在下`Add create/update specification -> Source ref: dropdown`并选择`master [branch] -> +Add Spec -> Force Update`
    *   3.2.7。`-> Save specifications in upstream configuration -> Finish -> Save and Fetch ->`仅下载 master 分支`-> Close`

* * *

4.  [将远程公共存储库复制](https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/duplicating-a-repository)到您的远程私有存储库并进行配置。这是eclipse中唯一无法完成的步骤，所以我安装了Git for Windows并使用了GitCMD。

像这样：

```
git clone --bare git://github.com/eclipse/org.aspectj.git tmpRepo
<if prompted, enter ssh passphrase>
cd tmpRepo    
git push --mirror ssh://git@github.com:cb4/private.git
<if prompted, enter ssh passphrase>
cd ..    
rmdir tmpRepo /s /q 
```

* * *

5.  将远程私有仓库配置为一个新的远程命名`private`为推送

*   5.1。`right-> Remotes -> Create Remote ->`并输入姓名`private`
*   5.2\. `-> Configure push -> Create -> Change ->`输入远程私有仓库 URI`-> Finish`
*   5.3.`-> Advanced -> Add All Branches Spec -> Force Update -> Save specifications in origin configuration -> Finish`
*   5.4\. `-> Save and Push`master 分支被推送`-> Close`

此时，您已将公共存储库分叉到您的私有存储库中。要查看如何将私有更改推送到您的 fork，然后针对原始公共存储库打开拉取请求，[请参阅我的答案](https://stackoverflow.com/questions/8834755/github-pull-request-from-private-to-public-repo-possible)。生成的配置如下所示：
[![配置](../Images/f4f5cd428266e51bde235248cd379d11.png)](https://i.stack.imgur.com/mz9YE.png)

# parsing - 为什么我们不能使用 CFG 来扫描/标记化？

> ID：10065527
> 
> 赞同：2
> 
> 时间：2012-04-08T19:01:11.060
> 
> 标签：parsing, language-agnostic, compiler-construction

我的编译器课程有一个练习考试，其中有以下我无法回答的问题：

1.  为什么我们不能使用上下文无关语法（CFG）来扫描/标记？
2.  为什么我们不使用确定性有限自动机 (DFA) 进行解析？

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T19:15:33.703

这两种说法都不正确。

您绝对可以使用 CFG 进行扫描和标记化。事实上，每种正则语言也是上下文无关的，因此您可以重写扫描仪以使用上下文无关语法而不是正则表达式进行扫描。不这样做的主要原因是它通常是矫枉过正的。标记很少有复杂的结构，而正则表达式通常工作得很好。但是，您可以考虑可能要使用 CFG 的实例。例如，在 C++ 中，处理模板中的右尖括号通常需要编译器进行特殊大小写。例如，`vector<vector<int>>`应该标记为`vector` `<` `vector` `<` `int` `>` `>`，尽管使用一组标准的正则表达式，两个右大括号将被扫描为`>>`标记。使用上下文无关语法进行扫描可以通过拥有更多上下文来缓解这种情况。

此外，只要您的语言足够简单，您绝对可以使用正则表达式进行解析。大多数语言都过于复杂，无法使用正则表达式进行编码（例如，任何涉及嵌套括号的内容都无法使用正则表达式进行解析），因此我们倾向于使用 CFG 代替，但有些语言可以使用正则表达式进行解析。例如，将 DFA 描述为这样的表肯定可以通过正则表达式进行解析：

```
 0    1
 q0  q1   q0
 q1  q0   q1 
```

然而，大多数真正的编程语言没有规则结构，因此在实践中使用上下文无关语法。

希望这可以帮助！

# java - 括号标识符Java

> ID：10065536
> 
> 赞同：3
> 
> 时间：2012-04-08T19:02:20.840
> 
> 标签：java, regex, string, char, iteration

如果您能在 Java 中帮助我解决这个问题，我将不胜感激。

给定两个字符串，假设`String A = "(A+B)+(C)"`and `String B = "((A+B)+(C))"`and `String C = (A+B)`and `String D = A+(B+C)`and`String E = (A+(B+C))`

如何确定字符串是否完全被括号包围，如字符串 B。

例如：`boolean flag(String expr) { //return false if surrounded, else true }`

如果`expr = A`, flag 将返回 true

如果`expr = B`, flag 将返回 false

如果`expr = C`, flag 将返回 false

如果`expr = D`, flag 将返回 true

如果`expr = E`, flag 将返回 flase

抱歉，如果不清楚，但它应该适用于任何 String 表达式：

假设表达式仅包含**Digits**和**Operators**和**Parenthesis**。

谢谢。欣赏它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:07:28.550

您不能使用正则表达式*，因为嵌套括号不是常规语言。

而是遍历字符串并通过计算左括号和右括号的数量来跟踪嵌套级别。为每个左括号添加一个到嵌套级别。对于每个右括号减一。

*   如果在到达字符串末尾之前达到零（或更少），则返回 true。
*   如果最后达到零，则返回 false。
*   其他任何内容都是不平衡的括号，除非您的输入无效，否则不应发生。

以下是一些演示该原理的工作示例：

```
(A+B)+(C)
11110        TRUE

((A+B)+(C))
12222112210  FALSE

(A+B)
11110        FALSE

A+(B+C)
0            TRUE

(A+(B+C))
111222210    FALSE 
```

*理智地

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:19:18.623

我在您的情况下看到了 2 个选项。

1.  使用子串方法

例子：

```
public boolean checkForParanthesis(String str) {
 Integer last = str.length() - 1; // Get number of the last character
 String firstChar = str.substring(0); // Get first character of the string
 String lastChar = str.substring(last); // Get last character of the string
 if (firstChar.equals("(") && lastChar.equals(")")) return false;
 return true
} 
```

1.  使用正则表达式。也许这是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T20:42:50.580

Mark Byers 的算法似乎大致就是您正在寻找的。现在把它放在一起，你必须使用Java 关键字`for`和`if`索引。一个示例可能是以下代码。但是，它不会验证表达式，因此在`A+B)`测试无效表达式时不会引发错误（仅`true`返回值）。检查并自己测试。希望这个对你有帮助...

```
 package test;

public class Main {

  public static void main(String[] args) {
    Main m = new Main();
    m.start();
  }

  private void start() {
    /* true */
    System.out.println(isNotSurrounded("A"));
    System.out.println(isNotSurrounded("A+B"));
    System.out.println(isNotSurrounded("A+(B+C)"));
    System.out.println(isNotSurrounded("(B+C)+D"));
    System.out.println(isNotSurrounded("A+(B+C)+D"));
    System.out.println(isNotSurrounded("(A+B)+(C)"));
    System.out.println(isNotSurrounded("(A)+(B)+(C)"));
    System.out.println(isNotSurrounded("(A)+((B)+(C))+(D+E+F+(G))"));
    /* false */
    System.out.println();
    System.out.println(isNotSurrounded("(A)"));
    System.out.println(isNotSurrounded("(A+B)"));
    System.out.println(isNotSurrounded("(A+(B+C))"));
    System.out.println(isNotSurrounded("((B+C)+D)"));
    System.out.println(isNotSurrounded("(A+(B+C)+D)"));
    System.out.println(isNotSurrounded("((A+B)+(C))"));
    System.out.println(isNotSurrounded("((A)+(B)+(C))"));
    System.out.println(isNotSurrounded("((A)+((B)+(C))+(D+E+F+(G)))"));
  }

  private boolean isNotSurrounded(String expression) {
    if (expression.startsWith("(") && expression.endsWith(")") && expression.length() > 2) {
      int p = 0;
      for (int i = 1; i < expression.length() - 1; i++) {
        if (expression.charAt(i) == '(') {
          p++;
        } else if (expression.charAt(i) == ')') {
          p--;
        }
        if (p < 0) {
          return true;
        }
      }
      if (p == 0) {
        return false;
      }
    }
    return true;
  }
} 

```

代码输出如下：

```
 true
true
true
true
true
true
true
true

false
false
false
false
false
false
false
false 

```

# php - 包括和 GET

> ID：10065544
> 
> 赞同：1
> 
> 时间：2012-04-08T19:02:59.790
> 
> 标签：php

我目前在我的网站上有一个用于导航的无序列表的配置文件，当单击列表项时，它会从 AJAX 调用加载内容。

```
"Users Uploads" -> AJAX -> request.php with $_POST['id'] = '1' & $_POST['request'] = 'users_uploads' -> include_once('user_uploads.php'); 
```

现在的问题是我无法将 $_GET 传递给 user_uploads.php，因为它需要它来查找特定的用户上传。我知道这是一种处理请求的糟糕方式，但我已经为其他选项卡设置了它。

```
if($_POST['request'] == "photos"){$user->requestPhotos($_POST['id']);} 
```

以某种方式将 $_GET 传递给 user_uploads.php 的有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:09:17.757

user_uploads 不能直接检查 $_GET 的任何原因？否则，该脚本中发生的任何事情都可以封装在一个函数中，然后您将 $_GET 值作为参数传递。

或者您将 $_GET 复制到 user_upload 代码检查的全局变量。

# java - Eclipse 中的 GWT - 加载模块时出错

> ID：10065545
> 
> 赞同：1
> 
> 时间：2012-04-08T19:03:01.767
> 
> 标签：java, gwt, module, enums

我有一个我制作的 java 应用程序，这周我尝试将 GWT 添加到它。尝试在 GWT Designer 中查看我的课程时出现此错误：

```
Error loading module(s).

GWT Designer can't load a module because of error in gwt.xml module description, incorrect resource which requires processing with GWT generator or by some other configuration error.

Please check your $project_dir/.gwt/.gwt-log for GWT-specific errors (not GWT Designer errors).

This log has the following error messages:

   [ERROR] Errors in 'file:/C:/Temp/essd/Projecto/anacom/src/main/java/anacom/shared/dto/OutputObterModoDto.java'

      [ERROR] Line 8: No source code is available for type anacom.domain.Modo; did you forget to inherit a required module?

   [ERROR] Errors in 'file:/C:/Temp/essd/Projecto/anacom/src/main/java/anacom/shared/dto/TelemovelDetalhadoDto.java'

      [ERROR] Line 8: No source code is available for type anacom.domain.Modo; did you forget to inherit a required module?

   [ERROR] Errors in 'file:/C:/Temp/essd/Projecto/anacom/src/main/java/anacom/shared/exception/TelemovelModoException.java'

      [ERROR] Line 17: No source code is available for type anacom.domain.Modo; did you forget to inherit a required module?

   [ERROR] Errors in 'file:/C:/Temp/essd/Projecto/anacom/src/main/java/anacom/shared/dto/OutputObterModoDto.java'

      [ERROR] Line 8: No source code is available for type anacom.domain.Modo; did you forget to inherit a required module?

   [ERROR] Unable to find type 'anacom.presentationserver.client.AnacomGWT'

      [ERROR] Hint: Previous compiler errors may have made this type unavailable

      [ERROR] Hint: Check the inheritance chain from your module; it may not be inheriting a required module or a module may not be adding its source path entries properly 
```

所有有该错误的文件都导入了类 anacom.domain.Modo。该类是一个枚举，仅包含以下内容：

```
package anacom.domain;

public enum Modo {
    LIGADO, DESLIGADO, OCUPADO, SILENCIO
} 
```

此外，在 gwt.xml 中，我继承了模块并定义了入口点类。在过去的三天里，我一直在努力解决这个问题。如果你能帮助我，我将不胜感激。抱歉，如果这是一个新手问题，但在我通过网络搜索时，我没有找到解决方案。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:50:34.573

以下是问题的一些可能性。

1.  确保已将 gwt.xml 文件放在 anacom 包下。即anacom/gwt.xml
2.  您已`<source path="domain">`在 gwt.xml中添加
3.  使您的枚举可序列化，即

    公共枚举 Modo 实现 Serializable {

    LIGADO、DESLIGADO、OCUPADO、SILENCIO

    }

或者

```
public enum Modo implements IsSerializable {
    LIGADO, DESLIGADO, OCUPADO, SILENCIO
    } 
```

4）生成一个默认构造函数，即

```
public Modo () {
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T22:01:52.873

好吧，我设法找到了解决方案。不是我所期望的，但它解决了这个问题。

我将枚举类移动到另一个包；DTO 和异常位于共享包下，然后位于它们各自的文件夹中。我在共享下创建了一个域文件夹。然后我改变了我的 dml 和我所有的其他类（相信我，这是一个本地和远程运行的大项目），所以引用的枚举就是这个。

所以我猜想枚举和 DTO 的解决方案是有相同的包。我还在模块文件中包含了域文件夹。

谢谢大家试图帮助我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T06:09:53.650

## 1.确保项目包含包anacom.domain.Modo必须有一个gwt.xml文件，你应该从你的启动项目中引用它

## 2.确保客户端不引用服务器端包中的任何对象类型

您知道 gwt 应用程序由两个或三个主要部分组成，它们是客户端、服务器和共享包。通常客户端应用程序不会根据设计原则引用服务器包中的类型。你也可以考虑这个细节。

对于此示例，键入“anacom.domain.Modo”似乎是在服务器端包中。

# objective-c - “addObserver：”和“didChangeValueForKey：”是否有相同的目的？

> ID：10065546
> 
> 赞同：1
> 
> 时间：2012-04-08T19:03:16.767
> 
> 标签：objective-c, cocoa, key-value-observing

我对 Objective-C 中的 KVO 有点困惑。如果我的属性符合 KVO，我是否有两种选择来发出通知：1.`addObserver:.../observeValueForKeyPath:...`和 2\. `did/willChangeValueForKey...`，还是我们应该`did/willChangeValueForKey`在特定上下文中使用这些方法？

我注意到第二个 ( `did...`) 可用于将多个更改分组到单个通知中；关于这两种方式还有其他重要的事情需要了解吗？第一种方法 ( `addObserver:...`) 是否无法在某些上下文中使用（尽管上下文符合 KVO）？

编辑：在 NSManagedObject 的子类中，只 `did/willChangeValueForKey...`使用了，但没有使用`addObserver:.../observeValueForKeyPath:...`：你知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:20:30.583

这两对被KVO交互的双方使用；它们根本不可互换。

`addObserver:forKeyPath:options:context:`并由想要进行观察`observeValueForKeyPath:ofObject:change:context:`的*客户使用。*

`observeValueForKeyPath:ofObject:change:context:`本质上是一个回调；当观察到的（“提供者”）对象使用另一组方法（各种/ ）时，它将由内部 KVO 机制*发送*。通知实际上是在那个时候通过方法发出的。`did``will` `changeValueFor...``change`

# javascript - 为 Safari 开发 javascript -- 防止死球

> ID：10065551
> 
> 赞同：1
> 
> 时间：2012-04-08T19:03:50.993
> 
> 标签：javascript, debugging, safari, crash

我发现自己写了很多类似下面的代码，但我仍然遇到很多死亡事故。它使整个代码编写过程变得更加痛苦，感觉应该如此。那里有更好的方法吗？

```
function drawArrowsInDocument (document, boxes, context) {
    console.log ("drawArrowsInDocument");
    var body = document.body;
    if (!body) {
        console.log ("no body!");
        return;
    }
    var rectangles = rectanglesWithBoxes(boxes);
    if (!rectangles) {
        console.log ("no rectangles!");
        return;
    }
    var descendants = body.childNodes;
    if (!descendants) {
        console.log ("no descendants");
        return;
    }
    var length = descendants.length;
    if (length>10000) {
        console.log ("too many descendants");
        return;
    }
    // now I know my variables actually exist, and I can do something with them. 
```

这是我在崩溃时看到的。那时我唯一能做的就是重新启动 Safari，并添加更多 if 语句来查找问题。

![碰撞](../Images/5e523eb47065b2fd7ad16b43108477f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:39:59.240

使用[断言](http://ejohn.org/apps/learn/)而不是 console.log。有内置的`console.assert`：

```
console.assert(Number("a"),"Not a Number",Number("a")) 
```

[单元测试框架](http://msdn.microsoft.com/en-us/magazine/gg655487.aspx)可以帮助您将测试与代码分开，以避免在部署之前删除控制台语句。

**参考**

*   [Safari Web Inspector 指南：控制台 API](https://developer.apple.com/library/safari/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/Console/Console.html#//apple_ref/doc/uid/TP40007874-CH6-SW3)

# ajax - 我不了解 servlets 3.0 API 中的异步支持

> ID：10065553
> 
> 赞同：33
> 
> 时间：2012-04-08T19:04:04.357
> 
> 标签：ajax, jakarta-ee, servlets

我来自 Java SE 背景，我做了一些 servlet 教程并阅读了 Head First JSP & servlet。我现在正在阅读[JavaWorld.com](http://www.javaworld.com/javaworld/jw-02-2009/jw-02-servlet3.html)关于异步支持的文章，但我不太明白。

什么是异步？Ajax 和 Servlet 异步有什么区别？

PS我有ajax的PHP背景，我知道这个概念，但我没有用java尝试过

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-08T20:52:13.583

在传统的 Servlet 模型中，通常是 1 个请求对应 1 个线程。

这些线程通常来自由 Servlet 容器管理的池。Servlet 容器只有在该池中有空闲线程时才能处理新请求。只要您自己的代码忙于处理请求，线程就不是空闲的。

在某些情况下，打破这种模式可能是值得的。发生的情况是请求通过这样的 Servlet 容器托管线程到达 Servlet，然后您的代码要求异步执行。然后您可以从 Servlet 请求返回，容器线程将被释放。

与同步请求处理相反，这不会提交任何响应，也不会关闭连接。相反，您可以将异步上下文交给另一个线程池，该线程池可以获取它，当某个线程有空闲处理它时，为它提供服务并能够写入响应。

一个例子：

```
@WebServlet(urlPatterns = "/somepath", asyncSupported = true)
public class AsyncServlet extends HttpServlet {

    @EJB
    private AsyncBean asyncBean;

    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        AsyncContext asyncContext = request.startAsync();

        // The following line will not block and return immediately
        asyncBean.doAsyncStuff(asyncContext);

    } // Shortly after this method has ended, thread will be returned to pool
} 
```

随着`AsyncBean`被实施为：

```
@Stateless
public class AsyncBean {

    @Asynchronous
    public void doAsyncStuff(AsyncContext asyncContext) throws IOException {
        asyncContext.getResponse().getWriter().write("test");
    }
} 
```

在上面的代码中，在您从方法返回后不久`AsyncServlet#doGet()`，Servlet 线程将返回到池中。用于执行的“请求”（任务）`AsyncBean#doAsyncStuff()`将被放入队列中以供 EJB 线程池获取。

为什么以及何时使用它的答案并不那么简单。如果您只是想保留线程，那么在上述情况下，您将用一个线程池中的一个线程交换另一个线程（在这种情况下是 Servlet 池与 EJB 异步池），净收益不会那么多。你也可以给你的 Servlet 线程池一个额外的线程。

但是，在更高级的场景中，您可以对请求进行更细粒度的管理；将它们分成多个任务，并让线程池为这些任务提供服务。例如，想象一个 10MB 文件的 100 个下载请求，由 10 个线程处理，循环给予每次发送 100KB 到每个请求。

另一个应用程序是需要等待来自外部系统的数据的请求，并且该外部系统能够发送可以中继回请求者的消息。即数据库调用在这里没有意义，因为无论如何您都需要另一个线程等待响应。然后，您将再次将一个线程更改为另一个线程。但是，如果您需要等待收到的电子邮件，那么一个线程可以等待任何电子邮件并将其中继到任何暂停的请求。

# java - 如何使用 Boilerpipe 从网页中提取新闻内容？

> ID：10065560
> 
> 赞同：0
> 
> 时间：2012-04-08T19:04:48.163
> 
> 标签：java, web, html-parsing, web-scraping, boilerpipe

我需要从网页中提取主要新闻内容。我在互联网上搜索并找到了一个名为 Boilerpipe 的 API，可免费用于该目的[http://boilerpipe-web.appspot.com/](http://boilerpipe-web.appspot.com/)但我无法找到任何实现使用 Boilerpipe 的 java。谁能告诉我如何在 Java 中使用 Boilerpipe 来提取新闻内容或给我一些指向 java 中的实现的链接，这些实现利用 Boilerpipe 从新闻网页中提取内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:27:32.130

may be my answer is too late. But it's pretty simple.

```
 URL url = new URL("http://www.nydailynews.com/sports/baseball"); 
 ArticleExtractor ae = new ArticleExtractor();
 String content = ae.getText(url);  // this contains the final text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-05T11:41:19.930

简单吧，假设你需要提取这个[URL](http://www.thehindu.com/news/national/katheria-remarks-rock-parliament/article8301417.ece)

[只需在此处](http://offlinebrowser-web.appspot.com/)使用我的 BoilerPipe Alternative Web API ，我的服务是基于锅炉管的，我开发了这个是因为在原始应用程序中出现了 overquota 错误。你可以选择以 JSON 格式取回结果，只需在你的应用程序中使用它。 .

此致

# python - Python，Ubuntu：Dropbox 完成同步后引发事件？

> ID：10065561
> 
> 赞同：2
> 
> 时间：2012-04-08T19:05:01.233
> 
> 标签：python, ubuntu, synchronization, dropbox, pyinotify

我正在编写一个脚本，以便在完成同步后将文件从 Dropbox 中的某个文件夹中移出。

例如，我想要一个名为“TrashBackup”的文件夹，只要我把东西放在那里，（在完成同步之后）我的服务器就会将它从 Dropbox 中取出并移到文件系统中的另一个位置（最终删除它从我的笔记本电脑）。

我正在使用 pyinotify 但问题是我不知道如何知道它何时完成同步。我可能最终会在一个可能非常大的文件没有完成传输之前移动。

我正在考虑设置一个计时器来查看文件最后一次更改的时间，如果超过 20 分钟，则继续将其移出 Dropbox。但这似乎是一种变通办法。此外，如果我正在传输 1GB 的文件，我可能会根据 Dropbox 的速度和我的本地带宽利用率来推动我的运气。

也许我应该开始监控 .dropbox.cache 文件夹？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:26:22.973

为什么不尝试使用[Dropbox CLI](https://www.dropbox.com/download?dl=packages/dropbox.py)？那里有几种方法应该证明对您有用。

为了实现您的特定目标，我可以想到两个有用的命令：`dropbox status`和`dropbox filestatus`. 同步完成后，前者将返回“空闲”。后者返回一个或多个文件的同步状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T16:23:27.403

您可以使用 API（特别是 /metadata: [https://www.dropbox.com/developers/reference/api#metadata](https://www.dropbox.com/developers/reference/api#metadata)）偶尔轮询该文件夹（例如每 5-10 分钟）以查看是否有任何新内容在那里，如果是这样，请根据需要执行移动。在这种情况下，API 的优点是文件只会在完成同步后才会显示。（不建议监控 .dropbox.cache。）

# c# - 列表框自定义 - 为特定项目添加类别标题

> ID：10065562
> 
> 赞同：3
> 
> 时间：2012-04-08T19:05:29.463
> 
> 标签：c#, silverlight, windows-phone-7, controls

这是执行以下操作的最佳方法：

假设我有一个带有动态数据绑定的列表框。里面的项目是根据项目类别排序的。

现在我想分区让我们说项目并在每个类别上方放置一个标题（仅一次）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:14:22.420

我建议看看[LongListSelector](http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)。它是一个免费控件，是[Silverlight Toolkit for Windows Phone](http://silverlight.codeplex.com/)的一部分。许多股票应用程序都在使用这种分类方法，它使您的应用程序与平台更加一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:13:41.297

看一下[LongListSelector 控件。](http://www.windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)

从[这里下载](http://silverlight.codeplex.com/)

# android - 在 Android 中的相机覆盖期间发生“错误 1”

> ID：10065563
> 
> 赞同：1
> 
> 时间：2012-04-08T19:05:29.473
> 
> 标签：android, android-camera, surfaceview, surfaceholder

我创建了一个具有 SurfaceView 和 SurfaceHolder 的 Activity 以创建相机叠加层。出于某种原因，我在 ADB 中得到以下信息：**04-08 10:54:06.747: E/Camera(1152): Error 1**。我可以拍照，但无法进行任何预览。这是我正在使用的代码：

```
public class MyActivity extends Activity implements
    SurfaceHolder.Callback, Camera.ShutterCallback, Camera.PictureCallback, OnClickListener {
private Camera mCamera;
private SurfaceView videoPreview;
private SurfaceHolder surfaceHolder;
private Button cancel;
private Button takePicture;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    setContentView(R.layout.camera_layout);
    videoPreview = (SurfaceView) findViewById(R.id.video_preview);
    cancel = (Button) findViewById(R.id.cancel);
    cancel.setOnClickListener(this);
    takePicture = (Button) findViewById(R.id.take_picture);
    takePicture.setOnClickListener(this);
    surfaceHolder = videoPreview.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    // Camera.open(getNumberOfCameras() - 1); => access front facing camera as well
    mCamera = Camera.open(); 
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    Camera.Parameters parameters = mCamera.getParameters();
    // pick the device's largest supported camera size
    List<Camera.Size> cameraSizes = parameters.getSupportedPreviewSizes();

    // the first size is the largest
    Camera.Size selectedSize = cameraSizes.get(0);

    parameters.setPreviewSize(selectedSize.width, selectedSize.height);

    mCamera.setDisplayOrientation(90);
    mCamera.setParameters(parameters);

    mCamera.startPreview();
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    try {
        mCamera.setPreviewDisplay(surfaceHolder);
    } catch (IOException e) {
        e.printStackTrace();
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {

}

@Override
protected void onPause() {
    super.onPause();
    mCamera.stopPreview();
}

@Override
protected void onDestroy() {
    super.onDestroy();
    mCamera.release();
}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.cancel:
        finish();
        break;
    case R.id.take_picture:
        mCamera.takePicture(this, null, null, this);
        break;
    }
}

@Override
public void onPictureTaken(byte[] data, Camera camera) {
    // store the picture 
    FileOutputStream fos = null;
    File imageFile = null;
    try {
        imageFile = new File(Environment.getExternalStorageDirectory(), "custom_image1.png");
        fos = new FileOutputStream(imageFile);
        fos.write(data);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (fos != null) {
            try {
                fos.flush();
            } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                fos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    mCamera.startPreview();
}

@Override
public void onShutter() {
    // perform an animation
} 
```

}

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<SurfaceView
    android:layout_weight="1"
    android:id="@+id/video_preview"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

<Button
    android:id="@+id/cancel"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:text="Cancel" /> 

<Button
    android:id="@+id/take_picture"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:text="Snap Photo" />

</LinearLayout> 
```

我尝试将其更改为 RelativeLayout 但无济于事。我真的认为我错过了一些简单的事情。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:32:56.680

您没有 onResume() 方法可以再次调用 startPreview()，因此当您拍照时，预览未运行，因此捕获失败。

要对此进行测试，请尝试在捕获图像之前添加 camera.startPreview() 并查看是否有效。

# node.js - 将自定义元数据或配置添加到 package.json，是否有效？

> ID：10065564
> 
> 赞同：86
> 
> 时间：2012-04-08T19:05:30.433
> 
> 标签：node.js

我见过（不记得在哪里）一个带有以下划线开头的自定义键的 package.json 文件：

```
{
    "name": "application-name"
  , "version": "0.0.1"
  , "private": true
  , "dependencies": {
      "express": "2.4.7"
    , "jade": ">= 0.0.1"
  }
  , "_random": true
} 
```

你可以这样做吗？它仍然有效吗？如果允许，是否有任何有关规则的文件？

谢谢！

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2014-12-01T16:11:19.997

**tl;博士**：

*   是的，**您可以**将自定义条目添加到`package.json`.
*   选择一个键名：
    *   **尚未定义**（详情如下）
    *   **不保留**供将来使用（详情如下）
    *   **避免**前缀**`_`和`$`**
    *   并且最好**使用*单个*顶级键**来***嵌套*您的自定义条目**。

例如，如果您拥有 domain `example.org`，您可以将自定义`random`键存储**在反向域名表示法的顶级键中，并`_`替换为`.`and，如果适用，`-`**^(（请参阅注释）)（例如，`org_example`）：

```
{
    "name": "application-name"
  , "version": "0.0.1"
  , "private": true
  , "dependencies": {
      "express": "2.4.7"
    , "jade": ">= 0.0.1"
  }  
  , "org_example": {
      "random": true
  }
} 
```

要读取此类自定义属性，请使用以下技术：

```
require("./package.json").org_example.random // -> true 
```

* * *

**`npm`的`package.json`文件格式大多符合[CommonJS 包规范](http://wiki.commonjs.org/wiki/Packages/1.1)**：

*   **`npm`当前使用的密钥**：[https ://docs.npmjs.com/files/package.json](https://docs.npmjs.com/files/package.json)
*   **规范中定义的键**：[http ://wiki.commonjs.org/wiki/Packages/1.1](http://wiki.commonjs.org/wiki/Packages/1.1)

至于**选择自定义键**：[CommonJS 包规范](http://wiki.commonjs.org/wiki/Packages/1.1)声明（强调我的）：

> 以下字段为**将来**扩展**保留**： , , , , , , , , , , , , , , .**`build``default``email``external``files``imports``maintainer``paths``platform``require``summary``test``using``downloads``uid`**

 **> 对包描述符规范的扩展应**努力避免未来标准名称的冲突，方法是使用与通用包管理无关的无害名称来命名它们的属性**。

> 以下字段**保留供软件包注册表**自行决定使用：`id`, `type`. 所有以**或****开头的属性也保留`_``$`**给包注册表以供他们自行决定使用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-08T19:29:13.887

鉴于 JSON 的性质和[Nodejitsu 文档](http://docs.nodejitsu.com/articles/getting-started/npm/what-is-the-file-package-json)中的这一声明，我认为这没有任何问题。

> NPM 本身只知道 package.json 中的*两个*字段：

```
{
   "name" : "barebones",
   "version" : "0.0.0",
} 
```

NPM 还关心[这里](http://npmjs.org/doc/json.html)列出的几个字段。所以只要它是有效的 JSON 并且不干扰 Node.js 或 NPM 一切都应该是好的和有效的。

Node 对 package.json 文件的认识似乎延伸到了*主要*领域。[参考。](http://nodejs.org/api/all.html#all_folders_as_modules)

```
 { "name" : "some-library",
   "main" : "./lib/some-library.js" } 
```

> 如果它位于 ./some-library 的文件夹中，则 require('./some-library') 将尝试加载 ./some-library/lib/some-library.js。
> 
> 这就是 Node 对 package.json 文件的认知程度。

为避免可能的冲突，您应该在键前加上一些字符或单词。不建议使用下划线 (_) 或美元符号 ($)，因为它们是保留字符前缀，但其他选择也是可行的。**

# ruby-on-rails - rails：backbone-on-rails gem 文件命名约定导致错误？

> ID：10065567
> 
> 赞同：0
> 
> 时间：2012-04-08T19:05:37.953
> 
> 标签：ruby-on-rails, backbone.js

我正在关注 Ryan Bates RailsCast Backbone.js 教程。这张图片是他的教程的截图。

![在此处输入图像描述](../Images/0663e285e6d9f6138cd72219134f185c.png)

注意，在 views/entries/ 目录下，有一个名为“entries_index.js.coffee”的文件

当我生成我的脚手架时，该文件被简单地调用`index.js.coffee`

这可能很重要，因为 Ryan 在路由器中使用`EntriesIndex`.

```
index: ->
    new Raffler.Views.EntriesIndex()
    $('#container').html(view.render().el) 
```

然后在 entries_index.js.coffee 文件中渲染模板

```
render: ->
    $(@el).html(@template())
    this 
```

其中，为了演示，应该把它放在容器 div 中

```
<h1>Raffler</h1> 
```

但是，当我这样做时，我在 Firebug 中收到此错误

```
 view is not defined
[Break On This Error]   

return $('#container').html(view.render().el); 
```

由于文件`entries_index.js.coffee`v的名称不同`index.js.coffee`，我想知道 Ryan 以这种方式实例化视图是否很重要（即用驼峰式大小写代替下划线）

```
new Raffler.Views.EntriesIndex() 
```

如果我改变它并尝试

```
 new Raffler.Views.Index() 
```

我得到错误

```
 Raffler.Views.Index is not a constructor
[Break On This Error]   

new Raffler.Views.Index(); 
```

有什么想法可以让我重回正轨吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T00:42:47.497

我重新输入了代码，它现在可以正常工作了。这一定与咖啡脚本中的缩进有关。

# scala - 如何根据元组第一个元素进行总结？

> ID：10065568
> 
> 赞同：5
> 
> 时间：2012-04-08T19:06:00.127
> 
> 标签：scala, tuples

我有一个如下所示的 3 元组列表 [我添加了换行符以提高可读性]：

```
(2, 127, 3)
(12156, 127, 3)
(4409, 127, 2) <-- 4409 occurs 2x
(1312, 127, 12) <-- 1312 occurs 3x

(4409, 128, 1) <-- 
(12864, 128, 1)
(1312, 128, 1) <-- 
(2664, 128, 2)

(12865, 129, 1)
(183, 129, 1)
(12866, 129, 2)
(1312, 129, 10) <-- 
```

我想根据第一个条目进行总结。第一个条目应该是唯一的。

结果应如下所示：

```
(2, 127, 3)
(12156, 127, 3)
(4409, 127, 3) <- new sum = 3
(1312, 127, 23) <- new sum = 23

(12864, 128, 1)
(2664, 128, 2)

(12865, 129, 1)
(183, 129, 1)
(12866, 129, 2) 
```

如何在 Scala 中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T19:13:31.453

尝试这个：

```
list groupBy {_._1} mapValues {v => (v.head._1, v.head._2, v map {_._3} sum)} 
```

中间条目被保留，它总是采用出现在输入列表中的第一个条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T19:09:23.053

如果您可以忽略中间条目，则：

```
val l = List(('a,'e,1), ('b,'f,2), ('a,'g,3), ('b,'h,4))
l.groupBy(_._1).mapValues(_.map(_._3).sum) 
// Map('b -> 6, 'a -> 4) 
```

如果您必须保留中间条目：

```
l.groupBy(_._1).map { 
  case (_, values) =>
    val (a,b,_) = values.head
    (a, b, values.map(_._3).sum)
} 
// List(('b,'f,6), ('a,'e,4)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T10:02:57.667

您可以使用幺半群的概念。如果条目的前两个值构建键值，其余的值构建关联值本身，则可以使用 Map。

一旦你有了一个地图，你可以这样进行： [合并两个地图并对相同键的值求和的最佳方法？](https://stackoverflow.com/questions/7076128/best-way-to-merge-two-maps-and-sum-the-values-of-same-key)

# xquery - XQuery - 复制构造函数？

> ID：10065571
> 
> 赞同：2
> 
> 时间：2012-04-08T19:06:07.753
> 
> 标签：xquery

给定以下查询

```
let $a := xs:dateTime("2012-01-01T00:00:00.000+00:00")
let $b := xs:dateTime($a)
let $c := xs:dateTime($a cast as xs:string)
(: cannot - don't know how to - execute the function without assignment :)
let $d := adjust-dateTime-to-timezone($a, xs:dayTimeDuration("PT1H"))
return (<a>{$a}</a>,<b>{$b}</b>,<c>{$c}</c>) 
```

输出如下

```
<a>2012-01-01T01:00:00+01:00</a>
<b>2012-01-01T01:00:00+01:00</b>
<c>2012-01-01T00:00:00Z</c> 
```

基于[XQuery 关于构造函数的文档](http://www.w3.org/TR/xquery/#id-constructor-functions)（*给定类型的构造函数用于**将**其他原子类型的实例转换为给定类型*），这是预期的行为。调用*xs:dateTime($a)*只需返回*$a*，因为不需要强制转换，但*xs:dateTime($a cast as xs:string)*首先从*$a* 创建一个新的*xs:string*。但是，这需要额外的转换。

 *有没有其他方法可以解决这个问题？或者转换很*便宜*，我不应该关心？

（如果有什么不同，我的 XQuery 处理器是[BaseX](http://basex.org/) 7.2。）

* * *

看来我使用 BaseX*确实有所不同。*我真的认为这是*xs:dateTime*构造函数和*adjust-dateTime-to-timezone*函数应该工作的方式，这就是我误解 XQuery 文档的原因。

鉴于 Dimitre 和 Ranon 给我的[意见](https://stackoverflow.com/users/36305/dimitre-novatchev)，[看来](https://stackoverflow.com/users/695343/ranon)所描述的*问题*已经消失了。

由于我的用例是，或者更像*是*，我想对我的 XML 数据集的日期时间元素进行基于日期时间间隔的查询。因为输入参数和源日期时间值使用不同的时区，所以我必须使用上述函数进行时区更正，这修改了它的输入参数（在我的例子中是原始源日期时间），但是我想保留原始值。给定函数的名称*adjust-dateTime*我认为它可以修改它的参数，所以我自动认为我必须使用构造函数*复制*我的原始值才能保留原始日期时间值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:14:26.993

看起来你遇到了一些非常奇怪的错误。

您的第 5 行根本不应该改变`$a-c`，因为 XQuery 是一种函数式编程语言，具有不可变变量（`adjust-dateTime-to-timezone`不应该改变您的变量）并且没有副作用。这就是您被迫分配的原因`$d`，否则您的计算结果将直接被丢弃。

我刚刚提交了一些错误请求。[Zorba 的查询是正确的](http://www.zorba-xquery.com/html/demo#ESml4L3s0F/nCvV5mJHPRS3etwQ=)，您可以使用它来理解问题。

BaseX 作为您首选的 XQuery 处理器也将在几天内完成。我或其他 BaseX 团队成员会在修复后立即触发您。

我猜你的问题是由于对 BaseX 的误解和错误行为引起的，应该解决。如果您的查询有任何不清楚的地方，请随时再次询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T23:27:38.713

**报告的输出不正确**。

**正确的输出（在 oXygen 下运行 Saxon 产生）是**：

```
<a>2012-01-01T00:00:00Z</a>
<b>2012-01-01T00:00:00Z</b>
<c>2012-01-01T00:00:00Z</c> 
```

该`adjust-dateTime-to-timezone()`函数，因为任何其他函数不能修改它的参数——它的效果只包含在变量中`$d`——你不在`return`子句中使用它。*

# hibernate - 休眠，表连接问题（可能）

> ID：10065577
> 
> 赞同：0
> 
> 时间：2012-04-08T19:07:13.980
> 
> 标签：hibernate, many-to-many

我对 GW 和 Hibernate 有疑问。

在我的数据库中，我有一个表和一个`Sinav(Exam)`名为. 当我想使用 Hibernate 从数据库中访问考试列表时，会发生错误。`Soru(Question)``sinav_soru(Exam_Question)`

这是错误详细信息

```
 [WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.client.rpc.SerializationException: Type 'org.hibernate.collection.PersistentBag' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = [tr.edu.gsu.yds.shared.domain.Soru@307262ee]
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:619)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:539)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeClass(ServerSerializationStreamWriter.java:709)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeImpl(ServerSerializationStreamWriter.java:748)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:621)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.serialize(Collection_CustomFieldSerializerBase.java:44)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serialize(ArrayList_CustomFieldSerializer.java:39)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serializeInstance(ArrayList_CustomFieldSerializer.java:51)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serializeInstance(ArrayList_CustomFieldSerializer.java:28)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeImpl(ServerSerializationStreamWriter.java:740)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:621)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:539)
    at com.google.gwt.user.server.rpc.RPC.encodeResponse(RPC.java:616)
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForSuccess(RPC.java:474)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:571)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

真的我无法解决问题。

这是我的域代码如下：

**Sinav.java（考试）**

```
package tr.edu.gsu.yds.shared.domain;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinTable;
import javax.persistence.ManyToMany;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;

import org.hibernate.annotations.Fetch;
import org.hibernate.annotations.FetchMode;

@Entity
@Table(name = "sinav")
public class Sinav implements Serializable
{
    private static final long serialVersionUID = 1L;

    private Integer sinavId;
    private String sinavAd;
    private String eklenmeTarihi;
    private Ogretmen ogretmen;
    private List<Ogrenci> ogrenciler = new ArrayList<Ogrenci>();
    private List<Soru> sorular = new ArrayList<Soru>();

    @Id
    @GeneratedValue( strategy=GenerationType.IDENTITY )
    @Column(name = "sinavId", length=10)
    public Integer getSinavId() {
        return sinavId;
    }

    public void setSinavId(Integer sinavId) {
        this.sinavId = sinavId;
    }

    @Column(name = "sinavAd", nullable = false)
    public String getSinavAd() {
        return sinavAd;
    }

    public void setSinavAd(String sinavAd) {
        this.sinavAd = sinavAd;
    }

    @Column(name = "eklenmeTarihi", nullable = false)
    public String getEklenmeTarihi() {
        return eklenmeTarihi;
    }

    public void setEklenmeTarihi(String eklenmeTarihi) {
        this.eklenmeTarihi = eklenmeTarihi;
    }

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "ogretmenNo")
    public Ogretmen getOgretmen() {
        return this.ogretmen;
    }

    public void setOgretmen(Ogretmen ogretmen) {
        this.ogretmen = ogretmen;
    }

    @OneToMany(fetch = FetchType.LAZY, mappedBy = "sinav")
    public List<Ogrenci> getOgrenciler()
    {
        return ogrenciler;
    }

    public void setOgrenciler( List<Ogrenci> ogrenciler )
    {
        this.ogrenciler = ogrenciler;
    }

    @ManyToMany(fetch = FetchType.EAGER)
    @Fetch(value = FetchMode.SUBSELECT)
    @JoinTable(name = "sinav_soru",
        joinColumns = {
            @JoinColumn(name = "sinavId", nullable = false)
        },
        inverseJoinColumns = {
            @JoinColumn(name = "soruId", nullable = false)
        }
    )
    public List<Soru> getSorular() {
        return sorular;
    }

    public void setSorular(List<Soru> sorular) {
        this.sorular = sorular;
    }

} 
```

**Soru.java（问题）**

```
package tr.edu.gsu.yds.shared.domain;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.ManyToMany;
import javax.persistence.OneToMany;
import javax.persistence.Table;

@Entity
@Table(name = "soru")
public class Soru implements Serializable
{
    private static final long serialVersionUID = 4L;

    private Integer soruId;
    private String soruTip;
    private String soruMetin;
    private String soruYardimci;
    private Integer soruPuan;
    private List<Cevap> cevaplar = new ArrayList<Cevap>();
    private List<Sinav> sinavlar = new ArrayList<Sinav>();

    @Id
    @GeneratedValue( strategy=GenerationType.IDENTITY )
    @Column(name = "soruId")
    public Integer getSoruId() {
        return soruId;
    }

    public void setSoruId(Integer soruId) {
        this.soruId = soruId;
    }

    @Column( name = "soruTip", nullable = false, length=20 )
    public String getSoruTip() {
        return soruTip;
    }

    public void setSoruTip( String soruTip ) {
        this.soruTip = soruTip;
    }

    @Column( name = "soruMetin", nullable = false, length = 65535, columnDefinition="Text" )
    public String getSoruMetin() {
        return soruMetin;
    }

    public void setSoruMetin( String soruMetin ) {
        this.soruMetin = soruMetin;
    }

    @Column( name = "soruYardimci", nullable = false, length=45 )
    public String getSoruYardimci() {
        return soruYardimci;
    }

    public void setSoruYardimci( String soruYardimci ) {
        this.soruYardimci = soruYardimci;
    }

    @Column( name = "soruPuan", nullable = false, length=3 )
    public Integer getSoruPuan() {
        return soruPuan;
    }

    public void setSoruPuan( Integer soruPuan ) {
        this.soruPuan = soruPuan;
    }

    @OneToMany( mappedBy = "soru", fetch = FetchType.EAGER, cascade=CascadeType.ALL )
    public List<Cevap> getCevaplar() {
        return cevaplar;
    }

    public void setCevaplar( List<Cevap> cevaplar ) {
        this.cevaplar = cevaplar;
    }

    @ManyToMany( mappedBy = "sorular", fetch = FetchType.LAZY )
    public List<Sinav> getSinavlar() {
        return sinavlar;
    }

    public void setSinavlar(List<Sinav> sinavlar) {
        this.sinavlar = sinavlar;
    }

} 
```

这是我获得考试清单的代码；

```
package tr.edu.gsu.yds.client.controller.ogrenci;

import java.util.List;

import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.event.dom.client.ClickHandler;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.rpc.AsyncCallback;

import tr.edu.gsu.yds.client.remote.YdsRemoteService;
import tr.edu.gsu.yds.client.remote.YdsRemoteServiceAsync;
import tr.edu.gsu.yds.client.view.ogrenci.sinavislemleri.OgrenciWritingSoruSayfasi;
import tr.edu.gsu.yds.shared.domain.Sinav;
import tr.edu.gsu.yds.shared.domain.SinavTakvim;
import tr.edu.gsu.yds.shared.domain.Soru;

public class OgrenciWritingSoruSayfasiController
{

    private YdsRemoteServiceAsync   ydsRemoteServiceAsync   = GWT.create( YdsRemoteService.class );
    private OgrenciWritingSoruSayfasi ogrenciWritingSoruSayfasi;

    public OgrenciWritingSoruSayfasiController( OgrenciWritingSoruSayfasi ogrenciWritingSoruSayfasi )
    {
        this.ogrenciWritingSoruSayfasi = ogrenciWritingSoruSayfasi;

    }

    public void send(){

        ydsRemoteServiceAsync.getSinavList( new AsyncCallback<List<Sinav>>()
        {

            @Override
            public void onSuccess( List<Sinav> result )
            {
                for ( Sinav sinav : result )
                {
                    //Just to see , returning results.
                    Window.alert( "sinav " + sinav.getSinavId() );

                }               
            }

            @Override
            public void onFailure( Throwable caught )
            {
                Window.alert( "Failure" );

            }
        } );
        ogrenciWritingSoruSayfasi.getOgrenciWritingWidget().getOkayButton().addClickHandler( new ClickHandler()
        {

            @Override
            public void onClick( ClickEvent event )
            {
                ogrenciWritingSoruSayfasi.getOgrenciWritingWidget().getSoruMetniLabel().setText( "Basıldı" );

            }
        } );

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:44:09.787

我不确定，但根据我从其他问题的答案中读到的，您忘记添加默认（零）参数构造函数。添加后可以再试一次吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:15:24.317

省略这些变量及其各自的方法将不适用于 GWT。

```
private List<Ogrenci> ogrenciler = new ArrayList<Ogrenci>();
private List<Soru> sorular = new ArrayList<Soru>(); 
```

两者都不

```
private Set<Ogrenci> ogrenciler = new HashSet<Ogrenci>();
private Set<Soru> sorular = new HashSet<Soru>(); 
```

有不同的解决方案可用，例如推土机、吉利德等。您也可以使用 getbyids 方法来获得这些结果以进行简化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:26:21.563

交换这些：

```
 private List<Ogrenci> ogrenciler = new ArrayList<Ogrenci>();
private List<Soru> sorular = new ArrayList<Soru>(); 
```

和：

```
 private Set<Ogrenci> ogrenciler = new HashSet<Ogrenci>();
private Set<Soru> sorular = new HashSet<Soru>(); 
```

类似地，其他实体类中的列表。

查看此链接：[Serializable Hibernate data object for GWT RPC](https://stackoverflow.com/questions/3282753/serializable-hibernate-data-object-for-gwt-rpc)

# java - 将 Hibernate 数据导出到 SQL 语句？

> ID：10065579
> 
> 赞同：2
> 
> 时间：2012-04-08T19:07:28.863
> 
> 标签：java, mysql, hibernate

如何将 Hibernate 数据导出到 SQL 语句，以便重新导入它们。数据由映射的实体组成，包括字符串、枚举、整数等。

我需要一个像这样的导出：插入 XX (...)

或类似的，我可以很容易地重写。有什么我可以使用的吗？

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:39:24.547

您可以通过放置启用查询日志记录

`<property name="hibernate.show_sql">true</property>`

它将打印 hibernate 执行的所有语句，您可以重复使用这些语句。我通常用它来验证我蟾蜍中的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:44:46.197

如果您希望将数据迁移到另一个 MySQL 服务器，您应该使用 mysqldump：[http ://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)

# java - 当文本是字段时，如何在文本“文本”下划线？

> ID：10065580
> 
> 赞同：0
> 
> 时间：2012-04-08T19:07:45.857
> 
> 标签：java, methods, formatting, underline

```
public class Text extends JPanel {

private String text;

    public Text()
    {
    this.setPreferredSize(new Dimension(20,20));
    setFont (new Font(text, Font.PLAIN, 24));
    text = "";
    }

    public void showUnderline()
    {

    Hashtable<TextAttribute, Object> map = new Hashtable
    <TextAttribute, Object>();

    map.put(TextAttribute.UNDERLINE, TextAttribute.UNDERLINE_ON);   
    } 
```

文本对象将在另一个类中创建。在那个类中，我需要用 showUnderline 方法给它加下划线。该方法似乎不完整。
我正在为 java 专有方法拍摄，这意味着没有 HTML。
如何将文本链接到 showUnderline 方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:19:56.870

你是什​​么意思'java独有的方法，意味着没有HTML'？您可能正在寻找 JLabel，您可以在其中放入非常简单的 html。这是谷歌上的第一个结果：

[http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JLabel.html](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-JLabel.html)

它有一个使文本具有不同颜色、字体和粗体或斜体的示例。您可能只需要执行以下操作：

```
JLabel label = new JLabel("<u>MY TEXT</u>",JLabel.CENTER); 
```

从那里，您可以像放置任何其他 JComponent 一样放置它。

如果你真的不想要 HTML，你可以使用 JTextPane。这是一个例子：

[http://www.exampledepot.com/egs/javax.swing.text/style_hilitewords2.html](http://www.exampledepot.com/egs/javax.swing.text/style_hilitewords2.html)

# php - Symfony 重写路由 WelcomeController

> ID：10065581
> 
> 赞同：0
> 
> 时间：2012-04-08T19:07:47.147
> 
> 标签：php, symfony1, routing, controller

我在 Symfony 项目上创建了一个新包，我想在页面上使用 / 路由，例如：

```
JhebergUserBundle_homepage:
    pattern:  /
    defaults: { _controller: JhebergUserBundle:Default:index } 
```

在生产环境中它可以完美运行，但在开发环境中却不行。我总是有“*恭喜你！你已经成功安装了一个新的 Symfony 应用程序。* ”页面。如何在开发环境中重写路线？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T13:51:13.940

诚然，这对于 Symfony 的新手来说有点令人困惑，因为在`app/config/routing.yml`. 您正在寻找的路线实际上定义在`app/config/routing_dev.yml`：

```
_welcome:
  pattern:  /                
  defaults: { _controller: AcmeDemoBundle:Welcome:index } 
```

删除此路由，然后在各自的捆绑包中重新定义主页路由，一切都会按预期工作。

# django - ModelForm 采用 Image 或 URL 并保存到 ImageField

> ID：10065582
> 
> 赞同：0
> 
> 时间：2012-04-08T19:08:05.320
> 
> 标签：django

我有一个在 ImageField 中拍摄图像的模型：

```
class Result(models.Model):
    image = models.ImageField(upload_to=get_userphoto_upload_path) 
```

我想要一个可以采用 URL 或图像的表单，并将图像透明地保存到模型中。

这就是我的想法：

```
class ResultForm(forms.ModelForm):
  externalsource = forms.URLField(label='External URL', required=False)

  def clean(self):
    cleaned_data = super(ResultForm, self).clean()
    externalsource = cleaned_data.get('externalsource', False)
    if externalsource:
      req = requests.get(externalsource)
      image = StringIO(req.content)
      self.image.save(image)

  class Meta:
    fields = ['image']
    model = Result 
```

我知道 self.image.save(image) 不正确（self.image 不存在）......如果它是模型而不是表单，这就是我手动保存图像的方式。我不确定我应该用什么代替它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:34:39.810

我想你想做如下的*事情*。请注意，我没有运行它或测试它或任何东西。但它应该让你走上正确的道路。

```
from django.core.files.uploadedfile import InMemoryUploadedFile

class ResultForm(forms.ModelForm):
  externalsource = forms.URLField(label='External URL', required=False)

  def clean(self):
    cleaned_data = super(ResultForm, self).clean()
    externalsource = cleaned_data.get('externalsource', False)
    if externalsource:
      req = requests.get(externalsource)
      image = StringIO(req.content)
      file = InMemoryUploadedFile(file=image, field_name=None, name=externalsource, content_type=req.content_type, size=req.size, charset=None)

      # Oops, long time since I used Forms, don't know how to do FileFields in forms
      # but something like you already wrote:
      self.image.save(name=dirname(externalsource), content=file)

  class Meta:
    fields = ['image']
    model = Result 
```

所以基本上，只制作一个 InMemoryUploadedFile 并将您的图像填充在那里，并将其保存在 ImageField 中。

实际上你也可以简化和使用 SimpleUploadedFile()。

我现在还看到您在其中嵌入了另一个关于表单、模型和文件字段的问题，-- 我不记得该怎么做。:P

# jquery - jQuery：如何在没有唯一 ID 的情况下按类名对每个元素运行切换功能？

> ID：10065608
> 
> 赞同：0
> 
> 时间：2012-04-08T19:10:51.243
> 
> 标签：jquery, toggle

我很高兴找到这个函数来缩短长文本[jQuery 文本截断（阅读更多风格）](https://stackoverflow.com/questions/2248742/)

它需要一个 ID，但我希望它可以在许多具有相同类名且没有唯一 ID 的元素上运行。

怎么可能？

[http://jsfiddle.net/sCREz/1/](http://jsfiddle.net/sCREz/1/)

# android - 如何在 ksoap2 中使用参数？

> ID：10065611
> 
> 赞同：0
> 
> 时间：2012-04-08T19:10:59.340
> 
> 标签：android, web-services, ksoap2

我创建了一个 Web 服务来测试通过 ksoap2 传递的参数。我认为这似乎是一个非常简单的过程，但我显然缺少一些简单的东西。Web 服务只是返回传递给它的整数。当我执行下面的代码时，它返回数字 0 而不是 1。

```
 private static String SOAP_ACTION = "http://tempuri.org/TestParams";
private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME = "TestParams";
private static String URL = "http://services.lockrem.com/WebService.asmx?WSDL";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("RoundId", 1);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
    } catch (Exception e) {
        e.printStackTrace();
    }

    SoapObject result = (SoapObject)envelope.bodyIn; 
```

注意：我已经使用 .net 网页对此进行了测试，它按预期返回数字 1。Web 服务不是这里的问题。

这是网络服务。

```
 [WebMethod]
public int TestParams(int RoundId)
{
    return RoundId;
} 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:24:39.613

免责声明：每当我尝试使用 kSoap2 与 .NET Web 服务通信时，我通常最终都会做很多*摆弄*。我的意思是字面意思：我用[Fiddler2](http://fiddler2.com/fiddler2/)设置了一台 Windows 机器，并将它用作失败请求和工作参考请求的代理，所以我实际上可以*看到出了什么问题*。我强烈建议您在尝试做一些不平凡的事情时立即做类似的事情。

也就是说，在你的情况下，这可能就足够了

```
envelope.dotNet = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:22:01.213

最后尝试删除 WSDL

```
private static String URL = "http://services.lockrem.com/WebService.asmx"; 
```

另外尝试使用它来获得响应：

```
Object response = envelope.getResponse(); 
```

代替`SoapObject result = (SoapObject)envelope.bodyIn;`

**已编辑**

这有效：

```
public class MainActivity extends Activity {

private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME = "TestParams";
private static String URL = "http://services.lockrem.com/WebService.asmx";
private TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tv = (TextView)findViewById(R.id.tv);
    HttpTransportSE transport = new HttpTransportSE(URL);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("RoundId", 1);
    SoapSerializationEnvelope envelope =
        new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    try {
        transport.call(NAMESPACE + METHOD_NAME, envelope);
        Object response = envelope.getResponse();
        tv.setText(response.toString());
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

希望能帮助到你。

# objective-c - 在 OS X 应用程序上的 .app 内创建文件

> ID：10065613
> 
> 赞同：0
> 
> 时间：2012-04-08T19:11:51.913
> 
> 标签：objective-c

我想知道是否可以在现有应用程序中创建一个新文件？现在我正在使用：

```
[filemgr createFileAtPath: @"newFile.txt" contents: data attributes: nil]; 
```

但我认为我必须改变通往其他事物的道路。有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:20:59.163

这不是一个好主意。如果应用程序已安装，`/Application/`那么只有管理员用户启动应用程序才能写入该文件。（永远不要假设用户是管理员！）

该应用程序也可能位于只读媒体上。

虽然我不确定，但如果也可能会干扰数字签名的应用程序。更改捆绑包中的文件意味着应用程序已更改，这本质上是数字签名想要避免的。（不要乱用应用程序包）

相反，您应该将文件保存在`~/Library/Application Support/<yourApplicationName>/`.

阅读[文件系统编程指南](http://developer.apple.com/library/mac/ipad/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010672)。

# java - 在接口中使用方法参数

> ID：10065614
> 
> 赞同：-2
> 
> 时间：2012-04-08T19:11:52.717
> 
> 标签：java, eclipse

好的，我必须在我正在制作的涉及货币的代码中使用一个接口，并且我使用参数创建了一些方法。问题：如果我创建的接口类的参数名称与实现它的类不同，这有关系吗？

例如：

```
//One of my methods which calculates a US paper currency (created in my interface class)
BigDecimal getUSD(int onepaper, int fiftypaper, int twentypaper,  int tenpaper, int fivepaper, int onepaperval);

//One of my classes which contains the getUSD method in it.
public void getUSD(int dollars, int quarters, 
        int dimes, int nickels, int pennies)
{
    payment = dollars + quarters * QUARTER_VALUE + dimes * DIME_VALUE
            + nickels * NICKEL_VALUE + pennies * PENNY_VALUE;
} 
```

这会在 java 运行时产生问题吗？（注意这是我第一次使用接口）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:15:26.077

只要它们与接口具有相同的顺序和相同的类型，您将变量命名为什么并不重要。

# java - 如何在每个请求的基础上使用/不使用缓存？

> ID：10065616
> 
> 赞同：3
> 
> 时间：2012-04-08T19:12:12.327
> 
> 标签：java, spring, hibernate, spring-mvc, ehcache

我有一个以非常标准的方式设置的 Hibernate + Ehcache + Spring MVC webapp：

控制器 -> 服务类 -> DAO 类 -> DB

该应用程序是一个 REST API，它使用 XML 响应 HTTP GET 请求。一切都按预期工作。数据库仅在需要时才被命中——否则结果来自 Ehcache。

我想要的是在每个请求的基础上使用/不使用缓存。当然，我希望默认行为是使用缓存，但是当传入“nocache=1”参数时，不应该使用缓存，而是应该读取数据库。

我开始将“useCache”参数添加到我的服务类方法，然后添加到 DAO 类，但感觉不对。有没有更好/更好的方法来做到这一点？也许使用某种 servlet 过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:46:29.360

这是一个想法，但不确定它是否正确。

写2个方法，一个with `query.setCacheable(true);`，一个normal。现在，您何时可以根据需要使用这些方法，即何时需要缓存以及何时不需要。

这是关于查询缓存的[文章。](http://blog.dynatrace.com/2009/02/16/understanding-caching-in-hibernate-part-two-the-query-cache/)

# jquery - 检查点是否在曲线之外

> ID：10065617
> 
> 赞同：1
> 
> 时间：2012-04-08T19:12:19.900
> 
> 标签：jquery, html, math

对不起，如果这属于数学论坛。我在 HTML5s 画布元素中有一个图像圆角，我想让圆角透明。我有以下代码：

```
 var cornersImgData = tempContext.getImageData(0, 0, img.width, img.height);
    var topLeft = getPixel(cornersImgData, 0, 0);
    var topRight = getPixel(cornersImgData, cornersImgData.width - 1, 0);
    var bottomLeft = getPixel(cornersImgData, 0, cornersImgData.height - 1);
    // Check that the rounded corners have actually been applied (e.g. make sure the user hasn't just clicked the button and then undo)
    var bottomRight = getPixel(cornersImgData, cornersImgData.width - 1, cornersImgData.height - 1);
    if (('rgb(' + topLeft[0] + ', ' + topLeft[1] + ', ' + topLeft[2] + ')' == _roundedCornersColour) ||
        ('rgb(' + topRight[0] + ', ' + topRight[1] + ', ' + topRight[2] + ')' == _roundedCornersColour) ||
        ('rgb(' + bottomLeft[0] + ', ' + bottomLeft[1] + ', ' + bottomLeft[2] + ')' == _roundedCornersColour) ||
        ('rgb(' + bottomRight[0] + ', ' + bottomRight[1] + ', ' + bottomRight[2] + ')' == _roundedCornersColour))
    {
        for (var x = 0; x < cornersImgData.width; x++)
        {
            for (var y = 0; y < cornersImgData.height; y++)
            {
                var colour = getPixel(cornersImgData, x, y);
                if ('rgb(' + colour[0] + ', ' + colour[1] + ', ' + colour[2] + ')' == _roundedCornersColour)
                {
                    setPixel(cornersImgData, x, y, colour[0], colour[1], colour[2], 0);
                }
            }
        }
    } 
```

这可行，但是因为我要替换 _roundedCornersColour 的每个实例，所以有时我最终会替换图像本身中的几个像素。我的高中数学有点生疏，我想不出最好的方法来确定 x 和 y 是否落在角落应该在的位置之外。有人可以帮忙吗？

乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T15:12:13.920

如果半径是，那么据我从您的代码中可以看出，`r`左上角圆角是圆弧的圆心位于。`(xc1, yc1) = (r, r)`您可以类似地计算出其他三个圆心的`(xc2, yc2)`坐标`(xc3, yc3)`和`(xc4, yc4)`。

然后在第一个角附近，你可以测试 if`(x-xc1)*(x-xc1) + (y-yc1)*(y-yc1) > r*r`和`x < xc1`和`y < yc1`。这由圆外和相关角内的点来满足。在其他角落，您需要将第一次测试中的圆心更改为相关的圆心，并适当更改其他两个不等式以选择正确的圆象限。

这就是基本的数学。您可以对速度进行许多优化，例如四个角都是对称的（每个角都具有关于对角线的反射对称，并且所有角都是彼此的旋转副本），并且一旦您发现圈外的一个点，您可以立即识别出许多其他点，这些点也在圈外，而无需直接测试它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:16:22.517

对于 HTML5 画布，您应该使用所需的不透明度绘制图像，然后使用 将`destination-in` [`globalCompositeOperation`](https://developer.mozilla.org/en/Canvas_tutorial/Compositing)其贴在图像上，而不是使用像素数据手动设置不透明度。既容易又快得多。

（或者预先填充您想要的区域，然后`source-in`在将图像绘制到该区域时使用合成模式。）

或者，使用您想要的形状创建一个路径，并[使用它`clip()`来强制您的 drawImage 适合路径](https://stackoverflow.com/questions/4882354/rounded-corners-on-images-in-canvas)。

# c# - 如何使用 XAML 检索 XML 属性

> ID：10065622
> 
> 赞同：0
> 
> 时间：2012-04-08T19:12:52.937
> 
> 标签：c#, wpf, xml, linq-to-xml

我有这个简单的 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<Artists>
 <artist artistId="1">
<name>ManyBass</name>
<genre>Electronic</genre>
 <album>Fireblue</album>
 <player>
    <song path="Fireblue.mp3"/>
    <song path="Porthole.mp3"/>
</player>
 </artist>
</Artists> 
```

我想检索所有歌曲路径以将其添加到 ListBox 中，如下所示：

```
XDocument loaded = XDocument.Load(path);
var q = from c in loaded.Descendants("player")
        select (string)c.Element("song path");
foreach (string track in q)
{
   myList.Items.Add(track);
} 
```

但是我的程序崩溃了，因为跟踪字符串启动了 SystemNullExceptionError。有人可以帮我正确检索属性：

> 歌曲路径

从我的 XML 文件？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:23:14.547

```
List<string> songs = (from c in loaded.Descendants("song")
                    select c.Attribute("path").Value).ToList(); 
```

并通过关闭`Artist`标签更正 XML

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T21:01:38.973

MVVM 风格的方法可以让您将 ListBox 直接绑定到 XML 文档，这样您就不必在后面的代码中设置 ListBox 的内容。

XAML：

```
<Grid>
    <Grid.DataContext>
        <XmlDataProvider Source="Artists.xml" XPath="/Artists/artist"/>
    </Grid.DataContext>
    <ListBox ItemsSource="{Binding}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <DockPanel>
                    <TextBlock Text="{Binding XPath=./name}" DockPanel.Dock="Left"/>
                    <ListBox ItemsSource="{Binding XPath=./player/song}" DockPanel.Dock="Right">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding XPath=@path}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </DockPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>      
</Grid> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T19:15:22.777

*   您的 XML 错误，您没有关闭`<artist>`标签
*   您正在按名称访问元素，`"song path"`但您只有`song`具有属性的元素`path`

询问：

```
XDocument xdoc = XDocument.Load(path);

// type is IEnumerable<string>
var songs = xdoc.Descendants("song")                
                .Select(p => p.Attribute("path").Value); 
```

固定的 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<Artists>
<artist artistId="1">
   <name>ManyBass</name>
   <genre>Electronic</genre>
   <album>Fireblue</album>
   <player>
       <song path="Fireblue.mp3"/>
       <song path="Porthole.mp3"/>
   </player>
</artist>
</Artists> 
```

# android - 如何使用 Eclipse Paho MQTT 客户端发送 ping？

> ID：10065624
> 
> 赞同：12
> 
> 时间：2012-04-08T19:13:08.807
> 
> 标签：android, mqtt

我们刚刚开始为 Android 构建自己的推送通知系统（由于客户的要求），并找到了 Eclipse Paho ( [http://www.eclipse.org/paho/](http://www.eclipse.org/paho/) )。不用说，这个项目真的很令人兴奋。

Android 的问题是，如果 CPU 处于睡眠状态，MQTT 客户端可能无法在其设置的时间间隔内发送 ping。解决方法是使用 AlarmManager 将其唤醒并完成工作。Android 文档说：

> 只要警报接收器的 onReceive() 方法正在执行，警报管理器就会持有 CPU 唤醒锁。这保证了在您完成广播处理之前手机不会休眠。一旦 onReceive() 返回，警报管理器就会释放这个唤醒锁。这意味着在某些情况下，一旦您的 onReceive() 方法完成，手机就会进入睡眠状态。

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

我需要确保当 CPU 具有 PARTIAL_WAKE_LOCK 时我可以在 onReceive() 方法中发送 ping 命令，因此我正在寻找一种手动向服务器发送 ping 的方法，但似乎客户端没有公开任何此类方法。我错过了什么吗？或者，除了发布我自己的“ping 消息”之外，这里的解决方法是什么？我想避免这种情况，因为：

1.  更大的开销
2.  我们将确保 Android 客户端仅为订阅者，可能使用 Mosquitto 的 ACL。他们将不被允许发布消息。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-09T12:43:26.333

我一直在使用 Android 上的 MQTT 进行一些工作，并且遇到了完全相同的问题。

正如 Dale 所说，旧版本的 MQTT 客户端曾经有一个显式的 ping() 方法，但不幸的是，它现在被隐藏了。

最简单的方法，也是我使用的方法，是向特定主题显式发布一个 1 字节的消息，作为 keepalive。我认为这不会增加您的应用程序的开销，虽然我不熟悉 Mosquitto 的 ACL，但我认为您可以让每个客户端都使用相同的“keepalive”主题，并且只为所有客户端提供写访问权限。只要没有人可以阅读该主题，这不应该影响安全性。

另一种方法是让服务器以 QoS 1 或 2 向客户端发送“keepalive”消息（通过单个主题向所有人发布/订阅以提高效率），因为由于 QoS 流，这将涉及客户端在后台向服务器发送消息；这将作为保活。这样做的好处是让您的客户仅作为订阅者；但是它与“clean session = false”不兼容（因为您将有大量消息排队等待交付给离线一段时间的客户端 - 不必要地影响重新连接时的性能）。

不幸的是，这是我目前能想到的仅有的两种解决方法。

* * *

另外，顺便说一下，我在 Android 上使用 MqttDefaultFilePersistence 时遇到了许多问题，因此您可能需要注意这一点。特别是与重新实例化客户端时的文件锁定和问题有关。为了解决这个问题，我创建了一个构建在 SQLite 数据库之上的 MqttClientPersistence 实现，它更加健壮；你可能想做同样的事情。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-08T22:59:07.687

大约一年前，我在为 Android 编写 MQTT 应用程序时遇到了这个问题。[我已经在http://dalelane.co.uk/blog/?p=1599](http://dalelane.co.uk/blog/?p=1599)上详细地写过它，但简而言之，是的 - 我看到了同样的问题，你描述了当 MQTT 客户端时 CPU 是否处于睡眠状态应该发送它的 ping，然后 ping 永远不会被发送。

不同之处在于我使用了与您不同的 MQTT 客户端库（这是在 Paho 时代之前），而我使用的客户端库确实有一个我可以调用的 ping() 方法。（我的实现的完整来源在那个链接，它确实解决了这个问题）。

您不能扩展 Paho 客户端库的实现以包含 PING 命令吗？我认为这应该是一个相当小的修改。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-20T08:50:43.960

有一种方法可以随时修改 paho 代码并进行 ping。如果我们使用发布主题来保持活动，我们必须向服务器发送至少 7 或 8 个字节。是的，8 个字节仍然不是大数据。但是MQTT的心跳只有2bytes。我们已经失去了 MQTT 的最大优势。

深入研究 paho 代码，我对其进行了修改并在 MQTTClient 中编写了一个名为 nnnn() 的公共方法。此方法可以将 MqttPingReq 发送到服务器。可以在这里找到实现... [https://github.com/chinesejie/paho-for-android](https://github.com/chinesejie/paho-for-android)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-16T10:22:58.733

我的解决方案：

(1) 修改：`ClientComms comms;`from `protected`to `public`(in package `org.eclipse.paho.client.mqttv3`)

```
public class MqttAsyncClient implements IMqttAsyncClient { // DestinationProvider {
    //...
    public ClientComms comms;  // Add by Ben for pingreq*
    //...
} 
```

(2) 定义新类：（派生自`MqttClient`）

```
public class MqttClient2 extends MqttClient {

    public MqttClient2(String serverURI, String clientId,   MqttClientPersistence persistence) throws MqttException {
        super(serverURI, clientId, persistence);
    }

    public void pingreq()  throws MqttException {

        MqttDeliveryToken token = new MqttDeliveryToken(getClientId());
        MqttPingReq pingMsg = new MqttPingReq();
        aClient.comms.sendNoWait(pingMsg, token);

    }
} 
```

(3) 在任何地方，您都可以：

```
MqttClient2 mClient = new MqttClient2(url, mDeviceId, mDataStore);
mClient.pingreq(); 
```

希望这对你有帮助。

# java - 用于测试的 Scala vs Groovy vs Java

> ID：10065625
> 
> 赞同：2
> 
> 时间：2012-04-08T19:13:10.797
> 
> 标签：java, scala, testing, groovy, integration-testing

如果您需要选择语言来编写集成测试，您会选择哪种语言？（从上面，或者可能是另一种语言）。

我认为语言应该满足的要求至少有以下几点：速度快、IDE合理、易学。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:23:47.807

我会说 Groovy 可能是最好的选择。

*   它提供了优于 Java 的显着优势（闭包、列表/映射文字、非常紧凑的模拟实现）
*   对于任何熟悉 Java 的人来说，渐进式学习都非常容易（Scala 更加不同，许多人还认为该语言本质上更难）
*   IDE 插件现在很好地支持 Groovy
*   语言的速度几乎肯定与集成测试无关，因为被测试的系统可能包含更大的开销（尤其是在涉及数据库的情况下）

但是，如果您已经在其他地方使用 Scala（尤其是在被测系统中）并且可以假设您的开发人员熟悉它，那么 Scala 可能是更好的选择。

# c++ - 在 C++ 中实现序列化的数据结构对齐

> ID：10065626
> 
> 赞同：0
> 
> 时间：2012-04-08T19:13:13.347
> 
> 标签：c++, serialization, memory-alignment

我了解数据结构对齐的理论并使用该理论来实现序列化。但是，我很难开始使用真正的代码。有人可以给我一个简单的例子来展示它是如何工作的吗？

比方说：

```
 Class A {
  private:
     int a;
     char b;
     double c;
     char d;
     char e;
   public:
     void serialize(char * str);
 }; 
```

如何实现序列化方法来存储对齐的数据A？我应该重新排序数据结构并填充它吗？或者...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:55:00.790

**对齐和序列化是两个正交的方面。**

前者涉及数据结构的内存表示，而后者涉及其以顺序形式的等效表示。换句话说，一旦数据结构被序列化为字节流，对齐就不再重要了。同样，当提到序列化字节流时，对齐的概念也没有意义。

也就是说，您应该分别解决每个问题，而不是试图找到一个联合解决方案。

# javascript - 单击页面上的任何位置时的 Javascript 隐藏元素

> ID：10065628
> 
> 赞同：3
> 
> 时间：2012-04-08T19:13:38.067
> 
> 标签：javascript, jquery, javascript-events

我有一个滑动 JS 菜单，当您单击“noty_menu”链接时会打开，然后在您再次单击该链接时关闭。有没有办法设置它，以便在您单击页面上的 ANYWHERE 时关闭菜单？

以下是相关代码：

```
$('.noty_menu').click(function () {
$('ul.the_menu').slideToggle('medium');
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:15:39.780

您可以点击正文：

```
$('body').click(function() {
    /* close menu */
}); 
```

但是然后在您的菜单点击中，您必须防止点击传播到正文。否则菜单会打开，点击会向上传播，菜单会立即关闭。`return false;`在这里应该足够了：

```
$('.noty_menu').click(function () {
    $('ul.the_menu').slideToggle('medium');
    return false;
}); 
```

（您也可以在处理函数中读取事件参数，例如`function(ev) { ... }`和 call `ev.stopPropagation()`）。

您可能还想防止菜单内的点击关闭它：

```
$('ul.the_menu').click(function () {
    return false;
}); 
```

请注意，此解决方案附带一个警告，即停止传播的任何其他单击事件也将阻止菜单关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T19:16:08.313

你可以用

```
$('body').click(function(){
//ur code
}); 
```

去做这个

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T19:17:00.333

您可以通过以下方式检查整个文档，但其中包括对菜单的点击（如果您有任何间距，这可能会惹恼用户）：

```
var menu=$('ul.the_menu');
$(document).on('click',function(){
    if(menu.height>0) {
        menu.slideToggle('medium');
    }
}); 
```

# python - 如何使用 VBO 和 Pyglet 更新数据

> ID：10065631
> 
> 赞同：3
> 
> 时间：2012-04-08T19:13:59.733
> 
> 标签：python, opengl, vbo, pyglet

我想用 Pyglet 制作一个每一帧都在变化的网格。因此，我需要经常更新顶点，我认为 VBO 将是最快的方式（如果我错了，请纠正我）。下面是一个点的例子。这是正确的做法吗？我读到应该尽量减少 glBindBuffer 调用的数量，但这里每帧都调用它。GL_DYNAMIC_DRAW 也已启用，但如果我将其更改为 GL_STATIC_DRAW 它仍然有效。这让我想知道这是否是快速计算的正确设置

```
import pyglet
import numpy as np
from pyglet.gl import *
from ctypes import pointer, sizeof

vbo_id = GLuint()
glGenBuffers(1, pointer(vbo_id))

window = pyglet.window.Window(width=800, height=800)

glClearColor(0.2, 0.4, 0.5, 1.0)

glEnableClientState(GL_VERTEX_ARRAY)

c = 0

def update(dt):
    global c
    c+=1
    data = (GLfloat*4)(*[500+c, 100+c,300+c,200+c])
    glBindBuffer(GL_ARRAY_BUFFER, vbo_id)
    glBufferData(GL_ARRAY_BUFFER, sizeof(data), 0, GL_DYNAMIC_DRAW)
    glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(data), data)

pyglet.clock.schedule(update)

glPointSize(10)

@window.event
def on_draw():

    glClear(GL_COLOR_BUFFER_BIT)
    glColor3f(0, 0, 0)

    glVertexPointer(2, GL_FLOAT, 0, 0)
    glDrawArrays(GL_POINTS, 0, 2)

pyglet.app.run() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T16:17:08.040

您无需`glBufferData`在更新中每次都调用 - 创建并填充 VBO 一次（请参阅 参考资料`setup_initial_points`）并仅使用`glBufferSubData`. 如果您只使用单个 VBO，您还可以注释掉`glBindBuffer`调用`update()`（参见下面的代码）。 `GL_DYNAMIC_DRAW`vs`GL_STATIC_DRAW`在这个例子中不会有很大的不同，因为你将很少的数据推送到 GPU 上。

```
import pyglet
from pyglet.gl import *
from ctypes import pointer, sizeof

window = pyglet.window.Window(width=800, height=800)

''' update function  '''
c = 0
def update(dt):
    global c
    c+=1
    data = calc_point(c)
    # if there's only on VBO, you can comment out the 'glBindBuffer' call
    glBindBuffer(GL_ARRAY_BUFFER, vbo_id)
    glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(data), data)

pyglet.clock.schedule(update)

''' draw function  '''
@window.event
def on_draw():

    glClear(GL_COLOR_BUFFER_BIT)
    glColor3f(0, 0, 0)

    glVertexPointer(2, GL_FLOAT, 0, 0)
    glDrawArrays(GL_POINTS, 0, 2)

''' calculate coordinates given counter 'c' '''
def calc_point(c):
    data = (GLfloat*4)(*[500+c, 100+c, 300+c, 200+c])
    return data

''' setup points '''
def setup_initial_points(c):
    vbo_id = GLuint()
    glGenBuffers(1, pointer(vbo_id))

    data = calc_point(c)
    glBindBuffer(GL_ARRAY_BUFFER, vbo_id)
    glBufferData(GL_ARRAY_BUFFER, sizeof(data), 0, GL_DYNAMIC_DRAW)

    return vbo_id

############################################

vbo_id = setup_initial_points(c)

glClearColor(0.2, 0.4, 0.5, 1.0)
glEnableClientState(GL_VERTEX_ARRAY)

glPointSize(10)
pyglet.app.run() 
```

# php - 使用变量生成 URL

> ID：10065632
> 
> 赞同：1
> 
> 时间：2012-04-08T19:14:01.863
> 
> 标签：php, curl

希望有人能发现错误，我需要做的是首先获取网页以获得令牌，然后卷曲带有令牌的新网址；

这是我的代码

```
$text = $siteName;

  if (preg_match('/;t=([a-zA-Z0-9_-]{43})%3D/',$text,$matches)) {
// Match... vjVQa1PpcFMYuRsz10_H-1z41mWWe8d6ENEnBLE7gug
  echo 'TOKEN: '.$matches[1];

$curltube = curl_init ();
curl_setopt ($curltube, CURLOPT_URL, "http://www.veoh.com/watch?v=opQ9GzRe5qs".$matches[1]);
curl_setopt ($curltube, CURLOPT_RETURNTRANSFER, 0 );
curl_setopt ($curltube, CURLOPT_COOKIEFILE, "cookie8.txt"); 
$curltubeplay = curl_exec ($curltube);
curl_close ($curltube);

echo $curltubeplay;
} else {
// No match
} 
```

和之前的代码获取网页

```
curl_setopt ($ch, CURLOPT_URL, "http://www.veoh.com/watch?v=opQ9GzRe5qs");
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 0 );
curl_setopt ($ch, CURLOPT_COOKIEJAR, "cookie8.txt"); 
```

所以希望有人可以阐明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:30:24.183

我的*猜测*（请扩展问题以明确）是您希望构建这样的 URL：

```
http://www.veoh.com/watch?v=opQ9GzRe5qs;t=abc 
```

但是你正在建造这样一个：

```
http://www.veoh.com/watch?v=opQ9GzRe5qsabc 
```

有两个简单的修复。这个接受整个匹配的字符串，而不仅仅是令牌：

```
curl_setopt ($curltube, CURLOPT_URL, "http://www.veoh.com/watch?v=opQ9GzRe5qs".$matches[0]) 
```

并且这个添加了 URL 中缺少的部分：

```
curl_setopt ($curltube, CURLOPT_URL, "http://www.veoh.com/watch?v=opQ9GzRe5qs;t=".$matches[1]) 
```

# android - 片段替换（）不替换所有片段

> ID：10065640
> 
> 赞同：4
> 
> 时间：2012-04-08T19:15:16.617
> 
> 标签：android, replace, add, fragment

如果我为具有相同 viewId 的片段 A 和 B 调用 add()，然后尝试使用片段 C 在该 viewId 上调用 replace()，则只有片段 A 被删除，最终得到片段 B 和 C。根据文档， A 和 B 都应该用 C 代替……还是我读错了文档？

这是执行此操作的一种组合：

```
public class FragmentActivity extends SherlockFragmentActivity {
    @Override
    public void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        getSupportFragmentManager().beginTransaction().add(R.id.fragment, new FragmentA()).add(R.id.fragment, new FragmentB()).commit();

        ((Button) findViewById(R.id.swap)).setOnClickListener(new View.OnClickListener() {          
            @Override
            public void onClick(final View view) {
                getSupportFragmentManager().beginTransaction().replace(R.id.fragment, new FragmentC()).commit();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:11:47.983

查看文档， .replace 调用了一个将片段作为参数的方法。所以我猜它只是为了替换一个片段。我真的不明白为什么你首先要向同一个 id 添加两个片段。

# twitter-bootstrap - Twitter Bootstrap 与 Themeforest 管理主题

> ID：10065646
> 
> 赞同：0
> 
> 时间：2012-04-08T19:15:53.587
> 
> 标签：twitter-bootstrap, yii, wireframe

我正在构建一个 Web 应用程序，最终想要使用 Yii 框架。但现在我正在处理或制作 Web 应用程序本身的原型。虽然我喜欢 Twitter [Bootstrap](http://twitter.github.com/bootstrap/)，但我很好奇的是，

1.  如果我从 Themeforest 购买一个管理模板，它会提供比 Bootstrap 更完整的功能吗？有没有人使用过这些模板，您的经验/意见是什么？

2.  假设我使用 Bootstrap 或 Themeforest 的主题完成了线框，那么 Yii'ify 有多容易？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T20:21:57.730

我最近使用 Twitter bootstrap 启动了一个新项目，很容易将基本 Yii 项目中的标准 css/js 文件替换为 bootstrap 中的那些。

然后，您必须设计和建立标记您的网站。使用 Themeforest，您可以获得已经设计好的带有 CSS 和 JS 的 HTML 页面。

这些是完全不同的方式。第一个是如果你是设计师，或者你有一个可以使用的。此外，您应该非常了解前端编程（HTML、CSS、JS 等）。第二种方法可以节省您的时间，并且不需要很多额外的前端编程技能。但是您将自己限制在模板给您的范围内。如果您必须创建新类型的页面，该模板不提供 - 您必须遵循模板的一般样式。

我自己，我更喜欢第一种路线，因为我有设计师在 Adob​​e Illustrator 中为我制作所有设计，而且我有良好的前端编程技能，所以我可以从 AI 文件创建标记。Yii 和 Twitter Bootstrap 让我可以节省多次做标准事情的时间，并且非常适合我的编程风格。

**TLDR：** *如果你只想关心 PHP 和后端 - 去 Themeforest。如果您想完全控制您的网站创建过程 - 直接使用 Twitter 引导程序。*

另请查看将于 4 月 15 日发布的**[Kickstrap 。](http://ajkochanowicz.github.com/Kickstrap/)**Kickstrap 是类固醇上的 Twitter boostrap 版本。它已经预先创建了几个主题，包括 HTML5 样板，里面的 Font Awesome 等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T00:24:30.153

我建议也看看这个扩展：

[http://www.yiiframework.com/extension/bootstrap](http://www.yiiframework.com/extension/bootstrap)

它是 Yii 中 twitter 引导框架的移植。

它为您提供了同时拥有 Yii 和 twitter 引导程序的全部功能的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T07:05:45.427

根据我的意见，建议将[Bootstrap 3.0](http://getbootstrap.com/)用于管理主题。

您首先需要做的是定义我们的颜色模式、品牌和模型。我正在使用[Bootstrap Magic](http://pikock.github.io/bootstrap-magic/app/index.html)生成 CSS。

您可以参考[免费的 Bootstrap 管理模板](http://dmartify.com/downloads/karmanta-lite-free-bootstrap-admin-template/) 作为[Bootstrap 3 响应式管理模板入门](http://dmartify.com/downloads/karmanta-bootstrap-3-responsive-admin-template/)

# xml - 使用 Xstream 解析混合文本和 xml 节点

> ID：10065648
> 
> 赞同：0
> 
> 时间：2012-04-08T19:16:06.123
> 
> 标签：xml, parsing, xstream

我正在尝试像这样解析 xml：

```
<foreign lang="gre">&lsquo;<LM lemma="auieo" catg="fg">auieo</LM>&rsquo;</foreign> 
```

我正在使用 Xstream，我尝试编写一个特定的转换器，但它不起作用:(我不明白如何在“文本”块和引理 xml 中拆分外部内容（我有一个特定的转换器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T19:50:16.233

Xstream 无法解析混合内容。我用 xslt 预处理 xml 并将其转换为未混合的 xml，使用以下命令：

```
<xsl:template match="text()">
     <t> <xsl:value-of select="."/> </t>
</xsl:template> 
```

# php - Drupal - 用户登录检查

> ID：10065656
> 
> 赞同：0
> 
> 时间：2012-04-08T19:17:11.823
> 
> 标签：php, drupal, drupal-7

在 Drupal 中，使用该`user_is_logged_in`函数时出现以下错误。你能帮我解决吗？我想将 PHP 文件与 Drupal 集成。

## “调用未定义的函数 user_is_logged_in()”

解决方案：“PHP 过滤器”模块提供了将 HP 代码与 Drupal 集成的解决方案。
启用“PHP过滤器”->在节点中添加PHP代码->选择“PHP代码”而不是完整HTML->保存

使用 Drupal 7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T07:26:25.723

而不是使用 user_is_logged_in()，请尝试以下操作：

```
global $user;
if($user->uid)
{
    // execute some code
} 
```

# java - 带枚举的 SQL 插入？

> ID：10065658
> 
> 赞同：2
> 
> 时间：2012-04-08T19:17:38.440
> 
> 标签：java, sql, hibernate, enums

如何插入 SQL 值，例如：

```
class MyEnum {
    FOO, BAR
} 
```

后来映射到 a `MyEnum property = MyEnum.FOO`;

我该怎么 `INSERT into XX (property) values ('FOO')`办？

当我这样尝试时，我得到：

```
Data conversion error converting "'FOO' (MYENUM INTEGER)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:36:18.937

你必须将java枚举映射到休眠。[这](http://appfuse.org/display/APF/Java+5+Enums+Persistence+with+Hibernate)和[这](https://community.jboss.org/wiki/Java5EnumUserType)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:24:34.453

您必须将您的枚举转换为休眠用户类型并将列的映射更改为`UserType`类。看看这个[参考](https://community.jboss.org/wiki/UserTypeForPersistingAnEnumWithAVARCHARColumn)

# java - GridView 不符合Relativelayout 对齐方式

> ID：10065663
> 
> 赞同：1
> 
> 时间：2012-04-08T19:18:43.540
> 
> 标签：java, android, layout, gridview, android-relativelayout

我想右对齐这个gridview，使其与屏幕右侧齐平，但它似乎总是立即跟随我将它设置在右侧的任何textview。不仅如此，所有的文本视图都显示在彼此之上。

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <TextView android:layout_height="wrap_content"
              android:layout_width="wrap_content"
              android:text="@string/time_left"
              android:textSize="30sp"
              android:layout_alignParentLeft="true"
              android:id="@+id/time_left_label"/>
    <TextView android:layout_height="wrap_content"
              android:layout_width="wrap_content"
              android:id="@+id/time_left"
              android:layout_alignParentLeft="true"
              android:layout_below="@id/time_left_label"/>
    <TextView android:layout_height="wrap_content"
              android:layout_width="wrap_content"
              android:text="@string/progress"
              android:textSize="30sp"
              android:layout_alignParentLeft="true"
              android:layout_below="@id/time_left"
              android:id="@+id/progress_label" />
    <TextView android:layout_height="wrap_content"
              android:layout_width="wrap_content"
              android:id="@+id/progress"
              android:layout_alignParentLeft="true"
              android:layout_below="@id/progress_label"/>
    <GridView android:layout_height="wrap_content"
              android:layout_width="wrap_content"
              android:id="@+id/main_grid"
              android:numColumns="2"
              android:layout_alignParentRight="true"
              android:layout_toRightOf="@id/time_left_label"
              android:stretchMode="none" />
</RelativeLayout> 
```

这是一张我想用油漆快速绘制的图片！ [http://imgur.com/x7Ypr](http://imgur.com/x7Ypr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:43:14.410

> 我想右对齐这个gridview

您希望它如何对齐？你提到它的作用，但没有提到你想要的。

> 似乎...跟随我将其设置在右侧的任何文本视图

好吧，您正在使用`layout_alignParentRight`and `layout_toRightOf`。

> textviews 显示在彼此的顶部。

将您放在`TextViews`彼此下方不会堆叠它们。您可以将 a`LinearLayout`与它的`orientation`集合一起`vertical`使用，也可以`layout_below`将它们放在彼此下方。

# c++ - 如何在其自身中使用 lambda 函数？

> ID：10065666
> 
> 赞同：11
> 
> 时间：2012-04-08T19:19:06.933
> 
> 标签：c++, c++11, lambda

我有这段代码，不知道我想要实现的目标是否可行。

```
_acceptor.async_accept(
    _connections.back()->socket(),
    [this](const boost::system::error_code& ec)
    {
        _connections.push_back(std::make_shared<TcpConnection>(_acceptor.get_io_service()));
        _acceptor.async_accept(_connections.back()->socket(), this_lambda_function);
    }
); 
```

一旦接受了套接字，我想重用处理程序（又名 lambda 函数）。这可能吗？有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T19:35:17.657

`std::function<>`您必须使用（或类似的东西）作为中介来存储 lambda 的副本：

```
std::function<void(const boost::system::error_code&)> func;
func = [&func, this](const boost::system::error_code& ec)
{
    _connections.push_back(std::make_shared<TcpConnection>(_acceptor.get_io_service()));
    _acceptor.async_accept(_connections.back()->socket(), func);
}

_acceptor.async_accept(_connections.back()->socket(), func); 
```

但你只能通过*参考*来做；如果你试图通过价值来捕捉它，它是行不通的。这意味着您必须将此类 lambda 的使用限制为使用按引用捕获才有意义。因此，如果您在异步函数完成之前离开此范围，它将中断。

您的另一种选择是创建一个适当的仿函数而不是 lambda。最终，lambdas 不能做所有事情。

# c# - 正则表达式.分割空白

> ID：10065674
> 
> 赞同：3
> 
> 时间：2012-04-08T19:20:07.733
> 
> 标签：c#

```
string pattern = @"(if)|(\()|(\))|(\,)";
string str = "IF(SUM(IRS5555.IRs001)==IRS5555.IRS001,10,20)";
string[] substrings = Regex.Split(str,pattern,RegexOptions.IgnorePatternWhitespace | RegexOptions.IgnoreCase) ;
foreach (string match in substrings)
{
    Console.WriteLine("Token is:{0}", match);
} 
```

输出是

```
Token is:
Token is:IF
Token is:
Token is:(
Token is:SUM
Token is:(
Token is:IRS5555.IRs001
Token is:)
Token is:==IRS5555.IRS001
Token is:,
Token is:10
Token is:,
Token is:20
Token is:)
Token is: 
```

正如您在 1,3 和最后一个标记中看到的空字符串，我无法理解为什么会出现这种结果，我给定的字符串中没有空字符串。

我不希望这是结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:26:48.590

试试看：

```
 string pattern = @"(if)|(\()|(\))|(\,)";
        string str = "IF(SUM(IRS5555.IRs001)==IRS5555.IRS001,10,20)";
        var substrings = Regex.Split(str, pattern, RegexOptions.IgnoreCase).Where(n => !string.IsNullOrEmpty(n));
        foreach (string match in substrings)
        {
            Console.WriteLine("Token is:{0}", match);
        } 
```

![在此处输入图像描述](../Images/75fc07bf6452052097cf7be5e2154f9d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T19:33:49.620

发生这种情况是因为“IF”和“(”是分隔符，并且由于“IF”左侧没有任何内容，“IF”和“(”之间没有任何内容，因此您会得到这两个空条目。从模式中删除“IF”。

```
string pattern = @"(\()|(\))|(\,)"; 
```

* * *

更新

您可以搜索标记而不是拆分字符串

```
var matches = Regex.Matches(str, @"\w+|[().,]|=="); 
```

这将准确返回您的文本标记。

```
string[] array = matches.Cast<Match>().Select(m => m.Value).ToArray(); 
```

```
    [0]：“如果”
    [1]：“（”
    [2]：“总和”
    [3]：“（”
    [4]：“国税局5555”
    [5]：“。”
    [6]：“IRs001”
    [7]：“）”
    [8]：“==”
    [9]：“国税局5555”
    [10]：“。”
    [11]：“国税局001”
    [12]：“，”
    [13]：“10”
    [14]：“，”
    [15]：“20”
    [16]：“）”

```

* * *

更新

`Regex`您可以尝试的另一种模式`Regex.Split`是

```
@"\b" 
```

它将在单词边界处拆分文本

```
    [0]：“”
    [1]：“如果”
    [2]：“（”
    [3]：“总和”
    [4]：“（”
    [5]：“国税局5555”
    [6]：“。”
    [7]：“IRs001”
    [8]：“）==”
    [9]：“国税局5555”
    [10]：“。”
    [11]：“国税局001”
    [12]：“，”
    [13]：“10”
    [14]：“，”
    [15]：“20”
    [16]：“）”

```

# prolog - 列表列表中的树路径

> ID：10065675
> 
> 赞同：1
> 
> 时间：2012-04-08T19:20:08.400
> 
> 标签：prolog, dcg

我想构建一个谓词（Prolog），它接受一棵树并返回一个列表列表，每个列表都是一个树路径。树被定义为树（根，左树，右树）。请问您有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:55:57.000

这是非常不寻常的（例如，更常见的是询问树与其所有节点的平面列表之间的关系，DCG 非常适合），可能像这样：

```
tree_list(nil, []).
tree_list(tree(Node,Left,Right), [Lefts,Node,Rights]) :-
        tree_list(Left, Lefts),
        tree_list(Right, Rights). 
```

例子：

```
?- tree_list(tree(a,tree(b,nil,tree(d,nil,nil)),tree(c,nil,nil)), Ts).
Ts = [[[], b, [[], d, []]], a, [[], c, []]]. 
```

这种表示是浪费的（你知道所有非空列表都会有 3 个元素，那么为什么不使用三元项而不是列表呢？）而且在我看来是不必要的（因为你首先已经有了树表示），但谁知道它有什么用...

# django - Django：如果用户不是超级用户，则隐藏模板中的按钮

> ID：10065676
> 
> 赞同：53
> 
> 时间：2012-04-08T19:20:20.083
> 
> 标签：django, django-models, django-forms, django-templates, django-users

你如何让你的模板/视图识别登录用户是否是超级用户？

如果用户不是超级用户，我希望完全隐藏我的表单（在模板中）上的某些按钮

你会怎么做呢？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-04-08T19:23:12.900

检查对象[`is_superuser`](https://docs.djangoproject.com/en/dev/ref/contrib/auth/#django.contrib.auth.models.User.is_superuser)：`User`

```
{% if request.user.is_superuser %}
    ...
    <button>...</button>
    ...
{% else %}
...
{% endif %} 
```

* * *

**编辑：** @mustafa-0x 评论后

以上假设您已`django.core.context_processors.request`包含在您的`TEMPLATE_CONTEXT_PROCESSORS`设置**中，这不是默认的**。

的[默认设置`TEMPLATE_CONTEXT_PROCESSORS`](https://github.com/django/django/blob/master/django/conf/global_settings.py#L207)：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.tz',
#    'django.core.context_processors.request',
    'django.contrib.messages.context_processors.messages',
) 
```

已经包含`django.contrib.auth.context_processors.auth`（尤其不包括`request`上下文处理器），这意味着在大多数情况下，您已经可以访问而`{{ user }}`无需通过视图将其添加到您的上下文中，或者使`request`上下文处理器能够通过上述方式访问用户`{{ request.user }}`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-04-16T07:29:47.193

正如评论中所讨论的，您可以`User`自动使用模板中可用的对象：

```
{% if user.is_superuser %}
<div class="alert alert-success" role="alert">
You are logged in as {{user.first_name}}, here are the
<a href="/admin/">admin pages</a> for changing content.
</div>
{% endif %} 
```

您也可以使用`user.is_staff`可能更合适的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-03T13:34:00.483

实际上，当您尝试检查登录 html 模板天气时，用户是否是超级用户，您将无法这样做，因为在那种情况下，您可以在 views.py 文件中检查用户是否超级用户然后将其重定向到您想要的任何地方。 [你可以做一些这样的事情，你可以在 start 函数中看到](https://i.stack.imgur.com/hF9yN.png)

# iphone - Objective C 如何阻止用户与我在地图上的当前位置图钉进行交互

> ID：10065678
> 
> 赞同：0
> 
> 时间：2012-04-08T19:20:24.233
> 
> 标签：iphone, objective-c, mkannotationview, mapkit

如何阻止用户与我当前的位置图钉进行交互？我有这样的问题：我的地图上有很多大头针，如果它们很近并且它们在“我的当前位置”大头针附近，那么该大头针会使用我想要阻止它的点击事件。我不希望显示气泡“当前位置”。我知道这是 *pinView.canShowCallout = NO; 但是我怎么知道我的位置是什么引脚？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:12:03.483

这不起作用，因为您至少需要选择一个来解决它，但无论如何感谢它对搜索起点有很大帮助:) 我用这段代码做到了：

```
 - (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    for(int i = 0; i< [views count]; i++)
    {
        if([[[[views objectAtIndex:i] class] description] isEqualToString:@"MKUserLocationView"])
        {
            ((MKAnnotationView*)[views objectAtIndex:i]).canShowCallout = NO;
        }
    }
} 
```

您必须找到视图并应​​用它。

你也需要把这个：

```
if ([annotation isKindOfClass:[MKUserLocation class]]) {
        [mapView viewForAnnotation:annotation].canShowCallout = NO;
        return [mapView viewForAnnotation:annotation];

    } 
```

在 ：-`(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:36:50.403

这应该给你你需要的东西..

```
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{

if ([annotation isKindOfClass:[MKUserLocation class]]) {
    view.canShowCallout=NO;
    }
} 
```

让我知道它是否有效.. :)

# php - PHP Simple HTML DOM - 从 DOM 中获取第 2 和第 3 段

> ID：10065679
> 
> 赞同：1
> 
> 时间：2012-04-08T19:20:25.463
> 
> 标签：php, simple-html-dom

我正在使用简单的 HTML DOM 库来获取网站 DOM 中的第二段，但我想做的是获取第二段和第三段。

这让我`<p>`在 DOM 中排名第二：

```
$dates->find('.content .left div.linkDetail p', 2)->plaintext; 
```

我怎样才能扩展它以获得第二和第三？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:39:46.010

You could use [array_slice](http://php.net/manual/en/function.array-slice.php):

```
$pArray = array_slice( $dates->find('.content .left div.linkDetail p'),2,2 ); 
```

# opencl - OpenCL 内核工作组大小限制

> ID：10065681
> 
> 赞同：2
> 
> 时间：2012-04-08T19:20:44.707
> 
> 标签：opencl

所以当我调用我的内核时，我总是遇到奇怪的错误；规定的最大内核工作组大小为 1，而我的设备（我的 Macbook）的工作组大小明显高于此。内核将代码限制在单个工作组中可能有哪些原因？这是我的内核之一：

```
__kernel
void termination_kernel(const    int    Elements,
                    __global float* c_I,
                    __global float* c_Ihat,
                    __global float* c_rI,
                    __local  float* s_a)
{
  const int bdim = 128;
  int n = get_global_id(0);
  const int tx = get_local_id(0); // thread index in thread-block (0-indexed)
  const int bx = get_group_id(0);  // block index (0-indexed)
  const int gx = get_num_groups(0);

  // is thread in range for the addition
  float d = 0.f;
  while(n < Elements){
    d += pow(c_I[n] - c_Ihat[n], 2);
    n += gx * bdim;
  }

  // assume bx power of 2 
  int alive = bdim / 2;
  s_a[tx] = d;
  barrier(CLK_LOCAL_MEM_FENCE);

  while(alive > 1){
    if(tx < alive)
      s_a[tx] += s_a[tx + alive];
    alive /= 2;
    barrier(CLK_LOCAL_MEM_FENCE);
  }

  if(tx == 0)
    c_rI[bx] = s_a[0] + s_a[1]; 
} 
```

并且返回的错误是

```
OpenCL Error (via pfn_notify): [CL_INVALID_WORK_GROUP_SIZE] : OpenCL Error : clEnqueueNDRangeKernel     
failed: total work group size (128) is greater than the device can support (1)
OpenCL Error: 'clEnqueueNDRangeKernel(queue, kernel_N, dim, NULL, global_N, local_N, 0, NULL, NULL)' 
```

我知道它说限制在设备上，但调试表明

```
CL_DEVICE_MAX_WORK_GROUP_SIZE = 1024 
```

和

```
CL_KERNEL_WORK_GROUP_SIZE = 1 
```

内核构造由

```
 char *KernelSource_T = readSource("Includes/termination_kernel.cl"); 
  cl_program program_T = clCreateProgramWithSource(context, 1, (const char **) &KernelSource_T, NULL, &err);
  clBuildProgram(program_T, 1, &device, flags, NULL, NULL);
  cl_kernel kernel_T = clCreateKernel(program_T, "termination_kernel", &err); 
```

我会包含调用函数，但我不确定它是否相关；我的直觉是内核代码中的某些东西在强制限制。有任何想法吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-13T13:02:38.247

Apple OpenCL 不支持 CPU 上大于 [1, 1, 1] 的工作组。我不知道为什么，但至少在 OSX 10.9.2 之前就是这样。不过，较大的工作组在 GPU 上很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:51:36.830

CL_KERNEL_WORK_GROUP_SIZE 告诉您这个特定内核的最大工作组大小可以有多大。OpenCL 的运行时通过检查内核代码来确定这一点。CL_KERNEL_WORK_GROUP_SIZE 将是一个小于或等于 CL_DEVICE_MAX_WORK_GROUP_SIZE 的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:19:41.283

希望该工作组大小的可用本地内存量较少。请问你能证明论据吗？. 您可以尝试通过减小工作组大小，从 2、4、8、16、32、64、128 等开始，确保其为 2 的幂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-01T15:43:07.290

[自托米](https://stackoverflow.com/a/25287001/4375377)的回答以来，时间已经过去了，苹果似乎在这方面变得更加灵活。在我的 OS X 10.12.3（仍然是 OpenCL 1.2）上，最多可以`CL_DEVICE_MAX_WORK_GROUP_SIZE`在第一维中使用。

根据规范，也可以通过`CL_DEVICE_MAX_WORK_ITEM_SIZES`根据[文档获得每个维度的最大工作组数](https://www.khronos.org/registry/OpenCL/sdk/1.2/docs/man/xhtml/clGetDeviceInfo.html)

# java - 在弹出窗口中更新按钮的可见性时遇到问题

> ID：10065682
> 
> 赞同：0
> 
> 时间：2012-04-08T19:20:51.690
> 
> 标签：java, android, button, visibility, popupwindow

我正在尝试获取它，以便当用户在弹出窗口中单击 popbtnnext 时，程序会检查数组 flaggedwordsused 的其余部分是否为空。如果不是，则按钮设置为可见并且程序继续运行。如果为空，程序将按钮更新为不可见。

```
 popbutnext.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        f++;
        for (int g= f+1; g<flagwordsused.length; g++) {
              if (flagwordsused[g] != null) {
                popbutnext.setVisibility(0);
                break;
              }
              else{
                  poptv1.setText(""+f);
                  popbutnext.setVisibility(1);
              }
            }
    }
    }); 
```

flagwordsused 是一个由 20 个元素组成的数组，在我的测试用例中，f 从 0 开始，字符串“very”占据元素 0，所有其他值为 null。我有一个使用 f 值更新的 textView，以便我知道程序正在访问 else 语句。该值更新得很好，但按钮的可见性永远不会改变。您能给我的任何帮助将不胜感激。popuplayout 是在 java 中创建的，而不是在 xml 中创建的，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:34:55.187

您应该使用 View 中的常量来设置可见性。也使代码更易于阅读：

要使 popbutnext 不可见：

```
popbutnext.setVisibility(View.INVISIBLE); 
```

在构建布局时使 popbutnext 不可见并且不占用任何空间：

```
popbutnext.setVisibility(View.GONE); 
```

要使 popbutnext 可见：

```
popbutnext.setVisibility(View.VISIBLE); 
```

它对您不起作用的原因是因为价值观是错误的。Invisible 是 4，gone 是 8，visible 是 0。但是，我仍然建议使用 View 类中的常量 - 你永远不知道，它们可能会在即将到来的 Android 版本中改变。看看[这个](http://developer.android.com/reference/android/view/View.html#setVisibility%28int%29)链接和可见性参数。

# url - Rails 中的特定领域页面

> ID：10065686
> 
> 赞同：0
> 
> 时间：2012-04-08T19:21:28.297
> 
> 标签：url, ruby-on-rails-3.1, routing, dns

有没有办法制作域/网址特定页面？

mysite.com 的主页与 mysite.net 不同

是路由还是页面内的一些查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T16:03:05.970

There is no such thing called domain specific pages, They do to keep things dynamic is that, they load the page details according to the domain

Ex:

in rails you could get the ip by `request.ip`, then in the table you have the details for a given page according to the ip

simple example would be, say you have the following table

```
sites
------------------------------
| id | site_name | ip         |
------------------------------- 
| 1 | demo site | 192.168.0.1 |
-------------------------------

pages
-------------------------------------------
|id | page_name | page_content | site_id |
-------------------------------------------
| 1 | home      | some content | 1       |
------------------------------------------- 
```

when you load the home page. you could get the current ip and from that you can find the site, once you have the site you can find all the pages according to that site

And to keep this dynamic pages more manageable you could make use of gems like [liquid](http://liquidmarkup.org/) (http://liquidmarkup.org/)

check these screen casts we well

[dynamic layouts](http://railscasts.com/episodes/125-dynamic-layouts)

[subdomains](http://railscasts.com/episodes/123-subdomains)

# javascript - Express (Node.js) - 有条件地包含 CSS 和 JS 文件

> ID：10065689
> 
> 赞同：1
> 
> 时间：2012-04-08T19:21:36.917
> 
> 标签：javascript, model-view-controller, node.js, express

我目前正在使用 Node.js 的 Express 框架，并且在每页（路由）的基础上包含样式表和 javascript 文件时遇到了麻烦。我正在使用带有以下内容的*routes/index.js文件的默认 Express 设置：*

```
exports.index = function(req, res){
    res.render('index', { title: 'Index Page Test' })
};
exports.browse = function(req, res){
  res.render('browse', { title: 'Browse Page Test' })
}; 
```

上面的路线工作正常，它按预期将 index.jade 和 browse.jade 加载到 layout.jade 的“主体”中。但是，索引路由所需的资源（CSS 和 JS 文件）与浏览路由所需的资源并不相同。我是否可以将一个数组传递给包含所需资产的 layout.jade 模板并简单地循环它？

我试图通过以下方式进行上述操作：

**Index.js（路由）**

```
scripts: [
   'javascripts/jquery.js',
   'javascripts/easel.js',
   'javascripts/script.js'
] 
```

其次是：

布局.jade

```
 each js in scripts
        script(src= js) 
```

但是，它只是抛出一个错误，提示*“未定义脚本”。* 我很确定我做的不对。另外，补充一下，我在这里偶然发现了另一个类似的 StackOverflow 问题：[Node.js with Express: Importing client-side javascript using script tags in Jade views?](https://stackoverflow.com/questions/5605392/node-js-with-express-importing-client-side-javascript-using-script-tags-in-jade) 但我不太喜欢那里显示的方法（它需要一个额外的助手）。如果可能的话，我想坚持模板引擎本身提供的功能。

谢谢。

编辑：如果有帮助，我正在尝试实现类似的目标：http: [//kerkness.ca/kowiki/doku.php ?id=template-site:create_the_template](http://kerkness.ca/kowiki/doku.php?id=template-site:create_the_template)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:46:51.843

尝试将脚本数组传递给视图，如下所示：

```
res.render('index', { title: 'Index Page Test', scripts: scripts}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T23:48:35.853

尝试使用动态助手。

它将作为脚本在您的玉模板中作为局部变量可用。

```
app.dynamicHelpers({
  scripts: function(req, res){
    return ['javascripts/jquery.js', 'javascripts/easel.js','javascripts/script.js'];
  }
}); 
```

# android - Android应用程序上的强制关闭错误

> ID：10065692
> 
> 赞同：1
> 
> 时间：2012-04-08T19:21:42.243
> 
> 标签：android, forceclose

我已将 Results 类添加到 Android Manifest，所以是的，您可以将其从列表中删除。我制定方法的方式有误吗？

```
 package com.kenning.foreveralone;

    import android.app.Activity;
    import android.os.Bundle;
    import android.widget.EditText;
    import android.widget.TextView;

    public class Results extends Activity{

        EditText fbFriends;
        TextView resulting;
        String value;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.rslt);
            TextView resulting = (TextView) findViewById(R.id.result);
            EditText fbFriends = (EditText) findViewById(R.id.noFacebookFriends);
            String value = fbFriends.getText().toString();
            resulting.setText("Your score is " + value);
        }

    } 
```

当我开始这门课时，它似乎总是强制关闭我的应用程序。谁能告诉我我做错了什么？

这是日志猫：

```
04-08 20:05:24.169: E/AndroidRuntime(589): FATAL EXCEPTION: main
04-08 20:05:24.169: E/AndroidRuntime(589): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kenning.foreveralone/com.kenning.foreveralone.Results}: java.lang.NullPointerException
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.os.Looper.loop(Looper.java:123)
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-08 20:05:24.169: E/AndroidRuntime(589):  at java.lang.reflect.Method.invokeNative(Native Method)
04-08 20:05:24.169: E/AndroidRuntime(589):  at java.lang.reflect.Method.invoke(Method.java:521)
04-08 20:05:24.169: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-08 20:05:24.169: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-08 20:05:24.169: E/AndroidRuntime(589):  at dalvik.system.NativeStart.main(Native Method)
04-08 20:05:24.169: E/AndroidRuntime(589): Caused by: java.lang.NullPointerException
04-08 20:05:24.169: E/AndroidRuntime(589):  at com.kenning.foreveralone.Results.onCreate(Results.java:20)
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-08 20:05:24.169: E/AndroidRuntime(589):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-08 20:05:24.169: E/AndroidRuntime(589):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:27:27.287

`NullPointerException`您在 OnCreate中获得了某个位置。我猜要么你的 rslt.xml 布局中的 id 错误，所以结果和 fbFriends 为空，或者 fbFriends 中没有任何文本，所以`getText()`返回空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:29:22.730

这是 onCreate 中的*空指针异常*，那么为什么不尝试单*步*执行以`onCreate`查看哪个变量为空呢？

也就是说，我猜`R.id.noFacebookFriends`不是`R.layout.rslt`.

# css - 如何在没有这些多个 CSS 冲突的情况下在 ul 导航栏中垂直居中文本？

> ID：10065694
> 
> 赞同：0
> 
> 时间：2012-04-08T19:21:55.517
> 
> 标签：css, center, padding, vertical-alignment, navigationbar

我制作了一个功能性的 CSS 导航栏，除了一些丑陋的 CSS 副作用——

我试图将每个列表块中的文本垂直居中，`vertical-align: middle`但没有工作。相反，我使用的是`padding-top: 13px`，但这会呈现没有`background-color`列表元素其余部分的填充区域，并且`display: inline block`链接的样式也**不会**扩展到填充区域！（`a:hover`仅影响填充下方的区域）

那么如何在没有这些 CSS 问题的情况下将列表元素中的文本垂直居中？

这是相关的CSS：

```
/* header section */
#header
{
    padding-left: 115px;
    margin-bottom: 10px;
}
    #main-menu
    {
        list-style-type: none;
    }
    #main-menu li
    {
        border: 1px solid black;
        text-align: center;
        padding-top: 13px;

        color: #666;
        font-family: "Lucida Console";
        font-variant: small-caps;
        letter-spacing: 2px;

        /* for  block layout */
            display: -moz-inline-box; /* for firefox */
            display: inline-block;

        width: 153px;
        height: 32px;
    }
    #main-menu a:link, a:visited
    {
        display: -moz-inline-box; /* for firefox */
        display: inline-block;

        width: 100%;
        height: 100%;
        background-color: #eee;
    }
    #main-menu a:hover, a:active
    {
        background-color: #bbb;
    }<br /><br /> 
```

...这是相关的 HTML：

```
 <!-- header section -->
        <div id = "header">
            <ul id = "main-menu">
                <!-- no spaces between list elements when all on the same line! -->
                <li><a href = "home.html" title = "home">home</a></li><li><a href = "about.html" title = "about">about</a></li><li><a href = "cart.html" title = "shopping cart">cart</a></li><li><a href = "login.html" title = "log in">login</a></li><li><a href = "createAccount.html" title = "create a new account">sign up</a></li>
            </ul>

        </div> <!-- end of header section --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:34:41.627

我改变的事情：

*   将链接更改为显示为块元素。
*   移除了 li 元素顶部的填充。
*   将该填充高度添加到 li 元素的高度。
*   将 line-height 设置为 li 元素的高度。
*   一些格式

[http://jsfiddle.net/gtr053/7yrX7/](http://jsfiddle.net/gtr053/7yrX7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:34:52.433

尝试设置行高

```
line-height: 13px; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-17T12:15:06.163

我对任何事情都不太了解，但我刚刚使用过它并且它有效

进入通用样式的快速CSS

```
li {
    display:inline;
    padding: 0px 50px;
} 
```

第一个 px 将菜单项向下，第二个将它们分开。

# html - IE9 和 Mac CSS 错误？

> ID：10065700
> 
> 赞同：0
> 
> 时间：2012-04-08T19:23:12.623
> 
> 标签：html, image, internet-explorer, css

我的 CSS 和 IE9 甚至 MacOS 上的 Chrome 都遇到了一个非常令人沮丧的问题。

我在容器#categories {width: 960px} 中有四个图像的 ul。

每个 img (li) 都包含在一个盒子中 .catBox {width: 220px; 向左飘浮; 边距：20px 25px 10px 0px}。

我用 .catBox:last-child {margin-right: 0px;} 去掉了最后一张图片的右边距。

基本上，我要做的是证明 960px 宽度容器中的四个图像是合理的。这在我的本地计算机上的 Chrome、Safari、FF 和 IE9 中呈现良好，并且 Chrome、Safari 和 FF 在我的 Windows 机器上远程工作正常。

在 IE 中，当我远程测试时，它会将最后一个图像推送到下一行。此外，在 Mac 上的 Chrome 中进行测试时，它也会做同样的事情。

这是我的数学运算：220 像素 * 4 张图像 = 880 像素。25px = 75px 的 3 个边距（最后一个已删除）。75 + 880 = 955 像素。这应该在任何这些浏览器中给我一个 5px 的“缓冲区”。有人可以帮忙吗？我想错了吗？

在此先感谢您的帮助。

HTML

```
<div id="categories">
<ul>
<li class="catBox"><img src="img/3mmwpolytongue22mm.jpg" alt=""><div class="caption"><h2>Stone</h2></div> 
</li>
<li class="catBox"><img src="img/4g5.5m12ws.JPG" alt=""><div class="caption"><h2>Wood</h2></div></li>
<li class="catBox"><img src="img/5mmsnowflakeobsidianlabretA_01.JPG" alt=""><div class="caption"><h2>Teflon & Polymer</h2></div></li>
<li class="catBox"><img src="img/13mmblueindianearrings1.jpg" alt=""><div class="caption"><h2>Custom</h2></div></li>
</ul>
</div> 
```

CSS

```
#categories {
    width: 960px;
    height: 240px;
}

.catBox {
    position: relative;
    display: inline;
    overflow: hidden;
    width: 220px;
    margin: 20px 25px 10px 0px;
    float: left;
    z-index: -999;
}

.catBox:last-child {
    margin-right: 0px;
}

.caption {
    position: absolute;
    top: 190px;
    width: 220px;
    height: 30px;
    background-color: #333;
    -webkit-opacity: .5;
    -moz-opacity: .5;
    -ms-opacity: .5;
    text-align: center;
    z-index: 999;
    padding: 0px;
}

.caption h2 {
    color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:25:36.423

删除标签之间的所有空格。它可能会干扰像素精确的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T01:47:41.597

我不确定您为什么会看到您所描述的行为 - 您是否知道远程服务器上的所有 CSS 都完全相同？如果我不得不猜测，还有另一个规则会影响你的 li。可以分享一下远程服务器链接吗？

此外，您的标记和 CSS 可以大大简化。我并不是说它会解决您所看到的问题，但它至少会消除这种情况下的一些变量。你可以有：

```
<ul id="categories">
  <li>
     <img src="img/3mmwpolytongue22mm.jpg" alt="" />
      <h2>Stone</h2> 
  </li>
  <li>
      <img src="img/4g5.5m12ws.JPG" alt="" />
      <h2>Wood</h2>
  </li>
  <li>
      <img src="img/5mmsnowflakeobsidianlabretA_01.JPG" alt="" />
      <h2>Teflon & Polymer</h2>
  </li>
  <li>
      <img src="img/13mmblueindianearrings1.jpg" alt="">
      <h2>Custom</h2>
  </li>
 </ul> 
```

然后您的 CSS 可能如下所示：

```
#categories {
width: 960px;
height: 240px;
}

#categories li {
    position: relative;
    display: inline;
    overflow: hidden;
    width: 220px;
    margin: 20px 25px 10px 0px;
    float: left;
    z-index: -999;
}

#categories li:last-child {
    margin-right: 0px;
}

#categories h2 {
    position: absolute;
    top: 190px;
    width: 220px;
    height: 30px;
    background-color: #333;
    -webkit-opacity: .5;
    -moz-opacity: .5;
    -ms-opacity: .5;
    text-align: center;
    z-index: 999;
    padding: 0px;
    color: #fff;
} 
```

实际上，在重构 CSS 时，我*确实*注意到了一个问题——这条规则：

```
catBox:last-child 
```

不会按您期望的方式工作。至少根据我的经验，last-child 规则在作为选择器的一部分应用于类时不起作用。它似乎只适用于直接向上的元素——比如#categories li:last-child。因此，它可能不会像您期望的那样删除右边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:35:13.117

我看不出有什么问题。你应该使用制表符来做空格，而不是空格键。这里有 JSFiddle，在 FF、Chrome 和 Safari 中进行了测试。

[http://jsfiddle.net/PwkAW/](http://jsfiddle.net/PwkAW/)

# ios - iPhone横向模式问题

> ID：10065702
> 
> 赞同：0
> 
> 时间：2012-04-08T19:23:16.997
> 
> 标签：ios, orientation

我将 info.plist 设置如下：

*   初始界面方向：横向（左主页按钮）
*   支持的界面方向：横向（左主页按钮）和横向（右主页按钮）

当我启动我的应用程序时，方向设备具有横向模式，但我的视图不会旋转到这个方向。

我使用下面的方法进行旋转方向，但在横向模式下查看不是初始的（在这种情况下旋转我的设备后，我需要结果 - 在横向模式下查看旋转）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:04:28.537

过去我遇到过几个问题。基本上，如果您只是将初始视图控制器放在那里，它就会像处于纵向模式一样处理错误。我为此找到的解决方法是将视图控制器添加到导航控制器。

[请参阅我发布的这个问题以获得完整的解释](https://stackoverflow.com/questions/9583297/ipad-modal-view-controller-acting-in-portrait-even-though-its-landscape/9632625#9632625)

# css - Chrome 光标属性仅适用于对象的边缘？

> ID：10065703
> 
> 赞同：0
> 
> 时间：2012-04-08T19:23:25.190
> 
> 标签：css, google-chrome

使用：MAC OSX 10.6.8 上的 Chrome 18.0.1025.151

我遇到了一个有趣的问题。使用 Chrome 时，只有当您点击 DOM 对象的边缘时，光标属性才会发生变化。例如：在下面的用法中，光标只会变为图像边缘的“移动”光标。当它完全在图像上它会回到指针？

知道这里发生了什么吗？

CSS：

```
.handle{cursor:move} 
```

用法：

```
<img alt="Lounge" class="handle" src="SOME URL" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:54:10.380

尝试

1.  宽度
2.  高度
3.  堵塞

所以：

```
.yourObject {
position: relative;
width: 50px;
height: 50px;
display: block;
cursor: move;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T20:39:06.493

我在运行 10.12.3 的 Macbook Pro 上遇到了同样的错误。它似乎是由其他程序引起的。当某些程序打开/处于某些状态时，`cursor:`CSS 规则仅适用于对象边缘，而与浏览器无关。在 Spotify 和 Intellij IDEA 中都遇到过这个错误。

尝试一个一个地关闭你的程序，直到它正常运行。

# python - Python Boolean：另一个列表或字典中列表的任何值

> ID：10065705
> 
> 赞同：0
> 
> 时间：2012-04-08T19:23:59.770
> 
> 标签：python, boolean-expression

我最近才发现自己正在编写这行代码，我不太喜欢它：

```
if ('upload' in request.POST) or ('delete' in request.POST): 
```

我已经考虑过列表理解，它看起来像这样：

```
if [value for value in ['upload','delete'] if value in request.POST]: 
```

这并不是更好。我非常简单的问题是：这可以简化吗？或者这只是想太聪明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T19:26:00.537

您可以使用 set intersection 更简洁地编写它：

```
if {'upload', 'delete'} & set(request.POST): 
```

或更明确地说：

```
if {'upload', 'delete'}.intersection(request.POST): 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:26:04.990

简化使用`any()`.

```
if any(value for value in ['upload','delete'] if value in request.POST): 
```

# python - 如何使用 Python 的 REQUESTS 包发出发布请求？

> ID：10065707
> 
> 赞同：2
> 
> 时间：2012-04-08T19:24:14.183
> 
> 标签：python, python-requests

我正在尝试使用 toggl api。

我使用 Requests 而不是 Urllib2 来执行我的 GET 和 POSTS。但我被困住了。

```
payload = {
    "project":{
        "name":"Another Project",
        "billable":False,
        "workspace":{
            "Name":"jorrebor's workspace",
            "id":213272
        },
        "automatically_calculate_estimated_workhours":False
    }
}

url = "https://www.toggl.com/api/v6/projects.json"
r = requests.post(url, data=json.dumps(payload), auth=HTTPBasicAuth('j_xxxxx@gmail.com', 'mypassword')) 
```

身份验证似乎很好，但有效负载格式可能不是。

具有相同参数的 curl 命令：

```
curl -v -u heremytoken:api_token -H "Content-type: application/json" -d "{\"project\":{\"billable\":true,\"workspace\":{\"id\":213272},\"name\":\"Another project\",\"automatically_calculate_estimated_workhours\":false}}" -X POST https://www.toggl.com/api/v6/projects.json 
```

工作正常。

我的有效载荷有什么问题？得到的响应是：["Name can't be blank","Workspace can't be blank"]

这使我得出结论，身份验证有效，但 toggl 无法读取我的 json 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T04:35:14.897

似乎您应该尝试将标头设置为`JSON`应用程序，而不是默认格式，并发送一个`JSON`对象而不是 Python `dict`。在这里查看：

```
payload = {"project":{"name":"Another Project",
                     "billable":False,
                     "workspace":{"Name":"jorrebor's workspace",
                                  "id":213272},
                     "automatically_calculate_estimated_workhours":False
                      }   } 

parameters_json = json.dumps(payload)
headers = {'Content-Type': 'application/json')
r = client.post(url, data=parameters_json, headers=headers) 
```

这应该允许站点很好地读取 json 对象。

# python - NLTK 分块错误

> ID：10065710
> 
> 赞同：0
> 
> 时间：2012-04-08T19:24:34.077
> 
> 标签：python, nlp, nltk, chunking

我正在尝试实现基于 Maxent 分类器的句子分块器，如 NLTK 书（示例 7.9）中所述：

[http://nltk.googlecode.com/svn/trunk/doc/book/ch07.html#code-classifier-chunker](http://nltk.googlecode.com/svn/trunk/doc/book/ch07.html#code-classifier-chunker)

当我尝试用

```
chunker = ConsecutiveNPChunker(train_sents)
print chunker.evaluate(test_sents) 
```

或用

```
print chunker.parse(test_sents[1]) 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<pyshell#13>", line 1, in <module>
    print chunker.parse(test_sents[1])
  File "/usr/local/lib/python2.6/dist-packages/nltk/chunk/api.py", line 34, in parse
    assert 0, "ChunkParserI is an abstract interface"
AssertionError: ChunkParserI is an abstract interface 
```

我在谷歌上没有找到任何东西，我被困在这一点上。任何帮助都会非常有用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:51:40.090

你显然还没有实现你的分块器。“ChunkParserI 是一个抽象接口”意味着你需要从中派生一个类并定义你自己的`parse()`方法。您链接到的 NLTK 章节显示了如何定义示例类`ConsecutiveNPChunker`.

最后一步是创建新类的实例并调用它的`eval()`方法（它继承自`ChunkParserI`，因此您无需提供替代方法）。

# android - 我试图从按钮事件中调用一个私有类，我得到 java.lang.RuntimeException：

> ID：10065715
> 
> 赞同：0
> 
> 时间：2012-04-08T19:24:56.527
> 
> 标签：android

以下是我的代码：基本上我正在调用进度类以从按钮侦听器运行它，我收到此错误

```
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() 
```

有没有办法从按钮或菜单运行这个进度类？

```
public class ProgressDialogeActivity extends Activity {
private ProgressDialog dialog;
int count = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    // running from main activity
    dialog = new ProgressDialog(this);
    dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    dialog.setMessage("Deleteng Contacts ...");
    dialog.setMax(50);
    // dialog.show();
    // dialog.setProgress(40);
    Object Maxmssg = checkhowmanysms();
    // dialog.setMax((Integer) Maxmssg);

    Button deletesms = (Button) findViewById(R.id.button1);
    deletesms.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            progress prog = new progress();
            prog.start();

        }
    });

}

public class progress extends Thread {
    @Override
    public void run() {

        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setMessage("Deleteng Contacts ...");
        int size = checkhowmanysms();
        Object Maxmssg = checkhowmanysms();
        dialog.setMax((Integer) Maxmssg);
        dialog.show();

        Uri inboxUri = Uri.parse("content://sms");
        Cursor item = getContentResolver().query(inboxUri, null, null,
                null, null);
        while (item.moveToNext()) {
            count++;
            dialog.setProgress(count);

            // Delete the SMS
            String pid = item.getString(0); // Get id;
            String uri = "content://sms";
            getContentResolver().delete(Uri.parse(uri), null, null);

        }
        dialog.dismiss();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:37:01.497

您正在尝试从后台线程修改 UI，您不能这样做，而是使用[`Handler`](http://developer.android.com/reference/android/os/Handler.html)or [`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)（用于 UI 修改部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:37:35.860

问题是您正试图从非 UI 线程更改 UI。解决方案是使用 a[`Handler`](http://developer.android.com/reference/android/os/Handler.html)和其中一种`post()`方法，或者如果您可以调用`Activity`s [`runOnUiThread()`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)-方法

# variables - 在计算表达式的同时为变量赋值。同一表达式行上有多个语句？

> ID：10065717
> 
> 赞同：2
> 
> 时间：2012-04-08T19:25:11.033
> 
> 标签：variables, ssrs-2008, expression, reporting-services

我们有一个报告，其中包含一个打印详细信息行的表格，并且 tablix 的一部分是一个名为 TextboxSubTotal 的总计字段。

此报告中还有一个名为 SubTotal 的变量。

当 TextboxSubTotal 获得一个值时，您能告诉我们如何将值从 TextboxSubTotal 分配给 SubTotal 吗？

我假设它需要作为将值分配给 TextboxSubTotal 的表达式的一部分来完成。

到目前为止，表达式是：

```
=Sum(Fields!LineTotal.Value) 
```

有没有办法将赋值语句与表达式放在同一行？

# ruby-on-rails - Rails 3 - 嵌套资源通过 form_for 生成无效 URL？

> ID：10065722
> 
> 赞同：0
> 
> 时间：2012-04-08T19:25:45.123
> 
> 标签：ruby-on-rails

我有以下 form_for 标签，配置文件带有它正在生成的 URL，它是无效的，即这里是标签：

```
<%= form_for([current_user,@profile], :html =>{:class => "contact_form",:multipart => true}) do |f| %> 
```

预测这个“action="/users/1/profile.1" 应该是 action="/users/1/profile/1"

谁能看到我在这里做错了什么？

下面是来自相关 Rails 文件的一些快照。

路线.rb

```
devise_for :users
resources :users, :only => [:delete] do
  resource :profile
end 
```

用户模型

```
class User < ActiveRecord::Base
  has_one :profile, :inverse_of => :user
  accepts_nested_attributes_for :profile 
```

轮廓模型

```
class Profile < ActiveRecord::Base
  belongs_to :user
  validates_presence_of :user 
```

耙路线输出：

```
new_user_session GET    /users/sign_in(.:format)               devise/sessions#new
            user_session POST   /users/sign_in(.:format)               devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)              devise/sessions#destroy
           user_password POST   /users/password(.:format)              devise/passwords#create
       new_user_password GET    /users/password/new(.:format)          devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)         devise/passwords#edit
                         PUT    /users/password(.:format)              devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                devise/registrations#cancel
       user_registration POST   /users(.:format)                       devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)               devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                  devise/registrations#edit
                         PUT    /users(.:format)                       devise/registrations#update
                         DELETE /users(.:format)                       devise/registrations#destroy
            user_profile POST   /users/:user_id/profile(.:format)      profiles#create
        new_user_profile GET    /users/:user_id/profile/new(.:format)  profiles#new
       edit_user_profile GET    /users/:user_id/profile/edit(.:format) profiles#edit
                         GET    /users/:user_id/profile(.:format)      profiles#show
                         PUT    /users/:user_id/profile(.:format)      profiles#update
                         DELETE /users/:user_id/profile(.:format)      profiles#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:43:16.733

i had the same problem. my solution was, that you have to declare the url directly like this:

```
<%= form_for([current_user,@profile], :url => user_profile_path, :html =>{:class => "contact_form",:multipart => true}) do |f| %> 
```

although i don't really know why this thing occurs - perhaps anyone could explain...

# java - Java 批量写入

> ID：10065723
> 
> 赞同：3
> 
> 时间：2012-04-08T19:25:47.197
> 
> 标签：java

我必须在磁盘文件中写入一系列字符，并且我想使用批量写入来减少磁盘 I/O。目前，我正在使用 File Writer 类。但是，它太慢了。任何人都可以帮助我如何在 Java 中执行批量写入，例如维护一个大缓冲区并定期刷新它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:39:49.560

您可能对[`FileChannel`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html). `Channel`s 旨在执行与[`Buffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html)s 之间的批量 IO 操作。

前任：

```
FileChannel fileOut = new FileOutputStream(file).getChannel();
fileOut.write(ByteBuffer.wrap("Whatever you want to write".getBytes())); 
```

# c++ - 这在 C++ 中。它是如何工作的？

> ID：10065724
> 
> 赞同：0
> 
> 时间：2012-04-08T19:25:51.093
> 
> 标签：c++, this

我对我的 C++ 作业有疑问。我只是对 *this 感到困惑。

下面的代码是我所拥有的。

我的问题是为什么 = 运算符中的 if 语句中的条件为真？

```
#include <cstring>
class abc {
      char p[9];
      int inc;
   public:
      abc( ) { inc = 8; strcpy(p, "10010101"); }
      ~abc( );
      abc& operator=(const abc &);

};

abc::~abc( ) {

}
abc& abc::operator=(const abc &c) {
   if(this != &c) { //my question is why this condition is true?
      inc = c.inc - 2;
      for(int i=0; i<inc; i++) {
     p[i] = c.p[i] + 2;
      }
   }
   return *this;
}

int main( ) {
   abc x, y;
   x = y;
   return 0;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T19:29:23.610

因为如果您分配给自​​己，您不想制作副本，这就是`if`条件的原因，`*this`返回 self 实例。这是真的，因为您正在尝试分配`y to x`，并且它们都是不同的实例，因此您可以创建 a `copy`of `y to x`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:30:57.223

`*this == &c`只有在 operator= 的左操作数与右操作数相同的情况下。
在`x = y`==>的情况下`*this != &c`。
在`x = x`==>的情况下，`*this == &c`因为两者都是相同的。它很常用，因为如果您分配给自​​己，则不需要副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:30:36.370

条件

```
if(this != &c) { //my question is why this condition is true? 
```

用于检测自我分配。如果你有一个类型的对象`abc`并写

```
abc a;
a = a; 
```

然后你将调用`operator =`on `a`，将自身作为参数传递。在这种情况下，赋值运算符的许多实现都会中断，因为在清理对象以准备复制时，to `operator =`（在这种情况下，`a`它本身）的参数也将被清理。它很容易导致崩溃。因此，许多实现都`operator =`以测试参数和接收器对象不是同一个对象开始。上面的测试通过查看`this`指针（接收者）和参数（`&c`）的地址是否相同来做到这一点。如果是这样，则对象是相同的，不应进行分配。否则，对象不一样，应该完成分配。

至于return `*this`，since`this`是一个指向receiver对象的指针，`*this`就是receiver对象本身。通过引用返回`*this`意味着您可以编写类似的内容

```
(a = b) = c; 
```

这虽然很愚蠢，但应该是合法的 C++。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T19:34:46.453

该`if`语句的计算结果为，`true`因为您没有将对象实例分配给自身，因此满足`!=`运算符。您有两个单独的对象，`x`并且`y`. 他们有自己独特的`this`价值观。如果您`x = x`改为 in `main()`，则语句中的`!=`运算符将改为改为，因为这两个值将匹配。`if``false`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T19:41:37.957

它将传递给类的对象的地址与指向的地址对象进行比较`this`。如果地址相同，那么您已经传递了我们不想操作的对象本身。实际上，您是在`*this`运算符中传递指针引用。

# json - ExtJS - 编辑日历事件

> ID：10065725
> 
> 赞同：0
> 
> 时间：2012-04-08T19:25:55.933
> 
> 标签：json, extjs

我正在使用 ExtJS 在一个项目的管理面板上工作，我有一个面板，CalendarEvents，其中应该添加、删除任何即将发生的事件的数据，当然，如果需要，还可以进行编辑。

问题是要管理这个管理面板的人不会是受过计算机教育的人，当他们为新事件插入数据或更改现有事件的数据时，必须有一个易于理解的界面去做。

他们必须能够添加事件的时间以及日期，这使得至少对我来说，想出一种提供这些功能的方法变得更加困难。到目前为止，我们一直在使用双击并通过在单元格中写入来手动编辑信息，但这会给正确的日期/时间格式带来很多问题。

因此，我正在寻找一种在我的管理面板中实现此选项的好方法。

# mysql - MySQL 提高查询性能

> ID：10065738
> 
> 赞同：0
> 
> 时间：2012-04-08T19:27:08.107
> 
> 标签：mysql, optimization, query-optimization

我有这样一个查询：

```
SELECT city.id, city.country_id, localization.lang , localization.name, ... some other fields ...
FROM city city
LEFT OUTER JOIN city_localization localization ON ( localization.city_id = city.id )
WHERE city.country_id = '196' AND localization.lang = 'en'
ORDER BY localization.name 
```

“城市”表架构：

![在此处输入图像描述](../Images/2a26727f4abeb3836c7829d679bc851e.png)

“city_localization”表架构：

![在此处输入图像描述](../Images/0ebfdfc2ff1b1eb3569859fa499728a5.png)

解释输出：

![在此处输入图像描述](../Images/c09fb0d06868d89614e35f08f421ae94.png)

如何避免使用文件排序和临时文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:51:09.607

您需要为`localization.city_id`和另一个创建一个索引`localization.name`（您目前有一个也包括`localization.lang`）。

如果您要检索很多行，您可能希望从您的选择中删除`city.country_id`并`localization.lang`从您的选择中删除，毕竟您已经拥有这些值。

# facebook - 从 iOS 应用程序帖子到 Facebook 坚持换行符

> ID：10065739
> 
> 赞同：-1
> 
> 时间：2012-04-08T19:27:09.180
> 
> 标签：facebook, newline

OMG，有人知道如何在 Facebook 帖子中包含换行符吗？！在这一点上，我假设 Facebook 有意将它们剥离出来。我已经尝试了所有我能想到的来创建换行符`(i.e., <br>, <p>, \n, \r, %0D, &#x0D;, &#13;)`。没有任何效果:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:48:39.117

试试`<center></center>`。它曾经作为换行符工作，但不知道它是否仍然有效。

# erlang - 修复 erlang 15B Observer（来自 macports）；无法运行

> ID：10065742
> 
> 赞同：2
> 
> 时间：2012-04-08T19:27:29.570
> 
> 标签：erlang, wxwidgets

按照[Observer User Guide](http://www.erlang.org/doc/apps/observer/observer_ug.html)中的说明，我尝试运行 Observer 应用程序。

```
$ erl -sname observer -hidden -setcookie MyCookie -run observer
Erlang R15B (erts-5.9) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

{"init terminating in do_boot",{undef,[{wx_object,start,[observer_wx,[],[]],[]},{observer_wx,start,0,[{file,"observer_wx.erl"},{line,64}]},{init,start_it,1,[]},{init,start_em,1,[]}]}}

Crash dump was written to: erl_crash.dump
init terminating in do_boot () 
```

对此有已知的解决方法吗？我忽略了安装的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T23:57:05.347

Mac OS X 上的 WxWidget 目前只有 32 位。它不适用于 64 位 erlang 安装。这就是为什么您会收到 wx_object:start 未定义的错误消息。

您需要构建 32 位版本的 erlang。

我认为较新版本的 wxWidgets 可以在 Mac OS X 上构建 64 位，但我不确定它们是否与 erlang 的 wx 库兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-24T20:28:15.937

在我的 Linux Mint 发行版中，在通过 evm 安装 R15B03 之前，我必须通过执行以下命令来安装必要的软件包：

`sudo apt-get install libwxgtk2.8-dev libgl1-mesa-dev libglu1-mesa-dev libpng3`

更多细节可以在[这里](https://github.com/erlang/otp/wiki/Installation)找到。

# c - 网络的机器代码是什么样的？

> ID：10065744
> 
> 赞同：2
> 
> 时间：2012-04-08T19:27:48.787
> 
> 标签：c, windows, linux, assembly, ipc

归根结底，我们编写的每一段代码最终都会变成汇编程序，然后变成机器语言。

如果您正在编写汇编程序并希望在两台计算机之间执行简单的连接，您如何知道在汇编程序中使用哪些内存地址（更不用说偏移量）？您是否需要知道与操作系统相关的特定地址？

我只是想知道有人会如何编写一个真正“干净”和“高效”的消息传递库/编译器——让我明白的是，网络通信/IPC 在汇编器中到底会是什么样子？

我认为这个答案的一部分可能在于查询与操作系统相关的已知地址？例如 0x4545456 到 0x 60000000 包含用于通信 X 等的 Linux 内核数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:34:21.587

有两段代码用于在汇编中进行网络连接 - 操作系统使用内核代码实际进行网络连接，以及想要告诉操作系统通过网络发送哪些数据的客户端代码。

通常，机器中的硬件具有特定的内存地址，专用于与网络硬件进行通信。然后，操作系统的机器代码可以将适当的值写入此内存，以控制最终发送和接收字节的硬件。这些内存地址将被硬编码到机器代码中。

对于进行网络连接的用户代码（例如，Mozilla Firefox），该过程是不同的。通常有一条机器指令或一组指令用于用户代码告诉操作系统执行某些任务（例如，在 MIPS 中，这是`syscall`，而我认为 x86 使用`int`操作说明）。客户端代码将通过使用适当的数据设置一些缓冲区来发送到网络，然后使用上面的汇编指令之一告诉操作系统它应该发送数据。硬件然后调用操作系统，它读取用户数据，然后使用自己的机器代码（如上所述）来适当地实际控制网络设备。通过这种方式，操作系统可以通过阻止对控制设备的物理地址的访问以及通过系统调用调节访问来保护对网络设备的直接访问。这也意味着您在编写用户代码进行联网时不需要知道任何内存地址。操作系统处理这些细节，您只需要知道执行什么指令来触发系统调用。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:00:22.620

这些地址并不特定于您的操作系统。它们特定于您的硬件/系统。访问这些与汇编程序与另一种编程语言（例如 C）无关，实际上大多数设备驱动程序代码（实际与网络硬件交互的代码）通常是用 C 编写的。

这只是网络（以太网）控制器的一个随机样本：

[英特尔® 82580EB/82580DB GbE 控制器：数据表](http://www.intel.com/content/www/us/en/ethernet-controllers/82580-eb-db-gbe-controller-datasheet.html)

您的软件（无论是汇编程序还是其他语言）都必须对大量寄存器进行编程，以使该事物能够通过以太网进行实际通信。从一个更简单的例子开始可能更容易，比如串行端口。让我们构建一个假设的、固定波特率的串行端口控制器，映射到内存：

```
Address  Meaning
0        RX status (reads 0 when no data to read, 1 a byte is available)
1        RX buffer
2        TX status (reads 0 when ready to send, 1 when busy)
3        TX buffer 
```

现在您的软件，无论是汇编程序还是任何其他语言，都可以通过监视（轮询）地址 2 直到它准备好，将下一个字节写入地址 3 来将数据传输到另一台计算机。我们还可以通过监视（轮询）从另一台计算机接收数据) 地址 0 以查看数据何时准备好，并在数据存在时从地址 1 读取字节。

在现代操作系统/操作系统中，这些都是物理地址，需要以某种方式映射到虚拟地址。

现实世界的硬件，比如我链接的那个，通常会使用中断，所以你不需要轮询。它通常具有 DMA，因此硬件可以直接访问您的数据，而不是您逐字节地输入数据。它将处理各种协议，并将具有用于检查和设置该协议各个方面的寄存器。

在现代操作系统中，与硬件的实际交互是在[设备驱动程序](http://en.wikipedia.org/wiki/Device_driver)中实现的，用户软件可以通过一些 API 与设备驱动程序交换数据。同样，此用户代码可以用汇编程序或任何其他语言编写。API 会因操作系统而异。通信/网络通常构建为“[堆栈](http://www.ibm.com/developerworks/linux/library/l-linux-networking-stack/)”，在较低级别的协议上实现较高级别的协议。该堆栈的哪一部分在用户库中或操作系统的一部分将因不同的操作系统而异。

对于我上面描述的假设设备，API 可能包含两个单字节阻塞调用，`read()`并且`write()`. 然后，您使用来自汇编程序或更高级别语言的某种[系统调用机制来调用这些并传递参数/检索输出。](http://en.wikipedia.org/wiki/System_call)在某些操作系统中，设备 I/O 可能看起来像文件 I/O，因此您将使用通用文件读/写来在设备上执行操作，并且操作系统会将这些操作分派给正确的设备驱动程序。此外，在典型的操作系统中，实际的系统调用将通过某种库提供，您可以再次从各种编程语言中调用这些库。

# c# - 如何在更新数据源时让绑定的 winforms 控件刷新？

> ID：10065745
> 
> 赞同：1
> 
> 时间：2012-04-08T19:27:57.027
> 
> 标签：c#, winforms, data-binding, sql-server-ce

我对使用 C#（但不是 C# 本身）和数据绑定的整个概念使用数据库非常陌生，所以请记住这一点。如果这会影响到这一点，我也在使用 SQL Server CE。

我正在尝试使用用 VS2010 构建的强类型数据集来访问 SQL Server CE 数据库，并将 WinForms 控件绑定到它以显示数据。我可以很好地绑定控件，它们显示当前在数据库中的数据没有问题。我还可以将新数据插入数据库，如果我重新启动应用程序，插入的数据会显示在控件中（特别是 ComboBox，但我将来会使用更多）。

问题是在我重新启动应用程序之前，新行根本不会出现，我对数据绑定的理解是控件应该自动更新自己。我已经阅读了有关 INotifyPropertyChanged 的​​信息，但我不确定在这里使用它是否正确，如果是，我如何将它用于行插入？

我正在像这样绑定组合框：

```
DataSet.tagDataTable tagdata = new tagTableAdapter().GetData();
comboBox1.DataSource = tagdata;
comboBox1.DisplayMember = tagdata.tagnameColumn.ColumnName;
comboBox1.ValueMember = tagdata.tagIDColumn.ColumnName; 
```

并像这样插入：

```
Guid g = Guid.NewGuid();
new tagTableAdapter().Insert(g, Name) 
```

其中 Name 只是从文本框中提取的字符串。

谢谢。

编辑：我应该提到我正在使用的数据库表称为标签，有两列，tagID 和 tagname。tagID 是 GUID，tagname 是 varchar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T23:42:01.927

您正在做的`TableAdpater.Insert`是将您的数据直接插入到您的数据库中，并且您正在规避应用程序中的任何通知。如果你这样做，那么你必须按照 iefpw 所说的去做，那就是重新加载你的数据表并重新绑定你的控件。

另一种方法是在数据表中添加一行。你可以尝试这样的事情：

```
// retrieve the datatable from the control
DataSet.tagDataTable tagdata = comboBox1.DataSource as DataSet.tagDataTable;
// create a new row and fill in the data
var dr = tagdata.NewRow();
dr["tagid"] = Guid.NewGuid();
dr["tagname"] = Name;
// actually add it to the table
tagdata.Rows.Add(dr); 
```

此时，您已将其添加到 DataTable 中，并且您的组合框将自动更新，但需要注意的是它尚未写入您的数据库，因此您需要确保在某个时候将其保存到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:03:09.173

您应该像第一次那样再次绑定数据并再次刷新控件。它不只是显示数据。它是机械的。它不是实时的。

# c - 在内核之间共享数据的最有效方式

> ID：10065747
> 
> 赞同：4
> 
> 时间：2012-04-08T19:28:09.257
> 
> 标签：c, linux, multithreading, multiprocessing, x86-64

在多核之间共享数据最有效的是什么。当然，您可以使用共享内存，但这也是有代价的。假设一个核心不断地写入一个变量，而另一个核心必须不断地从中读取。使用 MESI 缓存一致性协议，写入核心将不时导致读取核心使其缓存无效。那么在这种情况下，最有效的数据共享方式是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:37:51.260

在典型的共享内存机器上，您描述的场景可能已经是可能的最有效的方法：

*   核心 A 写入内存位置。使 Core B 的副本无效。
*   Core B 从内存或 Core A 的缓存中获取数据。

无论哪种方式，数据都必须从 Core A 发送到 Core B。现代处理器中的缓存一致性有时会支持直接的缓存到缓存传输，而无需一直传输到内存。

* * *

您想要避免（尽可能）是过度锁定共享资源。这将增加双向缓存一致性流量（和延迟）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:47:58.063

一种常见且通用的方法是尽可能使用每个核心的数据结构。

例如，在生产者-消费者场景中，每个消费者处理器都可以拥有队列的一部分并对其进行操作。他们只有在工作项用完时才能联系生产者处理器。

当然，这并不总是可能的，但是如果可以这样构建工作项，它可以减少内核之间的相互依赖，并让应用程序扩展到内核的数量。

该技术已在 Solaris OS 中广泛使用。有关详细信息，请参阅[多核应用程序编程：适用于 Windows、Linux 和 Oracle Solaris](https://rads.stackoverflow.com/amzn/click/com/0321711378)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T20:59:20.010

这取决于您可以容忍多少陈旧（请告诉我们）。

如果您需要尽可能快地传播更新，这已经是最有效的解决方案。如果您可以容忍几毫秒或几秒的过期数据，您可以为每个内核使用不同的内存位置并使用计时器进行同步。

# c# - 未找到 System.Xml.Xpath

> ID：10065748
> 
> 赞同：4
> 
> 时间：2012-04-08T19:28:11.520
> 
> 标签：c#, windows-phone-7, xpath, compact-framework, system.xml

我试图在 C#.NET 中包含 System.Xml.Xpath 来执行 wp7 程序来解析 XML。我添加了参考 System.Xml 但未找到 Xpath。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T23:59:42.150

Windows Phone 中不支持 System.Xml.Xpath，您必须使用支持 XPath 的外部程序集，或者使用 Linq to XML（非常推荐！）

# qt - Qt 在弹出窗口上绘制数据库中的数据

> ID：10065753
> 
> 赞同：0
> 
> 时间：2012-04-08T19:29:07.013
> 
> 标签：qt

在 Qt GUI 应用程序中，我制作了一个包含表格的对话框。当我双击表格中的一行时，我想要：

1.  要显示的弹出窗口；

2.  根据该行从数据库中获取点数据；

3.  在弹出窗口上绘制这些点。

我已经完成了database.cpp中点数据的获取功能。但根据规则，绘图函数必须在 dialog.cpp 中，在 void Dialog::paintEvent(QPaintEvent *event) 函数中。我可以在那个 database.cpp 数据获取函数中执行绘图函数 lineTo() 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:10:21.127

您可以`QPixmap`从任何地方绘制 a，并将该像素图传递给弹出对话框以在 a 内显示或由函数`QLabel`绘制。`paintEvent`

您还可以使用`QPolygonF`哪个具有更清晰可扩展的优点。

查看[那篇文章](http://doc.qt.nokia.com/qq/qq12-qpixmapcache.html)（Qt Quaterly）中的函数，然后使用`generatePixmap`将像素图分配给标签。[`QLabel::setPixmap`](http://qt-project.org/doc/qt-4.8/qlabel.html#pixmap-prop)

# iphone - UITableViewCell 行乱序

> ID：10065759
> 
> 赞同：0
> 
> 时间：2012-04-08T19:29:26.477
> 
> 标签：iphone, uitableview

我之前用相同的源代码发布了一些问题。我刚刚发现了一些其他奇怪的事情。问题是如果我定义重用单元格标识符，每行颜色都很奇怪。
但如果我不使用重用标识符，它的工作原理。
请给我任何提示，为什么每行颜色不保持顺序。

```
//its working
static NSString *CellIdentifier = @"Cell";
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"] autorelease]
cell.contentView.backgroundColor = (indexPath.row %2) ? [UIColor redColor] : [UIColor yellowColor];

//it does not work.
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; -- does not working.  
cell.contentView.backgroundColor = (indexPath.row %2) ? [UIColor redColor] : [UIColor yellowColor];

- (void)viewDidLoad {
    [super viewDidLoad];

    //Initialize the array.
    listOfItems = [[NSMutableArray alloc] init];

    //Add items
    [listOfItems addObject:@"1"];
    [listOfItems addObject:@"2"];
    [listOfItems addObject:@"3"];
    [listOfItems addObject:@"4"];
    [listOfItems addObject:@"5"];
    [listOfItems addObject:@"6"];
    [listOfItems addObject:@"7"];
    [listOfItems addObject:@"8"];

}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

#pragma mark Table view methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [listOfItems count];
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UILabel *aLabel;     UILabel *bLabel; UILabel *v1Label;  UILabel *v2Label;; UIView *v1;  UIView *v2;  

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        NSLog(@" cell null");
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.contentView.backgroundColor = (indexPath.row %2) ? [UIColor redColor] : [UIColor yellowColor];
        aLabel                      = [[[UILabel alloc] initWithFrame:CGRectMake(9.0, 8.0, 50.0, 20.0)] autorelease];
        aLabel.tag                  = 1;
        aLabel.font                 = [UIFont systemFontOfSize:30];
        [cell.contentView addSubview:aLabel];

        v1 = [[UIView alloc] initWithFrame:CGRectMake(0, 44, 320, 116)];
        v1.backgroundColor = [UIColor  whiteColor];
        v1.tag = 10;
        v1.hidden = YES;
        [cell.contentView addSubview:v1];
        [v1 release];     

        UILabel *a = [[[UILabel alloc] initWithFrame:CGRectMake(0, 10, 100, 100)] autorelease];
        a.text = @"v1.test1";
        [v1 addSubview:a];

        UILabel *b = [[[UILabel alloc] initWithFrame:CGRectMake(0, 40, 100, 100)] autorelease];
        b.text = @"v1.test2";
        [v1 addSubview:b];

        v2 = [[UIView alloc] initWithFrame:CGRectMake(0, 44, 320, 100)];
        v2.backgroundColor = [UIColor  blueColor];
        v2.tag = 11;
        v2.hidden = YES;
        [cell.contentView addSubview:v2];
        [v2 release];     

        UILabel *c = [[[UILabel alloc] initWithFrame:CGRectMake(0, 10, 100, 100)] autorelease];
        c.text = @"v2.test1";
        [v2 addSubview:c];

        UILabel *d = [[[UILabel alloc] initWithFrame:CGRectMake(0, 40, 100, 100)] autorelease];
        d.text = @"v2.test2";
        [v2 addSubview:d];

    }

    else  {
           aLabel =  (UILabel *)[cell.contentView viewWithTag:1];
//         
            v1     =  (UIView *) [cell.contentView viewWithTag:10];          
            v2     =  (UIView *) [cell.contentView viewWithTag:11];     
    }

    aLabel.text = [listOfItems objectAtIndex:indexPath.row];

        if (SelectedIndexPath == indexPath.row) 
        {       
            if ([aLabel.text intValue] %  2) {
                v1.hidden = NO;
                v2.hidden = YES;
            }
            else  {
                v1.hidden = YES;
                v2.hidden = NO;
            }
        }
        else {
            v1.hidden = YES;
            v2.hidden = YES;
            }

    return cell;
}

-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (SelectedIndexPath == indexPath.row)  
    {
        return 162.0;
    }
    else {
        return 46.0;
    }

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (SelectedIndexPath == -1)
    {
        OldSelectedIndexPath = indexPath.row;
        SelectedIndexPath = indexPath.row;

        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:NO];
    }
    else 
    {
        if (SelectedIndexPath == indexPath.row) 
        {
            OldSelectedIndexPath = SelectedIndexPath;
            SelectedIndexPath = -1;

            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:NO];

        }
        else 
        {
            SelectedIndexPath = indexPath.row;

            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:[NSIndexPath indexPathForRow:OldSelectedIndexPath inSection:indexPath.section], indexPath, nil] withRowAnimation:NO];

            OldSelectedIndexPath = SelectedIndexPath;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:42:56.277

Move the coloring code outside of the `if (cell == nil) {` block. Just because a cell was created for an even-numbered index doesn't mean it will only be reused for even ones.

Here's a simple example of code for coloring cells that are being reused:

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 20;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = @"Anything";
    cell.contentView.backgroundColor = (indexPath.row %2) ? [UIColor redColor] : [UIColor yellowColor];
    return cell;
} 
```

# c - 如何从另一个 c 程序检查 ac 程序的 main 函数的返回值

> ID：10065762
> 
> 赞同：4
> 
> 时间：2012-04-08T19:30:01.513
> 
> 标签：c, child-process, return-code

我正在尝试测试 ac 程序是否已正确编译和执行。

假设我刚刚在 ac 程序中打印**Hello World** ，所以我想编写 ac 程序来检查

第一个程序已返回 0 或已返回其他内容。

我怎样才能做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:36:12.493

这通常取决于平台，并且取决于您如何从另一个程序运行一个程序。如果您使用 C 库函数`system`，您可以运行该程序，然后从该程序中读取状态码，如下所示：

```
int returnCode = system("./hello-world-program");
if (returnCode == 0) {
     ...
} 
```

但是，您通常最好使用操作系统级别的原语来执行此操作。Linux 使用`fork`and`exec`来处理这个问题，您可以通过将该[`wait`](http://linux.die.net/man/2/wait)函数与其他代码结合使用来读取给定进程 ID 号的子进程的退出代码。Windows 有自己的机制来执行此操作，不幸的是，我并不熟悉。

希望这可以帮助！

# php - 我该如何定义这个？

> ID：10065764
> 
> 赞同：0
> 
> 时间：2012-04-08T19:30:06.717
> 
> 标签：php

我需要在 php 中定义一个类似宏的字符串，它实际上会被解释为这个字符串，但我需要的是引用放置字符串的行和文件，而不是我的 defs.php 文件......

```
define ("REDIRECT_FROM"," (".`____FILE____`." line:".`____LINE____`.")");

redirectTo("login.php",REDIRECT_FROM); 
```

结果是：

```
redirected from abc.php line: 59 
```

希望我很清楚。（重定向自`redirectTo()`当然是在函数中实现的）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:34:18.687

你不能这样做`define()`- 它设置常量，而不是宏。

一种可能的解决方案是使用函数和回溯：

```
function called_from(){
  $trace = debug_backtrace();
  $item = $trace[0];
  return " ({$item['file']} line:{$item['line']})";
} 
```

然后你会打电话：

```
redirectTo("login.php", called_from()); 
```

您也可以将此逻辑构建到您的`redirectTo()`函数中。

一个例子：[http ://codepad.org/CGUXWgAB](http://codepad.org/CGUXWgAB)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:33:59.807

我不认为这是可能的，而且它也不是这样做的好方法。您可以在 redirectTo() 中进行解析并使用[http://php.net/manual/en/function.debug-backtrace.php](http://php.net/manual/en/function.debug-backtrace.php)回溯调用堆栈。

# python - 寻找相似词

> ID：10065769
> 
> 赞同：5
> 
> 时间：2012-04-08T19:30:38.283
> 
> 标签：python, spell-checking, edit-distance, pyenchant

我正在尝试编写一个拼写检查模块。

它加载文本，从 16 mb 文件创建字典，然后检查遇到的单词是否与字典中的单词相似（相似 = 最多变化两个字符），如果是，则将其更改为字典中的形式。

现在我正在使用 Levenshtein 距离算法，处理 50 个单词集需要 3 分钟......

我很确定必须有一个更快的解决方案。Profiler 告诉我，我的应用程序在 Levenshtein Distance 函数中花费了超过 80% 的时间。

有没有更好的解决方案/算法？

这是我使用的算法版本的实现：

```
def levenshteinDistance(s1, s2):
    l_s1 = len(s1)
    l_s2 = len(s2)
    d = [[a for a in genM(x, l_s2 + 1)] for x in xrange(l_s1 + 1)]
    for i in xrange(1, l_s1 + 1):
        for j in xrange(1, l_s2 + 1):
            d[i][j] = min(d[i - 1][j] + 1, d[i][j - 1] + 1, d[i - 1][j - 1] + decide_of_equality(s1[i - 1],s2[j - 1]))
    return d[l_s1][l_s2] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:15:40.963

我使用了评论中提到的 Norvig 的拼写校正器，非常棒。

但是，遇到您的问题，您已经编写了一个动态规划编辑距离算法。您的算法有资格成为数据并行算法。在共享内存上，即在单台机器上，如果你有多核，你可以利用它们。你知道什么叫做 map-reduce 吗？请不要认为现在是分布式的，只要考虑一台单四核机器和一个共享内存。作为第 1 步，您可以对字典进行分区并为每个线程分配一部分，该线程将在字典的一部分上运行编辑距离（类似于地图步骤）。稍后，您的所有线程将以 2 的编辑距离返回所有单词（类似于减少步骤）。这样，您的程序将受益于多核架构。

我能想到的另一件事是在你的 python 代码中用 C 编写 cpu 密集型编辑距离算法，即通过编写 python 扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:06:40.953

也许问题在更高的层次上。当分析器告诉您在一个函数中花费了很多时间时，可能是您调用它的频率太高了。您是否可能将文本中的每个单词与字典中的每个单词进行比较？换一种方式试试：对于文本中的单词，直接生成距离 <= 2 的单词并检查它们是否在字典中。

# assembly - MIX 减法如何与“打包”单词一起使用

> ID：10065775
> 
> 赞同：2
> 
> 时间：2012-04-08T19:31:47.473
> 
> 标签：assembly, taocp

我正在阅读 Knuth 的书 TAOCP。我只是在学习一个简单的寄存器数学运算。还有一个减法运算的例子：

```
rA before: - | 1234 | 0| 0| 9
Cell 1000: - | 2000 |  150| 0
SUB 1000    
rA after:  + | 766  | 149 | ? 
```

我知道 -1234-(-2000) = 766 但如何 (0 | 0) - 150 = 149 ??

为什么 9 - 0 = ？

这些是“包装”的话。也许我需要阅读更多关于他们的信息。或者谁能​​解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T23:07:35.270

我相信逻辑是这样的：

*   这个 MIX 机器是十进制机器；每个字节包含两个十进制数字。
*   `rA`包含值`- 1234 00 00 09`。
*   内存`M`包含值`- 2000 0150 00`。
*   `M`从使用普通十进制算术中减去`rA`得到 766,014,991，或`+ 0766 0149 91`.

或者，

*   这个 MIX 机器是二进制机器；每个字节包含八个二进制位。
*   `rA`包含值`- 04D2 00 00 09`。
*   `M`包含值`- 07D0 0096 00`。
*   `M`从使用普通的十六进制算术中减去`rA`得到 0x2FE0095F7，或`+ 02FE 0095 F7`，或十进制，`+ 0766 0149 247`[*原文如此*]。

因此，在不知道这个特定 MIX 机器的二进制/十进制的情况下，我们无法确定结果的低位字节是什么。它保证是 的单字节表示`-9`，但它是`91`十进制还是`0xF7`二进制是不可知的。

我现在没有 TAOCP 可以检查，但我相信这个逻辑很好地解释了`?`让你困惑的问题。

# python - Python：是否有可能只有 sys.path 中的文件夹中的特定模块

> ID：10065778
> 
> 赞同：1
> 
> 时间：2012-04-08T19:31:56.177
> 
> 标签：python, python-module, pythonpath

我只需要来自包含其他几个 python 模块的文件夹中的一两个模块。当我将文件夹添加到我的路径时，我有效地使该文件夹中的所有模块对我可用。但是有几个我不想要的过时模块。是否可以只为我提供这些模块的某个子集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:51:14.607

阅读你的问题我明白

1.  您在 pythonpath 中包含该文件夹，因为您需要其中的几个模块。
2.  由于它包含一些与您使用的版本相比可能已经过时的其他模块，因此您不希望最终导入错误的库。

我会建议两个可能对您有用的选项。

1.  确保您包含的此文件夹位于`sys.path`. 这将确保您已经导入的任何模块（如果存在于新包含的文件夹中）永远不会从该特定位置导入。
2.  （仅适用于 *nix）创建另一个文件夹，并创建指向您感兴趣的文件的符号链接。然后您应该包含您创建的其他文件夹。

阅读您的评论，我建议，最好的选择是在您的脚本中的某处添加以下行，但在您导入之前

```
import sys
sys.path.append('/whatever') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:37:10.400

如果你

```
import X 
```

您**只**导入模块 X。没有别的。在你的 python 路径上的东西并不等同于被自动导入（它只是*importable*）。也可以看看：

*   [http://effbot.org/zone/import-confusion.htm](http://effbot.org/zone/import-confusion.htm)
*   [http://docs.python.org/tutorial/modules.html](http://docs.python.org/tutorial/modules.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T20:35:38.900

创建一个新目录。对于要导入的每个模块，添加一个`ln -s`指向实际模块的符号链接 ( )。然后将新目录添加到您的路径中，您将不必使用包含顺序玩游戏。

```
mkdir ./mymods
export PYTHONPATH="$PYTHONPATH":`pwd`/mymods 
cd mymods
ln -s ../allmods/module1.py 
ln -s ../allmods/module2.py 
```

# php - 设置 php $var1、$var2 等并从链接设置变量

> ID：10065779
> 
> 赞同：2
> 
> 时间：2012-04-08T19:32:02.870
> 
> 标签：php, variables

我正在尝试创建没有 sql 数据库的小型购物车。我的产品在目录中并使用 foreach 脚本获取文件，这正在工作..

如何将每个产品的变量设置为 var1、var2 var3 等

如果 var1 isset 在每个 product1.php 文件中，我应该使用吗？现在，当我认为最好通过每个产品的文件名设置 varX 时，因为 product1.php 也可以是 someproduct.php。（X 将是文件名）

someproduct1.php someelseproduxt.php 在页面上列在彼此下方

和第二个问题。我会将“添加到购物车”链接放到每个产品页面，这样 $varX 将被重置为 $cart_varX 并且购物车“模块”`if isset`会检查买家是否已将其添加到购物车中。所以问题是我如何`<a href=""></a>`使用来设置变量并返回点击链接的页面？

但是如果变量是基于文件名的 .php 会很好，但不是必需的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:46:57.173

首先，所有这些听起来真的很丑陋，而且您似乎对 php 基础非常不确定，这导致了您是否应该开发购物车应用程序的问题。

此外，我强烈建议您稍后使用某种 dbms 或存储系统对您的产品执行复杂的查询。

但是，如果您想在单个 php 文件中指定产品详细信息（我认为这又是一个坏主意），您可能应该使用共享的多维数组，其中每个产品都有自己的唯一键。

# c# - 简单的方法调用真的很慢吗？

> ID：10065786
> 
> 赞同：8
> 
> 时间：2012-04-08T19:32:29.323
> 
> 标签：c#, performance, prng

**编辑**：我已经解决了我的问题。原因是测试过程中的一个错误，一旦我被允许回答我自己的问题，就会详细说明。

我知道通常应该避免这种类型的问题，但是我遇到了一个我无法理解的非常奇怪的情况。我一直在尝试实现 PRNG，并且一直在针对 System.Random 测试它的性能。我发现我的代码慢了约 50 倍，但问题不是算法，而只是调用方法。即使我只是返回一个常数，它仍然会慢很多倍。

所以我写了一个简单的测试程序，比较调用一个包装了random.NextDouble()的方法，一个返回-1的方法，和直接调用random.NextDouble()。我在 Ideone 中进行了测试，[它给出了预期的结果](http://ideone.com/ifJLE)；所有的时间都是相似的，返回一个常数是最快的。时间都在0.1秒左右。

但是，在 Visual Studio 2011 Beta 或 2010 C# Express 中编译的相同代码将分别导致每种情况下的 4 秒、4 秒和 0.1 秒。我肯定是在发布模式下运行，优化代码复选框被勾选，从 Visual Studio 外部启动会得到相同的结果。那么为什么在 Visual Studio 中如此简单的方法调用比 Ideone 慢得多？这是我用来基准测试的代码：

```
using System;
using System.Diagnostics;

public class Test{
    static Random random = new Random();

    public static Double Random() {
        return random.NextDouble();
    }

    public static Double Random2() {
        return -1;
    }

    public static void Main() {
        {
            Stopwatch s = new Stopwatch();
            Double a = 0;
            s.Start();
            for (Int32 i = 0; i < 5000000; i++)
                a += Random();
            s.Stop();
            Console.WriteLine(s.ElapsedMilliseconds);
        }

        {
            Stopwatch s = new Stopwatch();
            Double a = 0;
            s.Start();
            for (Int32 i = 0; i < 5000000; i++)
                a += Random2();
            s.Stop();
            Console.WriteLine(s.ElapsedMilliseconds);
        }

        {
            Stopwatch s = new Stopwatch();
            Double a = 0;
            s.Start();
            for (Int32 i = 0; i < 5000000; i++)
                a += random.NextDouble();
            s.Stop();
            Console.WriteLine(s.ElapsedMilliseconds);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:04:03.060

您不应该测量对 Random() 和 Random2() 的第一次调用。第一次调用函数时，由 JITTER 处理。相反，调用 Random() 和 Random2() 一次，然后开始测量。random.NextDouble() 已经在 .NET 安装后编译，所以它不会遇到同样的问题。

我不相信这会解释所有的差异，但它应该公平竞争。

# delphi - 与 TBCDField 和 TfmtBCDfield 的类型不匹配以及 oracle 兼容性问题

> ID：10065787
> 
> 赞同：7
> 
> 时间：2012-04-08T19:32:44.470
> 
> 标签：delphi, oracle11g

我正在将大型应用程序从 Delphi 6 转换为 Delphi 2009。

它最初是为使用 Oracle 8i 而构建的，但现在需要使用 Oracle 11g。原始应用程序非常愉快地使用 oracle 11g，如果我使用 Delphi 6 重新构建它，它将这样做。

为了克服过去 11 年开发的应用程序的一些字符集/字符显示问题和其他小烦恼，我决定在更高版本的 Delphi 中重建它（这也被推迟了几年，因此使用2009.) 这是为此目的而购买的。我现在已经击败了 550 多个关于这个、那个和另一个的编译器警告。

但是现在几乎我尝试针对我的测试 oracle 11g 数据库打开的每个表/数据集都报告“字段‘xxxxxx’的类型不匹配，期望 BCD 实际 FmtBCDField。

有没有办法在不打开所有 80 多个数据模块的情况下解决这个问题，以**保证**与客户端数据库安装的兼容性？我不介意全部更改它们，但我无法在没有大量混乱的情况下针对实时数据库对其进行测试，并且不想这样做只是为了在客户的站点上得到相反的错误！

这些几乎是 TClientDataSets 中连接到 ADO 查询的所有持久字段，但在（几乎）所有情况下都使用 FieldByName 进行访问。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:18:57.517

当我需要我的 DBXpress 应用程序同时使用 Oracle 9 和 11 时，我遇到了类似的问题。出于某种原因，DBXpress 会根据 Oracle 数据库版本以不同的方式识别一些 NUMBER 字段。我通过将数字字段转换为更大的数字字段并在我的所有查询中更改 FMTBCD 字段的 BCD 字段来解决它，转换强制 DBXpress 将每个 NUMBER 识别为 FMTBCD，因为 BCD 无法支持如此大的数字，也许它会也可以在 ADO 上工作。

# apache - 使用 Apache 在哪里可以找到 localhost 文件？

> ID：10065792
> 
> 赞同：3
> 
> 时间：2012-04-08T19:33:07.680
> 
> 标签：apache, windows-7, localhost

我最近安装了 Apache 并在 Windows 中启用了“localhost”。当我在浏览器中键入“localhost”时，它会将我带到一个页面，说明 Apache 安装成功。我只是不知道在哪里可以找到这个。它是在读取一些 index.html 文件吗？如果是这样，我只是找不到它。

我试图去 C:\inetpub\wwwroot 但浏览器中的“localhost”没有从这个位置读取它。它还从哪里读取 localhost？我使用 Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:31:42.320

这通常在`\apache\htdocs`Windows 默认安装中找到。[本Apache、PHP 和 MySQL 设置指南](http://www.1stwebdesigner.com/tutorials/how-to-setup-local-web-server-with-latest-apache-php-and-mysql-packages/)中涵盖的“预安装”步骤可能会有所帮助。

如果您使用[WampServer](http://www.wampserver.com/en/)的默认安装，它将位于`C:\wamp\www`

# php - 下拉更改会话值

> ID：10065793
> 
> 赞同：-3
> 
> 时间：2012-04-08T19:33:08.813
> 
> 标签：php, jquery, codeigniter

我正在使用 codeigniter 并试图找出当用户更改下拉菜单时如何更改会话变量的值。

```
<select name="testselect">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select> 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:32:43.617

由于您使用**jQuery**标记了您的问题，我假设您在页面的某个位置使用它，因此您将 HTML 更改为：

```
<select name="testselect" id="testselect">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select> 
```

并将其添加到您的`$(document).ready( .. );`调用中以捕获对该下拉列表的更改，如下所示：

```
$(document).ready(function() {
    $('#testselect').change(function() {
        // POST the changed value to a method in a controller that can accept
        // a parameter and that'll set the session variable for you
        $.post("http://location/to/controller/method/",
          { testselect: this.value },
          'html'
        ); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:59:53.763

您必须使用 JavaScript 来提交新闻值，并且您还需要控制器中的一个函数来捕获该值。但我不确定是否可以更改会话 ID。我几乎可以肯定这是不可能的，但肯定是不安全的。

# mysql - MYSQL PHP 用一个查询计算两个表中的行数

> ID：10065798
> 
> 赞同：0
> 
> 时间：2012-04-08T19:33:55.653
> 
> 标签：mysql, sql

我想计算两个表中的条目（行），其中（两个）user_id 为 12，club 为 5、8、19。我需要接收每个俱乐部的值（或数组无关紧要），例如（5=>24、8=>78、19=>56）。请问我该怎么写这个查询？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:36:45.707

```
SELECT COUNT(*) as num_rows FROM my_table WHERE user_id = 12 AND club_id in (5,8,19) GROUP BY club_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:41:02.870

假设您的桌子是：用户和俱乐部。

```
SELECT c.club_id, COUNT(*)
FROM user u, club c
WHERE u.user_id = 12 
      AND c.club_id IN (5,8,19)
      AND u.club_id = c.club_id
GROUP BY c.club_id 
```

# facebook - 无法使用 Facebook Graph API 检索朋友信息

> ID：10065802
> 
> 赞同：0
> 
> 时间：2012-04-08T19:34:19.857
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

下面是一些测试代码：

```
<script> 
  var movieList = new Array();
  var friendList=" ";
  var friendCount = 0;

function get_friend_likes() {
FB.api('/me/friends', function(response) {
    friendCount = response.data.length;
    for( i=0; i<response.data.length; i++) {
      friendId = response.data[i].id;
      friendList=friendList+(response.data[i].name)+'<br/>';//store names
      FB.api('/'+friendId+'/movies', function(result) {
        movieList = movieList.concat(result.data); //fetch data to the pool
        friendCount--;
        document.getElementById('test').innerHTML = friendCount 
          + " friends to go ... ";
      });//end_FB.api
    } //end_for

  });//end_FB.api
  }
</script> 
```

问题是：我可以通过外部 FB.api 调用成功获取朋友的姓名和 ID，但在内部 FB.api 调用中无法获取“/movies”信息。返回的数据为空。对此有何见解？非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:51:07.670

根据[用户对象](http://developers.facebook.com/docs/reference/api/user/)api 文档，您需要“user_likes”权限才能获得*/me/movies*和“friends_likes”权限才能获得*friendId/movies*。

您是否要求获得这些权限？不确定如何验证用户身份，但您也可以使用[javascript sdk](http://developers.facebook.com/docs/reference/javascript/FB.login/)进行验证：

```
FB.login(callbackFunction, { scope: "user_likes,friends_likes" }); 
```

# php - Php Login 有效，但忽略 MySQL 脚本中的用户类型字段

> ID：10065811
> 
> 赞同：2
> 
> 时间：2012-04-08T19:35:12.727
> 
> 标签：php, mysql, arrays, session, login

希望我能对过去几天一直坚持的登录有所帮助。

基本上它是登录将登录用户，但每次都会转到同一页面。我想要它做的是：如果用户是管理员，把那个人带到管理页面。如果是用户，则到用户页面。

我已经在数据库中设置了一个用户类型字段并且硬编码了 2 个用户，其中一个具有 admin 作为用户类型，另一个作为用户。

```
<?php
session_start();
$host="xxxxxxxxxxxxx"; // Host name 
$username="xxxxxxx"; // Mysql username 
$password="xxxxxxx"; // Mysql password 
$db_name="xxxxxxxx"; // Database name 
$tbl_name="member"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$username=$_POST['username']; 
$password=$_POST['password'];

// To protect MySQL injection (more detail about MySQL injection)
$username = stripslashes($username);
$password = stripslashes($password);
$username = mysql_real_escape_string($username);
$password = mysql_real_escape_string($password);

$sql="SELECT * FROM $tbl_name WHERE username='$username' and password='$password'";
$result=mysql_query($sql);
$num_results = mysql_num_rows($result);
$array = mysql_fetch_array($result);
$_SESSION['username']=$array['username'];
$_SESSION['password']=$array['password'];
$_SESSION['usertype']=$array['usertype'];

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $username and $password, table row must be 1 row

if($count==1){

$_SESSION['username']=$_POST['username'];
$_SESSION['password']=$_POST['password'];

if ($array['usertype']=="user")
{ header ("location: userpage.php"); }
     else if ($array['usertype']=="admin");
{ header ("location: adminpage.php"); }
   } else {
  echo "Wrong user or password";
  }
?> 
```

以上是我用过的最新代码。每次我登录时，它似乎都会跳过第一个标题，直接进入第二个标题。我什至在登录后打印了会话，它确实从表中获取了用户类型。

没有更多关于如何解决此问题的线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:38:25.643

不确定它是否是导致您的问题的原因，但是您在此处末尾有一个需要删除的杂散分号：

```
else if ($array['usertype']=="admin"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:48:26.757

我可以看到 2 个错误

1.  `}`使用后使用双`header ("location: adminpage.php");`
2.  分号`;`后`else if ($array['usertype']=="admin")`

解决方案

```
if ($count == 1) {

    $_SESSION ['username'] = $_POST ['username'];
    $_SESSION ['password'] = $_POST ['password'];

    if ($array ['usertype'] == "user") {
        header ( "location: userpage.php" );
    } else if ($array ['usertype'] == "admin") {
        header ( "location: adminpage.php" );
    } else {
        echo "Wrong user or password";
    }

} 
```

# c# - XNA 中的动画

> ID：10065815
> 
> 赞同：0
> 
> 时间：2012-04-08T19:35:19.137
> 
> 标签：c#, animation, xna

我有这个代码：

```
 public class Area
{
    Texture2D point;
    Rectangle rect;
    SpriteBatch _sB;
    GameTimer _gt;
    int xo, yo, xt, yt;
    //List<Card> _cards;

    public Area(Texture2D point, SpriteBatch sB)
    {
        this.point = point;
        this._sB = sB;
        xt = 660;
        yt = 180;
        xo = 260;
        yo = 90;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        rect = new Rectangle(660, 180, 80, 120);
        spriteBatch.Draw(point, rect, Color.White);

        _gt = new GameTimer();
        _gt.UpdateInterval = TimeSpan.FromSeconds(0.1);
        _gt.Draw += OnDraw;
    }

    private void OnDraw(object sender, GameTimerEventArgs e)
    {
        this.pass(xo, yo);
        if (xo != xt) xo += (xt > xo) ? 10 : -10;
        if (yo != yt) yo += (yt > yo) ? 10 : -10;
    }

    public void pass(int x, int y)
    {
        rect = new Rectangle(x, y, 80, 120);
        _sB.Draw(point, rect, Color.Black);
    }
} 
```

所以，我不明白出了什么问题。这是我使用 XNA 的第一个项目，因此可能会出现愚蠢的错误 :)

PS对不起。有一个坐标为（xt，yt）的矩形，我需要动画将矩形移动到（xo，yo）

PPS 我添加了带有更正的完整课程，因为我不明白我的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T19:43:48.730

您在一帧中绘制整个动画..您应该使用与 OnDraw 不同的 x,y 调用 Pass...

编辑：

1）你不需要计时器，游戏类中的draw方法默认为每秒60帧......

2) Seconds 参数应计算为 (float) gametime.ElapsedTime.TotalSeconds；

```
float time;
int xt=660, yt=180;
int xo=260, yo=90;

public void Draw(SpriteBatch spriteBatch, float Seconds)
{
    rect = new Rectangle(660, 180, 80, 120);
    spriteBatch.Draw(point, rect, Color.White);

    this.pass(xo, yo, spriteBatch);
    time+= Seconds;
    if (time>0.3)
    {
        if (xo!=xt) xo+= (xt>xo) ? 10 : -10;
        if (yo!=yt) yo+= (yt>yo) ? 10 : -10;
        time = 0;
    }
}

public void pass(int x, int y, spritebatch sb)
{
    rect = new Rectangle(x, y, 80, 120);
    sb.Draw(point, rect, Color.Red);
} 
```

正如你应该知道的那样，这个动画将以粗略模式移动......如果你想平滑移动你的精灵......你可以使用 Vector2 作为你的位置，使用 float 作为你的速度；

```
Vector2 Origin = new Vector2(260, 90);
Vector2 Target = new Vector2(660, 180);
Vector2 Forward = Vector2.Normalize(Target-Source);
float Speed = 100; // Pixels per second
float Duration = (Target - Origin).Length() / Speed;
float Time = 0;

public void Update(float ElapsedSecondsPerFrame)
{
   if (Time<Duration)
   {
      Time+=Duration;
      if (Time > Duration) {
          Time = Duration;
          Origin = Target;
      }
      else Origin += Forward * Speed * ElapsedSecondsPerFrame;
   } 
}

public void Draw()
{
    rect = new Rectangle((int) Origin.X, (int) Origin.Y, 80, 120);
    sb.Draw(point, rect, Color.Red);   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T05:40:06.933

如果您愿意使用 Sprite Vortex 制作动画（实际上是特定版本），您可以使用以下类。您必须使用 Sprite Vortex 1.2.2，因为在较新的版本中 XML 格式发生了变化。确保您添加属性的 XML 文件更改为“不编译”。

如果您需要一个工作示例，我可以给您发送一个非常简单的示例。

ps Sprite Vortex 应该做与使用其他程序相同的事情，但是 v 1.2.2 有很多错误，但还不错。

课程在这里： http: [//pastebin.com/sNSa7xgQ](http://pastebin.com/sNSa7xgQ)

使用 Sprite Vortex（确保它是 1.2.2）选择一个 spritesheet 并选择您想要动画的子图像。导出 XML 代码。

将该类添加到您的项目中，它会读取 XML 并添加自动为您创建动画的帧。

# android - 图像在动画中消失

> ID：10065817
> 
> 赞同：0
> 
> 时间：2012-04-08T19:35:54.490
> 
> 标签：android, android-animation, android-imageview, android-image

我正在创建一个动画，其中我的图像将转换到屏幕上的不同位置，然后逐渐淡入。我完成了翻译部分（见下文），但现在当我开始淡入动画时，它会在一段时间内消失，然后重新出现。我想展示逐渐淡入的图像....任何想法为什么会发生这种情况？

```
public static int moveTwo(AnimationListener activity, View apa, int animationmove)

Log.v("MOVETWO", "Started move2");
AnimationSet picMov2 = new AnimationSet(true);
picMov2.setAnimationListener(activity);
RotateAnimation rotate2 = new RotateAnimation(0, 0,
        Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF,
        0.5f);
// rotate1.setStartOffset(50);
rotate2.setDuration(2000);
picMov2.addAnimation(rotate2);
TranslateAnimation trans2 = new TranslateAnimation(-200, -400, 0, 0);
trans2.setDuration(2000);
picMov2.setFillAfter(true);
picMov2.addAnimation(trans2);
apa.startAnimation(picMov2);
animationmove = 3;
return animationmove;

public static int moveThree(AnimationListener activity, View apa, int animationmove)

AlphaAnimation fadein = new AlphaAnimation((float) 0.3, 1);//HERE THE IMAGE IS DISAPPEARING
fadein.setAnimationListener(activity);

fadein.setDuration(2000);
fadein.setFillAfter(true);
apa.startAnimation(fadein);
animationmove=4;
return animationmove; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T05:19:19.927

只需要在同一个地方创建一个翻译动作，这样它就不会回到原来的位置

```
public static int moveThree(AnimationListener activity, View apa, int animationmove)
{
    Log.v("MOVETHREE", "Started move3");

    AnimationSet picMov3 = new AnimationSet(true);
    picMov3.setAnimationListener(activity);
    AlphaAnimation fadein = new AlphaAnimation((float) 0.4, 1);
    // rotate1.setStartOffset(50);
    fadein.setDuration(duration);
    picMov3.addAnimation(fadein);
    TranslateAnimation trans1 = new TranslateAnimation(-400, -400, 0, 0);
    trans1.setDuration(duration);
    picMov3.setFillAfter(true);
    picMov3.addAnimation(trans1);
    apa.startAnimation(picMov3); 
```

# perl - 如何通过 perl 或 bash 删除重复行？

> ID：10065818
> 
> 赞同：1
> 
> 时间：2012-04-08T19:36:01.267
> 
> 标签：perl, bash

我有一个清单：

```
asd@domain.com
fff@domain.com
yyy@domain.com
ttt@test.com
rrr@test.com
fff@test.com
yyy@my.com
yyy@my.com 
```

如何做到这一点：

如果在整个列表中我们看到三个或更多具有相同域的电子邮件 - 除第一个之外的所有重复项都需要删除。

```
Output:

asd@domain.com
ttt@test.com
yyy@my.com
yyy@my.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:10:48.443

```
#!/usr/bin/env perl

use strict; use warnings;
use Email::Address;

my %data;

while (my $line = <DATA>) {
    my ($addr) = Email::Address->parse($line =~ /^(\S+)/);
    push @{ $data{ $addr->host } }, $addr->original;
}

for my $addrs (values %data) {
    if (@$addrs > 2) {
        print "$addrs->[0]\n";
    }
    else {
        print "$_\n" for @$addrs;
    }
}

__DATA__
asd@domain.com
fff@domain.com
yyy@domain.com
ttt@test.com
rrr@test.com
fff@test.com
yyy@my.com
yyy@my.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:45:31.163

```
 sed -s 's/@/@\t/g' test.txt | uniq -f 1 | sed -s 's/@\t/@/g' 
```

第一个 sed 用制表符将电子邮件分隔为 2 个字段（名称 + 域），以便 uniq 在删除重复域时可以跳过第一个字段，最后一个 sed 删除制表符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T21:26:22.317

我很困惑为什么您的示例输出包含`yyy@my.com`两次但假设这是一个错误。

只要尾随空格字符或更复杂形式的电子邮件地址没有问题，您就可以在 Perl 中简单地使用

```
perl -aF@ -ne 'print unless $seen{$F[1]}++' myfile 
```

**输出**

```
asd@domain.com
ttt@test.com
yyy@my.com 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T00:31:12.857

这可能对您有用：

```
sed ':a;$!N;s/^\([^@]*@\([^\n]*\)\)\n.*\2/\1/;ta;P;D' file
asd@domain.com
ttt@test.com
yyy@my.com 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T10:19:22.967

如果您不介意顺序，只需使用排序：

```
sort -t '@' -u -k 2,2 your_file 
```

如果您不介意订单，请执行

```
gawk '{print NR "@" $0}' your_file | sort -t '@' -u -k 3,3 | sort -t '@' -k 1,1n | cut -d \@ -f 2- 
```

# java - Java Web 服务生成错误响应

> ID：10065836
> 
> 赞同：0
> 
> 时间：2012-04-08T19:37:39.623
> 
> 标签：java, xml, web-services, jakarta-ee

我正在尝试使用 Jax-RS 制作 Web 服务（使用 Glassfish 3.1.1，所有 RI）。Question 类使用@XmlRootElement 注释并具有此方法。我没有使用任何 Jax-RS 注释对其进行注释。我所期望的是你会得到一个包含所有答案元素的答案元素......但显然情况并非如此。我该怎么做？Answer 类也使用@XmlRootElement 进行注释。

```
@OneToMany(cascade = CascadeType.ALL)
public List<Answer> getAnswers() {
    return answers;
} 
```

这是回应：

```
<questions>
<question>
    <answers>
        <correct>true</correct>
        <description>Answer one</description>
        <id>1</id>
    </answers>
    <answers>
        <correct>false</correct>
        <description>Answer two</description>
        <id>2</id>
    </answers>
    <description>Question One</description>
    <id>1</id>
    <imageName>hello.png</imageName>
    <status>SUBMITTED</status>
</question>
...
</questions> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:47:58.250

您正在寻找的注释是 XMLElementWrapper

```
@XMLElementWrapper("answers")
@XMLElement("answer")
private List<Answer> answers; 
```

应该给你

```
<answers>
    <answer>...</answer>
    <answer>...</answer>
</answer> 
```

# c - 缓存未命中？我怎么能看到？

> ID：10065843
> 
> 赞同：-1
> 
> 时间：2012-04-08T19:38:37.267
> 
> 标签：c, performance, optimization

给定以下代码：

```
for (int i=0; i<n; i++)
{
  counter += myArray[i];
} 
```

和循环展开版本：

```
for (int i=0; i<n; i+=4)
{
  counter1 += myArray[i+0];
  counter2 += myArray[i+1];
  counter3 += myArray[i+2];
  counter4 += myArray[i+3];
}

total = counter1+ counter2 + counter3+ counter4; 
```

1.  为什么我们在第一个版本中有缓存未命中？
2.  第二版的性能确实比第一版好？为什么 ？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:46:23.783

> 为什么我们在第一个版本中有缓存未命中？

正如奥利在评论中指出的那样。这个问题是没有根据的。如果数据已经在缓存中，则不会有缓存未命中。

除此之外，您的两个示例之间的内存访问没有区别。因此，这不太可能成为它们之间任何性能差异的一个因素。

> 第二版的性能确实比第一版好？为什么 ？

通常，要做的是实际测量。但在这个特定的例子中，我想说它可能会更快。不是因为更好的缓存访问，而是因为循环展开。

您正在进行的优化称为“节点拆分”，您可以在其中分离`counter`变量以打破依赖链。

但是，在这种情况下，您正在执行一个简单的归约操作。许多现代编译器能够识别这种模式并为您进行这种节点拆分。

**那么它更快吗？最有可能的。**但是您应该检查编译器是否为您执行此操作。

* * *

**郑重声明：**我刚刚在 Visual Studio 2010 上对此进行了测试。
我很惊讶它***无法***进行此优化。

```
; 129  : 
; 130  :     int counter = 0;
; 131  : 
; 132  :     for (int i=0; i<n; i++)
    mov ecx, DWORD PTR n$[rsp]
    xor edx, edx
    test    ecx, ecx
    jle SHORT $LN1@main
$LL3@main:

; 133  :     {
; 134  :         counter += myArray[i];

    add edx, DWORD PTR [rax]
    add rax, 4
    dec rcx
    jne SHORT $LL3@main
$LN1@main:

; 135  :     } 
```

对于这个（微不足道的）示例，Visual Studio 2010 似乎无法执行“节点拆分”...

# iphone - UIImageView 的高度在缩小

> ID：10065844
> 
> 赞同：0
> 
> 时间：2012-04-08T19:38:48.373
> 
> 标签：iphone, objective-c, ios, xcode

所以，我正在从互联网上下载一个 48x48px 的图像并将其放在一个 48x48px 的 UIImageView 中。但结果是这样的：

![在此处输入图像描述](../Images/660af6e0b172ea0d2d7a81f6d124b189.png)

换句话说，图像的高度由于某种原因而崩溃。

这是我下载图像的方法：

```
 if (!_myObject.userProfileImage) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            NSString *imageUrl = _myObject.userProfileImageUrl;
            NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrl]];

            dispatch_async(dispatch_get_main_queue(), ^{
                self.userProfileImageView.image = [UIImage imageWithData:data];
            });
        });
    }
    else {
        self.userProfileImageView.image = _myObject.userProfileImage;
    } 
```

# opengl - Memory leak using glXCreateContext

> ID：10065849
> 
> 赞同：1
> 
> 时间：2012-04-08T19:39:36.037
> 
> 标签：opengl, xlib, glx

I have created a class to initialize and clear Xlib and glx properly. 

```
OpenGLContext::OpenGLContext()
    :m_display(nullptr)
    ,m_context(nullptr)
    ,m_vi(nullptr)
{
    memset(&m_cmap, 0, sizeof(Colormap));
    memset(&m_swa, 0, sizeof(XSetWindowAttributes));
    memset(&m_win, 0, sizeof(Window));
    m_display = XOpenDisplay(NULL);
    assert(m_display);

    static int dblBuf[] =  {GLX_RGBA, GLX_RED_SIZE, 1, GLX_GREEN_SIZE, 1, GLX_BLUE_SIZE, 1, GLX_DEPTH_SIZE, 12, GLX_DOUBLEBUFFER, None};
    m_vi = glXChooseVisual(m_display, DefaultScreen(m_display), dblBuf);
    m_context = glXCreateContext(m_display, m_vi, None, True);
    m_cmap = XCreateColormap(m_display, RootWindow(m_display, m_vi->screen), m_vi->visual, AllocNone);
    m_swa.colormap = m_cmap;
    m_win = XCreateWindow(
                m_display,
                RootWindow(  m_display, m_vi->screen  ),
                0, 0, /* width */ 640, /* height */ 480, 0, m_vi->depth, InputOutput, m_vi->visual,
                CWBorderPixel | CWColormap | CWEventMask, &m_swa
            );

    char* dummy[] = { "", 0 };
    XSetStandardProperties(m_display, m_win, "glxsimple", "glxsimple", None, dummy, 0, NULL);
    glXMakeCurrent(m_display, m_win, m_context);
    XMapWindow(GetDisplay(), GetWindow());
}

OpenGLContext::~OpenGLContext()
{
    XUnmapWindow(m_display, m_win);
    glXMakeCurrent(m_display, None, NULL);
    XFreeColormap(m_display, m_cmap);
    XDestroyWindow(m_display, m_win);
    glXDestroyContext(m_display, m_context);
    XFree(m_vi);
    XCloseDisplay(m_display);
} 
```

Unfortunately, valgrind reports a memory leak.

```
==28742== 12,796 (584 direct, 12,212 indirect) bytes in 1 blocks are definitely lost in loss record 631 of 637
==28742==    at 0x4C29F5D: malloc (vg_replace_malloc.c:263)
==28742==    by 0xBCD7E7C: driConcatConfigs (in /usr/lib64/mesa/swrastg_dri.so)
==28742==    by 0xBCDBDFF: dri_init_screen_helper (in /usr/lib64/mesa/swrastg_dri.so)
==28742==    by 0xBCDAF0D: drisw_init_screen (in /usr/lib64/mesa/swrastg_dri.so)
==28742==    by 0xBCD8583: driCreateNewScreen (in /usr/lib64/mesa/swrastg_dri.so)
==28742==    by 0x5295604: driswCreateScreen (in /usr/lib64/opengl/xorg-x11/lib/libGL.so.1.2)
==28742==    by 0x527412B: __glXInitialize (in /usr/lib64/opengl/xorg-x11/lib/libGL.so.1.2)
==28742==    by 0x5270154: glXGetFBConfigs (in /usr/lib64/opengl/xorg-x11/lib/libGL.so.1.2)
==28742==    by 0x5270B57: glXChooseFBConfig (in /usr/lib64/opengl/xorg-x11/lib/libGL.so.1.2)
==28742==    by 0x4E9A7CE: ??? (in /usr/lib64/librrfaker.so)
==28742==    by 0x4E5B676: glXChooseVisual (in /usr/lib64/librrfaker.so)
==28742==    by 0x46D23B: Zion::Core::OpenGLContext::OpenGLContext() (OpenGLContext.cpp:23) 
```

Note that I’m using VirtualGL (which explains librrfaker.so). Is there something I did wrong? or should I assume this is a bug on VirtualGL’s side?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:43:18.407

You shouldn't automatically assume that's it a bug. valgrind will sometimes return false positive results when dealing with optimised libraries. To be certain you need to ensure you are running against an unoptimised build of the library.

**Edit**

[This extract from a valgrind manual](http://www.network-theory.co.uk/docs/valgrind/valgrind_11.html) suggest that this is only an issue when it checks for uninitialised variables. I remember being hit by false positives before but when I think of it now it was indeed for uninitialised values.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-10T09:40:08.780

这可能是真正的内存泄漏，Valgrind 也检测到库中的泄漏。

在实践中 - 例如，如果这些函数仅在初始化时调用一次。虽然它们在技术上是泄漏 - 您可以放心地忽略它们，或者如果您愿意，您可以在上游调查泄漏（如果来源可用）。

* * *

检查文档，在[glXChooseFBConfig](https://www.opengl.org/sdk/docs/man2/xhtml/glXChooseFBConfig.xml)上，返回值有望在`XFree`调用时被释放。

# django - 请求不适用于 django 中 URL 模式中的条件

> ID：10065853
> 
> 赞同：0
> 
> 时间：2012-04-08T19:39:53.473
> 
> 标签：django, django-urls, django-1.3

我有条件地使用两种不同的 url 模式，意味着在一个 URL 上我有条件地检查用户类型，然后相应地制作 URL 模式。以下是我的 urls.py 中的内容

```
from django.conf.urls.defaults import *
from project import settings  
from accounts.models import UserProfile

profile=request.user.get_profile() 

urlpatterns=patterns('accounts.views',
        (r'^register/$','register',{'template_name':'accounts/     register.html'},'register'),
 )

try:
   profile.profile1
   urlpatterns+=patterns("profile1.views",
        (r'^dashboard/$','dashboard'),
   )
except UserProfile.DoesNotExist:
   urlpatterns+=patterns("profile2.views",
        (r'^dashboard/$','dashboard'),
   )

urlpatterns+=patterns('django.contrib.auth.views',
        (r'^login/$','login',{'template_name':'account/login.html'},'login'),
) 
```

现在，当我尝试使用`request.user.get_profile`然后 django 获取用户配置文件时说未定义请求。这是真的，但我怎样才能通过使用一些导入来定义这个配置文件，或者有其他更好的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:57:45.097

Python 中没有任何代码可以自动访问在别处定义的变量。名称必须*始终*在当前模块中定义，或者从其他地方导入。这适用于任何其他 Python 变量的请求。

但是，即使您能够将请求变量放入 urls.py，这仍然行不通。URLconfs 对整个服务器进程是通用的，而不是特定于每个请求。在评估 url 时，根本没有“请求”或“用户”之类的东西。

正确的方法是定义一个简单的视图，`dashboard`它只是检查`request.user`然后从那里分派到正确的函数。

# python - Error when working with graphics modules in python?

> ID：10065856
> 
> 赞同：1
> 
> 时间：2012-04-08T19:40:24.757
> 
> 标签：python, graphics

When I work with graphics modules such as tkinter, easygui, and graphics.py in a shell(in terminal), I usually get this error:

8 12:37:27 Jasmines-MacBook-Pro.local Python[18090] : kCGErrorInvalidConnection: CGSGetWindowTags: Invalid connection

After which the shell is interrupted and I can't enter any more text. What is going on?

OSX 10.7.3, and Python 3.1.1 from python.org.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:07:14.107

Python 3.1 已过时且不再维护，它的 python.org OS X 安装程序与也已过时的 Tcl/Tk 8.4 链接。建议安装最新的 64 位/32 位版本的 Python 3.2.x*和*安装最新的 ActiveState Tcl/Tk 8.5。[这里](http://www.python.org/download/mac/tcltk/)有更多关于 Mac OS X 上的 Python 和 Tcl/Tk 版本的信息。

# javafx - JavaFX 打印

> ID：10065857
> 
> 赞同：7
> 
> 时间：2012-04-08T19:40:33.710
> 
> 标签：javafx, javafx-2

JavaFX 2.0 是否支持打印？我有一个文本区域，我从中获取文本，然后我想打印它，但似乎没有这样的功能。当然，这里我说的是打印到打印机。:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T20:37:03.673

尚不支持。作为一种解决方法，您可以使用 Java2d 制作屏幕截图和打印。

看

[在 JavaFX 2.0 中将 ScatterChart 的图像复制到系统剪贴板](https://stackoverflow.com/questions/8496977/copying-the-image-of-a-scatterchart-to-system-clipboard-in-javafx-2-0)

[在 Java 中打印 BufferedImage](https://stackoverflow.com/questions/5283860/printing-a-bufferedimage-in-java)

**更新：**

JavaFX8（将包含在即将发布的 JDK8 版本中）具有打印支持。在这里看到很好的例子：http: [//java.dzone.com/articles/introduction-example-javafx-8](http://java.dzone.com/articles/introduction-example-javafx-8)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-27T09:26:23.023

我相信 JavaFX 2.2 已经支持它。

# jquery - How to synchronize multiple animate() instances

> ID：10065858
> 
> 赞同：0
> 
> 时间：2012-04-08T19:41:01.907
> 
> 标签：jquery, width, jquery-animate, synchronize

I'm trying to synchronize multiple jQuery animate() instances in a fixed width parent element. Each of the child elements are different sizes moving to different sizes. At some point during the animate(), the sizes of the children exceed the size of the parent and another row is presented..

How can I coordinate the child animates so they do not exceed the parent width ?

BTW it doesn't happen on JSFiddle, [http://jsfiddle.net/zeSfe/1](http://jsfiddle.net/zeSfe/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>Horizontal Slide</title>
    <style>
    * {margin:0; padding:0}
    .sm {list-style:none; width:496px; height:100px; display:block; overflow:hidden}
    .sm li {float:left; display:inline; overflow:hidden}
    </style>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <ul id="sm" class="sm">
        <li id=list1 ><div style="background-color:red">1<div></li>
        <li id=list2><div style="background-color:yellow">2<div></li>
        <li id=list3><div style="background-color:blue">3<div></li>
        <li id=list4 ><div style="background-color:green">4<div></li>
    </ul>
    <br/>
    <button id="set1">&raquo; Set 1</button>
    <button id="set2">&raquo; Set 2</button>
    <button id="set3">&raquo; Set Even</button>
    <script>

    $( "#set1" ).click(function(){
      $( "#list1" ).animate( { width: "200px" }, 1500 );
      $( "#list2" ).animate( { width: "150px" }, 1500 );
      $( "#list3" ).animate( { width: "96px" }, 1500 );
      $( "#list4" ).animate( { width: "50px" }, 1500 );
    });

    $( "#set2" ).click(function(){
      $( "#list1" ).animate( { width: "50px" }, 1500 );
      $( "#list2" ).animate( { width: "96px" }, 1500 );
      $( "#list3" ).animate( { width: "150px" }, 1500 );
      $( "#list4" ).animate( { width: "200px" }, 1500 );
    });

    $( "#set3" ).click(function(){
      $( "#list1" ).animate( { width: "124px" }, 1500 );
      $( "#list2" ).animate( { width: "124px" }, 1500 );
      $( "#list3" ).animate( { width: "124px" }, 1500 );
      $( "#list4" ).animate( { width: "124px" }, 1500 );
    });

    </script></body>
    </html> 
```

# https - 使用 jaxws 时如何在 Fiddler 中查看 https 调用

> ID：10065863
> 
> 赞同：0
> 
> 时间：2012-04-08T19:42:13.590
> 
> 标签：https, proxy, jvm, jax-ws, fiddler

我正在使用包含 jaxws-rt-2.1.4.jar 的基于 java 的工具来访问 Web 服务。我可以以正确的结果成功访问 https Web 服务，但我希望在检索 wsdl 并在 Fiddler 中调用服务时看到 https 请求和响应。
JVM 参数包括以下内容：

```
-DproxySet=true -Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=8888
-Djavax.net.ssl.trustStore=C:\test\xxx.jks -Djavax.net.ssl.trustStorePassword=pw 
```

密钥库包含访问 Web 服务所需的证书，如前所述，这可以正常工作。代理设置指向 Fiddler，因此我希望不仅可以看到启动调用 Web 服务的作业的工具前端（托管在[http://localhost:8080](http://localhost:8080)上）的 http 请求+响应，还可以看到 https 请求+响应。

我用于检索 WSDL 和调用服务的代码是

```
url = "https://www.eway.com.au/gateway/rebill/test/manageRebill_test.asmx?wsdl"
Definition definition = WSDLFactory.newInstance().newWSDLReader().readWSDL(url);
... other code creating the envelopeXML ...
URL wsdlLocation = new URL(url);
Source result =
    Service.create(wsdlLocation, serviceQName).createDispatch(
        portQName,
        Source.class,
        Service.Mode.MESSAGE).invoke(new StreamSource(new StringReader(envelopeXML)))); 
```

当 url 是 http 时，`http://www.webservicex.net/periodictable.asmx?wsdl`我确实在 Fiddler 中看到了请求+响应。
我的设置中缺少什么会在 Fiddler 中显示 WSDL 检索和服务调用的 https 请求+响应？也许它需要额外的或不同的 JVM 设置？还是证书问题 - 我是否必须向 Fiddler 提供证书并让 Fiddler 基于它颁发证书，该证书用于密钥库而不是原始证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:26:24.460

好吧，这对我来说应该是显而易见的——但是再次没有观众看到它 :-)
我需要添加以下 JVM 参数：

```
-DproxySet=true -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=8888 
```

通过这种方式，Fiddler 捕获了 https 请求+响应。

# php - 在 MySQL Query 中转换 $_POST 变量

> ID：10065864
> 
> 赞同：1
> 
> 时间：2012-04-08T19:42:24.050
> 
> 标签：php, mysql

我试图从 $_POST 值创建一个 MySql 查询问题是我不想使用所有 $_POST 值，因为有些值用于其他用途，所以我试图将值名称与数组进行比较以查看它们是否是实际归档在数据库中，然后如果他们从名称和值中创建查询字符串

这就是我现在所拥有的

```
$i = 1;
$b = 1;

$cnt = count($_POST);

foreach ($_POST as $key => $entry)
{

$array = array('Country', 'County', 'Age', 'ect', 'ect');

foreach ($array as $arrayValue) {
    if ($arrayValue == $key) {
$b++;
        if($i == 1) {$query[] = "$key='$entry'";} 
         elseif($cnt == $b) {$query[] = "$key='$entry'";} 
           else {$query[] = "$key='$entry' AND ";}
$i++;
    }
}

} 
```

我现在卡住了，我不确定如何将 $QUERY 数组中的所有值转换为单个字符串，即`$search = "country='United Kingdom' AND county ='example'"`

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:46:17.693

```
$query = array();
$vars = array('Country', 'County', 'Age', 'etc1', 'etc2');
foreach ($vars as $v)
{
    if (isset($_POST[$v]))
    {
        $query[] = $v.' = "'.addslashes($_POST[$v]).'"';
    }
}
$query = implode(' AND ', $query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:48:09.143

你把事情复杂化了。如果您知道要使用哪些变量，只需检查它们并构建您的查询：

```
$sql = "SELECT * FROM mytable WHERE ";

$sql_array = array();

if(isset($_POST['A'])) { $sql_array[] = 'some_col_a = '.$_POST['A']; }
if(isset($_POST['B'])) { $sql_array[] = 'some_col_b = '.$_POST['B']; }
if(isset($_POST['C'])) { $sql_array[] = 'some_col_c = '.$_POST['C']; }

$sql .= implode(' AND ', $sql_array); 
```

您还需要检查 mysql 攻击等，但这是纯粹的基础。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T19:58:50.460

我建议使用：

A. 不区分大小写的使用`strtolower`

B. 卫生使用 `mysql_real_escape_string`

C.`in_array`用于验证

D.`implode`把所有东西放在一起

```
$_POST['Country']  = "United Kingdom" ;
$_POST['County']  = "example" ;
$array = array('Country', 'County', 'Age', 'ect', 'ect');
$query = array();

foreach ($_POST as $key => $entry)
{
    if(in_array(strtolower($key), $array) || in_array($key, $array))  
    {
        $query[] = $key . " = '" . mysql_real_escape_string($_POST[$key]) . "'";

    }
}

$search = implode(" AND ", $query);
var_dump($search); 
```

输出

```
string 'Country= 'United Kingdom' AND County= 'example'' (length=47) 
```

选修的

```
// Optional 
// You array is inconsistent  and contains case sensitive values .. use can use this to convert them to small letters 
array_walk($array, "toLower");
function toLower(&$item, $key)
{
    $item = strtolower($item);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T19:46:33.803

看[`implode`](http://php.net/manual/en/function.implode.php)功能。您应该`' AND '`用作 $glue 参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T22:53:12.527

PDO 将为您提供几个优势；更不用说参数化查询了。我[创建了一个要点](https://gist.github.com/2340119)，它将为您提供一种仅将所需参数列入白名单、构建 SQL 查询并执行参数化 PDO 查询的方法。

1.  第 08 - 18 行为您提供 SQL 来构建一个临时数据库/表来测试它。
2.  第 23 - 27 行处理白名单和 where 子句构建（只需将 'AND' 替换为 'OR' 以构建“ANY”类型过滤器而不是“ALL”）
3.  第 41 行构建完整的 SQL 查询
4.  第 50 行执行参数化查询。

`$parameters`根据我们的示例，数组将包含以下内容：

```
array(3) {
  'Country' => string(3) "USA"
  'County'  => string(6) "Nassau"
  'Age'     => string(2) "21"
} 
```

`$whereClause`: _

```
string(38) "Country = ? AND County = ? AND Age = ?" 
```

`$sql`: _

```
string(72) "SELECT * FROM pdo_whitelist WHERE Country = ? AND County = ? AND Age = ?" 
```

源码的白名单部分（完整源码在[https://gist.github.com/2340119](https://gist.github.com/2340119)）：

```
<?php

// whitelist parameters
$post_input = ['Country' => 'USA', 'County' => 'Nassau', 'Age' => 21, 'EscalatePriviledge' => true, 'MakeMeSuperUser' => 1];
$whitelist  = ['Country', 'County', 'Age'];
$parameters = array_map('trim', array_intersect_key($post_input, array_flip($whitelist)));
$wheres     = array_map(function($fieldName){ return "${fieldName} = ?"; }, array_keys($parameters));
$whereClause= join(' AND ', $wheres);
// you should validate and normalize here as well (see: php.net/filter_var) 
```

处理参数化查询的 PDO 代码：

```
$statement = $pdo->prepare($sql);
$statement->execute(array_values($parameters)); 
```

最后，总结一下链接供大家参考：

*   [gist.github.com/2340119](http://gist.github.com/2340119)
*   [php.net/pdo.prepared-statements](http://php.net/pdo.prepared-statements)
*   [php.net/filter_var](http://php.net/filter_var)

# ruby-on-rails - rails3-jquery-autocomplete 在选择时重定向

> ID：10065866
> 
> 赞同：0
> 
> 时间：2012-04-08T19:42:56.767
> 
> 标签：ruby-on-rails, jquery-autocomplete

我正在使用 rails3-jquery-autocomplete gem。它工作得很好，但我不知道如何在选择结果时实现重定向。它现在所做的就是用所选结果的文本填充该字段。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:54:39.230

当用户在使用 rails3-jquery-autocomplete 时从自动完成列表中选择一个下拉项目时，执行重定向的最佳方式是通过“railsAutocomplete.select”事件，该事件在用户选择其中一个选项时触发.

[此处](https://github.com/crowdint/rails3-jquery-autocomplete#running-custom-code-on-selection)记录了如何执行此操作。这种方法意味着您可以避免编辑 rails3-jquery-autocomplete 代码，并且仅在用户从下拉选项中选择时才导致重定向发生，而不是表单字段的“onChange”，这实际上并不是什么你要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:24:55.900

只需将`onChange`事件用于更新的文本字段。您可以使用一些简单的 javascript 实现重定向：

```
window.location = "http://stackoverflow.com" 
```

如果您需要针对不同的值进行不同的重定向，请使用`switch`：

```
var location;

switch ( document.getElementById('#my_textfield').value ) {
  case "stackoverflow":
    location = "http://stackoverflow.com";
  case "google":
    location = "http://google.com";
  default:
    location = "http://mysite.com";
}

window.location.href = location; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:20:18.377

你可以去 assets 中的 jquery-ui.js 文件，你会发现它被缩小了

去[http://jsbeautifier.org](http://jsbeautifier.org)让代码看起来更好看

寻找包含这个的行

```
case e.ENTER: 
```

您会发现它为空白，这是单击 Enter 时将执行的操作，因此将其更改为

```
case e.ENTER:
 window.location.href = 'yourURL'; 
```

# ios - Building an iPhone app that fires a repeated Local Notification

> ID：10065872
> 
> 赞同：0
> 
> 时间：2012-04-08T19:43:31.663
> 
> 标签：ios, uilocalnotification

I'm building a small, simple application for iPhone (I'm not that experienced). All it has to do is display a link to a website on it (yes really, thats it). But i need a local notification to fire every week at the same time to alert the user to click the link in the app. Now because I'm not very experienced, i don't really know where to start. I have googled around and found how to repeat a local notification: [http://xebee.xebia.in/2011/04/13/local-notifications-in-iphone/](http://xebee.xebia.in/2011/04/13/local-notifications-in-iphone/). But i dont even know where to put this code?? Do i create a view based application, if so what method do I put the above code in. If someone could give me an outline of what I could do or even just give me some things to google (keywords etc) and I can go off and read up on it. This app is being built out of necessity, not so much my own learning, so I just need to get it done! Any pointers appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:04:44.077

使用它来安排通知：

```
 UILocalNotification *localNotification = [[UILocalNotification alloc] init];

    //setting the fire dat of the local notification. Put the date you want the notification to be sent
    localNotification.fireDate = [[[NSDate alloc] init] autorelease]; 

    //setting the time zone
    localNotification.timeZone = [NSTimeZone defaultTimeZone];

    //setting the message to display
    localNotification.alertBody = @"Notification Body";

    //default notification sound
    localNotification.soundName = UILocalNotificationDefaultSoundName;

    localNotification.alertAction = @"Action!";

    //Saving regionIndex and searchIndex
    NSDictionary *userInfo = [[NSDictionary alloc] initWithObjectsAndKeys:@"value", @"key", nil];
    localNotification.userInfo = userInfo;
    [userInfo release];

    //schedule a notification at its specified time with the help of the app delegate
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];    
    [localNotification release]; 
```

然后，每次用户加载应用程序时，您可以使用 scheduleLocalNotifications 检查下周的通知是否已安排好。

```
 NSArray *notifications = [NSArray arrayWithArray:[[UIApplication sharedApplication] scheduledLocalNotifications]];
    for (UILocalNotification *notification in notifications) {
        NSDictionary *userInfo = notification.userInfo;
        NSdate *date = notification.fireDate;

        // Here is where you can check if the notification was already scheduled    

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:12:12.557

一个单一的视图模板可能是最好的开始。本地通知很容易使用，首先要了解它们是如何工作的以及应该如何使用它们。您布置的场景听起来适合本地通知。首先查看[Apple 的文档](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)。有很多关于如何做到这一点的例子。

# android - 如何通过蓝牙从 Android 设备发送 5 个具有相同值的字节

> ID：10065873
> 
> 赞同：0
> 
> 时间：2012-04-08T19:43:33.130
> 
> 标签：android, bluetooth, rfcomm

我一直在使用蓝牙聊天示例通过蓝牙将数据从我的 android 设备传输到另一个设备。我想知道如何发送 5 个字节，其值为：0、64、0、32、152。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:11:58.613

您的代码将与此相同，并且可能大致如下所示。

```
get BluetoothAdapter 
```

然后

```
create Socket for specific device 
```

然后你可以得到

```
InputStream and OutputStream 
```

从 Socket 使用它们

```
read() and write() 
```

可能有很多可用的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:55:46.440

我相信我已经解决了我的问题，并且它有效！多谢你们。

```
public static byte[] reset(){
        byte[] values = new byte[]{0, 64, 0, 32, (byte) 152};

        return values;
    } 
```

# c# - 无论文本文件的当前值如何，如何替换文本文件中的一行？

> ID：10065876
> 
> 赞同：0
> 
> 时间：2012-04-08T19:43:58.827
> 
> 标签：c#, .net

我想替换 Google Chrome 的 Preferences 文件中的一行以更改当前主页。

在我的计算机中，我将[http://www.google.com](http://www.google.com)定义为默认主页，因此我需要替换（在 Preferences 文件中）以下行：

```
 "homepage": "http://www.google.com/", 
```

用。。。来代替 ：

```
 "homepage": "http://www.MyWebsite.com/", 
```

所以为了做到这一点，我使用了一个看起来像这样的代码：

```
 string PreferencesFile = File.ReadAllText(file);
          PreferencesFile.Replace(FirstLine,SecondLine);
          File.WriteAllText(file,PreferencesFile); 
```

但问题是，在每台计算机中，都有不同的主页。

如何替换下面的行

```
 "homepage": "http://www.what-ever-site-is-here.com/", 
```

和

```
 "homepage": "http://www.MyWebsite.com/", 
```

哪些值应该受到 FirstLine 和 SecondLine 变量的影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:47:08.857

听起来您应该阅读所有*行*，替换以开头的任何行`"homepage":`，然后重写。例如：

```
var lines = File.ReadAllLines(file);
for (int i = 0; i < lines.Length; i++)
{
    if (lines[i].StartsWith("\"homepage\": "))
    {
        lines[i] = "\"homepage\": \"http://www.MyWebsite.com\"",";
    }
}
File.WriteAllLines(file, lines); 
```

# ruby - Zlib 膨胀缓冲区错误

> ID：10065877
> 
> 赞同：0
> 
> 时间：2012-04-08T19:43:59.807
> 
> 标签：ruby

```
def deflate(string, level)
  z = Zlib::Deflate.new(level)
  dst = z.deflate(string, Zlib::NO_FLUSH)
  z.close
  return dst
end

def inflate(string)
  zstream = Zlib::Inflate.new
  buf = zstream.inflate(string)
  zstream.finish
  zstream.close
  return buf
end

a = deflate("asasasas",6)
p a
p inflate(a) 
```

在线给我一个缓冲区错误

```
 zstream.finish 
```

这是为什么？我相信 Ruby 1.8.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T21:34:02.510

关于 deflate 的文档说：

> 通常参数flush设置为Z_NO_FLUSH，它允许deflate决定在产生输出之前要积累多少数据，以最大限度地压缩。

通过使用 Zlib::NO_FLUSH，返回的值不是整个压缩流。请改用**Zlib::FINISH**。

您编写的函数是 Zlib::Deflate / Zlib::Inflate 文档中提供的函数。您可以替换您编写的所有代码：

```
a = Zlib::Deflate.deflate("asasasas", 6)
p a
p Zlib::Inflate.inflate(a) 
```

# forms - 如何在多个页面上重用 codeigniter 表单

> ID：10065879
> 
> 赞同：0
> 
> 时间：2012-04-08T19:44:17.417
> 
> 标签：forms, codeigniter, validation

我有一个简单的搜索表单，我想在我的 codeigniter 应用程序的多个页面中重复使用。例如，现在我在侧边栏中有一个搜索表单，我计划在索引、关于和其他页面上显示该侧边栏。

我希望在用户提交表单的同一页面上显示表单验证错误。

例如：

1.  用户在关于页面上。
2.  用户提交带有无效数据的表单
3.  用户在“关于”页面的侧边栏中看到错误

和

1.  用户在索引页面上。
2.  用户提交带有无效数据的表单
3.  用户在索引页面的侧边栏中看到错误

但我想重用该表单验证逻辑。我只是希望它在用户发布的任何页面上显示错误。

任何想法如何做到这一点？抱歉这个菜鸟问题，我对 CI 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T08:55:52.827

在这里，您必须放眼全球。

**Step.1**：制作一个视图文件：display.php，其中包含：

```
 <div id = "main">
        <div id = "header">
            [load header file here]
        </div>
<?php
        if(validation_errors() != '') {
?>
            <div id = "error">
                <?=validation_errors()?>
            </div>
<?php
        }
?>
        <div id = "content">
            <?=$page?>
        </div>
        <div id = "footer">
            [load footer file here]
        </div>
    </div> 
```

**Step.2** : About us Page.(控制器)

....您的数据....

在控制器功能结束时

```
 $data['page'] = 'aboutus';
    $this->load->view('display',$data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T23:11:53.207

这是一个完全有效的问题。我不是 PHP 专家，也不是 CI 专家，但事实是有时您想要发布到未创建您发布的视图的控制器。这意味着发回自身是行不通的。

我在 Ellislab 论坛上看到了这篇文章：http: [//ellislab.com/forums/viewthread/217176/](http://ellislab.com/forums/viewthread/217176/)

在此页面上，有 2 种方法可以解决此问题。两者都使用 flashdata 并且两者都是完全有效的，恕我直言。

第一种：创建辅助函数 [http://ellislab.com/forums/viewreply/1003010/](http://ellislab.com/forums/viewreply/1003010/)

第二种：扩展 CI_Form_Validation 类。 [http://ellislab.com/forums/viewreply/1047536/](http://ellislab.com/forums/viewreply/1047536/)

第二个是我走的路，因为它看起来最干净，尽管有些人可能会争论表单验证类是否应该知道关于闪存数据的任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:32:36.827

在[用户指南](http://codeigniter.com/user_guide/libraries/form_validation.html)中，有不同的方法来配置规则集/组。然后你可以简单地拥有类似的东西：

```
if ($this->form_validation->run('signup') == FALSE)
{
   $this->load->view('myform');
}
else
{
   $this->load->view('formsuccess');
} 
```

这将运行您的“注册”组验证。对我来说，这是实现可重用验证规则的最简洁方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T08:30:20.473

关于您对上述问题的评论，您可以使用[Flash 数据](http://codeigniter.com/user_guide/libraries/sessions.html)

假设您已加载会话库，这里有一个辅助函数。

```
function last_page($page = null){
    $ci = get_instance();
    if($page === null)
        return $ci->session->flashdata('last_page');
    $ci->session->set_flashdata('last_page', $page);
} 
```

然后你可以`last_page('about');`在 about 页面的顶部调用，然后当你想知道你所在的最后一页是什么时，你可以`last_page();`不带参数调用。

# apache - 重写从子域提供的根访问权限

> ID：10065884
> 
> 赞同：1
> 
> 时间：2012-04-08T19:45:01.740
> 
> 标签：apache, .htaccess, mod-rewrite

```
Options -Indexes
RewriteEngine on
Options +FollowSymLinks

RewriteRule ^$ 2012/index.php   [L]
RewriteCond %{DOCUMENT_ROOT}/2012%{REQUEST_URI} -f
RewriteRule .* 2012/$0 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* 2012/index.php$0 [QSA] #<-- this is wrong here, and gives 500 error 
```

我正在尝试从 2012 子文件夹中提供我所有的网址。

我尝试了上面的脚本，但它对于以下网址失败了：

`index.php/admin/controller/action?id=123`

应该从子文件夹中解决
`2012/index.php/admin/controller/action?id=123`

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:36:38.070

我猜测 URI`/index.php/admin/controller/action?id=123`未通过 -f 测试`%{DOCUMENT_ROOT}/2012%{REQUEST_URI}`，而是被最后一条规则： 取整`RewriteRule .* 2012/index.php?q=$0 [QSA]`，将 URI 转换为`/2012/index.php?q=index.php/admin/controller/action&id=123`. 您必须为此添加一个特殊情况，因为第一个条件/规则允许按原样重写现有文件，而最后一个条件/规则充当“包罗万象”（第一个规则很简单对于请求 URI 为 ) 的特殊情况`/`。尝试这样的事情：

```
RewriteRule ^$ 2012/index.php   [L]
RewriteCond %{REQUEST_URI} ^/index\.php [OR]
RewriteCond %{DOCUMENT_ROOT}/2012%{REQUEST_URI} -f
RewriteRule .* 2012/$0 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* 2012/index.php?q=$0 [QSA] 
```

`RewriteCond %{REQUEST_URI} ^/index\.php [OR]`如果发出请求，`/index.php`并且 URI 按原样重写到 /2012/ 目录中，则将满足新条件。**[OR]**确保遵循直接访问的先前条件。

# java - 将文本文件拆分为空行上的字符串

> ID：10065885
> 
> 赞同：8
> 
> 时间：2012-04-08T19:45:02.833
> 
> 标签：java, regex, split

我想读取一个本地 txt 文件并读取该文件中的文本。之后，我想将整个文本拆分为字符串，如下例所示。

示例：假设文件包含 -

```
 abcdef                                 
 ghijkl

 aededd               
 ededed

 ededfe
 efefeef
 efefeff

 ......
 ...... 
```

我想将此文本拆分为字符串

```
s1 = abcdef+"\n"+ghijkl;

s2 = aededd+"\n"+ededed; 

s3 = ededfe+"\n"+efefeef+"\n"+efefeff;

........................ 
```

我的意思是我想在空行上拆分文本。

我确实知道如何读取文件。我需要帮助将文本拆分为字符串

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T19:48:06.837

您可以通过以下方式将字符串拆分为数组

```
String.split(); 
```

如果你想要换行的话，那就是

```
String.split("\\n\\n"); 
```

**更新***

如果我明白你在说什么，那么约翰。

那么你的代码基本上是

```
BufferedReader in
   = new BufferedReader(new FileReader("foo.txt"));

List<String> allStrings = new ArrayList<String>();
String str ="";
while(true)
{
    String tmp = in.readLine();
    if(tmp.isEmpty())
    {
      if(!str.isEmpty())
      {
          allStrings.add(str);
      }
      str= "";
    }
    else if(tmp==null)
    {
        break;
    }
    else
    {
       if(str.isEmpty())
       {
           str = tmp;
       }
       else
       { 
           str += "\\n" + tmp;
       }
    }
} 
```

可能是您要解析的内容。

allStrings 是所有字符串的列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-11T14:13:33.580

我会建议更通用的正则表达式：

```
text.split("(?m)^\\s*$"); 
```

在这种情况下，它将在任何行尾约定上正常工作，并且还将处理相同的空行和仅空格行。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-08T20:11:16.243

即使有用数据之间有超过 2 个空行，下面的代码也可以工作。

```
import java.util.regex.*;

// read your file and store it in a string named str_file_data

Pattern p = Pattern.compile("\\n[\\n]+");     /*if your text file has \r\n as the newline character then use Pattern p = Pattern.compile("\\r\\n[\\r\\n]+");*/
String[] result = p.split(str_file_data); 
```

（我没有测试代码，所以可能有错别字。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-08T19:52:23.460

这可能取决于文件的编码方式，因此我可能会执行以下操作：

```
String.split("(\\n\\r|\\n|\\r){2}"); 
```

一些文本文件将换行符编码为“\n\r”，而其他文本文件可能只是“\n”。连续两个新行意味着您有一个空行。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-05T19:21:02.173

戈德温走在正确的轨道上，但我认为我们可以把这项工作做得更好一点。在 regx 中使用 '[ ]' 是一个或，所以在他的例子中，如果你有一个 \r\n ，那将只是一个新行而不是一个空行。正则表达式会在 \r 和 \n 上拆分它，我相信在示例中我们正在寻找一个空行，它需要一个 \n\r\n\r，一个 \r\n\ r\n、\n\r\r\n、\r\n\n\r、\n\n 或 \r\r

所以首先我们要查找 \n\r 或 \r\n 两次，两者的任意组合都是可能的。

```
String.split(((\\n\\r)|(\\r\\n)){2})); 
```

接下来我们需要寻找 \r 后面没有 \n

```
String.split(\\r{2}); 
```

最后，让我们对 \n 做同样的事情

```
String.split(\\n{2}); 
```

所有这些都应该是

`String.split("((\\n\\r)|(\\r\\n)){2}|(\\r){2}|(\\n){2}");`

请注意，这仅适用于使用新行和字符返回的非常具体的示例。我在 ruby​​ 中可以执行以下操作，这将包含更多案例。我不知道Java中是否有等价物。

```
.match($^$) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-06T14:51:26.933

@Kevin 代码工作正常，正如他提到的代码未经测试，这里是需要的 3 处更改：

1.if check for **(tmp==null)**应该先来，否则会出现空指针异常。

2.此代码省略了添加到 ArrayList 的最后一组行。为了确保添加最后一个，我们必须在 while 循环之后包含以下代码：**if(!str.isEmpty()) { allStrings.add(str); }**

3.行**str += "\n" + tmp**；如果**\\n**则应改为使用**\** n 。请看这个线程的结尾，我已经添加了整个代码以便它可以提供帮助

 **```
BufferedReader in
   = new BufferedReader(new FileReader("foo.txt"));

List<String> allStrings = new ArrayList<String>();
String str ="";
List<String> allStrings = new ArrayList<String>();
        String str ="";
        while(true)
        {
            String tmp = in.readLine();
            if(tmp==null)
            {
                break;
            }else if(tmp.isEmpty())
            {
                if(!str.isEmpty())
                {
                    allStrings.add(str);
                }
                str= "";
            }else
            {
                if(str.isEmpty())
                {
                    str = tmp;
                }
                else
                {
                    str += "\n" + tmp;
                }
            }

        }
        if(!str.isEmpty())
        {
            allStrings.add(str);
        } 
```**

# javascript - 代码在 HTML 页面中有效，但在 Wordpress 帖子中无效

> ID：10065886
> 
> 赞同：0
> 
> 时间：2012-04-08T19:45:04.437
> 
> 标签：javascript, html, css, wordpress

首先，这是我使用的代码。

```
<div class="wrapper">
<div id="carousel">
<ul>
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/images/umbrella_trials.jpg" alt="" /><a class="video" title="The Umbrella Trails" href="http://www.youtube.com/v/eiBEvtNNSxg?fs=1&amp;autoplay=1">The Umbrella Trails</a></li>
</ul>
</ul>
&nbsp;
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/images/stagnant_day.jpg" alt="" /><a class="video" title="Stagnant Day" href="http://www.youtube.com/v/x3r5vblNAtw?fs=1&amp;autoplay=1">Stagnant Day</a></li>
</ul>
&nbsp;

&nbsp;
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/images/job3a_trailer2.jpg" alt="" /><a class="video" title="Job3(a) Trailer #2" href="http://www.youtube.com/v/setjOKfzNHY?fs=1&amp;autoplay=1">Job3(a) Trailer #2</a></li>
</ul>
&nbsp;

&nbsp;
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/images/job3a_trailer3.jpg" alt="" /><a class="video" title="Job3(a) Trailer #3" href="http://www.youtube.com/v/ijkEfmMNr5Q?fs=1&amp;autoplay=1">Job3(a) Trailer #3</a></li>
</ul>
&nbsp;

&nbsp;
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/images/TNaTFiTC.jpg" alt="" /><a class="video" title="Fables from the Mersey - 'The Ninja and The Fella in the Cellar'" href="http://www.youtube.com/v/OdFCo1MmgTI?fs=1&amp;autoplay=1">"The Ninja and The Fella in the Cellar"</a></li>
</ul>
&nbsp;

&nbsp;
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/images/job3a_trailer1.jpg" alt="" /><a class="video" title="Job3(a) Trailer #1" href="http://www.youtube.com/v/3pQUX6VkPTQ?fs=1&amp;autoplay=1">"Job3(a) Trailer #1"</a></li>
</ul>
&nbsp;

&nbsp;
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/images/opening_credits.jpg" alt="" /><a class="video" title="Opening Credits for &quot;It's Liverpool&quot;" href="http://www.youtube.com/v/6a19T8syH60?fs=1&amp;autoplay=1">"Opening Credits for "It's Liverpool""</a></li>
</ul>
&nbsp;

&nbsp;
<ul>
    <li><img src="<?php bloginfo('template_directory'); ?>/images/1-24.jpg" alt="" /><a class="video" title="It's Liverpool 1-24" href="http://www.youtube.com/v/7r9N-dq1KEE?fs=1&amp;autoplay=1">"It's Liverpool 1-24"</a></li>
</ul>
&nbsp;

&nbsp;
<div class="clearfix"></div>
<a id="prev" class="prev" href="#">&lt;</a>
<a id="next" class="next" href="#">&gt;</a>
<div id="pager" class="pager"></div>
</div>
</div>
<div id="line1"></div>
<div class="paraWrapper">
<div class="span3">
<h2 class="heading">Heading</h2>
Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.

<a class="btn" href="#">View details »</a>

</div>
<div class="span3">
<h2 class="heading">Heading</h2>
Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.

<a class="btn" href="#">View details »</a>

</div>
<div class="social_icons span2"><a class="btn" href="#">
<em class="icon-twitter-sign icon-large"></em> Follow us on Twitter</a><a class="btn" href="#">
<em class="icon-facebook-sign icon-large"></em> Find us on Facebook</a>

<a class="btn" href="#">
<em class="icon-facetime-video icon-large"></em> Subscribe on Youtube</a>

</div>
</div>
<div id="line2"></div> 
```

如果我将其粘贴到一个简单的 HTML 页面中（取出特定的 php 代码），它可以正常工作（以及所需的 Javascript）。

但是，如果我将其粘贴到 Wordpress 主题中，我会尝试从中构建。它不会工作..

我什至尝试将代码直接粘贴到我的`page.php`文件中，虽然它确实有效。这不是我想要的，因为它需要轻松访问它的内容。

我的 wordpresve 尝试安装 Raw-HTML 插件，但没有任何区别。

我正在使用最新版本的 Wordpress (3.3.1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:49:59.467

您在代码中使用 php。出于安全原因，Wordpress 必须通过删除 php 来清理您的帖子。我不认为你可以把 php 放在你的帖子中。您需要修改您的 wordpress 以在帖子中支持 php，但这并不容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T18:13:35.733

您可以尝试使用简码通过将绝对 /path/ 写入模板文件夹的简码来切换？

# prolog - 如果语句仅在第一步起作用，为什么会这样

> ID：10065887
> 
> 赞同：0
> 
> 时间：2012-04-08T19:45:15.687
> 
> 标签：prolog

```
calculateSum(_, _List, _Row, _Col, []).
    calculateSum([M|Rest],List,Row,Col,[Y|Tail]):-
    Col == Row -> Col1 is Col + 1,calculateSum(List,List,Row1,Col1,Tail); 
    calcHeu(Rest,L),
    sum(L,S),
    index(List, Row, Col, V),
    Y is V + S,
    %Row1 is Row + 1,
     Col1 is Col + 1,
    calculateSum(List,List,Row1,Col1,Tail). 
```

为什么这个 Col == Row if 语句不起作用。有没有其他方法可以让如果 Row == Col 跳过该步骤？

## 编辑

通过做这样的事情。

```
(Col \= Row ->
calcHeu(Rest,L),
sum(L,S),
index(List, Row, Col, V),
Y is V + S,
Col1 is Col + 1,
calculateSum(List,List,Row1,Col1,Tail)
;
Col1 is Col + 1,calculateSum(List,List,Row1,Col1,Tail)
). 
```

它无限地打印出 [22, *,* ,_......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T22:53:34.953

如果不知道你的代码应该做什么以及它得到什么输入，这有点难以判断，但你绝对可以将你的 if-then-else 语句分成两条规则（无论如何我认为这更可取：尝试尽量避免使用“;”）。

试试这个（请注意，我已经在递归调用“Rest”中更改了“List”的第一次出现，因为我认为这就是你想要的）：

```
calculateSum(_, _List, _Row, _Col, []).
calculateSum([_M|Rest],List,Row,Row,[_Y|Tail]):-
    !,
    Col1 is Col + 1,
    calculateSum(Rest,List,Row1,Col1,Tail).

calculateSum([M|Rest],List,Row,Col,[Y|Tail]):-
    calcHeu(Rest,L),
    sum(L,S),
    index(List, Row, Col, V),
    Y is V + S,
    Col1 is Col + 1,
    calculateSum(Rest,List,Row1,Col1,Tail). 
```

# c# - 添加或加倍时控件不显示

> ID：10065888
> 
> 赞同：1
> 
> 时间：2012-04-08T19:45:20.400
> 
> 标签：c#, asp.net

我有两个用于输入商品名称和价格的文本框，下方有一个提交按钮，下方有一个显示当前商品的项目符号列表。单击提交按钮时，应在项目列表中输入新项目，并用新项目刷新项目符号列表。

但是发生的情况是，如果我将生成项目符号列表的代码放在 OnInit 中，那么该列表不会在第一次回发时刷新。如果我将它放在 Page_Load 中，那么该列表只会在每次回发时复制自身。我应该把它放在哪里，我做错了什么？

这是我的代码。

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);

    List<Product> Products = (List<Product>)Session["Products"];
    foreach (Product p in Products)
    {
        ListItem productname = new ListItem();
        productname.Text = p.name;
        blProducts.Items.Add(productname);
    }

} 
```

下面是提交按钮的代码：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    List<Product> Products = (List<Product>)Session["Products"];
    string name = txtName.Text;
    decimal price = decimal.Parse(txtPrice.Text);
    Product p = new Product(name, price);
    Products.Add(p);
    Session["Products"] = Products;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:52:32.103

buttonclick 的回发发生在 init 之后，因此您的事件顺序是：

1.  初始化为产品添加 1 个列表项
2.  发生按钮单击，添加到产品。

由于产品是在添加新项目之前枚举的，因此它不会反映在您的页面上。

[Asp.Net 页面生命周期概述](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

您可以将初始化代码移动到预渲染，因为这是处理回发后的第一个事件。它可能会加倍，因为您永远不会清除该项目列表，我相信这些项目列表存储在 ViewState 中，因此每次调用 init（每个请求）时，您都会`Products`再次添加所有内容。您也可以将该部分包装在 an 中`if(!Page.IsPostBack)`并直接添加到列表和单击按钮中的会话，但修复逻辑可能比复制添加代码更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:59:41.153

做

Page.IsPostBack == 假。

采用：

```
page_load {
if(!Page.IsPostback)
  CalltheLoadFunction

}

on_click {
_adds the stuff.
CalltheLoadFunction() //again
}

CalltheLoadFunction() {
 dropdown.clear().
 dropdown.datasource = datasource
 dropddown.databind()
} 
```

I wouldn't use Init. I use Page_load (ispostback false) in that function. After the button click, call the refresh data function again. You should check ispostback on the page load function all the time. Make sure it is false so that it doesn't load again.

# java - 通过 http 寻找 api/protocol

> ID：10065889
> 
> 赞同：0
> 
> 时间：2012-04-08T19:45:24.493
> 
> 标签：java, http, frameworks, jaxb, protocols

我想在我拥有的几个组件之间设计一个协议。每个都可以在不同主机上的单独进程中运行。总是有一个发起者（客户端）和响应者（服务器）。客户端可能使用多种语言 java/c#/c++/cli。在我的情况下，服务器总是在 java 中。
所以我想到了以下属性：

*   它应该是纯文本的，因此很容易调试。
*   它应该允许从一侧无缝升级（这意味着没有类序列化和严格的方法签名）。
*   如果它是一个框架，那么 in 应该很薄（WSDL 看起来对我的需求来说太多了）。

我想在 tcp 上使用 http。
我主要对语法感兴趣，以及 java 中是否存在已经提供此类功能的框架。我依稀记得里面有类似的东西`Spring`。

**编辑**：我更喜欢瘦框架，而且我担心在 RPC 中更改方法签名会导致竞争力问题。
我找到[了这个例子](http://jaxb.java.net/guide/Designing_a_client_server_protocol_in_XML.html)，它可能满足我的需求，因为我已经在使用`jaxb`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T20:14:12.673

您可以查看 REST/ful 服务：

*   [http://www.oracle.com/technetwork/articles/javase/index-137171.html](http://www.oracle.com/technetwork/articles/javase/index-137171.html)

链接的文章还讨论了一些准则，什么时候 SOAP 和什么时候 REST 更适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:01:17.490

我会选择[SOAP](http://en.wikipedia.org/wiki/SOAP)。虽然不是最简单的，但几乎所有语言/平台组合都有各种库，而且它非常可扩展。也可能建议使用 XML-RPC，但 SOAP 是它的继任者，所以我建议不要使用 XML-RPC。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T19:53:14.857

我会选择 WSDL。它实际上是为了在用各种语言编写的组件之间建立远程通信。很长时间以来，我一直在 C#、PHP、C++、Python 和 Java 的繁重负载下使用它，它很棒。基本上，您所要做的就是实际设计一个真正的协议，而 WSDL 本身并不是该协议 - 在这种情况下，协议将是 WSDL 顶部的命令集，例如 Hello Command（某种 ping），登录和注销命令（用于会话），然后是您需要的各种东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T19:56:30.467

您可以停留在 TCP 级别并使用诸如[zeromq](http://www.zeromq.org/)之类的智能库来处理所有接线。协议本身就是一组消息，可以根据您的要求进行调整（与传输基础设施未预先确定的 WSDL 一样）。

示例（我挑战 WebService 支持者在他们的答案中提供示例；）

服务器（为简洁起见是python）：

```
import zmq
ctx = zmq.Context()
socket = ctx.socket(zmq.REP)
socket.bind('tcp://0.0.0.0:12345')
while True:
    message = socket.recv()
    # 'status' and 'shutdown server' would be part of your protocol
    if message == "status":
        socket.send("I'm ok")
    elif message == "shutdown server":
        socket.send("Ok, bye bye")
        break
    # implement your other commands here ...
socket.close() 
```

一个客户：

```
import zmq
ctx = zmq.Context()
socket = ctx.socket(zmq.REQ)
socket.connect('tcp://localhost:12345')
socket.send('shutdown server')
reply = socket.recv()
print(reply) 
```

而已。是的，zeromq 带有 30 多种语言绑定。

# sql - 在 Postgresql 中计算日期的差异

> ID：10065894
> 
> 赞同：11
> 
> 时间：2012-04-08T19:45:47.060
> 
> 标签：sql, postgresql, datediff

我试图找出表格中某些字段之间的时间。但是因为我使用的是 Postgresql **:((**我不能使用 DATEDIFF 函数。我在网上找不到任何明确的指南/教程，它显示了如何在 Postgres 中做类似的事情，所以我需要帮助做同样的事情但在 Postgres

如果我使用支持 DATEDIFF 函数的 RDBMS，我假设这个查询会起作用，所以基本上我的问题是如何更改它以便它使用 Postgresql 提供的功能工作？

```
SELECT Question.ID, 
Question.Status, COUNT (qUpdate.ID)  AS NumberofUpdates,
DATEDIFF (Question.LoggedTime,MIN(qUpdate.UpdateTime)) AS TimeBeforeFirstUpdate,
DATEDIFF(Question.LoggedTime, MAX(qUpdate.UpdateTime)) AS TimeBeforeLastUpdate
FROM qUpdate
LEFT JOIN Question ON qUpdate.qID=Question.ID
WHERE Question.Status = 'closed' AND qUpdate.Update NOT NULL
GROUP BY Question.Status, Question.ID, Question.LoggedTime; 
```

如果您需要更多信息或任何澄清，我会尽快回复。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T19:47:49.687

您不需要“datediff”功能。

只需减去两个日期：

```
Question.LoggedTime - MIN(qUpdate.UpdateTime) 
```

如果您不知道，但所有这些都在线记录：
[http ://www.postgresql.org/docs/current/static/functions-datetime.html](http://www.postgresql.org/docs/current/static/functions-datetime.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T19:54:10.467

您可以使用该`age(<date1>, <date2>)`功能（而不是`DATEDIFF`）。

这应该工作 -

```
SELECT Question.ID, 
Question.Status, COUNT (qUpdate.ID)  AS NumberofUpdates,
age(Question.LoggedTime,MIN(qUpdate.UpdateTime)) AS TimeBeforeFirstUpdate,
age(Question.LoggedTime, MAX(qUpdate.UpdateTime)) AS TimeBeforeLastUpdate
FROM qUpdate
LEFT JOIN Question ON qUpdate.qID=Question.ID
WHERE Question.Status = 'closed' AND qUpdate.Update NOT NULL
GROUP BY Question.Status, Question.ID, Question.LoggedTime; 
```

注意，如果 psql 给你这个错误 - `ERROR: date/time field value out of range`，那么你需要选择一个合适的`datestyle`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-23T13:22:51.860

```
SELECT extract(year from age('2014-01-23', '1985-08-27'));
-- returns 28 years, my current age. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-12T21:56:39.490

这会给你以秒为单位的时间差异：

```
select extract(epoch from to_date::timestamp - from_date::timestamp) 
```

# qt - Qt中带逗号的数字

> ID：10065895
> 
> 赞同：1
> 
> 时间：2012-04-08T19:45:47.860
> 
> 标签：qt, qt4, qstring

`QString`我尝试从using方法中获取浮点数，`toFloat()`但我获取`0`的每个数字都得到了。我认为数字格式错误并且系统无法识别它，我该如何为这些数字设置正确的格式：`119,68648`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T19:56:49.643

请参阅[http://qt-project.org/doc/qt-4.8/qlocale.html#toDouble](http://qt-project.org/doc/qt-4.8/qlocale.html#toDouble)

以下是文档中的示例代码：

```
bool ok;
double d;

QLocale german(QLocale::German);
d = german.toDouble( "1234,56", &ok );  // ok == true, d == 1234.56
d = german.toDouble( "1.234,56", &ok ); // ok == true, d == 1234.56
d = german.toDouble( "1234.56", &ok );  // ok == false

d = german.toDouble( "1.234", &ok );    // ok == true, d == 1234.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:49:48.243

您可以为应用程序设置小数分隔符为逗号的语言环境。

或者，您可以在进行转换之前用点替换逗号，以便能够接受这两种数字格式。

```
float value = yourString.replace(",", ".").toFloat(); 
```

# iphone - 在 View Controller 中引用自定义视图时出错

> ID：10065897
> 
> 赞同：1
> 
> 时间：2012-04-08T19:46:01.477
> 
> 标签：iphone, ios

我已经为 Interface Builder 中的 View Controller 分配了一个自定义视图类。View Controller 中“view”的引用出口是有效的“CustomView”，并且 Interface Builder 中的视图对象已被分配了一个自定义类“CustomView”。但是，当我尝试在我的视图控制器中引用“CustomView”的特定属性时，通过它的“view”属性，我得到了错误。我认为这是因为它仍然相信它是一个 UIView 类，而不是我的“CustomView”类。

有没有办法更新视图控制器的“视图”类定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:53:23.243

如果您确定有一个与“视图”链接的 CustomView 对象，请使用强制转换为编译器提供提示，例如：

```
[(CustomView *)view doSomething]; 
```

或者

```
((CustomView *)view).stringProperty = @"Hello"; 
```

如果您希望它是安全的，请在调用之前检查它是否`view`确实是 CustomView 类的成员。

# php - 500 内部服务器错误 - 所有 Ajax 调用，PHP

> ID：10065898
> 
> 赞同：3
> 
> 时间：2012-04-08T19:46:17.340
> 
> 标签：php, ajax, internal

**问题**

我在本地主机 (WAMP) 上开发的站点上的所有 AJAX 调用都收到相同的错误（500 内部服务器错误）。我开始认为这可能是我的服务器的设置方式。也许我错过了 PHP 扩展或什么？任何帮助将非常感激。

**测试**

我知道代码工作正常，因为我已经导航到浏览器上的 ajax 操作。此外，代码实际上将数据保存到数据库中，因此我知道它正在找到正确的脚本并正常运行。

**代码**

我已经简化了代码以使测试更容易。

**JS**

```
 $.ajax({type: 'GET',
        url: '/cms/performances/deleteperformance',
        data: 'id=' + id,
        dataType: 'json',
        success: function(result)
        {
            switch(result)
            {
                case 1:
                    //Refresh the page
                    location.reload();
                    break;
                case 0:
                    alert('error');
                    break;
                case 2:
                    alert('Incorrect call');
                    break;
                default:
                    alert('default');
                    break;
            }
        },
        error: function(xhr, ajaxOptions, thrownError)
        {
            var httpCode = xhr.status;
            alert(httpCode + ': ' + thrownError);
        }
    }); 
```

**PHP**

```
public function deleteperformanceAction()
{
    $this->_helper->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true);
    echo json_encode(1);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-08T19:49:24.917

在 PHP 的顶部添加以下代码：

```
ini_set('display_errors', 1); 
error_reporting(E_ALL); 
```

这将向您展示您的 PHP 代码中的问题所在。如果是语法错误（代码 500 似乎很可能），那么您需要在您的`php.ini`,`httpd.conf`或`.htaccess`文件中启用这些选项。或者，只需在您的 Web 服务器错误日志中查看该问题。

500 错误不是您的 JS 的问题 - 它是服务器端的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-21T17:46:52.903

我终于明白了这一点。事实上，代码没有任何问题。但是，我确实有一个在引导过程中没有找到的插件。然后通过我的错误处理程序运行，该处理程序将标题更改为 500。一旦我删除了未找到的插件，一切都很好。

我想这是愚蠢的错误！

# java - Java中的对象集合和垃圾收集器的单例

> ID：10065902
> 
> 赞同：1
> 
> 时间：2012-04-08T19:46:24.647
> 
> 标签：java

我正在使用单例在运行时授予每个对象的唯一副本：

```
Car object1= CarFactory.createCar(id); 
```

其中 createCar 方法是：

```
private static ArrayList<Car> cars= new ArrayList<Car>();

public static synchronized Car createCar(int id){
   Car result= new Car(id);
   int index= cars.indexOf(result);
   if (index==-1){
      cars.add(result);
      return result;
   } else {
      return cars.get(index);
   }
} 
```

问题是，使用这种方法，由于“汽车”集合，每辆汽车总是有一个引用，并且对象的内存永远不会被释放。我该如何改进它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:51:16.707

[`WeakReference`](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/WeakReference.html)在将对象放入列表之前，使用 a包装对象。例子：

```
private static List<WeakReference<Car>> cars = new ArrayList<WeakReference<Car>>();

public static synchronized Car createCar(int id) {
   WeakReference<Car> result= new WeakReference<Car>(new Car(id));
   int index= cars.indexOf(result);
   if (index==-1){
      cars.add(result);
      return result.get();
   } else {
      return cars.get(index).get();
   }
} 
```

注意：这不是生产代码。在使用它之前，您必须建立更多的保护措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:52:44.873

我*想*你可以保留一个[`WeakReference`](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)s 的列表。弱引用不足以防止对象被垃圾收集。

前任：

```
 List<WeakReference<Point>> list = new ArrayList<>();
    Point p = new Point();
    list.add(new WeakReference<>(p));
    System.out.println(p);
    System.out.println(list.get(0).get());

    p = null;

    System.gc();
    System.gc();
    System.gc();
    System.gc(); // hopefully the GC collects p by now

    System.out.println(list.get(0).get()); // null! 
```

但是，除非您要创建大量`Car`s 并且内存*实际上是*一个问题，否则可能不值得麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T20:04:42.407

这有点像黑客，但你可以使用

```
WeakHashMap<Car,WeakReference<Car>> cars=new WeakHashMap<Car,WeakReference<Car>>();

public static synchronized Car createCar(int id){
   Car result= new Car(id);
   WeakReference<Car> weakCar=cars.get(result);
   if(weakCar==null){
       cars.put(new WeakReference(result));
       return result;
   }
   Car val= weakCar.get();
   if (val==null){//it may have been collected between cars.get() and weakCar.get()
      cars.put(new WeakReference(result));
      return result;
   } else {
      return val;
   }
} 
```

请注意，您需要弱引用作为值，因为该值被认为是强引用

# c++ - Winsock recv 与 Detours 挂钩

> ID：10065903
> 
> 赞同：4
> 
> 时间：2012-04-08T19:46:29.913
> 
> 标签：c++, winapi, hook, dll-injection

我有一个应用程序，它使用 Winsock 2.0`recv`功能，例如，我可以通过 Redox Packet Editor 捕获输出，它确认版本是 2.0。

我有这个代码来挂钩函数：

```
#define _CRT_SECURE_NO_DEPRECATE
#ifndef WIN32_LEAN_AND_MEAN
#define WIN32_LEAN_AND_MEAN
#endif

#include <windows.h>
#include <WinSock2.h>
#include <detours.h>
#include <stdio.h>
#pragma comment(lib, "ws2_32.lib")

FILE *pSendLogFile;
FILE *pRecvLogFile;

int (WINAPI *pSend)(SOCKET s, const char* buf, int len, int flags) = send;
int WINAPI MySend(SOCKET s, const char* buf, int len, int flags);
int (WINAPI *pRecv)(SOCKET s, char *buf, int len, int flags) = recv;
int WINAPI MyRecv(SOCKET s, char* buf, int len, int flags);

INT APIENTRY DllMain(HMODULE hDLL, DWORD Reason, LPVOID Reserved)
{
    switch(Reason)
    {
        case DLL_PROCESS_ATTACH:
            DisableThreadLibraryCalls(hDLL);

            DetourTransactionBegin();
            DetourUpdateThread(GetCurrentThread());
            DetourAttach(&(PVOID&)pSend, MySend);
            if(DetourTransactionCommit() == NO_ERROR)
                MessageBox(0,"send() detoured successfully","asd",MB_OK);

            DetourTransactionBegin();
            DetourUpdateThread(GetCurrentThread());
            DetourAttach(&(PVOID&)pRecv, MyRecv);
            if(DetourTransactionCommit() == NO_ERROR)
                MessageBox(0,"recv() detoured successfully","asd",MB_OK);
            break;

    case DLL_PROCESS_DETACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
        break;
    }
    return TRUE;
}

int WINAPI MySend(SOCKET s, const char* buf, int len, int flags)
{
    MessageBox(0,"sent","sent",MB_OK);
    return pSend(s, buf, len, flags);
}

int WINAPI MyRecv(SOCKET s, char* buf, int len, int flags)
{
    MessageBox(0,"recvd","recvd",MB_OK);
    return pRecv(s, buf, len, flags);
} 
```

对于`send`，一切正常，但我没有得到任何输出`recv`。我在另一个使用 1.1 版本的 Winsock 的应用程序中尝试过，它工作正常。试图挂钩 WSARecv，WSARecvEx 没有任何运气。

用 WinAPIOverride32 检查了应用程序，它清楚地表明它正在使用`recv`函数，并成功记录了使用情况。Winsock Packet Editor 也能很好地读取数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T22:46:30.363

你确定你挂的是正确的dll吗？我会仔细检查程序实际使用了哪个 dll：WSOCK32.dll 或 ws2_32.dll。

**编辑：**

也许尝试这样的事情：

```
typedef int (WINAPI *SendPtr)(SOCKET s, const char* buf, int len, int flags);
HMODULE hLib = LoadLibrary("wsock32.dll");
SendPtr pSend = (SendPtr)GetProcAddress(hLib, "send"); 
```

然后使用`pSend`该值（recv 也是如此）。最后不要忘记调用 FreeLibrary。如果您确定 dll 已经加载，那么使用它可能会更好，`GetModuleHandle("wsock32.dll")`因为在这种情况下您不必调用 FreeLibrary。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:08:42.417

你的问题源于试图写出一个空的（甚至是未初始化的缓冲区）：

```
int WINAPI MyRecv(SOCKET s, char* buf, int len, int flags)
{
    fopen_s(&pRecvLogFile, "C:\\RecvLog.txt", "a+");
    fprintf(pRecvLogFile, "%s\n", buf);
    fclose(pRecvLogFile);
    return pRecv(s, buf, len, flags); //you need to call recv first
} 
```

而是做这样的事情：

```
int WINAPI MyRecv(SOCKET s, char* buf, int len, int flags)
{
    int read = pRecv(s, buf, len, flags);
    if(read <= 0)
    {
        //read error/connection closed
        return read;
    }

    fopen_s(&pRecvLogFile, "C:\\RecvLog.txt", "a+");
    fwrite(buf,sizeof(char),read,pRecvLogFile);
    fclose(pRecvLogFile);
    return read;
} 
```

作为次要问题，您似乎假设发送或接收的数据纯粹基于字符串，但通常数据包可能在这里和那里包含零字节，这会过早结束`fprintf`输出，您应该`fwrite`改为使用，传递发送/接收大小（这也意味着以二进制模式打开文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:35:07.573

我认为您当然应该使用 GetProcAddress 来获取要挂钩的地址。

就像是：

`int (WINAPI *pRecv)(SOCKET s, char *buf, int len, int flags) = GetProcAddress(GetModuleHandle("ws2_32.dll"), "recv");`

编译器可能会想出从你的“recv”到加载了 dll 的各种野路由。所以这两个地址可能会有所不同。要测试是否是这种情况，只需使用 dll 中的 recv 即可。

您可能还想关注 ReadFile/WriteFile。

并且还期望挂钩是不可靠的。例如，目标可以随意移除钩子并做更多事情。

# php - jquery验证在php中不起作用

> ID：10065904
> 
> 赞同：-2
> 
> 时间：2012-04-08T19:46:33.277
> 
> 标签：php, jquery-validate

好的，它确实在 PHP 中工作，但如果我修改文件，使我的 index.php 看起来像这样

```
<?php

include('header');
include('main_content');
include('footer');

?> 
```

然后它不起作用。

这是我渲染的 hmtl (firefox)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=MacRoman">
<title>This is a test page</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
<script type="text/javascript" src="js/jquery.validate.js"></script>
<script src="js/jquery.min.js" ></script>
<script src="js/main.js" ></script>
<LINK href="css/other1.css" rel="stylesheet" type="text/css">
<LINK href="css/other2.css" rel="stylesheet" type="text/css">
<LINK href="css/gallery.css" rel="stylesheet" type="text/css">
<LINK href="css/min_jquery.css" rel="stylesheet" type="text/css">
<LINK href="css/minified.css" rel="stylesheet" type="text/css">

</head>
    <body>

<!-- This is the form ---------->

<form id="form1" method="post" action="jquery_form.php">
      <div class="form-row"><span class="label">Name *</span><input type="text" name="name" /></div>
      <div class="form-row"><span class="label">E-Mail *</span><input type="text" name="email" /></div>
      <div class="form-row"><span class="label">URL</span><input type="text" name="url" /></div>
      <div class="form-row"><span class="label">Your comment *</span><textarea name="comment" ></textarea></div>
      <div class="form-row"><input class="submit" type="submit" value="Submit"></div>
    </form>

<!-- this is the jQuery validation ----------->

</div></div></body>

</html><script type="text/javascript">
    $(document).ready(function() {
      $("#form1").validate({
        rules: {
          name: "required",// simple rule, converted to {required:true}
          email: {// compound rule
          required: true,
          email: true
        },
        url: {
          url: true
        },
        comment: {
          required: true
        }
        },
        messages: {
          comment: "Please enter a comment."
        },
        errorPlacement: function (error, element) {
                    element.css('background', '#ffdddd');
                }
      });
    $("#form2").validate({
    rules:{
        name2:"required",
        pass: "required"
    }
})
    });
  </script> 
```

有什么问题？我知道如果它不是第一个包含，则查询验证不起作用。但它是标题中的第一个包含。并且呈现的 HTML 看起来不错。该文件位于 js 文件夹中。

我在这上面花了几个小时。

## 此代码有效

这是另一个有效的 html 页面的渲染代码。如果验证失败，jQuery 将不会提交表单。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
  <title>Simple Form Validation</title>
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
  <script type="text/javascript" src="js/jquery.validate.js"></script>

  <style type="text/css">
    * { font-family: Verdana; font-size: 11px; line-height: 14px; }
    .submit { margin-left: 125px; margin-top: 10px;}
    .label { display: block; float: left; width: 120px; text-align: right; margin-right: 5px; }
    .form-row { padding: 5px 0; clear: both; width: 700px; }
    label.error { width: 250px; display: block; float: left; color: red; padding-left: 10px; }
    input[type=text], textarea { width: 250px; float: left; }
    textarea { height: 50px; }
  </style>
  </head>
  <body>
    <form id="form1" method="post" action="jquery.php">
      <div class="form-row"><span class="label">Name *</span><input type="text" name="name" /></div>
      <div class="form-row"><span class="label">E-Mail *</span><input type="text" name="email" /></div>
      <div class="form-row"><span class="label">URL</span><input type="text" name="url" /></div>
      <div class="form-row"><span class="label">Your comment *</span><textarea name="comment" ></textarea></div>
      <div class="form-row"><input class="submit" type="submit" value="Submit"></div>
    </form>
<p>
<hr>

  </body>
</html>
<script type="text/javascript">
    $(document).ready(function() {
      $("#form1").validate({
        rules: {
          name: "required",// simple rule, converted to {required:true}
          email: {// compound rule
          required: true,
          email: true
        },
        url: {
          url: true
        },
        comment: {
          required: true
        }
        },
        messages: {
          comment: "Please enter a comment."
        },
        errorPlacement: function (error, element) {
                    element.css('background', '#ffdddd');
                }
      });
    $("#form2").validate({
    rules:{
        name2:"required",
        pass: "required"
    }
})
    });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:02:36.787

您已包含 jquery 两次，删除最后一个。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>  
<script type="text/javascript" src="js/jquery.validate.js"></script> 
<!--  <script src="js/jquery.min.js" ></script>  --/> 
```

此外，除了名称之外，您可能还想在表单字段上使用“id”属性。名称被传递给服务器，而 id 通常与 javascript 一起使用。

并将您的最后一个脚本移动到 body 标签或 head 标签内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:53:13.023

一个疯狂的猜测，但尝试`<script>`在结束`</body>`标记之前移动块。目前尚不清楚哪个包含的文件包含什么，但结束`</body>`标记之后不应出现任何内容。

# scaffolding - 我可以修改 CakePHP 中的脚手架，使其不会显示表中的所有字段吗？

> ID：10065913
> 
> 赞同：0
> 
> 时间：2012-04-08T19:47:17.953
> 
> 标签：scaffolding

脚手架就像魔术一样工作。但是，我的表中有一些字段确实需要编辑。如何自定义 $scaffold 以便我不会手动创建用于编辑表格的视图。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:00:43.897

[来自于脚手架](http://book.cakephp.org/2.0/en/controllers/scaffolding.html)的 CakePHP 手册：

> [脚手架]是一个松散的结构，你在项目开始时很快就搭建起来，以便开始。它并不意味着完全灵活，它意味着作为一种临时起床和前进的方式。如果你发现自己真的想定制你的逻辑和视图，是时候放下你的脚手架来写一些代码了。

您可以做的是`cake bake`在命令行上使用来创建基本视图，然后您可以根据您的特定需求对其进行修改。

# jquery - 使用 Colorbox 在 iframe 之外显示图像

> ID：10065915
> 
> 赞同：0
> 
> 时间：2012-04-08T19:47:32.133
> 
> 标签：jquery, iframe, parent, colorbox

请参阅我正在使用的示例代码：http: [//www.christoffah.com/kk/gallery.php](http://www.christoffah.com/kk/gallery.php)

红色和黄色 DIV 包含 iframe。单击黄色 DIV 中的文本链接会加载彩盒照片，但会将其加载到 iframe 中。目标父级会自行打开图像，也就是说，如果您输入了 jpg 图像的 URL，就会发生同样的事情。有没有办法让图像加载到整个网页的顶部？

我使用 iframe 的原因是因为我正在处理的网站需要两个不同的画廊，每个画廊都包含许多专辑，我认为 iframe 将是用户独立浏览画廊的好方法——如果有更有效的我愿意接受建议！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T10:13:13.563

首先，我没有看到带有链接的第二个 iframe 的必要性。

您需要使用 javascript 进行链接，因为 target 属性不提供诸如父目标之类的想法。有关详细信息，请参阅 Javascript`window.parent`对象或特别是`window.parent.frames[...].location`属性。

然而，从 SEO 的角度来看，这不是很好。

编辑尝试：

```
<a ... onclick="parent.$.fn.colorbox({href: this.href}); return false;"> 
```

# ios - Using setNeedsDisplayInRect still erases the underlying content

> ID：10065919
> 
> 赞同：1
> 
> 时间：2012-04-08T19:48:01.583
> 
> 标签：ios, drawing, touch, quartz-2d

I've subclassed a UIView and overridden the touchesBegan, touchesMoved, touchesEnded, and drawRect methods to create an app that allows the user to draw by touching the screen. I'm using the Quartz 2D library to do the drawings.

In touchesBegan, touchesMoved, and touchesEnded, I keep track of the current and previous locations of the touch event. Each time the touch moves and when the touch ends, I call setNeedsDisplayInRect using the smallest rectangle that contains the previous and current location of the touch in order to preserve underlying drawings. (I want all drawings to add on to one another like layers.)

I've noticed a strange artifact: When creating a drawing that overlaps with another drawing, Quartz re-draws the rectangle passed into setNeedsDisplayInRect but erases everything below that rectangle.

I suspect that the issue is due to the blending mode, however I experimented with a number of different blending modes and none seemed to do the trick.

How do I draw a path that preserves the underlying content?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:12:45.680

Quartz 不是画布模型。它不跟踪以前循环中绘制的内容。每次`drawRect:`调用时，您有责任处理您传递的矩形中的每个像素。默认情况下（设置在 中`UIView clearsContextBeforeDrawing`），Quartz 会为您清除矩形，但每次都绘制内容是您的工作。

如果要对事物进行分层，则需要将每个事物放在自己的`CALayer`或`UIView`中，或者每次`drawRect:`调用时都需要重绘任何重叠。

# hibernate - 在 JBoss 上部署 Hibernate 应用程序时出错 - 找不到适用于 jdbc 的驱动程序

> ID：10065923
> 
> 赞同：2
> 
> 时间：2012-04-08T19:48:16.450
> 
> 标签：hibernate, jdbc, jboss

我有一个 Spring/Hibernate Web 应用程序（目前在 Tomcat 上运行良好），我正在尝试部署到 JBoss 7.1 AS。

应用程序都正确启动，但如果我设置 Hibernate Persistence 设置来创建表，那么我在启动时会出错。

我在 tomcat 上工作的持久性 XML 如下：

```
<persistence-unit name="persistenceUnit"
    transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
        <property name="hibernate.hbm2ddl.auto" value="create" />
        <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy" />
        <property name="hibernate.show_sql" value="false" />
    </properties>
</persistence-unit> 
```

当我将此 PU 移动到 JBoss 时，我开始收到错误消息，指出它无法连接到数据库：

```
20:41:18,312 ERROR [org.hibernate.tool.hbm2ddl.SchemaExport] (MSC service thread 1-5) HHH000231: Schema export unsuccessful: java.lang.UnsupportedOperationException: The application must supply JDBC connections 
```

我用谷歌搜索了一个建议，通过在持久性配置中添加休眠连接详细信息来如下更新我的 PU：

```
<persistence-unit name="persistenceUnit"
    transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
        <property name="hibernate.hbm2ddl.auto" value="create" />
        <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy" />
        <property name="hibernate.show_sql" value="false" />
        <property name="hibernate.connection.url" value="jdbc\:mysql\://localhost\:3306/socialcv" />
        <property name="hibernate.connection.username" value="root" />
        <property name="hibernate.connection.password" value="root" />
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />
    </properties>
</persistence-unit> 
```

我已经这样做了，不再收到用户错误，但现在在应用程序启动时收到以下错误：

```
20:35:41,791 ERROR [org.hibernate.tool.hbm2ddl.SchemaExport] (MSC service thread 1-8) HHH000231: Schema export unsuccessful: java.sql.SQLException: No suitable driver found for jdbc\:mysql\://localhost\:3306/socialcv
    at java.sql.DriverManager.getConnection(DriverManager.java:604) [rt.jar:1.7.0_03]
    at java.sql.DriverManager.getConnection(DriverManager.java:190) [rt.jar:1.7.0_03]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:173) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.DatabaseExporter.<init>(DatabaseExporter.java:52) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:368) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:305) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:294) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:452) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_03]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_03]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_03] 
```

有没有人遇到过这个或知道任何解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T21:25:26.197

首先：您的数据库连接 URL 看起来不正确。应该是`jdbc:mysql://localhost:3306/socialcv`。

然后：

最好将 MySQL 驱动程序安装为模块，请参见此处：[https ://community.jboss.org/wiki/DataSourceConfigurationinAS7#Installing_a_JDBC_driver_as_a_module](https://community.jboss.org/wiki/DataSourceConfigurationinAS7#Installing_a_JDBC_driver_as_a_module)

然后使用standalone.xml 使用该驱动程序定义数据源：

```
 <datasource jta="true" jndi-name="java:jboss/datasources/YourDatasourceName" pool-name="AnotherName" enabled="true" use-java-context="true" use-ccm="true">
                <connection-url>jdbc:mysql://localhost:3306/socialcv</connection-url>
                <driver>mysql</driver>
                <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
                <pool>
                    <min-pool-size>10</min-pool-size>
                    <max-pool-size>100</max-pool-size>
                    <prefill>true</prefill>
                    <use-strict-min>false</use-strict-min>
                    <flush-strategy>FailingConnectionOnly</flush-strategy>
                </pool>
                <security>
                    <user-name>hehe</user-name>
                    <password>hehehe</password>
                </security>
            </datasource>
            <drivers>
                ...
                <driver name="mysql" module="com.mysql">
                    <xa-datasource-class>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</xa-datasource-class>
                </driver>
            </drivers> 
```

在您的 persistence.xml 中不要使用`hibernate.connection.*`属性，而是使用：

```
<non-jta-data-source>java:jboss/datasources/YourDatasourceName</non-jta-data-source> 
```

这是初始化整个事情的事实上的方式。注意，使用时

```
transaction-type="JTA" 
```

代替

```
transaction-type="RESOURCE_LOCAL" 
```

你必须改为

```
<jta-data-source>java:jboss/datasources/YourDatasourceName</jta-data-source> 
```

它为您提供 CMT（容器管理事务）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:54:45.287

安装数据库驱动了吗？

[https://community.jboss.org/wiki/DataSourceConfigurationinAS7#Installing_the_JDBC_Driver](https://community.jboss.org/wiki/DataSourceConfigurationinAS7#Installing_the_JDBC_Driver)

（注意 MySQL 驱动程序的特殊问题）

最好的，安德斯

# python - Psycopg2 - copy_expert 权限被拒绝错误

> ID：10065926
> 
> 赞同：1
> 
> 时间：2012-04-08T19:48:26.937
> 
> 标签：python, ubuntu, psycopg2

我正在尝试从 Windows 切换到 ubuntu（我正在使用 12.04 LTS）并尝试使用我的一些旧脚本来运行我的旧数据库。以前我使用 postgresql 和 psycopg2 来维护它们，我在这里再次尝试这样做。

我的错误是使用复制专家命令将 csv 文件导入表。

代码如下：

```
#!/usr/bin/env python
import psycopg2 as psy
import sys

conn = psy.connect("dbname, user, host, password") # with the appropriate  values
curs = conn.cursor()

table = 'tablename' # a table with the appropriate columns etc
file = 'filename' # a csv file
SQL = "COPY %s FROM '%s' WITH CSV HEADERS" % (tablename, filename)

curs.copy_expert(SQL, sys.stdin) # Error occurs here

conn.commit()
curs.close()
conn.close() 
```

发生的具体错误如下：

> > psycopg2.ProgrammingError：无法打开文件“文件名”进行读取：权限被拒绝

任何帮助将不胜感激：

我完全被卡住了，我相信这是由于我如何设置数据库或文件的一些怪癖。

使用 csv 模块添加一个简单的读取和打印命令也可以正常工作（实际上来自同一个脚本）它将输出 csv 文件中的所有信息，然后在尝试将其导入数据库时​​出错，权限被拒绝

```
import csv
f = open(filename, 'rb')
read = csv.reader(f, delimiter =',')
for row in read:
    print row
f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:22:22.870

尝试使用`su`or以超级用户身份执行命令`sudo`，如果这没有帮助，另一种可能性是文件名的位置超出范围，所以我会尝试将其复制到桌面或您的主目录或文件夹知道您绝对拥有完全权限，看看这是否有效。

# .net - Standard for concatenating/encoding salt/IV with hash/ciphertext?

> ID：10065927
> 
> 赞同：2
> 
> 时间：2012-04-08T19:48:51.083
> 
> 标签：.net, encryption, hash, standards, aes

**Background:** I've written a pair of .NET functions for AES encryption/decryption.

I want to store the IV with the ciphertext in a single base64 encoded string, similar to as [described here](http://www.di-mgt.com.au/cryptoCreditcard.html).

I've seen hashing [this example](http://www.obviex.com/samples/hash.aspx) where he appends the salt bytes to the end of the hash bytes, and then base64 encodes the new array. Then, when verifying the hash, he decodes the base64 string, and splits out the salt and hash bytes.

**My question is:** are there defined standards that describe how I should be performing the concatenation, so that my base64 encoded data could be parsed & decrypted by other programs? Or is it just up to me as the programmer to write my encrypt/decrypt functions to parse the data as I see fit?

The standards would answer questions like: Do I prepend or append the IV bytes to the ciphertext bytes?

My ideal function signature would look like:

```
// returns base64encodedCiphertextAndIV
string encrypt(string plaintext, string base64encodedKey)  

// returns plaintext
string decrypt(string base64encodedCiphertextAndIV, string base64encodedKey) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:52:33.757

将 IV 添加到密文的前面是非常好的，并且非常标准。IV不必保密，只有密钥必须保密。如果您使用的是 CTR 模式，那么 IV 在给定键中的唯一性非常重要。如果您使用 CBC 模式，则拥有唯一的 IV 很有用，但不是那么重要。

# c# - 如何调用委托

> ID：10065934
> 
> 赞同：-2
> 
> 时间：2012-04-08T19:49:28.237
> 
> 标签：c#

我有以下代码

```
public class Test
{
  public static long Method1(Action a)
  {
        var s = Stopwatch.StartNew();
        a.Invoke();
        s.Stop();
        return s.Elapsed.TotalMilliseconds;
  }
} 
```

在另一堂课上我怎么称呼它

```
 double elapsed = 0;

            for (int i = 0; i < 100000; i++)
            {

                elapsed+= (TestHelper.Timer(() => session.SaveTransaction(transaction)));
            }
            Debug.WriteLine(string.Format("avg execution time is {0} ms", elapsed/100000)); 
```

哪个不编译。呼叫代码应该如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:52:00.530

两个问题：

*   您正在测量*单个调用*；通常，您应该对*大量*调用进行计时，否则可能会太快无法测量（或至少不到一毫秒）。
*   `TimeSpan.Milliseconds`您可能实际上是在使用`TimeSpan.TotalMilliseconds`; 否则，如果超过一秒钟，它仍会报告 0 到 999 之间的值。

# jquery - 克隆时 jquery-plugin datepicker 不起作用

> ID：10065936
> 
> 赞同：1
> 
> 时间：2012-04-08T19:49:42.207
> 
> 标签：jquery

我有以下代码（标记和 javascript），其中克隆了每块 2 个文本框。每个块包含2个文本框；一个带有普通文本框；另一个是与 datepicker 插件关联的文本框（“textboxDueDate”的 ID）。当用户在其中单击时，只有第一个/原始的弹出日历适用。但是，克隆的“textboxDueDate”文本框在内部单击时不会显示弹出日历。我的代码有什么问题？

```
 <div>
        <input type="button" id="buttonAddBookTrack" value="Add Another Book Track" />
</div>

        <div id="divTemplate">
        <fieldset>
            <legend>Book</legend>
            <div>
                <label>Book ISBN: </label>
                <input type="text" />
            </div>
             <div>
                <label>Due Date: </label>
                <input type="text" id="textboxDueDate" />
            </div>
        </fieldset>
</div>

        <div id="divOtherBooks"></div>

<!-- java script ---->
<script type="text/javascript">
    var _idCount = 1;

    $(document).ready(function () {
        $('input[id^=textboxDueDate]').datepicker(); 

        $('#buttonAddBookTrack').click(function () {
            var appendedDiv = $('<div>').appendTo('#divOtherBooks').data('divClonedTemplate', '_' + _idCount);
            $('#divTemplate').children().clone().appendTo(appendedDiv);

            $('input[id^=textboxDueDate]').not('.hasDatePicker').datepicker();  

            _idCount++;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:28:11.440

确保两件事：

a) 克隆文本字段后删除“hasDatePicker”类

b) 向文本字段添加唯一 ID

检查[工作代码](http://jsfiddle.net/9fp66/)

```
var _idCount = 1;

    $(document).ready(function () {
        $('input[id^=textboxDueDate]').datepicker();

        $('#buttonAddBookTrack').click(function () {
            var appendedDiv = $('<div>')
                .appendTo('#divOtherBooks')
                .data('divClonedTemplate', '_' + _idCount);

            var nodeO=$('#divTemplate').children().clone()
                $(nodeO).find('input[id^=textboxDueDate]')
                 .attr('id','textboxDueDate_'+_idCount)
                 .removeClass('hasDatepicker')
                 .datepicker()

            $(nodeO).appendTo(appendedDiv)

            _idCount++;
        });
    }); 
```

你和修剪代码，为了清楚起见，我添加了额外的代码行

**编辑：为什么`removeClass('hasDatepicker')`？**

datepicker() 实际上检查类以确定是否没有为给定的 textbox 定义 datepicker 对象。在你的情况下，当你克隆时，你会得到那个`garbage`阻止 datepicker() 启动的类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:01:11.053

使用深度[`clone`](http://api.jquery.com/clone/)：

```
$('#divTemplate').children().clone(true, true).appendTo(appendedDiv); 
```

有保持事件绑定到原始元素的问题。

因此，请在克隆后绑定事件：

```
$(document).ready(function () {
  $('#buttonAddBookTrack').click(function () {
    var $appendedDiv = $("#divTemplate")
      .clone()
      // Remove divTemplate's id
      .removeAttr("id")
      .appendTo('#divOtherBooks')
      .data('divClonedTemplate', '_' + _idCount);
    $("#textboxDueDate", $appendedDiv)
      // Remove datepicker plugin data
      .removeData("datepicker")
      // Remove element's parent id
      // Note: DatePicker will automatically generate an id
      .removeAttr("id")
      .datepicker();
    _idCount++;
  });
}); 
```

如果您确保您的`divTemplate`元素不会在任何地方使用，您可以保存从克隆元素中删除 DatePicker 数据的步骤。

# c++ - 检查数组中元素的相等性 - C++

> ID：10065943
> 
> 赞同：2
> 
> 时间：2012-04-08T19:50:27.877
> 
> 标签：c++, arrays, equals

为了检查简单数组中的相等性，我有以下内容；

```
int a[4] = {9,10,11,20};
    if(a[3]== 20){
        cout <<"yes"<< endl;
    } 
```

但是，当我创建一个类型类数组并尝试检查相等性时，我得到了错误；

> Human 是一个具有私有变量的类，用于名称、年龄、性别等，并为这些变量获取和设置函数。
> 
> humanArray 的大小为 20

```
void Animal::allocate(Human h){
    for (int i =0; i<20; i++){
        if(humanArray[i] == h){
            for(int j = i; j<size; j++){
                humanArray[j] = humanArray[j +1];
            }
        }
    }
} 
```

我收到以下错误；

```
error: no match for 'operator==' in '((Animal*)this)->Animal::humanArray[i] == h'| 
```

我可以传入索引和人类，并检查索引号。但是，有没有办法检查两个元素是否相同？我不想检查说“人名”和人名，因为在某些方面我的人没有名字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T19:55:40.257

为了使语法

```
if(humanArray[i] == h) 
```

合法的，你需要`operator==`为你的人类类定义。为此，您可以编写如下所示的函数：

```
bool operator== (const Human& lhs, const Human& rhs) {
   /* ... */
} 
```

在此函数中，您将对 和 进行逐个字段的比较，`lhs`以`rhs`查看它们是否相等。从现在开始，每当您尝试使用`==`运算符比较任何两个人时，C++ 都会自动调用此函数为您进行比较。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:57:31.757

您需要`operator==`为类 Human重载

```
bool operator== (const Human& left, const Human& right)
{
// perform comparison by each element in the class Human
} 
```

# php - 如何打印数组？

> ID：10065947
> 
> 赞同：1
> 
> 时间：2012-04-08T19:51:23.693
> 
> 标签：php, mysqli

我正在尝试学习如何从查询中打印结果，但我很困惑。

配置表：

```
site_id | site_name | site_description

1         Test        Testing 
```

配置：

```
private $hostname = 'localhost';
private $username = 'blah';
private $password = 'blah';
private $database = 'blah';

public function __construct()
{
    $this->connection = new mysqli($this->hostname,$this->username,$this->password,$this->database);

    if($this->connection->connect_errno) 
    {
        die('Error: ' . $this->connection->error);
    }
}

public function query($query)
{
    return $this->connection->query($query);
}

public function __destruct()
{
    $this->connection->close(); 
} 
```

代码#1：

```
public function __construct()
{
    $this->db = new Config;

    $si = $this->db->query('SELECT * FROM config');

    while($site_if = $si->fetch_array())
    {
        $this->site_info[] = $site_if;
    }

}

public function getSiteName()
{
    echo $this->site_info['site_name'];
} 
```

这不打印任何内容。

代码#2：

```
public function __construct()
{
    $this->db = new Config;

    $si = $this->db->query('SELECT * FROM config');

    while($site_if = $si->fetch_array())
    {
        $this->site_name_info = $site_if['site_name'];
    }

}

public function getSiteName()
{
    echo $this->site_name_info;
} 
```

这会打印信息，但这是正确的方法吗？有没有办法用代码 #1 打印？

我想做的就是回显站点名称。只有一个站点名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:55:59.267

如果没有有关您的配置表设计的更多信息，我唯一可以建议的想法是：

```
while($site_if = $si->fetch_array())
{
    $this->site_info[$site_if["NAME_COLUMN_NAME"]] = $site_if["VALUE_COLUMN_NAME"];
} 
```

`NAME_COLUMN_NAME`并且`VALUE_COLUMN_NAME`必须用表格设计中的列名替换。

之后，您将能够`$this->site_info`通过其名称从数组中获取自定义配置参数，例如。

```
public function getSiteName()
{
    echo $this->site_info['site_name'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:54:42.883

在示例 #1 中，`$this->site_info`包含一个数组数组。简单查看内容：

```
print_r($this->site_info); 
```

要遍历内容，打印每一行的名称：

```
foreach ($this->site_info as $row){
   echo $row['site_name'];
} 
```

# css - 动画后 CSS 100% 宽度不起作用

> ID：10065949
> 
> 赞同：0
> 
> 时间：2012-04-08T19:51:40.257
> 
> 标签：css, width

请访问网站： http: [//viewlike.us/](http://viewlike.us/)并将分辨率更改为例如 1920x1200 - 在大多数情况下，标题（带有输入表单和提交按钮的 div）不再是 100%。如何避免这种情况？我尝试使用 width:100% !important, min/max width - 但没有成功。我想应该有一个小技巧/修复或某事来避免它，但我在缺乏想法而苦苦挣扎..谢谢~！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:58:33.063

我认为该`width`属性的默认值适用`auto`于大多数元素。在这种情况下，`<div>`正在扩展到其父元素的 100%，在您的情况下是`<body>`. 由于`<body>`标签没有`width`定义，它将默认为浏览器窗口的 100%。因此，即使位于分辨率选择栏下方的页面宽度大于浏览器窗口的宽度，顶部栏（URL 条目和分辨率选择）仍然具有浏览器窗口的宽度。这就是为什么当您向右滚动时会看到它们的边缘。

您可能想尝试`position: fixed`结合 CSS 属性`top`和`left`顶栏使用。这样，即使您向右滚动页面，这些栏也会显示在屏幕上。（我简单地尝试过，它应该可以工作。）

希望对你有帮助！

# django - Django haystack，嗖嗖声搜索，提升

> ID：10065952
> 
> 赞同：3
> 
> 时间：2012-04-08T19:51:54.140
> 
> 标签：django, search, django-haystack

我已经用 haystack 设置了 django。这是我的主要模型：

```
class Apple(models.Model):
    pname = models.CharField(max_length=127)
    qname = models.CharField(max_length=127) 
```

我想搜索在 pname 或 qname 文件中有“测试查询”的苹果。但我想显示在其 pname 字段中具有“测试查询”的对象高于在其 qname 字段中具有它的对象。

这是我的搜索索引：

```
class AppIndex(SearchIndex):
    text = CharField(document=True, use_template=True)
    pname = CharField(model_attr='pname', boost=1.2)
    qname = CharField(model_attr='qname') 
```

这是 apple_text.txt 文件：

```
{{ object.pname }}
{{ object.qname }} 
```

我搜索了很多，我认为使用 boost=1.2 它应该可以工作，但它没有工作，并且在其 pname 和 qname 字段中具有“测试查询”的对象之间没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-10T16:58:55.540

我不确定自从提出问题以来它是否发生了变化，但我相信你想要 field_boost=1.2

# java - 将文本文件输入解析为数组

> ID：10065955
> 
> 赞同：1
> 
> 时间：2012-04-08T19:52:13.493
> 
> 标签：java, parsing, sorting

我有一个文本文件，其中包含名称后跟 11 个整数。我需要将这些数字解析为一个数组，其中 11 个整数值中的最大值存储在表示该值 (0-10) 的维度中。

我还需要保持名称的完整性。

例如：

Aaliyah 0 0 0 0 0 0 0 0 0 380 215：我正在寻找像 Aaliyah [9] 这样的输出，以及存储在该元素中的 380 值

```
Aaron 193 208 218 274 279 232 132 36 32 31 41
Abagail 0 0 0 0 0 0 0 0 0 0 958
Abbey 0 0 0 0 0 0 0 0 537 451 428
Abbie 431 552 742 924 0 0 0 0 752 644 601
Abbigail 0 0 0 0 0 0 0 0 0 953 562
Abby 0 0 0 0 0 906 782 548 233 211 209
Abdiel 0 0 0 0 0 0 0 0 0 925 721
Abdul 0 0 0 0 0 0 0 903 0 0 0
Abdullah 0 0 0 0 0 0 0 0 0 1000 863
Abe 248 328 532 764 733 0 0 0 0 0 0 
```

这是我到目前为止的代码：

```
import java.io.*;
import java.util.*;

public class Names
{
    private static String name = "bb";
    private static int [] yearRank;
    private static boolean match;

        public static void main( String[] args)
        {
            java.io.File file = new java.io.File("names.txt");
            try
            {
                Scanner input = new Scanner(file);
                while (input.hasNext())
                {
                    String num = input.nextLine();
                    if(match = num.toLowerCase().contains(name.toLowerCase()))
                    {
                        for (int i = 0; i<11; i++)
                        {

                            System.out.println(num);
                        }
                    }
                }
            catch(FileNotFoundException e)
            {
                System.err.format("File does not exist\n");
            }
        }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:56:29.497

`num`在你的循环中不会改变 - 如果你知道空格分隔不同的字段，你可以这样做，例如（未测试）：

```
String num = input.nextLine();
if(match = num.toLowerCase().contains(name.toLowerCase())) {
    String[] fields = num.split(" "); //split the line into an array, each item contains a field
    for (String field : fields) { //loop over the array
        System.out.println(field); //print each field
    }
} 
```

# objective-c - NSTextField 滚动

> ID：10065960
> 
> 赞同：2
> 
> 时间：2012-04-08T19:52:54.097
> 
> 标签：objective-c, xcode, macos, rss, nsstring

我对 Obj-C 和 Xcode 比较陌生（但不是初学者）。我正在构建一个需要类似于股票行情的 RSS 提要的 Mac 应用程序。我知道这需要一个标签作为出口，标签的 NSString 需要来自 RSS 提要的 URL，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T20:43:57.980

对于初学者来说，这可能很难解决。

我会使用现有的库，例如[https://www.cocoacontrols.com/controls/mktickerview](https://www.cocoacontrols.com/controls/mktickerview)

希望有帮助:)

# jquery - 如何在 JQuery UI 中调整进度条的大小

> ID：10065961
> 
> 赞同：1
> 
> 时间：2012-04-08T19:53:01.147
> 
> 标签：jquery

我在使用 JQuery UI 进度条时遇到了一些问题，我似乎无法调整它的大小。我尝试在我的css中为进度条类添加一个高度值，但它只会改变宽度，而不是高度。

提前感谢您的任何回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:02:53.293

只需像这样使用[.height()](http://api.jquery.com/height/)：

```
$('#progressbar').height(100); 
```

演示：http: [//jsfiddle.net/zaHGG/](http://jsfiddle.net/zaHGG/)

# scala - 如何从 Scala 中的泛型函数返回 null？

> ID：10065962
> 
> 赞同：15
> 
> 时间：2012-04-08T19:53:02.910
> 
> 标签：scala, generics, null

我正在编写自己的简单`javax.sql.DataSource`实现，我需要工作的唯一方法是，但是接口从和`getConnection: Connection`继承了许多其他方法（我不需要）。所以，我想“实现”那些不需要的方法，它们实际上不会起作用，但在调用时会表现得足够好。例如我实现为`javax.sql.CommonDataSource``java.sql.Wrapper``boolean isWrapperFor(Class<?> iface)`

```
def isWrapperFor(iface: Class[_]): Boolean = false 
```

我想实现`<T> T unwrap(Class<T> iface)`为

```
def unwrap[T](iface: Class[T]): T = null 
```

但最后一个不起作用：编译器报告类型不匹配。

使用正确`null.asInstanceOf[T]`还是有更好的方法？当然`UnsupportedOperationException`，在这种特殊情况下，我考虑只是扔掉，但恕我直言，这个问题仍然很有趣。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-08T20:04:10.483

这是因为`T`可能是不可为空的类型。当您强制`T`为可空类型时，它会起作用：

```
def unwrap[T >: Null](iface: Class[T]): T = null

unwrap(classOf[String]) // compiles

unwrap(classOf[Int]) // does not compile, because Int is not nullable 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T22:30:52.147

“正确”的解决方案是做一些会*立即*失败的事情。像这样：

```
def unwrap[T](iface: Class[T]): T = sys.error("unimplemented") 
```

在 scala **2.10**中，这将被实现为：

```
def unwrap[T](iface: Class[T]): T = ??? 
```

因为在`Predef`被调用中有一个新方法`???`。这是有效的，因为表单的表达式`throw new Exception`具有 type `Nothing`，它是任何类型的子类型（在类型理论圈子中称为*底部）。*

这是*正确*的原因是最好立即失败并出现错误，而不是使用`null`稍后可能会失败并混淆原因的 a 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:09:11.923

**如评论中所述，此解决方案不起作用**

如果我很好地理解了您的问题，您还可以分配默认值，详细说明[将“_”分配给 scala 中的字段是什么意思？](https://stackoverflow.com/questions/10040886/what-does-it-mean-assign-to-a-field-in-scala). [*您可以在Scala 语言规范*](http://www.scala-lang.org/docu/files/ScalaReference.pdf)*的4.2 变量声明和定义*中找到更多信息[](http://www.scala-lang.org/docu/files/ScalaReference.pdf)

 *所以你可以简单地做：

```
def unwrap[T](iface: Class[T]): T = _ 
```

这将设置`unwrap`为`null`没有类型不匹配。*

# python - python中的绑定函数和装饰器

> ID：10065963
> 
> 赞同：1
> 
> 时间：2012-04-08T19:53:05.083
> 
> 标签：python, decorator

我正在尝试不同的方法来理解 Python 中的装饰器和函数。以下代码是否正确：

```
import math
def calculate_area(func):
    def area(a,b):
        return a+b
    return area

class Donut():
    def __init__(self, outer, inner):
        self.inner = inner
        self.outer = outer

    @calculate_area
    @staticmethod
    def area(self):
        outer, inner = self.radius, self.inner
        return Circle(outer).area() - Circle(inner).area() 
```

“staticmenthod”装饰器会告诉内置的默认元类类型（类的类，参见这个问题）不要创建绑定方法吗？是否可以这样做：

```
Donut.area(4,5)
Traceback (most recent call last):
File "<pyshell#33>", line 1, in <module>
Donut.area(4,5)
TypeError: unbound method area() must be called with Donut instance as first argument      (got int instance instead) 
```

请帮助我理解绑定方法和未绑定方法以及装饰器对它们的影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T20:03:20.953

只需将 @staticmethod 与您的装饰器交换

```
import math
def calculate_area(func):
    def _area(a, b):
        return a + b
    return _area

class Donut():
    def __init__(self, outer, inner):
        self.inner = inner
        self.outer = outer

    @staticmethod
    @calculate_area
    def area(cls):
        outer, inner = self.radius, self.inner
        return "" 
```

编辑1：

python解释器需要在另一个装饰器之前添加@staticmethod，因为在创建类类型之前，它需要确定类成员和实例成员。如果你的第一个装饰器是其他任何东西，解释器将此函数称为实例成员。看到[这个](http://www.python.org/dev/peps/pep-0318/#motivation)

编辑2：

it's recommended to use @classmethod instead @staticmethod, for more info see [this](https://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python)

# c# - 如何让[授权]按我的意愿工作？

> ID：10065975
> 
> 赞同：3
> 
> 时间：2012-04-08T19:54:46.267
> 
> 标签：c#, asp.net, asp.net-mvc

我有这个链接

```
@Ajax.ActionLink("comment", "CreateDebateComment", new { id = Model.DebateID}, new AjaxOptions
{
    UpdateTargetId = "comment-entry-box",
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "GET"
}); 
```

哪个触发了这个控制器

```
 [Authorize]
    public PartialViewResult CreateDebateComment(int id)
    {

            DebateIDForComment = id;
            return PartialView("_CreateDebateCommentPartial");

    } 
```

如果用户未登录，他们会被重定向到登录页面，但它会加载到评论输入框 div 中，而不是重定向到登录页面

我也尝试过这种变化

```
 public PartialViewResult CreateDebateComment(int id)
    {
        if (!User.Identity.IsAuthenticated)
        {
            RedirectToAction("LogOn", "Account");
        }

            DebateIDForComment = id;
            return PartialView("_CreateDebateCommentPartial");

    } 
```

但它不会重定向，仍然会加载 partialView

有谁知道我怎样才能让它按我的意愿运行？我需要登录页面正常加载，而不是在评论输入框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:16:15.493

如果不使用 [Authorize] （我意识到这是问题）您检查代码中的授权（例如`!User.Identity.IsAuthenticated`）并将您的响应包装在 json 中，`false`客户端的 a 重定向到登录 [通过 javascript]

`True`后面是要显示的数据

IE

```
{ "Success": "false" } 
```

或者

```
{ "Success": "true", "data": "blah blah blah" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:32:22.267

您可以查看[以下博客文章](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)，其中 Phil Haack 解释了如果请求是 AJAX 请求，您如何禁止表单身份验证模块重定向到登录页面并返回可能被拦截的 401 HTTP 状态代码客户端并相应地重定向。

因此，要么添加他展示的 HttpModule，要么将他的 NuGet 包安装到您的项目中，然后您所要做的就是注册一个全局 ajax 事件，每次页面上的某些 AJAX 请求从服务器命中 401 时都会触发该事件：

```
<script type="text/javascript">
    $.ajaxSetup({
        statusCode: {
            401: function () {
                window.location.href = '@Url.Action("logon", "account")';
            }
        }
    });
</script> 
```

# java - Java隐式方法/参数？

> ID：10065982
> 
> 赞同：5
> 
> 时间：2012-04-08T19:55:36.687
> 
> 标签：java, parameters, implicit

我目前正在阅读一本关于 Android 编程的书，并且在开始的章节中有一个关于 Java 的不错的小参考指南。但是，我偶然发现了一些我不太了解的隐式参数。

他定义了**Car**类：

```
public class Car {
  public void drive() {
    System.out.println("Going down the road!");
  }
} 
```

然后他继续说：

```
public class JoyRide {
 private Car myCar;

 public void park(Car auto) {
   myCar = auto;
 }

 public Car whatsInTheGarage() {
   return myCar;
 }

 public void letsGo() {
   park(new Ragtop()); // Ragtop is a subclass of Car, but nevermind this.
   whatsInTheGarage().drive(); // This is the core of the question.
 }
} 
```

我只想知道当**JoyRide**不是 Car 的扩展**时，我们如何从****Car**类中调用 drive() 。是因为方法 whatsInTheGarage() 的返回类型为**Car**，因此它“以某种方式”从该类继承？

 ******谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T19:58:21.543

想想这段代码：

```
whatsInTheGarage().drive(); 
```

作为这个的简写：

```
Car returnedCar = whatsInTheGarage();
returnedCar.drive(); 
```

现在清楚了吗？全部~~类 C~~[具有类似c](/questions/tagged/c "显示标记为“c”的问题")语法的语言的行为是这样的。

更新：

```
myCar.drive();  //call method of myCar field

Car otherCar = new Car();
otherCar.drive();  //create new car and call its method

new Car().drive()  //call a method on just created object

public Car makeCar() {
  return new Car();
}

Car newCar = makeCar();  //create Car in a different method, return reference to it
newCar.drive();

makeCar().drive();  //similar to your case 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T19:58:40.690

`whatsInTheGarage`返回一个`Car`。您正在调用`drive`它返回的实例。不是`JoyRide`继承方法，`JoyRide`而是在完全独立的对象上调用方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T19:59:18.040

在行

```
whatsInTheGarage().drive() 
```

您正在调用`drive`从返回的对象的方法`whatsInTheGarage`。`JoyRide`本身不相关的事实`Car`在这里无关紧要，因为您没有尝试调用`drive`对象`JoyRide`。由于`whatsInTheGarage`返回 a`Car`并且您正在调用从 返回`drive`的对象`whatsInTheGarage`，因此 this 将调用`drive`一个`Car`对象；具体来说，`Car`由`whatsInTheGarage`. 这与继承没有任何关系——相反，您只是在一个专门声明该方法的类类型的对象上调用一个方法。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T19:58:40.347

您的假设是正确的，因为该方法返回 Car 它可以调用 Car 方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-24T18:13:38.697

不要忘记 Joyride 类有一个 Car 类型的字段。由于这个原因，使用该字段，您可以调用 Car 类的方法。******

# javascript - 单击父级中的元素时激活 iFrame 中的单击

> ID：10065984
> 
> 赞同：1
> 
> 时间：2012-04-08T19:55:49.263
> 
> 标签：javascript, jquery, iframe

单击主页中的元素时，我试图激活 iFrame 中元素的单击事件（标准的 Twitter 关注按钮）。

这是我正在尝试使用但不起作用的代码...

```
$(".twit-test").click( function() {
    $('.twitter-follow-button').contents().find('#follow-button').click();
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T15:51:59.593

正如上面一些人所提到的，我无法实现我的要求，因为我不是 iFrame 内容的所有者。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-08T20:04:10.047

你有没有尝试过，

```
$(".twit-test").click( function() {
    $('.twitter-follow-button').contents().find('#follow-button').trigger('click');
    return false;
}); 
```

# javascript - 选择某个 CSS 时是否可以播放 youtube 视频？

> ID：10065985
> 
> 赞同：5
> 
> 时间：2012-04-08T19:55:56.597
> 
> 标签：javascript, css, html, youtube, embed

我正在寻找一种在从下拉菜单中选择某个 CSS 时显示和播放不同 youtube 视频的方法。我在想 JavaScript 可以用来检查 CSS。

添加到页面的 html 标头。

```
<script type="text/javascript" src="=./javascript/playvid4css.js"></script> 
```

例如/ CSS

红色.css 蓝色
.css

[红戏](http://www.youtube.com/watch?v=3kvWClaJKd8)
[蓝戏](http://www.youtube.com/watch?v=bNF_P281Uu4)

也许将`div`文件添加到 html 中以显示视频的出现位置。

```
<div id="yvideo"></div> 
```

# #

youtube 嵌入代码。

旧嵌入代码：

```
<object width="420" height="315">
    <param name="movie" value="http://www.youtube.com/v/N9ync7sLSd4?version=3&amp;hl=en_GB&amp;rel=0"></param>
    <param name="allowFullScreen" value="true"></param>
    <param name="allowscriptaccess" value="always"></param>
    <embed src="http://www.youtube.com/v/N9ync7sLSd4?version=3&amp;hl=en_GB&amp;rel=0" type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always" allowfullscreen="true"></embed>
</object> 
```

youtube iframe 代码：（可能是他们将来尝试用于所有视频的代码）

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/N9ync7sLSd4?rel=0" frameborder="0" allowfullscreen></iframe> 
```

# #

任何想法如何将 JavaScript 连接到 CSS 以便出现不同的 youtube，或者有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:57:36.330

看一下`document.styleSheets`- 它是与您的网页关联的样式表的数组（有序列表）。您可以在此处找到参考：

[https://developer.mozilla.org/en/DOM/stylesheet](https://developer.mozilla.org/en/DOM/stylesheet)

该`disabled`属性说明给定的样式表是否已被应用。

因此，您可以遍历样式表，当您遇到红色或蓝色时，检查它们是否已应用（未禁用）。

```
var i;
for (i = 0; i < document.styleSheets.length; i++)
    if (document.styleSheets[i].href == "myRedStyleSheet.css" && 
        !document.styleSheets[i].disabled) {

            // code for the red stylesheet

    } else if (document.styleSheets[i].href == "myBlueStyleSheet.css" && 
               !document.styleSheets[i].disabled) {

            // code for the blue stylesheet
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T23:00:14.833

我假设您使用下拉菜单更改包含的 css.. 如果是.. 然后在您读取更改的值并更改 .CSS 文件的同一选定事件上，您还可以删除旧的 Iframe 并添加一个新的.. 那将容易..使用JQUERY sply

# java - 使用枚举扩展类 - java

> ID：10065989
> 
> 赞同：2
> 
> 时间：2012-04-08T19:56:26.020
> 
> 标签：java, oop, design-patterns, architecture

假设我有两个类 A 和 B，它们的内部状态由枚举状态表示。B 类扩展 A 以添加新功能，但它也添加了新的内部状态。准确地说，它通过将 A 的一个状态分为两个新状态来增加细粒度的状态支持。

我还需要使用 PropertyChangeSupport 来监控状态变化。

目前，我在枚举状态的 A 类中定义了所有状态。我有受保护的方法 setState() 和 getState()。为了从外部检查状态，我编写了方法 isAvaible()、isComplete() 等。这些方法仅存在于适当的类中，具体取决于它们的层次结构和状态支持。

我真的不喜欢这个想法，在父类中定义了所有状态。如何在 Java 中正确实现这一点？据我所知，不可能对枚举使用继承。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:04:33.417

委托优于继承。

```
enum StateA
{
       AVAILABLE , COMPLETE ;
}

class A
{
      private StateA state ;
}

enum StateB
{
     AVAILABLE_TO_PUBLIC ( StateA . AVAILABLE ) , AVAILABLE_INTERNALLY ( StateA . AVAILABLE ) , COMPLETE ( COMPLETE ) ;

     StateB ( StateA sa )
     {
          this . sa = sa ;
     }

     private StateA sa ;
}

class B
{
      private StateB state ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:37:16.333

我认为您想放弃 Enum 概念，除非将其作为 A 类私有的东西来帮助您对其进行编程。A 的外部状态可通过 isAvailable() 和 isComplete() 等方法获得。B 类将扩展 A，但对 A 的枚举一无所知，尽管它可能有自己的私有枚举。如果更改需要影响 A 的状态，进而影响 A 的枚举 StateA，请通过方法调用来完成。

A 类或 B 类对象的“状态”应该通过其方法来确定、访问、使用或其他方式，*而不是*通过访问枚举值。换句话说，A 或 B 的实例本身就是状态的完整定义。它可能不会像枚举那样*命名*状态，但它会告诉您您需要了解的有关“状态”允许和可以做什么以及如何更改它的所有信息。

**或者**，您可以设置一个对所有人可见的枚举并在全局范围内定义它。那么枚举StateA完全独立于A类，解决了基本的设计问题。然后，A 类和 B 类以及其他类将依赖 StateA 提供它们用来相互通信以及与系统其他部分通信的语言，从而实现更好的设计。

我更喜欢第一个想法，因为通过调整 A 和 B 并扩展它们，您可以真正微调每个状态的含义，甚至可以在不发布正式公告的情况下添加新状态。（向独立的 StateA 添加一个值不会有什么大不了的，但使用 StateA 的程序员可能想知道他们是否应该使用新值 - 一个小麻烦。）

# ubuntu - 如何在 Ubuntu 中切换到 netcat-traditional？

> ID：10065993
> 
> 赞同：30
> 
> 时间：2012-04-08T19:56:56.743
> 
> 标签：ubuntu, netcat

我知道这是一个简单的问题，但我如何切换到`netcat-traditional`ubuntu？每当我写作`netcat -h`时，似乎我正在跑步`netcat-openbsd`？我是 Ubuntu 的新手，所以确切的命令会很有帮助。谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-04-17T15:01:44.493

1.  启用 Universe 存储库（如果未启用）

    ```
    sudo add-apt-repository universe 
    ```

2.  使用突触安装另一个 netcat。（为此，必须启用 Universe 存储库。）

    ```
    sudo apt-get install netcat-traditional 
    ```

3.  类型`sudo update-alternatives --config nc`

4.  选择选项`/bin/nc.traditional`

5.  类型`nc -h`

输出：

```
[v1.10-38]
connect to somewhere:   nc [-options] hostname port[s] [ports] ...
listen for inbound: nc -l -p port [-options] [hostname] [port]
options:
    -c shell commands   as `-e'; use /bin/sh to exec [dangerous!!]
    -e filename     program to exec after connect [dangerous!!]
... 
```

# c# - “资源”参数不支持重复项目

> ID：10065997
> 
> 赞同：8
> 
> 时间：2012-04-08T19:57:33.293
> 
> 标签：c#, resources

`obj\Debug\BookStore.MainForm.resources`在参数中多次指定该项目`Resources`。`Resources`该参数不支持重复项。

我该如何解决？

![在此处输入图像描述](../Images/66938cf0bf3bc66683e6a58d1b157b49.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T08:04:12.740

当您在“解决方案资源管理器”窗格中复制并粘贴表单时发生此错误。然后您更改一种形式的名称。Visual Studio 为两者提供相同的名称，然后，当您重命名表单时，Visual Studio 会为您进行一些重构并为这两个表单重命名 Designer 类（不仅适用于新表单）。

**您可以通过两种方式解决此问题：**

1.  关闭 Microsoft Visual Studio，然后从外部程序（例如 Total Commander）浏览到您的项目文件夹。在定义了两个表单的文件夹中，您可以看到表单的 .cs 和 .Designer.cs 文件。在文本编辑器中打开表单的 .cs 和 .Designer.cs 文件。查找并用新名称替换原始表单名称的每个实例。如果你重命名已经重命名了一些资源，还要检查文件的原始表单（如果它们只是原始表单名称，而不是新表单名称的任何内容）。然后保存所有文件，启动 Microsoft Visual Studio 并重建您的项目。

2.  您可以尝试在新的 .cs 和 .Designer.cs 文件中每次出现原始表单名称时尝试 chcek 和重命名声明，但尝试禁用重构。如果您已经重命名了新表单，在旧表单的 .Designer.cs 中，您可能会看到：

    ```
    namespace YourProjectNamespace
    {
      partial class NewFormName
      { .. } 
    ```

    您必须将 NewFormName 重命名为 OldFormName，并且当 Visual Studio 为您提供重构菜单（重命名对象的最后一个字母之前的小 reg 矩形）时，不要做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-09T04:42:54.107

当我创建部分表单类时，这发生在我身上。当我无意中在设计模式下查看它时，它为新的部分表单创建了一个本地化的 resx 文件。我删除了那个 resx 文件并解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T19:58:43.940

您不能将具有相同名称/键的 2 个项目添加到资源文件中。它必须是独一无二的

![在此处输入图像描述](../Images/9b2816ce81a58aa4e128634c5eede984.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T00:01:38.660

如@Royi Namir 所述，检查项目中的 *.resx 文件。

如果您已经这样做了：检查您的*.resx.designer*文件。一些程序“优化”设计器文件。

设计器文件只是普通的 xml。如果它们与相应的 xml 不同步，您将得到描述的异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-10T08:59:13.203

我有同样的问题，我可以通过以下步骤解决它：

*   `Right-Click to your form name`示例：主窗体
*   `To Review: Select Find All References` 现在您将看到可能的冲突形式列表
*   `To Fix: Select Refactor -> Rename`-
*   `Select Preview reference changes`
*   `Rename it Differently`
*   `Un-checked for the Conflict Form/class`

# java - 删除包含 next() 的 println 会导致无限循环？

> ID：10065999
> 
> 赞同：0
> 
> 时间：2012-04-08T19:57:48.230
> 
> 标签：java, java.util.scanner, infinite-loop

我一定遗漏了一些关于各种 Scanner 方法如何工作的明显信息，但这真的没有任何意义：

此代码导致无限循环：

```
Scanner valueScan = new Scanner(line);
valueScan.useDelimiter(",");
while(valueScan.hasNext())
{
count++;
} 
```

虽然此代码有效：

```
Scanner valueScan = new Scanner(line);
valueScan.useDelimiter(",");
while(valueScan.hasNext())
{
System.out.println("value token: " + valueScan.next());
cellCount++;
} 
```

这是来自 Oracle 的文档，我不确定它是否适用或它的含义：“此方法可能会在等待输入扫描时阻塞，即使之前调用 hasNext() 返回 true。”（http://docs.oracle .com/javase/1.5.0/docs/api/java/util/Scanner.html#next%28%29)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T19:59:45.073

因为`hasNext`不会从 中删除任何内容`Scanner`，所以在第一种情况下，您永远不会更改其状态，因此是无限循环。 `next`提取输入，从而改变`Scanner`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:00:01.553

第二个示例中的调用`valueScan.next()`是使扫描仪向前移动的原因。`hasNext()`仅检查扫描仪中是否有下一个项目，但不执行任何其他操作，因此如果至少有一个项目，则为无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T20:00:06.117

没有`next()`将`Scanner`不会迭代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T20:01:35.997

`hasnext`仅告诉您是否存在下一个元素并`next`转到该元素。

所以在你的第一个循环中，它停留在第一个元素并不断告诉你第二个元素存在并且什么都不做。