# StackOverflow 问答 11496000-11496999

# cvs - CVS 登录和注销

> ID：11496002
> 
> 赞同：2
> 
> 时间：2012-07-15T22:02:27.243
> 
> 标签：cvs

我想了解更多关于 CVS 登录和注销的工作原理。他们是否创建/删除任何文件？如果是，那些文件是什么？我在 CVS 文件夹下找不到任何东西。这些命令是否仅对 pserver 模式有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:08:46.237

这在[CVS 文档](http://www.manpagez.com/info/cvs/cvs_31.php)中进行了解释，该文档也应该`info cvs`在您的系统上可用：

> 默认情况下，记录存储在文件“<code>$HOME/.cvspass”中。该文件的格式是人类可读的，并且在某种程度上是人类可编辑的，但请注意，密码不是以明文形式存储的——它们经过简单编码以保护它们免受“无辜”损害（即，系统管理员或其他人无意中查看非恶意的人）。
> 
> `CVS_PASSFILE`您可以通过设置环境变量来更改此文件的默认位置 。如果使用此变量，请确保在`cvs login`运行之前设置它。如果你在运行后设置它`cvs login`，那么以后的 CVS 命令将无法查找密码以传输到服务器。

[...]

> `cvs logout`可以使用命令从 CVS_PASSFILE 中删除给定远程存储库的密码。

# liferay-6 - 数据库中的哪个表包含 Liferay 中的钩子？

> ID：11496004
> 
> 赞同：0
> 
> 时间：2012-07-15T22:02:34.000
> 
> 标签：liferay-6

我知道 portlet 在布局中，但我找不到钩子。

谢谢。

# objective-c - 选择单元格后，如何关闭 UITableViewController 弹出框并更新 OtherViewController 上的插座？

> ID：11496005
> 
> 赞同：2
> 
> 时间：2012-07-15T22:02:38.057
> 
> 标签：objective-c, xcode, uitableview, xcode4.3, popover

我目前有一个弹出框，它是一个`TableViewController`带有 4 个单元格的 UITableViewController（称为）。选择其中一个单元格后，我想关闭弹出框，同时获取一个基于单元格选择设置的变量，并将其用作`self.styleText.text = thePopoverCellVariable;`我的另一个视图控制器（称为`OtherViewController`）中标签出口（即）中的文本. 我怎样才能做到这一点？

现在，这仅在我通过单击外部关闭弹出框时才有效。中的代码`TableViewController.m`是：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ((OtherViewController *)self.presentingViewController).thePopoverCellVariable=theVariable;
} 
```

并在`OtherViewController.m`：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    UIStoryboardPopoverSegue *popoverSegue;
    popoverSegue = (UIStoryboardPopoverSegue *)segue;

    UIPopoverController *popoverController;
    popoverController = popoverSegue.popoverController;
    popoverController.delegate=self;
}

- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
    thePopoverCellVariable = ((StyleViewController *)popoverController.contentViewController).theVariable;
    self.styleText.text=thePopoverCellVariable;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T01:44:50.077

我**终于**想通了。@Jeffery Thomas 有 99% 的正确答案。另外 1% 是您必须从根视图控制器中关闭弹出框，在这种情况下`OtherViewController`。所以我`popoverController`在头文件中做了一个变量并实现了我的代码如下

```
//OtherViewController.m
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    UIStoryboardPopoverSegue *popoverSegue;
    popoverSegue = (UIStoryboardPopoverSegue *)segue;
    popoverController = popoverSegue.popoverController;
    pCVisible = YES;
    [[segue destinationViewController] setDelegate:self];
}

- (void) setDataFromPopover {
    if (pCVisible) {
        [popoverController dismissPopoverAnimated:YES]; // THIS IS KEY! this is where the popover is dismissed, not in the popover itself
    }
} 
```

和...

```
//TableViewController.m
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //variable = whatever

    OtherViewController *initialView;
    initialView=(OtherViewController *)self.delegate;
    initialView.theLabel.text = variable;
    [initialView setDataFromPopover];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:00:30.267

在`TableViewController`：

```
@property (weak, nonatomic) UIPopoverController *popoverController; // In header

@synthesize popoverController = _popoverController;

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    self.theVariable = … // get the variable from the cell.

    [self.popoverController dismissPopoverAnimated:YES];
} 
```

在`OtherViewController`：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UIStoryboardPopoverSegue *popoverSegue;
    popoverSegue = (UIStoryboardPopoverSegue *)segue;

    UIPopoverController *popoverController;
    popoverController = popoverSegue.popoverController;
    popoverController.delegate=self;

    TableViewController *tableViewController = (TableViewController *)popoverSegue.destinationViewController;
    tableViewController.popoverController = popoverController;
} 
```

* * *

很抱歉之前的混乱，我认为这会像模态视图控制器一样工作。

* * *

好的，我认为这不是最佳选择，但应该可以。

* * *

**更新**

`-popoverControllerDidDismissPopover:`如果您尚未设置（请参阅：[委托](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html#//apple_ref/occ/instp/UIPopoverController/delegate)）`popoverController.delegate = self`，则不会被调用。这可以在故事板或`OtherViewController``-prepareForSegue:sender:`

# asp.net - 如果 htm 或 html 页面不存在，则检查 aspx 页面是否存在

> ID：11496008
> 
> 赞同：0
> 
> 时间：2012-07-15T22:03:06.967
> 
> 标签：asp.net, redirect, global-asax

我已将我的网站从使用 .htm/.html 页面转移到 aspx 页面。一些现有的网站/书签等将引用旧文件而不是 aspx 文件，所以我希望它们被发送到 aspx 版本（我保持相同的命名）。我不想在每个页面上添加重定向代码。

我怎么能这样做一次？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:27:22.633

OP评论后更新：

如果你想捕捉 Global.asax.cs 中的错误，那么请这样做

```
protected void Application_Error(Object sender, EventArgs e)
{
    HttpContext context= HttpContext.Current;

    Exception exception = context.Server.GetLastError();

    int httpCode = ((HttpException)exception).GetHttpCode();
    if (httpCode == 404)
    {
      ctx.Server.RedirectPermanent("~/yournewfilename.aspx", true);
     //For more infor on RedirectPermanent got to http://msdn.microsoft.com/en-us/library/dd322042.aspx
    }
} 
```

============ 否则===============

如果你想要现成的东西，那么[http://www.isapirewrite.com/](http://www.isapirewrite.com/)或 URL Rewrite

但是您也可以通过代码实现这一点，通过为传入请求实现 IHttpHanlder 接口来编写自己的 httphandler，在您的情况下，如果对 .htm 或 .html 的请求然后重定向到 .aspx

如果您决定编写自己的 HttpHandler 有用的链接

[http://msdn.microsoft.com/en-us/library/5c67a8bd(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/5c67a8bd(v=vs.85).aspx)

[http://codebetter.com/karlseguin/2006/05/25/httphandlers-%E2%80%93-learn-them-use-them/](http://codebetter.com/karlseguin/2006/05/25/httphandlers-%E2%80%93-learn-them-use-them/)

[http://www.hanselman.com/blog/ABoilerplateHttpHandler.aspx](http://www.hanselman.com/blog/ABoilerplateHttpHandler.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:17:38.800

假设您使用的是 IIS，那么请查看[URL Rewrite](http://www.iis.net/download/urlrewrite)，这将使您能够轻松地将所有对 .html 的请求转换为 .aspx

# java - Spring WS：什么类调用解组？

> ID：11496009
> 
> 赞同：1
> 
> 时间：2012-07-15T22:03:07.323
> 
> 标签：java, web-services, spring, jaxb2

任何人都知道在 Spring Web 服务中实际调用解组的类是什么？我想知道在肥皂迭代器中调用 un/marshalling 是否有效/必要。或者是否有更合适的拦截器来处理端点周围的未编组对象？如果是，我仍然想知道它在内部是如何工作的。

谢谢。

**编辑**

其实我用的`org.springframework.ws.server.EndpointInterceptor`更准确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T04:15:59.670

[AbstractMarshallingPayloadEndpoint](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/server/endpoint/AbstractMarshallingPayloadEndpoint.html)是将请求负载解组为对象并将响应对象编组为 XML 的 Endpoint，查看[其 invoke() 方法源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.ws/spring-ws-core/2.0.5.RELEASE/org/springframework/ws/server/endpoint/AbstractMarshallingPayloadEndpoint.java#AbstractMarshallingPayloadEndpoint.invoke%28org.springframework.ws.context.MessageContext%29)：

```
public final void invoke(MessageContext messageContext) throws Exception {
    WebServiceMessage request = messageContext.getRequest();
    Object requestObject = unmarshalRequest(request);
    if (onUnmarshalRequest(messageContext, requestObject)) {
        Object responseObject = invokeInternal(requestObject);
        if (responseObject != null) {
            WebServiceMessage response = messageContext.getResponse();
            marshalResponse(responseObject, response);
            onMarshalResponse(messageContext, requestObject, responseObject);
        }
    }
} 
```

AbstractMarshallingPayloadEndpoint 需要一个对 XML 封送器的引用：

> *   Castor XML：org.springframework.oxm.castor.CastorMarshaller
> *   JAXB v1：org.springframework.oxm.jaxb.Jaxb1Marshaller
> *   JAXB v2：org.springframework.oxm.jaxb.Jaxb2Marshaller
> *   JiBX：org.springframework.oxm.jibx.JibxMarshaller
> *   XMLBeans：org.springframework.oxm.xmlbeans.XmlBeansMarshaller
> *   XStream：org.springframework.oxm.xstream.XStreamMarshaller

请注意，在 Spring-OXM 中，所有 marshaler 类都实现 Marshaller 和 Unmarshaller 接口，为 OXM 编组提供一站式解决方案，例如[Jaxb2Marshaller](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-oxm/3.1.1.RELEASE/org/springframework/oxm/jaxb/Jaxb2Marshaller.java#120)，因此在 applicationContext 中连接您的 AbstractMarshallingPayloadEndpoint 实现，如下所示：

```
<bean id="myMarshallingPayloadEndpoint"
    class="com.example.webservice.MyMarshallingPayloadEndpoint">
    <property name="marshaller" ref="marshaller" />
    <property name="unmarshaller" ref="marshaller" />
    ... ...
</bean> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:30:35.000

[MethodArgumentResolver](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/server/endpoint/adapter/method/MethodArgumentResolver.html)的实现负责将请求负载映射到适当的格式（xml 文档、Dom4j、Jaxb 等），这发生在调用端点之前。拦截器仅获取原始 xml 源（javax.xml.transorm.Source）。

如果您想在拦截器中解组原始 xml，那么您将必须获取对解组器的引用并自己执行此操作，似乎没有任何[EndpointInterceptor](http://static.springsource.org/spring-ws/site/apidocs/org/springframework/ws/server/EndpointInterceptor.html)的孩子可以为您提供解组的内容（考虑到它可以解组为许多不同的格式）。

# algorithm - 在线算法和离线算法有什么区别？

> ID：11496013
> 
> 赞同：41
> 
> 时间：2012-07-15T22:03:23.123
> 
> 标签：algorithm, data-structures

这些术语在我的数据结构教科书中使用，但解释非常简洁和不清楚。我认为这与算法在每个计算阶段拥有多少知识有关。

（请不要链接到 Wikipedia 页面：我已经阅读过它，我仍在寻找澄清。如果我是 12 岁的解释和/或示例会更有帮助。）

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-15T22:21:54.803

## 维基百科

维基百科页面非常清楚：

> 在计算机科学中，在线算法是一种可以以串行方式逐个处理其输入的算法，即按照将输入馈送到算法的顺序，而无需从一开始就获得整个输入。相比之下，离线算法从一开始就给出了整个问题数据，并且需要输出解决手头问题的答案。（例如，选择排序要求在对其进行排序之前给出整个列表，而插入排序则不需要。）

让我扩展上面的内容：

离线算法需要在算法开始之前的所有信息。在 Wikipedia 示例中，[选择排序](http://en.wikipedia.org/wiki/Selection_sort)是*离线*的，因为第 1 步是`Find the minimum value in the list`. 为此，您需要提供整个列表 - 否则，**您怎么可能知道最小值是多少？**你不能。

相比之下，插入排序是*在线*的，因为它不需要知道将排序的值以及在算法运行时请求的信息。简而言之，它可以在每次迭代中获取新值。

## 还是不清楚？

想想下面的例子（对于四岁的孩子！）。大卫要求你解决两个问题。

在第一个问题中，他说：

> “我要给你两个不同质量的球，你需要同时把它们从塔上扔下来……只是为了确保伽利略是对的。你不能用手表，我们只会用眼球它。”

![在此处输入图像描述](../Images/31a9ba919fb240778abd4068a3181df5.png)

如果我只给你一个球，你可能会看着我，想知道你应该做什么。毕竟，指示很清楚。在问题开始时你需要两个球。这是一个**离线**算法。

对于第二个问题，大卫说

> “好吧，这很顺利，但现在我需要你继续在球场上踢几个球。”

![在此处输入图像描述](../Images/6b65051f09611adc117e7fba788f025d.png)

我继续给你第一个球。你踢它。然后我给你第二个球，你踢它。我也可以给你第三个和第四个球（你甚至不知道我会把它们给你）。这是一个**在线**算法的例子。事实上，你可能整天都在踢球。

我希望这很清楚：D

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-15T22:07:50.937

在线算法仅逐段处理输入，并且在算法开始时不知道实际输入大小。

一个常用的例子是调度：你有一组机器和一个未知的工作负载。每台机器都有特定的速度。您希望尽快清除工作量。但是由于您从一开始就不知道所有输入（您通常只能看到队列中的下一个），您只能估计哪台机器最适合当前输入。这可能会导致您的工作负载分布不理想，因为您无法对输入数据做出任何假设。

另一方面，离线算法仅适用于完整的输入数据。在算法开始处理数据之前，必须知道所有工作负载。

### 例子：

```
工作量：
   1\. 单位（重量：1）
   2\. 单位（重量：1）
   3\. 单位（重量：3）
机器：
   1.机器（1重量/小时）
   2.机器（2个重量/小时）

可能的结果（在线）：
   1\. Unit -> 2\. Machine // 2\. Machine 现在有 30 分钟的工作量
   2\. Unit -> 2\. Machine // 2\. Machine 现在的工作量为一小时
  任何一个
   3\. Unit -> 1\. Machine // 1\. Machine 现在有三个小时的工作量
  或者
   3\. Unit -> 2\. Machine // 1\. Machine 现在有 2.5 小时的工作量

 ==> 工作在 2.5 小时后完成

可能的结果（离线）：
   1\. Unit -> 1\. Machine // 1\. Machine 现在有一个小时的工作量
   2\. Unit -> 1\. Machine // 1\. Machine 现在有两个小时的工作量
   3\. Unit -> 2\. Machine // 2\. Machine 现在有 1.5 小时的工作量

 ==> 2小时后工作完成
```

请注意，离线算法中的更好结果是唯一可能的，因为我们从一开始就没有使用更好的机器。我们已经知道会有一个重型单元（单元 3），所以这个单元应该由最快的机器处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T22:07:33.580

离线算法在调用它的那一刻就知道它的所有输入数据。另一方面，在线算法可以在运行时获取部分或全部输入数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T04:33:53.943

如果算法事先不知道将要执行的数据，则称该算法是在线的。离线算法可能会提前看到所有数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-15T06:55:14.513

在线算法是一种接收一系列请求并响应每个请求立即执行操作的算法。

相反，离线算法在所有请求都被处理后执行动作。

[Richard Karp 的这篇](http://www.icsi.berkeley.edu/pubs/techreports/TR-92-044.pdf)论文更深入地了解了在线、离线算法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-07T12:26:46.373

我们可以在算法处理之前根据输入的可用性来区分离线和在线算法。

**离线算法：**所有输入信息都可用于算法并由算法同时处理。借助完整的输入信息集，该算法找到了一种有效处理输入并获得最佳解决方案的方法。

**在线算法：**输入是即时进行的，即所有输入信息不能同时提供给算法，而是作为一个序列或一段时间内的一部分一部分。在输入可用时，算法必须在不知道未来输入信息的情况下立即做出决定。在此过程中，算法会产生一系列决策，这些决策将对其整体性能的最终质量产生影响。

例如：**通信网络中的路由：**

来自不同来源的数据包到达最近的路由器。多条通信链路连接到路由器。当新的数据包到达路由器时，路由器必须立即决定将数据包发送到哪个链路。（假设所有链路都路由到目的地，所有链路带宽相同，所有链路都是到目的地的最短路径的一部分）。这里，目标是在不知道未来数据包的情况下，将每个传入的数据包分配给其中一个链路，以使每个链路的负载得到平衡。任何链接都不应超载。这是一个负载平衡问题。

在这里，路由器中实现的调度器不知道未来的数据包，但它必须为每个传入的数据包做出调度决策。相比之下，离线调度器对所有传入的数据包有充分的了解，然后它可以有效地将数据包分配给不同的链路，并可以最佳地平衡不同链路之间的负载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-07T12:48:09.897

**缓存缺失问题：**在计算机系统中，高速缓存是一种内存单元，用于避免较快的处理器和最慢的主内存之间的速度不匹配。使用缓存的目的是通过在缓存中保留一些经常访问的页面来最小化平均访问时间。假设这些页面可能会在不久的将来被处理器请求。通常，当处理器发出页面请求时，会从主存储器或辅助存储器中取出该页面，并将该页面的副本存储在高速缓冲存储器中。假设缓存已满，那么缓存中实现的算法必须立即决定替换缓存块，而不知道未来的页面请求。问题出现了：必须替换哪个缓存块？（在最坏的情况下，您可能会在下一刻替换缓存块，被替换的缓存块的处理器请求）。因此，算法必须以这样一种方式设计，即它在传入请求到达时立即做出决定，而无需事先了解整个请求序列。这种类型的算法被称为在线算法

# sql - 在 sql server 中检索类别数据及其子类别数据

> ID：11496015
> 
> 赞同：0
> 
> 时间：2012-07-15T22:03:29.373
> 
> 标签：sql, sql-server, asp-classic

我从另一篇文章中获得了这段代码：

```
SELECT bar
  FROM (SELECT S.subcategoryname As bar, 
               C.CategoryName AS SortName,
               ROW_NUMBER() OVER (PARTITION BY C.CategoryName 
                                      ORDER BY subcategoryname) As RowNum
          FROM category C 
     LEFT JOIN subCategory S ON C.CategoryID = S.CategoryID 
        UNION ALL
        SELECT C.CategoryName As bar, 
               C.CategoryName AS SortName, 
               0
          FROM category C) foo
ORDER BY foo.SortName, RowNum 
```

它有效，但我怎样才能检索到不仅仅是`categoryName`和`subCategoryName`. 有没有办法从所有列中检索数据？

![在此处输入图像描述](../Images/1f14bfd08f1adf154d34ab5b63f2fb6b.png)

我的代码：

```
select  * from (select s.titlu_subcerinta as bar,c.titlu_Cerinta As SortName, ROW_NUMBER() over(partition by c.titlu_Cerinta order by titlu_subcerinta) as RowNum
from cerinteProiect c left join subcerinteProiect s on c.id_cerinta = s.id_cerinta
UNION ALL
select c.titlu_Cerinta As bar, c.titlu_Cerinta As SortName,0
from cerinteProiect c
)
foo
order by
foo.SortName,RowNum 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:44:45.227

正如 OMG Ponies 所说，首先`SELECT FROM`是从`foo`. 如果您没有从 C 那里返回所有列，则您的外部查询无法获取它们。

展开内部查询的两个部分以捕获整个表，如下所示：

```
SELECT * --grab everything you get in the subquery
  FROM (SELECT S.subcategoryname As bar, 
               C.* --note how this grabs EVERYTHING in Category, as you want
               ROW_NUMBER() OVER (PARTITION BY C.CategoryName 
                                      ORDER BY subcategoryname) As RowNum
          FROM category C 
     LEFT JOIN subCategory S ON C.CategoryID = S.CategoryID 
        UNION ALL
        SELECT C.CategoryName As bar, 
               C.*, --this grabs everything again
               0
          FROM category C) foo
ORDER BY CategoryName, RowNum --both of these come from foo - no need to specify it 
```

# ado.net - 在 ADO.NET 中使用 DbProviderFactory 的静态实例？

> ID：11496018
> 
> 赞同：2
> 
> 时间：2012-07-15T22:03:57.273
> 
> 标签：ado.net, dbproviderfactories

我在我的 asp.net 应用程序中使用以下代码。根据此代码，对于应用程序的所有用户，将只有一个 DBProviderFactory 实例。这会在多用户环境中产生问题吗？因此所有用户都将使用相同的 DbProviderFactory 对象来创建连接。我不确定这是否会在多用户环境中产生某种类型的隐藏问题。

我之所以为 DbProviderFactory 使用静态实例，是因为每次需要实例化连接时都不会调用 GetFactory 方法。我认为，这将使获得连接对象的速度更快。我的推理有什么缺陷吗？

```
 public class DatabaseAccess
{

    private static readonly DbProviderFactory _dbProviderFactory =
 DbProviderFactories.GetFactory(System.Configuration.ConfigurationManager.ConnectionStrings["DB"].ProviderName);

    public static DbConnection GetDbConnection()
    {
        DbConnection con = _dbProviderFactory.CreateConnection(); 
        con.ConnectionString = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["DB"].ConnectionString;
        return con;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-22T00:55:45.283

它看起来不错，但可能不会产生有趣的效率。

.NET 中的对象创建速度很快。所以创建工厂并不需要很多时间。从远程数据库获取连接确实可以，但是对于连接池，这通常不是问题。

工厂可能似乎没有实现它自己的任何状态并且看起来它可能是不可变的。所以从不同的线程访问可能没问题。

静态对象不会被垃圾收集。我怀疑工厂的规模会扩大，所以这应该不是问题。

因此，您避免了一堆廉价的对象创建，一堆廉价的后台垃圾收集，并且派生类实际上具有状态并且不是线程安全的风险很小，具体取决于 GetFactory 返回的确切实现

# html - CSS背景属性的奇怪/不同值

> ID：11496026
> 
> 赞同：2
> 
> 时间：2012-07-15T22:05:23.027
> 
> 标签：html, css, svg

我正在检查一个网站的代码，我注意到它们通过 CSS 对元素的背景属性有一个不寻常的值。这似乎是一个渐变。有谁知道它是什么？如果有效？哪些浏览器支持它？

这是代码：

```
background:transparent url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxsaW5lYXJHcmFkaWVudCBpZD0iaGF0MCIgZ3JhZGllbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIHgxPSI1MCUiIHkxPSIxMDAlIiB4Mj0iNTAlIiB5Mj0iLTEuNDIxMDg1NDcxNTIwMmUtMTQlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwLjY1Ii8+CjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwLjkiLz4KICAgPC9saW5lYXJHcmFkaWVudD4KCjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJ1cmwoI2hhdDApIiAvPgo8L3N2Zz4=); 
```

我感谢任何和所有的帮助！

提前致谢！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T22:09:33.020

好吧，首先要做的是对它进行[**de-base64**](http://www.google.com/search?q=decode+base64)：

```
<?xml version="1.0" ?>
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
    <linearGradient id="hat0" gradientUnits="objectBoundingBox" x1="50%" y1="100%" x2="50%" y2="0%">
        <stop offset="0%" stop-color="#fff" stop-opacity="0.65" />
        <stop offset="100%" stop-color="#fff" stop-opacity="0.9" />
    </linearGradient>
    <rect x="0" y="0" width="100" height="100" fill="url(#hat0)" />
</svg> 
```

因此，您可以看到是的，它是一个渐变。非 IE 浏览器支持，IE 9+ 也支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:08:19.853

它是 base64 编码的 SVG 文件。此约定是使用 SVG 图形文件作为嵌入背景图像的一种方式。我在这里使用 Travelocity 徽标做同样的事情[http://mailmarkup.org/slideshow.xhtml](http://mailmarkup.org/slideshow.xhtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T22:09:50.430

I think all modern browsers support it. This is a scalable vector graphic (you often find those used for maps on wikipedia) file that is base64-encoded, that means it consists many bytes which wer converted to be used in ASCII character sets.

# c# - 尝试将字节数组转换为字符串时出错.....c#

> ID：11496032
> 
> 赞同：2
> 
> 时间：2012-07-15T22:06:04.920
> 
> 标签：c#, .net-4.0

这是我的代码：

```
byte[] base64String = //this is being set properly
var base64CharArray = new char[base64String.Length];
Convert.ToBase64CharArray(base64String,
                          0,
                          base64String.Length,
                          base64CharArray,
                          0);
var Base64String = new string(base64CharArray); 
```

当我运行它时，调用时出现以下错误`Convert.ToBase64CharArray`：

> 偏移量没有引用字符串中的位置，或者目标字符数组的长度不足。参数名称：offsetOut

我该如何解决这个问题，所以我可以将我的字节数组转换为字符串，或者有没有更好的方法将字节数组转换为字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T22:11:37.920

为什么需要 char 数组？只需将您的`byte[]` [直接](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)转换为 Base64 `string`：

```
string base64String = Convert.ToBase64String(myByteArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:10:07.910

base64 编码需要 4 个字符来编码 3 个字节的输入。你必须扩大你的输出数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T22:13:09.310

这是一种将字节数组转换为字符串的方法

```
static byte[] GetBytes(string str) 
{ 
    byte[] bytes = new byte[str.Length * sizeof(char)]; 
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length); 
    return bytes; 
} 

static string GetString(byte[] bytes) 
{ 
    char[] chars = new char[bytes.Length / sizeof(char)]; 
    System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length); 
    return new string(chars); 
} 
```

你真的不需要担心编码。

更多细节可以在[这里找到](https://stackoverflow.com/questions/472906/net-string-to-byte-array-c-sharp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T22:13:14.017

这是一种简单的做法

```
string System.Text.Encoding.UTF8.GetString(YourbyteArray) 
```

# c++ - 如何从 ASCII 转换为字符串或符号

> ID：11496033
> 
> 赞同：-6
> 
> 时间：2012-07-15T22:06:06.560
> 
> 标签：c++

我想将它输出`^`到控制台，但我想使用 ASCII 代码而不是值本身来完成。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T22:07:31.473

该符号称为[插入符号](http://en.wikipedia.org/wiki/Caret)。ASCII 码是`0x5e`十六进制的（= 十进制的 94）。

C版：

```
printf("%c", 0x5e); 
```

C++ 版本：

```
std::cout << static_cast<char>(0x5e); 
```

这两个都假定您在默认字符编码为插入符号分配 value 的系统上运行`0x5e`。

为避免不得不依赖此假设，最好不要使用 ASCII 代码，而是使用`'^'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T22:19:07.043

*插入符号*( `^`)的十六进制值**通常是** *0x5e*（十进制的*94*）。

```
std::cout << static_cast<char> (0x5e) << " " << (char)94 << " " << '\x5e'; 
```

^(^(**我的游戏表上的输出**：`"^ ^ ^"`))

* * *

我写*“最常”*是因为标准**不**保证用什么整数值来表示某个字符，因此你不应该做你暗示的事情。

即使它可能会以您想要的方式工作（因为大多数现代*操作系统*都使用该值表示*插入符号*），但不建议这样做..如果它不在标准中，没有人可以保证它可以在所有平台上工作， 在所有情况下。

* * *

### 标准是怎么说的？

> ### 2.3/3 字符集 [lex.charset]
> 
> 执行字符集和执行宽字符集分别是基本执行字符集和基本执行宽字符集的实现定义的超集。**执行字符集成员的值和附加成员集是特定于语言环境的**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:07:52.513

根据这个页面：[http ://www.ascii-code.com/](http://www.ascii-code.com/)

它是 ASCII 码 0x5e。

# android - 如何在 ScrollView 上叠加投影？

> ID：11496037
> 
> 赞同：7
> 
> 时间：2012-07-15T22:06:41.510
> 
> 标签：android, android-layout

我正在寻找一种将阴影覆盖到 ScrollView 上的方法，如下所示：

![阴影示例](../Images/0b3177e253d1a86b82d7f5d288d6f0ec.png)

我的意图是在滚动 ScrollView 的内容时保持在顶部的 ScrollView（绿色）上方和外部的另一个布局。ScrollView 应该在顶部有一个阴影覆盖，看起来来自上面的布局。

由于我希望 ScrollView 的内容滚动到阴影中，因此该阴影不能是上面布局的一部分，否则阴影将与下面的滚动内容保持分离。

有什么想法可以让这个阴影栩栩如生吗？我找到了 android:foreground 但后来读到它在 ScrollViews 上不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T10:54:45.750

好的，找到了解决方案。这就是我所做的：

为了在 ScrollView 上叠加阴影图像，我将 ScrollView 放在 FrameLayout 中，并通过 android:foreground 将阴影 drawable 应用到 FrameLayout。

```
 <FrameLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:foreground="@drawable/drop_shadow_bitmap"
    android:foregroundGravity="top|fill_horizontal" >

    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top" > 
```

# java - Db4o API 在 NetBeans 中看不到动态加载的类？

> ID：11496038
> 
> 赞同：0
> 
> 时间：2012-07-15T22:06:44.533
> 
> 标签：java, netbeans, classloader, db4o

我似乎遇到了我*认为*使用 db4o 和 NetBeans 的 ClassLoader 问题。当我使用来自 .../jre/lib/ext 的相同 jar 文件从终端运行完全相同的代码时，一切正常。问题是，当我对在运行时使用 ClassLoader 加载的某些类进行本机查询时，我从数据库中得到一个空列表，我*肯定*应该在其中得到一个包含一些元素的列表（正如我所说，相同的代码有效从命令行很好）。我觉得这可能是因为 NetBeans ClassLoader 与 JVM ClassLoader 的工作方式不同，但我不知道，我当然不是这方面的专家。这是我的主要功能的代码.....

```
////////////////////////////////////////////////////////////////////////////////////////////
package gql;

import java.io.*;
import java.util.*;
import com.db4o.*;

public class GQL {
    ////////////////////////////////////////////////////////////////////////////
    // GLOBAL VARIABLES
    ////////////////////////////////////////////////////////////////////////////
    private static ObjectSet dbObjects;
    private static LinkedList classes = new LinkedList();
    private static String dbPath, classPath;
    private static ObjectContainer db;
    private static ClassLoader coreClassLoader =
            ClassLoader.getSystemClassLoader();
    private static ClassLoader subClassLoader =
            ClassLoader.getSystemClassLoader();

    public static void main(String[] args) {
        ////////////////////////////////////////////////////////////////////////
        // CREATE DATABASE OBJECT
        ////////////////////////////////////////////////////////////////////////
        // If no path to a database is provided on the command line, print
        // error and exit program
        if (args.length < 1) {
           System.err.println("\nError: no database path provided.\n");
           return;
        } else if (args.length > 1) {
           dbPath = args[0];
           // TODO - dubug command line classpath
           classPath = args[1];
           db = Db4o.openFile(dbPath);
        } else {     // We assume that the database Classes are stored somewhere
           dbPath = args[0];    // along the CLASSPATH, and therefore classPath
           classPath = "";      // can be left empty
           db = Db4o.openFile(dbPath);
        }

        System.out.print("GQL> ");

        // The prompt of the interpreter is within a do-while loop, which can
        // be terminated by entering "exit"
        do {
           try {

               /////////////////////////////////////////////////////////////////
               // READ IN QUERY FILE
               /////////////////////////////////////////////////////////////////
               // We create a Scanner object to read tokens from the standard in
               // stream - these will be our DLOG files provided by the user
               Scanner fileScanner = new Scanner(System.in);
               String GQLFile = fileScanner.next();

               // Break loop and exit program if user enters "exit"
               if (GQLFile.equalsIgnoreCase("exit")) {
                   break;

               // If the user input is not preceeded by "@" and teminated with
               // ";" then the input is invalid - the user is prompted again
               } else if (!(GQLFile.substring(0,1).equals("@")) ||
                           !(GQLFile.substring(GQLFile.length()-1,
                               GQLFile.length()).equals(";"))) {

                   System.out.println("\nInvalid input.\nUsage:     "
                           + " @filename;\n");
                   System.out.print("GQL> ");
                   continue;

               } else {

                   // Parse out the "@" and ";" from the user's input and send
                   // this to a file Reader object
                   GQLFile = GQLFile.substring(1,GQLFile.length()-1);
               }

               // Now we create a reader object and give it the user's parsed
               // input - in the event of a FileNotFoundException, the user is
               // prompted again
               Reader reader;
               try {
                   reader = new FileReader(GQLFile);
               } catch (FileNotFoundException e) {
                   System.out.println("\nFile " + GQLFile +
                           " does not exist.\n");
                   System.out.print("GQL> ");
                   continue;
               }

               /////////////////////////////////////////////////////////////////
               // PARSE QUERY
               /////////////////////////////////////////////////////////////////
               // The parser and Lexer objects are created in the parser.java
               // and Lexer.java files, respectively - The parser takes the
               // Lexer as an argument - the value variable generated by the
               // parse() method will return the topmost grammar construct,
               // which in this case is a Query object
               parser p = new parser(new Lexer(reader));                      

               Query query = (Query) p.parse().value;
               /////////////////////////////////////////////////////////////////
               System.out.println("\n----------------------------Input Query-----" +
                       "-----------------------\n");

               System.out.println("\n                        SUCCESSFUL PARSE   " +
                       "                       \n");

               System.out.println("--------------------------------------" +
                       "------------------------------\n");
               /////////////////////////////////////////////////////////////////

               /////////////////////////////////////////////////////////////////
               // LOAD ALL CLASSES USED IN DATABASE INTO RUNTIME
               /////////////////////////////////////////////////////////////////
               // databse Classes should be kept on the CLASSPATH, or the path
               // to these classes should be provided as a second command line
               // argument
               boolean coreClassesLoaded = loadCoreClasses(coreClassLoader,
                       classPath);
               if (!coreClassesLoaded) {
                   System.err.println("\nError: one or more of core Classes"
                           + "Node, Egge and SimplePath could not be found.\n");
                   db.close();
                   return;
               }
               //
               System.out.println("Core classes loaded.\n");
               boolean subclassesLoaded = query.loadSubclasses(subClassLoader,
                       classPath);
               if (!subclassesLoaded) {
                   System.err.println("\nError: subclasses could not be" +
                           " loaded.\n");
                   db.close();
                   return;
               }
               //
               System.out.println("Subclasses loaded.\n");

               /////////////////////////////////////////////////////////////////
               // MAKE SURE THE DATABASE ACTUALLY CONTAINS SOME OBJECTS AND,
               // IF SO, PUT AN INSTANCE OF EACH CLASS REPRESENTED INTO THE
               // LINKEDLIST CLASSLIST - SINCE WE LOADED THE DATABASE CLASSES
               // INTO THE RUNTIME ENVIRONMENT, OBJECTS RETURNED BY DATABASE
               // QUERIES WILL REMAIN TRUE TO THEIR TYPE; IF WE HADN'T DONE
               // THIS, THESE OBJECTS WOULD BE RETURNED AS TYPE GENERICOBJECT
               /////////////////////////////////////////////////////////////////
               dbObjects = db.queryByExample(Object.class);
               if (dbObjects.hasNext()) {
                  query.addClassesToList(dbObjects, classes);
               } else {
                   System.err.println("\nError: no objects in database.\n");
                   db.close();
                   return;
               }
               //
               System.out.println(classes);

               /////////////////////////////////////////////////////////////////
               // SEMANTIC CHECKS                                             //
               /////////////////////////////////////////////////////////////////
               boolean headArgsAreSet = query.setHeadArgClasses(classes);    
               if (!headArgsAreSet) {                                        
                   db.close();
                   return;                                                   
               }                                                             
               boolean typesMatch = query.checkQueryTypes(db);         
               if (!typesMatch) {                                            
                   db.close();
                   return;
               }              

               /////////////////////////////////////////////////////////////////
               // EVALUATION
               /////////////////////////////////////////////////////////////////
               query.evaluateQuery(db);

           } catch (Exception e) {
               System.out.println("\nSYNTAX ERROR\n");
               e.printStackTrace();
           }

           System.out.print("GQL> ");
        } while (true);

        System.out.println("\nExiting...\n");
        db.close();
    }

    private static boolean loadCoreClasses(ClassLoader coreClassLoader,
            String classPath) {
        try {
            coreClassLoader.loadClass("Node");
            coreClassLoader.loadClass("Edge");
            coreClassLoader.loadClass("SimplePath");
        } catch (ClassNotFoundException cnfe) {
            return false;
        }
        return true;
    }
}

//////////////////////////////////////////////////////////////////////////////////////////// 
```

奇怪的是，我需要的类肯定会加载到运行时环境中，因为我使用它们来设置一些类成员变量，例如在“语义检查”部分中。所以就像*应用程序*可以看到动态加载的类，但 db4o API/数据库不能。此外，我将 Class jar 和 db4o jar 设置为 Netbeans 库，而不仅仅是在 .../jre/lib/ext 中。这是 Class 中的代码片段，我在其中实际使用了给我带来问题的 db4o 本机查询...

```
////////////////////////////////////////////////////////////////////////////////////////////

   public void evaluateQuery(ObjectContainer db) {
        if (this.hasPredicate) {
            ;
        } else {
            if (this.isNode) {
                List nodes = db.query(new Predicate() {
                    @Override
                    public boolean match(Node node) {
                        return (node.getName().equals("5"));
                    }
                });
                System.out.println("\n_________________RESULT__________________________");
                System.out.println("\nNode: " + nodes.get(0).getName()
                        //+ ".\n");
            }
        }
    }

//////////////////////////////////////////////////////////////////////////////////////////// 
```

...如果我执行以下操作，我仍然会得到一个空列表...

```
////////////////////////////////////////////////////////////////////////////////////////////

   public void evaluateQuery(ObjectContainer db) {
        if (this.hasPredicate) {
            ;
        } else {
            if (this.isNode) {
                List nodes = db.queryByExample(Node.class);
                System.out.println(nodes.size());
                for (int i = 0; i < nodes.size(); i++) {
                    System.out.println("\nNode: " + nodes.get(i).getName());
                }
            }
        }
    }

//////////////////////////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T01:02:55.320

嗯，我在这里没有看到任何动态类加载问题。您正在使用系统的类加载器，它应该对 db4o 可见。您甚至不需要加载类，db4o 将使用类加载器来完成。

您确定应用程序选择了相同的数据库吗？你用的是相对路径吗？

顺便说一句，您可以像这样显式设置[db4o 的类加载器](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/configuration/common/reflector.htm#kanchor76)。

```
EmbeddedConfiguration configuration = Db4oEmbedded.newConfiguration();

JdkLoader classLookUp = new ClassLoaderLookup(
        Thread.currentThread().getContextClassLoader(),
        new URLClassLoader(new URL[]{new URL("file://./some/other/location")}));
configuration.common().reflectWith(new JdkReflector(classLookUp));

ObjectContainer container = Db4oEmbedded.openFile(configuration,"database.db4o"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:42:55.660

好吧，这似乎是 Linux/Netbeans for Linux/Db4o 中的一个错误。我在 Windows 盒子上使用了完全相同的源文件，一切正常。我很失望，我不想在这个项目中使用 Windows。：/

# java - 应该如何访问已编译 jar 中的资源？

> ID：11496040
> 
> 赞同：8
> 
> 时间：2012-07-15T22:07:09.807
> 
> 标签：java, eclipse, jar, processing, embedded-resource

首先，我已经阅读了许多关于这个主题的 SO 问题，并尝试了其中建议的内容。

这是我的情况。我正在使用 Processing 框架编写一个 Java 应用程序，我正处于需要开始考虑打包应用程序的最后阶段。可以从命令行执行的 jar 文件是我尝试使用 Eclipse 中的导出功能构建的。

我的项目结构如下所示：

```
src/
   multiple packages/
libs/
   jar files and natives
data/
   fonts and images
config/
   json files 
```

当我导出 jar 文件并解压缩 jar 以检查其内容时，我发现这些目录的内容已转储到 .jar 的顶层。

看起来像这样：

```
.jar
    packages
    jar files
    fonts
    json files 
```

因此，当我尝试使用以下内容加载配置文件时：

```
BufferedReader reader = new BufferedReader( new FileReader( path ) ); 
```

当我在 Eclipse 中运行应用程序时，一切正常。但是 jar 文件会抛出一个`FileNotFoundException`.

我在 SO 上看到的许多关于此类问题的问题都建议使用 using`class.getClass().getResource()`或`class.getResourceAsStream()`. 我已经使用相对路径和文件名尝试了这两种方法，如下所示：

```
class.getResource( 'config.json' );
class.getResources( 'cfg/config.json' );
class.getResourceAsStream( '../../config.json' ); 
```

当从 Eclipse 或 jar 使用以下命令运行时，所有这些方法都返回 null：

```
java -jar myjarfile.jar 
```

我也愿意使用 Ant 文件。事实上，我现在正在使用导出功能生成的 Ant 文件来构建 jar。如果我可以添加一些东西来将目录添加到 jar 中，那也很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T22:10:13.867

要访问根目录中的资源，`/`请在路径前添加 a。如果不是，则相对于当前包执行此操作，这通常仅在资源物理上也位于源中的类旁边时才有用。

所以使用`class.getResourceAsStream("/config.json");`到达 jar 根目录中的 config.json。

另请注意，不直接支持 jars-inside-jars。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:12:01.650

您的 .jar 文件应该只包含与已编译代码的“包”相关的目录。您可能正在使用 /lib /WEB-INF 等引用 .war 结构，这是不同的。

如果你的包结构是：

```
 com.yourco.authentication 
```

还有你在登录中的课程

那么你的罐子应该是

```
/com/
  /yourco/
    /authentication/
        Login.class 
```

然后，您需要类路径中的 .jar 才能通过命令行运行 env。

我看到你注意到它在 Eclipse 中工作，它可能具有环境设置和导入所需的库等，所以很难准确判断。如果您的 packages/ 文件夹包含已编译的 java 代码，我不确定这在外部引用时是否有效，因此建议您在根文件夹中启动您的包。

# git - Git - 获取两个修订版之间相同的文件列表

> ID：11496041
> 
> 赞同：4
> 
> 时间：2012-07-15T22:07:29.320
> 
> 标签：git, git-diff

像的倒数`git diff --name-only`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:10:49.123

您可以使用以下`comm`命令和一些 shell 命令来执行此操作：

```
git ls-files >files.txt
git diff --name-only >diff.txt
comm -2 -3 files.txt diff.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T23:00:09.457

您可以通过查看选项中的唯一值`ls-tree`和`diff`使用`--name-only`选项来执行此操作（在一行中完成，以便稍后从历史记录中搜索和使用）：

```
cat <(git ls-tree --name-only -r HEAD) <(git diff --name-only HEAD^ HEAD) | sort | uniq -u 
```

在示例中，2 个修订版是 HEAD 和 HEAD^。这不会产生副作用输出文件。

# objective-c - iOS 应用启动时间过长无法显示

> ID：11496047
> 
> 赞同：0
> 
> 时间：2012-07-15T22:08:11.700
> 
> 标签：objective-c, ios, cocoa-touch, launching-application

在第一个应用程序上工作，完成了大部分编程，但应用程序在启动时需要太长时间才能在选项卡栏上显示第一个表格视图。启动需要 8-10 秒才能显示。寻求帮助以跟踪哪些代码花费了这么长时间等。这是一般的应用程序设置：带有 5 个选项卡的选项卡，包括导航栏、表格视图与详细视图和滚动视图的混合。表格视图的数据来自远程 Web 服务器的多个 json 提要。在 appdelegate.m 中，我设置了完整的选项卡/导航栏。我在标签栏上设置的每个单独的视图控制器中获得了 json 数据馈送。我使用了 Profiler，但不知道我在寻找什么以及在哪里寻找。启动时加载了什么？有关可能导致延迟的应用程序的一般设置的任何建议？它会加载标签栏上关联的所有视图吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:53:13.447

通过仪器运行您的程序。总是。每时每刻。它会告诉你大部分问题。

也就是说，您可能需要将启动任务委托给后台线程，并在数据可用时更新 UI。

使用 NSOperation、GCD 和相关技术来执行您的后台任务。

# java - 如何使 log4j 在 groovy 中正确解析类/方法名称？

> ID：11496049
> 
> 赞同：3
> 
> 时间：2012-07-15T22:08:21.023
> 
> 标签：java, groovy, log4j

我正在开发一个使用 log4j 进行日志记录的新 Groovy 应用程序，但是当我使用转换模式符号将调用者的类或方法名称插入到日志输出中时，我得到的是本机 java 类/方法名称，而不是时髦的。例如：

转换模式

```
"%d{dd-MM-yyyy HH:mm:ss,SSS} Digitizer: [%p] [%C.%M] %m%n" 
```

给我输出像

```
13-07-2012 15:49:30,667 Digitizer: [DEBUG] [org.apache.log4j.Category$debug.call] Environment: dev 
```

显然，总是告诉我调用者是 log4j 的日志消息没有用。

[在http://docs.codehaus.org/display/GROOVY/Logging](http://docs.codehaus.org/display/GROOVY/Logging)的 groovy 网站上有一个对一些 log4j 补丁的引用，看起来它可以解决这个问题，但是该页面已经一年多没有更新了那里提供的链接给出了404。

有谁知道我在哪里可以找到这个神秘的 log4j 补丁，或者在我的日志消息中获取有意义的调用者信息的任何其他方式，而不是将其实际硬编码到每个记录器调用中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:37:42.487

[http://web.archive.org/web/20100724050702/http://www.kotek.net/projects/log4j-groovy](http://web.archive.org/web/20100724050702/http://www.kotek.net/projects/log4j-groovy)

但是它可能不适用于当前版本的 groovy。

# java - 如何避免硬编码文件引用？

> ID：11496054
> 
> 赞同：1
> 
> 时间：2012-07-15T22:09:13.413
> 
> 标签：java

**我的代码：**

我目前正在开发一个游戏，并且在代码的几个不同部分中我正在使用一些资源（图像/声音/动画等）。为了避免两次加载相同的资源，我编写了一个 ResourceManager，如果我将字符串传递给它，它将返回所需的资源。

这是一个例子：

```
Image myImage = imageManager.getImage("princess"); 
```

这样，当我想使用它时，我可以在不知道文件名称或位置的情况下引用资源。这里的诀窍是我必须先加载图像，然后才能像这样获取它们：

```
imageManager.loadImage("res/princessImage.png", "princess"); 
```

这将从给定文件创建 ImageObject，并将其存储到具有给定键的 HashMap 中。

**我的问题：**

我真的不想硬编码这些资源的路径，因为每次我决定移动或重命名任何资源文件时都必须更改源代码。

**一个可能的解决方案（？）：**

我考虑创建另一个 HashMap，它读取某种 configFile 并将 in-code-resource-names 映射到 HashMap 中的资源路径。该文件看起来有点像这样：

```
princess: res/princess.png
hero: res/hero.png
sword: res/items/sword.png 
```

这样我就可以安全地使用诸如“公主”、“英雄”或“剑”之类的资源名称，并且在我编码时不用担心它们在硬盘上的位置。每当我移动或重命名资源文件时，我只需更新此配置文件中的路径/名称，一切都会好起来的。

另一方面，我认为拥有一个将每个 in-code-resource-name 映射到路径的巨型文件非常难看。这可能会导致一个巨大的 String to String HashMap，我也必须将其存储在 ResourceManager 中。事情可能会变得非常混乱/不清楚。

有人对我有更好的解决方案吗？

我真的很感谢你的帮助，

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T22:22:45.270

如您所述，使用配置或资源文件是一种很好的方法。但是，不要填充 HashMap，而是考虑使用`ResourceBundle`or `PropertyResourceBundle`。它旨在保存/访问这些东西。[http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)

# linux - 像 select() 或 poll() 这样的系统调用是如何在后台工作的？

> ID：11496059
> 
> 赞同：20
> 
> 时间：2012-07-15T22:09:44.133
> 
> 标签：linux, sockets, asynchronous, io

我知道异步 I/O 操作通过`select()`并且`poll()`不使用处理器时间，即它不是一个繁忙的循环，但是这些是如何在幕后真正实现的？它是否以某种方式在硬件中得到支持，这就是为什么使用这些处理器没有太多明显的处理器成本？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-15T22:29:52.767

这取决于`select`/`poll`正在等待什么。让我们考虑几个案例；为了简化，我将假设一台单核机器。

首先，考虑`select`等待另一个进程的情况（例如，另一个进程可能正在执行一些计算，然后通过管道输出结果）。在这种情况下，内核会将您的进程标记为等待输入，因此它不会为您的进程提供任何 CPU 时间。当其他进程输出数据时，内核会唤醒你的进程（给它在 CPU 上的时间），以便它可以处理输入。即使其他进程仍在运行，也会发生这种情况，因为现代操作系统使用*抢占式多任务处理*，这意味着内核会定期中断进程以让其他进程有机会使用 CPU（“时间片”）。

`select`等待 I/O时画面发生变化；例如，网络数据或键盘输入。在这种情况下，虽然过时的硬件必须让 CPU 旋转等待输入，但所有现代硬件都可以将 CPU 本身置于低功耗“等待”状态，直到硬件提供*中断*- 内核处理的特殊处理事件。在中断处理程序中，CPU 将记录传入的数据，并在从中断返回后唤醒您的进程以允许它处理数据。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-15T22:40:52.673

没有硬件支持。嗯，有……但没什么特别的，这取决于你在看什么样的文件描述符。如果涉及设备驱动程序，则实现取决于驱动程序和/或设备。例如，插座。如果您等待读取某些数据，则会出现一系列事件：

1.  一些进程调用 poll()/select()/epoll() 系统调用来等待套接字中的数据。有一个从用户模式到内核的上下文切换。
2.  当某些数据包到达时，NIC 会中断处理器。驱动程序中的中断例程将数据包推到队列的后面。
3.  有一个内核线程从该队列中获取数据并唤醒内核内部的网络代码以处理该数据包。
4.  当数据包被处理时，内核确定它所期望的套接字，将数据保存在套接字缓冲区中并将系统调用返回给用户空间。

这只是一个*非常*简短的描述，缺少很多细节，但我认为这足以说明问题。

另一个不涉及驱动程序的示例是 unix 套接字。如果您等待其中一个的数据，则等待的进程将添加到列表中。当套接字另一端的其他进程写入数据时，内核会检查该列表并再次应用第 4 点。

我希望它有所帮助。我认为这些例子是最好的理解它。

# objective-c - Objective C 中最好的多线程方法？

> ID：11496063
> 
> 赞同：6
> 
> 时间：2012-07-15T22:10:03.397
> 
> 标签：objective-c, ios, multithreading, cocoa, nsthread

我正在开发一个 iPad 应用程序，目前正在努力寻找最佳的多线程方法。让我用一个简化的例子来说明这一点：
*我有一个包含 2 个子视图的视图、一个目录选择器和一个画廊，其中包含所选目录中所有图像的缩略图。由于“下载”和生成这些缩略图可能需要很长时间，所以我需要多线程，这样视图的交互和更新就不会被阻塞。*

这是我已经尝试过的：
**[self performSelectorInBackground:@selector(displayThumbnails:) withObject:currentFolder];**
这很好用，因为用户交互没有被阻止，但是当用户在第一个文件夹仍在加载时点击另一个文件夹时，它会惨遭失败。两个线程试图访问相同的视图和变量，这会导致彼此之间的正确执行混乱。当用户点击另一个文件夹时，`displayThumbnails`当前加载的文件夹应该被中止。我没有找到任何方法来做到这一点..

**NSThreads**
我尝试了这个，但遇到了与第一种方法几乎相同的问题，我没有找到一种（简单的）方法来取消正在进行的方法。（是的，我知道`[aThread cancel]`但没有找到“恢复”线程的方法）。也许我应该`NSThread`继承并实现我自己的 isRunning 等方法？但是没有更好的方法或我忽略的第三个（甚至第四个和第五个）选项吗？

我认为这是一个相当简单的示例，并且我认为没有子类化可能有更好的解决方案`NSThread`。那么，你会怎么做？请发表您的意见！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T22:18:08.353

[NSOperationQueue](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)应该可以很好地完成这项任务。

另一种选择是普通的[GCD](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，但是，如果您从未使用过它，则 NSOperationQueue 可能是更好的选择，因为它几乎会自动引导您以“正确的方式”实现事物，具有明显的取消方式等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T22:19:02.987

您想使用 Concurrent NSOperations 在后台下载和处理图像。这些将由 NSOperationsQueue 管理。本质上，这些操作将被配置为每次操作获取一个图像，对其进行处理，将其保存在文件系统中，然后在主线程中向主应用程序发送消息，告知图像可用。

您可以查看 github 上的几个项目，这些项目展示了如何执行此操作 - 只需使用“Concurrent”或“NSOperation”搜索 github。

iOS 有一个非常好的工具来做后台工作。Grand Central Dispatch (GCD) 和 Blocks，但它们不允许您使用委托回调来拥有对象 - 因此是 NSOperation。

因此，您需要阅读有关块、GCD 的内容，然后查看一些开源 Concurrent NSOperations 代码。使用 Concurrent NSOperations 并不像使用块那么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:32:24.890

如果我有这个问题，我可能会采用这样的方法：

*   将加载图像并导致主线程显示结果的单个线程（我不喜欢让线程与 GUI 对象混淆）

*   当请求一个新目录时......好吧，这取决于你想如何管理事物。基本上，一个标准的队列结构（条件变量和数组）可以用于主线程，通过传递路径名来告诉线程“将需要这个目录”；即使在加载图像时（例如在每个图像之后），线程也会检查队列，并在出现时切换到新目录

*   您可以创建一个目录读取器对象来保存所有状态，并将路径索引的内容存储到字典中。当请求一个新目录时，首先检查该字典，如果该目录没有，则只创建一个新对象。这样，部分加载的目录将一直存在，直到再次需要它们，并且可以继续加载，而不必从头开始。

线程的伪代码：

```
while (forever)
   new element = nil
   if we have an active directory loader
       tell directory loader to load one image
       if false then make directory loader inactive
       lock queue condition
       if queue has elements
          new element = retrieve LAST element (we aren't interested in the others)
          empty queue
          unlock with status "empty"
       else
          unlock queue
   else
       lock queue on condition "has elements"
       new element = retrieve last element
       empty queue
       unlock with status "empty"
   if new element != nil
       if directory loader for new path does not exist
          setup new directory loader for new path
          store in dictionary
          make it the "active" one
       else
          make the current one the "active" 
```

至于目录加载器，它可能看起来像这样：

```
read one image:
   if there are still images to read:
       read, process and store one
       return true
   else
       performSelectorOnMainThread with an "update GUI" method and the image list as parameter
       return false; 
```

这只是一个速写；线程中有一些代码重复，我编写它的方式只会在读取所有图像后更新 GUI，而不是在我们读取它们时显示它们。您必须复制当前图像列表，或者如果您想这样做，则添加同步。

# bash - 如何关闭第一个字符的红色标记的对话？

> ID：11496076
> 
> 赞同：0
> 
> 时间：2012-07-15T22:11:51.867
> 
> 标签：bash

如何使用对话框关闭第一个字符的红色字母？谢谢你。

[http://www.img-share.net/uploads/bCK3OcaG20.jpg](http://www.img-share.net/uploads/bCK3OcaG20.jpg)

完成代码..

```
对话框 --menu “菜单” 0 0 0\
"001" "MySQL 状态"\
"002" "MySQL 安装"\
"003" "MySQL 重新加载"\
"004" "MySQL 重启"\
"005" "MySQL 启动"\
"006" "MySQL 停止"

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:35:20.423

**应该有一种使用--colors**的棘手方法来做到这一点。 [http://www.linuxquestions.org/questions/programming-9/bash-scripting-using-color-in-dialog-612388/](http://www.linuxquestions.org/questions/programming-9/bash-scripting-using-color-in-dialog-612388/)

使用它会创建一个带有 Hi(word is red) There(word is pink) 的对话框

```
dialog --colors --infobox "\Zb\Z1Hi \Z5there" 3 12 
```

可能有一种改变颜色的方法，但如果你不介意一个混乱的解决方法：

```
dialog --menu "Menu" 0 0 0 " 1" "Description 1" " 2" "Description 2 etc" 
```

通过在数字前添加一个空格，没有什么可以突出显示的。

# java - 在 Android 中创建和处理应用程序超时

> ID：11496083
> 
> 赞同：3
> 
> 时间：2012-07-15T22:13:12.070
> 
> 标签：java, android

我想知道处理应用程序超时的最佳方法是什么，例如 PayPal。我希望用户在 1、5 或 15 分钟的超时时间之间进行选择，因此当他们打开应用程序时，他们必须再次登录。

我的 onResume 方法：

```
@Override
    public void onResume() {

    } 
```

它里面什么都没有。但它崩溃了。

注意：我的应用程序有两个活动。第一个活动是登录屏幕。第二个活动是主屏幕。onResume 方法在第二个活动中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T22:25:28.710

我在我的一个应用程序中做到了这一点：

您需要一个基础 Activity，您的所有 Activity 都将从该基础 Activity 扩展。在此基本活动中，添加一个变量来跟踪“上次用户活动”时间戳。在我的例子中，用户活动仅仅意味着他们触摸了屏幕。所以重写 dispatchTouchEvent(MotionEvent ev) 方法，并将“最后一个用户活动”设置为当前时间戳。

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    lastActivity = new Date().getTime();
    return super.dispatchTouchEvent(ev);
} 
```

然后在此基本活动的 onResume() 方法中，只需将当前时间戳与“上次用户活动”时间戳进行比较。如果超过 1、5 或 15 分钟（可由用户配置），则启动另一个活动以要求用户登录。

```
@Override
public void onResume() {
    long now = new Date().getTime();
    if (now - lastActivity > xxxx) {
       // startActivity and force logon
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:18:49.040

我会在应用程序运行并处于活动状态时使用心跳计时器，并跟踪当前时间（或上次活动时间 - 任一时间）。当应用程序从用户点击主页按钮进入后台时（或退出 - 不确定您如何处理后退按钮） - 通过将其保存到共享首选项来记住该值。当应用程序启动或恢复时，您可以将当前时间与保存的时间进行比较，如果增量大于“x”，那么您可以将用户引导至登录屏幕。确保您在主要活动中关注 onPause、onResume、onStop、onDestroy 事件。我会亲自使用 System.currentTimeMillis 作为时间戳，然后根据您的时间（秒、分钟等）比较毫秒并适当划分。

# javascript - ContentFlow 是不仅支持图像而且支持 div 的库的唯一选择吗？

> ID：11496086
> 
> 赞同：0
> 
> 时间：2012-07-15T22:13:37.667
> 
> 标签：javascript, jquery, coverflow

我正在尝试使用图像列表和样式化的 div 创建一个覆盖流效果。

那里唯一似乎支持图像以外的任何东西的库是[http://www.jacksasylum.eu/ContentFlow/](http://www.jacksasylum.eu/ContentFlow/)，但它有点无人维护，我在为非图像元素设置一些属性时遇到问题。

它是唯一具有这种能力的图书馆吗？

没有任何基于 jQuery 的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:18:35.273

这里有2个可能对你有用：

[迂回](http://fredhq.com/projects/roundabout)

[翻页](http://slobodan.99k.org/plugins/coverscroll.html)

# parsing - 基于 LLVM 的编译器的前端

> ID：11496087
> 
> 赞同：5
> 
> 时间：2012-07-15T22:13:42.083
> 
> 标签：parsing, compiler-construction, llvm, clang, llvm-gcc

我正在尝试开发基于 LLVM 基础架构的编译器。我的语言具有类似 C 的语法，因此我想利用现有的 C 编译器。现在我专注于前端（词法分析，解析），但我对哪个前端是最好的方法感到困惑。Clang、llvm-gcc 还是传统的 flex/bison 工具？

我对最简单的解决方案特别感兴趣，它允许我为编译器的后期阶段生成 LLVM IR 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T10:03:35.187

如果您想手动编写所有代码，那么我向您推荐 LLVM 教程 Kaleidoscope：

*   [http://llvm.org/docs/tutorial/](http://llvm.org/docs/tutorial/)

# heroku - Dyno定价混乱

> ID：11496093
> 
> 赞同：1
> 
> 时间：2012-07-15T22:14:47.413
> 
> 标签：heroku

以下陈述对我来说似乎是矛盾的

Dynos 每小时收费 0.05 美元，按比例计算到秒。例如，具有四个测功机的应用程序**每小时运行四个测功机的费用为 0.20 美元。**

定价基于日历时间。**如果您将应用设置为四个测功机，则无论您的网站在此期间提供的流量如何**，您都需要支付每小时 0.20 美元的费用。

 **（如此[处所示](https://devcenter.heroku.com/articles/how-much-does-a-dyno-cost)）

我将其解读为“您将为运行测功机付费”然后“无论是否使用测功机都将向您收费”

请澄清我的理解，因为似乎大多数人都没有同样的困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T01:13:16.590

当 Heroku dyno 准备好接收请求时，它被认为正在运行，而不一定是在它实际服务请求时。改写：

> 例如，具有四个 dyno 的应用程序按每小时配置四个 dyno 收取 0.20 **USD****

# asp.net - 将 DATE / DATETIME 元素分成不同的列以便在 MySQL 中快速查询？

> ID：11496098
> 
> 赞同：1
> 
> 时间：2012-07-15T22:15:16.967
> 
> 标签：asp.net, mysql, sql

我想将数据存储在 MySQL 中并根据当天进行查询。我想知道这样做的最佳做法是什么。

我想存储每天的数据总数，因此查询总数据会很快。我想按如下方式对我的表进行建模：

```
TotalsByCountry
- Year
- Month
- Day
- countryId
- totalNumber 
```

当我**查询特定日期和特定国家/地区的总计时**，我将基于 4 列查询表，即年、月、日和国家 ID。

我想知道这是否是一个好的做法，或者有更好的方法，比如使用一列保存月、日和年的数据，并只查询两列，即日期时间列和国家 ID。

需要您帮助选择正确的表格建模方式。我还想制作另一个表格来存储基于性别的总数，所以也要考虑到这一点。

数据需要经常访问，也许**是实时的，**因为我想实时显示数据的变化。我将在 asp.net 中开发 Web 应用程序，并可能使用 Web 套接字来创建将实时更新用户数据的持续连接。所以当数据发生变化时，会实时反映在用户网页上。这就是为什么我需要一个可以用于许多查询的表建模。我将使用缓存几秒钟，因此它需要对 db 造成太大压力。

我希望我提供了足够的信息，如果没有，请发表评论，我会回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:05:32.250

使用三个单独的列来存储日期（年/月/日）的每个单独元素会在插入性能和磁盘空间方面给数据库增加不必要的开销。

您要做的只是有一个单独的`DATETIME`列来存储日期和时间，并在`(countryId, datetime_col)`.

即使您想根据特定的日期或月份查询所有行，MySQL 仍然能够利用 DATETIME 字段上的索引，前提是您以正确的方式编写查询并确保永远不会*包装*DATETIME 列执行条件检查时在函数内。

以下是编写查询的方法，以便它仍然能够利用索引：

```
-- Get the sum of totalNumber of all rows based on current day
-- where countryId = 1

SELECT SUM(totalNumber) AS totalsum
FROM   tbl
WHERE  countryId = 1 AND
       datetime_col >= CAST(CURDATE() AS DATETIME) AND
       datetime_col <  CAST(CURDATE() + INTERVAL 1 DAY AS DATETIME) 
```

通过在裸 DATETIME 列上进行比较，查询仍然是 sargable（即能够利用索引范围扫描）并且 MySQL 将能够使用索引来快速查找行。

另一方面，如果您尝试将 DATETIME 列包装在函数中以进行比较：

```
-- Get the sum of totalNumber of all rows based on current day
-- where countryId = 1

SELECT SUM(totalNumber) AS totalsum
FROM   tbl
WHERE  countryId = 1 AND
       DATE(datetime_col) = CURDATE() 
```

...这将是非常低效的，因为`DATE()`包装列的函数有效地将查询呈现为不可分割，并且您设置的包含 DATETIME 列的任何类型的索引都不会被使用。

**您还可以有效地查询当月**所有行的总和：

```
-- Get the sum of totalNumber of all rows based on current month
-- where countryId = 1

SELECT SUM(totalNumber) AS monthsum
FROM   tbl
WHERE  countryId = 1 AND
       datetime_col >= CAST(CONCAT(YEAR(NOW()), '-', MONTH(NOW()), '-01') AS DATETIME) AND
       datetime_col <  CAST(CONCAT(YEAR(NOW()), '-', MONTH(NOW()), '-01') AS DATETIME) + INTERVAL 1 MONTH 
```

在**本年度**内：

```
-- Get the sum of totalNumber of all rows based on current year
-- where countryId = 1

SELECT SUM(totalNumber) AS yearsum
FROM   tbl
WHERE  countryId = 1 AND
       datetime_col >= CAST(CONCAT(YEAR(NOW()), '-01-01') AS DATETIME) AND
       datetime_col <  CAST(CONCAT(YEAR(NOW()), '-01-01') AS DATETIME) + INTERVAL 1 YEAR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:23:38.913

我的论点是：如果您想快速进行数据库查找，则需要使用索引的良好构建查询。您的方法需要 4 个索引（这意味着插入速度较慢），使用单个日期列只需要两个索引，如果您需要搜索日期范围，查询的复杂性也会增加。

# android - android.view.WindowManager$BadTokenException: - 活动开始时弹出窗口

> ID：11496099
> 
> 赞同：1
> 
> 时间：2012-07-15T22:15:17.557
> 
> 标签：android

我一直在寻找这个问题的答案，但大多数似乎都指向 getApplicationContext() 问题，但我没有使用 getApplicationContext()。基本上，我试图在活动启动时打开一个弹出窗口，但是当活动启动时，它会因上述错误而强制关闭。

我写的代码是：

```
protected void onCreate(Bundle paramBundle) {
    super.onCreate(paramBundle);
    setContentView(R.layout.installguides_menu);
    setTitleFromActivityLabel(R.id.title_text);

    btn_Back = (Button) findViewById(R.id.btn_Back);
    btn_Back.setOnClickListener (btn_Back_onClick);

    btn_Ubuntu10Guide   = (Button) findViewById(R.id.btn_Ubuntu10Guide);
    btn_Ubuntu12Guide   = (Button) findViewById(R.id.btn_Ubuntu12Guide);
    btn_BacktrackGuide  = (Button) findViewById(R.id.btn_BacktrackGuide);
    btn_DebianGuide     = (Button) findViewById(R.id.btn_DebianGuide);

    btn_Ubuntu10Guide   .setOnClickListener (btn_Ubuntu10Guide_onClick);
    btn_Ubuntu12Guide   .setOnClickListener (btn_Ubuntu12Guide_onClick);
    btn_BacktrackGuide  .setOnClickListener (btn_BacktrackGuide_onClick);
    btn_DebianGuide     .setOnClickListener (btn_DebianGuide_onClick);

    LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
    View popupView = layoutInflater.inflate(R.layout.donation_popup, null);  
             final PopupWindow popupWindow = new PopupWindow(
               popupView, 
               LayoutParams.WRAP_CONTENT,  
                     LayoutParams.WRAP_CONTENT);  

     Button btnDismiss = (Button)popupView.findViewById(R.id.dismiss);
     btnDismiss.setOnClickListener(new Button.OnClickListener(){

     public void onClick(View v) {
      popupWindow.dismiss();
     }});

     popupWindow.showAsDropDown(btn_Ubuntu10Guide, 50, -30);
} 
```

希望你们能提供帮助，一直在寻找答案几个小时，所以这是我最后的希望！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:09:05.173

我的第一个猜测是你不允许在里面显示一个弹出窗口`onCreate`。它用于初始化您的应用程序并构建您的布局，但您正在强制它显示一个弹出窗口。

`onStart()`是一个更适合展示它的地方。覆盖此功能并在那里显示您的弹出窗口。如果您更喜欢在 onResume() 中执行此操作，请注意，用户不仅会在启动应用程序时看到它，而且在导航到另一个活动后返回它时也会看到它。

**编辑 2：**尝试在 onStart 或 onCreate 中创建弹出窗口：

```
 LayoutInflater inflater = (LayoutInflater)
               this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            PopupWindow pw = new PopupWindow(
               inflater.inflate(findViewById(R.id.popup_layout), null, false), 
               100, 
               100, 
               true);

// delaying popup until after all application initialization is done
    findViewById(R.id.main_page_layout).post(new Runnable() {
       public void run() {
         pw.showAtLocation(findViewById(R.id.main_page_layout), Gravity.CENTER, 0, 0);
       }
    }); 
```

使用将 id 添加到您的活动和弹出布局中

```
android:id="@+id/main_page_layout" 
```

和

```
android:id="@+id/popup_layout" 
```

分别使它们与您将在上面的代码中使用的 id 匹配。

# java - 如何指导你的java编写程序在另一个程序中写入文本？

> ID：11496108
> 
> 赞同：-1
> 
> 时间：2012-07-15T22:17:21.660
> 
> 标签：java, eclipse, textbox

我是这个非常有用的网站的新手......所以我要感谢这里的每一个人：在我学习 C# 大约 2 年后，我开始通过 Eclipse 学习 Java 编程大约一个月，我开始使用 Java 是因为我知道我可以开发应用程序和游戏并将它们投放到开源市场（Playstore）......

所以我在 Java Eclipse 中编写了一个简单的程序，它需要你的 facebook 和 hotmail..etc 的 ID 和密码，并告诉你提供一个简短的主密码和 ID，这将帮助我避免键盘记录器并缩短我输入长 ID 和通行证的时间。该程序通过这些级别： 1）您运行程序 2）它告诉您为可编辑列表添加程序或网站。2.1）它为您添加到列表中的每个对象获取输入（我的意思是 ID 和 pass）。3) 然后你回到程序中的主选项卡，显示 2 个文本框，一个用于短 ID，另一个用于短通。并在程序/网站列表下方选择您要登录的网站。

**我在问什么：当我告诉我的 java 程序运行一个程序时，我找不到将命令定向到该程序以将您的真实密码和电子邮件 ID 写入文本框的方法......例如：Windows Live Messenger。 .. 我能做些什么？你能给我写一个有用的代码吗？它似乎与 C# 有所不同... ps - 我知道如何在 java 中运行程序，但我不知道如何在程序中指示命令。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:39:14.357

我想你想将参数传递给外部程序......

这是一种方法：

```
public class Runner{
  public static void main(String[] args) throws Exception {
  String[] cmd = { "C:\\Program Files\\MY PROGRAM.exe","PARAM1","PARAM2" };
    Runtime.getRuntime().exec(cmd);
    System.out.println("Done.");
  }
} 
```

# silverlight - 如何使单选按钮看起来像切换按钮？

> ID：11496109
> 
> 赞同：1
> 
> 时间：2012-07-15T22:17:27.310
> 
> 标签：silverlight, windows-phone-7, xaml

Windows Phone 7：如何使单选按钮看起来像切换按钮？我试图让选定的单选按钮看起来像一个按下的按钮。

基本上，我的姓名列表上有一个按“FName”、“LName”单选按钮的过滤器。RadioButton 占用过多的屏幕空间。按下的按钮将节省“O”使用的空间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:21:13.307

只有在覆盖模板单选按钮时才能执行此操作。

在 WPF 中，我们可以使用以下“hack”：

```
<RadioButton Style="{StaticResource {x:Type ToggleButton}}" /> 
```

我相信这不适用于 WP7。我建议您创建自己的 0 样式。您可以使用 Expression Blend 来方便您的工作。看看应该有帮助的写作风格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T23:49:55.267

您可以尝试更改您的 Xaml 以指定一个 ToggleButton，它是 RadioButtons 和 CheckBox 的基类，但由于它是一个 ToggleButton，您必须在`Checked`和`UnChecked`事件中互锁它们。请参阅[本文](http://www.silverlightshow.net/items/Using-the-ToggleButton-control-in-Silverlight-2-Beta-1.aspx)和此[MSDN 信息](http://msdn.microsoft.com/en-us/library/ms612601%28v=vs.95%29)。您唯一的其他选择是[为您的 RadioButtons 创建一个新样式](http://msdn.microsoft.com/en-us/library/cc296247%28VS.95%29.aspx)。

**从：**

```
<RadioButton  Content="First Name" Height="72" HorizontalAlignment="Left" Margin="38,92,0,0" Name="FName" VerticalAlignment="Top" Width="102" /> 
```

**到：**

```
<ToggleButton Content="First Name" Height="72" HorizontalAlignment="Left" Margin="38,92,0,0" Name="FName" VerticalAlignment="Top" Width="102" /> 
```

# php - 有没有办法使用 mongodb 和 $and 运算符在嵌套数组中查找元素？

> ID：11496110
> 
> 赞同：0
> 
> 时间：2012-07-15T22:17:28.737
> 
> 标签：php, mongodb, mongodb-php

我有一个文件：

```
"_id": ObjectId("THE DOCUMENT ID"),
   "GROUP NAME": "First Floor",
   "years": {
     "0": {
       "_id": "YEAR ID",
       "year_classes": {
         "0": {
           "class_name": "CLASS A",
           "_id": "CLASS ID",
           "participants": {
             "0": "PARTICIPANT ID" 
          } 
        },
         "1": {
           "class_name": "CLASS B",
           "_id": "CLASS ID",
           "participants": {
             "0": "PARTICIPANT ID" 
          } 
        },
      },
       "year_name": "YEAR 1" 
    },
     "1": {
       "_id": "YEAR ID",
       "year_classes": {
         "0": {
           "_id": "CLASS ID",
           "class_name": "CLASS C",
           "participants": [

          ] 
        } 
      },
       "year_name": "YEAR 2" 
    },
  } 
```

需要在一年中增加一个班级。该代码通过 $YEAR_ID 变量（是一个字符串）具有年份 ID，该类将被添加到该变量中。

因此，它必须检查由 $NEW_CLASS_NAME（字符串变量）给出的类名是否已在当年使用。

我看到了 mongo 的 $and 运算符，但我无法让它工作。如果它是一个 SQL，它看起来很像： WHERE `year_id`='$YEAR_ID' AND `class_name`='$NEW_CLASS_NAME'

这怎么能在 MongoDB 中完成？

* * *

更新：

查询：

{ "years.year_classes.class_name": $NEW_CLASS_NAME, "years._id": $YEAR_ID }

正在搜索的文档（所以它总是会返回 TRUE）不是同一个数组。

有没有办法指导查询在同一个数组中找到这两个值，所以一个具有该名称的类，它位于具有特定 ID 的年数组中的类数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:11:33.453

当您比较嵌入对象内的两个条件时，您需要使用 $elemMatch。[请参阅此处](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29#DotNotation%28ReachingintoObjects%29-Matchingwith%24elemMatch)的一般说明。

您的查询结构将类似于：

`db.coll.find({"years":{$elemMatch:{"year_classes.class_name":$NEW_CLASS_NAME,"_id":$YEAR_ID }}})`

# ios - 在 iOS 上使用 OpenCV 实时检测自定义图像标记

> ID：11496114
> 
> 赞同：4
> 
> 时间：2012-07-15T22:17:56.077
> 
> 标签：ios, opencv, augmented-reality, marker

我想要一些关于在实时视频源中检测自定义图像标记的提示，也许更多。我正在使用 OpenCV、iPhone 和相机源。通过自定义图像标记，我指的是预定义的图像，但它可以是任何类型的图像（不是特定设计的标记）。例如，它可以是一些摩天大楼的图片。

我已经使用过 ARTags 并了解它们是如何被检测到的，但是我将如何检测这个自定义图像，尤其是找出它的位置和方向？

是什么让一个好的自定义图像被成功检测到？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:18:03.017

AR 中最常用的标记是

*   AR 标记（一种简单形式的 QR 码）——由 AR Takeit 和其他人检测到的标记
*   二维码。有很多关于如何创建/检测/读取 QR 的示例。
*   点网格。与校准中使用的国际象棋网格类似。似乎它们的检测比经典的国际象棋网格更强大。OpenCV 在校准部分有与点网格检测相关的代码。此外，OpenCV 代码库提供了一个很好的起点来提取 3D 位置和方向。
*   国际象棋网格。类似于点网格。它们是标准校准图案，有些人将它们用于很长时间的标记检测。但他们最近失去了位置，被点网格所取代，当时有些人发现可以更准确地检测点。

**注意**：

网格是对称的。我打赌你已经知道了。但这意味着您将无法从中恢复完整的方向数据。您将获得网格所在的平面，但仅此而已。

**最后说明**：

前两个的代码和示例很容易在 Internet 上找到。他们被许多人认为是最好的。如果您决定使用网格图案，您必须享受一些数学和图像处理工作 :) 这将需要更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:20:09.407

**这个答案不再有效，因为 Vuforia 现在是付费引擎。**

我认为您应该尝试一下 Vuforia。这是一个 AR 引擎，可以使用您想要的任何图像作为标记。使 Vuforia 成为一个好的标记的是高频图像。

[http://www.qualcomm.com/solutions/augmented-reality](http://www.qualcomm.com/solutions/augmented-reality)

~~Vuforia 是一个免费使用的引擎。~~

# php - 如何检查是否在 php 中选中了至少 2 个复选框？

> ID：11496116
> 
> 赞同：0
> 
> 时间：2012-07-15T22:18:26.037
> 
> 标签：php

我需要进行 php 验证，说明至少应检查 2 个复选框...我一直在尝试不同的事情，但无法获得正确的结果。

```
 <?php
    if(!empty($_POST['opt'])) {
        foreach($_POST['opt'] as $check) {
                echo $check; 

        }
    $checkboxes = count($check); 
    echo '$checkboxes'; 

    }
    ?>       

    <form action="index.php" method="post">

    <input type="checkbox" name="opt[]" value="option1" />option1<br />
    <input type="checkbox" name="opt[]" value="option2" />option2<br />
    <input type="checkbox" name="opt[]" value="option3" />option3<br />

    <br /><br />
    <input type="submit" name="formSubmit" value="Send" />
    </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T22:21:10.647

```
if(count($_POST['opt']) >= 2)
{
    // at least 2 are checked
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:24:09.910

我的示例使用与第一人称相反的逻辑。

```
count_check = count($_POST['opt'])
if(count_check < 2)
{
  //stop submission
}
else
{
  //Proceed
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T22:29:53.173

你可以试试这个：

```
<?php

if( is_array($_POST['opt']) )
{
    foreach($_POST['opt'] as $check)
        echo $check; 

    if(count($_POST['opt']) >= 2)
    {
         echo 'Valid';
    }
    else
    {
         echo 'Not valid';
    }

}
else
    echo 'Nothing checked';

?> 
```

# entity-framework - 为什么实体框架会跳过我的一张表？

> ID：11496121
> 
> 赞同：0
> 
> 时间：2012-07-15T22:19:38.250
> 
> 标签：entity-framework

实体框架为我的每个表都创建了一个实体，除了一个，我不知道为什么。我从数据库生成它时选择它。

这是我的实体框架图，SQL中的图：http:
[//imgur.com/a/zY17T](http://imgur.com/a/zY17T)

注意RecipeMeal 是如何从实体框架中丢失的。有谁知道为什么会发生这种情况？

如果食谱是早餐、午餐等，RecipeMeal 应该存储。它不是食谱列，因为食谱可能是午餐或晚餐食谱，例如。

我正在使用 EF 5.0

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T22:21:49.617

实体框架具有对多对多关系的内置支持。

该表通过 和 中的两个属性`ICollection<T>`公开。`Meal``Recipe`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-15T15:46:45.500

我还发现，如果您的表没有主键，它也会被跳过。我的一张表只是一个汇总表，并不真正需要主键，也不会包含在逆向工程中。一旦我添加了主键，它就会被拾取。

# mysql - 在 Mysql SELECT 中未检索到带空格的数据

> ID：11496129
> 
> 赞同：-2
> 
> 时间：2012-07-15T22:21:41.580
> 
> 标签：mysql, select, join

我必须在我的数据库中获取一个联系人，但我的查询只返回我的联系人姓名中没有空格的地方，例如：“John”，如果我有“John Locke”，它不会返回，像这样：

这是我的选择：

```
SELECT c.nome AS nomeContato, c.cpf, c.email, c.grupo, c.informacoes_complementares,
en.logradouro, en.bairro, en.numero, en.complemento, en.cep, en.municipio, en.uf,
e.nome AS nomeEmpresa, e. cnpj, t.numero AS telefone
FROM contato AS c
INNER JOIN endereco AS en ON c.id_contato = en.id_contato
INNER JOIN empresa AS e ON c.id_contato = e.id_contato
INNER JOIN telefone AS t ON c.id_contato = t.id_contato
WHERE c.nome LIKE "Homer"; 
```

在此选择中，它返回“荷马”记录，但如果我尝试

```
SELECT c.nome AS nomeContato, c.cpf, c.email, c.grupo, c.informacoes_complementares,
    en.logradouro, en.bairro, en.numero, en.complemento, en.cep, en.municipio, en.uf,
    e.nome AS nomeEmpresa, e. cnpj, t.numero AS telefone
    FROM contato AS c
    INNER JOIN endereco AS en ON c.id_contato = en.id_contato
    INNER JOIN empresa AS e ON c.id_contato = e.id_contato
    INNER JOIN telefone AS t ON c.id_contato = t.id_contato
    WHERE c.nome LIKE "Bruce Waine"; 
```

它不返回，但两个联系人都在数据库中，有什么想法吗？

提前致谢。

已编辑我很笨，我的数据库崩溃了，我已经删除它并再次重新构建，现在选择正在工作！谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:03:07.690

尝试使用 LIKE 匹配部分字段时，您需要使用 '%' 通配符。在你的例子中： -

```
WHERE c.nome LIKE "%John%"; 
```

这将匹配 John、John Lock 等的记录。

我预计无法匹配“Bruce Waine”将归结为数据中该特定字段的开头或结尾处的其他字符，可能还有额外的空格、回车或此类字符。尝试：-

```
WHERE c.nome LIKE "%Bruce Waine%"; 
```

请注意，索引在不同程度上支持“LIKE”匹配。

如果这不能解决您的问题，那么查询可能并没有完全按照您的预期进行。

# tcl - Tcl 内存管理

> ID：11496135
> 
> 赞同：2
> 
> 时间：2012-07-15T22:22:20.443
> 
> 标签：tcl

我在一些文章中看到过 Tcl 使用引用计数来进行垃圾收集。我想知道这意味着什么，因为据我所知，Tcl 没有指针或引用，所以每个变量只被引用一次。那么它到底在计算什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:15:38.700

这个想法是 Tcl 对*值*而不是变量进行引用计数。

让我们引用[关于写时复制语义的 wiki 页面](http://wiki.tcl.tk/8570)：

> 每个值 (Tcl_Obj) 都有一个引用计数。每当将值传递给命令或分配给变量时，引用计数就会增加，并且不会进行复制。当要更改值时，实现首先检查引用计数。如果计数为 1，则没有其他对该值的引用，并且可以就地更改。如果计数大于 1，则有其他对该值的引用。如果要更改该值，则这些引用也将更改。为了防止这种情况发生，制作了一个值的副本（新的引用计数为 1），并在原地更改了副本。

这个解释中唯一缺少的是，当一个值的引用计数下降到 belov 1 时，该值被销毁。

有关核心信息，请阅读[`Tcl_Obj`手册页](http://www.tcl.tk/man/tcl8.5/TclLib/Object.htm)的“对象存储管理”部分和[这些](http://wiki.tcl.tk/1192) [讨论](http://wiki.tcl.tk/14880)。

# java - 欧拉计划 p21 的有趣程序行为

> ID：11496137
> 
> 赞同：3
> 
> 时间：2012-07-15T22:22:30.393
> 
> 标签：java, python, algorithm

我在 python 中找到了问题 21 的解决方案，它给出了正确的答案。我尝试了其他人的 java 代码，对于 10000 和 100000 的值，我得到了相同的答案，但是当尝试 1000000 时，我的代码返回的解决方案与 java 代码返回的其他两个解决方案不同，即使返回的所有三个解决方案都是相同的测试值 10000 和 1000000 和 50000。有人有任何想法吗？

我的 Python 代码

```
def amicable_pairs(n):
    """returns sum of all amicable pairs under n. See project euler for 
    definition of an amicable pair"""
    div_sum = [0]*n
    amicable_pairs_set = [0]*n
    for i in range(1, n):
        for j in range(i*2, n, i):
            div_sum[j] += i
    #for i in range(1, n):
     #   div_sum[i] = sum([j + i/j for j in range(2, int(math.sqrt(i)) + 1) if i % j == 0 and i != i/j])
      #  div_sum[i] = div_sum[i] + 1

    #print div_sum
    for j in range(n):
        if div_sum[j] < n and div_sum[div_sum[j]] == j and div_sum[j] != j:
            amicable_pairs_set[j] = j
            amicable_pairs_set[div_sum[j]] = div_sum[j]
    return sum(amicable_pairs_set) 
```

Java代码1：

```
public class AmicableNumbers {

    public static void main(String[] args) {
        long strTime = System.currentTimeMillis();
        int sum_ami = 0;
        for (int j = 1; j < 1000000; j++) {
            int ad = sum_devisors(j);
            if (((sum_devisors(ad)) == j) && (j != ad)) {
                sum_ami += j;
            }
        }
        System.out.println(sum_ami);
        long endTime = System.currentTimeMillis();
        System.out.println("time is " + (endTime - strTime) + " ms");
    }

    public static int sum_devisors(int number) {
        if ((number == 1) || (number == 2)) {
            return 1;
        }
        int sum = 0;
        int k = (int) Math.sqrt(number);
        for (int i = 2; i < k; i++) {
            if (number % i == 0) {
                sum += i;
                sum += (number / i);
            }
        }
        if (k * k == number) {
            sum += k;
        }
        return (sum + 1);// every number divided by 1
    }
} 
```

Java代码2：

```
import java.util.Scanner;

public class AmicableNumbers {

    /**
     * @author Pavan Koppolu
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        //scan the input
        System.out.println("Enter a number, to find out sum of amicable numbers: ");
        Scanner scan=new Scanner(System.in);
        int input=scan.nextInt();
        long before=System.currentTimeMillis();
        // getting the result
        long result=sumOfAllAmicableNumbersUptoGivenNumber(input);
        long after=System.currentTimeMillis();
        // prints the result on the console
        System.out.println("Sum of all amicable numbers below "+input+" : "+result+" Elasped Time : "+(after-before)+" ms");
    }
    /*
     * calculate the sum of the amicable numbers upto the given number
     */
    private static long sumOfAllAmicableNumbersUptoGivenNumber(int input)
    {
        long sum=0,factorsSum=0,sumOfFactors=0; 
        for(long j=2;j<input;j++)
        {
            factorsSum=getFactorsSum(j);
            if(j!=factorsSum)
            {
                sumOfFactors=getFactorsSum(factorsSum);
                if(j==sumOfFactors)
                    sum+=j;
            }   
            else
                continue;
        }       
        return sum;
    }
    /*
     * find out the sum of the factors
     */
    private static long getFactorsSum(long j)
    {
        long sum=1;
        for(int k=2;k<=Math.sqrt(j);k++)
        {
            if(j%k==0)
                sum+=k+j/k;
        }
        return sum;
    }
} 
```

实际上，对于 1000000 的输入，上述所有三个返回的解决方案彼此不同

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T17:03:00.720

关键是，有一对朋友小于100万，另一个大于100万，即

```
(947835,1125765), (998104,1043096) 
```

Python代码不计算它们，

```
for j in range(n):
    if div_sum[j] < n and div_sum[div_sum[j]] == j and div_sum[j] != j: 
```

但是 Java 代码会计算这些对中较小的成员。这解释了第二个 Java 代码的输出，因为

```
25275024 + 947835 + 998104 == 27220963 
```

第一个 Java 代码的输出较小，因为它省略了友好对

```
(356408, 399592) 
```

原因是

```
356408 = 596*598 
```

但在代码中有

```
int k = (int) Math.sqrt(number);
for (int i = 2; i < k; i++) { 
```

因此，对于所有可被非平方数整除的数字，除数和计算错误`floor(sqrt(n))`（请注意，第二个 Java 代码错误计算了所有平方的除数）。

# iphone - 怎样才能实现类似iPhone主屏的重组功能？

> ID：11496138
> 
> 赞同：2
> 
> 时间：2012-07-15T22:22:36.707
> 
> 标签：iphone, ios

我有一个垂直的 UIScrollView，它的宽度足以容纳一列按钮。按钮可以由用户拖动，但是当一个按钮被移动时，我希望其他按钮向上或向下移动。我能想到的唯一方法是在负责移动按钮的 UIPanGestureRecognizer 中，每次调用它的方法时`for`，在子视图中运行一个循环，检查 y 值。这似乎非常低效，并且需要跟踪哪些按钮已经移动，以防止它们多次移动。一定有更好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:32:25.033

[在这个项目](https://github.com/gmoledina/GMGridView/)和[这个项目中也](https://github.com/AlanQuatermain/AQGridView)实现了相同的功能。我希望项目代码能帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:30:23.290

您可以使用带有自定义 UITableViewCell 的 UITableView。只需在 UITableViewDelegate 上实现 canMoveRowAtIndexPath、moveRowAtIndexPath 和 targetIndexPathForMoveFromRowAtIndexPath

# android - Android无障碍服务向后兼容和果冻豆

> ID：11496140
> 
> 赞同：1
> 
> 时间：2012-07-15T22:22:58.490
> 
> 标签：android, android-support-library, android-compatibility

我有一个使用无障碍服务来监控事件的应用程序。在 ICS 之前的 android 版本中，它总是运行良好，但是对于 Jelly bean，我运气不佳。

正如文件提到的那样，我添加了

```
android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE" 
```

到清单文件中的我的服务。这会导致应用程序使用 xml 的声明性 xml 方法正常工作。

问题在于向后兼容性。对于姜饼等版本，我现在收到以下错误：

```
07-15 22:15:56.090: E/ACRA(1168): Caused by: java.lang.SecurityException: Not allowed to start service Intent { cmp=com.example/.MainRunningService (has extras) } without permission android.permission.BIND_ACCESSIBILITY_SERVICE 
```

我已更新到兼容性 jar 的最新版本，希望这可能会有所帮助，但仍然会出现错误。

我不确定如何获得旧版本和新版本之间的兼容性。

如果我从清单中删除 BIND_ACCESSIBILITY_SERVICE，那么我的应用程序不会显示在 Jelly Bean 中以能够打开可访问性。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T19:00:39.030

好的，马克墨菲向我提出了一些建议，这就是有效的。

子类化服务类，因此有 2 个版本。

然后在 res/values 目录中有一个 bools.xml 文件，在 res/values-v16 目录中也有一个

在 v16 中将 is_jelly_bean 布尔值设置为 true，并在 res/values 目录中设置 is_not_jelly_bean。

然后在清单中有这样的东西

```
<service android:name=".service.MainRunningService" android:enabled="@bool/is_jelly_bean"
             android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE">
        <intent-filter >
            <action android:name="android.accessibilityservice.AccessibilityService" />
        </intent-filter>

        <meta-data
            android:name="android.accessibilityservice"
            android:resource="@xml/accessibilityservice" />
    </service>

    <service android:name=".service.MainRunningServicePreJellyBean" 
             android:enabled="@bool/is_not_jelly_bean">
        <intent-filter >
            <action android:name="android.accessibilityservice.AccessibilityService" />
        </intent-filter>

        <meta-data
            android:name="android.accessibilityservice"
            android:resource="@xml/accessibilityservice" />
    </service> 
```

# performance - 如何加速 MATLAB 代码？

> ID：11496141
> 
> 赞同：5
> 
> 时间：2012-07-15T22:23:03.250
> 
> 标签：performance, matlab

尽管 MATLAB 作为一种数学语言很出色，但它的速度却没有它想象的那么快。我想知道加快运行 MATLAB 代码的一般做法是什么？例如，我知道如果不是运行 for 循环，而是可以以向量/矩阵格式进行计算，那么他/她将看到运行代码的加速。

我想知道还有什么其他建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T01:47:07.813

Here are a few basic performance tips:

1.  Learn to use the profiler to understand which parts of your computation are slow
2.  Limit the amounts of expensive function calls via vectorization
3.  Preassign arrays instead of growing them in loops
4.  Use multithreaded functions (such as `bsxfun`)
5.  Use the latest version of Matlab - there have been tremendous performance gains over the last 5 years
6.  Use the parallel toolbox for multicore and/or GPU processing
7.  Use efficient algorithms
8.  Use Java or C/C++ code where appropriate (though the speed-up can be disappointing)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T22:34:05.297

如果您正在执行许多易于并行化的操作，`parfor`则会自动并行化您的`for`循环： http: [//www.mathworks.com/help/toolbox/distcomp/parfor.html](http://www.mathworks.com/help/toolbox/distcomp/parfor.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-26T03:16:27.613

安装光速。

我最近经历了在我的 Mac 上安装 Tom Minka 的 Lightspeed 的令人沮丧的过程。在此过程中，我学到了一些值得与其他 Mac 用户分享的艰巨经验。我的系统有以下规格 OS X 版本 10.8.5 Xcode 版本 4.6.3 Matlab 版本 2011a

1) 确保 Lightspeed 安装在名称中没有空格的路径上。我错误地将它放在“库/应用程序支持/Matlab”中，这给我带来了无穷无尽的麻烦。特别是，它导致了 Tomer Levinboim (levinboim.blogspot.co.nz) 报告的相同问题，并增加了他的修复没有完全解决问题的问题！

2) 阅读 Michel Valstar 的笔记“在 Mac 上编译 Matlab Mex 文件”并安装推荐的 Mathworks 补丁 ( [http://www.mathworks.com/matlabcentral/answers/94092](http://www.mathworks.com/matlabcentral/answers/94092) )。此补丁应用了 Levinboim 确定的所有需要​​的标志/选项更改。

3) 将光速文件夹内 install_lightspeed.m 文件中的 options.COMPFLAGS 行更改为指向：

/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk

4) 在 Matlab 中检查当前路径是否指向 Lightspeed 文件夹。运行命令 install_lightspeed。如果成功运行 test_lightspeed。您现在应该拥有 Lightspeed 的工作版本！

5) 路径设置在会话之间保持不变，因此自述文件中建议的 startup.sh 方法在 Mac 上似乎是不必要的。但是，如果您想走这条路，请先阅读：
[startup.m 应该在哪里？](https://stackoverflow.com/questions/16531877/where-is-startup-m-supposed-to-be) [http://obasic.net/set-your-customized-startup-file-for-matlab](http://obasic.net/set-your-customized-startup-file-for-matlab)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T22:26:20.017

[您可能会在这里](http://www.psi.toronto.edu/~vincent/matlabindexrepmat.html)开始回顾一些开始考虑矢量化的方法。[在那之后，这里](http://home.online.no/~pjacklam/matlab/doc/mtt/)
给出的 PDF即使不完整，也提供了许多性能良好的 Matlab 习语。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T17:48:42.873

我刚刚在这里找到了这个：[Writing Fast MATLAB Code](http://optlab.mcmaster.ca/~yzinchen/fast-matlab-code.pdf)。由 Pascal Getreuer 和这里：[Lightspeed 工具箱](http://research.microsoft.com/en-us/um/people/minka/software/lightspeed/)。好东西...

# php - 如何在 PHPFog 中使用系统调用 php 脚本

> ID：11496154
> 
> 赞同：0
> 
> 时间：2012-07-15T22:25:54.497
> 
> 标签：php, phpfog

我有一个需要在后台运行的 php 脚本。目前在我的开发盒上我正在运行

```
shell_exec("php5-cgi <path>"); 
```

它工作正常。虽然，当我将代码推送到专用的 phpfog 云上时，似乎没有调用该脚本。我无法找出问题所在。是 exec_shell 不工作还是 php5-cgi 命令不存在。

我怎样才能更好地理解发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:05:12.723

您可以尝试`5-cgi`从您的 exec 调用中删除：

```
exec_shell("php <path>"); 
```

此外，您可以为此使用 cron 作业：http: [//docs.phpfog.com/customize/cron](http://docs.phpfog.com/customize/cron)

创建一个 cron 作业以`<path>`在适合您需要的间隔上运行（假设路径是一个 php 文件）。PHPFog 使这非常容易。

如果您尝试执行长时间运行的任务，而不是让浏览器等待结果，我建议您在数据库表中排队，然后使用 cron 作业执行处理这些排队任务的 php 脚本。我会使用来自客户端的 ajax 调用来检查任务的状态，然后在任务完成时刷新页面。

# linux - Magento：有趣的网址

> ID：11496156
> 
> 赞同：1
> 
> 时间：2012-07-15T22:26:18.047
> 
> 标签：linux, apache, magento, ubuntu

我在 Linux 上安装了 Magento，但 URL 看起来有点滑稽。例如，当我将浏览器指向 时`http://localhost/magento/`，URL 会自动更改为`http://localhost/magento/index.php/`看起来很奇怪的 URL，因为`index.php`它是文件而不是目录。然后，例如，当我点击购物车时，我被重定向到：`http://localhost/magento/index.php/checkout/cart/`

我只是想知道是否有人知道摆脱`/index.php/`浏览器地址栏中定义的 URL 中的中间位的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T22:49:49.600

1.  在 Magento 的管理面板中，将 "Use Web Server Rewrites" *(System → Configuration → Web → Search Engines Optimization)*设置为**YES**并将 "Use secure URL Frontend" *(System → Configuration → Web → Secure)*设置为**YES**。
2.  确保启用了 Apache 的重写模块`sudo a2enmod rewrite && sudo service apache2 restart`
3.  将以下规则添加到`.htaccess`Magento 根目录下的文件中：

    ```
    <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /magento/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /magento/index.php [L]
    </IfModule> 
    ```

# c# - 在 ASP.NET 中切换月份的按钮

> ID：11496158
> 
> 赞同：1
> 
> 时间：2012-07-15T22:26:22.327
> 
> 标签：c#, asp.net, calendar

我正在为 ASP.NET 开发日历。我没有使用 Calendar 控件，因为它非常有限。

我想知道如何以编程方式在不同月份之间切换，例如，显示上个月和下个月？

现在我只能更改一个月，然后月份就卡住了：如果先显示 7 月，那么我只能到 6 月。当我在六月并按下下个月按钮时，它会显示八月。AJAX 会是解决这个问题的好选择吗？

我的代码：

```
private static DateTime now = DateTime.Today;

protected void Page_Load(object sender, EventArgs e)
{

}

protected void btnPrev_Click(object sender, EventArgs e)
{
    lblDateCal.Text = now.AddMonths(-1).ToString("MMMM");
}

protected void btnNext_Click(object sender, EventArgs e)
{
    lblDateCal.Text = now.AddMonths(+1).ToString("MMMM");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:43:20.330

每次，您都使用 Now() 将月份递增或递减一。您需要保存当前导航到的月份。例如，将您导航到的最后一个日期保存在 ViewState 中，并在您的点击事件中使用它而不是 Now()。

例如：

```
protected DateTime UpdateDate(int offset)
{
    DateTime dt;
    if (ViewState["LastDate"] == null)
       dt = DateTime.Now.AddMonths(offset);
    else
       dt = ((DateTime)ViewState["LastDate"]).AddMonths(offset);
    ViewState["LastDate"] = dt;
    return dt;
}

protected void btnPrev_Click(object sender, EventArgs e)
{
    lblDateCal.Text = UpdateDate(-1).ToString("MMMM");
}

protected void btnNext_Click(object sender, EventArgs e)
{
    lblDateCal.Text = UpdateDate(1).ToString("MMMM");
} 
```

否则，如果您更喜欢使用静态变量，那么您需要通过每次点击来正确使用静态变量。也就是说，AddMonths() 方法不会隐式修改你的变量。

例如

```
 protected void btnPrev_Click(object sender, EventArgs e)
    {
        now = now.AddMonths(-1);
        lblDateCal.Text = now.ToString("MMMM");
    }

    protected void btnNext_Click(object sender, EventArgs e)
    {
        now = now.AddMonths(+1);
        lblDateCal.Text = now.ToString("MMMM");
    } 
```

但是，由于静态变量对应用程序来说是全局的，我认为这不是最好的方法。

这是一个很好的主题：[asp.net/C#中的静态变量](https://stackoverflow.com/questions/5536680/static-variables-in-asp-net-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:33:14.587

它发生的原因是因为您使用的是静态 DateTime 变量

请尝试这种方式

```
protected void Page_Load(object sender, EventArgs e)
{

}

protected void btnPrev_Click(object sender, EventArgs e)
{
    lblDateCal.Text = DateTime.Today.AddMonths(-1).ToString("MMMM");
}

protected void btnNext_Click(object sender, EventArgs e)
{
    lblDateCal.Text = DateTime.Today.AddMonths(+1).ToString("MMMM");
} 
```

# java - 使用 MyBatis 映射 java.util.Map 字段

> ID：11496161
> 
> 赞同：2
> 
> 时间：2012-07-15T22:27:16.930
> 
> 标签：java, map, mybatis

我想`java.util.Map`用 MyBatis 将数据映射到属性。我有这样的简单 POJO：

```
public class Bar {
     ...fields
}

public class Foo {
    private Map<String, Bar> bars;

   public Foo() {
        bars = new HashMap<String, Bar>();
   }

   ...

} 
```

如何使用 MyBatis 将数据映射到条形图？下面的示例不起作用，因为它总是将新地图设置为字段。

```
<resultMap id="fooResultMap" type="Foo">
   ...attributes
    <association property="bars" resultMap="barResultMap" />
</resultMap>

<resultMap id="barResultMap" type="map">
        <result property="key" column="bar_key" />
  <association property="value" javaType="Bar">
    ...attributes
  </association>
</resultMap> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:02:35.873

我已经对此进行了一些研究，并在 MyBatis Google group 上询问过，因为我对自己如何做这件事很感兴趣。

目前，这似乎是不可能的。`List<Bar>`如果您想在 Foo 对象中使用`<collection>`映射，您可以轻松地使其工作。

我尝试使用`<collection>`返回地图，但它不明白我要它做什么。

我现在知道的唯一方法是使用两个查询/映射自己管理它 - 一个用它的所有字段填充 Foo，而*不是*它的 Bars 集合。然后像下面列出的查询映射来拉回 Map 中的所有 Bars 并将其插入到您的 Foo 对象中：

```
@Select("SELECT bar_id, bar_name FROM bar WHERE foo_id = #{id}")
@MapKey("bar_name")
Map<String, Bar> getBarsById(int id); 
```

这将返回一个 Map，其中每个栏都有一个条目，其中条目的键是“bar_name”列的值。

MyBatis 团队建议在未来的版本中为此功能提出问题请求。

* * *

## 回答 #2

> 赞同：-11
> 
> 时间：2012-07-15T22:42:22.797

关于 MyBatis 和 HashMap ，实际上就是这样。

HashMap 类实现 Map 。**地图是一个接口**

因此**，因为 HashMap 实现了 Map ，所以 HashMap 是一个 Map。**

无论您是否使用泛型键，值都在它的末尾。

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

# iphone - 适用于 iPhone 的 cocos2d - 缩放后触摸不再正常工作

> ID：11496162
> 
> 赞同：1
> 
> 时间：2012-07-15T22:27:20.687
> 
> 标签：iphone, objective-c, ios, ios5, cocos2d-iphone

我对使用 Cocos2d for iPhone 比较陌生，并且我遇到了触摸位置的问题。目前，我只是想在屏幕上触摸和移动精灵，当图层未移动以及平移图层时（在我的情况下，在 X 方向上更改 self.position），这可以正常工作，但是，当我缩放时我的图层（例如：self.scale = .5）触摸不再移动精灵。我做了很多论坛搜索/谷歌搜索，我认为我的问题与我的坐标变换（节点空间/世界空间等）有关，但我不是 100% 确定。我确实注意到，当我缩放时，如果我单击没有缩放的精灵所在的位置，那么我可以移动精灵。这让我相信我的转换没有考虑到规模。

这是我目前用来获取触摸位置的坐标变换代码：

```
- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [self convertToNodeSpace:location];
    location = [[CCDirector sharedDirector] convertToGL:location];
} 
```

这是检查位置（与上面相同的位置变量）是否正在触摸精灵的代码，尽管我更加确信这段代码是正确的，谁知道呢！

```
for (CCSprite *sprite in movableSprites) {
    if (CGRectContainsPoint(sprite.boundingBox, touchLocation)) {
        NSLog(@"Woohoo, you touched a sprite!");
        break;
    }
} 
```

如果您需要更多信息，请告诉我，感谢您的阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:31:25.583

我认为你应该用比例加倍边界框

```
 for (CCSprite *sprite in movableSprites) {
    if (CGRectContainsPoint(sprite.boundingBox*sprite.scale, touchLocation)) {
       //touch sprite action
    }
} 
```

关于转换点，如果我需要一个绝对屏幕点，我总是使用：

```
convertToWorldSpace:CGPointZero. 
```

我不太确定为什么你需要在你的触摸位置使用它，当我需要忽略它们在父节点中的位置时，我通常会在精灵上这样做。

除此之外，如果您的游戏不是真正的多点触控游戏，您最好使用 ccTouchBegan 而不是 ccTouchesBegan。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:49:47.420

使用此函数获取精灵矩形。

```
-(CGRect)getSpriteRect:(CCNode *)inSprite
{
    CGRect sprRect = CGRectMake(
                                inSprite.position.x - inSprite.contentSize.width*inSprite.anchorPoint.x,
                                inSprite.position.y - inSprite.contentSize.height*inSprite.anchorPoint.y,
                                inSprite.contentSize.width, 
                                inSprite.contentSize.height
                                ); 

    return sprRect;
}

- (void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *myTouch = [touches anyObject];
    CGPoint location = [myTouch locationInView:[myTouch view]];
    location = [[CCDirector sharedDirector] convertToGL:location];

    for (CCSprite *sprite in movableSprites) 
    {
       CGRect rect = [self getSpriteRect:sprite];
       if (CGRectContainsPoint(rect, location)) 
       {
           NSLog(@"Woohoo, you touched a sprite!");
           break;
       }
   }
} 
```

# java - 如何通过 java 驱动程序通过聚合函数（如组、计数和不同）访问 mongodb 集合？

> ID：11496165
> 
> 赞同：1
> 
> 时间：2012-07-15T22:27:30.687
> 
> 标签：java, mongodb, mongodb-query

这是我的 mondb 集合：

```
 { "_id" : ObjectId("50033fb1ecc250aa369a678a"), "ID" : 1, "FirstName" : "ijaz",
"LastName" : "alam", "Age" : 21, "Address" : "peshawer" }
{ "_id" : ObjectId("50033fc2ecc250aa369a678b"), "ID" : 2, "FirstName" : "ashfaq"
,"LastName" : "khan", "Age" : 1921, "Address" : "sadkabad" }
{ "_id" : ObjectId("50033fdeecc250aa369a678c"), "ID" : 3, "FirstName" : "danyal"
,"LastName" : "alam", "Age" : 18, "Address" : "lahore" }
{ "_id" : ObjectId("50033ff7ecc250aa369a678d"), "ID" : 43, "FirstName" : "shahzad"
, "LastName" : "sad", "Age" : 22, "Address" : "nazirabad" } 
```

现在我想通过java驱动程序使用group，distinct和count等聚合函数，或者如何通过java驱动程序在查询中实现聚合函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:53:47.553

[Distinct](http://api.mongodb.org/java/2.7.2/com/mongodb/DBCollection.html#distinct%28java.lang.String%29)和[count](http://api.mongodb.org/java/2.7.2/com/mongodb/DBCollection.html#count%28%29)以及特殊的 Mongo 命令，你不需要做任何特殊的聚合来使用它们。只需在 DBCollection 实例上使用适当的参数调用它们。

```
myCollection.distinct("Age") // gives you all the ages in the collection
myCollection.count(new BasicDBObject("Age", 22)) // gives you a count of 22 year olds 
```

对于其他聚合操作，您需要 Java `GroupCommand`：

```
new GroupCommand(myCollection,
             new BasicDBObject("Age ", true),
             null,
             new BasicDBObject("count", 0),
            "function(key,val){ val.count++;}", 
             null); //gives counts of each age in the collection 
```

如果您在 Mongo 或更高版本的 2.1.x 开发版本上运行，请查看聚合框架。它比现有的 group 命令更好（但在此答案时尚未准备好生产）。

# javascript - CSS3 变换 + jQuery 翻牌问题

> ID：11496169
> 
> 赞同：1
> 
> 时间：2012-07-15T22:28:07.720
> 
> 标签：javascript, jquery, css

这是小提琴：http: [//jsfiddle.net/DerekL/pwbu4/6/](http://jsfiddle.net/DerekL/pwbu4/6/)

我正在使用 jQuery 来控制`transform`CSS3 中的属性以创建“翻牌”效果。在演示中，如果您将鼠标悬停在粉色方块上，它将向下翻转并显示背面。问题是如果您将光标移动到粉红色方块位置，动画将重新开始。它应该只在`mouseenter`和时翻转正方形`mouseleave`。所以基本上当你在方格上移动时，它甚至不会离开方格，因为翻转是由 完成的`rotateX`。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:17:51.767

基于 Esailija 的评论并进行了一些改进，但是添加另一个包装器将解决它。

[http://jsfiddle.net/DerekL/pwbu4/11/](http://jsfiddle.net/DerekL/pwbu4/11/)

# css - 更改css：悬停距离

> ID：11496170
> 
> 赞同：2
> 
> 时间：2012-07-15T22:28:15.753
> 
> 标签：css, webkit, onhover

我想知道是否有办法让 css`:onhover`更快发生（即我距离链接 10 像素，并且`:onhover`调用，而仍然 10 像素）。

**编辑：**我正在想办法改变`:onhover`滚动条的距离。

**编辑2：**这是代码：

```
html {
    overflow: auto;
}
body {
    position: absolute;
    top: 20px;
    left: 20px;
    bottom: 20px;
    right: 20px;
    padding: 30px; 
    overflow-y: scroll;
    overflow-x: hidden;
}
::-webkit-scrollbar {
    width: 5px;
}

/* Track */
::-webkit-scrollbar-track {
    -webkit-border-radius: 10px;
    border-radius: 10px;
    border: none;
}

/* Handle */
::-webkit-scrollbar-thumb{
    -webkit-border-radius: 10px;
    border-radius: 10px;
    background: rgba(200,200,200,0.1);
}
::-webkit-scrollbar-thumb:hover {
    -webkit-border-radius: 10px;
    border-radius: 10px;
    background: rgba(200,200,200,0.8); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:58:31.513

添加**`CSS border property`**到随后将接收悬停事件的元素。

**参考1：** [**jsFiddle Proximity Detector**](http://jsfiddle.net/NCvJL/1)

编辑：我现在看到您已经重新编写了对您的问题的*主要编辑。*

我查看了您的代码，并提出了您可能喜欢的 Chrome 滚动条的方法！

**参考2：** [**jsFiddle Scrollbar Proximity Detector**](http://jsfiddle.net/X3ApY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T22:53:37.310

我发现解决这种侵入性的 CSS 方法。透明`<divs>`、额外的标记和`margin/padding`方法会妨碍 UI 周围的环境。但如果它们适合你，那将是纯 CSS 方法。

如果您愿意使用 Javascript 来解决这个问题，您可以捕获`mousemove`并`body`计算关系。

**演示：http:** [//jsfiddle.net/ThinkingStiff/Buaze/](http://jsfiddle.net/ThinkingStiff/Buaze/)

### 脚本

```
function isNear( element, distance, event ) {
    var left = element.documentOffsetLeft - distance,
        top = element.documentOffsetTop - distance,
        right = left + element.clientWidth + ( 2 * distance ),
        bottom = top + element.clientHeight + ( 2 * distance ),
        x = event.pageX,
        y = event.pageY;
    return ( x > left && x < right && y > top && y < bottom );
};

document.body.addEventListener( 'mousemove', function () {
    var near = document.getElementById( 'near' );

    if( isNear( near, 20, event ) ) {
        near.textContent = 'is near!';
    } else {
        near.textContent = '';
    };
} );           

window.Object.defineProperty( Element.prototype, 'documentOffsetTop', {
    get: function () { 
        return this.offsetTop + ( this.offsetParent ? this.offsetParent.documentOffsetTop : 0 );
    }
} );

window.Object.defineProperty( Element.prototype, 'documentOffsetLeft', {
    get: function () { 
        return this.offsetLeft + ( this.offsetParent ? this.offsetParent.documentOffsetLeft : 0 );
    }
} ); 
```

### HTML

```
<div id="near"></div> 
```

### CSS

```
#near {
    border: 1px solid red;
    height: 100px;
    left: 50px;
    line-height: 100px;
    position: relative;
    text-align: center;
    top: 50px;
    width: 100px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T22:29:47.127

不，但是您可以将一个比目标元素大 10 像素的透明 div 直接放在它上面，然后`onhover`使用 Javascript 给它一个函数。不过，我认为纯 CSS 不可能做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T22:33:08.373

您不需要使用 javascript，您可以设置一个父包装容器`padding:10px`并在其上设置`:hover`选择器而不是您的子元素。

# vb.net - 使用 vb.net 以管理员身份运行文件

> ID：11496172
> 
> 赞同：0
> 
> 时间：2012-07-15T22:28:27.987
> 
> 标签：vb.net, runas

> **可能重复：**
> [以管理员身份从 vb.net 中启动批处理文件](https://stackoverflow.com/questions/11502696/start-batch-file-from-within-vb-net-as-admin)

我创建了一个应用程序。我需要以管理员身份使用 vb.net 启动一个程序。我知道你可以使用 runas，我几天前就这样做了，但我真的不记得以管理员身份运行它的代码。你能帮忙吗

我没有他们的用户名或密码。我只是想让它弹出一个框，询问他们是否愿意允许这种情况发生。

我不知道我的应用程序是以管理员身份运行的。我正在以管理员身份从我的另一个程序开始..

process.start("C:\filename.bat")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:40:51.143

我知道这是对另一篇文章的提及，但您应该查看此博客： [http ://dukelupus.wordpress.com/2011/01/25/how-to-force-net-application-to-run-as-an -administrator-on-windows-7vista/](http://dukelupus.wordpress.com/2011/01/25/how-to-force-net-application-to-run-as-an-administrator-on-windows-7vista/)

更新 app.manifest：

改变这个：

```
<requestedExecutionLevel level="asInvoker" uiAccess="false" /> 
```

对此：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T04:08:41.853

如果程序已经安装，您可以修改程序图标或快捷方式。

程序图标：右键>属性>兼容性>以管理员身份运行此程序

快捷方式：右键单击>属性>快捷方式>高级>以管理员身份运行

这些说明适用于 Windows 7。其他版本的 Windows 可能略有不同。

# delphi - 带有 IdHTTP 的 IdCookieManager 不发送 cookie

> ID：11496173
> 
> 赞同：1
> 
> 时间：2012-07-15T22:28:41.590
> 
> 标签：delphi, indy

我正在登录一个网站，试图让 cookie 运行。据我了解，将 IdCookieManager 分配给 IdHTTP 和设置`AllowCookies:=true`应该是我需要做的所有事情，对吧？登录后我成功收到了一个 cookie，但是当我尝试进一步导航时，没有发送 cookie。

这是我的代码：

```
procedure TForm1.Login;
var data: TStringList;
begin
  data:=TStringList.Create;

  try
    IdHTTP.Get('http://navratdoreality.cz/'); // Here I receive Set-Cookie

    data.Add('ACTION=check_adult');
    data.Add('check=18plus');

    Memo1.text:=IdHTTP.Post('http://navratdoreality.cz/',data); // Here the 
     // request contains the cookie and I get a succesfully-logged page in 
     // response, no more set-cookie
  except
    ShowMessage('err');
  end;

  data.Free;
end;

procedure TForm1.Navigate;
var ms:TMemoryStream;
begin
  ms:=TMemoryStream.Create;
  try
    IdHTTP.Get('http://www.navratdoreality.cz/?p=view&id='+Edit1.Text, ms); 
    // the request doesn't contain any cookies, even though the cookie from 
    // logging is saved in IdCookieManager

    ms.Position:=0;
    Memo1.Lines.LoadFromStream(ms, TEncoding.UTF8);
  except
    ShowMessage('err');
  end;

  ms.Free;
end; 
```

我不知道可能是什么问题。我的印地是 10.5.8.0。如果您要查看该站点，请注意，其中一些是 nsfw。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:41:58.753

好吧，这是一个非常愚蠢的问题。问题是*登录*部分有`http://navratdoreality.cz`，而下一部分有`http://www.navratdoreality.cz`。两个 URL 显示相同，但​​对于 IdCookieManager 显然不同，这就是未发送 cookie 的原因。

# c# - 如何比较两个可执行文件？

> ID：11496175
> 
> 赞同：7
> 
> 时间：2012-07-15T22:28:53.257
> 
> 标签：c#, .net, visual-studio-2010

我有一个不需要 UAC 警告的文件。我使用 C#.NET 将文件复制到另一个位置

```
 File.Copy("Original.exe", "Copy.exe"); 
```

现在我看到 Copy.exe 需要 UAC 警告才能在 Windows 7/Vista 下运行。

我如何在 Original.exe 和 Copy.exe 之间进行比较，以准确查看文件发生了什么并手动更改它，使其不再需要 UAC。我可以使用哪个工具来实现这一目标？

![在此处输入图像描述](../Images/8d7cff88718e2dfabbf760aaac4ef2e5.png)

**两个可执行文件是同一个文件**：如何知道这两个文件之间的区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:21:48.643

Windows`Installer Detection Technology`是这种行为的原因。有一组条件强制可执行文件被视为需要管理员权限：

> 1.  32 位可执行文件
> 2.  没有请求执行级别的应用程序
> 3.  在启用 LUA 的情况下作为标准用户运行的交互式进程
> 
> 在创建 32 位进程之前，会检查以下属性以确定它是否是安装程序：
> 
> *   文件名包括“安装”、“设置”、“更新”等关键字。
> *   以下版本控制资源字段中的关键字：供应商、公司名称、产品名称、文件描述、原始文件名、内部名称和导出名称。
> *   嵌入在可执行文件中的并排清单中的关键字。
> *   可执行文件中链接的特定 StringTable 条目中的关键字。
> *   可执行文件中链接的 RC 数据中的关键属性。
> *   可执行文件中的目标字节序列。

相关 MSDN 文章：[http ://technet.microsoft.com/en-us/library/cc709628%28WS.10%29.aspx](http://technet.microsoft.com/en-us/library/cc709628%28WS.10%29.aspx)

可能的解决方案：

*   如果您是可执行文件的作者，请包含指定的清单`requestedExecutionLevel`
*   如果您无权访问源代码 - 尝试使用适当的实用程序（`mt`例如，或者一些通用资源编辑器）添加或修改清单
*   避免关键字`update`，`install`并`setup`在可执行文件名中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:32:52.037

复制文件后，尝试像这样设置文件的 acl：

```
var file = new FileInfo("copy.exe")
 var fileSecurity = file.GetAccessControl();
 fileSecurity.AddAccessRule(new FileSystemAccessRule(new SecurityIdentifier(WellKnownSidType.WorldSid, null),
                                                                FileSystemRights.FullControl,
                                                                AccessControlType.Allow));
 file.SetAccessControl(fileSecurity); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:32:21.857

您可能会发现问题出在位置而不是文件上。Win 7 非常挑剔，特别是如果您尝试更改 Program Files 下的任何内容。

您是否尝试将原始文件放在新位置以检查是否还需要 UAC 批准？

# sql-server - 如何从子窗体 C# 更新父窗体上的 datagridview

> ID：11496178
> 
> 赞同：0
> 
> 时间：2012-07-15T22:29:48.837
> 
> 标签：sql-server, winforms, c#-4.0, devexpress, xtragrid

我是一个相当新的 C# 程序员，我开始使用 C# 已经一个月了，到目前为止我可以说很好，但我目前正在处理一个简单的情况，但我仍然没有让它工作，有这个场景：

我有 2 个表单，一个 Parent 和一个 Child ，父级包含一个 Xtragrid 控件和一个按钮，该按钮打开第二个表单并在第二个表单中加载带有值的文本框，第二个有一个按钮来更新值以防发生任何变化. 但我仍然没有让它工作，我有以下错误：

> 必须在 @ID 处声明一个标量变量

我了解问题的原因，但我无法解决它，我已经做了一些研究来整理自己，但我仍然没有设法让它在最后一行工作

`da.updatecommand.parameters.addwithvalues("ID@",ds.tables["tblLesseeYW"].Rows[LesseeYW.Position][0];`

我已经做到了，但它不起作用（LesseeYW，它是我的绑定源对象，但它不会在当前上下文中退出，也没有可以理解的数据集：有代码需要帮助请

```
// This the class ive created to retrieve all Columns from the SQl server data base
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace YoungWoman
 {
   public static class GetRowData
{

   public static int LesseeId;
   public static byte LesseePic;
   public static string LesseeName;
   public static string LesseeLastName;
   public static string PassportNo;
   public static string IDNo;
   public static DateTime BirthDate;
   public static string Gender;
   public static string Country;
   public static string City;
   public static string Province;
   public static string LesseePostalCode;
   public static string MobileNo;
   public static string HomePhoneNo;
   public static string TutorName;
   public static string TutorLastName;
   public static string AddressTutor;
   public static string AddressLessee;
   public static string TutorPhoneNo;
   public static string TutorEmail;

     }
   }

  // the parent form 

     namespace YoungWoman
   {

     public partial class Lessee2 : UserControl
    {
      DataSet ds = new DataSet();
       DataView dv ;
      SqlDataAdapter daLessee = new SqlDataAdapter();
      SqlDataAdapter daReservation = new SqlDataAdapter();
      BindingSource LesseeYW = new BindingSource();

       BindingSource ReservationCenterYW = new BindingSource();

       SqlConnection conne = SqlCoonectionSEtup.GetConnection;

// the button that opens the Child Form

    private void EditLesseeFrm_Click(object sender, EventArgs e)
    {
        Lesseefrm Lessee = new Lesseefrm(Utils.Formtype.edit, 1);
        Lessee.LesseeEventHandler += new EventHandler(RefreshLesseeGrid);

        GetRowData.LesseeId = Convert.ToInt32(gridView1.GetRowCellValue    (gridView1.FocusedRowHandle, "LesseeId"));
        GetRowData.LesseeName = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "LesseeName"));
        GetRowData.LesseeLastName = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle,"LesseeLastName"));
        GetRowData.PassportNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle,"PassportNo"));
        GetRowData.Gender = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "Gender"));
        GetRowData.Province = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "Province"));
        GetRowData.BirthDate = Convert.ToDateTime(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "BirthDate"));
        GetRowData.City = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "City"));
        GetRowData.Country = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "Country"));
        GetRowData.MobileNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "MobileNo"));
        GetRowData.HomePhoneNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "HomePhoneNo"));
        GetRowData.IDNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "IDNo"));
        GetRowData.AddressLessee = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "AddressLessee"));
        GetRowData.AddressTutor = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "AddressTutor"));
        GetRowData.LesseePostalCode = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "LesseePostalCode"));
        GetRowData.TutorName = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "TutorName"));
        GetRowData.TutorLastName = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "TutorLastName"));
        GetRowData.TutorPhoneNo = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "TutorPhoneNo"));
        GetRowData.TutorEmail = Convert.ToString(gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "TutorEmail"));

        Lessee.ShowDialog();
    }

     ( // Child LOad_form if form type == Edit )

          if (formtype == Formtype.edit && Lesseeid > 0)
            {

                LesseeIdtextEdit.Enabled = false;
                ClearBtnlayoutControlItem26.Visibility =    DevExpress.XtraLayout.Utils.LayoutVisibility.Never;
                SaveBtn.Text = "&Edit";
                SaveBtn.Image = Resources.brush_16;
                this.Text = string.Format(" Edit Lessee Information - YW Residence ");

                LesseeIdtextEdit.Text = Convert.ToInt32(GetRowData.LesseeId).ToString();
                txtName.Text = GetRowData.LesseeName;
                txtLAstname.Text = GetRowData.LesseeLastName;
                txtPassport.Text = GetRowData.PassportNo;
                txtID.Text = GetRowData.IDNo;
                GendercomboBoxEdit.SelectedItem = GetRowData.Gender;
                DobdateEdit.DateTime = GetRowData.BirthDate;
                CountrycomboBoxEdit.SelectedItem = GetRowData.Country;
                txtProvince.Text = GetRowData.Province;
                txtCity.Text = GetRowData.City;
                txtPostalCode.Text = GetRowData.LesseePostalCode;
                LesseememoEdit1.Text = GetRowData.AddressLessee;
                txtMobile.Text = GetRowData.MobileNo;
                txtHomePhone.Text = GetRowData.HomePhoneNo;
                txtTutorName.Text = GetRowData.TutorName;
                txttutorLastname.Text = GetRowData.TutorLastName;
                tutorAddresstxt.Text = GetRowData.AddressTutor;
                txtTutorMobile.Text = GetRowData.TutorPhoneNo;
                txtEmail.Text = GetRowData.TutorEmail;

            }

     public event System.EventHandler LesseeEventHandler;

     private void SaveBtn_Click(object sender, EventArgs e)

       if (formtype == Formtype.edit && Lesseeid > 0)
            {

                MemoryStream ms = new MemoryStream();
                PicBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
                byte[] Pic_arr = new byte[ms.Length];
                ms.Position = 0;
                ms.Read(Pic_arr, 0, Pic_arr.Length);

                try
                {

                    da.UpdateCommand = new SqlCommand(" UPDATE LesseeYW SET LesseePic = @image , LesseeName = @Name, LesseeLastName = @Last , PassportNo = @pass,IDNo = @Number, BirthDate =@birth ,Gender = @gender , Country =@country,LesseePostalCode = @Postal,City = @city , Province = @province,MobileNo = @Mobile,HomePhoneNo = @phone,TutorName = @tutor,TutorLastName=@Tlast,AddressTutor = @line1,AddressLessee=@line2,TutorPhoneNo = @Tphone,TutorEmail =@Temail WHERE LesseeId = @ID ", conne);
                    da.UpdateCommand.Parameters.AddWithValue("@image", Pic_arr);
                    da.UpdateCommand.Parameters.AddWithValue("@Name", txtName.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@Last", txtLAstname.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@pass", txtPassport.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@Number", txtID.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@birth", DobdateEdit.DateTime);
                    da.UpdateCommand.Parameters.AddWithValue("@gender", GendercomboBoxEdit.SelectedItem.ToString());
                    da.UpdateCommand.Parameters.AddWithValue("@country", CountrycomboBoxEdit.SelectedItem.ToString());
                    da.UpdateCommand.Parameters.AddWithValue("@Postal", txtPostalCode.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@city", txtCity.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@province", txtProvince.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@Mobile", txtMobile.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@phone", txtHomePhone.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@tutor", txtTutorName.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@Tlast", txttutorLastname.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@line1", tutorAddresstxt.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@line2", LesseememoEdit1.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@Tphone", txtTutorMobile.Text);
                    da.UpdateCommand.Parameters.AddWithValue("@Temail", txtEmail.Text);
                   //da.UpdateCommand.Parameters.AddWithValue("@ID"

                    da.UpdateCommand.ExecuteNonQuery();
                    conne.Close();
                    MessageBox.Show("Lessee Details Updated ", "Confirmation", MessageBoxButtons.OK, MessageBoxIcon.Information);
                    this.Close();

                }

                catch (Exception Ex)
                {

                    MessageBox.Show(Ex.Message);

                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:36:17.850

一开始你应该编程更客观。不要将类的所有变量声明为公共静态变量。您应该将它们设为私有。要获得访问权限，您必须声明属性。

像这样：

```
private string name;

public string Name
{
  get {return name;}
  set {name = value;}
} 
```

如果您有一个 ID，您可以轻松地将其设为只读，“外部”没有人可以修改它，但每个人都可以阅读。

```
private int leeseId;

public int LeeseID
{
  get{return leeseId;}
} 
```

所以你使用“getter/setter”来提供你的类属性。此外，并非所有变量都应命名为 leese... 只需将其命名为 id、name、city、pic 等。在您的表单中，您可以从类中创建一个对象。您可以将此对象命名为 Leese。

```
private Leese leese = new Leese();
leese.id = ???
leese.name = ??? 
```

更具可读性。

```
da.updatecommand.parameters.addwithvalues("ID@",ds.tables["tblLesseeYW"].Rows[LesseeYW.Position][0]; 
```

你写了“ID@”，但它应该是“@ID”。如果您按照我在顶部的描述构建您的课程，您可以使用属性：

```
da.updatecommand.parameters.addwithvalues("@ID", leese.Id); 
```

我希望对你有所帮助。

# android - 在 AIR for Android、Flash CS6 中使用菜单、返回、主页按钮

> ID：11496181
> 
> 赞同：2
> 
> 时间：2012-07-15T22:30:11.230
> 
> 标签：android, actionscript-3, flash, button, air

我希望使用和/或禁用大多数 Android 手机上存在的硬“主页”、“返回”、“菜单”和“搜索”按钮，老实说不知道从哪里开始。使用适用于 Android 的 Flash Professional CS6 AIR。如果这已经在某处得到回答，我深表歉意，但我找不到有关如何执行此操作的任何信息。预先感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T23:56:11.793

看起来您可以停止后退、搜索和菜单软键的默认行为，但不能停止主页： http: [//www.adobe.com/devnet/air/quick_start_as/quickstarts/qs_capturing_soft_keys.html](http://www.adobe.com/devnet/air/quick_start_as/quickstarts/qs_capturing_soft_keys.html)

# android - 自动删除 SQLite 数据库中的条目 (android)

> ID：11496187
> 
> 赞同：1
> 
> 时间：2012-07-15T22:30:44.737
> 
> 标签：android, database, eclipse, sqlite

创建新行时，如何告诉我的数据库自动删除 ID 最低的条目？我希望在表中有十多行时完成此操作。

这是我的 createEntry 方法：

```
public long createEntry(String latitude, String longitude) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();

    cv.put(KEY_LATITUDE, latitude);     
    cv.put(KEY_LONGITUDE, longitude);

    return myDatabase.insert(DATABASE_TABLE, null, cv);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:02:28.113

如果要删除具有最小 id 的“最旧”行，请使用Rolling [rows in SQL table 中的](https://stackoverflow.com/q/1977341/1267661)[此答案](https://stackoverflow.com/a/1977477/1267661)。

但是，SQLite 表具有最大数量的行 ID。一旦达到此限制，使用的表`integer primary key autoincrement`将搜索旧的、未使用的行 ID 以进行新的插入。这可能导致最新的行具有*最低*的行 ID（并首先被删除）。

了解此限制通常为 9223372036854775807。如果您希望在您的智能手机应用程序中超过这么多的插入：

1.  你是个疯子。
2.  您可以在触发器中使用时间戳。

# openssl - BIO中的B代表什么？

> ID：11496189
> 
> 赞同：11
> 
> 时间：2012-07-15T22:31:02.597
> 
> 标签：openssl

OpenSSL 使用称为[BIO](http://www.openssl.org/docs/crypto/bio.html)的 I/O 抽象，但在我找不到的文档中没有说明 B 代表什么（IO 显然是输入/输出）。各种网站建议 B 代表*basic*或*buffered*，但这些都是博客帖子和论坛帖子之类的东西，没有任何程度的权限。

有没有人从文档、源代码或 OpenSSL 开发人员那里得到关于它代表什么的官方引用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T20:42:08.893

基本输入输出。根据[RSA 的 BIO SSL Functions 描述](http://www.rsa.com/products/bsafe/documentation/sslcme10refmanhtml/group__BIO__SSL__FUNCS.html)。

# amazon-ec2 - 是否有任何 Amazon AWS 负载均衡器 GUI 工具？

> ID：11496190
> 
> 赞同：1
> 
> 时间：2012-07-15T22:31:04.097
> 
> 标签：amazon-ec2

我想知道是否有任何 Amazon AWS Instance Loadbalancer GUI 工具？除了 ylastic。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:13:35.320

如果您是 AWS 账户的唯一所有者，您应该能够访问弹性负载均衡器选项卡，否则请联系您的系统管理员。如果您的 IE 请切换到 Mozilla 或 chrome 以获得更好的互联网体验

# c# - C# - 在控制台应用程序崩溃的情况下取消标记数据库值

> ID：11496192
> 
> 赞同：1
> 
> 时间：2012-07-15T22:31:19.123
> 
> 标签：c#, database, linq, console-application

我目前有多个实例同时运行的 ac# 控制台应用程序。该应用程序访问数据库中的值并对其进行处理。在处理一行时，它会被标记，以便没有其他实例同时尝试处理它。我的问题是，在程序实例崩溃的情况下，取消标记这些值的有效且优雅的方法是什么？因此，如果一个实例崩溃了，我只想取消标记该程序实例当前正在处理的那些值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:48:40.433

潜在的解决方案将在很大程度上取决于您如何启动控制台应用程序。

在我们的例子中，应用程序是根据数据库中的配置记录启动的。当这些应用程序之一执行锁定时，它使用数据库配置记录中的主键来执行锁定。

当应用程序启动时，它做的第一件事就是释放它之前锁定的记录上的所有锁。

为了控制所有子进程，我们有一个服务，它使用配置表中的信息来启动进程，然后密切关注它们，当它们失败时重新启动它们。

每个进程还负责将数据库中的状态表更新为上次可用的时间，最大允许延迟为 2 分钟（对于繁重的处理）。系统管理员使用此状态表来监视问题，但它也可用于在给定进程中重复失败的情况下手动释放锁。

如果您没有这样的结构化方法，那么自动解锁记录可能会非常困难，除非您对应用程序性能有一个可靠的配置文件，让您知道任何超过 5 分钟的锁定都是无效的，因为它应该只处理一条记录平均需要 15 秒，最长 2 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:41:20.700

为了能够处理任何类型的崩溃，即使关闭电源，我也会建议额外为记录添加时间戳，并在一些合理的超时后将记录视为已解锁，即使它们已被标记。

# .htaccess - .htaccess 抛出 500 内部错误，重写条件为不存在的目录

> ID：11496198
> 
> 赞同：1
> 
> 时间：2012-07-15T22:32:33.550
> 
> 标签：.htaccess

我正在尝试使用 .htaccess 即制作一个类似于 facebook 的用户个人资料页面。[http://example.com/<userid](http://example.com/<userid) > 将使用以下代码实际调用[http://example.com/sites/<userid](http://example.com/sites/<userid) >/<sub_page >：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?(.*)$ sites/$1/$2 [NC,L]

Options -Indexes

ErrorDocument 404 /missing.html
ErrorDocument 403 /forbidden.html 
```

当文件夹 sites/<userid> 存在时它工作得很好，但当它不存在时它会引发 500 内部错误。我已经搜索了互联网，但无法超越这一点。有人可以帮忙吗？我可以拥有一个包含所有现有文件夹的文本文件，并以某种方式使用它在 .htaccess 中生成一个列表吗？

提前致谢！！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:38:50.130

您的重写规则正在循环。正则表达式`^([^/]+)/?(.*)$`与重写的 URI 匹配，`sites/something/something`并且无限循环（因此您的 URI 开始看起来像：`sites/sites/sites/sites/sites/sites/sites/sites/sites/something/something`等）。

要么调整你的正则表达式，使其与第一个`([^/]+)/?`表达式之后的内容不完全匹配，要么添加一个额外的条件：

```
RewriteCond %{REQUEST_URI} !^/sites/ 
```

# c++ - 为什么这个类是抽象的？

> ID：11496204
> 
> 赞同：3
> 
> 时间：2012-07-15T22:33:16.130
> 
> 标签：c++, class, abstract-class, abstract, virtual-functions

我正在尝试创建一个表示多项式的 LinkedList 的实现。链接列表将是“术语”的列表。术语是 Data 的实现（它是具有方法的抽象类：compareTo() 和 toString()）。Polynomial 类有一个名为 head 的变量，我试图将其初始化为 Term。我的编译器说我“不能声明抽象类型的成员：Term”，但我不认为 Term 是抽象的，因为它是 Data（抽象类）的实现。如果你们可以看看这个并让我知道我遗漏的任何巨大的危险信号，我将不胜感激。集合.h：

```
 class Data {
  public:
  virtual ~Data() {}

virtual int compareTo(Data * other) const = 0;

virtual string toString() const = 0;
};

class Term : public Data { 
public:
int coefficient;
string variable1;
int exponentX;
string variable2;
int exponentY;
Term * next;

Term(int coeff, string var1, int exp1, string var2, int exp2, Term * next) : 
    coefficient(coeff), 
    variable1(var1),
    exponentX(exp1),
    variable2(var2),
    exponentY(exp2),
    next(next) {};

string convertInt(int number) {
    stringstream ss;//create a stringstream
    ss << number;//add number to the stream
    return ss.str();//return a string with the contents of the stream
}

int compareTo(Term * term) {
    if(this->exponentX > term->exponentX) {
    return 1;
    }
    else if(this->exponentX < term->exponentX) {
    return -1;
    }
    else {
        if(this->exponentY > term->exponentY) {
        return 1;
        }
        else if(this->exponentY < term->exponentY) {
        return - 1;
        }
        else {
        return 0;
        }
    }
}
string toString() {
    stringstream s;
    int * current = &this->coefficient;
    if(*current == 1 || *current == -1) {
    }
    else if(coefficient != 0) {
    s << convertInt(coefficient);
    }
    else { return s.str(); }
    if(variable1 != "" && this->exponentX != 0) {
    s << variable1;
    s << convertInt(exponentX);
    }
    if(variable2 != "" && this->exponentY != 0) {
    s << variable2;
    s << convertInt(exponentY);
    }
return s.str();
}   
}; 
```

此外，这里是 LinkedList 的实现。那里还有其他一些方法，但它们似乎没有给出任何问题。

链表.cpp：

```
 class Polynomial : public LinkedList { 
public:
Term head;

Polynomial() {
this->head = NULL;
}

~Polynomial() {
Term * current = head;
    while (current != NULL) {
        Term * next = current->next;
        delete current;
        current = next;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T22:36:13.200

当您覆盖虚拟方法时，您必须*精确*匹配函数签名。返回类型可能会根据协方差规则而有所不同，但参数类型必须完全相同。

在基类`Data`函数`compareTo`中声明为

```
virtual int compareTo(Data * other) const 
```

在派生类`Term`中，它被声明为

```
int compareTo(Term * term) 
```

首先，参数类型不同。其次，`const`缺少。

这意味着您在派生类中编写了一个完全不相关的函数。它不会覆盖基类的纯虚函数。由于基本的纯虚函数保持未被覆盖，类`Term`仍然是抽象的。

在`Term`你必须将你的函数精确地声明为

```
int compareTo(Data * other) const 
```

我假设您希望仅将`compareTo`in`Term`用于`Term`-to-`Term`比较。但是在这种设计中，您必须要么接收`Data`作为参数，然后将其强制转换为`Term`，要么使用双分派技术。

PS 最重要的是，您将`Term`对象声明为类的成员`head`，`Polynomial`然后将其用作*指针*

```
Term * current = head; 
```

这根本没有意义。如果您希望您`head`成为指针，请将其声明为指针。如果您希望它成为一个对象，请停止将其用作指针。不管是这个还是那个。

# algorithm - 什么时候非二进制数据结构比二进制数据结构更好？（即堆、BST 等）

> ID：11496215
> 
> 赞同：3
> 
> 时间：2012-07-15T22:35:54.493
> 
> 标签：algorithm

CS 中的许多数据结构都是二进制的（BST、堆等）。以非二进制形式实现它们的充分理由是什么？IE。每个节点都有一个包含 3 个子节点的堆，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:38:20.327

每个节点具有两个以上子节点的树是一种折衷，因为它们的深度较浅，但每个节点的链接更多。B [-tree](https://en.wikipedia.org/wiki/B-tree)常用于数据库和文件系统，是每个节点具有多个链接的树结构的经典示例。这种结构非常适合文件系统，因为可以调整 B 树节点的大小以与文件系统块或集群的大小紧密匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:44:40.013

二叉树的空间开销相对较大。例如，实现集合的二叉搜索树中的节点包含四个字段`key`，`left`和`right`。由于`key`是您真正感兴趣的唯一事物，并且`left`和`right`指针只是数据结构的簿记，因此这是 2/3 的开销。

相比之下，三元搜索树节点将有五个字段：`key1`和`key2`，加上指针`left`，`middle`和`right`。这只是 3/5 的开销，并且对于更大的节点，开销的相对量会进一步减少。当然，在某些时候，结构会变得太大而无法管理，因此您可以从更大的节点中挤出的性能数量是有限的；该限制取决于应用程序。

（我什至没有考虑内存分配引起的开销，随着节点变大，开销也会下降。拥有更大的节点还有其他原因，例如[2-3 树](https://en.wikipedia.org/wiki/2-3_tree)比二叉搜索树具有更好的渐近复杂度。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T05:54:21.753

当操作是二进制时，您将使用二进制数据结构。当操作是三元时，您将使用三元数据结构。二进制数据结构常见的一个原因是大多数操作都是二进制的。例如，如果要比较 4 个元素，则一次比较 2 个元素。与 相同`+,-,*,/`。以 Java 中的 TreeSet 或 TreeMap 为例，它是一棵红黑树。您为它提供一个 Comparator 并实现：

```
compare(T o1, T o2) 
```

这是比较 2 个参数的二元运算。

# c# - 如何对创建 POST 进行单元测试？

> ID：11496216
> 
> 赞同：2
> 
> 时间：2012-07-15T22:36:07.410
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, ef-code-first, mstest

如何对日记帐分录是否正确创建进行单元测试（使用正确的值添加到数据库中）？

```
 [HttpPost]
    public ActionResult Create(
        int journalId, 
        string text)
    {
        JournalEntry journalentry = new JournalEntry();
        journalentry.Text = text;
        if (ModelState.IsValid)
        {
            var journal = db.Journals.Find(journalId);               
            journalentry.Journal = journal;                
            db.JournalEntries.Add(journalentry);
            db.SaveChanges();
        }

        return View(journalentry);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:16:14.990

您不应针对真实的 DbContext 实例进行单元测试。

您的单元测试应该改为模拟接口并将它们注入控制器。

例如：

```
public class JournalsController : Controller
{
    private readonly IJournalsRespository _journalsDb;

    public JournalsController(IJournalsRepository journalsDb)
    {
        _journalsDb = journalsDb
    }

    [HttpPost]
    public ActionResult Create(int journalId, string text)
    {
        JournalEntry journalentry = new JournalEntry();
        journalentry.Text = text;
        if (ModelState.IsValid)
        {
            var journal = _journalsDb.FindJournal(journalId);               
            journalentry.Journal = journal;                
            _journalsDb.Add(journalentry);
            _journalsDb.SaveChanges();
        }
        return View(journalentry);
    }
} 
```

你的界面看起来像这样：

```
public interface IJournalsRepository
{
    Journal FindJournal(int id);
    void Add(JournalEntry journalEntry);
    void SaveChanges();
} 
```

您可以像这样对它进行单元测试（使用最小起订量）：

```
public void Create()
{
    var db = new Mock<IJournalsRepository>();
    db.Setup(m => m.FindJournal(7)).Returns(new Journal());
    var controller = new JournalsController(db.Object);
    controller.Create(7, "test");
    db.Verify(m => m.FindJournal(7), Times.Once());
    db.Verify(m => m.Add(It.IsAny<JournalEntry>()), Times.Once());
    db.Verify(m => m.SaveChanges(), Times.Once());
} 
```

# ruby-on-rails - 如何修复这个未定义的方法错误？

> ID：11496218
> 
> 赞同：0
> 
> 时间：2012-07-15T22:36:32.283
> 
> 标签：ruby-on-rails

我正在将 Postmark 的事务性电子邮件服务集成到我的 Web 应用程序中，这样当用户注册时，我的应用程序会向用户发送一封欢迎电子邮件。当我尝试以用户身份注册时，出现以下错误：ActionMailer::Base:Class 的未定义方法 `postmark_settings='

在我的 config/application.rb 文件中，我有以下代码：

```
config.action_mailer.delivery_method   = :postmark
config.action_mailer.postmark_settings = { :api_key => "my_api_key" } 
```

我不确定是什么导致了错误或如何修复它。如果我没有提供足够有用的信息来解决问题，请告诉我，我会添加任何可能有用的代码。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:54:20.717

您是否在 Gemfile 中包含以下行？

```
gem 'postmark-rails', '0.4.0' 
```

有类似的问题，人们没有在 Gemfile 中包含这一行......

另外，您使用的是 Rails 3 吗？Rails 2 和 3 之间的配置不同。请注意[此处](https://github.com/wildbit/postmark-rails)的详细信息。

# android - Create alert dialog with toggle buttons programmatically

> ID：11496223
> 
> 赞同：0
> 
> 时间：2012-07-15T22:37:26.853
> 
> 标签：android, android-layout

I am trying to create Alertdialog and add 3 togglebuttons with images to it programmatically.

I tried starting with one togglebutton and for some reason the alert dialog is really small (just around the image) and the button itself looks weird(image bigger than button)..

Here is my code, do spot anything wrong?

```
LinearLayout ll = new LinearLayout(mActivity);
    ll.setOrientation(LinearLayout.VERTICAL);
    ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    ToggleButton tb;
    for(int i=0;i<cards.size();i++){
        Card card = cards.get(i);
        tb = new ToggleButton(mActivity);
        tb.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        tb.setButtonDrawable(card.getDrawable(mActivity));
        ll.addView(tb);
    }

    AlertDialog.Builder builder;
    AlertDialog alertDialog;
    builder = new AlertDialog.Builder(mActivity);
    builder.setView(ll);
    alertDialog = builder.create();
    alertDialog.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:45:38.490

I found out that sometimes with Dialog or AlertDialog, even though you set FILL_PARENT to the root layout, the dialog won't fill up the screen. It will behave actually like WRAP_CONTENT.

So I ended up setting a fixed dialog width most of the time.

Try setting your root linearlayout to a fixed width:

```
ll.setLayoutParams(new LayoutParams(280 * scalingFactor, LayoutParams.FILL_PARENT)); 
```

Where scalingFactor is the screen density (1 for mdpi, 1.5 for hdpi, etc).

However, I suggest using an XML layout for your alert dialog. It's easier to see what it looks like in the Designer as opposed of doing it in code. e.g. let's call this layout file my_toggle_button.xml:

```
<LinearLayout android:layout_width="280dp" android:layout_height="wrap_content"
    android:orientation="vertical">
   <ToggleButton android:background="@drawable/customToggleButton" />
   <ToggleButton android:background="@drawable/customToggleButton" />
   <ToggleButton android:background="@drawable/customToggleButton" />
</LinearLayout> 
```

Then define how you want the ToggleButton to look in a customToggleButton.xml drawable

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_checked="false" android:drawable="@drawable/toggleButtonUnchecked" />
   <item android:state_checked="true" android:drawable="@drawable/toggleButtonChecked" />
</selector> 
```

You will need to supply two PNGs toggleButtonUnchecked.png and toggleButtonChecked.png.

In your code, instead of building the controls, just inflate R.layout.my_toggle_button into a view and call the AlertDialog's setView on it.

# javascript - jquery div从数组替换

> ID：11496224
> 
> 赞同：2
> 
> 时间：2012-07-15T22:37:49.413
> 
> 标签：javascript, jquery

我有一个二维数组，我从调用中以 JSON 形式返回。

我也有一个 3×3 的 div。

如下：

```
<div id="type0">
    <div id="image00"></div>
    <div id="image01"></div>
    <div id="image02"></div>
</div><br />

<div id="type1">
    <div id="image10"></div>
    <div id="image11"></div>
    <div id="image12"></div>
</div><br />

<div id="type2">
    <div id="image20"></div>
    <div id="image21"></div>
    <div id="image22"></div>
</div><br /> 
```

我有下面的循环来迭代数据。

```
$.each(res, function (i, tickets) {
     $.each(tickets, function (j, ticket) {

         console.log('i:' + i);
         console.log('j:' + j); 

     });
 }); 
```

每次调用此脚本时，如何替换上面 div 的内容？

本质上，我想填充 3×3 div。

因此，对于内部循环，我想我需要类似的东西：

```
$("#type1").$("#image1").html(image here); 
```

这样做的正确方法是什么？

i 和 j 给出 u、0,1,2 和 0,1,2。

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T22:44:27.260

您可以尝试选择[`eq()`](http://api.jquery.com/eq-selector/)器[`start with attribute`](http://api.jquery.com/attribute-starts-with-selector/)：

```
$.each(res, function (i, tickets) {
     $.each(tickets, function (j, ticket) {
         $('div[id^=img]').eq(j).text(ticket)
     });
 }); 
```

* * *

```
$.each(res, function (i, tickets) {
     var ind = i;
     $.each(tickets, function (j, ticket) {
         $('#image'+ind+j).text(ticket)
     });
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:49:14.587

使用 id 作为选择器，因为它们是唯一的

```
$.each(res, function (i, tickets) {
     $.each(tickets, function (j, ticket) {
         $(('#image'+i)+j).html(image here)
     });
 }); 
```

# java - Java 子类构造函数赋值

> ID：11496225
> 
> 赞同：0
> 
> 时间：2012-07-15T22:38:02.870
> 
> 标签：java

我正在尝试使用子类中的构造函数创建一个对象，但我无法在子类构造函数中为该对象赋值。

这是超类。

```
public class Bike
{
    String color = "";
    String type = "";
    int age = 0;

    public static void main (String [] args)
    {
    }

    public Bike (String s, int i)           // Constructor
    {
        color = s;
        age = i;
    }

    public void PrintBike ()
    {
        if (type == "")
        {
            System.out.print(" You didn't give the proper kind of bike."); 
        }
        else
        {
            System.out.print(" Your bike is a " + type + " bike. \n");
        }
    }
} 
```

这是子类。

```
public class BikeAdv extends Bike
{
    private String type;

    public BikeAdv (String color, int age, String BikeType)
    {
        super (color, age);
        type = BikeType;
    }
 } 
```

这是调用构造函数的类。

```
public class Green
{
    public static void main (String [] args)
    {
        Bike greenBike = new BikeAdv ("Green", 20, "Mountain");
        greenBike.PrintBike();
    }
} 
```

当我运行“绿色”课程时，输出是“你没有提供合适的自行车”。而我希望看到“您的自行车是山地自行车”。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T22:42:54.290

`type`子类中的字段会影响`type`超类中的字段。超类中的字段永远不会被填充，这就是被检查的字段。

如果您只是删除子类中的字段，那里的赋值将填充超类字段，您的代码可能会按您的预期工作。

但是，正如其他答案中所述，最好根据您的需要将字段设为私有或受保护，而不是默认可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:44:12.833

您已在没有明确可见性的情况下声明了这些属性：

```
 String color = "";
    String type = "";
    int age = 0; 
```

此外，您已在 中`type`重新声明`BikeAdv`，这可能是一个错误（您不需要）。

如果您想让这些属性只能从其类中访问，那么您应该声明它们`private`。但是，在这种情况下，您必须对构造函数进行参数化才能修改所有这些。或者可能为他们创建设置器（请注意，这样您将授予来自类外的可访问性）。

```
 private String color = "";
    private String type = "";
    private int age = 0; 
```

如果您希望它们在其类外部不可修改，但可从其子类访问，则将它们声明为受保护：

```
 protected String color = "";
    protected String type = "";
    protected int age = 0; 
```

如您所见，有很多可能性。在这里查看它们：

[http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T22:40:54.980

Bike 类不是抽象的，也不是接口，这意味着它的所有方法都像他们在 Bike 类中所说的那样。当您将 greenBike 指定为 Bike，而不是 BikeAdv 时，您告诉它使用 Bike 类中的方法，而不是 BikeAdv 类。你最好的选择是让 Bike 抽象化，让 PrintBike 没有实体。

另外：您永远不会将 BikeType 字符串传递给超类，因此它无法接收它。

# asp.net-mvc - ASP.NET MVC - 嵌套编辑器模板不起作用

> ID：11496226
> 
> 赞同：0
> 
> 时间：2012-07-15T22:38:05.497
> 
> 标签：asp.net-mvc, razor, editorfor

我有两个编辑器模板：

上传文件.cshtml：

```
@model HttpPostedFileBase[]
@Html.EditorFor(m => Model, "UploadFile", new { multiple = true }) 
```

上传文件.cshtml：

```
@model HttpPostedFileBase
@Html.TextBox("", Model, new { type = "file", multiple = Convert.ToBoolean(ViewBag.Multiple) ? "multiple" : "" })
<!-- Additional code here i don't wish to repeat in both controls --> 
```

注意 UploadFiles.cshtml 模板如何接受一个数组，然后调用 UploadFile.cshtml 模板并通过视图数据传入 multiple = true。

我的问题是，如果我说：

```
@Html.EditorFor(m => Model.Files, "UploadFiles") 
```

它不渲染任何东西。

但是，如果我说：

```
@Html.EditorFor(m => Model.File, "UploadFile") 
```

它正确呈现。

如果有人能告诉我如何实现这一点，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:13:01.170

在 UploadFiles.cshtml 中，您将一个数组传递`Model`给 UploadFile.cshtml，它不接受数组。您的意思是将该行包装在 foreach 中吗？

```
foreach (var file in Model)
{
    @Html.EditorFor(x => file, "UploadFile", new { multiple = true })
} 
```

# c++ - 我应该将所有数据类实现为 QSharedData 并将其与 QSharedDataPointer 一起使用吗？

> ID：11496228
> 
> 赞同：5
> 
> 时间：2012-07-15T22:38:14.027
> 
> 标签：c++, qt4, shared-data, qshareddata

我是 Qt 初学者，需要编写一些数据类。`QSharedDataPointer`像示例（[此处](http://doc.trolltech.com/4.3/qshareddatapointer.html#details)）中那样编写所有这些类是否是一种好方法，或者这是否过多的开销（除了它更多的工作之外）？

我的课在性质上非常像下面的`Employee`课。我将不得不处理数百个实例，而不是一万或数百万。

我使用 QSharedData / QShareDataPointer 的动机是简化手动内存管理并具有通用代码样式。但我仍然不确定我是否监督了一些警告。

从[示例](http://doc.trolltech.com/4.3/qshareddatapointer.html#details)：

```
class EmployeeData : public QSharedData
 {
 public:
     EmployeeData();
     EmployeeData(const EmployeeData &other);
     ~EmployeeData();

     int id;
     QString *name;
 };

 class Employee
 {
 public:
     Employee();
     Employee(int id, const QString &name);

     void setId(int id) { d->id = id; }
     void setName(const QString &name);

     int id() const { return d->id; }
     QString name() const;

 private:
     QSharedDataPointer<EmployeeData> d;
 }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T05:12:23.987

使用 QSharedDataPointer/pImpl 的优点是：

1) 在某些情况下，您可以避免一些数据复制（例如，如果您有两个或多个相同的 Employee 对象，它们可以共享相同的 EmployeeData 后端，而不是每个都有自己的相同数据的单独副本）

2) 在向 EmployeeData 类添加额外的数据字段后，只需要重新编译 Employee 类的源代码，因为只有 Employee 类（可能）会直接访问 EmployeeData 类。您的所有其他代码将（可能）仅访问 Employee 类，因此不需要重新编译，因为 Employee 类的大小和布局不会改变。

在适当的情况下，这两个原因都可能令人信服——例如，Qt 本身受益于 pImpl 和许多地方的隐式共享，因为 Qt 需要极其有效地处理大量数据，更重要的是因为 Qt 与第三方的关系开发人员要求它保证新的 Qt 共享库版本将保持向后兼容现有的第三方应用程序可执行代码，这些代码是针对旧 Qt 版本编译的。

但是，对于您的个人计划，您不太可能会看到很多好处。如果您的数据对象与 EmployeeData 示例类中显示的一样小/简单（或者即使它们比那个大 10 或 100 倍），那么仅制作数据副本的开销可能会很小......并且因为您大概可以在需要时重新编译自己的代码库，因此向后兼容的好处对您来说并不重要。

所以我的建议是保持简单，只用标准的 C++ 方式做事，在必要时制作成员对象的常规旧默认复制构造函数样式副本（并尽可能通过 const-reference 将对象传递给方法，以最小化它们被复制的次数）。如果您注意到一个可衡量的性能问题，此时您可以返回并使用 pImpl/QSharedDataPointer 重写您的一些类，看看它是否为您提供了可衡量的加速（尽管您可能会发现它不会）。

# tomcat - 为什么在路径 [/ABC] 的上下文中用于 servlet [XYZ] 的 Servlet.service() 引发异常

> ID：11496229
> 
> 赞同：3
> 
> 时间：2012-07-15T22:38:15.013
> 
> 标签：tomcat, tomcat7, netbeans-7

我无法弄清楚为什么会收到此错误。我检查并重新检查了我的代码似乎没有发现任何错误。

```
16 Jul, 2012 3:21:25 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [XYZ] in context with path [/ABC] threw exception
java.lang.NullPointerException
    at com.mnp.abc.xyz.doPost(XYZ.java:116)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

XYZ servlet 的 doPost 方法

```
@Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("application/json");
        response.setCharacterEncoding("UTF-8");
        StringBuilder sb = new StringBuilder();

        InputStream rin = request.getInputStream();
        InputStream gzipStream = new GZIPInputStream(rin);
        Reader decoder = new InputStreamReader(gzipStream, "UTF-8");
        BufferedReader br = new BufferedReader(decoder);

        String str;

        // retrieve JOSNArray send to Servlet
        while ((str = br.readLine()) != null) {
            sb.append(str);
        }
        JSONArray jsonArray = null;
        try {
            jsonArray = new JSONArray(sb.toString());
        } catch (JSONException e) {
            System.out.println("Error parsing JSON");
        }
        System.out.println("json object: " + jsonArray.toString());

        // parse JSONArray and obtain ContactArray
        ArrayList<Contact> contactArray = null;
        try {
            contactArray = frmJSONArrayToContactArray(jsonArray);
        } catch (JSONException e1) {
            System.out.println(TAG + " frmJSONArrayToContactArray Failed");
        }
        // connect JDBC with MySQL server
        Context initContext;
        Connection connection;
        DataSource datasource;
        Statement statement;
        ResultSet rs = null;
        try {
            initContext = new InitialContext();
            Context envContext = (Context) initContext.lookup("java:/comp/env");
            datasource = (DataSource) envContext.lookup("jdbc/bolsms");

            // load Connector/J
            connection = datasource.getConnection();
            statement = connection.createStatement();
            // get query String
            Iterator<Contact> itetor = contactArray.iterator();
            boolean greatPeopleBoo = false;
            while (itetor.hasNext()) {
                ***Contact contact = itetor.next();***
                ....
                ....
                .... 
            }
            rs.close();
            statement.close();
            connection.close();
        } catch (NamingException ex) {
            Logger.getLogger(MarkGreatPeopleFromContact.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException e) {
            for (Throwable t : e) {
                System.out.println(t.getMessage());
            }
        }

        /*
         * send contactArray back to Android Client
         */

        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T22:53:54.877

***org.apache.catalina.core.StandardWrapperValve 调用 SEVERE: Servlet.service() for servlet [XYZ] 在上下文中与路径 [/ABC]***

它似乎未正确配置到应用程序中。如果它在来自 web.xml 的应用程序中使用上下文 xml，那么明智的做法是检查两者并确保在 web.xml 中正确配置了 servlet XYZ，尤其是如果它位于 lib 中的 .jar 中，那么 . jar 需要在 web.xml 中命名为资源，并且需要重新启动服务器。它说它找不到servlet。

# php - 使用 filter_var_array 清理 - 防止 NULL 变成空字符串

> ID：11496233
> 
> 赞同：1
> 
> 时间：2012-07-15T22:38:53.313
> 
> 标签：php, sanitization

我有一个 MySQL 结果，我想使用 PHP 安全地输出，即将特殊字符转换`<`为`&lt;`.

filter_var_array 工作正常，除了`NULL`值变成空字符串`''`。

我仍然希望它们为 NULL 以反映 MySQL 值并进行测试`is_null()`等。

```
$sql_rows = filter_var_array($sql_rows, FILTER_SANITIZE_FULL_SPECIAL_CHARS);
foreach ($sql_rows as $sql_row) {
    print '<li>' . $sql_row['name'] . '</li>';
} 
```

有什么方便的方法来实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T22:55:10.693

根据我的经验，当从 MySQL 中选择 NULL 值时，PHP 会将其解释为空白字符。我只会在一个循环中处理和输出每一行；您将对每个值发生的事情有更多的控制权，并且效率会更高。

```
foreach($sql_rows as $sql_row)
{
    $output = "<li>";

    if(!empty($sql_row['name']))
    {
        $output .= htmlspecialchars($sql_row['name'], ENT_QUOTES);
    }
    else
    {
        $output .= "<strong>NULL</strong>";
    }

    $output .= "</li>";

    echo $output;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T23:09:33.027

```
$sql_rows = array_map(function($val){
    return is_null($val) ? null : filter_var($val, FILTER_SANITIZE_FULL_SPECIAL_CHARS);
}, $sql_rows); 
```

# facebook-graph-api - 使用 Facebook Graph API 检索照片发布详细信息

> ID：11496234
> 
> 赞同：-1
> 
> 时间：2012-07-15T22:39:02.027
> 
> 标签：facebook-graph-api, post, photo

如何使用 facebook 图形 API 检索照片详细信息？

我知道如何通过调用此 URL 来使用 FB apis 检索帖子详细信息：`graph.facebook.com/<PostID>?accesstoken=AA`

那些 URL 包含的照片帖子`photo.php`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:43:57.337

一样的：

```
https://graph.facebook.com/[PHOTO_ID]?accesstoken= 
```

[图形接口](https://developers.facebook.com/docs/reference/api/photo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:47:16.353

据我了解，您询问的是已发布在用户墙上的照片。这些照片帖子与任何普通帖子相同，但此类帖子的**TYPE**字段为**PHOTO**。

可以使用此帖子的**OBJECT_ID**字段检索附加的照片。

有关更多详细信息，请参阅以下链接。

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

# css - 如何让我的导航与徽标一致？

> ID：11496238
> 
> 赞同：-1
> 
> 时间：2012-07-15T22:39:43.000
> 
> 标签：css, html, navigation

我有以下代码，现在只是 div 中的一个徽标，但我正在尝试添加一些导航单元格，稍后我将设置它们的样式。问题是，我似乎无法让它们与（除此之外的）标志“一致”，它们总是下降到下一行。我究竟做错了什么？

```
 #header {
    position:relative;
    padding-top:0px;
    width:960px;
    margin-left: auto ;
    margin-right: auto ;
    }
    #nav {
    padding:0px;
    height:20px;
    }
    #nav ul {
    margin:0;
    padding:0;
    list-style:none;
    }
    #nav li {
    display:inline;
    margin:0;
    padding:0;
    }

    <div id="header">
    <img src="logo3.png" height="91" width="162">
            <div id="nav">
            <ul>
            <li>nav item 1</li>
            <li>nav item 2</li>
            <li>nav item 3</li>
            </ul>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T22:41:53.313

在这里，[http://jsfiddle.net/PLmSB/1/](http://jsfiddle.net/PLmSB/1/)

*经过铬测试*

你只需要添加

```
#nav {
    display: inline-block;
    vertical-align:top; /*optional*/
} 
```

请务必阅读这篇关于[Inline-Block 的跨浏览器支持的文章](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)

否则，正如@Ana 指出的那样，

```
img {
    float: left;
} 
```

这应该有效。[http://jsfiddle.net/PLmSB/3/](http://jsfiddle.net/PLmSB/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T22:44:59.410

您应该浮动徽标。[http://dabblet.com/gist/3118980](http://dabblet.com/gist/3118980)

# symfony-2.1 - 当供应商在 Symfony 2.1 中不受作曲家管理时，在哪里注册自动加载？

> ID：11496255
> 
> 赞同：14
> 
> 时间：2012-07-15T22:41:40.593
> 
> 标签：symfony-2.1, composer-php, packagist, satis

我正在使用 symfony 2.1，我想向供应商添加一个库。packagegist 中不存在该库。我无法用作曲家来管理它。当我通过 Composer 安装捆绑包或其他供应商时，它会为我管理自动加载。但是当供应商不受作曲家管理时，在哪里注册自动加载？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-15T22:53:08.040

您可以将不在 packagegist 中的库添加到作曲家。您必须将它们添加到文件的`repositories`数组中`composer.json`。

以下是如何加载包含 composer.json 文件的 github 存储库，即使它不在 packagist 上（例如，你会为修复存储库所做的一个分叉）： http://getcomposer.org/doc/02-libraries [。 md#publishing-to-a-vcs](http://getcomposer.org/doc/02-libraries.md#publishing-to-a-vcs)

以下是如何加载 git/svn 存储库或 zip 文件中的库：http: [//getcomposer.org/doc/05-repositories.md#types](http://getcomposer.org/doc/05-repositories.md#types)

使用各种可能性的示例：

```
{
  "repositories": [
    {
      "type": "vcs",
      "url": "http://github.com/igorw/monolog"
    },
    {
      "type": "package",
      "package": {
        "name": "smarty/smarty",
        "version": "3.1.7",
        "dist": {
          "url": "http://www.smarty.net/files/Smarty-3.1.7.zip",
          "type": "zip"
        },
        "source": {
          "url": "http://smarty-php.googlecode.com/svn/",
          "type": "svn",
          "reference": "tags/Smarty_3_1_7/distribution/"
        },
        "autoload": {
          "classmap": [
            "libs/"
          ]
        }
      }
    }
  ],
  "require": {
    "monolog/monolog": "dev-bugfix",
    "smarty/smarty": "3.1.*"
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-15T22:46:00.383

您应该能够使用 Composer 注册无法通过 packagist 获得的供应商库。我不完全确定，但这应该可以正常工作：

```
{
    "autoload": {
        "psr-0": {
            "Acme": "src/",
            "MyVendorLib": "vendor/my-vendor/src",
            "AnotherLib": "vendor/another-vendor/lib"
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T17:37:28.613

您只需要修改您的 composer.json 文件以获取自动加载值：

[http://getcomposer.org/doc/04-schema.md#autoload](http://getcomposer.org/doc/04-schema.md#autoload)

```
//composer.json 在你的 symfony 2.1 项目中
“自动加载”：{
     “psr-0”：{
         "": "src/",
         “你的图书馆”：“src/location/of/lib”
     }
},

```

然后在您的控制器中，例如：

```
命名空间 Acme\UserBundle\Controller；

使用 Symfony\Bundle\FrameworkBundle\Controller\Controller；
使用 Sensio\Bundle\FrameworkExtraBundle\Configuration\Route；
使用 YourLibrary\FolderName\ClassName；

类 DefaultController 扩展控制器 {

/**
 * @路线（”/”）
 * @模板（）
 */
公共函数 indexAction()
{
   $lib = 新的类名（）；
   $lib->getName();

   返回数组('name' => $name);
}

}

```

# ruby-on-rails - rails 路由错误 crossdomain.xml

> ID：11496259
> 
> 赞同：0
> 
> 时间：2012-07-15T22:42:00.993
> 
> 标签：ruby-on-rails, heroku

我可以在我的本地机器上运行我的应用程序。但是，在我提交更改并部署到 heroku 托管站点后，我收到以下错误：

我已经在线保存了笔记，在这里可能更容易阅读：

[http://shrib.com/f0fys8FT](http://shrib.com/f0fys8FT)

提前致谢！

# vbscript - 在 VBS 中使用 xcopy（有一个转折）

> ID：11496268
> 
> 赞同：1
> 
> 时间：2012-07-15T22:44:19.127
> 
> 标签：vbscript, xcopy, folderbrowserdialog

好的，这就是交易：我正在尝试编写一个脚本来执行一个简单的 xcopy。问题是我希望用户能够浏览源文件夹和目标文件夹。我有几个简单的部分，但我无法将它们拼凑在一起，特别是试图区分源和目标，并试图从浏览功能中获取输出......

```
Set objShell = CreateObject("Shell.Application")
Set objFolder = objShell.BrowseForFolder(0, "Example", 1, "c:\Programs")

Set objShell = CreateObject("Shell.Application")
Set objFolder = objShell.BrowseForFolder(0, "Example", 1, "c:\Programs")

Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run "Xcopy ""objShell"" ""objShell"" /C /D /E /H /I /K /R /S /Y" 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:46:20.103

像这样它会工作，在 Windows 7 上测试

```
Set objShell = CreateObject("Shell.Application")
Set oFso = CreateObject("Scripting.FileSystemObject")
root = "c:\"
Set source = get_path(objShell.BrowseForFolder(0, "Source folder", 1, root))
Set target = get_path(objShell.BrowseForFolder(0, "Target folder", 1, root))
Set objShell = WScript.CreateObject("WScript.Shell")
command = "Xcopy """&source&""" """&target&""" /C /D /E /H /I /K /R /S /Y"
'wscript.echo command
objShell.Run command

function get_path(foldername)
  Set oFolderItem = foldername.Items.Item
  Set selected = oFso.GetFolder(oFolderItem.Path)
  If selected.IsRootFolder Then
    Set get_path = oFso.GetDrive(selected.Drive)
  Else
    Set get_path = oFso.GetFolder(oFolderItem.Path)
  End If
end function 
```

# sql - 在 SSIS 执行 SQL 任务中捕获错误行

> ID：11496271
> 
> 赞同：2
> 
> 时间：2012-07-15T22:44:43.697
> 
> 标签：sql, sql-server, ssis

我有一个 SSIS 包，可以将一堆 XML 文件导入 SQL 表。XML 导入完成后，我运行一个执行 SQL 任务来更新一些记录，并导入其他不存在的记录。其中一项任务根据他们的电话号码创建用户登录。有时源数据有错误，没有输入数字，或者输入了重复的数字。我无法控制数据输入，但 userlogon 表当然需要唯一值。

如何将 Exec SQL 任务配置为简单地忽略 PK Violation 错误并继续下一条记录？

这是SQL代码：

```
insert into Logins
select REPLACE(LTRIM(REPLACE(Customer_Number, '0', ' ')), ' ', '0'), RIGHT(customer_number,4) + EFFDAT, Company_Name, Customer_Number, Email_Address, 0, CU_Allow_Web_Ordering, 0, 0, 1 from CUSTOMER_MASTER_FILE where CUSTOMER_NUMBER not in
(select CustomerNumber from Logins) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:46:10.643

如果你想提交像你这样的查询，你不能。例如，您不能提交一批 10 行并提交 8 并失败 2。

我不认为这个解决方案很好，我认为你应该在尝试插入数据之前以某种方式测试登录是否存在，但是如果你愿意，你可以将组件的 maxNumberOfErrors 配置为一个非常大的数字并尝试插入登录一个通过一个循环组件。组件失败不会导致包失败，直到失败次数达到 maxNUMberOfErrors。

# javascript - 具有可变高度的元素隐藏溢出？

> ID：11496272
> 
> 赞同：0
> 
> 时间：2012-07-15T22:44:44.440
> 
> 标签：javascript, css, height, overflow

是否可以让高度为 100% 的元素在页面上伸展，也可以具有溢出隐藏属性，因此当该元素的内容变得太大时，它不会超过设定的高度并尊重溢出隐藏？

在示例中，我在元素内部使用 span，因为溢出仅在块中起作用。

[这是关于 jsfiddle 的示例](http://jsfiddle.net/EWMwH/)

如果默认情况下不可能，是否有一些可能的黑客攻击？也许用 javascript 来检测高度并将其反馈给元素？

它不需要与 IE 兼容，它用于浏览器扩展

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:00:44.153

在具有可变大小的元素上使用溢出效果很好。

您已经在 jsfiddle 中放置了一个完整的 HTML 文档，然后它会将其包装在另一个 HTML 文档中，因此您的页面将被破坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:51:57.977

我最终使用的是 javascript = window.innerHeight 来检测高度

也应该是这个 [http://jsfiddle.net/EWMwH/2/](http://jsfiddle.net/EWMwH/2/)

我们实际上可以看到中间部分正在拉伸以强制内容并且不尊重设置高度 100% 和溢出。

在我看来，我第一次粘贴整个文档而不仅仅是 jsfiddle 中的正文并不重要

# c# - C# 列表 - 任何方式来存储继承的类呢？

> ID：11496274
> 
> 赞同：8
> 
> 时间：2012-07-15T22:44:56.510
> 
> 标签：c#, list, inheritance

我正在尝试创建一个简单的物品“库存”，就像在任何 RPG 中一样。我制作了*非常基本*的类，它们具有属性。

无论如何，我有一个基类`item`并继承自`weapon`. `item`具有也在 中使用的属性（名称、值、重量、“重要项目”）`weapon`，但`weapon`具有额外的属性（攻击、防御、速度、惯用手）。

我有以下代码（对不起，如果可读性很糟糕）：

```
static void Main(string[] args)
{   
     List<item> inventory = new List<item>();
     inventory.Add(new weapon("Souleater", 4000, 25.50f, false, 75, 30, 1.25f, 2));
                           //item--------------------------->  weapon--------->

     Console.Write("Name: {0}\nValue: {1}\nWeight: {2}\nDiscardable: {3}\nAttack: {4}\nDefense: {5}\nSpeed: {6}\nHandedness: {7}",
            inventory[0].Name, inventory[0].BValue, inventory[0].Weight, inventory[0].Discard, 
            inventory[0].Atk, inventory[0].Def, inventory[0].Speed, inventory[0].Hands);

     Console.ReadLine();
} 
```

基本上，我想做的是`weapon`向库存中添加一个新的，但库存是一种`List<item>`类型。我一时兴起希望，由于它的继承，它会被接受。`weapon`是的，但是无法访问特定于的属性：

*（“shopSystem.item”不包含“Atk”的定义，并且找不到接受“shopSystem.item”类型的第一个参数的扩展方法“Atk”）*

那么，有什么方法可以实现我在这里的意图吗？有一个可以存储`item`对象的“库存”，以及`weapon`,`armour`等`accessory`对象，这些对象继承自`item`? 还值得一提的是，如果我声明以下内容，我可以访问所有所需的属性：

```
weapon Foo = new weapon("Sword", 200, 20.00f, false, 30, 20, 1.10f, 1); 
```

非常感谢您的阅读。

这是`item`和`weapon`类，如果有人感兴趣的话：

```
class item
{
    #region Region: Item Attributes
    protected string name = "";
    protected int baseValue = 0;
    protected float weight = 0.00f;
    protected bool noDiscard = false;
    #endregion

    public item(string n, int v, float w, bool nd){
        name = n; baseValue = v; weight = w; noDiscard = nd;}

    public string Name{
        get{return name;}
        set{if(value != ""){
            name = value;}
        }//end set
    }

    public int BValue{
        get{return baseValue;}
    }

    public float Weight{
        get{return weight;}
    }

    public bool Discard{
        get{return noDiscard;}
    }
}

class weapon : item
{
    #region Region: Weapon Attributes
    private int atk = 0;
    private int def = 0;
    private float speed = 0.00f;
    private byte hands = 0;
    #endregion

    public weapon(string n, int v, float w, bool nd, int a, int d, float s, byte h) : base(n, v, w, nd){
        atk = a; def =d; speed = s; hands = h;}

    public int Atk{
        get{return atk;}
    }

    public int Def{
        get{return def;}
    }

    public float Speed{
        get{return speed;}
    }

    public byte Hands{
        get{return hands;}
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T22:53:55.250

为了访问特定于继承类的属性，您需要转换为适当的具体类类型。`inventory[0]`因此，您需要访问 ，而不是访问`(weapon)inventory[0]`。

此外，如果您正在执行基于底层类具有不同实现的常见任务，例如将值记录到控制台（我意识到这是为了测试而完成的，但无论如何都是一个很好的例子），您应该实现一个可覆盖的方法在基类中。

例如，在基类中：

```
public virtual void LogProperties()
{
Console.Write("Name: {0}\nValue: {1}\nWeight: {2}\nDiscardable: {3}\nAttack",
            this.Name, this.BValue, this.Weight, this.Discard);
} 
```

在武器类中：

```
public override void LogProperties()
{
Console.Write("Name: {0}\nValue: {1}\nWeight: {2}\nDiscardable: {3}\nAttack: {4}\nDefense: {5}\nSpeed: {6}\nHandedness: {7}",
            this.Name, this.BValue, this.Weight, this.Discard, 
            this.Atk, this.Def, this.Speed, this.Hands);
} 
```

然后，要访问这个：

```
inventory[0].LogProperties(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T00:14:57.203

通过使用 a`List<item>`来存储项目和项目的子类，您正在做正确的事情！

当您从列表中提取项目时，您只需要做一些工作来测试它是`weapon`. 还是其他类型的`item`.

要查看`i`数组中位置的元素是否为 a `weapon`，请使用运算符，如果项目不是指定的类型（可能是盔甲或其他类型的项目）`as`，它将返回。`null`这被称为`dynamic`演员表。即使该项目是`null`.

```
weapon w = inventory[i] as weapon;  // dynamic cast using 'as' operator
if (w != null)
{
     // work with the weapon
} 
```

另一种方法是`is`在进行强制转换之前使用运算符检查类型`static`。

```
if (inventory[i] is weapon)
{
     // static cast (won't fail 'cause we know type matches)
     weapon w = (weapon)inventory[i];           

     // work with the weapon
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T02:00:15.143

这就是 Linq 在处理多态性时可以成为您朋友的地方。转换项目的问题是当给定的索引不是正确的类型时。（即`inventory[0]`不是`weapon`，`(weapon)inventory[0]`会抛出。）

您可以使用以下方法避免异常：

```
var myWeapon = inventory[0] as weapon; 
```

但是，您将到处进行#null 检查。使用 Linq，您可以获得很大的灵活性：

```
var weapons = inventory.OfType<weapon>(); 
```

从这里您可以使用`Where`、`FirstOrDefault`等来查找您感兴趣的数据或迭代武器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T22:57:09.170

您可以实现一个通用接口（例如`IItem`），通过该接口查询项目的属性，或者实现一个通用基类，可能是一个抽象基类，并将其`T`用作`List`. 如果使用后一个选项，请确保在适当的情况下覆盖基类的函数，剩下的工作将由多态性完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T22:58:00.747

您需要将值转换回 a`weapon`才能访问这些属性，即`((weapon)inventory[0]).Atk)`. 注意括号：强制转换的优先级低于字段访问，所以你不能写`(weapon)inventory[0].Atk`; 那将被解释为`(weapon)(inventory[0].Atk)`.

您还需要区分不同的类（例如，您可能还有一个`armor`类）。最简单的做法是在基类上添加一个额外的值`item`，告诉您对象的实际类型，然后进行相应的转换。

然而，更好的方法是使用继承——让我们`item`定义一系列可以处理所有通用内容的方法——例如显示有关项目的信息——然后在继承类中覆盖它。也就是说，不是直接访问所有这些数据，而是调用一种以合理方式组合它的方法。对于您的特定示例，您正在将项目转换为字符串，因此覆盖 ToString() 可能是有意义的 - 这意味着您可以这样做：

```
Console.Write(inventory[0]); 
```

并且根据它是物品还是武器，将调用适当类的 ToString() （通常，您必须自己调用方法，但 ToString() 是特殊的，因为所有对象都有该方法，所以Console.Write 为您完成）。

在您的武器类中，您将像这样实现 ToString 方法：

```
public string ToString() {
  //Put all of the data in here, like in your example
  return String.Format("Name: {0}\n...", name, ...);
} 
```

# java - UUID 缩短

> ID：11496277
> 
> 赞同：4
> 
> 时间：2012-07-15T22:45:13.170
> 
> 标签：java, redis, uuid

我需要计算一个应用程序的每日唯一用户数。

我可以唯一识别用户的唯一方法是通过他们的 UUID（这是外部提供的，所以我被迫使用它）。

我知道我的每日用户数是几百万用户。

我想在 Redis 中使用 bitset 来进行人口计数，但为了使其工作，我需要一种缩小 UUID 的方法，以便它可以轻松适应 long 。我知道发生碰撞的可能性，但我并不关心精确的数字。

以前有人用Java做过吗？我所追求的是如何将我的 UUID 转换为可以放入 long 的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:41:11.883

您可以生成生成整数或长整数的 uuid 哈希，并将其用于您的人口计数。

看看 jedis redis 库中的“redis.clients.util.MurmurHash”。你可以在[https://github.com/xetorthio/jedis找到它](https://github.com/xetorthio/jedis)

*编辑：样本

```
 UUID uuid = UUID.randomUUID();
        ByteBuffer buf = ByteBuffer.allocate(16).putLong(uuid.getMostSignificantBits()).putLong(uuid.getLeastSignificantBits());
        buf.flip();
        int useMe= MurmurHash.hash(buf, 123); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T22:48:56.613

对象上有两种[`UUID`](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html)可能对您有益的方法。

[`getLeastSignificantBits()`](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#getLeastSignificantBits%28%29)和[`getMostSignificateBits()`](http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html#getMostSignificantBits%28%29)。两者都返回很长。将其中一个作为您的答案（如果您愿意，也可以选择某种组合。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T02:18:45.117

这可能足够小，可以直接使用完整的 UUID 作为哈希键。如果适合您的需要，也可以使用[更少的内存进行近似。](http://highscalability.com/blog/2012/4/5/big-data-counting-how-to-count-a-billion-distinct-objects-us.html)

# tomcat - 如何找到 $CATALINA_HOME 的值？

> ID：11496280
> 
> 赞同：53
> 
> 时间：2012-07-15T22:45:41.900
> 
> 标签：tomcat, tomcat7

我必须将`Connnector/J`JAR复制`$CATALINA_HOME/lib` 到 Tomcat7 上`Amazon EC2`。如何`$CATALINA_HOME/lib`在 Amazon EC2 中找到 Amazon Linux 上的完整路径？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-07-16T00:28:05.543

Tomcat 可以通过多种方式告诉您。这是最简单的：

```
 $ /path/to/catalina.sh version
Using CATALINA_BASE:   /usr/local/apache-tomcat-7.0.29
Using CATALINA_HOME:   /usr/local/apache-tomcat-7.0.29
Using CATALINA_TMPDIR: /usr/local/apache-tomcat-7.0.29/temp
Using JRE_HOME:        /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home
Using CLASSPATH:       /usr/local/apache-tomcat-7.0.29/bin/bootstrap.jar:/usr/local/apache-tomcat-7.0.29/bin/tomcat-juli.jar
Server version: Apache Tomcat/7.0.29
Server built:   Jul 3 2012 11:31:52
Server number:  7.0.29.0
OS Name:        Mac OS X
OS Version:     10.7.4
Architecture:   x86_64
JVM Version:    1.6.0_33-b03-424-11M3720
JVM Vendor:     Apple Inc. 
```

如果你不知道在哪里`catalina.sh`（或者它永远不会被调用），你通常可以通过以下方式找到它`ps`：

```
$ ps aux | grep catalina
chris            930   0.0  3.1  2987336 258328 s000  S    Wed01PM   2:29.43 /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -Dnop -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.library.path=/usr/local/apache-tomcat-7.0.29/lib -Djava.endorsed.dirs=/usr/local/apache-tomcat-7.0.29/endorsed -classpath /usr/local/apache-tomcat-7.0.29/bin/bootstrap.jar:/usr/local/apache-tomcat-7.0.29/bin/tomcat-juli.jar -Dcatalina.base=/Users/chris/blah/blah -Dcatalina.home=/usr/local/apache-tomcat-7.0.29 -Djava.io.tmpdir=/Users/chris/blah/blah/temp org.apache.catalina.startup.Bootstrap start 
```

从`ps`输出中，您可以看到`catalina.home`和`catalina.base`。`catalina.home`是 Tomcat 基础文件的安装位置，`catalina.base`也是 Tomcat 运行配置所在的位置。这些通常设置为相同的值，除非您已将 Tomcat 配置为从单个 Tomcat 基本安装启动多个（配置）实例。

如果在列表中找不到 JVM，也可以直接询问它`ps`：

```
$ jinfo -sysprops 930 | grep catalina
Attaching to process ID 930, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 20.8-b03-424
catalina.base = /Users/chris/blah/blah
[...]
catalina.home = /usr/local/apache-tomcat-7.0.29 
```

如果您无法做到这一点，您总是可以尝试编写一个转储两个系统属性值的 JSP`catalina.home`和`catalina.base`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-26T06:04:54.147

只是作为补充。您可以在以下位置找到 Catalina Paths

> ->运行->运行配置->Apache TOMCAT->参数

在 VM 参数中，路径被列出并且可以更改

# javascript - 如何卸载 windows.eval() 加载和解释的 Javascript？

> ID：11496282
> 
> 赞同：1
> 
> 时间：2012-07-15T22:45:51.160
> 
> 标签：javascript, eval

拥有一个复杂的客户端模板系统，其中资源通过 XHR（作为字符串）加载，然后注入 DOM。

到目前为止，对于 Javascript 插入，我们一直在动态创建脚本标签并将它们附加到 DOM，这不仅是为了在现代浏览器中提高速度，而且因为这使得在不再需要模板时清理/删除脚本成为可能。

但是 - 似乎在较旧的浏览器和 IE（甚至是最新的 10 版本）中，特别是 window.eval() 在评估代码方面比仅仅通过新标签注入它要快得多 - 比如快 10 倍。甚至 IE-native execScript 也比 eval 慢很多。

我会尝试优化它以在 IE 中使用 eval 来提高性能，但是我看不到任何引用或/和删除此类评估的 Javascript 的方法。如果有人对如何解决这个问题有任何想法 - 将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:01:28.707

> 到目前为止，对于 Javascript 插入，我们一直在动态创建脚本标签并将它们附加到 DOM，这不仅是为了在现代浏览器中提高速度，而且因为这使得在不再需要模板时清理/删除脚本成为可能。

我想你可能会误解那里的东西。删除一个`script`元素不会**从**它加载到的 JavaScript 上下文中删除它包含的脚本：http: [//jsbin.com/ujirat](http://jsbin.com/ujirat)

> 但是 - 似乎在较旧的浏览器和 IE（甚至是最新的 10 版本）中，尤其是 window.eval() 在评估代码方面比仅仅通过新标签注入它要快得多 - 比如快 10 倍......但是我没有'之后看不到任何引用或/和删除此类评估的 Javascript 的方法。

它与通过标签加载的脚本完全相同`script`：“卸载”它的唯一方法是删除对它的所有引用，这使它有资格进行垃圾收集。最好的方法是让您的脚本定义一个包含该脚本所有功能的**单个**全局符号，例如：

```
var foo = (function () {
    var f = {};

    f.foo = function() { ... };

    f.bar = function() { ... };

    return f;
})(); 
```

然后，您可以通过执行以下操作“卸载”它：

```
foo = undefined; 
```

...只要它没有给出不清理的对自身的引用（例如设置事件处理程序或其他闭包）。

# android - 如何从 Google Play 商店中检索所有应用内购买项目

> ID：11496288
> 
> 赞同：0
> 
> 时间：2012-07-15T22:46:58.357
> 
> 标签：android, billing

我正在为 Android 应用程序购买应用程序。我想发送一个请求，以检索市场上该应用程序可用的所有项目，以及每个项目的产品 ID、描述和价格。原因是我不想硬编码项目，所以当项目发生变化时，应用程序可以直接从服务器获取它，而不需要重新构建。但是我找不到执行此操作的请求。如果我遗漏了某些内容或尚不支持此功能，请告诉我。

谢谢雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:11:22.327

应用计费 api 中的新版本 3 更好地支持从服务器获取产品信息。它也比旧版本简单得多。

# entity-framework - 如何在 EF 中访问多对多表中的数据？

> ID：11496289
> 
> 赞同：3
> 
> 时间：2012-07-15T22:47:32.907
> 
> 标签：entity-framework

我是 EF 的新手，我发布了一个关于在创建 .edmx 时我的 RecipeMeal 表发生了什么的问题。这是两者的图表。 [http://imgur.com/a/zY17T](http://imgur.com/a/zY17T)

我了解到 EF 内置了对多对多关系的支持，这应该会发生。

不过，我很困惑，我如何访问数据。

例如，（请参阅 imgur 链接）如果我想获取所有膳食名称为“Lunch”的食谱，我将如何获取该数据？

英孚 5.0 遥控

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:12:02.393

我想你所追求的是

```
from m in db.C_id_Meal
from r in m.Recipes
where m.Name == "lunch"
select new { m.Name, Recipe = r.Name, ... } 
```

# iphone - 设计一个类似 Flipboard 的 iOS 应用需要什么

> ID：11496290
> 
> 赞同：2
> 
> 时间：2012-07-15T22:47:35.870
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在学习iOS开发，想构建一个像Flipboard这样的交互式杂志应用程序，看起来并不太复杂。我知道我可以构建与 UIWebView 类似的东西，但我更愿意学习如何构建交互式原生应用程序。

谁能告诉我涉及哪些高级客户端 iOS 框架，以便我可以专注于学习它们？（动画，导航......）任何文章或代码示例会更好。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:09:57.113

如果您想保持简单，Apple 内置的 UIPageViewController 将帮助您完成大部分工作。有许多开源的 FlipBoard 风格的过渡库。之前通过我的提要出现的两个（尽管我没有在愤怒中使用过）是：

[https://github.com/Reefaq/FlipView](https://github.com/Reefaq/FlipView)

[https://github.com/Dillion/iOS-Flip-Transform](https://github.com/Dillion/iOS-Flip-Transform)

# asp.net - 在 Ninject 模块中初始化 EF DbContext 数据库

> ID：11496293
> 
> 赞同：2
> 
> 时间：2012-07-15T22:48:09.257
> 
> 标签：asp.net, entity-framework, initialization, global-asax, dbcontext

我有一个“已经被教导”将一些初始数据播种到数据库中的一个`InDocDbContext: DbContext`和一个。`InDocDbContextInitializer: DropCreateIfModelChangesInitializer`

我正在尽力避免将初始化代码放入我的 ASP.NET 应用程序的 global.asax 中的 App_Start 方法中。

我使用 Ninject 作为 IOC 容器。我可以将初始化逻辑放在 NinjectModule 中或将其隐藏在上下文中，这样我就不必将它带到 global.asax 代码中了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:56:10.147

您可以将其添加到上下文的静态构造函数中：

```
public InDocDbContext : DbContext
{
    static InDocDbContext() 
    {
        Database.SetInitializer<InDocDbContext>(new InDocDbContextInitializer());
    }
} 
```

如果您使用的是 EF 4.3 或更高版本，您还可以简单地在 web.config 文件中定义初始化程序。请参阅[原始 4.3 文档](https://web.archive.org/web/20120708081919/http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx)或[当前版本的文档](https://msdn.microsoft.com/en-us/library/jj556606.aspx)。

# delphi - 连接到 SQL Server Compact Edition 时“对象已打开”

> ID：11496297
> 
> 赞同：1
> 
> 时间：2012-07-15T22:48:49.457
> 
> 标签：delphi, sql-server-ce, tadoquery

我希望有人可以帮助我解决这个问题，因为我正在扯掉我的头发。

我正在创建一个使用 SQL Server Compact 存储一组数据的应用程序。我正在使用 TADOQuery 连接到工作正常的服务器，并且我能够创建表并将值插入到数据库中。然后我可以在 Management Studio 中进行检查，以确保一切都已成功完成。

我遇到的问题是当我尝试从表中检索数据时。在 Management Studio 中，我可以执行标准 SQL 查询

```
 SELECT * FROM Components 
```

这会愉快地返回一个包含存储在 components 表中的所有数据的表。

但是，当我使用 TADOQuery 在 Delphi 中执行此代码时，我收到“对象已打开”错误。我正在使用的代码如下。

```
 Query := TADOQuery.Create(nil);
    Query.ConnectionString := 'Provider=Microsoft.SQLSERVER.CE.OLEDB.3.5;Data Source=c:\temp\test.sdf';
    Query.SQL.Text := 'SELECT * FROM Components';
    Query.Open; 
```

这会导致“对象已打开”错误。

任何想法将不胜感激！

干杯，

阿里

***更新***

我更新了我的代码如下，但我仍然得到同样的错误。有任何想法吗？

```
 Query := TADOQuery.Create(nil);

    Connection := TADOConnection.Create(nil);
    Connection.ConnectionString := 'Provider=Microsoft.SQLSERVER.CE.OLEDB.3.5; Data Source=c:\temp\test.sdf';
    Connection.LoginPrompt := False;
    Query.Connection := Connection;

    DataSource := TDataSource.Create(nil);
    Query.DataSource := DataSource;

    Query.SQL.Text := 'SELECT * FROM Components';
    Query.Open; 
```

# c++ - Winsock - 将客户端重新连接到服务器 - 10061

> ID：11496300
> 
> 赞同：2
> 
> 时间：2012-07-15T22:49:03.070
> 
> 标签：c++, sockets, winsock, winsock2

我想我会为此提出一个新问题。我设置了一个 TCP 服务器/客户端，它们以我通常想要的方式进行通信。1个服务器和1个客户端。

我现在要做的是添加允许客户端在连接丢失后自动重新连接到服务器的功能。我无法在网上找到有关如何执行此操作的完整信息。这是（希望）相关的问题代码：

服务器：

```
 case FD_ACCEPT: //Connection request  
    {  
        SOCKET TempSock = accept(s, (struct sockaddr*)&fromm, &fromlenn);  
        s = TempSock; //Switch old socket to the new one  
        m_sNetworkStatus.Format("[%s] accepted.", inet_ntoa(fromm.sin_addr));  
        m_hNetworkStatus.SetWindowTextA(m_sNetworkStatus);  
    } 
```

第一个客户端连接正常。服务器侦听，客户端连接，客户端断开连接...... **但是**客户端第二次尝试连接生成的客户端 IP 地址（如服务器所见）使得打印`inet_ntoa(fromm.sin_addr))`将输出`[0,0,0,0]`。因此，客户端“认为”它已连接，但事实并非如此，并且服务器打印它接受了连接但无法发送任何数据......在客户端断开连接并尝试再次重新连接会导致

> 连接被拒绝 10061 错误。

（如果我从服务器端断开连接并监听一个新端口就没有问题）

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:49:53.033

您正在用 的结果覆盖您的侦听*服务器套接字* ，即*连接的套接字*。这是完全错误的——你应该为所有后续调用重用你调用的同一个服务器套接字，这将为你提供一个*新*的套接字，每次都代表来自客户端的全新 TCP 连接。`s``accept()`*`listen()``accept()`*

# web-services - POST 方法可以同时包含命名参数和 POST 正文吗？

> ID：11496307
> 
> 赞同：0
> 
> 时间：2012-07-15T22:50:01.673
> 
> 标签：web-services, http, rest

我想知道 POST 方法是否可以同时包含命名参数和另一个 POST 正文（包含数据）。

我不使用多帖子方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:12:37.350

POST 请求可以包含查询字符串数据（就像 GET 一样）和 POST 正文。

# iphone - 使用文本字段中的空格会使应用程序崩溃

> ID：11496309
> 
> 赞同：0
> 
> 时间：2012-07-15T22:50:23.627
> 
> 标签：iphone, string

在我的应用程序中，我使用从 UITextField 传递的字符串。它可以工作，但是当用户输入带有空格（即 2 个或更多单词）的文本时，应用程序在我使用它的地方崩溃。

```
.h
NSString *nameReturned
IBOutlet UITextField  *nameField;

.m
nameReturned = nameField.text; 
```

应用程序崩溃的地方：

```
NSLog(@"name returned  %@",nameReturned);    //here the NSLOg returns the string with the blanks spaces, I mean 2 or more word correctly
NSString *name =    [[NSString alloc] initWithFormat:@"%@", nameReturned];  //there the app crash if blank spaces are present. 
```

我使用此字符串来获取用于 URL 请求的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:00:58.127

请发布更多详细信息。

**它对我来说很好用**

。H

```
@interface MyClass : UIViewController {

    NSString *nameReturned;
    IBOutlet UITextField  *nameField;

}

@property (nonatomic, retain) IBOutlet UITextField  *nameField;

-(IBAction)clickMe;

@end 
```

**.m**

```
@implementation MyClass
@synthesize nameField;

-(IBAction)clickMe{

nameReturned = [[nameField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] retain];
NSLog(@"name returned  %@",nameReturned);    //here the NSLOg returns the string with the blanks spaces, I mean 2 or more word correctly
NSString *name =    [[NSString alloc] initWithFormat:@"%@", nameReturned];  //there the app crash if blank spaces are present.
NSURL *uRL = [NSURL fileURLWithPath:name];

    //release the  nameField in dealloc and nameReturned your after usage

}

@end 
```

# jquery-mobile - 移动设备上的 Google AdSense

> ID：11496311
> 
> 赞同：1
> 
> 时间：2012-07-15T22:50:48.200
> 
> 标签：jquery-mobile, cordova, ads

我想在我的移动应用（HTML5、CSS3、jQuery mobile、Phonegap）上放置 Google 广告。我以为我只需将与我的网站上相同的脚本添加到 HTML 中，但显然还有更多内容。我正在阅读此内容：http: [//support.google.com/adwords/bin/answer.py](http://support.google.com/adwords/bin/answer.py?hl=en&answer=2472776&from=1149847&rd=1) ?hl=en&answer=2472776&from=1149847&rd=1 并提到在创建添加时我必须选择一种脚本语言。然后代码以 ASP、PHP、JSP 或 CGI 呈现给我，但我不想要这些，我只想以某种方式在 HTML 中插入常规代码。现在，这里有什么方法可以显示移动广告？任何例子都会很棒！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:18:35.800

如果您的应用程序是“本地的”，即您希望通过应用程序商店分发它。

Adsense 不是答案。

您应该查看适用于 IOS 设备的[Admob](http://www.google.com/ads/admob/)（由 Google 拥有）或[Iad](http://advertising.apple.com/)（Apple）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:01:12.293

让我改写帖子。我在下面的 inmobi 网站上找到了一个帖子。有一个没有插件的 javascript 集成 phonegap 的视频教程。使用 PhoneGap 和 InMobi 赚钱 [http://www.inmobi.com/inmobiblog/2012/02/15/make-money-with-phonegap-inmobi/](http://www.inmobi.com/inmobiblog/2012/02/15/make-money-with-phonegap-inmobi/) 谢谢 Abhishek

# c++ - Stroustrup 的使用 C++ 的 PPP：第 7 章，第 7 节（“从错误中恢复”）

> ID：11496313
> 
> 赞同：2
> 
> 时间：2012-07-15T22:51:03.797
> 
> 标签：c++

**编辑：**这本书没有任何问题，我只是未能正确复制其中提供的代码。该`try-catch`块应该在while循环内，而我把它放在它外面。

* * *

关于 Stroutrup 的第 7 章第 7 节（“从错误中恢复”）的“编程：使用 C++ 的原理和实践”，我可能会遗漏一些东西。我希望读过这本书的人能够帮助我（或者任何人，实际上！）。

我们开发了一个带有令牌解析器的计算器。当程序读取一个无效的令牌时，它就终止了。第 7 节的目标是使计算器从此类错误中恢复而不终止。我的问题是，在遵循本书的指示后，计算器仍会在令牌无效后终止。

[这](http://pastebin.com/LfCVSYeg)是计算器的完整代码。[这](http://pastebin.com/DkAqF5Gf)是 std_lib_facilities.h，以防您需要它来理解代码。

如您所见，`main()`调用 for ，如果抛出异常（当读取无效令牌时发生）`calculate()`，它又调用。然后从 Token_stream 中删除所有内容，直到找到*print* char (';')，所以我们可以继续下一个计算，希望不会包含另一个无效令牌。`clean_up_mess()``clean_up_mess()`

 *但是在异常处理完成后，程序就简单地终止了。我需要做什么才能恢复引发异常的地方？作者是否忘记解释这一点，或者我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T22:57:34.140

处理异常后，C++ 继续执行该块*之后的代码。*`catch`它不会从引发异常的地方“恢复”。

解决方案是将`try`/`catch`块*移动*到`while`循环内`calculate()`：

```
void calculate()
{
    while (cin) {
        try {
            cout << prompt;
            Token t = ts.get();
            while (t.kind == print)
                    t=ts.get();
            if (t.kind == quit) {
                    return;
            }
            ts.putback(t);
            cout << result << expression() << endl;
         } catch (exception& e) {
             cerr << e.what() << endl;
             clean_up_mess();
         }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T22:59:02.470

这不是一个简单的问题要解决。我的意思是，仅仅指出错误并不能解决它。当您捕获异常时，您调用`clean_up_mess()`：

```
catch (exception& e)
{
        cerr << e.what() << endl;
        clean_up_mess();
} 
```

但是，然后函数就退出了。而在 中`main()`，除了调用之外，您不会做任何其他事情`calculate()`，所以无论如何它都会结束。在您的 clean_up_mess 函数中，您只需让流忽略违规条目，但其他任何内容。

您必须将代码放入循环中，以便它能够跟随执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T22:59:09.160

在您的情况下，`while`循环读取输入位于 try-catch 块内。结果，当抛出异常时，循环终止，处理异常后函数返回。您需要做的是将 try-catch 块放入 while 循环中，以便它继续读取和处理输入。*

# java - 如何从可运行的 JAR 中读取/写入外部数据资源？

> ID：11496316
> 
> 赞同：0
> 
> 时间：2012-07-15T22:51:36.500
> 
> 标签：java, command-line, jar, resources

我想`MyRunnableJar.jar`从命令行运行。它将需要从 读取`file_[1-4].dat`，进行一些处理，然后写入`file_5.dat`. 所有上述数据文件都`MyRunnableJar.jar`在文件系统中。例如：

*   `super_directory/`
    *   `MyRunnableJar.jar`
    *   `data_resources/`
        *   `file_1.dat`
        *   `file_2.dat`
        *   `file_3.dat`
        *   `nested_data_directory/`
            *   `file_4.dat`
            *   `file_5.dat`

（`MyRunnableJar.jar`由 Eclipse 的`Export`功能创建。）

我想以这种方式做事的原因是因为该应用程序的计算成本太高，无法在我的小笔记本电脑上运行。相反，我想将它放在远程服务器上（以及它必须访问的所有大数据文件）并在那里运行它。

问题是，我不知道如何在这些数据文件所在的位置显示可运行的 JAR。如果需要，当然可以移动数据文件。但是，将它们保留在 JAR 中不是一种选择，因为如果我想更改哪怕是一点应用程序代码，我就必须重新传输整个 JAR，如果它包含数据文件，这将是相当大的。`file_5.dat`此外，如果它实际上在我的 JAR 中，我将无法写入。

我知道在 Stack Exchange 上有很多与此类似的问题，但在每种情况下，问题在某些重要方面都略有不同。

* * *

编辑：

*   请参阅已接受的答案。
*   另请注意，Andre 的解决方案（在评论中解释）也有效，因为在我的情况下，JAR 和数据文件将始终位于文件系统中相对于彼此的相同位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:24:05.850

你真正需要做的是弄清楚你的`.jar`文件在哪个目录，不管`System.property("user.dir");`返回什么或从哪里`MyRunnableJar.jar`执行。您不想假设您当前与 位于同一目录中`MyRunnableJar.jar`，如果不是，则无法计算*相对*目录，因为您不再知道*相*对于该目录的位置`.jar`。

以下代码片段将为您执行此操作：

```
return new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().getPath()); 
```

[替换`MyClass`为您的`main`班级]

然后，您可以使用它来构建要从中读取的目录的路径。从那里都是蛋糕。

# php - PHP MySQL：查询疑难解答

> ID：11496317
> 
> 赞同：1
> 
> 时间：2012-07-15T22:51:44.570
> 
> 标签：php, mysql

我有一个我认为是直截了当的查询，但我似乎无法让它工作。所有帮助表示赞赏！

**表格：**

涉及两个表：`gallery_meta`和`prm_album`。`The gallery_meta`tbl 包含存储在文件结构中的图像数据。tbl 只是将`prm_album`专辑 ID 与专辑常规文本名称对齐。对于这两个 tbl，查询中使用的字段名称都是正确的。

**查询：**

在下面的代码中，我首先得到一组保存的专辑名称。然后我检查文件结构以查看哪些目录实际包含图像。此时，我想再次查询数据库以获取每个作为正数返回的专辑的缩略图。正是在这里，该过程失败了。

我得到的只是一个白屏，没有任何错误报告。数组`$albums`已成功填充，`$id`变量正在传递给`$q`查询。`$pattern`只是存储专辑目录的父目录的文件路径。

```
 //Get album names from db
            $albums = array(); 
            $q="SELECT ID, Name FROM prm_album WHERE 1";
            $sql=mysql_query($q) or die(mysql_error());
            while($r=mysql_fetch_array($sql)) {
                $album = $r['Name'];
                $album_dir = $pattern.$album.'/';

                //check which albums actually contain images (dividing to account for thumbs, med, lrg.)
                $filecount = count(glob($album_dir.'*'))/3;

                //if images found, put album in array
                if($filecount >= 1) {
                    $albums[ $r['ID'] ] = $filecount;
                }
            }

            foreach($albums as $id => $filecount) {     
                $q="SELECT m.AlbumID, m.FileName, m.FileExt,
                        m.LegacyName, m.IsDefault,
                        p.Name
                        FROM gallery_meta AS m
                            LEFT JOIN prm_album AS p
                                ON m.AlbumID = p.ID

                        WHERE m.AlbumID = $id
                            AND Public = 1
                            ORDER BY IsDefault DESC
                            LIMIT 0,1";

                $sql=mysql_query($q) or die(mysql_error());
                while($r=mysql_fetch_array($sql)) {
                    $album=$r['Name'].'/';
                    $legacyname=$r['LegacyName'];
                    $filename=$r['FileName'].'-sm.';
                    $ext=$r['FileExt'];

                    echo '<img src="'$pattern.$album.$filename.$ext.'" />'.$legacyname.'<br/>';
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:08:40.870

几个点 ${id} 可以这样写在一个字符串中，可能需要 \"${id}\" 但更有可能 **将所有 $q 字符串放在 PHP 代码的一行中，否则解析器解释器可能会出错在其中的换行符上，当然 sql 会。**

```
$q="SELECT m.AlbumID, m.FileName, m.FileExt, m.LegacyName, m.IsDefault, p.Name FROM gallery_meta AS m LEFT JOIN prm_album AS p ON m.AlbumID = p.ID WHERE m.AlbumID = $id AND Public = 1 ORDER BY IsDefault DESC LIMIT 0,1"; 
```

您应该也可以先在命令行中将其测试到数据库中（有点智慧）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:21:05.523

改变

```
echo '<img src="'$pattern.$album.$filename.$ext.'" />'.$legacyname.'<br/>'; 
```

至

```
echo '<img src="'.$pattern.$album.$filename.$ext.'" />'.$legacyname.'<br/>'; 
```

第一个点不见了。并始终将这些行设置在您的脚本之上 =)

```
ini_set('display_errors', 1);
error_reporting(E_ALL); 
```

# django - 如何在模板中访问多层ManyToManyField？

> ID：11496322
> 
> 赞同：1
> 
> 时间：2012-07-15T22:52:17.930
> 
> 标签：django, django-templates, many-to-many

我有一个三层“深度”模型，我想通过我的模板访问它：

楷模：

```
class Match(models.Model):

    pl1 = models.IntegerField(default=0)
    pl2 = models.IntegerField(default=0)
    boards = models.ManyToManyField(Scoreboard)
    active = models.IntegerField(default=1)
    turn = models.IntegerField(default=0)

    def __unicode__(self):
        return "Match " + str(self.id) 
```

* * *

```
class Scoreboard(models.Model):

    user = models.ForeignKey(User) 
```

* * *

我只是在猜测，但要获得连接到每个“匹配”的用户名称，不应该是这样的：

```
{% for active in matches %}
{{active}} - {{active.boards.user}}<br>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T00:34:51.773

`boards`是ManyToMany，所以每个都有*很多*记分牌`match`。因此，您需要遍历它们。

```
{% for active in matches %}
  {{ active }}:
  {% for board in active.boards.all %}
      {{ board.user }}
  {% endfor %}
{% endfor %} 
```

# php - 联系表格未发送

> ID：11496325
> 
> 赞同：2
> 
> 时间：2012-07-15T22:53:07.007
> 
> 标签：php, html, sendmail

我让它工作了一分钟，我不确定我做了什么来阻止它工作。它仍然将我带到提交时的另一个页面，但我的电子邮件绝对没有任何活动。

**HTML**

```
<form id="contact_form" action="sendemail.php" method="post">
    <p><label>Name:<br />
        <input type="text" name="name" class="textfield" value="" />
    </label></p>

    <p><label>Email: <br />
         <input type="text" name="email" class="textfield" value="" />
    </label></p>

    <p><label>Phone Number: <br />
        <input type="text" name="phone" class="textfield" value="" />
    </label></p>

    <p><label>Detail: <br />
        <textarea name="detail" class="textarea" cols="45" rows="5"></textarea>
    </label></p>

    <p><input type="submit" name="submit" class="button" value="Submit" /></p>
</form> 
```

**PHP**

```
<?php 
$name = $_REQUEST['name'];
$email = $_REQUEST['email'];
$phone = $_REQUEST['phone'];
$detail = $_REQUEST['detail'];

$message = "Name: $name\nEmail: $email\nPhone Number: $phone\nDetail: $detail" ;

mail( "myemail@gmail.com", "You have recieved a message", "Information Requested:\n\n$message", "From: $email") ;

header( "location: http://mywebsite.com/thanks.html" );

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T02:35:59.283

您好，请检查您的 mail() 是否有效。

```
if(mail($to, $subject, $message, $headers)){
  // Working
} 
```

如果不是请做邮件功能的标准格式

```
$name = $_REQUEST['name'];
$email = $_REQUEST['email'];
$phone = $_REQUEST['phone'];
$detail = $_REQUEST['detail'];

$subject = "Subject";
$headers = "From: \"".$youremail." ".$youremail."\" <".$youremail.">\n"; 
$headers .= "To: \"".$email."\" <".$email.">\n"; 
$headers .= "Return-Path: <".$email.">\n";
$headers .= "MIME-Version: 1.0\n";
$headers .= "Content-Type: text/HTML; charset=ISO-8859-1\n";    

$message = "Your Message here!";

if(mail($to, $subject, $message, $headers)){
   // success
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:10:46.267

你可以使用

```
<?php    
if(isset($_POST['submit'])){    
$name = $_POST['name'];
... other info
$message = "Name: $name\nEmail: $email\nPhone Number: $phone\nDetail: $detail";
mail( "myemail@gmail.com", "You have recieved a message", "Information Requested:\n\n$message", "From: $email") ;
   header( "location: http://mywebsite.com/thanks.html" );
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T23:22:52.590

你有任何错误吗？使用`ini_set('display_errors', true)`并查看。

* * *

您应该更改`$_REQUEST`为`$_POST`，因为`$_REQUEST`当您不知道数据来自何处（GET、POST 或 COOKIE）时应该使用 。我们看到数据来自 POST，因为您将表单的方法指定为 POST。

您还应该检查这些变量是否使用[`isset()`](http://php.net/manual/en/function.isset.php)or设置[`empty()`](http://php.net/manual/en/function.empty.php)。

* * *

@Marcio [Simao](https://stackoverflow.com/a/11496422/1494505)
Headers 不是脚本工作所必需的。它是可选参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T23:23:11.200

可能是因为 HTML 如果它显示`bool(true)`在`var_dump()`...

尝试从标签中取出您的输入字段...通常标签用于即将到来的字段..不要将该字段放在标签标签下...像这样：

```
<p><label>Name:<br />
    <input type="text" name="name" class="textfield" value="" />
</label></p> 
```

但首先使用 . 检查您的 php 代码`var_dump()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T23:01:09.713

许多服务器都有 I/O 电子邮件限制。尝试代码时发生过一次。也许只是这个，或者——正如奥斯汀所说——也许邮件被发送到你电子邮件地址的垃圾邮件文件夹。

尝试检查您的网络服务器日志，看看它是否包含更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-15T23:13:44.930

您应该定义标题并进行一些改进，尝试使用以下代码：

```
// As you know that you form uses POST method, you can use $_POST instead of $_REQUEST
$name   = $_POST['name'];
$email  = $_POST['email'];
$phone  = $_POST['phone'];
$detail = $_POST['detail'];

// Headers
$headers  = "From: =?utf-8?B?".base64_encode ('Sender Name')."?= <sender@email.com>\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=utf-8\r\n";

// As the content is HTML, you shoud use <br /> instead of \n to break line
$message = "Name: $name<br />Email: $email<br />Phone Number: $phone<br />Detail: $detail" ;

// Trying to send the message
if ( mail('to@email.com', "=?utf-8?B?".base64_encode('Message subject')."?=", $message, $headers) )
    header( "location: http://mywebsite.com/thanks.html" );
else
    echo 'Message fail'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-15T23:14:01.727

检查您的垃圾/垃圾邮件文件夹。如果消息不存在，请尝试以下代码：

```
<?php
$name = $_REQUEST['name'];
$email = $_REQUEST['email'];
$phone = $_REQUEST['phone'];
$detail = $_REQUEST['detail'];

$message = "Name: $name\nEmail: $email\nPhone Number: $phone\nDetail: $detail" ;

var_dump( mail( "myemail@gmail.com", "You have recieved a message", "Information Requested:\n\n$message", "From: $email") );

//header( "location: http://mywebsite.com/thanks.html" );
?> 
```

如果邮件发送成功，则返回`bool(true)`，否则返回`bool(false)`失败。

另外，请确保电子邮件地址正确...

# ruby-on-rails - 我可以在 Geocoder 中使用“near”方法来检查两个模型吗？

> ID：11496335
> 
> 赞同：0
> 
> 时间：2012-07-15T22:54:14.123
> 
> 标签：ruby-on-rails, ruby, geocoding, rails-geocoder

我有 2 个模型：业务和程序。

```
class Business < ActiveRecord::Base
has_many :programs

class Program < ActiveRecord::Base
belongs_to :business 
```

企业有很多项目。业务和程序在各自的表中都有纬度和经度列。有时程序与业务地址相同，但并非总是如此。现在我只在程序表中存储程序的地址，如果它与公司的地址不同，这意味着纬度/经度列如果相同，则为空白。如果我确实将程序实例的地址保留为空白（纬度和经度为空白），我想使用 Geocoder .near 方法调用来搜索还包括业务表中的业务地址。

换句话说，如果我现在这样做：

```
@programs = Program.near(params....) 
```

我只得到程序表中记录了纬度/经度的程序。显然这是意料之中的。如果程序实例的纬度/经度为空白，是否有任何方法可以更改 near 方法（不分叉 gem）或使用范围来让上面的调用也检查 Businesses 表？

# php - 一段时间后取消设置会话[如何在一段时间后删除数据]

> ID：11496336
> 
> 赞同：0
> 
> 时间：2012-07-15T22:54:16.060
> 
> 标签：php, session-timeout, unset

我有一个简单的 php 聊天脚本，它没有数据库，它工作正常。**但它会在msg.html**文件中创建并存储所有聊天记录，我想在一段时间后删除这些聊天记录。如何在大约 30 分钟后删除这些聊天。

PHP代码在下面

```
<?php 
    if (isset($_GET['msg'])){
        if (file_exists('msg.html')) {
           $f = fopen('msg.html',"a+");
        } else {
           $f = fopen('msg.html',"w+");
        }
      $nick = isset($_GET['nick']) ? $_GET['nick'] : "Hidden";
      $msg  = isset($_GET['msg']) ? htmlspecialchars($_GET['msg']) : ".";
      $line = "<p><span class=\"name\">$nick: </span><span class=\"txt\">$msg</span></p>";
        fwrite($f,$line."\r\n");
        fclose($f);

        echo $line;

    } else if (isset($_GET['all'])) {
       $flag = file('msg.html');
       $content = "";
       foreach ($flag as $value) {
        $content .= $value;
       }
       echo $content;

    }
?> 
```

请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:00:09.830

最好的解决方案是使用[`cron`](http://unixhelp.ed.ac.uk/CGI/man-cgi?crontab+5/). 您可以每 X 分钟执行一次清理 PHP 脚本，如下所示：

`0,30 * * * * /path/to/php /path/to/cleanup_script.php`

如果你想清空文件，这很简单——你可以使用`file_put_contents($file, '');`

如果要删除特定消息，则需要在每行的开头添加时间戳（您可以在输出聊天时将其删除）并在清理脚本中对其进行解析。

**笔记**

`which php`您可以通过在命令行上运行来获取 php 的路径。

# php - 如何在使用 Facebook 的 PHP SDK 上传的照片的标题中标记用户？

> ID：11496342
> 
> 赞同：0
> 
> 时间：2012-07-15T22:54:58.517
> 
> 标签：php, facebook, facebook-graph-api

这个问题说明了一切。我遵循了本教程：

[http://www.webspeaks.in/2011/12/upload-photos-to-facebook-fan-page.html](http://www.webspeaks.in/2011/12/upload-photos-to-facebook-fan-page.html)

我设法做到了。现在我想要它，这样每当有人上传照片时，用户就会被标记在照片的标题中——就在标题中，所以任何查看我的页面的人都可以知道上传照片的用户是谁。这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:19:18.080

我认为这已经在这里得到了回答：[如何使用 facebook php SDK 在上传的照片中标记朋友](https://stackoverflow.com/questions/10166292/how-can-i-tag-friends-in-uploaded-photo-using-facebook-php-sdk)

就像那里所说的那样，请在此处查看有关如何使用标签的文档：[https ://developers.facebook.com/docs/reference/api/photo/#tags](https://developers.facebook.com/docs/reference/api/photo/#tags)

只是从头开始在我的脑海中做这个（未经测试）

```
$photo = $facebook->api($album_id . '/photos', 'post', $args);
$argstag = array('to' => $user);
$datatag = $facebook->api('/' . $photo['id'] . '/tags', 'post', $argstag); 
```

# jquery - 使用 jquery mobile 的 ios/Android 等页面指示器

> ID：11496345
> 
> 赞同：2
> 
> 时间：2012-07-15T22:55:15.687
> 
> 标签：jquery, jquery-mobile

我的网络应用程序中有 4 个或更多页面，我在 ios/android 中看起来类似于页面指示器。现在是否有可能使用 Jquery mobile 或其他一些有效的方式来实现这一点。

我发现以下关于相同要求的问题，因此想知道 Jquery 从那时起是否引入了页面指示器，或者**现在有更好的有效方法来实现相同的要求**。

[使用 jQuery Mobile 创建 iOS 页面指示器（点）](https://stackoverflow.com/questions/5400355/creating-ios-page-indicator-dots-with-jquery-mobile)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:06:03.993

It can be achieved with some pretty simple programming, put 4 dots (you could use images) in the footer and then with javascript you write something like (pseudocode):

```
page = get current page
switch(page) {
    case 1:
        highlight dot1
        -make sure all other dots are not highlighted
    break;
    case 2:
        -highlight dot2
        -make sure all other dots are not highlighted
    break;
    etc...
} 
```

I just checked on my iphone and the dot highlightning isn't even animated, so you could just get away with some images or generated dots.

# jstl - 如何使用作为属性传递的参数调用 bean 方法

> ID：11496356
> 
> 赞同：0
> 
> 时间：2012-07-15T22:58:03.437
> 
> 标签：jstl, javabeans

```
<c:out value="${sessionScope.controller.getQuestion(${requestScope.questionNumber})}"/> 
```

在哪里

控制器是一个bean

getQuestion 是一个 bean 的方法

questionNumber 是一个属性

当我调用不带参数的 bean 方法时，它可以工作。

```
<c:out value="${requestScope.questionNumber}"/> 
```

返回需要的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:18:12.203

我认为您的意思是 bean 的声明和分配给 jsp 页面中 bean 声明的 id 的使用。

jsp:useBean id="qanda" class= then qanda.setQuestion("a question ?"); ……这里没时间了

# python - 在服务器上找不到文件时阻止代码崩溃的方法？

> ID：11496358
> 
> 赞同：-2
> 
> 时间：2012-07-15T22:58:26.667
> 
> 标签：python, file, loops, crash

所以我的问题是，当其中一个在服务器中找不到文件时，我的代码会崩溃。有没有办法在没有找到文件时跳过查找过程并继续循环。下面是我的代码：

`fname = '/Volumes/database/interpro/data/'+uniprotID+'.txt'`

 ````
for index, (start, end) in enumerate(searchPFAM(fname)):
        with open('output_'+uniprotID+'-%s.txt' % index,'w') as fileinput:
            print start, end
            for item in lookup[uniprotID]:
                item, start, end = map(int, (item, start, end)) #make sure that all value is int
                if start <= item <= end:
                    print item
                    result = str(item - start)
                    fileinput.write(">{0} | at position {1} \n".format(uniprotID, result))
                    fileinput.write(''.join(makeList[start-1:end]))
                    break
            else:
                    fileinput.write(">{0} | N/A\n".format(uniprotID))
                    fileinput.write(''.join(makeList[start-1:end])) 
````  `* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T22:59:51.047

您需要使用`try`/`except`块来处理异常。[有关处理异常](http://docs.python.org/tutorial/errors.html#handling-exceptions)，请参阅 Python 文档。

在这种情况下，您必须使用 包装`open()`调用（以及该`with`块中的所有内容），`try`并使用 捕获异常`except IOError`：

```
for ...
    try:
        with open(...
           # do stuff
    except IOError:
        # what to do if file not found, or pass 
```

* * *

*附加信息*

您真正应该做的是将外部`for`循环的主体拉出到一个函数中。或者也许 , 的主体`with`变成处理打开文件的函数。无论哪种方式，减少嵌套都会使事情更具可读性，并且更容易进行这样的更改，添加`try`/ `except`。

实际上，您似乎在每次外`for`循环迭代都重新打开文件，但文件名永远不会改变 - 您总是重新打开同一个文件。这是故意的吗？如果没有，您可能想重新考虑您的逻辑，并将其移到循环之外。

第三个想法，你得到的例外是什么？是文件未找到 IOError 吗？因为您正在打开文件以进行写入 ( `'w'`)，所以我不确定您为什么会得到该异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T23:04:52.090

```
for index, (start, end) in enumerate(searchPFAM(fname)):
    try:
        newname = 'output_'+uniprotID+'-%s.txt' % index
        with open(newname,'w') as fileinput:
            print start, end
            for item in lookup[uniprotID]:
                item, start, end = map(int, (item, start, end)) #make sure that all value is int
                if start <= item <= end:
                    print item
                    result = str(item - start)
                    fileinput.write(">{0} | at position {1} \n".format(uniprotID, result))
                    fileinput.write(''.join(makeList[start-1:end]))
                    break
                else:
                    fileinput.write(">{0} | N/A\n".format(uniprotID))
                    fileinput.write(''.join(makeList[start-1:end]))
    except IOError:
        print 'Couldn't find file %s' % newname 
````

# asp.net - Visual Studio 2010 Express to Pro，安装了 ASP.NET MVC 4 但不是一个选项？

> ID：11496359
> 
> 赞同：2
> 
> 时间：2012-07-15T22:58:33.513
> 
> 标签：asp.net, visual-studio-2010, asp.net-mvc-4

我有 Windows 7。我最初有 Visual Studio 2010 Express，并安装了 ASP.NET MVC 4 RC。因为我有一个学生帐户并且需要一些 Pro 功能的需求，所以我安装了 VS 2010 Professional。但是，ASP.NET MVC 4 模板不是一个选项。

我使用 Web 安装程序安装 ASP.NET MVC 4 和 SP1，但模板仍然没有显示。我卸载了 Express，并尝试再次重新安装 MVC 4 和 SP1，但仍然没有。

此外，也没有可用的 MVC 3 模板。

我应该如何进行？您还需要什么其他信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T00:18:36.533

1.  在控制面板下，选择`Programs/Uninstall a program`。

2.  找到`Microsoft ASP.NET MVC 4`并双击它。

3.  将出现 Microsoft ASP.NET MVC 4 安装提示。选择`Repair`。

瞧！打开 VS 2010 Pro，应该会列出 MVC 4 模板。在我的机器上，维修大约需要 25 分钟。

# scala - 在 Scala 中从泛型创建闭包

> ID：11496361
> 
> 赞同：5
> 
> 时间：2012-07-15T22:58:44.247
> 
> 标签：scala, swt

我正在尝试做一些我不确定 Scala 的类型系统是否允许我做的事情。

我基本上想**从通用定义创建一个闭包并返回该闭包**，同时在内部执行相同类型的函数。

例如：

```
val f = async[(str:String, i:Int, b:BigInt) => Unit]({ (String, Int, BigInt) =>
  // Code here...
})

// 'f' would have a type of (String, Int, BigInt) => Unit and would wrap the passed anonymous function 
```

定义的理论示例：

```
 def async[T](
    shell: Shell,
    success: T,
    failure: (Throwable) => Unit): T = {
        new T {
          val display = shell.getDisplay()
          display.asyncExec(new Runnable() {
            def run(): Unit = {
              try {
                success(_)
              } catch {
                case e:Throwable =>
                  failure(e)
              }
            }
          })
        }
  } 
```

这将允许我拥有一个为 SWT 创建异步回调的简单系统，同时将 SWT 排除在我的业务逻辑之外。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T05:10:25.580

您可以使用[Shapeless](https://github.com/milessabin/shapeless)库更通用地执行此操作。我们定义`wrap`如下：

```
import shapeless._, Functions._

def wrap[F, A <: HList, R](f: F)(implicit
  h: FnHListerAux[F, A => R],
  u: FnUnHListerAux[A => R, F]
): F = { (args: A) => 
  println("Before f")
  val result = f.hlisted(args)
  println("After f")
  result
}.unhlisted 
```

然后可以像这样使用它：

```
scala> val sum: (Int, Int) => Int = _ + _
sum: (Int, Int) => Int = <function2>

scala> val wrappedSum = wrap(sum)
wrappedSum: (Int, Int) => Int = <function2>

scala> wrappedSum(100, 1)
Before f
After f
res0: Int = 101 
```

这适用于任何数量的功能。

所以这在 Scala 中是可能的，尽管在没有 Shapeless 的情况下做类似的事情几乎肯定会让人头疼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T23:47:09.200

沿着这些思路怎么样：

```
scala> def wrap[T1, T2, T3, R](f: (T1, T2, T3) => R) = {
 |   (v1: T1, v2: T2, v3: T3) =>
 |     println("Before f")
 |     val r = f(v1, v2, v3)
 |     println("After f")
 |     r
 | }
wrap: [T1, T2, T3, R](f: (T1, T2, T3) => R)(T1, T2, T3) => R

scala> def foo(x: String, y: Int, z: BigInt) = (x, y, z)
foo: (x: String, y: Int, z: BigInt)(String, Int, BigInt)

scala> val wrapped = wrap(foo _)
wrapped: (String, Int, BigInt) => (String, Int, BigInt) = <function3>

scala> wrapped("foo", 42, 12345)
Before f
After f
res0: (String, Int, BigInt) = (foo,42,12345) 
```

如果您要包装的函数可能有不同数量的参数，那么不幸的是，您必须为每个不同的参数定义一次包装函数:-(

# iphone - setNeedsDisplay 不会调用 drawRect

> ID：11496366
> 
> 赞同：0
> 
> 时间：2012-07-15T22:59:47.263
> 
> 标签：iphone, objective-c, drawrect, setneedsdisplay

# 重要的：

我已经发现了问题，但版主出于某种原因删除了它：

我尝试直接从按钮调用该函数，而不是在视图控制器中使用该函数。

我仍然不完全理解为什么它不起作用，所以我会接受这个问题的任何答案。

# 主帖

按下 UIButton 后，我正在尝试做一些绘图。我的绘图是在 UIView 的子类中完成的。我的 ViewController 中有这个子类的实例。我的 ViewController 中还有一个 UIButton 调用子类的函数。在我调用的那个函数中

```
[self setNeedsDisplay]; 
```

当我加载我的应用程序时，drawRect 在视图加载时被调用一次，但永远不会再次调用，尽管每次按下按钮时都会调用 setNeedsDisplay。我查看了许多类似的问题，但没有找到解决方案。

我将在这里发布我的所有代码：

AEViewController.h

```
#import <UIKit/UIKit.h>
#import "AEGraphView.h"

@interface AEViewController : UIViewController{

IBOutlet AEGraphView *theView;

}
-(IBAction)updateAEGraphView:(id)sender;
@end 
```

AEViewController.m

```
#import "AEViewController.h"

@interface AEViewController ()

@end

@implementation AEViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    theView = [[AEGraphView alloc] init];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } 
    else {
        return YES;
    }
}
-(IBAction)updateAEGraphView:(id)sender{
    [theView UpdateView];
}

@end 
```

AEGraphView.h

```
#import <UIKit/UIKit.h>

@interface AEGraphView : UIView{

    CGContextRef mainContext;
    int power;
    int multiplier;

}
-(void)prepareGraphics;
- (void) drawLineFrom:(CGPoint)p1 To:(CGPoint)p2;
-(void)UpdateView;
@end 
```

AEGraphView.m

```
#import "AEGraphView.h"

@implementation AEGraphView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    [self prepareGraphics];
    // Drawing code
    NSLog(@"called");
    if (power == 0) {
        [self drawLineFrom:CGPointMake(100,100) To:CGPointMake(-50, -2)];
    }
    else {
        [self drawLineFrom:CGPointMake(0, 0) To:CGPointMake(150, 150)];
    }
    [super drawRect:rect];

}

-(void)prepareGraphics{
    mainContext = UIGraphicsGetCurrentContext();
    CGContextSetShouldAntialias(mainContext, TRUE);
    CGContextSetLineWidth(mainContext, 2);
    CGContextSetLineCap(mainContext, kCGLineCapRound);

}
- (void) drawLineFrom:(CGPoint)p1 To:(CGPoint)p2{
    NSLog(@"%f,%f  to %f,%f", p1.x,p1.y,p2.x,p2.y);
    // Begin a path.
    CGContextBeginPath(mainContext);

    // Add a line to the path.
    CGContextMoveToPoint(mainContext, p1.x, p1.y);
    CGContextAddLineToPoint(mainContext, p2.x, p2.y);

    // Stroke and reset the path.
    CGContextStrokePath(mainContext);
}
-(void)UpdateView{
    if (power == 0) {
        power = 1;
    }
    else {
        power = 0;
    }
    [self setNeedsDisplay];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T17:12:19.593

解决方案是从按钮调用函数，而不是从按钮调用的视图控制器中的函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:02:36.707

您确定指向自定义 UIView 的插座已连接吗？检查是否为`nil`. 另外，您是否确认正在调用您的函数？

# ruby-on-rails - 规范失败/错误：current_path.should ==tasks_path

> ID：11496367
> 
> 赞同：0
> 
> 时间：2012-07-15T22:59:47.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, rspec2, ruby-on-rails-3.2

我正在编写本教程（时间是 33:55）： http: [//net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i-had/](http://net.tutsplus.com/tutorials/ruby/the-intro-to-rails-screencast-i-wish-i-had/)

虽然 localhost:3000 显示的内容正确且功能正常，但我仍然收到 rspec 错误。感谢您的任何建议！

Ruby 1.9.2p290 Rails 3.2.3 RSpec 2.11.0

错误：运行：spec/requests/tasks_spec.rb spec/controllers/tasks_controller_spec.rb ..F。

失败：

```
 1) Tasks PUT/tasks edits a task
       Failure/Error: current_path.should == tasks_path
        expected: "/tasks"
           got: "/tasks/1/edit" (using ==)
       # ./spec/requests/tasks_spec.rb:40:in `block (3 levels) in <top (required)>
       ' 
```

任务控制器.rb：

```
 class TasksController < ApplicationController
        def index
         @task = Task.new
         @tasks = Task.all
        end

        def create
          Task.create params[:task]
          redirect_to :back
        end

        def edit
          @task = Task.find params[:id]
        end

        def update
          task = Task.find params[:id]
            if task.update_attributes params[:task]
              redirect_to tasks_path
            else
              redirect_to :back
            end
        end

       end 
```

tasks_spec.rb：

需要'spec_helper'

```
 describe "Tasks" do
    before do
    @task = Task.create :task => 'go to bed'
end

describe "GET /tasks" do
    it "display some tasks" do

       visit tasks_path
       page.should have_content 'go to bed'
    end

    it "creates a new task" do
       visit tasks_path
       fill_in 'Task', :with => 'go to work'
       click_button 'Create Task'

       current_path.should == tasks_path
       page.should have_content 'go to work'

       #save_and_open_page
    end
end  

describe "PUT/tasks" do
    it "edits a task" do
        visit tasks_path
        click_link 'Edit'

        current_path = edit_task_path(@task)

        #page.should have_content 'go to bed'
        find_field('Task').value.should == 'go to bed'

        fill_in 'Task', :with => 'updated task'
        click_button 'Update Task'

        current_path.should == tasks_path

        page.should have_content 'updated task'
    end 
```

结束结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:19:27.387

我相信通过完成这个任务...

> 当前路径 = 编辑任务路径（@task）

...您创建了一个名为“current_path”的新变量，它覆盖了水豚的。

故事的寓意是不要分配给'current_path'

# actionscript-3 - 无法使用自定义命名空间自省对象

> ID：11496374
> 
> 赞同：0
> 
> 时间：2012-07-15T23:01:00.580
> 
> 标签：actionscript-3, flash, air, flash-builder

我有循环内省对象并根据它们的属性解析它们。这一切都适用于普通对象。但是我正在使用一些具有自定义命名空间的对象，并且相同的循环不识别任何属性并且不跟踪任何内容。循环非常标准，但我还是在这里粘贴：

```
for (var id:String in record) 
{
    trace(id, " : ", record[id]); 
} 
```

有人知道如何克服这个吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:09:28.847

好的，所以我刚刚找到了解决方案。

似乎使用 bytearrays 克隆对象会返回一个具有默认命名空间的对象。

功能如下：

```
function copy(value:Object):Object
{
    var buffer:ByteArray = new ByteArray();
    buffer.writeObject(value);
    buffer.position = 0;
    var result:Object = buffer.readObject();
    return result;
} 
```

如果有人有同样的问题，我会把它留在这里......</p>

# css - content: "" 如果添加在 html 样式标签中，则有效，但不在 css 文件中

> ID：11496375
> 
> 赞同：0
> 
> 时间：2012-07-15T23:01:01.430
> 
> 标签：css, twitter

来源：http: [//twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

为了使下拉菜单的黑色小三角形，Twitter 使用以下 CSS：

```
.caret 
{
    display: inline-block;
    width: 0;
    height: 0;
    vertical-align: top;
    border-top: 4px solid black;
    border-right: 4px solid transparent;
    border-left: 4px solid transparent;
    content: "";
    opacity: 0.3;
    filter: alpha(opacity=30);
} 
```

我尝试使用`<b class="caret"></b>`但颜色是灰色的。如果您在 Twitter Bootstrap 页面上并删除内容：“”三角形也将是灰色的。如果我在 HTML 样式标签中添加代码

`<b style="-the code-"></b>`应该是黑色的。为什么会这样？

**更新**：

代码是相同的，但是当它在 CSS 文件中时，`opacity: 0.3` 是使三角形变灰的那个，但为什么 HTML 样式标签中没有发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:22:06.583

它不会变灰，因为你包括

```
content: ""; 
```

进入

```
<b style="-the code-"></b> 
```

并且双引号正在干扰。修复它做

```
<b style="... content: ''; ..."></b> 
```

这将起作用 -[**演示**](http://jsfiddle.net/rS8JA/)

# intellij-idea - IntelliJ IDEA 代码分析工具不工作

> ID：11496386
> 
> 赞同：19
> 
> 时间：2012-07-15T23:04:25.380
> 
> 标签：intellij-idea

I'm a relatively new user of the IntelliJ IDEA, moved to it from Eclipse. It has been working fine for several months, but now the code analysis plugin that performs analysis and precompiles the code on the fly, fails to work. It shows errors where they've been already fixed, not importing classes correctly. Restarting IDEA, updating to latest version and so on doesn't help. Did anybody face such problems and how did you resolve them?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-06-12T19:39:01.857

问题似乎已解决，总体而言，当 Intellij 中的某些内容无法正常工作时，您可以做几件事：

1.  关闭intellij，再次打开。
2.  尝试构建项目
3.  尝试使缓存无效并从“文件”菜单重新启动
4.  如果使用 Maven 尝试重新导入所有模块并重新生成源，这两个功能在“Maven 项目”窗口中彼此相邻。
5.  如果一切都失败了，删除整个项目并重新导入它（对于 maven，通过 pom.xml 再次打开项目，用于 gradle 和 build.gradle 等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-01T20:19:29.040

分析 > 检查代码对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-22T08:18:40.420

我在使用 Swagger 插件时遇到问题，而 intelij 分析刚刚崩溃。禁用插件解决了我的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-06T13:11:14.473

我有一个类似的问题。事实证明，我启用了省电模式。禁用后，IntelliJ IDEA 又开始正常工作了。您可以从 禁用省电模式`File->Power Save Mode`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-22T10:34:28.260

我遇到了同样的问题，它与错误[IDEA-202867 - 当 Groovy 插件被禁用时 Java 项目的代码分析失败有关](https://youtrack.jetbrains.com/issue/IDEA-202867)。

启用 Groovy 插件对我来说很有帮助。

# algorithm - 找到堆的父级和子级的方程式背后的直觉是什么？

> ID：11496390
> 
> 赞同：1
> 
> 时间：2012-07-15T23:06:21.093
> 
> 标签：algorithm

查找堆的父子节点的算法是：

家长：i / 2

左孩子：2i

右孩子：2i + 1

我试过在纸上画出数组表示，但我不确定我是否完全直观地理解了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T23:10:19.367

关键是元素以广度优先的方式枚举，并且*索引是基于 1 的*（它们从 1 开始而不是 0）。

```
 1
   / \
  2   3
 / \ / \
4  5 6  7 
```

以3为例

```
2*3   = 6   left child
2*3+1 = 7  right child 
```

至少在进行整数除法的语言中，将 6 和 7 除以 2 得到 3。

以这种方式继续编号，您的直觉应该会起作用。通常，乘以 2 将始终给出左孩子的索引。右孩子是左孩子的继任者（+1）。整数除以 2 的工作原理相同（它“丢弃”余数。）

# magento - Magento - 如何隐藏没有图像的产品

> ID：11496391
> 
> 赞同：3
> 
> 时间：2012-07-15T23:06:31.990
> 
> 标签：magento, magento-1.6

我需要帮助隐藏没有图像的 Magento 产品或首先显示有图像的产品。

我在回答另一个问题时看到了这个 $this->getLoadedProductCollection()->setOrder('image'/*or small_image*/, 'desc') 以首先加载所有带有图像的产品。但这对我不起作用。

我在 Magento 1.6.2 上。

提前致谢。

更新：请在下面查看我的完整 list.phtml。我想我做错了什么。谢谢。

```
<?php
$_productCollection=$this->getLoadedProductCollection();
$_productCollection->addAttributeToFilter('image', array('neq' => 'no_selection'));
$_helper = $this->helper('catalog/output');
$now = date("Y-m-d H:m:s");     

?>
<?php if(!$_productCollection->count()): ?>
<p class="note-msg"><?php echo $this->__('There are no products matching the selection.') ?></p>
<?php else: ?>
<div class="category-products">
<?php echo $this->getToolbarHtml() ?>
<?php // List mode ?>
<?php if($this->getMode()!='grid'): ?>
<?php $_iterator = 0; ?>
<ol class="products-list" id="products-list">
<?php foreach ($_productCollection as $_product): ?>
    <li class="item<?php if( ++$_iterator == sizeof($_productCollection) ): ?> last<?php endif; ?>">
            <?php $newFromDate = $_product->getNewsFromDate(); ?>
            <?php $newToDate = $_product->getNewsToDate(); ?>                                               
            <?php if($newFromDate < $now && $newToDate > $now): ?>
                    <div class="newproduct_grid"><?php echo $this->__('New Product') ?></div>
            <?php endif; ?>     
        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(192); ?>" width="192" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
        <?php // Product description ?>
        <div class="product-shop">
            <div class="f-fix">
                <?php $_productNameStripped = $this->stripTags($_product->getName(), null, true); ?>
                <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>
                <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product) ?>
                <?php endif; ?>
                <div id="productimgover<?php echo $_product->getId()?>" style="display: none;"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(64); ?>" width="64" height="64" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></div>
                <div id='productname<?php echo $_product->getId()?>' style='display:none'><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></div>
                <div class="desc std">
                    <?php echo $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                    <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped ?>" class="link-learn"><?php echo $this->__('Learn More') ?></a>
                </div>
                <ul class="add-to-links">
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                    <?php endif; ?>
                    <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                    <?php endif; ?>
                </ul>
            </div>
            <div style="clear: both;"></div>
        </div>
        <div class="addtocont">
            <?php echo $this->getPriceHtml($_product, true) ?>
            <?php if($_product->isInStock()): ?>
                                    <?php if ( !($_product->getTypeInstance(true)->hasRequiredOptions($_product) || $_product->isGrouped()) ) { ?>
                            <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocationAjax('<?php echo $this->getAddToCartUrl($_product) ?>','<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>

                        <?php } else { ?>
                            <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="showOptions('<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                            <a href='<?php echo $this->getUrl('ajax/index/options',array('product_id'=>$_product->getId()));?>' class='fancybox' id='fancybox<?php echo $_product->getId()?>' style="display: none;" ><?php echo $this->__('Add to Cart') ?></a>
                        <?php }  ?>
            <?php else: ?>
            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
            <?php endif; ?>            
        </div>
    </li>
<?php endforeach; ?>
</ol>
<script type="text/javascript">decorateList('products-list', 'none-recursive')</script>

<?php else: ?>

<?php // Grid Mode ?>

<?php $_collectionSize = $_productCollection->count() ?>
<?php $_columnCount = $this->getColumnCount(); ?>
<?php $i=0; foreach ($_productCollection as $_product): ?>
    <?php if ($i++%$_columnCount==0): ?>
    <ul class="products-grid">
    <?php endif ?>
        <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">
            <?php if($_product->getRatingSummary()): ?>
                <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
            <?php endif; ?>
            <?php $newFromDate = $_product->getNewsFromDate(); ?>
            <?php $newToDate = $_product->getNewsToDate(); ?>                                               
            <?php if($newFromDate < $now && $newToDate > $now): ?>
                    <div class="newproduct_grid"><?php echo $this->__('New Product') ?></div>
            <?php endif; ?>
            <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(220); ?>" width="220" height="220" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>
            <div id="productimgover<?php echo $_product->getId()?>" style="display: none;"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(64); ?>" width="64" height="64" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></div>
            <div class="moreinfo">
                <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
                <div id='productname<?php echo $_product->getId()?>' style='display:none'><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></div>
                <?php echo $this->getPriceHtml($_product, true) ?>
                    <?php if($_product->isInStock()): ?>
                        <?php if ( !($_product->getTypeInstance(true)->hasRequiredOptions($_product) || $_product->isGrouped()) ) { ?>
                            <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocationAjax('<?php echo $this->getAddToCartUrl($_product) ?>','<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>

                        <?php } else { ?>
                            <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="showOptions('<?php echo $_product->getId()?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                            <a href='<?php echo $this->getUrl('ajax/index/options',array('product_id'=>$_product->getId()));?>' class='fancybox' id='fancybox<?php echo $_product->getId()?>' style="display: none;" ><?php echo $this->__('Add to Cart') ?></a>
                        <?php }  ?>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <div class="clear"></div>
                    <ul class="add-to-links">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <li><a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                            <li><span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare"><?php echo $this->__('Add to Compare') ?></a></li>
                        <?php endif; ?>
                    </ul>
                    <div class="clear"></div>
            </div>
        </li>
    <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
    </ul>
    <?php endif ?>
    <?php endforeach ?>
    <script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>

<?php endif; ?>
    <script type="text/javascript">
    jQuery.noConflict();
    jQuery('.fancybox').fancybox({
        hideOnContentClick : true,
        width: 582,
        autoDimensions: true,
        type : 'iframe',
        showTitle: false,
        scrolling: 'no',
        onComplete: function(){ //Resize the iframe to correct size
        jQuery('#fancybox-frame').load(function() { // wait for frame to load and then gets it's height
            jQuery('#fancybox-content').height(jQuery(this).contents().find('body').height()+30);
            jQuery.fancybox.resize();
         });

        }
    });        
    function showOptions(id){
        jQuery('#fancybox'+id).trigger('click');
    }
    function setAjaxData(data,iframe){
        if(data.status == 'ERROR'){
            alert(data.message);
        }else{
            if(jQuery('.block-cart')){
                jQuery('.block-cart').replaceWith(data.sidebar);
            }
            if(jQuery('.header .block-cart-header')){
                jQuery('.header .block-cart-header').replaceWith(data.topcart);
            } 
            jQuery.fancybox.close();
        }
    }
    function setLocationAjax(url,id){
        url += 'isAjax/1';
        url = url.replace("checkout/cart","ajax/index");
        var msgHtml;
        var productImg = jQuery('#productimgover' + id).html();
        var windowOver = jQuery('#addedoverlay');
        var windowBox = jQuery('#added');
        var titleForBox = jQuery('#productname' + id).text();
        windowOver.show();
        windowBox.show().css({
            backgroundImage: "url('<?php echo $this->getSkinUrl('images/loading.gif')?>')"
        });
        try {
            jQuery.ajax( {
                url : url,
                dataType : 'json',
                success : function(data) {
                    if(data.status == 'SUCCESS'){    
                        msgHtml = '<div style="float:left;">' + productImg + '</div><em>' + titleForBox + '</em> <?php echo $this->__('was successfully added to your shopping cart.') ?><div style="clear:both;"></div><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="<?php echo $this->getUrl('checkout/cart')?>"><?php echo $this->__('View cart & checkout') ?></a>';             
                    }else{
                        msgHtml = '<p class="error-msg" style="margin-bottom:15px;">' + data.message + '</p><a id="hidewindow" href="javascript:void(0);"><?php echo $this->__('Continue shopping') ?></a>&nbsp;<a href="<?php echo $this->getUrl('checkout/cart')?>"><?php echo $this->__('View cart & checkout') ?></a>';
                    }            
                    setAjaxData(data,false);

                    windowBox.css({
                          backgroundImage: 'none'
                    }).html(msgHtml);                      
                    windowOver.one('click',function(){
                        hidewindow(windowBox,windowOver);                    
                    });        

                    jQuery('#hidewindow').click(function(){
                        hidewindow(windowBox,windowOver);                    
                    });                        
                }
            });
        } catch (e) {
        }
    }
    function hidewindow(windowBox,windowOver){
        windowOver.fadeOut(400);
        windowBox.fadeOut(400).html('');    
    }        
    </script>
<div class="toolbar-bottom">
    <?php echo $this->getToolbarHtml() ?>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T02:56:57.267

根据[此处](https://stackoverflow.com/a/3568469/766985)的答案， 但添加 neq no_selection 这应该只为您提供带有图像的产品。

```
//this builds a collection that's analagous to 
//select * from products where image != 'no_selection'
$products = Mage::getModel('catalog/product')
->getCollection()
->addAttributeToSelect('*')
->addAttributeToFilter('image', array('neq' => 'no_selection'));

foreach($products as $product)
{

} 
```

在产品列表页面中，您可以执行以下操作：

```
//$_productCollection=$this->getLoadedProductCollection();
$_productCollection = clone $this->getLoadedProductCollection();
$_productCollection->clear()
                   ->addAttributeToFilter('image', array('neq' => 'no_selection'))
                   ->load(); 
```

**编辑**

getLoadedProductCollection 集合已加载，因此需要对其进行克隆、清除然后加载。看[这里](https://stackoverflow.com/a/5285509/766985)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:11:19.653

我尝试了 Dreaded Semicolon 的解决方案，效果很好，我注意到它已经停止工作。此外，我注意到它有时会起作用，然后莫名其妙地随机停止工作。

我的猜测是这与模型有关，并且可能只是有时它使主图像可用于产品集合（这可以解释为什么有时它有效而有时无效。）

无论如何，如果您在使用解决方案时遇到问题，并且注意到您的产品仍然显示没有图像，只需尝试以下操作：

代替：

```
'image' 
```

和：

```
'small_image' 
```

像这样：

```
//$_productCollection=$this->getLoadedProductCollection();
$_productCollection = clone $this->getLoadedProductCollection();
$_productCollection->clear()
                   ->addAttributeToFilter('small_image', array('neq' => 'no_selection'))
                   ->load(); 
```

您还可以尝试[RS 的答案](https://stackoverflow.com/a/14246108/1110880)，他通过 XML 将图像添加到页面。您可能还必须使用以下方法将所有属性添加到集合中：

```
->addAttributeToSelect('*') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T16:14:33.270

我的是 Magento 1.8.0.1，我做了这些：

1.  添加：

`$collection->addAttributeToFilter('small_image', array('neq' => "no_selection"));`

到 /app/code/core/Mage/Catalog/Block/Product/List.php 中的第 157 行（用于分页以反映过滤）并将其复制到文件夹：/app/code/local/Mage/Catalog/Block/产品/（局部变化）

2.  然后管理>配置>目录>前端>使用平面目录产品“否”

由于此过滤与“平面目录产品”的使用不兼容

# objective-c - tableview to web video

> ID：11496392
> 
> 赞同：0
> 
> 时间：2012-07-15T23:07:17.083
> 
> 标签：objective-c, xcode

i am doing a table view with video. the video are from web. i make an array of the link and all work fine. the really problem is: when I select the cell I go to the youtube page and then I have to press the play button for watch the video. I wanna know how to watch directly the video pressing the cell without see the youtube page. maybe a `MediaPlayer Framework`? thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:10:29.077

我认为您可以在以下网页上找到所需的所有信息：[https ://developers.google.com/youtube/](https://developers.google.com/youtube/)

# d3.js - 在 d3.js 中对选择进行排序会干扰数据连接

> ID：11496393
> 
> 赞同：10
> 
> 时间：2012-07-15T23:07:30.883
> 
> 标签：d3.js

当我使用 selection.sort() 对 d3 中的路径选择重新排序时，数据连接受到干扰，并且我的路径被重新分配给错误的数据对象。

我只想对路径进行重新排序，以使某些路径位于其他路径之上（如 z-index 中）。我不想将数据对象从一条路径重新分配到另一条路径。

如何在不干扰数据连接的情况下重新排序路径？

```
_friends.selectAll('path').sort(function(a, b){
  return d3.ascending(a.Q, b.Q);
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T10:32:46.567

听起来您需要指定一个[*键*功能](https://github.com/mbostock/d3/wiki/Selections#wiki-data)。这允许您通过任意键绑定数据，而不是依赖默认值，即使用数据在数组中的位置，即顺序（在您的情况下可能会更改）。

如果您还没有每个数据的唯一键，您总是可以在加载时生成它们：

```
var id = 0;
for (var i = 0; i < data.length; i++) data[i].id = id++; 
```

如果您创建任何新数据，您可以继续递增`id`以获取新的唯一 ID。

然后，对于数据绑定，您可以执行以下操作：

```
.data(data, function(d) { return d.id; }) 
```

# backbone.js - 用属性表征 Parse.relation

> ID：11496394
> 
> 赞同：0
> 
> 时间：2012-07-15T23:07:53.717
> 
> 标签：backbone.js, parse-platform

我正在制作一个系统，用户可以用字符串标记其他用户（以前未定义，它可以是任何东西）。

1.  如果我使用 Parse.relation 关系是标签字符串本身，那么不使用该标签的用户无论如何都会创建一个空的关系表，这似乎是一种浪费。

2.  如果我使用名为“朋友”的 Parse.relation，我如何用标签进一步表征它？

3.  它还应该允许任意 2 个用户之间有多个标签。

我将对此进行更多思考，欢迎任何关于给定 Parse 架构的适当数据模型的想法！

谢谢，贡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T00:33:28.017

解决方案是在标签上设置 .relation，而不是用户。这样标签保持用户定义的字符串，而它的关系指向其他用户对象。

# java - PDFBox 提取的文本不包含国际（非英文）字符

> ID：11496395
> 
> 赞同：2
> 
> 时间：2012-07-15T23:08:06.657
> 
> 标签：java, internationalization, pdfbox

我正在使用 Apache PDFBox 从几个 PDF 文件中提取文本。这些文件是波兰语，它们包含波兰语字符。不幸的是，当我打印提取的文本时，我不断得到 ? （问号）而不是那些字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:20:37.940

假设您提取的文本存储在 String 中，我假设您当前正在使用它来打印 -

```
System.out.println(s); 
```

我建议您使用此代码段正确打印出波兰语字符-

```
java.io.PrintStream p = new java.io.PrintStream(System.out,false,"UTF-8");
p.println(s); 
```

这应该工作和？不会出现在打印的文本中。

# wxpython - WxPython wxMenu InsertRadioItem 问题

> ID：11496405
> 
> 赞同：0
> 
> 时间：2012-07-15T23:09:31.057
> 
> 标签：wxpython

```
wxMenuItem = wxMenuSource.InsertRadioItem(order, wx.ID_ANY, test, "")

App.Bind(wx.EVT_MENU, OnPerspective_Click, wxMenuItem)

order += 1 
```

我按程序插入收音机项目，当我单击菜单项时，我的程序崩溃了，我不知道发生了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:59:54.703

我遇到过这个，并没有一个很好的“修复”。问题是当您尝试动态添加或插入单选按钮时，它们没有正确分组。我可以想出的最好的解决方法是我将这个方法添加到我的 MenuBar 类中，以便为我重新创建一个服务器菜单。

```
def setServers(self):
  menu = Menus['Servers']
  while menu.GetMenuItemCount() > 2:
    menu.RemoveItem(menu.FindItemByPosition(2))
  menu.AppendSeparator()
  servers = Config.getValueList('rpcservers', ['hostname', 'port', 'state'])
  for s in servers:
    id = wx.NewId() #@ReservedAssignment
    evtname = 'S%s:%s' % (s['hostname'], s['port'])
    connection = '%s:%s' % (s['hostname'], s['port'])
    menu.Append(id, connection, s['description'], kind = wx.ITEM_RADIO)
    if s['state'] == 'inuse':
      menu.Check(id, True) 
```

那里的一些代码没有直接相关（对不起，快速复制和粘贴），但这里的想法是单选按钮的元素都在这个菜单的底部。在添加分隔符和所有新的单选按钮之前，我删除了所有元素和分隔符。通过以这种方式重新创建它们，我能够绕过我遇到的错误，即新添加的单选按钮与其兄弟按钮无关。希望这会有所帮助。如果您需要澄清，请告诉我。

# yahoo - YQL 外汇历史价格查询——如何更改默认精度

> ID：11496418
> 
> 赞同：2
> 
> 时间：2012-07-15T23:12:51.520
> 
> 标签：yahoo, yql, finance, forex

我正在使用 YQL 控制台使用如下查询检索历史外汇价格：

```
select * from yahoo.finance.historicaldata where symbol  in ("EURUSD=X") and startDate = "2012-07-01" and endDate ="2012-07-16" 
```

我的问题是，返回的价格被雅虎四舍五入到小数点后 2 位，这对外汇来说不是很有用，因为外汇报价通常（至少）有 4 位小数。例如，这里是该查询结果的片段：

```
{
     "date": "2012-07-13",
     "Date": "2012-07-13",
     "Open": "1.22",
     "High": "1.22",
     "Low": "1.22",
     "Close": "1.22",
     "Volume": "000",
     "Adj_Close": "1.22"
} 
```

如果您查看雅虎财经页面上的欧元/美元价格，它们都是小数点后四位。那么......我需要对我的查询做些什么才能使其返回未四舍五入的价格？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T06:16:18.410

YQL 和雅虎财经似乎无法做到这一点。如果您尝试在 Yahoo Finance 上进行基础查询，它会返回一个 csv，其中的数据只有 2 位小数。

[YQL 控制台查询](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22YHOO%22%2C%22AAPL%22%2C%22GOOG%22%2C%22MSFT%22%29%0A%09%09&env=http%3A%2F%2Fdatatables.org%2Falltables.env#h=%0Aselect%20%2a%20from%20yahoo.finance.historicaldata%20where%20symbol%20%20in%20%28%22EURUSD%3DX%22%29%20and%20startDate%20%3D%20%222012-07-01%22%20and%20endDate%20%3D%222012-07-16%22)

数据网址： http://ichart.finance.yahoo.com/table.csv?g=d&f=2012&e=16&c=2012&b=1&a=6&d=6&s= [EURUSD%3dX](http://ichart.finance.yahoo.com/table.csv?g=d&f=2012&e=16&c=2012&b=1&a=6&d=6&s=EURUSD%3dX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-18T18:06:55.923

现在可以以您想要的精度使用 YQL，因为它现在在结果中显示至少 4 个小数位。

```
select * from yahoo.finance.historicaldata where symbol = "EUR=X" and startDate = "2009-09-11" and endDate = "2010-03-10" 
```

上述语句将产生以下结果：

```
"quote": [
    {
     "Symbol": "EUR%3dX",
     "Date": "2010-03-10",
     "Open": "0.73479",
     "High": "0.73808",
     "Low": "0.73117",
     "Close": "0.73296",
     "Volume": "000",
     "Adj_Close": "0.73296"
    }, 
```

# c++ - normal() 总是给出负值

> ID：11496419
> 
> 赞同：1
> 
> 时间：2012-07-15T23:13:27.680
> 
> 标签：c++, normal-distribution

我正在使用`normal(mean, sigma)`生成具有均值和 sigma 的正态分布的随机数。我的 sigma 是 8db，mean 是 0。但是当我正常时，我总是得到负值（mean，sigma）。有什么办法可以得到正数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:23:33.403

我现在才读到您将均值设置为 0，将 sigma 设置为 8。我认为情况正好相反。所以负值是意料之中的，但并非总是如此。

随机数的生成只是伪随机的，因此如果您只生成几个值并在每次生成器时使用相同的常量，您可能只会遇到负值。

尝试使用当前系统时间设置种子或生成大量随机数，看看你是否真的只得到负值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T01:53:28.637

你不要简单地调用`normal(double mean, double sigma)`.
相反， call是平均值，`double r8_normal ( double a, double b, int &seed )`是sigma，并初始化随机数生成器。`a``b``seed`

我能够在您提供的[链接中编译和使用 Normal 库。](http://people.sc.fsu.edu/~jburkardt/cpp_src/normal/normal.html)
我下载了 normal.cpp 和 normal.hpp。这些是旧文件，主要是 Fortran 的翻译。我必须通过在前两个声明中添加和更改to
来修改 normal.hpp，以使其在低警告级别为我编译。`#include <complex>``complex``std::complex`

然后我创建了一个测试驱动程序：

```
#include "normal.hpp"
#include <iostream>

int main() {
    int seed = 123;
    std::cout << r8_normal (0.0, 8.0, seed) << '\n'
              << r8_normal (0.0, 8.0, seed) << '\n'
              << r8_normal (0.0, 8.0, seed) << '\n'
              << r8_normal (0.0, 8.0, seed) << '\n'
              << r8_normal (0.0, 8.0, seed) << '\n';
} 
```

这给出了这个输出

```
8.19933
1.45505
-2.42428
26.9111
12.8398 
```

对于mean = 0.0，sigma = 8.0，一切看起来都对我有用。

# android - Android布局：底部3个按钮

> ID：11496423
> 
> 赞同：0
> 
> 时间：2012-07-15T23:13:44.540
> 
> 标签：android, android-linearlayout, android-relativelayout

我正在设计一个布局，底部有 3 个按钮，彼此非常相邻。因为我也想在屏幕中间添加更多按钮，所以我正在做的是将整个屏幕设置为相对布局，并在底部添加 3 个按钮，我添加了一个线性布局来包含这 3 个按钮. 但是，它会卡住。该按钮不会在底部显示 3 个按钮。这是我的 xml 布局文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:orientation="vertical" 
        android:weightSum="1">

           <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="Button1"
        android:layout_weight="0.3" />
          <Button
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Button2" 
         android:layout_weight="0.3"/>
                              <Button
        android:id="@+id/button3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Button3"
         android:layout_weight="0.3" />

    </LinearLayout>

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/linearLayout1"
        android:layout_marginTop="16dp"
        android:layout_toRightOf="@+id/linearLayout1"
        android:text="Button" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button4"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/button4"
        android:layout_marginTop="20dp"
        android:text="Button" />

    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/button5"
        android:layout_marginTop="24dp"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:45:23.747

我认为您的问题来自您`android:layout_width="0dp"`的三个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:05:38.807

```
 <LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:orientation="vertical" 
    android:weightSum="1"> 
```

android:orientation="vertical" 将其更改为水平 android:layout_width="wrap_content" 将其更改为 fill_parent

```
 <Button
    android:id="@+id/button1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:text="Button1"
    android:layout_weight="0.3" /> 
```

android:layout_alignParentLeft="true"，我认为这在线性布局中不起作用。

# c# - SQL 内连接和中继器

> ID：11496425
> 
> 赞同：0
> 
> 时间：2012-07-15T23:14:20.413
> 
> 标签：c#, mysql, sql, repeater, inner-join

我有一个包含三个表的数据库：问题、标签和问题标签。这是它们的设置方式：

```
---------
questions
---------
Question_ID
Question_Title
Content

----
tags
----
Tag_ID
Tag_Title

--------------
questions_tags
--------------
Question_ID
Tag_ID 
```

在我的程序中，我使用中继器来显示 Question_Title 和 Content。我希望能够重复 Tag_Title（对于某个问题也有很多标签。

本质上，我正在尝试重新创建类似于 stackoverflow 的问题块的东西（带有问题、标签、视图等）。

假设我有一个带有 5 个标签的问题。该问题连同一个 ID（自动增量）和问题的内容一起被插入到问题表中。然后，使用用户附加到问题的任何标签，这些标签将被放入带有关联 ID 的标签表中。然后 questions_tags 表将匹配 Question_ID 和 Tag_ID。所以它可能是这样的：

```
Question_ID | Tag_ID
    1       |    3
    1       |    4 
```

所以问题 1 在这个例子中有 2 个两个标签。那么我怎样才能让复读器重复问题表中的每个问题，然后重复与该问题关联的每个标签？

到目前为止，我已经创建了一个内部连接问题、标签和 questions_tags 的视图，但重复它只会重复一个问题不止一次......

这是我为加入所做的：

```
SELECT q.Question_ID, qt.Tag_ID, t.Tag_Title, q.Question_Title, q.Content, q.Views
FROM questions q
INNER JOIN questions_tags qt
ON q.Question_ID = qt.Question_ID
Inner JOIN tags t
ON qt.Tag_ID = t.Tag_ID 
```

或者，换句话说，我如何使用我的连接创建一个视图，以便它创建这样的表？：

```
Question_ID | Tag1 | Tag2 | Tag1_Title | Tag2_Title | Question_Title | Content 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:36:50.140

我从您的问题中了解到的是，您正试图使问题和标签之间的关系变平。如果您使用的是 mysql（假设您已经用 mysql 标记了您的问题），那么您可以使用 mysql 的[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数。像下面这样的东西应该会给你你正在寻找的东西。

```
SELECT q.Question_ID, q.Question_Title, GROUP_CONCAT(t.Tag_Title SEPARATOR ', ') AS 'Tags'
FROM questions q
INNER JOIN questions_tags qt
ON q.Question_ID = qt.Question_ID
INNER JOIN tags t
ON qt.Tag_ID = t.Tag_ID
GROUP BY q.Question_ID, q.q.Question_Title 
```

输出应如下所示：

```
id     title    tags
1      quest1   tag1, tag2, tag3
2      myquest  anotherTag, anotherTag2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:49:56.950

因此，在查看了所有各种建议之后，我决定采用有能力的技术将数据加载到结构化类层次结构中的答案。我为问题和标签创建了一个类，问题类的参数之一是标签列表。通过这条路线，我避免了需要创建任何视图，并且能够使用我的问题中最初陈述的表格。

谢谢大家的帮助。

# c++ - 哪个是链表的更有效实现？

> ID：11496426
> 
> 赞同：5
> 
> 时间：2012-07-15T23:14:32.353
> 
> 标签：c++

至少有两种方式来表示链表：

1.）使用基于数组的链表表示，我们在其中保留`std::vector`类型的结构

```
struct {
    <whatever-type-you-want> item ;
     int   nextitem; 
   } 
```

这里插入到列表中，是在向量上执行 push_back() 并为下一项提供适当的值。

2）在其中你有一个遍布 RAM 的结构集合。此处插入是使用 C++ 运算符完成的`new`。

是否正确地说，第一种方法更有效，因为所有项目都位于内存中的连续位置，因此可以将链表增长到比第二种方法大得多的大小

在第二种方法中，可能存在带有巨大链表的内存碎片，因为这可能会更早地出现分段错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T23:57:38.703

我会在这里反对其他所有人并说，是的，第一种方法最终可能会更有效。在第二种方法中，您在堆上分配内存 O(N) 次 - N 是列表中的节点数。如果您使用的是向量，那么您只会进行 O(log N) 次堆分配。

此外，如果您使用的是 64 位机器，则在处理大量小项目时，在每个节点中保存指针的开销可能会有点过多。使用向量，您可以使用更小的值`nextItem`- 例如 32 位而不是 64，如果您要创建一个包含 32 位整数的列表，则内存使用量将提高 1.5。

另一个可能的优化是，如果您预先知道您将处理大量元素，您可以保留一个大向量并在很长一段时间内分配一个单一的堆。

我最近参加了一门关于自动机应用的课程，讲师正在为相当大的数据集实现一些算法。他告诉我们的其中一项技术正是您表示链表的第一种方法。我有一个课程作业，我尝试以两种方式实现（使用指针和向量和`nextItem`类似的东西）并且向量的表现要好得多（它也有其他优化，但向量肯定有效果）。

**给其他人的注意事项**

我认为@smilingbuddha 所问的更像是链接列表的集合——或者至少这就是我使用它的目的。例如，当您使用邻居列表保存图形时。您需要每个节点的所有邻居的链表（或数组，或其他）。因此，您只需保留指向每个节点最后插入的邻居的索引数组，而不是保留链表数组或向量向量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T23:26:33.667

**使用向量实现列表是错误的。**

* * *

我会解释的。容器通常被设计为实现一组特定的目标，并根据这些目标选择底层实现。

向量非常好，因为它具有连续的内存，并且您可以通过指针算术访问任何单元格。不幸的是，在向量中心插入或删除元素时，向量的性能很差。

列表具有完全相反的意图。导航到列表中的某个点非常耗时，因为您必须跟随链接，因为它不连续。但是列表的主要目的是允许快速插入、删除、重新排序、拼接、反转等。

* * *

**因此，将向量视为列表的实现基础（虽然可以做到）确实不是看待这个的方式。使用向量实现列表基本上意味着您没有任何使您首先选择列表的优势。**

* * *

**编辑**

正如其他人在下面的评论中指出的那样，如果您正在考虑更复杂的实现，那么您肯定可以从中获得性能优势。

例如，如果您维护一个包含对所有指针的引用的向量，并且您努力保持该引用向量有序，那么您可以获得指针算术访问的好处，同时仍然具有相对快速的删除/插入等。另外，由于参考向量只保存指向动态分配对象的指针，因此操作参考向量的成本并不高，而且您仍然不必使用大量连续内存区域（向量只需 NumElements * sizeof(pointer) on你的架构）。

**您应该查看 std::deque 实现以获得一些乐趣。** 它们在由指针链接的连续内存区域之间有一些有趣的相互作用，以加速插入/删除/其他操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T23:23:48.783

相反; 使用您的第一种方法，从链表中删除项目是低效的，因为您“丢失”了存储该项目的向量中的插槽，并且必须以垃圾收集样式遍历整个列表以发现哪些插槽不是正在使用。

关于内存碎片，有很多小分配通常不是问题；实际上，作为向量需要连续分配内存，因为您需要越来越大的连续内存块，因此会*导致碎片。*此外，每次调整向量大小时，都会导致复制大块内存。

实际上，您的第一个答案是自负内存分配器和内存管理单元的工作。内存分配器的工作是分配小块内存；MMU（除其他外）的工作是确保内存块之间的指针即使在物理内存中移动时也继续指向相同的逻辑内存。您的`nextitem`int 成员本质上用作指针。除非您有非常特殊的要求，否则硬件、内核和 malloc 可以比您做得更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T23:38:41.077

你的逻辑是完全倒退的。第一种方法要求内存是连续的，一旦可用的连续内存不足，就会失败。您的第二种方法可以使用内存，无论是否连续，并且将继续工作，直到完全没有内存为止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T23:27:56.663

如果在案例 #1 中从列表中删除一个元素，剩余元素的很大一部分可能会`nextitem`弄乱它们的索引。所以＃2是通常的方法，如果正确实施不会导致任何内存问题，除非您尝试将大量元素插入列表或任何其他容器中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-15T23:24:09.310

您的第一种方法似乎混合了两种算法，因此，我会说效率较低。

链表的优点之一是可以轻松插入和删除项目。然而，使用您的方法，他们需要转移数据。您也可以使用可简单调整大小的数组。

此外，数组要求内存是连续的。在某些情况下，在处理大量数据时，您会比使用真正的链表更快地耗尽内存，因为有时可能会有一定数量的内存可用，但不是连续可用的。

# php - 使用带有正则表达式的 php preg_replace

> ID：11496427
> 
> 赞同：0
> 
> 时间：2012-07-15T23:14:37.133
> 
> 标签：php, regex, preg-replace

我创建了一个 php 正则表达式来查找字符串中的所有注释 /* */ 在我使用此测试工具[http://regexpal.com/对其进行测试时有效](http://regexpal.com/)

```
/\*(.*\s){0,}.*\*\/ 
```

然后我用分隔符 # 包围它，所以它可以与 preg_replace 一起使用，但是现在它不起作用。

```
#/\*(.*\s){0,}.*\*\/#

$fileContents = preg_replace("#/\*(.*\s){0,}.*\*\/#","Replacement Text",$fileContents); 
```

当我回显 $fileContents 时，什么都没有打印出来。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:07:38.837

```
<?php 
  $fileContents = "Hello /* comment here */ World"; 
  $fileContents = preg_replace('#\/\*.*\*\/#m','',$fileContents); 
  echo $fileContents; // outputs Hello World

  $fileContents = <<<END
Hello
/*
 * Comment spanning several lines..
 *
 */
Earth
END;

  $fileContents = preg_replace('#\/\*.*\*\/#m','',$fileContents); 
  echo $fileContents; // outputs Hello Earth
?> 
```

正`m`则表达式末尾的 将匹配“多行”，因此当注释跨越多行时，它仍然可以匹配它们。默认匹配是单行。

请参阅 PCRE 以供参考：[http ://www.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

# objective-c - 如何在 26 个不同按钮的 IBAction 中选择性地设置变量？

> ID：11496428
> 
> 赞同：0
> 
> 时间：2012-07-15T23:14:48.857
> 
> 标签：objective-c, ibaction

对于我的程序，我想要一组按钮，一个对应字母表中的每个字母。当用户按下按钮时，我希望将一个变量设置为按下按钮的值，并在许多字符串中执行对该值的搜索。如何仅访问 -(IBActon) 中按下的按钮的值，而不为每个按钮创建 26 个单独的插座？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:33:47.133

您可以设置 IBAction，以便将触发事件的按钮传递到方法中。您可以使用该参数来确定按下了哪个字母，并且对所有按钮只有一个操作：

```
- (IBAction)letterTapped:(id)sender {
    NSString *letter =  [sender titleForState:UIControlStateNormal];
    // do something with the letter
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:43:25.833

Stew 的回答简洁明了，尽管我想使用他的模板添加更多信息。

```
- (IBAction)letterTapped:(id)sender {
    NSString *character =  [sender titleForState:UIControlStateNormal];

    [self setLetter:character];
}

-(void)setLetter(NSString *)_aLetter{
    //your global variable that stores your letter
    globalLetterVariable = _aLetter;
} 
```

或者您可以在方法本身内一次性完成。

```
- (IBAction)letterTapped:(id)sender {
    NSString *character =  [sender titleForState:UIControlStateNormal];
    //your global variable that stores your letter
    globalLetterVariable = character;
} 
```

# google-closure - 为什么我的大豆模板缺少 soyDocs？

> ID：11496430
> 
> 赞同：9
> 
> 时间：2012-07-15T23:15:11.673
> 
> 标签：google-closure, google-closure-templates

当我尝试编译这个大豆模板时，Plovr 会引发编译时异常。

```
// Copyright 2012 David Faux
/**
 * @overview Lays out the home page.
 */

{namespace templates.home}

/*
 * Lays out the home page.
 */
{template .main}
  <h1>Hi! Welcome to my experimental page.</h1>
  <img src="/images/logo.png" alt="" id="homeLogo" />
{/template} 
```

这是引发的错误。

```
org.plovr.CheckedSoySyntaxException:
template templates.home.main: Not all code is in Soy V2 syntax
(missing SoyDoc for template {template .main}). 
```

为什么我缺少此模板的大豆文档？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T03:38:28.110

[文件结构](https://developers.google.com/closure/templates/docs/concepts#filestructure)的闭包模板文档指出：

> 在每个模板之前添加一个解释模板用途的 SoyDoc 注释，其风格与 JavaDoc 相同。

JavaDoc 注释必须以 begin-comment 分隔符开头`/**`，如*如何为 Javadoc 工具编写 Doc 注释***[中的 Doc Comment 格式下](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#format)**所示。

上面的模板示例在 SoyDoc 注释中缺少第二个星号。它应该如下所示：

```
/**
 * Lays out the home page.
 */
{template .main}
  <h1>Hi! Welcome to my experimental page.</h1>
  <img src="/images/logo.png" alt="" id="homeLogo" />
{/template} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-02T08:34:42.677

1.  为[cpeisert 的答案](https://stackoverflow.com/a/11497832/31671)添加更多内容， 所有以下三个注释行都应以第一列开头，即在所有以下三行之前不应有空格。

    ```
    /**
    * Lays out the home page.
    */ 
    ```

2.  这些soy doc注释和soy代码中间不应该有空行（即 `{template .main}`）

3.  `{template .main}`也应该从 column1 开始，即前面不应该有空格。

# facebook - Facebook评论加载正在增加主页的注册计数

> ID：11496439
> 
> 赞同：0
> 
> 时间：2012-07-15T23:16:58.093
> 
> 标签：facebook, comments, loading

我有一个网站，可以在其中展示图片集。每个系列都有很多单独的图片。我为每张图片添加了 facebook 评论插件，以允许用户在 facebook 时间线中评论和分享。这工作正常。

我有一个算法来计算对集合的访问次数。

问题是每次每张图片加载插件时，当 facebook 访问主收藏页面以获取链接的信息时，收藏计数器正在增加。这发生在第一次访问中。

我避免了它，删除了这个算法，但是现在当用户通过共享链接访问集合时，计数器将无法计算这次访问。

有什么方法可以跟踪 facebook 访问我的页面的来源？

感谢和问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:26:19.897

如果您查看官方[常见问题解答](http://developers.facebook.com/docs/reference/plugins/comments/)，它将给您以下提示：

> fb:comments-count 标签将在标签中发出您的 URL 上的评论数。然后，您可以设置此样式以匹配您的站点。请注意，这目前在 HTML5 中不可用。例如，显示 example.com 上的评论数：。
> 
> `<fb:comments-count href=http://example.com/></fb:comments-count> awesome comments`

# ruby-on-rails - 轨道 3 中的 Group_by highschool_name

> ID：11496441
> 
> 赞同：0
> 
> 时间：2012-07-15T23:17:50.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试按高中分组用户朋友，用户使用他的 Facebook 帐户登录，我使用 Facebook 图表来获取他所有的朋友。

此处的代码首先输出/打印所有用户朋友，并按高中打印每个朋友的组。我不想要那个，我只希望它输出/打印组。

```
<ul class="friends-list">
<% current_user.friends.group_by(&:highschool_name).map do |hsname, friends| %>
   <li><%= hsname %></li> 
   <% friends.map do |friend| %>
   <%= image_tag(friend.image) %> 
 <% end %>
 <% end %>
</ul> 
```

用户表：

```
[id, name, image, location, highschool_name, highschool_year, college_name, college_year, graduteschool_name, graduate_year ] 
```

朋友表：

```
[id, uid, name, image, higschool_name, college_name, graduateschool_name, user_id] 
```

当前输出的详细信息：

```
Started GET "/users/1" for 127.0.0.1 at 2012-07-16 01:10:17 +0200
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered users/_profile_content.html.erb (0.6ms)
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  Friend Load (9.2ms)  SELECT "friends".* FROM "friends" WHERE "friends"."user_id" = 1
  Rendered users/show.html.erb within layouts/application (287.4ms)
  Rendered layouts/_shim.html.erb (0.1ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 321ms (Views: 309.3ms | ActiveRecord: 9.8ms) 
```

输出图像：http: [//postimage.org/image/tgyl9f27n/](http://postimage.org/image/tgyl9f27n/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T18:57:20.827

我不知道我是否完全理解你的问题，但听起来你想列出每个组的朋友。如果这是正确的，我认为您不需要第二个地图功能。

我认为它可能应该是一个 for 循环。

```
 <% current_user.friends.group_by(&:highschool_name).map do |hsname, friends| %>

       <li><%= hsname %></li> 
        <%for friend in friends%>
           <%= image_tag(friend.image) %> 
      <% end %>
   <% end %> 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:49:56.397

**问题：** 数据库中的某些值是空的。给出错误

**解决方案：**

```
<% next if hsname.blank? %> 
```

# android - Android Spinner 添加/删除条目

> ID：11496445
> 
> 赞同：2
> 
> 时间：2012-07-15T23:18:25.767
> 
> 标签：android, spinner

我正在创建一个 android 应用程序，询问用户他们的出生日期和出生月份。我正在使用两个微调器（一个用于一个月，一个用于该月的几天）。我希望天数的微调器根据月份而变化，例如二月有 29 天，所以我希望天数微调器停在数字 29。但如果一个月，我希望天数微调器上升到 31选择 31 天。

做这个的最好方式是什么？我知道我可以使用 DatePicker，但我以前从未使用过它，我只需要一个月和一天（而不是一年）。

debugText 只是我创建的一个 textView，用于测试我的微调器并确保我的编码到目前为止是正确的。

//代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.form);

    // Month

    monthSpinner = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> monthAdapter = ArrayAdapter
            .createFromResource(this, R.array.month,
                    android.R.layout.simple_spinner_item);
    monthAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_item);
    monthSpinner.setAdapter(monthAdapter);

    monthName = "January";

    // Day

    daySpinner = (Spinner) findViewById(R.id.spinner2);
    final ArrayAdapter<CharSequence> dayAdapter = ArrayAdapter
            .createFromResource(this, R.array.day,
                    android.R.layout.simple_spinner_item);
    dayAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_item);
    daySpinner.setAdapter(dayAdapter);

    debugText = (TextView) findViewById(R.id.debugText);
    debugText.setText("Jaunary");

    daySpinner = (Spinner) findViewById(R.id.spinner2);

    monthSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub

            int monthPos = monthSpinner.getSelectedItemPosition();
            switch (monthPos) {
            case 0:
                debugText.setText("January");

                break;
            case 1:

                debugText.setText("February");

                break;
            case 2:
                debugText.setText("March");

                break;
            case 3:
                debugText.setText("April");

                break;
            case 4:
                debugText.setText("May");

                break;

            case 5:
                debugText.setText("June");

                break;
            case 6:

                debugText.setText("July");

                break;
            case 7:
                debugText.setText("August");

                break;
            case 8:
                debugText.setText("September");

                break;
            case 9:
                debugText.setText("October");

                break;

            case 10:
                debugText.setText("November");

                break;
            case 11:
                debugText.setText("December");

                break;
            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:32:36.853

确实，DatePicker 是最简单的方法，否则您将如何考虑闰年以显示 2 月的额外一天？但如果你坚持使用 Spinners，我会这样做：

1.  当视图首次显示时，禁用 daySpinner，并填充 monthSpinner 并将选择设置为空。
2.  在 monthSpinner 的 OnItemSelected 侦听器中，一旦更改为月份，启用 daySpinner 并根据所选月份，使用正确的天数 ArrayAdapter 填充 daySpinner（例如，您将有 4 个第 1 天到第 28 天、第 1 天到第 29 天的数组， 1 到 30、1 到 31）并将适配器设置为 daySpinner。
3.  当用户更改monthSpinner 选择时，您必须再次重建daySpinner。

最后，当单击确定按钮时，只需从微调器中选择月份和日期。

# javascript - 从 google maps p[$a, ab] 返回的可怕的 javascript-keys

> ID：11496448
> 
> 赞同：0
> 
> 时间：2012-07-15T23:18:44.057
> 
> 标签：javascript, google-maps

我通过单击地图从谷歌地图中声明了一个位置。数据是这样存储的：

```
P{
  $a: -20.55231336577107
  ab: -72.3388671875
} 
```

不可思议，为什么他们不只使用纬度和经度变量？我试图找到一些关于此的文档但没有成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T23:20:52.607

Google 的 Javascript 被缩小以降低带宽成本。

这会将所有有意义的名称替换为非常短的名称，以节省额外的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T23:21:31.997

API 代码使用[闭包编译器进行了优化](https://developers.google.com/closure/compiler/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T23:32:24.747

与其他 2 个答案同上。这就是为什么有一个完整记录的 API 的全部原因。而不是直接访问对象变量。在 google.maps.LatLng 对象上使用 API 中内置的访问器方法，例如 .lat() 和 .lng()。

# android - GridView 对应的 addFooterView 是什么？

> ID：11496449
> 
> 赞同：5
> 
> 时间：2012-07-15T23:18:53.757
> 
> 标签：android, gridview

ListView 具有 addFooterView 方法，该方法可用于显示加载消息。但是 GridView 没有这个方法。那么，如何向 GridView 添加页脚视图，如 Google Play 中所示？ ![Google Play 加载页脚视图](../Images/afb3c9af3136b1184675b3e0c3b21cb4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T09:24:11.650

> Android BucketListAdapter
> 
> 这是一个桶列表适配器的实现，类似于您在 Google Play 应用程序中看到的。它具有类似于网格的列表元素布局，其优点是您仍然可以使用列表页眉和页脚——这是标准 GridView 无法实现的。

链接：[https ://github.com/rzsombor/bucket-list-adapter](https://github.com/rzsombor/bucket-list-adapter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T23:56:28.033

不，抱歉，GridView 不提供这种功能。

如果您想要“单击此处获取更多信息”条目，我会在到达当前网格数据的末尾后延迟加载数据。您可以查看 CommonsWare 的[EndlessAdapter](https://github.com/commonsguy/cwac-endless)，并尝试将其适配为 GridView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T23:57:30.913

您可以尝试使用相对布局，放置网格视图并使用属性制作线性布局，`android:layout_alignParentBottom="true"`它会将您想要的任何内容放在网格视图下方，这就是我认为您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T07:16:33.687

可以使用这个，使用 OnScrollListener 来监控滚动位置，当滚动到最后一项时，可以控制加载视图的可见性。

```
 @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        if (mOnScrollListener != null) {
            mOnScrollListener.onScroll(view, firstVisibleItem,
                    visibleItemCount, totalItemCount);
        }
        // The count of footer view will be add to visibleItemCount also are
        // added to totalItemCount
        if (visibleItemCount == totalItemCount) {
            // If all the item can not fill screen, we should make the
            // footer view invisible.
        } else if (!mIsLoading
                && (firstVisibleItem + visibleItemCount >= totalItemCount)
                && mCurrentScrollState != SCROLL_STATE_IDLE) {
            mIsLoading = true;
            if (mOnLoadMoreListener != null) {
                mOnLoadMoreListener.onLoadMore();
            }
        }
    }

<LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:fillViewport="true" >

                <com.baidu.hao123.module.video.view.LoadMoreGridView
                    android:id="@+id/gv_movie_home"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:cacheColorHint="@null"
                    android:fitsSystemWindows="true"
                    android:horizontalSpacing="10dip"
                    android:listSelector="@android:color/transparent"
                    android:numColumns="3"
                    android:paddingLeft="13dip"
                    android:paddingRight="13dip"
                    android:paddingTop="10dip"
                    android:scrollbars="none"
                    android:verticalSpacing="12dip" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/auto_load_view"
                android:layout_width="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_height="wrap_content"
                android:paddingTop="10dip"
                android:visibility="gone" 
                android:paddingBottom="10dip"
                android:gravity="center"
                android:orientation="horizontal" >

                <ProgressBar
                    android:id="@+id/loadingBar"
                    android:layout_width="23dip"
                    android:layout_height="23dip"
                    android:layout_marginRight="10dip"
                    android:indeterminateDrawable="@drawable/progress_small" />

                <TextView
                    android:id="@+id/loadingText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:text="@string/loading"
                    android:textColor="@color/color_ff555555"
                    android:textSize="@dimen/fontSize_middle" />
            </LinearLayout>
        </LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T02:53:04.850

您可以将无限滚动侦听器用作 gridview 的滚动侦听器。通过使用滚动监听器，您可以获得当前位置。当结束时显示自定义加载视图，当从网络加载完成（AsyncTask 或 Loader 完成）时，您可以隐藏加载视图。

# jquery - 使用 Jquery 停止音频标记 HTML5

> ID：11496451
> 
> 赞同：1
> 
> 时间：2012-07-15T23:18:56.663
> 
> 标签：jquery, audio, html5-audio

您好，我正在尝试让此音频停止，但我找不到任何方法：

```
$('<audio id="elevator" autoplay loop preload="auto" autobuffer><source src="elevator.mp3" /><source src="elevator.ogg" /></audio>').appendTo('body');

$('#elevator').pause(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T23:21:09.267

`pause()`不是 jQuery 方法，您应该先将 jQuery 对象转换为原始 DOM 元素，然后调用该`pause()`方法，试试这个：

```
$('#elevator')[0].pause(); 
```

或者：

```
document.getElementById('elevator').pause() 
```

或者：

```
document.getElementsByTagName('audio')[0].pause() 
```

# exception-handling - c#.net 异常处理最佳实践

> ID：11496455
> 
> 赞同：1
> 
> 时间：2012-07-15T23:20:07.210
> 
> 标签：exception-handling

有人可以为我提供 c#.net 中异常处理的最佳实践示例吗？

特别是请澄清以下内容？

1.何时：

> 一个。投掷 B. 重新抛出 C. 什么都不做 D. 空异常

1.  用try and catch将每个逻辑包装在一个函数中是否可以？如果不是，我们应该什么时候？

2.  我应该在哪里捕获和处理 asp.net mvc 中的异常？即 global.asax、BLL、DLL 或辅助方法？

3.  何时将异常包装在内部异常中？

# postgresql - Heroku 和 Gemfile 管理

> ID：11496457
> 
> 赞同：1
> 
> 时间：2012-07-15T23:20:42.450
> 
> 标签：postgresql, heroku, ruby-on-rails-3.2, gemfile

我在 heroku 上运行应用程序时遇到问题。我收到的错误消息是：

> “使用本机扩展安装 pg (0.14.0) /Users/blanecordes/.rvm/rubies/ruby-1.9.2-p0/lib/ruby/1.9.1/rubygems/installer.rb:483:in `rescue in block在 build_extensions 中：错误：无法构建 gem 原生扩展。（Gem::Installer::ExtensionBuildError）
> 
> /Users/blanecordes/.rvm/rubies/ruby-1.9.2-p0/bin/ruby extconf.rb --with-pg-config=/users/blanecordes/postgresql/bin/pg_config 使用来自 /users/blanecordes 的配置值/postgresql/bin/pg_config sh：/users/blanecordes/postgresql/bin/pg_config：没有这样的文件或目录 sh：/users/blanecordes/postgresql/bin/pg_config：没有这样的文件或目录检查 libpq-fe.h。 .. *** extconf.rb 失败 ***由于某种原因无法创建 Makefile，可能缺少必要的库和/或头文件。检查 mkmf.log 文件以获取更多详细信息。您可能需要配置选项。”

我的宝石文件是：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'
gem 'pg'
gem 'nokogiri'
gem 'pry'

group :test, :development do
 gem 'sqlite3'
 gem "rspec-rails", "~> 2.0"
 end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
 gem 'sass-rails',   '~> 3.2.3'
 gem 'coffee-rails', '~> 3.2.1'

# See https://github.com/sstephenson/execjs#readme for more supported runtimes
# gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:39:27.630

你有`sqlite3`和`pg`在你的gemfile中。它们是不兼容的，因为它们做同样的事情。如果您打算继续使用heroku ，最好的办法是在本地计算机上[安装postgresql 。](https://devcenter.heroku.com/articles/local-postgresql)然后`sqlite3`从您的 gemfile 中删除（它在两个地方）。

如果您想在本地机器上坚持使用 sqlite3，请包装`pg`在生产块中，并且只`sqlite3`在测试、开发块中使用。

```
# gem 'sqlite3'
# gem 'pg'

group :production do
  gem 'pg'
end

group :test, :development do
  gem 'sqlite3'
  gem "rspec-rails", "~> 2.0"
end 
```

# mysql - 我可以在 ON DELETE CASCADE 之前使用一个过程来存储历史日志吗

> ID：11496459
> 
> 赞同：1
> 
> 时间：2012-07-15T23:21:02.777
> 
> 标签：mysql, sql, stored-procedures

我可以在 ON DELETE CASCADE(user, orders) 之前使用一个过程来存储历史日志吗？

我想当我们/他们删除他们的帐户时，我想删除与用户关联的订单。我不相信这是最好的程序（因为订单表应该是它自己的实体），但是我想知道是否可以介入并将每个订单（历史）记录到 txt 文件或另一个表中。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T00:41:28.707

不确定文件，但可以使用触发器将历史数据存储在另一个表中。这是代码。

```
 CREATE TRIGGER LOGORDERS
ON USERS
INSTEAD OF DELETE 
AS
    DECLARE @UID INT
    SELECT @UID = UserID FROM DELETED
   INSERT INTO OrderLog(OrderItemName, UserID) SELECT OrderItemName, UserID FROM ORDERS  WHERE UserID = @UID
   DELETE FROM ORDERS WHERE UserID = @UID

   DELETE FROM USERS WHERE UserID = @UID
GO 
```

# ruby-on-rails - 在 Ruby on Rails 中的 IF 语句中组合范围

> ID：11496464
> 
> 赞同：1
> 
> 时间：2012-07-15T23:21:14.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, scope

我正在尝试为搜索表单创建范围字符串。我可以用范围构建这样的东西吗：

```
scopestring = Product.all 
if params[:price].include? 
  scopestring = scopestring + '.free'
if params[:location].include? 
  # same for location 
end 
```

显然我不能这样做，但是有没有办法做类似的事情。有什么建议么？不喜欢 9 个条件 IF 或案例语句来处理搜索页面上的各种过滤器。

如果我在这里完全走错了方向，那么在 Rails 中处理长条件语句的最佳方法是什么？我宁愿远离宝石。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:27:28.297

首先，`Product.all`它不是作用域，它实际上进行搜索。你想要的是`Product.scoped`. 返回的范围是一个对象，而不是一个字符串。假设这`:free`是一个范围：

```
products = Product.scoped
if params[:price] == "free"  #your example of include? doesn't make sense
  products = products.free
end 
```

您可以通过重构模型进一步简化它：

```
class Product < ActiveRecord::Base
  scope :free, lambda {|free| free.nil? ? {} : where(:price => 0)}
end 
```

然后在你的控制器中：

```
@products = Product.free(params[:price]) 
```

# c - 可以使传递的指针为空的函数

> ID：11496469
> 
> 赞同：0
> 
> 时间：2012-07-15T23:22:16.087
> 
> 标签：c, function, pass-by-reference

目前我有

```
void clistDeleteNode(clist_t *list,cnode_t **pnode) {
    cnode_t *node=*pnode;

    /* stuff done with node here, removed for clarity */

    free(*pnode);
    *pnode=0;
} 
```

这被称为

```
clistDeleteNode(list,&aNode); 
```

该函数在释放后自动将最终用户指针设为 NULL - 我这样做是因为它使调试和泄漏检查更容易。

有没有更优雅的方法来传递一个指向函数的指针，比如它可以被修改而不必使用 * *&* *aNode ？（从最终用户的角度来看）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:25:15.677

不，C 中没有*传递引用*之类的东西，传递一个指向您想在另一个函数中更新的类型的指针是启用更改原始变量的唯一且推荐的方法。

* * *

### 不推荐..真的，请不要使用它。

我见过开发人员（自上次以来很长时间）使用以下内容只是为了让事情*“更容易”*，但老实说，我认为它比美观更让人头疼。

```
#define REF(v) (&v)
#define REF_TO(type, v) type *v
#define DEREF(p) (*p)

void
func (REF_TO(int*, p))
{
  DEREF(p) = 0;
}

int
main (int argc, char* argv[])
{
  int *p;

  func (REF(p));

  return 0;
} 
```

## 不要 - 不要 - 使用 - 它，认真的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T23:26:42.030

与 C++ 不同，没有在调用函数中`aNode`不使用运算符的情况下传递地址的方法。`&`

使用预处理器隐藏你实际在做的事情很可能被认为是一种比上述清晰方式更“优雅”的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T23:24:36.410

不。

如果你想修改一个函数`x`，你需要传递`&x`给函数，不管是什么类型。

您可以将其隐藏在宏后面，但这最终可能会更加令人困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T23:38:55.380

是的，但它很丑；您可以使用数组类型和数组指针衰减来模拟参考参数。

```
typedef void (*void_ptr_ref)[1];
void func(void_ptr_ref p) {
    p[0] = 0;
}
int main() {
    void_ptr_ref p;
    func(p);
    /* do stuff with p */
} 
```

Posix 实际上使用这种（可怕的！）样式作为`jmp_buf`类型（用于[`setjmp.h`](http://en.wikipedia.org/wiki/Setjmp.h)）。

仅当您的“指针”类型打算用作不透明类型时，这才是真正值得的；您当然不希望用户必须双重间接`void_ptr_ref p`或必须投射它等。

# html - 为什么 Aptana Studio 3 为小写 doctype 提供“缺少 DOCTYPE”错误？

> ID：11496470
> 
> 赞同：1
> 
> 时间：2012-07-15T23:22:21.933
> 
> 标签：html, doctype, case-sensitive, aptana3

根据 HTML5 规范，[doctype preamble 是不区分大小写](http://dev.w3.org/html5/spec-author-view/syntax.html#the-doctype)的。那么为什么 Aptana Studio 3 抱怨 HTML 文档的小写 doctype 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:20:34.153

大概是因为在 XML 中，`<!doctype html>`是无效的；XML 需要`DOCTYPE`大写的关键字。因此，如果您想使用通用 XML 工具处理您的 HTML5 文档，您需要`<!DOCTYPE html>`.

# c# - 将 uint 复制到字节数组并在字节数组中进行比较（并返回）的最快方法

> ID：11496471
> 
> 赞同：3
> 
> 时间：2012-07-15T23:22:26.687
> 
> 标签：c#, performance

我需要经常做以下事情（这里可以忽略字节顺序，我只使用x86）：

1.  将给定的 uint 与字节数组中的特定偏移量进行比较（也许我可以一次比较所有 4 个字节？）
2.  将带有偏移量的字节数组中的 4 个字节复制到 uint
3.  将 uint 复制到字节数组中的特定偏移量（它将覆盖此数组中的 4 个字节）
4.  将 12 个字节复制到一个结构：(uint, uint, byte, byte,byte, byte)

最后一个不常用。但是，如果我可以通过一些不安全的操作来做到这一点，那将是非常有趣的。

最快的方法是什么？第一个是最重要的，因为我做的最多，并且使用最多的 CPU 时间。不安全的代码是可能的（如果它更快的话）。

编辑：

目前我正在使用这样的东西将一个 uint 复制到一个字节数组中：

```
 public static void Copy(uint i, byte[] arr, int offset)
    {
        var v = BitConverter.GetBytes(i);
        arr[offset] = v[0];
        arr[offset + 1] = v[0 + 1];
        arr[offset + 2] = v[0 + 2];
        arr[offset + 3] = v[0 + 3];
    } 
```

对于反向转换，我使用这个：

```
BitConverter.ToUInt32(arr, offset) 
```

最后一个代码这么少，第一个这么多，也许有优化。为了比较，目前我将其转换回来（第二个），然后将 uint 与我要比较的值进行比较：

```
BitConverter.ToUInt32(arr, offset) == myVal 
```

对于第四部分（提取结构），我使用的是这样的：

```
 [StructLayout(LayoutKind.Explicit, Size = 12)]
    public struct Bucket
    {
        [FieldOffset(0)]
        public uint int1;
        [FieldOffset(4)]
        public uint int2;
        [FieldOffset(8)]
        public byte byte1;
        [FieldOffset(9)]
        public byte byte2;
        [FieldOffset(10)]
        public byte byte3;
        [FieldOffset(11)]
        public byte byte4;
    }

    public static Bucket ExtractValuesToStruct(byte[] arr, int offset)
    {
        var b = new Bucket();
        b.int1 = BitConverter.ToUInt32(arr, offset);
        b.int2 = BitConverter.ToUInt32(arr, offset + 4);
        b.byte1 = arr[offset + 8];
        b.byte2 = arr[offset + 9];
        b.byte3 = arr[offset + 10];
        b.byte4 = arr[offset + 11];
        return b;
    } 
```

我认为使用不安全的代码我应该能够一次复制 12 个字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:50:50.577

### 将 uint 复制到字节数组中的特定偏移量

```
 unsafe public static void UnsafeCopy(uint i, byte[] arr, int offset)
  {
    fixed (byte* p = arr)
    {
      *((uint*)(p + offset)) = i;
    }
  }
  public static void ShiftCopy(uint i, byte[] arr, int offset)
  {
    arr[offset] = (byte)(i & 0xFF);
    arr[offset + 1] = (byte)((i >> 8) & 0xFF);
    arr[offset + 2] = (byte)((i >> 16) & 0xFF);
    arr[offset + 3] = (byte)((i >> 24) & 0xFF);
  } 
```

### 统计数据（1 000 000 次通话）

```
00:00:00.0414024: copy. get bytes
00:00:00.0136741: unsafe copy
00:00:00.0154764: shift  copy 
```

# php - 使用 Zend Registry 连接到数据库

> ID：11496480
> 
> 赞同：1
> 
> 时间：2012-07-15T23:25:09.327
> 
> 标签：php, zend-framework

我是 Zend 框架的新手。我正在尝试使用 Zend Registry 连接数据库，但我做不到。

这是我的引导类。

```
<?php
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap {
     public function _initDb(){
         $db = new Zend_Db_Adapter_Pdo_Mysql(
            array(
                'host' => 'localhost',
                'username' => 'ragn',
                'password' => 'app',
                'dbname' => 'apple'
            )
        );
        Zend_Db_Table_Abstract::setDefaultAdapter($db);
        Zend_Registry::set('db', $db);
    }
}
?> 
```

这是我的`IndexController`课。

```
class IndexController extends Zend_Controller_Action {

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {

        $db = Zend_Registry::get('dbadapter');
        $select = new Zend_Db_Select($db);
        $select = $db->select();
        $select = $db->select() -> from(
            array('client' => 'client'),
            array ('idclient')) -> join(array('apartmentclient' => 'apartmentclient'),
            'client.idclient = apartmentclient.idclient',
            array ('idapartment')) -> join(array('description' => 'description'),
            'apartmentclient.idapartment = description.idapartment',array ('title'));
        $stmt = $select->query();
        $result = $stmt->fetchAll();
        $Settext = array();
        $SetName = array();
        $SetName = "$result[2]";
        $Settext = "Hi!Can you please provide feedback for the apartment";
        $this->view->Settext = $Settext." ".$SetName;    

    }
} 
```

我也有详细的 application.ini 文件。

```
resources.db.adapter = PDO_MYSQL
resources.db.isDefaultAdapter = true
resources.db.params.host = localhost
resources.db.params.username = ragn
resources.db.params.password = app
resources.db.params.dbname = apple 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:15:03.697

在您的代码中有错误。您使用键“db”在注册表中设置数据库：

```
Zend_Registry::set('db', $db); 
```

但是您尝试使用键“dadapter”检索它：

```
$db = Zend_Registry::get('dbadapter'); 
```

它应该是这样的：

```
$db = Zend_Registry::get('db'); 
```

而且这条线是没用的：

```
$select = $db->select(); 
```

这一行：

```
$SetName = "$result[2]"; 
```

可以是这样的：

```
$SetName = $result[2]; 
```

既然你写了这一行：

```
$result = $stmt->fetchAll(); 
```

您必须在循环中检索值。

要发现错误，您必须使用调试器，但如果您不知道如何使用它，一个简单但最糟糕的方法是使用该函数`die();`。沿着你的代码移动这个函数，当你发现脚本没有停止并返回你写的错误时，你发现了有问题的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:57:16.467

首先，您可以从 bootstrap 中删除方法 _initDb() 。由于 ZF 通过阅读您的 application.ini 为您完成了这项工作

其次，您不需要将数据库存储在注册表中，因为存储在注册表中的目的是从您喜欢的任何地方访问某些内容，只需通过

```
$db = Zend_Db_Table::getDefaultAdapter(); 
```

# javascript - 为什么 500 错误会中断 ajax 调用？

> ID：11496483
> 
> 赞同：4
> 
> 时间：2012-07-15T23:25:26.770
> 
> 标签：javascript, ajax, http-error

这是我的代码：

```
http_request = new XMLHttpRequest();
if (http_request.overrideMimeType) http_request.overrideMimeType('text/javascript');
http_request.onreadystatechange = alertContents;
http_request.open('POST', base_url, true);
http_request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http_request.setRequestHeader("Content-length", parameters.length);
http_request.setRequestHeader("Connection", "close");
http_request.send(parameters); 
```

在最新的 Firefox 中运行。

此代码通常可以完美运行，但是当调用的页面产生 500 内部服务器错误时，javascript 停止在页面上运行，并且使用 setInterval/setInterval 安排的进一步事件不会被执行。为什么会这样？我怎么抓住它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T06:43:58.217

问题可能出在您的 alertContents 函数中（未在您的问题中显示）。由 .onreadystatechange 调用的函数几乎总是如下所示：

```
var callback = function() {
  if (http_request.readyState==4 && http_request.status==200) {
    // do stuff
  }
} 
```

如果页面产生 500 Http 代码，则 if 语句将失败，回调中的其余代码将不会执行。要抓住它，请添加：

```
else if(http_request.readyState==4 && http_request.status==500) {
  console.log('The server\'s on fire!');
} 
```

# html - 下拉菜单悬停首先出现

> ID：11496484
> 
> 赞同：0
> 
> 时间：2012-07-15T23:25:36.457
> 
> 标签：html, css, drop-down-menu, hover

我使用了一些示例代码从该网站创建了一个下拉菜单：[http ://www.javascriptkit.com/script/script2/verticalmenu.shtml](http://www.javascriptkit.com/script/script2/verticalmenu.shtml)

我一直在编辑它，以便主菜单使用我自己的图像（而不是重复的绿色图像），然后下拉菜单将是一个大的灰色块（而不是再次重复的绿色图像）。

我已经能够为主菜单插入我自己的图像，并且还有一个成功的灰色块翻转下拉菜单。

**问题：**当我测试我的页面时，它从打开的下拉菜单开始。我认为问题出在我的 CSS/HTML 操作中。我应该改变我的javascript中发生的事情吗？我注意到它正在调用 UL 标签。

**这是我加载页面时的图片：**

[http://imageshack.us/photo/my-images/850/hoverproblem.png/](http://imageshack.us/photo/my-images/850/hoverproblem.png/)

**这是翻转后正常工作的图片：**

[http://imageshack.us/photo/my-images/152/hoverproblem2.png/](http://imageshack.us/photo/my-images/152/hoverproblem2.png/)

**HTML：**

```
<ul id="verticalmenu" class="glossymenu">
<li style="height:30px;"><a href="#" style="text-decoration:none;"></a>
  <ul id="submenu">
    <li id="submenuli"><a href="#" style="color:white; font: bold 12px Verdana, Helvetica,    sans-serif;">JavaScript Reference</a></li>
    <li id="submenuli"><a href="#">DOM Reference</a></li>
    <li id="submenuli"><a href="#">CSS Reference</a></li>
  </ul>
</li> 
```

**CSS：**

```
.glossymenu, .glossymenu li ul {
list-style-type: none;
margin: 0;
padding: 0;
width: 276px; /*WIDTH OF MAIN MENU ITEMS*/
height: 30px;
}

.glossymenu li{
position: relative;
}

.glossymenu li ul{
background: url(../Kruger%20Optical/images/tacdriver/riflenav.png);
font: bold 12px Verdana, Helvetica, sans-serif;
color: white;
display: block;
width: 276px;
height: 30px;
text-decoration: none;
} 
```

/* SUBMENU AND SUBMENULI 是我加载页面时不断出现的下拉菜单 */

```
#submenu { /*SUB MENU STYLE*/
position: absolute;
background-color: #373737;
height: 300px;
width: 300px; /*WIDTH OF SUB MENU ITEMS*/
left: 0;
top: 0;
display: hidden;
}

#submenuli {
position: relative;
list-style-type: none;
margin: 0;
width: 300px; /*WIDTH OF MAIN MENU ITEMS*/
height: 20px;
display: hidden;
padding:15px;
font: bold 12px Verdana, Helvetica, sans-serif;
color: white;
float: left;
}

.glossymenu li ul li{
float: left;
} 
```

JAVASCRIPT：

```
var menuids=new Array("verticalmenu") //Enter id(s) of UL menus, separated by commas
var submenuoffset=-2 //Offset of submenus from main menu. Default is -2 pixels.

function createcssmenu(){
for (var i=0; i<menuids.length; i++){
  var ultags=document.getElementById(menuids[i]).getElementsByTagName("ul")
    for (var t=0; t<ultags.length; t++){
    var spanref=document.createElement("span")
    spanref.innerHTML="&nbsp;&nbsp;"
    ultags[t].parentNode.getElementsByTagName("a")[0].appendChild(spanref)
ultags[t].parentNode.onmouseover=function(){
this.getElementsByTagName("ul")    [0].style.left=this.parentNode.offsetWidth+submenuoffset+"px"
this.getElementsByTagName("ul")[0].style.display="block"
}
ultags[t].parentNode.onmouseout=function(){
this.getElementsByTagName("ul")[0].style.display="none"
    }
    }
      }
}

if (window.addEventListener)
window.addEventListener("load", createcssmenu, false)
else if (window.attachEvent)
window.attachEvent("onload", createcssmenu) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:31:36.380

你已经开始`display: block;`了`#submenu`。这告诉渲染引擎将其显示为块元素。您希望在页面首次加载时将其隐藏，因此您的样式表应包含以下规则`#submenu`：

`display: none;`

然后，您需要一段 JavaScript 代码，`#submenu`当用户将鼠标悬停`<li>`在主菜单栏中的元素上时，该代码段将可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:24:19.787

将显示设置为`#submenu`应该`none`可以解决问题。

# haskell - Yesod：与 Lucius 合作的奇怪错误

> ID：11496489
> 
> 赞同：3
> 
> 时间：2012-07-15T23:26:07.003
> 
> 标签：haskell, yesod, haskell-platform

嗨，我对 yesod 很陌生，我正在尝试遵循本[教程](http://www.yesodweb.com/blog/2012/01/blog-example)，但是当我尝试开发应用程序时，它给了我这个错误：

> 构建 ministeam-0.0.0...
> 
> 处理程序/AuthTut.hs:81:0：错误：无效的预处理指令#message
> 
> cabal-dev：用户错误（警告：无法确定 /home/nock/.cabal/bin/fake-ghc-cabal-dev 的版本：“== GHC 参数：开始 ==\n--numeric-version\n= = GHC 参数：End ==\n" /usr/bin/ar: dist/build/Handler/AuthTut.o: 没有这样的文件或目录) yesod: readProcess: cabal-dev "buildopts" (exit 1): failed

这部分代码似乎不正确（见下文）。实际上我不明白他是如何在这部分代码中使用“toWidget”函数的。我认为缺少 Lucius 模块的导入，并将其添加到教程的导入列表中，但错误仍然存​​在。

```
defaultLayout inside = do
    mmsg <- getMessage
    pc <- widgetToPageContent $ do
                toWidget [lucius|
body {
    width: 760px;
    margin: 1em auto;
    font-family: sans-serif;
}
#message{
    color: #900;
}
|]      

            inside

hamletToRepHtml [hamlet|
$doctype 5
<html>
    <head>
        <title>#{pageTitle pc}
        ^{pageHead pc}
    <body>
        $maybe msg <- mmsg
            <div #message>#{msg}
        ^{pageBody pc}
|] 
```

提前感谢您的关注！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T04:49:09.000

我猜你启用了 CPP（C 预处理器）语言扩展。在这种情况下，您的 Haskell 文件中以散列开头的任何行都将被解释为 CPP 指令。由于#message 是无效指令，您会收到一条错误消息。

我建议切换到外部 Lucius 模板并使用 widgetFile。这将具有额外的优势，即能够在开发过程中自动重新生成 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:40:23.373

我发现当我从教程中复制一些代码时，我忘记了缩进一些行！不管怎么说，还是要谢谢你！

# android - Android VideoView sdcard 不工作

> ID：11496496
> 
> 赞同：1
> 
> 时间：2012-07-15T23:27:42.420
> 
> 标签：android, android-videoview, android-sdcard

我正在尝试使用 Android 的 VideoView 从设备上的 sdcard 文件夹中播放视频。看起来它过去工作得很好，但我重构了一些代码，现在我似乎无法让它工作。这是一个示例：

```
// filepath = Environment.getExternalStorageDirectory().getPath() + "/test.mp4"
videoView = new VideoView(AkadiApplication.Instance().getApplicationContext());
videoView.setVideoURI(Uri.parse(filePath));
videoView.start();
videoView.requestFocus(); 
```

我已经通过应用程序验证了该文件存在，所以我知道这不是 FileNotFound 问题。

此外，如果我设置了一个 onComplete 回调，它就像播放视频一样被调用（没有视频或声音，只是视图应该位于的黑色方块）。我知道视频编解码器是有效的，因为设备在我的应用程序之外播放它。我认为这可能与权限问题有关：

[http://code.google.com/p/android/issues/detail?id=10197](http://code.google.com/p/android/issues/detail?id=10197)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:49:43.970

在 layout.xml 文件中创建 VideoView

```
 <VideoView android:id="@+id/video_view"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent">
</VideoView> 
```

然后在java文件中

```
VideoView mVideoView = (VideoView) findViewById(R.id.video_view); 
mVideoView.setVideoURI(uri);
mVideoView.requestFocus();
mVideoView.start(); 
```

# android - Android 模拟器显示倒置的主屏幕镜像和锁定（为什么？）

> ID：11496499
> 
> 赞同：7
> 
> 时间：2012-07-15T23:28:30.950
> 
> 标签：android, emulation, homescreen

我正在从命令行启动模拟器以尝试使用以下参数加快速度：

模拟器 -avd foo_hvga2 -cpu-delay 0 -no-boot-anim

这是模拟器输出的详细转储....感谢您提供任何线索

模拟器 -avd foo_hvga2 -cpu-delay 0 -no-boot-anim -verbose -debug all -show-kernel

```
emulator: found SDK root at /Users/foobear/android-sdks
emulator: Android virtual device file at: /Users/foobear/.android/avd/foo_hvga2.ini
emulator: /Users/foobear/.android/avd/foo_hvga2.ini: parsing as .ini file
emulator:    1: KEY='target' VALUE='android-16'
emulator:    2: KEY='path' VALUE='/Users/foobear/.android/avd/foo_hvga2.avd'
emulator: /Users/foobear/.android/avd/foo_hvga2.ini: parsing finished
emulator: virtual device content at /Users/foobear/.android/avd/foo_hvga2.avd
emulator: virtual device config file: /Users/foobear/.android/avd/foo_hvga2.avd/config.ini
emulator: /Users/foobear/.android/avd/foo_hvga2.avd/config.ini: parsing as .ini file
emulator:    1: KEY='hw.lcd.density' VALUE='160'
emulator:    2: KEY='skin.name' VALUE='HVGA'
emulator:    3: KEY='skin.path' VALUE='platforms/android-16/skins/HVGA'
emulator:    4: KEY='hw.cpu.arch' VALUE='arm'
emulator:    5: KEY='abi.type' VALUE='armeabi-v7a'
emulator:    6: KEY='hw.cpu.model' VALUE='cortex-a8'
emulator:    7: KEY='vm.heapSize' VALUE='48'
emulator:    8: KEY='hw.ramSize' VALUE='512'
emulator:    9: KEY='hw.gpu.enabled' VALUE='yes'
emulator:   10: KEY='image.sysdir.1' VALUE='system-images/android-16/armeabi-v7a/'
emulator: /Users/foobear/.android/avd/foo_hvga2.avd/config.ini: parsing finished
emulator: using core hw config path: /Users/foobear/.android/avd/foo_hvga2.avd/hardware-qemu.ini
emulator: Found target field in root AVD .ini file: 'android-16'
emulator: Found AVD target API level: 16
emulator:     found image search path: system-images/android-16/armeabi-v7a/
emulator: found a total of 1 search paths for this AVD
emulator: found skin 'HVGA' in directory: /Users/foobear/android-sdks/platforms/android-16/skins
emulator: autoconfig: -skin HVGA
emulator: autoconfig: -skindir /Users/foobear/android-sdks/platforms/android-16/skins
emulator: found skin-specific hardware.ini: /Users/foobear/android-sdks/platforms/android-16/skins/HVGA/hardware.ini
emulator: /Users/foobear/android-sdks/platforms/android-16/skins/HVGA/hardware.ini: parsing as .ini file
emulator:    2: KEY='hw.lcd.density' VALUE='160'
emulator:    3: KEY='hw.ramSize' VALUE='512'
emulator:    4: KEY='vm.heapSize' VALUE='48'
emulator: /Users/foobear/android-sdks/platforms/android-16/skins/HVGA/hardware.ini: parsing finished
emulator: adding binding BUTTON_CALL to F3
emulator: adding binding BUTTON_HANGUP to F4
emulator: adding binding BUTTON_HOME to HOME
emulator: adding binding BUTTON_BACK to ESCAPE
emulator: adding binding BUTTON_MENU to F2
emulator: adding binding BUTTON_MENU to PAGEUP
emulator: adding binding BUTTON_STAR to Shift-F2
emulator: adding binding BUTTON_STAR to PAGEDOWN
emulator: adding binding BUTTON_POWER to F7
emulator: adding binding BUTTON_SEARCH to F5
emulator: adding binding BUTTON_CAMERA to Ctrl-KEYPAD_5
emulator: adding binding BUTTON_CAMERA to Ctrl-F3
emulator: adding binding BUTTON_VOLUME_UP to KEYPAD_PLUS
emulator: adding binding BUTTON_VOLUME_UP to Ctrl-F5
emulator: adding binding BUTTON_VOLUME_DOWN to KEYPAD_MINUS
emulator: adding binding BUTTON_VOLUME_DOWN to Ctrl-F6
emulator: adding binding TOGGLE_NETWORK to F8
emulator: adding binding TOGGLE_TRACING to F9
emulator: adding binding TOGGLE_FULLSCREEN to Alt-ENTER
emulator: adding binding BUTTON_DPAD_CENTER to KEYPAD_5
emulator: adding binding BUTTON_DPAD_UP to KEYPAD_8
emulator: adding binding BUTTON_DPAD_LEFT to KEYPAD_4
emulator: adding binding BUTTON_DPAD_RIGHT to KEYPAD_6
emulator: adding binding BUTTON_DPAD_DOWN to KEYPAD_2
emulator: adding binding TOGGLE_TRACKBALL to F6
emulator: adding binding SHOW_TRACKBALL to DELETE
emulator: adding binding CHANGE_LAYOUT_PREV to KEYPAD_7
emulator: adding binding CHANGE_LAYOUT_PREV to Ctrl-F11
emulator: adding binding CHANGE_LAYOUT_NEXT to KEYPAD_9
emulator: adding binding CHANGE_LAYOUT_NEXT to Ctrl-F12
emulator: adding binding ONION_ALPHA_UP to KEYPAD_MULTIPLY
emulator: adding binding ONION_ALPHA_DOWN to KEYPAD_DIVIDE
emulator: keyset loaded from: /Users/foobear/.android/default.keyset
emulator: /Users/foobear/.android/avd/foo_hvga2.avd/emulator-user.ini: parsing as .ini file
emulator:    1: KEY='window.x' VALUE='380'
emulator:    2: KEY='window.y' VALUE='52'
emulator:    3: KEY='uuid' VALUE='1342389488653'
emulator: /Users/foobear/.android/avd/foo_hvga2.avd/emulator-user.ini: parsing finished
emulator: trying to load skin file '/Users/foobear/android-sdks/platforms/android-16/skins/HVGA/layout'
emulator: skin network speed: 'full'
emulator: skin network delay: 'none'
emulator: found kernel-qemu in search dir: /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a/
emulator: autoconfig: -kernel /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//kernel-qemu
emulator: found ramdisk.img in search dir: /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a/
emulator: autoconfig: -ramdisk /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//ramdisk.img
emulator: found system.img in search dir: /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a/
emulator: Using initial system image: /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//system.img
emulator: autoconfig: -data /Users/foobear/.android/avd/foo_hvga2.avd/userdata-qemu.img
emulator: autoconfig: -initdata /Users/foobear/.android/avd/foo_hvga2.avd/userdata.img
emulator: autoconfig: -cache /Users/foobear/.android/avd/foo_hvga2.avd/cache.img
emulator: Physical RAM size: 512MB

emulator:     no qwerty2.kcm in search dir: /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a/
emulator: <memoryFile>: parsing as .ini file
emulator: <memoryFile>: parsing finished
Content of hardware configuration file:
  hw.cpu.arch = arm
  hw.cpu.model = cortex-a8
  hw.ramSize = 512
  hw.screen = touch
  hw.mainKeys = yes
  hw.trackBall = yes
  hw.keyboard = no
  hw.keyboard.lid = no
  hw.keyboard.charmap = qwerty2
  hw.dPad = yes
  hw.gsmModem = yes
  hw.gps = yes
  hw.battery = yes
  hw.accelerometer = yes
  hw.audioInput = yes
  hw.audioOutput = yes
  hw.sdCard = yes
  disk.cachePartition = yes
  disk.cachePartition.path = /Users/foobear/.android/avd/foo_hvga2.avd/cache.img
  disk.cachePartition.size = 66m
  hw.lcd.width = 320
  hw.lcd.height = 480
  hw.lcd.depth = 16
  hw.lcd.density = 160
  hw.lcd.backlight = yes
  hw.gpu.enabled = yes
  hw.camera.back = emulated
  hw.camera.front = none
  vm.heapSize = 48
  hw.sensors.proximity = yes
  hw.sensors.magnetic_field = yes
  hw.sensors.orientation = yes
  hw.sensors.temperature = yes
  kernel.path = /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//kernel-qemu
  kernel.parameters =  android.checkjni=1 android.bootanim=0
  disk.ramdisk.path = /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//ramdisk.img
  disk.systemPartition.initPath = /Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//system.img
  disk.systemPartition.size = 200m
  disk.dataPartition.path = /Users/foobear/.android/avd/foo_hvga2.avd/userdata-qemu.img
  disk.dataPartition.size = 200m
  avd.name = foo_hvga2
.
QEMU options list:
emulator: argv[00] = "/Users/foobear/android-sdks/tools/emulator-arm"
emulator: argv[01] = "-cpu-delay"
emulator: argv[02] = "0"
emulator: argv[03] = "-show-kernel"
emulator: argv[04] = "-android-hw"
emulator: argv[05] = "/Users/foobear/.android/avd/foo_hvga2.avd/hardware-qemu.ini"
Concatenated QEMU options:
 /Users/foobear/android-sdks/tools/emulator-arm -cpu-delay 0 -show-kernel -android-hw /Users/foobear/.android/avd/foo_hvga2.avd/hardware-qemu.ini
emulator: android_qemud_init
emulator: Registered QEMUD service boot-properties
emulator: registered 'boot-properties' qemud service
emulator: android_qemud_init
emulator: Registered QEMUD service hw-control
emulator: android_hw_control_init: hw-control qemud handler initialized
emulator: /Users/foobear/.android/avd/foo_hvga2.avd/hardware-qemu.ini: parsing as .ini file
emulator:    1: KEY='hw.cpu.arch' VALUE='arm'
emulator:    2: KEY='hw.cpu.model' VALUE='cortex-a8'
emulator:    3: KEY='hw.ramSize' VALUE='512'
emulator:    4: KEY='hw.screen' VALUE='touch'
emulator:    5: KEY='hw.mainKeys' VALUE='yes'
emulator:    6: KEY='hw.trackBall' VALUE='yes'
emulator:    7: KEY='hw.keyboard' VALUE='no'
emulator:    8: KEY='hw.keyboard.lid' VALUE='no'
emulator:    9: KEY='hw.keyboard.charmap' VALUE='qwerty2'
emulator:   10: KEY='hw.dPad' VALUE='yes'
emulator:   11: KEY='hw.gsmModem' VALUE='yes'
emulator:   12: KEY='hw.gps' VALUE='yes'
emulator:   13: KEY='hw.battery' VALUE='yes'
emulator:   14: KEY='hw.accelerometer' VALUE='yes'
emulator:   15: KEY='hw.audioInput' VALUE='yes'
emulator:   16: KEY='hw.audioOutput' VALUE='yes'
emulator:   17: KEY='hw.sdCard' VALUE='yes'
emulator:   18: KEY='disk.cachePartition' VALUE='yes'
emulator:   19: KEY='disk.cachePartition.path' VALUE='/Users/foobear/.android/avd/foo_hvga2.avd/cache.img'
emulator:   20: KEY='disk.cachePartition.size' VALUE='66m'
emulator:   21: KEY='hw.lcd.width' VALUE='320'
emulator:   22: KEY='hw.lcd.height' VALUE='480'
emulator:   23: KEY='hw.lcd.depth' VALUE='16'
emulator:   24: KEY='hw.lcd.density' VALUE='160'
emulator:   25: KEY='hw.lcd.backlight' VALUE='yes'
emulator:   26: KEY='hw.gpu.enabled' VALUE='yes'
emulator:   27: KEY='hw.camera.back' VALUE='emulated'
emulator:   28: KEY='hw.camera.front' VALUE='none'
emulator:   29: KEY='vm.heapSize' VALUE='48'
emulator:   30: KEY='hw.sensors.proximity' VALUE='yes'
emulator:   31: KEY='hw.sensors.magnetic_field' VALUE='yes'
emulator:   32: KEY='hw.sensors.orientation' VALUE='yes'
emulator:   33: KEY='hw.sensors.temperature' VALUE='yes'
emulator:   34: KEY='kernel.path' VALUE='/Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//kernel-qemu'
emulator:   35: KEY='kernel.parameters' VALUE='android.checkjni=1 android.bootanim=0'
emulator:   36: KEY='disk.ramdisk.path' VALUE='/Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//ramdisk.img'
emulator:   37: KEY='disk.systemPartition.initPath' VALUE='/Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//system.img'
emulator:   38: KEY='disk.systemPartition.size' VALUE='200m'
emulator:   39: KEY='disk.dataPartition.path' VALUE='/Users/foobear/.android/avd/foo_hvga2.avd/userdata-qemu.img'
emulator:   40: KEY='disk.dataPartition.size' VALUE='200m'
emulator:   41: KEY='avd.name' VALUE='foo_hvga2'
emulator: /Users/foobear/.android/avd/foo_hvga2.avd/hardware-qemu.ini: parsing finished
emulator: nand_add_dev: system,size=0xc800000,initfile=/Users/foobear/android-sdks/system-images/android-16/armeabi-v7a//system.img
emulator: mapping 'system' NAND image to /tmp/android-foobear/emulator-lNlrjC
emulator: rounding devsize up to a full eraseunit, now c810000

emulator: nand_add_dev: userdata,size=0xc800000,file=/Users/foobear/.android/avd/foo_hvga2.avd/userdata-qemu.img
emulator: rounding devsize up to a full eraseunit, now c810000

emulator: android_qemud_init
emulator: Registered QEMUD service boot-properties
emulator: registered 'boot-properties' qemud service
emulator: Adding boot property: 'dalvik.vm.heapsize' = '48m'
emulator: Adding boot property: 'qemu.sf.lcd_density' = '160'
emulator: Adding boot property: 'qemu.hw.mainkeys' = '1'
emulator: android_qemud_init
emulator: Registered QEMUD service gsm
emulator: android_qemud_init
emulator: Registered QEMUD service gps
emulator: Adding boot property: 'qemu.sf.fake_camera' = 'back'
emulator: android_qemud_init
emulator: Registered QEMUD service camera
emulator: android_camera_service_init: Registered 'camera' qemud service
emulator: IP address of your DNS(s): 75.75.75.75, 75.75.76.76
emulator: nand_add_dev: cache,size=0x4200000,file=/Users/foobear/.android/avd/foo_hvga2.avd/cache.img
emulator: Initializing hardware OpenGLES emulation support
emulator: Kernel parameters: qemu.gles=1 qemu=1 console=ttyS0 android.qemud=ttyS1 android.checkjni=1 android.bootanim=0 ndns=2
emulator: Trace file name is not set

emulator: autoconfig: -scale 1
2012-07-15 15:55:14.148 emulator-arm[12082:80b] Warning once: This application, or a library it uses, is using NSQuickDrawView, which has been deprecated. Apps should cease use of QuickDraw and move to Quartz.
emulator: android_qemud_init
emulator: Registered QEMUD service sensors
emulator: android_hw_sensors_init: sensors qemud service initialized
serial0 console^M
emulator: Could not open file: (null)/system/build.prop: No such file or directory
emulator: control console listening on port 5554, ADB on port 5555
Using config file: /Users/foobear/.android/modem-nv-ram-5554
Setting value of oper_name_index to 2 (2)Setting value of selection_mode to 0 (0)Setting value of oper_index to 0 (0)Setting value of oper_count to 2 (2)Setting value of in_ecbm to 0 (0)Setting value of prl_version to 0 (0)Setting value of preferred_mode to 15 (15)Setting value of cdma_subscription_source to 1 (1)Setting value of cdma_roaming_pref to 2 (2)emulator: sent '0012host:emulator:5555' to ADB server
emulator: ping program: /Users/foobear/android-sdks/tools/ddms
emulator: ping command: /Users/foobear/android-sdks/tools/ddms ping emulator 20.0 "Intel Inc." "Intel GMA X3100 OpenGL Engine" "2.0 APPLE-1.6.36"
emulator: Error while connecting to socket '127.0.0.1:1970': 61 -> Connection refused
emulator: ASC 127.0.0.1:1970: Retrying connection. Connector FD = 13
Uncompressing Linux................................................................................................. done, booting the kernel.^M
goldfish_fb_get_pixel_format:167: display surface,pixel format:
  bits/pixel:  16
  bytes/pixel: 2
 bytes/pixel: 2
  depth:       16
  red:         bits=5 mask=0xf800 shift=11 max=0x1f
  green:       bits=6 mask=0x7e0 shift=5 max=0x3f
  blue:        bits=5 mask=0x1f shift=0 max=0x1f
  alpha:       bits=0 mask=0x0 shift=0 max=0x0
Initializing cgroup subsys cpu
Linux version 2.6.29-gc497e41 (kroot@kennyroot.mtv.corp.google.com) (gcc version 4.4.3 (GCC) ) #2 Thu Dec 8 15:07:43 PST 2011
CPU: ARMv7 Processor [410fc080] revision 0 (ARMv7), cr=10c5387f
CPU: VIPT nonaliasing data cache, VIPT nonaliasing instruction cache
Machine: Goldfish
Memory policy: ECC disabled, Data cache writeback
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 130048
Kernel command line: qemu.gles=1 qemu=1 console=ttyS0 android.qemud=ttyS1 android.checkjni=1 android.bootanim=0 ndns=2
Unknown boot option `qemu.gles=1': ignoring
Unknown boot option `android.qemud=ttyS1': ignoring
Unknown boot option `android.checkjni=1': ignoring
Unknown boot option `android.bootanim=0': ignoring
PID hash table entries: 2048 (order: 11, 8192 bytes)
Console: colour dummy device 80x30
Dentry cache hash table entries: 65536 (order: 6, 262144 bytes)
Inode-cache hash table entries: 32768 (order: 5, 131072 bytes)
Memory: 512MB = 512MB total
Memory: 515712KB available (2756K code, 683K data, 108K init)
Calibrating delay loop... 211.35 BogoMIPS (lpj=1056768)
Mount-cache hash table entries: 512
Initializing cgroup subsys debug
Initializing cgroup subsys cpuacct
Initializing cgroup subsys freezer
CPU: Testing write buffer coherency: ok
net_namespace: 716 bytes
NET: Registered protocol family 16
bio: create slab <bio-0> at 0
NET: Registered protocol family 2
IP route cache hash table entries: 16384 (order: 4, 65536 bytes)
TCP established hash table entries: 65536 (order: 7, 524288 bytes)
TCP bind hash table entries: 65536 (order: 6, 262144 bytes)
TCP: Hash tables configured (established 65536 bind 65536)
TCP reno registered
NET: Registered protocol family 1
checking if image is initramfs... it is
Freeing initrd memory: 160K
goldfish_new_pdev goldfish_interrupt_controller at ff000000 irq -1
goldfish_new_pdev goldfish_device_bus at ff001000 irq 1
goldfish_new_pdev goldfish_timer at ff003000 irq 3
goldfish_new_pdev goldfish_rtc at ff010000 irq 10
goldfish_new_pdev goldfish_tty at ff002000 irq 4
goldfish_new_pdev goldfish_tty at ff011000 irq 11
goldfish_new_pdev goldfish_tty at ff012000 irq 12
goldfish_new_pdev smc91x at ff013000 irq 13
goldfish_new_pdev goldfish_fb at ff014000 irq 14
goldfish_new_pdev goldfish_audio at ff004000 irq 15
goldfish_new_pdev goldfish_memlog at ff006000 irq -1
goldfish_new_pdev goldfish-battery at ff015000 irq 16
goldfish_new_pdev goldfish_events at ff016000 irq 17
goldfish_new_pdev goldfish_nand at ff017000 irq -1
goldfish_new_pdev qemu_pipe at ff018000 irq 18
goldfish_new_pdev goldfish-switch at ff01a000 irq 19
goldfish_new_pdev goldfish-switch at ff01b000 irq 20
goldfish_pdev_worker registered goldfish_interrupt_controller
goldfish_pdev_worker registered goldfish_device_bus
goldfish_pdev_worker registered goldfish_timer
goldfish_pdev_worker registered goldfish_rtc
goldfish_pdev_worker registered goldfish_tty
goldfish_pdev_worker registered goldfish_tty
goldfish_pdev_worker registered goldfish_tty
goldfish_pdev_worker registered smc91x
goldfish_pdev_worker registered goldfish_fb
goldfish_pdev_worker registered goldfish_audio
goldfish_pdev_worker registered goldfish_memlog
goldfish_pdev_worker registered goldfish-battery
goldfish_pdev_worker registered goldfish_events
goldfish_pdev_worker registered goldfish_nand
goldfish_pdev_worker registered qemu_pipe
goldfish_pdev_worker registered goldfish-switch
goldfish_pdev_worker registered goldfish-switch
ashmem: initialized
Installing knfsd (copyright (C) 1996 okir@monad.swb.de).
yaffs Dec  8 2011 15:06:54 Installing.
msgmni has been set to 1008
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler anticipatory registered (default)
io scheduler deadline registered
io scheduler cfq registered
allocating frame buffer 320 * 480, got ffa00000
console [ttyS0] enabled
brd: module loaded
loop: module loaded
nbd: registered device at major 43
goldfish_audio_probe
emulator: goldfish_audio_write: AUDIO_SET_WRITE_BUFFER_1 1f9e0000
emulator: goldfish_audio_write: AUDIO_SET_WRITE_BUFFER_2 1f9e4000
emulator: goldfish_audio_read: AUDIO_READ_SUPPORTED returns 1
emulator: goldfish_audio_write: AUDIO_SET_READ_BUFFER 1f9e8000
tun: Universal TUN/TAP device driver, 1.6
tun: (C) 1999-2004 Max Krasnyansky <maxk@qualcomm.com>
smc91x.c: v1.1, sep 22 2004 by Nicolas Pitre <nico@cam.org>
eth0 (smc91x): not using net_device_ops yet
eth0: SMC91C11xFD (rev 1) at e080c000 IRQ 13 [nowait]
eth0: Ethernet addr: 52:54:00:12:34:56
goldfish nand dev0: size c200000, page 2048, extra 64, erase 131072
goldfish nand dev1: size c200000, page 2048, extra 64, erase 131072
goldfish nand dev2: size 4000000, page 2048, extra 64, erase 131072
mice: PS/2 mouse device common for all mice
*** events probe ***
events_probe() addr=0xe0814000 irq=17
events_probe() keymap=qwerty2
input: qwerty2 as /devices/virtual/input/input0
goldfish_rtc goldfish_rtc: rtc core: registered goldfish_rtc as rtc0
device-mapper: uevent: version 1.0.3
device-mapper: ioctl: 4.14.0-ioctl (2008-04-23) initialised: dm-devel@redhat.com
logger: created 64K log 'log_main'
logger: created 256K log 'log_events'
logger: created 64K log 'log_radio'
TCP cubic registered
NET: Registered protocol family 10
IPv6 over IPv4 tunneling driver
NET: Registered protocol family 17
NET: Registered protocol family 15
RPC: Registered udp transport module.
RPC: Registered tcp transport module.
802.1Q VLAN Support v1.8 Ben Greear <greearb@candelatech.com>
All bugs added by David S. Miller <davem@redhat.com>
FP support v0.3: implementor 41 architecture 3 part 30 variant c rev 0
goldfish_rtc goldfish_rtc: setting system clock to 2012-07-15 22:55:15 UTC (1342392915)
Freeing init memory: 108K
init: cannot open '/initlogo.rle'
yaffs: dev is 32505856 name is "mtdblock0"
yaffs: passed flags ""
yaffs: Attempting MTD mount on 31.0, "mtdblock0"
emulator: Error while connecting to socket '127.0.0.1:1970': 61 -> Connection refused
emulator: ASC 127.0.0.1:1970: Retrying connection. Connector FD = 13
emulator: Error while connecting to socket '127.0.0.1:1970': 61 -> Connection refused

yaffs_read_super: isCheckpointed 0
save exit: isCheckpointed 1
yaffs: dev is 32505857 name is "mtdblock1"
yaffs: passed flags ""
yaffs: Attempting MTD mount on 31.1, "mtdblock1" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T10:39:53.147

在我安装了 Android SDK Tools 21.1 rc（在预览频道中）后，启用了主机 GPU 的模拟器现在运行良好（快速且永不倒置）。

只需启动 Android SDK Manager 并在设置对话框中启用预览通道。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T05:37:32.567

这似乎是硬件 GPU 仿真的错误。（您`hw.gpu.enabled' VALUE='yes'`的日志中有，这意味着此功能已启用。）

在您的 AVD 设置中禁用“GPU 仿真”，一切正常。

# php - Plesk 动态创建子域和数据库

> ID：11496500
> 
> 赞同：0
> 
> 时间：2012-07-15T23:28:32.620
> 
> 标签：php, plesk

我正在尝试在 Plesk 中使用 PHP 创建子域和数据库。我正在查看他们的 API 文档，但我不知道如何做这两件事，所以如果你能帮助我，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:49:28.180

无法为子域创建数据库，只能用于域/订阅。这里是 API 请求：

```
<packet version="1.6.3.0">
<database>
<add-db>
   <webspace-id>2</webspace-id>
   <name>MyBase</name>
   <type>mysql</type>
</add-db>
</database>
</packet> 
```

其中 webspace-id - 它是您的子域的域（不是子域）的 id。

如果您尝试在子域上创建 db，您将收到以下响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<packet version="1.6.3.0">
  <database>
    <add-db>
      <result>
        <status>error</status>
        <errcode>1023</errcode>
        <errtext>This object can be created **only in a webspace**.</errtext>
      </result>
    </add-db>
  </database>
</packet> 
```

因此，首先您需要获取有关子域的父域的信息：

```
<packet version="1.5.2.0">
<subdomain>
<get>
   <filter>
      <name>sub.domain.com</name>
   </filter>
</get>
</subdomain>
</packet> 
```

然后获取父母的ID：

```
<packet version="1.6.3.0">
<webspace>
<get>
   <filter>
      <name>domain.com</name>
   </filter>
   <dataset>
      <gen_info/>
   </dataset>
</get>
</webspace>
</packet> 
```

然后使用收到的 id 在父级上创建数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:50:59.523

稍晚一些。创建子域：

```
/usr/local/psa/bin/subdomain -c %subdomain% -www-root %subdomain% -php true -ssi true -d %domain% 
```

我通常使用 CREATE DATABASE 直接创建到 MySQL 的数据库。

# c++ - 对引用计数感到困惑

> ID：11496501
> 
> 赞同：4
> 
> 时间：2012-07-15T23:29:33.667
> 
> 标签：c++, reference, effective-c++

感谢您提前提供帮助。我正在阅读 Scott Meyers 的《更有效的 C++》一书，但第 29 条“引用计数”中的一个简单程序确实让我感到困惑。程序复制到这里：

`String::String(const String& rhs): value(rhs.value) { ++value->refCount; }`

然后代码：

```
String s1("More Effective C++");
String s2=s1; 
```

我真的很困惑为什么 s1 和 s2 都会有一个 refCount 2。我的理解是，由于复制构造函数是 pass-by-reference-to-const，在 s2=s1,s2.refCount 将变为 2，而 s1.refCount 将变为 2。 refCount 根本不会改变。请纠正我！！再次感谢。

此致。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:34:24.403

`value`在这种情况下是一个指针，并且`const`-ness 不会传播到被指向的对象，所以这里`refCount` *是*可变的。

引用计数的要点是*共享*相同的对象表示而不重新创建它，直到所有引用消失，即引用计数降至零。此时，表示被解除分配。

这对于只读对象非常有效，因此如果其中一个引用实例想要更改该共享表示，它通常会被克隆并且引用计数从一个重新开始。

然后存在使引用计数线程安全的问题。Sutter 对此写了大量文章，参见[gotw #43](http://www.gotw.ca/gotw/043.htm)、[gotw #44](http://www.gotw.ca/gotw/044.htm)和[gotw #45](http://www.gotw.ca/gotw/045.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T23:35:17.460

> 我知道这`s2.refCount`将变为 2，而`s1.refCount`根本不会改变。

有你的误解。没有像`s2.refCount`nor这样的动物`s1.refCount`。相反，变量被称为`s2.value->refCount`和`s1.value->refCount`。请注意`s2.value`== `s1.value`，因此它们本质上共享相同的`refCount`成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T23:33:14.993

如果 by 使用的引用计数`s1`为 1，那么它会在它死亡时将字符串连同它一起删除。考虑以下：

```
String s2;
{
    String s1("More Effective C++");
    s2 = s1;
} // A 
```

在A点，`s1`死亡。如果它的 refcount 是 1，它会清理它共享的存储空间`s2`，并且`s2`会使用无效的存储空间。

引用计数不与每个对象相关联。正如您从我给出的示例中看到的那样，这将毫无价值，因为引用计数永远不会作为可以安全清理的指标而值得信赖。

引用计数与这些对象共享的存储块相关联。和都*只有一个引用计数*。两者共享一块存储，其中包含“更有效的 C++”。这意味着该存储有两个引用。两者中的每一个都需要知道有两个，这样他们就不会清理另一个正在使用的存储空间。`s1``s2`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T23:35:25.963

引用计数必须驻留在单独的共享内存中：

```
struct Foo
{
    unsigned int * refcount;      // shared among all "equal" objects!

    Foo() : refcount(new auto {1U}) { }

    Foo(Foo const & rhs) : refcount(rhs.refcount) { ++*refcount; }

    ~Foo() { --*refcount; if (*refcount == 0) { delete refcount; } }

    Foo & operator=(Foo const & rhs)
    {
        if (this == std::addressof(rhs)) { return *this; }
        --*refcount;
        if (*refcount == 0) { delete refcount; }
        refcount = rhs.refcount;
        ++*refcount;
        return *this;
    }

    // etc.
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T23:37:58.567

`value`是一个指向底层实现结构的指针。字符串复制构造函数将指针复制到新对象 ( `s2`) 中，并增加指向实现结构的引用计数。但是，请记住原始对象 ( `s1`) 具有相同的指针，因此从 s1 看到的引用计数也将增加。只有一个底层实现结构，因此从一个 String 对象对其进行操作会影响共享该实现结构的所有其他 String 对象。这就是引用计数的全部意义！

# r - 在 coxph( ) 或 survreg( ) 中使用 BY 变量

> ID：11496510
> 
> 赞同：1
> 
> 时间：2012-07-15T23:31:24.073
> 
> 标签：r, plyr, data.table

我得到了一些模拟的输出，看起来像这样：

```
Run,ID,Time,Var1,Outcome
1,1,6,0.5,1
1,2,4,0.25,1
1,3,2,0.9,1
2,1,5,0.07,1
...
10,3,9,0.08,1 
```

基本上是对 N 个人的一系列 M 研究（实际上 M = 1000 和 N = 123）。我想运行 Cox 模型（最好）或参数回归模型（如果我必须）来估计`Var1`对生存时间的影响。我想要做的是估计每个“运行”的效果（产生 1,000 个估计值），然后将所有这些估计值转储到一个数据框、矩阵等中，我可以在其中查看它们的分布。

如果我使用的是 SAS，代码将如下所示：

```
ods output ParameterEstimates=work.parameters;
proc phreg model time*outcome(0) = Var1;
   BY Run;
run;
ods output close; 
```

但由于这是一个副项目，而且我试图强迫自己在 R 中做副项目以学习它，我不能这么依赖 SAS。据我从 coxph() 文档中可以看出，没有简单的方法来包含一个副变量。我的猜测是这将涉及循环和子集。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:10:07.927

使用`plyr`or data.table的示例

```
## some data
set.seed(123)
.data <- data.frame(run = rep(1:10, each = 50), x = runif(500))
.data$y <- .data$x * rep(runif(10),each = 50)

# ---------------------------------------------------------
# using plyr
library(plyr)
# ddply to extract just the coefficients
ddply(.data, .(run), function(data) data.frame(coef = coef(lm(y ~ x, data))))
    # or save the whole object
# the whole lm object 
lm_list <- dlply(.data, .(run), lm, formula = y ~ x)
# get the coefficients    
ldply(lm_list, coef)
# print the summaries
llply(lm_list, summary)

# ---------------------------------------------------------
# with data.table 
library(data.table)

DT <- data.table(.data)
setkeyv(DT, 'run')

DT[, list(coef = coef(lm(y~x, .SD))), by = 'run'] 
```

# c# - C#显示数组的格式化内容

> ID：11496512
> 
> 赞同：0
> 
> 时间：2012-07-15T23:31:31.067
> 
> 标签：c#, arrays, loops

我正在尝试显示一个本身没有问题的数组。但是，我想添加一个`If statement`，以便如果`score[]`正在显示的数组的当前迭代等于 300，那么它将在其后放置一个`*`。就像是`300*`

此外，阵列需要从最高到最低显示，我正在通过在阵列中将显示反转为最低到最高来执行此操作。我正在考虑使用交换来反转顺序，但如果我不需要，那么我想以这种方式解决它。

到目前为止，我得到

```
400
332
300*
300 
```

或者以我尝试的另一种方式，我得到了

```
0
0
300*
300
250 
221 
```

我只是在显示和输出方面遇到问题。

```
static void Output(int iteration, int[] score, string[] player, double average)
    {   //opening output 
        Console.WriteLine("\n\t****** OUTPUT ******");
        Console.WriteLine("\nScores for this game.\n");

        if (score[iteration - 1] == 300)
        {
            Console.WriteLine("{0} score was {1}*", player[iteration - 1], score[iteration - 1]);
        }

        for (int i = iteration; i <= MAX_SIZE_ARRAY; i--)
        {             
                //iterates through the loop to display all the players name then score
                Console.WriteLine("{0} score was {1}", player[i], score[i]);
        }
        //displays high, low, and average score
        Console.WriteLine("\nThe high score was {0} with {1} points", player[iteration - 1], score[iteration - 1]);
        Console.WriteLine("The low score was {0} with {1} points", player[0], score[0]);
        Console.WriteLine("The team average score was {0}", average);

    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:53:49.917

在循环内移动 if 语句应该可以工作：

```
for (int i = iteration; i <= MAX_SIZE_ARRAY; i--)
 {             
   //iterates through the loop to display all the players name then score
   if (score[iteration - 1] == 300)
     Console.WriteLine("{0} score was {1}*", player[iteration - 1],                                  score[iteration - 1]);
   else
     Console.WriteLine("{0} score was {1}", player[i], score[i]);
 } 
```

我猜这是制作保龄球评分系统的学校作业吗？一种建议是使用 KeyValuePair、Tuple 或您自己的 Struct 定义的列表或数组，而不是两个单独的数组，将玩家姓名与他们的分数联系起来。将它们分开会导致由于错误而无法匹配的问题。（从一个而不是另一个中删除，对一个中的更改进行排序等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:47:04.757

检查`score[i] == 300`循环内部：

```
for (int i = iteration; i <= MAX_SIZE_ARRAY; i--)
 {             
   if (score[i] == 300)
     Console.WriteLine("{0} score was {1}*", player[i], score[i]);
   else
     Console.WriteLine("{0} score was {1}", player[i], score[i]);
 } 
```

# c# - Speech.Recognition 仅听写数字 C#

> ID：11496514
> 
> 赞同：2
> 
> 时间：2012-07-15T23:31:42.203
> 
> 标签：c#, speech-recognition, voice-recognition

我试图让用户可以说`Modify X`，后跟一个数字，然后让我的软件根据数字做一些事情。

当前，`Modify X`正在监听；虽然我不知道如何检测命令后所说的数字。

我发现`DictationGrammar`有一个`SetDictationContext()`方法。但是我不希望它检测到任何单词，只检测数字。

任何帮助，将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T01:11:52.823

您可能应该从[http://msdn.microsoft.com/en-us/library/hh361633](http://msdn.microsoft.com/en-us/library/hh361633)开始阅读语法。当您想识别用户可能说的任何可能的单词时，您只使用听写语法（将听写语法视为完整的字典）。如果您想识别一组受限制的单词，请使用特定于任务的语法。这可以使用 GrammarBuilder 或类似方法创建。

几年前在[http://msdn.microsoft.com/en-us/magazine/cc163663.aspx](http://msdn.microsoft.com/en-us/magazine/cc163663.aspx)上发表了一篇非常好的文章。这可能是迄今为止我发现的最好的介绍性文章。它有点过时了，但很有帮助。（AppendResultKeyValue 方法在 beta 之后被删除。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-09T21:05:14.053

```
int minNumber = 0;
int maxNumber = 100;
Choices numbers = new Choices ();
for (int i = minNumber; i < maxNumber; i++)
{
    numbers.add(i.toString);
}
Choices myCommands = new Choices ("count");
Choices myOperators = new Choices ("plus","minus","add","subtract","multiply","times","divide");
GrammarBuilder mathGrammar = new GrammarBuilder ();
mathGrammar.add (myCommands);
mathGrammar.add (numbers);
mathGrammar.add (myOperators); 
```

...加载语法并创建一个事件。

# clojure - Clojure 协议源自什么语言的什么特性？

> ID：11496521
> 
> 赞同：4
> 
> 时间：2012-07-15T23:32:50.580
> 
> 标签：clojure

Clojure 协议源自什么语言的什么特性？

注意：这不是关于“如何使用协议”的问题

这是一个关于是什么激发了这个想法的问题。

特别是，我想要的是得到类似的东西：

*   XYZ + ABC 启发了 Clojure 协议

然后，我可以开始阅读人们使用 XYZ 和 ABC 获得语言功能的方向。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T00:12:59.783

如果您了解 Java，Clojure 协议类似于 Java 接口——但更好。[Clojure 网站](http://clojure.org/protocols)对协议进行了这样的说明（并且该页面上有更多关于协议的背景信息和基本原理）：

> *   提供高性能的动态多态结构作为接口的替代方案
> *   支持接口的最佳部分
>     *   只有规范，没有实现
>     *   一个类型可以实现多个协议
> *   在避免一些缺点的同时
>     *   实现哪些接口是类型作者在设计时选择的，以后不能扩展（尽管接口注入最终可能会解决这个问题）
>     *   实现一个接口会创建一个 isa/instanceof 类型关系和层次结构
> *   通过允许不同方独立扩展类型集、协议和协议的实现来避免“表达问题”
>     *   这样做没有包装器/适配器
> *   支持 90% 的多方法案例（类型单一调度），同时提供更高级别的抽象/组织

此外，您可能会发现[用 Clojure 1.2 解决表达式问题](http://www.ibm.com/developerworks/java/library/j-clojure-protocols/)很有趣：

> Clojure 专家 Stuart Sierra 向您介绍了 Clojure 1.2 中解决表达式问题的新功能，这是一个经典的编程难题。协议允许您将预先存在的类型扩展为新方法，而数据类型允许您将预先存在的方法扩展为新类型——所有这些都无需更改现有代码。您还将看到 Java™ 接口和类如何与 Clojure 协议和数据类型进行交互。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T06:23:25.983

我不知道，除了解决表达式问题的愿望之外，Clojure 协议是否受到某些东西的启发，但是协议正在做与 Haskell 类型类类似的事情，例如......

查看[这个问题](https://stackoverflow.com/questions/4509782/simple-explanation-of-clojure-protocols)以获取更多信息 - 它还提到了 Scala 特征

# c++ - 避免 C++ 继承层次结构中的重复代码

> ID：11496525
> 
> 赞同：0
> 
> 时间：2012-07-15T23:33:17.320
> 
> 标签：c++, inheritance, code-duplication

我在我的一个继承层次结构中遇到了重复代码的一些困难。我怎样才能避免在函数 Smile() 中重复代码？

鉴于该变量`_a`在基类中不存在，我无法将函数移到那里。同样创建这样的模板函数`template<typename T> void smile(T& a) { a++; }`对我来说并不是真正的解决方案。我的实际代码有点复杂，如果不是不可能应用于我当前的设计，这样的解决方案将非常混乱。

```
class com
{
public:
   com(int x, float y) : _x(2), _y(1.15f)
   {   }
protected:
   // Common functions go here .We need this base class.
protected:
   int _x;
   float _y;
};

class com_int : public com
{
public:
   void fill()
   { _a = std::max(_x, (int)_y); }
protected:
   int _a;
};

class com_real : public com
{
public:
   void fill()
   { _a = std::min((float)_x, _y); }
protected:
   float _a;
};

class happy_int : public com_int
{
public:
   void smile() { _a ++; } // BAD: Will be duplicated
};

class happy_float : public com_real
{
public:
   void smile() { _a ++; } // BAD: Duplicated code
}

class sad_int : public com_int
{
public:
   frown() { _a --; }
} 
```

另外，有没有人知道一本教如何使用 OOP 和模板原则在 C++ 中实际设计代码的好书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:43:45.800

您可以从另一个帮助模板继承：

```
template <typename T, typename Derived> struct filler
{
    T _a;
    void fill()
    {
        com & b = static_cast<Derived&>(*this);
        _a = std::min(b._x, b._y);
    }
}; 
```

用法：

```
struct com_int : com, filler<int, com_int> { }; 
```

# html - 为什么图片不显示？

> ID：11496526
> 
> 赞同：-1
> 
> 时间：2012-07-15T23:33:28.677
> 
> 标签：html, css, internet-explorer, internet-explorer-9, dhtml

在 IE9 中的页面上显示图像存在问题：图像在 Firefox 和其他浏览器中显示正常，但在 IE9 中不显示。在 Firefox 中会在主页上显示所有图像，但在 IE9 中仅显示一张图像。单击该图像加载页面，其中也不显示详细图像。 [http://jurmaarealestate.ru/doma/](http://jurmalarealestate.ru/doma/)

可能，这个问题是由于 IE9 在以百分比指定宽度时无法正确调整图像大小。

如何解决这个问题？也许，他们选择使用浏览器缩放图像是有原因的，这不是一个好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:50:02.250

设置一个适当的`DOCTYPE`，以便 IE 知道如何解释您的大小属性。此外，最好使用该`style`属性来设置这些值，例如

```
<a style="width:162px; height:120px;" .... 
```

# python - 从已编译的 CPython 中删除文档字符串但不删除断言

> ID：11496532
> 
> 赞同：5
> 
> 时间：2012-07-15T23:35:07.350
> 
> 标签：python, python-2.7, python-2.x, cpython

我想从 Python 程序中删除 doc 字符串，但保留断言（和`__debug__`部分）。我一直在使用 -OO 标志生成 .pyo 文件，但根据删除断言和 doc 字符串[的文档。](http://docs.python.org/tutorial/modules.html#compiled-python-files)

我正在使用 CPython 2.7。

澄清：我正在删除文档字符串作为一种廉价的混淆方法。管理层做出了这个决定，我认为这是否有用不在这个问题的范围内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:07:28.560

你不能有一半`-O`。它删除了文档字符串和断言，这就是它的工作方式。断言通常写成可选的，也就是说，您可以在不影响程序行为的情况下删除它们。

如果我必须删除文档字符串并不理会其他所有内容，我会考虑编写一个工具来打开 .pyc 文件、解组内容、修改它们（通过删除文档字符串）并将它们重新打包为 .pyc 文件。但这可能是一个精致而脆弱的工具，如果它甚至可以这样做的话。

# mysql - 如何将这个“SELECT IN”更改为 MySQL 的“EXISTS”查询？

> ID：11496536
> 
> 赞同：1
> 
> 时间：2012-07-15T23:35:47.707
> 
> 标签：mysql, database

```
SELECT au.*
  FROM account au
  WHERE au.id IN (
    SELECT fa.from_user_id
      FROM approvals fa
      WHERE fa.to_user_id = 1
      GROUP BY fa.from_user_id
   )
 ORDER BY first_name ASC, last_name ASC
 LIMIT 0, 18446744073709551615; 
```

我怎样才能将其更改为`EXISTS`而不是`IN()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:38:46.717

```
SELECT au.* 
FROM account au 
WHERE EXISTS (
   SELECT 1 FROM approvals fa 
   WHERE fa.to_user_id=1 
     AND fa.from_user_id = au.id
) 
ORDER BY first_name ASC, last_name ASC LIMIT 0, 18446744073709551615; 
```

# jquery - 动态属性 Jquery 选择器 attr('for="*"')

> ID：11496537
> 
> 赞同：0
> 
> 时间：2012-07-15T23:36:05.110
> 
> 标签：jquery

jQuery选择器：

```
//left side
$('section.abstract label.gcsubheader')
//right side
$('fieldset.abstract label.formElems') 
```

两者都返回：（类不同，但`for="*"`其余相同）

```
<label for=​"design" class=​"displayHidden formElems">​Design​&lt;/label>​ 
<label for=​"expertise" class=​"displayHidden formElems">​Expertise​&lt;/label>​
<label for=​"skills" class=​"displayHidden formElems">​Skills​&lt;/label>​
<label for=​"tools" class=​"displayHidden formElems">​Tools​&lt;/label>​
<label for=​"projects" class=​"displayHidden formElems">​Projects​&lt;/label>​
<label for=​"community" class=​"displayHidden formElems">​Community​&lt;/label>​
<label for=​"interests" class=​"displayHidden formElems">​Interests​&lt;/label>​ 
```

我想将类似于以下内容的内容附加到左侧选择器：

```
.find($('label[for="' + $(this).text().toLowerCase() + '"]')) 
```

或者

```
var $this = $(this).text().toLowerCase();   //and use the $this in the concatenation: 
```

`labels for="design"`使用选择器来完成选择元素`($('label[for="design"]'))`，但通过动态进行。这个想法是我第一次尝试重构，并且有很多元素，当我点击一个元素时，我想找到它自己，另一个共享它的`label for`字符串。

我试过了：

```
$('section.abstract label.gcsubheader').click(function () {
     var $this = $(this).text().toLowerCase();
     //left element - hide
     $('section.abstract label.gcsubheader')..find($('label[for="' + $this + '"]')).show();
     //Right Side - show
     $('fieldset.abstract label.formElems').find($('label[for="' + $this + '"]')).show();
} 
```

和

```
$('fieldset.abstract label.formElems').find($('label[for="' + $(this).text().toLowerCase() + '"]')).show(); 
```

不知道我做错了什么。我是否必须允许另一层抽象来获取/定义元素的文本，或者我的语法错误，或者其他什么问题？我希望得到这个，所以我可以切换左右的 .hidden 类，提供非常健壮的代码重构，也许是这样的？：

```
$('label[for="*"]').click(function () {
   // for each .toggleClass('hidden'); 
} 
```

虽然不太确定如何编写`*`or `for each`，但我会到达那里。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:47:29.203

`.`在第一次调用之前，您有一个额外的`find()`，以及一个未封闭的字符串文字作为参数传递给它。注意内部函数和`click`方法的右括号。当您可能需要时，您还使用`.show()`了左元素`.hide()`。

此外，像这样将属性等于选择器附加到您的原始选择器语句是非常好的（我没有完整的 html，因此可能需要稍微调整选择器）：

```
$('section.abstract label.gcsubheader').click(function () {
    var $this = $(this).text().toLowerCase();

    //left element - hide
    $('section.abstract label.gcsubheader[for="' + $this + '"]').hide();

    //Right Side - show
    $('fieldset.abstract label.formElems[for="' + $this + '"]').show();
}); 
```

至于绑定到任何标签，请考虑使用[has-attribute 选择器](http://api.jquery.com/has-attribute-selector/)而不是`for='*'`：

```
$('label[for]').click( /* ... */ ); 
```

# php - 将函数从php转换为python

> ID：11496538
> 
> 赞同：-1
> 
> 时间：2012-07-15T23:36:32.017
> 
> 标签：php, python, function

我正在尝试转换这个 php 函数

```
function strpos_r($haystack, $needle)
{
    if(strlen($needle) > strlen($haystack))
        trigger_error(sprintf("%s: length of argument 2 must be <= argument 1", __FUNCTION__), E_USER_WARNING);

    $seeks = array();
    while($seek = strrpos($haystack, $needle))
    {
        array_push($seeks, $seek);
        $haystack = substr($haystack, 0, $seek);
    }
    return $seeks;
} 
```

我已经编写了这个 python 函数，但没有按预期工作。

```
def strposR(haystack, needle):
    if strlen(needle) > strlen(haystack):
        sys.stderr.write("length of argument 2 must be <= argument 1")
    seeks = []
    seek = 0
    while seek == haystack.rfind(needle):
        seeks.append(seek)
        haystack = haystack[0:seek]
    return seeks
def strlen(x):
    return len(x) 
```

我做错了什么？任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:48:44.750

### 警告

1.  `strrpos`并且`string.rfind`当针无法定位时不会返回相同的值。在 php中`strrpos`返回**false**，但 python 的`string.rfind`返回**-1**！

2.  php 版本中的*while-conditional*不使用严格比较，因此如果在结果数组中找到针头，该函数不会将偏移量存储`0`在结果数组中，要解决此问题，代码应编写为：

    `while (($seek = strrpos ($haystack, $needle)) !== false)`

* * *

### 你问题的根源..

```
while($seek = strrpos($haystack, $needle)) # PHP
while seek == haystack.rfind(needle):      # python 
```

上面两行没有提供等价的功能，php-condition等价写成：

```
while (($seek = strrpos ($haystack, $needle)) != false) 
```

* * *

我会将您的 python 循环更改为：

```
while True:
  seek = haystack.rfind(needle)

  if seek == -1:
    break

  if seek ==  0: # because of mentioned bug in the php version
    break

  seeks.append(seek)
  haystack = haystack[0:seek] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T23:45:46.920

一些小改动：

```
def strposR(haystack, needle):
    if len(needle) > len(haystack):
        sys.stderr.write("length of argument 2 must be <= argument 1")
    seeks = []
    seek = haystack.rfind(needle)
    while seek != -1:
        seeks.append(seek)
        haystack = haystack[0:seek]
        seek = haystack.rfind(needle)
    return seeks 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T23:47:18.477

这对我有用：

```
def strpos_r(haystack, needle):
    positions = []
    position = haystack.rfind(needle)

    while position != -1:
        positions.append(position)
        haystack = haystack[:position]
        position = haystack.rfind(needle)

    return positions 
```

此外，函数不应真正为您处理输入错误。您通常只是`return False`或让函数抛出执行错误。

# c - C：通过指针连接字符串

> ID：11496541
> 
> 赞同：0
> 
> 时间：2012-07-15T23:36:39.640
> 
> 标签：c, pointers

我正在学习 C.. 来自 C# 背景，我发现其中大部分都非常容易过渡到.. 指针，但事实证明非常麻烦.. 我创建了一个小型测试应用程序（见下文），用于通过指针连接 2 个字符串。我收到此错误：

```
error: invalid type argument of unary '*' (have 'int') 
```

我该如何解决？

```
void concatTest();

int main()
{
    concatTest();

    system("PAUSE");
    return 0;
}

void concatTest()
{
    char string1[20], string2[20], string3[40];
    char *ptr1, *ptr2, *ptr3;
    ptr1 = &string1[0];
    ptr2 = &string2[0];
    ptr3 = &string3[0];
    int i;

    printf("You need to enter 2 strings.. each of which is no more than 20 chars in length: \n");

    printf("Enter string #1: \n");
    scanf("%s", string1);

    printf("Enter string #2: \n");
    scanf("%s", string2);

    int len1 = strlen(string1);
    int len2 = strlen(string2);

    for (i = 0; i < len1; i++)
    {
        *ptr3[i] = *ptr1[i];
    }
    for (i = len1; i < len1 + len2; i++)
    {
        *ptr3[i] = *ptr2[i];
    }
    //TODO: show concatenated string on console
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:38:03.200

`ptr1[i]`已经取消引用该数组。也没有必要使用`*`。

[*但是，即使您修复了该问题，您的代码仍然会损坏；您没有考虑空终止符。*]

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-16T04:17:24.733

```
the name of array as a point
ptr1  = string1; ptr1 point at the array string1,so ptr1[i] is just like string1[i]

ptr1  = string1;
ptr2  = string2;
ptr3  = string3; 
```

# php - 如何在 SQL SELECT 查询中进行简单的数学运算？

> ID：11496544
> 
> 赞同：3
> 
> 时间：2012-07-15T23:37:28.910
> 
> 标签：php, mysql, sql

我需要选择字段符合简单数学表达式（在我的例子中是除法）的所有产品。

**示例查询：**

```
SELECT * FROM cars WHERE (retail_price/invoice_price)>1.05 
```

**需要灵活：**
我在这里需要灵活，因为我希望能够在其他地方将表达式定义为字符串，然后在 WHERE 子句之后将其弹出到 SQL 查询中。

```
$expression = "(retail_price/invoice_price)>1.05";
$query = "SELECT * FROM cars WHERE ".$expression." LIMIT 1"; 
```

**注意：**
-retail_price 的数据类型是 VARCHAR
-invoice_price 的数据类型是 VARCHAR-
不确定 VARCHAR 是否适合货币值。

有什么建议么？因为以上对我不起作用。（返回零个结果）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T23:47:25.390

这可能是一个四舍五入的问题（正如@Justin 所说）。
尝试这个：

```
SELECT * FROM cars WHERE (1.0 * retail_price / invoice_price) > 1.05 
```

这个想法是强制引擎管理浮点数（乘以浮点数 1.0）。

**更新**：
我看到您刚刚将数据类型编辑为 VARCHAR。
无论如何结果（对我来说）是一样的：看看[http://sqlfiddle.com/#!2/298d3/2](http://sqlfiddle.com/#!2/298d3/2)

# php - 使用 AJAX 从 MySQL 数据库中删除值而无需重新加载页面（已编辑）

> ID：11496545
> 
> 赞同：0
> 
> 时间：2012-07-15T23:37:38.270
> 
> 标签：php, mysql, ajax, prototypejs

我正在使用 ID 系统删除。用户输入他/她希望删除的记录的 ID，并通过 PHP 完成。这一切正常，当成功删除一个小警报框确认这一点并返回到原始页面，这表明记录不再存在。但是，我想以不刷新页面并将表格保留在屏幕上的方式使用 AJAX。

```
<head>
<title>ajax_test</title>
<script language="javascript" type="text/javascript" src="prototype.js"></script>
<script>
function updateDIV(myDiv)
{
var url='delete.php';
var params = 'id';
var myAjax = new Ajax.Updater(myDiv, url, {method: 'get', parameters: params});
}
</script>
</head>

<body>
    <form action="delete.php" method="get">
        <input type="text" name="id" placeholder="ID" />
        <input type="submit" value="Delete" onclick="updateDIV(targetDiv)" />
        <div id="targetDiv"></div>
    </form>
</body> 
```

正如您可能看到的，这是行不通的。是否有任何明显的问题需要我进一步研究？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T01:53:46.557

> 这是不刷新页面删除记录的完整源代码。
> 
> **按照步骤：**
> 
> **步骤1：**
> 
> DBConnect.php

```
 class DBConnect
  {
    function DBConnect()
    {
       $link= mysql_connect("localhost","root","")or die("Local Host Error".mysql_error());
       mysql_select_db("test");
    }

    function viewData()
    {
      $query = "SELECT * FROM test_mysql";
      $resultset = mysql_query($query);
      return $resultset;
    }

    function DeleteData($userID)
    {
      $query = "DELETE FROM test_mysql WHERE id=".$userID;
      $resultset=mysql_query($query) ;
    }
  } 
```

> **第2步：**
> 
> ```
>  delete.php 
> ```

```
 include_once'DBConnect.php';    
   if(isset($_REQUEST['userid']) && $_REQUEST['userid'])    
   {    
     $delObj= new DBConnect();    
     $delObj->DeleteData($_REQUEST['userid']);    
   } 
```

> **第 3 步：**
> 
> ```
>  index.php 
> ```

```
 <html>
    <head>
    <title></title>
    <script type="text/javascript">
    function deletedata(id)
    {
      var xmlhttp;    
      if (id=="")
        {
            document.getElementById("Display").innerHTML="";
            return;
        }
      if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
      else
      {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
      xmlhttp.onreadystatechange=function()
      {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
              window.location.reload()

            }
      }
          xmlhttp.open("GET","delete.php?userid="+id,true);
          xmlhttp.send();

    }
    </script>
    </head>
    <body>
    <?php 
    include 'DBConnect.php';
    $ViewObj= new DBConnect();
    $ResultSet=$ViewObj->viewData();
    ?>
    <span id ="Display">
    <table align="center" border="1" width="50%" cellpadding="4" cellspacing="4">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>operation</th>
      <th align="center">Action</th>
    </tr>
    <?php
    while($row= mysql_fetch_array($ResultSet))
    {
    ?>
    <tr>
      <td><?php echo $row[0];?></td>
      <td><input type="text" name="txt"></td>
      <td><?php echo $row[1];?></td>
      <td align="center"><a href="#" onClick="deletedata('<?php echo $row[0];?>')" style="color:#00F"><b>Delete</b></a></td>
    </tr>
    <?php
    }
    ?>
    </table>
    </span>
    </body>
    </html> 
```

> 如果您觉得有任何问题，请告诉我。希望对您有所帮助。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T08:48:29.030

将 updateDIV 函数更改为：

```
<script type="text/javascript">
function updateDIV(myDiv)
{
   var url='delete.php';
   var id = $F($('id'));
   var myAjax = new Ajax.Updater(myDiv, url, {method: 'get', parameters: 'id='+id});
}
</script> 
```

并在您的输入中添加一个 id 值：

```
<body>
    <form action="delete.php" method="get">
        <input type="text" id="id" name="id" placeholder="ID" />
        <input type="submit" value="Delete" onclick="updateDIV(targetDiv)" />
        <div id="targetDiv"></div>
    </form>
</body> 
```

$F 是一个原型函数，它获取元素的值。然后在您的 php 代码中，您可以使用 $_GET['id'] 获取 id。

# javascript - 在事件期间暂停 setInterval？

> ID：11496553
> 
> 赞同：0
> 
> 时间：2012-07-15T23:39:26.250
> 
> 标签：javascript, jquery

我有一个由开始/停止按钮切换的秒表功能。当按下停止按钮时，计时器停止，并且 jQuery 将一行插入到预先加载到页面上的表中。

我在后台运行了另一个 jQuery 脚本，它不断更新该表以维护新数据。它本质上是一个计时器。

但是，我遇到的问题是，当用户按下停止按钮时，setInterval 负载会继续运行，导致添加的 jquery 字段消失。

我尝试添加一个变量来检查是否按下了停止按钮，如果是，则停止事件......但由于它已经加载到 DOM 中，它似乎不起作用。这是当前代码：

```
 $.ajax({
                url: 'getData.php',
                success: function(data) {
                    $("#timesheet").html(data);
                }
            });

            var refreshId = setInterval(function() {
                $.ajax({
                    url: 'getData.php?randval='+ Math.random(),
                    success: function(data) {
                        $("#timesheet").html(data);
                    }
                });
            }, 9000); 
```

这是 ajax 正在加载的 HTML 数据：

```
<table>
<tr><th>Test</th></tr>
<tr><td>Test</td></tr>
</table> 
```

我也尝试过在 tr:last 上使用 append，但这只是将它附加到 tr...而不是创建一个新的 tr。

TL; DR：我希望 setInterval 在按下按钮时不覆盖 jQuery 添加的字段，但似乎不能这样做，因为它被编码为更改整个表。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T23:43:46.187

没有内置`.Pause`API，但您可以停止它，然后使用相同的功能启动新的间隔。

类似的东西`clearInterval`，然后再把它放回去。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T23:55:47.637

[ClearInterval 解释](http://www.w3schools.com/jsref/met_win_clearinterval.asp)

```
$('#button').click(function()
 {
     clearInterval(refreshId);
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T00:28:31.080

```
var MyApp ={
 animationID: null,
 speed : 200,
 setAnimation:function(state){
         var obj=this;
         if(state)obj.animationID=setInterval(function() { 
             //your code
             },obj.speed);
         else {
             clearInterval(obj.animationID);
             }
         }
} 
```

开始

```
MyApp.setAnimation(true); 
```

停止

```
MyApp.setAnimation(false); 
```

# multithreading - VC++ 2010 Express 没有 std::thread 吗？

> ID：11496557
> 
> 赞同：2
> 
> 时间：2012-07-15T23:40:38.930
> 
> 标签：multithreading, visual-studio-2010, visual-c++

VC++ 2010 Express 没有 std::thread 吗？我正在使用多线程 DLL。编译器找不到头文件，也无法识别 std::thread::hardware_concurrency。是否有一些我需要修复的设置，或者它只是丢失了？（2012 年 7 月，最新和最伟大的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T23:42:40.963

`std::thread`是在相对较新的 C++11 中添加的。

VC++ 2010 不支持它。但是 VC++ 2012 应该有它。

# ruby-on-rails-3 - 具有嵌套形式和 globalize3 的 Ruby

> ID：11496560
> 
> 赞同：1
> 
> 时间：2012-07-15T23:41:44.710
> 
> 标签：ruby-on-rails-3, nested-forms, globalize3

自周三以来，我的 Web 应用程序出现了问题。我一直在尝试修复它，但我已经没有想法了。

所以，我创建了一个迷你 Ruby on Rails 应用程序，它重现了我的问题，让每个人都容易理解，并希望能帮助我解决问题：

[https://github.com/davidslvto/project-problem](https://github.com/davidslvto/project-problem)

我插入了一个屏幕截图，向您展示问题所在。

我真的无法解决这个问题，在真正的应用程序中，我没有 1 个嵌套资源，而是 4 个。我在 Rails 3.1.3 中创建了这个，因为我在 attr_accessible 中遇到了一些错误（实际上是导轨 3.2.6)

希望你们能帮助我，因为我现在真的很迷茫。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:08:59.593

我解决了这个问题。

第一个问题是我误解了 globalize_fields_for。第二个问题与嵌套资源有关，不知怎的，rails 没有得到关系，我不得不写它。

您可以在此提交中看到修复

[https://github.com/davidslvto/project-problem/commit/1681302ccd06ba96d882da88d599c753663ec46b](https://github.com/davidslvto/project-problem/commit/1681302ccd06ba96d882da88d599c753663ec46b)

希望这可以帮助某人。

# asp.net-mvc-4 - 如何在授权过滤器 MVC 4 之前执行操作过滤器

> ID：11496561
> 
> 赞同：9
> 
> 时间：2012-07-15T23:41:44.810
> 
> 标签：asp.net-mvc-4, custom-attributes

我通过从`AuthorizeAttribute`类继承在 MVC 4 中实现了我自己的自定义授权属性。我也有一个习惯`ActionFilterAttribute`。这些都可以正常工作，但问题在于订购它们。我需要在自定义授权过滤器之前运行自定义操作过滤器。

我曾尝试使用`Order`属性的属性，但据我了解，授权过滤器将始终在操作过滤器之前运行。

有谁知道如何强制操作过滤器在授权过滤器之前执行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T19:47:39.473

当您查看源代码（可在[http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)获得）时，您会发现标准过滤器类无法做到这一点。`IAuthorizationFilter`实现总是在实现之前`IActionFilter`执行。这是因为当授权过滤器返回结果时，操作过滤器不会运行。

要解决这个问题，您可以创建自己的`ControllerActionInvoker`后代类并覆盖该`InvokeAction`方法：

```
public class MyControllerActionInvoker : ControllerActionInvoker
{
    public override bool InvokeAction(ControllerContext controllerContext, string actionName)
    {
        // Your initialization code here
        try
        {
            return base.InvokeAction(controllerContext, actionName);
        }
        finally
        {
            // Your finalization code here
        }
    }
} 
```

您需要将自定义`MyControllerActionInvoker`类注入到自定义类中的控制器中`ControllerFactory`：

```
public class MyControllerFactory : DefaultControllerFactory
{
    private readonly MyControllerActionInvoker actionInvoker = new MyControllerActionInvoker();

    /// <summary>
    /// Retrieves the controller instance for the specified request context and controller type.
    /// </summary>
    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
    {
        var controllerInstance = base.GetControllerInstance(requestContext, controllerType);

        if (controllerInstance != null)
        {
            var typedController = controllerInstance as Controller;
            if (typedController != null)
            {
                typedController.ActionInvoker = this.actionInvoker;
            }
        }

        return controllerInstance;
    }
} 
```

当然，您现在必须`MyControllerFactory`使用 MVC 框架注册您自己的。您应该在注册路线的地方执行此操作：

```
var controllerFactory = new MyControllerFactory();
ControllerBuilder.Current.SetControllerFactory(controllerFactory); 
```

这个实现在这里工作得很好。

# android - 如何消除 dispatchTouchEvent 和子视图的 onClick 之间的延迟？

> ID：11496564
> 
> 赞同：2
> 
> 时间：2012-07-15T23:42:11.087
> 
> 标签：android, events, layout

我有一个自定义 View 子类，用于渲染我的图形，还有另一个 View 子类（实际上是 LinearLayout 的一个子类），有时用于覆盖图形信息。第二个视图包含一个 ImageView，我将其用作触发事件的按钮。

正如我已经实现的那样，在第一个视图接收 onTouchEvent 和在其子视图上调用 dispathTouchEvent() 和 ImageView 的 onClickListener 的 onClick() 被调用之间存在意外延迟。以下是相关代码：

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
    if ( getPopupRect().contains(event.getX(), event.getY()) )
    {
        // translate to relative coordinates
        PointF popupOrigin = getPopupPoint();
        event.setLocation(event.getX() - popupOrigin.x, event.getY() - popupOrigin.y);
        mPopup.dispatchTouchEvent(event);
    }
    ...
} 
```

在我触摸并释放“主”视图之前，不会调用子视图的 onClick() 方法。

问题：如何消除或最小化这种延迟，以便在合理的时间内调用 onClick() 而无需进一步的用户操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T14:46:53.197

问题在于“点击”既包含新闻，也包含发布事件。因此，除非您还释放按钮，否则您将永远不会收到点击事件。在子视图上使用 OnTouchListener，就像在父视图上一样 - 然后您将能够获得相同的事件。

# c# - 嗨，如何用后代 C# 中的后代解析 xml

> ID：11496570
> 
> 赞同：1
> 
> 时间：2012-07-15T23:42:41.700
> 
> 标签：c#, xml, parsing, linq-to-xml, descendant

我正在尝试解析此 xml 并可以成功获取名称和描述，但将图像放在一起很棘手。两种单独的代码解析都有效，但我想做一个解析，这样我就可以将它们全部绑定到一个列表框。

xml 看起来像这样

```
<stickers>
    <sticker>
        <imageData>
            <baseImageUrl> ... want this  </baseImageUrl>
            <sizes>
                <size>  don't care about this </size>
            </size>
            <imageUrlSuffix> ..want this </imageUrlSuffix>
        </imageData>
        <description>.... want this </description>
        <name>  --want this </name>
    <sticker>
<stickers> 
```

我的代码适用于两者但分开。我如何将其组合成一个解析...

```
XDocument streamFeed = XDocument.Load(new StringReader(response.Content));
var imagedata = from query in streamFeed.Descendants("sticker").Elements("imageData")
    select new Stickers
    {
        image = (string)query.Element("baseImageUrl") + "huge" + (string)query.Element("imageUrlSuffix"),
    };

var data = from query in streamFeed.Descendants("sticker")
    select new Stickers
    {
        name = (string)query.Element("name"),
        description = (string)query.Element("description"),   
    };

stickersListBox.ItemsSource = imagedata.Union(data); 
```

数据显示在列表框中，但标签在描述上方，而不是并排显示。

谢谢

* * *

感谢下面的 Thomas，以下代码有效，但一些用户配置文件得到空引用异常（包括我自己的配置文件，显然有数据） 感谢 Thomas 的帮助也许这是一个不相关的错误？

```
XDocument streamFeed = XDocument.Load(new StringReader(response.Content));

                    var query =
                        from sticker in streamFeed.Root.Descendants("sticker")
                        let imageData = sticker.Element("imageData")
                        select new Stickers
                        {
                            name = (string)sticker.Element("name"),
                            description = (string)sticker.Element("description"),
                            image = (string)imageData.Element("baseImageUrl") + "huge" + (string)imageData.Element("imageUrlSuffix")
                        };

                    stickersListBox.ItemsSource = query; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:08:07.733

如果我正确理解了这个问题，这应该可以满足您的要求：

```
XDocument streamFeed = XDocument.Load(new StringReader(response.Content));
var query =
    from sticker in streamFeed.Root.Elements("sticker")
    let imageData = sticker.Element("imageData")
    select new Stickers
    {
        name = (string)sticker.Element("name"),
        description = (string)sticker.Element("description"),   
        image = (string)imageData.Element("baseImageUrl") + "huge" + (string)imageData.Element("imageUrlSuffix")
    };

stickersListBox.ItemsSource = query; 
```

# php - 如何解码从 AppEngine 导出的原始协议缓冲区数据？

> ID：11496577
> 
> 赞同：1
> 
> 时间：2012-07-15T23:43:45.507
> 
> 标签：php, google-app-engine, protocol-buffers, decode

我已经使用 AppEngine 中的 appcfg.py 转储了我的整个数据库。结果是一个带有“结果”表的 SQLITE3 数据库。该表包含三个字段，一个键、一个数据和一个索引字段。数据字段包含实体数据和字段，但它都以协议缓冲区格式编码。我想将此原始协议缓冲区格式提取到一个数组或易于解析的东西中（最好在 PHP 中）。

我有 Python 中的原始实体模型结构。我已经检查了几个协议缓冲区库，但到目前为止我还没有找到一种方法来提取原始协议缓冲区数据。

在 PHP 中是否有任何简单的方法可以做到这一点？我不想生成和编码协议缓冲区；我想使用最简单/最简单的方式解码原始协议缓冲区数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T03:26:18.620

编码的协议缓冲区是协议缓冲区的一个实例，`Entity`在 Python SDK 中作为[google.appengine.ext.datastore.entity_pb 找到](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/datastore/entity_pb.py)。毫无疑问，有 PHP 协议缓冲区库，但您首先需要找到实体协议缓冲区定义的副本，并使用该库为它构造一个阅读器。使用 Python SDK 中的现有支持可能要简单得多，并编写一个简单的 Python 脚本来从协议缓冲区中提取相关字段并以您可以在 PHP 中轻松加载的格式输出它们。

要在 Python API 中解码协议缓冲区，请执行以下操作：

```
entity = entity_pb.EntityProto(contents=data) 
```

# c - 使用 FUSE 列出目录

> ID：11496581
> 
> 赞同：1
> 
> 时间：2012-07-15T23:45:03.727
> 
> 标签：c, filesystems, fuse, ext2

这是我一直在努力解决的一个问题，但没有任何进展。希望你能帮帮我！

我将 FUSE 安装在目录（'home/fsc'）中没有问题，甚至按以下方式列出它的父目录（/home）：

在 /home 上时 .. ls -l

并且操作 getattr 工作得很好。

当我打开目录（'cd fsc'）时出现问题，它正确打开并调试操作我可以看到 fuse 如何询问'/'文件属性，但是当我尝试列出该目录中的文件时，fuse 要求'/tls' 的属性在无限循环中总是收到错误'2'，'没有这样的文件或目录'，直到它断开连接。

我发现更奇怪的是，它从未像我预期的那样进入 readdir 操作。

关于为什么会发生这种情况的任何想法？为什么 fuse 要求 '/tls' 属性而不是执行 readdir of '/' ？

非常感谢您在这里的帮助，我需要一个解决方案来解决我需要尽快工作的大学项目，因此非常感谢您的帮助！

问候，

编辑：

我刚刚注意到它还要求在此循环期间提供 '/i686'、'/sse2'、'/cmov'、'/librt.so.1' 的文件属性，然后再次返回到 '/tls'

2.-编辑：

GETATTR 操作

```
int client_getattr(const char* c_ruta, struct stat* ptr_est_salida) {

int error = 0;
size_t size_structStat = sizeof(struct stat);
t_conexion* ptr_conexionLibre = poolConexion_obtenerConexion();
char out_key[50];
char s_stat[sizeof(struct stat)];
_ArmaKeyRC_fsc(c_ruta,GET_ATTR,out_key);

if (!strcmp((char*) configuracion_estadoRC(),"ON")){
    if (rc_get_static(out_key, s_stat, &size_structStat) != 0) {

        logger_info("Acierto en RC (Getattr) Se omite comunicacion con RFS...");
        // TODO
        return error;

    } else {

        logger_info("No hubo acierto en RC (Getattr) Inicia comunicacion con RFS...");
    }
}

error = nipc_invocar_getattr(ptr_conexionLibre, c_ruta, ptr_est_salida);

if (!error){
    logger_info("La operacion getattr fue realizada con éxito");

    if (!strcmp((char*) configuracion_estadoRC(),"ON")){
        logger_info("Almacenando getattr en RC...");

        _serializaStructStat(*ptr_est_salida,s_stat);
        rc_store(out_key, s_stat, sizeof(struct stat));
    }
}

poolConexion_conexionDisponible(ptr_conexionLibre);

return error; 
```

READDIR 操作

```
int client_readdir(const char* c_ruta, void* ptr_salida,
    fuse_fill_dir_t fn_llenadorDeElementosEnBuffer, off_t offset,
    struct fuse_file_info* ptr_est_infoArchivo) {

int error = 0;

t_conexion* ptr_conexionLibre = poolConexion_obtenerConexion();

if (!strcmp((char*) configuracion_estadoRC(),"ON")){
    if (rc_get(c_ruta) != 0) {

        logger_info("Acierto en RC (Readdir) Se omite comunicacion con RFS...");

        return error;

    } else {

        logger_info("No hubo acierto en RC (Readdir) Inicia comunicacion con RFS...");
    }
}

char** ptr_datos=NULL;
size_t cantidadLeida = 0;
error = nipc_invocar_readDir(ptr_conexionLibre, c_ruta,
        ptr_est_infoArchivo->fh, &ptr_datos, &cantidadLeida);
off_t filler_offset;

while (strcmp( ptr_datos[filler_offset],"")==0){
    fn_llenadorDeElementosEnBuffer(ptr_salida,(const char*) ptr_datos[filler_offset],NULL,0);
    filler_offset = filler_offset + 256;
}

if (!error){
    logger_info("La operacion readdir fue realizada con éxito");

    if (!strcmp((char*) configuracion_estadoRC(),"ON")){
        logger_info("Almacenando readdir en RC...");

        //char out_key[50];
        //_ArmaKeyRC_fsc(c_ruta, GET_ATTR, out_key);
        //rc_store(out_key, (char*) ptr_est_salida, sizeof(struct stat));
    }
}

poolConexion_conexionDisponible(ptr_conexionLibre);

return error; 
```

保险丝主

```
#include "fuse_interface.h"
#include <stddef.h>
#include <stdlib.h>
#include <fuse.h>
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <fcntl.h>
#include <time.h>
#include "cliente.h"

// Estructura auxiliar que se usa para pasarle parámetros
// por línea de comando a la función principal de FUSE
struct t_runtime_options {
    char* welcome_msg;
} runtime_options;

// Esta macro sirve para definir nuestros propios parámetros
#define CUSTOM_FUSE_OPT_KEY(t, p, v) { t, offsetof(struct t_runtime_options, p), v }

// Estructura de operaciones de FUSE, contiene
// punteros a las funciones que debe ejecutar FUSE
// según se solicite.

static struct fuse_operations client_operations = { .getattr = client_getattr,
        .readdir = client_readdir, .open = client_open, .read = client_read,
        .unlink = client_unlink, .release = client_release, .rmdir =
                client_rmdir, .truncate = client_truncate,
        .write = client_write, .create = client_create, .mkdir = client_mkdir, };

/** keys for FUSE_OPT_ options */
enum {
    KEY_VERSION, KEY_HELP,
};

//Esta estructura es utilizada para decirle a la biblioteca de FUSE que
// parametro puede recibir y donde tiene que guardar el valor de estos
static struct fuse_opt fuse_options[] = {

        // Este es un parámetro definido por la cátedra de SISOP
        CUSTOM_FUSE_OPT_KEY("--welcome-msg %s", welcome_msg, 0),

        // Estos son parametros por defecto que ya tiene FUSE
        FUSE_OPT_KEY("-V", KEY_VERSION), FUSE_OPT_KEY("--version", KEY_VERSION),
                FUSE_OPT_KEY("-h", KEY_HELP), FUSE_OPT_KEY("--help", KEY_HELP),
        FUSE_OPT_END, };

int main(int argc, char *argv[]) {

    if (argc < 2) {
        perror("FSC:falta indicar la ruta del archivo de configuracion");
        exit(-1);
    }

    char c_config[256];
    strcpy(c_config, argv[1]);

    cliente_iniciar(c_config);

    int fuse_argc = 3;
    char nombrePrograma[256];
    strcpy(nombrePrograma, argv[0]);
    char puntoMontaje[256];
    strcpy(puntoMontaje, configuracion_pathMontajeFS());
    char parametro[256];
    strcpy(parametro, "-f");

    char* fuse_argv[3];
    fuse_argv[0]=nombrePrograma;
    fuse_argv[1]=puntoMontaje;
    fuse_argv[2]=parametro;

    printf("Iniciando Fuse: Mount Point: %s", configuracion_pathMontajeFS());
    // Inicializo la estructura de argumentos de FUSE
    struct fuse_args args = FUSE_ARGS_INIT(fuse_argc, fuse_argv);

    // Limpio la estructura que va a contener los parametros
    memset(&runtime_options, 0, sizeof(struct t_runtime_options));

    // Esta funcion de FUSE lee los parametros recibidos y los intepreta
    if (fuse_opt_parse(&args, &runtime_options, fuse_options, NULL) == -1) {
        perror("Fuse dice: Argumentos Invalidos");
        return EXIT_FAILURE;
    }

    // Si se paso el parametro --welcome-msg
    // el campo welcome_msg deberia tener el
    // valor pasado
    if (runtime_options.welcome_msg != NULL) {
        printf("%s\n", runtime_options.welcome_msg);
    } else {
    }

    // Esta es la funcion principal de FUSE, es la que se encarga
    // de realizar el montaje, comuniscarse con el kernel, delegar las cosas
    // en varios threads
    return fuse_main(args.argc, args.argv, &client_operations, NULL);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T00:43:47.990

我认为这基本上与此[debian 错误报告 747941](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=747941)中描述的问题相同 ，它是动态库搜索路径问题。

# java - 有人可以帮我在单击时向 JAVA Jbutton 添加文本吗？

> ID：11496582
> 
> 赞同：2
> 
> 时间：2012-07-15T23:45:24.377
> 
> 标签：java, arrays, swing, jframe, jbutton

基本上，它给我一个关于在添加文本之前将“for”循环中的每个按钮声明为最终按钮的问题。当我这样做时，它给了我很多其他错误。有人可以帮我解决这个问题吗？

```
import java.awt.GridLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.*;

public class tictactoe {
    public static final int FRAME_WIDTH = 700;
    public static final int FRAME_HEIGHT = 200;
    public static void main(String[] args)          
    {
        int slots = 9;
        JButton[] gameButton = new JButton[9];

        JPanel ticTacToeBoard = new JPanel();
        ticTacToeBoard.setLayout(new GridLayout(3, 3));
        for (int i = 0; i < slots; i++)
        {

                gameButton[i] = new JButton();
                ticTacToeBoard.add(gameButton[i]);

                gameButton[i].addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                gameButton[i].setText("x");
            }
            });
        }

        JButton clearButtons = new JButton("New Game");
        JButton exit = new JButton("Exit");
        JPanel rightPanel = new JPanel();
        JLabel wonLabel = new JLabel();
        rightPanel.setLayout(new GridLayout(1, 3));
        rightPanel.add(wonLabel);
        rightPanel.add(clearButtons);
        rightPanel.add(exit);
        JFrame mainFrame = new JFrame();
        mainFrame.setSize(FRAME_WIDTH, FRAME_HEIGHT);
        mainFrame.setVisible(true);
        mainFrame.setLayout(new GridLayout(1,2));
        mainFrame.add(ticTacToeBoard);
        mainFrame.add(rightPanel);
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T23:52:18.153

尝试用这个替换动作监听器：

```
gameButton[i].addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            ((JButton)e.getSource()).setText("x");
} 
```

关于原来的错误：

任何使用但未在内部类中声明的局部变量、形式方法参数或异常处理程序参数都必须声明为 final。任何在内部类中使用但未声明的局部变量必须在内部类的主体之前明确分配（第 16 节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T19:09:43.103

只需添加：

```
String buttonText = "Click Me";
jButton.setText(buttonText); 
```

# javascript - getElementsByClassName - 在 2012 年可以安全使用吗？

> ID：11496587
> 
> 赞同：2
> 
> 时间：2012-07-15T23:46:56.513
> 
> 标签：javascript, dom

JavaScript[`getElementById`](https://developer.mozilla.org/en/DOM/Document.getElementById)可以使用，我知道。但是怎么样[`getElementsByClassName`](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)？浏览器对此有何支持？

通过谷歌，我找到了各种自制的解决方案，像[这样](http://robertnyman.com/2008/05/27/the-ultimate-getelementsbyclassname-anno-2008/)

正如你所看到的，这篇文章现在已经有四年了，这就是我问的原因。或者如果它可用，我应该只使用 jQuery 来处理类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T23:55:07.473

只需使用[`document.querySelectorAll(".classname")`](https://developer.mozilla.org/en/DOM/Document.querySelectorAll)

IE 8 支持它： http: [//www.caniuse.com/#search=queryselectorall](http://www.caniuse.com/#search=queryselectorall)

* * *

我写了一个垫片：

```
if (typeof document.getElementsByClassName !== 'function') {
    HTMLElement.prototype.getElementsByClassName = function (classname) {
        return this.querySelectorAll('.' + classname);
    };
} 
```

[http://jsfiddle.net/P3P5e/1/](http://jsfiddle.net/P3P5e/1/)

（在 Chrome 21 和 Opera 12.50 中测试和工作 [如果需要的话]，但在 Firefox 14 中没有。我不知道它是否在 IE 中工作，因为我没有 IE。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T00:00:57.203

首先，您必须确定您需要支持的 IE 版本：IE6、IE7、IE8？在不知道的情况下，我们无法真正提供最佳选项集。如果您只需要 IE9 及更高版本（某些模式下也需要 IE8），那么您可以使用`document.querySelectorAll(".classname")`or `document.getElementsByClassName("classname")`。

如果你需要其他版本的 IE，你不能走那条路。有`getElementsByClassName()`不到 30 行代码的 shims 可用于在旧版本的 IE 中为其提供支持，但在这一点上，我强烈建议您只获得一个选择器库，它可以完成所有跨浏览器支持为你。听起来您已经熟悉拥有这样一个库的 jQuery。如果您不想要/不需要 jQuery 的其余部分，您可以只获得一个选择器库。jQuery 在内部使用 Sizzle，它本身就可以使用，而且非常好。还有其他的。

这是一个很好的资源，您可以自行查找浏览器兼容性：http: [//caniuse.com/getelementsbyclassname](http://caniuse.com/getelementsbyclassname)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T23:50:54.617

IE 8不[支持](http://www.caniuse.com/#feat=getelementsbyclassname)。​​​​​​</p>

# ruby - Ruby gem 权限被拒绝 /var/lib/gems 使用 Ubuntu

> ID：11496591
> 
> 赞同：41
> 
> 时间：2012-07-15T23:47:16.060
> 
> 标签：ruby, ubuntu, gem

我正在尝试使用 Gem 安装 Rails，并从终端执行以下操作：

```
sudo apt-get install ruby-full build-essential
sudo apt-get install rubygems
export PATH=/var/lib/gems/1.8/bin:$PATH
gem install rails 
```

然后我收到以下消息：

> 错误：执行 gem 时 ... (Errno:EACCES) 权限被拒绝 - /var/lib/gems

我已按照[Ubuntu 帮助指南](https://help.ubuntu.com/community/RubyOnRails#Intro_Ubuntu_9.04_..._Apache2.2_tested_only)中的说明进行操作，并且正在使用 Oracle VM VirtualBox 在 Windows 7 下运行 Ubuntu 并拥有 RubyGems v1.8.15。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-15T23:54:59.063

您需要在`gem`命令前加上前缀，`sudo`因为`/var/lib/gems`它归`root`. 您还可以查看[RVM](https://rvm.io/)，它允许*非常*轻松地安装和管理 gems 和 Ruby 版本。最好的部分，这一切都在你的家庭目录中！

编辑：根据@AndrewMarshall 的评论，rbenv 是 RVM 的替代品。

# java - 片段数组上的 NullPointerException

> ID：11496593
> 
> 赞同：0
> 
> 时间：2012-07-15T23:47:22.880
> 
> 标签：java, android, arrays, nullpointerexception

数组的声明。

```
public ExerciseFragment[] fragments; 
```

初始化。

```
fragments = new ExerciseFragment[numberOfWorkouts]; 
```

最后，将每个片段设置为其各自的`ExerciseFragment`.

```
for (int i = 0; i < numberOfWorkouts; i++) {
        ft.add(LinearLayoutID, new ExerciseFragment(), "KEY"+i);
        fragments[i] = (ExerciseFragment) getFragmentManager().findFragmentByTag("KEY"+i);
    } 
```

为什么尝试访问 Fragments[] 我总是得到一个 NullPointerException 并且我已经搜索和搜索但没有运气，我找不到我出错的地方，希望一些新的眼睛可以！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:00:07.020

将其更改为：

```
for (int i = 0; i < numberOfWorkouts; i++) {
    fragments[i] = new ExerciseFragment();
    ft.add(LinearLayoutID, fragments[i], "KEY"+i);
} 
```

当您运行它时，它仍然会给出错误消息吗？

我认为 getFragmentManager() 可能会在您的问题中返回 null 。由于看不到getFragmentManager、ft的声明和赋值、findFragmentByTag的代码，所以不能确定。

# image - 文件名中的 HTML 实体：可能的地雷陷阱？

> ID：11496598
> 
> 赞同：0
> 
> 时间：2012-07-15T23:48:24.587
> 
> 标签：image, filesystems

当我考虑调整图像大小并在服务器上并行保存新大小时，我想到了以下问题：

```
// Original size
DSC_18342.jpg

// New size: Use an "x" for "times"
DSC_18342_640x480px.jpg

// New size: Use the real "×" for "times"
DSC_18342_640×480px.jpg 
```

关键是，如果你在文件名中使用 real而不是 an会*稍微*容易一些，因为该单元已经包含，这使得它更难阅读。`×``x``px``x`

> **问题：**在文件名中使用 Html 实体时，我会遇到什么问题？

*旁注：*我正在编写一个开源、公开可用的脚本，所以目标服务器可以是*任何东西*——因此我也对边缘案例感兴趣（并将投票赞成），我不知道。

谢谢你们！

* * *

您可能已经注意到，我知道，我可以简单地避免它（无论如何我都会这样做），但我对这个问题很感兴趣并了解它，所以请把上面的例子作为*可能的案例*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:44:42.240

有些文件系统根本不支持 unicode。如果您使 unicode 支持成为您的应用程序的要求，这可能不是问题。

[文件系统、Unicode 和规范化](http://developers.sun.com/global/products_platforms/solaris/reference/presentations/IUC29-FileSystems.pdf)中给出了关于不同 unicode 文件系统的一些考虑。

结束语（从 solaris 文件系统的角度来看）是：

> 由于固有的差异，与所有其他现有 Unicode 文件系统的完全兼容性和无缝互操作性似乎不是 100% 可能的。

我可以想象会出现问题，尤其是在迁移应用程序时。仅存储文件可能没有问题，但如果它们的名称存储在数据库中，则迁移后可能会出现不匹配。

# blender - Wavefront .obj 文件的规格是什么？

> ID：11496599
> 
> 赞同：23
> 
> 时间：2012-07-15T23:48:35.193
> 
> 标签：blender, wavefront

我想为 Blender 的 .obj 文件编写一个解析器。文件格式似乎不言自明，但似乎也缺少一些数据。例如，一个简单的立方体（默认的 Blender 立方体）有 8 行顶点，但我期望看到 36 行（12 个三角形组成一个立方体）。

我认为，至少对我来说，这种困惑源于在 direct3d 中创建立方体的方式。Direct3d 需要 36 个顶点来形成一个立方体。所以我认为我需要推断其他 28 个顶点。当尝试解析更复杂形状的顶点时，这种类型的猜测可能会导致问题。所以，我想如果我能找到有关文件格式的官方规范，它可能会为我提供一些关于如何解释数据的见解。

之前似乎有人问过同样的问题：[如何从 DCC 工具（如 Blender）中获取 OBJ 文件中适当数量的顶点以用于 OpenGL ES？](https://stackoverflow.com/questions/5054239/how-to-get-proper-number-of-vertices-in-obj-file-from-dcc-tools-such-as-blender) 但它对我没有任何有用的信息。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-15T23:53:40.143

[OBJ 规范](http://www.martinreddy.net/gfx/3d/OBJ.spec)

[MTL 规范](http://www.fileformat.info/format/material/)（你可能在某些时候也想要这个）

FYI OBJ 与 Blender 没有任何关系，它只是简单模型的常用文件格式。

# algorithm - 树划分（基于算法）

> ID：11496604
> 
> 赞同：0
> 
> 时间：2012-07-15T23:49:23.653
> 
> 标签：algorithm

这是一家公司提出的编码问题：

> 给定一棵具有 N 个节点的树，并且给定与每个节点和边相关的权重（存在于树中）。您必须删除一条边，以使所创建的两棵树的权重之和之差最大。

输入：

> 第一行包含 N 个编号。节点的第二行包含 N 个整数，表示每个节点的权重，然后是 N-1 行显示存在的边缘。

输出：

> 创建树的最大权重差。

例子：

输入：

第一个测试用例：

```
3
8 7 8
10
21 
```

输出：`7`

第二个测试用例：

```
9
5 5 4 1 8 8 3 5 2
10
20
31
41 
53 
60
75
81 
```

输出：（`13`不确定这个输出）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:59:50.433

如果权重不能为负，那么很明显最佳解决方案将是切掉一片叶子。假设树的总权重为***S***，我们可以在***O(n)***中找到它，如下所示：

1\. *ans* := 0
2\. 对于每个顶点*v*，*ans* := *max* ( *ans* , *abs* ( *S* - 2 * *weight* [ *v* ] )) // 剩余部分和叶子的区别
3\. return *ans*

# mysql - 如何从 MySQL 表中删除重复值

> ID：11496614
> 
> 赞同：2
> 
> 时间：2012-07-15T23:51:05.770
> 
> 标签：mysql, sql

我正在寻找查询，删除所有重复值。

```
Example Table:

1 ABC
2 BBB
3 DAC
4 ABC
5 AAA
6 ABC

output required

1 ABC
2 BBB
3 DAC
5 AAA 
```

感谢您的帮助，我谷歌它找不到确切的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T23:59:43.693

如果要对`DELETE`重复值进行实际操作（同时保留具有最低值的值`id`），可以使用多表`DELETE`语法：

```
DELETE a FROM tbl a
LEFT JOIN
(
    SELECT MIN(id) AS id, name
    FROM tbl
    GROUP BY name
) b ON a.id = b.id AND a.name = b.name
WHERE b.id IS NULL 
```

* * *

## 查看操作[演示](http://sqlfiddle.com/#!2/92119/1/0)_`DELETE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T23:59:03.800

在此处查看@fvu 答案：[https ://stackoverflow.com/a/11249235/1166147](https://stackoverflow.com/a/11249235/1166147)

您可以创建一个`unique index`将**删除重复项并同时防止将来出现重复项**（MySQL 5.1 或更高版本）：

```
ALTER IGNORE TABLE 'YOURTABLE' 
ADD UNIQUE INDEX somefancynamefortheindex (Col1ID, Col2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T23:59:15.653

假设`Tab`您的表的名称包含重复项，请创建一个`Tab_TMP`具有相同结构的临时表`Tab`。

```
-- assuming `Tab` has same schema
CREATE TABLE Tab_TMP (
  id INT(2) PRIMARY KEY,
  name VARCHAR(8)
); 
```

填写`Table_TMP`所有`Table`条目。

```
INSERT INTO Tab_TMP(id, name) SELECT id, name FROM Tab; 
```

从 中删除条目`Table`。

```
DELETE FROM Tab; 
```

从使用中插入`Table`条目。`Table_TMP``SELECT DISTINCT`

```
INSERT INTO Tab(name) SELECT DISTINCT name FROM Tab_TMP; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-28T07:19:56.887

1.  在文件中加载不同的数据并删除或删除您的表

SELECT DISTINCT col1,col2,col3,..coln FROM 表名 INTO OUTFILE 'yourFilePathWIthFileName'

例如：SELECT DISTINCT username,usernumber,usersalary,dateOFJoining,timeofJoining,datetimeOfJoining FROM asdf INTO OUTFILE 'C:/Users/ahmed.m/Desktop/modify.txt';

1.  从文件中创建您的表结构 laod 数据

LOAD DATA INFILE 'yourFilePathWIthFileName' INTO TABLE tableName 例如：LOAD DATA INFILE 'C:/Users/ahmed.m/Desktop/modify.txt' INTO TABLE asdf

# javascript - 根据其他选择列表值显示隐藏选择列表

> ID：11496615
> 
> 赞同：1
> 
> 时间：2012-07-15T23:51:26.867
> 
> 标签：javascript

以下代码根据父选择列表的值显示一个（许多隐藏的）子选择列表。该脚本检查是否选择了任何值（在父选择列表中），如果是，则显示相应的子选择列表。但是，如果用户为父选择列表选择一个值，发布表单，得到一条消息，即子选择列表错过输入并且（很可能）在浏览器中按下后退按钮，父选择列表仍然有一个值（我猜浏览器默认）并且子选择列表是隐藏的，这很可能会使用户感到困惑。

如何解决？

Javascript：

```
 $('#parent-list').live("change",function() {
        var value = $(this).find('option:selected').val();
        $("#child-list-"+value).slideDown(200).siblings().hide();
        return false;
    }); 
```

HTML：

```
<select id="parent-list" name="parent">
  <option value="1">1</option>
  ...
</select>
<select id="child-list-1 style="display:hidden">
   <option value="a">a</option>
</select>
<select id="child-list-2 style... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T23:55:08.643

我通常在每次页面加载时选择适当的选项，通过生成 HTML 的代码或在文档准备好时在 JavaScript 中选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:53:23.063

我认为这是一个普遍的问题，据我所知，没有完美的解决方案。

您需要找到某种方法来检查页面是否处于无效状态，例如`setInterval`可以检查任何依赖关系并在必要时重新渲染的刷新计时器 ()。

如果用户在 POST 后按下后退按钮，他会收到警告（至少在某些浏览器中）。虽然你不能相信用户意识到这个问题......

编辑：另外，为什么用户被重定向到另一个页面以获取错误消息？如果发生错误，您是否可以将他重定向回表单，或者最好在提交表单之前执行验证客户端？

# c - C：字符串连接：空终止字符串

> ID：11496624
> 
> 赞同：1
> 
> 时间：2012-07-15T23:53:39.343
> 
> 标签：c, pointers, null-terminated

以下代码仅连接第一个字符串并忽略第二个字符串。从我收集的内容来看，它与 Null 终止的字符串有关。因为我是 C 新手，所以这对我来说是一个新概念。有人可以帮助使下面的代码工作吗？这对我理解这一点真的有很大帮助。

```
void concatTest();

int main()
{
    concatTest();

    system("PAUSE");
    return 0;
}

void concatTest()
{
    char string1[20], string2[20], string3[40];
    char *ptr1, *ptr2, *ptr3;
    ptr1 = &string1[0];
    ptr2 = &string2[0];
    ptr3 = &string3[0];
    int i;

    printf("You need to enter 2 strings.. each of which is no more than 20 chars in length: \n");

    printf("Enter string #1: \n");
    scanf("%s", string1);

    printf("Enter string #2: \n");
    scanf("%s", string2);

    int len1 = strlen(string1);
    int len2 = strlen(string2);

    for (i = 0; i < len1; i++)
    {
        ptr3[i] = ptr1[i];
    }
    for (i = len1; i < len1 + len2; i++)
    {
        ptr3[i] = ptr2[i];
    }

    printf("%s\n", string3);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T23:55:45.927

我的答案将没有代码，但希望是一个有用的解释。

C 中的每个字符串都以 . 结尾`\0`。

如果要连接两个字符串，则需要确保用第二个字符串的*第**一个字符覆盖第*一个字符串的最后一个字符 (the `\0`) 。否则，无论“连接”字符串有多长，只要字符串函数遇到 a ，它就会假定已经到达字符串的末尾。*`\0`*

 *当然，您需要确保为关节字符串分配了足够的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T23:59:30.707

您正在`ptr2[i]`使用`i`从`len1`到的范围进行索引`len1 + len2`。该值可能会超出`string2`数组的范围（除非您键入的第一个字符串恰好为空）。

我可能会按如下方式编写您的第二个循环：

```
for (i = 0; i < len2; i++) {
    ptr3[len1 + i] = ptr2[i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T00:05:50.417

您必须从 ptr2 的第一个字符开始。

```
ptr3[i] = ptr2[i-len1]; 
```

> 据我所知，它与 Null 终止的字符串有关。

是的，它确实。字符串从偏移量 0 开始。根据第一个字符串的长度，您从某个随机点开始。*

# actionscript-3 - 从数组中随机化 as3 中的按钮

> ID：11496627
> 
> 赞同：0
> 
> 时间：2012-07-15T23:53:46.373
> 
> 标签：actionscript-3, flash

我是刷 5.5 的新手，我正在尝试为我的小学生建立一个测验。到目前为止，我已经完成了布局，创建了图像按钮，并且我使用 as3 来推进测验。

所以我正在寻找的是洗牌图像按钮/答案的能力。这是我到目前为止所拥有的示例。

```
 the red ______

apple (button of apple)       boy (button of boy)     pineapple (button with pineapple) 
```

在我的例子中，图片是按钮，正确答案是苹果。经过数小时的谷歌搜索，我试图创建一个数组。这是我的代码，我做错了什么，但我不知道是什么。请帮忙。

请帮忙。

```
function Main() {

var button:Array = [];
button.push("choice1");
button.push("choice2");
button.push("choice3");
ShuffleArray(button); 
trace(button);

}
function ShuffleArray(button:Array)
{

for (var i:int = button.length-1; i >=0; i--)
{

var randomIndex:int = Math.floor(Math.random()*(i+1));
var itemAtIndex:Object = button[randomIndex]; 
button[randomIndex] = button[i];
button[i] = itemAtIndex; 
```

提前致谢。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:42:18.370

尝试更多类似的东西：

```
protected var button:Array=[choice1, choice2, choice3];//note no quotes, puts in the actual objects
function Main() {
   super();
   randomArray=shuffleArray(button);
   var prevX:int = 0;
   var space:int = 10;
   //places the buttons from left to right in the order
   //they were in the random array
   //uses existing y
   for (var i:int=0; i<randomArray.length; i++) {
      var btn:DisplayObject = randomArray[i] as DisplayObject;
      btn.x = prevX;
      prevX = btn.x + btn.width + space;
   }
}

protected function shuffleArray(inArray:Array):Array {
   //create copy of array so as not to alter it
   var tempArray = new Array().concat(inArray);
   //resultarray (we'll be destroying the temp array)
   var resultArray:Array = [];
   while(tempArray.length>0) {
      var index:int = int(Math.random() * tempArray.length);
      //delete object from random location and put it into result array
      resultArray.push(tempArray.splice(index, 1)[0]);
   }
   return resultArray;
} 
```

请注意，这假设您正在使用文档类，并且您的按钮已经在舞台上的相同 y 位置。

# ios - 创建常见的故事板场景xcode

> ID：11496630
> 
> 赞同：0
> 
> 时间：2012-07-15T23:54:02.620
> 
> 标签：ios, xcode, xcode-storyboard

在使用故事板进行`iOS`开发时，您将如何为每个场景创建一个共同的背景？据我所知，我必须为每个新场景复制和粘贴常用元素。

谢谢，亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:08:21.927

您可以创建一个 BaseViewController 并以编程方式在其中添加所有其他 VC 的通用详细信息，并从中派生所有其他 VC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:36:33.877

我不认为你可以在 InterfaceBuilder 中做到这一点，但[`UIAppearance`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIAppearance)它似乎是为这类事情设计的。谷歌它或查看[WWDC 2011 会议 114](https://developer.apple.com/videos/wwdc/2011/?id=114)。

# mysql - 多选以插入 1 列和 1 个结果

> ID：11496636
> 
> 赞同：0
> 
> 时间：2012-07-15T23:55:35.593
> 
> 标签：mysql

```
SELECT 
    C.CompanyId, 
    CompanyName, 
    Server, 
    ServerUsers, 
    ServerUptime, 
    ServerHostName, 
    ServerType 
FROM 
    CUSTOMERS AS C
INNER JOIN 
    USERS ON C.CompanyId = USERS.CompanyId
WHERE 
    USERS.UserEmail='matt' AND 
    USERS.UserPin='5153' AND 
    (SELECT Status FROM 4321_BlackBerryServices LIMIT 0,1)
LIMIT 0, 8 
```

目前我的桌子在下面

```
 4321    T1 Solutions    EXCH-01 392 47 days, 17 min exch01.myCorp.com   ExchangeServices
        4321    T1 Solutions    EXCH-02 685 47 days, 17 min exch02.myCorp.com   ExchangeServices
        4321    T1 Solutions    Lync-01 368 47 days, 17 min lync01.myCorp.com   LyncServices
        4321    T1 Solutions    Lync-02 890 458 days, 58 min    lync02.myCorp.com   LyncServices 
```

我想做的是添加 Status FROM 4321_BlackBerryServices 的最后一个结果，所以我想为我的表中的每个服务器添加最新状态

这怎么可能 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:03:10.137

如果我了解您的需求，请尝试以下操作：

```
SELECT 
    C.CompanyId, CompanyName, Server, ServerUsers, 
    ServerUptime, ServerHostName, ServerType, 
    (SELECT Status FROM 4321_BlackBerryServices 
     ORDER BY field_you_know DESC LIMIT 0,1) AS BBS_Status
FROM CUSTOMERS AS C
INNER JOIN USERS 
    ON C.CompanyId = USERS.CompanyId
   AND USERS.UserEmail = 'matt' 
   AND USERS.UserPin = '5153'
LIMIT 0, 8 
```

在我的查询`field_you_know`字段中，您知道您可以对表格进行排序以获取最后一个。

# python - python：递归检查以确定字符串是否为回文

> ID：11496637
> 
> 赞同：4
> 
> 时间：2012-07-15T23:55:38.080
> 
> 标签：python, string, recursion

我的任务是定义一个过程 is_palindrome，它将一个字符串作为输入，并返回一个布尔值，指示输入字符串是否是回文。在这种情况下，单个字母应返回 True，空字符串也应返回`''`。

不幸的是，我没有得到预期的结果。我很感激帮助。

我的代码版本 1：

```
def is_palindrome(s):
    if s == '':
        return True
    else:
        if (ord(s[0]) - ord(s[len(s)-1])) == 0:
            is_palindrome(s[1:len(s)-1])
        else:
            return False

print is_palindrome('')
#>>> True    (expected = True)

print is_palindrome('abab')
#>>> False    (expected = False)

print is_palindrome('abba')
#>>> None    (expected = True)

print is_palindrome('andrea')
#>>> None    (expected = False)

print is_palindrome('abaaba')
#>>> None    (expected = True) 
```

我通过调试器跟踪我的代码，看起来逻辑是正确的，因为代码采用了适当的路径。但是，对于上面突出显示的某些情况，最终结果似乎切换为“无”。

如果我将代码更改为以下内容：

我的代码版本 2：

```
def is_palindrome(s):
        if s == '':
            result = True
        else:
            if (ord(s[0]) - ord(s[len(s)-1])) == 0:
                is_palindrome(s[1:len(s)-1])
            else:
                result = False
        return result

print is_palindrome('')
#>>> True    (expected = True)

print is_palindrome('abab')
#>>> False    (expected = False)

print is_palindrome('abba')
#>>> Error    (expected = True)
UnboundLocalError: local variable 'result' referenced before assignment 

print is_palindrome('andrea')
#>>> Error   (expected = False)         
UnboundLocalError: local variable 'result' referenced before assignment

print is_palindrome('abaaba')
#>>> Error    (expected = True)
UnboundLocalError: local variable 'result' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T00:01:23.960

在您的第一个示例中，您忘记了 return 语句：

```
def is_palindrome(s):
    if s == '':
        return True
    else:
        if (ord(s[0]) - ord(s[len(s)-1])) == 0:
            # v-- forgot this here
            return is_palindrome(s[1:len(s)-1])
        else:
            return False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T00:00:53.633

```
 is_palindrome(s[1:len(s)-1]) 
```

需要是...

```
 return is_palindrome(s[1:len(s)-1]) 
```

在您的第一个版本中，或

```
 result = is_palindrome(s[1:len(s)-1]) 
```

在你的第二个。否则，您永远不会真正将递归调用的返回值传播回原始调用者。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T09:43:24.110

```
# ask user to enter any string
a = raw_input("Enter the string : ")
#palindrome check
print (a == a[::-1]) and "String is palindrome" or "String is not palindrome" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T00:10:20.063

```
def is_palindrome(s):
    if not s:
        return True
    else:
        return s[0]==s[-1] and is_palindrome(s[1:-1]) 
```

或者，如果您想要单线：

```
def is_palindrome(s):
    return (not s) or (s[0]==s[-1] and is_palindrome(s[1:-1])) 
```

希望有帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-16T00:11:57.033

让我们逐行执行您的第二个示例：

```
def is_palindrome(s): 
```

在这种情况下，让我们让 s = "abba"，这是您遇到错误的第一个字符串：

```
 if s == '': 
```

被评估为

```
 if 'abba' == '': 
```

也就是说`False`，所以我们跳到`else`：

```
 else:
            if (ord(s[0]) - ord(s[len(s)-1])) == 0: 
```

该`if`语句等价于：

```
 if (97 - 97) == 0: 
```

它是`True`，所以递归发生了：

```
 is_palindrome(s[1:len(s)-1]) 
```

或者

```
 is_palindrome('bb') 
```

现在无论这个递归的结果是什么，我们都忽略它，因为没有保存返回值。因此，当我们到达这一行时：

```
 return result 
```

我们从来没有定义什么`result`是，所以 Python 翻了出来。

其他海报已经很好地回答了您的问题。我发帖是为了证明跟踪程序以查找/修复错误的重要性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-05T04:52:16.397

爪哇的回答

```
public class Varios {

/**
 * @param args the command line arguments
 */
  public static void main(String[] args) {
    System.out.println( pali("anitalavalatina"));
  }
  static boolean pali(String palabra){
    System.out.println(palabra);
    if (palabra.length()-1<2) 
            return true;
    if(palabra.charAt(0)!=palabra.charAt(palabra.length()-1)) return false;
    return pali(palabra.substring(1,palabra.length()-1));
  }

} 
```

# php - 文本旋转属性在 PHP 的电子邮件正文中不起作用

> ID：11496638
> 
> 赞同：0
> 
> 时间：2012-07-15T23:55:38.853
> 
> 标签：php, css, email, html-email

我有一个设置`text-transform`为轮换的电子邮件正文。问题是当电子邮件从 PHP 网站发送到收件箱时，文本没有旋转，而是显示纯文本。这是我的电子邮件正文代码：

```
// Birthday wish email body parameters
$name = "website Support";
$email = "website@website.com";
$rec = website@website.com;
$sub = "Happy Birthday !";
$body = '<div style="width:150px; margin-left:200px; margin-top:280px; color:#FE923C;font-size:20px; transform:rotate(8deg);-ms-transform:rotate(8deg);-moz-transform:rotate(8deg);-webkit-transform:rotate(8deg);-o-transform:rotate(8deg);"><b>First Name</b></div>';
$header='Content-type: text/html; charset=iso-8859-1' . "\r\n"; 
$header .= "From: $name < ". $email ." >";
mail($rec,$sub,$body,$header); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:58:45.693

许多电子邮件客户端/服务不支持 CSS 转换属性 - [http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:24:33.910

我注意到两个小错误：

```
$rec = "website@website.com";
$header .= "From: $name < ". $email ." >\r\n"; 
```

您提供的 html 可以在我的浏览器中使用。

在我正在使用的 Outlook 2003 中编辑或查看 HTML 时，您的权利不会旋转。也许 Outlook 2003 是一个太早的电子邮件客户端版本，无法支持翻译。

Outlook 2003 默认使用 microsoft word 编辑其 html - 如果我在选项中取消选中此选项，那么我似乎无法再编辑 HTML，查看下的“HTML 源”选项（您可以使用添加到工具栏自定义）消失，但这并不重要。我听说 Outlook 2003 在查看电子邮件时使用 Internet Explorer 呈现 html，但是我可以确认，当我查看使用 Outlook 中的 MS-Word 编辑器编辑 HTML 源时发送给自己的电子邮件时，文本没有旋转。我怀疑它可能使用 word 来查看电子邮件中的 HTML，也许这是 Office 2003 的补丁/更新。

Outlook 2007/2010 使用 microsoft word（microsoft office 的一部分）来呈现其 HTML。

如果您查看此链接：

```
http://msdn.microsoft.com/en-us/library/aa338201.aspx#Word2007MailHTMLandCSS_Introduction 
```

您会看到 word 2007 没有将“transform”css 属性列为受支持的属性。

也看看[http://www.fixoutlook.org/](http://www.fixoutlook.org/)

从该站点可以看出，有些人希望 Outlook 支持全套 HTML/CSS。

您可以做的是在电子邮件中有一个用户可以单击的链接，当他们单击该链接时，它可以在浏览器中打开，并且旋转应该在那里工作。

另一种可能性是将 .html 文件作为附件。当我在 Outlook 2003 中收到一个 .html 附件时，如果我双击它，它会在 Firefox 浏览器中打开。

然而，在outlook word viewer 中总是有可能会打开一个.html 附件，在outlook 2010/2007 中，您必须尝试一下。甚至一个链接也可以在单词查看器中打开，可能 - 尽管希望不会。

# cakephp - 在 CakePHP 中缓存控制器动作

> ID：11496642
> 
> 赞同：0
> 
> 时间：2012-07-15T23:55:48.800
> 
> 标签：cakephp, caching, controller, cakephp-2.0

我需要缓存我的控制器操作之一。我将“ `Cache`”添加到我的 $`helpers`变量中。而我的动作是这样的：

```
 public function myAction($name) {
   $this->cacheAction = '10 minutes';
   //some code
  } 
```

我运行此操作，然后添加了一行`echo`. 并再次运行。但是结果变得不同了，尽管动作被缓存了。我该如何调试这个问题？

我检查了[这个](http://book.cakephp.org/2.0/en/core-libraries/helpers/cache.html#cachehelper)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:09:23.403

`Configure::write('Cache.check', true);`取消注释`app/Config/core.php`

此外，我不确定在动作本身中这样做是否会奏效。如果它没有将它作为类变量添加到您的控制器中。

```
public $cacheAction = array(
    'myAction' => '10 minutes',
); 
```

# python - 需要一些想法如何在 Django 中进行删除（BooleanField）

> ID：11496643
> 
> 赞同：0
> 
> 时间：2012-07-15T23:56:02.527
> 
> 标签：python, database, django

我正在尝试这样做：在我的网站中，我有一些来自数据库的数据，如下所示：

```
Math 140
Math 141
CS 320
CS 240 
```

我想这样做：当您选中复选框并按删除时，此主题将从数据库中删除。

```
Math 140 []
Math 141 []
CS 320 []
CS 240 [] 
```

模板.html

```
 <div id="subjects-list">
        {% if user.username %}
            <ul>
                {% if subjects %}
                    {% for subject in subjects %}
                        <li>{{ subject.name }} 
                    {% endfor %}
                {% else %}
                No Subjects for this user
                {% endif %}
            </ul>
        {% else %}
                You are in else
        {% endif %}
    </div> 
```

模型.py

```
class Subjects(models.Model):
    """ Subject Database """
    name = models.CharField(max_length=64, unique=False) #Subject Names on left-menu 
    user = models.ForeignKey(User, unique=False)

    def __unicode__(self):
        return '%s %s' %(self.name, self.user.username) 
```

视图.py

```
@login_required
def user_page(request, username):

    user = get_object_or_404(User, username=username)

    ''' Form in the left-menu to create a new subject '''
    if 'subject-create-b' in request.POST:
        subject_form = SubjectCreationForm(request.POST)
        if subject_form.is_valid():
            subject = Subjects.objects.get_or_create(name = subject_form.data['name'],
                                                     user = user)
            return HttpResponseRedirect('.') # redirect to the same page
                                             # later have to be substituted with AJAX
    else:
        subject_form = SubjectCreationForm()

    # Filter Subjects table by currently logged in user
    subjects = Subjects.objects.filter(user__exact = user)

    return render_to_response('user_page.html',
                              {'subject_creation_form': subject_form,
                               'subjects': subjects,
                               'user': request.user,
                              },
                              context_instance=RequestContext(request)) 
```

所以我的问题基本上是我该怎么做？

我是否需要添加新表格，而不是将其放在“

*   {{ subject.name }}"。如果是，我怎么知道这个特定的盒子必须删除这个特定的数据对象？

    或者我是否需要向 mymodels 添加一些新列，如果选中复选框 - 将此列切换为 true，然后在视图中删除所有在新列中为 true 的行。

    或者您可以提出一些更好的技术。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:38:17.747

您忘记列出表单的代码。

您可以使用带有“选择”的 MultipleChoiceField 作为您的查询集，并使用 CheckboxSelectMultiple 小部件列出带有复选框的课程。然后，您可以从表格中获取要删除的课程。

# html - 如何让 CSS 选择以字符串开头的 ID（不是在 Javascript 中）？

> ID：11496645
> 
> 赞同：245
> 
> 时间：2012-07-15T23:56:14.103
> 
> 标签：html, css, css-selectors

如果 HTML 有这样的元素：

```
id="product42"
id="product43"
... 
```

如何匹配所有以“产品”开头的 id？

我已经看到完全使用 javascript 执行此操作的答案，但是如何仅使用 CSS 来执行此操作？

* * *

## 回答 #1

> 赞同：445
> 
> 时间：2012-07-15T23:58:57.283

```
[id^=product] 
```

`^=`表示“开始于”。反之，`$=`表示“以”结尾。

这些符号实际上是从 Regex 语法中借用的，其中`^`和`$`分别表示“字符串开头”和“字符串结尾”。

有关完整信息，请参阅[规格](http://www.w3.org/TR/css3-selectors/#attribute-substrings)。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2012-07-15T23:58:09.230

我会这样做：

```
[id^="product"] {
  ...
} 
```

理想情况下，使用一个类。这就是类的用途：

```
<div id="product176" class="product"></div>
<div id="product177" class="product"></div>
<div id="product178" class="product"></div> 
```

现在选择器变为：

```
.product {
  ...
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-15T23:58:25.740

使用[属性选择器](http://www.w3.org/TR/css3-selectors/#attribute-selectors)

```
[id^=product]{property:value} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-26T11:30:47.387

我也想分享这个解决方案，也许将来它可以帮助某人。
正如其他人所说，您可以`[id^=product]`为`id`

但是我们也可以举一个例子`class`： `[class^="product-"]`这表明类以产品开头，也`*`像这样`[class*="product-"]`

这是一个简单的例子：

```
/* Icons */
[class^="icon-"], [class*=" icon-"] {
  /* use !important to prevent issues with browser extensions that change fonts */
  font-family: 'mk-font' !important;
  font-size: 3em;
} 
```

祝你好运 ...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-15T10:55:54.847

我注意到还有另一个 CSS 选择器可以做同样的事情。语法如下：

```
[id|="name_id"] 
```

这将选择以双引号括起来的单词开头的所有元素 ID。

# android - 收到我无法修复的语法错误

> ID：11496646
> 
> 赞同：0
> 
> 时间：2012-07-15T23:56:17.100
> 
> 标签：android, syntax, curly-brackets

我正在使用以下代码来尝试捕获音频播放器可能发生的所有错误。但是，最后一个大括号会产生语法错误。谁能告诉我为什么？

它说：“语法错误，插入'}'来完成ClassBody”

代码：

```
public void audioPlayer(String path, String fileName){
    //set up MediaPlayer    
    MediaPlayer mp = new MediaPlayer();

    try {
        mp.setDataSource(path+"/"+fileName);
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        mp.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    mp.start();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:33:21.420

mp.start() 可以抛出一个您没有捕获或允许抛出的 IllegalStateException。

根据：http: [//developer.android.com/reference/android/media/MediaPlayer.html#start%28%29](http://developer.android.com/reference/android/media/MediaPlayer.html#start%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:31:35.447

此错误已由 ADT 团队修复：[http](http://code.google.com/p/android/issues/detail?id=33985) ://code.google.com/p/android/issues/detail?id=33985 它应该很快就会发布。

清理项目实际上解决了问题。

# php - 将变量写入文件 PHP

> ID：11496657
> 
> 赞同：1
> 
> 时间：2012-07-15T23:58:43.270
> 
> 标签：php

当我执行这个：

```
$filename = "test.php";
$content = "<?php $variable = 35 ?>";
file_put_contents($filename,$content); 
```

该文件包含以下内容：

```
<?php  =35?> 
```

我怎样才能让它包含 $variable ？

另外，如何在不覆盖现有数据的情况下将其附加到文件顶部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T23:59:47.890

使用单引号来防止 PHP 尝试插入`$variable`.

```
$content = '<?php $variable = 35 ?>'; 
```

最后，您将通过使用[`fopen()`](http://php.net/fopen)并传递`'a'`模式将其附加到文件中，该模式将附加到文件的底部

要附加到顶部，它有点复杂。据我所知，您必须读取整个文件并将旧内容连接到新内容的末尾。

# javascript - 树形子菜单，点击功能需要两个独立的粗体

> ID：11496660
> 
> 赞同：1
> 
> 时间：2012-07-15T23:59:06.083
> 
> 标签：javascript, html

在我在[http://www.wrcc.dri.edu/monitor/WWDT/index.php](http://www.wrcc.dri.edu/monitor/WWDT/index.php)看到的树形菜单中，有没有一种方法可以使变量子菜单和区域子菜单相互独立，以便在单击时变粗...因此，例如，如果我单击 PDSI，我希望它变为粗体，然后如果我单击 Arizona，我希望它也变为粗体。当用户点击它时，我希望变量和区域都是粗体。这使得用户只需查看树形菜单就更容易知道他/她点击了什么。现在，只有活动的或最近单击的变量/区域变为粗体。

您可以查看我的源代码并看到我现在拥有：

```
<script type="text/javascript">
$(function () {
    $('#variable').find('a').each(function () {
        if (this.href == location.href) {
            $(this).addClass('Active');
        } else {
            $(this).removeClass('Active');
        }
    });
});
</script>

<script type="text/javascript">
$(function () {
    $('#region').find('a').each(function () {
        if (this.href == location.href) {
            $(this).addClass('Active');
        } else {
            $(this).removeClass('Active');
        }
    });
</script> 
```

# java - Java如何在布局中添加图像作为背景

> ID：11496662
> 
> 赞同：4
> 
> 时间：2012-07-15T23:59:14.640
> 
> 标签：java, swing, jpanel, paintcomponent, cardlayout

我有一个使用 CardLayout 的类，它有两张卡片，上面有一个按钮。我想做的是在 Windows 中放置一个类似于背景的图像，例如桌面背景。该程序最终将有几张不同的卡片，我希望能够在每张卡片上放置不同的背景。我已经尝试了在该站点上其他类似问题中提出的许多建议，以及通过谷歌搜索可以找到的任何建议，但我似乎无法让它发挥作用。我知道使用 CardLayout 我不能将面板放在面板顶部，因此将图像放在 JPanel 上是行不通的。所以我的问题是，根据下面发布的代码，有没有更好的方法来设置我的布局，以便它更好地工作，而且，我应该如何显示图像以使其位于按钮的背景中？任何帮助将不胜感激。

```
import java.awt.*;
import java.awt.event.*;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

public class Cards implements ActionListener {    
private JPanel cards;
private JButton button1;
private JButton button2;
private Image backgroundImage;

public void addComponentToPane(Container pane) throws IOException {
    backgroundImage = ImageIO.read(new File("background.jpg"));

    //create cards
    JPanel card1 = new JPanel()
    {
        @Override
        public void paintComponent(Graphics g)
        {
            g.drawImage(backgroundImage, 0, 0, null);
        }
    };
    JPanel card2 = new JPanel();
    button1 = new JButton("Button 1");
    button2 = new JButton("Button 2");
    button1.addActionListener(this);
    button2.addActionListener(this);        
    card1.add(button1);        
    card2.add(button2);
    //create panel that contains cards
    cards = new JPanel(new CardLayout());
    cards.add(card1, "Card 1");
    cards.add(card2, "Card 2");
    pane.add(cards, BorderLayout.SOUTH);        
}

public void itemStateChanged(ItemEvent evt) {
    CardLayout cl = (CardLayout)(cards.getLayout());
    cl.show(cards, (String)evt.getItem());
}

public static void createAndShowGUI() throws IOException {
    //create and setup window
    JFrame frame = new JFrame("Frame"); 
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        
    //create and setup content pane
    Cards main = new Cards();
    main.addComponentToPane(frame.getContentPane());        
    //display window
    frame.pack();
    frame.setSize(800, 600);
    frame.setResizable(false);
    frame.setVisible(true);
}

public void actionPerformed(ActionEvent ae) {
    if (ae.getSource() == button1) {
        CardLayout cl = (CardLayout) (cards.getLayout());
        cl.show(cards, "Card 2");     
    } else if (ae.getSource() == button2) {
        CardLayout cl = (CardLayout) (cards.getLayout());
        cl.show(cards, "Card 1");
    }        
}            

public static void main(String[] args) {
    //set look and feel
    try {
        UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
    } catch (UnsupportedLookAndFeelException ex) {
        ex.printStackTrace();
    } catch (IllegalAccessException ex) {
        ex.printStackTrace();
    } catch (InstantiationException ex) {
        ex.printStackTrace();
    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();
    }                

    //schedule job for the event dispatch thread creating and showing GUI        
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {                
                try {
                    createAndShowGUI();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        }
    });     
}   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T00:06:13.833

您需要重写[JPanel](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)[`paintComponent(Graphics g)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)的方法并在[Graphics](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html)对象上使用，如[本例所示](https://stackoverflow.com/a/11026881/597657)。[`drawImage()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#drawImage%28java.awt.Image,%20int,%20int,%20java.awt.Color,%20java.awt.image.ImageObserver%29)`g`

* * *

[另外，通过@trashgod](https://stackoverflow.com/users/230513/trashgod)检查这两个示例：

1.  [例子](https://stackoverflow.com/a/5655843/597657)。
2.  [例子](https://stackoverflow.com/a/6432291/597657)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T00:58:35.510

@Eng.Fouad 的答案选择得很好，但图像可能在布局中占主导地位。您可能想要覆盖`getPreferredSize()`，如下所示。然后你可以只是`pack()`窗口，大小会合适。另请参阅[*使用 getResource 加载图像*](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource)。

```
import java.awt.*;
import java.awt.event.*;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;

public class Cards implements ActionListener {

    private JPanel cards;
    private JButton button1;
    private JButton button2;
    private Image backgroundImage;

    public void addComponentToPane(Container pane) {
        try {
            backgroundImage = ImageIO.read(new File("background.jpg"));
        } catch (IOException ex) {
            ex.printStackTrace(System.err);
        }
        //create cards
        JPanel card1 = new JPanel() {

            @Override
            public void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.drawImage(backgroundImage, 0, 0, null);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(
                    backgroundImage.getWidth(null),
                    backgroundImage.getHeight(null));
            }
        };
        JPanel card2 = new JPanel();
        button1 = new JButton("Button 1");
        button2 = new JButton("Button 2");
        button1.addActionListener(this);
        button2.addActionListener(this);
        card1.add(button1);
        card2.add(button2);
        //create panel that contains cards
        cards = new JPanel(new CardLayout());
        cards.add(card1, "Card 1");
        cards.add(card2, "Card 2");
        pane.add(cards, BorderLayout.SOUTH);
    }

    public void itemStateChanged(ItemEvent evt) {
        CardLayout cl = (CardLayout) (cards.getLayout());
        cl.show(cards, (String) evt.getItem());
    }

    public static void createAndShowGUI() {
        //create and setup window
        JFrame frame = new JFrame("Frame");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //create and setup content pane
        Cards main = new Cards();
        main.addComponentToPane(frame.getContentPane());
        //display window
        frame.pack();
        frame.setVisible(true);
    }

    public void actionPerformed(ActionEvent ae) {
        if (ae.getSource() == button1) {
            CardLayout cl = (CardLayout) (cards.getLayout());
            cl.show(cards, "Card 2");
        } else if (ae.getSource() == button2) {
            CardLayout cl = (CardLayout) (cards.getLayout());
            cl.show(cards, "Card 1");
        }
    }

    public static void main(String[] args) {
        //schedule job for the event dispatch thread creating and showing GUI        
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                    createAndShowGUI();
            }
        });
    }
} 
```

# php - PHP 自动加载器和命名空间

> ID：11496668
> 
> 赞同：0
> 
> 时间：2012-07-16T00:00:21.310
> 
> 标签：php, namespaces, spl-autoloader

我对 PHP 中的自动加载器和命名空间感到有些困惑。

我的课程组织在一个资产文件中，

```
-- Assets
    -- user
       -- User.php
    -- database
       -- Database.php 
```

这只是一个简单的版本，每个文件夹中有更多的文件（即用户、数据库）。

无需担心供应商名称冲突，因为该项目中只有一个供应商（即我），但例如，使用 PSR0 自动加载器：

```
function autoload($className)
{
    $className = ltrim($className, '\\');
    $fileName  = '';
    $namespace = '';
    if ($lastNsPos = strripos($className, '\\')) {
        $namespace = substr($className, 0, $lastNsPos);
        $className = substr($className, $lastNsPos + 1);
        $fileName  = str_replace('\\', DIRECTORY_SEPARATOR, $namespace) . DIRECTORY_SEPARATOR;
    }
    $fileName .= str_replace('_', DIRECTORY_SEPARATOR, $className) . '.php';

    require $fileName;
} 
```

我是否需要在每个类文件中声明一个命名空间并使用`new user\User();`. 是不是可以通过使用来初始化它`new user_User;`

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:08:49.630

PSR-0 自动加载器约定不*要求*您使用映射到您的目录结构的命名空间。您也可以在类名中使用下划线来达到基本相同的目的。

与命名空间分隔符一样，*类名中的*`\`任何下划线都会在查找要加载的文件时转换为。因此，一个类和都会导致自动加载器寻找相同的文件：.*`DIRECTORY_SEPARATOR``user_User``\user\User``user/User.php`*

# entity-framework - dbcontext 使用 select()、include() 和 where() 加载相关实体不起作用

> ID：11496681
> 
> 赞同：2
> 
> 时间：2012-07-16T00:03:21.057
> 
> 标签：entity-framework, linq-to-entities, dbcontext

我在实体之间有以下关系。公司 1 ---* 任命 *----1 名员工

我在一个单独的数据库中拥有 .net asp 成员资格。无论何时创建用户，都可以将其分配给公司、员工或管理员角色。

在我的公司控制器的索引操作中，我检查了登录用户的角色。根据角色，我进行不同的 linq 查询。例如，管理员可以获取所有公司的列表，公司可以获取具有与 User.Identity.Name 相同的用户名属性（字符串）的公司列表。对于管理员和公司角色，它工作正常。

对于员工角色，我想加载与当前员工相关的所有公司。我很难编写完成这项工作的 linq 查询。

我试过

```
var companies = db.Companies.Include(c => c.Appointments.Select(a=>a.Employee).Where(e=>e.Username.ToLower() == this.User.Identity.Name.ToLower())).ToList(); 
```

我收到此错误“包含路径表达式必须引用在类型上定义的导航属性。使用虚线路径作为参考导航属性，使用选择运算符作为集合导航属性。参数名称：路径”

这里是源代码，

公司控制器

```
[Authorize]
public class CompanyController : Controller
{
    private MyDBContext db = new MyDBContext();

    //
    // GET: /Company/

    public ViewResult Index()
    {
        var viewModel = new CompanyIndexViewModel();
        if (Roles.IsUserInRole("administrators")) {
            viewModel = new CompanyIndexViewModel { Companies = db.Companies.ToList() };
        }
        else if (Roles.IsUserInRole("companies")) {
            viewModel = new CompanyIndexViewModel { Companies = db.Companies.Where(c => c.Username.ToLower().Equals(this.User.Identity.Name.ToLower())).ToList() };
        }
        else if (Roles.IsUserInRole("employees")) {
            var companies = db.Companies.Include(c => c.Appointments.Select(a=>a.Employee).Where(e=>e.Username.ToLower() == this.User.Identity.Name.ToLower())).ToList();
            viewModel = new CompanyIndexViewModel { Companies = companies.ToList() };
        }

        return View(viewModel);
    } 
```

...

楷模

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
namespace TorontoWorkforce.Models
{
    public class Company
    {
        public int CompanyId { get; set; }

        [Required]
        public string Username { get; set; }

        [Display(Name="Company Name")]
        [Required]
        public string Name { get; set; }

        [UIHint("PhoneNumber")]
        public string Phone { get; set; }

        [DataType(DataType.Url)]
        public string Website { get; set; }

        [DataType(DataType.EmailAddress)]
        public string Email { get; set; }

        public AddressInfo AddressInfo { get; set; }

        public virtual ICollection<Contact> Contacts { get; set; }

        public virtual ICollection<Appointment> Appointments { get; set; }

        public Company(){
            this.AddressInfo = new AddressInfo();
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace TorontoWorkforce.Models
{
    public class Appointment
    {

        public int AppointmentId { get; set; }

        [Required]
        [UIHint("DateTime")]
        [Display(Name="Appointment Date")]
        public DateTime? DateOfAppointment { get; set; }

        [Required]
        public int CompanyId { get; set; }

        [Required]
        public int EmployeeId { get; set; }

        [Required]
        [UIHint("MultilineText")]
        [Display(Name = "Appointment Summary")]
        public string Description { get; set; }

        [Display(Name="Allocated No of Hours")]
        public decimal NoOfHoursWorked { get; set; }

        public virtual Company Company { get; set; }

        public virtual Employee Employee { get; set; }

        public virtual ICollection<AppointmentLine> AppointmentLines { get; set; }

        public Appointment() {
            //this.AppointmentLines = new List<AppointmentLine>();
            this.DateOfAppointment = DateTime.Now;
        }

        [NotMapped]
        [Display(Name="Actual No of Hours")]
        public decimal ActualHoursWorked {
            get
            {
                decimal total = 0;
                foreach (var jobline in this.AppointmentLines)
                {
                    total = total + jobline.TimeSpent;
                }
                return total;
            } 
        }

    }

    public class AppointmentLine
    {
        public int AppointmentLineId { get; set; }

        [UIHint("MultilineText")]
        [Required]
        public string Description { get; set; }

        [Display(Name="Time Spent")]
        [DataType(DataType.Duration)]
        public decimal TimeSpent { get; set; }

        public int AppointmentId { get; set; }

        public virtual Appointment Appointment { get; set; }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;

namespace TorontoWorkforce.Models
{
    public class Employee: TorontoWorkforce.Models.Person
    {
        public int EmployeeId { get; set; }

        [Required]
        public string Username { get; set; }

        [Display(Name="Date Hired")]
        public DateTime? DateHired { get; set; }

        [Required]
        public string Position { get; set; }

        public virtual ICollection<Appointment> Appointments { get; set; }

        public Employee() {
            this.DateHired = DateTime.Now;        
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T09:08:08.437

如果您想获得与选定员工有约会的公司，则无需使用`Include`. Include 用于指示 EF 加载与公司相关的所有约会（[它不支持过滤](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015345-allow-filtering-for-include-extension-method)）。试试这个：

```
string userName = this.User.Identity.Name.ToLower();
var companies = db.Companies.Where(c => c.Appointments.Any(a => 
                   a.Employee.Username.ToLower() == userName)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:05:34.797

我认为你只是在错误的地方有一个结束括号。您需要在“a => a.Employee”之后再增加一个，在“this.User.Identity.Name.ToLower()));”之后再减少一个

试试这个代码：

```
var companies = db.Companies.Include(c => c.Appointments.Select(a=>a.Employee)).Where(e=>e.Username.ToLower() == this.User.Identity.Name.ToLower()).ToList(); 
```

编辑：您还应该能够使用标准字符串包含方法：

```
var companies = db.Companies.Include("Appointments.Employee").Where(e=>e.Username.ToLower() == this.User.Identity.Name.ToLower()).ToList(); 
```

# database - 为每个用户创建一个数据库表是否可行？

> ID：11496683
> 
> 赞同：0
> 
> 时间：2012-07-16T00:04:08.610
> 
> 标签：database, web-applications

大型 Web 应用程序为每个用户拥有一个单独的数据库表是常见的还是可行的？如果没有，当行的大小通常有限制时，大多数人如何为每个单独的用户存储大量数据（最值得注意的是大型数组（数十万或数百万））？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:16:31.173

从读到的内容（在评论和其他地方）我得出结论，建议不要以这种方式设计数据库。感谢您的意见

# android - 使用 Android 图形的方向

> ID：11496685
> 
> 赞同：0
> 
> 时间：2012-07-16T00:04:31.367
> 
> 标签：android, android-animation

我正在研究制作一个简单的游戏。在不给出整个故事的情况下，我需要画出两块水果（有胳膊和腿），它们会做不同的动作。他们可以做一些不同的动作（少于 5 个），并且他们也会对彼此的动作做出反应。

我希望它看起来很简单。非常 2D，孩子们的图形。也许有阴影，但漂亮的明亮快乐的颜色。

假设一个动作是“扔球”。我想看到一个半平滑的手臂动作。尽可能平滑。

所以，我找到了一个教程，它使用了精灵和一个具有 3 种不同行走状态的 PNG。所以，非常基础。而且我能够让它穿过屏幕，引导每个状态的 PNG 的每个部分，并一遍又一遍地迭代，同时移动图像。

我对自己的进步感到非常满意，并希望将我的游戏建立在这种模型上 - 但是......正在使用精灵，并加载 PNG 的区域以使图像移动正确？如果我想要大概 20 张图片只是为了扔球，我的 PNG 会很大。

但如果这是正确的方法，那就太好了！看起来你可以使用 OpenGL 和所有这些，但那是 3D 图形，对吧？使用精灵和一些带有图像的 PNG 就可以实现性能和所有这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:34:01.043

OpenGL 是 2D 或 3D 的有效选择，您不应该有任何性能问题。

它适用于您的游戏，并且可能比尝试使用在 Android 2.x 上没有硬件加速的 android 动画更流畅。

# sql - 棘手的ER图的翻译

> ID：11496687
> 
> 赞同：0
> 
> 时间：2012-07-16T00:04:44.130
> 
> 标签：sql, relational-database, entity-relationship

我正在为我的数据库考试做一个项目，但我陷入了一个棘手的问题。这是我的 ER 图的摘录：

![http://i.stack.imgur.com/d1WQd.png](../Images/ef7270482718799979b1d219eae2423f.png)

如您所见，实体 Employee 是 Waiter 和 Cook 的泛化。Head Waiter 和 Chief Cook 分别是 Waiter 和 Cook 的专长。只有酋长可以为供应商完成订单（不包括在此摘录中）。显然，一次只有一个酋长可以履行订单（我已经建立了一个履行关系以使图表不那么混乱）。

改造ER图后（对不起，如果我没有使用正确的单词，我正在翻译成英文），结果如下：

![http://i.stack.imgur.com/GFOyD.png](../Images/27cfcce244880ad8bab3112d97993759.png)

因此，员工必须有一个角色（服务员、厨师或其他任何角色），并且每个角色（显然）可能只有一个酋长。我真的不知道这是否正确，双重概括让我很困惑。

下一步是逻辑图（表格），这完全是一团糟！这是一个可能的解决方案：

![在此处输入图像描述](../Images/013c89f2a0644111a1cdd20d815c7262.png)

这是对关系模型的可能转换（在 tblChief 中对 FK2 具有唯一非空约束），但它有一个弱点：如果您更改 tblEmployee 中的员工角色，tblChief 将不会看到此错误并且完整性将被破坏。在 tblEmployee(Role) 和 tblChief(Role) 之间添加 FK 会是一个好的解决方案吗？还是会丑陋/凌乱？

我想到了第二种可能的解决方案。我更喜欢它，但我仍然不知道它是否可以：

![在此处输入图像描述](../Images/c24ed4e530f49b51034fb0552ae72378.png)

在这里，我将实体 Role 与实体 Chief 合并到一个表中。字段 Chief 引用 IDEmployee，同样它必须是唯一且非空。

这些解决方案是否正确？我确信在插入和更新员工和角色时这将是一个大麻烦（AFAIK 如果不暂时删除完整性检查就无法完成）。这可以以不同的方式完成吗？

对不起，很长的帖子（以及图片链接，但我不能直接发布它们），如果你能回答我，非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:21:44.940

最后一张图没有意义。

每个员工都有 1 个角色（这是 FK 关系）

每个角色**可以有**一个上级角色。这是返回角色表的可为空的 FK 关系。（本身）。不要像你一样雇佣员工。

要查找所有作为经理的员工，您需要这样的 select 语句：

```
SELECT * 
FROM employees
WHERE roleID in (SELECT roleID 
                 FROM role 
                 WHERE superiorID IS NULL) 
```

或者

```
SELECT * 
FROM employees E
LEFT JOIN role R ON E.roleID = R.roleID
WHERE R.superiorID IS NULL 
```

# https - 将 https 域分配给 IIS7.5 网站时出现 eurl.axd 重定向错误

> ID：11496689
> 
> 赞同：0
> 
> 时间：2012-07-16T00:05:00.450
> 
> 标签：https, iis-7.5, http-status-code-404, asp.net-4.0

我们有一个最近从 IIS6 上的 ASP.NET 2 更新到 IIS7.5 上的 .Net 4 的网站。当我们部署到新的生产服务器时，人们登录后我们开始收到 http 404 错误。即用户可以看到默认登录页面，但一旦通过身份验证，网站就会崩溃。由于 URL 已被修改为包含 eurl.axd 组件，我们认为这可能与 ASP.NET v4 有关（根据其他人的问题，此错误）。除了遇到这个问题的每个人都在使用 MVC，而这个网站是 MVP。

因此，当我查看它时，我们将代码回滚到旧服务器。现在我让他们再次将相同的代码重新部署到生产服务器，但让他们将测试域指向它以进行测试。该网站运行良好。

所以唯一的区别是，当通过 http 访问时，网站可以正常工作。但是，如果您为其分配 https URL，则身份验证后重定向会崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:46:42.023

在 IIS 6 上从 3.5 迁移到 4.0 框架时，我们遇到了同样的问题。每当您重定向回父 url 时，我们都会看到这个问题，即 www.somewhere.com/

通过将其添加到 Web 服务器的注册表中，它阻止了 eurl.axd 被注入。

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0]
"EnableExtensionlessUrls"=dword:00000000 
```

在这里也检查一下[IIS6 上的 ASP.net 4.0 default.aspx 问题，](https://stackoverflow.com/questions/2635320/asp-net-4-0-default-aspx-problem-on-iis6)这也详细说明了相同的问题。

# c++ - 复制构造函数中的c ++用户定义成员

> ID：11496694
> 
> 赞同：0
> 
> 时间：2012-07-16T00:06:02.103
> 
> 标签：c++, constructor, copy-constructor

```
class A
{
std::string name;
public:
A(const A & rhs)
{
name = rhs.name;
}
}; 
```

在上面A类的拷贝构造函数中，是调用字符串类的赋值运算符还是调用字符串类的拷贝构造函数？

name 数据成员还没有定义，所以不会调用复制构造函数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:09:21.230

赋值运算符。如果你想要复制构造函数：

```
A(const A& rhs)
: name(rhs.name)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:09:38.453

将调用一个默认的（编译器生成的）赋值运算符，它执行逐个成员的赋值

# twitter-bootstrap - 导航栏中品牌名称前的图标

> ID：11496695
> 
> 赞同：3
> 
> 时间：2012-07-16T00:06:03.453
> 
> 标签：twitter-bootstrap, nav

我正在使用 twitter-bootstrap。我想知道你是如何在品牌名称前面放置一个图标的。不知何故，图标似乎也比文本小得多。如何解决这个问题，让它看起来不错？

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
     <div class="container">
      <i class="icon-signal icon-white"></i>
      <a class="brand" href="#">Internett</a>
   </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:46:42.423

您可以尝试在`.brand`标题锚中包含图标，然后将其与一些 css 对齐，如下所示：

**CSS**

```
.brand i {
    margin-top: -4px;
    vertical-align: middle;
} 
```

看起来不漂亮，但它确实有效。

演示：http: [//jsfiddle.net/andresilich/HGMdM/](http://jsfiddle.net/andresilich/HGMdM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T16:32:59.420

解决方案：

```
margin:-4px 
```

例子：

```
<nav class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><i style="margin:-4px 0; color:pink" class="glyphicon glyphicon-heart"></i> <?= $config->siteName ?></a>
    </div>
      <p class="navbar-text"><i style="color:pink" class="glyphicon glyphicon-heart"></i> <?= $config->siteTagline ?></p>
  </div>
</nav> 
```

内联用于演示。您还可以内联`<style>`或添加到您的 CSS 文件中。

向 Bootstrap 报告的问题：[https ://github.com/twbs/bootstrap/issues/13100](https://github.com/twbs/bootstrap/issues/13100)

# cocoa - 沙盒应用程序中 NSSavePanel 和 NSOpenPanel 上的附件视图的奇怪行为

> ID：11496696
> 
> 赞同：2
> 
> 时间：2012-07-16T00:06:11.183
> 
> 标签：cocoa, sandbox, nsopenpanel, nssavepanel, accessoryview

我对 NSSavePanel 和 NSOpenPanel 的附件视图有疑问。

有时，（经常）当我打开这些面板之一时，附件视图不起作用（显示视图但控件似乎已禁用）。

我正在使用此代码显示面板：

```
[openPanel beginSheetModalForWindow:appWindow completionHandler:openPanelHandler]; 
```

这仅在启用 app-sandbox 时发生。

经过大量测试后，我发现发生的事情是视图放错了位置（未附加到面板上）。

When I open Mission Control and move the mouse pointer over the app windows I noticed that an "invisible" window hilighted and when select it I can take control over the accessory view (all controls work) but it appears detached from the open or save panel如屏幕截图所示。

![截屏](../Images/46a09fae57a3ae2eddf2b21b671c5d55.png)

我试图创建一个新应用程序只是为了测试这种行为，但无法重现它，所以我想这与我的应用程序有关。

任何暗示我可能做错了什么？

我不想为了解决这个问题而从头开始编写所有代码。

**编辑**

顺便说一句，当我关闭窗口时，就在窗口关闭之前，附件视图会闪烁控件的正确值。应用程序似乎没有及时添加视图以显示面板。

**更新 1**

我对用作辅助视图的视图进行了子类化，并注意到

```
- (void)viewWillMoveToSuperview:(NSView *)newSuperview 
```

被称为，但是

```
- (void)viewDidMoveToSuperview 
```

即使视图正确显示，也永远不会被调用，这是正常行为吗？

**更新 2**

我确认`- (void)viewDidMoveToSuperview`应该调用，在测试应用程序上调用了这两种方法。

我还注意到我的应用程序和测试应用程序之间存在细微差别。在我的应用程序上，面板只是向下滑动，但在测试应用程序上，面板似乎“向下翻转”（不知道具体如何描述）。面板的显示方式与我无关，我只是注意到它的显示方式不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:55:09.890

在尝试了很多事情后，我得出结论认为问题与项目的 ARC（自动引用计数）设置有关。

在我的情况下，我在目标上启用了 ARC，但在项目上启用了 ARC 之后（并处理了由此产生的错误和警告），现在一切正常。

# joomla1.5 - Virtuemart / 用户字段

> ID：11496698
> 
> 赞同：3
> 
> 时间：2012-07-16T00:06:17.157
> 
> 标签：joomla1.5, virtuemart

我在“管理用户字段”中添加了一个字段，当向管理员发送电子邮件通知他们新用户注册时，我想包含这个新字段。

我已经编写了一些代码来从 /administrator/components/com_virtuemart/classes/ps_shopper.php 中的 _sendMail 函数中的 #__vm_user_info 获取这个新字段，并将变量添加到 $message2。

ASEND_MSG 已修改为接受该参数，但在创建用户时，该字段不包含在发送给管理员的电子邮件中。当我去查看表格时，数据就在那里。因此，为了排除故障，我在 select 语句中硬编码了一个用户名，添加了另一个用户，并且为硬编码的用户发送了正确的值，而不是刚刚添加的用户。我现在认为这是 MySQL 的提交问题，所以在尝试获取值之前，我在代码中添加了 sleep(4) ......不走运。

任何人都可以为我阐明这一点吗？

拉里R....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:14:46.680

1.  管理员/components/com_virtuemart/classses/ps_shopper.php

需要在函数 add() 中的“return true”行之前添加以下代码：

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** ****** *** ** *** ** *** ** *** ** *** ** *** ** *** **** / $pwd = $_POST['password'];**

 **```
 $db = JFactory::getDBO();

        $query = "SELECT id, name, email, username"

        . "\n FROM #__users"

        . "\n ORDER by id DESC LIMIT 1"

        ;

        $db->setQuery( $query );

        $rows = $db->loadObjectList();

        $namee = $rows[0]->name;

        $emaill = $rows[0]->email;

        $usern = $rows[0]->username;

        $pwd;

        $lid = $rows[0]->id;

        $dbv = new ps_DB;

            echo $query = "SELECT *"

        . "\n FROM #__{vm}_user_info"

        . "\n WHERE user_id=$lid"

        ;

        $dbv->setQuery( $query );

        $fid = $db->loadObjectList();

     $field = $fid[0]->extra_field_1;

    $user       = clone(JFactory::getUser());

    $usersConfig = &JComponentHelper::getParams( 'com_users' );

    if ($usersConfig->get('allowUserRegistration') == '0') {

        JError::raiseError( 403, JText::_( 'Access Forbidden' ));

        return false;

    }

    // If user activation is turned on, we need to set the activation information

    $useractivation = $usersConfig->get( 'useractivation' );

    if ($useractivation == '1') 

    {

        jimport('joomla.user.helper');

        $user->set('activation', md5( JUserHelper::genRandomPassword()) );

        $user->set('block', '1');

    }

    $component = 'com_user';

    $activation_link = $mosConfig_live_site."/index.php?option=$component&task=activate&activation=".$user->get('activation');

    $this->_sendMail( $namee , $emaill, $usern, $pwd, $activation_link);

    /************************************************** Spinz ********************************************/ 
```

注意：这里我们为用户邮件创建了用户名和密码的邮件功能。

1.  管理员/components/com_virtuemart/classses/ps_shopper.php

需要在“return true”行之前注释函数 register_save() 中的行：

```
 // Send the registration email

//$this->_sendMail( $name, $email, $username, $password, $activation_link ); 
```

注意：这里生成的邮件函数我们需要注释该邮件函数并在第一点在 ps_shopper.php 的 add() 函数中创建另一个邮件函数。

1.  管理员/components/com_virtuemart/classses/ps_shopper.php

需要使用以下代码在函数 _sendmail() 的 jos_vm_user_info 表中获取额外添加的字段 (extra_field_1)，并将该字段通过邮件发送给用户。

```
 /****************************************************************/

     $db = JFactory::getDBO();

        $query = "SELECT id, name, email, username"

        . "\n FROM #__users"

        . "\n ORDER by id DESC LIMIT 1"

        ;

        $db->setQuery( $query );

        $rows = $db->loadObjectList();

        $lid = $rows[0]->id;

        $dbv = new ps_DB;

        $query = "SELECT *"

        . "\n FROM #__{vm}_user_info"

        . "\n WHERE user_id=$lid"

        ;

        $dbv->setQuery( $query );

        $fid = $db->loadObjectList();

     $field = $fid[0]->extra_field_1;

    $subject    = sprintf ($VM_LANG->_('SEND_SUB',false), $name, $mosConfig_sitename);

    $subject    = vmHtmlEntityDecode($subject, ENT_QUOTES);

    if ($mosConfig_useractivation=="1"){

        $message = sprintf ($VM_LANG->_('USEND_MSG_ACTIVATE',false), $name, $mosConfig_sitename, $activation_link, $mosConfig_live_site, $username, $pwd, $field );

    } else {

        $message = sprintf ($VM_LANG->_('PHPSHOP_USER_SEND_REGISTRATION_DETAILS',false), $name, $mosConfig_sitename, $mosConfig_live_site, $username, $pwd, $field);

    } 
```

/ ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ***** /

笔记 ：

1.  使用查询初始化变量“$field”获取额外添加的字段值。然后，额外的字段值由邮件的消息部分分配。（初始化变量 $field 具有附加值的 drugmart 中的额外字段）。

2.  管理员/组件/com_virtuemart/languages/common/english

替换以下代码的消息：

1.  'USEND_MSG_ACTIVATE' => '你好 %s，

感谢您在 %s 注册。您的帐户已创建，必须先激活才能使用。要激活帐户，请单击以下链接或将其复制粘贴到您的浏览器中：%s

激活后，您可以使用以下用户名和密码登录 %s：

用户名 - %s 密码 - %s 度数 - %s'

2.'PHPSHOP_USER_SEND_REGISTRATION_DETAILS' => '你好 %s，

感谢您在 %s 注册。您的客户帐户已创建。您可以使用以下用户名和密码登录 %s：

用户名 - %s 密码 - %s 度数 - %s ' 注意：

1.  语言文件中由字符串 %s 分配的额外附加值。

2.  消息中包含额外添加的字段值的字符串值。

3.  度数显示增加的额外字段**

# objective-c - iOS RPNCalculatorStanfordVidOne 无法弄清楚为什么除了一行之外的所有内容都在工作

> ID：11496699
> 
> 赞同：0
> 
> 时间：2012-07-16T00:06:21.570
> 
> 标签：objective-c, ios, xcode, cs193p

我是 100% 的新手`iOS`。我正在在线观看斯坦福大学的视频来学习`iOS`。我花了几个小时慢慢浏览第二个视频，小心翼翼地确保我没有在一行代码上犯错。一切都很完美，直到 - 你不知道 - 编码的最后一分钟。

我和我的妻子花了很多时间试图弄清楚，但我的代码与教授的代码相符。请帮我。我喜欢通过这些视频进行学习，但在我具备此功能并花时间复习之前，我无法继续前进。

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()
@property (nonatomic) BOOL userIsInTheMiddleOfEnteringANumber;
@property (nonatomic, strong) CalculatorBrain *brain;
@end 

@implementation CalculatorViewController

@synthesize display  = _display;
@synthesize userIsInTheMiddleOfEnteringANumber = 
_userIsInTheMiddleOfEnteringANumber;
@synthesize brain = _brain;

- (CalculatorBrain *)brain
{
    if (!_brain) _brain = [[CalculatorBrain alloc] init];
    return _brain;
}

- (IBAction)digitPressed:(UIButton *)sender 
{
    NSString *digit = sender.currentTitle;
        if (self.userIsInTheMiddleOfEnteringANumber) 
        {
             self.display.text = [self.display.text stringByAppendingString:digit];
        }
    else 
    {
        self.display.text = digit;
        self.userIsInTheMiddleOfEnteringANumber = YES;
    }
}
- (IBAction)enterPressed 
{
    [self.brain pushOperand:[self.display.text doubleValue]];
    self.userIsInTheMiddleOfEnteringANumber = NO;
}

- (IBAction)operationPressed:(id)sender 
{
    if (self.userIsInTheMiddleOfEnteringANumber) [self enterPressed];
    double result = [self.brain performOperation:sender.currentTitle];  // <- HERE IS THE       LINE IN QUESTION

    NSString *resultString = [NSString stringWithFormat:@"%g", result];
    self.display.text = resultString;
}

@end 
```

* * *

```
CalculatorBrain.m

#import "CalculatorBrain.h"

@interface CalculatorBrain()
@property (nonatomic, strong) NSMutableArray *operandStack;
@end

@implementation CalculatorBrain

@synthesize operandStack = _operandStack;

- (NSMutableArray *) operandStack
{
    if (_operandStack == nil) _operandStack = [[NSMutableArray alloc] init];
    return _operandStack;
}

- (void)pushOperand:(double)operand
{
    [self.operandStack addObject:[NSNumber numberWithDouble:operand]];
}

- (double)popOperand
{
    NSNumber *operandObject = [self.operandStack lastObject];
    if (operandObject) [self.operandStack removeLastObject];
    return [operandObject doubleValue];
}

- (double)performOperation:(NSString *)operation
{
    double result = 0;

    if ([operation isEqualToString:@"+"])
    {
        result = [self popOperand] + [self popOperand];
    }
    else if ([@"*" isEqualToString:operation])
    {
        result = [self popOperand] * [self popOperand];
    }

    [self pushOperand:result];

    return result;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:22:48.103

我认为问题在于您的 if 语句没有正确关闭。

```
- (IBAction)operationPressed:(id)sender 
{
    if (self.userIsInTheMiddleOfEnteringANumber){ [self enterPressed];
    double result = [self.brain performOperation:sender.currentTitle];  

    NSString *resultString = [NSString stringWithFormat:@"%g", result];
    self.display.text = resultString;
}
} 
```

或者

```
- (IBAction)operationPressed:(id)sender 
    {
        if (self.userIsInTheMiddleOfEnteringANumber)
{
 [self enterPressed];
}
        double result = [self.brain performOperation:sender.currentTitle]; 

        NSString *resultString = [NSString stringWithFormat:@"%g", result];
        self.display.text = resultString;

    } 
```

建议查看教程的 pdf 文件以获取更具体的代码源。希望有所帮助。

# java - 如何在 Java 中使用 PrintWriter 和 File 类？

> ID：11496700
> 
> 赞同：57
> 
> 时间：2012-07-16T00:06:33.897
> 
> 标签：java, printwriter

我正在尝试为我正在制作的一个小程序理解 PrintWriter，但我似乎无法让 java 制作文件然后在其上写入。当我执行下面的程序时，它在第 9 行给我一个 Filenotfoundexeption 错误。它也无法在我指定的目录中创建文件。我是新手，所以请尽量保持答案简单。我正在使用 Eclipse。

```
import java.io.PrintWriter;
import java.io.File;

public class Testing {

  public static void main(String[] args) {

    File file = new File ("C:/Users/Me/Desktop/directory/file.txt");
    PrintWriter printWriter = new PrintWriter ("file.txt");
    printWriter.println ("hello");
    printWriter.close ();       
  }
} 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-16T00:11:08.927

如果该目录不存在，则需要创建它。Java 不会自己创建它，因为`File`该类只是指向一个根本不存在的实体的链接。

正如您所说，错误是无法创建文件。如果您阅读 PrintWriter 构造函数的文档，您可以看到

> FileNotFoundException - 如果给定的字符串不表示现有的、可写的常规文件并且无法创建该名称的新常规文件，或者在打开或创建文件时出现其他错误

您应该尝试为其之前包含的文件夹创建路径：

```
File file = new File("C:/Users/Me/Desktop/directory/file.txt");
file.getParentFile().mkdirs();

PrintWriter printWriter = new PrintWriter(file); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-09T05:03:34.430

```
import java.io.PrintWriter;
import java.io.File;

public class Testing {

  public static void main(String[] args) throws IOException {

    File file = new File ("C:/Users/Me/Desktop/directory/file.txt");
    PrintWriter printWriter = new PrintWriter ("file.txt");
    printWriter.println ("hello");
    printWriter.close ();       
  }
} 
```

throw an exception for the file.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-16T00:10:32.993

将 File 对象传递给构造函数[`PrintWriter(File file)`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#PrintWriter%28java.io.File%29)：

```
PrintWriter printWriter = new PrintWriter(file); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-16T00:17:15.147

```
import java.io.File;
import java.io.PrintWriter;

public class Testing 
{
    public static void main(String[] args) 
    {

        File file = new File("C:/Users/Me/Desktop/directory/file.txt");

        PrintWriter printWriter = null;

        try
        {
            printWriter = new PrintWriter(file);
            printWriter.println("hello");
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        finally
        {
            if ( printWriter != null ) 
            {
                printWriter.close();
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T21:49:18.110

Java 通常不接受“/”来定义文件目录，所以试试这个：

```
 File file = new File ("C:\\Users\\user\\workspace\\FileTester\\myFile.txt"); 
```

如果文件不存在，请执行以下操作：

```
 try {
      file.createNewFile();
 }
 catch (IOException e) {
 e.printStackTrace();
 } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-21T06:29:08.983

您应该对 java 中的异常有一个清晰的认识。在java中有已检查异常和未检查异常。

编译器在编译时检查已检查的异常（不抛出，只是检查），以便在运行时顺利执行程序。

注意：在我们的程序中，如果有可能出现检查异常，那么我们应该通过 try catch 或 throws 关键字来处理检查异常。否则我们将得到一个编译时错误：

CE：Unexpected Exception java.io.FileNotFoundException；必须被捕获或声明被抛出。

如何解决： 1.将您的代码放入 try catch 块中：

2.使用 throws 关键字，如上面其他人所示。

建议：阅读有关异常的更多信息。（我个人喜欢这个话题）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-16T22:09:51.990

```
import java.io.*;

public class test{
    public static void main(Strings []args){

       PrintWriter pw = new PrintWriter(new file("C:/Users/Me/Desktop/directory/file.txt"));

       pw.println("hello");
       pw.close
    } 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-24T17:20:59.287

该类[`PrintWriter`实际上](https://docs.oracle.com/javase/8/docs/api/java/io/PrintWriter.html)可以为您创建文件。

*此示例适用于 JDK 1.7+。*

```
// This will create the file.txt in your working directory.

PrintWriter printWriter = null;

try {

    printWriter = new PrintWriter("file.txt", "UTF-8");
    // The second parameter determines the encoding. It can be
    // any valid encoding, but I used UTF-8 as an example.

} catch (FileNotFoundException | UnsupportedEncodingException error) {
    error.printStackTrace();
}

printWriter.println("Write whatever you like in your file.txt");

// Make sure to close the printWriter object otherwise nothing
// will be written to your file.txt and it will be blank.
printWriter.close(); 
```

有关有效编码的列表，[请参阅文档。](https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html)

或者，您可以只将文件路径传递给`PrintWriter`类而不声明编码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-13T04:51:03.030

好吧，我认为首先将整个 main 保留在 try catch 中（或者您可以使用 as `public static void main(String arg[]) throws IOException )`，然后也使用您正在编写的文件的完整路径作为

```
PrintWriter printWriter = new PrintWriter ("C:/Users/Me/Desktop/directory/file.txt"); 
```

所有那些像用户，我，桌面，目录这样的目录都应该是用户制作的。java不会让目录拥有自己的。它应该是

```
import java.io.*;
public class PrintWriterClass {

public static void main(String arg[]) throws IOException{
    PrintWriter pw = new PrintWriter("C:/Users/Me/Desktop/directory/file.txt");
    pw.println("hiiiiiii");
    pw.close();
}   

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-05T16:51:10.193

双击`file.txt`，然后保存它，`command + s`，这在我的情况下有效。另外，请确保将`file.txt`其保存在项目文件夹中。如果这不起作用。

```
PrintWriter pw = new PrintWriter(new File("file.txt"));
pw.println("hello world"); // to test if it works. 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-28T09:41:23.730

如果你想使用 PrintWrite 然后试试这个代码

```
public class PrintWriter {
    public static void main(String[] args) throws IOException {

        java.io.PrintWriter pw=new java.io.PrintWriter("file.txt");
        pw.println("hello world");
        pw.flush();
        pw.close();

    }

} 
```

# javascript - 可调整大小的布局

> ID：11496701
> 
> 赞同：1
> 
> 时间：2012-07-16T00:06:42.413
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在寻找一种灵活的三列布局，这样三列的宽度可以通过边缘上的简单拖动操作来改变，就像在 jsfiddle.net 中所做的那样

在搜索时，我尝试实现以下

1\. [http://methvin.com/splitter/3csplitter.html](http://methvin.com/splitter/3csplitter.html) 这非常适合我的情况，体积小并且在 Internet Explorer 中工作。但是它与旧版本的 jQuery(v 1.3) 兼容，因为它提供了新版本错误“超出最大调用堆栈大小”。

2.jQuery UI Resizeable 默认情况下，它为简单的 div 元素提供了很多选项，但是在调整流畅的布局时，出现了一些问题。我试图为它添加一个小小提琴[http://jsfiddle。 net/vjmx2/6/ 。](http://jsfiddle.net/vjmx2/6/)但它不起作用

在检查 JSFiddle 的页面时，我抓住了[http://jsfiddle.net/js/LayoutCM.js](http://jsfiddle.net/js/LayoutCM.js)，但由于它是框架的一部分，我无法提取它以供我使用。

如果有人可以修复或提供可能有用的链接，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:46:49.040

[您可以在此处](http://krikus.com/js/splitter/multiple.html)尝试 jQuery 拆分器演示。

我已经用最新的 jQuery 测试了代码并且它工作正常（仅在 Mozilla 13.0.1 中测试）。

```
<script type="text/javascript" 

src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script 

type="text/javascript" src="splitter.js"></script> 
```

希望能帮助到你。

# linux - 用空格重命名文件

> ID：11496702
> 
> 赞同：2
> 
> 时间：2012-07-16T00:06:58.670
> 
> 标签：linux, bash, shell, rename

我想要一个在 linux 上工作的脚本来重命名此表单中的文件，即 Yahoo Babel Fish - Persistent Cross Site Scripting Vulnerability.jpg 到该表单 Yahoo-Babel-Fish-Persistent-Cross-Site-Scripting-Vulnerability.jpg

它只删除每个空格并用连字符更改它，如果它是两个空格之间的连字符，它只删除空格，就像你在这部分“鱼 - 持久”到“鱼 - 持久”中看到的那样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T00:17:29.477

鉴于您要处理当前目录中的每个文件，您可以分两行执行此操作：

```
for f in *; do mv "$f" "$(echo $f | sed 's/ /-/g')"; done
for f in *; do mv "$f" "$(echo $f | sed 's/---/-/g')"; done 
```

可能有一种方法可以在一行中做到这一点，但我现在想不出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:20:18.233

这是一个利用 bash 数组和 extglob 特性的纯 bash 解决方案：

```
shopt -s extglob
oIFS="$IFS" # save the original IFS
for file in *.jpg; do # Or whatever pattern you like
    target=( ${file//+(-)/ } ) # Break the filename into an array on spaces, after turning - into space. 
    IFS='-' # Temporarily set the internal field separator into a dash so we can join on dashes.
    mv "$file" "${target[*]}"
    IFS="$oIFS"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T00:25:59.430

```
for file in *.jpg ; do file2="${file// - /-}"; file2="${file2// /-}"; echo mv "$file" "$file2" ;done 
```

如果这是您想要的，请删除回声。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T00:43:30.733

以下是我写这篇文章时存在的三个答案的一些基准。随意扩展：

```
$ ./rename_bench 
setting up
timing ext

real    0m35.453s
user    0m6.006s
sys 0m27.417s
setting up
timing sed

real    1m17.498s
user    0m15.223s
sys 0m56.376s
setting up
timing straight

real    0m38.352s
user    0m6.028s
sys 0m28.254s
$ ./rename_bench 
setting up
timing ext

real    0m36.234s
user    0m6.030s
sys 0m28.270s
setting up
timing sed

real    1m16.467s
user    0m15.277s
sys 0m56.194s
setting up
timing straight

real    0m33.538s
user    0m5.911s
sys 0m26.672s 
```

实际的基准测试脚本：

```
#!/bin/bash

setup() {
    cd $(mktemp -dt "foo") &&
    touch 'a - '{0..10000}'buzz.jpg'
}
ext_rename() {
    shopt -s extglob
    oIFS="$IFS" # save the original IFS
    for file in *.jpg; do # Or whatever pattern you like
        target=( ${file//+(-)/ } ) # Break the filename into an array on spaces, after turning - into space. 
        IFS='-' # Temporarily set the internal field separator into a dash so we can join on dashes.
        mv "$file" "${target[*]}"
        IFS="$oIFS"
    done
}

sed_rename() {
    for f in *.jpg; do
        mv "$f" "$(sed -e 's/ /-/g' -e 's/---/-/g' <<< "$f")"
    done
}

straight_rename() {
    for file in *.jpg; do
        file2="${file// - /-}"
        file2="${file2// /-}"
        mv "$file" "$file2"
    done
}

echo "setting up"
setup
echo "timing ext"
time ext_rename
echo "setting up"
setup
echo "timing sed"
time sed_rename
echo "setting up"
setup
echo "timing straight"
time straight_rename 
```

# java - 带有泛型集合的 instanceof

> ID：11496705
> 
> 赞同：8
> 
> 时间：2012-07-16T00:07:39.320
> 
> 标签：java

为什么以下代码段无法编译？

```
if (mangoList instanceof List<Mango>) { System.out.println("true"); } 
```

*   你不知道 mangoList 是 List 类型。
*   instanceof 关键字仅适用于原始类型。
*   您只能使用反射检查集合的类型。
*   泛型类型在运行前被擦除。（ans）
*   该语句可能会导致将 mangoList 设置为 List 的实例。

你认为哪个是正确答案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T00:13:46.007

正确答案是您标记的那个`ans`。您将能够判断这`mangoList`是 a `List`，但您将无法获得其已擦除参数的类型。Remaning 的选择没有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T03:08:11.067

**1.**是的“通用类型在运行时被擦除”。

**2.**所以你将无法分辨列表的类型。

**3.**但是你会发现mangoList是一个List。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T00:21:34.153

但是，您可以使用 mangoList instanceof List 来检查它是否是某种类型的 List。例如，如果您不确定您是否有 List 或 Mango 对象，但不会区分 List 的类型，这很有用。为此，我建议您检查第一个元素的类型。

# php - PHP 不会添加我的 SQL 项

> ID：11496712
> 
> 赞同：1
> 
> 时间：2012-07-16T00:08:41.470
> 
> 标签：php, mysql

我正在使用 php 并尝试将一个项目添加到我的 MySQL 数据库中。

如果我使用以下代码，它可以工作：

```
 mysql_query("INSERT INTO `intranet`.`product_form` (`id`, `ProductName`, `ProductInitiatedBy`) VALUES (NULL,  'item1', 'item2')") or die("Could not perform select query - " . mysql_error());; 
```

但是，如果我使用以下代码，它将不起作用：

```
$product_name=("tom"); 
mysql_query("INSERT INTO `intranet`.`product_form` (`id`, `ProductName`, `ProductInitiatedBy`) VALUES (NULL,  $product_name, 'item2')") or die("Could not perform select query - " . mysql_error());; 
```

我收到一条错误消息：

> 无法执行选择查询 - “字段列表”中的未知列“ProductName1234”

这`ProductName1234`是来自`$product_name`并且应该是我要添加的数据而不是列的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:12:18.860

当你插入这样的字符串时，你需要用引号将它们括起来，否则 MySQL 会认为你试图从某个地方指定一个列来插入数据。

```
mysql_query("INSERT INTO intranet.product_form (id, ProductName, ProductInitiatedBy) VALUES (NULL, \"$product_name\", 'item2')"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T00:12:34.397

改变：

```
mysql_query("INSERT INTO `intranet`.`product_form` (`id`, `ProductName`, `ProductInitiatedBy`) VALUES (NULL,  $product_name, 'item2')") or die("Could not perform select query - " . mysql_error());; 
```

至：

```
mysql_query("INSERT INTO `intranet`.`product_form` (`id`, `ProductName`, `ProductInitiatedBy`) VALUES (NULL,  '$product_name', 'item2')") or die("Could not perform select query - " . mysql_error()); 
```

您需要添加`'`到`$product_name`：

```
VALUES (NULL,  '$product_name', 'item2')
               ^             ^ 
```

# c# - C#中DataGridView中的按钮列？

> ID：11496715
> 
> 赞同：1
> 
> 时间：2012-07-16T00:09:03.997
> 
> 标签：c#, winforms, datagridview

我正在尝试将所有按钮的文本设置为“设置文本”。我做了这个，但它没有用....我该怎么做？

```
 foreach (DataGridViewButtonCell btn in dataGridView1.Rows)
        {
            btn.Text = "Set Text"; 
        } 
```

另外，我如何为这些按钮设置 onclick 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T03:26:14.343

尝试这个：

```
 private void button1_Click(object sender, EventArgs e)
        {

            foreach (DataGridViewRow row in dataGridView1.Rows)
            {
                DataGridViewCell cell = row.Cells[0];//Column Index
                cell.Value = "Set Text";
            }
        } 
```

结果：

![在此处输入图像描述](../Images/eaac68752a83d0fa58ea227ea1123bee.png)

对于点击事件：

```
private void gw_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == 0)//Column index
            {
                //Do Somethings
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T04:09:30.190

更改按钮文本。

```
const int BUTTON_COLUMN_INDEX = 0;

foreach (DataGridViewRow row in dataGridView1.Rows)
{
    row.Cells[BUTTON_COLUMN_INDEX].Value = "Set Text";
} 
```

即使在 DataGridView 中也不能单击按钮。相反，您必须处理该`CellClick`事件并检查您想要的列是否被单击。

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e) {
    // Check if wanted column was clicked 
    if (e.ColumnIndex == BUTTON_COLUMN_INDEX && e.RowIndex >= 0) {
        //Perform on button click code
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-27T05:17:20.240

尝试这个

```
 foreach (DataGridViewButtonCell btn in dataGridView1.Rows)
        {
            btn.Text = "Set Text";
            btn.UseColumnTextForButtonValue=true;
        } 
```

# html - 跨度新线跨度

> ID：11496720
> 
> 赞同：6
> 
> 时间：2012-07-16T00:09:35.753
> 
> 标签：html, css, whitespace

```
<span>A</span>
<span>V</span> 
```

导致这些字母之间有一个空格，这是如何计算的？作为反对

```
<span>A</span><span>V</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:15:55.773

内联元素之间的空白被压缩（如果不是空格，则被转换）为单个空格并显示。

[W3C 规范](http://www.w3.org/TR/html401/struct/text.html)有更多信息：

> 这种布局可能涉及在单词之间放置空格（称为单词间空间），但单词间空间的约定因脚本而异。例如，在拉丁文字中，字间距通常呈现为 ASCII 空格 ( `&#x0020;`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T16:49:41.633

尝试在 span 上使用一个类，这将强制第二个 span 换行，**CSS**为

```
 .spanClass 
 {
    display:block;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T00:22:02.583

*span*是与简单文本类似的内联元素，因此它遵循相同的样式规则。当您在新行上书写时，渲染会放置一个空格。

```
A
B 
```

将变为“A B”，在 A 和 B 之间有一个空格。这也发生在*strong*或*em*

# ios - AIR for Mobile：如何调试 MultiTouch？

> ID：11496722
> 
> 赞同：0
> 
> 时间：2012-07-16T00:09:45.580
> 
> 标签：ios, actionscript-3, air, touch

有没有办法在 ADL 中模拟触摸事件？如果不是，您如何正确调试严重依赖触摸事件的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:31:31.023

您可以创建多点触控应用程序，在您的手机上运行它并使用 WIFI 从设备发送触摸。这就是我测试这个的方式。

但是您也可以编写将从舞台读取 MouseEvents 并调度 TouchEvents 的模拟器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:21:26.627

使用设备似乎是最好的方法，尽管它似乎也与之前的 SO 问题重叠，该问题描述了普通 Android 模拟器中的相同问题：[有没有办法在 Android 模拟器上测试多点触控？](https://stackoverflow.com/questions/2825505/is-there-any-way-to-test-muti-touch-on-android-emulator)

同样关于代码测试，您仍然可以编写单元测试来测试您的对象/方法并验证它们是否具有适当的输入和输出。如果你愿意这样做，你甚至可以让它使用类似的代码从 UI 组件调度事件

```
//in your code
Multitouch.inputMode=MultitouchInputMode.GESTURE;
someComponent.addEventListener(GestureEvent.GESTURE_TWO_FINGER_TAP, someHandler);

//and in your test
someComponent.dispatchEvent(new GestureEvent(GestureEvent.GESTURE_TWO_FINGER_TAP));
//verify appropriate change occured after a timeout or something of that nature 
```

并且应该能够对事件做出适当的反应。

更多关于手势事件的信息：http: [//help.adobe.com/en_US/as3/dev/WS1ca064e08d7aa93023c59dfc1257b16a3d6-7ffd.html](http://help.adobe.com/en_US/as3/dev/WS1ca064e08d7aa93023c59dfc1257b16a3d6-7ffd.html)

更多关于多点触控/手势的信息：http: [//www.adobe.com/devnet/flash/articles/multitouch_gestures.html](http://www.adobe.com/devnet/flash/articles/multitouch_gestures.html)

# delphi - Delphi THMTLFrameBrowser 字体增加

> ID：11496723
> 
> 赞同：3
> 
> 时间：2012-07-16T00:09:54.537
> 
> 标签：delphi

我正在使用`THTMLViewer`和`THTMLFrameBrowser`组件在 Delphi 中工作。有谁知道在使用 PBear 的组件时如何动态增加当前加载的 HTML 页面中的所有字体大小？只有重新加载当前页面时，更改`DefFontSize`才会生效。同样的问题也适用于`MarginWidth`和`MarginHeight`属性。重新加载页面会起作用，但这似乎有点过头了。

难道没有办法在不重新加载当前加载的 HTML 文件的情况下重绘 HTML 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T14:18:20.360

我最近遇到了同样的问题，我得出的结论是页面必须重新加载，没有别的办法。

# random - 如何在 Mathematica 中求解具有随机系数的线性微分方程

> ID：11496732
> 
> 赞同：0
> 
> 时间：2012-07-16T00:10:40.543
> 
> 标签：random, wolfram-mathematica, differential-equations, stochastic

我有一个差分系统，比如

dx/dt = A x(t) + B y(t)

dy/dt = C x(t) + D y(t)

其中 A、B、C 和 D 是实常数。现在我需要探索系统的行为，如果 A 不是一个常数，而是一个均匀分布在给定范围之间的随机数。我只需要定性检查。我没有随机积分的背景，因此我不知道这是否真的与 Ito 积分有关（以及这个问题[https://mathematica.stackexchange.com/questions/3141/how-can-you-compute-it -integrals-with-mathematica](https://mathematica.stackexchange.com/questions/3141/how-can-you-compute-it-integrals-with-mathematica)）。无论如何，我不知道如何求解这个微分方程。

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:10:06.367

解决系统问题的标准方法是

```
FullSimplify[ 
        DSolve[{y'[t] == a x[t] + b y[t], x'[t] == c x[t] + d y[t]}, {y, x}, t]] 
```

现在，您应该考虑当 {a, b, c, d} 是随机参数时您想探索什么。

**编辑**

也许你想要这样的东西：

```
s = FullSimplify[
     DSolve[{y'[t] == #[[1]] x[t] + #[[2]] y[t], x'[t] == #[[3]] x[t] + #[[4]] y[t], 
            x[0] == 1, y[0] == 1}, {y, x}, t]] & /@ RandomReal[{-1, 1}, {30, 4}];

ParametricPlot[Evaluate[{x[t], y[t]} /. s[[All, 1]]], {t, 0, 1}] 
```

![在此处输入图像描述](../Images/6fc943c998c55322793accb319c241ff.png)

# html - 将背景图像 (.png) 添加到 SVG 圆形

> ID：11496734
> 
> 赞同：49
> 
> 时间：2012-07-16T00:10:57.163
> 
> 标签：html, css, svg

这可能吗？以下是我尝试过的，但它完全用黑色填充了圆圈。

```
<svg id='vizMenu' width="700" height="660">
    <defs>
        <filter id="dropshadow" height="130%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="2"/> 
            <feOffset dx="0.5" dy="0.8" result="offsetblur"/> 
            <feMerge>
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>
    </defs>
    <circle id='top' filter="url(#dropshadow)" cx="180" cy="120" r="80" stroke="#2E2E2E" stroke-width="2" fill="url('images/word-cloud.png')"/>
    <circle id='bottom' filter="url(#dropshadow)" cx="500" cy="300" r="80" stroke="#2E2E2E" stroke-width="2" fill="url('images/word-cloud.png')"/>
    <circle id='extra' filter="url(#dropshadow)" cx="180" cy="560" r="80" stroke="#2E2E2E" stroke-width="2" fill="#ffffff"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-16T08:10:31.050

svg 元素的图像填充是通过[SVG 模式](http://www.w3.org/TR/SVG/pservers.html#Patterns)实现的......

```
<svg width="700" height="660">
  <defs>
    <pattern id="image" x="0" y="0" patternUnits="userSpaceOnUse" height="1" width="1">
      <image x="0" y="0" xlink:href="url.png"></image>
    </pattern>
  </defs>
  <circle id='top' cx="180" cy="120" r="80" fill="url(#image)"/>
</svg> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-06-09T20:12:43.880

好吧，我无法使用已接受的答案。这就是我最终这样做的方式：

```
 <svg width="100" height="100">
      <defs>
        <pattern id="image" patternUnits="userSpaceOnUse" height="100" width="100">
          <image x="0" y="0" height="100" width="100" xlink:href="http://i.imgur.com/7Nlcay7.jpg"></image>
        </pattern>
      </defs>
      <circle id='top' cx="50" cy="50" r="50" fill="url(#image)"/>
    </svg>
```

如果要自定义大小，请将其用作比例参考：

x = yourPreferredSize

```
<svg width=">2x" height=">2x">
  <defs>
    <pattern id="image" patternUnits="userSpaceOnUse" height=">2x" width=">2x">
      <image x="0" y="0" height="2x" width="2x" xlink:href="http://i.imgur.com/7Nlcay7.jpg"></image>
    </pattern>
  </defs>
  <circle id='top' cx="x" cy="x" r="x" fill="url(#image)"/>
</svg> 
```

（此比例适用于平方图像）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-02-23T18:07:58.050

我知道这是一个老问题，但我使用过滤器来覆盖图像。由于缩放，上述解决方案对我不起作用，并且看起来图像是平铺的。我用这个代替，我希望它也能帮助其他人。

```
<svg width="700" height="660">
    <filter id="this_image" x="0%" y="0%" width="100%" height="100%">
        <feImage xlink:href="test_image.png"/>
    </filter>
    <circle filter="url(#this_image)" cx="180" cy="120" r="80" />
</svg> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-11-02T22:27:47.967

[通过适当的解释解决了图像重复问题](https://stackoverflow.com/questions/22883994/crop-to-fit-an-svg-pattern)（感谢 AmeliaBR）

TL;DR: 使用了`objectBoundingBox`and的概念`preserveAspectRatio`！

```
<svg height = "10%" width = "10%">
  <defs>
    <pattern id = "attachedImage" height = "100%" width = "100%"            
                   patternContentUnits = "objectBoundingBox">
       <image xlink:href = "url.png" preserveAspectRatio = "none" 
              width = "1" height = "1"/>
    </pattern>
  </defs>
<circle cx = "50%" cy = "50%" r = "35%" fill = "url(#attachedImage)"/>
</svg> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-22T14:33:12.773

这是我的解决方案，不同之处在于它不使用`patternUnits="userSpaceOnUse"`并且您指定图像元素的所需宽度和高度。

```
<defs>
    <pattern id="{some name}" x="0" y="0" width="1" height="1">
        <image href="{image url}" x="0" y="0" width="{desired width}" height="{desired height}"></image>
    </pattern>
</defs> 
```

# java - 使用 Hibernate (JSR 303) 方法验证来比较参数

> ID：11496737
> 
> 赞同：2
> 
> 时间：2012-07-16T00:11:06.267
> 
> 标签：java, hibernate, aspectj, bean-validation, hibernate-validator

我正在广泛使用 JSR303 方法验证器来自动验证对我的服务层的输入，并在 aspectj 的帮助下自动进行。肯定缺少的一件事是进行交叉参数验证的能力，例如比较两个日期参数。如何通过休眠方法验证来实现这一点？可能吗 ？还有其他推荐的方法来解决这个问题吗？

这是我方面的当前代码

```
public abstract aspect ValidationAspect {
@Inject
private Validator validator;

protected ParameterValidationError[] validateParameters(
        JoinPoint jp) {         
    MethodSignature methodSignature = (MethodSignature)jp.getSignature();
    Method targetMethod = methodSignature.getMethod();
    Object targetObj = jp.getThis();
    Object[] args = jp.getArgs();
    String[] names = ((CodeSignature)jp.getSignature()).getParameterNames();        

    MethodValidator methodValidador = validator.unwrap(MethodValidator.class);
    Set<? extends MethodConstraintViolation<?>> validationErrors = methodValidador.validateAllParameters(                       
            targetObj,
            targetMethod,
            args);

    ParameterValidationError[] output = new ParameterValidationError[validationErrors.size()];
    int idx = 0;
    for (MethodConstraintViolation<?> mcv : validationErrors ) {
        output[idx++] = new ParameterValidationError(
                mcv.getParameterIndex(),
                names[mcv.getParameterIndex()],
                mcv.getInvalidValue(),
                mcv.getMessage());          
    }   

    return output;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:00:07.030

Hibernate Validator 的方法级验证不允许跨参数验证。它实现了 Bean Validation 1.0 附录 C 中指定的方法验证。

Bean Validation 1.1 正在进行的讨论的一部分是是否以及如何支持此功能。也可以看看

*   [http://beanvalidation.org/proposals/BVAL-241/#cross_parameter](http://beanvalidation.org/proposals/BVAL-241/#cross_parameter)
*   [https://hibernate.onjira.com/browse/BVAL-232](https://hibernate.onjira.com/browse/BVAL-232)

# css - 仅在 IE 和 Firefox 上的 html UL 列表中的空白。Chrome 显示正常

> ID：11496739
> 
> 赞同：0
> 
> 时间：2012-07-16T00:11:11.017
> 
> 标签：css, list

您好，我似乎在几个浏览器中遇到了一个 html 列表的问题。我的页面和代码可以在这里查看 - [http://onlinebanter.com/latest](http://onlinebanter.com/latest)

它是主要区域中的最后 4 个评论块。正如您从附加的屏幕截图中看到的那样，IE 和 Firefox 中的情况并不好

[http://i.stack.imgur.com/tp5GL.jpg](http://i.stack.imgur.com/tp5GL.jpg)

在 chrome 上一切都很好。我不知道如何摆脱那个讨厌的大空白空间。什么都试过了。所有建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:56:32.727

问题在于你的css`padding`中的`.views-field-picture`类，删除这个：

`padding: 4px;`

它应该是这样的：

```
.views-field-picture {
    width: 23px;
} 
```

希望能帮助到你！

# .net - 遍历当前方法的参数

> ID：11496742
> 
> 赞同：1
> 
> 时间：2012-07-16T00:11:38.593
> 
> 标签：.net, vb.net, cil

嘿伙计们，我需要能够通用地遍历当前函数/子（用于日志记录）的所有参数，例如：

```
Public sub SampleHandler(ByVal Sender as Object, ByVal e as EventArgs)
    Dim argholder as List(of Object)
    For each arg in getcurrentargs() '<-------- That thing
        argholder.add(arg)
    Next
    Log(argholder)
    'Continue doing method things
End Sub 
```

有什么想法吗？我一直试图通过 Emit（我不完全掌握）和 StackTrace 来提取它们，但到目前为止无济于事。多个消息来源告诉我，MSIL 将能够完成此任务，但与我交谈过的任何人都无法给我一个有效的实现或对 HOW 的清晰解释。

附加信息：

我需要能够遍历函数的所有参数并将它们的值添加到列表中。无论是通过某种方法提取名称然后可以利用它们来获取值，还是只是某种可以引用它们的通用标识符，任何一种方式都可以，但它必须是程序化的和静态代码块。

目的是在任何非敏感函数（我正在为这个项目使用的代码有几百个）中，我希望能够插入对这个代码块的内联引用（找出那个方法) 来捕获函数的名称 (done)、它的模块/类 (done)、运行时间 (done)、结果 (如果是函数；done)、当前的 err_level 是什么 (done) 以及正在使用什么值作为参数传入（根据我知道模块/类和函数名称的逻辑，我可以在必要时匹配这些值），以便我可以转身并记录它们。“敏感”功能，我必须以不同的方式处理，这样我就不会注销 p/w 和 u/n 或类似的东西；但这些都得到了照顾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:41:46.107

一种可能性是更改您的 Log() 例程以使用参数数组...

```
Sub Log(ParamArray o() As Object)
  For i As Integer = 0 To o.GetUpperBound(0)
    '...do stuff....
  Next
End Sub 
```

然后在调用时添加每个参数...

```
Public sub SampleHandler(ByVal Sender as Object, ByVal e as EventArgs)
    Call Log(Sender, e)
    'Continue doing method things
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:43:52.013

You could try [System.Reflection.MethodBase.GetCurrentMethod](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getcurrentmethod.aspx) and then use the returned methods [GetParameters](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getparameters.aspx) function.

Having said that, there [is some confusion/disagreement](https://stackoverflow.com/questions/471693/using-reflection-to-get-method-name-and-parameters) as to whether or not this will actually work, but it is probably worth a try if for no other reason than to eliminate it as a possibility.

# python - wx.Dragimage 不工作

> ID：11496743
> 
> 赞同：0
> 
> 时间：2012-07-16T00:11:43.460
> 
> 标签：python, wxpython

我正在尝试制作一个虚拟足球剧本，并且需要能够拖放位图（在本例中为 X 或 O）以进行足球比赛。这是我的一些代码。

```
class NewDefense(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self, parent, id, 'New Defense', wx.Point (0,0), size=(1000,700), style=wx.MINIMIZE_BOX|wx.SYSTEM_MENU|wx.CAPTION|wx.CLOSE_BOX|wx.CLIP_CHILDREN)
        self.SetBackgroundColour('#2a2a2a')
        bg = wx.Panel(self)
        wx.Frame.CenterOnScreen(self)

        x2 = wx.Image(defense, wx.BITMAP_TYPE_ANY).ConvertToBitmap()
        data = wx.BitmapDataObject(x2)

        ################# This is where the problem is.        

        drag = wx.DragImage(x2)
        drag.BeginDrag((0,0), self, fullScreen=False, rect=None)
        drag.Show() 
        #drag.Move()
        drag.EndDrag()
        #################  

        ##LINE
        wx.StaticBitmap(bg, wx.NewId(), x2, (330, 270), (x2.GetWidth(), x2.GetHeight()))
        wx.StaticBitmap(bg, wx.NewId(), x2, (410, 270), (x2.GetWidth(), x2.GetHeight()))
        wx.StaticBitmap(bg, wx.NewId(), x2, (490, 270), (x2.GetWidth(), x2.GetHeight()))
        wx.StaticBitmap(bg, wx.NewId(), x2, (570, 270), (x2.GetWidth(), x2.GetHeight()))

        ##LINE-BACKERS
        wx.StaticBitmap(bg, wx.NewId(), x2, (320, 160), (x2.GetWidth(), x2.GetHeight()))
        wx.StaticBitmap(bg, wx.NewId(), x2, (450, 160), (x2.GetWidth(), x2.GetHeight()))
        wx.StaticBitmap(bg, wx.NewId(), x2, (580, 160), (x2.GetWidth(), x2.GetHeight())) 
```

我现在拥有的最终会起作用吗？我应该改变或调查什么？我已经搜索了这个主题，这让我很困惑。关于我能做什么的任何建议？

注意：这只是我的一小部分代码。如果需要更多，请告诉我。

我尝试运行程序，但无法移动位图。pt 应该是什么？位图的位置或移动到的位置？如果它移动到哪里我如何设置它要移动到哪里如果我还没有确切的位置因为我希望能够拖动它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T04:06:29.530

根据上[一个 SO question](https://stackoverflow.com/questions/2062864/how-to-drag-image-in-a-wxpython-frame)的建议，我下载并安装了 wxPython 演示套件（转到[此页面](http://www.wxpython.org/download.php)并下载与您的 wxPython 版本匹配的演示）。它有一些示例代码，您可以查看（只需打开演示并搜索“dragimage”）。

问题似乎是您在 init 中开始拖动事件（当您调用 时`BeginDrag()`）。根据演示，`BeginDrag()`只应在您实际开始拖动操作时调用，即当用户单击并按住图像时。同样，`EndDrag()`在用户释放图像之前不应调用该方法。

我不会复制和粘贴整个演示，但要点是：

*   您需要捕获`wx.EVT_LEFT_DOWN`事件并检查用户是否单击了图像。如果用户确实单击了图像，那么您应该调用`BeginDrag()`
*   您需要捕获`wx.EVT_MOTION`事件并检查 A）如果您当前正在拖动图像，B）如果 A 然后在当前鼠标位置绘制图像。
*   您需要捕获`wx.EVT_LEFT_UP`事件，如果用户当前正在拖动图像，则调用该`EndDrag()`方法并将图像放置在最终位置。

如果您按照我上面的建议下载 wxPython 演示，您可以看到一个完整的工作示例及其所有代码。

# ruby-on-rails - Rails 中嵌套资源的子域

> ID：11496744
> 
> 赞同：1
> 
> 时间：2012-07-16T00:11:48.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, routes, subdomain

我的 rails 应用程序设置为使用此 RailsCast 中描述的子域：

[http://railscasts.com/episodes/221-subdomains-in-rails-3](http://railscasts.com/episodes/221-subdomains-in-rails-3)

但是，现在，路径呈现如下：

[http://organization.domain.com/organizations/1/edit](http://organization.domain.com/organizations/1/edit)

我已经设置了控制器来根据子域选择组织，所以我想知道是否有办法去除路径的 /organizations/:id 部分，例如：

```
link_to edit_organization(@organization) 
```

转到[http://organization.domain/edit](http://organization.domain/edit)，而不是[http://organization.domain/organizations/:id/edit](http://organization.domain/organizations/:id/edit)

由于组织内将有许多嵌套资源（人员、捐赠等），因此 URL 最终不要太长并且路径生成方法保持非常简单很重要。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:46:38.063

您可以使用如下路线：

```
resource :organization, :path => "" 
```

这会将您的网址缩减为“http://organization.domain/:id/edit”。

摆脱它`:id`是棘手的，我认为它不能直接完成。我会做的是这样的：

```
resource :organization, :path => "", :only => [] do
    match "index", :via => :get
    match "new", :via => :get
    match "show", :via => :get, :constraints => {:subdomain => /[a-zA-Z]+/}
    match "edit", :via => :get, :constraints => {:subdomain => /[a-zA-Z]+/}
    match "update", :via => :put, :constraints => {:subdomain => /[a-zA-Z]+/}
    match "create", :via => :post
end 
```

不是很干，但我认为它应该有效。

# visual-studio-2010 - VS2010 安装项目 - 以管理员身份运行

> ID：11496746
> 
> 赞同：11
> 
> 时间：2012-07-16T00:12:08.620
> 
> 标签：visual-studio-2010, installation, uac

我有一个 VS2010 解决方案，其中包含 2 个项目 - 一个 .NET 4 程序和一个安装程序。安装程序只是一个简单的安装项目，具有先决条件 - .NET Framework 4。

问题是我需要安装程序**setup.exe**始终以管理员身份运行，否则安装程序将在 UAC 下失败。（默认情况下它不会提示我提升权限。）

我尝试在 setup.exe 旁边放置一个**setup.exe.manifest**（如下所示）以强制它以管理员身份运行，但不幸的是 Windows 忽略了它，很可能是因为setup.exe 本身中已经嵌入了*另一个*清单文件，它是设置为*asInvoker*而不是*requireAdministrator*。

```
<?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <assemblyIdentity version="1.0.0.0" name="MyApplication.app"/>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
        <requestedExecutionLevel level="requireAdministrator" uiAccess="false" />
      </requestedPrivileges>
    </security>
  </trustInfo>
</asmv1:assembly> 
```

我还尝试添加具有以下属性的启动条件：-

```
(name): Elevated
Condition: Privileged
Message: This installation requires elevated permissions to continue. 
```

这也无济于事。

那么任何人都可以阐明如何解决这个问题吗？

PS 我知道您可以通过更改 setup.exe 的兼容性设置来解决此问题，但这是一个手动过程，无法通过自动构建过程 (TFS) 完成。另外，提供一个带有兼容性设置的快捷方式也很奇怪，因为没有人在同一个文件夹中提供 setup.exe 的快捷方式，更不用说快捷方式需要事先知道 setup.exe 的确切路径。（安装包将被移动。）

* * *

**编辑：顺便说一句，我的问题与**[此处](https://stackoverflow.com/questions/7443930/how-to-make-the-setup-exe-from-a-vs2010-setup-project-ask-for-admin-privileges)描述的问题完全相同。但不幸的是，没有为那个人找到解决方案，提问者只是求助于他的客户手动使用以*管理员身份运行*，这是我试图避免的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T09:59:02.770

正如 Frank 所指出的，Visual Studio 安装项目的行为记录在 Microsoft 的网站上：

[Visual Studio 安装程序部署](http://msdn.microsoft.com/en-us/library/2kt85ked.aspx)

换句话说，`setup.exe`由 VS008 和 VS2010 生成的程序将*始终*在不提示权限提升的情况下运行（除非您使用“以*管理员身份运行*”上下文菜单选项明确运行它）。它依次将每个必备组件以及主 MSI 安装程序作为单独的进程运行，并提示任何需要它的特权提升。这意味着可能有多个海拔提示。

但是，由于某些原因，这并不总是有效。就我而言，当我运行 .NET Framework 先决条件时，根本不会出现提升提示`setup.exe`。**但是**如果我直接运行必备安装程序，就会出现提示。这意味着问题不在于必备组件，而在于其中一个`setup.exe`或 Windows 本身。

解决方案（或解决方法）？根据上面链接中的微软，我们可以*强制* `setup.exe`启动每个必备组件和主 MSI 以运行*提升*提示。为此，我们需要手动编辑设置项目文件 (.vdproj) 并将以下`RequiresElevation`值更改为**TRUE**，如下所示：

```
"MsiBootstrapper"
{
    "LangId" = "3:1033"
    "RequiresElevation" = "11:TRUE"
} 
```

这不是理想的解决方案，但它足够接近我的原始要求，因此我对这个解决方案感到满意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-12T06:02:07.490

如果你想在管理员模式下运行 MSI，方法是，1) 打开你的安装项目，查看->启动条件。

2）右键单击启动条件，并在您的启动条件中添加一个新条件。

3) 右键单击​​条件，选择属性窗口。

4）将条件设置为

> 管理员用户

. 5) 构建和安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T00:29:37.880

我认为您的问题与安装程序的名称有关。这个链接

[当我的 EXE 文件名包含“更新”一词时，如何避免 UAC？](https://stackoverflow.com/questions/4133337/how-do-i-avoid-uac-when-my-exe-file-name-contains-the-word-update)

表示如果名称中包含 Update 或 Setup，则 UAC 将启动。

您可以将安装程序重命名为其他名称吗？

# sql-server-2008 - 使用 SQL Server 2008 安装 SharePoint 2010

> ID：11496749
> 
> 赞同：0
> 
> 时间：2012-07-16T00:12:41.950
> 
> 标签：sql-server-2008, sharepoint, sharepoint-2010

我正在尝试将 SQL Server 2008 安装到 F: 驱动器。最初我收到以下错误：

```
"The INSTANCESHAREDWOWDIR command line value was not specified" 
```

然后我从 SQL 位置复制配置文件 .ini 并将位置更改为 F: 驱动器并将此配置放置到 F: 位置。

然后我尝试从命令提示符安装 SQL Server 2008 并使用以下命令：

```
setup.exe 
-/Action=Install 
-/INSTALLSHAREDDIR="F:\Microsoft Sql Server\\"
-/INSTALLSHAREDWOWDIR="F:\Microsoft Sql Server(x86)\\" 
```

我能够成功安装，但是当我安装 SharePoint 2010 服务器时，它默认将所有数据库创建到 C: 驱动器。我将 LDF 和 MDF 文件手动复制到 F: 驱动器。

我想要的是在驱动器 F 上创建这些数据库：当我安装 SharePoint 时。有人有什么指导或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:54:15.617

您需要更改*服务器属性中的**数据库默认位置*路径：

 *![数据库默认位置](../Images/e5ec16d5619c91172abe7e78abacb194.png)

来源：[更改 SQL Server 数据和日志文件的默认位置](http://www.mytechmantra.com/LearnSQLServer/Changing_default_location_of_Data_and_Log_files.html)*

# objective-c - Objective c 在自定义视图中更改 NSRect 的自动大小

> ID：11496753
> 
> 赞同：0
> 
> 时间：2012-07-16T00:13:15.120
> 
> 标签：objective-c, macos, cocoa, nsrect

标题非常具体地说明了我想要做什么。我有一个自定义视图，并在该视图中绘制了一些元素。如何以编程方式更改自动调整大小的属性？我环顾四周，找不到任何对我有帮助的东西。

目标 C：

```
- (void)drawRect:(NSRect)HTMLContent { 
    NSGraphicsContext* gc = [NSGraphicsContext currentContext];
    [gc saveGraphicsState];
    int height = [[NSScreen mainScreen] frame].size.height;
    int screenwidth = [[NSScreen mainScreen] frame].size.width;
    int emailInnerContentWidth = screenwidth - 510;

    // Horizontal Line
    [[NSColor colorWithCalibratedRed:.8 green:.82 blue:.83 alpha:1] setFill];
    NSBezierPath* drawingPath = [NSBezierPath bezierPathWithRect:NSMakeRect(337, 570, emailInnerContentWidth, 2)];
    [drawingPath fill];

    // Social Icon
    NSRect outrect = NSMakeRect(355, 585, 58, 58);
    [[NSColor lightGrayColor] setStroke];
    [[NSColor colorWithPatternImage:[NSImage imageNamed:@"NoSocialIcon.png"]] setFill];
    NSBezierPath* outcirclePath = [NSBezierPath bezierPath];
    [outcirclePath appendBezierPathWithOvalInRect: outrect];
    [[NSColor lightGrayColor] setStroke];[[NSImage imageNamed:@"NoSocialIcon.png"] drawInRect:outrect fromRect:NSZeroRect operation:NSCompositeSourceOver fraction:1];
    [outcirclePath stroke];

    // Restore graphics state
    [gc restoreGraphicsState];
} 
```

我想将这两种形状设置为不受窗口底部变化的影响。我希望它在窗口顶部改变高度时改变。我查看了 Apple 文档，但似乎没有任何效果。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:22:34.847

因此，对于这两种形状中的每一种：

```
[shape setAutoresizingMask:NSViewNotSizable | NSViewMaxXMargin | NSViewMinYMargin]; 
```

# mysql - 如何在 Perl 中为 MySQL 查询转义 '\n'？

> ID：11496754
> 
> 赞同：2
> 
> 时间：2012-07-16T00:13:37.070
> 
> 标签：mysql, perl

我正在编写一个 Perl 脚本，以使用 OSX 中的 Automator 自动将 Excel 文档上传到 MySQL 数据库表中。我已经写了一个功能查询：

```
load data
local infile '/pathToFile/file.csv'
replace into table database.table
fields terminated by ','
enclosed by '"'
lines terminated by '\r'
ignore 1 lines; 
```

问题是我的 Perl 脚本由于与`\`角色冲突而无法运行。我是一个 Perl 新手，所以我不知道如何正确地转义这个字符以使查询工作。

我的 Perl 脚本：

```
#!/usr/bin/perl

# PERL MODULE
use Mysql;

# HTTP HEADER
print "Content-type: text/html \n\n";

# Set Variables
$host = "127.0.0.1";
$database = "database";
$tablename = "plugin_status";
$user = "user";
$pw = "password";

# PERL MySQL Connector
$connect = Mysql->connect($host, $database, $user, $pw);

# Run Query to update table
$myquery = "load data local infile '/pathToFile/file.csv' replace into table database.table fields terminated by ',' enclosed by '"' lines terminated by '\r' ignore 1 lines;";

# EXECUTE THE QUERY FUNCTION
$execute = $connect->query($myquery); 
```

这是生成的错误：

```
String found where operator expected at perlfile.pl line 20, near ""load data local infile '/pathToFile/file.csv' replace into table database.table fields terminated by ',' enclosed by '"' lines terminated by '"
    (Missing operator before ' lines terminated by '?)
Backslash found where operator expected at perlfile.pl line 20, near "' lines terminated by '\"
    (Missing operator before \?)
syntax error at perlfile.pl line 20, near ""load data local infile '/pathToFile/file.csv' replace into table database.table fields terminated by ',' enclosed by '"' lines terminated by '"
Bad name after r' at perlfile.pl line 20. 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T00:23:58.963

如果您希望生成的字符串包含两字节序列`\r`，则在将字符串包装在中间时需要转义反斜杠`"`。

`"`还要记住，如果您用来包装字符串的内容，则您的字符串不能包含任何自由`"`，如果是这种情况，您将需要转义每个`"`您想成为字符串一部分的内容。请参见下面的示例。

```
my $data = "hello, I can write \"quotes\" inside my string"; 
```

* * *

虽然有更简单的选择，所以你不必担心逃避任何东西¹。

```
$myquery = q{
  load data local infile '/pathToFile/file.csv'
  replace into table database.table
  fields
    terminated by ','
    enclosed by '"'
    lines terminated by '\r'
  ignore 1 lines;
}; 
```

^(^(**1.**)除非你打算`}`在你的字符串中使用..)

* * *

在此处阅读有关字符串和转义序列的更多信息：

*   **[perlmonks.org - Perl 中的字符串文字](http://www.perlmonks.org/?node_id=945)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T00:45:45.577

首先，你*真的*需要`use strict;`and `use warnings;`。没有例外！反正：

```
…enclosed by '"'… 
```

正如 refp 所指出的，perl 停止在那里解析你的双引号字符串。要么用反斜杠解除双引号，要么更好地将其包装在[q{}](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)或[here-doc](http://perldoc.perl.org/perlop.html#%3c%3cEOF)中，而不是双引号。

```
#!/usr/bin/perl
use strict;
use warnings;

# this
my $query = q{
  load data local infile '/pathToFile/file.csv'
    replace into table database.table
      fields terminated by ','
      enclosed by '"'
      lines terminated by '\r'
      ignore 1 lines;
};
# or this
my $query = <<'SQL';
  load data local infile '/pathToFile/file.csv'
    replace into table database.table
      fields terminated by ','
      enclosed by '"'
      lines terminated by '\r'
      ignore 1 lines;
SQL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-06T15:32:45.473

我更喜欢让 mysql 引用我的字符串，就像一个 textarea 消息：

我的 $message = $dbh->quote($in{'message'});

# image - C# 如何处理重叠的 System.Drawing.Regions 区域？

> ID：11496756
> 
> 赞同：1
> 
> 时间：2012-07-16T00:13:53.710
> 
> 标签：image

我正在创建一个 Jigsaw Puzzle 游戏作为我的第一个 C# 程序（到目前为止自学了 3 周），并且我已经在其中走了很长一段路，以至于我可以拍摄位图，将其拆分为图像并制作部分每个图像在需要时透明。我有一组点表示碎片的侧面，绘制边界就可以了。**Graphics Path**将封装这些点，**Region**将 Path 对象作为定义它的参数。

我的问题是，在命中检测方面，C# 如何处理重叠的 System.Drawing Regions？如果一个区域与另一个区域重叠，两个区域会响应命中还是最后绘制的区域会受到命中？

我从阅读本教程中得到了这个想法。2D/RegionIsVisible.htm">http://www.java2s.com/Tutorial/CSharp/0480_2D/RegionIsVisible.htm 并意识到我可以调用 isVisible() 方法来确定要移动哪一组棋子。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T23:10:25.177

实际上，我想出了一个更好的解决方案，只是使用 GraphicsPath 而不是使用区域。重叠不是问题。MouseEvents 关心的只是您单击的位置。任何 GraphicsPath 构造，无论它是否与另一个构造重叠，都是公平的游戏。

无论如何，问题解决了。相交的重叠区域或 GraphicsPath 不是问题！

我的 C# 故障排除游戏的当前进度。现在所有选项卡都是矩形的，但是根据我的新理解，将程序转换为具有弯曲选项卡应该是小菜一碟：

# iphone - MPMoviePlayerController thumbnailImageAtTime:timeOption: 简单案例不起作用

> ID：11496757
> 
> 赞同：0
> 
> 时间：2012-07-16T00:14:10.077
> 
> 标签：iphone, ios, mpmovieplayercontroller

我像这样构建电影播放器​​......

```
 MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:url];
    player.view.frame = myView.bounds;
    player.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [player prepareToPlay];

    [myView addSubview:player.view];
    self.mp = player; 
```

url 指向一个 m3u8 网络流。它播放得很好。然后我要求这样的图像......

```
NSTimeInterval currentInterval = self.mp.currentPlaybackTime;
UIImage *image = [self.mp thumbnailImageAtTime:currentInterval timeOption:MPMovieTimeOptionExact]; 
```

我尝试将 currentInterval 备份一秒钟。我已经尝试了两种时间选项（精确和关键帧），但图像始终为零。知道为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T16:52:43.383

我的理解是`MPMoviePlayerController`缩略图方法不适用于 HTTP Live Streaming (HLS) 流；仅适用于文件。不幸的是，我找不到这方面的权威参考，尽管我在过去几周的某个地方看到或读过它。我自己也有同样的经历。

也就是说，可以使用[`AVAssetImageGenerator`](http://developer.apple.com/library/IOs/#documentation/AVFoundation/Reference/AVAssetImageGenerator_Class/Reference/Reference.html).

**编辑：**

我刚刚测试`AVAssetImageGenerator`了一个常规的 HTTP 文件，以及通过 HLS 访问的同一个文件。它能够从 HTTP 生成缩略图，但 HLS 的缩略图`AVAssetImageGenerator`返回以下错误：

> NSLocalizedFailureReason=此媒体不支持该操作。

因此，总而言之，HTTP Live Streaming 似乎不支持创建缩略图。如果您的情况允许，您可以在服务器上生成缩略图，将它们作为 Web 服务提供，然后在客户端从服务器请求它们。

# mongodb - 在 MongoDB 中锁定文档

> ID：11496763
> 
> 赞同：2
> 
> 时间：2012-07-16T00:15:27.517
> 
> 标签：mongodb, pymongo

我在网络应用程序中使用 pymongo，并且想做一些形式：

```
doc = collection.find(document)
doc.array1.append('foo')
for(y in doc.array2): <do things with y>
doc.array2 = filter(lambda x: ..., doc.array2)
doc.x = len(doc.array2)
collection.save(doc) 
```

有没有什么简单的方法可以处理处理同一个文档的多个请求，并防止一个请求破坏另一个的结果/因为它正在编辑一个过时的版本而使其无效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T00:24:56.780

查看 mongodb 文档中关于[原子操作的部分](http://www.mongodb.org/display/DOCS/Atomic+Operations)

您可能感兴趣的部分是关于更新（如果它仍然是最新的）的部分。

> 1.  获取对象。
> 2.  在本地修改对象。
> 3.  发送一个更新请求，上面写着“如果对象仍匹配其旧值，则将其更新为此新值”。
> 
> 如果操作失败，我们可能想从步骤 1 重试。

当您有许多操作要执行并且您希望避免在数据库上持有锁时，这是一种方法。他们还在该文档中说明了他们通常如何反对持有锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T19:08:46.447

您可以在应用程序级别实现文档锁定。

使用场景：

```
with DocumentLock(doc_id):
  # DocumentLock makes sure no other thread interferes
  doc=db.doc_collection.find_one(doc_id)
  ... # analyse and update the document
  db.doc_collection.save(doc) 
```

我已经为多线程应用程序实现了 DocumentLock 类并[在此处](https://codereview.stackexchange.com/questions/35968/python-app-level-document-record-locking-eg-for-mongodb)发布。

这种*悲观锁定比*[官方文档](http://docs.mongodb.org/manual/tutorial/isolate-sequence-of-operations/)中建议的*乐观锁定*更容易使用。[它在某些条件](https://stackoverflow.com/questions/129329/optimistic-vs-pessimistic-locking)下也更有效（在其他条件下可能效率非常低，因此您必须在使用之前思考和评估）。

# php - 使用 PHP 使用 JavaScript 编写 HTML

> ID：11496766
> 
> 赞同：1
> 
> 时间：2012-07-16T00:16:09.373
> 
> 标签：php, javascript, jquery, html

所以我得到了这个 PHP，它正在编写一些看起来像这样的 JavaScript：

```
echo '<script type="text/javascript">

var videoArr=["'.implode('", "', $videos).'"];
var titleArr=["'.implode('", "', $titles).'"];
var explanationArr=["'.implode('", "', $explanations).'"];
var i = 0;

function appendVideo(i) {

var url ="http://www.youtube.com/embed/" + videoArr[i] + "?rel=0&amp;autohide=1&amp;showinfo=0";

$("#stage").append("<div class=\"video\">");
$("#stage").append(titleArr[i] + "<br />");
$("#stage").append("<iframe width=\"400\" height=\"225\" src=\"" + url + "\" frameborder=\"0\" allowfullscreen></iframe>");
$("#stage").append("<br /><img src=\"images/btn_play.png\" onclick=\"play(\'" + videoArr[i] + "\')\" />");
$("#stage").append("<img src=\"images/btn_show.png\" onclick=\"show(\'" + videoArr[i] + "\')\" /><br />");
$("#stage").append("</div>");
}

</script>'; 
```

但在阅读此内容后：http: [//littleurl.info/wdl](http://littleurl.info/wdl)我了解到我必须在一个附加项中完成所有这些操作，我的 DIV 标记才能正确显示。但是，我发现不可能让我的语法正确，因为我是通过 PHP 完成的。谁能帮我调试下面的代码？请记住，它全部包含在带有单个引号的回声中。

```
$("#stage").append("<div class=\"video\">"+ titleArr[i] + "<br />
<iframe width=\"400\" height=\"225\" src=\"" + url + "\" frameborder=\"0\" allowfullscreen></iframe><br />
<img src=\"images/btn_play.png\" onclick=\"play(\'" + videoArr[i] + "\')\" />
<img src=\"images/btn_show.png\" onclick=\"show(\'" + videoArr[i] + "\')\" /><br />
</div>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:23:43.030

[尝试使用heredoc 语法](http://www.phpf1.com/tutorial/php-heredoc-syntax.html)将您的 HTML/Javascript 保存在 PHP 中的变量中，这样您就不需要转义所有内容：

```
<?php

$javascript_part_1 = <<<END_SCRIPT

    <script>
    ...

END_SCRIPT;

$javascript_part_2 = <<<END_SCRIPT

    ...

END_SCRIPT;

$javascript_part_3 = <<<END_SCRIPT

    ...
    </script>

END_SCRIPT;

?> 
```

然后，只需使用`echo`PHP 的字符串连接：

```
echo $javascript_part_1 . $videos . $javascript_part_2 . $titles . $javascript_part_3; 
```

# objective-c - 将参数从一个 IBAction 传递到另一个

> ID：11496778
> 
> 赞同：0
> 
> 时间：2012-07-16T00:19:21.873
> 
> 标签：objective-c, cocoa-touch, ibaction

下面的代码显示来自数组 (generateWord) 的随机单词，然后根据按下的按钮接受一个字母作为输入。在 letterGuessed 中，我希望能够在 randomWord 变量的内容中搜索输入字母。我知道我将如何搜索，但我无法访问该变量。实现这一目标的最佳方法是什么？

```
- (IBAction)generateWord:(id)sender {
    int arraycount=[wordList count];
    int indexchoice=(arc4random() % arraycount);
    NSString *randomWord = [wordList objectAtIndex:indexchoice];
    self.wordResult.text=[NSString stringWithFormat:@"word: %@ ",randomWord];
}

- (IBAction)letterGuessed:(id)sender {
    NSString *letter=[sender titleForState:UIControlStateNormal];
    [sender setEnabled:NO];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:50:31.420

2种方式..

1）有一个随机变量的全局副本，并在每次单击 generateWord 时更新它。

2）或者您可以通过简单地从您创建的 wordResult textview/textfield 获取字符串内容来规避上述方法

```
 NSString *randomString = self.wordResult.text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:43:55.157

您将“NSString *randomWord”设置为 ivar，因此在“generateWord:”中设置了 randonWord（即“randomWord = [wordList objectAtIndex:indexchoice];”），然后在调用“letterGuessed:”时 randomWord 现在可用。

# ruby - 如何在另一个 Sinatra 应用程序中安装 Sinatra 应用程序？

> ID：11496780
> 
> 赞同：9
> 
> 时间：2012-07-16T00:19:28.233
> 
> 标签：ruby, sinatra

我正在尝试编写一个将组件组合在一起的 Sinatra 应用程序（有点像控制器）。所以对于“博客”相关的东西，我想要一个名为`Blog`mount at的应用程序`/blog`。应用程序中包含的所有路由`Blog`都与其安装路径相关，因此我可以简单地定义一个`index`路由，而无需在路由中指定安装路径。

我最初是通过使用 config.ru 文件并`map`设置到不同应用程序的路由来处理这个问题的。我遇到的问题是我使用了各种需要包含在所有应用程序中的 sinatra gems/extensions/helper，所以有很多重复的代码。

如何将一个 sinatra 应用程序安装在另一个应用程序中，以便应用程序中定义的路由与应用程序的安装位置相关？如果这不可能开箱即用，您能否展示如何完成此操作的代码示例？

这是它可能看起来的简化示例：

```
class App
  mount Blog, at: '/blog'
  mount Foo, at: '/bar'
end

class Blog
  get '/' do
    # index action
  end
end

class Foo
  get '/' do
    # index action
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T18:31:24.800

看看[https://stackoverflow.com/a/15699791/335847](https://stackoverflow.com/a/15699791/335847)，它对命名空间有一些想法。

就个人而言，我会将 config.ru 与映射路由一起使用。如果您真的处于“这应该是一个单独的应用程序还是像这样组织它是否有帮助”之间的那个空间，它允许这样做，然后您仍然可以在不更改代码的情况下自行关闭其中一个应用程序（或只有一点点）。如果您发现有很多重复的设置代码，我会这样做：

```
# base_controller.rb

require 'sinatra/base'
require "haml"
# now come some shameless plugs for extensions I maintain :)
require "sinatra/partial"
require "sinatra/exstatic_assets"

module MyAmazingApp
  class BaseController < Sinatra::Base
    register Sinatra::Partial
    register Sinatra::Exstatic

  end

  class Blog < BaseController
    # this gets all the stuff already registered.
  end

  class Foo < BaseController
    # this does too!
  end
end

# config.ru

# this is just me being lazy
# it'd add in the /base_controller route too, so you
# may want to change it slightly :)
MyAmazingApp.constants.each do |const|
  map "/#{const.name.downcase}" do
    run const
  end
end 
```

[这是Sinatra Up and Running](http://shop.oreilly.com/product/0636920019664.do)的引述：

> 不仅设置，而且 Sinatra 类的每个方面都将被其子类继承。这包括已定义的路由、所有错误处理程序、**扩展**、中间件等。

它有一些使用这种技术（和其他技术）的好例子。由于我处于无耻的插件模式，我推荐它，即使我与它无关！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-13T04:53:53.983

我只是遇到同样的问题。

我发现任何`inclued extend register`或机架中间件样式`use`都有问题。

您可以使用 Ruby 来解决这样的问题：

```
require "sinatra"

class App < Sinatra::Base

  class << self
    def define_routes(&block)
      class_eval(&block)
    end
  end

end

App.define_routes do 

  get "/hello"
    "hello world"
  end
end 
```

# php - 403禁止错误目标c到PHP

> ID：11496782
> 
> 赞同：1
> 
> 时间：2012-07-16T00:19:58.977
> 
> 标签：php, iphone, objective-c, ios, http

我有一个非常多样化的脚本，可以在目标 c 中进行 GET http 调用，但作为回报，我在服务器端收到 403 Forbidden 错误...

我的目标c代码...

```
NSString *result = (__bridge NSString *) CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)videoURL, NULL, CFSTR(":/?#[]@!$&’()*+,;="), kCFStringEncodingUTF8);

NSString *urlString = [NSString stringWithFormat:@"http://www.webprogramming360.com/VideoPush/plist/urlTrans.php?videoID=%@",result];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]];
NSURLConnection *connect = [[NSURLConnection alloc] initWithRequest:request delegate:self];

if(connect) {
    NSLog(@"Successful!  =----= %d",[result length]);
} else {
    NSLog(@"Failure");
} 
```

这非常简单，如果将 urlString 对象更改为此，它实际上可以工作......

```
NSString *urlString = [NSString stringWithFormat:@"http://www.webprogramming360.com/VideoPush/plist/urlTrans.php?videoID=1"]; 
```

但是代码不能以其他方式工作......为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:50:44.837

试试这个：

```
NSString *urlString = [NSString stringWithFormat:@"http://www.webprogramming360.com/VideoPush/plist/urlTrans.php?videoID=%i", [result intValue]]; 
```

# c#-4.0 - 何时在参数上使用 C# out 关键字

> ID：11496784
> 
> 赞同：4
> 
> 时间：2012-07-16T00:20:10.143
> 
> 标签：c#-4.0

我见过一些开发人员`out`在 void 函数的参数列表中使用关键字。我不清楚以下代码的优缺点：

```
List<string> listOfResult;    

public void public void (out listOfResult)
{
    //bla bla
} 
```

相对

```
public List<string> c(out listOfResult)
{
    List<string>  list= new List<string>();
    //bla bla

    return list;
} 
```

`out`这两个代码片段是否完全有效，或者关键字周围有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:24:40.837

`out`当您需要从函数返回多个值时，关键字很方便。很好的例子是`TryXXX`方法，它返回操作状态而不是抛出异常：

```
public bool TryParse(string str, out int value); 
```

但我看不出有任何理由将单个`out`参数与 void 方法一起使用......只需从您的方法中返回该值。它会更容易使用。比较：

```
List<string> list;
GetList(out list); // confusing method name 
```

和

```
List<string> list = GetList(); // nice name, one line of code 
```

如果获取列表可能会引发异常，那么您可以创建如下方法：

```
List<string> list;
if (TryGetList(out list)) // better than exception handling
{
   // list was filled successfully
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:22:28.137

当您需要从函数返回多个值时，out 参数非常方便。

例如，Return 是一个结果列表，但是当返回的列表为空时，您可以使用 out 参数返回错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T00:42:26.093

返回多个参数是一种很好的语法。我个人认为将方法的返回建模为“新对象/类”几乎总是更好。

那将是：

```
class CResult
{
    List<string> firstResult;
    List<string> secondResult;
}

public CResult c()
{
    // do something
    return new CResult() {firstResult = ..., secondResult = ... };
} 
```

[您可以在此处](http://blogs.southworks.net/dgeffner/2011/08/08/object-oriented-algorithms/)查看与此方法相关的更多内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-28T08:07:28.557

//out关键字在函数中使用而不是return。我们可以通过使用 out 关键字来使用多个参数 public void outKeyword(out string Firstname, out string SecondName) { Firstname = "Muhammad"; SecondName = "伊斯梅尔";

```
 } 
```

//按钮单击事件受保护 void btnOutKeyword_Click(object sender, EventArgs e) { string first, second; outKeyword(先出，后出); lblOutKeyword.Text = 第一个 + " " + 第二个；}

# android - 满足应用程序对 Google Maps api 的依赖

> ID：11496786
> 
> 赞同：0
> 
> 时间：2012-07-16T00:20:24.607
> 
> 标签：android

我正在开发一个应用程序，它使用 Google Maps api 在运行时根据您当前的位置为您提供给定业务类型的列表。

我使用运行 Android 2.2.2 的 LG Ally 作为测试设备在 Eclipse 上开发了它。

QA 团队不是我本地的，所以我将我安装在手机上的相同 apk 文件通过电子邮件发送给他们。

这就是奇怪的地方。

一位测试人员能够安装该应用程序并毫无问题地运行它。那个人正在使用运行 Android 2.2.2 的手机 - 就像我一样，虽然我不确定他们的手机是否是 LG Ally。

另一个人正在使用运行 2.3.3 的手机，他们无法运行该应用程序。他们安装了一个应用程序，通过电子邮件向我发送 logcat 输出，唯一看起来甚至模糊相关的消息是：

06-21 14:22:57.147 W/PackageInstaller（8784）：解析清单时出现解析错误。停止安装

我在 Stackoverflow 上读到清单必须包含有关 sdk 的信息。我的 Android 清单包含：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/> 
```

我还在 Stackoverflow 上读到，有些人在安装通过电子邮件发送给他们的应用程序时遇到问题，并提出了 DropBox 之类的建议。

我已经完成了这两个（在我的清单中包含了上面的 sdk 行并通过 DropBox 交付了应用程序），但他们仍然无法运行该应用程序。

这让我想知道谷歌地图的依赖。我没有在我的 apk 中提供 maps.jar 文件。有没有办法可以检查 maps.jar 在运行我的应用程序的设备上是否可用？有没有办法可以提供 maps.jar 文件？如果 maps.jar 已经存在，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:47:15.747

> 有没有办法可以检查 maps.jar 在运行我的应用程序的设备上是否可用？

如果您拥有`<uses-library>`该`android:required="false"`属性，那么即使设备缺少适用于 Android 的 Google 地图插件，您的应用也可以运行。在尝试实际使用 a 之前，您将使用`Class.forName()`查看是否存在，如在[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Maps/NooYawkMapless)中。`MapActivity``MapActivity`

但是，如果您`<uses-library>`缺少某个`android:required`属性，或者将其设置为`true`，则该应用程序根本无法安装在设备上。

> 有没有办法可以提供 maps.jar 文件？

只能以购买用户另一台设备的形式——具有谷歌地图插件的设备——并将其运送给他们。设备要么拥有它（就像大多数合法拥有 Play 商店的设备一样），要么没有（例如，Kindle Fire）。你无法改变这个事实。

# javascript - 这是 javascript 闭包的有效用例吗？

> ID：11496790
> 
> 赞同：9
> 
> 时间：2012-07-16T00:21:40.167
> 
> 标签：javascript, closures, application-design

我已经浏览了关于 SO 的所有其他（优秀）答案（尤其是这个：[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)），但我希望得到您对我对这个概念的理解的反馈。

我知道一个用例是对公共访问隐藏私有方法的实现。

我想到的另一个是将它用作工厂生成器：

```
<script>

function carFactory( make ) {

    var m = make;
    return { manufacture: function ( model ) 

        {console.log("A " + m + " " + model + " has been created");}

    }
}

toyotaFactory = carFactory("toyota");
hondaFactory = carFactory("honda");

toyotaFactory.manufacture("corolla");
toyotaFactory.manufacture("corolla");
hondaFactory.manufacture("civic");

</script> 
```

这输出：

```
A toyota corolla has been create
A toyota corolla has been created
A honda civic has been created 
```

那么你认为它是闭包的有效用例（即使用相同的代码库创建多个工厂）吗？或者我可以使用更好的东西来实现同样的目标吗？

请注意，问题不是关于闭包的技术实现，而是更多关于应用程序设计/开发中的有效用例。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:30:44.713

是的，保持变量私有是闭包的有效用途。它允许您对变量进行私有访问，而无需使其成为公共成员。

有关其他示例，请参阅此参考：[http ://www.crockford.com/javascript/private.html](http://www.crockford.com/javascript/private.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:39:15.970

如果我正确理解了您的问题，您是否不关心将`make`财产保密？如果是这种情况，那么闭包就不是必需的了，您可以使用原型实现相同的功能......

```
function carFactory(model){
  this.m = make;
}

carFactory.prototype.manufacture = function(model){
  console.log('A ' + this.m + ' ' + model + ' has been created');
} 
```

根据[这个问题](https://stackoverflow.com/questions/3493252/javascript-prototype-operator-performance-saves-memory-but-is-it-faster)，这具有相关的性能优势（减少内存和提高速度） 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T00:38:01.180

闭包是非常强大的构造，有很多有用的用途。您在那里使用的那个实际上是一种“黑客”。闭包最常见的用途是，当您实现了一些在中间“做某事”的功能时......并且“做某事”可以或多或少地配置为您想要的任何东西......例如 jQuery ajax 功能当请求出现错误或成功等时可以“做某事”......如果你没有闭包，你只能传递一个“静态定义”的函数，这可能需要收集上下文需要从全局变量中执行您希望它执行的任何操作，或者您必须对所有函数使用相同的签名，就像它在 C 或 C++ 中所做的那样 function (customData) {} ...

因此，每当您必须在某物内部“配置”某些自定义功能时，您将使用闭包......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T23:11:38.857

我试图想出一个信息隐藏/封装的实际例子，这就是我迄今为止的尝试

```
'use strict';

const bank = (accountHolderName, initialDeposit) => {
    let balance = initialDeposit;
    const add = (amount) => {
        balance += amount;
    }

    let subtract = (amount) => {
        balance -= amount
    }

    let printBalance = () => {
        console.log(accountHolderName, "has balance of", balance, "dollars");
    }

    return {
        credit: add,
        debit: subtract,
        balance: printBalance
    }
}

let amy = bank("Amy", 1000);
amy.balance();
amy.credit(100);
amy.balance();
amy.debit(10);
amy.balance();

let sam = bank("Sam", 50);
sam.balance();
sam.credit(50);
sam.balance();
sam.debit(100);
sam.balance(); 
```

运行后，您将获得以下输出

```
Amy has balance of 1000 dollars
Amy has balance of 1100 dollars
Amy has balance of 1090 dollars
Sam has balance of 50 dollars
Sam has balance of 100 dollars
Sam has balance of 0 dollars 
```

好处？

*   该`balance`变量不可直接访问。
*   使用闭包，每个调用者都可以获得自己的数据。艾米`balance`没有干扰`Sam's`数据
*   调用者（`Amy`、`Sam`和其他人）有一个很好的 API 可以使用，而不用担心如何`bank`操作的内部细节。

我还缺少其他东西吗？

# python - 在 TreeView PyQt4 中单击时无法抓取项目？

> ID：11496799
> 
> 赞同：1
> 
> 时间：2012-07-16T00:23:39.120
> 
> 标签：python, qt4, pyqt, pyqt4

我正在尝试从树视图中获取字符串/对象。因此，当用户单击树视图中的任何项目时，我可以在终端上显示它。任何帮助表示赞赏。这是代码。当我单击树视图中的字符串/项目时，它会显示： **PyQt4.QtCore.QModelIndex object at 0xb6b6c7d4** 而不是 **Linux**

```
import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4 import QtCore, QtGui

data = root = [

    ("Linux", [

        ("System",

                [("System name",[]),
         ("Kernel", []),
         ("Drivers", []),
         ("Memory", []),
         ("Processes", []),
                 ("Disk mounted", []), 
         ("Services Running", []),
         ("Installed Packages", [])]),
        #[("System name", [])]),

        ("Network",
        [("Nework confi.",[]),
        ("Interface test", [])]),

        ("PCI Devices",
        [("PCI devices", [])]),

        ("Logs", 
        [("Messages",[]),
        ("Dmesg", [])]),

        ])]

class Window(QWidget):

    def __init__(self):

        QWidget.__init__(self)

        self.treeView = QTreeView()

        self.model = QStandardItemModel()
        self.addItems(self.model, data)
        self.treeView.setModel(self.model)

        self.model.setHorizontalHeaderLabels([self.tr("Object")])

        layout = QVBoxLayout()
        layout.addWidget(self.treeView)
        self.setLayout(layout)
    self.treeView.connect(self.treeView, QtCore.SIGNAL('clicked(QModelIndex)'), self.treefunction)

    def treefunction(self, index):
    print index

    def addItems(self, parent, elements):

        for text, children in elements:
            item = QStandardItem(text)
            parent.appendRow(item)
            if children:
                self.addItems(item, children)
if __name__ == "__main__":

    app = QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T00:44:44.717

轻松修复。[您的信号返回一个 QModelIndex，但您需要使用itemFromIndex](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qstandarditemmodel.html#itemFromIndex)在模型中查找该索引的项目：

```
def treefunction(self, index):
    print index.model().itemFromIndex(index).text()
    # print self.model.itemFromIndex(index).text() 
```

您可以从索引中获取模型，或者专门使用您的模型属性。

虽然我在讲台上，但我想提一下连接信号和插槽的非常棒的新型方法，只要您使用的是 Qt 4.5+

```
self.treeView.clicked.connect(self.treefunction) 
```

请注意您不必再指定基于字符串的签名。它完全是对象样式，您可以直接访问信号对象并告诉它要连接的可调用插槽。

# javascript - Mootools 动画背景颜色

> ID：11496806
> 
> 赞同：2
> 
> 时间：2012-07-16T00:24:31.187
> 
> 标签：javascript, optimization, animation, mootools

我有一个颜色列表，需要将其作为文档正文背景颜色进行动画处理。

```
var bgs = [
    "BlanchedAlmond",
    "Blue",
    "BlueViolet",
    "Brown",
    "BurlyWood",
    "CadetBlue",
    "Chartreuse",
    "Chocolate",
    "Coral",
    "CornflowerBlue",
    "Cornsilk",
    "Crimson",
    "Cyan",
    "DarkBlue",
    "DarkCyan"
]; 
```

现在，使用[mootools 的 colorToHex() 自定义函数](https://stackoverflow.com/a/3892864/863980)，我最终得到以下代码：

```
window.addEvent('domready', function() {
  var current;
  (function() {
    selected = ~~(Math.random() * bgs.length);

    // is it a right way to avoid the repetition?
    current = (selected == current) ? ((bgs.length-1) % (selected+1)) : selected;
    // -1 is to avoid the edge case,
    // +1 is to avoid the NaN in case select is 0

    $(document.body).set('tween', {duration: '1500'})
      .tween("background-color",bgs[current].colorToHex());
  }).periodical(1000);
}); 
```

**问题**

1.  ^(（上述代码块的优化）)从性能优化的角度来看，有没有更好的方法来执行这个动画？

2.  ^(（与 jQuery 相比）) jQuery 对应物会更*高效*、更*优雅*吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:27:25.043

好的，我有 2 分钟的时间来检查它并尝试让它变得更好:)

..这是工作示例：http://jsbin.com/evofuw/2 [（](http://jsbin.com/evofuw/2)以及此处的代码[http://jsbin.com/evofuw/2/edit#javascript](http://jsbin.com/evofuw/2/edit#javascript)）

..btw，我在您的版本中发现了一些问题：

*   `selected = ~~(Math.random() * bgs.length);``getRandom()`您还没有定义选择，+ MooTools 中有一个可用于数组的内置方法。

*   为避免重复和您所做的所有“混乱”，请从该数组中删除该随机元素；）

*   为什么你不使用`onComplete`补间回调？使用期刊 ( `setInterval`) 与使用回调绝不相同（而且大多数时候是不正确的）。

*   每次运行该匿名函数时，您都会（通过`$`）检索未缓存的主体。好的，这是`body`缓存元素的好习惯 :)

*   关于 q#2，绝对不是。:)

* * *

这是我的版本：

```
// a namespace, more elegant :)
var app = {};

// the array with colors
app.bgs = [
    "BlanchedAlmond",
    "Blue",
    "BlueViolet",
    "Brown",
    "BurlyWood",
    "CadetBlue",
    "Chartreuse",
    "Chocolate",
    "Coral",
    "CornflowerBlue",
    "Cornsilk",
    "Crimson",
    "Cyan",
    "DarkBlue",
    "DarkCyan"
];

// the function to change bg color
app.changeBGColor = function( b ){
  // random select element
  var selected = app.bgs.getRandom();
  // delete that element from the array
  app.bgs.erase(selected);
  // tween background color
  b.tween('background-color',selected.colorToHex());
}

window.addEvent('domready', function() {
  // cache body element
  var b = $(document.body);

  // set tween stuff
  b.set('tween', {
    duration : 1500,
    onComplete : function(){
      if( app.bgs.length ) { // if the array contains elements, change color
        app.changeBGColor(b);
      } else { // otherwise do nothing
        console.log('array empty! end!');
      }
    }
  });

  // start 1st time
  app.changeBGColor(b);

}); 
```

附言。如果你想“永远”设置动画，只需使用另一个数组（在哪里推送已删除的值），然后在另一个数组为空时交换数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T00:00:34.907

**答案1：**

我同意`stecb`；您可以缓存这些值并使用 getRandom()。但是为了无限期地继续动画，你不想从数组中删除元素。因此，为避免连续重复选择，只需交换`(cached_length-1)`和的位置即可`(selected+1)`。

此外，就性能而言，（您引用的那个）建议的方法*colorToHex*`csuwldcat`在整个动画中成本最高。我强烈建议您在**bgs**数组中使用十六进制代码。如果这不是一个选项，您必须在同一页面上使用[*colourNameToHex()*函数](https://stackoverflow.com/a/1573141/863980)。`Greg`

最后*，periodical(* _interval *)*用于设置相邻补间操作**之间的***延迟，而* *持续时间*是一种颜色转换所花费的时间。Mootools 还提供了一个*delay()*函数来暂停顺序流。但在这种情况下，使用*priodical()*在固定间隔后触发转换是有意义的。

 *****这是您的代码的另一个版本：

```
window.addEvent('domready', function() {
    var cached_length = bgs.length;
    var myElement = new Fx.Tween(document.body, {duration: '1500'});
    var current, selected;
    (function() {
       selected = ~~(Math.random() * bgs.length);
       current = (selected == current) ?
                         ((selected + 1) % (cached_length - 1)) : selected;

       /* console.info("current: "+bgs[current]); */
       myElement.start("background-color",bgs[current]); // if you use Hex codes 
                                                        // instead of color names
    }).periodical(1000);
}); 
```

**答案 2：**

由于 jQuery 需要一个插件`jQuery.Color`来为背景颜色设置动画，这种*额外的*分层复杂性可能会影响性能，但它无法与 Mootools（它是扩展的 Javascript 核心，而不是分层框架）的性能相媲美。*****

# c# - 什么词典 意思是？

> ID：11496811
> 
> 赞同：8
> 
> 时间：2012-07-16T00:25:22.223
> 
> 标签：c#, dictionary

我在一个在线教程中遇到了这个结构：

```
Dictionary<string, /> dictionary = new Dictionary<string, />(); 
```

我以前没有见过这种语法，也不确定它是什么意思。我什至不确定它是否是有效的语法，因为我无法自己编译它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T00:30:34.363

马特，你的直觉是正确的......它不是有效的语法。正斜杠字符不能是任何有效类型名称的一部分。

在查看了有问题的教程以及字典的使用方式之后，看起来定义应该是`Dictionary<string, object>`. 当代码发布到 CodeProject 时，可能会出现一些奇怪的格式错误。

# jaxb - JAXB 是否支持动态读取 xml 标签

> ID：11496812
> 
> 赞同：1
> 
> 时间：2012-07-16T00:25:31.173
> 
> 标签：jaxb, xml-parsing

jaxb 中是否有任何方法可以动态读取 xml 标签。例如，我有两个 xml 文件都有不同的标签名和属性。我想使用一个方法读取这两个 xml 文件。我不想使用 getelementByTagname 和 all.All我需要动态读取 xml 标签。JAXB 是否支持这一点，或者有任何其他概念可以做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:40:31.480

您可以创建一个`JAXBContext`代表多个模型的单一模型。只要根对象使用`@XmlRootElement`(or `@XmlElementDecl`) 进行注释，那么您的 JAXB (JSR-222) 实现就会根据 XML 输入实例化正确的对象。

*   [http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html)

# css - Twitter 引导边距 ul 标签

> ID：11496815
> 
> 赞同：0
> 
> 时间：2012-07-16T00:26:21.937
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, margin

我正在使用 Twitter Bootstrap，但不明白
如何`margin 0 0 9 15`设置

```
[ul class="taxons-list"] 
```

在我的网站[vk-magazin.com](http://vk-magazin.com)
上， 我想要达到以下结果：

![利润](../Images/cf9a1845fdf8acb9a0dfbb1adca0df74.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T00:30:55.477

试试这个 CSS 规则：

```
ul.taxons-list {
    padding: 0;
    margin: 0 0 9px 15px;
} 
```

我使用 Firebug 和这种样式编辑了您的 HTML，它的工作原理与您的图片一样。

# ruby-on-rails - 使用 Haml + Mustache 在 JS 和 Rails 之间共享模板

> ID：11496819
> 
> 赞同：2
> 
> 时间：2012-07-16T00:27:26.430
> 
> 标签：ruby-on-rails, coffeescript, haml, mustache

我正在尝试制作 Rails 和客户端都使用的通用模板，即在 coffescript 中。

我使用[hogan_assets](https://github.com/infbio/haml_assets)和[haml_assets](https://github.com/leshill/hogan_assets)将模板导出到 JS。但是我找不到使用 HAML 和 Mustache 呈现服务器端视图的方法。

[这里](https://stackoverflow.com/questions/8215103/mustache-and-haml)描述了部分解决方案，但它不适用于视图助手，即“渲染部分”不起作用。

由于某些未知原因，处理程序的链接（例如 .mustache.haml）不起作用，我既找不到关于 Rails 模板处理程序的好信息，也找不到有关如何构建“可链接”处理程序的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:16:05.413

我最近一直在尝试类似[smt_rails](http://railsware.com/blog/2012/04/12/shared-mustache-templates-for-rails-3/)的东西，但我还没有找到灵丹妙药。

# java - Jasper PDF 报告未将强标记（）之间的日期显示为粗体

ID：11496821

赞同：0

时间：2012-07-16T00:27:39.350

标签：java, jasper-reports

# c# - C#中的Datagridview列？

> ID：11496825
> 
> 赞同：0
> 
> 时间：2012-07-16T00:28:41.130
> 
> 标签：c#, winforms, datagridview

我怎样才能让一列能够包含文本框或图像？我正在尝试向该列添加任何类型的数据，无论是文本还是图像。我将如何在 C# 中执行此操作？

好的，以编程方式，我将在同一列中同时拥有文本框和图像......我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T01:47:21.913

Here is an example. However you will need to handle the default image (in absence it is going to have a cross marked image). Refer to this [MSDN link](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewimagecolumn.image.aspx)

```
 private void Form1_Load(object sender, EventArgs e)
    {
        DataTable dataTable = new DataTable();
        dataTable.Columns.Add("Name");
        dataTable.Columns.Add("Image");

        dataTable.Rows.Add("Desert", @"C:\Users\Public\Pictures\Sample Pictures\Desert.jpg");
        dataTable.Rows.Add("Tulips", @"C:\Users\Public\Pictures\Sample Pictures\Tulips.jpg");

        dataTable.AcceptChanges();

        DataGridViewTextBoxColumn textColumn = new DataGridViewTextBoxColumn();
        textColumn.DataPropertyName = "Name";
        textColumn.HeaderText = "Name";
        textColumn.Width = 100;
        dataGridView1.Columns.Add(textColumn);

        DataGridViewImageColumn imageColumn = new DataGridViewImageColumn();
        imageColumn.DataPropertyName = "Image";
        imageColumn.HeaderText = "Image";
        imageColumn.Width = 100;            
        dataGridView1.Columns.Add(imageColumn);

        dataGridView1.DataSource = dataTable;
    }

    private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (this.dataGridView1.Columns[e.ColumnIndex] is DataGridViewImageColumn)
        {
            string imagePath = (e.Value ?? "").ToString().Trim();
            if(System.IO.File.Exists(imagePath))
                e.Value = Image.FromFile(imagePath);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:28:19.140

要在 中添加`TextBox`控件`DataGridView`，请单击智能标记并选择添加列。选择`DataGridViewTextColumn`并单击添加。选择`DataGridViewImageColumn`是否选择图像。

![在此处输入图像描述](../Images/0b672f746eac6733e24e4fd287b7bcb6.png)

# c++ - 使用 std::unique_ptr 将所有权转移到函数

> ID：11496826
> 
> 赞同：9
> 
> 时间：2012-07-16T00:29:07.200
> 
> 标签：c++, smart-pointers

我正在尝试学习如何使用智能指针并了解所有权。当我`auto_ptr`按值将 an 传递给函数时，该函数将独占该指针。所以当函数完成时，它会删除我传递给它的指针。

但是，当我尝试使用 a 执行此操作时出现编译错误`unique_ptr`，好像为`unique_ptr`s 禁用了复制分配。通过引用传递 a`unique_ptr`似乎不会转移所有权，它只是为函数提供了对`unique_ptr`.

如何`auto_ptr`通过将所有权传递给与 s 一起工作的函数来获得 s 的行为`unique_ptr`？我希望有一个详细教程的链接`unique_ptr`，因为到目前为止，我读过的那些似乎只谈论`auto_ptr`或谈论 Boost 可用的智能指针，并且似乎忽略了它，`unique_ptr`因为`shared_ptr`它涵盖了它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T00:31:43.543

> 但是，当我尝试使用 unique_ptr 执行此操作时出现编译错误，好像为 unique_ptr 禁用了复制分配。

这是。`unique_ptr`有一个，而且只有一个，所有者。它不能被复制，因为这会导致两个所有者。为了将其按值传递给另一个函数，原始所有者必须放弃所有权，使用`std::move`.

为了使用`unique_ptr`，你必须了解[移动语义](https://stackoverflow.com/questions/3106110/can-someone-please-explain-move-semantics-to-me)。

`auto_ptr`只是对真正不起作用的真正移动语义的一种粗略的近似。最好干脆忘记这个类曾经存在过。

# box-api - 框编辑集成

> ID：11496827
> 
> 赞同：1
> 
> 时间：2012-07-16T00:29:20.143
> 
> 标签：box-api

是否可以在第 3 方产品中有直接编辑链接并使用 Box Edit 插件直接编辑文件？我已经在我们的 ERP 应用程序中列出了文件夹和文件，并希望允许以与使用 BoxEdit 插件在浏览器中相同的方式进行编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:21:40.037

Box Edit 目前无法由第三方以编程方式访问。我们可能会在未来探索开放它，但没有任何短期计划。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T02:36:22.453

Box 确实可以通过我们的 API 访问连接的编辑器，例如 Zoho 和 Gdocs。但是，它使用起来很棘手，而且还没有准备好公开使用。如果您有兴趣，可以通过 api [at] box [dot] com 给我们发送电子邮件，我们或许可以为您提供测试版访问权限。

# jquery - JQuery：将表单添加到

> ID：11496828
> 
> 赞同：0
> 
> 时间：2012-07-16T00:29:30.123
> 
> 标签：jquery, forms, html-table, var, prepend

我有一个 html 表，我想为每个 tr 附加一个表单。我写了这个：

```
<script>

var bform = '<form name="input" action="html_form_action.asp" method="get"><input type="hidden" value="event"></input><input type="submit" value="Submit" /></from>';

$('tr').prepend(bform);

</script> 
```

但它似乎对我不起作用，也不会在控制台中引发错误。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:32:47.770

确保在 jQuery 和 DOM 加载后执行它：

```
$(function(){
    $('tr').prepend(bform);
}); 
```

或者：

```
$(document).ready(function(){
    $('tr').prepend(bform);
}); 
```

此外，您的结束`</form>`标签所在的位置有错字`</from>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:33:57.827

添加`tr`和`td`到您的`bform`

```
var bform = '<tr><td> YOUR FORM HERE</td></tr>' 
```

当您将字符串添加到 a`tr`时，您将插入 a `table`，因此，您当前的代码无效：

```
<table>
    <form name="input" action="html_form_action.asp" method="get">
        <input type="hidden" value="event"></input>
        <input type="submit" value="Submit" />
    </from>';
    ^^^^^ INVALID HTML ^^^^^

    <tr>
        <td>CONTENT</td>
    </tr>
</table> 
```

正如 Blender 所说，确保将代码放入`jQuery(document).ready(function($){})`

此外，您不需要 close `inputs`，因此，两者都是有效代码：

```
<input type="hidden" value="event">
<input type="submit" value="Submit"> 
```

# java - 本指南中的 JPA 实现是什么？

> ID：11496836
> 
> 赞同：1
> 
> 时间：2012-07-16T00:30:41.547
> 
> 标签：java, hibernate, jakarta-ee, jpa, netbeans

我在使用 JPA 的 RESTful Web 服务上遵循了这个 NetBeans 指南 - [http://netbeans.org/kb/docs/websvc/rest.html](http://netbeans.org/kb/docs/websvc/rest.html)

我认为 JPA 应该是一个规范，您会使用 Hibernate 之类的东西作为应用程序中的实际实现。但是本指南根本没有提到任何实现。那么实现从何而来，NetBeans 是否提供了自己的 JPA 实现呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:59:40.710

该教程使用 Glassfish 作为应用服务器。它提供 JavaEE API 的实现，对于 JPA，它是 EclipseLink。这个想法是您的应用程序不附带这些库 (JAR)，而是依赖于应用程序服务器提供的库

一旦你让它工作，如果你想了解不同的 JPA 实现或不同的应用程序服务器，那么你可以尝试在 JBoss 上运行相同的应用程序，它使用 Hibernate 作为其 JPA 实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:34:03.250

大概是容器提供的JPA（可能是Glassfish）。

# encryption - AES 加密和混淆 ID

> ID：11496839
> 
> 赞同：0
> 
> 时间：2012-07-16T00:31:03.567
> 
> 标签：encryption, cryptography, aes, uniqueidentifier

我正在考虑散列敏感 ID 数据的小块，但一旦被混淆，我需要*保持数据块的完整唯一性。*

所以，我想出了加密一些公开的输入数据（比如 128 位零）的想法，并***使用我想要混淆的数据作为密钥/密码，然后将其丢弃***，从而保护原始数据免受永远被发现。

我已经了解散列算法，但我的问题是我需要***保持完全的唯一性***（一般来说是输入到输出的**1:1 映射），同时仍然*****无法检索实际输入。***散列无法提供此功能，因为在此过程中会丢失信息。

**数据一旦“加密”就没有必要被检索。**从那时起，它只能用作 ID 号。

实际的 GUID/UUID 在这里不合适，因为我需要手动控制每个标识符的标识符。ID 不能是未知的或任意生成的数据。

* * *

**编辑：**为了明确这些标识符是由**什么组成的：**

*   **（未加密）** 64 位时间戳
*   ID 生成计数器（每个文件类型一个计数）
*   随机数据（使多个加密密钥不同）
*   MAC 地址（或者如果不可用，设置最高位 + 随机数字）
*   其他 PC 特定信息（来自注册表）

整个内容加起来应该是 192 位，但加密部分的内容大小可能会有所不同（这绝不是最终规范）。

* * *

**鉴于：**

*   静态 IV 值
*   任意 128 位密钥
*   静态 128 位输入

**在给定相同的输入和 IV 值的**情况下，AES 密钥的处理方式是否会导致`1:1 key<---->output`映射？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T21:11:01.663

不。抽象地说，AES 是一系列排列，您可以使用密钥选择一个随机排列。对于其中一种排列（即在给定的 AES 密钥下进行加密），您不会遇到冲突，因为排列是双射的。

但是，对于两种不同的排列（即在不同的 AES 密钥下进行加密，这就是您所拥有的），无法保证不会发生冲突。事实上，由于生日悖论，碰撞的可能性可能比你想象的要高。

如果您的 ID 很短（< 1024 位），您可以对它们进行 RSA 加密，这样就可以满足您的需求。你只需要忘记私钥。**

# nhibernate - QueryOver 中的 Nhibernate .class 等效项

> ID：11496843
> 
> 赞同：5
> 
> 时间：2012-07-16T00:31:28.837
> 
> 标签：nhibernate, nhibernate-mapping, hql, queryover

以下是特定类型类的 HQL 查询

```
select a from Animal a
where TYPE(a) in ('Cat', 'Dog')
and a.sex = 'Male'
order by a.name

select a from Animal a
where a.class in ('Cat', 'Dog')
and a.sex = 'Male'
order by a.name 
```

我想知道是否有使用 QueryOver 的等价物？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T14:15:18.770

您可以使用`GetType`QueryOver`IsIn`扩展方法来完成此操作：

```
session.QueryOver<Animal>()
    .Where(a => a.GetType().IsIn(new[] { "Cat", "Dog" })
    /* .. etc */ 
```

您应该使用您的 NHibernate 映射使用的鉴别器值。

# timezone - Fullcalendar - 时区偏移

> ID：11496850
> 
> 赞同：0
> 
> 时间：2012-07-16T00:32:11.253
> 
> 标签：timezone, fullcalendar

我遇到了一个问题-想知道可以做些什么来克服。事件动态地来自数据库。服务器在美国 - 所以那是 GMT-4 小时。

但我在时区 GMT+2

所以现在（凌晨 3 点 30 分）- fullcalendar 向我显示这是星期一（fullcalendar 看到的我的本地时间），但是事件是在服务器时间到来之前 - 即星期日。

所以如果我理解正确的话——在某些情况下，这些活动可能会休息一天。

可以做些什么来克服这个问题？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T04:11:14.940

我认为这取决于您如何在日历中设置日期。如果日期是相对于客户端（客户端浏览器）的日期，那么您需要将从服务器返回的日期调整为用户的区域设置。检查这篇文章 - 它有一些很好的例子说明如何确定用户的时区偏移量并更正日期 -[如何使用 jquery 获取用户时区？](https://stackoverflow.com/questions/8090549/how-to-get-user-timezone-using-jquery)

希望这可以帮助！

# heroku - 如何估计一个redis数据库会有多大？

> ID：11496851
> 
> 赞同：4
> 
> 时间：2012-07-16T00:32:27.433
> 
> 标签：heroku, size, redis, redistogo

我正在尝试决定在 heroku 中选择什么大小的 Redis To Go 选项。

假设我想在 Redis 中保留大约一百万条记录以便于访问。

如果每条记录的大小约为 1-10kb，这是否意味着整个数据库将是 1,000,000 * 1-10kb，或者是否存在一些我不知道的隐藏开销？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T00:41:50.820

您可以从最小的选项开始并访问 CLI 界面吗？如果是这样，您可以执行以下操作：

```
redis-cli
> info 
```

查看以下并注意值：

```
used_memory:931104
used_memory_human:909.27K
used_memory_rss:1052672
used_memory_peak:931008
used_memory_peak_human:909.19K 
```

然后加载 100k 记录并执行相同的操作并比较内存中的差异。仅通过猜测大小很难判断，并注意有开销（上面的数字是香草安装，在我的 MacBookPro 2011 w/OSX Lion 上没有数据）。

# c# - 保存单例实例的最佳位置

> ID：11496852
> 
> 赞同：2
> 
> 时间：2012-07-16T00:32:35.230
> 
> 标签：c#, windows-mobile, singleton

存储单例类实例的最佳位置在哪里？比如说我有一个配置类（它为应用程序加载全局设置），也许还有一个访问 Web 服务的类，我不确定在哪里实例化和保存它们的最佳位置。

目前，我将它们作为 Program 类的实例（从中调用 Application.Run），它似乎工作正常，但我不确定这是否是最好的方法！...

```
static class Program
{
    public static string dbConnectString = "Data Source=" + 
        Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase) + 
        @"\xxx.sdf" + ";Persist Security Info=False";
    public static Settings settings = null;

    [MTAThread]
    static void Main()
    {
        settings = Settings.Instance;
        Application.Run(new MainMenu());
    }
} 
```

在整个应用程序中，我这样称呼它：

```
txtWebServiceUrl.Text = Program.settings.getSetting("web_service_url"); 
```

这有什么问题吗，或者最好的方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T00:45:56.373

我个人会让它们变得漂亮且易于使用 - 将它们放在“设置”或“全局”类中。哦，如果可能的话，我会有属性 [或枚举] 来访问设置而不是字符串键，因此当你打错字时，智能感知可以让你头晕目眩。

```
public static class Settings
{
    static Dictionary<string,string> data = new Dictionary<string,string>();

    public static string WebServiceUrl {get {return data["web_service_url"];}}
} 
```

像这样使用：

```
 txtWebServiceUrl.Text = Settings.WebServiceUrl; 
```

尽管显然这是可选的。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T04:51:08.323

您错过了单例模式的要点。您不存储对 Singleton 的引用，因为只有一个引用，由 Singleton 控制。

该模式适用于您需要使用单例的任何地方，您可以通过它的单个实例引用它，在您的情况下是：Settings.Instance。

单例本身就有点味道，因为它们本质上会破坏控制反转，使代码更难测试。在我遇到单例和静态类的遗留应用程序中，我倾向于修改它们以扩展接口。（即 ISettings），它公开了所需的行为，然后在想要访问它的类中使用诸如延迟加载依赖项之类的东西：

```
private ISettings _settings;
public ISettings Settings
{
  get { return _settings ?? Settings.Instance;}
  set { _settings = value; }
} 
```

这允许您的测试用存根/模拟替换设置。它默认为单例。它是一种有效的、轻量级的重构，可以在依赖于单例和静态的代码中实现一些可测试性。

# jquery - jQuerys index() 函数返回对象而不是 int

> ID：11496854
> 
> 赞同：2
> 
> 时间：2012-07-16T00:33:02.870
> 
> 标签：jquery

在我的脚本中，我有一个 jQuery onmouseover() 绑定以列出以 div 作为父项的项目。现在，当我将鼠标移到 li 项目上时，我想获取该项目相对于其父元素 (div) 的索引。

所以我用

```
var index = $($(this).index()); 
```

将悬停的元素索引作为整数。jquery 文档说

> 如果没有参数传递给 .index() 方法，则返回值是一个整数，指示 jQuery 对象中的第一个元素相对于其兄弟元素的位置。

但索引 var 是一个对象。如果我尝试提醒它（而不是使用 console.log 进行基本调试），对话框的内容是“[object object]”。

你能帮助我吗？为什么我的代码块返回一个对象，尽管文档说在不带参数的情况下调用它会返回一个整数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T00:35:19.303

您所要做的就是摆脱额外的`$(...)`. 代码应该是这样的：

```
var index = $(this).index(); 
```

# c# - 获取 ComboBox 的先前值

> ID：11496860
> 
> 赞同：10
> 
> 时间：2012-07-16T00:34:06.283
> 
> 标签：c#, winforms

我希望我的应用程序获取 ComboBox 的值，然后设置用户选择的值或以某种方式获取先前选择的值。

问题是在我的表单中，有四个列表和一个 ComboBox（其中包含列表中的所有值），我想将 ComboBox 的值重新填充回它从中获取的列表，然后删除新选择的项目来自其他/相同的列表。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T00:36:25.563

你想处理[`ComboBox.Enter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enter.aspx)事件。然后将[`SelectedItem`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem.aspx)or保存`SelectedValue`到成员变量中。然后，您可以随时将该值重新分配给 ComboBox。

报名参加活动。您可以通过以下两种方式之一执行此操作：

通过设计师来做。选择您的组合框。在“属性窗口”中，单击闪电图标以显示其所有事件。然后找到“回车”，在框中双击。它会自动为您生成回调函数（“事件处理程序”），并将其连接到事件。

![在此处输入图像描述](../Images/1cab0aed04a11f8ed604a7584c93ae74.png)

![在此处输入图像描述](../Images/d4a4a8cf3f2e9040cacd501e92f5f947.png)

您可以以编程方式做同样的事情。在构造函数中，连接正确签名的事件处理程序：

```
public partial class Form1 : Form 
{
    public Form1()
    {
        InitializeComponent();
        comboBox1.Enter += comboBox1_Enter;
    }

    private void comboBox1_Enter(object sender, EventArgs e)
    {
        m_cb1PrevVal = comboBox1.SelectedValue;
    }

    private void RestoreOldValue()
    {
        comboBox1.SelectedValue = m_cb1PrevVal;
    }
} 
```

# java - EasyMock JUnit 测试在 setter 方法上抛出错误

> ID：11496864
> 
> 赞同：1
> 
> 时间：2012-07-16T00:35:19.123
> 
> 标签：java, junit, easymock

我正在使用 easyMock 进行 JUnit 测试。我想测试一个方法，它获取一个 Project 对象作为其参数，并设置该项目的修改日期并将其保存在 db 中。

所以例如

```
public void setProject(Project project) {
 project.setModifyDate(new Date());
 this.reporsitory.persist(project);
 } 
```

现在在我的测试方法中，我有两个模拟项目。对于其中之一，我设置了 getModifyDate 的返回值。对于其他模拟项目对象，我只需调用 setProject(mockedProject); 现在我 assertEqual 这两个项目对象。

问题是 easymock 在我正在测试的类的 project.setModifyDate(new Date()) 处给我一个错误。

异常：意外的方法调用 project.setModifyDate(..).. 预期：1，实际：0。

似乎它并不期望 setter 方法。你能否让我知道我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T04:14:40.537

是的，这是因为您创建的模拟对象的类型。它希望您的代码在执行一次调用时调用您定义的每个方法。我不记得确切的名称，但我认为它类似于 nicemock，而 strictmock whick 使您的代码执行每个预期的方法。您应该为您的模拟对象使用 EasyMock.createNiceMock()。您遇到的错误是因为它希望您调用 setModifyDate 但您的代码没有用于该调用。

您的调用是意外的，因为您一定没有为该方法放置 EasyMock.expected。您需要添加您的模拟对象 .expected(getMethod).andReturns(something)。

# sql - SSIS 包失败并出现错误：“文本被截断或一个或多个字符在目标代码页中不匹配。”

> ID：11496866
> 
> 赞同：0
> 
> 时间：2012-07-16T00:35:41.277
> 
> 标签：sql, sql-server, ssis

我最近更新了一个运行良好的 SSIS 包，现在我收到以下错误：

`Text was truncated or one or more characters had no match in the target code page.`

该包有效地将数据从一个数据库中的表传输到另一台服务器上另一个数据库中的表。我所做的更新是在传输中添加另一列。该列的长度为 Char(10)，并且在源服务器和目标服务器上的长度相同。在数据传输之前，Char(10) 也在那里。我已经看到人们在博客文章和 Stack 上报告此错误，但我所阅读的内容都没有帮助。我读到的一个解决方案涉及使用数据转换来显式更改有问题的列，这没有帮助（或者我误用了修复程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:40:56.167

whihc version of SQl Server and SSIS are you usign?

I would say to take a look at the output and imput fields of your components. CHAR always ocupies all it's length (I mean, char(10) will always use 10 bytes) and since you are having a truncation error, it may be a start. try to increase the size of the field or cast as varchar on the query that loads the data (not as a permanet solution, just to try to isolate the problem)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:07:49.213

您使用的是哪个连接 ADO.Net 或 OLEDB 连接？

如果您无需进行太多更改，请尝试删除源和目标。有时元数据会导致此问题。如果这不能解决您的问题，请发布错误的屏幕截图。

# css - CSS Div并排没有设置宽度

> ID：11496870
> 
> 赞同：2
> 
> 时间：2012-07-16T00:37:20.443
> 
> 标签：css, css-float

我试图让两个 div 并排出现，如下所示：

*   第一个 div 显示在左侧`float: left`，并根据需要占用尽可能多的空间。
*   第二个 div 出现在右侧`float: right`并占用剩余空间。

问题是我没有`width`为任何这些 div 设置集合，所以它们只占用尽可能多的空间：[jsFiddle](http://jsfiddle.net/LzREv/1/)

我找到了几种解决方案，但它们都需要为其中一个 div 设置宽度，这是我试图避免的。任何可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T00:55:43.490

```
#left, #right { display: table-cell; }​
#left { white-space: nowrap; } 
```

[http://jsfiddle.net/CoryDanielson/LzREv/5/](http://jsfiddle.net/CoryDanielson/LzREv/5/)

# c# - 保存和加载字典。改善内存占用

> ID：11496871
> 
> 赞同：2
> 
> 时间：2012-07-16T00:37:24.733
> 
> 标签：c#, serialization, deserialization

长期观察者，这是我的第一篇文章，所以请放轻松。我环顾四周，但我的查询非常具体，在其他地方找不到。

我有一个包含 2 个控件的应用程序。

*   左侧的控件包含一个树视图，它显示从 XML 文件映射的搜索。每个搜索都有一个关联的 GUID。
*   右侧的控件显示了一个数据网格，我通过字典 (Guid<->Dataset) 从树视图中获取了该数据网格的信息。

当用户单击树视图中的节点时，我的应用程序会计算出搜索链接的 GUID，并显示相关的数据集，该数据集被展平并显示在数据网格上。

我分别在退出/加载应用程序时保存（序列化）和加载（反序列化）字典。

我最近做了一些内存分析，对于更大的搜索，字典的内存占用可能非常大（200mb），因为我确实需要整理用户机器的有限容量。

我想知道是否有人知道如何实现这一目标。

我正在考虑将 Serialisable Dictionary 拆分为组成数据集，并将每个数据集单独存储在硬盘驱动器上（可能使用 GUID 作为文件名）。然后，保存的数据集将使用每个 Node.Click 事件反序列化并显示在网格视图中。我对此的担心是每次点击事件之间的潜在暂停，因为它会保存旧搜索并加载新搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:03:37.043

简单的答案，将字典和数据集扔到一个 Sqlite 文件中。（或其他数据库）它会慢一点，但我希望比您可以在合理时间内提交代码的任何代码都快。如果使用得当，db 层将进行内存缓冲和缓存，以使 ui 更具响应性。

# c++ - 我可以使成员函数只能通过另一个类成员函数访问吗？

> ID：11496878
> 
> 赞同：2
> 
> 时间：2012-07-16T00:39:05.157
> 
> 标签：c++, methods, scope, friend

据我所知，朋友功能将使该功能免费访问整个班级。我可以通过只允许它访问单个成员函数来确定这个朋友函数的范围吗？

例如：

```
class ResourceCache {
    Resource* Create(ResourceDesc) {
        ...
        return ResourceDesc.Create();
    }
}

class ResourceDesc {
    ...
    Resource* Create();
} 
```

在这个例子中，我只想`ResourceCache::Create`访问`ResourceDesc::Create`，而不是所有的`ResourceDesc`。

那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T00:43:53.237

C++ 没有给你这种细粒度的访问控制。不要太担心访问控制是否正确，反正都是你或你的合作者编写的代码，你害怕会发生什么坏事？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T00:45:04.517

C++ 不允许这样做。

我的直接想法是，如果你想这样做，这至少可能表明你的`ResourceDesc`（也可能`ResourceCache`也是）可能偏大，并且可能会做不止一门课真正应该做的事情。

# mysql - MySql 排序规则的问题（疯狂）

> ID：11496881
> 
> 赞同：0
> 
> 时间：2012-07-16T00:39:50.080
> 
> 标签：mysql, mysql-workbench

我所有的表都设置为 latin1_general_ci 我全面使用 innoDB。当我在（MySqlWorkbench）中创建一个新的（空白）存储过程并运行它时，我得到以下奇怪的废话：

> 0 行受影响，1 个警告：1267 非法混合排序规则 (latin1_swedish_ci,IMPLICIT) 和 (latin1_general_ci,IMPLICIT) 用于操作 '='

存储过程为空。它完全没有做任何事情。那么为什么这个愚蠢的整理信息呢？

附言。我知道这个问题多年来一直困扰着很多人。而且我发现了很多蹩脚的解决方法和破解罐子的想法。但是没有任何看似遥不可及的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:07:07.307

遍历在我要创建的存储过程中访问的每个表列，并将排序规则更改为 latin_general_ci 就像默认值一样，可以解决问题。警告仍然存在。呃！

# rspec2 - 为什么 RSpec 中有不同的变量？

> ID：11496882
> 
> 赞同：0
> 
> 时间：2012-07-16T00:39:53.863
> 
> 标签：rspec2, rspec-rails

在 RSpec 测试中使用局部变量、实例变量和使用“let”方法创建的变量有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T00:46:07.680

如果您需要重用变量，则使用 a`let`是最佳选择，否则局部变量可能更有意义。但是您可以根据差异自行决定：

### 局部变量

只能从一个测试中访问，即不能重复使用。

### 实例变量

可从示例组中的所有测试访问。对示例组中的每个测试运行进行分配和评估。

### 让

可从示例组中的所有测试访问。延迟评估，因此仅在实际用于测试时才创建它（以及创建它的代码）。

如果变量在逻辑上属于 a或块而不是单个测试，则A`let`代替局部变量可能仍然有意义——但这是基于测试结构的偏好。`context``describe`

# php - 私有静态方法与静态方法

> ID：11496884
> 
> 赞同：43
> 
> 时间：2012-07-16T00:40:11.020
> 
> 标签：php

我理解这`static`意味着不需要实例化对象即可使该属性/方法可用。我也理解这如何适用于私有属性和方法以及公共方法。我想了解的是静态私有函数为您带来了什么。例如：

```
class Beer {
    static private $beertype = "IPA";

    private function getBeerType() {
            return self::$beertype;
    }

    static public function BeerInfo() {
            return self::getBeerType();
    }
}

print Beer::BeerInfo() . "\n"; 
```

`getBeerType()`只要从静态公共方法调用私有方法，它就可以在没有实例化对象的情况下正常执行。如果静态公共方法可以访问所有私有方法（静态和非静态），那么将方法声明为静态私有有什么好处？

打开严格的错误报告后，我确实收到了我*应该*设为`getBeerType()`静态的警告，尽管它仍然允许我运行代码。我做了一些研究，似乎其他语言（Java）在被静态公共方法调用时会强制你将私有方法声明为静态。看起来PHP可以让你摆脱这个。有没有办法强制它抛出错误*而不执行*？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-16T00:54:57.653

静态私有方法提供了一种从类外部隐藏静态代码的方法。如果需要使用几种不同的方法（静态或非静态），即代码重用，这将很有用。

静态方法和静态变量，有时也称为类方法和类变量，是一种将代码和数据放入某种命名空间的方式。您还可以将类变量视为附加到类本身的变量，其中（根据定义）恰好有一个，而不是该类的实例，其中可能有零个、一个或多个。类方法和类变量可用于处理不仅在所有实例中保持相同而且实际上相同的*属性*。

类变量的一个示例是 ORM 实体对象中的数据库处理程序。所有实例都是它们自己的对象，但它们都需要访问*相同*的数据库处理程序来加载和保存自己。

私人与公共是完全不同的品质，我怀疑你遇到了什么。不能调用私有方法，也不能从类外的代码访问私有变量。私有方法通常用于在对象上实现不能从对象外部访问的“内部”逻辑。实例方法和类方法都可能需要此限制。

私有类方法的示例可以在工厂方法中。可能有三个工厂调用来创建一个对象，这些对象可能在提供的参数上有所不同。然而，大部分操作是相同的。所以它进入`private static`了非私有工厂方法调用的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T01:09:07.850

> 我理解静态意味着不需要实例化对象即可使该属性/方法可用。

一切静态的都存在。在全球范围内。

> 我也了解这如何适用于公共属性和方法以及公共方法

您确定您已经了解它创建了一个全局变量和一个标准的全局函数吗？

> 我想了解的是静态私有函数为您带来了什么。

*private*只是[可见性^(*Docs*)](http://www.php.net/manual/en/language.oop5.visibility.php)的说明符。因此，您可以获得可见性控制。

有用吗？取决于用例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-11T22:48:37.150

这是为了防止其他人食用它。

例如，您有一个`Logger`静态对象，然后您有两个公共静态方法`LogOk`，`LogError`并且都受益于“内部”方法`Log`，但您不希望该类的消费者能够`Log`直接调用。

你可以打电话，但如果是私人电话`Logger::LogOk( "All right." );`，你不能打电话。`Logger::Log( "abc" );``Log`

您可以在内部始终在同一类中使用它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-16T00:50:46.767

尽管代码有效，但它会引发严格标准错误：

> 严格标准：非静态方法 Beer::getBeerType() 不应被静态调用

因此，在这里您可以使用`private static`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-11T13:10:54.967

简单地说，如果在类中的某些函数中`private static function`有重复操作，则可以声明a 。`public static`

如果你是一个缺乏经验的程序员或者是 OOP 的新手，那么对你的代码施加**限制**自然会显得很奇怪。但是像这样严格的声明会让你的代码更干净，更容易维护。在大型项目和复杂的类中，您可以**准确地**了解函数的期望以及**如何**使用它。

这是一个很好的阅读：[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)和 [上帝对象](http://en.wikipedia.org/wiki/God_object)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-03T15:50:47.120

这是规则和最佳答案，

静态方法不能访问非静态变量和方法，因为它们需要类的实例。不用担心警告，规则已设置，一旦完全执行，它将在未来破坏您的代码。这就是为什么

```
static public function BeerInfo() {
            return self::getBeerType() 
```

是错的，

您必须将 getBeerType 声明为静态的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-11-29T15:16:22.520

在您的示例中，您可以通过执行以下操作来简化此操作。

```
static private $beertype = "IPA";

static public function BeerInfo() {
   return self::$beertype;
} 
```

“静态”纯粹意味着驻留在单个内存区域中。如果您有记忆力，那么静态实现是一个很好的策略。

当您使用公共静态函数时，大多数情况下您可能不想处理该类的实例，而是想重用该类中预先存在的功能。利用私有静态函数是在没有实例的情况下做到这一点的方法。

但是，您可以有一个公共静态函数，它接受一个作为所述类的实例的参数，例如

```
static public function doSomething(Beer &$ref) {
   $ref->instanceLevelFunction(...);
} 
```

# iphone - 将本地 sqlite 数据库移动到远程服务器 ios 5

> ID：11496886
> 
> 赞同：2
> 
> 时间：2012-07-16T00:40:41.223
> 
> 标签：iphone, ios, database, sqlite, ios5

我正在使用 xcode 4.2 创建一个 iPhone 应用程序。我有一个我创建的本地 SQLite 数据库，它在模拟器上运行良好。

我想将此数据库移动到远程服务器，以便使用此应用程序的其他人可以访问数据并对其进行更新。

谁能告诉我最简单的方法来做到这一点？或者指出一些好的教程的方向？

我对整个 iPhone 编程很陌生，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:57:47.413

[http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)这会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T03:18:51.073

如果您的意思是要从远程主机“服务”数据库，而不是将数据库驻留在手机上，那么最好的方法是在手机和服务器之间使用[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)协议。

# javascript - jQuery ajax 不作为 utf-8 传输

> ID：11496887
> 
> 赞同：1
> 
> 时间：2012-07-16T00:41:02.737
> 
> 标签：javascript, jquery, backbone.js, character-encoding

我在 jQuery 1.7.2 中使用旧版本的主干.js (0.5.3)，当 Backbone.sync 执行时（它是 jQuery $.ajax() 的包装器），它将 contentType 显式设置为：

```
params.contentType = 'application/json'; 
```

这看起来像我想要的，但是内容似乎没有作为 utf-8 发送。我正在使用 ndash 进行测试，这是我的示例字符串：

```
Mathematics K–10 
```

提交到服务器后，我得到：

```
Mathematics K‚Äì10 
```

现在，如果我将 contentType（在backbone.js 中）更改为：

```
params.contentType = 'application/json; charset=utf-8'; 
```

一切都按预期工作，我得到了正确的 ndash 字符。如果我注释掉主干中的原始 contentType 行，这也是行为。

jQuery 文档建议：

> 数据将始终使用 UTF-8 字符集传输到服务器

但似乎如果你显式设置了你的 contentType，那么你还需要设置一个字符集。

我的问题是，这种行为有意义吗？我原以为我们总是希望默认为 utf-8（如 jQuery 文档状态），即使我们明确更改 contentType。有没有其他人遇到过这个或有任何可能帮助我的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-23T13:33:00.290

您可以扩展 ajax 函数来为骨干 ajax 调用提供自定义标头，如上所示，

```
Backbone.ajax = (function(_protoAjax) {
    var _Backboneajax = _protoAjax;
    return function(options) {
        var defaultOptions = {
            headers: {
                "Accept": "application/json; charset=UTF-8",
                "Content-Type": "application/json; charset=UTF-8"
            }
        };
        options = $.extend({}, defaultOptions, options)
        return _Backboneajax.call(this, options);
    };
})(Backbone.ajax); 
```

或者您可以在所有 JQuery Ajax 调用（不仅是 Backbone ajax 调用）上设置此标头，如上所示，

```
$.ajaxSetup({
    headers: {
        "Accept": "application/json; charset=UTF-8",
        "Content-Type": "application/json; charset=UTF-8"
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:27:36.557

[HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)规定内容类型设置字符意义。也许 jQuery 文档应该更清楚。

# .net - 如何在不显示整个页面的情况下使用 response.write()

> ID：11496888
> 
> 赞同：0
> 
> 时间：2012-07-16T00:41:15.843
> 
> 标签：.net

我有一个普通的 aspx 页面，它接受 POST 请求，并希望向通过 http 发出请求的人发回响应。

我使用 response.write(data) 将响应发送回用户，但是它发送回整个页面而不仅仅是“数据”

这是代码片段

```
protected void Page_Load(object sender, EventArgs e)
{

  Response.Clear();
  Response.ContentType = "text/plain";

  string myparam = (string)Request.QueryString["myparam"];

  //Perform some operations then generate a response
  data="Ok"
  Response.Write(data);
  Response.End();

}// End 
```

问题不是只发回数据，即“Ok”，而是发送“OK”加上页面的整个DOM“

每当有人通过 http 请求我的 POST 页面时，我需要有关如何删除其余字符串的帮助。我只想在另一端得到“好的”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T00:50:42.730

您可以使用缓冲和刷新。

```
Response.BufferOutput = true

// iterate through content
Response.Write(content so far)
Response.Flush()

... keep going

Response.Write(more content)
Response.Flush() 
```

* * *

如果您正在寻找构建 Web 服务 API 并返回数据而不是响应，您可以阅读以下文章： [http ://www.iwantmymvc.com/rest-service-mvc3](http://www.iwantmymvc.com/rest-service-mvc3)

特别查看返回 Json 内容的部分：

```
 [HttpPost]
    public JsonResult CommentList(List<Comment> items)
    {
        var model = this.commentManager.CreateComments(items);
        return Json(model);
    } 
```

您的方法是 PageLoad ，这意味着您正在返回一个网页，但您只想返回一个更接近 Web 服务 api 响应的字符串。希望这会引导您朝着正确的方向前进。

* * *

**您是否尝试过将内容类型明确设置为文本/纯文本？**

```
context.Response.ContentType = "text/plain"; 
```

# c++ - 错误，将对象动态分配给数组

> ID：11496889
> 
> 赞同：0
> 
> 时间：2012-07-16T00:41:35.610
> 
> 标签：c++, dynamic, dynamic-memory-allocation

我有一个指向结构数组的指针，如下所示：

```
class Terrian  {
     ...
    private:
        Vector *terrian_vertices;
     ...
} 
```

并且指针的数据在“construct_vertices”函数中生成

```
Terrian::Terrian(int width, int height)  {
    this->width = width;
    this->height = height;

    std::cout << "Width: " << width << "  Height: " << height << "\n";

    std::cout << "Vertices\n";
    construct_vertices();
    std::cout << "Element\n";
    construct_elements();
    std::cout << "Buffers\n";
    construct_buffers();
}

void Terrian::construct_vertices()  {
    terrian_vertices = new Vector[width * height];

    std::cout << "Generating data\n";

    for (int x = 0; x < width; x++)  {
        for (int y = 0; y < height; y++)  {
            int index = x + y * width;

            Vector *pos = new Vector((GLfloat)x, 0.0f, (GLfloat)-y);
            memcpy(pos, terrian_vertices, sizeof(Vector) * index);

            std::cout << terrian_vertices[index].x;

            Color *color = new Color(0, 255, 0);
            memcpy(color, terrian_colors, sizeof(Color) * index);
        }
    }
} 
```

这是程序的输出（我在主函数中所做的只是实例化对象）

```
Width: 32  Height: 32
Vertices
Generating data
5.2349e-039
Process returned -1073741819 (0xC0000005)   execution time : 10.073 s
Press any key to continue. 
```

当第一个指针被复制到数组时程序崩溃，'x' 的输出应该是 0。这令人费解。有谁知道是什么导致这种情况发生？如果是这样，是否有更好的方法来动态分配结构 - 不使用 memcpy？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T01:00:47.187

> 有谁知道是什么导致这种情况发生？

的使用[`memcpy`](http://en.cppreference.com/w/cpp/string/byte/memcpy)不正确。任何参考文档都会告诉您这一点。

第一个参数是指向目标的指针，它是数组中`index`的元素： 。`terrian_vertices``terrian_vertices + index`

第二个参数是指向源的指针，即`pos`.

（如果你好奇，目的地在源之前的原因是因为它与赋值运算符平行`destination = source`：）

第三个参数是要复制的数据量，在您的情况下只是`sizeof(Vector)`：它只是需要复制的数据量，而*不是* .`Vector``index`

像代码这样的滥用`memcpy`很容易导致未定义的行为，幸运的是，这表现为错误。

> 如果是这样，是否有更好的方法来动态分配结构 - 不使用 memcpy？

是的。不要自己管理内存：使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)和正常的复制语义。

```
class Terrian  {
// ...
private:
    std::vector<Vector> terrain_vertices;
    // Hmm, this may need some touch up on naming,
    // or it may get confusing with two "vector" thingies around
};

// ...

void Terrian::construct_vertices()  {
    terrain_vertices.reserve(width * height);
     // reserve is actually optional,
     // but I put it here to parallel the original code
     // and because it may avoid unneeded allocations

    std::cout << "Generating data\n";

    for (int x = 0; x < width; x++)  {
        for (int y = 0; y < height; y++)  {
            terrain_vertices.emplace_back((GLfloat)x, 0.0f, (GLfloat)-y);
            // or this if your compiler doesn't support C++11:
            // terrain_vertices.push_back(Vector((GLfloat)x, 0.0f, (GLfloat)-y));

            std::cout << terrian_vertices[index].x;

            // same thing for colors
            terrain_colors.emplace_back(0, 255, 0);
        }
    } 
```

注意现在看不到`new`任何地方。这解决了原始代码的另一个问题：它泄漏了每个循环迭代的一个实例`Vector`和一个实例。`Color`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:46:59.557

```
Vector *pos = new Vector((GLfloat)x, 0.0f, (GLfloat)-y);
memcpy(pos, terrian_vertices, sizeof(Vector) * index); 
```

你不能那样做。 `new`为 a 分配了足够的内存`Vector`并`pos`指向那里。但是，然后您继续将`sizeof(Vector) * index`字节复制到该位置。第一次是 0 字节，因为`int index = x + y * width;`是 0。下一次是 2 * width `, which is likely greater than`1 `, so you end up copying past`*pos` 进入无人区。

附带说明一下，您不应该`memcpy`用来复制复杂类型。这可能没问题，可能只需要一点位复制，但如果与某些类型一起使用（即，由于内部语义而无法位复制的类型，如 RAII 样式容器），这可能对您不利。

# visual-studio - VBA 6 +如何将变量导出到单击按钮

> ID：11496905
> 
> 赞同：2
> 
> 时间：2012-07-15T12:52:28.240
> 
> 标签：visual-studio, vb6

我创建了以下 VB6 代码，并在我的表单上创建了两个控件 - `Combo1`（列表框）和`Command3`（一个按钮）。

当我从`Combo1`列表中选择一个项目时，我将一个字符串分配给表单范围变量`param`并将其显示在消息框中，然后将其关闭。

但是当我然后单击`Command3`按钮并尝试`param`在消息框中显示相同的变量时，则没有存储任何值。

这是我的代码：

```
Dim param As String

Sub Form_load()

    Combo1.AddItem "linux ver"
    Combo1.AddItem "linux ver"

End Sub

Sub Combo1_Click()

    If Combo1.ListIndex = 0 Then
        param = "linux 5.1"
        MsgBox param
    End If

    If Combo1.ListIndex = 1 Then
        param = "linux 5.5"
        MsgBox param
    End If

End Sub

Sub Command3_Click()

    MsgBox "param" & param

End Sub 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:57:57.157

看起来这是由于[Variable Scope](http://www.vb6.us/tutorials/vb6-variable-scope "变量范围")造成的。您需要在 Combo1_Click() 子例程之外定义“param”，因为就目前而言，param 仅存在并且可在该例程中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:46:02.880

如果 Combo1.ListIndex 为 -1 会怎样？还是2？

您的 param 变量永远不会被分配，您看到的行为正是预期的。

# c# - 对于protobuf-net，有没有什么情况下DeserializeWithLengthPrefix 可以抛出异常吗？

> ID：11496907
> 
> 赞同：1
> 
> 时间：2012-07-16T00:44:21.910
> 
> 标签：c#, protocol-buffers, protobuf-net

我正在使用 protobuf-net 制作一个应用程序，使用它通过网络发送/接收数据。

我很好奇某人是否/如何发送一些会使该行抛出异常的东西：

```
var message = Serializer.DeserializeWithLengthPrefix<ReceiveType>(
                                   memoryStream, PrefixStyle.Fixed32); 
```

我假设到目前为止我们已经检查过：

*   （编辑）整个消息已经被接收并被放入 a[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)中，这将用于反序列化消息（即没有流切断的风险）。
*   长度前缀包含一些合理的大小（即不会耗尽内存）
*   消息正文与前缀所承诺的一样大。

到目前为止，我已经尝试了各种可能性，最坏的情况是这些`message`字段是`null`或其他默认值，即使对于必填字段以及当消息正文包含随机乱码时也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T05:29:10.230

> 当消息正文包含随机乱码时

不完全的。胡言乱语*通常*会使其抛出“无效的电线类型”异常。您还可能会收到有关格式错误的 varint、UTF8 和其他一些内容的错误。消息*必须*是有效的 protobuf 数据。有些东西它不会检测到，但在大多数情况下，它会因为无效数据而对你大喊大叫。

显然，任何`ReceiveType`故意爆炸的代码（比如说，一个属性获取）都会导致它失败 - 所以模型/ DTO也必须有意义！

# jquery - 提交表单后如何打开颜色框？

> ID：11496908
> 
> 赞同：0
> 
> 时间：2012-07-16T00:44:21.927
> 
> 标签：jquery, forms, submit, colorbox

这是我的表格：

```
<form name="Aform" method="post" action="test.php" id="Aform"> 
```

这是我的脚本：

```
var validator = $("#Aform").validate({
...
// form.submit();  <-- it works    
form.submit(function() {
$.post($(this).attr("action"), $(this).serialize(), function(data) {
    $.colorbox({html:data});
},
'html');
return false;
});  
// <-- it does not work 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:32:32.240

您是否查看过您的 JS 控制台以查看是否产生任何错误？您是否验证过您的 POST 请求成功并返回数据？

在我看来，此代码仅在提交事件发生后才运行（假设未显示代码）。然后您定义了另一个事件处理程序，但由于提交事件不再发生，因此该处理程序永远不会被触发。

调用`form.submit()`会触发提交事件，调用会`form.submit(function(){})`定义事件处理程序但不会触发提交事件。

您可以`form.submit()`在定义事件处理程序后调用，但定义事件处理程序并立即调用它只是跳过不必要的循环。你可以这样做：

```
var validator = $("#Aform").validate({
...
$.post($(this).attr("action"), $(this).serialize(), function(data) {
    $.colorbox({html:data});
},
'html'); 
```

# javascript - 缩小脚本的奇怪含义

> ID：11496912
> 
> 赞同：0
> 
> 时间：2012-07-16T00:44:58.760
> 
> 标签：javascript, asp.net-mvc-3, minify, squishit

我有以下一段代码可以发出我所有的 javascript：

```
@using SquishIt.Framework.Minifiers.JavaScript
@{
    string[] scriptLinks = new[]
    {
        Url.Content("~/content/script/json2.js"),
        Url.Content("~/content/script/b.extensions.js"),
        Url.Content("~/content/script/jquery.extensions.js"),
        Url.Content("~/content/script/jquery.validate.min.js"),
        Url.Content("~/content/script/jquery.validate.unobtrusive.min.js"),
        Url.Content("~/content/script/jquery.validate.tooltip.js"),
        Url.Content("~/content/script/jquery.form.js"),
        Url.Content("~/content/script/jquery.placeholder.js"),
        Url.Content("~/content/script/jquery.tooltip.js"),
        Url.Content("~/content/script/jquery.signalr-0.5.2.js"),
        // TODO: Url.Content("~/signalr/hubs"), // SignalR auto-generated hubs proxy ? Get Programatically??
        Url.Content("~/content/script/b.core.js"),
        Url.Content("~/content/script/b.facebook.js"),
        Url.Content("~/content/script/b.twitter.js"),
        Url.Content("~/content/script/b.realtime.js"),
        Url.Content("~/content/script/b.init.js"),
        Url.Content("~/content/script/views/user/login.js"),
        Url.Content("~/content/script/views/post/create.js"),
        Url.Content("~/content/script/views/post/list.js")
    };
}
@{
@* we don't bundle external javascript links nor localization messages. *@
    const string jQueryVersion = "1.7.2";
    string jQueryExternal = "//ajax.googleapis.com/ajax/libs/jquery/{0}/jquery.min.js".FormatWith(jQueryVersion);
    string jQueryLocal = @Url.Content("~/content/script/jquery-{0}.min.js".FormatWith(jQueryVersion));
}
<script src="@Url.Action("Localization", "Resource")"></script>
<script src="@jQueryExternal"></script>
<script>!window.jQuery && document.write(unescape("%3Cscript src='@jQueryLocal'%3C/script%3E"))</script>
@(Bundle.JavaScript()
    .Add(scriptLinks)
    .WithoutTypeAttribute()
    .WithMinifier<YuiMinifier>()
    .WithConfiguration()
    .MvcRender("~/all.js?_=1")
)
@JavaScript.Emit()
@* TODO: analytics service (pixel goes to noscript partial) *@ 
```

除了我删除对谷歌缓存的外部 jQuery 引用的情况外，这总是可以正常工作`<script src="@jQueryExternal"></script>`：并且其余脚本被压缩在单个脚本标记中。

我还发现如果我在 document.write 标记之后添加任何脚本标记，例如：

```
<script>!window.jQuery && document.write(unescape("%3Cscript src='@jQueryLocal'%3C/script%3E"))</script>
<script></script> @* work around an issue where javascript minified into a single script tag won't find references to jQuery if loaded in the previous script tag. *@ 
```

它确实有效。

否则我会得到一个“任何东西都是未定义的”

在 chrome 20 和 firefox 11 中进行了测试，那么那个额外的空脚本标签到底在做什么？为什么它可以减轻这种极端情况的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:57:38.973

原来问题出在 document.write 元素未正确关闭。

```
unescape("%3Cscript src='@jQueryLocal'%3C/script%3E") 
```

进入

```
unescape("%3Cscript src='@jQueryLocal'%3E%3C/script%3E") 
```

# javascript - JS - jQuery inarray ignoreCase() 和 contains()

> ID：11496914
> 
> 赞同：7
> 
> 时间：2012-07-16T00:45:08.897
> 
> 标签：javascript, jquery, arrays, contains, case-insensitive

好吧，我更像是一个 PHP 人，除了简单的设计相关操作之外，我的 JS 技能几乎没有任何 JS，所以如果我问的是显而易见的，请原谅。

以下操作在 PHP 中将是轻而易举的（也可能在 JS 中 - 但我在这里与不熟悉的语法作斗争......）

这是某种输入验证

```
var ar = ["BRS201103-0783-CT-S", "MAGIC WORD", "magic", "Words", "Magic-Word"];

    jQuery(document).ready(function() {
        jQuery("form#searchreport").submit(function() {
        if (jQuery.inArray(jQuery("input:first").val(), ar) != -1){ 
                jQuery("#contentresults").delay(800).show("slow");

            return false;
          } 
```

这个问题有 2 个部分。

*   1-如何使数组不区分大小写？

例如 -将给出与AND或`BRS201103-0783-CT-S`相同的结果`brs201103-0783-ct-s``Brs201103-0783-CT-s``MAGIC magic Magic MaGIc`

基本上我需要类似 ignoreCase() 的数组，但我在 jQuery 或 JS 中找不到任何引用...

我试过`toLowerCase()`- 但它不适用于阵列（ittirating??）而且，它会解决混合情况吗？

*   2-如何使功能仅识别元素的部分或组合？

例如 - 如果只有一种类型`"word"`，我希望它作为 传递`"words"`，并且如果有人键入`"some word"`它应该传递（包含“单词”）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T00:54:57.950

### 第1部分

您可以将您的数组处理为完全小写，并将您的输入小写，这样`indexOf()`就可以像执行不区分大小写的搜索一样工作。

`toLowerCase()`您可以使用已经知道的小写字符串。

要进行数组，您可以使用...

```
arr = arr.map(function(elem) { return elem.toLowerCase(); }); 
```

### 第2部分

您可以检查子字符串，例如...

```
// Assuming you've already transformed the input and array to lowercase.
var input = "word";
var words = ["word", "words", "wordly", "not"];

var found = words.some(function(elem) { return elem.indexOf(input) != -1; }); 
```

或者，您可以在此实例中跳过将数组转换为全小写，方法是在您检查之前调用`toLowerCase()`each 。`elem``indexOf()`

[`some()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/some)并且[`map()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)在较旧的 IE 中不受支持，但对于 polyfill 来说是微不足道的。链接文档中提供了每个 polyfill 的示例。

正如[Fabrício Matté](https://stackoverflow.com/users/1331430/fabricio-matte)还指出的那样，您可以在此处使用 jQuery 等效项，`$.map()`for`Array.prototype.map()`和`$.grep()`with`length`属性 for `Array.prototype.some()`。然后您将免费获得浏览器兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-17T22:20:47.077

要检查数组是否包含不区分大小写的元素，我使用了以下代码：

```
 ret = $.grep( array, function (n,i) {
        return ( n && n.toLowerCase().indexOf(elem.toLowerCase())!=-1 );
    }) ; 
```

这是一个玩 [数组匹配不区分大小写的小提琴](https://jsfiddle.net/jmgomez/rdcwvhze/ "小提琴数组匹配不区分大小写")

# python - Python OO：如何使用“return”语句停止整个类中的过程流？

> ID：11496916
> 
> 赞同：2
> 
> 时间：2012-07-16T00:45:41.333
> 
> 标签：python, oop, class, flow

这是一个初学者 OO Python 问题。我希望初学者有一个stackoverflow，如果我可以问这个而不会得到反对票。所以，我们开始吧。

当我运行此代码时：

```
from nltk import NaiveBayesClassifier,classify
import USSSALoader
import random

class genderPredictor():

    def getFeatures(self):
        if self._loadNames() != None:
            maleNames,femaleNames=self._loadNames()
        else:
            print "There is no training file."
            return

        featureset = list()
        for nameTuple in maleNames:
            features = self._nameFeatures(nameTuple[0])
            featureset.append((features,'M'))

        for nameTuple in femaleNames:
            features = self._nameFeatures(nameTuple[0])
            featureset.append((features,'F'))

        return featureset

    def trainAndTest(self,trainingPercent=0.80):
        featureset = self.getFeatures()
        random.shuffle(featureset)

        name_count = len(featureset)

        cut_point=int(name_count*trainingPercent)

        train_set = featureset[:cut_point]
        test_set  = featureset[cut_point:]

        self.train(train_set)

        return self.test(test_set)

    def classify(self,name):
        feats=self._nameFeatures(name)
        return self.classifier.classify(feats)

    def train(self,train_set):
        self.classifier = NaiveBayesClassifier.train(train_set)
        return self.classifier

    def test(self,test_set):
       return classify.accuracy(self.classifier,test_set)

    def getMostInformativeFeatures(self,n=5):
        return self.classifier.most_informative_features(n)

    def _loadNames(self):
        return USSSALoader.getNameList()

    def _nameFeatures(self,name):
        name=name.upper()
        return {
            'last_letter': name[-1],
            'last_two' : name[-2:],
            'last_is_vowel' : (name[-1] in 'AEIOUY')
        }

if __name__ == "__main__":
    gp = genderPredictor()
    accuracy=gp.trainAndTest() 
```

并`self._loadNames()`返回`None`，我得到了这个错误（来自随机导入的模块）：

```
shuffle C:\Python27\lib\random.py   285     
TypeError: object of type 'NoneType' has no len() 
```

发生这种情况是因为尽管我在 中添加了一条`return`语句，但流程跳转到了调用随机模块 ( )`getFeatures(self)`的下一个类方法（即）。`trainAndTest(self,trainingPercent=0.80)``random.shuffle(featureset)`

所以，我想知道：如何不仅在`getFeatures(self)`方法中停止过程流，而且在包含它的整个类中停止过程流？

顺便说一句，感谢[Stephen Holiday](http://stephenholiday.com/articles/2011/gender-prediction-with-python/)分享代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:52:57.380

> 发生这种情况是因为尽管我在 getFeatures(self) 中添加了 return 语句，但流程会跳转到调用随机模块 (random.shuffle(featureset)) 的下一个类方法（即 trainAndTest(self,trainingPercent=0.80)）。

要记住的重要一点是，这`None`是一个完全有效的值。您的 return 语句`getFeatures()`完全按照它的指示执行并返回有效值。只有在特殊情况下，或者您明确表示，才会停止这种流动。

与其问你如何“从类中返回”，你可能想要研究的是检查你调用的函数的返回值，并在你继续之前确保它是你期望的。您可以在两个地方执行此操作：

```
def trainAndTest(self,trainingPercent=0.80):
    featureset = self.getFeatures()

...

def _loadNames(self):
    return USSSALoader.getNameList() 
```

在第一个地方，你可以检查`if featureset is None`，如果它是 None 则做出反应。
在第二个地方，你可以先检查并在那里做出反应，而不是盲目返回。

第二。您可以选择引发异常。异常是代码遇到错误并且无法继续的情况。然后，调用函数负责处理它或让它顺着链向上。如果没有处理异常，您的应用程序将崩溃。如您所见，您从 random 类中引发了一个异常，因为您允许 None 进入`shuffle`调用。

```
names = USSSALoader.getNameList()
if names is None:
    # raise an exception?
    # do something else?
    # ask the user to do something? 
```

那时的问题是，当你的程序碰巧得到一个 None 而不是一个有效的列表时，你希望你的程序做什么？您是否想要一个类似于随机引发的异常，但对您的应用程序更有帮助且更具体？或者，也许您只是想调用其他一些获取默认列表的方法。即使您的应用程序执行除退出之外的任何操作，是否也没有名称列表？那将是一个无法挽回的局面。

```
names = USSSALoader.getNameList()
if names is None:
    raise ValueError("USSSALoader didn't return any "
                     "valid names! Can't continue!") 
```

**更新**

根据您的评论，我想添加您想要的特定处理。Python 有一些[内置的异常类型](http://docs.python.org/library/exceptions.html)来表示各种情况。您最可能想要引发的是一个 IOError，表示找不到该文件。我假设“文件”是指`USSSALoader.getNameList()`需要使用但找不到的任何文件。

```
names = USSSALoader.getNameList()
if names is None:
    raise IOError("No USSSALoader file found") 
```

此时，除非调用链更高的某个函数处理它，否则您的程序将因回溯错误而终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:51:54.390

没有什么能比得上“全班归来”。您需要组织代码，以便返回值在获取它们的函数中有效。这些函数可以测试该值以确定下一步要做什么。类边界对程序流没有影响，只是方法的命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T00:53:20.763

通常，您在这里要做的是在调用函数后检查有效性，例如：

```
featureset = self.getFeatures()
if not featureset:
    # You could log an error message if you expected to get something, etc.
    return 
```

# java - 使用 PreparedStatement 将 blob 设置为 null

> ID：11496922
> 
> 赞同：5
> 
> 时间：2012-07-16T00:46:15.137
> 
> 标签：java, mysql, blob, binarystream

我正在使用 JSF2.0 创建 web 应用程序，在 mysql 中，我使用数据类型将图像存储为`MEDIUMBLOB`.

要插入值，我使用的是 PreparedStatement，如下所示。

```
PreparedStatement psmnt = con.prepareStatement("INSERT INTO sketchesSG002003 (userid, imageTitle, imageData, drawingComments) VALUES (?,?,?,?)");
psmnt.setLong(1, personalInfoId);
psmnt.setString(2, sketchesSG002003Title);

try {
    String fileName = FilenameUtils.getName(sketchesSG002003ImageUpload.getName());
    File image = new File(fileName);
    InputStream fis = sketchesSG002003ImageUpload.getInputStream();
    psmnt.setBinaryStream(3, fis, (int) sketchesSG002003ImageUpload.getSize());
} catch (Exception e) {
    psmnt.setBinaryStream(3, null);
}
psmnt.setString(4, sketchesSG002003Comments);
i = psmnt.executeUpdate(); 
```

但是我收到错误

```
java.lang.AbstractMethodError: com.mysql.jdbc.PreparedStatement.setBinaryStream(ILjava/io/InputStream;)V 
```

Stacktrace 的某些部分是

```
 javax.faces.el.EvaluationException: java.lang.AbstractMethodError: com.mysql.jdbc.PreparedStatement.setBinaryStream(ILjava/io/InputStream;)V
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
at javax.faces.component.UICommand.broadcast(UICommand.java:315)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) 
```

我相信上面的错误是为了声明`psmnt.setBinaryStream(3, null);`

**我的问题是如何将二进制数据设置为 Null 或 Nothing？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T00:48:53.140

这些天出了什么问题？我提出问题后得到解决方案:(

`psmnt.setNull(3, java.sql.Types.BLOB);`成功了。

# ruby - 红宝石命令行加载错误

> ID：11496924
> 
> 赞同：4
> 
> 时间：2012-07-16T00:46:44.713
> 
> 标签：ruby, command-line, gem

当我尝试在命令行中包含库时，我收到 LoadError 消息

```
$ ruby -v
ruby 1.8.7 (2012-06-29 patchlevel 370)

$ gem list | grep coderay_bash
coderay_bash (1.0.2)

$ ruby -rcoderay_bash /bin/coderay -v
ruby: no such file to load -- coderay_bash (LoadError)

$ ruby -rubygems -rcoderay_bash /bin/coderay -v
ruby: no such file to load -- coderay_bash (LoadError) 
```

它看起来适用于 ruby​​ 1.9.2

```
$ ruby -v
ruby 1.9.2p290 (2011-07-09)

$ ruby -rcoderay_bash /bin/coderay -v
CodeRay 1.0.7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:08:48.887

在 Ruby 1.8 中，任何你想`require`用 RubyGems 安装的东西都无法访问，除非你`require 'rubygems'`. 1.9 删除了这个要求。

为此，您有多种选择：

*   只需放在`require 'rubygems'`文件的顶部即可。这对 1.9 来说是无害的，并且可能是最简单的事情，因为它在代码中，使用您的应用程序的人无需记住任何内容
*   将您的 shebang 行更改为`#!/usr/bin/env ruby -rubygems` This 告诉 Ruby 解释器需要 ruby​​gems，但允许用户通过直接发送您的文件来避免这种情况`ruby`，如果他们因某种原因被 RubyGems 冒犯了
*   始终使用 运行`ruby`和使用`-rubygems`，例如，`ruby -rubygems my_app.rb` 这在您的代码中不依赖于 RubyGems，并且可以工作，但您必须记住每次都这样做，这有点痛苦。

# php - 我是否需要在 symfony2 的“组”和“角色”类中添加“用户”类？

> ID：11496927
> 
> 赞同：2
> 
> 时间：2012-07-16T00:47:11.330
> 
> 标签：php, symfony, doctrine-orm

我有这些课程：

`user.php`,`group.php`和 `role.php`

现在，`group`该类有“M to M with users”和“M to M with roles”。

我不确定是否需要在`role`班级中添加用户，因为用户将属于`group`并且`group`将属于`roles`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T04:56:15.693

如果我正确地理解你，你就会有这样的事情：

用户 M2M 组 组 M2M 角色

因此，您可能希望在某些组中拆分角色（以 Symfony 方式）。如果你想做这样的事情，你可以按照 Symfony 食谱，直到你让用户 + 角色工作，然后在角色和组之间添加一些关系，或者简单地创建一个常量类，列出你的常量并将它们作为字段添加到角色并在需要时让您的控制器处理其余部分。

如果您需要其他内容，那么我误解了您，但无论如何...我会说 Symfony 希望您定义用户和角色，仅此而已，框架不会询问您可能已集成到用户中的其他数据和/或关系和/ 或角色。

希望对您有所帮助，如果我误解了您的问题，请见谅。

此致

# ibatis - MyBatis：“编译时”映射器参数替换，保持准备好的 stmt 但使表名可配置？

> ID：11496930
> 
> 赞同：0
> 
> 时间：2012-07-16T00:48:18.050
> 
> 标签：ibatis, mybatis, sql-parametrized-query

MyBatis 3.1.1 允许 #{...} 用于准备好的语句参数，或 ${...} 用于每次替换。

我遗漏了一些允许对 SQL 语句的部分进行参数化但仍保持其准备好的语句的东西；即在配置期间更换。

我怎样才能做到这一点？也许使用一些 SQL 片段？

**更新：**

我发现：

```
<sql id="userColumns"> id,username,password </sql>
<select id="selectUsers" parameterType="int" resultType="hashmap">
    SELECT <include refid="userColumns"/> some_table WHERE id = #{id}
</select> 
```

请参阅[http://www.mybatis.org/core/sqlmap-xml.html#sql](http://www.mybatis.org/core/sqlmap-xml.html#sql) 如果`${...}`可以在其中使用，那就是它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:09:05.973

在我的项目中，我们为这种情况提供了一个非常简单的解决方案。

我们在数据对象中有一个名为 TABLENAME 的字符串。当我们构造对象时，我们初始化表名。在 sqls 中，我们有表名 enquoutet。

在数据对象中：

```
String TABLENAME;
public String getTABLENAME() {return TABLENAME;}
public void setTABLENAME(String tablename) {this.TABLENAME = TABLENAME;} 
```

在 sql 中：

```
<delete id="simpleDelete" parameterClass="Integer">
    delete from ${jdbc.schema}.$TABLENAME$ 
    WHERE ID = #ID#
</delete> 
```

我不知道这是否是最好的解决方案，但效果很好。我愿意寻求更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:54:50.400

我想我找到了...

```
<sql id="userColumns"> id,username,password </sql> 
```

接着

```
<select id="selectUsers" parameterType="int" resultType="hashmap">
    SELECT <include refid="userColumns"/>
    FROM some_table
    WHERE id = #{id}
</select> 
```

所以我将在其中使用 ${...} ，这应该可以让我到达那里。

见[http://www.mybatis.org/core/sqlmap-xml.html#sql](http://www.mybatis.org/core/sqlmap-xml.html#sql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T01:52:15.673

由于`<sql>`不能按此目的工作，我填写了一个功能请求。 [http://code.google.com/p/mybatis/issues/detail?id=627](http://code.google.com/p/mybatis/issues/detail?id=627)

# python - python编写代码的字典帮助

> ID：11496931
> 
> 赞同：0
> 
> 时间：2012-07-16T00:48:21.927
> 
> 标签：python, dictionary

我有一个关于在字典上编写代码的问题，我已经完成了编码，但我在一方面感到困惑，这就是它所说的参数名称是 sort_by_value：“（{immutable_type:int} 的字典）-> 列表”和描述是“返回字典中根据其值按升序排序的键列表。具有相同值的键可以按任何顺序排序。”

我写的代码是

```
 def sort_by_value(dict):
        """
        (dict of {immutable_type:int}) -> list   """
        L = []
        for x in dict.values():
            L.append(x)
        L.sort()
        print L 
```

这段代码只用值来提升它，就像我有一本字典一样

```
 nd = {} 
    nd['john'] = 109090 
    nd['albert'] = 1900 
    nd['Tim'] = 18000 
    sort_by_value(nd) 
```

我得到了列表 [1900, 18000, 109090] 但我需要获取与这些值相关联的键，例如我想要的 ['albert', 'Tim', 'john']

我确实尝试过尝试并尝试在 Print LI 想要编写之前引入另一个 for 循环

```
 keyList= []

    for x in L:
        keyList.append(dict.get())
        if 
```

但我不知道这是否可行请需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:08:04.803

您可以使用内置的 sorted 函数对该字典的元组进行排序。

```
nd = {}
nd['john'] = 109090
nd['albert'] = 1900
nd['Tim'] = 18000

print sorted(nd.items(), key=lambda x: x[1]) 
```

哪个会返回：

```
[('albert', 1900), ('Tim', 18000), ('john', 109090)] 
```

如果您只想获取密钥：

```
print map(lambda x: x[0], sorted(nd.items(), key=lambda x: x[1])) 
```

会给你：

```
['albert', 'Tim', 'john'] 
```

参考：[http ://wiki.python.org/moin/HowTo/Sorting/](http://wiki.python.org/moin/HowTo/Sorting/)

# c - 内核重启后保留文件

> ID：11496934
> 
> 赞同：0
> 
> 时间：2012-07-16T00:48:58.057
> 
> 标签：c, linux, filesystems, kernel

我需要使用 reboot() 系统调用（用 ARM 重新启动内核 2.6.29），我尝试了以下代码：

```
#include <stdio.h>
#include <linux/reboot.h>
#include <unistd.h>
int main()
{
    reboot(LINUX_REBOOT_CMD_RESTART);
} 
```

它运作良好！但我想知道的是在重新启动内核后我丢失了正在保存的文件。我的意思是如果使用此代码，“url”文件在重新启动后不会保存。

```
int main()
    {
        FILE *pFile = fopen("url", "a"); // for .txt file
        // write to file/read from file ... etc
        fclose(pFile);

        int fdUART = open("/dev/ttySAC0", O_RDWR | O_NOCTTY | O_NDELAY);
        // some operations on UART port
        close(fdUART);
        /* Ethernet raw package process*/
        /* Char dev driver open and communicate with FPGA fifo */
        /* so on */
        reboot(LINUX_REBOOT_CMD_RESTART);
    } 
```

我正在使用 UART、以太网、字符驱动程序，只是想知道 reboot() 调用系统对我的系统的影响。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T01:36:44.390

您在评论中写到文件系统是 cramfs。

从[cramfs 的维基百科页面](http://en.wikipedia.org/wiki/Cramfs)：

> 压缩的 ROM 文件系统（或 cramfs）是一个免费（GPL 版）只读 Linux 文件系统，旨在简化和节省空间。它主要用于嵌入式系统和小尺寸系统。

请注意，它是只读的：这意味着您的更改不会被保留。

您需要写入持久存储以保留您的更改。

# java - 有没有一种简单的方法来实现一个带有两个输入行的对话框？（爪哇）

> ID：11496938
> 
> 赞同：4
> 
> 时间：2012-07-16T00:49:40.200
> 
> 标签：java, swing, user-interface, jtextfield, joptionpane

我正在制作一个 xml 编辑器作为我们在课堂上的项目之一，并且为了添加一个属性，我目前正在这样做：

```
String name = JOptionPane.showInputDialog(this, "Enter the attribute name: ", "Name", JOptionPane.INFORMATION_MESSAGE);
String value = JOptionPane.showInputDialog(this, "Enter the attribute value: ", "Value", JOptionPane.INFORMATION_MESSAGE); 
```

有没有更好的方法让一个对话框同时包含这两个东西？我查看了一些示例，但在实施/理解它们时遇到了麻烦。虽然我能够使用当前方法正确添加属性，但有两个输入框有点傻。

请让我知道是否有一些简单的解决方案。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T00:53:25.033

是的，您可以创建一个包含两个 JTextField 的 JPanel 并将其弹出到 JOtionPane.showConfirmDialog(....) 中，然后当它返回时，如果用户按下 OK 按钮，则从 JTextField 中提取文本。

例如，请在[这个答案中查看我的代码](https://stackoverflow.com/a/10150308/522444)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T00:52:44.447

所以你可以，但你需要使用带有 Object 的版本（感谢 hovercraft），[查看 Java 6 JOptionPage](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)，有多个变体！

# c++ - 理解-Weffc++

> ID：11496942
> 
> 赞同：16
> 
> 时间：2012-07-16T00:50:00.913
> 
> 标签：c++, pointers, g++, compiler-warnings, rule-of-three

考虑以下程序：

```
#include <string>

struct S {
    S (){}

private:
    void *ptr = nullptr;
    std::string str = "";
};

int main(){} 
```

这`-Weffc++`在 GCC 4.7.1 上编译时会输出：

```
警告：“结构 S”具有指针数据成员 [-Weffc++]
警告：但不覆盖 'S(const S&)' [-Weffc++]
警告：或 'operator=(const S&)' [-Weffc++]

```

这通常没问题，除了这个例子中的几件事：

1.  如果我注释掉任何构造函数、指针声明或字符串声明，警告就会消失。这很奇怪，因为您认为仅指针就足够了，但事实并非如此。此外，将字符串声明更改为整数声明也会导致它消失，因此它仅在存在字符串（或可能其他选择类）时出现。为什么在这种情况下警告会消失？

2.  当所有指针都指向现有变量（通常由操作系统维护）时，通常会出现此警告。没有`new`，也没有`delete`。在这些情况下，当复制带有句柄的类时，我不想要深拷贝。我希望两个句柄都指向同一个内部对象（例如窗口）。有没有办法让编译器实现这一点，而无需不必要地重载复制构造函数和赋值运算符，或者完全禁用警告`#pragma`？当三法则甚至不适用时，为什么我首先会受到困扰？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-17T19:17:24.097

GCC`-Weffc++`有几个问题，我从不使用它。检查“问题”的代码非常简单，因此警告最终过于生硬和无用。

该特定警告基于*Effective C++*第一版的第 11 项，Scott 在以后的版本中对其进行了更改（为了更好）。G++ 代码不检查实际的动态分配，只检查指针成员的存在。

在比较第一版和第三版的指南时，请参阅我在[GCC 的 bugzilla中写的关于此警告的内容：](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=16166#c3)

> > 第 11 项：为具有动态分配内存的类定义复制构造函数和赋值运算符。
> 
> 替换为第 14 条：“仔细考虑在资源管理类中复制行为”——该建议不太具体，但更有用。我不知道如何把它变成一个警告！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T02:47:37.970

1.  当你这样做时，你就有了一个 POD 结构。因为它不能有任何构造函数，`-Weffc++`所以不用检查。

2.  使用引用或`shared_ptr`对象或包装指针的任何其他对象。

# c++ - 右移 g++ 的意外结果

> ID：11496957
> 
> 赞同：3
> 
> 时间：2012-07-16T00:52:35.943
> 
> 标签：c++, g++, 64-bit

我发现将 uint64_t 值向右移动 64 位或更多位时会出现异常结果。我本来希望下面的代码输出值 0，但它没有 - 它输出 value>>2 - 但仅限于 g++。

```
#include <iostream>
#include <cstdint>
using namespace std;
int main(void)
{
    uint64_t value = 0x5d4d629e80d5489UL;
    int shift = 66;
    cout << hex << (value >> shift) << endl;
    return 0;
} 
```

我编译并运行：

```
$ g++ -std=c++0x mad.cpp
$ ./a.out
175358a7a035522
$ uname -a
Linux svr 3.2.0-26-generic #41-Ubuntu SMP Thu Jun 14 17:49:24 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
$ g++ --version 
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

我在另一个带有 g++ (Debian 4.4.5-8) 4.4.5 的 Linux 机器上得到了相同的行为。但是，当我使用 Visual Studio C++（Express Edition）编译它时，我没有得到相同的行为 - 我得到了我最初预期的结果 - 即 0。

我想知道当 x 和 y 是序数并且 y 大于 x 中的位数时，假设 C++ 中的 x>>y 应该产生 0 是否应该是安全的。这是一个 g++ 错误 - 还是这里不符合标准的 Visual C++？我假设这不是/不应该是未定义的行为？这可能是特定于 CPU 的吗？

我意识到我总是可以明确地检查超过 8*sizeof(value) 的每个班次——但这会引入一个额外的分支，我希望在某些性能关键代码中避免。

这是一个已知问题吗？如果是的话，为了实现一致的跨平台评估，推荐的策略是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T00:54:20.123

来自关于移位运算符的 C++ 标准：

> 如果右操作数...大于或等于提升的左操作数的位长度，则行为未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T00:57:12.337

此行为未定义。
考虑阅读一些关于移位太多是如何格式错误以及如何保护自己免受它的影响的阅读：[INT34-C。不要移动负数或比操作数中存在的更多位](https://www.securecoding.cert.org/confluence/display/seccode/INT34-C.+Do+not+shift+a+negative+number+of+bits+or+more+bits+than+exist+in+the+operand)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:00:30.487

未定义行为的一个原因是它取决于底层硬件，它以不同的方式实现转变。

在最初的 8086 上，移位是按照要求的次数执行的，每个位置使用一个时钟滴答。很快就发现这导致保证的中断响应时间很*糟糕*。

所以从 286 开始，硬件会屏蔽移位计数并且只使用低位。这就是当 66 变为 2 位置移位时所看到的。

# mysql - 如何通过单个 SQL 查询检索同一个数据库表中的“常见”记录？

> ID：11496959
> 
> 赞同：1
> 
> 时间：2012-07-16T00:52:54.990
> 
> 标签：mysql, sql, ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Ruby on Rails（版本 3.2.2）和 mysql2（版本 0.3.11 - MySQL 版本 5.2.38）。在讨论“[如何通过关联表检索一组用户“共同”拥有的关联对象/记录时](https://stackoverflow.com/questions/11494046/how-to-retrieve-associated-objects-records-that-a-set-of-users-have-in-common)*我发现自己处于必须找到“关联对象/记录”的“特定”情况**通过在关联数据库表上运行*单个*（出于性能原因）SQL 查询。特别是，*我想这样做是为了**仅**检索前面提到的“关联对象/记录”，其中`user_id`*（表示`foreign key`“指向”`User`对象）*和`article_id`*（表示`foreign key`“指向”`Article`*列值是相同的*（即，在哪里`article_id`和`user_id`是“共同的”）。

在我的情况下，我如何/应该检索“关联对象/记录”（也许，通过使用 Ruby on Rails 和/或 SQL/数据库“方式”/“上下文”中的某些工具）？

* * *

* 具体来说，在*@Andrew Marshall*发布他/她的答案之后。

***注意*：那些“关联对象/记录”与[链接问题](https://stackoverflow.com/questions/11494046/how-to-retrieve-associated-objects-records-that-a-set-of-users-have-in-common)中描述的`has_many :through`Ruby on Rails相关。[`ActiveRecord::Associations`](http://api.rubyonrails.org/classes/ActiveRecord/Associations.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:28:13.313

我认为这是一种提取所需内容的原始 sql 方式：

```
select * from articles_users where article_id in (select articles.id from articles inner join articles_users on articles_users.article_id = articles.id where user_id = 1) and user_id = 2; 
```

您可以在哪里替换 Rails 中的用户 ID：

```
ArticlesUser.find_by_sql(["select * from articles_users where article_id in (select articles.id from articles inner join articles_users on articles_users.article_id = articles.id where user_id = ?) and user_id = ?", @user1.id, @user2.id]) 
```

或者对于多个 id::

```
ArticlesUser.find_by_sql(["select * from articles_users where article_id in (select articles.id from articles inner join articles_users on articles_users.article_id = articles.id where user_id = ?) and user_id IN (?)", @user1.id, [@user2.id,@user3.id]]) 
```

所以从样本数据（来自你的其他问题）：

```
mysql> select * from articles_users;
+----+---------+------------+
| id | user_id | article_id |
+----+---------+------------+
|  1 |       1 |          1 |
|  2 |       1 |          2 |
|  3 |       1 |          3 |
|  4 |       2 |          1 |
|  5 |       2 |          2 |
|  6 |       3 |          1 |
|  7 |       3 |          3 |
|  8 |       4 |          4 |
+----+---------+------------+
8 rows in set (0.00 sec) 
```

它将因此返回值：

```
mysql> select * from articles_users where article_id in (select articles.id from articles inner join articles_users on articles_users.article_id = articles.id where user_id = 1) and user_id = 2;
+----+---------+------------+
| id | user_id | article_id |
+----+---------+------------+
|  4 |       2 |          1 |
|  5 |       2 |          2 |
+----+---------+------------+
2 rows in set (0.00 sec)

mysql> select * from articles_users where article_id in (select articles.id from articles inner join articles_users on articles_users.article_id = articles.id where user_id = 1) and user_id = 3;
+----+---------+------------+
| id | user_id | article_id |
+----+---------+------------+
|  6 |       3 |          1 |
|  7 |       3 |          3 |
+----+---------+------------+
2 rows in set (0.00 sec) 
```

或者对于多个用户 ID：

```
mysql> select * from articles_users where article_id in (select articles.id from articles inner join articles_users on articles_users.article_id = articles.id where user_id = 1) and user_id in (2,3);
+----+---------+------------+
| id | user_id | article_id |
+----+---------+------------+
|  4 |       2 |          1 |
|  5 |       2 |          2 |
|  6 |       3 |          1 |
|  7 |       3 |          3 |
+----+---------+------------+
4 rows in set (0.00 sec) 
```

您已经要求使用 sql 方式 - 但几乎可以肯定有一种 Railsy 方式可以做到这一点......但这应该让您开始，您可以从这里重构它。

# android - Android SDK 工具设置“应用程序错误”

> ID：11496964
> 
> 赞同：0
> 
> 时间：2012-07-16T00:53:52.297
> 
> 标签：android, sdk, windows-xp, installation, java

我正在尝试在我的 Windows XP SP3 上安装 Android SDK 工具。我已`jdk1.5.0_06` 安装，但 Android SDK 设置拒绝安装，并出现下图中的错误。检测到 JDK 安装后，这会在下一个屏幕中发生。

这是一个已知的问题？有没有解决办法？

![开发工具包错误](../Images/57d80845c5473454855e5f58fdfc271f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:13:41.630

不确定错误是什么。但强烈建议您使用 JDK 1.6.x 版本或 1.7x 进行 Android 开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:26:47.410

再次下载安装程序并查看它是否解决了问题。在安装 Android SDK 之前，请确保您的系统上已安装 jdk。或者，您可以安装 eclipse adt 插件，它会自动为您安装 Android SDK。[安装 Eclipse 插件](http://developer.android.com/sdk/installing/installing-adt.html)

# php - 如何阻止 PHP 在表单中转义撇号

> ID：11496969
> 
> 赞同：0
> 
> 时间：2012-07-16T00:54:42.117
> 
> 标签：php, forms, escaping, apostrophe

我有一个表单，一个输入将包含值：`Where something = 'something'`。

当我回显`$_GET`（或`$_POST`）时，它会替换为`Where something = \'something\'`

有什么建议么？

我认为它会通过`urlencode`进入表格并`urldecode`在我回应它时得到修复，但我无法弄清楚我哪里出错了。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T00:55:59.840

您需要在 php.ini 中关闭[魔术引号。](http://www.php.net/manual/en/security.magicquotes.disabling.php)

# openshift - OpenShift 域状态失败

> ID：11496980
> 
> 赞同：1
> 
> 时间：2012-07-16T00:56:01.850
> 
> 标签：openshift, openshift-client-tools

所以我在 open shift 创建了一个帐户，创建了一个应用程序，并安装了命令行工具。当我执行命令 rhc domain status 它失败：

```
Loaded suite /usr/bin/rhc-chk
Started
.E
===============================================================================
Error: test_connectivity(Test1_Connectivity)
  ArgumentError: too few arguments
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:204:in `sprintf'
     201:   message = sprintf(get_message(:errors,name),*(args.shift || ''))
     202:   solution = get_message(:solutions,name)
     203:   if solution
  => 204:     message << "\n" << sprintf(solution,*(args.shift || ''))
     205:   end
     206:   message
     207: end
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:204:in `error_for'
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:270:in `test_connectivity'
===============================================================================
F
===============================================================================
Failure:
  You need to be able to connect to the server in order to test authentication.
  <false> is not true.
test_authentication(Test2_Authentication)
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:280:in `test_authentication'
     277:   # Checking Authentication
     278:   #
     279:   def test_authentication
  => 280:     assert $connectivity, error_for(:cant_connect)
     281: 
     282:     data = {'rhlogin' => $rhlogin}
     283:     response = fetch_url_json("/broker/userinfo", data)
===============================================================================
..F
===============================================================================
Failure: You must have an account on the server in order to test: whether you have a valid key loaded in your agent.
test_03_remote_ssh_keys(Test3_SSH)
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:317:in `require_login'
     314:   end
     315: 
     316:   def require_login(test)
  => 317:     flunk(error_for(:no_account,test)) if $user_info.nil?
     318:   end
     319: 
     320:   def require_remote_keys(test)
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:321:in `require_remote_keys'
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:376:in `test_03_remote_ssh_keys'
===============================================================================
F
===============================================================================
Failure: You must have an account on the server in order to test: connecting to your applications.
test_04_ssh_connect(Test3_SSH)
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:317:in `require_login'
     314:   end
     315: 
     316:   def require_login(test)
  => 317:     flunk(error_for(:no_account,test)) if $user_info.nil?
     318:   end
     319: 
     320:   def require_remote_keys(test)
/Library/Ruby/Gems/1.8/gems/rhc-0.94.8/bin/rhc-chk:383:in `test_04_ssh_connect'
===============================================================================

Finished in 2.403595 seconds.

7 tests, 8 assertions, 3 failures, 1 errors, 0 pendings, 0 omissions, 0 notifications
42.8571% passed 
```

不太明白为什么它无法连接。我可以使用：rhc domain show，没有问题。

有人对如何解决这个问题有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:18:35.183

这是一个应该在即将发布的版本中修复的[错误。](https://bugzilla.redhat.com/show_bug.cgi?id=836483)即使您看到此错误，它也不应该影响任何其他行为。

# javascript - 刮描述标签的最简单方法是什么

> ID：11496981
> 
> 赞同：0
> 
> 时间：2012-07-16T00:56:01.673
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3

我想在我的应用程序上创建一个“推荐”按钮，该按钮将出去并获取给定 URL 的描述标签，然后将其返回。我正在考虑将其作为对某个控制器（POST 或 GET？）的 getScript() 请求，然后当服务器返回响应时，脚本将其插入到文本框中

没有像 nokogiri 这样的开销，最简单的方法是什么？这是我在整个应用程序中抓取某些东西的唯一地方，所以我宁愿将其保留为一种非常轻量级的方法。

另外，我应该在我的控制器中使用 GET 还是 POST（根据 rails 方式）？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T03:17:35.427

通过描述，您是指元标记吗？

让yahoos yql服务为您完成繁重的工作。例如

```
SELECT * FROM html WHERE url="http://google.com" AND xpath="//head/meta" 
```

[这是在他们的测试控制台中](http://y.ahoo.it/ovzEM)

这是您在 json中[检索响应时要获取的 url](http://query.yahooapis.com/v1/public/yql?q=SELECT%20%2a%20FROM%20html%20WHERE%20url=%22http://google.com%22%20AND%20xpath=%22//head/meta%22&format=json)

# python - Python 中的多步并发 HTTP 请求

> ID：11496982
> 
> 赞同：0
> 
> 时间：2012-07-16T00:56:05.723
> 
> 标签：python, asynchronous, concurrency, web-scraping

我需要在 Python 中进行一些三步网页抓取。我最初抓取了几个基本页面，我需要从这些页面中获取一些选择链接并检索它们指向的页面，然后再重复一次。诀窍是我想异步执行所有这些操作，以便尽快触发每个请求，并且不会因单个请求而阻塞整个应用程序。我该怎么做？

到目前为止，我一直在使用 进行一步抓取`eventlet`，如下所示：

```
urls = ['http://example.com', '...']
def scrape_page(url):
    """Gets the data from the web page."""
    body = eventlet.green.urllib2.urlopen(url).read()
    # Do something with body
    return data

pool = eventlet.GreenPool()
for data in pool.imap(screen_scrape, urls):
    # Handle the data... 
```

但是，如果我扩展此技术并包含一个嵌套`GreenPool.imap`循环，它会阻塞，直到该组中的所有请求都完成，这意味着应用程序无法根据需要启动更多请求。

我知道我可以使用 Twisted 或其他异步服务器来做到这一点，但我不需要这么大的库，我宁愿使用轻量级的东西。不过，我愿意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T05:39:12.170

这是一个想法......但请原谅我，因为我不知道 eventlet。我只能提供一个粗略的概念。

考虑您的“步骤 1”汇集生产者。创建一个[队列](http://docs.python.org/library/queue.html)并让您的第 1 步工作人员将他们找到的任何新 url 放入队列中。

创建另一个工人池。让这些工作人员从队列中提取 url 并处理它们。如果在他们的过程中他们发现了另一个 url，将其放入队列中。他们将继续通过后续工作养活自己。

从技术上讲，这种方法可以轻松地递归超过 1,2,3+ 步骤。只要他们找到新的 url 并将它们放入队列中，工作就会继续进行。

更好的是，从队列中的原始 url 开始，然后创建一个将新 url 放入同一个队列的池。只需要一个游泳池。

**发布说明**

有趣的是，在我发布了这个答案并去寻找 eventlet 'queue' 等效项是什么之后，我立即找到了一个示例，该示例完全显示了我刚才描述的内容：

[http://eventlet.net/doc/examples.html#producer-consumer-web-crawler](http://eventlet.net/doc/examples.html#producer-consumer-web-crawler)

在该示例中，有一个`producer`and`fetch`方法。生产者开始从队列中提取 url 并将线程生成到`fetch`. `fetch`然后将任何新的 url 放回队列中，它们会继续互相喂食。

# jquery - jQuery滑块功能

> ID：11496984
> 
> 赞同：0
> 
> 时间：2012-07-16T00:56:20.173
> 
> 标签：jquery, jquery-ui, jquery-effects

当用户单击“关闭”时，我试图让[此页面上的“告诉朋友按钮”返回到其原始位置，但它做了一些不同的事情。](http://gloucestercountykarate.com/?page_id=2)当你点击它时它会打开幻灯片，我希望它在用户点击关闭时做相反的事情。功能如下图：

```
$(document).ready(function() {
    $(".tell").click(function () {
        $("DIV#tellform").show("slide", { direction: 'left' }, 2000);
        $(".tell").hide("fade", {}, 1);
    });

    $(".closer").click(function () {
        $("DIV#tellform").show("slide", { direction: 'right' }, 0);
    });
}); 
```

HTML如下所示：

```
<div class="closer">
    <a href="#">X close</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T01:01:10.787

改变

```
$("DIV#tellform").show("slideTo", { direction: 'right' }, 0); 
```

到

```
$("DIV#tellform").show("slideTo", { direction: 'left' }, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T01:33:53.870

我更改了如下所示的功能，它现在正在做我想要的。

```
<script type="text/javascript">

    $(document).ready(function() {

   $(".tell").click(function () {

      $("DIV#tellform").show("slide", { direction: 'left' }, 2000);

      $(".tell").hide("fade", {}, 1);

});

   $(".closer").click(function () {

      $("DIV#tellform").hide("slide", { direction: 'left' }, 2000);
      $(".tell").show("fade", {}, 1);

      });

  });

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:25:51.017

或这个：

```
$(".tell").click(function () {

    $(".tell").hide();
    $("#tellform").animate({
      width: 'toggle'
    }, 2000 );

});

$(".closer").click(function () {

    $("#tellform").animate({
      width: 'toggle'
    }, 2000, function(){
        $(".tell").show();
    });

}); 
```

# dom - 流星：当我插入到 CollectionB 时，来自 CollectionA 的元素重新渲染

> ID：11496986
> 
> 赞同：4
> 
> 时间：2012-07-16T00:56:39.613
> 
> 标签：dom, callback, rendering, jquery-animate, meteor

我试图在用户发布的评论的反应性 {{#each}} 中淡入新元素。

我在[https://gist.github.com/3119147](https://gist.github.com/3119147)有一个非常简单的评论部分的代码示例（不包括 textarea 和新评论插入代码，但它非常样板。）。包括我给出的 CSS 片段`.comment.fresh { opacity: 0; }`，然后在我的脚本中，我有：

```
Template.individual_comment.postedago_str = function() {
  var id = this._id;
  Meteor.defer(function() {
    $('#commentid_'+id+'.fresh').animate({'opacity':'1'}, function() {
      $(this).removeClass('fresh');
    });
  });
  return new Date(this.time).toString();
}; 
```

这似乎是一个执行动画的可怕地方。我的想法是，每次呈现新评论时，都需要调用我的所有`Template.individual_comment.*`函数，这就是为什么我的动画与其中一个函数不同的原因。`Template.individual_comment.postedago_str()`但是，每次插入*不同*的集合（喜欢）时，Meteor 都会调用。这意味着我单击“赞”按钮，我的整个评论列表会闪烁白色并淡入（非常烦人！）。

我阅读了 Meteor 文档并试图弄清楚如何更好地分割我的模板以便只有块会更新，并且我在所有看起来合理的地方添加了 id="" 属性.. 仍然是这个错误。有谁知道发生了什么？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T22:54:36.223

作为一种解决方法，您可以在单个评论`{{if}}`的类周围包裹一个块`fresh`，这将检查评论的创建时间，并且`fresh`如果评论实际上是最近的，则仅首先添加该类。就像是：

```
<div class="comment{{#if isActuallyFresh}} fresh{{/if}}" id="commentid_{{_id}}"> 
```

然后定义 isActuallyFresh 函数：

```
Template.individual_comment.isActuallyFresh = function() {
  if ((new Date().getTime() - this.time) < 300000) // less than 5 minutes old
     return true;
  else
     return false; 
```

# heroku - 在为多租户服务创建 Heroku 附加组件时，如何为单个租户提供多个 Heroku 应用程序？

> ID：11496988
> 
> 赞同：2
> 
> 时间：2012-07-16T00:57:04.583
> 
> 标签：heroku, multi-tenant, add-on

[Stormpath](http://www.stormpath.com)是一个多租户云身份管理服务，我们希望将其作为 Heroku 附加组件提供给 Heroku 用户。

与 Heroku 一样，Stormpath 能够为每个客户代表一个或多个应用程序（其中“客户”是“租户”的同义词）。

例如，就像 Heroku 客户可以将一个或多个应用程序部署到 Heroku（测试、登台、生产等）一样，Stormpath 客户（租户）可以注册一个或多个他们希望 Stormpath 保护的应用程序。

从这个意义上说，Stormpath 的模型和 Heroku 的模型对于这种一对多（客户到应用程序）的关系似乎是相同的。

这是我的问题：

当 Heroku 客户将 Stormpath 添加到多个应用程序时，我们如何确保这些应用程序与同一个 Stormpath 租户相关联？

在[插件配置](https://addons.heroku.com/provider/resources/technical/build/provisioning)期间，插件实现是否可以获取 Heroku 客户的唯一租户标识符，该标识符在所有 Heroku 应用程序中通用？例如，唯一的 Heroku 租户 ID 或 Heroku 租户所有者电子邮件地址？

实现逻辑如下：

*   正在配置的 Heroku 应用程序的所有者是否有 Stormpath 租户？
    *   否：创建 Stormpath 租户，然后将应用程序与新租户关联。
    *   是：将应用程序关联到所有者的现有 Stormpath 租户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T09:28:52.440

When Heroku sends you the provision request you'll get a JSON blob something [like this](https://addons.heroku.com/provider/resources/technical/reference/api-spec):

```
{
  "heroku_id": "app123@heroku.com",
  "plan": "basic",
  "region": "amazon-web-services::us-east-1",
  "callback_url": "https://api.heroku.com/vendor/apps/app123%40heroku.com",
  "options": {}
} 
```

You could use that `heroku_id` to find the user identifier through Heroku's [AppInfo API](https://devcenter.heroku.com/articles/add-on-app-info#get-app-info).

# php - 选择离按钮最近的文本区域

> ID：11496995
> 
> 赞同：2
> 
> 时间：2012-07-16T00:59:02.097
> 
> 标签：php, javascript, jquery, closest

我有一个`td`包含一个`textarea`和一个按钮的表，我想通过 AJAX 在按钮单击时发送 textarea 的值，但是选择最接近按钮的 textarea 时出现问题。

JavaScript

```
$(document).ready(function () {
    $(document).on("click", ".addR", function () {
        paperID = $(this).attr("paperID");
        commentID = $(this).attr("commentID");
        text = $(this).closest("textarea").val();
        $.ajax({
            data: {
                paperID: paperID,
                commentID: commentID,
                text: text
            },
            type: 'POST',
            url: 'add_rebuttal.php',
            success: function (response) {
                alert(response);
                window.location.href = window.location.href;
            }
        });
    });
}); 
```

PHP：

```
while ($row = mysql_fetch_assoc($comments)) {
    echo "<tr><td>{$row['text']}</td>";
?>
    <td><br /><textarea class="reText" rows='5' name='reText' id='reText' style='width:98%;' type='text'></textarea>
    <button commentID="<?php echo $row['comment_id'] ?>" paperID="<?php echo $paper_id ?>" class="addR" type="button" name="addR" id="addR">send rebuttal</button></td></tr> <?
} 
```

问题是`$(this).closest("textarea").val();`返回未定义，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T01:04:13.063

最近（）返回最近的**祖先**。您的 textarea 不是您的按钮的祖先，它是以前的兄弟姐妹。相反，请尝试：

```
text = $("textarea", $(this).parent()).val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:01:01.163

要获取 textarea 的文本，您必须使用`text()`而不是`val()`. 正如 Scotty 所指出的，您想要的 textarea 不是祖先，所以不要使用`closest()`.

# python - Python gevent 我没有看到猴子修补了默认文件打开/读/写/关闭，如何使 gevent 中的文件 io 异步

> ID：11496996
> 
> 赞同：4
> 
> 时间：2012-07-16T00:59:05.203
> 
> 标签：python, gevent

在 gevent 猴子补丁中，我没有看到任何关于默认文件对象的操作。如何在基于 gevent 的程序中使用异步文件读/写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:10:54.643

您可以使用 1.0b3 中提供的 gevent 的 fileobject.FileObjectThreadPool 类：

```
pip install http://gevent.googlecode.com/files/gevent-1.0b3.tar.gz#egg=gevent 
```

那么您的示例将变为：

```
#!/usr/bin/env python
import gevent
from gevent.fileobject import FileObjectThreadPool
import datetime

def hi():
    while True:
        print datetime.datetime.now(), "Hello"
        gevent.sleep( 1 )

def w():
    print "writing..."
    s = "*"*(1024*1024*1024)
    print 'about to open'
    f_raw = open( "./a.txt", "wb" )
    f = FileObjectThreadPool(f_raw, 'wb')
    f.write(s)
    f.close()
    print 'write done'

t1 = gevent.spawn(hi)
t2 = gevent.spawn(w)
ts = [t1,t2]
gevent.joinall( ts ) 
```

我看到带有该代码的以下输出：

```
writing...
about to open
2012-08-13 13:00:27.876202 Hello
2012-08-13 13:00:28.881119 Hello
2012-08-13 13:00:29.959642 Hello
...
2012-08-13 13:00:58.010001 Hello
2012-08-13 13:00:59.010146 Hello    
2012-08-13 13:01:00.010248 Hello
write done
2012-08-13 13:01:01.469547 Hello
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T01:53:56.333

刚做了个测试，说写大文件会阻塞事件循环

```
#!/usr/bin/env python
import gevent
import datetime

def hi():
    while True:
        print datetime.datetime.now(), "Hello"
        gevent.sleep( 1 )

def w():
    print "writing..."
    s = "*"*(1024*1024*1024)
    f = open( "e:/a.txt", "wb" )
    f.write(s)
    f.close()

t1 = gevent.spawn(hi)
t2 = gevent.spawn(w)
ts = [t1,t2]
gevent.joinall( ts ) 
```

结果是这样的：

```
e:\zPython\zTest>gevent.write.large.file.py
writing...  # wait a long time here
write done.
2012-07-16 09:53:23.784000 Hello
2012-07-16 09:53:24.786000 Hello
2012-07-16 09:53:25.788000 Hello 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T05:24:56.653

您可以使用线程池（从 gevent [1.0](http://code.google.com/p/gevent/downloads/list)开始）：

```
>>> import gevent.threadpool
>>> pool = gevent.threadpool.ThreadPool(5)
>>> pool.apply(w) 
```

# linux - 如何确定设备内存的页框号？

> ID：11496999
> 
> 赞同：9
> 
> 时间：2012-07-15T07:56:21.170
> 
> 标签：linux, kernel, device

来自 LDD3/ Ch. 15/“使用 remap_pfn_range”和“一个简单的实现”部分，pfn 已等同于 vm_pgoff 字段。我对此感到困惑。怎么会这样？

请注意，vm_pgoff 被描述为：

> 文件中区域的偏移量，以页为单位。映射文件或设备时，这是该区域中映射的第一页的文件位置。

因此，如果映射的第一页也对应于文件的第一页（我认为这很常见），vm_pgoff 将为 0。对吗？如果是这样，这似乎不是 remap_pfn_range( ) 的 pfn 参数的正确值。我在这里想念什么？什么是正确的值？为了便于参考，我从下面的LDD3中复制了相关代码（第426页）

```
static int simple_remap_mmap(struct file *filp, struct vm_area_struct *vma)
{
if (remap_pfn_range(vma, vma->vm_start, vm->vm_pgoff,
                    vma->vm_end - vma->vm_start,
                    vma->vm_page_prot))
    return -EAGAIN;
...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T05:29:42.977

您提供的具体示例是实现一个字符设备文件，该文件允许映射物理内存，非常类似于 /dev/mem。通过指定文件的偏移量，您可以指定物理内存地址。因此，计算采用偏移量并除以页面大小以找到 PFN。

对于“真正的”设备驱动程序，您通常会从设备规范中硬编码设备内存映射寄存器或 RAM 的物理地址，并使用它来导出 PFN（通过除以页面大小）。