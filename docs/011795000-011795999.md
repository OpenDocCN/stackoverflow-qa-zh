# StackOverflow 问答 11795000-11795999

# javascript - 如何使用 java 脚本将 iframe 的 src 设置为当前访问的站点？

> ID：11795003
> 
> 赞同：0
> 
> 时间：2012-08-03T11:39:14.030
> 
> 标签：javascript, iframe, web

我想以独立于客户端网络浏览器分辨率的固定分辨率拍摄当前访问的站点的快照。因此，我想将活动站点加载到具有该固定分辨率的隐藏 iframe 中，并从那里获取快照。

现在我的问题是：如何在 iframe 中加载我当前所在的同一站点。加载其他页面工作正常，但我无法在 iframe 中加载相同的站点。

这是一些安全问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:37:54.647

测试了嵌套的 iframe，它在不同的浏览器中`.src`是相等的。`document.href.url`只有 Chrome 允许在第一级嵌入这样的 iframe，其他浏览器阻止上述递归并将 iframe 留空。（附带说明一下，Firefox 和 Opera 似乎最多允许 10 个和 20 个不同的嵌套 iframe，其他浏览器（如 Google Chrome 和 Explorer）无限添加 iframe。）您可以使用以下代码将父页面嵌入 iframe ，通过稍微修改的网址：

```
function load_iframe(addr) {
    var iframe = document.getElementById('iframe1');
    if (addr == document.location.href) {
        if (addr.indexOf('?') == -1) {
            addr += '?dummy_string';
        } else {
            addr += '&dummy_string';
        }
    }
    iframe.src = addr;
} 
```

HTML 示例：

```
<a href="" onclick="event.preventDefault();load_iframe(this.href);">This page</a>
<iframe id="frame1" src="" style="width:100%; height:500px" /> 
```

[测试脚本在这里。](http://pastebin.com/MURfud8M)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:46:00.613

就像是

> if (!document.getElementById('hiddenFrame') {
> document.appendChild('<iframe id="hiddenFrame" src='+document.location+' style="display:none"'/>); }

将脚本放在页面底部，就在关闭 BODY 标记之前，或者使用 jQuery 之类的库。

# android - 在上下文菜单之外点击会关闭它

> ID：11795006
> 
> 赞同：1
> 
> 时间：2012-08-03T11:39:22.353
> 
> 标签：android

我创建了一个上下文菜单。当我在此上下文菜单之外单击时，没有任何反应。但是当我检查它是否有冰淇淋三明治手机时，当我在上下文菜单之外单击时，菜单会被关闭。我怎样才能避免这种解雇？有没有像`setCanceledOnTouchOutside()`Dialog一样的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:44:55.607

我不认为有任何 api 可以改变行为，你必须创建自己的对话框来做到这一点。

# java - 如何从具有 2 种不同格式的字符串中解析持续时间并添加它们？

> ID：11795007
> 
> 赞同：0
> 
> 时间：2012-08-03T11:39:26.523
> 
> 标签：java

我有 2 个具有两种不同格式的字符串，例如第一种格式：“08:50 09:50”第二种格式：“10:30”

我如何解析并减去第一个为 01:00 并在解析后将其添加到第二个以获得总计 = 11:30

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:59:52.633

我认为这样的事情应该有效

```
String a = "08:50 09:50";
String b = "10:30";
String[] c = a.split(" ", 2);

DateFormat sdf = new SimpleDateFormat("hh:mm");

Date t1 = sdf.parse(c[0]); 
Date t2 = sdf.parse(c[1]);
Date t3 = sdf.parse(b);

long t = (t2.getTime() - t1.getTime()) + t3.getTime();

Time time = new Time(t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:00:18.583

假设这是分钟：秒（如果是小时：分钟会相应地更改），您可以使用日历来这样做：

```
String[] tokens1 = "08:50 09:50".split(" ");
String[] tokens2 = tokens[0].split(":");
int minutes1 = Integer.valueOf(tokens2[0]);
int seconds1 = Integer.valueOf(tokens2[1]);
tokens2 = tokenss[1].split(":");
int minutes2 = Integer.valueOf(tokens2[0]);
int seconds2 = Integer.valueOf(tokens2[1]);

Calendar cal = Calendar.getInstance();
cal.setTime(new Date(0l));
cal.add(minutes2, Calendar.MINUTE);
cal.add(-minutes1, Calendar.MINUTE);
cal.add(seconds2 , Calendar.SECOND);
cal.add(-seconds1 , Calendar.SECOND);

int minuteDifference = cal.get(Calendar.MINUTE);
int secondDifference = cal.get(Calendar.SECOND); 
```

这为您提供了第 2 次和第 1 次之间的差异。现在使用相同的拆分和日历机制进行第三次解析并进行加法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:47:34.890

格式基本相同`HH:mm`，您可以使用 SimpleDateFormat 解析和格式化。要拆分字符串，您可以使用`.split(" ")`

# iphone - 阿拉伯语内容以奇怪的字符显示

> ID：11795008
> 
> 赞同：0
> 
> 时间：2012-08-03T11:39:33.047
> 
> 标签：iphone, ios, xml, ios4, multilingual

我正在尝试解析以下阿拉伯语内容

```
<type id="14">
<data name="title">قافية</data>
</type>

NSString *responseString = [request responseString];
NSData *xmlData=[[request responseString] dataUsingEncoding:NSUTF8StringEncoding]; 
```

打印响应时我得到如下

```
responseString:<?xml version="1.0" encoding="UTF-8" ?><type>
<data name="title">ÙØ§ÙÙØ©</data>
</type> 
```

请看![这](../Images/240e490c5377f4a65bb9cbfd5de879e3.png)附件图片，这是它在我的 ios 应用程序上显示内容的方式

请让我知道我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:58:21.050

尝试使用以下编码，

```
// The following constants are provided by NSString as possible string encodings.

enum {
   NSASCIIStringEncoding = 1,
   NSNEXTSTEPStringEncoding = 2,
   NSJapaneseEUCStringEncoding = 3,
   NSUTF8StringEncoding = 4,
   NSISOLatin1StringEncoding = 5,
   NSSymbolStringEncoding = 6,
   NSNonLossyASCIIStringEncoding = 7,
   NSShiftJISStringEncoding = 8,
   NSISOLatin2StringEncoding = 9,
   NSUnicodeStringEncoding = 10,
   NSWindowsCP1251StringEncoding = 11,
   NSWindowsCP1252StringEncoding = 12,
   NSWindowsCP1253StringEncoding = 13,
   NSWindowsCP1254StringEncoding = 14,
   NSWindowsCP1250StringEncoding = 15,
   NSISO2022JPStringEncoding = 21,
   NSMacOSRomanStringEncoding = 30,
   NSUTF16StringEncoding = NSUnicodeStringEncoding,
   NSUTF16BigEndianStringEncoding = 0x90000100,
   NSUTF16LittleEndianStringEncoding = 0x94000100,
   NSUTF32StringEncoding = 0x8c000100,
   NSUTF32BigEndianStringEncoding = 0x98000100,
   NSUTF32LittleEndianStringEncoding = 0x9c000100,
   NSProprietaryStringEncoding = 65536
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T04:03:57.187

首先，在检查您的响应字符串（`<?xml version="1.0" encoding="Change here" ?><type>`）之后，它看起来是 xml 编码类型的问题。告诉您的 Web 开发人员为阿拉伯语内容提供正确的编码，并检查它在浏览器中的响应是否正确显示，然后在您身边尝试各种编码。它肯定会修复。

# arrays - 从 Knockout.JS observableArray 项构造函数中访问外部值

> ID：11795010
> 
> 赞同：0
> 
> 时间：2012-08-03T11:39:40.410
> 
> 标签：arrays, scope, knockout.js

我有一个条形图，它在子条形图中显示可变数量的值。条的总宽度是固定的。每当一个值发生变化时，我需要将所有条形的宽度重新计算为所有值的新总和的比例。

子栏是基于 knockout.js 可观察数组的模板：

```
<div data-bind="foreach: subBars">
   <div data-bind="style: { width: (width() + 'px'), backgroundColor: color }"></div>
</div> 
```

Array 本身将一个初始宽度和一个值传递给 subBars：

```
this.subBars = ko.observableArray ([
   new subBar(initialWidth01, color01);
   new subBar(initialWidth02, color02);
]); 
```

每当 subBar 的值发生更改时，所有值的总和计算为

```
this.subBarsTotal = ok.computed... (this works) 
```

在视图模型中。

视图模型之外的 subBar 函数是：

```
function subBar (initialWidth, color) {
  var self = this;
  self.initialWidth = initialWidth; 
  self.width = ok.computed(function(){
     var adjustedWidth = self.initialWidth() / subBarsTotal() * widthOfBar;  
  return adjustedWidth;
  }
  self.color = color;
} 
```

不管我怎么尝试，我都没有找到获得 subBarsTotal 值的方法。

我在这里没有看到什么？

（编辑：错字）（编辑：整个代码）（编辑：回到基础 - 整个代码不是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:11:35.080

您无法直接从 subBar 访问 viewModel 的变量 - 函数。

如果你像这样定义你的viewModel：

```
function vm() {
  var self = this;
  this.subBars = ko.observableArray ([
     new subBar(initialWidth01, color01);
     new subBar(initialWidth02, color02);
  ]);
  this.subBarsTotal = ko.computed(function(){...});  
  ...
}

var viewModel = new vm(); 
```

你可以调用它的属性：

```
function subBar (initialWidth, color) {          
      self.initialWidth = initialWidth; 
      self.width = ok.computed(function(){
         var adjustedWidth = self.initialWidth() / viewModel.subBarsTotal() * widthOfBar;  
      return adjustedWidth;
      }
      self.color = color;
} 
```

或者您可以像这样将 viewModel 的实例传递给 subBar：

```
function vm() {
   var self = this;
   this.subBars = ko.observableArray ([
     new subBar(initialWidth01, color01, self);
     new subBar(initialWidth02, color02, self);
   ]);
}

function subBar (initialWidth, color , vm) {
   ...
   vm.subBarsTotal();
   ...
} 
```

**编辑 ：**

我稍微改变了你的代码。在定义的计算函数之后推送数组值。

检查这个[JsFiddle 链接](http://jsfiddle.net/gurkavcu/aCD4j/)

```
function hundred_bar_section(width, color, dvm) {
    this.hundred_width = ko.observable(width);
    this.section_color = color;
    console.log(dvm.hundred_bar_total()); // is now defined
}

function DashboardViewModel() {
    var self = this;
    this.hundred_bar_sections = ko.observableArray([]);
    // adds the total current values of all hundred_bar_section widths
    this.hundred_bar_total = ko.computed(function() {
        var hundred_bar_length = self.hundred_bar_sections().length;
        //console.log (hundred_bar_length);
        var hundred_bar_added = 0;
        for (var i = 0; i < hundred_bar_length; i++) {
            hundred_bar_added += self.hundred_bar_sections()[i].hundred_width();
        }
        console.log(hundred_bar_added);
        return hundred_bar_added;
    });

    this.hundred_bar_sections.push(new hundred_bar_section(100, "#f60", self));
    this.hundred_bar_sections.push(new hundred_bar_section(200, "#6f0", self));
    this.hundred_bar_sections.push(new hundred_bar_section(100, "#06f", self));

}

$(document).ready(function() {

    var vm = new DashboardViewModel();
    ko.applyBindings(vm);

})​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:19:39.543

您可以将参数传递给您`width`计算的 observable。参见[knockoutjs：我们可以创建一个带参数的dependentObservable 函数吗？](https://stackoverflow.com/questions/6706281/knockoutjs-can-we-create-a-dependentobservable-function-with-a-parameter)

因此，我只是将`subBarsTotal`值传递给您计算的 observable。这将避免使您的设计过于耦合。

# java - -help 选项中的 Apache Commons CLI 多个参数值名称

> ID：11795015
> 
> 赞同：9
> 
> 时间：2012-08-03T11:39:51.070
> 
> 标签：java, command-line, arguments, command-line-interface, apache-commons-cli

我使用 Apache Commons CLI 来解析命令行参数。

我正在寻找一种在帮助中显示多个参数值名称的方法。以下是选项“startimport”的一个参数的示例：

```
Option startimport = OptionBuilder
                .withArgName("environment")
                .hasArg()
                .withDescription(
                        "Description")
                .create("startimport"); 
```

当我使用 -help 时，它会打印出来：

```
-startimport <environment>                    Description 
```

那很好。但是如果我想使用两个参数呢？

```
Option startimport = OptionBuilder
                .withArgName("firstArg secondArg")
                .hasArgs(2)
                .withDescription("Description")
                .create("startimport "); 
```

解析这两个参数不是问题，但我希望“-help”中的以下输出：

```
startimport <firstArg> <secondArg>                    Description 
```

但目前我只会得到：

```
startimport <firstArg secondArg>                    Description 
```

这个问题有合适的解决方案吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-26T15:52:54.197

我找到了一种以行为正确的方式解决此问题的方法，并认为我会分享，因为这是谷歌在研究时引导我访问的页面之一。此代码是使用 Commons CLI 1.2 编写的。

```
Option searchApp = OptionBuilder.withArgName("property> <value")
            .withValueSeparator(' ')
            .hasArgs(2)
            .withLongOpt("test")
            .withDescription("This is a test description.")
            .create("t"); 
```

帮助消息如下所示：

```
-t,--test <property> <value>    This is a test description. 
```

它可以像这样从命令行使用：

```
java -jar program.jar -t id 5 
```

并且可以在如下代码中检索参数的 String[]：

```
Options options = new Options();
options.addOption(searchApp);
PosixParser parser = new PosixParser();
CommandLine cmd = parser.parse( options, args);
String[] searchArgs = cmd.getOptionValues("t"); 
```

`searchArgs[0]`然后您可以使用和检索值`searchArgs[1]`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-20T04:58:24.287

我用了一个顽皮的方法来解决这个问题。

```
 OptionBuilder.hasArgs(3);
    OptionBuilder.withArgName("hostname> <community> <oid");
    OptionBuilder.withDescription("spans switch topology. Mutually exclusive with -s");
    Option my_a = OptionBuilder.create("a"); 
```

它现在正确显示在帮助中。虽然我不确定这是否会产生后果。

# css - CSS行高像素值不起作用

> ID：11795016
> 
> 赞同：1
> 
> 时间：2012-08-03T11:40:02.670
> 
> 标签：css

好的，这里是演示： http: [//jsfiddle.net/YLJyV/](http://jsfiddle.net/YLJyV/)
每行文本应该是 40 像素高 ( `line-height: 40px`)，但`span`显示这没有发生。我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T20:28:43.340

我知道这个问题已经过时并且已经解决了，但是如果其他人在这里结束，今天我了解到 span 和 div 以不同的方式处理 line-height。更多信息：[为什么 span 的 line-height 没用](https://stackoverflow.com/questions/11829393/why-the-spans-line-height-is-useless)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T19:39:35.847

[http://jsfiddle.net/YLJyV/28/](http://jsfiddle.net/YLJyV/28/)

那是你要找的吗？

# oop - 多态对象创建——菱形继承层次

> ID：11795019
> 
> 赞同：0
> 
> 时间：2012-08-03T11:40:21.187
> 
> 标签：oop, diamond-problem

语言：C/C++
问题：举个常见的例子，其中

*   **A**是父类。
*   **B**和**C**都继承自类**A**。
*   **D**继承自**B**和**C**

我们想通过**D的对象访问****A**的函数

 **注意：它是虚拟继承！**所以我们知道A**只有一个对象。

问题是：谁的对象将首先创建**B**或**C**？

牢记层次结构

```
 A
 /   \
B     C
 \   /
   D 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:52:59.360

简而言之， OO 本身对此*没有任何保证*。

如果您正在谈论特定的实现或语言（但问题没有），则可能对此有保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:54:23.523

是的，这个问题有时也被撇号为*死亡钻石*。

不幸的是，**您的问题无法回答：它基于您正在编程的当前语言。**

例如，在 Scala（特征允许多重继承）中，沿线性[化算法的实例化有一个非常严格的规则](http://ofps.oreilly.com/titles/9780596155957/ScalaObjectSystem.html#Linearization)的实例化有一个非常严格的规则，您可以在那里找到适当的细节。

我想你在玩 C++。[如果这是正确的，请查看C++ FAQ](http://www.parashift.com/c++-faq/mi-vi-ctor-order.html)的正确部分（[那里也提到了该问题](http://www.parashift.com/c++-faq/mi-diamond.html)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:02:34.137

如果您在谈论 C++ 和类的实例化顺序，那么它将取决于声明中的继承顺序。

所以，在

```
class D :  public B,public C 
```

B 将首先被实例化，然后是 C。

```
class D :  public C,public B 
```

C 将首先被实例化，然后是 B。**

# vim - Vim SQL 全能

> ID：11795021
> 
> 赞同：4
> 
> 时间：2012-08-03T11:40:33.630
> 
> 标签：vim, omnicomplete, vim-plugin

我正在尝试在 vim 中使用动态 SQL 自动完成（全方位菜单）功能，但它不起作用。

我在 Linux Mint 上使用 Yakuake 终端，并且[DBext vim 插件](https://github.com/vim-scripts/dbext.vim)正在工作。

我可以`C-x``C-o`，但它只显示表格，我也需要列。我也不能左右钻。

如果我处于插入模式并按下，`C-c`那么它就像我按下`Esc`并返回正常模式一样。

当我键入`:SQLSetType pgsql`时，它显示“不是编辑器命令”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-13T13:14:14.773

对于登陆这里的人：我为 VIM 创建了一个 sql 插件，它也有智能感知：[https](https://github.com/cosminadrianpopescu/vim-sql-workbench) ://github.com/cosminadrianpopescu/vim-sql-workbench 。它基于 SQL Workbench。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:26:52.093

我加了

```
filetype plugin on 
```

在我的 .vimrc 文件中，热键是 crtl+shift+c （例如，如果您想从终端复制），按下该组合后，您按 t 显示所有表格，然后向左向下钻取到突出显示的列桌子，

剩下的在

```
:h sql.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T07:03:29.050

好的，所以[ft_sql](http://vimdoc.sourceforge.net/htmldoc/ft_sql.html#sql-completion-columns)文档似乎说到达列的快捷方式不是`C-c`，但实际上`C-C c`这可能意味着`Ctrl`- `Shift`-`C`然后点击`c`，或者它可能意味着`Ctrl`- `LCtrl`- `c`。

不幸的是，这有点奇怪，所以继续尝试组合，看看你是否能找到有效的方法！

# android - 带有 Image、TextView、Edittext、CheckBox 的 Android ListView

> ID：11795023
> 
> 赞同：0
> 
> 时间：2012-08-03T11:40:38.710
> 
> 标签：android

![在此处输入图像描述](../Images/fd271b6ab80bcde5a3dd972436d0d4ee.png)

我想设计一个带有 Image、TextView、Edittext、CheckBox 的 ListView。

当用户检查每个列表项的 CheckBox 并提交表单时，应捕获选定的 ListItems 及其 EditText 值。

我试图使用 BaseAdapter，但未能从 ListView 中获取正确的检查值和编辑的文本值

请指导我实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:35:19.290

我得到了解决方案。我用 ImageView、TextView、EditText 和 CheckBox 设计了一个表格布局，并使用滚动视图像 ListView 一样滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:44:52.330

也许您尝试为您的应用使用 ArrayAdapter

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:45:37.247

您可以通过使用您自己的自定义 xml 布局的自定义 ArrayAdapter 来实现这一点。

然后你设置你的 listView/listActivity 来使用这个适配器。

看看 Lars Vogel 的这个[很棒的教程](http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:46:47.913

从 CheckBox 和 EditText 获取值：

```
boolean state = checkBox.isChecked();
String text=myField.getText().toString(); 
```

无论如何，最终您将得到一个自定义适配器。
检查如何[在 Android 中构建自定义花式 ListView 。](http://androidresearch.wordpress.com/2012/01/07/building-a-custom-fancy-listview-in-android/)

# python - 使用加法比较列表项

> ID：11795026
> 
> 赞同：0
> 
> 时间：2012-08-03T11:41:21.283
> 
> 标签：python, list, compare, addition

我有一个嵌套列表，其中包含一个整数作为每个列表的最后一个元素，我试图查看列表中的下一个项目是否比当前项目多一个，即当前列表的最后一个元素是否为 104，如果下一个列表的最后一个元素是 105，则执行一些操作。

```
data=[[a,b,c,1200],[a,g,x,3401],[f,a,c,3402],[f,a,c,3403]etc]
for item in data:
    if next(item[-1])==item[-1]+1: #if next item is this item plus one
        #do something 
```

这一直在上升`TypeError: Can't convert 'int' object to str implicitly`，我不知道为什么。有没有办法使用加法来比较我不知道的python中的列表元素？

（下一个（项目）部分可能不准确，因为我使用一个函数来获取完整代码中的上一个和下一个项目，而不是下一个（），但原则上是相同的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:47:45.553

您的错误消息是由于您使用`item[1]`了您似乎打算的地方`item[-1]`。但是，修复此问题不会修复您的代码 -`next(item[-1])`没有意义。我建议使用以下方法重构此循环`itertools.groupby()`：

```
from itertools import groupby, count
c = count()
for key, group in groupby(data, lambda x: x[-1] - next(c)):
    for item in group:
        # whatever 
```

这将`data`在子列表的最后一个元素中划分为连续运行的整数组。每个内部循环将在一个单独的连续运行中运行，如果需要，您可以在此内部循环之前添加设置代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:58:38.283

这将做你想要的。

```
data=[[a,b,c,1200],[a,g,x,3401],[f,a,c,3402],[f,a,c,3403]etc]
previous = 0 # adjust if necessary
for item in data:
    if item[-1] == previous + 1:
        #do something
    previous = item[-1] 
```

* * *

`next(item[-1])`不按你的想法做。您可以通过应用一些推理自行推断：

1.  `next()`，没有收到您想要的“下一个”元素的实际前体，那就是`item`
2.  如果您要通过`item`，`next()`则必须弄清楚列表`item`是其中的一部分。
3.  如果`item`在多个列表中怎么办？如果它在同一个列表中出现多次怎么办？要退回哪个项目？

正如你所看到的，没有办法通过简单地传递一些恰好是*某个*列表的一部分的随机对象来获取列表中的下一个项目。

实际做`next()`的是完全不同的。它为您提供了从迭代器/生成器生成的下一个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:46:21.847

您需要正确转换类型。

```
if int(next(item[-1])) == int(item[1]) + 1: 
```

另外，我不明白你为什么不这样做

```
 if int(item[0]) == int(item[1]) + 1: 
```

`ValueError`如果转换失败，请准备好捕获 a 。

# ios - Facebook 授权不起作用（iOS 原生应用程序）

> ID：11795027
> 
> 赞同：1
> 
> 时间：2012-08-03T11:41:21.503
> 
> 标签：ios, facebook, json, facebook-graph-api, single-sign-on

我正在尝试在我的应用程序中实现 facebook 登录并且它正在工作（我正在获取访问令牌），但是每当我尝试发出图形请求时，我都会收到以下消息，说我需要一个活动的访问令牌才能向图形 API 发出请求：

```
Error Domain=facebookErrDomain Code=10000 "The operation couldn’t be completed. (facebookErrDomain error 10000.)" UserInfo=0x6a99fa0 {
    error=<CFBasicHash 0x6a99050 [0x1582b48]>{
        type = mutable dict, count = 3,
            entries =>
                2 : <CFString 0x6a99340 [0x1582b48]>{contents = "type"} = <CFString 0x6a994d0 [0x1582b48]>{contents = "OAuthException"}
                3 : <CFString 0x6a99470 [0x1582b48]>{contents = "message"} = <CFString 0x6a993d0 [0x1582b48]>{contents = "An active access token must be used to query information about the current user."}
                6 : <CFString 0x6a52270 [0x1582b48]>{contents = "code"} = 2500
        }
    } 
```

发出请求的代码如下所示（也许我需要在此处添加访问令牌？）：

```
[facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

现在我知道访问令牌是可以的，因为在`init`方法中我调用了一个在必要时更新它的方法：

```
[facebook extendAccessTokenIfNeeded]; 
```

而且我还实现了委托方法`extendAccessTokenIfNeeded`：

```
-(void)fbDidExtendToken:(NSString *)accessToken expiresAt:(NSDate *)expiresAt {
    NSLog(@"token extended"); //This NSLog hasn't been called, so I know the extending access token method wasn't fired...
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:accessToken forKey:@"FBAccessTokenKey"];
    [defaults setObject:expiresAt forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
} 
```

**现在我在这里错过了什么？我需要将访问令牌添加到图形 API 请求吗？如果是这样，怎么做？**

顺便说一句，我也知道，如果我向公共路径发出图形请求，它会完美运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:18:01.683

刚刚遇到同样的问题，我不知道为什么，但是原生 facebook SDK 似乎没有将他们的令牌替换为 GET 请求。可能是你的麻烦？我使用了以下解决方案：

```
 NSMutableDictionary *params = [NSMutableDictionary  dictionaryWithObjectsAndKeys:
                                   _facebook.accessToken, @"access_token",
                                   nil];

    [_facebook requestWithGraphPath:@"me/music"
                          andParams:params
                      andHttpMethod:@"GET"
                        andDelegate:self]; 
```

**UPD**答案适用于`[_facebook requestWithGraphPath:@"me" andParams:params andHttpMethod:@"GET" andDelegate:self]`但不适用于`[facebook requestWithGraphPath:@"me" andDelegate:self];`

# eclipse - 使用 Eclipse CDT 和 GDB 进行调试：找不到源文件

> ID：11795030
> 
> 赞同：11
> 
> 时间：2012-08-03T11:41:34.720
> 
> 标签：eclipse, configuration, ide, eclipse-cdt

当我尝试使用 eclipse CDT 中的 GDB 调试我的应用程序时，我收到以下错误：

```
 Can't find a source file at "../mingw/main.c"
 Locate the file or edit the source lookup path to include its location. 
```

Eclipse 正在../mingw/main.c 中查找源文件位置，但它应该在/edit/src/main.c 中。正如您在下面的屏幕截图中看到的，edit/src 是源查找路径的一部分。为什么要查看../mingw？我找不到任何使它看起来在那里的配置设置。

![这是指示问题的屏幕截图](../Images/6eef6aa2bc43fd32a85d525b0b12aae4.png)

我正在使用 eclipse Juno、CDT 8.1、Windows 7 64bit

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-13T15:04:29.267

这是你的答案[http://www.eclipse.org/forums/index.php/t/57027/](http://www.eclipse.org/forums/index.php/t/57027/)

如果您在 Windows 下工作，您是否设置了所需的映射？也许 Eclipse 找不到源代码，因为缺少到项目/工作区所在的 (cygwin-) 驱动器的映射。

当您启动 Cygwin 时，输入“mount”并查找您拥有的映射：它们可能如下所示：

```
Admin@bs11-01xp ~
$ mount
D:\cygwin\bin on /usr/bin type system (binmode)
D:\cygwin\lib on /usr/lib type system (binmode)
D:\cygwin on / type system (binmode)
c: on /cygdrive/c type system (binmode,noumount)
d: on /cygdrive/d type system (binmode,noumount)
e: on /cygdrive/e type system (binmode,noumount)
j: on /cygdrive/j type system (binmode,noumount)
n: on /cygdrive/n type system (binmode,noumount)
u: on /cygdrive/u type system (binmode,noumount)
w: on /cygdrive/w type system (binmode,noumount)
x: on /cygdrive/x type system (binmode,noumount)
y: on /cygdrive/y type system (binmode,noumount)
z: on /cygdrive/z type system (binmode,noumount) 
```

我的项目 ara all under `J:\Projects`，所以我的映射需要在 Eclipse 中显示为：

```
/cygdrive/j j:/ 
```

打开 Eclipse 然后点击
- Windows => Preferences... => C/C++ => Debug =>Common Source Lookup Path
- 添加新的路径映射：点击 [Add] => Path Mapping => [OK]
- 选择新映射 => [Edith] => 更改映射名称“项目源” => [添加]
- 将“编译路径”设置为源（示例 cygwin！）“/cygdrive/j”（不带引号！）
- 设置“本地文件系统路径”tho “J:\”（不带引号！）

现在你准备好了再试一次......祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T12:24:37.953

在调试器选项卡的“调试配置”（在调试器弹出图标下）取消选中“启动时停止”，之后它不会在启动时停止，但如果你喜欢你可以在那里放置断点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-26T11:37:04.810

没有任何效果。除以下外，上述解决方案均无效

我只是用 msys gdb 替换了 gdb

IE。例如

当前配置

... 应用程序配置 .. 调试 .. 调试

GDB 调试器 gdb

至

msys gdb 的 GDB 调试器路径（例如 c:\msys\bin\gdb.exe

马努

# javascript - TableSorter：如何更改排序箭头的位置

> ID：11795031
> 
> 赞同：4
> 
> 时间：2012-08-03T11:41:37.630
> 
> 标签：javascript, jquery, css, tablesorter

我正在实现***jquery***的*tablesorter*。我需要更改相对于*列**标题*的*排序箭头*位置。

 **这是我到目前为止所做的：

```
table.tablesorter thead tr .header {
    background-image: url(bg.gif);
    background-repeat: no-repeat;
    background-position: 80% 70%;
    cursor: pointer;
} 
```

这适用于*列*，但不适用于与*标题*重叠或向右很远的其他列。
有没有办法让*箭头始终显示在**列标题*旁边？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T18:11:45.483

如果您使用默认的蓝色主题，您需要做的就是更改箭头的背景位置，然后添加左填充以将文本移开 -[演示](http://jsfiddle.net/Mottie/eY8uH/92/)

```
table.tablesorter thead tr .header {
    background-position: left center;
    padding-left: 20px;
}​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-08T20:18:41.580

从最新的`dataTables`v.1.10.4 *（2014 年 12 月 8 日）开始*，他们更改了类的名称。如果您希望将排序箭头放在列标题的左侧，则应使用以下 CSS 以获得所需的结果：

```
table.dataTable thead .sorting,
table.dataTable thead .sorting_asc,
table.dataTable thead .sorting_desc,
table.dataTable thead .sorting_asc_disabled,
table.dataTable thead .sorting_desc_disabled
 {
    background-position: left center;
    padding-left: 20px;
}​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T11:52:12.097

您可以在更改类的列名之后添加一个跨度。例如：

```
<tr>Column 1 <span class="sort-arrow" /></tr> 
```

这个问题似乎很相似，并提供了类似于上面的解决方案：[jquery tablesorter CSS arrow icons](https://stackoverflow.com/questions/8509027/jquery-tablesorter-css-arrow-icons?rq=1)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-11T20:40:25.603

接受的答案对我不起作用。要将排序箭头*保留在表格标题文本的左侧*，这很有效：

```
.tablesorter-header {
  display: table-cell !important;
  vertical-align: middle !important;
  background-position: left center !important;
  padding-left: 20px;
}

.tablesorter-header-inner{
  padding-left: 25px;
} 
```**

# android - 片段中的 Web 视图 - Android

> ID：11795032
> 
> 赞同：0
> 
> 时间：2012-08-03T11:41:39.993
> 
> 标签：android

如何将 Web 视图加载到片段中？

我已经尝试了显而易见的方法，但它会打开一个新的浏览器并且我的导航消失了：

```
public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved)
{

View mainView = (View) inflater.inflate(R.layout.frag_a, group, false);
    myWebView = (WebView) mainView.findViewById(R.id.webview);
   myWebView.loadUrl("http://www.bbc.co.uk");
    return mainView;

} 
```

我还搜索了堆栈溢出和网络，尝试了一些示例，但它们也不起作用，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:52:07.013

在外部浏览器中打开重定向页面后，我经常遇到这种情况。尝试使用返回 false`WebViewClient`的覆盖[的 shouldOverrideUrlLoading](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)方法进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:44:10.927

尝试：

```
public class DetailsFragment extends Fragment {
  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
                            Bundle savedInstanceState) {
    return(inflater.inflate(R.layout.details_fragment, container, false));
  }

  public void loadUrl(String url) {
    ((WebView)(getView().findViewById(R.id.browser))).loadUrl(url);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T12:42:33.197

为您的 webView 设置一个新的 WebViewClient 将使 WebView 在内部处理 url。

```
webViewer = (WebView) mainView.findViewById(R.id.webview);
webViewer.setWebViewClient(new WebViewClient()); 
```

这得到了文档的支持：http: [//developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

# xml - 在 Ant 脚本中创建 XSLT 以更改 xml 文件中的 fileref 值

> ID：11795033
> 
> 赞同：0
> 
> 时间：2012-08-03T11:41:40.057
> 
> 标签：xml, xslt, ant, xslt-1.0

我有如下的 xml 文档，

```
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter1">
<title>First chapter</title>
<section xml:id="section1">
                <imageobject>
                    <image fileref="images/image1.jpg"/>
                </imageobject>
                <imageobject>
                    <image fileref="images/image2.jpg"/>
                </imageobject>
</section>
    <section xml:id="section2" xml:base="../other/section1.xml">  
                    <imageobject>
                        <image fileref="images/image1.jpg"/>
                    </imageobject>
                    <imageobject>
                        <image fileref="images/image2.jpg"/>
                    </imageobject>

<section xml:id="section3" xml:base="../some-other/more/section3.xml">
                    <imageobject>
                        <image fileref="images/image1.jpg"/>
                    </imageobject>
    </section>
    </section>
    <section xml:id="section4" xml:base="../some-other/section4.xml">
                    <imageobject>
                        <image fileref="images/image2.jpg"/>
                    </imageobject>
    </section>
 </chapter> 
```

由于相同的图像名称在不同的部分重复，我正在使用 java 类重命名除第一部分以外的所有图像名称。然后我可以生成重命名的图像名称列表。

现在我也想在上面的 xml 文件中反映这些变化。例如，当我在 section2 中将“image1.jpg”重命名为“aaa.jpg”时，我需要通过生成具有新重命名图像名称的新 xml 来反映我的初始 xml 中的更改。

为此，我使用了使用 XSLT 1.0 的 Ant 脚本，并将我的第一个 xml 和重命名的图像列表作为输入，并使用新的 fileref 值生成一个新的 xml 文档。我如何制作那个 XSLT 并在我的 Ant 脚本中使用它。

这是我新重命名的图像列表。

```
<Imagedata>
  <section>
    <sectionID>section2</sectionID>
    <relativepath>images/aaa.jpg</relativepath>
    <relativepath>images/bbb.jpg</relativepath>
  </section>
  <section>
    <sectionID>section3</sectionID>
    <relativepath>images/ccc.jpg</relativepath>
  </section>
   <section>
    <sectionID>section4</sectionID>
    <relativepath>images/ddd.jpg</relativepath>
  </section>
</Imagedata> 
```

我的新最终 xml 将类似于，

```
<chapter xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="chapter1">
    <title>First chapter</title>
    <section xml:id="section1">
                    <imageobject>
                        <image fileref="images/image1.jpg"/>
                    </imageobject>
                    <imageobject>
                        <image fileref="images/image2.jpg"/>
                    </imageobject>
    </section>
        <section xml:id="section2" xml:base="../other/section1.xml">  
                        <imageobject>
                            <image fileref="images/aaa.jpg"/>
                        </imageobject>
                        <imageobject>
                            <image fileref="images/bbb.jpg"/>
                        </imageobject>

    <section xml:id="section3" xml:base="../some-other/more/section3.xml">
                        <imageobject>
                            <image fileref="images/ccc.jpg"/>
                        </imageobject>
        </section>
        </section>
        <section xml:id="section4" xml:base="../some-other/section4.xml">
                        <imageobject>
                            <image fileref="images/ddd.jpg"/>
                        </imageobject>
        </section>
     </chapter> 
```

谢谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:37:44.730

只是为了快速演示，我已将 Imagedata 文档放入下面显示的样式表中的一个变量中。在实际使用中，您将传入一个参数，该参数是图像数据文档的 URI，如下所示...

```
<xsl:param name="ImageDataURI" />
<xsl:variable name="ImageData" select="document($ImageDataURI)" /> 
```

**除此之外，这个 XSLT 1.0 样式表...**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt">
<xsl:output method="xml" indent="yes"/>

<xsl:variable name="ImageData">
<Imagedata>
  <section>
    <sectionID>section2</sectionID>
    <relativepath>images/aaa.jpg</relativepath>
    <relativepath>images/bbb.jpg</relativepath>
  </section>
  <section>
    <sectionID>section3</sectionID>
    <relativepath>images/ccc.jpg</relativepath>
  </section>
   <section>
    <sectionID>section4</sectionID>
    <relativepath>images/ddd.jpg</relativepath>
  </section>
</Imagedata>
</xsl:variable>

<xsl:template match="@*|node()">
  <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="image/@fileref">
  <xsl:attribute name="fileref">
    <xsl:value-of select="
    (msxsl:node-set($ImageData)/Imagedata/section/
    sectionID[.=current()/../../../self::section/@xml:id]/
    following-sibling::relativepath[
     count( current()/../../preceding-sibling::imageobject) + 1
      ] | .)[1]"/>
  </xsl:attribute>  
</xsl:template>

</xsl:stylesheet> 
```

**...将您提供的输入文档转换为预期的输出文档。**

## 解释

考虑最后一个模板中的 value-of 表达式。从匹配的 fileref 属性开始，我们向上导航，直到到达 section 并获取它的 id。这是由表达式给出的...

```
current()/../../../self::section/@xml:id 
```

然后我们获取查找数据并找到 sectionID 。这是由表达式给出的......

```
msxsl:node-set($ImageData)/Imagedata/section/sectionID 
```

我们需要通过部分名称来交叉链接这些部分。我们通过对 sectionID 应用一个谓词来实现这一点，该谓词的值必须是焦点项目的部分值。谓词在这里...

```
[.=current()/../../../self::section/@xml:id] 
```

现在我们找到了正确的查找部分，我们需要通过文档部分中焦点项目的当前位置对其进行索引。我们通过计算前面的兄弟姐妹并添加一个来计算我们的位置，就像这样......

```
count( current()/../../preceding-sibling::imageobject) + 1 
```

因此查找替换节点（如果存在）由...给出

```
msxsl:node-set($ImageData)/Imagedata/section/
sectionID[.=current()/../../../self::section/@xml:id]/
following-sibling::relativepath[
 count( current()/../../preceding-sibling::imageobject) + 1 
```

当替换是有序的时，这一切都很好，但是在某些情况下没有共同响应的查找。在这种情况下，我们的属性需要保留其原始值。我们通过以下形式的表达来实现这一点......

```
( $something | .)[1] 
```

如果 $something 不存在（意思是它的值是空序列），那么上面的表达式只返回焦点项。如果确实存在，则返回 $something 的第一项或焦点项。通常联合运算符连接两个序列、重复数据删除和按文档顺序排序。但是这两个操作数来自不同的文档，因此没有排序或重复数据删除。因此，表达式在存在时返回替换节点，如果不存在则返回焦点项。

# opengl - 为什么不存在 GL_RGB32、GL_RGBA32？

> ID：11795034
> 
> 赞同：0
> 
> 时间：2012-08-03T11:41:44.690
> 
> 标签：opengl

相关阅读：[http ://www.opengl.org/wiki/Image_Format#Color_formats](http://www.opengl.org/wiki/Image_Format#Color_formats)

归一化纹理格式（例如，GL_RGB8_SNORM 和 GL_RGB16）存储映射到浮点范围的整数（-[1.0,1.0] 用于有符号归一化，[0.0,1.0] 用于无符号归一化）。

在我看来，拥有 GL_RGB32、GL_RGBA_SNORM 等标记是有充分理由的：精度将超过专用浮点格式，如 GL_RGB32F。另外，为了完整性：为什么有 8 位和 16 位的标准化格式，而不是 32 位？

那么，为什么不存在 GL_RGB32、GL_RGBA32 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:13:04.303

> 在我看来，拥有 GL_RGB32、GL_RGBA_SNORM 等标记是有充分理由的：精度将超过专用浮点格式，如 GL_RGB32F。

你刚刚回答了你自己的问题。他们不允许这样做，因为允许这意味着要么在转换为单精度浮点数时丢弃 8 位额外精度，要么将那些 32 位标准化整数转换为*双精度*浮点数。

您会注意到，甚至 GL 4.2 也不允许双精度浮点纹理。

这是不允许的，因为它在当前硬件上根本没有用。当前的硬件不支持它，因为支持它意味着从纹理中获取双精度值。

# c++ - 用于链表节点的 RAII 样式 C++ 类

> ID：11795035
> 
> 赞同：4
> 
> 时间：2012-08-03T11:41:50.260
> 
> 标签：c++, algorithm, memory-management, raii

我现在正在使用链表作为练习。

我在《[Cracking The Coding Interview](https://rads.stackoverflow.com/amzn/click/com/098478280X)》一书中看到的示例没有 LinkedList（管理器）类，只有 Nodes，并且您在 main 函数中使用头 Node。

我查找了 C++ 实现，但大多数似乎比 C++ 更具 C 风格，即不是面向对象的。它们使用结构，没有类，并且有一个用于删除列表的静态方法，您需要明确记住调用该方法。我想用合理的析构函数编写一个合理的 RAII（资源获取即初始化）风格的 C++ 类来处理内存释放，并且我只想使用一个 Node 类（没有 LinkedList 类）。

我看到完成这项工作的唯一方法是让 Node 的析构函数删除下一个 Node（如果有的话），但我读过这种递归删除是一个坏主意，因为你最终会创建一个与链表。

所以总结一下我的问题：

*   如果在 C++ 中编写一个面向对象的类来处理链表，是否必须有一个 LinkedList（管理器）类来处理其析构函数中列表节点的删除？
*   如果不是，您将如何处理节点的破坏？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T11:54:03.573

> 如果在 C++ 中编写一个面向对象的类来处理链表，是否必须有一个 LinkedList（管理器）类来处理其析构函数中列表节点的删除？

不，结构是由节点之间的链接定义的，因此不需要单独的管理器对象。有时拥有一个会更方便，特别是如果您正在设计一个类似 STL 的库并希望所有容器都具有类似的接口，但您当然可以只使用一个节点类型来实现一个链表。

> 如果不是，您将如何处理节点的破坏？

避免递归的一种方法是在删除之前从列表中删除每个节点，例如：

```
~node() {
    while (node * victim = next) {
        next = victim->next;
        victim->next = nullptr;
        delete victim;
    }
} 
```

# c# - C# .NET 匿名类型的真实示例

> ID：11795046
> 
> 赞同：12
> 
> 时间：2012-08-03T11:42:24.737
> 
> 标签：c#, .net

我正在学习C# 中的**匿名类型**，我已经了解它们是如何定义和使用的。下面是我为匿名类型尝试过的示例代码。

```
var myType = new {
Name = "Yasser",
City = "Mumbai"
};
Console.WriteLine("Name: {0}, Type: {1}", myType.Name, myType.City); 
```

**我的问题**

在现实世界的场景中，这些会被使用吗？谁能给我一个可以使用这些匿名类型的示例或场景。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T11:44:33.257

LINQ 查询经常使用它们：

```
var productQuery = 
    from prod in products
    select new { prod.Color, prod.Price }; 
```

`{ prod.Color, prod.Price }`是具有只读`Color`和`Price`属性的匿名类型。如果您要遍历该查询的结果，则可以将该类型用作任何其他类：

```
foreach (var v in productQuery)
{
    Console.WriteLine("Color={0}, Price={1}", v.Color, v.Price);
} 
```

换句话说，您不必定义一个看起来像这样的新类：

```
public class ColoredPricedItem
{
    public Color {get;}
    public Price {get;}
} 
```

甚至更多，`Color`并且`Price`从您的查询中正确推断出类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T11:57:51.633

假设您有这样的课程：

```
class User
{
    public int ID;
    public string FirstName;
    public string LastName;
    public int Age;
    public string City;
    public string Country;
} 
```

并且您创建了一个通用列表，其中 T 是 User 类。您创建 n 个用户。关键是，您不想在某些查询中显示所有字段（或属性），而只想显示一个人和该人居住的城市的名字 + 姓氏（作为一个）。所以你在 Linq 中使用了一个新的关键字（我将展示如何使用 Linq 的 don 表示法）：

```
 List<User> users = new List<User>();
        users.Add(new User { ID = 1, FirstName = "first 1", LastName = "last 1", Age = 32, City = "City 1", Country = "Country 1" });
        users.Add(new User { ID = 2, FirstName = "first 2", LastName = "last 2", Age = 33, City = "City 2", Country = "Country 2" });
        users.Add(new User { ID = 3, FirstName = "first 3", LastName = "last 3", Age = 34, City = "City 3", Country = "Country 3" });

        var query = users.Select(s => new
            {
                FIRST_LAST = string.Format("{0} {1}", s.FirstName, s.LastName),
                LIVING_IN = s.City
            }).ToList();
        foreach (var person in query)
        {
            string name = person.FIRST_LAST;
            string city = person.LIVING_IN;
        } 
```

希望对你有帮助，再见

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T11:48:04.870

除了在 Linq 中使用之外，它们还被 Global.asax.cs 中的 asp.net MVC 应用程序用于映射路由

```
 routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
  ); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T11:48:17.373

一些 Web 框架使用它们来表示 HTML 标记属性：

```
var t = new Table(new { align="left", bgcolor="red", cellpadding="2" }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T11:45:59.400

在 C# 3 中为 LINQ 添加了匿名类型。当您只需要数据库中的一些属性时，它们非常棒，例如[http://msdn.microsoft.com/en-us/library/bb397696.aspx](http://msdn.microsoft.com/en-us/library/bb397696.aspx)：

```
 var productQuery = 
    from prod in products
    select new { prod.Color, prod.Price };

foreach (var v in productQuery)
{
    Console.WriteLine("Color={0}, Price={1}", v.Color, v.Price);
} 

```

这只会从数据库中获取列颜色和价格:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T12:03:26.417

您可以使用它来生成 html 元素。

下面的示例使用方法“el”生成具有给定属性和 innerHTML 的 html 元素。参数“params object[] objects”允许给出任意数量的匿名对象来定义所需的 html 属性。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;
namespace anonymousTypes
{
    class Program
    {
        static void Main(string[] args)
        {

            el("td", null, new { colspan = 36 }, new { style = "text-align: center;" });
            Console.Read();
        }

        static string el(string tagName, string innerHTML, params object[] objects)
        {
            StringBuilder b = new StringBuilder();
            b.Append("<").Append(tagName);
            foreach (object obj in objects)
            {
                foreach (PropertyInfo propertyInfo in obj.GetType().GetProperties())
                {
                    Console.Write(propertyInfo.Name + " | " + propertyInfo.GetValue(obj, null) + "\n");
                }
            }
            b.Append(">");
            if (innerHTML != null)
                b.Append(innerHTML);
            b.Append("</").Append(tagName).Append(">");
            return b.ToString();
        }
    }
} 
```

# mysql - MySQL查询日期范围

> ID：11795049
> 
> 赞同：1
> 
> 时间：2012-08-03T11:42:35.470
> 
> 标签：mysql, time, period

我需要一个 SQL 查询来检索所选时间段中包含的数据，时间段是用户从日历中选择的字符串。

例如，如果用户选择时间段**“2012-07-01”**到**“2012-07-04”**，我有下**表**：

```
ID ||  start_date  ||  end_date
 1 ||  2012-07-02  || 2012-07-04
 2 ||  2012-07-06  || 2012-08-05
 3 ||  2012-07-01  || 2012-09-01
 4 ||  2012-06-25  || 2012-09-01 
```

如果像这样写一个 sql**查询**：

```
SELECT ID, start_date, end_date
FROM   TABLE
WHERE  start_date BETWEEN '2012-07-01' AND '2012-07-04' 
```

这**将返回**从“2012-07-01”到“2012-07-04”的所有行

```
ID ||  start_date  ||  end_date
 1 ||  2012-07-02  || 2012-07-04
 3 ||  2012-07-01  || 2012-09-01 
```

但是，我**想要**包含在此期间的所有数据，所以结果必须是：

```
ID ||  start_date  ||  end_date
 1 ||  2012-07-02  || 2012-07-04
 3 ||  2012-07-01  || 2012-09-01
 4 ||  2012-06-25  || 2012-09-01 
```

ID 为 4 的行也希望在结果中，因为用户选择的时间段在 start_date 和 end_date 之下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:47:45.330

我认为这就是你要找的：

```
SELECT ID, start_date, end_date 
FROM TABLE 
WHERE start_date <= '2012-07-01' AND
      end_date >= '2012-07-04'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:48:09.347

您必须涵盖三种类型的事件：

1.  从这个区间开始
2.  在这个区间结束
3.  在间隔之前开始，在间隔之后结束。

所以你应该使用这个：

```
SELECT ID, start_date, end_date
FROM   your_table
WHERE  (start_date  BETWEEN '2012-07-01' AND '2012-07-04')
   OR  (end_date    BETWEEN '2012-07-01' AND '2012-07-04')
   OR  (start_date <= '2012-07-01' AND
        end_date   >= '2012-07-04') 
```

快速概览：

```
Interval:                S---------E
Case 1  :      ---|      :         :            NOT WANTED
Case 2  :      ----------:----|    :            WANTED
Case 3  :      ----------:---------:------      WANTED - YOUR PROBLEM
Case 4  :         |------:----|    :            WANTED
Case 5  :         |------:---------:------      WANTED
Case 6  :                :  |---|  :            WANTED
Case 7  :                :  |------:------      WANTED
Case 8  :                :         :  |---      NOT WANTED 
```

您的问题案例是案例 3。它将通过添加额外的条件来覆盖`start_date <= '2012-07-01' AND end_date >= '2012-07-04'`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:48:26.873

```
SELECT ID, start_date, end_date
FROM   TABLE
WHERE  start_date BETWEEN '2012-07-01' AND '2012-07-04' 
```

您仅按开始日期选择，您可以通过以下方式询问：

```
(start_date between begin, end) OR
(end_date   between begin, end) OR
(start_date <= begin AND end_date >= end) 
```

所以：

`(start_date between begin, end )`：您拥有在该范围内开始的所有事件

`(end_date between begin, end)`：您拥有在该范围内完成的所有事件

`(start_date <= begin AND end_date >= end)`：您拥有该范围内所有活动的事件

# css - CSS 是否有标准/通用指南？

> ID：11795052
> 
> 赞同：0
> 
> 时间：2012-08-03T11:42:45.507
> 
> 标签：css

是否有您应该始终遵循的 CSS 标准/通用指南？例如，像你应该只为 Arail 设置字体大小 12、14、16（只有其中之一）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:52:50.360

您可以对字体大小和字体做任何您想做的事情，无论是 Arial 还是任何其他字体。

最佳做法是使用绝大多数用户都可以阅读的颜色、字体大小和字体。

默认情况下，如果您将网站上的字体大小设置为 100%，则相当于 16 像素。

现在大多数网站都会使用 14px 或 16px 作为标准字体大小，但 12px 仍然很常见。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:18:26.280

没有真正的理由将这类事情标准化。使用相同字体大小的字体之间的视觉字形大小会发生变化，唯一保持不变的是相对于设计中其他元素的字体大小。

最终，在构建网页设计时，您需要考虑很多事情，包括在许多不同的设备上查看（阅读：不同的 DPI 设置）和数百种不同的分辨率（甚至不包括那些在没有最大化浏览器窗口的情况下浏览网页的人），甚至不同的语言和内容将在不同的本地化设置下占用的空间。

要考虑的一件重要事情是具有不同 DPI 的不同设备将如何显示字体。出于这个原因，通过使用所有不同的设备、浏览器和分辨率查看设计来测试您的设计始终是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:25:49.653

从 OP 问题来看，他似乎正在寻找可访问性的最佳实践。

但如果不是这样，Drupal 和 Wordpress 的编码标准可能会为您服务。他们建议如何缩进你的代码、你的评论和浏览器特定的黑客。

对于 Drupal：[http ://drupal.org/node/302199](http://drupal.org/node/302199)

对于 Wordpress：[http ://codex.wordpress.org/CSS_Coding_Standards](http://codex.wordpress.org/CSS_Coding_Standards)

另一方面，OOCSS 和 SMACSS 提出了组织代码的更好做法。OOCSS 建议创建可重用的类，就好像它们是 OOP 类一样。SMACSS 提示如何根据样式组织规则。

OOCSS：[http ://oocss.org/](http://oocss.org/)

SMACSS：[http ://smacss.com/](http://smacss.com/)

# html - 我们可以在任何丰富的片段类型中定义一个新属性吗

> ID：11795053
> 
> 赞同：0
> 
> 时间：2012-08-03T11:42:45.890
> 
> 标签：html, properties, rich-snippets

我们可以在任何丰富的代码片段类型中定义新属性吗？是否可以在丰富片段类型“产品”中定义新属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:06:10.403

这取决于您使用的语法：

1.  在微数据语法中，只有在相应的微数据词汇表（例如 schema.org）中定义的属性才有效。如果词汇表明确支持，您可以使用具有完整 URI 的外部属性。对于 schema.org，目前尚不清楚这是否成立，如果您这样做，Google Rich Snippet 测试工具[http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)会发出警告。

2.  在 RDFa 中，您可以使用来自外部词汇表的附加属性，并且客户端应该容忍这种情况。

有关有效的示例，请参阅 [http://www.heppnetz.de/rdfa4google/testcases.html](http://www.heppnetz.de/rdfa4google/testcases.html)

特别是 TC4，

```
http://www.heppnetz.de/rdfa4google/tc4.html 
```

[它与测试工具中http://purl.org/vso/ns](http://purl.org/vso/ns)（车辆销售本体）的其他属性很好地配合使用：

```
http://www.google.com/webmasters/tools/richsnippets?url=http%3A//www.heppnetz.de/rdfa4google/tc4.html 
```

最好的祝愿

马丁赫普

PS：敬请期待 - 将有一个新机制 im schema.org 和 GoodRelations 将允许您轻松发布任意产品功能。

# algorithm - Steven Skiena 的算法设计手册解决方案

> ID：11795054
> 
> 赞同：2
> 
> 时间：2012-08-03T11:42:46.323
> 
> 标签：algorithm, solution

> **可能重复：**
> [我在哪里可以找到“算法设计手册”的解决方案？](https://stackoverflow.com/questions/5112057/where-can-i-find-the-solutions-to-the-algorithm-design-manual)

我目前正在阅读 Steven Skiena 的“算法设计手册”。到目前为止很棒的书，但我想知道书中的练习是否有可用的解决方案？www.algorist.com 上将您引导至“解决方案 Wiki”的链接不起作用。

有谁知道可以下载的存档版本，或者我可以在其他网站上找到它们吗？

# asp.net - ASP.NET - 尽管使用了 UpdatePanel，但仍然闪烁

> ID：11795055
> 
> 赞同：0
> 
> 时间：2012-08-03T11:42:47.437
> 
> 标签：asp.net, updatepanel

我已将几个控件放入 UpdatePanel。当我按下更新面板内的按钮时，底部状态栏上没有进度条，并且在正常回发期间没有典型的点击声音。但是页面仍然闪烁到顶部，我看不到验证错误。可能是因为我在更新面板上有一个 DataGrid。我听说 DataGrid 和 Updatepanel 不能很好地协同工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:46:55.843

您是否使用任何验证控件？我倾向于添加验证控件，但忘记分配 ErrorMessage 文本，这经常让我思考为什么某些东西不起作用。

# android - 滚动时安装的应用程序列表视图滞后

> ID：11795056
> 
> 赞同：1
> 
> 时间：2012-08-03T11:42:48.160
> 
> 标签：android, listview

我正在启动一项活动，以启动所有已安装应用程序的列表以及应用程序图标和名称，它运行良好，只是在滚动应用程序时非常滞后。有什么办法让它顺利吗？这是我的代码，谢谢。

```
public class AppListsActivity extends ListActivity{
    static final String TAG = "AppListsActivity";
    private Context self = this;
    public static boolean progressBarStatus = false;

    SharedPreferences.Editor editor;
    PackageManager pm;
    AppAdapter adapter = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {       
        super.onCreate(savedInstanceState);
        setContentView(R.layout.apps_list);
        ListView lV = (ListView)findViewById(android.R.id.list);
        lV.setScrollingCacheEnabled(false);

        pm = getPackageManager();
        Intent main=new Intent(Intent.ACTION_MAIN, null); 
        main.addCategory(Intent.CATEGORY_LAUNCHER);

        List<ResolveInfo> launchables = pm.queryIntentActivities(main, 0);
        Collections.sort(launchables,new ResolveInfo.DisplayNameComparator(pm)); 

        adapter = new AppAdapter(pm, launchables);
        setListAdapter(adapter);

        progressBarStatus = true;
    }
    @Override
    protected void onListItemClick(ListView listView, View v, int position, long id) {
        //super.onListItemClick(l, v, position, id);

        ResolveInfo launchable = adapter.getItem(position);
        ActivityInfo activity = launchable.activityInfo;
        String selectionPname = activity.applicationInfo.packageName;
        String selection = activity.applicationInfo.loadLabel(pm).toString();
        Drawable selectionIcon = activity.applicationInfo.loadIcon(pm);

        editor = self.getSharedPreferences(WidgetConfigureActivity.PREFS_NAME, 0).edit();
        //switch (SettingsActivity.btnShortcutNo) {
        switch (WidgetConfigureActivity.btnShortcutNo) {
        case 1:
            //SettingsActivity.textTime.setText(selection);
            WidgetConfigureActivity.textTime.setText(selection);
            WidgetConfigureActivity.iconShortcutTime.setImageDrawable(selectionIcon);
            editor.putString("shortcutTimeWidget", selectionPname);         
            //editor.putString("shortcutTime", selection);
            editor.commit();
            MyWidgetProvider.mFisrtReboot = true;
            finish();
            break;
        default: 
            break;
        }       
    }
    private static class ViewHolder {
        public TextView label;
        public ImageView icon;
    }
    private class AppAdapter extends ArrayAdapter<ResolveInfo> {
        private PackageManager pm = null;
        Bitmap bmIcon;

        AppAdapter(PackageManager pm, List<ResolveInfo> apps) {
            super(AppListsActivity.this, R.layout.list_row, apps);
            this.pm = pm;
        }       
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v==null) {
                v = newView(parent);
                ViewHolder viewHolder = new ViewHolder();
                viewHolder.label = (TextView) v.findViewById(R.id.label);
                viewHolder.icon = (ImageView) v.findViewById(R.id.icon);
                v.setTag(viewHolder);
            }
            ViewHolder holder = (ViewHolder) v.getTag();
            bmIcon = ((BitmapDrawable)getItem(position).loadIcon(pm)).getBitmap();
            bmIcon = Bitmap.createScaledBitmap(bmIcon, 5, 5, true);
            bindView(position, holder);       
            return(v);
        }       
        private View newView(ViewGroup parent) {
            return(getLayoutInflater().inflate(R.layout.list_row, parent, false));
        }       
        private void bindView(int position, ViewHolder holder) {                                 
            holder.label.setText(getItem(position).loadLabel(pm));              
            //holder.icon.setImageDrawable(getItem(position).loadIcon(pm));
            holder.icon.setImageBitmap(bmIcon);
        }
    } 
```

# openstack - openstack 网络无法从/向虚拟机 ping/ssh

> ID：11795057
> 
> 赞同：2
> 
> 时间：2012-08-03T11:42:51.457
> 
> 标签：openstack

我已经使用 devstack 脚本安装了多节点 openstak。可以运行虚拟机，但网络存在问题，无法从一个虚拟机 ssh/ping 到另一个虚拟机。我只能从它运行的主机（control1，computeX）SSH到VM，而其他主机不能。有什么建议么？

```
nova-compute     control1                             nova             enabled    :-)   
nova-cert        control1                             nova             enabled    :-)   
nova-network     control1                             nova             enabled    :-)   
nova-scheduler   control1                             nova             enabled    :-)   
nova-consoleauth control1                             nova             enabled    :-)   
nova-compute     compute1                             nova             enabled    :-)   
nova-volume      compute1                             nova             enabled    :-)   
nova-network     compute1                             nova             enabled    :-)   
nova-compute     compute2                             nova             enabled    :-)   
nova-volume      compute2                             nova             enabled    :-)   
nova-network     compute2                             nova             enabled    :-) 
```

控制1 /etc/network/interfaces

```
# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto eth0
iface eth0 inet static
address 172.16.0.1
#address 172.16.0.101
netmask 255.255.255.0
network 172.16.0.0
broadcast 172.16.0.255
gateway 172.16.0.254
dns-nameservers 8.8.8.8

auto eth1
iface eth1 inet static
address 11.0.0.4
netmask 255.255.255.0
network 11.0.0.0
broadcast 11.0.0.255 
```

计算1 /etc/network/interfaces

```
# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto eth0
iface eth0 inet static
address 172.16.0.2
netmask 255.255.255.0
network 172.16.0.0
broadcast 172.16.0.255
gateway 172.16.0.254
dns-nameservers 8.8.8.8

auto eth1
iface eth1 inet static
address 11.0.0.5
netmask 255.255.255.0
network 11.0.0.0
broadcast 11.0.0.255 
```

控制1 /etc/nova/nova.conf

```
[DEFAULT]
verbose=True
auth_strategy=keystone
allow_resize_to_same_host=True
root_helper=sudo /usr/local/bin/nova-rootwrap /etc/nova/rootwrap.conf
compute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler
dhcpbridge_flagfile=/etc/nova/nova.conf
fixed_range=10.1.0.0/16
s3_host=172.16.0.1
s3_port=3333
network_manager=nova.network.manager.FlatDHCPManager
osapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions
my_ip=172.16.0.1
public_interface=eth0
vlan_interface=eth0
flat_network_bridge=br100
flat_interface=eth1
sql_connection=mysql://root:supersecret@172.16.0.1/nova?charset=utf8
libvirt_type=qemu
libvirt_cpu_mode=none
instance_name_template=instance-%08x
novncproxy_base_url=http://172.16.0.1:6080/vnc_auto.html
xvpvncproxy_base_url=http://172.16.0.1:6081/console
vncserver_listen=127.0.0.1
vncserver_proxyclient_address=127.0.0.1
api_paste_config=/etc/nova/api-paste.ini
image_service=nova.image.glance.GlanceImageService
ec2_dmz_host=172.16.0.1
rabbit_host=172.16.0.1
rabbit_password=supersecret
glance_api_servers=172.16.0.1:9292
force_dhcp_release=True
multi_host=True
send_arp_for_ha=True
use_syslog=True
logging_context_format_string=%(asctime)s %(levelname)s %(name)s [%(request_id)s %(user_name)s %(project_name)s] %(instance)s%(message)s
volume_api_class=nova.volume.cinder.API
compute_driver=libvirt.LibvirtDriver
firewall_driver=nova.virt.libvirt.firewall.IptablesFirewallDriver
enabled_apis=ec2,osapi_compute,metadata 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:27:43.660

您可能需要向默认 OpenStack 安全组添加规​​则以启用 ping 和 SSH：

```
nova secgroup-add-rule default icmp -1 -1 0.0.0.0/0
nova secgroup-add-rule default tcp 22 22 0.0.0.0/0 
```

第一条规则为 VM 实例启用 Internet 控制消息协议 (ICMP)（ping 命令）。第二条规则通过 SSH 使用的 22 端口启用 TCP 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:10:55.770

尝试将 network_manager=nova.network.manager.FlatDHCPManager 更改为 network_manager=nova.network.manager.FlatManager 并尝试为您的 network_manager 设置进行其他配置。它说 FLatManager 应该在这里工作：http://docs.openstack.org/trunk/openstack-compute/admin/content/configuring-flat-networking.html[它](http://docs.openstack.org/trunk/openstack-compute/admin/content/configuring-flat-networking.html)与 FLatDHCPManager 类似，所以不太确定问题是什么看来您已绑定到物理以太网卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:13:03.210

尝试将以下选项添加到 nova.conf，它控制防火墙（iptables）是否允许实例之间的流量：

```
allow_same_net_traffic=true 
```

它应该默认打开，所以这可能不是你的问题，但这是我会尝试的第一件事。

这是来自 OpenStack Compute Admin guide 中名为网络[选项](http://docs.openstack.org/essex/openstack-compute/admin/content/)[的 nova.conf 文件配置选项的描述](http://docs.openstack.org/essex/openstack-compute/admin/content/compute-options-reference.html#d6e3101)表。

# objective-c - 如何在objective-c中找到用户SID

> ID：11795060
> 
> 赞同：0
> 
> 时间：2012-08-03T11:42:54.743
> 
> 标签：objective-c, sid

我第一次使用objective-c。

我的要求是验证登录用户并找到他们的 SID。

在windows开发中，我们有很少的APIS，借助它们我们可以找出用户的SID。

我的假设是：cocoa 框架中应该有一些函数可以告诉我们用户的 SID。

如果没有这样的功能，那么我应该如何尝试找到它？

在这方面指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:52:16.997

我认为这是设备的唯一标识符。

这个开源项目可以帮助您获得：

[UIDevice-with-UniqueIdentifier-for-iOS-5](https://github.com/gekitz/UIDevice-with-UniqueIdentifier-for-iOS-5 "UIDevice-with-UniqueIdentifier-for-iOS-5")

从文档中：

> 用于`[[UIDevice currentDevice] uniqueDeviceIdentifier]`检索唯一标识符（它是您的 Bundle ID + MAC 地址的哈希）
> 
> 用于`[[UIDevice currentDevice] uniqueGlobalDeviceIdentifier]`检索全局唯一标识符（它是 MAC 地址的哈希，用于在不同应用程序之间进行跟踪）。

# html - CSS 内联显示不起作用

> ID：11795061
> 
> 赞同：0
> 
> 时间：2012-08-03T11:42:59.133
> 
> 标签：html, css

我有 HTML，如[http://jsfiddle.net/Lijo/LLq3v/1/所示](http://jsfiddle.net/Lijo/LLq3v/1/)

我需要将以下两个 div 内容放在一行中。

```
Tax Report 1
: Frequency - Weekly 
```

虽然我已经放置了一个内联显示，但它分为两行。这里缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:53:35.183

制作容器 div`inline`不会产生你想要的效果。这将导致容器本身充当内联元素，请参阅[http://www.tizag.com/cssT/inline.php](http://www.tizag.com/cssT/inline.php)。

创建所需效果的最佳方法是将内部 div 浮动到左侧。如果它们比容器窄，那么它们将彼此相邻。

`inline`在 Web 开发中通常不赞成制作 div ，但正如下面评论的那样，也有例外。这是来自类似主题的帖子

```
<!-- An inline div is a freak of the web & should be beaten until it becomes a span 
(at least 9 times out of 10)... -->

<span>foo</span>
<span>bar</span>
<span>baz</span>
<!-- ...answers the original question... --> 
```

在[这里](https://stackoverflow.com/questions/224602/how-do-you-make-divs-display-inline)找到。跨度的存在是有原因的。

要浮动 div 的左侧，请将您的 CSS 修改为：

```
.reportTitle
{
    font:bold 10pt Arial;
    float: left;
}

.reportFrequency
{
    font:normal 10pt Arial;
    float:left;
} 
```

但我建议用跨度替换 div。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T11:44:11.460

试试这个[小提琴更新](http://jsfiddle.net/LLq3v/2/)

```
.reportTitle
{
    font:bold 10pt Arial;
    float:left;
}

.reportFrequency
{
    font:normal 10pt Arial;
    float:left;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T12:38:20.043

`display: inline-block`如果您需要保留设置宽度或高度的能力，也可以使用。哦，我有一个很好的下划线。

[http://jsfiddle.net/4yqJ8/](http://jsfiddle.net/4yqJ8/)

```
.reportTitle {
    display:inline-block;
}

.reportFrequency {
    display: inline-block;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T11:45:50.880

您已将容器设置为内联元素，但内部元素仍然是块元素，因此它们显示在另一个之下。改为内联内部元素。

演示：http: [//jsfiddle.net/LLq3v/5/](http://jsfiddle.net/LLq3v/5/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T12:03:39.087

对 .reportTitle 和 .reportFrequency 使用 spans 而不是 div。[http://jsfiddle.net/LLq3v/7/](http://jsfiddle.net/LLq3v/7/)

如果你想让某些东西表现得像一个内联元素，那么你不应该将它编码为一个 div，而应该使用一个内联元素。[MDN 上的内联元素](https://developer.mozilla.org/en/HTML/Inline_elements)。确实可以使用 css 完成所有工作，但有理由不这样做

1.  你让自己的生活变得不必要地困难
2.  您正在使 html 的语义更少，即：完全难以自行解释。

此外，如果你想确保它们始终保持在一行上，即使父容器太窄，你也可以给它赋值，white-space: nowrap

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-03T12:08:07.460

您必须设置`display:inline`为要显示`inline`的元素，而不是容器元素。

在您的情况下，这将是`.reportTitle`and `.reportFrequency`，但不是`.repeaterIdentifier`，它是容器元素。

```
.reportTitle
{
    font:bold 10pt Arial;
    display: inline; /* HERE */
}

.reportFrequency
{
    font:normal 10pt Arial;
    display: inline; /* HERE */
}
.repeaterIdentifier
{
    border-bottom:1px solid #A7A7A6;
    margin: 0 0 5px 0;
    display: inline /* This can be removed */
} 
```

**现场演示：[jsFiddle](http://jsfiddle.net/LLq3v/9/)**

# php - 使用正则表达式检查数据库包装器中的列是否过大？

> ID：11795064
> 
> 赞同：1
> 
> 时间：2012-08-03T11:43:02.160
> 
> 标签：php, sql, regex

这是 SQL 查询的示例包装器

```
public function where ($col, $val)
{
    if (!preg_match('~^[a-z0-9_]+$~i', $col))
        throw new Exception('Invalid parameter $col');

    $this->where.= "WEHERE $col = :$col";
} 
```

这是否有点矫枉过正，因为正则表达式可能正在使用资源。注意我实际上是用它来包装 PDO（注意 :$col 中的冒号）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:49:22.807

如果`$col`可以通过用户输入指定，那么这不是矫枉过正，而是您对 SQL 注入*的唯一防御。*

如果`$col`已知安全（例如，您的代码通过`switch`语句生成其值），那么包含运行时检查可能不值得。但是您应该考虑到“已知安全”状态随着程序在未来的维护中发生变化的可能性。

# python - 关于如何使用 lxml 从 html 输出中解析数据的简单示例

> ID：11795077
> 
> 赞同：3
> 
> 时间：2012-08-03T11:43:52.433
> 
> 标签：python, html, parsing, lxml

我将一些使用正则表达式从 html 输出中提取内容的 python 脚本转换为 libxml2，但由于我是从这里开始的，所以会得到一点帮助。

如何使用 lxml 从下面示例的“工作目录”、“包/更新”和“Java 数据模型”中提取值？

```
<tr>
  <script>writeTD("row");</script>
  <td class="oddrow"><nobr>Working Dir</nobr></td>
  <script>writeTD("rowdata-l");</script>
  <td class="oddrowdata-l">/serves/test_servers</td>
</tr> 
<script>swapRows();</script>
<tr>
  <script>writeTD("row");</script>
  <td class="evenrow"><nobr>Packages/Updates</nobr></td>
  <script>writeTD("rowdata-l");</script>
  <td class="evenrowdata-l"><a href="updates.dsp">View</a></td>
</tr> 
<script>swapRows();</script>
<tr>
  <script>writeTD("row");</script>
  <td class="oddrow"><nobr>Java Data Model</nobr></td>
  <script>writeTD("rowdata-l");</script>
  <td class="oddrowdata-l">64-bit</td>
</tr>
</tbody></table>
</td>
</tr>
</tbody></table> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T12:04:22.767

使用您发布为的 HTML `content`，

```
import lxml.html as LH
doc = LH.fromstring(content)
tds = (td.text_content() for td in doc.xpath('//td'))    
for td, val in zip(*[tds]*2):
    if td in ("Working Dir", "Java Data Model"):
        print(td,val) 
```

产量

```
('Working Dir', '/serves/test_servers')
('Java Data Model', '64-bit') 
```

* * *

这条线完成了大部分工作：

```
tds = (td.text_content() for td in doc.xpath('//td')) 
```

它使用该`xpath()`方法搜索所有`<td>`标签。它使用该`text_content()`方法来提取关联的文本。

`zip(*[tds]*2)`是成对迭代的[石斑鱼习语：](http://docs.python.org/library/itertools.html#recipes)`tds`

```
for td, val in zip(*[tds]*2):
    print(td,val) 
```

请注意，这假定`<td>`标签和值交替跟随。

# php - 无法使用 ajax + jQuery 进行自动完成

> ID：11795078
> 
> 赞同：0
> 
> 时间：2012-08-03T11:43:54.363
> 
> 标签：php, jquery, ajax

我正在尝试在 ajax (jQuery) 的帮助下完成自动完成任务。让我们看看脚本

这是html =>

```
<input type="text" name="user_key" id="user_key"> 
```

这是同一个文件中的javascript =>

```
<script type="text/javascript">
$(function(){
    $("#user_key").autocomplete({
        source: function(request,response){
            var suggestions = [];
            $.ajax({
                url: "/ajax/autocomplete.php",
                type: "POST",
                data: {user_key:$(this).val()},
                success: function(result){
                    $.each(result,function(i,val){
                        suggestions.push(val.name);
                    });
                },
                dataType: "json"
            });
            response(suggestions);
        }
    });
});
</script> 
```

这是来自 autocomplete.php 文件的 php 脚本 =>

```
if (!$connection->connect_errno){
        if ($connection->set_charset("utf8")){
            if ($r = $connection->query("SELECT name FROM users WHERE name LIKE '" . $_POST['user_key'] . "%'")){
                for ($x=0,$numrows = $r->num_rows;$x<$numrows;$x++){
                    if ($row = $r->fetch_assoc()){
                        $array[$x] = array("name",$row['name']);
                    }
                }
                $r->free();
            }
        }
    }
    echo json_encode($array); 
```

PS。它不起作用。请帮助，过去 2 天我一直在尝试完成这项任务，但无法使其正常工作。预先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:45:49.160

You need to take another look at the autocomplete docs but you will be able to find an answer here: [jquery auto-suggestion example doesn't work](https://stackoverflow.com/questions/11743625/jquery-auto-suggestion-example-doesnt-work/11744644#11744644)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:00:09.850

```
$array[$x] = array("name",$row['name']); 
```

这使得数据库中的名称和值都作为 array() 的元素

将 autocomplete.php 的代码更改为

```
if (!$connection->connect_errno){
        if ($connection->set_charset("utf8")){
            if ($r = $connection->query("SELECT name FROM users WHERE name LIKE '" . $_POST['user_key'] . "%'")){
                for ($x=0,$numrows = $r->num_rows;$x<$numrows;$x++){
                    if ($row = $r->fetch_assoc()){
                        $array[$x] = array("name"=>$row['name']);
                    }
                }
                $r->free();
            }
        }
    }
    echo json_encode($array); 
```

这将使 name 作为从数据库中获取的值的键

这会帮助你。

# c++ - 将局部变量分配给引用参数

> ID：11795083
> 
> 赞同：2
> 
> 时间：2012-08-03T11:44:24.563
> 
> 标签：c++, reference, scope

来自 C，Accelerated C++ 第 5 章中的这个例子引起了我的注意：

```
vector<Student_info> extract_fails(vector<Student_info>& students) {

    vector<Student_info> pass, fail;

    for (vector<Student_info>::size_type i = 0; i != students.size(); ++i)
        if (fgrade(students[i]))
            fail.push_back(students[i]);
        else
            pass.push_back(students[i]);

    students = pass;
    return fail;
} 
```

既然`fail`是返回的，我知道它是一个局部变量不是问题。但是为什么`pass`能够使其脱离本地范围呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T11:49:12.737

您可能认为该引用`students`正在“重新引用”到局部变量`pass`。不是这种情况。相反，`operator=`正在调用通过 传入的现有对象`students`，并将数据从`pass`复制到它。

当您来自 C 语言时，您可能更熟悉指针而不是引用。让我们假设它`students`被声明为一个指针，即

```
vector<Student_info>* students 
```

您的问题意味着您认为您引用的代码等同于以下内容

```
students = &pass; 
```

实际上它相当于这个

```
*students = pass; 
```

事实上，这两个操作中的第一个不能在引用上执行——引用不能被“重新引用”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T11:46:28.353

该`pass`对象不会逃脱本地范围。

该行将`students = pass`pass 的值（对于向量，这是元素）复制到学生中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T11:46:28.960

`students`通过引用传递，因此允许修改作为参数传递的原始值。该声明

```
students = pass; 
```

就是这样做的。

# java - 过滤器不工作

> ID：11795084
> 
> 赞同：1
> 
> 时间：2012-08-03T11:44:25.827
> 
> 标签：java, servlets, servlet-filters

我基本上有一个过滤器，在它的 doFilter 方法中，我只是将一条消息打印到控制台，并且我已将该过滤器应用于我的示例 Web 应用程序的每个页面。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

<filter>
    <filter-name>LoginFilter</filter-name>
    <filter-class>
        com.mypkg.filters.LoginFilter
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>LoginFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<welcome-file-list>
<welcome-file>utility.jsp</welcome-file> 
```

和我的过滤器代码 LoginFilter.java

```
package com.mypkg.filters;

import java.io.IOException;
import javax.servlet.*;
import javax.servlet.http.HttpServletResponse;
//other imports

public class LoginFilter implements Filter {

@Override
public void init(FilterConfig config) throws ServletException {
     System.out.println("Filter init ran!");
}

@Override
public void doFilter(ServletRequest request, ServletResponse response,FilterChain chain) throws IOException, ServletException {
    System.out.println("Filter running!");
}

@Override
public void destroy(FilterConfig config) throws ServletException {
     //System.out.println("Filter destoryed!");
} 
```

现在，当我第一次运行此过滤器时，我收到“过滤器正在运行”消息，但之后我包含了休眠和其他库，它停止工作，我删除了它们并得到相同的结果。过滤器不运行。检查 url 模式和一切.. 无能！！

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:18:59.727

也许你`Filter`在你之前执行了另一个，它不调用`chain.doFilter()`，从而阻止下一个过滤器（包括你的）被执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:06:22.963

首先，在您的 doFilter 方法中，您应该调用链中的下一个过滤器：

```
chain.doFilter(request, response); 
```

如果没有这个，您的请求将不会在您的过滤器之后得到进一步处理。

这可能是您的问题的原因。

编辑：

你的 destroy() 方法也是错误的。在这里你应该如何重写它：

```
@Override
public void destroy() {
     System.out.println("Filter destoryed!");
} 
```

# json - 如何更新 Highchart 中点的值？

> ID：11795085
> 
> 赞同：1
> 
> 时间：2012-08-03T11:44:25.347
> 
> 标签：json, highcharts

我有一个 Highchart 在 setInterval 函数中通过 AJAX 和 jQuery 接收 JSON 数据，当我使用时`series.data[i].y = response[i].y`，y 的值是变化的，但是在图表中显示和点的高度有以前的值，但在工具提示中显示最近的值？和 x 值根本不改变，请帮我如果改变了 x 和 y 值如何更新？

```
 chart:{ renderTo: 'container',
            zoomType: 'xy',
            plotBackgroundImage: 'graphics/skies.jpg',
            events: {
                load: function () {                    
          var series = this.series[0];setInterval(function () {ajax({type: "POST",url: "/Home/GetData",data: null),contentType: "application/json; charset=utf-8",success: function (response) {          for (var i = 0; i < response.length; i++) {      if (series.data[i].y =response[i].y || series.data[i].category != response[i].x) {          series.data[i].y =response[i].y; series.data[i].category = response[i].x;} }}, dataType: "json",failure: ajaxCallFailed });}, 50000);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:30:15.457

您不应直接修改 this.series[0] 对象。Highcharts 有您可以使用的 api 调用，它们应该用于正确的结果，而不是无意中破坏任何东西。以下是系列对象@http://www.highcharts.com/ref/#series-object 支持的方法[列表](http://www.highcharts.com/ref/#series-object)

根据您的要求，您可能希望使用 addPoint 或 setData。

我不建议你这样做，但在你施展魔法之后尝试调用重绘方法（this.redraw（）），[http: //www.highcharts.com/ref/#chart-object](http://www.highcharts.com/ref/#chart-object)

# android - Eclipse 不断启动 Android 项目

> ID：11795093
> 
> 赞同：0
> 
> 时间：2012-08-03T11:45:04.017
> 
> 标签：android, eclipse

我正在编写一个 android 项目来读取文件内容并通过 Toast 显示文本文件的内容。Eclipse 不断启动该项目。当我关闭 Eclipse 时，它​​没有响应，我必须通过任务管理器强制 Eclipse 关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:55:30.683

`Eclipse keeps lauching the project. When I close eclipse...`
这对我来说还不清楚。为什么在项目启动时关闭 Eclipse？

当 Eclipse 停止时，您是否看到类似以下内容： 27% - Launching delegate？
（这是一个常见错误，有修复）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:50:37.220

我得到了同样的几次，日食发射停止在 100%，然后永远保持这种状态。

这些是可能的解决方案：

1.  运行控制台和 1) adb kill-server 2) adb start-server，之后将终止启动。然后再次启动项目 - 现在一切都应该工作
2.  转到您的项目运行配置，删除旧配置并让eclipse在下次尝试启动时创建一个新配置

# c - 我的 C 加密程序有什么问题？

> ID：11795098
> 
> 赞同：2
> 
> 时间：2012-08-03T11:45:17.560
> 
> 标签：c, encryption

所以我试图在 C 中制作一个文件加密程序（顺便说一下，我对 C 有点陌生）所以我写了这个简单的 XOR 文件加密代码：

```
#include <stdio.h>
#include <string.h>

int main()
{
char fileName1[35] = {'\0'};        //Name of original file
char fileName2[35] = {'\0'};        //Name of encrypted file
char keyString[20] = {'\0'};        //Key determines result encryption
FILE* originalFile;                 //File to be encrypted
FILE* cryptedFile;                  //The encrypted file
int c;                              //byte read from original file

printf("Enter file location followed by name of the file you want to encrypt: ");
scanf("%s", fileName1);

printf("Enter file location followed by name of the encrypted file: ");
scanf("%s", fileName2);

printf("Enter your key (Encryption changes based on Key): ");
scanf("%s", keyString);

originalFile = fopen(fileName1, "rb"); //rb to read file bytes
cryptedFile = fopen(fileName2, "wb");  //wb to write bytes to file

if(originalFile != NULL && cryptedFile != NULL){
    while( (c = getc(originalFile)) != EOF ){
        int x;
        for(x=0; x<strlen(keyString); x++){
            c ^= keyString[x];
            putc(c, cryptedFile);
        }
    }
    fclose(originalFile);
    fclose(cryptedFile);
}

return 0;
} 
```

所以为了测试这个程序，我创建了一个名为 file1.txt 的文件并运行加密程序，将第二个文件作为 file2.txt 并将密钥作为*secret*。然后我再次运行该程序，但这次是在加密的 file2.txt 上并创建了一个具有相同密钥*secret*的 file3.txt 。由于它是相同的密钥，因此 file3.txt 应该与 file1.txt 相同，但 file3.txt 中包含随机内容。那么我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T11:52:29.233

你的程序输出了太多数据；尝试检查 file1.txt、file2.txt 和 file3.txt 的大小。这个部分的问题是：

```
while( (c = getc(originalFile)) != EOF ){
        int x;
        for(x=0; x<strlen(keyString); x++){
            c ^= keyString[x];
            putc(c, cryptedFile);
        }
    } 
```

有两个嵌套循环，因此每个输入字符都会执行整个内部循环。在内部循环中尝试一个新`c = getc()`的，如果达到 EOF，则打破两个循环，或者使用`c ^= keyString[(x++) % strlen(keyString)];`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:50:08.270

如果我了解您的问题；您想加密文件，方法是给它一个要写入的输出文件和一个密钥

现在，当您运行第一个文件时，它会提供一个应该是正确的输出。现在您是说，如果您对加密文件进行加密，它应该给出相同的结果？

好吧它不应该，尝试反转过程，看看是否通过两次解密最后一个文件，你应该最终得到原始文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:53:22.097

```
int x = 0, keyLen = strlen(keyString);
while( (c = getc(originalFile)) != EOF ){
    c ^= keyString[x++%keyLen];
    putc(c, cryptedFile);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:55:59.357

如果您比较输入和输出文件的文件大小，您会发现输出文件越来越大。这是因为对于您读取的每个字节，您为密码中的每个字母写一个。这意味着，如果您的密码是 ，则输出文件将比输入文件大六倍`"secret"`。

您需要提出一种算法，该算法采用密码并将其所有字母组合成一个值，您可以将其用于 XOR 操作。这种算法就是通常所说的[散列函数](http://en.wikipedia.org/wiki/Hash_function)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:59:34.853

您的编码方案应该稍作修正。您正在使用键中的每个字符对您读取的每个字符进行异或运算，这不会产生预期的效果。您甚至可以注意到，您的加密文件比原始文件大，而使用此加密方案时它们应该是相同的。

您需要将原始文本中的一个字符与键中的一个字符进行异或。您可以通过以下方式修复它（例如）：

```
if(originalFile != NULL && cryptedFile != NULL){
      int x = 0;
      int keyStringLength = strlen(keyString);

      while( (c = getc(originalFile)) != EOF ){
         c ^= keyString[x];
         putc(c, cryptedFile);

         ++x;
         if (x >= keyStringLength) {
            x = 0;
         }
      }

      fclose(originalFile);
      fclose(cryptedFile);
} 
```

# generics - 将 TypeRep 转化为具体的类型表示

> ID：11795101
> 
> 赞同：3
> 
> 时间：2012-08-03T11:45:32.450
> 
> 标签：generics, haskell, types, schema, type-conversion

我想编写以下函数：

```
data TypeEnum = IntType | FloatType | BoolType | DateType | StringType
data Schema = Object [Schema] |
              Field TypeEnum |
              Array Schema

schema :: Typeable a => a -> Schema 
```

现在我可以获得`TypeReps`给定构造函数的列表，但我似乎找不到将 a`TypeRep`转换`Schema`为更复杂类型的方法：

```
field :: TypeRep t => t -> Schema
field t | t == typeOf (undefined :: String) = Field StringType
        | t == typeOf (undefined :: Int) = Field IntType
        | t == typeOf (undefined :: ???) = Array ???
        | t == typeOf (undefined :: ???) = Object ??? 
```

它适用于简单的类型，例如`Int`and`String`但是`Typeable`or`[Typeable]`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:04:59.703

您可以使用以下方法获取单参数类型构造函数的类型[`typeOf1`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Typeable.html#t%3aTypeable1)：

```
> typeOf (undefined :: Array Int Int)
Array Int Int
> typeOf1 (undefined :: Array Int Int)
Array Int
> typeOf2 (undefined :: Array Int Int)
Array
> typeOf2 (undefined :: Array a b)
Array 
```

编辑：对不起，我误解了这个问题。这里有一些更有用的建议......您可以使用和朋友将 a`TypeRep`拆分为其组成部分：[`splitTyConApp`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Typeable.html#v%3asplitTyConApp)

```
> splitTyConApp (typeOf (undefined :: Array Int Int))
(Array,[Int,Int])
> let arr = typeRepTyCon (typeOf (undefined :: Array Int Int))
> mkTyConApp arr [] == typeOf2 (undefined :: Array a b)
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:19:59.183

如果您有一组封闭的类型是您的程序唯一需要推理的类型，您可以考虑回避`Data.Typeable`并使用 GADT 滚动您自己的类型表示，如下所示。本标准与标准的区别`Typeable`如下：

*   `TypeRep`s from`Data.Typeable`没有表示它们所代表的类型的类型变量，而在下面的替代方案中，您得到`TypeRep a`的`a`是您所`TypeRep`代表的类型（例如，`typeOf "foo" :: TypeRep [Char]`）。
*   然而，下面显示的 GADT 方法仅适用于在编译时固定的一组类型，因为您的自制`TypeRep`程序定义需要列出所有可表示的类型和类型构造函数。

为什么我建议走这条复杂的路线？因为您可以使用此技术来消除定义中的模式保护序列`field`：

```
data Schema a = ...
              | Field (TypeRep a) -- my TypeRep from below, not the standard one!
              | ...

field :: TypeRep a -> Schema a
field t = Field typeRep 
```

这里的缺点是 GADT`TypeRep`有一个类型参数，它需要一些其他方法来处理`Object :: [Schema] -> Schema`构造函数的情况，因为它替换`[Schema]`为`[Schema a]`. 也许你可以尝试这样的事情：

```
{-# LANGUAGE GADTs #-}
data Schema a where 
    Field   :: TypeRep a -> Schema a
    Array   :: Schema a -> Schema (Array a)
    Object2 :: Schema a -> Schema b -> Schema (a, b)
    Object3 :: Schema a -> Schema b -> Schema c -> Schema (a, b, c)
    ... 
```

但是我认为，如果您研究下面的代码，您可能会发现一些想法，您可以将这些想法融入到您正在做的事情中——您的类型与下面的`TypeEnum`类型相似`TypeRep`，除了我的类型能够表示原子类型之外的类型构造函数。

所以这是代码（应该很容易根据您选择的类型进行修改）：

```
{-# LANGUAGE GADTs #-}

import Control.Applicative

----------------------------------------------------------------
----------------------------------------------------------------
--
-- | Type representations.  If @x :: TypeRep a@, then @x@ is a singleton
-- value that stands in for type @a@.
data TypeRep a where 
    Integer :: TypeRep Integer
    Char    :: TypeRep Char
    Maybe   :: TypeRep a -> TypeRep (Maybe a)
    List    :: TypeRep a -> TypeRep [a]
    Pair    :: TypeRep a -> TypeRep b -> TypeRep (a, b)

-- | Typeclass for types that have a TypeRep
class Representable a where
    typeRep :: TypeRep a

instance Representable Integer where typeRep = Integer
instance Representable Char where typeRep = Char

instance Representable a => Representable (Maybe a) where 
    typeRep = Maybe typeRep

instance Representable a => Representable [a] where 
    typeRep = List typeRep

instance (Representable a, Representable b) => Representable (a,b) where 
    typeRep = Pair typeRep typeRep

typeOf :: Representable a => a -> TypeRep a
typeOf = const typeRep

----------------------------------------------------------------
----------------------------------------------------------------
--
-- | Type equality proofs.
data Equal a b where
    Reflexivity :: Equal a a

-- | Induction rules for type equality proofs for parametric types
induction :: Equal a b -> Equal (f a) (f b)
induction Reflexivity = Reflexivity

induction2 :: Equal a a' -> Equal b b' -> Equal (f a b) (f a' b')
induction2 Reflexivity Reflexivity = Reflexivity

-- | Given two TypeReps, prove or disprove their equality.
matchTypes :: TypeRep a -> TypeRep b -> Maybe (Equal a b)
matchTypes Integer Integer = Just Reflexivity
matchTypes Char Char = Just Reflexivity
matchTypes (List a) (List b) = induction <$> (matchTypes a b)
matchTypes (Maybe a) (Maybe b) = induction <$> (matchTypes a b)
matchTypes (Pair a b) (Pair a' b') = 
    induction2 <$> matchTypes a a' <*> matchTypes b b'
matchTypes _ _ = Nothing

----------------------------------------------------------------
----------------------------------------------------------------
--
-- Example use: type-safe coercions and casts
--

-- | Given a proof that a and b are the same type, you can
-- actually have an a -> b function.
coerce :: Equal a b -> a -> b
coerce Reflexivity x = x

cast :: TypeRep a -> TypeRep b -> a -> Maybe b
cast a b x = coerce <$> (matchTypes a b) <*> pure x

----------------------------------------------------------------
----------------------------------------------------------------
--
-- Example use: dynamic data
--

data Dynamic where
    Dyn :: TypeRep a -> a -> Dynamic

-- | Inject a value of a @Representable@ type into @Dynamic@.
toDynamic :: Representable a => a -> Dynamic
toDynamic = Dyn typeRep

-- | Cast a @Dynamic@ into a @Representable@ type.
fromDynamic :: Representable a => Dynamic -> Maybe a
fromDynamic = fromDynamic' typeRep

fromDynamic' :: TypeRep a -> Dynamic -> Maybe a
fromDynamic' :: TypeRep a -> Dynamic -> Maybe a
fromDynamic' target (Dyn source value) = cast source target value 
```

* * *

**编辑：**我忍不住多玩了一些：

```
{-# LANGUAGE StandaloneDeriving #-}
import Data.List (intercalate)

--
-- And now, I believe this is very close to what you want...
--
data Schema where
    Field :: TypeRep a -> Schema
    Object :: [Schema] -> Schema
    Array :: Schema -> Schema

deriving instance Show (TypeRep a)
deriving instance Show (Schema)

example :: Schema
example = Object [Field (List Char), Field Integer]

describeSchema :: Schema -> String
describeSchema (Field t) = "Field of type " ++ show t
describeSchema (Array s) = "Array of type " ++ show s
describeSchema (Object schemata) = 
    "an Object with these schemas: " 
        ++ intercalate ", " (map describeSchema schemata) 
```

这样，`describeSchema example`产生`"an Object with these schemas: Field of type List Char, Field of type Integer"`.

# java - Eclipse生成的hashCode函数好用吗？

> ID：11795104
> 
> 赞同：32
> 
> 时间：2012-08-03T11:45:46.030
> 
> 标签：java, eclipse, hash, hashmap, hashtable

Eclipse 源菜单有一个“生成 hashCode / equals 方法”，它生成如下所示的函数。

```
String name; 
@Override
public int hashCode()
{
    final int prime = 31;
    int result = 1;
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    return result;
}

@Override
public boolean equals(Object obj)
{
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    CompanyRole other = (CompanyRole) obj;
    if (name == null)
    {
        if (other.name != null)
            return false;
    } else if (!name.equals(other.name))
        return false;
    return true;
} 
```

如果我在生成时选择多个字段`hashCode()`并且`equals()`Eclipse 使用上面显示的相同模式。

我不是哈希函数方面的专家，我想知道生成的哈希函数有多“好”？什么情况下它会发生故障并导致过多的碰撞？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T12:05:31.137

`java.util.ArrayList`您可以在as中看到 hashCode 函数的实现

```
public int hashCode() {
    int hashCode = 1;
    Iterator<E> i = iterator();
    while (i.hasNext()) {
        E obj = i.next();
        hashCode = 31*hashCode + (obj==null ? 0 : obj.hashCode());
    }
    return hashCode;
} 
```

这是一个这样的示例，您的 Eclipse 生成的代码遵循类似的实现方式。但是如果你觉得你必须自己实现你的 hashCode，那么 Joshua Bloch 在他的名著[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)中给出了一些很好的指导。我将发布该书第 9 项中的重要观点。那些是，

> 1.  在名为 result 的 int 变量中存储一些常量非零值，例如 17。
> 2.  对于对象中的每个重要字段 f（即 equals 方法考虑的每个字段），请执行以下操作：
>     
>     
>     
>     一种。计算字段的 int 哈希码 c：
>     
>     
>     
>     一世。如果该字段是布尔值，则计算 (f ? 1 : 0)。
>     
>     
>     
>     ii. 如果字段是 byte、char、short 或 int，则计算 (int) f。
>     
>     
>     
>     iii. 如果字段是长的，则计算 (int) (f ^ (f >>> 32))。
>     
>     
>     
>     iv. 如果该字段是浮点数，则计算 Float.floatToIntBits(f)。
>     
>     
>     
>     v. 如果该字段是双精度，则计算 Double.doubleToLongBits(f)，然后按照步骤 2.a.iii 对结果进行散列运算。
>     
>     
>     
>     六。如果该字段是对象引用，并且此类的 equals 方法通过递归调用 equals 来比较该字段，则在该字段上递归调用 hashCode。如果需要更复杂的比较，请为此字段计算“规范表示”并在规范表示上调用 hashCode。如果该字段的值为 null，则返回 0（或其他一些常量，但 0 是传统的）
>     
>     
>     
>     七。如果该字段是一个数组，则将其视为每个元素都是一个单独的字段。也就是说，通过递归应用这些规则来计算每个重要元素的哈希码，并在步骤 2.b 中组合这些值。如果数组字段中的每个元素都很重要，则可以使用 1.5 版中添加的 Arrays.hashCode 方法之一。
>     
>     
>     
>     湾。将步骤 2.a 中计算的哈希码 c 合并到结果中，如下所示：
>     
>     
>     
>     ```
>      result = 31 * result + c; 
>     ```
>     
>     
> 3.  返回结果。
>     
>     
> 4.  当你写完 hashCode 方法后，问问自己相等的实例是否有相等的哈希码。编写单元测试来验证你的直觉！如果相等的实例具有不相等的哈希码，找出原因并解决问题。

我想，Java 语言设计者和 Eclipse 似乎遵循了类似的准则。快乐编码。干杯。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-10-14T08:23:54.843

从 Java 7 开始，您可以使用`java.util.Objects`编写简短而优雅的方法：

```
class Foo {
  private String name;
  private String id;

  @Override
  public int hashCode() {
    return Objects.hash(name,id);
  }

  @Override
  public boolean equals(Object obj) {
    if (obj instanceof Foo) {
      Foo right = (Foo) obj;
      return Objects.equals(name,right.name) && Objects.equals(id,right.id);
    }
    return false;
  }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T11:59:10.227

通常它是好的，但是：

1.  番石榴[做得更好](https://code.google.com/p/guava-libraries/wiki/CommonObjectUtilitiesExplained#hashCode)，我更喜欢它。[编辑：从 JDK7 开始，Java 似乎提供了类似的哈希函数]。
2.  某些框架在直接访问字段而不是使用 setter/getter 时可能会导致问题，例如[Hibernate](https://stackoverflow.com/questions/27581/what-issues-should-be-considered-when-overriding-equals-and-hashcode-in-java/256447#256447)。对于 Hibernate 创建的一些惰性字段，它会创建一个代理而不是真实对象。只有调用 getter 才能让 Hibernate 获取数据库中的实际值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-03T11:47:37.880

是的，它是完美的 :) 您将在 Java 源代码中几乎无处不在地看到这种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T12:39:58.970

这是编写散列函数的标准方法。但是，如果您对这些领域有一些了解，您可以改进/简化它。例如，如果您的类保证该字段永远不会为空（也适用于 equals()），您可以省略空检查。或者，如果只使用一个字段，您可以委托该字段的哈希码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T20:23:46.860

我还想添加对 Joshua Bloch 在 Effective Java 2nd Edition 中的 Item 9 的引用。

这是一个食谱`Item 9 : ALWAYS OVERRIDE HASHCODE WHEN YOU OVERRIDE EQUALS`

> 1.  在名为 result 的 int 变量中存储一些常量非零值，例如 17。
> 2.  对于对象中的每个重要字段 f（即 equals 方法考虑的每个字段），请执行以下操作：

```
 a. Compute an int hash code c for the field:            
        i.   If the field is a boolean, compute (f ? 1 : 0).
        ii.  If the field is a byte, char, short, or int, compute (int) f.
        iii. If the field is a long,compute(int)(f^(f>>>32)).
        iv.  If the field is a float, compute Float.floatToIntBits(f).
        v.   If the field is a double, compute Double.doubleToLongBits(f), and then hash the resulting long as in step 2.a.iii.
        vi.  If the field is an object reference and this class’s equals method compares the field by recursively invoking equals, recursively invoke hashCode on the field. If a more complex comparison is required, compute a “canonical representation” for this field and invoke hashCode on the canonical representation. If the value of the field is null, return 0 (or some other constant, but 0 is traditional).
        vii. If the field is an array, treat it as if each element were a separate field. That is, compute a hash code for each significant element by applying these rules recursively, and combine these values per step 2.b. If every element in an array field is significant, you can use one of the Arrays.hashCode methods added in release 1.5\. 
```

> ```
>  b. Combine the hash code c computed in step 2.a into result as follows: result = 31 * result + c;
> 3\. Return result.
> 4\. When you are finished writing the hashCode method, ask yourself whether equal instances have equal hash codes. Write unit tests to verify your intuition! If equal instances have unequal hash codes, figure out why and fix the problem. 
> ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-29T21:46:57.593

如果您使用的是 Apache Software Foundation（commons-lang 库），那么下面的类将帮助您使用反射生成 hashcode/equals/toString 方法。

添加/删除实例变量时，您无需担心重新生成 hashcode/equals/toString 方法。

[EqualsBuilder](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/builder/EqualsBuilder) - 这个类提供了为任何类构建好的equals方法的方法。它遵循 Joshua Bloch 在 Effective Java 中制定的规则。特别是比较双精度、浮点数和数组的规则可能很棘手。此外，确保 equals() 和 hashCode() 一致可能很困难。

[HashCodeBuilder](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/builder/HashCodeBuilder) - 这个类可以为任何类构建一个好的 hashCode 方法。它遵循 Joshua Bloch 的《Effective Java》一书中规定的规则。编写一个好的 hashCode 方法实际上是相当困难的。此类旨在简化流程。

[ReflectionToStringBuilder](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/builder/ReflectionToStringBuilder) - 此类使用反射来确定要附加的字段。因为这些字段通常是私有的，所以该类使用 AccessibleObject.setAccessible(java.lang.reflect.AccessibleObject[], boolean) 来更改字段的可见性。除非正确设置了适当的权限，否则这将在安全管理器下失败。

Maven依赖：

```
<dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>${commons.lang.version}</version>
</dependency> 
```

示例代码：

```
import org.apache.commons.lang.builder.EqualsBuilder;
import org.apache.commons.lang.builder.HashCodeBuilder;
import org.apache.commons.lang.builder.ReflectionToStringBuilder;

public class Test{

    instance variables...
    ....

    getter/setter methods...
    ....

    @Override
    public String toString() {
        return ReflectionToStringBuilder.toString(this);
    }

    @Override
    public int hashCode() {
        return HashCodeBuilder.reflectionHashCode(this);
    }

    @Override
    public boolean equals(Object obj) {
        return EqualsBuilder.reflectionEquals(this, obj);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-20T12:14:39.987

一个潜在的缺点是所有具有空字段的对象都将具有 31 的哈希码，因此仅包含空字段的对象之间可能存在许多潜在的冲突。这将使`Maps`.

当您`Map`的键类型具有多个子类时，可能会发生这种情况。例如，如果您有一个`HashMap<Object, Object>`，您可能有许多哈希码为 31 的键值。诚然，这种情况不会经常发生。如果您愿意，您可以将素数的值随机更改为 31 以外的值，并减少碰撞的可能性。

# powershell - 获取 BizTalk 中特定应用程序的所有挂起实例

> ID：11795105
> 
> 赞同：4
> 
> 时间：2012-08-03T11:45:46.590
> 
> 标签：powershell, wmi, biztalk

在 BizTalk Server 管理控制台中，您可以查询挂起的服务实例，然后按应用程序名称过滤它们。在没有 BTS 管理控制台的情况下，我需要这样的功能。

到目前为止，我已经创建了 Powershell 脚本来获取挂起的实例：

```
$array = Get-WmiObject MSBTS_ServiceInstance `
           -Namespace 'root\MicrosoftBizTalkServer' `
           -Filter '(ServiceClass = 4 or ServiceClass = 1) `
                 and (ServiceStatus = 4 or ServiceStatus = 16)' 
foreach ($element in $array)
{
    Write-Host $element.InstanceID "-" $element.HostName "-" `
                 $element.ServiceStatus "-" $element.ServiceClass
} 
```

如果您运行此脚本，您将获得所有挂起的实例，但如何找出它们属于哪个应用程序？

任何使用 PowerShell、WMI 或 C# 的解决方案都对我有好处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-31T12:26:45.207

我使用了 Microsoft.BizTalk.Operations 程序集...

```
Add-Type -AssemblyName ('Microsoft.BizTalk.Operations, Version=3.0.1.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL')
$dbServer = (Get-ItemProperty 'HKLM:\SOFTWARE\Microsoft\BizTalk Server\3.0\Administration' 'MgmtDBServer').MgmtDBServer
$dbName = (Get-ItemProperty 'HKLM:\SOFTWARE\Microsoft\BizTalk Server\3.0\Administration' 'MgmtDBName').MgmtDBName
$bo = New-Object Microsoft.BizTalk.Operations.BizTalkOperations $dbServer, $dbName
$serviceInstances = $bo.GetServiceInstances()

$tgt = "DeploymentFramework.Samples.HelloWorld"
foreach ($instance in $serviceInstances)
{
    if ($instance.Application -ieq $tgt)
    {
        $completionStatus= $bo.TerminateInstance($instance.Id)
    }
} 
```

我还没有解决的一件事......[为什么终止暂停（不可恢复）的服务实例返回失败，但它被终止](https://stackoverflow.com/questions/26674525/why-does-terminating-a-suspended-not-resumable-service-instance-return-failed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:45:58.323

什么版本的 BizTalk？

这适用于 BizTalk 2010：

```
$array = Get-WmiObject MSBTS_ServiceInstance `
           -Namespace 'root\MicrosoftBizTalkServer' `
           -Filter '(ServiceClass = 4 or ServiceClass = 1) ` 
                 and (ServiceStatus = 4 or ServiceStatus = 16)' 
foreach ($element in $array)
{
    Write-Host $element.ServiceName
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-26T15:25:14.640

应用程序名称属性不通过 MSBTS_ServiceInstance 类公开。我相信其原因是，应用程序概念仅在 BizTalk 2006 中引入，但 WMI API 是从 2004 年开始出现的。

恐怕，您唯一的选择就是直接进入数据库。

# delphi - 用于 Delphi IDE 的 REPL？

> ID：11795106
> 
> 赞同：4
> 
> 时间：2012-08-03T11:45:50.040
> 
> 标签：delphi, delphi-xe2, read-eval-print-loop

[http://en.wikipedia.org/wiki/REPL](http://en.wikipedia.org/wiki/REPL)阅读–eval–print_loop

德尔福有这样的事情吗？在处理几乎没有记录的边界情况时，探索诸如 Windows APi 之类的 DLL 并勾画它们的用法会非常有用。

我尝试了 pascal 脚本，例如 Cnwizards 中的一个，但它不太舒服。例如，它不能使用像 Windows.pas 这样的单位，你必须为它制作一些你自己的奇怪存根。

无论如何，这些脚本比 Repl 更难用于“试试这个试试那个”场景。

对于 Delphi 对象，大多数情况下它会在断点处暂停并使用 Evaluate/Modify 窗口，但它仅适用于 Delphi 对象，而不适用于 DLL；它不能使临时变量缓存值等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:41:43.653

这不是您真正要寻找的，因为 Delphi 是一种静态类型的编译语言，但如果您真的坚持能够输入一些 pascal 并查看它是否有任何作用，您可以尝试`TJvInterpreter`Jedi 中的组件VCL。

请注意，这种体验与使用 python 完全不同。您不能只键入“使用模块”并按回车键，因为帕斯卡单元必须是完整的，然后它们才能被 JvInterpreter 解释，并且 JvInterpreter 需要您为要导入的每个其他单元编写一个包装器。你会发疯的。我并没有认真建议任何人尝试围绕`TJvInterpreter`.

Delphi 的“交互魔法”元素被称为“设计时环境”以及我们使用“组件”构建的方式。我们甚至不会通过编写代码来做这件事，我们都是用鼠标和键盘直观地完成的。它被称为 RAD（快速应用程序开发），由 Delphi 中的 VCL（可视化组件库）提供支持，并且（与 REPL 一样）是进行快速开发的众多方法之一。

我们拥有的另一个很像 REPL 的东西是 Delphi 中的这个按钮：

![在此处输入图像描述](../Images/9d568aa4938191bff2eaaac0d6713703.png)

在创建一个新的空项目后单击它，您添加到新空项目的任何代码都会在不到一秒的时间内构建并运行。对我来说足够接近 REPL。这有点像二进制可执行即时幸福。

写一行。构建并运行（1 秒）。立即的。

# php - 在 xampp 中配置主机头

> ID：11795109
> 
> 赞同：1
> 
> 时间：2012-08-03T11:45:58.793
> 
> 标签：php, iis-7, xampp

我是 xampp 的新手，不确定以下是否可行，我的服务器有使用 port 在 iis 上运行的站点`80`。XAMPP 配置为使用`8887`. 我如何在 xampp 中配置主机头，`blog.name.com`例如将使用在 xampp 上运行的 wordpress 站点而不是查看 iis？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:58:48.487

IIS 拥有端口 80，因此您需要为 blog.name.com 配置 IIS，并将网页或其他重定向添加到端口 8887

来自[https://forums.iis.net/p/1189549/2022132.aspx#2022132](https://forums.iis.net/p/1189549/2022132.aspx#2022132)：

> 然后，您可以使用主机名 app1.company.com 将新网站添加到 IIS 并绑定到端口 80。现在您有两个选择，a) 使用端口 8080 重定向到 apache 站点或在 IIS 上托管一个新的 HTML 文件你用 HTML 重写。
> 
> ```
> Code needed will look like this: 
> ```
> 
> （将以下 HTML 重定向代码放在 HTML 代码的 和 标记之间。）

```
<meta HTTP-EQUIV="REFRESH" content="0; url=http://app1.company.com:8080"> 
```

> 上面的 HTML 重定向代码会立即将您的访问者重定向到另一个网页。content="0; 可以更改为您希望浏览器在重定向之前等待的秒数。

# php - magento 添加 js 函数调用以使用 php 输入

> ID：11795124
> 
> 赞同：0
> 
> 时间：2012-08-03T11:47:02.017
> 
> 标签：php, zend-framework, magento

我正在尝试对 magento 的高级搜索进行一些更改。我想让输入一一出现。所以我需要 `onchange='showNext()'`在每个输入中添加一个，但是输入是由 PHP 生成的，如下所示：

```
return $this -> _getSelectBlock() -> setName($name) -> setId($attribute 
->getAttributeCode()) -> setTitle($this -> getAttributeLabel($attribute)) 
-> setExtraParams("") -> setValue($this -> getAttributeValue($attribute))
-> setOptions($options) -> getHtml(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:26:11.967

尝试这个

```
return $this -> _getSelectBlock() -> setName($name) -> setId($attribute 
->getAttributeCode()) -> setTitle($this -> getAttributeLabel($attribute)) 
-> setExtraParams("onchange=\'showNext()\'") -> setValue($this -> getAttributeValue($attribute))
-> setOptions($options) -> getHtml(); 
```

# javascript - 带有两个提交按钮的提交表单，每个按钮执行不同的操作问题

> ID：11795126
> 
> 赞同：2
> 
> 时间：2012-08-03T11:47:24.633
> 
> 标签：javascript, jquery, ajax, forms

我有一个 JSP 页面，上面有标准格式。我有两个按钮，每个按钮在按下时执行不同的操作，然后提交表单 - 操作 1 和操作 2。

我最初是为一个按钮设置的，所以这一切都是通过以下方式完成的，并且工作正常：

```
$('#form').submit( function() { .... } 
```

但是现在我有两个按钮，我希望它做同样的事情，但是如何找到我按下了哪个按钮。

我可以通过 .click 功能做到这一点，但我不想破坏我现有的 form.submit 功能。

下面是我的代码 - 这不起作用：

```
 $('#form').submit( function() {

        // Set the field array variables with data
        $('button[name="action1"], [name="action2"]').each(function(index) {
            alert('index : ' + index );
            alert('value : ' + this.value);
        });

        $('button[name="action1"]').click(function(e) { 
            alert('ac1 clicked');
        }); 

        $('button[name="action2"]').click(function(e) { 
            alert('ac2 clicked');
        }); 
```

我的 html 按钮是：

```
 <button id="submitButton" name="action1" value="action1" type="submit">action 1</button>
            <button id="submitButton" name="action2" value="action2" type="submit">action 2</button> 
```

有没有一种方法可以在我的 form.submit 中执行此操作，或者有一种方法可以执行 .click，然后提交表单。我对这个解决方案有点迷茫？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:53:28.383

您可以读取事件对象的相关目标。

```
$('#form').on('submit', function(evt) {
    if (evt.relatedTarget && $(relEl).is('input[type=submit]')) {
        /* related element is a button - do something */
    }
    evt.preventDefault(); //cancel form submit, as required
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:55:26.797

对于标准 HTML 表单提交：

HTML：

```
<form method="..." action="...">
    ...
    <input type="hidden" name="action">
    <input value="action1" type="submit" value="action 1" />
    <input value="action2" type="submit" value="action 2" />
    ...
</form> 
```

Javascript：

```
$('button[type="submit"]').on('click', function() {
    $("#action").val(this.value);//where "#action" selects an input field (in the same form) of type="hidden"
}); 
```

对于 AJAX 提交，执行相同的操作，但将操作字段的值读回提交处理程序中的 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:50:24.197

在按钮的单击处理程序中，在提交表单之前设置一个隐藏字段。然后在请求处理程序中读取该隐藏字段的值以找出请求的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:51:12.067

将事件处理程序绑定到您的按钮

```
$('button').on('click', function(e) {
    var buttonId = $(this).attr('name');
    if(buttonId = 'action1') {
        // action1 was pressed
    } else {
        // action2 was pressed
    }

    $('#form').trigger('submit'); // trigger submit of form.

    e.preventDefault();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:56:27.523

首先，永远不要在同一页面上包含两个具有相同 id 的 dom 元素。class 属性适用于此类事情。将按钮的 id 分别更改为 submitButton1 和 submitButton2 然后这应该可以工作：

```
$('#submitButton1').closest('#form').submit(function() {
    // first button action
});

$('#submitButton2').closest('#form').submit(function() {
    // second button action
}); 
```

# mongodb - MongoDB objectId 引用

> ID：11795136
> 
> 赞同：6
> 
> 时间：2012-08-03T11:47:59.010
> 
> 标签：mongodb

我有一个集合，文档的 ID 设置为 MongoDb 对象 ID（因此在数据库中显示为：

```
Collection1

    "someId": {
        "$oid": "5003cb802e28076412000001"
    }, 
```

在另一个集合中，我引用了这些。然而，有时这些引用似乎存储为适当的 oid：

```
Collection 2

    "someForiegnId": {
        "$oid": "5003cb802e28076412000001"
    }, 
```

但其他时候，他们将其作为普通字符串放入数据库。

```
Collection 2    

    "someForiegnId": "5003cb802e28076412000001", 
```

我的问题是 -**以 oid 格式存储这些外部引用很重要，或者它们可以只是字符串吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-09T05:50:23.270

我知道我正在回答一个 1 岁的问题，但仍然如此。

始终希望在您的数据库中保持一致。无论您如何存储数据（例如将 IP 地址作为字符串`"87.123.12.12"`、数组`[87, 123, 12, 12]`或数字`1467681804`），它都应该始终以相同的方式存储。您的数据也是如此：您必须选择一种格式并坚持使用。

您选择的格式会影响您将使用多少存储空间以及查询数据的速度。最好的方法是将它们存储为 ObjectID，原因如下：

*   [存储objectID](http://docs.mongodb.org/manual/reference/object-id/)只需要 12 个字节，而将其存储在字符串中需要两次。当然，这是一个很小的差异，但它绝对是免费的。此外，在您尝试将所有数据放入内存（或至少尽可能多地）的世界中，这是一个很好的考虑因素。因此，您不仅可以节省 HDD，还可以节省 RAM
*   您可以轻松地从您的 ID 中获取时间戳。有时获取对象的创建时间可能很有用。使用字符串你不能这样做
*   如果您决定基于此字段创建索引 - 它的大小会小得多，并且您会更快地查询它（因为这是一个数字）然后通过字符串查询。

因此，即使我只有字符串表示形式 - 我会更改为 ObjectID()，在您的情况下，这绝对值得切换（我知道您很可能已经这样做了）。

PS您可以通过[修改以下答案中的查询](https://stackoverflow.com/a/19824993/1090562)来修改字段。

# c# - 不规则三角形顶点索引

> ID：11795137
> 
> 赞同：0
> 
> 时间：2012-08-03T11:48:02.253
> 
> 标签：c#, windows, xna

最后我展示了一些东西。切换到使用 graphics.GraphicsDevice.DrawIndexedPrimitives ... 下一个问题... 只显示一个三角形。数据集大约有 200 个三角形。我对传入的数据进行了格式化，以确保每三个连续的向量形成一个三角形面。这些是形成不规则形状的不规则三角形。我不完全理解顶点的索引。看起来每 3 个索引形成一个三角形。如果是这样，那么索引与传入的数据匹配。我这样做了：

```
int i4 = -1;
        indices = new int[xData1.Count];
        for (int i2 = 0; i2 < xData1.Count; i2++)
        {
            i4++;
            cubeVertices[i4].Position = new Vector3((float)xData1[i2][0], (float)xData1[i2][1], (float)xData1[i2][2]);
            cubeVertices[i4].Color = Color.LawnGreen;
            indices[i4] = i4;
        } 
```

使索引与传入的顶点匹配。然后我使用 Reimers normal calc 来提供法线。这可能是错误的，因为他的示例是每个索引使用 6 个顶点（我认为！），如下所示：

```
for (int i = 0; i < cubeVertices.Length; i++)
            cubeVertices[i].Normal = new Vector3(0, 0, 0);

        for (int i = 0; i < indices.Length / 3; i++)
        {
            int index1 = indices[i * 3];
            int index2 = indices[i * 3 + 1];
            int index3 = indices[i * 3 + 2];

            Vector3 side1 = cubeVertices[index1].Position - cubeVertices[index3].Position;
            Vector3 side2 = cubeVertices[index1].Position - cubeVertices[index2].Position;
            Vector3 normal = Vector3.Cross(side1, side2);

            cubeVertices[index1].Normal += normal;
            cubeVertices[index2].Normal += normal;
            cubeVertices[index3].Normal += normal;
        }

        for (int i = 0; i < cubeVertices.Length; i++)
            cubeVertices[i].Normal.Normalize(); 
```

我需要在这里修复多少东西？我只看到几百个三角形中的一个:(谢谢你的耐心

```
public struct VertexPositionColorNormal
    {
        public Vector3 Position;
        public Color Color;
        public Vector3 Normal;

        public readonly static VertexDeclaration VertexDeclaration = new VertexDeclaration
        (
            new VertexElement(0, VertexElementFormat.Vector3, VertexElementUsage.Position, 0),
            new VertexElement(sizeof(float) * 3, VertexElementFormat.Color, VertexElementUsage.Color, 0),
            new VertexElement(sizeof(float) * 3 + 4, VertexElementFormat.Vector3, VertexElementUsage.Normal, 0)
        );
    } 
```

...

```
private void CopyToBuffers()
    {
        vertexBuffer = new VertexBuffer(graphics.GraphicsDevice, VertexPositionColorNormal.VertexDeclaration, 
            cubeVertices.Length, BufferUsage.WriteOnly);
        vertexBuffer.SetData(cubeVertices);

        myIndexBuffer = new IndexBuffer(graphics.GraphicsDevice, typeof(int), indices.Length, BufferUsage.WriteOnly);
        myIndexBuffer.SetData(indices);
    } 
```

……

```
foreach (EffectPass pass in basicEffect.CurrentTechnique.Passes)
        {
            basicEffect.World = world;
            basicEffect.View = view;
            basicEffect.Projection = proj;

            pass.Apply();

            graphics.GraphicsDevice.Indices = myIndexBuffer;
            graphics.GraphicsDevice.SetVertexBuffer(vertexBuffer);
            graphics.GraphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0,
                cubeVertices.Length, 0, indices.Length / 3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:19:47.917

你的正常计算是正确的，即使它是错误的，唯一会发生的是你的三角形会收到错误的闪电。

您使用的索引与进入的顶点的顺序完全匹配，这本身就是多余的。如果您切换到根本不设置索引并使用`DrawPrimitives`原始计数代替，那会有所不同吗？

除此之外，您确定您提供的数据是有效的吗？顶点位置是否正确设置？

# c# - 带有 LineObj 问题的 ZedGraph 垂直线

> ID：11795141
> 
> 赞同：6
> 
> 时间：2012-08-03T11:48:12.170
> 
> 标签：c#, .net, graph, zedgraph

我有一个带有几条曲线的 ZedGraphControl，我想在一些固定的 x 位置添加垂直线。线条当然应该只在实际图形区域内。

我试过以下

```
LineObj line = new LineObj(Color.Black, xPos, myPane.YAxis.Scale.Min, xPos, myPane.YAxis.Scale.Max);  
line.Line.Style = System.Drawing.Drawing2D.DashStyle.Dash;
line.Line.Width = 1f;
myPane.GraphObjList.Add(line); 
```

这在用户缩放图表之前工作正常，然后垂直线将延伸出实际的图表区域（参见下面的图片链接，还请注意它在图表内没有虚线，奇怪）。

[http://imageshack.us/photo/my-images/196/zedgraphzoom.png/](http://imageshack.us/photo/my-images/196/zedgraphzoom.png/)

有没有办法解决这个问题（如果只有一种方法可以获取当前缩放的 myPane.Xaxis.Scale.Min 和 Max，然后更新 ZoomEvent 中的图形？）或者有没有更好的类/方法来使用其他为此目的而不是 LineObj？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:12:24.350

不要定义 a `LineObj`，而是定义 a`LineItem`并将其添加到`GraphPane.CurveList`:

```
LineItem line = new LineItem(String.Empty, new[] { xPos, xPos },
                new[] { myPane.YAxis.Scale.Min, myPane.YAxis.Scale.Max }, 
                Color.Black, SymbolType.None);
line.Line.Style = System.Drawing.Drawing2D.DashStyle.Dash;
line.Line.Width = 1f;

myPane.CurveList.Add(line); 
```

这将绑定`line`到图形窗格中的坐标系，因此当您缩放或平移时，`line`位置仍将被限制在图形中。当然，如果您在不更新 的`y`值的情况下缩小`line`，则`line`端点将在图形内。

我从个人经验中知道，冲刺可能是 Zedgraph 中的一个问题。但是，添加 时似乎正确显示了破折号`LineItem`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-11T19:49:04.100

您正在使用 LineObj 而不是 CurveItem 的好方法。

查看[Location](http://zedgraph.sourceforge.net/documentation/html/T_ZedGraph_Location.htm)结构和[CoordinateFrame](http://zedgraph.sourceforge.net/documentation/html/P_ZedGraph_Location_CoordinateFrame.htm)属性。它允许对 X 和/或 Y 使用不同的坐标系。

设置`CoordinateFrame`为`XScaleYChartFraction`允许使用 0d 和 1d 作为 Y，这意味着图形窗格的“底部”和“顶部”（而不是 YAxis.Scale.Min 和 YAxis.Scale.Max），因为 X 继续使用 X轴刻度坐标系。

这意味着您可以使用 .AxisChange()、缩放、平移，并且 LineObj 不会干扰 Y 轴的比例变化！

```
var line = new LineObj(Color.Black, xPos, 0, xPos, 1);

line.Location.CoordinateFrame = XScaleYChartFraction; // This do the trick !
line.IsClippedToChartRect = true;

line.Line.Style = System.Drawing.Drawing2D.DashStyle.Dash;
line.Line.Width = 1f;

myPane.GraphObjList.Add(line); 
```

# java - 从运行时进程java捕获错误

> ID：11795145
> 
> 赞同：2
> 
> 时间：2012-08-03T11:48:28.887
> 
> 标签：java, process, runtime.exec

我正在使用`Runtime.getRuntime().exec`这样的另一个 Java 应用程序运行 Java 程序

```
Process p1 = Runtime.getRuntime().exec("javac test.java");
Process p2 = Runtime.getRuntime().exec("java test"); 
```

test.java 的内容

```
import java.io.*;
class test
{
 public static void main(String args[])
  {
  Scanner sc = new Scanner(System.in);
  String s = sc.nextLine();
  System.out.println(s);
  }
} 
```

我想处理进程的*输入*、*输出*和*错误*流`p2`。我确实捕获了 的输出`test.java`，但是，我不知道如何处理输出和错误。

这是我的代码：

```
try {
    String s = "";
    InputStream istr = p2.getInputStream();
    BufferedReader br = new BufferedReader(new InputStreamReader(istr));
    BufferedReader bre = new BufferedReader
        (new InputStreamReader(p2.getErrorStream()));

    while ((s = br.readLine()) != null) {
        System.out.println(s);
    }
    br.close();
    while ((s = bre.readLine()) != null) {
        System.out.println(s);
    }
    bre.close();
    p2.waitFor();
} catch (IOException ex) {
    ex.printStackTrace();
} catch (Exception err) {
    err.printStackTrace();
} 
```

上面的代码可以很好地捕获`test.java`. 但它不显示*test.java*的错误。

您能否给我一个示例代码来解决此问题并处理输出流或分享想法？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:02:47.780

我一直使用的解决方案是创建一个**单独的线程**来读取其中一个`streams`

所以，在你的情况下，它应该是这样的

```
String s = "";
InputStream istr = p2.getInputStream();
BufferedReader br = new BufferedReader(new InputStreamReader(istr));
BufferedReader bre = new BufferedReader
        (new InputStreamReader(p2.getErrorStream()));

new Thread(new Runnable() {    
    @Override
    public void run() {
       while ((s = br.readLine()) != null) {
             System.out.println(s);
        }
     }
 }).start();

 new Thread(new Runnable() {    
    @Override
    public void run() {
         while ((s = bre.readLine()) != null) {
              System.out.println(s);
          }
     }
  }).start();
// when you are finished close streams 
```

# spring - getOutputStream() 已在 Spring 应用程序中为此响应调用

> ID：11795146
> 
> 赞同：-2
> 
> 时间：2012-08-03T11:48:29.087
> 
> 标签：spring, exception, servlets, response

```
java.lang.IllegalStateException: getOutputStream() has already been called for this response
    org.apache.catalina.connector.Response.getWriter(Response.java:626)
    org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:215)
    org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
    org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)
    org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
    org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:123)
    org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:80)
    org.apache.jsp.tiles.baseLayout_jsp._jspService(baseLayout_jsp.java:149)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:241)
    org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:222)
    org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:106)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:670)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:690)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:644)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:627)
    org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:321)
    org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
    org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
    org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:81)
    org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:359)
    org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:275)
    org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
    org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
    org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:344)
    org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:272)
    org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:81)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:51:00.087

正如异常明确指出的那样，该`getOutputStream()`方法只能在响应上调用**一次**。您不止一次地尝试这样做，这就是为什么您会遇到该异常 - 您需要找出代码中发生的位置并修复它。

# solr - 使用 SOLR 重复数据删除保留一个重复文章条目

> ID：11795150
> 
> 赞同：1
> 
> 时间：2012-08-03T11:48:42.270
> 
> 标签：solr, deduplication

我在 solrconfig.xml 中使用了具有以下设置的 Solr 重复数据删除

```
<updateRequestProcessorChain name="dedupe">
   <processor class="solr.processor.SignatureUpdateProcessorFactory">
     <bool name="enabled">true</bool>
     <str name="signatureField">signature</str>
     <bool name="overwriteDupes">true</bool>
     <str name="fields">description</str>
     <str name="signatureClass">solr.processor.TextProfileSignature</str>
   </processor>
   <processor class="solr.LogUpdateProcessorFactory" />
   <processor class="solr.RunUpdateProcessorFactory" />
 </updateRequestProcessorChain> 
```

并在 schema.xml

```
<field name="signature" type="string" stored="true" indexed="true" multiValued="false" /> 
```

我的目标是找到具有重复描述的文档（使用 TextProfileSignature 表示几乎重复）保留一个条目并删除其他重复条目。

例如 doc1 描述：Websol – 候选人应具有良好的沟通能力和计算机技能必须愿意搬迁 我们在国际呼叫中心的后台办公室有很好的职位空缺

doc2 描述：Websol – 候选人应具有良好的沟通能力和计算机技能必须愿意搬迁我们在国际呼叫中心的后台办公室有很好的职位空缺...

从这两个文档中只有一个要删除，而不是两个，但是使用 solr dedupe 两个条目都会被删除。

让我知道我是否在设置中缺少任何东西，或者我需要遵循其他方式来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:35:18.060

可能是您遇到了[已知问题](https://issues.apache.org/jira/browse/SOLR-1908)

# java - log4j.properties 应该是什么样子？

> ID：11795157
> 
> 赞同：0
> 
> 时间：2012-08-03T11:49:04.970
> 
> 标签：java, log4j, log-viewer

[在这里](https://stackoverflow.com/questions/11790920/how-to-start-using-chainsaw-for-log4j)讨论后，我仍然无法配置我的程序/电锯

当我启动 ChainSaw 时，我选择

*   让我在端口 4445 上使用一个简单的接收器

在我的程序中，我设置了配置：

`PropertyConfigurator.configure("log4j.properties");`

最后运行程序，点击`Simple Receiver`Chainsaw

log4j.properties 版本 1

```
log4j.rootLogger=DEBUG, server

log4j.appender.server=org.apache.log4j.net.SocketAppender
log4j.appender.server.Port=4445
log4j.appender.server.RemoteHost=localhost
log4j.appender.server.ReconnectionDelay=10000 
```

log4j.properties 版本 2

```
log4j.rootCategory=DEBUG, zeroconf, chainsaw
# Socket Appender
log4j.appender.chainsaw=org.apache.log4j.net.SocketAppender
log4j.appender.chainsaw.remoteHost=localhost
log4j.appender.chainsaw.port=4445
log4j.appender.chainsaw.locationInfo=true 
```

它们都不起作用。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:49:17.640

尝试：

```
log4j.threshold=ALL
log4j.debug = true
log4j.rootLogger=DEBUG, chainsaw
# Socket Appender
log4j.appender.chainsaw=org.apache.log4j.net.SocketAppender
log4j.appender.chainsaw.RemoteHost=localhost
log4j.appender.chainsaw.Port=4445
log4j.appender.chainsaw.LocationInfo=true 
```

这是电锯配置的一个很好的例子，也是必需的：

[http://magnus-k-karlsson.blogspot.com/2010/02/viewingmonitoring-your-log4j-generated.html](http://magnus-k-karlsson.blogspot.com/2010/02/viewingmonitoring-your-log4j-generated.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-15T10:13:54.097

从 2.4 版开始，Log4j 现在支持通过属性文件进行配置。请注意，属性语法与 Log4j 1 中使用的语法不同。

```
appender.server.type=Socket
appender.server.name=server
appender.server.port=4445
appender.server.host=localhost
appender.server.reconnectDelayMillis=10000

...

rootLogger.appenderRef.server.ref = server 
```

您可能对`reconnectionDelayMillis`. 在[logging-log4j-dev 邮件列表档案](https://mail-archives.apache.org/mod_mbox/logging-log4j-dev/201702.mbox/%3CF98E89D5-CCD5-46E0-A38E-7141421101DE@gmail.com%3E)中，我发现：

> 文档（[https://logging.apache.org/log4j/2.x/manual/appenders.html#SyslogAppender](https://logging.apache.org/log4j/2.x/manual/appenders.html#SyslogAppender)）仍然将参数列为“reconnectionDelayMillis”，但代码现在显然在寻找“reconnectDelayMillis”。我将更改我的配置以使用新名称，但我想我会指出断开连接，因为它让我有点困惑。谢谢 - 山姆

这可能已经修复/统一了，但我没有在较新版本的 log4j 中检查过。如果您遇到任何问题，请尝试使用`reconnectDelayMillis`.

更详细的示例可以在[**Configuration with Properties**](https://logging.apache.org/log4j/2.x/manual/configuration.html#Properties)下找到。

# jquery - 如何根据值包含隐藏元素？

> ID：11795164
> 
> 赞同：4
> 
> 时间：2012-08-03T11:49:18.807
> 
> 标签：jquery, input, hide

如果按钮包含值'foo'，我正在尝试隐藏它。

下面的代码不起作用，我不明白为什么：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Example</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
  $(document).ready(function () {
     $("button:contains('foo')").parent('div').hide();
  });
</script>

</head>
<body>

  <div class="prod_buy">
    <input name="Add to Cart" type="submit" class="rb green txtbutton" value="foo">
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T11:52:36.163

```
<script type="text/javascript">
$(document).ready(function () {
   $("input[value=foo]").closest('div').hide();
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:51:59.330

看起来你没有匹配一个按钮，它是一个提交输入。

使用这样的东西：

```
$("input[type=submit][value*=foo]").parent('div').hide(); 
```

这`value*`意味着它将像“包含”一样匹配，例如它将匹配一个名为“foobar”的按钮。见这里：[http ://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

工作示例：http: [//jsfiddle.net/e4ar9/](http://jsfiddle.net/e4ar9/)

# java - DatagramPacket.getAddress().getHostName() 阻塞了我的线程

> ID：11795167
> 
> 赞同：0
> 
> 时间：2012-08-03T11:49:23.150
> 
> 标签：java, android, sockets, broadcast, datagram

我有一个从设备接收数据的线程。当涉及到线路时`myDatagramPacket.getAddress().getHostName()`，它会停止 5-6 秒，然后继续。

当我尝试像“192.168.1.163”这样的硬编码ip时，它正在不停地工作。

我怎么解决这个问题？

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:16:51.700

那条线看起来像是在执行*Reverse DNS Lookup*，那自然会很慢。

您可以尝试在不查找的情况下修改逻辑，或者如果不可能，请尝试缓存调用结果（这样您就不必多次支付时间）。

要仅获取发送者的 IP，请仅使用 myDatagramPacket.getAddress()，它会返回一个代表 IP 的 InetAddress（而不是在其上调用 getHostName()，而是使用 getHostAddress() 和/或 toString()）。

# mysql - 如何格式化这个 mysql 查询

> ID：11795173
> 
> 赞同：0
> 
> 时间：2012-08-03T11:49:53.493
> 
> 标签：mysql, select, where

我所拥有的是一个表 statistieken，其中包含一个 ip、浏览器信息的哈希、访问的 url 和时间戳中的最后访问日期。

我可以从不同来源编译的内容导致了这个查询，唯一的问题是这个查询需要永远（9 分钟）才能在一个大约 15000 行的表上完成，所以这个查询效率很低。

我想我会以错误的方式解决这个问题，但我找不到像样的帖子或教程如何使用选择的结果作为获得我想要的结果的基础。

我只需要概述表中与在过去 12 小时内访问超过 25 页的返回结果的哈希相匹配的每个条目。

```
CREATE TABLE IF NOT EXISTS `statsitieken` (
  `hash` varchar(35) NOT NULL,
  `ip` varchar(24) NOT NULL,
  `visits` int(11) NOT NULL,
  `lastvisit` int(11) NOT NULL,
  `browserinfo` text NOT NULL,
  `urls` text NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

这是我到目前为止尝试编译的查询。

```
SELECT * FROM `database`.`statsitieken` WHERE hash in (SELECT hash FROM `database`.`statsitieken`
where `lastvisit` > unix_timestamp(DATE_SUB(
                                    NOW(),INTERVAL 12 hour
                                    )
                                )
group by hash
having count(urls) > 25
order by urls) 
```

我需要这个在适当的时间内编译，比如 < 1 秒，在我看来这应该是可能的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:55:05.253

我建议尝试这个修改后的查询。子查询现在只计算一次，而不是为返回的每条记录运行：

```
SELECT s.*
FROM `database`.`statsitieken` s, (SELECT *
FROM `database`.`statsitieken`
WHERE `lastvisit` > UNIX_TIMESTAMP(DATE_SUB(NOW(),INTERVAL 12 HOUR))
GROUP BY hash
HAVING COUNT(urls)>25) tmp
WHERE s.`hash`=tmp.`hash`
ORDER BY s.urls 
```

确保您在以下字段上有索引：

*   `hash`加快`GROUP BY`和`WHERE`
*   `urls`加快`ORDER BY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:55:20.223

派生表`INNER JOIN`比子查询快。试试这个优化的查询：

```
SELECT *
FROM statsitieken a
    INNER JOIN (SELECT hash
                FROM statsitieken
                WHERE lastvisit > unix_timestamp(DATE_SUB(
                                    NOW(),INTERVAL 12 hour
                                    )
                ) b
        ON a.hash = b.hash
GROUP BY a.hash
HAVING COUNT(urls) > 25
ORDER BY urls; 
```

为了更好地执行此选择查询，您应该将索引添加为：

```
ALTER TABLE statsitieken ADD KEY ix_hash(hash);

ALTER TABLE statsitieken ADD KEY ix_lastvisit(lastvisit); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:56:17.110

```
WHERE hash in (SELECT hash FROM `database`.`statsitieken`
where `lastvisit` > unix_timestamp(DATE_SUB(
                                    NOW(),INTERVAL 12 hour
                                    )
                            ) 
```

你在同一个表中“子查询”（我不知道是否存在那个词：P，'做一个子查询'），为什么不：

```
where `lastvisit` > unix_timestamp(DATE_SUB(
                                    NOW(),INTERVAL 12 hour
                                    ) 
```

直接做吗？

# animation - 如何获得实时更新的图形线

> ID：11795174
> 
> 赞同：0
> 
> 时间：2012-08-03T11:49:55.787
> 
> 标签：animation, graph, matplotlib, live

我正在尝试创建一个程序，它读取一些随机生成的数据，xax 和 yax 列表，当它以动画方式读取它们时，它们会实时显示。这是代码：

```
from matplotlib.pylab import *
import time, random

ion()
xax = []
yax = []

axes
for j in range (0,20):
    xax.append(j)
    r = random.randrange(0, 20)
    yax.append(r)
maxx = max(xax)
maxy = max(yax)
print maxx, maxy
axis([0,maxx,0,maxy])
line, = plot(xax[0],yax[0])
draw()
for i in xax:
    print i, yax[i]
    line.set_ydata(yax[i])
    draw() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:00:33.747

在对问题的评论和[聊天](https://chat.stackoverflow.com/transcript/message/4787710#4787710)中的讨论之后，尝试以下更新一行，为循环的每次迭代扩展它。原始代码中的问题是一次只绘制一个点，因此显然没有在屏幕上绘制线。`numpy.append`在下文中，我使用(part of `matplotlib.pylab`)在循环的每次迭代中扩展 x 和 y 数据。

```
from matplotlib.pylab import *
import time, random

ion()

xax = range(0, 20)
yax = [random.randrange(0, 20) for _ range(0, 20)]

axes()

xlim(xmax=max(xax))
ylim(ymax=max(yax))

line, = plot(xax[0], yax[0])

for i, x in enumerate(xax):
    line.set_ydata(append(line.get_ydata(), yax[i]))
    line.set_xdata(append(line.get_xdata(), x))
    draw()
    time.sleep(1.) 
```

# google-app-engine - google.appengine.api.search 光标被忽略

> ID：11795178
> 
> 赞同：0
> 
> 时间：2012-08-03T11:50:16.193
> 
> 标签：google-app-engine

根据我使用 GAE 1.7 Python SDK 的经验，新搜索 API 的光标功能不起作用。我可以从 search() 中取回光标，但是在第二次调用中传递它会产生一个不排除我已经收到的结果。我修改了[http://code.google.com/p/google-app-engine-samples/source/browse/trunk/search/python/search_demo.py](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/search/python/search_demo.py)如下所示：

```
 query_options = search.QueryOptions(
        limit=2,
        sort_options=sort_opts,
        cursor=search.Cursor())
    query_obj = search.Query(query_string=query, options=query_options)
    results = search.Index(name=_INDEX_NAME).search(query=query_obj)
    if results.number_found > len(results.results):
        query_obj = search.Query(query_string=query, options=search.QueryOptions(cursor=results.cursor))
        results = search.Index(name=_INDEX_NAME).search(query=query_obj) 
```

有没有人发现这可以按您的预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:08:35.193

[这是使用最新 SDK http://code.google.com/p/googleappengine/issues/detail?id=8254](http://code.google.com/p/googleappengine/issues/detail?id=8254)修复的错误

# php - 在magento中通过javascript传递php对象

> ID：11795179
> 
> 赞同：2
> 
> 时间：2012-08-03T11:50:18.317
> 
> 标签：php, magento, magento-1.5

这是我正在尝试做的事情：

在“app/design/frontend/default/default/template/catalogsearch/advanced/form.phtml”我有以下php语句

```
<?php $x=$this->getStoreCategories(); ?> 
```

如果我没记错 $x 将是一个对象，当我在 php 中显示它时，我可以查看它。

我需要将此对象转换为 javascript 对象 (JSON)，因为我需要使用 jQuery Ajax 传递它

但是当我执行

```
<script>
var obj = JSON.parse('<?php echo json_encode($x) ?>');
alert(obj.toSource());
</script> 
```

警报给了我一个空对象

谁能帮帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:28:18.740

你可以这样做；

```
<script>
var obj = <?php echo json_encode($x) ?>;
</script> 
```

当页面输出时，您的 JSON 对象将在页面中。还是我错过了您想做的事情？

# unix - 水平合并两个文件并格式化

> ID：11795181
> 
> 赞同：4
> 
> 时间：2012-08-03T11:50:21.053
> 
> 标签：unix, paste

我有两个文件如下：

文件_1

```
Austin
Los Angeles
York
San Ramon 
```

文件_2

```
Texas
California
New York
California 
```

我想将它们水平合并如下：

```
Austin       Texas
Los Angeles  California
York         New York
San Ramon    California 
```

我可以通过使用`paste`命令进行水平合并，但是格式变得混乱。

```
Austin Texas
Los Angeles California
York New York
San Ramon California 
```

我意识到这`paste`是按预期工作的，但是有人可以指出我正确的方向以正确格式化。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T11:54:27.863

paste 在“合并”文件时使用选项卡，因此您可能必须对文件进行后处理并删除带有空格的选项卡：

```
paste File_1 File_2 | awk 'BEGIN { FS = "\t" } ; {printf("%-20s%s\n",$1,$2) }' 
```

结果：

```
Austin              Texas
Los Angeles         California
York                New York
San Ramon           California 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:53:42.527

首先，您必须检查最长行中的字符数。比您可以使用 fmt 将第一个文件中的行填充到更大的长度。使用粘贴完成它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T12:12:47.390

如果您对字段宽度有所了解，可以执行以下操作：

```
IFS_BAK="$IFS"
IFS=$'\t'
paste file_1 file_2 \
| while read city state; do 
    printf "%-15s %-15s\n" "$city" "$state"
  done
IFS="$IFS_BAK" 
```

或者这个较短的版本：

```
paste file_1 file_2 | while IFS=$'\t' read city state; do
  printf "%-15s %-15s\n" "$city" "$state"
done 
```

或使用以下`column`工具`bsdmainutils`：

```
paste file_1 file_2 | column -s $'\t' -t 
```

# windows - 在 Windows 中读取 PCI 设备内存寄存器

> ID：11795183
> 
> 赞同：1
> 
> 时间：2012-08-03T11:50:24.033
> 
> 标签：windows, kernel, driver, pci, pci-bus

我需要读取位于系统 PCI 总线上的 AHCI 控制器的 HBA 内存寄存器。我有一个驱动程序，我可以使用它读取系统中所有 PCI 设备的配置空间（使用 ReadConfig 和 WriteConfig）。通过这个，我能够获得 ABAR 内容，它是 AHCI 设备配置空间中的最后一个 BAR。现在，我需要读取这些内存寄存器的值。有谁知道如何做到这一点？PCITree 能够做到这一点，所以我知道这是可能的。

我是驱动程序开发的新手，所以任何帮助将不胜感激...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:24:38.480

AFAIK您可以在Windows NT/2000/XP/2003/Vista/7和2008下使用winio访问内存。请参考[链接](http://www.internals.com/)并单击“winio”下载使用。其中包含示例和源代码，您可以轻松地将其转移到您的应用程序中。

# ruby - 以编程方式运行 minitest

> ID：11795184
> 
> 赞同：0
> 
> 时间：2012-08-03T11:50:25.303
> 
> 标签：ruby, minitest, pry

我有这个代码（在撬）：

```
class Hash
  def invert_by_array
    each.with_object({}) {|(key,value), obj|
      value.each do |element|
        obj[element] = key
      end
    }
  end
end

require 'minitest/spec'

describe "invert_by_array" do
  it "should use the array element as keys" do
    {'foo' => %w(bar baz)}.invert_by_array.must_equal({'bar' => 'foo', 'baz' => 'foo'})
  end
end 
```

如何从编辑底部运行测试 - 基本上将上面的内容复制/粘贴到 readline？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:55:14.303

您可以通过调用来调用跑步者`MiniTest::Unit.runner.run`

```
class Hash
  def invert_by_array
    each.with_object({}) {|(key,value), obj|
      value.each do |element|
        obj[element] = key
      end
    }
  end
end

require 'minitest/spec'

describe "invert_by_array" do
  it "should use the array element as keys" do
    {'foo' => %w(bar baz)}.invert_by_array.must_equal({'bar' => 'foo', 'baz' => 'foo'})
  end
end

MiniTest::Unit.runner.run 
```

# c# - 取消 ToolStripDropDownButton 下拉菜单

> ID：11795185
> 
> 赞同：0
> 
> 时间：2012-08-03T11:50:39.913
> 
> 标签：c#, winforms, toolstripdropdown

我需要在 DropDownOpening 事件中以编程方式取消 ToolStripDropDownButton 的下拉菜单。但是我无法找到实现这一目标的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:11:55.927

您可以在开场事件中什么也不做，或者禁用控件，这样我就无法与之交互以生成开场事件：

```
toolStripDropDownButton.Enabled = false 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.enabled](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.enabled)

# mysql - 如何让mysql服务器停止作为slave启动

> ID：11795187
> 
> 赞同：0
> 
> 时间：2012-08-03T11:50:43.207
> 
> 标签：mysql, ubuntu, replication, mysqldump, master-slave

我有一个运行 mysql 5.1 的 ubuntu 服务器。以前我将此服务器设置为从属服务器进行复制。现在我为这台服务器切换卷轴，我不再需要它成为奴隶了。 **问题是**现在，每次重新启动 mysql 时，它都会进入从属模式，当我运行这样的命令时：

```
mysql < mysql_dump_file.sql 
```

我收到此错误：

```
ERROR 1198 (HY000) at line 22: This operation cannot be performed with a running slave; run STOP SLAVE first 
```

当然，我可以`stop slave;`在 mysql 中运行命令并解决问题，但是当我重新启动服务器时，问题又回来了。

以前对于从属配置，我在 my.cnf 文件中添加了以下几行：

```
port=3306
log-bin
server-id=2
master-host=(ip of master)
master-user=repl
master-password=slavepass
master-port=3306
replicate_do_db=(db to replicate) 
```

现在我已经删除了所有这些行并重新启动，数据库仍然自动启动到从模式。我正在尝试配置 mysql，使其不会以从属模式启动。我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:07:09.500

您可以使用[RESET SLAVE 从](http://dev.mysql.com/doc/refman/5.0/en/reset-slave.html)启动重新启动从站或停止复制，只需手动删除 master.info 和 relay-log.info 文件。

```
RESET SLAVE; 
```

它删除 master.info 和 relay-log.info 文件，所有中继日志文件，并启动一个新的中继日志文件。

# javascript - 使用 JavascriptCallbackBehavior 时如何抛出带有 HTTP 错误代码的 WebFaultException？

> ID：11795188
> 
> 赞同：1
> 
> 时间：2012-08-03T11:50:44.967
> 
> 标签：javascript, wcf, rest, cross-domain, jsonp

我在客户端有一个 .Net 服务器应用程序（持有 WCF REST JSONP 服务）和一个 javascript 应用程序。

为了避免来自 javascript 端**的跨域**调用，我们`JSONP`用于通信。为了让我们使用来自服务器端的 javascript 回调更轻松，我们正在使用`JavascriptCallbackBehavior`：WCF 将所有 JSON 响应包装在回调函数中。

```
[JavascriptCallbackBehavior(UrlParameterName = "$callback")]
[ServiceBehavior(...)]
public class MySvcREST : ISvcREST
{
   public bool SvcMethod()
   {
      throw new WebFaultException<string>("ERROR!", HttpStatusCode.InternalServerError);
   }
} 
```

如果我使用上面的代码，我将从我的服务中得到以下响应：

```
HTTP/1.1 200 OK
Content-Length: 31
Content-Type: application/x-javascript
Server: Microsoft-HTTPAPI/1.0
Date: Fri, 03 Aug 2012 11:43:26 GMT

angular.callbacks._1("ERROR!",500); 
```

**EDIT1：**实际上即使我删除`JavascriptCallbackBehavior`并保留默认`callback`名称，我也会有类似的效果，这不是很好。

我真的想得到**HTTP 500**错误代码，而不是里面有错误的**HTTP 200 OK**。

如何解决我的问题，或者是否有另一种方法可以从 WCF 服务获取 JSONP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T08:32:41.273

不幸的是，我的问题没有得到任何答复，但我发现以下有点有用的链接：http: [//msdn.microsoft.com/en-us/library/ee816916.aspx](http://msdn.microsoft.com/en-us/library/ee816916.aspx)。

我知道**这种行为是设计**使然......虽然从 javascript 方面（jquery / angular js），在撰写本文时，没有办法读取第二个返回的参数（在我的情况下，http 错误代码）。

所以，最后我不确定除了解决方法之外是否还有其他解决方案。现在我们返回一个`CustomResult`包含自定义错误代码和消息的 a。

当这些网络技术不能相互融合时，它们真是令人失望……您被迫采用如此多的变通方法。

# php - PHP PDO 连接到 MySQL 失败，mysql_connect 工作正常

> ID：11795198
> 
> 赞同：6
> 
> 时间：2012-08-03T11:51:33.487
> 
> 标签：php, mysql, pdo

我正在尝试使用 PDO 连接到远程 MySQL 数据库，但它失败并出现错误：

```
Connection failed: SQLSTATE[28000] [1045] Access denied for user 'my_user'@'some.ip.address' (using password: YES) 
```

这就是我尝试连接的方式：

```
$dsn = "mysql:host=sql.my_domain.nazwa.pl;dbname=my_db;port:3307";
$user = "my_user";
$password = "my_password";

try {
    $this->db = new PDO($dsn, $user, $password);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
} 
```

它失败了。但是这样：

```
mysql_connect('sql.my_domain.nazwa.pl:3307', 'my_user', 'my_password'); 
```

工作正常。

任何人都知道 PDO、它的配置、我设置的参数或者这个特定的服务器 (nazwa.pl) 有什么问题吗？

[已解决] 好的，这很简单（但也很难注意到...）语法错误，它应该是a`=`而不是`:`.`port``dsn`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T11:57:52.070

尝试更换：

```
$dsn = "mysql:host=sql.my_domain.nazwa.pl;dbname=my_db;port:3307"; 
```

和

```
$dsn = "mysql:host=sql.my_domain.nazwa.pl;dbname=my_db; port=3307"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:44:38.250

如果您尝试连接到其他服务器上的数据库，请确保您的 Sql 服务器允许您从托管代码的位置的 IP 地址访问特定端口（在您的案例 3307 中）。如果两台服务器相同，请尝试使用 localhost 或 127.0.0.1

# javascript - 悬停时的 IE8 过渡

> ID：11795202
> 
> 赞同：1
> 
> 时间：2012-08-03T11:51:54.327
> 
> 标签：javascript, jquery, html, css, internet-explorer-8

我想在这个例子中使用 IE 8 的悬停过渡效果：http: [//jsfiddle.net/evcL2/10/](http://jsfiddle.net/evcL2/10/) 根据**[这个网站](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/DXTidemo/DXTidemo.htm)**（仅在 ie 上工作）这是可能的（使用 trasntion 选项和淡入淡出效果）但我无法使用它。有人可以用那个脚本帮我一点吗，对我来说，只有在背景颜色上悬停时才有这种过渡是很重要的。

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T12:01:14.557

IE8 不支持 CSS3 过渡。您将不得不使用 JavaScript 补间来伪造它，或者满足于 IE9 支持。无论如何，IE8 用户不值得拥有漂亮的网站 :-)

但是，如果您处于创建 IE 兼容的任务的尴尬境地，请查看[MSDN 对 Filters and Transitions 的介绍](http://msdn.microsoft.com/en-us/library/ms532847(v=vs.85).aspx#Transitions)。似乎即使是特定于 IE 的过渡过滤器也需要 JavaScript 才能工作，因此您不妨选择使用[jQuery.animate](http://api.jquery.com/animate/)的正确 JavaScript 解决方案。使用一个小插件，它可以为颜色设置动画。[这是 JSFiddle 上的一个示例](http://jsfiddle.net/Gu9XQ/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:31:42.110

由于某种原因，您建议的网站无法在我的浏览器中正确呈现。但是，我认为您可能错误地解决了这个问题。我会为此使用[jQuery 的 $.animate() 函数](http://api.jquery.com/animate/)，因为它是跨浏览器的，并且可以为许多 css 属性的渐变设置动画。

# android-layout - 硬编码字符串“Test”，应使用@string 资源

> ID：11795206
> 
> 赞同：5
> 
> 时间：2012-08-03T11:51:59.267
> 
> 标签：android-layout

这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView

        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/ref"    
     />

    <TextView

        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Test"
     />

</LinearLayout> 
```

我不想在第二个测试中使用字符串。我应该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T11:56:01.043

您是否使用硬编码的字符串没有问题。如果您想了解更多信息，可以查看：[https ://stackoverflow.com/a/8743887/1517996](https://stackoverflow.com/a/8743887/1517996)

字符串.xml

```
<resources>
    <string name="Test">Test</string> 
<resources> 
```

并使用它 lin 布局文件，如

```
<TextView

    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/Test"
 /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-12T17:12:16.140

如果您不希望此**警告**专门在此视图上打扰您，可以使用 tools:ignore xml 属性来抑制它。

```
<TextView
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:text="@string/Test"
  tools:ignore="HardcodedText" /> 
```

请注意，您还可以将其添加到父元素以禁止对其子元素发出警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-13T15:24:40.723

您可以使用硬编码值，这很好。如果要删除警告，可以转到 Eclipse -> 首选项 -> Android -> Lint 错误检查并查找“硬编码文本”。将其设置为忽略然后应用。

# linux - 在 Unix 中启动和停止 SAS Server 9.2

> ID：11795208
> 
> 赞同：2
> 
> 时间：2012-08-03T11:52:07.457
> 
> 标签：linux, unix, sas

我也是 SAS 服务器的新手。所以如果我的问题有点幼稚，请不要介意。

我想知道如何在 Unix 平台上启动/停止 SAS ver9.2 服务器。？？？

搜索谷歌，但在过去的两三个小时内我没有找到任何东西。

这是我目前唯一的信息。如果您想获得更多信息来回答，请告诉我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:55:33.690

在您环境中的每台 SAS 服务器计算机上运行*sas.servers start*和*sas.servers stop*。这些脚本的位置取决于 SAS 部署配置目录树的安装位置。例如，在我的安装中，它是*/opt/ebiedieg/Lev1/sas.servers*。

如果您只有一台机器安装，那么您只有 1 个脚本可以运行。如果你有一个多机安装，那么你应该以正确的顺序启动/停止 SAS 服务，依次在每台机器上运行 sas.server。这将类似于 1) SAS 元数据层 2) SAS 计算层 3) SAS 中间层启动和反向停止。

sas.servers 脚本不会启动/停止您拥有的任何 Web 应用程序服务器（例如 JBoss、WebLogic、WebSphere），因此您需要使用适当的脚本/命令，具体取决于您拥有的是哪一个（如果有）。

您可以在 SAS 9.2 Intelligence Platform: System Administration Guide, Second Edition 的[Using the sas.servers Script on UNIX or z/OS to Start or Stop All Servers](http://support.sas.com/documentation/cdl/en/bisag/64088/HTML/default/viewer.htm#a003280355.htm)页面上找到相关文档。

# ruby-on-rails - Rails 3：如何使用原始文件名进行上传？

> ID：11795211
> 
> 赞同：0
> 
> 时间：2012-08-03T11:52:16.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file-upload, uploadify, carrierwave

我正在按照本教程上传和编码视频：[http ://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder](http://www.nickdesteffen.com/blog/video-encoding-with-uploadify-carrierwave-and-zencoder)

我的模型中有以下行：

```
Zencoder::Job.create({:input => "s3://mybucket/uploads/videos/#{model.id}/video.mp4" 
```

我需要将此行末尾的“video.mp4”替换为我上传的文件的名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:47:45.907

CarrierWave 的[SanitizedFile](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/sanitized_file.rb)有一个[`original_filename`](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/sanitized_file.rb#L39)方法可以用来访问上传文件的原始、未修改的名称。

```
Zencoder::Job.create({:input => "s3://mybucket/uploads/videos/#{model.id}/#{original_filename}" 
```

# iphone - 如何在数据库中使用登录有效值选择。第一个值选择正确登录，但第二个值选择登录不正确

> ID：11795217
> 
> 赞同：0
> 
> 时间：2012-08-03T11:52:35.867
> 
> 标签：iphone, sqlite, nsstring, nslog

```
- (BOOL)addloginprofile:(NSString *)username andPassword:(NSString *)password
{
    //XYZAppDelegate *appDelegate = (XYZAppDelegate *)[UIApplication sharedApplication].delegate;
    //const char *sql = "select Name='%@',EnterPassword='%@' from ProfileTable";
    NSString *sql = [[NSString alloc] initWithFormat:@"select Name='%@',EnterPassword='%@' from ProfileTable",username,password];

    //NSString *sql = [NSString stringWithFormat:@"select Name='%@',EnterPassword='%@' from ProfileTable",username,password];

    NSLog(@"sql statment %@",sql);

    sqlite3_stmt *statment;
    if(sqlite3_prepare_v2(database, [sql UTF8String] , -1, &statment, NULL) == SQLITE_OK)
    //if(sqlite3_prepare_v2(database, [sql UTF8String] , -1, &statment, NULL) == SQLITE_OK)
    {
        if(sqlite3_step(statment) == SQLITE_ROW)
        {
            NSString *username=[[NSString alloc] initWithUTF8String:(const char *)       sqlite3_column_text(statment,0)];

            NSString *password=[[NSString alloc]initWithUTF8String:(const char *)sqlite3_column_text(statment,1)];
//          NSString *username = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statment, 1)];
//          NSString *password=[NSString stringWithUTF8String:(char *)sqlite3_column_text(statment, 2)];           
            NSLog(@"User name %@,",username);
            NSLog(@"password %@",password);
            if ([username isEqualToString:@"0"]&&[password isEqualToString:@"0"]) {
                return NO;
            }
            else return YES;

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:03:02.813

我认为查询格式不正确，应该是这样`@"select * from ProfileTable where Name='%@' and EnterPassword='%@'",username,password`的。

# android - 如何使用 Java 的 google api 客户端库发送带有 JSON 数据的 POST 请求？

> ID：11795219
> 
> 赞同：7
> 
> 时间：2012-08-03T11:52:42.113
> 
> 标签：android, json, http-post, httprequest, google-api-java-client

我正在尝试使用 google api 客户端库发送发布请求，但无法成功。

这是我正在使用的片段

```
UrlEncodedContent urlEncodedContent = new UrlEncodedContent(paramMap);   //paramMap contains email and password keypairs
HttpRequest request = httpRequestFactory.buildPostRequest(new GenericUrl(Constants.PHP_SERVICE_BASE_PATH + mPath) , urlEncodedContent);
String response = request.execute().parseAsString(); 
```

我没有得到预期的回应。我认为这是因为没有以正确的格式发送帖子参数，即电子邮件和密码。我需要以**JSON 格式**发送它们。

**注意**：我没有将图书馆用于谷歌网络服务。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-20T10:00:56.187

我使用 Map 作为 JSON 的输入。该映射是 post 请求使用的 JsonHttpContent 的输入。

```
Map<String, String> json = new HashMap<String, String>();
json.put("lat", Double.toString(location.getLatitude()));
json.put("lng", Double.toString(location.getLongitude()));
final HttpContent content = new JsonHttpContent(new JacksonFactory(), json);
final HttpRequest request = getHttpRequestFactory().buildPostRequest(new GenericUrl(url), content); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T11:37:36.660

UrlEncodedContent 用于发布 HTTP 表单内容（Content-Type：application/x-www-form-urlencoded）。如果 Content-Type 是 application/json 您可能应该使用

[http://code.google.com/p/google-http-java-client/source/browse/google-http-client/src/main/java/com/google/api/client/http/json/JsonHttpContent。爪哇](http://code.google.com/p/google-http-java-client/source/browse/google-http-client/src/main/java/com/google/api/client/http/json/JsonHttpContent.java)

# c# - 代码合同：如何在属性获取器中满足“确保未经证实”？

> ID：11795224
> 
> 赞同：4
> 
> 时间：2012-08-03T11:52:54.920
> 
> 标签：c#, code-contracts

我有以下界面：

```
[ContractClass(typeof(MyObjectContract))]
public interface IMyObject
{
    int CountOfItems { get; }
} 
```

以下合同：

```
[ContractClassFor(typeof(IMyObject))]
public abstract class MyObjectContract
{
    int IMyObject.CountOfItems
    {
        get
        {
            Contract.Ensures(Contract.Result<int>() > 0);
            return 1;
        }
    }
} 
```

以下实现：

```
public class MyObject : IMyObject
{
    private IEnumerable someEnumerable .... 

    public int CountOfItems
    {
        get
        {
            return this.someEnumerable.Count();
        }
    }
} 
```

现在我收到警告说`ensures unproven: Contract.Result<int>() > 0`

我应该如何证明计数大于零？我不想在 getter 中抛出异常，我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T21:26:48.130

正如其他人所提到的，由于基类库（.NET Framework）和静态检查器的限制，您无法静态证明`IEnumerable<T>.Count()`返回大于 0 的值。但是，您可以向静态检查器表明您*假设*该事实是真实的。这是您使用基类库或静态检查器无法证明的语句解决所有此类合同问题的方法。

```
public int CountOfItems
{
    get
    {
        int count = this.someEnumerable.Count();
        Contract.Assume(count > 0);
        return count;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:04:29.220

我认为，您无法在静态中证明这一点。
`Enumerable.Count<TSource>`扩展方法没有定义任何关于它的返回值的契约（例如，这个方法应该为无限序列返回什么？）。

因此，CC stais checker 会就此向您发出警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:39:20.363

似乎向`ContractInvariant`实现添加方法可以解决警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T16:23:08.127

假设您的代码是正确的。它有效，您只是试图让代码合同系统认识到这一事实。

这特别意味着调用`CountOfItems`的实例`MyObject`将始终返回大于零的值。它不会抛出异常，也不会返回零或更小的值。

这意味着`someEnumerable`将分配给某个对象，并且 `someEnumerable.Count()`对于引用的任何对象，都将始终返回大于零的值。这些事实在任何时候都是真实的（因为对何时`CountOfItems`可以调用没有限制。

`MyObject`这意味着存在一个包含这些事实的对象不变量（无论它是否在代码中明确说明） 。并且由于您的代码是正确的（假设），因此分配的`MyObject`保证的实现`someEnumerable`及其计数始终大于零。

因此，为了满足合同`CountOfItems`，合同系统需要了解这些不变量以及如何确保它们。

# sql-server - 如何在 SQL Server 中使用数据透视表

> ID：11795227
> 
> 赞同：1
> 
> 时间：2012-08-03T11:53:18.133
> 
> 标签：sql-server, pivot, transpose

我有这样的桌子

```
ID                      TimeStamp                   Statement                                   Action
8082837636688904709     2012-07-23 16:03:25.000     UPDATE Skill name="French" SET state="1"    1
8082837636688904709     2012-07-23 16:03:25.000     UPDATE Skill name="French" SET state="2"    2 
```

我想像这样转置它：

```
ID                      TimeStamp                   UndoStatement                                  RedoStatement
8082837636688904709     2012-07-23 16:03:25.000     UPDATE Skill name="French"  SET state="1"      UPDATE Skill name="French"  SET state="2" 
```

这是我的查询：

```
SELECT ID, Timestamp, [UndoStatement], [RedoStatement]
FROM (
 SELECT ID, TimeStamp, Statement, Action From Transactions) a

PIVOT
(
    MAX(Statement) FOR Statement IN ([UndoStatement], [RedoStatement])
) as pvt 
```

这就是我得到的

```
ID                      UndoStatement   RedoStatement
8082837636688904709     NULL            NULL
8082837636688904709     NULL            NULL 
```

谁能告诉我在做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:57:08.283

如果我没看错，你想围绕 Action 进行旋转 - 1 是撤消，2 是重做。

```
SELECT ID, Timestamp, [1] [UndoStatement], [2] [RedoStatement]
FROM (
 SELECT ID, TimeStamp, Statement, Action From Transactions) a
PIVOT
(
    MAX(Statement) FOR Action IN ([1], [2])
) as pvt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:45:28.923

如果您有几个可能未知的项目需要转置，那么您可以`PIVOT`动态地转置。

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Action) 
                    from Transactions
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ID, Timestamp, ' + @cols + ' from 
             (
                select ID, TimeStamp, Statement, Action
                from Transactions
            ) x
            pivot 
            (
                MAX(Statement)
                for Action in (' + @cols + ')
            ) p '

execute(@query) 
```

此代码将确定在运行时要转换的列。这样做的好处是，如果您有超过 2 列，则不必更新代码。

# java - 如何将双精度值更改为四位小数点值

> ID：11795230
> 
> 赞同：1
> 
> 时间：2012-08-03T11:53:24.347
> 
> 标签：java, android

> **可能重复：**
> [将双精度数舍入到小数点后 2 位有效数字](https://stackoverflow.com/questions/2808535/round-a-double-to-2-significant-figures-after-decimal-point)

我有这样的经纬度，

```
x1: 11.955165229802363
y1: 79.8232913017273 
```

我需要转换 4 个小数点

```
x1 = 11.9552
y1 = 79.8233 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T11:55:48.607

尝试

```
double roundTwoDecimals(double d)
{
    DecimalFormat twoDForm = new DecimalFormat("#.####");
    return Double.valueOf(twoDForm.format(d));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T11:59:15.940

```
Math.ceil(x1* 10000) / 10000 
```

将 10000 替换为 10^N，其中 N 是点后的位数。如果点后有 4 位数字，则不应丢失精度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:57:48.387

试试这个

```
String.format("%.4f", 11.955165229802363) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T11:59:28.750

假设您想要舍入/截断小数，并且速度不是一个重要的考虑因素，您希望使用`BigDecimal(BigInteger unscaledVal, int scale)`设置`scale`为 4。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:55:44.130

```
DecimalFormat dtime = new DecimalFormat("#.####"); 
                                           ^^^^
x1= Double.valueOf(dtime.format(x1)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T11:59:31.890

```
float round = Round(num,4);
System.out.println("Rounded data: " + round);
}

public float Round(float Rval, int Rpl) {
float p = (float)Math.pow(10,Rpl);
Rval = Rval * p;
float tmp = Math.round(Rval);
return (float)tmp/p;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T11:59:47.733

```
 double d1 = Double.valueOf(x1);
    double d2 = Double.valueOf(x1);
    DecimalFormat df = new DecimalFormat("#.####");
    System.out.print("x1 = "+df.format(d1));
    System.out.print("x2 = "+df.format(d2)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T12:01:44.213

如果您只想显示这样的值，请使用 DecimalFormat 将值转换为字符串，然后显示该值。

如果你真的想把它四舍五入，你可以通过乘以 10000，四舍五入，然后再除来实现。但是，我建议不要这样做，因为并非所有十进制数都可以用浮点格式正确表示。变化是你会得到你已经拥有的东西。

如果您确实希望将四位数字用作内部状态，请改用 BigDecimal。它配备齐全，可以做你想做的事。

# c# - Parallel.For 不适用于 monodevelop 2.8.6.3+dfsg-2

> ID：11795245
> 
> 赞同：0
> 
> 时间：2012-08-03T11:54:34.080
> 
> 标签：c#, mono, monodevelop

我对monodevelop很陌生。并试图研究 MONO 上的 .Net Parallelism。正如我在之前的帖子中看到的，Parallelism(TPL) 并没有在 MONO 上完全实现。

任何人都可以让我了解更多关于我的问题的信息，如果允许在 MONO 上执行 Parallelism(TPL)，那么请让我知道如何使用它。

希望很快从某个人那里来。

谢谢和问候， Veeresh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T21:11:49.477

你没有提到你遇到的问题，你能解释一下吗？

MonoDevelop 只是一个 IDE，它不是实现 Parallel 的，而是 Mono。那么你安装了哪个版本的 Mono？TPL 框架从 2.6 开始就包含在内，根据[2.10 版的发行说明，该版本](http://www.mono-project.com/Release_Notes_Mono_2.10#Parallel_Framework_Updates#Major_Highlights)已经有了一些改进。

[因此，如果您没有使用 2.10.x，请升级，如果问题仍然存在，请先升级到不稳定版本 2.11.3 或更高版本，然后再在http://bugzilla.xamarin.com/](http://bugzilla.xamarin.com/)中提交错误之前进行测试

# javascript - 当语句在函数内部变为真时的js事件

> ID：11795246
> 
> 赞同：0
> 
> 时间：2012-08-03T11:54:45.753
> 
> 标签：javascript, jquery, vimeo

好的，我正在使用 vimeo api，它为我的函数提供了一些包含我的视频播放百分比的数据。我想用它来查找视频何时结束，然后“重新打开灯”。这是我的代码：

```
 function onplayProgress(data, id) {
$('#bottomtag').text(data.percent*100 + '% played');

    if ( data.percent == '1') {
$('body').animate({ backgroundColor: 'gray' }, 3000);
    }

} 
```

#bottomtag 只是为了调试，但它正确地显示了进度并最终达到 100% 并保持在那里。所以我不明白为什么我的动画没有发生。我真的很密集吗？我觉得在语义上应该有一个“何时”而不是“如果”，但那不存在。

=========编辑=========

正如 Zeta 所指出的，我可以使用一个 Finish 事件。但是，我希望我的“灯”在 99% 的播放时亮起，我也想知道为什么我的代码不起作用。我试过了~

`if ( data.percent == '0.990')`

〜它仍然无法正常工作。关于此函数的调用，它与 Vimeo api 挂钩，如下所示：

`player.addEvent('playProgress', onplayProgress`);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:59:17.740

[API](http://developer.vimeo.com/player/js-api)提供了一个事件`finish`。使用它来检查您的视频是否已完成播放。

### 编辑：99%后如何点亮灯？

这有点棘手，但是，仍然很容易实现：

```
function onplayProgress(data, id) {
    $('#bottomtag').text(data.percent*100 + '% played');
    if ( data.percent >= 0.990 && $('body').data("has-been-animated") !== true) {
        $('body').animate({ backgroundColor: 'gray' }, 3000);
        $('body').data("has-been-animated",true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:07:53.913

如果`data.percent = '1.00'`（作为字符串）的值，那么您的 if 将失败，因为`'1' != '1.00'`

# php - PHP 按原样打印内容

> ID：11795247
> 
> 赞同：1
> 
> 时间：2012-08-03T11:54:46.317
> 
> 标签：php, printing

我有一个文本区域

```
<textarea id=view-body ></textarea> 
```

当点击来自

```
<a href='#' onclick='popup_view(this)' data-body ='". $rows['body'] ."' >view</a>

<script language="JavaScript">
function popup_view(e) 
{       
    var body = e.getAttribute('data-body');         
    el = document.getElementById("view-body");  
    el.innerHTML = body;    
}
</script> 
```

我希望按原样打印我的 textarea 的内容。例如 onclick 发送

```
<i>Wired</i> 
```

我的文本区域打印输出

```
<i>Wired</i> 
```

但不是，应该是这样的

*有线*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:13:36.907

Javascript innerHTML 函数将文本转换为 html 形式。

您可以使用 textContent 函数，如下所示

[http://jsfiddle.net/yWgn7/](http://jsfiddle.net/yWgn7/)

在 jquery 中，您可以使用 .text() 函数，但我不确定 textContent 的兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:58:23.967

尝试使用 div 而不是 textarea。如果我正确理解这一点，则 textarea 正在显示`<i></i>`并且您不希望它显示。Textarea 不能自然地处理 html 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:12:48.313

您必须使用 htmlentities 函数将特殊字符替换为 html 实体。

```
data-body = "<? php echo htmlentities($rows[' body ']);?>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:58:43.723

HTML 的内置`<textarea>`元素不允许您对其内容进行样式设置。你需要的是某种[所见即所得](http://en.wikipedia.org/wiki/HTML_editor#Online_editors)的编辑器来做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:58:51.423

您可以用任何富文本编辑器 [http://ckeditor.com/替换您的文本区域](http://ckeditor.com/)

# android - 仅在一个方向上将片段用作 ListView 标头

> ID：11795254
> 
> 赞同：3
> 
> 时间：2012-08-03T11:55:28.887
> 
> 标签：android, android-layout, android-fragments

我正在尝试实现一个支持以下两个方向的活动：

```
+--------------------------+      +-------------+---------------------------+
|                          |      |             |                           |
|                          |      |             |                           |
|                          |      |             +--------           --------+
|   Header View            |      |             |                           |
|   (from fragment)        |      |             |                           |
|                          |      | Fragment    +--------           --------+
+--------------------------+      |             |                           |
|                          |      |             |          ListFragment     |
|                          |      |             |                           |
+---------         --------+      |             +--------           --------+
|         ListFragment     |      |             |                           |
|                          |      |             |                           |
+---------         --------+      +-------------+---------------------------+
|                          |
|                          |
+--------------------------+ 
```

如果我到处使用布局 XML 中定义的片段，这并不难。挑战来自我希望标题片段与 ListFragment 纵向滚动的事实。为此，我自己扩充了 XML 并将其添加为标题视图。这也有效，直到我旋转设备（从纵向到横向，反之亦然），此时，我得到以下异常：

```
Caused by: java.lang.IllegalArgumentException: Binary XML file line #3: Duplicate id 0x7f06002d, tag null, or parent id 0x0 with another fragment for com.example.MyHeaderFragment
    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:275)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558) 
```

我认为这是因为我在一个方向手动加载片段并从另一个方向的布局自动加载。我想不出办法解决这个问题。

我想到的一种解决方案是在没有标题视图的 XML 中定义纵向布局（标题不会随 ListFragment 滚动），然后在创建视图后立即将视图从 ListFragment 上方移动到标题视图中，但这没有奏效。

这种设计注定要失败还是有人有聪明的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:05:40.000

我通过`id`从片段中删除 s 解决了这个问题。现在`FragmentManager`不再将它们视为相同，因此不会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:06:28.863

您可以在更改方向之前从列表中删除标题视图。

`adapter.removeHeader(view)`在适当的地方（`onStop`或）使用`onDestroy`，我认为事情会如你所愿。

# c# - 没有实现的函数签名在类定义中意味着什么？

> ID：11795257
> 
> 赞同：0
> 
> 时间：2012-08-03T11:55:30.713
> 
> 标签：c#, c#-4.0, signature

不幸的是，我不能展示代码，但故事是这样的：我应该了解我们在工作中使用的程序是如何工作的。我追踪了从用户界面元素到函数内部的数据流。但是现在，在类定义中，我陷入了困境。我正在跟踪的数据被传递给一个函数。在类中，有一行带有该函数的函数签名，但没有实现。

我该如何寻找实现？所有代码（除了微软的）都是内部开发的，应该驻留在项目中，但 Go To Definition 只会让我回到签名。

我们正在使用 C# 和 .Net 4.0。

这是行：

```
public abstract class SomethingDoer : SomethingElse
    // ...
    protected abstract void DoSomething(T1 param1, T2 param2, T3 param3); 
```

现在我正在通过查找对SomethingDoer 的引用来寻找实现类，但不幸的是断点没有命中。我有错误的类还是我错过了一些关于抽象函数的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T11:57:46.843

没有代码，这真的很难回答。没有实现的函数定义通常是接口或抽象。接口只能有**定义**，而抽象可以混合两者：

```
public interface ISomeInterface {
    void SomeMethod();
}

public abstract SomeAbstractClass {
    public abstract void SomeMethod();

    public void AwesomeMethod() {
        // I do awesome things; look at my method body!
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:07:27.707

如果你真的在看源代码，它可能是

1.  一种`abstract`方法
2.  一种`partial`方法
3.  一种`extern`方法

在第一种情况下，实现在从此类派生的类中。在第二种情况下，实现在此类定义的另一个“部分”中，可能在另一个文件中。在第三种情况下，实现位于正在导入的某个（本机）DLL 中。

另一种可能性是您实际上并没有查看源代码，而只是查看了从 C# 项目文件中的程序集引用生成的元数据。

那么，您在该方法中看到了哪些关键字`abstract`、`partial`或`extern`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:56:43.140

这意味着您只编译了没有源的类。可能是一些DLL？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T11:58:17.763

你可能在看一个界面吗？

接口具有定义的功能，但没有实现。它用于表明它们存在并且必须符合规范。

您不能发布示例代码并更改措辞以供我们查看吗？

# javascript - 使用 JavaScript 在数组中查找最近的日期

> ID：11795266
> 
> 赞同：15
> 
> 时间：2012-08-03T11:56:12.797
> 
> 标签：javascript, arrays, search

我有一个包含天数的数组。每一天都是一个对象，例如：

`{day_year: "2012", day_month: "08", day_number: "03", day_name: "mon"}`

我还使用以下方法为每一天对象添加了时间戳属性：

```
function convertDays() {
    var max_i = days.length;
    for(var i = 0; i < max_i; i++) {
        var tar_i = days[i];
        tar_i.timestamp = new Date(tar_i.day_year, tar_i.day_month, tar_i.day_number);
    }
} 
```

数组中的日期是任意的，因此它们没有真正的逻辑。

现在我想找到最接近任何给定日期的两天。因此，如果包含天数的数组包含

*   2012 年 8 月 2 日
*   2012 年 8 月 4 日
*   2012 年 8 月 23 日

我搜索 2012 年 8 月 11 日，我希望它返回 2012 年 8 月 4 日和 2012 年 8 月 23 日。

我尝试使用另一个问题的答案，如下所示：

```
function findClosest(a, x) {
    var lo, hi;
    for(var i = a.length; i--;) {
        if(a[i] <= x && (lo === undefined || lo < a[i])) lo = a[i];
        if(a[i] >= x && (hi === undefined || hi > a[i])) hi = a[i];
    }
    return [lo, hi];
} 
```

但是，这会返回`unidentified`。

实现这一目标的最有效（最少处理器/内存密集型方式）是什么？

**编辑：“但是，这些结果如何“奇怪”？你能提供一个你的代码和数据的例子吗？**

我现在使用以下内容生成日期数组：

```
var full_day_array = [];
for(var i = 0; i < 10; i++) {
    var d = new Date();
    d.setDate(d.getDate() + i);
    full_day_array.push({day_year: d.getFullYear().toString(), day_month: (d.getMonth() + 1).toString(), day_number: d.getDate().toString()});
} 
```

奇怪的是，使用下面的代码，这仅适用于 10 个日期或更短的数组。每当我使用 11 个或更多日期的数组时，结果都会出乎意料。

例如：使用 15 个日期的数组，从 2012 年 8 月 6 日到 2012 年 8 月 21 日。如果我再打电话给`findClosest(full_day_array, new Date("30/07/2012");`你，你会期望它返回`{nextIndex: 0, prevIndex: -1}`。但是，它返回`{nextIndex: 7, prevIndex: -1}`。为什么？

```
function findClosest(objects, testDate) {
    var nextDateIndexesByDiff = [],
        prevDateIndexesByDiff = [];

    for(var i = 0; i < objects.length; i++) {
        var thisDateStr = [objects[i].day_month, objects[i].day_number, objects[i].day_year].join('/'),
            thisDate    = new Date(thisDateStr),
            curDiff     = testDate - thisDate;

        curDiff < 0
            ? nextDateIndexesByDiff.push([i, curDiff])
            : prevDateIndexesByDiff.push([i, curDiff]);
    }

    nextDateIndexesByDiff.sort(function(a, b) { return a[1] < b[1]; });
    prevDateIndexesByDiff.sort(function(a, b) { return a[1] > b[1]; });

    var nextIndex;
    var prevIndex;

    if(nextDateIndexesByDiff.length < 1) {
        nextIndex = -1;
    } else {
        nextIndex = nextDateIndexesByDiff[0][0];
    }
    if(prevDateIndexesByDiff.length < 1) {
        prevIndex = -1;
    } else {    
        prevIndex = prevDateIndexesByDiff[0][0];
    }
    return {nextIndex: nextIndex, prevIndex: prevIndex};
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-03T13:08:16.803

您可以轻松地将该[`sort`函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)与自定义比较器函数一起使用：

```
// assuming you have an array of Date objects - everything else is crap:
var arr = [new Date(2012, 7, 1), new Date(2012, 7, 4), new Date(2012, 7, 5), new Date(2013, 2, 20)];
var diffdate = new Date(2012, 7, 11);

arr.sort(function(a, b) {
    var distancea = Math.abs(diffdate - a);
    var distanceb = Math.abs(diffdate - b);
    return distancea - distanceb; // sort a before b when the distance is smaller
});

// result:
[2012-08-05, 2012-08-04, 2012-08-01, 2013-03-20] 
```

要仅在 之前或之后获取结果`diffdate`，您可以为此[过滤](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)数组：

```
var beforedates = arr.filter(function(d) {
    return d - diffdate < 0;
}),
    afterdates = arr.filter(function(d) {
    return d - diffdate > 0;
}); 
```

* * *

如果您有包含`{the_date_object: new Date(...)}`对象的自定义数组，则需要调整排序算法

```
 var distancea = Math.abs(diffdate - a.the_date_object);
    var distanceb = Math.abs(diffdate - b.the_date_object); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-03T12:09:14.193

如果您使用对象数组 `Date`而不是自定义结构，则可以在 O(N) 中轻松实现：

```
var testDate = new Date(...);
var bestDate = days.length;
var bestDiff = -(new Date(0,0,0)).valueOf();
var currDiff = 0;
var i;

for(i = 0; i < days.length; ++i){
   currDiff = Math.abs(days[i] - testDate);
   if(currDiff < bestDiff){
       bestDate = i;
       bestDiff = currDiff;
   }   
}

/* the best date will be days[bestDate] */ 
```

如果数组已排序，则可以使用二进制搜索在 O(log N) 中实现。

### 编辑：“在日期*之前*和*之后*找到最接近的匹配项至关重要”

```
var testDate = new Date(...);

var bestPrevDate = days.length;
var bestNextDate = days.length;

var max_date_value = Math.abs((new Date(0,0,0)).valueOf());

var bestPrevDiff = max_date_value;
var bestNextDiff = -max_date_value;

var currDiff = 0;
var i;

for(i = 0; i < days.length; ++i){
   currDiff = testDate - days[i].the_date_object;
   if(currDiff < 0 && currDiff > bestNextDiff){
   // If currDiff is negative, then testDate is more in the past than days[i].
   // This means, that from testDate's point of view, days[i] is in the future
   // and thus by a candidate for the next date.
       bestNextDate = i;
       bestNextDiff = currDiff;
   }
   if(currDiff > 0 && currDiff < bestPrevDiff){
   // If currDiff is positive, then testDate is more in the future than days[i].
   // This means, that from testDate's point of view, days[i] is in the past
   // and thus by a candidate for the previous date.
       bestPrevDate = i;
       bestPrevDiff = currDiff;
   }   

}
/* days[bestPrevDate] is the best previous date, 
   days[bestNextDate] is the best next date */ 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-03T13:10:20.243

[Zeta 的](https://stackoverflow.com/users/1139697/zeta)回答非常好，但是如果您想知道任一方向上最近的 N 个对象，我对您如何处理这个问题很感兴趣。这是我的刺：

```
var objects = [
    { day_year: "2012",
      day_month: "08",
      day_number: "02"
    },
    { day_year: "2012",
      day_month: "08",
      day_number: "04"
    },
    { day_year: "2012",
      day_month: "08",
      day_number: "23"
    }
];

var testDate = new Date('08/11/2012'),
    nextDateIndexesByDiff = [],
    prevDateIndexesByDiff = [];

for(var i = 0; i < objects.length; i++) {
    var thisDateStr = [objects[i].day_month, objects[i].day_number, objects[i].day_year].join('/'),
        thisDate    = new Date(thisDateStr),
        curDiff     = testDate - thisDate;

    curDiff < 0
        ? nextDateIndexesByDiff.push([i, curDiff])
        : prevDateIndexesByDiff.push([i, curDiff]);
}

nextDateIndexesByDiff.sort(function(a, b) { return a[1] < b[1]; });
prevDateIndexesByDiff.sort(function(a, b) { return a[1] > b[1]; });

console.log(['closest future date', objects[nextDateIndexesByDiff[0][0]]]);
console.log(['closest past date', objects[prevDateIndexesByDiff[0][0]]]); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-07-06T18:50:30.353

你可以这样试试

```
var dates = [
'July 16, 1995 03:24:00',
'Aug 18, 1995 03:24:00',
'August 19, 1995 03:24:00',
'September 17, 1995 03:24:00',
'September 14, 1995 03:24:00',
'August 18, 1995 03:24:00',
'July 16, 1995 03:24:00',
'December 15, 1995 03:24:00',
'July 13, 1995 03:24:00',
]

var temp = dates.map(d => Math.abs(new Date() - new Date(d).getTime()));
var idx = temp.indexOf(Math.min(...temp));
console.log(dates[idx]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-03T16:30:36.683

这是我们使用的：

此函数在*数组*中查找与 dateToCompare 具有最接近日期（名为*dateParam*）的*项目*。

对于每个*项目*[ *dateParam* ]，返回与 dateToCompare 最接近的数组元素

```
getClosestDateInArray (array, dateParam, dateToCompare) {
  let minDiff = null;
  let mostAccurateDate = array[0];
  array.map((item) => {
    const diff = Math.abs(moment(dateToCompare).diff(item[dateParam], 'minutes', true));
    if (!minDiff || diff < minDiff) {
      minDiff = diff;
      mostAccurateDate = item
    }
  });
  return mostAccurateDate;
} 
```

**此解决方案需要 momentJS 库**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-06T10:36:30.607

无论日期数组有多长，这都有效：

```
function newFindClosest(dates, testDate) {
    var before = [];
    var after = [];
    var max = dates.length;
    for(var i = 0; i < max; i++) {
        var tar = dates[i];
        var arrDate = new Date(tar.day_year, tar.day_month, tar.day_number);
        // 3600 * 24 * 1000 = calculating milliseconds to days, for clarity.
        var diff = (arrDate - testDate) / (3600 * 24 * 1000);
        if(diff > 0) {
            before.push({diff: diff, index: i});
        } else {
            after.push({diff: diff, index: i});
        }
    }
    before.sort(function(a, b) {
        if(a.diff < b.diff) {
            return -1;
        }
        if(a.diff > b.diff) {
            return 1;
        }
        return 0;
    });

    after.sort(function(a, b) {
        if(a.diff > b.diff) {
            return -1;
        }
        if(a.diff < b.diff) {
            return 1;
        }
        return 0;
    });
    return {datesBefore: before, datesAfter: after};
} 
```

# android - Android 多微调器

> ID：11795271
> 
> 赞同：3
> 
> 时间：2012-08-03T11:56:41.867
> 
> 标签：android, android-spinner

我想开发一个带有三个微调器的 android 应用程序。这三个微调器将包含有关汽车的信息，即品牌、型号和发动机。

1.  因此，选择第一个微调器（品牌）后，应根据所选品牌添加第二个微调器（型号）的内容。
2.  接下来，将选择第二个微调器，然后添加第三个微调器（引擎）。

我在 google 和 stackoverflow 上用关键字“Android Multi Spinners”和“Android listener for spinners”搜索了将近一周，但我仍然没有找到解决方案。

> 这是我对代码的想法的链接
> 
> *   [多重微调器的简单疑问](https://stackoverflow.com/questions/8150834/multiple-spinners-simple-doubts)
> *   [微调器侦听器不起作用](https://stackoverflow.com/questions/11227951/spinner-listener-not-working)

所以，我有两个版本的源代码，但它们都没有工作。（编辑：现在工作）

**对于第一个版本**

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;

public class AddCarActivity extends Activity {

    private Spinner spnBrand, spnModel, spnEngine;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_car);

        addItemsOnSpnBrand();   
    }

    public void addItemsOnSpnBrand() {
        spnBrand = (Spinner) findViewById(R.id.spnBrand);
        List<String> list = new ArrayList<String>();

        //Get Brand Database and Add to List

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spnBrand.setAdapter(dataAdapter);       

        addListenerOnSpnBrandItemSelection();
    }

    public void addListenerOnSpnBrandItemSelection() {
        spnBrand = (Spinner) findViewById(R.id.spnBrand);       
        spnBrand.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                addItemOnSpnModel(parent.getItemAtPosition(pos).toString());
            }

            public void onNothingSelected(AdapterView<?> parent) {
                return;
            }
        });
    }

    public void addItemOnSpnModel(String inBrand) {
        spnModel = (Spinner) findViewById(R.id.spnModel);
        List<String> list = new ArrayList<String>();

        //Get Model Database and Add to List

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spnSeries.setAdapter(dataAdapter);      

        addListenerOnSpnModelItemSelection();
    }

    public void addListenerOnSpnModelItemSelection() {
        spnModel = (Spinner) findViewById(R.id.spnModel);
        spnModel.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                addItemOnSpnEngine(parent.getItemAtPosition(pos).toString());               
            }

            public void onNothingSelected(AdapterView<?> parent) {
                return;
            }
        });
    }

    public void addItemOnSpnEngine(String inModel) {
        spnEngine = (Spinner) findViewById(R.id.spnEngine);
        List<String> list = new ArrayList<String>();

        //Get Engine Database and Add to List

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spnEngine.setAdapter(dataAdapter);
    }
} 
```

**这是我的第二个版本**

```
public class AddCarActivity extends Activity implements OnItemSelectedListener {

    private Spinner spnBrand, spnModel, spnEngine;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_car);

        addItemsOnSpnBrand();
    }

    public void onItemSelected(AdapterView<?> parent, View view, int position,long arg3) {
        int id = parent.getId();
        switch (id) 
        {
            case R.id.spnBrand:
                addItemOnSpnModel(parent.getItemAtPosition(position).toString()); break;
            case R.id.spnModel:
                addItemOnSpnEngine(parent.getItemAtPosition(position).toString()); break;
        }
    }

    public void onNothingSelected(AdapterView<?> arg0) {
        return;
    }

    public void addItemsOnSpnBrand() {
        spnBrand = (Spinner) findViewById(R.id.spnBrand);
        List<String> list = new ArrayList<String>();

        //Get Brand Database and Add to List

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spnBrand.setAdapter(dataAdapter);

        spnBrand.setOnItemSelectedListener(this);
    }

    public void addItemOnSpnModel(String inBrand) {
        spnModel = (Spinner) findViewById(R.id.spnModel);
        List<String> list = new ArrayList<String>();

        //Get Model Database and Add to List

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spnModel.setAdapter(dataAdapter);

        spnModel.setOnItemSelectedListener(this);
    }

    public void addItemOnSpnEngine(String inModel) {
        spnEngine = (Spinner) findViewById(R.id.spnEngine);
        List<String> list = new ArrayList<String>();

        //Get Engine Database and Add to List

        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spnEngine.setAdapter(dataAdapter);
    }
} 
```

感谢所有试图帮助我的人。我刚刚在重新测试回答 Hip Hip Array 的代码时发现了问题。我在 addListenerOnSpnModelItemSelection() 中使用了错误的变量。我错误地使用 spnBrand 而不是 spnModel。现在，这两个版本都工作了，所以我更正了它们，希望它们能帮助其他尝试在 android 中使用 multi-spinners 的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:01:44.230

有点啰嗦，但试试看

```
Public class HomePage extends Activity implements OnClickListener, OnItemSelectedListener{

int orientation;
DataBaseHelper myDbHelper;
Cursor c3, c2;
SimpleCursorAdapter adapterData;
int index = 0;
Spinner s[] = new Spinner[5];
TableRow row;

@SuppressWarnings("static-access")
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
myDbHelper = new DataBaseHelper(this);

//-----------Customized Adapter for Specialties----Database binded//
String[] columns2 =  {myDbHelper.KEY_ID, myDbHelper.KEY_TITLE};
String table2 = myDbHelper.DB_TABLE_NAME;
c2 = myDbHelper.getHandle().query(table2, columns2, "type = 'SuperTab'", null, myDbHelper.KEY_TITLE, null, myDbHelper.KEY_TITLE);
startManagingCursor(c2);
String[] from = new String[]{myDbHelper.KEY_TITLE};
int[] to = new int[]{android.R.id.text1};
adapterData =
      new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c2, from, to );
adapterData.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );

//-----------Customized Adapter for Location-----Database binded--//
    String[] columns3 =  {myDbHelper.KEY_ID, myDbHelper.KEY_LOCATION};
    String table3 = myDbHelper.DB_TABLE_NAME_LOCATION;
    c3 = myDbHelper.getHandle().query(table3, columns3, null, null, myDbHelper.KEY_LOCATION, null, null);
    startManagingCursor(c3);
    String[] from3 = new String[]{myDbHelper.KEY_LOCATION};
    int[] to3 = new int[]{android.R.id.text1};
    SimpleCursorAdapter adapterData3 =
          new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c3, from3, to3 );
        adapterData3.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
//--------------------------------------------------------------//

Spinner spinner = (Spinner) findViewById(R.id.spinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
        this, R.array.specialty_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinner.setAdapter(adapterData);      

Spinner spinner2 = (Spinner) findViewById(R.id.spinner2);
adapter = ArrayAdapter.createFromResource(
        this, R.array.office_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner2.setAdapter(adapterData3);

Button search = (Button)this.findViewById(R.id.Search);
search.setOnClickListener(this);

Button searchNearMe = (Button)this.findViewById(R.id.Near_Me);
searchNearMe.setOnClickListener(this);

spinner.setOnItemSelectedListener(this);  

orientation = getResources().getConfiguration().orientation;

s[index] =  new Spinner(this);
// s[index].setOnItemSelectedListener(this);
row = new TableRow(this);
}

@SuppressWarnings("static-access")

public void onItemSelected(AdapterView<?> parent, View view, int pos,
    long id) {
TextView tv = (TextView)this.findViewById(R.id.spinnerText2);   

Log.w("ID: ", "index=" + adapterData.getItemId(pos) + " " + c2.getCount() + " " + id + " callee " + view);

String sql = "sql" +                     id                                                                 ;

c2 = myDbHelper.getHandle().rawQuery(sql, null);
Log.w("ID Adapter: ", "index=" + adapterData.getItemId(pos) + " " + c2.getCount());

int thisOrientation = getResources().getConfiguration().orientation;

if (thisOrientation != orientation) {
    return;
}       

//--------sets hierarchy spinner to corresponding database-----//
String[] from = new String[]{myDbHelper.KEY_TITLE};
int[] to = new int[]{android.R.id.text1};
SimpleCursorAdapter adapterDataNew =
      new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, c2, from, to );
adapterDataNew.setDropDownViewResource( android.R.layout.simple_spinner_dropdown_item );
Log.w("Adapter Data New", "index=" + adapterDataNew.getItemId(pos) + " " + adapterDataNew.getCount());
//------------------------------------------------------------//

//-----------------Table Row for Landscape mode---------------//

TableLayout tl = (TableLayout)this.findViewById (R.id.Table);
TableLayout.LayoutParams tlp = new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT); 
tlp.weight = 1;
tlp.setMargins(20, 15, 20, 0);
row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));       

//------------------------------------------------------------//

//------------------find Relative Layout by ID----------------//
RelativeLayout relative = (RelativeLayout)this.findViewById(R.id.rlay);
RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(
        android.view.ViewGroup.LayoutParams.FILL_PARENT, 
        android.view.ViewGroup.LayoutParams.WRAP_CONTENT);
p.addRule(RelativeLayout.BELOW, R.id.spinner);
p.setMargins(15, 5, 15, 5);
//------------------------------------------------------------//

if (orientation != getResources().getConfiguration().ORIENTATION_LANDSCAPE) {
    if (c2.getCount() > 0) {                
        relative.removeView(s[index]);
        relative.addView(s[index], android.view.ViewGroup.LayoutParams.MATCH_PARENT, 
                android.view.ViewGroup.LayoutParams.MATCH_PARENT);
        s[index].setVisibility(view.VISIBLE);
        s[index].setPromptId(R.string.Sub);
        s[index].setAdapter(adapterDataNew);
        s[index].setLayoutParams(p);
        tv.setPadding(10, 50, 10, 0);

        Log.w("Index value ", " " + index);

    }
    else {
        s[index].setVisibility(view.GONE);
        relative.removeView(s[index]);
        tv.setPadding(0, 0, 0, 0);
    }
}
else {
        if (c2.getCount() > 0) {
            tl.removeView(row); 
            row.removeView(s[index]);                   
            Log.w("Row Parent " + row.getParent()," tl child " + tl.getChildCount());
            tl.addView(row, index + 4 , tlp);
            row.addView(s[index]);
            Log.w("Row Parent After Add" + row.getParent()," tl child After Add" + tl.getChildCount());
            row.setVisibility(view.VISIBLE);                    
            s[index].setVisibility(view.VISIBLE);
            s[index].setPromptId(R.string.Sub);
            s[index].setAdapter(adapterDataNew);

            Log.w("ID: Landscape mode", "index=" + adapterDataNew.getItemId(pos) + " " + adapterDataNew.getCount());
        }   
        else {
            s[index].setVisibility(view.GONE);
            row.setVisibility(view.GONE);
            row.removeView(s[index]);
            tl.removeView(row);                 
        }

}

}

public void onNothingSelected(AdapterView<?> arg0) {        

}

@Override
public void onClick(View v) {
EditText et1 = (EditText)this.findViewById(R.id.entry);
EditText et2 = (EditText)this.findViewById(R.id.entry2);
String lastName = et1.getText().toString();
String firstName = et2.getText().toString();
if (lastName.length() == 0) {
    lastName = "%";
}
if (firstName.length() == 0) {
    firstName = "%";
}
Bundle bundle = new Bundle();
bundle.putString("LastName", lastName);
bundle.putString("FirstName", firstName);
switch(v.getId()) {
    case R.id.Search:
        Intent i = new  Intent(this, Search.class);
        i.putExtras(bundle);
        startActivity(i);
        c2.close();
        c3.close();
        break;
    case R.id.Near_Me:
        Intent j = new  Intent(this, SearchNearMe.class);
        startActivity(j);

}       
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:14:31.960

可以说，您有 3 个微调器 spinner_1、spinner_2 和 spinner_3 然后：

```
spinner_1.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {

                            if(spinner_1.getSelectedItem().equals("Spin1-Item-1")){
                            {
                                  // set adapter to spinner_2 here for "Spin1-Item-1" selected
                            }
                            else if(spinner_1.getSelectedItem().equals("Spin1-Item-2"))
                            {
                                 // set adapter to spinner_2 for "Spin1-Item-2" not selected
                            }
                            else 
                            {
                                 // set adapter to spinner_2 for "Spin1-Item-3" not selected
                            }
            }    
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {                
            }
});
spinner_2.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int position, long arg3) {

                            if(spinner_2.getSelectedItem().equals("Spin2-Item-1")){
                            {
                                  // set adapter to spinner_3 here for "Spin2-Item-1" selected
                            }
                            else if(spinner_2.getSelectedItem().equals("Spin2-Item-2"))
                            {
                                 // set adapter to spinner_3 for "Spin2-Item-2" not selected
                            }
                            else 
                            {
                                 // set adapter to spinner_3 for "Spin2-Item-3" not selected
                            }
            }    
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {                
            }
}); 
```

# sql - SQL - 如果结果集包含多于一行，则返回最新（id）结果

> ID：11795273
> 
> 赞同：0
> 
> 时间：2012-08-03T11:56:54.223
> 
> 标签：sql, db2

如果查询将返回多个结果，我需要在我的选择中获得最新（id）行的条件。(IBM db2)

IE：

```
ID--NUM1--COUNTRY--NUM2

1--123--SE--123

2--123--US--123 
```

我不想返回两行，而是希望返回第 2 行。

**编辑：**

我的查询现在看起来像这样：

```
SELECT   LET1.INSTANCE_ID, COU.CODE, SUP1.SUPPLIERID, PAR.PARTNUMBER 

FROM     TABLES

WHERE    TABLEJOIN_CONDITIONS

AND      TABLE.COLUMN IN ('11994', '12345' and so on) 
```

但是这个查询可以返回重复的行。

喜欢：

```
ID--NUM1--COUNTRY--NUM2

1--123--SE--11994 (11994 appearing twice, then I want the latest row which is row number 2)

2--123--US--11994 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:01:55.050

对 id 进行降序排序，只获取第一条记录。

我不是最新的 db2 语法，但类似：

```
SELECT id, num1, country, num2
FROM SomeTable
ORDER BY ID DESC
FETCH FIRST 1 ROW ONLY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:24:27.717

我对哪些数字使它“独特”有点困惑，但如果你只想要`ID`每个`NUM1, NUM2`组合的最新信息，那么你可以这样做：

```
SELECT *
FROM (
    SELECT A.*, 
           ROW_NUMBER() OVER (PARTITION BY NUM1, NUM2 ORDER BY ID DESC) AS RN
    FROM YOUR_TABLE A
)
WHERE RN = 1 
```

子选择将为每个`num1`,`num2`组合分配一个行号，按 , 排序`ID`，并且只选择该组合的第一行。

# ajax - Ajax简单登录

> ID：11795279
> 
> 赞同：1
> 
> 时间：2012-08-03T11:57:10.947
> 
> 标签：ajax, function, return

我有这个简单的 Ajax 代码，我的问题只是，data.logged 返回什么，以及我需要在logged.php 文件中有什么......

我是ajax新手，抱歉这个愚蠢的问题......

```
$.ajax('logged.php', {
                                data: {
                                    login:  login,
                                    pass:   pass
                                },
                                success: function(data)
                                {
                                    if (data.logged)
                                    {
                                        setTimeout(function() {
                                            document.location.href = 'index.php'
                                        }, 2000);
                                    }
                                    else
                                    {
                                        setTimeout(function() {
                                        formLogin.clearMessages();
                                        displayError('Utilizador ou password errados');
                                        }, 2000);
                                    }
                                },
                                error: function()
                                {
                                    formLogin.clearMessages();
                                    displayError('Error while contacting server, please try again');
                                }
                         }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:01:21.557

在客户端，添加`dataType : 'json'`对我有用。

```
$.ajax('handler.php', {
  data: {
    login:  login,
    pass:   pass
  },
  dataType : 'json',
  success: function(data)
  {
    //code here
  }

  //more code here
} 
```

然后在服务器端：

```
$user = $_GET['login'];
$pass = $_GET['pass'];
$result = array();
if( /* login logic here */) {
    $result['logged'] = 'true';
} else {
    $result['logged'] = false;
}
header('Content-type: application/json');
echo json_encode($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:00:33.007

这是一个[jQuery AJAX 请求，它需要](http://jquery.com/)[JSON](http://jquery.com/)格式的 responseText 。在这种情况下，您的 PHP 文件返回的 JSON 似乎只需要一个属性`logged`，该属性将取决于登录是否成功`true`。`false`

# c - 将字符串放入C中的矩阵中

> ID：11795284
> 
> 赞同：0
> 
> 时间：2012-08-03T11:57:41.897
> 
> 标签：c, string, matrix

我需要将一个字符串（来自一个文件）放在一个矩阵中并打印出结果。我在理解这样做的正确方法方面存在一些问题：

```
#include <stdio.h>
#include <string.h>

int main (int argc, char *argv[])
{
    const int MAX = 50;
    char mat[MAX][MAX];
    char str[MAX];
    char word[MAX];
    int row = 0;
    int i = 0;

    FILE * fp;

    fp = fopen ("file.txt", "r");

    if (fp == NULL)
        printf ("Error!\n");

    while (fgets(str, MAX, fp) != NULL)
    {
        sscanf (str, "%s\n", word);

        strcpy(mat[i][0], word);

        row++;
    }

    for (i = 0; i <= row; i++)
    {
            puts(mat[i][0]);
    }

    return 0;
} 
```

我在不知不觉中做错了什么，但是……什么？

我有一个这样的文件：

```
One
Two
Three
Four
Five
Six
Hello 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:04:59.810

如果你用 编译它`gcc`，它会给你两个警告：每个警告都指向代码中的三个主要错误之一：

```
main.c: In function 'main':
main.c:24: warning: passing argument 1 of 'strcpy' makes pointer from integer without a cast
main.c:31: warning: passing argument 1 of 'puts' makes pointer from integer without a cast 
```

这些行号中的每一个 - 24 和 31 - 都是您正在使用的行`mat[i][0]`，它是一个字符，当您应该使用 时`mat[i]`，它是一个字符数组。修复这些，然后只有一个问题：在循环中使用`i`始终为 0 的。`while`使用`row`，随着行的进展而增加，程序应该完全按照设计工作。

为了改进程序，我还需要更改其他一些内容：`while`循环将字符串读取到一个缓冲区中，将其复制到第二个缓冲区中，然后将其复制到矩阵中；您可以直接将其扫描到矩阵中并完成它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:02:50.190

矩阵通常包含数字。你的包含`char`s。您的代码存在问题，但为了得到一个好的答案，您应该告诉我们您正在阅读的文件的格式（可能在您的问题中粘贴一个小文件）。

编辑：此文件包含由换行符分隔的字符串数组。您可以这样阅读（如果字符串中没有任何空格）：

```
 while (fscanf(fp, "%s\n", mat[row]) > 0)
    {
        row++;
    }

    for (i = 0; i <= row; i++)
    {
            printf( "%s\n", mat[i]);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T12:03:35.087

您应该将字符串复制到具有给定索引的矩阵元素。您应该将指向矩阵第一个元素的指针传递给 strcpy（即删除 [0]）。

执行以下操作：

```
while (fgets(str, MAX, fp) != NULL)
{
    sscanf (str, "%s\n", word);
    strcpy(mat[i], word);
    row++;
} 
```

编辑：打印字符串时也只使用 mat[i] 而不是 mat[i][0]。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:29:52.767

我对您的代码做了一些更改。首先让我们指出你的错误。

1.  `char mat[MAX][MAX];`不会满足您创建字符串矩阵的意图。

2.  没有必要做 read `sscanf (str, "%s\n", word);`。您已经从文件中读取了它。你可以直接使用它。

    ```
    #include <stdio.h>
    #include <string.h>
    #include <stdlib.h>

    int main (int argc, char *argv[])
    {
        const int MAX = 50;
        char *mat[MAX][MAX];
        char str[MAX];
        int i = 0, j = 0;
        int now = 0;

        FILE * fp;

        fp = fopen ("file.txt", "r");

        if (fp == NULL)
            printf ("Error!\n");

        while (fgets(str, MAX, fp) != NULL)
        {
            //sscanf (str, "%s\n", word);

            mat[i][j] = malloc(sizeof(str));

            strcpy(mat[i][j], str);

            j++;
            now++; //Tracks no.of elements 
            if(j == MAX)
            {
                 j = 0;
                 i++; //store in next row  
            }
        }
     for (i = 0; i < MAX; i++)
            for (j = 0; j < MAX; j++)
        {
                if(now == 0)
                    break;

                now--;

                puts(mat[i][j]);
                free(mat[i][j]);//Avoids memory leak        
        }

    return 0; 
    ```

    }

# java - java - 如何使用带有flex的java格式化时间？

> ID：11795293
> 
> 赞同：4
> 
> 时间：2012-08-03T11:57:53.623
> 
> 标签：java, apache-flex

我正在使用 flex String `Sat Aug 4 13:10:00 GMT+0530 2012`，所以在我的 Java 程序中，我正在像这样转换

```
try {
    String str_date = "Sat Aug 4 13:10:00 GMT+0530 2012";

    DateFormat formatter = new SimpleDateFormat(
            "EEE MMM dd HH:mm:ss zzzz yyyy");
    Date date = (Date) formatter.parse(str_date);
    System.out.println(date);
} catch (ParseException e) {
    System.out.println("Exception :" + e);
} 
```

但它给了

```
`Exception :java.text.ParseException: Unparseable date: "Sat Aug 4 13:10:00 GMT+0530 2012"` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-24T08:14:39.223

@Florent 的回答很好，但是自从写了 Java 之后，它就获得了新的日期/时间包。这是在 Java 8 及更高版本中执行此操作的一种方法：

```
import java.time.format.DateTimeFormatter;
import java.time.LocalDateTime;

// ...

String input = "Sat Aug 4 13:10:00 GMT+0530 2012";

DateTimeFormatter formatter = DateTimeFormatter.ofPattern("EEE MMM dd HH:mm:ss 'GMT'Z yyyy");
LocalDateTime dateTime = LocalDateTime.parse(input, formatter); 
```

然后该`dateTime`对象可用于日期/时间计算，或使用其他格式化程序呈现为字符串，或您需要执行的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:12:19.093

此格式化程序有效：

```
DateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss 'GMT'Z yyyy"); 
```

# python - 在 Python 中使用 LDAP 检测 Active Directory 用户帐户是否被锁定

> ID：11795294
> 
> 赞同：19
> 
> 时间：2012-08-03T11:57:54.393
> 
> 标签：python, active-directory, python-ldap

我正在使用 python 的 ldap 模块验证用户登录。当登录失败时，我得到一个 ldap.INVALID_CREDENTIALS 登录，但这可能是因为密码错误或帐户被锁定。帐户在第三次尝试后被锁定。

我想检测到该帐户已被锁定并将其报告给沮丧的用户，而不是相同的“无效登录”消息。

寻找我发现的解决方案：

*   AD 不使用 userAccountControl LOCKED 标志；
*   应该使用 lockoutTime 属性

我应该用来查找锁定用户的 LDAP 查询是：

```
(&(objectClass=user)(lockoutTime>=1)) 
```

或者对于特定用户：

```
(&(objectClass=user)(sAMAccountName=jabberwocky)(lockoutTime>=1)) 
```

但这不起作用，查询每次都没有返回结果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T05:28:18.823

in 值为零`lockoutTime`表示它没有被锁定。所以，你应该试试这个。

```
(&(objectClass=user)(!lockoutTime=0)) 
```

实际上，上面的查询仍然不是 100% 正确的。如果您阅读 MSDN 的细则，Microsoft 建议您将`Lockout-Time`属性添加到`Lockout-Duration`属性中，然后将其与当前时间进行比较。那是因为有一种叫做锁定持续时间的东西。一旦锁定持续时间过去，用户将自动解锁。归零`Lockout-Duration`意味着该帐户被永久锁定，直到管理员将其解锁。

请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676843(v=vs.85).aspx)

> 此属性值仅在帐户成功登录时才会重置。这意味着该值可能不为零，但该帐户并未被锁定。要**准确**确定帐户是否被锁定，您必须将 Lockout-Duration 添加到该时间并将结果与​​当前时间进行比较，同时考虑本地时区和夏令时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-04T21:07:10.747

`lockoutTime`是一个`<not set>`属性，所以最简单的方法是使用：

```
(&(objectClass=user)(lockoutDuration=*))) 
```

对于非空条目。

**更新：**

但是，当密码过期、密码需要更改等时也会设置此值。

所以需要过滤：

```
UserPrincipal userPrincipal = new UserPrincipal(context);
bool isLocked = userPrincipal.IsAccountLockedOut(); 
```

获取用户因违反密码策略而被锁定的情况，例如错误输入密码 5 次。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T20:01:21.153

此外，我发现不能保证 AD 中所有用户的 lockoutTime（至少在我们的配置中），但会在达到锁定尝试失败的次数时创建。因此，在检查锁定帐户时，还需要检查 None 或等效项。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-16T12:39:26.560

我还发现了这个属性标志列表：[如何使用 UserAccountControl 标志](https://support.microsoft.com/en-us/kb/305144)

```
SCRIPT  0x0001  1
ACCOUNTDISABLE  0x0002  2
HOMEDIR_REQUIRED    0x0008  8
LOCKOUT 0x0010  16
PASSWD_NOTREQD  0x0020  32
PASSWD_CANT_CHANGE 0x0040   64
ENCRYPTED_TEXT_PWD_ALLOWED  0x0080  128
TEMP_DUPLICATE_ACCOUNT  0x0100  256
NORMAL_ACCOUNT  0x0200  512
INTERDOMAIN_TRUST_ACCOUNT   0x0800  2048
WORKSTATION_TRUST_ACCOUNT   0x1000  4096
SERVER_TRUST_ACCOUNT    0x2000  8192
DONT_EXPIRE_PASSWORD    0x10000 65536
MNS_LOGON_ACCOUNT   0x20000 131072
SMARTCARD_REQUIRED  0x40000 262144
TRUSTED_FOR_DELEGATION  0x80000 524288
NOT_DELEGATED   0x100000    1048576
USE_DES_KEY_ONLY    0x200000    2097152
DONT_REQ_PREAUTH    0x400000    4194304
PASSWORD_EXPIRED    0x800000    8388608
TRUSTED_TO_AUTH_FOR_DELEGATION  0x1000000   16777216
PARTIAL_SECRETS_ACCOUNT 0x04000000      67108864 
```

您必须对属性进行二进制`userAccountControl`与`0x002`. 为了获得所有锁定（即禁用）的帐户，您可以使用

```
(&(objectClass=user)(userAccountControl:1.2.840.113556.1.4.803:=2)) 
```

对于操作员，`1.2.840.113556.1.4.803`请参阅[LDAP 匹配规则](https://msdn.microsoft.com/en-us/library/cc223367.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-03T11:23:18.930

使用此查询以获得最佳结果，

Get-ADUser -LDAPFilter "(&(objectCategory=Person)(objectClass=User)(lockoutTime>=1))" -Properties LockedOut

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-27T02:00:14.660

像这样做：

```
def islocked(self, user, basedn, conn):

    search_filter = "(&(objectCategory=Person)(objectClass=User)(lockoutTime>=1))"
    search_attribute = ["sAMAccountName"]

    try:
        conn.search(basedn,
                        search_filter,
                        attributes=search_attribute)
        results = conn.entries
    except ldap3.core.exceptions.LDAPException as e:
        print(e)
    lockedaccounts = [x['sAMAccountName'] for x in results]
    lockedaccounts = [str(x) for x in lockedaccounts]
    lockedaccounts = [x for x in lockedaccounts]
    if user in lockedaccounts:
        return True
    else:
        return False 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-21T08:23:30.740

(&(objectClass=user)(&(lockoutTime=*)(!(lockoutTime=0))))

将返回用户对象，并且具有名为 lockoutTime 的当前属性，该属性不等于 0。

# asp.net-mvc-3 - Teamcity 未部署 app_data 文件夹

> ID：11795297
> 
> 赞同：1
> 
> 时间：2012-08-03T11:58:05.293
> 
> 标签：asp.net-mvc-3, deployment, continuous-integration, teamcity, teamcity-7.0

我已将 Teamcity 配置为通过 Web 部署将我的 ASP.NET MVC 应用程序部署到我的生产服务器。

整个过程按预期工作，只是 teamcity**没有将我的文件部署在 app_data 文件夹中。**

如果我从 Visual Studio 部署我的站点，则会按预期创建文件夹，但不是通过 teamcity 部署创建的。

任何建议如何更新，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:01:25.063

确保 app_data 文件夹包含在您的项目中。将 teamcity 与 msdeploy 一起使用时，默认情况下不会部署项目中未包含的任何文件。右键单击它，看看它是否显示“包含在项目中”或“从项目中排除”。

还要确保您添加了 SVN（或您的 SVN 系统使用的任何内容），因为这是提交和忘记 SVN 的常见错误，因此它永远不会被部署。

最后，APP_Data 中的文件是设置为内容还是已编译或无。如果它们设置为 none，则不会部署。

一旦包含在 .csproj 文件中的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T11:28:18.693

查看

```
Build Configuration Settings->Parameters->System Properties -> system.ExcludeApp_Data 
```

值必须是`false`

# gwt - Juno上WindowBuilder Pro安装不完整

> ID：11795305
> 
> 赞同：1
> 
> 时间：2012-08-03T11:58:51.283
> 
> 标签：gwt, eclipse-juno

我已经使用 halp 菜单中的“安装新软件”选项从[这里](http://download.eclipse.org/windowbuilder/WB/release/R201206261200/4.2/)安装了 WindowBuilder Pro 包，但没有包含任何 GWT Designer 只有 Swing Designer、SWT Designer 和 WindowBuilder Engine。我在左上角没有这两个图标[这个人](http://www.youtube.com/watch?v=TUL3qEoZkR4)在 5:30 的角落 。我可以单独安装 GWT，还是有人有更好的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:26:04.730

之前安装 Eclipse SDK。是的。我在这里使用的是 Juno 4.2。请参阅插件页面上的指南。

[http://www.eclipse.org/windowbuilder/download.php](http://www.eclipse.org/windowbuilder/download.php)

# android - 创建具有水平和垂直滚动的两列 Activity

> ID：11795310
> 
> 赞同：-2
> 
> 时间：2012-08-03T11:58:56.580
> 
> 标签：android, xml, android-layout, android-tablelayout

我正在尝试`<TableLayout>`在 Android 中创建一个具有垂直和水平滚动的两列。

像这样：

![分屏滚动](../Images/7531b2d65f8240a3644f1a5dac207d69.png)

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:weightSum="1.0" >

       <LinearLayout
           android:layout_width="match_parent"
           android:layout_height=".90"
           android:layout_gravity="left"
           android:layout_weight=".35" >

            <TextView
                android:id="@+id/TextView04"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="#b0b0b0"
                android:text="column 1"
                android:textColor="#000000" />

        </LinearLayout> 

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_gravity="right"
            android:layout_weight=".65" > 

            <TextView
                android:id="@+id/TextView03"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="#a09f9f"
                android:text="column 2"
                android:textColor="#000000" />
        </LinearLayout>
    </TableRow>

</TableLayout> 
```

也许有人可以帮助我编写所有代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:35:05.033

[Android -- 如何允许水平和垂直滚动](https://stackoverflow.com/questions/5771455/android-how-to-allow-horizontal-and-vertical-scrolling)

所以你需要4个滚动视图。2个水平和2个垂直。

```
<LinearLayout>
<ScrollView>
<HorizontalScrollView >
Column1
</ScrollView>
</HorizontalScrollView >
<ScrollView>
<HorizontalScrollView >
Column2
</ScrollView>
</HorizontalScrollView >
</LinearLayout> 
```

并且线性布局必须是水平的。

# android - 从另一个活动更新活动

> ID：11795312
> 
> 赞同：1
> 
> 时间：2012-08-03T11:59:08.903
> 
> 标签：android, android-activity, refresh, restart

`EditTexts`我有扩展 PreferenceActivity 的 SettingsActivity，在设置中我可以指定我的 MainActivity 需要在屏幕上显示多少。我正在使用辅助类中的全局变量来实现这一点。我的 SettingsActivity 更改了全局变量的值，我的 MainActivity 读取该值并根据需要添加尽可能多的 EditText。

但是有一个问题，我的MainActivity`EditTexts`是在最小化后再最大化后才绘制新的，因为这个添加的方法`EditTexts`是在`onCreate`method. 我试图`public void addEditTexts(int amount)`从 SettingsActivity 访问我的方法（在 MainActivity 中）但没有成功。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:00:50.710

您应该将绘制 EditTexts 的方法放在`onResume()`;

```
@Override
protected void onResume() {
    super.onResume();

    // Your method here
} 
```

# tomcat - 没有为此应用程序配置工厂

> ID：11795314
> 
> 赞同：0
> 
> 时间：2012-08-03T11:59:09.963
> 
> 标签：tomcat, jsf-2, myfaces

我正在尝试在 Tomcat 7 网络服务器上使用 Apache MyFaces 2.1.8 运行 JSF 2.0 网络应用程序。当我尝试加载一个简单页面时，出现此错误：

> java.lang.IllegalStateException：没有为此应用程序配置工厂。如果 faces-initialization 根本不起作用，则会发生这种情况 - 确保正确包含基本 Faces 应用程序所需的所有配置设置，并且包含所有必要的库。还要检查您的 Web 应用程序和容器的日志记录输出是否有任何异常！
> 
> 如果您这样做但什么也没找到，则错误可能是由于您使用了一些不支持通过 TLD 文件注册上下文侦听器的特殊 Web 容器，并且您的 web.xml 中没有设置上下文侦听器。典型的配置如下所示；
> 
> ```
> <listener>
>   <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
> </listener> 
> ```

我应该怎么做才能解决它？谢谢！

编辑：

Pom.xml

```
<dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils</artifactId>
        <version>1.8.3</version>
    </dependency>
    <dependency>
        <groupId>commons-codec</groupId>
        <artifactId>commons-codec</artifactId>
        <version>1.3</version>
    </dependency>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-digester</groupId>
        <artifactId>commons-digester</artifactId>
        <version>1.8</version>
    </dependency>
    <dependency>
        <groupId>commons-digester</groupId>
        <artifactId>commons-digester</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.myfaces.core</groupId>
        <artifactId>myfaces-impl</artifactId>
        <version>2.1.8</version>
    </dependency>
    <dependency>
        <groupId>org.apache.myfaces.core</groupId>
        <artifactId>myfaces-api</artifactId>
        <version>2.1.8</version>
    </dependency>
    <dependency>
        <groupId>org.apache.myfaces.core</groupId>
        <artifactId>myfaces-bundle</artifactId>
        <version>2.1.8</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:21:04.717

我遇到了同样的错误消息，使用我知道的一个好的 JSF portlet 项目设置（即 web.xml、faces-config.xml 和我的例子中的 portlet.xml 中的值都是准确的）。

原来我的问题是由包含 Apache commons jar 文件引起的；我还没有确定是哪一个特别导致了这个问题，但是在从项目中删除以下 jar 作为依赖项后，错误停止出现：

*   commons-codec-1.3.jar
*   commons-fileupload-1.2.jar
*   commons-httpclient-3.1.jar
*   commons-io-1.4.jar
*   commons-lang-2.1.jar
*   commons-logging-1.1.1.jar

查看此列表，似乎“commons-codec-1.3.jar”和“commons-logging-1.1.1.jar”jar 在我的设置和您的设置之间很常见，因此可以先删除其中一个或两个，然后看看是什么有什么区别？

编辑：我在另一个项目中再次遇到了这个问题，该项目在 web 应用程序中存在 commons-logging-1.1.1.jar，删除它已经阻止了错误的出现。

# android - 将数据存储几分钟以供进一步访问

> ID：11795319
> 
> 赞同：0
> 
> 时间：2012-08-03T11:59:27.567
> 
> 标签：android

我已经完成了一个项目，其中名称、url、desc 等数据来自使用 web 服务的服务器。每次我需要解析它然后显示。我想在一个特定的地方使用存储解析的数据，其中解析的数据将在五分钟后被删除。这有可能做到这一点，如果是，那么怎么做？我搜索了很多，发现了一件事“mamcache”，但不清楚如何在 Android 中使用 mamcache

**编辑**

实际上，在我的应用程序中，我有不同的类别并单击每个类别，向服务器发送请求，然后对其进行解析然后显示。我不想每次都发送请求，所以我认为我们应该使用一些技术，在应用程序第一次运行时下载数据，然后将解析的数据存储在一个临时位置（这个位置只会存储数据五分钟）。我会经常检查临时位置是否有数据，然后从那里获取，否则发送请求下载、解析然后显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:05:01.950

您对所需内容的描述有点模糊，但如果您需要持久化解析的数据，您可以为您的数据构建一个模型以临时存储它，或者您可以将数据保存到应用程序首选项中，这些首选项将在应用程序实例中可用。

如果你能更好地准确描述你想如何使用解析的数据，我可以给你明确的方向吗？

**编辑**

如果您只需要在同一活动中将数据保留很短的时间，则使用变量来存储您解析的数据。如果变量已填充，则不要访问服务器。如果变量还没有被初始化，则访问服务器，解析数据并将其放入各自的变量中。至于保持数据 5 分钟，使用 datetime 变量检查其他变量数据是否过时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:55:35.770

你对服务器有控制权吗？您可以实现缓存。

请参阅此处的博客文章： [http ://android-developers.blogspot.com/2011/09/androids-http-clients.html](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)

HTTP 缓存已在此处移植： [http ://code.google.com/p/httpclientandroidlib/](http://code.google.com/p/httpclientandroidlib/)

您也可以使用[DiskLruCache](https://github.com/JakeWharton/DiskLruCache/)自己实现缓存。

# ios - JSONKit 解析问题

> ID：11795328
> 
> 赞同：1
> 
> 时间：2012-08-03T11:59:44.183
> 
> 标签：ios, xcode, json, jsonkit

我收到这样的 JSON 对象：

```
{"data":null,
 "error":1,
 "error_code":"InvalidSID",
 "sid":"",
 "num_rows_total":0,
 "last_insert_id":0,
 "error_info":"Comment...",
 "error_data":[]} 
```

和 JSONKit 使用此代码：

```
NSString *responseString = [request responseString];
NSDictionary *requestDictionary = [responseString objectFromJSONString];
if([[requestDictionary objectForKey:@"error"] intValue]) {
    if([@"InvalidSID" isEqualToString:[requestDictionary objectForKey:@"error_code"]]) {
        [self.navigationController popViewControllerAnimated:YES];
    }
} 
```

产生这样的输出：

```
{
data = "<null>";
error = 1;
"error_code" = InvalidSID;
"error_data" = ();
"error_info" = "Comment...";
"last_insert_id" = 0;
"num_rows_total" = 0;
sid = "";
} 
```

`if`问题是，由于 . 周围缺少引号，因此永远不会调用此语句`InvalidSID`。JSONKit 是否存在使这些引号消失的已知问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:23:07.950

您将 NSDictionary 的“描述”输出与键的值混淆了。通过使用一些简单的侦探工作，您还可以为自己节省很多时间（即从您发布此信息到您得到一些响应的时间）。

我假设你上面所说的“输出”是

```
NSLog(@"%@", requestDictionary); 
```

所以在那一行之后试试这个：

```
// Just to be complete
    id ee = [requestDictionary objectForKey:@"error"];
    NSLog(@"error=%@ intValueOfError=%d classOfErrorCode=%@", 
        ee, [ee intValue], NSStringFromClass([ee class]) );

// Where I suspect you may discover something
    id ec = [requestDictionary objectForKey:@"error_code"];
    NSLog(@"errorCode=%@ classOfErrorCode=%@", 
        ec, NSStringFromClass([ec class]) ); 
```

我们这样做是因为这里显然有问题，我们想了解更多关于我们手头的物品的信息。我猜如果您执行上述操作，您会发现一些您没想到的东西。

# android - 存储在 SD 卡中时如何设置/重命名音频？

> ID：11795329
> 
> 赞同：1
> 
> 时间：2012-08-03T11:59:45.127
> 
> 标签：android, audio, set, sequence

我正在创建一个录制语音的应用程序，当我单击 StopRecording 按钮时，
它存储在 SD 卡/内部存储器中。但是在存储时采用随机名称，例如 `sound1356543`. 但我需要在用户选择或顺序上设置名称，如
MyAudio1
MyAudio2
MyAudio3
MyAudio
我该怎么做？这是我的代码供参考。

```
File sampleDir = Environment.getExternalStorageDirectory();         

        audiofile = File.createTempFile("Recording", ".3gp", sampleDir);                    
            recorder = new MediaRecorder();
            recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            //recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            recorder.setOutputFile(audiofile.getAbsolutePath());

protected void addRecordingToMediaLibrary() {
    ContentValues values = new ContentValues(4);
    long current = System.currentTimeMillis();
    values.put(MediaStore.Audio.Media.TITLE, "audio" + audiofile.getName());
    values.put(MediaStore.Audio.Media.DATE_ADDED, (int) (current / 1000));
    values.put(MediaStore.Audio.Media.MIME_TYPE, "audio/3gpp");
    values.put(MediaStore.Audio.Media.DATA, audiofile.getAbsolutePath());
    ContentResolver contentResolver = getContentResolver();

    Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
    Uri newUri = contentResolver.insert(base, values);

    sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, newUri));
    Toast.makeText(this, "Added File " + newUri, Toast.LENGTH_LONG).show();
} 
```

}

如何将名称设置为音频文件。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:43:40.543

删除此行，然后检查

```
values.put(MediaStore.Audio.Media.TITLE, "audio" + audiofile.getName()); 
```

我有同样的问题。

# java - 将 HQL（休眠查询语言）转换为 oracle 查询

> ID：11795333
> 
> 赞同：2
> 
> 时间：2012-08-03T12:00:02.217
> 
> 标签：java, hibernate, hql

我想将 HQL 查询转换为纯 Oracle 查询？

有没有这方面的翻译。

前任 ：

**来自 Table1** --> Table1 是 Table 的实体类

将其转换为

**从表中选择 ***

预先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:05:02.703

您可以简单地在 Hibernate 中打开 SQL 日志记录并查看它生成的查询。具体来说，设置此属性：

```
hibernate.show_sql=true 
```

**编辑**：如果根据您启动服务器的方式，您无法使用标准输出，那么您需要更改休眠日志配置以打印 SQL 调试日志。将此行添加到您的 log4j 属性文件中。

```
log4j.logger.org.hibernate.SQL=DEBUG 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T12:08:47.673

您还可以使用各种记录器。

```
<!-- Log all SQL DML statements as they are executed -->
<logger name="org.hibernate.SQL" level="debug" />
<!-- Log all  JDBC parameters -->
<logger name="org.hibernate.type" level="debug" />
<!-- Log all  second level cache activity -->
<logger name="org.hibernate.cache" level="debug" />
<!-- Log all  transaction related activity -->
<logger name="org.hibernate.transaction" level="debug" />
<!-- Log everything -->
<logger name="org.hibernate" level="debug" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:01:03.763

正如其他人评论的那样，`hibernate.show_sql`hibernate 的属性允许记录 Hibernate 执行的 SQL 查询。

[对于交互式查询， Eclipse](http://www.hibernate.org/subprojects/tools.html)和[IntelliJ IDEA](http://www.jetbrains.com/idea/webhelp/using-hibernate-console.html)都有 Hibernate 控制台插件，可让您输入 HQL 查询并执行它们。

请注意，这是一种有用的技术，可用于了解您是否需要执行 HQL 查询优化（即，您想查看您的 HQL 查询是否正在使用适当的索引运行）。

# android - ETC1 压缩纹理不适用于摩托罗拉 Atrix

> ID：11795334
> 
> 赞同：0
> 
> 时间：2012-08-03T12:00:04.797
> 
> 标签：android, opengl-es-2.0, glsl

我们的动态壁纸在摩托罗拉 Atrix 手机上无法正常工作。它有一个带有 Android 2.3 的股票 ROM。看起来`discard`片段着色器的命令在没有透明部分的情况下无法正常工作。该问题未出现在 Desire S w/Android 2.3、Mototola Droid w/CM9、ASUS Transformer w/4.0、三星 Galaxy Note w/4.0。所以这个问题似乎是摩托罗拉 Atrix 手机特有的。
我们使用 ETC1 压缩纹理，因此 Alpha 通道通过单独的纹理采样器传递给着色器 -`sTexture`用于主漫反射纹理并`sAlpha`具有黑白 Alpha 通道。

这是片段和顶点着色器的代码：

```
private final String mVertexShader = "uniform highp mat4 uMVPMatrix;\n" +
        "attribute highp vec4 aPosition;\n" +
        "attribute highp vec2 aTextureCoord;\n" +
        "varying mediump vec2 vTextureCoord;\n" +
        "void main() {\n" +
        "  gl_Position = uMVPMatrix * aPosition;\n" +
        "  vTextureCoord = aTextureCoord;\n" +
        "}\n";

private final String mAlphaFragmentShader = "precision mediump float;\n" +
        "varying mediump vec2 vTextureCoord;\n" +
        "uniform sampler2D sTexture;\n" +
        "uniform sampler2D sAlpha;\n" +
        "void main() {\n" +
        " vec4 base = texture2D(sTexture, vTextureCoord);\n" +
        " gl_FragColor = base;\n" +
        " if(texture2D(sAlpha, vTextureCoord).r < 0.5){ discard; }\n" +
        "}"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:29:19.140

好的，所以我已经解决了这个问题。非常感谢 @Tim 愿意在设备上运行测试应用程序并为我提供屏幕截图。我通过以下方式修改了片段着色器：

```
private final String mAlphaFragmentShader = "precision mediump float;\n" +
        "varying mediump vec2 vTextureCoord;\n" +
        "uniform sampler2D sTexture;\n" +
        "uniform sampler2D sAlpha;\n" +
        "void main() {\n" +
        " vec4 base = texture2D(sTexture, vTextureCoord);\n" +
        " vec4 mask = texture2D(sAlpha, vTextureCoord);\n" +
        " gl_FragColor = base;\n" +
        " if(mask.g < 0.5){ discard; }\n" +
        "}"; 
```

似乎摩托罗拉 Atrix OpenGL 驱动程序以错误的方式处理压缩纹理并将*R*通道采样为*A*通道，在 ETC1 压缩纹理的情况下始终为 1.0。看起来纹理的内部格式被视为*ARGB*而不是*RGBA*。由于我的蒙版纹理是黑白的，我可以获取任何其他颜色。绿色工作得很好。

# arrays - 增加指针数组的通用函数

> ID：11795338
> 
> 赞同：4
> 
> 时间：2012-08-03T12:00:26.850
> 
> 标签：arrays, delphi, pointers

我正在使用具有如下数据结构的代码：

```
type
  TData1 = record
    IntField: Integer;
    StrField: string;
  end;

  TData2 = record
    DateField: TDateTime;
    StrField: string;
  end;

var
  AData1 = array of ^TData1;
  AData2 = array of ^TData2; 
```

有时我必须向其中一个数组添加一个元素，如下所示：

```
L := Length(AData1);
SetLength(AData1, L + 1);
New(AData1[L]); 
```

如何编写一个过程来完成增加数组大小和为适用于任何类型指针的新项目分配内存的工作？并且必须在不更改记录（TData1，TData2）和数组（AData1，AData2）的定义的情况下完成，因此不会破坏现有代码。

Ps：我没有太多关于指针和那种编程的背景，我当然会使用对象和动态链表，但在这种情况下，它是一个遗留代码，我不能改变它，至少现在是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:51:12.287

**更新：**

~~这不是一个完整的答案。~~`TDynArray`大卫提到的使用可能会解决您的问题。

使用 RTTI，我为您制作了另一个解决方案。这是一个通用解决方案，您可以轻松添加更多功能/功能。它将保留您的类型声明。包括添加/删除记录的示例。

记录`TDynPtArray`处理指向记录的任何动态指针数组。它通过调用进行初始化`Init`：

```
DPA.Init(TypeInfo(TData1), AData1);
Data1 := DPA.Add;  // Adds a record with default values and
                   // returns a pointer to the record
DPA.Remove; // Finalizes/deallocates the last record and 
            // shrinks the dynamic array 
```

-

```
uses
  Windows,System.SysUtils,System.TypInfo;

Type
  TPtArray = array of Pointer;
  PPtArray = ^TPtArray;
  TDynPtArray = record
  private
    FDynArray: PPtArray;
    FTypeInfo: PTypeInfo;
    FTypeData: PTypeData;
  public
    constructor Init( T: Pointer; var dynArray);
    function Add : Pointer;
    procedure Remove;
    procedure Clear;
  end;

constructor TDynPtArray.Init(T: Pointer; var dynArray);
begin
  FTypeInfo := T;
  if  (FTypeInfo^.Kind <> tkRecord) then
    raise Exception.CreateFmt('%s is not a record',[FTypeInfo^.Name]);
  FTypeData := GetTypeData( FTypeInfo);
  FDynArray := @dynArray;
end;

function TDynPtArray.Add: Pointer;
var
  L: integer;
begin
  L := Length(FDynArray^);
  SetLength(FDynArray^,L+1);
  GetMem( FDynArray^[L], FTypeData^.elSize);
  ZeroMemory( FDynArray^[L], FTypeData^.elSize);
  Result := FDynArray^[L];
end;

procedure RecordClear(var Dest; TypeInfo: pointer);
asm
{$ifdef CPUX64}
  .NOFRAME
{$endif}
  jmp System.@FinalizeRecord
end;

procedure TDynPtArray.Remove;
var
 L: integer;
begin
  L := Length(FDynArray^);
  if (L = 0) then
    exit;
  RecordClear( FDynArray^[L-1]^,FTypeInfo); // Finalize record
  FreeMem( FDynArray^[L-1], FTypeData^.elSize);
  SetLength(FDynArray^,L-1);
end;

procedure TDynPtArray.Clear;
begin
  while (Length(FDynArray^) <> 0) do
    Self.Remove;
end; 
```

和一个小测试：

```
type
  PData1 = ^TData1;
  TData1 = record
    IntField: Integer;
    StrField: string;
  end;
  TData1Arr = array of PData1;

var
  AData1: TData1Arr;
  Data1: PData1;
  DPA: TDynPtArray;
begin
  DPA.Init(TypeInfo(TData1), AData1);
  Data1:= DPA.Add;
  Data1^.StrField := '111';
  WriteLn(Data1^.IntField);
  WriteLn(Data1^.StrField);

  DPA.Clear;

  ReadLn;
end. 
```

# mysql - 排除在任何字段中具有 NULL 值的行结果？

> ID：11795340
> 
> 赞同：3
> 
> 时间：2012-08-03T12:00:37.070
> 
> 标签：mysql, sql

我有一个像这样的简单选择

```
SELECT * FROM `table` WHERE fk_id=10020 
```

它有效，但有些字段为 NULL。没有模式所以做了

```
SELECT * FROM `table` WHERE fk_id=10020 AND NOT NULL 
```

尝试仅选择所有包含数据的字段的结果。

但没有奏效，Results in a Empty Results，它没有带来任何东西。

我怎么能这样做 - 排除在任何字段中具有空值的行结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T12:02:18.393

尝试

```
SELECT * FROM `table` where fk_id=10020 and data IS NOT NULL 
```

重复`<column> IS NOT NULL`您需要的每一列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:02:50.827

它应该是：

```
SELECT * 
FROM table 
WHERE fk_id = 10020 AND
      fk_id IS NOT NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-12T11:13:49.950

> [评论](https://stackoverflow.com/questions/11795340/exclude-lines-results-that-have-null-value-in-any-field#comment15671188_11795360)
> 
> *这是一种方法，但有没有办法只用一个命令来做到这一点，因为如果有很多列，它会变得很大。当然这不是问题，只是想知道是否有办法将其自动化。*

有一种方法可以避免指定每一列（从性能的角度来看可能不是最好的，但应该绰绰有余）：

```
CREATE TABLE tab(id INT PRIMARY KEY,fk_id INT,col1 CHAR(9),col2 CHAR(9),col3 INT)

INSERT INTO tab(id, fk_id, col1, col2, col3)
VALUES
(1,10020,'a','b',100),
(2,10020,'a2','b2',NULL),
(3,10020,'a3',NULL,300),
(4,10020,NULL, 'b4',400),
(5,10020,NULL, NULL,500),
(6,10020,NULL, NULL,NULL),
(7,10020,'a7','b7', 700);

SELECT * FROM tab where fk_id=10020;

┌────┬───────┬──────┬──────┬──────┐
│ id │ fk_id │ col1 │ col2 │ col3 │
├────┼───────┼──────┼──────┼──────┤
│  1 │ 10020 │ a    │ b    │ 100  │
│  2 │ 10020 │ a2   │ b2   │ null │
│  3 │ 10020 │ a3   │ null │ 300  │
│  4 │ 10020 │ null │ b4   │ 400  │
│  5 │ 10020 │ null │ null │ 500  │
│  6 │ 10020 │ null │ null │ null │
│  7 │ 10020 │ a7   │ b7   │ 700  │
└────┴───────┴──────┴──────┴──────┘ 
```

最后的查询：

```
SELECT * FROM tab t1 NATURAL JOIN tab t2 WHERE t1.fk_id=10020;

┌────┬───────┬──────┬──────┬──────┐
│ id │ fk_id │ col1 │ col2 │ col3 │
├────┼───────┼──────┼──────┼──────┤
│  1 │ 10020 │ a    │ b    │  100 │
│  7 │ 10020 │ a7   │ b7   │  700 │
└────┴───────┴──────┴──────┴──────┘ 
```

**[DBFiddle 演示](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=49d1606c2ab1f6339056f0e833c73367)**

* * *

> *据我所知，您无法在 SQL 级别实现自动化。可能在 java\php\python （无论你使用什么）上写一些小方法会对你有所帮助*- @xander27

另一种方法是准备语句并基于`INFORMATION_SCHEMA`元数据构建 SQL 查询。

```
SET @s = 
(SELECT CONCAT('SELECT * FROM tab WHERE fk_id=? ',
        GROUP_CONCAT(CONCAT('AND ',COLUMN_NAME, ' IS NOT NULL ') SEPARATOR ''))
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'tab');

PREPARE stmt2 FROM @s;
SET @a = 10020;
EXECUTE stmt2 USING @a;
DEALLOCATE PREPARE stmt2; 
```

**[DBFiddle Demo2](https://dbfiddle.uk/?rdbms=mysql_8.0&fiddle=ffa31800c67cbd912bd963038b1790c7)**

# email - 如何覆盖 config.groovy 中定义的 SMTP 配置的现有发件人地址

> ID：11795341
> 
> 赞同：3
> 
> 时间：2012-08-03T12:00:41.563
> 
> 标签：email, grails, grails-2.0

我已经安装了 grails 2.0 和[邮件插件](http://grails.org/plugin/mail/)，并且我在 confi.groovy 中配置了 SMTP，如下所示

```
grails {
mail {
  host = "smtp.gmail.com"
  port = 465
  username = "mymail@gmail.com  "
  password = "mypwd"
  props = ["mail.smtp.auth":"true",
           "mail.smtp.socketFactory.port":"465",
           "mail.smtp.socketFactory.class":"javax.net.ssl.SSLSocketFactory",
           "mail.smtp.socketFactory.fallback":"false"]
} 
```

}

在我的一个控制器中，我正在执行以下操作

```
sendMail {
  from "Vinay <mymail@gmail.com>"
  to "fred@g2one.com"
  subject "Hello John"
  html '<b>Hello</b> World'
} 
```

但是当我收到来自地址“mymail”的邮件时。Grails 仍在使用 smtp 配置的用户名，如何覆盖它以便我可以自定义“发件人”地址

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T13:01:02.843

Grails 实际上正在做正确的事情并将您指定的 From 行传递给 SMTP 服务器，但它是 GMail 身份验证 SMTP 的“功能”，它只允许在 GMail 帐户中注册“我拥有的地址”的 From 地址。如果您尝试使用不是您的注册别名之一的发件人地址，则 GMail 将忽略 Grails 提供的发件人地址，并且 SMTP 服务器将用用于身份验证的帐户的主地址替换它。

如果您有一组已知的固定发件人地址，那么您可以简单地将它们全部添加到您的 GMail 帐户设置中，但不能将任意发件人地址与 GMail SMTP 一起使用。

# pdf - elisp：生成 LaTeX PDF 文档

> ID：11795343
> 
> 赞同：2
> 
> 时间：2012-08-03T12:00:51.133
> 
> 标签：pdf, emacs, latex, elisp

我试图完全自动化发送工作申请。第一步，把公司的名字写在信里。它几乎可以工作，但它被卡住了，因为它询问要使用什么命令。阅读文档，我认为它可以被前缀参数禁用，但我出错了。此外，它不需要在视觉上闪烁，它可以完全作为后台进程完成。我把代码贴上来，你马上就明白了：

（哦，我在 emacs 中使用 LaTeX/P 模式 - 目标不仅是更新 .tex 文件，还要更新 .pdf 文件）

```
(defun edit-letter (comp-name)
  (let ((path "~/work/letter/comp"))
    (edit-letter-file-path comp-name (concat path "/eng/letter.tex")) 
    (edit-letter-file-path comp-name (concat path "/swe/brev.tex")) ))

(defun edit-letter-file-path (company-name file-path)
  (find-file file-path)
  (goto-line 14)
  (kill-line)
  (insert (format "\\textbf{To %s}\n" company-name))
  (setq current-prefix-arg nil)
  (call-interactively 'TeX-command-master) ; asks what command
  (kill-buffer) ) ; doesn't work

(edit-letter "Digital Power Now") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:41:39.780

你的问题并不完全清楚你在追求什么，但如果你想使用 AucTeX 调用 LaTeX/PDFTex/BibTex 进程而不提示输入命令名称，你可以使用这个：

```
(TeX-command "LaTeX" 'TeX-master-file) 
```

试试这个代替`(call-interactively 'TeX-command-master)`上面的。当您使用 LaTeX/P 时，“LaTeX”实际上意味着 pdflatex。

# blackberry - 黑莓推送通知：Java.io.IOException：网络操作（订阅）失败。确保 Content Provider Url 可访问

> ID：11795345
> 
> 赞同：0
> 
> 时间：2012-08-03T12:01:20.387
> 
> 标签：blackberry, push-notification

我正在处理黑莓推送通知，在从设备注册时遇到了一个大问题。我得到了例外：

> Java.io.IOException：网络操作（订阅）失败。确保 Content Provider Url 可访问..

我浏览了本[指南](http://docs.blackberry.com/en/developers/deliverables/30161/Push_Service_SDK-Getting_Started_Guide--)并根据它设置了所有内容。

但是我无法注册。我的 tomcat 服务器正在运行，我可以从我的计算机访问内容提供商 URL，也可以从设备的浏览器访问。

```
PC URL is: https:/loaclhost:8443/sample-push-initiator 
```

我将本地主机更改为我的计算机的 IP 地址。并且可以通过 WiFi 访问它。

请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:28:30.097

您的推送发起方 URL 必须可从 Internet 公开访问，才能从您的设备访问。使用 localhost 或任何本地 IP 地址（例如 192.168.0.2）将不起作用。

您必须设置路由器以将端口 8443 上的流量转发到您 PC 的本地 IP。

在尝试使用示例推送应用程序之前，您应该确保可以从您的黑莓普通 Web 浏览器（而不是热点浏览器）访问此 URL。

# vb6 - 在 vb6 中从 \Device\HarddiskVolume1 转换为 C:

> ID：11795347
> 
> 赞同：0
> 
> 时间：2012-08-03T12:01:27.910
> 
> 标签：vb6

有什么办法可以在visual basic 6中转换`\Device\HarddiskVolume1\programfile\explorer.exe`为？`C:\programfile\explorer.exe`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:35:21.897

试试这个

```
Option Explicit

Private Declare Function QueryDosDevice Lib "kernel32" Alias "QueryDosDeviceA" (ByVal lpDeviceName As String, ByVal lpTargetPath As String, ByVal ucchMax As Long) As Long

Private Sub Command1_Click()
    Debug.Print pvReplaceDevice("\Device\HarddiskVolume1\aaa.txt")
End Sub

Private Function pvReplaceDevice(sPath As String) As String
    Dim sDrive          As String
    Dim sDevice         As String
    Dim lIdx            As Long

    For lIdx = 0 To 25
        sDrive = Chr$(65 + lIdx) & ":"
        sDevice = Space(1000)
        If QueryDosDevice(sDrive, sDevice, Len(sDevice)) <> 0 Then
            sDevice = Left$(sDevice, InStr(sDevice, Chr$(0)) - 1)
'            Debug.Print sDrive; "="; sDevice
            If LCase$(Left$(sPath, Len(sDevice))) = LCase$(sDevice) Then
                pvReplaceDevice = sDrive & Mid$(sPath, Len(sDevice) + 1)
                Exit Function
            End If
        End If
    Next
    pvReplaceDevice = sPath
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:12:00.780

如果您想有效地使用 API 函数，请创建一个类 - “DiskDevice”

```
Option Explicit

Private Declare Function GetLogicalDriveStrings Lib "Kernel32" Alias "GetLogicalDriveStringsW" ( _
    ByVal nBufferLength As Long, _
    ByVal lpBuffer As Long _
) As Long

Private Declare Function QueryDosDevice Lib "Kernel32.dll" Alias "QueryDosDeviceW" ( _
    ByVal lpDeviceName As Long, _
    ByVal lpTargetPath As Long, _
    ByVal ucchMax As Long _
) As Long

Private m_colDrivesKeyedByDevice            As VBA.Collection

Private Sub Class_Initialize()

    Dim sDriveStrings               As String
    Dim vasDriveStrings             As Variant
    Dim nIndex                      As Long
    Dim sDrive                      As String

    ' Allocate max size buffer [A-Z]:\\\0  and retrieve all drives on the system.
    sDriveStrings = Space$(105)
    GetLogicalDriveStrings 1000, StrPtr(sDriveStrings)

    ' Split over the null chars between each substring.
    vasDriveStrings = Split(sDriveStrings, vbNullChar)

    Set m_colDrivesKeyedByDevice = New VBA.Collection

    ' Iterate through each drive string (escaping later if any item is null string).
    For nIndex = 0 To UBound(vasDriveStrings)
        sDrive = Left$(vasDriveStrings(nIndex), 2) ' Ignore the backslash.
        If Len(sDrive) = 0 Then
            Exit For
        End If
        ' Create mapping from Drive => Device
        m_colDrivesKeyedByDevice.Add sDrive, GetDeviceForDrive(sDrive)
    Next nIndex

End Sub

' Retrieve the device string \device\XXXXXX for the drive X:
Private Function GetDeviceForDrive(ByRef the_sDrive As String)

    Const knBufferLen       As Long = 1000
    Dim sBuffer             As String
    Dim nRet                As Long

    sBuffer = Space$(knBufferLen)
    nRet = QueryDosDevice(StrPtr(the_sDrive), StrPtr(sBuffer), knBufferLen)
    GetDeviceForDrive = Left$(sBuffer, nRet - 2) ' Ignore 2 terminating null chars.

End Function

Public Function GetFilePathFromDevicePath(ByRef the_sDevicePath As String) As String

    Dim nPosSecondBackslash As Long
    Dim nPosThirdBackslash As Long
    Dim sDevice         As String
    Dim sDisk           As String

    ' Path is always \Device\<device>\path1\path2\etc. Just get everything before the third backslash.
    nPosSecondBackslash = InStr(2, the_sDevicePath, "\")
    nPosThirdBackslash = InStr(nPosSecondBackslash + 1, the_sDevicePath, "\")

    sDevice = Left(the_sDevicePath, nPosThirdBackslash - 1)
    sDisk = m_colDrivesKeyedByDevice.Item(sDevice)          ' Lookup

    ' Reassemble, this time with disk.
    GetFilePathFromDevicePath = sDisk & Mid$(the_sDevicePath, nPosThirdBackslash)

End Function 
```

现在，您使用如下代码：

```
Set m_oDiskDevice = New DiskDevice

...

sMyPath = m_oDiskDevice.GetFilePathFromDevicePath("\Device\HarddiskVolume1\programfile\explorer.exe") 
```

这样您就不必多次调用 API 函数 - 您只需进行集合查找。

# c++ - 通过此指针调用受保护的基类方法，该指针转换为派生类中的基类（C++）

> ID：11795349
> 
> 赞同：6
> 
> 时间：2012-08-03T12:01:31.797
> 
> 标签：c++, inheritance, compiler-errors, protected

首先，我知道*C++ 标准（ISO/IEC 14882:2003）：第 11.5 节，第 1 段*，但事实并非如此（但编译器显然不这么认为）。

我尝试通过**此**指针在派生类方法中调用受保护的基类方法，静态转换为基类指针，并在 MSVC2008 中*出现错误 C2248: 'A::f' : cannot access protected member declaration in class 'A'*。

我*必须*在“奇怪地重复出现模板模式”的上下文中执行此操作，但我可以用更简单的代码重现此错误，如下所示：

```
class B
{
protected:
    void f(){}
};

class D : public B
{
public:
    void g()
    {
        f(); // ok
        this->f(); // ok
        static_cast<B*>(this)->f(); // C2248 in MSVC2008
        dynamic_cast<B*>(this)->f(); // C2248
        ((B*)this)->f(); // C2248
    }
};
D d; d.g(); 
```

似乎编译器认为**将此**指针转换为指向其他实例的指针，是吗？

在这种情况下编译器是错误的，你怎么看？

* * *

好的，我的真实代码更像这样：

```
template<class T>
class B
{
public:
    void g()
    {
        f(); // error C3861: 'f': identifier not found
        this->f(); // error C3861: 'f': identifier not found

        // static_cast to derived class
        static_cast<T*>(this)->f(); // C2248 in MSVC2008
    }
};

class D : public B<D>
{
protected:
    void f(){}
}; 
```

我将**它**转换为*派生*类，我*不能*使用**this->f();**

* * *

顺便说一句，我看到这段代码不安全，例如`class E : public B<D> {...};`：可编译，但 static_cast 会产生错误的强制转换。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T12:07:36.147

编译器是正确的。要显式访问`B::f`成员函数，您可以编写：

```
this->B::f(); 
```

相关语言是：

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> ### 11.4 受保护的成员访问 [class.protected]
> 
> [...] 授予对受保护成员的访问权限，因为引用发生在某个 C 类的朋友或成员中。 [...] 对受保护成员的访问 [...] 涉及 [s] a（可能是隐式的）对象表达式（5.2.5）。在这种情况下，对象表达式的类应为 C 或从 C 派生的类。

因此，通过对基类进行强制转换的受保护成员访问`B`违反了此授权，并且是不允许的。`this->B::f()`由于您可以如上所述使用，因此也没有必要。

* * *

在您的实际 CRTP 动机的情况下，您是正确的，您不能在`f()`没有 a的情况下调用`static_cast`，因为`D`它不是`B<D>`（继承关系在另一个方向）的基类。由于`D`不是 的基类，因此无论如何`B<D>`您都不能调用它的`protected`方法。`B<D>`一种简单的解决方法是在指针上`friend` `B<D>`使用`D`并使用：`static_cast``this`

```
template<typename T>
class B {
public:
    void g() {
        static_cast<T *>(this)->f();
    }
};

class D : public B<D>
{
    friend class B<D>;
    ... 
```

如果`B`访问让您担心的`private`部分`D`，您可以将这些`private`部分移动到另一个基类并隔离 CRTP 机制`D`：

```
template<class T> class B {
public:
    void g() {
        static_cast<T*>(this)->f();
    }
};

class C {
private:
    void h();
protected:
    void f(){ std::cout << "D::f\n"; }
};

class D: protected C, public B<D>
{
    friend class B<D>;
}; 
```

这里`B<D>`被阻止调用`C::h`，因为友谊既不是继承的也不是传递的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:13:36.797

我认为编译器是对的。

假设如下：

```
void g()
{
    B *b1 = this;
    B *b2 = GetUnrelatedB();
    b1->f(); //Error?
    b2->f(); //Error!
} 
```

这个`b1`案子相当于你的`static_cast`，但会很奇怪，`b1`会被允许，`b2`不会。

引用您的第 11.5 段：

> [...] 必须通过派生类本身的指针、引用或对象进行访问。

but`static_cast<B*>(this)`是 type `B*`， not `D*`，不管对象本身是一样的。实际上，指针的值与这个问题无关，只有表达式的类型：

```
void g()
{
    B *b2 = GetUnrelatedB();
    static_cast<D*>(b2)->f(); //ok!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:08:32.637

`static_cast`但是，一旦你申请了，编译器怎么知道你在一个从 B 派生的类中`this`呢？在我的（谦虚）看来，如果我创建一个`B`对象，我希望不允许调用`B`该对象的私有或受保护方法`B`，因为我们不想违反封装。只要对象在类方法`B`之外，它在哪里创建都没有关系。`B`

# java - 如何一键停止两个runables？

> ID：11795352
> 
> 赞同：0
> 
> 时间：2012-08-03T12:01:41.480
> 
> 标签：java, android, freeze, runnable

我在尝试用一个停止按钮停止我的两个可运行程序时遇到问题，我可以只停止两个中的一个就可以了，但是一旦我尝试停止我的应用程序在按下手机上的按钮时冻结，这里是到目前为止我的代码：

```
 if(go != 1){
        go = 1;
    final Timer t =new Timer();
    t.schedule(new TimerTask() {

        @Override
        public void run() {
            runOnUiThread(new Runnable() {

                public void run() {
                    if(DHPDPS==0){
                        money = (DPPS+Reserve);
                        Reserve = (money);
                        String end = String.format("%1f", money);
                        t1.setText("$" + end);
                    }else if(counter > DHPDPS && DOTPPS != 0 && DHPDPS != 0){
                        money = (DOTPPS+Reserve);
                        Reserve = (money);
                        String end = String.format("%1f", money);
                        t1.setText("$" + end);
                    } else{

                        money = (DPPS+Reserve);
                        Reserve = (money);
                        String end = String.format("%1f", money);
                        t1.setText("$" + end);
                    }
                    //Place your stopping condition over here. Its important to have a stopping condition or it will go in an infinite loop. 
                    counter++;

                    // Display pay per second
                    if(counter <= DHPDPS || DHPDPS == 0){
                    t2.setText("Your pay per second is: $"+result);
                    }else{
                        t2.setText("Your pay per second is: $"+result2);
                    }
                }
            }); 
        }
    }, 20, 20);

 // Make countdown to overtime display
    final TextView count = (TextView) findViewById(R.id.countdown);
    countdown = (int)HPDPS;
    cd.schedule(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                public void run(){
                    int hours = (countdown/3600);
                    if(OTPPS != 0 && HPDPS != 0){
                            count.setText("Seconds Remaining to Overtime: " + countdown + "\nAbout " + hours + " Hours");
                            countdown--;
                        }
                }
            });
        }

    }, 1000, 1000);

    final Button b = (Button) findViewById(R.id.clockout);
    b.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if(go == 1)
                go = 0;
            if (t != null)
                t.cancel();
            // if (cd != null)  // This condition Freezes my phone when activated?
            //  cd.cancel();
            }
    });

    } 

} 
```

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:05:21.900

```
public void run() {
    while(running) {
         //your code for both runnables
    }
}

final Button b = (Button) findViewById(R.id.clockout);
b.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        if(running) {
            running = false;
        }    
    }
}); 
```

使用此代码，您的可运行对象将检查它们是否应该运行每个循环，如果不是，它们将退出它们`run()`并且线程将停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:39:00.910

我已经弄清楚问题出在哪里，结果证明是一个非常简单的修复，这是我的原始代码字节：

```
 final Button b = (Button) findViewById(R.id.clockout);
b.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        if(go == 1)
            go = 0;
        if (t != null)
            t.cancel();
        // if (cd != null)  // This condition Freezes my phone when activated?
        //  cd.cancel();
        } 
```

这是我为解决问题所做的：

```
 final Button b = (Button) findViewById(R.id.clockout);
    b.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if(go == 1)
                go = 0;
            if (t != null){
                t.cancel();
                cd.cancel();
            }
            } 
```

这非常简单，我猜只是我看过的东西，谢谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:45:45.083

**1.**创建一个`boolean`变量，该变量将`true`在开始时设置为...

**2.**在两者中都使用这个变量`runnables`...`while (isOk)`

**3.**点击按钮，将此`boolean`变量设为`false`，**两个runnnable都将不存在...**

# c# - Page 控件的扩展方法 - 错误

> ID：11795355
> 
> 赞同：1
> 
> 时间：2012-08-03T12:01:44.637
> 
> 标签：c#

我为页面控件编写了一个小扩展方法，以递归搜索控件。但我得到“对象引用未设置为对象的实例”异常。

似乎 page.Controls 只有 1 个控件，在这个控件上我设置了这个异常。

有人有什么想法吗？

这是代码：

```
public static Control FindControlRecursive(this Page page, string id)
        {
            return Execute(page, id);
        }

 private static Control Execute(Control root, string id)
        {
            if (root.ID.Equals(id))
                return root;
              ControlCollection  controls = root.Controls;

            foreach (Control ctrl in controls)
            {
                Control FoundControl = Execute(ctrl, id);
                if (FoundControl != null)
                    return FoundControl;
            }
            return null;
        }
    } 
```

**更新** 现在我有另一个错误：发生错误：索引超出范围。必须是非负数且小于集合的大小。参数名称：索引...

但这一个在循环中间的某个地方抛出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:10:43.493

这一行有一个可能的原因：

```
if (root.ID.Equals(id)) 
```

不需要为树中的所有控件设置 ID 属性。我什至怀疑 Page 本身是否不为空。尝试将此行替换为以下内容：

```
if (string.Equals(root.ID, id)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:13:39.967

在我看来， ID 可以为空，并且 ID.Equals() 正在引发异常。尝试换行

```
if (root.ID.Equals(id))
    return root; 
```

到

```
 if (!string.IsNullOrEmpty(root.ID) && root.ID.Equals(id))
        return root; 
```

# jquery - 无法与 JQuery 中的附加元素交互

> ID：11795356
> 
> 赞同：0
> 
> 时间：2012-08-03T12:01:48.337
> 
> 标签：jquery, append

我有一个`DIV`元素。

```
<div id="testButton"> Test Button </div> 
```

我要点击它，然后另一个元素会被附加到另一个`DIV`元素中

```
$("#testButton").click(function() {

$("#testDiv").append('<div id="test">Test</div>');

}); 
```

现在我想`Click`在附加元素上隐藏第一个元素。

```
$("#test").click(function() {

$("#testButton").hide();
}); 
```

但这不起作用...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:04:22.917

只要在将事件处理程序附加到它的那一刻该元素不存在 - 它就不起作用。

您可以改用此解决方案：

```
$(document).on('click', '#test', function() {
    $("#testButton").hide();
}); 
```

或者，如果页面上已经有一些特定的块 - 您可以使用更具体的选择器，例如

```
$('#testDiv').on('click', '#test', function() {
    $("#testButton").hide();
}); 
```

# asp.net - formview 中的任何内容都不显示 asp.net

> ID：11795359
> 
> 赞同：0
> 
> 时间：2012-08-03T12:02:09.313
> 
> 标签：asp.net, vb.net, formview

formview 中的任何内容都没有显示，我不确定是不是因为它的内部 div？我试图添加标签，但仍然没有运气，请帮忙。

```
 <asp:formview id="my" runat="server" DataKeyNames="EmpID"  DataSourceID="SQLEmpl">
                     <ItemTemplate>
                    <div runat= "server" class="heading">My Details</div>
                     <div class="myfield">
                        <div class="name">Name</div>
                        <div class="fielddetails"><asp:label id="Name" runat="server" Text='<%# Eval("Name")%>'>  </asp:label></div>
                    </div>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:12:36.843

检查您是否调用了[DataBind()](http://msdn.microsoft.com/en-us/library/sxh3ys50.aspx)

如果您的数据源有数据，这是最有可能的来源。您需要在数据源上调用 DataBind() 后调用它。一个好的地方是页面加载。

```
my.DataBind() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:07:33.510

清单

1.  检查数据源中是否有数据。
2.  检查它是否未设置为显示：jQuery 中的 css/hide() 中的 none 或 c# 中的 visible = false

# magento - 如何在 Magento 的同一页面上两次应用过滤器

> ID：11795372
> 
> 赞同：2
> 
> 时间：2012-08-03T12:02:55.117
> 
> 标签：magento

在 Magento 类别页面中，我分两组显示产品集合两次。现在问题是我想在每组集合上独立应用过滤器（分层导航）和分页功能。我目前面临的问题是每当我应用过滤器时，它都会过滤这组产品。如何在其相应的产品集上应用过滤器和分页？

请检查以下网址以获得更好的理解。 [https://dl.dropbox.com/u/53435938/key-pieces-comparison-tool.jpg](https://dl.dropbox.com/u/53435938/key-pieces-comparison-tool.jpg)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:41:49.657

您对两者都使用相同的集合，并且没有简单的方法来区分每个集合的过滤器，因为它使用 _GET。你能做到这一点的唯一方法是使用 Ajax。每个集合都将从您应用的过滤器中动态填充，并且它们将独立加载。虽然，重新加载页面只会将两个集合设置回同一点。

# iphone - GPS定位器

> ID：11795373
> 
> 赞同：2
> 
> 时间：2012-08-03T12:02:59.813
> 
> 标签：iphone, ios, gps, location

我想将此条件添加到 GPS 中，它可以找到多达 10 英里的位置。我已经检测到用户当前位置，但不知道如何以及在何处放置此条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:58:50.320

假设当您搜索餐厅时，您会得到一份带有位置的餐厅列表。现在您可以使用 CoreLocation 管理器获取当前位置。您可以通过使用 CorLocation API 计算距离来过滤列表

```
CLLocationDistance meters = [restaurantLocation distanceFromLocation:myLocation]; 
```

# java - 我如何使用 MapStore 实现让 hazelcast 存储在我的数据库中

> ID：11795374
> 
> 赞同：2
> 
> 时间：2012-08-03T12:03:01.910
> 
> 标签：java, hazelcast

我实现`MapStore`并配置了hazelcast（v 2.2），以便它知道在调用`map.put()`它时必须`.store`从我的实现中调用它，至少这是我读到的。

如果我直接使用我的实现，它会存储我想要的，但如果我调用`map.put()`它不会。有人可以告诉我为什么不这样做或者我做错了什么吗？

这是我的`MapStore`实现：

```
public class MyMapStore implements MapStore<String, Object> {

private Session session = HibernateUtil.openSession();

@Override
public Object load(String key) {
            // TODO Auto-generated method stub
            return null;
}

@Override
public Map<String, Object> loadAll(Collection<String> keys) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public Set<String> loadAllKeys() {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void store(String key, Object value) {
    Transaction tx = session.beginTransaction();
    session.save((MyObject)value);
    tx.commit();
}

@Override
public void storeAll(Map<String, Object> map) {
    // TODO Auto-generated method stub
}

@Override
public void delete(String key) {
            // TODO Auto-generated method stub
}

@Override
public void deleteAll(Collection<String> keys) {
    // TODO Auto-generated method stub
}
} 
```

Hazelcast 配置：

```
h.getConfig().getMapConfig("default").setMapStoreConfig(
    new MapStoreConfig().setEnabled(true).setClassName(
    MyMapStore.class.getName()).setWriteDelaySeconds(0)); 
```

打印 hazelcast 配置表明我设置的所有内容都在那里，所以我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T06:57:29.963

我认为您的 hazelcast 配置中缺少某些内容。您需要创建“默认” MapConfig。这是一个工作示例。

```
Config config = new Config();

    ....

MapConfig mapCfg = new MapConfig();
mapCfg.setName("default");
mapCfg.setBackupCount(2);
mapCfg.getMaxSizeConfig().setSize(10000);
mapCfg.setTimeToLiveSeconds(300);

MapStoreConfig mapStoreCfg = new MapStoreConfig();
mapStoreCfg.setClassName(MyMapStore.class.getName()).setEnabled(true);
mapCfg.setMapStoreConfig(mapStoreCfg);

// use near cache if needed
NearCacheConfig nearCacheConfig = new NearCacheConfig();
nearCacheConfig.setMaxSize(1000).setMaxIdleSeconds(120).setTimeToLiveSeconds(300);
mapCfg.setNearCacheConfig(nearCacheConfig);

config.addMapConfig(mapCfg);

Hazelcast.newHazelcastInstance(config); 
```

# php - 从多维数组中列出子父母

> ID：11795375
> 
> 赞同：1
> 
> 时间：2012-08-03T12:03:03.430
> 
> 标签：php, multidimensional-array

我已经坚持了两天了，我完全被困住了。谷歌和 SO 无法进一步帮助我，我忽略了一些东西....

这就是我要的

```
Home
Typography
404 Page not found
The company
The company/Team
The company/Team/Rick
The company/Team/Rick/Opleiding
The company/Team//Rob
The company/Office
The company/Office/Contact
The company/Office/Route 
```

这是我的数组

```
 Array
(
    [0] => Array
        (
            [id] => 55
            [parent_id] => 0
            [title] => Home
            [sub] => Array
                (
                )

        )

    [1] => Array
        (
            [id] => 27
            [parent_id] => 0
            [title] => Typography
            [sub] => Array
                (
                )

        )

    [2] => Array
        (
            [id] => 56
            [parent_id] => 0
            [title] => 404 Page not found
            [sub] => Array
                (
                )

        )

    [3] => Array
        (
            [id] => 68
            [parent_id] => 0
            [title] => The company
            [sub] => Array
                (
                    [0] => Array
                        (
                            [id] => 73
                            [parent_id] => 68
                            [title] => Team
                            [sub] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 74
                                            [parent_id] => 73
                                            [title] => Rick
                                            [sub] => Array
                                                (
                                                    [0] => Array
                                                        (
                                                            [id] => 79
                                                            [parent_id] => 74
                                                            [title] => Opleiding
                                                            [sub] => Array
                                                                (
                                                                )

                                                        )

                                                )

                                        )

                                    [1] => Array
                                        (
                                            [id] => 75
                                            [parent_id] => 73
                                            [title] => Rob
                                            [sub] => Array
                                                (
                                                )

                                        )

                                )

                        )

                    [1] => Array
                        (
                            [id] => 76
                            [parent_id] => 68
                            [title] => Office
                            [sub] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 78
                                            [parent_id] => 76
                                            [title] => Contact
                                            [sub] => Array
                                                (
                                                )

                                        )

                                    [1] => Array
                                        (
                                            [id] => 77
                                            [parent_id] => 76
                                            [title] => Route
                                            [sub] => Array
                                                (
                                                )

                                        )

                                )

                        )

                )

        )

) 
```

这是我到目前为止所拥有的

```
public function BuildTitle($array, &$parents = null)
    {
        $html = '';
        foreach($array as $page)
        {
            if($page['parent_id'] != 0)
            {
                $html .= $parents.'/'.$page['title'].'<br/>';
                $parents = $parents.'/'.$page['title'];
            }
            else
            {
                $html .= $page['title'].'<br/>';
                $parents = $page['title'];
            }

            $html .= $this->BuildTitle($page['sub'], $parents);
        }
        return $html;
    } 
```

这又回来了

```
Home
Typography
404 Page not found
The company
The company/Team
The company/Team/Rick
The company/Team/Rick/Opleiding
The company/Team/Rick/Opleiding/Rob
The company/Team/Rick/Opleiding/Rob/Office
The company/Team/Rick/Opleiding/Rob/Office/Contact
The company/Team/Rick/Opleiding/Rob/Office/Contact/Route 
```

父/子关系是无限的。我在做什么错/错过了什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:08:43.463

您`$parents`在每次迭代中修改相同的值。因此，只要父级不为 0，它只会将当前子级附加到任何路径。

想象一下，例如，您有以下场景：

```
foo
   bar
   baz 
```

处理时`foo`，它会以`$parents = 'foo'`. 然后它遍历每个孩子，更新`$parents`：

*   `bar`使`$parents = $parents . '/' . $page['title'] = 'foo' . '/' . 'bar' = 'foo/bar'`.
*   `baz`使`$parents = $parents . '/' . $page['title'] = 'foo/bar' . '/' . 'bar' = 'foo/bar/baz'`.

你想要的是这样的：

```
public function BuildTitle($array, $parents = null)
    {
        $html = '';
        foreach($array as $page)
        {
            if($page['parent_id'] != 0)
            {
                $html .= $parents.'/'.$page['title'].'<br/>';
                $new_parents = $parents.'/'.$page['title'];
            }
            else
            {
                $html .= $page['title'].'<br/>';
                $new_parents = $page['title'];
            }

            $html .= $this->BuildTitle($page['sub'], $new_parents);
        }
        return $html;
    } 
```

# java - 带有 Java 的 Wordpress XML-RPC

> ID：11795378
> 
> 赞同：2
> 
> 时间：2012-08-03T12:03:06.673
> 
> 标签：java, wordpress

有没有办法从 Wordpress 博客表单 Java 代码中获取帖子和信息？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:46:27.890

您需要一个 XML-RPC 客户端，您可以使用 Apache [XML-RPC 库](http://ws.apache.org/xmlrpc/)

这里是[Wordpress 支持的 API](http://codex.wordpress.org/XML-RPC_WordPress_API)列表。

最后是一个[简短的教程](http://wordpress.rintcius.nl/post/2006/07)来帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T16:40:06.787

这是一个用于执行此操作的 Java 库：

[https://code.google.com/p/wordpress-java/](https://code.google.com/p/wordpress-java/)

它在此处包含[示例代码](https://code.google.com/p/wordpress-java/wiki/ExampleCode)。

# django - Django中的灵活块定位？

> ID：11795381
> 
> 赞同：1
> 
> 时间：2012-08-03T12:03:09.663
> 
> 标签：django, django-templates

在`Drupal`您可以选择您希望您的块显示在您网站的哪个“区域”。您无需修改​​任何`php/html`代码即可实现此目的。可以用 来实现这样的事情`Django`，如果可以，如何实现？

通过块，我了解一段`html`没有自己的 URL 并与主要数据一起显示的输出。（例如搜索框或投票）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:07:24.013

Django 和 Drupal 不应该这样比较：Drupal 是一个 CMS，Django 是一个 Web 框架。

如果您想获得一些类似的体验，我会考虑使用[django-cms](https://www.django-cms.org/)。有了这个，您可以在这些模板中创建大量`templates`和设置`placeholders`（这些是页面的区域，如“侧边栏”、“页脚”、“内容区域”等）。当您在 django-cms 中创建新页面时，您选择要使用的模板（可能是两列布局或带有标题的三列布局 - 取决于您创建的内容），然后选择内容（或`plugins`) 您想要放置在您在模板中创建的占位符中。所以这与 Drupal 的区域有点相似。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T16:41:32.187

嗯，您可能想创建上下文处理器并从它在模板中所需的位置输出？

如果您想在 admin 内部的 html 输出中重新排序内容块，那么您需要一些东西来生成该输出，例如 cms。您可以为此尝试[django-fluent-contents 之](https://github.com/edoburu/django-fluent-contents/)类的东西，而无需大 cms。

# tomcat - Tomcat中使用Restlet的路径目录

> ID：11795387
> 
> 赞同：0
> 
> 时间：2012-08-03T12:03:52.403
> 
> 标签：tomcat, restlet, restlet-2.0

我在 Tomcat 中部署了我的 restlet.Component，在此，我读取了我的应用程序的配置文件：

```
this.properties.load(new FileInputStream("config/conf.properties)); 
```

我有一个`java.io.FileNotFoundException`

我的 webapp 结构是：

```
/mi-webapp
  /config
     conf.properties
  /WEB-INF
    /classes
    /lib
    web.xml 
```

我怎样才能得到restlet的真实路径？我读过，`ServletContext.getRealPath()`但这是一个不好的做法，你怎么推荐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:08:14.587

将 config 目录移到里面`WEB-INF/classes`并使用以下代码：

```
 URL url = this.class.getClassLoader().getResource("config/conf.properties");
    try {
        this.properties.load(url.openStream());
    } catch (IOException e) {
        System.out.println("Couldn't open/load properties file");
    } 
```

这样，您就可以从属于您的应用程序范围内的类路径加载文件，并且不会导致任何安全漏洞。

# ios - 核心数据提交通知

> ID：11795391
> 
> 赞同：1
> 
> 时间：2012-08-03T12:04:15.420
> 
> 标签：ios, core-data, notifications, commit, nsnotifications

我在我的项目中使用 Core Data，我必须将用户填写的表单保存到 Core Data DB 中。用户重新启动应用程序后，已保存表单的列表应显示在 TableView 中。但是，如果用户在 Core Data 提交更改之前退出应用程序，则不会保存表单。有什么方法可以捕捉到我的数据被提交的那一刻？

这就是我保存表单的方式：

```
if (![document.managedObjectContext save: &error]) {
    NSLog(@"DB saving error!");
}
else {
   NSLog(@"DB save OK!");
   //show alertView
 } 
```

我尝试使用`-com.apple.CoreData.SQLDebug 1`. 日志显示它在大约 15 秒后开始保存对象。

```
 // This is how my log output looks like
 2012-08-03 14:50:43.587 iPadAF_new[4506:707] DB save OK!
 2012-08-03 14:50:58.628 iPadAF_new[4506:2597] CoreData: sql: COMMIT 
```

那么如何在提交后获得通知或其他内容，以便用户在保存之前无法退出应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:52:15.330

您可以从上下文中注册 NSManagedObjectContextDidSaveNotification 以了解何时保存了上下文，或者您可以观察属性的 KVO 通知`hasChanges`。我怀疑这些是否适用于背景，因此它们可能无法解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:27:29.257

如核心数据模板所示，您应该将上下文保存在 AppDelegate 中

```
- (void)applicationWillTerminate:(UIApplication *)application
{
     // Saves changes in the application's managed object context before the application         terminates.
    [self saveContext];
}

- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
             // Replace this implementation with code to handle the error appropriately.
             // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
} 
```

对我来说，还将上下文保存在

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T12:33:15.727

我认为提交是当底层 SQL 数据库将预写日志的内容提交到主文件时，但预写日志保存在单独的持久文件中，因此从数据库保存的那一刻起它应该是安全的。

如果您检查容器，您将看到每个核心数据存储有 3 个文件（至少在某些时候）。

`Foo.sqlite`- 主数据库 `Foo.sqlite-shm`- 共享内存/缓存文件，一次性的。 `Foo.sqlite-wal`- 预写日志。如果存在且非空，则它包含尚未写入主数据库的最新更改，但如果查询需要，仍将从其中返回结果。

这意味着您不需要收到提交通知，因为在此之前数据已经是安全的，只是没有合并到主文件中。

# java - 简单形式的 Wicket AjaxFallbackButton（更新：也是 Button）

> ID：11795393
> 
> 赞同：0
> 
> 时间：2012-08-03T12:04:21.527
> 
> 标签：java, ajax, wicket

我刚开始使用 Wicket，在阅读 Martijn Dashorst 和 Eelco Hillenius 所著的“Wicket in action - by Martijn Dashorst and Eelco Hillenius”一书时，我尝试将我学到的一些东西实施到小测试中，但是当我尝试使用时我似乎犯了一个错误表单中的 AjaxFallbackButton。代码通过了 WicketTester 测试，但是当我执行它时，我得到一个我不完全理解的错误。

我想要实现的是一个显示简单表单的页面，用户可以在其中输入表达式，然后单击按钮，表达式被评估并显示在表单下方。现在我将坚持只显示带有标签的表单内容。书中有一个这样的例子，但它没有使用 AjaxFallBackButton，它只允许更新标签而不是整个页面。

这是html模板：

```
<!DOCTYPE html>
<html xmlns:wicket="http://wicket.apache.org">
    <head>
        <meta charset="utf-8" />
        <title>Wicket test</title>
        <link href='http://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:regular,bold' rel='stylesheet' type='text/css' />
        <link rel="stylesheet" href="style.css" type="text/css" media="screen" title="Stylesheet" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <h1>Wicket test</h1>
            </div>
        </div>
        <div id="body">
            <h2>Simple test for wicket learning purposes</h2>
            <p>
                Test: <wicket:container wicket:id="message">text here</wicket:container>
            </p>
            <form wicket:id="form">
                <input wicket:id="textField" type="text" />
                <input wicket:id="evalButton" type="submit" value="evaluate" />
            </form>
            <p>
                Result: <span wicket:id="evalResultLabel">result</wicket:container>
            </p>
        </div>
        <div id="footer">
        </div>
    </body>
</html> 
```

这是对应的java代码：

```
public class HomePage extends WebPage {
    private Label               evalResultLabel;
    private TextField<String>   textField;

    public HomePage() {
        add(new Label("message", "lalala"));

        Form<?> form = new Form("form");
        textField = new TextField<String>("textField", new Model<String>("type expression here"));
        form.add(textField);

        form.add(new AjaxFallbackButton("evalButton", form) {
            @Override
            public void onSubmit(AjaxRequestTarget target, Form<?> form) {
                String expr = textField.getModelObject();
                evalResultLabel.setDefaultModelObject(expr);
                if (target != null) {
                    target.add(evalResultLabel);
                }
            }
        });

        evalResultLabel = new Label("evalResultLabel", new Model<String>(""));
        evalResultLabel.setOutputMarkupId(true);

        add(form);
        add(evalResultLabel);
    }
} 
```

错误信息如下：

Unexpected RuntimeException - 最后一个原因：无法在 [Page class = HomePage，id = 0，render count = 1] 中找到 ID 为“form”的组件，预期：“.form”。找到具有相似名称的：''

在标记行中：

```
<form wicket:id="form"> 
```

当我运行 WicketTester 测试时，它会告诉我：

WARN - 组件 - 在通常不呈现为标记的组件上设置的标记 ID。标记 id：evalResultLabel3，组件 id：evalResultLabel，组件标签：容器。

谁能告诉我我做错了什么。我知道我可能会在书中进一步了解这一点，但这有点违背了这个测试的目的。

更新：当我使用普通检票口按钮时存在同样的问题：

```
public class HomePage extends WebPage {
    private Label               evalResultLabel;
    private TextField<String>   textField;

    public HomePage() {
        add(new Label("message", "lalala"));

        Form form = new Form("form");
        textField = new TextField<String>("textField", new Model<String>("type expression here"));
        form.add(textField);

        form.add(new Button("evalButton") {
            @Override
            public void onSubmit() {
                String expr = textField.getModelObject();
                evalResultLabel.setDefaultModelObject(expr);
            }
        });

        evalResultLabel = new Label("evalResultLabel", new Model<String>(""));

        add(form);
        add(evalResultLabel);
    }
} 
```

这与书中给出的示例几乎相同。我看不出我做错了什么。虽然这本书相当老，但我相信使用 Wicket 1.2 或 1.3，也许他们在此期间改变了一些东西？任何想法如何修复这一小段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:42:36.830

当您想通过 Ajax 更新一些*空*组件时， setOutputMarkupId(true) 并不能解决问题。您还需要用户 setOutputMarkupPlaceholder(true)，我目前不确定这是否适用于 wicket:container。您可能必须将其更改为跨度或类似的东西，因为 Wicket 在通过 Ajax 更新时需要一些 HTML 组件来扩展......

带有空标签的 wicket:container 通常不会渲染任何内容。所以没有什么可以被 Ajax 取代。起初这可能看起来很麻烦，但这是一个很容易习惯的事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:54:39.843

对不起，我解决了这个问题。我用来测试代码的嵌入式 Jetty 插件存在问题。当我用 Maven 构建应用程序时，它突然开始引入所有这些 Jetty 的东西，所以我重新启动了嵌入式服务器，结果：我的代码工作了。

# php - 查询是来自 jquery 的空 mysql php 变量

> ID：11795402
> 
> 赞同：1
> 
> 时间：2012-08-03T12:04:39.577
> 
> 标签：php, jquery, mysql, variables

我有一个 javascript 在检查复选框并传递变量时加载 DIV 的内容。

我检索变量，`$color = $_GET['color'];`然后执行一些 IF 来选择我的查询：

```
if ($color != '') 
{
    if ($sortBy != '')
    {
        $items = mysql_query("SELECT * FROM item_descr  WHERE color_base1 = '$color' ORDER BY '$sortBy' DESC");
    }
    else 
    { 
        $items = mysql_query("SELECT * FROM item_descr WHERE color_base1 = $color");
        echo $color;
        $result = mysql_query($items) or die(mysql_error()); 
    }
} 
```

每次 $result 都返回“Quert was empty”，即使 $color 包含一个值。

注意：我也尝试将 $color 放在这样的查询中：'$color' 和 '".$color."'。没有工作 你知道发生了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:17:52.787

试试这个更简单的代码：

```
if ($sortBy != '')
    $query = "SELECT * FROM item_descr WHERE color_base1 = '$color' ORDER BY $sortBy DESC";
else 
    $query = "SELECT * FROM item_descr WHERE color_base1 = '$color'";
$result = mysql_query($query) or die(mysql_error()); 
```

我删除了周围的引号`$sortBy`，我添加了周围的引号`$color`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:16:29.730

变量应该被引用`'`或`"`

```
$items = mysql_query("SELECT * FROM item_descr WHERE color_base1 = '$color'"); 
```

或为了更好的可读性

```
$items = mysql_query("SELECT * FROM item_descr WHERE color_base1 = ".$color); 
```

并删除`$result`as`$items`将返回 true 或 false

# ocaml - ocamllex 正则表达式的外部定义

> ID：11795404
> 
> 赞同：2
> 
> 时间：2012-08-03T12:04:51.950
> 
> 标签：ocaml, pretty-print, lexer, ocamlyacc, ocamllex

我已经实现了 lexer/parser/pretty-printer 的常用组合，用于在我的代码中读入/打印类型。当涉及到通常用于符号、标点符号或分隔符的纯字符串正则表达式时，我发现词法分析器和漂亮打印机之间存在冗余。

例如我现在有

```
rule token = parse
  | "|-" { TURNSTILE } 
```

在我的`lexer.mll`文件中，以及类似的功能：

```
let pp fmt (l,r) = 
  Format.fprintf fmt "@[%a |-@ %a@]" Form.pp l Form.pp r 
```

用于漂亮的印刷。如果我决定更改 TURNSTILE 的字符串，我必须编辑代码中的两个地方，我觉得这不太理想。

显然，OCaml 词法分析器支持一定的能力来定义正则表达式，然后*在`mll`文件*中引用它们。所以`lexer.mll`可以写成

```
let symb_turnstile = "|-"

rule token = parse
  | symb_turnstile { TURNSTILE } 
```

但这不会让我`symb_turnstile`从外部访问，比如我的漂亮打印功能。事实上，在运行之后`ocamllex`，并没有出现`symb_turnstile`in `lexer.ml`。我什至无法在`lexer.mll`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T10:26:11.423

最后，我选择了我从`ocamllex`自身来源中窃取的以下风格（所以我猜这是标准做法）。从字符串到标记的映射（这里是关联列表）在序言中定义`lexer.mll`

```
let symbols =
  [ 
    ...
    (Symb.turnstile, TURNSTILE); 
    ...
  ] 
```

其中`Symb`是定义`turnstile`为字符串的模块。然后，词法部分`lexer.mll`故意过于笼统：

```
rule token = parse
  ...
  | punctuation
    {
      try 
        List.assoc (Lexing.lexeme lexbuf) symbols
      with Not_found -> lex_error lexbuf  
    }
  ... 
```

where`punctuation`是匹配符号序列的正则表达式。

现在可以像这样编写漂亮的打印机。

```
let pp fmt (l,r) = 
  Format.fprintf fmt "@[%a %s@ %a@]" Form.pp Symb.turnstile l Form.pp r 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T15:31:09.263

尽管这两个标记在符号上看起来都像字符串，但它们确实非常不同。我认为没有一种方便的类型可以共享它们以供 ocamllex 和 Printf.printf 使用。这可能是 ocamllex 不支持此类外部定义的原因。使用宏工具（文本包含）可能会获得您想要的效果。

# javascript - Javascript中用于查找参数的正则表达式

> ID：11795406
> 
> 赞同：1
> 
> 时间：2012-08-03T12:04:57.087
> 
> 标签：javascript, regex, postgresql

我正在尝试在 javascript 中编写一个正则表达式来捕获 PostgreSQL 字符串中的所有命名参数以将它们放入表中

假设我们有

```
var query="SELECT table.data FROM table JOIN table2 ON table2.id=table.id_tab2 WHERE table2.field <> :parm1::int GROUP BY table.data HAVING table.data position(:docType::text in document_type) <> 0

var tab=new Array();

// 
```

我需要 rs 将所有参数放入选项卡：“ `param1::int`”和“ `docType::text`”我自己尝试过但没有成功 :( [http://regexr.com?31nok](http://regexr.com?31nok)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:13:37.250

像这样的东西？ `:(\w+::\w+)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:15:10.920

和`(:[a-zA-Z0-9]+::[a-zA-Z0-9]+)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T12:15:23.850

aZ 之间可能有奇怪的东西，所以只需使用不区分大小写的 [az] 或 [a-zA-Z]。我想你可能想要一个全局匹配（查找所有结果）。多行是另一回事，它使`.`匹配`\n`对您没有帮助，我可以看到。试试这个： [http ://regexr.com?31not](http://regexr.com?31not)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T12:17:15.523

我不知道postgreSQL，但我想我明白了你问题的要点。

这是正确的：[http](http://refiddle.com/2tc) ://refiddle.com/2tc吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T13:00:44.793

当我尝试`:([^: ]+::[^: ]+)`并`(:[^: ]+::[^: ]+)`没有发现任何差异时 - 两个 casec 中的冒号都匹配。

但是我找到了其他方法

```
(?!:)([a-z0-9_-]+::[a-z0-9_-]+) 
```

完美运行。第一部分`(?<=:)`确定“在您的主要表达式之前匹配一个组，而不将其包含在结果中。”

谢谢大家的回答；）

# r - 同时子集行和列

> ID：11795411
> 
> 赞同：6
> 
> 时间：2012-08-03T12:05:07.697
> 
> 标签：r, data.table

我对它的工作原理有点惊讶`data.table`：

```
> library(data.table)
data.table 1.8.2  For help type: help("data.table")
> dt <- data.table(a=11:20, b=21:30, c=31:40, key="a")
> dt[list(12)]
    a  b  c
1: 12 22 32
> dt[list(12), b]
    a  b
1: 12 22
> dt[list(12)][,b]
[1] 22 
```

我想要做的是在与选择匹配的行中获取单个列（或表达式）的值。我看到我必须将键作为列表传递，因为原始数字表示行号而不是键值。所以上面的第一个对我来说很清楚。但是为什么第二个和第三个子集表达式产生不同的结果对我来说似乎相当混乱。我想得到第三个结果，但希望能够以第二种方式编写它。

有什么好的理由为什么同时为行和列设置一个 data.table 子集总是包括键值和计算结果？除了上面的双子集之外，是否有一种语法上更短的方法来获得单个结果？

我在 R 2.15.1 上使用 data.table 1.8.2。如果你不能重现我的例子，你不妨考虑一个因素作为关键：

```
dt <- data.table(a=paste("a", 11:20, sep=""), b=21:30, c=31:40, key="a")
dt["a11", b] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T05:48:27.423

关于这个问题：

> 有什么好的理由为什么同时为行和列设置一个 data.table 子集总是包括键值和计算结果？

我相信（对我来说足够好）的原因仅仅是 Matthew Dowle 还没有*开始*添加该选项（可能是因为他优先考虑了更有用的功能，例如“:= with by”）。

在[我在此处回答](https://stackoverflow.com/questions/9471744/select-last-observation-from-longitudinal-data/9471898#comment12058952_9471898)之后的评论中，Matthew 似乎表明它在他的 TODO 列表中，并指出“[this] 是添加`drop=TRUE`时将执行的操作（具有速度优势）`drop`”。

在此之前，以下任何一项都可以完成工作：

```
dt[list(12)][,b]
# [1] 22
dt[list(12)][[2]]
# [1] 22
dt[dt[list(12), which=TRUE], b]
# [1] 22 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T12:39:38.860

一种可能性是使用：

```
dt[a == 12] 
```

和

```
dt[a == 12, b] 
```

这将按预期工作，但它会阻止二进制搜索并需要顺序搜索（是否有计划改变这种行为？？），使其可能更慢。

* * *

**2014 年 9 月更新：现在在 v1.9.3**

来自新闻：

> `DT[column==values]`现在已优化为在`DT`时使用 的键`key(DT)[1]=="column"`，否则会自动添加辅助键（又名索引），因此下一个键`DT[column==values]`要快得多。`DT[column %in% values]`是等价的；即，两者都`==`接受`%in%`向量值。无需更改代码；现有代码应该自动受益。可以使用手动添加辅助键`set2key()`并使用`key2()`. 这些优化和函数名称/参数是实验性的，可以使用`options(datatable.auto.index=FALSE)`.

# mysql - mysql-query 中有多少个 where 子句太多了？

> ID：11795414
> 
> 赞同：3
> 
> 时间：2012-08-03T12:05:21.840
> 
> 标签：mysql, performance, where-clause

我在“属性”列中有一个包含许多（可能超过 500 个）不同属性的表，并且想要找到包含许多特定属性（~200）的行。查找它们的查询将包含大量 where 子句。

有多少 where 子句是可以的，才能获得可接受的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:08:16.927

重要的不是数量。重要的是您设计数据库结构和查询的程度。

1.  确保您在 where 查询中使用的列上有一个索引

2.  将您的`WHERE`语句放在首先匹配最少行的顺序中，然后继续进行。

这是[MySQL 的 WHERE 子句优化指南](http://dev.mysql.com/doc/refman/5.0/en/where-optimizations.html)以获得更多提示

# c# - Linq where element.equals 一个数组

> ID：11795415
> 
> 赞同：2
> 
> 时间：2012-08-03T12:05:30.873
> 
> 标签：c#, .net, linq

我可以简单地通过

```
 string myKeyword="test";
   GridView1.DataSource = from e in table where e.Keyword.Equals(myKeyword) select e; 
```

我怎样才能将它扩展到一个数组？我想要类似的东西：

```
 string[] myKeywords={"test1", "test"};
   GridView1.DataSource = from e in table where e.Keyword.Equals(myKeywords) select e; // something like this? 
```

我想获取关键字等于 myKewords 中的关键字之一的所有元素

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T12:07:39.593

您需要使用以下[`Enumerable.Contains`](http://msdn.microsoft.com/en-us/library/bb352880.aspx)方法：

```
var temp = (from e in table where myKeywords.Contains(e.Keyword)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:15:28.763

```
string[] temp = (from e in table
                 join k in myKeywords on  e.Keyword equals k
                 select e.Keyword).ToArray(); 
```

# drupal-7 - 显示今日热门、本月、所有内容

> ID：11795423
> 
> 赞同：0
> 
> 时间：2012-08-03T12:06:15.120
> 
> 标签：drupal-7

我正在使用drupal7，无法弄清楚如何在侧栏中显示今天/月份/所有流行的内容。人们建议使用统计模块，但只过滤今天最流行的内容。我认为可以使用视图模块来完成。帮我。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:46:21.767

视图 + 块 + 统计。这里的关键是根据内容统计信息进行排序和过滤。

**您可以使用视图管理屏幕的字段设置**部分配置排序。您可以从同一管理屏幕的“**公开过滤器**”部分配置过滤。

至于在“侧边栏”中显示它（Drupal-speak 中的块）；您需要从视图的管理屏幕创建**块**显示类型。

# css - CSS inline-block 问题 - 元素被下推

> ID：11795429
> 
> 赞同：18
> 
> 时间：2012-08-03T12:06:30.543
> 
> 标签：css

演示： http: [//jsfiddle.net/q4uNj/](http://jsfiddle.net/q4uNj/)
所以这里的问题是：我无法弄清楚为什么第二个 div - `class="other"`- 被推下。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-03T12:10:51.060

您可以使用 css-property 垂直对齐。将它添加到“.other”规则中就可以了。

```
.other {
    display:inline-block;
    vertical-align:top;
    height:32px;
    margin:2px;
} 
```

​</p>

或者您可以使用下面的建议，但不要忘记将“溢出：隐藏”添加到#toolbar。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:08:48.470

他们两个（.button和.other）都应该有float：left，所以一切都会好的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:15:19.513

[http://jsfiddle.net/q4uNj/14/](http://jsfiddle.net/q4uNj/14/)

正确的CSS

```
#toolbar {
  height: 36px;
  width: 100%;
  background: lightgray;
   clear:both;
}
.button {
  height: 30px;
  width: 36px;
  margin: 2px;
  float:left;
  border: 1px solid #000;
  cursor: pointer;
  border-radius: 2px;
}
.other {
    float:left;
    height:32px;
    margin:2px;
    } 
```

# svn - git-svn：主干内的分支和标签。它可以工作吗？

> ID：11795430
> 
> 赞同：0
> 
> 时间：2012-08-03T12:06:34.867
> 
> 标签：svn, git-svn

我们使用具有以下布局的颠覆存储库：

```
myrepo
-project1
-project2
-projectn
-branches
--project1-test
-tags
--
etc. 
```

我想在我的电脑上使用 git，所以我找到了 git-svn 工具。我不能只提取一个项目，因为其中一些是库，我需要它们。**问题是分支和标签文件夹与其他项目处于同一级别（没有主干文件夹）。**

我还能以某种方式将它与 git-svn 一起使用吗？我尝试使用以下选项使用 git-svn 导出它

```
git svn clone svn://myrepo -T . -b branches -t tags 
```

但它失败了。

# c# - SMTP 服务器需要安全连接或客户端未通过身份验证。

> ID：11795435
> 
> 赞同：3
> 
> 时间：2012-08-03T12:07:08.520
> 
> 标签：c#, smtp, mail-server

我正在使用 asp 中的“createuserwizard”创建一个表单。这是我的代码。

```
<asp:CreateUserWizard ID="userwizard" ContinueDestinationPageUrl="~/secretfiles/secret.aspx" runat="server" >
    <MailDefinition BodyFileName="register.txt" Subject="Registration Confirmation" From="amrit.enest@gmail.com" />
    </asp:CreateUserWizard> 
```

这是我的 web.config 文件设置。

```
 <mailSettings>
      <smtp deliveryMethod="Network" from="amrit.enest@gmail.com">
        <network host="smtp.gmail.com" port="25" userName="amrit.enest@gmail.com" password="sending emails's password" />
      </smtp>
    </mailSettings> 
```

然后设置了一个 Smtp .in ISS 设置我选择了以下选项。

```
->Use localhost(SMTP)
->port=25
->authentication not required 
```

现在当一个新用户点击提交按钮时，它会给出以下错误消息并且邮件没有被发送。

**SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应是： 5.7.0 必须首先发出 STARTTLS 命令。ud8sm21095949igb.4**

请帮助各位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:14:00.713

使用`enableSsl="true"`，像这样：

```
 <mailSettings>
  <smtp deliveryMethod="Network" from="amrit.enest@gmail.com">
    <network enableSsl="true" host="smtp.gmail.com" port="25" userName="amrit.enest@gmail.com" password="sending emails's password" />
  </smtp>
</mailSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:14:11.277

服务器需要 SSL，因此您需要将其添加到您的配置中：

```
<mailSettings>
  <smtp deliveryMethod="Network" from="amrit.enest@gmail.com">
    <network host="smtp.gmail.com" port="25" userName="amrit.enest@gmail.com" 
        password="sending emails's password" enableSsl="true" />
  </smtp>
</mailSettings> 
```

有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/ms164242.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:13:17.290

```
protected void Button1_Click(object sender, EventArgs e)
{

    MailMessage mail = new MailMessage();
    MailAddress from = new MailAddress("your mail address@mail.com");
    SmtpClient clientobj = new SmtpClient("smtp.gmail.com");
    mail.From = from;
    mail.To.Add(new MailAddress(" to mail address@gmail.com"));
    mail.Subject = "example gridview";
    mail.Body+="Please check below data <br/><br/>";
    mail.Body += getgridviewdata(gv1);
    mail.IsBodyHtml = true;
    clientobj.Credentials = new System.Net.NetworkCredential("your mailaddress@gmail.com", "your email password");
    clientobj.Port =587;
    clientobj.EnableSsl = true;
  clientobj.Send(mail);

} 
```

上面的 gv1 是我的 gridview id

```
public string getgridviewdata(GridView gv)
{
    StringBuilder strBuilder = new StringBuilder();
    StringWriter strWriter = new StringWriter(strBuilder);
    HtmlTextWriter htw = new HtmlTextWriter(strWriter);
    gv.RenderControl(htw);
    return strBuilder.ToString();
}
public override void VerifyRenderingInServerForm(Control control)
{
    /* Verifies that the control is rendered */
} 
```

您也在源代码中编写以下内容

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="example.aspx.cs" Inherits="example" EnableEventValidation="false" %> 
```

# wordpress - 如何编写一个 Wordpress 插件

> ID：11795445
> 
> 赞同：3
> 
> 时间：2012-08-03T12:07:48.423
> 
> 标签：wordpress, plugins

嗨，我是一个新手，`wordpress`我需要知道如何在 wordpress 中编写一个带有页面选项的简单 wordpress 插件。

我需要一个在管理面板和前端编辑页脚文本的演示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:09:36.020

使用以下代码动态更改管理页脚文本。将以下代码另存为`.php`您的 wordpress 插件目录中的文件。

```
<?php
/*
Plugin Name: Fancy Search Box For Your Theme
Plugin URI: http://svarun.in/
Description: Fancy Search Form
Version: 1.0.5
Author: Varun
Author URI: http://svarun.in
License: GPL
*/

register_activation_hook(__FILE__,'footer_word_install');
register_deactivation_hook( __FILE__, 'footer_word_remove' );

function footer_word_install() {
    add_option("footer_word_data", 'Default', '', 'yes');
}

function footer_word_remove() {
    delete_option('footer_word_data');
}

if (is_admin()) {
    add_action('admin_menu', 'footer_word_admin_menu');
    function footer_word_admin_menu() {
        add_options_page('footer word', 'footer word', 'administrator',
    'footer-world', 'footer_word_html_page');
    }
}

function footer_word_html_page() {
    ?>
    <div>
    <h2>footer_word Options</h2>
    <form method="post" action="options.php">
    <?php wp_nonce_field('update-options'); ?>
    <table width="510">
    <tr valign="top">
    <th width="92" scope="row">Enter Text</th>
    <td width="406">
    <input name="footer_word_data" type="text" id="footer_word_data" value="<?php echo get_option('footer_word_data'); ?>" />
    </td>  
    </tr>
    </table>
    <input type="hidden" name="action" value="update" />
    <input type="hidden" name="page_options" value="footer_word_data" />
    <p>
    <input type="submit" value="<?php _e('Save Changes') ?>" />
    </p>
    </form>
    </div>
    <?php
}

function change_footer_admin() {
    echo get_option('footer_word_data');
}

add_filter('admin_footer_text', 'change_footer_admin');
?> 
```

# css - 如何连续使图像旋转

> ID：11795446
> 
> 赞同：1
> 
> 时间：2012-08-03T12:07:49.560
> 
> 标签：css, css-transitions

我有徽标，我想在悬停时连续旋转。如何做到这一点？仅使用 css3 是否可行，或者我们需要 javascript 帮助？还有一件事，当那些标志悬停时，它会在没有完成旋转的情况下停止。即使徽标未悬停，我们如何告诉 css 完成旋转。

我目前的CSS是：

```
header .logo:hover img{ 
    -webkit-transition: all 1.2s ease-in;
    -moz-transition: all 1.2s ease-in;
    -o-transition: all 1.2s ease-in;
    -ms-transition: all 1.2s ease-in;
    -moz-transform: rotateY(720deg);
    -webkit-transform: rotateY(720deg);
    transform: rotateY(720deg); 
    filter: progid : DXImageTransform.Microsoft.BasicImage ( rotation = 2 )
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:32:22.867

我认为您需要为此使用关键帧动画。

演示（webkit）：[jsFiddle](http://jsfiddle.net/KWFEv/)

代码：

```
.one:hover {
    -webkit-animation: all 1.2s linear infinite;

}

@-webkit-keyframes all
{

0%   {-webkit-transform: rotateY(0deg);}
100% {-webkit-transform: rotateY(720deg);}

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T12:28:12.450

尝试使用 css3 动画：

```
-webkit-animation: slide 10s linear infinite;
-moz-animation: slide 10s linear infinite;
-ms-animation: slide 10s linear infinite;
-o-animation: slide 10s linear infinite;
animation: slide 10s linear infinite; 
```

# scala - 具有不同类型参数化值类型的 Map

> ID：11795454
> 
> 赞同：1
> 
> 时间：2012-08-03T12:08:24.477
> 
> 标签：scala, generics, map, type-parameter

我想知道是否可以使用不同构造类型的值创建地图。像这样：

```
class WowClass[A <: HeyClass]

val map = Map[String, WowClass[A <: HeyClass]]() 
```

这样的值可以是不同的孩子`HeyClass`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:16:54.470

您绝对可以将声明值类型的子类型存储`V`在映射中，但是如果您从映射中读取，您所知道的就是您获得 type 的值`V`，即层次结构的上限类型。如果您需要了解更多信息，则可以对这些值进行模式匹配。

```
trait V
case class A1() extends V
case class A2() extends V

var map = Map[String, V]()

map += ("A1" -> A1())
map += ("A2" -> A2())

map.values.head match {
  case a1: A1 => println("A1")
  case a2: A2 => println("A2")
} 
```

如果这对您来说不够精确，请查看[HLists](http://apocalisp.wordpress.com/2010/07/06/type-level-programming-in-scala-part-6a-heterogeneous-list%C2%A0basics/)。从某种意义上说，它们是 n 元组的类型安全实现，即具有自然数键和任意类型值的固定大小的映射。

将（只读）`Map[K, V]`视为函数`K -> V`有助于理解为什么不能直接拥有一个采用不同类型值的映射，并且它也静态地知道每个键返回的值的确切类型。给定上面的函数签名，怎么可能静态地知道 key`"foo"`返回一个值`V1 <: V`，而 key`"bar"`返回一个类型的值`V2 <: V`？这个额外的信息在某种程度上需要成为函数签名的一部分，它实际上是在 HLists 的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:37:42.583

如果使用 HLists 或 HMaps，Miles Sabins [Shapeless将得到准确的类型。](https://github.com/milessabin/shapeless/ "无形的github")可能值得快速查看示例，看看它们是否适合您。

# java - 如何在 JBoss 6 中使用 Guava

> ID：11795456
> 
> 赞同：2
> 
> 时间：2012-08-03T12:08:31.047
> 
> 标签：java, guava, jboss6.x

我正在尝试将 Guava 用于我的项目，并且在启动 JBoss 时有很多警告：

```
WARN  [ClassLoaderManager] Unexpected error during load of:com.google.common.base.Equivalences$Equals: java.lang.IncompatibleClassChangeError: class com.google.common.base.Equivalences$Equals has interface com.google.common.base.Equivalence as super class
WARN  [ClassLoaderManager] Unexpected error during load of:com.google.common.base.FunctionalEquivalence: java.lang.IncompatibleClassChangeError: class com.google.common.base.FunctionalEquivalence has interface com.google.common.base.Equivalence as super class
WARN  [ClassLoaderManager] Unexpected error during load of:com.google.common.collect.AbstractMapBasedMultiset$1$1: java.lang.IllegalAccessError: class com.google.common.collect.AbstractMapBasedMultiset$1$1 cannot access its superclass com.google.common.collect.Multisets$AbstractEntry
[...] 
```

根据我的研究，似乎与旧的 Google Collection 不兼容。[community.jboss.org](https://community.jboss.org/message/581507)的这个帖子建议使用**jboss-scanning.xml**。我没有更改，JBoss 文档指定此文件用于过滤注释...

您是否已经遇到过这个问题？

你能提出一个解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T15:31:06.157

[你是对的，谷歌收藏和番石榴不兼容，谷歌收藏主页上](http://code.google.com/p/google-collections/)说得很清楚：

> Guava 是旧 Google Collections Library 的完全兼容的超集。它还包括多年的错误修复、文档修复和性能修复，因此我们强烈建议您使用 Guava 而不是 Google Collections。
> 
> 如果您的应用程序最终在同一个类路径上同时包含 google-collect-1.0.jar 和 guava-r##.jar，只需删除 Google Collections JAR 就可以了。**如果你不删除它，它要么会导致可怕的问题（如果它出现在类路径中的番石榴之前），要么永远不会被看到（如果它出现在之后）**。

所以基本上：要么从类路径中删除谷歌集合，要么首先加载番石榴。

# javascript - window.unload 在 IE8 中不起作用

> ID：11795460
> 
> 赞同：1
> 
> 时间：2012-08-03T12:08:36.100
> 
> 标签：javascript, javascript-events

我想`unload`在父窗口打开的子窗口上执行 javascript。我尝试了下面的代码，它没有调用该函数。

```
 childWindow = window.open(url, 'MyWindow', GetWindowOptions(1020, 600), true);
 childWindow.onunload = function () { test(); }; 
```

我写的测试函数是：

```
function test() {
alert(1);
} 
```

我正在使用 IE8 浏览器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T12:21:59.410

替换`attachEvent`而不是`onunload`设置器以添加事件。我已经在 IE6 - 8 中对其进行了测试，它运行良好。确保您还`addEventListener`用于 IE9+ 和其他浏览器：

```
var unloadFunc = function () { test(); };
if (childWindow) { // null if a pop-up blocker does not create the window
    if (childWindow.addEventListener) {
        childWindow.addEventListener('unload', unloadFunc, false);
    } else {
        childWindow.attachEvent('onunload', unloadFunc);
    }
} 
```

显然，如果 URL 来自不同的域，这将不起作用。
如果要在关闭来自**不同来源**的窗口时执行函数，请使用`setInterval`或`setTimeout`轮询布尔属性的值`childWindow.closed`。当窗户关闭时，这是真的。

例如：

```
if (childWindow) { // null if a pop-up blocker does not create the window
    setTimeout(function checkState() {
        if (childWindow.closed) {
            // onunload Logic here.
        } else {
            setTimeout(checkState, 250);
        }
    }, 250);
} 
```

* * *

注意：其他答案建议使用该`beforeunload`事件。请记住，规范[允许](http://dev.w3.org/html5/spec-LC/history.html#unloading-documents)实现在此事件期间忽略`confirm`、`alert`和调用。`prompt``showModalDialog`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:15:49.653

您可以尝试使用`onbeforeunload`. 我在 Intranet 应用程序的打印报告上使用了类似的东西，该应用程序执行 AJAX 调用以标记它已打印：

```
if (window.onbeforeunload) {
    window.onbeforeunload = function() { didPrint(someData); };
} else {
    window.onunload = function() { didPrint(someData); };
} 
```

# asp.net-mvc - 变化：* 错误地添加到 http 标头响应 (asp.net mvc3)

> ID：11795466
> 
> 赞同：8
> 
> 时间：2012-08-03T12:08:49.983
> 
> 标签：asp.net-mvc, asp.net-mvc-3, http-headers, outputcache, appharbor

我正在使用以下输出缓存配置文件：

```
<add name="MyFunkyProfile" duration="180" varyByParam="*" location="ServerAndClient" /> 
```

在开发中，我有一个带有一个 Vary 条目的响应标头：

```
HTTP/1.1 200 OK
Server: Microsoft-IIS/7.5
...
Vary: Accept-Encoding
Cache-Control: private, max-age=180, s-maxage=0
... 
```

当我部署我的应用程序时，我在响应中插入了一个额外的 Vary 条目：

```
HTTP/1.1 200 OK
Server: nginx
...
Vary: Accept-Encoding
Cache-Control: private, max-age=180, s-maxage=0
...
Vary: *
... 
```

为什么这个额外的 Vary 条目？这会阻止缓存正常工作。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:16:25.287

您是否尝试过`varyByParam`在`None`您的配置文件/配置文件中设置？请参阅[http://msdn.microsoft.com/en-us/library/hdxfb6cy.aspx](http://msdn.microsoft.com/en-us/library/hdxfb6cy.aspx)。

另外，只是在这里猜测 - dev 和“live”之间的配置文件是否不同，例如`varyByParam`可能设置不同？

*注意：我刚刚加入 SO，所以还不能添加评论（我会这样做而不是将其作为回复发布）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:40:42.920

标`Vary: Accept-Encoding`头由 AppHarbor 路由层插入。标头对于获取下游代理（通常是像 AWS CloudFront 或类似的 CDN）以正确缓存 gzip 和非 gzip 版本的内容是必需的。这个[问题有额外的细节](https://stackoverflow.com/questions/7848796/what-does-varyaccept-encoding-mean)。

您能否详细说明这是如何给您的应用程序带来问题的？

# blackberry-eclipse-plugin - 错误：代码文件不包含来自此 signerid 的签名。请要求签名

> ID：11795475
> 
> 赞同：1
> 
> 时间：2012-08-03T12:09:20.263
> 
> 标签：blackberry-eclipse-plugin, blackberry-webworks

我试图签署我的黑莓小应用程序。但是在签署一些文件并且没有响应后它给了我错误。然后我在 1 小时后强行关闭 signatureTool。如何消除此错误。

我尝试使用命令提示符签署同一个应用程序，然后它给出了错误。构建失败-config.xml 未找到。但我检查了我的应用程序它存在。请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T05:41:37.293

我发现我使用的是 jdk 1.7，这就是签名工具挂起的原因。然后我使用了 jdk 1.6，现在它工作正常。

# c# - 修改绑定列表中的项目会修改原件还是副本？

> ID：11795476
> 
> 赞同：0
> 
> 时间：2012-08-03T12:09:22.930
> 
> 标签：c#, wpf, xaml, data-binding, caliburn.micro

我对如下定义的 WPF (+CaliburnMicro) 列表框有一个奇怪的问题

```
 <GroupBox Header="Configurations" Width="Auto" Grid.Row="1" Grid.Column="2">
        <ListBox ItemsSource="{Binding SelectableConfigurations}" BorderThickness="0" Width="Auto">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <CheckBox Content="{Binding Path=Name}" IsChecked="{Binding Path=IsSelected}" Margin="15,3" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ListBox>
    </GroupBox> 
```

看来，当我在列表中选择一个项目时，它会修改绑定列表中的项目，但不会在其他地方引用该项目。IE 下面的代码会更新 _selectableConfigurations 列表中的项目，但不会更新附加到 _sc 列表的原始对象。

看来，当属性被修改时，原始对象在列表中被替换，而不是简单地更新。是这样吗？

```
 private readonly List<SelectableConfiguration> _selectableConfigurations;
    private ISelectableConfigurations _sc;

    public ConfigurationTabViewModel(
        ISelectableConfigurations configurations)
    {
        _sc = configurations;
        _selectableConfigurations = configurations.SelectableConfigurations.ToList();
    }

    public List<SelectableConfiguration> SelectableConfigurations
    {
        get { return _selectableConfigurations; }
    } 
```

**编辑**

```
 public class SelectableConfiguration
    {
        public bool IsSelected { get; set; }
        public string Name { get; set; }
        public IRunableOrmConfiguration Configuration { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:18:23.753

您的项目可能会被很好地编辑，但 UI 的其余部分不知道它，因为该项目没有“说什么”。在项目类中[实现。](http://msdn.microsoft.com/en-us/library/ms229614.aspx) [`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

# google-analytics - 从后端使用 Google Analytics

> ID：11795477
> 
> 赞同：20
> 
> 时间：2012-08-03T12:09:23.757
> 
> 标签：google-analytics, backend

我为我的应用程序指定了一些自定义谷歌分析事件。触发这些事件有时并不容易。

例如：用户在购买后被重定向到主页，我必须转发一些购买后显示该主页的数据，以`_gaq`根据该数据推送某些内容。

有没有办法从后端触发谷歌分析，例如在控制器中，如果操作是 ajax 请求或普通请求并且响应具有重定向或正常状态，则无需注意？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-15T07:38:29.977

要从后端触发 Google Analytics，您应该使用：**[Measurement Protocol](https://developers.google.com/analytics/devguides/collection/protocol/v1/)**。

这是[分析集合](https://developers.google.com/analytics/devguides/collection/)的一部分：

> **Web 跟踪 (ga.js)**测量用户与网站或 Web 应用程序的交互。
> 
> **Android**测量用户与 Android 应用程序的交互。
> 
> **iOS**测量用户与 iOS 应用程序的交互。
> 
> **测量协议**使用此低级协议测量任何环境中的用户交互。

目前它可以作为开发预览版使用。要注册，只需[请求访问测试版](https://services.google.com/fb/forms/analyticspreview/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-12T07:31:12.260

是的，谷歌分析收集的所有数据都来自 GIF 请求，这只不过是一个带有非常大的查询字符串的单个像素 gif。谷歌处理服务器的日志，数据进入您的分析。如果您检查页面加载的资源，您会发现如下内容：

`http://www.google-analytics.com/__utm.gif?utmwv=4&utmn=769876874&utmhn=example.com&utmcs=ISO-8859-1&utmsr=1280x1024&utmsc=32-bit&utmul=en-us&utmje=1&utmfl=9.0%20%20r115&utmcn=1&utmdt=GATC012%20setting%20variables&utmhid=2059107202&utmr=0&utmp=/auto/GATC012.html?utm_source=www.gatc012.org&utm_campaign=campaign+gatc012&utm_term=keywords+gatc012&utm_content=content+gatc012&utm_medium=medium+gatc012&utmac=UA-30138-1&utmcc=__utma%3D97315849.1774621898.1207701397.1207701397.1207701397.1%3B...`

每个`utm`值的含义可以在[这里](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting#gifParameters)找到，但是[这个](http://www.cheatography.com/jay-taylor/cheat-sheets/google-analytics-utm-parameters-v2/)更完整。

因此，如果您的代码使用适当的参数自行处理查询字符串构造，然后触发到该 gif-url，则可以在服务器端使用 Google Analytics 跟踪事物。

在 PHP 中有一个非常好的项目：[Server-Side Google Analytics PHP Client](http://code.google.com/p/php-ga/)。我认为你可以在你的 php ajax 文件中实现它来处理那些棘手的自定义变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T13:09:01.780

这样做可能会触发谷歌的反垃圾邮件措施。如果他们看到一个 IP 发送了如此多的统计信息，他们可能会将其列入黑名单。

我只需设置一个显示“刚刚购买”的 cookie，然后在主页的 Javascript 中检查它，从那里发送适当的事件并将其删除。

# java - RESTful URI 设计和使用 spring/java 的派生类实现

> ID：11795478
> 
> 赞同：2
> 
> 时间：2012-08-03T12:09:29.733
> 
> 标签：java, spring, rest, spring-mvc, spring-roo

假设我们有fruit 作为基类，apple 和banana 作为派生子类。我想知道，哪些 URI 约定和实现最有意义。这个是直截了当的：

```
GET /fruits - returns list of all fruits
GET /bananas - returns list of all bananas
GET /apples - returns list of all apples
GET /bananas/new - returns form for creating a new banana 
```

现在，由于 Spring 已经处理了新对象的创建并设置了它的所有参数，所以保存对象的方法归结为：

```
fruit.persist(); // same for bananas and apples 
```

那么，您将如何设计网址：

```
POST /fruits - creates a new fruit // as generic URI ... OR
POST /bananas - creates a new banana // same for apples 
```

使用通用方法的问题似乎是，该方法会将香蕉/苹果保存为水果而不是香蕉/苹果：

```
@RequestMapping(value = "/", method = RequestMethod.POST)
private String saveFruit(@Valid Fruit fruit, Long basketId) {
    Basket basket = Basket.findBasket(basketId);
    fruit.setBasket(basket);
    fruit.persist();
} 
```

我不知道，尽管我在创建表单中设置了正确的子类（例如，在调用 GET /bananas/new 时），但如何告诉 spring 应该创建子类：

```
uiModel.addAttribute("fruit", new Banana()); 
```

所以目前我创建了两种保存苹果和香蕉的公共方法

```
POST /bananas - create a banana
POST /apples - create an apple 
```

像这样实现：

```
@RequestMapping(value = "/", method = RequestMethod.POST)
public String saveBanana(@Valid Banana fruit) {
    String basketId = this.saveFruit(fruit);
    return "redirect:/basket/edit/" + basketId;
} 
```

不知何故，这并不能满足我保持事物干燥和简单的需要。也因为在编辑水果时我想调用类似的东西

```
GET /fruits/123/edit - return the edit form of a fruit 
```

然后应该呈现哪些表单字段的逻辑由视图处理。

还可以考虑调用子类控制器，例如 /bananas/123/edit，它可以使代码更加解耦，并且在添加新水果时不需要更改文件。你认为什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:27:09.723

不要让你的框架支配你的**资源**设计，这一点*非常重要。*HTTP 对基类或子类一无所知，只知道资源。忘记 Spring 框架，您想从 HTTP/ReSt 的资源设计角度获得什么？

 **如果您倾向于的唯一原因`/fruits/{id}`是为了避免在后端重复，那么您的设计是由内部问题驱动的，而不是外部问题。

如果您的`banana`资源在格式化为 JSON 时与资源具有不同的表示形式`apple`（例如，新布局、不同属性等），那么恕我直言，它可能应该使用自己的资源来处理。

一旦你做出决定，然后看看如何使用 Spring 尽可能干净地完成它。**

# node.js - Node.js、socket.io、require()

> ID：11795481
> 
> 赞同：2
> 
> 时间：2012-08-03T12:09:48.313
> 
> 标签：node.js, socket.io

我的目标：创建将在两个 Web 浏览器之间发送 antyhing（事件、字符串、函数调用）的 node.js 服务器和客户端应用程序。

我安装并创建了简单的服务器，但问题从创建客户端开始。如[http://socket.io/](http://socket.io/)所说，我通过命令安装了它：

`npm install socket.io`

但基本示例中所需的文件：

`<script src="/socket.io/socket.io.js"></script>`

未下载或安装。里面有这样的文件，`/node_modules/socket.id/lib`但是是同一个文件吗？我认为这是 socket.io 客户端，但作为服务器模块，而不是 Web 浏览器 javascript 对吗？

如何`socket.io.js`让它正常工作并可以连接到 node.js 服务器，而不会出现 io/socket/require 未定义等错误？

**我不想创建响应正常 http 请求的网络服务器。我想要能够保持连接并能够在两个浏览器中的 JS 脚本之间进行通信的服务器**

我只能忍受，每个人都以世界上每个人都在每个可能的目录中都有 socket.io.js 文件的形式写关于 node.js 的内容。可能的重复：

[未找到 socket.io.js](https://stackoverflow.com/questions/10191048/socket-io-js-not-found)

`require()`从不在干净 JavaScript API 中的函数调用开始。所以我什至不尝试这个解决方案。任何人都可以解释如何正确包含和定义 io.* 吗？是关于 Express 框架的吗？为什么 node.js 和 socket.id 页面对明确要求只字不提？

问题是，我需要一个 CLIENT js 库，我的意思不是“服务器上的客户端”，我的节点二进制服务器将能够连接到其他页面/服务器并进行通信。我的意思是 HTML 客户端页面中的客户端。并且，如果需要，其他相关的 JS。

[我从http://serv1.aelag.com:8084/](http://serv1.aelag.com:8084/)的演示中获取了一个示例

```
/** Socket.IO 0.6.2 - Built with build.js */
/**
 * Socket.IO client
 * 
 * @author Guillermo Rauch <guillermo@learnboost.com>
 * @license The MIT license.
 * @copyright Copyright (c) 2010 LearnBoost <dev@learnboost.com>
 */

this.io = {
    version: '0.6.2',
... 
```

如何以正常方式获取该文件而不是从其他服务器（可能不稳定或旧版本）窃取？我需要那个文件。有任何依赖关系吗？我应该通过构建它“build.js”来创建它还是开发人员这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:54:58.247

**我终于解决了这个**

socket.io 脚本不作为平面文件存在。它**由 node.js 服务器生成**并提供给浏览器。所以。包括它：

`<script src="/socket.io/socket.io.js"></script>`

仅当 node.js 服务器在与带有 Web 应用程序的 Web 服务器相同的端口上启动时才有效。如果您尝试从端口 80 上的例如 apache 加载此脚本，则需要将整个路径放入 node.js 服务器侦听主机：

`<script src="http://localhost:8080/socket.io/socket.io.js"></script>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:24:56.847

您确实需要在`/socket.io/socket.io.js`任何地方添加。如果您已经通过`npm install socket.io`应用程序安装了 socket.io，那么您知道如何处理它。几个月前我自己玩过socket.io，这是我想出的一个非常简单的“聊天”，它很有效。所以它可能会帮助你！（我正在使用 ExpressJS。顺便说一句，一个非常有用的 Node.JS 框架）

这是您的服务器端应用程序：

```
var app = require('express').createServer();
var io = require('socket.io').listen(app);

app.listen(3000);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket) {
    socket.on('news', function (data) {
        socket.emit('news', { content: data.text });
        socket.broadcast.emit('news', { content: data.text});
    });
}); 
```

这是你的 index.html

```
<!DOCTYPE html>
<html>
<head>
<title>socket test</title>
</head>
<body>
<input type="text" id="Username"> <input type="text" id="Content"><input type="button" value="send" onclick="sendMessage()"><br />
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:3000/pathtoproject');
  socket.on('news', function (data) {
    document.body.innerHTML += data.content + "<br />";
  });
  function sendMessage() {
      socket.emit('news', { text: document.getElementById('Username').value + ": " + document.getElementById('Content').value });
  }
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-24T16:41:24.193

我设法在客户端加载了socket.io，如下所示：

```
jQuery.getScript("bower_components/socket.io/lib/socket.js", function() {
   var socket = io.connect('http://localhost');
   socket.on('news', function (data) {
     console.log(data);
     socket.emit('my other event', { my: 'data' });
   });
}); 
```

# java - 在包含 maven-source-plugin 的 intellij 中构建 Java 堆空间错误

> ID：11795482
> 
> 赞同：0
> 
> 时间：2012-08-03T12:10:01.073
> 
> 标签：java, intellij-idea, maven-source-plugin

> **可能重复：**
> [我怎样才能给 intellij 更多的堆空间](https://stackoverflow.com/questions/8581501/how-can-i-give-intellij-more-heap-space)

我们一直在使用 intellij IDE 进行 java 开发。当我们尝试使用 maven-source-plugin 时，项目在命令提示符下编译成功。但在 intellij 中，它会引发堆空间错误。我们增加了 intellij 的起始和最大堆空间，但它没有用。

对解决此问题有任何帮助或说明吗？

# vbscript - 批量解析为VBscript

> ID：11795483
> 
> 赞同：1
> 
> 时间：2012-08-03T12:10:17.487
> 
> 标签：vbscript, batch-processing, batch-file

我有一个从链接[http://www.robvanderwoude.com/vbstech_ui_password.php复制的 VBScript](http://www.robvanderwoude.com/vbstech_ui_password.php)

在现有的 VBSscript 中，我添加了“Internet Explorer 版本”的代码：

**WS SCRIPT - 命名为 Password.vbs（***请参阅上面链接中的完整脚本***）**

```
strPw = GetPassword( "Please, type your password:" ) 

Sub Submit_OnClick
Const ForWriting = 2
Dim filesys, filetxt, FormContent
Set FormContent = document.getElementById("strPw")
Set filesys = CreateObject("Scripting.FileSystemObject")
Set filetxt = filesys.OpenTextFile("c:\temp.txt", ForWriting, True)
filetxt.WriteLine(FormContent.value) 
filetxt.Close
End Sub 
```

**批处理脚本**

```
@echo off 

SET VALIDPASSWORD=1234

wscript Password.vbs

findstr %VALIDPASSWORD% c:\temp.txt
if ERRORLEVEL 1 (
     echo Incorrect password.
     goto :EOF
 ) else (
     echo Password correct. 
)

echo Batch continues from here
pause

:EOF
exit /b 
```

文件 temp.TXT 应与用户在输入框中键入的信息一起发送到 c:\。该批次将读取此输入并与设置的密码进行比较并继续编码...

我怎样才能使这项工作？temp.TXT 没有生成等等...

BATCH 和 VBS 专家，非常欢迎任何帮助**解决这些问题！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:49:39.067

如果`C:\temp.txt`没有被创建，那么第一个问题不在于批处理文件。

您链接到的文章的作者提到此代码不适用于 Win7。我没有方便测试的非 Win7 机器，但我怀疑 IE 是否有权写入 C: 驱动器的根目录（他的代码不这样做）。另一种可能性是`Password.vbs`与批处理文件所在的路径不同。但是，如果是这种情况，您会收到一条错误消息。

既然这无论如何都会从命令行运行，为什么不尝试修改他发布的更简单的 WScript 版本呢？假设这是由非管理员运行的，并且根据运行的操作系统，您将需要使用用户有权写入的目录（例如，`%TEMP%\temp.txt`.）。

话虽如此，您还会遇到更多问题。一方面，您的`OpenTextFile`通话使用`ForAppending`模式（那里是“8”）。这意味着您的 temp.txt 文件将保存用户曾经输入的所有答案。这也意味着当你做你的时，**如果**`findstr`有人输入了正确的密码，检查就会成功。使用起来会更好，所以每次都是新生成的。有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/czxefwt8%28v=vs.84%29.aspx)。**`ForWriting`**

 **此方法不是处理密码的安全方法。一方面，用户可以只读取您存储有效密码的批处理文件的内容，或者更简单的是，如果他们确实获得了正确的密码，他们可以看到应该发生的事情。但是，如果您必须这样做，我建议您将批处理文件更改为以下内容：

```
@echo off
REM This file assumes that you switch to a wscript version 
REM and use the recommendations I gave.

SET VALIDPASSWORD=IAmTheRightPassword

wscript Password.vbs
findstr %VALIDPASSWORD% %TEMP%\temp.txt
if ERRORLEVEL 1 (
    echo Incorrect password.
    goto :EOF
) else (
    echo Password correct.
)
REM Here's where you put whatever you were going to do if 
REM the password was correctly entered. 
```**

# .net - Windows azure worker 角色中的多线程

> ID：11795486
> 
> 赞同：1
> 
> 时间：2012-08-03T12:10:19.547
> 
> 标签：.net, c#-4.0, dynamics-crm-2011, azure-queues

我已经构建了一个 ASP.Net 应用程序，它通过 Azure 辅助角色在本地与 CRM 2011 进行交互。现在它是一个单线程应用程序。我想实现多线程，以便队列中的其他进程也得到异步处理。您能否建议最好的方法是什么以及如何完成。任何参考将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:32:44.857

我从未使用过 Azure Worker Role，但从我的快速谷歌搜索来看，下面的代码没有理由不工作。我将它用于我的现场 CRM 的批处理。

```
var options = new ParallelOptions();
// For single Thread debugging, set MaxDegreeOfParallelism to 1:
options.MaxDegreeOfParallelism = 10; // Make this value configurable you can slow down CRM if you try to pump too many things through it.
var actions = GetListOfWorkItems().Select(workItem => (Action)(() => ProcessWorkItem(workItem)));
Parallel.Invoke(options, actions.ToArray());

private void ProcessWorkItem(WorkItem workItem){
    // Code to run in parallel goes here
} 
```

只是一些笔记

*   IOrganization 不是多线程安全的，因此为每个需要它的线程创建一个
*   如果您要处理数千条记录，通常将记录批量处理效率更高，因此线程 1 打开一个连接并处理项目 1-1000，线程 2 打开一个连接并处理项目 10001-2000 等...
*   所有多线程规则都适用，任何共享数据都需要有保护措施以确保它是多线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:30:27.320

你想要[`Parallel.For`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for.aspx)或[`Parallel.ForEach`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach)。

# mysql - 多个表上的mysql和外键关系

> ID：11795487
> 
> 赞同：1
> 
> 时间：2012-08-03T12:10:26.143
> 
> 标签：mysql, sql, database

我一直无法找到一种检索数据的方法——我需要一种方法来遍历 mysql 查询中的多个外键关系。一般表结构如下：

```
Subjects (table)
-id
-fname
-lname
-etc.

Events(table):
-id
-subject_id
-procedure_id
-date

Procedures(table):
-id
-description 
```

这些标识符在其他表中使用，例如：

```
Assessment1(table):
-id
-event_id
-data, etc.

Assessment2(table):
-id
-event_id
-data, etc. 
```

我遇到的问题是能够为具有评估 1 和评估 2 事件的受试者提取所有评估数据。我已经能够成功地为一个评估或两个共享的评估提取数据相同的 event_id，在本例中为 Assessment1 和 Assessment 1a。但我需要一种能够基于 subject_id 进行链接的方法，该主题不在评估表中，因为它通过事件表。

我成功使用的查询（基于 event_id）是：

```
select 
    s.first_name, 
    s.last_name, 
    s.ssn, 
    e.subject_id, 
    n.*,
    l.Q23 
from 
    subjects s, 
    events e, 
    Assessment1 n, 
    Assessment1a l 
where 
    e.subject_id = s.id 
    and l.event_id = e.id 
    and l.Q23 = "1" 
    and n.event_id = e.id 
```

如何修改它以提取具有不同 event_id 但相同 subject_id 的评估数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:21:52.707

> 如何修改它以提取具有不同 event_id 但相同 subject_id 的评估数据？

我认为这就是你所需要的。

```
SELECT *
FROM subjects s
JOIN events e1 ON e1.subject_id = s.id
JOIN events e2 ON e2.subject_id = s.id and e1.id != e2.id
JOIN assessment1 a1 ON a1.event_id = e1.id
JOIN assessment2 a2 ON a2.event_id = e2.id 
```

# django - 在 django 中获取具有 distinct() 的对象列表

> ID：11795496
> 
> 赞同：0
> 
> 时间：2012-08-03T12:11:02.933
> 
> 标签：django, distinct

我有一个带有图片库标签的数据库。它们包含字段“id”、“picture_id”和“tag”。我正在尝试构建所有标签的列表，但没有两次列出相同的标签。我知道我可以在查询集中使用 distinct() 来做，但是将它与 all() 一起使用只会抛出一个错误，告诉我后端数据库不支持它。（我正在使用 MySQL）。

如果我使用 values_list('id','tag') 我不会得到那个错误。实际上，我根本没有收到任何错误。但是我也没有得到任何可以在我的模板中打印出来的东西。

查询集是这样写的：

```
tags = Tag.objects.values_list('id', 'tag').distinct().order_by('tag') 
```

在模板中，我可以尝试使用以下方式打印：

```
{% for tag in tags %}
    <p>{{ tag.id }}: {{ tag.tag }}</p>
{% endfor %} 
```

这给了我一长串“：”符号，但它的右侧或左侧没有。这向我表明我的列表中有东西，但我似乎无法使用它。我究竟做错了什么？

编辑：值得注意的是，我尝试在 Shell 中做这些事情，当在那里打印标签时，我得到了一个看似由 id 和标签组成的对象列表，但我似乎仍然无法在模板中输出它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:17:28.573

`values_list`将创建一个元组列表，而不是字典，因此使用字典表示法将不起作用。[查看文档：](https://docs.djangoproject.com/en/1.0/ref/models/querysets/#values-list-fields)

> ...而不是返回一个字典列表，它返回一个元组列表。每个元组包含传递给 values_list() 调用的各个字段的值——所以第一项是第一个字段，等等。例如：

```
>> Entry.objects.values_list('id', 'headline')
[(1, u'First entry'), ...] 
```

所以，你应该这样做：

```
{% for tag in tags %}
    <p>{{ tag.0 }}: {{ tag.1 }}</p>
{% endfor %} 
```

# python - 正则表达式：用他们的 id 替换匹配项

> ID：11795498
> 
> 赞同：0
> 
> 时间：2012-08-03T12:11:12.447
> 
> 标签：python, regex

我有这种情况，我想知道我是否可以用正则表达式来做到这一点：

我有一个这种格式的字符串：

```
{{We all}} love {{stackoverflow}}. 
```

我的问题是如何使用正则表达式替换来获得：

```
match1 love match2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:24:00.033

**试试这个**

```
result = re.sub("([{]{2}[^}]+[}]{2})([^{]+)([{]{2}[^}]+[}]{2})", r"match1\2match2", subject) 
```

**解释**

```
"""
(          # Match the regular expression below and capture its match into backreference number 1
   [{]        # Match the character “{”
      {2}        # Exactly 2 times
   [^}]       # Match any character that is NOT a “}”
      +          # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   [}]        # Match the character “}”
      {2}        # Exactly 2 times
)
(          # Match the regular expression below and capture its match into backreference number 2
   [^{]       # Match any character that is NOT a “{”
      +          # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
(          # Match the regular expression below and capture its match into backreference number 3
   [{]        # Match the character “{”
      {2}        # Exactly 2 times
   [^}]       # Match any character that is NOT a “}”
      +          # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   [}]        # Match the character “}”
      {2}        # Exactly 2 times
)
""" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:29:44.233

```
s = '{{We all}} love {{stackoverflow}}.' #string to match
pat = re.compile(r'\{\{.*?\}\}') #pattern
#now replace each matched group by its index
for index,group in enumerate(re.findall(pat,s)):
    s = re.sub(group, 'match'+str(index+1), s) 
```

适用于任意数量的组。

# windows - 获取托盘图标工具提示

> ID：11795500
> 
> 赞同：3
> 
> 时间：2012-08-03T12:11:16.597
> 
> 标签：windows, tooltip, systray

当您将鼠标悬停在 Windows 中的托盘图标上时，有时会出现一个工具提示，为您提供有关托盘图标所属应用程序状态的一些信息。我想将此文本转换为编程语言（最好是 Batch、AutoIt 或 python）中的变量。有没有简单的方法？也许是可执行文件或我还不知道的调用？

*如何*识别图标对我来说并不重要：可能是进程 ID、进程名称或系统托盘中的位置。甚至所有工具提示的完整列表都是可行的（然后我可以将正则表达式应用于每个工具提示，以获得正确的工具提示）。

**动机：**某些应用程序（例如 Google Drive 或 Dropbox）通过工具提示传达其同步状态，并且我想通过某些操作（例如发送电子邮件，当状态为“同步完成”时）对此工具提示的更改做出反应。

非常感谢您！

# zend-framework - 在 Zend 中嵌入控制器？

> ID：11795507
> 
> 赞同：0
> 
> 时间：2012-08-03T12:12:14.820
> 
> 标签：zend-framework

我正在使用 Zend 制作社交网络。我创建了一个用于身份验证的 UserController 和一个 BlogController。当我输入 siteurl/user/userid 时，会检索用户的信息。如何在用户控制器中制作博客控制器，所以当我单击用户控制器的博客按钮时，网站会将我引导到用户的博客？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:14:04.060

我不确定你的意思。在您看来，您可以简单地在纯 html 中放置一个带有链接的按钮：

```
<a href="siteurl/blog/showblog/userid/#"><button>View Blog</button></a> 
```

当然，您可以使用视图助手构建您的 url：首先，将 userid 参数从您的控制器传递给视图：

```
$this->view->userid = $this->_getParam('userid'); 
```

然后在您的视图脚本中：

```
<a href="<? echo $this->url(array(
'controller'=>'blog',
'action'=>'showblog',
'userid'=>$this->userid));?>"><button>View Blog</button></a> 
```

# java - 将 webapp 暴露给网络？

> ID：11795509
> 
> 赞同：0
> 
> 时间：2012-08-03T12:12:20.763
> 
> 标签：java, apache, web-applications

我在 localhost:80 上有一个正在运行的 webapp。我现在如何将其公开到互联网上？我使用tomcat，并且可以从网络正常访问我的localhost ip！

但是如果我尝试连接到我的互联网 IP，我只会超时。

如何从网络访问我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:15:42.217

您正在从本地网络访问。您需要使用“端口转发”tcp/udp 80 从您的路由器设置打开 80 端口到您的本地 IP（即 10.0.0.132）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:15:14.583

您将需要配置您的路由器（即，将本地网络连接到 Internet 的设备）以将端口 80 上的传入 TCP 连接转发到运行 Tomcat 的机器上的端口 80。

如果您的 Tomcat 机器的内部 IP 是静态的，这将容易得多，如果您使用 DHCP 在内部分配 IP 地址，那么您需要在 IP 更改时保持端口转发规则的更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:38:09.953

您需要在路由器中端口转发请求，，

:80 ==> (转发这个到) ==> :80

在此之后，当您请求互联网地址时，路由器会将人转发到您的机器，并且该请求将得到答复。

# ios - 播放音频时更新 UI

> ID：11795510
> 
> 赞同：1
> 
> 时间：2012-08-03T12:12:21.137
> 
> 标签：ios, multithreading, user-interface, core-audio

我的应用程序基本上是一个接一个地播放音符，我想显示每次播放的音符。每个音符都是 UI 中的一个正方形，我有一个 1 像素的视图，从左到右移动到正在播放的音符。

问题是我不确定如何同时做这两件事。我无法从我的样本渲染功能发送消息，因为这可能会很慢并且可能导致我的音频播放出现故障。有没有人有任何建议我应该如何更新我的 UI 以反映正在播放的内容？

我的音乐播放代码基于[此示例](http://cocoawithlove.com/2010/10/ios-tone-generator-introduction-to.html)，我认为 RenderTone 方法在不同的线程中运行。**每次播放 1000 个样本时，我想将我的 1 像素视图移动 1 个像素（只是一个示例，也可能更少），但我不知道如何向 UI 发送消息并发送关于有多少样本的更新被玩过。**

因此，在运行以下代码的变体时，我必须以某种方式更新我的 UI。

```
OSStatus RenderTone(
    void *inRefCon, 
    AudioUnitRenderActionFlags *ioActionFlags, 
    const AudioTimeStamp *inTimeStamp, 
    UInt32 inBusNumber, 
    UInt32 inNumberFrames, 
    AudioBufferList *ioData)

{
    // Fixed amplitude is good enough for our purposes
    const double amplitude = 0.25;

    // Get the tone parameters out of the view controller
    ToneGeneratorViewController *viewController =
        (ToneGeneratorViewController *)inRefCon;
    double theta = viewController->theta;
    double theta_increment =
        2.0 * M_PI * viewController->frequency / viewController->sampleRate;

    // This is a mono tone generator so we only need the first buffer
    const int channel = 0;
    Float32 *buffer = (Float32 *)ioData->mBuffers[channel].mData;

    // Generate the samples
    for (UInt32 frame = 0; frame < inNumberFrames; frame++) 
    {
        buffer[frame] = sin(theta) * amplitude;

        theta += theta_increment;
        if (theta > 2.0 * M_PI)
        {
            theta -= 2.0 * M_PI;
        }
    }

    // Store the updated theta back in the view controller
    viewController->theta = theta;

    return noErr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:23:21.787

我建议在这段代码中多次使用一个简单的块回到主线程：

```
dispatch_async(dispatch_get_main_queue(), ^{ someViewController makeSomeChange:withParam; } ); 
```

你可以不经常发送这些。您可以在 highPriority 队列中运行您的 RenderTone 代码，这样 mainQueue 仅在您没有必要的工作要做时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:27:52.423

在 iOS 设备上，UI 只能根据显示器的 60 Hz 刷新率进行更新。因此，以显示刷新率进行轮询是一种合理的选择，并且不会冒险做一些违反音频单元回调线程内的实时约束的不适当的事情（例如任何可能涉及内存管理的 Obj C 消息传递。）

您可以请求音频会话缓冲区持续时间约为 1/60 秒或更短。然后让音频单元缓冲区回调设置或增加一些音频样本位置计数器（使其 1 对齐 long int 变量，以便此写入是原子的）。

然后，在 UI 运行循环中，以每秒 60 次（帧同步）或更少的速率轮询此音频位置计数器，具体取决于所需的 UI 响应能力。从音频样本位置计算音乐位置，如果音乐位置指示正在播放或即将播放新音符，则更新 UI。

# rss - URl 无法在 Titanium WebView 中打开

> ID：11795515
> 
> 赞同：0
> 
> 时间：2012-08-03T12:12:44.317
> 
> 标签：rss, feed

当我打开这个[链接](http://www.chicagowolves.com/news?format=feed&type=rss)时。它给了我一个下面的错误。我做了解析并且能够得到所有的东西。但是客户想在浏览器中打开网页。请告诉我我该怎么办？

> 加载错误： [http](http://www.chicagowolves.com/news?format=feed&type=rss) ://www.chicagowolves.com/news?format=feed&type=rss，错误：错误域=WebKitErrorDomain Code=102“帧加载中断”UserInfo=0x9946670 {NSErrorFailingURLKey=http://www.chicagowolves.com /news?format=feed&type=rss, NSErrorFailingURLStringKey=http://www.chicagowolves.com/news?format=feed&type=rss, NSLocalizedDescription=帧加载中断}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T04:46:30.127

这*不是*网页，而是 RSS，因此您不能按照客户的要求将其加载为网页。

这是一个 RSS 提要，它是一种基于 XML 的格式，因此需要由 RSS 阅读器（或类似性质的东西）解析、阅读和显示，无论您的客户怎么想，网络视图*都不*是这样做的方法.

[这是GitHub 上](https://github.com/kwhinnery/iPad-RSS)用于 Titanium的开源RSS 阅读器示例应用程序。如果您的客户端真的想查看原始 rss，那么您应该使用 HTTPClient [（此处为文档）](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Network.HTTPClient)下载文件并将其显示为 TextField 中的文本。

# javascript - 带有 CakePHP 的 jQuery EasyUI - 将 .ctp 或 .php 输出放入变量中

> ID：11795519
> 
> 赞同：0
> 
> 时间：2012-08-03T12:13:03.617
> 
> 标签：javascript, jquery, cakephp, jquery-easyui

我用 jQuery EasyUI 创建了一个带有“west”和“center”区域的布局。

在我的“西部”区域我有菜单，在“中心”区域我有一个内容。当我单击“西”菜单上的元素时，如何动态更改“中心”区域的内容？

这有效，但它不是动态的。

```
<script>
    $(document).ready(function(){
        $('#test').click(function(){
        var tpl = ' <div class="easyui-layout" fit="true" style="background:#ccc;"> <div region="east" split="true" style="width:200px;">sub center</div> <div region="center">sub center</div> </div> ';
        $('#content').empty().html(tpl).layout();
});
});
</script> 
```

如何动态地将 .php 或 .ctp 文件的输出放入“tpl”变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:50:30.113

*您好，即使您使用以下代码获取动态数据：*

```
$('#test').click(function(){
 $.get(loadUrl,function(tpl) {        
      $('#content').empty().html(tpl).layout();
 }); 
```

*它不会解析服务器动态生成的内容中的easyui组件。*

```
var ajax_load = "<img src='img/load.gif' alt='loading...' />";  
var loadUrl = "<?php echo site_url("home/student_reg"); ?>";  

$("#test").live("click",function(){  
    $('#content').html(ajax_load).load(loadUrl);
}); 
```

*在服务器站点内容生成器中添加以下内容：*

```
$(function(){
   $.parser.parse();
}); 
```

*这将解析所有 easyUI 组件。*

# entity-framework - Entity Framework 中多个数据库的预生成视图

> ID：11795520
> 
> 赞同：1
> 
> 时间：2012-08-03T12:13:13.913
> 
> 标签：entity-framework, views, multiple-databases

我们已经`Entity Framework v1`在我们的应用程序中实现了多数据库支持（如[Entity Framework 的多数据库支持](http://mosesofegypt.net/post/Multiple-database-support-with-Entity-Framework.aspx)中所述）。我们使用`SQL`和`SQL Compact databases`。我们使用 SQL db 来创建 ou 模型，并且我们`ssdl`为 comapct db ( **OurModel.SQLCE.ssdl** ) 提供了单独的文件。

一切正常，直到我们决定使用预先生成的视图。如果我们使用 生成视图`OurModel.ssdl`，一切都适用于 SQL 数据库，但它不适用于 SQL CE 数据库。我们得到以下异常：

> System.Data.EntityCommandCompilationException：准备命令定义时出错。有关详细信息，请参阅内部异常。---> System.Data.MappingException：EntityContainer 'OurModelEntities' 的映射和元数​​据信息不再匹配用于创建预生成视图的信息。

我们希望为 SQL 和 SQL CE 数据库`turn-off`使用预生成的视图，或者在我们的应用程序使用 SQl CE 数据库时使用预生成的视图。

所以，我的问题是：在实体框架中使用多个数据库时，有没有一种使用预生成视图的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T18:44:37.743

我不确定这是否适用于您的问题。但是我收到了同样的错误消息，我意识到这是由于这个原因，我对其中一个模型类进行了更改，但没有为它添加迁移。

所以我所做的是，

在包管理器控制台中，我给出了以下命令

```
add-migration "Migration###" 
```

然后运行`update-database`命令

这就是诀窍。

# c++ - C++ 在不知道大小的情况下检测悬空指针越界

> ID：11795521
> 
> 赞同：1
> 
> 时间：2012-08-03T12:13:16.660
> 
> 标签：c++, arrays, pointers, null

考虑一段代码

```
int main(int argc,char* argv[]){
        int *arrPtr = new int[4];
        for (int i=0;i<4;i++)
                arrPtr[i]=i*2;

        for (int i=0;i<10;i++){
                arrPtr++;
                cout<<"arrPtr ["<<i<<"]\t"<<*arrPtr<<endl;
        }
        cout<<endl;
        return 0; } 
```

当我编译这个程序

> g++ main.cpp -o main && ./main

它给了我

```
arrPtr [0] 2
arrPtr [1] 4
arrPtr [2] 6
arrPtr [3] 0
arrPtr [4] 135145
arrPtr [5] 0
arrPtr [6] 0
arrPtr [7] 0
arrPtr [8] 0
arrPtr [9] 0

```

当 arrPtr 未指向“有效”元素时，我希望能够检测（抛出或检查）。在上面的代码中，最后一个有效元素是 arrPtr[3]。

请不要“我也是”的答案！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T12:21:07.557

使用`vector`.

```
int main()
{
    std::vector<int> a(4);

    for (size_t i = 0; i < 4; ++i)
        a[i] = i * 2;
    for (size_t i = 0; i < 10; ++i)
        std::cout << i << ": " << a.at(i) << std::endl;
} 
```

结果：

```
0: 0
1: 2
2: 4
3: 6
terminate called after throwing an instance of 'std::out_of_range'
  what():  vector::_M_range_check
Aborted 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:30:29.690

其他人已经展示了这个具体问题的解决方案：使用`std::vector`而不是原始指针（无论如何都要这样做！）和元素访问通过`.at()`.

但是，通常您应该确保代码中永远不会出现这种情况。越界错误不是您应该在运行时处理的情况，它们是代码中的**错误**，需要事先删除。

有几种策略——例如，不要使用索引访问。大多数这样的实例可以用迭代器访问代替，虽然它不是自动安全的，但是更难出错。

更好的是，尽可能避免循环并使用 C++ 标准库中的高阶算法。

例如，无循环代码的样子：

```
std::vector<int> arr;
std::generate_n(std::back_inserter(arr), 4,
    [] {
        static int current = 0;
        return current++ * 2;
    });
std::copy(begin(arr), end(arr), std::ostream_iterator<int>(std::cout, "\n")); 
```

这种风格需要一些时间来适应，但它大大减少了在代码中出错的机会，并使某些错误类不可能成为专有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T12:19:32.623

普通的 C 数组是不可能的。您可以使用 std::vector，它具有用于通过边界检查访问元素的 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:55:20.087

这个话题已被广泛讨论。通常，在C语言中，如果事先不知道数组的一些信息，就无法检测指针是否指向数组中的某个位置。

正如@Charlie Martin 在他对[这篇文章](https://stackoverflow.com/questions/7410296/why-is-bounds-checking-not-implemented-in-some-of-the-languages)的回答中提到的那样，这是因为边界检查将花费额外的操作。由于C通常用于制作对速度敏感的程序（例如硬件驱动程序），因此边界检查不是在语言中实现的，而是由需要它的人自己实现的。

因此，如果要进行边界检查，则必须执行以下操作：

```
int *start = new int[4];
int size=4;
int *arrPtr;
...
for (int i=0,arrPtr=start;i<10;i++){
    arrPtr++;
    if(arrPtr>=start && arrPtr <start+size) // the boundary checking by yourself
       cout<<"arrPtr ["<<i<<"]\t"<<*arrPtr<<endl;
} 
```

通过这种方式，该语言可以让您决定是否值得和有必要使用额外的操作来进行边界检查。

当然，一旦您决定需要在程序中进行边界检查，就已经实现了更高级别的数据类型，例如`vector`.

# java - System.out.println(4*2147483647) 在java中如何等于-4？

> ID：11795522
> 
> 赞同：5
> 
> 时间：2012-08-03T12:13:17.987
> 
> 标签：java

我是一名Java初学者，对此很困惑。

java中如何`System.out.println(4*2147483647)`等于-4？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-03T12:17:09.840

这是由于整数静默溢出。

`2147483647 == Integer.MAX_VALUE`是整数的最大值。

无声溢出意味着`2147483647 + 1 == Integer.MIN_VALUE = -2147483648`
您可以看到`2147483647 + 2147483647 == 2147483647 + (-2147483648 + - 1) == -2`

换句话说，`2147483647 * 2 == -2`，你现在可以明白为什么了`2147483647 * 4 == -4`。

从技术上讲，结果由[Java 语言规范 #15.17.1 定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.1)：

> 如果整数乘法溢出，则结果是数学乘积的低位，以某种足够大的二进制补码格式表示。因此，如果发生溢出，则结果的符号可能与两个操作数值的数学乘积的符号不同。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-03T12:21:01.757

它与处理器执行二进制乘法的方式有关。你在那里的数字是最大的有符号整数，表示为**0111111111111111111111111**（我没有检查那里的数字，但我假设你明白了）。

当你乘以 4 时，就像左移 2 一样，结果是**11111111111111111111100**（代表 -4）。您可能想阅读[二进制中的乘法是如何完成的](http://en.wikipedia.org/wiki/Binary_multiplier)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T12:15:43.740

因为结果超出了`int`. [原始数据类型](http://www.cafeaulait.org/course/week2/02.html)

要解决此问题，请使用 a`long`而不是`int`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T12:17:37.157

问题是您使用的是 int （4 个字节）而不是 long （8 个字节）

```
System.out.println(4*2147483647); 
```

尝试在其中一个数字之后添加一个 l（用于 lema），以便结果是长而不是整数。整数的最大值小于您的结果 [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#MAX_VALUE](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#MAX_VALUE)

```
System.out.println(4l * 2147483647); 
```

或者

```
System.out.println(4 * 2147483647l); 
```

以上两个给出了正确的结果。那是 8589934588

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T12:24:53.960

这是因为计算机如何将数字存储在内存中。2147483647 * 4 = 8589934588

8589934588 二进制结果为 1 1111 1111 1111 1111 1111 1111 1111 1100

第一个是一个位，表示它前面的数字是负数。

下一部分可以用二进制补码来解释。

二进制补码是一种表示负值的方法，它通过将所有位取反然后加一个来计算。这将导致 0011（最后 4 个字节的反转），然后添加一个会导致它是 0100，这是 4 的二进制表示。

因为符号位为负，所以结果为 -4

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T12:15:58.793

计算机系统中的大多数整数基于 32 位，这意味着 4 字节（您也可以使用 64 位或更多）。在 32 位整数中最多可以有 4,294,967,295。所以 4,294,967,295 + 5 会导致溢出给你 5。另外 -1 表示整数 4,294,967,295。因为有一个负位。

**更多信息：** [http ://en.wikipedia.org/wiki/Integer_overflow](http://en.wikipedia.org/wiki/Integer_overflow)

[http://en.wikipedia.org/wiki/Integer_(computer_science](http://en.wikipedia.org/wiki/Integer_(computer_science) )

# wordpress - Wordpress 评论提要顺序

> ID：11795531
> 
> 赞同：0
> 
> 时间：2012-08-03T12:13:37.050
> 
> 标签：wordpress, rss, comments, feed

默认情况下，wordpress 按从最早到新集的顺序将评论添加到评论提要中。

但有个问题。例如，这是网站上的评论订单：

> [1_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> ////[ ***4_ _* __ *_* __ *_* __ *_* __** ]
> 
> [2_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [3_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [5_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]

其中第四条评论是对第一条评论的回应。

但是在提要中，我会给出这个命令：

> [1_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [2_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [3_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [ ***4_ _* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [5_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]

就在评论之后，有没有办法发布评论的答案？

我希望我的评论提要是这样的：

> [1_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [ ***4_ _* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [2_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [3_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]
> 
> [5_ ***_* __ *_* __ *_* __ *_* __ *_* _** ]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:04:56.727

您可能想要挂钩 pre_get_posts，检查它是否是提要，并相应地修改查询。

# iphone - 如何在 iPhone sdk 中传递浮点数据类型的值？

> ID：11795534
> 
> 赞同：0
> 
> 时间：2012-08-03T12:13:48.560
> 
> 标签：iphone, ios, xcode, ios4

这是我的字符串，我想将变量浮点数放在这个字符串中：

我想传递浮点数据类型的值。

例如..%.1f %.2f 我想在 iPhone sdk 中动态传递 1 和 2 值我使用这个代码：-----

```
NSString *string=[NSString stringWithFormat:@"%.%if",[[arrayvalue objectAtIndex:0] intValue],[textField2.text floatValue]]; 
```

但它只打印：-- .if

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:18:22.317

你不能嵌套格式字符串，你可以这样做：

```
int value = [[arrayvalue objectAtIndex:0] intValue];
NSString *string = [@"%." stringByAppendingFormat:@"%if", value];
string = [NSString stringWithFormat:string, [textField2.text floatValue]]; 
```

这是代码完全未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:20:51.730

您忘记为 '%' 这个符号添加转义字符。试试下面的代码它会工作。

```
int i=2;
NSString *output= [NSString stringWithFormat:@"%%.%if",i]; 
```

如果你想显示两个值，那么你可以在下面尝试。

```
int i=2;
float x=3.5;
NSString *output= [NSString stringWithFormat:@"%%.%if  %%.%ff",i,x]; 
```

请根据需要进行修改。这只是为了您的想法如何使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:26:59.583

NSMutableString 可以添加另一个字符串或格式。

```
// array must have first object pass 1st parameter
NSMutableString *mutableString = [[NSString alloc] init];
[str appendFormat:"%d", [array objectAtIndex:0].intValue];

// array have second object then pass 2nd parameter
if (2 <= array.count)
   [mutableString appendFormat:"%f", [array objectAtIndex:0].floatValue]];

NSLog("%@", mutableString); 
```

# c++ - 如何在 C++ 中使用 cin 退出

> ID：11795538
> 
> 赞同：0
> 
> 时间：2012-08-03T12:14:06.657
> 
> 标签：c++

我从 Robert Sedwick 的一本关于算法的书中得到以下代码。

如何在以下语句中打破 for 循环`if (!(cin >> a[N])) break;`

```
#include <iostream>
#include <stdlib.h>
#include <string>

using namespace std;
int compare(const void *i, const void *j)
  { return strcmp(*(char **)i, *(char **)j); }
int main()
  { const int Nmax = 1000;
    const int Mmax = 10000;
    char* a[Nmax]; int N;
    char buf[Mmax]; int M = 0;
    for (N = 0; N < Nmax; N++)
      {
        a[N] = &buf[M];
        if (!(cin >> a[N])) break; 
        M += strlen(a[N])+1;
      }
    // std::cout << "Number of strings entered are " << N << std::endl;
    qsort(a, N, sizeof(char*), compare);
    for (int i = 0; i < N; i++) 
      cout << a[i] << endl;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T12:16:43.210

如果在控制台键入输入，则必须输入文件结束代码。

对于 Linux，这将是`Ctrl+D`，对于 Windows `Ctrl+Z`。

# tfs - 自动构建：在 Team Foundation Build 服务器上完成 MSTest 需要很长时间

> ID：11795539
> 
> 赞同：1
> 
> 时间：2012-08-03T12:14:08.783
> 
> 标签：tfs, build-automation, mstest, xunit

我有以下问题。

*   我在 tfs 构建服务器（TFS 2010）上有一个自动构建设置

*   构建定义的工作区包含我配置为构建的 2 个解决方案

*   构建时，构建需要很长时间才能完成（超过 35 分钟）

*   经过一番搜索，我发现 MStest 导致构建需要很长时间。[我在 MStest.exe ( http://my2centsontfs.blogspot.be/2012/03/enabling-logging-on-mstestexe.html](http://my2centsontfs.blogspot.be/2012/03/enabling-logging-on-mstestexe.html) )上启用了日志记录（请参阅本文末尾的日志的缩短版本）和我看到在某一点上一切都非常顺利。然后在 30 分钟内，日志每 20 秒仅吐出以下 2 条语句：

V, 1368, 15, 2012/08/03, 11:22:17.542, IXB20725TFB431\MSTest.exe, ControllerExecution: 向监听器发送心跳 V, 1368, 15, 2012/08/03, 11:22:37.541, IXB20725TFB431\ MSTest.exe，LocalRunMessageListener：RestartTimer

在这 30 分钟之后，MsTest 继续工作 1 分钟，并以代码 1 退出。然后我的构建完成。

我不知道以下是否相关，但只是为了完整：

*   其中一种解决方案包含 XUnit 测试

*   我已经在构建服务器上安装了 VS（2010），还有一个插件可以在 VS（或 tfs）中运行 XUnit 测试，它被称为 XUnitForVS，可以在这里找到：http: [//xunit.codeplex.com/ workitem/5648](http://xunit.codeplex.com/workitem/5648)（我已经安装了 1.2 版）。在 VS 中运行测试不是问题。

*   多亏了这个插件，自动构建会选择我的 XUnit 测试并运行它们

谁能解释在 MSTest 似乎什么也没做的那 30 分钟内发生了什么。我该如何解决这个问题。我的构建 + 测试实际上应该只需要 35 - 30 = 5 分钟。

谢谢

僵硬

我的（由于实际日志文件为 7MB 而缩短）MStest 日志文件：

```
V, 1368, 1, 2012/08/03, 10:53:25.318, IXB20725TFB431\MSTest.exe, Runner.Main: starting...
 V, 1368, 1, 2012/08/03, 10:53:25.725, IXB20725TFB431\MSTest.exe, Tmi:Tmi
 I, 1368, 1, 2012/08/03, 10:53:25.896, IXB20725TFB431\MSTest.exe, New test type record: {13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b}
 V, 1368, 1, 2012/08/03, 10:53:25.896, IXB20725TFB431\MSTest.exe, Test type {13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b}: Satellite DLL found OK
 I, 1368, 1, 2012/08/03, 10:53:25.896, IXB20725TFB431\MSTest.exe, Test type {13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b}: TIP 'Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestTip, Microsoft.VisualStudio.QualityTools.Tips.UnitTest.Tip, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'
 V, 1368, 1, 2012/08/03, 10:53:25.912, IXB20725TFB431\MSTest.exe, Test type {13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b}: Satellite DLL loaded OK
 V, 1368, 1, 2012/08/03, 10:53:25.912, IXB20725TFB431\MSTest.exe, Test type {13cdc9d9-ddb5-4fa4-a97d-d965ccfc6d4b}: assosiated with editor {00000000-0000-0000-0000-000000000000}
 I, 1368, 1, 2012/08/03, 10:53:25.912, IXB20725TFB431\MSTest.exe, New test type record: {3451566b-e89a-4b09-ac24-6cb67cfb8a04}
 W, 1368, 1, 2012/08/03, 10:53:25.912, IXB20725TFB431\MSTest.exe, TestType: {3451566b-e89a-4b09-ac24-6cb67cfb8a04}: Cannot load a Satellite DLL because the Registry Value 'SatelliteBasePath' cannot be found. Will attempt to use default values for name and icon.
 V, 1368, 1, 2012/08/03, 10:53:25.912, IXB20725TFB431\MSTest.exe, Test type {3451566b-e89a-4b09-ac24-6cb67cfb8a04}: Satellite DLL found OK
 I, 1368, 1, 2012/08/03, 10:53:25.912, IXB20725TFB431\MSTest.exe, Test type {3451566b-e89a-4b09-ac24-6cb67cfb8a04}: TIP 'XUnitForVS.UnitTestTip, XUnitForVS, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null'
 W, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, TestType: XUnit Test for VS, {3451566b-e89a-4b09-ac24-6cb67cfb8a04}: No VsEditor was defined for this TestType. This situation should be examined and probably corrected before shipping.
 I, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, New test type record: {7a24f8ff-85da-d664-ef44-83ff4743dae6}
 V, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, Test type {7a24f8ff-85da-d664-ef44-83ff4743dae6}: Satellite DLL found OK
 I, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, Test type {7a24f8ff-85da-d664-ef44-83ff4743dae6}: TIP 'Microsoft.VisualStudio.TestTools.TestTypes.Manual.ManualTestTip, Microsoft.VisualStudio.QualityTools.Tips.ManualTest.Tip, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'
 V, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, Test type {7a24f8ff-85da-d664-ef44-83ff4743dae6}: Satellite DLL loaded OK
 V, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, Test type {7a24f8ff-85da-d664-ef44-83ff4743dae6}: assosiated with editor {0cc3387e-c1f8-96de-b5fd-a93d48110d16}
 I, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, New test type record: {982b8c01-1a8a-48f5-b98a-67ee64bc8687}
 V, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, Test type {982b8c01-1a8a-48f5-b98a-67ee64bc8687}: Satellite DLL found OK
 I, 1368, 1, 2012/08/03, 10:53:26.053, IXB20725TFB431\MSTest.exe, Test type {982b8c01-1a8a-48f5-b98a-67ee64bc8687}: TIP 'Microsoft.VisualStudio.TestTools.TestTypes.Generic.GenericTestTip, Microsoft.VisualStudio.QualityTools.Tips.GenericTest.Tip, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'

..BLABLABLA...

V, 1368, 24, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Common.TestMessage>(ControllerExecution.TestMessageSender)+ExternalJob.ProcessJob: successfully invoked job processor for job 'run id {78ddd80e-17b2-4055-b4bd-4a56c6b8054d}, test 'CanWriteLog' with id c99d2be9-9a58-4724-9e5e-cf266a199b82: MessageKind: Result, Outcome: Passed'
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, LocalRunMessageListener.OnProcessReceivedTestMessage: Handling message 'run id {78ddd80e-17b2-4055-b4bd-4a56c6b8054d}, test 'CanWriteLog' with id c99d2be9-9a58-4724-9e5e-cf266a199b82: MessageKind: Result, Outcome: Passed'
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, Tmi.AddOrUpdateResult: AcceptChanges: started.
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, Tmi.AddOrUpdateResult: AcceptChanges: finished.
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, LocalRunMessageListener.OnProcessReceivedTestMessage: Handling message 'Run {78ddd80e-17b2-4055-b4bd-4a56c6b8054d}, Test {c99d2be9-9a58-4724-9e5e-cf266a199b82}: Completed'
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, AggregationManager: No collector event sink for Session '{78ddd80e-17b2-4055-b4bd-4a56c6b8054d}'; no need to raise data collection event.
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, LocalRunMessageListener.OnProcessReceivedTestMessage: Handling message 'Run {78ddd80e-17b2-4055-b4bd-4a56c6b8054d}, Test {8e12d9e6-017d-40e1-af89-1f802cc1b119}: Started'
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 25, 2012/08/03, 10:54:49.833, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Common.TestMessage>(LocalRunMessageListener.TestMessageReceiver)+ExternalJob.ProcessJob: successfully invoked job processor for job 'Microsoft.VisualStudio.TestTools.Common.TestMessageBulk'
 V, 1368, 15, 2012/08/03, 10:54:57.552, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 15, 2012/08/03, 10:54:57.552, IXB20725TFB431\MSTest.exe, ControllerExecution: Sent heartbeat to listeners
 V, 1368, 15, 2012/08/03, 10:55:17.552, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 15, 2012/08/03, 10:55:17.552, IXB20725TFB431\MSTest.exe, ControllerExecution: Sent heartbeat to listeners
 V, 1368, 15, 2012/08/03, 10:55:37.552, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 15, 2012/08/03, 10:55:37.552, IXB20725TFB431\MSTest.exe, ControllerExecution: Sent heartbeat to listeners
 V, 1368, 15, 2012/08/03, 10:55:57.552, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer

... continues during 30minutes every 20 seconds...

V, 1368, 15, 2012/08/03, 11:23:37.541, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 15, 2012/08/03, 11:23:37.541, IXB20725TFB431\MSTest.exe, ControllerExecution: Sent heartbeat to listeners
 V, 1368, 15, 2012/08/03, 11:23:57.541, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 15, 2012/08/03, 11:23:57.541, IXB20725TFB431\MSTest.exe, ControllerExecution: Sent heartbeat to listeners
 V, 1368, 15, 2012/08/03, 11:24:17.541, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 15, 2012/08/03, 11:24:17.541, IXB20725TFB431\MSTest.exe, ControllerExecution: Sent heartbeat to listeners
 V, 1368, 15, 2012/08/03, 11:24:37.541, IXB20725TFB431\MSTest.exe, LocalRunMessageListener: RestartTimer
 V, 1368, 15, 2012/08/03, 11:24:37.541, IXB20725TFB431\MSTest.exe, ControllerExecution: Sent heartbeat to listeners
 V, 1368, 116, 2012/08/03, 11:24:50.025, IXB20725TFB431\MSTest.exe, BackgroundSpecialJobProcessor<Microsoft.VisualStudio.TestTools.Controller.ReceivedTestMessageWrapper>(ControllerExecution.TestMessageReceiver).TryEnqueueJob: invoking special job checker for job 'ReceivedTestMessageWrapper for test message 'run id {78ddd80e-17b2-4055-b4bd-4a56c6b8054d}, test 'StartAndStopServiceAsInLiveEnvironment' with id 8e12d9e6-017d-40e1-af89-1f802cc1b119: MessageKind: Result, Outcome: Timeout' from agent 'IXB20725TFB431''
 V, 1368, 116, 2012/08/03, 11:24:50.025, IXB20725TFB431\MSTest.exe, BackgroundSpecialJobProcessor<Microsoft.VisualStudio.TestTools.Controller.ReceivedTestMessageWrapper>(ControllerExecution.TestMessageReceiver).TryEnqueueJob: successfully invoked special job checker for job 'ReceivedTestMessageWrapper for test message 'run id {78ddd80e-17b2-4055-b4bd-4a56c6b8054d}, test 'StartAndStopServiceAsInLiveEnvironment' with id 8e12d9e6-017d-40e1-af89-1f802cc1b119: MessageKind: Result, Outcome: Timeout' from agent 'IXB20725TFB431''
 V, 1368, 116, 2012/08/03, 11:24:50.025, IXB20725TFB431\MSTest.exe, BackgroundSpecialJobProcessor<Microsoft.VisualStudio.TestTools.Controller.ReceivedTestMessageWrapper>(ControllerExecution.TestMessageReceiver).TryEnqueueJob: isSpecial = False
 V, 1368, 116, 2012/08/03, 11:24:50.025, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Controller.ReceivedTestMessageWrapper>(ControllerExecution.TestMessageReceiver).TryEnqueueJob: Queuing job 'Type Microsoft.VisualStudio.TestTools.Controller.ReceivedTestMessageWrapper: ReceivedTestMessageWrapper for test message 'run id {78ddd80e-17b2-4055-b4bd-4a56c6b8054d}, test 'StartAndStopServiceAsInLiveEnvironment' with id 8e12d9e6-017d-40e1-af89-1f802cc1b119: MessageKind: Result, Outcome: Timeout' from agent 'IXB20725TFB431''

...BLABLABLA...

V, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, LocalControllerProxy: TestRunFinished.
 V, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, LocalControllerProxy: TestRunFinished: disconnecting listener...
 I, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, LocalRunMessageListener.Dispose: Disconnecting the listener.
 V, 1368, 116, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor)+ExternalJob.ProcessJob: invoking job processor for job 'Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry'
 V, 1368, 116, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor)+ExternalJob.ProcessJob: successfully invoked job processor for job 'Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry'
 V, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, LocalControllerProxy: StopProcess.
 V, 1368, 23, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Common.TestMessage>(LocalRunMessageListener.TestMessageReceiver).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 V, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, LocalControllerProxy: Shutting down agent processes
 I, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, OutOfProcessStrategy: received Shutdown command.
 V, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, OutOfProcessStrategy.StopMonitorThread: starting.
 V, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, OutOfProcessStrategy.StopMonitorThread: set m_monitorStopped.
 I, 1368, 11, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, OutOfProcessStrategy.ProcessMonitorThread: Stop event was set. Shutting down.
 V, 1368, 118, 2012/08/03, 11:25:20.431, IXB20725TFB431\MSTest.exe, OutOfProcessStrategy.Shutdown(OutOfProcessTestAgentStrategy): waiting for agent process to exit ...
 V, 1368, 118, 2012/08/03, 11:25:20.494, IXB20725TFB431\MSTest.exe, OutOfProcessStrategy.Shutdown(OutOfProcessTestAgentStrategy): done waiting for agent process to exit, success = True
 V, 1368, 13, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, ControllerObject: RunQueueThread exit
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor).TryEnqueueJob: Queuing job 'Type Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry: Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry'
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor).Flush: Waiting for 1 jobs to be processed
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor).TryEnqueueJob: Queuing job 'FlushJob'
 V, 1368, 116, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor)+ExternalJob.ProcessJob: invoking job processor for job 'Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry'
 V, 1368, 116, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor)+ExternalJob.ProcessJob: successfully invoked job processor for job 'Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry'
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor).Dispose
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.ControllerQueueEntry>(ControllerObject.RunQueueMessageProcessor).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.SynchronizedEventInfo>(ControllerObject.DataCollectionEventReceiver).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.SynchronizedEventInfo>(ControllerObject.DataCollectionEventReceiver).Dispose
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.SynchronizedEventInfo>(ControllerObject.DataCollectionEventReceiver).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.SynchronizedEventInfo>(AgentProcessManager.DataCollectionEventReceiver).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.SynchronizedEventInfo>(AgentProcessManager.DataCollectionEventReceiver).Dispose
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.SynchronizedEventInfo>(AgentProcessManager.DataCollectionEventReceiver).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, LocalControllerProxy: Cleanup is done.
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, TMI.TestRunEndUpdateProxies: Removed proxy for run 78ddd80e-17b2-4055-b4bd-4a56c6b8054d.
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, Tmi.TestRunEndUpdateProxies: finished successfully.
 V, 1368, 118, 2012/08/03, 11:25:20.525, IXB20725TFB431\MSTest.exe, Tmi.SaveResults(runId): starting
 V, 1368, 12, 2012/08/03, 11:25:20.587, IXB20725TFB431\MSTest.exe, DeploymentQueue: Deployment thread exiting.
 V, 1368, 118, 2012/08/03, 11:25:20.962, IXB20725TFB431\MSTest.exe, Tmi.SaveResults(runId): done, successfully
 I, 1368, 118, 2012/08/03, 11:25:20.962, IXB20725TFB431\MSTest.exe, GetObjectsNoLockT(): select * from result where runid_column = convert('78ddd80e-17b2-4055-b4bd-4a56c6b8054d', 'System.Guid').
 I, 1368, 118, 2012/08/03, 11:25:20.962, IXB20725TFB431\MSTest.exe, GetObjectsNoLockT(): 400 records for runid_column = convert('78ddd80e-17b2-4055-b4bd-4a56c6b8054d', 'System.Guid').
 V, 1368, 118, 2012/08/03, 11:25:20.962, IXB20725TFB431\MSTest.exe, Tmi.TestRunEndInternal: finished.
 V, 1368, 118, 2012/08/03, 11:25:20.962, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Common.TestMessage>(LocalRunMessageListener.TestMessageReceiver)+ExternalJob.ProcessJob: successfully invoked job processor for job 'IXB20725TFB431: Run {78ddd80e-17b2-4055-b4bd-4a56c6b8054d}: Completed'
 V, 1368, 23, 2012/08/03, 11:25:20.962, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Common.TestMessage>(LocalRunMessageListener.TestMessageReceiver).Dispose
 V, 1368, 23, 2012/08/03, 11:25:20.962, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Common.TestMessage>(LocalRunMessageListener.TestMessageReceiver).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 I, 1368, 1, 2012/08/03, 11:25:22.775, IXB20725TFB431\MSTest.exe, TestFormatsConverter.LoadAsCurrentVersion: D:\bld\A2\B11\TestResults\svc-tfs_IXB20725TFB431 2012-08-03 10_53_33_Any CPU_Release.trx is already the current file format.
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, Tmi.Dispose: starting
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, Tmi.Dispose: calling Dispose on proxies...
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, ControllerProxy: Dispose is called.
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, LocalControllerProxy: Dispose(True) is called.
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, LocalControllerProxy: EnsureNoActiveRuns
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, LocalControllerProxy: StopProcess.
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, LocalControllerProxy: Cleanup is done.
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, LocalControllerProxy: Dispose(True) is done, disposed.
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, Tmi.Dispose: calling Dispose on TIPs...
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.Aggregation.FileDataMessage>(FileDataReceiver.FileDataMessageReceiver).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.Aggregation.FileDataMessage>(FileDataReceiver.FileDataMessageReceiver).Dispose
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, BackgroundJobProcessor<Microsoft.VisualStudio.TestTools.Execution.Aggregation.FileDataMessage>(FileDataReceiver.FileDataMessageReceiver).DoAbort: Clearing 0 queued jobs and 0 jobs waiting to be queued
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, Tmi.Dispose: finished...
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, Runner.Main: Exiting with exit code 1
 V, 1368, 1, 2012/08/03, 11:25:41.712, IXB20725TFB431\MSTest.exe, Runner.Main: finished. 
```

# asp.net-mvc - 带有会话的 Asp.net MVC3 长轮询

> ID：11795540
> 
> 赞同：4
> 
> 时间：2012-08-03T12:14:10.590
> 
> 标签：asp.net-mvc, asp.net-mvc-3, session, long-polling

我尝试在我的 MVC3 应用程序中实现长轮询。

长轮询适用于以下代码：我可以在线程休眠时重新加载页面而不会出现问题。

```
[AsyncTimeout(30 * 1002)]
public void TestAsync()
{
  AsyncManager.OutstandingOperations.Increment();

  var queued = ThreadPool.QueueUserWorkItem(new WaitCallback(parm =>
  {
    var wait = new AutoResetEvent(false);
    wait.WaitOne(TimeSpan.FromSeconds(30));

    AsyncManager.OutstandingOperations.Decrement();
  }));
}
//--------------------------------------------------------------------------------

public ActionResult TestCompleted()
{
  return Json(null);
}
//-------------------------------------------------------------------------------- 
```

但是，如果我在应用程序中使用会话，例如..

```
this.Session["XXX"] = "Test"; 
```

线程运行时我无法重新加载页面。页面等待线程准备就绪，然后页面将刷新。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:55:48.567

这不是解决您问题的方法，但可能会有所帮助。

在 MVC 中，您不能为单个用户会话同时执行多个请求。获得真正的异步请求的唯一方法是使控制器成为`SessionLess`控制器，但是当然您不能读取或写入会话。

我在想做异步 AJAX 请求时遇到了这个问题。我认为通过将 设置`SessionStateBehaviour`为`ReadOnly`我至少可以获得对会话的只读访问权限，因为不会有并发问题，但这也不起作用。

本文有更多信息[http://weblogs.asp.net/imranbaloch/archive/2011/05/10/asynccontroller-vs-sessionless-controller.aspx](http://weblogs.asp.net/imranbaloch/archive/2011/05/10/asynccontroller-v-s-sessionless-controller.aspx)

# c# - 在类中插入主键

> ID：11795542
> 
> 赞同：2
> 
> 时间：2012-08-03T12:14:14.503
> 
> 标签：c#, ado.net, dataset

我很难更改此类以包含具有自动增量的主键字段。这个模式我是通过第三方库从工业设备获取数据，这个方案是自己提供这些库的公司提供的，我们应该为这个数据层添加一个主键字段将需要放置另一层数据访问其他应用程序通过链接的报告检索此数据。

```
const string connectionString = 
    "Data Source=(local);Initial Catalog=MyDB;Integrated Security=true";

using (var connection = new SqlConnection(connectionString))
{
    connection.Open();

    // Create all necessary ADO.NET objects.
    var adapter = new SqlDataAdapter("SELECT * FROM MyTable", connection);
    var dataSet = new DataSet();
    adapter.FillSchema(dataSet, SchemaType.Source, "MyTable");
    adapter.InsertCommand = new SqlCommandBuilder(adapter).GetInsertCommand();
    DataTable table = dataSet.Tables["MyTable"];

    int[] handles = EasyDAClient.DefaultInstance.SubscribeMultipleItems(
        new[]
            {
                new DAItemGroupArguments("", "MyOPCServer.1", "OPCItem01", 1000, null),
                new DAItemGroupArguments("", "MyOPCServer.1", "OPCItem02", 1000, null),
                new DAItemGroupArguments("", "MyOPCServer.1", "OPCItem03", 1000, null),
                new DAItemGroupArguments("", "MyOPCServer.1", "OPCItem04", 1000, null)
            }, 
        (_, eventArgs) =>
            {
                if (eventArgs.Vtq != null)
                {
                    // Fill a DataRow with the OPC data, and add it to a DataTable.
                    table.Rows.Clear();
                    DataRow row = table.NewRow();
                    row["ItemID"] = eventArgs.ItemDescriptor.ItemId;
                    row["Value"] = eventArgs.Vtq.Value; // The DataRow will make the conversion to a string.
                    row["Timestamp"] = (eventArgs.Vtq.Timestamp < (DateTime) SqlDateTime.MinValue)
                                           ? (DateTime)SqlDateTime.MinValue
                                           : eventArgs.Vtq.Timestamp;
                    row["Quality"] = (short)eventArgs.Vtq.Quality;
                    table.Rows.Add(row);

                    // Update the underlying DataSet using an insert command.
                    adapter.Update(dataSet, "MyTable");
                }
            }
        ); 
```

在当前方案中包含主键字段的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:24:54.760

你好，你可以试试这段代码：

```
DataColumn idColumn = new  DataColumn();
idColumn.DataType = System.Type.GetType("System.Int32");
idColumn.ColumnName = "id";
table.Columns.Add(idColumn);

//Just if you want define AutoIncrement 
//idColumn.AutoIncrement = true; 

DataColumn [] keys = new DataColumn [1];
keys[0] = idColumn;
table .PrimaryKey = keys; 
```

在此行之后插入此代码：

```
DataTable table = dataSet.Tables["MyTable"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:17:30.770

```
const string connectionString =  
            "Data Source=(local);Initial Catalog=MyDB;Integrated Security=true"; 

using (var connection = new SqlConnection(connectionString)) 
{ 
    connection.Open(); 

    // Create all necessary ADO.NET objects. 
    var adapter = new SqlDataAdapter("SELECT * FROM MyTable", connection); 
    var dataSet = new DataSet(); 
    adapter.FillSchema(dataSet, SchemaType.Source, "MyTable"); 
    adapter.InsertCommand = new SqlCommandBuilder(adapter).GetInsertCommand(); 
    DataTable table = dataSet.Tables["MyTable"]; 
        DataColumn[0] key1 = dataSet.Tables["MyTable"].Columns["ItemID"];
        key1[0].AutoIncrement = true;
        key1[0].AutoIncrementSeed = 1;
        key1[0].AutoIncrementStep = 1;
        dataSet.Tables["MyTable"].PrimaryKey = key1;

        key1 = null;

    int[] handles = EasyDAClient.DefaultInstance.SubscribeMultipleItems( 
        new[] 
            { 
                new DAItemGroupArguments("", "MyOPCServer.1", "OPCItem01", 1000, null), 
                new DAItemGroupArguments("", "MyOPCServer.1", "OPCItem02", 1000, null), 
                new DAItemGroupArguments("", "MyOPCServer.1", "OPCItem03", 1000, null), 
                new DAItemGroupArguments("", "MyOPCServer.1", "OPCItem04", 1000, null) 
            },  
        (_, eventArgs) => 
            { 
                if (eventArgs.Vtq != null) 
                { 
                    // Fill a DataRow with the OPC data, and add it to a DataTable. 
                    table.Rows.Clear(); 
                    DataRow row = table.NewRow(); 
                    row["ItemID"] = eventArgs.ItemDescriptor.ItemId; 
                    row["Value"] = eventArgs.Vtq.Value; // The DataRow will make the conversion to a string. 
                    row["Timestamp"] = (eventArgs.Vtq.Timestamp < (DateTime) SqlDateTime.MinValue) 
                                           ? (DateTime)SqlDateTime.MinValue 
                                           : eventArgs.Vtq.Timestamp; 
                    row["Quality"] = (short)eventArgs.Vtq.Quality; 
                    table.Rows.Add(row); 

                    // Update the underlying DataSet using an insert command. 
                    adapter.Update(dataSet, "MyTable"); 
                } 
            } 
        ); 
} 
```

# sql-server - 如果 value 包含这些字母，则

> ID：11795547
> 
> 赞同：6
> 
> 时间：2012-08-03T12:14:34.147
> 
> 标签：sql-server, regex, if-statement

在 SQL Server 中，有没有办法搜索（和格式化）某个字符串的结果（如`preg_match`在 PHP 中）：

```
SELECT (IF (col1 contains 'http'){'<a>' + col 1 + '</a>'}
else {'<b>' + col1 + '</b>'}),
col2
FROM Table 
```

... ETC。

这可能吗？我想根据内容格式化结果。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T12:16:29.183

试试这个：

```
SELECT CASE WHEN col1 LIKE '%http%' THEN '<a>' + col1 + '</a>' ELSE '<b>' + col1 + '</b>' END AS 'Desired Column Name', col2
FROM table 
```

请参阅此处的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/ms181765.aspx](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:23:49.740

您可以尝试这样的事情（来自 AdventureWorks 数据库）

```
SELECT  Title,
        FirstName,
        LastName,
        CASE 
            WHEN LastName LIKE 'G%' THEN '<a href="mailto:' + EmailAddress + '">' + LastName + '</a>'
            ELSE '<b>' + LastName + '</b>'
        END
FROM    SalesLT.Customer 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-16T04:13:39.823

我使用如下内容：

```
IF (my_column_name LIKE "%MATCHSTRING%", 1, 0) AS new_column_name, 
```

如果您要进行完全匹配而不是包含，请不要使用 %

# android - EGit 无法排除 /bin？

> ID：11795550
> 
> 赞同：2
> 
> 时间：2012-08-03T12:14:54.147
> 
> 标签：android, egit

我`EGit`用`Eclipse 4`. 到目前为止工作正常。但是，当我尝试配置要使用的`Android`项目时`EGit`，我遇到了问题`.gitignore`：我无法`/bin`从`Git`. 无论我是编辑`.gitignore`还是使用 UI 界面。

我知道您必须`show`将文件排除在外，因此要更改`Filter...`视图以显示隐藏文件和空目录（如本项目中的资产）。

但无论我做什么，`/bin`都不能排除`EGit`. 它在提交之前获得星形图标，并将被包括在内。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T17:47:01.340

我在`.gitignore`文件中的内容未被忽略（使用 Egit 和 Eclipse）时遇到了问题。事实证明，当它们被添加到文件时，已经在索引中的`.gitignore`文件不会被忽略，也不会被忽略它们所在的目录。即使它们从未被提交也是如此。添加到这些目录的新文件*将*被忽略。刷新项目并没有帮助，但是一旦从索引中删除它们，它们就会自动被忽略，整个目录也一样。在（在项目\存储库的根目录中）添加`bin/`一行应该可以排除任何（位于或低于该级别的子目录）应该有效，但如果文件在索引中或曾经提交过，则不会。`.gitignore``bin``.gitignore`

如果在目录下的文件已添加到索引但未提交时删除目录，也会出现一些奇怪的行为。它保留在提交框中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T10:36:37.923

我找到了两种解决方法：

1）共享项目后，我没有添加所有文件（通过单击项目上的团队/添加到索引），而是添加所有子目录（如 src 和 res）和所有相关文件（如 androidmanifest.xml）。这样，EGit 永远不想包含 /bin 和 /gen。

2）添加所有内容后，在第一次提交时，我取消选中所有“bin”文件。有趣的是，在第一次提交之后，我可以通过团队排除 bin / 从索引中删除“然后，无论 bin 文件没有被签入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-30T09:38:24.600

我的解决方案：

1.  禁用自动构建
2.  删除 bin 和 gen 文件夹
3.  提交并推送更改以删除远程存储库上的 bin 和 gen
4.  手动构建项目
5.  也许从索引中删除文件夹并将它们添加到 gitignore
6.  提交并推送更改
7.  启用自动构建，如果你想

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T18:24:37.793

首先，我在协作使用 Egit 时发现了以下导致问题：/bin /gen

第一个问题是清理项目会重新生成这些文件夹中的文件，然后看起来需要新的提交。由于仅仅因为这些文件更改而再次提交很烦人，我想忽略该文件夹。第二个问题是这些文件在每个团队成员的计算机上重新生成，并且再次需要新的提交。

为避免每次清理项目时都必须提交，请忽略这些文件夹。这也恰好是这篇文章问题的答案。

要删除这些文件夹并停止跟踪，请在 Eclipse 中按照以下步骤操作；它总是对我有用！

1.  右键单击项目 -> 团队 -> 提交（确保全选）
2.  窗口中的项目选项卡 -> 取消选择“自动构建”
3.  右键单击 /gen -> 团队 -> 忽略
4.  右键单击 /gen -> Team -> 从索引中删除
5.  为 /bin 执行 3-4
6.  右键单击项目 -> 团队 -> 提交（确保全选）
7.  窗口中的项目选项卡 - >选择“自动构建”
8.  项目将重建并重新生成丢失的文件夹
9.  右键单击项目 -> 团队 -> 提交（应该只添加一个 .classpath 文件）
10.  应该是这样！

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-13T00:25:42.933

如果“首选项 > 团队 > Git > 项目 > 自动忽略派生资源”已打开，EGit 应自动将构建生成的资源条目添加到 .gitignore

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-02T15:25:14.203

bin 和 gen 等自动构建文件可以对抗 egit 的两步提交机制。在您忽略它们之前，它们会被跟踪提交。

如前所述，只需关闭自动构建并删除存储库中不需要的任何内容。提交这些删除以永久删除它们。我认为这就是混乱所在 - 必须提交删除或文件永远保留在 repo 中。

当自动构建过程中再次出现任何内容时，git-ingore 它不会被跟踪提交。Git 的两阶段提交相当低级，但这就是它的优势。以这种方式克服 eclipse autobuild 就是证明。请注意，此问题不涉及跟踪丢失，而是跟踪过多！

# java - 在 IIS 上托管 Java Web 项目

> ID：11795552
> 
> 赞同：2
> 
> 时间：2012-08-03T12:15:06.500
> 
> 标签：java, iis, hosting, webproject

> **可能重复：**
> [在 IIS 中运行 java Web 应用程序](https://stackoverflow.com/questions/2256084/running-a-java-web-application-in-iis)

我有一个在 MyEclipse 上创建并运行良好的 Web 项目。我可以在 IIS 服务器上托管它吗？如果是这样，我需要有任何插件吗？请告诉我这样做的程序。谢谢，Kavya。

谢谢。但我已经在 MyEclipse 中集成了 Tomcat。我可以让它在 IIS 上运行，以便它在运行时响应来自我的 Web 项目的请求吗？

希望，[在 IIS 中运行 java web 应用程序] 会很有用。但是我对这个部署的东西并没有太多了解并且很容易理解链接的文档......你能指导我开始吗？你的帮助对我来说意义重大。谢谢..

* * *

看来这里没有新学员的地方。不可能每个人都精通一切。还有更多类似的问题，但结果可能不同。请给人们一些时间来表达他们的想法，让我们理解事情。社区人员并没有试图鼓励新用户的参与。我第三次体验它&那是恶心....

不管怎样，谢谢你让它意识到......

# bash - 启动并监控 shell 脚本中的进程以完成

> ID：11795556
> 
> 赞同：4
> 
> 时间：2012-08-03T12:15:19.917
> 
> 标签：bash, shell, unix, process

我有一个简单的 shell 脚本，它也在下面：

```
#!/usr/bin/sh

echo "starting the process which is a c++ process which does some database action for around 30 minutes"
#this below process should be run in the background
<binary name> <arg1> <arg2>

exit 
```

现在我想要的是监控和显示进程的状态信息。我不想深入研究它的功能。由于我知道该过程将在 30 分钟内完成，因此我想向用户显示每 1 分钟完成 3.3% 并检查该过程是否在后台运行，最后如果该过程完成我想显示它完成了。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:33:41.970

**您可以做的最好的事情是在您的应用程序中放置某种**检测工具，并让它以`work items processed / total amount of work`.

否则，您确实可以参考事物运行的时间。

这是我过去使用的示例。在 ksh93 和 bash 中工作。

```
#! /bin/ksh
set -u
prog_under_test="sleep"
args_for_prog=30

max=30 interval=1 n=0

main() {
    ($prog_under_test $args_for_prog) & pid=$! t0=$SECONDS

    while is_running $pid; do
        sleep $interval
        (( delta_t = SECONDS-t0 ))
        (( percent=100*delta_t/max ))
        report_progress $percent
    done
    echo
}

is_running() { (kill -0 ${1:?is_running: missing process ID}) 2>& -; }

function report_progress { typeset percent=$1
    printf "\r%5.1f %% complete (est.)  " $(( percent ))
}

main 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:27:15.877

如果您的流程涉及管道，那么[http://www.ivarch.com/programs/quickref/pv.shtml](http://www.ivarch.com/programs/quickref/pv.shtml)将是一个很好的解决方案，或者替代方案是[http://clpbar.sourceforge.net/](http://clpbar.sourceforge.net/)。但是这些本质上就像带有进度条的“猫”，需要一些东西来通过它们。有一个小程序，您可以编译然后作为后台进程执行，然后在事情完成时终止，[http://www.dreamincode.net/code/snippet3062.htm](http://www.dreamincode.net/code/snippet3062.htm)如果您只想显示某些内容 30 分钟，然后如果您的进程运行时间很长并且退出，那么这可能会起作用，然后在控制台中几乎完成打印，但是您必须对其进行修改。最好只创建另一个 shell 脚本，在循环中每隔几秒显示一个字符并检查前一个进程的 pid 是否仍在运行，我相信您可以通过查看 $$ 变量来获取父 pid，然后检查是否它仍在 /proc/pid 中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:02:09.543

你真的应该让命令输出统计信息，但为了简单起见，你可以做这样的事情来在你的进程运行时简单地增加一个计数器：

```
#!/bin/sh

cmd &  # execute a command
pid=$! # Record the pid of the command
i=0
while sleep 60; do
  : $(( i += 1 ))
  e=$( echo $i 3.3 \* p | dc )   # compute percent completed
  printf "$e percent complete\r" # report completion
done &                           # reporter is running in the background
pid2=$!                          # record reporter's pid
# Wait for the original command to finish
if wait $pid; then
    echo cmd completed successfully
else
    echo cmd failed
fi      
kill $pid2        # Kill the status reporter 
```

# php - SQL 改变值，到另一个表的下一行

> ID：11795560
> 
> 赞同：2
> 
> 时间：2012-08-03T12:15:34.673
> 
> 标签：php, mysql

假设我有下一个表结构，表 A：

```
| id |
|----|
| 3  |
| 4  |
| 7  | 
```

表 B：

```
| id | title | last_id |
|----|-------|---------|
| 1  |   a   |    1    |
| 2  |   b   |    2    |
| 3  |   c   |    3    | 
```

我想将**表的 B** 更改为**表 A**`last_id`的下一个匹配项。`id`

 **示例：（参考**表B第一行**）

Current`last_id`是**1**，所以我需要将它的值转发到 Table A 中下一个更大**的****id**。

 **所以它会去：

`1 -> 3 -> 4 -> 7`

它也可以用 PHP 完成，但也许有一种方法可以将它保存在 SQL Server 中。

提前致谢。

注意：服务器运行 MySQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:21:27.250

以前的答案是正确的，但我认为不需要 +1，因为您只需要值 7

```
UPDATE table_b
   SET last_id = (SELECT MAX(id) FROM table_a) 
```

编辑：

现在它从 table_a 中选择比 table_b 上的 last_id 大的最小值

```
UPDATE table_b
   SET last_id = (SELECT MIN(id) FROM table_a WHERE id>last_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:38:48.667

**以下片段是伪代码。**

1.  抓住下一个**table_a** `id`：

    ```
    SELECT id FROM table_a WHERE id > $currentLastId ORDER BY id ASC LIMIT 1 
    ```

2.  如果没有`null`，请更新您的**table_b** `last_id`列。

**示例：（**参考**table_b**第一行）

SQL 查询将是：

```
SELECT id FROM table_a WHERE id > 1 ORDER BY id ASC LIMIT 1 
```

它会返回`3`。****

# tsql - 如何获取客户详细信息+他是否有（一个）订单

> ID：11795565
> 
> 赞同：1
> 
> 时间：2012-08-03T12:16:11.290
> 
> 标签：tsql, left-join

我有 2 张桌子。客户和订单。
![在此处输入图像描述](../Images/fde7635425f4b38ee61201bc19c7f607.png)

我的要求是...

我想得到如下结果 Customer Detail + HasOrders + Count(Orders)

我写

```
SELECT Customers.*
, CASE WHEN o.CustomerID IS NOT NULL THEN 1 ELSE 0 END HasOrders
FROM Customers c
LEFT JOIN Orders o
ON c.CustomerID = o.CustomersID 
```

但它返回很多行。如果客户有 5 个订单，它会为每个客户返回 5 行。

你能告诉我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:42:25.300

您需要在派生表中进行计数。

```
SELECT c.*
     , case when o.CustomerID is not null
            then 1 
            else 0 
        end HasOrders
     , o.NumberOfOrders
FROM Customers c
LEFT JOIN
(
     SELECT CustomerID
          , count(*) NumberOfOrders
       FROM Orders
      GROUP BY CustomerID
) o
ON c.CustomerID = o.CustomersID 
```

# django - django clear redisco 进行测试

> ID：11795569
> 
> 赞同：0
> 
> 时间：2012-08-03T12:16:40.437
> 
> 标签：django, redis

我们正在为我们的模型使用 Redisco，我正在为我们的模型编写一些测试，但是 redis 一直在填满，所以对于每个测试，更多的数据会添加到 reddis。

有没有办法为每个测试清除 Redis，以及测试时的最佳实践是什么（使用 redis 和 redisco）

# - 编辑 -

这是我最终采用的解决方案，我想与可能有相同问题的其他人分享

要确保每个测试用例都在干净的 Redis 实例上运行，请通过运行来启动每个测试用例

```
redis = Redis()
redis.flushall() 
```

正如人们在下面评论的那样，请确保您不要针对 Redis 的生产实例运行测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:29:29.437

我建议运行第二个 redis 实例进行测试（例如，在不同的端口上......），这样您在运行测试时也不会意外地从 redis 中删除任何生产数据。

然后，您可以使用`BaseTestClass`覆盖您项目设置的自定义（在该`setUp`方法中 - 您也可以在那里清空您的 redis 数据库），以便它们指向另一个 redis 实例（希望您已经在项目设置中定义了您的 redis 连接）并拥有所有您的测试类继承自这个基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:31:37.250

处理诸如在单元测试中连接到数据库之类的副作用的标准方法是在测试期间提供数据层的模拟实现。这可以通过多种方式完成，您可以使用不同的 redis 实例，或者动态覆盖方法来向您的测试报告，而不是实际操作数据库等。

依赖注入是用于此类问题的一种模式，在 Java 等静态语言中更常见，但也有 Python 工具，请参阅[http://code.google.com/p/snake-guice/](http://code.google.com/p/snake-guice/)

# mysql - 需要帮助将 mssql 函数转换为 mysql

> ID：11795571
> 
> 赞同：1
> 
> 时间：2012-08-03T12:16:47.593
> 
> 标签：mysql, sql-server

谁能帮我解决将 MsSQL 转换为 MySQL 的问题？它给出了一个语法错误。

**原始 Mssql 函数：**

```
CREATE  FUNCTION StrToNum (srt1 varchar(250))  
RETURNS real AS  
 BEGIN 
DECLARE t real
IF srt1 IS NOT NULL and ISNUMERIC(srt1)=1 and PATINDEX('%,%',srt1)=0 and 
PATINDEX('%e%',srt1)=0
SET t=CONVERT(Money,srt1)
ELSE
SET t=NULL
RETURN t
END 
```

**我像mysql一样尝试过**

```
DELIMITER $$  
CREATE  FUNCTION StrToNum (srt1 VARCHAR(250))   
RETURNS REAL DETERMINISTIC  
BEGIN   
DECLARE t REAL;  
IF srt1 IS NOT NULL AND srt1 > 0 AND POSITION('%,%' IN srt1=0) AND POSITION('%e%' IN srt1=0)  
THEN SET t=CONVERT(Money,INT);  
ELSE  
THEN SET t=NULL; END IF;  
RETURN t;  
END IF;  
END $$  
DELIMITER; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:03:27.133

此代码应解析：

```
DELIMITER $$  
CREATE  FUNCTION StrToNum (srt1 VARCHAR(250))   
RETURNS REAL DETERMINISTIC  
BEGIN   
DECLARE t REAL;  
IF srt1 IS NOT NULL AND srt1 > 0 
    AND POSITION('%,%' IN srt1=0) 
    AND POSITION('%e%' IN     srt1=0)  
THEN SET t=CONVERT(srt1,signed);  --(1)
ELSE  
 SET t=NULL; END IF;              --(2)
RETURN t;   
END $$                            --(3)
DELIMITER ;                       --(4) 
```

我给你分解一下：

*   `CONVERT()`采用`SIGNED`or`UNSIGNED`作为目标类型。`INT`不起作用。(1)
*   您从 mssql 中的 CONVERT() 语法中提出了一个错误；您使用`Money`而不是`srt1`（1）。造成混淆的原因是`CONVERT()`MSSQL 和 MySQL 中的参数颠倒了。
*   `ELSE`后面不需要（或接受）`THEN`关键字 (2)
*   `END IF`在决赛前你有一个额外的`END$$`(3)
*   `DELIMITER ;`需要空格 (4)

# objective-c - 静态分析和“创建规则”

> ID：11795575
> 
> 赞同：4
> 
> 时间：2012-08-03T12:17:01.117
> 
> 标签：objective-c, cocoa, core-foundation, clang-static-analyzer, llvm-clang

我想在 NSBezierPath 上添加一个类别以返回路径的 CGPathRef。由于这是一个核心基础对象，我不能自动释放它，方法的调用者负责释放它。通过将“复制”或“创建”作为方法名称的一部分，我认为我遵循 Apple 在此处设置的约定：[https ://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/ CFMemoryMgmt/Concepts/Ownership.html](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFMemoryMgmt/Concepts/Ownership.html)

但是，除非我更进一步，否则静态分析器不会接受它，而且——不仅包括 create/copy 作为名称的一部分，而且——实际上以“copy”（或 mutableCopy 等）开头的方法名称。

但是，这样做违反了命名类别方法的最佳实践，因为它们应该加前缀以避免命名冲突。

实现以下所有目标的最佳方法是什么：

1.  在 Cocoa 类的类别上添加方法
2.  …返回一个核心基础对象
3.  …这不会在分析器中发出警告
4.  …并根据最佳实践命名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:33:51.967

你的意思是这样的：

```
//
//  NSBezierPath+MCAdditions.h
//
//  Created by Sean Patrick O'Brien on 4/1/08.
//  Copyright 2008 MolokoCacao. All rights reserved.
//

#import <Cocoa/Cocoa.h>
#import "AnalyzerMacros.h"

@interface NSBezierPath (MCAdditions)

+ (NSBezierPath *)bezierPathWithCGPath:(CGPathRef)pathRef;
- (CGPathRef)cgPath CF_RETURNS_RETAINED;

- (NSBezierPath *)pathWithStrokeWidth:(CGFloat)strokeWidth;

- (void)fillWithInnerShadow:(NSShadow *)shadow;
- (void)drawBlurWithColor:(NSColor *)color radius:(CGFloat)radius;

- (void)strokeInside;
- (void)strokeInsideWithinRect:(NSRect)clipRect;

@end 
```

这不是我的代码；我添加了`CF_RETURNS_RETAINED`帮助静态分析器。

[此处](http://clang-analyzer.llvm.org/annotations.html)提供了对 clang 源注释的完整参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:44:20.573

澄清一下：CoreFoundation 对象的根类 CFTypeRef 与 NSObject 是免费桥接的。这意味着您可以自动释放 CoreFoundation 对象（在进行适当的转换之后）。

# javascript - Javascript 限制将同一项目多次添加到第二个列表框

> ID：11795576
> 
> 赞同：1
> 
> 时间：2012-08-03T12:17:01.857
> 
> 标签：javascript

我想限制将同一项目多次添加到第二个列表框中，我想我非常接近它。请帮忙

```
<script type="text/javascript">
    function CopyFile() {
        var firstListBox = document.getElementById('<%= lstFirstBox.ClientID %>');
        var secondListBox = document.getElementById('<%= lstTarget.ClientID %>');
        for (var i = 0; i < firstListBox.options.length; i++) {
            if (firstListBox.options[i].selected) {
                for (var j = 0; j < secondListBox.options.length; j++) {
                    if (firstListBox.options[i].selected == secondListBox.options[j]) {
                        alert("Multiple selection will not allow");
                    }
                    else {
                        var newOption = document.createElement("option");
                        newOption.text = firstListBox.options[i].text;
                        newOption.value = firstListBox.options[i].value;
                        secondListBox.options[secondListBox.options.length] = newOption;
                        firstListBox.options[i].selected = false;
                    }

                }

            }
        }
        return false;

    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:20:36.247

我给你写了一个例子。以下html页面有两个选择和一个按钮。如果您在第一个选择中选择一个选项并按下按钮，该选项将被复制到第二个选择，除非它已经存在。在最后一种情况下，它会提醒一条消息。要尝试它，请将其复制粘贴到文件中（例如“test.htm”）并在浏览器中打开它。

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript">
            function tryToCopy() {
                var select1 = document.getElementById("select1");
                var select2 = document.getElementById("select2");
                var optionToBeCopied = select1.options[select1.selectedIndex];
                var contains = false;
                for(var i = 0, ceiling = select2.options.length; i < ceiling; i++) {
                    if(select2.options[i].value == optionToBeCopied.value) {
                        contains = true;
                        break;
                    }
                }
                if(contains) {
                        alert("duplicate options are not allowed.");
                } else {
                    var option = document.createElement("option");
                    select2.appendChild(option);
                    option.value = optionToBeCopied.value;
                    option.text = optionToBeCopied.text;
                }
            }
        </script>
    </head>
    <body>
        <select id="select1">
            <option value="" selected="true"></option>
            <option value="a">a</option>
            <option value="b">b</option>
        </select>
        <select id="select2">
        </select>
        <input type="button" value="tryToCopy" onclick="tryToCopy()"/>
    </body>
</html> 
```

# asp.net - 无法将类型隐式转换为 List

> ID：11795586
> 
> 赞同：0
> 
> 时间：2012-08-03T12:17:34.050
> 
> 标签：asp.net, linq-to-sql, sql-view

下午，

我收到以下错误，但不知道为什么...有人可以看看，让我知道我哪里出错了。

***无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.List”***

下面是我正在尝试使用的内容，以获取列表，以便我可以将其与亚马逊一起使用。我试图删除 .ToList() 位，但似乎没有任何效果。我正在调用一个 MS SQL 视图“GetASINForUpdateLowPrices”，它返回产品 ASIN 的列表

```
 List<string> prodASINs = dc.GetASINForUpdateLowPrices.ToList(); 
```

我正在使用的视图的 SQL，这可能会有所帮助。

```
 SELECT     asin
 FROM         dbo.aboProducts
 WHERE     (asin NOT IN
           (SELECT     aboProducts_1.asin
            FROM       dbo.aboProducts AS aboProducts_1 INNER JOIN
                       dbo.LowestPrices ON aboProducts_1.asin = dbo.LowestPrices.productAsin
            WHERE      (dbo.LowestPrices.priceDate >= DATEADD(day, - 1, GETDATE())))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:20:39.897

单一*ASIN*是什么数据类型？

可能您`GetASINForUpdateLowPrices`的不是`IEnumerable<string>`. 试试这个来确认：

```
List<string> prodASINs = dc.GetASINForUpdateLowPrices
                           .Select(e => e.ToString())
                           .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:33:08.727

你确定`GetASINForUpdateLowPrices.ToList()`会创建一个字符串列表吗？我最好的估计是它是不同类型的通用列表。

弄清楚发生了什么——改变`List<string> prodASINS`成为`Object obj`。然后设置断点，通过使用调试器检查对象来查看 ToList() 代码实际生成的 List 类型。然后，您可以更新代码以将值移动到适当类型的列表中。

您可能必须像这样强制分配分配器的右侧才能最终完成工作（如有必要，将字符串替换为另一种类型） -`List<string> prodASINs =(List<string>)dc.GetASINForUpdateLowPrices.ToList()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:21:47.333

只需使用 var。

```
var prodASINs = dc.GetASINForUpdateLowPrices.ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:22:54.157

当您调用 GetASINForUpdateLowPrices 时，`List<string>`即使您的视图中只有一个字段，它也不会直接返回。尝试以下方法：

```
List<string> prodASINs = dc.GetASINForUpdateLowPrices
                       .Select(item => item.AsinFieldName)
                       .ToList(); 
```

Visual Studio IntelliSense 应在键入 后向您建议属性名称`item.`。如果属性不是字符串，请尝试在属性名称的末尾添加 .ToString()。

编辑：在您发表评论后，您似乎需要将其用作`.Select(item => item.asin.ToString())`.

# ssl - 在 TIBCO 中连接到 HTTPS 服务

> ID：11795589
> 
> 赞同：0
> 
> 时间：2012-08-03T12:17:55.040
> 
> 标签：ssl, https, tibco

我们正在尝试连接到 Tibco 中的外部 HTTPS 服务？但是，单击 SSL url 后，它会要求提供证书 PEM 文件。我可以知道是什么原因吗？

问题是我尝试连接的外部 HTTPS 服务通过用户名和密码进行身份验证，而不是通过证书。

任何信息或参考表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:16:45.683

他实际上是在询问您要连接的服务器的公共证书。检查服务器是否真的是它所说的那样的方法，因此您可以确保连接是可信的，并且您正在连接真正想要的地方。

# iphone - 如何从上到下动画视图？

> ID：11795597
> 
> 赞同：0
> 
> 时间：2012-08-03T12:18:26.163
> 
> 标签：iphone, objective-c

在我的应用程序中，我想从上到下启动 UIViewController。所以从 FirstViewController 我启动 MyWebViewController（我需要动画）如下：

```
MyWebViewController *theWebViewController = [[MyWebViewController alloc] initWithFrame:self.view.bounds];
[self.view addSubview:theWebViewController.view]; 
```

在 MyWebViewController 的 loadView 中，我将框架分配给如下视图；

```
- (void)loadView
{
    CGRect theFrame;
    theFrame = CGRectMake(0.0, 20.0, mFrame.size.width, 0.0);
    UIView *view = [[UIView alloc] init];
    view.frame = theFrame;
    self.view = view;
    [view release];
} 
```

在 viewDidLoad 中，我将框架更改如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor clearColor];
    self.view.autoresizingMask = UIViewAutoresizingFlexibleWidth |UIViewAutoresizingFlexibleHeight;

    [UIView beginAnimations:@"animateView" context: nil];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:0.5];
    self.view.frame = CGRectMake(0.0, 20.0, mFrame.size.width, mFrame.size.height-20.0);
    [UIView commitAnimations];
} 
```

但是动画没有发生。我什至尝试使用此代码从下到上进行动画处理，它工作正常，但反之亦然。请谁能告诉我我做错了什么以及如何实现？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:28:46.790

我不认为将高度设置为 0。而是：

```
- (void)loadView
{
    CGRect theFrame;
    theFrame = CGRectMake(0.0, -mframe.size.height + 20, mFrame.size.width, m.frame.size.height - 20);
    UIView *view = [[UIView alloc] init];
    view.frame = theFrame;
    self.view = view;
    [view release];
} 
```

添加时，您希望将框架设置在视图上方和视图之外。然后将其移动到动画中的适当位置。

# javascript - 如何从字符串中解析 tr td - 使其根据 id 填充到 2 个差异表中

> ID：11795599
> 
> 赞同：0
> 
> 时间：2012-08-03T12:18:30.260
> 
> 标签：javascript, html, web

我得到一个返回 HTML，如：

```
 '<tr id="x" ><td>Cool</td><tr>
    <tr id="x" ><td>Cool</td><tr>
    <tr id="x" ><td>Cool</td><tr>
    <tr id="y" ><td>Cool</td><tr>
    <tr id="y" ><td>Cool</td><tr>
    <tr id="y" ><td>Cool</td><tr>' 
```

现在我需要解析这个字符串并填充到 2 个不同的表中。id=x 去一张桌子 id = y 去另一张桌子。

我的想法是从字符串解析 HTML tr td 并将其填充到表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:49:22.693

以下应该有效：

```
$(yourstringvariable).find("tr").each(function(){
  var id = $(this).getAttribute("id");
  var name = $(this).find("td:first").html();
  // test id and add the name in the correspondig table here
}); 
```

但正如另一个人所说：id必须是唯一的，所以请改用class。"$(yourstringvariable)" 将创建一个与您的字符串对应的 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:25:49.573

如果你可以使用 jQuery：

```
var input = '<tr class="x" ><td>Cool X1</td><tr>\n' +
    '<tr class="x" ><td>Cool X2</td><tr>\n' +
    '<tr class="x" ><td>Cool X3</td><tr>\n' +
    '<tr class="y" ><td>Cool Y1</td><tr>\n' +
    '<tr class="y" ><td>Cool Y2</td><tr>\n' +
    '<tr class="y" ><td>Cool Y3</td><tr>';

var data = $(input);

data.filter('tr.x').appendTo($('#x'));
data.filter('tr.y').appendTo($('#y'));
​ 
```

这是完整的 jsfiddle：http: [//jsfiddle.net/5muJd/](http://jsfiddle.net/5muJd/)

# c++ - 从现有 IDL 生成 COM 对象过程

> ID：11795606
> 
> 赞同：0
> 
> 时间：2012-08-03T12:18:38.473
> 
> 标签：c++, visual-studio-2010, com

我正在使用 ATL 创建新的 COM 对象。我必须从我拥有的一个编译版本创建重复的 COM 对象。为了消除一些无聊的工作，我想从原始 COM 中提取 IDL 信息并将其应用于现有的 COM。在这种情况下，我希望有代码骨架。是否有可能来自 IDL 的这种自动生成 c++ 函数描述？

# android - 处理文件夹时发生 StackoverflowException

> ID：11795608
> 
> 赞同：1
> 
> 时间：2012-08-03T12:18:41.450
> 
> 标签：android, copy, directory, android-sdcard, stack-overflow

当以下代码使用更多数量的嵌套文件夹和文件执行时，它会给出 StackOverflowException 请建议我避免它的方法。

```
 public void copyDirectory(File sourceLocation , File targetLocation){
    try {
        if (sourceLocation.isDirectory()) {
            if (!targetLocation.exists() && !targetLocation.mkdirs()) {
                throw new IOException("Cannot create dir " + targetLocation.getAbsolutePath());
            }

            String[] children = sourceLocation.list();
            String s;
            if (children != null && children.length > 0) {
                for (int i = 0; i < children.length; i++) {
                    s = children[i];
                    copyDirectory(new File(sourceLocation, children[i]), new File(targetLocation, children[i]));
                }
            }

        } else {

            // make sure the directory we plan to store the recording in exists
            File directory = targetLocation.getParentFile();
            if (directory != null && !directory.exists() && !directory.mkdirs()) {
                throw new IOException("Cannot create dir " + directory.getAbsolutePath());
            }

            InputStream in = new FileInputStream(sourceLocation);
            OutputStream out = new FileOutputStream(targetLocation);

            // Copy the bits from instream to outstream
            byte[] buf = new byte[1024];
            int len;
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
            in.close();
            out.close();
        }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        addError(e.getMessage());
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        addError(e.getMessage());
        e.printStackTrace();
    }
} 
```

请建议所需的增强功能。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:23:45.793

```
if (children != null && children.length > 0) {
    for (int i = 0; i < children.length; i++) {
        s = children[i];
        copyDirectory(new File(sourceLocation, children[i]), new File(targetLocation, children[i]));
    }
} 
```

在你的`copyDirectory()`，你递归地调用它。我认为某些文件会一遍又一遍地出现在方法中，而您通过一遍又一遍地调用`New File()`该对象来填充堆栈。

打印出您要发送到哪个文件`copyDirectory()`，您很可能会找出问题所在。

# c# - 在实体框架中加载父实体中的子实体（非主键关联）

> ID：11795613
> 
> 赞同：0
> 
> 时间：2012-08-03T12:19:11.247
> 
> 标签：c#, linq, entity-framework, linq-to-entities, edmx

我对实体框架非常陌生，所以我不知道其中使用的技术术语。我很抱歉我的英语不好。

我正在一个项目中工作，其中包含实体框架并有一个`.edmx`文件。该文件具有在其中创建的实体。

所以我创建了 2 个实体并将其命名为 TableA 和 TableB。pid 是 TableA 的实体键， cid 是 TableB 的实体键。并在其中创建了多对一的关系。即 TableA row1 可以有 TableB_cid=1 TableA row2 也可以有 TableB_cid=2

然后我做了“从模型生成数据库”

```
CREATE TABLE [TableA] (
    [pid] nvarchar(max)  NOT NULL,
    [name] nvarchar(max)  NOT NULL,
    [TableB_cid] nvarchar(max)  NOT NULL
);
GO

CREATE TABLE [TableB] (
    [cid] nvarchar(max)  NOT NULL,
    [name] nvarchar(max)  NOT NULL
);

pid|name|TableB_cid
--------------------
1 | a | 2
2 | b | 2
3 | c | 1

cid|name
------------
1 | s
2 | f 
```

现在在我写的 C# 代码中，

```
TableA obj = repository.All().Single(w=>w.pid == "1")
context.Entry<TableA>(obj).Reference<TableB>(o => o.TableB).Load(); 
```

现在这将加载 cid=1 的 TableB（但我真正想要的是加载 cid=2 的 TableB）。

我认为它的主键与主键匹配，而不是 TableB_cid (TableA) 与 cid (TableB) 匹配。

所以我做错了什么请帮忙。

**编辑：**
简而言之，我正在寻找一种方法，可以在 Entity Framework 4.0 中添加表 A 的非主列与表 B 的主列的关联。而且我不想使用 linq 查询和连接。我已经尝试过，但我无法在 edmx 文件中找到可以做到的方法或选项。 ![在此处输入图像描述](../Images/84703759a19c2be22f821e82fcbd1f3f.png)

![在此处输入图像描述](../Images/8c11248bf91e2844a311a6204d611652.png)

![在此处输入图像描述](../Images/7f8c1ef80ad97a0dba7d755ce1ac1d5d.png) 谢谢，

米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:31:34.450

```
 var childs = from c in context.Children
                      where c.cid = o.Child_cid; 
```

我认为这应该对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T04:25:19.917

我不确定我是否理解这个问题，但在您的示例中，您是否只是尝试访问 ID 为 1 的 TableA 的 TableB 实体？

如果是这样，这个怎么样：

```
TableA obj = repository.All().Single(w=>w.pid == "1");
TableB SecondTable = obj.TableB; 
```

SecondTable.cid 应该是 2，is 和 obj.pid 应该是 1。如果不是，你得到什么值？

# qt - 是否可以从 QT GUI 的文本浏览器读取数据

> ID：11795616
> 
> 赞同：1
> 
> 时间：2012-08-03T12:19:26.280
> 
> 标签：qt, datareader, qtextbrowser

我正在尝试在 QT 中制作聊天应用程序。是否可以从 QT GUI 的文本浏览器（显示对话）读取数据，以便我可以维护聊天记录...？请帮助..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:24:34.183

[`QTextBrowser`](http://qt-project.org/doc/qtextbrowser.html)继承，[`QTextEdit`](http://qt-project.org/doc/qtextedit.html)它适用于 a [`QTextDocument`](http://qt-project.org/doc/qtextdocument.html)。可以使用以下命令将 QTextDocument 转换为（并另存为）HTML [`QTextDocument::toHtml()`](http://qt-project.org/doc/qtextdocument.html#toHtml)：

```
QTextDocument *doc = ui->textBrowser->document();
QString html = doc->toHtml(); 
```

* * *

我建议您每次有新消息进入/发出时都附加到日志文件，因此“并行”更新 QTextBrowser 和文件，而**不是**每次出现新消息时都保存整个聊天历史记录。

为此，请打开日志文件并手动写入 open`<html>`和`<body>`标签而不关闭它们。然后将聊天日志条目附加到仍然打开的文件上。在应用程序退出时（聊天窗口的对象销毁或其他），关闭`</body>`and`</html>`标记，然后关闭文件本身。与每次更改 QTextBrowser 小部件时保存整个文件相比，这将产生更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T17:35:05.413

有这样的东西：

```
QString myQString = <textBrowserObject>.toPlainText(); 
```

# iphone - 在 iphone sdk 中使用滑块更改 AVAudioPlayer 中的音量

> ID：11795624
> 
> 赞同：0
> 
> 时间：2012-08-03T12:20:05.383
> 
> 标签：iphone, objective-c, avaudioplayer

我正在使用此代码

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/audiofile.mp3", [[NSBundle mainBundle] resourcePath]]];

NSError *error;
player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
player.numberOfLoops = -1;

if (player == nil)
    NSLog(@"%@",[error description]);             
else 
    [player play]; 
```

但我想改变音量，所以我怎样才能得到音量细节？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:27:09.257

设置你的 UISlider。注册它以在 IB 中或以编程方式接收 ValueChanged 事件。将其最小值设置为 0，最大值设置为 100。应该就是这样。

```
- (void)sliderValueChanged:(UISlider *)slider {
  myPlayer.volume = slider.value / 100.0;
} 
```

# linq - Linq to NHibernate 和动态 LINQ - 查询缓存不起作用

> ID：11795625
> 
> 赞同：3
> 
> 时间：2012-08-03T12:20:22.377
> 
> 标签：linq, nhibernate, linq-to-nhibernate, dynamic-linq

我对 NHibernate 的二级缓存有疑问。当我使用查询时：

```
 var items1 = Session.Query<Row>()
            .Cacheable();
            .Fetch(x => x.Field)
            .OrderBy(x => x.Field.Value)
            .ToList(); 
```

一切都很好 - 查询被缓存。但是当我想使用 Dynamic Linq （[链接](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)）时：

```
 var items2 = Session.Query<Row>()
            .Cacheable();
            .Fetch(x => x.Field)
            .OrderBy("Field.Value")
            .ToList(); 
```

查询未缓存。有趣的是，当我删除代码行时：

```
 .Fetch(x => x.Field) 
```

缓存再次起作用。所以问题在于同时使用 Fetch 和动态 linq OrderBy 方法。

**编辑：**

当我尝试调试 NH 代码（QueryKey 类）时，调试器告诉我这两个查询没有相同的 ResultTransformer（更深层：一个 listTransformation 私有实例）。

有任何想法吗？

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:00:18.607

好的，我知道是什么原因了。

动态 Linq 不在 Linq 表达式中使用参数名称。例如，如果我想使用 lambda statemant 进行排序，我会写：

```
query.OrderBy(item => item.Name) 
```

上面我们看到了一个`item`lambda 参数名称。

当我使用动态 linq 时：

```
query.OrderBy("Name") 
```

在查询结果中，OrderBy 方法中的 lambda 参数没有名称（如`item`上面所写）。我们可以这样说明结果：

```
query.OrderBy( => .Name) 
```

现在，当 NHibernate 正在解码 Queryable 表达式并找到一个没有名称的表达式参数时，NH 使用 GUID 类给它一个随机名称。因此，使用动态 linq 的每个排序都会产生一个具有不恒定 lambda 参数的可查询表达式。这就是 NHibernate 认为：`query.OrderBy("Name")`和`query.OrderBy("Name")`不一样的原因——它们每次都从头开始生成另一个 lamda 参数。

**解决方案**

如果要修复它，则必须修改 Dynamic Linq 库。

1.  在方法`ExpressionParser.ProcessParameters`更改行中：

    ```
    if (parameters.Length == 1 && String.IsNullOrEmpty(parameters[0].Name)) 
    ```

    到：

    ```
    if (parameters.Length == 1 && (parameters[0].Name == "it" || String.IsNullOrEmpty(parameters[0].Name))) 
    ```

2.  在方法`DynamicQueryable.OrderBy`更改行中：

    ```
    Expression.Parameter(source.ElementType, "") 
    ```

    到：

    ```
    Expression.Parameter(source.ElementType, "it") 
    ```

现在，`query.OrderBy("Name")`将产生`query.OrderBy(it => it.Name)`.

干杯!

# wso2 - WSO2 ESB 摘要值

> ID：11795630
> 
> 赞同：0
> 
> 时间：2012-08-03T12:20:37.620
> 
> 标签：wso2, wso2esb

我收到一个带有密码的请求，我必须检查它。此密码是正文部分中的一个字段。我必须检查它和消化密码（例如我们的 MD5，但欢迎使用其他一些算法）。

是否有任何调解人或内部职能可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:50:23.513

您可以使用[Class Mediator](http://docs.wso2.org/wiki/display/ESB450/Class+Mediator)来做到这一点。这也是一个中介，您可以在其中指定 java 类中的中介逻辑并附加到一个序列。[此示例](http://wso2.org/project/esb/java/4.0.3/docs/samples/advanced_mediation_samples.html#Sample380)显示如何在消息上下文中获取值、编辑它们并将更改的值设置回消息上下文。

同样，您可以从邮件正文中获取密码，更改/检查密码并在邮件正文中设置。摘要计算可以在类中介内完成。可以在[此处](http://www.caucho.com/resin-3.0/security/digest.xtp)找到用于计算摘要的示例 java 代码。

# oracle - 在coldfusion中从oracle中选择sql

> ID：11795634
> 
> 赞同：0
> 
> 时间：2012-08-03T12:20:41.117
> 
> 标签：oracle, select, coldfusion

表单提交后，将调用 javascript 函数。JS 检查是否有任何数据输入到字段中。成功后，加载此 CF 页面。该页面是一个ajax 加载，这就是我不使用#form.value# 的原因。

查询是什么让我感到困惑。我已经多次运行其余代码，唯一出现错误的时间是 itemtitle 行添加到查询中：

```
<cfset fieldList = url.searchFields>
<cfset fieldArray = listToArray(fieldList)>
<!--- The fieldArray has the form field names and values in a one-dimensional array
so every odd index is a title and every even index is a value. Hence the step=2 ---
<cfloop index="testing" from="1" to=#ListLen(fieldList)# step="2">
    <cfif fieldArray[testing] is 'searchID'>
        <cfset itemid = fieldArray[testing + 1]>
        <cfoutput>itemid = #itemid#</cfoutput>
    </cfif>
    <cfif fieldArray[testing] is 'searchName'>
        <cfset itemtitle = fieldArray[testing + 1]>
        <cfoutput>itemtitle = #itemtitle#</cfoutput>
    </cfif>
    <cfoutput>#fieldArray[testing]# #fieldArray[testing + 1]#</cfoutput>
</cfloop>

    <cfquery name="searchItems" datasource="#thedb#">
        SELECT *
        FROM spp_items
        WHERE avail_mode LIKE '0' 
        <cfif isDefined('url.categoryID')> AND categoryid = #url.categoryID#</cfif>
        <cfif isDefined('itemid')> AND itemid = #itemid#</cfif>
<!--- if I comment this next line out, the query works fine --->
        <cfif isDefined('itemtitle')> AND itemtitle LIKE #itemtitle#</cfif>
    </cfquery> 
```

为什么我的查询不起作用？再次，我检查了表单提交、js 函数和coldfusion 语法是否都有效。只有当这条线被添加到查询中时，它才会中断。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:28:51.487

查看代码我看不到您在 itemtitle 值周围添加引号的位置，看起来您当前正在执行如下所示的行：

```
AND itemtitle LIKE something 
```

代替：

```
AND itemtitle LIKE 'something' 
```

# java - Spring MVC 传入参数 @RequestParam String requestedURL

> ID：11795642
> 
> 赞同：0
> 
> 时间：2012-08-03T12:21:08.667
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-roo

我有两个 Spring MVC 操作，在此示例中，它们在提交时从表单中获取一个参数：

```
public ModelAndView login(HttpServletResponse response, HttpServletRequest request,  
@RequestParam String requestedURL ) 
```

我想知道属性 requestURL 是否可以引用一个声明的变量，该变量实际上包含传入属性**输入 name="requestURL" 的名称 ...**

```
class Core {
     static String requestedURL = "requestedURL"; 
} 
```

伪代码：

```
public ModelAndView login(..., @RequestParam String @ReadFrom(Core.RequestedURL) ) 
```

**注意@ReadFrom**

这是为了**避免冗余**。现在它被称为 requestURL 但将来有人可能想要更改输入参数名称，在我看来，这不应该是应用程序中的硬编码字符串。

和

```
<input name="<%= Core.requestedURL %>" value="<%= requestedURL %>" /> 
```

并在提交时在方法中读取。但是属性名称是否必须在动作方法的传入参数中进行**硬编码？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:47:24.690

是的，它必须作为 @RequestParam 注释的一部分进行硬编码 - 硬编码或引用`static final`变量。

另一种方法是将模型/映射作为方法中的附加参数并从中获取属性：

```
public ModelAndView login(HttpServletResponse response, HttpServletRequest request,  
Model model ){
    String requestedURL = model.asMap().get(Core.requestedURL);
} 
```

**更新** 您可以通过这种方式引用静态最终变量：假设：

```
public abstract class Core {
     public static final String requestedURL = "requestedURL"; 
}

public ModelAndView login(..., @RequestParam(Core.requestedURL) String requestedURL) 
```

# c# - C#通过程序登录https网站

> ID：11795646
> 
> 赞同：1
> 
> 时间：2012-08-03T12:21:32.030
> 
> 标签：c#, post, connect

我想使用以下凭据解析和 stackoverflow1登录网站[https://ssl.aukro.ua/enter_login.php](https://ssl.aukro.ua/enter_login.php)

我正在使用以下代码，但它不起作用

```
HttpWebRequest http = WebRequest.Create("https://ssl.aukro.ua/enter_login.php") as HttpWebRequest;
http.KeepAlive = true;
http.Method = "POST";
http.ContentType = "application/x-www-form-urlencoded";
string postData = "user_login=" + "parsing" + "&user_password=" + "stackoverflow1";
byte[] dataBytes = UTF8Encoding.UTF8.GetBytes(postData);
http.ContentLength = dataBytes.Length;
using (Stream postStream = http.GetRequestStream())
{
    postStream.Write(dataBytes, 0, dataBytes.Length);
}
HttpWebResponse httpResponse = http.GetResponse() as HttpWebResponse;
// Probably want to inspect the http.Headers here first
http = WebRequest.Create("http://aukro.ua/myaccount/bid.php") as HttpWebRequest;
http.CookieContainer = new CookieContainer();
http.CookieContainer.Add(httpResponse.Cookies);
HttpWebResponse httpResponse2 = http.GetResponse() as HttpWebResponse; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:27:16.840

登录时检查 POST 会发现其他几个参数：

```
cod OGZkZlVlNmJk
global_login_hash   83a8ead80c5c544c86c51ab9914db0ab891d7223
session OWFhMANRVl5dVlVUVFoDCAlTBVFQB1QNDVZQVlFTU11cUAVSVFMDDwpRVVVTVgdZCFZSA1JSYmMyOA==
session_login_hash  38d1a6b20f20d7cb7a8cf93d7f3048087d8c9ffb
url ODNiOF5HRxICHE1PQUQdA01YEFcYRlI2MzNi
user_login  test
user_password   test
version A 
```

您需要从登录页面中解析这些内容并将它们添加到您的帖子中。

# mysql - 如何找到哪两行的时间戳彼此最接近？

> ID：11795653
> 
> 赞同：3
> 
> 时间：2012-08-03T12:21:58.713
> 
> 标签：mysql, sql

我正在为基于位置的签到构建一个 Web 应用程序，有点像本地 4square，但基于 RFID 标签。

无论如何，每次签入都存储在一个 MySQL 表中，其中包含一个用户 ID 和签入时间作为 DATETIME 列。

现在我想显示哪些用户在不同车站之间的签到时间最近。

解释：假设用户 A 在 21:43:12 签到，然后在 21:43:19 签到。他在 7 秒内移动了两个站点。

数据库中有数千个签到，我如何编写 SQL 来选择两个签到时间最接近的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:31:17.453

真正快速的解决方案会引入一些预先计算。就像存储当前和以前签入之间的差异一样。

在这种情况下，您可以快速选择所需的内容（只要您按索引覆盖该列）。

在这种情况下不使用预计算会导致可怕的查询，这些查询将在类似笛卡尔的产品上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:27:00.957

尝试这个：

```
select
    a.id,
    b.id,
    abs(a.rfid-b.rfid)
from
    table1 a,
    table1 a
where
    a.userID=b.userID
    // and any other conditions to make it a single user
group by
    a.id,
    b.id,
    a.rfid,
    b.rfid
order by
    abs(a.rfid-b.rfid) desc
limit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:45:28.900

我想，您只想计算两次签到之间的差异，如果它们是同一个人的两次连续签到。

```
create table test (
id int,
person_id int,
checkin datetime);

insert into test (id, person_id, checkin) values (1, 1, now());
insert into test (id, person_id, checkin) values (2, 1, now());
insert into test (id, person_id, checkin) values (3, 2, now());
insert into test (id, person_id, checkin) values (4, 2, now());
insert into test (id, person_id, checkin) values (5, 1, now());
insert into test (id, person_id, checkin) values (6, 2, now());
insert into test (id, person_id, checkin) values (7, 1, now());

select * from (
  select a.*,
  (select a.checkin - b.checkin
    from test b where b.person_id = a.person_id
    and b.checkin < a.checkin
    order by b.checkin desc
    limit 1
  ) diff
  from test a 
  where a.person_id = 1
  order by a.person_id, a.checkin
  ) tt
where diff is not null
order by diff asc; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:26:49.380

你试过什么？你看过 DATEDIFF [http://msdn.microsoft.com/en-us/library/ms189794.aspx](http://msdn.microsoft.com/en-us/library/ms189794.aspx)

干杯——乔克

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T12:42:24.253

首先，您需要用户的索引，然后是时间戳。

其次，您需要使用相关的子查询来查找“下一个时间戳”。

然后使用 GROUP BY 来查找每个用户的最小间隔。

```
SELECT
  a.user_id,
  MIN(TIMEDIFF(b.timestamp, a.timestamp)) AS min_duration,
FROM
  checkin      AS a
INNER JOIN
  checkin      AS b
    ON  b.user_id   = a.user_id
    AND b.timestamp = (SELECT MIN(timestamp)
                         FROM checkin
                        WHERE user_id   = a.user_id
                          AND timestamp > a.timestamp)
GROUP BY
  a.user_id
ORDER BY
  min_duration
LIMIT
  1 
```

如果您想允许多个用户使用相同的`min_duration`，我建议将结果*（不带`LIMIT 1`）*存储在临时表中，然后在该表中搜索共享最短持续时间的所有用户。

根据数据量，这可能会很慢。一种优化是缓存`TIMEDIFF()`. 每次记录新签入时，还要计算并存储自上次签入以来的持续时间，可能使用触发器。预先计算此值可使查询更简单且值可索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T13:12:50.477

```
SELECT a.*, b.*
FROM table_name AS a
JOIN table_name AS b
ON a.id != b.id
ORDER BY TIMESTAMPDIFF(SECOND, a.checkin, b.checkin) ASC
LIMIT 1 
```

应该这样做。如前所述，可能有点滞后。

# jfreechart - JfreeChart 和 ValueMarker 不显示（无头环境）

> ID：11795656
> 
> 赞同：2
> 
> 时间：2012-08-03T12:22:08.150
> 
> 标签：jfreechart, redhat, marker, headless

生成图表时遇到问题。图表上的每个部分都生成得很好，除了一个不是的 ValueMarker。我正在开发一个无头 RedHat 环境中的 Web 应用程序。我遇到了图表生成的另一个问题（现已解决），我的环境描述在这里：

[JFreeChart 奇怪的渲染（无头 RedHat）](https://stackoverflow.com/questions/11762928/jfreechart-strange-rendering-headless-redhat)

它在 Windows 上运行良好。添加 ValueMarker 的代码是：

```
Marker distanceTiers = new ValueMarker(Double.parseDouble(resultDistance.replace(Constants.UNITE_DISTANCE, "")));
distanceTiers.setPaint(Color.BLACK);
plot.addDomainMarker(distanceTiers); 
```

这是我得到的，我应该在 X = 40 处得到一条垂直线，但我无法弄清楚为什么除了这条线之外的一切都进展顺利：

![http://img809.imageshack.us/img809/6050/graph20120803141353.png](../Images/f93d88339f32de97013e87c9ef75cece.png)

如果有人对此有解释，请不要犹豫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:42:38.653

目前尚不清楚您从哪里获得用于构造 的域值`ValueMarker`，但您可以将您的方法与本[问答中显示的方法进行比较](https://stackoverflow.com/q/4407735/230513)

# c# - 如何将 control.ClientId 传递给 ASP.NET 中的 OnClick 函数？

> ID：11795657
> 
> 赞同：2
> 
> 时间：2012-08-03T12:22:23.483
> 
> 标签：c#, asp.net, .net

`RequiredFieldValidator`基于这个[问题](https://stackoverflow.com/questions/2132837/asp-net-make-a-textbox-required-if-a-checkbox-is-checked)，我正在尝试在选中/取消选中复选框时打开/关闭各种控件。但是，我不想为每个复选框设置一个单独的 js 函数，而是要传入输入的 ClientID 以进行验证，就像这样（这里只有一个 INPUT，但一旦它工作你就可以看到我可以添加更多 INPUT，而无需更多 js）：

```
<asp:TextBox ID="txtSubject" runat="server" />
<asp:CheckBox ID="chkSubjectRequired" runat="server" 
    OnClick="updateValidator('<%= rfvSubject.ClientID %>');" />
<asp:RequiredFieldValidator ID="rfvSubject" ControlToValidate="txtSubject" 
    ErrorMessage="You must enter a subject." runat="server" />

 <script>
 function updateValidator(inputId) {
      var enableValidator = !event.srcElement.checked;
      var theInput = document.getElementById(inputId);
      ValidatorEnable(theInput, enableValidator);
 }
 </script> 
```

目前该 scriptlet`txtSubject.ClientID`没有被评估，只是直接输出。我确信这很简单，但我只是不知道适当的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:29:57.370

如何通过代码隐藏（或脚本部分）添加它：

```
checkSubjectRequired.Attributes.Add("onclick", "updateValidator(" + 
  txtSubject.ClientID + ")"); 
```

[ClientID 的这种解释](http://edgewaters.blogspot.com/2007/12/defaultbutton-defaultfocus-and-uniqueid.html)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:27:54.193

这是因为; ASP.NET 解析器无法解析服务器端控件的服务器标记“<% = %>”（即作为 runat='server' 制作的控件）。使用以下内容：

```
<asp:TextBox ID="txtSubject" runat="server" /> 
<asp:CheckBox ID="chkSubjectRequired" runat="server"  
    OnClick="updateValidator('<%#txtSubject.ClientID %>');" /> 
<asp:RequiredFieldValidator ID="rfvSubject" ControlToValidate="txtSubject"  
    ErrorMessage="You must enter a subject." runat="server" /> 

 <script> 
 function updateValidator(inputId) { 
      var enableValidator = !event.srcElement.checked; 
      var theInput = document.getElementById(inputId); 
      ValidatorEnable(theInput, enableValidator); 
 } 
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:38:13.027

你可以这样做：

```
 <asp:TextBox ID="txtSubject" runat="server" /> 
    <asp:CheckBox ID="chkSubjectRequired" runat="server"  
    OnClientClick="updateValidator(this.id);" /> 
<asp:RequiredFieldValidator ID="rfvSubject" ControlToValidate="txtSubject"  
    ErrorMessage="You must enter a subject." runat="server" /> 

 <script> 
 function updateValidator(inputId) { 
      var enableValidator = !event.srcElement.checked; 
      var theInput = document.getElementById(inputId); 
      ValidatorEnable(theInput, enableValidator); 
 } 
 </script> 
```

# java - 为什么 ant 不能运行 Main 而 JVM 可以

> ID：11795662
> 
> 赞同：7
> 
> 时间：2012-08-03T12:22:43.643
> 
> 标签：java, ant, jvm

```
class Main {
    public static void main(String[] args) {
        ....
    }
} 
```

通过 shell 启动程序：`java Main`按预期工作，但通过 ant 启动程序：

```
<target name="run" depends="cmp">
    <java classname="Main" classpath="."/>
</target>` 
```

导致此错误：

```
java.lang.IllegalAccessException: Class org.apache.tools.ant.taskdefs.ExecuteJava can not access a member of class Main with modifiers "public static" 
```

> JLS 第 12.3.3 节符号引用的解析：
> 
> IllegalAccessError：遇到了一个符号引用，它指定了一个字段的使用或分配，或方法的调用，或类的实例的创建，包含该引用的代码无权访问，因为该字段或方法是声明为私有、受保护或默认访问（非公共），或者因为该类未声明为公共。

所以`org.apache.tools.ant.taskdefs.ExecuteJava`无法执行该方法，因为它的封闭类是私有的，但是如果我用私有方法启动指向 .class 的 jvm，它不会通过相同的安全机制？

[这个](https://stackoverflow.com/questions/9640297/why-doesnt-the-class-containing-main-have-to-be-public)问题类似，但我还是不明白

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T12:28:38.287

答案都在您链接到的问题中。当您通过 JVM 运行它时，无论访问级别如何，它都可以访问所有内容。当你通过 ant 运行它时，它本身就是另一个 java 程序，它必须遵守与任何其他程序相同的规则——这意味着它看不到你的 main 方法。

如果您将班级声明为`public class Main`问题应该消失。

至于为什么 jvm 决定在启动时允许访问私有类确实是另一回事。根据规范

> 12.1.4 调用Test.main
> 
> 最后，在完成类Test的初始化之后（在此期间可能发生了其他相应的加载、链接和初始化），调用Test的main方法。方法 main 必须声明为 public、static 和 void。它必须接受一个作为字符串数组的参数。此方法可以声明为
> 
> public static void main(String[] args) 或 public static void main(String...args)

这特别指出该*方法*必须是`public`，但对所讨论的类只字未提，这就是为什么当您直接通过 VM 调用 main 时它起作用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:37:13.340

使用`public access-modifier`.

**例如：**

```
public class Main {
    public static void main(String[] args) {
        // Your code..
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:28:38.050

尝试将 public 修饰符添加到类中，如下所示：

```
public class Main {
    public static void main(String[] args) {
        ....
    }
} 
```

# codeigniter - CodeIgniter 设置用户数据会话

> ID：11795664
> 
> 赞同：0
> 
> 时间：2012-08-03T12:22:55.857
> 
> 标签：codeigniter, session

大家好，将 userdata 设置为 true 有点问题，也许这里有人可以帮助我？

我正在使用代码点火器

这是我的控制器，我在其中设置用户数据并重定向到另一个控制器“站点”并调用函数 members_area

```
 if($query) // if the users pass/user is right
    {
        $data = array(
        'username' => $this->input->post('username'),
        'is_logged_in' => true      
        );
        $this->session->set_userdata($data);
        redirect('site/members_area');
    }
    else{
    $this->index(); 

    } 
```

然后这是我的站点控制器：

```
function __construct(){

    parent::__construct();
    $this->is_logged_in();
}

function members_area()
{

    $this->load->view('members_area');
}

function is_logged_in()
{
    $is_logged_in = $this->session->userdata('is_logged_in');

    if(!isset($is_logged_in) ||  $is_logged_in != true)
    {
        echo 'You don\'t have permission to access this page. <a href="../login">Login</a>';
        die();

    }

} 
```

大家怎么看？非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:05:38.337

通过在 config 文件夹中的 autoload.php 中进行设置来修复它`$config['cookie_secure'] = FALSE;`，因为在保护 cookie 之前它是 TRUE，任何关于为什么可能很棒的见解？但这解决了问题:)

# ios - 如何在 iOS 中的 UIButton 操作上打开 youtube 视频？

> ID：11795665
> 
> 赞同：-1
> 
> 时间：2012-08-03T12:22:55.743
> 
> 标签：ios

我想在 UIButton 操作和完成 youtube 视频后打开 youtube 视频。控件通过单击完成按钮进入应用程序，我们如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:03:26.347

1：**创建一个带框架的 UIWebView**

2：**将其添加为 SuView**

3：**使用 URL 加载请求**

```
[myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com]]]; 
```

# java - JDBC ResultSet Scroll Sensitive 类型和 Result Set Scroll Insensitive 类型

> ID：11795670
> 
> 赞同：8
> 
> 时间：2012-08-03T12:23:15.577
> 
> 标签：java, jdbc

有人可以告诉我 JDBC ResultSet Scroll Sensitive Type 和 Result Set Scroll Insensitive Type 之间的区别吗？

我们在项目中通常在哪里使用这些？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T12:26:49.887

ResultSet 对象的类型决定了它在两个方面的功能级别：可以操作游标的方式，以及*对基础数据源所做的并发更改如何由 ResultSet 对象反映。*

**TYPE_SCROLL_INSENSITIVE**：

> 结果可以滚动；它的光标可以相对于当前位置前后移动，并且可以移动到绝对位置。结果集对打开时对基础数据源所做的更改不敏感。它包含在执行查询时或检索行时满足查询的行。

**TYPE_SCROLL_SENSITIVE**：

> 结果可以滚动；它的光标可以相对于当前位置前后移动，并且可以移动到绝对位置。结果集反映了在结果集保持打开状态时对基础数据源所做的更改。

有关更多详细信息，请参阅[javase 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T12:26:47.973

ResultSet Scroll Sensitive Type ( `TYPE_SCROLL_SENSITIVE`) ：指定结果集可在任一方向滚动，并受其他事务或同一事务中的语句提交的更改的影响。

Result Set Scroll Insensitive Type ( `TYPE_SCROLL_INSENSITIVE`) ：指定结果集可在任一方向滚动，但对其他事务或同一事务中的其他语句提交的更改不敏感。

还要检查[javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:34:41.117

可滚动结果集（TYPE_SCROLL_SENSITIVE）和不可滚动结果集（TYPE_SCROLL_INSENSITIVE）是`Resultset`基于其敏感性的两种类型的对象。结果集是用于从 Java EE 应用程序访问数据库的对象。

> ResultSet 对象有一个游标，它最初不指向任何记录。调用 ResultSet 的 first() 函数将光标移动到 ResultSet 对象持有的第一条记录。ResultSet 的 get 函数使用数据库表中的列名提供对每列内容的访问

不可滚动的结果集只能从第一个元素向前移动到最后一个元素，并且它们不能直接移动到数据库中的任何行。

而 Scrollable 结果集可以双向遍历，即向前或向后，并且它还可以在任何时间点指向数据库中的任何行，这使得它更加灵活。

**参考：** [可滚动的 ResultSet 和不可滚动的 ResultSet 对象之间的区别？](http://www.opengurukul.com/vlc/mod/forum/discuss.php?d=533)

# delphi - Delphi - 从给定数据中获取行索引和数据索引

> ID：11795671
> 
> 赞同：-6
> 
> 时间：2012-08-03T12:23:34.937
> 
> 标签：delphi, delphi-7, tstringlist

所以我有可能包含不同章程的数据列表：

```
1dAAbt54
agFlE9dA
1295RTdd 
```

第一行数据包含：`1d`, `AA`, `bt`, `54`. 我所需要的只是给我给定索引数据的函数。示例：索引 6 的数据为`Fl`(Line - 2, Index in line is 2)。每行长度为8，数据长度为2；

如何在 Delphi 中实现这样的功能？

结果函数应该是这样的：

```
procedure (DataList: TStringList; DataIndex: Integer; var LineIndex: Integer; var PosInLine: Integer);
begin
//do the algorithm    
end; 
```

对不起，我的英语不好...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T12:55:26.967

**回答您问题的第一个版本**

以下是您问题的*第一个版本*的答案（在您编辑之前）：

```
function GetIndexOfInteger(DataList: TStringList; DataIndex: Integer;
  out LineIndex: Integer; out PosInLine: Integer): boolean;
var
  x, y: Integer;
  InNum: boolean;
  NumStart: integer;
  ValIndex: integer;
begin
  result := false;
  for y := 0 to DataList.Count - 1 do
  begin
    InNum := false;
    ValIndex := 0;
    for x := 1 to Length(DataList[y]) do
    begin
      if (DataList[y][x] <> chr(32)) and not InNum then
      begin
        NumStart := x;
        InNum := true;
        inc(ValIndex);
      end;
      if InNum and ((DataList[y][x] = chr(32)) or
        (x = Length(DataList[y]))) then
      begin
        if StrToInt(Copy(DataList[y], NumStart, x - NumStart +
          IfThen(x = Length(DataList[y]), 1))) = DataIndex then
        begin
          LineIndex := y + 1;
          PosInLine := ValIndex;
          result := true;  // Roberts is on D7.
          Exit;            //
        end;
        InNum := false;
        Continue;
      end;
    end;
  end;
end; 
```

试试看：

```
procedure TForm4.FormCreate(Sender: TObject);
var
  SR: TStringList;
  line, col: integer;
begin
  SR := TStringList.Create;
  SR.Add('1  2  3');
  SR.Add('4  5    6');
  SR.Add('7 8  9');
  SR.Add('10   11   12  13');

  if GetIndexOfInteger(SR, 13, line, col) then
    ShowMessage(Format('%d, %d', [line,col]));
end; 
```

**回答您问题的第二个版本**

（这很容易，您可以自己完成！:)

```
function GetIndexOfItemInListOfPairs(DataList: TStringList; Data: String; out LineIndex: Integer; out PosInLine: Integer): boolean;
var
  x, y: Integer;
begin
  result := false;
  for y := 0 to DataList.Count - 1 do
    for x := 0 to Length(DataList[y]) div 2 - 1 do
      if Copy(DataList[y], 2*x + 1, 2) = Data then
      begin
        LineIndex := y + 1;
        PosInLine := x + 1;
        Exit(true);
      end;
end;

procedure TForm4.FormCreate(Sender: TObject);
var
  SR: TStringList;
  line,col:integer;
begin
  SR := TStringList.Create;
  SR.Add('1dAAbt54');
  SR.Add('agFlE9dA');
  SR.Add('1295RTdd');

  if GetIndexOfItemInListOfPairs(SR, 'RT', line, col) then
    ShowMessage(Format('%d, %d', [line,col]));

end; 
```

**回答您问题的第三个版本**

```
procedure TForm4.FormCreate(Sender: TObject);
var
  RowIndex, ColIndex: Word;
begin

  DivMod(6 {index} - 1, 4 {items per row}, RowIndex, ColIndex);
  inc(RowIndex);
  inc(ColIndex);

  ShowMessageFmt('%d, %d', [RowIndex, ColIndex]);
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:12:20.780

哎呀。问题已经完全改变了。这是问题 v 1.0 的过程:)

```
procedure FindIndex(Data:TStringList; Index:integer;var LineIndex,PosInLine:Integer);
var i:integer;
    CurrentStr:String;
    StrToFind:String;
begin
    LineIndex:=0;
    PosInLine:=0;
    StrToFind:=intToStr(Index)+' ';
    for i:=0 to Data.Count-1 do
    begin
      CurrentStr:=' '+Data.Strings[i]+' ';
      IF POS(' '+StrToFind,CurrentStr)>0 then
      begin
        LineIndex:=i+1;
        //now we need to find PosInLine
        PosInLine:=1;
        repeat
          CurrentStr:=Trim(CurrentStr)+' ';
          IF Pos(StrToFind,CurrentStr)=1 then exit; //we found it

          CurrentStr:=copy(CurrentStr,POS(' ',CurrentStr),length(CurrentStr));
          inc(PosInLine);

        until (CurrentStr='');
        exit;
      end;
    end;
end; 
```

使用此代码测试

```
var T:TStringList;
    Li,Pi:integer;
    i:integer;
begin
    T:=TStringList.Create();
    T.Add('1 2   3');
    T.Add('  4 5    6');
    T.Add('7 8 9');
    T.Add('10 11 12  ');
    for i:=0 to 13 do
    begin
      FindIndex(T,i,Li,Pi);
      Memo1.Lines.Add(IntToStr(i)+':'+IntToStr(Li)+'-'+IntToStr(Pi))
    end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:52:47.497

怎么样 ...

```
procedure Search( DataList: TStringList; DataIndex: Integer; var LineIndex: Integer; var PosInLine: Integer);
var
  j, LineLen: integer;
  Line: string;
begin
LineIndex := 0;
PosInLine := 0;
for j := 0 to DataList.Count - 1 do
  begin
  Line := DataList[j];
  Inc( LineIndex);
  LineLen := Length( Line) div 2;
  if DataIndex >= LineLen then
    begin
    Dec( DataIndex, LineLen);
    continue
    end;
  PosInLine := LineLen;
  break
  end;    
if PosInLine = 0 then // No find
  LineIndex := 0
end; 
```

# memory - 客户端Web编程的内存使用

> ID：11795677
> 
> 赞同：0
> 
> 时间：2012-08-03T12:23:57.350
> 
> 标签：memory, web, client

我是网络编程和学习概念的新手。我有一个关于客户端编程的问题。我的网站有一个数据库，我不希望用户不必要地查询它。为此，我希望将一些信息（例如整数数组）存储在客户端计算机上，并用作在网站上行走的预知。否则，用户必须在每次点击耗尽服务器时从数据库中检索此信息。我希望从网站打开到网站关闭时存储这些信息。我认为 javascript 会做这样的事情，但我不确定 javascript 在网站打开期间存储信息，换句话说，当在网站上行走时更改页面时，存储在变量中的数据可能会丢失。如果您就这个问题指导我，我会很高兴。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:29:01.393

AFAIK，如果您使用经过认证的 Flash 插件，则无法访问客户端机器以从提供的网站读取/存储信息。如果数据不安全，您可以将这些静态信息存储在浏览器 cookie 中。可以使用 javascript 访问 Cookie。

# c# - Chrome/Safari 后退按钮问题

> ID：11795683
> 
> 赞同：1
> 
> 时间：2012-08-03T12:24:15.027
> 
> 标签：c#, asp.net

我正在制作一个应用程序，其中我们可能有 5 或 6 个步骤。在第一步中，我将选择我需要的报告并保存并继续......它会让我进入第二步......就像这样......我的问题是根据功能，当我点击浏览器后退按钮时，我需要去到上一页。当我再次按下**它时，它必须转到我的主页**，但它会将我重定向到上一页。它适用于除 chrome 和 safari 之外的所有浏览器。我正在插入我的代码以供参考..请帮我解决这个问题..

```
protected void Page_Load(object sender, EventArgs e)
{

    DisableHistory();
    lnkBackBrowse.Style["visibility"] = "hidden";
    if (Session["UserId"] != null)
    {
        if (Convert.ToInt32(Session["UserId"].ToString()) == 0)
        {
            TopNavigationMenu.Style["visibility"] = "hidden";
            NavigationMenu.Style["visibility"] = "hidden";

            if (!Request.Url.ToString().Contains("Home") && !Request.Url.ToString().Contains("SaveandLogout"))
                Response.Redirect("Home.aspx");
        }
        else
        {
            TopNavigationMenu.Items[0].Text = "Welcome :" + Session["UserName"].ToString();
            TopNavigationMenu.Style["visibility"] = "visible";
            NavigationMenu.Style["visibility"] = "visible";

            if (Session["FirstTimeLogged"] != null && Convert.ToBoolean(Session["FirstTimeLogged"]) == true)
            {
                TopNavigationMenu.Enabled = false;
                NavigationMenu.Enabled = false;

                if (!Request.Url.ToString().Contains("MyAccount"))
                    Response.Redirect("Home.aspx");
            }
            else
            {
                GenerateLinks(Session["RoleId"].ToString());
                TopNavigationMenu.Enabled = true;
                NavigationMenu.Enabled = true;
                //TopNavigationMenu.Items[1].Text = "Support <img src='Images/bullet_arrow_down.png' alt='down' title='' />";

                if (Request.Url.ToString().Contains("Home"))
                    Response.Redirect("Default.aspx");

                if (!IsPostBack)
                {
                    string strPrevPg = "", strCurrPg = "";
                    if (Request.UrlReferrer != null)
                    {
                        strPrevPg = Request.UrlReferrer.AbsolutePath.ToString();
                        strPrevPg = strPrevPg.Substring(strPrevPg.IndexOf("/", 1) + 1, strPrevPg.Length - (strPrevPg.IndexOf("/", 1) + 1));
                        strPrevPg += Request.UrlReferrer.Query.ToString();
                    }
                    strCurrPg = Request.Url.AbsolutePath.ToString();
                    strCurrPg = strCurrPg.Substring(strCurrPg.IndexOf("/", 1) + 1, strCurrPg.Length - (strCurrPg.IndexOf("/", 1) + 1));

                    bool bFlag;
                    bFlag = Convert.ToBoolean(Session["goBackPg"]);

                    if (Session["PrevPg"] != null)
                    {
                        if (strCurrPg == Session["PrevPg"].ToString())
                        {
                            if (bFlag)
                            {
                                Session["CurrPg"] = strCurrPg;
                                Session["PrevPg"] = "Default.aspx";
                                bFlag = false;
                                Session["goBackPg"] = bFlag;
                            }
                            else
                            {
                                Session["CurrPg"] = strCurrPg;
                                Session["PrevPg"] = strPrevPg;
                            }
                        }
                        else
                        {
                            Session["CurrPg"] = strCurrPg;
                            Session["PrevPg"] = strPrevPg;
                            bFlag = false;
                            Session["goBackPg"] = bFlag;
                        }
                    }

                }
            }
        }
    }
    else
    {
        Response.Redirect("home.aspx");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:34:17.240

当您按下后退按钮时，这些浏览器会向您显示缓存的内容。

您可以调试和检查，您的服务器没有被击中。此会话代码将不起作用。

您可以[告诉浏览器不要缓存该页面](http://msdn.microsoft.com/en-us/library/y18he7cw.aspx)。这样，如果用户想要返回，他将不得不重新加载内容。

# java - 从 txt 文件中读取并将所有内容显示为粗体

> ID：11795684
> 
> 赞同：0
> 
> 时间：2012-08-03T12:24:15.727
> 
> 标签：java, swing, text-files, jtextarea, jeditorpane

我想阅读我的 txt 文件并以粗体字符显示在屏幕上。我怎样才能做到这一点？我做了一些事情，但实际上我无法完成我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:59:04.327

这是修改后的代码，它在我的系统中工作和测试。

```
public class DisplayText extends Applet implements ItemListener {

    private JTextArea area1 = new JTextArea("", 8, 40);

    private Checkbox Kalin;

    public void init() {

        area1.setFont(new Font("Serif", Font.PLAIN, 14));

        File file = new File("D:\\Denemeler\\deneme1.txt");

        Scanner scanner = null;
        try {
            scanner = new Scanner(file);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        StringBuffer fileText = new StringBuffer();
        while(scanner.hasNext()){
            fileText.append(scanner.nextLine());
        }
        area1.setText(fileText.toString());

        add(area1);
        Kalin = new Checkbox("Kalin");
        Kalin.addItemListener(this);
        add(Kalin);
    }

    public void itemStateChanged(ItemEvent e)

    {
        int KalinAyari;
        if (Kalin.getState()) {
            KalinAyari = Font.BOLD;
        } else {
            KalinAyari = Font.PLAIN;
        }

        area1.setFont(new Font("Serif", KalinAyari, 14));
    }

} 
```

# javascript - 如何在没有逗号分隔符的单一警报中显示所有拆分数组

> ID：11795685
> 
> 赞同：0
> 
> 时间：2012-08-03T12:24:18.717
> 
> 标签：javascript, html, web

我将 Url 字符串拆分为 n 个数字，现在我希望它以单个警报或更好的模块化方式显示，而无需逗号分隔

我的字符串可以携带 n 个错误，因此可以拆分 n 个数组

它应该显示与 OL 列表一样，没有任何逗号分隔符

1.  ID 不能为 Null
2.  请检查字符（换行）
3.  等等

我的代码如下

```
 var qtr="http://google.sd.asp?err=ID%20cannot%20be%20NULL/Zero.%0A%0D%20Id%20is%20not%20numeric%20-%202B.%20%0A%0D%20Company%20name%20for%20the%20id%20-%203%20is%20more%20than%20255%20characters.%20";

    var uesp= unescape(qtr);

    var splitqtr = uesp.split('?err=')[1].split('.');
alert(splitqtr);

for(i=0;i<splitqtr .length;i++)
{

alert(splitqtr[i]);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:29:31.220

如果要将数组值组合为单个字符串而不使用逗号作为分隔符，则可以使用[`.join()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)任何参数。您可能想要使用空字符串：

```
> splitqtr.join("")
"ID cannot be NULL/Zero\n\r Id is not numeric - 2B \n\r Company name for the id - 3 is more than 255 characters " 
```

要将它们显示为编号列表，您需要在每个之前添加数字；我还修剪了字符串：

```
for (var i=1; i<=splitqtr.length; i++)
    splitqtr[i] = i". "+splitqtr[i].trim(); 
```

然后用换行符加入它们：

```
> splitqtr.join("\n")
"1\. ID cannot be NULL/Zero\n2\. Id is not numeric - 2B\n3\. Company name for the id - 3 is more than 255 characters\n4\. " 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:31:59.710

您可以将数字添加到每个字符串，然后用换行符连接它们：

```
for (i = 0; i < splitqtr.length; i++) {
  splitqtr[i] = (i + 1) + ". " + splitqtr[i];
}
alert(splitqtr.join("\n")); 
```

# java - 在 Java 中操作 JSON 列表和映射

> ID：11795687
> 
> 赞同：0
> 
> 时间：2012-08-03T12:24:23.833
> 
> 标签：java, json, json-simple

我正在开发一个将 JSON 类型字符串保存/检索到数据库的项目。

一切正常，即保存和更新对于类型来说是安全的`String,Number and Boolean`，但是对于`List and Map`，我想看看当数据在数据库中来回传输时操作 List 和 Map 的安全方法是什么，尤其是当列表中的项目变大时，即数千个项目，例如“朋友”和“关注者”列表

`List`在处理 JSON或`Map`Java时，我还担心潜在的数据损坏。

`JSON.Simple`在不将所有内容（每个项目）加载到内存中的情况下，使用库更新 List 和 Map 的安全方法是什么？

例如，我只需要在存储在数据库中的 JSON 列表字符串中插入一 (1) 个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:53:12.647

JSON 不适合 ORM（对象关系映射）。这就是 NoSQL 数据库将 JSON 存储为文档（即全部内容）的原因。因此，JSON.Simple 不支持延迟加载部分 JSON 结构。

正如您所注意到的，关系数据库不能很好地映射到 JSON（除了原语），因为自然数据结构`List`是 1:N 映射，其中列表类型有一个索引列（即列表中元素的位置），而`Map`需要一个N:M 映射。

因此，更好的解决方案可能是将整个 JSON 字符串存储在 CLOB 中（而不是尝试将其拆分）或将整个 JSON 字符串保存在 CLOB 中 + 提取一些关键字段，以便您可以正确索引数据。

但是，当您使用 JSON 时，您要么必须编写自己的 OR 映射器来支持 JSON 数组和映射的延迟加载，要么每次都必须将整个结构读入 RAM。

# c# - NServiceBus 对 NHibernate 的使用可以暴露在 Log4Net 的日志记录中吗？

> ID：11795690
> 
> 赞同：3
> 
> 时间：2012-08-03T12:24:36.020
> 
> 标签：c#, nhibernate, log4net, nservicebus

我希望能够通过日志记录 NServiceBus 对 NHibernate 的使用。特别是，我想看看何时提交或回滚事务。

我们目前正在调查其中一个 Sagas 的问题，在该问题上，回滚过程似乎由于 DB 锁定而失败。我们想确认它是否以及何时尝试回滚或提交，以及这是否成功。

我们目前正在使用 Log4Net 独立地记录 NServiceBus 和 NHibernate 的活动，但不接收有关 Saga 事务的日志信息 - 提交/回滚。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:08:35.400

如果您已经在使用 Log4Net 来记录 NHibernate 活动，那么您应该已经能够看到任何基于事务的 NHibernate 日志信息，除非您的配置设置为从日志中过滤掉某些 NHibernate 类。

请查看以下有关配置 Log4Net 以记录 NHibernate 日志消息的文章。完成后，您应该能够看到所有日志记录数据。

[配置 Log4Net 以与 NHibernate 一起使用](http://nhibernate.info/doc/howto/various/configure-log4net-for-use-with-nhibernate.html)

您还可以通过在 Log4Net 配置中添加此节点来显式设置 Log4Net 记录器以捕获事务记录消息：

```
<logger name="NHibernate.Transaction.AdoTransaction">
  <level value="DEBUG" />
</logger> 
```

如果这不起作用，您可以深入挖掘。这里有一些东西可以帮助你开始：

让我先声明我从未将 Sagas 与 NServiceBus 一起使用，但做了一些研究，这就是我可以得出的结论。

NServiceBus 在内部创建自己的 NHibernate 配置来处理持久化的 Sagas。NHibernate 配置实例的配置在 .config 文件中完成。查看下一页上的 Sagas 标题，了解配置的外观：

[http://docs.particular.net/nservicebus/nhibernate/](http://docs.particular.net/nservicebus/nhibernate/)

看一下，您应该能够添加任何新的密钥来满足您的需求。

您可能会在配置中添加一个拦截器或事件侦听器，这基本上是一个类，当 NHibernate 将要执行某些操作（例如保存/更新/事务/等）时将调用该类。如果需要，您可以在 Google 上搜索 NHibernate 拦截器和/或事件侦听器，以全面了解它们的功能以及如何使用它们，或访问此处的 NHibernate 文档：http: [//nhibernate.info/doc/nh/en/ index.html#objectstate-events](http://nhibernate.info/doc/nh/en/index.html#objectstate-events)

# java - JavaCV警告标志检测？

> ID：11795691
> 
> 赞同：3
> 
> 时间：2012-08-03T12:24:39.753
> 
> 标签：java, image-processing, opencv, javacv

我查看了 OpenCV 库的 JavaCV 包装器，我发现可以在 Java 中使用该库对图像进行人脸检测，但我想知道是否可以使用该库来检测图像上的[交通警告标志](http://upload.wikimedia.org/wikipedia/commons/2/2e/1_1_54.svg "警告牌")和如何？

我从路上拍摄的照片看起来像这样： [http](http://www.4shared.com/photo/5QxoVDwd/041.html) ://www.4shared.com/photo/5QxoVDwd/041.html ，检测结果应该看起来像这样或类似：[http://www.4shared。 com/photo/z_pL0lSK/overlay-0.html](http://www.4shared.com/photo/z_pL0lSK/overlay-0.html)

**编辑：** 在我检测到红色后，我得到了这个图像：

![在此处输入图像描述](../Images/47593f629a6874b2bfd269d280c3a524.png)

而且我在检测到警告标志三角形形状并忽略所有其他形状时遇到问题。我尝试更改 cvApproxPoly 参数但没有结果。这是我的代码：

```
public void myFindContour(IplImage image)
{
    IplImage grayImage = cvCreateImage(cvGetSize(image), IPL_DEPTH_8U, 1);
    cvCvtColor(image, grayImage, CV_BGR2GRAY);

    CvMemStorage mem;
    CvSeq contours = new CvSeq();
    CvSeq ptr = new CvSeq();
    cvThreshold(grayImage, grayImage, 150, 255, CV_THRESH_BINARY);
    mem = cvCreateMemStorage(0);

    cvFindContours(grayImage, mem, contours, Loader.sizeof(CvContour.class) , CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE, cvPoint(0,0));
    Random rand = new Random();

    while (contours != null && !contours.isNull()) {
        if (contours.elem_size() > 0) {
            CvSeq points = cvApproxPoly(contours, Loader.sizeof(CvContour.class),
                    mem, CV_POLY_APPROX_DP, cvContourPerimeter(contours)*0.02, 0);
            Color randomColor = new Color(rand.nextFloat(), rand.nextFloat(), rand.nextFloat());
            CvScalar color = CV_RGB( randomColor.getRed(), randomColor.getGreen(), randomColor.getBlue());
            cvDrawContours(image, points, color, CV_RGB(0,0,0), -1, CV_FILLED, 8, cvPoint(0,0));
        }
        contours = contours.h_next();
    }

    cvSaveImage("myfindcontour.png", image);

} 
```

这是我得到的输出（我为每个形状使用了不同的颜色，但在最终输出中，我将只使用白色作为检测到的警告标志，其他所有颜色都是黑色）：

![在此处输入图像描述](../Images/83869862108008c46c593e4fed94e937.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:47:43.167

您必须执行以下操作：

1.  检测图像上的红色 - 您将获得1*位*图像，其中：**0** = 非红色，**1** = 红色。
2.  检测上一步图像中创建的三角形。你可以使用`approxPoly`函数来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T15:24:28.323

看，首先找到轮廓区域。将其与预先计算的值进行比较，并将其保持在一个范围内

```
if(area>Mincontourarea && area<maxcontourare)
{
thats it  now we have the signboard do  
} 
```

如果计算的值不会大于汽车轮廓，要让轮廓达到我的知识，你需要 Moments 运算符

momnts 运算符的代码：

```
Moments moment = moments((cv::Mat)contours[index]);
       area = moment.m00;  //m00 gives the area of the detected contour 
```

将上面的代码放在上面讨论的 if 块之前

如果你想要 x 和 y 坐标再发一次..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-04T16:33:50.377

看看我的回答，它是用 c++ 编写的，但是使用 opencv 它能够检测到路标，你可以把它作为一个很好的例子。 [https://stackoverflow.com/a/52651521/8035924](https://stackoverflow.com/a/52651521/8035924)

# emacs - Emacs“进程过滤器错误：menu-bar-update-yank-menu：错误类型参数：stringp，nil”

> ID：11795692
> 
> 赞同：0
> 
> 时间：2012-08-03T12:24:43.937
> 
> 标签：emacs, elisp

[我在https://github.com/coordinate/bingapiel](https://github.com/coordinate/bingapiel)维护了一个 elisp 项目。

它用于在 emacs 中使用 bing api 进行翻译。

一些用户抱怨该错误：

```
error in process filter: menu-bar-update-yank-menu: Wrong type argument: stringp, nil
error in process filter: Wrong type argument: stringp, nil 
```

但我无法在我的计算机上重现该错误。

所以我在这里寻求帮助。有没有人也遇到过这个错误。有谁知道“menu-bar-update-yank-menu：错误的类型参数：stringp，nil”的含义。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:17:07.223

可能是由于未按预期提供的钩子引起的，例如缓冲区在过程中被杀死

第 128-131 行 bing-translate.el 对我来说看起来很奇怪

```
 (with-current-buffer buf
      (let* ((xmldata (decode-coding-string (buffer-string) 'utf-8))
             (result nil))
        (kill-buffer (current-buffer))
        (when (equal "expired" (bingapi-check-accesstoken xmldata))
          ;; get secend time
          (setq buf (url-retrieve-synchronously
                     (bingtranslate-make-url
                      "GetLanguagesForTranslate?" nil)))
          (if buf 
```

;;;;

即 current-buf "buf" 被杀死，稍后在 "when" 但只有 "when" 时再次设置

在不是，如果运行为空（？）

就像它第一眼看上去一样……

# objective-c - 删除主菜单是否保存？

> ID：11795699
> 
> 赞同：0
> 
> 时间：2012-08-03T12:25:03.983
> 
> 标签：objective-c, macos, cocoa, statusbar

我正在编写基于状态项的代理（因此没有停靠图标或菜单栏）。主菜单永远不会显示。我可以毫无问题地删除它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:32:38.200

如果用户在与您的状态项交互时可能想要使用任何键盘快捷键，那么您需要保留主菜单。即使不可见，应用程序的主菜单也是复制和粘贴等键盘快捷键的提供者。

从艰苦的经验中学习。

# iphone - Can I rely on this "default" update interval (accelerometer) with this code?

> ID：11795703
> 
> 赞同：0
> 
> 时间：2012-08-03T12:25:24.277
> 
> 标签：iphone, objective-c, ios, accelerometer, cmmotionmanager

```
-(void)play
{
    CMMotionManager *motionManager = [[CMMotionManager alloc] init];
    [motionManager startDeviceMotionUpdates];

    while(!self.stopButtonPressed)
    {
        NSLog(@"Y-Axis acceleration is %f", motionManager.deviceMotion.userAcceleration.y);
    }
} 
```

console:

```
2012-08-03 13:06:10.798 MyProject[8896:3a03] Y-Axis acceleration is 0.000000
2012-08-03 13:06:10.803 MyProject[8896:3a03] Y-Axis acceleration is 0.000000
2012-08-03 13:06:10.805 MyProject[8896:3a03] Y-Axis acceleration is 0.000000
2012-08-03 13:06:10.807 MyProject[8896:3a03] Y-Axis acceleration is 0.000000
2012-08-03 13:06:10.808 MyProject[8896:3a03] Y-Axis acceleration is 0.000000
2012-08-03 13:06:10.810 MyProject[8896:3a03] Y-Axis acceleration is 0.000000
2012-08-03 13:06:10.812 MyProject[8896:3a03] Y-Axis acceleration is 0.000000
2012-08-03 13:06:10.814 MyProject[8896:3a03] Y-Axis acceleration is 0.000000
2012-08-03 13:06:10.817 MyProject[8896:3a03] Y-Axis acceleration is 0.013498
2012-08-03 13:06:10.820 MyProject[8896:3a03] Y-Axis acceleration is 0.013498
2012-08-03 13:06:10.822 MyProject[8896:3a03] Y-Axis acceleration is 0.013498
2012-08-03 13:06:10.824 MyProject[8896:3a03] Y-Axis acceleration is 0.013498
2012-08-03 13:06:10.826 MyProject[8896:3a03] Y-Axis acceleration is 0.013498
2012-08-03 13:06:10.828 MyProject[8896:3a03] Y-Axis acceleration is 0.013498
2012-08-03 13:06:10.831 MyProject[8896:3a03] Y-Axis acceleration is -0.082339
2012-08-03 13:06:10.833 MyProject[8896:3a03] Y-Axis acceleration is -0.082339
2012-08-03 13:06:10.835 MyProject[8896:3a03] Y-Axis acceleration is -0.082339
2012-08-03 13:06:10.837 MyProject[8896:3a03] Y-Axis acceleration is -0.082339
2012-08-03 13:06:10.840 MyProject[8896:3a03] Y-Axis acceleration is -0.082339
2012-08-03 13:06:10.842 MyProject[8896:3a03] Y-Axis acceleration is -0.082339
2012-08-03 13:06:10.846 MyProject[8896:3a03] Y-Axis acceleration is -0.099570
2012-08-03 13:06:10.848 MyProject[8896:3a03] Y-Axis acceleration is -0.099570
2012-08-03 13:06:10.850 MyProject[8896:3a03] Y-Axis acceleration is -0.099570
2012-08-03 13:06:10.852 MyProject[8896:3a03] Y-Axis acceleration is -0.099570
2012-08-03 13:06:10.855 MyProject[8896:3a03] Y-Axis acceleration is -0.099570
2012-08-03 13:06:10.857 MyProject[8896:3a03] Y-Axis acceleration is -0.099570
2012-08-03 13:06:10.859 MyProject[8896:3a03] Y-Axis acceleration is -0.120698
2012-08-03 13:06:10.862 MyProject[8896:3a03] Y-Axis acceleration is -0.120698
2012-08-03 13:06:10.864 MyProject[8896:3a03] Y-Axis acceleration is -0.120698
2012-08-03 13:06:10.866 MyProject[8896:3a03] Y-Axis acceleration is -0.120698
2012-08-03 13:06:10.868 MyProject[8896:3a03] Y-Axis acceleration is -0.120698
2012-08-03 13:06:10.870 MyProject[8896:3a03] Y-Axis acceleration is -0.120698
2012-08-03 13:06:10.873 MyProject[8896:3a03] Y-Axis acceleration is -0.125984
2012-08-03 13:06:10.875 MyProject[8896:3a03] Y-Axis acceleration is -0.125984
2012-08-03 13:06:10.877 MyProject[8896:3a03] Y-Axis acceleration is -0.125984
2012-08-03 13:06:10.879 MyProject[8896:3a03] Y-Axis acceleration is -0.125984
2012-08-03 13:06:10.881 MyProject[8896:3a03] Y-Axis acceleration is -0.125984
2012-08-03 13:06:10.882 MyProject[8896:3a03] Y-Axis acceleration is -0.125984
2012-08-03 13:06:10.884 MyProject[8896:3a03] Y-Axis acceleration is -0.125984
2012-08-03 13:06:10.888 MyProject[8896:3a03] Y-Axis acceleration is -0.083223
....etc. 
```

According to the console, the acceleration values are updated every 14 microseconds on average

I'm not using a queue with an update interval explicitly, so should I assume that the default update interval is around 14 microseconds (when asking for new values from inside a while loop the way I have in this code specifically)?

Or is this "accidental" and I shouldn't rely on that ? I mean I have tested it a few times and the update interval is always between 13-14 ms, but is it possible (if I don't set an update interval explicitly) that the update interval changes significantly in some later testing if the processor happens to be "busier" (than normally..) for some reason at the time..?

Thank you for any help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:14:59.647

You should not rely on this interval, cause from [UIAccelerometer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometer_Class/Reference/UIAccelerometer.html) class reference - maximum update interval is based on the available hardware, so when Apple will update Accelerometer chip in future devices, frequency may change ( it also can be different on current iPads and iPhones)

# dajaxice - dajax.core ImportError at /No module named

> ID：11795707
> 
> 赞同：2
> 
> 时间：2012-08-03T12:25:48.540
> 
> 标签：dajaxice

我已经通过[本教程](http://docs.dajaxproject.com/dajaxice/installation.html)安装了 dajaxice ：

*   将文件夹“dajaxice”（从存档）复制到项目文件夹。
*   添加了对 setting.py 和 urls.py 的所有更改
*   在模板中添加了下一行：

    ```
    {% load dajaxice_templatetags %}
    {% dajaxice_js_import %} 
    ```

*   `ajax.py`在项目文件夹中创建

*   代码来自`ajax.py`：

    ```
    from django.utils import simplejson
    from dajaxice.core import dajaxice_functions

    @dajaxice_register
    def example1(request):
        return simplejson.dumps({'message': 'hello world'})

    dajaxice_functions.register(example1) 
    ```

*   .js 文件中的代码：

    ```
    $("#id_submit").click(function(){
        Dajaxice.theproject.example1(callback_example);
        console.log("test clicked");
        return false; }); 
    ```

*   当我在第一次请求时在浏览器中重新启动项目时，我得到：

    ```
    ImportError at / No module named dajax.core
    Request Method: GET
    Request URL:    http:// 127.0.0.1:8000/
    Django Version: 1.4
    Exception Type: ImportError
    Exception Value:     No module named dajax.core
    Exception Location: C:\Python27\lib\importlib\__init__.py in import_module, line 37
    Python Executable:  C:\Python27\python.exe
    Python Version: 2.7.3
    Python Path:     ['E:\\Projects\\py\\sites\\theproject',  'C:\\Windows\\system32\\python27.zip',  'C:\\Python27\\DLLs',  'C:\\Python27\\lib',  'C:\\Python27\\lib\\plat-win',  'C:\\Python27\\lib\\lib-tk',  'C:\\Python27',  'C:\\Python27\\lib\\site-packages',  'C:\\Python27\\lib\\site-packages\\PIL']
    Server time:    Fri, 3 Aug 2012 14:50:03 +0300 
    ```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:16:42.370

在init.py（主应用程序）中加载ajax.py

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T04:05:04.710

Dajaxice 一直在更新。确保您已为您正在阅读的文档下载并安装了正确版本的 Dajax。在您的错误消息中，它显示“没有名为 dajax.core 的模块”，这可能是因为您使用了错误的版本。

Dajaxice 和 Dajax 的当前版本可以在这里找到：

[https://pypi.python.org/pypi/django-dajax](https://pypi.python.org/pypi/django-dajax)

[https://pypi.python.org/pypi/django-dajaxice/0.5.5](https://pypi.python.org/pypi/django-dajaxice/0.5.5)

# c# - IComparable 的好处 作为逆变？

> ID：11795711
> 
> 赞同：4
> 
> 时间：2012-08-03T12:26:03.247
> 
> 标签：c#, contravariance, icomparable

我对方差的经验很少，但是在阅读了相当多的内容之后，我相信我至少了解了基本概念（即方差描述了两种类型的关系之间的关系以及这两种类型的关系类似地投影）。但是，我似乎无法理解`IComparable<T>`定义为逆变的意义或好处。乍一看，这实际上似乎阻碍了亚型之间的可比性。我希望有人能够对此事有所了解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T12:30:53.773

我将`IComparer<T>`首先解决 - 你的问题中没有提到它，但它是一个稍微容易一点的“销售”，然后导致`IComparable<T>`.

假设你有三个类：

*   形状（具有区域属性）
*   圆：形状
*   正方形

写一个很容易`AreaComparer : IComparer<Shape>`。

逆变允许您`List<Circle>`按区域对 a 进行排序，因为 a `IComparer<Shape>`（例如`AreaComparer`）可以转换为`IComparer<Circle>`。

同样 for `IComparable<T>`- 如果`Shape`它自己声明自己正在`IComparable<Shape>`使用`Area`，那么您可以再次对 a 进行排序，`List<Circle>`因为每个圆都可以与它自己作为一个形状进行比较。

现在很多时候这实际上并不是一个问题，因为你会有从`Circle`to的隐式转换`Shape`。`Circle`但是在泛型方法的类型推断方面，将 a视为 an的自然能力`IComparable<Circle>`可能会有所帮助。例如，假设我们有：

```
void Foo<T>(IComparable<T> item1, T item2) 
```

我们试着打电话

```
Foo(circle1, circle2); 
```

我不知道编译器是否会（没有逆变）能够推断出`T=Shape`，这会起作用......但即使可以，它也会失败：

```
void Foo<T>(IComparable<T> item1, T item2) where T : ISomethingCircleImplements 
```

真的，我们希望编译器对 感到满意`T=Circle`，我建议 - 这仅在 a`Circle`是`IComparable<Circle>`通过协方差时才有效。

编辑：这是它工作的一个例子：

```
using System;

public abstract class Shape : IComparable<Shape>
{
    public abstract double Area { get; }

    public int CompareTo(Shape other)
    {
        return Area.CompareTo(other.Area);
    }
}

public interface ISomethingCircleImplements {}

public class Circle : Shape, ISomethingCircleImplements
{
    private readonly double radius;

    public Circle(double radius)
    {
        this.radius = radius;
    }

    public override double Area { get { return radius * radius * Math.PI; } }
}

class Test
{
    static void Foo<T>(IComparable<T> item1, T item2)
        where T : ISomethingCircleImplements
    {
        Console.WriteLine(item1.CompareTo(item2));
    }

    static void Main()
    {
        Circle c1 = new Circle(10);
        Circle c2 = new Circle(20);

        Foo<Circle>(c1, c2);
    }
} 
```

有趣的是，类型推断在这里*不起作用*——但我不确定为什么。不过，逆变本身很好。

# sql-server-2008 - 使用 CASE 和 JOIN 进行更新

> ID：11795712
> 
> 赞同：0
> 
> 时间：2012-08-03T12:26:04.853
> 
> 标签：sql-server-2008

我有一张像这样的桌子。每次重新创建表时，用户名和不同的技能都设置为 0（每天一次）（用户名和技能为 6）

```
UserName    S1      S2      S3      S4      S5      S6
MATTHEWS    0       0       0       0       0       0
FOREMANE    0       0       0       0       0       0
CASTORP     0       0       0       0       0       0
RODNEYR     0       0       0       0       0       0 
```

...

另一张桌子。

```
UserName    Skill
MAITAA      In Unre
PORTALAL    Out TLG (Kit)
NAVAROLEO   In Kit 
```

所以，我要做的是用这个规则加入表（通过用户名）和更新表 1。如果表 2 中的 Sill 表示 (In Unre) 表 1 中的 S1 应更改为 TRUE (1)，如果表 2 中的 Skill 表示 In Kit，则表 1 中的 S2 应更改为 TRUE，等等。

据我所知，我将在案例中使用更新，但我无法将连接放置在两个表之间。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:45:47.877

尝试这个：

在这里，我尝试只更新 S！和 S2 基于规则中的值。同样，您可以添加更多表 1 列

```
CREATE TABLE test6(UserName varchar(10),S1 int,S2 int,S3 int,S4 int,S5 int,S6 int)
INSERT INTO test6
VALUES('MATTHEWS',0,0,0,0,0,0),
('FOREMANE',0,0,0,0,0,0),
('CASTORP',0,0,0,0,0,0),
('RODNEYR',0,0,0,0,0,0)

select * from test6

create table test7(UserName varchar(20),Skill varchar(50))
INSERT INTO test7
VALUES('MATTHEWS','In Unre'),
('PORTALAL','Out TLG (Kit)'),
('NAVAROLEO','In Kit')

update t1 SET t1.S1 = CASE WHEN t2.Skill='In Unre' then 1 else 0 end,
              t1.S2 = CASE WHEN t2.Skill='In Kit'  then 1 else 0 end 
from test6 t1 inner join test7 t2
on t1.UserName = t2.UserName 
```

# android - 我可以设置android相机的焦距吗？

> ID：11795714
> 
> 赞同：3
> 
> 时间：2012-08-03T12:26:08.710
> 
> 标签：android, camera

我正在尝试手动控制焦距

喜欢这个视频：[http ://www.youtube.com/watch?v=Nh_PNXD4Jqk](http://www.youtube.com/watch?v=Nh_PNXD4Jqk)

我已经知道如何使用相机的基本功能。

大家知道如何手动设置焦距吗？

感谢您的时间和帮助：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T15:02:57.617

这在 Android 4.4 之前的 Android 版本中是不可能的。在 Android 4.4 中，有一个隐藏的（非公共）API 可以执行此操作，但不建议使用此类 API，因为它们不被认为是稳定的。在此处查看详细信息：[http ://www.slideshare.net/lbk003/an-devcon2013-camera3kaurfinal](http://www.slideshare.net/lbk003/an-devcon2013-camera3kaurfinal)

# python - 浏览器不发送表单数据？

> ID：11795715
> 
> 赞同：1
> 
> 时间：2012-08-03T12:26:10.953
> 
> 标签：python, post, cgi, browser-cache

`POST`我有一个 Web 表单，其中包含一个按钮，用于通过Python CGI 脚本提交一个小文本文件和一个文本字段，该脚本使用`cgi.FieldStorage`. 该脚本处理文件，但首先检查文本字段是否出现在文件中。如果文件不包含文本字段中的文本，则脚本会向用户显示错误页面。

一位用户（Windows XP 和最近的 Firefox；后来也用 Internet Explorer 进行了测试）遇到了网页问题。该脚本报告该文件不包含文本字段，而实际上它包含。我自己在用户的计算机上对此进行了测试。只有在硬刷新 (Ctrl-F5) 页面、再次填写表单并提交之后，脚本才会显示所需的输出而不是错误。该用户在两次会话之间重新启动计算机后的不同日子里多次遇到此问题。清除浏览器缓存文件并没有解决问题。

这可能是什么原因造成的？浏览器是发送旧表单数据还是不发送表单数据？

**编辑：**用户现在遇到脚本报告文件格式错误的问题。如果脚本收到空文件或无法打开文件，脚本将报告此情况。显然浏览器没有发送所有的表单数据？我们也用 Internet Explorer 进行了测试，它也出现了同样的问题。这是Windows的问题？

# facebook - 未经用户授权在 facebook 用户墙上发帖

> ID：11795718
> 
> 赞同：0
> 
> 时间：2012-08-03T12:26:31.080
> 
> 标签：facebook, facebook-wall

我正在创建一个应用程序，在用户加载我的应用程序时将一些文本发布到用户墙上。有没有办法在没有用户授权的情况下做到这一点？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:28:44.730

不可能的。如果他们允许的话，Facebook 现在就会被发送垃圾邮件。

# c# - 随机邻接表生成器

> ID：11795727
> 
> 赞同：2
> 
> 时间：2012-08-03T12:27:01.393
> 
> 标签：c#, graph-theory, adjacency-list, clique-problem

我目前正在开发一个应用程序，以在我的最后一年项目的图表中找到最大集团。我已经完成了大部分项目，并且刚刚开始测试应用程序。

该应用程序当前使用邻接列表作为输入，我想知道是否有人知道邻接列表随机生成器，以便我可以测试我的应用程序？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:30:25.970

这取决于您的随机图模型。最简单的模型是[Erdős–Rényi 模型](http://en.wikipedia.org/wiki/Erd%C5%91s%E2%80%93R%C3%A9nyi_model)，您可以在其中指定节点的数量和任何给定对之间的链接概率。这很容易生成，但生成的图表不会很有趣，因为它们与现实世界中观察到的大多数网络完全不同。现实世界的网络通常具有幂律度分布和更高的聚类系数。还有一些您可能感兴趣的其他标准模型可以解决这个问题（[Watts-Strogatz](http://en.wikipedia.org/wiki/Watts_and_Strogatz_model)或[Barabási-Albert](http://en.wikipedia.org/wiki/Barab%C3%A1si%E2%80%93Albert_model)）。我还使用了[本文中描述的 LFR 模型，](http://arxiv.org/pdf/0908.1062.pdf)[此处](https://sites.google.com/site/andrealancichinetti/files)提供了源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T12:26:53.633

如果您根据邻接矩阵而不是邻接列表来考虑图形，则此问题更容易解决。具有`m`顶点的图可以用`m`by`m`矩阵表示，其中每条边如果不存在则为 0，如果存在则为 1。

对于有向图，所有元素都是必需的，但对于无向图，您需要一个上三角矩阵。

获得邻接矩阵后，您可以轻松地将其转换为邻接列表。

# jquery - 如何在jquery的页面中加载html响应

> ID：11795731
> 
> 赞同：2
> 
> 时间：2012-08-03T12:27:15.417
> 
> 标签：jquery, jquery-plugins

你能修改这段代码吗

```
var url = window.top.SAMGLOBALS.base_url + menuItemUrl;
console.log("AJAX post URL: " + url);

jQ.ajax({
    type : "POST",
    url : url,
    cache : false,
    success : function(msg) {
            console.log(msg);
            //jQ("<div></div>").attr('id', 'dvShiftDialog').appendTo('body');
            jQ('#dvShiftDialog').load(jQ(msg));
        }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:30:14.060

如果您想使用 Id 将您从 ajax 服务器页面获得的响应加载到 div `dvShiftDialog`，您可以使用该`html`方法来执行此操作。

[html](http://api.jquery.com/html/)方法将用新内容替换该元素的当前内部 html（在本例中为 msg 变量的内容）

```
 var url="some-valid-url-to-handle-ajax";
 $.ajax({
           type : "POST",
           url : url,
           cache : false,
           success : function(msg) {
               $('#dvShiftDialog').html(msg);
            }
        }); 
```

**编辑：**如果你想加载整个页面的内容，为什么不让容器 div 用`load`函数加载它，而不是进行 POST 调用？（我没有看到您将任何参数传递给 POST，因此您可以简单地使用 load 方法）

假设你的 HTML 是这样的

现在你可以让这个脚本加载一些其他内容到它

```
<script type="text/javascript">
$(function(){
  var url="some-awesome-page-content-url.php";
  $("divContainer").load(url);
});
</script> 
```

确保您已将 jQuery 加载到页面。

# php - PHP OAuthProvider拒绝登台服务器上的签名方法

> ID：11795733
> 
> 赞同：1
> 
> 时间：2012-08-03T12:27:20.707
> 
> 标签：php, oauth, single-sign-on, oauth-provider

我使用[PHP Extension](http://www.php.net/manual/en/class.oauthprovider.php "OAuthProvider PHP 扩展")创建了一个 OAuth Provider 。这在我的开发环境中运行良好，但在将其移动到我们的暂存服务器后，我不断收到错误消息：

```
oauth_problem=signature_method_rejected 
```

我已经通过在连接到自身的登台服务器上使用测试脚本进行连接、连接登台服务器的开发服务器以及使用 PHP OAuth 扩展和[Zend OAuth 消费者](http://framework.zend.com/manual/en/zend.oauth.introduction.html "Zend OAuth 介绍")类来测试这一点。在任何情况下，它在连接到开发服务器时都可以工作，但在连接到暂存服务器时会出现上述错误。

跟踪代码，实例化OAuthProvider类时报错。

```
$this->provider = new OAuthProvider(); 
```

检查 $_SERVER['QUERY_STRING'] 给了我以下信息：

```
oauth_consumer_key=6e449c12132115a9ba1cf1163c37f904&
oauth_nonce=e2ff158969b3e7213927e4a19de1b11f&
oauth_timestamp=1343990462&
oauth_signature_method=HMAC-SHA1&
oauth_version=1.0&
oauth_callback=redacted&
oauth_signature=y06YvCzVno8GSDib4%2BOeExDGWH0%3D 
```

（为了可读性插入了中断）

如您所见，签名方法是有效的（我已经尝试过规范中提到的其他方法，但它们在登台服务器或开发服务器上都不起作用。

有没有人遇到过这样的事情？如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:26:04.233

你能检查一下你是否有任何 htauth 东西阻塞吗？此外，您的应用程序是否会在 http 和 https 连接之间躲避和潜水？

我相信您已经设置了 htauth，这会阻止通信我建议将您的虚拟主机修改为：

Order Deny,Allow deny from all AuthType Basic AuthName "Protected Area" AuthUserFile 要求您的 IP 地址允许有效用户

如果你把它放在你的虚拟主机引用你的公用文件夹中，这应该允许 IP 地址在没有 htpasswd 的情况下进行通信......

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T15:04:43.300

我通过更新解决了这个`SIGNATURE_METHOD = HmacSHA1`问题`HMAC-SHA1`。

# java - 未输入 switch 语句

> ID：11795736
> 
> 赞同：2
> 
> 时间：2012-08-03T12:27:37.773
> 
> 标签：java, for-loop, switch-statement

我遇到了一个奇怪的问题。我有一个案例陈述，根本没有被输入。我已经用 Eclipse 调试器逐步完成了它，它得到了上面的行，然后直接进入后面的行。它编译并运行没有错误。

这是一个总体大纲：

```
 for (int k = 0; k<9; k++) {
        System.out.println("Program is here - #1");
        doSomething();
        switch (switchcode) {

        case 1:
            switch (k) {

            case 1: case 2: case 3:
                doOneOneTwoThree(); //#2
                break;
            case 4: case 5: case 6:
                doOneFourFiveSix(); //#3
                break;
            default:
                System.err.println("error k defaulted in case 1");
                break;
            }
            break;
        case 2:
            switch (k) {

            case 1: case 2: case 3:
                doTwoOneTwoThree(); //#4
                break;
            case 4: case 5: case 6:
                doTwoFourFiveSix(); //#5
                break;
            default:
                System.err.println("error k defaulted in case 2");
                break;
            }
            break;
        default:
            System.err.println("error switchcode defaulted");
            break;
        }

        doSomethingElse();
    } 
```

毫无疑问，我做错了什么，但我真的不知道到底是什么。是因为我在一个案例中打开了 k 吗？我以前做过，而且很成功，也许幸运的是。

在更大的 for 循环中嵌套 case 语句是否会导致问题？

我在四处研究时偶尔看到“分支预测失败”，我不知道那是什么，但它可能正在发生。

在默认情况下是否`break;`会导致问题？我不认为这是因为我在没有他们的情况下尝试过并且得到了相同的结果。

对不起，长代码和问题。感谢您的任何指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:32:36.953

如果 Eclipse 没有达到应有的效果，那么源代码可能与 Eclipse 编译的代码不同步。

尝试做一个干净和新的构建。

重新启动 Eclipse 或重新导入项目也可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:33:00.877

最可能的解释是你没有调试你认为的编译代码。当您使用新源运行稍微旧的类时，您可以看到源将是正确的并且是最新的，但是编译后的代码将跳到看起来不错的旧行号。

我会尽量做干净的构建。如果这不起作用，请尝试移动代码。例如添加很多空行。

# c# - 内容响应类型 图片/Png

> ID：11795737
> 
> 赞同：4
> 
> 时间：2012-08-03T12:27:47.773
> 
> 标签：c#, asp.net, .net, vb.net, visual-studio-2010

我正在尝试创建一个`Image/Png`从`chartDirector`

到目前为止，这是我在 VB 中的内容：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) 
    Handles Me.Load
    Dim mychart As XYChart = New XYChart(700, 170)
    Dim values As Double() = {25, 18, 15, 12, 8, 30, 35}
    Dim labels As String() = {"Labor", "Licenses", "Taxes", "Legal", "Insurance",
                              "Facilities", "Production"}
    mychart.setPlotArea(30, 20, 200, 200)
    mychart.addBarLayer(values)
    Response.ContentType = "image/png"
    Response.BinaryWrite(mychart.makeChart2(Chart.PNG))
    Response.Close()
End Sub 
```

当我运行这个页面时，我得到这个输出：

> ![](../Images/fb0dd13ce16d12404a0af434e35b3f19.png)

我从下面的 asp 代码中得到了这个想法

```
 <%@ language="vbscript" %> 
   <% 
   Set cd = CreateObject("ChartDirector.API") 
   'The data for the bar chart 
   data = Array(85, 156, 179.5, 211, 123) 
   'The labels for the bar chart 
   labels = Array("Mon", "Tue", "Wed", "Thu", "Fri") 
   'First, create a XYChart of size 250 pixels x 250 pixels 
   Set c = cd.XYChart(250, 250) 
   'Set the plotarea rectangle to start at (30, 20) and of  
   322
   '200 pixels in width and 200 in height 
   Call c.setPlotArea(30, 20, 200, 200) 
   'Add a bar chart layer using the supplied data 
   Call c.addBarLayer(data) 
   'Set the x-axis labels using the supplied labels 
   Call c.xAxis().setLabels(labels) 
   'output the chart 
   Response.contenttype = "image/png" 
   Response.binarywrite c.makeChart2(cd.PNG) 
   Response.end 
   %> 
```

它使用`img` `src`链接到此页面来呈现图像

*问题*是我怎样才能做同样的实现`aspx`？

*请注意*，我对刚开始的 .Net 了解不多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:39:02.427

使用`Response.End`而不是`Response.Close`.

响应是缓冲的，所以如果你关闭它，浏览器不会得到缓冲区中的内容，除非你在关闭流之前刷新缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T12:30:59.263

在这种情况下，您可能想要使用自定义`.ashx`HttpHandler 而不是经典`.aspx`页面。[这是](http://www.dotnetperls.com/ashx)使用这些的一个很好的介绍。

基本上，您将继承`IHttpHandler`定义`ProcessRequest`方法的接口。不幸的是，我只知道 C#。

```
public class CustomImageHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        // here you'll use context.Response to set the appropriate
        // content and http headers
        context.Response.StatusCode = (int)HttpStatusCode.OK;
        context.Response.ContentType = "image/png";
        byte[] responseImage = GenerateImage();
        context.Response.BinaryWrite(responseImage);
        context.Response.Flush();
    }
} 
```

# coldfusion - 不是为我创建的隐式 Getter 和 Setter

> ID：11795738
> 
> 赞同：6
> 
> 时间：2012-08-03T12:27:48.693
> 
> 标签：coldfusion, getter-setter, coldfusion-10

我开始使用 ColdFusion 9 中添加的新 cfproperty 内容，但我想使用的主要部分现在似乎在 ColdFusion 10 中不起作用。我创建了以下 CFC：

```
component displayName="Sources" {
  /**
  * @getter true
  * @setter true
  * @type numeric
  * @default 1
  **/
  property sourceid;
  /**
  * @getter true
  * @setter true
  * @type numeric
  * @default 1
  **/
  property sourcegroup;

  public any function init () {
    This.domainRegex = '\/\/(www\.)?(([A-Za-z0-9\-_]+\.?)+)';
    return this;
  }
} 
```

当我转储 CFC 的元数据时，我可以看到属性，但没有为它们创建方法，我无法调用`getSourceId()`或`getSourceGroup()`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T12:40:21.610

尝试这个：

```
component accessors="true" displayName="Sources" {
    property name="sourceid" type="numeric" default="1";
    property name="sourcegroup" type="numeric" default="1";
    public any function init () {
        this.domainRegex = '\/\/(www\.)?(([A-Za-z0-9\-_]+\.?)+)';
        return this;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:40:40.483

尝试删除结束评论中的第二颗星，CF 示例都只有一颗。

或者，使用其他语法：

```
property name="sourceid" type="numeric" default="1"; 
```

我不喜欢在任何其他 JavaDoc 的注释中添加注释，只是感觉有点不对劲。

# c# - 对 Oracle 数据库的 Windows 身份验证

> ID：11795740
> 
> 赞同：0
> 
> 时间：2012-08-03T12:28:09.830
> 
> 标签：c#, .net, oracle, oracle11g

我正在尝试使用 Windows 身份令牌连接到 Oracle 数据库，它昨天工作，但今天它没有，我不知道为什么。

这是我的代码：

```
string ssoConnectionString;
var user = CreateSSOConnectionString(connectionStringBuilder, out ssoConnectionString);
oracleConnectionStringBuilder = new OracleConnectionStringBuilder
                                    {
                                        UserID = user.Identity.Name,
                                        ConnectionString = ssoConnectionString
                                    };

private WindowsPrincipal CreateSSOConnectionString(IConnectionStringBuilder connectionStringBuilder, out string ssoConnectionString)
{
    var user = new WindowsPrincipal(WindowsIdentity.GetCurrent());
    ssoConnectionString = ConfigurationManager.AppSettings["SSOConnectionString"];
    ssoConnectionString = string.Format(ssoConnectionString, connectionStringBuilder.Host);
    return user;
}

Connection = new Oracle.DataAccess.Client.OracleConnection();
Connection.ConnectionString = oracleConnectionString.ConnectionString;

Connection.Open(); //Fails on this line 
```

代码看起来并不完全像这样，但它是基本要素。

SSO ConnectionString 位于 app.config 中，如下所示：

```
<add key="SSOConnectionString" value="DATA SOURCE={0};User Id=/;" /> 
```

这是一个链接，显示 Oracle 他们自己如何解释如何做到这一点： http: [//docs.oracle.com/cd/E11882_01/win.112/e18754/featConnecting.htm#i1006432](http://docs.oracle.com/cd/E11882_01/win.112/e18754/featConnecting.htm#i1006432)

这是我收到的错误消息：

```
ORA-1017: invalid username/password; logon denied 
```

我检查了断点，一切看起来都很好。我也搜索了很多这个错误，大多数人说这是因为密码在 Oracle 版本 11g 中变得区分大小写，但我没有提供任何密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:29:07.830

导致此错误的原因实际上是`Oracle.DataAccess.dll`版本与我机器上安装的 Oracle 客户端不匹配。

所以这个错误其实和配置文件中的代码或者连接字符串一点关系都没有。

通过在命令窗口中写入“sqlplus”来检查您的 Oracle 客户端版本，检查`Oracle.DataAccess.dll`版本和目标 .NET 框架版本是否匹配。

# graphviz - 改变箭头方向

> ID：11795742
> 
> 赞同：1
> 
> 时间：2012-08-03T12:28:17.737
> 
> 标签：graphviz, dot

我从这个输出生成了一个图表：

```
digraph G {
    { rank = same; 1; 2; 3; 4; 5; 6; 7; 8; 9; };
    2 -> 3 [label="hi there"];
} 
```

但是，我希望箭头从 3 变为 2。我尝试改变箭头的方向（<-），但没有奏效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:57:48.290

好的，我找到了，我所要做的就是使用 [dir=back]。

但是我仍然没有弄清楚如何使节点之间的距离在所有节点之间都相同，它在 2 和 3 之间更大。请参阅[如何生成具有相同间距的 img](https://stackoverflow.com/questions/11792042/how-to-generate-img-with-same-spacing)

# android - Android XML：在 XML 布局文件中将资源 ID 设置为 View 的标签

> ID：11795745
> 
> 赞同：3
> 
> 时间：2012-08-03T12:28:36.480
> 
> 标签：android, xml, android-layout, android-view, resource-id

我想在我的 Android XML 布局文件中指定两个视图之间的关系。这是我想做的事情：

```
 <View
      android:id="@+id/pathview"
      android:layout_width="match_parent"
      android:layout_height="match_parent" />
  ...
  <CheckBox
      android:id="@+id/viewPath"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:checked="true"
      android:paddingRight="7dp"
      android:shadowColor="#000000"
      android:shadowDx="0.5"
      android:shadowDy="0.5"
      android:shadowRadius="0.5"
      android:tag="@id/pathview"
      android:text="Paths" /> 
```

但是，XML 解析器将标记视为字符串而不将其解释为整数（`System.out.println((String) [viewPath].getTag());`打印“false”）。有什么方法可以将资源 ID 分配给视图的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T20:19:50.857

如果你使用

```
android:tag="?id/pathview" 
```

你会得到一个字符串 id，它是一个十进制整数，前缀有问号。我无法找到有关此行为的文档，但它似乎足够稳定。您正在做的是请求当前主题的 id。为什么生成的字符串会以“？”为前缀 是未知的。

例如：

给定一些标识符，

```
public static final int test_id=0x7f080012; 
```

正在做，

```
android:tag="?id/test_id" 
```

将产生一个标签值：

```
"?2131230738" 
```

然后你可以这样做：

```
 View otherView = activity.findViewById(
    Integer.parseInt(
        someView.getTag().toString().substring(1)
    )
 ); 
```

当然，如果您正在编写更通用的逻辑，您需要检查标签是否为 null 并捕获 NumberFormatException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T20:39:11.013

You can set the id string as a tag and then get the id.

some like:

```
<View
  android:id="@+id/pathview"
  android:layout_width="match_parent"
  android:layout_height="match_parent" />
...
<CheckBox
  android:id="@+id/viewPath"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:checked="true"
  android:paddingRight="7dp"
  android:shadowColor="#000000"
  android:shadowDx="0.5"
  android:shadowDy="0.5"
  android:shadowRadius="0.5"
  android:tag="pathview"
  android:text="Paths" /> 
```

Then in your code:

```
CheckBox viewPath = findViewById(R.id.pathview);
String pathViewStrId = (String) viewPath.getTag();
int patViewId = getResources().getIdentifier(pathViewStrId, "id", getPackageName());
View pathView = findViewById(patViewId); 
```

# android - 在应用程序中全局捕获 ANR

> ID：11795753
> 
> 赞同：1
> 
> 时间：2012-08-03T12:29:00.170
> 
> 标签：android

我只是想知道是否有任何方法可以通过触发任何事件函数或至少捕获它来获取 ANR 通知。尽管在单独的线程中运行长进程，但仍有 ANR 的可能性。所以我想要做的就是当应用程序检测到它有 ANR自动处理一些功能。请帮助我如何实现这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:05:43.020

您可以使用侦听日志（使用线程）的服务（最好是前台服务），如果有指示 ANR 的日志，请处理它。

这是导致 ANR 的应用程序的一个小示例：

```
...
findViewById(R.id.button).setOnClickListener(new OnClickListener()
  {
    @Override
    public void onClick(final View v)
      {
      try
        {
        Thread.sleep(10000);
        }
      catch(final InterruptedException e)
        {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
      }
  });
... 
```

这是我在获得 ANR 时从 logcat 获得的日志：

```
08-03 13:02:37.746: E/ActivityManager(158): ANR in com.example.anr (com.example.anr/.MainActivity)
08-03 13:02:37.746: E/ActivityManager(158): Reason: keyDispatchingTimedOut
08-03 13:02:37.746: E/ActivityManager(158): Load: 6.19 / 2.37 / 0.86
08-03 13:02:37.746: E/ActivityManager(158): CPU usage from 5598ms to 0ms ago:
08-03 13:02:37.746: E/ActivityManager(158):   2.6% 158/system_server: 2.5% user + 0.1% kernel / faults: 86 minor
08-03 13:02:37.746: E/ActivityManager(158):   0.5% 298/com.android.phone: 0.3% user + 0.1% kernel / faults: 15 minor
08-03 13:02:37.746: E/ActivityManager(158):   0% 35/rild: 0% user + 0% kernel
08-03 13:02:37.746: E/ActivityManager(158): 4.6% TOTAL: 3.9% user + 0.6% kernel
08-03 13:02:37.746: E/ActivityManager(158): CPU usage from 2029ms to 2654ms later:
08-03 13:02:37.746: E/ActivityManager(158):   11% 158/system_server: 4.8% user + 6.4% kernel / faults: 2 minor
08-03 13:02:37.746: E/ActivityManager(158):     11% 192/InputDispatcher: 4.8% user + 6.4% kernel
08-03 13:02:37.746: E/ActivityManager(158):     1.6% 163/Compiler: 1.6% user + 0% kernel
08-03 13:02:37.746: E/ActivityManager(158):     1.6% 193/InputReader: 0% user + 1.6% kernel
08-03 13:02:37.746: E/ActivityManager(158): 18% TOTAL: 9.3% user + 9.3% kernel 
```

所以，是的，我认为这是可能的。

# drupal - 如何设法在我的网站首页显示表格产品显示节点而不是默认产品显示

> ID：11795757
> 
> 赞同：0
> 
> 时间：2012-08-03T12:29:08.173
> 
> 标签：drupal, product, commerce

我已经看到并设法让我的产品像这样显示[http://vimeo.com/22746978](http://vimeo.com/22746978)所以我制作了我的产品表格但是我怎样才能设法在我的网站首页显示这个表格以便当客户类型 example.com 将看到表格而不是默认产品显示？一个提示是，当您制作此产品显示节点时，drupal 会为您提供一个您可以看到的 url，但是当我将 example.com 作为 url 时，它说它无法完成，所以我需要以某种方式将 example.com 重定向到 example .com/product-dispay-node 以便显示它，但我不知道如何。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:51:24.020

您可以将您的首页设置为指向您在**配置**>>**站点信息**>>下**默认首页**（at `admin/config/system/site-information`）下的任何页面

# facebook - 使用 facebook 应用程序向 facebook 朋友发送私人消息的问题

> ID：11795759
> 
> 赞同：-1
> 
> 时间：2012-08-03T12:29:13.603
> 
> 标签：facebook, facebook-graph-api

我正在开发一个 facebook 应用程序，我需要向用户 facebook 朋友发送消息，是否可以在不打开 facebook 发送消息对话框的情况下发送，因为当我使用 facebook SDK 时它使用它的 ui 进行预览，我也尝试使用直接网址

```
http://www.facebook.com/dialog/send?app_id=658662621626&name=People%20Argue%20Just%20to%20Win&recipients[0]=466565&link=http://www.redbuffer.com&redirect_uri=http://www.example.net/FB-app/ 
```

他们还有其他方法可以让我向 Facebook 朋友发送私人消息吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:35:23.357

我最初的想法是一个响亮的不。原因？如果他们允许 API 直接发送消息，他们就会向垃圾邮件敞开大门。不过只是猜测。

# c++ - C++：重载运算符。好奇的类型转换运算符

> ID：11795761
> 
> 赞同：0
> 
> 时间：2012-08-03T12:29:19.787
> 
> 标签：c++, operator-overloading

我知道，C++ 有运算符，我*不应该*重载。

操作员 '。' 是我*不能*重载的这些运算符之一。

但是，据了解，这种重载是否不好？

我想，这真的很糟糕。
但我不需要知道，如果我有对象或指向对象的指针。
然而，这既有趣又危险

```
class A {
     public:
           get_int(){ return a } 
           A(){ a=1 }
           operator A*(){ return this }
     private: int a;
};
int main(){
    A a;
    A* c = a;
    //here, c->get_int() will return 1
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:34:34.957

您需要重载间接运算符`->`以允许通用`x->foo()`语法，无论是否`x`是指针：

```
T * T::operator->() { return this; } 
```

用法：

```
T x, * p = &x;
p->foo(); // OK as usual
x->foo(); // also OK, weirdly 
```

* * *

例子：

```
#include <cstdio>
struct Foo
{
    void foo() { std::puts("Boo"); }
    Foo * operator->() { return this; }
};

int main() { Foo x, * p = &x; p->foo(); x->foo(); } 
```

# java - 可变大小的 LRU 缓存

> ID：11795762
> 
> 赞同：4
> 
> 时间：2012-08-03T12:29:27.953
> 
> 标签：java, caching, hashtable, lru

我正在尝试`LRU cache`在 Java 中实现一个应该能够：
动态更改大小。从某种意义上说，我计划将其`SoftReference`订阅为`ReferenceQueue`. 因此，根据内存消耗，缓存大小会有所不同。

我计划使用`ConcurrentHashMap`where 值将成为软引用，然后定期清除队列以更新地图。
但是上面的问题是，我该怎么做呢`LRU`？

我知道我们无法控制 GC，但是我们是否可以管理对值的引用（在缓存中），使得缓存中所有可能的对象都将根据使用情况（即最后一次）变得可轻松访问（在 GC 下）它被访问了），而不是以某种随机的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T13:19:43.467

弱引用和软引用都不太适合这种情况。WeakReferences 往往会在对象不再有更强的引用时立即被清除，而软引用只有在堆增长到最大大小并且需要抛出 OutOufMemoryError 时才会被清除。

通常，使用基于时间的方法和常规强引用更有效，这对于 VM 来说比 Reference 子类便宜得多（程序和 GC 处理速度更快，并且不为引用本身使用额外的内存。）。即释放一段时间内未使用的所有对象。您可以使用定期 TimerTask 来检查这一点，无论如何您都需要它来操作您的参考队列。这个想法是，如果创建对象需要 10 毫秒，并且在它最后一次使用后最多保留 1 秒，那么平均只比永久保留所有对象慢 1%。但是由于它很可能会使用更少的内存，因此实​​际上会更快。

*编辑：*实现这一点的一种方法是在内部使用 3 个存储桶。放入缓存的对象总是插入到存储桶 0 中。当请求一个对象时，缓存会按顺序在所有 3 个存储桶中查找它，如果它不存在，则将其放入存储桶 0。TimerTask 以固定的时间间隔被调用，只是丢弃桶 2 并在桶列表的前面放置一个新的空桶，这样新的桶 0 将是空的，以前的桶 0 变为 1，以前的桶 1 现在是桶2\. 这将确保空闲对象将在至少一个和至多两个计时器间隔中存活，并且每个间隔访问不止一次的对象可以非常快速地检索。这种数据结构的总维护开销将大大小于基于引用对象和引用队列的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:58:18.180

除非您同时想要几个这样的缓存，否则您的问题并没有真正的意义。如果你只有一个缓存，不要给它一个大小限制，总是使用`WeakReference`. 这样，缓存将自动使用所有可用的空闲内存。

不过，准备好与您的系统管理员进行一些热烈的讨论，因为他们会抱怨您的应用程序存在内存泄漏并且“随时会崩溃！” *叹*

另一种选择是使用像[EHCache](http://ehcache.org/)这样成熟的缓存库，因为它已经知道所有关于缓存的知识，而且他们花了数年时间才把它们弄好——从字面上看。除非您想花费数年时间调试代码以使其适用于 Java 内存模型的每个角落，否则我建议您这次避免重新发明轮子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:38:03.057

我会使用[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html#removeEldestEntry%28java.util.Map.Entry%29)，因为它支持访问顺序并用作 LRU 映射。它可以具有可变的最大大小。

基于使用情况在弱引用和软引用之间切换是非常困难的，因为。很难确定 a）您的缓存独占使用了多少，b）系统正在使用多少 c）在 Full GC 之后将使用多少。

您应该注意，弱引用和软引用仅在 GC 上被清除，并且在运行 GC 之前丢弃或更改它们不会释放内存。

# sql - SQL 通配符搜索 - 效率？

> ID：11795770
> 
> 赞同：15
> 
> 时间：2012-08-03T12:29:45.690
> 
> 标签：sql, sql-server, sql-server-2008, query-optimization, processing-efficiency

`LIKE`最近，关于使用和通配符搜索 MS SQL 数据库的最有效方法一直在争论。我们使用`%abc%`、`%abc`和进行比较`abc%`。有人说过，您应该始终在术语末尾使用通配符 ( `abc%`)。因此，根据他们的说法，如果我们想找到以“abc”结尾的东西，使用 `reverse(column) LIKE reverse('%abc') 是最有效的。

我使用 SQL Server 2008 (R2) 设置了一个测试来比较以下每个语句：

```
select * from CLMASTER where ADDRESS like '%STREET'
select * from CLMASTER where ADDRESS like '%STREET%'   
select * from CLMASTER where ADDRESS like reverse('TEERTS%')  
select * from CLMASTER where reverse(ADDRESS) like reverse('%STREET') 
```

CLMASTER 拥有大约 500,000 条记录，大约有 7,400 个地址以“Street”结尾，大约 8,500 个地址中有“Street”，但不一定在结尾。每次测试运行需要 2 秒，它们都返回了相同数量的行，除了`%STREET%`，它发现了额外的 900 左右的结果，因为它选择了最后有公寓号码的地址。

由于 SQL Server 测试在执行时间上没有显示出任何差异，我转而使用 PHP，在其中使用以下代码，在每个语句中切换，以快速运行多个测试：

```
<?php

    require_once("config.php");
    $connection = odbc_connect( $connection_string, $U, $P );

    for ($i = 0; $i < 500; $i++) {
    $m_time = explode(" ",microtime());
    $m_time = $m_time[0] + $m_time[1];

    $starttime = $m_time;

    $Message=odbc_exec($connection,"select * from CLMASTER where ADDRESS like '%STREET%'");
    $Message=odbc_result($Message,1);

    $m_time = explode(" ",microtime());
    $m_time = $m_time[0] + $m_time[1];

    $endtime = $m_time;

    $totaltime[] = ($endtime - $starttime);

}

odbc_close($connection);

echo "<b>Test took and average of:</b> ".round(array_sum($totaltime)/count($totaltime),8)." seconds per run.<br>";
echo "<b>Test took a total of:</b> ".round(array_sum($totaltime),8)." seconds to run.<br>";

?> 
```

此测试的结果与在 SQL Server 中进行测试时的结果一样模棱两可。

`%STREET`在 166.5823 秒内完成（每个查询平均 0.3331），平均 0.0228 中找到 500 个结果。

`%STREET%`在 149.4500 秒内完成（每个查询平均 0.2989），平均 0.0177 找到 500 个结果。（每个结果的时间更快，因为它在相似的时间内找到比其他结果更多的结果。）

`reverse(ADDRESS) like reverse('%STREET')`在 134.0115 秒内完成（每个查询平均 0.2680），平均在 0.0183 秒内找到 500 个结果。

`reverse('TREETS%')`在 167.6960 秒内完成（每个查询平均 0.3354），平均 0.0229 找到 500 个结果。

我们预计此测试将显示`%STREET%`总体上最慢的，而实际上它是运行速度最快的，并且返回 500 个结果的平均时间最好。虽然建议`reverse('%STREET')`的整体运行速度最快，但返回 500 个结果的时间稍慢。

额外的乐趣：当我们运行测试时，一位同事在服务器上运行分析器，发现使用双通配符会显着增加 CPU 使用率，而其他测试之间的差异在 1-2% 以内。

是否有任何 SQL 效率专家可以解释为什么在搜索字符串的末尾使用通配符比在开头更好的做法，以及为什么在字符串的开头和结尾使用通配符搜索比使用通配符更快刚开始？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-03T12:35:02.397

*如果*该列被索引，则在字符串末尾使用通配符`'abc%'`会有所帮助，因为它将能够直接查找以开头的记录并忽略其他所有内容。开头有通配符意味着它必须查看每一行，而不考虑索引。*`'abc'`*

 *好文章[在这里](http://www.brentozar.com/archive/2010/06/sargable-why-string-is-slow/)有更多解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T12:37:23.230

[`Like`](http://msdn.microsoft.com/en-us/library/ms179859.aspx)只有字符串末尾的通配符才会使用索引。

[`Contains`](http://msdn.microsoft.com/en-us/library/ms187787.aspx)如果您想提高字符串前后通配符的速度，您应该考虑使用 FTS 。另[请参阅有关 Contains 与 Like 的相关 SO 帖子](https://stackoverflow.com/a/3214044/175679)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T12:35:41.157

从[Microsoft](http://msdn.microsoft.com/en-us/library/ff647793.aspx)来看，保留结束通配符更有效，因为如果存在通配符，它​​可以使用索引而不是执行扫描。想想搜索是如何工作的，如果您不知道它之前是什么，那么您必须扫描所有内容，但如果您只搜索尾部，那么您可以对行进行排序，甚至可能（取决于您要查找的内容） ) 进行准二分搜索。

> 连接或谓词中的一些运算符往往会产生资源密集型操作。具有用通配符（“%a value%”）括起来的值的 LIKE 运算符几乎总是会导致表扫描。由于前面的通配符，这种类型的表扫描是一项非常昂贵的操作。只有关闭通配符的 LIKE 运算符可以使用索引，因为索引是 B+ 树的一部分，并且通过从左到右匹配字符串值来遍历索引。

因此，上面的引用也解释了为什么在运行两个通配符时会出现**巨大的处理器峰值。**它只是偶然地完成得更快，因为有足够的马力来掩盖效率低下。在尝试确定查询的性能时，您希望查看查询的执行而不是服务器的资源，因为这些可能会产生误导。如果我的服务器有足够的马力来满足天气的需求，并且我正在对小至 500,000 行的表运行查询，那么结果将具有误导性。

减去 Microsoft 引用您的答案的事实，在进行性能分析时，请考虑深入学习如何阅读执行计划。这是一项投资，而且***非常***枯燥，但从长远来看，这是值得的。

简而言之，无论谁指出仅使用尾随通配符更有效，都是正确的。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-02-25T04:31:05.210

在 MS SQL 中，如果您想获得以 'ABC' 结尾的名称，那么您可以进行如下查询（假设表名是`student`）

```
select * from  student where student_name like'%[ABC]' 
```

所以它会给那些以'A'，'B'，'C'结尾的名字。

2）如果你想拥有以'ABC'开头的名字意味着 -

```
select * from student where student_name like '[ABC]%' 
```

3）如果你想有中间有'ABC'的名字

```
select * from student where student_name like '%[ABC]%' 
```*

# java - 如何根据哈希图中的值获取密钥

> ID：11795777
> 
> 赞同：0
> 
> 时间：2012-08-03T12:30:00.177
> 
> 标签：java, hashmap

我想检索与哈希图中的值关联的特定键

我想找回“ME”的key，怎么弄？

代码片段：

```
HashMap<Integer,String> map = new HashMap<Integer,String>();
map.put(1,"I");
map.put(2,"ME"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:42:25.853

您正在尝试做的事情有一个小问题。一个 hashmap 中可能会出现多次相同的值，因此如果按值查找键，可能会出现多个结果（具有相同值的多个键）。

但是，如果您确定不会发生这种情况，则可以这样做；请参见以下示例：

```
import java.util.*;
public class Main {
    public static void main(String[] args) {
        HashMap<Integer, String> map = new HashMap<Integer, String>();
        map.put(5, "vijf");
        map.put(36, "zesendertig");
    }
    static Integer getKey(HashMap<Integer, String> map, String value) {
        Integer key = null;
        for(Map.Entry<Integer, String> entry : map.entrySet()) {
            if((value == null && entry.getValue() == null) || (value != null && value.equals(entry.getValue()))) {
                key = entry.getKey();
                break;
            }
        }
        return key;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:47:13.447

遍历地图的条目：

```
for(Entry<Integer, String> entry : map.entrySet()){
  if("ME".equals(entry.getValue())){
    Integer key = entry.getKey();
    // do something with the key
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:46:30.870

如果保证您的值是唯一的，请使用 Guava [BiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)（对应的 HashMap 称为[HashBiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashBiMap.html)。

```
 Integer key = map.inverse().get("ME"); 
```

[番石榴文档](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#BiMap)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:41:33.970

您将不得不遍历键的集合以找到您的值。

查看这篇文章了解详细信息：[Java Hashmap: How to get key from value？](https://stackoverflow.com/questions/1383797/java-hashmap-how-to-get-key-from-value)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T12:56:04.410

```
/**
 * Return keys associated with the specified value
 */
public List<Integer> getKey(String value, Map<Integer, String> map) {
  List<Integer> keys = new ArrayList<Integer>();
  for(Entry<Integer, String> entry:map.entrySet()) {
    if(value.equals(entry.getValue())) {
      keys.add(entry.getKey());
    }
  }
  return keys;
} 
```

# json - Dojo 如何从 dojo.data.ItemFileReadStore 获取 JSON 属性

> ID：11795779
> 
> 赞同：4
> 
> 时间：2012-08-03T12:30:02.197
> 
> 标签：json, dojo, store

我在 typeData 变量中有以下 JSON，然后将其放入 dojo.data.ItemFileReadStore。我需要知道的是如何检查**status**的值，它是设置为“成功”还是其他值。我无法弄清楚如何从 ItemFileReadStore 获取**状态**值，任何帮助将不胜感激。

```
 var typesData = {
        status: "success",
        label: "name",
        identifier: "value",
        items: [
            {value: 3, name: "Truck"},
            {value: 8, name: "Van"},
            {value: 6, name: "Car"},
            {value: 7, name: "Scooter"}
        ]
    };
var test = new dojo.data.ItemFileReadStore({ data: typesData }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T02:17:39.310

`ItemFileReadStore`不会处理数据对象的附加属性。但是，您可以扩展`ItemFileReadStore`以执行您需要的操作。您将覆盖“内部”方法，因此开发人员要小心。

```
dojo.declare("MyCustomStore", [Store], {
    _getItemsFromLoadedData: function(/* Object */ dataObject){
        this.serverStatus = dataObject.status;                     
        this.inherited(arguments);                            
    }
});

var typesData = {
    status: "success",
    label: "name",
    identifier: "value",
    items: [
        {value: 3, name: "Truck"},
        {value: 8, name: "Van"},
        {value: 6, name: "Car"},
        {value: 7, name: "Scooter"}
    ]
};
var test = new MyCustomStore({ data: typesData });
test._forceLoad(); // forces the processing of the data object

console.debug(test.serverStatus); 
```

[http://jsfiddle.net/cswing/dVGSc/](http://jsfiddle.net/cswing/dVGSc/)

# php - 在发表评论之间造成延迟

> ID：11795781
> 
> 赞同：-1
> 
> 时间：2012-08-03T12:30:11.797
> 
> 标签：php, comments, delay

我在我的论坛中添加了一个评论部分，我想添加一个延迟，可能是 30 秒左右，以阻止人们与验证码一起发送垃圾邮件。

最好的方法是什么？我能想到的唯一方法是使用 cookie，还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:34:02.343

你可以使用 PHP 会话来做这样的事情，但不确定它有多“傻瓜”证明。

这个想法是做一些事情：

```
if(isset($_POST['cmdComment'])){
  $_SESSION['comment_posted'] = time();
} 
```

然后你可以有一个函数说`checkTime()`你可以把它放在那里从现在的时间中减去会话值。如果差为`>= 30`秒，则继续发布并将 设置`$_SESSION['comment_posted']`为新时间，否则忽略发布请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:36:36.340

1.  将评论插入数据库时​​，请确保跟踪用户和时间戳。
2.  当用户再次发帖时，检查他发表的最后一条评论是否是在 30 秒之前。
3.  相应地处理这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:37:50.273

一个论坛通常有成员，至少我不知道任何没有它的人。

现在，如果您发表评论，我假设您将其放在名为 Comment 之类的表中，其中包含 ID、POST_ID、USER_ID、MESSAGE、POST_DATETIME

至少我会这样做。

现在您有了用户上次评论某个帖子的日期时间。现在您可以查询您的数据库，他或她是否可以再次发表评论

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:38:37.200

当用户发表评论时，在会话中写入当前时间戳并将其添加额外的 30 秒：

```
$_SESSION['postedTime'] = time() + 30; 
```

当您想检查是否超过 30 秒时，获取当前时间戳并比较它们：如果当前时间戳大于会话中的 1，则通过 30 秒：

```
$timestamp = time();
if($timestamp > $_SESSION['postedTime'])
{
    // allow posting
}
else
{
    // decline
} 
```

为了更安全，您可以在数据库中插入用户的 IP + 发布时间戳。

# c# - 如何从曲线项中获取数组或y轴数据列表

> ID：11795784
> 
> 赞同：0
> 
> 时间：2012-08-03T12:30:13.530
> 
> 标签：c#, arrays, copy, zedgraph

我在 Zedgraph 上有一个列表项（myList），

```
PointPairList myList = new PointPairList(); 
```

myList 中有一些值，现在我只想将 y 值单独复制到一个新数组中。

我的足迹：

```
myList.toArray(); // Seems to return a complete set of pointpair list
myList.GetRange(); // Gets a range of pointPair list 
```

我正在寻找一种方法，仅复制 y 数据。

提前致谢....：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:31:59.163

采用

```
double[] yvalues = myList.Select(p => p.Y).ToArray(); 
```

为此，您需要以`System.Linq`这种方式包含命名空间

```
using System.Linq; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T12:32:14.733

您可以使用`Select`仅获取 Y 坐标。

```
var result = myList.Select(pointPair => pointPair.Y).ToArray(); 
```

# php - 重新加载页面，保持会话

> ID：11795791
> 
> 赞同：3
> 
> 时间：2012-08-03T12:30:30.403
> 
> 标签：php, session, post, refresh

我正在尝试开发一个功能，用户可以单击“上一周”/“下周”，这将触发一些`$_SESSION`变量来更改值（日期）。

**我在缺席.php**上有这段代码（我知道 PRG 模式没有实现。我不知道如何做到这一点，但仍然保留功能）。

```
<?php
if (isset($_POST['decrease_date'])) {
    $monday_value = ($_SESSION['sess_mon'] = strftime("%Y-%m-%d", strtotime("{$_SESSION['sess_mon']} -1 day")) );
}
if (isset($_POST['increase_date'])) {
    $monday_value = ($_SESSION['sess_mon'] = strftime("%Y-%m-%d", strtotime("{$_SESSION['sess_mon']} +1 day")) );
}
else {
    $monday_value = ($_SESSION['sess_mon'] = date('Y-m-d', strtotime('Monday this week')) );
}
?>

 <form action='absence.php' method='post'>
  <input type="hidden" name="decrease_date"/>
  <input type='submit' value='Previous'>
 </form>

<form action='absence.php' method='post'>
 <input type="hidden" name="increase_date"/>
<input type='submit' value='Next'>
</form> 
```

现在我想重新加载页面（使用 jQuery `location.reload()`-function），但仍然保持`$_SESSION`页面刷新之前处于活动状态的 s 。目前这将“重置”，因为没有`$_POST`.

理想情况下，我想将其发送`<form action'#'>`到另一个页面。但是，当您第一次输入**缺席.php**时，日期应该被重置。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:35:49.183

改变

```
session_start(); 
```

进入：

```
if (!isset($_SESSION)){
  session_start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:16:47.453

而不是重新加载，你不能只通过 jquery 提交表单`$("form#frmDate").submit();`不要忘记给你的表单提供 ID `frmDate`。

这是你想要的？

# eclipse - 在 Eclipse 编辑器中打开文件的超链接

> ID：11795804
> 
> 赞同：1
> 
> 时间：2012-08-03T12:31:06.113
> 
> 标签：eclipse, eclipse-plugin, hyperlink

我正在创建一个 Eclipse 插件。我已将 Eclipse 内部浏览器嵌入到 Eclipse 视图中。我希望向显示在该视图中的网页添加一个超链接，以在 Eclipse CEditor 中打开一个文件。这可以做到吗？如果可以，怎么做？感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T12:38:10.810

有关在浏览器中从 JavaScript 调用 Java 代码的方法，请参阅此代码段：代码段[307](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet307.java)

下一步是将`onClick`处理程序添加到调用 JavaScript 的链接。有很多例子可以做到这一点。

在 Java 中，您可以告诉 Eclipse 在编辑器中打开文件（如果您不知道如何操作，请提出新问题）。

[更多 SWT 浏览器片段](http://www.eclipse.org/swt/snippets/)。

# selenium-rc - 得到 使用 selenium 作为 DOM 对象

> ID：11795809
> 
> 赞同：0
> 
> 时间：2012-08-03T12:31:32.227
> 
> 标签：selenium-rc, xpath

我正在使用 selenium rc 和 exetuing

```
selenium.getText("//div/div[2][contains(@id,'gp-PACKAGE NAME-')]/div["+i+"]/table/tbody/tr/td["+1+"]/div") 
```

我必须为 20-30 行执行此命令，这需要 20-30 分钟。我想获取表的 dom 对象并使用 java 解析它，而不是`selenium.getText`为每一行执行。

我的期望是，我从 selenium 获取所有行的 dom 对象，并使用一些 dom 解析器在 selenium 之外执行 xpath 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:34:33.907

如果您已经知道要使用的 xpath 解析引擎，您可以随时将 //div/div[2][contains(@id,'gp-PACKAGE NAME-')] 的 HTML 传递给它，然后执行任何操作想对它做。

为此，您只需使用 Javascript 和[getEval](http://seleniumhq.org/docs/05_selenium_rc.html#executing-javascript-from-your-test)获取 html ：

```
selenium.getEval("var document = selenium.browserbot.getcurrentwindow().document;" +
    "var xpathResults = document.evaluate('//div/div[2][contains(@id,\"gp-PACKAGE NAME-\")]', document, null, XPathResult.ANY_TYPE, null);" +
    "var element = xpathResults.iterateNext();" +
    "var innerHtml = element.innerHTML;"
); 
```

# jquery - jquery fancybox，因为我有一个 textarea 我想在该 textarea 中填充一些文本，但它显示在第二次单击中而不是在第一次单击中填充

> ID：11795815
> 
> 赞同：0
> 
> 时间：2012-08-03T12:31:50.657
> 
> 标签：jquery

```
$('#ancFC[rel*=facybox]').facybox().click(function () {
    $(".showSelectedChoice").html(Choicename);
    $("#ContentPlaceHolder1_txtFC").html(desc); // here i am assing my value to 
       //textarea but in first click it is not showing .it is show in second click 
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:35:56.140

你写`facybox`的不是`fancybox`. 这可能是你的问题之一。

# android - 使用公钥从 iphone/android 发送电子邮件。使用私钥手动解锁

> ID：11795820
> 
> 赞同：0
> 
> 时间：2012-08-03T12:32:13.340
> 
> 标签：android, iphone, email, public-key-encryption, gnupg

我需要知道 iphone 和 android 有没有办法发送基于公钥/私钥系统加密的文件？

-- 在下面的帖子之后编辑 --

基本上我想要： 1\. 从 iphone/android 中取出一个文件 2\. 公钥加密它 3\. 通过电子邮件发送它 4\. 手动私钥解密它

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:38:42.690

在 iPhone 和 Android 两侧实施 RSA。您可以使用**openssl**在两侧实现 RSA。它经过同行评审，我用过一次。它在双方都有效。生成密钥对并将公钥发送给所有人，并对私钥保密。例如，在 iPhone 端使用公钥加密文件，在 Android 端使用私钥解密文件。

# php - 关于图像的 PHP 代码帮助

> ID：11795823
> 
> 赞同：1
> 
> 时间：2012-08-03T12:32:34.590
> 
> 标签：php, image, image-processing

所以我有这个 php 脚本，它**在图像上生成随机文本。** 文本文件是一个不同的 php 文件，图像文件是一个单独的 php 文件。该`image.php`文件调用它`text.php`来选择随机文本。

这个版本可以正常工作，但是可以在我现有的图像文件上生成随机图像吗？

我已经包含了我的代码的当前版本。

这是 text.php：

```
<?php
    $t[] = 'Sample text 1 ';
    $t[] = 'Sample text 2';
    shuffle($t);
?> 
```

这是 image.php：

```
<?php
    require_once 'text.php';
    $text = wordwrap($t[0], 31, "\n", true); //text
    $image = imagecreatefromjpeg('img_empty.jpg'); //background image
?> 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:45:56.187

如果您想创建带有随机文本的图像，这将做到

图像.php

```
require_once 'text.php';
header("Content-type: image/png");

$string = wordwrap($t[0], 31, "\n", true); //text
$font  = 2;
$width  = imagefontwidth($font) * strlen($string);
$height = imagefontheight($font);
$image = imagecreatetruecolor ($width,$height);
$white = imagecolorallocate ($image,255,255,255);
$black = imagecolorallocate ($image,0,0,0);
imagefill($image,0,0,$white); 
imagestring ($image,$font,0,0,$string,$black);
imagepng ($image);
imagedestroy($image); 
```

**更新代码到您的响应：** 如果您想在特定图像上获取随机文本

```
require_once 'text.php';
header("Content-type: image/png");
$string = wordwrap($t[0], 31, "\n", true); //text

$image  = ImageCreateFromJPEG("img_empty.jpg");

//Defining color. Making the color of text as red (#FFF) as 255,000,000
$color = imagecolorallocate($image , 255, 000, 000); // 

//put string over image with $color as color
imagestring($image,5,126,22,$string,$color);

imagejpeg($image,NULL,100); 
```

上面的代码将在您指定的图像上放置一个红色随机文本。这对我有用。还可以尝试更改 imagecolorallocate() 函数中定义的颜色。

参考：[http ://blog.doh.ms/2008/02/12/adding-text-to-images-in-real-time-with-php/](http://blog.doh.ms/2008/02/12/adding-text-to-images-in-real-time-with-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:36:25.197

你的问题有点不清楚。你不需要 text.php 那么你可以直接使用它在 image.php 中的代码，如下所示。

图像.php

```
<?php
$t[] = 'Sample text 1 ';
$t[] = 'Sample text 2';
shuffle($t);
$text = wordwrap($t[0], 31, "\n", true); //text
$image = imagecreatefromjpeg('img_empty.jpg'); //background image 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:49:46.470

这里有几个选项

1.  保存几张背景图片，然后在其中随机选择一张。
2.  在输出之前使用[GD 和图像函数在现有图像上绘制（例如，查看](http://no.php.net/manual/en/ref.image.php)[imageline()](http://no.php.net/manual/en/function.imageline.php)以绘制线条）。
3.  使用 GD 的[imagecreatetruecolor()](http://no.php.net/manual/en/function.imagecreatetruecolor.php)来创建图像，甚至可以得到随机的宽度/高度。

# jquery - Bootstrap Twitter Dropdown：让父母点击链接

> ID：11795826
> 
> 赞同：6
> 
> 时间：2012-08-03T12:32:40.627
> 
> 标签：jquery, twitter-bootstrap

我有这个引导推特下拉菜单。我用悬停事件替换了点击事件。现在唯一的问题应该是关注 www.google.com 但它没有。我试过：

```
 jQuery(".nav .dropdown-toggle").click(function () {
      return true;
    }); 
```

但没有骰子。

这是代码：

```
<html>
  <head>
    <title>text</title>
    <link type="text/css" rel="stylesheet"  href="docs/assets/css/bootstrap.css"/>
    <link type="text/css" rel="stylesheet"  href="docs/assets/css/bootstrap-responsive.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-dropdown.js"></script>
    <script type="text/javascript">
      $(function(){
        jQuery('.dropdown-toggle').dropdown();
        jQuery('ul.nav li.dropdown').hover(
        function() {jQuery(this).find('.dropdown-menu').stop(true, true).delay(200).fadeIn();},
        function() {jQuery(this).find('.dropdown-menu').stop(true, true).delay(200).fadeOut();}
      );

        jQuery(".nav .dropdown-toggle").click(function () {
          return true;
        });
      });
    </script>

  </head>
  <body>
    <ul class="nav nav-pills">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" data-target="#" href="http://www.google.com">
          Dropdown
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="#">text</a></li>
          <li><a href="#">text</a></li>
        </ul>
      </li>
    </ul>

  </body>
</html> 
```

[http://jsfiddle.net/rgdwM/](http://jsfiddle.net/rgdwM/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T20:09:15.820

您可以通过稍微更改标记并添加 CSS 类来完成此操作，而无需使用 JavaScript。

**将 HTML 标记更改为（**note** *disabled* is added next to dropdown-toggle）：**

```
<a class="dropdown-toggle disabled" data-toggle="dropdown" data-target="#" href="http://www.google.com">
    Dropdown
    <b class="caret"></b>
</a> 
```

**如果您希望子菜单出现在悬停时（因为现在单击将转到指定的 url），请添加此 CSS 类：**

```
.nav li.dropdown:hover .dropdown-menu
{
    display: block;    
} 
```

这适用于 Bootstrap 版本 2.3.1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T12:35:23.480

不太确定您要在这里实现什么。

但这会让`.click()`你去谷歌。

```
$(".nav .dropdown-toggle").click(function () {
  window.location = "http://www.google.com";
}); 
```

至于为什么`<a>`点击事件被吃掉我目前不确定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-03T10:44:35.123

如果您希望家长关注 Wordpress 上的链接，请使用此链接：

```
 $(".nav .dropdown-toggle").click(function () {
    window.location = $(this).attr('href');
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T14:05:49.860

[Bootstrap 3.0 文档](http://getbootstrap.com/javascript/#dropdowns)说使用该`data-target`属性来保留可点击的链接。

因此，您的 HTML 将变为：

```
<a class="dropdown-toggle" data-toggle="dropdown" data-target="http://www.google.com" href="#">
    Dropdown
    <b class="caret"></b>
</a> 
```

# jquery - jQuery 焦点不是工作表单文档，而是从控制台工作

> ID：11795829
> 
> 赞同：0
> 
> 时间：2012-08-03T12:32:52.763
> 
> 标签：jquery

我有以下代码将键盘可访问性添加到下拉列表。

```
$(document).ready(function()
{
    $(".selectButton").focus(function() { 
       alert("Working");
       var href=this.href;
       var opt=href.substr(23,1);
       var torf=href.substring(25);
       showOptions(opt,false);                                          
       $(".optionsDivVisible a:first").focus();
   }).blur(function() {
       $(this).parents("li").removeClass("hover");
   });
}); 
```

这是从控制台工作的，一旦元素获得焦点，下拉菜单就会显示。但是当我将它添加到 HTML 文件中时，它什么也没显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:50:56.623

如果您使用另一个库从选择框加载此列表，则 dom 可能具有选择框标记的实例而不是列表。这就是为什么您可以在脚本运行后在控制台中运行代码的原因。

尝试类似的东西`$(".selectButton").live('focus', function() { ...`

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:36:26.683

问题可能与给定的焦点顺序有关。尝试添加

```
return false; 
```

在焦点处理函数的最后一个字符串之后。

# google-app-engine - AppEngine 实例抛出良性 SecurityException

> ID：11795835
> 
> 赞同：1
> 
> 时间：2012-08-03T12:33:22.857
> 
> 标签：google-app-engine, jersey, jackson, securityexception

我的生产 appengine 实例的服务器日志中抛出了这个异常。这是一个关于无法从`org.codehaus.jackson.jaxrs`包中的几个类加载成员的 SecurityException。有人见过这个吗？我添加了 Jersey 1.12、MimePull 1.6 和 Urlrewrite 3.2.0 库。

这些异常主要填充日志，但似乎不会影响应用程序的质量。我在调试 Jetty 服务器上看不到这些。

这些其他类也有类似的错误。

*   JacksonJaxbJsonProvider
*   JacksonJsonProvider
*   JSONWithPaddingProvider

**来自 web.xml 的相关片段**

```
<servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.appname.api;org.codehaus.jackson.jaxrs</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/api/*</url-pattern>
    </servlet-mapping> 
```

**AppEngine 服务器日志中报告的异常**

```
com.sun.jersey.core.spi.component.ProviderFactory __getComponentProvider: The provider class, class org.codehaus.jackson.jaxrs.JsonMappingExceptionMapper, could not be instantiated. Processing will continue but the class will not be utilized
java.lang.SecurityException: Unable to get members for class org.codehaus.jackson.jaxrs.JsonMappingExceptionMapper
    at com.google.appengine.runtime.Request.process-9d6a4897c964eb62(Request.java)
    at java.lang.Class.getDeclaredMethods(Class.java:253)
    at com.sun.jersey.core.reflection.MethodList.getAllDeclaredMethods(MethodList.java:70)
    at com.sun.jersey.core.reflection.MethodList.<init>(MethodList.java:64)
    at com.sun.jersey.core.spi.component.ComponentConstructor.getPostConstructMethods(ComponentConstructor.java:131)
    at com.sun.jersey.core.spi.component.ComponentConstructor.<init>(ComponentConstructor.java:123)
    at com.sun.jersey.core.spi.component.ProviderFactory.__getComponentProvider(ProviderFactory.java:165)
    at com.sun.jersey.core.spi.component.ProviderFactory._getComponentProvider(ProviderFactory.java:159)
    at com.sun.jersey.core.spi.component.ProviderFactory.getComponentProvider(ProviderFactory.java:153)
    at com.sun.jersey.core.spi.component.ProviderServices.getComponent(ProviderServices.java:251)
    at com.sun.jersey.core.spi.component.ProviderServices.getProviders(ProviderServices.java:148)
    at com.sun.jersey.server.impl.application.ExceptionMapperFactory.init(ExceptionMapperFactory.java:74)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._initiate(WebApplicationImpl.java:1284)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.access$700(WebApplicationImpl.java:171)
    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:777)
    at com.sun.jersey.server.impl.application.WebApplicationImpl$13.f(WebApplicationImpl.java:773)
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:773)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:768)
    at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:488)
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:318)
    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:607)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:208)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    ... 41 more
Caused by: java.lang.NoClassDefFoundError: org/codehaus/jackson/map/JsonMappingException
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2444)
    ... 41 more
Caused by: java.lang.ClassNotFoundException: org.codehaus.jackson.map.JsonMappingException
    at com.google.appengine.runtime.Request.process-9d6a4897c964eb62(Request.java)
    ... 41 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:54:21.103

主要的例外是`ClassNotFoundException`，因为`org.codehaus.jackson.map.JsonMappingException`找不到类。

您应该将包含此类的适当 jar 添加到您的项目中。

# javascript - 这个函数打开一个div

> ID：11795836
> 
> 赞同：0
> 
> 时间：2012-08-03T12:33:31.570
> 
> 标签：javascript, jquery, this

我有一个简单的脚本。那个显示和隐藏一个div。但我对“这个”有疑问。

这是我的脚本：

```
var accordion = $(".accordion"),
        content = $(".accordion .content"),
        button  = $(".accordion .btn-1");

    $(button, this).click(function(e){
        e.preventDefault();
        $(content, this).show();
    }); 
```

这是我的html

```
<div class="accordion">
    <img src="http://placehold.it/200x130" width="200" height="130" alt="">

    <div class="content">
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod

        </p>
    </div>
    <a href="#" title="More" class="btn-1">More</a>
</div> 
```

但我有很多这样的 div。现在，当我点击 btn-1 时。所有的手风琴都打开了。我该如何解决？以及如何通过单击 btn-1 来关闭内容。

谢谢帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:38:46.327

您想在`.content`单击“按钮”时打开相应的元素。这可以使用[*DOM 遍历* ^([docs])](http://api.jquery.com/category/traversing/)轻松解决：

```
$(".accordion .btn-1").click(function(e) {
     e.preventDefault();

     // find the button's sibling with class 'content' and show it
     $(this).siblings('.content').show();

     // if you want to toggle the visibility, use .toggle instead
     $(this).siblings('.content').toggle();

     // if the structure is more complex, find the corresponding '.accordion'
     // element first and then search for the '.content' element
     $(this).closest('.accordion').find('.content').toggle();
}); 
```

我建议阅读[jQuery 教程](http://docs.jquery.com/Tutorials)和[API 文档](http://api.jquery.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:47:42.913

单击按钮时，通过 .closest() 将 DOM 向上移动到具有类 'accordian' 的祖先，然后找到内部具有类 'content' 的项目。

```
$(,'.btn-1').on('click', function(e){
e.preventDefault():
$(this).closest('accordian').find('.content').show();
} 
```

这使得 btn-1 的 DOM 定位和手风琴内相对于彼此的内容变得无关紧要——它们不必是兄弟姐妹——以防你出于某种原因需要在手风琴内移动它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:39:03.017

你的 JS 有点奇怪，我想你想要做的是

```
var content = $(".accordion .content"),
    button  = $(".accordion .btn-1");

button.click(function(e){
    e.preventDefault();
    content.show();
}); 
```

如果我错了，请纠正我。您使用的意图`this`有点奇怪。

# blackberry - 黑莓 GPS 测试演示

> ID：11795839
> 
> 赞同：0
> 
> 时间：2012-08-03T12:33:37.630
> 
> 标签：blackberry, gps, location, demo

你能帮我创建黑莓 GPS 示例演示吗？实际上，我对黑莓的这么多设备感到困惑，有些有 GPS 接收器，有些没有。

如果设备有 GPS 接收器，它将如何搜索当前设备位置？如果设备没有像 BB 8520 这样的 GPS 怎么办？

请分享您对黑莓中 GPS 的理解，以及无论是否通过 GPS，我如何实现设备位置的纬度和经度。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:37:17.323

试试这个，这将检查gps。如果 gps 可用，则它将获取位置，否则，它将从网络中找到位置。

在你的课上打电话给这个课 -`handleGPS gps=new handleGPS();`

```
public class handleGPS{
    static GPSThread gpsThread;
   public static double latitude=0;
   public static double longitude=0;

    public handleGPS(){
        gpsThread = new GPSThread();
        gpsThread.start();
    }

private static class GPSThread extends Thread{
    public void run() {
        Criteria myCriteria = new Criteria();
        myCriteria.setCostAllowed(false);
        int m_bbHandle = CodeModuleManager.getModuleHandle("net_rim_bb_lbs");

        if(m_bbHandle>0){
            try {

                int cellID = GPRSInfo.getCellInfo().getCellId();
                int lac = GPRSInfo.getCellInfo().getLAC();

                String urlString2 = "http://www.google.com/glm/mmap";

                // Open a connection to Google Maps API 
                ConnectionFactory connFact = new ConnectionFactory();
                ConnectionDescriptor connDesc;
                connDesc = connFact.getConnection(urlString2);

                HttpConnection httpConn2;
                httpConn2 = (HttpConnection)connDesc.getConnection();
                httpConn2.setRequestMethod("POST");

                // Write some custom data to Google Maps API 
                OutputStream outputStream2 = httpConn2.openOutputStream();//getOutputStream();
                WriteDataGoogleMaps(outputStream2, cellID, lac);

                // Get the response  
                InputStream inputStream2 = httpConn2.openInputStream();//getInputStream();
                DataInputStream dataInputStream2 = new DataInputStream(inputStream2);

                // Interpret the response obtained 
                dataInputStream2.readShort();
                dataInputStream2.readByte();

                int code = dataInputStream2.readInt();
                //Dialog.alert(code+"");

                if (code == 0) {
                    latitude= dataInputStream2.readInt() / 1000000D;
                    longitude=dataInputStream2.readInt() / 1000000D;

                    //Dialog.alert(latitude+"-----"+longitude);  

                    dataInputStream2.readInt();
                    dataInputStream2.readInt();
                    dataInputStream2.readUTF();

                } else {
                    System.out.println("Error obtaining Cell Id ");
                }
                outputStream2.close();
                inputStream2.close();
            } catch (Exception e) {
                System.out.println("Error: " + e.getMessage());
            }

           }
        else{
             try {
                 LocationProvider myLocationProvider = LocationProvider.getInstance(myCriteria);

                 try {
                     Location myLocation = myLocationProvider.getLocation(300);
                     latitude  = myLocation.getQualifiedCoordinates().getLatitude();
                     longitude = myLocation.getQualifiedCoordinates().getLongitude();
                    if(latitude==0 && longitude==0){
                        try {

                            int cellID = GPRSInfo.getCellInfo().getCellId();
                            int lac = GPRSInfo.getCellInfo().getLAC();

                            String urlString2 = "http://www.google.com/glm/mmap";

                            // Open a connection to Google Maps API 
                            ConnectionFactory connFact = new ConnectionFactory();
                            ConnectionDescriptor connDesc;
                            connDesc = connFact.getConnection(urlString2);

                            HttpConnection httpConn2;
                            httpConn2 = (HttpConnection)connDesc.getConnection();
                            httpConn2.setRequestMethod("POST");

                            // Write some custom data to Google Maps API 
                            OutputStream outputStream2 = httpConn2.openOutputStream();//getOutputStream();
                            WriteDataGoogleMaps(outputStream2, cellID, lac);

                            // Get the response  
                            InputStream inputStream2 = httpConn2.openInputStream();//getInputStream();
                            DataInputStream dataInputStream2 = new DataInputStream(inputStream2);

                            // Interpret the response obtained 
                            dataInputStream2.readShort();
                            dataInputStream2.readByte();

                            int code = dataInputStream2.readInt();
                            //Dialog.alert(code+"");

                            if (code == 0) {
                                latitude= dataInputStream2.readInt() / 1000000D;
                                longitude=dataInputStream2.readInt() / 1000000D;

                                //Dialog.alert(latitude+"-----"+longitude);  

                                dataInputStream2.readInt();
                                dataInputStream2.readInt();
                                dataInputStream2.readUTF();

                            } else {
                                System.out.println("Error obtaining Cell Id ");
                            }
                            outputStream2.close();
                            inputStream2.close();
                        } catch (Exception e) {
                            System.out.println("Error: " + e.getMessage());
                        }

                    }

                 }
                 catch ( InterruptedException iex ) {
                     return;
                 }
                 catch ( LocationException lex ) {
                     return;
                 }
             }catch ( LocationException lex ) {
                 return;
              }
        }
        return;
    }
}

private static void WriteDataGoogleMaps(OutputStream out, int cellID, int lac)
throws IOException {
    DataOutputStream dataOutputStream = new DataOutputStream(out);
    dataOutputStream.writeShort(21);
    dataOutputStream.writeLong(0);
    dataOutputStream.writeUTF("en");
    dataOutputStream.writeUTF("Android");
    dataOutputStream.writeUTF("1.0");
    dataOutputStream.writeUTF("Web");
    dataOutputStream.writeByte(27);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(3);
    dataOutputStream.writeUTF("");

    dataOutputStream.writeInt(cellID);
    dataOutputStream.writeInt(lac);

    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.flush();
}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:40:48.670

[This](https://stackoverflow.com/questions/8711230/how-i-can-get-latitude-and-longitude-of-current-location-in-blackberry) previous SO post应该为您指明正确的方向。

关于其他方法，您可以使用[Triangulation](http://en.wikipedia.org/wiki/Triangulation)，其中您可以使用至少 3 个手机信号塔的信号强度来粗略估计您的位置。根据您对位置的准确度，三角测量很可能比 GPS 更快，但 GPS 的准确度要高得多（三角测量的最佳误差范围往往约为 100m）。

但是请注意，如果您在建筑物内或看不到天空，则 GPS 很可能无法工作。

# sitecore - 如何在代码中执行工作流？

> ID：11795847
> 
> 赞同：1
> 
> 时间：2012-08-03T12:34:23.490
> 
> 标签：sitecore, sitecore6, sitecore-workflow

设想：

*   用户单击工作流上的命令
*   工作流自定义操作执行多项检查
*   工作流自定义操作根据结果在同一工作流上执行另一个命令

我到目前为止的代码是：

```
Database db = Factory.GetDatabase("master");
if (Request.QueryString["_id"] != null)
{
  var itm = db.GetItem(new ID(Request.QueryString["_id"]));
  WorkflowCommand[] availableCommands = wf.GetCommands(itm.Fields["__Workflow state"].Value);   
  wf.Execute(Request.QueryString["command"], itm, "Testing working flow new screens", false, new object[] { }); // Execute the workflow step.
} 
```

但是，我在 wf.Execute 行上得到一个 Object not set to an instance error - 但没有有意义的堆栈跟踪或任何东西:(

我`wf.GetCommands`在行中只是为了检查事情是否真的在我期望的地方，并且`availableCommands`填充了一个很好的现有命令列表。

我检查了`commandId`它是否有效并且存在。

`Itm`不为空，并且是`Content Item`工作流关联的 （我希望工作流在上下文中运行）。

我检查了用户上下文等是否有效，并且没有权限问题。

唯一的区别是我`.aspx`在 sitecore 中执行的页面中运行此代码 - 希望，除非存在未正确设置的上下文项，否则我不会期望这会导致问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T16:29:57.313

工作流需要在启用了工作流的 a 中`SiteContext`运行`ContentDatabase`。在您的站点中执行此操作的最简单方法是使用 a`SiteContextSwitcher`更改为“shell”站点。

```
using (new SiteContextSwitcher(SiteContextFactory.GetSiteContext("shell")))
{
    wf.Execute(Request.QueryString["command"], itm, "Testing working flow new screens", false, new object[] { }); // Execute the workflow step.
} 
```

这方面的一个例子可以在 WeBlog Sitecore 模块的代码中找到。

[http://svn.sitecore.net/WeBlog/Trunk/Website/Pipelines/CreateComment/WorkflowSubmit.cs](http://svn.sitecore.net/WeBlog/Trunk/Website/Pipelines/CreateComment/WorkflowSubmit.cs)

# jquery - 在图像加载期间显示预加载图像，但所有图像的大小不同

> ID：11795855
> 
> 赞同：-2
> 
> 时间：2012-08-03T12:34:48.733
> 
> 标签：jquery, preloader, preloading, image-preloader

我想显示图像 div 的预加载图像中心。但是所有图像都有不同的大小，因此预加载图像不能显示在每个图像的中心。

感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:42:35.483

您可以使用 css 来解决此问题。将类“预加载器”添加到页面上的每个图像，并用 css 描述它：

```
.pre-loader {
  background: #ccc url(loaderimageurl) center center no-repeat;
} 
```

然后像这样使用js：

```
$("img").load(function () { $(this).removeClass("pre-loader"); }); 
```

# android - 我想测量 ListView 的高度（getHight() = 0）

> ID：11795862
> 
> 赞同：5
> 
> 时间：2012-08-03T12:35:31.577
> 
> 标签：android, android-listview

我不能自己决定任务会问

我想测量 ListView 的高度。无法捕捉渲染 ListView 的时刻 (rssListView.getHight(); = 0 )

```
public class RSSactivity extends Activity {

    public static RssItem selectedRssItem = null;
    String feedUrl = "";
    ListView rssListView = null;
    ArrayList<RssItem> rssItems = new ArrayList<RssItem>();
    ArrayAdapter<RssItem> aa = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        rssListView = (ListView) findViewById(R.id.rssListView);
        aa = new ArrayAdapter<RssItem>(this, R.layout.list_item, rssItems);
        rssListView.setAdapter(aa); 
        feedUrl = rssURLTV.getText().toString();
        refressRssList();
        rssListView.getWidth(); // = 0 ,    
    }

    private void refressRssList() {

        ArrayList<RssItem> newItems = RssItem.getRssItems(feedUrl);
        rssItems.clear();
        rssItems.addAll(newItems);
        aa.notifyDataSetChanged();

    }

} 
```

**目标来计算中间ListView屏幕的项目数**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T13:01:45.760

在 onCreate 中：

```
rssListView.getViewTreeObserver().addOnGlobalLayoutListener(
    new ViewTreeObserver.OnGlobalLayoutListener() {
      @Override
      public void onGlobalLayout() {
        // If you need this to be called again, then run again addOnGlobalLayoutListener.
        mainPanel.getViewTreeObserver().removeGlobalOnLayoutListener(this);
        rssListView.getWidth(); // It's available here.
      }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:44:46.873

为什么需要 Listview 的 Height()？如果你想检查空的 Listview，那么你可以使用 setEmptyListview()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T13:04:07.870

您可以使用 size 方法测量列表视图的高度。

rssItems.size();

希望它可以帮助你。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-03T12:49:11.137

当调用 onCreate 方法时，屏幕不会被加载，因此每个布局组件的高度 = 0 和宽度 = 0。如果你想知道高度或宽度，请在加载屏幕之前执行。我使用的方式是创建一个在 onCreate 上开始运行的线程。线程询问布局对象高度，而它是 0 我知道屏幕组件尚未加载。当高度大于 0 时，我向 UI 线程提交我想要执行的任务。

编辑：尝试在 onStart 方法中获取高度，但我不确定屏幕是否已加载。

一些代码示例：

```
public void onCreate(Bundle savedBundle){
    super.onCreate(savedBundle);
    setContentView(R.layout.main);
    final ListView lv = (ListView) findViewById(R.id.my_list_view);
    Thread thr = new Thread(new Runnable(){
        public void run(){
            while(lv.getHieght() <= 0){
                try{
                    Thread.sleep(10);
                } catch(Exception e) {
                }
            }   //while ends
            final int height = lv.getHight();
            MyActivity.this.runOnUiThread(new Runnable(){
                public void run(){
                    myMethod(height);
                } //UI thread runnable-run method ends
            }); //UI Runnable declaration ends
        } //thread runnable-run method ends
    }); //Thread Runnable declaration ends
    thr.start();
} // onCreate ends.

public void myMethod(int height){
    //opeate with valid height
} 
```

# javascript - 在 iPad 上运行时，Mobile Safari 中即将切换选项卡的 Pagehide 事件不会触发

> ID：11795864
> 
> 赞同：13
> 
> 时间：2012-08-03T12:35:36.100
> 
> 标签：javascript, ios, mobile-safari, dom-events

众所周知，Mobile Safari 在网页上暂停 Javascript 执行时

1.  你切换到不同的浏览器标签
2.  切换到不同的 iOS 应用程序（例如，当您接到电话应用程序时）

您可以订阅窗口的*“pagehide”*和*“pageshow”*事件来检测即将暂停和重新激活 Javascript。

**问题是，在iPad** Mobile Safari上**切换选项卡**(1.)时不会触发这些事件。在**iPhone** Mobile Safari 上一切都**很好**，就像上面描述的那样。

 ******证明是微不足道的：

```
<!DOCTYPE html>
<html>
<head>
    <script>
        window.addEventListener("pagehide", function(evt){
            var logger = document.getElementById('log_id');
            logger.innerText = logger.innerText + " pagehide fired!";
        }, false);
    </script>
</head>
<body>
<div id="log_id"></div>
</body>
</html> 
```

它仅在执行应用程序切换 (2.) 而不是选项卡切换 (1.) 时才会在 iPad（iOS5 和 iOS6 Preview3）上触发。所有的 iPhone 都可以正常工作。。

有没有人能够检测到 iPad 浏览器上即将发生的标签切换？

当[对同一主题的讨论中](https://stackoverflow.com/questions/4656387/how-to-detect-in-ios-webapp-when-switching-back-to-safari-from-background?rq=1)所述，可以通过心跳循环再次检测JavaScript*重新激活*JavaScript 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T11:24:00.407

由 Apple 在**iOS7**中修复。（刚刚在 iPad 模拟器中尝试过）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T07:16:57.293

我同意皮纳尔：使用焦点/模糊！但我建议不要在文件上，而是在窗口上。只需为他们注册一个听众并在那里做你的事情。

正如[http://caniuse.com/#feat=pagevisibility](http://caniuse.com/#feat=pagevisibility)所说，您要使用的功能没有很好地实现。（编辑：刚刚在一个迷你测试用例中对其进行了测试——它适用于 iOS 5/6——即使 caniuse.com 断言不同）

如果您尝试使用计时器，您可以尝试 requestAnimationFrame 作为 setInterval 的替代方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-01T11:47:15.540

尝试检查文档的焦点和模糊。

为什么需要页面可见性 API？

1.  您可以使用存储事件来说明其他页面，谁是活动的。
2.  您可以使用计时器 (setInterval) 检查上次计时器触发的时间。如果它比预期的大 - 页面被隐藏，因为大多数浏览器停止计时器然后页面被隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-29T19:17:33.277

根据塞巴斯蒂安的回答，这些天（与 2013 年到 2021 年相比）页面可见性工作得相当好：有关更多信息，请参阅[https://www.w3.org/TR/page-visibility/#example-1-visibility-aware-video-playback](https://www.w3.org/TR/page-visibility/#example-1-visibility-aware-video-playback)围绕订阅隐藏/可见状态的“visibilitychange”。

如今，这似乎比焦点/模糊更有用，因为它涵盖了可见但未选择的窗口，如果还关注多窗口操作系统。******

# objective-c - AFNetworking - 一次 6 次操作消耗 80% 的 CPU

> ID：11795867
> 
> 赞同：1
> 
> 时间：2012-08-03T12:35:50.603
> 
> 标签：objective-c, afnetworking

谁能回答我，下面的代码怎么会吃掉一个 C2D 2.6GHz CPU 的整个内核？它只下载 10MB 块的文件，可能有 600 个，但 NSOperationQueue 有 6 个并发任务的限制。

为什么在 Windows 上同样的应用程序（用 C# 编写的只吃 2%，而不是 80%！），它只是一个简单的 HTTP 请求！

```
for (DownloadFile *downloadFile in [download filesInTheDownload])
            {
                for (DownloadChunk *downloadChunk in [downloadFile chunksInTheFile])
                {
                    NSString *downloadPath = [[NSString stringWithFormat:@"%@/%@", [download downloadFolder], [download escapedTitle]] stringByExpandingTildeInPath];
                    NSString *chunkPath = [downloadPath stringByAppendingFormat:@"/%@.%i", [downloadFile fileName], [downloadChunk chunkId]];

                    NSError *attributesError = nil;

                    NSDictionary *fileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:chunkPath error:&attributesError];

                    NSNumber *fileSizeNumber = [fileAttributes objectForKey:NSFileSize];
                    uint64_t fileSize = [fileSizeNumber longLongValue];
                    NSLog(@"Chunk file size: %lli", fileSize);
                    uint64_t expectedSize = ([downloadChunk endingByte] - [downloadChunk startingByte]) + 1;
                    NSLog(@"Chunk expected size: %lli", expectedSize);
                    uint64_t newStartingByte = [downloadChunk startingByte] + fileSize;
                    if (fileSize == expectedSize)
                    {
                        NSLog(@"Chunk complete: %@.%i", [downloadFile fileName], [downloadChunk chunkId]);
                    }
                    else
                    {
                        NSURL *fileURL = [[NSURL alloc] initWithString:[downloadFile filePath]];

                        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:fileURL];
                        NSLog(@"Normal range: %lli-%lli", [downloadChunk startingByte], [downloadChunk endingByte]);
                        NSString *range = [NSString stringWithFormat:@"bytes=%lli-%lli", newStartingByte, [downloadChunk endingByte]];
                        [request setValue:range forHTTPHeaderField:@"Range"];
                        AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
                        operation.outputStream = [NSOutputStream outputStreamToFileAtPath:chunkPath append:YES];

                        [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
                            NSLog(@"%@", [NSString stringWithFormat:@"Chunk complete: %@.%i", [downloadFile fileName], [downloadChunk chunkId]]);
                            if (download.downloadedBytes == download.size)
                                [[NSNotificationCenter defaultCenter] postNotificationName:@"downloadFinished" object:download];
                        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                            NSLog(@"Error: %@", error);
                        }];

                        [operation setDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
                            download.downloadedBytes += bytesRead;
                        }];

                        [queue addOperation:operation];
                    }
                }
            } 
```

这是一些时间分析器屏幕截图，如果我没看错的话，似乎一切都是因为 RunLoops。

![在此处输入图像描述](../Images/9aeaca12dfd10668c768817703bbab1b.png) ![在此处输入图像描述](../Images/38b47d2825f2748e2998f6c2be771618.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:03:12.667

似乎将大多数属性降级为非原子似乎会将使用率从 80% 降低到 20-30%。现在只有下载的字节是原子的。我还能做些什么来改进？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:40:13.777

假设最后一个进度块完成下载，你有点像把一个圆钉塞进一个方孔。我不确定这是否会导致您的 CPU 使用率过高，但我肯定会解决这个问题。AFNetworking 有一个专门用于此的功能`[AFHTTPRequestOperation setCompletionBlockWithSuccess:failure:]`，记录[在这里](http://afnetworking.org/Documentation/Classes/AFHTTPRequestOperation.html#//api/name/setCompletionBlockWithSuccess%3afailure%3a)。将根据返回的 HTTP 状态代码调用正确的块。

换句话说，而不是这样：

```
 AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    operation.outputStream = [NSOutputStream outputStreamToFileAtPath:chunkPath append:YES];
    [operation setDownloadProgressBlock:^(NSInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
        download.downloadedBytes += bytesRead;
        if (download.downloadedBytes == download.size)
            [[NSNotificationCenter defaultCenter] postNotificationName:@"downloadFinished" object:download];
    }];

    [queue addOperation:operation];
    chunkId++; 
```

用这个：

```
 AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    operation.outputStream = [NSOutputStream outputStreamToFileAtPath:chunkPath append:YES];
    [output setCompletionBlockWithSuccess: ^(AFHTTPRequestOperation *operation, id responseObject) {
    [[NSNotificationCenter defaultCenter] postNotificationName:@"downloadFinished" object:download];
                                        }
                                  failure: ^(AFHTTPRequestOperation *operation, NSError *error) {
    // you should probably do something here
                                        }]; 
```

在那之后，我怀疑你甚至需要下载字节。这将删除您的最后一个原子属性，这应该会有所改善。

# ruby-on-rails - 如何在运行时从 Rails 应用程序动态编辑 routes.rb？

> ID：11795869
> 
> 赞同：1
> 
> 时间：2012-08-03T12:35:53.673
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有一种情况，我需要从 rails 应用程序中编辑 routes.rb 。需要一个想法如何去做。我是铁路初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:55:12.727

当您更改“routes.rb”中的某些内容时，您必须重新启动应用程序，所以这是非常糟糕的主意。您可以使用一个控制器/路由。该控制器可以重定向到其他一些控制器或执行某些操作，以便您可以在 routes.rb 中使用 ONE ROUTE。您可以在此处编写一些代码，我们将为您提供帮助。

# windows-services - Windows 服务和控制台应用程序之间共享的目录权限

> ID：11795876
> 
> 赞同：0
> 
> 时间：2012-08-03T12:36:44.447
> 
> 标签：windows-services, file-permissions, user-accounts

我不确定这是否适合提出此类问题（也许应该放在 SuperUser 上？），但我会尝试。

我有一个 C# 控制台应用程序和一个 Windows 服务。两者的作用相同，但控制台应用程序是之前创建的，并且为了向后兼容而保留。其中每一个都在运行 WCF 服务，其方法对 C:\ProgramData\MyApp 中的文件进行操作。控制台应用程序作为受限用户（非管理员）运行，Windows 服务作为 NT AUTHORITY\NETWORK SERVICE 运行。当应用程序创建一些目录/文件时，服务无法删除它，反之亦然。

我想让它得到保护。我的问题是：我应该将 C:\ProgramData\MyApp 的完全权限授予 NETWORK SERVICE 和当前用户吗？或者我应该创建专门的用户来运行服务/应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:21:33.440

假设您的应用程序没有对新创建的文件设置明确的安全权限，授予网络服务帐户删除文件夹的权限将解决您的直接问题。

此命令将完成工作：

```
icacls c:\ProgramData\MyApp /t /grant "NETWORK SERVICE":(OI)(CI)(IO)D 
```

对您的其他用户服务帐户重复相同的操作。

# node.js - Mongoose - 如何将文档属性设置为另一个文档

> ID：11795882
> 
> 赞同：1
> 
> 时间：2012-08-03T12:37:19.867
> 
> 标签：node.js, mongodb, express, mongoose

我试图通过为嵌入文档创建一个单独的模型来伪造非数组嵌套文档，对其进行验证，如果验证成功，则将其设置为主文档的属性。

在 POST /api/document 路由中，我正在执行以下操作：

```
var document = new DocumentModel({
  title: req.body.title
});

var author = new AuthorModel({
  name: req.body.author.name
});

author.validate( function( err ) {
  if (!err) {
    document.author = author.toObject();
  } else {
    return res.send( err, 400 );
  }
});

console.log( document ); 
```

但它似乎不起作用 - 控制台打印出没有作者的文档。我可能在这里遗漏了一些非常明显的东西，也许我需要做一些嵌套回调，或者我需要使用特殊的设置方法，比如 document.set('author', author.toObject())...但是我现在无法独自想办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:50:09.763

看起来答案是使用回调来设置 document.author 并在 Schema 中定义作者。

就像@JohnnyHK 指出的那样，我无法使用我的原始代码将文档记录到控制台，因为 author.validate 是异步的。因此，解决方案是将 console.log （可能还有 document.save() 进一步包装在 author.validate() 的回调中）

Mongoose 似乎也没有为模式中未定义的模型“设置”任何属性。由于我的作者是一个对象，我不得不将 Schema 中的作者字段设置为混合，就像这样。

以下代码有效：

```
var DocumentModel = new Schema({
    title: { type: String, required: true },
    author: {}      
});
var AuthorModel = new Schema({
    name: { type: String, required: true }
});
app.post("/api/documents", function(req, res) {
    var document = new DocumentModel({
        title: req.body.title
    });
    var author = new AuthorModek({
        title: req.body.author.name
    });
    author.validate( function( err ) {
        if (!err) {
            document.author = author;
            docment.save( function( err ) {
                ...
            });
        } else {
            return res.send( err, 400 );
        }
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:52:16.717

看起来`author.validate`是异步的，因此您`console.log(document);`在底部的语句在您设置的回调之前执行`document.author`。您需要将取决于`document.author`设置的处理放在回调中。

# java - 在 catch 语句之前返回语句

> ID：11795886
> 
> 赞同：0
> 
> 时间：2012-08-03T12:37:45.857
> 
> 标签：java, android, return

我已经向我的 AsncTask 添加了一个 return 语句，但我仍然收到一个错误，告诉我添加一个。停止此语法错误的唯一代码片段是在 catch 语句之后添加一个 return 语句，但这会适得其反，不能满足程序的需求，而且我无法访问我需要的字符串（我需要检查如果返回的输出流等于真。

代码：

```
@Override
    protected Boolean doInBackground(String... userandpass)  { //I still get an error telling me to add a return statement
        // TODO Auto-generated method stub
        URL url;
        try {
            url = new URL("http://127.0.0.1:1337");
            HttpURLConnection URLconnection = (HttpURLConnection) url.openConnection();
            URLconnection.setDoOutput(true);
            URLconnection.setChunkedStreamingMode(0);

            //output stream
            OutputStream out = new BufferedOutputStream(URLconnection.getOutputStream());
            writestream(out, userandpass);

            //buffered server response
            InputStream in = new BufferedInputStream(URLconnection.getInputStream());
            String result = readstream(in);
            Log.e(result, result);

            // check we haven't been redirected (Hotel Wifi, for example).
            checkrediect(URLconnection, url);

            Boolean result_true = checkresult(result);

            if(result_true) {
                return true;  
            } else {
                return false;
            }

        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return false;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T12:39:30.260

> 但这会适得其反，并且不能满足程序的需求

那么什么是“程序的需求”？如果抛出an你*希望*结果是什么？`IOException`它必须是真、假或例外——目前，这些都不是。

我建议*大多数*时候，你只是让异常冒出来......你真的可以继续进行，就好像在的情况下没有任何问题`IOException`？

作为旁注，这很丑陋：

```
if(result_true) {
    return true;  
} else {
    return false;
} 
```

只需使用：

```
return checkresult(result); 
```

（理想情况下，重命名各种方法和变量以遵循 Java 命名约定。）

我还建议将其更改为 return`boolean`而不是`Booelean`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T12:40:06.737

您的 catch 语句有一个既不返回值也不引发异常的分支。

```
} catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

那里的那个块需要有某种形式的代码来返回一些东西，否则该方法将无法正常运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T12:40:06.170

```
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    return false;
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T12:39:42.637

您必须`return`在`method block`.

像这样做....

```
protected Boolean doInBackground(String... userandpass)  { 

boolean isOk = false;

// Your code

if(result_true) {
                isOk = true;

            } else {

                isOk = false;
            }

 return isOk;

 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T12:41:57.840

您必须在`catch (IOException e)`块中有一个 return 语句。当您捕获 IOException 时，编译器不知道要返回什么。

你有 2 个选择，返回一些东西（假），或者重新抛出异常。

# ios - glReadPixels 替代品

> ID：11795887
> 
> 赞同：2
> 
> 时间：2012-08-03T12:37:46.747
> 
> 标签：ios, opengl-es, rendering

我想将 iOS 帧截屏为一个`AVAssetWriter`（甚至只是一个`UIImage`）。传统的使用方法`glReadPixels`效果很好——但速度很慢。我知道，从 iOS 5.0 开始，我可以使用另一种更快的方法。我关注了很多帖子，例如：[OpenGL ES 2d rendering into image](https://stackoverflow.com/questions/10455329/opengl-es-2d-rendering-into-image/10455622#10455622) 其中提到了使用`CVOpenGLESTextureCacheCreate`- 但无法让它工作。

现在，就在每次调用 presentRenderbuffer 之前： - 我正在关注苹果的示例`glReadPixels`（[http://developer.apple.com/library/ios/#qa/qa1704/_index.html](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)），它有效。当尝试按照这篇文章进行操作时 - [OpenGL ES 2d 渲染到图像](https://stackoverflow.com/questions/10455329/opengl-es-2d-rendering-into-image/10455622#10455622)中以获取图像，它基本上用创建缓存纹理替换了对 glReadPixels 的调用，并将其绑定到渲染目标（像素缓冲区），然后从像素中读取缓冲区 - 它似乎从屏幕上“窃取”了图像 - 所以没有渲染任何内容。

谁能阐明如何做到这一点？另外，请提及这是否仅适用于 OpenGL ES 2.0 - 我正在寻找一种快速的替代方案，它也适用于以前的版本。

代码示例将非常好。

# ios - 解析 KML 时未调用 viewForOverlay 方法

> ID：11795891
> 
> 赞同：0
> 
> 时间：2012-08-03T12:38:04.623
> 
> 标签：ios, kml, mkmapviewdelegate

我正在使用 KML 在地图视图中显示一些叠加层。解析 KML 文件后，我在地图视图中添加了叠加层，但`viewForOverlay`即使我将委托属性设置为地图视图，也不会调用地图视图委托方法。

这个问题的可能原因是什么？

```
NSURL *url = [NSURL fileURLWithPath:filePath];
kmlParser = [[KMLParser alloc] initWithURL:url];

[kmlParser parseKML];

// Add all of the MKOverlay objects parsed from the KML file to the map.
NSArray *overlays = [kmlParser overlays];
[self.mapView addOverlays:overlays];

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id <MKOverlay>)overlay
{
     return [kmlParser viewForOverlay:overlay];
} 
```

我已经使用 KMLViewer 示例完成了它。

# c# - 在没有 CA 警告的情况下实现继承的 IDisposable 模式

> ID：11795903
> 
> 赞同：1
> 
> 时间：2012-08-03T12:38:39.747
> 
> 标签：c#, .net, idisposable

我正在处理以下案例。我有一个具有 IDisposable 模式的基类，这意味着它具有`public virtual Dispose()`方法和`protected virtual Dispose(bool)`方法。但是我无法在派生类中以不会收到任何 CA 警告的方式实现此模式。请考虑以下示例：

```
public class UtilizeClass : IDisposable
{
    private MyData data;

    public UtilizeClass()
    {
        data = new MyData();
    }

    public void Dispose()
    {
        data.Dispose(); // Cannot use Dispose(bool) because it is protected.
    }
}

public class MyData : Base, IDisposable
{
    // Here we have some managed resources that must be disposed.

    // How to implement the pattern?
}

public class Base : IDisposable
{
    public virtual void Dispose() { }
    protected virtual void Dispose(bool disposing) { }
} 
```

我一直在课堂上收到相互矛盾的 CA 警告`MyData`。例如：删除 Dispose() 并将其逻辑移至 Dispose(bool)。

非常感谢您的回答和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:42:15.333

您的基类不应该`void Dispose()`是虚拟的，它应该被实现并调用虚拟`void Dispose(bool disposing)`作为其实现的一部分。

有关更多详细信息以及更清晰的备用 API，请查看：

[http://haacked.com/archive/2005/11/18/acloserlookatdisposepattern.aspx](http://haacked.com/archive/2005/11/18/acloserlookatdisposepattern.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:01:48.460

如果`Base`是你自己的类，那么不要实现这个反模式。

`Dispose`当一个类同时包含必须释放的托管资源（例如，应该有自己调用的 Stream 对象）和必须清理的非托管资源时，使用双重处理（如果处理为真，则为假） 。向上。

这是一个坏主意。而是让您的所有课程都属于一两个类别：

A. 只有非托管资源的类。理想情况下，每个班级只有一个：

```
public sealed class HandlesUnmanaged : IDisposable
{
  private IntPtr _someUnmanagedHandleOfSomeKind;
  public string DoSomething(string someParam)
  {
    // your useful code goes here;
    // make it thin, non-virtual and likely to be inlined
    // if you need to extend functionality, but it in a
    // containing Disposable class, not a derived class.
  }
  private void CleanUp()
  {
    //your code that cleans-up someUnmanagedHandleOfSomeKind goes here
  }
  public void Dispose()
  {
    CleanUp();
    GC.SuppressFinalize(this);//finaliser not needed now.
  }
  ~HandlesUnmanaged()//not called if already disposed
  {
    CleanUp();
  }
} 
```

理想情况下，您甚至不需要像这样的任何类，而是使用`SafeHandle`which 为您做这些。

B. 具有一个或多个需要处置的托管资源的类：

```
public class NoUnmanaged : IDisposable
{
  private HandlesUnmanaged _likeAbove;
  private Stream _anExampleDisposableClass;
  public virtual void Dispose()
  {
    _likeAbove.Dispose();
    _anExampleDisposableClass.Dispose();
  } 
  /* Note no finaliser, if Dispose isn't called, then _likeAbove's
  finaliser will be called anyway. All a finaliser here would do is
  slow things up and possibly introduce bugs.
  */
}
public class DerivedNoUnManaged : NoUnmanaged
{
  Stream _weMayOrMayNotHaveAnotherDisposableMember;
  public override void Dispose()
  {
    //note we only need this because we have
    //another disposable member. If not, we'd just inherit
    //all we need.
    base.Dispose();
    weMayOrMayNotHaveAnotherDisposableMember.Dispose();
  }
} 
```

总之，我们要么有简单的非托管拥有类，它们在它们`Dispose()`和它们的终结器中做同样的事情，除了前调用`GC.SuppressFinalize`，或者我们有简单的非非托管拥有类，它们只是`Dispose()`他们需要处理的所有东西，包括如有必要，请致电`base.Dispose()`，并且没有终结者。无需将逻辑拆分为同一类中的两种类型。终结者没有风险调用已经终结的东西，或者强制超过必要的东西进入终结队列。

理想情况下，你甚至根本不做第一种类型。只是第二种。

如果您通过从另一方的类继承而被迫进入它，那么只需执行以下操作：

```
public MyClass : Base
{
  Stream _forExample;
  public override void Dispose(bool disposing)
  {
    if(disposing)
    {
      _forExample.Dispose();
    }
    base.Dispose(disposing);
  }
} 
```

不要`disposing == false`自己处理这种情况，因为那里没有混入非托管资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:42:19.793

基类应该有一个`public void Dispose()`（非虚拟的）调用`Dispose(true)`.

派生类应该简单地覆盖`protected virtual void Dispose(bool disposing)`.

# java - 如何更好地组织小班的 Swing 代码？

> ID：11795907
> 
> 赞同：1
> 
> 时间：2012-08-03T12:38:52.310
> 
> 标签：java, swing

Swing 类的大小往往会增长，特别是在构建具有很多功能的页面时，这总是会导致复杂的代码，是维护的噩梦。

现在，我明白如果将业务逻辑分离出来，其中许多类将急剧缩小。

我想知道的是如何将swing元素组件化，从而可以用更简单的构建块来构建页面？您是否见过一些示例应用程序，它在每个页面上都做了很多工作，并且没有为几个类运行数千行？您建议使用哪些技术来分解 UI 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:42:54.777

我发现[Humble 对话框](http://www.objectmentor.com/resources/articles/TheHumbleDialogBox.pdf)文章中描述的技术非常适合入手。它还极大地促进了测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T13:02:20.920

你意识到你给出了相互矛盾的要求吗？

*   在每一页上都有很多作用
*   并且不会遇到数千行

如果您有很多功能，您将有很多代码来执行所述功能？用户界面通常不是微不足道的，为了获得良好的可用性，他们需要：

*   布局合理且合乎逻辑
*   根据当前 UI 状态启用/禁用组件
*   验证用户输入
*   与幕后的某些模型交换数据

这自然需要每个 UI 元素几行代码，有时甚至很多。（代码行不应按字面意思理解，如果您使用与 XML 等一起工作的框架，它也可能是某种元代码）。

抽象地说，你唯一能做的就是保持逻辑上的混乱。清晰地分离不同的任务。这可以通过将整个行为抽象到每个 UI 元素中来完成（这种方法通常会导致每个组件的专用子类或组件和行为的组合），或者将每个关注点放入单独的类中（例如，Panel 声明所有组件，但启用/禁用、验证和数据绑定都分为不同的类）。

这两种方法并没有真正减少代码量，但它们限制了进入一个类的代码量。

最后，找出您在许多地方找到的常见/相似代码（如果您已经拥有现有代码的网格，则采用“补救”方法）。

# jquery - 排除某些按钮

> ID：11795909
> 
> 赞同：0
> 
> 时间：2012-08-03T12:39:02.223
> 
> 标签：jquery, asp.net

我有这样的jquery代码：

```
$('input:not(:button,:submit),textarea,select').change(function () {
    window.onbeforeunload = function () {
        if (warnMessage != null) return warnMessage;
    }
});

$('input:submit').click(function (e) {
    warnMessage = null;
}); 
```

这用于在用户尝试关闭浏览器窗口或在单击链接时导航到新页面时显示消息。除了此代码排除所有提交类型按钮外，它运行良好。

我有 3 个 ID 为 MainContent_Button1、MainContent_Button2、MainContent_Button3 的提交按钮。如何修改上面的代码，使其排除这 3 个按钮。此外，我希望这三个按钮不要将 warnMessage 设置为 null，并且我希望这三个按钮允许 onbeforeunload 事件。我试图简单地调出每个按钮并执行以下操作：

```
$("#MainContent_Button1").click(function (e) {
    warnMessage = "You have unsaved changes on this page!";
    window.onbeforeunload = function () {
        return warnMessage;
    }
}); 
```

但是，即使我把它放在上面的代码之前，这也不起作用......那么我在顶部发布的内容有什么办法可以将这 3 个按钮排除在外吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:44:07.720

这很容易，我认为你在正确的轨道上。您可以使用`.not()`jQuery 中的函数。请参阅以下代码：

```
$('input,textarea,select').change(function () {
    window.onbeforeunload = function () {
        if (warnMessage != null) return warnMessage;
    }
});

$('input:submit').not('#MainContent_Button1, #MainContent_Button2, #MainContent_Button3').click(function (e) {
    warnMessage = null;
}); 
```

# javascript - 函数上的额外括号

> ID：11795912
> 
> 赞同：10
> 
> 时间：2012-08-03T12:39:05.920
> 
> 标签：javascript, closures

> **可能重复：**
> [JavaScript 对象/函数/类声明周围的括号是什么意思？](https://stackoverflow.com/questions/440739/what-do-parentheses-surrounding-a-javascript-object-function-class-declaration-m)
> [这个“（function（）{}）;”，括号内的函数，在javascript中是什么意思？](https://stackoverflow.com/questions/4043647/what-does-this-function-a-function-inside-brackets-mean-in-javascript)
> [一个Javascript函数](https://stackoverflow.com/questions/6340874/a-javascript-function)

我遇到了类似这样的标记：

```
var something = (function(){
    //do stuff
    return stuff;
})()
document.ondblclick = function(e) { alert(something(e)) }; 
```

我不明白变量中的打开`(`和关闭。你能解释一下这样写的区别吗？`)()``something`

```
var something = function(){
    //do stuff
    return stuff;
}; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T12:49:51.010

`(function(){ ... })`是一个[（匿名）函数表达式](https://stackoverflow.com/q/336859/1048572)，您可以例如将该值分配给一个变量。

它后面的括号将立即执行函数表达式，从而产生函数的返回值（在这里：）`stuff`。该构造称为[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。

When`stuff`是一个函数（我假设，因为您稍后调用`something`），这称为[闭包](https://stackoverflow.com/q/111102/1048572)- 返回的函数（`stuff`，分配给`something`）仍然可以访问该匿名函数的执行上下文中的变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T12:57:36.653

如果您将多余的括号排除在外，可能会更容易理解，因为它们没有任何用途：

```
var something = function() {
    return 3;
} // <-- a function. 
(); // now invoke it and the result is 3 (because the return value is 3) assigned to variable called something 

console.log(something) //3 because the function returned 3 

var something = function() {
    return 3;
}; // a function is assigned to a variable called something

console.log(something) //logs the function body because it was assigned to a function
console.log(something()) //invoke the function assigned to something, resulting in 3 being logged to the console because that's what the function returns 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T12:45:43.463

关于它做什么的问题，请阅读所有评论和其他答案。他们是绝对正确的。

**你为什么要使用它？**在使用闭包时，您经常会发现这种模式。以下代码片段的目的是为 10 个不同的 DOM 元素添加一个事件处理程序，并且每个元素都应该提醒它的 ID 属性（例如，“你点击了 3 个”）。您应该知道，如果这是您的实际意图，那么有一种更简单的方法可以做到这一点，但出于学术原因，让我们坚持这个实现。

```
var unorderedList = $( "ul" );
for (var i = 0; i < 10; i++) {
    $("<li />", {
        id: i,
        text: "Link " + i,
        click: function() {
            console.log("You've clicked " + i);
        }
    }).appendTo( unorderedList );
} 
```

上面代码的输出可能不是你最初期望的。每个点击处理程序的结果都是“你点击了 9”，因为在事件处理程序被触发时 i 的值是“9”。开发人员真正想要的是在定义事件处理程序的时间点显示 i 的值。

**为了修复上述错误，我们可以引入闭包。**

```
var unorderedList = $( "ul" ), i;

for (i = 0; i < 10; i++) {
    $("<li />", {
        id: i,
        text: "Link " + i,
        click: function(index) {
            return function() {
                console.log("You've clicked " + index);
            }
        }(i)
    }).appendTo( unorderedList );
} 
```

您可以从 jsFiddle 执行和修改上述代码。

修复上述代码的一种方法是利用自执行匿名函数。这是一个花哨的术语，意味着我们将创建一个无名函数，然后立即调用它。这种技术的价值在于变量的范围保持在函数内。因此，首先我们将事件处理程序内容包围在一个函数中，然后立即调用该函数并传入 i 的值。通过这样做，当事件处理程序被触发时，它将包含定义事件处理程序时存在的 i 的值。

进一步阅读闭包：[JavaScript 闭包的用例](http://msdn.microsoft.com/en-us/magazine//ff696765.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T12:51:24.987

也请查看 JavaScript FAQ 部分：[这里有一些很好的解释和示例](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

好的，为什么要使用这个：

假设我的脚本正在运行，并且稍后可能需要一些事情（例如，我正在循环遍历节点列表）。这就是为什么我可能会选择做这样的事情：

```
for(var i=0;i<nodesList.lenght;i++)
{
    if (nodesList[i].id==="theOneINeed")
    {
        aClosure = (function(node,indexInNodesList)//assign here
        {
            return function()
            {
                node.style.display = 'none';//usable after the parent function returns
                alert(indexInNodesList+ ' is now invisible');
            }
        })(nodesList[i],i);//pass the element and its index as arguments here
        break;
    }
}
i = 99999;
aClosure();//no arguments, but it'll still work, and say i was 15, even though I've just 
//assigned another value to i, it'll alert '15 is now invisible' 
```

这使我能够做的是防止函数参数被垃圾收集。通常，函数返回后，它的所有 var 和参数都会被 GC 处理。但是在这种情况下，该函数返回了另一个函数，该函数具有指向这些参数的链接（它需要它们），因此只要它们`aClosure`存在，它们就不会被 GC 处理。

正如我在评论中所说。谷歌关闭，练习一下，你会明白的......他们真的很强大

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T13:03:24.790

所有的答案都很好，但我认为最简单的答案已被略过：

```
var something = (function(){
    //do stuff
    return stuff;
})() 
```

此代码执行后，`something`变为`stuff`. 返回内容的函数在分配某些内容之前执行。

```
var something = function(){
    //do stuff
    return stuff;
}; 
```

这段代码执行后，`something` ***是***一个返回的函数`stuff`。返回内容的函数从未执行过。

# git - 相当于 SourceTree 中的“git update-index --assume-unchanged”

> ID：11795913
> 
> 赞同：25
> 
> 时间：2012-08-03T12:39:07.487
> 
> 标签：git, version-control

到目前为止，我`git update-index --assume-unchanged`在填写数据库密码后在数据库配置文件上使用，因为我不希望我的数据库密码进入公共代码存储库。

现在我想尝试使用 SourceTree 一段时间，但我找不到一种方法来做同样的事情：该文件应该保留在存储库中，但我只想让 SourceTree 在我的工作副本中忽略对该文件的更改。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-11-10T15:13:27.893

我刚刚为此任务定义了自定义操作。

确保 git 的路径正确。

感谢评论中的@RobCroll，我们现在有了一个 Windows 版本：

```
C:\Program Files (x86)\Git\bin\git.exe (for x64 use: C:\Program Files\Git\bin)
Parameters: update-index --assume-unchanged $FILE 
```

![在此处输入图像描述](../Images/3ec3fda9a23b6b4b16c7c42de69935c8.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T12:43:14.790

SourceTree 很可能没有以这种方式操作索引的功能（尽管我可能错了，但似乎没有）。但是，这并不意味着您不能下拉到终端以发出该命令，而是继续使用 SourceTree 来完成其他所有操作。

# c++ - CRTP + Traits 类：“没有类型命名...”

> ID：11795915
> 
> 赞同：7
> 
> 时间：2012-08-03T12:39:20.467
> 
> 标签：c++, templates, crtp, typetraits

我尝试使用模板类实现 CRTP，但以下示例代码出现错误：

```
#include <iostream>

template<class T> class Traits
{
    public:
        typedef typename T::type type; // <- Error
                                       // : "no type named 'type' in 'class MyClass<double, 3u, 3u>'
        static const unsigned int m_const = T::m_const;
        static const unsigned int n_const = T::n_const;
        static const unsigned int size_const = T::m_const*T::n_const;
};

template<class T0> class Crtp
{
    public:
        typedef typename Traits<T0>::type crtp_type;
        static const unsigned int size = Traits<T0>::size_const; // <- This is OK
};

template<typename TYPE, unsigned int M, unsigned int N>
class MyClass : public Crtp< MyClass<TYPE, M, N> >
{
    public:
        typedef TYPE type;
        static const unsigned int m_const = M;
        static const unsigned int n_const = N;
};

int main()
{
    MyClass<double, 3, 3> x;
    std::cout<<x.size<<std::endl;
    return 0;
} 
```

我不明白是什么导致了这个问题，也不明白如何解决它。

事实上，我的目标是 CRTP 类必须知道派生类的模板参数，而无需将它们作为 CRTP 类的模板参数传递。

你有什么想法如何实现这个吗？

编辑（与第一个有关）：我的 CRTP 类必须能够处理具有不同数量模板参数的派生类

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T12:57:08.560

问题是`MyClass`它自己的基类列表中不完整，您在其中实例化`Crtp<MyClass>`. 但是实例化`Crtp<MyClass<...>>`需要实例化`Traits<MyClass<...>>`，然后再需要实例化`MyClass<...>::type`，这是不可能的，因为它是不完整的。你有一个循环依赖。

> 实际上我的目标是 CRTP 类必须知道派生类的模板参数

这可以使用部分特化和模板模板参数来完成，如下所示：

```
#include <iostream>

template<typename T> class Crtp;

template<template<typename, unsigned, unsigned> class T, typename U, unsigned M, unsigned N>
class Crtp< T<U, M, N> >
{
    public:
        typedef U crtp_type;
        static const unsigned int size = M * N;
};

template<typename TYPE, unsigned int M, unsigned int N>
class MyClass : public Crtp< MyClass<TYPE, M, N> >
{
};

int main()
{
    MyClass<double, 3, 3> x;
    std::cout<<x.size<<std::endl;
    return 0;
} 
```

# python - python美汤提取数据

> ID：11795920
> 
> 赞同：2
> 
> 时间：2012-08-03T12:39:49.583
> 
> 标签：python, beautifulsoup

我正在使用 Beautiful Soup 4.0 解析 html 文档。

这是文档中的表格示例

```
<tr>
<td class="nob"></td>
<td class="">Time of price</td>
<td class=" pullElement pullData-DE000BWB14W0.teFull">08/06/2012</td>
<td class=" pullElement pullData-DE000BWB14W0.PriceTimeFull">11:43:08&nbsp;</td>
<td class="nob"></td>
</tr>
<tr>
<td class="nob"></td>
<td class="">Daily volume (units)</td>
<td colspan="2" class=" pullElement pullData-DE000BWB14W0.EWXlume">0</td>
                <td class="nob"></td>
<t/r> 
```

我想提取 08/06/2012 和 11:43:08 每日音量，0 等。

这是我查找特定表及其所有数据的代码

```
html = file("some_file.html")
soup = BeautifulSoup(html)
t = soup.find(id="ctnt-2308")
dat = [ map(str, row.findAll("td")) for row in t.findAll("tr") ] 
```

我得到一个需要组织的数据列表

任何建议以简单的方式做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T11:03:38.367

```
list(soup.stripped_strings) 
```

将为您提供该汤中的所有字符串（删除所有尾随空格）

# ios - 如何在 iOS 中释放内存

> ID：11795921
> 
> 赞同：0
> 
> 时间：2012-08-03T12:39:51.037
> 
> 标签：ios, ram

我想知道是否可以在 iOS 中以编程方式释放 ram？至少我想删除后台的所有应用程序..谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:43:01.233

没有用于此的 API。但是，如果您的应用程序位于前台并使用大量 RAM，则会导致操作系统终止后台应用程序，从而释放一些 RAM。

我不确定这是否会通过审批程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:33:44.967

您无法释放其他应用程序的 RAM。但是，这将在必要时由操作系统关闭后台应用程序自动发生。

您可以使用 didReceiveMemoryWarning: 委托方法来释放您自己的类中不再使用的内存。

# xml - Oracle XMLDB 处理大文件

> ID：11795931
> 
> 赞同：2
> 
> 时间：2012-08-03T12:40:30.873
> 
> 标签：xml, transformation, oracle11gr2

您好，我目前正在使用 Oracle 11.2 XE 并尝试在使用大型 xml 文件时进行一些性能测试。到目前为止我还没有走得很远，希望你能帮助我一点。

我的目标是在数据库中有效地将大型 xml 文档从一种 xml 格式转换为另一种格式，因此我寄希望于 XMLType binary 和 XMLType Object 关系数据类型，它们应该进行性能优化，因为 Oracle 表示它们不需要 DOM 解析来进行评估大多数情况下的 XPath 表达式。

问题 1 是我无法为 OR XMLTYPE 注册复杂的模式。一个小时的注册时间后，它在大约 1.3 GB 的内存分配处出现内存不足错误而中断。架构已经分解为 3 个文件，触发 out of mem 错误的文件只有 80kb 大。我该如何处理？通过包含在更多连接的模式文件中进一步细分？

问题 2 是我无法让 XMLTransform 工作。我在用着

```
Insert into OUTPUT_BINARY SELECT a.filename, XMLtransform( a.xml, b.stylesheet )
FROM XMLTYPE_BINARY a, stylesheets b
  WHERE (a.filename = 'test.xml' and b.filename = 'stylesheet.xsl'); 
```

表 XMLTYPE_BINARY 和 OUTPUT_BINARY 在哪里

```
create table XMLTYPE_BINARY (filename varchar2(50), xml XMLTYPE) 
XMLTYPE Column xml store as BINARY XML 
```

即使对于 100KB 的文档，它也需要永远转换（我在 30 分钟终止，不知道它是否会结束），当尝试使用 5MB 文档时，它给了我一个 ORA-24331：用户缓冲区太小。有人可以给我一个提示我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T11:14:28.247

我认为这可能是 XE 版本的限制，但在 Oracle 11gR2 上它是一样的。我尝试了 dbms_xslprocessor 而不是 XMLTYPE 的 XMLTransform，我通过 XMLINDEX 索引了二进制 XMLTYPE 列，但处理一个 100 KB 的文件仍然需要很长时间，超过 10 分钟（从未完成过，总是过早终止）。

我已经使用 Java 应用程序在数据库外部使用 XDK 解析器和处理器转换了相同的文档，并且可以取得良好的效果。那么为什么数据库中的解析器和转换器工作得这么差呢？

# macos - 从内存加载和执行包

> ID：11795934
> 
> 赞同：1
> 
> 时间：2012-08-03T12:40:39.043
> 
> 标签：macos, cocoa, bundle, macos-carbon, core-foundation

NSCreateObjectFileImageFromMemory 函数可以从内存中加载包。有没有人在这方面有成功的经验？有没有人有这个功能的工作样本？我的代码如下：

```
text srcPath = "/Applications/TextEdit.app/Contents/MacOS/TextEdit";
data_t data;
data.loadFromFile(srcPath);
void *addr;
kern_return_t err;
NSObjectFileImage img = nil;
NSObjectFileImageReturnCode dyld_err;

err = vm_allocate(mach_task_self(), (vm_address_t *)&addr,
    data.length(), true);
if(err == 0)
{
    //err = vm_write(mach_task_self(), (vm_address_t)addr,
        //(vm_address_t)(char*)data, data.length());
    memcpy(addr, (char*)data, data.length());
    if(err == 0)
        dyld_err =
            NSCreateObjectFileImageFromMemory(addr, data.length(), &img);
        // error is NSObjectFileImageFailure
} 
```

**img**变量为空（错误为 NSObjectFileImageFailure）。为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:47:08.670

从[manpage](https://developer.apple.com/library/prerelease/mac/#documentation/Darwin/Reference/ManPages/10.4-intel/man3/NSObjectFileImage.3.html)看来，只能`MH_BUNDLE`加载文件`NSCreateObjectFileImageFromMemory()`和朋友。

`MH_BUNDLE`文件在[这里](https://developer.apple.com/library/prerelease/mac/#documentation/DeveloperTools/Conceptual/MachORuntime/Reference/reference.html)解释。

> MH_BUNDLE 文件类型是您在运行时加载的代码（通常称为包或插件）通常使用的类型。按照惯例，这种格式的文件扩展名是 .bundle。

请注意，该手册页适用于 10.4，并且似乎没有可用的更新版本。

# jquery - 在通过 jquery 分配的 id 和名称上执行 click 函数

> ID：11795936
> 
> 赞同：0
> 
> 时间：2012-08-03T12:40:47.277
> 
> 标签：jquery, html, jquery-selectors

我通过以下方式从 jquery 发送部分 html 代码

```
htmlCode1 = "<div class='txt_center'>\
<input type='button'  class='btn_view b widthauto' value='Add'  name='addShortlist'\ style='cursor:pointer;'";\
htmlCode1 += " id=add"+this.id+" >\
</div>"; 
```

在这里，我在 html 中分配了一个 id 和一个名称，并希望在单击这些 id 时执行某些功能，但不知何故我的 onclick 功能没有被执行。解决方案是什么？

我将 onclick 函数称为：

```
$("[name='addShortlist']").click(
    function()
    {
        alert("here");
        return false;
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:49:07.623

将事件处理程序注册到动态添加的内容的解决方案是**事件委托**，使用`.on()`(jQuery 1.7+) 或`.delegate()`函数。基本原则是将事件处理程序绑定到静态元素（最坏情况下，整个文档），仅当事件源自与选择器匹配的元素时才会执行回调函数。

一般代码如下所示：

```
$(document).on('click', '[name="addShortlist"]', function() {
    alert("here");
    return false;
}); 
```

这样，每当您单击与选择器匹配的元素时`[name="addShotlist"]`——如果它是在执行该代码后添加的事件——它仍将执行回调函数。

有关更多信息，**请**阅读[`.on()`](http://api.jquery.com/on/).

更新

如果您使用的 jQuery 版本无法访问**任何**事件委托功能（即在添加 jQuery 1.3 之前`.live()`），那么您真正拥有的唯一选择是执行以下操作：

```
$(function() {
    function handleClick() {
        alert("here");
        return false;
    }

    function bindClicks() {
        $("[name='addShortlist']").unbind('click', handleClick).click(handleClick);
    }

    $("#test-button').click(function(e) {
        // dynamically add some content
        bindClicks();
    });
}); 
```

这会将匿名回调函数转换为命名函数（因此您可以传递对它的引用），将事件处理程序的绑定包装到一个函数中（因此您可以从许多位置轻松调用它），并添加`.unbind()`对在将事件处理程序重新绑定到现在与选择器匹配的**所有**元素之前，从先前存在的元素（上次调用函数时存在的元素）中删除任何相同的事件处理程序。

# spring - Hibernate - Spring，SessionFactory nullPointerException（调用 getCurrentSession() 时）

> ID：11795942
> 
> 赞同：2
> 
> 时间：2012-08-03T12:41:25.567
> 
> 标签：spring, hibernate, jakarta-ee, spring-mvc

我尝试`PartageDomain`使用休眠会话工厂将我的数据库保存在我的数据库中，问题是抛出了`Session session = sessionFactory.getCurrentSession();`一个。`nullPointerException`我的数据源配置得很好，我已经可以在这个项目中以完全相同的方式保存/保留其他对象，所以我不知道问题出在哪里。

来自控制台异常的快照：

```
javax.faces.FacesException: /pages/indexx.xhtml @28,72 listener="#{userMB.saveUserRights}": java.lang.NullPointerException
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:85)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)

.....

javax.el.ELException: /pages/indexx.xhtml @28,72 listener="#{userMB.saveUserRights}": java.lang.NullPointerException
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:108)
    at com.sun.faces.facelets.tag.jsf.core.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxHandler.java:447)
    at javax.faces.event.AjaxBehaviorEvent.processListener(AjaxBehaviorEvent.java:109)
    at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:98)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:764)
    at javax.faces.component.UIData.broadcast(UIData.java:911)

...

Caused by: java.lang.NullPointerException
    at com.stage.dao.PartageDaoImpl.add(PartageDaoImpl.java:35)
    at com.stage.beans.UserManagedBean.saveUserRights(UserManagedBean.java:224)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:234)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    ... 23 more 
```

这是 partageDomainImpl 类的部分代码：

```
@Repository
public class PartageDaoImpl implements PartageDao, Serializable {
@Resource(name = "sessionFactory")
    private SessionFactory sessionFactory;
// sessionFactory getter and setter :)

public void add(PartageDomain partageDomain) {      System.out.println(partageDomain.getPartageId().getUserDomain().getFirstName()); // I get this
        Session session = sessionFactory.getCurrentSession();
        // Save
        try {
            session.persist(partageDomain);
        } catch (Exception e) {
            session.saveOrUpdate(partageDomain);
        }
    } 
```

请注意，异常不是由 EL 语言引起的，实际上我通过在调用`getsessionFactory`产生异常的方法之前打印它来正确获取对象

在我的 PartageDomain 课程中，我有：

```
@Entity
public class PartageDomain implements Serializable {
// the PartageDomain properties, getters and setters .... 
```

实际上，我正在向您展示我正在使用注释来管理依赖项和注入，关于我的会话工厂，我在我的配置文件中将其声明为

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
                 p:dataSource-ref="dataSource"
                 p:configLocation="${hibernate.config}"
                 p:packagesToScan="com.stage"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:30:50.087

只是猜测 - 您的上下文文件中可能存在冲突。

我认为您的`@Repository`注释 bean 以某种方式在 servlet 应用程序上下文中创建，而`<tx:annotation-driven transaction-manager="transactionManager" />`在根 Web 应用程序上下文中声明。

换句话说，`@Transactional`作品仅在`tx:annotation-driven`声明的上下文中。

我想，如果自动扫描在两个上下文配置中都存在，那么某些 bean 可能会被自动扫描并创建两次，从而使它们同时存在于 Web 应用程序和 servlet 应用程序上下文中。

所以解决方案可能是检查所有 bean 是否在正确的位置创建一次 - 根上下文中的 DAO，servlet 上下文中的控制器等。

*更新* 还请注意，此代码使用 catch em 所有异常处理反模式，并且可能在引发我所知道的 Hibernate 不支持的异常后访问休眠会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T16:15:07.337

终于找到问题了，其实是我`partageServiceImpl`的这个`sessionfactory`属性有spring-hibernate注入系统管理。

在我的`userManagedBean`中，我是直接调用`PartageDaoImpl.add`添加`partageDomain`对象的方法，正确的方法是调用`PartageServiceImpl.add`具有`sessionFactory`属性的方法，这样`currentSession`不会为空

我承认这是我犯的一个严重错误，我花了一整天的时间来解决它，所以我希望其他人在看到我遇到的异常时能迅速纠正这个错误。

# xml - Xslt : 动态创建命名空间

> ID：11795943
> 
> 赞同：0
> 
> 时间：2012-08-03T12:41:27.103
> 
> 标签：xml, xslt, xmlspy

以下是 XML 数据中的节点

```
<WebServiceUrl>"http://webser.part.site"</WebServiceUrl>
<UserName>nida</UserName>
<Passsword>123</Password> 
```

我已将此节点值传递给 Xslt 服务，现在我在参数中有此 url 节点值，例如

```
 <xsl:param name="UserName"/>
    <xsl:param name="Password"/>
    <xsl:param name="WebServiceUrl"/> 
```

现在我想创建一个 soapenv:Envelope 标签并在其中使用这个值

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="$WebServiceUrl"> 
```

所以我想从 XSLT 代码中得到的最终输出是：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:web="http://webservice2.partner.insite">
<soapenv:Header/>
<soapenv:Body>
<web:upload>
<web:username>nida</web:username>
<web:password>123</web:password>
</web:upload></soapenv:Body></soapenv:Envelope> 
```

非常感谢你的帮助 。

这是你的代码：

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
 <xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="yes"/>
 <xsl:param name="UserName"/>
 <xsl:param name="Password"/>
  <xsl:param name="WebServiceUrl" select="'some: namespace'"/>
<xsl:template match="/">    
SOAPAction: "urn:upload"
Content-Type: text/xml;charset=UTF-8
 <xsl:text>
 </xsl:text>
  <xsl:element name="{name()}"
      namespace="http://schemas.xmlsoap.org/soap/envelope/">
  <xsl:sequence select="namespace::*[not(name()='web')]"/>
  <xsl:namespace name="web" select="$WebServiceUrl"/>
 </xsl:element>
 <xsl:text>
   </xsl:text>
<soapenv:Header/>
   <xsl:text>
   </xsl:text>
<soapenv:Body>
   <xsl:text>
   </xsl:text>
    <web:upload>
   <xsl:text>
   </xsl:text>      
        <web:username><xsl:value-of select="$UserName"/>                </web:username>
    <xsl:text>
   </xsl:text>
                <web:password><xsl:value-of select="$Password"/>           </web:password>
    <xsl:text>
   </xsl:text>
  </soapenv:Envelope>
</xsl:template>
    </xsl:stylesheet> 
```

当我尝试保存此代码时，由于缺少此节点的起始标记，因此出现错误

```
</soapenv:Envelope> 
```

请对此进行更改，我在此做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:05:41.273

**I. 这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:param name="pUrl" select="'some: namespace'"/>

 <xsl:template match="/*">
     <xsl:element name="{name()}"
          namespace="http://schemas.xmlsoap.org/soap/envelope/">
      <xsl:sequence select="namespace::*[not(name()='web')]"/>
      <xsl:namespace name="web" select="$pUrl"/>
     </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:web="http://webser.part.site"/> 
```

**产生想要的、正确的结果**（从参数值产生的“web”命名空间）：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                  xmlns:web="some: namespace"/> 
```

* * *

**二、这个 XSLT 1.0 转换：**

```
<xsl:stylesheet version="1.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:param name="pUrl" select="'some: namespace'"/>

    <xsl:variable name="vrtfDummy">
     <xsl:element name="web:dummy" namespace="{$pUrl}"/>
    </xsl:variable>

    <xsl:variable name="vNS" select="ext:node-set($vrtfDummy)/*/namespace::web"/>

 <xsl:template match="/*">
     <xsl:element name="{name()}"
          namespace="http://schemas.xmlsoap.org/soap/envelope/">
      <xsl:copy-of select="namespace::*[not(name()='web')]"/>
      <xsl:copy-of select="$vNS"/>
     </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于同一个 XML 文档（上图）时，再次产生所需的正确结果**：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="some: namespace"/> 
```

# php - 集成 Javascript 和 PHP 功能和验证

> ID：11795948
> 
> 赞同：0
> 
> 时间：2012-08-03T12:41:45.283
> 
> 标签：php, javascript, forms, function, xhtml

我有一个任务需要`onsubmit`在 JavaScript 中调用验证。这部分工作得很好。

第二部分是合并服务器端的 PHP 验证。编码应该在同一页面中，因此我下面的内容是通过我发现的一些研究和示例，这就是我想出的：

```
<?php
echo "<form action='' method='post' onsubmit='return regValidation()' id='RegistrationForm'>";
echo "  <div>";
echo "  <span class='reglbl'>";
echo "      First Name: <input type='text' name='FirstName' id='FirstNameID'/>";
echo "      Last Name: <input type='text' name='LastName' id='LastNameID'/>";
echo "  </span>";
echo "  </div>";
echo "  <div>";
echo "  <span class='reglbl'>";
echo "      Email Address: <input type='text' name='email' id='EmailID'/>";
echo "      Phone Number: <input type='text' name='PhoneNum' id='PhoneNumID'/>";
echo "  </span>";
echo "  </div>";
echo "  <div class='reglbl'>Pssword: <input type='password' name='PWD1' id='PWD1'/></div>";
echo "  <div class='reglbl'>Confirm Password: <input type='password' name='PWD2' id='PWD2'/></div>";
echo "  <div><input type='submit' value=' Register ' id='sub' /></div>";
echo "</form>";
if(!isset($_REQUEST['FirstName']) ||
    !isset($_REQUEST['LastName']) ||
    !isset($_REQUEST['email']) ||
    !isset($_REQUEST['PhoneNum']) ||
    !isset($_REQUEST['PWD1']) ||
    !isset($_REQUEST['PWD2']) ||
    $_REQUEST['FirstName'] =="" ||
    $_REQUEST['LastName'] == "" ||
    $_REQUEST['email'] == "" ||
    $_REQUEST['PhoneNum'] == "" ||
    $_REQUEST['PWD1'] == "" ||
    $_REQUEST['PWD2']=="") 
{
    echo "<script>alert('Please enter all fields!')</script>";
} elseif($_REQUEST['PWD1']!=$_REQUEST['PWD2']) {
    echo "<script>alert('Passwords entered do not match!')</script>";
} elseif(strlen($_REQUEST['PWD1'])<8||strlen($_REQUEST['PWD2'])<8) {
    echo "<script>alert('Passwords must be 8 or more characters!')</script>";
} else {
    // CALL A FUNCTION IN PHP HERE
}
?> 
```

因此，Java 和 PHP 中的验证都是相同的，唯一的区别是 PHP 会检查更多的 8 个字符长度的密码，但是当执行此代码时，JavaScript 唯一的验证是。

此外，我想知道如何调用包含最终 else 脚本的外部 PHP。

这是 javascript 代码 incase /REGISTAR VALIDATION function regValidation(){

```
var firstName = document.getElementById('FirstNameID');
var lastName = document.getElementById('LastNameID');
var email = document.getElementById('EmailID');
var pwd1 = document.getElementById('PWD1');
var pwd2 = document.getElementById('PWD2');

if(firstName.value == '' || lastName.value == '' || email.value == '' || pwd1.value == '' || pwd2.value == '')
{
    alert("Please enter all fields!");
}
else if (pwd1.value !== pwd2.value)
{
    alert("Passwords entered do not match!");   
}
else
{

}
return false; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:13:20.060

试试这个会帮助你

```
<?php
echo "<form action='' method='post' onsubmit='return regValidation()' id='RegistrationForm'>";
echo "  <div>";
echo "  <span class='reglbl'>";
echo "      First Name: <input type='text' name='FirstName' id='FirstNameID'/>";
echo "      Last Name: <input type='text' name='LastName' id='LastNameID'/>";
echo "  </span>";
echo "  </div>";
echo "  <div>";
echo "  <span class='reglbl'>";
echo "      Email Address: <input type='text' name='email' id='EmailID'/>";
echo "      Phone Number: <input type='text' name='PhoneNum' id='PhoneNumID'/>";
echo "  </span>";
echo "  </div>";
echo "  <div class='reglbl'>Pssword: <input type='password' name='PWD1' id='PWD1'/></div>";
echo "  <div class='reglbl'>Confirm Password: <input type='password' name='PWD2' id='PWD2'/></div>";
echo "  <div><input type='submit' name='formSubmit'value='Register' id='sub' /></div>";
echo "</form>";
if(isset($_REQUEST['formSubmit']) && $_REQUEST['formSubmit'] == 'Register')
{
if(!isset($_REQUEST['FirstName']) ||
    !isset($_REQUEST['LastName']) ||
    !isset($_REQUEST['email']) ||
    !isset($_REQUEST['PhoneNum']) ||
    !isset($_REQUEST['PWD1']) ||
    !isset($_REQUEST['PWD2']) ||
    $_REQUEST['FirstName'] =="" ||
    $_REQUEST['LastName'] == "" ||
    $_REQUEST['email'] == "" ||
    $_REQUEST['PhoneNum'] == "" ||
    $_REQUEST['PWD1'] == "" ||
    $_REQUEST['PWD2']=="") 
{
    echo "<script>alert('Please enter all fields!')</script>";
} elseif($_REQUEST['PWD1']!=$_REQUEST['PWD2']) {
    echo "<script>alert('Passwords entered do not match!')</script>";
} elseif(strlen($_REQUEST['PWD1'])<8||strlen($_REQUEST['PWD2'])<8) {
    echo "<script>alert('Passwords must be 8 or more characters!')</script>";
} else {
    // CALL A FUNCTION IN PHP HERE
}
}
?> 
```

javascript函数，您可以为密码长度添加更多验证

```
<script>
function regValidation(){

var firstName = document.getElementById('FirstNameID');
var lastName = document.getElementById('LastNameID');
var email = document.getElementById('EmailID');
var pwd1 = document.getElementById('PWD1');
var pwd2 = document.getElementById('PWD2');

if(firstName.value == '' || lastName.value == '' || email.value == '' || pwd1.value == '' || pwd2.value == '')
{
    alert("Please enter all fields!");
}
else if (pwd1.value !== pwd2.value)
{
    alert("Passwords entered do not match!");   
}
else
{
    return true;
}
return false;
}
</script> 
```

# jsf - p:dataTable，延迟加载和全局过滤器

> ID：11795949
> 
> 赞同：1
> 
> 时间：2012-08-03T12:41:46.240
> 
> 标签：jsf, jsf-2

我在数据表中使用延迟加载、分页和全局过滤器

在延迟加载函数中，我添加了 2 个函数以支持 2 个场景：

1）当用户在寻呼时

2）当用户在全局过滤器中添加一个值并按“Enter”

基本上我需要知道的是为了决定使用什么功能而执行了哪些活动。

数据表：

```
 <p:dataTable id="osTable"       
                     var="object"
                     value="#{bean.lazyModel}"
                     selection="#{bean.selectedObjectSet}"
                     selectionMode="single"
                     rowKey="#{object.ID}"
                     paginator="true"
                     paginatorPosition="bottom"
                     paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                     rowsPerPageTemplate="5,10,15"
                     rows="10"
                     widgetVar="objectTable">
            <f:facet name="header"> 
                <p:outputPanel style="float: right"> 
                    <h:outputText value="Search all fields:" /> 
                    <p:inputText id="globalFilter" 
                                 onkeypress="if (event.keyCode == 13) {objectSetTable.filter()}"
                                 style="width:150px"/>
                </p:outputPanel> 
            </f:facet> 
```

加载功能：

```
 @Override
public List<CfgSe2deMapping> load(int first, int pageSize, String sortField, SortOrder sortOrder, Map<String, String> filters) {
    List<Mapping> data = new ArrayList<Mapping>();

    if (// if user press enter ) {
        data.addAll(MappingHelper.getViaFilter(filters.get("globalFilter")));
    } else {
        data.addAll(MappingHelper.getViaOffSet(first + 1, first + pageSize));
    } 
```

我正在使用 primefaces 3.2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T14:40:24.870

你认为这是错误的方式。无论用户做什么，您都应该始终这样做：检索数据（应用过滤器，如果有）和分页（返回`pageSize`从`first`.

当有过滤器时，为什么不包括“first”和“pageSize”参数？行必须以任何一种方式分页。否则用户将只能看到过滤结果的第一页。

此外，您必须重写 getRowCount 方法，以便您的表格显示正确的页数。

# c# - C#代码设置虚拟目录的iis版本

> ID：11795960
> 
> 赞同：0
> 
> 时间：2012-08-03T12:42:23.397
> 
> 标签：c#, iis-6, virtual-directory

我正在编写一个函数来以编程方式创建 IIS 虚拟目录。我无法通过 c# 代码将 VD 的版本设置为 4.0.3019 .. 请对此提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:59:06.147

DropkicK 是一个用于在 c# 中流畅地定义部署过程的工具。它有能力做你所要求的。

将该功能引入项目的最简单方法是将[DropkicK nuget 包](http://nuget.org/packages/dropkick)导入新的部署项目。

它使用 WMI 处理虚拟目录、IIS 版本和 AppPool 运行时。[浏览 GitHub 上的源代码](https://github.com/chucknorris/dropkick)。

# c++ - 将标志组合映射到枚举的最简单方法是什么？

> ID：11795962
> 
> 赞同：0
> 
> 时间：2012-08-03T12:42:24.990
> 
> 标签：c++, enums, boolean

我得到了一个看起来或多或少像这样的枚举类型

```
enum foo{
X,
XandY,
XandZ,
XandYandZ,
none,
Y,
Z,
YandZ,
someSpecialCase,
anotherSpecialCase
}; 
```

我有几个通过管道传递的消息对象，一个特定的阶段决定这个消息是否有 X，另一个决定它是否有 Y 等等。最终，消息需要用这些标签之一进行标记。我设计了消息对象，但枚举已经定义。我不想假设枚举的任何数值。所以我放了像hasX，hasY这样的布尔标志，可以在不同的阶段单独设置。除了编写几层嵌套的 if-else 子句之外，还有更好的方法吗？

为清楚起见进行了
编辑再次编辑，更改了变量名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:52:15.057

如果我正确理解了这个问题，那么基本上你所说的是一个多路复用器。即将多个信息流合并为一个。这可以使用查找表轻松实现，具体实现取决于您。

您可以将各种输入流组合成一个关键对象。*我在下面包含了一些代码，但没有时间检查/运行它，所以请将其视为伪代码而不是逐字记录。*

**使用地图**

```
struct MyKey
{
    MyKey( bool X, bool Y, bool Z, bool SC1, bool SC2 ) :
        X_(X), Y_(Y), Z_(Z), SC1_(SC1), SC2_(SC2) {}

    bool X_;
    bool Y_;
    bool Z_;
    bool SC1_;
    bool SC2_;
}; 
```

您还需要一个`operator<()`函数才能在关联容器中使用它。然后您设置一个映射集合，例如地图：

```
typedef enum foo FooEnum;
std::map< MyKey, FooEnum > myMap; 
```

此地图需要在您的应用程序启动并加载时进行设置，如下所示：

```
myMap.insert( std::make_pair< MyKey, FooEnum >( MyKey(true,false,true,false,false), XandZ ) ); 
```

这仅映射 X 和 Z ，`XandZ`因此您需要对每个排列进行此操作。

一旦你来做检查，你所需要的就是：

```
std::map< MyKey, FooEnum >::const_iterator it = myMap.find( MyKey(X,Y,Z,SC1,SC2) );
if ( it != myMap.end() )
{
    enum foo valueINeed = it.second;
    // ... 
```

**使用向量/数组**

对此有一些变化。例如，您可以将输入流的值组合为掩码中的位（此处为 5 位），并使用 32 个元素的数组或向量将每个排列映射到单独的元素。

如果你这样做，你甚至可以在编译时创建集合。尽管您必须对其进行测试，但它可能也会运行得更快一些。缺点是代码可能更深奥一点，但同样没有禁止文档的法律！

# android - 在android中拉伸线性渐变油漆

> ID：11795967
> 
> 赞同：0
> 
> 时间：2012-08-03T12:42:41.713
> 
> 标签：android, linear-gradients

我有这个渐变：

```
gradient = new LinearGradient(0, 0, 0, 150, Color.WHITE, Color.GRAY, Shader.TileMode.MIRROR); 
```

现在它的高度为 150，但我希望这个高度与画布或父视图相同。我将在 onDraw(Canvas) 中使用渐变，所以我不能使用 new 语句。没有新的声明可以吗？

BR FireFly3000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:46:45.113

为什么不在 onMeasure 方法中使用它，或者如果您坚持将其放在 onDraw 方法中，则使用字段仅设置一次（并检查它是否为空）。

# android - 获取通过默认 Android 短信应用程序发送的短信的详细信息

> ID：11795971
> 
> 赞同：1
> 
> 时间：2012-08-03T12:43:09.187
> 
> 标签：android

我正在尝试通过我在后台运行的应用程序获取通过默认 Android SMS 应用程序发送的短信的详细信息。是否可以获得这些详细信息，例如目的地号码和发送的消息。任何想法，请提出建议。

# android - 片段微调器不会在 Android 中停止

> ID：11795976
> 
> 赞同：1
> 
> 时间：2012-08-03T12:43:18.363
> 
> 标签：android

我使用此代码通过使用数组适配器设置**数据来加载任何特定位置的附近地点。我面临两个问题：1.即使加载数据后微调器也不会停止。（应该没有微调器。但我不确定 Fragment 是如何做到这一点的。）

1.  我将实施 AsyncTask 来获取这些位置，这样它就不会减慢 Activity 的速度。我面临的小问题是：当他/她更改位置时，我如何通知用户（更新视图）新日期。让我们假设用户正在走路。因此纬度/经度会改变。那么，如何使用 onChangeNotify() 并更改列表的值。

    公共类 FragmentMap 扩展 ListFragment {

    ```
     ArrayList<Place> places = new ArrayList<Place>();
        //List<String> val = new List<String>()
        //@InjectView(R.id.explorePlacesListView) ListView placesListView;
        ListView listView;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

                ListView listView = (ListView) getActivity().findViewById(R.id.explorePlacesListView);
            getPlaces();

            PlacesAdapter placesAdapter = new PlacesAdapter(getActivity(),R.layout.user_list_item, places);
            listView.setAdapter(placesAdapter);
        }

        public void getPlaces(){

             URL yahoo;
             String key,latitude,longitude;
             key = "AIzaSyAZgD01sj3jssaYCmkLL8c7Z4qPTEdt6xU";
             latitude = "37.77264";
             longitude ="-122.409915";
            try {

                yahoo = new URL("https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&sensor=false&key=AIzaSyB2SGEmOLDGB_f0bp1PGTjQqTw2VuDcaM8");
                URLConnection yc = yahoo.openConnection();
                BufferedReader in = new BufferedReader(
                                        new InputStreamReader(
                                        yc.getInputStream()));
                String inputLine;
                String jsonLine = new String();
                while ((inputLine = in.readLine()) != null) {
                        Log.d("inputLine",inputLine);

                        jsonLine = jsonLine + inputLine;
            }
                in.close();
                Object jsonResponse = parseResponse(jsonLine);
                parseJSONPlaces((JSONObject)jsonResponse);
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

        protected Object parseResponse(String responseBody) throws JSONException {
            return new JSONTokener(responseBody).nextValue();
        }

     private void parseJSONPlaces(JSONObject json){

         try {
        JSONArray jsonArray =   json.getJSONArray("results");

        for (int j = 0; j < json.length(); j++) {

            Place place = new Place();

            place.name = jsonArray.getJSONObject(j).getString("name");
            place.icon = jsonArray.getJSONObject(j).getString("icon");
           // JSONObject locationObject = jsonArray.getJSONObject(j).getJSONObject("location");
           // place.latitude = locationObject.getString("latitude");
           // place.longitude = locationObject.getString("longitude");
            Log.d("name",place.name);

            places.add(place);
        }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
          if(json.optJSONObject("results") != null){

            }

     } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:15:22.790

您的代码中有一些东西对我来说看起来有点奇怪。

您永远不会调用`setListAdapter()`将适配器绑定到 ListFragment 的内部 ListView 的方法。相反，您正在获取另一个 ListView 并将适配器设置为那个。这可能就是列表中没有显示数据的原因，而您将看到一个进度指示器。

我不确定我是否理解您的第二个问题，但您应该将 UI 更新放在 AsychTask 的 onPostExecute 方法中。

# entity-framework - EntityFramework 4.1 GetValidationErrors 内部异常

> ID：11795977
> 
> 赞同：0
> 
> 时间：2012-08-03T12:43:20.867
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

使用 Entity Framework Code First (4.1) 调用 System.Data.Entity.DbContext.GetValidationErrors() 时出现以下异常

```
"An item with the same key has already been added." 
```

堆栈跟踪如下：

```
at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
at System.Data.Metadata.Edm.ObjectItemConventionAssemblyLoader.TryCreateType(Type type, StructuralType cspaceType, EdmType& newOSpaceType)
at System.Data.Metadata.Edm.ObjectItemConventionAssemblyLoader.LoadTypesFromAssembly()
at System.Data.Metadata.Edm.ObjectItemAssemblyLoader.Load()
at System.Data.Metadata.Edm.ObjectItemAssemblyLoader.LoadAssemblies(IEnumerable`1 assemblies, ObjectItemLoadingSessionData sessionData)
at System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boolean loadReferencedAssemblies, ObjectItemLoadingSessionData loadingData)
at System.Data.Metadata.Edm.AssemblyCache.LoadAssembly(Assembly assembly, Boolean loadReferencedAssemblies, KnownAssembliesSet knownAssemblies, EdmItemCollection edmItemCollection, Action`1 logLoadMessage, Object& loaderCookie, Dictionary`2& typesInLoading, List`1& errors)
at System.Data.Metadata.Edm.ObjectItemCollection.LoadAssemblyFromCache(ObjectItemCollection objectItemCollection, Assembly assembly, Boolean loadReferencedAssemblies, EdmItemCollection edmItemCollection, Action`1 logLoadMessage)
at System.Data.Metadata.Edm.ObjectItemCollection.ExplicitLoadFromAssembly(Assembly assembly, EdmItemCollection edmItemCollection, Action`1 logLoadMessage)
at System.Data.Metadata.Edm.MetadataWorkspace.ExplicitLoadFromAssembly(Assembly assembly, ObjectItemCollection collection, Action`1 logLoadMessage)
at System.Data.Entity.Infrastructure.DbCompiledModel.CreateObjectContext[TContext](DbConnection existingConnection)
at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
at System.Data.Entity.Internal.LazyInternalContext.get_ObjectContext()
at System.Data.Entity.Internal.InternalContext.DetectChanges(Boolean force)
at System.Data.Entity.Internal.InternalContext.GetStateEntries(Func`2 predicate)
at System.Data.Entity.DbContext.GetValidationErrors() 
```

不幸的是，我无法确定问题出在哪里，也无法确定是哪个 poco 实体造成的。

有人有线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:49:57.920

是的，这是一个有趣的问题，这里的问题来自尝试重新附加一个已经附加到上下文的实体。这可能来自逻辑错误，或者您可能在未清除附加对象的情况下重用上下文。数据库上有一个本地集合，您可以使用它来查看当前附加到上下文的项目。

```
ctx.YourEntityCollection.Local 
```

# iphone - 优化tableView滚动

> ID：11795979
> 
> 赞同：0
> 
> 时间：2012-08-03T12:43:36.643
> 
> 标签：iphone, uitableview

如果人多的话，我的`tableView`卷轴会滞后。最多 20 个单元格运行良好，但高于 - 它在滚动时开始滞后。请建议一个具有更好滚动结果的实现。这是我的做法：

我已经定义了一个自定义`UITableViewCell`类。

该单元格有 4 个标签和一个`imageView`（每个出口是一个综合属性）： ![在此处输入图像描述](../Images/ae5428aaf79f0d0b90f73511dde4b248.png)

`tableView`我在我的 中放置了一个`viewController`，并像这样填充它：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CustomCell";

    MyCustomCell *cell = (MyCustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"MyCustomCell" owner:self options:nil];
        for (id currentObject in topLevelObjects)
            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (MyCustomCell *) currentObject;
                break;
            }
    }
    [cell.label_descr setText:@"bla-bla-bla"];
    [cell.label_date setText:@"bla-bla-bla"];
    [cell.label_time setText:@"bla-bla-bla"];
    [cell.label_numeric setText:@"bla-bla-bla"];
    [cell.image_view setImage:[UIImage imageWithContentsOfFile:@"bla-bla-bla"]];

    return cell;
} 
```

如您所见，每个单元格中的文本数量非常少，并且用于该图像的图像`UIImageView`约为 25x25 .png 文件。

我`tableView`的应该有 300 多个单元格（不要怪我，我有一个“来自地狱的客户”）。

请提出一种使`tableView`滚动更流畅，没有（很多）滞后的方法。或者另一种方式来向我的“来自地狱”的客户展示那些“该死的超过 300 个细胞”。

提前300谢谢！

PS：对不起，如果重复，但找​​到的解决方案根本没有帮助。

**编辑：**

关于用于 imageView 的图像：

我只使用 2 个不同的图像：

1.  一个“复选标记”——交易完成
2.  和“待处理” - 正在进行的交易

也许我使用在我的 tableViewCell xib 中定义 2 个 imageView 插座，并且只选择所需的 imageView，而不是每次都设置所需的图像？

**找到解决方案**，感谢大家，尤其是 iNoob 和 max_。

1.  在tableViewCell 的xib 中，我将“checkMark”设置为imageView 的默认图像。
2.  在定义单元格的值时`cellForRowAtIndexPath`，只有在需要时，我才会说：

    `if_I_should_present_a_pending_image:`

    ```
     [cell setPending]; 
    ```

用“待定”图像替换“checkMark”（tableViewCell 类中定义的方法）：

```
- (void)setPending{
    self.image_view.animationImages = [NSArray arrayWithObjects:    
                                    [UIImage imageNamed:@"pending_1.png"],
                                    [UIImage imageNamed:@"pending_2.png"],
                                    [UIImage imageNamed:@"pending_3.png"],
                                    [UIImage imageNamed:@"pending_4.png"],
                                    nil];
    self.image_view.animationDuration = 2.0;
    self.image_view.animationRepeatCount = 0;
    [self.image_view startAnimating];
} 
```

l

在那之后，桌子像魅力一样滚动。再次感谢大家。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:50:08.497

1.  不要遍历所有子视图：`cell = [topLevelObjects objectAtIndex:0];`
2.  使用 gcd 在后台加载图像，并将它们存储在 NSDictionary 中以便于访问：

伪代码：

```
If caches dict contains an object for the URL you want to load
    Retrieve that image from the dict
    Set it as the image
Else
    Load the image using dispatch_async()
    Add it to the dict 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:51:45.063

我发现这篇[文章](http://cocoawithlove.com/2010/03/load-from-nib-or-construct-views-in.html)建议以编程方式创建单元而不是使用 nib 文件可以快 5-10%。我不知道这是否属实，因此请持保留态度，但可能值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T12:52:24.813

用以下代码替换您的代码并尝试一下。

对于以下代码：

1）在您的控制器中获取您的 UITableViewCell 的 IBOutlet 。对于下面的代码，它是`myCustomTableViewCell`。

```
 MyCustomCell *customCell = (MyCustomCell *)[tableView dequeueReusableCellWithIdentifier:@"MyCustomCell"];
 if(customCell == nil) {
     [[NSBundle mainBundle] loadNibNamed:@"MyCustomCell" owner:self options:nil];
     customCell = myCustomTableViewCell;
  } 
```

希望它会奏效。

# web-services - 仅使用 Twitterizer 获取新的推文计数

> ID：11795982
> 
> 赞同：0
> 
> 时间：2012-08-03T12:43:48.093
> 
> 标签：web-services, twitter, twitterizer

首先让我非常感谢 Twitterizer，它让我的开发工作变得更加轻松。我一定会捐款的。在我的应用程序中，我使用网络服务加载推文，并且由于我跟踪最后一条推文，我希望能够获得新推文的数量。

除了使用 TwitterTimeline.HomeTimeline() 之外，还有更快的方法吗？既然我假设这种方法会获取所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:32:03.087

我最终计算了客户端的新推文并隐藏了内容。我意识到，由于我正在加载内容，因此无需稍后再次重新获取它，因此我将它们全部隐藏在 div 中，直到用户展开它。

# c# - AForge 傅里叶变换

> ID：11795985
> 
> 赞同：4
> 
> 时间：2012-08-03T12:43:58.827
> 
> 标签：c#, fft, aforge

如何使用此方法：

```
public static void DFT (Complex[] data, Direction direction) 
```

如果我的输入数组是`short[] samples`？我可以很容易地转换`short`为`double`将此值放入`Complex`结构中。但是这个结构有两个字段`Im`和`Re`。那么，这些值之一将是我的样本值，对吧？第二个值是多少？样品编号？

请帮我解决这个问题，因为我今天不会睡觉。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T12:55:54.360

您应该使用示例数据填充`real`每个值的部分`Complex`，即使用 LINQ：

```
complexSamples = samples.Select(sample => new Complex((double)sample, 0.0)).ToArray(); 
```

执行完之后，`DFT`您的`complexSamples`将包含非零虚部（`Im`非零）。然后，您是否需要访问这些虚构的组件取决于您的后续操作。

也许在维基百科上阅读更多关于[DFT](http://en.wikipedia.org/wiki/Discrete_Fourier_transform)和[复数](http://en.wikipedia.org/wiki/Complex_number)的内容也是一个好主意......

# php - 请解释 function($variable) 和 function() 之间的区别

> ID：11795991
> 
> 赞同：-1
> 
> 时间：2012-08-03T12:44:20.837
> 
> 标签：php

我有两个脚本：第一个脚本通过套接字接收数据并用它做一些事情，第二个脚本包含一个由第一个脚本调用的函数。该函数碰巧使用了在第一个脚本中创建的变量。

从第一个脚本调用函数时，我应该像这样运行它：

```
include 'secondscript.php';

//socket stuff, create $variable from input received

functionName() 
```

或者像这样：

```
include 'secondscript.php';

//socket stuff, create $variable from input received

functionName($variable) 
```

我知道这是一个“全球”声明，但我无法理解它的重要性。当然，我想知道这是否是导致某些东西不起作用的原因。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T12:45:48.433

您确实需要阅读[函数](http://php.net/manual/en/language.functions.php)的基础知识。

```
functionName(); 
```

意味着您正在请求一个函数并且没有向它传递任何信息。

```
functionName($someVar); 
```

表示您正在向它发送`$someVar`变量中的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T13:41:39.260

扩展上述内容：

区别只是传递的参数。您可以通过函数内的声明访问变量`global`，但就个人而言，我认为这是一个坏主意。

您将始终想知道向函数传递和从函数传递的参数和类型。至少，如果您不想在函数定义中定义参数，但仍将它们作为参数传递给函数调用，则可以通过以下方式获取传递的参数`func_get_args()`：

```
// definition
function funca(Array $arr){
    // This tells funca to only allow Arrays as the arg type
}

// definition
function funb(){
    $args = func_get_args();
    // You dont define args, but can still pull them.
}
//call
funcb('a', 'b'); 
```

# python - Pandas：有效拆分条目

> ID：11795992
> 
> 赞同：2
> 
> 时间：2012-08-03T12:44:23.090
> 
> 标签：python, numpy, pandas

我有一个`dataframe`带有这样列的熊猫：

event_id, obj_0_type, obj_0_foo, obj_0_bar, obj_1_type, obj_1_foo, obj_1_bar, obj_n_type, obj_n_foo, obj_n_bar, ....

例如：

```
col_idx = ['event_id']
[col_idx.extend(('obj_%d_id' %d, 'obj_%d_foo' %d, 'obj_%d_bar' %d)) for d in range(5)]
event_id = np.array(range(0,5))
data = np.random.rand(15,5)
data = np.vstack((event_id, data))
df = DataFrame(data.T, index = range(5), columns = col_idx) 
```

我想拆分数据框的每一行，以便每个对象都有一个条目，如下所示：

event_id，obj_type，obj_foo，obj_bar

其中 event_id 将在给定事件的所有对象之间共享。

有很多非常慢的方法（迭代数据帧行并创建新的系列对象），但这些方法非常缓慢并且显然不符合 Python 标准。有没有我想念的更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:54:05.810

根据freenode上#pydata中一些人的一些建议，这就是我想出的：

```
data = []
for d in range(5):
    temp = df.ix[:, ['event_id', 'obj_%d_id' % d, 'obj_%d_foo' % d, 'obj_%d_bar' % d]]
    temp.columns = ['event_id', 'obj_id', 'obj_foo', 'obj_bar']
    # Giving columns unique names.
    temp.index = temp['event_id']*10 + d
    # Creating a unique index.
    data.append(temp)

concat(data) 
```

这有效并且相当快！

# java - 意图构造函数参数未定义

> ID：11795993
> 
> 赞同：1
> 
> 时间：2012-08-03T12:44:25.670
> 
> 标签：java, android

我想开始一个活动，所以我选择了这种上课方式。我知道我可以通过直接在意图构造函数中传递 ACTION NAME 来轻松做到这一点，但我正在学习 android，所以我尝试学习新方法。我在其他类中使用相同的代码开始了另一个活动，它在那里工作，但在这里它给出了以下错误。我认为这与 THREAD 类有关。

错误是：

```
The constructor Intent(new Thread(){}, Class) is undefined. 
```

我该如何解决这个问题？这是代码：

```
package com.umer.practice2;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class SplashScreen extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splashscreen);

    Thread timer= new Thread()
    {
        public void run()
        {
        try
        {
            sleep(5000);
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            Class ourclass = Class.forName("com.umer.practice2.StartingPoint");
            Intent myintent= new Intent(this,ourclass); // error
            startActivity(myintent);
        }
        }
    };
    timer.start();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();
}

} 
```

这是导致强制关闭错误的类活动的布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="hint"
        android:id="@+id/fdisp" 
        />
    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="How many times you eat in a day"
        android:gravity="center"
        android:id="@+id/but3" 
        />

</LinearLayout> 
```

这是类本身的代码

```
 package com.umer.practice2;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.TextView;

    public class MyClass extends Activity{

    Button b3;
    TextView disp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
         b3= (Button) findViewById(R.id.but3);
         disp= (TextView) findViewById(R.id.fdisp);

         b3.setOnClickListener(new View.OnClickListener() {

             @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                    disp.setText("It depends ");
            }
        });
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:47:06.907

只需将意图创建替换为：

```
Intent myintent= new Intent(SplashScreen.this, StartingPoint.class); 
```

否则，`this`指的是封闭`Thread`类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T10:33:51.497

你可以打电话给如下

```
startActivity(new Intent(SplashScreen.class, StartingPoint.class); 
```

它会起作用的。尝试一下。

# asp.net - 无法加载视图状态。正在加载视图状态的控件树

> ID：11795994
> 
> 赞同：17
> 
> 时间：2012-08-03T12:44:27.173
> 
> 标签：asp.net, .net, umbraco, .net-4.5, asp.net-4.5

在 UserControl 内托管的 ASP.NET 表单上进行 HTTP POST 后，我收到以下错误消息：

> 无法加载视图状态。正在加载视图状态的控制树必须与在先前请求期间用于保存视图状态的控制树匹配。例如，当动态添加控件时，回发期间添加的控件必须与初始请求期间添加的控件的类型和位置相匹配。

这是附加信息：

*   我正在运行 .NET 4.5 RC
*   这是一个基于 Umbraco 4.7 的网站
*   在我的本地开发机器上，表单*完美运行*
*   此错误仅发生在具有 .NET 4.5（仅）、MSSQL 2012 Express、IIS 7.5、Windows 7 的登台服务器上（我知道，它还不是真正的服务器，也许有一天......）
*   服务器不是网络农场（或花园，但应该无关紧要）的一部分
*   用户控件*确实*动态呈现控件

我已经应用了所有最新的服务包。我现在已经没有想法了！我什至重新启动了它，并在服务器上进行了一场涉及歌曲和特殊舞蹈的丰富表演，但无济于事。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-03T12:52:18.870

当您动态添加控件时，重要的是要添加它们的事件。

如果您在加载后发生的事件上添加了控件，它们将成为您发送给客户端的视图状态的一部分。

`LoadViewState`在调用之前，您必须再次添加这些控件。

如果您遇到添加哪些控件的决定本身存储在控件`ViewState`的值或控件的值中的情况，那么请记住，即使在`ViewState`加载之前，此数据在`Request.Params`

参考[asp.net页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

![页面生命周期](../Images/997803071bd7547c946b5850b4417f0e.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-17T06:02:21.613

我刚刚添加`EnableViewState="false"`到我的页面占位符并且它消失了。希望它也适用于你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-15T07:21:15.767

此错误主要发生在视图状态更改期间：从一个模板到另一个模板，例如在 ASP .net（所有框架）中的表单视图、列表视图、详细视图、网格视图等控件中的项目模板、编辑项目模板；

虽然从控制状态更改说 `Item Template ---> Edit Template` 以下内容将要改变

1) 控件会改变（它的 ID 和状态）

2) 它的位置会改变。

如果发生任何回发，则转换视图时，您将收到错误消息

> 无法加载视图状态。正在加载视图状态的控制树....

如果您使用单独的控件进行数据绑定，例如 (button,link_button_Image_button 事件)，您将收到此错误报告！

为避免此错误 >>>**一旦状态从一个模板更改为方法内的另一个模板，您将调用数据源绑定（不要在单击或任何后备事件期间调用）。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T15:41:11.583

好的，所以答案就是字面意思：“使用与上一个相同的软件设置一个新服务器，然后重试”，它现在可以工作了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-17T14:34:37.610

我添加了与 id 具有相同值的“name”属性，然后这个问题就消失了。

```
<input type="button" id="extractBomInfoBtn" name="extractBomInfoBtn" value="Extract" class="button   textonly" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-02T01:39:25.300

我遇到过同样的问题。这个问题在客户端，但在我的本地系统中没有发生。经过数小时的谷歌搜索，我已将 EnableViewState="false" 写入包含所有动态控件的 aspx 页面中的表标记，然后我删除了所有 viewstate 变量，而是在 aspx 页面中创建了一些隐藏的文本框并将 DB 值接受到它们在代码后面并在我的代码中使用它们。然后它解决了我的问题。但是，我仍然无法弄清楚到底是什么问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-10T21:01:13.780

在我的例子中，我在页面加载时操作了**asp:Literal的****.Text**属性，这导致了问题。在所有其他情况下，这从未导致我出现视图状态错误，但在这种特殊情况下，我将**.Text**值更改为 html 元素。

 ****以下导致错误：

```
<asp:Literal ID="SvgIcon" runat="server" /> 
```

* * *

```
SvgIcon.Text = "<svg version=\"1.1\" id=\"Layer_1\" bla bla />" 
```

* * *

我能够通过将**EnableViewState="false"**显式添加到控件来解决错误：

```
<asp:Literal ID="SvgIcon" runat="server" EnableViewState="false" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-19T08:08:25.333

检查您是否在页面加载事件中直接具有控件的绑定方法。这可能会导致此问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-18T12:17:21.440

您可以为每个 UserControls 添加新的 PlaceHolder

或者

`enableviewstate=false`如果不需要视图状态，可以在控件上设置

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-06-12T08:08:40.257

在我的情况下，我有一个带有 (OnPageIndexChanging) 事件的网格视图，当我点击一个页面时，除非我点击它两次，否则什么都不会发生！

在设置新页面索引之前，我正在刷新数据源。

* * *

> 这就是我做错了什么

```
grd.DataSource = data;
grd.DataBind();
grd.PageIndex = e.NewPageIndex; 
```

* * *

> 这是正确的方法

```
grd.PageIndex = e.NewPageIndex;
grd.DataSource = data;
grd.DataBind(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-05T12:18:22.557

如果您`SaveViewState`在控件中覆盖但不覆盖，则可能会发生这种情况`LoadViewState`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-14T08:35:46.353

所以我实际上最终发现我绑定的实体列表与 ViewState 中的控件的顺序不同！我仍在通过更清洁的解决方案工作，但我的代码正在使用 ViewStateEnabled = true，方法是让重建我的动态控件（从 Page_Load 调用）的方法在 !IsPostBack 中以不同的方式执行。

最终，我可能需要为我的嵌套动态控件修复我的排序算法，但我只想说：如果您使用与我相同的模式，使用 List 生成/绑定到动态控件，并且该顺序是流动或变化，尝试比较 Request.Params 以找到与您的控制层次结构相关的键，并查看它们是否与您的列表的顺序匹配。这解决了我的问题。感谢@nunespascal！

简而言之，我在 AjaxToolkit 选项卡控件中动态生成除了一个选项卡之外的所有选项卡，然后用几层深占位符和常规控件（文本框、下拉列表等）填充它，这就是为什么获取所有内容的顺序很复杂正确的。****