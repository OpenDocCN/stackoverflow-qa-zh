# StackOverflow 问答 11584000-11584999

# c# - Task.ContinueWith() 需要帮助

> ID：11584002
> 
> 赞同：0
> 
> 时间：2012-07-20T17:10:42.760
> 
> 标签：c#, .net, multithreading

也许我错过了一些琐碎的事情（如果是这种情况，我会删除帖子）。有人可以告诉我这个 .ContinueWith() 我做错了什么吗？我没有看到屏幕上打印的结果。

```
public static void Main()
{
    Task<int> t = new Task<int>(() => { return Sum(5); });
    t.Start();
    t.Wait();
    t.ContinueWith((task) => { Console.WriteLine(task.Result); });
    //Console.WriteLine(t.Result); //this works

    Console.Read();
}

public static int Sum(int n)
{
    return 50;//stub result
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:49:52.880

在继续运行之前，您的应用程序可能正在退出。如果您在 Main 的末尾放置一个断点，那么您将在该断点处停止所有线程，并且如果继续尚未运行，则在您退出之前不允许运行（并且可能会丢失输出）。

尝试以下操作，看看会发生什么：

```
public static void Main()
        {
            Task<int> t = new Task<int>(() => { return Sum(5); });
            t.Start();
            t.Wait();
            t.ContinueWith((task) => { Console.WriteLine(task.Result); });
            //Console.WriteLine(t.Result); //this works
            Console.ReadLine();
        } 
```

# outlook - Exchange Web 服务 - 确认会议请求响应

> ID：11584005
> 
> 赞同：4
> 
> 时间：2012-07-20T17:10:49.390
> 
> 标签：outlook, exchangewebservices, ews-managed-api

我正在开发一个应用程序来处理来自 Exchange Web 服务的流式通知并根据这些通知进行数据库更新。我正在监视一些日历文件夹并跟踪约会以及与会者的更改。这一切都很好，除了一件。

当有人接受会议请求时，该接受将通过电子邮件发送。但是，日历项目仅在用户在 Outlook 中打开电子邮件后才会更新，这可能会导致发生一些幕后同步。如果用户没有打开“接受”或“拒绝”电子邮件，则约会不会得到更新。无论我是通过 Outlook 还是通过 EWS 访问约会，这都是正确的。仅通过 EWS 将电子邮件标记为已读不会触发同步。有谁知道一种方法可以通过 EWS 在收件箱和日历之间进行同步，而无需用户触摸 Outlook？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:08:22.100

在这种情况下，问题原来是 Exchange 邮箱本身没有设置为自动确认对会议请求的响应。Exchange 中有一个邮箱级别设置可控制此行为。如果未设置，则无法通过 EWS 强制 Exchange 确认响应。

# mysql - SQL 更新查询中的语法错误

> ID：11584006
> 
> 赞同：0
> 
> 时间：2012-07-20T17:10:53.740
> 
> 标签：mysql, vb.net

我正在尝试更新 MSAccess 中的表，其字段的数据类型为“文本”。但是当我运行代码时，它在 UPDATE 语句中显示 sysntax 错误。这是我的vb代码：

将用户调暗为字符串 调暗密码为字符串 调暗 dtT 为新数据表

```
 Dim cmd As New OleDb.OleDbCommand

    user = Me.TextBox1.Text
    password = Me.TextBox2.Text

    If Not cnn.State = ConnectionState.Open Then

        cnn.Open()
    End If
    Try
        Dim daA As New OleDb.OleDbDataAdapter("SELECT *FROM adlogin WHERE password='" & Me.TextBox2.Text & "'", cnn)

        ' MsgBox("STUDENT SAVED!!", MsgBoxStyle.MsgBoxRight)

        daA.Fill(dtT)
        Me.DG1.DataSource = dtT

        'password = DG1.Item(0, 0).Value
        'ss1 = DG1.Item(1, 0).Value

        If user = DG1.Item(1, 0).Value And password = DG1.Item(0, 0).Value Then

            cmd.Connection = cnn
            cmd.CommandText = "UPDATE adlogin SET password ='" & Me.TextBox3.Text & "' WHERE user =" & Me.TextBox1.Text
            System.Console.WriteLine(cmd.CommandText)

            Dim result = MsgBox("Change Administrator password!!! Are you sure?", MsgBoxStyle.YesNo)

            If result = DialogResult.Yes Then
                cmd.ExecuteNonQuery()
                MsgBox("PassWord Changed", MsgBoxStyle.MsgBoxRight)
                Panel1.Hide()
            End If

        Else
            MsgBox("INVALID PASSWORD", MsgBoxStyle.Critical)

        End If
        cnn.Close()

    Catch ex As Exception
        MsgBox("INVALID PASSWORD " & ex.Message, MsgBoxStyle.Critical)
    End Try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:12:33.747

切勿使用字符串连接来创建 SQL 命令。始终使用 PARAMETERS
这将解决两个问题： 字符串中的单引号，但最重要的是，避免[SQL 注入攻击](http://xkcd.com/327/)

```
Dim cmd As New OleDb.OleDbCommand 
user = Me.TextBox1.Text 
password = Me.TextBox2.Text 

If Not cnn.State = ConnectionState.Open Then 
    cnn.Open() 
End If 

Try 
    Dim daA As New OleDb.OleDbDataAdapter("SELECT * FROM adlogin WHERE `password` =?", cnn) 
    daA.SelectCommand.Parameters.AddWithValue("@pass", password);
    daA.Fill(dtT) 
    Me.DG1.DataSource = dtT 

    If user = DG1.Item(1, 0).Value And password = DG1.Item(0, 0).Value Then 
        cmd.Connection = cnn 
        cmd.CommandText = "UPDATE adlogin SET `password` = ? WHERE `user` = ?" 
        Dim result = MsgBox("Change Administrator password!!! Are you sure?", MsgBoxStyle.YesNo) 
        If result = DialogResult.Yes Then 
            cmd.Parameters.AddWithValue("@pass", Me.TextBox3.Text)
            cmd.Parameters.AddWithValue("@user", user)
            cmd.ExecuteNonQuery() 
            MsgBox("PassWord Changed", MsgBoxStyle.MsgBoxRight) 
            Panel1.Hide() 
        End If 
    Else 
        MsgBox("INVALID PASSWORD", MsgBoxStyle.Critical) 
    End If 
    cnn.Close() 
Catch ex As Exception 
    MsgBox("INVALID PASSWORD " & ex.Message, MsgBoxStyle.Critical) 
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:12:11.650

您需要在此行的 * 之后放置一个空格：

`Dim daA As New OleDb.OleDbDataAdapter("SELECT *FROM adlogin WHERE password='" & Me.TextBox2.Text & "'", cnn)`

至

`Dim daA As New OleDb.OleDbDataAdapter("SELECT * FROM adlogin WHERE password='" & Me.TextBox2.Text & "'", cnn)`

您还需要将变量放在 '

`cmd.CommandText = "UPDATE adlogin SET password ='" & Me.TextBox3.Text & "' WHERE user =" & Me.TextBox1.Text`

至

`cmd.CommandText = "UPDATE adlogin SET password ='" & Me.TextBox3.Text & "' WHERE user ='" & Me.TextBox1.Text & "'"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:12:34.023

几件事：

```
SELECT *FROM adlogin etc...
        ^---no space

UPDATE adlogin [..snip...] WHERE user =" & Me.TextBox1.Text
                                       ^---- is "user" a numeric field? needs quotes if not. 
```

# android - 我可以手动将库添加到 libs/armeabi-v7a 吗？

> ID：11584007
> 
> 赞同：1
> 
> 时间：2012-07-20T17:11:03.120
> 
> 标签：android, android-ndk

我有一个库 .so 文件，我想将它打包在 libs/armeabi-v7a 中。

我知道这样做的正确方法是在 Android.mk 中将其定义为 PREBUILT_SHARED_LIBRARY，并让 ndk-build 自动选择它。通常这是金色的。

但是，我的库有一个版本号（我无法修改），即 libbubba.so.0.5.4。而且ndk-build会失败，说库需要以.so结尾。

所以我正在寻找一种方法来手动将此文件添加到包中。如果我只是手动将它放在 libs/armeabi-v7a 目录中，则在构建时它不会被打包。

有人做过吗？谢谢。

# c - 如何在 C 代码中模拟动态显示

> ID：11584011
> 
> 赞同：0
> 
> 时间：2012-07-20T17:11:23.523
> 
> 标签：c, systems-programming

我编写了一个代码，可以将任何输入整数转换为等效的 LED 显示器。我想将我的系统时间作为输入传递给这个函数并获得一个 LED 显示屏。

示例：考虑这两个输入：

```
(system time = 10:12:00)
(system time = 11:10:04) 
```

问题：

屏幕输出应该用“11:10:04”覆盖“10:12:00”的先前输出，以便应用程序用户应该获得“就地”动态显示的感觉。

请求您提供一些关于如何在“C”代码中实现这一点的提示。（我的平台是 GNU/Linux）

谢谢。

此致，

桑迪普·辛格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:15:15.227

通常的方式是这样的：

```
printf("\r%s", time_string); 
```

至于以字符串形式获取时间，您可以使用 检索时间`time()`，使用 转换为分解为字段的本地时间[`localtime`](http://linux.die.net/man/3/localtime)，然后使用 将您选择的格式放入字符串中[`strftime`](http://linux.die.net/man/3/strftime)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:14:34.057

写下你的字符串，然后根据需要尽可能多的退格（'\b'）来擦除这个字符串，然后再写另一个。

# php - Nginx/php-fpm umask 设置

> ID：11584021
> 
> 赞同：14
> 
> 时间：2012-07-20T17:12:15.207
> 
> 标签：php, ubuntu, nginx, permissions

当我使用 apache2 服务器时，`umask`在 /etc/apache2/envvars 中设置默认值`0002`来解决我所有的权限问题。现在我正在尝试设置 nginx/php-fpm，当使用不正确的权限创建文件时，我遇到了同样的问题。

`umask`nginx或php-fpm中有设置吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2018-11-26T10:20:09.880

感谢[Blossoming_Flower 的回答](https://stackoverflow.com/a/43130436/623519)和[unix.stackechange 上](https://unix.stackexchange.com/questions/398540/how-to-override-systemd-unit-file-settings)的回答...

最好的方法似乎就像 Blossoming _Flower 所说的那样，但是使用**覆盖**文件而不是编辑可能被您的发行版重新安装/升级替换的系统文件。

要做到这一点（我在 php 7.0 上，但要根据你的版本进行调整）

```
systemctl edit php7.0-fpm.service 
```

它将自动在`/etc/systemd/system/php7.0-fpm.service.d/override.conf`.

您可以将 Blossoming_Flower 的建议内容单独放在该文件中。Systemd 然后会用这个覆盖发行版的设置，实际上是添加一个 umask 设置。

然后就`systemctl daemon-reload && systemctl restart php7.0-fpm`完成了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-31T00:22:48.593

取自另一个答案的链接问题：

如果您使用 systemd [即 Ubuntu 16.04]，则编辑**/lib/systemd/system/php5-fpm.service**
并编辑章节“服务”：

```
[Service]
UMask=0002 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-23T19:54:35.290

我设法通过添加( **not** )`umask 0002`为自己解决了这个问题。有关说明，请参阅[如何在 ubuntu 上跟踪 php5-fpm umask 设置的来源](https://stackoverflow.com/questions/21248904)。`/etc/init/php-fpm.conf` **`/etc/init.d/php-fpm`**

# java - JPQL 连接（休眠）

> ID：11584023
> 
> 赞同：0
> 
> 时间：2012-07-20T17:12:22.073
> 
> 标签：java, hibernate, jpa, jpql

我`JPA (Hibernate)`在我的项目中使用，`JOIN`如果不明确设置`Entities`.

我记得在`TOPLINK`.

**询问：**

**示例 1：**

```
SELECT a FROM 
EntityA a
INNER JOIN EntityB b on b.col1=a.col1
INNER JOIN EntityC c on c.col1=b.col1
LEFT JOIN EntityC c on c.col1=a.col1 
```

**错误：**

```
Unexpected token "on" 
```

**示例 2：**

```
SELECT a FROM 
EntityA a
INNER JOIN EntityB b  
INNER JOIN EntityC c 
LEFT JOIN EntityC c
WHERE b.col1=a.col1 AND c.col1=b.col1 AND c.col1=a.col1 
```

**错误：**

```
 ERROR o.hibernate.impl.SessionFactoryImpl - Error in named query: 

        org.hibernate.hql.ast.QuerySyntaxException: Path expected for join! 
    [SELECT **MY QUERY HERE**]
            at org.hibernate.hql.ast.QuerySyntaxException.convert 
(QuerySyntaxException.java:54)
     ~[hibernate3.jar:na]

        ERROR org.hibernate.hql.PARSER -  Path expected for join!
        ERROR org.hibernate.hql.PARSER -  Invalid path: 'b.col1'
        ERROR org.hibernate.hql.PARSER -  Invalid path: 'c.col1' 
```

请不要过多关注实体和列名称，因为它们不是实际名称：）

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T11:14:26.273

如果模型中没有关联，则无法使用普通连接。如果确实存在关联，则将其也添加到模型中是有意义的。

如果这不是一个选项，您可以在 HQL 中进行交叉连接（这会影响选择列表中的值）：

```
FROM A as a, B as b WHERE b.col1=a.col1 
```

可以从[这里](http://arnosoftwaredev.blogspot.de/2010/10/hibernate-joins-without-associations.html)找到其他方法。

# php - 如何将getrowid更改为id

> ID：11584024
> 
> 赞同：-1
> 
> 时间：2012-07-20T17:12:21.310
> 
> 标签：php, javascript, sql, mysqli, jqxgrid

谁能告诉我如何更改 getrowid 以获取所选 id 的值，我需要获取所选 id 的值以传递给 sql。

```
 <!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="../jqwidgets/styles/jqx.base.css" type="text/css" />
    <link rel="stylesheet" href="../jqwidgets/styles/jqx.classic.css" type="text/css" />
    <script type="text/javascript" src="../jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxcore.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxbuttons.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxscrollbar.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxmenu.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxcheckbox.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxlistbox.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxdropdownlist.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxgrid.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxdata.js"></script>
    <script type="text/javascript" src="../jqwidgets/jqxgrid.selection.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            // prepare the data
            var data = {};
            var theme = 'classic';
            var ide= new Array();
           var namee= new Array();
            var emaile= new Array();
            var subjecte= new Array();
            var confirmcodee= new Array();
            var usernamee= new Array();
            var passworde= new Array();

            var generaterow = function () {
                var row = {};
                var firtnameindex = ide.length-1;
                row["id"] = ide[firtnameindex];
                row["name"] = namee[firtnameindex];
                row["email"] = emaile[firtnameindex];
                row["subject"] = subjecte[firtnameindex];
                row["confirmcode"] = confirmcodee[firtnameindex];
                row["username"] = usernamee[firtnameindex];
                row["password"] = passworde[firtnameindex];
                return row;

            }

            var source =
            {   

                datatype: "json",
                datafields: [
                     { name: 'id' },
                     { name: 'name' },
                     { name: 'email' },
                     { name: 'subject' },
                     { name: 'confirmcode' },
                     { name: 'username' },
                     { name: 'password' }
                ],

                ide: 'id',
                url: 'data.php',
                addrow: function (rowid, rowdata) {
                    // synchronize with the server - send insert command
                    var data = "insert=true&" + $.param(rowdata);
                    $.ajax({
                        dataType: 'json',
                        url: 'data.php',
                        data: data,
                        success: function (data, status, xhr) {
                            // insert command is executed.
                        }
                    });
                },
                deleterow: function (rowdata) {
                    // synchronize with the server - send delete command
                    var data = "delete=true&id=" + rowdata;
                    $.ajax({
                        dataType: 'json',
                        url: 'data.php',
                        data: data,
                        success: function (data, status, xhr) {
                            // delete command is executed.
                        }
                    });
                },
                updaterow: function (rowid, rowdata) {
                    // synchronize with the server - send update command
                    var data = "update=true&" + $.param(rowdata);
                    $.ajax({
                        dataType: 'json',
                        url: 'data.php',
                        data: data,
                        success: function (data, status, xhr) {
                            // update command is executed.
                        }
                    });
                }
            };
            // initialize jqxGrid
            $("#jqxgrid").jqxGrid(
            {
                width: 500,
                height: 350,
                source: source,
                theme: theme,
                columns: [
                      { text: 'id', datafield: 'id', width: 100 },
                      { text: 'name', datafield: 'name', width: 100 },
                      { text: 'email', datafield: 'email', width: 100 },
                      { text: 'subject', datafield: 'subject', width: 180 },
                      { text: 'confirmcode', datafield: 'confirmcode', width: 180 },
                      { text: 'username', datafield: 'username', width: 100 },
                      { text: 'password', datafield: 'password', width: 140 }
                  ]
            });
            $("#addrowbutton").jqxButton({ theme: theme });
            $("#deleterowbutton").jqxButton({ theme: theme });
            $("#updaterowbutton").jqxButton({ theme: theme });
            // update row.
            $("#updaterowbutton").bind('click', function () {
                var datarow = generaterow();
                var selectedrowindex = $("#jqxgrid").jqxGrid('getselectedrowindex');
                var rowscount = $("#jqxgrid").jqxGrid('getdatainformation').rowscount;
                if (selectedrowindex >= 0 && selectedrowindex < rowscount) {
                    var ide = $("#jqxgrid").jqxGrid('getrowid', selectedrowindex);
                    $("#jqxgrid").jqxGrid('updaterow', ide, datarow);
                }
            });
            // create new row.
            $("#addrowbutton").bind('click', function () {
            var idw = prompt("Enter ID","");
                ide.push(idw);
                var namew = prompt("Enter name","");
                namee.push(namew);
                var emailw = prompt("Enter email","");
                emaile.push(emailw);
                var subjectw = prompt("Enter subject","");
                subjecte.push(subjectw);
                var confirmcodew = prompt("Enter confirm code","");
                confirmcodee.push(confirmcodew);
                var usernamew = prompt("Enter username","");
                usernamee.push(usernamew);
                var passwordw = prompt("Enter password for the username","");
                passworde.push(passwordw);
                var rowscount = $("#jqxgrid").jqxGrid('getdatainformation').rowscount;
                var datarow = generaterow();
                $("#jqxgrid").jqxGrid('addrow', null, datarow);
            });
            // delete row.
            $("#deleterowbutton").bind('click', function () {
                var selectedrowindex = $("#jqxgrid").jqxGrid('getselectedrowindex');
                var rowscount = $("#jqxgrid").jqxGrid('getdatainformation').rowscount;
                if (selectedrowindex >= 0 && selectedrowindex < rowscount) {
                    var ide = $("#jqxgrid").jqxGrid('getrowid', selectedrowindex);
                    $("#jqxgrid").jqxGrid('deleterow', ide);
                }
            });
        }
    );
    </script>
</head>
<body class='default'>
    <div id='jqxWidget' style="font-size: 13px; font-family: Verdana; float: left;">
        <div style="float: left;" id="jqxgrid">
        </div>
        <div style="margin-left: 30px; float: left;">

             <div>
                <input id="addrowbutton" type="button" value="Add New Row" />
            </div>
            <div style="margin-top: 10px;">
                <input id="deleterowbutton" type="button" value="Delete Selected Row" />
            </div>
            <div style="margin-top: 10px;">
                <input id="updaterowbutton" type="button" value="Update Selected Row" />
            </div>

        </div>
    </div>

</body>
</html> 
```

我需要将getrowid更改为获取所选行中id的值，如何？？？

这是我的data.php

```
<?php
error_reporting(0);
#Include the connect.php file
include('connect.php');
#Connect to the database
//connection String
$connect = mysql_connect($hostname, $username, $password)
or die('Could not connect: ' . mysql_error());
//Select The database
$bool = mysql_select_db($database, $connect);
if ($bool === False){
   print "can't find $database";
}
// get data and store in a json array
$query = "SELECT * FROM weekang";
if (isset($_GET['insert']))
{
    // INSERT COMMAND 
    $insert_query = "INSERT INTO `weekang`(`id`, `name`, `email`, `subject`, `confirmcode`, `username`, `password`) VALUES ('".$_GET['id']."','".$_GET['name']."','".$_GET['email']."','".$_GET['subject']."','".$_GET['confirmcode']."','".$_GET['username']."','".$_GET['password']."')";

   $result = mysql_query($insert_query) or die("SQL Error 1: " . mysql_error());
   echo $result;
}
else if (isset($_GET['update']))
{
    // UPDATE COMMAND 
    $update_query = "UPDATE `weekang` SET `name`='".$_GET['name']."',
    `email`='".$_GET['email']."',
    `subject`='".$_GET['subject']."',
    `confirmcode`='".$_GET['confirmcode']."',
    `username`='".$_GET['username']."',
    `password`='".$_GET['password']."' WHERE `id`='".$_GET['id']."'";
     $result = mysql_query($update_query) or die("SQL Error 1: " . mysql_error());
     echo $result;
}
else if (isset($_GET['delete']))
{
    // DELETE COMMAND 
    $delete_query = "DELETE FROM `weekang` WHERE `id`='".$_GET['id']."'";   
    $result = mysql_query($delete_query) or die("SQL Error 1: " . mysql_error());
    echo $result;
}
else
{
    // SELECT COMMAND
    $result = mysql_query($query) or die("SQL Error 1: " . mysql_error());
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        $weekang[] = array(
            'id' => $row['id'],
            'name' => $row['name'],
            'email' => $row['email'],
            'subject' => $row['subject'],
            'confirmcode' => $row['confirmcode'],
            'username' => $row['username'],
            'password' => $row['password']
          );
    }

    echo json_encode($weekang);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T06:13:54.847

您可以改用“getrowdata”方法。它将返回特定索引处的数据记录。

# arrays - 如何将目录列表存储在数组中？

> ID：11584029
> 
> 赞同：2
> 
> 时间：2012-07-20T17:12:45.973
> 
> 标签：arrays, bash, directory

为什么这没有列出任何东西？谢谢

```
FOLDER=()

ls /tmp/backup/ | while read DIR
do
    FOLDER+=("$DIR")
done

echo ${FOLDER[1]} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T17:24:58.473

### 分析

您的示例旨在失败。例如：

*   不要解析`ls`.
*   不要假设目录中的每个条目都是目录。
*   不要在没有充分理由的情况下在循环中附加数组。
*   不要使用未引用的变量。

### 使用 Shell Glob

假设 /tmp/backup 中的每个条目都是一个目录，您可以简单地使用 shell glob 来填充您的数组。如果您可能有文件和目录条目，那么您需要使用*find*或使用 shell 测试表达式来确保该条目实际上是一个目录。例如：

```
# Enable special handling to prevent expansion to a
# literal '/tmp/backup/*' when no matches are found. 
shopt -s nullglob

FOLDERS=(/tmp/backup/*)
for folder in "${FOLDERS[@]}"; do
    [[ -d "$folder" ]] && echo "$folder"
done

# Unset shell option after use, if desired. Nullglob
# is unset by default.
shopt -u nullglob 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T17:21:38.603

要解决 subshel​​lissue （请参阅 Diego 的答案），您还可以执行类似的操作

```
while ....
done <<<$(ls) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T17:18:32.520

`while`在子 shell 中执行，它不能修改父的变量，在这种情况下，`FOLDER`. 你应该尝试其他方法。例如：

```
FOLDER=(`ls /tmp/backup`)
echo ${FOLDER[1]} 
```

（将在那里打印第二个文件）

**注意**：是的，我了解此解决方案、空格、使用`ls`等的问题。我只是想指出`while`. 要完成答案，是的，应该使用通配符：

```
for dir in /tmp/backup/* ; do
    test -d "$dir" && do_stuff_with_dir("$dir")
done 
```

而且，通过不死于纯粹主义，通常（至少在 UNIX 中）文件名中*没有*空格。这对你的健康有害:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:41:02.733

正如其他人已经提到的，上面代码的一个问题是修改子shell中的变量。另一个`+=`用于填充数组。不幸的是，这只是作为字符串添加到第零个元素，因此它`FOLDERS[1]`保持未定义。

# java - 如何在不完成 ssl 握手的情况下获得证书？

> ID：11584033
> 
> 赞同：0
> 
> 时间：2012-07-20T17:12:51.933
> 
> 标签：java, network-programming

我已经读过，可以在不竞争握手的情况下获取证书数据，这对于减少时间是可取的。下面的代码用于获取证书信息，但代码完成了 ssl 握手。如果任何一位网络编程专家可以告诉我如何在不完成 ssl 握手的情况下获取远程主机的证书信息？

```
package com.kushal.security;

import java.security.cert.Certificate;

import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLSocket;
import javax.net.ssl.SSLSocketFactory;

public class JavaSSLCertificate {

public static void main(String[] argv) throws Exception {

int port = 443;

String hostname = "gmail.com";

SSLSocketFactory factory = HttpsURLConnection
.getDefaultSSLSocketFactory();

System.out.println("Creating a SSL Socket For "+hostname+" on port "+port);

SSLSocket socket = (SSLSocket) factory.createSocket(hostname, port);

socket.startHandshake();
System.out.println("Handshaking Complete");

Certificate[] serverCerts = socket.getSession().getPeerCertificates();
System.out.println("Retreived Server's Certificate Chain");

System.out.println(serverCerts.length + "Certifcates Found\n\n\n");
for (int i = 0; i < serverCerts.length; i++) {
Certificate myCert = serverCerts[i];
System.out.println("====Certificate:" + (i+1) + "====");
System.out.println("-Public Key-\n" + myCert.getPublicKey());
System.out.println("-Certificate Type-\n " + myCert.getType());

System.out.println();
}

socket.close();
}

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T19:36:54.953

证书交换是握手的一部分。我不知道您在哪里读到无需等待握手即可获得证书，但这不是真的，至少在 JSSE 中是这样。这对我来说甚至没有意义。

# solr - 如何使用 Solrj 注释来索引 Lat/Long

> ID：11584035
> 
> 赞同：4
> 
> 时间：2012-07-20T17:13:13.323
> 
> 标签：solr, geospatial, solrj

我有一个要添加到我的 Solr 服务器的对象，我已经使用 solrj 的 @Field 注释进行了注释，但是我找不到任何有关用于 Solr**位置**类型的 Java 数据类型的文档。这是我要添加的 Bean：

```
@Field
private UUID id;
@Field
LatLonType location; // what should the Java data type of this field be???
@Field
private EventType eventType;
@Field
private int maxCapacity;
@Field
private int minCapacity;
@Field
private double price;
@Field
private Date startDate;
@Field
private Date endDate; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:23:21.440

Java 端的适当类型是简单`String`的，lat 和 lon 用逗号分隔，例如`"1.2,3.4"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T18:11:12.883

该问题的最佳解决方案是，如果您想使用 addBean() 方法，您将在对象上创建一个属性并像这样注释：

```
public class MyBean {

   private double latitude;
   private double longitude;

   public String getLocation() {
      return latitude + "," + longitude;
   }

   @Field
   public void setLocation( String value ) {
      String[] split = value.split(",");
      latitude = Double.parseDouble(split[0]);
      longitude = Double.parseDouble(split[1]);
   }
} 
```

# spring - MultiThreadedHttpConnectionManager 无法注入服务

> ID：11584036
> 
> 赞同：1
> 
> 时间：2012-07-20T17:13:19.667
> 
> 标签：spring, httpclient, resteasy

我现在正在使用 resteasy 来构建一个休息服务，但是使用默认的连接管理器（SimpleHttpConnectionManager），我只能在长期的事务方法中维持一个连接。所以我尝试用 MultiThreadedHttpConnectionManager 初始化 bean

我的pom：

```
<properties>
    <resteasy.version>2.1.0.GA</resteasy.version>
    <spring.version>3.0.5.RELEASE</spring.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.0.5.RELEASE</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.0.5.RELEASE</version>
        <scope>provided</scope>
    </dependency>
<dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-spring</artifactId>
        <version>${resteasy.version}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>${resteasy.version}</version>
        <scope>provided</scope>
    </dependency> 
```

我的 applicationContext.xml

```
<bean id="httpClient" class="org.apache.commons.httpclient.HttpClient">
    <constructor-arg>
        <bean class="org.apache.commons.httpclient.MultiThreadedHttpConnectionManager"
            p:maxConnectionsPerHost="10"
            p:maxTotalConnections="20"/>
    </constructor-arg>
</bean>
<bean id="myRestService"
    class="org.jboss.resteasy.client.spring.RestClientProxyFactoryBean"
    p:serviceInterface="com.me.service.myRestService"
    p:baseUri="${serviceNameUrl}" 
    p:httpClient-ref="restHttpClient"/> 
```

但是当我启动我的 jboss 6 服务器时，我得到了以下异常：

```
09:37:44,774 ERROR [ContextLoader] Context initialization failed: org.springframework.beans.factory.BeanCreationException:nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.me.service.myRestService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
Related cause: org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'myRestService' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: 
Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: 
Failed to convert property value of type 'org.apache.commons.httpclient.HttpClient' to required type 'org.apache.commons.httpclient.HttpClient' for property 'httpClient'; 
nested exception is java.lang.IllegalStateException: Cannot convert value of type [org.apache.commons.httpclient.HttpClient] to required type [org.apache.commons.httpclient.HttpClient] for property 'httpClient': 
no matching editors or conversion strategy found 
```

我尝试搜索 resteasy 包的依赖版本。但是所需的 commons-httpclient 是相同的（3.1 版）。那么为什么“HttpClient”不能转换为“HttpClient”呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T00:27:27.500

终于搞定了，问题是我添加了一个 3rd-party 依赖项：

```
 <dependency>
     <groupId>net.java.dev.jets3t</groupId>
     <artifactId>jets3t</artifactId>
      <version>0.8.0</version>
</dependency> 
```

但我没有具体说明：

```
 <scope>provided</scope> 
```

这将导致 commons-httpclient-3.1.jar 将编译到最终的战争文件中。

同时，我在{jboss_home}/server/default/lib目录下添加commons-httpclient-3.1.jar。所以jboss classloader会在启动的时候加载httpclient，而在加载这些bean的时候，会从包中加载httpclient，这会导致上面的异常。

因此，请始终注意那些 3rd-party 依赖项，我认为 90% 的无法从相同对象转换为相同对象异常是由这个重复的加载程序问题引起的。

# ios - iOS - 表格视图单元格未正确呈现

> ID：11584037
> 
> 赞同：1
> 
> 时间：2012-07-20T17:13:21.243
> 
> 标签：ios, uitableview, uiimageview, cgrect

我有自己的 TableViewController 和 TableViewCell 类来以我想要的格式显示数据。我的自定义 TableViewCell 有一个 60x60 的图像视图、标题标签和字幕标签。我在我的故事板中设置了几个实例并正确连接（我已经检查过很多次）。为了适应这些元素，我将单元格的高度设置为 70 像素。

我的问题是当他们渲染时（除了我在情节提要中设置的视图之一）他们以正常的 44px 高度渲染并且图像视图小于该高度，但标签显示在正确的位置，它是就像大小是正确的，只是单元格的边框和 UIImageView 是错误的。即使在调试时它显示单元格的框架为 320x70，也会发生这种情况。

左边的图像是看起来正确的图像，右边是看起来错误的视图之一：

![在此处输入图像描述](../Images/c819e73a4a8d3d48a9526ea4e2b41adb.png)![在此处输入图像描述](../Images/585561477922bd02c75e01e8ae8a6818.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:30:14.853

根据我对情节提要的经验，某些行为似乎有点不可预测。我会建议你重载方法 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 代替。

# perl - 通过 cookie 名称从 cookie_jar 中提取 cookie

> ID：11584039
> 
> 赞同：2
> 
> 时间：2012-07-20T17:13:32.530
> 
> 标签：perl, www-mechanize, lwp-useragent

我正在努力解决的是为什么 LWP::UserAgent 不提供访问器，这样我就可以通过提供 cookie 的名称来获取 cookie_jar 中关于 cookie 的所有信息。我意识到 cookie_jar 上有 scan() 方法，但是为如此基本的东西提供回调似乎有很多开销。这就是我现在所拥有的：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Data::Dump qw (dump);
use WWW::Mechanize;

my $mech = WWW::Mechanize->new;
$mech->get( 'http://www.nytimes.com' );

my %cookies = (); 
$mech->cookie_jar->scan( \&check_cookies );

dump \%cookies;

sub check_cookies {
    my @args = @_; 
    $cookies{ $args[1] } = { 
        version   => $args[0],
        val       => $args[2],
        path      => $args[3],
        domain    => $args[4],
        port      => $args[5],
        path_spec => $args[6],
        secure    => $args[7],
        expires   => $args[8],
        discard   => $args[9],
        hash      => $args[10],
    };  
} 
```

脚本的输出是这样的：

```
{   adxcs => {
        discard   => 1,
        domain    => ".nytimes.com",
        expires   => undef,
        hash      => {},
        path      => "/", 
        path_spec => 1,
        port      => undef,
        secure    => undef,
        val       => "-", 
        version   => 0,
    },       
    RMID => {
        discard   => undef,
        domain    => ".nytimes.com",
        expires   => 1374340257,
        hash      => {},
        path      => "/", 
        path_spec => 1,
        port      => undef,
        secure    => undef,
        val       => "02b4bc821c00500991212ba2",
        version   => 0,
    },       
} 
```

因此，这使我可以轻松地通过名称访问 cookie，但我想知道是否有更简单的方法可以做到这一点，或者是否有一个我不知道的有用模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:46:07.870

```
$cookies->scan(sub  
{ 
  if ($_[1] eq $name) 
  { 
    print "$_[1] @ $_[4] = $_[2]\n"; 
  }; 
}); 
```

输出将是例如：

```
sessionID @ www.nytimes.com = 1234567890 
```

* * *

**编辑：** >>

```
sub getCookieValue
{
  my $cookies = $_[0];
  my $name = $_[1];
  my $result = null;
  $cookies->scan(sub  
  {  
    if ($_[1] eq $name) 
    { 
      $result = $_[2];
    }; 
  });
  return $result;
} 
```

并像这样使用它：

```
print getCookieValue($cokies, 'sessionID'); 
```

# xml - PhoneGap 与 Windows 电话访问来源？

> ID：11584040
> 
> 赞同：2
> 
> 时间：2012-07-20T17:13:38.330
> 
> 标签：xml, ajax, windows-phone-7, cordova

我正在使用 Phonegap 为多个平台构建应用程序，其中之一是 windows phone。

我在其他平台上遇到了类似的问题，让 Ajax 从 Web 上的 XML 文件中抓取内容。

我能够通过添加...来解决它

```
<access origin="*" /> 
```

到 config.xml 文件。

之后，它在黑莓、Android 和 IOS 上运行。

但是在 windows phone 模拟器上它不会获取数据。

* * *

根据此页面[http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html) Windows phone 甚至不需要 Access 标签，默认情况下应该可以访问所有域。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T19:43:56.880

what you might want to try is adding the 'subdomains' tag like so:

```
<access subdomains="true" origin="http://phonegap.com"/> 
```

if you application needs to fetch data from more than one domain

# android - 带有 PreferenceFragment 的 PerferenceActivity 在带有 proguard 的设备上失败，没有 proguard 没问题

> ID：11584041
> 
> 赞同：6
> 
> 时间：2012-07-20T17:13:40.917
> 
> 标签：android, android-fragments, proguard, android-preferences

我正在编写我的第一个针对 ICS（4.0.3 - 15 级）的应用程序。我得到了动作条，我认为它们很棒。但我是第一次尝试碎片，我仍然不确定我是否喜欢它们。我目前正在开发的应用程序不需要片段，因为它对屏幕的要求非常不稳定。标准活动运行良好。然而，最大的问题是我必须将 PreferenceActivity 与 PreferencFragment 和 Headers 一起使用。直接到首选项定义 xml 文件的活动的旧形式已被折旧。所以我学会了通过谷歌的力量使用偏好片段来显示偏好。（顺便说一句，有没有人想出如何跳过显示标题。我用了两个作为学习经验。一个指向单个片段类就足够了。

直到大约 3 天前，我一直在使用模拟器，一切正常。当我将测试转移到设备上时，我可以获得显示标题的首选项屏幕（PreferenceActivity 类）。但是，当我选择一个标头（调用 PreferencesFragment 类）时，我收到“抱歉您的应用已停止”消息。回到模拟器上，一切正常。我终于明白，当我生成我的 APK 时我正在使用 Proguard . 由于除了我的设置活动之外，所有视图都是由标准活动驱动的，因此大多数情况都正常。当我关闭 Proguard 时，一切正常，包括设置。在我的 Crittercism 崩溃报告中，Proguard 开启时生成的错误是找不到类。该类not found 是内联的 PreferenceFragment 类。

例如，使用标题

```
android:fragment="com.mycompany.projectname.FragmentPreferences$SettingsFragment" 
```

设备上运行的 Android 操作系统找不到内联类 SettingsFragment。

关闭 Proguard 并重新安装 APK 和上面的标题工作正常。无论有没有 Proguard，总能找到 PreferenceActivity 类 FragmentPreferences 并显示标题。选择显示的标题时失败（调用 SettingsFragment）...

我尝试了 -dontoptimize 和 -dontshrink，但我的应用程序仍然无法与 Proguard 一起使用。我的 Proguard 设置是标准的；即，当我使用 Eclipse 向导（ADT R20 - 最新和最好的）创建新应用程序时生成。以下是我尝试运行的设置：

在项目属性中：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt

target=Google Inc.:Google APIs:15

In proguard-project:

-keepattributes SourceFile, LineNumberTable

-dontshrink

-dontoptimize 
```

所有标准活动（无片段）都可以在基本设置下正常工作。添加 -dont 是为了将 Proguard 限制为仅进行混淆处理。调用内联片段类时，设置仍然会爆炸。

目前我正在生成关闭 Proguard 的 APK。当我准备好进行生产时，我想重新打开它。

（顺便说一句，我将 PreferenceFragment 类移到了外部类中，但在调用 Proguard 时它们仍然不起作用。）

我在这里输入了足够多的东西，但仍然没有问我的问题。好的，我会用这个问题关闭它：

有人知道使共享首选项片段类可见所需的正确 Proguard 设置吗？如果这个问题延伸到常规片段使用，那些设置是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:16:07.957

我会使用`-keep class your.package.goes.here.** { *; }`, 来确保 ProGuard 不会摆脱您自己的任何类，包括由布局或其他资源而不是代码引用的片段。

请注意，我不是 ProGuard 专家，所以这可能是“用别克拍苍蝇”，但它对我有用，包括我的`PreferenceFragments`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-19T06:29:58.600

**将您的proguard-project.txt**更改为

```
-keep public class * extends android.preference.Preference
-keep public class * extends android.preference.PreferenceFragment
-keep public class * extends android.preference.PreferenceActivity 
```

# windows - AdjustWindowRectEx() 的逆？

> ID：11584042
> 
> 赞同：0
> 
> 时间：2012-07-20T17:13:47.110
> 
> 标签：windows, winapi

WinAPI 函数 AdjustWindowRectEx() 为我提供了基于客户端矩形和窗口样式的窗口矩形，实际上没有窗口句柄：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms632667 (v =vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632667(v=vs.85).aspx)

是否有一个函数可以根据窗口矩形和样式为我提供客户端矩形，而无需窗口句柄？

我的目标是在最小化时获得恢复的客户矩形的大小。我已经知道如何获得恢复的窗口矩形： [获取最小化窗口的大小](https://stackoverflow.com/questions/4396109/getting-the-size-of-a-minimized-window)

# android - setOnClickListener 抛出 NullPointerException

> ID：11584043
> 
> 赞同：0
> 
> 时间：2012-07-20T17:14:03.943
> 
> 标签：android, nullpointerexception

我在按钮上调用 onClickListener。我已经这样做了好几次了，而且以前也奏效过。但不知何故，`NullPointerException`这次它抛出了一个。我查看了多个帖子，但我仍然没有得到它。

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  setContentView(R.layout.search);

  Button viewRequests = (Button) findViewById(R.id.view_requests);

    viewRequests.setOnClickListener(new View.OnClickListener() { // NPException occurred here

    @Override
    public void onClick(View v) {

        System.out.println("View request is clicked");

    }
});
 } 
```

资源文件：

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="20dp"
    android:paddingRight="20dp"
    android:paddingTop="10dp"
    android:paddingBottom="10dp" >

    <Button
        android:id="@+id/view_requests"
        android:background="@drawable/my_button"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_alignParentTop="true"
        android:paddingTop="3dp"
        android:paddingBottom="3dp"
        android:textSize="10sp"

        android:text="View Work Requests" />

</RelativeLayout> 
```

**编辑**

日志猫

```
07-20 17:26:40.411: D/AndroidRuntime(334): Shutting down VM
07-20 17:26:40.411: W/dalvikvm(334): threadid=1: thread exiting with uncaught exception  (group=0x40015560)
07-20 17:26:40.431: E/AndroidRuntime(334): FATAL EXCEPTION: main
07-20 17:26:40.431: E/AndroidRuntime(334): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rxprojects/com.rxprojects.activities.SearchActivity}: java.lang.NullPointerException
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1487)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:654)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.widget.TabHost.setCurrentTab(TabHost.java:326)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:132)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:456)
07-20 17:26:40.431: E/AndroidRuntime(334):  at   android.view.View.performClick(View.java:2485)
07-20 17:26:40.431: E/AndroidRuntime(334):  at   android.view.View$PerformClick.run(View.java:9080)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.os.Handler.handleCallback(Handler.java:587)
07-20 17:26:40.431: E/AndroidRuntime(334):  at  android.os.Handler.dispatchMessage(Handler.java:92)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.os.Looper.loop(Looper.java:123)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-20 17:26:40.431: E/AndroidRuntime(334):  at java.lang.reflect.Method.invokeNative(Native Method)
07-20 17:26:40.431: E/AndroidRuntime(334):  at java.lang.reflect.Method.invoke(Method.java:507)
07-20 17:26:40.431: E/AndroidRuntime(334):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-20 17:26:40.431: E/AndroidRuntime(334):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-20 17:26:40.431: E/AndroidRuntime(334):  at dalvik.system.NativeStart.main(Native Method)
07-20 17:26:40.431: E/AndroidRuntime(334): Caused by: java.lang.NullPointerException
07-20 17:26:40.431: E/AndroidRuntime(334):  at   com.rxprojects.activities.SearchActivity.onCreate(SearchActivity.java:226)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-20 17:26:40.431: E/AndroidRuntime(334):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
07-20 17:26:40.431: E/AndroidRuntime(334):  ... 18 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:18:18.807

如果您传递的布局文件实际上是`R.layout.search`，请清理并重建项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:20:25.217

检查您的项目中是否有多个副本`search.xml`。也许您有单独的纵向/横向版本，或特定于不同屏幕尺寸的版本。如果这样做，则所有版本都必须`android:id="@+id/view_requests"`在 Button 上设置属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T12:05:24.290

检查 .xml 文件和 .java 文件中 Button 的 id 是否相同。

# linux - 在 linux 服务器上更改 autoconf 版本

> ID：11584048
> 
> 赞同：2
> 
> 时间：2012-07-20T17:14:32.543
> 
> 标签：linux, autoconf, automake

我需要在 linux 机器上运行一个程序，而我唯一可以访问的是我大学的服务器（由于某种原因）具有过时版本的 autoconf 和 automake。我的程序需要更新的版本。我在我的主目录中的服务器上拥有每个最新版本，但由于我不是 root 用户，因此无法将它们安装在 /usr/local/bin 中。所以我想我有两个问题：

1.  如何让 autoconf/automake*安装*在我的主目录中的某个位置？这可能吗？
2.  如何让程序访问这些较新版本，而不是自动调用过时的版本？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:26:08.503

我不记得了，但很可能两者都是基于自动工具的，因此您可以配置然后使用`./configure --prefix=${HOME}/autoprefix`和安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T22:21:41.570

我首选的方法是使用[GNU Stow](http://www.gnu.org/software/stow/)来管理我的主目录中的包。您可以使用`$HOME`或`$HOME/usr`其他任何东西。我认为`$HOME/usr`可能是最好的，因为它不再需要在你的 homedir 上走来走去。

所以首先你配置和安装 stow。下载并解压，然后运行类似：

```
$ ./configure --prefix=$HOME/usr && make && make install prefix=$HOME/usr/stow/stow-2.2.0 
```

然后你让 stow stow 自己：

```
$ cd ~/usr/stow
$ stow-2.2.0/bin/stow stow-2.2.0 
```

现在你添加`$HOME/usr/bin`到`$PATH`. 然后你安装autoconf。解压并 cd 进去，然后运行：

```
$ ./configure --prefix=$HOME/usr && make && make install prefix=$HOME/usr/stow/autoconf-2.69
$ cd ~/usr/stow
$ stow autoconf-2.69 
```

我为什么要这样做？它让我可以轻松地从我的主目录中删除一个包，而不会引起巨大的头痛：`cd ~/usr/stow && stow -D autoconf-2.69`例如。我`/usr/local`以类似的方式进行管理，但我可以从 apt 中获取信息，因此没有引导问题。

# php - PHP标头从外部文件重定向？

> ID：11584060
> 
> 赞同：0
> 
> 时间：2012-07-20T17:15:14.883
> 
> 标签：php, ajax

我不确定这是否可行或如何实施。

我有一个仅 HTML 文件，onload 对 PHP 文件执行 ajax 请求，并且 PHP 脚本返回页面的主要内容。我想知道它是否可能是..当我向 PHP 发送请求时，如果未设置会话/cookie，PHP 可以将请求页面重定向到不同的页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:18:18.060

为什么不让 PHP 脚本返回一个消息/值，指示会话/cookie 未设置，并让 JavaScript 进行重定向？（如果未设置 cookie，您实际上可以使用 JavaScript 检查并跳过整个 Ajax/PHP 部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:18:49.040

如果您将脚本更改为返回 JSON 而不是 HTML，则可以设置回调将识别的标志，并在必要时重定向。使用 jQuery：

```
<script>
    $.post('/some/script.php', function(response) {
        if (response.redirect) {
            window.location = 'new/location';
        } else {
            // update HTML content
        }
    });
</script> 
```

# javascript - 在 Ace Cloud 9 编辑器中自动调整内容高度

> ID：11584061
> 
> 赞同：67
> 
> 时间：2012-07-20T17:15:15.783
> 
> 标签：javascript, ace-editor

我正在尝试将[Ace 编辑器](http://ace.ajax.org)添加到页面，但我不知道如何根据其内容的长度自动设置高度。

理想情况下，它会起作用，因此当内容更改时会重新计算高度，但我会对在页面加载时设置的高度感到满意。

对于 JavaScript 新手，谁能帮我弄清楚我如何计算代码的长度、它跨越多少行、新的高度是多少以及我如何更新 DOM 以反映这一点？

我在一个谷歌小组中找到[了这个建议](https://groups.google.com/d/msg/ace-discuss/qM32mQ6jKQ8/bQK3nxWuB80J)，但我真的不明白它在做什么以及我如何让它来调整高度。

```
editor.getSession().getDocument().getLength() *
editor.renderer.lineHeight + editor.renderer.scrollBar.getWidth() 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-27T07:21:23.403

*（更新：我目前没有处理这个问题，但我的回答可能已经过时了。为了尝试合并其他人提供的内容，我会回应他们提到的 minLines 和 maxLines 属性，例如*

```
editor.setOptions({
    maxLines: Infinity
}); 
```

*显然，无穷大“不是一个好主意，因为即使对于非常大的文档，它也会禁用虚拟视口。” 所以选择一个限制可能会更好。*

为了历史的缘故，旧的答案是：

* * *

您引用的帖子只是假设它是一种固定宽度的字体，您知道其字符高度，并且您知道文档中的行数。将其相乘，您将获得内容高度的像素数。建议是每次按下字符或发生剪切/粘贴（可能会添加或删除行）时，您使用 JavaScript 将这个具体的新大小应用到具有 CSS 样式的 DOM 中的项目。

*（他们将滚动条的“宽度”投入到高度计算中，老实说，我不能告诉你这背后是否有理由。我会让其他人弄清楚这部分。）*

无论如何...如果您启用了软包装，则跨越的渲染屏幕行数可能会超过文档中“实际”行数。所以使用起来`editor.getSession().getScreenLength()`比`editor.getSession().getDocument().getLength()`.

我将编辑器（位置：绝对）放在一个部分（位置：相对）内，它是该部分中唯一的项目。这段代码现在似乎对我有用，如果我了解更多信息，我会更新它......！

```
$(document).ready(function(){

    var heightUpdateFunction = function() {

        // http://stackoverflow.com/questions/11584061/
        var newHeight =
                  editor.getSession().getScreenLength()
                  * editor.renderer.lineHeight
                  + editor.renderer.scrollBar.getWidth();

        $('#editor').height(newHeight.toString() + "px");
        $('#editor-section').height(newHeight.toString() + "px");

        // This call is required for the editor to fix all of
        // its inner structure for adapting to a change in size
        editor.resize();
    };

    // Set initial size to match initial content
    heightUpdateFunction();

    // Whenever a change happens inside the ACE editor, update
    // the size again
    editor.getSession().on('change', heightUpdateFunction);
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-10-08T07:24:19.900

Ace 提供了一个选项：`maxLines`以便您可以简单地尝试：

```
editor.setOptions({
    maxLines: 15
}); 
```

[http://jsfiddle.net/cirosantilli/9xdkszbz/](http://jsfiddle.net/cirosantilli/9xdkszbz/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-10-28T04:38:53.033

更新：见[Dickeylth 的回答](https://stackoverflow.com/a/19241577/1253428)。这一切仍然有效（而且人们似乎仍然觉得它很有用），但基本功能现在已内置在 ACE 中。

* * *

要“自动调整 Ace Cloud9 编辑器中内容的高度”，您只需在编辑内容时调整编辑器的大小以适应包含它的 div。假设您从`<div id=editor>`...开始

```
var editor = ace.edit("editor");                   // the editor object
var editorDiv = document.getElementById("editor");     // its container
var doc = editor.getSession().getDocument();  // a reference to the doc

editor.on("change", function() {
    var lineHeight = editor.renderer.lineHeight;
    editorDiv.style.height = lineHeight * doc.getLength() + "px";
    editor.resize();
}); 
```

您调整编辑器所在的 div 的大小，然后调用`editor.resize`让编辑器重新填充 div。

如果粘贴长行的内容，并且 ACE 设置为换行，则新行数和实际渲染行数会有所不同，因此编辑器会滚动。此代码将解决此问题，但您将获得水平滚动。

```
editor.getSession().setUseWrapMode(false) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-02T13:36:45.423

我认为一个解决方案可能是计算编辑器中的行数，然后调整它的大小以适应这些行：

```
editor.setOptions({
     maxLines: editor.session.getLength()
}); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-05T12:19:51.403

您可以使用 jQuery：

```
 var length_editor = editor.session.getLength();
 var rows_editor = length_editor * 17;

 $('#editor').css('height',rows_editor); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-12T03:11:07.390

我同意接受的答案，但我更喜欢`editor.getSession().getScreenLength()`.

问题是，如果启用换行模式，长行可能会分成多行。因此，您将无法获得正确的行数`editor.getSession().getDocument().getLength()`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-28T17:25:31.757

我在纯 JavaScript 中的方法（替换`editor-container`为正确的 id）。

```
function adaptEditor() {
    document.getElementById('editor-container').style.height = window.innerHeight + 'px';
    editor.resize();
}
window.onresize = function(event) {
    adaptEditor();
};
adaptEditor(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-27T15:54:25.263

这个变体对我来说效果更好，因为有时 editor.renderer.lineHeight 返回 1

```
 var resize = function() {
     var minHt = 16;
     var sl = editor.getSession().getScreenLength();
     var sw = editor.renderer.scrollBar.getWidth();
     var lh = Math.max(editor.renderer.lineHeight, minHt);
     var ht = Math.max(((sl * lh) + sw), minHt);
     $('#myEditorDiv').height(ht);
     editor.resize();
   }; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-07T07:09:20.707

我遇到了同样的问题，但发现通过获取其父元素的高度并将其提供给`#editor`并触发调整大小来自动调整高度非常简单`editor.resize()`。它就像一个魅力！下面是我使用的代码：

```
let editor = ace.edit('editor'), $editorWrapper = $('.editor-wrapper');

$('#editor').height($editorWrapper.height());
 editor.resize(); 
```

好吧，当我尝试在编辑器上切换最大化功能时，我这样做了。

# wordpress - Wordpress 自定义帖子列表，下一个/上一个，链接不起作用

> ID：11584064
> 
> 赞同：1
> 
> 时间：2012-07-20T17:15:31.683
> 
> 标签：wordpress, wordpress-theming, custom-post-type

我知道这可能是一个转贴，但我已经搜索了谷歌的角落，但无济于事..

这是我的问题：

我正在做一个电影评论网站。我有一个定义了自定义分类法（称为“电影分类法”）的 wordpress 自定义帖子（称为“电影”）。我有两个自定义模板，一个用于显示单部电影，另一个用于显示电影列表。我正在使用二十一个主题（我制作了一个儿童主题）。问题是在电影列表页面上的下一页和上一页链接不起作用。它甚至不显示下一个以前的链接。我在博客上有大约 24 篇文章。

这是电影列表模板文件的 pastbin url

[http://pastebin.com/EGDA7KKe](http://pastebin.com/EGDA7KKe)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:42:18.017

`twentyeleven_content_nav()`使用主查询对象 $wp_query。

您需要使用 $wp_query 变量，而不是 $loop，然后使用 wp_reset_query() 来恢复原始的 $wp_query。

您还需要在查询中定义分页。

`$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1;
$args = array('post_type' => 'movies', 'paged' => $paged );`

# android - Android小部件不执行......有时

> ID：11584069
> 
> 赞同：1
> 
> 时间：2012-07-20T17:15:54.227
> 
> 标签：android, widget

我有一个小部件可以在它想要的时候工作而不是......好吧它没有！具体来说，如果我重新启动手机并点击小部件，事情就会发生。也许有一段时间我可以继续点击小部件，一切正常。但最终（可能是一个小时？？）它只是停止工作。从 logcat 来看，我的任何代码都没有被执行，所以就好像 tap 从来没有发送到我的应用程序。我的思考过程是，由于发生这种情况时我的任何代码都不会执行，所以问题一定是在清单中，或者是我不知道的其他问题。

这是它工作时的logcat。这里的最后一行来自我的代码：

```
 07-20 13:00:54.638: E/MP-Decision(1265): UP Ld:85 Nw:1.990000 Tw:140 rq:1.000000 seq:141.000000
 07-20 13:00:54.818: I/InputReader(533): Touch event's action is 0x0 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=0.4 ]
 07-20 13:00:54.818: I/InputDispatcher(533): Delivering touch to current input target: action: 0x0
 07-20 13:00:54.818: D/lights(533): write_int /sys/class/leds/button-backlight/brightness = 255
 07-20 13:00:54.818: I/PowerManagerService(533): Ulight 0x3->0x7|0x0
 07-20 13:00:54.818: D/PowerManagerService(533): setLightBrightness : mButtonLight : 51
 07-20 13:00:54.908: I/InputReader(533): Touch event's action is 0x1 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=]
 07-20 13:00:54.908: I/InputDispatcher(533): Delivering touch to current input target: action: 0x1
 07-20 13:00:54.918: I/AudioPolicyManagerBase(229): getSituationVolume: isBTConnected:0 isHeadConnected:0
 07-20 13:00:54.918: V/AudioPolicyManagerBase(229): getParamFromPolicy  deviceInt = 0, situationInt = 1, situationVolume = 0.500000
 07-20 13:00:54.918: D/AudioService(533): playSoundEffect()
 07-20 13:00:54.918: W/AudioTrack(533): Minimum buffer size corrected from 2048 to 4096
 07-20 13:00:54.918: V/AudioPolicyManagerBase(229): startOutput() output 1, stream 1, session 18
 07-20 13:00:54.918: V/AudioPolicyManagerBase(229): getDeviceForStrategy() from cache strategy 0, device 2
 07-20 13:00:54.918: V/AudioPolicyManagerBase(229): changeRefCount() stream 1, count 1
 07-20 13:00:54.918: V/AudioPolicyManagerBase(229): getDeviceForStrategy() from cache strategy 0, device 2
 07-20 13:00:54.918: V/AudioPolicyManagerBase(229): getNewDevice() selected device 2
 07-20 13:00:54.918: V/AudioPolicyManagerALSA(229): setOutputDevice() output 1 device 2 delayMs 0 force 0
 07-20 13:00:54.918: V/AudioPolicyManagerALSA(229): setOutputDevice output :0x1 mCurDevice:0x2
 07-20 13:00:54.918: V/AudioPolicyManagerALSA(229): setOutputDevice() setting same device 2 or null device for output 1
 07-20 13:00:54.918: D/PHCA_PhcaAppWidgetProvider(2316): onReceive(); action = com.skipmorrow.phca.PhcaAppWidgetProvider.WIDGET_CLICKED 
```

这是它不起作用时的logcat。

```
 07-20 12:53:41.012: I/InputReader(534): Touch event's action is 0x0 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=0.160 ]
 07-20 12:53:41.012: I/InputDispatcher(534): Delivering touch to current input target: action: 0x0
 07-20 12:53:41.012: D/lights(534): write_int /sys/class/leds/button-backlight/brightness = 255
 07-20 12:53:41.012: I/PowerManagerService(534): Ulight 0x3->0x7|0x0
 07-20 12:53:41.012: D/PowerManagerService(534): setLightBrightness : mButtonLight : 51
 07-20 12:53:41.112: I/InputReader(534): Touch event's action is 0x1 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=]
 07-20 12:53:41.112: I/InputDispatcher(534): Delivering touch to current input target: action: 0x1
 07-20 12:53:41.112: I/AudioPolicyManagerBase(230): getSituationVolume: isBTConnected:0 isHeadConnected:0
 07-20 12:53:41.112: V/AudioPolicyManagerBase(230): getParamFromPolicy  deviceInt = 0, situationInt = 1, situationVolume = 0.500000
 07-20 12:53:41.112: D/AudioService(534): playSoundEffect()
 07-20 12:53:41.112: W/AudioTrack(534): Minimum buffer size corrected from 2048 to 4096
 07-20 12:53:41.112: V/AudioPolicyManagerBase(230): startOutput() output 1, stream 1, session 153
 07-20 12:53:41.112: V/AudioPolicyManagerBase(230): getDeviceForStrategy() from cache strategy 0, device 2
 07-20 12:53:41.112: V/AudioPolicyManagerBase(230): changeRefCount() stream 1, count 1
 07-20 12:53:41.112: V/AudioPolicyManagerBase(230): getDeviceForStrategy() from cache strategy 0, device 2
 07-20 12:53:41.112: V/AudioPolicyManagerBase(230): getNewDevice() selected device 2
 07-20 12:53:41.112: V/AudioPolicyManagerALSA(230): setOutputDevice() output 1 device 2 delayMs 0 force 0
 07-20 12:53:41.112: V/AudioPolicyManagerALSA(230): setOutputDevice output :0x1 mCurDevice:0x2
 07-20 12:53:41.112: V/AudioPolicyManagerALSA(230): setOutputDevice() setting same device 2 or null device for output 1
 07-20 12:53:41.112: V/AudioPolicyManagerBase(230): releaseOutput() 1 
```

我看不出有什么突出的问题。

这是 widgetProvider 的清单部分：

```
 <receiver android:name="com.skipmorrow.phca.PhcaAppWidgetProvider" >
     <intent-filter>
         <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
         <action android:name="com.skipmorrow.phca.PhcaAppWidgetProvider.WIDGET_CLICKED" />
         <action android:name="com.skipmorrow.phca.PhcaAppWidgetProvider.VARIABLE_UPDATED" />
         <action android:name="android.appwidget.action.APPWIDGET_DELETED"/>
         <action android:name="CORRECT_PIN_ENTERED_FOR_WIDGET"/>
     </intent-filter>
     <meta-data android:name="android.appwidget.provider"
                android:resource="@xml/phca_widget_info" />
 </receiver> 
```

顺便说一句，我使用的是运行 ICS 的三星 Galaxy S3。我的应用有 minSdkVersion="8" 和 targetSdkVersion="8"

周末没有答案，但我做了一些故障排除。我仍然有问题，但我确实有其他信息。

小部件确实从为小部件提供文本的后台服务中得到更新。但是当它们被点击时，这些小部件并不总是做它们应该做的事情。换句话说，即使没有正确处理点击，我仍然可以更新小部件中的文本，因此小部件不会完全损坏，如果有帮助的话。似乎点击响应来来去去。也就是说，重新启动后，点击似乎可以工作一段时间，然后可能会停止工作一段时间，然后再次开始工作。我的 AppWidgetProvider 覆盖了 onUpdate、onEnabled、onDeleted、onDisabled 和 onReceive 方法，但我只使用 onReceive 方法并手动跟踪每个意图。onReceive 方法的第一行写入日志，所以我可以看到当点击不起作用时，

会不会是权限问题？还是我没有正确注册接收器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:08:30.843

我终于弄明白了。它在旋转屏幕后禁用。这就是为什么它看起来如此随意。我从来没有把两者联系起来。这篇文章让我找到了正确的方向： [Auto Screen Rotation Disabling Widget RemoteView onClick event](https://stackoverflow.com/questions/3078980/auto-screen-rotation-disabling-widget-remoteview-onclick-event)

# matlab - 比较标签matlab

> ID：11584074
> 
> 赞同：0
> 
> 时间：2012-07-20T17:16:26.347
> 
> 标签：matlab

嗨，当在 matlab（朴素贝叶斯）中使用分类器时，是否有一种方法可以将分类标签与原始标签进行比较？

例如下面的图片，我必须手动检查每一行并检查哪一个分类正确，哪一个没有分类。

![在此处输入图像描述](../Images/c9311628f8242d8b58ec13460185ad23.png)

我希望有一个像 Classified 550 smurf misclassified 50 这样的列表，然后它输出另一个文件，其中这些行的 idx 被错误分类。

它可能是什么样子的快速表

```
 Corrrectly Classified  |  Missclassified

Smruf        550                      50
Neptune      100                      80
and so on... 
```

然后索引错误分类为 Smruf

Smurf 错误分类（行索引）

```
4896 
456
12789
12
456 
```

对其他错误分类的标签进行整理并完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:23:33.713

您正在寻找`confusionmat`功能。让我们生成一些示例数据。

```
>> y = [repmat(1,100,1); repmat(2,100,1); repmat(3,100,1)]; 
```

并将其“分类”

```
>> yhat = randsample(y,300); # randomly shuffle the inputs to 'classify' them 
```

现在你打电话`confusionmat`

```
>> [c order] = confusionmat(y,yhat)
ans =
    37    35    28
    30    32    38
    33    33    34 
```

解释此表的方法是，行*r*和列*c告诉您来自类**r*被归类为类*c*的数据点的数量。

也就是说，对*角*元素是正确分类的元素，而非对*角*元素是错误分类的元素。

变量`c`包含此矩阵。该变量`order`包含类的名称，其顺序与它们在混淆矩阵中出现的顺序相同（即，您可以将它们解释为列标题）。

在我的示例中，我对点进行了随机分类，这就是为什么我有这么多错误分类的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:24:44.697

除非您要对非常庞大的数据集进行分类，否则一个简单的 for 循环应该没问题。

```
num_correct = 0;
num_wrong = 0;
for i=1:length(target_class)
    if isequal(taget_class{i}, class{i})
        num_correct = num_correct + 1;
    else
        num_wrong = num_wrong + 1;
    end
end 
```

# c# - 使用 cookie 来唯一识别用户

> ID：11584082
> 
> 赞同：0
> 
> 时间：2012-07-20T17:17:40.150
> 
> 标签：c#, asp.net, c#-4.0, webforms

我正在创建一个 asp.net 网站，我想实现一个几乎准确的计数器。据我了解，基于 SessionStart 的在线解决方案不是很准确，所以我想也许我可以在用户机器上放置一个 cookie，并在每个 SessionStart 上检查该 cookie 的存在，如果存在则不计算该请求，否则将一个添加到 Cache["hits"] 并在目标机器上创建一个新的命中 cookie。可以这样吗？

```
public void Session_Start(object sender, EventArgs e)
{
    HttpCookie cookie = Request.Cookies.Get("hitCookie");
    if(cookie == null)
    {
        object hitsObj = Cache["hits"];
        if(hitsObj != null)
        {
            int hits = Convert.ToInt32(hitsObj);
            Cache["hits"] = hits + 1;
            cookie = new HttpCookie("hitCookie");
            Response.Cookies.Add(cookie);
        }
    }
} 
```

如果您认为 cookie 可能在用户计算机上被禁用，请记住默认情况下 asp.net 成员资格也不会起作用。

**更新：** cookies 比其他计算访问者而不是您网站**成员**的方法更可靠，是的，您可以删除它们，我认为这样计算用户两次就可以了。至少我没有计算任何启动新会话的机器人或爬虫。

# asp.net-mvc-2 - ASP.NET MVC 在所有请求中保留查询参数

> ID：11584084
> 
> 赞同：0
> 
> 时间：2012-07-20T17:18:02.263
> 
> 标签：asp.net-mvc-2, httprequest, url-parameters

出于开发目的，如果主机名是 localhost，我希望始终在每个 URL 请求上保留某个查询参数。

因此，例如，如果我有：`http://localhost:12345/Home?myParam=myVal`，那么对于每个请求，`myParam=myVal`如果`hostname == "localhost"`.

我的`BaseController`班级有没有办法保留这个参数？我想这样做的原因是，在开发人员重建项目后，由于`FormsAuthentication`仍然处于活动状态（这是一件好事），我也想保留这个参数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:05:03.760

## 自定义`Route`类

这就是答案。从现有类继承并根据您的需要进行`Route`更改（附加参数）。`GetVirtualPath`

如果您不希望您的用户看到/更改查询值，您应该更改`GetRouteData`方法并在请求来自本地主机时附加您的自定义值（一如既往）。

# php - 在 Mysql 或 PHP 中处理小数精度

> ID：11584086
> 
> 赞同：2
> 
> 时间：2012-07-20T17:18:17.313
> 
> 标签：php, mysql, decimal

我有一个 MySQL 表`estimate_item`，其中包含几列保存具有固定精度的十进制值。这是我的表结构。

**表名：estimate_item**

![在此处输入图像描述](../Images/e4f91cd35833aa6a22c9d23870110437.png)

在使用 PHP 检索记录时，我使用 MySQL 的函数进行了一些基本计算，我使用的 SQL 查询就是这个。

```
SELECT 
    COUNT(ei.item_id) as total_item,
    SUM(ei.quantity) as total_quantity,
    SUM(ei.number_of_carton) as total_carton,
    SUM(ei.number_of_carton * ei.cbm_per_carton) as total_cbm,
    SUM(ei.quantity * ei.cost) as total_cost,
    SUM(ei.quantity * ei.rate) as total_rate,
    e.commission_amount,
    SUM(ei.quantity * ei.rate) + e.commission_amount as total_amount
FROM
    ai_estimate e
LEFT JOIN
    ai_estimate_item ei ON ei.estimate_id = e.id
WHERE
    ei.estimate_id = ? 
```

例如上面的查询返回结果。

```
+------------+----------------+--------------+-----------+------------+------------+-------------------+--------------+
| total_item | total_quantity | total_carton | total_cbm | total_cost | total_rate | commission_amount | total_amount |
+------------+----------------+--------------+-----------+------------+------------+-------------------+--------------+
|          2 |            120 |          807 | 1122.6440 |     2.7500 |   137.5000 |           1500.00 |    1637.5000 |
+------------+----------------+--------------+-----------+------------+------------+-------------------+--------------+ 
```

由于以下列包含 4 个精度值`total_cbm_total, total_cost, total_rate, total_amount`，我想以这种方式对所有四列的值进行四舍五入。

a）如果值是`1122.6440`然后将其四舍五入到`1122.644`

b）如果值是`2.7500`然后将其四舍五入到`2.75`

c）如果值是`137.5000`然后将其四舍五入到`137.50`

d) 如果值是`1200.0000`然后将其四舍五入到`1200.00`

即我希望这些值包含至少两个精度，根据值可以达到 3 或 4 精度。

有什么办法可以直接在 MySQL 中做到这一点？还是 PHP 方式？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:30:34.963

如果你在 MySQL 中这样做，我的猜测是你需要过度复杂化查询添加一个 CASE WHEN...END。

所以我会在 PHP 中做到这一点。

```
function reprecise($value)
{
    $two_digit = number_format($value, 2);
    $three_digit = number_format($value, 3);
    return (float)$two_digit == (float)$three_digit ? $two_digit : $three_digit;
} 
```

这使用了一个技巧 - 首先它计算两位和三位数字的表示，然后检查它们是否是相同的浮点数。如果是，则三位版本的最后一位必须为零，而使用两位版本。

要扩展到 2、3 或 4 位数字，您可以在一个循环中执行此操作：

```
function reprecise($value)
{
    $digits = 4;
    for ($rep = number_format($value, $digits--); $digits >= 2; $digits--)
    {
            $new = number_format($value, $digits);
            if ($new != $rep)
                    break;
            $rep = $new;
    }
    return $rep;
} 
```

或者，因为字符串函数很可能比 number_format 更快：

```
function reprecise($value)
{
    $digits = 9;
    $base   = strrev(number_format($value, $digits));
    for ($i = 0; $i < $digits-2; $i++)
            if ($base[$i] != '0')
                    break;
    return strrev(substr($base, $i));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:45:46.193

一种方法是使用正则表达式删除`0`小数点后数字末尾的所有内容，然后格式化具有两个小数位的数字并比较两个结果 - 返回最长的一个（按字符串）。虽然这可以在 mysql 中完成，但在 php 中会更容易：

```
//$input - number to format
//$num - minimum number of decimal places to keep
function reformat($input, $num) {
    $parse = preg_replace('/(\.[1-9]*)0+$/', "$1", $input);
    $withmin = number_format($parse, 2); 
    return strlen($withmin) < strlen($parse) ? $parse : $withmin;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T18:22:34.400

数据库方面，请注意列 cost、rate 和 cmb_per_carton 的尾随 0 的数量是由表结构预定义的，在您的情况下是 4 个 0：

```
cost DECIMAL 19,4
rate DECIMAL 19,4
cmb_per_carton DECIMAL 19,4 
```

如果您对这些字段进行操作，结果自然会有相同的尾随 0。

PHP 方面是我刚刚破解的一个简单函数，它将完成您正在寻找的内容：

```
function getDecimalFormatted($value, $minPrecision) {
    $value = (float) $value;
    return ((round((($value - floor($value))*pow(10, 5)))%1000) > 0) ? $value : number_format($value, $minPrecision, '.', '');
} 
```

使用示例：

```
$value = "1234.71200";
echo getDecimalFormatted($value, 2)."\n<br>";

$value = "1234.70000";
echo getDecimalFormatted($value, 2)."\n<br>"; 
```

这输出：

```
1234.712
1234.70 
```

# ios - iOS 在哪里设置环境变量？

> ID：11584089
> 
> 赞同：5
> 
> 时间：2012-07-20T17:18:30.320
> 
> 标签：ios, xcode, variables

在我的开发中，我希望在测试时点击开发 URL，但是当应用程序在我的 iPhone 上运行时，我希望它在生产 URL 上运行。如何在 Xcode 中进行设置？

几乎似乎我需要能够设置环境变量（在这种情况下是不同的 URL）。

我在哪里设置这些？请握住我的答案，因为我还很新

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T17:26:13.003

有很多方法可以做到这一点。我首选的方法是创建一个名为 Constants.h 的文件，如下所示：

```
//
//  Constants.h
//

#ifndef Constants_h
#define Constants_h

#pragma mark - Instances
#ifdef DEVELOPMENT
#define ROOT_URL @"http://127.0.0.1:8000"
#endif

#ifdef STAGING
#define ROOT_URL @"http://staging.example.com"
#endif

#ifdef PRODUCTION
#define ROOT_URL @"http://production.example.com"
#endif 
```

然后，我只是将它包含在我的 *-Prefix.pch 文件中，如下所示：

```
#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
    #import "Constants.h"
#endif 
```

在构建设置中，设置 DEVELOPMENT、STAGING 或 PRODUCTION = 1。

现在您可以在项目中的任何位置访问诸如 ROOT_URL 之类的内容。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T19:10:30.067

我也更喜欢这种`#define`方法。对于那些不太熟悉的人来说，这些是预处理器指令，甚至在编译器获取代码之前就已经设置好了。

`Environment variables`在程序运行时设置，并且可以在`scheme editor`Xcode 4.x+ 中进行操作。您可以设置不同的方案来满足不同的测试环境。

要在运行时从代码中访问环境变量，请使用以下命令：

```
NSString *url = @"http://standardurl.com";
NSDictionary *env = [[NSProcessInfo processInfo] environment];
NSString *overrideURL = [env valueForKey:@"url"];
if (overrideURL != nil)
  url = overrideURL; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T19:56:01.547

如果您不想使用常量文件，还可以通过添加新的字符串行来在 plist 文件中设置不同的 URL。

（虽然我承认在这里没有什么收获，但这取决于你喜欢在哪里设置你的网址）

在您的 myApp-plist 文件中添加新行，如下所示：

"DevelopmentEndpoint" "字符串" "http://development.endpoint.com"

"ProductionEndpoint" "字符串" "http://production.endpoint.com"

在您的代码中：

```
// Get endpoint from main bundle
#ifdef DEVELOPMENT
    NSString *endpoint = [[NSBundle mainBundle] objectForInfoDictionaryKey:@"DevelopmentEndpoint"];
#else
    NSString *endpoint = [[NSBundle mainBundle] objectForInfoDictionaryKey:@"ProductionEndpoint"];
#endif 
```

在您的构建设置中，在“预处理器宏”部分下添加 DEVELOPMENT 以进行调试或发布等。

# asp.net-mvc - ASP.net Routes 静态路由和静态文件

> ID：11584094
> 
> 赞同：1
> 
> 时间：2012-07-20T17:19:05.613
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

网站需要有一个网址 www.siteurl.com/file.pdf

它只会是这个文件名。它印在我们的许多出版物上作为快速参考。我需要人们在键入此 url 时直接访问 pdf 文件。

我正在尝试使用 MVC 路由，但没有成功。我一定是忽略了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:27:04.370

如果文件实际上位于站点的根目录，则不需要路由。就像您不必为您的 css、脚本文件和图像定义路由一样。使用站点根目录中的该文件的开箱即用路由将正常工作。如果您在 URL 中有指向它们的正确路径，则静态文件将返回。

# sql - 将 XML 文件读入 DataSet 并且表有 0 行，为什么？

> ID：11584095
> 
> 赞同：0
> 
> 时间：2012-07-20T17:19:10.523
> 
> 标签：sql, xml, dataset, vb.net-2010

我正在尝试将 XML 文件（由模式验证）读入数据集的第一个数据表。这样做并在我的程序中放置一个断点后，我可以看到数据表有 0 行。我无法弄清楚为什么会这样......

这是代码示例：

```
Public Sub GitRDone(ByVal sqlDT As DataTable)
        Dim ds As New DataSet
        Dim appPath As String = GetAppPath()
        Dim schemaFS As String = appPath & "blah.xsd"
        Dim xmlFS As String = appPath & "blah.xml"

        Try
            ds.Clear()
            ds.EnforceConstraints = False
            ds.ReadXmlSchema(schemaFS)
            ds.ReadXml(xmlFS)
            ds.Tables.Add(sqlDT)
        Catch e As Exception
            MsgBox(e.ToString())
        End Try
    End Sub 
```

架构示例：

```
<xsd:schema id="HCR_EmployeesSchema" 
elementFormDefault="qualified" 
targetNamespace="http://www.tempuri.org/MyDataSet.xsd" 
xmlns="http://www.tempuri.org/MyDataSet.xsd" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">          
<xsd:element name="Employees" msdata:IsDataSet="true">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="Employee">
                <xsd:complexType>
                    <xsd:sequence>
                        <xsd:element name="EmployeeID">
                            <xsd:simpleType>
                                <xsd:restriction base="xsd:string">
                                    <xsd:whiteSpace value="collapse"/>
                                </xsd:restriction>
                            </xsd:simpleType>
                        </xsd:element>
                          .....and on......
                      </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

XML 示例：

```
 <?xml version="1.0" encoding="utf-8"?>
    <Employees>
        <Employee>
            <EmployeeID>blah</EmployeeID>
         </Employee>
 </Employees> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:30:34.663

您的逻辑中必须只有一些微不足道的错误（可能是参数 - 表 - sqlDt - 您添加到数据集，但为空 - 数据集包含其他表，该表已反序列化且非空），序列化按预期工作。示例代码（没有架构，因为您提供的不完整）：

```
using System;

namespace datasetXml
{
    static class Program
    {
        const string xml = 
@"<?xml version=""1.0"" encoding=""utf-8""?>
<Employees>
    <Employee>
        <EmployeeID>blah</EmployeeID>
    </Employee>
</Employees>";
        static void Main(string[] args)
        {
            var ds = new System.Data.DataSet();
            using (var sr = new System.IO.StringReader(xml))
                ds.ReadXml(sr);
            Console.WriteLine("rows in table: " + ds.Tables[0].Rows.Count);
        }
    }
} 
```

上面的程序产生输出：表中的行：1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:02:13.327

好吧，我想通了。我需要从以下位置更改我的架构属性：

```
<xsd:schema id="EmployeesSchema" 
elementFormDefault="qualified" 
targetNamespace="http://www.tempuri.org/MyDataSet.xsd" 
xmlns="http://www.tempuri.org/MyDataSet.xsd" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"> 
```

对此：

```
<?xml version="1.0" standalone="yes" ?>
<xsd:schema id="Employees" xmlns="" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"> 
```

这里的根本问题是我的 xsd:schema id 属性是错误的。谢谢

# python - 如何使 gtk.Window() 处于活动状态？

> ID：11584098
> 
> 赞同：1
> 
> 时间：2012-07-20T17:19:56.710
> 
> 标签：python, gtk, pygtk

我已阅读[gtk: set active window](https://stackoverflow.com/questions/5393185/gtk-set-active-window)但我想在不安装 wnck 的情况下执行此操作，也 gtk.Windows.present() 对我不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:43:57.163

经过一些大调查后，我可以说没有`wnck`它没有其他方法，你的窗口管理器不能`present()`正确处理。

# visual-studio-2010 - 将字段集合传递给组装方法

> ID：11584099
> 
> 赞同：7
> 
> 时间：2012-07-20T17:19:58.260
> 
> 标签：visual-studio-2010, reporting-services, ssrs-2008

我有一个 SSRS 2008 R2 报告，其中包含一些自定义代码，可对数据集中的多个字段进行操作。为了简化调用它（两个参数而不是 8 个），我将 Fields 集合传递给函数，如下所示：

```
Public Function BPLatest(whichBP as String, Fields as Fields) as Integer 
```

因为我刚刚意识到我需要在另一个报告中使用该代码，所以我认为我可以在 C# 2010 Express 中创建一个自定义程序集，而不是剪切和粘贴它。但是，到目前为止我所做的搜索让我相信我不能在程序集中使用 Fields 集合，即使像上面那样传入也是如此。真的是这样吗？如果不是，那么正确的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T20:11:33.490

运行表达式`=GetType(Fields).FullName`告诉我类型是`Microsoft.ReportingServices.ReportProcessing.ReportObjectModel.Fields`

它定义在`Microsoft.ReportingServices.ProcessingObjectModel.dll`

据我所知，Fields 集合中的对象是非常动态的，它们仅在调用范围内才有意义。

`Fields`总体而言，不建议将整个集合传递到自定义代码中。

# javascript - 如何在javascript中通过键获取对象的值？

> ID：11584100
> 
> 赞同：0
> 
> 时间：2012-07-20T17:19:57.760
> 
> 标签：javascript, json, object, associative-array

我正在使用 var result = $.getJSON 获取数据。

当我 console.log(result); 我得到这个对象：

```
Object
    abort: function (a){a=a||"abort",p&&p.abort(a),w(0,a);return this}
    always: function (){i.done.apply(i,arguments).fail.apply(i,arguments);return this}
    complete: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
    done: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
    error: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
    fail: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
    getAllResponseHeaders: function (){return s===2?n:null}
    getResponseHeader: function (a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c}
    isRejected: function (){return!!e}
    isResolved: function (){return!!e}
    overrideMimeType: function (a){s||(d.mimeType=a);return this}
    pipe: function (a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()}
    progress: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
    promise: function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}
    readyState: 4
    responseText: "{'result':'success'}"
    setRequestHeader: function (a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this}
    state: function (){return e}
    status: 200
    statusCode: function (a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this}
    statusText: "OK"
    success: function (){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this}
    then: function (a,b,c){i.done(a).fail(b).progress(c);return this}
__proto__: Object 
```

如何获取 statusText 键的值？（在这种情况下是“好的”）；

我试过 console.log(result.statusText) 和 console.log(result['statusText'] 但都返回未定义。什么给出？

编辑：这是我正在使用的实际代码。

```
 $j(".buyNowButton").click(function(){
      var qty = $j(this).attr('qty');
      var product_id = $j(this).attr("product_id");

      var params = "product_id=" + product_id + "&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;qty=" + qty;        

      var result = $j.getJSON("/acumen/scripts/addToCart.php", params, function(data, textStatus){
            console.log(textStatus);
           if (textStatus == "error"){
                alert("There was an error adding this item to your cart.  Please call customer service for assistance.", "Error");
                return;
           };
           if (data.result == "error"){
                alert("Sorry, an error occurred while adding the item to your cart.  The error was: '" + data.message + "'");
                return;
           };
      }); 
      console.log(result);
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:27:12.997

听起来您没有正确使用该对象。使用 时`console.log(result)`，您看到结果文本的唯一原因是 Firebug 控制台更新了参考值。如果您尝试访问`result.statusText`同一行的代码，则不会得到结果，因为请求可能尚未真正完成。

这一行：

```
var result = $.getJSON 
```

给你请求对象本身。如果要处理响应，请在回调函数中执行此操作：

```
$.getJSON('request/url/goes/here', request_data, function(result) {
    // this is where you do something with your json data
}); 
```

...了解这`getJson`是执行此操作的“快速别名”：

```
$.ajax({
  url:'request/url/goes/here',
  dataType: 'json',
  data: request_data,
  success: function (result) {
      // this is where you do something with your json data
  }
}); 
```

你说响应是文本“ok”；我建议您不要使用`getJson`，因为它期望响应是 json 数据。反而：

```
$.ajax({
  url:'request/url/goes/here',
  data: request_data,
  success: function (result) {
      // this is where you do something with your response string "ok"
  }
}); 
```

.. 请注意，我没有将回调的数据类型指定为 json。jQuery 会自动检测它。

**文档**

*   `jQuery.getJSON`- [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)
*   `jQuery.ajax`- [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:21:32.757

很简单：

```
result.statusText 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:30:44.383

你的`result`变量是一个返回的[承诺](http://api.jquery.com/category/deferred-object/)，`$.getJSON()`而不是你的 JSON 数据。您需要使用成功回调。

下面是一个如何使用 getJSON 的简单示例：

[http://www.jquery4u.com/json/ajaxjquery-getjson-simple/](http://www.jquery4u.com/json/ajaxjquery-getjson-simple/)

# .htaccess - 限制 POST 请求服务器

> ID：11584101
> 
> 赞同：10
> 
> 时间：2012-07-20T17:19:59.763
> 
> 标签：.htaccess, post, get, request

我想限制来自其他服务器的所有 POST 请求，`.htacces` 如果他们尝试从其他服务器发布任何内容，他们将被重定向到主页或 404 等。我试过这个

```
<Limit POST>  
order deny,allow  
deny from all 
allow from 127.0.0.1
</Limit> 
```

注意：- 允许来自所有服务器的 GET 请求。仅用于阻止 POST 请求。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T17:28:11.497

该块只会阻止来自 127.0.0.1 以外的主机的 POST 请求，并且您将收到 403 Forbidden 响应。您可以尝试使用 mod_rewrite 并将其替换为`<LIMIT>`：

```
RewriteCond %{REQUEST_METHOD} POST

# allow the server to POST to itself
RewriteCond %{REMOTE_ADDR} !127.0.0.1   

# allow POST from trusted users
RewriteCond %{REMOTE_ADDR} !123.456.789.123   

# send all other post requests to 403 forbidden
RewriteRule ^ / [F] 
```

如果您希望将发布请求发送到您网站的主页，而不是`[F]`在最后一行替换为`[R,L]`

如果`/`它不只是`/`.

# python - 在 xpath 中使用“或”运算符时合并输出

> ID：11584103
> 
> 赞同：1
> 
> 时间：2012-07-20T17:20:16.047
> 
> 标签：python, xpath

我有一个 xpath 表达式，它使用“|”-操作符来选择网页的多个节点/div。

这是表达式：

```
hxs.select('//div[@class="cat"]/p|//div[@class="entry"]').extract() 
```

但是当我输出结果时，我在第一个表达式的输出之间得到一个逗号

```
//div[@class="cat"]/p 
```

第二个

```
//div[@class="entry"] 
```

喜欢：

```
'Lorem ipsum', 'Ipsum Lorem' 
```

有没有办法摆脱逗号？

喜欢：

```
'Lorem ipsum Ipsum lorem' 
```

或者是否有更好的方法来编写选择 THIS div AND THIS div 的 xpath 表达式。

应用程序的其余部分是用 Python 编写的，但我认为这与问题无关。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:52:14.177

使用[`join()`](http://docs.python.org/library/string.html#string.join).

```
" ".join(hxs.select('//div[@class="cat"]/p|//div[@class="entry"]').extract()) 
```

# c - 空指针赋值错误！

> ID：11584104
> 
> 赞同：0
> 
> 时间：2012-07-20T17:20:24.603
> 
> 标签：c, nullpointerexception, dijkstra

以下是 Dijkstra 最短路径算法的代码。该代码适用于小输入，但我需要它用于 200 的 2d 数组大小。所以我使用了动态内存分配。它仍然给出一个空指针分配错误。谁能帮我找到另一种方法来读取大尺寸的二维数组。

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

void dij(int n,int v,int **c,int *d)
{
    int i,u,count,w,f[300];
    int min;

    for(i=1;i<=n;i++)
    {
        f[i]=0;d[i]=c[v][i];
    }

    f[v]=1,d[v]=1;

    count=2;

    while(count<=n)
    {
        min=1000000;
        for(w=1;w<=n;w++)
            if((d[w]<min)&&!f[w])
            {
                min=d[w];u=w;
            }
        f[u]=1;
        count++;

        for(w=1;w<=n;w++)
            if(((d[u]+c[u][w])<d[w])&&!f[w])
                d[w]=d[u]+c[u][w];
    }

}

int main()
{
    int v=1,n=4,i,j,k,len;
    char str[20];
    int **c,*d,val;

    d=(int*)malloc(n*sizeof(int));
    c=(int**)malloc(n*sizeof(int*));
    for(i=1;i<=n;i++)
        c[i]=(int*)malloc(n*sizeof(int));

    for(i=1;i<=n;i++)
        for(j=1;j<=n;j++)
            c[i][j]=0;
    for(k=0;k<=n;k++)
    {
        do
        {
            scanf("%s",&str);
            len=strlen(str);
            if(len>3)
            {
                sscanf(str,"%d,%d",&j,&val);
                c[k][j]=val;
            }
            else break;
        }
        while(1);
    }

    for(i=1;i<=n;i++)
        for(j=1;j<=n;j++)
        {
            if(c[i][j]==0)
                c[i][j]=1000000;
        }

    printf("enter the source\n");

    scanf("%d",&v);

    dij(n,v,c,d);

    printf("shortest path from\n");

    for(i=1;i<=n;i++)
        if(i!=v)
            printf("%d -> %d=%d\n",v,i,d[i]);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:24:09.253

```
for(i=1;i<=n;i++) 
```

数组索引从零开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:27:04.340

f 是 [300]，你试过 298 299 300 301 和 302 吗？所有相同或 300,301,302 是错误的？

在函数 dij() 中，i 的最大值为 n，当你设置 n 大于 300 时，它会给出错误

```
 int i,u,count,w,f[300];  // f[300]<---------constant size
 int min;

  for(i=1;i<=n;i++)

  {
     f[i]=0;d[i]=c[v][i];// here i goes to n, while f[] is f[300]

   } 
```

# android - 安卓超大屏怎么处理？

> ID：11584107
> 
> 赞同：2
> 
> 时间：2012-07-20T17:20:28.103
> 
> 标签：android, layout, xoom

我开发了一个时钟小部件。在许多设备上看起来都不错。摩托罗拉 Xoom 除外，因为它属于 XLARGE 类别。

这是clock.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="#00000000"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

<AnalogClock android:id="@+id/AnalogClock" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:dial="@drawable/widgetclock" 
    android:hand_hour="@drawable/widgethour" 
    android:hand_minute="@drawable/widgetminute" /> 

    <!-- Time Row -->
    <LinearLayout
        android:id="@+id/lltimeheaderrow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:orientation="horizontal"
        android:layout_gravity="center|top"
        android:layout_marginTop="45dp"
        android:visibility="gone">

        <!-- TIME -->
        <LinearLayout android:id="@+id/llTimeDefault"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:gravity="center">

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="horizontal">

            <TextView
                android:id="@+id/HOUR"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/my_gray"
                android:textStyle="bold"
                android:textSize="15sp"/>

            <TextView
                android:id="@+id/MINUTE"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/my_gray"
                android:textStyle="bold"
                android:textSize="15sp" />
            </LinearLayout>

            <TextView
                android:id="@+id/AM_PM"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/my_gray"
                android:textStyle="bold"
                android:textSize="13sp"
                android:padding="1dp" />                        
        </LinearLayout> 
    </LinearLayout>     

    <!-- Calendar Graph -->
    <LinearLayout
        android:id="@+id/llCalGraph"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_gravity="center|left"    
        android:layout_marginLeft="45dp">   
            <FrameLayout android:layout_width="fill_parent"
                android:layout_height="fill_parent">
                <ImageView
                    android:id="@+id/CalendarImg"
                    android:src="@drawable/calendar"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>                      
                <TextView android:id="@+id/DateDayG"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center|top"
                    android:layout_marginTop="3dp"
                    android:textSize="11sp"
                    android:textStyle="bold"
                    android:textColor="@color/my_gray"
                    android:shadowColor="@color/my_black"
                    android:shadowDx="1"
                    android:shadowDy="1"
                    android:shadowRadius="2"                
                    ></TextView>       
                <TextView android:id="@+id/DateNoG"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginTop="5dp"
                    android:textSize="25sp"
                    android:textColor="@color/my_gray"
                    ></TextView>    
            </FrameLayout>              

    </LinearLayout>             

    <!-- BATTERY -->
    <LinearLayout
        android:id="@+id/llBattGraph"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:layout_gravity="center|right"
        android:layout_marginRight="45dp">              
            <FrameLayout android:layout_width="fill_parent"
                android:layout_height="fill_parent">
                <ImageView
                    android:id="@+id/BatteryImg"
                    android:src="@drawable/batt_00"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
                <ImageView
                    android:id="@+id/BatteryFlashing"
                    android:src="@drawable/flashing"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginTop="13dp"
                    android:layout_marginLeft="2dp"
                    android:visibility="gone" />                        
                <TextView
                    android:id="@+id/BatteryLevel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textColor="@color/my_gray"
                    android:textSize="18sp"
                    android:layout_gravity="center" />

            </FrameLayout>              
    </LinearLayout>                     

    <!-- Weather Row -->
    <LinearLayout
        android:id="@+id/llweatherrow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"        
        android:orientation="horizontal"
        android:layout_gravity="center|bottom"
        android:layout_marginBottom="45dp"> 

        <!-- WEATHER IMAGE -->
        <LinearLayout
            android:id="@+id/llWeatherImage"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="visible"
            android:layout_gravity="center">

            <ImageView android:id="@+id/ivWeather"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/w3200"
                />
        </LinearLayout> 

    </LinearLayout>     

</FrameLayout> 
```

基本上它在小部件上有 4 个元素。上，下。左右部分。我只是使用 FrameLayout 作为基本布局，每个元素都使用 LinearLayout，每个角落的重力为 45dp。

这就是小部件在 Xoom 上的外观我期望元素位置应该在我绘制的红色圆圈上。

1.  我应该使用什么最佳布局组合？你能建议吗？
2.  假设我坚持这种布局。如何为 Xoom 设备提供替代布局？我试图将 clock.xml 放在 layout-xlarge 和 drawable-xlarge 上，但什么也没有......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:41:35.363

最好和更简洁的方法是创建一个文件夹`layout-xlarge`，并在其中包含`clock.xml`目标设备具有 xlarge 布局时将加载的文件夹。

通过这种方式，您可以根据屏幕尺寸、密度等进行不同的布局。从开发人员文档[http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts 获得](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

另一种解决方案是将所有大小都放在某个文件中`45dp`或`Xdp`放入文件中的 values 文件夹中`dimen`，然后在您的 xml 中将它们声明为：`...="@dimen/largeButton"`并使用与前面提到的相同的方式创建相应的文件`values-xlarge`并在其中添加适当的`dimen`文件。

这是非常有用的机制，因为您可以根据屏幕的大小创建不同的布局，并使其能够获得每个大小的不同密度像素。如果您还没有听说过这些条款中的任何一个，请让我提供更多详细信息。

编辑：来自文档

```
res/layout/my_layout.xml             // layout for normal screen size ("default")

res/layout-small/my_layout.xml       // layout for small screen size

res/layout-large/my_layout.xml       // layout for large screen size

res/layout-xlarge/my_layout.xml      // layout for extra large screen size

res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation 
```

你确定正是这种目录吗？与任何地方的布局具有相同的文件名`clock.xml`？

另一个编辑评论：

它的效率要高得多，因为您可以猜到，仅替换数字而不是加载完整的布局文件夹的转换效率要高得多。尽管如此，您可以重用维度而不是在布局之间来回检查“那个维度又是什么？” 就像在一个大按钮的固定尺寸中一样。

更重要的是，每个文件夹都可以出于特定原因进行扩展。如果您想要相同的布局但不同的尺寸，那么您应该覆盖尺寸而不是复制粘贴整个布局。更有意义，不是吗？

因为努力几乎是一样的。像`layout-large/`文件夹一样，您将拥有`values-large/`. 在我提供的文件和互联网上都有一个很好的例子。

# php - 加载 Zend Optimizer for php 5.3

> ID：11584109
> 
> 赞同：1
> 
> 时间：2012-07-20T17:20:52.933
> 
> 标签：php, zend-optimizer

我按照他们的指南[http://kb.zend.com/index.php?View=entry&EntryID=424](http://kb.zend.com/index.php?View=entry&EntryID=424)在我的 php.ini 中启用 Zend Optimizer，但它无法正常工作。

在 php.ini 我有

```
zend_extension_ts = "ZendLoader.dll" 
```

php.ini 已正确加载，在我遇到类似问题之前，`Failed loading ZendLoader.dll`但后来我发现我需要使用`zend_extension_ts`而不是`zend_extension`因为我的 php 是 TS 版本。

现在 PHP 没有显示任何错误，但是在 phpinfo() 或 PHP -m 中，我没有看到加载任何 zend 扩展。有人建议我如何使它工作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T18:05:35.663

PHP 5.3 不存在 Zend Optimizer。

该产品在针对 PHP 5.3 发布时更名为 ZendGuard。然而，ZendGuard 不能加载为 Zend Optimizer 编码的文件，反之亦然——它们实际上是两个独立的产品。如果您有一个为 Zend Optimizer 编码的应用程序，那么您将被困在 PHP 5.2 上。

# html - 从 Apps 脚本提供的 HTML 中发布 YouTube 视频

> ID：11584115
> 
> 赞同：0
> 
> 时间：2012-07-20T17:21:09.303
> 
> 标签：html, youtube, embed, google-apps-script

我正在使用 Apps Script 提供一个 HTML 页面

```
 function doGet() {
      return HtmlService.createHtmlOutputFromFile('Generic.html');
    } 
```

在 Generic.html 中，我尝试了几件事。从 YouTube 嵌入的普通“iframe”肯定不起作用。

```
 <iframe width="420" height="315" src="http://www.youtube.com/embed/bTiUVMQV0Ko" frameborder="0" allowfullscreen></iframe> 
```

尝试了来自 youtube 的“旧版嵌入”：

```
 <object width="420" height="315"><param name="movie" value="http://www.youtube.com/v/bTiUVMQV0Ko?version=3&amp;hl=en_US"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/bTiUVMQV0Ko?version=3&amp;hl=en_US" type="application/x-shockwave-flash" width="420" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object> 
```

当我将旧版本直接嵌入站点 html 页面（而不是通过应用程序脚本提供）时，它将它变成一个 google 小工具并以这种方式显示代码：

```
 <img src="https://www.google.com/chart?chc=sites&amp;cht=d&amp;chdp=sites&amp;chl=%5B%5BGoogle+Gadget%27%3D20%27f%5Cv%27a%5C%3D0%2710%27%3D419%270%27dim%27%5Cbox1%27b%5CF6F6F6%27fC%5CF6F6F6%27eC%5C0%27sk%27%5C%5B%22Embed+gadget%22%27%5D%27a%5CV%5C%3D12%27f%5C%5DV%5Cta%5C%3D10%27%3D0%27%3D420%27%3D312%27dim%27%5C%3D10%27%3D10%27%3D420%27%3D312%27vdim%27%5Cbox1%27b%5Cva%5CF6F6F6%27fC%5CC8C8C8%27eC%5C%27a%5C%5Do%5CLauto%27f%5C&amp;sig=lwVR4P8OQYTVXxdmEdsObNHzN2M" data-igsrc="http://0.gmodules.com/ig/ifr?mid=0&amp;synd=trogedit&amp;url=http%3A%2F%2Fwww.gstatic.com%2Fsites-gadgets%2Fembed%2Fembed.xml&amp;up_embed_snippet=%3Cobject%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20height%3D%22315%22%20width%3D%22420%22%3E%3Cparam%20name%3D%22movie%22%20value%3D%22http%3A%2F%2Fwww.youtube.com%2Fv%2FbTiUVMQV0Ko%3Fversion%3D3%26amp%3Bhl%3Den_US%22%20%2F%3E%3Cparam%20name%3D%22allowFullScreen%22%20value%3D%22true%22%20%2F%3E%3Cparam%20name%3D%22allowscriptaccess%22%20value%3D%22always%22%20%2F%3E%3Cembed%20allowfullscreen%3D%22true%22%20allowscriptaccess%3D%22always%22%20height%3D%22315%22%20src%3D%22http%3A%2F%2Fwww.youtube.com%2Fv%2FbTiUVMQV0Ko%3Fversion%3D3%26amp%3Bhl%3Den_US%22%20type%3D%22application%2Fx-shockwave-flash%22%20width%3D%22420%22%20%2F%3E%3C%2Fobject%3E&amp;w=420&amp;h=315" data-type="ggs-gadget" data-props="height:315;igsrc:http#58//0.gmodules.com/ig/ifr?mid=0&amp;synd=trogedit&amp;url=http%3A%2F%2Fwww.gstatic.com%2Fsites-gadgets%2Fembed%2Fembed.xml&amp;up_embed_snippet=%3Cobject%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20height%3D%22315%22%20width%3D%22420%22%3E%3Cparam%20name%3D%22movie%22%20value%3D%22http%3A%2F%2Fwww.youtube.com%2Fv%2FbTiUVMQV0Ko%3Fversion%3D3%26amp%3Bhl%3Den_US%22%20%2F%3E%3Cparam%20name%3D%22allowFullScreen%22%20value%3D%22true%22%20%2F%3E%3Cparam%20name%3D%22allowscriptaccess%22%20value%3D%22always%22%20%2F%3E%3Cembed%20allowfullscreen%3D%22true%22%20allowscriptaccess%3D%22always%22%20height%3D%22315%22%20src%3D%22http%3A%2F%2Fwww.youtube.com%2Fv%2FbTiUVMQV0Ko%3Fversion%3D3%26amp%3Bhl%3Den_US%22%20type%3D%22application%2Fx-shockwave-flash%22%20width%3D%22420%22%20%2F%3E%3C%2Fobject%3E&amp;w=420&amp;h=315;mid:0;spec:http#58//www.gstatic.com/sites-gadgets/embed/embed.xml;up_embed_snippet:&lt;object xmlns=&quot;http#58//www.w3.org/1999/xhtml&quot; height=&quot;315&quot; width=&quot;420&quot;&gt;&lt;param name=&quot;movie&quot; value=&quot;http#58//www.youtube.com/v/bTiUVMQV0Ko?version=3&amp;amp#59hl=en_US&quot; /&gt;&lt;param name=&quot;allowFullScreen&quot; value=&quot;true&quot; /&gt;&lt;param name=&quot;allowscriptaccess&quot; value=&quot;always&quot; /&gt;&lt;embed allowfullscreen=&quot;true&quot; allowscriptaccess=&quot;always&quot; height=&quot;315&quot; src=&quot;http#58//www.youtube.com/v/bTiUVMQV0Ko?version=3&amp;amp#59hl=en_US&quot; type=&quot;application/x-shockwave-flash&quot; width=&quot;420&quot; /&gt;&lt;/object&gt;;width:420;" style="display:block;text-align:left;margin-right:auto;" class="igm" height="315" width="420"> 
```

也试过把它放在我的 Generic.html 页面上，但只是得到灰色的 Google Gadget 屏幕。

有任何想法吗？（包括 Google 网站和嵌入/iframe 的任何一般解决方法提示）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:34:44.600

[Caja](http://caja.appspot.com/#examples/flash2.html)网站上有演示代码。此代码“应该”有效，但不能：

```
function doGet() {
  return HtmlService.createHtmlOutput(
    '<object width="240" height="195">' +
    '<param name="movie" value="http://www.youtube.com/v/unhiT2D6WvE?' +
    'version=3&hl=en_US"></param>' + 
    '<param name="allowFullScreen" value="true"></param>' + 
    '<param name="allowscriptaccess" value="always"></param>' + 
    '<embed src="http://www.youtube.com/v/unhiT2D6WvE?' + 
    'version=3&hl=en_US" type="application/x-shockwave-flash" ' + 
    'width="240" height="195" allowscriptaccess="always" allowfullscreen="true">' + 
    '</embed></object>');
} 
```

我不清楚为什么它没有。可能是我们没有正确地允许闪现通过沙箱；如果是这样，我们将修复它。

# magento - 相同的 SKU，不同的标题和描述

> ID：11584119
> 
> 赞同：1
> 
> 时间：2012-07-20T17:21:32.867
> 
> 标签：magento

我想在我的 Magento 商店中拥有 SKU 相同但标题和描述不同的文章。然而，Magento 不允许这样做，因为 SKU 必须是唯一的（当然这是有道理的，但不适用于我的情况）。

背景：汽车零件店：同一种物品可能适合汽车上的不同位置。因此，为同一篇文章添加另一篇具有不同 SKU/标题/说明的文章是没有意义的。

因此，目标是让多个产品具有相同的 SKU，但具有其他描述和标题。

任何想法如何用 Magento 处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T13:17:51.467

我不知道如何在 Magento 中执行您需要的操作。但我想让你知道，2.5 年来，我一直在销售大量相同产品但适用于不同型号电子设备的产品。它由 eBay Turbolister 管理。它是相同的 SKU 或更好但相同的 CUSTOM LABEL，用于 2000 种不同的型号，它们与您所做的完全相同。

5 年来，我一直在 eBay 上以与您类似的方式销售批量产品。我使用涡轮增压器。在 Turbolister 中，我使用所谓的自定义标签来管理 6,500 个列表并依赖 2 个帐户。

我正在使用 YII PHP 框架和 MySQL 来构建我自己的价格更新程序，该程序是从 100 个通过谷歌文档更新的不同 SKU 中提取的。然后在我用 XAMPP 在我的计算机上运行的 YII Web 应用程序中完成计算。现在制作表格和 PHP 编程来交叉引用这 100 个不同的 SKU 到 eBay 上 6500 个列表的唯一项目编号。对于那些认为不应该这样做的每个人......嗯，必须这样做，我已经这样做了 2.5 年+....这是 100 个 SKU 引用中的 1 个 2000 个唯一项目 ID 引用通过 Turbolister 在 eBay 上为各种型号的电子设备提供 2000 个不同的列表标题。并且几个不同的 SKU 分别通过 eBay 上的项目编号引用了几个不同的唯一列表标题。

所以人们，克里斯的要求并没有错或疯狂……这是必须要做的，必须要做的！我认为你必须为 Magento 写一个扩展来做你想做的事。或者也许已经有一个扩展。

我写在这里的主要目的是让你知道你可以而且应该做你所要求的。

克里斯，你能想象在 eBay 上为 2000 个不同的列表标题拥有 2000 个不同的 SKU，而实际上需要订购的只是 1 个且只有 1 个 SKU？我绝不会想要那个。而是按照您和我使用 1 个 SKU 的方式进行操作，仅引用数千个采用完全相同类型的 SKU 的列表。嘿，我愿意接受建议，但我已经成功地这样做了 2.5 年。

引自 eBay API，“SKU 不需要是唯一的。卖家可以在一件商品或多件商品上指定特定的 SKU 值。” - 来源：http: [//developer.ebay.com/devzone/xml/docs/reference/ebay/GetSellerList.html](http://developer.ebay.com/devzone/xml/docs/reference/ebay/GetSellerList.html)

“当您通过商品 ID（默认跟踪方法）跟踪商品时，SKU 不需要是唯一的。卖家可以在一件商品或多件商品上指定特定的 SKU。” - 来源：http: [//developer.ebay.com/devzone/xml/docs/reference/ebay/GetItem.html](http://developer.ebay.com/devzone/xml/docs/reference/ebay/GetItem.html)

简而言之，我不是通过 SKU 跟踪我的列表，而是通过 eBay 自动分配给我的 6,500 个活动列表中的每一个的项目 ID。相反，我只是使用该 SKU 来引用我所有采用该确切类型 SKU 的列表......然后我可以很容易地知道需要订购什么。拍摄，这真是太啰嗦了……无论如何，迟到的时候还是要回到 YII 中编程。是的，YII 摇滚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:05:36.777

换一种方式想一想：

具有给定 SKU 的项目有四个可能的安装位置，所有这些位置都适用于四年的四种不同车辆。您是否始终保留 4x4x4 = 64 数量以满足最终用途，并且您的仓库中是否有 64 个点存放此物品？可能不会！

SKU 是库存商品的单一全球识别标记。您将需要为您的项目创建属性以用于建模和展示装修细节。

您可能想使用或引导您的实现[扩展](http://www.magentocommerce.com/magento-connect/year-make-model-extension.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:27:17.660

覆盖默认的 Magento 以允许这种解决方法是一个非常糟糕的主意。这不仅会非常耗时，而且还可能导致许多功能问题。

我的建议是：

A、基于同一个SKU库创建多个产品，即ABC123-1、ABC123-2等。

B. 在产品上创建必须是唯一的属性。根据类别，从各自的属性中加载信息。当然，您必须考虑通过搜索加载产品时会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T20:06:10.567

我自己对它们没有太多经验，但这听起来像是可[配置产品的教科书示例。](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-06T02:11:41.683

没有可配置的产品不是我需要的。其实我找到了解决办法。

对于我的问题，我需要将目录输入类型从下拉更改为多项选择。但是，Magento 开发人员发现使这种更改变得不可能是合适的。您必须在创建属性时选择类型，但以后不能更改它，除非您想使用您的数据库和代码。少说很不方便...因为我不想冒险弄乱我的系统，所以我刚刚创建了一个带有多项选择选项的新属性，我现在正在为我的产品替换属性...

# c++ - Ordered ArrayList 的插入方法中的错误

> ID：11584123
> 
> 赞同：1
> 
> 时间：2012-07-20T17:21:45.117
> 
> 标签：c++, arrays

嘿，我正在为 C++ 制作一个有序 ArrayList，用于插入数字并用该数字替换 ArrayList 中的空格的函数之一不起作用。我收到一条错误消息：错误 C2065：index_undeclared 标识符；

这是我的代码：

## 有序数组.cpp

```
#include"OrderedArray.h"//To allow the use of Array.h Header file.
#include<iostream>
using namespace std;// To allow the use of the standard library.

int main()//Main method for OrederedArray.cpp.
{
    //Creating an array with the Datatype in from the template.
    OrderedArray<int> intArray(10);
    //Filling the Array(intArray)with elements from 1-10.
    intArray[0] = 1;
    intArray[1] = 200;
    intArray[2] = 323;
    intArray[3] = 976;
    intArray[4] = 545;
    intArray[5] = 767;
    intArray[6] = 234;
    intArray[7] = 123;
    intArray[8] = 456;
    intArray[9] = 789;

    intArray.printArray();
    intArray.Remove(7);
    intArray.printArray();
    intArray.Insert(1232,1);
    intArray.printArray();

getchar();
getchar();
} 
```

## 有序数组.h

```
//Header file for OrderedArray.cpp.
#ifndef ORDEREDARRAY_H
#define ORDEREDARRAY_H
//Template for use with the Array's data type.
template<class Datatype>
//***************************************************************************************
class OrderedArray
{

private:

//Member Variables.
    int size;
    int grow_size;
    int num_elements;
    Datatype* m_array;
//***************************************************************************************

public:
//Constructor.
    OrderedArray( int p_size)
    {
        m_array = new Datatype[p_size];
        size = p_size;
    }
//***************************************************************************************

//Destructor.
    ~OrderedArray()
    {
        if( m_array!= 0 )
            delete[] m_array;
        m_array= 0;
    }
//***************************************************************************************

//Access Operator: Syntax to allow the use of editing.
    Datatype& operator[] ( int p_index)
    {
        return m_array[p_index];
    }
//***************************************************************************************

//Functions.
    void ArrayFunction( int* p_array)
    {
    p_array[0] = 10;
    }
//Print Function: To print out all elemenst in the Array.
    void printArray()
    {
        for(int i=0;i< size;i++)
        {
            cout << "Position: " <<m_array[i]<<endl;
        }

    }
//***************************************************************************************

//Resize Function: To resize the Array.
    void Resize( int p_size)
    {
        Datatype* newarray = new Datatype[p_size];
        if( newarray== 0 )
            return;
        int min;
        if( p_size< size)
            min = p_size;
        else
            min = size;
        int index;
        for( index = 0; index < min; index++ )
            newarray[index] = m_array[index];
        m_size= p_size;
        if( m_array!= 0 )
            delete[] m_array;
        m_array= newarray;
    }
//***************************************************************************************

//Remove Function: To remove an element in an Array.
    void Remove( int p_index)
    {
        int index;
        for( index = p_index+ 1; index < size; index++ )
            m_array[index -1] = m_array[index];
    }
//***************************************************************************************
    //Size Function: To get the size of the Array.
    int Size()
    {
        return size;
    }
//***************************************************************************************
//Insert Function: To insert an element into the array between points in the index.
    void Insert( Datatype p_item, int p_index)
    {
        for(int index = size-1; index > p_index; index—)
        m_array[index] = m_array[index -1];
        m_array[p_index] = p_item;
    }
//***************************************************************************************
//***************************************************************************************

};

#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:24:44.260

你这样说：

```
 void Insert( Datatype p_item, int p_index)
{
    for(int index = size-1; index > p_index; index-)
    m_array[index] = m_array[index -1];
    m_array[p_index] = p_item;
} 
```

什么时候应该是这样的：

```
void Insert( Datatype p_item, int p_index)
{
    for(int index = size-1; index > p_index; index--)
    m_array[index] = m_array[index -1];
    m_array[p_index] = p_item;
} 
```

请注意修改后的代码片段中*for*语句末尾的*索引。*

# matlab - 如何在matlab中创建一维数组？

> ID：11584127
> 
> 赞同：1
> 
> 时间：2012-07-20T17:22:25.493
> 
> 标签：matlab

我想在 MATLAB 中的 for 循环中创建一个单维数组，请帮助使用以下代码：

```
count = 0;  
for i=1:10  
arr = count;  
count = count+1;    
end 
```

当我执行这个小代码时，我得到了 9 作为 arr 的结果。

而不是这个我想要一个数组arr，每次迭代i都有10个计数值，请帮助.....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T20:56:55.880

在 Matlab 中有几种创建数组的方法。你最常遇到的是

*   通过范围表达式：

    ```
    a = 1 : 10;    % Creates a row vector [1, 2, ... 10]
    a = (1 : 10)'; % Creates a column vector [1, 2, ... 10]^T. 
    ```

*   通过生成函数：

    ```
    a = zeros(1, 10); % Creates a 1x10 (=row vector) containing 10 zeros.
    a = zeros(10, 1); % Creates a 10x1 (=column vector) containing 10 zeros. 
    ```

    其他生成函数是`ones`创建元素全为 1`rand`的向量/矩阵，生成具有均匀分布的随机数的向量/矩阵， `randn`用于具有高斯分布的随机矩阵等。

*   通过连接（这很**慢**，但易于实现，有时无法避免）：

    ```
    % Create a vector containing the numbers 1, 4, 9, 16, ... 100.
    a = [];
    for idx = 1 : 10
        a = [a, idx^2];   % Creates a row vector.
        % a = [a; idx^2]; % Creates a column vector.
    end 
    ```

*   通过分配给大于当前大小的数组索引（如果在循环中完成，则再次**缓慢）：**

    ```
    % Create a vector containing the numbers 1, 4, 9, 16, ... 100.
    for idx = 1 : 10
        a(idx) = idx^2;
    end 
    ```

    **注意：**我不确定这是否适用于每个版本的 Matlab。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T17:29:50.420

```
arr = zeros(10,1); % to initialize array
count = 0;  
for i=1:10  
arr(i) = count;  
count = count+1;    
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:32:24.217

为了给数组赋值，你需要告诉matlab你想要它在数组中的哪个位置。

首先，创建一个大小合适的零数组

```
arr = zeros(1,10); 
```

然后你可以分配给`count`元素`i``arr`

```
arr(i) = count; 
```

所以你提供的代码变成了

```
count = 0;
arr = zeros(1,10);
for i=1:10
    arr(i) = count;
    count = count + 1;
end 
```

当然，正如其他人所提到的，有更简单的方法来完成这项特定任务，例如

```
arr = 0:9; 
```

哪里`0:9`是 matlab 简写“包含整数 0 到 9 的行数组”。

# objective-c - 首先在 /Application 文件夹中搜索应用程序

> ID：11584134
> 
> 赞同：2
> 
> 时间：2012-07-20T17:23:11.077
> 
> 标签：objective-c, cocoa, nsurl, nsworkspace

我正在寻找一种使用参数打开我的其他应用程序的方法，并在[这里找到了一个非常好的帖子](https://stackoverflow.com/questions/5048677/launching-an-mac-app-with-objective-c-cocoa)，但是在我的开发人员机器上，我的应用程序有 10 个测试/分支/发布版本，而 /Application 文件夹中只有一个当前稳定版本.

这两个代码：

```
NSWorkspace *workspace = [NSWorkspace sharedWorkspace];

NSURL *url = [NSURL fileURLWithPath:[workspace fullPathForApplication:@"My Application"]];
NSURL *url = [workspace URLForApplicationWithBundleIdentifier:@"it.my_company.my_application"]; 
```

指向错误的测试/分支/发布版本。如何在 /Application 文件夹中找到我的应用程序的 URL，或者至少是与我当前正在运行的应用程序处于同一级别的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:49:18.907

您可以使用`NSTask`messages:[`setLaunchPath`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)或[`launchedTaskWithLaunchPath`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)为您的其他应用程序提供显式路径。

就像是：

```
NSArray *args = [NSArray arrayWithObjects:nil];
[NSTask launchedTaskWithLaunchPath:@"/Applications/My Application.app/Contents/MacOS/My Application" arguments:args]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T14:27:01.473

这就是我出来使用的：

```
NSWorkspace *workspace = [NSWorkspace sharedWorkspace];

NSString *appPath = [[[NSBundle mainBundle] bundlePath] stringByDeletingLastPathComponent];
appPath = [appPath stringByAppendingPathComponent:@"MyApp.app"];

if (not [[NSFileManager defaultManager] fileExistsAtPath:appPath])
    appPath = @"/Applications/MyApp.app";

if (not [[NSFileManager defaultManager] fileExistsAtPath:appPath])
    appPath = [workspace fullPathForApplication:@"MyApp"];

if (not [[NSFileManager defaultManager] fileExistsAtPath:appPath]) {
    return NO;
}
else {
    // found it in some place, now can launch. 
```

# objective-c - Objective-C 中的中介者模式：用于执行计算等的控制器对象。

> ID：11584135
> 
> 赞同：3
> 
> 时间：2012-07-20T17:23:14.577
> 
> 标签：objective-c, ios, oop, design-patterns

我的应用程序执行了一些关于公司估值的相当复杂的计算。它从多个来源获取原始数据（例如，来自存储为 csv 数据和基本数据存储为 xml 数据的 Web 服务的股价）。

获取数据后，应用程序解析数据，将其存储在 Core Data 中并执行计算。计算结果也存储在核心数据中。

我目前的方法是将计算作为类别添加到公司（托管）对象中，并将 csv 和 xml 数据作为类别添加到数据对象中（图中未显示）。与网络相关的代码位于单独的单例对象中（如书中建议的那样：iOS Programming: The Big Nerd Ranch Guide, 3rd Edition）。

**问题：**

由于网络通信和计算是相互依赖的（即某些计算只有在接收到特定的数据包后才能开始），并且我想使用多线程，我最终在视图控制器中编写了相当多的代码。

我相信我应该按照中介者模式的想法使用一个协调器对象，并将我的视图控制器从协调相关的代码中解放出来。

您对此有何看法？

*   在您看来，调解器模式（协调器对象）是正确的方法吗？
*   您建议如何设置协调器对象？
*   网络上或书中是否有关于此主题的任何好的教程或示例？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:52:19.047

iOS 为此提供了两项伟大的技术——NSOperations 和 Grand Central Dispatch。对于您所描述的内容，我更喜欢使用操作，因为在操作之间创建连接真的很容易，这样在其他事情完成之前，某些事情不会开始。NSOperation 队列与操作系统协同工作，以便为设备和当前资源管理线程数和一般负载。

github上有一个开源项目“NSOperation-WebFetches-MadeEasy”，它有一个中介对象，您可以在主类中实例化（在本例中是您的viewController，但可以是任何类），您可以通过它运行所有操作，并且它会在 mainThread 上向您发送回您类中的一个方法的消息。您可以在 15 分钟内开始使用 - 您想要的课程是 OperationsRunner，它会告诉您如何将其添加到 .h 文件中。您可以将它用于 Web 提取（并发 NSOperations）和非并发操作。您现在甚至可以进行块操作。

[在 Apple 的并发编程指南](http://developer.apple.com/library/mac/documentation/General/Conceptual/ConcurrencyProgrammingGuide/ConcurrencyProgrammingGuide.pdf)中阅读 NSOperations 和 blocks

# git - CruiseControl.net 偶尔无法从 Git 中提取

> ID：11584139
> 
> 赞同：2
> 
> 时间：2012-07-20T17:23:34.903
> 
> 标签：git, cruisecontrol.net

我有一个 CruiseControl.net 服务器，它不断报告损坏的构建，并显示消息“失败的任务：Git：CheckForModifications”

日志中给出的异常是：

> ThoughtWorks.CruiseControl.Core.CruiseControlException：源代码控制操作失败：ssh_exchange_identification：远程主机关闭连接致命：远程端意外挂断处理命令：C：\ Program Files \ Git \ cmd \ git.cmd fetch origin

真正奇怪的是，这个错误并非一直发生。强制构建会导致 CC 正确拉取并继续工作一段时间（直到再次发生这种情况）。

其他一些可能相关的信息：

*   这发生在不止一个 Git 来源（我试过 GitHub 和 Beanstalk）
*   这发生在本地托管和 AWS 云上的多台服务器上
*   身份验证使用没有密码的 SSH 密钥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:35:37.400

我不能保证这与您的问题相同，但是当 CC 尝试通过 HTTPS 从 SVN 中提取时，我偶尔会看到类似的问题。我通过在公司代理周围路由该流量来解决它，如果响应时间超过几秒钟，有时会终止连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T01:36:53.687

CheckForModifications 的间隔时间可能很长，ssh 连接关闭并重新打开偶尔会失败！

您可以尝试将以下内容添加到您的**.ssh/.gitconfig**文件中，这样所有 ssh 连接将每 30 秒发送一次“保持活动”并保持连接始终处于活动状态。

```
KeepAlive = yes
ServerAliveInterval = 30 
```

# cocoa - 根据 NSDate 类型的属性对自定义对象的 NSArray 进行排序

> ID：11584142
> 
> 赞同：0
> 
> 时间：2012-07-20T17:23:46.953
> 
> 标签：cocoa, sorting, nsarray

我有一个`NSArray`自`AEMEvent`定义对象。此类的属性之一`AEMEvent`是`startDate`type `NSDate`。

```
@interface AEMEvent : NSObject
{
    //.....
    NSDate *startDate;
    //..........
} 
```

我想根据这个属性对这个数组进行排序，所以输出将是一个`NSArray`完整的`AEMEvent`按属性排序的对象`startDate`。

我已经看到了这个有趣的答案，用于使用or`NSArray`对`NSDate`对象 进行排序并作为参数传递，并想知道在我的情况下是否有办法使用它 -[对日期字符串或对象的 NSArray 进行排序](https://stackoverflow.com/questions/1132806/sort-nsarray-of-date-strings-or-objects)`-[NSArray sortedArrayUsingSelector:``-[NSMutableArray sortUsingSelector:]``@selector(compare:)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:30:27.180

```
// Sort AMEvent by startDate 

NSSortDescriptor * firstDescriptor = [[[NSSortDescriptor alloc] 
                                       initWithKey:@"startDate" ascending:YES 
                                       selector:@selector(caseInsensitiveCompare:)]

NSArray * descriptors = [NSArray arrayWithObjects:firstDescriptor, nil];  
NSArray * sortedArray = [yourArray sortedArrayUsingDescriptors:descriptors]; 
```

# xml - 如果 ContentType 具有给定值，则为 XSL

> ID：11584143
> 
> 赞同：1
> 
> 时间：2012-07-20T17:23:50.533
> 
> 标签：xml, xslt, if-statement

我正在尝试确定项目的内容类型。我试过这个，但我认为 results.aspx webpart 中的 ContentType 以另一个名字而闻名。

```
<xsl:if contenttype="mycustomcontenttype"> 
 <xsl:Value-of select="contenttype" />
<xsl:if> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:40:27.583

您的 XSLT 格式错误。

没有这样的`xsl:if`属性被称为`contenttype`- 也没有`<xsl:Value-of`因为所有指令都区分大小写，并且应该是小写的。

你的代码应该是这样的......

```
<xsl:if test="contenttype='mycustomcontenttype'"> 
 <xsl:value-of select="contenttype" />
<xsl:if> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T03:49:23.700

**甚至这个单行**（根本不使用条件）：

```
<xsl:value-of select="contenttype[.='mycustomcontenttype']"/> 
```

# php - Facebook PHP SDK 下载所有照片

> ID：11584145
> 
> 赞同：0
> 
> 时间：2012-07-20T17:24:13.890
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

下午好，

是否有允许我访问所有用户照片的 api 方法/循环？请记住，我不想要标签或相册，我想要所有图片。感谢帮助。

我已经尝试过 api photos 方法，但它并没有达到我想要的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:33:15.503

确保您获得了 user_photos 权限并使用 graphpath me/photos 提出请求。您将获得他上传并被标记的所有照片。尽管只需检查谁上传了图像（这包含在响应 JSON 中），就可以轻松删除这些照片。

# c# - 如何将包含转义字符的字符串转换为字符串

> ID：11584148
> 
> 赞同：5
> 
> 时间：2012-07-20T17:24:30.940
> 
> 标签：c#, .net

我有一个返回给我的字符串，其中包含转义字符。

这是一个示例字符串

> “测试\40gmail.com”

如您所见，它包含转义字符。我需要将其转换为实际价值，即

> “test@gmail.com”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T17:44:12.717

如果您要替换所有转义字符代码，而不仅仅是 的代码`@`，您可以使用以下代码片段进行转换：

```
public static string UnescapeCodes(string src) {
    var rx = new Regex("\\\\([0-9A-Fa-f]+)");
    var res = new StringBuilder();
    var pos = 0;
    foreach (Match m in rx.Matches(src)) {
        res.Append(src.Substring(pos, m.Index - pos));
        pos = m.Index + m.Length;
        res.Append((char)Convert.ToInt32(m.Groups[1].ToString(), 16));
    }
    res.Append(src.Substring(pos));
    return res.ToString();
} 
```

该代码依赖于正则表达式来查找所有十六进制数字序列，将它们转换为`int`，并将结果值转换为 a `char`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:26:24.067

```
string test = "test\40gmail.com";

test.replace(@"\40","@"); 
```

如果您想要更通用的方法...

[HTML 解码](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmldecode%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:07:33.450

提供的示例字符串 ( `"test\40gmail.com"`) 是[JID 转义](http://xmpp.org/extensions/xep-0106.html)的。它没有格式错误，并且`HttpUtility`/`WebUtility`不会正确处理此转义方案。

正如 dasblinkenlight 和 C.Barlow 的答案中所建议的那样，您当然可以使用字符串或正则表达式函数来做到这一点。这可能是达到预期结果的最干净的方法。我不知道有任何用于解码 JID 转义的 .NET 库，而且简短的搜索也没有出现太多。不过，这是一些可能有用的来源[的链接。](http://www.koders.com/csharp/fidDB887C01E3CCBA3DFF113008101554ED358DB54E.aspx?s=socket)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-29T13:03:42.777

我刚刚写了这段代码，它似乎工作得很好......它要求转义序列是十六进制的，并且对 value 的`0x00`to有效`0xFF`。

```
// Example
str = remEscChars(@"Test\x0D") // str = "Test\r" 
```

这是代码。

```
private string remEscChars(string str)
{
   int pos = 0;
   string subStr = null;
   string escStr = null;

   try
   {
      while ((pos = str.IndexOf(@"\x")) >= 0)
      {
         subStr = str.Substring(pos + 2, 2);
         escStr = Convert.ToString(Convert.ToChar(Convert.ToInt32(subStr, 16)));
         str = str.Replace(@"\x" + subStr, escStr);
      }
   }
   catch (Exception ex)
   {
      throw ex;
   }

   return str;
} 
```

# salesforce - 如何在 SalesForce 中插入没有帐户的联系人？

> ID：11584151
> 
> 赞同：0
> 
> 时间：2012-07-20T17:24:42.063
> 
> 标签：salesforce, apex-code, contact, account, upsert

每当我更新联系人时，都会使用相应的帐户创建它。例如，如果我创建“联系人 A”，则还将创建一个名为“联系人 A”的帐户，并将包含“联系人 A”作为联系人。有没有办法只更新没有帐户的联系人？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:31:57.710

Account 和 Contact 对象之间的关系是 Salesforce 所称的“[主从关系](http://www.salesforce.com/us/developer/docs/api/Content/relationships_among_objects.htm)”（尽管正如 superfell 所指出的，它不是真正的主/从关系）。当一个“主”记录被删除时，所有关联的“明细”也被删除，并且通常不能创建明细类型的记录而不与主记录关联；但是，在这种情况下，如果没有自定义限制，则可以插入联系人记录而不与帐户关联。听起来您的 Account 记录是由 Contact 对象上的 BeforeInsert 触发器创建的。

# php - PHP - 存储在具有不同“id”的标签之间找到的字符串数组？

> ID：11584155
> 
> 赞同：0
> 
> 时间：2012-07-20T17:24:56.293
> 
> 标签：php, xml, regex, preg-match

我有一个 Collada (.dae) 文件。在文件中有很多这种格式的标签；

```
<float_array id="adsfsafdas" count="72">12 4 2 1 92 1</float_array> 
```

我想从所有这些标签之间提取字符串并填充一个数组，所以在这个例子中，它将字符串“12 4 2 1 92 1”保存到数组中。

我有一个函数可以在两个给定的字符串之间查找字符串，但是开始标签中的“id”和“count”会因每个字符串而变化。通过一些搜索，似乎正则表达式是匹配模式的方法，“preg_match”可能有用。

关于如何去做的任何提示？谢谢

**编辑：感谢您的建议 - 我得到它使用以下代码！**

```
<?PHP

//open collada file
$file = file_get_contents('samplecollada.dae');

//find all matches and populate array
preg_match_all("/\<float_array id\=\".+\" count\=\".+\"\>(.+)\<\/float_array\>/",$file, $results);

//output array to preview result
print_r($results[1]);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:31:45.847

尝试使用[SimpleXml](http://www.php.net/manual/en/book.simplexml.php) `simplexml_load_file`，然后遍历该对象并将`explode`其迭代到一个数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:31:57.973

[这](http://www.regular-expressions.info/reference.html)是正则表达式特殊字符的基本参考。[这](http://php.net/manual/en/function.preg-match.php)是关于 PHP 的文档`preg_match()`。您要做的是匹配一个文字`<float_array`，然后是一组变量属性（使用类似的东西`.*?`or `[^>]*?`，然后是文字`>`，然后是数字（您需要对其进行[分组](http://www.regular-expressions.info/brackets.html)以便反向引用它们），然后是文字`</float_array>`。在PHP，您可以传递一个`$matches`变量来捕获反向引用（再次，请参阅上面的文档）。如果您使用`/`作为分隔符，您需要使用 . 转义正则表达式中的斜杠`\`。我相信您可以将其余部分拼凑在一起。

# jquery - Jquery使用setInterval提交单个表单字段？

> ID：11584158
> 
> 赞同：1
> 
> 时间：2012-07-20T17:25:25.220
> 
> 标签：jquery, ajax, forms, submit

我正在查看 jsfiddle 上的[这个 jquery 计时器](http://jsfiddle.net/GNrUM/2/)，它工作得很好。但是我想每 x 秒提交一个表单字段。所以对于像这样的 HTML 表单：

```
<form id="form">
    <input id="first_name" />
    <input type="hidden" id="referrer" />
</form> 
```

我*只想*将#referrer 字段提交到特定的 URL，而不需要刷新、重定向等。可能吗？它所在的后端不执行任何重定向或任何操作，我只需要每隔一段时间将该字段值获取到后端即可。

`$(#form).submit(){ //do something}`因为我实际上并没有提交表格，所以我需要吗？只需将变量发送到另一个 URL。

想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:29:45.943

jQuery 有[很多 Ajax 方法](http://api.jquery.com/category/ajax/)。

您似乎正在使用 GET 方法，因为这是`form`( `<form method="get">`) 的默认值，因此该[`$.get()`](http://api.jquery.com/jQuery.get/)函数对您来说似乎很好。类似于以下内容：

```
var value = $('#referrer').val(); //let's say the value is the_value
$.get('specific_url', { referrer: value }); 
```

这将发送一个 GET 请求，`specific_url`查询字符串设置为`referrer=the_value`。请阅读有关如何使用此方法的链接文档。

# java - 有没有办法让 Runnable 的 run() 抛出异常？

> ID：11584159
> 
> 赞同：86
> 
> 时间：2012-07-20T17:25:30.533
> 
> 标签：java, android, runnable, throws

我在实现[Runnable的类的](http://developer.android.com/reference/java/lang/Runnable.html)[run()](http://developer.android.com/reference/java/lang/Runnable.html#run%28%29)中调用的方法被设计为抛出异常。

但是 Java 编译器不允许我这样做，并建议我用 try/catch 包围它。

问题是，通过用 try/catch 包围它，我使*特定* [的 run()](http://developer.android.com/reference/java/lang/Runnable.html#run%28%29)无用。我*确实*想抛出那个异常。

如果我`throws`为[run()](http://developer.android.com/reference/java/lang/Runnable.html#run%28%29)本身指定，编译器会抱怨`Exception is not compatible with throws clause in Runnable.run()`.

通常我完全可以不让 [run()](http://developer.android.com/reference/java/lang/Runnable.html#run%28%29)抛出异常。但我有一个独特的情况，我必须拥有该功能。

如何解决此限制？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-20T17:32:37.103

您可以改用 a `Callable`，将其提交给 an`ExecutorService`并等待 由 .`FutureTask.isDone()`返回的结果`ExecutorService.submit()`。

当`isDone()`返回 true 你调用`FutureTask.get()`. 现在，如果你`Callable`已经抛出了一个，`Exception`那么也`FutureTask.get()`将抛出一个`Exception`原始异常，你将能够使用`Exception.getCause()`.

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-07-20T17:36:42.073

如果您想将实现的类传递`Runnable`到`Thread`框架中，那么您必须遵守该框架的规则，请参阅 Ernest Friedman-Hill 的回答，为什么这样做是一个坏主意。

不过，我有一种预感，您想`run`直接在代码中调用方法，这样您的调用代码就可以处理异常。

这个问题的答案很简单。不要使用`Runnable`Thread 库中的接口，而是使用修改后的签名创建自己的接口，允许抛出检查的异常，例如

```
public interface MyRunnable
{
    void myRun ( ) throws MyException;
} 
```

您甚至可以创建一个适配器来将此接口转换为真实的`Runnable`适用于 Thread 框架的真实接口（通过处理检查的异常）。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-07-20T17:28:41.497

如果`run()`抛出一个检查异常，什么会捕获它？您无法将该`run()`调用包含在处理程序中，因为您不编写调用它的代码。

您可以在`run()`方法中捕获已检查的异常，并在其位置抛出未检查的异常（即`RuntimeException`）。这将使用堆栈跟踪终止线程；也许这就是你所追求的。

相反，如果您希望您的方法在某处报告错误，那么您可以只为方法的块`run()`提供一个回调方法来调用；该方法可以将异常对象存储在某处，然后您感兴趣的线程可以在该位置找到该对象。`run()``catch`

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-07-20T17:34:44.633

是的，有一种方法可以从方法中抛出已*检查*的异常`run()`，但它太可怕了，我不会分享它。

这是您可以做的；它使用与运行时异常相同的机制：

```
@Override
public void run() {
  try {
    /* Do your thing. */
    ...
  } catch (Exception ex) {
    Thread t = Thread.currentThread();
    t.getUncaughtExceptionHandler().uncaughtException(t, ex);
  }
} 
```

正如其他人所指出的，如果您的`run()`方法确实是 a 的目标`Thread`，那么抛出异常是没有意义的，因为它是不可观察的；抛出异常与不抛出异常具有相同的效果（无）。

如果它不是`Thread`目标，请不要使用`Runnable`. 例如，也许[`Callable`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Callable.html)更合适。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-20T17:07:13.940

```
@FunctionalInterface
public interface CheckedRunnable<E extends Exception> extends Runnable {

    @Override
    default void run() throws RuntimeException {
        try {
            runThrows();
        }
        catch (Exception ex) {
            throw new RuntimeException(ex);
        }
    }

    void runThrows() throws E;

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-24T08:52:45.117

有些人试图说服你必须遵守规则。听着，但你是否服从，你应该根据你的情况自己决定。现实是“你应该遵守规则”（而不是“你必须遵守规则”）。请注意，如果您不遵守规则，可能会产生后果。

这种情况不仅适用于 .java 的情况`Runnable`，而且在 Java 8 的情况下也非常频繁地出现在 Streams 和其他引入了功能接口而无法处理已检查异常的地方的上下文中。例如，、 、`Consumer`等等`Supplier`都被声明为没有处理检查异常的设施。`Function``BiFunction`

那么有哪些情况和选择呢？在下面的文本中，`Runnable`代表任何不声明异常或声明的异常对于手头的用例来说过于有限的功能接口。

1.  你已经在`Runnable`某个地方声明了自己，并且可以`Runnable`用其他东西代替。
    1.  考虑替换`Runnable`为`Callable<Void>`. 基本相同，但允许抛出异常；最后必须这样做`return null`，这是一个轻微的烦恼。
    2.  考虑用`Runnable`您自己的自定义替换，该自定义`@FunctionalInterface`可以准确地抛出您想要的那些异常。
2.  您已经使用了 API，并且可以使用替代方法。例如，某些 Java API 是重载的，因此您可以`Callable<Void>`使用`Runnable`.
3.  您已经使用了 API，并且没有其他选择。在这种情况下，您仍然没有选择余地。
    1.  您可以将异常包装在`RuntimeException`.
    2.  您可以使用未经检查的强制转换将异常破解为 RuntimeException。

您可以尝试以下方法。这有点像 hack，但有时我们需要 hack。因为，一个异常应该被检查还是不被检查是由它的类型定义的，但实际上应该由情况来定义。

```
@FunctionalInterface
public interface ThrowingRunnable extends Runnable {
    @Override
    default void run() {
        try {
            tryRun();
        } catch (final Throwable t) {
            throwUnchecked(t);
        }
    }

    private static <E extends RuntimeException> void throwUnchecked(Throwable t) {
        throw (E) t;
    }

    void tryRun() throws Throwable;
} 
```

我更喜欢这个，`new RuntimeException(t)`因为它的堆栈跟踪更短。

您现在可以执行以下操作：

```
executorService.submit((ThrowingRunnable) () -> {throw new Exception()}); 
```

免责声明：以这种方式执行未经检查的强制转换的能力实际上可能在 Java 的未来版本中被删除，因为泛型类型信息不仅在编译时处理，而且在运行时处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T17:29:22.643

你的要求没有任何意义。如果你想通知被调用线程发生了异常，你可以通过回调机制来做到这一点。这可以通过处理程序或广播或您能想到的任何其他方式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-20T17:32:22.283

我认为[侦听器模式](http://www.javapractices.com/topic/TopicAction.do?Id=156)可能会帮助您解决这种情况。如果您的方法中发生异常，请`run()`使用 try-catch 块并在 catch 中发送异常事件通知。然后处理您的通知事件。我认为这将是一种更清洁的方法。[此 SO 链接](https://stackoverflow.com/questions/1369204/how-to-throw-a-checked-exception-from-a-java-thread)为您提供了指向该方向的有用指针。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-03-15T03:02:25.970

最简单的方法是定义自己的异常对象，它扩展`RuntimeException`类而不是`Exception`类。

# java - 从 PackageFragment 获取后如何打开 ICompilationUnit？爪哇

> ID：11584161
> 
> 赞同：0
> 
> 时间：2012-07-20T17:25:46.820
> 
> 标签：java, eclipse, eclipse-plugin

目前我正在编写一个插件，它的功能之一是遍历包和java文件。我可以获取 java 文件名，但他们都说他们没有打开。有没有办法打开它们？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:00:22.673

`IComplilationUnit`有`IOpenable`一个超级接口。调用`open()`对象。

# azure - Windows Azure 内部端点的安全性如何？

> ID：11584163
> 
> 赞同：8
> 
> 时间：2012-07-20T17:25:55.993
> 
> 标签：azure

我有一个 Web 角色的前端 MVC 应用程序，受 WIF 和 ACS 保护，我希望它是我的 Azure 应用程序唯一暴露的表面。它连接到许多后端服务、一些工作角色和一些（为了方便在 VS 中添加服务引用，或者因为它们使用 WCF 数据服务）Web 角色。后端服务角色只有内部端点。

我从 MS 文献中的理解是，内部端点仅对具有相同部署的其他角色可用。鉴于此，在 MVC Web 角色和后端服务之间应用任何类型的传输或消息安全或身份验证似乎是多余的，这可能是内部端点上不可用 https 的原因。

我的问题是：这有多安全？除了我们部署的角色之一，还有什么方法可以从其他任何地方发现端点？是否有任何理由在任何角色间绑定上产生额外的安全性开销？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T17:43:52.307

服务代表隔离边界，除非您将端点声明为“输入”端点，否则无法在此隔离边界之外访问它。这个边界的实现是一个私有网络分支，对其他分支没有可寻址性。

请记住，**内部**端点不是负载平衡的。所以有一个权衡。不久前我[在端点上写了一些东西，](http://brentdacodemonkey.wordpress.com/2011/05/17/windows-azure-endpoints-overview/)这可能有助于巩固一些东西。

# ios - 使 UITableViewCell 中的 UIImage 看起来凹陷

> ID：11584165
> 
> 赞同：0
> 
> 时间：2012-07-20T17:26:11.657
> 
> 标签：ios, photoshop

我想这是一个 Photoshop 问题，但有人知道如何制作一个漂亮的凹陷心脏吗？有点像这个，除了凹进的：![在此处输入图像描述](../Images/1a48dbd4887cfb365b2da0a66a0f3be7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:34:34.150

基本的凸版效果可以通过在图像下方 1 点放置白色（或浅色）阴影来实现。例如，这就是在 iOS 中用于状态栏图像和文本的内容。

您可能还需要顶部边缘内的内部阴影，并且可能需要一个微妙的渐变（顶部~~较浅~~较暗 - 请注意我已经改变了渐变的想法，但没有更新图像！）而不是纯色背景色。

这是在 Pixelmator 中完成的 5 分钟的工作。顶部的内阴影特别业余，但我更喜欢在代码中绘制这样的东西！

![在此处输入图像描述](../Images/8003d64e4eaa9153ee87de0950dfa018.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:34:47.323

有几种图层样式可以相互补充，为您提供凹陷的外观。

1.  精灵下方的浅色阴影（正下方的 1px 白色阴影通常可以解决问题，但您可以尝试其柔软度/大小*）*
2.  顶部较暗，底部较浅的渐变
3.  位于精灵顶部的深色*内阴影。*（例如 1px 黑色）

如果您在 Photoshop 中执行此操作，请确保将光线角度设置为 90º

# .net - WCF 测试客户端从哪里获得其配置？

> ID：11584167
> 
> 赞同：2
> 
> 时间：2012-07-20T17:26:11.397
> 
> 标签：.net, wcf, visual-studio, wcftestclient

我担心我刚刚迷失在树上，但是 WCF 测试客户端从哪里提取它的配置？

**背景**在为我的 WCF 服务添加对 net.tcp 的支持进行故障排除时，我通过对 web.config 进行了许多不同的更改，并通过一个非常简单的服务重新启动了该过程，从而使情况变得混乱。

当我在 WCF 测试客户端中添加服务时，有对绑定名称的引用，这些名称在服务根目录的配置文件中不存在，但在其他一些子文件夹中存在，包括挂在 obj\debug 上的子文件夹，例如 CSAutoParameterize 和直到现在我还不知道存在的 TransformWebConfig。编辑：这些看起来是来自早期试验/实验的名称——不仅仅是凭空而来的。

当我在根配置（web.config，因为我在本地托管 IIS7.5/Win7）中进行更改时，这些似乎没有影响。

感谢和抱歉发生的事情可能有一个非常明显的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T22:13:31.173

此数据保存在“Test Client Projects”下的 Documents 文件夹中。

# php - 如何在没有 JavaScript/jQuery/AJAX 的情况下在 PHP 和 MySQL 中创建聊天？

> ID：11584171
> 
> 赞同：-4
> 
> 时间：2012-07-20T17:26:37.920
> 
> 标签：php, mysql, sql, chat

如何只使用 PHP 和 MySQL 进行聊天，而不使用任何其他语言？我用谷歌搜索了一段时间，但我发现的所有解决方案都需要 PHP+MySQL+AJAX/JS/jQuery。为了使我的代码尽可能简单，我只想使用这两种语言（因为 idk ajax 不是 js 不是 jquery，哈哈。）。有什么建议吗？我想过在哪里记录聊天记录，但它太慢了，因为它需要很多查询。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:32:09.683

我认为在这种情况下任何解决方案都会太慢。

看，聊天的核心本质是实时（或接近）更新：您希望尽快看到某人写的消息（如果不是，这是一个论坛领域，而不是聊天）。有几种方法可以解决这个问题，但它们都涉及 JavaScript（因为您需要更新向用户显示的页面）。

当然，您可以使您的页面自动刷新（使用`meta http-equiv="refresh"`），但这会大大增加您服务器上的负载——而且它仍然会像一个论坛一样，只是在“刷新类固醇”上。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:31:16.943

你要求什么不可行。

您需要某种方法将用户的聊天消息发送回服务器。如果没有 AJAX，每次用户发表评论时，您都需要将整个页面提交到服务器，然后下载整个页面作为响应（这会极大地消耗您的流量）。

然后，在页面刷新之前，用户将无法看到任何其他评论，这意味着要么以某个确定的时间间隔刷新整个页面（并且有丢失用户部分书面评论的风险），要么只是等待他们发表评论。

所以，底线是，没有 AJAX 就无法做到这一点。

# sockets - 如何拆分接收到的 boost asio udp 套接字联合数据报

> ID：11584184
> 
> 赞同：5
> 
> 时间：2012-07-20T17:28:06.697
> 
> 标签：sockets, udp, boost-asio, datagram

我用 boost::asio udp 套接字制作了我的 UDP 服务器和客户端。在我开始发送更多数据报之前，一切看起来都很好。它们正确地从客户端到服务器。但是，它们在我的缓冲区中合并为一条消息。

我用

`udp::socket::async_receive`带`std::array<char, 1 << 18 >`缓冲

用于发出异步请求。并通过回调接收数据

`void on_receive(const error_code& code, size_t bytes_transferred)`

如果我发送数据**过于频繁**（每 10 毫秒），我会**同时将多个数据报**接收到我的缓冲区中，并带有上面的回调。问题是 - 如何将它们**分开**？注意：我的 UDP 数据报有**可变长度**。我不想使用带有大小的附加标头，因为它会使我的代码对第三方数据报无用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T01:18:58.400

我相信这是 boost::asio 处理无状态数据流方式的一个限制。将 boost::asio 用于串行接口时，我注意到完全相同的行为。当我发送间隔相对较大的数据包时，我在单独的回调中接收每个数据包。随着数据包大小的增加，数据包之间的差距因此减小，它达到了一个阶段，即只有在缓冲区已满时才会执行回调，而不是在接收到单个数据包之后。

如果您确切知道预期数据报的大小，那么限制输入缓冲区大小的解决方案是一个非常明智的解决方案，因为您先验地知道缓冲区需要多大。

如果您的拥塞来自传输多种不同的数据包类型，因此您无法预先分配正确大小的缓冲区，那么您可能会为每种类型的事务在不同端口上创建不同的套接字。它有点“hacky”，但考虑到临时端口可用性的几乎无限的性质，只要您不使用 20,000 种不同的数据包类型，这可能也会帮助您。

# android - Gmail/电子邮件收件人字段 EditText

> ID：11584186
> 
> 赞同：2
> 
> 时间：2012-07-20T17:28:16.927
> 
> 标签：android, android-edittext, email-client

是否有一个模仿自动完成和“自动框”的android控件（例如在gmail应用程序中，在您选择电子邮件后，它将联系人放入一个框并将其放入文本框中）以进行电子邮件撰写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:08:30.900

您是否正在寻找这样的东西：

主要的.xml

```
<MultiAutoCompleteTextView
 android:id="@+id/compose_to"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:hint="To"
 android:imeOptions="actionNext"
 android:textColor="#000000"
 android:inputType="textEmailAddress|textMultiLine"
 /> 
```

main.java

```
MultiAutoCompleteTextView to = (MultiAutoCompleteTextView) findViewById(R.id.compose_to);

ArrayList<String> addresses = new ArrayList<String>();
addresses.add("temp@gmail.com");
addresses.add("abc@gmail.com");
addresses.add("xyz@gmail.com");
addresses.add("template@gmail.com");

ArrayAdapter<String> autocompAdapter =  new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, addresses);

to.setAdapter(autocompAdapter);
to.setTokenizer(new MultiAutoCompleteTextView.CommaTokenizer()); 
```

![Android EditText 自动完成](../Images/ad9b70c816faa9da7e025267bb75dd74.png)

# iphone - 当superView frameWidth 改变时，UIView 不会自动调整大小

> ID：11584187
> 
> 赞同：0
> 
> 时间：2012-07-20T17:28:17.523
> 
> 标签：iphone, objective-c, ios, ipad, uiview

所以我有一个名为 footerView 的 UIView，它被添加到 UIScrollView 中。我已将其初始化如下：

```
 UIView *footerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.scrollView_.frameWidth, kFooterViewHeight)];
    [footerView setAutoresizingMask: UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin];
    [footerView setBackgroundColor:[UIColor clearColor]];
 self.footerView_ = footerView;
    [self.scrollView_ setFooterView_:self.footerView_];
    [footerView release]; 
```

所以最初 scrollView.frameWidth 设置为 768。但后来它被调整为 450。发生这种情况后，我尝试检查 self.footerView.frameWidth 并且它仍然是 768。这是为什么？我试过在 footerView 上调用 setNeedsLayout，我确保在 UIScrollView 上设置了自动调整大小的视图，但没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:52:00.883

您的设置，灵活的边距和灵活的宽度。如果需要，视图会调整大小，请避免使用灵活的边距。

# c# - C# 中的类和方法，这是一个好方法吗？

> ID：11584190
> 
> 赞同：3
> 
> 时间：2012-07-20T17:29:01.250
> 
> 标签：c#, asp.net, class, methods

我正在尝试构建一个与我的 asp.net Web 应用程序中的数据库交互的类。我需要你对如何设计它的意见，这是我想到的一个例子

```
public class Person
{
    int personId;
    string name;
    string lastName;

    public int PersonId
    {
        get { return personId; }
    }

    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    public string LastName
    {
        get { return lastName; }
        set { lastName = value; }
    }

    public Person()
    {

    }

    public static void Save(Person p)
    {
        //datalayer here
        //save the person class
    }

    public static Person GetPerson(int person_id)
    {
        //datalayer here
        //get the person from database and return a person class
        Person p = new Person();
        p.personId = 10;
        p.name = "Alex";
        return p;
    }
} 
```

这样我就可以使用数据库方法而不必实例化类：

```
Person p = Person.GetPerson(19);
p.Name = "Alex...";
Person.Save(p); 
```

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:33:00.990

使用`Automatic`属性，因为您的私有字段在您的代码中执行相同的操作。

我认为，`Save`是一个可以在**Entity对象上完成的****操作**。所以我不会将其保留为静态方法。我会将您的 代码作为对象的方法移动。所以我会这样称呼它。要加载数据，我会使用我的类的重载版本。`Person` **`Save``Person``obj.Save()``constructor`**

 **```
public class Person
{
    int personId;      

    public int PersonId
    {
        get { return personId; }
    }    
    public string Name { set;get;}   
    public string LastName { set;get;}        

    public Person() {}

    public Person(int person_id)
    {
        //call to datalayer here
        //get the person from database and return a person class          
        personId = 10;
        Name= "Alex";  // set the public property value here           
    }
    public bool Save()
    {
        //datalayer here
        //save the person class and return
      // true/false /or new ID (change return type)
    }    

} 
```

而打电话的时候，

```
Person p = new Person(19);  //get existing person
p.Name = "New Name";
p.Save(); 
```

**编辑：**另一种（更好的）方法是将您的实体类保持为简单的 POCO。这意味着那里没有数据访问/ BL代码。它看起来像

```
public class Person
{
  public int ID { set;get;}
  public string Name { set;get;}
} 
```

并有一个`Repository`为您执行数据操作的。所以你的存储库可能有这样的方法

```
public interface IRepository
{ 
   Person GetPerson(int id);
   bool SavePerson(Person person);
} 
```

您可以`Interface`在一个类中实现它来执行您的数据访问操作

```
public class Repository:IRepository
{
  //implementation of your DA methods here
} 
```

现在您可以像这样从不同的层（业务层）调用它

```
IRepository repo = new Repository();

var person=repo.GetPerson(19);  
person.Name="Updated Name";
repo.Save(person); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:07:07.057

我喜欢持久性无知的东西：[持久性无知有什么好处？](https://stackoverflow.com/questions/905498/what-are-the-benefits-of-persistence-ignorance))

在这种情况下，您应该将 Save 方法移动到另一个类，以便实体不包含任何应该如何保存它的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:05:31.787

您所追求的是对象的[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)和数据访问代码的[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。我无法像文章那样解释它，所以我将回顾基本思想并提供一些示例。

目标是将您的代码库划分为处理一种特定类型的关注点的层，例如与用户 (UI) 通信、在应用程序中保存和验证数据（业务类/模型）或管理数据持久性（数据访问）。保持这些区域整齐划分可以更容易地维护和调试代码或并行开发。还有其他好处，例如促进跨多台物理机器的架构，但这超出了问题的范围。

基本结构：

获取概念进展：

```
UI -> Person Factory -> Person class -> Repository -> Database 
```

保存概念进展：

```
UI -> Person class -> Repository -> Database 
```

Person 类结构，里面有解释性注释：

```
public class Person
{
   // various properties & methods

   // Constructor access is restricted to control how the class gets consumed.
   // All instance management must go through the factories.
   protected Person() { /* stuff */ }

   // Person factory implementation. It's done inside the Person class so that
   // tight control can be kept over constructor access.
   // The factory is what gives you your instances of Person.
   // It has defined inputs and outputs, as well as more descriptive
   // names than constructor overloads, so consumers know what to expect.
   // It's also a place to put scaffolding code, so you can avoid doing 
   // things like setting properties every time you fetch an instance.
   // The factory takes care of all the object initialization and returns
   // an instance that's ready for use.
   public static Person GetPerson(int id)
   {
       Person p = new Person();

       // here you call the repository. It should return either a native
       // data structure like DataReader or DataTable, or a simple DTO class
       // which is then used to populate the properties of Person.
       // the reason for this is to avoid a circular dependency between
       // the repository and Person classes, which will be a compile time error
       // if they're defined in separate libraries
       using(PersonRepository repo = new PersonRepository())
       {
          DataReader dr = repo.GetPerson(id);
          p.FillFromDataReader(dr);
       }

       return p;
   }

   protected void FillFromDataReader(DataReader dr)
   { /* populate properties in here */ }

   // Save should be an instance method, because you need an instance of person
   // in order to save. You don't call the dealership to drive your car,
   // only when you're getting a new one, so the factory doesn't do the saving.
   public void Save()
   {
      // Again, we call the repository here. You can pass a DTO class, or
      // simply pass the necessary properties as parameters
      using(PersonRepository repo = new PersonRepository())
      {
         this.Id = repo.SavePerson(name, address);
      }
   }
} 
```

现在，存储库代码：

```
// This class implements IDisposable for easy control over DB connection resources.
// You could also design and implement an IRepository interface depending on your needs.
public class PersonRepository : IDisposable
{
   private SqlConnection conn;

   public PersonRepository()
   {
      // in here you initialize connection resources
      conn = new SqlConnection("someConnectionString");
   }

   public void IDisposable.Dispose()
   {
      // clean up the connection
      conn.Dispose();
   }

   // The instance methods talk to the database
   public int SavePerson(string name, string address)
   {
      // call your stored procedure (or whatever) and return the new ID
      using(SqlCommand cmd = conn.CreateCommand())
      {
         // stuff
         return (int)cmd.Parameters["myOutputIDParameter"].Value;
      }
   }

   public DataReader GetPerson(int id)
   {
      // call your stored procedure (or whatever) and return the fetched data
      using(SqlCommand cmd = conn.CreateCommand())
      {
         // stuff
         return cmd.ExecuteReader();
      }
   }
} 
```

最后，您将在 UI 级别执行以下操作：

```
Person joe = Person.GetPerson(joeId);
// stuff
joe.Save(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-20T18:50:48.027

你做得对，但你也可以为你的班级使用自动属性。它可能会节省您的一些时间。例如。

```
public class Person
{

    public int PersonId { get; set;}    
    public string Name { get; set;}
    public string LastName { get; set;}

    public Person()
    {
    }
} 
```**

# ruby-on-rails - 如何使用嵌套控制器的默认布局？

> ID：11584191
> 
> 赞同：1
> 
> 时间：2012-07-20T17:29:03.837
> 
> 标签：ruby-on-rails

Rails 很新，我正在构建我的路线以获得这样的嵌套控制器：

```
resources :companies do
  member do
    get 'operating_hour'
  end
  resources :services do
    member do
      get 'services'
    end
  end
end 
```

现在，我的应用程序布局是这样的：

```
<body>
<%= render 'layouts/header' %>
<div class="container">
  <% flash.each do |key, value| %>
      <div class="alert alert-<%= key %>"><%= value %></div>
  <% end %>

  <% if main_side_view? %>
      <%= render 'layouts/main_side' %>
  <% elsif company_side_view %>
      <%= render 'layouts/company_side' %>
  <% else %>
      <h1><%= yield(:title) %></h1>
      <%= yield %>
  <% end %>

  <%= render 'layouts/footer' %>
</div> 
```

除了嵌套（“服务”）控制器生成的所有内容外，我的布局一切正常。当我转到嵌套控制器的链接时，我的布局不存在！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:40:33.857

我认为你这样做是错误的。您应该创建几个布局：

一、layouts/application.html.erb

```
<%= render 'layouts/header' %>
<div class="container">
  <% flash.each do |key, value| %>
      <div class="alert alert-<%= key %>"><%= value %></div>
  <% end %>

   <h1><%= yield(:title) %></h1>
   <%= yield %>

  <%= render 'layouts/footer' %>
</div> 
```

二、layouts/companies.html.erb

```
<%= render 'layouts/header' %>
<div class="container">
  <% flash.each do |key, value| %>
      <div class="alert alert-<%= key %>"><%= value %></div>
  <% end %>
  Your code for companies
</div> 
```

请参阅指南： [http: //guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts](http://guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts)

您可以为 Flash 消息创建共享视图。

# javascript - 如何使手风琴在悬停而不是点击时展开？

> ID：11584196
> 
> 赞同：-8
> 
> 时间：2012-07-20T17:29:22.263
> 
> 标签：javascript, jquery, html, jquery-ui, accordion

是否可以让手风琴在悬停而不是点击时展开？以及如何在点击时做其他事情？

**更新**

我说的是 jQuery UI 手风琴小部件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T04:40:20.847

[jQuery UI Accordion 文档中的第 5 个示例：鼠标悬停时打开](http://jqueryui.com/demos/accordion/#mouseover)

```
 $( "#accordion" ).accordion({
        event: "mouseover"
    }); 
```

您可以附加任何您希望在纯 jQuery中使用`.click()`or方法的点击事件。`.on('click')`在问这样的问题之前请先研究一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:02:25.617

简单的 css 手风琴：http: [//jsbin.com/atamat/edit#html,live](http://jsbin.com/atamat/edit#html,live)

```
 .accordion > div {
    display:none;
  }
  .accordion:hover > div {
    display:block;
  } 
```

HTML：

```
 <div class="accordion">
    <h2><a href="#link2">Header goes here</a></h2>
    <div>
      Content goes here
    </div>
  </div>

  <div class="accordion">
    <h2><a href="#link2">Header goes here</a></h2>
    <div>
      Content goes here<br />Content goes here<br />Content goes here<br />
      Content goes here<br />Content goes here<br />Content goes here<br />
      Content goes here<br />Content goes here<br />Content goes here<br />
    </div>
  </div> 
```

简单的 jQuery 解决方案：http: [//jsbin.com/atamat/2/edit#javascript,html,live](http://jsbin.com/atamat/2/edit#javascript,html,live)

```
$(".accordion > div").hide().parent().hover(function(event) {
  $(this).children("div").slideToggle(event.type === "mouseenter");
}); 
```

HTML：

> 一样的^

# java - Java 中的 CGI - 传统但有趣（用于教育目的）

> ID：11584199
> 
> 赞同：0
> 
> 时间：2012-07-20T17:29:34.080
> 
> 标签：java, apache, iis, cgi, cgi-bin

我乡亲：

我知道 CGI 是侏罗纪，在你们所有人称我为疯子之前，我必须说这个问题仅用于教育目的（在实际情况下我使用 JSP）。

我正在尝试用 Java 编写“Hello World”CGI，但没有成功。

所以我在 C# 中尝试同样的工作。两个程序（C# 和 Java）是完全一样的（逐行）。C# 有效，而 Java 无效。

这是 C# 中的代码：

```

    命名空间 CGI_CSharp  
    {  
        课堂节目  
        {  
            静态无效主要（字符串 [] 参数）  
            {  
                Console.WriteLine("Content-Type: text/html\n"); // 需要额外的 "\n"    
                Console.WriteLine("<html>");  
                Console.WriteLine("<head>");  
                Console.WriteLine("<title>CGI - C#</title>");  
                Console.WriteLine("</head>");  
                Console.WriteLine("<body>");  

                Console.WriteLine("<h1>Hello World !</h1>");  

                Console.WriteLine("</body>");  
                Console.WriteLine("<html>");  
            }  
        }  
    }  

```

我在浏览器 URL 中写道：**http://localhost/CGI_CSharp.exe**和 BINGO！C# 代码有效！

现在Java中的相同代码：

```

    公共类 CGI_Java  
    {  
        公共静态无效主要（字符串 [] 参数）   
        {  
            System.out.println("Content-Type: text/html\n");  
            System.out.println("<html>");
            System.out.println("<head>");  
            System.out.println("<title>CGI - Java</title>");  
            System.out.println("</head>");  
            System.out.println("<body>");  

            System.out.println("<h1>Hello World !</h1>");  

            System.out.println("</body>");
            System.out.println("</html>");  
        }  
    }  

```

现在我尝试了网址：

**http://localhost/java.exe%20CGI_Java**

（如您所知， %20 是空格 => (http://localhost/java.exe CGI_Java)

我得到：

**HTTP 404.0 - 未找到**

所以，我再次尝试，现在使用带有一行文本的批处理文件 (CGI_Java.bat)：

**java.exe CGI_Java**（CGI_Java.bat的内容）

现在，我试试这个 URL：

**http://localhost&/CGI_Java.bat**

现在浏览器显示：

**C:\inetpub\wwwroot>java.exe CGI_Java**

这是我在批处理文件中编写的命令的提示。

有人能帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:30:25.453

你用的是什么服务器？

是否`java.exe`在服务器的路径上？

（请注意，如果您更改路径的环境变量，则必须重新启动服务器才能获取更改）。

# java - 通过注释类加载应用程序上下文

> ID：11584201
> 
> 赞同：1
> 
> 时间：2012-07-20T17:29:40.067
> 
> 标签：java, spring

我是 Spring 的新手，想知道是否可以通过注释必须注入其变量的类来加载应用程序（而不是使用 ApplicationContext ctx = new ApplicationContext("myAppContext")）。

让我举个例子：

我有这个类`TestSpring.java`，其中一个字符串应该是自动装配的

```
package mytest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;

//Is it possible to put an annotation here that loads the application context "TestSpringContext.xm"??
public class TestSpring {

    @Autowired
    @Qualifier("myStringBean")
    private String myString;

    /**
     * Should show the value of the injected string
     */
    public void showString() {
        System.out.println(myString);
    }

} 
```

spring bean 配置文件 ( **TestSpringContext.xml** ) 看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:context="http://www.springframework.org/schema/context" xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd  http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd"
        >

 <context:annotation-config />

 <bean id="myStringBean" class="java.lang.String">
 <constructor-arg value="I am  an injected String."/>
</bean>
</beans> 
```

现在我想`myString`使用以下代码显示自动装配字符串的值（在 TestSpring.java 中声明）`RunTestSpring.java`：

```
package mytest;

public class RunTestSpring {

    public static void main(String[] args) {
        TestSpring testInstance = new TestSpring();
        testInstance.showString();

    }

} 
```

现在我的问题是，是否可以在加载应用程序上下文时成功运行“RunTestSpring.java”，只需添加注释`RunTestSpring.java`。如果是，使用哪个注释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:36:38.917

我建议编写一个使用 spring 注入进行环境初始化的 JUnit 类。像这样的东西-

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations="/spring/spring-wireup.xml", inheritLocations = true)
public class MyTestCase extends TestCase {
    // your test methods ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:28:41.287

`@Configurable`可能是您正在寻找的，它将确保未由 Spring 实例化的对象可以由 Spring 自动装配它们的依赖关系。然而，问题是它需要 AspectJ 编译时间/加载时间编织才能工作（不是 Spring AOP）。

这是一个参考： [http ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-atconfigurable](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-atconfigurable)

# javascript - 在另一个网页中填写文本字段并检查结果是否符合预期

> ID：11584215
> 
> 赞同：0
> 
> 时间：2012-07-20T17:30:27.287
> 
> 标签：javascript, jquery, html, ajax

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

我有这种情况：

我有一个要在我的网站上填写的表格，在该表格中输入了一个数字，我必须检查它是否是一个有效数字。要检查这个数字是否有效，还有另一个网站和该站点中有一个输入，您可以输入该号码，如果它有效（它已在某事中注册），那么它将向您显示与该号码相关的人的姓名。我该怎么做...我想在我的网站的输入上有一个 onBlur() 函数，这对我有用，如果它无效，请提醒它。你能帮我吗？

顺便说一句，它是检查号码是否有效的网站：http: [//portal.irimc.org/DoctorSearchEngine/Search.aspx](http://portal.irimc.org/DoctorSearchEngine/Search.aspx)

您在顶部输入中输入一个数字（例如 12554），它表明它属于某人并且它是有效的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:57:53.007

客户端 javascript 是不可能的，但后端服务器支持是可能的。从您的网站，您从用户那里获取数据并使用 AJAX 发送到您的服务器，服务器从另一个网站加载表单，填写并获取/解析响应。然后为您的 Ajax 请求返回响应。

阅读有关从服务器站点发送 POST/GET 请求的信息。

例子：

*   php - [http://www.jonasjohn.de/snippets/php/post-request.htm](http://www.jonasjohn.de/snippets/php/post-request.htm)
*   导轨 - [http://blog.dougpetkanics.com/making-a-post-request-to-a-rails-api-endpoint](http://blog.dougpetkanics.com/making-a-post-request-to-a-rails-api-endpoint)
*   带有 webkit 集成的 rails 测试工具 - [https://github.com/jnicklas/capybara/](https://github.com/jnicklas/capybara/)
*   java -[是否可以使用 Capybara 测试 Java 应用程序？](https://stackoverflow.com/questions/3164593/is-it-possible-to-test-java-application-with-capybara)

看看用 capybara 填写表格有多容易：

```
def login!
    within("//form[@id='session']") do
      fill_in 'Login', :with => 'user@example.com'
      fill_in 'Password', :with => 'password'
    end
    click_link 'Sign in'
end 
```

# javascript - 为什么 console.log() polyfills 不使用 Function.apply()？

> ID：11584218
> 
> 赞同：7
> 
> 时间：2012-07-20T17:30:42.480
> 
> 标签：javascript, debugging, polyfills

我一直在研究一些流行的`console.log()`包装器/polyfills：

*   [保罗·爱尔兰](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/)
*   [本·阿尔曼](http://benalman.com/code/projects/javascript-debug/docs/files/ba-debug-js.html)
*   [克雷格·帕蒂克](https://github.com/patik/console.log-wrapper)

我注意到他们都接受 multiple `arguments`，但他们都做这样的事情：

```
console.log(arguments); 
```

这会导致这样的输出（在 Chrome 中）：

![<code>console.log(['foo', 'bar', $('body')])</code>](../Images/66cb805b3f54f56ab2cff24cfc259c13.png)

然而，至少在 Chrome 或 Firefox 等现代浏览器中，`console.log()`也接受多个参数，因此这将产生（恕我直言）卓越的输出：

```
console.log.apply(console, arguments) 
```

这会导致这样的输出（在 Chrome 中）：

![<code>console.log.apply(console, ['foo', 'bar', $('body')])</code>](../Images/35cf5f13d53db43b419a2ce2b19f20fd.png)

有什么特别的原因我应该避免使用`console.log.apply()`多个参数吗？或者这只是品味或节省字节的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:29:55.747

我个人建议您仅`.apply()`在必须时使用：`.apply()`是传递数组作为函数参数的唯一方法。如果您*不需要*传递数组，则只需使用`console.log()`. 它不那么冗长，而且是直接调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T07:42:23.017

请注意，它`apply`需要一个参数**数组**！

因此，调用`console.log(args)`必须是`console.log.apply(console, [args])`，而不是`console.log.apply(console, args)`表现得平等-在您的示例中，数组中的每个项目都成为他自己的应用参数。

另一方面，您也可以致电`console.log("foo", "bar", $("body"))`

# git - git log 告诉我什么？

> ID：11584220
> 
> 赞同：8
> 
> 时间：2012-07-20T17:30:46.493
> 
> 标签：git

我错过了一些东西。我曾经使用 Mercurial，并且会使用`hg log`. 很简单：显示了在 repo 中所做的**所有变更集。**

现在我正在使用 git。我对学习新工具感到非常兴奋，但我对所看到的`git log`. 我做了一些更改并做出了一些提交。另一个人也创建了修订并提交。我从他的存储库中提取。我做了一个`git log`并且他的变更集（也许它在 git 中被称为“提交”）不在列表中。如果我明确列出他的哈希号（即`git log <hash>`），它会显示在顶部。所以它**在**我的仓库中，但我不明白 git 如何决定在我调用`git log`.

我看了一下`git help log`，但它在描述中说它“显示提交日志”。从我的角度来看，这是不正确的。或者可能是不完整的，因为实际上它显示了它们的一些子集。但我不知道是哪个子集，也不知道它如何确定要显示的内容。

有人可以向我解释`git log`吗？

更新

顺便说一句：我尝试的第一件事是--all，我现在看到很多人建议这样做。但这也没有显示出来：

```
$ git log | grep fb2a17c5fb08498e7f2ab364931fddc379be106f 
$ git log --all | grep fb2a17c5fb08498e7f2ab364931fddc379be106f 
$ git log fb2a17c5fb08498e7f2ab364931fddc379be106f  | grep fb2a17c5fb08498e7f2ab364931fddc379be106f 
commit fb2a17c5fb08498e7f2ab364931fddc379be106f 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T19:07:54.857

`git log`当您不指定引用或引用集时，有一个隐含的参数。它是当前的负责人。所以

```
git log 
```

扩展到

```
git log HEAD 
```

这意味着向我展示从当前 HEAD 可访问的所有提交（您的下一个提交将附加到的地方）。

为了看到你同事的作品，你可以

```
git log origin/master 
```

假设你都在 master 上工作并且你已经获取了。

在 git 中，fetch 意味着从远程获取提交**但不更新我的任何本地分支**。`git pull`将执行 fetch 然后将您的分支与其获取的内容合并。获取、检查已完成的内容然后合并或变基甚至拒绝通过强制推送完成的内容是一个好主意 - 取决于情况和您的工作流程。

通常，要查看获取后在遥控器上做了什么，您可以

```
git log ..origin/master 
```

这真的扩展到

```
git log HEAD..origin/master 
```

`..`运算符是组合“从该引用中排除可达提交”和“从该引用中包含可达提交”的简写。所以也可以这样写：

```
git log ^HEAD origin/master 
```

`^`引用开头的意思是排除从这里可以访问的提交。在这种情况下，它意味着您可以从您所在的位置到达。结果将是刚刚从服务器获取的该分支上的提交列表。

`git log`您可以只使用参数，而不是将所有分支和远程分支作为参数列出`--all`：

```
git log --all 
```

这将显示可从所有分支（本地和远程跟踪）和标签访问的所有提交。

`git log`是一个非常强大的命令，因为它允许您基于集合减少您想要查看的提交。`..`是一个很好的语法。还有`...`一个说包括从指定的两个分支到它们的共同祖先的提交。

这种历史的走动是让 git 如此强大并能够支持如此多有趣的工作流程的原因。

**更新：**

当 git 遇到与其父级存储的树中包含的内容相同的提交时，它不会在合并时列出该提交。

```
git log --all --sparse 
```

不会排除这些提交。

[请参阅http://linux.die.net/man/1/git-log](http://linux.die.net/man/1/git-log)的历史简化部分

这也可能意味着您重置了一个分支，或者您的朋友重置了一个分支并且再次获取已经丢失了该引用。当您使用 sha1 执行 git log 时，如果添加 --decorate 会输出什么？也试试`git log --walk-reflogs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:39:44.687

`git log`没有任何进一步的明确参数会显示您当前已签出的提交的历史记录。如果你想查看其他分支或提交，你必须说出`git log`你想要查看的内容。

```
git log --all 
```

应该显示所有分支上的所有修订。

有很多很好的教程可以方便地使用谷歌搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:40:53.983

你是对的 --- 默认情况下 git log 只显示提交的一个子集。默认情况下，git log 仅显示从当前分支的尖端可见的提交。你朋友的提交还没有在你当前的分支中，所以它不会出现在 git log 中。

# css - 可以制作链接到离散 HTML 文件并且不会重新加载整个页面的选项卡吗？

> ID：11584221
> 
> 赞同：0
> 
> 时间：2012-07-20T17:30:50.340
> 
> 标签：css, menu, tabs

我需要链接到服务器上单独的 HTML 文件的菜单选项卡，并具有唯一的 URL。我知道这本身不需要 CSS，但我也想保留启用 Javascript 的菜单的“即时加载”效果，以及只加载页面的相关部分。（我认为，只有 CSS 的菜单会重新加载整个页面）。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:35:00.223

您如何制作/样式菜单对单击后如何加载菜单中链接的页面没有任何影响。为了避免在单击时重新加载页面，您需要`ajax`向该页面发出请求并将其加载到当前页面中。

我建议使用[jQuery 的 AJAX](http://api.jquery.com/jQuery.ajax/)以避免跨浏览器问题。

例子：

```
$('#menu a').click(function(ev){
    $.ajax({
        url: "test.html",
        cache: false
    }).done(function( html ) {
        $("#results").append(html);
    });

    ev.preventDefalt();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:40:38.960

在 Knockout.js 和/或 JQuery 的帮助下，这是可能的。

您可以[使用 JQuery UI 提供的 Tabs 插件使用 JQuery](http://jqueryui.com/demos/tabs/)完成所有操作。您必须编写所有自己的 CSS，这样您就不会获得默认的“选项卡式”外观，而是类似于菜单的外观。

或者，您可以使用[Knockout.js](http://knockoutjs.com/)创建一个客户端视图模型，其中包含一组绑定到您的菜单项的命令。然后，每个命令都会触发页面更新，最有可能使用 JQuery。

这是一个非常高级的示例，说明如何从基本菜单开始：

```
<ul>
 <li data-bind="menuOption1">
 ...
 </li>
</li> 
```

一个 Knockout.js 视图模型

```
var MenuViewModel = function ()
{
  this.menuOption1 = function () {
    // TODO: show the discreet HTML page
  }
}

ko.applyBindings(new MenuViewModel()); 
```

如何实际显示页面取决于您。使用[JQuery AJAX](http://api.jquery.com/jQuery.ajax/)调用加载页面内容可能是最简单的。

# python - 0x88 棋盘表示

> ID：11584224
> 
> 赞同：3
> 
> 时间：2012-07-20T17:31:04.313
> 
> 标签：python, wxpython, artificial-intelligence, chess

我正在尝试使用 wxPython 中的 GUI 制作一个 2 人国际象棋程序，该程序能够验证移动并遵循每条国际象棋规则。

现在，我正处于设计的开始阶段，并正在考虑应该使用哪种电路板表示技术。我最近想到了明显的二维数组，但后来我读到了[0x88 棋盘表示](http://en.wikipedia.org/wiki/Board_representation_%28chess%29#0x88_method)，它在查找方面应该更快，并在逻辑上检查方块是否在棋盘内。但是，如果我在没有 AI 的情况下编写程序，则无需检查是否有人移动了棋盘之外的棋子。

0x88 表示还有其他我不知道的优点吗？你会推荐哪一个，8x8 方法或 0x88。此外，首先使用 8x8 表示是否容易，然后，如果我决定添加 AI，使用 0x88 表示是否容易？非常感谢您的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T02:58:49.027

已经提到的“标准”板表示（0x88、位板等）都有一个极端优化的目标。具体来说，在两个方面进行了极致优化：

1.  让它快点，越快越好
2.  为程序员提供了更好的工具箱来指导国际象棋树的搜索，提高了AI

“标准”棋盘表示只是在编写国际象棋程序并让他们与其他人和其他计算机进行在线竞争的人群中的“标准”。这显然不是你所追求的，所以我不建议你使用任何这些方法。

那些“标准”方法实际上是在尝试使用比特旋转技巧来节省 1-2 个 CPU 周期。您使用 Python 的事实使得在这里和那里节省几个周期完全没有意义。Python 很棒，但它一点也不快。

Python 为您提供了很多很好的工具。使用它们。你的程序会很慢，这并没有错。它不会“感觉”很慢，这才是最重要的。如果我是你，我绝对会使用 Python，而且我不会再考虑在 Python 中使用任何这些琐碎的想法。如果您使用 C 或汇编程序编写代码，那么小玩意儿会很有趣。在 Python 中这是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:13:17.877

我不认为你使用人工智能的决定应该对你的棋盘表示是否可以包括检查方块是否在棋盘内有任何影响。也就是说，无论是计算机还是玩家进行移动，您的底层表示能够检测并优雅地处理涉及无效方格的移动都是有利的。

就个人而言，我相信位板方法——我发现这种方法既非常快速（因为它依赖于按位运算），又在逻辑上适合现代 64 位架构。最重要的是，无论您是否决定使用 AI，都不需要对您的表示进行任何重新设计，因此它也更具前瞻性。

与 0x88 相比，它对内存更友好，每一块都由一个位表示，并且板上的块越少，它就越友好。虽然内存可能不是现代计算机最关心的问题，但它的好处也没有真正的缺点。

使用位板，一个按位运算可以计算出许多棋子的移动有效性，而剩下的标记只计算几个，这意味着您可以以最快的方式确定数百个可能的移动（加上您想要的移动深度），我轶事相信在 0x88 左右跑圈。

如果您对一些与位板相关的代码感兴趣，请参阅我的项目[THUD！](http://thud.svn.sourceforge.net/)（棋盘游戏在游戏规则中不太像国际象棋，但在执行它们的方式上完全相似，代表棋盘和棋子。同样，也设计了一个 AI（甚至是多线程），它说明了位板的可扩展性。如果你有任何问题，我很乐意亲自提出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:40:34.780

我同意你的观点，如果你不做人工智能，就没有太多理由像那样进行微优化。

我要提出的一个建议是，如果您正在考虑从 8x8 切换到 0x88（并且通常是为了获得良好的代码质量），您应该将尽可能多的板访问逻辑抽象为函数。例如，编写并使用

```
getPieceAtLocation(char file, int rank) 
```

并打电话

```
Piece p = getPieceAtLocation('e', 2); 
```

或类似的规定。这样，如果您决定改变主意，您只需要重新编写逻辑，`getPieceAtLocation`而不是更改您必须使用它的每个地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:47:00.250

您还应该查看其他一些 wxPython（或其他）国际象棋项目的想法：

*   [http://sourceforge.net/projects/yapcp/](http://sourceforge.net/projects/yapcp/) (wx)
*   [http://yakinikuman.wordpress.com/2009/04/14/python-chess-v-04/](http://yakinikuman.wordpress.com/2009/04/14/python-chess-v-04/) (tkinter)
*   PyGame - [http://www.pygame.org/tags/chess](http://www.pygame.org/tags/chess)

# javascript - jQuery对象的这种简单比较不比较

> ID：11584227
> 
> 赞同：0
> 
> 时间：2012-07-20T17:31:20.387
> 
> 标签：javascript, jquery

好奇我在这里做错了什么：

```
employee_ids = $('[data-employee_id="'+employee+'"]');
timestamp_ids = $('[data-scheduled_on="'+timestamp+'"]');

var common = $.grep(timestamp_ids, function(element) {
  $.each(employee_ids, function(idx, item) {
     if ( item === element ) { console.log ("omg!") };
  });
}); 
```

这仅返回与查找单个匹配项`timestamp_ids`进行比较的列表，而不是该数组。`employee_ids`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:37:51.190

不管还有什么问题，看起来错误发生在`$.grep`

timestamp_ids 的类型是什么？根据[jQ docs](http://api.jquery.com/jQuery.grep/)，它需要是一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:40:36.677

您没有正确使用[.grep](http://api.jquery.com/jQuery.grep/)。grep 的每次迭代都应该返回一个布尔值：true 表示将其添加到结果数组，false 表示忽略它。

```
var listA = [1, 2, 3];
var listB = [2, 3, 4];

var union = $.grep(listA, function (element) {
    return listB.indexOf(element) !== -1;
}); 
```

请注意，IE 不支持`.indexOf`数组，您必须以其他方式实现比较。

编辑：如果您试图找到符合某些条件的数组的单个项目，我建议只使用常规 for 循环：

```
var result;
for (var i = 0; i < yourArray.length; i++) {
    if (yourArray[i].id === employee_ID) { // whatever conditions you have
        result = yourArray[i];
        break;
    }
}

if (result) {
    // do whatever
} else {
    // no match
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:42:36.860

这行得通吗？

```
employee_ids = $('[data-employee_id="'+employee+'"]');
timestamp_ids = $('[data-scheduled_on="'+timestamp+'"]');

var common = $.grep(timestamp_ids, function(element) {    
    return !($.inArray(element, timestamp_ids) == -1)
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T17:49:06.347

哇！感谢大家的帮助。我刚刚意识到我可以做到这一点：

```
$('[data-employee_id="'+employee+'"][data-scheduled_on="'+timestamp+'"]'); 
```

我也意识到我是个白痴:(

# php - PHP - Fulifilm 照片损坏的 exif 数据错误

> ID：11584238
> 
> 赞同：2
> 
> 时间：2012-07-20T17:32:11.407
> 
> 标签：php, gps, exif

PHP 版本 5.3.10

*简而言之，我无法从我的照片中获取所有 EXIF 数据 - 它说它们已损坏 - 但另一个 PHP 可以获取所有数据，所以我确信这是可能的，但我不知道如何。现在为更详细的版本...*

我有一个脚本只是为了从我的相机中查看给定 JPG 文件的所有 EXIF 数据。看起来像这样...

```
$exif_data = exif_read_data ('TEST.JPG', 0, TRUE); 
foreach ($exif_data as $key => $section) {
    foreach ($section as $name => $val) {
        echo "$key.$name: $val<br />\n";
    }
} 
```

这适用于我的最后一台相机。但是，当我对我的新 FujiFilm 相机中的任何 JPG 运行它时，我会收到上面列表中第一行的错误消息。

```
Warning: exif_thumbnail(TEST.JPG) [exif_read_data]: corrupt EXIF header: maximum directory nesting level reached in (script name) on line (relevant line) 
```

然后它输出一个不完整的 EXIF 数据列表。

我猜对此的第一反应是“你的文件已损坏”，但如果我将它上传到[http://exifdata.com/index.php](http://exifdata.com/index.php)那么它会列出所有 EXIF 数据（包括我的 GPS 数据）我真的很感兴趣）。该网站显然也在 PHP 上运行，所以我建议确实可以使用 PHP 从那里获取 GPS 数据。

我试过用谷歌搜索错误消息，但我得到的只是一些旧的 2005 或 2007 PHP 错误，以及没有人回答的类似 stackoverflow 线程 -[使用 PHP 版本 5.2.9 提取 exif 2.3 的 exif 数据的问题](https://stackoverflow.com/questions/10075066/issues-extracting-exif-data-for-exif-2-3-using-php-version-5-2-9)。

所以......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T19:50:19.373

我也有一台富士相机有同样的问题，但我想我已经找到了解决方案，我在这里提出了一个 PHP 错误报告：[https ://bugs.php.net/bug.php?id=66443](https://bugs.php.net/bug.php?id=66443)

如果您可以从源代码编译您自己的 PHP（或说服您的虚拟主机为您这样做），这很容易解决。

# javascript - Javascript原型继承原型函数调用

> ID：11584239
> 
> 赞同：1
> 
> 时间：2012-07-20T17:32:11.763
> 
> 标签：javascript, prototypal-inheritance

有一个关于在另一个原型函数中调用一个原型函数的问题。

例如，假设我有一个带有两个原型功能的基本滑块。

```
function Slider() {

}

Slider.prototype.transition = function() {

}

Slider.prototype.setTargets = function() {

} 
```

在转换函数中调用 setTargets 函数的正确方法是什么，如下所示：

```
Slider.prototype.transition = function() {
   this.target.fadeOut('normal', function() {
      // call setTargets?  
      this.setTargets(); // errors when i do this
   });
} 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:34:28.373

如果`this.target`是 jQuery 对象，则回调`fadeOut`将`this`作为 DOMNode 调用。

改为这样做：

```
Slider.prototype.transition = function() {
   var me = this;
   this.target.fadeOut('normal', function() {
      me.setTargets(); // <-- See me
   });
} 
```

我为所有对. 我从来没有使用过 DomNodes 等，这对我来说很有意义。~~`that`~~ `me``this`~~`that`~~ `me`

有关这一点的进一步观点，请参阅评论。

**编辑：**

Acually我以前`me`没有`that`- 不知道我在想什么？？！

* * *

**并发表评论：**

```
Slider.prototype.transition = function() {
   var me = this;
   this.target.fadeOut('normal', function() {
      var domThis = this;
      me.setTargets(); // <-- See me
      setTimeout(function() {
          // Use domThis [Dom Node]
      }, 123);
   });
} 
```

或者：

您可以创建一个 jQuery 对象：

```
 var $this = $(this);
      me.setTargets(); // <-- See me
      setTimeout(function() {
          // Use $this [jQuery Object]
      }, 123); 
```

如果你需要这个的 jQuery 对象你可以参考：`me.target`

```
 me.setTargets(); // <-- See me
      setTimeout(function() {
          // Use me.target [jQuery Object]
      }, 123); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:35:54.400

该`fadeOut`函数不会在您的`slider`对象的上下文中调用。

```
Slider.prototype.transition = function() {
    var slider = this;
    this.target.fadeOut('normal', function() {
        // call setTargets?  
        slider.setTargets(); // should work now.
    });
} 
```

# css - CSS：具有交叉标签和水平标签的 div

> ID：11584244
> 
> 赞同：2
> 
> 时间：2012-07-20T17:32:29.550
> 
> 标签：css

[我在这里](http://speckyboy.com/2009/02/19/12-wordpress-plugins-to-display-and-highlight-code-within-your-blog/)看一个帖子，注意到快照有一个侧面标签栏和一个用于标记内容的底部水平栏。

如何使用 CSS 实现这一点？

更新：我说的是第一张图片中的横杆，上面写着“快照”和“WP 高级代码编辑器”！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:39:37.290

试试这个 - [http://jsfiddle.net/hEeZA/](http://jsfiddle.net/hEeZA/)

HTML

```
<div class="container">
    <span class="diag"> Some text </span>
    <span class="horiz"> Some text </span>
</div> 
```

CSS

```
div {
    height: 300px;
    width: 400px;
    background: beige;
    overflow: hidden;
    position: relative;
}

span {
    width: 200px;
    display: inline-block;
    height: 30px;
    line-height: 30px;
    color: #fff;
    background: orange;
    text-align: center;
    position: absolute;
}

.horiz {
    bottom: 40px;
}

.diag {
    -webkit-transform:rotate(45deg);
       -moz-transform:rotate(45deg);
            transform:rotate(45deg);

    right: -50px;
    top: 30px
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:58:02.447

我的演示可以在这里看到[http://dabblet.com/gist/3152262](http://dabblet.com/gist/3152262)

我有一个图像包装器，`overflow:hidden`并且我只是使用了一个`:before`已旋转并绝对定位的伪元素。水平的想法相同。

HTML

```
<a href="#" class="img-wrapper">
    <img src="img.jpg">
</a> 
```

CSS

```
.img-wrapper {
    width: 400px;
    height: 300px;
    box-shadow: 1px 1px 3px #000;
    display: block;
    overflow: hidden;
    position: relative;
}
.img-wrapper:before, .img-wrapper:after {
    padding: .3em 2.9em;
    position: absolute;
    background: blue;
    color: white;
    font: 700 14px sans-serif;
}
.img-wrapper:before {
    top: 35px;
    right: -40px;
    transform: rotate(45deg);
    content: 'Screenshot';
}
.img-wrapper:after {
    top: 85%;
    content: 'Developer Formatter'
} 
```

# python - 如何简化这一系列 target.write 命令？

> ID：11584247
> 
> 赞同：1
> 
> 时间：2012-07-20T17:32:38.880
> 
> 标签：python

我正在学习 Zed Shaw 的“Learn Python The Hard Way”。我要练习 16 ( [http://learnpythonthehardway.org/book/ex16.html](http://learnpythonthehardway.org/book/ex16.html) ) 并且遇到了一个问题来找出额外的信用 #3。在底部有一系列 6 个 target.write 命令script 和 Zed 希望我使用字符串、格式和转义符将它们简化为单个 target.write 命令。

这是带有 6 个 target.write 命令的原始脚本...

```
from sys import argv

script, filename = argv

print "We're going to erase %r." % filename
print "If you don't want that, hit CTRL-C (^C)."
print "If you do want that, hit RETURN."

raw_input("?")

print "Opening the file..."
target = open(filename, 'w')

print "Truncating the file.  Goodbye!"
target.truncate()

print "Now I'm going to ask you for three lines."

line1 = raw_input("line 1: ")
line2 = raw_input("line 2: ")
line3 = raw_input("line 3: ")

print "I'm going to write these to the file."

target.write(line1)
target.write("\n")
target.write(line2)
target.write("\n")
target.write(line3)
target.write("\n")

print "And finally, we close it."
target.close() 
```

首先，我尝试像这样压缩 target.write 命令......

```
target.write (line1, line2, line3) 
```

当我运行脚本时，我得到了；TypeError：函数只需要 1 个参数（给定 3 个）

然后我试了...

```
target.write "I love %r and %r and %r." % (line1, line2, line3) 
```

我得到 SyntaxError: invalid syntax

我也试过...

```
target.write (line1), (line2), (line3) 
```

这次脚本运行到竞争没有任何错误，但是当我打开脚本应该写入的文件（text.txt）时，它只将第一个字符串（line1）写入文件，而不是其他两个字符串（第 2 行）和（第 3 行）。

最后，我尝试了这个...

```
target.write (line1, "\n", line2 "\n", line3, "\n") 
```

但是我又得到了一个 SyntaxError: invalid syntax

有人可以指出我正确的方向吗？

非常感激。

埃迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:35:05.897

你可以做

```
target.write('\n'.join((line1,line2,line3))+'\n') 
```

或者，也许写得更清楚一点：

```
lines=(line1,line2,line3)
target.write( '\n'.join(lines) + '\n') 
```

虽然在这种情况下，我实际上可能会单独编写最后一个换行符，以避免创建一个全新的字符串只是为了在末尾添加一个换行符（而且我认为它看起来更干净）：

```
lines=(line1, line2, line3)
target.write('\n'.join(lines))
target.write('\n') 
```

这需要你的行，将它们打包成一个元组，并使用`join`字符串对象的方法将它们变成一个被写入的字符串。

这种方法的优点（与字符串格式相反）是您不需要*先验*地知道要编写多少“行”。任何可迭代对象都可以代替上述表达式中的元组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:34:24.570

[write()](http://docs.python.org/library/stdtypes.html?highlight=write#file.write)需要一个`string`作为参数。你可以试试

```
 target.write (line1 + '\n' + line2 +'\n' + line3)  # ugly!! - but works 
```

更好的方法是构建你的字符串然后打印它。

```
 line = '{}\n{}\n{}\n'.format(line1, line2, line3)
 target.write(line) 
```

或动态加入你的字符串`join()`，以及其他几种方法来解决这个问题，但这应该让你开始（并解释问题的原因）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T18:04:50.037

一般而言，任何由定义的数据序列重复相同操作组成的代码都可以转换为循环，该循环遍历该数据的集合，并在循环中执行该操作。因此，这：

```
target.write(line1)
target.write("\n")
target.write(line2)
target.write("\n")
target.write(line3)
target.write("\n") 
```

变成：

```
data = (line1, "\n", line2, "\n", line3, "\n")
for datum in data:
    target.write(datum) 
```

好多了！`write`现在，如果您想做其他事情（例如发送到不同的文件，或使用不同的方法），您只需更改一行代码。**看看你能不能想出办法让这一切变得更好**。

但是，还有另一种选择：如果您对多个数据进行操作，该操作具有连接该数据的效果，您可以将数据连接到单个数据中并执行一次操作（*绝对新手：*请注意，如果操作执行更多操作除此之外，它们可能并不完全等价）。在这种情况下，它变成：

```
data = (line1, "\n", line2, "\n", line3, "\n")
target.write(''.join(data)) 
```

现在，**查看 的文档`join`，并找出如何进一步简化它。**（提示：它利用了与简化循环相同的数据事实）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T17:36:09.100

怎么样

```
target.write("%s\n%s\n%s\n" % (line1, line2, line3)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-03T05:40:14.310

写一个字符串：

> 行 = "%s\n%s\n%s\n" % (line1, line2, line3)
> 
> target.write（行）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-24T23:21:06.880

我做了

```
target.write("%s\n%s\n%s" % (line1, line2, line3 )) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-04T20:40:09.073

```
target.write('\n' .join((line1 , line2 , line3))+'\n') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-06T03:46:16.397

target.write(""" line1 \n line2 \n line3 \n""")

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-26T10:55:00.130

```
target.write(""" #{line1} \n #{line2} \n #{line3} \n""") 
```

这是唯一对我有用的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-02T15:20:44.313

这对我有用，试试看

```
lines = " %s \n %s \n %s  \n"  %  (line1, line2, line3)

target.write(lines) 
```

# android - keyIcon 和 keyLabel 在某些手机上像素化

> ID：11584248
> 
> 赞同：1
> 
> 时间：2012-07-20T17:32:49.130
> 
> 标签：android, button

全部，

我找不到以前提出过这个问题的任何线程，所以我一定错过了一些非常容易的事情。我是 android 新手，正在玩创建一个`inputmethod`. 我抽出了锁屏的所有安卓代码，当我在模拟器或三星 Galaxy 上查看时，按钮上的字体看起来很完美。但是当我在我的 HTC Sensation 上查看它们时，一切都非常像素化。起初我认为问题出在`sym_keyboard_numX`图像文件上，但我测试了两件事以确保不是这种情况：

1.  我最初有这些的 hdpi 和 mdpi 图像。我删除了 mdpi 图像，只留下 hdpi 以确保不会加载错误的图像。
2.  我尝试使用 a`keyLabel`而不是图像作为数字，但文本仍然非常像素化。

我查看了所有代码，寻找可能影响质量的任何值，但找不到任何东西。我很感激任何帮助！

这是定义键盘的 xml 文件。您会看到我`keyLabels`在大多数按钮中都使用了一些按钮`keyIcons`来测试差异。正如我所说，没有区别。我不知道任何其他对您有用的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<!--
/*
**
** Copyright 2008, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License");
** you may not use this file except in compliance with the License.
** You may obtain a copy of the License at
**
**     http://www.apache.org/licenses/LICENSE-2.0
**
** Unless required by applicable law or agreed to in writing, software
** distributed under the License is distributed on an "AS IS" BASIS,
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
** See the License for the specific language governing permissions and
** limitations under the License.
*/
-->
<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
    android:keyWidth="33.33%p"
    android:horizontalGap="2px"
    android:verticalGap="0px"
    android:keyHeight="@dimen/password_keyboard_key_height"
    >

    <Row>
        <Key android:codes="49" android:keyLabel="1" android:keyEdgeFlags="left"/>
        <Key android:codes="50" android:keyLabel="2"/>
        <Key android:codes="51" android:keyLabel="3"/>
    </Row>

    <Row>
        <Key android:codes="52" android:keyLabel="4" android:keyEdgeFlags="left"/>
        <Key android:codes="53" android:keyIcon="@drawable/sym_keyboard_num5"/>
        <Key android:codes="54" android:keyLabel="6"/>
    </Row>

    <Row>
        <Key android:codes="55" android:keyLabel="7" android:keyEdgeFlags="left"/>
        <Key android:codes="56" android:keyLabel="8"/>
        <Key android:codes="57" android:keyLabel="9"/>
    </Row>

    <Row android:rowEdgeFlags="bottom">
        <Key android:codes="10" android:keyIcon="@drawable/sym_keyboard_ok"/>
        <Key android:codes="48" android:keyLabel="0"/>
        <Key android:codes="-5" android:keyIcon="@drawable/sym_keyboard_delete"
            android:iconPreview="@drawable/sym_keyboard_feedback_delete"
            android:isRepeatable="true" android:keyEdgeFlags="right"/>  
    </Row>

</Keyboard> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T17:04:44.060

显然这个问题之前已经出现过，但我在所有搜索中都没有遇到过。可能只是错误的搜索词。在发布我的问题之前，我什至浏览了所有的 stackoverflow 建议，但其中一个`Related`帖子有我的答案：[https ://stackoverflow.com/questions/6496870/assets-look-grainy-pixelated?rq=1](https://stackoverflow.com/questions/6496870/assets-look-grainy-pixelated?rq=1 "资产看起来颗粒状/像素化")

基本上我必须添加一个`minSdkVersion`（`targetSdkVersion`？），`supports-screens`如下所示： `<supports-screens android:resizeable="true" android:largeScreens="true"/> <uses-sdk android:minSdkVersion="4" android:targetSdkVersion="10"/>`

# cocos2d-iphone - 这个 +(CCScene *) 场景是干什么用的？

> ID：11584249
> 
> 赞同：1
> 
> 时间：2012-07-20T17:32:49.380
> 
> 标签：cocos2d-iphone

我看到的许多示例 CCLayer 子类的代码如下所示：

```
+(CCScene *) scene{
    CCScene *scene = [CCScene node];
    HelloWorldLayer *layer = [HelloWorldLayer node];
    [scene addChild: layer];

    return scene;
} 
```

谁调用了该方法，它的用途是什么？它需要在那里吗？对将来的目的是否方便？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:59:55.963

是的，它是必需的。该方法在`applicationDidFinishLaunching`ApplicationDelegate 的方法中调用。例如在 HellowWorld 模板中，它在 AppDelegate 的这一行中被调用： `[[director_ pushScene: [HelloWorldLayer scene]]`

ccDirector 只能运行 CCScene，并且一次只能运行一个 CCScene。这就是为什么 CCLayer 首先创建一个 CCScene，然后将自己作为子节点添加到其中的原因。作为替代方案，您可以通过覆盖它的方法来继承`CCScene`并添加您的等：`CCLayers``init`

```
-(id) init {
   if (self = [super init]){
     CCLayer *aLayer = [CCLayer node];
     [self addChild: aLayer];
     ....
  }
 return self;
} 
```

并在AppDelegate的方法中将这一行替换`[[director_ pushScene: [HelloWorldLayer scene]]`为 this 。`[[director_ pushScene: [myScene node]]``applicationDidFinishLaunching`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:36:01.477

我所知道的是不需要它，我想知道同样的事情。我认为这是因为他们想稍微鼓励使用场景。您的场景应该由图层组成，并且您应该在场景之间切换。

# c++ - 通过初始化列表调用另一个类的构造函数。有问题

> ID：11584251
> 
> 赞同：9
> 
> 时间：2012-07-20T17:32:56.450
> 
> 标签：c++, class, object, constructor, initializer-list

这是我的示例代码：

```
#include <iostream>
using namespace std;

class Base
{
public:
    Base (int v, char z) {x=v;y=z;};
    int x;
    char y;
};

class Bar
{
public:
    Bar(int m, char n):q(m),s(n),base(q,s){};
    Base base;
    int q;
    char s;    
};

int main()
{
    Bar barObj(5,'h');    
    cout << barObj.base.x << barObj.base.y << endl;       
    return 0;
} 
```

为什么我得到输出`0`？ [http://ideone.com/pf47j](http://ideone.com/pf47j)

另外，一般来说，在另一个类中创建成员对象并调用该对象的构造函数的正确方法是什么，就像上面对`class Base`, inside的对象基所做的那样`class Bar`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T17:41:12.020

数据成员的初始化顺序遵循其声明顺序，而不是您列出其初始化程序的顺序。因此，`Bar::base`总是在`Bar::q`和之前初始化`Bar::s`。
如[http://ideone.com/M6iKR](http://ideone.com/M6iKR)所示，for `Bar::Bar(int m, char n)`，初始化`base`使用`m`并且`n`工作正常。

# scala - Scala：用对象替换地图中的键？

> ID：11584256
> 
> 赞同：1
> 
> 时间：2012-07-20T17:33:20.000
> 
> 标签：scala

我一直在用稍微复杂的地图做一些工作，我需要解决的最后一个问题是替换`Map()`键为 a 的 a`Option[Long]`并将其替换为 a 的键`Option[User]`。

地图看起来像：

`(Map[ Option[Long], List[Tuple3[Job,Option[Client],Option[Project]]] ]()`

我有一个`Option[User]`. 我在想 foldLeft 可以解决问题，但是对于我的业余爱好来说，语法很棘手。我尝试了以下但没有成功：

```
theMap.foldLeft(users){
      (u,j) => 
        if(j._1!=None) {
          Map(u, j._2)
        } else {
          Map(User.placeholder, j._2)
        }
    }.flatten 
```

下面的编译器错误表明我可能没有在正确的位置获取变量。

```
type mismatch; found : List[Option[models.User]] required: (?, ?) 
```

这如何才能正确完成？

**编辑：**意识到我还需要将第一个`Long`键与`user.id`. 如果我弄清楚了，我会更新它。

越来越近，只是切换到映射。但这有点麻烦：

```
allJobs.map{
     case ((i,l)) =>
       val user = users.map{ user =>
         if(user.map(_.id)==i) user
       }
       Tuple2(user.head, l)
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:14:31.223

如果我理解正确，那么应该这样做。

```
val userMap = users map {u => (u, theMap(u map {_.id})} toMap 
```

我不确定`Option`这里的密钥有多有用，因为只能有一个`None`密钥，但是如果您需要考虑该密钥并且它可能不在`users`列表中，那么您可以单独添加它。

```
val newMap = if(theMap contains None) userMap + (User.placeholder, theMap(None)) 
             else userMap 
```

# iphone - 存储许多 NSDictionaries 的最佳方式是什么？

> ID：11584257
> 
> 赞同：0
> 
> 时间：2012-07-20T17:33:31.187
> 
> 标签：iphone, objective-c, nsstring, nsarray, nsdictionary

我需要为我的 iPhone 应用程序中的不同配置和设置存储许多**Facebook 应用程序 ID**和**Twitter 消费者密钥**。

我知道我这样做的方式不是最好的，因为它有太多的`if else`陈述。**使用正确的Objective-C 设计模式**来完成这项任务的最佳方法是什么？

 **这是我的代码：

```
- (id) init {
self = [super init];
if (!self) return nil;

keyNames = [[NSArray arrayWithObjects:
             @"facebookAppId", 
             @"facebookLocalAppId",
             @"twitterConsumerKey",
             @"twitterSecret",
             nil]retain];

if (MainLanguage == @"English") {

    keys = [[NSArray arrayWithObjects:
             @"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", //facebookAppId
             @"yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy", //facebookLocalAppId
             @"zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz", //twitterConsumerKey
             @"wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww", //twitterSecret
             nil]retain];

    dictionary = [[NSDictionary dictionaryWithObjects:keys forKeys:keyNames]retain];

}

else if (MainLanguage == @"Spanish") {

    keys = [[NSArray arrayWithObjects:
             @"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", //facebookAppId
             @"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb", //facebookLocalAppId
             @"cccccccccccccccccccccccccccccccc", //twitterConsumerKey
             @"dddddddddddddddddddddddddddddddd", //twitterSecret
             nil]retain];

    dictionary = [[NSDictionary dictionaryWithObjects:keys forKeys:keyNames]retain];

}  else if (MainLanguage == @"French") {

   //etc...

} else if (MainLanguage == @"Italian") {

    //etc...

}

//etc..

return self; 
```

}

```
-(void)dealloc {

    [keyNames release];
    [keys release];
    [dictionary release];
    [super dealloc];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T02:23:52.727

两个主要问题：

*   为什么键名在数组中？
*   您不应该将 NSString*s 与 == 进行比较。

您可能还想使用语言代码。

我可以想到两个“Objective-C”选项，一个 hacky 选项和一个“C”选项：

1.  将其存储在字典中。这似乎有点浪费，因为它构建了一堆字典并且只使用其中一个。

    ```
    [NSDictionary dictionaryWithObjectsAndKeys:
      [NSDictionary dictionaryWithObjectsAndKeys:
        @"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", @"facebookAppId",
        @"yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy", @"facebookLocalAppId",
        ...
      nil], @"en",
      [NSDictionary dictionaryWithObjectsAndKeys:
        @"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", @"facebookAppId",
        ...
      nil], @"es",
      ...
    nil] 
    ```

2.  将其粘贴在 plist 中。这可能是有问题的，因为提取它们所要做的就是解压缩您的 .ipa。

    ```
    <dict>
      <key>en</key>
      <dict>
        <key>facebookAppId</key>
        <string>...</string>
        ...
      </dict>
      <key>es</key>
      <dict>
        ...
      </dict>
      ...
    </dict> 
    ```

3.  将其存储在 Localizable.strings 中。同样，通过解压缩 .ipa 来提取也很简单。

4.  将其存储在结构数组中：

    ```
    struct {
      NSString *lang;
      NSString *facebookAppId;
      NSString *facebookLocalAppId;
      NSString *twitterConsumerKey;
      NSString *twitterConsumerSecret;
    } const foo_data[] = {
      {@"en", @"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", @"yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy", ...},
      {@"es", @"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa", ...},
      ...
    };

    ...

    for (size_t i = 0; i < sizeof(foo_data)/sizeof(foo_data[0]); i++) {
      if ([lang isEqualToString:foo_data[i].lang]) {
        return [NSDictionary dictionaryWithObjectsAndKeys:
                 foo_data[i].facebookAppId,@"facebookAppId",
                 ...
               nil];
      }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:39:04.700

那么数据必须存储在某个地方吗？您可以有一个单独的类将数据存储在哈希表中。然后，您只需在每次获得语言时引用该功能。你的代码肯定会看起来更干净。查看 NSHashTable。**

# android - 滚动视图可以在屏幕的一半上吗（即 widh 分成 2 部分）

> ID：11584261
> 
> 赞同：0
> 
> 时间：2012-07-20T17:33:59.180
> 
> 标签：android

我有一个布局，右侧有一张卡片的图片。左侧有一个文本视图，然后是一个文本视图的滚动视图。滚动视图不滚动。这是因为滚动视图必须是屏幕的整个宽度，不能一分为二吗？

# asp.net-mvc - 使用 Jquery Ajax 显示手风琴

> ID：11584265
> 
> 赞同：0
> 
> 时间：2012-07-20T17:34:08.653
> 
> 标签：asp.net-mvc, jquery, accordion, jquery-ui-accordion

单击任何记录后，我有一个充满数据的表格。调用一个 jquery ajax 函数并获取该记录的详细信息并将其显示在与该记录关联的 div 中。

现在我想在手风琴中展示它。

大多数时候jquery手风琴都是这样工作的

```
 $(document).ready(function() {  
    $('#accordion').accordion();  
}); 
```

但在这里我希望我的 div 先填充数据，然后调用手风琴方法。因为如果先调用手风琴（），那么手风琴就不会显示任何内容，因为对数据的请求仍在处理中。

我的 jquery ajax 方法是这样的

```
 $(function () {
        $("span.Consignment").click(function () {
            var position = 'div#' + this.innerHTML;
            var url = "/Tracking/TrackingConsignment?consno=" + this.innerHTML;
            $(position).load(url, function() {
                $("a.Consignment").accordion();
                return false;
            });

        });
    }); 
```

这是我的代码

```
 @foreach (var lst in item.Item2)
        {
           <a href="#" class="Consignment">
                <table class="gridtable">
                    <a href="#">
                        <tr>
                            <td>                                   
                                <span class="Consignment" href="#">@lst.ConsignmentNo</span>
                            </td>
                            <td>@lst.ConsignmentDate
                            </td>
                        </tr>
                    </a>
                </table>
            </a>

            <div id="@lst.ConsignmentNo">
            </div>
        } 
```

我应该如何使它工作。首先是数据，然后是手风琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:45:11.327

在`.load`.

```
.load(url,function(){
    $("#accordion").accordion();
}) 
```

# android - 使用什么免费服务来存储事件统计信息？

> ID：11584269
> 
> 赞同：0
> 
> 时间：2012-07-20T17:34:31.097
> 
> 标签：android, google-sheets, flurry, parse-platform

现在要**分析**用户在我的应用程序中打开的内容`Activities`和其他分析数据，我正在使用来自[flurry的](http://www.flurry.com/)**事件**。但不可能在 PC 上下载所有事件以及每个事件的自定义数据。我想以 xml（或 txt 或 csv）的形式下载它，以在 Excel 中分析它作为示例。

*   [parse.com](http://www.parse.com) - 现在我要使用它。但是每月 1 000 000 次查询是免费的，所以如果应用程序的安装量超过 100 000 次... :(
*   *提交 google-spreadsheet 的表单*- 很好，但有几个时刻。

有人知道其他免费的事件跟踪服务，我可以从中下载数据吗？

**要求：**我必须有机会获得**有 4 列的表格**：

*   *安装*ID （[像这样的东西](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)）；
*   *eventDateTime*（事件的当前时间）；
*   *eventName*（可以是 ActivityName 或 CustomEventName）；
*   *customDataForThisEvent*（此事件的自定义字符串数据）。

我将在代码中设置所有这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:41:08.953

为什么不使用[谷歌分析](https://developers.google.com/analytics/devguides/collection/android/)？默认情况下它不会创建 Excel 电子表格，但快速的 google 搜索显示了大量用于从分析数据生成 XLS 报告的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:44:06.537

我认为[Cobub Razor](http://github.com/cobub/razor)适合你。它具有事件统计数据。因为它是开源的，所以您可以根据需要从数据库中获取所有数据。

但是你应该建立自己的服务器来收集数据。这取决于数据的重要性。

# actionscript-3 - “field.appendText”和“field.htmltext =”有什么区别

> ID：11584271
> 
> 赞同：0
> 
> 时间：2012-07-20T17:34:41.460
> 
> 标签：actionscript-3, htmltext, appendtext

我已经找了一天，但我找不到任何答案。以下2个代码有什么区别。（性能、操作等）

第一个代码

```
tField.appendText("<font color='#7f7f7f'>" + TahminTxt.text + "\n</font>");
tField.htmlText=tField.Text; 
```

第二代码

```
tField.htmlText+="<font color='#7f7f7f'>" + TahminTxt.text + "\n</font>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:50:12.723

在操作方面，我相信最终结果是等效的，但是 appendText 在文档、其他论坛和我自己的测试中要快得多：http: [//help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c3a0f5f19124318fc87b-7ffc .html](http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c3a0f5f19124318fc87b-7ffc.html)

# scala - 使用对象查找类

> ID：11584275
> 
> 赞同：1
> 
> 时间：2012-07-20T17:34:54.307
> 
> 标签：scala, reflection

我有一个接收对象（如`def fun(t : Object)`）的函数/方法。现在如果有人创建一个类并使用一个对象调用我的函数，有没有办法找出它来自哪个类？

例如一个伪代码

```
class Test {         
   def sum() {} // some arbitrary method
}

def fun(t : Object) {
   val ob = t.asInstanceOf[Test]
   ob.sum() // this will work if I know the classname (Test) 
} 
```

但是如果用户创建了一个新类并将对象发送给我，我应该如何对其进行类型转换并访问对象？有没有办法使用给定的对象找到类类型？我试图打电话`t.getClass()`，但它不适合我。请帮帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:50:53.143

您可以使用模式匹配来匹配您在函数中接收的对象。当您在案例类上匹配时，您可以访问该类的功能并可以调用它们。在下面的示例中，您可以在相应匹配中调用 f 或 b 上的函数。例如`f.toString`。

```
scala> def f(o: Object) = o match{
 | case f:Foo => println("o is a Foo")
 | case b:Bar => println("o is a Bar")
 | case _   => println("o is unknown")
 | } 
```

# intellij-idea - 使用 IntelliJ 发现 Jar

> ID：11584285
> 
> 赞同：2
> 
> 时间：2012-07-20T17:35:43.820
> 
> 标签：intellij-idea

如果我有一个 IntelliJ 项目（不是 maven，不是 gradle，不是 ant，没有 pom.xml、build.xml...），我可以设置 IntelliJ 自动在 .ivy2、.gradle 和 .m2 存储库中查找 jars 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:59:55.450

它不适用于机器上的本地目录，需要 Maven 存储库，但是您可以安装和使用[本地 Nexus 存储库](http://www.sonatype.com/Products/Nexus-Professional)。查看[此博客文章](http://blogs.jetbrains.com/idea/2010/08/getting-external-libraries-easily/)了解更多详细信息。

您也可以改用[Library Finder](http://plugins.intellij.net/plugin/?idea&pluginId=51)第三方插件。

# android - 如果将 AsyncTask 声明为 Activity 的内部类或在单独的文件中，为什么 AsyncTask 的行为会有所不同？

> ID：11584290
> 
> 赞同：3
> 
> 时间：2012-07-20T17:36:07.863
> 
> 标签：android, android-asynctask

我正在使用一个名为[Sugar](https://github.com/satyan/sugar/wiki/Getting-Started)的 Android ORM将我的模型保存在数据库中，并在我的 AsyncTask 中使用它。

这是它的声明：

```
public class LoginTask extends AsyncTask<Object, Integer, String> {

    private Context context;
    private ProgressDialog progressDialog;

    public LoginTask(Context context) {
        this.context = context;
    }

    @Override
    protected void onPreExecute() {
        progressDialog = new ProgressDialog(context) {
            {
                setMessage("Authenticating...");
                setTitle("Login");
                setCancelable(false);
                setIndeterminate(true);
                show();
            }
        };
    }

    @Override
    protected String doInBackground(Object... params) {
        String email = (String) params[0];
        String password = (String) params[1];

        try {
            User user = LoginWebService.loginUser(email, password,
                    context);
            user.save();
        } catch (CommunicationException e) {
            e.printStackTrace();
            return e.getMessage();
        }

        return null;
    }

    @Override
    protected void onPostExecute(final String result) {
        progressDialog.dismiss();
    }
} 
```

上面的行**user.save()**将用户模型保存在数据库中，是导致异常的行。奇怪的是，如果我将上面的任务声明为活动的内部类，它工作正常，但如果我在单独的文件中声明任务，它会抛出这个异常：

```
E/AndroidRuntime(17172):    at com.app.task.LoginTask.doInBackground(LoginTask.java:47)
E/AndroidRuntime(17172):    at com.app.task.LoginTask.doInBackground(LoginTask.java:1)
E/AndroidRuntime(17172):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
E/AndroidRuntime(17172):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
E/AndroidRuntime(17172):    ... 5 more
E/AndroidRuntime(17172): Caused by: java.lang.RuntimeException: Cant create handler inside thread that has not called Looper.prepare() 
```

我看不出有什么区别，因为我看不出有任何意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:49:00.180

您正在尝试从后台线程访问/更新 UI。log cat 的最后一句中抛出的异常表示“这些”类型的交互。如果它是活动的内部类，这也会崩溃。

证明是你通过了`context`. 另一个问题，因为这也可能是问题。这是活动的上下文还是 AsyncTask 的上下文？它需要什么上下文？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T12:19:53.837

您使用的是 1.3 版吗？

我使用的是 1.3 版，没有在我的清单中使用 DOMAIN_PACKAGE_NAME 并在 AsyncTask 中做同样的事情，实际上我正在使用 ProgressDialog 在 AsyncTask 中做很多数据库工作......

如果你想强调一些事情，我的清单中的应用程序标签添加了 android:persistent="true" 标签。

我的主要活动也有 android:launchMode="singleTask"，但我也从其他活动中调用了一些 AsyncTask。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T21:27:40.110

我看到这是一个非常古老的线程，但我想为那些将来提到这个问题的人付出一些努力。

我有一个类似的问题，下面的步骤解决了这个问题。

您可以通过适当设置来避免或解决此问题，

```
<meta-data android:name="DOMAIN_PACKAGE_NAME" android:value="com.example" />
in your AndroidManifest.xml 
```

[原指南](http://satyan.github.io/sugar/getting-started.html)中已经提到，这些参数都是可选的，但是没有设置这个参数，你可能会遇到上面的异常。

我还在主仓库上打开了一个问题，要求在[此处更新指南](https://github.com/satyan/sugar/issues/153)

# python - 在python中逐行复制文件

> ID：11584300
> 
> 赞同：8
> 
> 时间：2012-07-20T17:36:45.437
> 
> 标签：python

我正在编写一个 python 程序来将文件逐行复制到一个新文件中。我的代码在下面，我在其中使用循环逐行复制文件。

但是，由于文件中的行数可能会改变，有没有办法在 python 中逐行复制文件而不使用依赖数字的循环，而是依赖诸如 EOF 字符之类的东西来终止循环？

```
import os
import sys

i = 0
f = open("C:\\Users\\jgr208\\Desktop\\research_12\\sap\\beam_springs.$2k","r")
copy = open("C:\\Users\\jgr208\\Desktop\\research_12\\sap\\copy.$2k","wt")
#loop that copies file line by line and terminates loop when i reaches 10
while i < 10:
     line = f.readline()
     copy.write(str(line))
     i = i +1
f.close()
copy.close() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T17:39:40.643

您可以通过迭代文件对象本身来迭代 Python 中文件对象中的行：

```
for line in f:
    copy.write(line) 
```

从[文件对象的文档中](http://docs.python.org/tutorial/inputoutput.html#methods-of-file-objects)：

> 读取行的另一种方法是遍历文件对象。这是内存效率高，速度快，并导致更简单的代码：

```
>>> for line in f:
        print line, 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-20T17:43:04.853

文件可以直接迭代，无需显式调用`readline`：

```
f = open("...", "r")
copy = open("...", "w")
for line in f:
    copy.write(line)
f.close()
copy.close() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T17:44:32.573

请参阅[`shutil`](http://docs.python.org/library/shutil.html)模块以获得比逐行复制更好的方法：

> `shutil.copyfile(src, dst)`
> 
> 将名为 src 的文件的内容（无元数据）复制到名为 dst 的文件中。dst 必须是完整的目标文件名；查看 shutil.copy() 以获取接受目标目录路径的副本。如果 src 和 dst 是相同的文件，`Error`则引发。目标位置必须是可写的；否则，`IOError` 将引发异常。如果 dst 已经存在，它将被替换。无法使用此功能复制字符或块设备和管道等特殊文件。src 和 dst 是以字符串形式给出的路径名。

**编辑：** 您的问题说您正在逐行复制，因为源文件是易失性的。你的设计有些不对劲。您能否分享有关您正在解决的问题的更多详细信息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-04T16:07:51.413

处理大数据时，逐行写入可能会很慢。您可以通过一次读/写一堆行来加速读/写操作。[请在此处](https://stackoverflow.com/a/46569375/6466550)参考我对类似问题的回答

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-27T10:23:51.633

使用`with`语句：

```
with open("input.txt", "r", encoding="utf-8") as input_file:
  with open("output.txt", "w", encoding="utf-8") as output_file:
    for input_line in input_file:
      output_line = f(input_line) # You can change the line here
      output_file.write(output_line) 
```

请注意，`input_line`包含行尾字符（`\n`或`\r\n`），如果有的话。

# java - 基于布尔值运行方法

> ID：11584309
> 
> 赞同：-1
> 
> 时间：2012-07-20T17:37:25.793
> 
> 标签：java

您好，我想在布尔值为真时调用一个方法。我试过这个：

```
public void checkboxpress(int i){
    assert(day_b_1) ?  uncheckbox() : checkbox();
} 
```

但这不起作用。我可以这样做吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T17:38:13.047

使用 if 语句——不要试图花哨（KISS——保持简单，傻）。

```
if (day_b_1) uncheckbox();
else checkbox(); 
```

现在如果这两种方法都返回结果你可以做

`result = day_b_1 ? uncheckbox() : checkbox();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:40:36.760

只需检查它是否为真：

```
if(day_b_1)
   uncheckbox();   // if day_b_1 is true uncheck
else
   checkbox(); 
```

# macos - 无法通过套接字 tmp/mysql.sock 连接到本地 MySQL 服务器

> ID：11584310
> 
> 赞同：0
> 
> 时间：2012-07-20T17:37:33.187
> 
> 标签：macos, mysql, mysql.sock, mysqladmin

刚刚尝试在终端（flush_hosts）中访问一些 mysqladmin 权限，我注意到套接字问题已经重新出现并出现错误

> 无法通过套接字'/tmp/mysql.sock' (2)* 连接到本地 MySQL 服务器。

我目前没有运行服务器。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:38:50.470

如果您知道它在您的机器中的位置，请尝试删除文件中的套接字字段`database.yml`或使用正确的路径更改它。`mysql.sock`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:04:12.803

哇，你自己提到过，你“必须”运行一个可以连接它的服务器，请考虑：

```
root@debian:/etc/init.d# /etc/init.d/mysql stop
[ ok ] Stopping MySQL database server: mysqld.
root@debian:/etc/init.d# mysql 
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)
root@debian:/etc/init.d# /etc/init.d/mysql start
[ ok ] Starting MySQL database server: mysqld ..
[info] Checking for tables which need an upgrade, are corrupt or were 
not closed cleanly..
root@debian:/etc/init.d# mysql -uroot -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 37
Server version: 5.5.24-5 (Debian)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:51:09.550

好的，看来在此过程中一定有一些混乱的配置。我从头开始安装最新的.DMG for MySQL，现在一切正常。如果你有 .sock 问题，我猜你最好的选择是重新安装 MySQL，它根本不需要很长时间。谢谢您的帮助！

# visual-studio-lightswitch - LightSwitch 2011：验证孩子

> ID：11584312
> 
> 赞同：0
> 
> 时间：2012-07-20T17:37:46.490
> 
> 标签：visual-studio-lightswitch

我在 LightSwitch 中有一个屏幕，它有一个父实体和一个子实体。我在父实体 validate 方法中编写了代码，用于验证子记录是否符合特定的业务规则。当用户创建或编辑父级时，验证规则会正常运行，但如果只编辑子级，则根本不会触发代码。每次修改父记录或子记录时，我需要在服务器保存时间验证子记录。

以下是验证子实体行之和等于 100% 的示例验证规则：

```
partial void MarketingCampaign_Metrics_Validate(MarketingCampaign_Metric entity, EntitySetValidationResultsBuilder results)
{
   if (entity.MarketingCampaign_AllocationRegions.Sum(r => r.RevenuePercent) != Convert.ToDecimal(100))
   {
      results.AddEntityError("The Regions section Revenue (%) does not equal 100%.");
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:31:57.533

如果您想在两个不同的实体中进行相同的检查，请将逻辑提取到可以从父实体和子实体调用的方法中。

对我来说听起来很简单，还是我错过了什么？

而且，我将从 *ParentOrChildEntity_Saving* 方法（其中*ParentOrChildEntity*是父实体或子实体的名称）而不是在任何*Validate*方法中调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:44:46.430

我找到了一个非常简单的解决方案，不需要移动我当前的验证代码。我在子对象验证中添加了以下行：

```
 entity.MarketingCampaign_Metric.RowUpdateDate = System.DateTime.Now;
    entity.MarketingCampaign_Metric.UpdatedBy = this.Application.User.FullName; 
```

通过在子验证阶段更新父级，父级被标记为已更改，这会强制父实体的验证代码。

此解决方案还解决了我遇到的另一个问题，即如果子实体被修改，我希望 UpdatedBy 字段和 RowUpdateDate 更改。我已经在跟踪表中的所有实体更改，并为最终用户提供审核屏幕以查看数据更改，但这使得查看最后一次触摸记录的人稍微容易一些，即使它只是一条子记录。从这个 LightSwitch 应用程序的数据管理员的角度来看，对子项的更改就是对父项的更改。

# windows-8 - 用于“人员”联系数据的 API

> ID：11584315
> 
> 赞同：1
> 
> 时间：2012-07-20T17:37:52.453
> 
> 标签：windows-8

我正在开发一个 Win8 Metro 注册流程，并希望能够使用用户提供的电话号码无缝提取来自内置“人”应用程序的照片和显示名称。我在 ContactPicker 之外找不到文档/代码（这不是我需要的）。

几个问题：

*   是否有 API 可以提取“人物”应用程序中的联系人数据？
*   如果是这样，有没有办法配置功能以避免使用模式“确定应用 xyz 访问您的地址簿”来打扰用户？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T22:55:34.963

确认没有 API 以编程方式提取联系人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:13:57.853

未经许可，您不能拉联系人，这是一项安全功能。[您可以通过联系人选择器](http://code.msdn.microsoft.com/windowsapps/Contact-Picker-App-sample-fc6677a1)查询用户选择的联系人数据。

因此，您必须要求用户选择与您的任务相关的联系人，调用单个/多个联系人选择器，然后一旦选择，您可以根据需要询问联系人。他们有电话号码、电子邮件、位置，所有你可能想要挂掉的数据。

据我所知，没有办法保持到它们的持久链接，所以尽可能存储这些数据。

# c# - Wcf 双工服务重置内部调用的静态数据

> ID：11584320
> 
> 赞同：1
> 
> 时间：2012-07-20T17:38:13.700
> 
> 标签：c#, wcf, duplex

所以我只需要几天时间就可以了解 wcf 服务，特别是双工服务，并且我从一个测试应用程序开始。目标是拥有一个服务，该服务具有一个存储变量的内部（静态？）类，以及一个获取这些变量的客户端。

目前，我在 Storage 类中有两个变量，一个是订阅者列表 ( `ObservableCollection<IMyContractCallBack>`)，另一个是`ObservableCollection<string>`，其中每个字符串在回调方法中发送到客户端。

我希望能够让客户端`Fetch`（如果尚未订阅，则首先订阅，通过将其上下文添加到服务器端的集合）服务器端集合中的字符串。该部分按预期工作。但是，我还想将`Push`一个字符串从服务器发送到订阅列表中的每个客户端，以及将`Add`字符串发送到字符串集合。这就是我的问题出现的地方。

任何时候我`Fetch`，它都会添加到字符串列表“test1...”和“test2...”并发送它们，然后客户端更新一个文本块 UI（wpa）所以如果我获取两次，我就会有`"test1...","test2...","test1...","test2..."`，因为现在没有检查对于重复。这证明集合可以在服务器端从`Fetch`到更新和记忆`Fetch`。但是，当我尝试`Add`或`Send`给定文本时，所有变量都被遗忘了，因此订阅者列表为空，而要添加的列表为空。然而，当我再`Fetch`一次时，旧清单又回来了（现在有 6 件事，`test1...,test2... etc...`）

我上课前有这个

```
[ServiceBehavior(InstanceContextMode= InstanceContextMode.PerSession, ConcurrencyMode = ConcurrencyMode.Single)] 
```

而且我还尝试了单例上下文模式，但无济于事。更改`ConcurrencyMode`为 Multiple 也没有任何不同。关于为什么我的*静态*数据仅在内部命令来自服务器本身时才被重置的任何想法？

这是我的服务的代码：

```
namespace WcfService3
{   
[ServiceBehavior(InstanceContextMode= InstanceContextMode.Single, ConcurrencyMode = ConcurrencyMode.Single)]
public class Service1 : IService1
{
    public static event Action NullContext;

    public static ObservableCollection<IMyContractCallBack> Subscriptions;

    public void     NormalFunction()
    {

        //Only sends to Subs that are STILL Open
        foreach (IMyContractCallBack user in Subscriptions)
        {
            //Removes the Closed users, because they are hanging around from last session
            if (((ICommunicationObject)user).State != CommunicationState.Opened)
            {
                Subscriptions.Remove(user);
            }
            else
            {
                ObservableCollection<string> holder = Storage.GetList();

                foreach (string str in holder)
                {
                    user.CallBackFunction(str);
                }
            }
        }
    }
    public static void Send(string str)
    {
        try
        {
            foreach (IMyContractCallBack user in Subscriptions)
            {
                user.CallBackFunction(str);
            }
        }
        catch
        {
            //For some reason 'Subscriptions' is always null
            NullContext.Invoke();
        }
    }
    public static void Add(string str)
    {
        //For some reason 'SendList' is always null here, too
        Storage.AddToList(str);
        if (Subscriptions != null)
        {
            //For same reason 'Subscriptions' is always null
            foreach (IMyContractCallBack user in Subscriptions)
            {
                user.CallBackFunction(str);
            }
        }
    }

    public void Subscribe()
    {
        //Adds the callback client to a list of Subscribers
        IMyContractCallBack callback = OperationContext.Current.GetCallbackChannel<IMyContractCallBack>();
        if (Subscriptions == null)
        {
            Subscriptions = new ObservableCollection<IMyContractCallBack>();
        }
        if(!Subscriptions.Contains(callback))
        {
            Subscriptions.Add(callback);
        }
    } 
```

这是我的`Storage`课程代码：

```
namespace WcfService3
{
public static class Storage
{

    public static readonly ObservableCollection<string> SendList = new ObservableCollection<string>();

    public static IMyContractCallBack callback;

    public static ObservableCollection<string> GetList()
    {

        if (SendList.Count == 0)
        {
            AddToList("Test1...");
            AddToList("Test2...");
        }

        return SendList;
    }

    public static void AddToList(string str)
    {

            SendList.Add(str);

    }
} 
```

}

如果需要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:16:43.980

您是否在任何地方使用该[`ThreadStatic`](https://stackoverflow.com/questions/868537/threadstatic-modified-with-static-c-sharp)属性？（只是快速搜索）那是一个真正的远射，可能不是你的问题。

你可能有线程问题。您的所有客户端是否同时连接（我的意思是连续连接？）如果是，您将在您的`Subscribe`方法中遇到此代码的线程问题：

```
 if (Subscriptions == null)
    {
        Subscriptions = new ObservableCollection<IMyContractCallBack>();
    } 
```

您应该更好地限制对您的`Subscriptions`方法的访问，以便您可以查看谁修改了它以及何时修改它，并使用控制台语句找出您出错的地方。

# java - java:25: 类、接口或枚举预期 public static void main(String s[]) {

> ID：11584323
> 
> 赞同：2
> 
> 时间：2012-07-20T17:38:33.157
> 
> 标签：java, main

我正在尝试制作一个程序来计算字符串的单词。

以下是我的代码，以及我的代码中出现的错误，我无法更正它们：

```
import java.util.*;    
class string1 {
    public static int wordcount() {
        String str;
        Scanner s1= new Scanner(System.in);
        System.out.println("Enter String:");
        str=s1.nextLine();
        int count=WCount(str);
        System.out.println("Count="+count);
    }

    public static int WCount(String str) {
        int l=str.length();
        int count=0;
        for(int i=0;i<l;i++) {
            if(str.charAt(i)==' ')
                count++ ;
        }
        if(count>0) 
            count++ ;
        return(count);
    }
}
public static void main (String s[]) {
    string1 ss=new string1();
    ss.wordcount();
} 
```

错误 ：

```
java:25: class, interface, or enum expected
public static void main(String s[]) {
          ^
C:\Users\coocl\Desktop\java\string1.java:27: class, interface, or enum expected
ss.wordcount();
^
C:\Users\coocl\Desktop\java\string1.java:28: class, interface, or enum expected}3 errors

Process completed. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:40:21.407

你班主任不在了。在类中声明它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T17:40:23.360

该`main`方法属于*您*的类。当您运行`java`执行您的编译代码时，它会尝试运行`main`属于您指定的类的方法。更一般地说，方法**不能**在 java 中的类之外声明：所有方法都必须属于一个类。

请注意，由于您的方法`wordcount`和`WCount`都是静态的，因此您不需要创建`string1`实例来使用它们，您可以在类中调用它们`main`：

```
string1.wordcount(); 
```

最后，在 java 中，以大写开头的类名是惯例，例如`String1`，请参阅这些[命名约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:40:30.077

`}`在 WCount 之后你有一个额外的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:41:36.197

该`main`方法必须在类内部，而不是外部。你有两种方法：

1.  把它移到你的`string1`班级里。

2.  将其移动到同一个 *.java 文件中的类中

    ```
    public class Main {
        public static void main (String s[]) {
            string1 ss=new string1();
            ss.wordcount();
        }
    } 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T17:42:18.073

不良做法：

```
string1 ss=new string1(); 
ss.wordcount(); 
```

Java 类名中的第一个字符必须为大写，
Java 方法和字段名中的第一个字符必须为小写；
JAVA 常量（静态最终）名称中的所有字符必须大写；
wordCount() = 静态方法和创建对象 (string1 ss=new string1()) 不正确。
静态字段和方法需要从类名（不是实例类）调用。
ClassName.(method/field)
必须是 String1.wordCount()

您的代码有多个问题（在 wordcount() 中的“{}”、“return”中）参见代码：

```
public class Test {
    public static int wordcount() {
        String str;
        Scanner s1 = new Scanner(System.in);
        System.out.println("Enter String:");
        str = s1.nextLine();
        int count = WCount(str);
        System.out.println("Count=" + count);
        return count;
    }

    public static int WCount(String str) {
        int l = str.length();
        int count = 0;

        for (int i = 0; i < l; i++) {
            if (str.charAt(i) == ' ')
                count++;
        }
        if (count > 0)
            count++;
        return (count);
    }

    public static void main(String s[]) {
                Test.wordcount();
    }
} 
```

# php - 在 php 中生成透明的 GIF 图像

> ID：11584327
> 
> 赞同：2
> 
> 时间：2012-07-20T17:38:46.100
> 
> 标签：php, php-gd

我有一个 php 脚本，它可以动态生成较大图像的缩略图而不将其存储在 Web 服务器上。问题是当图像是透明的 GIF 图像时，生成的缩略图不是透明的。它为透明PNG格式图像正确生成透明缩略图。唯一的问题是 GIF 图像的透明度。这是脚本：

```
<?php

//ex . <img src="thumb.php?p=pp.png&q=4&w=60"/>
if(!isset($_GET['p'])){exit;}

if(!isset($_GET['h']) && !isset($_GET['w'])){
    list($w,$h,$type,$attr) = getimagesize($_GET['p']);
    $_GET['w'] = $w;
    $_GET['h'] = $h;
}else if(!isset($_GET['w'])){
    $_GET['w'] = 0;
}else if(!isset($_GET['h'])){
    $_GET['h'] = 0;
}

if(!isset($_GET['q'])){$_GET['q'] = 100;}

$info = pathinfo($_GET['p']);
switch($info['extension']){
    case 'gif' : $t = 1; break;
    case 'jpg' : $t = 2; break;
    case 'png' : $t = 3; break;
}

if($t==1){
    header("Content-Type: image/gif");
    $img = imagecreatefromgif($_GET['p']);
}else if($t==2){
    header("Content-Type: image/jpg");
    $img = imagecreatefromjpeg($_GET['p']);
}else if($t==3){
    header("Content-Type: image/png");
    $img = imagecreatefrompng($_GET['p']);

}else{
    exit;
}

$orSize = orSize($img);
$th = thSize($orSize,$_GET['w'],$_GET['h']);
$tmp_img = imagecreatetruecolor( $th['w'],$th['h'] );

//if image is GIF or PNG format, produce transparent images
if ($t==1 || $t==3) {
    imagealphablending($tmp_img, false);
    imagesavealpha($tmp_img, true); 
    if ($t==3)
    {
        $source = imagecreatefrompng($_GET['p']);
    }
    else {
        $source = imagecreatefromgif($_GET['p']);
    }
    imagealphablending($source, true);
    imagecopyresampled($tmp_img, $source, 0, 0, 0, 0, $th['w'], $th['h'], $orSize['w'], $orSize['h'] );
}else{
    imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $th['w'], $th['h'], $orSize['w'], $orSize['h'] );
}

if(isset($_GET['s'])){
    //S VAR OUTPUTS IT AS DIFFERENT FORMAT
    $t = $_GET['s'];
}

if(!isset($_GET['save'])){
    //SAVE VAR NEEDS TO BE THE PATH TO SAVE TO AND FILENAME
    $_GET['save'] = null;
}

if($t==1){
    imagegif($tmp_img,$_GET['save'],$_GET['q']);
}else if($t==2){
    imagejpeg($tmp_img,$_GET['save'],$_GET['q']);
}else if($t ==3){
    $_GET['q'] = 10 - ($_GET['q'] /= 10);
    imagepng($tmp_img,$_GET['save'],$_GET['q']);
}

imagedestroy($tmp_img);

function orSize($img){
    $orSize['w'] = imagesx($img);
    $orSize['h'] = imagesy($img);
    return $orSize;
}

function thSize($orSize,$w,$h){
    $th = Array();
    if($w!=0 && $h == 0){
        $th['w'] = $w;
        $th['h'] = floor( $orSize['h'] * ( $w / $orSize['w'] ) );
    }else if($w==0 && $h != 0){
        $th['h'] = $h;
        $th['w'] = floor( $orSize['w'] * ( $h / $orSize['h'] ) );
    }else{
        $th['w'] = $w; $th['h'] = $h;
    }
    return $th;
}
?> 
```

该脚本的工作原理是这样的，生成缩略图只需传递图像名称，如下所示：

```
 <img src="thumb.php?p=image.png&q=4&w=60"/> 
```

如何使此脚本生成 GIF 透明图像的透明缩略图？生成透明图像的行如下：

```
 // if $t is gif or png image
if ($t==1 || $t==3) {
    imagealphablending($tmp_img, false);
    imagesavealpha($tmp_img, true); 
    if ($t==3)
    {
        $source = imagecreatefrompng($_GET['p']);
    }
    else {
        $source = imagecreatefromgif($_GET['p']);
    }
    imagealphablending($source, true);
    imagecopyresampled($tmp_img, $source, 0, 0, 0, 0, $th['w'], $th['h'], $orSize['w'], $orSize['h'] );
}else{
    imagecopyresized( $tmp_img, $img, 0, 0, 0, 0, $th['w'], $th['h'], $orSize['w'], $orSize['h'] );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:41:02.717

请务必`imagesavealpha`在写入图像之前使用。

**参考**：[http ://www.php.net/manual/en/function.imagesavealpha.php](http://www.php.net/manual/en/function.imagesavealpha.php)

# c# - 提交后维护在代码隐藏中创建的控件

> ID：11584330
> 
> 赞同：0
> 
> 时间：2012-07-20T17:39:01.910
> 
> 标签：c#, asp.net, viewstate

我有一个看起来像这样的函数（简化）：

```
private void showQuestions()
{
     for (int ansNum = 0; ansNum < 6; ansNum++)
     {
         RadioButton rb = new RadioButton();
         rb.ID = x + letterArray[randomArray[ansNum]].ToString();
         rb.GroupName = "answer" + x;
         rb.Text = char.ToUpper(letterArray[currentCount]) + ". " + dt.Rows[x - 1].ItemArray[2 + randomArray[ansNum]];
         fieldSet.Controls.Add(rb);
     }
} 
```

如果不是 IsPostBack，我会在 pageLoad 上调用 showQuestions()。该方法实际上将数据库中的问题随机化，然后将单选按钮添加到我的字段集控件中。上面的代码缺少很多胆量。

提交时，我希望这些单选按钮保留在页面上，但它们已被删除。我不想再次调用 showQuestions() ，因为这会弄乱订单并使我多打一次数据库。

单击提交并进行其他更改后，如何将它们保留在页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:55:27.483

如果您每次不调用该方法来创建它们，您将无法在回发后在页面上保留动态创建的控件。您也可以使用 UpdatePanel 来完成此操作，但这是一个非常昂贵的 http 调用，无论如何都会导致 Page_Load 方法在服务器上被命中。

我建议使用 ajax 调用来发布您的数据。在提交表单时，您可以调用客户端方法 a) 填充代表表单数据的 json 对象，b) 使用 ajax 将数据发布到服务方法。

同样，UpdatePanel 也可以工作，但我倾向于不惜一切代价避免它。

# php - 如何在跟踪图像何时更改的同时利用图像缓存？

> ID：11584332
> 
> 赞同：0
> 
> 时间：2012-07-20T17:39:17.143
> 
> 标签：php, image, file, caching, browser-cache

在我的一个网站上，我只是将我的用户图像作为“1.jpg”存储在他们的用户文件夹中。这意味着每当他们更改个人资料图片时，文件名都保持不变。

我一直想利用图像缓存，以便在查看和重新查看用户的个人资料时不会一遍又一遍地下载相同的旧图片，但同时，我希望我的用户的浏览器能够如果有变化，请下载新的。

我怎么能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:43:26.857

最简单的解决方法是为每个用户的配置文件选择分配一个随机名称 GUID.jpg。每当他们更改个人资料图片时，都会为他们分配一个新的 GUID。

现在，您可以将此配置文件图片与客户端的指令一起发送到服务器以永久缓存它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:44:55.490

E-Tagging，Last-modified，基本上是允许浏览器决定资源（即配置文件图片）是否已更改以及是否从您的服务器下载它或从缓存中检索它的标题。

我可以建议使用php来调用图片而不是直接链接它吗？

`<?php $lmt = filemtime($_GET['file']); $etag = md5($lmt); header('Content-type: application/x-javascript'); header("Cache-Control: max-age=3600"); header("Last-Modified: ".gmdate("D, d M Y H:i:s", $lmt)." GMT"); header("ETag: ".'"'.$etag.'"'); if(@strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == $lmt || trim($_SERVER['HTTP_IF_NONE_MATCH']) == $etag) { header("HTTP/1.1 304 Not Modified"); exit; } ?>`

然后将在此代码段下方加载内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T15:49:38.773

在这里回答： [https ://webmasters.stackexchange.com/questions/32481/is-it-worth-it-to-change-my-entire-user-images-file-structure-to-take-advantage](https://webmasters.stackexchange.com/questions/32481/is-it-worth-it-to-change-my-entire-user-images-file-structure-to-take-advantage)

* * *

一种常用的解决方案是使您的图像 URL 看起来像这样：

```
http://www.example.com/path/to/images/1.jpg?v=123456 
```

这里，`/path/to/images/1.jpg`是图像的实际 URL 路径，而`?v=123456`只是一个附加在 URL 末尾的虚拟查询。查询字符串可以是任何东西——版本号、时间戳、图像内容的哈希值——只要你在图像发生变化时更改它，并在它没有变化时保持不变。

诀窍是，当被要求提供这样的 URL 时，Web 服务器将忽略查询字符串，因为 URL 实际上指向一个静态文件。但是对于用户的浏览器（以及介于两者之间的任何代理），具有不同查询字符串的 URL 将完全不同，因此对查询字符串的任何更改都会迫使浏览器重新加载文件。

因此，您可以将 Web 服务器配置为发送`Expires`和`Cache-Control`HTTP 标头以允许无限期缓存，确保您可以通过更改查询字符串来强制重新加载。如果您将 Apache 与[mod_expires](http://httpd.apache.org/docs/current/mod/mod_expires.html)一起使用，一种方法是在您的图像目录中放置一个`.htaccess`文件，其中包含以下行：

```
ExpiresActive On
ExpiresDefault "access plus 1 year" 
```

许多流行的网站都使用这种技术。例如，如果你查看这个页面的 HTML 源代码，你会发现它的样式表是从这样的 URL 加载的：

```
http://cdn.sstatic.net/stackoverflow/all.css?v=7cd8ea9d6f1e 
```

在这里，`?v=7cd8ea9d6f1e`就像我上面描述的那样，是一个虚拟查询字符串；您可以通过更改它并查看它确实仍然返回相同的文件来确认这一点。

# python - 子进程文件输出需要在读取前关闭

> ID：11584334
> 
> 赞同：0
> 
> 时间：2012-07-20T17:39:26.853
> 
> 标签：python, file, subprocess

我正在尝试使用子进程将输出写入数据文件，然后对其进行解析以检查其中的某些数据。但是，当我需要读取文件的行时，我总是得到一个空白文件，除非我关闭文件然后重新打开它。虽然它有效，但我只是不喜欢这样做，我想知道它为什么会发生。是子进程的问题，还是文件模式的另一个复杂性？

```
dumpFile=open(filename,"w+")
dump = subprocess.Popen(dumpPars,stdout=dumpFile)
dump.wait() 
```

此时，如果我尝试读取文件，我什么也得不到。但是，通过以下命令可以正常工作：

```
dumpFile.close()
dumpFile=open(filename,"r") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:43:45.047

该`with`语句在块结束后自动关闭文件：

```
with open(filename, "w+") as dumpFile:
    dump = subprocess.Popen(dumpPars, stdout=dumpFile)
    dump.wait()

with open(filename, "r") as dumpFile:
    # dumpFile reading code goes here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:45:02.900

您可能需要`seek`回到文件的开头，否则当您尝试读取文件时文件指针将位于文件的末尾：

```
 dumpFile.seek(0) 
```

但是，如果您不需要实际 store `dumpFile`，最好执行以下操作：

```
dump = = subprocess.Popen(dumpPars,stdout=subprocess.PIPE)
stdoutdata,_ = dump.communicate()  #now parse stdoutdata 
```

除非您的命令产生大量数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:53:15.063

如果你想阅读你已经写的内容，要么关闭并重新打开文件，要么“倒带”它——寻找偏移量 0。

如果您想在写入文件时读取文件，您可以这样做（甚至不需要将其写入磁盘），请参阅其他问题[Capture output from a program](https://stackoverflow.com/questions/11563752/capture-output-from-c-program-on-stdout-using-python-subprocess-pexpect)

# php - 知道数组中是否存在特定单词？

> ID：11584336
> 
> 赞同：1
> 
> 时间：2012-07-20T17:39:36.867
> 
> 标签：php

我有一个数组，我想知道它是否包含特定的单词，例如 microsoft-iis 7.5？

```
Array
(
[0] => HTTP/1.1 302 Found
[1] => Cache-Control: no-cache, no-store, must-revalidate, no-transform
[2] => Pragma: no-cache
[3] => Content-Length: 340
[4] => Content-Type: text/html; charset=utf-8
[5] => Expires: -1
[6] => Server:microsoft-iis 7.5
) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:52:39.823

```
$stack = Array(
          '0' => 'HTTP/1.1 302 Found',
          '1' => 'Cache-Control: no-cache, no-store, must-revalidate, no-transform',
          '2' => 'Pragma: no-cache',
          '3' => 'Content-Length: 340',
          '4' => 'Content-Type: text/html; charset=utf-8',
          '5' => 'Expires: -1',
          '6' => 'Server:microsoft-iis 7.5'
);

$contain = substr_count ( implode( $stack ), 'microsoft-iis 7.5' )?'string found':'string not found';

echo $contain; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:43:18.613

```
if(array_walk($array, function($str){ return strstr($str, 'microsoft-iss 7.5'); })){
    echo "array_matches";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T17:45:24.627

如果您只想知道字符串是否存在，您可以对内爆字符串运行 stripos：

```
if (false !== stripos(implode("\n", $headers), "microsoft-iis"))
{
   // ...
} 
```

（或 strpos 如果您想要区分大小写）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:41:10.987

您可以迭代数组并使用[substr_count](http://php.net/manual/en/function.substr-count.php)进行检查。它将返回您的搜索字符串出现的次数

```
foreach ($your_array as $values){
$occurrence = substr_count($values,'microsoft-iis 7.5') ? 'exists' : 'does not exist';
    echo $occurrence;
} 
```

# ios - iOS - 将单元格添加到带有核心数据和 NSFetchedResultsController 的空 UITableView 部分

> ID：11584341
> 
> 赞同：0
> 
> 时间：2012-07-20T17:39:54.617
> 
> 标签：ios, objective-c, uitableview, sections

我正在使用 Core Data 和 NSFetchedResults 控制器在我的应用程序中填充 UITableViewCell（普通样式）。TableView 有 3 个部分，每个部分都有一个 viewForHeaderInSection 和一个 viewForFooterInSection。用户将输入将放在每个部分中的项目。

当其中一个部分没有项目时，它会完全消失。我想知道是否有可能做到这一点，所以如果一个部分是空的，它会显示一个新的单元格，上面写着“没有条目”或类似的东西（可能是 UIImageView 或其他视图？），然后如果在该部分中放入了新项目，则消失。

有谁知道如何做到这一点？

这是我的数据源的代码。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{    
   return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [[[self.fetchedResultsController sections] objectAtIndex:section] name];
} 
```

此外，当它没有行时，该部分本身会从 TableView 中删除，那么我如何才能将“无条目”单元格添加到正确的部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:07:20.107

如果该部分未出现在表格视图中，则它不会从获取结果中返回，尽管您说您有 3 个部分。您可以通过以下方式手动返回：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
} 
```

然后

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{    
   if  ([[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects] == 0){     
       return 1;
   } else {
       return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
   }
} 
```

在你`cellForRowAtIndexPath:`的空测试中..

```
if ([[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects] == 0){
cell.textLabel = @"No Entries"; 
```

}

只是一个想法。

编辑：小心，如果您尝试捕获未由 fetch 返回的索引，您的应用程序可能会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:06:38.343

您需要修改您的`numberOfRowsInSection`函数以检查该部分是否没有真正的行，如果是这种情况则返回 1（而不是 0）。

然后，在 中`cellForRowAtIndexPath`，检查您是否有该部分的数据，当您看到没有时，只需创建“无条目”单元格。

# haskell - 带有 Websocket 的 Haskell IO

> ID：11584349
> 
> 赞同：3
> 
> 时间：2012-07-20T17:40:28.710
> 
> 标签：haskell, io, websocket

[`websockets`](http://hackage.haskell.org/package/websockets)通过以下方式使用库

```
{-# LANGUAGE OverloadedStrings #-}

module Main where

import System.IO
import System.IO.Unsafe
import Network.Socket hiding (recv)
import Network.WebSockets
import Network.Socket.ByteString
import qualified Data.ByteString.Char8 as B
import Debug.Trace
import Control.Applicative

fetch :: IO B.ByteString
fetch = do
  B.putStrLn "connected"
  [v4] <- getAddrInfo Nothing (Just "127.0.0.1") (Just "3000")
  c <- socket (addrFamily  v4) Stream 0x6
  c `connect` (addrAddress v4)
  recv c 512000

proxy :: TextProtocol p => WebSockets p ()
proxy = sendTextData . unsafePerformIO $! fetch

app :: Request -> WebSockets Hybi00 ()
app r = acceptRequest r >> r `traceShow` proxy

main :: IO ()
main = withSocketsDo $! runServer "0.0.0.0" 4000 app 
```

导致`fetch`只发生一次，并且所有 websocket 客户端都会收到相同的非新鲜数据。

*   如何使用 IO 进行任意 IO `websockets`？
*   我怎样才能让上面的例子与新鲜的`fetch`es 一起工作？

我很想听听任何建议或完整的解决方案。一种不接触的方式`iteratee`将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:46:04.593

`WebSockets`monad 是[MonadIO](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-IO-Class.html#t%3aMonadIO)类型类的一个实例，因此您可以使用该`liftIO`函数执行任意 IO 操作。

在这种情况下，我猜你想做

```
proxy = liftIO fetch >>= sendTextData 
```

您还需要添加导入

```
import Control.Monad.IO.Class 
```

# permissions - chmod 用户权限

> ID：11584358
> 
> 赞同：5
> 
> 时间：2012-07-20T17:40:44.730
> 
> 标签：permissions, chmod

我有一个关于权限的问题。我相信这三个标记代表所有所有者。所以我认为任何将查看我的页面的用户都将是 chmod 命令中的第 3 个标记。但是，当我将文件设置为 700 时，它应该是所有者 - 全部/无组/无世界。每个人在打开网站时仍然可以看到该文件。但是当我将权限设置为 000 时，文件不再打开，所以我想知道权限是如何工作的。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T17:42:37.273

对其应用权限检查的是 Web 服务器进程用户（例如，运行 Apache 的用户或其他用户）。

据推测，Web 服务器用户拥有所服务的文件。

从文件系统安全的角度来看，访问您网站的人根本不是系统的“用户”。相反，Web 服务器进程作为系统用户运行，并代表请求它的人提供 HTML。

**更新**

关于您对 400、700 和 755 之间差异的评论：

*   如果运行 Web 服务器的进程拥有所服务的文件，则只有第一个数字很重要
*   这意味着我们真正关心 4xx 和 7xx 之间的区别
*   参考下表了解“4”和“7”的含义

权限表

```
Nr  Permission        rwx
7   full              111
6   read and write    110
5   read and execute  101
4   read only         100
3   write and execute 011
2   write only        010
1   execute only      001
0   none              000 
```

[http://en.wikipedia.org/wiki/Chmod](http://en.wikipedia.org/wiki/Chmod)

请注意，“4”授予*文件所有者*读取权限，7 授予完全访问权限（包括读取权限）。

# java - 如何播放广播直播流 .asx 视频/x-ms-asf？

> ID：11584362
> 
> 赞同：12
> 
> 时间：2012-07-20T17:41:04.220
> 
> 标签：java, android, media-player, asf, asx

Android 或 Java 中是否有任何可以播放广播直播的第三方库？

```
File extension: .asx
MIME type: video/x-ms-asf 
```

不幸的是，[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)不支持这种格式！

以下是直播网址：http://38.96.148.75 /SunnahAudio

* * *

**编辑：**

我能够使用[JAVE](http://www.sauronsoftware.it/projects/jave/index.php)`.asf`将文件转换为文件：`.mp3`

```
File source = new File("sound.asf");
File target = new File("target.mp3");
AudioAttributes audio = new AudioAttributes();
audio.setCodec("libmp3lame");
audio.setBitRate(new Integer(64000));
audio.setChannels(new Integer(1));
audio.setSamplingRate(new Integer(22050));
EncodingAttributes attrs = new EncodingAttributes();
attrs.setFormat("mp3");
attrs.setAudioAttributes(audio);
Encoder encoder = new Encoder();
encoder.encode(source, target, attrs); 
```

但是，我正在`.asf`在线流式传输，我不确定是否可以流式传输广播电台，将其转换为`.mp3`，然后立即播放！

* * *

**编辑2：**

我为任何人提供 500 多个代表提供了`.asf`在 Android 上播放直播的完整且有效的解决方案。基本上，我想在 Android 上播放这个广播电台（[`xiialive`](https://play.google.com/store/apps/details?id=com.android.DroidLiveLite&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hbmRyb2lkLkRyb2lkTGl2ZUxpdGUiXQ..)可以这样做）：

```
http://38.96.148.75/SunnahAudio 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-22T19:50:38.863

如果您在 VLC 播放器中打开流的 url，您会发现它是`MMS`使用`WMA`编解码器的流。`mmsh://38.96.148.75/SunnahAudio?MSWMExt=.asf` 这是一个开源项目[aacplayer-android](http://code.google.com/p/aacplayer-android/)，它使用`libmms`并`libffmpeg`从`mms://`流中获取 WMA 内容并播放它。
我希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-22T21:32:34.133

我能够使用[Vitamio](http://vov.io/vitamio/#more-features)库在 Android 上成功播放您的流。这个库的最大优点是它与 Android SDK 的 API 兼容，因此您只需更改代码中的导入。

给定设备上应存在一个[Vitamino 插件以使用该库。](https://play.google.com/store/apps/developer?id=VOV+IO+Android)只需打开[Vitamio Demo](http://d.vov.io/vitamio/Vitamio-Demo.7z)并`Eclipse`查看如何使用它。提示用户安装*Vitamio 插件*包含在演示中。

我可以使用以下代码播放您的流：

```
import io.vov.vitamio.widget.MediaController;
import io.vov.vitamio.widget.VideoView;
import android.app.Activity;
import android.os.Bundle;

public class VideoViewDemo extends Activity {

    private String path = "mmsh://38.96.148.75/SunnahAudio";
    private VideoView mVideoView;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.videoview);
        mVideoView = (VideoView) findViewById(R.id.surface_view);
        mVideoView.setVideoPath(path);
        mVideoView.setMediaController(new MediaController(this));
        mVideoView.requestFocus();
    }

} 
```

如您所见 - 类似于`VideoView`从 Android SDK 使用。几乎唯一的区别是进口。

唯一需要注意的区别是我无法使用*http*链接，所以我必须使用带有*mmsh*协议的真实流 URL（在*VLC*中打开- 类似于 @vasart 所做的）。

作为参考，您可以查看[成功播放的日志](http://pastebin.com/gTpj6KCN)。

# magento - 如何在magento1.7中添加大量产品

> ID：11584368
> 
> 赞同：1
> 
> 时间：2012-07-20T17:41:26.077
> 
> 标签：magento, add, categories, product

我最近才开始研究magento 1.7，我知道如何逐个添加类别和产品，但是我有大量的类别和产品。有没有其他方法可以以一种方式添加大量类别？我听说过样本数据，它是否是我上述问题的解决方案，如果不是如何使用它？

请在这件事上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:12:46.883

刚刚注意到这一点 - 查看 MAGMI 以将大量产品数据大量导入 Magento；

[http://sourceforge.net/apps/mediawiki/magmi/index.php?title=What_is_magmi](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=What_is_magmi)

这是类别部分的链接；

[http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Import_categories](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Import_categories)

# python-2.7 - 我想将一个数字列表附加到另一个列表中；使用另一个列表作为附加范围

> ID：11584376
> 
> 赞同：1
> 
> 时间：2012-07-20T17:41:45.700
> 
> 标签：python-2.7

需要明确的是，涉及 3 个不同的列表。la 是一个整数列表，而 posfinList 是一个数字列表，其中 la 中的每个整数都应该被附加，直到它到达列表中的第一个数字，然后移动到 posfinList 中的下一个数字。每次我使用不同的数据时，posfinList 中的数字都会发生变化。

```
posfinList=[83, 81, 83, 82, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 86, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 85, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83, 83] 
```

la 是 6,932 个整数的列表

```
rosen = 0
blos=0
lafin = []
lafins=[]

while rosen<len(la):
    while rosen<(posfinList[blos]):
        lafin.append(la[rosen])
        if rosen >=(posfinList[blos]):
            lafins.append(lafin)

            blos+=1
        rosen+=1
print lafins 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:37:29.547

好吧，您要做什么并不完全清楚。你能澄清一下吗？或者更好的是，您希望此输入的输出是什么？：

```
la=[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
posfinList=[2, 4, 6] 
```

（StackOverflow 人：是的，我知道这应该是一个评论，但我还没有这方面的声誉！）

但是，即使没有澄清，我也可以确认您有一个无限循环。如果`posfinList[0]<6932`就像在您的示例中那样，则内部循环以终止`rosen=posfinList[0]`并且`rosen`无法增加或重置。外部循环继续并且永远不会终止，从而导致您看到的无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:48:10.597

我假设您想将列表`la`分成几部分，以便`n`:th 部分的长度等于`posfinList[n]`all `n`。请确认/拒绝。

* * *

以下代码基于该假设，看看它是否按您想要的方式工作：

```
lafins = []

for p in postfinList:
    lafins.append( la[rosen:rosen+p] )
    rosen += p 
```

（如果`la[rosen:rosen+p]`您不熟悉符号，您可以在[Python 文档](http://docs.python.org/tutorial/introduction.html#strings)中阅读它（称为“切片”符号） 。您会在“字符串”标题下找到相关位。）

我大多使用与您相同的变量名，尽管它们并不是那么具有描述性。在测试和调试时，花时间选择实际记录变量作用的变量名称通常会带来可观的回报，更不用说有助于确保您自己知道这些变量的用途。

* * *

至于你的原始代码，至少存在三个问题：

*   里面的东西`if rosen >=(posfinList[blos])`永远不会执行。`if`本身包含在 中`while rosen<(posfinList[blos])`，这实际上确保它在其中`rosen>=(postfinList[blos])`永远不会是真的。

*   退出时`while rosen<(posfinList[blos])`（除非巧合`rosen>=len(la)`），`while rosen<len(la)`将进入无限循环：`rosen`永远小于`len(la)`. 这些值都不会再次改变，因此`while`条件将始终为真。

*   这个很难解释，所以我只想说：为了让你的循环工作，在你给出的例子中，`postfinList`应该是`[83, 164, 247, 329, ...]`而不是`[83, 81, 83, 82, ...]`，也就是说，它应该是`[83, 83+81, 83+81+83, 83+81+83+82, ...]`。想想为什么会这样。

# c - 奇怪的typedef到函数指针

> ID：11584377
> 
> 赞同：4
> 
> 时间：2012-07-20T17:42:02.760
> 
> 标签：c, pointers, types, compiler-errors, typedef

我正在使用其他人编写的代码，他们打算在其中使用函数指针。他们做了一个我无法理解的非常奇怪的 typdef。代码下方

```
typedef void (myType)(void);
typedef myType *myTypePtr; 
```

我可以理解，主要思想`myTypePtr`是创建一个“指向接收void并返回void的函数的指针。但是原始的`myType`呢？那是什么？函数类型？我不清楚。

此外，后来还有这个函数原型

```
int createData(int id,int *initInfo, myTypePtr startAddress) 
```

但是，我在'myTypePtr'之前收到编译错误“预期的声明说明符或'...'，知道为什么会这样吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:45:03.557

这首先`typedef`

```
typedef void (myType)(void); 
```

提供`myType`作为 type 的同义词，`void (void)`即不带参数并返回的函数的类型`void`。这里的括号`myType`实际上不是必需的。你也可以写

```
typedef void myType(void); 
```

为了更清楚地表明它是接受`void`和返回的函数的类型`void`。请注意，您实际上不能声明任何函数类型的变量；在 C 中获取函数类型对象的唯一方法是定义一个实际函数。

第二`typedef`

```
typedef myType *myTypePtr; 
```

然后说 that`myTypePtr`的类型等于指向 a 的指针`myType`，这意味着它是指向不带参数并返回的函数的指针`void`。这个新类型等同于 type `void (*)(void)`，但有点间接。

至于您的第二个错误，如果没有更多上下文，我无法确定发生了什么。请发布一个最小的测试用例，以便我们查看导致错误的原因。

希望这可以帮助！

# javascript - 金额 > 999.99 的变量匹配

> ID：11584382
> 
> 赞同：-1
> 
> 时间：2012-07-20T17:42:20.470
> 
> 标签：javascript

例如 ：

```
Var1 = 289.56 
```

我使用这个公式：

```
foundStr = Var1.match("[0-9]+\.[0-9]+");
Price( parseFloat(foundStr).toFixed(2) ); 
```

但是当`Var1 > 999.99`（示例：2,356.21）

找到字符串的脚本是什么？

```
foundStr = Var1.match(??); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:45:51.137

您已经有一个数字变量，为什么还要弄乱字符串？

```
var number1 = 289.56;

if (number1 > 999.99) {
    // do whatever
} 
```

如果您要四舍五入，请改用 Math.floor：

```
var number1 = 289.56485345734593453;
var roundedNumber1 = Math.floor(number1 * 10) / 10; // two decimal points 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:15:07.817

```
var Var1 = "2,356.21";
foundStr = String(Var1.match(/([0-9]{1,3},)?[0-9]{0,3}\.[0-9]+/g)).replace(/,/g, "");
var result = parseFloat(foundStr).toFixed(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:55:53.267

我认为您只想删除逗号并检查它是否为浮点数，但根据您的问题很难判断。像这样的东西怎么样：

```
var Var1 = "1,234.567";
var parsed = parseFloat(Var1.replace(",",""), 10);
if (isNaN(parsed)) {
    // its not a valid number, so deal with it as needed
}
else {
    // parsed now holds your Number, so use it
} 
```

无论数字是否 >= 1000，此方法都将有效。

# c# - 链 IF 条件并执行第一个条件。在 C# 中

> ID：11584383
> 
> 赞同：1
> 
> 时间：2012-07-20T17:42:25.260
> 
> 标签：c#, if-statement, chain

我正在尝试执行以下操作：

```
MyObject.If(x => x.ID == 10, new MyAction("ID10")).If(x => x.Value < 20, new MyAction("Value20")).DoSomethingWithMyAction(); 
```

MyObject 是一个具有一些我需要检查的属性的对象...

DoSomethingWithMyAction() 是一个 MyAction 扩展，它对第一个失败条件的 MyAction 执行某些操作。

如果可能是这样的：

```
public static If<T>(this T myobject, Func<T, Boolean> predicate, MyAction action) where T : MyObject {

  if (predicate(myobject)
    // Return ??? >> Move to Next If
  else
    // Return action

} // If 
```

那么 DoSomethingWithMyAction() 将只是一个 MyAction 扩展。

我的问题是： 1 - 如何链接 IF；2 - 如何使 DoSomethingWithMyAction() 使用第一个 IF 的 MyAction 失败。

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:58:43.203

编辑：我误解了你的问题，现在没有时间重新审视我的代码。但它*是*这样的：

您可能需要构造某种表示链本身的类型。就像是：

```
public class ChainedExecution<T>
{
    private readonly T target;
    private readonly ChainedExecution<T> previous;
    private readonly Func<T, bool> predicate;
    private readonly Action<T> action;

    private ChainedExecution(T target, ChainedExecution<T> previous,
                             Func<T, bool> predicate, Action<T> action)
    {
        this.target = target;
        this.previous = previous;
        this.predicate = predicate;
        this.action = action;
    }

    public ChainedExecution<T> Or(Func<T, bool> newPredicate, Action<T> newAction)
    {
        return new ChainedExecution<T>(target, this, newPredicate, newAction);
    }

    public bool Execute()
    {
        if (previous != null && previous.Execute())
        {
            // An earlier action has handled it.
            return true;
        }

        if (predicate(target))
        {
            action(target);
            return true;
        }
        return false;
    }

    public static ChainedExecution<T> Start(T target, Func<T, bool> predicate, 
                                            Action<T> action)
    {
        return new ChainedExecution<T>(target, null, predicate, action);
    }
} 
```

然后：

```
public static class ChainedExecution
{
    public static ChainedExecution<T> If<T>(this T target,
                                            Func<T, bool> predicate, 
                                            Action<T> action)
    {
        return ChainedExecution<T>.Start(target, predicate, action);
    }
} 
```

并将其用作：

```
foo.If(x => x.Value < 20, x => Console.WriteLine("Bang! Too low"))
   .Or(x => x.Name == null, x => Console.WriteLine("Null name"))
   .Execute(); 
```

您需要将 更改`Action<T>`为 a `MyAction`，并`Execute`返回“失败的谓词中的值”或类似的东西......无论如何，这是一般要点。

# php - imagemagick 标题不能很好地包裹在字体大小之上

> ID：11584389
> 
> 赞同：3
> 
> 时间：2012-07-20T17:43:10.263
> 
> 标签：php, fonts, imagemagick, font-size

我有一个 Web 应用程序，它可以根据用户的规范自动生成图像，并且我正在为结果组合添加文本。我将 php 与 imagemagick 一起使用，对于文本，我选择了 cli convert 实用程序，因为我没有在 imageAnnotation 中找到对文本换行的任何适当支持

我正在使用 imagemagick convert cli 创建图像，然后将它们组合成结果。

当我尝试使文本正确换行时，我发现从某个字体大小来看，它没有正确换行。

对于点大小 20，文本正确换行：

```
convert -background  gray  -fill blue   -pointsize 20   -size 100x100  -gravity North  caption:'1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 4' ./spikes/20.png 
```

将生成：![良好的文本换行结果](../Images/00b9c1684eddd57afc75f572f1eb837b.png)

对于 pointsize 21 它**不能**正确换行：

```
convert -background  gray  -fill blue   -pointsize 21   -size 100x100  -gravity North  caption:'1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 4' ./spikes/21.png 
```

会产生这个： ![错误的文本换行结果](../Images/e441ad401296ac7ae2c017d68868c50a.png) ***所有的数字都在哪里？***

知道我在这里做错了什么吗？

我应该为文本解决方案寻找另一个方向吗？

# c - 在 linux 上，使用 ZLIB 的 compress() 和 uncompress() 函数，它有时会返回 Z_BUFFER_ERROR

> ID：11584390
> 
> 赞同：1
> 
> 时间：2012-07-20T17:43:12.023
> 
> 标签：c, linux, zlib

我想测试压缩和解压功能：compress() uncompresss()由ZLIB库提供；写如下代码打开一个已经存在的文件，在while()循环里面读取文件内容已经存在，压缩部分写入单个文件，解压部分写入另一个文件，代码如下图，已经存在的文件（originalFile）的大小大约78K，第一次进入while()循环压缩解压返回值为0，这样第一次进入成功，但是第二次和后面几次进入，返回值为-5（根据官方文档，缓冲的输出大小并没有大到包含内容），为什么？哪里错了？非常感谢你！

```
enter code here

#include <string>
#include <time.h>
#include <stdio.h>
#include <iostream>
#include <string.h>
#include "zlib.h"
int main()
{
    unsigned long int fileLength;
    unsigned long int readLength;
    unsigned long int compressBufLength;
    unsigned long int uncompressLength;
    unsigned long int offset;

    unsigned char *readBuf = new unsigned char[512];//the readbuf of the exist file content
    unsigned char *compressBuf = new unsigned char[512];//the compress buffer   
    unsigned char *uncompressBuf = new unsigned char[512];//the uncompress  content buffer
    FILE *originalFile = fopen("/lgw150/temp/src/lg4/original.lg4","a+");//the exist file
    FILE *compressedFile = fopen("/lgw150/temp/src/lg4/compressed.lg4","a+");//compressfile
    FILE *uncompressFile = fopen("/lgw150/temp/src/lg4/uncompressed.lg4","a+");//

    fseek(originalFile,0,2);
    fileLength = ftell(originalFile);
    offset = 0;//
       while(offset <fileLength)//
    {

        printf("offset=%lu;fileLength=%lu\n",offset,fileLength);
        memset(readBuf,0,512);
        memset(compressBuf,0,512);
        memset(uncompressBuf,0,512);
        fseek(originalFile,offset,0);//
        readLength = fread(readBuf,sizeof(char),512,originalFile);
        offset += readLength;//
        int compressValue = compress(compressBuf,&compressBufLength,readBuf,readLength);
        int fwriteValue = fwrite(compressBuf,sizeof(char),compressBufLength,compressedFile);//
        printf("compressValue = %d;fwriteLength = %d;compressBufLength=%lu;readLength = %lu\n",compressValue,fwriteValue,compressBufLength,readLength);

        int uncompressValue = uncompress(uncompressBuf,&uncompressLength,compressBuf,compressBufLength);//
        int fwriteValue2= fwrite(uncompressBuf,sizeof(char),uncompressLength,uncompressFile);//
    }
    fseek(originalFile,0,0);
    fseek(compressedFile,0,0);
    fseek(uncompressFile,0,0);
    if(originalFile != NULL)
    {
        fclose(originalFile);
        originalFile = NULL;
    }

   if(compressedFile != NULL)
    {
        fclose(compressedFile);
        compressedFile = NULL;
    }
     if(uncompressFile != NULL)
    {
        fclose(uncompressFile);
        uncompressFile = NULL;
    }

    delete[] readBuf;
    delete[] compressBuf;
    delete[] uncompressBuf;
return 0;

}

enter code here 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T17:52:13.070

首先，您得到“缓冲输出大小不足以包含内容”的原因是因为缓冲输出大小不足以包含内容。如果您给不可压缩的数据进行压缩，它将扩展数据。因此，如果输入为 512 字节，则 512 字节不够大。使用 compressBound() 函数进行最大扩展，以调整压缩输出缓冲区的大小。

其次，一次压缩 512 个字节是愚蠢的。您没有为压缩算法提供足够的数据来处理，以便获得您应该从压缩中获得的里程。您一次读取 512 字节块的应用程序不应使用 compress() 和 uncompress()。您应该使用为此目的而编写的 deflate() 和 inflate()——通过压缩和解压缩引擎提供数据块。

您需要阅读[zlib.h](http://zlib.net/manual.html)。所有的。您还可以查看[示例](http://zlib.net/zlib_how.html)（在阅读 zlib.h 之后）。

# shell - 在没有命令行手动类路径更新的情况下无法执行 shell 脚本

> ID：11584393
> 
> 赞同：0
> 
> 时间：2012-07-20T17:43:34.823
> 
> 标签：shell, jar, cron, classpath

我希望这相当简单，但我正在努力让它发挥作用。

我有一个 java 包，我想使用 shell 脚本命令来执行它......

```
/jdk1.7.0/bin/java .path.to.classname.ClassToExecute >> /var/log/output.log 
```

……所以本质上……

```
./SCRIPT_NAME 
```

...应该从命令行运行上述内容。

问题是每次首先需要从命令行更新类路径以使会话能够查看特定的 JAR ...

```
export CLASSPATH=$CLASSPATH:/path/to/jar/file/lib/JAR_NAME.jar:. 
```

如果我不首先放入这一行，shell 脚本将不会执行抛出与我需要手动添加的 JAR 相关的 NoClassDefFoundError 错误。

谁能告诉我我需要在哪里编辑这个类路径更新，以便脚本和 cron 始终可以使用它，因为最终我想从 cron 调用它？

谢谢，森林SDMC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:00:08.413

刚刚找到答案并且工作正常，所以希望其他人会发现这很有用......

您可以在 shell 脚本中动态生成类路径变量，然后将其作为属性应用到 java 命令行执行。像这样...

```
THE_CLASSPATH=
for i in `ls /path/to/the/JARS/lib/*.jar`
do
  THE_CLASSPATH=${THE_CLASSPATH}:${i}
done

/usr/bin/java -cp ".:${THE_CLASSPATH}" path.to.the.class.ClassName >> /var/log/logfile.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:57:12.143

您的 shell 脚本应如下所示。

```
#!/bin/bash
export CLASSPATH=$CLASSPATH:/path/to/jar/file/lib/JAR_NAME.jar:. 
/jdk1.7.0/bin/java .path.to.classname.ClassToExecute >> /var/log/output.log 
```

您还需要更改脚本的权限，使其可执行

```
chmod 700 SCRIPT_NAME 
```

700 = 所有者只能执行脚本 770 = 所有者和组成员可以运行脚本 777 = 有权访问服务器的每个人都可以运行脚本。

注意到您想从 cron 运行它。您需要从 crontab 条目或脚本中获取 .profile。

# android - 传递多个列表 进入 ArrayAdapter

> ID：11584398
> 
> 赞同：0
> 
> 时间：2012-07-20T17:44:14.720
> 
> 标签：android, list, constructor, android-arrayadapter

我从 Activity 开始：

```
adapter = new ItemAdapter(Items.this, items, totals);
        setListAdapter(adapter); 
```

现在这里是 ItemAdapter：

```
public class ItemAdapter extends ArrayAdapter<String> {

private final List<String> items;
private final List<String> totals;
private final Context context;

public ItemAdapter(Context context, List<String> items,
        List<String> totals) {
    super(context, R.layout.item_row_layout, items);
    this.context = context;
    this.items = items;
    this.totals = totals;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflater
            .inflate(R.layout.item_row_layout, parent, false);
    TextView t1 = (TextView) rowView.findViewById(R.id.itemName);
    TextView t2 = (TextView) rowView.findViewById(R.id.itemTotal);

    String s1 = items.get(position);
    t1.setText(s1);

    String s2 = totals.get(position);
    t2.setText(s2);

    return rowView;
}

} 
```

现在我知道问题出在构造函数上，因为直到只允许我传递一个列表，而不是两个。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T18:00:47.930

我建议使用[SimpleAdapter](http://developer.android.com/reference/android/widget/SimpleAdapter.html)。以下是如何将您的列表转换为一个 List< Map<...>> （但我建议您在构建单独的列表时只构建一个 List< Map<...>>）：

```
List<Map<String, String>> list = new ArrayList<Map<String, String>>();
Map<String, String> map;
int count = items.size();
for(int i = 0; i < count; i++) {
    map = new HashMap<String, String>();
    map.put("name", items.get(i));
    map.put("total", totals.get(i));
    list.add(map);
}

adapter = new SimpleAdapter(this, list, R.layout.item_row_layout, new String[] { "name", "total" }, new int[] { R.id.itemName, R.id.itemTotal }); 
```

现在您的`name`和`total`会自动显示在自己的视图中的一行中，而无需编写自定义适配器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-28T13:59:09.000

在构造函数中再添加一个参数——以容纳额外的列表；但是不要在超级调用中传递那个额外的列表。

然后在 getView 方法中访问第二个列表。看一下代码：

```
 public class NotificationsAdapter extends ArrayAdapter<String> {
      private Context context;
      private List<String> list;
      private List<String> listTimeStamp;      

      public NotificationsAdapter(Context context, List<String> resource,List<String> timeResource) {
          super(context, R.layout.notification_list_item, resource);
          this.context = context;
          this.list = resource;
          this.listTimeStamp= timeResource;
      }      

      @Override
      public View getView(int position, View convertView, ViewGroup parent) {
          LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          View rowView = inflater.inflate(R.layout.notification_list_item, parent, false);      

          TextView textViewMessage = (TextView) rowView.findViewById(R.id.text_view_notifications_list_item);
          textViewMessage.setText(list.get(position));      

          ImageView imageView = (ImageView) rowView.findViewById(R.id.logo_notifications_list_item);
          imageView.setImageResource(R.drawable.iconsmall);      

          TextView textViewTimeStamp = (TextView) rowView.findViewById(R.id.time_stamp_notifications_list_item);
          textViewTimeStamp.setText(listTimeStamp.get(position));      

          return rowView;
      }
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T17:51:12.337

你为什么不加入这两个列表？

```
List<String> list1 = new ArrayList<String>();
a.add("Item 1");
a.add("Item 2");

List<String> list2 = new ArrayList<String>();
b.add("Item 3");
b.add("Item 4");

// Append content of list2 to list1
list1.addAll(list2); 
```

然后，您可以像往常一样使用单个列表创建适配器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T17:51:48.027

您拥有的一个选择是更改构造函数以接受 a`List<List<String>>`而不是`List<String>`Then 而不是这样做`this.items = items;`，您必须遍历参数中的所有子列表并将每个元素添加到本地对象项中。

另一个可能更直接的解决方案是在将多个列表作为参数发送到构造函数之前合并多个列表。即你可以像这样使用[List.addAll()](http://developer.android.com/reference/java/util/List.html#addAll%28java.util.Collection%3C?%20extends%20E%3E%29)这样的方法

```
List.addAll(anotherListObject); 
```

尽可能多地创建一个包含所有项目的列表。

另一种选择是使用[CommonsGuy 创建](https://github.com/commonsguy/cwac-merge)并慷慨开源的 MergeAdapter 来简化流程，让您创建多个适配器，然后将它们全部合并到一个 MergeAdapter 中，而不用担心合并列表

# entity-framework - DbSet.Remove 和 DbContext.Entry(entity).State = EntityState.Deleted 之间的区别

> ID：11584399
> 
> 赞同：9
> 
> 时间：2012-07-20T17:44:17.287
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1, entity-framework-4.2

考虑以下实体模型：

```
public class Agreement : Entity
{
    public int AgreementId { get; set; }
    public virtual ICollection<Participant> Participants { get; set; }
}

public class Establishment : Entity
{
    public int EstablishmentId { get; set; }
}

public class Participant : Entity
{
    public int AgreementId { get; set; }
    public virtual Agreement Agreement { get; set; }

    public int EstablishmentId { get; set; }
    public virtual Establishment { get; set; }

    public bool IsOwner { get; set; }
} 
```

协议实体上没有直接的原因`ICollection<Establishment>`是因为 IsOwner 属性，它进一步定义了这种多对多关系。

关系映射如下：

```
internal ParticipantOrm()
{
    ToTable(typeof(Participant).Name);

    HasKey(k => new { k.AgreementId, k.EstablishmentId });

    HasRequired(d => d.Agreement)
        .WithMany(p => p.Participants)
        .HasForeignKey(d => d.AgreementId)
        .WillCascadeOnDelete(true);

    HasRequired(d => d.Establishment)
        .WithMany()
        .HasForeignKey(d => d.EstablishmentId)
        .WillCascadeOnDelete(true);
} 
```

这种关系是单向的，这意味着您只能从协议中访问参与者——您不能从机构访问协议。

现在，由于协议实体的主键是动名词参与者主键的一部分，并且由于指定了级联删除，我希望将协议置于已删除状态也会导致其参与者集合中的每个实体也被放入删除状态。

在协议 DbSet 上调用 Remove 时，这似乎有效：

```
// this works
dbContext.Agreements.Remove(agreement);
dbContext.SaveChanges(); 
```

但是，仅将协议条目的状态设置为已删除时，它似乎不起作用：

```
// this causes an exception when Participants is not empty
dbContext.Entry(agreement).State = EntityState.Deleted;
dbContext.SaveChanges(); 
```

**有没有办法可以定义关系，以便简单地将协议实体置于已删除状态也会导致相应的集合项实体置于已删除状态？**

**更新**

我一直在阅读这方面的内容，并发现急切地加载 Participants 集合并没有帮助：

```
// eager loading does not help, this still breaks
var agreement = dbContext.Set<Agreement>()
    .Include(a => a.Participants)
    .FirstOrDefault();
dbContext.Entry(agreement).State = EntityState.Deleted;
dbContext.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T18:07:25.997

最终通过调用以下方法解决了这个问题：

```
dbContext.Set<Agreement>().Remove(agreement); 
```

我想摆脱 上的`Agreements`财产`DbContext`，这就是我试图用`Entry(agreement).State = EntityState.Deleted`.

# php - 使用 PHP 和 imagettftext 和角度时的完整文本

> ID：11584401
> 
> 赞同：1
> 
> 时间：2012-07-20T17:44:26.960
> 
> 标签：php, gd

出于某种原因，当我以某个角度创建文本时，PHP 的 imagettftext 会创建一个看起来很有趣的文本。

在源代码下方。我无法发布图片，因为我没有足够的声望点，但文字看起来像是部分字母被剪掉了。

帮助！！！

* * *

```
$text = 'My Text Is Messed Up!!!';
$font = './fonts/arial.ttf';
$font_size = 20;
$font_multiplier = 0.5;

$x=10; 
$y=190; 
$angle=45; 
$width= ($font_size * $font_multiplier) * strlen($text); 
echo $width;
$height=200; 

$size = imageTTFBBox($font_size, $angle, $font, $text);
$img = imageCreateTrueColor($width, $height);
imageSaveAlpha($img, true);
ImageAlphaBlending($img, false);

$transparentColor = imagecolorallocatealpha($img, 200, 200, 200, 127);
imagefill($img, 0, 0, $transparentColor);
$white = imagecolorallocate($img, 255, 255, 255);

// Add the text
imagettftext($img, $font_size, $angle, $x, $y, $white, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($img, 'welcome-phrase.png');
imagedestroy($img); 
```

**编辑：**这是一个输出示例（我将文本颜色从白色更改为黑色，以使其在白色背景上可见 - AG）：

![在此处输入图像描述](../Images/f0b219796c49a489fee967c5b8c9160d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T21:21:18.050

似乎存在一个问题，它旋转每个字符并留下某种未旋转的“掩码”，然后掩盖它周围的文本，从而导致您看到的问题。当您关闭透明图像填充时，它会更加明显。

一种解决方法可能是旋转图像而不是文本。您将不得不修复您的坐标，但这样的事情似乎有效：

```
// Add the text
imagettftext($img, $font_size, 0, $x, $y, $black, $font, $text);

$img = imagerotate($img, $angle, $transparentColor);
imageSaveAlpha($img, true);
ImageAlphaBlending($img, false); 
```

因此完整的代码将是：

```
$text = 'My Text Is Messed Up!!!';
$font = './fonts/arial.ttf';
$font_size = 20;
$font_multiplier = 0.5;

$x=10;
$y=190;
$angle=45.0;
$width = ($font_size * $font_multiplier) * strlen($text);
echo $width;
$height=200;

$size = imageTTFBBox($font_size, $angle, $font, $text);
$img = imageCreateTrueColor($width, $height);

$transparentColor = imagecolorallocatealpha($img, 200, 200, 200, 127);
imagefill($img, 0, 0, $transparentColor);
$white = imagecolorallocate($img, 255, 255, 255);

// Add the text
imagettftext($img, $font_size, 0, $x, $y, $white, $font, $text);

$img = imagerotate($img, $angle, $transparentColor);
imageSaveAlpha($img, true);
ImageAlphaBlending($img, false);
// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($img, 'welcome-phrase.png');
imagedestroy($img); 
```

我将 imageSaveAlpha 和 ImageAlphaBlending 移到底部，以便在旋转发生后处理所有这些问题。这不是最好的解决方案，但通过一些调整将提供正确的结果。

# sql-server - T-SQL：备份证书 - 在 T-SQL 语句中使用变量

> ID：11584402
> 
> 赞同：0
> 
> 时间：2012-07-20T17:44:28.753
> 
> 标签：sql-server, sql-server-2008, tsql, ddl

我有一组 t-sql 语句，如下所示：

```
DECLARE @somefilepath as nvarchar = 'c:\somedir\somefile.ext';
DECLARE @anotherfilepath as nvarchar = 'c:\somedir\somefile2.ext';
DECLARE @somepassword as nvarchar = 'password';
BACKUP CERTIFICATE MyCertificate TO FILE = @somefilepath
WITH PRIVATE KEY (FILE = @anotherfilepath,
ENCRYPTION BY PASSWORD = @somepassword); 
```

当我执行“解析”来测试语句时，我得到：“@somefilepath”附近的语法不正确。看起来变量不能在这种类型的语句中使用。有人可以帮我理解这是否属实吗？

反正有没有让这个备份与变量一起工作？

我有一个更大的脚本，我希望用户能够在一个位置轻松更改路径和密码，而不必在文件中搜索需要手动更改的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:55:37.027

使用动态 SQL。

```
DECLARE
   @somefilepath as nvarchar(255) = 'c:\somedir\somefile.ext',
   @anotherfilepath as nvarchar(255) = 'c:\somedir\somefile2.ext',
   @somepassword as nvarchar(100) = 'password',
   @SQL as nvarchar(max);

SET @SQL = 'BACKUP CERTIFICATE MyCertificate TO FILE = ' + QuoteName(@somefilepath, '''') + '
WITH PRIVATE KEY (FILE = ' + QuoteName(@anotherfilepath, '''') + ',
ENCRYPTION BY PASSWORD = ' + QuoteName(@somepassword, '''') + ');';
EXEC (@SQL); 
```

此外，**始终始终**`char`为您的数据类型指定一个长度。如果你不养成这个习惯，它总有一天会狠狠地咬你。以下是原因：

*   在存储过程中，未定义长度的参数的默认长度为`n/var/char`1 个字符。
*   在其他情况下，参数的默认长度为`n/var/char`30 个字符，这对于版本*可能*很好，`varchar`但对于`char`. 如果该值用于使用 SELECT INTO 创建表，它将是一个神秘的长度，而不是明确选择的长度。
*   不明确定义您的长度会迫使下一个访问您的代码的开发人员知道`varchar`长度的确切规则，并且可能会诱使他出错，因为它是隐式的而不是显式的。假设列的长度需要改变，也强制参数长度改变，但由于参数没有长度，它被跳过。
*   如果您确实需要 1 个字符或 30 个字符，最好指定它，以便下一个访问代码的开发人员不会将缺少长度视为错误并浪费时间试图弄清楚它应该是什么或是否那是个错误。
*   它将帮助您避免被专家暗中嘲笑为无知的初学者，从而提高您的声誉。

# c++ - 我的链表节点删除功能导致我的程序的其他部分崩溃

> ID：11584404
> 
> 赞同：6
> 
> 时间：2012-07-20T17:44:40.873
> 
> 标签：c++, linked-list, stack

我在一些作业中遇到了一个奇怪的错误，它让我用链表制作了一个堆栈。我的程序中的所有功能都可以正常工作，即使在我没有节点的开始，或者在删除一些节点之后也是如此。但是当我创建节点并将它们全部删除以便我回到零时，每个函数都会导致崩溃。我已经尝试研究这个问题，但我发现的解决方案看起来几乎与我已经得到的相同，所以显然我没有看到一些关键的东西。

这是节点删除功能（我怀疑是这一切的罪魁祸首）

```
void remove(node** root)
{   
    node* temp = *root;
    node* previous = 0;
    if(*root)
    {
        while((*root)->next)
        {
            previous = *root;
            *root = (*root)->next;
        }
        delete *root;
        *root = temp;
        if(previous)
        {
            previous->next = 0;
        }
    }
    else
    {
        std::cout<<"cannot delete items from empty list\n";
    }
} 
```

这是节点插入功能

```
void insert(node** root)
{
    node* temp = *root;
    if(*root)
    {
        while((*root)->next)
        {
            (*root) = (*root)->next;
        }
        (*root)->next = new node;
        (*root)->next->data = getnum();
        (*root)->next->next = 0;
        *root = temp;
    }
    else
    {
        (*root) = new node;
        (*root)->data = getnum();
        (*root)->next = 0;
    }

} 
```

我相当确定问题出在我链接的代码中，但以防万一，这是完整作业的 pastebin [http://pastebin.com/AWtG4qjD](http://pastebin.com/AWtG4qjD)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:03:36.830

`remove`实现不正确。假设列表有一个元素。在这种情况下， temp 将在您执行后指向“不存在的内存” `delete *root;` 但是您正在做的是`*root = temp;` 这样您会导致 root 指向无效节点。这会导致以后出现奇怪的行为使您的实现正确的可能方法是：

```
void remove(node** root)
{
    //TODO: your code here
    node* temp = *root;
    node* previous = 0;
    if(*root)
    {
        while((*root)->next)
        {
            previous = *root;
            *root = (*root)->next;
        }
        delete *root;
        if(previous)
        {
            *root = temp;
            previous->next = 0;
        }
        else {
            *root = NULL;
        }
    }
    else
    {
        std::cout<<"cannot delete items from empty list\n";
    }
} 
```

但我不建议您使用根指针迭代列表。定义一些迭代器并用它查找结尾而不是更改 *root

# java - 在 Android Jelly Bean 上恢复 RSA 私钥时出错

> ID：11584405
> 
> 赞同：4
> 
> 时间：2012-07-20T17:44:42.560
> 
> 标签：java, android, openssl, rsa, android-4.2-jelly-bean

我在我的应用程序中使用加密。我将私钥存储为字节数组并使用以下代码来恢复它：

```
PrivateKey private = KeyFactory.getInstance("RSA").generatePrivate(new PKCS8EncodedKeySpec(s_privateKeyIn1t)); 
```

它在我所有的目标 android 平台 2.1 -> 4.0.4 上都能完美运行，但在 Jelly Bean 上却失败了！

果冻豆抛出异常：

```
07-20 17:29:35.197: E/AnyBalance:Codec(990): Caused by: java.lang.RuntimeException: error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag
07-20 17:29:35.197: E/AnyBalance:Codec(990):    at org.apache.harmony.xnet.provider.jsse.NativeCrypto.d2i_PKCS8_PRIV_KEY_INFO(Native Method)
07-20 17:29:35.197: E/AnyBalance:Codec(990):    at org.apache.harmony.xnet.provider.jsse.OpenSSLRSAKeyFactory.engineGeneratePrivate(OpenSSLRSAKeyFactory.java:73) 
```

怎么了？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-18T11:15:36.967

[这是](http://hi.baidu.com/wuuubo/item/fe48e77415ca893a71442396)对我有用的代码（第二行是重要的部分）：

```
PKCS8EncodedKeySpec privSpec = new PKCS8EncodedKeySpec(s_privateKeyIn1t);
KeyFactory keyFactory = KeyFactory.getInstance("RSA", "BC");
PrivateKey privateKey = keyFactory.generatePrivate(privSpec); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:13:53.907

好吧，我不知道它发生的原因，但我已经想出了如何处理它。我刚刚在以前的 android 版本上重新编码了密钥，这个重新编码的密钥在 Jelly Bean 上工作。

我使用以下代码重新编码密钥：

```
Private key = KeyFactory.getInstance("RSA").generatePrivate(new PKCS8EncodedKeySpec(s_privateKeyIn1t));
byte [] xxx = s_privateKey.getEncoded(); //Then I watched this byte array in debugger and inserted it in a source code.
//Now it works on Jelly Bean 
```

# visual-studio-2010 - CMake 结合 32 位和 64 位解决方案

> ID：11584408
> 
> 赞同：1
> 
> 时间：2012-07-20T17:44:53.800
> 
> 标签：visual-studio-2010, cmake, 32bit-64bit

我正在使用 CMake 2.8.8 来构建我的项目。有什么方法可以将 32 位和 64 位 Visual Studio 解决方案组合在一个解决方案中？Cmake 不会为我这样做。由于 Cmake 在两个不同的目录中生成了 2 个解决方案，有没有办法通过编辑 .vcxproj 文件之类的方式来组合这两个解决方案？

# javascript - Requirejs、Backbonejs浏览器支持功能

> ID：11584420
> 
> 赞同：1
> 
> 时间：2012-07-20T17:45:52.963
> 
> 标签：javascript, jquery, backbone.js, requirejs

我需要检查我的应用程序是否支持浏览器，我通过以下方式执行此操作：

main.js（主要的 require.js 模块）

```
define(['underscore', 'backbone', 'views/mainView', 'views/oldBrowser', 'ui', function(_, Backbone, mainView, oldBrowser){

var _browserHandshaking = function(){
    var browserSupportedCookie = $.cookie('browserSupported');
    var browserNameCookie = $.cookie('browserName');
    var browserVersionCookie = $.cookie('browserVersion');

    if(browserSupportedCookie === null){
        if(/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
            $.ui.browserName = 'chrome';
        } else if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
            $.ui.browserName = 'opera';
            /Version[\/\s](\d+\.\d+)/.test(navigator.userAgent);
        } else if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){
            $.ui.browserName = 'ie';
        } else if(/Safari[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
            $.ui.browserName = 'safari';
            /Version[\/\s](\d+\.\d+)/.test(navigator.userAgent);
        } else if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)){
            $.ui.browserName = 'firefox';
        } else if(/webOS/i.test(navigator.userAgent)){
            $.ui.browserName = 'webos';
        } else if(/Android/i.test(navigator.userAgent)){
            $.ui.browserName = 'android'
        } else if(/iPhone/i.test(navigator.userAgent)){
            $.ui.browserName = 'iphone';
        } else if(/iPod/i.test(navigator.userAgent)){
            $.ui.browserName = 'ipod';
        } else if(/BlackBerry/i.test(navigator.userAgent)){
            $.ui.browserName = 'blackberry';
        }

        if($.ui.browserName !== false){

            // Set browser version.
            if(!$.ui.browserVersion){
                $.ui.browserVersion = parseFloat(new Number(RegExp.$1));
            }

            for(var browserName in $.ui.supportedBrowsers){
                if($.ui.browserName === browserName){
                    if($.ui.browserVersion >= $.ui.supportedBrowsers[browserName]){
                        $.ui.browserSupported = true;
                        break;
                    }
                }
            }

            $.cookie('browserVersion', $.ui.browserVersion, { expires: 7 });
            $.cookie('browserName', $.ui.browserName, { expires: 7 });
            $.cookie('browserSupported', $.ui.browserSupported, { expires: 7 });
        }           
    } else {
        $.ui.browserSupported = browserSupportedCookie;
        $.ui.browserName = browserNameCookie;
        $.ui.browserVersion = browserVersionCookie;
    }
};

_browserHandshaking.call(this);

var Router = Backbone.Router.extend({
    routes: {
        "old-browser": "oldBrowser",
        "*actions": "main",
    },
    oldBrowser: function(){
        oldBrowser.render();
    },
    main: function(){
        mainView.render();
    }
});

$.ui.router = new Router();

// Start routing.
Backbone.history.start({
    pushState: true,
    root: $.ui.rootDir
});

}); 
```

Backbone.js 中是否有一个函数会在每个操作时触发，我可以很容易地实现这个：

```
preRouting: function(){
  if(!$.ui.browserSupported){
    return false;
  }

  return true;
} 
```

我只需要检查是否支持浏览器，如果支持它可以调用 mainView，否则应该触发 oldBrowser 视图，我只是不想在每个路由函数调用时都这样做。

有人对此有更好的解决方案吗？有人知道是否可以创建一个基本上是路由函数调用的预限制符的检查。

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:58:25.190

根据评论，您可以通过以下方式检查推送状态：（来自[Can use pushState](https://stackoverflow.com/questions/4966090/can-use-pushstate)）

```
var hasPushstate = !!(window.history && history.pushState); 
```

css3 动画：（来自[Detect css transitions using javascript (and without modernizr)?](https://stackoverflow.com/questions/7264899/detect-css-transitions-using-javascript-and-without-modernizr)）

```
function supportsTransitions() {
    var b = document.body || document.documentElement;
    var s = b.style;
    var p = 'transition';
    if(typeof s[p] == 'string') {return true; }

    // Tests for vendor specific prop
    v = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'],
    p = p.charAt(0).toUpperCase() + p.substr(1);
    for(var i=0; i<v.length; i++) {
      if(typeof s[v[i] + p] == 'string') { return true; }
    }
    return false;
}
var hasCSS3Transitions = supportsTransitions(); 
```

如果您可以简单地检查浏览器是否具有您的应用程序所需的功能，则无需检查浏览器名称/版本。

# activerecord - Subsonic 3.0.0.4 泄漏 SQL 连接？

> ID：11584425
> 
> 赞同：0
> 
> 时间：2012-07-20T17:46:18.267
> 
> 标签：activerecord, connection-pooling, subsonic3, connection-leaks

我使用 Subsonic 3.0.0.4（ActiveRecord 方法）已经有一段时间了，我最近编写了一个小页面，该页面基本上检索了给定年份的大约 500 条记录，然后我只是遍历它们中的每一个，创建Active Record 类，只需修改 Period 字段，并将每个实例保存在循环中。

问题是在执行该页面后，很多 SQL 连接在 SQL 服务器中挂起/打开（通过查看 sp_who2）。在页面完成执行之前，我收到“超时已过期。在从池中获取连接之前已经过了超时时间。这可能是因为所有池连接都在使用中并且达到了最大池大小。” 错误。

代码如下：

if (string.IsNullOrEmpty(tbPeriodoAGenerar.Text)) 返回；

```
 var idPeriodo = Convert.ToInt32(tbPeriodoAGenerar.Text);

    var nuevaEncuesta = new Encuesta();

    nuevaEncuesta.IdPeriodo = idPeriodo;
    nuevaEncuesta.IdResponsable = 1;
    nuevaEncuesta.fechaCierre1 = Convert.ToDateTime(dpFechaCierre1.Value);
    nuevaEncuesta.fechaCierre2 = Convert.ToDateTime(dpFechaCierre2.Value);
    nuevaEncuesta.IdTipoEncuesta = (int)ETipoEncuesta.PorAnio;
    nuevaEncuesta.nombreEncuesta = NombresEncuestas.COVA;
    nuevaEncuesta.nombrePublico = NombresEncuestas.COVA_PUBLICO;

    nuevaEncuesta.Save();

    var empresasActivas = Empresa.Find(x => x.activo == 1);

    foreach (var empresa in empresasActivas)
    {
        EmpresaEncuesta ee = new EmpresaEncuesta();

        ee.IdEmpresa = empresa.IdEmpresa;
        ee.IdEncuesta = nuevaEncuesta.IdEncuesta;
        ee.IdEstatusContestado = (int)EEstatusEmpresaEncuesta.SinContestar;
        ee.fechaMod = DateTime.Now;
        ee.IdUsuario = 1;
        ee.ipMod = IpUsuarioActual;
        ee.Save();
    }

    if (chkMigrarRespuestas.Checked)
    {

        var periodosAnteriores = new EncuestaBO().ObtenerPeriodosAnteriores(NombresEncuestas.COVA, idPeriodo);
        int? periodoAnterior = null;

        if (periodosAnteriores.Tables[0].Rows.Count > 0)
        {
            periodoAnterior = Convert.ToInt32(periodosAnteriores.Tables[0].Rows[0][Columnas.ID_PERIODO]);
        }

        if (!periodoAnterior.HasValue) return;

        var respuestasCortoPlazo = COVACortoPlazo.Find(x => x.Periodo == (periodoAnterior));
        COVACortoPlazo ccp;

        foreach (var ccpAnterior in respuestasCortoPlazo)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == ccpAnterior.IdEmpresa).Any()) continue;

            ccp = new COVACortoPlazo();

            ccp.IdEmpresa = ccpAnterior.IdEmpresa;
            ccp.CuentaCortoPlazo = ccpAnterior.CuentaCortoPlazo;
            ccp.ComentariosAdicionales = ccpAnterior.ComentariosAdicionales;
            ccp.RetiroVoluntarioOpcionId = ccpAnterior.RetiroVoluntarioOpcionId;
            ccp.RetiroVoluntarioOtroDesc = ccpAnterior.RetiroVoluntarioOtroDesc;
            ccp.RetiroEmpresaOpcionId = ccpAnterior.RetiroEmpresaOpcionId;
            ccp.RetiroEmpresaOtroDesc = ccpAnterior.RetiroEmpresaOtroDesc;

            ccp.Periodo = idPeriodo;

            ccp.Save();
        }

        var tablaCortoPlazoAnterior = COVATablaCortoPlazo.Find(x => x.Periodo == (periodoAnterior));
        COVATablaCortoPlazo ctcp;

        foreach (var ctcpAnterior in tablaCortoPlazoAnterior)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == ctcpAnterior.IdEmpresa).Any()) continue;

            ctcp = new COVATablaCortoPlazo();

            ctcp.IdEmpresa = ctcpAnterior.IdEmpresa;
            ctcp.Periodo = idPeriodo;

            ctcp.COVASegmentoOpcionId = ctcpAnterior.COVASegmentoOpcionId;
            ctcp.NivelDinamicaMin = ctcpAnterior.NivelDinamicaMin;
            ctcp.NivelDinamicaMax = ctcpAnterior.NivelDinamicaMax;

            ctcp.NombreBono = ctcpAnterior.NombreBono;
            ctcp.COVAPeriodicidadOpcionId = ctcpAnterior.COVAPeriodicidadOpcionId;
            ctcp.MetodoCalculo = ctcpAnterior.MetodoCalculo;
            ctcp.COVABaseCalculoOpcionId = ctcpAnterior.COVABaseCalculoOpcionId;
            ctcp.RealAnualizado = ctcpAnterior.RealAnualizado;

            ctcp.Save();
        }

        var respuestasAnual = COVAAnual.Find(x => x.Periodo == (periodoAnterior));
        COVAAnual ca;

        foreach (var caAnterior in respuestasAnual)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == caAnterior.IdEmpresa).Any()) continue;

            ca = new COVAAnual();

            ca.IdEmpresa = caAnterior.IdEmpresa;
            ca.CuentaAnual = caAnterior.CuentaAnual;
            ca.NombreBono = caAnterior.NombreBono;
            ca.FechaPago = caAnterior.FechaPago;

            ca.ComentariosAdicionales = caAnterior.ComentariosAdicionales;

            ca.RetiroVoluntarioOpcionId = caAnterior.RetiroVoluntarioOpcionId;
            ca.RetiroVoluntarioOtroDesc = caAnterior.RetiroVoluntarioOtroDesc;
            ca.RetiroEmpresaOpcionId = caAnterior.RetiroEmpresaOpcionId;
            ca.RetiroEmpresaOtroDesc = caAnterior.RetiroEmpresaOtroDesc;

            ca.Periodo = idPeriodo;

            ca.Save();
        }

        var tablaAnualAnterior = COVATablaAnual.Find(x => x.Periodo == (periodoAnterior));
        COVATablaAnual cta;

        foreach (var ctaAnterior in tablaAnualAnterior)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == ctaAnterior.IdEmpresa).Any()) continue;

            cta = new COVATablaAnual();

            cta.IdEmpresa = ctaAnterior.IdEmpresa;
            cta.Periodo = idPeriodo;

            cta.COVASegmentoOpcionId = ctaAnterior.COVASegmentoOpcionId;
            cta.NivelDinamicaMin = ctaAnterior.NivelDinamicaMin;
            cta.NivelDinamicaMax = ctaAnterior.NivelDinamicaMax;

            cta.Minimo = ctaAnterior.Minimo;
            cta.Target = ctaAnterior.Target;
            cta.Maximo = ctaAnterior.Maximo;

            cta.RealAnualPagado = ctaAnterior.RealAnualPagado;
            cta.MetodoCalculo = ctaAnterior.MetodoCalculo;
            cta.COVABaseCalculoOpcionId = ctaAnterior.COVABaseCalculoOpcionId;

            cta.Save();
        }

        var respuestasLargoPlazo = COVALargoPlazo.Find(x => x.Periodo == (periodoAnterior));
        COVALargoPlazo clp;

        foreach (var clpAnterior in respuestasLargoPlazo)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == clpAnterior.IdEmpresa).Any()) continue;

            clp = new COVALargoPlazo();

            clp.IdEmpresa = clpAnterior.IdEmpresa;
            clp.CuentaLargoPlazo = clpAnterior.CuentaLargoPlazo;
            clp.ComentariosAdicionales = clpAnterior.ComentariosAdicionales;

            clp.RetiroVoluntarioOpcionId = clpAnterior.RetiroVoluntarioOpcionId;
            clp.RetiroVoluntarioOtroDesc = clpAnterior.RetiroVoluntarioOtroDesc;
            clp.RetiroEmpresaOpcionId = clpAnterior.RetiroEmpresaOpcionId;
            clp.RetiroEmpresaOtroDesc = clpAnterior.RetiroEmpresaOtroDesc;

            clp.PermiteCompraAcciones = clpAnterior.PermiteCompraAcciones;

            clp.Periodo = idPeriodo;

            clp.Save();
        }

        var tablaLargoPlazoAnterior = COVATablaLargoPlazo.Find(x => x.Periodo == (periodoAnterior));
        COVATablaLargoPlazo ctlp;

        foreach (var ctlpAnterior in tablaLargoPlazoAnterior)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == ctlpAnterior.IdEmpresa).Any()) continue;

            ctlp = new COVATablaLargoPlazo();

            ctlp.IdEmpresa = ctlpAnterior.IdEmpresa;
            ctlp.Periodo = idPeriodo;

            ctlp.NombrePlan = ctlpAnterior.NombrePlan;
            ctlp.COVATipoPlanOpcionId = ctlpAnterior.COVATipoPlanOpcionId;

            ctlp.COVASegmentoOpcionId = ctlpAnterior.COVASegmentoOpcionId;
            ctlp.NivelDinamicaMin = ctlpAnterior.NivelDinamicaMin;
            ctlp.NivelDinamicaMax = ctlpAnterior.NivelDinamicaMax;

            ctlp.RealPagadoFinalPlan = ctlpAnterior.RealPagadoFinalPlan;
            ctlp.AniosEjerce = ctlpAnterior.AniosEjerce;
            ctlp.MetodoCalculo = ctlpAnterior.MetodoCalculo;
            ctlp.BaseCalculo = ctlpAnterior.BaseCalculo;

            ctlp.Save();
        }

        var respuestasVentas = COVAVentas.Find(x => x.Periodo == (periodoAnterior));
        COVAVentas cv;

        foreach (var cvAnterior in respuestasVentas)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == cvAnterior.IdEmpresa).Any()) continue;

            cv = new COVAVentas();

            cv.IdEmpresa = cvAnterior.IdEmpresa;
            cv.CuentaVentas = cvAnterior.CuentaVentas;
            cv.ComentariosAdicionales = cvAnterior.ComentariosAdicionales;

            cv.RetiroVoluntarioOpcionId = cvAnterior.RetiroVoluntarioOpcionId;
            cv.RetiroVoluntarioOtroDesc = cvAnterior.RetiroVoluntarioOtroDesc;
            cv.RetiroEmpresaOpcionId = cvAnterior.RetiroEmpresaOpcionId;
            cv.RetiroEmpresaOtroDesc = cvAnterior.RetiroEmpresaOtroDesc;

            cv.Periodo = idPeriodo;

            cv.Save();
        }

        var tablaVentasAnterior = COVATablaVentas.Find(x => x.Periodo == (periodoAnterior));
        COVATablaVentas ctv;

        foreach (var ctvAnterior in tablaVentasAnterior)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == ctvAnterior.IdEmpresa).Any()) continue;

            ctv = new COVATablaVentas();

            ctv.IdEmpresa = ctvAnterior.IdEmpresa;
            ctv.Periodo = idPeriodo;

            ctv.COVASegmentoOpcionId = ctvAnterior.COVASegmentoOpcionId;
            ctv.COVAPeriodicidadOpcionId = ctvAnterior.COVAPeriodicidadOpcionId;

            ctv.Minimo = ctvAnterior.Minimo;
            ctv.Target = ctvAnterior.Target;
            ctv.Maximo = ctvAnterior.Maximo;

            ctv.RealAnualizado = ctvAnterior.RealAnualizado;
            ctv.MetodoCalculo = ctvAnterior.MetodoCalculo;
            ctv.BaseCalculo = ctvAnterior.BaseCalculo;

            ctv.Save();
        }

        var respuestasGenerales = COVAGenerales.Find(x => x.Periodo == (periodoAnterior));
        COVAGenerales cg;

        foreach (var cgAnterior in respuestasGenerales)
        {
            if (!empresasActivas.Where(emp => emp.IdEmpresa == cgAnterior.IdEmpresa).Any()) continue;

            cg = new COVAGenerales();

            cg.IdEmpresa = cgAnterior.IdEmpresa;

            cg.AccionesPorSituacionActual = cgAnterior.AccionesPorSituacionActual;
            cg.ComentariosAccionesSituacionActual = cgAnterior.ComentariosAccionesSituacionActual;
            cg.TomaCuentaSituacionDefinicionObjetivos = cgAnterior.TomaCuentaSituacionDefinicionObjetivos;

            cg.Periodo = idPeriodo;

            cg.Save();
        }
    } 
```

我做错了吗？在这一点上，我不确定这是否是 Subsonic 错误，或者我是否需要以某种方式手动关闭连接。

我在谷歌上搜索过关于使用亚音速时类似问题的帖子，但没有出现。我得到错误的通常原因是没有关闭 SqlDataReader，但老实说，我不相信 Subsonic 没有关闭它。我使用的是最新版本。

有任何想法吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:03:00.370

每当您在基于 ORM 的对象上有循环时，您必须考虑可能存在 N+1 问题。我看不到你的模型，但我敢打赌，在你的循环中，你正在执行一些额外的查询。

我知道 Save() 会触发并关闭 ExecuteScalar() - 这不应该让连接保持打开状态。但是，如果您在该循环中获取相关记录 - 是的，这可能会出现问题。

所以 - 我建议使用某种探查器和调试器来单步执行你的循环 - 查看进行了哪些查询。

或者 - 这对于使用 BatchInsert 东西来说已经成熟了，它可以让所有东西都保持在一个漂亮、整洁的单连接事务中。

在这里阅读更多信息： [http ://subsonic.wekeroad.com/docs/Linq_Inserts](http://subsonic.wekeroad.com/docs/Linq_Inserts)

# php - 如何在 linux 上的 php 中启用 --enable-soap？

> ID：11584426
> 
> 赞同：80
> 
> 时间：2012-07-20T17:46:22.310
> 
> 标签：php, linux, soap, fedora

这就是问题所在。我在 Apache 上安装了 PHP 5.2.9，但无法升级 PHP。我有办法在 PHP 5.2.9 中启用 SOAP 吗？当 PHP 手册说“要启用 SOAP 支持，请使用 --enable-soap 配置 PHP”时，它根本没有帮助。我该如何配置？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-07-20T18:27:06.793

让 SOAP 工作通常不需要从源代码编译 PHP。我建议仅将其作为最后的选择。

为了更好地衡量，请检查您的 phpinfo 对 SOAP 扩展的说明（如果有的话）：

```
$ php -i | grep -i soap 
```

以确保缺少的是 PHP 扩展。

假设您在 phpinfo 中没有看到任何关于 SOAP 的信息，请查看您可以使用哪些 PHP SOAP 包。

在 Ubuntu/Debian 中，您可以搜索：

```
$ apt-cache search php | grep -i soap 
```

或者在 RHEL/Fedora 中你可以搜索：

```
$ yum search php | grep -i soap 
```

通常有两个 PHP SOAP 包可供您使用，通常`php-soap`和`php-nusoap`. `php-soap`通常是使用`--enable-soap`.

在 Ubuntu/Debian 中，您可以安装：

```
$ sudo apt-get install php-soap 
```

或者在 RHEL/Fedora 中你可以安装：

```
$ sudo yum install php-soap 
```

安装后，您可能需要放置一个 ini 文件并重新启动 Apache。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-07-06T11:45:54.740

如果您的机器中有 Ubuntu，以下步骤将对您有所帮助：

1.  如果您有soap（客户端/服务器），请首先检查您的php测试文件，或者使用phpinfo（）；并在浏览器中查看结果。如果你有它，它看起来像下图（如果没有，请转到第 2 步）：

[![在此处输入图像描述](../Images/49f11843bec49ba7c1c86fcfcf20e617.png)](https://i.stack.imgur.com/uwhrj.png)

2.  打开终端并粘贴：sudo apt-get install php-soap。

3.  在终端中重新启动您的 apache2 服务器： service apache2 restart。

4.  在步骤 1 中再次检查使用您的 php 测试文件似乎是我的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-20T18:02:49.247

就您的问题而言：不，如果激活 from`.ini`还不够，并且您无法升级 PHP，那么您无能为力。一些模块，但不是全部，可以在不重新编译的情况下添加（`zypper install php5-soap`, `yum install php-soap`）。如果还不够，请尝试安装一些 PEAR 类以支持解释型 SOAP（NuSOAP 等）。

通常，双破折号`--switches`设计用于从头开始重新编译 PHP。

您将下载 PHP 源包（例如，作为压缩的`.tgz`tarball），将其展开到某处，然后，例如在 Linux 下，运行配置脚本

```
./configure --prefix ... 
```

您的 PHP 使用的`configure`命令可能会显示为`phpinfo()`. 重复它应该会给你一个你现在已经安装的 PHP 的精确副本。然后添加`--enable-soap`将启用 SOAP 以及其他所有内容。

也就是说，如果您不熟悉 PHP 重新编译，*请不要这样做*。它还需要几个您可能拥有或不拥有的辅助库 - `freetype`, `gd`, `libjpeg`, `XML`, `expat`, 等等（仅*安装*它们是不够的；它们必须是*开发人员版本*，即带有标题等；在大多数发行版中，`libjpeg`安装可能还不够，您可能`libjpeg-dev`还需要）。

为了重新编译的目的，我必须保留一个单独的虚拟机，其中安装了所有东西。

# .net - NUnit 的 Assert.Equals 抛出异常“Assert.Equals 不应用于断言”

> ID：11584429
> 
> 赞同：139
> 
> 时间：2012-07-20T17:46:43.183
> 
> 标签：.net, nunit

我最近尝试在编写新的 NUnit 测试时使用 Assert.Equals() 方法。执行时，此方法会抛出一个`AssertionException`声明， `Assert.Equals should not be used for Assertions.` 乍一看这有点令人困惑。这里发生了什么？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-07-20T17:52:28.297

`Assert`是从 System.Object 继承的静态类，正如所有类在 C# 中隐式执行的那样。System.Object 实现以下方法：

```
static bool Equals(object a, object b) 
```

Assert 上用于相等比较的方法是[`Assert.AreEqual()`](http://www.nunit.org/index.php?p=equalityAsserts&r=2.2.7)方法。因此，在单元测试中通过 Assert 类调用`Object.Equals()`方法肯定是错误的。为了防止这个错误并避免混淆，NUnit 的开发者故意`Object.Equals`在 Assert 类中隐藏了一个抛出异常的实现。这是实现：

```
/// <summary>
 /// The Equals method throws an AssertionException. This is done
 /// to make sure there is no mistake by calling this function.
 /// </summary>
 /// <param name="a"></param>
 /// <param name="b"></param>
 [EditorBrowsable(EditorBrowsableState.Never)]
 public static new bool Equals(object a, object b)
 {
     // TODO: This should probably be InvalidOperationException
     throw new AssertionException("Assert.Equals should not be used for Assertions");
 } 
```

当然，异常消息本身是令人困惑的，但至少它让你知道你做错了*什么*。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-09-21T05:42:19.600

tldr;

```
Assert.AreEqual(a, b); // <-- Compares a, b 
```

不是：

```
Assert.Equals(a, b); // <-- Irrelevant equality operator on Assert itself 
```

# php - 强迫某人让他的子类实现接口的方法

> ID：11584434
> 
> 赞同：4
> 
> 时间：2012-07-20T17:47:47.223
> 
> 标签：php, interface, subclass

我想知道如何强制子类实现给定的接口方法。

假设我有以下课程：

```
interface Serializable
{
    public function __toString();
}

abstract class Tag // Any HTML or XML tag or whatever like <div>, <p>, <chucknorris>, etc
{
    protected $attributes = array();

    public function __get($memberName)
    {
        return $this->attributes[$member];
    }

    public function __set($memberName, $value)
    {
        $this->attributes[$memberName] = $value;
    }

    public function __construct() { }

    public function __destruct() { }
} 
```

我想强制“Tag”的任何子类实现“Serializable”接口。例如，如果 ia "Paragraph" 类，它看起来是这样的：

```
class Paragraph extends Tag implements View
{
    public function __toString()
    {
        print '<p';
        foreach($this->attributes as $attribute => $value)
            print ' '.$attribute.'="'.$value.'"';
        print '>';

        // Displaying children if any (not handled in this code sample).

        print '</p>';
    }
} 
```

我如何强制开发人员让他的“段落”类实现接口“Serializable”中的方法？

感谢您花时间阅读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T17:57:09.483

只需让抽象类实现接口：

```
interface RequiredInterface 
{
    public function getName();
}

abstract class BaseClass implements RequiredInterface 
{

}

class MyClass extends BaseClass
{

} 
```

运行此代码将导致错误：

> 致命错误：MyClass 类包含 1 个抽象方法，因此必须声明为抽象方法或实现其余方法 (RequiredInterface::getName)

这需要开发人员编写`RequiredInterface`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T17:53:30.977

PHP代码示例：

```
class Foo {
  public function sneeze() { echo 'achoooo'; }
}

abstract class Bar extends Foo {
  public abstract function hiccup();
}

class Baz extends Bar {
  public function hiccup() { echo 'hiccup!'; }
}

$baz = new Baz();
$baz->sneeze();
$baz->hiccup(); 
```

抽象类可以扩展 Serializable，因为抽象类**不需要**是**基**类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:53:56.750

这会`__construct`在您的类中添加一个 or 来`Paragraph`检查是否`Serializable`已实现。

```
class Paragraph extends Tag implements View
{

  public function __construct(){
    if(!class_implements('Serializable')){
        throw new error; // set your error here..
    }
  }

  public function __toString()
  {
    print '<p';
    foreach($this->attributes as $attribute => $value)
        print ' '.$attribute.'="'.$value.'"';
    print '>';

    // Displaying children if any (not handled in this code sample).

    print '</p>';
  }
} 
```

# c# - 用 C# 读取文件

> ID：11584443
> 
> 赞同：0
> 
> 时间：2012-07-20T17:48:33.447
> 
> 标签：c#

我想使用 c# 读取 php 文本文件。该文件如下所示：

```
2.20:2.20:2.20:2.20:2.20:
2012-07-12:2012-07-11:2012-07-10:2012-07-09:2012-07-08: 
```

我想将所有行都添加到列表框。在实际情况中有六行，但首先我应该阅读这两行。我的代码：

```
void web_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
     try
     {
         int i;
         string price_line = "";
         string date_line = "";
         List<decimal> prices = new List<decimal>();
         List<string> dates = new List<string>();

         using (var reader = new StreamReader(e.Result))
         {
             price_line = reader.ReadLine();
             date_line = reader.ReadLine();
             string[] bit_1 = price_line.Split(':');
             string[] bit_2 = date_line.Split(':');
             for (i = 0; i < 2; i++)
             {
                 prices.Add(decimal.Parse(bit_1[i]));
                 dates.Add(bit_2[i]);
             }
             listBox1.ItemsSource = prices;
             listBox2.ItemsSource = dates;
         }
     }
     catch
     {
          MessageBox.Show("Can't read!");
     }           
} 
```

现在我得到“NullException”。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:56:45.147

**编辑：**

这是关于什么的：

```
using (StreamReader reader = new StreamReader(e.Result)) 
{
     List<string> lines = new List<string>();
     while (!reader.EndOfStream) 
         lines.Add(reader.ReadLine());

     string prices = lines.First().Split(':');

     List<decimal> listPrices = new List<decimal>();
     List<string> listDates = lines.Last().Split(':').ToList();

     foreach(string s in prices)
        listPrices.Add(double.Parse(s));

     listBox1.ItemsSource = listPrices;
     listBox2.ItemsSource = listDates;
} 
```

你应该检查 if `e.Result`，`listBox1`并且`listBox2`不为空。

# java - Java openGL 绘制纹理

> ID：11584444
> 
> 赞同：0
> 
> 时间：2012-07-20T17:48:39.063
> 
> 标签：java, opengl, textures, draw, lwjgl

我尝试在 LWJGL 中绘制基本纹理，但我不能。

我的主要课程：

```
package worldofportals;

import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.lwjgl.LWJGLException;
import org.lwjgl.Sys;
import org.lwjgl.input.Keyboard;
import org.lwjgl.input.Mouse;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import static org.lwjgl.opengl.GL11.*;
import static org.lwjgl.util.glu.GLU.*;
import worldofportals.texture.TextureLoader;

/**
 * Initialize the program, handle the rendering, updating, the mouse and the
 * keyboard events.
 *
 * @author Laxika
 */
public class WorldOfPortals {

    /**
     * Time at the last frame.
     */
    private long lastFrame;
    /**
     * Frames per second.
     */
    private int fps;
    /**
     * Last FPS time.
     */
    private long lastFPS;
    public static final int DISPLAY_HEIGHT = 1024;
    public static final int DISPLAY_WIDTH = 768;
    public static final Logger LOGGER = Logger.getLogger(WorldOfPortals.class.getName());
    int tileId = 0;

    static {
        try {
            LOGGER.addHandler(new FileHandler("errors.log", true));
        } catch (IOException ex) {
            LOGGER.log(Level.WARNING, ex.toString(), ex);
        }
    }

    public static void main(String[] args) {
        WorldOfPortals main = null;
        try {
            main = new WorldOfPortals();
            main.create();
            main.run();
        } catch (Exception ex) {
            LOGGER.log(Level.SEVERE, ex.toString(), ex);
        } finally {
            if (main != null) {
                main.destroy();
            }
        }
    }

    /**
     * Create a new lwjgl frame.
     *
     * @throws LWJGLException
     */
    public void create() throws LWJGLException {
        //Display
        Display.setDisplayMode(new DisplayMode(DISPLAY_WIDTH, DISPLAY_HEIGHT));
        Display.setFullscreen(false);
        Display.setTitle("World of Portals FPS: 0");
        Display.create();

        //Keyboard
        Keyboard.create();

        //Mouse
        Mouse.setGrabbed(false);
        Mouse.create();

        //OpenGL
        initGL();
        resizeGL();

        getDelta(); // call once before loop to initialise lastFrame
        lastFPS = getTime();

        glEnable(GL_TEXTURE_2D); //Enable texturing
        tileId = TextureLoader.getInstance().loadTexture("img/tile1.png");
    }

    /**
     * Destroy the game.
     */
    public void destroy() {
        //Methods already check if created before destroying.
        Mouse.destroy();
        Keyboard.destroy();
        Display.destroy();
    }

    /**
     * Initialize the GL.
     */
    public void initGL() {
        //2D Initialization
        glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
        glDisable(GL_DEPTH_TEST);
        glDisable(GL_LIGHTING);
    }

    /**
     * Handle the keyboard events.
     */
    public void processKeyboard() {
    }

    /**
     * Handle the mouse events.
     */
    public void processMouse() {
    }

    /**
     * Handle the rendering.
     */
    public void render() {
        glPushMatrix();
        glClear(GL_COLOR_BUFFER_BIT);

        for (int i = 0; i < 30; i++) {
            for (int j = 30; j >= 0; j--) {  // Changed loop condition here.
                glBindTexture(GL_TEXTURE_2D, tileId);
                // translate to the right location and prepare to draw
                GL11.glTranslatef(20, 20, 0);
                GL11.glColor3f(0, 0, 0);

                // draw a quad textured to match the sprite
                GL11.glBegin(GL11.GL_QUADS);
                {
                    GL11.glTexCoord2f(0, 0);
                    GL11.glVertex2f(0, 0);
                    GL11.glTexCoord2f(0, 64);
                    GL11.glVertex2f(0, DISPLAY_HEIGHT);
                    GL11.glTexCoord2f(64, 64);
                    GL11.glVertex2f(DISPLAY_WIDTH, DISPLAY_HEIGHT);
                    GL11.glTexCoord2f(64, 0);
                    GL11.glVertex2f(DISPLAY_WIDTH, 0);
                }
                GL11.glEnd();
            }
        }

        // restore the model view matrix to prevent contamination
        GL11.glPopMatrix();
    }

    /**
     * Resize the GL.
     */
    public void resizeGL() {
        //2D Scene
        glViewport(0, 0, DISPLAY_WIDTH, DISPLAY_HEIGHT);

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        gluOrtho2D(0.0f, DISPLAY_WIDTH, 0.0f, DISPLAY_HEIGHT);
        glPushMatrix();

        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        glPushMatrix();
    }

    public void run() {
        while (!Display.isCloseRequested() && !Keyboard.isKeyDown(Keyboard.KEY_ESCAPE)) {
            if (Display.isVisible()) {
                processKeyboard();
                processMouse();

                update(getDelta());
                render();
            } else {
                if (Display.isDirty()) {
                    render();
                }
            }
            Display.update();
            Display.sync(60);
        }
    }

    /**
     * Game update before render.
     */
    public void update(int delta) {
        updateFPS();
    }

    /**
     * Get the time in milliseconds
     *
     * @return The system time in milliseconds
     */
    public long getTime() {
        return (Sys.getTime() * 1000) / Sys.getTimerResolution();
    }

    /**
     * Calculate how many milliseconds have passed since last frame.
     *
     * @return milliseconds passed since last frame
     */
    public int getDelta() {
        long time = getTime();
        int delta = (int) (time - lastFrame);
        lastFrame = time;

        return delta;
    }

    /**
     * Calculate the FPS and set it in the title bar
     */
    public void updateFPS() {
        if (getTime() - lastFPS > 1000) {
            Display.setTitle("World of Portals FPS: " + fps);
            fps = 0;
            lastFPS += 1000;
        }
        fps++;
    }
} 
```

还有我的纹理加载器：

```
package worldofportals.texture;

import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.nio.ByteBuffer;
import javax.imageio.ImageIO;
import org.lwjgl.BufferUtils;
import static org.lwjgl.opengl.GL11.*;
import org.lwjgl.opengl.GL12;

public class TextureLoader {

    private static final int BYTES_PER_PIXEL = 4;//3 for RGB, 4 for RGBA
    private static TextureLoader instance;

    private TextureLoader() {
    }

    public static TextureLoader getInstance() {
        if (instance == null) {
            instance = new TextureLoader();
        }
        return instance;
    }

    /**
     * Load a texture from file.
     * 
     * @param loc the location of the file
     * @return the id of the texture
     */
    public int loadTexture(String loc) {
        BufferedImage image = loadImage(loc);
        int[] pixels = new int[image.getWidth() * image.getHeight()];
        image.getRGB(0, 0, image.getWidth(), image.getHeight(), pixels, 0, image.getWidth());

        ByteBuffer buffer = BufferUtils.createByteBuffer(image.getWidth() * image.getHeight() * BYTES_PER_PIXEL); //4 for RGBA, 3 for RGB

        for (int y = 0; y < image.getHeight(); y++) {
            for (int x = 0; x < image.getWidth(); x++) {
                int pixel = pixels[y * image.getWidth() + x];
                buffer.put((byte) ((pixel >> 16) & 0xFF));     // Red component
                buffer.put((byte) ((pixel >> 8) & 0xFF));      // Green component
                buffer.put((byte) (pixel & 0xFF));               // Blue component
                buffer.put((byte) ((pixel >> 24) & 0xFF));    // Alpha component. Only for RGBA
            }
        }

        buffer.flip();

        int textureID = glGenTextures(); //Generate texture ID
        glBindTexture(GL_TEXTURE_2D, textureID); //Bind texture ID

        //Setup wrap mode
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL12.GL_CLAMP_TO_EDGE);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL12.GL_CLAMP_TO_EDGE);

        //Setup texture scaling filtering
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

        //Send texel data to OpenGL
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, image.getWidth(), image.getHeight(), 0, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

        //Return the texture ID so we can bind it later again
        return textureID;
    }

    /**
     * Load an image from disc.
     * 
     * @param loc the location of the image
     * @return the image
     */
    private BufferedImage loadImage(String loc) {
        try {
            return ImageIO.read(new File(loc));
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

这不是一个真正的游戏，只是一个在java中学习和练习openGL的测试。也有人可以向我推荐一本关于 OpenGL 的好书吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:27:43.743

你不应该在渲染后调用 Display.swapBuffers() 吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T16:20:57.803

你有没有尝试过：

```
 BufferedImage image = loadImage(loc);
    image.getRGB(0, 0, image.getWidth(), image.getHeight(), pixels, 0, image.getWidth());

    ByteBuffer buffer = BufferUtils.createByteBuffer(image.getWidth() * image.getHeight() * 4);
    Color c;

    for (int y = 0; y < image.getHeight(); y++) {
        for (int x = 0; x < image.getWidth(); x++) {
            c = new Color(image.getRGB(x, y));
            buffer.put((byte) c.getRed());     // Red component
            buffer.put((byte) c.getGreen());      // Green component
            buffer.put((byte) c.getBlue());               // Blue component
            buffer.put((byte) c.getAlpha());    // Alpha component. Only for RGBA
        }
    } 
```

此外，如果您要放置 Alpha 组件，您应该检查组件的数量，只有在有 4 个时才添加 alpha，或者始终使用 4。另外，使用 GL_RGBA 而不是 GL_RGBA8。

# vb.net - .NET - 使用 SHA512Managed 计算 SHA512 - 转换为字符串时为什么有两个“==”？

> ID：11584445
> 
> 赞同：0
> 
> 时间：2012-07-20T17:48:42.480
> 
> 标签：vb.net, sha512

出于某种原因，每次我计算 sha512 哈希并将其转换为字符串时，最后两个字符是 ==。知道为什么吗？

```
Function GetSHA512FromStringAsString(ByVal strdata As String)
    Dim data As Byte() = StringToByte(strdata)
    Dim result() As Byte
    Dim shaM As New SHA512Managed()
    result = shaM.ComputeHash(data)

    Return ByteToString(result)
End Function

Function ByteToString(ByVal dBytes() As Byte)
        Dim strText = Convert.ToBase64String(dBytes)
        Return strText
End Function 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:56:33.100

基于被编码的字节数，Base64 字符串可以以 = 或 == 结尾。见[http://en.wikipedia.org/wiki/Base64#Padding](http://en.wikipedia.org/wiki/Base64#Padding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:59:52.070

这是您看到的 Base64 填充：Base64 将 4 个字节的组转换为 3 个字节，这意味着最后一个编码组并不总是完整的 - 取决于输入字符串的长度，它将包含 1、2 或 3 个字节。这可以通过填充解决，`==`您在此处看到的原因是最后一个编码组 3 中只有 1 个已使用字节。

完整的解释可以在[维基百科上找到](http://en.wikipedia.org/wiki/Base64#Padding)

# javascript - 最近表的最近表

> ID：11584447
> 
> 赞同：0
> 
> 时间：2012-07-20T17:48:51.933
> 
> 标签：javascript, jquery, parent, closest

我的问题是如何选择`.closest('table')`.`.closest('table')`

我试过了：

```
$('div').closest('table').closest('table').hide(); 
```

它没有用，有没有办法选择最近的桌子的最近的桌子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:50:27.703

您可以为此使用 .parents ：

```
$('div').parents('table').eq(1).hide(); 
```

0 最接近，1 秒最接近，2 第三最接近，以此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T17:49:58.683

在第一个最接近之前缺少点

**[现场演示](http://jsfiddle.net/rajaadil/r7Kh9/1/)**

```
$('div').closest('table').closest('table').hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-21T13:09:29.190

您可以在第一张桌子上放一个 ID：

```
<table id="firstTable">
$('div').closest('#firstTable').hide(); 
```

# c# - ExportToHttpResponse Crystal Report 不运行 CRViewer

> ID：11584448
> 
> 赞同：7
> 
> 时间：2012-07-20T17:48:54.087
> 
> 标签：c#, crystal-reports

因此，我试图将水晶报表导出为 pdf，而无需在我的 Web 应用程序的运行时查看器中使用

> ExportToHttpResponse

方法。在加载参数、获取加载报告的文件名/路径时，一切似乎都正确执行。但是，当我执行假设创建一个弹出对话框的部分时，用户可以选择保存、运行、取消任何类型的下载，什么都没有发生。没有错误被抛出。它没有跨过我知道的代码的任何部分。它似乎运行了 ExportToHttpResponse 行，然后什么也不做。

所以我希望有人能给我一些指导，说明我在下面找到的代码中可能做错了什么：

```
protected void ExportRptButton_Click( object sender, EventArgs e )
        {
            if ( null != SelectedReport )
            {
                rptParams.Clear();
                rptParams = null;

                // Get the report document
                // string filePath = Server.MapPath( @"~\Reports\" + SelectedReport.FileName + ".rpt" );
                // Declare a new Crystal Report Document object and load the report file into the report document.
                ReportDocument rptDoc = new CrystalDecisions.CrystalReports.Engine.ReportDocument();
                ConfigureCrystalReports(rptDoc);
                // repDoc.Load(rptFileName);

                // AddParameters();
                // Set the report parameters the report object.
                LoadParameterFields(rptDoc);
                // Set the static text fields in the report object.
                LoadStaticTextFields(rptDoc);

                try
                {
                    if (rptDoc.IsLoaded)
                    {
                        // Stop buffering the response
                        Response.Buffer = false;
                        // Clear the response content and headers
                        Response.ClearContent();
                        Response.ClearHeaders();
                        Response.ContentType = "application/pdf";
                        // Export the Report to Response stream in PDF format and file name Customers
                        rptDoc.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, true, "DirectAccessReport");
                        // rptDoc.ExportToDisk(ExportFormatType.PortableDocFormat, "~/PDF_Folder");
                        // There are other format options available such as Word, Excel, CVS, and HTML in the ExportFormatType Enum given by crystal reports
                    }
                }
                catch ( Exception ex )
                {
                    logger.ErrorFormat("Could not export to pdf! {0}", ex);                  
                }
            }
        } 
```

**一些注意事项**：上面显示的 LoadParametersFields/LoadStaticTextFields 方法似乎工作正常，当用于在 crviewer 中打开报告时，报告会出现并正常工作。虽然，如果您也希望看到这些方法，我会根据要求将它们扔掉。

开头的 rptParams 是私有声明的 `List<ReportParameter>()`

ConfigureCrystalReports 方法用于获取和加载报表的文件路径。

非常感谢任何帮助或建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T14:16:59.347

这个示例代码对我有用；看看错误管理。

```
protected void btnExport_Click(object sender, EventArgs e)
{
    // Stop buffering the response
    Response.Buffer = false;
    // Clear the response content and headers
    Response.ClearContent();
    Response.ClearHeaders();

    ExportFormatType format = ExportFormatType.PortableDocFormat;
    string ext =  ".pdf";
    string reportName= "myreport";

    try
    {
        reportDocument.ExportToHttpResponse(format, Response, true, reportName);
    }
    catch (System.Threading.ThreadAbortException)
    {
        //ThreadException can happen for internale Response implementation
    }
    catch (Exception ex)
    {
       //other exeptions will be managed   
       throw;
    }
} 
```

# c# - 从程序集中提取文字字符串

> ID：11584459
> 
> 赞同：2
> 
> 时间：2012-07-20T17:49:31.927
> 
> 标签：c#, windows, winforms, visual-studio-2010, fxcop

不太清楚在哪里问这个。

基本上，我负责我们产品的本地化。我需要一种从编译的程序集中提取所有文字字符串的方法。我需要获取行号和源文件（用于比较目的）。我一直在使用 FxCop，我刚刚创建了一个规则来吐出所有“ldstr”指令。但是，这依赖于过时的 FxCop（我相信）。我也考虑过使用 ildasm，但我找不到任何关于如何解析输出以可靠地检索我需要的信息的教程。

那么，是否有一个实用程序来处理这个问题？一个我没有想到的简单方法？我也想避免像 ReSharper 这样的扩展，因为它只在您的解决方案的当前状态下运行；例如，我无法生成用于比较的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T02:51:26.767

ildasm 可以做到这一点：

```
ildasm.exe /text /metadata=heaps mscorlib.dll >out.txt

// User Strings
// -------------------------------------------------------
// 70000001 : ( 4) L"info"
// 7000000b : ( 2) L", "
// 70000011 : ( 5) L"value"
// 7000001d : ( 1) L"D"
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:09:57.567

如果您使用的是 Visual Studio，则可以运行以下宏

```
Sub TemporaryMacro()
        DTE.ExecuteCommand("Edit.FindinFiles")
        DTE.Find.FindWhat = ":q"
        DTE.Find.Target = vsFindTarget.vsFindTargetFiles
        DTE.Find.MatchCase = False
        DTE.Find.MatchWholeWord = False
        DTE.Find.MatchInHiddenText = True
        DTE.Find.PatternSyntax = vsFindPatternSyntax.vsFindPatternSyntaxRegExpr
        DTE.Find.SearchPath = "C:\yourproject"
        DTE.Find.SearchSubfolders = True
        DTE.Find.FilesOfType = "*.*"
        DTE.Find.ResultsLocation = vsFindResultsLocation.vsFindResults1
        DTE.Find.Action = vsFindAction.vsFindActionFindAll
    End Sub 
```

基本上，它正在对目录中的**:q**引用字符串进行正则表达式搜索，该目录将为您提供源代码中的所有引用字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T22:09:30.293

显然，很棒的[Cecil](http://www.mono-project.com/Cecil) OSS 框架在这里可能很有用。它会让你在汇编文件中轻松找到字符串文字。

需要做更多的工作来找回源文件中的字符串。精明的做法是在程序集的文本源文件的内容中搜索以查找所有字符串声明：

*   逐字逐句`@"my""string"`
*   或经典之类的`"my\"string"`

该程序集的源文件列表可以从[Cecil.PDB](https://stackoverflow.com/questions/4740942/where-can-i-get-mono-cecil-pdb-dll)子框架中获得。

# python - 引用另一个类中的类实例

> ID：11584461
> 
> 赞同：-2
> 
> 时间：2012-07-20T17:49:49.137
> 
> 标签：python

我正在编写具有两个类的代码。一类为 3-D 环境创建文本元素。另一个将在那个环境中将它们组合在一起。我想要做的是让第二类调用第一类的实例。换句话说，`def makeGroup`我希望能够调用`class msg`. 编码将如何措辞？目前，第一个类被继承到第二个，然后我试图调用对象self.text，但我不知道我应该如何引用它。我不相信我完全正确地使用了继承。

```
class msg:
    def __init__(self,num,unit):
        self.message = str(num) + ' ' + unit
        self.num = num
        self.text = viz.addText(self.message)

class msgGroup(msg):
    def __init__(self,x,y,z):
        self.msgLs=[]
        self.ghostMsg= viz.addText('',pos=[x,y,z],color= [0.000, .9, 0.071])
        self.msgLs.append(self.ghostMsg)

    def makeGroup(self):
        msg.text.setPosition([0,(len(self.msgLs)-1)*-1.5,0], viz.REL_PARENT)
        self.msgLs.append(msg.text) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:08:27.393

不，你确实误解了继承。继承适用于当类 B 与类 A 共享所有相同属性但具有更多，也许更具体的属性时：例如，人是人。

你的情况不同：你有一个组，一个组有消息。这是组合，而不是继承：“has-a”，而不是“is-a”。您应该简单地在内部定义一个 message_list`msgGroup`并向其中添加消息，然后您可以遍历消息并访问它们的`text`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:12:55.433

五件事：

1.  如果这是 Python 2，你的`msg`类应该继承自`object`
2.  [PEP8](http://www.python.org/dev/peps/pep-0008/)：如果你不遵循这个，没有人将能够遵循你的代码
3.  如果`msgGroup`继承自`msg`，那么每个`msgGroup`实例还具有实例所具有的所有成员（数据、方法和更奇特的东西）`msg`。在您的方法`makeGroup`中，要引用当前实例的`text`成员，只需执行`self.text`.
4.  您可能希望每个`msgGroup`都有几个`msg`s。为此，不要使用继承，只需拥有`msgGroup`一个 s 列表`msg`，然后对其进行迭代：

    ```
    for msg in self.msg_list:
        print msg.text 
    ```

5.  引用对象或类的成员不称为“调用它”。您可以使用运算符调用函数、方法和其他可调用对象（如类）`()`。

    ```
    foo = self.makeGroup # assigning makeGroup to a variable
    bar = self.makeGroup() # calling makeGroup, then assigning the result of that call to a variable 
    ```

# playframework-2.0 - 覆盖 Ebean 命名约定

> ID：11584468
> 
> 赞同：1
> 
> 时间：2012-07-20T17:50:33.087
> 
> 标签：playframework-2.0, ebean

在 Play 2.0.2 中，我尝试使用 ebean 作为 ORM 并从 play-1.2.4 迁移我现有的模型类。模型类中的所有 camelCase 字段都映射到数据库中的下划线列，这会产生问题，因为数据库中的列不使用下划线。

我一直在查看 ebean API 文档：[http ://www.avaje.org/static/javadoc/pub/com/avaje/ebean/config/UnderscoreNamingConvention.html](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/config/UnderscoreNamingConvention.html)

如果未指定下划线命名约定，则默认为下划线命名约定，这似乎在 Play 中的 EbeanPlugin 中发生。有没有办法可以覆盖这个默认设置（在 Play 中）？

我不想不得不用@Column 注释我所有的camelCase 字段来解决这个问题。

TIA。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:49:49.840

老问题，但由于我刚刚找到答案，所以我想分享一下。

在 conf 目录中，创建一个名为“ebean.properties”的文件。在那个文件里，放...

ebean.namingconvention=com.avaje.ebean.config.MatchingNamingConvention

您可以在那里设置许多配置选项。

查看第 1405 行：http: [//grepcode.com/file/repo1.maven.org/maven2/org.avaje/ebean/2.7.2/com/avaje/ebean/config/ServerConfig.java](http://grepcode.com/file/repo1.maven.org/maven2/org.avaje/ebean/2.7.2/com/avaje/ebean/config/ServerConfig.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:39:37.860

我认为 Ebean 支持这一点，但我不确定 Play Framework 是否很好地支持这一点，看看他们的谷歌组，当你有答案时更新你的问题，因为这是一个有趣的问题，我认为： -)。

但是，也许在以下设置配置`application.conf`：

```
ebean.namingConvention.sequenceFormat={table}{column}seq 
```

# jquery - 计算点击了多少单选按钮

> ID：11584470
> 
> 赞同：3
> 
> 时间：2012-07-20T17:50:40.373
> 
> 标签：jquery

所有，我有以下代码来检查我的所有单选按钮组是否都被选中：

```
jQuery("input[type=radio]").click(function(event){
    var num_questions = jQuery("#num_questions").val(),
        new_questions = parseInt(num_questions, 10) + 1,
        radios = jQuery("input[type=radio]"),
        all_answered = true;
    for(var i=1; i<new_questions; i++){
        alert(i);
        var group  = radios.filter('[name=rating_value_'+i+']');
        alert(group.filter(":checked").length);
        if(group.filter(":checked").length==0){
            all_answered = false;
            break;
        }
    }
    if (all_answered) {
        // a group was found that didn't have an answer selected
        // so do something
        jQuery("#no_answers").html('');
    } 
}); 
```

这很适合做检查，但我有一个问题。此代码在实际单选按钮被标记为已单击之前运行，因此它认为仍有一个未单击，即使那是最后一个。我该如何解决这个问题，让它像我想象的那样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:55:02.333

尝试使用`change`而不是`click`

[http://api.jquery.com/change/](http://api.jquery.com/change/)

这应确保在实际选择选项后执行。

*单击不起作用的原因是您在调用默认单击事件之前执行检查，默认单击事件将是选择实际单选按钮的事件。* 看来我可能错了。但是，更改应该仍然有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:24:35.047

我觉得我正在服用疯狂的药丸，因为我能够通过点击来实现它。这是我的代码：

```
$("input[type=radio]").click(function(event) {
    var all_answered = true;
    $('input:radio').each(function() {
        if (!$('input[name="' + $(this).attr("name") + '"]').is(':checked')) {
            all_answered = false;
        }
    });
    alert(all_answered);
}); 
```

这是我的小提琴在行动中展示它：http: [//jsfiddle.net/F8kAH/5/](http://jsfiddle.net/F8kAH/5/)

# iphone - 如何以 ccz 格式为 cocos2d 动画精灵

> ID：11584474
> 
> 赞同：0
> 
> 时间：2012-07-20T17:51:15.380
> 
> 标签：iphone, cocos2d-iphone

根据[本教程](http://www.raywenderlich.com/2361/how-to-create-and-optimize-sprite-sheets-in-cocos2d-with-texture-packer-and-pixel-formats)， PVR 图像似乎是 iOS 精灵的最佳格式。然而，在使用 Texturepacker 创建一个精灵表并导出为这种格式后，我无法让动画在 cocos2d 中工作。根据[此处](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3asprites)的文档，我应该使用

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"LuckyCompiled.plist"]; 
```

但是教程和文档都没有解释如何做动画，除了[这个](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3aanimation)。这是下面的代码所基于的。但这只会将基础图像放置到图层上，并且不会设置动画。

```
CCSprite *sprite = [[CCSprite alloc]init];
    sprite.position = ccp(player.contentSize.width/2+40, winSize.height/2+40);
    // Obtain the shared instance of the cache
    CCSpriteFrameCache *cache = [CCSpriteFrameCache sharedSpriteFrameCache];

   // load the frames
   [cache addSpriteFramesWithFile:@"LuckyCompiled.plist"];

   // It loads the frame named "frame1.png".
    // IMPORTANT: It doesn't load the image "frame1.png". "frama1.png" is a just the name of the frame
    CCSpriteFrame *frame = [cache spriteFrameByName:@"lucky1.png"];
                                 [sprite setDisplayFrame:frame];
    [self addChild:sprite];

    NSMutableArray *animFrames = [NSMutableArray array];
        for(int i = 1; i < 10; i++) {

    CCSpriteFrame *frame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"lucky%d.png",i]];
            [animFrames addObject:frame];
        }
    NSLog(@"animaframes %@",animFrames);
        CCAnimation *animation = [CCAnimation animationWithSpriteFrames:[NSArray arrayWithArray:animFrames]];

    [sprite runAction:[CCAnimate actionWithAnimation:animation]]; 
```

* * *

回答：

需要延迟，否则动画不明显

```
[CCAnimation animationWithSpriteFrames:[NSArray arrayWithArray:animFrames]]; 
```

应该是（也不需要做nsarray，可变的很好）

```
[CCAnimation animationWithSpriteFrames:frames delay:0.1f]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:30:20.540

这是我尝试过的代码，它工作正常。

```
CCSpriteFrameCache *frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];
        [frameCache addSpriteFramesWithFile:@"walkFrames.plist"];

        player = [CCSprite spriteWithSpriteFrameName:@"f1.png"];
        NSMutableArray *frames = [NSMutableArray arrayWithCapacity:8];
        for (int i = 1; i < 9; i++) {
            NSString *file = [NSString stringWithFormat:@"f%d.png", i];
            CCSpriteFrame *frame = [frameCache spriteFrameByName:file];
            [frames addObject:frame];
        }
        CCAnimation *walkAnim =[CCAnimation animationWithSpriteFrames:frames delay:0.1f];
        CCAnimate *animate = [CCAnimate actionWithAnimation:walkAnim];
        CCRepeatForever *rep = [CCRepeatForever actionWithAction:animate];
        player.position = ccp(23, 285);
        [player runAction:rep];

        [self addChild:player]; 
```

# java - 数据库 ps 语句插入

> ID：11584476
> 
> 赞同：0
> 
> 时间：2012-07-20T17:51:33.647
> 
> 标签：java, mysql, database, jdbc

试图将这样的文件插入数据库

演员：泰勒·洛特纳

生物：泰勒丹尼尔劳特纳出生于密歇根州大急流城，父母黛博拉和丹尼尔劳特纳出生。他和妹妹 Makena 在密歇根州哈德逊维尔的一个彬彬有礼的罗马天主教家庭中长大。六岁时，泰勒开始在法比亚诺的空手道学校学习武术，他和家人很快发现了他对这项运动的独特和天生的天赋。他很快被邀请与七届世界空手道冠军迈克尔一起训练Chaturantabut（又名 Mike Chat），在 8 岁时，他被要求代表他的国家参加 12 年及以下的世界空手道协会，在那里他成为了青少年世界形式和武器冠军，赢得了三枚金牌。 2003年，泰勒继续在武术巡回赛中蓬勃发展，他在NASKA排名世界第一”

More_Bio：然而，除了对武术的热爱之外，泰勒在7岁时很快就对表演产生了兴趣，当时从事演艺界的武术教练鼓励他试镜，以在一个小角色中露面。汉堡王广告。尽管他没有成功，但他非常享受这段经历，以至于他告诉父母他想从事演艺事业。很快，他和他的家人就从他们在密歇根的家到加利福尼亚来回旅行，这样泰勒就可以定期试镜表演角色。泰勒 10 岁时，由于频繁的旅行和机票开始变得不堪重负，他的家人做出了搬迁到洛杉矶的关键决定，在那里泰勒将拥有能够全职试镜电影、电视和广告的优势。

理由：这是一个大块头的少年偶像！我爱他作为“暮光之城”系列中的雅各布·布莱克！他是我见过的最好看的人之一。当我在推特上给他发推文时，我非常兴奋，他回复了一次！

事实：他在高中一年级和二年级时踢足球。他有德国、法国、荷兰和美洲原住民（特别是渥太华和波塔瓦托米）血统。我的天啊！我们都喜欢莱昂国王乐队。

演员：罗伯特·帕丁森

简历：他于 1986 年 5 月 13 日出生于英国伦敦。他喜欢音乐，是一位出色的音乐家，会弹吉他和钢琴。罗伯特 15 岁时，他开始在巴恩斯剧院公司从事业余戏剧表演。之后，他出演了《魔戒》（2004）（电视剧）（《暮光之国》）等银幕角色，饰演吉塞尔赫。

More_Bio：2003 年，罗伯特在《哈利·波特与火焰杯》（2005 年）中扮演塞德里克·迪戈里的角色。一周后，他在 2003 年底与迈克纽厄尔会面后获得了自己的角色。此后，他在备受期待的电影《暮光之城》(2008/I) 中饰演爱德华卡伦。他的音乐也将在电影中听到。此外，罗伯特还在《小灰烬》（2008 年）和《如何成为》（2008 年）中饰演萨尔瓦多·达利（Salvador Dalí）。

原因：古怪，罗伯特帕丁森在我第一次看到他在“哈利波特”中扮演塞德里克迪戈里时让我大吃一惊，但当我在“暮光之城”中看到他作为吸血鬼爱德华卡伦时偷走了我的心。爱德华队为胜利！我只是喜欢他凌乱的头发和浓密的眉毛。

事实： : 他是一位出色的音乐家，会弹吉他和钢琴。他三岁开始学习钢琴，五岁开始学习古典吉他。

这是执行插入的代码

```
String Actor = "", Bio = "", More_Bio = "", Fact ="", Reason = "";
while ((it = br.readLine()) != null)   {

    if (it.startsWith("Actor: "))
    {
        it = it.replace("'", "\"");
         // remove actor
      it = it.replace("Actor:  ", " ");
         Actor = it;
         System.out.println(Actor);
        // ps.setString(1, Actor);
    }

    if (it.startsWith("Bio:"))
    {
        it = it.replace("'", "\"");
         // remove actor
      it = it.replace("Bio:  ", " ");
          Bio = it;
         System.out.println(Bio);
     //    ps.setString(2, Bio);
    }
    if (it.startsWith("More_Bio:"))
    {
        it = it.replace("'", "\"");
         // remove actor
      it = it.replace("More_Bio:  ", " ");
     More_Bio = it;
         System.out.println(More_Bio);
      //   ps.setString(3, More_Bio);
    }
    if (it.startsWith("Reason:"))
    {
        it = it.replace("'", "\"");
         // remove actor
      it = it.replace("Reason:  ", " ");
     Reason = it;
         System.out.println(Reason);
    //     ps.setString(4, Reason);
    }

    if (it.startsWith("Fact:"))
    {
        it = it.replace("'", "\"");
         // remove actor
      it = it.replace("Fact:  ", " ");
     Fact = it;
         System.out.println(Fact);
       //  ps.setString(5, Fact);
    }

    ps.setString(1, Actor);
    ps.setString(2, Bio);
    ps.setString(3, More_Bio);
    ps.setString(4, Reason);
    ps.setString(5, Fact);
    ps.executeUpdate(); 

}
ps.close();
con.close(); 
```

如果代码在循环中有 ps 语句，则 Taylor Lautner 和 Robert Pattinson 的信息将两次插入数据库，当我将其从 while 循环中取出时，只插入最后一个 Robert Pattinson。泰勒被忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:12:51.283

您获取数据的方法是错误的。您尝试做的是每次找到演员或简历或任何此类关键字时执行更新语句。这是错误的，您应该先尝试收集所有信息，然后再执行更新。

我建议采用以下方法：

*   创建一个[POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)并通过您的 while 循环在 POJO 中填写有关演员的所有信息。将其保存在地图中（*您的关键可能是演员的姓名*）

*   然后遍历映射，从 POJO 中检索每个键的信息并创建更新语句并执行您的命令。

示例代码可能是这样的：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashMap;
import java.util.Iterator;

public class TextReader {

    public static void main(String[] args) {
        new TextReader().reader();
    }

    public void reader() {
        BufferedReader br = null;
        String it;
        String Actor = "", Bio = "", More_Bio = "", Fact = "", Reason = "";

        try {
            HashMap<String, PersonData> informationMap = new HashMap<String, TextReader.PersonData>();
            br = new BufferedReader(new FileReader(new File("textFile.txt")));

            while ((it = br.readLine()) != null) {

                if (it.startsWith("Actor: ")) {
                    it = it.replace("'", "\"");
                    // remove actor
                    it = it.replace("Actor:  ", " ");
                    Actor = it;
//                  System.out.println(Actor);
                    // ps.setString(1, Actor);
                }

                PersonData dataVO = informationMap.containsKey(Actor) ? informationMap.get(Actor) : new PersonData();

                if (it.startsWith("Bio:")) {
                    it = it.replace("'", "\"");
                    // remove actor
                    it = it.replace("Bio:  ", " ");
                    Bio = it;
                    // System.out.println(Bio);
                    dataVO.setBio(Bio);
                    // ps.setString(2, Bio);
                }
                if (it.startsWith("More_Bio:")) {
                    it = it.replace("'", "\"");
                    // remove actor
                    // it = it.replace("More_Bio:  ", " ");
                    More_Bio = it;
//                  System.out.println(More_Bio);
                     dataVO.setMoreBio(More_Bio);
                    // ps.setString(3, More_Bio);
                }
                if (it.startsWith("Reason:")) {
                    it = it.replace("'", "\"");
                    // remove actor
                    it = it.replace("Reason:  ", " ");
                    Reason = it;
                     dataVO.setReason(Reason);
                    // System.out.println(Reason);
                    // ps.setString(4, Reason);
                }

                if (it.startsWith("Fact:")) {
                    it = it.replace("'", "\"");
                    // remove actor
                    it = it.replace("Fact:  ", " ");
                    Fact = it;
                     dataVO.setFact(Fact);
                    // System.out.println(Fact);
                    // ps.setString(5, Fact);
                }

//              System.out.println(Actor + "\t" + Bio + "\t" + More_Bio + "\t"
//                      + Reason + "\t" + Fact);
                informationMap.put(Actor, dataVO);
            }

            for(String actorName: informationMap.keySet()){
                PersonData dataVO = informationMap.get(actorName);
                System.out.println(actorName);
                     // === Create your preparedstatement heare and execute the update ====
            }
        } catch (Exception exe) {
        } finally {
            if (br != null) {
                try {
                    br.close();
                } catch (IOException ex) {
                }
            }
        }
    } 
```

您的示例 POJO 类可能如下所示：

```
 /**
     * Sample Person POJO class
     */
    public class PersonData {
        private String bio;
        private String moreBio;
        private String fact;
        private String reason;

        public String getBio() {
            return bio;
        }

        public void setBio(String bio) {
            this.bio = bio;
        }

        public String getMoreBio() {
            return moreBio;
        }

        public void setMoreBio(String moreBio) {
            this.moreBio = moreBio;
        }

        public String getFact() {
            return fact;
        }

        public void setFact(String fact) {
            this.fact = fact;
        }

        public String getReason() {
            return reason;
        }

        public void setReason(String reason) {
            this.reason = reason;
        }
    }
} 
```

**笔记**

*   Java 命名约定规定变量名应以小写字母开头。尽管为了一致性起见，我遵循了您在代码中的内容，但我强烈建议您重构变量名

*   我做了一个基本假设，即您的演员姓名是独一无二的。这就是为什么我在这种情况下将其用作密钥的原因。如果这不是真的，那么您可能需要考虑将参与者名称作为 POJO 类的一部分，并使用另一个唯一标识符作为您的键。

# javascript - 使用 JavaScript 操作剪贴板会破坏格式

> ID：11584479
> 
> 赞同：1
> 
> 时间：2012-07-20T17:51:51.103
> 
> 标签：javascript, html, jquery, dom-events, clipboard

我正在编写一个脚本来附加链接到用户剪贴板的归属地——类似于您从 Tynt 看到的功能。

从功能上讲，下面的脚本工作正常，除了它正在删除换行符和格式。无论如何要保留 - 至少 - 换行符？

```
function addLinktoCopy() {

// Define tracking parameter
var trackingparam = "source=copypaste";

// Set document body as body_element variable
var body_element = document.getElementsByTagName('body')[0];

// Create a selection variable to store copied value
var selection;

// Populate selection variable with user's selected copy
selection = window.getSelection();

// Create a variable to store the selection length
var selectionlength;

// Convert the selection to a string and get the string's length
selectionlength = selection.toString().length

// If the selectionlength is >34, then append tracking
if ( selectionlength > 34 ){

    // Set the current page's URL as a variable
    var page = document.location.href;

    // Create a seperator variable
    var seperator;

    // Create a locationURL variable to store the URL and associated tracking parameters
    var locationURL;

    // Check to see if the URL already contains the tracking paramater
    // If the URL doesn't contain the tracking code, append it to the end
    if ( page.indexOf(trackingparam) == -1 ) {

        // Check to see if the URL already includes a ? in it
        if ( page.indexOf("?") != -1 ) {

            // If ? is present in the URL string, set seperator variable to &
            seperator = "&";        

        }

        else {

            // If ? is not present in the URL string, set seperator variable to ?
            seperator = "?";

        }

        // Set locationURL variable with URL + tracking code
        locationURL = document.location.href + seperator + trackingparam;

    }

    // Othwerise, the tracking code already exists in the URL string, so append nothing
    else {

        // Set the locationURL variable with the URL as is      
        locationURL = document.location.href;

    }

    // Build link to page with editorial copy, URL, seperator, and URL tracking parameters
    var pagelink = "<br/><br/>Read more at: "+ locationURL;

    // Create new variable with user's selection and page link
    var copytext = selection + pagelink;

    // Create a new div and add associated styling and hide it off the page
    var newdiv = document.createElement('div');

    // Append new div to document
    body_element.appendChild(newdiv);

    // Select text from the new (hidden) div
    newdiv.innerHTML = copytext;

    // Replace clipboard values with new selection + link value
    selection.selectAllChildren(newdiv);    

}

// Otherwise, selectionlength <= 34, so do nothing
// We are not appending any copy or URLs to the user's selection

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:27:06.397

经过一番研究，我弄清楚了这里发生了什么，并进行了修复以保留换行符。看起来在复制选择时，换行符被表示为 \n。因此，我添加了一些逻辑来用 HTML break 替换所有 \n 实例
，这解决了这个问题。这是完整的更新脚本。

```
function addLinktoCopy() {

// Define tracking parameter
var trackingparam = "source=copypaste";

// Set document body as body_element variable
var body_element = document.getElementsByTagName('body')[0];

// Create a selection variable to store copied value
var selection;

// Create a selection to store the selection as a text string
var selectedText;

// Populate selection variable with user's selected copy
selection = window.getSelection();

// Populate selectedText variable with the user's selected copy stored as a string
selectedText = selection.toString(); 

// Create a variable to store the selection length
var selectionlength;

// Convert the selection to a string and get the string's length
selectionlength = selection.toString().length

// If the selectionlength is >34 and doesn't start with "http://", then append tracking
// If the selection starts with "http://", it's likely a URL, which could provide for a bad experience when pasting into an address bar
if ( (selectionlength > 34) && (selectedText.substring(0,7) != "http://") ){

    // Set the current page's URL as a variable
    var page = document.location.href;

    // Create a seperator variable
    var seperator;

    // Create a locationURL variable to store the URL and associated tracking parameters
    var locationURL;

    // Check to see if the URL already contains the tracking paramater
    // If the URL doesn't contain the tracking code, append it to the end
    if ( page.indexOf(trackingparam) == -1 ) {

        // Check to see if the URL already includes a ? in it
        if ( page.indexOf("?") != -1 ) {

            // If ? is present in the URL string, set seperator variable to &
            seperator = "&";        

        }

        else {

            // If ? is not present in the URL string, set seperator variable to ?
            seperator = "?";

        }

        // Set locationURL variable with URL + tracking code
        locationURL = document.location.href + seperator + trackingparam;

    }

    // Othwerise, the tracking code already exists in the URL string, so append nothing
    else {

        // Set the locationURL variable with the URL as is      
        locationURL = document.location.href;

    }

    // Build link to page with editorial copy, URL, seperator, and URL tracking parameters
    var pagelink = "<br/><br/>Read more at: "+ locationURL;

    // Create new variable with user's selection and page link
    var copytext = selection + pagelink;

    // Replace line breaks /n with HTML break tags to quasi-preserve formatting on paste
    var copytext = copytext.replace(/\n/g, '<br />');

    // Create a new div and add associated styling and hide it off the page
    var newdiv = document.createElement("div");

    // Append new div to document
    body_element.appendChild(newdiv);

    // Select text from the new (hidden) div
    newdiv.innerHTML = copytext;

    // Replace clipboard values with new selection + link value
    selection.selectAllChildren(newdiv);

}

// Otherwise, selectionlength <= 34, so do nothing
// We are not appending any copy or URLs to the user's selection

}

// Execute addLinktoCopy function when user copies text from page
document.oncopy = addLinktoCopy; 
```

# ruby-on-rails - 此交易无效。请返回收件人的网站并重试

> ID：11584481
> 
> 赞同：2
> 
> 时间：2012-07-20T17:52:06.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, activemerchant, paypal-adaptive-payments

这是我的控制器：

**setup_purchase**方法对我的数据 api 确实适用，但**preapprove_payment**方法不起作用。

```
def pay
 gateway =  ActiveMerchant::Billing::PaypalAdaptivePayment.new(
  :login => "email",
  :password => "pass",
  :signature => "signature",
  :appid => "APP-80W284485P519543T" )
  response = gateway.preapprove_payment( 
  :return_url => user_orders_url(current_user),
  :cancel_url => user_orders_url(current_user),
  :sender_email =>"email",
  :start_date => Time.now,
  :end_date => Time.now,
  :currency_code =>"USD",
  :max_amount => "20",
  :maxNumberOfPayments => "2")
  puts response.preapproval_key
  puts gateway.debug
  # for redirecting the customer to the actual paypal site to finish the payment.
  redirect_to (gateway.redirect_url_for(response["preapproval_key"]))
end 
```

我进入日志：

```
PA-8K9332086D720151L
{:url=>#<URI::HTTPS:0xdf9bd18 URL:https://svcs.sandbox.paypal.com/AdaptivePayments/Preapproval>, :request=>"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<PreapprovalRequest>\n  <requestEnvelope>\n    <detailLevel>ReturnAll</detailLevel>\n    <errorLanguage>en_US</errorLanguage>\n    <senderEmail>email</senderEmail>\n  </requestEnvelope>\n  <endingDate>2012-07-20T19:09:20</endingDate>\n  <startingDate>2012-07-20T19:09:20</startingDate>\n  <maxTotalAmountOfAllPayments>20</maxTotalAmountOfAllPayments>\n  <maxNumberOfPayments>2</maxNumberOfPayments>\n  <currencyCode>USD</currencyCode>\n  <cancelUrl>http://localhost:3000/en/u/maserranocaceres/orders</cancelUrl>\n  <returnUrl>http://localhost:3000/en/u/maserranocaceres/orders</returnUrl>\n</PreapprovalRequest>\n", :response=>"{\"responseEnvelope\":{\"timestamp\":\"2012-07-20T10:09:22.459-07:00\",\"ack\":\"Success\",\"correlationId\":\"ada6a3e7da93d\",\"build\":\"DEV\"},\"preapprovalKey\":\"PA-8K9332086D720151L\"}"} 
```

完整回复：

```
#<ActiveMerchant::Billing::AdaptivePaymentResponse:0xc817278 @json="{\"responseEnvelope\":{\"timestamp\":\"2012-07-23T07:43:56.603-07:00\",\"ack\":\"Success\",\"correlationId\":\"7f759c5da73ad\",\"build\":\"DEV\"},\"preapprovalKey\":\"PA-1M101813XU7801314\"}", @response=#<Hashie::Rash preapproval_key="PA-1M101813XU7801314" response_envelope=#<Hashie::Rash ack="Success" build="DEV" correlation_id="7f759c5da73ad" timestamp="2012-07-23T07:43:56.603-07:00">>, @xml_request="<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<PreapprovalRequest>\n  <requestEnvelope>\n    <detailLevel>ReturnAll</detailLevel>\n    <errorLanguage>en_US</errorLanguage>\n    <senderEmail>microf_1342709161_per@gmail.com</senderEmail>\n  </requestEnvelope>\n  <endingDate>2012-08-22T16:43:54</endingDate>\n  <startingDate>2012-07-23T16:43:54</startingDate>\n  <maxTotalAmountOfAllPayments>20</maxTotalAmountOfAllPayments>\n  <maxNumberOfPayments>1</maxNumberOfPayments>\n  <currencyCode>USD</currencyCode>\n  <cancelUrl>http://localhost:3000/en/u/maserranocaceres/orders</cancelUrl>\n  <returnUrl>http://localhost:3000/en/u/maserranocaceres/orders</returnUrl>\n</PreapprovalRequest>\n", @request={"PreapprovalRequest"=>{"requestEnvelope"=>{"detailLevel"=>"ReturnAll", "errorLanguage"=>"en_US", "senderEmail"=>"email"}, "endingDate"=>"2012-08-22T16:43:54", "startingDate"=>"2012-07-23T16:43:54", "maxTotalAmountOfAllPayments"=>"20", "maxNumberOfPayments"=>"1", "currencyCode"=>"USD", "cancelUrl"=>"http://localhost:3000/en/u/maserranocaceres/orders", "returnUrl"=>"http://localhost:3000/en/u/maserranocaceres/orders"}}, @action="Preapproval"> 
```

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:54:19.500

问题已解决。

改变

`gateway.redirect_url_for(response["preapprovalKey"])`

至

`gateway.redirect_pre_approval_url_for(response["preapprovalKey"])`

正确的方法是[redirect_pre_approval_url_for](https://github.com/jpablobr/active_paypal_adaptive_payment/blob/master/lib/active_merchant/billing/gateways/paypal_adaptive_payment_common.rb#L26)

你可以在这篇文章中看到修复：

[在 Rails 3.2 中使用贝宝预先批准的付款](https://stackoverflow.com/questions/11616207/preapproved-payments-with-paypal-in-rails-3-2)

非常感谢！

# objective-c - 找不到“UIWebViewDelegate”的协议声明

> ID：11584484
> 
> 赞同：0
> 
> 时间：2012-07-20T17:52:12.460
> 
> 标签：objective-c, macos, cocoa

我正在尝试利用 UIWebView 功能，特别是我想做这样的事情：[Open links in Safari instead of UIWebVIew?](https://stackoverflow.com/questions/4452719/how-do-i-open-links-in-safari-instead-of-uiwebview)

但是当我尝试将 UIWebViewDelegate 添加到我的 AppDelegate 界面时遇到问题。

![在此处输入图像描述](../Images/069308eae124957edb45126ae1cddbd9.png)

有谁知道是什么问题？请注意，这是 Mac OS 而不是 iOS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T08:30:19.550

添加：

```
#import <UIKit/UIKit.h> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T17:55:22.333

> 有谁知道是什么问题？请注意，这是 Mac OS 而不是 iOS。

这就是那里的问题。

MacOS X 上没有`UIWebView`or `UIWebViewDelegate`。 UI 是 UIKit 的前缀，它是 AppKit 的 iOS 等价物。当您看到一个名称以 UI 开头的类时，您会立即知道您正在查看 iOS 代码。

您可能正在寻找的课程是[`WebView`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html). `WebView`实际上使用*五个*单独的委托，因此您可能需要实现多达五个不同的协议：`WebUIDelegate`、`WebDownload`、`WebFrameLoadDelegate`、`WebPolicyDelegate`和`WebResourceLoadDelegate`. （实际上，我认为您不需要做那么多工作。例如，您可能不需要实施自己的访问策略。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:56:40.177

[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)仅适用于 iOS。您不能为 Mac OSX 使用 UIWebViewDelegate。如果您查看自己的代码，您使用的是 WebView，而不是 UIWebView。

您需要查看[WebView 类文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)

# ruby-on-rails - 如何翻译 ActiveRecord 模型类名称？

> ID：11584489
> 
> 赞同：46
> 
> 时间：2012-07-20T17:52:22.053
> 
> 标签：ruby-on-rails, activerecord, internationalization

当我有一个实例时，获取 ActiveRecord 模型类的翻译名称的最简单方法是什么？

例如 - 我有这样的模型类：

```
class Category < ActiveRecord::Base
  ...
end 
```

我有一个类的实例：

```
category = Category.first 
```

我有 YAML 文件`config/locales/cs.yml`：

```
cs:
  activerecord:
    models:
      category: Kategorie 
```

而且我需要动态地执行此操作，即使我以前不知道我将处理什么模型类的实例。所以我不想明确指定“activerecord.models.category”。

是否有捷径可寻？我知道，我可以做这样的事情

```
"activerecord.models.#{category.class.name.underscore}" 
```

但必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-24T15:10:14.647

看：

[http://api.rubyonrails.org/classes/ActiveModel/Naming.html](http://api.rubyonrails.org/classes/ActiveModel/Naming.html) [http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)

因此，例如，在 AR 类中使用：

```
Person.model_name.human 
```

或来自 AR 实例：

```
person.class.model_name.human 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T17:56:32.253

检查[constantize](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)和[分类](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-classify)。

# c# - Selection.InsertFile() 找不到文件，尽管它在目录中

> ID：11584490
> 
> 赞同：0
> 
> 时间：2012-07-20T17:52:25.237
> 
> 标签：c#, console, ms-word

我正在尝试使用 Microsoft.Office.Interop.Word 命名空间来对 docx 文件进行一些操作，特别是以编程方式合并它们。

我创建了一个简单的测试工具来尝试一些功能，尽管文件位于执行目录中，但我收到了一个找不到文件的错误。

我要做的就是合并两个 docx 文件，分别是 doc1.docx 和 doc2.docx。我现在只是在玩这个功能，所以我创建了一个简单的 C# 控制台应用程序并具有以下内容：

使用 Word = Microsoft.Office.Interop.Word；

```
//and in my method:
object defaultTemplate = @"Normal.dotm";
object missing = System.Type.Missing;
object outputFile = "out.docx";

Word.Application wordApplication = new Word.Application();
//using the default Word template
Word._Document wordDocument = wordApplication.Documents.Add(defaultTemplate);
Word.Selection selection = wordApplication.Selection;
//add files manually. THIS is where things are failing
selection.InsertFile("doc1.docx");
selection.InsertFile("doc2.docx"); 
```

我收到一条异常消息“找不到此文件”。在我第一次调用 InsertFile() 时。我确定这些文件存在于我的调试目录中，这是该程序运行的位置。MSDN 明确指出，如果您不提供带有参数的路径，它将使用当前目录。它发现模板 Normal.dotm 很好。我觉得我在这里错过了一些简单的东西，但是已经搞砸了半个多小时，没有运气。有人对我应该在这里做什么有任何建议吗？谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:01:33.957

确保您的路径可用。使用`GetCurrentDirectory()`以确保您当前的目录是您想要的。否则使用完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:06:33.890

您可能还需要设置默认文件路径。

```
MyWordApp.Application.Options.set_DefaultFilePath() 
```

# iphone - 调用 UITableView 的方法从 ParserDidEndDocument 更新，UITableView 为空？

> ID：11584494
> 
> 赞同：0
> 
> 时间：2012-07-20T17:52:43.987
> 
> 标签：iphone, ios5, isnull, method-call

我发现了一些关于这个主题的问题，但已知似乎解决了我的问题。我有一个 iPhone 应用程序，它从服务器提取和 XML 提要，对其进行解析，然后在三个 UITableViews 中显示数据（在解析时进行排序）。一旦数据完成解析，我目前有 NSTimers 来更新 UITables。我知道有更好的方法。我正在尝试使用解析器委托方法

在我的 Parser.m

```
 -(void)parserDidEndDocument:(NSXMLParser *)parser{
   NSLog(@"done Parsing, now update UITable in otherViewController");
    otherViewController *otherUpdatingtmp =[[otherViewController alloc] initWithNibName:@"otherViewController" bundle:nil];
    [otherUpdatingtmp updateTable];
    } 
```

触发`updateTable`位于 otherViewController 上的方法以重新加载表中的数据。我的 NSLog 告诉我我`updateTable`正在 otherViewController 线程中触发，但是我似乎无法让我的 TableView 更新，因为它返回为`NULL`.

在我的 otherViewController.m

```
-(void)updateTable{

    [tabeViewUI reloadData];
    NSLog(@"update table fired. table view is %@.", tabeViewUI);

} 
```

这一定是我忽略的小事。提前致谢！

编辑 7/24/12：感谢@tc。让我开始使用`[NSNotificationCenter]`

在我的 parser.m

```
-(void)parserDidEndDocument:(NSXMLParser *)parser{
  NSLog(@"done Parsing, now update UITable's with NSNotification");

    [[NSNotificationCenter defaultCenter] postNotificationName:@"parserDidEndDocument" object:self];} 
```

然后在我添加的每个 UITableViews 中：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateTable) name:@"parserDidEndDocument" object:nil];

    }
    return self;

} 
```

最后：

```
 -(void)dealloc{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

我希望这对其他人有帮助。它当然帮助了我！谢谢@tc。

# opencv - OpenCV存储点向量的向量 >

> ID：11584496
> 
> 赞同：4
> 
> 时间：2012-07-20T17:52:55.597
> 
> 标签：opencv, vector

我正在使用 OpenCV 2.4.2 FileStorage 并试图以我可以读回的方式存储点向量的向量。最好的方法是什么？

以下是我尝试过的，但读回来会引发错误： `OpenCV Error: Unspecified error (The sequence element is not a numerical scalar) in cvReadRawDataSlice, file /Downloads/OpenCV-2.4.2/modules/core/src/persistence.cpp, line 3367`

保存：

```
bool writeVectorVectorPoint(string fname, vector<vector<Point> > vvP)
{
  FileStorage fs(fname, FileStorage::WRITE);
  fs << "nV" << static_cast<int>(vvP.size());
  for(size_t i = 0; i < vvP.size(); i++)
  {
    ostringstream istr;
    istr << "v" << i;
    fs << istr.str() << "[";
    for(size_t jj = 0; jj < vvP.at(i).size(); jj++)
    {
      ostringstream jjstr;
      fs << vvP.at(i).at(jj);
    }
    fs << "]";
  }
  fs.release();
  return(true);
} 
```

阅读：

```
FileStorage fs(argv[2], FileStorage::READ);
if(!fs.isOpened())
{
  cout << "Unable to open: " << argv[2] << endl;
  return(-1);
}
int nV = static_cast<int>(fs["nV"]);
cout << "nV: " << nV << endl;
vector<Point> vPts;
for(int ii = 0; ii < nV; ii++)
{
  ostringstream iistr;
  iistr << "v" << ii;
  cout << iistr.str() << ": ";
  fs[iistr.str()] >> vPts;
  cout << endl;
}
fs.release(); 
```

xml 文件如下所示：

```
<?xml version="1.0"?>
<opencv_storage>
<nV>4</nV>
<v0>
  <_>
    269 490</_>
  <_>
    400 522</_>
  <_>
    331 600</_>
  <_>
    294 610</_></v0>
<v1>
  <_>
    537 510</_>
  <_>
    590 458</_>
  <_>
    603 612</_>
  <_>
    508 626</_></v1>
<v2>
  <_>
    594 287</_>
  <_>
    444 240</_></v2>
<v3>
  <_>
    451 330</_>
  <_>
    632 342</_>
  <_>
    652 344</_>
  <_>
    470 381</_></v3>
</opencv_storage> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-08T06:45:07.030

*有点晚了：* 一个类似的更简单的例子，带有向量的向量：

编写函数，每次添加一个不同名称的节点（仅供参考）：

```
void writeVectorOfVector(FileStorage &fs, string name, vector<vector<Point2f>> &vov)
{
    fs << name;
    fs << "{";
    for (int i = 0; i < vov.size(); i++)
    {
        fs << name + "_" + to_string(i);
        vector<Point2f> tmp = vov[i];
        fs << tmp;
    }
    fs << "}";
} 
```

读取函数，使用 FileNodeIterator 读取每个 vector< x > 并将其推回 vector 的向量：

```
void readVectorOfVector(FileNode &fns, string name, vector<vector<Point2f>> &vov)
{
    vov.clear();
    FileNode fn = fns[name];
    if (fn.empty()){
        return;
    }

    FileNodeIterator current = fn.begin(), it_end = fn.end(); // Go through the node
    for (; current != it_end; ++current)
    {
        vector<Point2f> tmp;
        FileNode item = *current;
        item >> tmp;
        vov.push_back(tmp);
    }
} 
```

使用 OpenCV 2.4.8/C++/Vs2013 测试。

希望这可以简化您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:58:46.697

目前，我通过不使用 OpenCV 的 FileStorage 解决了这个问题。这是我为存储 Point 向量的向量所做的，因为有很好的例程来打印向量。

```
bool writeVectorVectorPoint(string fname, vector<vector<Point> > vvP)
{
  ofstream fsOut;
  vector<vector<Point> >::iterator p;

  fsOut.open(fname.c_str());
  if(fsOut.fail())
  {
    cout << "Failed to open " << fname << endl;
    return(false);
  }
  for(p = vvP.begin(); p != vvP.end(); p++)
  {
    fsOut << (*p) << endl;
  }
  fsOut.close();
  return(true);
} 
```

把它们读回来有点复杂，但仍然不难。如果有人看到任何优化，请告诉我，因为我怀疑有更好（或至少更优雅）的解决方案。

```
bool readVectorVectorPoint(string fname, vector<vector<Point> >& vvP)
{
  ifstream fsIn;
  fsIn.open(fname.c_str());
  if(fsIn.fail())
  {
    cout << "Failed to open: " << fname << endl;
    return(false);
  }
  Point pt;
  vector<Point> vPt;
  vector<Point>::iterator p;
  string line;
  while(getline(fsIn, line))
  {
    cout << line << endl;
    string ptStr;
    stringstream s(line.substr(1,line.size()-1));
    vPt.clear();
    while(getline(s, ptStr, ';'))
    {
      stringstream s1(ptStr);
      string lastStr;
      getline(s1, lastStr, ',');
      pt.x = atoi(lastStr.c_str());
      getline(s1, lastStr, ',');
      pt.y = atoi(lastStr.c_str());
      vPt.push_back(pt);
    }
    vvP.push_back(vPt);
  }

  fsIn.close();
  return(true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-29T06:12:28.483

在我的情况下，我使用这个解决方案来读取一个向量 o KeyPoints 和一个 Mat 基于 bloublo
im 的答案，使用 opencv 2.4.9

```
 FileNodeIterator current = fn.begin(), it_end = fn.end(); // Go through the node
   for (; current != it_end; ++current)
   {
    vector<KeyPoint> kp;
    Mat desc;
    FileNode item = *current;
    read(item,kp);

    ++current;
    item = *current;
    item >> desc;
    ...
    } 
```

# java - 如何在Java中使用两个类中的方法？

> ID：11584498
> 
> 赞同：4
> 
> 时间：2012-07-20T17:53:00.977
> 
> 标签：java

我一直在环顾四周，我只找到了一个不够清楚的答案，至少对我来说是这样。

我正在使用 GUI 构建一个非常基本的聊天应用程序，并且我已将 GUI 与连接内容分开。现在我需要从服务器类中的 GUI 调用一种方法，反之亦然。但我不太明白该怎么做（即使是“this”）。下面是部分代码的样子（这是一个名为 server_frame 的类）：

```
textField.addActionListener(
            new ActionListener() {

                public void actionPerformed(ActionEvent arg0) {
                    try {
                        srv.sendData(arg0.getActionCommand());
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    textField.setText("");
                }
            }
            ); 
```

这是来自 server_frame 的代码，srv 是来自另一个类（服务器）的对象，其中包含 sendData 方法，我可能没有正确定义它，所以希望有人可以定义它。

另一方面，从其中创建对象 srv 的类服务器包含在此代码中使用 server_frame 中的 JTextArea displayArea 的方法：

```
private void displayMessage(final String message){
    sf = new server_frame();
    SwingUtilities.invokeLater(new Runnable(){

        public void run(){
            sf.displayArea.append(message);
        }
    }
            );
} 
```

又一次 sf 是一个由 server_frame 组成的对象，而且可能再次定义错误:)

希望这足够清楚，遗憾的是我尝试了搜索，但它没有给我我正在寻找的结果，如果您需要更多信息，我很乐意添加它！

谢谢阅读，

先生

PS请不要介意我在术语上出现了失误，我对java还是很陌生，并且愿意接受任何更正！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:20:33.123

某些类必须同时构建这两个对象——GUI 和服务器——并且它应该让每个对象都知道另一个对象。例如，假设主类是`ServerApplication`. 为了清楚起见，我将使用以大写字母开头的类名的标准 Java 约定。

```
class ServerApplication {
    Server server;
    ServerFrame gui;

    public static void main(String []) {
        server = new Server(...);
        gui = new ServerFrame(server);
        server.setGui(gui);
    }
} 
```

每个类也应该存储对另一个类的引用。

```
class Server {
    ServerFrame gui;

    public void setGui(ServerFrame gui) {
        this.gui = gui;
    }

    ...
}

class ServerFrame extends JFrame {
    Server server;

    public ServerFrame(Server server) {
        this.server = server;
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:10:34.347

我想您可能正在寻找 ClassName.this.methodName 语法。那些动作监听器中的 this 指的是您创建的匿名类。如果您使用上述语法，您将引用包含匿名类的类。

或者，如果您正在寻找班级中的私有字段，您可以使用 ClassName.this.privateField

# history - JIRA 插件查看以前的问题状态

> ID：11584499
> 
> 赞同：0
> 
> 时间：2012-07-20T17:53:04.037
> 
> 标签：history, jira, status, issue-tracking, jira-plugin

我正在寻找一个 JIRA 插件，它会在我给它的前一个日期显示问题的状态。因此，如果我在上周的星期一告诉它，我想了解当时存在的所有问题及其当时的状态。我想知道是否存在这样的插件，或者是否有其他方法可以解决这个问题。感谢您的阅读和您提供的任何帮助。

*注意，我制作了一个 excel 宏来基本上做到这一点，但它包含一个巨大的 mysql 查询，如果这样的插件已经存在，我不想使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T07:06:17.787

我认为根本不存在这样的插件，因为这将涉及问题统计信息以显示问题如何随时间变化。

您可以向 Atlassian JIRA 团队发布功能请求，看看这是否可行。如果他们认为有足够的兴趣，他们还可以在未来的版本或专有插件中包含此功能。

[http://www.atlassian.com/resources/support](http://www.atlassian.com/resources/support)

# python - 运行 cp 命令以复制文件或在 Python 中更改文件名

> ID：11584502
> 
> 赞同：2
> 
> 时间：2012-07-20T17:53:30.617
> 
> 标签：python, linux, bash, shell, cp

在 python 2.7.2 中，我需要在 Linux 中制作一个文件的副本。

新文件 = "namePart1" + 字典 [key] + "namePart2"

os.system("cp cfn5e10_1.lp 新文件")

但是，新文件不能被其正确的字符串替换。

论坛中的帖子无济于事。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T17:57:09.007

用于[`shutil.copyfile`](http://docs.python.org/library/shutil.html#shutil.copyfile)复制文件而不是`os.sytem`，它不需要创建新进程，它会自动处理其中包含不寻常字符的文件名，例如空格 -`os.system`只需将命令传递给 shell，shell 可能会分解文件名其中有空格，以及其他可能的问题。

例如：

```
newfile = "namePart1" + dictionary[key] + "namePart2"
shutil.copyfile("cfn5e10_1.lp", newfile) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T17:57:40.587

这不会替换`newfile`为您的变量。

```
os.system("cp cfn5e10_1.lp newfile") 
```

您需要将变量连接到字符串的末尾，如下所示：

```
os.system("cp cfn5e10_1.lp " + newfile) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T22:52:05.767

如果`cp`要从 Python 调用，请使用该`subprocess`模块：

```
subprocess.call(["cp", "cfn5e10_1.lp", "newfile"]) 
```

但最好使用`shutil`模块中的函数。

# android - 在android中为onClickListener（）编写代码时出错

> ID：11584503
> 
> 赞同：0
> 
> 时间：2012-07-20T17:53:36.560
> 
> 标签：android

马代码：-

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    b1=(Button)findViewById(R.id.button2);
    b1.setOnClickListener(new onClickListener()// error Line
    {
        public void onClick(View arg0)
        {
        startActivity(new Intent("com.example.crazy.HistoryActivity"));
        }});
} 
```

错误获取：- 此行的多个标记- onClickListener 无法解析为类型- View 类型中的方法 setOnClickListener(View.OnClickListener) 不适用于参数（新的 onClickListener(){}）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T17:57:32.423

使用 OnClickListener() 而不是 onClickListener()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:08:12.527

**1.**在**Java**中，我们遵循**Camel案例来命名变量、方法、类、接口等。**

**2.** But `OnClickListener()`is an **Interface Not a method**，所以根据Java命名约定它的**大写“O”，而不是小写“o”**。

**3**试试这个...

```
b1.setOnClickListener(new OnClickListener()// error Line
    {
        public void onClick(View arg0)
        {
        startActivity(new Intent("com.example.crazy.HistoryActivity"));
        }}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:57:23.453

你需要`import View.OnClickListener;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T17:58:08.683

```
import android.view.View.OnClickListener; 
```

大写字母`OnClickListener`是类名

```
b1.setOnClickListener(new OnClickListener()// error Line
    {
        public void onClick(View arg0)
        {
        startActivity(new Intent("com.example.crazy.HistoryActivity"));
        }}); 
```

之后清理你的项目

# sql - 定义用于连接的行

> ID：11584505
> 
> 赞同：0
> 
> 时间：2012-07-20T17:53:39.793
> 
> 标签：sql

我有一个包含产品的表和另一个包含这些产品名称的表（一个产品可以有多个不同语言的名称）。

我目前使用这样的查询来列出所有产品的名称：

```
SELECT name
FROM name_table
LEFT JOIN product_table ON name_table.product = product_table.product
ORDER BY name_table.product, language != 'en', language != '*' 
```

这将产生所有名称的列表，并且最好的可用名称（如果有，则为国际名称，如果不存在任何名称，则为国际名称）总是首先出现。我只是跳过每个产品的第一个条目之后的所有条目 - 不优雅，但它运行得足够快。

问题是我无法按字母顺序排序。

但是，当我使用这样的东西时：

```
SELECT
  product,
 (SELECT name
  FROM name_table
  WHERE name_table.product = product_table.product
  ORDER BY language != 'en'
  LIMIT 1) AS bestname
FROM product_table
ORDER BY bestname 
```

那么查询非常慢（至少对于 MySQL）。

此查询速度很快，但似乎未定义（因此是准随机的）使用的名称行：

```
SELECT name
FROM product_table
LEFT JOIN name_table ON name_table.product = product_table.product
ORDER BY name 
```

如果我只能告诉 MySQL 使用哪一行来连接，那么一切都会好起来的。

如果存在多个匹配的行，有没有办法定义在连接中使用哪一行？

编辑：产品可以有任何语言的名称，并非所有产品都有英文名称，抱歉造成混淆。

Edit2：我发现了一个等效的问题：[MySQL JOIN the most recent row only?](https://stackoverflow.com/questions/3619030/mysql-join-the-most-recent-row-only?rq=1) 在那里，SQL 专家还使用了子选择（我的子选择查询非常慢，所以我想避免它），所以也许 SQL 不能做我想做的事情:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:11:32.727

您是否只想获取产品的英文名称？你的问题表明：

```
SELECT name
FROM name_table LEFT JOIN
     product_table ON name_table.product = product_table.product
where language = 'en'
ORDER BY name_table.product 
```

或者，您是否尝试获取外国名称，但按其英文名称订购产品？如果是这样，您需要一个额外的连接：

```
SELECT name
FROM name_table LEFT JOIN
     product_table 
     ON name_table.product = product_table.product and
        name_table.language <> 'en' left outer join
     product_table pten
     on name_table.product = product_table.product and
        name_table.language = 'en'
ORDER BY pten.name, name_table.product_id 
```

这假设一个产品只有一个英文名称。排序的第二个子句用于没有英文名称的情况，将所有其他名称放在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:16:19.537

您定义查询的方式似乎根本不需要加入产品表。

如果 name_table 具有产品列、语言列和您要获取的名称，为什么要连接到 product_table？请澄清一下，我想我可能知道你需要做什么，但这个问题的措辞让我感到困惑。

# java - 用字符串读/写二进制文件？

> ID：11584508
> 
> 赞同：0
> 
> 时间：2012-07-20T17:54:06.903
> 
> 标签：java, string, binary, datainputstream, dataoutputstream

如何从二进制文件中写入/读取字符串？

我试过使用`writeUTF`/ `readUTF`(DataOutputStream/DataInputStream) 但这太麻烦了。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:09:33.543

暂时忘记 FileWriter、DataOutputStream。

*   对于二进制数据，一种用途`OutputStream`和`InputStream`类别。他们处理`byte[]`。
*   对于文本数据一个用途`Reader`和`Writer`类。他们处理`String`可以存储所有类型的文本，因为它在内部使用 Unicode。

可以通过指定编码来完成从文本到二进制数据的交叉，默认为 OS 编码。

*   `new OutputStreamWriter(outputStream, encoding)`
*   `string.getBytes(encoding)`

So if you want to avoid `byte[]` and use String you must abuse an encoding which covers all 256 byte values in any order. So no "UTF-8", but maybe "windows-1252" (also named "Cp1252").

But internally there is a conversion, and in very rare cases problems might happen. For instance `é` can in Unicode be one code, or two, `e` + combining diacritical mark right-accent `'`. There exists a conversion function (java.text.Normalizer) for that.

One case where this already led to problems is file names in different operating systems; MacOS has another Unicode normalisation than Windows, and hence in version control system need special attention.

So on principle it is better to use the more cumbersome byte arrays, or ByteArrayInputStream, or java.nio buffers. Mind also that String `char`s are 16 bit.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:11:06.000

如果你想写文本，你可以使用 Writers 和 Readers。

您可以使用 Data*Stream writeUTF/readUTF，但字符串长度必须少于 64K 个字符。

* * *

```
public static void main(String... args) throws IOException {
    // generate a million random words.
    List<String> words = new ArrayList<String>();
    for (int i = 0; i < 1000000; i++)
        words.add(Long.toHexString(System.nanoTime()));

    writeStrings("words", words);
    List<String> words2 = readWords("words");
    System.out.println("Words are the same is " + words.equals(words2));
}

public static List<String> readWords(String filename) throws IOException {
    DataInputStream dis = new DataInputStream(new BufferedInputStream(new FileInputStream(filename)));
    int count = dis.readInt();
    List<String> words = new ArrayList<String>(count);
    while (words.size() < count)
        words.add(dis.readUTF());
    return words;
}

public static void writeStrings(String filename, List<String> words) throws IOException {
    DataOutputStream dos = new DataOutputStream(new BufferedOutputStream(new FileOutputStream(filename)));
    dos.writeInt(words.size());
    for (String word : words)
        dos.writeUTF(word);
    dos.close();
} 
```

印刷

```
Words are the same is true 
```

# visual-c++ - 如何在 C++ 中使用 lib usb

> ID：11584511
> 
> 赞同：1
> 
> 时间：2012-07-20T17:54:11.620
> 
> 标签：visual-c++

我想用 C++ 与 USB 端口通信。我知道 libusb 是一个好方法，但我不能使用它。我已经下载了许多 libusb 版本，例如 libusbx-1.0.12.tar、libusb-win32-bin-1.2.6.0、libusb-1.0.9.tar。但我对他们有很多问题。例如，其中有一个头文件，我创建了一个项目，然后将 libusb.h 添加到头文件中，并在 c++ 空项目中使用#include 命令，这个命令是未定义的。有没有人可以帮助我，我想要一步一步完成使用 libusb 的说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:09:04.093

你应该从[libusb-win32开始](http://sourceforge.net/projects/libusb-win32/)

并非常仔细地阅读他们的[维基。](http://sourceforge.net/p/libusb-win32/wiki/Home/)

包括头文件是不够的。您还需要与导入库链接（这是使用第 3 方库时需要采取的标准操作，与 libusb 无关）

# javascript - 如何使用带有 Javascript 的复选框禁用/启用表单元素？

> ID：11584514
> 
> 赞同：1
> 
> 时间：2012-07-20T17:54:16.140
> 
> 标签：javascript

我不知所措——在这个问题上绞尽脑汁好几个小时之后，是时候在这里提出这个问题了。

我试图让一个复选框执行一些javascript代码，选中时启用一些表单元素，未选中时再次禁用这些元素。

这是我拥有的javascript：

```
function houseclean()
{
if (document.orderform.cleaning.checked == true)
  {
  document.orderform.rooms.disabled = false;
  document.orderform.datetime.disabled = false;
  document.orderform.howoften.disabled = false;
  }
else
  {
  document.orderform.rooms.disabled = true;
  document.orderform.datetime.disabled = true;
  document.orderform.howoften.disabled = true;
  }
} 
```

这是我的 HTML 代码：

```
<form id="orderform" style="margin-left: 6cm">
<input type="checkbox" name="cleaning" value="yes" onclick="houseclean()"/> Home cleaning <br />
Service: <select name="rooms" id="rooms" disabled >
  <option value="1bedroom">One Bedroom Apt</option>
  <option value="2bedroom">Two Bedroom Apt</option>
  <option value="3bedroom">Three Bedroom Townhome or SF Home</option>
  <option value="4bedroom">Four Bedroom Home</option>
  <option value="5bedroom">Five Bedroom Home</option>
  <option value="6bedroom">Six Bedroom Home</option>
</select> <br />
Date / Time: <input type="text" name="datetime" disabled /><br />
How often would you like a cleaning?: <select name="howoften" disabled>
  <option value="once">One Time Only</option>
  <option value="2bedroom">Every Week</option>
  <option value="3bedroom">Every Other Week</option>
  <option value="4bedroom">Once a Month</option>
</select> <br />
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:03:59.890

这段代码可以解决问题。您应该明确您的元素 ID，并尽可能使用 getElementById。

的HTML：

```
<form id="orderform" style="margin-left: 6cm;">
<input type="checkbox" id="cleaning" name="cleaning" value="yes" onclick="javascript:houseclean();"/> Home cleaning <br />
Service: <select name="rooms" id="rooms" disabled >
  <option value="1bedroom">One Bedroom Apt</option>
  <option value="2bedroom">Two Bedroom Apt</option>
  <option value="3bedroom">Three Bedroom Townhome or SF Home</option>
  <option value="4bedroom">Four Bedroom Home</option>
  <option value="5bedroom">Five Bedroom Home</option>
  <option value="6bedroom">Six Bedroom Home</option>
</select> <br />
Date / Time: <input type="text" id="datetime" name="datetime" disabled /><br />
How often would you like a cleaning?: <select id="howoften" name="howoften" disabled>
  <option value="once">One Time Only</option>
  <option value="2bedroom">Every Week</option>
  <option value="3bedroom">Every Other Week</option>
  <option value="4bedroom">Once a Month</option>
</select> <br />
</form>​ 
```

和javascript：

```
function houseclean()
{
if (document.getElementById('cleaning').checked == true)
  {
  document.getElementById('rooms').removeAttribute('disabled');
  document.getElementById('datetime').removeAttribute('disabled');
  document.getElementById('howoften').removeAttribute('disabled');
  }
else
  {
  document.getElementById('rooms').setAttribute('disabled','disabled');
  document.getElementById('datetime').setAttribute('disabled','disabled');
  document.getElementById('howoften').setAttribute('disabled','disabled');
  }
} 
```

JSFiddle 示例：http: [//jsfiddle.net/HQQ4n/10/](http://jsfiddle.net/HQQ4n/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:04:57.550

我让你的代码工作了。我将`id`属性添加到表单元素中，并且曾经`document.getElementById`是安全的。

JFiddle 示例：http: [//jsfiddle.net/vxRjw/1/](http://jsfiddle.net/vxRjw/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T05:09:10.370

不是超级健壮，而是动态jquery解决方案......

```
$("#mycheckbox").click(function() {
  enableFormElements("#myform", $(this).attr('checked'));
});

function enableFormElements(form, enable) {
        var fields = ["checkbox","textarea","select"];
        var selector = form+" input";
        $.each(fields, function(i,e) { selector += ","+form+" "+e; });
        $(selector).each(function(idx) {
            if (enable) {
                $(this).removeAttr("disabled");
                $(this).removeAttr("readonly");
            } else {
                $(this).attr("disabled","disabled");
                $(this).attr("readonly","readonly");
            }
            if ($(this).is("select") || $(this).is("textarea")) {
                var id = $(this).attr("id");
                var txt_equiv = id+"_text";
                var val = $(this).find("option[value='"+$(this).val()+"']").text();
                // dynamically add the span to this element...so you can switch back and forth...
                if ($(this).parent().find("span").length == 0) {
                    $(this).parent().append("<span class='record_display_text' id='"+txt_equiv+"'>"+val+"</span>");
                }
            }
            if ($("#"+txt_equiv).length != 0) {
                if (enable) {
                    $("#"+id).show();
                    $("#"+txt_equiv).hide();
                } else {
                    $("#"+txt_equiv).show();
                    $("#"+id).hide();
                }
            }
        });
} 
```

该函数基本上查找在提供的元素内找到的所有输入、选择、文本区域，并禁用或启用每一个。如果使用 JQuery 1.9，您可能希望将这些更改为 prop 设置，但我发现并非所有浏览器都始终使用该设置。（嘘）。在 textareas 或 selects 的情况下，它实际上创建了一个相关的跨度，其 id 与输入匹配，除了后面的“_text”。如果您的页面上有其他可能发生冲突的 ID，您可能需要对其进行编辑...但是将其放置在适当的位置允许代码稍后隐藏/显示文本或实际的选择/文本区域，具体取决于您是否要启用所有内容或禁用。同样，并非在所有情况下都经过测试，但可以根据您的目的随意复制和编辑......

哦，并确保所有选择或 textarea 都是其父级的唯一子项...如果必须的话，请包装在一个跨度中，因为它会在同一个父级中动态添加相关跨度...所以如果选择或 textarea 不是t 包裹在父级中（如 span、div 或 td 或其他东西），那么它可能会将生成的文本 span 随机扔到某个地方。:P

然后你可以添加一些 CSS 使表单元素看起来更像你的普通页面或标准跨度元素......

```
 input[readonly],
    select[readonly],
    textarea[readonly] {
      cursor: default;
    }

    input[disabled] {
        background-color:#F0F0F0;
        border:none;
        -moz-box-shadow: none;
        -webkit-box-shadow:none;
        box-shadow:none;
        padding: 0;
    } 
```

您可能想要更改背景颜色以匹配您的页面颜色......并且“光标：默认”一个是如果引导推特正在添加烦人的“受限”光标或任何它超过禁用元素......但无论如何，这是我今晚想出的解决方案，它对我有用。:)

# geometry - 直通几何着色器

> ID：11584515
> 
> 赞同：1
> 
> 时间：2012-07-20T17:54:17.810
> 
> 标签：geometry, glsl, shader

我正在尝试构建一个简单的直通**几何着色器**，但我无法使其与

```
glDrawElements(GL_TRIANGLES, fooSize, GL_UNSIGNED_INT, NULL); 
```

但它确实适用于

```
glDrawArrays(GL_TRIANGLES, 0, foo_INDEX);. 
```

几何着色器是..

```
#version 400
#extension GL_EXT_geometry_shader4 : enable

layout(triangles) in;
layout(triangle_strip, max_vertices = 3) out;

void main() {
  for(int i = 0; i <  gl_VerticesIn; i++) {
    gl_Position = gl_PositionIn[i];
    EmitVertex();
  }
  EndPrimitive();
} 
```

那么，有人知道为什么这个几何着色器适用于 drawArrays 而不适用于 drawElements 吗？请。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T18:58:23.417

您编写了一个非常混乱和令人困惑的几何着色器。

您的第一行表明您使用的是 GLSL 4.00 版。该语言将几何着色器作为核心功能；无需扩展。然后您的第二行启用 EXT_geometry_shader4*扩展*。

问题在于核心几何着色器和 EXT_geometry_shader4 是*非常不同的东西*。

例如，`gl_VerticesIn`核心几何着色器中没有。您获得的顶点数由您的`layout() in;`语句定义。您使用`triangles`了 ，所以答案是 3。您也可以使用 找到它`gl_in.length()`，其中`gl_in`是一个包含默认顶点输入值的接口块数组。同样，`gl_PositionIn`核心几何着色器中也不存在；你用`gl_in[index].gl_Position`.

所以你的几何着色器代码似乎是为 EXT_geometry_shader4 设计的......除了这些行：

```
layout(triangles) in;
layout(triangle_strip, max_vertices = 3) out; 
```

这些是纯核心几何着色器；在 EXT_geometry_shader4 中，这些参数是在链接时在 OpenGL 代码中指定的，而不是在着色器本身中。

因此，您已经彻底混淆了编译器，其中一半使用 EXT 版本，一半使用核心版本。

您正在尝试做的正确核心版本是：

```
#version 400

layout(triangles) in;
layout(triangle_strip, max_vertices = 3) out;

void main() {
  for(int i = 0; i < 3; i++) { // You used triangles, so it's always 3
    gl_Position = gl_in[i].gl_Position;
    EmitVertex();
  }
  EndPrimitive();
} 
```

我不知道这是否会解决您的问题，但这些*是*您的着色器的问题。

# android - AutoCompleteTextView 中的自定义过滤不起作用

> ID：11584518
> 
> 赞同：1
> 
> 时间：2012-07-20T17:54:51.040
> 
> 标签：android

我正在扩展阵列适配器，但我仍然得到旧的结果，你能告诉我有什么问题吗？

```
public class Adaptor extends ArrayAdapter<String> implements Filterable{

        private ArrayList<String> items;

        public Adaptor(Context context, int textViewResourceId, String[] objects) {
            super(context, textViewResourceId, objects);
            items = new ArrayList<String>();
            for (int i = 0; i < objects.length ; i++)
                items.add(objects[i]);

        }

        @Override
        public int getCount() {
            return items.size();
        }

        @Override
        public String getItem(int position) {
            return items.get(position);
        }

        @Override
        public Filter getFilter() {
            Filter myFilter = new Filter(){

                @Override
                protected FilterResults performFiltering(CharSequence arg0) {
                    FilterResults rezultate = new FilterResults();
                    ArrayList<String> chestii = new ArrayList<String>();
                    for (int i = 0; i < items.size() ; i++)
                    {
                        String tmp = items.get(i).toUpperCase();
                        if (tmp.startsWith(arg0.toString().toUpperCase()))
                                chestii.add(items.get(i));

                    }
                    rezultate.count = chestii.size();
                    rezultate.values = chestii;
                    return rezultate;
                }

                @Override
                protected void publishResults(CharSequence constraint,
                        FilterResults results) {
                    if (results != null && results.count > 0)
                    {
                        notifyDataSetChanged();
                    }
                    else notifyDataSetInvalidated();

                }

            };
            return myFilter;
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T17:57:45.763

您的列表包含“项目”中的项目并且您不修改其中的项目，您必须从“项目”中删除位置，然后调用 notifyDataSetChange，以恢复最近您必须保存以前项目的所有项目

这很好用：

```
/**
 * Adapter wrapper to represent list of dialogs
 * @author Ryazantsev Dmitry
 * @email dilix90@gmail.com 2012
 */
public class FriendsAdapter extends ArrayAdapter<User>
{
    private final LayoutInflater inflater;
    private final ImageLoader il;
    private Context parentContext;
    private List<User> mData;
    private List<User> mOriginalData;
    public SimpleImageLoader sil;

    @Override
    public void add(User object)
    {
        if (mOriginalData != null)
            mOriginalData.add(object);
        else
            mData.add(object);
    }

    @Override
    public void remove(User object)
    {
        if (mOriginalData != null)
            mOriginalData.remove(object);
        else
            mData.remove(object);
    }

    @Override
    public int getCount()
    {
        return mData.size();
    }

    @Override
    public User getItem(int position)
    {
        return mData.get(position);
    }

    @Override
    public int getPosition(User item)
    {
        return mData.indexOf(item);
    }

    public FriendsAdapter(Context context, int textViewResourceId, List<User> objects)
    {
        super(context, textViewResourceId, objects);
        Log.v("refresh", context + " " + textViewResourceId + " " + objects);
        parentContext = context;
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        il = new ImageLoader(context);
        mData = objects;
        sil = new SimpleImageLoader(context, true, 64);
        sil.setOnUiThread(false);
    }

    /**
     * We have a custom view and need to organize it
     */
    @Override
    public View getView(final int position, View convertView, final ViewGroup parent)
    {

        ViewHolder holder;
        if (convertView == null)
        {
            convertView = inflater.inflate(R.layout.friends_list_row, null);
            holder = new ViewHolder();
            holder.name = (TextView) convertView.findViewById(R.id.friendName);
            holder.root = convertView.findViewById(R.id.root);
            holder.photo = (ImageView) convertView.findViewById(R.id.friendPhoto);
            holder.online = (ImageView) convertView.findViewById(R.id.online);
            convertView.setTag(holder);
        }
        else
            holder = (ViewHolder) convertView.getTag();

        User user = getItem(position);
        holder.online.setVisibility(user.isOnline() > 0 ? View.VISIBLE : View.GONE);
        if (user != null)
        {
            holder.name.setText(user.getFIO());
            holder.photo.setTag(user.getPhotoUrl());
            if (user.getPhotoBitmap() != null)
                holder.photo.setImageBitmap(user.getPhotoBitmap());
            else
            {
                holder.photo.setImageResource(R.drawable.contact_nophoto);
                sil.displayImageUserAttach(holder.photo, user.getPhotoUrl(), user, null, false, null);
            }
        }

        // parent.setVisibility(position % 2 == 0?View.GONE:View.VISIBLE);
        return convertView;
    }

    private static class ViewHolder
    {
        public TextView name;
        public ImageView photo;
        public View root;
        public View online;
    }

    @Override
    public Filter getFilter()
    {
        return new Filter()
        {
            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results)
            {
                Log.v("filter", "filter finished");
                mData = (List<User>) results.values;
                if (results.count > 0)
                {
                    notifyDataSetChanged();
                }
                else
                {
                    notifyDataSetInvalidated();
                }
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint)
            {
                Log.v("filter", "filter perform");
                if (mOriginalData == null)
                    mOriginalData = new ArrayList<User>(mData);
                List<User> result;
                FilterResults r = new FilterResults();
                if (constraint == null || constraint.length() <= 0)
                    result = new ArrayList<User>(mOriginalData);
                else
                {
                    result = new ArrayList<User>();
                    for (int i = 0; i < mOriginalData.size(); i++)
                        if (constraint.length() > 0
                                && mOriginalData.get(i).getFIO().toLowerCase()
                                        .contains(constraint.toString().toLowerCase()))
                            result.add(mOriginalData.get(i));
                }
                r.values = result;
                r.count = result.size();
                return r;
            }
        };
    }

} 
```

# iphone - NSDictionary 不会写入 plist

> ID：11584521
> 
> 赞同：1
> 
> 时间：2012-07-20T17:55:14.593
> 
> 标签：iphone, objective-c, plist, nsdictionary

我正在尝试将具有复杂结构的 NSDictionary 写入 plist 以在 iPhone 应用程序中使用。但是，该文件似乎根本没有写入，我不知道为什么。

结构应该是这样的：

```
Level             Dict
  Roads           Array
    Road1         Array
      Vertex1     Dict
        x         Number
        y         Number
      Vertex2     Dict
        ... 
```

这就是我的代码的样子：

```
NSMutableDictionary *levels = [[NSMutableDictionary alloc] init];
NSMutableArray *roads = [[NSMutableArray alloc] init];
for(ChainLinkRoad *r in data.roads){
    NSMutableArray *road = [[NSMutableArray alloc] init];
    for(ChainPoint *p in r.v){
        NSNumber *x = [NSNumber numberWithFloat: p.x];
        NSNumber *y = [NSNumber numberWithFloat: p.y];
        NSMutableDictionary *vertex = [[NSMutableDictionary alloc] init];
        [vertex setObject:x forKey:@"x"];
        [vertex setObject:y forKey:@"y"];
        [road addObject:vertex];
    }
    [roads addObject:road];
}
[levels setObject:roads forKey:@"Roads"];
bool b = [levels writeToFile:@"test.plist" atomically:YES];
//returns true 
```

我尝试将可变对象转换为不可变对象，但没有奏效。我能够从最终的 NSDictionary（级别）访问数据就好了。

编辑：我应该补充一点，这个 plist 不是在 iphone 游戏中实际使用的。在设计关卡时供个人使用。该代码不会在最终版本中存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-12T10:46:26.793

一个常见的问题是，字典对字符串转换无效，如无效的 UTF-8 字符。在控制台上输出以检查它。

如果这对您没有帮助，请仅保存一些元素以查看发生了什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T19:00:24.923

我昨天刚刚发布了同样问题的答案。与其尝试保存类的单个数据元素，不如使用 NSKeyArchiver 和 NSCoding 保存整个对象。单击链接以获取完整说明。

[如何将类对象数组保存到 Plist（Iphone 开发）](https://stackoverflow.com/questions/7670586/how-can-i-save-array-of-class-objects-in-to-a-plistiphone-development/11570021#11570021)

# android - 无法读取片段类中的 EditText

> ID：11584522
> 
> 赞同：0
> 
> 时间：2012-07-20T17:55:19.043
> 
> 标签：android, dialog, insert, fragment

我有两个选项卡，每个选项卡都是一个片段。在其中一个片段（Afragment.claas）中，我有一个插入一些数据的对话框，我想将它们保存在数据库中。当我填写文本字段并按 OK 时，应用程序停止。

我认为当我初始化edittext时有问题。

```
name = (EditText) activity.findViewById(R.id.etProviderName); 
```

上面的语句返回 null

这是我的代码：

```
import android.app.Activity;
import android.app.AlertDialog;
import android.app.ListFragment;
import android.content.DialogInterface;
import android.database.Cursor;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.CursorAdapter;
import android.widget.EditText;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class Afragment extends ListFragment {

    DBAdapter db;
    Activity activity;
    private static final String fields[] = { "provider._providerName", "_providerMobile" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        initAdapter();

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_add:
            add();
            return (true);

        case R.id.menu_reset:
            initAdapter();
            return (true);

        case R.id.menu_info:
            Toast.makeText(activity, "Developed By Omar Al-Shammary", Toast.LENGTH_LONG)
                    .show();
            return (true);
        }

        return (super.onOptionsItemSelected(item));
    }

    private void add() {
        // TODO Auto-generated method stub
        System.out.println("insider Add Method");
        final View addView = activity.getLayoutInflater().inflate(R.layout.add_provider, null);

        new AlertDialog.Builder(activity).setTitle("Add a Provider").setView(addView)
                .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        System.out.println("Befor calling insert in providers");
                        insertInProviders();
                        System.out.println("after calling insert in providers");
                    }
                }).setNegativeButton("Cancel", null).show();

        initAdapter();

    }

    private void initAdapter() {
        activity = getActivity();
        db = new DBAdapter(activity);
        fillTheList();
    }

    public void fillTheList()
    {
        db.open();
        Cursor data = db.getAllProviders();
        CursorAdapter dataSource = new SimpleCursorAdapter(activity,
            R.layout.row, data, fields,
            new int[] { R.id.first, R.id.last });

        setListAdapter(dataSource);
        db.close();

        setListAdapter(dataSource);
    }

    public void insertInProviders()
    {
        EditText name,location,number;
        name = (EditText) activity.findViewById(R.id.etProviderName);
        location = (EditText) activity.findViewById(R.id.etProviderName);
        number = (EditText) activity.findViewById(R.id.etProviderName);
        if(name == null)
            System.out.println("EditeText name is null");
        String provName = name.getText().toString();
        if(location == null)
            System.out.println("location is null");
        String provLocation = location.getText().toString();
        String provNumber = number.getText().toString();

        System.out.println("Before Open");

        db.open();
        System.out.println("Before DB.Insert");
        db.insertProvider(provName, provLocation, provNumber);
        System.out.println("Before Close");
        db.close();
    }
} 
```

### add_provider.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvProviderName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Name" />

    <EditText
        android:id="@+id/etProviderName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

    <TextView
        android:id="@+id/tvProvLocation"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Location" />

    <EditText
        android:id="@+id/etProvLocation"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPersonName" />

    <TextView
        android:id="@+id/tvProvNumber"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Number" />

    <EditText
        android:id="@+id/etProvNumber"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="number" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:09:38.437

这是我用于在 Fragments 中声明按钮的代码 - 也许它可以帮助你。

我要做的是访问膨胀的布局，然后你应该能够访问它下面的项目。让我知道这是否有意义。

```
LinearLayout theLayout = (LinearLayout)inflater.inflate(R.layout.tab_frag1_layout, container, false);
// Register for the Button.OnClick event
Button b = (Button)theLayout.findViewById(R.id.frag1_button);
        @Override
        public void onClick(View v) {
            Toast.makeText(Tab1Fragment.this.getActivity(), "OnClickMe button clicked", Toast.LENGTH_LONG).show();

        }
    });
    return theLayout; 
```

所以也许你应该试试这个，因为你将你的视图膨胀为“addView”

```
name = (EditText) addView.findViewById(R.id.etProviderName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T22:54:12.257

`findViewById`不应由活动调用，而应由封闭视图调用。你应该有类似的东西：

在课堂里

```
View aView; 
```

在方法中：

```
LayoutInflater inflater = getActivity().getLayoutInflater();
aView = inflater.inflate(R.layout.add_provider, null);

...

EditText name = (EditText) aView.findViewById(R.id.etProviderName); 
```

我希望它有所帮助。

# sql-server - 如何获取 SQL Server 2000 表中的 ROWGUIDCOL？

> ID：11584525
> 
> 赞同：2
> 
> 时间：2012-07-20T17:55:26.140
> 
> 标签：sql-server, sql-server-2000, uniqueidentifier

如何确定`ROWGUIDCOL`SQL Server 2000 表中列的名称？

我尝试浏览[`syscolumns`](http://msdn.microsoft.com/en-us/library/aa260398.aspx)，例如：

```
SELECT *
FROM syscolumns
WHERE id = OBJECT_ID('Currencies') 
```

但是那里什么都没有，或者在[MSDN 页面](http://msdn.microsoft.com/en-us/library/aa260398.aspx)上看起来像`rowguidcol`.

* * *

## SQL Server 2005 中的简单操作

在 SQL Server 2005 中，您只需查询`sys.columns`，例如：

```
SELECT *
FROM sys.columns
WHERE object_id = OBJECT_ID('Currencies')
AND is_rowguidcol = 1 
```

轻松愉快。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T17:59:59.887

您使用[COLUMNPROPERTY](http://msdn.microsoft.com/en-us/library/aa226011%28v=SQL.80%29.aspx)：

```
SELECT COLUMNPROPERTY(id, name, 'IsRowGuidCol'), * FROM syscolumns ... ; 
```

以原始问题的格式：

```
SELECT *
FROM syscolumns
WHERE id = OBJECT_ID('dbo.Currencies')
AND COLUMNPROPERTY(id, name, 'IsRowGuidCol') = 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:00:37.600

对于初学者，如果您不知道 rowguid 列并且想要选择它（但除了选择它之外不需要知道它的名称），您可以这样做：

```
SELECT $rowguid FROM YourTable; 
```

如果表没有 rowguid 列：

*   在 SQL 2000 中，您将得到一个名称`rowguid`为 value的列`0.00`。
*   在 SQL 2005 及更高版本中，您将收到一个错误，`Invalid column name '$rowguid'`.

为了完整起见，请注意在 SQL 2005 及更高版本中，您还可以`$identity`在不知道其名称的情况下获取表的标识列。在 SQL 2000 中，你得到`Incorrect syntax near the keyword 'identity'.`

# python - 迭代地将特定行从 CSV 文件复制到新文件

> ID：11584528
> 
> 赞同：3
> 
> 时间：2012-07-20T17:55:32.737
> 
> 标签：python

我有一个大的制表符分隔的 csv 文件，格式如下：

```
#mirbase_acc    mirna_name  gene_id gene_symbol transcript_id   ext_transcript_id   mirna_alignment gene_alignment  mirna_start mirna_end   gene_start  gene_end    genome_coordinates  conservation    align_score seed_cat    energy  mirsvr_score 
```

我想做的是遍历行并根据“gene_id”字段中的数据（字符串）选择项目，然后将这些行复制到一个新文件中。

我是一个蟒蛇菜鸟，并认为这是弄湿我的脚的好方法，但它比看起来更难！我一直在尝试使用 csv 包来操作文件，使用 dictreader 和 dictwriter 读写基本的东西。如果有人能帮我想出一个迭代搜索方面的模板，我将不胜感激。到目前为止，我有：

```
import csv

f = open("C:\Documents and Settings\Administrator\Desktop\miRNA Scripting\mirna_predictions_short.txt", "r")
reader = csv.DictReader(f, delimiter='\t')
writer = open("output.txt",'wb')
writer = csv.writer(writer, delimiter='\t') 
```

然后是迭代位，bleurgh：

```
for row in reader:
    if reader.gene_id == str(CG11710):
        writer.writerow 
```

这显然行不通。关于更好地构建这个结构的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:05:06.690

您快到了！代码几乎是正确的:)

* * *

访问 dicts 是这样的：

```
some_dict['some_key'] 
```

代替：

```
some_object.some_attribute 
```

* * *

创建字符串不是用引号来完成的，`str(...)`而是用引号来完成的`CG11710`

* * *

在你的情况下：

```
for row in reader:
    if row['gene_id'] == 'CG11710':
        writer.writerow(row) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:06:37.673

python 中的字典的寻址方式类似于字典['key']。所以对你来说它是 reader['gene_id']。字符串也用引号“text”声明，不像str（text）。str(text) 将尝试将存储在变量 text 中的任何内容转换为字符串，这不是我认为您想要的。writer.writerow 也是一个函数，函数接受参数，所以你需要做 writer.writerow(row)。

# memcached - 如何基于分布式哈希表（如 memcache）制作 APC 缓存？

> ID：11584538
> 
> 赞同：0
> 
> 时间：2012-07-20T17:56:32.223
> 
> 标签：memcached, hashtable, apc

我读过[一篇文章`Distributed Hash Tables`](http://en.wikipedia.org/wiki/Distributed_hash_table)，似乎可以用 APC 实现像 memcache 这样的东西。如您所知，如果我们从单个服务器获取密钥，APC 比 memcache 快得多。因此，如果我们使 APC 分布式，我们将同时拥有性能和分布。我需要一些想法来开始它。熟悉哈希表的人可以解释一下如何做到这一点吗？如何让 APC 像 memcache 一样？
如果你知道一些事情`keyspace partitioning`，`Overlay network`那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:37:57.657

尽管从表面上看，这两种软件都提供了可比的服务，但它们的基础完全不同，这就解释了性能上的巨大差异。

APC 基本上是一个允许您将对象（无论是用户对象还是解析的操作码块）存储在共享内存中的系统。在我知道的所有系统中，共享内存在获得指向它的指针后与本地 RAM 一样快。

所以，简而言之，APC 必须做的就是写或读一个对象：

*   请求 shm 访问并获取指向它的指针
*   计算 shm 中的对象偏移量和大小
*   memcpy 将该内存区域放入缓冲区，反之亦然
*   完毕

很简单，考虑到现在的内存带宽是每秒 10 GB，很快。

由于它在 memcache 场景中的分布式特性，需要做更多工作：

*   客户端对请求进行编码和传输
*   服务器接收并解码请求
*   服务器计算 memcached 内存中的对象偏移量和大小
*   服务器 memcpy 将该内存区域放入缓冲区，反之亦然
*   服务器发送缓冲区
*   客户端接收并解码缓冲区

现在，如果我们要分发 APC，客户端和服务器将需要相互通信。突然之间，我们发现自己处于一个场景中，除了一些不太重要的细节外，它与 memcache 使用的相同。并且所有昂贵的操作将再次变得必要，即所有复制，通过包含的网络堆栈发送。

这也解释了为什么即使在 localhost 上运行 memcache 实例，节点之间没有非常慢的千兆以太网，在使分布式系统工作时需要做的事情有相当大的开销。

这就是为什么我确信您在这里寻找错误的嫌疑人，使 APC 分布式并且它将属于相同的性能/吞吐量类别。

# java - 导入android包无法解决

> ID：11584539
> 
> 赞同：32
> 
> 时间：2012-07-20T17:56:37.900
> 
> 标签：java, android, eclipse

我在 Eclipse 中构建的 android 应用程序突然无法构建并出现几十个错误。最明显的错误表明无法解析所有 android 导入。

```
import android.os.Bundle;
import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.media.AudioManager;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView; 
```

所有这些都被标记为无法解决。我尝试删除并重新添加 JRE 系统库。我试过清理和重建。我已经尝试过“修复项目设置...”的“快速修复”选项，但这只是响应一个对话框，上面写着...

"**没有找到修复无法解析的'android.app.Bundle'引用的建议。单击此处手动配置项目'Silent Mode Toggle'的构建路径。"**

我是 Android 开发的新手，这让我完全被难住了。

提前感谢您提供的任何帮助。

富有的

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-20T18:03:32.383

似乎您的`eclipse-workspace`（或至少您的`Project`）以某种方式损坏了。

你`android-sdk/Project`最近搬家了吗？如果它不再是 Android 项目，请尝试查看`Preferences->Android`有效的`android sdk-location`.

如果这是正确的，请尝试打开一个完整的新工作区，并`File->import->Android Project`从现有源导入您的源。

如果这仍然没有帮助，请制作一个新的 android并从外部`Project`手动复制源代码。之后重新打开Eclipse，并制作一个`Project``Eclipse``Project->clean`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-20T18:47:20.573

其他人都说了什么。

具体来说，我建议你去`Project > Properties > Java Build Path > Libraries`并确保你有一份`android.jar`引用的副本。（如果您正在导入一个项目，有时您可以获得两个。）并且它的路径是正确的。

有时您可以让系统为您解决此问题，方法是单击 中的不同目标 SDK `Project > Properties > Android`，然后恢复您的原始选择。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-09-11T09:12:38.073

右键单击项目->属性->android->选择目标名称为“Android 4.4.2”-单击确定

> 由于 DocumentsContract 在 API 级别 19 中添加

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-22T20:39:46.303

在接受 Java 更新后，我遇到了同样的问题——构建错误的分数和 android 导入无法识别。在检查 Project=>Properties 中的构建路径时，我发现 Android 4.3 的复选框以某种方式被清除了。检查它解决了所有导入错误，我什至不必重新启动 IDE 或运行干净的项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T18:03:30.023

在 Eclipse 中试试这个：`Window - Preferences - Android`- SDK 位置和设置 SDK 路径

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-29T12:03:24.283

`import android packages cannot be resolved`当您使用某个库并且该库与您的应用程序所在的路径不同时，或者如果您正在导入库而不将库复制到工作区时，也会发生这种情况

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-23T03:25:54.580

```
RightClick on the Project > Properties > Android > Fix project properties 
```

这为我解决了。简单的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-27T17:57:54.570

可能是您正在使用此检查：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.KITKAT) {
} 
```

要解决此问题，您需要导入`android.provider.DocumentsContract`类。

要解决此问题，您需要将构建 SDK 版本设置为 19 (4.4) 或更高版本，以便在编译时使用 API 级别 19 符号。

首先，如果您还没有 API 19，请使用 SDK Manager 下载 API 19。然后，将您的项目配置为使用 API 19：

*   在 Android Studio 中：文件 -> 项目结构 -> 常规设置 -> 项目 SDK。
*   在 Eclipse ADT 中：项目属性 -> Android -> 项目构建目标

[我从这里](https://stackoverflow.com/a/20375277/3073945)找到了这个答案

谢谢 。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-10T12:32:35.140

导入android包，需要eclipse的ADT插件，之后才可以在java构建路径中添加。

转到您的 Eclipse 市场并下载 Android AD 扩展程序。

# javascript - 为什么与相同的字符串值相比，innerHTML 不返回 true？

> ID：11584542
> 
> 赞同：1
> 
> 时间：2012-07-20T17:56:44.657
> 
> 标签：javascript, html, innerhtml

我的 html 页面上有两个表，它们的数据完全相同，但可能需要突出显示的差异很小。我和使用下面的 Javascript 但似乎 innerHTML 不能按预期工作-

```
function CompareTables()
{
var table1 = document.getElementById("table1")
var table2 = document.getElementById("table2")

for(var i=1; i < table1.rows.length; i++)
{
    for(var j=1; j < table2.rows.length; j++){
        var tab1Val = table1.rows[i].cells[0].innerHTML;
        var tab2Val = table2.rows[j].cells[0].innerHTML;
        alert(tab1Val.toUpperCase()+"----"+tab2Val.toUpperCase());

        var changes =RowExists(table2,tab1Val);

        if(!changes[0])
        {
        table1.rows[i].style.backgroundColor = "red";
        instHasChange = true;
        }
}
 function RowExists(table,columnValue)
{
 var hasColumnOrChange = new Array(2);
 hasColumnOrChange[0] = false;
  for(var i=1; i < table.rows.length; i++)
 {

 if(table.rows[i].cells[0].innerHTML == columnValue) /*** why these two does not match**/
 {
   hasColumnOrChange[0] = true;
  }
 return hasColumnOrChange;
}
} 
```

请在这里提出什么问题。( `table.rows[i].cells[0].innerHTML == columnValue`) 永远不会返回 true，即使所有值都相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:02:37.890

大多数浏览器都有错误，`innerHTML`不推荐使用它。不同的浏览器会做不同的事情，通常会混淆空格、添加/删除引号和/或更改属性的顺序。

长话短说，永远不要依赖`innerHTML`。

取而代之的是，我建议使用一些 DOM 遍历函数，例如[.firstChild](https://developer.mozilla.org/en/DOM/element.firstChild)和[.nodeValue](https://developer.mozilla.org/en/DOM/Node.nodeValue)。请注意，这些对空白很敏感，如果您的 TD 中除了文本之外还有其他内容，则必须对其进行调整。

[http://jsfiddle.net/tdN5L/](http://jsfiddle.net/tdN5L/)

```
if (table.rows[i].cells[0].firstChild.nodeValue === columnValue) 
```

正如 Micah 的解决方案所指出的，另一种选择是使用 jQuery 等库，它可以让您忽略大部分浏览器问题和 DOM 操作问题。不过，我不建议仅仅为这个问题引入 jQuery 的开销。

有关的：

[Firefox 内部 HTML 错误？](https://stackoverflow.com/questions/2940826/firefox-innerhtml-bug)

[innerHTML 错误 IE8](https://stackoverflow.com/questions/2896208/innerhtml-bug-ie8)

[innerHTML 删除 Internet Explorer 中的属性引号](https://stackoverflow.com/questions/1231770/innerhtml-removes-attribute-quotes-in-internet-explorer?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:01:12.150

尝试使用[Jquery 的方法 .text](http://api.jquery.com/text/)

取决于浏览器（Firefox 和 Chrome 的）innerHTML 不起作用

JQuery 会为您解决这个问题。

# python - python 2.6 TkInter组合框选择多次触发

> ID：11584543
> 
> 赞同：1
> 
> 时间：2012-07-20T17:56:45.577
> 
> 标签：python, combobox, tkinter

我在显示管理器对象中有一个组合框：

```
self.recentcmd_labeltext = StringVar()
self.recentcmd_combobox = ComboBox(self.frame, dropdown=1, editable=1, variable=self.recentcmd_labeltext)
self.recentcmd_combobox['command'] = self.cb_enter_command
self.recentcmd_combobox.grid(row=4, column=0, columnspan=2, sticky=N+S+W+E, pady=5) 
```

我的组合框回调如下所示：

```
def cb_enter_command(self, event=None):
    self.controller.apply_command(self.recentcmd_labeltext.get()) 
```

我的问题是当用户用鼠标从组合框中选择一个项目时 self.controller.apply_command() 被调用两次；但只有一次当用户将项目键入组合框并按 Enter 键时。我不清楚为什么会这样。我尝试使用没有指向 StringVar() 链接的小部件 - 只需通过组合框上的选择属性访问字符串，但这没有区别。有人可以为我澄清吗？谢谢。

# android - Android：如何创建详细警报对话框

> ID：11584544
> 
> 赞同：2
> 
> 时间：2012-07-20T17:56:55.923
> 
> 标签：android, android-alertdialog

我一直在玩警报对话框。我想显示一个对话框，显示有关列表视图中列表项的特定信息。就像 android 的文件管理器的详细对话框一样。

图片：[https ://dl.dropbox.com/u/20856352/detailsbox.jpg](https://dl.dropbox.com/u/20856352/detailsbox.jpg)

此详细信息对话框的有趣之处在于它显示的列表项与首选项屏幕中的首选项非常相似。可以单击它们，它们显示了一个布局非常漂亮的两行项目列表项。

我需要创建一个类似的对话框，但我不知道如何做到这一点。我玩了一会儿。首选项 XML 不能用作 alertdialog 的布局。而且我无法开发出类似于上图的布局。需要帮助/指导如何实现这一目标。

法拉兹哈尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:04:16.150

您可能不想使用自定义对话框，因为很难复制 AlertDialog 的外观。AlertDialog 可以使用 AlertDialog.setListAdapter 显示项目列表。通过使用 ListAdapter 的自定义实现，您可以自定义项目列表以显示每个项目的两行文本。随附的屏幕截图由以下代码和 xml 生成。

![在此处输入图像描述](../Images/856ad227ddf25d7057a6ffbdf874d161.png)

```
public class Temp extends Activity
{
    private String[] listItemsFirstRow = {"item 1", "item 2", "item 3"};
    private String[] listItemsSecondRow = {"item 1", "item 2", "item 3"};

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setAdapter(new MyAdapter(), null);
        builder.setTitle("Title");
        builder.setPositiveButton(android.R.string.ok, new OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
            }
        });

        builder.show();
    }

    class MyAdapter extends BaseAdapter
    {

        @Override
        public int getCount() 
        {
            return listItemsFirstRow.length;
        }

        @Override
        public Object getItem(int position) 
        {
            //this isn't great
            return listItemsFirstRow[position];
        }

        @Override
        public long getItemId(int position) 
        {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) 
        {
            if(convertView == null)
            {
                convertView = getLayoutInflater().inflate(R.layout.main, null);
            }

            ((TextView)convertView.findViewById(R.id.text1)).setText( listItemsFirstRow[position]);
            ((TextView)convertView.findViewById(R.id.text2)).setText( listItemsSecondRow[position]);

            return convertView;
        }

    }
} 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:minHeight=![enter image description here][2]"?android:attr/listPreferredItemHeight"
    android:orientation="vertical"
    android:gravity="center_vertical"
    android:paddingLeft="15dip"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <TextView
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
    <TextView
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="?android:attr/textColorSecondary" 
        android:id="@+id/text2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:18:30.563

我的建议是使用 Activity 作为对话框。这种方式很容易创建自定义对话框。这是一个我认为你可以建立的小例子。

```
**Activity**

public class CustomDialogEx extends Activity implements OnClickListener {

private Button button;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_layout);
    button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(this);
}

@Override
public void onClick(View v) {  // pass your string data via this intent to the custom view
    // show the custom dialog
    Intent i = new Intent();
    // i.putExtra(<your key/value pairs here>
    i.setClass(this, DialogActivity.class);
    startActivity(i);   
}
}

****************************************************************************

**Custom Dialog**

// The Activity will serve as the Dialog

public class DialogActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.your_dialog_layout);
    Intent i = new Intent();
    Bundle b = getIntent().getExtras();
    b.getString(<your key>)
}
}

*****************************************************************************

**AndroidManifest**

<activity
    android:name="DialogActivity"
    android:configChanges="keyboardHidden|orientation"
    android:theme="@android:style/Theme.Dialog" >
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:07:49.257

```
this may also help you

public class ShareDialog extends Dialog implements android.view.View.OnClickListener{

    Context  mcontContext;
    Button  btnok;
    Listview lstview;

    public ShareDialog(Context context) {
        super(context);     
        mcontContext= context;
                //pls replace with your dialog.xml file
        setContentView(R.layout.sharedialog);       
        bindComponent();
        addListener();      
    }
    private void bindComponent() {
        // TODO Auto-generated method stub
        lstview=(Listview) findViewById(R.id.lstdetail);
        btnok=(Button) findViewById(R.id.btnok);

             //bind here listview with your adpter
    }

    private void addListener()
    {

        btnshareviwifi.setOnClickListener(this);        
    }

    @Override
    public void onClick(View v) {

        switch (v.getId()) {
        case R.id.btnok:

                  dismiss();     

            break;

        default:
            break;
        }

    }

}

and where you want to show

ShareDialog  shobje=new ShareDialog  (context);

shobje.show() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T18:02:08.597

刚刚使您的 xml 文件与常规屏幕/页面相同

然后将此代码放在您的 onCreate()

```
AlertDialog.Builder builder;

        LayoutInflater inflater = getLayoutInflater();
        View layout = inflater.inflate(R.layout.toast_info,
                (ViewGroup) findViewById(R.id.toast_layout_root));

        builder = new AlertDialog.Builder(this);
        builder.setView(layout);
        alertDialog = builder.create(); 
```

其中 r.layout.toast_info 是您的 xml 文件，而 r.id.toast_layout_root 是您的根 xml id（例如 '<'linearlayout android:id="+@id...."'>' ）

当你想展示它时，只需写下这一行

> alertDialog.show();

# php - 为什么我的 PHPUnit 测试不起作用？

> ID：11584546
> 
> 赞同：1
> 
> 时间：2012-07-20T17:57:07.233
> 
> 标签：php, selenium, phpunit, qa

第一次使用 PHPUnit 和 Selenium。为 Firefox 安装了 Selenium IDE 插件，使用记录器创建了一些简单的测试。IDE 默认将测试格式化为 HTML 表格，因此我将 PHP 格式化程序插件安装到 Selenium 插件中，并且能够将测试导出为 PHPUnit 格式。接下来在 Windows 7 上安装 PHPUnit。还安装了 PHPUnit 的 Selenium 插件。

然后使用以下命令运行我的测试：

```
phpunit Mytests.php 
```

输出是：

```
Time: 0 seconds, Memory: 2.7Mb
OK (0 tests, 0 assertions) 
```

太好了，没有错误，但看起来测试也没有运行。怎么了？是我的测试文件的内容吗：

```
<?php

require_once 'PEAR/PHPUnit/Extensions/SeleniumTestCase.php';

class Mytests extends PHPUnit_Extensions_SeleniumTestCase
{
  protected function setUp()
  {
    $this->setBrowser("*chrome");
    $this->setBrowserUrl("http://www.foobar.com/");
  }

  public function related_videos()
  {
    // // make sure there are 4 related items
    $this->open("/");
    $this->click("xpath=//div[contains(@id, 'featured')]/article/div/a[contains(@class,'thumb')]");
    $this->waitForPageToLoad("30000");
    try {
        $this->assertEquals("4", $this->getXpathCount("//descendant-or-self::*[@id = 'related']/descendant::article"));
    } catch (PHPUnit_Framework_AssertionFailedError $e) {
        array_push($this->verificationErrors, $e->toString());
    }
  }

}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:04:10.373

Phpunit 正在测试用例实例上寻找以“ [**test**](https://phpunit.de/manual/current/en/writing-tests-for-phpunit.html) [”](https://phpunit.de/manual/current/en/writing-tests-for-phpunit.html)[开头的方法名称](https://phpunit.de/manual/current/en/writing-tests-for-phpunit.html)**，如果您将related_videos 方法重命名为test_related_videos，它应该会找到并运行它。**

# html - 需要有关 Google 图书查询参数的信息，例如 &dq 和 &q、&f、&redir_esc 等之间的区别

> ID：11584551
> 
> 赞同：1
> 
> 时间：2012-07-20T17:57:22.663
> 
> 标签：html, parameters, httpwebrequest

在提供“片段视图”（您可以在其中查看页面中的文本片段）以链接到由 表示的突出显示文本的书籍中`<search_string>`，我可以使用以下任何一种形式的 URL：

```
http://books.google.com/books?id=<book_id>&q=<search_string>&dq=<search_string>
http://books.google.com/books?id=<book_id>&q=<search_string>
http://books.google.com/books?id=<book_id>&dq=<search_string> 
```

在具有“预览”可用（您可以在其中查看整页）的书籍中，突出显示文本的链接添加到上述形式之一的 URL`&pg=<page_number>`之后。`&id=<book_id>`我发现这样的 URL 在它同时具有`&dq`和`&q`但仅与某些书籍一起查询`&dq`或仅`&q`不与某些书籍一起使用时总是有效的。

我还注意到，`&f=false`当您单击链接时，往往会自动附加到查询中。

这些参数`&q`、`&dq`和是`&f`什么`&redir_esc=y#v=onepage`意思？我在哪里可以找到这些信息以及有关如何将查询参数用于 Google 图书的一般信息？我已经搜索过，但找不到任何具有此特定信息的内容。

注意：不同的书籍使用不同的页码格式。根据我的经验，`<page number>`在提供“预览”的图书的 URL 中可以是以下形式之一：

*   `PAx`其中 x 是书中的实际页码。x 有时也是一个不是实际页码的数字，例如 x 是一个超过书页数的四位数字。
*   `PTx`其中 x 可能不是印刷图书中的实际页码，它可能不会显示在 Google 图书查看器的页面上。
*   `PRx`其中 x 是第一章之前的页码，例如书中的第 iii 页与`&pg=PR3`
*   `SLz-PAx`其中书页的格式`<section><page>`为 z 作为书中章节的索引号，x 是该章节中的页码，例如 C17 页链接到`&pg=SL3-PA17`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T09:56:38.423

我发现它`&dq`允许在有“预览”可用且`&pg=PTx`位于 URL 中的图书中突出显示，其中 x 是 Google 图书上的页码，而不是印刷图书页面上的页码。此外，如果您使用没有`&redir_esc=y#v=onepage`“预览”的书的网址，通常会`&dq`在全页视图中显示突出显示的文本，而`&q`显示片段视图（因此您必须单击片段才能查看完整页面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:47:57.583

`&q`是您的主要查询。
`&dq`是ISSN/LCCN/OCLCnum查询，是书的标准名称。
`&f` 是侧边栏的布尔值。false 值显示侧边栏，true 值隐藏它。基本上将其设置为 true 将告诉 API 不要费心在 HTML 编码中添加侧边栏 HTML。
`&redir_esc`接受两个值，y 或 n，尽管我在某些 url 中看到它带有空值。我不确定它的目的。
`#v=onepage`是在浏览器中设置图书视图的参数。onepage 将视图设置为单页视图。`snippet`将其设置为片段视图。

# asp.net-mvc-3 - 输出对象的公共属性

> ID：11584553
> 
> 赞同：0
> 
> 时间：2012-07-20T17:57:29.770
> 
> 标签：asp.net-mvc-3

我正在使用 MVC 3，我必须对服务层进行几次调用并显示对象属性。

是否可以使用 .NET 框架来输出对象中的所有属性和集合？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:01:15.533

反思可能会帮助你。

# java - 通过 sockes 传输 64k 大小的文件失败

> ID：11584558
> 
> 赞同：0
> 
> 时间：2012-07-20T17:57:40.020
> 
> 标签：java, json, sockets, buffer

我正在开发一个在服务器和客户端应用程序之间使用 java 套接字的应用程序。我需要通过这些套接字将大小为 64k 的文件从客户端发送到服务器。当我在本地运行所有系统（服务器和客户端）时，一切正常，但是当我在不同的机器上运行服务器和客户端时，它失败了。

我使用 JSON 来处理文件内容，所以服务器中抛出的异常是：“net.sf.json.util.JSONTokener.syntaxError”。然而问题不在于 JSON，而在于文件的大小。当我发送大小小于 8k 的文件时，一切正常，但更大的大小会截断发送的信息，因此当服务器尝试解释截断的接收信息时，它会抛出 JSONTokener.syntaxError。

我正在定义一个 64k 的套接字缓冲区，如下所示（我正在使用 NIO API）：

```
SocketChannel sc;
private static final int BUFFER _SIZE = (int)Math.pow(2, 16);
.....
sc.socket().setReceiveBufferSize(  BUFFER_SIZE );
sc.socket().setSendBufferSize( BUFFER_SIZE ); 
```

当我在远程模式下运行我的系统时，我需要做什么来扩大网络包的大小？你知道哪个是问题吗？非常感谢您提前。

奥斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:05:03.463

缓冲区大小通常超过 64K，因此您实际上可以缩小它们。

TCP 数据包的 MTU 通常为 1.5 KB，更改此值不太可能对您有所帮助。无论如何，9000 字节是我见过的最多的。

您遇到的问题可能出在您写入数据的方式上，但我怀疑它出在您读取数据的方式上。假设您将收到与您发送的相同大小的数据，或者您将一次收到所有数据，这是一个常见的错误。

流不“知道”您写入的数据大小，并且您不知道何时收到所有发送的数据，除非您有包含长度的协议。

# jquery-ui - 具有 z-index 的 Safari 中不可见的 jQuery 对话框？

> ID：11584562
> 
> 赞同：2
> 
> 时间：2012-07-20T17:57:50.417
> 
> 标签：jquery-ui, safari, dialog

我们有一个非常 jQuery/Javascript 繁重的 web 应用程序，到处都在使用 jQuery 对话框，但是一个特定的对话框在 Windows 上的 Safari 中出现了问题。它是这样创建的：

```
$('#cnav-dispatch-center-window').dialog({
    close: stateObject.DeviceOptions.dispatchPin_dispose,
    resizable: false,
    width: 613,
    height: 467,
    dialogClass: 'dialog-window-alertedit',
    show: 'fade',
    hide: 'fade',
    open: stateObject.DeviceOptions.RefreshSelection
});​ 
```

与任何其他对话框相比，我们没有为此对话框做任何特别的事情。此对话框表现出奇怪的行为：

*   它不可见
*   它仍然拦截点击
*   如果你能找到标题栏，它仍然是可拖动的
*   它具有非常高的 z-index (10,000+)

如果我删除 z-index，将显示对话框。我已经使用开发人员工具对其进行了测试。我不知道是什么设置了 z-index，我不知道如何取消它。只要 z-index 存在，无论它的值是什么，它都不会显示。它在所有其他浏览器中都能正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:07:32.440

对于遇到此问题的任何人：

我不知道为什么，并向任何可以解释它的人表示敬意，但补充说：

```
z-index: auto important; 
```

对话框的类（在我的示例中`dialog-window-alertedit`）为我解决了这个问题。奇怪的是，Safari 继续报告 z-index 为 10,000+，但我的对话框正在显示，所以我称它足够接近。

# java - Apache Buildr - 将工件提取到项目根目录

> ID：11584565
> 
> 赞同：1
> 
> 时间：2012-07-20T17:58:03.733
> 
> 标签：java, apache, buildr, build-tools

我开始在一个项目中使用 Apache builder，我很惊讶我需要这么少的代码来构建我的项目。但是在第一次成功之后，出现了一个问题：

我有一些需要的文本文件存储在一个 jar 文件中，可以从存储库下载。我已将它作为工件包含在我的构建文件中，并且可以使用它下载编译。

现在我想提取 jar 的内容并将其放在我项目的根文件夹中。Apache Buildr 有没有办法为我做到这一点？仅将其添加到类路径是不够的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:48:29.857

jar 文件是一个 zip 文件。您可以使用构建器的内置`unzip`帮助程序将其解压缩到您想要的任何位置。`unzip`帮助器记录在构建器文档的工件[部分](http://buildr.apache.org/artifacts.html)中。

如果需要获取 buildr 下载的工件的文件名，可以调用`#to_s`工件：

```
artifact('net.example:text-files:jar:1.0.0').to_s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:46:48.680

我相信这是您正在寻找的示例，来自[http://buildr.apache.org/artifacts.html](http://buildr.apache.org/artifacts.html)

```
bean_jar = file('target/app/bean.jar'=>unzip('target/app'=>app_zip)) 
```

也可以直接调用Buildr的Unzip，别忘了`extract`最后的。

```
Unzip.new( 'path/to/extra/to' => 'file/to/unzip').extract 
```

# java - Java 小程序文本字段缩短/不正确显示

> ID：11584571
> 
> 赞同：0
> 
> 时间：2012-07-20T17:58:26.297
> 
> 标签：java, text, applet

我为一个朋友写了一个价格计算器（runescape dungeoneering，但这并不是特别重要）。他是一个相当大的团队中的一员，而其他管理员之一在这方面遇到了麻烦。

我在 Windows 7、Java 6u32（我相信是 u32）上的 Eclipse 中编写了这个。他正在运行 Mac OS X 版本 10.7.4，Java 6u33。每当他加载页面时，文本字段都无法正确显示。其中一半在行尾用椭圆缩短。

问题图片：

[http://puu.sh/KckA](http://puu.sh/KckA)

另外，作为一个附带问题，我想知道为什么图像只在绘制一次后才出现？

感谢您的所有帮助，并对命名错误的变量感到抱歉！我无法弄清楚如何将代码正确嵌入到帖子中，所以我意识到这是非常糟糕的空间 - 我只是复制/粘贴它并使用空间来缩进导入：/。

```
import java.awt.Button;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;

import javax.imageio.ImageIO;
import javax.swing.ButtonGroup;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JTextField;

public class IHideKeysCalc extends JApplet implements ActionListener {

JRadioButton t = new JRadioButton("Get a chaotic at your current level."), z = new JRadioButton("Get to a certain level.");
JRadioButton t2 = new JRadioButton("Yes."), z2 = new JRadioButton("No.");
JTextField startLevel = new JTextField(), endLevel = new JTextField();
JLabel e = new JLabel("What is your ending level?"), p = new JLabel("What is your starting level?");
JLabel cost = new JLabel("It will cost: 0m");
JLabel chaotics = new JLabel("You will gain: 0 chaotics");
JLabel time = new JLabel("It will take: 0 hours");
JButton calc = new JButton("Calculate!");
JLabel leech = new JLabel("Will you leech c1s from us?");
Color dots = new Color(215, 215, 215);

double[] normalCost = new double[] {0.147408147408147, 0.161616161616162, 0.156052782558807, 0.171352074966533, 0.166624674561182, 0.18543713781809, 0.180714893457874, 0.201060278814058, 0.206251654890812, 0.227434257285004, 0.228290358693966, 0.251523448295564, 0.253108393640709, 0.280820991484583, 0.28508229125052, 0.314016016332662, 0.321855573638658, 0.354987765042637, 0.365389331821599, 0.402884011746955, 0.413233529990681, 0.454829644395684, 0.469244088131267, 0.518269589876325, 0.536842873549166, 0.591842366162221, 0.617068005673544, 0.680805377374742, 0.711865189407446, 0.785616988310019, 0.824813238661612, 0.910191318818822, 0.958469472772604, 1.05785553342935, 1.11731759927444, 1.2328062178794, 1.30540086348993, 1.44105580841818, 1.52112093542576, 1.67893297878229, 1.79759198326453, 1.98403337299274, 2.0576867439263, 2.27198067413181, 2.34861652795415, 2.59287845397998, 2.67171019944355, 2.94948405053316, 2.30627996576819, 2.54621754023429, 2.63839002652197, 2.91292672667821, 3.02782375824338, 3.34294815274889, 2.99278604307127, 3.30403304019601, 3.44280379223394, 3.8011722050782, 3.35899412255012, 3.70845630500912, 3.7979745635451, 4.19312491872546, 4.11809281699623, 4.5465605645372, 4.59525960492191, 5.07347042913889, 5.11281698937835, 5.64488890579082, 5.81225689595036, 6.41724086226737, 6.46511043188491, 7.13790513866952, 7.31926635024289, 8.08104832531242, 8.18451767951496, 9.03633826548025, 9.03072096418207, 9.97065806503748, 11.6582196154413, 12.8716058180737, 13.3368037528554, 14.7248844101516, 15.2703841396691, 16.8597698035761, 17.5341941654067, 19.3591671629348, 20.1405224921476, 22.2368354307871, 23.1540859239001, 25.5640472079718, 26.7502409626548, 29.534621910156, 31.0514204050245, 34.2834446556508, 36.3576095095093, 40.1419477374292, 42.8132373341253, 47.2695988929749, 50.5171187677128, 55.775336875572, 59.0583839135564, 65.2056239687282, 69.5517856204352, 76.791366428954, 80.8126533895158, 89.2243342865382, 94.9773484573605, 104.863428916985, 112.165424237996, 123.840557129701, 130.059514288612, 143.597320738684, 154.344556268421, 170.410147105144, 178.81609217768, 197.428905849894, 209.623017271163, 231.442490011038, 248.40964248305, 2418.96525482347};
double[] normalCost2 = new double[] {0.147408147408147, 0.161616161616162, 0.156052782558807, 0.171352074966533, 0.166624674561182, 0.18543713781809, 0.180714893457874, 0.201060278814058, 0.206251654890812, 0.227434257285004, 0.228290358693966, 0.251523448295564, 0.253108393640709, 0.280820991484583, 0.28508229125052, 0.314016016332662, 0.321855573638658, 0.354987765042637, 0.365389331821599, 0.402884011746955, 0.413233529990681, 0.454829644395684, 0.469244088131267, 0.518269589876325, 0.536842873549166, 0.591842366162221, 0.617068005673544, 0.680805377374742, 0.711865189407446, 0.785616988310019, 0.824813238661612, 0.910191318818822, 0.958469472772604, 1.05785553342935, 1.11731759927444, 1.2328062178794, 1.30540086348993, 1.44105580841818, 1.52112093542576, 1.67893297878229, 1.79759198326453, 1.98403337299274, 2.0576867439263, 2.27198067413181, 2.34861652795415, 2.59287845397998, 2.67171019944355, 2.94948405053316, 2.30627996576819, 2.54621754023429, 2.63839002652197, 2.91292672667821, 3.02782375824338, 3.34294815274889, 2.99278604307127, 3.30403304019601, 3.44280379223394, 3.8011722050782, 3.35899412255012, 3.70845630500912, 3.7979745635451, 4.19312491872546, 4.11809281699623, 4.5465605645372, 4.59525960492191, 5.07347042913889, 5.11281698937835, 5.64488890579082, 5.81225689595036, 6.41724086226737, 6.46511043188491, 7.13790513866952, 7.31926635024289, 8.08104832531242, 8.18451767951496, 9.03633826548025, 9.03072096418207, 9.97065806503748, 9.16677990396157, 10.1208573381611, 10.6767809960961, 11.7880092526936, 12.4151865893764, 13.7073950498449, 14.4486866969796, 15.952517601496, 16.79338694904, 18.5413155024615, 19.5087629499962, 21.5393057908644, 22.749431329251, 25.1173757245215, 26.628575651853, 29.4002428137358, 31.4882868073428, 34.7657940225949, 37.4024999022994, 41.2956664355536, 44.4734040636548, 49.1025449226364, 52.3507084560114, 57.7997632829849, 62.0331408031167, 68.4901128512714, 72.4784892775103, 80.0226781901313, 85.613081327045, 94.52444623818, 101.572293638011, 112.144803254013, 118.272870806207, 130.583813546741, 140.900446941876, 155.566652113006, 163.822838496629, 180.875017252225, 192.680242742557, 212.736157206356, 229.030482784318, 2230.25473010176};
double[] normalTokens = new double[] {8.3, 9.1, 10.2, 11.2, 12.4, 13.8, 15.1, 16.8, 18.5, 20.4, 22.6, 24.9, 27.4, 30.4, 33.5, 36.9, 40.8, 45, 49.7, 54.8, 60.6, 66.7, 73.7, 81.4, 89.8, 99, 109.4, 120.7, 133.2, 147, 162.3, 179.1, 197.7, 218.2, 240.9, 265.8, 293.5, 324, 357.6, 394.7, 435.8, 481, 531, 586.3, 647.1, 714.4, 788.7, 870.7, 961.2, 1061.2, 1171.5, 1293.4, 1427.8, 1576.4, 1740.4, 1921.4, 2121.2, 2342, 2585.6, 2854.6, 3151.6, 3479.5, 3841.6, 4241.3, 4682.6, 5169.9, 5707.9, 6301.9, 6957.6, 7681.8, 8481.2, 9363.8, 10338.3, 11414.3, 12602.2, 13913.8, 15361.9, 16960.8, 18726, 20675, 22826.9, 25202.7, 27825.9, 30722.1, 33919.8, 37450.2, 41348.2, 45651.9, 50403.7, 55649.9, 61442.2, 67837.6, 74898.5, 82694.4, 91301.9, 100805.2, 111297.7, 122882.5, 135672.9, 149794.8, 165386.8, 182601.5, 201608.1, 222593.3, 245762.6, 271343.7, 299587.4, 330771.1, 365200.7, 403213.9, 445184, 491522.9, 542684.9, 599172.5, 661539.7, 730398.8, 806425.4, 890365.5, 983043, 9572683.4};
double[] normalTime = new double[] {1.00958241758242, 1.11495970695971, 1.06963166953528, 1.18127672595142, 1.15018594104308, 1.27023901906442, 1.2472594878124, 1.37744482155713, 1.41685187507839, 1.56473877113034, 1.56755170743479, 1.73116821561822, 1.74434730120433, 1.92641722153205, 1.95725417087426, 2.16154669376012, 2.21124718747179, 2.44205076596211, 2.50994901343847, 2.77193022359534, 2.86812333250013, 3.1674897409429, 3.29805772944222, 3.64229944530993, 3.80841107155634, 4.20592199148309, 4.42242809498221, 4.8840283338524, 5.15065412806684, 5.68826449160243, 6.02144053611861, 6.64994106345759, 7.05825151342297, 7.79497136835937, 8.29491528158907, 9.16071451973473, 9.77092350100014, 10.7907842031247, 11.311355104669, 12.4920015970756, 13.4631737052244, 14.8684207923017, 15.322810010546, 16.9221605503673, 17.602791084445, 19.4401194467945, 19.9138619998677, 21.9924132523791, 16.9295074753534, 18.6965604441613, 19.4662745138955, 21.4981078806657, 22.4508340041317, 24.794187048334, 21.9299806848883, 24.2189685678228, 25.3352524716474, 27.9796727633009, 24.6417064586782, 27.2137364257457, 27.7930719891776, 30.6940323651524, 30.0742869561431, 33.2133539448314, 33.3534941382039, 36.8348352772083, 37.0696258402337, 40.93884604578, 42.4260461563957, 46.8543540043697, 47.1239377238921, 52.0425978903589, 53.693321666918, 59.2976751068993, 60.1692757457264, 66.4495705205329, 66.7720718040988, 73.7415473122707, 76.8324023748064, 84.8519460570252, 88.1453522545292, 97.3457088871568, 101.175803906389, 111.736241351164, 116.429000968713, 128.581522955346, 133.995020100622, 147.981032299676, 154.311116147988, 170.417663624714, 178.555672255407, 197.192796295533, 207.556928886271, 229.221120116824, 239.701753082987, 264.721127983905, 278.790936846473, 307.890327561088, 325.297010290488, 359.250570287139, 376.451809570906, 415.744759391439, 439.247661643271, 485.09506067001, 506.047490207454, 558.867261912609, 590.119126007236, 651.714051617419, 691.908460702742, 764.127862324914, 796.957117808243, 880.14119407779, 939.928811085602, 1038.03585870733, 1082.69792300564, 1195.70679712407, 1262.42094024116, 1394.18878248856, 1488.70556306347, 14496.7280485445};

double[] secondCost = new double[] {205.809139511126, 205.666898683103, 205.510947895753, 205.361245312921, 205.196866006281, 205.037961182368, 204.861115491238, 204.68980138365, 204.499200257327, 204.304466121548, 204.089732263715, 203.875511955396, 203.639490465256, 203.403440451273, 203.141545545247, 202.877319302118, 202.586276067149, 202.289821292416, 201.962849114402, 201.628401442031, 201.259634189599, 200.884128316807, 200.470823998073, 200.047463215808, 199.579870710024, 199.098934496811, 198.568726422112, 198.019767421347, 197.414106074069, 196.785167022266, 196.091067618249, 195.36729726347, 194.568607981024, 193.733220320596, 192.811209255825, 191.843868432443, 190.776540948612, 189.653863969407, 188.414520387594, 187.116029983754, 185.682824831642, 184.156548244533, 182.471970368444, 180.744867551454, 178.837898847873, 176.892146461388, 174.744031015699, 172.563340671575, 170.155927101612, 168.448060074772, 166.562512333528, 164.653461422647, 162.545764924027, 160.406844613766, 158.045313603054, 156.136045952524, 153.988235498788, 151.784760223372, 149.351920748064, 147.503584655442, 145.462951839076, 143.506325452791, 141.346126978658, 139.472520504396, 137.403974289463, 135.544562182586, 133.491648277631, 131.713718729864, 129.75076664292, 127.774684202822, 125.573085489923, 123.762314431261, 121.763104645016, 120.117322794866, 118.300249603707, 116.783640524603, 114.939775999494, 113.850096472748, 112.647000728262, 110.627734605662, 107.826828419619, 105.60890512289, 103.160142677246, 101.141235060418, 98.3943606030692, 96.4191212414268, 94.1197186833565, 91.9810632039793, 89.6198071860878, 88.0967551101201, 85.6040436484927, 84.3265101874514, 82.221926362036, 80.9960672634902, 79.5357439871363, 78.2995243514211, 76.9346308757958, 75.9839103477244, 74.468989411611, 73.7032366599374, 71.4184976232158, 71.2078468065862, 68.9970151203599, 69.3621460275368, 65.7648099340712, 65.7648099340712, 63.4054359144346, 63.4054359144346, 61.4267301448194, 61.4267301448194, 58.4295546509364, 58.4295546509364, 56.8818318948696, 56.8818318948696, 54.0605778240308, 54.0605778240308, 51.9881981076397, 51.9881981076397, 50.5389169106641, 50.5389169106641};
double[] secondCost2 = new double[] {203.13233860099, 202.988993482163, 202.83183196634, 202.680772303242, 202.514902869252, 202.354348261486, 202.175666520585, 202.002343402015, 201.809507084666, 201.612311577817, 201.394863559453, 201.177636387015, 200.938302024462, 200.698606520352, 200.432666982947, 200.163983662474, 199.868030990072, 199.566147894276, 199.233188597443, 198.892128484954, 198.51607025227, 198.132501726134, 197.710323166839, 197.277156814418, 196.798734275924, 196.30585043449, 195.762470698387, 195.198956346536, 194.577236216113, 193.930575292604, 193.216917967109, 192.471554070454, 191.649036055106, 190.787344985998, 189.836303047305, 188.836911181175, 187.734219782183, 186.572493483566, 185.290042646251, 183.943974604858, 182.458255768343, 180.873997261643, 179.125423737726, 177.327672918664, 175.342698709217, 173.310851554106, 171.067687270979, 168.782062691008, 166.25880502424, 164.423053139412, 162.396315831693, 160.331400260874, 158.051620662669, 155.722735724616, 153.151469289297, 151.01064649224, 148.624436411962, 146.173777319575, 143.468024163638, 141.318387638638, 138.945107771579, 136.62122487126, 134.055559637202, 131.734290824981, 129.171505159301, 126.76642883342, 124.111065552939, 121.667993393022, 118.970679767243, 116.273634388718, 113.283811160463, 110.60278967096, 107.642766440354, 104.936178332934, 101.947891222429, 99.2288303248363, 96.1192999109482, 93.6322283836829, 90.8862970366724, 89.6688583891789, 87.9450600565222, 86.5393226499183, 84.9872775567425, 83.6651681411018, 81.8487685186973, 80.5094726227178, 78.954690408184, 77.4707819037332, 75.832421765823, 74.7640388864952, 73.0098766187729, 72.104918422045, 70.6542197712317, 69.8567106080253, 68.9065542546254, 68.1010156606756, 67.2116313316438, 66.574684853225, 65.5597456288688, 64.9942472119106, 63.3069972404224, 63.1531374790764, 61.538341766146, 61.8270638283787, 58.9825215696044, 58.9825215696044, 57.1539933435418, 57.1539933435418, 55.6254649227186, 55.6254649227186, 53.1343762606953, 53.1343762606953, 51.9271669220486, 51.9271669220486, 49.5277421737892, 49.5277421737892, 47.7862534445361, 47.7862534445361, 46.596228808774, 46.596228808774};
double[] reachLevel = new double[] {80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 80, 81, 81, 81, 81, 81, 81, 81, 81, 82, 82, 82, 82, 82, 83, 83, 83, 84, 84, 84, 85, 85, 86, 86, 87, 87, 88, 88, 89, 90, 90, 91, 91, 92, 93, 93, 94, 95, 96, 97, 97, 98, 99, 100, 101, 102, 103, 104, 105, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120};
double[] secondTime = new double[] {24.9946429257347, 24.9783842111745, 24.9604239225849, 24.9432943332101, 24.9243723855536, 24.9060506888359, 24.8858238572065, 24.8660689282208, 24.8442605111923, 24.8219115774579, 24.797227808174, 24.7726476204672, 24.7454977940721, 24.718299297897, 24.6882714810255, 24.6579417322399, 24.624439643112, 24.5903759437907, 24.5527527673272, 24.5143193989011, 24.4718684795311, 24.4282110190991, 24.3799813137437, 24.3300542238567, 24.2749163955096, 24.2175845383904, 24.1542567117313, 24.0880317336631, 24.0148862553222, 23.9381519219767, 23.8534012345939, 23.7641440208121, 23.6655607949053, 23.5614444982819, 23.4464515869104, 23.3246787903348, 23.1901789836552, 23.0474035039304, 22.8897163219235, 22.7256509515522, 22.544445507274, 22.3498647994608, 22.1349546550305, 21.9158909898917, 21.6739535964416, 21.4248306343984, 21.1496883589048, 20.8717319487254, 20.5647412156741, 20.3483217811742, 20.1092907297184, 19.8649748206746, 19.595132087265, 19.3186025584435, 19.0131802946162, 18.7667111995194, 18.490451007457, 18.2047319219977, 17.8891513821645, 17.6448833971303, 17.3750629489418, 17.1147038849072, 16.8271013961493, 16.5731352612704, 16.2923706355883, 16.0378836320328, 15.7567402789638, 15.5063131557712, 15.2296329829085, 14.9463360163191, 14.6310161166959, 14.3596539672288, 14.0595718337876, 13.7912768736783, 13.4947912766823, 13.2295985529344, 12.9181982399467, 12.684004188419, 12.425408200958, 12.212164466137, 11.9147945189033, 11.678465792127, 11.4174452967627, 11.202029099851, 10.9072154065515, 10.6977333721524, 10.4482346235909, 10.2179425784472, 9.96261811883693, 9.79890600858667, 9.5292281368228, 9.39100021700554, 9.13546626658899, 8.95336286950375, 8.73661022043875, 8.5538243186338, 8.35021455477117, 8.21361702837751, 7.99254171400577, 7.89238136322017, 7.58748131883126, 7.5609402291254, 7.26239303170813, 7.30945047798586, 6.86457666518511, 6.86457666518511, 6.56680908628267, 6.56680908628267, 6.31619233951591, 6.31619233951591, 5.96806504391798, 5.96806504391798, 5.77411467139106, 5.77411467139106, 5.456191060476, 5.456191060476, 5.21889040213051, 5.21889040213051, 5.04794996442499, 5.04794996442499};

private static final long serialVersionUID = 1L;

JPanel x = new JPanel() {
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Image oi = getImage(getCodeBase(), "Logo.png");

        g.drawImage(oi, 0, 200, 537, 93, null);

    }
};

public void init() {

    t.setBounds(25, 25, 220, 25);
    t.setSelected(true);
    t.addActionListener(this);
    t.setBackground(Color.WHITE);

    z.setBounds(250, 25, 150, 25);
    z.addActionListener(this);
    z.setBackground(Color.WHITE);

    ButtonGroup group = new ButtonGroup();
    group.add(t);
    group.add(z);

    leech.setBounds(30, 100, 160, 25);
    leech.setOpaque(true);
    leech.setBackground(Color.WHITE);

    t2.setBounds(30, 125, 50, 25);
    t2.setSelected(true);
    t2.addActionListener(this);
    t2.setBackground(Color.WHITE);

    z2.setBounds(85, 125, 50, 25);
    z2.addActionListener(this);
    z2.setBackground(Color.WHITE);

    ButtonGroup group2 = new ButtonGroup();
    group2.add(t2);
    group2.add(z2);

    p.setBounds(30, 50, 160, 25);
    p.setBackground(Color.WHITE);
    p.setOpaque(true);

    e.setBounds(195, 50, 150, 25);
    e.setBackground(Color.WHITE);
    e.setOpaque(true);

    startLevel.setBounds(30, 75, 150, 25);
    startLevel.setBackground(Color.WHITE);
    startLevel.setText("1");

    endLevel.setBounds(195, 75, 150, 25);
    endLevel.setBackground(Color.WHITE);
    endLevel.setText("1");

    cost.setBounds(225, 100, 150, 25);
    cost.setBackground(Color.WHITE);
    cost.setOpaque(true);

    chaotics.setBounds(225, 120, 160, 25);
    chaotics.setBackground(Color.WHITE);
    chaotics.setOpaque(true);

    time.setBounds(225, 140, 150, 25);
    time.setBackground(Color.WHITE);
    time.setOpaque(true);

    calc.setBounds(155, 175, 90, 25);
    calc.setBackground(Color.WHITE);
    calc.addActionListener(this);

    x.setBounds(0, 0, 400, 293);
    x.setVisible(true);
    x.setLayout(null);
    x.setBackground(Color.WHITE);

    x.add(t);
    x.add(z);
    x.add(startLevel);
    x.add(endLevel);
    x.add(p);
    x.add(e);
    x.add(cost);
    x.add(chaotics);
    x.add(time);
    x.add(calc);
    x.add(t2);
    x.add(z2);
    x.add(leech);

    this.add(x);

    endLevel.setVisible(false);
    e.setVisible(false);

    calc.doClick();

    this.setSize(400, 293);
    this.setVisible(true);

}

public static double round(double value, int places) {
    if (places < 0) throw new IllegalArgumentException();

    long factor = (long) Math.pow(10, places);
    value = value * factor;
    long tmp = Math.round(value);
    return (double) tmp / factor;
}

@Override
public void actionPerformed(ActionEvent arg0) {

    if(t.isSelected()) {

        endLevel.setVisible(false);
        e.setVisible(false);

        if(startLevel.getText().length() < 1) {

        } else {

            double cost1 = 0;
            double chaotic = 0;
            double time = 0;

            for(int i = 0; i <= normalCost.length; i++) {
                if(Integer.parseInt(startLevel.getText()) == i) {
                    if(z2.isSelected()){
                        cost1 = secondCost2[i - 1];
                    } else {
                        cost1 = secondCost[i - 1];
                    }
                    time = secondTime[i - 1];
                    chaotic = reachLevel[i - 1];
                }
            }

            cost.setText("It will cost: " + round(cost1, 2) + "m");
            chaotics.setText("You will reach level: " + round(chaotic, 2));
            this.time.setText("It will take: " + round(time, 2) + " hours");

        }

        x.repaint();

    } else if(z.isSelected()) {

        endLevel.setVisible(true);
        e.setVisible(true);

        if((startLevel.getText().length() < 1) || (endLevel.getText().length() < 1)) {

        } else {

            double cost1 = 0;
            double chaotic = 0;
            double time = 0;

            for(int i = 0; i <= normalCost.length; i++) {
                if(!((Integer.parseInt(startLevel.getText())) >= (i))) {
                    if(!(Integer.parseInt(endLevel.getText()) < (i))) {
                        if(z2.isSelected()){
                            cost1 = cost1 + normalCost2[i - 2];
                        } else {
                            cost1 = cost1 + normalCost[i - 2];
                        }
                        chaotic = chaotic + normalTokens[i - 2];
                        time = time + normalTime[i - 2];
                    }
                }
            }

            cost.setText("It will cost: " + round(cost1, 2) + "m");
            chaotics.setText("You will gain: " + round(chaotic / 200000, 2) + " chaotics");
            this.time.setText("It will take: " + round(time / 60, 2) + " hours");

        }

        x.repaint();
    }

}

} 
```

为了澄清一些，这适用于其他人。据我所知，他是唯一一个有问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:08:11.760

您的问题是 Mac、Windows 和 Linux 显示 Swing 组件的方式不同。如果您希望它在所有操作系统上看起来都一样，则必须使用非默认 L&F。

由于 GUI 的外观，我已经可以看到有问题的人在 Mac OSX 上。

# objective-c - 如何从表中播放音频

> ID：11584572
> 
> 赞同：0
> 
> 时间：2012-07-20T17:58:31.743
> 
> 标签：objective-c, audio

```
 playbutton = (UIButton *)sender;
audiostring = [[NSMutableString alloc] init];
audiostring = [Audioarray objectAtIndex:playbutton.tag];
NSError *error;
audioPlayer = [[AVPlayer playerWithURL:[NSURL URLWithString:[audiostring valueForKey:@"url"]]] retain];

[[AVAudioSession sharedInstance] setDelegate: self];
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryAmbient error: &error];

[audioPlayer play];
NSLog(@"audio array : %@",audioPlayer); 
```

用于播放单元格中的下一个音频。请告诉我正确答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:08:10.527

您可以使用单元格的附件视图并在那里附加一个播放按钮。本[教程](http://www.edumobile.org/iphone/iphone-programming-tutorials/impliment-a-custom-accessory-view-for-your-uitableview-in-iphone/) 解释了如何创建一个实际上是一个按钮的自定义附件视图，因此它有一个选择器。按照本教程，您可以轻松地知道在哪个单元格上按下了按钮。因此，用户可以按下特定单元格的播放按钮。然后取与该单元格关联的文件的名称，并应用您从[这里](http://www.sagorin.org/2011/11/29/ios-playing-audio-in-background-audio/)学到的东西在后台播放您的音频。祝你好运！

# facebook - 如何在 Facebook 页面选项卡应用程序中处理导航

> ID：11584573
> 
> 赞同：0
> 
> 时间：2012-07-20T17:58:34.497
> 
> 标签：facebook, asp.net-mvc-3, facebook-c#-sdk

我正在开发一个页面选项卡应用程序，并且遇到了导航问题。我的应用程序是用 MVC3 编写的，可以很好地显示和验证为页面选项卡。当我单击我的选项卡时，我的应用程序按预期收到带有 signed_request 对象的 POST。

我的问题是，如何在我的应用程序中支持指向其他页面的链接？当用户单击链接时，我希望在我的应用程序中调用一个操作并且不离开 Facebook iframe。另外，我需要传递signed_request，所以我有一个用户上下文。

起初，我认为这是不支持的，并且所有页面选项卡应用程序都必须编写为单页应用程序。但是，我找到了完全符合我要求的示例。

点击图片：

[https://www.facebook.com/Sephora/app_305927716147259](https://www.facebook.com/Sephora/app_305927716147259)

和：

[http://woobox.com/pinterest](http://woobox.com/pinterest)

这些应用程序如何处理 iframe 中的页面导航？

单击图像的性能似乎很差。他们在幕后做什么，有没有更直接的方式来处理导航？

我还需要处理 POST。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:07:57.533

> 当用户单击链接时，我希望在我的应用程序中调用一个操作并且不离开 Facebook iframe。

嗯，这就是普通的 HTML 链接所做的——所以此时不​​需要额外的努力 :-)

> 另外，我需要传递signed_request，所以我有一个用户上下文。

您可以将它作为 GET 参数传递给每个链接——但这样用户可以轻松“看到”它，并且它也可能通过 HTTP 引用器传输到外部服务器（如果您的页面中嵌入了任何外部资源）。

恕我直言，更好的解决方案是将签名的请求服务器端存储在您的会话中（如果您愿意，已经解析），以便您可以在应用程序的以下页面上访问它。

# java - 从检票口面板类调用 javascript 或修改 css

> ID：11584577
> 
> 赞同：0
> 
> 时间：2012-07-20T17:58:57.853
> 
> 标签：java, wicket, panel, wicketstuff

在我的项目中，我遇到了从类中调用 javascript 代码的问题，该类在 wicket 中呈现
html。假设我们有一个类 ExamplePanel，其中包含以下用于 wicket 面板的代码

```
 public final class ExamplePanel extends Panel {

      public ExamplePanel(String id) {
          super(id);
          add(new Label("someText", "hello"));
      }} 
```

和 html 文件'ExamplePanel'

```
 <html xmlns:wicket>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>ExamplePanel</title>
        <wicket:head>
            <link href="panel.css" rel="stylesheet"/>
            <script src="jquery.min.js"></script>
            <script src="jquery-ui.min.js"></script>

        </wicket:head>
    </head>
    <body>
        <wicket:panel>
            <div id="parentContainer">
                <div id="box" wicket:id="someText"></div>
            </div>
        </wicket:panel>
    </body>
</html> 
```

并遵循 css

```
 #box{
    background: #f0f0f0;
    width: 50px;
    height: 50px;
    position: absolute;
    top: 200px;
    left: 200px;
    font-size: 1.5em;
    word-wrap: break-word; 
}

#parentContainer{
    width:500px;
    height: 500px;
     background:RGB(57,51,51);
     position:relative;
} 
```

从这段代码中，我们在 parentContainer div 中有框，我需要在初始化 ExamplePanel 类时将位置坐标传递给框，例如：

```
public ExamplePanel(String id) {
    super(id);
    add(new Label("someText", "hello"));
    // add some code for css positioning of box div
    // $('#div').css({position:'relative',top:'5px',left='29px'}) for example
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:32:14.473

*ExamplePanel*必须实现提供方法*renderHead(IHeaderResponse)*的 IHeaderContributor 。通过此方法，您可以调用 response.renderString() 并将您想要应用的样式传递给它。在您的情况下，您没有添加样式，而是添加了添加一些样式的 JS 调用。这样做会使 java 调用更简单一些，因为不需要创建作为渲染字符串的一部分，您只需要调用 response.renderJavascript()...

```
public class ExamplePanel implements IHeaderContributor {
    public ExamplePanel(String id) {
        super(id);

        add(new Label("someText", "hello"));
    }

    @Override
    public void renderHead(IHeaderResponse response) {
        // use this if you want to add only the styles
        response.renderString("<style>#div {position:'relative'; top:'5px'; left='29px';}</style>");

        // or, use this if you still want the JS selector
        // the uniqueId should not be null if you want Wicket to check if the script has already been rendered
        response.renderJavascript("$('#div').css({position:'relative',top:'5px',left='29px'})", null);
    }
} 
```

IHeaderContributor 接口旨在促进添加资源，例如 JavaScript 和 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T07:30:05.167

您可以使用[SimpleAttributeModifier](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/behavior/SimpleAttributeModifier.html)或[AttributeAppender](http://ci.apache.org/projects/wicket/apidocs/1.5.x/org/apache/wicket/behavior/AttributeAppender.html)从检票口中设置 css 值或类。可以在[此处](http://wicket-game.gwassist.de/archives/9-How-to-change-css-attributes-and-disable-form-elements-on-the-fly.html)找到有关如何执行此操作的说明。

# ruby-on-rails - 如何制作可维护的 Rails 应用程序？

> ID：11584579
> 
> 赞同：1
> 
> 时间：2012-07-20T17:59:06.073
> 
> 标签：ruby-on-rails

1.  我应该从一开始就遵循 Edge Rails 吗？或者只是在新版本出现时获取最新的稳定版本并升级？

2.  我应该给用户更多的授权设置自由吗？示例：Django 管理界面中的细粒度授权

3.  我认为测试是必须的，但我不知道从哪个测试框架开始，Test::Unit/Minitest/RSpec 和 Cucumber？

4.  哈姆尔还是ERB？

ps 只有一个开发者——我现在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:06:39.813

1) 最新稳定版，按需升级。

2）取决于应用程序，有很多很棒的插件/宝石可以进行[授权](https://www.ruby-toolbox.com/categories/rails_authorization)/[身份验证](https://www.ruby-toolbox.com/categories/rails_authentication)，因此肯定会有一些东西可以满足您和您的用户的需求。

3) 对于初学者来说，最容易坚持使用内置的 Test::Unit。

4) 同样，首先使用内置的 ERB。

国际海事组织。YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:11:59.307

1.  最新表版本和新版本升级
2.  我使用 Devise 进行身份验证，使用 cancan 进行权限，使用 activeadmin 进行管理
3.  一个非常大的问题，我和许多其他开发人员都使用 RSpec
4.  厄伯

这是我的意见，但没有确定的。

试试看，做你自己的意见。

# iphone - iPhone 贝宝付款

> ID：11584581
> 
> 赞同：0
> 
> 时间：2012-07-20T17:59:21.127
> 
> 标签：iphone, ios, paypal

我目前正在制作一个 iPhone 应用程序，允许用户发布其他用户可以购买的待售商品。我希望他们能够使用 PayPal 通过应用程序相互付款，但我不确定 Apple 的应用程序提交政策目前是否允许这样做。

此外，如果允许，我需要知道如何设置 PayPal 以在应用程序中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:01:04.007

我认为最简单和最安全的方法是使用 paypal 登录 URL 导航到 webview

[这](http://namu6.com/766/)可能会对您有所帮助您可以为每个产品生成一个链接，如果其他客户想要购买它，他会从服务器/数据库获取此链接

# c++ - 带有字符串数组和 getline() 的 Ifstream

> ID：11584589
> 
> 赞同：1
> 
> 时间：2012-07-20T18:00:05.690
> 
> 标签：c++, visual-studio-2010, visual-c++

我正在尝试添加它以允许用户存储数组，以防万一他们必须做某事或离开。我曾尝试使用`ifstream`以前执行的数组数据加载文件。我试过用`getline()`这样做。

这是我尝试过的，但函数调用中没有足够的参数：

```
ifstream infile;
infile.open("C:\\users\\David\\Desktop\\dada\\array1.txt");
while(infile);
{
    for(int r = 0;r < 3000;r++)
    {
        cin.getline (names,r); //error here
    }
} 
```

我该如何解决这个错误？

# php - 每次出现都获得 +1 的 PHP 变量

> ID：11584592
> 
> 赞同：-2
> 
> 时间：2012-07-20T18:00:11.253
> 
> 标签：php, variables

我想替换这段代码：

```
$html=<<<EOF

    <p>{${$var[i]}[name]}</p>
    <p>{${$var[i+1]}[name]}</p>
    <p>{${$var[i+2]}[name]}</p>
    <p>{${$var[i+3]}[name]}</p>

EOF; 
```

像这样：

```
$html=<<<EOF

    <p>{${$var[new_i]}[name]}</p>
    <p>{${$var[new_i]}[name]}</p>
    <p>{${$var[new_i]}[name]}</p>
    <p>{${$var[new_i]}[name]}</p>

EOF; 
```

并保留第一段代码的功能。

有没有可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T18:01:26.640

后增量救援！

```
$html=<<<EOF

    <p>{${$var[$i++]}[name]}</p>
    <p>{${$var[$i++]}[name]}</p>
    <p>{${$var[$i++]}[name]}</p>
    <p>{${$var[$i++]}[name]}</p>

EOF; 
```

* * *

尽管如果您只是要`$html`在此之后立即显示，那么这样做可能会更好：

```
<?php for($i = 0; $i < $max_i; ++$i):?>
<p><?php echo ${$var[$i]}[name] ?></p>
<?php endfor;?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T18:01:41.333

这就是增量器的用武之地。

`$i++`采取任何行动后将值加一。

`++$i`将在采取任何操作之前将值加一。

```
 $html=<<<EOF

     <p>{${$var[$i++]}[name]}</p>
     <p>{${$var[$i++]}[name]}</p>
     <p>{${$var[$i++]}[name]}</p>
     <p>{${$var[$i++]}[name]}</p>

EOF; 
```

例子：

```
$i = 0;
echo $i++; // echo's 0

$i = 0;
echo ++$i; // echo's 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T18:01:33.680

您可以只传入，`i++`以便它每次出现时都会增加。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-20T18:01:43.877

```
$new_i = 0;

$html=<<<EOF

    <p>{${$var[$new_i]}[name]}</p>
    <p>{${$var[++$new_i]}[name]}</p>
    <p>{${$var[++$new_i]}[name]}</p>
    <p>{${$var[++$new_i]}[name]}</p>

EOF; 
```

在变量的左侧使用`++`将在使用该变量之前将值增加一。

# c - OpenLDAP 绑定超时

> ID：11584596
> 
> 赞同：0
> 
> 时间：2012-07-20T18:00:43.780
> 
> 标签：c, linux, ldap, openldap

我试图了解如何正确实现对 LDAP 服务器的 OpenLDAP 绑定请求的超时。根据我的发现，似乎有两种方法可以做到这一点，LDAP_OPT_TIMELIMIT 和 LDAP_OPT_TIMEOUT。我的主要困惑来自于试图弄清楚这些之间的区别。

据我了解，TIMELIMIT 是一个 LDAP 标准，它为任何 ldap 搜索设置请求/响应周期的时间限制。至少在 Windows 中，默认值为 120 秒。

另一方面，TIMEOUT 是特定于 OpenLDAP 的，纯粹在客户端用于超时 LDAP 绑定请求。这实际上听起来最接近我想要实现的。我从讨论中知道，使用 ldap_set_opt 进行 TIMEOUT 直到 2.4 才完全实现。从[如何导致 ldap_simple_bind_s 超时？](https://stackoverflow.com/questions/1842661/how-can-i-cause-ldap-simple-bind-s-to-timeout)我知道早期版本的解决方法是使用异步绑定，然后使用带有超时的 ldap_result 和超时情况下的 ldap_abandon_ext 以丢弃请求。这是有道理的，尽管在 2.4 版中查看同步绑定的源代码，但它似乎从未以这种方式处理超时。这让我想知道调用 ldap_abandon_ext 的重要性是什么。

任何答案或见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T12:21:49.357

如果有人正在寻找 OpenLDAP 绑定超时，您应该使用[此处](https://stackoverflow.com/a/19139413/3929506)Aki 的回答中的方法。当使用 LDAPAsynConnection 进行绑定时，它也在 ldapcpp 库中工作。在绑定之前，您必须使用 getSessionHandle() 方法启用它。

# jquery - jquery输入检测值变化

> ID：11584598
> 
> 赞同：0
> 
> 时间：2012-07-20T18:00:50.410
> 
> 标签：jquery

我从网上下载了一个日历。这个： http: [//www.codeanddesign-studio.com/wp-content/uploads/2011/03/Date-Range-Picker.gif](http://www.codeanddesign-studio.com/wp-content/uploads/2011/03/Date-Range-Picker.gif)

日历效果很好，现在我想检查每次输入框更改值时，用户只有 2 个选项键入日期或从日历中选择日期。

我可以检测到每次用户输入这样的东西：

```
$(function(){
    $('#inputA').daterangepicker().bind('change',function() {
       valA=$(this).val() ;
    });
}); 
```

但是当用户从日历中选择一个日期时不会检测到更改。我正在考虑使用 setInterval 并每次 X 次检查输入，不知道该怎么做，或者这是否是正确的解决方案。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:10:57.783

我猜是[这个](https://github.com/filamentgroup/jQuery-UI-Date-Range-Picker)，在这种情况下你会这样做，

```
$(function(){
    $('#inputA').daterangepicker({
      onChange: function() {
        valA = $(this).val();
      }
    });
}); 
```

# java - 将数组作为指针+大小或范围传递给包装函数

> ID：11584599
> 
> 赞同：8
> 
> 时间：2012-07-20T18:00:51.897
> 
> 标签：java, c++, c, swig

给定一个像这样的标题：

```
#include <iostream>
#include <algorithm>
#include <iterator>

inline void foo(const signed char *arr, size_t sz) {
  std::copy_n(arr, sz, std::ostream_iterator<int>(std::cout, "\n"));
}

inline void bar(const signed char *begin, const signed char *end) {
  std::copy(begin, end, std::ostream_iterator<int>(std::cout, "\n"));
} 
```

（为方便起见，我在这里使用了 C++11，但如果您更改了实现，这可能是 C 或 C++）

如何包装这些函数以仅在 Java 端获取一个数组并使用数组的（已知）大小为这些函数提供第二个参数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T18:00:51.897

关键是要包装这些函数中的任何一个，您都需要使用[多参数 typemap](http://www.swig.org/Doc1.3/Typemaps.html#Typemaps_multi_argument_typemaps)。

前言对于 SWIG 来说是相当标准的。我使用我个人最喜欢的 prgama 自动加载共享库，无需界面用户知道：

```
%module test

%{
#include "test.hh"
%}

%pragma(java) jniclasscode=%{
  static {
    try {
        System.loadLibrary("test");
    } catch (UnsatisfiedLinkError e) {
      System.err.println("Native code library failed to load. \n" + e);
      System.exit(1);
    }
  }
%} 
```

首先，尽管您需要使用一些[Java 类型映射](http://www.swig.org/Doc1.3/Java.html#typemaps_c_to_java_types)来指示 SWIG`byte[]`用作 Java 接口的两个部分的类型 - JNI 和调用它的包装器。在生成模块文件中，我们将使用 JNI 类型`jbyteArray`。我们将输入直接从 SWIG 接口传递到它生成的 JNI。

```
%typemap(jtype) (const signed char *arr, size_t sz) "byte[]"
%typemap(jstype) (const signed char *arr, size_t sz) "byte[]"
%typemap(jni) (const signed char *arr, size_t sz) "jbyteArray"
%typemap(javain) (const signed char *arr, size_t sz) "$javainput" 
```

完成后，我们可以编写一个多参数类型映射：

```
%typemap(in,numinputs=1) (const signed char *arr, size_t sz) {
  $1 = JCALL2(GetByteArrayElements, jenv, $input, NULL);
  $2 = JCALL1(GetArrayLength, jenv, $input);
} 
```

in 类型映射的工作是将 JNI 调用给定的内容转换为真正的函数真正期望的输入内容。我曾经`numinputs=1`指出两个真正的函数参数在 Java 端只接受一个输入，但无论如何这是默认值，因此不需要明确说明。

在这个类型映射`$1`中是类型映射的第一个参数，即在这种情况下我们函数的第一个参数。我们通过请求指向 Java 数组的底层存储的指针来设置它（这可能是也可能不是真正的副本）。我们将`$2`, 第二个类型映射参数设置为数组的大小。

此处的`JCALLn`宏确保类型映射可以使用 C 和 C++ JNI 进行编译。它扩展到对语言的适当调用。

一旦真正的函数调用返回，我们需要另一个类型映射来清理：

```
%typemap(freearg) (const signed char *arr, size_t sz) {
  // Or use  0 instead of ABORT to keep changes if it was a copy
  JCALL3(ReleaseByteArrayElements, jenv, $input, $1, JNI_ABORT); 
} 
```

这个调用`ReleaseByteArrayElements`告诉 JVM 我们已经完成了数组。它需要指针*和*我们从中获取它的 Java 数组对象。此外，它需要一个参数，指示如果内容被修改并且我们得到的指针首先是副本，则是否应该将内容复制*回来。*（我们传递 NULL 的参数是指向 a 的可选指针，`jboolean`它指示我们是否获得了副本）。

对于第二个变体，类型映射基本相似：

```
%typemap(in,numinputs=1) (const signed char *begin, const signed char *end) {
  $1 = JCALL2(GetByteArrayElements, jenv, $input, NULL);
  const size_t sz = JCALL1(GetArrayLength, jenv, $input);
  $2 = $1 + sz;
}

%typemap(freearg) (const signed char *begin, const signed char *end) {
  // Or use  0 instead of ABORT to keep changes if it was a copy
  JCALL3(ReleaseByteArrayElements, jenv, $input, $1, JNI_ABORT);
}

%typemap(jtype) (const signed char *begin, const signed char *end) "byte[]"
%typemap(jstype) (const signed char *begin, const signed char *end) "byte[]"
%typemap(jni) (const signed char *begin, const signed char *end) "jbyteArray"
%typemap(javain) (const signed char *begin, const signed char *end) "$javainput" 
```

唯一的区别是使用局部变量来使用指针`sz`计算参数。`end``begin`

剩下要做的就是告诉 SWIG 使用我们刚刚编写的类型映射来包装头文件本身：

```
%include "test.hh" 
```

我测试了这两个功能：

```
public class run {
  public static void main(String[] argv) {
    byte[] arr = {0,1,2,3,4,5,6,7};
    System.out.println("Foo:");
    test.foo(arr);
    System.out.println("Bar:");
    test.bar(arr);
  }
} 
```

哪个按预期工作。

[为方便起见，我在我的网站](http://static.lislan.org.uk/~ajw/swigjnimultiargarr.tar.gz)上分享了我在撰写本文时使用的文件。该存档中每个文件的每一行都可以通过按顺序执行此答案来重建。

* * *

作为参考，我们可以在没有任何 JNI 调用的情况下完成整个事情，使用`%pragma(java) modulecode`生成一个重载，我们使用该重载将输入（在纯 Java 中）转换为实际函数所期望的形式。为此，模块文件将是：

```
%module test

%{
#include "test.hh"
%}

%include <carrays.i>
%array_class(signed char, ByteArray);

%pragma(java) modulecode = %{
  // Overload foo to take an array and do a copy for us:
  public static void foo(byte[] array) {
    ByteArray temp = new ByteArray(array.length);
    for (int i = 0; i < array.length; ++i) {
      temp.setitem(i, array[i]);
    }
    foo(temp.cast(), array.length);
    // if foo can modify the input array we'll need to copy back to:
    for (int i = 0; i < array.length; ++i) {
      array[i] = temp.getitem(i);
    }
  }

  // How do we even get a SWIGTYPE_p_signed_char for end for bar?
  public static void bar(byte[] array) {
    ByteArray temp = new ByteArray(array.length);
    for (int i = 0; i < array.length; ++i) {
      temp.setitem(i, array[i]);
    }
    bar(temp.cast(), make_end_ptr(temp.cast(), array.length));
    // if bar can modify the input array we'll need to copy back to:
    for (int i = 0; i < array.length; ++i) {
      array[i] = temp.getitem(i);
    }
  }
%}

// Private helper to make the 'end' pointer that bar expects
%javamethodmodifiers make_end_ptr "private";
%inline {
  signed char *make_end_ptr(signed char *begin, int sz) {
    return begin+sz;
  }
}

%include "test.hh"

%pragma(java) jniclasscode=%{
  static {
    try {
        System.loadLibrary("test");
    } catch (UnsatisfiedLinkError e) {
      System.err.println("Native code library failed to load. \n" + e);
      System.exit(1);
    }
  }
%} 
```

除了将数据转换为正确类型所需的明显（两个）副本（没有简单的方法可以从`byte[]`到`SWIGTYPE_p_signed_char`）并返回这还有另一个缺点 - 它特定于函数`foo`和`bar`，而我们之前编写的类型映射并不特定于一个给定的函数——如果你碰巧有一个函数需要两个范围或两个指针+长度组合，它们将被应用到它们匹配的任何地方，甚至在同一个函数上多次应用。这样做的一个优点是，如果您碰巧有其他包装函数可以`SWIGTYPE_p_signed_char`返回，那么如果您愿意，您仍然可以使用重载。即使在你有一个`ByteArray`来自的情况下，`%array_class`你仍然无法在 Java 中执行生成所需的指针算术`end`为你。

所示的原始方式在 Java 中提供了一个更简洁的界面，并具有不会制作过多副本和更可重用的额外优势。

* * *

另一种包装方法是为and编写一些`%inline`重载：`foo``bar`

```
%inline {
  void foo(jbyteArray arr) {
    // take arr and call JNI to convert for foo
  }
  void bar(jbyteArray arr) {
    // ditto for bar
  }
} 
```

这些在 Java 接口中显示为重载，但它们仍然是特定于模块的，此外，这里所需的 JNI 比原本需要的更复杂 - 你需要安排以`jenv`某种方式获取，这是无法访问的默认。选项是获取它的缓慢调用，或者是`numinputs=0`自动填充参数的类型图。无论哪种方式，多参数类型图看起来都好得多。

# html - 带有附加按钮的文本字段

> ID：11584601
> 
> 赞同：1
> 
> 时间：2012-07-20T18:01:01.600
> 
> 标签：html, css, button, uitextfield

如何让文本字段和按钮相互连接

这是我的演示 [http://jsfiddle.net/dgWqL/2/](http://jsfiddle.net/dgWqL/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:03:42.640

您可以简单地删除 和 之间的`#textfield"`空格`input[type="button"]`。（什么？）嗯，这是你的 html：

```
 <input type="text" name="textfield" id="textfield" value="Search here" />
    <input name="" type="button" value="Go"> 
```

这与拥有...

```
 abc
    def 
```

...正如您永远不会质疑的那样，它被渲染为`abc def`.

这是完全相同的事情。

正如我所建议的那样，您可以通过将第二个输入放在 html 中第一个输入的前面来简单地删除该空格，因此...

```
 <input type="text" name="textfield" id="textfield" value="Search here" /><input name="" type="button" value="Go"> 
```

另一种选择是注释掉空格 - 如果您希望将每个输入放在自己的行上：

```
 <input type="text" name="textfield" id="textfield" value="Search here" /><!--
  --><input name="" type="button" value="Go"> 
```

这是一个小提琴 - [http://jsfiddle.net/dgWqL/3/](http://jsfiddle.net/dgWqL/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:24:36.690

你可以这样做：http: [//jsfiddle.net/dgWqL/2/](http://jsfiddle.net/dgWqL/2/)
关键是使用*float*

**建议：**

1.  不要使用表格进行布局。*（这是不好的做法。）*

2.  将您的 CSS 属性写在单独的行上。*（更容易阅读）*并且更容易
    避免重复，就像你做的那样`display: inline-block;`

希望这有帮助。

# iphone - 如何防止 MFMailComposeViewController 的 Cancel 崩溃？

> ID：11584607
> 
> 赞同：5
> 
> 时间：2012-07-20T18:01:23.180
> 
> 标签：iphone, mfmailcomposeviewcontroller

某处：

```
if([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *email_vc = [[MFMailComposeViewController alloc] init];
    email_vc.mailComposeDelegate = self;

    [email_vc setSubject:subject];
    [email_vc setMessageBody:message isHTML:FALSE];
    [email_vc setToRecipients:recipients];

    [self presentModalViewController:email_vc animated:FALSE];
    [[UIApplication sharedApplication] setStatusBarHidden:TRUE];
    [email_vc release];
}
else
... 
```

别的地方：

```
- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    switch (result) 
    {
        case MFMailComposeResultCancelled:
            NSLog(@"Cancelled");
            break;

        case MFMailComposeResultSaved:
            NSLog(@"Saved");
            break;

        case MFMailComposeResultSent:
            NSLog(@"Sent");
            break;

        case MFMailComposeResultFailed:
            NSLog(@"Compose result failed");
            break;

        default:
            NSLog(@"Default: Cancelled");
            break;
    }

    // This ugly thing is required because dismissModalViewControllerAnimated causes a crash
    // if called right away when "Cancel" is touched.

    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.01 * NSEC_PER_SEC), dispatch_get_current_queue(), ^
    {
        [self dismissModalViewControllerAnimated:FALSE];
    }); 
```

}

那个丑陋的“dispatch_after”块是我可以让它在不崩溃的情况下工作的唯一方法。

上下文是在电子邮件撰写视图控制器上触摸“发送”以外的任何内容都会导致崩溃。有没有办法解决这个问题而不必求助于这个丑陋的创可贴？我关于创可贴的理论是，当您触摸“取消”以确认用户确实想要取消时，会呈现一个中间视图。我想知道是否`[self dismissModalViewControllerAnimated:FALSE];`试图消除一个不合顺序的视图或类似的东西。通过插入一个小的延迟，我推测邮件撰写视图在被要求离开之前有时间进行清理。

我在另一个问题中看到了延迟。但作者并没有详细说明：

[iPad 的 MFMailComposeViewController 崩溃](https://stackoverflow.com/questions/8020214/crash-on-mfmailcomposeviewcontroller-for-ipad)

**编辑 1：添加崩溃日志**

```
Incident Identifier: ****************
CrashReporter Key:   *****************
Hardware Model:      iPhone4,1
Process:         ************* [9038]
Path:            /var/mobile/Applications/*********************
Identifier:      ***********************
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-20 11:25:53.704 -0700
OS Version:      iPhone OS 5.0.1 (9A405)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xa003853a
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x316b9fbc 0x316b6000 + 16316
1   UIKit                           0x350caa9e 0x34f8e000 + 1297054
2   UIKit                           0x34fa6814 0x34f8e000 + 100372
3   UIKit                           0x34fabfb2 0x34f8e000 + 122802
4   QuartzCore                      0x33354ba0 0x33329000 + 179104
5   libdispatch.dylib               0x37896f74 0x37894000 + 12148
6   CoreFoundation                  0x37bac2d6 0x37b20000 + 574166
7   CoreFoundation                  0x37b2f4d6 0x37b20000 + 62678
8   CoreFoundation                  0x37b2f39e 0x37b20000 + 62366
9   GraphicsServices                0x376adfc6 0x376aa000 + 16326
10  UIKit                           0x34fbf73c 0x34f8e000 + 202556
11  *****************               0x00002346 main (main.m:14)
12  *****************               0x00002304 start + 32 
```

**编辑 2：经过多次挠头，这似乎是一个真正的 Apple 错误。**

我下载并运行了 MailComposer 示例项目：

[http://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/MailComposer/Introduction/Intro.html)

它工作正常。

然后我编辑了代码以在显示和关闭邮件撰写控制器时删除动画。

```
[self presentModalViewController:picker animated:FALSE]; 
```

和

```
[self dismissModalViewControllerAnimated:FALSE]; 
```

果然，当使用“取消”关闭电子邮件撰写 UI 时，它崩溃了。

运行僵尸带来了这一点：

```
-[MFMailComposeController actionSheet:didDismissWithButtonIndex:]: message sent to deallocated instance 0x7479ef0 
```

我猜操作表会收到关闭消息，而不是邮件撰写视图控制器。

如果有人可以确认行为，我会报告错误。

**编辑 3：报告了错误。**

我接受的答案很好地解释了导致此问题的潜在机制。此外，在回答评论的来回过程中，还确定了两个额外的解决方法。所有创可贴，但现在有几个选择。

我还没有检查过，但我怀疑 ShareKit 也受到这个错误的影响（如果邮件撰写视图控制器的演示没有动画）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T01:02:22.577

> 我猜操作表会收到关闭消息，而不是邮件撰写视图控制器。

不完全的。

事件的顺序可能是这样发生的：

*   操作表调用`-actionSheet:clickedButtonAtIndex:`其委托（MFMCVC）。
    *   MFMailComposeViewController 调用`-mailComposeController:didFinishWithResult:error:`它的委托（你的 VC）
        *   你的 VC 电话`[self dismissModalViewControllerAnimated:NO]`
            *   这会导致 MFMCVC 被释放。由于解雇没有动画，因此不再有任何涉及 MFMCVC 的内容。它被释放了！
*   行动表调用`-actionSheet:didDismissWithButtonIndex:`其代表
    *   但是它的代表已经被释放了！
        *   所以它崩溃了！

解决方法是让 Apple`actionSheet.delegate = nil`在`-dealloc`.

一个潜在的解决方法

```
[[self.modalViewController retain] autorelease]
[self dismissModalViewControllerAnimated:NO] 
```

如果您使用 ARC，这会有点棘手。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:51:55.943

这对我有用：

```
- (void) mailComposeController: (MFMailComposeViewController *) controller
       didFinishWithResult: (MFMailComposeResult) result
                     error: (NSError *) error {

if(result == MFMailComposeResultSent){
    [self dismissViewControllerAnimated:YES completion:NULL];
} else if (result == MFMailComposeResultCancelled) {
    [self dismissViewControllerAnimated:YES completion:NULL];
} 
```

}

# java - java进程：找不到文件

> ID：11584617
> 
> 赞同：-1
> 
> 时间：2012-07-20T18:01:58.323
> 
> 标签：java, file

在执行以下代码时，它会在 a:28 处（在注释中）给出未找到文件的错误。是因为目录没有刷新，还是子进程在执行 a:28 行之前没有创建文件？

```
File outputFile = new File("RunstatsCmd.db2");
FileWriter out = new FileWriter(outputFile);

String cmd = "DB2CMD;DB2;"+" EXPORT TO "+ "\"C:\\file.xml\"" +" OF IXF MESSAGES "+"\"C:\\msg.txt\""+" SELECT * FROM OLTP.ACCOUNT_DETAILS";

out.write("CONNECT TO OLTPDB;\n");
out.write(cmd + ";\n");
out.write("CONNECT RESET;\n");

out.close();

System.out.println("before creating connection....");
Class.forName ("com.ibm.db2.jcc.DB2Driver").newInstance ();
Process p = Runtime.getRuntime().exec("db2 -vtf RunstatsCmd.db2");

// open streams for the process's input and error                                       
BufferedReader stdInput = new BufferedReader(new 
                                      InputStreamReader(p.getInputStream()));
BufferedReader stdError = new BufferedReader(new
                                      InputStreamReader(p.getErrorStream()));
String s;

// read the output from the command and set the output variable with 
// the value
while ((s = stdInput.readLine()) != null)
{
    System.out.println(s);
}

// read any errors from the attempted command and set the error  
// variable with the value
while ((s = stdError.readLine()) != null) 
{
    System.out.println(s);
}

// destroy the process created 

// delete the temporary file created
outputFile.deleteOnExit(); 

System.out.println("query executed...");   
p.waitFor();        
//a:28////////////////////////                  
FileInputStream fis=new FileInputStream("C:\\file.xml");
int i;
while((i=fis.read())!=-1){
    System.out.println((char)i);
}

}catch(Exception e){
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:06:06.317

字符串中的反斜杠需要转义。

```
"C:\\file.xml" 
```

或者，使用正斜杠（它们在 Java 中被接受，即使在 Windows 机器上也是如此）。

```
"C:/file.xml" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:05:36.240

在 java String 中，`\`是一个*转义字符*，因此如果要按字面意思使用它，则必须对其进行转义。

所以要表示*C:\file.xml*，你需要使用这个 java String: `"C:\\file.xml"`。

但请注意，在 java 中，您始终可以使用正斜杠作为路径分隔符 - 即使在 Windows 中也是如此 - 所以这也应该有效：

```
FileInputStream fis = new FileInputStream("C:/file.xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:09:07.080

使用 for 时请`\`谨慎使用字符`file path`。

将您的代码更改为：

```
FileInputStream fis=new FileInputStream("C:\\file.xml"); 
```

`\`是一个转义字符。

或者，您可以使用：

```
FileInputStream fis=new FileInputStream("C:/file.xml"); 
```

# android - 2012 年左右的 Android 支付平台选项

> ID：11584619
> 
> 赞同：1
> 
> 时间：2012-07-20T18:02:05.760
> 
> 标签：android, in-app-purchase, amazon, payment

对于 Android 和应用内购买的最佳支付 API 是否有任何共识？

谷歌搜索“Android 支付 api”有大量的点击，来自贝宝、短信、信用卡公司等。但这些文章中的大多数都是几年前的。此外，许多文章都提到 Google Checkout 不在全球范围内（这些文章通常也有多年历史）。

如果您有在 Android 上使用应用内购买的经验。

Google 的应用内计费现在是在 Google Play 市场中处理计费的首选方式吗？

我知道亚马逊的商店有一个完全独立的计费系统。

基本上我在问大约 2012 年，Android 的应用程序购买选项是否有任何融合，或者它仍然是狂野的西部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:35:05.580

如果您在 Google Play 上发布您的应用程序，您可能应该使用 Google 自己[的应用内计费 API](http://developer.android.com/guide/google/play/billing/index.html)。[Google Play 开发者计划政策](http://www.android.com/us/developer-content-policy.html)规定只有授权的支付处理商可以提供应用内结算，但我认为没有任何官方列表。因此，有点不清楚谷歌将来会允许哪些，但使用他们自己的替代方案肯定是安全的。

# c# - 从 C++ 托管 dll 引发的 C# 异常 - EEFileLoadException * __ptr64

> ID：11584626
> 
> 赞同：3
> 
> 时间：2012-07-20T18:02:20.740
> 
> 标签：c#, c++-cli, 64-bit, managed, dll

我从一个普通的 C# 控制台程序中收到此错误，该程序正在使用作为 C++ CLI 项目的构建输出生成的 DLL。我有一个简单`DumbThing` `public ref class`的静态方法。我想简单地调用该函数或至少实例化一个微小的 DumbThing 对象，并看到 C# 可以调用它从 C++ CLI 生成的 DLL 获取的代码，但它不起作用，因为它引发了一个让我更加困惑的错误：

```
First-chance exception at 0x000007fefd2acacd (KernelBase.dll) in DumbTest.exe: Microsoft C++ exception: EEFileLoadException * __ptr64 at memory location 0x007fc228.. 
```

更新：在原始异常下面，还有另一个第一次机会异常：

```
First-chance exception at 0x77cace3b (ntdll.dll) in DumbTest.exe: 0xC0000005: Access violation reading location 0xffffffffffffffff. 
```

一位同事向我指出这可能是编译时问题（某些选项），但我没有任何线索可能导致它。谁能提供一些起点提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T09:37:22.243

应该是位元问题。如果您为特定平台编译了 C++/CLI 项目，请确保您的 C# 项目已相应地设置其平台。C# 项目的默认值为“任何 CPU”，这会导致 JIT 编译器在 64 位架构上生成 x64 代码。如果您的 C++/CLI 项目是为 x86 构建的，则无法将其加载到 64 位机器上的 x64 进程中。

# jquery - 动态调整页面大小

> ID：11584627
> 
> 赞同：0
> 
> 时间：2012-07-20T18:02:23.847
> 
> 标签：jquery, html, css, responsive-design

我一直想知道如何使 Web 上的页面更加流畅和 100% 响应。所以我决定在我的网站代码中添加以下 jQuery 精灵粉。

```
$(window).resize(function(){
       $("div.content").css({
           minHeight : $(window).height() * 0.75
       });
});

// just to make sure it happens
$(function(){
       $(window).trigger("resize");
}); 
```

这是一个好主意吗？这里需要一些 HTML5 专家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:07:04.680

如果您只想将特定样式应用于某些窗口大小，那么[CSS 媒体查询](https://developer.mozilla.org/en/CSS/Media_queries)应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:48:38.433

媒体查询和百分比应该可以解决问题。

参考我的 jsfiddle 的例子：http: [//jsfiddle.net/qu6Za/](http://jsfiddle.net/qu6Za/)

媒体查询使其成为响应式设计，百分比使其在单个媒体查询中流动。

# php - 如何使会话更新php中的值？

> ID：11584636
> 
> 赞同：0
> 
> 时间：2012-07-20T18:03:17.270
> 
> 标签：php, session

我无法更新我的会话值

这是代码

```
<CENTER>
<?PHP
    session_start();

$_SESSION['value'] = 15;

    if(isset($_POST['submit'])){
    $plus = 10;
    $_SESSION['value'] = ($_SESSION['value']  + $plus);
    }

echo "<FORM METHOD=post ACTION=\"?page=try&". time(). "\" NAME=try>\n"; 
echo "<br>";
echo "Your value :" .$_SESSION['value'];
echo "<INPUT TYPE=submit NAME=submit VALUE=\"Submit\"></FORM>";
?>
</CENTER> 
```

问题是每次我单击该按钮时，它总是给我相同的结果。

永远`$_SESSION['value']`是 15 并且永远不会改变

那么如何更新会话值？所以当我再次点击按钮时，我会`$_SESSION['value']`变成 35 （过去的结果是 25 ）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:16:34.787

您将会话值显式设置为 15，然后将其添加 10。它永远不会达到 35。尝试将分配删除到 15（或者更好的是，`if(!isset($_SESSION['value']))`在它之前添加一个检查），然后再试一次

您还应该接受 John Conde 的建议，并确保**在发送任何输出之前启动 PHP 会话**。请阅读[手册](http://www.php.net/manual/en/intro.session.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:07:07.503

`session_start()`必须在任何输出发送到浏览器之前（使用基于 cookie 的会话时）。

```
<?php session_start(); ?>
<CENTER>
<?php
$_SESSION['value'] = 15;

    if (isset($_POST['submit'])) {
        $plus = 10;
        $_SESSION['value'] = ($_SESSION['value']  + $plus);
    }

echo $_SESSION['value'];
echo '<form method="post" action="try1.php" name="try">' . "\n";
echo '<br>';
echo 'Your value :' . $_SESSION['value'];
echo '<input type="submit" name="submit" value="submit"></form>';
?>
</CENTER> 
```

# javascript - 如何填写由 Raphael (JavaScript) 中的路径定义的区域？

> ID：11584637
> 
> 赞同：1
> 
> 时间：2012-07-20T18:03:18.360
> 
> 标签：javascript, charts, raphael

假设我在 Raphael 中有一条由字符串绘制的路径：

M 163 420 R 163 360 188 330 213 210 238 270 263 30 288 60 313 90 338 180 363 330 388 420

它会产生这样的结果：

![示例输出](../Images/5bc7239d8e844b72269bd6eaf43f9ce5.png)

如何使用 Raphael 用颜色填充路径下方的区域，例如面积图？由于我知道底部边缘的起点和终点，我可以通过添加“L 163 420”以从右下角到左下角画一条直线来继续路径并使其成为一个闭环。

我在文档中找不到任何关于创建区域以使用路径填充的内容，但这肯定是可能的，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:06:21.167

使用填充属性。你也不需要关闭路径，拉斐尔可以弄清楚。

```
paper.path("M 163 420 R 163 360 188 330 213 210 238 270 263 30 288 60 313 90 338 180 363 330 388 420")
     .attr("fill", "red"); 
```

# ruby-on-rails - 使用 Ruby 登录到远程系统日志服务器

> ID：11584642
> 
> 赞同：0
> 
> 时间：2012-07-20T18:03:36.310
> 
> 标签：ruby-on-rails, ruby, syslog

我想从 ruby​​ 创建日志到 Syslog 服务器（更准确地说是 Kiwi Syslog 服务器）。

我不想将 ruby​​ 或 rails 的东西记录到 syslog 服务器。我想在事件发生时创建一个预定义的日志消息，并使用他们的 Kiwi Syslog 服务器将其记录到远程服务器。

关于如何做到这一点的任何线索？（我使用的是 ruby​​ 1.8.7 和 rails 2.3.14）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:09:25.180

Ruby 有一个内置的 Syslog 模块，您可以直接使用它来编写消息。

[1.9.3](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/syslog/rdoc/Syslog.html) [1.8.7](http://ruby-doc.org/stdlib-1.8.7/libdoc/syslog/rdoc/Syslog.html)

# c# - 使用 AES256 的 CryptDerive 密钥

> ID：11584645
> 
> 赞同：0
> 
> 时间：2012-07-20T18:03:39.827
> 
> 标签：c#, cryptography, aes

我正在尝试在 C# 中重新创建此 openssl 命令：

```
openssl enc –e –aes-256-cbc –k SecretPhrase1234 –in profile.xml –out profile.cfg 
```

然后，该加密文件将由设备加载，该过程描述如下：

> 小写 -k 在密钥之前，可以是任何纯文本短语，用于生成随机 64 位盐。然后，结合使用 –k 参数指定的秘密，它得出一个随机的 128 位初始向量和实际的 256 位加密密钥。

因此，在我的 C# 应用程序中，我需要使用“SecretPhrase1234”创建一个随机的 64 位盐。然后我需要导出一个 128 位的 IV 和一个 256 位的密钥。该设备已经加载了密码短语。

这是我的代码：

```
AesManaged aes = new AesManaged();

// Encrypt the string to an array of bytes.
aes.KeySize = 256;
aes.BlockSize = 128;
aes.Mode = CipherMode.CBC;

Rfc2898DeriveBytes rfc = new Rfc2898DeriveBytes("SecretPhrase1234", 8);
byte[] SALT = rfc.Salt;
PasswordDeriveBytes pdb = new PasswordDeriveBytes("SecretPhrase1234", SALT);               
byte[] IV = rfc.GetBytes(aes.BlockSize/8);
//The next line doesn't work
byte[] KEY = pdb.CryptDeriveKey("AES", "SHA1", aes.KeySize, IV); 
aes.Key = KEY;
aes.IV = IV;

byte[] encrypted = AESEncryption.EncryptStringToBytes(plainConfig, 
                                                    aes.Key, aes.IV);             
tw.WriteLine(Encoding.ASCII.GetString(encrypted));
tw.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:31:21.477

我找到了一个非常适合我需要的 OPENSSL 的 .NET 实现。在这里： [openssl 仅使用 .NET 类](https://stackoverflow.com/questions/5452422/openssl-using-only-net-classes)

# php - 用户在网站上创建和管理的菜单

> ID：11584646
> 
> 赞同：0
> 
> 时间：2012-07-20T18:03:39.827
> 
> 标签：php, javascript, jquery, cookies, menu

我经常收到允许用户在我的网站上创建菜单的请求，他们可以在其中管理他们希望在我的网站上经常使用的页面列表。一个很好的例子是weathernationtv.com 或weather.com，用户可以在列表中添加或删除最喜欢的地方，这样他们就可以在城市预测之间快速单击。我发现了一个似乎可以执行此操作的 Joomla 模块，但我不使用 Joomla。关于脚本或方法的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:18:39.200

这可能对您有用：[menu-php](http://sourceforge.net/projects/menu-php/)。

它允许您根据数据库的内容动态创建菜单

# r - setkey 和 := 运算符、data.table、R

> ID：11584648
> 
> 赞同：18
> 
> 时间：2012-07-20T18:03:43.170
> 
> 标签：r, dataframe, data.table, apply

使用该`data.table`软件包时，我有点不确定何时需要`setkey()`。例如，当使用`:=`带有`by`选项的运算符时，即使我没有设置键，事情似乎仍然非常快。有人可以说明什么时候`setkey()`需要，什么时候不需要？`:=`如果在调用with之前没有必要，`by`那么包怎么这么快，因为它可能必须通过顺序搜索而不是二进制搜索来做与标准R`data.table`中相同的事情，因为它不知道 my是否实际上是按 的参数排序。`apply``data.frame``data.table``by`

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-20T18:42:53.893

这 2 个常见问题解答似乎很接近：

> *3.2 我没有大桌子上的钥匙，但是分组还是很快的。这是为什么？*
> `data.table`使用基数排序。这比其他排序算法快得多。Radix 仅适用于整数，请参阅`?base::sort.list(x,method="radix")`. 这也是为什么`setkey`快的原因之一。当没有设置密钥，或者我们以与密钥不同的顺序分组时，我们称其为 ad hoc by。
> 
> *3.3 为什么按key中的列分组比ad hoc by快？*
> 因为每个组在 RAM 中是连续的，从而最大限度地减少页面获取，并且可以批量复制内存（`memcpy`在 C 中）而不是在 C 中循环。

它没有说并且可能应该做的是，在您注意到 keyed by 和 ad hoc by 之间的区别之前，您需要一个非常大的数据集，其中每个组也非常大。类似于 100 组，每组 100MB（一个 10GB 的 data.table），例如 1e8 行和 13 列。否则，没有必要`setkey`先做，尤其是因为这会很麻烦。

# asp.net-mvc-3 - MVC asp.net 3 和 $ajax 调试

> ID：11584654
> 
> 赞同：0
> 
> 时间：2012-07-20T18:04:16.163
> 
> 标签：asp.net-mvc-3, debugging, jquery

我正在寻找一种方法来调试 $.ajax 和 Controller 操作之间发生的事情。有没有办法查看这些延伸有多长以及它发生的地方是否有延迟（如果是网络，那么在哪里？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T07:42:25.063

这是您可以尝试的一种方法来隔离问题。您启动一个**全新的**ASP.NET MVC 应用程序并放置一个模拟某些工作的控制器操作：

```
public ActionResult SetSearchResults(SearchCriteria searchCriteria)
{
    Thread.Sleep(400);
    return Json(new { success = true });
} 
```

然后你用 AJAX 调用它：

```
$.ajax({
    contentType: 'application/json, charset=utf-8',
    type: "POST",
    url: '@Url.Action("SetSearchResults")',
    data: JSON.stringify({ }),
    cache: false,
    success: function (response) {
    }
}); 
```

然后观察在您的 javascript 调试工具中执行 AJAX 请求所需的时间（我使用的是 Chrome 开发人员工具栏，但如果您愿意，也可以使用 FireBug）：

![在此处输入图像描述](../Images/012f69d63c90b82d2273417ccaefdbce.png)

405 毫秒。太好了，我想这个数字不会让任何人感到惊讶。如果你得到一个不同的号码，你可能会开始严重担心。但我怀疑你会得到一个不同的号码。所以问题既不来自 ASP.NET MVC 也不来自 AJAX。

那是准系统。现在你可以开始为你的控制器动作添加一些真正的工作，通过使用数据库调用和其他东西来塑造它，直到你找到确凿的证据。逐步添加内容。首先手动实例化您的存储库类，然后如果您正在使用 DI 框架，请稍后添加，等等... 一次执行一步非常重要。

# xml - 使用 XSLT 转换获取 XML 的一部分

> ID：11584656
> 
> 赞同：0
> 
> 时间：2012-07-20T18:04:34.790
> 
> 标签：xml, xslt

我是 XSL 转换的新手。我正在尝试使用 XSLT 提取 XML 的一部分。

源 XML

```
<tree>
    <trunk>
        <branch>
            <leaves></leaves>
            <flowers></flowers>
            <fruits></fruits>
        </branch>
    </trunk>
</tree> 
```

我期待以下 XML 作为输出

```
<root>    
    <branch>
        <leaves></leaves>
        <flowers></flowers>
        <fruits></fruits>
    </branch>
</root> 
```

请提供转换，我长期以来一直在做一些随机的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T18:43:30.300

```
 <xsl:template match="/tree/trunk/branch">
    <root>
      <xsl:copy-of select="."/>
    </root>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:43:24.867

类似于以下内容

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0" >

<xsl:template match="/*">
    <xsl:element name="root">
        <xsl:for-each  select="//branch">
            <xsl:element name="branch">
                <xsl:for-each select="*">
                    <xsl:copy-of select="."/>
                </xsl:for-each>
            </xsl:element>
        </xsl:for-each>
    </xsl:element>
</xsl:template> 
```

# mysql - 建模多对多一元关系和 1:M 一元关系

> ID：11584657
> 
> 赞同：0
> 
> 时间：2012-07-20T18:04:35.893
> 
> 标签：mysql, database, database-design, erd

我回到数据库设计，我意识到我的知识有很大的差距。

我有一个包含类别的表。每个类别可以有许多子类别，每个子类别可以属于许多超类别。

我想创建一个包含所有子类别文件夹的类别名称的文件夹。（像windows文件夹这样的视觉对象）所以我需要对子类别进行快速搜索。

我想知道在这种情况下使用 1:M 或 M:N 关系有什么好处？以及如何实现每个设计？

我创建了一个 1:M 一元关系的 ERD 模型。（该图还包含一个费用表，其中存储了所有费用值，但在这种情况下无关紧要）

![1：一元关系](../Images/4b9478bf36bde970b928482fff4c3ea3.png)

这个设计正确吗？

多对多一元关系是否允许更快地搜索超类别并且默认情况下是最好的设计？

**我更喜欢包含 ERD 的答案**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:39:05.727

如果我理解正确，一个子类别最多可以有一个（直接）超类别，在这种情况下，您不需要单独的表。这样的事情就足够了：

![在此处输入图像描述](../Images/f98fe5065307494fd2fcbb656e4160dc.png)

显然，您需要一个递归查询来获取所有级别的子类别，但如果您在 PARENT_ID 上放置一个索引，它应该是相当有效的。

朝相反的方向前进（并获取所有祖先）也需要递归查询。由于这将需要搜索 PK（自动索引），这也应该是相当有效的。

如需更多想法和不同的性能权衡，请查看[此幻灯片](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:57:03.790

在某些情况下，在关系数据库中维护多级层次结构的最简单方法是[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)，有时也称为“修改的前序树遍历”（MPTT）。

基本上，树节点不仅存储父 id，还存储最左边和最右边叶子的 id：

```
spending_category
-----------------
parent_id    int
left_id      int
right_id     int
name        char 
```

这样做的主要好处是，现在您可以通过单个查询获得节点的整个子树：子树节点的 id 介于 left_id 和 right_id 之间。有很多变化；其他存储节点的深度作为父节点 ID 的补充或替代。

一个缺点是 left_id 和 right_id 在插入或删除节点时必须更新，这意味着这种方法仅适用于中等大小的树。

Branko 提到的[维基百科文章](http://en.wikipedia.org/wiki/Nested_set_model)和[幻灯片](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)比我更好地解释了这项技术。如果您想了解更多关于在关系数据库中存储分层数据的不同方法，还可以查看[此资源列表。](http://troels.arvin.dk/db/rdbms/links/#hierarchical)

# javascript - Rails 3 javascript：如何使用参数渲染部分

> ID：11584658
> 
> 赞同：3
> 
> 时间：2012-07-20T18:04:39.703
> 
> 标签：javascript, ruby-on-rails-3

我仍然掌握 Rails 的窍门。在这里，我使用的是 Rails 3，目标基本上是当我单击订阅按钮时触发 AJAX 调用，post_form 部分呈现在我刚刚订阅的主题的下方。然后该按钮变为取消订阅按钮，并且 post_form 部分被删除。按钮的切换单独起作用（即：通过删除紧随其后的两个片段中的第二行），但 *post_form* 部分的呈现不起作用。

问题是我似乎无法在以下两个部分中获得正确的语法和/或参数传递。只是没有传递主题对象，单击订阅或取消订阅按钮时，我收到 NilClass 错误的无效模型名称。如果我手动刷新页面，部分会以正确的方式呈现或隐藏，因此实际上只是 AJAX 部分无法正常工作。

意见/订阅/create.js.erb

```
$("#subscription_form").html("<%= escape_javascript(render('users/unsubscribe')) %>");
$("#post_form").html("<%= escape_javascript(render('shared/post_form', :topic => @topic)) %>"); 
```

意见/订阅/destroy.js.erb

```
$("#subscription_form").html("<%= escape_javascript(render('users/subscribe')) %>");
$("#post_form").html("<%= escape_javascript(render('shared/post_form', :topic => @topic)) %>"); 
```

意见/用户/_subscription_form.html.erb

```
<% unless current_user?(@user) %>
  <div id="subscription_form">
  <% if current_user.subscribed?(@topic) %>
    <%= render 'users/unsubscribe', :topic => @topic %>
  <% else %>
    <%= render 'users/subscribe', :topic => @topic %>
  <% end %>
  </div>
<% end %> 
```

控制器/订阅控制器.rb

```
class SubscriptionsController < ApplicationController
      before_filter :signed_in_user

      respond_to :html, :js

      def create
        @topic = Topic.find(params[:subscription][:topic_id])
        current_user.subscribe!(@topic)
        respond_with @topic
      end

      def destroy
        @topic = Subscription.find(params[:id]).topic
        current_user.unsubscribe!(@topic)
        respond_with @topic
      end
   end 
```

意见/共享/_post_form.html.erb

```
<%= form_for(@post) do |f| %>
  <div class="field">
    <%= f.hidden_field :topic_id, :value => @topic.id %>
    <%= f.text_area :content, placeholder: "Tell us about it ..." %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

如果有任何帮助，关系是：

post -> belongs_to -> 主题和主题 -> has_many -> posts

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:22:52.460

看起来您在“views/_post_form.html.erb”文件中使用了变量“@post”。

```
<%= form_for(@post) do |f| %> 
```

由于您没有在操作中的任何位置设置该变量，您将收到空引用错误。

你需要做这样的事情：

```
def create
  @post = Post.find(the_post_id)
  @topic = Topic.find(params[:subscription][:topic_id])
  current_user.subscribe!(@topic)
  respond_with @topic
end 
```

此外，您将“主题”变量作为本地变量传递，但将其作为实例变量访问。您应该将 _post_form.html.erb 文件更改为如下所示：

```
<%= form_for(@post) do |f| %>
  <div class="field">
    <%= f.hidden_field :topic_id, :value => topic.id %>
    <%= f.text_area :content, placeholder: "Tell us about it ..." %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

我没有现成的 ruby​​ 环境，所以我无法验证这是否可以解决您的问题，但我认为它应该让您朝着正确的方向前进。

# entity-framework-4 - LINQ to Entities 不支持指定的类型成员。仅支持初始化器、实体成员和实体导航属性

> ID：11584660
> 
> 赞同：78
> 
> 时间：2012-07-20T18:04:43.617
> 
> 标签：entity-framework-4, linq-to-entities

```
var result =
    (from bd in context.tblBasicDetails
     from pd in context.tblPersonalDetails.Where(x => x.UserId == bd.UserId).DefaultIfEmpty()
     from opd in context.tblOtherPersonalDetails.Where(x => x.UserId == bd.UserId).DefaultIfEmpty()
     select new clsProfileDate()
     {
         DOB = pd.DOB
     });

foreach (clsProfileDate prod in result)
{
    prod.dtDOB = !string.IsNullOrEmpty(prod.DOB) ? Convert.ToDateTime(prod.DOB) : DateTime.Today;
    int now = int.Parse(DateTime.Today.ToString("yyyyMMdd"));
    int dob = int.Parse(prod.dtDOB.ToString("yyyyMMdd"));
    string dif = (now - dob).ToString();
    string age = "0";
    if (dif.Length > 4)
    age = dif.Substring(0, dif.Length - 4);
    prod.Age = Convert.ToInt32(age);
}

GetFinalResult(result); 
```

* * *

```
protected void GetFinalResult(IQueryable<clsProfileDate> result)
{
    int from;
    bool bfrom = Int32.TryParse(ddlAgeFrom.SelectedValue, out from);
    int to;
    bool bto = Int32.TryParse(ddlAgeTo.SelectedValue, out to);

    result = result.AsQueryable().Where(p => p.Age >= from);
} 
```

在这里，我遇到了一个例外：

> LINQ to Entities 不支持指定的类型成员“Age”。仅支持初始化程序、实体成员和实体导航属性。

如果 Age 不在数据库中，它是我在 clsProfileDate 类中创建的用于从 DOB 计算 Age 的属性。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-07-21T11:55:54.610

您不能使用未映射到`Where`表达式中的数据库列的属性。您必须基于映射属性构建表达式，例如：

```
var date = DateTime.Now.AddYears(-from);
result = result.Where(p => date >= p.DOB);
// you don't need `AsQueryable()` here because result is an `IQueryable` anyway 
```

作为未映射`Age`属性的替代品，您可以将此表达式提取到静态方法中，如下所示：

```
public class clsProfileDate
{
    // ...
    public DateTime DOB { get; set; } // property mapped to DB table column

    public static Expression<Func<clsProfileDate, bool>> IsOlderThan(int age)
    {
        var date = DateTime.Now.AddYears(-age);
        return p => date >= p.DOB;
    }
} 
```

然后以这种方式使用它：

```
result = result.Where(clsProfileDate.IsOlderThan(from)); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-16T16:12:17.553

很多人会说这是一个糟糕的答案，因为这不是最佳实践，但您也可以在 where 之前将其转换为 List。

```
result = result.ToList().Where(p => date >= p.DOB); 
```

Slauma 的答案更好，但这也可以。这花费更多，因为 ToList() 将对数据库执行查询并将结果移动到内存中。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-12-04T15:50:24.877

当您不小心忘记为属性定义 setter 时，您也会收到此错误消息。例如：

```
public class Building
{
    public string Description { get; }
}

var query = 
    from building in context.Buildings
    select new
    {
        Desc = building.Description
    };
int count = query.ToList(); 
```

对 ToList 的调用将给出相同的错误消息。这是一个非常微妙的错误，很难检测到。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-17T14:48:12.123

我忘记选择列（或将属性设置/映射到列值）：

```
IQueryable<SampleTable> queryable = from t in dbcontext.SampleTable
                                    where ...
                                    select new DataModel { Name = t.Name }; 
```

`queryable.OrderBy("Id")`即使定义`DataModel`了属性，调用也会抛出异常`Id`。

正确的查询是：

```
IQueryable<SampleTable> queryable = from t in dbcontext.SampleTable
                                    where ...
                                    select new DataModel { Name = t.Name, Id = t.Id }; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-02-22T23:18:48.223

就我而言，我仅在生产中收到此错误消息，但在本地运行时没有收到此错误消息，即使我的应用程序的二进制文件是相同的。

在我的应用程序中，我[使用自定义`DbModelStore`](https://www.fusonic.net/developers/2016/04/25/entity-framework-6-pregenerate-model-and-view-cache/)，以便将运行时生成的 EDMX 保存到磁盘并在启动时从磁盘加载（而不是从头开始重新生成）以减少应用程序启动时间 - 由于我的代码中的错误我没有使磁盘上的 EDMX 文件无效 - 因此生产使用磁盘中旧版本的 EDMX 文件，该文件引用了我在异常错误消息中重命名类型名称之前应用程序类型的旧版本。

删除缓存文件并重新启动应用程序修复它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-13T10:39:20.773

在这种情况下，最简单和最好的方法之一是先将其转换为`list`然后使用`where`or `select`。

```
result = result.ToList().where(p => date >= p.DOB); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-23T07:39:58.117

在 WHERE 子句之前检查 Count() 解决了我的问题。它比 ToList() 便宜

```
if (authUserList != null && _list.Count() > 0)
    _list = _list.Where(l => authUserList.Contains(l.CreateUserId)); 
```

# asp.net - ASP.NET 缓存建议

> ID：11584661
> 
> 赞同：0
> 
> 时间：2012-07-20T18:04:43.557
> 
> 标签：asp.net, caching, sqlcachedependency

我有一个 ASP.NET 网站，我想为其实现 ASP.NET 缓存。有一个只有主用户登录时才能看到的项目主列表。所有其他用户只能看到主列表的一个子集。

我想使用 SqlCacheDependency 缓存主列表，但我认为我做不到，因为 SqlCacheDependency 仅适用于涉及来自单个数据库的表的查询。不幸的是，我的主列表存储在几个数据库中，并且不时更新。

在我的情况下，缓存主列表但仍保持最新状态的最佳方法是什么？

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:26:48.263

您可以使用 .net 缓存来存储您的对象吗？

[http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)

# opencv - 访问 OpenCV Mat 元素会给出错误的结果

> ID：11584662
> 
> 赞同：1
> 
> 时间：2012-07-20T18:04:44.280
> 
> 标签：opencv, matrix

我是 OpenCV 的新手，对如何以正确的方式访问 MAt 有点困惑。

我有两个 IplImages revA 和 revB。我用他们的数据创建新的 Mat 并比较这些矩阵并尝试保存 Mat r 中的差异。现在我需要知道差异在哪里。

我的尝试：

```
revA=cvLoadImage(argv[1], 1);
revB=cvLoadImage(argv[2],1);

IplImage* changeMap = cvCreateImage(cvGetSize(revA), IPL_DEPTH_8U, 1); 

cv::Mat a(revA);
cv::Mat b(revB);
cv::Mat r(changeMap);

cv::compare(a, b, r, CV_CMP_EQ);
imshow( "changes", r); 
```

我看到窗口中存在差异，它们看起来也正确，但是当我尝试执行以下代码之类的操作时，我从来没有找到不是 255 的值...

```
for(int i=0; i<r.rows; i++){
    for(int j=0; j<r.cols; j++){ 
        cv::Vec3b c = r.at<cv::Vec3b>(0,0);
        if(c[0] != 255 || c[1] != 255 || c[2] != 255){
            printf("%d %d %d\n", c[0], c[1], c[2]);  
        }
    }
} 
```

有人可以弄清楚，我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T03:09:07.557

第一个问题是您试图访问`Mat`3 通道图像，但您清楚地将其加载`IplImage`为灰度，即单通道，因此您需要执行以下操作：

```
for(int i=0; i<r.rows; i++){
    for(int j=0; j<r.cols; j++){
        float pixel = r.at<float>(i,j);
    }
} 
```

第二个问题已经在上面的代码中修复了，但是您总是在索引处访问像素，`0,0`而不是`i,j`在循环的每次迭代中。呵呵

# javascript - 如何在简单模式框中嵌入带有“#”的 URL 的 iFrame？

> ID：11584667
> 
> 赞同：0
> 
> 时间：2012-07-20T18:05:08.577
> 
> 标签：javascript, jquery, simplemodal

我正在尝试执行以下操作：

```
$("#link_id").click(function() {
    $.modal('<div class="framed-view"><iframe src="http://domain.com/stuff#12"/></div>');
            }); 
```

使用 jQuery simplemodal 插件。

但是，当我单击该链接时 - 显示的链接是： [http ://domain.com/stuff](http://domain.com/stuff)

而不是

[http://domain.com/stuff#12](http://domain.com/stuff#12)

有谁知道为什么 iframe 会忽略哈希标签之后的所有内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:07:55.450

问题是这个 HTML 在 JavaScript 中，当某些字符与标准 JS 字符冲突时必须正确转义。

`\`像此用户一样使用主题标签转义。[如果 url 具有哈希标记并且用户刚刚使用浏览器向前或向后导航，则 JavaScript 函数？](https://stackoverflow.com/questions/9792159/javascript-function-if-url-has-hash-tag-and-user-has-just-navigated-forward-or-b)

您可能还需要转义`/`字符。

# playframework-2.0 - 播放框架 2 HornetQ

> ID：11584670
> 
> 赞同：2
> 
> 时间：2012-07-20T18:05:11.933
> 
> 标签：playframework-2.0, hornetq

我可以将 Play Framework 2.0 与 HornetQ 集成吗？我有一个 HornetQ 服务器正在运行，我想使用来自我的 Play Web 应用程序的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T06:56:57.860

有可能的。您必须在`project/Build.scala` [依赖文件](http://www.playframework.org/documentation/2.0.2/SBTDependencies)中添加 HornetQ 客户端依赖项。

[您可以在Global 对象](http://www.playframework.org/documentation/2.0.2/JavaGlobal)`onStart()`的方法中配置您的 HornetQ 客户端。

然后，在 Play 控制器或您想要的任何类中，您可以将消息发送到您的 HornetQ 代理，就像您在标准 Java EE 应用程序中所做的那样。

# python - 防止系统范围和 virtualenv ipython 使用同一目录进行配置

> ID：11584675
> 
> 赞同：2
> 
> 时间：2012-07-20T18:05:35.210
> 
> 标签：python, configuration, virtualenv, ipython, rc

最近，我开始研究`virtualenv`但遇到了`ipython`. 我使用创建了虚拟环境

```
virtualenv --no-site-packages ENV 
```

从 ENV 内部（即之后`source bin/activate`），我安装了`ipython`.

```
pip install ipython 
```

然而，`ipython`在 ENV 中使用后，我在使用“普通”版本时遇到了问题。基本上，我收到以下警告：

```
WARNING: Configuration file ipythonrc not found. Ignoring request. 
```

和

```
WARNING: Problems loading configuration file 'ipythonrc'
Starting with default -bare bones- configuration. 
```

系统范围`ipython`的版本是 0.10（仍然使用 Kubuntu 10.04 LTS），而 ENV 内部的版本是 0.13。显然，配置发生了变化。如果我删除文件夹`$HOME/.ipython/`并启动系统范围的安装，一切都会再次正常运行。但是一旦我`ipython`从 ENV 中启动，内容 `$HOME/.ipython/`就会被替换，特别是文件`ipythonrc` 被删除。

所以我的问题是，如何防止两个`ipython`s 使用同一个文件夹`$HOME/.ipython/`进行配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:24:54.823

将环境变量设置为`$IPYTHONDIR`您的虚拟环境中的某个值。IPython 配置位置是相对于它确定的，因此您只需要添加`export IPYTHONDIR="$VIRTUAL_ENV/.ipython"`或类似于您的激活（并在停用时进行适当的反转）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:12:58.253

我建议为 virtualenv 版本使用不同的配置文件。

一种选择是在`bin/activate`文件中添加别名。

这样的事情应该可以解决问题：

```
alias ipython="ipython -rcfile $VIRTUAL_ENV/.ipythonrc" 
```

或者，将`IPYTHONDIR`变量设置为`$VIRTUAL_ENV/.ipython/`也应该有效。此选项在联机帮助页中显示为未记录，但代码显示它正在使用该选项。

# asp.net - 已发布的 asp.net WebApp 将无法连接。401.1 未经授权

> ID：11584676
> 
> 赞同：2
> 
> 时间：2012-07-20T18:05:35.740
> 
> 标签：asp.net, sql-server-2008, iis-7.5, windows-authentication, publishing-site

asp.net app (c#) 在调试模式下运行良好；已发布，出现 401.1 错误（未经授权）。当我输入网址时，会出现一个对话框，询问用户名和密码。把它放在3倍，错误。

它是一个内部应用程序，仅使用 Windows 身份验证。

*   IIS 7.5，使用 ApplicationPoolIdentity。

*   SQLServer 数据库

来自 401.1 页面的特定错误消息：

*   模块 WindowsAuthenticationModule

*   通知 AuthenticateRequest

*   处理程序 ExtensionlessUrlHandler-Integrated-4.0

*   错误代码 0x8009030e

*   请求的 URL [http://smalltools.dbsvc.com:80/](http://smalltools.dbsvc.com:80/) Ap

*   物理路径 C:\inetpub\SmallTools

*   登录方式尚未确定

*   登录用户尚未确定

该应用程序有一个用户表来确定该用户的“角色”。我在母版页中放置了一个方法，该方法根据经过身份验证的用户查询表，并返回角色。这反过来又决定了哪些按钮在导航栏上可见。

查看安全日志，发现以下 3 个条目：

```
2012-07-20 14:55:11 10.0.1.38 GET / - 80 - 10.0.13.106 Mozilla/5.0+(Windows+NT+6.1;+rv:14.0)+Gecko/20100101+Firefox/14.0.1 401 2 5 15

2012-07-20 14:55:20 10.0.1.38 GET / - 80 DE\cin.bro 10.0.13.106 Mozilla/5.0+(Windows+NT+6.1;+rv:14.0)+Gecko/20100101+Firefox/14.0.1 500 0 0 125

2012-07-20 14:55:20 10.0.1.38 GET /favicon.ico - 80 DE\cin.bro 10.0.13.106 Mozilla/5.0+(Windows+NT+6.1;+rv:14.0)+Gecko/20100101+Firefox/14.0.1 404 0 2 0 
```

知道什么可能导致无法登录吗？任何线索我可以修复以使其工作？我研究了一整天，没有发现可能是什么问题。任何信息都将不胜感激。谢谢辛迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:11:49.957

我已经成功解决了这个问题；我不得不允许冒充，并对 AD 组进行调整。

以下链接中的文章帮助很大：http: [//msdn.microsoft.com/en-us/library/bsz5788z.aspx](http://msdn.microsoft.com/en-us/library/bsz5788z.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:07:41.197

如果这是一个外部站点，那么 Windows 身份验证并不是真正可行的方法。但是你仍然可以这样做，这里有一些我发现应该有帮助的链接。

[关于类似问题的问答](http://www.techrepublic.com/forum/questions/101-229298/using-active-directory-authentication-for-external-web-site)

[微软关于如何实施的指南](http://support.microsoft.com/kb/326340)

通常，Windows 身份验证用于内部系统，因为用户直接登录到系统并且他们的所有凭据都在那里。但是，对于外部应用程序，情况并非总是如此，因为您的家庭 Windows 帐户和工作 Windows 帐户并不相同，此外，您甚至可能没有从外部位置使用 Windows。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-30T15:19:03.677

我遇到的另一个问题是本地环回地址安全检查，当您设置 DEV 实例并修改主机文件以使用完全限定域名 (FQDN) 时，或者只是当您使用自定义标头浏览 IIS 站点并且名称与服务器主机名不匹配时. 虽然这对于生产服务器是必要的，但在设置开发人员环境时却是个问题。

"*[当网站使用集成身份验证并且具有映射到本地环回地址的名称时，会出现此问题](https://support.microsoft.com/en-gb/help/896861)*"

有两种主要方法可以解决该问题：

1.  **通过创建/更新多字符串值**指定主机名（如果需要 NTLM 身份验证，则首选方法）：

    **HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\MSV1_0**

2.  **通过将以下注册表DWORD 值**设置为**1**来禁用环回检查（较少推荐的方法 - 不要在生产服务器上使用）

     ****HKLM\SYSTEM\CurrentControlSet\Control\Lsa\DisableLoopbackCheck**** 

 **有关详细概述和注册表设置，请参阅此*[HTTP 401.1 - 未经授权：登录失败 - Microsoft 支持文章](https://support.microsoft.com/en-gb/help/896861)*。**

# vb.net - 表达式中未定义的函数“Work_Days”

> ID：11584686
> 
> 赞同：0
> 
> 时间：2012-07-20T18:06:11.777
> 
> 标签：vb.net, ms-access

我正在尝试运行一个访问 qry，它使用一个模块来执行一些计算。当我运行下面的代码时，我在表达式中得到未定义的函数。任何想法如何解决这一问题？

```
Dim conn As OleDbConnection = New OleDbConnection("Provider = Microsoft.ACE.OLEDB.12.0;Data Source = C:\Users\User\Database.accdb;")
Dim cmd As OleDbCommand = New OleDbCommand()
cmd.Connection = conn
cmd.CommandType = CommandType.StoredProcedure
cmd.CommandText = "qryTest"
conn.Open()
cmd.ExecuteNonQuery()
conn.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:23:42.077

有关使用 SQL 在 Access 中获取工作日的一些说明。为方便起见，这在列中列出。

```
SELECT t.Startdate,
    DateDiff("d",t.Startdate,Date())-(DateDiff("ww",t.Startdate,Date())*2) AS InaccurateWorkDays,
    DateDiff("ww",t.Startdate,Date()) AS WeekEndCount,
    Weekday(Date()) AS EndDateWeekDay,
    DateDiff("d",t.Startdate,Date()+1) Mod 7 AS Remainder,
    IIf([Remainder]>0,
            [WeekEndCount]+(([EndDateWeekDay]=7)*-0.5)
                          +(([EndDateWeekDay]=[Remainder])*-0.5)
                          +(([EndDateWeekDay]<[Remainder])*-1),
            [WeekEndCount]) AS WeekEndCountAdjusted,
    [WeekEndCountAdjusted]*2 AS WeekEndDays,
    (Date()-t.Startdate)-[WeekEndDays] AS WorkDays
FROM table t 
```

结果

```
Startdate   1   2   3   4   5   6   7
01/07/2012  15  2   6   6   2.5 5   14
02/07/2012  14  2   6   5   2   4   14
03/07/2012  13  2   6   4   2   4   13
04/07/2012  12  2   6   3   2   4   12
05/07/2012  11  2   6   2   2   4   11
06/07/2012  10  2   6   1   2   4   10
07/07/2012  9   2   6   0   2   4   9
08/07/2012  10  1   6   6   1.5 3   9
12/07/2012  6   1   6   2   1   2   6
18/07/2012  2   0   6   3   0   0   2 
```

1.  不准确的工作日
2.  周末计数
3.  结束日期星期天
4.  余
5.  WeekEndCountAdjusted
6.  周末日
7.  工作日

基于此处找到的代码：http: [//forum.lessthandot.com/viewtopic.php?f=102 &t=2510&p=13924](http://forum.lessthandot.com/viewtopic.php?f=102&t=2510&p=13924)

# c++ - 如何隔离课堂？

> ID：11584689
> 
> 赞同：1
> 
> 时间：2012-07-20T18:06:21.687
> 
> 标签：c++, class, encapsulation

**foo.h**

```
class Foo {};

namespace {
    class Bar {};
   //...
} 
```

**foo.cpp**

```
Foo foo; // Ok

Bar bar; // Ok, but I want Error! 
```

如何在 * *.cpp*文件中隐藏（隔离）*类 Bar ？*

 *即我不想将`class Bar {}`from * *.h*文件导入 *.h 文件。*.cpp*文件

也许有某种类的封装技术？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:14:16.243

目前尚不清楚您的要求是什么。如果您只想`Bar`在特定`.cpp`文件中可见，那很容易：

富.h：

```
// add include guard here.
class Foo {}; 
```

foo.cpp：

```
#include "foo.h"

namespace {
    class Bar {};
}

Foo foo;

Bar bar; 
```

请注意，这会限制to的*所有*可见性。外面的任何人都不会意识到它甚至存在。`Bar``foo.cpp``foo.cpp`

但是，实际上并没有一种方法可以使类仅在标头中可见-标头的全部意义在于您将其包含在一个或多个`.cpp`文件中，并且当您这样做时，它包含的任何内容都会在该`.cpp`文件中可见。

如果这就是您认为自己想要的，那么您很有可能需要退后一步，告诉我们您真正想要实现的目标。可能有一种方法，但是您尝试的方法几乎肯定是错误的。基本划分是标题用于一般可见的内容；任何私有的东西都被限制在实现（`.cpp`）文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:19:56.600

这个怎么样

```
class Foo
{
private:
     struct Bar
     {

     };

     void func()
     {
         Bar b; //ok
     }
};

int main()
{

    Foo f; //ok
    Foo::Bar b; //error

    return 0;
} 
```*

# java - 如何检测用户是否从另一个浏览器登录到站点？

> ID：11584691
> 
> 赞同：0
> 
> 时间：2012-07-20T18:06:28.483
> 
> 标签：java, session, login

设想：

用户使用 Firefox 登录 website.com。登录凭据有效，用户被定向到会员页面。

用户尝试使用 chrome 登录 website.com。登录凭据有效，因为用户已经使用 firefox 登录，系统会抛出错误，要求用户关闭其他会话以通过 chrome 登录。

我怎样才能检测到呢？现在，如果用户只使用一个浏览器，我能够检测到它，但是当用户使用两种不同的浏览器在不同时间登录时似乎会中断。

编辑* 我想说这不仅仅是使用不同的浏览器，该网站不应允许多人使用相同的登录凭据登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:24:41.267

我假设您的应用程序是基于 j2EE/servlet 的。如果是这种情况，两个浏览器是相互独立的，因此它们有自己的 sessionId 并且可以独立运行，只要您的应用程序不干扰。

为了防止这种情况，一种实现方法是，在您的 servlet 中保留 SessionID 和 UserID 的 hashmap。您在每次成功登录时填充此信息，例如通过过滤器或阀门。当您填充哈希图时，请检查是否有任何其他 sessionID 已在使用此用户 ID。如果使用，请检查对应的 sessionID 是否仍然处于活动状态。如果它未激活，则允许登录，并删除陈旧的 sessionID。如果它处于活动状态，则终止另一个会话并允许登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:09:44.243

在您的应用程序中，保持每次调用应用程序后更新的用户超时。您可以将用户定义为“锁定”到会话（例如您的 firefox 会话）中，直到超时到期或用户请求注销。当您在另一个浏览器（例如，chrome）上登录时，它会检查是否有活动会话，如果有，则拒绝登录尝试。

我将举一个简单的例子。这甚至还没有接近生产就绪，仅用于说明目的。

```
class User {
    long lastCheckin;
    int userId;
    String username;
} 
```

现在，当有人在应用程序中执行任何操作时，例如查看页面，您执行此操作

```
user.lastCheckin = System.currentTimeMillis(); 
```

现在，当有人特别要求注销时，您可以这样做

```
user.lastCheckin = 0L; 
```

现在，当有人试图登录时，你这样做

```
if(user.lastCheckin + PREDEFINED_TIMEOUT > System.currentTimeMillis()) {
    return new LoginResponse(false,"User is active in another session.");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T18:11:39.373

如果您使用的是 Spring Security - 它可以由配置文件中的参数指定。

如果只是普通的 java - 在登录期间将用户的会话 ID 放入一些存储中；当他再次尝试登录时，您应该禁止它。但是您需要避免用户在关闭浏览器后很长时间处于存储状态的情况（一种可能的解决方案是短会话超时 + 保持活动请求）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T18:36:37.903

您可以将登录用户的映射存储在应用程序范围变量（如 ServletContext）上。例如，在您的身份验证 servlet 上，您可能可以执行以下操作：

```
Map<String,String> activeUsers = request.getSession().getServletContext().getAttribute("__ONLINE_AUTHENTICATED_USERS");
//if null, context hasn't been prepared yet, create and attach a new one?2 
```

不过你必须小心。作为应用程序范围变量，您需要确保一些线程安全，这是 servletContext.setAttribute/getAttribute 提供的（例如，这些操作不是线程安全的）。您可以通过使用某种应用程序生命周期侦听器来“初始化”servletContext 以获取用户映射来处理此问题。这样您就无需担心 set/getAttribute。您仍然需要考虑地图操作本身（例如使用 jucConcurrentHashMap 可能吗？）。

当用户注销或会话超时时，您还必须注意清理（例如从地图中删除）。

您还必须考虑到用户可能会通过这种方法将自己锁定很长时间（例如关闭浏览器但未正确注销，会话需要在映射被清除之前超时）。

编辑：您还需要考虑可伸缩性，这取决于您的应用程序。你期待一百万在线用户吗？还是只有几千？

# php - 请参阅带有就地参数的学说查询构建器 DQL

> ID：11584696
> 
> 赞同：2
> 
> 时间：2012-07-20T18:06:48.633
> 
> 标签：php, doctrine-orm, dql

是否有机会从所有参数代替标记的学说 Query Builder 对象获取 DQL 查询？

Couse`$query->getDQL()`将返回查询，但使用参数标记而不是实际值，即使它们已由`setParameter`函数设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-22T13:56:02.063

您可以通过以下方式获取参数`$query->getParameters()`

```
print_r(array(
    'dql' => $query->getDQL(),
    'parameters' => $query->getParameters(),
)); 
```

# c# - 绑定更改属性

> ID：11584702
> 
> 赞同：0
> 
> 时间：2012-07-20T18:07:17.953
> 
> 标签：c#, wpf, xaml, binding

它是否可用或这不起作用：更改 Text Box.Text 和后面要更改的属性可以进行这种类型的绑定（我知道这可以通过 Text Box 中的事件进行，我正在寻找可以进行某种绑定）？我应该只在我的鳕鱼中使用 Text Box.Text 吗？

```
<TextBox Text="{Binding Path=NumeClient, Mode=TwoWay}" Height="23" HorizontalAlignment="Left" Margin="117,21,0,0" Name="textBox1" VerticalAlignment="Top" Width="249" />

public string NumeClient { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:12:56.450

如果我正确理解了这个问题，您是在问如何设置两种方式绑定到 TextBox 的 Text 属性？

```
<TextBox Text="{Binding Path=YourProperty, Mode=TwoWay}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:28:34.780

这使您的属性都更改了 TextBox 并且 TextBox 更改了属性（来自 MSDN）
添加到您的类构造函数中`DataContext = this;`

```
 public class Person : INotifyPropertyChanged
      {
          private string name;
          // Declare the event
          public event PropertyChangedEventHandler PropertyChanged;
          public string PersonName
          {
              get { return name; }
              set
              {
                  name = value;
                  // Call OnPropertyChanged whenever the property is updated
                  OnPropertyChanged("PersonName");
              }
          }

          // Create the OnPropertyChanged method to raise the event
          protected void OnPropertyChanged(string name)
          {
              PropertyChangedEventHandler handler = PropertyChanged;
              if (handler != null)
              {
                  handler(this, new PropertyChangedEventArgs(name));
              }
          }
      } 
```

XAML：

```
<TextBox Text="{Binding Path=PersonName, Mode=TwoWay}" /> 
```

希望能帮助到你

# shell - 如何使用单个命令从终端创建和打开文件？

> ID：11584704
> 
> 赞同：37
> 
> 时间：2012-07-20T18:07:19.547
> 
> 标签：shell

要从终端创建文件，我键入以下内容...

```
$ touch filename.py 
```

要打开我刚刚从终端创建的文件，然后键入...

```
$ open filename.py 
```

我很想知道是否有一个终端命令可以...创建然后打开（我超级懒惰）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-20T18:15:06.013

在 .bashrc

```
lazytouch()
{
  touch $1
  open $1
} 
```

然后输入

```
$ lazytouch anything.really 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-11T10:37:02.140

这是最懒惰的：

```
$ echo "your text" > myfile.txt 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-29T16:54:20.193

最简单的方法是

```
touch filename; open filename 
```

例子

```
touch myfile.py; open myfile.py 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-15T06:18:36.427

当我想创建一个文件，编辑它并保存它时，我`vim`会在终端上输入。vim 是一个文本编辑器。如果您只是输入，`vim`您会看到文本编辑器。

但是，如果您键入例如`vim example.txt`您打开 vim 并且从那时起您正在处理您创建的文件。除非您这么说，否则该文件不会被保存。所以按`i`你进入vim的编辑模式。允许您将文本放入文件中。如果要保存，只需输入 escape 后跟`:w`，这意味着您正在使用您拥有的名称保存文件，因此对于此示例，它将是 example.txt。保存后，按下后​​输入的所有内容都会`Esc`显示在屏幕的左下方，简单输入`:q`即可。

如果您意识到您并不想保存文件，您可以键入`:q!`，如果您当前处于编辑模式，这意味着您正在键入内容，您只需按`Esc`一次，然后按`:q!`.

这么简短的总结：

*   `vim example.txt`（如果保存将打开编辑器，它将使用给定的名称）
*   `s`（将启用编辑模式，你可以写东西）
*   `Esc`（当您想停止编辑时）
*   `:w`（保存文件）
*   `:q`（退出文件，仅在保存时可用！）
*   `:q!`（丢弃保存并退出文件）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-01T03:42:09.263

您可以使用以下内容创建一个名为“filename.py”的文件，将“Hello World”插入文件中，然后打开该文件，

```
$ echo "Hello World" > filename.py && open filename.py 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-04T18:00:38.953

您可以使用：

```
cat -> youNewFile.someExtension 
```

例子：

```
cat -> myNewFile.txt 
```

完成后按 Ctrl + d 保存或 Ctrl + c 中止（但在这种情况下，它将保存一个空文件。重定向运算符 ( > ) 将创建该文件，如果它不存在于您的文件夹中并且您将能够通过终端正确编辑它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-07T14:47:22.927

要从终端创建文件，我输入以下内容... $ touch filename.py 但无法创建文件

要打开我刚刚从终端创建的文件，然后输入... $ open filename.py 但无法打开文件

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-12T23:31:41.930

在 Mac 上，要创建一个lazytouch 函数来在一行中创建和打开一个文件，您必须编辑 .bashrc。您可能必须先创建它。请注意，如果您是新手程序员。其中一些命令可能需要您预先添加 sudo 以获得创建和保存的权限。在终端中输入这些命令。

```
$ cd ~

$ touch .bashrc

$ open .bash_profile 
```

在 .bash_profile 中输入此配置文件以检查 .bashrc

```
# To get aliases and functions
if [ -f ~/.bashrc ]; then
    . ~/.bashrc
fi 
```

记得保存 .bash_profile。然后在 bash 中执行此操作。

```
$ open .bashrc 
```

在 .bashrc 中输入此文本

```
# .bashrc

# User specific aliases and functions

lazytouch() {
    touch $1
    open $1
} 
```

记得保存 .bashrc

现在您可以 cd 到任何文件夹，然后用一行创建并打开一个文件。

```
$ lazytouch anything.really 
```

# javascript - 在 IE9 中建立内存

> ID：11584705
> 
> 赞同：3
> 
> 时间：2012-07-20T18:07:27.033
> 
> 标签：javascript, html, dom, internet-explorer-9

> **可能重复：**
> [是否需要取消挂钩事件处理程序以避免 IE 中的内存泄漏](https://stackoverflow.com/questions/11461569/is-unhooking-event-handlers-needed-to-avoid-memory-leaks-in-ie)

我在指出 IE9 中的内存来源时遇到了一些麻烦。每次页面刷新，内存使用量会增加约 50Mb。例如，查看 Nordstrom.com，每次页面刷新都会使内存大幅上升，并且达到 30 页或更多页面后页面变得无响应的程度。我没有安装任何 IE 插件。我知道 IE 在垃圾收集 JavaScript 和 DOM 时遇到了一些问题，包括闭包和循环引用，但我认为这在 IE9 中大部分已得到修复。有任何想法吗？什么可能导致 IE9 中的内存堆积？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T00:05:08.950

可能您已经遇到了“有用的功能”，IE 会缓存所有设置的事件处理程序，直到窗口关闭。
据我所知，这是最引人注目和记录在案的内存泄漏 IE（9 仍然）。
查看[此 SO 帖子](https://stackoverflow.com/questions/11461569/is-unhooking-event-handlers-needed-to-avoid-memory-leaks-in-ie)以获取更多信息。

# couchdb - 为什么 couchDB 进行完全复制而不是过滤？

> ID：11584707
> 
> 赞同：1
> 
> 时间：2012-07-20T18:07:33.897
> 
> 标签：couchdb

我在使用 couchdb 复制时遇到了这个问题：我正在使用带有此设置文档的复制器数据库：

```
{
   "_id": "source_to_target",
   "_rev": "1-2a6510e28c2cc7caf0d58a85d705d2b8",
   "source": "http://xxxx:xxxx@localhost:5984/sourcedb",
   "target": "targetdb",
   "create_target": true,
   "continuous": true,
   "filter": "sourcedb/repl_filter",
   "query_params": {
       "someproperty": "somevalue"
   },
   "user_ctx": {
       "name": "someadmin",
       "roles": [
           "_admin"
       ]
   }
} 
```

问题是过滤器功能被忽略了。我确信这是正确的，因为如果我调用：

```
curl -X GET "http://localhost:5984/sourcedb/_changes?filter=sourcedb/repl_filter&someproperty=somevalue&feed=continuous&style=all_docs&since=0" 
```

结果被正确过滤。

我执行如下测试：

我完全擦除了目标数据库。然后我删除上面的复制并从头开始重新创建它。一旦上面显示的复制文档被提交，复制就会开始，而不是过滤的文档，**目标数据库获取所有文档，这构成了我的问题**。日志提示了原因：

```
[Fri, 20 Jul 2012 17:43:38 GMT] [info] [<0.5860.17>] Replication records differ. Scanning histories to find a common ancestor.
[Fri, 20 Jul 2012 17:43:38 GMT] [info] [<0.5860.17>] no common ancestry -- performing full replication 
```

，这让我摸不着头脑，因为我在开始复制之前完全擦除了目标数据库，为什么要使用尚未创建的数据库搜索常见的祖先？显然我错过了一些东西，但我无法弄清楚。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T08:52:55.190

好的，这是解决方案：

正如 smathy 建议的那样，尝试使用新名称的另一个新目标数据库是可行的。所以这让我在日志中搜索得更好一些，我发现虽然我在每次测试中都删除了复制文档，但在这些删除中的某个地方，其中一个未能删除其继续启动并运行的底层复制过程。所以这个僵尸，让我觉得新的没用。事实上，他们工作，过滤掉所有的文档，但僵尸复制继续进行完全复制。

很难在日志中区分实际上总是有 2 个复制在运行，因为僵尸执行完全复制并在日志中附加了很多内容，而普通的几乎没有附加任何内容，因为它过滤掉了所有文档，这让我很感兴趣只有一个，忽略过滤器功能。我应该更仔细地看。

无论如何，由于我总是通过擦除/插入复制文档来开始在蒲团中的复制，并且我从未从命令行或任何其他方式开始复制，我认为删除复制文档并不能保证取消底层复制过程。我将对此进行更多搜索。

# css - Css - 如何在文本框外添加图像（在左侧但触摸框）

> ID：11584708
> 
> 赞同：0
> 
> 时间：2012-07-20T18:07:35.223
> 
> 标签：css, textbox, alignment

在我的网站[http://goo.gl/ok43H](http://goo.gl/ok43H)上，我想在每个白色文本框旁边添加一个小“+”图标（我在这里制作了一个我想要实现的模型：[http://goo .gl/ftRpZ](http://goo.gl/ftRpZ)）但我不知道该怎么做。你有什么建议？非常感谢，

这是html代码：

```
<div class="presentation-plusbox">
<p>Expertise dans l'industrie</p>
<p>blblablabla</p>
<p>blabla</p>
</div> 
```

这是css代码：.presentation-plusbox

```
{
    width: 500px;
    background-color:#FFFFFF;
    padding:10px;   
    margin-left:25%;
    color:#000000;
    margin-bottom:8px;
    opacity:0.95;
    filter:alpha(opacity=95); /* For IE8 and earlier */
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:11:30.597

将您的 + 框定义为内部的 div`.presentation-plusbox`

还添加`position: relative`到`.presentation-plusbox`

然后将以下css应用到加号框

```
.plusBox {
  position: absolute;
  top: 20px;
  left: -50px;
} 
```

当然，您需要进行调整`top`并`left`使其恰到好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:18:03.263

您可以使用`:before`- [http://jsfiddle.net/fgRRw/](http://jsfiddle.net/fgRRw/)

```
div:before {
    content: "+";
    height: 30px;
    width: 30px;
    text-align: center;
    line-height: 30px;
    background: orange;
    color: #fff;
    display: block;
    left: -30px;
    position: absolute;
} 
```

请注意 - IE7 及以下[**链接**](http://caniuse.com/#search=before)`:before`不支持[](http://caniuse.com/#search=before)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:18:21.890

我没有尝试过，但这应该可以。

```
p { position: relative; }
p:after { 
  height: 20px;
  width: 20px;
  background-image: url('image.url.goes.here.jpg');
  position: absolute;
  top: 5px;
  left: -20px;
} 
```**

# matlab - 如何在没有循环的情况下执行矩阵的逐列循环移位

> ID：11584711
> 
> 赞同：4
> 
> 时间：2012-07-20T18:07:49.497
> 
> 标签：matlab

我需要循环移动矩阵的各个列。

如果您想将所有列移动相同的数量，这很容易，但是，在我的情况下，我需要将它们全部移动不同的数量。

目前我正在使用循环，如果可能的话，我想删除循环并使用更快的基于矢量的方法。

我当前的代码

```
A = randi(2, 4, 2);
B = A;
for i = 1:size( A,2 );
   d = randi( size( A,1 ));
   B(:,i) = circshift( A(:,i), [d, 0] );
end 
```

是否可以从此代码中删除循环？

**更新** 我测试了所有三种方法，并将它们与这个问题中描述的循环进行了比较。我计算了在 1000x1000 矩阵上执行 100 次逐列循环移位需要多长时间。我重复了这个测试几次。

**结果**：

*   我的循环耗时超过 12 秒
*   Pursuit的建议不到一秒
*   Zroth 的原始回答只用了 2 秒多一点
*   Ansari 的建议比原始循环慢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:43:35.053

## 编辑

追求是对的：使用 for 循环和适当的索引似乎是这里的方法。这是一种方法：

```
[m, n] = size(A);
D = randi([0, m - 1], [1, n]);
B = zeros(m, n);

for i = (1 : n)
    B(:, i) = [A((m - D(i) + 1 : m), i); A((1 : m - D(i) ), i)];
end 
```

## 原始答案

我以前曾寻找过类似的东西，但我从未遇到过好的解决方案。[对此处](http://www.mathworks.com/matlabcentral/fileexchange/22858-circulant-matrix/content/circulant.m)使用的一种算法的修改在我的测试中略微提高了性能：

```
[m, n] = size(A);
mtxLinearIndices ...
    = bsxfun(@plus, ...
             mod(bsxfun(@minus, (0 : m - 1)', D), m), ...
             (1 : m : m * n));
C = A(idxs); 
```

丑陋？确实。就像我说的，它似乎稍微快一点（对我来说快 2--3 倍）；但是这两种算法都在不到一秒的时间内运行`m = 3000`和`n = 1000`（在一台相当旧的计算机上也是如此）。

值得注意的是，对我来说，这两种算法似乎都优于 Ansari 提供的算法，尽管他的回答肯定更直接。（对我来说，Ansari 的算法的输出与其他两种算法不一致；但这可能只是应用转换方式的差异。）总的来说，`arrayfun`当我尝试使用它时，它似乎很慢。单元阵列对我来说似乎也很慢。但我的测试可能会以某种方式存在偏差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:20:06.593

不知道这会快多少，但你可以试试这个：

```
[nr, nc] = size(A);
B = arrayfun(@(i) circshift(A(:, i), randi(nr)), 1:nc, 'UniformOutput', false);
B = cell2mat(B); 
```

您必须对其进行基准测试，但使用 arrayfun 可能会加快一点速度。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-20T22:55:15.010

我怀疑，您对随机整数矩阵的循环移位操作不会使其变得更加随机，因为这些数字是均匀分布的。

因此，我希望您的问题仅将 randi() 用于演示目的。

# android - 自定义锁屏应用程序中的 android 锁定问题

> ID：11584714
> 
> 赞同：5
> 
> 时间：2012-07-20T18:07:57.987
> 
> 标签：android

我构建了一个自定义锁屏应用程序，它使用广播接收器和服务来监听用户何时打开或关闭屏幕并从那里启动我的活动。该活动应该完全取代锁定屏幕。为了做到这一点，我的应用程序应该禁用 android stock lock，以便我的应用程序可以用作新的锁屏。

相反，一旦首次安装应用程序，服务首次启动，应用程序似乎正在工作。当用户重新打开手机时第一次关闭手机屏幕时，他们会看到我的应用程序在顶部运行，并且能够使用我的应用程序解锁他们的手机。但是一旦进入android操作系统，如果用户下次关闭屏幕并重新打开它而不是回到我的应用程序时按下主页按钮，他们就会被带到库存解锁屏幕，我的应用程序在它下面打开，当它应该在顶部时。

这是我的代码：

我的服务：

```
public class MyService extends Service {
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {

        super.onCreate();
        Log.d("MyService","Service STARTED");
        final IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
        filter.addAction(Intent.ACTION_SCREEN_OFF);
        final BroadcastReceiver mReceiver = new ScreenReceiver();
        registerReceiver(mReceiver, filter);
    }
} 
```

我的广播接收器：

```
public class ScreenReceiver extends BroadcastReceiver {

public static ArrayList<String> runningApplications = new ArrayList<String>();
private Context ctext;
public static boolean screenIsLocked;
public static KeyguardManager keyguardManager;
public static KeyguardLock lock;

@Override
public void onReceive(final Context context, final Intent intent) {
    ctext = context;
    keyguardManager = (KeyguardManager)ctext.getSystemService(Activity.KEYGUARD_SERVICE);
    lock = keyguardManager.newKeyguardLock(Context.KEYGUARD_SERVICE);
    lock.disableKeyguard();

    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        screenIsLocked = true;
        Log.d("ScreenReceiver", "False");

        Intent intenti = new Intent();
        intenti.setClass(context, starterActivity.class);
        intenti.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        intenti.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(intenti);

    } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
        screenIsLocked = false;
        Log.d("ScreenReceiver", "True");

                    Intent intenti = new Intent();
                    intenti.setClass(context, starterActivity.class);
                    intenti.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    intenti.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(intenti);
    }
} 
```

我开始的活动基本上是空的，只有一个解锁按钮`finish();`在按下时调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:31:42.197

与键盘保护相关的逻辑的行为可能因设备而异。这是因为锁屏通常由设备制造商定制（即非库存），其中一些尊重您使用的键盘锁逻辑，而另一些则不这样做。

此外，afaik 控制键盘保护的新方法是使用窗口标志：

```
// inside activity
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
        | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED); 
```

但这并不能解决问题，设备仍然对此有发言权。

例如，根据我的经验，Galaxy Nexus 会在键盘保护上方显示您的活动窗口，但不会关闭它（您认为 Google 品牌的设备应该尊重该标志，嗯），所以如果您在活动中点击后退按钮 - 您将获得标准锁屏 --- 而 HTC One X 似乎正确处理了解除部分：您的活动窗口将导致标准锁屏按预期解除。

我发现无法强制所有设备正常运行。Android API 并不是为了让您能够创建自定义锁屏（至少目前不是）。看看商店里的那些——它们都有同样的问题，就是不够稳定。

正如 Dianne Hackborn[在此 Google Groups 答案中所说](https://groups.google.com/forum/?fromgroups#!topic/android-platform/2xZOIw9-0Jw)，您在这方面可以做的任何事情都是 hack，所以希望它不时打破。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:30:04.573

我试图编译你的代码并得到你所说的同样的错误。我试图对其进行修改以使其正常工作，最终得到了问题！！！

```
public class ScreenReceiver extends BroadcastReceiver {

    public static ArrayList<String> runningApplications = new ArrayList<String>();
    private Context ctext;
    public static boolean screenIsLocked;
    public static KeyguardManager keyguardManager;
    public static KeyguardLock lock;

    @Override
    public void onReceive(final Context context, final Intent intent) {
        ctext = context;
        keyguardManager = (KeyguardManager)ctext.getSystemService(Activity.KEYGUARD_SERVICE);
        lock = keyguardManager.newKeyguardLock(Context.KEYGUARD_SERVICE);
        lock.disableKeyguard();

        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            screenIsLocked = true;
            Log.d("ScreenReceiver", "False");

            Intent intenti = new Intent();
            intenti.setClass(context, starterActivity.class);
            intenti.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            intenti.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(intenti);

        } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            screenIsLocked = false;
            Log.d("ScreenReceiver", "True");

                        Intent intenti = new Intent();
                        intenti.setClass(context, starterActivity.class);
                        intenti.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        intenti.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                        context.startActivity(intenti);
        }
    } 
```

通过对广播接收器类的这种更改，我能够克服这个问题

试试看有没有问题告诉我。

编辑：我认为问题可能出在`finish()`方法上....Android 在需要内存时会转储应用程序...我认为`finish()`可能有助于 android 破坏应用程序（这可能是您的问题随机发生的原因）

# c# - Linq 加入的实体为空

> ID：11584719
> 
> 赞同：1
> 
> 时间：2012-07-20T18:08:16.173
> 
> 标签：c#, asp.net, sql-server, linq

我正在处理的日期比较存在一些问题，您将在代码中看到这些问题（很高兴知道如何在没有编译错误的情况下执行 DateTime.Now.AddMonth(2)），但我真正感兴趣的是这就是为什么当我遍历我的 foreach 并尝试打印雇主组织名称时，我得到一个空指针异常。以下调试确认雇主实体存在，但为空。我希望加入可以让我访问这个......

```
 csoDBConDataContext db = new csoDBConDataContext();
 db.ObjectTrackingEnabled = false;//see above comment

 var results = (from job in db.jobs
                join employer in db.employers on job.employer_id equals 
                     employer.employer_id
                where job.cache_major.Contains("business") && 
                      job.count_major <= 30 && job.del != true &&
                      job.joblocation != null &&
                      DateTime.Now.AddMonth(2).CompareTo(((DateTime)job.postdate)) >= 0 &&
                      DateTime.Now.CompareTo(((DateTime)job.expiredate)) >= 0 &&
                      job.status_id != 406
                 orderby Convert.ToDateTime(job.postdate).DayOfYear
                 select job
                ).Take(20);

 foreach (var j in results) {
          output += j.jobtitle + j.joblocation + j.expiredate + j.postdate +
          j.employer.organizationname + Environment.NewLine + Environment.NewLine;
         } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:13:38.297

通过选择`job`，您实际上是在告诉 Entity Framework 您只对`Job`类型上的标量值感兴趣。

您可以像这样急切地加载雇主属性：

```
var results = (from job in db.jobs.Include("employer")
              // ... 
```

# git - 在 git repo 中使用 https 有什么问题？

> ID：11584720
> 
> 赞同：2
> 
> 时间：2012-07-20T18:08:20.653
> 
> 标签：git

我找到了这个答案[https://stackoverflow.com/a/6565661/20654](https://stackoverflow.com/a/6565661/20654)它说：*一个常见的错误是使用 https 克隆*有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:13:27.027

它说如果你使用 https 克隆 git，每次连接到服务器时，都需要进行 https 身份验证，需要用户名和密码才能建立连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:13:27.847

如果您使用 https 地址进行克隆，那么它将被保存为您的存储库的远程位置，并且将是 git 尝试从中推送和拉取的位置。你可能会问这有什么问题？不多，除了如果您不想登录 github 以进行推送和拉取，那么您希望使用 ssh 地址以便您可以使用您的公钥进行身份验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T20:24:47.230

**这不是一个坏主意。**

运行远程命令时，系统会要求您输入密码。此外，最新版本的 git 将能够缓存您的登录名/密码。

最后，设置密钥并不比使用[netrc(5)](http://linux.die.net/man/5/netrc)容易：

```
$ cat ~/.netrc
machine github.com
    login my_login
    password my_password 
```

当然，你应该保护这个文件，这样没有人可以读取它。

# xml - Flash AS3 sorton() 难度

> ID：11584724
> 
> 赞同：0
> 
> 时间：2012-07-20T18:08:30.200
> 
> 标签：xml, arrays, actionscript-3, flash, sorting

我正在为此苦苦挣扎。我已经在这里解决了其他问题，据我所知，我正在做我应该做的事情。似乎它应该很简单，但我仍然挂断了电话。这是我的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<objects>
    <player>
        <score Name="Josh" Company="AB" Email="josh@ab">200</score>
    </player>
    <player>
        <score Name="Shain" Company="AC" Email="shain@AC.com">1800</score>
    </player>
    <player>
        <score Name="Jessica" Company="AD" Email="jessica@AD.com">20000</score>
    </player>

</objects> 
```

这是我的代码。我将 XML“分数”数据放入带有“for each”循环的数组“myArray”中，这很好，但排序并没有按应有的分数对它们进行排序。

```
var myArray:Array = new Array();

    for each (var item:XML in scores)
    {
        myArray.push(item);
    }
    trace("pre-sort "+myArray);

    myArray.sortOn("score", Array.NUMERIC | Array.DESCENDING);

    trace("post-sort "+myArray); 
```

再一次，这看起来很简单，但我正在用它的键盘敲打我的头。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:24:37.877

我不擅长 XML，但这似乎对我有用。我只是将分数更改为 score.children()。

```
var scores:XML = <objects>
        <player>
          <score Name="Josh" Company="AB" Email="josh@ab">200</score>
        </player>
        <player>
          <score Name="Shain" Company="AC" Email="shain@AC.com">1800</score>
        </player>
        <player>
          <score Name="Jessica" Company="AD" Email="jessica@AD.com">20000</score>
        </player>
        </objects>;

var myArray:Array = new Array();

for each (var item:XML in scores.children())
{
    myArray.push(item);
}
trace("pre-sort "+myArray);

myArray.sortOn("score", Array.NUMERIC | Array.DESCENDING);

trace("post-sort "+myArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:43:42.633

那么[sortOn](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7fa4.html)用于对由对象填充并基于属性字段的数组进行排序，但是您正在使用 XML 节点填充数组，并且这些节点上没有直接命名为“分数”的属性。

您可以使用函数 sort 本身来获得您想要的结果。

```
var xml:XML=
<objects>
    <player>
        <score Name="Josh" Company="AB" Email="josh@ab">200</score>
    </player>
    <player>
        <score Name="Shain" Company="AC" Email="shain@AC.com">1800</score>
    </player>
    <player>
        <score Name="Jessica" Company="AD" Email="jessica@AD.com">20000</score>
    </player>
</objects>;

var myArray=[];
for each (var score:XML in xml..score) {
 myArray[myArray.length] = score;
}

myArray.sort(Array.NUMERIC | Array.DESCENDING);
trace("post-sort "+myArray); 
```

这里有一个关于 Wonderfl 的活生生的例子： [http ://wonderfl.net/c/c6av](http://wonderfl.net/c/c6av)

# sql - 性能优化 - MS SQL Delete query with NOT IN caluse

> ID：11584729
> 
> 赞同：0
> 
> 时间：2012-07-20T18:08:53.293
> 
> 标签：sql, sql-server, sql-server-2008, query-optimization

我有以下 SQL 查询，需要很长时间才能完成。我想检查是否可以使用不同的查询来获得相同的结果，但也可以帮助提高性能。

```
Delete from table1 WHERE fk_id = '1234' AND pk_id NOT IN ('aaaa', 'bbbb', 'cccc'); 
```

注意：`pk_id`是`PK`列并且`fk_id`是`table1`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:12:46.070

我对查询没有任何建议，它非常基本。

但是您可能想尝试添加索引：

```
ALTER TABLE table1 ADD INDEX (fk_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:47:48.313

根据您提供的数据，您的查询似乎没有问题，因为您使用了“AND”条件。现在您需要考虑和分析您的数据库，为什么您的查询需要这么多时间。因此，您可能需要检查以下内容。

1) select count(1)
from table1
where fk_id = '1234' AND pk_id NOT IN ('aaaa', 'bbbb', 'cccc')
这将为您提供要删除的行数。

2）尝试类似
SELECT
T.name AS TableName ,O.name TriggerName
FROM sysobjects O
INNER JOIN sys.tables T ON T.object_id = O.parent_obj
WHERE O.type = 'TR' AND T.name = 'table1'

这将告诉您与您的表关联的触发器。

3）您需要进一步调查索引的表属性，那里存在的任何约束。

# web-services - 通过 Java 客户端调用 Web 服务

> ID：11584730
> 
> 赞同：0
> 
> 时间：2012-07-20T18:08:54.007
> 
> 标签：web-services, soap

我在本地 apache tomcat 上运行了一个 Web 服务。我可以通过 SoapUI 成功地与它交谈。但是，当我用 Java 编写客户端时，它没有给我响应！

这是客户端代码：

```
 SOAPConnectionFactory myFct = SOAPConnectionFactory.newInstance();
    SOAPConnection myCon = myFct.createConnection();
    MessageFactory myMsgFct = MessageFactory.newInstance();
    SOAPMessage message = myMsgFct.createMessage();
    SOAPPart mySPart = message.getSOAPPart();
    SOAPEnvelope myEnvp = mySPart.getEnvelope();
    SOAPBody body = myEnvp.getBody();
    Name bodyName = myEnvp.createName("Ping", "ws","http://ws.myeclipseide.com/");
    SOAPBodyElement gltp = body.addBodyElement(bodyName);
    Name myContent1 = myEnvp.createName("arg0");
    SOAPElement mySymbol1 = gltp.addChildElement(myContent1);
    mySymbol1.addTextNode("test");
    message.saveChanges();

    URLEndpoint endPt = new URLEndpoint("http://localhost:8080/PingWebService/StringPingPort?WSDL");
    SOAPMessage reply = myCon.call(message, endPt);
    myCon.close();
    System.out.println("Response: "+reply.getContentDescription()); 
```

通过soapUI 的调用如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.myeclipseide.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:Ping>
         <!--Optional:-->
         <arg0>testing this</arg0>
      </ws:Ping>
   </soapenv:Body>
</soapenv:Envelope> 
```

知道为什么它不能通过 java 工作吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:21:43.940

getContentDescription() “返回：描述此消息内容的字符串，如果未设置描述，则返回 null”，而不是您的消息内容。

尝试这个：

```
 ByteArrayOutputStream out = new ByteArrayOutputStream();
    reply.writeTo(out); 
    System.out.println("Response: "+out.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T05:30:06.620

> 不工作

异常，错误消息，没有呼叫，...？

乍一看，我看不到任何明显的东西，但是由于您使用的是 Eclipse，请在 Eclipse 下激活 TCP 监视器，通过从 Eclipse 运行您的程序发出您的调用，并检查线路上发送的内容。

# ruby-on-rails-3 - Rails 3 全球数据最佳实践

> ID：11584731
> 
> 赞同：0
> 
> 时间：2012-07-20T18:09:04.293
> 
> 标签：ruby-on-rails-3, global-variables, sunspot

我目前正在我的应用程序布局中的一个部分上呈现一个 JQuery 插件。这部分调用了一个我的应用程序辅助方法，该方法检索使用 Sunspot-solr 生成的数据。它检索的数据是最近创建的在各种模型、上传、用户、文章等中创建的前 30 条记录。我想知道如果它出现在我的应用程序的每个视图中，加载这些数据的最佳做法是什么？

显然，性能是我最关心的问题。

这就是我目前在我的应用程序助手中检索数据的方式：

```
def get_updates
    @updates = Sunspot.search(Upload,Help,User) do    
      order_by(:created_at, :desc)
      paginate page: 1, per_page: 30
    end
    @updates = @updates.results
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:13:16.300

`before_filter`您可以在 ApplicationController中获取该数据。然后它将可用于整个应用程序中任何控制器中呈现的任何视图。

伪代码：

```
class ApplicationController

  before_filter :load_top_30

  private

    def load_top_30
      @top_30 = Records.find() # whatever code you need to fetch the records
    end

end 
```

现在您可以`@top_30`在任何视图中使用。助手不需要（并且可以说不应该）需要获取数据，因为它现在已经在一个实例变量中，只需将其传入即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:24:16.713

如果这只是您希望全局显示的一项，那么在 ApplicationController 中执行它应该没问题，如果您有很多这样的元素，那么您可能想看看[Cells](https://github.com/apotonick/cells/)基本上是可重用的子控制器，您可以将其称为 form您的视图或控制器。

# eclipse - 在 Eclipse 中清理项目后如何从 java.lang.ClassNotFoundException 中恢复

> ID：11584733
> 
> 赞同：0
> 
> 时间：2012-07-20T18:09:13.827
> 
> 标签：eclipse

我刚刚做了一个项目......干净，然后自动没有任何效果。

```
Exception in thread "main" java.lang.NoClassDefFoundError: adventure/Main
Caused by: java.lang.ClassNotFoundException: adventure.Main
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: adventure.Main. Program will exit. 
```

我可以进行构建，但在 Eclipse 中没有构建的输出，他们认为您不能只右键单击文件并选择编译...

为什么他们让 Eclipse 能够进入这种无法控制的状态？这种状态有什么好处？如果项目的这种状态没有优势，为什么可能呢？

除了尝试构建路径以生成可运行的 JAr 之外，我没有做任何不寻常的事情，这当然失败了，因为 Eclipse 甚至无法正确打包 jar。

该类的代码将无助于在此处显示，因为无论如何都找不到它。

## 更新

我可以通过执行“新” SVN 结帐然后在项目上工作来重现此错误，一旦我使用“功能”清理然后 Eclipse 会自动破坏我的工作，并且无法继续该项目，因为我是使用 Eclipse 是他们开发了*十年*的世界上最糟糕的 IDE，而这无法完成像编译这样的基本功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:34:09.643

我必须同意这个问题不太可能是由 Eclipse 引起的评论。无论如何，假设它是：

Eclipse 以这种方式工作是因为它使用自动构建器而不是事后编译。就错误捕获而言，这可能很好，但对于大型项目也可能存在问题。至于为什么不提供简单的手动编译，Eclipse 试图隐藏编译等开发步骤，可能没有考虑可能发生此类错误的情况。

尝试关闭并重新打开自动构建功能：Window > Preferences > General > Workspace > Build automatically

如果这不起作用：备份包含该类的文件，然后将其删除。从备份中恢复。

其中任何一个都应该强制 Eclipse 重新编译所有内容。

如果那仍然不能解决您的问题，那么该错误可能不是来自 Eclipse，它只是在您进行任何清理后都没有机会找到它。值得庆幸的是，通过强制 Eclipse 重新编译，它应该会指出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-10T10:47:04.740

也许它不是“理想的”，但在这样的问题中，在 Eclipse 中我停止了：Project clean, and and build automatically

# javascript - Rechange ID with Javascript

> ID：11584737
> 
> 赞同：0
> 
> 时间：2012-07-20T18:09:44.447
> 
> 标签：javascript, jquery

Hello:) Im a javascript newbie and I'm trying to change a div ID with a script. I have a div with the id "change", and onClick I would like to change the ID "changed", and that I could do, but I would like to click again, and it will return to receive the ID "change". Can you help me?

This is how I did:

```
<script> 
$document.ready( function() {
       $("#change").attr('id','changed');
});
}); 
```

Thanx.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:11:31.090

You should not change the id -- instead use the class attribute.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:19:13.397

This would also work:

```
$document.ready(function () {
  // This assumes the element always starts with the id `change`
  // If this is a poor assumption, change it to $('#change, #changed')
  $("#change").toggle(function () {
    this.id = 'changed';
  }, function () {
    this.id = 'change';
  });
}); 
```

# php - Magento：在查找 magento ID 时根据属性将商品添加到购物车

> ID：11584739
> 
> 赞同：3
> 
> 时间：2012-07-20T18:09:46.080
> 
> 标签：php, magento

我正在制作一个magento产品页面。在这个页面上，我展示了一个 HTML 块，它引用了一个可以添加到购物车的单独产品。这有点“伪造”相关项目。在正在查看的产品上，我添加了一个名为 crosssell_item 的新属性。这包含我的外部产品 ID 的值，而不是 magento ID。

如何添加查看此 crosssell_item 属性值的添加到购物车按钮，在其 SKU 属性中找到具有相同值的 magento 产品，然后返回该项目的 magento ID，以便我可以将其添加到购物车？

例子：

*   SKU 属性值 = 104704；具有magento ID 12345
*   交叉销售属性值 = 105846
*   交叉销售价值的 SKU = 105846；具有magento ID 45678

我想显示一个添加到购物车按钮，以便可以从 SKU 的产品页面购买假的交叉销售商品。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:57:53.687

不确定这是否是您的意思，也不确定下面的代码是否有效（因为我无法重现您的条件），但我们开始吧：

```
$crossell_product_sku = $_product->getData('crosssell_item');
$model = Mage::getModel('catalog/product');
$crossell_product_id = $model->getIdBySku($crossell_product_sku);
$add_to_cart_url = Mage::getUrl('checkout/cart/add', array('product' => $crossell_product_id)); 
```

# shell - 在“sh -e”中获取返回值

> ID：11584745
> 
> 赞同：3
> 
> 时间：2012-07-20T18:09:59.217
> 
> 标签：shell, sh

我正在编写一个 shell 脚本，`#!/bin/sh`第一行是脚本在第一个错误时退出。文件中有几行的形式是`command || true`这样，如果命令失败，脚本就不会在那里退出。但是，我仍然想知道该命令的退出代码。我如何获得退出代码而不必使用`set +e`暂时禁用该行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T18:27:03.053

你的问题似乎暗示`set -e`。

假设`set -e`：

而不是`command || true`你可以使用`command || exitCode=$?`. 脚本将继续执行，并在`command`中捕获的退出状态`exitCode`。

`$?`是一个内部变量，用于保存最后一个命令的退出代码。

如果成功`||`则短路，请在测试之间设置或改为使用：。`command``exitCode=0``command && exitCode=0 || exitCode=$?`

但更愿意`set -e`完全避免样式脚本，而是为脚本中的每个命令添加显式错误处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T06:03:19.763

如果您想知道命令的状态，那么您可能会根据其值采取不同的操作。在这种情况下，您的代码应类似于：

```
if command; then
    # do something when command succeeds
else
    # do something when command fails
fi 
```

在这种情况下，您不需要做任何特别的事情，因为当命令失败时，shell 不会中止。会给您带来任何问题的唯一原因`set -e`是您将代码编写为：

```
command
if test $? = 1; ... 
```

所以不要那样做。

# sql - 如何创建一个已经安装了 hstore 扩展的新数据库？

> ID：11584749
> 
> 赞同：60
> 
> 时间：2012-07-20T18:10:23.707
> 
> 标签：sql, postgresql, postgresql-9.1, hstore

最近[我在](https://stackoverflow.com/a/11581961/343834)尝试将 hstore 与 Django 一起使用时遇到了麻烦。我以这种方式安装了 hstore：

```
$ sudo -u postgres psql
postgres=# CREATE EXTENSION hstore;
WARNING:  => is deprecated as an operator name
DETAIL:  This name may be disallowed altogether in future versions of PostgreSQL.
CREATE EXTENSION
postgres=# \dx
                           List of installed extensions
  Name   | Version |   Schema   |                   Description                    
---------+---------+------------+--------------------------------------------------
 hstore  | 1.0     | public     | data type for storing sets of (key, value) pairs
 plpgsql | 1.0     | pg_catalog | PL/pgSQL procedural language
(2 rows) 
```

并且天真地认为我的新数据库将包括 hstore。情况并非如此：

```
$ createdb dbtest
$ psql -d dbtest -c '\dx'
                 List of installed extensions
  Name   | Version |   Schema   |         Description          
---------+---------+------------+------------------------------
 plpgsql | 1.0     | pg_catalog | PL/pgSQL procedural language
(1 row) 
```

有没有办法在新创建的数据库中自动拥有 hstore ？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-07-20T18:10:23.707

**长话短说：**

在 template1 数据库中安装 hstore：

```
psql -d template1 -c 'create extension hstore;' 
```

* * *

**分步说明：**

如[PostgreSQL 文档](http://www.postgresql.org/docs/9.1/static/sql-createextension.html)所述：

> CREATE EXTENSION 将新扩展加载到当前数据库中。

安装扩展是特定于数据库的。以下将返回您当前的数据库名称：

```
$ psql -c 'select current_database()'
 current_database 
------------------
 username
(1 row) 
```

如果您有一个以您的用户名命名的数据库。现在有了`dbtest`：

```
$ psql -d dbtest -c 'select current_database()'
 current_database 
------------------
 dbtest
(1 row) 
```

好的，你明白了。现在，要创建安装了 hstore 的新数据库，您必须将其安装到`template1`数据库中。根据[文档](http://www.postgresql.org/docs/9.1/static/manage-ag-templatedbs.html)：

> CREATE DATABASE 实际上是通过复制现有数据库来工作的。默认情况下，它复制名为 template1 的标准系统数据库。

我们开工吧：

```
$ psql -d template1 -c 'create extension hstore;' 
```

并检查它是否有效：

```
$ createdb dbtest
$ psql -d dbtest -c '\dx'
                 List of installed extensions
  Name   | Version |   Schema   |                   Description                    
---------+---------+------------+--------------------------------------------------
 hstore  | 1.0     | public     | data type for storing sets of (key, value) pairs
 plpgsql | 1.0     | pg_catalog | PL/pgSQL procedural language
(2 rows) 
```

完毕！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-31T11:27:48.597

还要记住，hstore 在 Public 模式中，所以如果你使用其他模式，你应该使用格式 public.hstore(record)

# asp.net-web-api - asp.net web api错误的序列化输出

> ID：11584752
> 
> 赞同：2
> 
> 时间：2012-07-20T18:10:30.637
> 
> 标签：asp.net-web-api

我继承了一个用 VB.NET 编写的模型，我试图将其公开为 REST 服务。我有一个继承自基本抽象类的类。当我尝试返回具体类的集合时，我得到的是一个空的 json 表示，如下所示：

[{}、{}、{}、{}、{}、{}、{}]

为什么是这样？是因为抽象类吗？我正在使用 MVC 4 RC。我的代码：

抽象类：

```
<Serializable()> _
Partial Public MustInherit Class Topic
   Public Property Topic_Key() As Integer
    Get
        Return m_Topic_Key
    End Get
    Set(ByVal value As Integer)
        m_Topic_Key = value
    End Set
   End Property
End Class 
```

具体类：

```
<Serializable()> _
Public Class ProductPortfolio
    Inherits Topic
End Class 
```

API 控制器：

```
public class PortfoliosController : ApiController
{
    public List<ProductPortfolio> Get()
    {
        return ProductPortfolio.GetAll().ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:45:07.133

把它放在你的抽象类上

```
<System.Runtime.Serialization.KnownType(GetType(ProductPortfolio))> 
```

# scala - scala play 2.0 获取请求标头

> ID：11584753
> 
> 赞同：6
> 
> 时间：2012-07-20T18:10:33.110
> 
> 标签：scala, playframework, http-headers, httprequest

我正在将我的一些 java 代码转换为 scala，我希望能够获取特定的标头并将其作为字符串返回。

在java中我有：

```
return request().getHeader("myHeader") 
```

我一直无法在 scala 中实现同样的目标。任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T18:57:21.513

你可以写：

```
request.get("myHeader").orNull 
```

如果您想要与您的 Java 线基本相同的东西。但你没有！

`request.get("myHeader")`返回一个[`Option[String]`](http://www.scala-lang.org/api/current/scala/Option.html)，这是 Scala 鼓励您编写不会引发空指针异常的代码的方式。

您可以通过`Option`各种方式处理。例如，如果您想提供默认值：

```
val h: String = request.get("myHeader").getOrElse("") 
```

或者，如果您想对标头执行某些操作（如果它存在）：

```
request.foreach { h: String => doSomething(h) } 
```

要不就：

```
request foreach doSomething 
```

有关更多可能性，请参阅[此备忘单](http://blog.tmorris.net/posts/scalaoption-cheat-sheet/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-19T08:57:35.690

接受的答案不适用于带有 playframework 2.2 的 scala：

```
request.get("myHeader").getOrElse("") 
```

它给了我以下错误：

> 值 get 不是 play.api.mvc.Request[play.api.mvc.AnyContent] 的成员

在下面使用

```
request.headers.get("myHeader").getOrElse("") 
```

# d3.js - 以交互方式固定有向力图中的节点

> ID：11584757
> 
> 赞同：2
> 
> 时间：2012-07-20T18:10:50.557
> 
> 标签：d3.js, force-layout

我目前正在使用一个相当简单但很大的力有向图，我希望我的用户能够以他们当时认为合适的方式组织该图。为此，我想让他们以交互方式固定节点的位置。锁定节点的方法由我决定；我正在考虑双击节点或在鼠标悬停/抓取节点时按下一个键。

我不确定如何执行此操作，也找不到任何示例，非常感谢您的帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T19:04:41.970

这是一个示例，您可以单击（或拖动）放置后将具有固定位置的节点。

```
 var node_drag = d3.behavior.drag()
        .on("dragstart", dragstart)
        .on("drag", dragmove)
        .on("dragend", dragend);

    function dragstart(d, i) {
        force.stop() // stops the force auto positioning before you start dragging
    }

    function dragmove(d, i) {
        d.px += d3.event.dx;
        d.py += d3.event.dy;
        d.x += d3.event.dx;
        d.y += d3.event.dy; 
        tick(); // this is the key to make it work together with updating both px,py,x,y on d !
    }

    function dragend(d, i) {
        d.fixed = true; // of course set the node to fixed so the force doesn't include the node in its auto positioning stuff
        tick();
        force.resume();
    } 
```

完整代码[在这里](http://bl.ocks.org/2883411)。

# unresolved-external - 错误 LNK1120：6 个未解决的外部因素

> ID：11584760
> 
> 赞同：1
> 
> 时间：2012-07-20T18:11:07.250
> 
> 标签：unresolved-external

Helo，这是我在这里的第一篇文章。

我首先搜索了论坛，其中很少有人与我的链接错误有关，但我仍然无法删除我遇到的错误。以下是错误和另外 6 个与错误 2 完全相同的错误。

> 错误 2 错误 LNK2019：未解析的外部符号 _ *imp* _hismodgametrak_resetLevel 在函数“private: void __thiscall DemoApp::startClient(char const *,int)” (?startClient@DemoApp@@AAEXPBDH@Z) D:\New SVN FOR CAVE\工具\GameEngine\Samples\TutorialApp\DemoApp.obj DemoApp
> 
> 错误 8 error LNK1120: 6 unresolved externals D:\New SVN FOR CAVE\Tools\GameEngine\bin\DemoAppd.exe DemoApp

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:14:11.260

我在[这个论坛](http://www.dreamincode.net/forums/topic/286471-6-unresolved-externals/page__p__1669051__fromsearch__1&#entry1669051)中找到了我的问题的解决方案。

任何人都可以按照他/她的目的使用它来解决他们的问题。这很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-07T06:09:05.963

我不得不补充：

```
#pragma comment(lib, "ws2_32.lib")
#pragma comment(lib, "irprops.lib") 
```

使用 Winsock 堆栈。所以我的包含看起来像这样：

```
#include <stdio.h>
#include <initguid.h>
// Link to ws2_32.lib
#include <winsock2.h>
#include <ws2bth.h>
#pragma comment(lib, "ws2_32.lib")
#pragma comment(lib, "irprops.lib") 
```

这里有一个很好的答案：[致命错误 LNK1120: 4 unresolved externals](https://stackoverflow.com/questions/21361308/fatal-error-lnk1120-4-unresolved-externals)帮助了我！！！谢谢维克多！！！

# android - 需要一个Android中HttpResponseCache的例子

> ID：11584761
> 
> 赞同：12
> 
> 时间：2012-07-20T18:11:15.627
> 
> 标签：android, caching, httpurlconnection, httpresponsecache

嗨，我正在尝试使用 Android 4 中引入的 HttpResponseCache。文档确实清楚地讨论了如何安装缓存，但我完全不知道如何缓存从网上下载的图像。之前我使用 DiskLruCache 来缓存它们. 有人会向我指出一些使用 HttpResponseCache 的工作代码示例吗？

编辑：- 有人可以告诉我我在这里做错了什么：-

```
MainActivity.java
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final long httpCacheSize = 10 * 1024 * 1024; // 10 MiB
    final File httpCacheDir = new File(getCacheDir(), "http");
    try {
        Class.forName("android.net.http.HttpResponseCache")
            .getMethod("install", File.class, long.class)
            .invoke(null, httpCacheDir, httpCacheSize);
        Log.v(TAG,"cache set up");
    } catch (Exception httpResponseCacheNotAvailable) {
        Log.v(TAG, "android.net.http.HttpResponseCache not available, probably because we're running on a pre-ICS version of Android. Using com.integralblue.httpresponsecache.HttpHttpResponseCache.");
        try{
            com.integralblue.httpresponsecache.HttpResponseCache.install(httpCacheDir, httpCacheSize);
        }catch(Exception e){
            Log.v(TAG, "Failed to set up com.integralblue.httpresponsecache.HttpResponseCache");
        }
    }
    TheMainListFrag gf=(TheMainListFrag) getSupportFragmentManager().findFragmentByTag("thelistfrags");
    if(gf==null){
        gf=TheMainListFrag.newInstance();
        FragmentTransaction ft=getSupportFragmentManager().beginTransaction();
        ft.replace(R.id.thelefty, gf,"thelistfrags");
        ft.commit();
    }
} 
```

然后在 TheMainListFrag 的加载器中，我执行以下操作：-

```
public ArrayList<HashMap<String,String>> loadInBackground() {
    String datafromServer = null;
    ArrayList<HashMap<String,String>> al = new ArrayList<HashMap<String,String>>();
    try {
        String url = "someurl";
        HttpURLConnection urlConnection = (HttpURLConnection) new URL(url).openConnection();

        urlConnection.setRequestProperty("Accept", "application/json");
        InputStream is = new BufferedInputStream(urlConnection.getInputStream());
        BufferedReader br = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = br.readLine()) != null) {
            sb.append(line);
        }
        datafromServer=sb.toString();
        Log.v("fromthread",datafromServer);
        // etc 
                    //etc

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        Log.v("fromthread", e.getClass() + "--" + e.getMessage());
    }

    return al;
} 
```

当我连接到互联网时，它工作正常，并且在目录 http-上面命名的缓存目录中，我也可以看到文件。但是当我没有连接到互联网时，数据拒绝加载。

当我从网络加载图像时，我看到名为 .tmp 的缓存文件，我相信根据 DiskLruCache 将其称为脏文件。

如果您希望我提供任何其他信息，请告诉我

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T00:12:25.993

从[HttpResponseCache 文档](http://developer.android.com/reference/android/net/http/HttpResponseCache.html)中的**强制缓存响应**部分：

> 有时，如果资源立即可用，您会希望显示资源，否则不会。可以使用它，以便您的应用程序可以在等待下载最新数据时显示*某些内容。*要限制对本地缓存资源的请求，请添加 `only-if-cached`指令：

```
try {
    connection.addRequestProperty("Cache-Control", "only-if-cached");
    InputStream cached = connection.getInputStream();
    // the resource was cached! show it
} catch (FileNotFoundException e) {
    // the resource was not cached
} 
```

> 这种技术在陈旧响应比没有响应更好的情况下效果更好。要允许过时的缓存响应，请使用 `max-stale`具有最大过时度的指令（以秒为单位）：

```
int maxStale = 60 * 60 * 24 * 28; // tolerate 4-weeks stale
connection.addRequestProperty("Cache-Control", "max-stale=" + maxStale); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:21:30.433

启用`HttpResponseCache`后，所有`HttpUrlConnection`查询都将被缓存。您不能使用它来缓存任意数据，因此我建议您继续使用`DiskLruCache`它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-31T16:52:34.740

就我而言，HttpResponseCache 实际上并没有缓存任何东西。解决它的方法很简单：

```
connection.setUseCaches(true); 
```

（这必须`HttpURLConnection`在建立连接之前调用。）

对于更细粒度的控制，`max-stale`可以使用[Jesse Wilson 指出的](https://stackoverflow.com/a/11714075/56285)。

# python - 集成 C 和 Python：ValueError：模块函数无法设置 METH_CLASS 或 METH_STATIC

> ID：11584765
> 
> 赞同：1
> 
> 时间：2012-07-20T18:11:20.997
> 
> 标签：python, c, python-c-api, python-extensions

我第一次尝试集成 C 和 Python 2.7.3。对于初学者，我只是想为 Python 编写一个可以进行基本加法的 C 模块。（它被称为 npfind 是因为一旦我弄清楚了，我想为 numpy 写一个 find 方法）

npfind.h：

```
#include <math.h>

extern int add(int a, int b); 
```

npfind.c：

```
#include "npfind.h"

int add(int a, int b)
{
    return a + b;
} 
```

pynpfind.c：

```
#include "Python.h"
#include "npfind.h"

static char* py_add_doc = "Adds two numbers.";
static PyObject* py_add(PyObject* self, PyObject* args)
{
    int a, b, r;

    if (!PyArg_ParseTuple(args, "ii", &a, &b))
    {
        return NULL;
    }

    r = a + b;

    return Py_BuildValue("i", r);
}

static PyMethodDef* _npfindmethods = {
    {"add", py_add, METH_VARARGS, py_add_doc},
    {NULL, NULL, 0, NULL}
};

void init_npfind(void)
{
    PyObject* mod;
    mod = Py_InitModule("_npfind", _npfindmethods);
} 
```

npfind.py：

```
from _npfind import *

#Do stuff with the methods 
```

npfindsetup.py

```
from distutils.core import setup, Extension

setup(name="npfind", version="1.0", py_modules = ['npfind.py'],
      ext_modules=[Extension("_npfind", ["pynpfind.c", "npfind.c"])]) 
```

毕竟，在 Windows 7 上，我输入

```
python npfindsetup.py build_ext --inplace --compiler=mingw32 
```

这似乎有效。然后当我尝试查找 npfind.py 时，我收到此错误：

```
Traceback (most recent call last):
  File "npfind.py", line 1, in <module>
    from _npfind import *
ValueError: module functions cannot set METH_CLASS or METH_STATIC 
```

我无法弄清楚它在说什么。什么是 METH_CLASS 和 METH_STATIC，我为什么要设置它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:26:33.903

您将 声明`_npfindmethods`为指针，并尝试将其初始化为数组。当我构建从您的代码段复制的代码时，我会收到很多警告，例如：

```
a.c:24:5: warning: braces around scalar initializer [enabled by default]
a.c:24:5: warning: (near initialization for '_npfindmethods') [enabled by default]
a.c:24:5: warning: initialization from incompatible pointer type [enabled by default]
a.c:24:5: warning: (near initialization for '_npfindmethods') [enabled by default]
(...) 
```

该变量被初始化为不正确的值，因此 Python 会在其中找到随机数据。

* * *

您应该`_npfindmethods`改为声明为数组：

```
static PyMethodDef _npfindmethods[] = {
    {"add", py_add, METH_VARARGS, py_add_doc},
    {NULL, NULL, 0, NULL}
}; 
```

现在它将按照您的预期进行初始化。另外，因为现在`py_add_doc`需要有常量地址，所以你也必须把它变成一个数组：

```
static char py_add_doc[] = "Adds two numbers."; 
```

所以，你的决赛`pynpfind.c`看起来像：

```
#include "Python.h"
#include "npfind.h"

static char py_add_doc[] = "Adds two numbers.";
static PyObject* py_add(PyObject* self, PyObject* args)
{
    int a, b, r;

    if (!PyArg_ParseTuple(args, "ii", &a, &b))
    {
        return NULL;
    }

    r = a + b;

    return Py_BuildValue("i", r);
}

static PyMethodDef _npfindmethods[] = {
    {"add", py_add, METH_VARARGS, py_add_doc},
    {NULL, NULL, 0, NULL}
};

void init_npfind(void)
{
    PyObject* mod;
    mod = Py_InitModule("_npfind", _npfindmethods);
} 
```

# html - 照片上的嵌入边框

> ID：11584766
> 
> 赞同：1
> 
> 时间：2012-07-20T18:11:28.263
> 
> 标签：html, css, wordpress

我正在尝试创建一个位于图像内部的边框。所以，从照片的边缘到边框的位置应该有 10px 左右的边距。

它应该是什么样子的示例：http: [//imgur.com/a/lMSMR](http://imgur.com/a/lMSMR)

您可以在此处查看带有照片的页面：http: [//blueboxluxe.com/praise/](http://blueboxluxe.com/praise/)

无论如何，这其中的一些部分更难做到...... 1）布局是流畅的——照片大小可以改变。2）我希望边框出现在所有照片上——无论大小。3）在好评页面，有很多浮动发生；所以，事情需要正确地工作。

我尝试过使用 box-shadow，但我得到的只是图像外部的边框。不在里面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:16:31.470

尝试使用 outline 属性并指定一个负偏移量：

```
outline:2px solid red;
outline-offset:-15px; 
```

虽然不支持IE！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:19:34.060

你也可以试试容器 div

```
<div><img src=""/></div> 
```

给 div 一个固定的高度和宽度并隐藏溢出。 `div{height:100px;width:100px;overflow:hidden;border:1px solid black;`}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:25:14.130

也许在包含图像的 div 中创建一个 div，将其设置为

```
position:absolute;
margin:2% auto;
left:2%;
width:96%;
border:solid 1px #fff; 
```

然后给出包含它的元素：

```
text-align:center; 
```

或者，如果图像浮动在包含其他元素的更大 div 中，请将其放入设置为图像大小的父 div 中，然后放入将在图像下方或上方添加边框的新 div；不要将图像放入要用作边框的 div 中；我使用百分比的原因是因为它应该根据图像的大小调整大小。

如果你玩弄这些数字，它应该可以如你所愿。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T18:52:37.807

您可以使用 css3 中的 box-shadow 属性。使用带有颜色的 1px 厚的 box-shadow 可以在几乎所有浏览器上为您提供这种效果。

# graphviz - 具有大（子）集群的图形的隐秘点错误消息

> ID：11584771
> 
> 赞同：2
> 
> 时间：2012-07-20T18:11:37.530
> 
> 标签：graphviz, dot

我写了一个小工具转储（`dot`格式）项目的依赖关系图，其中所有位于同一目录中的文件都聚集在一个集群中。当我尝试生成包含相应图表的pdf时，`dot`开始哭泣：

该命令`dot -Tpdf trimmedgraph.dot -o graph.pdf`会产生神秘的错误消息`Error: install_in_rank clusterReals virtual rank 21 i = 0 an = 0`，不会在 google 上产生任何结果。

我尝试`trimmedgraph.dot`手动编辑：将子图`clusterReals`转换为`Reals`可以编译的文件，但我的`Reals/`目录的所有内容显然不再收集。

有没有办法只生成点有效文件（我打算最终将我的补丁发送到上游，但如果我不能保证一切都会好起来......）？

我已经将 trimmedgraph.dot 的两个版本放在[网上](http://perso.ens-lyon.fr/guillaume.allais/dot/)，但它们相当大，而且鉴于我不知道问题出在哪里，我无法真正想出一个最小的文件来重现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T17:19:24.213

我认为（但找不到任何关于此的文档）集群名称在整个点文件中**必须是唯一的。**但是，在您的文件中，有两个名为`clusterReals`.

解决方案是确保所有集群名称都是唯一的 - 由于名称不会出现在输出中的任何位置，因此您可以在生成点文件时只使用数字。

* * *

一个快速测试表明，当重用相同的集群名称时会发生奇怪的事情：

```
digraph dependencies {
    subgraph cluster0 {
        label="First cluster 0";
        Node1;
        subgraph cluster0 {
            label="Second cluster 0";
            Node2;
        }
    }
    subgraph cluster0 {
        label="Third cluster 0";
        Node3;
    }
    subgraph cluster1 {
        label="Cluster 1";
        Node4;
        subgraph cluster0 {
            label="Fourth cluster 0";
            Node5;
        }
    }
} 
```

![图形输出](../Images/19ce105981b0e66da1c9c532e7d1b283.png)

所有`cluster0`似乎都合并在一起（节点，标签），除非因为它们被其他集群包含而不可能。至少它看起来是这样的......由于后果是不可预测的（在你的情况下是错误的），我会尝试始终使用唯一的集群名称。

# python - 按边权重对图进行排序。Python

> ID：11584773
> 
> 赞同：5
> 
> 时间：2012-07-20T18:11:40.170
> 
> 标签：python

我有一个格式的元组列表：

```
(node1, node2, weight) 
```

我想要做的是对这个元组进行排序，以便权重较高的节点位于顶部

例如

```
(A,B,2)
(A,C,5)
(C,A,2) 
```

应该给我

```
(A,C,5)
(A,B,2)
(C,A,2) 
```

第一个节点按字母顺序排序。第二个节点按照权重等级递减。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T18:14:41.587

这应该可以正常工作：

```
lst.sort(key=lambda x:x[2], reverse=True) 
```

当然，我们可以通过以下方式避免 lambda：

```
import operator
lst.sort(key=operater.itemgetter(2), reverse=True) 
```

如果你想在多个条件下排序，你可以创建有趣的函数来返回元组（元组将按第一个索引排序，然后是第二个，然后是第三个......），或者你可以使用 python 的排序保证稳定的事实。因此，如果您希望列表主要按权重排序，然后按节点名称排序，您只需先按节点名称排序，然后按权重排序。（倒序有点反直觉）。

如果我理解您的问题（在重新阅读并在这里看到一些评论之后），您可以按如下方式完成：

```
lst.sort(key=lambda x: (-x[2],x[0])) #relying on tuples 
```

这主要按重量排序（首先是高数字），​​然后按字母顺序对具有相同权重的对象按 node1 排序。

请注意，这仅在您可以否定`x[2]`以使高数字首先出现在排序中时才有效（例如，它不适用于字符串）。完成相同事情的更可靠方法（尽管效率较低？）将是：

```
lst.sort(key=lambda x: x[0])
lst.sort(key=lambda x: x[2], reversed=True) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T18:13:54.133

使用“关键功能”。由于您希望首先对较大的权重进行排序，因此 key 函数应返回权重的负数，以便较大的权重排序较低。

```
A='A'
B='B'
C='C'
lst = [(A, B, 2), (A, C, 5), (C, A, 2)]

def weight_key(tup):
    return tup[0], -tup[2], tup[1]

lst.sort(key=weight_key)
print(lst)  # prints: [('A', 'C', 5), ('A', 'B', 2), ('C', 'A', 2)] 
```

编辑：我只是重新阅读了这个问题。我不确定这意味着什么：“所以，第一个节点按字母顺序排序。第二个节点按照权重等级递减。”

但我认为你希望关键是第一，对`node1`价值进行排序；然后，按重量排序，最大的排序在前；`node2`然后按值排序。我已经编辑了 key 函数以返回一个以这种方式排序的元组。

# ruby-on-rails - 有效地查询具有活动记录的关联聚合

> ID：11584777
> 
> 赞同：1
> 
> 时间：2012-07-20T18:12:09.650
> 
> 标签：ruby-on-rails, thinking-sphinx

假设你有这个：

```
class Event < ActiveRecord::Base
  has_many :orders
end

class Order < ActiveRecord::Base
  belongs_to :event
end 
```

对于一些管理界面，我想用这些数据点呈现一个表：

事件名称，过去 2 周内的总订单，总订单

“过去 2 周”可以被创建_at > 2.weeks.ago

如何有效地查询前 20 个事件并显示这些数据？也就是说，我不想在此页面上进行 N+1 个查询。

这些事件目前来自 ThinkingSphinx。如果有用的话，我也可以使用 Redis。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T01:29:35.437

您可以在 ActiveRecord 中使用预先加载。它将查询从 N+1 减少到只有 2 个查询。

在您的 EventsController 中，您可以添加：

```
def index
  @events = Event.includes(:orders)
end 
```

更多细节可以在[急切加载文档](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)中找到。

# java - 泽西客户端上传进度

> ID：11584791
> 
> 赞同：9
> 
> 时间：2012-07-20T18:13:11.887
> 
> 标签：java, upload, jersey

我有一个球衣客户端，需要上传一个大到需要进度条的文件。
问题是，对于需要几分钟的上传，我看到**应用程序启动后**传输的字节数会达到 100% 。然后打印“on finished”字符串需要几分钟时间。
*就好像字节被发送到缓冲区一样，我正在读取传输到缓冲区的速度而不是实际的上传速度*。这使得进度条无用。

这是非常简单的代码：

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
WebResource resource = client.resource("www.myrestserver.com/uploads");
WebResource.Builder builder = resource.type(MediaType.MULTIPART_FORM_DATA_TYPE);

FormDataMultiPart multiPart = new FormDataMultiPart();
FileDataBodyPart fdbp = new FileDataBodyPart("data.zip", new File("data.zip"));
BodyPart bp = multiPart.bodyPart(fdbp);
String response = builder.post(String.class, multiPart); 
```

为了获得进度状态，我添加了一个 ContainerListener 过滤器，在调用 builder.post 之前很明显：

```
final ContainerListener containerListener = new ContainerListener() {

        @Override
        public void onSent(long delta, long bytes) {
            System.out.println(delta + " : " + long);
        }

        @Override
        public void onFinish() {
            super.onFinish();
            System.out.println("on finish");
        }

    };

    OnStartConnectionListener connectionListenerFactory = new OnStartConnectionListener() {
        @Override
        public ContainerListener onStart(ClientRequest cr) {
            return containerListener;
        }

    };

    resource.addFilter(new ConnectionListenerFilter(connectionListenerFactory)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-10T17:41:35.457

在 Jersey 2.X 中，我使用**WriterInterceptor**将输出流与 Apache Commons IO CountingOutputStream 的子类一起包装，该子类跟踪写入并通知我的上传进度代码（未显示）。

```
public class UploadMonitorInterceptor implements WriterInterceptor {

    @Override
    public void aroundWriteTo(WriterInterceptorContext context) throws IOException, WebApplicationException {

        // the original outputstream jersey writes with
        final OutputStream os = context.getOutputStream();

        // you can use Jersey's target/builder properties or 
        // special headers to set identifiers of the source of the stream
        // and other info needed for progress monitoring
        String id = (String) context.getProperty("id");
        long fileSize = (long) context.getProperty("fileSize");

        // subclass of counting stream which will notify my progress
        // indicators.
        context.setOutputStream(new MyCountingOutputStream(os, id, fileSize));

        // proceed with any other interceptors
        context.proceed();
    }

} 
```

然后，我向客户端或您要使用拦截器的特定目标注册了这个拦截器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:21:46.070

为 java.io.File 提供自己的 MessageBodyWriter 就足够了，它会触发一些事件或在进度更改时通知一些侦听器

```
@Provider()
@Produces(MediaType.APPLICATION_OCTET_STREAM)
public class MyFileProvider implements MessageBodyWriter<File> {

    public boolean isWriteable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
        return File.class.isAssignableFrom(type);
    }

    public void writeTo(File t, Class<?> type, Type genericType, Annotation annotations[], MediaType mediaType, MultivaluedMap<String, Object> httpHeaders, OutputStream entityStream) throws IOException {
        InputStream in = new FileInputStream(t);
        try {
            int read;
            final byte[] data = new byte[ReaderWriter.BUFFER_SIZE];
            while ((read = in.read(data)) != -1) {
                entityStream.write(data, 0, read);
                // fire some event as progress changes
            }
        } finally {
            in.close();
        }
    }

    @Override
    public long getSize(File t, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType) {
        return t.length();
    }
} 
```

并使您的客户端应用程序简单地使用这个新的提供程序：

```
ClientConfig config = new DefaultClientConfig();
config.getClasses().add(MyFileProvider.class); 
```

或者

```
ClientConfig config = new DefaultClientConfig();
MyFileProvider myProvider = new MyFileProvider ();
cc.getSingletons().add(myProvider); 
```

您还必须包含一些算法来识别接收进度事件时传输的文件。

**编辑：**

我刚刚发现默认情况下 HTTPUrlConnection 使用缓冲。要禁用缓冲，您可以做几件事：

1.  httpUrlConnection.setChunkedStreamingMode(chunklength) - 禁用缓冲并使用分块传输编码发送请求
2.  httpUrlConnection.setFixedLengthStreamingMode(contentLength) - 禁用缓冲，但对流式传输有一些限制：必须发送确切的字节数

所以我建议你的问题的最终解决方案使用第一个选项，看起来像这样：

```
ClientConfig config = new DefaultClientConfig();
config.getClasses().add(MyFileProvider.class);
URLConnectionClientHandler clientHandler = new URLConnectionClientHandler(new HttpURLConnectionFactory() {
     @Override
     public HttpURLConnection getHttpURLConnection(URL url) throws IOException {
           HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.setChunkedStreamingMode(1024);
                return connection;
            }
});
Client client = new Client(clientHandler, config); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-28T10:35:12.540

我已经成功地使用了大卫的答案。但是，我想对此进行扩展：

我的以下`aroundWriteTo`实现`WriterInterceptor`显示了面板（或类似的）如何也可以传递给`CountingOutputStream`：

```
@Override
public void aroundWriteTo(WriterInterceptorContext context)
    throws IOException, WebApplicationException
{
  final OutputStream outputStream = context.getOutputStream();

  long fileSize = (long) context.getProperty(FILE_SIZE_PROPERTY_NAME);

  context.setOutputStream(new ProgressFileUploadStream(outputStream, fileSize,
      (progressPanel) context
          .getProperty(PROGRESS_PANEL_PROPERTY_NAME)));

  context.proceed();
} 
```

然后`afterWrite`可以`CountingOutputStream`设置进度：

```
@Override
protected void afterWrite(int n)
{
  double percent = ((double) getByteCount() / fileSize);
  progressPanel.setValue((int) (percent * 100));
} 
```

可以在`Invocation.Builder`对象上设置属性：

```
Invocation.Builder invocationBuilder = webTarget.request();
invocationBuilder.property(
    UploadMonitorInterceptor.FILE_SIZE_PROPERTY_NAME, newFile.length());
invocationBuilder.property(
    UploadMonitorInterceptor.PROGRESS_PANEL_PROPERTY_NAME,      
    progressPanel); 
```

**也许对大卫的回答最重要的补充以及我决定发布自己的原因是以下代码：**

```
client.property(ClientProperties.CHUNKED_ENCODING_SIZE, 1024);
client.property(ClientProperties.REQUEST_ENTITY_PROCESSING, "CHUNKED"); 
```

对象`client`是.`javax.ws.rs.client.Client`

**使用该`WriterInterceptor`方法也必须禁用缓冲。上面的代码是使用 Jersey 2.x 执行此操作的简单方法**

# jquery - jQuery 1.7.2：attr('src') 在服务器上返回 undefined 但在本地工作正常

> ID：11584794
> 
> 赞同：0
> 
> 时间：2012-07-20T18:13:18.287
> 
> 标签：jquery, undefined, attr

在我的页面上，我有一个元素

```
<img id='image123' src='http://server.de/image.png' />
```

我想通过 jQuery 获得 src 属性。

我用声明试试这个

```
alert($('#image123').attr('src'));
```

它在我的 xampp 服务器本地工作（提示[http://server.de/image.png](http://server.de/image.png)）但不在我的网络服务器上。在那里我只收到带有文本“未定义”的警报弹出窗口

使用 Firebug，我可以调试代码行而不会出错，因此 jQuery 似乎可以工作。

我错过了什么？

在此先感谢您的帮助！

编辑：[已解决] 因为我无法回答我自己的问题，所以我在这里发布我的解决方案：

**感谢所有回复**，我发现了错误。id 'image123' 像 'image'+id 一样连接，其中 id 是函数参数（保存 123）。由于某些原因，在我的服务器上，我没有得到 123，而是 12300，最后有一些零。当我将 123 作为字符串传递给我的函数时，一切都按预期工作。**谢谢你的帮助！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:18:30.620

像这样试试

```
$(function(){
alert($('#image123').attr('src'));
}); 
```

# jquery - 如果另一个输入具有特定值，则验证规则要求输入

> ID：11584805
> 
> 赞同：1
> 
> 时间：2012-07-20T18:14:17.547
> 
> 标签：jquery, validation, jquery-validate

在 jquery.validate.js 中，我将此模式用于一系列规则：

```
rules: {
    memtype: {
        required: true,
        minlength: 2
    },      
} 
```

我想添加一个规则，该规则要求仅在检查 memtype 并且值为“guide”时才填写文本输入字段“sponout”。我已经回顾了“取决于”的想法，但似乎无法弄清楚如何在这里应用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:39:35.470

您可以做的是将`required`规则的值设为[dependency-expression](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)。

它看起来像这样：

```
sponout: {
  required: 'input[name="memtype"][value="guide"]:checked'
} 
```

您可以在这里看到一个工作示例：http: [//jsfiddle.net/ryleyb/UknKX/](http://jsfiddle.net/ryleyb/UknKX/)

# regex - 有什么好技巧可以帮助记住 RegEx 吗？

> ID：11584806
> 
> 赞同：5
> 
> 时间：2012-07-20T18:14:20.010
> 
> 标签：regex

我并不总是写正则表达式，但是当我写的时候，我觉得我在重新学习它。我正在寻找保留重要部分的方法，并为疯狂添加一些方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:21:53.853

您应该使用与记住任何 API 完全相同的技巧：使用准确的参考。

例如，当我需要在 JavaScript 中使用正则表达式时，我使用[MDN 上的参考](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。如果我需要 PHP 中的正则表达式，我将使用[php.net 参考](http://php.net/manual/en/reference.pcre.pattern.syntax.php)。如果我需要 .NET 中的正则表达式，我将使用[MSDN 参考](http://msdn.microsoft.com/en-us/library/az24scfc)。

与其记错写错，不如不记得每次都查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:40:11.673

让我们改写一下：

### 我并不总是写`German Language`，但当我写的时候，我觉得我正在重新学习它。我正在寻找方法来保留重要的`words`...

**正则表达式**只是与问题解决者（它的引擎）进行交流的一种极其紧凑和简洁的**语言。**学习一门语言时，您通常会多次重复该语言的习语，直到您的大脑确定它们具有一定的重要性，并保持习语及其上下文可用**。**

恕我直言，从长远来看，工具本身根本没有帮助。不要自欺欺人。只有重复和练习才会。对很多人来说最好的事情是**系统地研究**这个话题，从最简单的习语开始。如果你能理解不断上升的复杂性，一本好书会大有帮助。

**[这是一本](http://shop.oreilly.com/product/9780596528126.do)**我认为非常适合此目的的书。

Javascript 和 PHP 是支持其正则表达式风格并允许练习正则表达式的语言。对于 javascript，您只需要一个编辑器和一个浏览器。对于 PHP，一个好的带有语法检查的 IDE 将是有利的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T18:17:48.647

也许 RegexBuddy 可以帮助你？它具有许多有助于分析正则表达式的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T18:18:17.257

我总是跳回[http://www.gethifi.com/tools/regex](http://www.gethifi.com/tools/regex)。这是一个实时编辑器，旁边有一个快速参考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T18:23:07.753

> 熟能生巧。
> 我猜詹姆斯邦德

考虑一下。
1\. 破解并尝试自己构建棘手的正则表达式
2\. 帮助 stackoverflow 上的人们制作正则表达式 ))
3\. 集中注意力，比如一周内每天玩一个小时的正则表达式，如果你喜欢这个，就给它更多时间
4.花点时间享受这个过程

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T19:18:23.567

我数不清我访问过多少次[http://www.regular-expressions.info/quickstart.html](http://www.regular-expressions.info/quickstart.html)以获得快速参考。事实上，我相信这就是我最初学习正则表达式的地方。它对所有常见的正则表达式功能进行了简短、严肃的描述，每个部分都有大量示例和链接，以获取更多信息。

（无从属关系）

# iphone - 通过从文档中复制 .sqlite 文件来预填充核心数据

> ID：11584808
> 
> 赞同：2
> 
> 时间：2012-07-20T18:14:23.097
> 
> 标签：iphone, ios, core-data

我读过这行得通，但我做不到。我想预填充核心数据。我运行了我的项目，以便创建 sqlite 文件。我将它复制到我的桌面，然后使用命令行 sqlite3 预填充它。我运行查询以确保它被正确填充。所以现在我将它重新添加到我的项目中。但是，无论我做什么，它都不会获取数据。

我让它工作一次。在模拟器中运行它后，我从项目的文件夹中重新复制了 sqlite 文件。然后我填充了这个新的 sqlite 文件。我把它放回我的项目中，我得到了要显示的内容。

我认为问题在于 Z_METADATA 表。此表具有 Z_UUID 属性。我认为它唯一有效的时候是模拟器的 UUID 和 sqlite 的 Z_UUID 属性相同。

我进入 ~/Library/Developer/Xcode/DerivedData 并删除了 DerivedData 文件夹的内容。所以现在我的模拟器在我运行它时会有一个不同的 UUID。我这样做了，现在 sqlite 文件的内容将不会显示。这就是为什么我认为 Z_METADATA 表是问题所在。Z_METADATA 的 UUID 和我的模拟器的 UUID 不一样所以由于某种原因它不能使用它？

我发现的所有关于以这种方式预填充核心数据的文章都是旧的，大约在 2009 年，所以我认为这不是问题。那么我可以使用这种复制sqlite文件的方法，使用命令行预先填充它，然后将它重新添加到项目中吗？有没有人有当前的方法来预填充核心数据？

所以错误是我`NSFetchedResultsController`正在返回 0 个对象的计数。我得到它来返回我上面提到的一次所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:49:40.530

根据[核心数据编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdPersistentStores.html#//apple_ref/doc/uid/TP40002875-SW1)，

> **重要**虽然 Core Data 支持 SQLite 作为存储类型，但存储格式——就像其他原生 Core Data 存储一样——是私有的。您不能使用原生 SQLite API 创建 SQLite 数据库并将其直接与 Core Data 一起使用（也不应该使用原生 SQLite API 操作现有的 Core Data SQLite 存储）。如果您有现有的 SQLite 数据库，则需要将其导入核心数据存储（请参阅“高效导入数据”）。

虽然我确信有人对 Core Data sqlite 格式进行了逆向工程，但 Apple 不提供任何文档，而且它很可能会在主要操作系统版本中发生变化。

编写一个使用 Core Data 进行导入的命令行应用程序。

# php - 如何在 PHP 中捕获公共静态函数的调用？

> ID：11584809
> 
> 赞同：1
> 
> 时间：2012-07-20T18:14:23.897
> 
> 标签：php, static, magic-methods

```
<?php
class A
{
    public static function foo()
    {
        // some action
    }

    public static function __callStatic($method, $args)
    {
        self::foo();
        static::$method($args);
    }
}

class B extends A
{
    public static function bar(){}
} 
```

我搜索 PHP 公共静态函数处理程序，我尝试`__callStatic()`但它只使用私有和受保护的方法调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:18:56.547

魔术方法，例如[`__call`和`__callStatic`^(*Docs*)](http://php.net/manual/language.oop5.overloading.php)仅对您的类中不存在的方法调用。当发生正常的方法调用时，它们不会被触发。所以没有办法用公共方法来实现这一点。

但是，您可以将这些方法设为私有/受保护，并使用`call_user_func`或使用魔术方法调用它们`call_user_func_array`。当然，这些函数的返回值也应该通过魔术方法返回。

# php - 是否有内置的方法来清理 POST

> ID：11584818
> 
> 赞同：0
> 
> 时间：2012-07-20T18:15:09.377
> 
> 标签：php, post, filter, data-cleaning

`$_POST`假设我想修剪通过 POST ( )进入我的系统的所有值，
或者，甚至应用更复杂的过滤器。
是否有一种内在的方法来做到这一点（Post也可以是一个数组数组......）
我确实有一个引导文件，我目前正在使用它`array_walk_recursive`或类似的东西。

```
function trim_array(&$elm){
    if(is_string($elm)){
        $elm=trim($elm);    
    }
}
array_walk_recursive($_POST,'trim_array'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:26:54.520

正如你所提到`array_walk_recursive`的，这是一个很好用的。另一个是`call_user_func`我更喜欢使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:20:21.453

```
 function recursive_trim($arr) {
        foreach($arr as $k => $v) {
            if(is_string($v)) {
                $arr[$k] = trim($v);
            } else if(is_array($v)) {
                recursive_trim($arr[$k]);
            }
        }
    }

    recursive_trim($_POST); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:20:33.133

对于修剪值，我肯定会使用您想要的方法 - `array_walk_recursive`，但请确保不要修剪应该保持不变的值，例如密码。

对于更复杂的过滤器，我想说，这取决于。有时您可以使用`array_walk_recursive`，但有些情况下您不能使用。

# java - java记录所有sql到oracle

> ID：11584820
> 
> 赞同：3
> 
> 时间：2012-07-20T18:15:16.200
> 
> 标签：java, oracle, logging

我正在重写一个非常古老的项目，它使用 1.4 JDK 和 java.util.logging。它使用到 Oracle 的 JDBC 连接。我正在尝试从 java 程序记录对 Oracle 的所有 SQL 调用，这可能吗？我已经更换了驱动程序以使用 classes14_g.jar 并启用了 Oracle 跟踪。像这样的调用：

```
stmt = (OracleCallableStatement) tr.createCallableStatement(sqlString,1);
  oracle.jbo.domain.Date jboDate = DateUtil.parseDateString(monthEndDate);
  stmt.setDATE(1,jboDate );
  stmt.executeUpdate(); 
```

还没有登录，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:20:07.437

一种选择是使用间谍驱动程序来拦截所有 JDBC 调用并记录它们。其中有几种可用，包括 BEA（现为 Oracle）提供的一种：

*   [Weblogic JDBC 间谍](http://docs.oracle.com/cd/E11035_01/wls100/jdbc_drivers/spy.html)
*   [Log4JDBC](http://code.google.com/p/log4jdbc/)
*   [JDBC间谍](http://code.google.com/p/jdbcspy/)

如果你想要更多的控制（和更多的工作），你可以利用 AOP 来拦截对你的 JDBC 驱动程序的调用，然后记录它们，但我觉得这需要付出很多努力而没有太多收获。

# linux - 匹配 IPTables 规则时运行系统命令

> ID：11584824
> 
> 赞同：9
> 
> 时间：2012-07-20T18:15:57.610
> 
> 标签：linux, ubuntu, iptables

:)

我希望能够在命中 IPTable 规则时运行系统命令，将远程设备的 IP 地址传递给它。

我环顾四周，但一无所获。我想到了 grepping 日志，但我预计会有很多流量..

任何帮助都会很棒！

谢谢

（如果有帮助，Ubuntu Linux 是我的首选平台）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:08:24.333

这是您的操作方法：

`iptables -I FORWARD -p tcp --dport 80 -d a.b.c.d -j LOG --log-prefix="TRIGGER ME NOW !!!"`

`tail -f some-logfile | awk '/some-pattern/ {system("run-some-command")}'`

应该足够直接并且应该能够处理大量流量，tail 命令应该足够快......只要确保文件不会增长太多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:44:57.590

用 knockd 代替。您只配置一个端口的端口敲门序列，然后告诉敲门您要运行的命令。通常它用于添加/删除 iptables 规则——在某个敲门序列之后打开一个服务（例如 ssh 访问），但我不明白为什么你不能在一个非常简单的之后使用它来运行命令，一个一个预期端口规则上的数据包。

在您的 Ubuntu 系统上安装“apt-get install knockd”，并且手册页中有一些示例，您可以轻松地适应这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-01T20:35:28.210

这实际上很容易。我们有两种方法可以做到这一点。如果您使用尾日志，那么 iptables 将不依赖于日志结果。

1.  你可以使用NFQUEUE。如果你有时间，请阅读我的文章。 [https://medium.com/@farizmuradov/useful-notes-about-nfqueue-80a2c271db1a](https://medium.com/@farizmuradov/useful-notes-about-nfqueue-80a2c271db1a) 同一篇文章我添加了我的linkedin页面。

2.  您可以在应用程序级别编写简单的路由器并将数据从 iptables 发送到侦听端口。在编程级别，您可以执行脚本并在某个端口再次发送数据。然后你可以通过 iptables 继续。

# asp.net - Asp.net 4.0 UpdatePanel 错误：Sys.WebForms.PageRequestManagerServerErrorException：从服务器返回的状态代码为：12002

> ID：11584829
> 
> 赞同：3
> 
> 时间：2012-07-20T18:16:28.203
> 
> 标签：asp.net, ajax, updatepanel, asp.net-4.0, updateprogress

我有一个大约需要 15-20 秒才能执行的过程，最后它会更新更新面板以刷新网格视图

但这让我一直给我带来这个错误：

Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：12002

我到处寻找答案，他们一直指出这一点

**ToolkitScriptmanager 中的httpRuntime maxRequestLength="1024000" executionTimeout="999999"** 和 **AsyncPostBackTimeout ="360000"**

它对我不起作用，有人可以建议任何对我有帮助的东西吗？以下是部分代码：

```
<%@ Page Title="" ....AsyncTimeout="36000" EnableEventValidation="false" ValidateRequest="false" %>
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" AsyncPostBackTimeout ="360000" >
</asp:ToolkitScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:Button ID="BtnGeneraPed" runat="server" Text="GP" Height="45px" Width="148px"/>
<asp:UpdateProgress ID="UpdateProgress1" runat="server">
<ProgressTemplate>
<table>
<tr><td><img alt="Cargando" src="../images/loading.gif" /></td></tr></table>
</ProgressTemplate>
</asp:UpdateProgress>
<asp:GridView ID="GV" runat="server" BackColor="White" 
......
</asp:GridView>
</ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T15:21:27.743

所以在将近2天之后，我终于可以弄清楚了......

这非常简单……我在一台装有 Windows XP 和 IE 8 的机器上测试和开发它……我在 Firefox 和 Chrome 中测试了它，结果是肯定的，没有错误

该问题与 Internet Explorer 8 中的 ReceiveTimeout 设置有关。它太短了

解决方案在这篇文章中：http:
[//intersoftpt.wordpress.com/2009/06/23/resolve-page-cannot-be-displayed-issue-in-ie8/](http://intersoftpt.wordpress.com/2009/06/23/resolve-page-cannot-be-displayed-issue-in-ie8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-20T21:04:00.337

我在发布网站的 Web 服务器上的 IE 8（在 Chrome 中更进一步）中遇到了类似的问题，只是没有要删除的 ReceiveTimeout 注册表项。Chrome 最终还是失败了，但它与这个问题无关……我猜 IE 8 似乎更挑剔。我正在使用 Timer_Tick 来更新 UpdatePanel。

发现我的 web.config 文件中需要一些参考：

```
<system.web>
    <pages>
       <controls>
           <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
       </controls>
       <namespaces>
           <clear/>
           <add namespace="System" /> 
```

……

```
 </namespaces>
    <compilation targetFramework="4.0" debug="false">
        <assemblies>
            <add assembly="System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        </assemblies>
    </compilation>
    <httpHandlers>
        <remove verb="*" path="*.asmx"/>
        <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
    </httpHandlers>
    <httpModules>
        <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </httpModules>
</system.web>
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
        <add name="ScriptModule" preCondition="integratedMode" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </modules>
    <handlers>
        <remove name="WebServiceHandlerFactory-Integrated"/>
        <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=1.0.61025.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    </handlers>
</system.webServer> 
```

如果您已经安装了 ASP .NET 2.0 AJAX Extensions，您可以在 C:\Program Files (x86)\Microsoft ASP.NET\ASP .NET 2.0 AJAX Extensions\v1.0.61025 的 web.config 中找到这些部分，这是另一个步骤执行该操作可能会导致这样的错误。

# c# - C# 中的马尔可夫决策过程库

> ID：11584832
> 
> 赞同：2
> 
> 时间：2012-07-20T18:16:33.187
> 
> 标签：c#, artificial-intelligence, markov-chains, markov-models

我正在开发一个创建 AI 引擎的项目，其中机器人正在探索 2D 网格世界，并且必须决定接下来要移动到哪个方格。是否有可以使用的现有马尔可夫库（即我只是更改参数）或存在的样本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:31:59.337

[Accord.Net](http://code.google.com/p/accord/)可能会帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:54:27.360

也许你可以调整这个：[隐藏的马尔可夫模型在 C#](http://www.codeproject.com/Articles/69647/Hidden-Markov-Models-in-C)

# jquery - Read more... 扩展后如何用 Read less 替换？

> ID：11584836
> 
> 赞同：1
> 
> 时间：2012-07-20T18:16:56.953
> 
> 标签：jquery

你能帮我这个代码吗？我在这里寻找答案，但对我来说有点困难，因为我是 jquery 编程的初学者。我在这里尝试做的是替换（'read more...'）文本，例如在按下（'read less...'）之后。我试图这样做，但它一次又一次地失败。我在这里找到了关于此的其他帖子，但我想使用我制作的脚本来进行更多培训。有什么想法吗？代码在这里。

```
$(document).ready(function(){
var $posts = $('#items > div');
var maxHeight = 95;

$('a', $posts).live('click', function(){
    var $par = $(this).prev('p');

    var oH = parseInt($par.attr('class'));

    if($par.height() == oH){
        $par.animate({
            'height': maxHeight
        }, 'medium');
    }else{
        $par.animate({
            'height': oH
        }, 'medium');
    }
});

$posts.each(function(){
    if($('p', this).height() > maxHeight){

        $('p', this)
            .attr('class', $('p', this).height())
            .css('height', maxHeight+'px');
        $(this).append($('<a>').text('read more...'));
    }
}); 
```

});

在按下“阅读更多...”之后，我应该放置什么样的代码以及在哪里将“阅读更多...”替换为“阅读更少”（它会展开 - 动画向下）。除了替换文本之外，脚本工作正常。感谢您提供的任何帮助。我会很感激所有提示。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:31:11.813

您可以通过调用更改链接文本`$(this).text('....');`

```
if($par.height() == oH){
    $par.animate({
        'height': maxHeight
    }, 'medium');
    $(this).text('read more...');
}else{
    $par.animate({
        'height': oH
    }, 'medium');
    $(this).text('read less...');
} 
```

这是一个[演示](http://jsfiddle.net/qYtQz/8/)

# amazon-ec2 - 如何在 ec2 ami 中安装 byobu

> ID：11584838
> 
> 赞同：18
> 
> 时间：2012-07-20T18:17:01.680
> 
> 标签：amazon-ec2, installation, package, yum, amazon-ami

我知道有可能使用包管理器，因为我之前做过一次。但现在如果我尝试

> sudo yum install byobu

它只是失败了......

> 设置语言环境失败，默认为 C
> 加载插件：fastestmirror、priorities、security、update-motd
> 从缓存的主机文件加载镜像速度
> * amzn-main: packages.us-east-1.amazonaws.com
> * amzn-updates: packages.us -east-1.amazonaws.com
> amzn-main
> amzn-updates
> 设置安装过程
> 没有可用的软件包 byobu。
> 错误：无事可做

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-06-02T14:56:47.470

不知道为什么，但 EPEL 存储库已安装，但默认禁用。您可以通过更改中的设置永久`"enabled=1"`启用`[epel] stanza`它`/etc/yum.repos.d/epel.repo`

或者您可以将其禁用并仍然安装 byobu：

```
sudo yum install --enablerepo=epel byobu 
```

您可以通过以下方式查看 epel 存储库中可用的软件包：

```
sudo yum list --disablerepo=\* --enablerepo=epel 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-15T19:52:48.570

**对于亚马逊 Linux 2：**

> 您需要为基于 EL7 的 AMI 安装 EPEL 发布包并启用 EPEL 存储库。

**您可以执行以下操作：** ⤵︎

```
sudo amazon-linux-extras install epel      # Install epel from Amazon's Linux Extras

sudo yum-config-manager --enable epel      # Enable EPEL repo in case disabled

sudo yum install byobu -y                  # Install byobu

byobu -v                                   # Verify Version 
```

这是替代来源，以防 Linux Extras 不适合您。

```
# (optional) Install EPEL repository from Fedora
sudo yum install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm 
```

*参考*：[https ://aws.amazon.com/premiumsupport/knowledge-center/ec2-enable-epel/](https://aws.amazon.com/premiumsupport/knowledge-center/ec2-enable-epel/)

* * *

**经测试**

名称：Amazon Linux 2 AMI (HVM)，SSD 卷类型 - ami-0323c3dd2da7fb37d（64 位 x86）/ami-0ce2e5b7d27317779（64 位 Arm）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-24T12:40:31.983

错误消息表明该软件包`byobu`在 amzn-main 存储库中不可用。

您可以从另一个存储库手动安装它

```
cd ~
wget ftp://ftp.pbone.net/mirror/download.fedora.redhat.com/pub/fedora/epel/5/x86_64/byobu-3.4-2.el5.noarch.rpm    
sudo yum install byobu-3.4-2.el5.noarch.rpm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-26T09:57:05.397

也许有人需要一个新的 [byobu链接](ftp://ftp.pbone.net/mirror/download.fedora.redhat.com/pub/fedora/epel/7/x86_64/b/byobu-5.73-4.el7.noarch.rpm)

所以你可以安装它

```
wget ftp://ftp.pbone.net/mirror/download.fedora.redhat.com/pub/fedora/epel/7/x86_64/b/byobu-5.73-4.el7.noarch.rpm
sudo yum install byobu-5.73-4.el7.noarch.rpm 
```

# git - 如何只向 git 标签添加一个提交

> ID：11584841
> 
> 赞同：3
> 
> 时间：2012-07-20T18:17:11.390
> 
> 标签：git, versioning, tagging

我创建了一个 git 标签，但随后我做了一些其他的提交，其中一个需要在标签中，其他的则不需要。

例如：

```
git commit 123
git commit 456
git commit 789
git commit 1011
git commit 1213 
```

我在 point 处做了一个标签`1011`，但现在我想添加提交`123`，而不是介于两者之间的任何一个。有什么办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T18:42:41.070

从您的标签开始，您需要挑选要包含的单个提交。然后，您将移动标签以指向新状态。

```
git checkout my_tag
git cherry-pick commit_123
git tag -f my_tag 
```

将标签视为分支可能会有所帮助。就像分支一样，标签是指提交历史中的特定点。所以你想要做的是有效地创建一个具有不同提交历史的新分支，然后标记该新状态。检查你当前的标签会让你回到原来的点，cherrypicking 拉入你想要添加的单个提交，然后重新标记保存新的分支状态。您需要`-f`“移动”标签的选项，否则您会收到`tag 'my_tag' already exists`错误消息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T18:34:05.730

我认为您的术语混淆了。

*   标签是附加到单个提交的字符串标签。它不“包含”提交，它只是命名被标记的提交的另一种方式。
*   分支是一组有序的提交，使用`git commit`时会将提交添加到当前分支。

目前尚不清楚您是否只是指分支而不是标签，或者您是否在问为什么 eg 的输出`git log mytag`显示自 1011 年以来的所有提交。

`git log mytag`将记录标记为的提交`mytag`及其所有父项。

如果您的意思是分支并且您创建的分支在其历史记录中尚未包含提交 123，那么您可以`git cherry-pick`。

写这篇文章，我意识到您可能还意味着如何将提交 123 添加到由`git log mytag`. 为此，您需要在该点创建一个新分支`git checkout -b mybranch mytag`，然后樱桃选择提交 123，然后将标签移动到新提交，使用`git tag -f`. 然后你可以回到你以前的分支（例如`git checkout master`）。然后，您以前的分支将有不同的历史，分支已经分道扬镳。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:34:00.243

如果所有更改仍然是本地的，您应该能够压缩`1213`提交`1011`并重新标记压缩的提交。

# html - 简单的引导工具提示示例不起作用

> ID：11584842
> 
> 赞同：5
> 
> 时间：2012-07-20T18:17:15.243
> 
> 标签：html, twitter-bootstrap

我试图让引导工具提示在一个简单的示例中工作。这是小提琴的链接：http: [//jsfiddle.net/TXPWK/](http://jsfiddle.net/TXPWK/)

工具提示正在显示，但它只是纯文本。谢谢你的帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-20T18:23:10.717

损坏的 CSS 和 JS 也需要一些修复。

[http://jsfiddle.net/ajkochanowicz/TXPWK/6/](http://jsfiddle.net/ajkochanowicz/TXPWK/6/)

# ruby-on-rails - 具有多个子域的旧版 Urls Rails

> ID：11584843
> 
> 赞同：1
> 
> 时间：2012-07-20T18:17:16.777
> 
> 标签：ruby-on-rails, ruby, nginx

好的，我一直在研究多种方法，但无法真正找到可行的解决方案。

我们有一个旧站点，其中包含用作类别的子域，并且 url 结构如下所示。

[http://www.my_category.my_site.com/subcategory/article_123.html](http://www.my_category.my_site.com/subcategory/article_123.html)

我需要找到一种方法来重定向（使用 301 的）到

[http://www.my_site.com/articles/my_category/sub_category/article-123](http://www.my_site.com/articles/my_category/sub_category/article-123)

我查看了 nginx 重定向（这将不起作用，因为您无法修改路径 - 将下划线更改为破折号）

Rails 路由似乎不适用于 2 个子域（www.mycategory）

Rack Rewrite 也不能安静地做这个伎俩（它只重定向到同一个子域）。

关于最佳方法的任何想法？我不排除上述情况，但想看看人们的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:04:17.913

使用 nginx 就像 ABC 一样简单：

```
server {
    listen 80;
    server_name ~^www\.(?<category>my_category)\.my_site\.com$;
    return 301 http://www.my_site.com/articles/$category$request_uri;
} 
```

*   [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)
*   [http://nginx.org/r/server_name](http://nginx.org/r/server_name)
*   [http://nginx.org/r/return](http://nginx.org/r/return)
*   [http://nginx.org/en/docs/http/ngx_http_core_module.html#variables](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)
*   man pcresyntax
*   人 pcrepattern

# jquery - 使用 jquery 拆分和解析文本

> ID：11584844
> 
> 赞同：1
> 
> 时间：2012-07-20T18:17:17.177
> 
> 标签：jquery

我有一些这样的文字：

> 多云。27°C（感觉像 29）。湿度：74% 风速：15 公里/小时 W。

我只想得到本文的“27°C”部分。如何使用 jquery 访问这部分文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:24:20.560

假设您故意从结果字符串中排除了°，那么您可以使用：

```
var parts = "Mostly Cloudy. 27°C (Feels like 29). Humidity: 74% Winds: 15 km/hr W".match(/(\d+).(C)/),
    temp = parts[1] + parts[2];

console.log(temp); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xXjXE/)。

或者，改为：

```
var parts = "Mostly Cloudy. 27°C (Feels like 29). Humidity: 74% Winds: 15 km/hr W".match(/(\d+).(C)/),
    temp = parts.slice(1).join('');

console.log(temp); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xXjXE/2/)。

另一方面，如果您想保留度数符号，则可以改用：

```
var parts = "Mostly Cloudy. 27°C (Feels like 29). Humidity: 74% Winds: 15 km/hr W".match(/(\d+).(C)/),
    temp = parts[0];

console.log(temp); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xXjXE/1/)。

参考：

*   [`array.join()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join).
*   [`array.slice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice).
*   [JavaScript 正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。
*   [`string.match()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:08:44.403

如果你只需要学位，那么：

```
var str = "Mostly Cloudy. 27C (Feels like 29). Humidity: 74% Winds: 15 km/hr W";
var results = str.match(/\d+°C/g); //You get array with all degrees kind substrings 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:16:37.033

下面的代码将始终显示温度，无论句子是什么！！！

```
var str = "27°C (Feels like 29)"; 
arr = str.split('°'); 
words=arr[0].split(' ');
if(words.length>1)
    temp=words[words.length-1]+'°'+arr[1].substr(0,1); 
else
    temp=arr[0]+'°'+arr[1].substr(0,1); 
console.log(temp); 
```

# android - 如何获取现有地图并将其覆盖到 android 平台上的谷歌地图中？

> ID：11584845
> 
> 赞同：0
> 
> 时间：2012-07-20T18:17:16.830
> 
> 标签：android, google-maps

我正在制作交互式校园地图。我想拍摄一张图片（下图）并将其叠加到谷歌地图上，然后添加交互式兴趣点。我没有看到如何将图像添加或合并到地图中。这可以做到吗？有没有我错过的例子？

![校园地图](../Images/740514aad86a4f8447848f726846428b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:26:18.560

如果要更换谷歌地图背景。根据我的经验，我可以说不。做不到

但是如果你想让它变得透明，你可以把你的地图放在谷歌地图的顶部，然后设置透明。

但是，之前已经有人这样做了。如果你看到这个，你可能会有一些想法

[http://www.maplib.net/](http://www.maplib.net/)

[http://lifehacker.com/213627/embed-any-image-into-a-google-map](http://lifehacker.com/213627/embed-any-image-into-a-google-map)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T18:23:51.180

[谷歌地图开发者文档](https://developers.google.com/maps/documentation/)

# python - 为什么在执行委托函数时这个 Python 回溯不好

> ID：11584846
> 
> 赞同：1
> 
> 时间：2012-07-20T18:17:17.833
> 
> 标签：python, events, delegates, callable, traceback

我有一个允许事件委托模式的搜索类。其他类可以注册一个函数，以便在搜索更新时调用。

出现问题时，回溯不会显示接收器功能。例如：

我的搜索类运行这个......

```
# ----------- Search.py -----------
# class Search ...snip...
    def connect(self, fn):
        self.__updateDelegates.append(fn)

    def onTextChanged(self):
        # ...snip...
        # Execute all event delegates
        for fn in self.__updateDelegates:
            fn(search_pattern) 
```

...如果委托函数签名是错误的...

```
# ----------- Foo.py -----------
from search import Search
# class Foo ...snip...
    def __init__(self):
        search = Search()
        search.connect(self.onSearchUpdate)

    def onSearchUpdate(self): # <- Wrong on purpose. Should have another argument
        # Do something. 
```

……我看到了……

```
# Traceback (most recent call last):
#   File "search.py", line 287, in onTextChanged
#     fn(search_pattern)
# TypeError: onSearchUpdate() takes exactly 1 argument (2 given) 
```

请注意，异常消息中的委托函数名称是正确的，但回溯并没有那么远。

错误是因为委托签名应该有一个模式参数。问题是回溯没有显示此错误发生的位置。它应该更远地回到引用指向的函数对象。

知道如何解决这个问题吗？

注意：我更新了代码和解释。我不想用额外的代码来混淆这个问题，但我觉得我需要展示更多。这不显示是什么触发了该功能`onTextChanged()`。这实际上是 Qt 小部件实现的一部分，当有人输入 QLineEdit 时它会运行此功能。所以模式是，父小部件创建搜索小部件，然后连接它的函数以在文本更改时调用。我希望这有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:42:08.667

假设`onSearchUpdate`是类上的一个方法`Foo`：

```
class Foo(object):
    def __init__(self,search_pattern):
        self.search_pattern=search_pattern
    def onSearchUpdate(self):
        pass #do something with search_pattern 
```

现在在课堂`Search`上，你以某种方式填充`__updateDelegates`：

```
pattern=['foo','bar','baz']

class Search(object):
    def __init__(self):
       self.__updateDelegates=[]
       for i in range(3):
           self.__updateDelegates(Foo(pattern[i]).onSearchUpdate) 
```

现在，当您调用`onSearchUpdate`via时`__updateDelegates`，您只需执行以下操作：

```
for func in self.__updateDelegates:
    func() 
```

这可能不是您的代码的结构方式（用您的代码段很难分辨），但希望这能说明问题。

或者，也许`onSearchUpdate`应该有第二个论点？

```
def onSearchUpdate(self,pattern):
   pass # snip ... 
```

# ruby-on-rails-3 - 将多个模型聚合到一个关联中

> ID：11584847
> 
> 赞同：1
> 
> 时间：2012-07-20T18:17:24.620
> 
> 标签：ruby-on-rails-3, activerecord

我想添加一个`has_many`返回不同类型的有序集合，类似于多态关联。

```
class Group < AR:Base
  has_many ??
end

class Picture < AR::Base; belongs_to :group; end
class Video   < AR::Base; belongs_to :group; end
class Audio   < AR::Base; belongs_to :group; end 
```

我如何让组返回`belong_to`它使用 SQL 的所有图片、视频和音频。我真的不想求助于使用 Ruby，因为我还希望将“媒体项目”的集合与`acts_as_list`或类似命令一起排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:14:03.500

使用 STI（单表继承）。

```
class Group < AR:Base
  has_many :media_items
end

class MediaItem < AR::Base; belongs_to :group; end
class Picture < MediaItem; end 
class Video   < MediaItem; end
class Audio   < MediaItem; end 
```

为此，您只需将该`type`列添加到您的数据库架构中。

# c# - 在 C# 中制作带有背景图像的 A4 报告（如 Jasper Reports 和 iReport）

> ID：11584849
> 
> 赞同：0
> 
> 时间：2012-07-20T18:17:34.707
> 
> 标签：c#, visual-studio-2010, crystal-reports

我只想将我的数据库中的**一些值****放在 A4 页面上**（我有一个 JPG 模板），并**创建一个**每页插入的 PDF 书/报告。我使用*iReport 编辑器使用 NetBeans Java* *Jasper Reports*轻松完成了它。

 *在 Visual Studio C# Crystal Reports 中似乎要困难得多。我真的搜索过水晶报表的教程，但没有一个是使用 A4 图像作为模板的。如果您知道任何此类教程，请帮助我。

我更喜欢以编程方式而不是通过向导工作的解决方案。我已经用我的程序管理了我的数据库。我只需要报告和一些有关如何为报告提供输入值的文档。我什至不需要报告访问数据库。我可以获得程序中的所有值。对我来说最好的解决方案是一个模板，其中我的 JPG 文件作为背景和框（如文本框），我通过函数的参数从我的程序中提供文本。像 Jasper Reports / iReport。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:22:48.390

好的，我花了一些时间找到一个简单的解决方案，我得到了以下信息：

首先，我没有使用 Crystal Reports，而是使用**Windows Reports**（rdlc 文件）。Windows 报告更加简单易用，可以添加图像作为背景，并在该图像上方添加一些引用字符串参数的文本框（正是我需要的）。默认情况下它们在 Visual Studio 中，您可以在 Visual Studio 中设计报告（在解决方案资源管理器中右键单击 --> 添加报告）

然后我找到了一个将报告转换为 PDF 文件的代码示例，我用它编写了以下类：

```
public class XReport
{
    private ReportViewer reportViewer = new ReportViewer();

    public XReport()
    {
    }
    public XReport(String reportFilePath)
    {
        setReportFile(reportFilePath);
    }
    // set rdlc file
    public void setReportFile(String reportFilePath)
    {
        reportViewer.Reset();
        reportViewer.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Local;
        reportViewer.LocalReport.ReportPath = reportFilePath;
    }
    public void setParameters(List<ReportParameter> parameters)
    {
        reportViewer.LocalReport.SetParameters(parameters.ToArray());
        reportViewer.LocalReport.Refresh();
    }
    public void setParameters(Dictionary<String, String> parameters)
    {
        XList<ReportParameter> parameterList = new List<ReportParameter>();
        XList<String> parameterKeys = parameters.getKeys();
        foreach (String parameterKey in parameterKeys) {
            parameterList.Add(new ReportParameter(parameterKey, parameters.get(parameterKey))); }
        setParameters(parameterList);
    }
    public void exportToPDF(String pdfFilePath)
    {
        Warning[] warnings;
        string[] streamids;
        string mimeType = string.Empty;
        string encoding = string.Empty;
        string extension = string.Empty;
        byte[] bytes = null;
        // render PDF file
        try { bytes = reportViewer.LocalReport.Render( "PDF", null, out mimeType, out encoding, out extension, out streamids, out warnings); }
        catch (Exception ex) { System.Console.Write(ex.Message); }
        // write PDF file
        using (FileStream fs = new FileStream(pdfFilePath, FileMode.Create)) { fs.Write(bytes, 0, bytes.Length); fs.Close(); }
        // release reportViewer resources to avoid errors
        reportViewer.LocalReport.ReleaseSandboxAppDomain();
    }
} 
```

有用。试试看。小心两件事：

*   为 reportFilePath 和 pdfFilePath 使用正确的路径。（pdfFilePath 仅适用于我的非相对路径）

*   确保您已在 rdlc 报告中添加了具有正确名称的所有参数。您可以在 View --> Report Data --> Add New Parameter (右键单击 Parameters) 中添加它们。另请参阅：[在 rdlc 报告中创建参数](https://stackoverflow.com/questions/5512117/create-a-parameter-in-rdlc-report)

希望我有所帮助。它对我很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T09:09:55.807

您可以使用 Crystal 本身中的以下选项设置报告的纸张大小。首先打开报告，然后转到文件 -> 页面设置![在此处输入图像描述](../Images/1a2da80ddfa1d920b0c1e3658c92b684.png)*

# coldfusion - 带有 JSON.parse 的 encodeForJavaScript()，双引号问题

> ID：11584850
> 
> 赞同：0
> 
> 时间：2012-07-20T18:17:35.540
> 
> 标签：coldfusion, coldfusion-10, esapi

在 CF（9.0.2 中`esapi-2.0_rc10.jar`）：

```
<cfset test = ['ha"ha"']>
<script>
  x = JSON.parse('#encodeForJavaScript(serializeJSON(test))#');
  y = JSON.parse('#replace(serializeJSON(test), '"', '\"', "all")#');
  z = #serializeJSON(test)#;
  j = JSON.parse('#jsStringFormat(serializeJSON(test))#');
</script> 
```

输出：

```
<script>
  x = JSON.parse('\x5B\x22ha\x22ha\x22\x22\x5D');
  y = JSON.parse('[\"ha\\"ha\\"\"]');
  z = ["ha\"ha\""];
  j = JSON.parse('[\"ha\\\"ha\\\"\"]');
</script> 
```

`y`,`z`并且`j`有效。

`x`实际上失败了：“Uncaught SyntaxError: Unexpected token h”

我认为`encodeForJavaScript()`在 ESAPI 中应该是在这种情况下使用的最好和最安全的功能。为什么在这里失败？

附带问题，如果我只使用`serializeJSON()`，即使数据是使用用户输入动态构建的，是否意味着我真的不需要使用`JSON.parse`，因为 JSON 字符串中肯定没有函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:00:37.533

如果`encodeForJavascript`在 JSON 字符串上使用，则它不再是有效的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:35:22.360

引自 JSON.org：

> 数字与 C 或 Java 数字非常相似，只是不使用八进制和十六进制格式。

这是在 JSON 上下文中

[这张图片“显示”了 json 对象中字符串的格式](http://www.json.org/string.gif)

[有关更多信息，请参见 json.org](http://www.json.org/string.gif)

# linux - 没有管理员权限的服务器中组的 Git 存储库

> ID：11584855
> 
> 赞同：0
> 
> 时间：2012-07-20T18:18:03.320
> 
> 标签：linux, git

我有一个我们的研究实验室正在开展的项目，但只有少数成员可以访问代码。我们正在使用 Git 和 BitBucket，但我们想使用服务器实验室作为我们的主要存储库。我有以下限制：

*   我们没有管理员权限；
*   只有少数成员可以访问文件；
*   每个实验室成员都已经在服务器中拥有自己的登录名。

我怎样才能使这项工作？

我正在考虑让管理员在服务器中添加一个组，该组在我们的 Git 存储库文件夹中具有读/写权限。它有效吗？有没有更好的方法来管理这些具有这些约束的 Git 存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:22:15.963

拥有一个有权访问存储库目录的 POSIX 组是一种很好的做事方式。

请注意，您必须信任其他组成员 - 他们可以完全删除目录，而无需使用 git 客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:30:18.837

除了 Borealid 在他的回答中写的内容之外，您还可以使用[gitolite](https://github.com/sitaramc/gitolite/)。它允许您拥有更细粒度的访问控制（例如，您可以阻止用户删除您的存储库或阻止（其中一些）他们推送到某些分支）。它不需要root访问权限。

# python - 如何有效地转换 numpy 记录数组中的日期？

> ID：11584856
> 
> 赞同：1
> 
> 时间：2012-07-20T18:18:05.697
> 
> 标签：python, numpy

我必须将一个非常大（170 万条记录）的 csv 文件读取到一个 numpy 记录数组中。其中两列是需要转换为日期时间对象的字符串。此外，一列需要是这些日期时间之间的计算差异。

目前，我制作了一个自定义迭代器类，用于构建列表列表。然后我使用 np.rec.fromrecords 将其转换为数组。

但是，我注意到多次调用 datetime.strptime() 确实会减慢速度。我想知道是否有更有效的方法来进行这些转换。时间在日期范围内精确到秒。因此，假设时间是均匀分布的（它们不是），似乎我正在做 20 倍以上的必要转换（170 万/（60 X 60 X 24）。

将转换后的值存储在字典 {string dates: datetime obj} 中并在进行不必要的转换之前首先检查字典会更快吗？

或者我应该使用 numpy 函数（我还是 numpy 库的新手）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:54:54.477

我可能是错的，但在我看来，您的问题是重复出现，因此进行相同转换的次数超过了必要的次数。 **如果**这种解释是正确的，最有效的方法将取决于有多少重复。如果您在 170 万次中有 100,000 次重复，那么将 160 万次写入字典并检查 170 万次可能不会更有效，因为它执行 1.6+170 万次读取/写入。但是，如果您有 100 万次重复，那么为那些返回答案 (O(1)) 而不是额外进行一百万次转换会快得多。

总而言之，python 非常慢，鉴于您使用了 170 万个输入，您可能根本无法加快速度。至于numpy函数，我也不是很精通，但我相信网上有一些很好的文档。

# linq - 使用表达式树构建 lambda

> ID：11584860
> 
> 赞同：0
> 
> 时间：2012-07-20T18:18:22.827
> 
> 标签：linq, c#-4.0, expression-trees

我很难掌握表达式树。我希望能够为以下语句手动构建表达式树：

```
c => c.Property 
```

很多教程都集中在比较上，而我只希望它返回这个属性。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:24:57.700

```
ParameterExpression parameter = Expression.Parameter(typeof(YourClass), "c");
Expression property = Expression.PropertyOrField(parameter, "Property");
Expression<Func<YourClass, PropertyType>> lamda = Expression.Lambda<Func<YourClass, PropertyType>>(property, parameter); 
```

# mysql - 与 php-activerecord 和 codeigniter 的关联问题

> ID：11584863
> 
> 赞同：0
> 
> 时间：2012-07-20T18:18:35.673
> 
> 标签：mysql, codeigniter, phpactiverecord

我正在使用 php-activerecord + sparks + codeigniter 2.0 并试图找出三个表之间的关联。

我三个表：

## 表

> 联系方式 | 主键 = 联系人 ID
> 
> 收藏 | (join table) primary_key = id，其他键为contact_id & route_id
> 
> 路线 | 主键 = id

我认为应该是**A Route** *有很多* **集合**并且*属于*一个**联系人**

我可以让路线有许多要工作的集合，但无法让每个集合出现正确的联系方式，只能获得一个联系人的返回数据。

希望这是有道理的。

谢谢你的帮助

大卫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:03:24.227

听起来你需要第四张桌子。如果一条路线有很多集合并且只属于一个联系人，您可能正在寻找

```
contacts | contact_id
collections | collection_id
routes_to_collections | route_id (foreign key), collection_id (foreign key)
routes| route_id, contact_id (foreign key) 
```

# ruby-on-rails - 比较 Rails 中的数据库/表

> ID：11584865
> 
> 赞同：1
> 
> 时间：2012-07-20T18:18:39.310
> 
> 标签：ruby-on-rails, ruby, database, sqlite

假设我有两个数据库：一个包含`books`我拥有的列表，另一个包含`allowed_books`政府允许我拥有的所有列表（好吧，也许是一个不好的例子，但你会得到很快的想法）。`allowed_books`数据库是恒定的和一致的。如果`Book`我的`books`数据库中的 a 不在`allowed_books`数据库中，我需要将其从`books`.

做这个的最好方式是什么？

是否有一个 Rails/Sqlite 函数/方法可以比较两个数据库并删除无关的条目？还是我必须手动执行此操作？

我在想，在我真正创建一个新的之前`Book`，我会先在它上面运行类似的东西`AllowedBook.find_by_name(book_name)`。如果它返回 nil，那么我一开始就不会添加它。或者，如上所述，Rails/Sqlite 有一些默认方法来检查数据库之间的不一致，这是一个更好的选择吗？

我相当确定我可以手动使用`find_by_name`，但这是最好的选择吗？

Ruby 1.9.3、Rails 3.2.6、SQLite3 3.6.20。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:31:38.433

我假设您的意思是“两个表”，而不是“两个数据库”。在 Rails 或 Sqlite 中，没有办法按照您的建议进行操作。您必须手动完成。

# asp.net - CAS 被 IIS 7 中的 ASP.NET 2.0 应用程序忽略，在 Visual Studio 服务器中未被忽略

> ID：11584866
> 
> 赞同：0
> 
> 时间：2012-07-20T18:18:39.800
> 
> 标签：asp.net, cas

我有一个使用 .NET CAS 客户端的 ASP.NET 2.0 应用程序（参考 System.Web 等，v.2.0）。使用 Visual Studio 内置的 Web 服务器可以正常工作，但是当我部署到 IIS7 时，而不是使用 Web.config 中的 CAS 设置来使用`service`带有完整 URL 的查询字符串参数的 CAS url 登录（在调试期间发生） )，它使用`ReturnUrl`查询字符串参数，就好像它正在执行常规的旧身份验证一样。

我不知道从哪里开始。我没有从 log4net 中得到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:51:14.157

所以事实证明，我的 Web.config 中有一个标签`<modules>`和一个`<httpModules>`标签。前者与 Visual Studio 调试器一起工作，但后者是 IIS 所必需的。我两者都有，一切正常。

# jquery - 停止从 ipad asp.net 回发的提交按钮

> ID：11584871
> 
> 赞同：0
> 
> 时间：2012-07-20T18:19:25.617
> 
> 标签：jquery, asp.net, html, ios, validation

我有一个用 asp.net 编写的网站（虽然这部分只是 HTML 和 jQuery），并带有一个带有提交按钮的表单。我为 jquery 中的每个文本框编写了自己的验证，如果每个都通过，那么它通过 ajax 将表单发送到 c# 代码隐藏。这在每个浏览器中都可以正常工作，即使是 IE7 和 IE8 ，问题是当我通过 iPad ( Safari ) 查看页面时，它会完全跳过验证并刷新整个页面。我只有一个 4 岁的 ipad，我相信 ios2 或者 ios3，无论哪种方式，我都希望它适用于所有浏览器。

代码：

```
 <input type="button" id="btnLogin"  class="button" value="Login" style="top: 325px;" onclick="fnSignUp();" />

    function fnSignUp() {
        // Check for Valid EMail
        var rege = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        if (rege.test($('#<%= txtEmail.ClientID %>').val())) { }
        else {
            $('#<%= lblErrorSignUp.ClientID %>').text("Invalid EMail");
            return;
        }

        //Check For Empty First Name
        if ($('#<%= txtFNameSignUp.ClientID %>').val() == "") {
            $('#<%= lblErrorSignUp.ClientID %>').text("Enter First Name");
            $('#<%= lblFNameError.ClientID %>').text(" *");
            return;
        }
        else $('#<%= lblFNameError.ClientID %>').text("");

        //Check For Empty Last Name
        if ($('#<%= txtLNameSignUp.ClientID %>').val() == "") {
            $('#<%= lblErrorSignUp.ClientID %>').text("Enter Last Name");
            $('#<%= lblLNameError.ClientID %>').text(" *");
            return;
        }
        else $('#<%= lblLNameError.ClientID %>').text("");

        //Check For Empty Zip Code      
        if ($('#<%=  txtZipSignUp.ClientID %>').val() == "") {
            $('#<%= lblErrorSignUp.ClientID %>').text("Enter Your ZipCode");
            return;
        }

        // Check For Valid Zip Code
        if (IsValidZipCode == false) {
            $('#<%= lblErrorSignUp.ClientID %>').text("Invalid US ZipCode");
            return;
        }

        //Check If Password is left empty
        if ($('#<%=  txtPass1.ClientID %>').val() == "") {
            $('#<%= lblErrorSignUp.ClientID %>').text("Enter A Password");
            return;
        }

        //Check that both Passwords match
        if ($('#<%=  txtPass1.ClientID %>').val() != $('#<%=  txtPass2.ClientID %>').val()) {
            $('#<%= lblErrorSignUp.ClientID %>').text("Both Passwords Must Match");
            return;
        }
        var email = $('#<%=  txtEmail.ClientID %>').val();
        var fname = $('#<%=  txtFNameSignUp.ClientID %>').val();
        var lname = $('#<%=  txtLNameSignUp.ClientID %>').val();
        var zip = $('#<%=  txtZipSignUp.ClientID %>').val();
        var city = $('#<%=  hidcity.ClientID %>').val();
        var state = $('#<%=  hidstate.ClientID %>').val();
        var lat = $('#<%=  hidLatitude.ClientID %>').val();
        var longi = $('#<%=  hidLongitude.ClientID %>').val();
        var pass = $('#<%=  txtPass1.ClientID %>').val();

        $.ajax({
            type: "POST",
            url: "Login.aspx/SignUpNewUser",
            data: "{'email':'" + email + "', 'fname' : '" + fname + "' ,  'lname' : '" + lname + "', 'zip' : '" + zip + "',  'city' : '" + city + "' ,  'state' : '" + state + "' ,  'lat' : '" + lat + "',  'longi' : '" + longi + "',  'pass' : '" + pass + "' }",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                var obj = $.parseJSON(msg.d);
                if (obj.login == "false") $('#<%= lblLoginMessage.ClientID %>').text("Login Failed");
                if (obj.login == "true") {
                    location.reload(true);
                }
            }
        });
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:34:10.630

我没有要测试的 ipad，但您可以尝试以下一种或组合：

1.  使用`return false;`而不是`return;`取消默认按钮行为。
2.  `onclick`使用jquery而不是属性绑定click事件。

    ```
    $("#btnLogin").click(fnSignUp); 
    ```

    无论如何，使用 jquery 绑定更好，因为您将逻辑与页面视图分开。

# iphone - 如何每天只安排一次本地通知？

> ID：11584874
> 
> 赞同：0
> 
> 时间：2012-07-20T18:19:40.510
> 
> 标签：iphone, uilocalnotification

我目前在应用程序上有本地通知，但它们在 viewDidLoad 方法中工作。这意味着每次应用程序启动时，都会安排本地通知，这是多余的。

那么我怎样才能每天只安排一次本地通知呢？

对于一些额外的细节，我每天早上 8 点、下午 1 点和晚上 8 点安排三个本地通知，但每次应用程序启动时都会安排它们。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:55:01.200

您可以使用 来查看安排了哪些通知`[UIApplication sharedApplication] scheduledLocalNotifications`。这将返回一个 UILocalNotifications 的 NSArray，然后您可以在 viewDidLoad 中使用它来进行必要的检查。

# linux - Linux Bash - 从 XML 文件中取出内容

> ID：11584875
> 
> 赞同：1
> 
> 时间：2012-07-20T18:19:42.430
> 
> 标签：linux

因此，我之前使用 XPath 从 XML 表中获取数据并将其打印出来，以便

属性 1 - 属性 2 - 属性 3

是这样显示的。现在，我想在 Linux Bash 中做同样的事情。我知道如何使用 Linux Bash，并且能够将其中的一些打印出来，但不像我需要的那样。

这是 XML 工作表外观的示例

```
<xml>
<content>
<items>
<item>
<name>I need this information</name>
<item>

<lists>
<list>
<name>I DONT need this information</name>
</list> 
```

```
<hello>
<name> I need this information also</name>
<hello> 
```

请注意，我有三个 name 实例，所以我不能简单地使用 cat xmlfile | grep "name" 因为不止一个地方有名字

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:22:46.473

使用[XMLStarlet](http://xmlstar.sourceforge.net/doc/UG/xmlstarlet-ug.html)将查询作为 XPath 执行。

```
xmlstarlet sel -t \
  -m //item/name  -v . \  # print first item name
  -o ' - ' \              # print intermediate dash
  -m //hello/name -v . \  # print second item
  -n                      # print trailing newline 
```

此外，一些非常新的版本`xmllint`有一个`--xpath`可用于运行查询的参数。

# asp.net-mvc-3 - POST 后将搜索字段重置为原始值

> ID：11584880
> 
> 赞同：1
> 
> 时间：2012-07-20T18:20:14.090
> 
> 标签：asp.net-mvc-3, forms, reset

我的 MVC3 应用程序中有一个搜索屏幕，有 4 个不同的字段可用于搜索 - 几个下拉列表和几个文本字段。

搜索表单是通过帖子提交的，字段的值是模型的一部分。但是，在第一次搜索之后，这些值被设置为字段值，因此重置不会设置为原始值。

有没有简单的方法来处理这个？

# jquery - 在函数调用中选择 $(this) 的父级

> ID：11584883
> 
> 赞同：0
> 
> 时间：2012-07-20T18:20:31.773
> 
> 标签：jquery, function, parent

我在调用函数时选择 $(this) 的父级时遇到问题。当我选择小 1 按钮时，按钮会切换，因为只能选择一个。我也有一个函数调用来设置大按钮。我知道我可以在不调用函数的情况下设置大按钮的状态，但这只是更多请求的开始。

我想添加 $(this).parent().prev().addClass('big_selected'); 会做到这一点，但它对我不起作用，关于如何捕获大按钮的元素并添加指定的类有什么建议吗？

在此处查看演示... [http://jsfiddle.net/froze1906/aSyUE/1/](http://jsfiddle.net/froze1906/aSyUE/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:34:35.467

在你的小提琴中对我有用的东西正在改变：

```
setBig(); 
```

到：

```
setBig.call(this); 
```

这样在 setBig 函数中，`this`就是被点击的按钮。

您的 setBig 函数的参数为`evt`​​ ，但您从不使用它。如果您需要传递它，请将您的函数称为：

```
setBig.call(this, evt); 
```

此外，您有两个具有相同 id 的元素。元素 ID 应该是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:37:25.137

这就是完成您想要的一切所需的一切

```
$(':button[class*=small]').click(function(){ // <-- on all small button clicks
    $(this).parent().prev().addClass('big_selected'); // < -- add big class to closest big button
    $(this).addClass('small_selected'); // <-- add class to current clicked
    $(':button[class*=small]').not(this).removeClass('small_selected'); // <-- remove class from all but current clicked
    $(':button[class*=small]').not($(this).siblings().andSelf()).parent().prev().removeClass('big_selected'); // <-- remove class from Big that is not closest to current clicked
}); 
```

[http://jsfiddle.net/aSyUE/3/](http://jsfiddle.net/aSyUE/3/)

# c++ - 如何让编译器在没有 C++11 的情况下手动检查数据类型

> ID：11584886
> 
> 赞同：1
> 
> 时间：2012-07-20T18:20:39.900
> 
> 标签：c++, c++11, types

```
void f(string str,int i )
{
  cout<<str.c_str()<<endl;
  cout<<i<<endl;
}

typedef void (*PF)(int i,string str);

int _tmain(int argc, _TCHAR* argv[])
{

   PF pf=(PF)(void*)&f;

   pf(10,string()); //runtime-error

   return 0;

} 
```

由于某些需要，我需要使用已擦除数据类型`f`的地址来调用函数（如上面的代码）。`f`但是这种解决方案可能会导致不安全的函数调用，因为在编译过程中无法检查数据类型。当参数类型与参数不同时，是否有一些方法可以让编译器报告错误？

是这样的：</p>

```
void f(T1 i,T2 j)
{
  T1 p* = new i.real_type; //if i.real_type is different from T1, it will lead a compiling 
....
} 
```

我非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:43:06.467

C++ 中唯一可用的运行时类型信息是`typeid`and `dynamic_cast`，它们仅适用于多态类型（具有虚函数的类类型）。函数指针不存储必要的信息。

真的，你应该**避免强制转换函数指针**。唯一需要函数指针大小写的地方是*or*`GetProcAddress`的返回值`dlsym`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:49:54.010

不，没有安全的方法可以从 void* 中“获取类型”。可能有一种干净的方法可以解决您的实际问题，因此不需要 void* 。我建议你在那里发布一个新问题，解释你的具体任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:02:07.237

> 当参数类型与参数不同时，是否有一些方法可以让编译器报告错误。

它怎么会知道？您*颠覆*了类型系统（这就是强制转换为`void*`s 所做的事情）。你告诉 C++ 编译器假装一个函数指针是一个指向任何东西的指针，然后你告诉它假装这个指向任何东西的指针是一个指向不同类型函数的指针。

编译器无法知道原始类型是什么。它只知道有一个`void*`，并且您要求将其转换为某种东西。为了完全允许`void*`工作，C++ 语言不需要编译器神奇地知道 a`void*`来自哪里以及它曾经是什么。因此，您可以将其转换为任何类型，但规范指出，如果您将其转换*为的不是*原始类型，您将获得未定义的行为。

C++ 中的类型系统允许编译器检测您何时做错了什么。通过颠覆它，然后做错事，你就放弃了生活在理性宇宙中的所有权利。你告诉编译器，“我知道我在做什么”，然后朝自己的脚开枪。

您可以做的最好的事情是使用[Boost.Any](http://www.boost.org/doc/libs/1_50_0/doc/html/any.html)来存储您的函数指针。任何将其转换为除最初存储在其中的内容之外的任何内容的尝试都将引发异常。当然，在*运行时*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T19:20:34.653

根据您拥有的各种功能类型，您可以添加一些用于测试或调试构建的内容：

```
// Once off init call
DEBUG_INSERT (&f, INT_STRING);

...

DEBUG_CHECK_FUNC (pf, INT_STRING); 
pf(10,string()); //runtime-error 
```

我很确定，通过一些 boost 和/或 c++11 魔法，您可以消除对“KIND”的需求，并从原始函数类型中隐式推导出它。您最终可能会看到如下所示的呼叫：

```
CHECKED_CALL (pf, 10, string ()); 
```

在发布版本中，它只是使用参数调用函数，而在调试版本中，您也可以进行检查。

# web-services - 用 Coffeescript 编写的 Node JS 服务器可以工作，但 JS 版本不行

> ID：11584888
> 
> 赞同：1
> 
> 时间：2012-07-20T18:20:42.577
> 
> 标签：web-services, node.js, coffeescript, haproxy

我有两个节点服务器作为我的后端服务器，前端有一个 haproxy 服务器来循环传入 HTTP 请求。带有咖啡的服务器工作正常，但是带有用 JS 编写的已编译咖啡脚本版本的服务器在运行几个小时后就崩溃了。咖啡代码和编译后的 JS 代码看起来一模一样。当 JS 版本崩溃时，它开始发送 502 响应。这些服务器每天处理大约 500 万个请求（合计）。有人见过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T15:35:47.443

也许这不是你的问题，但我在以某种方式使用链式方法时遇到了确切的问题。

```
obj.method1 "param1"
.method2 "param2"
.exec (err, res) ->
   ... 
```

对比

```
obj.method1("param1")
.method2("param2")
.exec (err, res) ->
   ... 
```

在编译为 JS 之前，我一直在使用方法 #1，但此时它失败了。我不知道节点/咖啡版本，但这个答案可能会对某人有所帮助。

# javascript - 为 load() 添加超时

> ID：11584891
> 
> 赞同：4
> 
> 时间：2012-07-20T18:20:59.017
> 
> 标签：javascript, jquery

```
var refreshId_hxlatestposts = setInterval(function() {
var el = $("#hxlatestposts");
var req = $.get("example.php");
el.fadeOut('slow', function () {
    req.done(function( data ){
        el.html(data).fadeIn('slow');
    });
});
}, 60000); 
```

这就是我用来每分钟刷新一个 div 的方法，有时当它从中获取提要的网站关闭时它会挂起。我想知道如何超时，所以如果它无法在 X 秒内加载 php 文件，则返回“加载失败”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:25:59.280

很好地使用延迟对象。

如果替换`$.get`为`$.ajax`，则可以添加超时。

```
var req = $.ajax({
    url: "example.php",
    type: "GET",
    timeout: 5000 // 5 seconds
}); 
```

然后添加一个失败处理程序

```
req.done(function(){...}).fail(function(){ 
    alert("failed to load"); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:32:00.050

jQuery 文档（[.ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup/)）建议使用`.ajaxSetup()`来设置 的值`timeout`，而不是在单个请求中使用它。

如果请求失败，您可以使用它`request.fail()`来注册功能。

```
$.ajaxSetup({
    timeout: 5000
});

var refreshId_hxlatestposts = setInterval(function() {
    var el = $("#hxlatestposts");
    var req = $.get("example.php");
    el.fadeOut('slow', function() {
        req.done(function(data) {
            el.html(data).fadeIn('slow');
        });
        req.fail(function(jqXHR, textStatus) {
            el.html('Fail to load').fadeIn('slow');
        });
    });
}, 60000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T18:27:50.323

您需要检查传入响应的状态，以确保服务返回 200 Ok 状态。这比仅仅等待超时更可靠——您将知道它是否是好的数据，并且可以通过将超时放入完整的函数来决定重试。

```
 $.ajax({
    //...        
    success: function(data, textStatus, xhr) {
        console.log(xhr.status);
        //handle status codes etc.
        // then set your timeout

    },
    complete: function(xhr, textStatus) {
        console.log(xhr.status);
        //handle status codes etc.
         // then set your timeout

    },

    // OR

    fail: function( xhr, textStatus ){
        //retry code or timeout
    }

    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T18:27:58.963

jQuery 的 $.get 只是 $.ajax 的简写，在需要更多灵活性时使用（在您的情况下，是的）

替换`$.get("example.php");`为：

```
$.ajax({
  type: "GET",
  url: "example.php",
  timeout: X*1000,
}).done(function(data) { 
   el.fadeOut('slow', function () {
     el.html(data).fadeIn('slow');
  });
}, 60000);
}); 
```

`X`您希望它等待的秒数在哪里（超时）

# ruby - Watir webdriver Errno::ECONNREFUSED：无法建立连接，因为目标机器主动拒绝了它。- 连接（2）

> ID：11584896
> 
> 赞同：3
> 
> 时间：2012-07-20T18:21:50.640
> 
> 标签：ruby, watir, watir-webdriver

更新：

我正在运行下面的代码来执行我的示例测试用例：（Windows 7、Watir 3.0.0、Watir-webdriver-0.6.1）

```
require "watir-webdriver"
require 'test/unit'

class Teste1    
    $var = Watir::Browser.new :chrome       
    def met1
        $var.goto 'google.com'
        $var.text_field(:name, "q").set 'sample'
        $var.button(:name =>'btnG').click
    end     
end

class Teste2 < Test::Unit::TestCase 
    $test = Teste1.new
    def test_gomet1
        $test.met1()
    end     
end 
```

浏览器打开，但脚本抛出以下错误：

```
test_gomet1(Teste2):
Errno::ECONNREFUSED: No connection could be made because the target machine actively refused it. - connect(2)
   C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:82:in `response_for'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:38:in `request'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:99:in `get'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/navigation.rb:14:in `to'
C:/Ruby193/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/browser.rb:63:in `goto'
maisum.rb:11:in `met1'
maisum.rb:21:in `test_gomet1' 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:50:10.027

我无法为`test_closeVar`测试获得该异常，但是我可以为您的其他两个测试重现它。当您在浏览器关闭后尝试与浏览器交互时，您会遇到该异常。

使用 Test::Unit 时，请记住测试按字母顺序运行。因此，您的`test_closeVar`测试将在甚至运行之前关闭浏览`test_gomet1`器`test_gomet2`。`test_gomet1`并且`test_gomet2`会抛出该异常，因为浏览器已关闭。

作为一种快速修复，您可以在测试名称中添加数字，以使它们以特定顺序运行。

不过，长期的解决方案实际上是让您的测试独立，以便顺序无关紧要。

**更新**

几点观察：

*   使用 Selenium-Webdriver 会出现问题，因此不是 Watir-Webdriver 特定的问题。
*   该脚本在 Firefox 中运行良好，因此它可能是特定于 chromedriver 的问题。

解决方法：似乎 chrome 浏览器不喜欢在测试用例之外声明。我不明白为什么，但快速解决方法是在测试用例的设置中声明浏览器。如果你想为每个测试使用相同的浏览器，你可以在它不存在的情况下声明它。

以下将运行（尽管我建议清理它以减少全局变量的使用）：

```
class Teste1    
    def met1
        $var.goto 'google.com'
        $var.text_field(:name, "q").set 'sample'
        $var.button(:name =>'btnG').click       
    end     
end

class Teste2 < Test::Unit::TestCase 
    def setup()
        unless defined?($var)
            $var = Watir::Browser.new :chrome       
        end
        $test = Teste1.new()
    end

    def test_gomet1
        $test.met1()
    end     
end 
```

# android - 使用 LinearLayout.LayoutParams 时出现 ClassCastException

> ID：11584900
> 
> 赞同：6
> 
> 时间：2012-07-20T18:22:14.210
> 
> 标签：android, android-layout, android-fragments

这是一个例外：

```
07-20 19:52:14.193: E/AndroidRuntime(3908): FATAL EXCEPTION: main
07-20 19:52:14.193: E/AndroidRuntime(3908): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams cannot be cast to android.widget.LinearLayout$LayoutParams
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:634)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.View.measure(View.java:12892)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.View.measure(View.java:12892)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1249)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.View.measure(View.java:12892)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.View.measure(View.java:12892)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.View.measure(View.java:12892)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2265)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.View.measure(View.java:12892)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1240)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2628)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.os.Looper.loop(Looper.java:137)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at android.app.ActivityThread.main(ActivityThread.java:4507)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at java.lang.reflect.Method.invokeNative(Native Method)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at java.lang.reflect.Method.invoke(Method.java:511)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
07-20 19:52:14.193: E/AndroidRuntime(3908):     at dalvik.system.NativeStart.main(Native Method) 
```

我看不到抛出异常的行，所以我无法弄清楚。我确实知道它在以下几行中：

```
public class TodayFragment extends Fragment {

ListView listView;
String[] urls;
ActionBar mActionBar;
Spinner spinner1;

public TodayFragment() {
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    LinearLayout linear = new LinearLayout(getActivity());
    linear.setOrientation(LinearLayout.VERTICAL);

    spinner1 = new Spinner(getActivity());
    spinner1.setLayoutParams(new LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    linear.addView(spinner1);
    listView = new ListView(getActivity());
    spinner1.setLayoutParams(new LayoutParams(
            LinearLayout.LayoutParams.MATCH_PARENT,
            LinearLayout.LayoutParams.WRAP_CONTENT));
    linear.addView(listView);

    new ParseHTML().execute();
    return linear;
    }
} 
```

我正在使用的片段是 android.support.v4.app.Fragment。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T18:39:33.853

您的 LayoutParams 导入语句可能正在导入 ViewGroup.LayoutParams。尝试显式使用 LinearLayout.LayoutParams(...)：

```
 spinner1.setLayoutParams(new LinearLayout.LayoutParams(
           LinearLayout.LayoutParams.WRAP_CONTENT,
           LinearLayout.LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:39:42.770

在附加任何子项之前尝试设置 LinearLayout 的 LayoutParams'。

```
LinearLayout linear = new LinearLayout(getActivity());
linear.setLayoutParams(new ViewGroup.LayoutParams(
        ViewGroup.LayoutParams.WRAP_CONTENT,
        ViewGroup.LayoutParams.WRAP_CONTENT));
linear.setOrientation(LinearLayout.VERTICAL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-08T22:22:26.153

如果您想知道每个视图必须使用哪些 LayoutParams，请查看此[文档](http://developer.android.com/guide/topics/ui/declaring-layout.html#layout-params)：

每个视图都必须有一个与其父级对应的 LayoutParam。

例如，为了创建这个视图层次结构，

*   相对布局相对布局
    *   LinearLayout 线性布局，方向：垂直
    *   文本视图文本视图
    *   按钮按钮1
    *   按钮按钮 2

将主要活动中的 onCreate 方法的内容替换为：

```
 super.onCreate(savedInstanceState);
  RelativeLayout relativeLayout = new RelativeLayout(this);

  LinearLayout linearLayout = new LinearLayout(this);
  linearLayout.setOrientation(LinearLayout.VERTICAL);
  linearLayout.setLayoutParams(new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT));
  relativeLayout.addView(linearLayout);

  TextView textView = new TextView(this);
  textView.setText("a text");
  textView.setLayoutParams(new LinearLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));
  linearLayout.addView(textView);

  Button button1 = new Button(this);
  button1.setText("button 1");
  button1.setLayoutParams(new LinearLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT));
  linearLayout.addView(button1);

  setContentView(relativeLayout); 
```

# php - 通过电子邮件发送 div 的内容或屏幕截图

> ID：11584907
> 
> 赞同：2
> 
> 时间：2012-07-20T18:22:41.560
> 
> 标签：php, javascript, html, image-processing

我正在一个用户正在“设计”定制产品的网站上工作。

当他们这样做时，div 的背景和它的内容正在发生变化。在流程结束时，用户应该能够分享他们的设计。

我该怎么做呢？

我以为他们可以只用*PrtScn*截屏并裁剪到 div，但我怎样才能让网站为用户执行此操作？

另一个想法是将背景、文本和图像全部组合到一个 PNG 中。使用 php，但似乎我以这种方式尝试的任何方法都不能正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:26:19.653

如果您使用的是 Windows，则可以使用它`imagegrabscreen`来执行此操作。

**图像抓取屏幕：[http :](http://ca3.php.net/imagegrabscreen) **//ca3.php.net/imagegrabscreen****

 **否则，你最好的选择是使用类似的东西`painty`来完成这个：

**油漆：[http :](http://www.rabuser.info/painty.php) **//www.rabuser.info/painty.php****

 **现在 - 因为您提到使用电子邮件发送这些图像，所以我建议您简单地将 HTML 嵌入电子邮件正文中。今天的大多数电子邮件客户端都不会从不受信任的域加载图像，甚至可能会因此陷入垃圾邮件陷阱。一些 web 服务 base64 对其图像进行编码以解决此问题，但如果图像太大（可能是分隔符），它将成倍增加您的电子邮件大小，从而增加您被垃圾邮件捕获的风险。

**垃圾邮件陷阱**：[http ://en.wikipedia.org/wiki/Spamtrap](http://en.wikipedia.org/wiki/Spamtrap)****

# json - Json API 插件 - 从附件数组中获取缩略图

> ID：11584909
> 
> 赞同：1
> 
> 时间：2012-07-20T18:22:45.743
> 
> 标签：json, api, wordpress

我正在使用 Json API 插件从 Wordpress 中提取数据。我使用以下方法成功获取了附件数组：

```
var myImage=myJSON[j].attachments; 
```

但这给了我整个数组。如何从该数组中获取缩略图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T17:52:16.457

如果您想要帖子“特色图片”的帖子缩略图网址，您可以这样做：

```
var myImage=myJSON[j].thumbnail_images.thumbnail.url; 
```

如果您想获取任何附件 URL 的缩略图，请执行以下操作：

```
var myImage=myJSON[j].attachments[0].images.thumbnail.url; 
```

只需将“[0]”替换为您要获取的图像的索引即可。console.log() 并检查您的 JSON 响应以找到所需图像的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-01T14:23:40.490

使用此插件的当前版本，仅当您在编辑帖子/或第一次创建帖子时上传图像时，它才能像 kmazla 描述的那样工作。如果您附加来自媒体数据库的现有图像，它仍将在查询中显示为空数组。如果您决定上传更多照片（例如，因为您上传的第一张照片是错误的），即使您只选择其中一张图片作为“特色图片”，它们也会被附加到附件数组中。这很令人困惑。

解决方法？

制作一个全新的帖子，并确保以正确的顺序附加正确的图像。应删除并重新发布较旧的帖子，以便正确排列附件数组。

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中使用虚拟路径

> ID：11584911
> 
> 赞同：0
> 
> 时间：2012-07-20T18:22:47.737
> 
> 标签：asp.net-mvc-3

我有一个布局页面，它在我的应用程序中的所有视图中共享。该视图引用了我的应用程序中的 .css。为了参考，我目前在 _layout.cshtml 文件的顶部有以下内容：

```
<link rel="stylesheet" href="/css/themes/default/app.css" /> 
```

我正计划使用这个应用程序并通过 PhoneGap 加载到手机应用程序中。因此，我无法使用 /css/themes/default.app.css。相反，我需要将其转换为相对于文件路径的字符串。例如，我需要动态生成一个如下所示的值：

```
<link rel="stylesheet" href="../../../css/themes/default/app.css" /> 
```

“../”的数量将根据它的深度来确定。我认为 ASP.NET MVC 3 框架中会内置一个实用程序或其他东西来执行此操作。但是，我什么也找不到。我有很多文件，我不想手动更新所有的 url 模式。是否有一个实用程序可以自动处理我想要完成的事情？如果是这样，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:24:55.427

使用[UrlHelper.Content](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.action.aspx) HTML Helper 方法。

> 此方法将虚拟（相对）路径转换为应用程序绝对路径。

```
<link href="@Url.Content("~/css/themes/default/app.css")" 
                                       rel="stylesheet" type="text/css" /> 
```

您可以将`css`文件夹放在`Content`MVC 项目根目录下

# extjs - Extjs 网格标题绘制在其他控件之上

> ID：11584916
> 
> 赞同：0
> 
> 时间：2012-07-20T18:23:10.050
> 
> 标签：extjs

参见上图，网格标题始终位于顶部。

这是图像：

![在此处输入图像描述](../Images/5040dd4ce021bb40f47a77bf8b48c13c.png)

这个图像就像一个菜单。当我单击第一个时，以水平线打开菜单。当我点击第二个（从上到下）打开这个〜组〜的菜单。这是一个标志性的菜单。

第一次，它只显示第一列图标（在这种情况下是“栏”和“收藏夹”，并且网格显示正确。但是一旦单击“栏”按钮，就会出现其余的行，但是网格标题在顶部。

这似乎是一个绝对的布局问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T11:30:28.547

我建议不要更改 extjs 类。

如果您这样做，将在未来的更新中遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:21:06.873

我发现问题出在 ext-all.css 文件中。

类中的 z-index 属性：

```
.x-docked{
    position:absolute!important;
    z-index:1
} 
```

似乎是问题所在。

如果我更改为零，它会起作用。

# javascript - 使用 jquery ajax 加载内容的自定义功能

> ID：11584918
> 
> 赞同：0
> 
> 时间：2012-07-20T18:23:10.640
> 
> 标签：javascript, jquery

我正在尝试在 javascript 中编写一个函数，该函数接收两个参数（目标，内容）以使用 $.load() jquery 函数通过 ajax 加载内容，代码在上面：

```
 function cargarContenido(content,target) { 
    $(target).load(content);
 } 
```

我这样调用函数，但它不起作用：

```
<a href="#" onclick="cargarContenido('hd.html','content')"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:26:45.613

您的目标是无效的选择器。你需要类似的东西`#content`

```
<a href="#" onclick="cargarContenido('hd.html','#content')"> 
```

# r - 已安装软件包，但出现无法找到功能的错误 R

> ID：11584922
> 
> 赞同：1
> 
> 时间：2012-07-20T18:23:28.743
> 
> 标签：r, installation, package, knn

> **可能重复：**
> [错误：在 R 中找不到函数...](https://stackoverflow.com/questions/7027288/error-could-not-find-function-in-r)

我正在尝试在 R 中使用 knn 函数，并且已经安装了几个包来这样做（例如 KNN、KNNgarden、iped）。

使用 R-Studio，它遇到了成功安装包（包 'kknn' 成功解包并检查了 MD5 总和），但是当我尝试使用 kknn (kknn(train, test, cl, k = 1, l = 0, prob = TRUE, use.all = TRUE)) 我收到以下错误：错误：找不到函数“kknn”

我假设这与我的工作目录有关。我检查并将我的 WD 重置为 R 中包含软件包的文件夹，但要知道是否有用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:25:17.113

除了安装包之外，您还必须加载它们。需要安装一次，每次启动新的 R 会话时都需要加载。这些中的任何一个都可以解决问题。

```
require(kknn)
library(kknn) 
```

# matlab - Matlab：GF（2 ^ m）上的`gfrank`

> ID：11584926
> 
> 赞同：1
> 
> 时间：2012-07-20T18:24:01.563
> 
> 标签：matlab

我一直在 Matlab 中使用超过 GF(2) 的矩阵。好吧，我一直在使用 0/1 矩阵，我一直认为它们是在 GF(2) 上定义的。我很惊讶/高兴地看到，Matlab 在通信系统工具箱中提供了一些用于处理有限域的功能。特别是，如果我想在有限域上找到矩阵的秩，有几种方法：（1）`gfrank`在我已经定义的矩阵上使用，或（2）`rank`在伽罗瓦域数组（创建与`gf`）。对于 GF(2) 上的矩阵，前一种方法似乎要快得多；然而，有一个问题……

的[文档`gfrank`](http://www.mathworks.com/help/toolbox/comm/ref/gfrank.html)说该函数不适用于 GF(2^m) 形式的字段。我仔细检查了一个玩具示例，并将 GF(2) 指定为要处理的字段似乎输出了正确的结果。此外，函数的 m 文件将 GF(2) 指定为默认字段（通过将第二个参数指定为`2`if `nargin < 2`）。这里一定*有*问题，似乎是文档。但是，我不想假设文档是错误的，只是在很久以后才发现计算并不总是在 GF(2^m) 上工作。有人确定这里出了什么问题吗？谢谢你的帮助。

# visual-studio - Code Rush 三个句点的键盘快捷键是什么？

> ID：11584928
> 
> 赞同：6
> 
> 时间：2012-07-20T18:24:23.473
> 
> 标签：visual-studio, devexpress, coderush, coderush-xpress

我知道使用 ReSharper，您可以使用键盘快捷键`Alt`+`Enter`打开“快速任务”或其他任何名称。Code Rush 是否有类似的键盘快捷键？

[![](../Images/28ad3357ebd6b5a46504d1f8a67eec91.png "由 imgur.com 主办")](https://imgur.com/PbKXr)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:39:07.777

在 CodeRush 中调用代码重构和修复的常用[快捷键](http://www.skorkin.com/2010/07/ide-tools-the-refactor-key-shortcut/)`Ctrl`是+ ```（反引号）组合键。此快捷方式调用弹出菜单，其中列出了当前上下文可用的所有操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T18:39:13.767

官方的答案是`Ctrl`+ ```（Ctrl 和反勾号）

但是在某些情况下，这可以将自身设置为`Ctrl`+ `'`（Ctrl 和单引号）

注意：我相信这归结为代码页\键盘布局和其他我不完全理解的东西:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T21:40:48.980

它是可配置的。[Mark Miller 建议将它设置为 NumPad 0](http://community.devexpress.com/blogs/markmiller/archive/2008/04/25/tips-for-getting-up-to-speed-amp-exploiting-the-power-of-coderush-and-refactor-pro.aspx)，这样你的小指就可以根据需要点击它——不过要小心——你会上瘾的！

# html - 使用 FireFox 的 CSS 计算中缺少 4px+

> ID：11584930
> 
> 赞同：0
> 
> 时间：2012-07-20T18:24:32.390
> 
> 标签：html, css, firefox

对于这个小提琴

[http://jsfiddle.net/hNx6E/13/](http://jsfiddle.net/hNx6E/13/)

我相信正在发生的是不同的浏览器对我不知道我正在使用的属性有不同的默认值。

当您检查 HTML 时，这令人沮丧，默认值不可见，属性也不可见。

是否有浏览器的默认属性列表，尤其是 FireFox 和 Safari？

它在哪里？

当我期望它的高度小 2px 时，按钮的高度比输入框大 2px 或更大。

base、Firefox 和 Safari 有什么区别？

我需要了解这些差异是什么，而不仅仅是用大量的 CSS 重置代码来掩盖它们。

谢谢

**参考：**

[如此类似的问题 - Safari](https://stackoverflow.com/questions/11582110/missing-2px-in-css-calculations-w-safari)

[W3 盒子模型](http://www.w3.org/TR/CSS2/box.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:34:35.497

如果您将宽度/高度与填充/边框混合，也许您可​​以尝试调整框大小。它会强制浏览器采用宽度/高度值。

[http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:35:40.627

浏览器正在将自己的行高应用于您的按钮。添加`line-height:16px;`解决了这个问题。[http://jsfiddle.net/hNx6E/20/](http://jsfiddle.net/hNx6E/20/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:30:10.507

每个浏览器都有一些默认样式，我们应该首先使用 CSS RESET 覆盖它们，然后根据我们的样式设置样式。

在您的样式表的开头添加此代码

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

# jquery - ajax 帖子没有给出任何指示

> ID：11584934
> 
> 赞同：2
> 
> 时间：2012-07-20T18:24:42.187
> 
> 标签：jquery, ajax, post

```
$("#submitbutton").button().click(function() {
    $.ajax({
        type: 'POST',
        url: 'tst/mmm.php',
        data: { abc: "abcdefghijklmnopqrstuvwxyz" },
        success: function(msg){
            alert(msg);
        }
    });
});

# cat tst/mmm.php
<?php echo json_encode(array("first"=>"YyXy","last"=>"yyyyXXX")); ?> 
```

为什么我看不到告诉我*first=YyXy&last=yyyyXXX*的警报。如果这意味着什么，则可以从远程访问 mmm.php。他们都在apache上。我应该在哪里寻找这篇文章的回复？对不起，这个主题的蹩脚问题，我是新手。谢谢！！

编辑1：html代码：

```
 <body>
            <div id=container>
            <div id="first">
                    <form id='form1'>
                            <button id="submitbutton" type="submit">Submit</button></br></br>
                    </form>
            </div> 
```

编辑 2：我是否需要特殊的用户：组权限才能将 html 发布到 php？我应该使用一些特殊设置来允许在 apache 配置 (httpd.conf) 中访问 mmm.php 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T18:28:43.550

这不起作用的可能原因：

*   你确定你的选择器是这样的`$("submitbutton")`吗？这告诉 jQuery 寻找 tag `submitbutton`。也许，你的意思是`$("#submitbutton")`或`$('.submitbutton')`。

*   您的 js 代码是否包含在内`$(document).ready(...)`？除非 jQuery 可能不知道整个 DOM 树。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T18:28:54.327

如果没有看到完整的 HTML 代码，很难确定，但您的选择器看起来是错误的。如果“submitbutton”是一个 id 属性，那么您的选择器应该是：

```
$("#submitbutton") 
```

如果它是一个类，它应该是：

```
$(".submitbutton") 
```

编辑：

您的 AJAX 代码不应该在 ajax 设置中具有成功功能吗？像这样：

```
$.ajax({
    type: 'POST',
    url: 'tst/mmm.php',
    data: { abc: "abcdefghijklmnopqrstuvwxyz"},
    success: function(msg){
        alert(msg);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:25:15.520

好吧，在[文档](http://api.jquery.com/jQuery.ajax/)中，他们声明了以下内容：

> **弃用通知：** jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调将在 jQuery 1.8 中弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

所以我用了他们的例子，现在看起来像这样（并且有效）：

```
$("#submitbutton").button().click(function() {
    $.ajax({
        type: 'POST',
        url: 'mmm.php',
        data: { abc: "abcdefghijklmnopqrstuvwxyz" } })
        .done(function() { alert("success"); })
        .fail(function() { alert("error"); })
        .always(function() { alert("complete"); });
   });
}); 
```

感谢你们！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T18:57:40.703

尝试这个：

```
 $.ajax({   
       type: 'POST',
       url: 'tst/mmm.php',
       data: { abc: "abcdefghijklmnopqrstuvwxyz" }
        })
       .success(function (msg) {
                    alert(msg);
        }) 
```

# css - jquery mobile ui-icon 有时不出现？

> ID：11584937
> 
> 赞同：3
> 
> 时间：2012-07-20T18:24:53.530
> 
> 标签：css, jquery-mobile

我对 jQuery mobile 有一个奇怪的问题。我使用的是最新版本（1.1.1），尽管我也遇到了 1.1.0 这个问题。

问题是我的图标有时不会出现，例如图像本身不会出现。我在 chrome 中对此进行了测试。我无法故意重现它，这是一个似乎随机发生的问题。当它发生时，它看起来像下图中的顶部标题。但是，当我在 chrome 中打开元素检查器并取消选中/选中背景（或实际上任何）属性时，图标会神奇地出现。有谁知道发生了什么？

一张图来说明问题： ![顶部没有图标，底部有图标](../Images/95a34c9fbbf05cba04bdf136d3ad2b8d.png)

编辑：澄清一下，我的同事也有这个问题。这发生在 chrome 中，但在另一台计算机上，所以我怀疑任何令人讨厌的插件在这里玩坏了。

Edit2：我试图解决这个问题的几件事。

*   通过javascript预加载：实现一行代码以确保下载背景。
*   静态添加到页面以查看控件是否已下载。

奇怪的是，除了背景图像之外，几乎所有东西都被绘制了。**顺便说一下，所有**图标都会发生这种情况，列表视图等中的图标也是如此。浏览页面或重新加载并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:54:18.540

实际上，您的应用程序无法找到 jQM 的 CSS，因此我建议使用 CDN 来获取您的 CSS。

`<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />`

希望能帮助到你。

# c# - 实体框架：只读属性与无参数方法

> ID：11584938
> 
> 赞同：2
> 
> 时间：2012-07-20T18:24:54.583
> 
> 标签：c#, entity-framework

考虑下课

```
public class AccountGroup : Entity<int>
{
    public AccountGroup()
    {
        Accounts = new HashSet<Account>();
        Groups = new HashSet<AccountGroup>();
    }

    // option 1 - read only properties
    public bool IsRoot { get { return Parent == null; } }
    public bool IsLeaf { get { return !Groups.Any(); } }
    public Account MainAccount { get { return Accounts.FirstOrDefault(a=>a.Type == AccountType.MainAccount); } }

    // option 2 - parameter-less methods
    //public bool IsRoot() { return Parent == null; }
    //public bool IsLeaf() { return !Groups.Any();  }
    //public Account GetMainAccount() { return Accounts.FirstOrDefault(a => a.Type == AccountType.MainAccount); }

    public string Name { get; set; }
    public string Description { get; set; }

    public virtual ISet<Account> Accounts { get; private set; }
    public virtual ISet<AccountGroup> Groups { get; private set; }
    public virtual AccountGroup Parent { get; set; }
} 
```

如果我想“丰富”上面的类，我应该使用哪种选项方法。

## 选项1

我是否应该使用只读参数知道 EF 不喜欢它们（尝试在 Where 子句中使用 IsRoot 会抛出 ex，与`The specified type member 'IsRoot' is not supported in LINQ to Entities. Only initializers, entity members, and entity navigation properties are supported.`

## 选项 2

或者我应该使用无参数方法（不确定有什么缺点）

一般来说（不考虑 EF），当功能等效时，上面考虑哪种方法是首选的（即，如果我调用`.IsRoot`或，我会得到相同的功能`.IsRoot()`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:28:55.407

`IsRoot`对我来说更像是一种财产。它表示对象的当前状态，在调用时除了报告该状态之外实际上不做任何事情，并且通常 .NET 中的 getter/setter 是属性。

还有其他需要考虑的事情，JSON/XML 序列化程序不会序列化`IsRoot()`，而是`IsRoot`作为属性。一般来说，.NET 中的很多东西都依赖于属性，所以它们通常是更好的选择。

EF 也不喜欢`IsRoot()`，它只是不知道如何将 IsRoot 转换为 SQL，无论是属性还是方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:39:50.907

您是否已经尝试过`IsRoot`使用[[NotMapped]](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.notmappedattribute%28v=vs.110%29.aspx)进行装饰？NotMapped 属性应防止实体框架抱怨它无法持久的属性，并允许您将其表达为属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:29:21.553

通常（如您所说，不考虑 EF 的限制），在这种特定上下文中域模型的方法可能是只读属性。

考虑到该属性只是检查状态，而不是以任何方式修改它。只读属性在对象之外传达它只是返回一条信息。另一方面，一种方法可能具有潜在的破坏性，因为它可能会修改信息。

如果方法当然返回，这将尤其如此`void`，这里不是这种情况，所以这可以被认为是一个边界问题（甚至不是没有“属性”但只使用访问器方法的语言中的问题，这在引擎盖下是“属性”所做的）。

我的投票是检查状态时的属性和命令对象修改状态时的方法。

# python - 一种使用 pywhois 检查域可用性的稳定方法

> ID：11584942
> 
> 赞同：0
> 
> 时间：2012-07-20T18:25:15.283
> 
> 标签：python, pywhois

我使用此代码检查域可用性：

```
try:
    w = pywhois.whois('honarasai.com')
    if not w:
        message='Domain is available'
except:
    message='Domain is taken' 
```

它返回这个结果：

```
creation_date: ['11-jun-2012'] domain_name: ['HONARASAI.COM', 'honarasai.com'] emails: ['domain@netafraz.com', 'domain@netafraz.com', 'domain@netafraz.com', 'domain@netafraz.com'] expiration_date: ['11-jun-2013'] name_servers: ['NS.HONARASAI.COM', 'NS2.HONARASAI.COM'] referral_url: ['http://www.OnlineNIC.com'] registrar: ['ONLINENIC, INC.'] status: ['clientTransferProhibited'] updated_date: ['11-jun-2012'] whois_server: ['whois.onlinenic.com'] 
```

当互联网速度低时，它不能稳定工作并返回错误的结果。检查结果以获得稳定响应的准确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:36:02.920

“网速低”当然意味着您的请求超时。`except`您可以通过在您的行上指定一个异常来捕获它：

`except socket.timeout:`

如果您发现此类异常，您将不得不稍后重试您的请求。

# extjs - ExtJs 4.1 TreeGrid 通过列标题过滤

> ID：11584946
> 
> 赞同：4
> 
> 时间：2012-07-20T18:25:51.180
> 
> 标签：extjs, extjs4, filtering, extjs4.1, treegrid

我一直在四处搜索并查看文档，但我不确定如何通过下拉列激活过滤，就像在普通网格面板中一样。

我试图实现，`ux.Grid.FilterFeatures`但是当我将它应用到树面板时，我的面板无法正确呈现（所有蓝色面板）。我认为这可能与它的延迟布局有关，但是当我执行`treegrid.hide()`/ `treegrid.show()`/`treegrid.doLayout()`时，它并没有什么不同。

有没有人让过滤器功能与树形面板一起使用？或者有没有人对如何纠正这个问题有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T12:07:46.080

我修改了[Ext-Js 站点](http://try.sencha.com/extjs/4.1.1/community/treefilter/viewer.html)中的过滤器示例以在树形网格中使用它。

```
Ext.define('TreeGridFilter', {
    extend: 'Ext.grid.feature.Feature'
    , alias: 'feature.treeGridFilter'
    , collapseOnClear: true                                             // collapse all nodes when clearing/resetting the filter
    , allowParentFolders: false                                         // allow nodes not designated as 'leaf' (and their child items) to  be matched by the filter
    , treeGrid: null
    , filterPropertyNames: new Array()
    , filterPropertyValues: new Array()
    , filterColumnRenderers: new Array()
    , init: function (tree) {
        var me = this;
        treeGrid = me.tree = tree;
        var view = me.view;
        var headerCt = view.headerCt;

        // Listen for header menu being created
        headerCt.on('menucreate', me.onMenuCreate, me);

        tree.filter = Ext.Function.bind(me.filter, me);
        tree.clearFilter = Ext.Function.bind(me.clearFilter, me);
    }

    ,filter: function (value, property, re, columnRenderer) {
        var me = this
            , tree = me.tree
            , matches = []                                              // array of nodes matching the search criteria
            , root = tree.getRootNode()                                 // root node of the tree
            , property = property || 'text'                             // property is optional - will be set to the 'text' propert of the  treeStore record by default
            , visibleNodes = []                                         // array of nodes matching the search criteria + each parent non-leaf  node up to root
            , viewNode;

        me.updateValueForName(property, value, columnRenderer);
        if (me.filterPropertyNames.length == 0) {                       // if the search field is empty
            me.clearFilter();
            return;
        }

        tree.expandAll();                                               // expand all nodes for the the following iterative routines

        //iterate over all nodes in the tree in order to evalute them against the search criteria
        root.cascadeBy(function (node) {
            var numberOfFiltersMatched = 0;
            for (var index=0; index < me.filterPropertyNames.length; index++)
            {
                var propertyName = me.filterPropertyNames[index];
                var propertyValue = me.filterPropertyValues[index]
                var propertyValueOfNode = node.get(propertyName);
                if(me.filterColumnRenderers[index] != false){
                    var renderingFunction = me.filterColumnRenderers[index];
                    propertyValueOfNode = renderingFunction(propertyValueOfNode);           //Using the renderer function of the column
                }
                var regExpn = new RegExp(propertyValue, "ig")                           // the regExp could be modified to allow for case-sensitive, starts  with, etc.
                if(propertyValueOfNode != null && (propertyValueOfNode+'').match(regExpn)) {
                    numberOfFiltersMatched++;
                }
            }
            if(numberOfFiltersMatched == me.filterPropertyNames.length){
                matches.push(node);                                     // add the node to the matches array
            }
        });

        if (me.allowParentFolders === false) {                          // if me.allowParentFolders is false (default) then remove any non-leaf nodes from the regex match
            Ext.each(matches, function (match) {
                if (match == null || !match.isLeaf()) {
                    Ext.Array.remove(matches, match);
                }
            });
        }

        Ext.each(matches, function (item, i, arr) {                     // loop through all matching leaf nodes
            root.cascadeBy(function (node) {                            // find each parent node containing the node from the matches array
                if (node.contains(item) == true) {
                    visibleNodes.push(node);                            // if it's an ancestor of the evaluated node add it to the visibleNodes  array
                }
            });
            if (me.allowParentFolders === true && !item.isLeaf()) {     // if me.allowParentFolders is true and the item is  a non-leaf item
                item.cascadeBy(function (node) {                        // iterate over its children and set them as visible
                    visibleNodes.push(node);
                });
            }
            visibleNodes.push(item);                                    // also add the evaluated node itself to the visibleNodes array
        });

        root.cascadeBy(function (node) {                                // finally loop to hide/show each node
            viewNode = Ext.fly(tree.getView().getNode(node));           // get the dom element assocaited with each node
            if (viewNode) {                                             // the first one is undefined ? escape it with a conditional
                viewNode.setVisibilityMode(Ext.Element.DISPLAY);        // set the visibility mode of the dom node to display (vs offsets)
                viewNode.setVisible(Ext.Array.contains(visibleNodes, node));
            }
        });
    }

    , clearFilter: function () {
        var me = this
            , tree = this.tree
            , root = tree.getRootNode();

        if (me.collapseOnClear) {
            tree.collapseAll();                                         // collapse the tree nodes
        }
        root.cascadeBy(function (node) {                                // final loop to hide/show each node
            viewNode = Ext.fly(tree.getView().getNode(node));           // get the dom element assocaited with each node
            if (viewNode) {                                             // the first one is undefined ? escape it with a conditional and show  all nodes
                viewNode.show();
            }
        });
    },

    onMenuCreate: function(headerCt, menu) {
        var me = this;
        menu.on('beforeshow', me.onMenuBeforeShow, me);
    },

    onMenuBeforeShow: function(menu) {
        var me = this;
        var currentHeaderFilter = menu.activeHeader.filter;
        if(currentHeaderFilter == null){
            if(me.menuItem == null){
                return;
            }
            me.menuItem.hide();
            me.menuSeparator.hide();
        }else if(me.menuItem != null){
            me.menuItem.show();
            me.menuSeparator.show();
        }
        if(me.menuItem){
            var perviousFilterValue = me.getValueForName(menu.activeHeader.dataIndex);
            if(perviousFilterValue == null || perviousFilterValue == ''){
                me.menuItem.setRawValue('');
            }else{
                me.menuItem.setRawValue(perviousFilterValue);
            }
        }else{
            me.menuSeparator = menu.add('-');

            var filterTextFiels = new Ext.form.TextField({
                itemId: 'filterTextBox',
                cls : 'find-icon',
                listeners: {
                    'change': this.onFilterTextChange
                }
            });
            me.menuItem = menu.add(filterTextFiels);
        }
        me.menuItem.activeDataIndex = menu.activeHeader.dataIndex;
        me.menuItem.activeRenderer = menu.activeHeader.renderer;
        me.menuItem.width = (currentHeaderFilter == null || currentHeaderFilter.width == null) ? 150 : currentHeaderFilter.width;
    },

    onFilterTextChange : function (searchMenuItem, value) {
        treeGrid.filter(value,searchMenuItem.activeDataIndex, null, searchMenuItem.activeRenderer);
    },

    updateValueForName : function(property, value, columnRenderer){
        var propertyIndex = -1;
        for (var index=0; index < this.filterPropertyNames.length; index++)
        {
            if(property == this.filterPropertyNames[index]){
                propertyIndex = index;
                break;
            }
        }
        if(propertyIndex >= 0){
            if(value == null || value == ''){
                this.filterPropertyNames.splice(propertyIndex, 1);
                this.filterPropertyValues.splice(propertyIndex, 1);
                this.filterColumnRenderers.splice(propertyIndex, 1);
            }else{
                this.filterPropertyValues[propertyIndex] = value;
            }
        }else{
            propertyIndex = this.filterPropertyNames.length;
            this.filterPropertyNames[propertyIndex] = property;
            this.filterPropertyValues[propertyIndex] = value;
            this.filterColumnRenderers[propertyIndex] = columnRenderer;
        }
    },

    getValueForName : function(property){
        var propertyIndex = -1;
        for (var index=0; index < this.filterPropertyNames.length; index++)
        {
            if(property == this.filterPropertyNames[index]){
                propertyIndex = index;
                break;
            }
        }
        if(propertyIndex >= 0){
            return this.filterPropertyValues[propertyIndex];
        }else{
            return null;
        }
    }
}); 
```

此功能可在网格中用作

```
var treeGridFilter = {
    ftype: "treeGridFilter"
};
var treeGrid= Ext.create('Ext.tree.Panel', {
    id : 'tree-grid-id',
    title: 'View Tree Grid',
    features: [treeGridFilter],
    store: store,
    renderTo: 'grid-div',
    columns: [{
        text: 'Column One',
        dataIndex: 'columnOne',
        filter : {
            width: 150
        }
    },{
        text: 'Column Two',
        dataIndex: 'columnTwo',
        filter : {
            width: 100
        }
    }]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:47:09.393

树店没有过滤功能，但我必须为早期的项目创建一个。 [这是](https://stackoverflow.com/a/9642282/1062992)一个例子。

`Ext.grid.header.Container`因此，作为建议，您可以使用树列中的配置创建自己的过滤器下拉菜单（[如文档中所述](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.tree.Panel-cfg-columns)），这些可以设置为在树库上调用某种过滤器功能，就像我在上面链接到的那样.

# asp.net-mvc - T4MVC 基本控制器没有默认构造函数

> ID：11584949
> 
> 赞同：5
> 
> 时间：2012-07-20T18:26:07.213
> 
> 标签：asp.net-mvc, t4mvc

我的控制器继承自另一个没有默认构造函数的控制器。T4MVC 生成以下构造函数，假设基本控制器具有默认构造函数：

```
protected MyControllerController(Dummy d) { } 
```

我该如何解决这个问题？有趣的是，根据[此](http://t4mvc.codeplex.com/wikipage?title=T4MVC_History)页面，2.4.00 版“修复了基本控制器没有默认 ctor 时的问题”。我也[发现](https://stackoverflow.com/questions/6730989/t4mvc-cannot-inherit-a-controller-class-which-has-no-default-constructor)了这个 SO question，但我的基本控制器不是通用的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-29T03:05:57.130

如果您将基本控制器抽象化，这应该可以正常工作。我假设它永远不需要直接用作控制器？如果是这样，那么您始终可以创建另一个非抽象派生类来处理它。

# java - 错误：文档中根元素之后的标记必须格式正确

> ID：11584950
> 
> 赞同：0
> 
> 时间：2012-07-20T18:26:08.360
> 
> 标签：java, jakarta-ee, tomcat, context.xml, meta-inf

以下是我项目目录中的`context.xml`文件`META-INF`：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context antiJARLocking="true" path="/poll"/>

<Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
 driverClassName="org.apache.derby.jdbc.ClientDriver"
 url="jdbc:derby://localhost:1527/poll database;create=true"
 username="suhail" password="suhail"
 maxActive="20" maxIdle="10" maxWait="-1" /> 
```

但是当我尝试部署/运行项目时，netbeans 会产生以下错误：

```
[Fatal Error] :4:2: The markup in the document following the root element must be 
well-formed.
W:\UnderTest\NetbeansCurrent\poll\nbproject\build-impl.xml:721: Deployment error: 
Tomcat configuration file 
W:\UnderTest\NetbeansCurrent\poll\web\META-INF\context.xml seems to be broken.
Please make sure it is parseable and valid.
See the server log for details. 
```

为什么我会收到此错误？我已经在`context.xml`.

![在此处输入图像描述](../Images/96b8faa92c93f4c99e10a6f392330aff.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:19:15.870

在您的 context.xml 中，取出 Context 标记中 > 之前的 / 并在 Resource 之后添加结束标记。您的资源应该**在**您的上下文中定义。

```
<Context antiJARLocking="true" path="/poll" >

    <Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
     driverClassName="org.apache.derby.jdbc.ClientDriver"
     url="jdbc:derby://localhost:1527/poll database;create=true"
     username="suhail" password="suhail"
     maxActive="20" maxIdle="10" maxWait="-1" />

</Context> 
```

希望这可以帮助！

# javascript - 解除绑定 .create()

> ID：11584951
> 
> 赞同：0
> 
> 时间：2012-07-20T18:26:09.293
> 
> 标签：javascript, backbone.js, parse-platform

> # ！更正
> 
> 绑定不是它。当您添加到您的架构时，您会逐渐创建与缺失值的不一致（在我的情况下为关系）。我的 .create() 调用以模型绑定要求重新启动主视图的方式击中 Parse/Mongo。速记解决方案：不时擦除您的数据:)

...

我的主视图有`_.bindAll(this, 'addOne', 'addAll', 'render', 'logOut', '...');` 在另一个视图中，我正在使用这两个链式方法设置 Parse.Relation：

```
1  // If you hit return in the add friend input field, create new Email model 
2  // and friend it
3  addFriendOnEnter: function(e) {
4    var self = this;
5    console.log("About to create email "+self.emailInput.val());
6    self.emails.create(
7      {
8        email:   self.emailInput.val(),
9        ACL:     new Parse.ACL(Parse.User.current())
10     },
11     {
12       success: function (email) {
13         console.log("Email added "+email.get("email"));
14         self.addFriend(email);
15       }
16     },
17     {
18       silent:true
19     }
20   );
21   console.log("Created email");
22 },
23
24 addFriend: function(email) {
25   console.log("Add friend relation to topic "+email.get("email"));
26   this.friendsRel.add(email);
27   console.log("Save topic");
28   this.options.topic.save({silent:true});
29   console.log("Render friend");
30   this.renderOneFriend(email);
31   console.log("Clear input val");
32   this.emailInput.val('');
33 }, 
```

我看到的最后一个日志是第 21 行，似乎没有调用 addFriend，基本上应用程序会自行刷新，即我被退回到重新呈现自身的主视图。

我怀疑的一个方向是主视图绑定到任何模型更改，包括 .create() 调用。

如何取消绑定该特定呼叫？

谢谢，贡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:34:55.547

1.  我会在你的 create 调用中添加一个错误处理程序，这样你就知道它是否被调用而不是成功。

2.  您是否尝试过在 Chrome 的 JavaScript 调试器中单步执行代码？然后你就会确定调用了哪个函数。

3.  silent:true 应该与成功在同一个选项对象中。

4.  您可以尝试使用“var email = new Email(...)”或其他方式创建对象，然后保存它并在成功处理程序中调用 self.emails.add(email) 进行保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:21:03.500

可能是您忘记`e.preventDefault()`了点击处理程序吗？

# javascript - 是否有任何简单的方法可以从 Rails 中的多个视图打印（字面意思是打印机）内容？

> ID：11584964
> 
> 赞同：1
> 
> 时间：2012-07-20T18:27:12.930
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

例如，我有一个视图，它显示了我为特定集合拥有的所有歌曲的列表。Rails 中是否有任何解决方案，您可以在其中打印集合中包含的每首歌曲的视图？这样我就可以让用户不必访问设置列表中的每一首歌曲页面。提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:36:47.043

这实际上不是特定于 Rails 的问题，您可以使用 javascript 执行此操作。

基本上，您需要做的是使用打印按钮进行 javascript 点击事件，将其他歌曲页面加载到当前页面（使用 AJAX），但将内容隐藏在`screen`CSS 媒体类型上，但不隐藏在`print`媒体类型上.

```
@media print {
  #OtherSongs { display: block }
}
@media screen {
  #OtherSongs { display: none }
} 
```

一切设置正确后，调用`print()`javascript 命令。

使用 AJAX 动态加载其他歌曲内容的替代方法是在页面加载时将其放置在此处（再次隐藏在`screen`媒体类型中）。这可能更容易编码，但可能会使页面初始加载速度变慢。

# .net - 不同风格的子菜单

> ID：11584965
> 
> 赞同：0
> 
> 时间：2012-07-20T18:27:19.433
> 
> 标签：.net, wpf, xaml

我有一个菜单，其中有几个子菜单放在分隔符之间，如下所示：

```
<Menu x:Name="mainMenu">

    <MenuItem x:Name="mainSubMenu" Header="Menus">

        <MenuItem x:Name="topMenuItem" Header="TopSubMenu">
        <MenuItem/>
        <MenuItem/>
        <MenuItem/>
    </MenuItem>

        <Separator/>

    <MenuItem x:Name="middleMenuItem" Header="MiddleSubMenu">
        <MenuItem Header="MI1"/>
        <MenuItem Header="MI2"/>
        <MenuItem Header="MI3"/>
        <MenuItem Header="MI4"/>
    </MenuItem>

    <Separator/>

        <MenuItem x:Name="bottomMenuItem" Header="Bottom" />
    </MenuItem>

</Menu> 
```

我为中间子菜单创建了一个样式，允许滚动不同的菜单项。我希望顶部和底部子菜单具有默认样式。我怎么做？如何为不同的子菜单设置不同的样式？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:34:45.027

考虑使用样式资源，例如：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style x:Key="myStyleKey" TargetType="MenuItem">
            <!-- Your style definition goes here -->
        </Style>
    </Window.Resources>
    <Grid>
        <Menu x:Name="mainMenu">

            <MenuItem x:Name="mainSubMenu" Header="Menus">

                <MenuItem x:Name="topMenuItem" Header="TopSubMenu">
                    <MenuItem/>
                    <MenuItem/>
                    <MenuItem/>
                </MenuItem>

                <Separator/>

                <!-- Set style here -->
                <MenuItem Style="{StaticResource myStyleKey}" x:Name="middleMenuItem" Header="MiddleSubMenu">
                    <MenuItem Header="MI1"/>
                    <MenuItem Header="MI2"/>
                    <MenuItem Header="MI3"/>
                    <MenuItem Header="MI4"/>
                </MenuItem>

                <Separator/>

                <MenuItem x:Name="bottomMenuItem" Header="Bottom" />
            </MenuItem>

        </Menu>
    </Grid>
</Window> 
```

您可以为每个菜单项单独使用此模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:36:05.243

是的，给你的 Styles 一个 Key 并通过该键指定你想要的每个 MenuItem 的样式：

例如

```
 <Style x:Key="MyStyle1" TargetType="{x:Type MenuItem}">
        <blahblahblah/>
     </Style>

     <MenuItem Style="{StaticResource MyStyle1}"> 
```

！

珍妮

# sql - Informix 重音不敏感搜索

> ID：11584972
> 
> 赞同：2
> 
> 时间：2012-07-20T18:27:58.087
> 
> 标签：sql, informix, diacritics

是否有任何方法（函数、配置选项等）强制informix 忽略搜索时的重音符号？

例子：

```
select id, name from user where name like 'conceição%' 
```

回报：

```
1    |    conceicao oliveira
2    |    conceiçao santos
3    |    conceicão andrade
4    |    conceição barros 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:42:13.667

不是直接的，我知道。您可以安装[Regex DataBlade 模块](http://www.ibm.com/developerworks/data/zones/informix/library/techarticle/db_regexp.html)。使用它的[regexp_match](http://www.ibm.com/developerworks/data/zones/informix/library/techarticle/db_regexp.html#regexp_match)函数。用这样的东西替换查询：

```
where regexp_match(name , 'concei[çc][ãa][o]%') 
```

或者，如果您没有该选项，我会添加另一个“normalized_name”列。用“标准”字符替换所有重音字符。然后据此查询我的表。

> name='conceicao santos', normalized_name='conceicao santos'

添加规范化列还将确保您不依赖任何模块或任何特定数据库。

# ios - 游戏开始前的电影介绍

> ID：11584974
> 
> 赞同：0
> 
> 时间：2012-07-20T18:28:06.547
> 
> 标签：ios, cocos2d-iphone, mpmovieplayercontroller

我正在尝试`MPMoviePlayerController`在游戏开始前播放 m4v 文件。游戏是`cocos2d`根据。

我用`MPMoviePlayerController`所需的文件制作了一个并将其作为子类添加到`CCDirector`（它是 的子类`UIViewController`）。我作为孩子添加的原因`MPMoviePlayerController`是我希望游戏继续在后台加载。

我的问题是我无法`MPMoviePlayerController`在视频结束后找到删除它的方法。

请提出建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:39:50.457

对于 cocos2D 游戏 CCVideoPlayer 类是最好且易于播放的视频。[单击此处进行扩展](http://www.cocos2d-iphone.org/archives/1641)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T03:38:02.400

您应该能够收听`MPMoviePlayerPlaybackDidFinishNotification`通知，然后删除子视图。这段代码在我的测试中有效：

```
MPMoviePlayerController *moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
self.player = moviePlayer;

moviePlayer.controlStyle = MPMovieControlStyleNone;
moviePlayer.shouldAutoplay = YES;
[moviePlayer prepareToPlay];

moviePlayer.view.frame = self.view.bounds;
moviePlayer.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[self.view addSubview:moviePlayer.view];

[moviePlayer play];

// wait for the video to finish...
MyViewController __weak *weakSelf = self;
[[NSNotificationCenter defaultCenter] addObserverForName:MPMoviePlayerPlaybackDidFinishNotification object:self.player queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
  [[NSNotificationCenter defaultCenter] removeObserver:weakSelf name:MPMoviePlayerPlaybackDidFinishNotification object:weakSelf.player];

  // remove the view
  [weakSelf.player.view removeFromSuperview];
}]; 
```

如果这不起作用，您可能需要发布您的播放器创建和设置代码，以便我们帮助您弄清楚发生了什么。

# meteor - 流星公用文件夹不起作用

> ID：11584975
> 
> 赞同：24
> 
> 时间：2012-07-20T18:28:07.047
> 
> 标签：meteor

我是 Meteor 的新手，我正在尝试了解如何提供静态内容 - 图像、JS 等。我通过创建正确的文件夹结构（它并没有真正触及）来遵循文档，但是制作对此内容的请求只是故障转移到服务主应用程序页面。

例如 - 将图像放入“app_root”/public/image.png 并向 localhost:3000/image.png 发出请求只会返回主应用程序页面。

任何线索我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-21T04:09:10.723

您描述的设置对我来说听起来是正确的。媒体`public/`服务就像

```
http://localhost:3000/myphoto.jpg 
```

todos 示例提供来自公共目录的图像。只需退出您所在的任何项目并运行：`meteor create --example todos`然后 cd 进入 todos/ 并运行`meteor`。然后打开：

```
http://localhost:3000/destroy.png 
```

您将看到的图像存在于`public/`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-05-07T16:44:36.900

> 流星公用文件夹不起作用

使用`./public`目录来提供静态资产。

给定以下目录结构：

```
- server
- client
- public
  - css
    - bootstrap.css
  - images
  - js 
```

您可以通过从链接文档中删除“公共”来提供静态资产。

`<link href='/css/bootstrap.css'>`

更多信息：[官方 Meteor 文档#FileStructure](https://docs.meteor.com/#/basic/filestructure)

> /public 中的文件按原样提供给客户端。使用它来存储资产，例如图像。例如，如果您有一个位于 /public/background.png 的图像，您可以使用 background-image: url(/background.png) 将其包含在您的 HTML 或 CSS 中。请注意，/public 不是图像 URL 的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T18:26:05.530

当我将项目文件移动到文件夹中而忘记移动目录 .meteor 时，也会发生同样的事情。

# c# - C# If 语句，其中日期是本月

> ID：11584978
> 
> 赞同：2
> 
> 时间：2012-07-20T18:28:24.483
> 
> 标签：c#, date, if-statement, filehelpers

```
string month = DateTime.Now.Month.ToString();
string CommandText = "SELECT slocref.slocname, partstuff.quantity, partstuff.currency, partstuff.postingdate" + " FROM partstuff INNER JOIN slocref ON partstuff.sloc = slocref.slocvalue"; 
```

这是获取日期和月份的代码。

```
if (Regex.IsMatch(rdr["postingdate"].ToString(), "0" + month + "*"))
{
    if (rdr["slocname"].ToString() == "Answer/Slatwall")
    {
        string quantity = rdr["quantity"].ToString();
        string currency = rdr["currency"].ToString();
        answertotalmonth += float.Parse(currency);
        label100.Text = "$" + answertotalmonth.ToString("#,##0.00");
    }
} 
```

这只是 if 语句运行的代码示例。

但是 if 语句需要获取所有 7 月的信息并将其相加。所以从 2012 年 7 月 1 日到 2012 年 7 月 31 日。我无法更改 SQL，因为它弄乱了程序的其余部分。我试图获取当前日期，在它前面添加 0，然后使用通配符。

在这个 if 语句上需要一点指导。

让我澄清一下这篇文章。“postingdate”值来自 FileHelpers。将固定宽度的文本文件导入这些值。发布日期值看起来像“07/16/12”

因此，我想获取当前月份，然后如果发布日期值具有该月份的值，则运行 if 语句代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:35:43.577

你为什么要这样做？

```
 if (Regex.IsMatch(rdr["postingdate"].ToString(), "0" + month + "*")) 
```

如果 rdr["postingdate"] 应该是日期，请将其转换为日期时间并进行合理的比较。

```
if(DateTime.TryParse(rdr["postingdate"].ToString(), rdrDateTime))
{
    // proceed as planned
    if (rdrDate.Month == DateTime.Now.Month) 
    {
       // and so on.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:31:58.387

不确定我是否正确理解了您的问题，但您为什么不匹配 DataTime 的月份属性：

```
if( date.Month == month)
{
   //your code...
} 
```

同样如上所述，您可以将文本解析为日期。但是，如果您只对可能没有必要的月份感兴趣。

**编辑：**如评论中所述，您还必须检查年份。因此，最好将其解析为完整的 DateTime 对象。

# magento - Magento - 将默认过滤器添加到产品集合

> ID：11584979
> 
> 赞同：2
> 
> 时间：2012-07-20T18:28:27.513
> 
> 标签：magento, filter, php

与看到此站点并想要类似内容的客户合作。

[http://www.boylstontradingco.com/shop/sale](http://www.boylstontradingco.com/shop/sale)

正如您所看到的，当您浏览到“销售”类别时，默认情况下会在左侧的分层导航中激活“销售”过滤器。我知道分层导航的一部分从名为 getActiveFilters() 的函数中提取信息。有没有办法在代码中或通过管理员默认添加活动过滤器？任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:46:49.737

很容易：

```
$model = Mage::getModel('catalog/layer_filter_category');
$item = Mage::getModel('catalog/layer_filter_item');
$model->getLayer()->getState()->addFilter(
  $item->setFilter($model)
       ->setLabel('Sale')
); 
```

# c - 删除字符串 C 中的非法字符

> ID：11584983
> 
> 赞同：3
> 
> 时间：2012-07-20T18:28:52.240
> 
> 标签：c, string, format

大家好，我在用 C 格式化字符串时遇到了一个小问题。

`char buffer[1000];`

我的缓冲区的读数为`"♀ ‼☻☺ ☻ ]\[MY-TEXT"`// 缩短

如您所见，它包含非法字符，因此我无法`sscanf`在其上使用。我需要删除所有非法字符并保留所有数字、字母和`-`符号。

这可能吗？

这是我的新代码

```
#include <stdio.h> 
#include <string.h> 
#include <windows.h> 

int main () 
{ 

    char buffer[1000]="♀ ‼☻☺ ☻ ]\[MY-TEXT";

char buffer2[1000]; 
char *in; 
char *out = buffer2; 

for (in=buffer; *in; in++) 
   if (isalnum((unsigned char)*in) || *in == '-') 
       *out++ = *in; 

printf("Output",buffer2);

 system("pause");
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:33:42.113

将数据从现有字符串复制到新字符串通常最简单，只需保留您想要的字符串即可：

```
char buffer2[1000];
char *in;
char *out = buffer2;

for (in=buffer; *in; in++)
   if (isalnum((unsigned char)*in) || *in == '-')
       *out++ = *in; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:33:28.680

循环遍历数组，并仅将您接受的那些字符复制到另一个数组中，使用[`isalnum`](http://en.cppreference.com/w/c/string/byte/isalnum)并测试`-`：

```
char tmpBuffer[1000];
for (i = 0, j = 0; i < 1000; i++)
{
    if (isalnum(buffer[i]) || (buffer[i] == '-'))
           tmpBuffer[j++] = buffer[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:47:35.017

修改函数`is_valid()`，使其为您想要的字符返回一个真值（非零），并为您不想要的字符返回一个假值（零）。我让它检查字符是空格还是可打印的 ASCII。

```
#include <stdio.h>

int
is_valid(char ch)
{
    if (' ' <= ch && ch <= '~')
        return 1;
    else
        return 0;
}

void
copy_only_valid(char *out, unsigned int max_out, char const *in)
{
    if (!out || !max_out || !in)
        return;

    for (;;)
    {
        if (*in == '\0' || max_out == 1)
        {
            // When we reach the terminating NUL byte in the input string,
            // or there is only one char left in out buffer, put a NUL byte
            // and return.
            *out = '\0';
            return;
        }
        if (is_valid(*in))
        {
            *out++ = *in++;
            --max_out;
        }
        else
            ++in;
    }
}

int
main()
{
    char const *bad = "\b\nfoo\003\005bar\f\tbaz";
    char buf[128];

    copy_only_valid(buf, sizeof(buf), bad);
    puts(buf);
} 
```

# vb.net - Visual Basic 2010 Html 表单

> ID：11584986
> 
> 赞同：0
> 
> 时间：2012-07-20T18:28:57.107
> 
> 标签：vb.net, visual-studio-2010, vb.net-2010

我目前已经习惯了 Visual Basic，并且正在尝试构建一个应用程序，我们的操作员可以将快速搜索提交到我们的系统之一。- 我四处寻找这个，我找不到很多信息

以下是我们希望以某种方式实现的目标的快速概述

```
1\. VB 2010 App (2 x Text Boxes + Button) 
2\. PHP Script (If query = bob & jones <<=
3\. Curl PHP Request to another PHP Form
4\. Returns to Original PHP Script <<= 
5\. Somehow returns information back to .net application that is waiting 
```

我是一名 PHP 程序员，而不是一名 .net 开发人员，因此 curl 和 php 脚本大多是完整的，它只是 .net 编码

为了让我们开始，我们使用了以下代码：

```
 Dim webStream As Stream

    Dim webResponse = ""

    Dim req As HttpWebRequest

    Dim res As HttpWebResponse

    ' API Address ''

    req = WebRequest.Create("xxxxxxxxx")

    req.Method = "GET" ' Method of sending HTTP Request(GET/POST)

    res = req.GetResponse() ' Send Request

    webStream = res.GetResponseStream() ' Get Response

    Dim webStreamReader As New StreamReader(webStream)

    ' READ Response in one Variable

    While webStreamReader.Peek >= 0

        webResponse = webStreamReader.ReadToEnd()

    End While
    MsgBox(webResponse) 
```

它在一个标准下运行良好，因为它以消息框的形式将信息带回给我们，尽管我们希望它填充几个文本框（甚至不确定这是否可能）

但主要问题是它正在检索网站的源代码，而不仅仅是网站文本方面的信息

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T20:19:18.570

您似乎已经完成了这一部分。你有标记，只要深入研究它。

这是上面编写代码的另一种方法。

```
Dim MyURL as string = "xxxxxxx"
Dim MyRequest As WebRequest = WebRequest.create(MyURL)
MyRequest.Headers.Add("myCustom","true") 'PHP Web Server @ xxxxxxx will see this as $_SERVER['http_myCustom'] - true
MyRequest.ContentType = "text/html"
MyRequest.Method = "GET"

Dim MyResponse As HttpWebResponse = CType(request.GetResponse(), HttpWebResponse)

If MyResponse.StatusCode = HttpStatusCode.OK Then
    Dim SR As New StreamReader(MyRequest.GetResponseStream())
    MyRequest.Close()
    Dim webResponse As String = SR.ReadToEnd()
    SR.Close()

    'At this point, the source of the page is in webResponse

Else
    MyRequest.Close()
    'Error in connection to remote/host server
End If 
```

我将标头添加到请求中，以表明您可以简单地检查外部站点上是否存在此标头和/或引荐来源网址，以不同方式处理该站点的响应。也就是说，如果您不想要解析 webRequest 中的整个源，而不是考虑不从外部站点发送整个文档。

因为，我假设您只是对获取由外部服务器解析为 text/html 的搜索结果感兴趣。

# php - 重定向如果用户类型 = 版主到 PHP 页面.... 会话和登录

> ID：11584989
> 
> 赞同：1
> 
> 时间：2012-07-20T18:29:18.263
> 
> 标签：php, mysql, sql

我在这里做错了什么？

如果用户类型 = 版主，我计划将登录重定向到名为 Administration.php 的页面。

所以我创建了一个名为 users 的表，其中包含值.... 列：

1.  登录

2.  密码

3.  用户类型

    ```
     <?php
                    error_reporting(E_ALL & ~E_NOTICE);
                    ?>

                    <?php
                    session_start(); 
                    if( $_SESSION["logging"]&& $_SESSION["logged"])
                    {
                     printme(); }

                    else {
                     if(!$_SESSION["logging"])
                        {  
                             $_SESSION["logging"]=true;
                             loginform();
                         }
                     else if($_SESSION["logging"])
                         {
                            $number_of_rows=checkpass();
                            if($number_of_rows==1)
                         {  
                            $_SESSION[user]=$_GET[userlogin];
                            $_SESSION[logged]=true;

                            print"<h1>You have logged in successfully</h1><br/>";
                            print "<a href='logout.php'>Logout</a> | <a href='users.php'>Click to proceed</a>"; 
                         }
                            else {

                        print"<br/><br/>";
                        loginform();
                        }
                    }
                 }

                function loginform()
                {

                print ("<center><div id='login_header'><b><font face='Arial Black' color='black' size='4px'>Sign in to Minquep!</font></b></div></cen                   ter>");
                print("<br/><br/>");
                print ("<center><label>Username:</label><input type='text' name='userlogin' size='20'><br/><label>Password:</label><input type='                password' name='password' size='20'></center>");
                print "<br/><input type='submit' value='Submit' name='submit' class='submit'>"; 

                }

                function checkpass()
                {

                $dbHost = 'localhost';
                $dbUser = 'root';
                $dbPass = '';
                $dbname = 'minquep_test';

                $conn = mysql_connect($dbHost,$dbUser,$dbPass); // Connection Code
                mysql_select_db($dbname,$conn); // Connects to database

                $sql="select * from users where login='$_GET[userlogin]' and password='$_GET[password]'";
                $result=mysql_query($sql,$conn) or die(mysql_error());
                return  mysql_num_rows($result);

                if ($result->user_type == "moderator"){
                    echo "<meta http-equiv=\"refresh\" content=\"0;URL=pages/administration.php\">";
                }

                }

                function content(){
                print("<b><h1>hi mr.$_SESSION[user]</h1>");
                print "<br><h2>only a logged in user can see this</h2>";

                }

                function printme(){

                }

                ?>

            </form> 
    ```

从上面的代码^

我试图做这个场景，但它不起作用..

**if ($result->user_type == "主持人"){ echo "";**

注意：user_type 是名为 users 的表中的一列，我有一条记录，它是 ff：

ID = 1

登录 = 管理员

密码=石狮

user_type = 版主

之类的。。

每当用户登录并且他是版主时，我该怎么做...他会自动重定向到 Administration.php 页面。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:30:29.757

在进入主持人行之前，您过早地返回了结果集的行数。

试试这个：

```
 $user_login = mysql_real_escape_string($_GET['userlogin']);
        $password = mysql_real_escape_string($_GET['password']);
        $sql = "select * from users where login='$user_login' and password='$password'";
        $result = mysql_query($sql,$conn) or die(mysql_error());
        $fetched = mysql_fetch_array($result);

        if ($fetched['user_type'] == "moderator"){
            echo "<meta http-equiv=\"refresh\" content=\"0;URL=pages/administration.php\">";
        } 
```

# wpf - 如何将 ContentPresenter 放入工具栏中

> ID：11584992
> 
> 赞同：2
> 
> 时间：2012-07-20T18:29:33.250
> 
> 标签：wpf, xaml, toolbar, contentpresenter

我正在努力将 ContentPresenter 放入工具栏中。我有一个带有视图模型 DashboardViewModel 的用户控件 DashboardView。我的 ContentPresenter 设置如下：

在 UserControl.Resources 中，我有：

```
<DataTemplate DataType="{x:Type DashboardVM:DashboardViewModel}">
     <Dashboard:DashboardView />
</DataTemplate> 
```

并在工具栏中：

```
<ToolBarTray Margin="0" DockPanel.Dock="Top">
    <ToolBar Band="0" BanIndex="0">
        <--! other stuff -->
    <ToolBar Band="0" BandIndex="1" MinWidth="500" ToolBarTray.IsLocked="True">
          <ContentPresenter Content="{Binding Path=DashboardViewModel}" />
    </ToolBar>
</ToolBarTray> 
```

执行时不会出现 ContentPresenter。另一个 ToolBar 可以。

我已将 ContentPresenter 放在工具栏之外的 Grid 中，它看起来很好。所以它与工具栏有关，但我不知道是什么。

更新：我还尝试（在很多事情中）将 ContentPresenter 放在 MenuItem 中，如下所示：

```
 <ToolBar Band="0" BandIndex="1">
                <MenuItem>
                    <MenuItem.Header>
                        <ContentPresenter Content="{Binding Path=DashboardViewModel}"/>
                    </MenuItem.Header>
                </MenuItem>
            </ToolBar> 
```

还是没有出现。

更多信息：

仪表板视图：

```
<UserControl x:Class="Wsi.Common.View.Dashboard.DashboardView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:Dashboard="clr-namespace:Wsi.Common.ViewModel.Dashboard"
         xmlns:view="clr-namespace:Wsi.Common.View.Dashboard"
         MinWidth="500"
         MinHeight="30"
         MaxHeight="70">

<UserControl.Resources>
    <DataTemplate DataType="{x:Type Dashboard:DashboardItemViewModel}">
        <view:DashboardItemView />
    </DataTemplate>
</UserControl.Resources>

<StackPanel MaxHeight="70" Orientation="Horizontal">
    <ContentPresenter x:Name="fileSystemDashboardItem" Content="{Binding Path=FileSystemDashboardItemViewModel}" />
    <ContentPresenter x:Name="spreadHealthDashboardItem" Content="{Binding Path=SpreadHealthDashboardItemViewModel}" />
    <ContentPresenter x:Name="spreadStatsDashboardItem" Content="{Binding Path=SpreadStatsDashboardItemViewModel}" />
    <ContentPresenter x:Name="acquisitionStatsDashboardItem" Content="{Binding Path=AcquisitionStatsDashboardItemViewModel}" />
    <ContentPresenter x:Name="backhaulHealthDashboardItem" Content="{Binding Path=BackhaulHealthDashboardItemViewModel}" />
    <ContentPresenter x:Name="serverHealthDashboardItem" Content="{Binding Path=ServerHealthDashboardItemViewModel}" />
</StackPanel> 
```

DashboardViewModel 只是为子视图模型保存上述属性，只需 {get; 放;}

如前所述，这在工具栏托盘上方的视图中连续工作得很好。

蒂亚！

珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:33:49.630

我认为您可能会将 a`ContentPresenter`与 a混淆`ContentControl`。

A`ContentPresenter`用于指示自定义内容应出现在 ContentControl 的 ControlTemplate 中的可视层次结构中的哪个位置。

A`ContentControl`是您可以放入 UI 中的实际控件。

如果你这样做会发生什么？

```
<DataTemplate DataType="{x:Type DashboardVM:DashboardViewModel}">
     <Dashboard:DashboardView />
</DataTemplate>

<ToolBarTray Margin="0" DockPanel.Dock="Top">
    <ToolBar Band="0" BanIndex="0">
        <--! other stuff -->
    <ToolBar Band="0" BandIndex="1" MinWidth="500" ToolBarTray.IsLocked="True">
          <ContentControl Content="{Binding Path=DashboardViewModel}" />
    </ToolBar>
</ToolBarTray> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T04:05:17.220

回答我自己的问题......我的代码没有任何问题。ContentPresenter 的内容中的项目超出了工具栏的宽度。由于内容太宽，工具栏没有显示任何内容。

一整天都在追逐一个只需要我让我的狗更小、更聪明地调整大小的错误。

# c++ - Dynamic ArrayList 的线性和二进制搜索

> ID：11584993
> 
> 赞同：1
> 
> 时间：2012-07-20T18:29:36.420
> 
> 标签：c++, arrays, search

嘿，我正在做一个动态数组列表，我想知道如何对数组列表进行线性和二进制搜索，以及这些搜索的优缺点是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:02:14.127

猜测您正在将这些实现为扩展数组，因为当您用完空间时，您会重新分配新数组，然后将元素复制过来。

在这种情况下，您的问题归结为如何在该数组上实现线性和二进制搜索？

在这种情况下，网上有很多文章、样本。

线性搜索的优势在于，对于小型数组，速度没有差异，只要您要查找的项目在数组中，它就会始终在未排序的数组上工作。

这与二分查找相反，二分查找对于大型数组非常快，但对于小型数组，与线性查找相比并没有真正的性能优势。这种加速的代价是必须对其进行排序才能获得这种优势。

# java - 降低 Java 程序中的 CPU 使用率

> ID：11584994
> 
> 赞同：0
> 
> 时间：2012-07-20T18:29:40.537
> 
> 标签：java, processor, utilization

我编写了一个非常简单的 Java 2D 游戏，只有两个线程——音乐播放器和游戏。我注意到当我开始游戏时，我的 CPU 使用率从 20% 上升到 70%。我想要在游戏中进行的很多处理甚至还没有实现！

1.  这是一个问题吗？- 一个简单的游戏不应该占用这么多CPU吗？

2.  如果这是一个问题；什么是通用编码实践或设计模式来避免利用率的巨大飞跃（除了没有多线程）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:54:02.287

> 这是一个问题吗？- 一个简单的游戏不应该占用这么多CPU吗？

什么都不做可能会占用你的整个 CPU，例如这段代码

```
 public static void main( String[] args ) {
    while( true ){

    }
  } 
```

在我的电脑上显示 100% 的 CPU 使用率。因此，尽管您的“简单”游戏可能不会做很多事情，但如果实施不当，它肯定会使用大量的 CPU 资源。

使用分析工具（如 JProfiler）可以真正帮助您确定所有 CPU 的去向。不确定是否也有免费的分析器可用。[但是JConsole](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)和[VisualVM](http://visualvm.java.net/)等免费工具（通常都包含在 JDK 中）也可以用于快速查看哪些`Thread`s 处于活动状态并占用大部分 CPU

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:25:24.463

> 如果这是一个问题；什么是通用的编码实践或设计模式来避免利用率的巨大飞跃（除了没有多线程）？

大多数游戏引擎都有一个每秒调用 60 次的游戏逻辑更新函数，以及一个在计算机有资源时调用的绘图函数（但不超过逻辑更新）。

此处的一般编码实践是，您不想更新游戏超出您的需要。试着在你的主循环中放置一个计数器，看看它在 10 秒内被调用了多少次？如果您每秒运行超过 60 次更新，则不需要这种 CPU 负担！

看起来您没有使用可以提供此功能的游戏引擎，因此您可以拼凑出一个解决方案：让您的主`while`循环找到当前时间（Java`DateTime`为您提供毫秒精度，这已经足够好了），然后将其与最后一个循环的更新时间。如果没有足够的时间过去，`Thread.sleep()`请在游戏等待运行下一次迭代时减轻 CPU 的负担！

最后一条评论：

> （除了没有多线程）

虽然让 CPU 切换线程会导致一些开销，但我不认为使用许多编写良好的线程应该会使 CPU 更努力地工作（我假设工作的总和与更少的线程相同）。事实上，如果你的机器是多核的，如果有一部分需要 CPU，它会让你的游戏运行得更快（假设你的线程是并发的，而不是相互阻塞）！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:53:10.387

查找 CPU 和内存利用率的最佳方法是使用分析器，例如 jconsole 或 jvisualvm 。

你可以在你的jdk中找到相同的

> C:~/jdk/bin/jconsole 或 C:~/jdk/bin/jvisualvm

当 CPU 峰值变高时，它会占用相应的堆栈帧。您将能够看到当前正在执行的行，其中更多的 CPU 被利用。

确保您分析您的应用程序并对线程数进行基准测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T18:32:27.023

这里的答案是测量您的程序并查看 CPU 的使用情况是否符合您的预期。当你测量它时，你可能会发现一些令人惊讶的东西。市场上有许多优秀的 Java 分析器可以做到这一点。我使用我非常满意的 JProfiler。穷人的做法是使用 pstack 获取 Java 线程转储。进行几次转储，看看它在做什么。或者只是在 IDE 中调试它并在各个点中断它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T18:32:25.530

我会对您的应用程序进行 CPU 和内存分析，以查看它正在做什么来提高效率。

# javascript - 将谷歌地图 lat 和 lng 存储到 mysql

> ID：11584995
> 
> 赞同：-1
> 
> 时间：2012-07-20T18:29:58.167
> 
> 标签：javascript, mysql

我有以下 javascript。

```
 <script src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
<script src=geo.js></script>
<script>
      function onPositionUpdate(position)
        {
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            document.write("Current position: " + lat + " " + lng);

        }

          </script> 
```

我想将结果上传到我的数据库。
列布局

身份证 | 纬度 | 液化天然气 | 网址

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:33:14.293

您将需要使用服务器端语言（例如 PHP ）并使用 ajax 请求发送此数据

# php - php认证/数据库代码风格

> ID：11584996
> 
> 赞同：3
> 
> 时间：2012-07-20T18:30:06.157
> 
> 标签：php, mysql, security, authentication, mongodb

我想知道在较低级别代码中嵌入诸如散列和加密之类的东西的常见做法。似乎最好使用某种对象或宏约定，以便在发现漏洞并提高效率时可以轻松评估和更新安全功能。例如，我在处理身份验证的 PHP 代码中看到了以下约定（博客、代码峡谷、框架 wiki 等）……这是一个虚构的例子来说明这一点。

```
if ($myhash !== md5(shaX($this->key) . blah($this->salt) . blah($this->var)) 
```

而不是把它埋得很深，这不是更好吗？

```
if ($myhash != MY_HASH($key)) 
```

在配置文件或其他易于访问的对象中使用 MY_HASH，从而在可用时更容易更新/维护并具有更好的安全性？为什么不将任何加密或散列的金块放入仅包含转换函数的配置文件或特殊散列文件中？

另外 - 考虑数据库访问。PHP 有很多抽象，但我看到应用程序这样做：

```
// grab some data from the database
if ($this->mongo_flag)
{
    $this->mongo_abstraction
    ->where($blah1, $x)
     ->update($blah2);
}
elseif ($this->mysql_flag)
{
    $this->mysql_abstraction
    ->where($blah1, $y)
     ->update($blah2);
}
elseif ($this->couch_flag)
{
    $this->couch_abstraction
    ->where($blah1, $z)
     ->update($blah2);
} 
```

也许只有 x,y,z 不同。

不能实例化一个预先具有适当 db 方法的对象，从而消除 if/else 逻辑，该逻辑在进行数据库访问的任何地方都重复出现？

IE

```
$mydata = $this->db_get_method($blah1, $blah2); 
```

或者

```
$mydata = $DB_GET_METHOD($db_type, $blah1, $blah2); 
```

当首选 if/else 歧视时，您似乎应该跳过抽象的东西，而只使用本机 API，使其更高效、更易于维护，因为本机 api 可能不会改变，并且抽象大多无效/voided 通过调用每个可能的数据库类型。或不？

My main experience is with real-time embedded C programming (a lot of PHP code looks like procedural C designed with global structs) so I'm wondering whether performance might be the definitive answer, i.e. it just runs faster this way? Do objects introduce too much latency/complexity?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:45:04.517

我喜欢你的建议。特别是对于散列，我认为将其包装到一个易于访问的位置是明智的。我也喜欢你关于调用 db 方法的建议。但是，使用 PHP 执行您的建议需要反射，并且存在性能问题，请查看这篇文章[PHP 5 Reflection API performance](https://stackoverflow.com/questions/294582/php-5-reflection-api-performance)。性能冲击似乎并不算太​​糟糕，但性能仍有下降。我认为实现 db 方法调用的更好方法是使用 OOP 继承而不是传递动态方法。每个数据库应该有一个不同的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:01:46.673

正如@complex857 在他的评论中所说，PHP 有一些努力来简化散列过程。无论如何，您可以自己完成它们（简单的函数，或更复杂的类）。

也许我没有理解你的权利，但是关于 DB 抽象，使用 PHP PDO（以及 PEAR 的 DB 和 MDB2）你可以为特定的 DB 引擎构建一个对象，然后，方法大致相同（出现差异仅在处理任何引擎的特定功能时）。

还有一个关于 PHP 的大问题：有时您会偶然发现编写得非常糟糕的脚本，可能是由业余程序员编写的。因此，如果您多次看到相同的不良做法，这并不意味着使用 PHP 没有更好的方法。还要考虑这些脚本的历史：PHP 在其生命周期中已经发展了很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T14:37:06.123

身份验证和数据库抽象都是常见的痛点。程序员的狂妄自大或缺乏经验确实会导致大量糟糕的再发明（以及偶尔有用的创新）。

就数据库抽象而言，当后端实现显着不同时，您的示例很快就会崩溃。例如，Couch 或 MongoDB 等 NoSQL 数据库的查询语言和数据建模与 SQL 数据库使用的传统关系查询不能很好地匹配。你最终会得到一个[泄漏的抽象](http://en.wikipedia.org/wiki/Leaky_abstraction)，你要么使用一个“通用”接口，其中有*很多*关于给定后端的工作原理的警告......要么是一个严格限制的最低公分母。[这是ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)的一个常见问题。它们经常难以表示不太适合预期的 ObjectClass <=> DatabaseTable 映射的连接或子选择。

即使在“类似”产品（例如支持[SQL](http://en.wikipedia.org/wiki/SQL)等通用关系语言的数据库）中也是如此。每个数据库通常都有自己的 SQL 方言，这些方言通常从支持的数据类型开始，并且随着实现扩展到触发器、存储过程和视图等更高级的特性而变化更大。

从您的其他示例的外观来看，您还遇到了一些[意大利面条式代码](http://en.wikipedia.org/wiki/Spaghetti_code)，其中开发人员可能在实现自己的抽象方面做得很差。

如果性能是一个问题，最好的结果可能是针对特定的数据库后端进行优化并利用独特的功能。

如果支持多种数据库后端更为优先，则有标准的关系接口，例如[PDO](http://php.net/manual/en/book.pdo.php)、[Doctrine](http://www.doctrine-project.org/)或[MDB](http://pear.php.net/package/MDB2)。一种新兴的数据库抽象类别是用于 MongoDB 和 Couch 等 NoSQL 数据库的 ODM（对象文档映射器）。