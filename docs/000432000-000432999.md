# StackOverflow 问答 000432000-000432999

# http - 我应该如何将字典编码为 HTTP GET 查询字符串？

> ID：432002
> 
> 赞同：9
> 
> 时间：2009-01-11T00:06:26.283
> 
> 标签：http, query-string

HTTP GET 查询字符串是键/值对的有序序列：

```
?spam=eggs&spam=ham&foo=bar 
```

是，具有一定的语义，相当于下面的字典：

```
{'spam': ['eggs', 'ham'], 'foo': bar} 
```

这恰好适用于被请求的页面的布尔属性：

```
?expand=1&expand=2&highlight=7&highlight=9
{'expand': [1, 2], 'highlight': [7, 9]} 
```

如果您想停止扩展 id 为 2 的元素，只需将其从`expand`值中弹出并再次对查询字符串进行 urlencode。但是，如果您有一个更模态的属性（有 3 种以上的选择），您真的想表示这样的结构：

```
{'highlight_mode': {7: 'blue', 9: 'yellow'}} 
```

其中对应 id 键的值是已知枚举的一部分。将其编码为查询字符串的最佳方法是什么？我正在考虑使用这样的二元组序列：

```
?highlight_mode=(7,blue)&highlight_mode=(9,yellow) 
```

**编辑：**知道与约定相关的任何*名称也很好。*我知道可能没有，但是很高兴能够使用名称而不是示例来谈论特定的事情。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-11T00:15:43.143

通常的方法是这样做：

```
highlight_mode[7]=blue&highlight_mode[9]=yellow 
```

AFAIR，相当多的服务器端语言实际上支持开箱即用，并将为这些值生成一个很好的字典。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-11T00:19:05.413

我还看到人们对嵌套字典进行 JSON 编码，然后使用 BASE64（或类似的东西）对其进行进一步编码，然后将整个结果混乱作为单个查询字符串参数传递。

真是丑。

另一方面，如果您可以不使用 POST，那么 JSON 是一种来回传递此类信息的非常好的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-11T01:51:15.230

在许多 Web 框架中，它的编码方式与您所说的不同。

```
{'foo'：[1]，'bar'：[2, 3]，'fred'：4}
```

将会：

```
?foo[]=1&bar[]=2&bar[]=3&fred=4
```

数组答案应该与普通答案不同的原因是，解码层可以自动区分不太常见的 foo 情况（恰好有一个元素的数组）和极其常见的 fred 情况（单个元素）。

这个符号可以外推到：

```
?highlight_mode[7]=蓝色&highlight_mode[9]=黄色
```

当你有一个哈希，而不仅仅是一个数组。

我认为这几乎是 Rails 和大多数从 Rails 复制的框架所做的。

空数组、空哈希和缺少标量值在此编码中看起来相同，但您无能为力。

这个 [] 似乎只引起了一些火焰战。有些人认为它是不必要的，因为浏览器、传输层和查询字符串编码器并不关心。唯一关心的是自动查询字符串解码器。我支持 Rails 使用 [] 的方式。另一种方法是使用单独的方法来提取标量并从查询字符串中提取数组，因为没有自动方法来判断程序何时需要 [1] 何时需要 4。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-04T07:43:18.913

这段代码适用于我的 Python 后端-

```
import json, base64 
```

```
param={
        "key1":"val1",
        "key2":[
                {"lk1":"https://www.foore.in", "lk2":"https://www.foore.in/?q=1"},
                {"lk1":"https://www.foore.in", "lk2":"https://www.foore.in/?q=1"}
                ]
        } 
```

```
encoded_param=base64.urlsafe_b64encode(json.dumps(param).encode())
encoded_param_ready=str(encoded_param)[2:-1]

#eyJrZXkxIjogInZhbDEiLCAia2V5MiI6IFt7ImxrMSI6ICJodHRwczovL3d3dy5mb29yZS5pbiIsICJsazIiOiAiaHR0cHM6Ly93d3cuZm9vcmUuaW4vP3E9MSJ9LCB7ImxrMSI6ICJodHRwczovL3d3dy5mb29yZS5pbiIsICJsazIiOiAiaHR0cHM6Ly93d3cuZm9vcmUuaW4vP3E9MSJ9XX0= 
```

```
#In JS
var decoded_params = atob(decodeURI(encoded_param_ready)); 
```

# java - 有没有办法在Java中将数字作为参数传递？

> ID：432006
> 
> 赞同：2
> 
> 时间：2009-01-11T00:07:31.537
> 
> 标签：java, generics

我在一个类中分配一个 T 数组，T 扩展 Number。我可以这样做：

```
myClass test = new myClass(Double.class, 20); 
```

然后是构造函数本身：

```
myClass(Class<T> type, size)
{
    array = (T[]) Array.newInstance(type, size);
} 
```

我想知道是否可以这样做：

```
myClass(Number n, size)
{
    array = (T[]) Array.newInstance(n.getClass(), size);
} 
```

但是，我尝试使用第二个构造函数来实例化一个对象：

```
myClass test = new myClass(Double, 15); 
```

它不起作用。我做错了什么，还是不可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T00:12:01.887

在 Java 中不能使用类名作为输入参数。`Object.class`引入了允许传递“类名”

所以答案是否定的，你不能`Number`作为参数传递，但你可以传递`Number.class`. 这就是它的用途:)

** 更新 **

也来自你的第二个构造函数定义

```
myClass(Number n, int size)
{
    array = (T[]) Array.newInstance(n.getClass(), size);
} 
```

很明显，输入参数是 Number 的实例或其子类，而不是类本身。我知道这很明显，但它更清楚地说明了为什么不可能做你想做的事

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T00:09:30.067

你应该使用：

```
myClass test = new myClass( Double.class, 15 ); 
```

你错过了这个`.class`部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T00:11:35.477

你也应该有

```
myClass(Class<T> type, int size) 
```

# google-apps - 什么是 Google Apps？

> ID：432020
> 
> 赞同：2
> 
> 时间：2009-01-11T00:15:30.163
> 
> 标签：google-apps

什么是谷歌应用程序，为什么有这么多初创公司使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-11T00:18:42.110

[Google Apps](http://www.google.com/apps/intl/en/business/index.html)是作为服务交付的商业软件组件的集合，使您不必安装 Exchange、Office 和通常的商业工具。此外，Google Apps 允许人们编写自己的应用程序并将其安装在 Google 的服务器上。如今，许多公司使用 Google Apps 来处理电子邮件和日历，而不是 Exchange。它节省了成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T00:19:31.793

Google 应用程序的一项有用功能是它允许您使用 gmail 界面在您自己的域的 Google 服务器上托管电子邮件。因此，您可以使用@example.com 地址发送/接收电子邮件（如果您的初创公司名为 example.com）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-22T14:22:37.813

与许多应用不同，Google Business Apps 非常直观。日历、电子邮件、文件共享、联系人等易于使用，几乎可以在任何连接互联网的设备上运行。

谷歌应用程序的基本好处是 - 1\. 成本效益高 - 每月只需 5 美元，您将收到带有您公司名称的团队电子邮件地址、可用于文件存储和共享的 30 GB 存储空间、在线日历以及能够轻松创建在线电子表格、幻灯片、文本文档等。所有这些强大的功能，包括您可以信任的名称的管理控制和安全性。如果您预付一年，您实际上将节省 10 美元。

2.  安全性 - 该公司通过了 FISMA 中等级别认证——这与美国政府内部电子邮件使用的认证级别相同。Google 还能够支持 HIPAA 合规性。Google 受到数百万人的信任，可以通过在下载文档之前定期检查电子邮件以确保他们的电子邮件免受任何威胁，以防病毒、网络钓鱼电子邮件、恶意软件等威胁。

3.  用户友好和直观的界面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T00:20:06.957

确定你的意思是谷歌应用程序而不是应用程序引擎？

[http://code.google.com/appengine/](http://code.google.com/appengine/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-08T16:34:19.067

Google Apps 是...“一组智能应用程序，包括 Gmail、Docs、Drive 和 Calendar，用于连接公司中的人员，无论他们身在何处。”<br> 来源： [https://gsuite。 google.com/together/](https://gsuite.google.com/together/)

**示例**：谷歌日历、谷歌云端硬盘、谷歌环聊、谷歌幻灯片、谷歌电子表格——这些都是[基于网络的应用程序](https://en.wikipedia.org/wiki/Web_application)（“应用程序”）。

G Suite 是 Google 为其应用程序集合起的名称。G Suite 以前称为“Google Apps for Work”和“Google Apps for Your Domain”，是由 IT 管理员实施的资源，用于通过域（及其别名）访问 Google Apps。

**例如：企业或组织中的用户无需使用您的标准 Gmail 地址（***用户名*@gmail.com），而是使用具有自己域的电子邮件地址（例如（*用户名*@example.com））登录以访问这些网络应用程序。

该界面与标准 Google 帐户持有人的界面相同，但 G Suite 管理员可以通过 G Suite 管理控制台添加一些品牌和控制功能。

在这篇文章开始变得像推销之前，我将在这里停下来 - 让我们说我真的很喜欢我的工作场所为我们的组织实施了 G Suite - 它让我的职责变得更加轻松！

# fonts - TinyMCE 配置允许字体标签

> ID：432036
> 
> 赞同：1
> 
> 时间：2009-01-11T00:27:03.137
> 
> 标签：fonts, tinymce, wysiwyg

根据客户要求配置 TinyMCE 以允许使用标签。
我的配置如下（从 TinyMCE 示例中获取；对不起，
我不想遗漏任何内容：

```
tinyMCE.init({apply_source_formatting : true,  
              button_tile_map : true,          
              content_css : '/themes/site_themes/default/styles/editor.css',      
              document_base_url : '/',  
              editor_selector : 'lg_mceEditor',  
              external_image_list_url : "/inc/imagelist.js/",  
              external_link_list_url : "/inc/linklist.js",  
              fix_list_elements : true,  
              force_p_newlines : true,  
              forced_root_block : 'p',  
              heading_clear_tag : 'p',  
              mode:'textareas',  
              paste_auto_cleanup_on_paste : true,  
             plugins :'contextmenu,inlinepopups,nonbreaking,paste,style,table,xhtmlxtras',   
              relative_urls : false,  
              theme : 'advanced',  
              theme_advanced_blockformats : 'p,h2,h3,h4,h5',  
theme_advanced_buttons1 : 'cut,copy,paste,pasteword,undo,redo,|,removeformat,formatselect,|,bold,italic,abbr,ins,del,|,bullist,numlist,outdent,indent,|,link,unlink,image,|,code',  
              theme_advanced_buttons2 : 'fontsizeselect,forecolorpicker',     
              theme_advanced_buttons3 : '',  
              theme_advanced_path_location : 'bottom',  
              theme_advanced_resize_horizontal : false,  
              theme_advanced_resizing : true,  
              theme_advanced_toolbar_align : 'left',  
              theme_advanced_toolbar_location : 'top',  
  entities : '160,nbsp,38,amp,162,cent,8364,euro,163,pound,165,yen,169,copy,174,reg,8482,trade,8240,permil,181,micro,183,middot,8226,bull,8230,hellip,8242,prime,8243,Prime,167,sect,182,para,223,szlig,8249,lsaquo,8250,rsaquo,171,laquo,187,raquo,8216,lsquo,8217,rsquo,8220,ldquo,8221,rdquo,8218,sbquo,8222,bdquo,60,lt,62,gt,8804,le,8805,ge,8211,ndash,8212,mdash,175,macr,8254,oline,164,curren,166,brvbar,168,uml,161,iexcl,191,iquest,710,circ,732,tilde,176,deg,8722,minus,177,plusmn,247,divide,8260,frasl,215,times,185,sup1,178,sup2,179,sup3,188,frac14,189,frac12,190,frac34,402,fnof,8747,int,8721,sum,8734,infin,8730,radic,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8712,isin,8713,notin,8715,ni,8719,prod,8743,and,8744,or,172,not,8745,cap,8746,cup,8706,part,8704,forall,8707,exist,8709,empty,8711,nabla,8727,lowast,8733,prop,8736,ang,180,acute,184,cedil,170,ordf,186,ordm,8224,dagger,8225,Dagger,192,Agrave,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,202,Ecirc,203,Euml,204,Igrave,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,212,Ocirc,213,Otilde,214,Ouml,216,Oslash,338,OElig,217,Ugrave,219,Ucirc,220,Uuml,376,Yuml,222,THORN,224,agrave,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,234,ecirc,235,euml,236,igrave,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,244,ocirc,245,otilde,246,ouml,248,oslash,339,oelig,249,ugrave,251,ucirc,252,uuml,254,thorn,255,yuml,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,8501,alefsym,982,piv,8476,real,977,thetasym,978,upsih,8472,weierp,8465,image,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8756,there4,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,173,shy,233,eacute,237,iacute,243,oacute,250,uacute,193,Aacute,225,aacute,201,Eacute,205,Iacute,211,Oacute,218,Uacute,221,Yacute,253,yacute',  
               valid_elements : ''  
               +'a[class|href|rel|rev|tabindex|title],'  
               +'abbr[class|title],'  
               +'blockquote[cite|class],'  
               +'br[],'  
               +'cite[class],'  
               +'dd[class],'  
               +'del[cite|class|datetime],'  
               +'dfn[class],'  
               +'div[class],'  
               +'dl[class],'  
               +'dt[class],'  
               +'em/i[class],'  
               +'h1[class],'  
               +'h2[class],'  
               +'h3[class],'  
               +'h4[class],'  
               +'h5[class],'  
               +'hr[class|noshade<noshade|size],'  
               +'img[align<bottom?left?middle?right?top|alt|class|height|longdesc|src|title||width],'  
               +'ins[cite|class|datetime],'  
               +'li[class|type],'  
               +'ol[class|start|type],'  
               +'p[class],'  
               +'pre/listing/plaintext/xmp[class],'  
               +'q[cite|class],'  
               +'small[class],'  
               +'span[class],'  
               +'strong/b[class],'  
               +'sub[class],'  
               +'sup[class],'  
               +'table[class|id|summary|title],'  
               +'td[colspan|rowspan],'  
               +'th[colspan|rowspan],'  
               +'tr[rowspan],'  
               +'ul[class|id|title|type],'  
               +'font[class|color|dir<ltr?rtl|face|id|lang|size|style|title]'}); 
```

所以编辑器 UI 似乎工作正常，但是当我使用查看 html 按钮或将其保存回服务器时，看起来字体仍然被剥离。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-14T04:45:49.900

找到了答案。我错误地认为 tinyMCE 仍然使用字体标签作为颜色/大小的东西。看起来这个版本正在使用带有附加样式属性的跨度。所以我不得不将 +'span[class],' 改为 +'span[class|style],'

# android - 如何在 TextView 中水平和垂直居中文本？

> ID：432037
> 
> 赞同：2233
> 
> 时间：2009-01-11T00:27:55.617
> 
> 标签：android, textview

如何在 a 中水平和垂直居中文本`TextView`，使其恰好出现在 in 的`TextView`中间`Android`？

* * *

## 回答 #1

> 赞同：3323
> 
> 时间：2009-01-11T01:53:17.393

我假设您使用的是 XML 布局。

```
<TextView  
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    android:gravity="center"
    android:text="@string/**yourtextstring**"
/> 
```

您也可以使用重力`center_vertical`或`center_horizontal`根据您的需要。

正如@stealthcopter 评论的那样，在 java:`.setGravity(Gravity.CENTER);`中。

对于 Kotlin 用户，`.gravity = Gravity.CENTER`

* * *

## 回答 #2

> 赞同：471
> 
> 时间：2010-02-08T22:54:29.500

```
android:gravity="center" 
```

这会成功的

* * *

## 回答 #3

> 赞同：312
> 
> 时间：2009-11-21T12:25:56.413

您还可以使用以下方法动态设置它：

```
textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #4

> 赞同：122
> 
> 时间：2011-11-11T00:58:08.577

```
android:layout_centerInParent="true" 
```

这在与布局的高度和宽度设置为 wrap_content 的 RelativeLayout 一起使用时有效。

* * *

## 回答 #5

> 赞同：87
> 
> 时间：2013-01-01T20:11:10.153

您还可以使用以下组合：

```
android:gravity="left|center" 
```

然后，如果 textview 宽度大于“fill_parent”，则文本仍将左对齐（不居中，因为重力仅设置为“center”）。

* * *

## 回答 #6

> 赞同：59
> 
> 时间：2013-05-30T05:34:15.567

应用重力：

```
TextView txtView = (TextView) findViewById(R.id.txtView);
txtView.setGravity(Gravity.CENTER_HORIZONTAL); 
```

对于垂直：

```
txtView.setGravity(Gravity.CENTER_VERTICAL); 
```

在 XML 中：

```
<TextView      
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:gravity="center"
    android:text="@string/Hello_World"        
/> 
```

* * *

## 回答 #7

> 赞同：44
> 
> 时间：2014-10-17T12:11:09.683

有两种方法可以做到这一点。

XML 代码中的第一个。您需要注意`Gravity`属性。您也可以在图形编辑器中找到此属性；它可能比 XML EDITOR 更容易。

```
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:gravity="center_vertical|center_horizontal"
    android:text="Your Text"
/> 
```

对于您的特定情况，重力值将是：

```
center_vertical|center_horizontal 
```

在图形编辑器中，您将找到所有可能的值，甚至查看它们的结果。

* * *

## 回答 #8

> 赞同：41
> 
> 时间：2011-05-13T11:57:15.410

如果您使用 TableLayout，请确保也将 TableRows 的重力设置为中心。否则它将无法正常工作。至少在我将 TableRow 的重力设置为中心之前，它对我不起作用。

例如，像这样：

```
<TableRow android:id="@+id/tableRow2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:gravity="center">        
    <TextView android:text="@string/chf" android:id="@+id/tv_chf" android:layout_weight="2" android:layout_height="wrap_content" android:layout_width="fill_parent" android:gravity="center"></TextView>        
</TableRow> 
```

* * *

## 回答 #9

> 赞同：39
> 
> 时间：2012-05-15T05:03:02.320

您需要像这样设置**TextView Gravity** (Center Horizo​​ntal & Center Vertical)：

```
android:layout_centerHorizontal="true" 
```

和

```
android:layout_centerVertical="true" 
```

并动态使用：

```
textview.setGravity(Gravity.CENTER);
textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #10

> 赞同：34
> 
> 时间：2012-07-16T04:28:43.760

在我看来，

```
android:gravity="center" 
```

比，

```
android:layout_centerInParent="true" 
```

这比，

```
android:layout_centerHorizontal="true"
android:layout_centerVertical="true" 
```

至少用于格式化文本。

* * *

## 回答 #11

> 赞同：32
> 
> 时间：2015-01-03T03:58:38.767

对于线性布局：在 XML 中使用类似这样的东西

```
<TextView  
    android:id="@+id/textView1"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:gravity="center_vertical|center_horizontal"
    android:text="Your Text goes here"
/> 
```

要在运行时执行此操作，请在您的活动中使用类似的内容

```
TextView textView1 =(TextView)findViewById(R.id.texView1);
textView1.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

对于相对布局：在 XML 中使用类似这样的东西

```
<TextView  
    android:id="@+id/textView1"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:layout_centerInParent="true"
    android:text="Your Text goes here"
/> 
```

要在运行时执行此操作，请在您的活动中使用类似的内容

```
TextView textView1 =(TextView)findViewById(R.id.texView1);
RelativeLayout.LayoutParams layoutParams = RelativeLayout.LayoutParams)textView1.getLayoutParams();
layoutParams.addRule(RelativeLayout.CENTER_IN_PARENT, RelativeLayout.TRUE);
textView1.setLayoutParams(layoutParams); 
```

* * *

## 回答 #12

> 赞同：25
> 
> 时间：2013-10-04T17:18:18.487

在 XML 文件中使用。

**布局文件**

```
<TextView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
    android:text="@string/stringtext"/> 
```

或者：

**在 Java 类中使用它**

```
TextView textView =(TextView)findViewById(R.id.texviewid);
textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #13

> 赞同：22
> 
> 时间：2013-10-11T11:08:21.440

将此用于相对布局

```
android:layout_centerInParent="true" 
```

和其他布局

```
android:gravity="center" 
```

* * *

## 回答 #14

> 赞同：20
> 
> 时间：2015-12-17T06:12:50.103

如果`TextView's`高度和宽度是`wrap content`那么文本`TextView`总是居中。但是如果`TextView's`宽度是`match_parent`，高度是`match_parent`或者`wrap_content`你必须写下面的代码：

对于**相对布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center" 
        android:text="Hello World" />

</RelativeLayout> 
```

对于**线性布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Hello World" />

</LinearLayout> 
```

* * *

## 回答 #15

> 赞同：17
> 
> 时间：2013-08-24T20:50:50.877

在对 TextView 使用重力时，API 级别 17 中实现了另一种方法 -

```
textView.setTextAlignment(View.TEXT_ALIGNMENT_CENTER); 
```

不知道有什么区别，但它也有效。但是仅适用于 API 级别 17 或更高级别。

* * *

## 回答 #16

> 赞同：14
> 
> 时间：2012-11-21T03:15:44.947

在`RelativeLayout`，它会很好。

还有另一个`Button`和其他任何你可以添加的东西。

以下对我很有效。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ff314859"
    android:paddingLeft="16dp"
    android:paddingRight="16dp">
    <TextView 
        android:id="@+id/txt_logo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="your text here"
        android:textSize="30dp"
        android:gravity="center"/>

        ...other button or anything else...

</RelativeLayout> 
```

* * *

## 回答 #17

> 赞同：12
> 
> 时间：2019-06-05T01:09:33.913

采用`android:textAlignment="center"`

[![](https://i.stack.imgur.com/l0Fzk.png)](https://i.stack.imgur.com/l0Fzk.png)

```
 <TextView
        android:text="HOW WAS\nYOUR\nDAY?"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAlignment="center"
        android:id="@+id/textView5"
         /> 
```

* * *

## 回答 #18

> 赞同：11
> 
> 时间：2013-04-02T03:34:18.213

您可以将`gravity`您的 textview 设置为`CENTER`.

* * *

## 回答 #19

> 赞同：11
> 
> 时间：2015-12-15T12:38:02.590

最简单的方法（令人惊讶的是，仅在评论中提到，因此我发布作为答案的原因）是：

```
textview.setGravity(Gravity.CENTER) 
```

* * *

## 回答 #20

> 赞同：10
> 
> 时间：2012-07-15T02:14:08.470

如果您尝试在 TableLayout 中的 TableRow 上将文本居中，这是我实现此目的的方法：

```
<TableRow android:id="@+id/rowName"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:padding="5dip" >
    <TextView android:id="@+id/lblSomeLabel"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:gravity="center"
              android:layout_width="0dp"
              android:layout_weight="100"
              android:text="Your Text Here" />
</TableRow> 
```

* * *

## 回答 #21

> 赞同：10
> 
> 时间：2015-11-15T06:33:26.730

如果您使用的是相对布局：

```
 <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/stringname"
    android:layout_centerInParent="true"/> 
```

如果您使用的是线性布局

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/stringname"
    android:layout_gravity="center"/> 
```

* * *

## 回答 #22

> 赞同：10
> 
> 时间：2016-06-17T18:29:16.087

试试这个方法，它会工作

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center">

        <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAlignment="center"/>

</LinearLayout> 
```

* * *

## 回答 #23

> 赞同：10
> 
> 时间：2017-09-20T12:08:17.110

TextView 重力根据您的父布局工作。

**线性布局**：

如果你使用 LinearLayout 那么你会发现两个重力属性 android:gravity & android:layout_gravity

android:gravity ：表示 TextView 内部文本的布局部分，而 android:layout_gravity ：表示 TextView 在父视图中的位置。

[![在此处输入图像描述](https://i.stack.imgur.com/9cxnM.png)](https://i.stack.imgur.com/9cxnM.png)

如果您想将文本水平和垂直居中设置，请使用下面的代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="300dp"
    android:background="@android:color/background_light"
    android:layout_height="300dp">

    <TextView
        android:layout_width="match_parent"
        android:text="Hello World!"
        android:gravity="center_horizontal"
        android:layout_gravity="center_vertical"
        android:layout_height="wrap_content"
    />
</LinearLayout> 
```

**相对布局**：

使用 RelativeLayout 您可以在 TextView 中使用以下属性

android:gravity="center" 用于 TextView 中的文本中心。

android:gravity="center_horizo​​ntal" 内部文本，如果你想水平居中。

android:gravity="center_vertical" 内部文本，如果你想垂直居中。

android:layout_centerInParent="true" 如果您希望 TextView 位于父视图的中心位置。android:layout_centerHorizo​​ntal="true" 如果您希望 TextView 在父视图的水平中心。android:layout_centerVertical="true" 如果您希望 TextView 在父视图的垂直中心。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="300dp"
    android:background="@android:color/background_light"
    android:layout_height="300dp">

    <TextView
        android:layout_width="match_parent"
        android:text="Hello World!"
        android:gravity="center"
        android:layout_centerInParent="true"
        android:layout_height="wrap_content"
    />
</RelativeLayout> 
```

* * *

## 回答 #24

> 赞同：9
> 
> 时间：2013-06-03T09:54:20.793

这是我在我的应用程序中使用的答案。它在屏幕中央显示文本。

```
<TextView
    android:id="@+id/txtSubject"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/subject"
    android:layout_margin="10dp"
    android:gravity="center"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

* * *

## 回答 #25

> 赞同：9
> 
> 时间：2020-02-13T07:30:48.603

实际上，我们可以通过排除 fontPadding 做得更好。

```
<TextView
  android layout_height="wrap_content"
  android layout_height="wrap_content"
  android:includeFontPadding="false"
  android:textAlignment="center"
/> 
```

* * *

## 回答 #26

> 赞同：8
> 
> 时间：2013-07-04T20:09:04.710

正如许多答案所暗示的那样，上述工作正常。

```
android:gravity="center" 
```

如果你想把它垂直居中：

```
android:gravity="center_vertical" 
```

或只是水平：

```
android:gravity="center_horizontal" 
```

* * *

## 回答 #27

> 赞同：8
> 
> 时间：2016-03-07T13:42:51.297

TextView 的高度和宽度是换行内容，然后 textview 中的文本始终居中，然后使用以下方法在其父布局中居中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="Hello.."/>
</RelativeLayout> 
```

对于 LinearLayout，代码也相同：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello.."/>
</LinearLayout> 
```

并且从编程上讲，父级是RelativeLayout java代码，它在运行时在您的活动中使用类似的东西

```
TextView textView1 =(TextView)findViewById(R.id.texView1);
RelativeLayout.LayoutParams layoutParams = RelativeLayout.LayoutParams)textView1.getLayoutParams();
layoutParams.addRule(RelativeLayout.CENTER_IN_PARENT, RelativeLayout.TRUE);
textView1.setLayoutParams(layoutParams); 
```

* * *

## 回答 #28

> 赞同：7
> 
> 时间：2013-05-06T17:56:27.130

简单地说，在您的 XML 文件中，将 textview 重力设置为中心：

```
<TextView
    android:gravity="center" /> 
```

* * *

## 回答 #29

> 赞同：7
> 
> 时间：2017-06-30T09:27:32.913

您可以这样做以使文本居中

```
<TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center" /> 
```

* * *

## 回答 #30

> 赞同：7
> 
> 时间：2018-02-10T16:05:45.207

我们可以通过以下多种方式实现这一目标：-

> XML方法01

```
<TextView  
    android:id="@+id/textView"
    android:layout_height="match_parent"
    android:layout_width="wrap_content" 
    android:gravity="center_vertical|center_horizontal"
    android:text="@strings/text"
/> 
```

> XML方法02

```
<TextView  
    android:id="@+id/textView"
    android:layout_height="match_parent"
    android:layout_width="wrap_content" 
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@strings/text"
/> 
```

> XML方法03

```
<TextView  
    android:id="@+id/textView"
    android:layout_height="match_parent"
    android:layout_width="wrap_content" 
    android:gravity="center"
    android:text="@strings/text"
/> 
```

> XML方法04

```
<TextView  
    android:id="@+id/textView"
    android:layout_height="match_parent"
    android:layout_width="wrap_content" 
    android:layout_centerInParent="true"
    android:text="@strings/text"
/> 
```

> Java方法01

```
textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

> Java方法02

```
textview.setGravity(Gravity.CENTER); 
```

> Java方法03

```
textView.setTextAlignment(View.TEXT_ALIGNMENT_CENTER); 
```

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2016-05-20T10:18:11.030

`android:gravity="center_horizontal"`用于水平对齐文本中心。 `android:gravity="center_vertical"`用于垂直对齐文本中心。 `android:gravity="center"`用于垂直和水平对齐文本中心。

```
<TextView
        android:layout_width="match_parent"
        android:gravity="center_horizontal|center_vertical"
        android:layout_height="match_parent" /> 
```

* * *

## 回答 #32

> 赞同：4
> 
> 时间：2016-09-04T19:33:07.180

[![中心文本](https://i.stack.imgur.com/qOsHn.png)](https://i.stack.imgur.com/qOsHn.png)

```
<LinearLayout
        android:layout_width="match_parent"
        android:orientation="vertical"
        android:gravity="center"
        android:layout_height="wrap_content">
    <TextView
            android:id="@+id/failresults"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="3dp"
            android:gravity="center_vertical|center_horizontal"
            android:text=""
            android:textSize="12sp" />
</LinearLayout> 
```

如果你在linearlayout中有textview，你需要将它们都设置为中心

* * *

## 回答 #33

> 赞同：4
> 
> 时间：2017-01-23T12:09:05.647

我不认为，您真的需要这样做，只需像这样在布局文件中定义您的 TextView

```
<RelativeLayout
    android:layout_width="width"
    android:layout_height="height">
    <TextView
        android:id="@+id/yourid"
        android:layout_centerInParent="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Your text" />
</RelativeLayout> 
```

* * *

## 回答 #34

> 赞同：3
> 
> 时间：2016-08-17T22:29:19.987

将布局文件中的重力属性设置为 `android:gravity="center"`

* * *

## 回答 #35

> 赞同：3
> 
> 时间：2019-03-25T12:02:25.037

```
 <android.support.constraint.ConstraintLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    xmlns:app="http://schemas.android.com/apk/res-auto">

       <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="HELLO"
            android:textColor="@color/colorPrimaryDark"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintBottom_toBottomOf="parent"/>

 </android.support.constraint.ConstraintLayout> 
```

* * *

## 回答 #36

> 赞同：3
> 
> 时间：2019-04-01T07:12:34.567

如果您让文本视图的宽度和高度来包装内容，那么您必须根据父支持的属性通过布局重力来管理它的位置。否则你可以做。

```
<TextView  
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    android:gravity="center"/> 
```

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2014-02-19T12:55:49.940

```
<TextView
android:id="+@id/textView"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:gravity="center"
/> 
```

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2014-03-13T12:57:54.423

你试过这种方法吗？

```
<TextView
android:id="+@id/txtVw"
android:gravity="center"
/> 
```

* * *

## 回答 #39

> 赞同：2
> 
> 时间：2016-12-07T10:26:56.043

在对我有用的xml中使用下面的代码你可以改变它在中心的方向

```
<LinearLayout
        android:layout_width="match_parent"
        android:orientation="horizontal"
        android:background="@color/colorPrimaryDark"
        android:gravity="center"
        android:layout_height="wrap_content">
        <TextView
            android:id="@+id/id_text"
            android:layout_width="wrap_content"
            android:textSize="18sp"
            android:textColor="@android:color/white"
            android:textStyle="normal"
            android:layout_height="wrap_content"
            android:text="centre me"/>
    </LinearLayout> 
```

* * *

## 回答 #40

> 赞同：2
> 
> 时间：2017-03-22T08:09:33.683

用于`android:gravity="center"`解决您的问题。

* * *

## 回答 #41

> 赞同：2
> 
> 时间：2018-04-22T04:41:58.483

```
<TextView  
android:layout_width="match_parent" 
android:layout_height="match_parent" 
android:gravity="center"
android:text="In the center"/> 
```

以上是使用 .xml 文件进行设置。

但我更喜欢 java 版本，因为如果需要，您也可以在运行状态下在代码中禁用它。以下是java代码。

```
textView1.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #42

> 赞同：2
> 
> 时间：2020-08-17T08:49:26.877

对于**科特林**：

如果您想将您`TextView`的代码居中：

```
textView.gravity = Gravity.CENTER 
```

如果你想`horizontally`居中：

```
textView.gravity = Gravity.CENTER_HORIZONTAL 
```

或者，`vertically`中心：

```
textView.gravity = Gravity.CENTER_VERTICAL 
```

* * *

## 回答 #43

> 赞同：2
> 
> 时间：2021-10-09T04:35:40.417

```
android:textAlignment="center" 
```

这会成功的

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2017-03-05T15:21:19.873

如果您正在使用`RelativeLayout`，请尝试在`TextView`标签中使用此属性：

```
android:layout_centerInParent= true 
```

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2017-09-20T03:34:29.733

试试这个 ：

```
<TextView  
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    android:gravity="center"
/> 
```

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2017-12-03T18:05:48.773

我添加了 xml 片段以使文本视图中心在线性和相对布局中对齐。

**在线性布局中**

```
<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Text In Center"
android:layout_gravity="center"
android:gravity="center"/> 
```

**在相对布局中**

```
<TextView
android:layout_width="match_parent"
android:layout_height="match_parent"
android:text="Text In Center"
android:layout_centerInParent= true/> 
```

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2018-02-05T10:43:31.440

**让我们在屏幕上说全文视图**

```
 <TextView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="Hello World!"
    android:gravity="center"
    /> 
```

**假设相对布局中的 Textview（未满）**

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Hello World!"
    android:layout_centerInParent=true
    /> 
```

**假设Linear_layout中的Textview（未满）**

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Hello World!"
    android:layout_gravity="centre"
    /> 
```

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2018-03-03T19:33:56.927

通过 。`xml`文件重力可以设置为中心，如下所示

```
<TextView  
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    android:gravity="center"
    android:text="In the center"
/> 
```

通过 java 以下是您可以解决特定问题的方法

```
textView1.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2018-06-13T05:50:03.130

您可以将重力设置为垂直居中，将文本对齐设置为居中。

```
<TextView
     android:text="@string/yourText"
     android layout_height="wrap_content"
     android layout_height="wrap_content"
     android:gravity="center_vertical"
     android:textAlignment="center" /> 
```

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2019-02-07T04:24:52.833

您必须像这样设置重力：

```
(textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2019-02-16T05:08:04.580

试试这个：

```
<TextView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center" /> 
```

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2019-03-26T05:44:45.360

试试这个：

> **如果您使用的是textview 高度和宽度 match_parent，**则使用 LinearLayout 如果您使用的是 textview 高度和宽度 wrap_content，则可以将重力文本设置为居中，将**文本对齐设置为水平居中**，然后在 LinearLayout 中添加重力中心属性。

**XML 代码**

```
<LinearLayout
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<TextView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:textAlignment="center"
    android:gravity="center"
    android:textColor="#000"
    android:textSize="30sp"
    android:text="Welcome to Android" />
    </LinearLayout> 
```

**Java 代码**

> 您可以以编程方式执行以下操作：-

```
(textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL); 
```

谢谢

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2020-08-26T16:30:46.680

**迟来的 GUI 荣誉奖**

我想为这个已经很棒的线程增加一些价值。终于在 11 年后，我们现在有了一种从工具箱中拖放 TextView 并通过 GUI 属性框选择重力的方法。并且，谢天谢地，GUI 将属性简洁地组合为“center_vertical|center_horizo​​ntal”。

[![在此处输入图像描述](https://i.stack.imgur.com/nrKy1.jpg)](https://i.stack.imgur.com/nrKy1.jpg)

```
 <TextView
    android:text="This is my sample text."
    android:layout_width="match_parent"
    android:layout_height="35.7dp"
    android:id="@+id/textView2"
    android:layout_marginBottom="24.7dp"
    android:typeface="sans"
    android:textSize="20"
    android:gravity="center_vertical|center_horizontal" /> 
```

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2021-11-07T03:35:09.543

重新排列布局、图像或文本视图的位置属于对齐主题。所以如果你想把你的图像 src 垂直放在中间，你应该使用下面编写的代码

```
android:layout_centerVertical="true" 
```

和水平居中

```
android:layout_centerHorizontal="true" 
```

否则，我认为我们也可以使用重力将每个元素放在父布局的中间，例如`android:gravity="center"`

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2016-07-20T06:27:42.590

```
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="25dp"
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="Tours"
        android:id="@+id/textView" /> 
```

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2016-08-17T21:46:28.003

对于那些想知道如何在其 TextView 元素中垂直居中同时将其保持在左侧（水平）的人：

```
android:gravity="center"
android:textAlignment="viewStart" 
```

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2016-10-06T11:08:14.203

```
There are 2 ways to do this :

1\. From Xml
     use :  
        <TextView
         .........
        android:gravity="center"/>

2\. From Java class
    use : 

     [textview].setGravity(Gravity.CENTER); 
```

* * *

## 回答 #58

> 赞同：0
> 
> 时间：2017-11-13T10:42:48.517

您可以使用 android:gravity="center" 将文本视图居中

代码如下

```
 <TextView
     android:text="@string/yourText"
     android layout_height="wrap_content"
     android layout_height="wrap_content"
     android:gravity="center" /> 
```

* * *

## 回答 #59

> 赞同：0
> 
> 时间：2017-11-27T19:04:44.123

如果该 TextView 没有将高度/宽度属性设置为`wrap_content`，只需使用`android:gravity="center"`. 但是有些人抱怨使用它不起作用。那是因为它们的布局没有相同的重力。你可以设置

`android:layout_gravity="center"` **在 TEXTVIEW 中**（这仅适用于 TextView）

或者

`android:gravity="center"` **在父布局**中（这将适用于其中的所有视图）

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2017-12-14T16:58:03.610

在任何视图的 ConstraintLayout 中：

（当您使用约束布局时，将高度和宽度设置为 0，并让约束来管理视图边界。）

```
<View
    android:layout_width="0dp"
    android:layout_height="0dp"
    app:layout_constraintBottom_toBottomOf="parent"
    app:layout_constraintLeft_toLeftOf="parent"
    app:layout_constraintRight_toRightOf="parent"
    app:layout_constraintTop_toTopOf="parent" /> 
```

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2017-12-18T07:06:38.897

> 如何水平和垂直居中视图或其内容，例如 TextView 或 Button？layout_gravity 可用于将视图定位在其父视图的中心。而重力属性用于定位视图的内容，例如“文本”在视图的中心。

**(1) 水平居中 TextView**

[![在此处输入图像描述](https://i.stack.imgur.com/A3YFH.png)](https://i.stack.imgur.com/A3YFH.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
       android:orientation="vertical"
       android:layout_margin="10dp"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World!"
        android:layout_gravity="center"
        android:background="#333"
        android:textColor="#fff"
        />

</LinearLayout> 
```

**( 2 ) TextView 垂直居中**

> android:layout_gravity=”center_vertical” 不起作用！！

要使 TextView 垂直居中，您需要使用技巧。将 TextView 放在 RelativeLayout 中，然后设置 TextView 属性 android:layout_centerInParent=”true” [![在此处输入图像描述](https://i.stack.imgur.com/YL6gm.png)](https://i.stack.imgur.com/YL6gm.png)

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
       android:orientation="vertical"
       android:layout_margin="10dp"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Hello World!"
        android:layout_centerInParent="true"
        android:layout_gravity="center_vertical"
        android:gravity="center"
        android:background="#333"
        android:textColor="#fff"
        />

</RelativeLayout> 
```

**( 3 ) 水平居中文本**

> 机器人：重力=“center_horizo​​ntal”

[![在此处输入图像描述](https://i.stack.imgur.com/NSdqt.png)](https://i.stack.imgur.com/NSdqt.png)

**( 4 ) 水平和垂直居中文本**

> android:gravity=”center” 这将使文本水平和垂直居中

[![在此处输入图像描述](https://i.stack.imgur.com/nLpya.png)](https://i.stack.imgur.com/nLpya.png)

> ```
> <TextView
>     android:layout_width="fill_parent"
>     android:layout_height="100dp"
>     android:text="Hello World!"
>     android:gravity="center"
>     android:background="#333"
>     android:textColor="#fff"
>     /> 
> ```

* * *

## 回答 #62

> 赞同：0
> 
> 时间：2018-03-20T15:10:48.483

在 TextView 中使用 Gravity 属性将文本垂直和水平居中。

```
android:gravity="center" 
```

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2018-05-08T09:25:07.657

使用 android:gravity="center" 到父级

```
<LinearLayout
    android:layout_width="200dp"
    android:layout_height="200dp"

    android:gravity="center"
    >
    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Hello world"
        />
</LinearLayout> 
```

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2018-05-25T08:12:00.907

这是解决方案。

```
<TextView  
       android:layout_width="match_parent" 
       android:layout_height="match_parent" 
       android:gravity="center"
       android:text="**Your String Value**" /> 
```

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2018-11-05T11:12:31.290

您可以`android:gravity`为此进行更改。

`android:gravity="center"`或者

如果你想水平或垂直居中

`android:gravity="center_horizontal"`

`android:gravity="center_vertical"`

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2018-12-14T16:56:49.103

您可以通过以下方式在 java 中以编程方式执行此操作： textview.setGravity(Gravity.CENTER);

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2018-12-29T13:35:57.967

```
android:gravity="center" 
```

xml 中的这一行将帮助您将`TextView`.

* * *

## 回答 #68

> 赞同：0
> 
> 时间：2019-04-27T07:06:31.147

Textview 的宽度和高度应该是 match_parent 并在你的 textview 属性中添加 android:gravity="center" 。

* * *

## 回答 #69

> 赞同：0
> 
> 时间：2019-05-10T19:13:24.987

如果您的 XML 文件中只有一个 TextView，那么您可以将父视图重力作为中心。这将使您的子元素位于屏幕的中心，然后您可以将您的子视图作为高度和宽度的包装。

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2022-02-03T12:38:30.250

对于文本的布局，最好使用

安卓：文本对齐=“中心”

对于对象的其他布局等，很好用

机器人：重力=“中心”

# c# - ASP.NET 的行计数器

> ID：432038
> 
> 赞同：4
> 
> 时间：2009-01-11T00:28:19.920
> 
> 标签：c#, asp.net

我知道代码行数是完全任意的，而且是一个可怕的指标。即便如此，经过漫长的一天，我还是喜欢点击一个小按钮，然后我的**宠物项目**增长了 10%。（或者，如果我再次花一天时间进行重构，它会瘦 10%，哇哦！）

过去我使用过两个可以分析 CodeProject 代码的[行](http://www.codeproject.com/KB/dotnet/LineCountUtility.aspx) [计数器](http://www.codeproject.com/KB/macros/linecount.aspx)，但它们只处理 .cs 文件，完全忽略了我在 .aspx、.asmx、.js、.css 等方面的大量工作。

有没有人使用过可以解析通常在典型 ASP.NET 站点上找到的所有文本文件的行计数器？

## 更新

**CMS 推荐了 CLOC**，这确实正是我想要的。这是我好奇的输出。它甚至计算了我的 MSBuild 脚本！

```
C:\Web>cloc-1.06.exe --exclude-dir=.svn,bin,images AST
     474 个文本文件。
     474 个独特的文件。
   28254 个文件被忽略。

http://cloc.sourceforge.net v 1.06 T=70.0 s (6.3 files/s, 737.7 lines/s)
-------------------------------------------------- -----------------------------------------
语言文件空白注释代码规模第 3 代。等价的
-------------------------------------------------- -----------------------------------------
C# 332 4670 9666 21255 x 1.36 = 28906.80
ASP.Net 91 58 0 4053 x 1.29 = 5228.37
Javascript 9 1262 2112 4011 x 1.48 = 5936.28
CSS 5 193 42 1665 x 1.00 = 1665.00
MSBuild 脚本 1 0 7 1413 x 1.90 = 2684.70
HTML 2 126 5 429 x 1.90 = 815.10
XML 1 0 0 392 x 1.90 = 744.80
PHP 1 21 13 249 x 3.50 = 871.50
-------------------------------------------------- -----------------------------------------
总和：442 6330 11845 33467 x 1.40 = 46852.55
-------------------------------------------------- -----------------------------------------

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-11T00:36:20.140

看看[CLOC](http://cloc.sourceforge.net/)

检查输出：

```
-------------------------------------------------------------------------------
Language          files     blank   comment      code    scale   3rd gen. equiv
-------------------------------------------------------------------------------
ASP.Net              21       290         0      3424 x   1.29 =        4416.96
XML                   1         0         0        26 x   1.90 =          49.40
DOS Batch             1         1         0         8 x   0.63 =           5.04
C#                    1         0         0         4 x   1.36 =           5.44
-------------------------------------------------------------------------------
SUM:                 24       291         0      3462 x   1.29 =        4476.84
------------------------------------------------------------------------------- 
```

您还可以检查其他代码计数器：

*   [SLOCCount](http://www.dwheeler.com/sloccount/)
*   [slc](http://www.dwheeler.com/sloccount/)
*   南加州大学的[CODECOUNT](http://sunset.usc.edu/research/CODECOUNT/)
*   [位置](http://freshmeat.net/projects/loc/)
*   [奥伯爵](http://labs.ohloh.net/ohcount)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T00:38:25.983

通过计算通过的单元测试，您可能会获得相同程度的满意度。虽然这个数字也可能会产生误导，但至少单元测试（如果不是简单地增加计数）对代码质量有一些有效的影响。

# cocoa-touch - 是否有用于创建选择短声音文件的 UIPickerview 的通用模板？

> ID：432056
> 
> 赞同：1
> 
> 时间：2009-01-11T00:46:24.580
> 
> 标签：cocoa-touch, audio

是否有一个通用模板或教程或网页描述了创建 UIPickerview 的过程，它选择短声音文件并在选择时或使用播放器播放它们？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T04:45:58.263

您需要为您的选择器视图提供一个委托/数据源类 - 实现协议`UIPickerViewDelegate`和`UIPickerViewDataSource`. 这可以是您处理其他所有内容的任何视图控制器或单独的类 - 无论哪种方式，将`UIPickerView`'s`delegate`和`dataSource`properties 设置为该类的实例。

该类应该有三个实例变量 - 一个 NSArray`soundArr`包含声音，一个 NSTimer`timer`在声音播放之前提供选择后的延迟（更多内容见下文），以及一个 AVAudioPlayer`audioPlayer`播放所选声音（您需要导入 AVFoundation 框架 - 它仅在 2.2 中可用，因为声音播放过去要复杂得多）。

当您第一次加载声音时（在您的控制器类的 -init 方法或其他方法中），将它们与您希望它们显示的标题一起放在一个数组中，如下所示：

```
NSBundle *bdl = [NSBundle mainBundle];
soundArr = [[NSArray alloc] initWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"Sound One",@"title",[NSURL URLWithString:[bdl pathForResource:@"sound1" ofType:@"wav"]],@"url",零]，
[NSDictionary dictionaryWithObjectsAndKeys:@"Sound Two",@"title",[NSURL URLWithString:[bdl pathForResource:@"sound2" ofType:@"wav"]],@"url",nil],
零];

```

您需要实现的方法是：

*   `-pickerView:numberOfRowsInComponent:`- 应该返回的大小`soundArr`
*   `-pickerView:titleForRow:forComponent:`- 应该返回`[[soundArr objectAtIndex:row] objectForKey:@"title"]`
*   `-numberOfComponentsInPickerView:`- 应该返回 1，因为您只有一列（组件）可供选择
*   `-pickerView:didSelectRow:inComponent:`- 见下文

您不希望在调用行选择委托方法时立即启动声音，或者当用户滚动选择器时声音片段将连续播放。相反，使用具有短暂延迟的计时器，如下所示：

```
如果（计时器！=零）
{
    [定时器无效]；// 从先前的选择中删除任何计时器
    计时器=无；
}
timer = [NSTimer scheduledTimerWithTimeInterval:0.4 target:self 选择器:@selector(startSoundAtURL:) userInfo:[[soundArr objectAtIndex:row] objectForKey:@"url"] 重复：NO]; // 并创建一个新的

```

然后，实现一个 -startSoundAtURL: 方法来设置 AVAudioPlayer 播放该声音：

```
- (void)startSoundAtURL:(NSURL *)url
{
    如果（音频播放器！= 无）
    {
        [音频播放器停止]；
        [音频播放器发布]；
    }
    NSError *错误；
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&err];
    如果（错误！= 无）
    {
        NSLog([错误描述]);
        返回;
    }
    [音频播放器播放]；
}

```

那应该差不多了。

# asp.net - 我应该将 IList 或 List 返回到 MVC 中的控制器吗？

> ID：432074
> 
> 赞同：2
> 
> 时间：2009-01-11T01:02:28.230
> 
> 标签：asp.net, asp.net-mvc, ilist

就渲染列表而言，获得返回的控制器有什么区别？

在 Linq 数据上下文中：

```
public IList<Response> GetResponses(int ID)
    {
        var responses = from r in this.Responses where r.ID == ID orderby r.Date select r;

        return responses.ToList();
    } 
```

或者

```
 public List<Response> GetResponses(int ID)
    {
        var responses = from r in this.Responses where r.ID == ID orderby r.Date select r;

        return responses.ToList();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-11T01:09:05.750

我怀疑控制器有很大的不同，但您可能应该尝试尽可能少地透露有关您的类的私有数据的信息。这意味着公开接口而不是具体类型，并使用公开客户端操作数据所需的最少信息量的接口。

如果控制器只需要一个，`IEnumerable<Response>`那么你应该考虑将它的返回类型设为`GetResponses`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T01:49:37.947

不同之处在于，如果您使用 IList 接口更改您的 List 实现，则不需要更新控制器。除非您打算将您的图书馆提供给其他人使用，否则这可能没什么大不了的。在这种情况下，抽象可能是合理的，因为如果您进行更改，您将不是唯一需要更新代码的人。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2009-01-11T04:50:45.680

考虑返回一个数组，考虑接受 IEnumerable 作为参数。

# python - 3D Polygons in Python

> ID：432080
> 
> 赞同：2
> 
> 时间：2009-01-11T01:06:05.663
> 
> 标签：python, 3d, polygon

As far as I am aware there is no inbuilt polygon functionality for Python. I want to create a 3D map and figured that polygons would be the best way to go about it.

Not wanting to reinvent the wheel I did some googling and found that there's a lot of Python stuff out there, but I couldn't find what I wanted. Thus before I reinvent the wheel (or invent it a whole), does anybody know of a Polygon system for Python?

Note that it does need to be 3D (I found quite a few 2D ones). Note also that I am not interested in the displaying of them but in storing them and the datastructure within Python.

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T01:37:41.763

One of the most complete geography/mapping systems available for Python that I know about is [GeoDjango](http://geodjango.org/). This works on top of the [Django](http://www.djangoproject.com/), an MVC framework. With it comes a large collection of polygon, line and distance calculation tools that can even take into account the curvature of the earth's surface if need be.

With that said, the quickest way I can think of to produce a 3D map is using a height map. Create a two dimensional list of tuples containing (x, y, z) coordinates. Each tuple represents an evenly spaced point on a grid, mapped out by the dimensions of the array. This creates a simple plane along the X and Z axes; the ground plane. The polygons that make up the plane are quads, a polygon with four sides.

Next, to produce the three dimensional height, simply give each point a Y value. This will create peaks and valleys in your ground plane.

How you render this will be up to you, and converting your grid of points into a polygon format that something like OpenGL can understand may take some work, but have a look at [Visual Python](http://vpython.org/), its the simplest 3D library I've seen for Python.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T02:35:58.383

I think you mean Polyhedron, not Polygon .. and you might wanna look at [vpython](http://vpython.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-08T20:24:09.830

CGAL is a C++ geometry library which, amongst other things, models Polyhedra (3D flat-surfaced shapes)

It has Python bindings available. The documentation for the Polygon3 class is here: [http://cgal-python.gforge.inria.fr/Manual/CGAL.Polyhedron.html#Polyhedron_3](http://cgal-python.gforge.inria.fr/Manual/CGAL.Polyhedron.html#Polyhedron_3)

# php - 具有多个模式/数据库的 Zend 框架？

> ID：432086
> 
> 赞同：1
> 
> 时间：2009-01-11T01:08:56.563
> 
> 标签：php, zend-framework, zend-db-table

我有一些我定义的表，如下例所示：

```
class TableA extends Zend_Db_Table_Abstract
{
    protected $_schema          = 'schema1';
    protected $_name            = 'tablea';
}

class TableB extends Zend_Db_Table_Abstract
{
    protected $_schema          = 'schema2';
    protected $_name            = 'tableb';
} 
```

使用一个默认的 Db 适配器，这似乎可以完美地工作（因为 2 个模式在同一台服务器上）。

像这样的代码有效：

```
$tableA = new TableA();
$select = $tableA->select();
// $select->__toString() outputs: SELECT * FROM `schema1`.`tablea` 
```

但是，当我尝试将相同的模型与任何 Zend Framework 表关系函数（即：findDependantRowset() 或 findManyToManyRowset()）一起使用时，查询会尝试使用默认适配器中的模式执行，而不使用适当的模式在模型类中定义。

这是一个错误吗？如何强制 ZF 使用我在表类中定义的模式，而不是在默认 Db 适配器中定义为默认模式的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-15T02:15:13.930

我认为这与这个错误有关：http: [//framework.zend.com/issues/browse/ZF-1838](http://framework.zend.com/issues/browse/ZF-1838)

它已在上游修复，应该在下一个版本中可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-01-13T05:34:10.253

我认为您可以使用数据库视图表来合并来自 2 个模式的数据，然后使用 Zend Framework 从该表中获取数据。

# c# - NHibernate FlushMode 保存

> ID：432087
> 
> 赞同：4
> 
> 时间：2009-01-11T01:08:56.797
> 
> 标签：c#, nhibernate

我已将 NHibernate 会话上的 FlushMode 属性设置为 FlushMode.Never，但是当我调用 session.Save(User) 时，无论如何都会调用数据库。这是应该如何工作的吗？我认为它不应该在我调用 Flush() 之前进行插入。

编辑：我发现了问题，我将主键更改为 guid 并且它有效。是否有任何其他类型（即没有 guid 主键）可以使用？我宁愿有一个数字而不是一个指导......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-11T19:47:54.027

您使用的是本机生成器，对吗？

问题在于，由于生成 ID 的是 DB，NHibernate 需要往返来获取它。例如，对于服务器的身份字段，必须在 SCOPE_IDENTITY() 返回有效键之前执行实际的 INSERT 语句。安全地执行此操作的唯一方法是刷新会话。

作为 guid 和身份的替代方法，您可以尝试使用“增量”生成器来查看它是否符合您的需求： [http ://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html/mapping.html#mapping -declaration-id-generator](http://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html/mapping.html#mapping-declaration-id-generator)

您应该知道，如果您将应用程序集群化，或者您有一些其他进程或应用程序插入到同一个表中，那么这种方法将不可行。

PS：进一步阅读尝试[http://unhandled-exceptions.com/blog/index.php/2008/12/11/on-choosing-an-identity-type/](http://unhandled-exceptions.com/blog/index.php/2008/12/11/on-choosing-an-identity-type/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T01:16:29.777

我发现了问题，我使用身份作为主键。将其更改为 guid 有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T19:20:38.713

~~尝试将 session.Save(User) 包装在事务中并将 FlushMode 设置为 Commit。~~

~~这应该确保不会对数据库进行调用。~~

# c# - 正确使用 Lambda 查询

> ID：432090
> 
> 赞同：0
> 
> 时间：2009-01-11T01:10:32.707
> 
> 标签：c#, .net, linq, lambda

考虑以下代码：

```
 private static void WriteProcesses(StreamWriter sw, DateTime d) {
            sw.WriteLine("List of processes @ " + d.ToString());
            Process[] localAll = Process.GetProcesses().Where(o => o.ProcessName.ToLower() != "svchost");            
            if(localAll.Length > 0) {
                for(int i = 0; i < localAll.Length; i++) {                    
                    sw.WriteLine("      " + localAll[i].ProcessName);
                }
            }
        } 
```

但我得到一条红色波浪线说：

无法将类型 System.Collections.Generic.IEnumerable' 隐式转换为 'System.Diagnostics.Process[]'。存在显式转换（您是否缺少演员表？）

我尝试将数组更改为 List 但没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T01:17:00.977

改变

```
Process[] localAll = Process.GetProcesses().Where(o => o.ProcessName.ToLower() != "svchost"); 
```

到

```
Process[] localAll = Process.GetProcesses().Where(o => o.ProcessName.ToLower() != "svchost").ToArray(); 
```

`Where`正在返回一个`IEnumerable<Process>`您可以调用它`ToArray`以转换为 type 的数组`Process`。

或者，您可以枚举返回的`IEnumerable<Process>`那个`Where`。

```
var processes = Process.GetProcesses().Where(o => o.ProcessName.ToLower() != "svchost");
foreach (Process process in processes) {
    sw.WriteLine("      " + process.ProcessName);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T01:21:00.547

我认为您最好将其作为 IEnumerable 处理

```
 private static void WriteProcesses(StreamWriter sw, DateTime d) {
     sw.WriteLine("List of processes @ " + d.ToString());
     var localAll = Process.GetProcesses()
                           .Where(o => o.ProcessName.ToLower() != "svchost");            
     foreach(Process process in localAll) {                    
         sw.WriteLine("      " + process.ProcessName);
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T01:25:36.153

我会像这样重写你的代码：

```
 private static void WriteProcesses(StreamWriter sw, DateTime d) {
            sw.WriteLine("List of processes @ " + d.ToString());
            var localAll = Process.GetProcesses().Where(o => o.ProcessName.ToLower() != "svchost");            
            foreach(var local in localAll) {                    
                    sw.WriteLine("      " + local.ProcessName);
            }
        } 
```

`Where`您的问题来自于返回`IEnumerable`无法映射到数组的事实。但是您不需要使用数组，所以我已经使用它了。检查只是让我的`length`代码不太清楚，所以我也改为 a `foreach`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T01:16:55.203

如果您不想使用 ToArray()，请将 Process[] 更改为 var，然后将鼠标悬停在它上面以查看 Where 语句返回的类型。（或者只是悬停在 Where() 方法上，它会告诉你同样的事情）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-11T01:18:37.073

.Where 方法返回一个 IEnumerable，其中 T 是被过滤的类型。对于此示例，您需要在 Where 之后调用 .ToArray( ) 将集合转换为数组。

# c# - 使用 LinFu 生成动态代理

> ID：432100
> 
> 赞同：1
> 
> 时间：2009-01-11T01:16:34.910
> 
> 标签：c#, dynamic, proxy, linfu

我正在尝试为 LinFu 的接口构建动态代理。代理应该只实现接口定义的属性的 getter 方法，并从字典中返回一个值，其中键是属性名称。

[链接文本](http://code.google.com/p/linfu/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-18T09:59:00.853

尝试：

```
// The interceptor class must implement the IInterceptor interface
var yourInterceptor = new YourInterceptor();
var proxyFactory = new ProxyFactory();
IYourInterface proxy = proxyFactory.CreateProxy<IYourInterface>(yourInterceptor);
// Do something useful with the proxy here... 
```

# mysql - 使用 Zend_db_table 在 mySQL 中插入 time + n！

> ID：432103
> 
> 赞同：1
> 
> 时间：2009-01-11T01:17:28.260
> 
> 标签：mysql, zend-framework, zend-db, zend-db-table

$data = array ('next' => "NOW() + 5", 'interval' => $dom["USER"][0]["STATUSES_COUNT"][0]["data"], 'good' => $good, '尝试' => $p->tries + 1 ); $where = $service->getAdapter()->quoteInto('id = ?', $p->id);
$service->update($data, $where);

在 zend 和 mySQL 上使用 PHP 向数据库中插入一些东西。"next" => "NOW()" 不起作用。我可以将 CURRENT_TIMESTAMP 作为默认值，但我真正想要的是插入引用这一刻的时间戳，再加上一些时间。

我可以重写程序的某些部分以使用纯 php 日期（纯 mySQL 日期的替代）。不知道什么是最好的，或者我应该怎么做。你知道我如何使这个更新与 mySQL 一起工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T02:01:48.860

我用下一条语句解决了它，非常有用：

```
'next' => new Zend_Db_Expr('TIMESTAMPADD(MINUTE,1,NOW())'), 
```

# c# - 您更喜欢 C# 还是 Visual Basic .Net？

> ID：432106
> 
> 赞同：2
> 
> 时间：2009-01-11T01:18:07.980
> 
> 标签：c#, .net, vb.net

您认为其中一个比另一个有什么好处？据我所知，这只是偏好。我在 C# 方面的经验比在 Visual Basic 方面的经验要多得多，我想知道我是否应该在某些类型的项目中涉足 Visual Basic？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T01:23:56.610

VB4 是我的第一语言，而 VB6 是我最后一次接触它。我已经搬到 c# 并且不会考虑回去。VB 对我来说太胖太蓬松了（偏好）。

虽然所有的 .NET 语言都编译为 IL...

注意：c# 更接近于 java...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T01:25:59.447

我个人更喜欢 C#，我喜欢它的语法，而且我对这种语言感觉很舒服。

有人说[C# 程序员的薪水](http://www.sellsbrothers.com/news/showTopic.aspx?ixTopic=503)比 VB 程序员高，但我认为你应该尝试两种语言，看看哪种语言更好。

*   [C# 优于 VB.NET 的 10 大理由](http://www.vbrad.com/article.aspx?id=63)
*   [VB.NET 优于 C# 的 10 大理由](http://www.vbrad.com/article.aspx?id=65)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T01:23:45.627

如果你打算做任何[SSIS](http://msdn.microsoft.com/en-us/library/ms141026.aspx)，你需要了解 VB。这是我所知道的少数几个领域之一，在这些领域中，您选择哪种语言作为 SSIS 仅支持您为它编写的任何“集成”代码的 VB。

你说得对，因为所有 .NET 语言都被编译为 IL，所以这是一种偏好。所以选择你最舒服的一个，不要太担心。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-11T01:25:19.073

来自花括号的背景，我发现 c# 更容易阅读和编写。我发现 VB.Net 过于冗长，并且某些语法（我在看着你，数组）让我眼花缭乱。

我也对 VB.Net 中的后台编译感到沮丧，尤其是在大型项目中，它会使 IDE 无响应。

在我看来，VB.Net 相对于 C# 的唯一优势是可选参数。这些使某些互操作任务变得容易得多，但我认为 c# 将在 4.0 中获得它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-11T01:41:53.813

VB.NET

在我看来，创建 C# 只是为了将 Java 开发人员带到 .NET 的营销原因。

在 C# over VB 的工作市场上还有更多的开发人员工作。Visual Basic 从一开始就有一个糟糕的包装，因为它是一种解释型语言。回到计算机的早期，解释是糟糕而缓慢的。

最初，微软构建 VB 主要是为了让顾问能够快速有效地编写内部软件。

当我看到 C# 时，我感到畏缩，但这些天，我用 JavaScript 编写的次数超过了任何其他语言，而且我喜欢它。

VB 的语言关键字对我来说比 Imports vs Using 之类的 C# 更有意义。对于声明，我不喜欢在变量名称之前有对象类型。并且似乎 C# 有许多带有括号的隐藏规则，而开发人员甚至阅读 C# 都必须知道的东西。而 VB 是直截了当的，并且没有疯狂的语法，流动性非常好。

# python - 是否有一个 NumPy 函数来返回数组中某物的第一个索引？

> ID：432112
> 
> 赞同：573
> 
> 时间：2009-01-11T01:21:39.640
> 
> 标签：python, arrays, numpy

我知道 Python 列表有一种方法可以返回某物的第一个索引：

```
>>> l = [1, 2, 3]
>>> l.index(2)
1 
```

NumPy 数组有类似的东西吗？

* * *

## 回答 #1

> 赞同：643
> 
> 时间：2009-01-11T03:12:03.070

是的，给定一个数组 ,`array`和一个`item`要搜索的值，您可以[`np.where`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)用作：

```
itemindex = numpy.where(array==item) 
```

结果是一个元组，首先是所有行索引，然后是所有列索引。

例如，如果一个数组是二维的，并且它在两个位置包含您的项目，那么

```
array[itemindex[0][0]][itemindex[1][0]] 
```

将等于您的项目，因此将是：

```
array[itemindex[0][1]][itemindex[1][1]] 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2009-06-25T15:01:00.150

如果您**只需要一个值**的第一次出现的索引，您可以使用`nonzero`（或`where`，在这种情况下相当于同一件事）：

```
>>> t = array([1, 1, 1, 2, 2, 3, 8, 3, 8, 8])
>>> nonzero(t == 8)
(array([6, 8, 9]),)
>>> nonzero(t == 8)[0][0]
6 
```

**如果您需要许多值**中的每一个的第一个索引，您显然可以重复上述操作，但有一个技巧可能更快。下面找到每个*子序列*的第一个元素的索引：

```
>>> nonzero(r_[1, diff(t)[:-1]])
(array([0, 3, 5, 6, 7, 8]),) 
```

请注意，它找到了 3s 的两个子序列和 8s 的两个子序列的开头：

[ **1、1、1、2、2、3、8、3、8、8** ] _ **_** _ **_** _ **_** _ **_** _ **_**

所以它与查找每个值的第一次*出现*略有不同。在您的程序中，您可以使用排序版本`t`来获得您想要的：

```
>>> st = sorted(t)
>>> nonzero(r_[1, diff(st)[:-1]])
(array([0, 3, 5, 7]),) 
```

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2014-06-02T12:47:58.183

您还可以将 NumPy 数组转换为空中列表并获取其索引。例如，

```
l = [1,2,3,4,5] # Python list
a = numpy.array(l) # NumPy array
i = a.tolist().index(2) # i will return index of 2
print i 
```

它将打印 1。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2017-01-10T21:19:57.037

只是为了添加一个非常高效且方便的[numba](/questions/tagged/numba "显示标记为“numba”的问题")替代方案，[`np.ndenumerate`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndenumerate.html)以查找第一个索引：

```
from numba import njit
import numpy as np

@njit
def index(array, item):
    for idx, val in np.ndenumerate(array):
        if val == item:
            return idx
    # If no item was found return None, other return types might be a problem due to
    # numbas type inference. 
```

这非常快，并且可以*自然地处理多维数组*：

```
>>> arr1 = np.ones((100, 100, 100))
>>> arr1[2, 2, 2] = 2

>>> index(arr1, 2)
(2, 2, 2)

>>> arr2 = np.ones(20)
>>> arr2[5] = 2

>>> index(arr2, 2)
(5,) 
```

这可能比使用or的任何方法**快得多**（因为它使操作短路）。`np.where``np.nonzero`

* * *

然而[`np.argwhere`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.argwhere.html)，也可以*优雅地*处理多维数组（您需要手动将其转换为元组**并且**它没有短路），但如果找不到匹配项，它将失败：

```
>>> tuple(np.argwhere(arr1 == 2)[0])
(2, 2, 2)
>>> tuple(np.argwhere(arr2 == 2)[0])
(5,) 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-05-06T14:12:30.553

`l.index(x)`返回最小的*i*，使得*i*是列表中第一次出现 x 的索引。

可以安全地假设`index()`Python 中的函数已实现，以便在找到第一个匹配项后停止，这会导致最佳平均性能。

要在 NumPy 数组中的第一个匹配项后查找停止的元素，请使用迭代器 ( [ndenumerate](https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndenumerate.html) )。

```
In [67]: l=range(100)

In [68]: l.index(2)
Out[68]: 2 
```

NumPy 数组：

```
In [69]: a = np.arange(100)

In [70]: next((idx for idx, val in np.ndenumerate(a) if val==2))
Out[70]: (2L,) 
```

请注意，如果找不到元素，这两种方法都会返回错误`index()`。`next`使用`next`，可以使用第二个参数返回一个特殊值，以防找不到元素，例如

```
In [77]: next((idx for idx, val in np.ndenumerate(a) if val==400),None) 
```

NumPy 中还有其他函数（`argmax`、`where`和`nonzero`）可用于查找数组中的元素，但它们都有一个缺点，即遍历整个数组来查找*所有*出现的元素，因此没有针对查找第一个元素进行优化。还要注意`where`并`nonzero`返回数组，因此您需要选择第一个元素来获取索引。

```
In [71]: np.argmax(a==2)
Out[71]: 2

In [72]: np.where(a==2)
Out[72]: (array([2], dtype=int64),)

In [73]: np.nonzero(a==2)
Out[73]: (array([2], dtype=int64),) 
```

### 时间比较

只需检查对于大型数组，*当搜索项位于数组的开头*（`%timeit`在 IPython shell 中使用）时，使用迭代器的解决方案会更快：

```
In [285]: a = np.arange(100000)

In [286]: %timeit next((idx for idx, val in np.ndenumerate(a) if val==0))
100000 loops, best of 3: 17.6 µs per loop

In [287]: %timeit np.argmax(a==0)
1000 loops, best of 3: 254 µs per loop

In [288]: %timeit np.where(a==0)[0][0]
1000 loops, best of 3: 314 µs per loop 
```

* * *

这是一个开放的[NumPy GitHub 问题](https://github.com/numpy/numpy/issues/2269)。

另请参阅：[Numpy：快速找到第一个值索引](https://stackoverflow.com/q/7632963/2314737)

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2009-01-11T03:52:49.850

如果您打算将其用作其他内容的索引，则如果数组是可广播的，则可以使用布尔索引；您不需要显式索引。最简单的方法是简单地基于真值进行索引。

```
other_array[first_array == item] 
```

任何布尔运算都有效：

```
a = numpy.arange(100)
other_array[first_array > 50] 
```

非零方法也接受布尔值：

```
index = numpy.nonzero(first_array == item)[0][0] 
```

两个零用于索引元组（假设 first_array 是 1D），然后是索引数组中的第一项。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2018-04-17T10:28:52.353

对于一维**排序**数组，使用返回 NumPy 整数（位置）的[numpy.searchsorted](https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.searchsorted.html#numpy.searchsorted)会更加简单和高效 O(log(n) )。例如，

```
arr = np.array([1, 1, 1, 2, 3, 3, 4])
i = np.searchsorted(arr, 3) 
```

只要确保数组已经排序

还要检查返回的索引 i 是否实际上包含搜索的元素，因为 searchsorted 的主要目标是找到应该插入元素以保持顺序的索引。

```
if arr[i] == 3:
    print("present")
else:
    print("not present") 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-01-11T02:04:27.730

要根据任何标准编制索引，您可以执行以下操作：

```
In [1]: from numpy import *
In [2]: x = arange(125).reshape((5,5,5))
In [3]: y = indices(x.shape)
In [4]: locs = y[:,x >= 120] # put whatever you want in place of x >= 120
In [5]: pts = hsplit(locs, len(locs[0]))
In [6]: for pt in pts:
   .....:         print(', '.join(str(p[0]) for p in pt))
4, 4, 0
4, 4, 1
4, 4, 2
4, 4, 3
4, 4, 4 
```

这里有一个快速函数来完成 list.index() 所做的事情，除非没有找到它不会引发异常。当心——这在大型阵列上可能非常慢。如果您愿意将其用作方法，您可能可以将其修补到数组上。

```
def ndindex(ndarray, item):
    if len(ndarray.shape) == 1:
        try:
            return [ndarray.tolist().index(item)]
        except:
            pass
    else:
        for i, subarray in enumerate(ndarray):
            try:
                return [i] + ndindex(subarray, item)
            except:
                pass

In [1]: ndindex(x, 103)
Out[1]: [4, 0, 3] 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-02-05T07:41:00.187

对于一维数组，我建议使用`np.flatnonzero(array == value)[0]`，它等效于两者`np.nonzero(array == value)[0][0]`，`np.where(array == value)[0][0]`但避免了拆箱 1 元素元组的丑陋。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-01-11T01:46:53.507

NumPy 中有很多操作可以放在一起来实现这一点。这将返回等于 item 的元素索引：

```
numpy.nonzero(array - item) 
```

然后，您可以获取列表的第一个元素来获取单个元素。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-11-04T15:17:58.843

从 np.where() 中选择第一个元素的另一种方法是将生成器表达式与 enumerate 一起使用，例如：

```
>>> import numpy as np
>>> x = np.arange(100)   # x = array([0, 1, 2, 3, ... 99])
>>> next(i for i, x_i in enumerate(x) if x_i == 2)
2 
```

对于二维数组，可以这样做：

```
>>> x = np.arange(100).reshape(10,10)   # x = array([[0, 1, 2,... 9], [10,..19],])
>>> next((i,j) for i, x_i in enumerate(x) 
...            for j, x_ij in enumerate(x_i) if x_ij == 2)
(0, 2) 
```

这种方法的优点是它在找到第一个匹配项后停止检查数组的元素，而 np.where 检查所有元素是否匹配。如果数组早期有匹配，生成器表达式会更快。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-07-12T14:51:55.327

numpy_indexed包（免责声明，我是它的作者）包含 numpy.ndarray 的 list.index 的矢量化等效项[；](https://github.com/EelcoHoogendoorn/Numpy_arraysetops_EP)那是：

```
sequence_of_arrays = [[0, 1], [1, 2], [-5, 0]]
arrays_to_query = [[-5, 0], [1, 0]]

import numpy_indexed as npi
idx = npi.indices(sequence_of_arrays, arrays_to_query, missing=-1)
print(idx)   # [2, -1] 
```

该解决方案具有矢量化性能，可推广到 ndarray，并具有各种处理缺失值的方法。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-06-17T23:13:06.907

之前没有提到的另一个选项是 bisect 模块，它也适用于列表，但需要预先排序的列表/数组：

```
import bisect
import numpy as np
z = np.array([104,113,120,122,126,138])
bisect.bisect_left(z, 122) 
```

产量

```
3 
```

当数组中不存在您要查找的数字时，bisect 也会返回结果，以便可以将数字插入正确的位置。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-05-12T04:46:47.430

numpy 内置了一种相当惯用和矢量化的方法来执行此操作。它使用 np.argmax() 函数的一个怪癖来实现这一点——如果许多值匹配，它返回第一个匹配的索引。诀窍在于，对于布尔值，只有两个值：True (1) 和 False (0)。因此，返回的索引将是第一个 True 的索引。

对于提供的简单示例，您可以看到它与以下内容一起使用

```
>>> np.argmax(np.array([1,2,3]) == 2)
1 
```

一个很好的例子是计算桶，例如用于分类。假设您有一个切点数组，并且您想要与数组的每个元素对应的“桶”。该算法是计算`cuts`where的第一个索引（在用`x < cuts`填充之后）。我可以使用广播来广播比较，然后沿-broadcasted 轴应用 argmax。`cuts``np.Infitnity``cuts`

```
>>> cuts = np.array([10, 50, 100])
>>> cuts_pad = np.array([*cuts, np.Infinity])
>>> x   = np.array([7, 11, 80, 443])
>>> bins = np.argmax( x[:, np.newaxis] < cuts_pad[np.newaxis, :], axis = 1)
>>> print(bins)
[0, 1, 2, 3] 
```

正如预期的那样，来自的每个值`x`都落入顺序箱之一，具有明确定义且易于指定的边缘情况行为。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-04-10T01:42:21.143

**注意：这是针对 python 2.7 版本的**

您可以使用 lambda 函数来处理该问题，**它适用于 NumPy 数组和列表。**

```
your_list = [11, 22, 23, 44, 55]
result = filter(lambda x:your_list[x]>30, range(len(your_list)))
#result: [3, 4]

import numpy as np
your_numpy_array = np.array([11, 22, 23, 44, 55])
result = filter(lambda x:your_numpy_array [x]>30, range(len(your_list)))
#result: [3, 4] 
```

你可以使用

```
result[0] 
```

获取过滤元素的第一个索引。

对于 python 3.6，使用

```
list(result) 
```

代替

```
result 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-18T11:24:11.297

**使用 ndindex**

样本数组

```
arr = np.array([[1,4],
                 [2,3]])
print(arr)

...[[1,4],
    [2,3]] 
```

创建一个空列表来存储索引和元素元组

```
 index_elements = []
 for i in np.ndindex(arr.shape):
     index_elements.append((arr[i],i)) 
```

将元组列表转换为字典

```
 index_elements = dict(index_elements) 
```

键是元素，值是它们的索引 - 使用键来访问索引

```
 index_elements[4] 
```

输出

```
 ... (0,1) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-04-03T08:47:29.560

**找到另一个带有循环的解决方案：**

```
new_array_of_indicies = []

for i in range(len(some_array)):
  if some_array[i] == some_value:
    new_array_of_indicies.append(i) 
```

# python - 何时删除用户的会话

> ID：432115
> 
> 赞同：1
> 
> 时间：2009-01-11T01:23:55.423
> 
> 标签：python, session

我正在编写一个只有经过身份验证的用户才能使用的 webapp。在每个用户会话期间将创建一些临时数据库和日志文件。会话结束后，我想删除所有这些临时文件。

显然，注销或窗口关闭事件足以关闭会话，但在某些情况下，用户可能会在完成后很长时间保持浏览器打开。

另一种方法是在日常维护期间为用户会话计时或删除临时文件。

你怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T01:28:21.623

用户会话应该有一个超时值，并且应该在超时到期或用户注销时关闭。注销是执行此操作的明显时机，并且需要设置超时，以防用户在未注销的情况下离开您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T02:16:41.713

清理数据库中任何过期会话数据的 cron 作业是一件好事。根据您的会话持续多长时间以及您的数据库有多大，您可能希望每天清理一次以上。但是每天一次清理通行证通常是可以的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T02:01:18.593

在以下期间删除用户的会话：

1) 注销

2）自动超时（超时时长可以通过web.config设置）

3）作为您已经运行的任何其他日常维护方法的一部分，删除在某个定义的时间段内未访问的任何会话信息（可能比您的自动超时长度短，因为如果它是相同的长度，它应该已经是已搞定）

# c# - 从 NHibernate 配置文件生成数据库

> ID：432118
> 
> 赞同：9
> 
> 时间：2009-01-11T01:25:29.790
> 
> 标签：c#, nhibernate

是否可以从 NHibernate 配置文件生成数据库表和 c# 类？之后，是否可以非破坏性地更改配置文件并更新表和配置文件？

你推荐任何工具来做到这一点？（最好是免费的……）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-08-09T10:46:39.083

正如 Joachim 所提到的，您正在寻找的是“hbm2ddl.auto”设置。

您可以通过如下代码设置它：

```
var cfg = new NHibernate.Cfg.Configuration();
cfg.SetProperty("hbm2ddl.auto", "create");
cfg.Configure(); 
```

你也可以在你的 App.config 文件中设置它：

```
 <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
        <property name="hbm2ddl.auto">create</property> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T01:47:15.113

是的，可以从 NHibernate 配置文件生成数据库表和 C# 类。让我在这里用这个例子来解释一下。

1：地址.hbm.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<hibernate-mapping
    xmlns="urn:nhibernate-mapping-2.0"
    default-cascade="none">

    <class
        name="Your.Domain.AddressImpl, Your.Domain"
        table="[ADDRESS]"
        dynamic-insert="true"
        dynamic-update="true"
        lazy="true">

        <id name="Id" type="long" unsaved-value="0">
            <column name="ID" sql-type="NUMERIC(19,0)"/>
            <generator class="native">            </generator>
        </id>

        <property name="Address1" type="string">
            <column name="ADDRESS1" not-null="true" unique="false" sql-type="VARCHAR(100)"/>
        </property>

        <property name="Address2" type="string">
            <column name="ADDRESS2" not-null="true" unique="false" sql-type="VARCHAR(100)"/>
        </property>

        <property name="City" type="string">
            <column name="CITY" not-null="true" unique="false" sql-type="VARCHAR(100)"/>
        </property>

        <property name="State" type="string">
            <column name="STATE" not-null="true" unique="false" sql-type="VARCHAR(100)"/>
        </property>

        <property name="Zipcode" type="string">
            <column name="ZIPCODE" not-null="true" unique="false" sql-type="VARCHAR(100)"/>
        </property>

    </class>
</hibernate-mapping> 
```

第 2 步：只需查看配置文件，您的 Address 对象看起来如下所示

```
using System;

namespace Your.Domain
{

    public partial class Address
    {

        #region Attributes and Associations

        private string _address1;
        private string _address2;
        private string _city;
        private long _id;
        private string _state;
        private string _zipcode;

        #endregion

        #region Properties

        /// <summary>
        /// 
        /// </summary>
        public virtual string Address1
        {
            get { return _address1; }
            set { this._address1 = value; }
        }

        /// <summary>
        /// 
        /// </summary>
        public virtual string Address2
        {
            get { return _address2; }
            set { this._address2 = value; }
        }

        /// <summary>
        /// 
        /// </summary>
        public virtual string City
        {
            get { return _city; }
            set { this._city = value; }
        }

        /// <summary>
        /// 
        /// </summary>
        public virtual long Id
        {
            get { return _id; }
            set { this._id = value; }
        }

        /// <summary>
        /// 
        /// </summary>
        public virtual string State
        {
            get { return _state; }
            set { this._state = value; }
        }

        /// <summary>
        /// 
        /// </summary>
        public virtual string Zipcode
        {
            get { return _zipcode; }
            set { this._zipcode = value; }
        }

        #endregion 
    }
} 
```

第 3 步：如果您再次查看“列”名称属性及其数据类型，它实际上是指名为“地址”的实际后端数据库表。

还有大量的工具可以帮助您根据不同的输入（例如 UML、或实际数据库模式等）为您生成所有这些工件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T16:09:05.403

检查“hbm2ddl.auto”设置（在配置或 NHibernate.Cfg.Configuration 中）。使用“创建”，您可以从映射中重新创建整个数据库架构，而“更新”设置应该只更新您的架构。

# linq - C# 从列表中排除相关值 (LINQ)

> ID：432127
> 
> 赞同：1
> 
> 时间：2009-01-11T01:28:59.797
> 
> 标签：linq, listbox

在 linQ to SQL中“**加入**”是否有完全相反的动作？我只想显示不满足查询内部**连接**约束的结果。我只想在一个查询中完成。这是它的使用示例（[http://img165.imageshack.us/img165/4940/liststj3.jpg](http://img165.imageshack.us/img165/4940/liststj3.jpg)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T01:35:19.597

Bilal Haidar[解释](http://bhaidar.net/cs/archive/2007/08/01/left-outer-join-in-linq-to-sql.aspx)了如何进行左外连接。使用此策略并添加 where 条件来检查右侧对象在何处为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T02:48:38.530

法尔瓦雷斯的角色：

```
Roles.Where(r => r.Users.Any(u => u.Name == "falvarez")); 
```

法尔瓦雷斯没有的角色

```
Roles.Where(r => !r.Users.Any(u => u.Name == "falvarez")); 
```

将每个角色投影到一个知道 falvarez 是否属于该角色的对象中

```
Roles.Select(r => new
  {
    FalvarezInRole = r.Users.Any(u => u.Name == "falvarez"),
    Role = r
  }); 
```

在角色对象没有用户属性的情况下，只需将按角色过滤用户的查询替换为 r.Users

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T01:32:43.613

在这里查看邮编：

[http://www.codeplex.com/nextension](http://www.codeplex.com/nextension)

编辑：做“where !Collection.Contains(s.ID)”可能会更好...

# c++ - C++ 中的多重继承导致难以覆盖通用功能

> ID：432143
> 
> 赞同：5
> 
> 时间：2009-01-11T01:46:07.580
> 
> 标签：c++, inheritance, class

在 C++ 物理模拟中，我有一个名为 Circle 和 Square 的类。这些是 Shapes，并且有一个名为 push() 的方法，可以对其施加力。然后是 Circle 的一种特殊情况，称为 SpecialCircle，其中 push() 应该表现出稍微不同的属性。但实际上，还有 SpecialSquare() 应该表现出相同的力属性。所以我想要一个名为 Shape 的抽象基类来处理圆形和正方形，但我也想要一个名为 Special 的抽象基类，它将特殊属性应用于 force()。

设计这种类结构的最佳方法是什么？

到目前为止，我有：

```
class Shape {
    virtual void push();
};

class Circle : public Shape {};

class Square : public Shape {};

class Special {
    virtual void push();
};

class SpecialCircle : public Circle, Special {};

class SpecialSquare : public Square, Special {}; 
```

当然，上面不会编译，因为 Special::push() 和 Shape::push() 冲突。正如预期的那样，我收到“错误：对成员 'push' 的请求不明确”。

如何重新组织我的类结构，以便 Circle 和 Square 可以彼此共享某些属性，但 SpecialCircle 和 SpecialSquare 仍然可以从 Shape 继承，并且还可以从 Special 继承修改后的功能？

谢谢。

ps.这是钻石继承问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-11T01:58:59.160

另一种解决方案（它可能符合您的需求，也可能不符合您的需求，这取决于您的实施细节）：

*   拥有 Behavior 类，并让 NormalBehavior 和 SpecialBehavior 继承自它。
*   拥有 Shape 类，并让 Square 和 Circle 继承自它。让 Shape 成为一个聚合类型，带有一个 Behavior 成员（即，您将一个 Behavior 对象传递给各种 Shape 构造函数）。换句话说，让一个形状有一个行为。
*   将形状行为的实际差异委托给行为层次结构的方法。

相反，您可以：

*   拥有类 PhysicalObject，并让 NormalObject 和 SpecialObject 继承自它；
*   拥有Shape类，并让Square和Circle继承自它；
*   让 PhysicalObject 有一个 Shape。

更喜欢聚合而不是继承。这是[桥模式](http://en.wikipedia.org/wiki/Bridge_pattern)的一个应用。这种策略相对于 Square、SpecialSquare、Circle 和 SpecialCircle 的优势在于，明天您必须添加 Rectangle、Hexagon 等，并且对于您添加的每个形状，您必须实现*两个*类（重复代码是邪恶的）；在我看来，这是 Bridge 解决的真正问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-11T02:17:47.127

据说软件中的每一个问题都可以通过增加一个额外的间接层来解决。

Herb Sutter 有一篇关于如何解决问题的优秀文章：[多重继承 - 第三部分](http://www.gotw.ca/gotw/039.htm)

简而言之，您使用中间类来“重命名”虚函数。正如赫伯所说：

> 重命名虚拟功能
> 
> 如果两个继承的函数有不同的签名，就没有问题：我们就像往常一样独立地覆盖它们。那么，诀窍就是以某种方式更改两个继承函数中的至少一个的签名。
> 
> 更改基类函数签名的方法是创建一个从基类派生的中间类，声明一个新的虚函数，并覆盖继承的版本以调用新函数

这是一个使用您的类的长示例：

```
class Shape {
public:
    virtual void push() = 0;
};

class Circle : public Shape 
{
public:
    void push() {
        printf( "Circle::push()\n");
    }
};

class Square : public Shape 
{
public:
    void push() {
        printf( "Square::push()\n");
    }
};

class Special {
public:
    virtual void push() = 0;
};

class Circle2: public Circle
{
public:
    virtual void pushCircle() = 0;
    void push() {
        pushCircle();
    }
};

class Square2: public Square
{
public:
    virtual void pushSquare() = 0;
    void push() {
        pushSquare();
    }
};

class Special2 : public Special
{
public:
    virtual void pushSpecial() = 0;
    void push() {
        pushSpecial();
    }
};

class SpecialCircle : public Circle2, public Special2 
{
public:
    void pushSpecial() {
        printf( "SpecialCircle::pushSpecial()\n");
    }
    void pushCircle() {
        printf( "SpecialCircle::pushCircle()\n");
    }

};

class SpecialSquare : public Square2, public Special2 
{
public:
    void pushSpecial() {
        printf( "SpecialSquare::pushSpecial()\n");
    }
    void pushSquare() {
        printf( "SpecialSquare::pushSquare()\n");
    }

};

int main( int argc, char* argv[])
{
    SpecialCircle sc;
    SpecialSquare ss;

    // sc.push();   // can't be called - ambiguous
    // ss.push();
    sc.pushCircle();
    ss.pushSquare();

    Circle* pCircle = &sc;
    pCircle->push();

    Square* pSquare = &ss;
    pSquare->push();

    Special* pSpecial = &sc;
    pSpecial->push();

    pSpecial = &ss;
    pSpecial->push();

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T03:23:02.767

与其考虑通过继承来重用代码，不如使用 mixins 为您提供所需的代码重用，而不会出现多重继承的问题。

如果您不熟悉该技术，请在 SO 或 Google 上进行搜索。确保同时搜索“mixin”和“Curiously Recurring Template Pattern”。周围有很多很棒的文章可以帮助您入门。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T11:27:29.497

当您必须使用相同的方法从多个接口继承时，编译器无法判断您要调用哪个接口，您可以通过覆盖此类方法并调用您想要的方法来解决此问题。

```
class SpecialCircle : public Circle, Special {
  public:
    virtual void push() { Special::push(); }
};
class SpecialSquare : public Square, Special {
  public:
    virtual void push() { Special::push(); }
}; 
```

但在这种情况下，我认为正确的 OO 方法是在其自己的类中排除推送行为，就像 Federico Ramponi 所建议的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-11T02:06:14.373

有一个来自 Shape 的 SpecialShape 和来自 SpecialShape 的 SpecialCircle 和 SpecialSquare。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-11T02:28:28.710

那么，如果特殊圆和普通圆都可以施力，而特殊圆还有另一种施加特殊力的方法，为什么不有两个接口和两个方法呢？

```
struct Applicable {
    virtual ~Applicable() { }

    // if it applies force, better be explicit with naming it.
    virtual void applyForce() = 0;
};

struct SpecialApplicable {
    virtual ~SpecialApplicable() { }

    virtual void applySpecialForce() = 0;
};

struct Shape {
    virtual ~Shape() { }
    Size getSize();
    Point getPosition();
    // ...
};

struct Circle : Shape, Applicable {
    virtual void applyForce() { /* ... */ }
}

struct SpecialCircle : Circle, SpecialApplicable {
    virtual void applySpecialForce() { /* .... */ } 
}; 
```

如果同时存在特殊的和普通的应用方法（类的名称`SpecialCircle`- 暗示）没有意义，那么为什么不这样做：

```
struct Circle : Shape, Applicable {
    virtual void applyForce() { /* ... */ }
}

struct SpecialCircle : Circle {
    // applies force, but specially
    virtual void applyForce() { /* .... */ } 
}; 
```

您也可以将其`applyForce`放入 Shape 类。它还取决于使用这些类的环境。在任何情况下，您真正​​应该避免的是在两个不同的基格中出现的两个基类中使用相同的方法。因为那必然会导致这样的模棱两可的问题。*菱形*继承是当您使用虚拟继承时。我相信在 stackoverflow 上还有其他很好的答案可以解释这一点。它不适用于您的问题，因为该方法出现在两个不同类型的基类子对象中会产生歧义。（它只解决基类具有相同类型的情况。在这种情况下，它将合并基类并且只包含一个基类子对象 - 通过虚拟继承继承）

# javascript - 跨浏览器 AJAX 功能动态加载 HTML

> ID：432144
> 
> 赞同：6
> 
> 时间：2009-01-11T01:46:38.560
> 
> 标签：javascript, ajax

我正在寻找一个 AJAX 函数来动态请求 HTML 页面。我已经找到了以下内容：

```
function ajaxinclude(url) 
{
   var page_request = false

   if (window.XMLHttpRequest) // if Mozilla, Safari etc
      page_request = new XMLHttpRequest()
   else if (window.ActiveXObject) // if IE
   { 

     try {
       page_request = new ActiveXObject("Msxml2.XMLHTTP")
     } 
     catch (e){
       try{
         page_request = new ActiveXObject("Microsoft.XMLHTTP")
       }
       catch (e){}
     }
   }
   else
     return false

   page_request.open('GET', url, false) //get page synchronously 
   page_request.send(null)
   return page_request.responseText;
 } 
```

它在 Firefox 和 Chrome 中运行良好，但在 IE 中失败，如下行：

```
page_request.open('GET', url, false) 
```

是否有更好的可用功能保证完全跨浏览器兼容？

**编辑：**感谢所有伟大的建议......最后，我决定不在这里重新发明轮子。我忘记提及的一件事是，我还需要它定期更新……尽管我已经弄清楚了，所以我认为这没有什么不同。但后来我在原型中发现了很棒的 Ajax.PeriodicUpdater() 方法，并大大改变了我的想法。我刚刚从 50 LOC 解决方案变成了大约 4 行 :)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-01-11T02:55:47.173

我不得不同意，不要重新发明轮子，或者在这种情况下，AJAX。

JQuery 和 Prototype 在让您不必处理跨浏览器支持方面做得非常出色，并且大大简化了 Javascript 类型编程。我首先进入了 JQuery，所以我偏向于它，从我所看到的库来看，它有点小（阅读：在浏览器中更快），但我相信 Prototype 已经存在了更长的时间，并且有大量的插件和示例在那里。默认情况下，Ruby on Rails 也使用 Prototype。有趣的是，两者中的代码看起来非常相似，并且几乎不需要重写即可更改库。

[JQuery 教程](http://docs.jquery.com/Tutorials)<-- 直接进入 AJAX 部分

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-01-11T02:34:24.877

或者，如果您不需要整个框架，也可以试试这个：[http ://www.hunlock.com/blogs/The_Ultimate_Ajax_Object](http://www.hunlock.com/blogs/The_Ultimate_Ajax_Object)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-11T01:53:56.237

我建议为此功能使用许多不同的 javascript 框架中的任何一个，而不是重新发明它。有[jQuery](http://jquery.com)、[Prototype/Scriptaculous](http://www.prototypejs.com)、[MooTools](http://www.mootools.net)、[Dojo](http://www.dojotoolkit.org)等等。所有这些都为您正在做的事情提供跨浏览器支持。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-12T03:56:28.783

我推荐jQuery，但也有一个非常轻量级的解决方案：[XHConn](http://xkr.us/code/javascript/XHConn/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-11T01:54:15.223

如果我是你，我会使用 JQuery 之类的工具包，以确保它尽可能兼容。但是，无论如何，您都将不得不处理它不起作用的情况。不要忘记，有很多人在没有 javascript 支持的情况下浏览。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-11T10:33:11.417

您可能使用脚本不支持的 IE 版本。在您的函数之前添加[此代码片段](https://stackoverflow.com/questions/415160/best-method-of-instantiating-an-xmlhttprequest-object#416191)，再试一次。`ajaxinclude()`然后可以缩短为

```
function ajaxinclude(url)  {
    var req = new XMLHttpRequest;
    if(!req)
        return null;

    req.open('GET', url, false); // get page synchronously 
    req.send();
    return req.responseText;
} 
```

顺便说一句：我通常不喜欢使用框架 - 幕后发生了太多的魔法让我感到舒服......

# sql-server - 如何确保在多对多关系中删除冗余数据

> ID：432160
> 
> 赞同：0
> 
> 时间：2009-01-11T01:55:48.807
> 
> 标签：sql-server, sql-server-2008, many-to-many

我正在尝试确保在没有更多使用级联删除的引用时自动删除某些数据。我将使用基于 Stack Overflow的*假数据库进行解释。*

我有一张`Post`桌子。每个帖子都有零到多个标签。

所以它应该看起来像：

> 发布 <-> PostTags <-> 标签

例如。

> 帖子 1 有标签“A”、“B”、“C” 帖子 2 有标签“C”、“D”。

现在，我正在做的是，当我删除帖子 2 的所有标签（例如`DELETE FROM PostTags WHERE PostId = 2`）时，我希望标签 'D' 也被删除，因为如果没有其他人引用它。我认为级联删除会处理这个问题，但当然只有当你从`Tag->PostTags`or级联下来时`Post->PostTags`。

我不知道如何处理这个。

恐怕人们会建议使用触发器:(（系统的额外复杂性）。

想法？

注意：数据库是 MS Sql2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T02:19:38.837

不幸的是，您将无法在此处使用级联。当您具有多对多关系时，级联不起作用，因为您不会有一个引用子级的单一父级（在这种情况下，您有多个可以引用标签表的 PostTags 条目）。

触发器将是执行此操作的一种方法，但我不推荐它。相反，我建议在您的数据层中，删除 PostTags 表中的条目后，删除不再引用的标签。如果您有一个删除条目的存储过程，您可能需要考虑在那里执行此操作（这样做也相对简单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-23T20:22:58.383

我认为您必须在您的 Posts 表上使用 on delete 触发器，该触发器检查被删除的帖子的标签，如果它们没有被引用（在 PostTags 表中），则将其删除。

在删除您的帖子之前，请保存此记录集：

```
SELECT tagID, count(*) from PostsTags WHERE postId = 2 group by tagID; 
```

然后，在您删除它之后，循环遍历此记录集，如果 count(*) 为 = 1，则删除该标签。

# c# - C# 使用 String.IsNullOrEmpty 切换

> ID：432161
> 
> 赞同：17
> 
> 时间：2009-01-11T01:56:30.460
> 
> 标签：c#, string, switch-statement, semantics

是否可以在 C# 中有一个开关来检查值是 null 还是空而不是 "" 但是`String.Empty`？我知道我可以这样做：

```
switch (text)
{
    case null:
    case "":
        break;
} 
```

有没有更好的东西，因为我不想有大量的 IF 语句？

我正在尝试替换：

```
if (String.IsNullOrEmpty(text))
    blah;
else if (text = "hi")
    blah 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-01-11T02:13:12.127

我建议如下：

```
switch(text ?? String.Empty)
{
    case "":
        break;
    case "hi":
        break;
} 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-01-11T03:23:25.933

您的示例`switch`语句有什么问题？

```
switch (text)
{
    case null:
    case "":
        foo();
        break;
    case "hi":
        bar();
        break;
} 
```

它有效（出于某种让我感到惊讶的原因 - 我认为它会抱怨或崩溃`null`）并且很清楚。

就此而言，您为什么担心`String.Empty`？我在这里遗漏了一些东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-11T02:05:00.287

怎么样

```
if (string.isNullOrEmpty(text))
{
   //blah
}
else
{
 switch (text)
 {
     case "hi":
 } 
```

}

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-01-11T02:17:40.840

从以下[文档](http://msdn.microsoft.com/en-us/library/system.string.empty(VS.80).aspx)：`String.Empty`

> 该字段的值是长度为零的字符串“”。

`""`我将此解释为和之间没有区别`String.Empty`。你为什么要区分它们？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-11T05:45:26.207

空字符串是 ""，它等于 String.Empty。您*可以*在 case 语句中放入“”而不是“String.Empty”的原因是“Empty”是“String”类的字段，而“”实际上是一个常量值。

在某些情况下允许使用常量值，String.Empty 是一个字段，可以在运行时更改。（在这种情况下，它将保持不变，但并非每个类的所有静态字段都是常量值。）

在“if”的情况下，该条件在运行时进行评估，并且 if*不需要*常量值。

我希望这能解释原因。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-10-02T13:54:26.620

我刚刚注意到的是，您可以**结合 if/else 和 switch 语句！**在需要检查先决条件时非常有用。

```
if (string.IsNullOrEmpty(text))
{
    //blah
}
else switch (text)
{
    case "hi":
        Console.WriteLine("How about a nice game of chess?");
        break;
    default:
        break;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-12-10T17:11:33.307

借助新的 c# 功能，您可以使用`switch expression`语法

```
 text switch
       {
           "" or null => "a",
           _ => "b"
       }; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-08T07:02:13.160

```
string StrMode;
if (!string.IsNullOrEmpty(StrMode))
{  
    switch (StrMode.Trim())
    {
        case "Souse":
        {
             //Statement Eg:  
             MesssageBox.Show("Souse");
             break;
        }

        case "Company Agent":
        {
             //Statement Eg:
             MesssageBox.Show("Souse");
             break; 
        }

        default:
             return;
    }
} 
```

# php - 有人有使用 php/mysql 的开发/登台/部署工作流程吗？

> ID：432162
> 
> 赞同：18
> 
> 时间：2009-01-11T01:57:01.113
> 
> 标签：php, mysql, workflow, staging

我正在考虑一个很好的 php/mysql web 开发工作流程。

有人有一些提示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-11T03:46:48.443

这是我们所做的：

1.  每个人都在他们的分支中处理他们的项目（代码、测试等）
2.  当一切看起来不错时，它被合并到 Trunk
3.  [phpUnderControl](http://www.phpundercontrol.org/)重建 Trunk，运行我们所有的[phpUnit](http://www.phpunit.de/)测试，构建文档，更新数据库等
4.  如果一切都通过了，我们合并到稳定
5.  Stable 像 Trunk 一样被完全重建
6.  稳定被手动提升到我们的生产服务器

我们有一些自定义脚本来处理我们的数据库升级和我们对生产的推动。对于我们的数据库，我们将所有增量保存在一个文件夹中，脚本会根据可用增量检查当前数据库级别，并在需要时应用它们。

为了升级到生产，我们有另一个脚本，它会拉下所有生产数据，然后运行 ​​rsync 来推送更改。

您没有提及您对服务器的控制级别，但总体开发过程与一般开发相同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-11T12:24:28.743

我认为每个人所做的这些事情都略有不同，具体取决于具体的应用。这是我们的设置：

发布前：

*   每个人都承诺`/trunk`。
*   当我们想要发布一个版本时，我们将主干复制到`/tags/yymmddhhiiss`.
*   我们稳定标签。

稳定后，我们运行部署脚本：

*   在生产服务器上，签出新标签。
*   转储数据库。
*   停止守护进程并关闭 Web 应用程序。
*   切换符号链接`/current`以指向新签出的标签。
*   运行迁移脚本。
*   重新启动守护程序和应用程序。

如果我们需要快速推送一个小的更改，我们将它合并到当前标签，然后我们可以在服务器上运行一个更简单的修补程序过程：

*   停止守护进程并关闭 Web 应用程序。
*   跑`svn update`
*   重新启动守护程序和应用程序。

请注意，有些工具旨在构建/自动化这些流程。[Phing](http://phing.info/)就是其中之一，[Symfony](http://www.symfony-project.org/)有自己的[批处理系统，它曾经是一个名为](http://www.symfony-project.org/book/1_2/16-Application-Management-Tools#Batch%20Files)[pake](http://www.pake-project.com/)的独立项目。好像这还不够，Zend Framework 即将创建[自己的变体](http://framework.zend.com/wiki/display/ZFDEV/Zend+Tool+Initiative)。这真的有点乱，但 Phing 可能是使用最广泛的。您还可以使用非 php 特定的东西，例如[Ant](http://ant.apache.org/)或[Capistrano](http://capistranorb.com/)。我们只是使用 shell 脚本，它基本上满足了同样的需求。

我们也有一个持续的构建运行，它从主干中检出并运行所有测试。目前我们只有一个基本的 shell 脚本集合，但我们正在考虑切换到[PhpUnderControl](http://www.phpundercontrol.org/)或[xinc](http://code.google.com/p/xinc/)。

*迁移*步骤也许值得解释一下。Theese 包含对数据库的更改，以及必须为新版本运行的其他任务。目前我们的迁移有点简单；我们只是有一个包含一堆`.php`和`.sql`脚本的文件夹，并且在迁移期间，这些是按顺序运行的。我们跟踪已运行哪些更改的方法是`migrations`在创建新标签后立即清空文件夹。不过，使用数据库记录已运行的更改可能会更聪明。为此，我们考虑采用类似[ruckusing](http://code.google.com/p/ruckusing/)的方法。

# c++ - boost.org 的 Spirit 解析器生成器框架有哪些缺点？

> ID：432173
> 
> 赞同：42
> 
> 时间：2009-01-11T02:01:58.453
> 
> 标签：c++, parsing, boost, boost-spirit, parser-generator

在几个问题中，我从[boost.org看到了关于](http://www.boost.org/)[Spirit](http://www.boost.org/doc/libs/1_37_0/libs/spirit/classic/index.html)解析器生成器框架的建议，但是在评论中，使用 Spirit 的人不满意的抱怨。请那些人站出来向我们其他人解释使用 Spirit 的缺点或缺点是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-01-13T10:21:49.770

这是一个很酷的主意，我喜欢它；真正学习如何使用 C++ 模板特别有用。

但是他们的文档建议将精神用于中小型解析器。完整语言的解析器需要很长时间才能编译。我将列出三个原因。

*   无扫描仪解析。虽然它相当简单，但当需要回溯时，它可能会减慢解析器的速度。虽然它是可选的 - 可能会集成词法分析器，请参阅使用 Spirit 构建的 C 预处理器。大约 300 行的语法（包括 .h 和 .cpp 文件）使用 GCC 编译（未优化）为 6M 的文件。内联和最大优化将其降至约 1,7M。

*   解析慢 - 没有对语法的静态检查，既不提示需要过多的前瞻，也不验证基本错误，例如左递归的使用（这导致递归下降解析器 LL 语法中的无限递归）。然而，左递归并不是一个很难追踪的错误，但是过度的前瞻可能会导致指数解析时间。

*   大量使用模板——虽然这有一定的优势，但这会影响编译时间和代码大小。此外，语法定义通常必须对所有其他用户可见，这会影响更多的编译时间。通过添加具有正确参数的显式模板实例化，我已经能够将语法移动到 .cpp 文件，但这并不容易。

更新：我的回答仅限于我对 Spirit 经典的体验，而不是 Spirit V2。我仍然希望 Spirit 是基于模板的，但现在我只是猜测。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-10-20T00:55:57.410

在 boost 1.41 中，Spirit 的新版本正在发布，它打破了精神：：经典：

> 经过长时间的测试（Spirit 2.0 超过 2 年），Spirit 2.1 最终将与即将发布的 Boost 1.41 版本一起发布。该代码现在非常稳定，可以用于生产代码。我们正在努力及时完成 Boost 1.41 的文档。您可以在此处查看文档的当前状态。目前，您可以在 Boost SVN 主干中找到代码和文档。如果您有一个涉及 Spirit 的新项目，我们强烈建议您现在从 Spirit 2.1 开始。请允许我从 Spirit 邮件列表中引用 OvermindDL 的帖子：
> 
> > > 我可能开始听起来像一个机器人，因为我经常这么说，但是 Spirit.Classic 是古老的，你应该切换到 Spirit2.1，它可以更轻松地完成你所做的一切，代码少得多，而且它可以执行快点。例如，Spirit2.1 可以构建您的整个 AST 内联，没有奇怪的覆盖，不需要事后构建等等......，所有这些都是一个不错且快速的步骤。你真的需要更新。有关 Spirit2.1 的文档等链接，请参阅过去一天的其他帖子。Spirit2.1 目前在 Boost Trunk 中，但将与 Boost 1.41 一起正式发布，但其他方面已经完成。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2010-06-04T14:59:52.943

对我来说，最大的问题是 Spirit 中的表达式，如编译器或调试器所见，相当长（我复制了 Spirit Classic 中一个表达式*的一部分*）。这些表达吓到我了。当我在一个使用 Spirit 的程序上工作时，我害怕使用 valgrind 或在 gdb 中打印回溯。

`boost::spirit::classic::parser_result<boost::spirit::classic::action<boost::spirit::classic::sequence<boost::spirit::classic::action<boost::spirit::classic::action<optional_suffix_parser<char const*>, boost::spirit::classic::ref_actor<std::vector<std::string, std::allocator<std::string> >, boost::spirit::classic::clear_action> >, boost::spirit::classic::ref_actor<std::vector<int, std::allocator<int> >, boost::spirit::classic::clear_action> >, boost::spirit::classic::sequence<boost::spirit::classic::alternative<boost::spirit::classic::alternative<boost::spirit::classic::action<boost::spirit::classic::contiguous<boost::spirit::classic::sequence<boost::spirit::classic::alternative<boost::spirit::classic::chlit<char>, boost::spirit::classic::chlit<char> >, boost::spirit::classic::positive<boost::spirit::classic::alternative<boost::spirit::classic::alternative<boost::spirit::classic::alnum_parser, boost::spirit::classic::chlit<char> >, boost::spirit::classic::chlit<char> > > > >, boost::spirit::classic::ref_value_actor<std::vector<std::string, std::allocator<std::string> >, boost::spirit::classic::push_back_action> >, boost::spirit::classic::action<boost::spirit::classic::rule<boost::spirit::classic::scanner<char const*, boost::spirit::classic::scanner_policies<boost::spirit::classic::skipper_iteration_policy<boost::spirit::classic::iteration_policy>, boost::spirit::classic::match_policy, boost::spirit::classic::action_policy> >, boost::spirit::classic::nil_t, boost::spirit::classic::nil_t>, boost::spirit::classic::ref_const_ref_actor<std::vector<std::string, std::allocator<std::string> >, std::string, boost::spirit::classic::push_back_action> > >, boost::spirit::classic::contiguous<boost::spirit::classic::sequence<boost::spirit::classic::chlit<char>, boost::spirit::classic::action<boost::spirit::classic::uint_parser<unsigned int, 10, 1u, -1>, boost::spirit::classic::ref_value_actor<std::vector<int, std::allocator<int> >, boost::spirit::classic::push_back_action> > > > >, boost::spirit::classic::kleene_star<boost::spirit::classic::sequence<boost::spirit::classic::chlit<char>, boost::spirit::classic::alternative<boost::spirit::classic::alternative<boost::spirit::classic::action<boost::spirit::classic::contiguous<boost::spirit::classic::sequence<boost::spirit::classic::alternative<boost::spirit::classic::chlit<char>, boost::spirit::classic::chlit<char> >, boost::spirit::classic::positive<boost::spirit::classic::alternative<boost::spirit::classic::alternative<boost::spirit::classic::alnum_parser, boost::spirit::classic::chlit<char> >, boost::spirit::classic::chlit<char> > > > >, boost::spirit::classic::ref_value_actor<std::vector<std::string, std::allocator<std::string> >, boost::spirit::classic::push_back_action> >, boost::spirit::classic::action<boost::spirit::classic::rule<boost::spirit::classic::scanner<char const*, boost::spirit::classic::scanner_policies<boost::spirit::classic::skipper_iteration_policy<boost::spirit::classic::iteration_policy>, boost::spirit::classic::match_policy, boost::spirit::classic::action_policy> >, boost::spirit::classic::nil_t, boost::spirit::classic::nil_t>, boost::spirit::classic::ref_const_ref_actor<std::vector<std::string, std::allocator<std::string> >, std::string, boost::spirit::classic::push_back_action> > >, boost::spirit::classic::contiguous<boost::spirit::classic::sequence<boost::spirit::classic::chlit<char>, boost::spirit::classic::action<boost::spirit::classic::uint_parser<unsigned int, 10, 1u, -1>, boost::spirit::classic::ref_value_actor<std::vector<int, std::allocator<int> >, boost::spirit::classic::push_back_action> > > > > > > > >, void (*)(char const*, char const*)>, boost::spirit::classic::scanner<char const*, boost::spirit::classic::scanner_policies<boost::spirit::classic::skipper_iteration_policy<boost::spirit::classic::iteration_policy>, boost::spirit::classic::match_policy, boost::spirit::classic::action_policy> > >::type boost::spirit::classic::action<boost::spirit::classic::sequence<boost::spirit::classic::action<boost::spirit::classic::action<`

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-01-29T22:24:23.643

这是我不喜欢它的地方：

*   文档是有限的。有一个大网页解释了“一切”，但目前的解释缺乏细节。

*   AST 生成不佳。AST 没有得到很好的解释，即使在你碰壁以了解 AST 修饰符是如何工作的之后，也很难获得易于操作的 AST（即，能够很好地映射到问题域的AST）

*   它极大地增加了编译时间，即使对于“中等”大小的语法也是如此

*   语法太重了。在 C/C++ 中，您必须复制代码（即在声明和定义之间），这是一个不争的事实。然而，似乎在 boost::spirit 中，当你声明一个语法<>时，你必须重复一些事情 3 次：D（当你想要 AST 时，这就是我想要的 :D）

除此之外，考虑到 C++ 的局限性，我认为他们在解析器方面做得很好。但我认为他们应该进一步改进它。历史页面描述了在当前“静态”精神之前存在“动态”精神；我想知道它的语法速度有多快，语法有多好。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-29T23:04:47.883

我想说最大的问题是缺乏对语法问题的任何诊断或其他帮助。如果您的语法不明确，则解析器可能无法解析您所期望的内容，并且没有好的方法可以注意到这一点。

# javascript - 如何为某些 HTML 标签存储任意数据

> ID：432174
> 
> 赞同：355
> 
> 时间：2009-01-11T02:02:14.787
> 
> 标签：javascript, html

我正在制作一个页面，其中包含一些由 javascript 提供的交互。举个例子：发送 AJAX 请求以获取文章内容然后在 div 中显示该数据的链接。显然，在这个例子中，我需要每个链接存储一个额外的信息：文章的 id。我一直在处理它的方式是将这些信息放在 href 链接中：

```
<a class="article" href="#5"> 
```

然后我使用 jQuery 查找 a.article 元素并附加适当的事件处理程序。*（不要太在意这里的可用性或语义，这只是一个例子）*

无论如何，这种方法是可行的，但它有点[味道](https://stackoverflow.com/questions/114342/what-are-code-smells-what-is-the-best-way-to-correct-them)，并且根本不可扩展（如果点击函数有多个参数会发生什么？如果其中一些参数是可选的呢？）

显而易见的答案是在元素上使用属性。我的意思是，这就是他们的目的，对吧？（有点儿）。

```
<a articleid="5" href="link/for/non-js-users.html"> 
```

在[我最近的问题](https://stackoverflow.com/questions/427262/)中，我问这种方法是否有效，结果证明没有定义我自己的 DTD（我没有），那么不，它无效或不可靠。一个常见的反应是将数据放入`class`属性中（尽管这可能是因为我选择不当的示例），但对我来说，这更难闻。是的，它在技术上是有效的，但它不是一个很好的解决方案。

我过去使用的另一种方法是实际生成一些 JS 并将其插入到页面中的`<script>`标签中，创建一个与对象关联的结构。

```
var myData = {
    link0 : {
        articleId : 5,
        target : '#showMessage'
        // etc...
    },
    link1 : {
        articleId : 13
    }
};

<a href="..." id="link0"> 
```

但这可能是一个真正难以维护的痛苦，而且通常非常混乱。

那么，为了解决这个问题，**您如何存储 HTML 标签的任意信息**？

* * *

## 回答 #1

> 赞同：381
> 
> 时间：2009-01-11T02:16:50.420

您使用的是哪个版本的 HTML？

[在 HTML 5 中，以 data- 为前缀的自定义属性](https://www.w3schools.com/tags/att_global_data.asp)是完全有效的，例如

```
<div data-internalid="1337"></div> 
```

在 XHTML 中，这并不是真正有效的。如果您在 XHTML 1.1 模式下，浏览器可能会抱怨它，但在 1.0 模式下，大多数浏览器会默默地忽略它。

如果我是你，我会遵循基于脚本的方法。你可以让它在服务器端自动生成，这样维护起来就不会很麻烦。

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2009-01-11T04:31:31.677

如果您已经在使用 jQuery，那么您应该利用“data”方法，这是使用 jQuery 在 dom 元素上存储任意数据的推荐方法。

存储一些东西：

```
$('#myElId').data('nameYourData', { foo: 'bar' }); 
```

要检索数据：

```
var myData = $('#myElId').data('nameYourData'); 
```

这就是它的全部内容，但请查看[jQuery 文档](http://docs.jquery.com/Core/data)以获取更多信息/示例。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-01-11T03:48:33.247

换一种方式，我个人不会使用它，但它可以工作（确保你的 JSON 是有效的，因为 eval() 是危险的）。

```
<a class="article" href="link/for/non-js-users.html">
    <span style="display: none;">{"id": 1, "title":"Something"}</span>
    Text of Link
</a>

// javascript
var article = document.getElementsByClassName("article")[0];
var data = eval(article.childNodes[0].innerHTML); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-01-11T02:21:40.533

任意属性无效，但在现代浏览器中完全可靠。如果您通过 javascript 设置属性，那么您也不必担心验证。

另一种方法是在 javascript 中设置属性。jQuery 有一个[很好的实用方法](http://docs.jquery.com/Core/data)就是为了这个目的，或者你可以自己动手。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-01-11T02:28:06.933

几乎所有可能的浏览器都可以使用的 hack 是使用这样的开放类：`<a class='data\_articleid\_5' href="link/for/non-js-users.html>;`

这对纯粹主义者来说并不是那么优雅，但它得到了普遍支持、符合标准并且非常容易操作。这似乎是最好的方法。如果您*修改*`serialize`、*复制*您的标签或做任何其他事情，将保持连接、复制等。**`data`**

 **唯一的问题是你**不能以这种方式存储不可序列化的对象，**如果你在那里放一些非常大的东西可能会有限制。

第二种方法是使用*虚假属性*，例如：`<a articleid='5' href="link/for/non-js-users.html">`

这更优雅，但违反了标准，我不能 100% 确定是否支持。许多浏览器完全支持它，我认为IE6支持`JS`访问但不支持`CSS` `selectors`（这并不重要），也许有些浏览器会完全混淆，你需要检查一下。

*做一些有趣的事情，比如序列化和反序列化会更加危险。*

使用`ids`纯`JS`散列主要是有效的，除非您尝试复制标签。如果你有`tag` `<a href="..." id="link0">`，通过标准`JS`方法复制它，然后尝试修改`data`附加到一个副本，另一个副本将被修改。

如果你不复制`tag`s，或者使用*只读*数据，那是没有问题的。如果您复制`tag`s 并对其进行了修改，则需要手动处理。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-06-07T13:50:15.847

使用jQuery，

储藏：`$('#element_id').data('extra_tag', 'extra_info');`

检索：`$('#element_id').data('extra_tag');`

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2009-01-11T02:15:09.660

我知道您当前正在使用 jQuery，但是如果您内联定义了 onclick 处理程序会怎样。然后你可以这样做：

```
 <a href='/link/for/non-js-users.htm' onclick='loadContent(5);return false;'>
     Article 5</a> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2011-11-12T08:48:02.440

您可以使用隐藏的输入标签。我在 w3.org 上没有收到任何验证错误：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content="text/html;charset=UTF-8" http-equiv="content-type" />
    <title>Hello</title>
  </head>
  <body>
    <div>
      <a class="article" href="link/for/non-js-users.html">
        <input style="display: none" name="articleid" type="hidden" value="5" />
      </a>
    </div>
  </body>
</html> 
```

使用 jQuery，您将获得类似（未测试）的文章 ID：

```
$('.article input[name=articleid]').val(); 
```

但如果可以的话，我会推荐 HTML5。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-01-11T02:28:11.503

为什么不利用已经存在的有意义的数据，而不是添加任意数据？

即使用`<a href="/articles/5/page-title" class="article-link">`，然后您可以以编程方式获取页面上的所有文章链接（通过类名）和文章 ID（将正则表达式与 匹配`/articles\/(\d+)/`）`this.href`。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2009-08-20T13:12:00.147

作为 jQuery 用户，我会使用[Metadata 插件](http://plugins.jquery.com/project/metadata)。HTML 看起来很干净，它可以验证，并且您可以嵌入任何可以使用 JSON 表示法描述的内容。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2011-10-10T17:28:16.613

这是个好建议。感谢@Prestaul

> 如果您已经在使用 jQuery，那么您应该利用“data”方法，这是使用 jQuery 在 dom 元素上存储任意数据的推荐方法。

非常正确，但是如果您想在普通 HTML 中存储任意数据怎么办？这是另一种选择...

```
<input type="hidden" name="whatever" value="foobar"/> 
```

将您的数据放在隐藏输入元素的名称和值属性中。如果服务器正在生成 HTML（即 PHP 脚本或其他），并且您的 JavaScript 代码稍后将使用此信息，这可能很有用。

诚然，这不是最干净的，但它是一种替代方案。它与所有浏览器兼容并且是有效的 XHTML。您不应该**使用**自定义属性，也不应该真正使用带有“data-”前缀的属性，因为它可能不适用于所有浏览器。此外，您的文档不会通过 W3C 验证。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-01-11T04:32:21.533

只要您的实际工作是在服务器端完成的，为什么还需要输出中的 html 标记中的自定义信息呢？您需要在服务器上知道的所有内容都是包含您的自定义信息的任何类型结构列表的索引。我认为您希望将信息存储在错误的位置。

无论多么不幸，我都会认识到，在很多情况下，正确的解决方案并不是正确的解决方案。在这种情况下，我强烈建议生成一些 javascript 来保存额外信息。

**许多年后：**

这个问题是在 html 5 出现后属性成为有效选项之前大约三年发布`data-...`的，所以事实已经发生了变化，我给出的原始答案不再相关。现在我建议改用[数据属性](https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes)。

```
<a data-articleId="5" href="link/for/non-js-users.html">

<script>
    let anchors = document.getElementsByTagName('a');
    for (let anchor of anchors) {
        let articleId = anchor.dataset.articleId;
    }
</script> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-10-27T15:13:22.567

我提倡使用“rel”属性。XHTML 验证，属性本身很少使用，并且有效地检索数据。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2010-06-06T12:45:40.483

所以应该有四种选择：

1.  将数据放入 id 属性中。
2.  将数据放入任意属性中
3.  将数据放入类属性中
4.  将您的数据放在另一个标签中

[http://www.shanison.com/?p=321](http://www.shanison.com/?p=321)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2012-08-24T16:54:10.710

您可以使用自己制作的随机元素属性的 data- 前缀 ( `<span data-randomname="Data goes here..."></span>`)，但这仅在 HTML5 中有效。因此浏览器可能会抱怨有效性。

您也可以使用`<span style="display: none;">Data goes here...</span>`标签。但是这样你就不能使用属性函数了，如果关闭了css和js，这也不是一个很好的解决方案。

但我个人更喜欢的是以下几点：

```
<input type="hidden" title="Your key..." value="Your value..." /> 
```

输入在所有情况下都将被隐藏，属性完全有效，如果它在`<form>`标签内，它不会被发送，因为它没有任何名称，对吧？最重要的是，属性真的很容易记住，代码看起来很漂亮，也很容易理解。您甚至可以在其中放置一个 ID 属性，这样您也可以使用 JavaScript 轻松访问它，并使用`input.title; input.value`.

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-01-11T02:56:06.363

一种可能是：

*   创建一个新的 div 来保存所有扩展/任意数据
*   做一些事情来确保这个 div 是不可见的（例如 CSS 加上 div 的一个类属性）
*   将扩展/任意数据放在这个不可见的 div 中的 [X]HTML 标记中（例如，作为表格单元格中的文本，或您可能喜欢的任何其他内容）

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2011-10-27T15:37:00.243

另一种方法是使用以下语法将 key:value 对存储为一个简单的类：

```
<div id="my_div" class="foo:'bar'">...</div> 
```

这是有效的，可以使用 jQuery 选择器或自定义函数轻松检索。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-06-01T13:52:49.340

在 html 中，我们可以在属性名称之前使用前缀“data-”来存储自定义属性，例如

`<p data-animal='dog'>This animal is a dog.</p>`. 检查[文档](https://www.w3schools.com/tags/att_global_data.asp)

我们可以使用这个属性来使用 jQuery 动态设置和获取属性，例如：如果我们有 ap 标签，例如

`<p id='animal'>This animal is a dog.</p>`

然后为上面的标签创建一个名为'breed'的属性，我们可以这样写：

`$('#animal').attr('data-breed', 'pug');`

要随时检索数据，我们可以编写：

`var breedtype = $('#animal').data('breed');`

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2009-01-11T05:52:44.073

在我以前的雇主，我们一直使用自定义 HTML 标签来保存有关表单元素的信息。问题：我们知道用户被迫使用 IE。

当时它对 FireFox 并不适用。我不知道 FireFox 是否改变了这一点，但请注意，您的读者的浏览器可能支持也可能不支持将您自己的属性添加到 HTML 元素。

如果您可以控制您的阅读器使用的浏览器（即公司的内部网络小程序），那么请务必尝试一下。它会伤害什么，对吧？

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2011-04-30T12:51:34.723

这就是我如何处理 ajax 页面......这是一个非常简单的方法......

```
 function ajax_urls() {
       var objApps= ['ads','user'];
        $("a.ajx").each(function(){
               var url = $(this).attr('href');
               for ( var i=0;i< objApps.length;i++ ) {
                   if (url.indexOf("/"+objApps[i]+"/")>-1) {
                      $(this).attr("href",url.replace("/"+objApps[i]+"/","/"+objApps[i]+"/#p="));
                   }
               }
           });
} 
```

它的工作原理是它基本上查看所有具有类 'ajx' 的 URL，它替换了一个关键字并添加了 # 符号......所以如果 js 被关闭，那么这些 URL 将像往常一样运行......所有“应用程序”（网站的每个部分）都有自己的关键字......所以我需要做的就是添加到上面的 js 数组以添加更多页面......

因此，例如，我当前的设置设置为：

```
 var objApps= ['ads','user']; 
```

因此，如果我有一个网址，例如：

www.domain.com/ads/3923/bla/dada/bla

js 脚本将替换 /ads/ 部分，因此我的 URL 最终将成为

www.domain.com/ads/#p=3923/bla/dada/bla

然后我使用 jquery bbq 插件相应地加载页面......

[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2011-09-09T14:31:12.617

我发现元数据插件可以很好地解决使用 html 标签存储任意数据的问题，这种方式可以轻松检索和使用 jQuery。

**重要提示**：您包含的实际文件只有*5* kb 而不是*37* kb（这是完整下载包的大小）

这是一个用于存储我在生成谷歌分析跟踪事件时使用的值的示例（注意：data.label 和 data.value 恰好是可选参数）

```
$(function () {
    $.each($(".ga-event"), function (index, value) {
        $(value).click(function () {
            var data = $(value).metadata();
            if (data.label && data.value) {
                _gaq.push(['_trackEvent', data.category, data.action, data.label, data.value]);
            } else if (data.label) {
                _gaq.push(['_trackEvent', data.category, data.action, data.label]);
            } else {
                _gaq.push(['_trackEvent', data.category, data.action]);
            }
        });
    });
});

<input class="ga-event {category:'button', action:'click', label:'test', value:99}" type="button" value="Test"/> 
```

# messaging - Google 的协议缓冲区是否用于大规模生产应用程序？

> ID：432188
> 
> 赞同：15
> 
> 时间：2009-01-11T02:12:48.697
> 
> 标签：messaging, protocol-buffers

Google 的[Protocol Buffers](http://code.google.com/p/protobuf/)是否用于生产中的大规模生产应用程序？

使用它是什么体验？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-12T11:28:29.027

BTW [Apache ActiveMQ 6](http://activemq.apache.org)可能会使用协议缓冲区作为其默认编组层。早期的经验是非常有利的；因为它很容易让每个端点在不同的版本上，但仍然能够解析二进制协议——而且它看起来非常快。当您需要提升性能时，它是 JSON/XML 的绝佳替代品

# .net - .NET 是否包含在 Windows 7 中？

> ID：432189
> 
> 赞同：6
> 
> 时间：2009-01-11T02:12:51.660
> 
> 标签：.net, windows-7

.NET Framework 是否包含在 Windows 7 中？如果有，是哪个版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-11T02:24:30.763

当前的 Beta 包括 .net 3.5。不确定是否是 SP1。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-15T01:53:45.377

win7 Beta 1 (7000) 有 .NET 3.5 版本 3.5.30729.715

根据[这个问题](https://stackoverflow.com/questions/198931/how-do-i-tell-if-net-35-sp1-is-installed)，这意味着它的 SP1 有更多（很可能是特定于 win7 的微小变化）的变化。

我预计对于最终版本，这将保持不变，但最终的 715 数字（不用于任何用途）可能会上升

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T02:16:24.680

我想如果它还没有被包含（因为它只是一个测试版），它最终会包含它。

至于版本，我猜是 3.5 SP1 或可能是 4.0

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-03T03:18:12.300

Windows 7 包括 .NET 3.5 SP1

# php - PHP单例类是否在请求之间以某种方式共享？

> ID：432192
> 
> 赞同：15
> 
> 时间：2009-01-11T02:13:44.747
> 
> 标签：php, class, singleton

我在所有 PHP 类文件中使用单例模式。

是否会导致用户在网站上的操作与其他用户的操作发生冲突？

例如，当应用程序上线并且我们同时在站点上有几个用户时，做类似的事情，从而调用相同的 PHP 类（在幕后），因为单例阻止了一个类的多个实例并且只返回一个实例.

例如，我有一个名为 Search.php 的类，它是一个单例类。此类处理来自网站的所有搜索查询。如果多个用户同时在站点上执行搜索，他们的操作是否会相互冲突，因为它只是可以创建的 Search 类的单个实例。

非常感谢你花时间陪伴。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-01-11T10:11:54.673

最简洁的答案是不。

每个页面请求都作为一个唯一的实例进行处理，唯一将每个用户的请求联系在一起的是会话 cookie。试着把 PHP 想象成一个应用程序，它在你调用脚本时启动，在脚本完成时终止。它不维护任何状态，也不知道任何其他 PHP 实例。

单例模式只是您设计类的一种方式，您可以在代码中的任何位置（如全局）调用它，而不必关心它是否已经被实例化并且您希望它保留在内存中。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-01-11T02:18:09.043

每个请求都是自包含的，不与其他请求共享数据（除非您为此使用特定的扩展，例如 memcache）。因此，在您的应用程序中使用单例不会影响来自不同用户的单独请求。

你应该关心的是你对单例模式的过度使用。单例是全局的 OO 版本，如果您不小心，可能会导致一些奇怪的错误。最好使用不依赖全局设置的作用域操作，并谨慎使用单例。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-02-22T10:04:55.887

单例模式是比较有争议的模式之一。批评者认为，单例将全局状态引入应用程序，并将单例及其消费类紧密耦合。这会导致隐藏的依赖关系和意想不到的副作用，进而导致代码更难测试和维护。

批评者进一步认为，在 PHP 这样的无共享架构中使用单例是没有意义的，因为无论如何，对象在请求中都是唯一的。通过在请求开始时使用 Builders 和 Factory 模式来创建协作者对象图更加容易和清晰。

Singletons also violate several of the "SOLID" OOP design principles and the Law of Demeter. Singletons cannot be serialized. They cannot be subtyped (before PHP 5.3) and won't be Garbage Collected because of the instance being stored as a static attribute of the Singleton.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T17:29:34.667

我同意，答案是否定的。我现在正在考虑 PHP 中的单例模式，并决定虽然单例模式可以用 PHP 编码，但它并没有真正实现，因为实例没有跨请求共享（或存储在进程内存中，就是这种情况对于像 ASP.net、Java 和 Ruby on Rails 这样的 Web 服务器环境？）您可以序列化 Singleton 实例并将其存储在会话中，但仍然不能跨会话共享。我推测它必须存储在缓存中才能在 PHP 中完全实现单例模式。但我还没有这样做，所以我不确定。

# python - 简短的 Python 代码说“选择较低的值”？

> ID：432211
> 
> 赞同：29
> 
> 时间：2009-01-11T02:21:43.843
> 
> 标签：python, code-snippets

我的意思是，我正在寻找返回较低值的非常短的代码。例如：

```
a=[1,2,3,4,5,6,7,8,9,10]
b=[1,2,3,4,5,6,7,8]
len(a) = 10
len(b) = 8
if (fill-this-in):
     print(lesser-value) 
```

而且我忘了补充一点，如果 b 低于 a，我希望返回 b - 而不是 len(b) - 变量 b。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-01-11T02:30:58.283

```
打印（分钟（a，b））

```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-01-11T04:21:26.313

你不是很清楚你想要什么，所以有一些替代方案。给定以下两个列表：

```
a = [1,2,3,4,5,6,7,8,9,10]
b = [1,2,3,4,5,6,7,8] 
```

要打印最短的列表，您可以这样做..

```
>>> print(min(a, b))
[1, 2, 3, 4, 5, 6, 7, 8] 
```

要获得最短的数字长度，您可以`min`选择`len()`每个列表中的一个，或者做`len(min())`（两者相同，选择您认为最易读的那个）..

```
>>> print(min( len(a), len(b) ))
# or..
>>> print(len( min(a, b) ))
8 
```

要打印任一列表中的最小值，您可以将列表作为单个参数提供给`min()`

```
>>> a.extend(b) # Appends b to a
>>> print a
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 1, 2, 3, 4, 5, 6, 7, 8]
>>> print(min(a))
1 
```

最后，另一种可能性，总值最低的列表：

```
>>> max( sum(a), sum(b) )
55 
```

要打印最高的实际列表`sum()`，您可以使用三元运算符，例如..

```
>>> print a if sum(a) > sum(b) else b
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

..虽然我从来没有真正喜欢（或使用）它，而是使用稍长的常规 if/else 语句..

```
>>> if sum(a) > sum(b):
...     print a
... else:
...     print b
... 
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-11T04:49:03.640

如果列表的长度是使它变低的原因（而不是它的值），那么您实际上想要：

```
min(a, b, key=len) 
```

这只是偶然地等价于

```
min(a, b) 
```

在给定的示例中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-11T02:30:30.687

`min()`应该完成你需要的

```
print(min(a,b)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-14T03:56:06.677

抬头，`min(a, b, key=len)`我认为仅适用于python 2.5及更高版本。

（它不适用于我的带有 python 2.4 的 macbook，但我的 2.5 的 linux 服务器很好）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-02T17:32:18.357

看来这个答案现在可能已经过时了。我刚刚有同样的问题并找到了这个答案，但没有得到我预期的结果。结果 Min 不会自动返回两个列表中较短的一个（在 2.7 中）。要做到这一点，您必须使用“关键”参数（在 2.5 中引入）（强调添加）：

> min(iterable[, key]) min(arg1, arg2, *args[, key]) 返回可迭代项中的最小项或两个或多个参数中的最小项。
> 
> 如果提供了一个位置参数，则可迭代对象必须是非空可迭代对象（例如非空字符串、元组或列表）。返回可迭代项中的最小项。*如果提供了两个或多个位置参数，则返回最小的位置参数。*
> 
> 可选的 key 参数指定一个单参数排序函数，类似于 list.sort() 中使用的排序函数。如果提供了 key 参数，则必须采用关键字形式（例如，min(a,b,c,key=func)）。
> 
> 在 2.5 版更改: 添加了对可选键参数的支持

所以在这个例子中，虽然它似乎可以工作（并且在 2.7 中仍然可以），它只是因为整数列表是相同的。但是，如果这些是两个不同的无序列表，那么：

```
min(a,b) 
```

将返回具有最小*第一个*整数的列表。

要确保获得两个列表中较短的一个，请使用：

```
min(a,b, key=len) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-11T02:43:38.103

以下是你想要的吗？

```
if len(a) < len(b):
    print a
else:
    print b 
```

或者，如果您想使用像@Andrew G. Johnson 这样的三元运算符：

```
print a if len(a) < len(b) else b 
```

PS。请记住，Python 的块不使用大括号，并且它的三元运算符与类 C 语言不同。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2009-01-11T02:38:50.937

我不知道 Python，但对于这样的事情，我会使用三元运算符。

```
print(length(a) < length(b) ? length(a) : length(b)) 
```

需要注意的一点是，如果它们相等，它将打印 length(b)

# c# - 如何使用 List<> 作为 Linq 的 where 子句的条件？

> ID：432212
> 
> 赞同：1
> 
> 时间：2009-01-11T02:22:08.193
> 
> 标签：c#, sql-server, linq

所以我已经把头撞在众所周知的墙上几个小时了，我想我会看看有没有其他人以前解决过这个问题......

我有一个`List<string>`值，我想在搜索中用作过滤器。在过去，我会`WHERE field = 'a' OR field = 'b' OR field = 'C'`在查询中构建一个字符串。但是随着 Linq 的构建，这个长`WHERE`子句相当困难。我希望能起作用的是：

```
var results = from x in x.table
              where x.Equals(List<string>)
              select x; 
```

唉，编译器不够聪明，无法将 List<> 分解为`WHERE field = 'a' OR field ='b'`一种查询。我已经将这个过程作为一个 foreach 循环继续推进，`List<string>`但是当我希望这部分执行在 SQL Server 上进行时，它会将处理推送到客户端。我是生活在幻想之地还是有办法让这一切发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-11T02:26:50.337

您可以使用 Contains()

```
List<string> yourList = new List<string> { "A", "B", "C" };

var results = from x in x.table
              where yourList.Contains(x)
              select x; 
```

如果是 Linq to SQL，它将生成一个`WHERE field IN ('A', 'B', 'C')`子句。

# linq - 使用包含 bigint 的嵌套 LINQ 查询

> ID：432217
> 
> 赞同：1
> 
> 时间：2009-01-11T02:26:09.387
> 
> 标签：linq, contains, biginteger, nested-query

这是我想要的 SQL（`ClearinghouseKey`是 a `bigint`）：

```
select *
from ConsOutput O
where O.ClearinghouseKey IN (
  select distinct P.clearinghouseKey
  from Project P
  Inner join LandUseInProject L on L.ClearinghouseKey = P.ClearinghouseKey
  where P.ProjectLocationKey IN ('L101', 'L102', 'L103')
  and L.LandUseKey IN ('U000', 'U001', 'U002', 'U003')
) 
```

内部查询是直截了当的，并在 LINQPad 中给出了正确的结果：

```
var innerQuery = (from p in Projects
                  join l in LandUseInProjects on p.ClearinghouseKey equals l.ClearinghouseKey
                  where locations.Contains(p.ProjectLocationKey) 
                  &&  (landuses.Contains(l.LandUseKey)) 
                  select new { p.ClearinghouseKey  }).Distinct(); 
```

但是外部查询给出了错误：Type arguments from ...Contains..cannot be inferred from usage：

```
var returnQuery = from o in OperOutput
                  where (innerQuery).Contains(o.ClearinghouseKey)
                  select o; 
```

是因为 ClearinghouseKey 是一个 bigint 吗？还有其他方法可以编写此查询吗？

谢谢，珍妮

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T02:33:43.023

不要使用匿名类型：

```
select new { p.ClearinghouseKey }) 
```

应该

```
select p.ClearinghouseKey) 
```

还可以考虑使用 Any 而不是 Contains（我还没有理由选择一个而不是另一个）。

```
where innerQuery.Any(i => i == o.ClearinghouseKey) 
```

# apache-flex - Flex：如何以编程方式将方法分配给 Image.MouseMove 事件？

> ID：432226
> 
> 赞同：0
> 
> 时间：2009-01-11T02:30:11.767
> 
> 标签：apache-flex, actionscript-3

我了解如何在 Image 收到 MouseMove 事件时以声明方式分配要调用的方法。

> ```
>  <mx:Image 
>         id="oneCent"
>         mouseMove="dragIt(event, 1);"
>     /> 
> ```

如何在 Flex/AS3 中以编程方式执行此操作？

编辑：感谢您的评论。这是我到目前为止所拥有的：

> ```
>  myImage = new Image();
>             myImage.id = "oneCent";
>             myImage.addEventListener(MouseEvent.MOUSE_MOVE, dragIt); 
> ```

上面的代码片段将 dragIt 方法分配给 myImage 的 MOUSE_MOVE 事件。到现在为止还挺好。如何将第二个参数传递给对 dragIt 的调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T02:38:19.317

```
oneCent.addEventListener(MouseEvent.MOUSE_MOVE, dragIt);
...

function dragIt(event:MouseEvent):void
{
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-12T09:57:13.720

您不能直接传递第二个参数 - 所以将它添加到 myImage：

```
myImage = new Image();
myImage.id = "oneCent";
myImage.num = 1;
myImage.addEventListener(MouseEvent.MOUSE_MOVE, dragIt); 
```

然后在dragit函数中：

```
function dragIt(event:MouseEvent):void {
    trace("PARAM =", event.target.num, event.target.id);
} 
```

其中**event.target**自动成为对图像的引用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T22:26:51.600

您不能将额外的参数传递给事件处理程序。在幕后，Flex 编译器正在生成如下所示的代码：

```
private function generatedMouseMoveHandler(event:MouseEvent):void
{
    dragIt(event, 1);
} 
```

在 MXML 中创建的任何事件处理程序都将被这样包装。这就是为什么你可以引用一个名为`event`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T14:39:16.270

Scott 明白了，尽管使用匿名函数会更好（而且更简洁！）：

```
oneCent.addEventListener(MouseEvent.MOUSE_MOVE, function(e:MouseEvent):void{
    ...
}); 
```

如果您`dragIt()`以后不打算在代码中使用哪个更好。

# c++ - 为什么我可以将现有引用分配给 C++ 中的文字值？

> ID：432230
> 
> 赞同：-2
> 
> 时间：2009-01-11T02:31:31.560
> 
> 标签：c++, reference, initialization, variable-assignment, literals

考虑以下：

```
int ival = 1.01;
int &rval = 1.01; // error: non-const reference to a const value.
int &rval = ival;

rval = 1.01; 
```

&rval 对文字值的第一次分配按预期失败。如果我注释掉该行，代码将编译并运行。我理解为什么初始化失败，但我很困惑为什么对 rval 的分配在最后一行起作用。我认为不允许分配对文字值的引用。

**编辑：**感谢您的快速回答。我很想删除它以掩饰我的耻辱，但我想我会把它留在这里，以便其他人可以指点和笑。

在我自己的辩护中，我正在完成一本书（C++ Primer）中的练习，这个问题是关于引用*初始化*的。尽管如此，一开始就完全忽视了参考的意义，这还是很尴尬的。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-11T02:35:27.073

`ival`不是文字值，`1.01`是文字值。它被复制到`ival`which 是一个变量，它肯定可以将它的引用分配给另一个变量。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-11T02:35:41.457

初始化引用后，它是初始化对象的别名。初始化引用后，您无法更改引用所指的内容。但是，您可以更改引用所指的“事物”（如果引用不是`const`）。

最后一行实际上将变量设置`ival`为 1.01（再次）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-11T04:56:48.817

您可能会惊讶地发现您*可以*执行以下操作：

```
const int& x = 42;        // No error! 
```

C++ 确实允许使用文字值（或其他右值）初始化*const引用。*实际发生的是编译器通过复制 RHS 创建一个临时文件，并初始化引用以引用该临时文件。编译器确保临时变量在范围退出之前保持活动状态（即`x`，在这种情况下，只要超出范围）。

请注意，这在初始化类的成员变量时不起作用。

棘手吧？:)

# c# - 当我没有 Google Reader Atom Schema 时，如何使用 xml 进行 linq？

> ID：432242
> 
> 赞同：1
> 
> 时间：2009-01-11T02:39:09.297
> 
> 标签：c#, xml, linq, schema, google-reader

我正在为 BlogEngine.Net 开发一个小部件。我的小部件将获取一个人的共享项目 atom 提要并打印标题、网站 url、日期和 atom url。为了完成这个任务，我已经开始使用 Linq 和 XML。

**这是问题所在。Google 阅读器使用的 atom 提要位于 source 元素中，该元素具有 gr:stream-id 属性。显然，XName 不喜欢名称中有冒号。我不得不走那条路，因为[Google Reader 架构](http://www.google.com/schemas/reader/atom/)不存在。如果我有那个模式，它将解决我的问题。我怎样才能得到架构？**

到目前为止，以下是我的一小段代码：

```
protected void Page_Load(object sender, EventArgs e) {
    //Replace userid with the unique session id in your Google Reader 
    //url (the numbers after the F)
    getFeed("userid");
}

public class Post {
    public String title { get; set; }
    public DateTime published { get; set; }
    public String postUrl { get; set; }
    public String baseUrl { get; set; }
    public String atomUrl { get; set; }
}

private void getFeed(String userID) {
    String uri = "http://www.google.com/reader/public/atom/user%2F" + userID + "%2Fstate%2Fcom.google%2Fbroadcast";

    XNamespace atomNS = "http://www.w3.org/2005/Atom";
    //The Google Reader schema link does not exist :(
    XNamespace grNS = "http://www.google.com/schemas/reader/atom/";
    XDocument feed = XDocument.Load(uri);

    var posts = from item in feed.Descendants(atomNS + "entry")
                select new Post {
                    title = item.Element(atomNS + "title").Value,
                    published = DateTime.Parse(item.Element(atomNS + "published").Value),
                    postUrl = item.Element(atomNS + "link").Attribute("href").Value,
                    atomUrl = item.Element(atomNS + "source").Attribute(grNS + "href").Value
                };
    foreach (Post post in posts) {
        output.InnerHtml += "Title: " + post.title + "<br />";
        output.InnerHtml += "Published: " + post.published.ToString() + "<br />";
        output.InnerHtml += "Post URL: " + post.postUrl + "<br />";
        output.InnerHtml += "Atom URL: " + post.atomUrl + "<br />";
        output.InnerHtml += "<br />";
    }
} 
```

如果在仍然使用 Linq 和 XML 的同时还有其他方法可以解决这个问题，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T02:52:33.360

我确实找到了获取 atom feed url 的替代解决方案。但是，我仍然更喜欢使用[Google Reader Atom Schema](http://www.google.com/schemas/reader/atom/)，因为这样会提供一些清晰的代码。

在 atom 提要中，有一个 id 元素，如下所示：

```
tag:google.com,2005:reader/feed/http://www.domain.com/blog/rss.xml 
```

所以我在我的 Linq 代码中添加了以下内容：

```
atomUrl = getUrl(item.Element(atomNS + "source").Element(atomNS + "id").Value) 
```

getUrl 看起来像这样：

```
private String getUrl(String item) {
    if (!item.Equals("")) {
        return item.Substring(item.IndexOf("http://"));
    }
    return "";
} 
```

该代码返回[http://www.domain.com/blog/rss.xml](http://www.domain.com/blog/rss.xml)

这个解决方案似乎围绕着命名空间的使用，但它完成了工作。

# c# - 从路径名获取图像对象

> ID：432245
> 
> 赞同：9
> 
> 时间：2009-01-11T02:41:43.770
> 
> 标签：c#, .net, image

给定路径和文件名如何获取`Image`对象：

```
Image image = ...(filename) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-11T02:44:37.307

你想调用[类的](http://msdn.microsoft.com/en-us/library/e6ytk052.aspx)[静态`FromFile`方法`Image`](http://msdn.microsoft.com/en-us/library/e6ytk052.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-11T02:59:16.700

另一种选择是使用 Bitmap 对象（继承自 Image），如下所示：

```
Bitmap bitmap = new Bitmap(imagePath); 
```

（这适用于所有图像格式，而不仅仅是名称可能暗示的 *.bmp。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T05:48:46.840

如果您正在使用内存中的图像，我发现 bobpowell.net 有一个很棒的站点，用于在 C# 中进行 GDI 工作。

不。我与鲍勃·鲍威尔没有任何关系、关联或雇用。我真的很喜欢他的工作。=)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-08-19T12:42:57.120

```
// Get original filename with extention
            string filenameWithPath = "C:\pictures\peanutbutterjellytime.jpg;
            filename = System.IO.Path.GetFileName(filenameWithPath); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-25T19:19:18.193

此外，如果您在获取资源路径（最棘手的部分）时遇到问题，您可以执行以下操作：

```
Assembly myAssembly = Assembly.GetExecutingAssembly();
string[] names = myAssembly.GetManifestResourceNames();
foreach (string name in names)
{
   Console.WriteLine( name );
} 
```

其中显示了资源的所有路径。

# visual-studio - 我的 Visual Studio 项目中目录结构的最佳做法是什么？

> ID：432257
> 
> 赞同：0
> 
> 时间：2009-01-11T02:47:03.917
> 
> 标签：visual-studio

我有这个：

解决方案名称：Foo.sln

组装：Foo.Bar

命名空间是：

Foo.Bar.Views
Foo.Bar.Model
Foo.Bar.BusinessObjects
Foo.Bar.Services

目录结构应该是这样吗？

```
__Foo/Foo.Bar/Foo.Bar.View__ or __Foo/Bar/View__ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T02:52:05.777

如果您保留“自动命名空间”的 Visual Studio 选项，则需要有 Foo/Bar/Views。由于这是 Visual Studio 的默认行为，因此人们将最习惯于此。此外，它还可以防止您的文件夹名称/路径过长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T02:54:32.620

这完全是个人喜好。我会选择后者。

问自己一个问题，“我是否通过在子文件夹中重复 Foo 和 Bar 添加任何有用的信息？” 在我看来，这里的答案是否定的，仅仅是因为信息是多余的。您还给自己制造了维护问题；如果你需要重命名 Bar 你现在必须重命名 Foo.Bar, Foo.Bar.View, Foo.Bar.Model ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T02:51:14.623

好吧，它可以是你想要的任何东西。两者都是有效的，但前者可能会变得有点多余并导致目录层次结构有点让人眼花缭乱/令人望而却步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T02:53:38.957

Foo/Bar/View 似乎很自然。此外，MSVS 倾向于将解决方案文件夹映射到命名空间（即，如果您将 Abc 文件夹添加到您的解决方案，您添加到该文件夹​​的每个类都将位于 root_namespace.Abc 命名空间中）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-30T17:40:08.213

Foo/Bar/View 似乎是一个更好的选择，如果将单个文件命名为单个类型（例如 Foo.Bar.View.IView => Foo/Bar/View/IView.cs），则更多。

这是一个很好的模式，可以更轻松地查找类型、编写源代码、执行一些指标等。

# linq-to-sql - Linq2Sql 多对多关系和插入新对象的问题

> ID：432283
> 
> 赞同：4
> 
> 时间：2009-01-11T03:04:06.080
> 
> 标签：linq-to-sql, many-to-many

我正在尝试做一个简单的 linq 2 sql 多对多，插入一些数据，操作。

这是代表多对多的股票 Northwind 模型：

[替代文字 http://www.iaingalloway.com/images/linq-detail.jpg](http://www.iaingalloway.com/images/linq-detail.jpg)

现在我要做的是插入一个新订单，如果产品不存在，那么在同一交易中同时插入该产品。我得到的错误是：

```
System.Data.Linq.DuplicateKeyException: Cannot add an entity with a
 key that is already in use. 
```

所以这是我的（伪）代码：

```
using (SqlContext db = new SqlContext())
{
    // Get existing or create a new instance.
    Order newOrder = GetOrder(order.Id) ?? new Order();
    // Left to right stuff.
    newOrder.Foo = order.Foo;

    // Now associate this new order to a product (which might not exist).
    if (!order.ProductList.IsNullOrEmpty())
    {
        // We have some products...

        IList<Order_Detail> orderDetailList = new List<Order_Detail>();
        foreach(Models.Product product in order.ProductList)
        {
            // Associate each product to the a new order_detail.
            orderDetailList.Add(new Order_Detail
                                    {
                                        Product = new SqlContext.Product
                                                      {
                                                          Foo = product.Foo
                                                      }
                                    });
        }

        // Now associate all the order_details to this order.
        newOrder.Order_Details.AddRange(orderDetailList);

        if (newOrder.Id <= 0)
            db.InsertOnSubmit(newOrder);

        db.SubmitChanges();   // <-- exception throw here.
    }
} 
```

我假设我需要先保存产品，然后再尝试保存订单？我很混乱 ：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T06:40:05.397

```
// Associate each product to the a new order_detail.
orderDetailList.Add(new Order_Detail
{
    Product = new SqlContext.Product
    {
        Foo = product.Foo
    }
}); 
```

这里有一个问题是您创建了一个新产品来设置您的 Order_Detail.Product 属性。相反，您应该获取来自数据库的产品并将其设置在属性上。

我不确定 order.ProductList 里面有什么 - 如果这些产品是从数据库中加载的，那么您应该将它们直接设置为您的 Order_Detail.Product 而不是执行新的 SqlContext.Product。

**@jfar** L2S 确实支持多对多关系，您的订单上不能有属性 Products（在这种情况下，这实际上是一件好事，因为 OrderDetails 具有 Quantity 和其他属性）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-01-11T05:46:09.280

Linq2Sql 不支持多对多关系。:(

有几个解决方法：

[http://www.iaingalloway.com/many-to-many-relationships-in-linq-to-sql](http://blogs.msdn.com/mitsu/archive/2008/03/19/how-to-implement-a-many-to-many-relationship-using-linq-to-sql-part-ii-add-remove-support.aspx)

[http://blogs.msdn.com/mitsu/archive/2008/03/19/how-to-implement-a-many-to-many-relationship-using-linq-to-sql-part-ii-add-删除-support.aspx](http://blogs.msdn.com/mitsu/archive/2008/03/19/how-to-implement-a-many-to-many-relationship-using-linq-to-sql-part-ii-add-remove-support.aspx)

奇怪的是您的数据库架构的图片与其中一篇文章相同......

# actionscript - 在 ActionScript 和 Lingo 之间交换信息

> ID：432287
> 
> 赞同：0
> 
> 时间：2009-01-11T03:07:45.713
> 
> 标签：actionscript, lingo

我有一个术语脚本，它为 Flash 电影运行一些数据处理。我可以通过将以下内容放入我的一种方法中来从 Flash 调用我的 Lingo 函数：

```
getURL("Lingo: myMethod"); 
```

我可以将参数从 flash 传递到 lingo，如下所示：

```
getURL("Lingo: myMethod param"); 
```

但是，如果 myMethod 返回一个值，我似乎无法将它发送回 ActionScript。我如何编码以下内容：

```
var myVar = getURL("Lingo: myMethod"); 
```

其中 myMethod 定义为：

```
on myMethod
    --do something
    return 5
end myMethod 
```

我们将 Flash 9 与 CS 3 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T03:18:27.160

`ExternalInterface`假设您使用的是 Flash 8 或更高版本，您应该能够访问 Lingo ：

```
import flash.system.ExternalInterface;
var valueFromLingo = ExternalInterface.call("myMethod");
trace(valueFromLingo); // -> 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-24T21:38:15.767

@wulong：包是flash.external。*，而不是 flash.system。*

# language-agnostic - id 混淆的 1-1 映射

> ID：432291
> 
> 赞同：11
> 
> 时间：2009-01-11T03:14:56.310
> 
> 标签：language-agnostic, url, encryption, hash

我使用顺序 ID 作为主键，并且在某些情况下我不希望这些 ID 对用户可见，例如，我可能希望避免使用 ?invoice_id=1234 等允许用户猜测系统发票数量的 URL作为一个整体正在发行。

我可以添加一个带有 GUID 的数据库字段，或者从哈希函数、随机字符串和/或数字基转换中产生的东西，但是这种方案有三个我觉得烦人的问题：

1.  必须分配额外的数据库字段。我知道我可以使用 GUID 作为我的主键，但我的自动增量整数 PK 对于大多数用途来说是正确的，我不想改变它。

2.  不得不考虑散列/GUID 冲突的可能性。我完全同意所有关于 GUID 碰撞可能与自燃或其他什么的论点，但忽略例外情况，因为它们是例外的，这违背了我所学过的所有其他东西，即使我知道它仍然困扰着我我应该更关心其他事情。

3.  我不知道如何安全地修剪基于散列的标识符，所以即使我的私有 id 是 16 位或 32 位，我仍然会使用 128 位生成的标识符，这些标识符在 url 中是令人讨厌的。

我对 id 范围的 1-1 映射感兴趣，可拉伸或可收缩，例如 16 位 id 映射到 16 位 id，32 位 id 映射到 32 位 id 等，这会阻止某人尝试猜测一段时间内分配的 id 总数或 id 分配率。

例如，如果我的用户 id 是 16 位整数 (0..65535)，那么有点混淆 id 分配的转换示例是函数 f(x) = (x mult 1001) mod 65536。内部 id 序列1, 2, 3 的公共 id 序列变为 1001, 2002, 3003 的公共 id 序列。从碱基转换进一步混淆，例如到碱基 36，序列变为 'rt'、'1jm'、'2bf'。当系统收到对 url ?userid=2bf 的请求时，它会从基数 36 转换为 3003，并应用逆变换 g(x) = (x mult 1113) mod 65536 以返回内部 id=3。

这种方案足以阻止临时用户的随意观察，但它很容易被有兴趣尝试解开谜题的人解决。任何人都可以提出一些更强大但在没有特殊库的情况下很容易在 PHP 中实现的东西吗？这已经接近于自己滚动的加密方案，所以也许有一种适当的加密算法可以广泛使用并具有上述可拉伸性？

编辑：退后一点，在[codinghorror](https://blog.codinghorror.com/primary-keys-ids-versus-guids/)上讨论了从三种键中选择的一些讨论——代理（基于guid）、代理（基于整数）、自然。在这些方面，我试图向用户隐藏一个整数代理键，但我正在寻找一些可收缩的东西，使 url 不会太长，我不知道如何使用标准的 128 位 GUID . 有时，正如评论者公主在下面建议的那样，这个问题可以用一个自然的关键来回避。

编辑 2/总结：

*   鉴于我提出的问题的限制（可扩展性、可逆性、易于实施），到目前为止，最合适的解决方案似乎是 Somer 和 Breton 建议的基于 XOR 的混淆。
*   假设我可以通过默默无闻来实现混淆/安全之外的任何事情，这是不负责任的。它是一个整数序列的知识可能是任何有能力的攻击者都可以利用的婴儿床。
*   我对额外数据库字段的想法进行了更多思考。额外字段的一个优点是，对于那些试图通过查看数据库来熟悉系统的未来程序员来说，它变得更加简单。否则，他们将不得不深入研究源代码（或文档，咳咳），以弄清楚对给定 url 的请求如何解析为数据库中的给定记录。
*   如果我允许额外的数据库字段，那么问题中的一些其他假设变得无关紧要（例如，转换不需要是可逆的）。这变成了一个不同的问题，所以我把它留在那里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-11T04:46:07.280

我发现简单的 XOR 加密最适合 URL 混淆。您可以继续使用您正在使用的任何序列号而无需更改。进一步的 XOR 加密不会增加源字符串的长度。如果您的文本是 22 字节，则加密字符串也将是 22 字节。很难像 rot 13 那样被猜到，但不像 DSE/RSA 那样重量级。

在网上搜索 PHP XOR 加密以找到一些实现。我找到的第一个是[here](http://www.jonasjohn.de/snippets/php/xor-encryption.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T06:07:31.437

我自己以业余的方式玩弄过这种东西，并得出了一种涉及混合基数的古怪数字加扰算法。基本上我有一个函数可以将 0-N 之间的数字映射到 0-N 范围内的另一个数字。对于 URL，然后我将该数字映射到几个英文单词。（单词更容易记住）。

我所做的一个简化版本，没有混合基数：你有一个 32 位的数字，所以提前，有一个 32 位长的密钥，并将密钥与你的输入数字异或。然后以确定的重新排序将这些位打乱。（可能基于您的密码）。

这样做的好处是

1.  没有冲突，只要你每次都以相同的方式洗牌和异或
2.  无需将混淆的密钥存储在数据库中
3.  仍然在内部使用您订购的 IDS，因为您可以反转混淆
4.  您可以多次重复该操作以获得更模糊的结果。

如果您喜欢混合基数版本，则基本相同，除了我添加了将输入转换为混合基数的步骤，使用最大范围的素数作为数字的基数。然后我将数字打乱，将基数与数字保持一致，然后将其转回标准整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T03:51:13.163

您可能会发现重新考虑使用 GUID 的想法很有用，因为您可以以不受冲突影响的方式构造 GUID。

查看[有关 GUID 的 Wikipedia 页面](http://en.wikipedia.org/wiki/GUID)——“类型 1”算法使用 PC 的 MAC 地址和当前日期/时间作为输入。这保证了根本不可能发生冲突。

或者，如果您在数据库中创建一个 GUID 列作为替代键（继续使用您的自动增量主键），请将其定义为唯一的。然后，如果您的 GUID 生成方法确实给出了重复项，您将在插入时收到一个可以处理的适当错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-11T06:55:11.123

我昨天看到了这个问题：[reddit 如何生成字母ID](https://stackoverflow.com/questions/410485/)

我认为这是一个相当不错的方法（而且特别聪明）

它使用 Python

```
def to_base(q, alphabet):
    if q < 0: raise ValueError, "must supply a positive integer"
    l = len(alphabet)
    converted = []
    while q != 0:
        q, r = divmod(q, l)
        converted.insert(0, alphabet[r])
    return "".join(converted) or '0'

def to36(q):
    return to_base(q, '0123456789abcdefghijklmnopqrstuvwxyz') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-11T05:47:36.330

在您的订单表中添加一个 char(10) 字段...称之为“order_number”。

创建新订单后，从 1...9999999999 中随机生成一个整数。检查它是否存在于“order_number”下的数据库中。如果没有，请使用此值更新您的最新行。如果确实存在，请随机选择另一个数字。

对公开可见的 URL 使用“order_number”，可能总是用零填充。

当两个线程尝试同时添加相同的数字时，存在竞争条件问题……如果您真的很担心，您可以做一个表锁，但这是一个大锤子。更新后添加第二个检查，重新选择以确保它是唯一的。递归调用，直到你得到一个唯一的条目。在调用之间停留随机数毫秒，并将当前时间用作随机数生成器的种子。

从[这里](http://code.google.com/p/substruct/source/browse/trunk/plugins/substruct/app/models/order.rb#207 "这里")刷过。

**更新**与使用 Bevan 描述的 GUID 方法一样，如果列被限制为唯一，那么您不必费力。我想这与使用 GUID 没有什么不同，只是客户和客户服务可以更轻松地参考订单。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-06-01T06:19:38.473

我找到了一个更简单的方法。假设您想将 N 个数字伪随机映射到 N 个数字。你从 N 中找到下一个最高的素数，然后你做你的函数

```
prandmap(x) return x * nextPrime(N) % N 
```

这将产生一个每 N 重复（或有一个句点）的函数，在 x=N+1 之前不会产生两次数字。它总是从 0 开始，但之后是伪随机的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-11T03:49:20.793

老实说，加密/解密查询字符串数据是解决这个问题的不好方法。最简单的解决方案是使用 POST 而不是 GET 发送数据。如果用户单击带有查询字符串数据的链接，您必须借助一些[javascript 黑客](http://www.webmasterworld.com/forum83/6115.htm)来通过 POST 发送数据（请记住关闭 Javascript 的用户的可访问性）。这不会阻止用户查看源代码，但至少它可以防止敏感数据被搜索引擎索引，假设您首先尝试隐藏的数据真的那么敏感。

另一种方法是使用自然唯一键。例如，如果您按月向客户开具发票，则“yyyyMM[customerID]”可唯一标识特定用户的特定发票。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-11T06:20:02.783

根据您的描述，就个人而言，我将从使用任何可用的标准加密库开始（我是一名 Java 程序员，但我假设 PHP 必须有一个基本的 AES 加密库）：

*   在数据库上，就像你通常做的那样做关键的事情
*   每当您需要向/从客户端传输密钥时，请使用相当强大的标准加密系统（例如 AES）将密钥转换为/从一串垃圾中转换。作为纯文本，使用（比如说）128 字节的缓冲区，其中包含：（比如说）4 字节的密钥、60 个随机字节，然后是前 64 个字节的 64 字节中等质量哈希（参见数字配方示例）——显然，当您收到这样的字符串时，您会对其进行解密，然后在访问数据库之前检查哈希是否匹配。如果您有点偏执，请发送一个 AES 加密的随机字节缓冲区，并将您的密钥放在任意位置，再加上该缓冲区的安全哈希作为单独的参数。不过，第一个选项可能是出于您的目的在性能和安全性之间进行合理权衡，尤其是与其他安全措施结合使用时。
*   当您每秒处理如此多的发票以致在传输过程中对它们进行 AES 加密的那一天性能太昂贵了，出去给自己买一个带有大量 CPU 的大型胖服务器来庆祝吧。

此外，如果您想隐藏该变量是发票 ID，您可以考虑将其命名为“invoice_id”以外的名称。

# facebook - Facebook 默认个人资料框 FBML

> ID：432292
> 
> 赞同：1
> 
> 时间：2009-01-11T03:16:00.067
> 
> 标签：facebook, fbml

我在 Facebook 上更新了一个应用程序，并试图提供一个新图像，以便在用户添加时显示为一个框。我将 FBML 添加到应用程序的“用户配置文件”选项卡上的默认 FBML 框中，但它仍然显示来自先前应用程序的旧 FBML。谷歌搜索告诉我这可能是 Facebook 缓存的“功能”，但我如何清除所述缓存，以便用户在添加应用程序时获得我希望他们看到的新 FBML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-27T08:52:14.290

仅供参考，这个问题已经过时了。Facebook 不再允许设置默认 FBML，并且默认情况下不会将配置文件框添加到配置文件中。

更新的文档在这里：[https ://developers.facebook.com/docs/reference/rest/profile.setFBML/](https://developers.facebook.com/docs/reference/rest/profile.setFBML/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-14T02:11:38.633

根据最初的设置方式，您有两种选择。

如果它是使用 ref 句柄设置的，您可以简单地更新该句柄，但是如果它被设置为直接 fbml，则您需要遍历所有用户（必须有一个带有 uid 的数据库）并单独更新它们。

# actionscript - 哪个 Flash SWF 编译器使用编译器指令？

> ID：432299
> 
> 赞同：1
> 
> 时间：2009-01-11T03:25:07.100
> 
> 标签：actionscript, compiler-construction, flash, haxe, mtasc

任何现有的可以**理解 #IF #ENDIF**等指令的 Flash SWF 编译器？

**一些 SWF 编译器：（**希望）

*   AS3 编译器 - [Haxe](http://haxe.org/)
*   AS2 编译器 - [MTASC](http://www.mtasc.org/)
*   Adobe Flex 编译器 - [Mxmlc](http://livedocs.adobe.com/flex/15/flex_docs_en/00000860.htm)
*   C# 到 SWF 编译器 - [Debreuil](http://blog.debreuil.com/archive/2004/08/18/376.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T05:46:38.390

我用过`mtasc`，不支持这种条件编译。但是，Flex 3 似乎通过命令行选项`mxmlc` [对此提供了支持。](http://livedocs.adobe.com/flex/3/html/help.html?content=compilers_21.html)`-define`此外，Haxe[完全符合您的要求](https://haxe.org/manual/lf-condition-compilation.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-27T19:03:28.510

MXMLC 编译器也支持条件编译，尽管它非常原始并且实现起来很奇怪。

他们没有实现'ifdef'。相反，我们只是从赋值中获取逗号后面的值。虽然这对于字符串插入很有效，但对于布尔值来说却很混乱。

以下示例将仅编译该方法的“发布”实现：

```
-define=CONFIG::debugging,false -define=CONFIG::release,true 
```

然后在您的源代码中：

```
CONFIG::debugging
private function configure():void {
    // set up for debugging
}

CONFIG::release
private function configure():void {
    // set up for release
} 
```

# sql - 数据建模：当一个表对单个表有多个外键约束时，什么是好的关系设计？

> ID：432320
> 
> 赞同：0
> 
> 时间：2009-01-11T03:49:00.030
> 
> 标签：sql, sql-server, data-modeling

我有 2 张桌子：1\. 员工 2\. 凭证

雇员表有一个主键。Vouchers 表有 3 个引用Employees 表的外键约束。

以下是用于在 SQL Server 中创建两个表及其关系的示例 T-SQL 脚本（不是实际的表脚本）：

```
IF OBJECT_ID('dbo.Vouchers') IS NOT NULL
    DROP TABLE dbo.Vouchers
IF OBJECT_ID('dbo.Employees') IS NOT NULL
    DROP TABLE dbo.Employees
GO

CREATE TABLE Employees
(
  ObjectID     INT    NOT NULL   PRIMARY KEY    IDENTITY
)

CREATE TABLE Vouchers
(
  ObjectID     INT    NOT NULL   PRIMARY KEY    IDENTITY,
  IssuedBy     INT,
  ReceivedBy   INT,
  ApprovedBy   INT,

  CONSTRAINT fk_Vouchers_Employees_IssuedBy FOREIGN KEY (IssuedBy)
                                    REFERENCES Employees (ObjectID)
                                    ON UPDATE CASCADE
                                    ON DELETE NO ACTION,
 CONSTRAINT fk_Vouchers_Employees_ReceivedBy FOREIGN KEY (ReceivedBy)
                                    REFERENCES Employees (ObjectID)
                                    ON UPDATE CASCADE
                                    ON DELETE NO ACTION,
 CONSTRAINT fk_Vouchers_Employees_ApprovedBy FOREIGN KEY (ApprovedBy)
                                    REFERENCES Employees (ObjectID)
                                    ON UPDATE CASCADE
                                    ON DELETE NO ACTION 
) 
```

但是会抛出一个错误：

```
Msg 1785, Level 16, State 0, Line 7
Introducing FOREIGN KEY constraint 'fk_Vouchers_Employees_ReceivedBy' on table 'Vouchers' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints. 
```

我不知道这里有什么有效的解决方案。对关系的要求是：每当删除 Employee 时，将其某些列引用到 Employee 的 Voucher 不会被删除（ON DELETE CASCADE 不是一个选项）。相反，引用到已删除员工的列（IssuedBy、ReceivedBy 和/或 ApprovedBy）的值应设置为 NULL（因为这些列是 NULLABLE）。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T03:55:59.940

严格从关系设计的角度来看，Vouchers 表是三个外键。无论您选择通过 CASCADE 断言还是其他方式强制执行它们，都是一个实现问题，但关系设计仍然存在。假设您想要强制执行，如果三个字段之一不为 NULL，则需要存在匹配记录。或不。关于您是否关心强制执行设计是一个实现问题。

但是，您描述的违规行为将由您承担风险。你问这个问题的事实表明你可能没有完全理解这些选择可能导致沼泽的所有方式。

我认为该错误可能是由于三者中不止一个可能指的是同一员工。

顺便说一句，在极少数情况下，我发现有必要以 CASCDES 有用的方式删除记录。通常这将用于防止数据库太大；随着时间的推移，数据库容量的问题越来越少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T04:10:18.413

我实际上不会删除员工，而是使用触发器设置一个标志以将它们标记为已删除。

我通常不打开更新或删除的级联，而是要求应用程序显式执行这些操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T04:03:15.743

从设计的角度来看，拥有您列出的 3 个外键似乎很好。看起来您收到的错误消息与外键上的 ON UPDATE CASCADE 选项有关（尽管我能够按指定创建表）。无论如何，为了获得您提到的想要的行为，我建议在员工表上使用一个触发器，该触发器在您删除记录之前触发。此触发器将在 Vouchers 表中找到Employees.OjbectID 的实例并将它们设置为NULL。

# objective-c - “stringWithString”与“alloc ... initWithString ... autorelease”

> ID：432322
> 
> 赞同：3
> 
> 时间：2009-01-11T03:49:19.000
> 
> 标签：objective-c, cocoa, string, memory

我已经看到它声称以下内容“几乎等效”：

```
foo([NSString stringWithString:@"blah"])                       # version 1
foo([[[NSString alloc] initWithString:@"blah"] autorelease])   # version 2 
```

上面的内容实际上是等价的还是有任何细微的差别？选择其中一个的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-01-11T03:57:23.133

它们是等价的，但我更喜欢“stringWithString”，因为它更简洁。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-01-11T10:42:41.257

两者在功能上是等效的，但正如 rpetrich 所观察到的，它们内部的运作方式可能略有不同。这对你来说应该没关系，使用对你来说更方便的那个。此外，虽然存在微小的性能差异，但在实践中它对您的应用程序几乎没有影响。

但这一切都忽略了一个关键点：两者都毫无意义。通过编写 @"foo" 你已经有了一个功能齐全的 NSString 对象。无需使用额外的方法来复制字符串；这样做更快更简单：

```
foo(@"blah") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-01-11T04:07:50.150

在大多数情况下，唯一的区别是额外调用`objc_msgSend`.

反编译 NSString 显示，而不是发送`+alloc`它发送`+allocWithZone:NSDefaultMallocZone()`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-11T18:59:33.813

诸如 +stringWithString: 或 +array 之类的方法只是方便的方法，它们总是返回自动释放的对象。这些主要是为了减少为经常创建的类（例如字符串、数组、字典、数字等）编写的代码量。它们严格遵循我上面提到的基本内存管理规则。

# asp.net - ASP.NET MVC 控制器何时进行垃圾收集？

> ID：432327
> 
> 赞同：1
> 
> 时间：2009-01-11T03:53:35.543
> 
> 标签：asp.net, asp.net-mvc, garbage-collection, controller

一旦创建了控制器对象，它何时可用于垃圾收集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T11:27:05.877

通常当没有检测到对该对象的活动引用时。这是由垃圾收集器在内部处理的，因此您不必关心它。

因此，考虑到这一点，在调用承载控制器的 Page_Unload 方法之后，垃圾收集器会收到通知，告知控制器对象已准备好进行处理。

# php - php - 插入多个复选框选择的值

> ID：432332
> 
> 赞同：3
> 
> 时间：2009-01-11T04:00:46.060
> 
> 标签：php, mysql, database, forms

我要参考的网站是

[http://www.iaddesignandstudio.com/offline](http://www.iaddesignandstudio.com/offline)选择报价选项卡

如果一个人在哪里填写此表格并在数字 1 或数字 3 中选择多个复选框。我将如何将这些选定的值插入数据库，以便当我检索用户输入或选择的信息时，我可以看到哪些复选框他/她选择了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T04:11:19.830

提交表单后，您可以通过在属性`[]`末尾添加如下所示将复选框设置在一个数组中：`name`

```
<input type="checkbox" name="services[]" value="Podcasting Services" /> 
Podcasting Services      
<input type="checkbox" name="services[]" value="Local Search" />Local Search 
```

提交表单后，您的`$_POST['services']`变量将是一个包含所有检查值的数组。前任：

```
#var_dump($_POST['services']);
array(2) {
  [0]=>
  string(19) "Podcasting Services"
  [1]=>
  string(12) "Local Search"
} 
```

然后你可以用它做任何你想做的事情，无论是发送电子邮件还是使用以太向数据库添加字段`foreach()`或`implode()`循环值。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T04:07:01.227

我会在数据库中有单独的字段供他们使用。与问题 1 一样，发布的表单可能会提交 $_POST['admycomp'] 和 $_POST['provideresource'] 已被检查。如果是这样，请在数据库字段 admycomp 或 providerresource 中插入 1。这样你就记录了他们检查了哪些字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-07-31T21:57:26.657

我建议将值存储在数据库中是使用 SET 数据类型（例如：[http](http://dev.mysql.com/doc/refman/5.0/en/set.html) ://dev.mysql.com/doc/refman/5.0/en/set.html ）。这将以存储有效的方式将复选框组中的每个复选框值存储在单个列中。您可能需要如上所述使用 implode 来创建 SQL 查询以插入您的集合。

# c# - Asp.Net ViewState 与 RegisterClientScriptBlock 丢失

> ID：432341
> 
> 赞同：0
> 
> 时间：2009-01-11T04:12:30.450
> 
> 标签：c#, asp.net, javascript

我正在使用在服务器端生成的 Javascript 验证邮政编码，并在单击 LinkBut​​ton 时注入。然后，我通过在页面加载时调用服务器端函数来检索返回值。

这很好用，但问题是在 PostBack 之后 ViewState 完全丢失了。下面是代码，从 page_load 事件开始，按钮单击事件，然后是从 page_load 事件调用的回调。

有没有办法可以以某种方式保存 ViewState，也许很容易在会话变量中保存？或者有没有我可以使用的解决方法？

```
// In Page_Load
if (Request.Form["__EVENTTARGET"] == "CallFunction") {
    GetValidateZipCodeScriptReturnValue(Boolean.Parse(Request.Form["__EVENTARGUMENT"].ToString()));
}

// OnClick for LinkButton
private bool ValidateZipCode(string zip) {
    StringBuilder script = new StringBuilder();
    script.Append("<script language='javascript' type='text/javascript'>");
    script.Append(@"var regex = /^\d{5}$|^\d{5}-\d{4}$/;");
    script.Append("__doPostBack('CallFunction', regex.test(" + zip + "));");
    script.Append("</script>");

    Type t = GetType();

    if (!ClientScript.IsClientScriptBlockRegistered(t, "ValidateZipCodeScript")) {
        ClientScript.RegisterClientScriptBlock(t, "ValidateZipCodeScript", script.ToString());
    }

    return false;
}

// Method called on PostBack to get the return value of the javascript
private void GetValidateZipCodeScriptReturnValue(bool valid) {
    m_ZipCode = uxZip.Text;

    if (valid) {
        Response.Redirect(string.Format("~/checkout/overview.aspx?pc={0}&zc={1}",
        ProductCode, ZipCode));
    }
    else {
        Alert.Show("The entered zip code is invalid. Please ensure the zip code is a valid zip code.");
        SetupPostBackViewState();
        ScrollToZipCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-11T04:22:36.717

Why not just use the `OnClick` event of the `LinkButton`? Or, better yet, look into the [`CustomValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx) control, since it looks like all you're trying to do is validate a zip code and that's exactly what a `CustomValidator` can do (you'll need to look at the [`ClientValidationFunction`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.clientvalidationfunction.aspx), which is where you want to put your regex test).

# java - 如何在 Hibernate 中进行基于自定义查询的集合映射？

> ID：432347
> 
> 赞同：2
> 
> 时间：2009-01-11T04:24:07.073
> 
> 标签：java, xml, hibernate, mapping, hql

我有一个映射到一组对象的对象，非常简单。但是，我真正想做的是在该映射上设置一些标准。这是当前的映射：

```
 <set name="ops" inverse="true" cascade="all, delete-orphan">
        <key column="cityblock_id" on-delete="cascade"/>
        <one-to-many class="com.tamedtornado.data.Operation"/>
    </set> 
```

现在，我不想只获取所有相关的操作，我只想获取尚未完成、已经完成或其他的操作。Hibernate 文档对此非常安静，尽管一些旧论坛帖子向我展示了一些内容。您显然可以使用 sql-query 标记，但这也不是我想要做的。

无论如何用 HQL 查询来做到这一点？我只想用一个简单的查询来缩小结果范围，并有一些集合图，比如 active_ops 和 completed_ops 等。

干杯，杰森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T11:29:29.680

低于[6.2。在 Hibernate 文档中的集合映射](http://www.hibernate.org/hib_docs/v3/reference/en-US/html_single/#collections-mapping)，您会发现可以在任何集合映射上使用 WHERE 子句：

*where（可选）指定检索或删除集合时要使用的任意 SQL WHERE 条件（如果集合应仅包含可用数据的子集，则很有用）*

您说您想使用 HQL 查询，但我认为这是不可能的。但是由于您只需要在映射中指定一个简单的 WHERE 子句，因此 HQL 和“真正的”SQL 之间并没有太大的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T07:54:47.587

我不确定我是否清楚地理解了您的问题，但您似乎需要在 SQL 查询中使用 where 子句

您应该能够在 HQL 中使用 where 子句或在 hibernate 中使用条件 api 来实现所需的结果：

假设您有一个名为“活动”或“已完成”的状态字段，您的 HQL 应该如下所示：

```
from ops where status="active" 
```

或者如果使用标准 api：

```
List activeOperations = sess.createCriteria(Operation.class)
    .add( Restrictions.equals("status", "active") )
    .list(); 
```

hibernate 教程的第 14 章和第 15 章稍微谈到了这一点： [http ://www.hibernate.org/hib_docs/v3/reference/en/html/index.html](http://www.hibernate.org/hib_docs/v3/reference/en/html/index.html)

# latex - 使用 LaTeX 的“列表”包时，如何显示直引号而不是弯引号？

> ID：432349
> 
> 赞同：24
> 
> 时间：2009-01-11T04:25:29.350
> 
> 标签：latex, miktex

我正在使用[LaTeX](http://www.latex-project.org/)的“[列表](http://en.wikibooks.org/wiki/LaTeX/Packages/Listings)”包来格式化源代码。不幸的是，我得到的是弯引号而不是直引号。由于花引号并不总是指向正确的方向，因此看起来很糟糕。我怎样才能得到直接报价？

我不想更改或过滤源代码本身。过滤代码以将“正确更改为 `` 或 '' 会起作用，但这比在一行上使用多个引号或跨多行的引号更容易完成。或者您可以使用符号或许多其他东西。但我真的很想保持源不变。

示例乳胶：

```
\documentclass{article}
\usepackage{listings}
\begin{document}
\begin{lstlisting}
Fahrenheit=input("What is the Fahrenheit temperature?")
Celsius=(5.0/9.0)*(Fahrenheit-32)
print"The temperature is",Celsius,"degrees Celsius"
\end{lstlisting}
\end{document} 
```

示例输出（在 Windows 上使用[Miktex](http://miktex.org/)）： ![源代码图片](https://farm4.static.flickr.com/3450/3186136899_306b443283_o.png)

（[直接链接到错误输出的图像](https://farm4.static.flickr.com/3450/3186136899_306b443283_o.png)）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-01-11T04:50:02.950

我在文档中看到（应该与 packge 一起分发，但可在[http://www.ctan.org/tex-archive/macros/latex/contrib/listings/listings.pdf](http://www.ctan.org/tex-archive/macros/latex/contrib/listings/listings.pdf)获得）因为`listings`有一个调用 settable 属性**`upquote`**来处理这个问题。

从文档中：

```
upquote=⟨true|false⟩                                                false
  determines whether the left and right quote are printed ‘’ or `'. This 
  key requires the textcomp package if true. 
```

做类似的事情

```
\lstset{upquote=true} 
```

在`begin`ing list 环境之前，或使用

```
\begin{lstlisting}[upquote=true]
...
\end{lstlisting} 
```

* * *

也有可能在适当的语言定义中已经为您设置了 tis 属性（再次参见文档，第 12 页的预定义语言的大列表）。

采用：

```
\lstloadlanguages{<dialects you need>} 
```

在标题中。然后使用上述任一约定来设置语言以选择选项。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-11T08:26:02.123

[dmckee](https://stackoverflow.com/questions/432349/how-do-you-display-straight-quotes-instead-of-curly-quotes-when-using-latexs-li#432387)上面的回答可能有效。如果您放弃最后一个条件，即您允许更改代码，那么有一个更通用的解决方案，每当 (La)TeX 以某种方式渲染一个字符时，我倾向于使用该解决方案，而不是使用`\symbol`命令。我在这里列出它是因为它在其他情况下也很有用：

```
\newcommand{\qq}{\symbol{34}} % 34 is the decimal ascii code for " 
```

然后你的例子：

```
\begin{lstlisting}
...
print{\qq}The temperature is{\qq},Celsius,{\qq}degrees Celsius{\qq}
...
\end{lstlisting} 
```

请注意花括号，它可能会将列表带回 LaTeX 模式（请参阅`escapechars`包的选项。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-11T13:28:42.420

您是否考虑过在列表中使用等宽（打字机）字体？以下示例有效：

```
\documentclass{article}
\usepackage{listings}
\lstset{basicstyle=\ttfamily} % <<< This line added
\begin{document}
\begin{lstlisting}
Fahrenheit=input("What is the Fahrenheit temperature?")
Celsius=(5.0/9.0)*(Fahrenheit-32)
print"The temperature is",Celsius,"degrees Celsius"
\end{lstlisting}
\end{document} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2010-07-28T18:32:52.533

这是一个解决方案

```
\usepackage[T1]{fontenc}  
\usepackage{textcomp}  
\usepackage{lmodern}  

% in the listings package configuration, try:  
literate={"}{\textquotedbl}1, 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2011-01-13T14:32:49.533

我有同样的问题，使用 fontspec，解决方案是*不*设置`\defaultfontfeatures{Mapping=tex-text}`，而是`Mapping=tex-text`专门设置 main 和 sans 字体，并将 tt 字体留给它自己的设备。:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-11-07T03:37:11.910

也许是因为我作为 LaTeX 用户很早就安装了列表，但我很惊讶地发现，如果没有列表包，行为会有所不同。

我的解决方案类似于 David Hanak 的解决方案，但我使用了 LaTeX 备忘单 ( [http://stdout.org/~winston/latex](http://stdout.org/~winston/latex/) )中描述的双引号符号

```
\newcommand{\QQ}[1]{``#1''} 
```

# c# - C# switch 语句是否需要中断？

> ID：432352
> 
> 赞同：4
> 
> 时间：2009-01-11T04:31:30.647
> 
> 标签：c#, switch-statement

C# 是否适用于 C++，需要`break;`per`case:`吗？*..**默认是fall-thru** - 不像VB*

或者一旦发现它会自动破案吗？*..**默认是 break** - 像 VB*

* * *

**编辑：**所以它是两者的组合，***默认为无****- 您必须指定任一中断；或转到；*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T04:33:55.680

每个*案件*都需要*休息；*或C# 中的*goto case语句*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T04:39:11.723

您`break`在 C# 中使用 a，就像在 C++ 中一样。但是，如果您*省略*了中断，则必须将其替换为另一个其他控制传输（例如`goto case 1;`）。

请参阅[http://msdn.microsoft.com/en-us/library/06tc147t(VS.71).aspx](http://msdn.microsoft.com/en-us/library/06tc147t(VS.71).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T04:33:58.410

它需要中断，否则您将收到编译器错误。一个代码块可以有多个案例，但控制权不能落入下一个案例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T04:33:45.760

你需要一些声明，要么 break 要么 goto。

# c++ - C++程序员有必要记住很多Win32 Api吗？

> ID：432361
> 
> 赞同：2
> 
> 时间：2009-01-11T04:36:59.810
> 
> 标签：c++, windows

我总是在 Windows 环境中工作，最常使用 C/C++ 编写程序。Windows 应用程序程序员是否有必要尽可能多地记住 Win32 API？

达扎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T04:39:10.570

好吧，我不能说这会造成伤害，但我认为最好记住如何快速引用 API 文档，而不是真正记住文档本身。这种精神货币（当然数量有限）可以更好地用于记住其他事情，以使您在您的环境中成为更好的开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T04:45:19.950

你不应该担心粗暴的记忆。您可能想了解一些基础知识，例如消息泵、发布消息、资源文件、发布到线程，以及如何在 Win32 中做事的一般要点。在编写您的第一个 Win32 程序之后，您可能会知道这一点。

不过，总的来说，请关注自己在需要时学习做某事的最佳方法。保持良好的参考，例如

Petzold 对[Windows 进行编程](http://www.charlespetzold.com/pw5/)

作为一个程序员，你还有很多其他的东西要学，比如你的问题领域或其他你必须集成的技术，浪费时间在粗鲁的记忆上通常是浪费资源，而且效果不如谷歌或书后面的好索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T04:38:40.710

是的。即使您使用 MFC 或 WTL 之类的框架，您仍然需要使用 Win32 调用来处理许多事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T04:44:41.057

取决于，如果您正在做繁重的 GUI 工作，了解 Win32（带或不带 MFC）将使您受益。

OTOH 如果您正在编写后台任务和服务，我会将尽可能多的 Win32 必要功能与普通代码隔离开来，以使代码尽可能可移植。我曾经工作过的每个地方都有客户端/服务器设置（因为它曾经被称为），随着产品获得普及/行业关注，总会有一个对产品感兴趣的客户出现，但对 Windows 不感兴趣. 如果您的代码中到处都有 Win32 调用，那么移植会很痛苦。

当然，这并不意味着您不应该了解 API。在罗马时...... 我只是说尽可能隐藏这些东西。

简短的回答，还记得各个 API 吗？别傻了。确实要注意许多 API。

# memory-leaks - Velocity CTP2 严重的内存错误

> ID：432364
> 
> 赞同：0
> 
> 时间：2009-01-11T04:38:50.570
> 
> 标签：memory-leaks, appfabric, distributed-caching

当您创建 cachefactory 的实例然后不再使用它时，不会释放在创建对象期间使用的内存。这将对所有 Web 应用程序或可能多次创建 cachfactory 的场景产生重大影响。这种情况的症状将是异常高的内存使用进程之一，在 IIS 中，这很可能导致您的应用程序不得不更频繁地回收，因为它会更快地超出其分配的内存。

下面的代码将显示增加了大约 500MB 是的，我的意思是兆字节的内存使用量！

要复制，请将以下代码放入您的应用程序中：

```
Dim CacheFactory1 As CacheFactory = New CacheFactory()
For i As Int32 = 1 To 1 * (10 ^ 4)
    CacheFactory1 = New CacheFactory()
    CacheFactory1 = Nothing
Next 
```

对此只有两种解决方法。

1.  Velocity 团队修复了这个错误（我相信他们会的）
2.  您需要在应用程序中的静态方法上使用相同的 cachefactory 对象，并在每次要使用缓存时引用它。（这可行，但在我看来不是最佳的。）

我还有一个缓存范围，可用于包装您的缓存方法，并将很快将其发​​布在 codeplex 上。您可以将它包装在您的缓存方法中，就像事务范围一样，它将为您管理锁定和连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-11T04:40:55.013

那么问题在哪里？您应该提交错误，而不是在此处发布，因为 Velocity 团队很可能会监控 Microsoft Connect 的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-16T19:50:07.293

我已经建立了一个范围提供程序来解决这个问题。您可以在此处获取代码。

[http://www.codeplex.com/CacheScope](http://www.codeplex.com/CacheScope)

# vb.net - 从资源文件设置自定义光标

> ID：432379
> 
> 赞同：6
> 
> 时间：2009-01-11T04:45:29.450
> 
> 标签：vb.net, mouse-cursor

在我的 VB.net 项目中，我创建了一个自定义光标 (Window.cur)。如何将其分配给光标而不必使用该文件的完整文件路径？

VB.Net 有 My.Resources 但它不显示嵌入在项目中的游标。

我找到了一个使用如下代码的示例：

```
New Cursor(Reflection.Assembly.GetExecutingAssembly.GetManifestResourceStream("Window.cur") 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-11T17:53:49.873

猜测资源名称可能很困难。要找出答案，请在您的程序上运行 Ildasm.exe。双击“Manifest”并查找 .mresource。

另一种避免猜测的方法：项目+属性，资源选项卡。单击“添加资源”按钮上的箭头，添加现有文件并选择您的 .cur 文件。使您的代码如下所示：

```
Dim ms As New System.IO.MemoryStream(My.Resources.Cursor1)
Button1.Cursor = New Cursor(ms) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T19:37:05.360

谢谢您的帮助！我假设如果我在 Visual Studio IDE 中创建资源，它会将其添加到我的项目中。傻我！

我必须转到 Project 选项卡以使用 Add Resource 添加 Window.Cur 文件（感谢 nobugz！），然后使用他提到的代码：

```
Dim ms As New System.IO.MemoryStream(My.Resources.Window)

Button.Cursor = New Cursor(ms) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T04:51:24.053

您缺少名称空间。您可能想使用：

```
MyNamespace.MySubfolder.Window.cur 
```

编辑：另外，请确保您的项目的构建操作是“嵌入式资源”，否则它将不会包含在您的 dll/exe 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T16:26:05.947

假设您将“Cursor1.cur”指定为控件“Button1”的光标。

在您的 Form.Load 事件中，您会执行以下操作 -

```
Button1.Cursor = New Cursor(Me.GetType(), "Cursor1.cur") 
```

# wpf - WPF - 使用标准按钮创建带有向上和向下箭头的按钮

> ID：432384
> 
> 赞同：76
> 
> 时间：2009-01-11T04:48:11.457
> 
> 标签：wpf, button

我想使用标准按钮背景创建一些向上和向下按钮，但带有黑色箭头。

使用 WPF 完成此任务的最佳方法是什么？

马尔科姆

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2009-01-11T04:54:58.510

我发现 Marlett（Windows 中内置的一种字体）对这类事情很方便。

```
<Button FontFamily="Marlett" FontSize="20" Content="5"/>
<Button FontFamily="Marlett" FontSize="20" Content="6"/> 
```

输出：

[![在此处输入图像描述](https://i.stack.imgur.com/gNHhp.png)](https://i.stack.imgur.com/gNHhp.png)

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2009-01-11T22:03:04.190

如果不提及几何迷你语言（或[路径标记语法](http://msdn.microsoft.com/en-us/library/ms752293.aspx)）以获得更紧凑的形状定义，任何关于此主题的讨论都是不完整的：-

```
 <Button>
    <Path Fill="Black" Data="M 0 6 L 12 6 L 6 0 Z"/>
  </Button>
  <Button>
    <Path Fill="Black" Data="M 0 0 L 6 6 L 12 0 Z"/>
  </Button> 
```

第一个描述移动到 0,6 线到 12,6 线到 6,0，然后关闭形状 (Z)。

还有一个曲线语法。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2015-03-01T19:50:45.770

现在首选的方法是使用[Segoe UI Symbol](https://msdn.microsoft.com/en-GB/library/windows/apps/jj841126.aspx)。它取代了 Marlett 并提供了许多有用的字形。上下将是

```
<Button FontFamily="Segoe UI Symbol" Content="&#xE1FD;"/>    
<Button FontFamily="Segoe UI Symbol" Content="&#xE110;"/> 
```

呈现为：

[![在此处输入图像描述](https://i.stack.imgur.com/Bewvo.png)](https://i.stack.imgur.com/Bewvo.png)

此字体预装在所有版本的 Windows 7+ 上。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-01-11T05:00:10.947

您可以创建一个`Polygon`代表您的上下三角形，然后将它们设置为按钮的内容：

```
<Button>
  <Polygon 
    Points="300,200 450,200 375,300 300,200"
    Stroke="Black">
    <Polygon.Fill>
      <SolidColorBrush Color="Black" />
    </Polygon.Fill>
  </Polygon>
</Button> 
```

您可以调整这些以绘制不同的图形，但这通常是您将用于基本几何图形的 XAML。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-04T07:04:27.093

如果您想要一个带有基本矩形的箭头，您可以使用此示例...

```
<Button >
   <Polygon   Stretch="Fill"  Fill="Black" Points="0,0 0,30 0,10 30,10 30,-10 45,10 30,30 30,20 0,20 0,0 30,0 30,10 0,10" />
</Button> 
```

# python - Python中的SFTP？（平台无关）

> ID：432385
> 
> 赞同：212
> 
> 时间：2009-01-11T04:48:19.177
> 
> 标签：python, sftp

我正在开发一个简单的工具，该工具将文件传输到硬编码位置，密码也是硬编码的。我是 python 新手，但感谢 ftplib，这很容易：

```
import ftplib

info= ('someuser', 'password')    #hard-coded

def putfile(file, site, dir, user=(), verbose=True):
    """
    upload a file by ftp to a site/directory
    login hard-coded, binary transfer
    """
    if verbose: print 'Uploading', file
    local = open(file, 'rb')    
    remote = ftplib.FTP(site)   
    remote.login(*user)         
    remote.cwd(dir)
    remote.storbinary('STOR ' + file, local, 1024)
    remote.quit()
    local.close()
    if verbose: print 'Upload done.'

if __name__ == '__main__':
    site = 'somewhere.com'            #hard-coded
    dir = './uploads/'                #hard-coded
    import sys, getpass
    putfile(sys.argv[1], site, dir, user=info) 
```

问题是我找不到任何支持 sFTP 的库。安全地做这样的事情的正常方法是什么？

编辑：多亏了这里的答案，我已经让它与 Paramiko 一起工作，这就是语法。

```
import paramiko

host = "THEHOST.com"                    #hard-coded
port = 22
transport = paramiko.Transport((host, port))

password = "THEPASSWORD"                #hard-coded
username = "THEUSERNAME"                #hard-coded
transport.connect(username = username, password = password)

sftp = paramiko.SFTPClient.from_transport(transport)

import sys
path = './THETARGETDIRECTORY/' + sys.argv[1]    #hard-coded
localpath = sys.argv[1]
sftp.put(localpath, path)

sftp.close()
transport.close()
print 'Upload done.' 
```

再次感谢！

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2009-01-11T05:04:22.937

[Paramiko](https://www.paramiko.org/)支持 SFTP。我用过它，而且我用过 Twisted。两者都有自己的位置，但您可能会发现从 Paramiko 开始更容易。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2014-05-27T23:05:35.770

您应该查看 pysftp [https://pypi.python.org/pypi/pysftp](https://pypi.python.org/pypi/pysftp) 它依赖于 paramiko，但将最常见的用例包装到几行代码中。

```
import pysftp
import sys

path = './THETARGETDIRECTORY/' + sys.argv[1]    #hard-coded
localpath = sys.argv[1]

host = "THEHOST.com"                    #hard-coded
password = "THEPASSWORD"                #hard-coded
username = "THEUSERNAME"                #hard-coded

with pysftp.Connection(host, username=username, password=password) as sftp:
    sftp.put(localpath, path)

print 'Upload done.' 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-06-06T14:56:58.837

这是使用 pysftp 和私钥的示例。

```
import pysftp

def upload_file(file_path):

    private_key = "~/.ssh/your-key.pem"  # can use password keyword in Connection instead
    srv = pysftp.Connection(host="your-host", username="user-name", private_key=private_key)
    srv.chdir('/var/web/public_files/media/uploads')  # change directory on remote server
    srv.put(file_path)  # To download a file, replace put with get
    srv.close()  # Close connection 
```

pysftp 是一个易于使用的 sftp 模块，它利用了 paramiko 和 pycrypto。它提供了一个简单的 sftp 接口。你可以用 pysftp 做的其他事情非常有用：

```
data = srv.listdir()  # Get the directory and file listing in a list
srv.get(file_path)  # Download a file from remote server
srv.execute('pwd') # Execute a command on the server 
```

更多命令和关于 PySFTP[的信息](http://pysftp.readthedocs.org/en/release_0.2.8/cookbook.html)。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-12-08T13:29:52.827

如果你想要简单，你可能还想看看[Fabric](http://www.fabfile.org/)。它是一个类似于 Ruby 的 Capistrano 的自动化部署工具，但更简单，当然也适用于 Python。它建立在 Paramiko 之上。

您可能不想进行“自动部署”，但 Fabric 仍然非常适合您的用例。向您展示 Fabric 是多么简单：您的脚本的 fab 文件和命令看起来像这样（未经测试，但 99% 肯定它会工作）：

fab_putfile.py：

```
from fabric.api import *

env.hosts = ['THEHOST.com']
env.user = 'THEUSER'
env.password = 'THEPASSWORD'

def put_file(file):
    put(file, './THETARGETDIRECTORY/') # it's copied into the target directory 
```

然后使用 fab 命令运行该文件：

```
fab -f fab_putfile.py put_file:file=./path/to/my/file 
```

你完成了！:)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-27T08:29:15.110

使用 RSA 密钥然后参考[这里](https://repl.it/@abhijeetbhanjadeo/SFTP-with-RSAKey-1#main.py)

片段：

```
import pysftp
import paramiko
from base64 import decodebytes

keydata = b"""AAAAB3NzaC1yc2EAAAADAQABAAABAQDl""" 
key = paramiko.RSAKey(data=decodebytes(keydata)) 
cnopts = pysftp.CnOpts()
cnopts.hostkeys.add(host, 'ssh-rsa', key)

with pysftp.Connection(host=host, username=username, password=password, cnopts=cnopts) as sftp:   
  with sftp.cd(directory):
    sftp.put(file_to_sent_to_ftp) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-08-11T20:20:54.480

[fsspec](https://filesystem-spec.readthedocs.io/)是一个很好的选择，它提供了一个类似[sftp](https://filesystem-spec.readthedocs.io/en/latest/api.html#fsspec.implementations.sftp.SFTPFileSystem)实现的文件系统。

```
from fsspec.implementations.sftp import SFTPFileSystem
fs = SFTPFileSystem(host=host, username=username, password=password)

# list a directory
fs.ls("/")

# open a file
with fs.open(file_name) as file:
    content = file.read() 
```

另外值得注意的是 fsspec 在[实现](https://filesystem-spec.readthedocs.io/en/latest/_modules/fsspec/implementations/sftp.html#SFTPFileSystem)中使用了 paramiko 。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-01-11T04:51:32.993

[Twisted](http://twistedmatrix.com/trac/)可以帮助你做你正在做的事情，查看他们的文档，有很多例子。它也是一个成熟的产品，背后有一个庞大的开发者/用户社区。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-28T22:41:46.323

有一堆提到 pysftp 的答案，所以如果你想要一个围绕 pysftp 的上下文管理器包装器，这里有一个解决方案，它的代码更少，使用时看起来像下面这样

```
path = "sftp://user:p@ssw0rd@test.com/path/to/file.txt"

# Read a file
with open_sftp(path) as f:
    s = f.read() 
print s

# Write to a file
with open_sftp(path, mode='w') as f:
    f.write("Some content.") 
```

（更完整的）示例： http: [//www.prschmid.com/2016/09/simple-opensftp-context-manager-for.html](http://www.prschmid.com/2016/09/simple-opensftp-context-manager-for.html)

如果您第一次无法连接，此上下文管理器恰好具有自动重试逻辑（令人惊讶的是，这种情况发生的频率比您在生产环境中预期的要频繁......）

上下文管理器要点`open_sftp`：[https ://gist.github.com/prschmid/80a19c22012e42d4d6e791c1e4eb8515](https://gist.github.com/prschmid/80a19c22012e42d4d6e791c1e4eb8515)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-09-13T14:15:44.593

帕拉米科太慢了。使用 subprocess 和 shell，这里是一个例子：

```
remote_file_name = "filename"
remotedir = "/remote/dir"
localpath = "/local/file/dir"
    ftp_cmd_p = """
    #!/bin/sh
    lftp -u username,password sftp://ip:port <<EOF
    cd {remotedir}
    lcd {localpath}
    get {filename}
    EOF
    """
subprocess.call(ftp_cmd_p.format(remotedir=remotedir,
                                 localpath=localpath,
                                 filename=remote_file_name 
                                 ), 
                shell=True, stdout=sys.stdout, stderr=sys.stderr) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-04-15T17:52:03.203

[PyFilesystem](https://www.pyfilesystem.org/)及其[sshfs](https://pypi.org/project/fs.sshfs/)是一种选择。它在底层使用 Paramiko，并在顶部提供了更好的独立于平台的界面。

```
import fs

sf = fs.open_fs("sftp://[user[:password]@]host[:port]/[directory]")
sf.makedir('my_dir') 
```

或者

```
from fs.sshfs import SSHFS
sf = SSHFS(... 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2017-02-20T05:33:36.417

您可以使用[pexpect 模块](https://pypi.python.org/pypi/pexpect/4.2.1)

[这是一个很好的介绍帖子](http://www.pythonforbeginners.com/systems-programming/how-to-use-the-pexpect-module-in-python)

```
child = pexpect.spawn ('/usr/bin/sftp ' + user@ftp.site.com )
child.expect ('.* password:')
child.sendline (your_password)
child.expect ('sftp> ')
child.sendline ('dir')
child.expect ('sftp> ')
file_list = child.before
child.sendline ('bye') 
```

我没有对此进行测试，但它应该可以工作

# php - 计算两个日期之间的时间差，并给出“2天3小时前”这样的答案

> ID：432398
> 
> 赞同：2
> 
> 时间：2009-01-11T04:56:56.570
> 
> 标签：php, date

是否有任何用 php 编写的公开可用的类/函数，它们需要一个时间戳，并以天数、月数、年数等形式返回自那时以来经过的时间？基本上，我想要生成与此站点上的每个条目一起呈现的自发布时间的相同功能（以及在 digg 和其他站点的负载上）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T05:10:16.043

这是作为 wordpress 插件编写的，但您可以提取相关的 PHP 代码没问题：[Fuzzy date-time](http://www.splee.co.uk/2005/04/21/fuzzy-datetime-v-06-beta/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T05:28:44.947

这是我为此编写的 Zend Framework ViewHelper，您可以轻松修改它以不使用 ZF 特定代码：

```
/**
 * @category    View_Helper
 * @package     Custom_View_Helper
 * @author      Chris Jones <leeked@gmail.com>
 * @license     New BSD License
 */
class Custom_View_Helper_HumaneDate extends Zend_View_Helper_Abstract
{
    /**
     * Various time formats
     */
    private static $_time_formats = array(
        array(60, 'just now'),
        array(90, '1 minute'),                  // 60*1.5
        array(3600, 'minutes', 60),             // 60*60, 60
        array(5400, '1 hour'),                  // 60*60*1.5
        array(86400, 'hours', 3600),            // 60*60*24, 60*60
        array(129600, '1 day'),                 // 60*60*24*1.5
        array(604800, 'days', 86400),           // 60*60*24*7, 60*60*24
        array(907200, '1 week'),                // 60*60*24*7*1.5
        array(2628000, 'weeks', 604800),        // 60*60*24*(365/12), 60*60*24*7
        array(3942000, '1 month'),              // 60*60*24*(365/12)*1.5
        array(31536000, 'months', 2628000),     // 60*60*24*365, 60*60*24*(365/12)
        array(47304000, '1 year'),              // 60*60*24*365*1.5
        array(3153600000, 'years', 31536000),   // 60*60*24*365*100, 60*60*24*365
    );

    /**
     * Convert date into a pretty 'human' form
     *      Now with microformats!
     *
     * @param string|Zend_Date $date_from Date to convert
     * @return string
     */
    public function humaneDate($date_from)
    {
        $date_to = new Zend_Date(null, Zend_Date::ISO_8601);

        if (!($date_from instanceof Zend_Date)) {
            $date_from = new Zend_Date($date_from, Zend_Date::ISO_8601);
        }

        $dateTo     = $date_to->getTimestamp();   // UnixTimestamp
        $dateFrom   = $date_from->getTimestamp(); // UnixTimestamp
        $difference = $dateTo - $dateFrom;
        $message    = '';

        if ($dateFrom <= 0) {

            $message = 'a long time ago';

        } else {

            foreach (self::$_time_formats as $format) {

                if ($difference < $format[0]) {

                    if (count($format) == 2) {
                        $message = $format[1] . ($format[0] === 60 ? '' : ' ago');
                        break;
                    } else {
                        $message = ceil($difference / $format[2]) . ' ' . $format[1] . ' ago';
                        break;
                    }

                }
            }

        }

        return sprintf('<abbr title="%sZ">%s</abbr>',
            $date_from->get('YYYY-MM-ddTHH:mm:ss'),
            $message
        );
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T05:14:19.250

我不确定是否会有针对此的课程，但我在 Google 上找到了几种实现您想要的方法：

*   [http://www.phpbuilder.com/board/showpost.php?p=10100477&postcount=2](http://www.phpbuilder.com/board/showpost.php?p=10100477&postcount=2)
*   [http://subesh.com.np/2008/06/calculating-the-difference-between-timestamps-in-php/](http://subesh.com.np/2008/06/calculating-the-difference-between-timestamps-in-php/)
*   [http://snipplr.com/view/10674/esupergood--formattime-function-tweak/](http://snipplr.com/view/10674/esupergood--formattime-function-tweak/)

也许其中一个适合或需要，或者您可以轻松适应它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-30T14:46:49.150

谷歌哥知道答案：

之前有人问过这个问题：

[如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

这是我见过的最好的版本（人类可读的格式）：

[http://www.if-not-true-then-false.com/2010/php-calculate-real-differences-between-two-dates-or-timestamps/](http://www.if-not-true-then-false.com/2010/php-calculate-real-differences-between-two-dates-or-timestamps/)

PHP 5+ 现在内置了一些东西：

[http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

我个人一直在寻找计算天数（以小数形式），这样我就可以细分为年等。

```
function daysDifference($d1,$d2)
    {
    $ts2    =   strtotime($d1);
    $ts1    =   strtotime($d2);
        $seconds    = abs($ts2 - $ts1); # difference will always be positive
    $days = $seconds/60/60/24;
    return $days;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T08:53:45.413

此函数返回一个数值数组。您可以提取年、月、日、小时、分钟和秒。例如，echo $result[3] 可以得到几个小时，echo $result[4] 可以得到几分钟。（我借用了这段代码）。干杯！

```
function dateDiff($time1, $time2, $precision = 6)
    {
        // If not numeric then convert texts to unix timestamps
        if (!is_int($time1)) {
            $time1 = strtotime($time1);
        }
        if (!is_int($time2)) {
            $time2 = strtotime($time2);
        }

        // If time1 is bigger than time2
        // Then swap time1 and time2
        if ($time1 > $time2) {
            $ttime = $time1;
            $time1 = $time2;
            $time2 = $ttime;
        }

        // Set up intervals and diffs arrays
        $intervals = array('year', 'month', 'day', 'hour', 'minute', 'second');
        $diffs     = array();

        // Loop thru all intervals
        foreach ($intervals as $interval) {
            // Set default diff to 0
            $diffs[$interval] = 0;
            // Create temp time from time1 and interval
            $ttime = strtotime("+1 " . $interval, $time1);
            // Loop until temp time is smaller than time2
            while ($time2 >= $ttime) {
                $time1 = $ttime;
                $diffs[$interval]++;
                // Create new temp time from time1 and interval
                $ttime = strtotime("+1 " . $interval, $time1);
            }
        }

        $count = 0;
        $times = array();
        // Loop thru all diffs
        foreach ($diffs as $interval => $value) {
            // Break if we have needed precission
            if ($count >= $precision) {
                break;
            }
            // Add value and interval
            // if value is bigger than 0
            if ($value >= 0) {
                // Add s if value is not 1
                if ($value != 1) {
                    $interval .= "s";
                }
                // Add value and interval to times array
                $times[] = $value; // . " " . $interval;
                $count++;
            }
        }

        // Return string with times
        //return implode(", ", $times);
        return $times;
    } 
```

# html - 如何在 HTML/CSS 中创建表格内斜角？

> ID：432404
> 
> 赞同：1
> 
> 时间：2009-01-11T05:06:10.857
> 
> 标签：html, css, html-table

我正在设计这个论坛布局，我想出了一个很好的设计来绘制论坛表格，但是，我不确定这是否可以在 HTML/CSS 中轻松完成。

在我继续绘制整个布局之前，我需要知道这是否可以实现以及如何实现，否则，我将不得不放弃这种效果并重新考虑......

例如，我目前的设计是这样的：

[![样品表](https://i.stack.imgur.com/ohI1K.png)](https://i.stack.imgur.com/ohI1K.png)

此示例中的行具有相同的高度，但这只是一个示例。真正的表格实际上会有不同的行高，代码需要考虑到这一点......

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T05:18:28.837

CSS 可以非常轻松地完成类似的操作，前提是您不必随着表格大小的增加而垂直缩放渐变。下面是一个您可以使用的示例，它可以为您提供上面描述的效果。

**更新：**不知何故，我没有看到斜面（我想我不得不责怪它在晚上太晚了，而且我的视力太模糊了）。我必须放大才能真正看到它们，但我已经更新了我的解决方案以适应它们。您需要添加一个额外的“div”标签才能使此解决方案正常工作，但这是可能的，尽管我认为它在您的图像显示的范围内工作得不太好。不过，它会工作得相当不错。下面我包含一些 jQuery 脚本，它将消除对额外`<div />`标签的需要。

对于标记，你会使用这样的东西：

```
<table cellspacing="0">
    <tr><td class="side"><div class="bevel">lorem</div></td><td class="side"><div class="bevel">ipsum</div></td><td class="main"><div class="bevel">dolor sit amet, consectetur</div></td></tr>
    <tr><td class="side"><div class="bevel">lorem</div></td><td class="side"><div class="bevel">ipsum</div></td><td class="main"><div class="bevel">dolor sit amet, consectetur</div></td></tr>
    <tr><td class="side"><div class="bevel">lorem</div></td><td class="side"><div class="bevel">ipsum</div></td><td class="main"><div class="bevel">dolor sit amet, consectetur</div></td></tr>
</table> 
```

在你的样式表中，你会使用这样的东西：

```
td {
    border: 1px solid #777;
}

.bevel {
    background: url('img.png') top left repeat-x;
    margin: -1px;
    border-top: 1px solid #fbfbfb;
    border-left: 1px solid #fbfbfb;
    border-right: 1px solid #bfbfbf;
    border-bottom: 1px solid #e8e8e8;
}

.side {
    width: 30px;
}

.main {
    width: 170px;
}

table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

对于图像，使其宽 1 像素。它会重复自己以适应单元格的宽度。如果你想让渐变垂直拉伸，那你就不走运了。CSS 不能缩放图像，只能重复它们。为了制作垂直缩放的背景图像，您需要使用噩梦般的标记或某种 JavaScript 才能使其工作。

为了摆脱`<div />`标签汤，您可以使用 jQuery 插入标签，这样您就不会弄乱您的源代码。您需要做的就是`outerBevel`向标签添加一个 ' ' 类`<td />`，然后调用这个 jQuery 脚本（如果您使用的是 jQuery。我确信其他 JavaScript API 可以做类似的事情）：

```
$('.outerBevel').wrapInner('<div class="bevel"></div>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T05:10:34.937

对于布局，标准 HTML`table`标记可以完成所有这些工作，并且也适合使用它。

要获得所需的边框效果，请在此处查看不同的 CSS 边框选项：http: [//www.w3schools.com/css/css_reference.asp#border](http://www.w3schools.com/css/css_reference.asp#border)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T05:29:36.600

你可能想要做这样的事情：

```
table#mytable td {
  border-style: inset;
  border-width: 3px; /* or whatever width you want */
} 
```

# hibernate - 在 Hibernate 中双重登录

> ID：432413
> 
> 赞同：3
> 
> 时间：2009-01-11T05:17:39.837
> 
> 标签：hibernate, logging

我一直非常成功地使用 Hibernate，但今天我注意到一个与日志记录有关的奇怪现象。`org.hibernate`如果我为下面的类（例如`org.hibernate.SQL`或）打开日志记录（在“调试”级别）`org.hibernate.impl.SessionImpl`，我会得到两次对应于这些类的每个日志行。我从来没有在记录任何其他包时看到这一点。

这是日志输出的摘录。第一行和第四行是我的，其他的是 Hibernate 的：

```
23:54:45,472 TRACE UserDaoImpl:37 - Loading User by id: 2
23:54:45,473 DEBUG SQL:401 - select user0_.id as id22_2_, user0_.avatar as avatar22_2_, ...
23:54:45,473 DEBUG SQL:401 - select user0_.id as id22_2_, user0_.avatar as avatar22_2_, ...
23:54:45,499 TRACE PropertyDaoImpl:40 - Loading class com.myapp.locale.Region with ID 21
23:54:45,503 DEBUG SQL:401 - select region0_.id as id19_1_, region0_.code as code19_1_, ...
23:54:45,503 DEBUG SQL:401 - select region0_.id as id19_1_, region0_.code as code19_1_, ... 
```

来自数据库方面的证据表明，每个命令只发送一次（幸运的是！）。

我将 Hibernate-Annotations 3.3.1.GA
与 PostgreSQL JDBC 连接器 5.0.7
和 log4j 1.2.14一起使用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-11T10:05:13.517

我能想到的只有：

1.  检查您的 log4j 配置是否没有在不同级别定义多个附加程序？如果您将 appender 附加到 org.hibernate 记录器，然后再次附加到 org.hibernate.SQL 记录器，那么您将看到两次（除非您关闭较低级别记录器的可加性）。
2.  您的 SessionFactory 上没有设置 hibernate.show_sql 属性？这不会启用对 log4j 的日志记录（您可以通过 log4j 配置执行此操作），它只是转储到控制台。如果您的 log4j 也转储到控制台，您会看到它两次。但是，这看起来像是 log4j 格式的日志行，而不是 hibernate 完成的控制台转储，所以这似乎不太可能。不过值得一提。

# svn - fogbugz，svn 集成不起作用。（svn 托管在 wush.net 上）

> ID：432416
> 
> 赞同：2
> 
> 时间：2009-01-11T05:23:52.053
> 
> 标签：svn, fogbugz, websvn

我刚刚将两个项目切换到了fogbugz，到目前为止我非常喜欢它。FB 有一些功能可以将 trac 从水中吹走。但是，我无法让 FB 从 FB 问题中指向修订。

我已经在 tortoisesvn 中设置了 bugid 并且一切正常 - 我可以在 GUI 中单击 bugid，然后会弹出一个fogbugz 浏览器并显示正确的问题。然而，反过来不起作用。

我正在使用 wush 进行我的 svn 托管。
我看过 [http://fogcreek.com/FogBugz/docs/60/topics/sourcecontrol/setup/Subversion.html](http://fogcreek.com/FogBugz/docs/60/topics/sourcecontrol/setup/Subversion.html)

和

[https://support.wush.net/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=33&nav=0](https://support.wush.net/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=33&nav=0)

但还没有弄清楚如何正确地做到这一点。我将 websvn 访客帐户设置为对 repo 具有读取权限。

trac 和 svn 之间的集成运行良好。我能够（从 trac 票证）看到在链接到 SVN 提交中的评论的修订中更改的源。

有没有人成功地将 FB 与 websvn/SVN 的 wush 主机集成？

编辑：

我也很高兴能够在 FB 问题中添加链接或参考，甚至文本。但是，提交似乎没有触及 FB 问题。

编辑：回应一张海报：

bugid 在 svnUI 中正确显示 - 也就是说，我可以单击 tortoisesvn 历史记录中的链接，它会在fogbugz 中显示 url。

什么不工作是：

*   将签入评论自动更新/插入到 FB 问题中
*   在 FB 中，没有返回到 repo/changes/etc 的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-13T11:08:51.920

尽管我们的 SVN 在本地托管，但我们成功地让 FogBugz 与 SVN 合作。我不确定您的问题是您遇到问题的部分，所以我将描述我们必须做些什么才能使其发挥作用。

在 FogBugz 中正确配置源代码控制 URL 需要一段时间，但我们从基础开始构建它，直到我们得到我们想要的。

在 hooks 文件夹中创建脚本也需要一些时间，我们必须自定义每个脚本并将其硬编码到正确的存储库中，因为它似乎没有动态创建正确的 URL。我们还必须检查构建服务器是否可以通过 Internet 访问 FogBugz URL，因为我们位于公司防火墙后面。也许这就是问题所在？我对 WUSH 了解不多，但它会包括 Internet 访问以执行 HTTP 获取到 FogBugz 吗？

如果您在问题中添加更多详细信息，我会尽力提供帮助，但我承认我只设置了一次集成，所以我不是专家 - 也许 FogBugz 支持是您的最佳选择。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-14T15:43:48.697

“将签入评论自动更新/插入到 FB 问题中”

由于这不起作用，这意味着钩子提交脚本未触发或无法访问您的 FogBugz 服务器。

看到这个： [http ://www.fogcreek.com/FogBugz/blog/post/Debugging-Subversion-Source-Control-Integration.aspx](http://www.fogcreek.com/FogBugz/blog/post/Debugging-Subversion-Source-Control-Integration.aspx)

编辑：

谢谢 - 我正在编辑这个，因为我想添加一点，然后投票给这个答案。

我终于让它工作了。我必须更改标准网址中的一些小调整，并且必须将提交后脚本发送给我的提供商。

[这是最终为我整理好的网址](http://www.fogcreek.com/FogBugz/docs/60/topics/sourcecontrol/setup/Subversion.html)

这也有帮助 [http://www.fogcreek.com/FogBugz/docs/60/topics/advanced/SourceControlIntegration.html](http://www.fogcreek.com/FogBugz/docs/60/topics/advanced/SourceControlIntegration.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-09T06:39:29.110

我终于让它工作了。我必须更改标准网址中的一些小调整，并且必须将提交后脚本发送给我的提供商。

[这是最终为我整理好的网址](http://www.fogcreek.com/FogBugz/docs/60/topics/sourcecontrol/setup/Subversion.html)

这也有帮助 [http://www.fogcreek.com/FogBugz/docs/60/topics/advanced/SourceControlIntegration.html](http://www.fogcreek.com/FogBugz/docs/60/topics/advanced/SourceControlIntegration.html)

# c# - WPF - 如何从按钮处理程序确定列表框中当前项目的索引

> ID：432423
> 
> 赞同：3
> 
> 时间：2009-01-11T05:41:33.300
> 
> 标签：c#, .net, wpf

我有一个带有数据模板的列表框，其中包含一个按钮。

单击按钮时，我想在按钮单击处理程序中获取当前列表框项的索引？

请问我该怎么做？

马尔科姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-07-27T16:11:52.913

更合适的答案，

```
private void Button_Click(object sender, RoutedEventArgs e)
{
   DependencyObject dep = (DependencyObject)e.OriginalSource;

   while ((dep != null) && !(dep is ListViewItem))
   {
     dep = VisualTreeHelper.GetParent(dep);
   }

   if (dep == null)
    return;

   int index = lstBox.ItemContainerGenerator.IndexFromContainer(dep); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T08:41:24.683

希望下面的代码对您有所帮助。

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    var b = (Button)sender;
    var grid = (Grid)b.TemplatedParent
    var lstItem = (ListBoxItem)grid.TemplatedParent;
    int index = lstBox.ItemContainerGenerator.IndexFromContainer(lstItem);
    // rest of your code here...
} 
```

上面的 XAML 假定为 ListBox 上的 DataTemplate，名为`lstBox`：

```
<DataTemplate x:Key="template">
  <Grid>
    <Button Click="Button_Click" Content="Press"/>
  </Grid>
</DataTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-27T16:19:30.900

您是否检查过列表框的“SelectedIndex”属性？可以通过单击按钮进行设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T15:19:02.447

可能为时已晚，但在列表框“Items”上使用“IndexOf”将为您提供索引#Regards

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T18:42:50.523

`myListbox.Items.CurrentItem`似乎是你要找的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-07T21:07:52.817

嗨，您可以`ContentPresenter.Content`用来获取当前项目，而不是当前索引：

```
<DataTemplate DataType="{x:Type MyModel}">                    
            <StackPanel Orientation="Horizontal" Margin="0 5">
                <TextBlock Text="{Binding Title}" />

                <Button Content="Active" Click="Button_Click" />
            </StackPanel>
 </DataTemplate> 
```

在代码中：

```
private void Button_Click(object sender, RoutedEventArgs e)
    {
            var button = e.Source as Button;
            var contentPresenter = button.TemplatedParent as ContentPresenter;
            var myModel = (MyModel)contentPresenter.Content;            
    } 
```

# asp.net - 将 Autofac 与 ASP.NET 和 MVP 模式一起使用

> ID：432425
> 
> 赞同：1
> 
> 时间：2009-01-11T05:44:28.003
> 
> 标签：asp.net, mvp, autofac

我正在尝试将 Autofac 集成到现有的 ASP.NET Web 应用程序中。

这些页面遵循 MVP 模式。每个页面都实现一个 View 并将功能委托给 Presenter。View 通过构造函数注入到 Presenter 中。

我能够注册演示者和视图并且页面加载正常，但是当回发发生时，视图上的用户控件为空。似乎 Autofac 创建了一个新的 Page 实例来提供给演示者，而不是给它实例真正的 Page 实例。有没有办法让页面实例注册到 Autofac？

有没有人将 Autofac 与 ASP.NET 和 MVP 一起使用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-02T22:55:07.127

有个更好的方法。首先，启用[Web 集成模块](http://code.google.com/p/autofac/wiki/AspNetIntegration)。这将启用自动属性注入到**Page**实例中。

由于您的演示者需要其构造函数中的视图，因此您的页面应该依赖于演示者**工厂**而不是演示者本身。

因此，首先您需要演示者工厂，它是一个具有必要参数的委托：

```
public delegate IOCTestPresenter IOCTestPresenterFactory(IIOCTestView view); 
```

此委托必须匹配演示者构造函数的参数（类型和名称）：

```
public class IOCTestPresenter
{
     public IOCTestPresenter(IIOCTestView view)
     {
     }
} 
```

在您的视图中，添加一个接收工厂委托的属性，并使用委托创建演示者：

```
public partial class IOCTest
{
     public IOCTestPresenterFactory PresenterFactory {get;set;}

     protected void Page_Load(object sender, EventArgs e)    
     {
           var presenter = PresenterFactory(this);
     }
} 
```

在您的容器设置中，您必须进行以下注册：

```
builder.Register<IOCTestPresenter>().FactoryScoped();
builder.RegisterGeneratedFactory<IOCTestPresenterFactory>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-12T19:17:01.840

我想出了一个解决办法。基本上，您将在 Page_PreInit 事件期间注册页面实例，然后调用容器来注入依赖项。前任。

```
public partial class IOCTest : System.Web.UI.Page, IIOCTestView
{

    protected void Page_PreInit(object sender, EventArgs e)
    {
        var containerProviderAccessor = (IContainerProviderAccessor)HttpContext.Current.ApplicationInstance;
        var containerProvider = containerProviderAccessor.ContainerProvider;

        var builder = new ContainerBuilder();
        builder.Register(this).ExternallyOwned().As<IIOCTestView>();

        builder.Build(containerProvider.RequestContainer);

        containerProvider.RequestContainer.InjectProperties(this);
    }

    public IOCTestPresenter Presenter { get; set; } 
```

我不确定是否有更好的方法，但这似乎有效。

# time - 分布式时间同步和 Web 应用程序

> ID：432432
> 
> 赞同：9
> 
> 时间：2009-01-11T05:49:47.510
> 
> 标签：time, synchronization, distributed

我目前正在尝试构建一个应用程序，该应用程序本质上需要跨服务器和每个客户端进行良好的时间同步。我的应用程序有一些替代设计可以消除这种同步需求，但是当它不存在时，我的应用程序很快就会开始变得糟糕。

万一我遗漏了什么，我的基本问题是：同时在多个位置触发一个事件。据我所知，这样做的唯一方法需要某种时间同步，但我可能错了。我尝试以不同的方式对问题进行建模，但这一切都归结为a）一个糟糕的应用程序，或者b）需要时间同步。

假设我真的真的需要同步时间。

我的应用程序是基于 Google AppEngine 构建的。虽然 AppEngine 不保证其服务器之间的时间同步状态，但通常它非常好，大约几秒钟（即比 NTP 好），但有时它很糟糕，比如说，大约 10 秒的同步。我的应用程序可以处理 2-3 秒的不同步，但就用户体验而言，10 秒是不可能的。所以基本上，我选择的服务器平台并没有提供非常可靠的时间概念。

我的应用程序的客户端部分是用 JavaScript 编写的。同样，我们遇到客户也没有可靠的时间概念的情况。我没有进行任何测量，但我完全希望我的一些最终用户拥有设置为 1901、1970、2024 等的计算机时钟。所以基本上，我的客户端平台不提供可靠的时间概念。

这个问题开始让我有点抓狂。到目前为止，我能想到的最好的事情就是在 HTTP 之上实现类似 NTP 的东西（这并不像听起来那么疯狂）。这将通过在 Internet 的不同部分调试 2 或 3 台服务器来实现，并使用传统方式（PTP、NTP）来确保它们的同步至少在数百毫秒的数量级上。

然后，我将创建一个 JavaScript 类，该类使用这些 HTTP 时间源（以及可从 XMLHTTPRequest 获得的相关往返信息）实现 NTP 交集算法。

如您所知，此解决方案也很浪费时间。它不仅非常复杂，而且只解决了一半的问题，即让客户对当前时间有一个好的概念。然后我必须在服务器上妥协，要么允许客户端在他们发出请求时根据他们告诉服务器当前时间（大安全性不行，但我可以减轻一些更明显的滥用），或者让服务器向我的一个神奇的 HTTP-over-NTP 服务器发出单个请求，并希望该请求足够快地完成。

这些解决方案都很糟糕，我迷路了。

提醒：我想要一堆网络浏览器，希望多达 100 个或更多，能够同时触发一个事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T07:04:48.777

让我总结一下，以确保我理解这个问题。

您有一个具有客户端和服务器组件的应用程序。有多个服务器，每个服务器都可以为许多（数百个）客户端提供服务。服务器或多或少地相互同步；客户不是。您希望大量客户端几乎在同一时间执行相同的事件，而不管它们最初连接到哪台服务器。

假设我或多或少准确地描述了这种情况：

您是否可以让服务器为每个客户端保持某些状态（例如初始连接时间 - 服务器时间），并且当需要发生的事件的时间已知时，使用包含毫秒数的消息通知客户端在触发事件之前需要经过的起始值之后？

为了显示：

```
   客户端 A 在时间 t0 = 0 连接到服务器 S
   客户端 B 在时间 t1 = 120 连接到服务器 S
   服务器 S 决定一个事件需要在时间 t3 = 500 发生
   服务器 S 向 A 发送消息：
   S->A : {事件名称, 500}
   服务器 S 向 B 发送消息：
   S->B：{事件名称，380}

```

这根本不依赖于客户端时间；仅取决于客户在相当短的时间内（单个会话）跟踪时间的能力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T06:39:02.450

在我看来，您似乎需要在许多不同的地方收听来自服务器的广播事件。由于您可以接受 2-3 秒的变化，您可以将所有客户端放入长寿命的彗星式请求中，然后从服务器获得响应？在我看来，客户根本不需要以这种方式处理时间吗？

您可以使用 ajax 来执行此操作，因此您可以在等待新数据时避免任何客户端锁定。

我可能在这里完全错过了一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T09:09:29.307

如果您可以假设时钟是合理稳定的 - 也就是说它们设置错误，但或多或​​少以正确的速率滴答作响。

让服务器从单个定义的源（例如您的服务器之一，或数据库服务器或其他东西）获取它们的偏移量。

然后让每个客户端计算它与服务器的偏移量（如果你想要很多准确性，可能会出现往返并发症）。

存储它，然后您在每个客户端上的组合偏移量以在正确的时间触发事件。

```
(client-time-to-trigger-event) = (scheduled-time) + (client-to-server-difference) + (server-to-reference-difference) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T05:58:22.297

时间同步很难做到正确，我认为这是错误的方法。您需要一个事件系统，它可以在每次调度事件时通知已注册的观察者（[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)）。所有观察者将同时（或尽可能接近）收到通知，无需时间同步。

为了适应延迟，应该向浏览器发送事件分派的时间戳，并且它应该等待比您预期的最大延迟稍长的时间。这样，所有事件将在所有浏览器上同时触发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-28T14:35:15.957

谷歌找到了将时间定义为绝对的方法。对于物理学家和广义相对论而言，这听起来很异端：时间以不同的速度流动，具体取决于您在空间和时间、地球、宇宙中的位置......

您可能想看看 Google Spanner 数据库：[http://en.wikipedia.org/wiki/Spanner_(database)](http://en.wikipedia.org/wiki/Spanner_(database))

我猜它现在被谷歌使用，并将通过谷歌云平台提供。

# php - Zend_Framework- 在哪里放置 $_GET 和 $_POST（HTTP 请求）处理？

> ID：432435
> 
> 赞同：3
> 
> 时间：2009-01-11T05:55:28.887
> 
> 标签：php, model-view-controller, design-patterns, zend-framework, front-controller

我最近阅读[了这篇文章](http://blog.astrumfutura.com/archives/373-The-M-in-MVC-Why-Models-are-Misunderstood-and-Unappreciated.html)，这导致了一系列其他文章似乎都暗示了相同的想法：模型做所有事情，视图应该能够直接与模型通信，反之亦然，而控制器则不受影响。然而，所有显示的示例都相当简单，没有一个真正显示任何人如何尝试实现对请求/响应周期的完整处理的示例，这让我想知道“模型是否应该负责处理请求（即$_GET、$_POST 等）本身？” 和“控制器是否应该仅作为传递来实例化必要的模型并将模型传递给视图？”。（事实上​​我发现了一个极端的例子，就是在模型中嵌入一个 Zend_Form 对象）

根据我对 Fowler 对 MVC 和控制器的一般看法的阅读，乍一看似乎控制器层越薄越好。但是后来我花时间回顾并研究了他对 MVC 和 Front Controller 的说法（这只是把水弄得一团糟，因为这两种模式都定义了控制器），现在我的直觉表明 Zend_Framework 在实现这两种模式时，实际上已经创建了一个复合对象，它执行 MVC 中的 Controller 和 Front Controller（或某些类似）中的 Command 对象的功能。

所以我想知道在他们的应用程序中实现了类似模式的其他人的一般意见是什么——你是完全在控制器层内处理请求，还是让模型知道请求并直接在模型内处理参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-12T02:42:18.230

我的第一个想法是避免在模型中处理任何类型的请求。那是控制器的工作。原因如下：假设您有一个模型可以处理您的请求（GET 或 POST）。这种结构最初可能会运作良好。现在，假设您想添加某种 AJAX 功能或为您的系统建立一个服务接口。现在您接受的不仅仅是简单的 GET/POST，即 JSON 或 XML，您的模型将必须区分每种请求类型并知道如何解析它们。我相信这会破坏模型代码的很多简单性和清晰度。我同意控制器层应该很薄，但它也应该有角色和专业知识。对我来说，控制器的专长是：

1.  处理传入请求
2.  向模型传递数据
3.  从模型请求/接受数据
4.  将数据的模型传递给视图

我对视图应该对模型了解多少犹豫不决。有些人建议模型直接进入视图，但我认为这是脆弱的耦合。它经常导致视图中的逻辑。此外，如果您正在处理一个项目，其中处理视图的团队成员不像主要开发人员那样精通编程，这会给他们带来很大的负担来跟上变化。我倾向于以中立的结构将我交给我的视图的数据打包，而不是交出完整的模型。

我对 MVC 的解释大多是务实的。该模型的工作是对您正在处理的领域进行*建模*，并且不应该关心数据的来源。我经常构建模型代码，假设它可以在 Web 应用程序之外的命令行应用程序或桌面应用程序中使用。这种联合很少发生，但它导致了每一层的明确目的。控制器的工作是在相关方之间移动数据，无论是客户端请求、模型还是视图。控制器应该有很少的域逻辑，但这并不意味着它没有任何代码。最后，视图应该看起来很漂亮。希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T10:30:34.573

处理用户指令/输入（如 HTTP 请求）是控制器的工作。模型用于工作/操作/获取数据，视图用于向用户显示结果。这意味着视图和模型之间的连接大多数时候是控制器的职责。

# c# - 在 Visual Studio 中自动格式化文档？

> ID：432441
> 
> 赞同：0
> 
> 时间：2009-01-11T06:06:13.670
> 
> 标签：c#, visual-studio-2008, coding-style, automation

无论如何调用“**编辑”>“高级”>“格式化文档”** VS命令时自动切换离开文档/定期使用计时器/输入文档？

每次你想美化你的代码时，它真的很烦人**Ctrl+E+D 。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T06:11:01.960

每次关闭大括号、按分号或粘贴一些代码时，ReSharper 都会执行此操作。这并不是您所要求的，但我认为您不会注意到差异。哦，它还以许多其他方式摇摆不定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T23:16:57.003

你可以试试我最近写的 Visual Studio 2013 这个扩展。这与 Productivity 电动工具中的功能几乎相同，但也适用于 *.cshtml、*.xml 和所有支持“格式化文档”命令的格式

[保存时格式化文档](http://visualstudiogallery.msdn.microsoft.com/3ea1c920-69c4-441f-9979-ccc2752dac56)

# c++ - 为什么 C 和 C++ 中存在有向图？

> ID：432443
> 
> 赞同：77
> 
> 时间：2009-01-11T06:07:20.640
> 
> 标签：c++, c, c99, digraphs

我今天了解到 C99 和 C++ 中有二合字母。以下是一个有效的程序：

```
%:include <stdio.h>

%:ifndef BUFSIZE
 %:define BUFSIZE  512
%:endif

void copy(char d<::>, const char s<::>, int len)
<%
    while (len-- >= 0)
    <%
        d<:len:> = s<:len:>;
    %>
%> 
```

我的问题是：它们为什么存在？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-01-11T06:14:00.143

Digraphs 是为没有支持 ISO 646 字符集的键盘的程序员创建的。

[http://en.wikipedia.org/wiki/C_trigraph](http://en.wikipedia.org/wiki/C_trigraph)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-01-11T06:10:18.920

我相信它们的存在可以追溯到某个地方的*可能性*，有人正在使用带有操作系统的编译器，该操作系统的字符集非常陈旧，以至于它不一定具有 C 或 C++ 表达整个语言所需的所有字符.

[此外，它还为IOCCC](http://www.ioccc.org)提供了良好的参赛作品。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-01-11T06:11:31.383

我认为这是因为这个星球上的某些键盘可能没有像“#”和“{”这样的键。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-11-11T14:28:48.210

C/C++ 中的二合字母和三合字母来自 CDC6000（60 位）、Univac 1108（36 位）、DECsystem 10 和 20 个系统（36 位）使用的六位字符集的时代，每个系统都使用专有的 64 位字符设置不兼容 ASA X3.4-1963（现称为 ANSI X3.4-1963“7 位美国国家信息交换标准代码”）。最新版本是 ANSI X3.4-1986。

由于这些系统无法代表所有 96 个图形代码点，因此省略了许多。此外，X3.4 与其他国家标准机构（GBR、GER、ITA 等）协调，X3.4 中的代码点被指定为国家替换字符——最明显的例子是英镑的#符号（很明显，因为 # 字符的名称是“井号”，因为它在美国商业中的传统用法 - 在 Twitter 的演变之前）和 '{' '}' 也被指定为国家替换字符。

因此，有向图被引入为那些无法表示字符的计算机系统提供一种机制，也为将国家替换字符分配给冲突代码点的数据终端设备提供了一种机制。Di/Tri-graph 已成为计算历史的古老产物（如今计算机科学中没有教授的主题）。

关于这个主题的详尽论文可以在这里找到：[http ://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.96.678&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.96.678&rep=rep1&type=pdf)

# php - “做某事 OR DIE()”如何在 PHP 中工作？

> ID：432454
> 
> 赞同：103
> 
> 时间：2009-01-11T06:14:24.463
> 
> 标签：php, mysql, exception-handling, conditional

我正在编写一个 php 应用程序来访问 MySQL 数据库，并且在一个教程中，它说了一些形式

```
mysql_connect($host, $user, $pass) or die("could not connect"); 
```

PHP 是如何知道函数失败以便运行 die 部分的？我想我在问它的​​“或”部分是如何工作的。我不认为我以前见过它。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2009-01-11T06:16:54.570

如果第一条语句返回`true`，则整个语句必须是，`true`因此第二部分永远不会执行。

例如：

```
$x = 5;
true or $x++;
echo $x;  // 5

false or $x++;
echo $x; // 6 
```

因此，如果您的查询不成功，它将评估`die()`语句并结束脚本。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2009-01-11T06:55:48.687

PHP 的**`or`**工作方式与 C 类似**`||`**（顺便提一下，PHP 也支持它——**`or`**只是看起来更好，并且有不同的运算符优先级——参见[这个页面](http://www.php.net/manual/en/language.operators.precedence.php)）。

它被称为[短路](http://en.wikipedia.org/wiki/Short-circuit_evaluation)运算符，因为一旦它有足够的信息来决定最终值，它将跳过任何评估。

在您的示例中，如果`mysql_connect()`返回 TRUE，则 PHP 已经知道整个语句将评估为 TRUE，无论评估`die()`结果如何，因此`die()`不会被评估。

如果`mysql_connect()`返回 FALSE，PHP 不知道整个语句将评估为 TRUE 还是 FALSE，因此它继续并尝试评估`die()`- 结束进程中的脚本。

这只是一个利用工作方式的好技巧**`or`**。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-01-11T07:25:35.490

它像其他人描述的那样工作。

在 PHP 中，不要使用“die”，因为它不会引发异常（就像在 Perl 中那样）。而是以正常方式正确抛出异常。

die 不能在 PHP 中被捕获，并且不记录 - 相反，它不优雅地打印消息并立即退出脚本，而不告诉任何人任何事情或给你任何机会记录事件，重试等。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-08-31T03:46:27.380

```
$con=mysql_connect($host, $user, $pass)
if(!$con)
{
     die("could not connect");
}
else
{
     echo "Connected";
} 
```

# javascript - 您是否在 Actionscript 和 Flex 中使用 jQuery、extJS 或其他 javascript 库？

> ID：432457
> 
> 赞同：0
> 
> 时间：2009-01-11T06:18:45.440
> 
> 标签：javascript, jquery, apache-flex, actionscript, extjs

由于 Actionscript 是 javascript 的适当超集，我认为它应该是可能的。您是否使用/是否使用过任何带有 Actionscript/Flex/Air 的 javascript 扩展库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T09:39:46.283

语言本身是一个适当的超集，但底层 API 完全不同。jQuery 及其同类解决的问题在 ActionScript 中对您没有用处，因此将它们直接放入您的 Flash/Flex 项目中并不会真正获得什么。默认的 Flash/Flex API 已经很好地涵盖了大多数内容，因此这可能解释了附加库的缺乏。但是，我建议使用[as3corelib](http://code.google.com/p/as3corelib/z)来处理 JSON 和处理 ActionScript 3 项目中的其他数据。

Tnanks - 我已经为 JSON 使用 as3corelib。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T07:55:36.133

谷歌搜索[as3query](http://ajaxian.com/archives/as3query-jquery-port-to-actionscript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T13:06:02.760

我将一些东西从prototype.js 移植到AS：

[http://wiki.alcidesfonseca.com/hacks/prototypeas](http://wiki.alcidesfonseca.com/hacks/prototypeas)

# java - 一个试图理解 CANopen 的程序员

> ID：432458
> 
> 赞同：0
> 
> 时间：2009-01-11T06:19:24.003
> 
> 标签：java, can-bus, canopen

1.  CAN接口卡是否可能安装为COM端口？

2.  如何分解要作为单独帧发送的消息？将接收到的多个帧中的数据组合成一条消息怎么样？这是一个有效的担忧吗？

3.  什么是 CANopen 堆栈？如果我已经有一个用于与串行端口通信的 API，我可以让我的程序在没有 CANopen 堆栈的情况下读取/发送 CANopen 消息吗？我的程序到底要做什么？

4.  在软件中实现对象字典（OD）的理想/正确方法是什么？

（现状：我必须编写一个Java程序来解释CANopen消息。由于某些情况，我无法接触CAN硬件。）

（这是我上周在[Java 和 CANopen](https://stackoverflow.com/questions/423526/java-and-canopen)上发布的一系列 Stack Overflow 问题的延续。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T08:22:10.573

1.  这取决于你的接口卡。但最有可能的是，它不是 COM 端口，但您会得到一个 DLL 文件，该文件具有访问卡的导出功能（大多数可用的 CAN 接口通过 USB 端口连接到您的 PC）。但不要担心：即使它不是官方标准，大多数 DLL 文件都使用相同的功能，因此您可以毫无问题地与其他制造商的 CAN 接口进行交换。

2.  通过 CAN 总线发送如此多的数据以致您必须将它们分成多个帧是非常罕见的。但如果你绝对必须这样做，那么你必须自己做。

3.  CANopen 堆栈是一个库，它提供更高级别的功能供您使用。它负责处理 CANopen 所需的一切（例如，心跳），因此您不必自己动手。一个好的堆栈还可以处理多个帧 (2)。不幸的是，这样的堆栈并不便宜，但恕我直言，它们是值得的。

4.  大多数实现使用 ROM 或 RAM 中的结构，具体取决于是否可以修改 OD。但是一个好的 CANopen 协议栈也已经为您解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-13T15:08:16.023

3) 虽然商业 CANopen 堆栈肯定是一个好主意，但仍然可以在不使用 CANopen 消息的情况下读取/发送消息。

我们不知道您申请的目的是什么。但是，如果没有 CANopen 堆栈，您可能会很好的一个例子是，如果您已经有一个带有主节点和从节点的功能正常的 CANopen 总线，并且您只想监听特定消息。另一个示例可能是，如果您正在编写一个小型配置或测试实用程序，其中使用了一组小型且定义明确的消息。在这种情况下，一个成熟的商业 CANopen 堆栈可能会显得有些矫枉过正。

# java - Spring-ws 或 Axis2 或其他用于 WS 的“合同优先”方法

> ID：432461
> 
> 赞同：2
> 
> 时间：2009-01-11T06:22:40.703
> 
> 标签：java, web-services, soa, axis2, spring-ws

大家都说“Contract-First”的WS设计方法更倾向于SOA风格的设计。现在，如果我们采用可用的开源框架来实现这一点，我们就有**Spring-ws**和**Axis2**（支持这两种风格）。我的任务是设计基于 SOA 的电子商务应用程序。其中松耦合、快速响应、安全性和可扩展性是关键点。因此，从一开始就选择正确的框架非常重要。

根据过去的经验，你们认为哪一个或其他什么更适合我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-12T11:30:05.823

首先，我建议使用 JAX-WS。CXF 、[JAX-WS RI](https://jax-ws.dev.java.net/)或[Metro](https://metro.dev.java.net/) ( [Metro = JAX-WS RI + WSIT) 似乎是可以接受任何 WSDL 合同并生成](https://metro.dev.java.net/)[POJO](http://cxf.apache.org/)（反之亦然）的最佳实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T07:22:59.397

如果您要创建基于 spring 的应用程序，请使用 spring-ws。如果没有，您可以查看[jax-ws](https://jax-ws.dev.java.net/)参考实现和[Metro](https://metro.dev.java.net/)服务堆栈。这是您可能想要查看的另一个很好的 Web 服务堆栈 - [CXF](http://cxf.apache.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T07:34:35.583

这是一个棘手的问题。

我过去使用过 Axis2，但对 Spring WS 来说相对较新。我喜欢 Spring WS 的地方在于我可以使用哪些 API 来处理传入和传出请求（XmlBeans、JDOM、Castor 等）以及与基于 Spring 的堆栈的出色集成。

你提到了合同优先的方法。我不确定 Axis 2 是否有类似的东西，但 Spring WS 有一个 wsdl 生成器的模式。你可以在这里看到一个例子：

[http://static.springsource.org/spring-ws/sites/1.5/reference/html/tutorial.html](http://static.springsource.org/spring-ws/sites/1.5/reference/html/tutorial.html)

这两个框架都提供了您在松散耦合、响应、可伸缩性等特性方面所要求的一切。就我而言，Spring-ws 也可能提供与 Acegi 的良好集成，但我真的没有深入研究这个主题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-12T11:35:30.837

Axis2 是我使用的，并且是非常可靠的解决方案。另外，我对春天有点过敏。

# .net - WPF - 实现一个允许上下移动项目的列表框

> ID：432462
> 
> 赞同：2
> 
> 时间：2009-01-11T06:27:05.250
> 
> 标签：.net, wpf, listbox

这与我上一篇文章有​​关。

我想在列表框项目上有向上和向下按钮，以便它们可以向上/向下移动，即更改其在列表中的索引。

任何想法我将如何实际做到这一点？

马尔科姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T08:04:04.587

我会制作一个向上按钮的按钮，并在其 OnClick 事件中执行以下操作：

```
int location = listItems.SelectedIndex;
if (location > 0)
{
    object rememberMe = listItems.SelectedItem;
    listItems.Items.RemoveAt(location);
    listItems.Items.Insert(location - 1, rememberMe);
    listItems.SelectedIndex = location - 1;
} 
```

请记住，这没有经过测试，因为我现在没有打开视觉工作室，但它应该给你一个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-19T16:22:09.203

使用 ObservableCollection 作为 ListBox 的集合

ObservableCollection 有一个漂亮的[Move](http://msdn.microsoft.com/en-us/library/ms654933.aspx)方法，它可以触发所有好的事件，让你的列表框响应......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-08-30T05:02:00.000

提升

```
int index = listbox.SelectedIndex;
if (index != -1)
{
    if (index > 0)
    {
        ListBoxItem lbi = (ListBoxItem)listbox.Items[index];
        listbox.Items.RemoveAt(index);
        index--;
        listbox.Items.Insert(index, lbi);
        listbox.SelectedIndex = index;
        listbox.ScrollIntoView(lbi);
    }
} 
```

下移

```
int index = listbox.SelectedIndex;
if (index != -1)
{
    if (index < listbox.Items.Count - 1)
    {
        listboxlbi = (ListBoxItem)listbox.Items[index];
        listbox.Items.RemoveAt(index);
        index++;
        listbox.Items.Insert(index, lbi);
        listbox.SelectedIndex = index;
        listbox.ScrollIntoView(lbi);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T11:35:30.963

我会在模型中包含项目的顺序（即您的数据类）。然后我将 ListBox 绑定到`CollectionView`按该值排序的 a 。然后，您的向上/向下按钮将简单地在您的两个数据项中交换此排序属性的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-11T07:55:18.847

我很确定你可以将任何你想要的东西扔进 ListBox。因此，您可以制作自己的控件，该控件具有一个标签和两个箭头按钮。然后将其放入 ListBox 并附加事件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-11T17:09:02.663

你绑定了吗？尝试更改绑定对象的项目顺序并更新列表框。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-03-26T11:48:16.707

如果要绑定它：

```
private void MoveItemUp()
    {
        if (SelectedGroupField != null)
        {
            List<string> tempList = AvailableGroupField;
            string selectedItem = SelectedGroupField;

            int currentIndex = tempList.IndexOf(selectedItem);

            if (currentIndex > 0)
            {
                tempList.Remove(selectedItem);
                tempList.Insert(currentIndex - 1, selectedItem);
                AvailableGroupField = null;
                AvailableGroupField = tempList;
                SelectedGroupField = AvailableGroupField.Single(p => p == selectedItem);
            }
        }
    }

    private void MoveItemDown()
    {
        if (SelectedGroupField != null)
        {
            List<string> tempList = AvailableGroupField;
            string selectedItem = SelectedGroupField;

            int currentIndex = tempList.IndexOf(selectedItem);

            if (currentIndex < (tempList.Count - 1))
            {
                tempList.Remove(selectedItem);
                tempList.Insert(currentIndex + 1, selectedItem);
                AvailableGroupField = null;
                AvailableGroupField = tempList;
                SelectedGroupField = AvailableGroupField.Single(p => p == selectedItem);
            }
        }        
    } 
```

我没有解释如何将命令绑定到一个方法，假设你已经知道了。

# iphone - 如何在 iPhone 上实现全场景抗锯齿

> ID：432463
> 
> 赞同：13
> 
> 时间：2009-01-11T06:32:00.857
> 
> 标签：iphone, opengl, graphics

我想在 iPhone 上的 OpenGL ES 应用程序上实现[FSAA 。](http://en.wikipedia.org/wiki/Anti-aliasing#Full-scene_anti-aliasing)

目前，我通过将场景渲染为屏幕宽度和高度两倍的纹理来做到这一点。然后我使用 nice 函数：

```
void glDrawTexiOES(GLint x, GLint y, GLint z, GLint width, GLint height); 
```

绘制调整为屏幕分辨率的图像。

有一个更好的方法吗？

**更新赏金添加**我想知道，鉴于现在是 2010 年 1 月，是否有更好的方法可以在 v3.1 3GS 手机等上执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-02-25T19:14:07.430

对于 PSP 上的 Gran Turismo，开发人员通过每帧来回移动一个像素来实现类似于抗锯齿的效果（演示可以在这里找到：[http ://www.gtplanet.net/why-gran-turismo -psp-looks-so-good/](http://www.gtplanet.net/why-gran-turismo-psp-looks-so-good/)）所以如果 iPhone 不支持您正在寻找的内容，这是一个选项。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-11-04T23:38:27.830

**从 iOS 4.0 开始，通过 Apple 对 OpenGL 的扩展直接支持全屏消除锯齿。**基本概念与您已经在做的类似：将场景渲染到更大的帧缓冲区，然后将其复制到屏幕大小的帧缓冲区，然后将该缓冲区复制到屏幕。不同之处在于，不是创建纹理并将其渲染到四边形上，而是由单个函数调用（特别是`glResolveMultisampleFramebufferAPPLE()`）执行复制/采样操作。

有关如何设置缓冲区和修改绘图代码的详细信息，您可以阅读[Gando Games 博客](http://www.gandogames.com/2010/07/tutorial-using-anti-aliasing-msaa-in-the-iphone/)上为 OpenGL ES 1.1 编写的教程；Apple 的开发者论坛上也[有一个注释](https://devforums.apple.com/thread/45850)解释了同样的事情。

感谢 Bersaelor[在另一个 SO question 中指出这一点](https://stackoverflow.com/questions/1813035/opengl-es-iphone-drawing-anti-aliased-lines/3806022#3806022)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-11T17:48:48.480

从技术上讲，iPhone 的 GPU (PowerVR MBX Lite) 应该支持抗锯齿。但是，当前 Apple 的 OpenGL ES 驱动程序（截至 2009 年 1 月）似乎没有公开此功能。所以像你一样做“手动AA”几乎是唯一的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-02-23T04:59:56.917

[http://iphonedevelopment.blogspot.com/2009/06/opengl-es-2-shaders.html?showComment=1245770504079#c6001476340022842908](http://iphonedevelopment.blogspot.com/2009/06/opengl-es-2-shaders.html?showComment=1245770504079#c6001476340022842908)

[iPhone 操作系统 3.0 + OpenGL ES 2.0。有没有人看到更好的抗锯齿？](https://stackoverflow.com/questions/1021878/iphone-os-3-0-opengl-es-2-0-is-anyone-seeing-better-anti-aliasing/1024193#1024193)

听起来你不能在硬件中做到这一点，因为你不渲染到帧缓冲区，只有 iPhone 为你合成的纹理。

# ftp - 需要有关解析 W3C 日志的 .bat 脚本的帮助

> ID：432464
> 
> 赞同：1
> 
> 时间：2009-01-11T06:32:12.947
> 
> 标签：ftp, scripting, w3c, batch-file

我试图从 W3C 日志文件（有点像文本文件）中获取值（IP 地址）。这是我到目前为止但没有运气：

```
Set filename=ex%date:~-2,4%%date:~-10,2%%date:~-7,2%.log

For /F "tokens=2 delims=: . " %%A in ('E:\WINDOWS\system32\LogFiles\MSFTPSVC6141885\%filename%') do (Set ip=%%A) 
```

日志文件如下所示：

```
# 软件：Microsoft Internet Information Services 6.0
# 版本：1.0
#日期：2009-01-10 20:58:16
#Fields: 时间 c-ip cs-method cs-uri-stem sc-status sc-win32-status
#20:58:16 10.10.1.111 [25]用户匿名 331 0

```

所以IP地址在第5行第二列（10.10.1.111）

对于任何反馈，我们都表示感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T06:39:58.487

您是否尝试过[Microsoft 日志解析器](http://www.microsoft.com/technet/scriptcenter/tools/logparser/default.mspx)？据说它开箱即用地支持 W3C 风格的日志文件。我不知道您要做什么，但这可能比手工制作批处理文件更容易。

或者，安装 AWK（例如来自 Cygwin）。甚至 Perl——这是它存在的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T14:06:45.807

将您的行更改`for`为：

```
For /F "skip=4 tokens=2" %%A in (E:\WINDOWS\system32\LogFiles\MSFTPSVC6141885\%filename%) do (
    Set ip=%%A
    goto :DONE
)
:DONE
@echo IP = %ip%
:: Continue script 
```

`skip=4`将忽略日志文件的前四行并开始解析第 5 行。您需要`goto`停止解析文件中的其余行，否则您将遍历整个文件并`ip`等于最后一行的第二个标记，它可能是也可能不是 IP 地址。

默认分隔符是空格，因此您无需使用`delims`arg 进行更改。您只需要第二个令牌，即 IP 地址。

您不需要将文件名括在单引号中，因为您正在解析文件的内容，而不是文件名字符串。如果文件名嵌入了空格，则必须改用此`for`行：

```
For /F "usebackq skip=4 tokens=2" %%A in ("E:\WINDOWS\system32\LogFiles\MSFTPSVC6141885\%filename%") do ( 
```

# ios - 导航视图推送之前的UITextField焦点？

> ID：432485
> 
> 赞同：5
> 
> 时间：2009-01-11T07:01:59.580
> 
> 标签：ios, cocoa-touch

当你去编辑一个字段时，我在 a`UITextField`中设置了一个控件，该控件模仿 Apple 自己的联系人应用程序中的控件。`UITableViewCell`这一切*都*很好，除了一个小的 UI 错误。

这`UITableView`是`UIViewController`从 XIB 创建和加载的一部分，但文本字段是在 中以编程方式创建的（并成为第一响应者）`tableView:cellForRowAtIndexPath:`，因此可以将其添加到单元格中。

这会导致轻微的键盘延迟，其中视图控制器被推入堆栈，键盘很快就会出现。

但是，通讯录应用程序将所有内容合二为一。

我该如何纠正这种滞后？我尝试将文本字段创建和第一响应者移动到`viewDidLoad`，但这没有帮助。我什至尝试在视图控制器外部创建`layoutSubviews`并调用它，然后再将其推送到堆栈中。

不幸的是，在它成为单元格的一部分之前，似乎文本字段实际上并没有*成为*第一响应者——在视图被推送之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-02-23T20:23:09.843

你必须让他`UITextField`成为第一响应者`viewWillAppear`。我在这里创建了一个示例项目：

[https://github.com/lukaswuerzburger/pushed-keyboard](https://github.com/lukaswuerzburger/pushed-keyboard)

# windows-vista - Windows XP 与 Vista：NTFS 连接点

> ID：432487
> 
> 赞同：19
> 
> 时间：2009-01-11T07:04:29.137
> 
> 标签：windows-vista, windows-xp, ntfs, symlink

**问题：**我严重依赖 Windows XP 中的 NTFS 连接点，尽管它们显然不是操作系统的“官方”功能。现在 MSFT 已经慷慨地将 NTFS 连接点作为 Vista 的官方部分，但显然他们也故意*破坏了*它们。现在，当我将该驱动器插入 Vista 盒子时，我在便携式 USB 驱动器上创建的 WinXP 连接点不起作用。

**问题：**是否有人有一个脚本可以强制在 XP 上创建的 NTFS 连接在 Vista 和 XP 中都能正常工作？是否有文档或规范解释了 MSFT 是如何导致这种损坏的？

**更新：**感谢 Ulrich 和 Scott 的后续问题。我用来创建联结的工具是[Systinternals Junction v1.05](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)，尽管我不能确定所有这些都是使用现在由 MSFT 托管的应用程序的特定版本创建的。

至于如何使用结点......假设外部“Q Drive”设备：

*   1) Q Drive 上的某些项目是从 Q Drive 上的一个位置指向 Q Drive 上的另一个位置的连接点（例如，我需要在多个位置拥有文件夹的情况，以及传统的 .lnk 样式快捷方式不会工作）

*   2) 有些项目是从 C 驱动器直接指向 Q 驱动器上的位置的连接点。当 Q Drive 没有实际连接盒子（XP 或 Vista）时，这些项目显然不起作用，但在 Vista 上连接时，连接点不像 XP 上那样工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-14T19:10:59.357

连接点和符号链接是两种不同类型的 NTFS 对象，并不完全相同。为什么您的路口在 Vista 中不被识别是一个谜，但路口功能仍然存在于 Vista 中并且它没有被故意破坏。

您可以使用 mklink ( [http://technet.microsoft.com/en-us/library/cc753194.aspx](http://technet.microsoft.com/en-us/library/cc753194.aspx) ) 创建软链接（默认）、硬链接 (/h) 或联结 (/j)。符号链接对联结的最大改进是符号链接可以引用文件或目录（联结仅是目录）并且还可以引用网络共享（联结不能）。

但最重要的是它们是不同的。无法告诉您为什么 Vista 无法识别您现有的路口。您仍然可以如上所述创建它们。

在另一篇文章 (LinkMagic) 中引用的免费软件实用程序是让您的路口再次工作的最佳选择。或者使用 mklink 重新创建它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-14T11:16:01.420

您为什么不尝试使用[此](http://www.rekenwonder.com/linkmagic.htm)程序（免费软件）来创建链接。显然 Windows Vista 需要不同的版本。我已经尝试了两个版本（XP 和 Vista），它们都可以工作。我知道这与您的具体问题无关，但鉴于每个操作系统都有单独的版本，因此创建 Junction 的方式可能有所不同。

您使用的工具相当旧（2007 年）并且没有提到 Windows Vista。我知道 MSFT*确实*更改了连接点中的某些内容，以添加他们想要使用的一些功能。Vista 在 Program Files 文件夹等方面更具权威性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-23T22:32:36.720

除了之前的评论中已经建议的 Linkmagic 程序之外，Link shell 扩展是另一个很好的程序来操作（和检查）链接和连接：

[http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html](http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html)

这两个程序都可以告诉您现有的链接/连接点指向什么，以及它们是什么。这可以帮助您找出问题所在。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-12T05:06:20.390

你想链接到什么？你是链接到你的便携式驱动器还是从你的驱动器？你在使用“mklink /d”吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-08-24T13:59:40.673

同一卷内的连接点应该可以工作 - 它们应该是硬链接目录。

您是否尝试过 USB 驱动器是否可以在 XP 机器之间工作？它可能不起作用。

我知道对于 vista，卷不是由路径 (Q:) 标识的，而是由卷 GUID 标识的。$MFT_REPARSE_POINT 格式可能已从 XP 更改为 Vista 以适应这种情况。在Vista下，这意味着即使你的Q驱动器突然变成X，连接点应该仍然可以工作，而在XP下它会被破坏。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-21T21:01:43.013

Christoph Hochstätter 制作了一个“mklink.exe”替代 Windows XP，它实际上可以创建真正的 Vista（等）符号链接重解析点，但警告它们可能无法在 Windows XP 操作系统下使用。但是，Cygwin 将在 XP 下识别它们。当然，Linux ntfs 也会挂载。不知道这是否会有很大帮助......

[http://www.zdnet.de/windows_system_verbessern_mklink_f_uuml_r_windows_download-39002345-30973-1.htm](http://www.zdnet.de/windows_system_verbessern_mklink_f_uuml_r_windows_download-39002345-30973-1.htm)

# objective-c - 返回指向函数内分配的内存的指针

> ID：432491
> 
> 赞同：2
> 
> 时间：2009-01-11T07:15:25.760
> 
> 标签：objective-c, cocoa, memory, memory-management, memory-leaks

在 C 语言中，类似以下的内容将是一场灾难（即内存泄漏），因为您正在返回一个指向您永远无法释放的内存的指针：

```
NSString* foo()
{
  return [NSString stringWithFormat:@"%i+%i=%i", 2, 2, 2+2];
} 
```

这实际上在 Objective-C 中完全没问题，因为返回的指针指向的内存将被自动释放？就算没问题，有什么理由不被人接受吗？有什么理由喜欢 C 风格，如下所示？

```
void foo(NSString ** modifyMe)
{
  *modifyMe = [NSString stringWithFormat:@"%i+%i=%i", 2, 2, 2+2];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T07:31:32.203

Cocoa 中的函数遵循与 Cocoa 中其他所有内容相同的内存管理规则。你的第一个例子很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T16:28:01.387

不仅在 Objective-C 中是可以的，而且在 C 中它本质上不是问题，只要你有明确定义的所有权语义。

```
CFStringRef foo()
{
    return CFStringCreateWithFormat(NULL, CFSTR("%i+%i=%"), 2, 2, 2+2);
}

void bar()
{
    CFStringRef str = foo();
    CFRelease(str);
    // Nothing leaked.
}
```

# javascript - 如何访问 JavaScript 正则表达式中的匹配组？

> ID：432493
> 
> 赞同：1592
> 
> 时间：2009-01-11T07:21:20.460
> 
> 标签：javascript, regex

我想使用[正则表达式](https://en.wikipedia.org/wiki/Regular_expression)匹配字符串的一部分，然后访问带括号的子字符串：

```
 var myString = "something format_abc"; // I want "abc"

    var arr = /(?:^|\s)format_(.*?)(?:\s|$)/.exec(myString);

    console.log(arr);     // Prints: [" format_abc", "abc"] .. so far so good.
    console.log(arr[1]);  // Prints: undefined  (???)
    console.log(arr[0]);  // Prints: format_undefined (!!!)
```

我究竟做错了什么？

* * *

我发现上面的正则表达式代码没有任何问题：我正在测试的实际字符串是这样的：

```
"date format_%A" 
```

报告“%A”未定义似乎是一种很奇怪的行为，但它与这个问题没有直接关系，所以我新开了一个，*[为什么在 JavaScript 中匹配的子字符串返回“未定义”？](https://stackoverflow.com/questions/432826/why-is-a-matched-substring-returning-undefined-in-javascript)*.

* * *

问题是它`console.log`把它的参数当作一个`printf`语句，因为我记录的字符串 ( `"%A"`) 有一个特殊的值，它试图找到下一个参数的值。

* * *

## 回答 #1

> 赞同：1880
> 
> 时间：2009-01-11T07:26:02.697

您可以像这样访问捕获组：

```
var myString = "something format_abc";
var myRegexp = /(?:^|\s)format_(.*?)(?:\s|$)/g;
var myRegexp = new RegExp("(?:^|\s)format_(.*?)(?:\s|$)", "g");
var match = myRegexp.exec(myString);
console.log(match[1]); // abc
```

如果有多个匹配项，您可以遍历它们：

```
var myString = "something format_abc";
var myRegexp = new RegExp("(?:^|\s)format_(.*?)(?:\s|$)", "g");
match = myRegexp.exec(myString);
while (match != null) {
  // matched text: match[0]
  // match start: match.index
  // capturing group n: match[n]
  console.log(match[0])
  match = myRegexp.exec(myString);
}
```

## 编辑：2019-09-10

如您所见，迭代多个匹配项的方式不是很直观。这导致了该[`String.prototype.matchAll`](https://github.com/tc39/proposal-string-matchall)方法的提议。这种新方法预计将在[ECMAScript 2020 规范](https://tc39.es/ecma262/#sec-string.prototype.matchall)中发布。它为我们提供了一个干净的 API 并解决了多个问题。它已开始登陆主流浏览器和 JS 引擎，如[Chrome 73+ / Node 12+](https://v8.dev/features/string-matchall)和 Firefox 67+。

该方法返回一个迭代器，用法如下：

```
const string = "something format_abc";
const regexp = /(?:^|\s)format_(.*?)(?:\s|$)/g;
const matches = string.matchAll(regexp);

for (const match of matches) {
  console.log(match);
  console.log(match.index)
}
```

因为它返回一个迭代器，我们可以说它是惰性的，这在处理特别大量的捕获组或非常大的字符串时很有用。但是如果需要，可以使用*扩展语法*或`Array.from`方法轻松地将结果转换为数组：

```
function getFirstGroup(regexp, str) {
  const array = [...str.matchAll(regexp)];
  return array.map(m => m[1]);
}

// or:
function getFirstGroup(regexp, str) {
  return Array.from(str.matchAll(regexp), m => m[1]);
} 
```

同时，虽然这个提议得到了更广泛的支持，但你可以使用[官方的 shim 包](https://www.npmjs.com/package/string.prototype.matchall)。

此外，该方法的内部工作很简单。使用生成器函数的等效实现如下：

```
function* matchAll(str, regexp) {
  const flags = regexp.global ? regexp.flags : regexp.flags + "g";
  const re = new RegExp(regexp, flags);
  let match;
  while (match = re.exec(str)) {
    yield match;
  }
} 
```

创建原始正则表达式的副本；`lastIndex`这是为了避免在进行多重匹配时由于属性的突变而产生的副作用。

此外，我们需要确保正则表达式具有*全局*标志以避免无限循环。

我也很高兴看到[在提案的讨论中](https://github.com/tc39/proposal-string-matchall#previous-discussions)甚至提到了这个 StackOverflow 问题。

* * *

## 回答 #2

> 赞同：199
> 
> 时间：2013-01-08T08:26:09.373

您可以使用以下方法获取每场比赛的第*n*个捕获组：

```
function getMatches(string, regex, index) {
  index || (index = 1); // default to the first capturing group
  var matches = [];
  var match;
  while (match = regex.exec(string)) {
    matches.push(match[index]);
  }
  return matches;
}

// Example :
var myString = 'something format_abc something format_def something format_ghi';
var myRegEx = /(?:^|\s)format_(.*?)(?:\s|$)/g;

// Get an array containing the first capturing group for every match
var matches = getMatches(myString, myRegEx, 1);

// Log results
document.write(matches.length + ' matches found: ' + JSON.stringify(matches))
console.log(matches);
```

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2009-01-11T09:10:34.687

```
var myString = "something format_abc";
var arr = myString.match(/\bformat_(.*?)\b/);
console.log(arr[0] + " " + arr[1]);
```

`\b`不是完全一样的东西。（它适用于`--format_foo/`，但不适用于`format_a_b`）但我想展示您的表达方式的替代方案，这很好。当然，`match`电话是最重要的。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2017-01-03T14:40:56.360

最后但同样重要的是，我发现了一行代码对我来说很好用（JS ES6）：

```
let reg = /#([\S]+)/igm; // Get hashtags.
let string = 'mi alegría es total! ✌\n#fiestasdefindeaño #PadreHijo #buenosmomentos #france #paris';

let matches = (string.match(reg) || []).map(e => e.replace(reg, '$1'));
console.log(matches);
```

这将返回：

```
['fiestasdefindeaño', 'PadreHijo', 'buenosmomentos', 'france', 'paris'] 
```

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2014-07-17T04:53:32.023

关于上面的多匹配括号示例，我在没有得到我想要的东西之后在这里寻找答案：

```
var matches = mystring.match(/(?:neededToMatchButNotWantedInResult)(matchWanted)/igm); 
```

在查看了上面带有 while 和 .push() 的稍微复杂的函数调用之后，我突然意识到这个问题可以用 mystring.replace() 非常优雅地解决（替换不是重点，甚至没有完成，第二个参数的 CLEAN 内置递归函数调用选项是！）：

```
var yourstring = 'something format_abc something format_def something format_ghi';

var matches = [];
yourstring.replace(/format_([^\s]+)/igm, function(m, p1){ matches.push(p1); } ); 
```

在此之后，我认为我再也不会使用 .match() 来做任何事情了。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2019-03-08T08:39:39.393

[**`String#matchAll`**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll)（参见[第 3 阶段草案/2018 年 12 月 7 日提案](https://tc39.github.io/proposal-string-matchall/#sec-string-prototype-matchall)），简化了对匹配对象中所有组的访问（请注意，第 0 组是整个匹配，而其他组对应于模式中的捕获组）：

> 使用`matchAll`available，您可以避免`while`循环，并且`exec`使用`/g`... 相反，通过使用`matchAll`，您可以返回一个迭代器，您可以将其与更方便[`for...of`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)的[数组传播](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)或[`Array.from()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)构造一起使用

`Regex.Matches`此方法在 C#、`re.finditer`Python`preg_match_all`和 PHP中产生类似的输出。

查看 JS 演示（在 Google Chrome 73.0.3683.67（官方版本）测试版（64 位）中测试）：

```
var myString = "key1:value1, key2-value2!!@key3=value3";
var matches = myString.matchAll(/(\w+)[:=-](\w+)/g);
console.log([...matches]); // All match with capturing group values
```

`console.log([...matches])`节目_

[![在此处输入图像描述](https://i.stack.imgur.com/hfFbK.png)](https://i.stack.imgur.com/hfFbK.png)

您还可以使用获取匹配值或特定组值

```
let matchData = "key1:value1, key2-value2!!@key3=value3".matchAll(/(\w+)[:=-](\w+)/g)
var matches = [...matchData]; // Note matchAll result is not re-iterable

console.log(Array.from(matches, m => m[0])); // All match (Group 0) values
// => [ "key1:value1", "key2-value2", "key3=value3" ]
console.log(Array.from(matches, m => m[1])); // All match (Group 1) values
// => [ "key1", "key2", "key3" ]
```

**注意**：请参阅[**浏览器兼容性**](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll#Browser_compatibility)详细信息。

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2017-08-23T22:36:09.870

## 此答案中使用的术语：

*   **Match**表示针对您的字符串运行 RegEx 模式的结果，如下所示`someString.match(regexPattern)`：
*   **匹配模式**表示输入字符串的所有匹配部分，它们都位于**匹配**数组中。这些都是输入字符串中的模式实例。
*   **匹配组**表示要捕获的所有组，在 RegEx 模式中定义。（括号内的模式，像这样：`/format_(.*?)/g`，其中`(.*?)`将是一个匹配的组。）这些驻留在**匹配的模式**中。

## 描述

要访问*匹配的组*，在每个*匹配的模式*中，您需要一个函数或类似的东西来遍历*匹配*。正如许多其他答案所示，有多种方法可以做到这一点。大多数其他答案使用 while 循环来迭代所有*匹配的模式*，但我认为我们都知道这种方法的潜在危险。有必要匹配 a`new RegExp()`而不仅仅是模式本身，它只在评论中提到。这是因为该`.exec()`方法的行为类似于*生成器函数*——[每次匹配时它都会停止](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/exec#Description)，但在下一次调用`.lastIndex`时保持从那里继续。`.exec()`

## 代码示例

下面是一个函数的示例，`searchString`它返回`Array`所有*匹配模式*中的一个，其中每个模式`match`都是一个`Array`包含所有*匹配组*的一个。我没有使用 while 循环，而是提供了使用该`Array.prototype.map()`函数的示例以及一种更高效的方式——使用普通的`for`循环。

### 简洁的版本（更少的代码，更多的语法糖）

这些性能较差，因为它们基本上实现了`forEach`-loop 而不是更快的`for`-loop。

```
// Concise ES6/ES2015 syntax
const searchString = 
    (string, pattern) => 
        string
        .match(new RegExp(pattern.source, pattern.flags))
        .map(match => 
            new RegExp(pattern.source, pattern.flags)
            .exec(match));

// Or if you will, with ES5 syntax
function searchString(string, pattern) {
    return string
        .match(new RegExp(pattern.source, pattern.flags))
        .map(match =>
            new RegExp(pattern.source, pattern.flags)
            .exec(match));
}

let string = "something format_abc",
    pattern = /(?:^|\s)format_(.*?)(?:\s|$)/;

let result = searchString(string, pattern);
// [[" format_abc", "abc"], null]
// The trailing `null` disappears if you add the `global` flag 
```

### 高性能版本（更多代码，更少语法糖）

```
// Performant ES6/ES2015 syntax
const searchString = (string, pattern) => {
    let result = [];

    const matches = string.match(new RegExp(pattern.source, pattern.flags));

    for (let i = 0; i < matches.length; i++) {
        result.push(new RegExp(pattern.source, pattern.flags).exec(matches[i]));
    }

    return result;
};

// Same thing, but with ES5 syntax
function searchString(string, pattern) {
    var result = [];

    var matches = string.match(new RegExp(pattern.source, pattern.flags));

    for (var i = 0; i < matches.length; i++) {
        result.push(new RegExp(pattern.source, pattern.flags).exec(matches[i]));
    }

    return result;
}

let string = "something format_abc",
    pattern = /(?:^|\s)format_(.*?)(?:\s|$)/;

let result = searchString(string, pattern);
// [[" format_abc", "abc"], null]
// The trailing `null` disappears if you add the `global` flag 
```

我尚未将这些替代方案与之前在其他答案中提到的替代方案进行比较，但我怀疑这种方法的性能和故障安全性都低于其他方法。

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2009-01-11T12:55:15.373

您的语法可能不是最好的保留。FF/Gecko 将 RegExp 定义为 Function 的扩展。
（FF2 达到了`typeof(/pattern/) == 'function'`）

这似乎是 FF 特有的——IE、Opera 和 Chrome 都为它抛出异常。

相反，请使用其他人之前提到的任何一种方法：`RegExp#exec`或`String#match`.
它们提供相同的结果：

```
var regex = /(?:^|\s)format_(.*?)(?:\s|$)/;
var input = "something format_abc";

regex(input);        //=> [" format_abc", "abc"]
regex.exec(input);   //=> [" format_abc", "abc"]
input.match(regex);  //=> [" format_abc", "abc"] 
```

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2017-06-19T19:47:44.453

无需调用该`exec`方法！您可以直接在字符串上使用“匹配”方法。只是不要忘记括号。

```
var str = "This is cool";
var matches = str.match(/(This is)( cool)$/);
console.log( JSON.stringify(matches) ); // will print ["This is cool","This is"," cool"] or something like that... 
```

位置 0 有一个包含所有结果的字符串。位置 1 的第一个匹配项用括号表示，位置 2 的第二个匹配项用括号表示。嵌套括号很棘手，所以要小心！

* * *

## 回答 #10

> 赞同：9
> 
> 时间：2019-02-11T16:47:47.600

使用 es2018，您现在可以`String.match()`使用命名组，使您的正则表达式更明确地表明它试图做什么。

```
const url =
  'https://stackoverflow.com/questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regular-expression?some=parameter';
const regex = /(?<protocol>https?):\/\/(?<hostname>[\w-\.]*)\/(?<pathname>[\w-\./]+)\??(?<querystring>.*?)?$/;
const { groups: segments } = url.match(regex);
console.log(segments); 
```

你会得到类似的东西

> > > {协议：“https”，主机名：“stackoverflow.com”，路径名：“questions/432493/how-do-you-access-the-matched-groups-in-a-javascript-regular-expression”，查询字符串：“一些=参数“}

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2014-07-12T15:41:47.330

仅当您有一对括号时才实用的单行：

```
while ( ( match = myRegex.exec( myStr ) ) && matches.push( match[1] ) ) {}; 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2009-01-11T07:27:02.930

使用您的代码：

```
console.log(arr[1]);  // prints: abc
console.log(arr[0]);  // prints:  format_abc 
```

编辑：Safari 3，如果重要的话。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2016-11-25T09:46:59.963

```
function getMatches(string, regex, index) {
  index || (index = 1); // default to the first capturing group
  var matches = [];
  var match;
  while (match = regex.exec(string)) {
    matches.push(match[index]);
  }
  return matches;
}

// Example :
var myString = 'Rs.200 is Debited to A/c ...2031 on 02-12-14 20:05:49 (Clear Bal Rs.66248.77) AT ATM. TollFree 1800223344 18001024455 (6am-10pm)';
var myRegEx = /clear bal.+?(\d+\.?\d{2})/gi;

// Get an array containing the first capturing group for every match
var matches = getMatches(myString, myRegEx, 1);

// Log results
document.write(matches.length + ' matches found: ' + JSON.stringify(matches))
console.log(matches);
```

```
function getMatches(string, regex, index) {
  index || (index = 1); // default to the first capturing group
  var matches = [];
  var match;
  while (match = regex.exec(string)) {
    matches.push(match[index]);
  }
  return matches;
}

// Example :
var myString = 'something format_abc something format_def something format_ghi';
var myRegEx = /(?:^|\s)format_(.*?)(?:\s|$)/g;

// Get an array containing the first capturing group for every match
var matches = getMatches(myString, myRegEx, 1);

// Log results
document.write(matches.length + ' matches found: ' + JSON.stringify(matches))
console.log(matches);
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-01-11T10:39:47.643

即使我同意[PhiLo](https://stackoverflow.com/users/15459/philho)的正则表达式可能应该是，您的代码也适用于我（Mac 上的 FF3）：

```
/\bformat_(.*?)\b/ 
```

（但是，当然，我不确定，因为我不知道正则表达式的上下文。）

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-06-27T18:47:53.653

```
/*Regex function for extracting object from "window.location.search" string.
 */

var search = "?a=3&b=4&c=7"; // Example search string

var getSearchObj = function (searchString) {

    var match, key, value, obj = {};
    var pattern = /(\w+)=(\w+)/g;
    var search = searchString.substr(1); // Remove '?'

    while (match = pattern.exec(search)) {
        obj[match[0].split('=')[0]] = match[0].split('=')[1];
    }

    return obj;

};

console.log(getSearchObj(search)); 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-02-16T06:25:08.247

您实际上并不需要显式循环来解析多个匹配项 - 将替换函数作为第二个参数传递，如下所述[`String.prototype.replace(regex, func)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Using_an_inline_function_that_modifies_the_matched_characters)：

```
var str = "Our chief weapon is {1}, {0} and {2}!"; 
var params= ['surprise', 'fear', 'ruthless efficiency'];
var patt = /{([^}]+)}/g;

str=str.replace(patt, function(m0, m1, position){return params[parseInt(m1)];});

document.write(str);
```

`m0`参数表示完全匹配的子字符串，`{0}`等`{1}`表示`m1`第一个匹配组，即正则表达式中括号内的部分，`0`用于第一次匹配。并且`position`是找到匹配组的字符串中的起始索引 - 在这种情况下未使用。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-07-22T04:51:47.760

> 我们可以通过使用反斜杠后跟匹配组的编号来访问正则表达式中的匹配组：

```
/([a-z])\1/ 
```

**在由第一组 ([az]) 匹配的代码 \1 中**

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-04-07T14:09:13.080

一线解决方案：

```
const matches = (text,regex) => [...text.matchAll(regex)].map(([match])=>match) 
```

所以你可以这样使用（必须使用/g）：

```
matches("something format_abc", /(?:^|\s)format_(.*?)(?:\s|$)/g) 
```

结果：

```
[" format_abc"] 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-08-18T13:33:50.820

正如@cms 在 ECMAScript (ECMA-262) 中所说，您可以使用[`matchAll`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/matchAll). 它返回一个迭代器并通过将其放入[`[... ]`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)（扩展运算符）中，它转换为一个数组。（这个正则表达式提取文件名的 url）

```
let text = `<a href="http://myhost.com/myfile_01.mp4">File1</a> <a href="http://myhost.com/myfile_02.mp4">File2</a>`;

let fileUrls = [...text.matchAll(/href="(http\:\/\/[^"]+\.\w{3})\"/g)].map(r => r[1]);

console.log(fileUrls);
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-08-20T20:45:04.340

获取所有组出现

```
let m=[], s = "something format_abc  format_def  format_ghi";

s.replace(/(?:^|\s)format_(.*?)(?:\s|$)/g, (x,y)=> m.push(y));

console.log(m);
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-03-05T05:52:43.140

我你和我一样，希望正则表达式返回一个像这样的对象：

```
{
    match: '...',
    matchAtIndex: 0,
    capturedGroups: [ '...', '...' ]
} 
```

然后从下面剪断函数

```
/**
 * @param {string | number} input
 *          The input string to match
 * @param {regex | string}  expression
 *          Regular expression 
 * @param {string} flags
 *          Optional Flags
 * 
 * @returns {array}
 * [{
    match: '...',
    matchAtIndex: 0,
    capturedGroups: [ '...', '...' ]
  }]     
 */
function regexMatch(input, expression, flags = "g") {
  let regex = expression instanceof RegExp ? expression : new RegExp(expression, flags)
  let matches = input.matchAll(regex)
  matches = [...matches]
  return matches.map(item => {
    return {
      match: item[0],
      matchAtIndex: item.index,
      capturedGroups: item.length > 1 ? item.slice(1) : undefined
    }
  })
}

let input = "key1:value1, key2:value2 "
let regex = /(\w+):(\w+)/g

let matches = regexMatch(input, regex)

console.log(matches)
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-04-13T10:13:02.187

只需使用 RegExp.$1...$n 组，例如：

1.匹配第一组RegExp.$1

2.  匹配第二组 RegExp.$2

如果您在 regex likey 中使用 3 组（注意在 string.match(regex) 之后使用）

正则表达式.$1 正则表达式.$2 正则表达式.$3

```
 var str = "The rain in ${india} stays safe"; 
  var res = str.match(/\${(.*?)\}/ig);
  //i used only one group in above example so RegExp.$1
console.log(RegExp.$1)
```

```
//easiest way is use RegExp.$1 1st group in regex and 2nd grounp like
 //RegExp.$2 if exist use after match

var regex=/\${(.*?)\}/ig;
var str = "The rain in ${SPAIN} stays ${mainly} in the plain"; 
  var res = str.match(regex);
for (const match of res) {
  var res = match.match(regex);
  console.log(match);
  console.log(RegExp.$1)

}
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-05-11T11:36:26.740

我以为您只想获取包含**abc**子字符串的所有单词并**存储****匹配**的组/条目，所以我制作了这个脚本：

```
s = 'something format_abc another word abc abc_somestring'
    console.log(s.match(/\b\w*abc\w*\b/igm));
```

*   `\b` - 单词边界
*   `\w*`- 0+字字符
*   `abc`- 你的完全匹配
*   `\w*`- 0+字字符
*   `\b` - 单词边界

参考：[正则表达式：匹配所有包含某个单词的单词](https://stackoverflow.com/questions/42535652/regex-match-all-the-words-that-contains-some-word) [https://javascript.info/regexp-introduction](https://javascript.info/regexp-introduction)

# sharepoint-2007 - 如何集成 Sharepoint 社区功能

> ID：432499
> 
> 赞同：0
> 
> 时间：2009-01-11T07:23:22.267
> 
> 标签：sharepoint-2007

我有一个网站可以显示不同的报告，例如这些示例

```
http://contoso.com/report.aspx?id=1
http://contoso.com/report.aspx?id=2 
```

在每个报告页面中，我想嵌入一个 Sharepoint 控件，它允许我：

1.  为每个报告开始讨论
2.  向报告的现有线程添加评论/响应
3.  以 1 到 5 的等级对报告进行评分并提供评论

正如隐含的那样，Sharepoint 论坛将作为后备存储，也可以直接访问。

1.  这在 Sharepoint 2007 中是否可行？如果是这样，有多难？
2.  我怎样才能实现这样的场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-03T22:10:51.403

为了最好地回答您的问题，我需要知道报告实际上是什么。我假设报告是 Word 文档。

您可能需要进行一些自定义编码才能使其正常工作。一种方法可能是：

1.  创建文档库。
2.  创建一个讨论论坛。
3.  在文档库中添加一列，以存储 1-5 的评分。
4.  创建一个显示文档及其元数据（包括您的分数）的 WebPart。
5.  在文档库上有一个事件接收器或工作流，每次添加一个以文档标题为主题的报告时，它都会创建一个新的顶级线程。
6.  在您的 Web 部件中有代码，用于查询讨论论坛中主题为文档名称的所有项目，并显示该主题。

完成此任务可能需要一些 C# 和 WebPart 开发技能。不是初学者可以做的。

# sql-server-2005 - SQL Server 2005 中的系统视图文本

> ID：432500
> 
> 赞同：1
> 
> 时间：2009-01-11T07:25:34.727
> 
> 标签：sql-server-2005, views, system

我正在寻找使用对象资源管理器或使用 sp_helptext 查看 SQL Server 2005 中系统视图和过程的文本。

实际上我来自 SQL Server 2000 背景，我们具有直接使用 SQL Server 2000 企业管理器检索视图代码和存储过程的功能，但我仍然无法在 SQL Server 2005 管理中找到此功能Studio 并且仍在寻找相同的功能来获取 SQL Server 2005 中的视图和过程文本。

请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T07:34:42.697

您是否有权访问 SQL Server Management Studio？它现在是 sys.sp_helptext 并且可以在对象浏览器中的 master --> Programmability --> Stored Procedures --> System Stored Procedures 中浏览并执行

```
exec sys.sp_helptext ObjectName 
```

您要查找的所有信息都可以在[syscomments](http://msdn.microsoft.com/en-us/library/ms186293(SQL.90).aspx)表中找到，该表存储了所有视图、规则、默认值、触发器、CHECK 约束、DEFAULT 约束和存储过程的定义。SQL 定义语句存储在“text”列中。

```
select text from syscomments  where id =
OBJECT_id('objectname')
order by colid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T09:44:15.697

[这个 Stackoverflow 帖子](https://stackoverflow.com/questions/181909/tool-for-scripting-table-data#181942)有一个数据库逆向工程脚本（除其他外）逆向工程师查看定义。从剧本

```
-- This generates view definitions 
--
select definition + char(10) + 'go' + char(10)
  from sys.sql_modules c
  join sys.objects o
    on c.object_id = o.object_id
  join #views o2
    on o.object_id = o2.object_id 
```

请注意，`#views`在脚本的前面填充了要转储的视图列表。选择特定模式（也从脚本中）

```
select o.name
      ,o.object_id
  into #views
  from sys.objects o
  join sys.schemas s
    on s.schema_id = o.schema_id
 where o.type in  ('V')
   and s.name = @schema 
```

要获取存储过程，请替换“P”；获取函数替代“FN”或“TF”

在`master`数据库中，系统存储过程的定义位于`sys.system_views`'sys.system_objects`, 'sys.system_columns`和`sys.system_sql_modules`. 逆向工程脚本中的查询可以很容易地通过使用这些表来获得系统项的定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T09:53:50.717

如果您只想查看定义过程的文本：

右键单击存储过程，然后选择修改。这将显示定义存储过程的 SQL。

或者：右键单击，将存储过程编写为，创建到，新建查询编辑器窗口。

其他答案更高级，但我想也许你在问一个简单的问题:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T10:41:33.787

以下是列出所有动态管理视图的方法：

```
SELECT * FROM sysobjects
WHERE name LIKE 'dm_%'
order by name 
```

不幸的是，如果您在这些文件上运行 sp_helptext，它不会给您太多帮助。例如，

```
exec sp_helptext   N'sys.dm_os_sys_info' 
```

回报：

```
CREATE VIEW sys.dm_os_sys_info AS
    SELECT *
    FROM OpenRowset(TABLE SYSINFO) 
```

我尝试过的所有结果都相同。

# linq-to-sql - 在 Linq2Sql 中保存一对多关系的最佳方法是什么？

> ID：432510
> 
> 赞同：4
> 
> 时间：2009-01-11T07:30:09.960
> 
> 标签：linq-to-sql, one-to-many

我试图找出在 Linq2Sql 中保存简单的一对多关系的最佳方法。

假设我们有以下 POCO 模型（顺便说一句伪代码）：

*人有零到多个车辆。*

```
class Person
{
    IList<Vehicle> Vehicle;
}

class Vehicle
{
    string Name;
    string Colour;
} 
```

现在，当我保存一个人时，我将该 poco 对象传递给存储库代码（恰好是 L2S）。我可以很好地保存 person 对象。我通常这样做。

```
using (Db db = new Db())
{
    var newPerson = db.People.SingleOrDefault(p => p.Id == person.Id) ?? new SqlContext.Person();
    // Left to right stuff.
    newPerson.Name = person.Name;
    newPerson.Age = person.Age;

    if (newPerson.Id <= 0)
        db.People.InsertOnSubmit(newPerson);
    db.SubmitChanges();
} 
```

我不确定我应该在哪里以及如何处理该人可能拥有的车辆清单？有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T07:46:22.297

```
using (Db db = new Db())
{
    var newPerson = db.People.SingleOrDefault(p => p.Id == person.Id) ?? new SqlContext.Person();
    // Left to right stuff.
    newPerson.Name = person.Name;
    newPerson.Age = person.Age;

    // add vehicles.
    Vehicle firstV = new Vehicle();
    firstV.Name = "some name";
    firstV.Person = newPerson; // need to do this to set the person Id on the vehicle.
    newPerson.Vehicle.Add(firstV);
    // now when you save the Person it should save the Vehicle list 
    // if you set Cascade save update on the list. (not sure how to do that in L2S

    if (newPerson.Id <= 0)
        db.People.InsertOnSubmit(newPerson);
    db.SubmitChanges();
} 
```

现在您可以选择使用来自界面的数据在另一个级别构建车辆列表。

但是您需要记住，仅将 Vehicle 添加到 Person 对象的列表中是不够的，您还需要将车辆 Person 属性设置为拥有车辆的人。

~~**观察**我不确定这一点，但是当您执行*db.People.SingleOrDefault*时，您可能会将整个 People 表加载到 memory 中。这不是你想做的事情。~~由 Slace 在评论中更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T07:48:30.610

您需要做的就是确保在数据库中设置了适当的关系。

如果您的 Vehicle 表有一个 PersonId 并且它们之间有一个外键，那么当您将它们添加到 DBML 时，Linq to SQL 将检测到它们之间存在关系并创建`Table<T>`该关系的表示。

# testing - 如何让管理层相信 QA 很重要？

> ID：432512
> 
> 赞同：5
> 
> 时间：2009-01-11T07:31:36.510
> 
> 标签：testing, qa

我在一家程序员不到 10 人的小型软件公司工作。我们的软件安装在全球数十个地方。我们的代码库非常庞大，主要是由于糟糕的设计和大量的代码重复 (IMO)。我们有大约 30 个不同的项目，每个项目总共有大约 600 KLOC，其中大约 200 KLOC 是我们自己开发的代码。当我在 2006 年到达那里时，这段代码甚至还没有受到修订控制。我已经设法说服权力，它很重要，我们现在使用代码控制系统（cs-rcs，不是我的选择，但总比没有好）和错误跟踪系统。最大的缺失是整个过程中完全缺乏质量保证。我们的发布过程在纸面上是不存在的，实际上它包括“按 ctrl-F9，将二进制文件复制到客户端，声明问题已修复”。

谁能指点我一些官方文件或PHB语言文件或文章来解释这个过程中的公然疯狂？我相信老板可以聘请一些顾问告诉他这件事，然后他可能会相信。但我只是一个拥有软件工程学士学位的低级维护人员。而且我的种族对我也没有帮助。在这种情况下使用什么弹药最好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T07:43:02.930

在这种情况下，你最好的弹药就是等待不可避免的灾难。一旦它发生，让你所有的鸭子排成一排，制定一个让这场灾难不再发生的计划，一个强调实施成本远低于灾难本身成本的计划。

如果他们一开始就不想要“它”，那么再多的谈话也不会让 PHBs “明白”。最终只有那个严厉的主人给他们一个大耳光——现实——才能说服他们。

哦，当你在做的时候，更新你的简历并开始寻找。倾向于说服人们他们需要 QA 的灾难与杀死公司的灾难非常相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T08:53:08.200

金钱是你最好的选择——在支付方面，它最痛苦。
我认为下面的图片说明了一切：（ 图片来自[www.developertesting.com](http://www.developertesting.com/archives/month200501/20050127-TheDeveloperTestingParadox.html)）[![错误成本](https://i.stack.imgur.com/WiaI6.jpg)](https://i.stack.imgur.com/WiaI6.jpg)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-11T10:45:14.760

同义反复，说服他们的唯一方法是将他们放在令人信服的东西面前。那件事可以从一个列表中得出，例如：

*   预示着代价高昂的灾难促使人们采用先前提出的解决方案
*   用现成的永不重演的解决方案解决无法预料的灾难
*   对灾难的精彩、有说服力的预言
*   对贪婪的极有说服力的呼吁（节省预言灾难的机会成本）

或者是其他东西。在所有这些情况下，有人将不得不在某个时候为您提出的 QA 解决方案提出理由，并且从外观上看，必须是您。所以我开始学习说服力。

[如何赢得朋友和影响人们](https://rads.stackoverflow.com/amzn/click/com/0091906814)最多应该花你几美元。 [Getting To Yes](https://rads.stackoverflow.com/amzn/click/com/0140157352)也很便宜。

您是如何同意源代码控制的？你能继续削减，一次一小步地改进流程吗？

尝试谷歌搜索“[改变你的组织](http://www.google.nl/#sclient=psy-ab&hl=nl&site=&source=hp&q=change+your+organization&pbx=1&oq=change+your+organization&aq=f&aqi=g-vL4&aql=1&gs_sm=e&gs_upl=963l963l0l1641l1l1l0l0l0l0l126l126l0.1l1l0&bav=on.2,or.r_gc.r_pw.,cf.osb&fp=9e4daf96b951a2e5&biw=1119&bih=835)”，看起来有一些有希望的链接。

最后，请记住（正如一位智者曾经说过的），如果你不能改变你的组织，那么你应该改变你的组织。真的总是有另一种选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T09:43:56.150

管理层只会理解两件事：（1）成本效益和（2）客户满意度。第二个很难量化，但第一个很容易。你可以花 40,000 到 60,000 美元聘请一位体面的 QA 工程师，他可以进来并开始理解混乱并开始围绕它制定计划。成本效益来自确保更高技能的工程师不必花费 2 个月的时间来追踪隐藏在 10 万行代码中的错误。

还有另一种方法可以解决这个问题...您可以在我工作的地方做我们正在做的事情。从一开始就开始为代码编写测试，然后当你完成代码时，如果测试通过了，那么你就是黄金。测试通过后，您就可以进行测试，以确保您一旦破坏该代码，您将几乎立即知道它。如果你让你的程序员同事参与进来，那么至少所有新代码都将在测试框架下开发。[测试驱动开发](http://en.wikipedia.org/wiki/Test-driven_development)不仅使过程更快（在开始编码之前您已经知道想要的结果是什么），而且还有助于快速完善您的需求。最重要的是，通过一点社会工程（与您的同行合作），您可以一点一点地改变开发文化，直到该过程完成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-11T11:51:54.563

我可以推荐丰田方式。短版通常可以从丰田网站免费订购。管理层应该已经阅读了它，但显然他们还没有。阅读它，消化它，让管理层阅读它。为了获得灵感，我真的可以推荐阅读[Toyota 的 Long Drive 的教训](http://harvardbusinessonline.hbsp.harvard.edu/hbsp/hbr/articles/article.jsp?ml_action=get-article&articleID=R0707E)（获得 PDF 的几块钱是非常值得的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-11T07:41:54.477

也许如果你让一些程序员同事支持你，管理层会更愿意倾听。您无需成为天才即可意识到庞大而笨拙的代码库表明有很大的改进空间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-11T07:53:13.173

参考乔尔的[书](https://rads.stackoverflow.com/amzn/click/com/1590593898)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-11T07:54:44.573

如果您的管理层认为 QA 不重要，那么明显和“常识”到任何外行都会同意的程度，那么我不认为将一堆学术论文或其他任何东西放在他们会有所作为。

您唯一的希望可能是尝试整理一份可以显示成本节省的文件，但我怀疑这在这种情况下会有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-01-07T16:18:20.900

我在一个部门工作，那里有一个公共池在开发任务和测试之间轮换。这完成了两件事：

*   高技能、高效率的测试人员，他们最多知道代码要做什么，以及如何
*   知道轮到他们进行测试的开发人员，或者刚刚从测试中返回的开发人员。所以测试坏代码的痛苦是众所周知的，测试好代码的乐趣也是如此。

整个团队中最受尊敬的家伙是一个无情的测试人员，在开发时会生产出零缺陷的软件。

# service - 云计算需要一些规定吗？

> ID：432515
> 
> 赞同：1
> 
> 时间：2009-01-11T07:34:35.940
> 
> 标签：service, cloud

我最近参与了几个云计算平台。

首先请注意，我并不是要批评任何平台。

云计算是一个很大的领域，但为了让我的观点简单易懂。让我想出一个非常简单的场景，那就是托管在云上的数据存储服务。如果您使用任何存储服务，例如 Amazon EC2、SQL 数据服务 (SDS)、Salesforce.com 服务。

如果您要使用任何此类数据存储服务平台，所有此类服务的目标都是相同的，那就是按需提供请求的数据。无需担心它的存储方式、存储位置以及维护人员等......（所有云好东西）

现在我关注的领域是 ANSI-SQL 监管平台供应商的方式，以确保他们在所有产品中都遵循类似的语言，难道他们不能在服务提供商之间监管类似的概念吗？

为什么没有这样的倡议？

任何想法表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T07:45:58.850

在我看来，您似乎担心供应商锁定云计算。我可能很天真，但我通常会选择技术，然后去寻找能够提供这些技术的云供应商。如果我的目标是“一次编写，随处运行的方法”，我就必须选择尽可能现实的技术。

由于发展速度相当快，我真的认为标准化委员会很难跟上。ANSI-SQL 已有 20 多年的历史。在我看来，您似乎在我们甚至不知道云在做什么之前就要求标准化......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T07:45:26.497

我认为这个新兴的云计算计划还太年轻，无法制定标准。

服务提供商现在只担心冲入市场，而不是互操作性和标准。

稍后，当情况更加确定时，可能会出现一些共同的指导方针。但还有很长的路要走。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T07:48:28.113

您似乎专门询问云**存储**服务，而不是一般的云计算。因此，您的亚马逊示例将是 S3，而不是 EC2。

我认为这个领域在 API 上标准化还有些年轻。这些服务以排除这种情况的方式使自己与众不同。例如，S3 以复杂性换取可扩展性/可靠性/性能：您无法执行复杂的 SQL LIKE 查询。您可以基于密钥存储和检索数据块，仅此而已。

我认为随着此类服务越来越成为主流的做事方式，标准将会出现。用户将希望可以随心所欲地切换供应商，移动他们的数据，测试免费的本地存储等。

使用的 API 都已经基于 Web 标准。制作一个抽象层以使它们看起来相同是相当简单的。

# c++ - Windows api中是否有O（1）方式来连接2个文件？

> ID：432520
> 
> 赞同：3
> 
> 时间：2009-01-11T07:40:27.740
> 
> 标签：c++, winapi, visual-c++

Windows API 中是否有 O(1) 方式来连接 2 个文件？

O(1) 相对于不必读取整个第二个文件并将其写出到要附加到的文件中。因此，与处理的 O(n) 字节相反。

我认为这在文件系统驱动程序级别应该是可能的，而且我认为没有可用的用户模式 ​​API，但我想我会问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T08:12:23.713

如果“新文件”只会被您的应用程序读取，那么您无需在磁盘上实际连接它们就可以离开。

您可以只实现一个流接口，其行为就像两个文件已连接一样，然后使用该流，而不是应用程序框架使用的默认文件流实现。

如果这对您不起作用，并且您使用的是 Windows，则始终可以创建一个重新解析点和一个文件系统过滤器。我相信如果您创建一个“迷你过滤器”，它将在用户模式下运行，但我不确定。

您可能可以在此处找到有关它的更多信息：

[http://www.microsoft.com/whdc/driver/filterdrv/default.mspx](http://www.microsoft.com/whdc/driver/filterdrv/default.mspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T07:42:17.563

不，没有。

您可能希望的最好结果是 O(n)，其中 n 是两个文件中较短的一个的长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T07:45:41.300

从理论上讲，这是可能的（在磁盘上），前提是：

*   第二个文件被破坏
*   连接尊重文件系统的片段对齐（例如发生在集群边界上）

# wpf - 将 WPF 移植到 Cocoa（和/或反之亦然）

> ID：432545
> 
> 赞同：4
> 
> 时间：2009-01-11T07:57:30.247
> 
> 标签：wpf, cocoa, porting

我正处于为未来的 mISV 创建软件的初期阶段。该程序是一个桌面应用程序，从长远来看，我希望有一个适用于 Windows 和 OS X 的本机版本（我查看了各种跨平台 API，但没有一个能满足我的需求）。不过，最初，我认为同时为两个平台开发是没有意义的。考虑到这一点，我一直在研究适用于 Windows 的 WPF 和适用于 OS X 的 Cocoa，它们看起来很相似。

有没有人有过将一个移植到另一个的经验？是否有特定的技术/范式可以使移植更容易？忽略业务考虑，您会建议先开发其中一个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-11T08:35:38.267

好。一旦您为 Cocoa 编写了应用程序，就可以将其移植到 Windows。这可以使用[gnustep](http://gnustep.org/)或[Cocotron](http://www.cocotron.org/)来完成。

如果你用另一种方式来做，[WINE](http://www.winehq.org/)是为了让移植更容易。

我宁愿先写 OSX 版本。这是因为 Windows 用户不清楚他们想要应用程序的外观。根据我的经验，他们很容易受到各种用户界面的影响。一致性对他们来说没有什么价值。由于没有共同的协议，Windows 应用程序应该是什么样子，没有什么能阻止 Windows 用户真正喜欢 OSX 设计，他们甚至经常这样做。Windows 版 iTunes 看起来像一个非常典型的 OSX 应用程序，你很少听到有人抱怨它不够 Windows-ish。

往另一个方向发展，这是不正确的。OSX 用户对 Cocoa 应用程序有明显的偏好，并且对 GIMP 或 Inkscape 之类的东西在 OSX 下的工作与其他任何地方一样好，但对于 OSX 训练有素的眼睛来说看起来很丑陋。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-11T16:21:10.263

我认为通过选择特定于每个平台的窗口环境，您走在了正确的道路上。这种方法允许您在每个平台上创建不受跨平台窗口工具包固有妥协限制的用户体验。

一个好的第一步是将您的设计分解为两部分：特定于平台的元素和平台中性元素。您已经可以将任何 UI 代码放入特定于平台的列中，但也许您的应用程序需要一些可以用平台中立的 C++ 编写的数据持久性。使用这种方法您可能会发现，您可以以与平台无关的方式编写相当多的逻辑和基础架构，而只留下 UI 和胶合代码作为特定于平台的代码。

最近有一集[Late Night Cocoa](http://www.mac-developer-network.com/category/podcasts/lnc/)名为**[Porting Large Applications to the Mac 平台](http://www.mac-developer-network.com/podcasts/lnc/lnc037/)**。您的应用程序可能不符合“大”的条件，但这个播客从做过几次的人那里提供了很多很棒的移植知识。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-12T05:51:57.067

我目前正[致力于](http://www.appmakerx.com)在这个领域移植工具，并且在 Mac 和 Windows 上使用或编写跨平台框架方面拥有多年的痛苦经验。

过去最大的问题之一是 Apple 拒绝为 Cocoa 开放 nib 格式（Carbon nib 几年前是开放的 XML 文件）。这随着 XCode 3 和[.xib](http://developer.apple.com/documentation/developertools/conceptual/IB_UserGuide/BuildingaNibFile/chapter_3_section_2.html)格式而改变，正如[Frasier Speirs](http://speirs.org/2007/12/05/what-are-xib-files/)所解释的那样。

至少在基本布局级别，现在有机会自动从一种 XML 格式移植到另一种格式。我认为 WPF (XAML) 更干净，因此我将其用作我的基本格式并迁移到 Cocoa。

谈到后面的代码，虽然您可以在 Mono 下使用 C#，但[CocoaSharp](http://www.cocoa-sharp.com/)项目似乎停滞不前或非常缓慢，我不推荐它。

如果您对 C++ 感到满意，请考虑在 C++ 中使用尽可能多的逻辑，并在 C# 和 Objective-C 中使用特定于平台的薄层。

另一种值得研究的方法是使用动态语言，如 Python 或 Ruby。我不确定[IronPython](http://www.codeplex.com/IronPython)和[IronRuby](http://www.ironruby.net/)目前哪个更成熟，但现在两者都得到了微软人员的支持。在 Cocoa 方面，我认为 Ruby 语法的灵活性将取得胜利，并且[RubyCocoa](http://rubycocoa.sourceforge.net/HomePage)可能正在超越[PyObjC](http://pyobjc.sourceforge.net/)。

否则，使用 C# 和 Objective-C 工作并维护两个具有相同设计的完全独立的代码库。幸运的是，框架对于大多数事情都有类似的语义，特别是如果您使用绑定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T08:01:17.540

好吧，没有一条直截了当的道路。最好的方法是使用模型-视图-控制器模式或其他架构将业务逻辑等与表示分离。但是，除非您使用 Mono，否则我认为将很少有代码可供您共享。如果您正在开发 WPF，那么您肯定会使用 .NET，除了 Mono，Objective-C 是 Mac OS 下的标准编程工具X。

保持良好的设计，您可以让大部分代码只是 .NET 代码的 Objective-C 版本，反之亦然，而不是试图找到迁移路径。

# .net - 属性 Visibility 更改时为 StackPanel 设置动画

> ID：432550
> 
> 赞同：3
> 
> 时间：2009-01-11T08:03:34.743
> 
> 标签：.net, wpf, .net-3.5, c#-3.0

在 WPF 3.5（带有 SP1）中，我只有**StackPanel，我想在更改属性 Visibility 时对其进行动画处理**。我不知道这个 StackPanel 的高度，因为它的内容决定了它的高度。因此，当我将 StackPanel 的属性更改为 Visible (progressPanel.Visibility = Visibility.Visible;) 时，我希望看到一个动画（可能是从 0 到 X 的 DoubleAnimationUsingKeyFrames）。

此外，我有多个 StackPanel 我希望看到这种行为（所以在最好的情况下，我需要一些通用的东西）。**有人知道如何做到这一点吗？**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T08:37:41.353

您可以创建和重用在可见性更改时触发动画的自定义 StackPanel 样式：

```
<Style x:Key="MyStyle" TargetType="{x:Type StackPanel}">
    <Style.Triggers>
        <Trigger Property="Visibility" Value="Visible">
            <Trigger.EnterActions>
                <BeginStoryboard>
                    <Storyboard >
                        <DoubleAnimation .../>
                    </Storyboard>
                </BeginStoryboard>
            </Trigger.EnterActions>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T08:21:00.107

如果您需要一种具有垂直增长动画的扩展效果。如果面板是垂直方向的面板，则在面板的 ScaleTransform.ScaleY 属性上执行从 0 到 1 的双重动画。

# javascript - JavaScript 同步自定义提示

> ID：432553
> 
> 赞同：10
> 
> 时间：2009-01-11T08:04:48.080
> 
> 标签：javascript, jquery

我需要使用自定义提示，就像这个[jQuery 插件演示](http://abeautifulsite.net/notebook_files/87/demo)中显示的一样。问题是，所有自定义提示都依赖于回调，它们是异步的，我需要它们同步。

我需要做类似的事情：

```
alert("Your name is " + myPrompt("What's your name?")); 
```

其中 myPrompt 是模态自定义同步提示。

可能吗？

谢谢，奈米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T08:42:30.407

您可以使用 JQuery UI Dialog 将 DIV 显示为模式对话框。

请参阅[http://docs.jquery.com/UI/Dialog/dialog#options](http://docs.jquery.com/UI/Dialog/dialog#options)

但是，要支持真正同步的对话框（阻塞函数调用），您需要浏览器提供一些帮助。并非所有浏览器都支持它。IE 已经做了很多年，最近 mozilla 已经在 Firefox 中添加了 showModalDialog。

您是否考虑过使用闭包来提供回调的延续？

例子

```
function dosomethingwhichneedsprompt()
{
   var a = "stuff";
   var o = {}
   //other code
   displayPrompt("PleaseInputStuff",o)  //o modified by prompt would like this to block
   //continue to use data on o and the variable a after prompt dismissed.
} 
```

由于 displayPrompt 不能在所有浏览器上实现阻塞，框架将使用回调代替：-

```
function doSomethingWhichNeedsPrompt(fnContinue)
{
   var a = "stuff";
   var o = {}
   //other code
   displayPrompt("PleaseInputStuff",o, fnCallback)
   function fnCallback() {
       //continue to use data on o and the variable a after prompt dismissed.
       if (fnContinue) fnContinue();
  }
} 
```

当然，任何调用`doSomethingWhichNeedsPrompt`都需要了解它的异步性质，并且`doSomethingWhichNeedsPrompt`可能需要在完成所有工作后获取它调用的函数参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T10:11:18.480

> 我需要它们同步。

您可能需要重新考虑您的需求。在 IE7+ 甚至不允许 window.prompt() 的情况下，没有跨浏览器接收同步输入的方法。

有 showModalDialog，但它不是全球可用的，而且在我看来，它对用户非常不利。在大多数浏览器中，同步不仅会阻塞您的脚本，还会阻塞浏览器的 UI，这非常不方便。

回调并不是那么糟糕 IMO：

```
myPrompt("What's your name?", function(x) {
    alert("Your name is "+x);
}); 
```

# php - 请求后运行 PHP

> ID：432556
> 
> 赞同：2
> 
> 时间：2009-01-11T08:08:00.773
> 
> 标签：php

我希望能够在加载页面时启动第二个脚本（PHP 或 Python）并让它在用户取消/导航离开后继续运行这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T08:46:53.237

您可以发送 Connection:Close 标头，它为您的用户完成页面，但使您能够在“页面加载后”执行操作。

有一种简单的方法可以忽略用户中止（也请参阅[php 手册](http://de3.php.net/ignore_user_abort)）：

```
ignore_user_abort(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T08:10:34.620

使用[带有 pcntl 的进程分叉](http://www.electrictoolbox.com/article/php/process-forking/)。但是，它只能在 Unix 操作系统下工作。

你也可以这样做：

```
exec("/usr/bin/php ./child_script.php > /dev/null 2>&1 &"); 
```

[您可以在此处](http://www.welldonesoft.com/technology/articles/php/forking/)阅读有关上述示例的更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T09:24:25.267

保留当前脚本：

*   忽略用户中止（真）；
*   设置时间限制（0）；

运行另一个脚本：

*   见 $sock=fsockopen(' [http://localhost/path_to_script](http://localhost/path_to_script) ',80,$errorStr,3600) + stream_set_timeout($sock,3600);
*   见 exec('php path_to_script'); - 这将导致您的脚本从 CLI 运行，因此您必须在该服务器上安装 php-cli。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T09:01:26.530

如果您不能使用其他方法，另一种方法是在输出底部包含一个 img 标记，该标记请求一个 php 页面，该页面可以执行您想要执行的任何操作。

它仍然会显示加载动画，所以我认为 Karsten 的建议可能更好（我会在下次需要做我认为的这类事情时尝试）。

# c++ - 使用 gdb 调试 C++ STL/Boost 的最佳实践

> ID：432567
> 
> 赞同：46
> 
> 时间：2009-01-11T08:24:26.090
> 
> 标签：c++, stl, boost, gdb

使用 gdb 调试，任何使用 STL/boost 的 c++ 代码仍然是一场噩梦。任何使用过 STL 的 gdb 的人都知道这一点。例如，在[此处查看](http://www.yolinux.com/TUTORIALS/GDB-Commands.html#STLDEREF)代码中一些调试会话的示例运行。

我试图通过收集提示来减轻痛苦。您能否评论一下我在下面收集的提示（特别是您一直在使用的提示以及您建议对它们进行的任何更改）-我列出的提示是技术性的降序。

*   有人在使用[“Stanford GDB STL utils”](http://www.stanford.edu/~afn/gdb_stl_utils/)和[“UCF GDB utils”](http://www.yolinux.com/TUTORIALS/src/dbinit_stl_views-1.01.txt)吗？是否有一些用于提升数据结构的工具？上面的实用程序似乎不能递归使用，例如用于在一个命令中以清晰的方式打印 boost::shared_ptr 的向量。
*   编写您的 .gdbinit 文件。例如，包括 C++ 相关的美化器，列在 UCF GDB 实用程序的底部。
*   使用检查/调试 STL/Boost 库，例如 STLport。
*   使用日志记录（例如[这里](http://www.ddj.com/cpp/201804215)描述的）

*更新*：GDB 有一个[新的 C++ 分支](http://sourceware.org/gdb/wiki/ProjectArcher)。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-12T14:39:17.160

也许不是您正在寻找的那种“提示”，但我不得不说，在从 C++ 和 STL 转向 C++ 和 boost 和 STL 几年后，我现在在 GDB 上花费的时间比我少*得多*习惯了。我把这归结为几件事：

*   提升智能指针（特别是“共享指针”，以及需要性能时的指针容器）。我不记得上次我必须写一个显式删除（删除是 C++ 恕我直言的“goto”）。有很多 GDB 时间跟踪无效和泄漏的指针。
*   boost 充满了经过验证的代码，这些代码你可能会用其他的低级版本来破解。eg`boost::bimap`非常适合 LRU 缓存逻辑的常见模式。还有一大堆 GDB 时间。
*   采用单元测试。 `boost::test`的 AUTO 宏意味着设置测试用例绝对是轻而易举的事（[比 CppUnit 更容易](http://gamesfromwithin.com/?p=29)）。这在它被构建到任何你必须附加调试器的东西之前很久就捕获了很多东西。
*   与此相关的是，像这样的工具`boost::bind`使测试设计变得更容易。例如，算法可以更通用，并且与它们所操作的类型的联系更少；这使得将它们插入测试垫片/代理/模拟对象等变得更容易（而且暴露于 boost 的模板特性将鼓励你“敢于模板化”你以前从未考虑过的东西，从而产生类似的测试好处）。
*   `boost::array`. “C 数组”性能，在调试版本中进行范围检查。
*   boost 充满了你不禁要学习的优秀代码

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-11T19:16:06.197

你可能会看：

[使用 gdb 检查标准容器 (std::map) 内容](https://stackoverflow.com/questions/427589/inspecting-stdmap-contents-with-gdb)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-11T17:05:12.437

我认为最简单和最多的选择是使用日志记录（我实际上使用调试打印，但我认为这不是重点）。最大的优势是您可以检查任何类型的数据，每次程序执行多次，然后使用文本编辑器搜索它以查找有趣的数据。请注意，这非常快。缺点很明显，您必须预先选择要记录的数据和记录的位置。但是，这并不是一个严重的问题，因为您通常知道代码中哪里发生了不好的事情（如果没有，您只需在这里和那里添加健全性检查，然后您就会知道）。

检查/调试库很好，但它们作为测试工具更好（例如，运行它，看看我是否做错了什么），而不是调试特定问题。他们无法检测到用户代码中的缺陷。

否则，我使用普通的 GDB。这并不像听起来那么糟糕，尽管如果你被“ `print x`”打印满屏的垃圾吓到了，那可能会是这样。但是，如果你有调试信息，比如打印一个作品的成员，如果有任何失败，你仍然可以通过命令`std::vector`检查原始内存。`x`但如果我知道我在寻找什么，我会使用选项 1 - 日志记录。

请注意，“难以检查”的结构不仅来自 STL/Boost，还来自其他库，例如 Qt/KDE。

# image-processing - 我从哪里开始学习图像处理和对象识别？

> ID：432569
> 
> 赞同：37
> 
> 时间：2009-01-11T08:29:44.550
> 
> 标签：image-processing, theory, computer-vision, object-recognition

我有兴趣编写一些基本的计算机化对象识别应用程序，因此我认为我需要一些图像处理算法的理论背景，以及一些用于决策能力的 AI。

我是一名计算机科学专业的毕业生，有一天我计划获得硕士学位，希望在这些领域之一。同时，我想抢先一步，做一些自学。

所以我的问题是，我从哪里开始？如果可能的话，我会很感激一个正确方向的箭头，一些链接。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-01-11T16:01:18.227

您可能想查看这些类似问题的答案：

*   [图像处理语言/环境](https://stackoverflow.com/questions/398706/image-processing-language-environment)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-01-11T08:45:30.290

也许看看：[OpenCV](http://opencv.willowgarage.com/wiki/)。非常好的图像处理库，当您知道将什么用于什么目的时，您可以看看“幕后”以了解它是如何工作的:)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-01-11T09:06:29.517

欢迎来到有趣的计算机视觉世界，这基本上是您使用 AI 算法处理图像处理以进行识别/跟踪/分割等的领域。在不详尽的情况下，整个交易涉及图像采集、图像处理、图像分割、图像识别.

最简单的开始方法可能是 OpenCV。然而，在大多数应用程序中，使用 OpenCV 可能是多余的，因为从头开始并不难。一旦你通过了图片加载（你可能想考虑 BMP 因为它最容易解析）部分，如果你只有数学公式，你就可以实现许多基本的图像处理算法。您可能还可以尝试其他库，比如 torchvision、AForge (.NET) 是不错的选择。

当谈到人工智能部分时，事情就变得有趣了。您可能希望在可以使用大量库的地方使用 SVM，例如 libsvm、SVMlight 等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-11T12:39:45.933

如果您对书籍感兴趣，我会推荐 John Russ 的入门级“图像处理和分析简介”。我还使用 ImageJ 作为一个很好的免费图像分析应用程序 - 非常适合原型设计和尝试。正如其他人所说，OpenCV 库也非常值得一看。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-11-11T18:01:00.813

我已经用免费的源代码编写了一些 OpenCV 图像处理/计算机视觉教程，所以你可能想看看其中的一些来帮助开始：[http ://www.shervinemami.co.cc/openCV.html](http://www.shervinemami.co.cc/openCV.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-11T16:48:43.170

很好的答案。我希望你不是数学恐惧症。这些天我最喜欢的技术是 Markov-Chain Monte Carlo (Google Spiegelhalter)。识别是一个优化问题，MCMC 是通过贝叶斯推理处理它们的通用方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-11T12:53:58.433

微软最近发布了一个用 C# 和 C++ 实现的开源 .NET SDK，其中包含一些非常基本的网络摄像头接口和图像分析。可能值得[浏览一下文档非常完善的代码](http://www.codeplex.com/touchless/SourceControl/changeset/view/26832#351643)，以便开始使用。

# c++ - 如何从 Logonuser 获取没有密码的用户帐户的用户令牌？

> ID：432570
> 
> 赞同：3
> 
> 时间：2009-01-11T08:30:58.370
> 
> 标签：c++, windows, visual-c++

对于没有密码的用户帐户，如何从 Logonuser 获取用户令牌？

特别是对于没有密码的帐户，Logonuser 将失败。
您可以通过检查空白密码 + 检查 GetLastError() == ERROR_ACCOUNT_RESTRICTION 来验证帐户。

但我需要实际返回一个令牌，所以我需要这个函数才能成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T17:03:28.897

如果启用了注册表设置 LimitBlankPasswordUse（默认情况下），这将失败。为了禁用此功能，请将 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa 下的 LimitBlankPasswordUse 值更改为零。或更改安全选项下的组策略设置。

请注意，这会造成安全漏洞，因为它允许使用空密码的帐户进行远程登录。

# api - 命名：你会怎么称呼一个围绕瘦 API 的丰富 API

> ID：432580
> 
> 赞同：1
> 
> 时间：2009-01-11T08:42:08.380
> 
> 标签：api, naming

我有一个“瘦”（SOAP）API，它只知道如何在底层系统中设置和获取实体。

我即将创建一个“丰富”的 API，它封装了“精简”API 并实现了复杂操作所需的逻辑，这些操作需要按特定顺序获取和设置多个实体。

示例：丰富的 API 将负责创建一个新的用户帐户，方法是创建一个通过瘦 API 链接到“帐户”实体的“潜在客户”实体。

我被困在一个命名块中，所以我转向 SO ;) 你会给我丰富的 API 起什么名字？“xxxRichAPI”？“xxx帮手”？“xxx服务”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-01-11T08:50:01.390

API 的意义不在于它隐藏了它的实现吗？因此，您的 API 调用更薄的 API 的事实是无关紧要的。不管它是如何做的，为你的 API 适当地命名它的作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-24T19:41:04.347

乍一看，这对我来说听起来像是 GoF [Facade](http://en.wikipedia.org/wiki/Facade_pattern)模式。您可能会考虑使用名称“xxxFacade”。

# html - 有没有办法旋转文本输入？

> ID：432589
> 
> 赞同：1
> 
> 时间：2009-01-11T08:44:14.443
> 
> 标签：html, css, text-rendering, text-styling, text-rotation

我必须将文本框和一些文本对齐大约 30 度，如下所示： [![旋转文本](https://i.stack.imgur.com/voYGb.png)](https://i.stack.imgur.com/voYGb.png)

我希望它至少在 IE 和 FF 中工作。我在网上找到的所有内容都涉及图像旋转。
任何人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T17:42:38.443

没有好的跨浏览器解决方案。

最新的 Webkit 支持 CSS 转换，以直接的方式允许这样的事情。

SVG 中有`<foreignContent>`理论上允许旋转 HTML，但它没有得到广泛支持（而且在支持它的地方，它通常是不完整的和错误的）。

我建议你改变页面的设计。尝试在输入周围使用边框和阴影的视觉技巧，使其看起来略微旋转。

我建议不要使用 Javascript 或 Flash 进行黑客攻击。浏览器的输入元素对可用性很重要。您的 hack 可能无法与密码管理器/自动填充、各种标准键盘快捷键、文本选择等配合使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-11T08:50:25.273

您最好的选择可能是 Flash。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-11T10:44:51.313

当前浏览器不完全支持，但在 FF3 和 IE7 上（至少）可以正常工作，是[canvas HTML 元素](http://en.wikipedia.org/wiki/Canvas_(HTML_element))。canvas 元素是 HTML5 的一部分，允许对位图图像进行动态可编写脚本渲染。画布由 HTML 代码中定义的具有高度和宽度属性的可绘制区域组成。JavaScript 代码可以通过与其他常见 2D API 类似的全套绘图功能访问该区域，从而允许动态生成图形。

[Mozilla 手册](https://developer.mozilla.org/En/Drawing_text_using_a_canvas)中的一页展示了如何在画布上绘制文本。所有画布图形都可以[`rotate(angle)`](https://developer.mozilla.org/En/Canvas_tutorial/Transformations)应用。该示例使用旋转方法以圆形图案绘制形状。：

```
function draw() {
var ctx = document.getElementById('canvas').getContext('2d');
ctx.translate(75,75);

for (i=1;i<6;i++){ // Loop through rings (from inside to out)
    ctx.save();
    ctx.fillStyle = 'rgb('+(51*i)+','+(255-51*i)+',255)';

    for (j=0;j<i*6;j++){ // draw individual dots
      ctx.rotate(Math.PI*2/(i*6));
      ctx.beginPath();
      ctx.arc(0,i*12.5,5,0,Math.PI*2,true);
      ctx.fill();
    }

    ctx.restore();
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-11T08:47:51.800

无论如何，我认为这是你只能在 CSS3 中做的事情，它还没有得到足够广泛的支持（除非它是某种内部应用程序，你可以说需要某个浏览器）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-12T00:08:48.243

同意PEZ。我会为此使用 Flash。但在 Safari 中，您可以使用 CSS3 转换来完成此操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-21T13:00:41.063

试试css3

```
-webkit-transform: rotate(270deg);
-moz-transform:rotate(270deg);
-o-transform: rotate(270deg); 
```

但这不适用于 IE

对于 IE 9+（感谢 Michael Potter）

```
-ms-transform: rotate(270deg) 
```

# analytics - 我的网页中的用户行为

> ID：432595
> 
> 赞同：3
> 
> 时间：2009-01-11T08:46:24.970
> 
> 标签：analytics

有人知道是否有办法了解用户在我的网页上所做的事情吗？我可以使用 Google Analytics 查看总体统计信息，但我无法真正了解用户在看什么，他们是否正在阅读我的内容等。

有人知道我是否可以使用免费或付费服务吗？

丹妮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T08:56:03.873

您可以尝试使用一种可以生成热图的分析工具。

这些可以直观地表示人们在网站上的点击位置，我认为有些人可能还可以让您跟踪光标的位置。

这是尽可能接近你想要的 - 没有办法追踪某人的眼睛在看什么，

维基百科声称谷歌分析可以做到这一点。我没有在分析中看到它，但它很可能隐藏在某个地方。不过，我之前使用过 clicktale：

[http://www.clicktale.com/](http://www.clicktale.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-02-15T13:45:16.670

试试[鼠标流](http://mouseflow.com/)。您甚至可以记录您的访客并观看视频。没试过，但看起来很有希望。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-16T20:12:17.960

Google Analytics 中的 Site Overlay 报告可能就是 Wikipedia 所指的内容。但是，它在大多数情况下都不起作用（用 Google 自己的话来说，这是一个“废话”）。

ClickTale 没问题。我推荐 CrazyEgg：[http ://crazyegg.com/](http://crazyegg.com/)

# c# - Writing custom IEnumerator with iterators

> ID：432600
> 
> 赞同：13
> 
> 时间：2009-01-11T08:49:21.733
> 
> 标签：c#, iterator

How can I write a custom `IEnumerator<T>` implementation which needs to maintain some state and still get to use iterator blocks to simplify it? The best I can come up with is something like this:

```
public class MyEnumerator<T> : IEnumerator<T> {
    private IEnumerator<T> _enumerator;
    public int Position {get; private set;} // or some other custom properties

    public MyEnumerator() {
        Position = 0;
        _enumerator = MakeEnumerator();
    }

    private IEnumerator<T> MakeEnumerator() {
        // yield return something depending on Position
    } 

    public bool MoveNext() {
        bool res = _enumerator.MoveNext();
        if (res) Position++;
        return res;
    }

    // delegate Reset and Current to _enumerator as well
}

public class MyCollection<T> : IEnumerable<T> {

    IEnumerator<T> IEnumerable<T>.GetEnumerator() {
        return GetEnumerator();
    }

    public MyEnumerator<T> GetEnumerator() {
        return new MyEnumerator<T>();
    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-01-11T08:59:11.730

Why do you want to write an iterator class? The whole point of an iterator block is so you don't have to...

i.e.

```
public IEnumerator<T> GetEnumerator() {
    int position = 0; // state
    while(whatever) {
        position++;
        yield return ...something...;
    }
} 
```

If you add more context (i,e, why the above can't work), we can probably help more.

But if possible, avoid writing an iterator class. They are lots of work, and easy to get wrong.

By the way, you don't really have to bother with `Reset` - it is largely deprecated, and shouldn't really ever be used (since it can't be relied to work for an arbitrary enumerator).

If you want to consume an inner iterator, that is fine too:

```
int position = 0;
foreach(var item in source) {
   position++;
   yield return position;
} 
```

or if you only have an enumerator:

```
while(iter.MoveNext()) {
   position++;
   yield return iter.Current;
} 
```

You might also consider adding the state (as a tuple) to the thing you yield:

```
class MyState<T> {
    public int Position {get;private set;}
    public T Current {get;private set;}
    public MyState(int position, T current) {...} // assign
}
...
yield return new MyState<Foo>(position, item); 
```

Finally, you could use a LINQ-style extension/delegate approach, with an `Action<int,T>` to supply the position and value to the caller:

```
 static void Main() {
        var values = new[] { "a", "b", "c" };
        values.ForEach((pos, s) => Console.WriteLine("{0}: {1}", pos, s));            
    }
    static void ForEach<T>(
            this IEnumerable<T> source,
            Action<int, T> action) {
        if (source == null) throw new ArgumentNullException("source");
        if (action == null) throw new ArgumentNullException("action");

        int position = 0;
        foreach (T item in source) {
            action(position++, item);
        }
    } 
```

Outputs:

```
0: a
1: b
2: c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T09:10:16.357

I'd have to concur with Marc here. Either write an enumerator class completely yourself if you really want to (just because you can?) or simply use an interator block and yield statements and be done with it. Personally, I'm never touching enumerator classes again. ;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T10:18:59.730

@Marc Gravell

> But if possible, avoid writing an iterator class. They are lots of work, and easy to get wrong.

That's precisely why I want to use `yield` machinery inside my iterator, to do the heavy lifting.

> You might also consider adding the state (as a tuple) to the thing you yield:

Yes, that works. However, it's an extra allocation at each and every step. If I am interested only in `T` at most steps, that's an overhead I don't need if I can avoid it.

However, your last suggestion gave me an idea:

```
public IEnumerator<T> GetEnumerator(Action<T, int> action) {
    int position = 0; // state
    while(whatever) {
        position++;
        var t = ...something...;
        action(t, position);
        yield return t;
    }
}

public IEnumerator<T> GetEnumerator() {
    return GetEnumerator(DoNothing<T, int>());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-15T18:58:07.350

I made a pretty simple Iterator that borrows the default Enumerator to do most (really all) of the work. The constructor takes an `IEnumerator<T>` and my implementation simply hands it the work. I've added an `Index` field to my custom Iterator.

I made a simple example here: [https://dotnetfiddle.net/0iGmVz](https://dotnetfiddle.net/0iGmVz)

To use this Iterator setup you would have something like this in your custom Collection/List class:

```
public class MyList<T> : List<T>{
    public new IEnumerator<T> GetEnumerator(){
        return new IndexedEnumerator<T>(base.GetEnumerator());
    }
} 
```

Now `foreach` and other built-in functions will get your custom enumerator, and any behavior you don't want to override will use the normal implementation.

```
public static class Helpers{
    //Extension method to get the IndexEnumerator
    public static IndexedEnumerator<T> GetIndexedEnumerator<T>(this IEnumerable<T> list){
        return new IndexedEnumerator<T>(list.GetEnumerator());
    }
}

//base Enumerator methods/implementation
public class BaseEnumerator<T> : IEnumerator<T>{
    public BaseEnumerator(IEnumerator<T> enumer){
        enumerator = enumer;
    }

    protected virtual IEnumerator<T> enumerator{get;set;}

    protected virtual T current {get;set;}

    public virtual bool MoveNext(){
        return enumerator.MoveNext();
    }

    public virtual IEnumerator<T> GetEnumerator(){
        return enumerator;
    }

    public virtual T Current {get{return enumerator.Current;}}

    object IEnumerator.Current {get{return enumerator.Current;}}

    public virtual void Reset(){}

    public virtual void Dispose(){}
}

public class IndexedEnumerator<T> : BaseEnumerator<T>
{
    public IndexedEnumerator(IEnumerator<T> enumer):base(enumer){}

    public int Index {get; private set;}

    public override bool MoveNext(){
        Index++;
        return enumerator.MoveNext();
    }
} 
```

# performance - 文件系统通过大量小文件寻求性能

> ID：432603
> 
> 赞同：3
> 
> 时间：2009-01-11T08:50:43.417
> 
> 标签：performance, filesystems, scalability, freebsd

我正在寻找一个包含大量由 XML API 提供的小文件的服务器。它不会对目录或顺序文件块进行大量迭代——我们正在谈论大量寻找不连续数据的过程。

对于单个文件的请求，BSD UFS 上的寻道时间会随着时间的推移而降低吗？我知道文件系统的 inode 限制基于分区/片的大小，但硬盘驱动器必须为每个文件请求单步遍历 inode 表，然后才能发现数据的位置。什么文件系统在寻道时间方面产生最佳性能？

另一种方法是设置 2-4GB 的“blob”文件，并有一个单独的系统从软件中寻找其中包含的文件。该软件的“inode 表”可以根据当前登录的用户等进行优化交付……这些“inode 表”可能会缓存在 RAM 中，并且只与当前登录的用户相关，从而减少资源浪费.

这两种解决方案在可扩展性和维护方面的评价如何？通过使用第二种解决方案，我可以期待什么样的性能提升（如果有的话）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T21:02:21.770

最明显且经过时间验证的缓解技术是对目录（和路径名搜索策略）使用良好的分层设计，并拥有更多的目录，每个目录中的文件更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-23T07:15:13.200

对于最近带有[dirhash](http://www.maths.tcd.ie/report_series/tcdmath/tcdm0206.ps)和 softupdates 的 FreeBSD 版本，我发现每个目录有几万个文件没有问题。您可能不想超过 500.000 个文件。例如，删除包含 2.500.000 个文件的目录花了我三天时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T09:30:30.247

我不确定我是否正确理解了您的问题，但是如果您想查找大量文件，为什么不使用 RAID0 或 VFS 文件系统上的分区 mysql 表呢？

编辑：据我所知，一个文件夹中的大量文件会降低**任何**FS 速度，因为它必须维护更大的文件、权限和名称列表，数据库旨在将数据列表保存在内存中并以非常优化的方式查找通过它的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T09:58:40.050

您的情况的更多详细信息会有所帮助，这些文件是否存在或者它们是否由您的应用程序创建？如果您需要一种在没有关系数据库结构的情况下存储任意数据的方法，您是否查看过[对象数据库](http://en.wikipedia.org/wiki/ODBMS)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-11T21:00:00.310

如果您的对象应该或可以通过 HTTP 访问，另一种选择是在小型 Web 服务器前使用[清漆](http://varnish.projects.linpro.no/)缓存。最初对象将存储在磁盘上，但 varnish 会在第一次访问给定对象后从内存中存储和提供对象。

# c# - System.Net 在 C# 中的 Webclient 不会连接到服务器

> ID：432610
> 
> 赞同：3
> 
> 时间：2009-01-11T08:55:38.743
> 
> 标签：c#, exception, webclient, system.net

为了让 System.Net 与 Microsoft Visual C# 2008 Express Edition 一起工作，我需要做些什么吗？我似乎根本无法让任何 Web 类型的控件或类工作.. 下面的 WebClient 示例总是抛出异常“**无法连接到远程服务器**”..因此我无法加载 WebBrowser 控件一页。

这是代码（已编辑）：

```
using System;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Net;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            using (WebClient client = new WebClient()) {
                string s = client.DownloadString("http://www.google.com");
                this.textBox1.Text = s;
            }
        }
    }
} 
```

这是一个简单的形式，其中只有一个文本框控件（多行设置为 true）。异常被抛出`DownloadString(...)`在线。我也尝试使用`WebRequest`.. 同样的例外！

编辑：

我连接到直接连接到我的电缆调制解调器的 Linksys WRT54G 路由器。我不在代理服务器后面，尽管我确实运行`proxycfg -u`了并且得到了：

```
Updated proxy settings
Current WinHTTP proxy settings under:
  HKEY_LOCAL_MACHINE\
    SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings\Connections\
      WinHttpSettings :

 Direct access (no proxy server). 
```

我使用的是 Windows XP 并且没有运行任何类型的防火墙。目前只有AVG。我很确定我不应该转发任何端口或任何东西，但我确实尝试将端口 80 转发到路由器上的工作站。没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T09:06:23.073

（**更新**-我的意思是`proxycfg`，不是`httpcfg`；`proxycfg -u`将进行导入）

首先，这里的“快递”没有什么特别之处。其次，contoso 是一个虚拟 url。

你在什么操作系统上？你会通过代理服务器吗？如果是这样，您可能需要配置操作系统的 http 堆栈 -`proxycfg`将在 XP 上完成这项工作，并可用于导入用户的 IE 设置。

该示例很好，尽管它不能正确处理多个`IDisposable`对象-以下要简单得多：

```
 using (WebClient client = new WebClient()) {
            string s = client.DownloadString("http://www.google.com");
            // do something with s
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-16T19:37:58.143

您的 PC 上是否有任何可能影响它的防火墙软件？您是否尝试过 Google 以外的其他网站？

# ios - iphone开发资源

> ID：432634
> 
> 赞同：0
> 
> 时间：2009-01-11T09:11:03.843
> 
> 标签：ios

我已经开始使用 iPhone SDK。什么是入门的最佳资源？（书籍、教程、博客？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T09:46:55.707

您可以在 StackOverflow 上找到类似问题的答案：

[iPhone 开发的 Howto 文章，Objective C](https://stackoverflow.com/questions/1939/howto-articles-for-iphone-development-objective-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T09:32:49.883

使用苹果 iPhone 开发者网站： http: [//developer.apple.com/iphone/](http://developer.apple.com/iphone/)
另一个链接：[http ://www.iphonedevcentral.org/](http://www.iphonedevcentral.org/)

# python - SICP与python的材料？

> ID：432637
> 
> 赞同：6
> 
> 时间：2009-01-11T09:13:48.410
> 
> 标签：python, sicp

我想用 Python 试试 SICP。

**任何人都可以指出在python**中教授计算机程序的结构和解释的材料（video.article...）。

目前正在学习 Abelson、Sussman 和 Sussman 的 SICP 视频。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2011-12-10T09:24:50.200

我认为这对你来说很棒，伯克利的 Python 中的[CS61A SICP](http://www-inst.eecs.berkeley.edu/~cs61a/fa11/61a-python/content/www/index.html)

[Github 上的 sicp-python](https://github.com/dongchongyubing/sicp-python)代码

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-01-11T11:24:17.053

在 Python 中直接翻译 SICP 是没有意义的——Scheme 和 Python 差别太大了。但是Python中有几本类似的书。首先想到的是“像计算机科学家一样思考”。您可以在此处找到有关可用材料的更多信息：http: [//www.greenteapress.com/thinkpython/thinkCSpy/](http://www.greenteapress.com/thinkpython/thinkCSpy/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-01-11T21:01:50.540

不要以为有一套完整的材料，[这](http://www.codepoetics.com/wiki/index.php?title=Topics:SICP_in_other_languages)是我所知道的最好的。

如果您要自己生成材料，我们中的一些人计划通过 SICP[在](http://hn-sicp.pbwiki.com/). 我知道至少有一个人会使用 Haskell，所以你不会孤军奋战。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-26T13:58:17.940

这就是你需要的 - [http://www-inst.eecs.berkeley.edu/~cs61a/fa11/61a-python/content/www/index.html](http://www-inst.eecs.berkeley.edu/~cs61a/fa11/61a-python/content/www/index.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-02T08:33:12.717

老问题，但认为这可能对某人有用。

[http://composingprograms.com/](http://composingprograms.com/)

> 在 SICP 的传统中，本书侧重于抽象方法、编程范式和管理大型程序复杂性的技术。这些概念主要使用 Python 3 编程语言进行说明。
> ...
> 撰写程序由 John DeNero 编写和维护。该文本最初作为加州大学伯克利分校 CS 61A 的讲义发布，基于 Harold Abelson 和 Gerald Jay Sussman 的计算机程序结构和解释。

# visual-studio - 为什么当我在 access 中打开文件时，access 数据库中的记录会被删除？

> ID：432638
> 
> 赞同：0
> 
> 时间：2009-01-11T09:18:22.660
> 
> 标签：visual-studio, ms-access

我正在使用访问后端在 Visual Studio（C# for Windows）中开发一个简单的数据库应用程序。

这一切都很好，直到我尝试从访问权限中打开数据库文件，当所有记录都被删除时。

谁能解释这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T18:14:42.357

您是否将数据库添加到您的解决方案中？选择它并检查“属性”窗口中的“复制本地”（也称为“复制到输出目录”）设置。确保它没有设置为始终复制，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T12:25:56.010

我们需要更多信息。您说当您从访问权限中打开数据库时，“所有记录都会被删除”。问题的表述方式暗示某些进程正在作为打开数据库的一部分运行，例如自动执行宏。你真的知道这是怎么回事吗？或者你真的只是说“当我从访问中打开数据库文件时，***记录不存在***”。如果是后者，那么某些事情正在发生，就像 cletus 所暗示的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-17T21:42:28.840

这是一个老问题，我不知道原始海报是否还在，但在我最初阅读问题时我没有想到的是，也许 C# 应用程序正在使用事务来插入数据并且没有承诺。如果是这种情况，数据将在 C# 应用程序中可见，并且在您在 Access 中打开文件时将不存在。另一方面，数据也不会出现在 C# 应用程序的新会话中，因此这可能不是问题。

# time-management - 需要时间管理解决方案

> ID：432649
> 
> 赞同：0
> 
> 时间：2009-01-11T09:35:44.557
> 
> 标签：time-management

我正在寻找一个在后台运行并整理有关正在运行的应用程序的简单信息的 pc 应用程序。希望包括打开的项目（其中visual studio在窗口标题中包含项目的标题）。
此外，如果它可以包括有用的不活动期。

它旨在帮助我填写可怕的时间表！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-11T09:39:33.130

听起来就像[TimeSnapper](http://www.timesnapper.com/)设计的确切情况。

从网站：

> 它是什么？
> 
> TimeSnapper 是一个自动截图日志
> 
> 它在您的计算机后台运行，整个星期每隔几秒钟就对您的桌面进行一次屏幕截图。

注意：我与这些人没有联系，甚至作为客户也没有。好吧，我确实阅读了博客。:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-30T03:48:21.027

查看[救援时间](http://rescuetime.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T11:08:00.817

我更喜欢[Slife](http://www.slifelabs.com/)，它为我提供了足够的信息来制作时间表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T11:27:47.670

试用[ProcrastiTracker](http://procrastitracker.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-11T09:52:33.823

试试[http://ptm.sourceforge.net/](http://ptm.sourceforge.net/)它跟踪每个应用程序花费了多少时间，但不跟踪窗口标题。您还可以创建自己的任务。它会每隔 10 分钟到一个小时提示您一次，看看您是否仍在处理相同的任务，如果您不单击仍在继续的按钮，它将进入空闲状态。

# javascript - Lazyweb：需要基于元素的访问类删除 li 元素的 javascript

> ID：432653
> 
> 赞同：0
> 
> 时间：2009-01-11T09:38:59.577
> 
> 标签：javascript, css, greasemonkey

我有这个页面有很多我不需要的数据，因为我已经点击了它，但它经常重复，所以我必须在视觉上寻找蓝色。我意识到这可能更有效，并问一个 CSS 朋友我是否可以根据是否访问过包含链接将元素设置为隐藏。显然你需要js。

导致 li.result 元素被移除（或可见性：无）的树：

```
li.result
 div.avatar
  a 
```

我正在尝试通过谷歌搜索来弄清楚如何做到这一点，并在 Expert Sex Change 上得到了一些没有太大帮助的东西。你会怎么做？

**这是给 Greasemonkey 的，所以涉及向页面添加代码和检查 cookie 的提示是无用的**。我很抱歉没有让这个更清楚，而不是之前只标记 postgreasemonkey。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T10:14:52.593

1.您可以使用 a:visited css 选择器。

```
a:visited{
   display:none;
} 
```

它会隐藏访问过的链接（至少在 Firefox 中）。

2.如果你想删除上面的div和li，你可能需要使用cookie并记住用户点击了哪些链接。

所以 ：

当用户点击一个链接时，将该链接 ID 放入 cookie 中。然后，对于 cookie 中的每个链接 ID，您可以使用[jQuery](http://jquery.com)执行以下操作：

```
var ids = $.cookie("cookie_with_ids");
var split_ids = ids.split(','); // split by comma

for(var i= 0; i<split_ids.length; i++){
    $("link_"+split_ids[i]).parent().parent().hide();
} 
```

html 应该类似于：

```
<li class="result">
 <div class="avatar">
  <a href="#" id="unique_link_id_on_this_page"> .... 
```

这没有通过任何方式进行测试，但它应该让你对你必须做什么有一个想法。

对于 cookie 处理，您可以使用[jquery cookie 插件](http://www.stilbuero.de/2006/09/17/cookie-plugin-for-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T22:36:43.420

请注意，我以前没有使用过 Greasemonkey，而且我的 JS 知识充其量只是简单化。

您不能向现有`<style>`标签或`<head>`使用 JavaScript 添加样式声明吗？

例如，添加一条将不同颜色应用于不同链接的规则：

```
li.result div.avatar a {
    color: #000;
}

li.result div.avatar a:visited {
    color: #111;
} 
```

然后遍历所有`li`分类的元素`result`，检查其中`a`包含的颜色是否为`#000`or `#111`。在我看来，这将创建一个基本的 :visited 检查器。我现在将不得不对其进行测试（如果只是为了学习一些东西）但是这种事情可行吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-13T02:56:07.843

这是一个朋友为我准备的，效果很好。主要发布以防其他人最终发现它有用。

```
// ==UserScript==
// @name           Twitter Search Seen
// @namespace      http://ctho.org
// @description    Hides tweets you've seen
// @include        http://search.twitter.com/*
// ==/UserScript==

for each (var i in document.links) {
    if (i.parentNode.className == "msg" && i == i.parentNode.childNodes[1]) {
//alert(getComputedStyle(i, null).color);break;
        if (getComputedStyle(i, null).color == "rgb(147, 13, 133)") {
            i.parentNode.parentNode.style.display="none";       
        } 
    }
} 
```

哈克什，是的，理论上您也可以使用时尚的方式将访问的链接设置为已知颜色。

# asp.net - 简单的jQuery任务失败：隐藏子元素 标签

> ID：432658
> 
> 赞同：0
> 
> 时间：2009-01-11T09:43:27.460
> 
> 标签：asp.net, jquery, listview, html

对此必须有一个简单的解释。

我有一个父`<div>`标签，其中包含许多需要隐藏的子 div，具体取决于它们的类。问题是，我什至无法处理我的父 div。这到底是什么问题？我要离开我的葫芦了。

jQuery 代码（片段）如下所示：

```
$(function() {
    $('#dasummary').children().hide(); 
```

违规`<div>`部分及其所有内容如下：

```
<asp:ListView ID="lvLedger" runat="server" DataSourceID="ldsLedger">
    <LayoutTemplate>
        <h2>Current Day Activity Summary</h2>
        <div id="#dasummary">
            <div id="itemPlaceholder" runat="server" />
        </div>
    </LayoutTemplate>
    <ItemTemplate>
        <div id="toggleRow" runat="server" class="group">
            <asp:Image ID="imgToggle" runat="server" 
                ImageUrl="~/App_Themes/SunDIAL/images/maximize.png"
                ImageAlign="Left" />
            <%# Eval("Key") %> (<%# Eval("Count") %> entries)
        </div>

        <!-- Add nested ListView control for individual items here -->
        <asp:ListView ID="lvItems" runat="server" DataSource='<%# Eval("Tasks") %>'>
            <LayoutTemplate>
                <div class="activity_summary">
                    <table>
                        <thead>
                            <tr>
                                <th class="first" />
                                <th>Day</th>
                                <th>Job</th>
                                <th>Batch</th>
                                <th>Duration</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr id="itemPlaceholder" runat="server" />
                        </tbody>
                    </table>
                </div>
            </LayoutTemplate>
            <ItemTemplate>
                <tr id="item" runat="server" class="itemRow">
                    <td class="first" />
                    <td>
                        <h4>
                            <a><%# Eval("Day") %></a>
                        </h4> 
                    </td>
                    <td><%# Eval("Project") %></td>
                    <td><%# Eval("Name")%></td>
                    <td><%# Eval("Hours") %>:<%# Eval("Minutes","{0:00}") %></td>
                </tr>
            </ItemTemplate>
        </asp:ListView>

    </ItemTemplate>
</asp:ListView> 
```

渲染的 HTML 看起来（据我所知）很好。如果你想要整件事，请告诉我；这是重要的一点：

```
<div id="#dasummary">

        <div id="ctl00_ContentPlaceHolder1_dashboardFrame_ctl00_ActiveDayLedger1_lvLedger_ctrl0_toggleRow" class="group">
            <img id="ctl00_ContentPlaceHolder1_dashboardFrame_ctl00_ActiveDayLedger1_lvLedger_ctrl0_imgToggle" src="App_Themes/SunDIAL/images/maximize.png" align="left" style="border-width:0px;" />
            Wednesday (2 entries)
        </div>

        <!-- Add nested ListView control for individual items here -->

                <div class="activity_summary"> 
```

我在如此简单的操作中失败一定是有原因的。你能发现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T09:47:26.500

你的 div 的 id 是错误的。在 html 中它必须是`dasummary`，不是`#dasummary`，所以你可以通过 jQuery 来获取它`$("#dasummary")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T10:11:37.420

jQuery 选择器中的“#”表示 jQuery 应该按 id 选择元素。因此，在您的情况下，有两种方法：

1.  使用不带“#”的 id
2.  将 jQuery 查询更改为“##dasummary”之类的东西。它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T10:13:16.993

没错，你应该有

```
<div id="dasummary"> 
```

此外，可能需要使用 each 函数：

```
$("div", "#dasummary").each(function() {
   $(this).hide();
}); 
```

# expect - 如何在我自己的机器（win xp）上的程序中调用可执行文件以在单独的机器上运行？

> ID：432670
> 
> 赞同：0
> 
> 时间：2009-01-11T09:56:47.293
> 
> 标签：expect, multiple-languages, grid-computing

我的目标是编写一个程序，该程序将调用另一台计算机上的另一个可执行文件（全部使用 win xp），其参数在运行时确定，然后在多台计算机上重复，然后收集结果。简而言之，我正在从事一个网格计算项目。正在使用的算法本身已经在 FORTRAN 中编码，但我们正在寻找一种有效的方法来一次在多台计算机上运行它。

我想实现这一点的一种方法是将脚本上传到每台计算机，然后在每台计算机上运行所述脚本，所有这些都自动并取决于我自己的参数。但是我怎样才能编写一个程序来在另一台计算机上写入、上传和运行脚本呢？

我曾考虑过 GridGain，但该算法已经被编码并且使用了不同的语言，因此被排除在外。

我目前完成这项任务的猜测是使用 Expect ( [wiki/Expect](http://en.wikipedia.org/wiki/Expect) )，但我对该工具一无所知。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T10:01:42.570

您可以为此使用 PsExec：

[http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

您还可以查看开源替代品 RemCom：

[http://rce.sourceforge.net/](http://rce.sourceforge.net/)

编写自己的代码实际上也很简单，但如果你愿意，RCE 会告诉你如何去做。虽然，使用 PsExec 可能足以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-25T21:38:21.200

查看[PVM](http://www.csm.ornl.gov/pvm/pvm_home.html)，它是针对您所描述的情况类型制作的，但您可能必须注释现有代码库和/或实现包装应用程序。

# c# - 对数组执行浅拷贝以调整其大小有什么影响？

> ID：432672
> 
> 赞同：2
> 
> 时间：2009-01-11T09:59:52.903
> 
> 标签：c#, deep-copy, shallow-copy

如果我对深浅复制的理解是正确的，那么我的问题是不可能的。如果你有一个数组（a[10]）并执行一个浅拷贝（b[20]），这不是不可能的，因为 b 中的数据不是连续的吗？

如果我完全错了，有人可以建议一种快速的方法来模仿（在 c# 中）c++ 执行 realloc 以调整数组大小的能力。

**注意**
我正在查看 System.Array 对象的 .Clone() 和 .Copy() 成员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T10:08:17.223

您无法调整现有数组的大小，但是，您可以使用：

```
Array.Resize(ref arr, newSize); 
```

这会分配一个新数组，将旧数组中的数据复制到新数组中，然后更新`arr`变量（在这种情况下是通过-ref 传递的）。你是这个意思吗？

但是，仍然指向旧数组的任何*其他*引用都不会更新。更好的选择可能是使用`List<T>`- 然后您不需要手动调整它的大小，并且您不会遇到过时引用的问题。你只是`Add`/`Remove`等等。一般来说，你不会经常直接使用数组。它们有其用途，但它们不是默认情况。

* * *

重新发表您的意见；

*   拳击：`List<T>`不拳击。这是关于泛型的要点之一；在引擎盖下，`List<T>`是一个包装器`T[]`，所以 a`List<int>`有一个`int[]`- 没有拳击。较旧的`ArrayList`是一个包装器`object[]`，所以盒子也是*如此；*当然，拳击[并不像你想象的那么糟糕](http://msmvps.com/blogs/jon_skeet/archive/2008/10/08/why-boxing-doesn-t-keep-me-awake-at-nights.aspx)。
*   的工作`Array.Resize`；~~如果我记得，它会找到 的大小`T`，然后用于`Buffer.BlockCopy`blit 内容~~，实际细节被内部调用隐藏 - 但本质上在分配一个新数组之后，它是两个数组之间数据的 blit (memcpy)，所以它应该很快；请注意，对于引用类型，这仅复制引用，而不是堆上的对象。但是，如果您定期调整大小，`List<T>`通常会更简单（并且更快，除非您基本上重新实现`List<T>`重新备用容量以最小化调整大小的数量）。

# silverlight - 如何避免打开的 Silverlight ComboBox DropDown 位于所有内容之上

> ID：432688
> 
> 赞同：0
> 
> 时间：2009-01-11T10:12:30.723
> 
> 标签：silverlight

我有一个 ComboBox，我设法在 LostFocus 之后保持它的 DropDown 打开。它填充了许多复选框。每当用户切换这些 CheckBox 之一时，整个应用程序都会通过调用 DataService 进行更新。在此期间，我使用带有等待光标的透明覆盖矩形（在整个 Silverlight 内容之上）阻止进一步的用户输入。

我尝试增加该 Rectangle 的 Canvas.ZIndex 以使其位于所有内容之上。但是我的 ComboBox 的打开 DropDown 总是在它上面。

一个非常简化的例子说明了我的意思：

```
<UserControl x:Class="ComboDropDownTest.Page"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
Width="400" Height="300">
<Grid x:Name="LayoutRoot" Background="White">
<ComboBox Canvas.ZIndex="0" Height="40" VerticalAlignment="Top">
    <ComboBoxItem Content="ComboBoxItem1"/>
    <ComboBoxItem Content="ComboBoxItem2"/>
    <ComboBoxItem Content="ComboBoxItem3"/>
    <ComboBoxItem Content="ComboBoxItem4"/>
</ComboBox>
<Button Canvas.ZIndex="9999" Height="55" Margin="18,66,19,0" VerticalAlignment="Top" Content="Button"/>
</Grid> 
```

当 ComboBox 打开时，DropDown 覆盖 Button 忽略 ZIndex 顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-12T02:49:50.697

发生这种情况的原因是下拉菜单是使用 Popup 生成的（它总是以其本质显示在其他所有内容上）。我能想象改变它的唯一方法是修改 ComboBox 的 ControlTemplate 以更改下拉菜单的容器。我没有测试它，但我敢打赌它是正确的解决方案。

# xsd - 如何在 XML 中反映子类之间的关系

> ID：432699
> 
> 赞同：0
> 
> 时间：2009-01-11T10:20:08.057
> 
> 标签：xsd, entity-relationship

如何在 XML 中定义子类之间的关系，例如一个类研究人员有两个子类 Paper 和 author 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-01-11T13:23:34.020

通常，您将使用 XML 模式来描述 XML 文件中的关系。但是我严重*怀疑*您是否应该建立一个研究人员具有*子类*论文和作者的模型，这似乎更像是研究人员与作者角色中的论文类相关。所有这些都可以在[XML Schema](http://en.wikipedia.org/wiki/Xml_schema)中描述。

# php - 使用 PHP 处理大文件

> ID：432713
> 
> 赞同：13
> 
> 时间：2009-01-11T10:28:09.227
> 
> 标签：php, apache

所以我试图通过 PHP 脚本提供大文件，它们不在网络可访问的目录中，所以这是我能想到的最好的方式来提供对它们的访问。

我能想到的提供此文件的唯一方法是将其加载到内存中（fopen、fread 等），将标头数据设置为正确的 MIME 类型，然后只回显文件的全部内容。

问题是，我必须一次将这些约 700MB 的文件加载到内存中，并将整个文件保存在那里直到下载完成。如果我可以在下载时输入我需要的部分，那就太好了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-01-11T10:41:44.863

您不需要阅读整个内容 - 只需进入一个循环读取它，例如 32Kb 块并将其作为输出发送。更好的是，使用[fpassthru](http://php.net/fpassthru)为您做同样的事情......

```
$name = 'mybigfile.zip';
$fp = fopen($name, 'rb');

// send the right headers
header("Content-Type: application/zip");
header("Content-Length: " . filesize($name));

// dump the file and stop the script
fpassthru($fp);
exit; 
```

*如果你使用[readfile](http://php.net/readfile)*甚至更少的行*，它不需要 fopen 调用......*

 *```
$name = 'mybigfile.zip';

// send the right headers
header("Content-Type: application/zip");
header("Content-Length: " . filesize($name));

// dump the file and stop the script
readfile($name);
exit; 
```

如果您想变得更可爱，您可以支持[Content-Range](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16)标头，它允许客户端请求您文件的特定字节范围。这对于向 Adob​​e Acrobat 提供 PDF 文件特别有用，Adobe Acrobat 只请求呈现当前页面所需的文件块。这有点涉及，但[请参阅此示例](http://www.coneural.org/florian/papers/04_byteserving.php)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-11T11:02:56.053

用 php 发送大文件的最好方法是`X-Sendfile`header。它允许网络服务器通过零拷贝机制（如`sendfile(2)`. 它由带有[插件](http://tn123.ath.cx/mod_xsendfile/)的 lighttpd 和 apache 支持。

例子：

```
$file = "/absolute/path/to/file"; // can be protected by .htaccess
header('X-Sendfile: '.$file);
header('Content-type: application/octet-stream');
header('Content-Disposition: attachment; filename="'.basename($file).'"');
// other headers ...
exit; 
```

服务器读取`X-Sendfile`标头并发送文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-11T11:01:28.067

虽然`fpassthru()`过去一直是我的首选，但 PHP 手册实际上建议使用 * [`readfile()`](http://php.net/readfile)，如果您只是将文件按原样转储到客户端。

`*`“如果您只想将文件的内容转储到输出缓冲区，而不是先修改它或寻找特定的偏移量，您可能需要使用 readfile()，这样可以节省 fopen() 调用。” —<a href="http://fi.php.net/manual/en/function.fpassthru.php" rel="noreferrer">PHP 手册

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-11T12:03:17.333

如果您的文件由于路径不在您的 Web 服务目录 (htdocs) 中而无法被 Web 服务器访问，那么您可以在您的 Web 服务目录中创建指向该文件夹的符号链接 (symlink) 以避免通过 php.ini 传递所有流量。

你可以做这样的事情

```
ln -s /home/files/big_files_folder /home/www/htdocs 
```

使用 php 提供静态文件会慢很多，如果流量大，内存消耗会很大，可能无法处理大量请求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-11T10:44:40.317

看看[fpassthru()](http://php.net/fpassthru)。在较新版本的 PHP 中，这应该在不将它们保存在内存中的情况下为文件提供服务，正如[该注释](http://www.php.net/manual/en/function.fpassthru.php#74373)所述。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-08-23T16:27:03.583

奇怪的是，fpassthru() 和 readfile() 都没有为我做，总是出现内存错误。我求助于使用不带“f”的 passthru()：

```
$name = 'mybigfile.zip';
// send the right headers
header("Content-Type: application/zip");
header("Content-Length: " . filesize($name));
// dump the file and stop the script
passthru('/bin/cat '.$filename);
exit; 
```

这 execs 'cat' Unix 命令并将其输出发送到浏览器。

对苗条的评论：您只是不将符号链接放在某处的原因是网络空间是安全的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-11T11:08:23.420

fpassthru() 的一个好处是这个函数不仅可以处理文件，还可以处理任何有效的句柄。以插座为例。

如果可能的话，readfile() 必须快一点，因为使用 OS 缓存机制（就像 file_get_contents() 一样）。

还有一个提示。fpassthru() 保持句柄打开，直到客户端获取内容（在慢速连接上可能需要相当长的时间），因此如果可以并行写入此文件，则必须使用一些锁定机制。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-11T11:45:35.653

Python 的答案都很好。但是，您是否有任何理由不能创建包含指向实际文件的符号链接的 Web 可访问目录？它可能需要一些额外的服务器配置，但它应该可以工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-10T17:53:03.813

如果你想把它做好，单靠 PHP 是做不到的。您可能希望使用 Nginx 的[X-Accel-Redirect](https://www.nginx.com/resources/wiki/start/topics/examples/x-accel/) *（推荐）*或 Apache 的[X-Sendfile](https://tn123.org/mod_xsendfile/)来提供文件，它们正是为此目的而构建的。

我将在这个答案中包含一些在这篇[文章](https://clubhouse.io/developer-how-to/how-to-use-internal-redirects-in-nginx/)中找到的文字。

### 为什么不使用 PHP 提供文件：

*   天真地完成，文件被读入内存，然后被提供。如果文件很大，这可能会导致服务器内存不足。
*   缓存标头通常设置不正确。这会导致网络浏览器多次重新下载文件，即使它没有更改。
*   通常不会自动支持对 HEAD 请求和范围请求的支持。如果文件很大，则提供此类文件会占用工作进程或线程。如果可用的工人有限，这可能会导致饥饿。增加工作人员的数量可能会导致服务器内存不足。

NGINX 正确处理所有这些事情。因此，让我们在应用程序中处理权限检查，并让 NGINX 为实际文件提供服务。这就是内部重定向的用武之地。这个想法很简单：您可以在提供常规文件时像往常一样配置位置条目。

将此添加到您的 nginx 服务器块：

```
location /protected_files/ {
    internal;
    alias /var/www/my_folder_with_protected_files/;
} 
```

在您的项目中，需要 HTTP Foundation 包：

`composer require symfony/http-foundation`

使用 Nginx 在 PHP 中提供文件：

```
use Symfony\Component\HttpFoundation\BinaryFileResponse;

$real_path = '/var/www/my_folder_with_protected_files/foo.pdf';
$x_accel_redirect_path = '/protected_files/foo.pdf';

BinaryFileResponse::trustXSendfileTypeHeader();
$response = new BinaryFileResponse( $real_path );
$response->headers->set( 'X-Accel-Redirect', $accel_file );
$response->sendHeaders();
exit; 
```

这应该是您入门所需的基础。

这是提供内联 PDF 的更完整示例：

```
use Symfony\Component\HttpFoundation\BinaryFileResponse;
use Symfony\Component\HttpFoundation\File\File;
use Symfony\Component\HttpFoundation\ResponseHeaderBag;

$real_path = '/var/www/my_folder_with_protected_files/foo.pdf';
$x_accel_redirect_path = '/protected_files/foo.pdf';

$file = new File( $file_path );

BinaryFileResponse::trustXSendfileTypeHeader();
$response = new BinaryFileResponse( $file_path );
$response->setImmutable( true );
$response->setPublic();
$response->setAutoEtag();
$response->setAutoLastModified();
$response->headers->set( 'Content-Type', 'application/pdf' );
$response->headers->set( 'Content-Length', $file->getSize() );
$response->headers->set( 'X-Sendfile-Type', 'X-Accel-Redirect' );
$response->headers->set( 'X-Accel-Redirect', $accel_file );
$response->headers->set( 'X-Accel-Expires', 60 * 60 * 24 * 90 ); // 90 days
$response->headers->set( 'X-Accel-Limit-Rate', 10485760 ); // 10mb/s
$response->headers->set( 'X-Accel-Buffering', 'yes' );
$response->setContentDisposition( ResponseHeaderBag::DISPOSITION_INLINE, basename( $file_path ) ); // view in browser. Change to DISPOSITION_ATTACHMENT to download
$response->sendHeaders();
exit; 
```

# api - SugarCRM：已弃用的 SOAP API 调用？

> ID：432715
> 
> 赞同：2
> 
> 时间：2009-01-11T10:30:56.287
> 
> 标签：api, soap, sugarcrm

SugarCRM 的 SOAP API 中可用的大多数 Web 方法现在已被弃用并被 set_entry() 和 get_entry() 取代，这是真的吗？

例如，如果我想创建一个新的潜在客户，我应该使用 create_lead() 还是应该在“Leads”上坚持使用 set_entry()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-01-19T23:06:27.053

不完全是，5.2 版有 SugarCRM SOAP v1 api，5.5 版有 1 版 api 和 2 版 api。

你只需要使用不同的 url 来访问你在 5.5 中想要的 api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T04:04:04.533

这似乎是正确的。我使用 get_module_fields($session_id, 'Contacts') 来获取我正在创建或更新的任何模块的字段。用您正在使用的任何模块替换联系人。

# php - 防止多次执行 JavaScript 函数

> ID：432721
> 
> 赞同：4
> 
> 时间：2009-01-11T10:37:00.237
> 
> 标签：php, javascript, jquery, ajax, execution

我正在使用 JavaScript、jQuery 和 PHP。如何限制 JavaScript 函数执行一次？

我的 MainJQuery 文件有 Ajax。display.php 执行一会：

```
....

$.ajax({
    type:'POST',
    url: 'display.php',
    data:'id='+id  ,
    success: function(data){
        $("#response").html(data);

        //Here Get_list should be execute only once.
        get_list('get');

        // Display should execute as usual
        display();
    }//success
}); //Ajax

....... 
```

get.Php 文件向 JavaScript 写入一个值：

```
<?php
    print "<script language='javascript'>";
    print " g_cost[g_cost.length]=new Array('STA-VES','East',4500);";
    print " g_cost[g_cost.length]=new Array('STA-CRF','West',5400);";
    print "</script>";
?> 
```

我的 JavaScript 函数具有来自 PHP 的以下值：

```
function get_list('get'){
    for(var i=0;i<g_cost.length;i++)
        var temp = g_cost[i];

    var Name = temp[0];
    var direction = temp[1];
    var cost = temp[2];

    ..
    some code
    ...
}

function display(){
    for(var i=0;i<g_cost.length;i++)
        alert(g_cost.length);
    var temp = g_cost[i];
    alert(temp[0]);
    alert(temp[1]);
    alert(temp[2]);
} 
```

是否可以限制在 jQuery Ajax 成功部分执行 JavaScript 函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-01-11T14:26:59.727

在 jQuery 中，您可以使用该`.one()`函数绑定只执行一次的方法。例如，

```
$("#someAnchorId").one("click", function(){
    //Ajax method here 
}); 
```

请参阅[jQuery 一个帮助主题](http://docs.jquery.com/Events/one#typedatafn)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-09-17T13:14:43.047

您可以用空函数替换该函数 - 这与 Rene Saarsoo 的解决方案基本相同，但看起来更好：

```
var get_list = function(param1, param2, ...) {
     // your code here
     get_list = function() {};
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-11T10:48:31.230

三个选项：

1.  在全局范围内设置一个布尔标志，成功运行后设置，运行前检查

2.  成功运行后，禁用按钮（或您用来调用一次性方法的任何控件）

3.  稍微不那么受欢迎，但您也可以在服务器端进行验证，即每次调用该方法，但在服务器端进行验证。好的一面是，这将确保服务器上的数据一致性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-01-11T13:21:52.760

创建一个只执行一次的函数：

```
get_list = (function(){
  var counter = 0;
  return function(param1, param2, ...) {
    if (counter > 0) {
      return;
    }
    counter++;

    // your normal function code here
  };
})(); 
```

这与使用全局变量来跟踪函数执行的次数几乎相同，只是我们创建了一个只有内部函数才能看到的变量而不是全局变量。之后，您将 get_list 用作任何其他功能。

这可能会在函数原型中被重构为更通用的东西，所以它可以像这样使用：

```
get_list = (function (param1, param2, ...) {
  ...
}).once(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-12T14:43:34.937

最快的方法是在成功声明中添加一行：

```
$.ajax({
    type:'POST',
    url: 'display.php',
    data:'id='+id  ,
    success: function(data){
        if(!arguments.callee.stop){ arguments.callee.stop = true; }else{ return; }

        $("#response").html(data);
        //Here Get_list should be execute only once   
        get_list('get');

        // display should execute as usual  
        display();

    }//success
}); //ajax 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-11T10:45:07.040

尝试在成功调用后禁用 Ajax 触发器（链接、按钮等）。

触发器示例：

```
<a id="ajax_trigger" href="#" onclick="yourAjaxCall(); return false;">Get List</a> 
```

...

```
success: function(data){
    $("#response").html(data);
        //Here Get_list should be execute only once
         get_list('get');

        // Some code to disable, or hide #ajax_trigger
        // in other words, make it unclickable or disappear.
        $("#ajax_trigger").css('display': 'none'); // IIRC

        // Display should execute as usual
        display();
}//success 
```

# javascript - 同一个脚本使用两个js文件？

> ID：432729
> 
> 赞同：1
> 
> 时间：2009-01-11T10:44:07.853
> 
> 标签：javascript, external

我承认，我对 javascript 了解不多，主要是从 Javascript.com 和 Dynamic Drive 中“窃取和修改”。
我遇到了一些调用两个 .js 文件的脚本

```
<script type="text/javascript" src="lib/prototype.js">  
</script>
<script type="text/javascript" src="src/aptabs.js">  
</script> 
```

并且想知道为什么，我可以安全地将它们与我的外部 javascript 合并，或者是否存在某种不兼容阻止所有代码共享同一个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T10:50:53.970

将具有不同关注点的代码分开通常是件好事。这两个文件可能来自不同的地方。假设原型已升级，并且您想要新的优点。然后你可以只替换你服务器上的prototype.js文件，而不是编辑你的大文件并对其进行手术。

编辑：浏览器能够单独缓存文件也“更好”。如果您的问题来自于在多个 html 文件中复制该代码块的问题，我建议您从服务器端制作一个片段，并通过您手头/感觉舒适的任何方式将其包含在您的 html 文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T10:59:37.963

我很确定javascript不知道它是从哪个文件加载的，所以合并它应该没有*问题*，但是......

就个人而言，我会将它们分开。这将使协调版本控制等变得更简单。对于大多数重复访问，脚本无论如何都会被浏览器缓存，因此 2 vs 1 并不是一个真正的大问题。但是当你升级一个（或另一个）时，客户端只需要下载一半。但同样，由于它通常被缓存，所以它不是什么大问题！

因此，为简单起见 - 将脚本保留为原始形式。鉴于您的开场评论“我对 javascript 不太了解”，这是迄今为止最好的方法；我的意思不是贬低——只是说如果出现问题，你不想发现它是不是你坏了，或者它已经坏了。

编辑：它还使重新排序变得容易，例如，如果您使用两个脚本，它们使用与`$`jQuery 相同的术语，它也支持具有显式命名的模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T12:13:45.300

将它们放在同一个文件中实际上是更好的性能明智的 - 取决于您的网站的架构方式。原则是减少http请求的数量，因为每个请求都会带来一些开销。

也就是说，最好将其留到生产的最后。在开发过程中，将所有内容分开会更容易。如果您要加入他们，最好有一个自动构建脚本来执行操作。

# web-applications - 如何最大化服务器性能？

> ID：432739
> 
> 赞同：5
> 
> 时间：2009-01-11T10:51:51.753
> 
> 标签：web-applications, performance, sysadmin

我一直在努力了解性能和可扩展性，并想知道开发人员/系统管理员正在做什么来充实他们的系统。为了使答案标准化，如果您能尽力回答以下任何问题，这将有所帮助：

1.  **简介**- 在 Joomla 上发表的杂志；CodeIgniter + OpenId + AJAX 上的工作板
    *   **性能-****每台服务器**每秒的最大请求数？
    *   **硬件**——服务器、路由器、磁盘、局域网？
    *   **软件**- Lighttpd、Memcache、Varnish、Nginx、Squid、Pound、LVS、eAccelerator 等。
    *   **服务**- Amazon S3、Akamai、Google 计算等。
    *   **配置**- 静态散列、上游模块、Memcache 在 n 个请求后 x 分钟、禁用记录图像请求等。
    *   **其他**——还有别的吗？（例如，规范化的表格不适合有大量读取的网站）

编辑：请在结束这个问题之前重新考虑，[因为](https://stackoverflow.com/search?q=memcache) [对于](https://stackoverflow.com/search?q=nginx)网络开发人员来说，寻找这些东西[很](https://stackoverflow.com/search?q=varnish) [重要。](https://stackoverflow.com/search?q=centos)程序员可以从他/她的代码中调整分号，但仍然会输给为 memcached 编写糟糕的编码器或设法通过 Google App Engine组合一个[CDN 。](http://24ways.org/2008/using-google-app-engine-as-your-own-cdn)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-12T14:14:01.080

**没有具体的性能优化总体计划（例如首先从软件“xyz”开始）。**

一般的做法：

1.  通过改进/投入时间确定（衡量！）您最可改进的实体
2.  优化它
3.  重复

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T13:18:18.370

我们的系统：我不能告诉你太多，但它是一个服务于许多付费客户的大型 SaaS 应用程序。

* * *

我们所做的每一项性能/容量工作都非常仔细地完成——我们不能只是尝试看看它们是否有效。

最初会对当前的性能和容量进行一些分析，我们是否可以继续工作。

如果可能的话，我们会在非生产系统上重现性能问题，我们可以在其中分析代码并进行实验性更改。我们不能总是使用与生产完全相同的硬件（生产有大量非常高规格的服务器；开发只有少数生产规格的专用性能测试箱）。

如果在非生产环境中无法对问题进行有意义的分析，我们会在生产环境中为我们的代码提供一些检测（经过仔细测试以确保检测不会影响系统本身）。该仪器将被“关闭”并有选择地打开以收集足够的数据。

一旦我们对问题进行了准确的分析，我们就会考虑可能的解决方案，并且可能会开发原型——这些可以测试功能的正确性。

如果有几个，我们通常会选择风险最小的选择。

然后将遵循正常的发布过程——大量的测试、代码审查等。

如果相关，更改可能会附带一个“恢复开关”，如果出现问题，它可以在生产中快速关闭。

我们已经确定了许多潜在的性能改进，其中大部分在出现问题之前我们不会进一步开发（除非我们无论如何都要对该软件进行不相关的重构）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T11:05:34.813

我没有时间逐条回答你的问题。=) 但是我可以推荐一种分离关注点的一般策略，而不是在没有立即需要时耦合服务器资源。mod_proxy（和任何等价物）是你的朋友。它使硬件出现的性能问题变得容易。当然，您不必从一开始就完美地考虑系统因素（因为很难预测真正的瓶颈会出现在哪里）。但是当你遇到问题时。记住你的朋友。

# c# - 如何在解密数据之前检查密码

> ID：432753
> 
> 赞同：2
> 
> 时间：2009-01-11T11:06:26.997
> 
> 标签：c#, .net, security, encryption

我正在创建一个需要以加密形式存储用户数据的程序。用户在加密前输入密码，并且需要再次提供密码才能检索数据。如果有很多数据，解密需要一段时间。

现在，我想在解密之前检查用户是否输入了正确的密码。这个检查需要快速，解密过程不是。

在实际完成解密过程之前如何检查密码？我曾考虑将密码的哈希值存储为加密文件的前几个字节——这将足够简单和快速——但我不确定它是否会损害安全性？

我正在使用 .NET 和内置的密码学类。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-01-11T11:11:18.873

好吧，加密哈希不应该损害安全性，只要它是加盐的并且具有合理的复杂性；不过，就个人而言，我可能会尝试设置它，以便在早期就可以明显看出数据损坏（由于密码错误）......

是否有可能定期在数据中注入校验和？或者如果流表示记录，您可以使用迭代器（`IEnumerable<T>`等）读取它，以便它延迟读取并提前中断吗？

（**编辑**）另外——在它判断密码是否正确之前强制它解密一个重要的数据块（但不是整个流）应该足以让它难以暴力破解。如果它只需要处理前 128 个字节（或其他），那么它可能足够快，值得一试（字典等）。但是对于常规使用（一次尝试，密码正确或错误），它应该不会影响性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T11:29:11.693

我想您正在使用密码作为加密/解密过程的盐。最简单的方法是加密一些标准短语，或者可能是用户提供的密码作为输入字符串，密码与加密过程中的盐相同。当用户想要解密数据时，将该密码作为解密过程的盐，并使用 ot 来解密加密的密码。如果您找回密码，则用户提供了正确的密码，您可以继续解密过程，否则通知用户他的密码不正确。

该过程将是：

*   用户提供密码和数据进行加密。
*   您使用 PASSWORD 作为盐来加密 PASSWORD。并将其存储为 ENCRYPTED_PASSWORD。
*   使用 PASSWORD 加密 DATA 并存储它。

用户回来给你密码。

*   您使用 PASSWORD 作为盐解密 ENCRYPTED_PASSWORD。
*   如果结果等于 PASSWORD，则解密 DATA，否则通知用户。

# android - fill_parent 和 wrap_content 有什么区别？

> ID：432763
> 
> 赞同：291
> 
> 时间：2009-01-11T11:14:06.513
> 
> 标签：android, layout, user-interface

在 Android 中，当布局小部件时，`fill_parent`（`match_parent`在 API 级别 8 及更高版本中）和之间有什么区别`wrap_content`？

有没有可以指向的文档？我有兴趣很好地理解它。

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2009-01-11T14:51:06.887

任一属性都可以应用于 View 的（视觉控制）水平或垂直尺寸。它用于根据其内容或其父布局的大小设置视图或布局大小，而不是显式指定维度。

**`fill_parent`**`MATCH_PARENT`（在 API 级别 8 及更高版本中已弃用并重命名）

将小部件的布局设置为 fill_parent 将强制它展开以占用其所在布局元素中可用的空间。这大致相当于将 Windows 窗体控件的 dockstyle 设置为`Fill`.

将顶级布局或控件设置为 fill_parent 将强制它占据整个屏幕。

**`wrap_content`**

将 View 的大小设置为 wrap_content 将强制它仅扩展到足以包含它所包含的值（或子控件）的程度。对于控件——如文本框 (TextView) 或图像 (ImageView)——这将包装正在显示的文本或图像。对于布局元素，它将调整布局大小以适应作为其子元素添加的控件/布局。

这大致相当于将 Windows 窗体控件的`Autosize`属性设置为 True。

**在线文档**

[此处](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)的 Android 代码文档中有一些详细信息。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-06-30T18:01:39.310

**`fill_parent`**(deprecated) **=`match_parent`**
子视图的边框扩展以匹配父视图的边框。

**`wrap_content`**
子视图的边框紧紧地包裹在它自己的内容周围。

这里有一些图像可以使事情更清楚。绿色和红色是`TextViews`。白色是`LinearLayout`透彻的。

![在此处输入图像描述](https://i.stack.imgur.com/9Xhsl.png)

每个`View`（a `TextView`、an `ImageView`、a`Button`等）都需要设置视图的 the`width`和 the `height`。在 xml 布局文件中，可能如下所示：

```
android:layout_width="wrap_content"
android:layout_height="match_parent" 
```

除了将宽度和高度设置为`match_parent`or之外`wrap_content`，您还可以将它们设置为某个绝对值：

```
android:layout_width="100dp"
android:layout_height="200dp" 
```

但是，通常这不是很好，因为它对于不同尺寸的设备没有那么灵活。了解了`wrap_content`and之后`match_parent`，接下来要学习的是`layout_weight`。

# 也可以看看

*   [android:layout_weight 是什么意思？](https://stackoverflow.com/a/29713797/3681880)
*   [视图的填充和边距之间的区别](https://stackoverflow.com/a/25520320/3681880)
*   [重力与 layout_gravity](https://stackoverflow.com/a/26190050/3681880)

# 上述图像的 XML

垂直线性布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="width=wrap height=wrap"
        android:background="#c5e1b0"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="width=match height=wrap"
        android:background="#f6c0c0"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="width=match height=match"
        android:background="#c5e1b0"/>

</LinearLayout> 
```

水平线性布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="horizontal"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="WrapWrap"
        android:background="#c5e1b0"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="WrapMatch"
        android:background="#f6c0c0"/>

    <TextView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="MatchMatch"
        android:background="#c5e1b0"/>

</LinearLayout> 
```

# 笔记

此答案中的解释假设没有[margin 或 padding](https://stackoverflow.com/a/25520320/3681880)。但即使有，基本概念还是一样的。视图边框/间距仅通过边距或填充的值进行调整。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-06-20T06:11:07.883

*   `fill_parent`将使元素的宽度或高度与父元素（即容器）一样大。

*   `wrap_content`将使宽度或高度与包含其中的元素一样大。

[单击此处获取 ANDROID 文档参考](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-01-29T08:53:08.200

**`fill_parent`**：

一个组件被安排布局为`fill_parent`将被强制扩展以填充布局单元成员，尽可能在空间中。这与 Windows 控件的 dockstyle 属性一致。顶部设置的布局或控件`fill_parent`将强制它占据整个屏幕。

**`wrap_content`**

设置视图的大小`wrap_content`将强制视图被扩展以显示所有内容。例如，**TextView 和 ImageView**控件设置为`wrap_content`将显示其整个内部文本和图像。布局元素会根据内容改变大小。设置一个视图的Autosize 属性的大小`wrap_content`大致相当于设置一个Windows 控件为True。

详情请查看此链接：http: [//developer.android.com/reference/android/view/ViewGroup.LayoutParams.html](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)

# media - Voip 服务器的免费流媒体服务器

> ID：432764
> 
> 赞同：1
> 
> 时间：2009-01-11T11:18:59.920
> 
> 标签：media, voip, audio-streaming

我需要一个开源应用程序，它可以按需（RTSP？）流式传输预先录制的文件。它应该支持所有主要的编解码器（G.711、g729...），并且必须相当高效。

到目前为止，我发现只有 VLAN 播放器适合此任务。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T12:15:20.057

好吧，我有一台带有所有主要编解码器的[星号机器。](http://www.asterisk.org/)获取 g729/g723：[asterisk.hosting.lv](http://asterisk.hosting.lv/)。不要忘记，在某些国家/地区，不付费使用 g729/g723 是违法的。

无论如何回到你的问题。在您的 Asterisk 拨号计划中，您可以播放预先录制的文件，例如：

```
exten => _X.,1,Answer()
exten => _X.,n,Playback(/path/to/file)
exten => _X.,n,Hangup() 
```

当我拨打该上下文的电话时，我会听到该文件。这就是你想要做的吗？

也看看[voip-info.org](http://voip-info.org)。那里有很多知识。

编辑：

另请注意，星号有一个 MusicOnHold diaplan 实用程序，您可以使用它来传输 FM 广播流。你可能想看看我去年[写的一篇博文。](http://blog.mserver.nl/2008/07/09/asterisk-playing-audio-streams/)所以从某种意义上说，你可以让 VLAN 播放器或其他东西充当流媒体服务器，并使用星号对其进行 VoIP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T08:17:26.307

mediastremer2 sdk 对我来说已经足够好了。

但是 live555 媒体服务器作为简单的 RTSP 服务器完成了工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-12T06:40:51.663

您可以尝试 SIPp。3.4 版以后支持 PCMA、PCMU 和 G729 的 RTP 流。您也可以在源代码中启用 G723 编解码器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-12T16:52:59.900

我们已经使用[rtpplay](http://www.cs.columbia.edu/irt/software/rtptools/)将音频文件发送到指定的 ip/port。这至少是一个很好的起点

# css - CSS修复重复背景问题

> ID：432784
> 
> 赞同：2
> 
> 时间：2009-01-11T11:43:46.423
> 
> 标签：css, background

我正在设计一个具有固定重复背景的网站，但无法弄清楚为什么它有一个问题。

如果您在小窗口中加载站点，然后向右滚动，则背景不会继续，而是显示背景颜色。

有任何想法吗？

网站是： http: [//new.focalpix.co.uk/](http://new.focalpix.co.uk/)

背景的CSS是：

```
body {
    background: url(http://media.focalpix.co.uk/img/gradbackground.png) repeat-x fixed;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T12:17:47.103

试试下面的 CSS：

```
body, html {
    color:#fff;
background: #000 url(http://media.focalpix.co.uk/img/gradbackground.png) fixed repeat-x;
    text-align:center;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-family: "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", "DejaVu Sans", "Bitstream Vera Sans", "Liberation Sans", Verdana, "Verdana Ref", sans serif;
}

body {
    font-size: 70%;
} 
```

看起来（在 Opera 和 Chrome 中）浏览器将浏览器初始视口之外的区域视为 HTML 标记的一部分，而不是 BODY 的一部分。您可以通过将背景图像放在 HTML 而不是 BODY 标记上来验证这一点 - 然后查看它如何仅出现在文档的滚动查看区域中。我不知道为什么会这样——有人吗？

不过，上面的 CSS 似乎可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T12:01:38.943

您已经在 style.css 第 13 行定义了 body background: url，但还在第 17 行开始的规则中定义了 body background 的规则。

第 17 行的规则适用于 body、html，但从第 11 行开始的规则仅适用于 body。您可能可以将这些浓缩为一个规则，准确定义您想要的背景——颜色或来自 url 的图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T12:20:47.750

这是因为`<body>`标签默认设置为浏览器窗口宽度的 100%，而不是网站。这意味着当窗口的宽度小于 960 像素（您的站点的宽度）时，主体块结束。要解决此问题，只需设置：

```
body {min-width: 960px} 
```

[不幸的是，如果没有名为minmax](http://www.doxdesk.com/software/js/minmax.html)的 JavaScript hack，min-width 在旧版本的 Internet Explorer 中不起作用。我建议将它的 javascript 嵌入代码包含在一些条件注释中，以防止在新浏览器中出现不必要的 HTTP 请求和潜在的兼容性错误。所以像这样嵌入 minmax ：

```
<!--[if lte IE 7]>
<script type="text/javascript" src="minmax.js"></script>  
<![endif]--> 
```

此外，一般提示 - 这些问题很容易通过玩[firebug](http://getfirebug.com/)来解决。

# python - 如何通过 __dict__ 分配新的类属性？

> ID：432786
> 
> 赞同：49
> 
> 时间：2009-01-11T11:44:17.717
> 
> 标签：python, oop, class, attributes

我想通过字符串对象分配一个类属性 - 但是如何？

例子：

```
class test(object):
  pass

a = test()
test.value = 5
a.value
# -> 5
test.__dict__['value']
# -> 5

# BUT:
attr_name = 'next_value'

test.__dict__[attr_name] = 10
# -> 'dictproxy' object does not support item assignment 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-01-11T11:47:26.820

为此有一个内置函数：

```
setattr(test, attr_name, 10) 
```

参考：[http ://docs.python.org/library/functions.html#setattr](http://docs.python.org/library/functions.html#setattr)

例子：

```
>>> class a(object): pass
>>> a.__dict__['wut'] = 4
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'dictproxy' object does not support item assignment
>>> setattr(a, 'wut', 7)
>>> a.wut
7 
```

# iphone - iPhone - 设备方向更改时 UIViewController 不旋转

> ID：432793
> 
> 赞同：14
> 
> 时间：2009-01-11T11:51:50.103
> 
> 标签：iphone, cocoa-touch

我有我自己的自定义 UIViewController，它包含一个 UIScrollView 和一个 UIImageView 作为它的子视图。我想让图像在设备方向改变时自动旋转，但它似乎不起作用......

在头文件中，我有；

```
@interface MyViewController : UIViewController <UIScrollViewDelegate> {
    IBOutlet UIScrollView   *containerView;
    UIImageView *imageView;
} 
```

这些组件在 loadView 函数中初始化，如下所示；

```
 containerView = [[UIScrollView alloc] initWithFrame:frame];

    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://..."]];
    UIImage *image = [[UIImage alloc] initWithData:data];
    imageView = [[UIImageView alloc] initWithImage:image];
    [image release];

    [containerView addSubview:imageView]; 
```

而且我添加了以下方法，假设这就是使视图自动旋转所需的全部...

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return YES;
} 
```

MyViewController 可以很好地加载我指定从 URL 中获取的图像，并且当我翻转设备时，正在调用 shouldAutorotate... 函数，并使用正确的 UIInterfaceOrientation。

但是，没有调用 didRotateFromInterfaceOrientation 方法，并且图像似乎没有自行旋转......有人可以指出我需要添加什么，或者我在这里做错了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-11-12T03:21:04.700

这可能不是您的正确答案，因为您没有指定 UIViewController 所在的上下文，但我刚刚在 Apple 文档中发现了一个重要的问题，它解释了我遇到的类似问题。

> 标签栏控制器默认支持纵向并且不会旋转到横向，除非所有根视图控制器都支持这样的方向。当设备方向发生变化时，标签栏控制器会查询其视图控制器数组。 **如果其中任何一个不支持方向，则标签栏控制器不会更改其方向。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T16:18:48.567

我注意到在旋转 UIView 时存在问题，该 UIView 不是第一个或唯一的视图作为主窗口的直接子级。

因此，如果您的 UIView 是导航控制器或选项卡视图控制器的一部分，您还需要覆盖导航控制器或选项卡视图控制器上的 shouldAutoRotateToInterfaceOrientation。

另外：`[UIApplication setStatusBarOrientation]`如果/当您需要手动操作时，使用有助于解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T11:58:06.173

为了使这种事情在我的应用程序中工作，我必须重写

```
- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    [self layoutSubviews];
} 
```

还有 layoutSubviews

```
- (void)layoutSubviews
{
    NSLog(@"layoutSubviews called");

    ...recalc rects etc based on the new self.view.bounds...
} 
```

我不确定这是绝对需要的，但它对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-27T19:57:10.813

这在[Apple Technical Q&A QA1688](http://developer.apple.com/library/ios/#qa/qa2010/qa1688.html)中进行了讨论。

**有时，如果您出于某种原因**将多个视图堆叠在一起，另一个控制器可能不会收到旋转事件。

```
[myWindow addSubview:primaryViewController.view];
[myWindow addSubview:anotherController.view]; 
```

解决此问题的一种懒惰方法（不是一个好的设计）是仅在窗口上添加一个子视图，但在应用程序委托上初始化多个控制器。然后当你需要切换窗口时，移除当前视图，添加你想要的视图

```
[self.view removeFromSuperview];
AppDelegate *dg = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[[dg window] addSubview:[[dg viewController] view]]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-12T01:16:25.550

有时，如果您向视图添加子视图，您有责任确保将方法传递给子视图；几天前，我写了一篇关于这个的[短文。](http://davidebenini.it/2009/01/03/viewwillappear-not-being-called-inside-a-uinavigationcontroller/)例如，如果您有一个`UIViewController`并添加一个`UINavigationController`作为子视图，则必须将此代码添加到`UIViewController`如果您想在出现`viewWillAppear:animated:`时被调用`UINavigationController.view`：

```
-(void)viewWillAppear:(BOOL)animated { 
[super viewWillAppear:animated];
[projectNavigationController viewWillAppear:animated];
} 
```

可能是 `willRotateToInterfaceOrientation`and `didRotateFromInterfaceOrientation`方法也需要被superview调用；我不太确定这一点，但试一试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-12-31T13:32:03.963

我从[这个链接复制了这个](http://discussions.apple.com/thread.jspa?messageID=8030653)

它对我有用....我在这里添加它的原因是为了让其他人更容易找到。我花了好几个小时才找到这个修复：

新建一组 UIViewController 类型的类文件，进入该类的 .h 文件并更改这一行

```
@implementation MyTabBarController: UIViewController {}
@end 
```

像这样

```
@implementation MyTabBarController: UITabBarController{

} 
```

现在进入 nib 文件并单击 UITabBarController 对象并转到它的标识选项卡，并将其设为 MyTabBarController 类。

现在在 MyTabBarController.m 中确保它在其中。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)io {
     return YES;
} 
```

如果你愿意，你可能可以摆脱那里的所有其他东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-04-13T07:55:57.353

我刚刚遇到了类似的问题。我有一系列视图控制器/复杂视图，它们都完美旋转，无法弄清楚为什么我刚刚添加的新视图没有旋转。经过大量的试验和错误，原因是我在分配视图控制器时没有调用 init 方法（它是标准的 init 方法）；例如我在做

```
 m_timerViewController = [TimerViewController alloc]; 
```

代替

```
 m_timerViewController = [[TimerViewController alloc] init]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-12-06T21:52:11.827

扩展 jonoogle 的帖子。我有一个类似的错误。我的视图有一个笔尖和我的自定义初始化：

```
- (id)initWithCategory:(Category *)category inManagedObjectContext:context{ 
```

不包括对初始化笔尖的调用。

```
self = [super initWithNibName:nil bundle:nil]; 
```

添加那条线使我的视图像预期的那样旋转。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-27T20:33:00.623

如果您要从横向旋转到纵向，请执行此操作！

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

# nhibernate - 流畅的 NHibernate 问题

> ID：432809
> 
> 赞同：8
> 
> 时间：2009-01-11T12:12:44.633
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

假设您有两个表，“Users”和“UserRoles”。以下是这两个表的结构（表 - 列）：

用户 - 用户 ID (int)

UserRoles - UserID (int), Role (string)

我想要的是我的域中的“用户”类拥有一个 IList 角色。如何构建我的 Fluent NHibernate 映射来实现这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-11T19:55:58.440

您正在寻找的是一组元素，在标准 hbm 映射中是：

```
<set name="Roles" table="UserRoles">
  <key column="UserID" />
  <element column="Role" />
</set> 
```

对于 Fluent NHibernate，您可以像这样映射：

```
HasMany<string>(x => x.Roles)
  .AsElement("Role"); 
```

您可能还需要使用`WithKeyColumn(string)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-03-29T19:52:46.340

FWIW 这在今天发生了微小的变化。当前映射是

```
HasMany<string>(x => x.Roles)
  .Element("Role"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T12:21:03.837

我相信它会是

```
public User()
  {
    Id(x => x.UserID);
    HasMany<UserRoles>(x => x.UserRoles).AsBag();
  } 
```

您还必须确保映射您的 UserRoles 类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-18T15:58:47.787

这也有效：

```
HasMany<Role>(u => u.Roles)
                .WithTableName("UserRoles")
                .Component(role => role.Map(r => r.Name))
                .AsList(); 
```

您不需要映射角色或用户角色。

确保角色实现`IEquatable < Role > ;.`

# html - 为什么 contentEditable 元素拒绝 Enter 键？

> ID：432814
> 
> 赞同：5
> 
> 时间：2009-01-11T12:16:11.177
> 
> 标签：html, keypress, contenteditable, keydown

我正在使用嵌入 IE 控件来显示内容的应用程序。我将该内容更改为包含一个`<div contentEditable="True">Hello World</div>`元素。这很好用，我可以编辑这个 div 的内容，但是按 Enter 会被拒绝并发出哔声。

当我向该页面添加 textarea 元素时，Enter 键起作用，我可以添加行，但不能在 contentEditable 元素中添加。

当我将事件附加到该元素时，我看到按下 Enter 键会触发 keyDown 事件，但不会触发 keyPress。

任何人都知道可能导致它的原因吗？

谢谢，
刺客

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-05T11:37:01.433

大多数 HTML 元素忽略空格。在任何 DIV 或类似元素中包含 \r 或 \n 将被忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-21T08:23:26.380

我已经在 IE 和 Firefox 中检查过它运行良好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T10:27:02.207

您将 keydown 事件附加到文档的其他地方。

```
document.addEventListener('keydown', handle, false); 
```

删除它或将 keydown 事件添加到可编辑的 stopPropagation。

```
$('#target').keydown(function(e) {
 e.stopPropagation();
}); 
```

# java - Java：您如何设计 Swing 组件？

> ID：432818
> 
> 赞同：2
> 
> 时间：2009-01-11T12:17:55.463
> 
> 标签：java, user-interface, swing

我正在编写我的第一个 Java 项目。

我想知道是否可以设置 Swing 组件的样式（设置背景颜色、删除按钮的边框等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T12:44:52.243

如果它像更改字体、背景、边框等一样简单。默认情况下，Swing 可以完成所有这些。即对于一个 JButton：

```
JButton aButton ...
aButton.setBackground(new Color(...));  
aButton.setForeground(new Color(...));  
aButton.setFont(new Font(...));  
aButton.setBorder(null); 
```

[在JComponent](http://java.sun.com/javase/6/docs/api/javax/swing/JButton.html)中查看大多数这些方法。或者，对于更多特定于组件的方法，在组件的 javadoc 中。

我建议您阅读[The Java Tutorial](http://java.sun.com/docs/books/tutorial/uiswing/index.html)或[JComponent API](http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/JComponent.html)中的一些基础知识，甚至阅读诸如[Filthy Rich Clients](http://filthyrichclients.org/)或[Java HowTo Program](https://rads.stackoverflow.com/amzn/click/com/0132222205)之类的书。

定制的外观和感觉会有点过分。我建议先看看上述解决方案是否不符合您的需求，然后再去做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T12:27:46.520

当然可以进行重要的定制，因为这是不同的外观和感觉选项所做的。

您可以查看[可插入的外观和感觉架构](http://java.sun.com/products/jfc/tsc/articles/sce/index.html)，尽管这对于您想要的东西可能有点过分。

或者，如果您只需要进行微小的调整，您也许可以对现有组件进行子类化并使用/覆盖它们现有的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-13T10:46:40.060

有一些开源项目允许您使用类似 CSS 的格式设置 Swing 组件的样式。

您应该看一下[Java CSS](http://javacss.dev.java.net/)项目。在[这篇博文](http://weblogs.java.net/blog/enicholas/archive/2008/07/introducing_jav.html)中介绍了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T12:33:47.867

对于应用程序范围的更改，创建（或扩展）您自己的[可插拔外观](http://java.sun.com/products/jfc/tsc/articles/sce/index.html)可能是正确的解决方案。对于特殊效果，您还应该看看[画家框架](http://weblogs.java.net/blog/joshy/archive/2006/09/introducing_pai.html)。请注意，它们是 swingx 的一部分，而不是核心 Swing。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-11T12:56:38.273

如果您想对组件进行大量样式设置，那么获得第 3 方外观并使用它可能是您的最佳选择。我个人最喜欢的是[Substance](http://insubstantial.github.io/insubstantial/substance/)，它甚至有一个 API 可以在 Substance 之上创建完全自定义的 LAF。

# php - 将复选框名称和值保存到表中

> ID：432825
> 
> 赞同：1
> 
> 时间：2009-01-11T12:25:16.760
> 
> 标签：php

请我需要帮助我有一个复选框的形式我想将注册用户选择的框的名称和值保存到一个表中，现在我已经将注册用户信息保存在一个表中，保存注册用户的表如何要创建选择以与用户表有关系？？？？

我的注册用户表

```
<?php
$connect=mysql_connect("localhost","root") or die (mysql_error());
mysql_select_db("login") or  die (mysql_error());

$query="CREATE TABLE users(
    userid        int not null  auto_increment primary key,
    username      varchar(20), 
    password      varchar(40),
    usertype      varchar(20),
    firstname     varchar(30),
    lastname      varchar(30),
    street        varchar(50),
    city          varchar(50),
    country       varchar(50),          
    postcode      varchar(10),
    gender        varchar(6),
    dateofbirth   date,
    telnumber     varchar(50),           
    email         varchar(50),
    insertdate    date,
    vals          text,
    comment       text
)"; 

$result=mysql_query($query,$connect) or die('Cannot Create User');

mysql_close();
print " DataBase created well" ;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-11T12:38:16.657

假设您有这样的用户表：

```
**users**
------------------------------
userid  username etc...
1       billy    ...
2       joe      ... 
```

现在你必须像这样创建表：

```
**users_checkboxes**
------------------------------
id  user_id  name              value
1   1        newsletter        1
2   1        send me spam      0
3   2        newsletter        0
4   2        send me spam      0 
```

此信息意味着**billy**选择接收**时事通讯**并且没有**垃圾邮件**，而**joe**不想接收任何东西。

关键是从这里的第一个表中获取**用户 ID**，这称为外键。[您可以在Wikipedia](http://en.wikipedia.org/wiki/Foreign_key)上阅读有关它的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T12:37:01.633

您可能想改写您的问题，以便更容易阅读，这就是我认为您的意思：

> 如何使用复选框的形式更新数据库中的用户数据？

复选框是输入，会像 GET 或 POST 数组中的文本输入一样出现（您更有可能为此使用 POST）。

例如：

```
<form action="update.php" method="post">
    <p><input type="checkbox" name="showDate" /> Show the date on every page.</p>
    <p><input type="submit" value="Update user record" /></p>
</form> 
```

然后在你的 PHP 中，你会使用类似这样的东西：

```
<?php
    // Check form has been submitted         
    if (isset($_POST['showDate'])) {
        // Assuming the user is updating their own profile and their 
        // user id is registered in a session
        $update = 'UPDATE users SET showDate = %d WHERE userid = %d';
        // It's better to use prepared statements for this, see http://php.net/mysqli
        mysql_query(sprintf($update, $_POST['showDate'], $_SESSION['userid']));
    } else {
        // show the form
        echo $form;
    } 
```

希望这是有道理的（并且是您要寻找的）-我不清楚您的问题。

# javascript - 为什么匹配的子字符串在 JavaScript 中返回“未定义”？

> ID：432826
> 
> 赞同：5
> 
> 时间：2009-01-11T12:25:19.427
> 
> 标签：javascript, regex, firefox, firebug

我今天在 JavaScript 中执行一些正则表达式时遇到了一个奇怪的行为（Windows Vista 上的 Firefox 3）。

```
var str = "format_%A";
var format = /(?:^|\s)format_(.*?)(?:\s|$)/.exec(str);

console.log(format);    // ["format_%A", "%A"]
console.log(format[0]); // "format_undefined"
console.log(format[1]); // Undefined 
```

正则表达式没有任何问题。如您所见，它在第一次`console.log`调用中匹配了正确的部分。

Internet Explorer 7 和 Chrome 都按预期运行：`format[1]`返回“%A” *（嗯，Internet Explorer 7 做对了有点出乎意料...）*

这是 Firefox 中的错误，还是我不知道的某些“功能”？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-01-11T12:55:28.507

这是因为 console.log() 像 printf() 一样工作。console.log() 的第一个参数实际上是一个格式字符串，后面可以跟其他参数。%A 是占位符。例如：

```
console.log("My name is %A", "John"); // My name is "John" 
```

有关详细信息，请参阅[console.log() 文档](http://getfirebug.com/console.html)。%A 和任何其他未记录的占位符似乎与 %o 一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T12:35:07.597

似乎`%A`以某种方式翻译成字符串`undefined`。

尝试逃避`%A`部分，我认为这将解决问题。

# c# - IEnumerable 上的 C# 不同 使用自定义 IEqualityComparer

> ID：432829
> 
> 赞同：52
> 
> 时间：2009-01-11T12:26:12.700
> 
> 标签：c#, linq-to-xml, ienumerable, distinct

这就是我想要做的。我正在使用 LINQ to XML 查询一个 XML 文件，它为我提供了一个 IEnumerable `<T`> 对象，其中 T 是我的“村庄”类，其中填充了此查询的结果。有些结果是重复的，所以我想对 IEnumerable 对象执行 Distinct()，如下所示：

```
public IEnumerable<Village> GetAllAlliances()
{
    try
    {
        IEnumerable<Village> alliances =
             from alliance in xmlDoc.Elements("Village")
             where alliance.Element("AllianceName").Value != String.Empty
             orderby alliance.Element("AllianceName").Value
             select new Village
             {
                 AllianceName = alliance.Element("AllianceName").Value
             };

        // TODO: make it work...
        return alliances.Distinct(new AllianceComparer());
    }
    catch (Exception ex)
    {
        throw new Exception("GetAllAlliances", ex);
    }
} 
```

由于默认比较器不适用于 Village 对象，我实现了一个自定义比较器，如 AllianceComparer 类中所示：

```
public class AllianceComparer : IEqualityComparer<Village>
{
    #region IEqualityComparer<Village> Members
    bool IEqualityComparer<Village>.Equals(Village x, Village y)
    {
        // Check whether the compared objects reference the same data.
        if (Object.ReferenceEquals(x, y)) 
            return true;

        // Check whether any of the compared objects is null.
        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null))
            return false;

        return x.AllianceName == y.AllianceName;
    }

    int IEqualityComparer<Village>.GetHashCode(Village obj)
    {
        return obj.GetHashCode();
    }
    #endregion
} 
```

Distinct() 方法不起作用，因为无论有没有它，我都有完全相同数量的结果。另一件事，我不知道这通常是否可行，但我无法进入 AllianceComparer.Equals() 看看可能是什么问题。
我在互联网上找到了这样的例子，但我似乎无法让我的实现工作。

希望这里的人可能会看到这里可能出了什么问题！提前致谢！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2009-01-11T12:32:05.543

问题出在你的`GetHashCode`. 您应该更改它以返回哈希码`AllianceName`。

```
int IEqualityComparer<Village>.GetHashCode(Village obj)
{
    return obj.AllianceName.GetHashCode();
} 
```

问题是，如果`Equals`返回`true`，对象应该具有相同的哈希码，而不同`Village`对象的哈希码相同`AllianceName`。由于`Distinct`通过在内部构建哈希表来工作，因此您最终会得到由于不同的哈希码而根本不匹配的相等对象。

同样，比较两个文件，如果两个文件的hash不一样，根本不需要检查文件本身。他们**会**有所不同。否则，您将继续检查它们是否真的相同。这正是`Distinct`使用的哈希表的行为。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-12-16T20:16:34.350

> `return alliances.Select(v => v.AllianceName).Distinct();`

那将返回一个`IEnumerable<string>`而不是`IEnumerable<Village>`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-11-24T04:04:00.540

或者换行

```
return alliances.Distinct(new AllianceComparer()); 
```

到

```
return alliances.Select(v => v.AllianceName).Distinct(); 
```

# c# - API 函数 AllocConsole 和 AttachConsole(-1) 有什么不同？

> ID：432832
> 
> 赞同：8
> 
> 时间：2009-01-11T12:29:48.827
> 
> 标签：c#, .net, winapi, console

`AllocConsole`您能否解释一下，API 函数和API 函数有什么区别`AttachConsole(-1)`？我的意思是如果`AttachConsole`得到`ATTACH_PARENT_PROCESS(DWORD)-1`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-01-11T16:02:26.617

好吧，根本的区别是：

*   `AllocConsole()`将创建一个新控制台（并附加到它）
*   `AttachConsole( ATTACH_PARENT_PROCESS /* -1 */)`不会创建新的控制台，它将附加到父进程的现有控制台。

在第一种情况下，您将获得一个全新的控制台窗口，在第二种情况下，您使用现有的控制台窗口。

当然，如果您已经连接到控制台（即，您是从 cmd.exe 启动的控制台模式程序），则没有太大区别 - 您将得到任何 API 的错误。

另请注意，仅仅因为您从控制台分离并不意味着分离的控制台会有用 - 例如，如果您是从 cmd 窗口启动的控制台进程，则该窗口基本上会阻塞，直到您的进程结束。

一些可以玩的代码：

```
int main( int argc, char* argv[])
{
    int ch;
    BOOL bResult;

    printf( "default console\n");
    ch = getchar();

    bResult = FreeConsole();
    bResult = AllocConsole();    
    printf( "AllocConsole()\n");
    ch = getchar();

    bResult = FreeConsole();
    bResult = AttachConsole( ATTACH_PARENT_PROCESS);    
    printf( "AttachConsole( ATTACH_PARENT_PROCESS)\n");
    ch = getchar();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-11T12:48:33.123

我不认为有一个函数叫做`CreateConsole`，但是有[`AllocConsole`](http://msdn.microsoft.com/en-us/library/ms681944%28VS.85%29.aspx).

假设这就是您的意思，我认为不同之处在于，如果父进程没有控制台，`AttachConsole(ATTACH_PARENT_PROCESS)`则可以[返回。`ERROR_INVALID_HANDLE`](http://msdn.microsoft.com/en-us/library/ms681952.aspx)

尝试从命令提示符和 Start -> Run 运行此代码：

```
#include <windows.h>
#pragma comment ( lib, "user32.lib" )

int main()
{
    BOOL b;
    char msg[1024];

    b = FreeConsole();
    sprintf(msg, "%d", b);
    MessageBox(NULL, msg, "FreeConsole", 0);

    b = AttachConsole(ATTACH_PARENT_PROCESS);
    sprintf(msg, "%d", b);
    MessageBox(NULL, msg, "AttachConsole", 0);

    return 0;
} 
```

从命令提示符运行时，`1`会显示两个包含 a 的消息框，表示两个调用都成功。从 Start -> Run 运行时，第一个框包含`1`，第二个框包含`0`，这意味着只有第一个调用成功。第二个失败是因为 explorer.exe（它是从 Start -> Run 启动的进程的父进程）没有控制台。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-03-18T10:31:51.533

在 Windows 7 上，当您执行 时`cmd.exe`，`CreateProcess`将有一个`CREATE_NEW_CONSOLE`标志，它将分配一个新的控制台而不是附加到父控制台（当 PE 标头包含`Subsystem = 3`ie时，这是默认行为，`IMAGE_SUBSYSTEM_WINDOWS_CUI`表示它是一个控制台应用程序）。这意味着`AllocConsole`将`.exe`在当前进程地址空间中的映像入口点之前调用。

`AllocConsole`创建一个新`conhost.exe`实例，它绘制 GUI 窗口，处理鼠标和键盘事件，维护和写入输入缓冲区，维护和读取屏幕缓冲区，当有键盘事件时，它更新输入缓冲区。`AllocConsole`还将进程 PEB 中的句柄设置为`stdin`控制台输入缓冲区和控制台伪句柄，并在它附加到的 ParameterBlock conhost.exe 实例中设置 。`ParameterBlock``cmd.exe``stdout``stderr``ConsoleHandle``to the PID of the`

`cmd.exe`是一个用 C 语言编写的控制台应用程序，类似于`diskpart.exe`or `setx.exe`，它将命令提示符显示到屏幕缓冲区 ( `stdout`of ) 并从*of*`cmd.exe`读取命令并解释要显示的按键事件以及确定要调用的命令和要调用的内容结果显示到（可能是 PEB 中句柄中的一个文件，而不是发送到）。*命令*本身没有任何内容，匿名管道的读取端，文件或文件。`stdin` *`cmd.exe`*`stdout``stdout``conhost`*`stdin``con`*

 *`cmd.exe`如果它正在写入标准句柄（否则它调用），则调用类似`WriteFile`which 将调用的函数`WriteConsole`（它是 的别名）。这将启动对PID in的 ALPC 调用，传递控制台伪句柄和缓冲区以将结果写入（或从缓冲区读取）。`WriteConsoleA``NtWriteFile``conhost.exe``ParameterBlock->ConsoleHandle`

当您`cmd /c`从内部执行时`cmd.exe`，它会创建一个 child `cmd.exe`，但不提供`CREATE_NEW_CONSOLE`，这会导致 child`cmd.exe`附加到相同的可见控制台，即`conhost.exe`实例，并`AttachConsole`在入口点之前调用。如果在 non-elevated 中使用`admin /c`（管理员版本）创建的孩子不是这种情况，它需要一个新实例，因为它具有不同的权限。类似地，当启动一个程序时，它会为其子进程打开一个新的，但是将程序文件名 + 扩展名指定为原始命令不会打开另一个控制台窗口，而是附加到父进程。创建一个`cmd.exe``cmd.exe``conhost.exe``start``CREATE_NEW_CONSOLE``conhost.exe``call``cmd /c diskpart``cmd.exe`child 附加到父级附加到的控制台，然后该子级创建自己的 child `diskpart.exe`，该 child 附加到父级附加到的控制台。

当您执行 GUI 应用程序时，它不会被分配或附加到控制台。如果您`AllocConsole`在应用程序中使用，它将创建一个新的`conhost.exe`控制台窗口（它可以被应用程序隐藏，即搅拌机有`window > toggle system console`，它通过获取`conhost.exe`控制台窗口的句柄然后在其上使用 using `ShowWindow`with`SW_HIDE`来做到这一点），但会不创建子进程，因为是当前进程的控制台窗口，所以现在会有2个窗口。您也可以改为附加到`AttachConsole`属于`pid`. `AttachConsole(-1)`附加到父级`pid`。这将使用该`conhost`进程所附加的那个。

如果您`AttachConsole`已经在不使用的情况下连接到控制台`FreeConsole`，则无法`AttachConsole`连接，如果您使用`DETACHED_PROCESS`. `CREATE_NO_WINDOW`具有相同的效果`DETACHED_PROCESS`，因为它不附加到控制台应用程序或为控制台应用程序分配控制台，但允许它附加到父控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T12:47:56.980

使用winapi已经有一段时间了，但是我查阅了[MSDN文档](http://msdn.microsoft.com/en-us/library/ms682073(VS.85).aspx)，并没有找到CreateConsole API函数。所以我的猜测是 CreateConsole 是遗留的东西，已被 AttachConsole 取代。所以可能没有区别，但 CreateConsole 可能已被弃用。

# c# - 我可以从一个字符串开始并实例化该字符串的一个对象吗？

> ID：432833
> 
> 赞同：3
> 
> 时间：2009-01-11T12:30:43.427
> 
> 标签：c#, .net, asp.net, linq-to-sql

我目前正在使用 LINQ 和 C#。

我的 LINQ to SQL 模型中有一个 DropDownList 表。

我希望用户能够从 DropDown 中选择一个 LINQ 表名。在代码中，我想创建该 LINQ 类的实例，然后运行 ​​Select 或它或我想要的任何其他东西。

我将如何根据用户选择的字符串中的对象名称来完成创建对象？我从一开始就想错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-11T12:36:38.157

你想要[Type.GetType(string)](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)和[Activator.CreateInstance(Type)](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)。

请注意，Type.GetType(string) 只会在当前执行的程序集和 mscorlib 中查找，除非您指定包括程序集在内的完整类型名称。无论哪种情况，您都需要指定类型名称，包括命名空间。

另一种选择是在调用 Activator.CreateInstance 之前使用[Assembly.GetType(string)](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettype.aspx)直接从字符串中获取类型。

（这里实际上有*很多*选择。如果这些都没有帮助你，请发布更多信息，我相信我们可以找到一条路。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-01-11T12:41:18.973

由于您使用 ASP.NET 标记了该帖子，因此我假设该列表位于客户端。如果是这种情况，您应该非常小心地信任该数据，并且我不建议直接从用户输入创建类型。您可以将数据用作工厂的输入，然后该工厂可以返回正确的实例（并在您认为合适的情况下处理任何非法输入）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T12:49:52.623

使用 LINQ-to-SQL，有一些特定的方法可以从数据上下文中执行此操作；基本上，`db.GetTable`. 这将返回一个`ITable`，但使用无类型的 有点棘手`ITable`。你可以列举它，至少......

要获得`ITable`，您通常需要`Type`，您可以使用（例如）获得`Assembly.GetType`：

```
 using (var ctx = new MyDataContext()) {
        string name = "Customer"; // type name
        Type ctxType = ctx.GetType();
        Type type = ctxType.Assembly.GetType(
            ctxType.Namespace + "." + name);
        ITable table = ctx.GetTable(type);
        foreach(var row in table) {
            Console.WriteLine(row); // works best if ToString overridden...
        }
    } 
```

当然，一旦有了`Type`，就可以使用 use`Activator`来创建新的实体实例：

```
 object newObj = Activator.CreateInstance(type);
        // TODO: set properties (with reflection?)
        table.InsertOnSubmit(newObj); 
```

但是如果你想使用属性名称，那也可以：

```
 using (var ctx = new MyDataContext()) {
        string name = "Customers"; // property name
        ITable table = (ITable) ctx.GetType()
            .GetProperty(name).GetValue(ctx, null);
        foreach (var row in table) {
            Console.WriteLine(row); // works best if ToString overridden...
        }
    } 
```

使用无类型数据运行过滤器 ( `Where`) 等会很棘手，因为构建`Expression`会很曲折。那时我可能会开始切换到类型化模型......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T12:54:54.547

详细阐述 Brian Rasmussen 的警告：类型应该受到限制并且需要有意识的设计。最好是“用户可实例化”类型应标有特定的自定义属性，该属性可以通过反射进行验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-16T10:46:31.340

跟随 Marc Gravell 的回答。

按照他的建议，我注意到一个`Cast<TResult>`扩展方法（在 System.Linq 中定义）。

不幸的是，您似乎无法使用该`type`实例进行投射：

```
Type dcType = dc.GetType();
Type type = dcType.Assembly.GetType(String.Format("{0}.{1}", dcType.Namespace, name));
var row = dc.GetTable(type).Cast<type>().SingleOrDefault(i => i.ID == 123); 
```

# c - 作为程序员，您如何确保编写出高质量的 C 代码？

> ID：432835
> 
> 赞同：8
> 
> 时间：2009-01-11T12:32:04.577
> 
> 标签：c, software-quality

我正在寻找编写一些高质量的 C 代码。有人可以指点我一些文章，网站..无论我需要什么例子。我已经看过并阅读了 K&R C 的书。

但是时代已经变了，肯定有人对质量 C 代码有更多的话要说。另一个重要的事情是你如何确保你作为程序员编写了高质量的 C 代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-11T13:01:29.777

有人提到了一些编译器开关，但语法流畅的代码并不能确保最终产品的质量，因为软件质量远不止这些。

软件质量有几种分类，但这里有一个列表，您可以将其用作清单：

*   **正确性**（它是否按照规范工作？）
*   **可靠性**（用户可以依赖它吗？）
*   **鲁棒性**（它是否在意外情况下工作？）
*   **性能**（它对用户来说是否足够快地完成工作？）
*   **可用性**（用户友好吗？）
*   **可验证性**（可以轻松验证其属性吗？）
*   **可维护性**（可以轻松进行修改吗？）
    *   **可修复性**（缺陷可以在合理的时间内修复吗？）
    *   **可进化性**（可以简单地添加新功能吗？）
*   **可重用性**（代码可以轻松地用于其他项目吗？）
*   **可移植性**（能否在不同环境中轻松运行？）
*   **可理解性（维护人员可以轻松理解**吗？）
*   **互操作性**（它的合作程度如何？）
*   **生产力**（高效和高性能的交付）
*   **及时**性（按时交付的能力）
*   **可见性**（所有步骤都清楚地记录了吗？）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-11T12:41:07.523

在编译器中启用警告。使用 gcc，我使用这些标志：

```
-std=c99 -pedantic -Wall -Wextra -Werror -Wmissing-prototypes
-Wmissing-declarations -Wshadow -Wpointer-arith -Wcast-align -Wwrite-strings
-Wredundant-decls -Wnested-externs -Winline -Wno-long-long -Wconversion
-Wstrict-prototypes 
```

如果您的代码无法更改为不产生警告，请删除`-Werror`或不使用产生警告的特定标志。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-01-11T12:43:08.597

传统上，人们使用[lint](http://en.wikipedia.org/wiki/Lint_programming_tool)来帮助解决这个问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-11T12:48:59.550

代码质量和大量文章、书籍、博客有很多方面

但我可以建议你作为开始：

[代码完成](https://rads.stackoverflow.com/amzn/click/com/0735619670)

[代码安全](https://rads.stackoverflow.com/amzn/click/com/0735617228)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-01-11T13:18:36.667

使用静态分析工具，传统上称为 lint，但是我使用了[splint](http://splint.org/)，它很好。请参阅此[问题](https://stackoverflow.com/questions/147864/tools-for-ensuring-c-code-quality)中的建议。我个人建议启用警告并修复它们。

在规则方面

*   不要信任输入数据 - 验证所有内容、大小、类型、内容。
*   防止缓冲区溢出 - strcat 和许多其他的并不安全。
*   使用单元测试，[ddj 文章](http://www.ddj.com/windows/208403755)。
*   请让其他人审查您的代码
*   不要做假设。
*   请保持功能简短，并彻底测试每个功能。
*   使用有意义的名称。
*   编写可读的代码。
*   不要偷懒——如果你需要改变某件事以使它更有意义，那就尽早而不是迟一点去做。

编辑：特定于 C，这个[C 陷阱](http://www.greenend.org.uk/rjk/2001/02/cfu.html)列表是必不可少的阅读，即使它适用于 C++，也值得通过[CERT C++ 安全编码标准](https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=637)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-11T12:52:54.473

之前的讨论[what-are-some-good-resources-for-learning-c-beyond-kr](https://stackoverflow.com/questions/257416/what-are-some-good-resources-for-learning-c-beyond-kr)可能指向更多（书籍）示例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-11T13:06:49.890

无论您是否在编写高质量的代码，您自己都很难判断，当然有大量的自动化和标准，但是如何应用他们所看到的一切呢？

这就是我非常喜欢将同行评审作为判断代码质量的一种方法的地方。让其他人从您的代码中看到（并学习），这将是质量的判断。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-01-11T13:14:57.407

到目前为止，人们已经提到了工具。但是，在某个点之外，您实际上只能做一件事来真正提高您编写的代码的质量：

写代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-01-11T13:16:51.787

这部分取决于您所说的“质量 C”代码是什么意思。

该程序的一个重要方面是“它是否按照它的设计目的去做”？这很难衡量，但至关重要。

然后你需要知道编译器是否可以接受代码 - 使用[Cristoph](https://stackoverflow.com/users/48015/christoph)提供[的 GCC 编译器选项集](https://stackoverflow.com/questions/432835/how-do-you-ensure-that-you-as-programmer-have-written-quality-c-code/432852#432852)表明代码状态良好。（虽然我会争论不休，但这取决于您的代码可能需要移动到的位置）。`-Wno-long-long`

代码布局很重要。人类和编译器都可以阅读代码吗？布局是否统一？它是标准格式之一吗？有几种，都有主要的追随者，只要您始终如一地使用其中一种，代码就应该没问题。评论是否恰当？这意味着评论足够多，但不要太多！该文件应该有一个标题注释，指出其中的内容 - 可能是谁编写的，也许是分发它的许可证。对此有多个问题，包括[Professional #include comments](https://stackoverflow.com/questions/276757/)。不过，按照良好的布局标准编写代码是很短时间的例行公事。

文件可能是相关的——通常是相关的。其他人怎么会知道代码存在，它做什么，如何使用它，何时使用它，何时不使用它？

代码应该使用足够好的算法编写——它不应该使用过多的内存、磁盘或 CPU 时间。它也不应该泄漏资源。将性能增强的最后一个 CPU 周期从一个例程中提取出来也是没有意义的，该例程将在每次运行程序时使用一次，持续几毫秒，当它启动时，除非你能证明它是一个性能瓶颈程序作为一个整体。

[Wouter van Nifterick](https://stackoverflow.com/users/38813/wouter-van-nifterick)也给出了一套[出色的指示](https://stackoverflow.com/questions/432835/how-do-you-ensure-that-you-as-programmer-have-written-quality-c-code/432892#432892)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-11T13:38:21.823

编写单元测试！

与更现代的语言相比，用 C 编写单元测试可能会更麻烦一些，但仍然非常值得。

我想说正确的单元测试是确保任何代码质量的第一方法。您可以使用所需的所有静态分析工具和代码审查，但没有什么比实际运行代码和验证结果更好的了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-01-11T13:16:05.127

一些强制代码质量的现代软件生命周期实践：

*   集成测试（在项目启动时计划）
*   [代码的同行评审](http://en.wikipedia.org/wiki/Software_peer_review)（在开发期间）
*   [结对编程](http://en.wikipedia.org/wiki/Pair_programming)（开发期间）
*   使用综合库（而不是“重新发明轮子”的方法）

后一种可能特别适用于 C 语言。

# python - 如何在 Python 中获得两个变量的逻辑异或？

> ID：432842
> 
> 赞同：841
> 
> 时间：2009-01-11T12:34:43.917
> 
> 标签：python, logical-operators

如何在 Python 中获得两个变量的[逻辑异或？](http://en.wikipedia.org/wiki/Exclusive_or)

例如，我有两个变量，我希望它们是字符串。我想测试其中只有一个包含 True 值（不是 None 或空字符串）：

```
str1 = raw_input("Enter string one:")
str2 = raw_input("Enter string two:")
if logical_xor(str1, str2):
    print "ok"
else:
    print "bad" 
```

该`^`运算符似乎是按位的，并没有在所有对象上定义：

```
>>> 1 ^ 1
0
>>> 2 ^ 1
3
>>> "abc" ^ ""
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for ^: 'str' and 'str' 
```

* * *

## 回答 #1

> 赞同：1488
> 
> 时间：2009-01-11T16:30:46.047

如果您已经将输入标准化为布尔值，则 != 是异或。

```
bool(a) != bool(b) 
```

* * *

## 回答 #2

> 赞同：586
> 
> 时间：2009-01-11T12:35:51.310

您始终可以使用 xor 的定义从其他逻辑操作中计算它：

```
(a and not b) or (not a and b) 
```

但这对我来说有点过于冗长，乍一看并不是特别清楚。另一种方法是：

```
bool(a) ^ bool(b) 
```

两个布尔值上的异或运算符是逻辑异或（与整数不同，它是按位的）。这是有道理的，因为[`bool`它只是 的子类`int`](http://docs.python.org/library/functions.html?highlight=bool#bool)，但被实现为只有值`0`和`1`。`0`当域被限制为and时，逻辑异或等效于按位异或`1`。

因此该`logical_xor`功能将实现如下：

```
def logical_xor(str1, str2):
    return bool(str1) ^ bool(str2) 
```

[感谢 Python-3000 邮件列表中的 Nick](http://mail.python.org/pipermail/python-3000/2007-December/011560.html) Coghlan 。

* * *

## 回答 #3

> 赞同：211
> 
> 时间：2012-06-14T15:34:09.507

*按位*异或已经内置到 Python 中，在[`operator`](http://docs.python.org/library/operator.html#operator.xor)模块中（与`^`运算符相同）：

```
from operator import xor
xor(bool(a), bool(b))  # Note: converting to bools is essential 
```

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2009-01-11T13:44:31.840

正如[Zach](https://stackoverflow.com/questions/432842/how-do-you-get-the-logical-xor-of-two-variables-in-python#432844)解释的那样，您可以使用：

```
xor = bool(a) ^ bool(b) 
```

就个人而言，我喜欢稍微不同的方言：

```
xor = bool(a) + bool(b) == 1 
```

这种方言的灵感来自我在学校学习的一种逻辑图表语言，其中“OR”由一个包含`≥1`（大于或等于 1）的框表示，“XOR”由一个包含`=1`.

这具有正确实现异或在多个操作数上的优点。

*   “1 = a ^ b ^ c ...”表示真正操作数的数量是奇数。该运算符是“奇偶校验”。
*   “1 = a + b + c...” 意味着只有一个操作数为真。这是“exclusive or”，意思是“一个排除其他”。

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2009-01-11T13:10:52.860

*   Python 逻辑`or`::如果是则`A or B`返回，否则返回`A``bool(A)``True``B`
*   Python 逻辑`and`::如果是则`A and B`返回，否则返回`A``bool(A)``False``B`

为了保持这种思维方式的大部分，我的逻辑异或定义是：

```
def logical_xor(a, b):
    if bool(a) == bool(b):
        return False
    else:
        return a or b 
```

这样它就可以返回`a`, `b`, 或`False`:

```
>>> logical_xor('this', 'that')
False
>>> logical_xor('', '')
False
>>> logical_xor('this', '')
'this'
>>> logical_xor('', 'that')
'that' 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2016-02-04T10:42:56.963

我测试了几种方法，`not a != (not b)`似乎是最快的。

这里有一些测试

```
%timeit not a != (not b)
10000000 loops, best of 3: 78.5 ns per loop

%timeit bool(a) != bool(b)
1000000 loops, best of 3: 343 ns per loop

%timeit not a ^ (not b)
10000000 loops, best of 3: 131 ns per loop 
```

**编辑：** 上面的示例 1 和 3 缺少括号，因此结果不正确。ShadowRanger 建议的新结果 +`truth()`功能。

```
%timeit  (not a) ^  (not b)   # 47 ns
%timeit  (not a) != (not b)   # 44.7 ns
%timeit truth(a) != truth(b)  # 116 ns
%timeit  bool(a) != bool(b)   # 190 ns 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2019-06-07T09:29:16.720

Python 有一个按位异或运算符，它是`^`：

```
>>> True ^ False
True
>>> True ^ True
False
>>> False ^ True
True
>>> False ^ False
False 
```

您可以通过在应用 xor ( ) 之前将输入转换为布尔值来使用它`^`：

```
bool(a) ^ bool(b) 
```

（已编辑 - 感谢 Arel）

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2017-04-18T15:29:24.200

简单易懂：

```
sum(bool(a), bool(b)) == 1 
```

如果您所追求的是排他性选择，即从 中选择`1`选择`n`，则可以将其扩展为多个参数：

```
sum(bool(x) for x in y) == 1 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2010-04-20T13:21:43.987

由于我没有看到使用变量参数的 xor 的简单变体，并且仅对真值 True 或 False 进行操作，因此我将把它扔在这里供任何人使用。正如其他人所指出的那样，非常（不是说非常）直截了当。

```
def xor(*vars):
    result = False
    for v in vars:
        result = result ^ bool(v)
    return result 
```

用法也很简单：

```
if xor(False, False, True, False):
    print "Hello World!" 
```

由于这是广义的 n 元逻辑 XOR，因此只要 True 操作数的数量为奇数，其真值将为 True（不仅当恰好一个为 True 时，这只是 n 元 XOR 为 True 的一种情况）。

因此，如果您正在寻找一个 n 元谓词，该谓词仅在其操作数之一为真时才为真，您可能希望使用：

```
def isOne(*vars):
    result = False
    for v in vars:
        if result and v:
            return False
        else:
            result = result or v
    return result 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2016-05-20T04:25:11.610

奖励线程：

阳极的想法......只是你尝试（可能是）pythonic表达式«不是»以获得逻辑«xor»的行为

真值表将是：

```
>>> True is not True
False
>>> True is not False
True
>>> False is not True
True
>>> False is not False
False
>>> 
```

对于您的示例字符串：

```
>>> "abc" is not  ""
True
>>> 'abc' is not 'abc' 
False
>>> 'abc' is not '' 
True
>>> '' is not 'abc' 
True
>>> '' is not '' 
False
>>> 
```

然而; 正如他们上面所指出的，这取决于你想要提取任何一对字符串的实际行为，因为字符串不是布尔值......甚至更多：如果你«潜入 Python»，您会发现 «The Peculiar Nature of "和”和“或”» [http://www.diveintopython.net/power_of_introspection/and_or.html](http://www.diveintopython.net/power_of_introspection/and_or.html)

对不起，我的书面英语，它不是我出生的语言。

问候。

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2019-07-25T13:32:53.723

在 Python 中获取两个或多个变量的逻辑异或：

1.  将输入转换为布尔值
2.  使用按位异或运算符（`^`或`operator.xor`）

例如，

```
bool(a) ^ bool(b) 
```

当您将输入转换为布尔值时，*按位*异或变为*逻辑*异或。

**请注意，接受的答案是错误** `!=`的：由于*operator chaining*的微妙性，与 Python 中的 xor 不同。

例如，以下三个值的异或在使用时是错误的`!=`：

```
True ^  False ^  False  # True, as expected of XOR
True != False != False  # False! Equivalent to `(True != False) and (False != False)` 
```

（PS 我尝试编辑接受的答案以包含此警告，但我的更改被拒绝。）

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2016-08-01T21:57:05.803

我知道这已经晚了，但我有一个想法，这可能是值得的，只是为了记录。也许这会奏效：`np.abs(x-y)`这个想法是

1.  如果 x=True=1 和 y=False=0 那么结果将是 |1-0|=1=True
2.  如果 x=False=0 和 y=False=0 那么结果将是 |0-0|=0=False
3.  如果 x=True=1 和 y=True=1 那么结果将是 |1-1|=0=False
4.  如果 x=False=0 和 y=True=1 那么结果将是 |0-1|=1=True

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2009-01-11T13:39:48.387

异或定义如下

```
def xor( a, b ):
    return (a or b) and not (a and b) 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2009-07-04T09:01:16.170

这里建议的一些实现在某些情况下会导致对操作数的重复评估，这可能会导致意想不到的副作用，因此必须避免。

也就是说`xor`，返回`True`或返回的实现`False`相当简单；如果可能的话，返回一个操作数的方法要复杂得多，因为对于应该选择哪个操作数没有共识，尤其是当有两个以上的操作数时。例如，应该`xor(None, -1, [], True)`返回`None`，`[]`还是`False`？我敢打赌，每个答案在某些人看来都是最直观的。

对于真或假结果，有多达五种可能的选择：返回第一个操作数（如果它与最终结果的值匹配，否则为布尔值），返回第一个匹配项（如果至少存在一个，则为布尔值），返回最后一个操作数（如果 ... else ...），返回最后一个匹配项（如果 ... else ...），或者总是返回布尔值。总共有 5 ** 2 = 25 种`xor`.

```
def xor(*operands, falsechoice = -2, truechoice = -2):
  """A single-evaluation, multi-operand, full-choice xor implementation
  falsechoice, truechoice: 0 = always bool, +/-1 = first/last operand, +/-2 = first/last match"""
  if not operands:
    raise TypeError('at least one operand expected')
  choices = [falsechoice, truechoice]
  matches = {}
  result = False
  first = True
  value = choice = None
  # avoid using index or slice since operands may be an infinite iterator
  for operand in operands:
    # evaluate each operand once only so as to avoid unintended side effects
    value = bool(operand)
    # the actual xor operation
    result ^= value
    # choice for the current operand, which may or may not match end result
    choice = choices[value]
    # if choice is last match;
    # or last operand and the current operand, in case it is last, matches result;
    # or first operand and the current operand is indeed first;
    # or first match and there hasn't been a match so far
    if choice < -1 or (choice == -1 and value == result) or (choice == 1 and first) or (choice > 1 and value not in matches):
      # store the current operand
      matches[value] = operand
    # next operand will no longer be first
    first = False
  # if choice for result is last operand, but they mismatch
  if (choices[result] == -1) and (result != value):
    return result
  else:
    # return the stored matching operand, if existing, else result as bool
    return matches.get(result, result)

testcases = [
  (-1, None, True, {None: None}, [], 'a'),
  (None, -1, {None: None}, 'a', []),
  (None, -1, True, {None: None}, 'a', []),
  (-1, None, {None: None}, [], 'a')]
choices = {-2: 'last match', -1: 'last operand', 0: 'always bool', 1: 'first operand', 2: 'first match'}
for c in testcases:
  print(c)
  for f in sorted(choices.keys()):
    for t in sorted(choices.keys()):
      x = xor(*c, falsechoice = f, truechoice = t)
      print('f: %d (%s)\tt: %d (%s)\tx: %s' % (f, choices[f], t, choices[t], x))
  print() 
```

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2014-03-08T05:11:44.763

有时我发现自己使用 1 和 0 而不是布尔 True 和 False 值。在这种情况下，xor 可以定义为

```
z = (x + y) % 2 
```

它具有以下真值表：

```
 x
   |0|1|
  -+-+-+
  0|0|1|
y -+-+-+
  1|1|0|
  -+-+-+ 
```

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2019-03-14T06:25:18.877

许多人，包括我自己，都需要一个`xor`行为类似于 n 输入异或电路的函数，其中 n 是可变的。（参见[https://en.wikipedia.org/wiki/XOR_gate](https://en.wikipedia.org/wiki/XOR_gate)）。下面的简单函数实现了这一点。

```
def xor(*args):
   """
   This function accepts an arbitrary number of input arguments, returning True
   if and only if bool() evaluates to True for an odd number of the input arguments.
   """

   return bool(sum(map(bool,args)) % 2) 
```

示例 I/O 如下：

```
In [1]: xor(False, True)
Out[1]: True

In [2]: xor(True, True)
Out[2]: False

In [3]: xor(True, True, True)
Out[3]: True 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2009-01-11T15:29:44.343

这个怎么样？

```
(not b and a) or (not a and b) 
```

`a`如果`b`是假就给如果是假
就给否则 给`b``a`
`False`

或者使用 Python 2.5+ 三元表达式：

```
(False if a else b) if b else a 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2021-04-14T13:58:30.417

鉴于 A 和 B 是布尔值。

```
A is not B 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2019-03-04T15:04:18.833

Xor`^`在 Python 中。它返回：

*   整数的按位异或
*   布尔的逻辑异或
*   集的排他并集
*   实现的类的用户定义结果`__xor__`。
*   未定义类型的 TypeError，例如字符串或字典。

如果您无论如何都打算在字符串上使用它们，那么将它们强制转换`bool`会使您的操作明确（您也可以表示`set(str1) ^ set(str2)`）。

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2020-03-25T23:09:11.707

这就是我编写任何真值表的方式。特别是对于 xor，我们有：

```
| a | b  | xor   |             |
|---|----|-------|-------------|
| T | T  | F     |             |
| T | F  | T     | a and not b |
| F | T  | T     | not a and b |
| F | F  | F     |             | 
```

只需查看答案列中的 T 值，然后用逻辑或将所有真实情况串在一起。所以，这个真值表可以在情况 2 或 3 中产生。因此，

```
xor = lambda a, b: (a and not b) or (not a and b) 
```

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2011-02-10T13:34:36.020

当您知道 XOR 的作用时，这很容易：

```
def logical_xor(a, b):
    return (a and not b) or (not a and b)

test_data = [
  [False, False],
  [False, True],
  [True, False],
  [True, True],
]

for a, b in test_data:
    print '%r xor %s = %r' % (a, b, logical_xor(a, b)) 
```

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2015-04-08T12:11:48.517

这将获得两个（或更多）变量的逻辑异或

```
str1 = raw_input("Enter string one:")
str2 = raw_input("Enter string two:")

any([str1, str2]) and not all([str1, str2]) 
```

这种设置的第一个问题是它很可能会遍历整个列表两次，并且至少会检查至少一个元素两次。因此它可能会提高代码理解能力，但不会提高速度（根据您的用例，差异可能可以忽略不计）。

此设置的第二个问题是它会检查排他性，而不考虑变量的数量。这最初可能被视为一个特征，但随着变量数量的增加（如果它们曾经这样做的话），第一个问题变得更加重要。

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2012-01-09T11:49:00.883

XOR 在`operator.xor`.

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2021-09-03T08:50:49.257

您使用与 C 中相同的 XOR 运算符，即`^`.

我不知道为什么，但最赞成的解决方案建议`bool(A) != bool(B)`，虽然我会说 - 符合 C 的`^`运营商，最明显的解决方案是：

```
bool(A) ^ bool(B) 
```

对于任何来自`C`或任何`C`衍生语言的人来说，这更具可读性和可立即理解...

在打代码打高尔夫球时，可能

```
not A ^ (not B) 
```

将是赢家。用`not`作为布尔值的转换器（比 . 少一个字母`bool()`。对于第一个表达式，在某些情况下可以省略括号。好吧，这取决于，在必须做的情况下`not(A) ^ (not(B))`，`bool()`需要相同数量的字母......

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-10-01T19:38:18.883

仅仅因为我没有在其他地方看到它，这也可以解决问题：

```
def logical_xor(a, b):
    return not b if a else bool(b) 
```

我不确定它是否比公认的解决方案 bool(a) != bool(b)“更好”/更具可读性/更 Pythonic。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-12-15T01:02:42.460

Python 处理逻辑操作的方式可能会令人困惑，因此我的实现为用户提供了一个简单的 True/False 答案选项（默认情况下）。可以通过将可选的第三个 arg 设置为 None 来获得实际的 Python 结果。

```
def xor(a, b, true=True, false=False): # set true to None to get actual Python result
    ab1 = a and not b
    ab2 = not a and b
    if bool(ab1) != bool(ab2):
        return (ab1 or ab2) if true is None else true
    else:
        return false 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2022-02-23T03:41:42.570

这是一个概括。

```
def xor(*orands):
    return sum(bool(x) for x in orands) == 1 
```

你可以用

```
# test
from itertools import product
for a, b, c in product((False, True), repeat=3):
    print(f'{int(a)}{int(b)}{int(c)}|{xor(a,b,c)}') 
```

输出：

> 000|假
> 001|真
> 010|真
> 011|假
> 100|真
> 101|假
> 110|假
> 111|假

* * *

## 回答 #28

> 赞同：-9
> 
> 时间：2018-01-10T18:35:19.923

我们可以通过使用轻松找到两个变量的异或：

```
def xor(a,b):
    return a !=b 
```

例子：

> > > 异或（真，假）>>> 真

# css - 在浏览器中设计网站（喘气！）

> ID：432849
> 
> 赞同：2
> 
> 时间：2009-01-11T12:39:03.610
> 
> 标签：css, browser, grid, photoshop

我感兴趣的是人们对利弊的看法，或者对在浏览器中设计网站以及远离 Photoshop、Fireworks 等的彻头彻尾的“地狱不”的看法。

我一直在为我的网站设计重新启动，并在浏览器中进行尝试，我不会回头。

例如（我使用 12 列的 960px 网格）：

```
<div id="news_section" class="floatleft columntwo spanfourcolumns">
   …content
</div>

<div id="recent_work" class="floatleft columnfour spansevencolumns">
   …content
</div> 
```

不仅设计再次变得有趣，而且使用网格、垂直节奏，甚至黄金比例，从未如此简单。更不用说，它完全消除了设计和静态编码之间的差距。

你怎么看？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-01-11T12:45:35.737

好吧，使用浏览器工作并不是世界上最糟糕的事情，但有几个“地狱不”：

1)**不要**使用 IE 设计您的应用程序。使用 Chrome 或 FireFox。IE 的不合规行为可能会让您误以为您的 CSS 是有效的，而实际上并非如此。您的 IE 主要用例是在 IE 中测试您的网站。

2）不要像您在示例中所做的那样，根据它们的显示方式命名您的类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-11T14:13:09.180

不！！

如果 iDesign Steve 直接在浏览器中学习设计，

1.  创新将受到影响：Steve 不在乎 CSS/HTML/whatnot 的限制。他可以自由地展示人类尚未见过的最令人印象深刻的网站。普通程序员 Joe 的职责是扩展 CSS/HTML/whatnot 的限制，及时填入批准的设计，并看到它被一些愚蠢的浏览器撕成碎片，而这些浏览器恰好在截止日期之前拥有相当大的市场份额。面对现实，写 CSS 感觉就像写汇编代码。甚至完成最基本的事情（流畅的多列布局？）是非常困难的，它会让你兴奋一段时间。
2.  Steve 的冷静因素将会减少：据我所知，没有一个开发人员使用 WYSIWYG 工具来生成 HTML/CSS，或者认为这是可以接受的。当您只需要一个文本编辑器时，您看起来就不那么酷了。当一位顾客看看史蒂夫的显示器，看到的是一堆文本而不是几个窗口、一百个有趣的小图标和半完成的彩色草稿时，他可能会想“我 7 岁的孙子也可以打字了。 ……”。
3.  Joe 比 Steve 有更多的限制：站点应该是可访问的，布局应该足够流畅以适应各种输出，与 javascript 配合得很好......如果 CSS/HTML 无论如何都会被重写，那么挣扎是没有意义的。

成为一名优秀的队友并立即启动 Photoshop。乔需要他的工作来支付他的账单。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-01-11T12:45:25.330

你是说你先在浏览器中制作页面的线框（通过 HTML/CSS），然后再应用设计？这就是我所做的（37Signals 也[遵循这个想法](http://www.37signals.com/svn/posts/1061-why-we-skip-photoshop)）。

在我看来，开发人员在不接触 Photoshop 的情况下制作静态线框是一件好事，因为该网站可以立即使用，并且不会浪费时间让事情看起来恰到好处。

程序员也没有太多的设计倾向——我喜欢把它留给那些知道阳光下每个 PS 命令的人:)

我还使用[YUI Grids](http://developer.yahoo.com/yui/grids/) CSS 框架来快速创建布局。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-11T12:47:04.453

好吧，对于我这种设计无能的人来说，这是一张白板草图，然后直接进入 HTML 和 CSS。

我的网站仍然看起来很糟糕......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-01-11T14:21:06.993

在我完成的最后几个站点中，我采用了两种方法。每次，直接用 HTML/CSS 设计的页面都少了很多工作，但网站的吸引力却要小得多。如果您想制作一个有吸引力的页面，请从 Photoshop 开始，否则您会经常在 CSS 中使用快捷方式。在 Photoshop 中可以更快地创建一个想法并且更加灵活，这将引导您尝试您的想法，并且您会想出一个视觉上更好的网站。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-11T12:48:20.503

我从不在 Photoshop 中设计网站；我直接从物理草图到 HTML 和 CSS。我发现它更快，并且您最终不会丢弃您已经工作了几个小时的东西（Photoshop 文件）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-26T04:00:51.940

我选择继续使用线框并从纸张直接进入浏览器进行设计。当然，这是我的工作，它使我成为一个更有创意的设计师。

虽然我喜欢使用我自己的 CSS 库，但请查看[Google Blueprint](http://www.blueprintcss.org/)并查看网页设计师 Mark Boulton 的[这篇文章](http://www.markboulton.co.uk/journal/comments/drupalorg_design_iterations_and_designing_in_the_open/)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-11T15:42:27.393

一定不行！

*   您正在重做“所有事物的表”错误，只是使用类而不是表。
*   您正在将演示文稿（我在哪里放置）与内容混合。你的课程不告诉这是什么，他们告诉放在哪里。
*   你的设计是固定尺寸的。它不会随着窗口大小而流动，因此它需要水平滚动或右侧的大空白区域。

但我不明白为什么有人提到 PhotoShop。它几乎是网页设计的最后一个工具，也许 Illustrator 是唯一一个更不适合这个的工具。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-03T20:14:38.613

我发现，虽然物理草图可以让您开始正确的设计轨道，但您可以在 Adob​​e Illustrator 中制作更好看的布局（这比 Photoshop 更容易移动元素）。设计完成后，使用 Photoshop 将其切片。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-03T22:49:37.413

要考虑的一种观点是您为谁设计。如果您正在为客户设计网站，那么在 Photoshop 中进行快速模型会很有帮助，这样他们就可以了解布局并在您的设计上签字。一旦客户同意设计，您就可以创建一个适合您模型中的元素的线框，然后您可以拼接需要直接从模型中获得实际图像的元素。

遵循此方法时，您必须考虑可用于实现模型的所有可用设计元素，并确保将它们以设计良好和语义的性质放在一起，而不仅仅是完成工作的东西。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2011-03-12T04:42:42.713

指南针，特别是蓝图/语义，在您在浏览器中进行设计时有很大帮助。我还喜欢在不同的文件上保留布局和样式，这样我可以更轻松地处理我不喜欢的样式，同时将线框保留在一个地方。我还建议使用调色板并按字体比例组合，两者都很有用，并且使用 SASS 变量更容易实现。

# exception - 如何在 Haskell 中捕获任意异常？

> ID：432859
> 
> 赞同：4
> 
> 时间：2009-01-11T12:45:16.830
> 
> 标签：exception, haskell, exception-handling, ghc

如何在 Haskell 中捕获异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T13:03:44.123

读完这篇论文后我明白了：[An Extensible Dynamically-Typed Hierarchy of Exceptions](http://www.haskell.org/~simonmar/papers/ext-exceptions.pdf)

```
handle (\(SomeException e) -> return $ "caught: " ++ show e) undefined 
```

# asp.net - 如何忽略正则表达式中的大小写？

> ID：432895
> 
> 赞同：13
> 
> 时间：2009-01-11T13:06:01.590
> 
> 标签：asp.net, regex, ignore-case

我有一个检查文件扩展名的 ASP.NET RegularExpressionValidator。有没有一种快速的方法可以告诉它忽略扩展名的大小写，而不必将大写变体显式添加到我的验证表达式中？

```
ValidationExpression="([^.]+[.](jpg|jpeg|gif|png|wpf|doc|docx|xls|xlsx ... 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-01-11T13:07:44.177

服务器端，“（？i）”可以使用，但这在客户端不起作用。有关更多讨论和解决方法，请参见[此处](http://web.archive.org/web/20100502214444/http://reflectedthought.com/thecoder/archive/2007/11/25/regularexpressionvalidator_ignore_case.aspx)。

即“...(?i)(jpg|jpeg|gif|png|wpf|...”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T13:11:29.710

在 VisualBasic.NET 中，您可以使用 RegExOptions 忽略大小写：

```
Dim RegexObj As New Regex("([^.]+[.](jpg|jpeg|gif))", RegexOptions.IgnoreCase) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-01-11T13:13:05.913

根据[正则表达式选项](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx)，这应该有效：

```
// Added LowerCase i:
ValidationExpression="(?i:[^.]+[.](jpg|jpeg|gif|png|wpf|doc|docx|xls|xlsx ... 
```

# sql-server - 使用 SQL Server 进行双向复制

> ID：432900
> 
> 赞同：0
> 
> 时间：2009-01-11T13:10:42.783
> 
> 标签：sql-server, replication

有没有办法使用 SQL Server 进行双向复制？

(BDD 1) 表 1 <=> (BDD 2) 表 1

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T13:12:19.333

有一些解决方案可能适合您的需求。

1.  [合并复制](http://msdn.microsoft.com/en-us/library/ms151329.aspx)
2.  [对等事务复制](http://msdn.microsoft.com/en-us/library/ms151196.aspx)
3.  [数据库镜像](http://msdn.microsoft.com/en-us/library/bb934127.aspx)

他们每个人都有自己的优点和缺点。选择一个取决于您的场景的性质。

# c# - 将“友好”列名添加到 LINQ to SQL 模型的好方法是什么？

> ID：432913
> 
> 赞同：2
> 
> 时间：2009-01-11T13:18:34.077
> 
> 标签：c#, sql, linq

我有一个 LINQ to SQL 模型设置 - 但是在我的应用程序中有某些地方我想要“友好”的列名，例如：

"NameFirst" 为 "First Name" "AgencyName" 为 "Agency"

只需寻找有关创建这些映射的最佳位置/技术的建议 - 无需更改模型。这些映射不一定会在 GridView 或任何控件中使用——希望它们以任何容量可用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T13:22:04.913

好吧，对于大多数表的使用，您需要`[DisplayName(...)]`，但是如果不弄乱部分类，这并不容易。但是，如果您只是希望它可用，您可以针对该类声明您自己的属性，并将其添加到那里：

```
[MyDisplayName("NameFirst", "First Name")]
[MyDisplayName("AgencyName", "Agency")]
partial class Foo {} 
```

然后用反射把它弄出来；那怎么办？如果是这样，类似：

```
static class Program
{
    static void Main()
    {
        Console.WriteLine(MyDisplayNameAttribute.Get(
            typeof(Foo), "NameFirst"));
        Console.WriteLine(MyDisplayNameAttribute.Get(
            typeof(Foo), "Bar"));
    }
}

[AttributeUsage(AttributeTargets.Interface |
    AttributeTargets.Class | AttributeTargets.Struct,
    AllowMultiple = true, Inherited = true)]
sealed class MyDisplayNameAttribute : Attribute
{
    public string MemberName { get; private set; }
    public string DisplayName { get; private set; }
    public MyDisplayNameAttribute(string memberName, string displayName)
    {
        MemberName = memberName;
        DisplayName = displayName;
    }
    public static string Get(Type type, string memberName)
    {
        var attrib = type.GetCustomAttributes(
                typeof(MyDisplayNameAttribute), true)
            .Cast<MyDisplayNameAttribute>()
            .Where(x => x.MemberName.Equals(memberName,
                StringComparison.InvariantCultureIgnoreCase))
            .FirstOrDefault();
        return attrib == null ? memberName : attrib.DisplayName;
    }
}

[MyDisplayName("NameFirst", "First Name")]
[MyDisplayName("AgencyName", "Agency")]
partial class Foo { } // your half of the entity

partial class Foo { // LINQ-generated
    public string NameFirst {get;set;}
    public string AgencyName {get;set;}
    public string Bar { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T14:03:09.107

另一种选择是维护一个字符串字典，其中属性名称 (Type.Property) 作为键，友好名称作为值。

然后，您可以将其设置在静态类中，并在需要时随时使用。这很容易维护，因为您可以在一个地方获得所有定义。

您甚至可以将它作为实体基类的静态属性，以便它可用于所有实体类型。

# browser - 浏览速度是否取决于浏览器？

> ID：432915
> 
> 赞同：5
> 
> 时间：2009-01-11T13:18:38.460
> 
> 标签：browser

浏览速度是否取决于浏览器（如 IE、firefox）？

如果它取决于浏览器，哪个浏览器最好并且运行速度快？

如果我们清除浏览器中的缓存会降低浏览速度吗？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-01-11T13:23:58.013

是的，它取决于浏览器。不仅是哪个浏览器，还有它的配置。有很多东西在不同的浏览器中表现不同。相同的浏览器可能仅对一部分站点更快。一些因素是：

*   渲染性能
*   Javascript 性能（包括单个方法）
*   缓存策略（略有不同）
*   默认情况下是否启用 HTTP 流水线
*   默认的最大 HTTP 连接数
*   是否支持压缩等
*   在页面加载期间，浏览器选择显示或布局页面的时间有多长 - 这可能会对用户感知产生很大影响，即使总体加载时间相同。大多数浏览器至少会在页面加载完成之前尝试渲染页面，如果它需要超过 1 秒左右的话。

遗憾的是，实际上没有标准的方法来确定页面是否已经完成加载——某些浏览器不会将背景图像计为页面加载的一部分（例如，Mozilla 在背景图像仍在加载时触发 onload 事件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-11T13:31:26.063

浏览器速度测试的一些链接：
[js speed](http://celtickane.com/webdesign/jsspeed.php)
[lifehacker](http://lifehacker.com/396048/speed-testing-the-latest-web-browsers)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T13:31:26.237

[http://www.howtocreate.co.uk/browserSpeed.html](http://www.howtocreate.co.uk/browserSpeed.html)

Chrome 在这里没有被审查，但它非常快，尤其是在 javascript 重的网站上，因为它实际上将 javascript 编译为机器代码，请参见[此处](http://code.google.com/apis/v8/design.html)

目前主流浏览器中IE7是最慢的，但IE8显然会快很多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-01-11T13:51:21.173

雅虎！卓越性能团队设计[了 34 个最佳实践来加速您的网站](http://developer.yahoo.com/performance/rules.html)。

他们说大部分响应时间都花在检索文件上。因此，减少要检索的文件数量的每一个好处也是速度的一个优势。因此缓存、HTTP 连接和并行下载的配置非常重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-11T13:23:06.550

当然它有一些效果——用于渲染的算法不一样，下载机制也可能不同。
我相信还有很多不同之处。
我发现 FF 和 Chrome 比 IE 运行得更快。

# innovation - 自 1980 年以来计算机领域的重大新发明

> ID：432922
> 
> 赞同：561
> 
> 时间：2009-01-11T13:27:42.610
> 
> 标签：innovation

这个问题源于对过去 50 年左右计算领域不同类型进步的[评论。](https://stackoverflow.com/questions/357813/help-me-remember-a-quote-from-alan-kay#389642)

其他一些参与者要求我向整个论坛提出这个问题。

这里的基本思想不是抨击事物的当前状态，而是试图了解提出基本新思想和原则的进展情况。

我声称我们在大多数计算领域都需要真正的新想法，我想知道最近已经完成的任何重要且强大的想法。如果我们真的找不到它们，那么我们应该问“为什么？” 和“我们应该做什么？”

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2009-01-11T15:11:57.610

互联网本身早于 1980 年，但由 Tim Berners-Lee 提出并实施的**万维网**（“通过简单机制分发的超文本”）始于 1989/90。

虽然超文本的想法之前已经存在（[尼尔森的 Xanadu](http://www.nytimes.com/2009/01/11/business/11stream.html)曾试图实现分布式方案），但万维网是实现分布式超文本系统的一种新方法。Berners-Lee 以一种功能强大且易于实现的方式结合了简单的客户端-服务器协议、标记语言和寻址方案。

我认为大多数创新都是以原始方式重新组合现有作品而创造的。万维网的每一个部分以前都以某种形式存在过，但这种组合只有事后才很明显。

*我确信你现在正在使用它。*

* * *

## 回答 #2

> 赞同：235
> 
> 时间：2009-01-11T14:01:10.623

[自由软件基金会](http://en.wikipedia.org/wiki/Free_Software_Foundation)（成立于 1985 年）

即使你不是他们哲学的全心全意支持者，他们一直在推动的自由软件、开源理念对软件行业和一般内容（例如维基百科）产生了惊人的影响。

* * *

## 回答 #3

> 赞同：149
> 
> 时间：2009-01-11T14:14:08.163

我认为公平地说，在 1980 年，如果您使用计算机，您要么为此获得报酬，要么您是一个极客……那么发生了什么变化？

*   打印机和消费级**桌面出版**。这意味着您不需要印刷机来制作大批量、高质量的印刷材料。那是**很大**的——当然，现在我们完全认为它是理所当然的，而且大多数情况下我们甚至都不关心打印部分，因为无论如何每个人都在线。

*   **颜色**。严重地。彩色屏幕对非极客对游戏和应用程序的感知产生了巨大影响。突然间，游戏似乎不再是艰苦的工作，而更像是看电视，这为世嘉、任天堂、雅达利等公司打开了将消费者游戏带入家庭的大门。

*   媒体压缩（MP3 和视频文件）。还有一大堆东西——比如 TiVO 和 iPod——我们不再将它们视为计算机，因为它们无处不在且对用户友好。但他们是。

我认为，这里的共同点是曾经不可能的东西（制作打印文件；准确地复制彩色图像；在世界各地实时发送信息；分发音频和视频材料），然后由于设备和物流而变得昂贵涉及，现在是消费者级别的。那么 - 大公司现在在做什么，以前是不可能的，但如果我们能弄清楚如何做到小而便宜，可能会很酷？

任何仍然涉及物理运输的东西都很有趣。视频会议（目前）还没有取代真正的会议——但有了正确的技术，它仍然可以。完全感官的沉浸式环境可以消除一些休闲旅行——家庭影院就是一个小例子；另一个是位于 Soho 办公楼内的“虚拟高尔夫球场”，您可以在模拟球场上打出 18 洞的真实高尔夫球场。

不过，对我来说，下一个真正重要的事情将是制造。做东西。勺子、吉他、椅子、衣服、汽车、瓷砖等等。仍然依赖于制造和分销基础设施的东西。我再也不用去商店买电影或专辑了——多久我就不用去商店买衣服和厨具了？

当然，OLED 显示器、GPS 和移动宽带、IoC 容器、脚本和“云”正在发生有趣的发展——但这仍然只是将图片放在屏幕上的新奇方式。我可以打印我自己的照片并编写我自己的网页，但我希望能够制造一个完全适合我桌子旁边那个角落的亚麻篮，以及一个用于将我的吉他 FX 单元固定在我的桌子上的安装支架，等等将我的手机夹在自行车车把上。

与编程无关？不……但在 1980 年，声音制作也没有。或视频分发。或向您在赞比亚的亲戚发送信息。想大一点，人们... :)

* * *

## 回答 #4

> 赞同：137
> 
> 时间：2009-01-11T14:54:13.573

包管理和分布式修订控制。

这些软件开发和分发方式的模式是最近才出现的，并且仍然刚刚开始产生影响。

Ian Murdock 将[包管理](http://en.wikipedia.org/wiki/Package_management_system#Impact)称为“Linux 为业界带来的最大进步”。嗯，他会的，但他有一个观点。自 1980 年以来，软件的安装方式发生了显着变化，但大多数计算机用户仍然没有经历过这种变化。

Joel 和 Jeff在[Podcast #36中一直在](https://blog.stackoverflow.com/2009/01/podcast-36/)[与 Eric Sink](http://www.ericsink.com/entries/stack_overflow_podcast_36.html)讨论修订控制（或版本控制或源代码控制）。似乎大多数开发人员还没有赶上*集中式*系统，而 DVCS 被广泛认为是神秘且不必要的。

 *从[播客 36 成绩单](https://stackoverflow.fogbugz.com/default.asp?W29018)：

> 0:06:37
> 
> **Atwood：** ……如果你假设——这是一个很大的假设——大​​多数开发人员都掌握了基本的源代码控制——坦率地说，我认为这不是真的……
> 
> **Spolsky：** 不。他们中的大多数，即使他们有，他们理解的是签入、签出，但是分支和合并——这让他们感到困惑。

* * *

## 回答 #5

> 赞同：122
> 
> 时间：2009-01-22T07:16:07.570

[比特流](http://en.wikipedia.org/wiki/BitTorrent_%28protocol%29)。它彻底颠覆了以前看似不可改变的规则——一个人通过 Internet 下载文件所需的时间与下载文件的人数成正比。它还解决了以前的点对点解决方案的缺陷，特别是围绕“窃取”，以一种与解决方案本身有机的方式。

BitTorrent 巧妙地将通常的劣势——许多用户试图同时下载单个文件——转化为优势，将文件按地理分布作为下载过程的自然部分。它用于优化两个对等点之间的带宽使用的策略不鼓励作为副作用的窃取 - 强制限制符合所有参与者的最佳利益。

这是其中一种想法，一旦其他人发明它，即使不明显，也似乎很简单。

* * *

## 回答 #6

> 赞同：120
> 
> 时间：2009-01-12T03:04:04.083

Damas-Milner 类型推断（通常称为 Hindley-Milner 类型推断）于 1983 年发布，此后一直是每个复杂静态类型系统的基础。这是编程语言中一个真正的新想法（基于 1970 年代发表的想法，但直到 1980 年之后才变得实用）。就重要性而言，我将其与 Self 和用于实现 Self 的技术相提并论；就影响力而言，它没有同行。（OO 世界的其余部分仍在对 Smalltalk 或 Simula 进行变体。）

类型推断的变化仍在上演；我最想挑出的变化是 Wadler 和 Blott 用于解决重载的*类型类*机制，后来发现它为类型级别的编程提供了非常强大的机制。这个故事的结局还在写。

* * *

## 回答 #7

> 赞同：104
> 
> 时间：2009-01-12T03:07:59.207

**这是Google map-reduce**的一个插件，不仅是为了它自己，也是为了代表 Google 在不可靠的商品机器农场上运行快速、可靠的服务所取得的成就。绝对是一项重要的发明，与 1980 年称雄的重量级计算的大型大型机方法完全不同。

* * *

## 回答 #8

> 赞同：91
> 
> 时间：2009-01-12T11:57:38.733

**标记**，信息分类的方式。是的，每个问题下的小文本框。

令人惊讶的是，发明标签花了大约 30 年的时间。我们使用了列表和目录；我们使用了为印刷书籍优化的东西。

然而，30 年比人们意识到印刷书籍可以更小格式所需的时间要短得多。人们可以把书放在手中。

我认为核心 CS 人员低估了标记概念。所有研究都集中在自然语言处理（自上而下的方法）上。**但是标记是计算机和人都能很好理解的第一种语言。**这是一种自下而上的方法，使计算机使用自然语言。

* * *

## 回答 #9

> 赞同：80
> 
> 时间：2009-03-13T10:27:06.010

我认为我们以错误的方式看待这个问题并得出错误的结论。如果我做对了，循环就会：

想法 -> 首次实施 -> 少数人采用 -> 临界质量 -> 商品产品

从第一个想法到商品，你通常需要几个世纪，假设这个想法曾经到达那个阶段。达芬奇可能在 1493 年绘制了某种直升机，但花了大约 400 年的时间才得到一台能够将自己从地面升起的真正机器。

从威廉·伯恩在 1580 年对潜艇的首次描述到 1800 年的首次实施，您有 220 年时间，而目前的潜艇仍处于起步阶段：我们几乎对水下航行一无所知（地球有 2/3 的面积在海底，想想潜在的房地产;)。

没有更早的想法，我们从未听说过。根据一些传说，亚历山大大帝似乎在公元前 332 年使用了某种潜水钟（这是潜艇的基本概念：一种在海底运送人员和空气供应的装置）。算上这一点，我们正在关注从想法（即使是基本原型）到产品的 2000 年。

我要说的是，今天寻找实现，更不用说产品了，甚至在 1980 年之前都不是想法...... 所以呢？

40 年前就有联网的计算机，当然，但这无法与今天的互联网相提并论。基本的想法/技术就在那里，但无论如何你都不能在线玩魔兽游戏。

> 我声称我们在大多数计算领域都需要真正的新想法，我想知道最近已经完成的任何重要且强大的想法。如果我们真的找不到它们，那么我们应该问“为什么？” 和“我们应该做什么？”

从历史上看，我们从来没有能够那么快地“找到”离这个想法那么近的东西。我认为这个周期越来越快，但计算仍然很年轻。

目前，我正试图弄清楚如何制作全息图（星球大战那种，没有任何物理支持）。我想我知道如何让它发挥作用。我什至还没有收集到工具、材料、资金，但即使我要取得任何程度的成功，实际的想法至少已经有几十年的历史了，至少相关的实现/技术已经使用了很长时间.

一旦您开始列出实际产品，您就可以确定概念和第一个实现在不久前就已经存在。没关系。

你可以用某种理由争论说没有什么是新的，永远，或者一切都是新的，永远。这是哲学，两种观点都可以辩护。

从实践的角度来看，真理介于两者之间。真理不是二元概念，布尔逻辑该死。

中国人可能在不久前就发明了印刷机，但是大约 10 年的时间，大多数人才能在家里以合理的价格打印出像样的彩色照片。

发明无处不在，这取决于您的标准和参考框架。

* * *

## 回答 #10

> 赞同：68
> 
> 时间：2009-01-12T15:27:21.713

谷歌的[页面排名](http://en.wikipedia.org/wiki/PageRank)算法。虽然它可以被看作只是对网络爬虫搜索引擎的改进，但我要指出它们也是 1980 年后开发的。

* * *

## 回答 #11

> 赞同：66
> 
> 时间：2009-03-05T16:27:31.930

DNS，1983 年，以及相关的进步，例如通过 MX 记录而不是 bang-paths 解析电子邮件主机。**不寒而栗**

Zeroconf 在 DNS 上工作，2000。我将打印机插入网络，我的笔记本电脑可以看到它。我在网络上启动了一个 Web 服务器，我的浏览器可以看到它。（假设他们广播了他们的可用性。）

NTP (1985) 基于 Marzullo 算法 (1984)。抖动网络上的准确时间。

鼠标滚轮，1995 年。在没有它的情况下使用鼠标感觉很原始。不，这不是 Engelbart 的团队想到并忘记提及的事情。至少当我问当时团队中的某个人时不是这样。（那是在 1998 年左右的某个 Engelbart 活动中。我必须处理第一批老鼠之一。）

Unicode，1987，以及它对不同类型编码、规范化、双向文本等的依赖进展。

是的，人们每天都使用这 5 个是很常见的。

这些“真的是新想法”吗？毕竟，有老鼠，有字符编码，有网络计时。告诉我如何区分“新”和“真正新”，我会为您解答。我的直觉说这些已经足够新了。

在较小的领域中，很容易出现更近期的进展。例如，在生物信息学中，Smith-Waterman (1981) 尤其是 BLAST (1990) 有效地使该领域成为可能。但这听起来像是您在寻求在整个计算领域都非常广泛的想法，并且首先采摘低垂的果实。因此，它总是有一个新的领域。

* * *

## 回答 #12

> 赞同：63
> 
> 时间：2009-01-11T21:42:47.883

数码相机呢？

根据维基百科，[第一台真正的数码相机](http://en.wikipedia.org/wiki/History_of_the_camera#The_arrival_of_true_digital_cameras)出现在 1988 年，大众市场数码相机在 1990 年代后期变得负担得起。

* * *

## 回答 #13

> 赞同：50
> 
> 时间：2009-01-16T22:24:10.490

**现代着色语言和现代 GPU 的流行。**

GPU 也是一种低成本的并行超级计算机，带有 CUDA 和 OpenCL 等工具，用于快速编写**高级**并行代码。感谢所有那些降低这些越来越令人印象深刻的硬件奇迹价格的游戏玩家。在接下来的五年中，我希望每台销售的新计算机（以及 iPhone）都能够作为基本假设运行大规模并行代码，就像 24 位颜色或 32 位保护模式一样。

* * *

## 回答 #14

> 赞同：43
> 
> 时间：2009-01-11T15:58:21.057

JIT 编译是在 1980 年代后期发明的。

* * *

## 回答 #15

> 赞同：42
> 
> 时间：2009-01-11T22:24:15.053

解决“为什么新思想会死”和“怎么办”这两个问题？

我怀疑很多缺乏进展是由于资本的大量涌入和该行业根深蒂固的财富。听起来有悖常理，但我认为任何新想法都能一炮而红已成为传统观念。如果它在第一次尝试时没有成功，它就不能回来。它被有根深蒂固的利益的人买下，或者只是失败了，能量就消失了。几个例子是平板电脑和集成办公软件。牛顿和其他几个人有真正的潜力，但最终（通过竞争性减员和错误判断）浪费了他们与生俱来的权利，扼杀了整个类别。（我特别喜欢 Ashton Tate 的框架；但我仍然坚持使用 Word 和 Excel）。

该怎么办？首先想到的是Wm。莎士比亚的建议：“让我们杀了所有的律师。” 但现在他们的武装太精良了，恐怕。我实际上认为最好的选择是找到某种开源计划。他们似乎比替代品更好地保持可访问性和渐进式改进。但是这个行业已经变得足够大，因此需要某种有机的协作机制来获得牵引力。

我还认为，有一种动态表明，根深蒂固的利益（尤其是平台）需要大量的改变——流失——来证明持续的收入流是合理的；这吸收了许多本可以以更好的方式使用的创造性能量。看看我们花了多少时间在微软、Sun、Linux 或 Firefox 的最新迭代上踩水，对大部分已经正常工作的系统进行更改。这不是因为它们是邪恶的，而是因为它们已经融入了这个行业。没有稳定均衡之类的东西；所有的反馈机制都是积极的，有利于改变而不是稳定。（你有没有看到某个功能被撤回，或者更改被撤回？）

关于 SO 讨论的另一条线索是臭鼬工厂综合症（参考：Geoffrey Moore）：大型组织中的真正创新几乎总是（90% 以上）出现在自发出现的未经授权的项目中，完全由个人或小组主动推动（并且往往受到正式的管理层的反对）。所以：质疑权威，破坏系统。

* * *

## 回答 #16

> 赞同：36
> 
> 时间：2009-01-11T16:58:29.890

软件：

*   虚拟化和仿真

*   P2P 数据传输

*   社区驱动的项目，例如 Wikipedia、SETI@home ...

*   网络爬虫和网络搜索引擎，即索引分布在世界各地的信息

硬件：

*   模块化电脑

*   电子纸

* * *

## 回答 #17

> 赞同：36
> 
> 时间：2009-01-11T14:00:47.863

让我吃惊的一件事是简陋的电子表格。非程序员用简单的公式网格为现实世界的问题构建疯狂而美妙的解决方案。在桌面应用程序中复制他们的努力通常比编写电子表格花费的时间长 10 到 100 倍，并且生成的应用程序通常更难使用并且充满错误！

我相信电子表格成功的关键是自动依赖分析。如果电子表格的用户被迫使用观察者模式，他们就没有机会做对了。

因此，最大的进步是自动依赖分析。现在为什么没有任何现代平台（Java、.Net、Web 服务）将其构建到系统的核心中？特别是在通过并行化进行扩展的时代 - 依赖关系图可以轻松地导致并行重新计算。

编辑：当-刚刚检查过。VisiCalc 于 1979 年发布 - 让我们假设它是 1980 年后的发明。

Edit2：似乎艾伦已经注意到电子表格 - 如果[购买他到这个论坛的问题](https://stackoverflow.com/questions/357813/help-me-remember-a-quote-from-alan-kay)是正确的！

* * *

## 回答 #18

> 赞同：36
> 
> 时间：2009-01-12T00:24:22.097

函数式编程研究人员重新发现了 monad。monad 有助于让一种纯粹、懒惰的语言（Haskell）成为一种实用工具。它还影响了组合器库的设计（单子解析器组合器甚至在 Python 中找到了自己的方式）。

Moggi 的“A category-theoretic account of program modules”（1989 年）通常被认为将 monad 引入了有效计算的视野；Wadler 的工作（例如，“命令式函数式编程”（1993 年））将 monad 介绍为实用工具。

* * *

## 回答 #19

> 赞同：35
> 
> 时间：2009-01-12T15:21:56.620

**收缩包装软件**

1980 年以前，软件大多是专门编写的。如果你经营一家企业，并且想要计算机化，你通常会得到一台计算机、编译器和数据库，然后编写你自己的东西。商业软件通常是为了适应商业实践而编写的。这并不是说没有罐装软件（我在 1980 年之前使用 SPSS），但这不是常态，我看到的往往是基础设施和研究软件。

如今，您可以去电脑商店，在货架上找到经营小型企业所需的一切。它的设计并不是为了无缝地适应您过去的任何实践，但是一旦您学会或多或少地根据其工作流程工作，它就会很好地工作。大型企业比过去更接近于收缩包装，比如 SAP 和 PeopleSoft。

这不是一刀切，但在 1980 年之后，从昂贵的定制软件到低成本现成软件的转变非常明确，灵活性从软件转变为业务程序。

它还影响了软件的经济性。定制软件解决方案可以盈利，但无法扩展。您只能向一个客户收取这么多的费用，而您不能将同一个东西卖给多个客户。使用收缩包装软件，您可以销售大量相同的东西，从而在非常大的销售基础上分摊开发成本。（您确实必须提供支持，但这会扩展。只需将其视为销售软件的边际成本。）

从理论上讲，如果变革中有大赢家，就会有输家。到目前为止，软件业务一直在不断扩大，随着领域的商品化，其他领域也随之开放。这可能会在某个时候结束，中等天赋的开发人员会发现自己陷入了真正的困境，无法为大男孩工作并被市场挤出。（这可能发生在其他领域；我怀疑对会计师的需求比没有 QuickBooks 等的需求要小得多。）

* * *

## 回答 #20

> 赞同：34
> 
> 时间：2009-01-11T13:44:45.803

除了硬件创新之外，我倾向于发现太阳底下几乎没有新事物。大多数真正伟大的想法都可以追溯到像冯诺依曼和艾伦图灵这样的人。

如今，很多被贴上“技术”标签的东西实际上只是某人编写的程序或库，或者是用新的隐喻、首字母缩略词或品牌名称对旧想法的翻版。

* * *

## 回答 #21

> 赞同：32
> 
> 时间：2009-01-11T16:46:36.577

**上世纪八十年代初，施乐帕洛阿尔托研究中心对**计算机蠕虫进行了研究。****

 **摘自 John Shoch 和 Jon Hupp 的[**“蠕虫”程序 - 分布式计算的早期体验**](http://vx.netlux.org/lib/ajm01.html)”（Communications of the ACM，1982 年 3 月，第 25 卷第 3 期，pp.172-180，1982 年 3 月）：

> 在[Shockwave Rider](https://rads.stackoverflow.com/amzn/click/com/0345467175)中，[J. Brunner](http://en.wikipedia.org/wiki/John_Brunner_(novelist)) 提出了一个无所不能的“绦虫”程序在计算机网络中运行的概念——这个想法可能看起来相当令人不安，但也远远超出了我们目前的能力。然而，基本模型仍然是一个非常具有挑战性的模型：一个程序或计算可以在机器之间移动，根据需要利用资源，并在必要时自我复制。
> 
> 同样，我们曾经描述过一个基于经典科幻电影*[The Blob的计算模型](http://www.imdb.com/title/tt0051418/)*：一个开始在一台机器上运行的程序，但随着它对计算周期的需求增长，它可以伸出手，找到未使用的机器，并增长到包含这些资源。在半夜，这样的程序可以在一栋楼里调动数百台机器；早上，当用户回收他们的机器时，“blob”必须有条不紊地撤退，收集计算的中间结果。白天呆在一两台机器上，程序可能会在资源可用后再次出现，再次扩展计算。（这种对夜间探索的喜爱使一位研究人员将这些描述为“吸血鬼计划”。）

*引用 Alan Kay 的话：“预测未来的最好方法是发明它。”*

* * *

## 回答 #22

> 赞同：31
> 
> 时间：2009-01-11T23:10:17.067

**更好的用户界面。**

今天的用户界面仍然很糟糕。我指的不是小方面，而是大的、基本的方面。我不禁注意到，即使是最好的程序仍然具有极其复杂的接口，或者需要以其他方式进行大量抽象思考，而且这些接口无法达到传统非软件工具的易用性。

当然，这是因为软件允许做的事情比传统工具多得多*。*不过，这不是接受现状的理由。此外，大多数软件都做得不好。

总的来说，应用程序仍然缺乏某种“只管工作”的感觉，过于注重能做什么，而不是*应*该做什么。有一个问题被一再提出，但仍未解决，那就是拯救的问题。应用程序崩溃，破坏工作时间。我有每隔几秒按一次 Ctrl+S 的习惯（当然，这不再适用于 Web 应用程序）。为什么我必须这样做？真是愚蠢至极。这显然是自动化的任务。当然，应用程序还必须为我所做的*每一次*修改（基本上是一个无限的撤消列表）保存一个差异，以防我出错。

解决这个问题其实并不难。很难在*每个*应用程序中实现它，因为没有好的 API 可以做到这一点。编程工具和库必须显着改进，然后才能在所有平台和程序上轻松实现此类工作，适用于具有任意备份存储且无需用户交互的所有文件格式。但在我们最终开始编写“好”应用程序之前，这是一个必要的步骤，而不仅仅是足够的应用程序。

我相信苹果目前在某些方面最接近“正常工作”的感觉。以他们最新版本的 iPhoto 为例，它具有面部识别功能，可以自动按出现在照片中的人对照片进行分组。*这*是用户*不想*手动完成的经典任务，也不*明白*为什么计算机不能自动完成。甚至 iPhoto 距离一个好的用户界面还有很长的路要走，因为上述功能仍然需要用户最终确认（对于每张照片！），因为人脸识别引擎并不完美。

* * *

## 回答 #23

> 赞同：30
> 
> 时间：2009-01-11T14:25:18.717

HTM 系统（[分层时间记忆](http://en.wikipedia.org/wiki/Hierarchical_temporal_memory)）。

一种新的人工智能方法，由杰夫霍金斯通过“论[智能](http://www.onintelligence.org/)”一书发起。

现在作为一家名为[Numenta](http://www.numenta.com/)的公司活跃起来，通过开发“真正的”人工智能来检验这些想法，并邀请社区通过 SDK 使用该系统来参与。

它更多的是从头开始构建机器智能，而不是试图模仿人类推理。

* * *

## 回答 #24

> 赞同：26
> 
> 时间：2009-01-11T19:15:12.330

**在人机交互**中使用物理来提供一种替代的、可理解的隐喻。这与手势和触觉相结合可能会取代 70 年代发明并自 80 年代中后期以来普遍使用的当前常见 GUI 隐喻。

1980 年还没有计算能力使这成为可能。我相信[游戏](http://www.gamasutra.com/view/feature/2798/physics_in_games_a_new_gameplay_.php)很可能在这方面起到了引领作用。在 iPod Touch/iPhone 中的列表滚动交互中可以很容易地看到一个示例。交互机制依赖于对现实世界中动量和摩擦如何工作的直觉，以提供一种滚动项目列表的简单方法，而可用性依赖于引起滚动的物理手势。

* * *

## 回答 #25

> 赞同：25
> 
> 时间：2009-01-11T21:32:34.173

手机。

虽然第一个“无线电话”专利是在 1908 年，而且他们煮了很长时间（1945 年 0G，1979 年在日本推出 1G），但直到 1991 年才出现现代 2G 数字手机。短信不存在直到 1993 年，互联网接入出现在 1999 年。

* * *

## 回答 #26

> 赞同：25
> 
> 时间：2009-01-11T13:33:23.813

我相信单元测试、TDD 和持续集成是 1980 年之后的重大发明。

* * *

## 回答 #27

> 赞同：23
> 
> 时间：2009-01-11T15:13:40.303

我于 1980 年 1 月 2 日开始编程。我试图在我的职业生涯中思考重大的新发明。我很难想出任何一个。我认为重要的大部分实际上是在 1980 年之前发明的，但直到之后才被广泛采用或改进。

1.  图形用户界面。
2.  快速处理。
3.  大内存（我在 1980 年为 16k 支付了 200.00 美元）。
4.  小尺寸 - 手机、掌上电脑、iPhone、上网本。
5.  存储容量大。（我已经从携带一张 90k 的大软盘变成了一个 8 gig 的 USB 拇指驱动器。
6.  多个处理器。（现在几乎我所有的电脑都不止一台，软件很难让它们保持忙碌）。
7.  标准接口（如 USB），可轻松连接硬件外围设备。
8.  多点触控显示器。
9.  网络连接 - 导致 90 年代中期的互联网爆炸式增长。
10.  带有 Intellisense 和增量编译的 IDE。

虽然硬件已经有了很大的改进，但软件行业一直在努力跟上。我们比 1980 年早了好几年，但大多数改进都是改进而不是发明。自 1980 年以来，我们一直忙于应用这些进步让我们做的事情，而不是发明。大多数这些渐进式发明本身并不重要或强大，但当你回顾过去的 29 年时，它们是相当强大的。

我们可能需要接受增量改进并引导它们。我相信真正原创的想法可能来自很少接触计算机的人，而且越来越难找到。

* * *

## 回答 #28

> 赞同：22
> 
> 时间：2009-01-11T19:08:02.937

没有什么。

我认为这是因为人们改变了他们的态度。人们曾经相信，如果他们能找到那个“大创意”，那么他们就会一夜暴富。今天，人们相信，最有价值的是执行而不是发现。您有诸如“想法一毛钱”和“第二只老鼠得到奶酪”之类的口头禅。因此，人们专注于利用现有的想法，而不是提出新的想法。

* * *

## 回答 #29

> 赞同：16
> 
> 时间：2009-01-11T14:13:21.223

开源社区发展。

* * *

## 回答 #30

> 赞同：16
> 
> 时间：2010-04-11T20:56:35.747

[iPad](http://en.wikipedia.org/wiki/IPad) （2010年4 月发布）：这样的概念*绝对*是革命性的！

[替代文字 http://www.ubergizmo.com/photos/2010/1/apple-ipad//apple-ipad-05.JPG](http://www.ubergizmo.com/photos/2010/1/apple-ipad//apple-ipad-05.JPG)

Alan Kay 绝不会从 1970 年代看到*这一点！*
想象一下这样一个“个人的、便携的信息操纵器”……

* * *

...

等待？什么！？你说的[Dynabook](http://en.wikipedia.org/wiki/Dynabook)？

![替代文字](https://upload.wikimedia.org/wikipedia/en/1/12/Dynabook.png)

Alan Kay 早在 1968 年就提出了想法，并[在 1972 年的这篇论文中进行了详细描述](http://www.mprove.de/diplom/gui/Kay72a.pdf)？？

不不不不不不不不不不不不不不不不不[……]

哦，好吧……没关系。

* * *

## 回答 #31

> 赞同：15
> 
> 时间：2009-01-11T18:41:07.750

自 1980 年以来， 围绕**社交计算**的想法取得了进展[。The Well](http://en.wikipedia.org/wiki/The_WELL)始于 1985 年。虽然我确信之前有在线社区，但我相信该领域的一些真正见解发生在 1980 年后。社交社区的不利动态方面他们在软件系统上的交互很像[塔科马海峡大桥](http://en.wikipedia.org/wiki/Tacoma_Bridge)的灾难。

我认为[**Clay Shirky**](http://www.shirky.com/)在该领域的工作阐明了这些影响以及如何减轻它们。我想说社交软件洞察力的有趣现实世界示例包括[reCAPTCHA](http://en.wikipedia.org/wiki/ReCAPTCHA)和[Wikipedia](http://en.wikipedia.org)等，其中重要的有价值的工作由软件介导的参与者完成。

* * *

## 回答 #32

> 赞同：14
> 
> 时间：2009-01-12T00:29:13.927

我认为自 1980 年代以来发明的最佳创意将是我们不知道的创意。要么是因为它们太小而且无处不在以至于不引人注意，要么是因为它们的受欢迎程度还没有真正起飞。

前者的一个示例是**单击并拖动以选择文本的一部分**。我相信这在 1984 年首次出现在 Macintosh 上。在此之前，您有单独的按钮来选择选择的开头和选择的结尾。相当繁琐。

后者的一个例子是（可能是）**可视化编程语言**。我说的不是超级卡，我的意思是 Max/MSP、Prograph、Quartz Composer、雅虎管道等。目前它们确实是小众，但我认为，真的没有什么能阻止它们成为作为一种标准的编程语言，表达力和功能强大，除了mindshare。

可视化编程语言有效地执行了引用透明的函数式编程范式。对于代码来说，这是一个非常有用的属性。他们执行这一点的方式也不是人为的——这只是凭借他们使用的隐喻。

VPL 让那些原本无法编程的人也可以进行编程，例如有语言障碍的人，如阅读障碍，甚至只是需要节省时间的外行。专业的程序员可能会对此嗤之以鼻，但我个人认为，如果编程成为一种真正无处不在的技能，就像识字一样，那就太好了。

就目前而言，VPL 确实是一种利基兴趣，并没有真正成为主流。

**我们应该做的不同**

所有计算机科学专业的学生都应该被要求双专业——**将 CS 专业与其中一门人文学科相结合**。绘画、文学、设计、心理学、历史、英语等等。很多问题在于，这个行业的人对世界的理解非常狭隘和缺乏想象力，因此无法开始想象一台计算机的工作方式与现在有什么明显不同。（如果有帮助，你可以想象我说的是你以外的人，读这篇文章的人。）数学很棒，但最终它只是实现目标的工具。**我们需要了解创造力本质的专家，他们也了解技术**。

但即使我们拥有它们，也需要有一个环境，在这个环境中，做一些新的事情可能值得冒险。**任何真正新的东西被一概而论地拒绝的**可能性要高出 100 倍。（*牛顿*就是一个例子）。**所以我们需要对失败有更高的容忍度**。我们不应该害怕尝试过去失败的想法。我们不应该完全拒绝我们自己的失败——我们应该学会承认我们什么时候失败了。我们不应该将失败视为一件坏事，因此我们不应该对自己或他人撒谎。我们应该习惯它，因为它几乎是这个不断变化的行业中唯一不变的。**事后**分析在这方面很有用。

我认为关于 smalltalk 的更有趣的事情之一不是语言本身，而是用于设计 smalltalk 的过程。迭代的设计过程，经历了很多次的修改——但也非常仔细和批判性地识别现有系统的缺陷，并在下一个系统中找到解决方案。视角越多，对形势的视角越广，我们就能更好地判断错误和问题在哪里。所以不要只学习计算机科学。尽可能多地学习其他学科，让自己感兴趣。

* * *

## 回答 #33

> 赞同：14
> 
> 时间：2009-01-20T12:17:18.163

当然，1980 年前的日子是施乐 PARC 的辉煌岁月。回到 GUI、鼠标、激光打印机、互联网和个人计算机都被创建的时候。（考虑到我当时还太年轻，还没有活到现在，而且你几乎一直在努力发明所有这些，我不能告诉你关于 1980 年的任何你还不知道的事情，所以让我们继续吧。）

*但问题是，就*真正具有颠覆性的新技术而言， 1980 年前的日子要活跃得多。任何新领域都是如此——在过去的 100 年里，您在铁路领域看到了多少改变游戏规则的技术进步？你在灯泡里见过多少？在印刷机上？一旦某件事在正确的圈子里引起了轰动，就会有一个发明的爆发期，然后是一个长期的成熟期。在那之后，除非基本情况发生变化，否则您将不会再看到同样的彻底彻底的变化。

幸运的是，这可能发生在许多领域，并且已经发生在其他几个领域：

*   移动性——智能手机将计算带入一个真正的便携平台，该平台很快将包括基于位置的服务和基于邻近的自组织网络。这是一种全新的范式，可能会像 GUI 一样改变游戏规则

*   WWW（HTTP、HTML 和 DNS）已经被提及并且显然是列表中的一个补充，因为它在全球范围内实现了全球、廉价、主流的丰富通信——这一切都归功于一个计算平台

*   在界面方面，触控、多点触控（想到 Jeff Han）和 Wiimote 都需要提及。目前，它们基本上是好奇心，但早期的 GUI 也是如此。

*   OOP 设计模式——作为解决难题的最佳实践的更高级别的解决方案。根据您对“计算”的定义，它可能属于也可能不属于列表，但如果您将 OOP 视为 1980 年前的一项重大进步（我当然这样做），我认为设计模式和 GoF 也值得一提

*   Google 的 PageRank 和 MapReduce 算法——我很高兴地注意到我不是第一个提到它们的人，而且说真的——如果没有它们的原理，世界会怎样？我清楚地记得他们面前的世界是什么样子，只要说谷歌真的是我的朋友就足够了。

*   非易失性内存——它在硬件方面，但它将在未来的计算中发挥重要作用——例如，使启动时间成为过去，使我们能够以全新的方式使用计算机

*   语义（自然语言）搜索/分析/分类/翻译......我们还没有完全做到，但像 Powerset 这样的公司给人的印象是我们正处于濒临灭绝的边缘。

*   在这一点上，智能 HTM 也应该在此列表中。我是杰夫霍金斯模型和方法的另一个信徒，如果它有效，它将意味着对计算机可以做什么、人类意味着什么以及世界可以从这里走向何方的完全重新定义。以这种方式（综合地）创造真正的智能*将比*人类以前所做的任何事情都要大。

*   GNU + Linux

*   3D 打印/快速原型制作（以及及时的制造）

*   P2P（这也导致了 VoIP 等）

*   电子墨水，一旦技术成熟一点

*   RFID 可能属于清单，但该清单仍未定论

*   量子计算是列表中最明显的元素，但我们仍然无法获得足够的量子比特来发挥作用。然而，我在该领域的朋友告诉我，即使在我们说话的时候，也有令人难以置信的进步，所以我屏住呼吸。

*   最后，我想提一下个人最喜欢的一个：分布式智能，或者它的另一个名字：人工智能。在网络中连接大量人员并允许他们通过某种形式的问答界面访问其他所有人的综合思想的想法。最近已经做过很多次了，雅虎问答、Askville、亚马逊机械土耳其人等等，但在我看来，这些都错过了很多……就像分布式超文本的许多实现一样在 Tim Berners-Lee 的 HTML 之前，或者在 Google 之前的许多网络爬虫之前。说真的 - 有人需要在“蜂巢思维”中构建一个搜索界面，以将其他所有人从水中吹走。恕我直言 - 这只是时间问题。

* * *

## 回答 #34

> 赞同：14
> 
> 时间：2009-04-18T18:57:52.370

我们需要的是重组，而不是重新发明。

我们拥有我们现在需要的所有硬件和软件组件，可以在未来几年内完成令人惊奇的事情。

我相信科学界有一种疾病，参与者总是试图发明一些新东西来使自己与他人区分开来。这与做一些杂乱无章的编目工作或教授旧作品形成鲜明对比。

建造“新”东西的人通常被认为比重复使用现有作品和几乎古老作品的人具有更高的血统。（古老的说法是一个 20 岁的人，说 Lisp 之类的东西在过去是他们寿命的两倍多。1958 年）

好的旧想法需要复活并广泛传播，我们需要停止尝试建立有效地践踏旧作品和系统的企业或程序员运动，以成为下一个新事物——事实上，大多数“新闪亮” '事情只是旧观念复活的一个方面。

* * *

## 回答 #35

> 赞同：12
> 
> 时间：2009-01-11T14:23:40.717

有效的并行化和量子计算——我认为这两个领域已经取得了进展，并且将会取得更多进展，以对我们对计算能力的使用做出非常重大的改变。

有效的并行化意味着并行化和分布式处理，而不需要特殊的编程技术，但它内置在编译器/框架中。

* * *

## 回答 #36

> 赞同：12
> 
> 时间：2009-01-12T04:11:27.177

飞行汽车和气垫板。哦，等等，那些还没有被发明出来。但到 2015 年，我们必须拥有它们。否则回到未来 2 将是一个天大的谎言！

* * *

## 回答 #37

> 赞同：12
> 
> 时间：2010-05-30T00:17:45.677

在主流计算中*没有*改变的一件事是分层文件系统。真可惜，IMO，因为在 1980 年代后期和 1990 年代，有人在设计新的文件系统，这些文件系统更适合现代的、面向对象的操作系统——从头开始就是面向对象的操作系统。

OO 操作系统倾向于具有可扩展且灵活的平面对象存储。我认为[EROS 项目](http://www.eros-os.org/design-notes/DiskFormatting.html)就是围绕这个想法建立的。[PenPoint OS](http://en.wikipedia.org/wiki/PenPoint_OS)是 1990 年代面向对象的操作系统；[Amazon S3](http://aws.amazon.com/s3/)当然是现代的平面对象存储。

我特别喜欢 OO 平面文件系统中的至少两个想法：

*   整个磁盘本质上是交换空间。对象存在于内存中，在不需要时被分页，在需要时被带回。不需要与虚拟内存分开的分层文件系统。从某种意义上说，程序“一直在运行”。

*   平面文件/对象存储允许对内容进行索引和搜索，而不是强迫用户提前决定内容相对于其他内容的位置以及名称应该是什么。可以在平面存储之上构建分层系统，但这不是必需的。

正如 Alan Cooper 在他的书[About Face](https://rads.stackoverflow.com/amzn/click/com/1568843224)中所说，分层文件系统是一个杂物，专为 1960 年代和 1970 年代内存和磁盘存储有限的计算机而设计。可悲的是，Windows 和 Unix 的流行已经保证了分层文件系统的主导地位直到今天。

* * *

## 回答 #38

> 赞同：10
> 
> 时间：2010-07-08T10:32:44.003

现代 3D 计算机图形学中几乎所有重要的东西。光线追踪（在计算图形的意义上）从 Whitted 1980 年的论文开始。Marching cubes ('87) 是从 3D 数据中提取等值面的标准方法。

* * *

## 回答 #39

> 赞同：9
> 
> 时间：2009-01-19T15:44:29.650

在虚拟世界中，您由虚拟的另一个自我（又名 Avatar）代表，用于社交和角色扮演。

最常被称为 MMO - Massive(ly) Multiplayer Online。一些流行的例子包括魔兽世界、无尽的任务、第二人生。

PS：不，他们仍然不需要像 80 年代极客电影中通常描述的那样沉重的头饰。这是一个耻辱....

* * *

## 回答 #40

> 赞同：8
> 
> 时间：2009-01-19T17:03:36.400

用于人机交互的触摸屏和运动感应界面。

例如：

*   PDA、iPhone 或 Nintendo DS 的触摸屏
*   运动感应、Nintendo Wii 控制器或（在较小程度上）用于 Playstation 3 的 SixAxis 控制器。

唯一的问题是……这些技术真的是80后吗？

* * *

## 回答 #41

> 赞同：8
> 
> 时间：2009-02-17T22:38:03.917

[比特流](http://en.wikipedia.org/wiki/BitTorrent_%28protocol%29)。

* * *

## 回答 #42

> 赞同：7
> 
> 时间：2009-01-20T22:33:16.423

光学计算。似乎它应该存在更长时间，但我目前找不到任何早于 1982 年左右的参考资料（相关的技术，光学晶体管，直到 1986 年才出现）。

* * *

## 回答 #43

> 赞同：7
> 
> 时间：2009-01-11T21:59:16.850

至于编程概念，1988 年的 IoC / Dependancy injection 起源于 1983 年。Fowler 在他的[Bliki](http://martinfowler.com/bliki/InversionOfControl.html)上有一些关于这个概念的历史的注释。

* * *

## 回答 #44

> 赞同：7
> 
> 时间：2009-01-19T16:14:36.937

# 前提：自 1980 年以来几乎没有新发明。

首先要做的是定义[发明](http://dictionary.reference.com/browse/invention)，否则你会走上歧途。Dictionary.com对*发明*的第二个定义说：

> *美国专利法。*一种新的、有用的过程、机器、改进等，以前不存在，被认为是某种独特的直觉或天才的产物，有别于普通的机械技能或工艺。

因此，自 1980 年以来，计算领域的**新发明**很少。发生了什么？显然已经出现了大量的新技术和新事物，但它们是什么？

我们不再进行发明，我们正在*改进*主要已经存在的东西。

## 一个简单的例子：

CD 或光盘最初是在 1977 年开始生产的，但直到 1982 年才被工业界接受。此时第一家 CD 压片厂刚刚准备就绪。最终，到 1985 年，CD-ROM（只读存储器）被接受为一种介质。5 年后，CD-RW 出现了。（来源：[维基百科](http://en.wikipedia.org/wiki/Compact_Disk#History)）

怎么办？好吧，鉴于我们拥有更大的硬盘驱动器（仍然只是改进了范例），我们需要更多的空间来取代 VHS 市场并使视频与计算机兼容。DVD 就这样诞生了，尽管我对现有的 CD 技术进行了许多改进。

DVD 诞生于 1995 年，是“发明”的。（来源：[维基百科](http://en.wikipedia.org/wiki/DVD#History)）

从那时起，我们有：

1.  可写和可重写 DVD
2.  双层 DVD
3.  三层和四层 DVD（未发布，但通过简单的驱动程序修订可行）
4.  高清DVD
5.  蓝光光盘

显然，这份清单并非包罗万象。但是发现新发明，记住我在上面给出的定义，在那个列表中。你不能！它们都只是光盘概念的变体，都只是相同硬件的变体，并且都只是现有软件的变体。

## 为什么？

成本。看，对现有产品进行增量改进在经济上更便宜。如果我可以卖给你一张 HD DVD 或蓝光光盘，因为你*认为*它是必要的或很酷的，那么我不需要发布我的三层或四层 DVD 的计划。事实上，我可以通过鼻子向你收费只是为了获得新技术，因为你是早期采用者，你需要我的“新的和改进的！” 硬件。

这称为营销或产品关系。

## 但是软件呢？

怎么样？1980 年之前有很多软件发明，但从那以后，它主要是对已经存在的东西进行改进或重新发明轮子。查看任何操作系统或办公软件包以了解这一点。

## 结论

就我而言，在过去的 29 年里，几乎没有任何新发明出现。我可以走很长的路，跨越很多行业，但我为什么要打扰呢？一旦您开始考虑它，并开始将“发明”与先前的类似产品进行比较……您会发现它是如此相似以至于它甚至都不好笑。甚至*内燃机*自 1906 年以来就已经问世，此后在该领域没有任何新发明。这个“轮子”的许多改进和变化是的，但没有**新**发明。

甚至美国在伊拉克部署的那种新武器——使用微波让人感到震惊，就像他们触摸了灯泡一样——也不是新的。同样的想法被用于安全系统，然后被分类并从市场上撤下，用超声波让入侵者感到身体不适。这是武器的定向形式，具有不同的波长和应用，而不是新发明。

* * *

## 回答 #45

> 赞同：7
> 
> 时间：2009-01-12T20:18:06.540

访问海量数据。

与 80 年代的数据相比，我们现在可用数据的庞大规模和规模是巨大的。我们必须对硬件和软件进行大量更改才能存储和显示这些东西。有一天，我们实际上将学习如何获得资格并挖掘它以获得有用的东西。总有一天。

保罗。

* * *

## 回答 #46

> 赞同：7
> 
> 时间：2009-01-19T17:12:11.500

电可擦可编程存储器，一般化为非易失性读/写存储器，目前最广为人知和普遍存在的是闪存。 [http://en.wikipedia.org/wiki/EEPROM](http://en.wikipedia.org/wiki/EEPROM)将其列为 1984 年发明的。

通过为存储介质提供与处理单元相同的一般物理特性、功率要求、尺寸和稳定性，我们将其作为我们放置处理器的设计中的限制因素消除了。这扩大了我们如何以及在何处将“智能”放置到如此多的智能设备（以及以前根本不会被认为是智能的东西）的可能性，以至于我们仍然被激增所吸引。Mp3 播放器实际上只是其中的一小部分。

* * *

## 回答 #47

> 赞同：7
> 
> 时间：2009-11-03T22:05:17.310

好吧，万维网已经被告知，但更基本上，我会说“DNS”。似乎它是在 1983 年发明的（[http://en.wikipedia.org/wiki/Domain_Name_System](http://en.wikipedia.org/wiki/Domain_Name_System)），恕我直言，我们可以认为它是互联网协议的发明与在世界范围内传播现在的能力之间的强制性联系称为网络。

仍然在“网络”部分，我会添加 WIFI。它是在 90 年代发明的（但我同意它并不完全是“计算”，而是与硬件更相关）。

在更严格的“算法”部分，我想到了涡轮码（1993 年）；有人说它只是关闭了香农信号理论定义的极限，但这个论点难道不会拒绝所有其他关于“洛夫莱斯、巴贝奇和图灵著作中的一切都已经在种子中”的答案吗？

在密码学领域，我会添加 P.Zimmermann 的 PGP 程序（日期为 1991 年），它为公民带来了一个相当强大的（当时）免费加密程序，并有助于动摇政府对加密的态度。事实上，我认为这是密码学“自由化”的因素之一，这是发展电子商务的先决条件。

* * *

## 回答 #48

> 赞同：6
> 
> 时间：2009-01-12T06:56:52.133

[Instant Messaging](http://en.wikipedia.org/wiki/Instant_messaging)已经存在了很长时间（60 年代中后期），但[IRC](http://en.wikipedia.org/wiki/IRC)直到 1988 年才出现。

~~视频通讯~~，最重要的是，（例如，[Windows Live Messenger](http://en.wikipedia.org/wiki/Windows_Live_Messenger)或 Skype，或...）确实[改变了我们交流的方式](https://stackoverflow.com/questions/287764#287776)；）~~并且是最近的。~~

* * *

**<更正>**
（参见[VideoConferencing: 1968](http://www.answers.com/topic/videoconferencing#History)，[替代文本 http://wpcontent.answers.com/wikipedia/en/thumb/6/64/On_Line_System_Videoconferencing_FJCC_1968.jpg/180px-On_Line_System_Videoconferencing_FJCC_1968.jpg](http://wpcontent.answers.com/wikipedia/en/thumb/6/64/On_Line_System_Videoconferencing_FJCC_1968.jpg/180px-On_Line_System_Videoconferencing_FJCC_1968.jpg)，正如 Alan Kay*本人*在评论中指出的那样：

> 再次，请查看[**Engelbart 在 1968 年演示的**](http://www.bootstrap.org/chronicle/pix/pix.html#2D)内容（包括实时视频聊天和屏幕共享）。**IOW，猜测确实不如查资料**。这就是为什么大多数人对事物的发明时间做出薄弱的假设的原因。）

把它当面看待；），这是理所当然的*。*

注意：那个时代的“网络摄像头”（视频设置）并不完全适合您的普通客厅；）

![](https://i.stack.imgur.com/7Nyi7.jpg)

**</更正>**

* * *

[...恢复答案：]

[网络摄像头](http://www.answers.com/topic/web-cam#History) [替代文本 http://wpcontent.answers.com/wikipedia/commons/thumb/c/c5/Logitech_Quickcam_Pro_4000.jpg/180px-Logitech_Quickcam_Pro_4000.jpg](http://wpcontent.answers.com/wikipedia/commons/thumb/c/c5/Logitech_Quickcam_Pro_4000.jpg/180px-Logitech_Quickcam_Pro_4000.jpg)的推广也有帮助（始于 1991 年，第一台这样的相机，称为 CoffeeCam ，被指着剑桥大学计算机科学系的木马房咖啡壶）。

所以： 1980 年后：三分之二：IRC 和网络摄像头。

* * *

## 回答 #49

> 赞同：6
> 
> 时间：2009-02-14T18:37:35.907

The memristor.

While the idea is not newer than 1980, I believe a working model was not created until 2008\. Should it make it past R&D, it will be the most significant advance in computer hardware since the transistor; at the very least, obviating secondary memory.

* * *

## 回答 #50

> 赞同：6
> 
> 时间：2009-01-11T22:05:47.197

我认为笔记本电脑是在 1980 年左右发明的，我还认为笔记本电脑和便携式计算的发展改变了很多人的生活——尤其是我们这些从事 IT 工作的人，或者使用电脑和旅行的人。

* * *

## 回答 #51

> 赞同：6
> 
> 时间：2009-01-11T22:11:47.870

我想说最大的趋势是越来越缺乏位置依赖性和普遍性。这些天来，一个有趣的哲学练习是计算您附近区域的计算机。它们无处不在，台式机、键盘、微波炉、收音机、电视、手机等……我祖母的电脑是文盲，但她的生活和其他人一样充斥着小型电脑。她可以在空地中间给我打电话。然后我可以在高速公路上接听电话。

* * *

## 回答 #52

> 赞同：6
> 
> 时间：2009-02-11T16:47:27.553

“美国人没有过去也没有未来，他们生活在一个扩展的现在。” 这描述了计算的状态。我们生活在 80 年代延伸到 21 世纪。唯一改变的是尺寸。艾伦·凯

资料来源： [Alan Kay：计算机科学是矛盾的吗？](http://www.windley.com/archives/2006/02/alan_kay_is_com.shtml)

* * *

## 回答 #53

> 赞同：6
> 
> 时间：2009-01-11T13:52:50.420

基础设施的变化，以允许从家庭和办公室访问互联网。

从 W3C 到 API 的文档化和公认标准

除此之外，大多数我们认为是新的东西的历史都比你想象的要长得多（例如 GUI、OOP）。

* * *

## 回答 #54

> 赞同：6
> 
> 时间：2009-01-12T01:48:32.490

**声明式编程**。

1979 年，“计算机程序”势在必行。程序员应该指导编译器做*什么*和*怎么*做。(N1)

今天，[ASP.NET WebForms](http://msdn.microsoft.com/en-us/library/ms973868.aspx)和[WPF](http://msdn.microsoft.com/en-us/netframework/aa663326.aspx)程序员经常编写代码，而不知道或关心*如何*实现它。[维基百科](http://en.wikipedia.org/wiki/Declarative_programming)还有其他不太主流的例子。此外，所有源自[SGML](http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=16387)的“标记”语言都是声明性的，我怀疑 1979 年的许多程序员会预测它们在 30 年内的重要性或普遍性。

尽管声明式编程的*概念*在 1980 年之前就已经存在（参见1975 年的[这篇论文），但它的](http://portal.acm.org/citation.cfm?doid=953064.811138)*发明*是在 1985 年引入[Caml](http://caml.inria.fr/) （有争议）或1990 年引入[Haskell （争议较少）时发生的。](http://www.haskell.org/)(N2) 从那时起，声明式编程的流行度大大提高。而且，当大规模多核处理器最终到来时，我们都将*成为*声明式程序员。

--
*注释：*
（N1）我不能直接保证这一点，因为我是 1979 年的胎儿。
（N2）从其他答案来看，似乎人们将概念与发明混淆了。达芬奇设想了一架直升机，但不是他发明的。这个问题专门针对计算方面的*发明*。
（N3）请不要在评论中提及 Prolog（rel. 1975），除非您实际上已经在其中构建了一个应用程序。

* * *

## 回答 #55

> 赞同：6
> 
> 时间：2009-01-12T04:45:20.667

播客 它允许一种信息丰富的方式来分发信息和辩论。我发现它比标准采访更具互动性，但噪音比博客评论少。

* * *

## 回答 #56

> 赞同：5
> 
> 时间：2009-01-11T21:47:20.323

> 我声称我们在大多数计算领域都需要真正的新想法，我想知道最近已经完成的任何重要且强大的想法。如果我们真的找不到它们，那么我们应该问“为什么？” 和“我们应该做什么？”

在我看来，我们在计算方面没有太多新想法，因为我们基本上不需要它们。我们一直在汲取旧观念，并从中得到很多，例如 CPU 速度的惊人增长。

当我们因为可以说“井已干涸”而*需要新的想法时，我们就会明白，必要性是发明之母。*

* * *

## 回答 #57

> 赞同：5
> 
> 时间：2009-01-11T21:57:29.273

我能想到的一项在 1980 年还没有的活动是跨不相交域的全球搜索。即谷歌和（极少数）前辈——所有这些都在 1980 年后。与句法标记的约定相关联，我认为它可以称为“新想法”；但我认为这也才刚刚开始；有很多开销空间可以建立。

一种有可能加速这个已经闪电般的速度向量的设备将很快成为相机/GIS/电话/网络的组合。它首次创造了在四维空间中自动收集、分类和聚合数据点的机会。甚至繁琐的手动收集此类数据也在萌芽。想象一下默认情况下何时完成。

无论好坏。

* * *

## 回答 #58

> 赞同：5
> 
> 时间：2009-01-14T00:46:49.273

使计算机科学更接近计算机工程的设计模式。GPS 和互联网地址查找，用于基于位置的交互。面向服务的架构 (SOA)。

* * *

## 回答 #59

> 赞同：5
> 
> 时间：2009-01-17T01:19:49.293

**开放式 PC 设计**带来了可负担的组件（Apple 除外 :-) 以及推动创新和降低价格的竞争。这导致了从*用户到电脑*——那里有一个终端可以使用——到*电脑来到用户*身边并出现在家里​​甚至一圈的巨大变化。

* * *

## 回答 #60

> 赞同：5
> 
> 时间：2009-02-04T04:13:40.240

IP 组播 (1991) 和 Van Jacobsen 的[传播网络](http://video.google.com/videoplay?docid=-6972678839686672840&hl=en)(2006) 是自 1989 年以来最大的发明。

* * *

## 回答 #61

> 赞同：5
> 
> 时间：2009-01-24T19:37:23.750

[有目的的游戏](http://www.gwap.com/)- 像 Luis von Ahn 和他的团队正在开发的集体智能工具在 1980 年之前可能是一个梦想，但是没有一个广泛部署的网络，有数百万人可用，并且需要（例如[reCAPTCHA](http://recaptcha.net/)）来真正实现它发生。

* * *

## 回答 #62

> 赞同：5
> 
> 时间：2010-03-03T13:49:22.707

**增强现实**。这还没有真正起飞，*但*随着想法的发展，我认为它是巨大的，从能够在地面上绘制虚拟箭头以帮助您找到目的地，到用有用的信息或审美幻想装饰您周围的一切。

想象一下你的电话在房间里响起，你看着它，它上面会弹出一个信息气泡，告诉你谁在打电话。那会有多酷？AR 将给我们思考和与技术交互的方式带来巨大的变化。

鬼屋可能也会变得更加可怕。

我还想提一下**脑机接口**[脑电图](http://en.wikipedia.org/wiki/Electroencephalography "脑电图")，但显然这是在 1970 年代首次发明的。

 *** * *

## 回答 #63

> 赞同：5
> 
> 时间：2010-07-14T07:16:24.947

[USB](http://en.wikipedia.org/wiki/Universal_Serial_Bus)

* * *

## 回答 #64

> 赞同：5
> 
> 时间：2009-05-07T16:46:26.210

这是一个负面结果，作为“基本创新”很奇怪，但我认为它适用，因为它开辟了新的研究领域，并关闭了无用的领域。

分布式共识的不可能性：[PODC 影响力论文奖：2001](http://www.podc.org/influential/2001.html)

> 我们假设我们不可能的结果的主要价值是关闭试图找到容错共识算法的非生产性研究。但令我们惊讶的是，它开辟了全新的研究领域。已经分析了对于不可能证明需要关于分布式系统模型的确切假设。已经发现了许多证明也适用的相关分布式问题，以及看似相似但确实有解决方案的问题。最终，开发了一系列研究，其中根据实现无等待容错共识的能力对原语进行分类。

* * *

## 回答 #65

> 赞同：5
> 
> 时间：2009-10-16T08:11:52.777

低成本/家庭计算。直到 1980 年代初才真正听说过一些东西（至少在 Blighty 中）。如果没有家庭计算，有多少人在这里发帖会以计算为职业？甚至作为一种爱好[1](http://en.wikipedia.org/wiki/ZX_Spectrum)？

我自己，如果我的家人在 1982/1983 年没有得到 Clive Sincliar 不起眼的橡胶键[ZX Spectrum](http://en.wikipedia.org/wiki/ZX_Spectrum)，我现在可能不会在这里。不仅仅是 Speecy：[C64](http://en.wikipedia.org/wiki/Commodore_64)、[Vic-20](http://en.wikipedia.org/wiki/Commodore_VIC-20)、[Acorn Electron](http://en.wikipedia.org/wiki/Acorn_Electron)、[BBC A/B/Master](http://en.wikipedia.org/wiki/BBC_Micro)、[Oric-1](http://en.wikipedia.org/wiki/Tangerine_Computer_Systems#Oric-1)、[Dragon-32](http://en.wikipedia.org/wiki/Dragon_32/64#System_software)等都推动了家用计算机市场，每 8 年就有程序员出局老男孩和女孩谁可以接触到一个。

如果那不是计算和编程方面的革命，我不知道是什么……！

[1](http://en.wikipedia.org/wiki/ZX_Spectrum)好奇：这个网站上的业余爱好者和专业程序员的分类是什么？我意识到这些统计数据没有经过整理，但可能会很有趣。

* * *

## 回答 #66

> 赞同：5
> 
> 时间：2010-06-25T14:00:20.543

虚拟化？
像 VirualBox OSE 或 VMWare 这样的应用程序为我节省了很多时间。

* * *

## 回答 #67

> 赞同：4
> 
> 时间：2009-02-11T16:27:27.010

奇异的开发风格（如Eric S Raymond的[http://www.catb.org/~esr/writings/cathedral-bazaar/cathedral-bazaar/中所述）。](http://www.catb.org/~esr/writings/cathedral-bazaar/cathedral-bazaar/)Raymond 将 Linus Tourvald 于 1991 年发布的 Linux 内核归功于 Bizarre 开发风格的首次使用。

* * *

## 回答 #68

> 赞同：4
> 
> 时间：2009-01-11T21:53:46.130

我也会提名 3D 鼠标。自 1990 年代初以来，存在多种变体。对于任何使用 3D 的人来说，[SpaceNavigator 之](http://www.3dconnexion.com/3dmouse/spacenavigator.php)类的东西让生活变得更加轻松。（免责声明：我与 3Dconnexion 没有任何关系，只是满意并且现在没有 RSI 用户。）

* * *

## 回答 #69

> 赞同：4
> 
> 时间：2010-10-09T06:24:57.643

也许科幻作家论坛会给你更多有趣的答案？;-)

我怀疑这里存在一些谬误，您将技术和科学的历史视为一种稳步前进的进步，一种线性现象。我怀疑这实际上是一个断断续续的过程，背景，经济学，偶然性和简单的随机性。

你应该感到幸运，你处于历史巨浪之一的中心，大多数人永远不会有这种经历。

* * *

## 回答 #70

> 赞同：4
> 
> 时间：2009-01-12T15:00:34.777

[Eclipse IDE](http://www.eclipse.org/)

为大众带来像 IDE 一样的 Smalltalk ;)

* * *

## 回答 #71

> 赞同：4
> 
> 时间：2009-01-11T13:54:21.667

采用面向对象。

这个想法很早就出现了（例如 Simula），但它在 1990 年代成为主流。（恕我直言，它最大的好处之一是为开发人员提供了一个通用的词汇表，因此它的广泛采用使其更有价值。）

* * *

## 回答 #72

> 赞同：4
> 
> 时间：2009-01-11T23:31:47.303

我相信没有发明任何重要的东西。但是**自 80 年代以来对软件的看法发生了很大变化**。当时有更多的理论家参与这件事，现在你在程序员“论坛”上问这个问题。

当时的大多数想法都没有得到实施，或者在实施时它们没有任何真正的重要性，因为软件行业不存在，也不存在营销、人力资源或开发阶段，或者 alpha 版本:)。

缺乏发明的另一个原因是大多数人使用 Windows :) 不要误会我的意思，我确实讨厌 M$，但是这样看：你有一个完美的工作界面，没有什么新东西可以添加，也许只是一些新的彩色按钮。它也足够封闭，因此您将无法在不破坏它的情况下使用它。这就是为什么我更喜欢开放应用程序的原因，这样你就可以得到更多“开放”的人，你可以与他们交谈，然后提出问题，提出实际实施的新想法，或者至少放在一个开放的待办事项列表上，这样你就得到了某种“进化”。您并没有真正看到任何新的东西，因为您被多年前“发明”的相同基本界面所困......有人真的在生产环境中尝试过 ION 窗口管理器吗？它有一种新的界面，

M$，Adobe ..您的名字，拥有许多专利，因此您将无法将您的工作基于它们或衍生产品（您也不会知道他们拥有什么样的未开发技术）。以 MP3 和 GIF 为例（我相信它们现在都是免费格式，但它们也有点死了..） MP3 是音频的“王者”，即使那里几乎没有比它更好的算法..但是没有得到足够的牵引力，因为它们没有被推向消费市场。GIF...来吧，256色？？？从这个观点来看，我很好奇这个线程中有多少人正在研究一些“开放”的东西，这些东西将在其他一些项目中被重用，有多少人在“关闭”，受 NDA 的项目保护？

即使这听起来有点“自由意志”有点像，早在 80 年代，软件是免费的，你有所有的文档，所有硬件都更简单，更容易使用......而且也更有限，所以人们实际上并没有浪费时间来实现 3d 游戏或网页，但在真正的算法上工作。

* * *

## 回答 #73

> 赞同：4
> 
> 时间：2010-03-06T12:55:30.697

USB Keys/拇指驱动器

USB Keys 是软盘的有效替代品，软盘在简单传输方面仍然优于 CD 或 DVD。

* * *

## 回答 #74

> 赞同：4
> 
> 时间：2010-06-12T02:50:46.187

我认为在过去的 50 年中，一项非常重要的计算发明是 GOOGLE。如果没有一个好的搜索工具，互联网就毫无意义。搜索引擎的出现彻底改变了互联网，并使其能够被小家伙货币化。

* * *

## 回答 #75

> 赞同：4
> 
> 时间：2009-02-06T18:58:30.793

第一台真正的多媒体个人计算机，Amiga：第一台 32 位抢占式多任务个人计算机，第一台具有硬件图形加速功能的计算机，第一台具有多声道声音的计算机，并且在许多方面比多核、多千兆赫兹的 Windows boxen 更有用、更强大今天激增。

* * *

## 回答 #76

> 赞同：4
> 
> 时间：2009-01-13T08:48:09.740

Ctrl-C + Ctrl-V + Ctrl-X 组合 :)

* * *

## 回答 #77

> 赞同：4
> 
> 时间：2009-10-14T23:52:40.020

具有社区支持的翻译软件可以进行手动更正和建议，然后使用 AI 机器人形成模式，最终区分和正确预测不同翻译和上下文中的歧义。

虽然确实[谷歌翻译](http://en.wikipedia.org/wiki/Google_Translate)可能不是那种野兽，但它是母亲，或者可能是等待开发的系统的祖母。

如果你想一想——文本语言确实是输入到大脑的，眼睛看到文本并将图像发送到大脑，然后将其转化为理解。

虽然其真正的交流（尤其是人类交流）是一个高级主题，但基础是输入（带有上下文）-> 翻译-> 理解。

为什么我们仍然没有真正好的方法向远方的同事或不会说我们语言的合作伙伴发送电子邮件？这显然是第一阶段。

一旦完成，我们就可以进行实时电话翻译等工作。

相反，月复一月，我们最大的智力资产都参与了其他更重要的项目，比如太空研究和流星探测，或者试图证明圣经是错误的（打哈欠）。

我们花更多的时间在基本的实际交流上怎么样？

* * *

## 回答 #78

> 赞同：4
> 
> 时间：2009-08-18T02:45:24.667

传感器网络：非常小的（纳米级）计算机形成自组织 p2p 网络并传输“感知”信息。

3D 打印：用于物理对象的星际迷航复制器（还没有早期灰茶）。

DNA 计算：针对某些类型问题的大规模并行计算。

* * *

## 回答 #79

> 赞同：4
> 
> 时间：2010-08-06T00:36:50.580

**增强现实**

现实世界的视图以某种方式与虚拟元素相结合。

虚拟现实一词是在 1989 年创造的，比“增强现实”一词早几年。

一些早期的支持技术是在 1980 年之前发明的，但这个概念本身可以追溯到九十年代初（至少维基百科是这么说的。）

[http://en.wikipedia.org/wiki/Augmented_reality#History](http://en.wikipedia.org/wiki/Augmented_reality#History)

* * *

## 回答 #80

> 赞同：4
> 
> 时间：2010-08-03T22:56:02.057

[RAID](http://www.cs.cmu.edu/~garth/RAIDpaper/Patterson88.pdf)（1988 年）。

可以说这只是过去几年纠错码的应用，但可以说计算机科学中的一切都可以简化为已经存在了数千年的基础数学。

* * *

## 回答 #81

> 赞同：4
> 
> 时间：2011-03-01T22:18:16.087

一些答案提到量子计算机，好像它们还很遥远，但我不敢苟同。

在 1970 年代和 1980 年代模糊地提到了量子计算机的可能性（参见[维基百科上的时间线](http://en.wikipedia.org/wiki/Timeline_of_quantum_computing)），但是第一台“工作”的 3 量子位核磁共振量子计算机是在 1998 年建成的。该领域仍处于起步阶段，几乎所有进展都还在理论上并仅限于学术界，但在 2007 年，名为 D-Wave Systems 的公司提出了一个工作 16 量子位的原型，并在当年晚些时候推出了 28 量子位绝热量子计算机。他们的努力是值得注意的，因为他们声称他们的技术在商业上是可行的和可扩展的。截至 2010 年，他们拥有 7 个钻机，他们当前一代的芯片有 128 个量子比特。他们似乎与谷歌合作，寻找有趣的问题来测试他们的硬件。

我推荐[这个 24 分钟的短视频](http://www.youtube.com/watch?v=56qR0iX5A4o)和关于 D-Wave 的[Wikipedia 文章](http://en.wikipedia.org/wiki/D-Wave_Systems)，以便快速浏览，在这个由 D-Wave 创始人和 CFO 撰写的[博客](http://dwave.wordpress.com/)上还有更多资源。

* * *

## 回答 #82

> 赞同：3
> 
> 时间：2009-01-16T13:38:08.587

过去 30 年来处理器速度的大幅提升不容忽视。各种巧妙的想法，如流水线和先发制人的分支，以及处理器设计电子方面的改进，意味着今天的程序员可以更多地担心程序的设计和可维护性，而不必担心计算时钟周期。

* * *

## 回答 #83

> 赞同：3
> 
> 时间：2009-01-11T17:28:52.623

回答一个稍微不同的问题。**我认为我们需要在隐私、信任和声誉**领域有大创意。我的计算机几乎可以捕捉关于我的所有信息，我在哪里，我说什么，我输入了什么，我看到了什么，......服务）我可能想与他们共享一些信息，即使它只是一条数据。

我的信息需要挖掘（不是 Google、Facebook 或 Apple 的）。我的计算机需要代表我使用它，因此信任需要是端到端的。然后我们可以去中介化新的信息中间人。

* * *

## 回答 #84

> 赞同：3
> 
> 时间：2009-01-11T20:02:42.903

（广泛）加密。如果没有加密，任何金融交易都不会发生。这仍然是一个可以使用更多创新和用户友好性的领域。

* * *

## 回答 #85

> 赞同：3
> 
> 时间：2010-05-25T17:46:18.750

我认为计算中的大多数概念大部分都在进行改进，但也有一些新的发展，特别是在分布式计算方面。

1.  对故障和背叛的鲁棒性，以及故障恢复，即。Paxos、拜占庭容错等
2.  我知道人们提到了 P2P，并且 P2P 通信发生在 70 年代，但恕我直言，我不认为它与今天常见的性质相同，分布式哈希表，高效的动态 ad-hoc 网络，最重要的是，匿名性（ala Freenet、Tor）。

大部分工作都经过改进，虽然许多现代系统比 60 年代或更早时首次描述的原始概念好不了多少，但有些好几个数量级。

* * *

## 回答 #86

> 赞同：3
> 
> 时间：2009-01-16T14:23:35.127

1.  鼠标 - 有关于人机交互的帖子。对我来说，鼠标是人类互动的门户。没有它，我们仍然会打字而不是点击拖动，即使是用我们的手指。

2.  GUI - 完美地赞美了鼠标。我在一个 as400 是我们主要应用程序之一的后端的环境中工作。是的.. 有趣的东西，但它让我想起了电影“硅谷海盗”中“比尔盖茨”正在使用的屏幕，尽管它不是那样的。对我来说，1 和 2 是任何人，包括爷爷奶奶都可以使用电脑的原因。

3.  Excel / 电子表格 - 之前有人提到过这一点，但它的工作再次提及。它非常用户友好，是非技术用户在对单元执行计算时尝试简单编程概念的绝佳切入点。当然，它是在 1980 年之前出现的，但 1980 年之后的版本是电子表格技术发展的时期。

4.  互联网（当然）——不知道没有它人们是如何编写代码的！不要因为我重复而激怒我，因为这属于每个列表。

5.  INTELLISENSE - 爱它爱它爱它！！！！

* * *

## 回答 #87

> 赞同：3
> 
> 时间：2009-01-11T16:38:35.080

不确定 1980 年，但几十年来，人工智能社区一直是创意的产生者，而且他们仍在努力。

* * *

## 回答 #88

> 赞同：3
> 
> 时间：2009-01-15T17:44:03.337

多代理系统。

你可以回到分布式人工智能的根源，我认为仍然安全地留在 80 年代的这一边。

多智能体系统有很多组件，有很多研究涉及言语行为或合作，因此很难指出并说“看，这里，这是不同的、创新的和重要的！” 但无论如何我都会尝试。:-)

我认为信念-欲望-意图模型特别值得注意。代理在内部构建了世界模型。他们有特定的愿望或目标，并制定计划如何与他们所知道的世界互动以实现这些目标，从而制定意图。

或者，打个比方，电影《创》中的角色对他们周围的世界是如何运作的有一定的了解。他们不了解整个世界，他们可能会误认为其中的一部分。但他们有愿望和目标，他们想出了计划来进一步实现这一目标。如果你看过 Tron，我相信你会明白这个比喻。

它对计算尚未产生太大影响。但是，看，对计算产生影响的事情似乎需要几十年的时间。请参阅：OOP、GC、字节码编译。

* * *

## 回答 #89

> 赞同：3
> 
> 时间：2010-08-24T01:54:03.703

我会说 CDMA 是/现在是 1980 年之后创建的一个重要且强大的新想法。

* * *

## 回答 #90

> 赞同：3
> 
> 时间：2011-02-10T18:37:35.723

[X.500](http://en.wikipedia.org/wiki/X.500)和 x.500 系列标准（大约 1988 年）。虽然 x.500 标准受到了几十年前的[电信标准](http://en.wikipedia.org/wiki/ITU-T)的启发，但它们意义重大，因为它们为广泛使用 LDAP/AD 和我们目前对 x.509 证书的咒语（仅举几例）铺平了道路。

* * *

## 回答 #91

> 赞同：3
> 
> 时间：2009-01-11T13:43:44.027

用于并行化的 MPI 和 PVM。

* * *

## 回答 #92

> 赞同：3
> 
> 时间：2009-01-11T14:07:10.890

在 OS 核心开发中使用函数式编程/语言。

* * *

## 回答 #93

> 赞同：3
> 
> 时间：2009-01-11T14:19:16.420

'Singularity'，以及所有类似的项目，即在托管代码中开发操作系统。

* * *

## 回答 #94

> 赞同：3
> 
> 时间：2010-09-06T09:06:15.707

c++ 编程语言 (1983) 模板元编程 (1994)

* * *

## 回答 #95

> 赞同：3
> 
> 时间：2009-02-13T17:08:04.320

将不同的编程范式成功集成到单一的编程环境中。

这个（对我来说）的例子是[Mozart/Oz 编程系统](http://mozart-oz.org)，它将功能、OO、逻辑、并发和分布式编程机制集成为一个连贯的整体。不过还有其他例子。

* * *

## 回答 #96

> 赞同：3
> 
> 时间：2010-01-04T08:12:52.937

游戏中运动传感器的兴起，它摒弃了传统的游戏操纵杆，让用户非常接近游戏本身。这与我们不断变化的城市景观和生活方式相得益彰，因为我们的体力活动有限。游戏的这种进步肯定会在做自己喜欢的事情时至少引起一些身体活动。这绝对比在你的健身房做同样平凡的代表要好。

* * *

## 回答 #97

> 赞同：2
> 
> 时间：2009-01-15T23:58:07.280

I think part of the problem with these answers is they are either not well researched or are attempting to a new implementation or some technology that has seen significant "improvements." However, this is not a significant invention. For instance, any talking about functional programming or object oriented programming just fails; most of these ideas have been circulating since before most of the participants of SO were born.

* * *

## 回答 #98

> 赞同：2
> 
> 时间：2009-01-13T20:51:17.673

我没有资格在一般意义上回答这个问题，但仅限于计算机编程？不多。

为什么？我一直在思考这个问题，我认为我们缺乏两件事：历史感和客观判断我们制作的一切的方法。这并非在所有情况下都是正确的，但在一般情况下是这样。

对于历史，我认为这只是通俗写作或计算机科学课程中没有得到足够重视的东西。以语言特征为例。一个规范的来源可能是 HOPL，但在程序员中，能够标记时间点或在哪种语言中首次出现像 GC 或闭包这样的特性绝对不是常识。当然，在那之后还有随着时间的推移而发展的知识：自 Simula 以来，OOP 发生了怎样的变化？将我们的历史感与政治学或哲学等其他领域的历史感进行比较和对比。

至于判断，这确实是我们寻求客观成功衡量标准的失败。给定 foobar，它以何种可衡量的方式改进了编程行为中的某些方面，其中 foobar 是设计模式、敏捷方法、TDD 等中的任何一种。我们甚至尝试过衡量这一点吗？我们甚至想要测量什么？正确性、程序员生产力、代码易读性等？如何？软件工程真的应该解决这些问题，但我还没有看到。

* * *

## 回答 #99

> 赞同：2
> 
> 时间：2009-02-16T09:21:53.793

In order to start thinking about this, I need a model for what "innovation" means.

The best model I've seen is The Technology Adoption Life Cycle. You can get an overview at this [Wikipedia Article](http://en.wikipedia.org/wiki/Technology_adoption_lifecycle).

Using this model, I began to ask myself... at what stage of the life cycle is software itself? We can think of "software" as a distinct technology from machinery going all the way back to Babbage, or perhaps more precisely, to Lady Ada Lovelace.

But it surely remained at the very early pioneering stage at least until about 1951\. That's the year programmed computers "went commercial" in terms of selling a model for a computer product, and building lots of units of that model. I'm thinking of the machine that Univac sold to the Census Bureau.

From 1951 to about 1985, software innovations were numerous. They mostly had to do with extending the span of computing to an ever wider field of endeavor. In parallel, mass marketing and mass production kept bringing the cost of entry down till the Apple and IBM-PC made a programmable device a commonplace appliance.

Somewhere between 1980 and 1985, I'd say that software passed from the Innovator's domain to the "Early majority" domain. Sorry, guys, but that makes all of you that participated in MS-DOS, the Mac, Windows, C++ and Java eraly majority rather than innovators. That doesn't preclude your having done significant innovation on your own turf and in your own projects. It just means that the field itself had moved on from the earliest stage.

While the Internet's precursor had been around since the 1970s, it wasn't until Al Gore invented the internet (sorry) that everybody hooked up. At that stage, software passed from the early majority to the late majority. This shift was subtle, as the top of the bell curve suggests. Not every shop moved from early majority to late majority at the same time.

I don't think software has quite passed into the "laggard" stage yet, but I think that real innovators are tackling the problem of producing progress on different fronts today.

Two fronts that I can think of are Bioengineering and Information Appliances. Both of these fields require software, but the main thrust is not software innovation. It's applying software to uncharted territory. There are probably lots of other fronts that I'm not even aware of.

* * *

## 回答 #100

> 赞同：2
> 
> 时间：2011-07-27T00:06:12.020

[比特币](http://en.wikipedia.org/wiki/Bitcoin)解决双花问题。它被用来创建去中心化的电子货币。一个名为[Namecoin](http://forum.bitcoin.org/?topic=6017.0)的变体使用相同的技术来构建分散的命名系统（类似于 DNS）。

过去曾尝试创建加密货币（这个想法肯定不是新的），但比特币似乎是第一个起飞的实现。其独特的 P2P 算法解决了双花问题，无需依赖任何可信任的权威。

* * *

## 回答 #101

> 赞同：2
> 
> 时间：2009-01-11T16:36:06.847

这是一个非常棘手的问题，因为除了硬件的可笑改进之外，在那之后几乎没有什么东西是非常积极的发明。尽管在 1980 年代之前有许多重要的发明只影响到人们，但现在因为它们在当时是不可行的。

见鬼。下降

* * *

## 回答 #102

> 赞同：2
> 
> 时间：2009-01-12T01:49:07.963

企业[服务总线](http://en.wikipedia.org/wiki/Enterprise_service_bus)似乎*是*一个相当新的“发明”，当然它是基于更老的技术。

* * *

## 回答 #103

> 赞同：2
> 
> 时间：2009-01-12T14:52:45.447

[Eclipse 内存分析器](http://www.eclipse.org/mat/)：

它使用[Lengauer-Tarjan 支配树算法](http://www.cl.cam.ac.uk/~mr10/lengtarj.pdf)进行内存使用分析。

* * *

## 回答 #104

> 赞同：2
> 
> 时间：2009-01-12T14:55:04.490

数字音乐合成器。

我认为，整个音乐界都受到廉价和弦合成器的影响。早期的复音合成器，其中有效的多个模拟合成器（离散或使用 CEM 或 SSM 芯片）。它们既昂贵又非常有限。在 80 年代，第一个数字系统问世（我不确定，但我认为 Kurzweil 是最早的系统之一）。今天，大多数都是数字的——即使是模拟的也是典型的“虚拟模拟”。

问候

编辑：哎呀-我刚刚发现CMI fairlight 是在1978 年发明的。所以忘记上面的-对不起。

* * *

## 回答 #105

> 赞同：2
> 
> 时间：2009-08-18T03:09:00.243

作为 Debian 用户，我会投票支持软件包管理。它使 OSX 和 Windows 7 看起来像原始的业余玩物。

但是既然已经提到了包管理，那我就给 X 投一票。网络透明的窗口服务器让很多应用成为可能。能够在同一个屏幕上无缝调用并排运行在不同计算机上的程序真是太好了。

这在 80 年代后期更令人印象深刻。

* * *

## 回答 #106

> 赞同：1
> 
> 时间：2009-01-13T04:37:51.583

受保护的内存。如果您的程序出错，在受保护的内存之前，您可以在任何地方开始执行代码——几乎总是挂起整个机器。没错，重启时间！

硬件成本低。1978 年，我的第一台电脑花了 500 美元——在当时是一笔巨款。降低成本将个人电脑放在每张桌子上。

* * *

## 回答 #107

> 赞同：1
> 
> 时间：2011-08-10T04:11:03.283

[FPGA](http://en.wikipedia.org/wiki/Field-programmable_gate_array)是1980年后发明的重大突破。

* * *

## 回答 #108

> 赞同：1
> 
> 时间：2009-01-16T13:45:07.620

StackOverFlow.com

* * *

## 回答 #109

> 赞同：1
> 
> 时间：2011-07-30T08:30:39.663

Paxos 协议。很难描述它在互联网时代的价值。

* * *

## 回答 #110

> 赞同：1
> 
> 时间：2009-01-14T00:35:27.597

[自然语言处理](http://en.wikipedia.org/wiki/Natural_Language_Processing#Short_history_of_evaluation_in_NLP)。我第一次遇到这种情况是在 1990 年代初期，赛门铁克的一个名为[Q&A](http://en.wikipedia.org/wiki/Q_&_A_(software))的程序让您可以通过键入英文查询来查询数据库。直到今天我仍然对它印象深刻。

* * *

## 回答 #111

> 赞同：0
> 
> 时间：2009-08-18T03:28:16.967

让我们看看，Connection Machines (Massive Parallelism) 就是其中之一。

无论如何，这整个问题对艾伦·凯来说似乎是一个自负，因为他发明了一切。

* * *

## 回答 #112

> 赞同：0
> 
> 时间：2010-05-29T23:45:07.730

I would say Linux and the reification of the worse-is-better philosophy, but you can argue that those are older. So I´d say: quantum, chemical, peptide, dna, and membrane computing, (re)factoring in a non ad-hoc fashion and automated, aspects, generic programming, some types of type inference, some types of testing,

The reason why we have no new ideas: sw patents (this comes from the late 60s ...), corporations and education.

* * *

## 回答 #113

> 赞同：0
> 
> 时间：2009-03-19T14:12:27.573

十大软件工程思想/[图片](http://www.yourdonreport.com/wp-content/uploads/2007/11/compaidtoptenalb.png)

* * *

## 回答 #114

> 赞同：0
> 
> 时间：2010-05-25T20:34:32.373

我不得不说，自 1980 年以来计算领域最大的发明是摩尔定律。1960 年代和 1970 年代创造了大量非常酷、创新的东西——但它们都是极其昂贵的一次性项目。这些项目中的大多数都在时间的迷雾中消失了。

今天，这个很酷的创新项目获得了几轮资金，并且在 6 个月左右的时间内可以在每个人的桌面或网络浏览器上使用。

如果这不是创新，那是什么？

* * *

## 回答 #115

> 赞同：0
> 
> 时间：2009-01-12T04:06:35.767

计算机图形学、特殊效果和 3D 动画

* * *

## 回答 #116

> 赞同：0
> 
> 时间：2009-07-27T08:08:12.993

我不知道是否有人已经回答了，“机器学习”是一项正在快速发展的重大新发展。借助智能垃圾邮件过滤、股市预测、机器人等智能机器，...

也许，机器智能可能是下一件大事。

* * *

## 回答 #117

> 赞同：0
> 
> 时间：2010-08-04T12:52:02.437

**个人广播通信**

Facebook、Twitter、Buzz、Qaiku……实现方式各不相同，侧重于不同的方面——管理的受众、简洁性、讨论。具体服务来来去去，但通信的新概念依然存在。博客当然是这一切的开始，但新服务使交流与社会联系起来，这是一个本质的区别。

不过，不太确定这是否完全属于*计算*的主题，但这是很重要的事情，只有通过计算和网络才能实现。

* * *

## 回答 #118

> 赞同：0
> 
> 时间：2009-11-03T22:18:00.593

**个人电脑**。

毫无疑问，过去 30 年计算中最重要的部分是现在每个人都参与其中。家用电脑只能追溯到 1977 年左右，而广泛采用则一直持续到 80 年代。现在，幼儿园、老年中心和你曾经拥有的每一个隔壁邻居都拥有一个。

* * *

## 回答 #119

> 赞同：0
> 
> 时间：2010-08-06T00:23:59.343

**Open Croquet** [http://www.opencroquet.org](http://www.opencroquet.org) - 一个 Squeak，基于 Smalltalk 的 3D 环境，允许多个用户从内部交互和编程环境。它有自己的对象复制协议，用于在 Internet 上高效且可扩展地共享环境。**这很难描述，因为没有其他任何东西可以像它一样......

1）我提出这个是因为当我试图向其他人解释它是什么时，我发现他们希望我将它与其他事物进行比较......尽管存在很多元素，但我仍然没有找到任何类似的东西从其他系统（例如 Smalltalk、Open GL、etoys、虚拟世界、远程协作、面向对象的复制架构）来看，整体似乎比部分要多得多……

2) 与这里提到的许多技术不同，它还没有进入广泛开发的商业领域……

这两点都是早期技术的迹象。

我怀疑当 Alan Kay 开始研究它时，他可能一开始就在思考这个问题的主题。

[http://www.onlisareinsradar.com/archives/001281.php](http://www.onlisareinsradar.com/archives/001281.php)

* * *

## 回答 #120

> 赞同：0
> 
> 时间：2010-03-17T04:04:00.957

互联网。

而已。

* * *

## 回答 #121

> 赞同：0
> 
> 时间：2009-08-18T06:28:27.573

量子计算的数学在 1980 年之前就已经存在，但是硬件还没有出现，而且在未来很多年里可能在物理上和经济上都不可行。

* * *

## 回答 #122

> 赞同：0
> 
> 时间：2012-06-15T15:22:01.807

快速聚类算法（数据点数量为 O(n log n)），例如[DBScan（从 1996 年开始）](http://en.wikipedia.org/wiki/DBSCAN)似乎都可以追溯到 1980 年之后。

这些是数据挖掘技术普遍进步的一部分。

相比之下，在寻线方面缺乏进展，像 Hough 这样的不良缩放技术似乎仍然代表了最先进的技术。

* * *

## 回答 #123

> 赞同：-1
> 
> 时间：2009-02-04T16:06:50.050

如果我们认真地作为一个群体来回答这个问题。
不幸的是，我相信我们需要的不仅仅是一串善意的随机帖子！
我知道，这听起来很无聊，经常做事是！

**我们在计算领域写了一个强大的想法列表**
也许我们应该定义几个类别来分开每个类别，因为视频会议在某种程度上不适合面向对象的编程。
按类别查看想法可以更轻松地生成它们而没有冗余。如果量子计算不远离飞行汽车，那么在隐形传态中就很容易偏离轨道。

**试着给他们每个人一个日期**
这将解决 1980 年之前/之后的问题，并将关于每个想法的辩论限制在自己的范围内。挖掘最早的参考资料、第一个已知的实现等会很有趣。
另外，这将使像我这样在 1980 年 2 岁的人更好地了解 1980 年的常见编程知识（没有什么比在时间）

**尝试将它们中的每一个归因于它们的当前实施状态**
好吧，一些想法是 1850 年的科幻小说，在 1970 年得到早期发展，在 1990 年有重大改进突破。
一些想法才刚刚开始流行。有些几乎被遗忘了。

维基的东西可能是个好主意。
我认为如果稍微有条理的话，这真的可以到达某个地方。
我没有检查，但也许这整件事已经存在于网络上（我通常会发现，如果你想到某件事，有人已经这样做了）。

你怎么看 ？

干杯！

* * *

## 回答 #124

> 赞同：-1
> 
> 时间：2009-01-12T11:56:11.450

DOS。我不是 DOS 的粉丝，但感谢 DOS 和 IBM-PC 计算机是今天的样子（无论好坏）。

* * *

## 回答 #125

> 赞同：-1
> 
> 时间：2009-01-15T05:56:18.993

20 年前：面向对象编程——更好地处理软件复杂性。

现在：云计算——更好地处理硬件复杂性。

未来：声明性的东西，但还需要 20 年。

* * *

## 回答 #126

> 赞同：-1
> 
> 时间：2009-08-17T22:40:15.020

也许是从客户端服务器到点对点的转变。我讨厌整个云/SAS 的原因之一是它是对客户端/服务器的回归。

我口袋里有一个 VAX，你想让我假装它是 VT-100？

* * *

## 回答 #127

> 赞同：-3
> 
> 时间：2009-07-22T19:11:34.017

三通管盒

* * *

## 回答 #128

> 赞同：-8
> 
> 时间：2009-02-05T15:55:21.927

**软件专利**

* * *

## 回答 #129

> 赞同：-8
> 
> 时间：2009-01-14T01:36:09.580

这是我喜欢打电话给互联网的一件小事

# asp.net - 数据驱动设计问题——数据计数

> ID：432923
> 
> 赞同：2
> 
> 时间：2009-01-11T13:27:58.520
> 
> 标签：asp.net, sql-server, database, performance

我想为我的用户提供大约 10 种不同的“统计信息”。每个统计数据代表我的数据库的不同查询返回的计数。每个统计/查询特定于当前用户。实现这一目标的最有效方法是什么？我是否认为在我的网站的每个页面上为每个用户运行统计查询（为他们提供实时图片）不是最好的方法？

建议表示赞赏。

**编辑：**

我在 100 - 1000 个并发用户的基础上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T14:58:23.113

我的第一个想法是，这是第一次很难做到完美的事情之一，所以试着确保你的设计能够改变你做事的方式。例如，有一个返回 UserStats 对象的 GetUserStats 函数，这样在您的站点中只有一个地方实现了此逻辑。这应该使以后更容易改变事情。

你是对的，你不希望每页有多个查询。我不是一个数据专家，但我认为一次性返回用户所有统计信息的单个存储过程将是一个好的开始。然后，这将允许更改统计信息的计算/更新方式（查询、批处理、触发器等），而无需对您的代码进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T20:21:43.740

当我去数据库并存储在数据库中时，我很想保持统计数据的“运行总计”，这是一个在需要时检索数据的简单查询。根据显示给用户的值是最新的有多重要，可能需要某种缓存。

我们有许多应用程序在工作，其中数据统计对用户至关重要。使用“运行总计”方法实现将统计信息存储在数据库中的系统已经产生了显着的性能改进。话虽如此，我们的并发用户量远低于您的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T14:06:23.077

您不能将值存储在缓存中几分钟吗？特别是如果计算量很大，这将有助于提高性能，同时保持统计数据几乎是实时的。

但这取决于您拥有多少用户以及计算成本有多高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T14:10:49.980

这完全取决于您的服务器可以处理多少流量和查询，以及这些数字变化的频率以及它们对用户的更新程度。

ASP.NET 提供了为控件设置特定可缓存性的能力，并使缓存随用户 ID 或您想要的任何其他参数而变化，您可以利用这一点。

# javascript - JavaScript 中页面重新加载/刷新的操作

> ID：432925
> 
> 赞同：4
> 
> 时间：2009-01-11T13:30:00.483
> 
> 标签：javascript

一旦FireFox中的页面重新加载/刷新，我想要做的是从扩展/GM脚本触发一个函数......

想象一下：

1.  我进入一个要求输入用户名和密码的网页。
2.  我的代码填充这些值并提交凭据
3.  网页重新加载并弹出一个页面，要求我输入预先确定的数字
4.  我输入号码
5.  网页重新加载并弹出一个页面，要求我从下拉列表中选择一个选项
6.  我选择......你明白了..

我想我想写一些 JavaScript 来完成这一切..**由于需要持久性并且我没有能力更改源站点，我想写一个 FireFox 扩展或 GreaseMonkey - 基本上是客户端的任何东西**。

类似事件 DOMContentReloaded 的行为会像（如果它存在的话）：

addEventListener("DOMContentReloaded", pageReloaded, false);

此类代码的典型测试用例是：

1.  了解页面刷新之间花费了多少时间
2.  等待页面刷新的第二个实例发生，然后重定向到另一个页面等。

**所有这些都将通过 FireFox 扩展（或 GreaseMonkey，以防 GM 中的解决方案更容易/更好/推荐）完成 - 鉴于此，事情应该很容易吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-11T14:21:00.300

*我已经更新了我的答案，以反映您在下面更新的问题。*

正如[rjk 所](https://stackoverflow.com/questions/432925/actions-on-page-reload-refresh-in-javascript#432941)提到的，您可以使用该`onbeforeunload`事件在页面刷新时执行操作。

这是一个应该解决一些潜在问题的解决方案，我将在下面解释：

```
// Just some cookie utils from: http://www.quirksmode.org/js/cookies.html
var Cookie = { 
    create: function(name, value, days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            var expires = "; expires=" + date.toGMTString();
        }
        else var expires = "";
        document.cookie = name + "=" + value + expires + "; path=/";
    },

    read: function(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for (var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1, c.length);
            }
            if (c.indexOf(nameEQ) == 0) {
                return c.substring(nameEQ.length, c.length);
            }
        }
        return null;
    },

    erase: function(name) {
        createCookie(name, "", -1);
    }
}

window.addEventListener('beforeunload', pageClosed, false);
window.addEventListener('load', pageOpened, false);

function pageOpened() {
    var timestampString = Cookie.read('closeTester');
    if (timestampString) {
        var timestamp = new Date(timestampString);
        var temp = new Date();
        temp.setMinutes(temp.getMinutes() - 1, temp.getSeconds() - 30);

        // If this is true, the load is a re-load/refresh
        if (timestamp > temp) {
            var counter = Cookie.read('counter');
            if (counter) {
                counter++;
                Cookie.create('counter', counter);
            } else {
                Cookie.create('counter', 1);
            }
        }
        Cookie.erase('closeTester');
    }
}

function pageClosed() {
    Cookie.create('closeTester', new Date());
} 
```

这样做是在页面卸载时创建一个临时 cookie。cookie 存储当前时间的时间戳。加载页面时，会读取该 cookie，并检查时间戳以查看它的年龄。如果在 30 秒内，它将增加计数器。

我选择了 30 秒，因为我不知道您的网站的数据密集程度或加载时间。如果您的网站速度很快，我会将其更改为 5-10 秒，以便脚本更准确。为此，将秒数更改为 50-55 秒，您将分别获得 10 秒或 5 秒的窗口。

这只会在浏览器保持打开状态时跟踪重新加载。一旦关闭，计数就会丢失。您可以通过向 ' `count`' cookie 添加过期时间来更改它。

因为时间戳 cookie 仅在浏览器打开时维护，所以这个脚本相当值得信赖，因为它不会计算关闭和重新打开浏览器。唯一可能遇到问题的情况是用户打开了一个选项卡，然后关闭该选项卡并在您指定的时间窗口内重新打开它。

所有这些都是在没有 firefox 扩展的情况下完成的，并且可以在除 IE 之外的任何浏览器上运行（除非您更正事件处理程序以使用它）。我不知道如何使用 Firefox 扩展来做到这一点，尽管使用扩展可能会有更好的方法。

## 更新

既然我了解了您想要做得更好的事情，这里有一些可能会有所帮助的事情：

我上面包含的脚本（显然）专门用于跟踪刷新。但是，它也可以用于仅跟踪导航。在检查“ `if (timestamp > temp)`”的情况下，您可以调用另一个将执行某些操作的函数（该操作仅在页面刷新时执行等）。如果您想要持久数据，您只需将其存储在 cookie 中，就像我在上面所做的那样。如果您不需要保留页面计数，您可以在该 cookie 中存储一些其他信息。

我以前从未创建过greasemonkey 脚本，但我假设因为它可以引用DOM 中的元素，它也可以引用文档的cookie。这将允许您使用greasemonkey 存储站点的持久数据，只需使用我上面包含的代码。如果您无法访问 DOM cookie，您可以使用[greasemonkey 的`GM_setValue()`和`GM_getValue()`函数](http://diveintogreasemonkey.org/advanced/gm_getvalue.html)来存储持久数据。据我所知，这些数据将存储在浏览器会话中。您必须放入一些标记值以确保它仅在页面加载时起作用（类似于我上面使用的时间戳示例）。

至于 jQuery，它是一个 JavaScript API，通常用于 JavaScript。我不知道它对 GreaseMonkey 脚本有多大用处，尽管我认为如果您在脚本中使用它会起作用。如果您想开始使用 jQuery，请查看[他们的文档](http://docs.jquery.com/Main_Page)。它真的做得很好。我的示例中唯一真正可以有效使用 jQuery 的部分是事件处理部分。以下是在 jQuery 中进行事件处理的方法：

```
$().ready(pageOpened);
$().unload(pageClosed); 
```

将 ' `window.addEventListener()`' 调用替换为上面的那 2 行，你就有了一个跨浏览器的实现。但是，由于您使用的是greasemonkey 脚本，所以jQuery API 变得不必要，除非您想要进行DOM 操作，而jQuery 非常擅长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-11T13:40:37.373

我认为没有任何方法可以通过在浏览器中刷新页面来保留 JavaScript - 然后它会再次加载它...

也许您可以从`window.onbeforeunload`重载重新加载按钮的默认功能开始，并使用 AJAX 重新加载一些主 div ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T14:02:22.227

分配 window.onbeforeunload 将是一个可行的解决方案，如果它在页面关闭时也没有触发！

还有更多建议……也许是 FF Extension 或 GM Script 特定的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-01-11T14:09:00.793

使用`window.name`or `document.cookie`- 这两个属性将在页面刷新后继续存在。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-01-23T22:26:16.327

919756 如果你成功了，TC 工作人员会抓到你并禁止你。想知道我是怎么知道的？嗯……

# html - HTML 5 验证是否物有所值？

> ID：432933
> 
> 赞同：28
> 
> 时间：2009-01-11T13:35:56.960
> 
> 标签：html

人们普遍认为，验证 HTML 的最佳理由是确保所有浏览器都能一致且可预测地处理它。

然而，HTML 5 草案将两个规范合二为一。首先是作者规范，描述了 HTML 作者应该使用的元素和属性，以及它们之间的相互关系。HTML 5 页面的验证基于此规范。包含的元素和属性不是直接从 HTML 4 中提取的，而是需要从第一原则证明，这意味着一些 HTML 4 特性，例如 <table> 上的 summary 属性、<img> 上的 longdesc 和 profile 属性在 <head> 上，目前未出现在此草稿中。此类功能不被视为已弃用，它们根本不包括在内。（他们在草案中的缺席仍然存在争议，尽管他们似乎不太可能很快被纳入。）

其次，该草案定义了一个浏览器处理规范，旨在准确定义浏览器的解析器将如何处理它给出的任何字节流，而不管 HTML 的格式和有效性如何。这意味着，当浏览器完全支持 HTML 5 时，将有可能预测任何浏览器将如何处理 HTML 以处理比仅通过验证的输入范围更广的输入。

特别是，由于 HTML 5 被定义为与当今的网络 100% 向后兼容，所有有效的 HTML 4 以及所有无效但常用的标记，将继续以与今天完全相同的方式进行处理，无论它是否HTML 5 是否有效。

因此，任何使用 HTML 5、HTML 4 或任何以前版本的 HTML 以及许多专有扩展的任何功能的人至少可以确信他们的 HTML 将在所有浏览器中得到一致且可预测的处理。

鉴于此，将 HTML 5 限制为可以验证的内容是否有意义，这样做会获得什么实际好处？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-01-15T13:35:22.420

*   [首先是与HTML5 解析算法](http://www.whatwg.org/specs/web-apps/current-work/#parsing)中的“解析错误”相对应的有效性层。该层类似于 XML 格式良好。避免在这一层的文档中出现错误的首要原因是您可能会得到一个令人惊讶的解析树。如果您的文档在这一层上没有错误，那么在编写与 DOM 一起使用的 JS 或 CSS 时，您将获得更少的调试惊喜。
*   作为上述层的一个特例，有 HTML5 doctype: `<!DOCTYPE html>`。想要在这里遵守的原因是以最简单的方式获得标准模式。与 HTML 4.01 或 XHTML 1.0 文档类型不同，您可以记住它，您每次都需要查找、复制和粘贴。当然，您想要标准模式的原因是 CSS 层上的惊喜较少。
*   关心比解析算法更高的层上的验证的主要原因是捕捉你的拼写错误，这样你就可以花更少的时间来调试为什么你的页面没有像你期望的那样工作。
*   前一点没有解释为什么当浏览器支持您没有拼错的给定元素或属性作为遗留问题但 HTML5 规范仍然回避它时，您应该关心验证。这就是为什么 HTML5 已经过时的语法如下：
    *   HTML5 使用过时来向作者表明某些功能是在浪费他们的时间。其中包括`longdesc`和。（请注意，人们不同意这些是否确实是浪费时间，但正如目前起草的那样，HTML5 使它们过时了。）也就是说，如果您有有限的资源来提高可访问性，那么您的有限资源最好花在其他方面，而不是和. 如果您在语义纯度方面的资源有限，那么您的资源最好花在其他方面，而不是确保您在.`summary``profile``longdesc``summary``profile`
    *   HTML5 废弃了一些可以在 CSS 中复制的表现功能，以指导作者使用 CSS 为自己的利益服务。这样，那些不考虑自己可维护性的作者应该被引导到更可维护的代码。就我个人而言，我更愿意让更多的传统表现性内容符合标准，并让作者自己决定哪种方式适合他们。
    *   由于政治原因，有些东西已经过时了。该`<font>`元素已过时，因为使其符合标准会使反`<font>`标准主义者认为 HTML5 人已经疯了，这可能会导致糟糕的 PR。`<applet>`主要是因为不给特定插件提供特殊标记的原则而被废弃。`classid`on 属性已`<object>`过时，因为它实际上是特定于 ActiveX 的。
    *   有些东西在语言设计美学的基础上已经过时了。这包括`name`属性 on`<a>`和`language`属性 on `<script>`。

（我开发了 Validator.nu HTML5 验证器，它也是 W3C 验证器使用的 HTML5 验证引擎。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-01-11T13:57:20.100

> 鉴于此，将 HTML 5 限制为可以验证的内容是否有意义，这样做会获得什么实际好处？

是的当然。你忘记了未来不是固定的。特别是，您隐含地假设 HTML 5 规范永远不会改变，也永远不会弃用任何功能。当然，这只会巩固现状。从长远来看，绝对希望删除对某些功能的支持，以使新开发更容易发生（特别是如果这些可能相互冲突）。

生成有效的 HTML 5 可能没有直接的好处（除了它*仍然*使验证和开发更容易）。但是，如果大多数网站的质量有所提高，则可能会带来长期的好处，因为它使超越当前技术和标准变得更加容易。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-01-12T12:07:38.933

甚至在 HTML5 开始之前，验证从来都不是为了在浏览器中获得一致的结果。这是那些不明白他们在说什么的人所传播的神话，即使他们认为他们明白。

验证的真正原因一直是纯粹的质量保证问题。这只是一种检测错误的方法，其中 . 即使任何给定错误的结果可能或可能很快在浏览器之间变得一致，但结果本身仍然可能与预期不符。

对于作者来说，能够在他们的代码中捕获错误非常重要，因为更清晰、无错误的标记更易于使用和维护，尤其是在团队环境中工作时。虽然大多数个别错误最终可能是良性的并且不会导致任何重大问题，但有些错误可能会产生意想不到的结果。例如，不正确，重叠或未闭合的元素在某些情况下会导致意外的布局问题，让验证器告诉您错误在哪里，有助于纠正问题。但是，如果结果充满了几十个其他良性错误，它会使检测和处理变得比需要的更加困难。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-11T23:43:41.570

这确实是我对 HTML5 的一个小问题。如果浏览器无论如何都必须以相同的方式处理所有流，那么将流的子集定义为“有效”是没有意义的。在 WHATWG 列表上花费大量时间讨论回退机制是对每个人时间的巨大浪费，尤其是当 XML 应该已经解决了所有的解析问题时。

生成一个关于解析遗留无效文档的最佳实践文档本来是一个有用的想法，但这与 Web 标准无关，它只是进一步混淆 HTML5 周围水域的另一个因素，它无法决定是否要编码现有行为（如 HTML 3.2 所做的），重新定义更清洁的平台（如尝试过的 HTML 3.0）或添加新的扩展。

无论如何，这个问题可能会放错地方，因为永远不会有“完全支持HTML5”的浏览器。太多太多了：浏览器制造商无法实现所有细节，即使他们愿意，至少微软明确没有这样做。相反，显然有用的功能将由供应商从中挑选出来并得到更广泛的认可。

HTML5 不是一个连贯的 HTML 规范，它是 Hixie 对于他认为 Web 浏览器应该做的每一件随机事情的庞大、不可读和未完成的配方。它会失败。W3 的替代方法 XHTML2 已经失败。Web 标准没有一致的未来方向。我们丢球了。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-01-11T21:49:44.110

这是个好问题。

验证的主要目的（至少对我而言）是帮助我捕捉标记中的错误，并为我在不同浏览器中测试页面时提供良好的基础；如果标记是有效的，并且页面在 IE6 中是 borked，这是一个 IE6 问题。

即使您的标记包含技术上无效的 HTML5（例如表格摘要或锚点访问键），浏览器仍应以可预测的方式运行，这一事实在某种程度上使水变得混乱。

作为一般经验法则，出于上述原因，我总是希望我的页面能够验证。但是，如果（例如）从 HTML5 规范中删除了一个属性而没有添加明显合适的替换，我可能倾向于继续使用已弃用或过时的属性，并接受验证错误。

和以往一样，我认为这是一个了解你的手艺的案例。

如果您知道自己在做什么，并且有*意识地决定*构建一个出于合理原因而无法验证的页面，那么这不是问题。如果您只是编写由于您不了解而无法验证的代码，那完全是另一回事。

斯蒂芬

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-27T00:18:45.577

W3C HTML5 验证器维护者在这里。我最近写了一篇简短的“为什么要验证？” HTML5 验证器的“关于”部分：

[http://validator.w3.org/nu/about.html#why-validate](http://validator.w3.org/nu/about.html#why-validate)

该部分的文本来源在这里：

[https://github.com/validator/validator/blob/master/site/nu-about.html#L160](https://github.com/validator/validator/blob/master/site/nu-about.html#L160)

欢迎提出改进/添加建议的拉取请求。

我目前拥有的是：

> 通过一致性检查器运行 HTML 文档的核心原因很简单：捕捉意外错误（您可能会错过的错误），以便您可以修复它们。
> 
> 除此之外，HTML 规范中的一些文档一致性要求（有效性规则）可以帮助您和文档的用户避免某些类型的潜在问题。为了解释这些要求背后的基本原理，HTML 规范包含以下两个部分：
> 
> *   [语法级错误的基本原理](http://www.w3.org/TR/html/introduction.html#syntax-errors)
> *   [限制内容模型和属性值的理由](http://www.w3.org/TR/html/introduction.html#restrictions-on-content-models-and-on-attribute-values)
> 
> 总结这两节中所说的内容：
> 
> *   有一些标记案例被定义为错误，因为它们是可访问性、可用性、互操作性、安全性或可维护性的潜在问题，或者因为它们可能导致性能不佳，或者可能导致脚本以难以解决的方式失败。
> *   除此之外，一些标记用例被定义为错误，因为它们可能导致您在 HTML 解析和错误处理行为中遇到潜在问题 - 因此，例如，您最终会在 DOM 中得到一些不直观、意外的结果。
> 
> 验证您的文件会提醒您注意这些潜在问题。

# .net - .NET：为什么不检查枚举的范围/值？

> ID：432937
> 
> 赞同：9
> 
> 时间：2009-01-11T13:38:37.780
> 
> 标签：.net, enums

这一直困扰着我。也许对 .NET 内部有一些核心知识的人可以向我解释一下。

假设我定义一个枚举如下：

```
public enum Foo
{
   Eenie = 1,
   Meenie = 2,
   Miney = 3,
   Moe = 4
} 
```

现在，还假设在我的代码中的某处，我有以下代码：

```
int bar = (Foo)5; 
```

这将编译得很好，并且不会引发任何异常，即使值 5 显然不是`Foo`.

或者，考虑以下几点：

```
public void ProcessFoo(Foo theFoo)
{
    // Do processing
}

public static void Main()
{
    ProcessFoo((Foo)5);
} 
```

同样，也不例外。

在我看来，这应该会导致类型不匹配异常，因为 5 不是`Foo`. 但设计师选择不这样做。

现在，我编写了一个扩展方法，可以验证是否是这种情况，调用它来确保是这种情况并没有什么大不了的，但我必须使用反射来做到这一点（以及它所有的性能损失等等）。

再说一遍，有什么令人信服的理由可能促使决定不检查枚举？

作为参考，来自[Enum 类的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.enum.aspx)：

> 当您定义将枚举常量作为值的方法或属性时，请考虑验证该值。原因是您可以将数值转换为枚举类型，即使该数值未在枚举中定义。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-01-11T15:24:29.613

问题是性能。对普通枚举（例如 Color）进行检查枚举非常简单

```
enum Color {
  Red,
  Blue
} 
```

但问题在于用作位标志的枚举。

```
enum Property {
  IsFirst = 0x1,
  IsDefault = 0x2,
  IsLastAccessed = 0x4
} 
```

必须对转换为 Enum 值的每个整数进行按位检查被认为过于昂贵。因此，轻松转换为枚举值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-11T13:49:59.973

范围检查可能会产生不必要的成本。因此，不隐式执行它是合理的。如前所述，`[Flags]`要求不进行此类检查。如果运行时会检查是否存在`[Flags]`，则每次执行转换时仍会导致运行时损失。

解决这个问题的唯一方法是让编译器知道该`[Flags]`属性。我想这样做并不是为了减少硬编码到编译器中的运行时知识量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-11T13:40:58.433

如果对它们进行范围检查，您将如何`[Flags]`使用枚举或按位组合它们？

一个例子是`ControlStyles` `enum`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T18:56:14.210

我想到了两个原因。首先，生成超出范围的值需要强制转换。如果你故意施放，你为什么会期望在运行时被打耳光？禁止演员阵容会容易得多。

另一个引人注目的是这个：

```
enum VeryHardToRangeCheck {
  one = 1,
  three = 3,
  five = 5
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-11T20:29:26.393

我可以看到两个原因：

1.  [标志] 无需检查即可更顺畅地工作。对于你的例子，

    (Foo)5 == Foo.Eenie | Foo.Moe;

2.  枚举是一种值类型。如果你不初始化它，它将等于零。如果您想检查枚举值，则不清楚在这种情况下何时应该引发异常 - 例如，当您创建包含此枚举作为字段的类的实例时，零值可能会潜入您的代码。

    所以当前的行为更加一致——你只知道你可以有超出范围的值并检查它们。

此外，您应该始终明确地进行检查并为您无法处理的值抛出异常。否则，向枚举添加新值可能会改变现有代码的行为。幸运的是，您使用单个 switch 语句是一个返回值的方法，如果没有找到匹配项，编译器会让您明确指定要执行的操作 - 在它之后的 switch 的默认部分中，您将不得不返回一个值或抛出异常. 大多数情况下首选的 NotSupportedExcpetion。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-11T13:46:38.530

这是因为`(Foo)5`是`Foo.Eenie | Foo.Moe`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-11T14:25:55.003

我会说原因是因为枚举仅在编译时由编译器进行类型检查和内联。对于使用属性扩展枚举特别有用`Flags`（因为它突然变得向前兼容......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-10T20:17:21.203

微软的[C# Programming Guide](http://msdn.microsoft.com/en-us/library/cc138362.aspx)明确指出不要做你所问的事情：

> 可以将任意整数值分配给 meetingDay。例如，这行代码不会产生错误： meetingDay = (Days) 42。但是，您不应该这样做，因为隐含的期望是枚举变量将只保存枚举定义的值之一。将任意值分配给枚举类型的变量会带来很高的错误风险。

int 实际上只是存储类型。实际上，[可以指定其他整数存储类型](http://msdn.microsoft.com/en-us/library/sbbt4032.aspx)，例如字节：

```
enum Days : byte {Sat=1, Sun, Mon, Tue, Wed, Thu, Fri}; 
```

存储类型决定了一个枚举使用了多少内存。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-03T18:45:24.530

枚举*是*范围和值检查。`(Foo)5`您只是使用语法明确规避了检查。

C# 是一种静态类型语言，这意味着所有类型都在*编译时*进行验证。编译器证明程序中不存在类型错误，因此没有必要检查类型是否运行时 - 它们保证是正确的。

*对于值类型，在运行时*检查类型是不可能的，因为值类型在运行时不携带类型信息。例如，无法在运行时判断一个整数是有符号还是无符号。与枚举类似，它们在运行时只是整数，不携带任何关于它们是什么枚举的信息。类型安全纯粹发生在编译时。

对于引用类型，它是不同的，因为它们确实在运行时携带类型信息，这就是为什么可以在运行时使用 GetType() 访问类型的原因。但值类型并非如此。（与引用类型相比，这是使值类型小而快的部分原因。）

但是当您使用`(Foo)bar`类型转换表达式时会出现问题。对于您比编译器更了解的情况，类型转换基本上是类型系统中的一个逃生口。你告诉编译器你*知道*bar 是一个有效的 Foo，编译器应该信任你。

类型转换是 C# 中最令人困惑的部分之一，因为它们对于值类型和引用类型的工作方式完全不同。对于引用类型，它们执行运行时检查该值是否确实具有指定的类型。如果不是，它会抛出异常。

但是对于值类型，不可能进行这样的检查。相反，强制转换只是将值视为预期类型，并让*您*负责验证这是否是有效的操作。未经验证的强制转换会导致各种意想不到的结果。拿这个代码：

```
var a = -1;
var b = (uint)a; 
```

的价值是`b`多少？如果你猜对了`4294967295`，你猜对了。

所以底线是，在转换值类型时，*您*有责任确保该值对该类型有效。

在几乎所有实际情况下，您都应该验证输入，例如使用 Enum.IsDefined。仅当您绝对确定该值有效时才应使用原始转换。但即便如此，请注意枚举可能是错误的。例如。考虑这段代码：

```
 enum Color {
        Red,
        Blue
    }
    enum Hat {
        Cab,
        TopHat
    }
    public static void Main(){
        var a = Color.Blue;
        var b = (int)a;
        if (!Enum.IsDefined<Hat>(b)) throw new Exception();
        var c = (Hat)b;
        Console.Write(c); // writes TopHat
    } 
```

The validation can only check that the valid is valid for the given enum, but information about which enum the value initially belonged to is lost. So this is markedly different from reference types which always retain their type information and never change type at runtime.

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2009-12-16T15:42:20.540

抱歉死了。您是否可能在这里将 Enum 与键值集合混淆了？

当您将整数 Meenie=2 分配给枚举项时，您所做的只是说 Meenie 是第三个索引，如果未指定，则后面的所有内容都将采用 2+（与 Meenie 的距离）的索引。因此，当您查找 Foo[5] 时，您正在查找索引 5，而不是某个以 5 作为值的键。

在大多数情况下，无论如何您都不会这样做。你会要求 Foo.Meenie - 这就是枚举的*重点*，设置一个*已知*的值范围，然后通过它们的公开名称来引用它们。这只是开发人员的便利。有更好的结构来做你在你的例子中所做的事情。

# php - 来自 Web 应用程序的短信

> ID：432944
> 
> 赞同：64
> 
> 时间：2009-01-11T13:42:43.420
> 
> 标签：php, sms

我只想用 PHP 从我的 Web 应用程序发送 SMS。谁能告诉我该怎么做？我需要为此做些什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-01-11T16:54:42.817

我不知道这是否适用于您，但我多次为自己省钱的做法是在用户的个人资料中询问他的运营商是什么，然后尝试将其与[`this list`](http://en.wikipedia.org/wiki/List_of_carriers_providing_SMS_transit). 从本质上讲，许多/大多数运营商都有一个连接到电话号码的电子邮件地址，您可以轻松地向该号码发送文本。例如，如果您有 ATT 并且您的电话号码是 786-262-8344，则发送至 7682628344@txt.att.net 的电子邮件将免费向您发送包含电子邮件主题/正文的短信。这项技术几乎可以免费覆盖您的所有美国用户。显然，根据您的应用程序的需要，这可能是不可能/足够/不希望的，但这是一个需要注意的选项。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-01-11T14:36:15.513

您发送 SMS 消息的主要选项是使用现有的 SMS 提供商。根据我的经验（这在 SMS 消息传递 Web 应用程序中很广泛），您经常会发现与不同的提供商进行谈判是为您的应用程序获得最佳交易的最佳方式。

不同的提供商通常提供不同的服务和不同的功能。我最喜欢的供应商，事实上，过去曾愉快地与我协商降低费率的供应商是 TM4B ( [http://www.tm4b.com](http://www.tm4b.com) )。这些家伙价格优惠，覆盖全球大部分地区，并拥有出色的客户服务。

下面是从我的一个实时 Web 应用程序中提取的一些代码（以及一些被混淆的部分），用于通过他们的 API 发送一条简单的消息：

```
require_once("tm4b.lib.php");
$smsEngine = new tm4b();

// Prepare the array for sending
$smsRequest["username"] = "YOURUNAME";
$smsRequest["password"] = "YOURPWORD";
$smsRequest["to"] = "+441234554443";
$smsRequest["from"] = "ME!";
$smsRequest["msg"] = "Hello, test message!";

// Do the actual sending
$smsResult = $smsEngine->ClientAPI($smsRequest);

// Check the result
if( $smsResult['status'] == "ok" ) {
    print "Message sent!";
} else {
    print "Message not sent.";
} 
```

我过去使用过的许多其他提供商都有非常相似的界面，而且在定价方面都非常具有竞争力。您只需四处寻找适合您需求的提供商。

在成本方面，大多数西方国家的价格从几便士/美分不等（不过，大多数第三世界国家的价格略高，所以要小心）。如果您想从他们那里获得体面的价格，您将不得不批量支付大多数供应商，但他们通常会与您协商“比平常少”的批次。大多数提供商确实提供后付费选项，但只有当您成功完成与他们的一些交易时......其他人从一开始就提供它，但价格过高。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2009-02-26T05:47:15.740

**只发送，但便宜又容易**

最简单的方法肯定是使用上面提到的[@Paolo Bergantino](https://stackoverflow.com/questions/432944/sms-from-web-application/433201#433201)的电子邮件黑客。要求您的用户输入他们的电话号码并从列表中选择他们的运营商很容易。一旦获得用户信息，在任何开发平台上都可以轻松发送电子邮件。

但是，我发现这种方法有两个非常重要的限制：

1.  首先是蜂窝运营商都将通过其电子邮件网关发送的 SMS 消息优先于其他 SMS 流量。可能是因为发件人没有为他们支付这些费用。如果最小化延迟对您很重要，请不要使用此方法。
2.  第二，尤其是在这个手机号码发达的现代时代，用户会时不时更换运营商，几乎肯定会忘记告诉你。如果您需要在一两年后可靠地将 SMS 消息传递给相同的人，那么这种方法将开始失败。

**以便宜的价格发送和接收**

如果您尝试将站点设置为在预算范围内发送*和接收*SMS 消息，则可以使用[TextMarks](http://textmarks.com)等服务。TextMarks 允许您为您的服务选择一个关键字，该关键字允许用户通过 TextMarks 的共享短代码 41411 将消息路由给您。这里的问题是他们在每条消息中保留 20 个字符用于短广告以支付他们的服务费用。

**专业品质**

如果您需要低延迟、高可靠性和无广告，那么您几乎必须通过 SMS 聚合器，除非您足够大，可以单独与每个运营商协商。

我发现 SMS 聚合器需要注意的最重要的事情是，它们中的许多实际上是作为营销公司而不是应用程序托管商设立的——他们并不真正理解将 SMS 作为用户可以与之交互的渠道服务供应商。我发现使用短语“你的活动”而不是“你的应用程序”的聚合器是最严重的违规者。远离他们，并找到一个了解您作为应用程序开发人员需求的聚合器。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2010-03-25T13:07:06.993

[Twilio](http://twilio.com)最近发布了一个 API 来发送[SMS 消息](http://www.twilio.com/sms/)。api 比较简单，基本的[REST 接口来发送 SMS](http://www.twilio.com/docs/api/2008-08-01/rest/sms)和一个[post 返回文档来响应](http://www.twilio.com/docs/api/2008-08-01/twiml/sms/twilio_request)。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-01-13T22:24:24.887

嗨，我的名字是 Jarod，我在 Twilio.com 工作，所以我有点偏见。[但是话虽如此，使用Twilio REST API](https://www.twilio.com/docs/api/rest/sending-messages?utm_source=stack_overflow&utm_medium=jan2014&utm_campaign=stackathon)从您的 PHP Web 应用程序发送 SMS 非常容易。这是一个简单的例子：

```
<?php
// Get the PHP helper library from twilio.com/docs/php/install
require_once('/path/to/twilio-php/Services/Twilio.php'); // Loads the library

// Your Account Sid and Auth Token from twilio.com/user/account
$sid = "{{ account_sid }}"; 
$token = "{{ auth_token }}"; 
$client = new Services_Twilio($sid, $token);

$client->account->messages->sendMessage("+14158141829", "+14159352345", "Hi Shyju, Sorry it took me so long to get back to you. <3 The Internet."); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-01-11T14:24:40.700

为此，我们使用了一个名为[TextAnywhere](http://ws.textanywhere.net/web/Home/)的商业解决方案。

只需支付少量费用（每条 SMS 几便士），它们就可以为您提供 Web 服务（以及用于 .NET、ASP、Java、C++ 等的 API）。这很容易而且很有效，尽管它不是免费的。

在最基本的情况下，它就像使用 QueryString 中的数字和消息文本发出 URL 请求一样简单，其余的由他们的服务器为您完成。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-06-30T21:16:29.880

如果你认识承运人，你就是黄金。大多数都有电子邮件网关。如果没有，您可以使用 Clickatell API，每条消息的费用约为 0.04 美元。我现在正在研究一种黑客攻击，您可以在其中使用 GSM 调制解调器和您的个人手机计划以及无限短信。如果有效，这可以节省很多钱。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-31T16:42:13.833

如果您愿意投资安卓智能手机，您可以设置自己的 SMS 网关，最终价格会更便宜。

我使用[SMS GATEWAY ME](http://smsgateway.me)这是一个免费的 Android 应用程序，您可以发送这样的消息：

```
$URL = "http://v2.smsgateway.me/API/Send/Single.php";

$postdata = http_build_query(
    array(
    'Username' => "foo@bar.co.uk",
    'Password' => "password",
    'Number' => "+447791064782",
    'Message' => "Hello World!",
    )
);

$opts = array('http' => array('method'  => 'POST', 'header'  => 'Content-type: application/x-www-form-urlencoded', 'content' => $postdata));

$context  = stream_context_create($opts);

$result = file_get_contents($URL, false, $context); 
```

他们网站上有一个文档告诉您如何接受传入的消息。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-01-11T14:18:20.837

如果您需要一种可靠的方式来发送多条 SMS，您应该寻找充当 Web 到 SMS 网关的 SMS 服务提供商。在这种情况下，将有一个基于 http 的界面，允许您通过调用 URL 并将收件人和消息作为参数传递来发送 SMS。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-11-12T22:04:12.243

dktext 不仅允许您向请求的客户发送 bult 文本消息，而且很快将提供谷歌语音集成以使用与您的谷歌语音帐户相同的系统

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-08-31T10:23:42.123

要从 Web 应用程序发送 SMS，您需要将应用程序连接到 SMS Gateway。大多数 SMS 网关提供可用于执行此操作的外部 API。他们通常有文档，您可以使用这些文档来了解如何将 SMS 通知集成到您的 PHP 代码中。不幸的是，没有可靠的免费短信服务提供，因此您必须为此短信服务付费。您可以查看[http://www.phpjabbers.com/web-sms/](http://www.phpjabbers.com/web-sms/)这似乎很容易。他们的集成代码非常简单：

```
<?php
$SMSLIB["phone"] = '44111222333'; // your phone number
$SMSLIB["key"] = 'abcdefghijklmnopqrs'; // your personal API code
include("smslib.php"); // we will provide you with smslib.php file
sendSMS("test message", $SMSLIB["phone"]); // function which sends the message
?> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-01-19T20:09:18.943

我最近不得不在我们的网站上实现用户发起的短信功能，并发现 www.dotgo.com 服务很有帮助。它是免费的......看起来它是由几个博士创建的，作为一种无状态的消息传递框架（想想 http 请求 - 响应模型）。

为了让它工作，你设置了一个“index.crml”文件（类似于 index.html、php 等）。我们的看起来像这样（抱歉，所有这些都放在一行中......在其他情况下显示有些问题）：

```
<?xml version="1.0" encoding="UTF-8"?><cmrl xmlns:dotgo="http://dotgo.com/cmrl/1.0"><match pattern="*"><engine href="http://www.bulbstorm.com/sms/flashbulb.php"/></match></cmrl> 
```

在我们的网站上，索引文件依次引用 /sms/flashbulb.php 文件，该文件（不包括打开和关闭 php 标记）如下所示：

```
$wordArray = explode(' ',$_REQUEST['sys_argument']);
$username = strip_tags($wordArray[0]);
$messageBody = str_replace($username.' ', '', $_REQUEST['sys_argument']);
require_once 'Database.php';
$dbh = new Database('bulbstorm');
$args = array($username, $messageBody);
$dbh->execMysqlProc('uspAddFlashbulb', $args);
print "<message><content>Bulb received and saved to your account</content></message>"; 
```

无论如何，我只包含代码以说明框架如何运行以及编写多少代码来获得功能。

有一些限制。最重要的是一切都是用户发起的。因此，如果您主要希望发送的传出消息之前没有您的用户向您的站点发送消息以“获取”响应消息，那么它可能不是您想要的。为我们正在做的事情工作。其中一位创始人甚至亲自回复了一个电子邮件问题，并且非常有帮助。

我们尚未使用但考虑过的功能之一是他们的订阅功能......用户可以在其中进行设置，以便 dotgo 系统定期轮询您网站上的页面，根据计划用户指定。再说一次，我没有走那么远，但认为它很有趣。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-01-11T13:48:59.743

基本上，每个运营商都有一个电子邮件网关，您需要向其发送电子邮件。您需要提前了解运营商，以便知道发送 SMS 消息的电子邮件地址。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-07-06T13:10:58.437

```
function sendSMS($number,$message) {
    $request = message api link;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $request);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $response = curl_exec($ch);
    curl_close($ch);
    return split(',',$response);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-08-28T14:57:28.547

使用多网关解决方案是个好主意。我已经为我的目的创建了一个，但我认为它可能对任何想要轻松设置的人有用：[https ://packagist.org/packages/orajo/sms-zilla](https://packagist.org/packages/orajo/sms-zilla)

```
$smsSender = new SmsZilla\SmsSender(new SmsZilla\Adapter\MockAdapter());

$smsSender->setRecipient('605123456');
// adding more recipients (with and without country code)
$smsSender->setRecipient(['511654321', '48511654987', '+41751654987']);

$smsSender->setText("Message text");
$result = $smsSender->send(); 
```

目前这个库支持 5 个提供者，第 6 个正在开发中，其他的正在计划中。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-09-17T18:30:02.027

您可以使用我们的[API](https://developer.wavecell.com)和涵盖该主题的[本教程。](https://developer.wavecell.com/v1/tutorials/api-send-sms-single)

但是，基本上，发送单个短信就像发送 HTTP POST 请求一样简单：

```
curl -X "POST" https://api.wavecell.com/sms/v1/amazing_hq/single \
    -u amazing:1234512345 \
    -H "Content-Type: application/json" \
    -d $'{ "source": "AmazingDev", "destination": "+6512345678", "text": "Hello, World!" }' 
```

`amazing`您的帐户在哪里`1234512345`- 密码（使用更强的密码！）并且`amazing_hq`是您的子帐户。

结果是： [![短信](https://i.stack.imgur.com/xF7OT.png)](https://i.stack.imgur.com/xF7OT.png)

有关在 PHP 中发送 HTTP 请求的详细信息包含在以下问题中：

*   [带有 JSON 正文的 POST 请求](https://stackoverflow.com/questions/16920291/post-request-with-json-body)
*   [POST 数据到 PHP 中的 URL](https://stackoverflow.com/questions/3080146/post-data-to-a-url-in-php)
*   [如何使用 PHP 发送 POST 请求？](https://stackoverflow.com/questions/5647461/how-do-i-send-a-post-request-with-php)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-06-10T10:02:44.520

我认为，这是这个主题中最古老的问题。主要回答- 付费网关的广告。但还有另一种方式 - 来自安卓设备（SIM 卡）、安卓网关的短信。我用简单的 API 创建了一个免费的开源应用程序：[https](https://github.com/pavelakafoks/SmsTransmitter) ://github.com/pavelakafoks/SmsTransmitter Google play：[https](https://play.google.com/store/apps/details?id=info.ininfo.smstransmitter) ://play.google.com/store/apps/details?id=info.ininfo.smstransmitter 你可以将我的应用程序用于您的网站或根据我的来源构建您自己的 android 应用程序。它比互联网短信网关更便宜。我希望它对某人有用。

# nhibernate - 从多对多参考表中删除项目？

> ID：432953
> 
> 赞同：0
> 
> 时间：2009-01-11T13:47:11.570
> 
> 标签：nhibernate, many-to-many

我有两个表“组”和“客户”，当然还有两个实体“组”和“客户”。我有另一个表，它同时引用了“CustomerGroupMember”表。

我使用 CustomerGroupMember 表进行多对多映射。

客户.hbm.xml

```
<!--Many to many-->
    <bag name="CustomerGroups" table="CustomerGroupMember" cascade="all" lazy="true">
      <key column="CustomerId" />
      <many-to-many class="CustomerGroup" column="CustomerGroupId" />
    </bag> 
```

组.hbm.xml

```
<bag name="Members" table="CustomerGroupMember" cascade="all" lazy="true">
      <key column="CustomerGroupId" />
      <many-to-many class="Customer" column="CustomerId" />
</bag> 
```

我还没有为“CustomerGroupMember”表创建实体和映射。

我的问题是如何从 CustomerGroupMember 表中删除 CustomerGroupMember？我需要为 CustomerGroupMember 创建一个实体才能删除 CustomerGroupMember 还是有其他方法？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T13:54:13.320

要删除这些表之间的关系项，您应该能够以某种方式引用联结表中的确切行，这在当前映射中是不可能的。是的，您必须为`CustomerGroupMember`表创建实体和映射。如果没有映射，你怎么知道要删除哪一行？

# c# - LINQ to Entities 中的“NOT IN”子句

> ID：432954
> 
> 赞同：50
> 
> 时间：2009-01-11T13:48:59.507
> 
> 标签：c#, linq-to-entities

无论如何我可以创建一个 not in 子句，就像我在*Linq to Entities*的 SQL Server 中那样？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2009-01-11T14:48:58.560

如果您使用内存中的集合作为过滤器，最好使用 Contains() 的否定。请注意，如果列表太长，这可能会失败，在这种情况下，您将需要选择另一种策略（参见下文，了解如何使用完全面向 DB 的查询的策略）。

```
 var exceptionList = new List<string> { "exception1", "exception2" };

   var query = myEntities.MyEntity
                         .Select(e => e.Name)
                         .Where(e => !exceptionList.Contains(e.Name)); 
```

如果您基于另一个数据库查询进行排除，则使用`Except`可能是更好的选择。（这里是LINQ to Entities 中支持的 Set 扩展的[链接）](http://msdn.microsoft.com/en-us/library/bb738638.aspx)

```
 var exceptionList = myEntities.MyOtherEntity
                                 .Select(e => e.Name);

   var query = myEntities.MyEntity
                         .Select(e => e.Name)
                         .Except(exceptionList); 
```

这假设一个复杂的实体，您在其中排除某些依赖于另一个表的某些属性的实体，并且想要不排除的实体的名称。如果您想要整个实体，那么您需要将异常构造为实体类的实例，以便它们满足默认的相等运算符（请参阅[文档](http://msdn.microsoft.com/en-us/library/bb348938.aspx)）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-01-11T14:45:36.273

尝试：

```
from p in db.Products
where !theBadCategories.Contains(p.Category)
select p; 
```

您要转换为 Linq 查询的 SQL 查询是什么？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-02T15:24:02.350

我有以下扩展方法：

```
 public static bool IsIn<T>(this T keyObject, params T[] collection)
    {
        return collection.Contains(keyObject);
    }

    public static bool IsIn<T>(this T keyObject, IEnumerable<T> collection)
    {
        return collection.Contains(keyObject);
    }

    public static bool IsNotIn<T>(this T keyObject, params T[] collection)
    {
        return keyObject.IsIn(collection) == false;
    }

    public static bool IsNotIn<T>(this T keyObject, IEnumerable<T> collection)
    {
        return keyObject.IsIn(collection) == false;
    } 
```

用法：

```
var inclusionList = new List<string> { "inclusion1", "inclusion2" };
var query = myEntities.MyEntity
                     .Select(e => e.Name)
                     .Where(e => e.IsIn(inclusionList));

var exceptionList = new List<string> { "exception1", "exception2" };
var query = myEntities.MyEntity
                     .Select(e => e.Name)
                     .Where(e => e.IsNotIn(exceptionList)); 
```

直接传递值时也非常有用：

```
var query = myEntities.MyEntity
                     .Select(e => e.Name)
                     .Where(e => e.IsIn("inclusion1", "inclusion2"));

var query = myEntities.MyEntity
                     .Select(e => e.Name)
                     .Where(e => e.IsNotIn("exception1", "exception2")); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-09-08T15:26:55.163

我拿了一个清单并使用了，

```
!MyList.Contains(table.columb.tostring()) 
```

注意：确保使用 List 而不是 Ilist

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-21T19:27:03.877

我创建它的方式与 SQL 更相似，我认为它更容易理解

```
var list = (from a in listA.AsEnumerable()
            join b in listB.AsEnumerable() on a.id equals b.id into ab
            from c in ab.DefaultIfEmpty()
            where c != null
            select new { id = c.id, name = c.nome }).ToList(); 
```

# c# - Silverlight：让 DeepZoom 从本地源加载图块？

> ID：432956
> 
> 赞同：1
> 
> 时间：2009-01-11T13:49:35.107
> 
> 标签：c#, .net, silverlight

我正在尝试使用 DeepZoom 制作地图应用程序。它已经通过从服务器加载平铺图像来工作。问题是，加载速度不够好，下载新图块时总是会有一点延迟。

我的想法是一次下载整个瓦片包，然后从本地源加载它们。我知道这在某种程度上与 DeepZoom 的想法相矛盾，但我认为这确实是我需要的。

有谁知道如何让 MultiScaleImage 从本地源加载图块？我已经尝试制作自己的 MultiScaleTileSource 并覆盖 GetTileLayers 方法，但没有运气。

一定有办法的，对吧？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T14:40:18.733

我没有在 Silverlight 中使用过 DeepZoom，但是为了使用 HD View，我使用了两种方法：

1.  只需将文件放在文件系统上，然后将 XML 指向它们并唱“file://...”URI 表示法。
2.  我安装了 Apache 并从[http://localhost/](http://localhost/)提供了内容...

正如预期的那样，与无线场景相比，两者都运行良好，性能也得到了很大改善。

我不确定 DeepZoom 是否可以使用 (1)，但 (2) 应该可以正常工作。您不需要使用 Apace（或 IE）。考虑一下您自己用 Python 或 C# 编写的 HTTP 服务器，它将请求的 URL 映射到本地文件。

如果您确实编写了自己的 HTTP 服务器，您可能会考虑延迟下载文件。这意味着用户仅在第一次查看图像区域时才会看到延迟。然后，您的服务器仅充当切片缓存，并且通常的缓存驱逐策略可能适用（想到最近最少使用的弹簧）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-12T23:13:47.520

在某些限制下，这是完全可能的。事实上，我一直这样做——我在我的本地磁盘上生成一个银色的深变焦图像，然后创建一个用户可以双击的网页，它工作正常。

首先，限制：如果您使用集合，通常必须加载一些数据文件才能知道在集合中找到每个 msi 的位置——这需要一个网络请求——我不知道如何在本地工作。无论出于何种原因，MSI 控件在本地加载文件都没有问题。

所以，这就是我如何组合我的网络项目。在根文件夹中，我有 xap 等，其中包含我的银色灯光控制（这很简单）。这基本上相当于 ClientBin 文件夹。现在，在该文件夹中，我放置了一个“会议”文件夹，其中包含作曲家工具的输出（“meeting_files”和“meeting.xml”）。当然，meeting_files 包含 MSI 的所有位。

现在根 HTML 文件非常简单 - 对于 MSI 的源参数，我只是给它“meeting/meeting.xml” - 一个相对路径。

这对我有用。如果您需要更多信息，请告诉我（好吧，在您提出这个问题之后很久，它可能不再重要了）。当事情在本地时，Performacne 很棒 - 但对于一个体面大小的图像，可能需要很长时间才能下载所有文件。我的一些非常大的 deepzoom 图像是 10 GB！

# java - 转发请求时的 Servlet/JSP URL

> ID：432969
> 
> 赞同：2
> 
> 时间：2009-01-11T13:59:52.623
> 
> 标签：java, jsp, url, servlets, url-mapping

我的 Web 应用程序有一个名为 admin 的 servlet，当导航到它时检查用户是否已登录以及是否定向到管理部分，但如果不是，它会将它们定向到带有登录表单的 JSP 页面。JSP 的名称不会出现在 URL 中，它保持为 /admin。但是，当 JSP 发布到另一个 servlet 以验证登录凭据时，url 更改为 /validate，这是 servlet 的名称。如果用户验证他们将被转发到另一个 JSP，但 URL 仍然保持为 /validate。如何确保 URL 反映浏览器中正在查看的内容？

如果这不是太清楚，请道歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-11T14:11:00.383

使用重定向，而不是转发。转发在服务器内部；来自浏览器的一个请求被转发到不同的 servlet。重定向是服务器和浏览器之间的交互，告诉浏览器请求第二个 URL。

我建议使用 Container Managed Authentication，每当用户请求需要身份验证的页面时，它将为您处理重定向到表单并返回到最初请求的页面。

# javascript - 使用 JavaScript 识别唯一命中

> ID：432975
> 
> 赞同：2
> 
> 时间：2009-01-11T14:04:32.113
> 
> 标签：javascript, unique, hit

您能否建议一种使用 JavaScript 识别唯一用户的有效方法（例如计算要发送到服务器端的哈希）？

编辑：关键是我不能“侵入”浏览器（例如发送cookies）。IP 也不是选项。它必须是客户端解决方案（因此是 JavaScript）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-01-11T14:14:40.690

这个问题的一个常见解决方案是在服务器端计算一个唯一的 ID，然后将一个 cookie 推送到包含该 ID 的浏览器（首先检查该 cookie 是否已经为当前浏览器定义）。

广告网络大量使用该技术来收集网络用户的人口统计信息。

**编辑**顺便说一句，“唯一 ID”可以简单地是与用户关联的第一个会话 ID。许多框架可以为您提供这些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-11T14:19:39.837

我赞成布赖恩的回答，但我想补充一点，问题在于识别唯一用户。坚持使用 Javascript 来完成它——除非有服务器级别的参与，否则它在页面级别之外是无状态的——只是不是一个富有成效的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-01-11T14:16:07.143

“唯一”字符串可以是用户的 IP 地址，但请注意，例如，公司防火墙后面的不同用户可能使用相同的 IP。

用户的IP地址已经在服务器级别可用，不需要js。

# seo - 某些（不是全部）查询的 google serps 突然下降的可能原因是什么？

> ID：432976
> 
> 赞同：0
> 
> 时间：2009-01-11T14:05:21.503
> 
> 标签：seo

我管理的一个网站发现来自谷歌的访问量突然下降。

直到一周前，它曾经每天有大约 300-500 次访问。他们有 10% 来自一个强大的、有竞争力的查询；80% 是长尾查询。现在我两个都输了，访问量下降了 90%。我还有

过去 3 个月网站上没有任何变化，自去年以来的所有变化都是微不足道的。我最近没有注意到任何 PR 变化。

这可能是什么原因？

我想我没有被禁止，因为我还有几个排名靠前的查询。

[编辑] 我的 pagerank 没有（显然）改变。我的主页上还有 4 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-11T22:43:07.107

我不相信“谷歌之舞”可以解释观察到的行为：索引确实会在各个数据中心分别更新，但是一旦更新完成（据我所知，这需要不到一天的时间），您应该期待一致的搜索无论哪一个 Google 数据中心受到攻击，结果都会出现。

OP没有说哪个网站“受到影响”。

也许谷歌的某些人看了它并决定应该对它进行处罚（垃圾邮件、恶意软件、MFA 或其他）？或者现在可能有新的网站可以更好地“回答”这两个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-05-12T02:22:02.417

这不是谷歌舞。我们正在经历同样的事情。我们从第一页到 - 不存在！主要是在地理搜索方面......但其他一些仍然排名很高。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T13:08:00.377

网站在 Google SEO 上失败的原因可能有很多。我建议你先看看谷歌网站管理员。Google 网站管理员可帮助您检查网站的健康状况，以了解 Google 检测到的潜在问题。按照此步骤了解您的网站是否完全陷入 SEO。
-> 登录 Google 网站管理员帐户
-> 选择您的 xyz.com 网站
-> 选择 Google 索引-> 如果总索引大于 0，则
检查索引状态，则您的网站在 Google 中正确显示，但可能有其他原因
您必须手动检查。
1\. 网站内容是否重复？访问[http://moz.com/learn/seo/duplicate-content](http://moz.com/learn/seo/duplicate-content) 2\. 您的网站是否受到恶意软件的影响？[https://productforums.google.com/forum/#!topic/webmasters/rAeadZWRJ_8](https://productforums.google.com/forum/#!topic/webmasters/rAeadZWRJ_8)
3\. 可能有 www 和非 www 的原因。[https://productforums.google.com/forum/#!topic/webmasters/QkA8WjHSuCk](https://productforums.google.com/forum/#!topic/webmasters/QkA8WjHSuCk) 等等，我希望这会有所帮助

如果您认为一切正常但网站仍然不可见，那么您应该提交您的网站以供 Google 重新考虑。如果您的网站没有出现在 Google 搜索结果中，或者效果不如以往，则可能违反了我们的质量指南。如果您没有在列表中看到您的网站，请将其添加到您的帐户并验证网站所有权。
这是直接链接。( [https://www.google.com/webmasters/tools/reconsideration](https://www.google.com/webmasters/tools/reconsideration) )

请求重新考虑您的网站：

1\. 使用您的 Google 帐户登录网站管理员工具。
2.确保您已添加并验证您想要重新考虑的网站。
3.请求重新考虑您的网站。

# sql - 为什么我不能在这个 SQLzoo 教程中得到正确的答案？

> ID：432977
> 
> 赞同：1
> 
> 时间：2009-01-11T14:05:33.953
> 
> 标签：sql, mysql-5.0

[问题2b](http://sqlzoo.net/2b.htm)如下：

> 2b。对于每个主题显示该奖项被授予的第一年。
> 
> > 诺贝尔奖（年，主题，获奖者）

我的解决方案是这样的：
`SELECT DISTINCT subject, yr
FROM nobel
ORDER BY yr ASC;`

为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-05-11T16:57:12.383

您可以不使用 group by 或 min 以不同的方式进行操作

```
select distinct subject, yr from nobel x
  where yr <= all
    (select yr from nobel y
     where y.subject = x.subject) 
```

但它肯定更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T14:14:49.567

您的答案在学科和年份的每个不同组合中都会出现一行。

正确答案 GROUPS BY the subject，得到每门学科的 MIN year。

足够的线索？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-11T14:18:11.087

```
SELECT subject, MIN(yr)
FROM nobel
GROUP BY subject; 
```

耶！

# c++ - 将基于桌面的 MFC C++ 应用程序转换为 Web 应用程序是否可行

> ID：432982
> 
> 赞同：6
> 
> 时间：2009-01-11T14:07:41.157
> 
> 标签：c++, mfc, refactoring

我有一个非常大的应用程序，150 万行 C++，目前是基于 MFC，使用 Document/View 架构。该应用程序包括大量 3d 矢量图形、电子表格以及非常多的对话框和窗口。在 DVA 的约束下，它写得相当好，因为在用户界面中没有重要的程序逻辑，并且可以使用用户界面完成的任何事情也可以使用 COM/OLE 自动化界面以编程方式执行。

应许多用户的要求，我一直在尝试为程序创建一个浏览器界面，程序本身在服务器上运行。到目前为止的想法是将所有 COM 接口转换为 DCOM 并将 UI 重写/移植到 Java。初步实验表明，这将是一项巨大的工作。

还有其他人有任何想法可以更轻松地实施吗？任何人都遇到过任何重构或类似工具专门帮助这种端口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-12T00:01:38.787

简短的回答是它是可行的，不要使用 java，而且这将是相当多的工作。

几年前（大约在 IE5 时代），一位客户要求我回答一个与此类似的问题。有问题的应用程序是一个结构良好的三层桌面应用程序。

研究的结果是这是可能的。考虑的选项是 Java 和 CGI​​，使用 CORBA 或 COM/DCOM。考虑过构建 Java 小程序，但被排除在外，因为它与 C++ 桌面版本没有太大不同。

采用的方法是采用后端层并将其转变为位于 cgi 层后面的服务器应用程序。UI 在很大程度上是使用我们现在所知的 Ajax 重新编写的，即 Javascript 和 HTML。UI 分为浏览器元素和服务器元素。

我确实考虑过编写一个工具来转换文档、视图和对话框并将它们包装成兼容的格式，但是经过大量分析后，很明显这样做并不可行，因为 MFC 实际上与 Win32 API 非常紧密地耦合, 和它自己。根据对话框的数量，可能值得写一些东西来转换它们。

我确实发现，即使在一个结构良好的系统中，也有相当一部分本应位于后端的代码泄漏到了前端。

如果我现在要做同样的事情，有一些优秀的 javascript 库会有所帮助，但我仍然会采取同样的方法，在使用 Ajax 的浏览器中尽可能多地做，可能像[qooxdoo](http://qooxdoo.org/)或[YUI](http://developer.yahoo.com/yui/)之类的东西。我也可能会考虑使用[XUL](http://en.wikipedia.org/wiki/Xul)并将至少大部分对话框移动到后端。

从您的要求列表中，我唯一关心的是 3d 矢量图形，尽管[这个 JS 玩具](http://ctho.ath.cx/toys/3d.html)或[JS3D](http://www.wxs.ca/js3d/)可能有一些里程。

这只是一个简短的总结，因为我试图避免写论文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-01-12T13:27:57.537

在考虑将 MFC 应用程序转换为 Web 应用程序之前，我建议您阅读Jeff Atwood的“[避免用户界面的不可思议的山谷”。](https://blog.codinghorror.com/avoiding-the-uncanny-valley-of-user-interface/)

> 如果您正在考虑或积极构建 Ajax/RIA 应用程序，您应该考虑用户界面设计的 Uncanny Valley。当您构建“Web 浏览器中的桌面”样式的应用程序时，您违反了用户对 Web 应用程序的外观和行为方式的不成文期望。这种选择可能会对可学习性、使用的愉悦性和采用产生重大的负面影响。

我不知道您的应用程序是什么样子以及它的“网络可移植性”有多好，但也许为网络制作应用程序的精确副本并不是最佳选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-12-10T14:26:29.050

看看[Wt](http://www.webtoolkit.eu/wt)是否适合您的需求。它是一个 C++ Web 应用程序工具包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-11T14:26:22.520

这将是大量的工作，但您已经完成了好的设计，所以您已经完成了一半！

我将首先将您的 MFC UI 移动到一个单独的可执行文件中，并使用它来驱动后端代码。一旦你完成了（这应该相对容易，因为你只是重新打包现有代码），那么你就会更好地了解它是否能够处理连接到单个后端服务器的多个用户。

一旦你解决了这个问题，你就可以看到你需要实现与后端的连接的所有区域，你可以开始用你喜欢的任何语言或平台重新编写 UI。

对于 Web 界面，我会编写与您的后端服务器交互的 Web 服务器代码。通过这种方式，您可以获得更容易的耦合，并且您需要担心的安全性和连接性问题要少得多。我一直认为网络服务器+浏览器是 n 层应用程序中的表示层。

至于 Web 技术，您可以使用 flex、activex、silverlight 或可能的 jquery/jsext 将丰富的内容放入浏览器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-12T21:25:13.877

自从我玩这个已经是几年前了，但我曾经尝试过使用一个小应用程序并将其编译为一个活动的 X 组件，然后可以在网页中轻松使用它。（此应用程序基于使用 Borland C++ Builder 创建的表单，因此将其作为一个活动 X 组件相当简单。我无法判断将您的 MFC D/V 应用程序包装为一个活动 X 组件有多么困难）。

有必要在用户机器上注册活动的 X 组件（也是相当简单的，但您必须重新注册该组件的每个新版本——我觉得我正在填写注册表），现在 Internet Explorer 会通过 web 引发警告使用 activeX 的页面，因此需要用户降低 IE 中的安全级别以防止其抱怨。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T22:19:14.637

是的，我们已经通过一个大型（Borland）C++ 应用程序做到了这一点，该应用程序可以最好地描述为具有“大泥球”架构。

你确实有一些有趣的问题，但我们做了一个非常“webby”和有吸引力的前端（原型在 ASP.NET 但可以是任何东西，包括 Java），它主要只是在服务器上运行的桌面应用程序中触发事件，然后显示生成的图形、表格和文本。我们可以灵活地显示诸如图形之类的东西 - 取决于浏览器的 .PNG、flash 对象或 .SVG

工作得非常好，一旦我们整理好模型（设计是一个问题），只需要几个月的程序员就可以实现。

目前，我们只实现了整个桌面应用程序的一个有用的子集，但随着我们的继续，后端将更干净地与前端分离（并缩小尺寸）。如果您已经在 GUI 和后端之间进行了很好的分离，那么这是一个很大的优势。

我们还研究了从应用程序中自动生成的 Web 界面，但在设计阶段决定它看起来太像在浏览器窗口中运行的 Windows32 应用程序......

# database - NHibernate 映射/设计建议 - 连接表

> ID：432985
> 
> 赞同：0
> 
> 时间：2009-01-11T14:10:42.180
> 
> 标签：database, sql-server-2005, nhibernate, architecture

我有一个设计问题，希望能提供一些意见。

我想根据以下 4 个表制作一个日历事件系统：

tb_events

id，日期，摘要，

* * *

tb_group

身份证，姓名，父母，血统，

* * *

tb_course

身份证、姓名、

* * *

tb_staff

身份证，姓名，电子邮件，

* * *

事件类当前设置为

```
id
summary
date
calDetails IList<CalDetails> 
```

* * *

类 CalDetail

```
id
name 
```

* * *

我的困境是是否使用一个连接表 - 将 eventID 链接到组、课程或人员的 ID，或者是否将组、课程人员集合添加到事件类。

为每个集合设置一个集合会更容易在休眠中映射，但我想知道使用 3 个连接会获得什么样的性能影响。（事件表最多可以有 10-20000 条记录）。此外，由于我在查看事件时只需要 name 属性，因此使用一个集合可以更轻松地将另一种“事件详细信息”添加到组合中。

如果我要使用一个集合，是否可以在 NHibernate 中映射它。我环顾四周寻找示例，但找不到任何示例。哪一种让我想到，也许这不是一个好方法。

无论如何，我会很感激任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-01-11T22:42:08.900

注意不要过早地优化性能。您不太可能遇到性能问题，并且如果它们出现，它们很容易规避。我会从最无摩擦的路线开始。这样你会更快乐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-11T15:13:58.557

如果您使用 3 个连接的幼稚方法，您可能会受到巨大的性能影响。Ayende 有一些使用[MultiCriteria](http://ayende.com/Blog/archive/2007/05/20/NHibernate-Multi-Criteria.aspx)使性能恢复正常的示例。

如果有意义的话，你也可以走子类路线。

# iphone - iPhone应用程序的“关于”文本中的超链接

> ID：432990
> 
> 赞同：8
> 
> 时间：2009-01-11T14:14:01.643
> 
> 标签：iphone, cocoa-touch

我正处于我的第一个简单 iPhone 应用程序的最后阶段。我正在建立一个“关于”视图，带有学分/信息/等。

我在最简单的事情上失败了：如何将超链接嵌入到文本中？我目前正在使用带有 UILabel 的 UIView 作为文本。

我看过这里和示例应用程序，但没有找到任何地方。我应该使用 UIWebView 吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-01-11T14:58:27.870

是的，使用 UIWebView 并将静态 HTML 放入其中。

像这样：

```
[myWebView loadHTMLString:@"<html><head></head><body style=\"font-family: sans-serif;\"> .... </body></html>" baseURL:nil]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-30T00:11:27.160

在指定的 url 启动 web 浏览器：

```
NSURL *target = [[NSURL alloc] initWithString:@"http://www.stackoverflow.com"];
[[UIApplication sharedApplication] openURL:target]; 
```

这段代码可以在任何地方运行。我对 UILabel 进行了子类化，添加了 touchsEnded 方法并将其放置在其中。（不要忘记设置 labelname.userInteractionEnabled = YES;）

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    NSURL *target = [[NSURL alloc] initWithString:@"http://www.stackoverflow.com"];
    [[UIApplication sharedApplication] openURL:target];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-01-11T16:11:57.487

您可以通过使用您希望显示的 URL调用**UIApplication openURL:**方法来触发 safari 。这将关闭您的应用程序，然后打开 safari（或邮件/youtube/等）。

你会想以某种方式建立你的链接，也许是在一个按钮中。那部分取决于你。

如果你想将 html 内容嵌入到你的视图中，那么一定要使用 UIWebView。

文档：

*   [UIApplication openURL：（](https://developer.apple.com/documentation/uikit/uiapplication/1622961-openurl)已弃用）
*   [UIApplication openURL:options:completionHandler:](https://developer.apple.com/documentation/uikit/uiapplication/1648685-openurl) (iOS 10+)
*   [iPhone URL 方案参考](https://developer.apple.com/library/archive/featuredarticles/iPhoneURLScheme_Reference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007891)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-02-25T03:03:09.820

UIWebView is probably the wrong way to do this. It's *VERY* much overkill for something like this. You're should check out a Github project called [LRLinkableLabel](https://github.com/lukeredpath/LRLinkableLabel).

It will auto-detect any URLs that are inside the `.text` property.

You can use it like so:

```
LRLinkableLabel *label = [[LRLinkableLabel alloc] initWithFrame:CGRectMake(0.0, 0.0, 100.0, 20.0)];
label.delegate = self;
label.text = @"Check out http://dundermifflin.com to find some great paper deals!"; 
```

Then just make sure `self` implements this method:

```
- (void) linkableLabel:(LRLinkableLabel *)label clickedButton:(UIButton *)button forURL:(NSURL *)url {
    [[UIApplication sharedApplication] openURL:url];
} 
```

You can also use the `linkColor` and `textColor` properties to configure the appearance of the label. From this point you can use it just like any other UILabel.

Remember to set the `delegate` to `nil` when you're all done to make sure everything is all cleaned up.

Hope this helps.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-12T00:37:56.733

谢谢弗兰克和瑞安。

除了 Frank 的指导，我还需要实现 UIWebViewDelegate，并在 Interface Builder 中链接到它。原因是单击的每个链接都会在我的应用程序中打开（无法导航......）。我只需要实现这个方法，用适当的应用程序打开每个 URL：

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        [[UIApplication sharedApplication] openURL:request.URL];
        return false;
    }
    return true;
} 
```

# air - Adobe AIR 应用程序自行调整屏幕（最大化）

> ID：432993
> 
> 赞同：3
> 
> 时间：2009-01-11T14:14:39.660
> 
> 标签：air, fullscreen, maximize

有没有办法让 Adob​​e AIR 应用程序在启动时自行适应屏幕（最大化）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-01-13T04:18:44.323

来自阿比拉什：

只需`maximize();`在应用程序创建完成函数中调用该函数即可。

来源： [http ://groups.google.com/group/flex_india/browse_thread/thread/afd5a97aea768d52/59aabcf6a74171b9#59aabcf6a74171b9](http://groups.google.com/group/flex_india/browse_thread/thread/afd5a97aea768d52/59aabcf6a74171b9#59aabcf6a74171b9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-03T19:56:10.423

将 creationComplete 事件添加到您的应用程序

```
 <s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark" 
                           xmlns:mx="library://ns.adobe.com/flex/mx" 
                           width="950" height="500"
                           showStatusBar="false"  
    creationComplete="winApp_creationCompleteHandler(event)"> 
```

然后添加最大化（）；创建完成事件的函数。

```
protected function winApp_creationCompleteHandler(event:FlexEvent):void
{

maximize();

} 
```*********