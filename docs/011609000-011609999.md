# StackOverflow 问答 11609000-11609999

# magento - 为 magento 创建新包

> ID：11609004
> 
> 赞同：0
> 
> 时间：2012-07-23T08:36:54.540
> 
> 标签：magento, module

当我尝试安装我创建的新扩展时出现错误，CONNECT ERROR: Package file is invalid Invalid version, 应该是：xxx Invalid stability Invalid channel URL Empty authors section Empty package contents section 我正在创建包，去 Magento 连接, 包扩展名。我想我正在关注创建包所需的所有内容。相同的模块在现场工作，但是当我创建包并删除模块时，它就不起作用了。我还测试了稳定性、依赖性等。仍然无法正常工作。如何获得有关我收到的错误的更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T10:00:02.330

我也很难弄清楚

这是关于文件名的：ExtraWatch-1.0.0.tgz

是正确的格式。

它必须包含 package.xml

类似的东西（你会发现 package.xml 的其他例子）

```
 <?xml version="1.0"?>
    <package>
        <name>ExtraWatch</name>
        <version>1.0.0</version>
        <stability>devel</stability>
        <license>GPL</license>
        <channel>community</channel>
        <extends/>
        <summary>asdf</summary>
        <description>description</description>
        <notes>test</notes>
        <authors>
            <author>
                <name>Matto</name>
                <user>matto3c</user>  
                <email>foo@codegravity.com</email>
            </author>
        </authors>
        <date>2012-08-17</date>
        <time>08:22:34</time>
        <contents>
            <target name="magelocal">
                <dir name="CodeGravity">
                    <dir name="ExtraWatch">
                        <dir name="Block">
                            <dir name="Adminhtml">
                                <dir name="ExtraWatch">
                                    <file name="Edit.php"/>
                                </dir>
                            </dir>
                        </dir>
                    </dir>
                </dir>
            </target>
        </contents>

        <compatible/>
        <dependencies><required><php><min>1.0.0</min><max>5.5.0</max></php></required></dependencies>
    </package> 
```

# ruby-on-rails - Ruby on Rails：高级搜索

> ID：11609005
> 
> 赞同：7
> 
> 时间：2012-07-23T08:36:57.097
> 
> 标签：ruby-on-rails, ruby, search, textbox

我无法理解制作高级搜索表单的最佳方式。我在互联网上进行了很好的搜索，寻找了一些方法，但我无法让它们发挥作用，因为大多数建议都已经过时了。我已经问过一个问题，但我认为我太具体了，我无法解决我的问题。我想用一个搜索按钮搜索不同的文本框和下拉框。

编辑2：

项目控制器：

```
def index
    @projects = Project.all

respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @projects }
    end
  end

def search
@project_search = Project.search(params[:search]).order(sort_column + ' ' + sort_direction).paginate(:per_page => 2, :page => params[:page])

end

  # GET /projects/1
  # GET /projects/1.json
  def show
    @project = Project.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @project }
    end
  end

  # GET /projects/new
  # GET /projects/new.json
  def new
    @project = Project.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end

  # GET /projects/1/edit
  def edit
    @project = Project.find(params[:id])
  end

  # POST /projects
  # POST /projects.json
  def create

    @project = Project.new(params[:project])

    @project.client = params[:new_client] unless params[:new_client].blank?
    @project.exception_pm = params[:new_exception_pm] unless params[:new_exception_pm].blank?
    @project.project_owner = params[:new_project_owner] unless params[:new_project_owner].blank?
    @project.role = params[:new_role] unless params[:new_role].blank?
    @project.industry = params[:new_industry] unless params[:new_industry].blank?
    @project.business_div = params[:new_business_div] unless params[:new_business_div].blank?

    respond_to do |format|
      if @project.save
        format.html { redirect_to @project, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /projects/1
  # PUT /projects/1.json
  def update
    @project = Project.find(params[:id])

    respond_to do |format|
      if @project.update_attributes(params[:project])
        format.html { redirect_to @project, notice: 'Project was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /projects/1
  # DELETE /projects/1.json
  def destroy
    @project = Project.find(params[:id])
    @project.destroy

    respond_to do |format|
      format.html { redirect_to projects_url }
      format.json { head :no_content }
    end
  end

private

  helper_method :sort_column, :sort_direction
  def sort_column
    Project.column_names.include?(params[:sort]) ? params[:sort] : "project_name"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc"
  end
end 
```

搜索视图：

```
<h1>Search</h1>

<%= form_tag search_path, method: :get do %>
<%= hidden_field_tag :direction, params[:direction] %>
  <%= hidden_field_tag :sort, params[:sort] %>
  <%= text_field_tag :project_name, params[:project_name] %>
  <%= text_field_tag :client, params[:client] %>
  <%= submit_tag "Search", name: nil %>
<% end %>

<table class = "pretty">
<table border="1">
  <tr>
    <th><%= sortable "project_name", "Project name" %> </th>
    <th><%= sortable "client", "Client" %></th>
    <th>Exception pm</th>
    <th>Project owner</th>
    <th>Tech</th>
    <th>Role</th>
    <th>Industry</th>
    <th>Financials</th>
    <th>Business div</th>
    <th>Status</th>
    <th>Start date</th>
    <th>End date</th>
<% if false %>
    <th>Entry date</th>
    <th>Edited date</th>
    <th>Summary</th>
    <th>Lessons learned</tStackh>
    <th>Customer benifits</th>
    <th>Keywords</th>
    <!th></th>
    <!th></th>
    <!th></th>
<% end %>
  </tr>

<% @project_search.each do |t| %>
  <tr>
    <td><%= t.project_name %></td>
    <td><%= t.client %></td>
    <td><%= t.exception_pm %></td>
    <td><%= t.project_owner %></td>
    <td><%= t.tech %></td>
    <td><%= t.role %></td>
    <td><%= t.industry %></td>
    <td><%= t.financials %></td>
    <td><%= t.business_div %></td>
    <td><%= t.status %></td>
    <td><%= t.start_date %></td>
    <td><%= t.end_date %></td>
<% if false %>
    <td><%= t.entry_date %></td>
    <td><%= t.edited_date %></td>
    <td><%= t.summary %></td>
    <td><%= t.lessons_learned %></td>
    <td><%= t.customer_benifits %></td>
    <td><%= t.keywords %></td>
<% end %>
    <!td><%#= link_to 'Show', project %></td>
    <!td><%#= link_to 'Edit', edit_project_path(project) %></td>
    <!td><%#= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />
<%= will_paginate (@project_search) %>

<%= button_to "Search Again?", search_path, :method => "get" %>

<%# end %>
<%= button_to "Home", projects_path, :method => "get" %> 
```

项目.rb

```
class Project < ActiveRecord::Base
  attr_accessible :business_div, :client, :customer_benifits, :edited_date, :end_date, :entry_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

validates_presence_of :business_div, :client, :customer_benifits, :end_date, :exception_pm, :financials, :industry, :keywords, :lessons_learned, :project_name, :project_owner, :role, :start_date, :status, :summary, :tech

def self.search search_term
 return scoped unless search_term.present?
 where find(:all, :conditions => ['project_name OR client LIKE ?', "%#{search_term}%"])
end

end 
```

路线：

```
FinalApp::Application.routes.draw do
resources :projects
match "search" => "projects#search", :as => :search
root :to => 'projects#index'
end 
```

正如你所看到的，我距离完成应用程序还有很长的路要走。我正在尝试制作一个能够搜索以下字段的搜索表单：项目名称、客户、ID、行业、角色、技术、项目所有者、状态、开始日期、结束日期和关键字。搜索表单将具有文本框或下拉菜单，具体取决于用户正在搜索的字段。我想链接每个字段并一次性搜索它们。之前，我只是使用 project_name 和 client 作为示例，以便您更容易理解我的代码。希望您现在可以看到我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T10:10:08.900

您可以创建一个名为`search`.

您的搜索表单：

```
<%= form_tag search_index_path, method: :get do %>
  <%= text_field_tag :project, params[:project] %>
  <%= text_field_tag :client, params[:client] %>
  <%= submit_tag "Search", name: nil %>
<% end %> 
```

包含在您的 routes.rb 中：

```
get "search/index" 
```

您的搜索控制器：

```
def index
  #store all the projects that match the name searched
  @projects = Project.where("name LIKE ? ", "%#{params[:project]}%")  
  #store all the clients that match the name searched    
  @clients = Client.where("name LIKE ? ", "%#{params[:client]}%")
end 
```

现在您可以在索引视图中使用`@projects`和了。`@clients`

请小心，因为如果搜索不匹配，这些变量可能会变为 nil。

**编辑-我假设您有两个模型`Project`，并且`Client`**-如果您无法创建新控制器，则可以在当前控制器中创建搜索操作。

```
def search
  #store all the projects that match the name searched
  @projects = Project.where("name LIKE ? ", "%#{params[:project]}%")  
  #store all the clients that match the name searched    
  @clients = Client.where("name LIKE ? ", "%#{params[:client]}%")
end 
```

并且您可以在搜索视图中使用`@projects`and 。`@clients`

如果您试图在其他地方（例如`index`视图）显示结果，您可以将上述内容移至正确的操作。

```
 def index
  ....
  #store all the projects that match the name searched
  @projects = Project.where("name LIKE ? ", "%#{params[:project]}%")  
  #store all the clients that match the name searched    
  @clients = Client.where("name LIKE ? ", "%#{params[:client]}%")
end 
```

**编辑 2** - 好的，您正在尝试通过同一模型中的字段组合进行搜索：

您并更改您的搜索方法以添加这两个字段：

```
def self.search(search_project, search_client) 
  return scoped unless search_project.present? || search_client.present?
  where(['project_name LIKE ? AND client LIKE ?', "%#{search_project}%", "%#{search_client}%"])
end 
```

但请注意，`||`如果您的 search_project 或 search_client 不存在，将返回范围，如果您愿意，可以更改为 AND (&&)。

此外，`AND`只有当两者都匹配时才会返回，我的意思是搜索的组合......您也可以根据`OR`需要将其更改为。

拥有搜索表格：

您的搜索表单：

```
<%= form_tag search_index_path, method: :get do %>
  <%= text_field_tag :project, params[:project] %>
  <%= text_field_tag :client, params[:client] %>
  <%= submit_tag "Search", name: nil %>
<% end %> 
```

然后您的控制器必须将组合发送到模型：

```
@project_search = Project.search(params[:project], params[:client]).all 
```

我认为它会解决问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:44:48.430

我一直在我的应用程序中使用[MetaSearch](https://github.com/ernie/meta_search)，发现它非常方便。如果你已经考虑过了，你遇到了什么问题？

还有同一作者的[Ransack ，它是 MetaSearch 的继承者。](https://github.com/ernie/ransack)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-19T09:08:05.640

可以在这个[rails cast中找到一个简单的解释](http://railscasts.com/episodes/111-advanced-search-form-revised)

基本上，我们必须测试参数是否包含特定字段并创建过滤器。请参见下面的示例：

```
def find_products
  products = Product.order(:name)
  products = products.where("name like ?", "%#{keywords}%") if keywords.present?
  products = products.where(category_id: category_id) if category_id.present?
  products = products.where("price >= ?", min_price) if min_price.present?
  products = products.where("price <= ?", max_price) if max_price.present?
  products
end 
```

另一种选择是[Ransack](https://github.com/activerecord-hackery/ransack)。Ransack 可以为您的 Ruby on Rails 应用程序创建简单和高级的搜索表单

# asp.net - .net 共享变量

> ID：11609012
> 
> 赞同：1
> 
> 时间：2012-07-23T08:37:13.170
> 
> 标签：asp.net, .net, vb.net

我读过这样的帖子：[在 ASP.net 中使用静态变量缓存信息可以吗？](https://stackoverflow.com/questions/151021/is-it-ok-to-use-static-variables-to-cache-information-in-asp-net).

我试图了解静态变量的可见性。有一个 ASP.NET 进程 (W3WP) - 我意识到存在网络花园，但在我的场景中有一个 - 多个客户端可以连接。如果其中一个客户端将静态（共享）整数设置为 10，那么所有 Web 客户端是否会将共享变量视为 10？我试图了解共享变量是否类似于应用程序设置或会话设置。

这是否也适用于 VB.NET（客户端应用程序）。我读过一篇文章，其中谈到允许多个 VB.NET 客户端使用单个应用程序域。静态变量是否在具有单个应用程序域的所有客户端之间共享？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:38:51.687

静态/共享变量是每个 AppDomain 的，所以*是*的，该 AppDomain 的所有客户端都将看到相同的值。它与应用程序设置大致相当，是的。

（警告：除非该字段被标记`[ThreadStatic]`，但这在 Web 应用程序中是一个**非常**糟糕的主意。）

您应该**非常**谨慎地使用静态/共享字段，尤其是在线程环境中。除了用户/会话之间不正确的状态泄露之外，它们还存在固有的线程安全问题，您通常需要**非常**小心地同步对它们的访问。例如，`List<T>`如果多个线程可以同时添加/删除/等，那么静态将非常危险。

# c# - 写入没有文件路径的流

> ID：11609018
> 
> 赞同：2
> 
> 时间：2012-07-23T08:37:30.237
> 
> 标签：c#, .net, stream

我有遗留类，它使用 将一些结果写入文件`StreamWriter`，使用接受`FileStream`的构造函数创建，该构造函数之前是通过为其构造函数提供文件路径来创建的：

```
 using (FileStream fs = File.Open(outputFilePath, FileMode.Create))
        using (StreamWriter sw = new StreamWriter(fs))
        {
            MyFileWriter.WriteToFile(someData, sw);
        } 
```

顺便说一句，声明的代码用于 WCF 服务。
现在，我有新的要求，我必须将文件保存到客户端文件系统，并且我有限制，我只能将 byte[] 发送到客户端。我想对现有代码进行最小的更改以支持这一点，那么是否有某种流，例如，我可以创建某种流，而无需在其构造函数中指定文件路径？稍后我会将此流转换为`byte[]`.
我也对您可能有的任何其他想法持开放态度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T08:44:32.570

您可以使用 MemoryStream，

```
 byte[] result;
    using (MemoryStream ms = new MemoryStream())
    using (StreamWriter sw = new StreamWriter(ms))
    {
        MyFileWriter.WriteToFile(someData, sw);
        result = ms.ToArray();
    }

    // use the result byte[] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:42:14.703

使用`MemoryStream`.

```
using (MemoryStream ms =  new MemoryStream())
{
  using (StreamWriter sw = new StreamWriter(ms))
   {
     MyFileWriter.WriteToFile(someData, sw);
   }
} 
```

# c++ - C++ shared_ptr 数组类型访问

> ID：11609020
> 
> 赞同：1
> 
> 时间：2012-07-23T08:37:53.450
> 
> 标签：c++, shared-ptr

我正在为 SQL 数据库制作一个包装器，我返回的对象是`shared_ptr`.
我想支持数组类型的访问（即`row["column"]`代替`row->get("column")`）。存储的对象`shared_ptr`支持数组类型访问，但当然`shared_ptr`不支持。
我应该如何做到这一点`shared_ptrs`，我需要扩展课程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:58:43.757

最明显的是添加一个`operator[]`to `shared_ptr`。这意味着定义您自己的 shared_ptr 重用 std::shared_ptr 并让 [] 运算符按照您想要的方式工作。

这可以通过派生 shared_ptr 以一种快速而肮脏的方式完成（注意：shared_ptr 不是多态对象，所以不要在同一上下文中混淆 std:: 和你的，这样你就可以重用它们的接口）。

如果您是“如果析构函数不是虚拟就不要派生”的粉丝，那么您可以将 std::shared_ptr 嵌入其中，`yourptr`并将 shared_ptr 接口重写为`yourptr`一个，委托您必须保留的功能。

# iphone - iPhone/Objective-C：如何从定时器修改 UILabel

> ID：11609021
> 
> 赞同：1
> 
> 时间：2012-07-23T08:37:55.213
> 
> 标签：iphone, objective-c, timer

我有以下计时器：

```
uploadGPS_timer=[NSTimer scheduledTimerWithTimeInterval:5.0 target:self selector:@selector(uploadGPS_tick:) userInfo:nil repeats:YES];
[self uploadGPS_tick:nil]; 
```

这是回调：uploadGPS_tick()：

```
-(void)uploadGPS_tick:(NSTimer*)timer{
    if(!lat || !lng){
        //do nothing
    }else{
        NSString *urlStr=[[NSString alloc] initWithFormat:@"http://www.example.com/ajax/updateCoords.php"];
        NSURL *url=[NSURL URLWithString:urlStr];

        __block ASIFormDataRequest *request=[[ASIFormDataRequest alloc ]initWithURL:url];
        [request setPostValue:lat forKey:@"lat"];
        [request setPostValue:lng forKey:@"lng"];
        NSLog(@"EOH: %@",lat);
        [request setDelegate:self];
        [request setCompletionBlock:^{
            NSString *response=[request responseString];
            NSLog(@"%@",response);

            if([response isEqualToString:@"LO"]){
                [self.navigationItem setBackBarButtonItem:nil];
                DriverLogin *x= [[DriverLogin alloc] initWithNibName:nil bundle:nil];
                [[self navigationController]pushViewController:x animated:NO];
            }

            SBJsonParser *parser=[[SBJsonParser alloc]init];
            NSMutableDictionary *obj=[[NSMutableDictionary alloc]init ];
            obj=[[parser objectWithString:[request responseString] error:nil]retain];

            credits.text=[[obj objectForKey:@"credits"] stringValue];   //this won't show...
            creditsUsed.text=[[obj objectForKey:@"creditsUsed"] stringValue];   //this won't show...
            NSInteger timeLeftSecs=[[obj objectForKey:@"creditTimeLeft"] intValue];
            NSInteger timeLeftMins=(int)(timeLeftSecs/60);
            creditTimeLeft.text=[[NSString alloc]initWithFormat:@"%d",timeLeftMins];   //this won't show...

            NSLog(@"xxx:%@",obj);

        }];
        [request setFailedBlock:^{
            NSError *error =[request error];
            NSLog(@"%@",error);
            //do nothing
        }];
        [request startAsynchronous];
    }
} 
```

如您所见，每五秒钟，服务器就会发送一个 JSON 对象。然后解析这个 JSON 对象，并根据这个 JSON 数据设置三个 UILabel。

我遇到的麻烦是 UILabel 没有得到他们的文本集！即使我可以`NSLog(@"xxx:%@",obj);`在调试器中清楚地看到。UILabel 在 .xib 中正确连接。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:50:07.943

您应该从主线程执行此操作。用以下代码替换标签文本分配：

```
dispatch_async(dispatch_get_main_queue(), ^{
    creditTimeLeft.text=[NSString stringWithFormat:@"%d",timeLeftMins];

}); 
```

# c++ - C/C++中的算法速度测试器

> ID：11609026
> 
> 赞同：5
> 
> 时间：2012-07-23T08:38:16.957
> 
> 标签：c++, c

我必须以毫秒为单位计算我的算法的速度。在 C++/C 中，我该怎么做？我需要在输入之前和输出之后写smth，但究竟是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-23T08:47:18.333

You could use `clock()` function from `<time.h>`
`clock()` shows how many ticks have passed since your program started. The macro `CLOCKS_PER_SEC` contains the number of ticks per second, so you can actually get time.

```
//We start measuring here. Remember what was the amount of ticks in the 
//beginning of the part of code you want to test:
int start = clock();
//<...>
//Do your stuff here
//<...>
int end = clock();//Now check what amount of ticks we have now. 
//To get the time, just subtract start from end, and divide by CLOCKS_PER_SEC.
std::cout << "it took " << end - start << "ticks, or " << ((float)end - start)/CLOCKS_PER_SEC << "seconds." << std::endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T09:07:19.023

没有通用的方法来测量确切的时间或刻度。测量方法、操作系统和计算机上发生的其他事情（其他应用程序、图形输出、后台进程）都会影响结果。有多种方法可以进行“足够好”（在许多情况下）测量：

*   库函数

    时钟（...），clock_gettime（...）

从标准库（在`time.h`）和

```
gettimeofday(..) // for elapsed (wallclock) time
times(..) // process times 
```

适用于 linux 和其他 unix 系统（中`sys/time.h`）（根据 Oleg 的评论**编辑）**

*   硬件计数器：

    ```
    __inline__ uint64_t rdtsc(void) {
      uint32_t lo, hi;
      __asm__ __volatile__( // serialize
                    "xorl %%eax,%%eax \n        cpuid":::"%rax",
                    "%rbx", "%rcx", "%rdx");
      __asm__ __volatile__("rdtsc":"=a"(lo), "=d"(hi));
      return (uint64_t) hi << 32 | lo;
    }

    /*...*/
    uint64_t t0 = rdtsc();
    code_to_be_tested();
    uint64_t t1 = rdtsc(); 
    ```

我更喜欢这种方法，因为它直接读取硬件计数器。

*   对于 C++11：`std:chrono::highresolution_clock`

    ```
    typedef std::chrono::high_resolution_clock Clock;
      auto t0 = Clock::now();
      code_to_be_tested();
      auto t1 = Clock::now(); 
    ```

请记住，测量结果不会精确到时钟周期。即纳秒。我总是将微秒（10e-6 s）计算为最小的合理时间单位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:59:54.533

请注意，您可以使用 C++11 chrono 库中的日期和时间实用程序。来自[cppreference.com](http://en.cppreference.com/w/cpp/chrono)：

> chrono 库定义了三种主要类型（持续时间、时钟和时间点）以及实用函数和常用类型定义。

[请参阅此处](http://ideone.com/t8g4W)以 GCC 4.5.1 编译的文章中的示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:13:13.130

您可以使用此函数库：

```
// clock.c
#include <time.h>
#include "clock.h"

struct clock { clock_t c1, c2; };

void   start(clock *this) { this->c1 = clock(); }
void   stop (clock *this) { this->c2 = clock(); }
double print(clock *this) { return (double)(c1 - c2) / CLOCKS_PER_SEC; }

// clock.h
#ifndef CLOCK_H_INCLUDED
# define CLOCK_H_INCLUDED

typedef struct clock clock;

extern void   start(clock *);
extern void   stop (clock *);
extern double print(clock *);

#endif // CLOCK_H_INCLUDED 
```

但有时`clock`不是很适应：您可以使用您的系统功能，这可以更准确。

# python - 如何决定何时引入新类型而不是使用列表或元组？

> ID：11609027
> 
> 赞同：5
> 
> 时间：2012-07-23T08:38:16.563
> 
> 标签：python

我喜欢用 python 做一些愚蠢的事情，比如解决编程难题、编写小脚本等。每次在某个时刻，我都面临着一个两难选择，是应该创建一个新类来表示我的数据还是只使用快速和肮脏的方法所有值都打包在一个列表或元组中。由于极度懒惰和个人不喜欢`self`关键字，我通常选择第二种选择。

我知道从长远来看，用户定义的数据类型更好，因为`path.min_cost`and`point.x, point.y`比`path[2]`and更具表现力`point[0], point[1]`。但是当我只需要从一个函数中返回多个东西时，我觉得工作量太大了。

所以我的问题是选择何时创建用户定义的数据类型以及何时使用列表或元组的好的经验法则是什么？或者也许有一种我不知道的简洁的pythonic方式？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T08:56:10.167

你知道[`collections.namedtuple`](http://docs.python.org/dev/library/collections.html?highlight=namedtuple#collections.namedtuple)吗？（[从 2.6 开始](http://docs.python.org/library/collections.html?highlight=namedtuple#collections.namedtuple)）

```
def getLocation(stuff):
    return collections.namedtuple('Point', 'x, y')(x, y) 
```

或者，更有效地，

```
Point = collections.namedtuple('Point', 'x, y')
def getLocation(stuff):
    return Point(x, y) 
```

`namedtuple`可以通过 index ( `point[0]`) 和 unpacked ( `x, y = point`) 以与 相同的方式访问`tuple`，因此它提供了几乎无痛的升级路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:50:32.987

这当然是主观的，但我会尽量遵守最小意外原则。

如果您返回的值描述了一个对象的特征（如您的示例中的`point.x`和`point.y`），那么我将使用一个类。

如果它们不是同一个对象的一部分（比如说`return min, max`），那么它们应该是一个元组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T09:42:03.077

首先，关于表现力的观察。您提到关注,与的相对表达性`point.x`，但这是一个可以通过多种方式解决的问题。事实上，对于一个简单的结构，我认为有一个论点是一个类是矫枉过正的，特别是当你可以这样做时：`point.y``point[0], point[1]``point`

```
x, y = get_point(foo) 
```

`point.x`我想说这和, `point.y`;一样富有表现力。`__dict__`假设元组只包含几个项目，它也可能更快（无论如何都比普通类更快 - 没有查找）并且它非常易读。

我决定是否将某些内容放入类中的方法更多地与我将在整个程序中使用数据的方式有关：我问自己“是这种*状态*吗？” 如果我有一些我知道会发生很大变化的数据，并且需要存储在一个地方并由一组专门构建的函数操作，那么我知道数据可能是状态，我至少应该考虑将它放入一类。另一方面，如果我有一些不会改变的数据，或者是短暂的并且一旦我完成它就会消失，它可能不是状态，并且可能不需要进入课堂。

当然，这只是一个经验法则。例如，我可以想到您可能需要某种“记录”类型的情况，这样您就可以在没有 15 个不同的局部变量的情况下操作非常复杂的数据集合（因此存在[`namdetuple`](https://stackoverflow.com/a/11609287/577088)）。但通常，如果你只操作其中的一两个，你最好创建一个只接受一两个值并返回一两个值的函数，为此，元组或列表非常好。

# jquery - 来自xml的jquery html

> ID：11609028
> 
> 赞同：0
> 
> 时间：2012-07-23T08:38:17.830
> 
> 标签：jquery, html, xml, ajax, dom

[演示](https://www.dropbox.com/sh/zczlqywn1quk2kl/JDfaVs_iKb)。见控制台

让我们假设scenes.xml 是一个部分列表

```
<sections>
  <section>
    <div...
  </section>
  ...
</sections> 
```

并且`preload`是预定义的隐藏块。我正在使用 $.ajax 加载此 xml（当然使用 dataType:"xml"）并尝试获取 html：

```
$(xmlData).find("section").each(function() {
  console.log(preload.empty().append(this).html())
}) 
```

除了 7-10 之外，它在任何地方都可以完美运行。它抛出：

```
 DOM Exception: HIERARCHY_REQUEST_ERR (3)
 in jquery.js (1.7.2) on line 6497 
```

PS 当然我可以用**CDATA**包装每个部分并使用 text() 来获取 html。但我想避免这种解决方法，因为每个部分都是有效的 xml 或 html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:57:03.050

极端丑陋的解决方法：

```
preload.empty()
if($.browser.msie) {
  if($.browser.version == "7.0" or $.browser.version == "8.0") {
    preload.append($(xmlData.xml).filter("section"))
  } else {
    preload.append($(xmlData.xml).find("section"))
  }
} else {
  preload.append($(xmlData).find("section"))
}
html = preload.html()
preload.empty().html(html) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T13:24:16.097

`$.parseXML`如果您正在解析 XML，请使用。

# jakarta-ee - JBOSS 5.1 负载测试时 CPU 使用率高

> ID：11609030
> 
> 赞同：0
> 
> 时间：2012-07-23T08:38:19.173
> 
> 标签：jakarta-ee, jboss5.x, cpu-usage

我们在进行负载测试时观察到 jboss 5.1 的 CPU 使用率很高。

在**jboss-5.1.0.GA\server\default\deploy\jbossweb.sar路径下的****server.xml**中，我们通过以下方式在连接器中完成了线程配置

 **```
<Connector port="8080" address="${jboss.bind.address}"
         maxThreads="250" maxHttpHeaderSize="8192"
         emptySessionPath="true" protocol="HTTP/1.1"
         enableLookups="false" redirectPort="8443" acceptCount="100"
         connectionTimeout="20000" disableUploadTimeout="true" /> 
```

我们还在 jboss 的启动文件中将 JVM 大小增加到 1.5 gig。

但是我们仍然看到服务器的 CPU 使用率很高（接近 95% 到 98% 的使用率），而且这种情况有时会更多，服务器崩溃并导致 OutOfMemory 异常。

以前当我们使用 jboss 4 时，我们并没有遇到这个问题，但是现在在迁移到 jboss 5 之后，我们得到了这个问题。有人可以就此提出建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:44:04.297

我会[进行线程转储](https://community.jboss.org/wiki/ThreadDump)并[检查内存池的使用情况](https://community.jboss.org/wiki/HowCanIDisplayTheMemoryPoolUsage)，以查看您的 JBoss 实例中发生了什么。**

# rest - 使用 Twitter 的 REST API 从收藏夹中获取 faved_at 日期？

> ID：11609032
> 
> 赞同：2
> 
> 时间：2012-07-23T08:38:22.637
> 
> 标签：rest, date, twitter, favorites

是否有可能获取通过 REST API 创建收藏夹的日期？

谢谢，乌多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:59:31.387

不可以。[文档不包括收藏日期。](https://dev.twitter.com/docs/api/1/get/favorites)

# c# - 在linq中获得单词的同义词

> ID：11609050
> 
> 赞同：0
> 
> 时间：2012-07-23T08:39:19.997
> 
> 标签：c#, xml, linq

我想在 c# 中获得单词的同义词。例如，merhaba - hello 或 selam-hi。我只能对“你好”做“merhaba”，但我无法访问其他节点。（merhaba-hi 或 selam-hi）我该怎么做？谢谢。

我的 XML 文件。

```
<Words>
    <Meaning>
        <Turkish type="noun">merhaba</Turkish>
        <Turkish type="noun">selam</Turkish>
        <English type="noun">hello</English>
        <English type="noun">hi</English>
    </Meaning>
</Words> 
```

我的查询是这样的。

```
var word = from p in doc.Elements("Words").Elements("Meaning")
             where textBox1.Text == p.Element("Turkish").Value
             select new
             {
                _word = p.Element("Turkish").Value,
                meaning = p.Element("English").Value,
                kind = p.Element("English").Attribute("type").Value
             }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:40:54.497

你可能想尝试这样的事情：

```
var word = from p in doc.Elements("Words").Elements("Meaning")
           where p.Elements("Turkish").Any(item => item.Value == textBox1.Text)
           from synonym in p.Elements("English")
           select new
           {
               _word = textBox1.Text,
               meaning = synonym.Value,
               kind = synonym.Attribute("type").Value
           }; 
```

该表达式`p.Elements("Turkish").Any(item => item.Value == textBox1.Text)`查找包含所需单词的含义元素。该`from synonym in p.Elements("English")`行贯穿所有名为 的元素`English`。

# sockets - 使用 clisp 下载网站

> ID：11609051
> 
> 赞同：0
> 
> 时间：2012-07-23T08:39:21.840
> 
> 标签：sockets, url, lisp, common-lisp, clisp

我正在尝试使用 clisp 来转储网页，例如定义一个函数“read-url”，这样 (read-url "http://www.kernel.org/index.html") 将显示 html 源代码像：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- $Id: index.shtml,v 1.422 2012/02/09 17:13:11 root Exp $ -->

<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

  <title>The Linux Kernel Archives</title>
  <link rel="icon" type="image/png" href="favicon.ico" />
  <link rel="alternate" type="application/rss+xml"
        title="Latest Linux Kernel Version RSS"
        href="http://kernel.org/kdist/rss.xml" />
  <link rel="stylesheet" href="/kernel.css" type="text/css" />
...... 
```

有人知道怎么做吗？非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:08:34.217

试试[CLOCC/CLLIB/url.lisp](http://clocc.hg.sourceforge.net/hgweb/clocc/clocc/raw-file/tip/src/cllib/url.lisp)，见 with-open-url, url-get &c。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T17:34:52.790

我建议使用[drakma](http://weitz.de/drakma/)：“功能齐全的网络客户端”。

您可以轻松地将函数编写为：

```
(defun read-url (url)
   (drakma:http-request url)) 
```

然后它将返回相应的（由服务器发回）html代码。它工作得很好并且（据我探索）没有错误。

# jquery - jquery 空函数和事件处理程序

> ID：11609053
> 
> 赞同：6
> 
> 时间：2012-07-23T08:39:24.667
> 
> 标签：jquery

在“空”函数（http://api.jquery.com/empty/）的jquery文档中有以下语句：

```
"To avoid memory leaks, jQuery removes other constructs such as data and event handlers
from the child elements before removing the elements themselves." 
```

文本说：“...... jQuery 从 !CHILD! 元素中删除事件处理程序......”。但我希望事件处理程序也从 div 标签 ($("#mydiv").empty) 中删除。我知道有“删除”功能，但我的意图是不删除 div 标签。完成这项工作的最佳方法是什么？

另一件事是：
当他们说“删除事件处理程序”时。他们是只删除用“bind”制作的构造，还是也删除用“delegate”制作的构造？

非常感谢提前

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T08:47:03.007

To remove all bound event handlers from an element, you can pass the special value `"*"` to the [off()](http://api.jquery.com/off/) method:

```
$("#mydiv").empty().off("*"); 
```

When the documentation says `remove events handlers`, it only speaks of *bound* event handlers, not *delegated* ones, since these are bound to an ancestor element (or the document itself) which is not impacted by the removal.

This allows delegated handlers to keep working as intended if the removed element is reinstated later.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:50:03.927

如果我没看错你不想删除 div 标签，你只想删除所有数据和处理程序，在这种情况下将 .empty() 与：

```
http://api.jquery.com/unbind/ 
```

但是请注意：“使用 .bind() 附加的事件处理程序可以使用 .unbind() 删除。（从 jQuery 1.7 开始，首选 .on() 和 .off() 方法来附加和删除元素上的事件处理程序。 ) 在最简单的情况下，没有参数，.unbind() 删除所有附加到元素的处理程序："

使用与您绑定事件的方式相对应的删除工具。

如果你想删除你调用的元素，不要使用 .empty()，而是使用 .remove()。

```
http://api.jquery.com/remove/ 
```

“与 .empty() 类似，.remove() 方法将元素从 DOM 中取出。**当您想要删除元素本身以及其中的所有内容时，请使用 .remove()。除了元素本身，所有绑定事件和与元素关联的 jQuery 数据被移除。**要移除元素而不移除数据和事件，请改用 .detach()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-08T07:32:58.147

试试这个 jQuery 代码；

```
 jQuery('#element').bind('click',function(){
    console.log('clicked');
    }).on('remove',function(){
       console.log('element removed');
       jQuery(this).unbind('click').off('remove');
    });

    jQuery('#element').remove(); 
```

# c# - LINQ - 包含在？

> ID：11609057
> 
> 赞同：0
> 
> 时间：2012-07-23T08:39:47.970
> 
> 标签：c#, linq

我想在一个集合（继承另一个集合）中搜索一个属性值。

```
private ObservableCollection<User> userCollection = someData;

public class User
{
    public string Username { get; set; }
    public ObservableCollection<Department> Memberships { get; set; }
}

public class Department
{
    public string Name { get; set; }
}

//I can't use "Contains", because it requires an object of type "Department", but I don't have the object, just the string "Name" (in this case "MyDepartment")
var result = from usr in userCollection where (usr.Memberships.Contains("MyDepartment")) select usr; 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:41:20.743

使用[IEnumerable.Any](http://msdn.microsoft.com/en-us/library/bb534972.aspx)来实现你想要的。

例如 ：

```
(from usr in userCollection select usr).
               Any(x=>x.Username.Contains("MyDepartment")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T08:42:10.747

您可以使用`.Any()`on`IEnumerable`来实现您想要的。`true`如果集合中有一个或多个元素返回谓词，这将返回`true`。

```
var result = from usr in userCollection 
             where usr.Memberships.Any(m => m.Name == "MyDepartment")
             select usr; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:42:14.767

使用您的代码示例 - 您需要选择您正在检查的部门的等效部分到一个新集合中，然后您对它运行包含。

```
var result = from usr in userCollection where (usr.Memberships.Select(m=>m.Name).Contains("MyDepartment")) select usr; 
```

或者-`IEnumerable.Any`在这里比`Contains`-查看其他答案更好

# visual-studio - 为 windows 8 编写的应用程序可以在 windows phone 8 上运行吗？

> ID：11609058
> 
> 赞同：4
> 
> 时间：2012-07-23T08:39:53.757
> 
> 标签：visual-studio, windows-phone-7, windows-phone-8

正如微软所说，windows 8 和 windows phone 8 共享相同的代码库。如果我使用 Visual Studio 2012 RC 为 windows 8 编写一个应用程序。我想知道我是否可以在 windows phone 8 上安装和运行相同的应用程序？如果答案是肯定的，我们今天就可以通过学习适用于 windows 8 的 Visual Studio 2012 RC 为 windows phone 8 SDK 做好准备！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T00:23:23.263

现在他们还没有宣布一切，所以这只是我的猜测。

我猜您将**无法**将相同的应用程序（xap 文件）部署到 WP8 和 Windows 8。这是设计使然。为什么？因为它们是非常不同的系统。你的漂亮、快速和令人敬畏的 Windows Phone 应用程序会在 Windows 8 上很糟糕。没有灵丹妙药。HTML 也是如此。您必须创建单独的移动版网络应用程序，否则没有人会使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T08:42:50.797

它们共享相同的*内核*，可能还有很多 API。但这并不意味着您的应用程序运行的运行时环境是相同的。例如，非常不同的外形因素使得无论如何都需要调整应用程序。由于他们从未说过 Windows Phone 8 具有与 Windows 8 相同的应用程序编程模型，因此您目前可以放心地预期*不能*将相同的应用程序部署到 Windows 8 和 Windows Phone 8。

话虽如此，您可能希望在两个系统之间共享大量代码，特别是如果您使用 C# 或 C++（原生应用程序也将用于 WP8）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T17:18:19.140

为 WP8 编译的应用程序不仅可以在 Windows 8 上运行，而且您可以将大量代码共享到通用库中。
Windows Phone 8 SDK 中有一章介绍了面向 Windows 8 和 Windows Phone 8 开发的内容。大多数情况下可以通过可移植类库、在 W8 和 WP8 项目中引用公共文件或使用 Windows 运行时组件来实现。
[http://www.microsoft.com/en-us/download/details.aspx?id=35471](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T11:43:01.243

许多为 wp8 设计的应用程序也可以在 windows8 上运行，开发人员还必须决定它是否可以在这两种情况下运行，通常 windows8 没有足够的图形和运动控制，所以一些 WP 游戏不能在 windows8 上运行，你总是可以看到任何应用程序许可通知以了解它是否适​​用于 wp8 另一方面也有一些 Windows 游戏具有 WP 无法运行的那么多图形，例如，如果你想要像刺客信条这样的游戏，它将在两个操作系统上运行（WP ,window) 但以不同的方式所以它由定义 cap 包运行与否的游戏属性选择

# maven - 用于客户端/服务器应用程序的部署的 Maven？

> ID：11609061
> 
> 赞同：0
> 
> 时间：2012-07-23T08:40:08.113
> 
> 标签：maven, client-server, maven-3, legacy-code

我们目前正在从一个相当老的 Perl + Ant 构建系统迁移到 maven。

该软件本身是一个使用 RMI 作为主要通信系统的客户端/服务器应用程序，并且构建会产生（大量）数量的 jar。

这个软件早在通常的框架成熟之前就已经存在了，所以*它没有*使用：

*   任何常用的持久层（Hibernate/JPA 之类的）
*   任何 MVC 应用程序框架，例如 Spring
*   任何 Java EE 基础设施（无战争/耳朵包装）

事实上，它是作为一组 jar 和 conf 文件提供的，带有一组启动/管理脚本。

我们将编译/构建系统移植到 maven3。客户端和服务器部署树目前正在通过程序集插件移植到 maven。

在 maven 框架中，我们目前缺少的是能够在开发站上部署应用程序并构建服务器并运行一些基本的集成测试。

理想情况下，我们希望使用 maven in 来部署客户端、服务器和 DB 固定装置的映像（实际上也是生成的代码）。

我发现了很多关于如何部署 Web 应用程序的指示，很少有关于集成测试本身的指示，几乎没有关于如何使用 maven 处理（非常）老式 C/S 架构的部署的指示。

所以我的问题是：

*   是否有任何已知且成熟的插件能够部署该应用程序。并以 C/S 方式处理 DB 夹具？

如果没有，您的建议是什么：

*   使用 ant 规则并将它们绑定到 maven 生命周期以处理部署过程（我们有几个 ant 目标可以适应该过程）？
*   编写一个适合确切部署需求的 Maven 插件？

# java - Java 1.4 上的 ActiveMQ 客户端

> ID：11609062
> 
> 赞同：3
> 
> 时间：2012-07-23T08:40:14.113
> 
> 标签：java, activemq, java1.4

我们在最新版本 5.6.0 中使用 Active MQ。现在我们遇到了必须连接一个新客户端的问题，不幸的是这个客户端是使用 IBM JDK 1.4 开发的。将 ActiveMQ 添加到应用程序会导致以下错误：

```
UNEXPECTED ERROR OCCURRED: org/apache/activemq/ActiveMQConnectionFactory (Unsupported major.minor version 50.0) 
STACK TRACE: 
java.lang.UnsupportedClassVersionError: org/apache/activemq/ActiveMQConnectionFactory (Unsupported major.minor version 50.0) 
```

我们不想切换到较旧的 ActiveMQ 版本，因为还有其他应用程序使用当前版本。现在我的问题（我知道常见问题解答，尤其是[http://activemq.apache.org/can-i-use-activemq-5x-or-later-on-java-14.html](http://activemq.apache.org/can-i-use-activemq-5x-or-later-on-java-14.html)）：

是否有任何 ActiveMQ 客户端 jar 可用于连接到 Active MQ 5.6.0？例如，是否可以使用 ActiveMQ 4.0 客户端连接到 Active MQ 5.6.0？是否可以为此目的使用任何其他协议？有没有人运行成功的解决方案？

如果我必须使用我必须翻译的罐子上的最低设置的逆向翻译器？有没有人使用 IBM JDK 1.4 的经验？

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:51:36.387

您可以从 STOMP 连接到 ActiveMQ 代理，也可以使用较旧的 AMQ 5.x 客户端并进行连接。您当然可以尝试使用较旧的 4.x 客户端，但并不推荐。版本 5 客户端应该能够毫无问题地连接，但是无论何时使用旧客户端，您都会遇到新版本中修复的那些客户端中包含的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:32:42.487

您可以尝试[使用`-target 1.4`命令行选项从源代码自己（或 STOMP）构建 ActiveMQ，并解决其他交叉编译问题](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#crosscomp-example)。由于您有 1.4 库可用，您应该能够使用引导类路径中的那些库进行交叉编译。

交叉你的手指，你可能会因为对新的库元素 (nio) 没有任何硬依赖而感到幸运。或者你可能会找到解决它们的方法。

# facebook - Facebook API 获取新闻提要

> ID：11609066
> 
> 赞同：1
> 
> 时间：2012-07-23T08:40:42.450
> 
> 标签：facebook, social-networking

我在此页面上看到：[https://developers.facebook.com/docs/reference/api/] 新闻提要现已过时：

新闻提要（这是一个过时的观点，不反映 facebook.com 上的新闻提要）：[https](https://graph.facebook.com/me/home?access_token=) ://graph.facebook.com/me/home?access_token= ...

那么，获取新闻提要的替代技术是什么？（我认为是 Open Graph，但最简单的获取方法是什么？）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T20:01:01.880

这`me/home`是检索所需信息的最佳连接。最好的办法是每 5 分钟左右轮询一次 api 端点。

# php - jquery/ajax 形成另一个 div 刷新

> ID：11609068
> 
> 赞同：2
> 
> 时间：2012-07-23T08:40:44.117
> 
> 标签：php, jquery

我将从我的代码开始......

```
<script type="text/javascript">
$(document).ready(function(){
    $("#cForm").validate({
        debug: false,
        rules: {
            name: "required",
            email: {
                required: true,
                email: true
            },
            comment: "required"
        },
        messages: {
            name: "Empty.",
            email: "Invalid email.",
            comment: "Empty.",
        },
        submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('process.php', $("#cForm").serialize(), function(data) {
                $('#results').html(data);
            });
        }
    });
}); 
```

上面的代码在下面的表单中运行良好，并从我的 process.php 中将成功消息发送到带有 id 结果的 div 中，但在此之前我有另一个带有 id 注释的 div，它选择并显示来自这个 ajax 的同一个表中的数据/jquery form 存储数据...我想在提交表单时用最新的更改刷新它..先看看我的代码。

```
<div id="comments">
<h2>Comments</h2>
<?php
$query3 = "SELECT name, c_c, c_date FROM blog_comments WHERE art_id='$id'";
$result3 = @mysql_query($query3);
while($rr=mysql_fetch_array($result3))
{
    echo '<div class="comen">';
    echo "<h3>";
    echo $rr['name'];
    echo "</h3>";
    echo "<h4>";
    echo $rr['c_date'];
    echo "</h4>";
    echo "<p>";
    echo $rr['c_c'];
    echo "</p>";
    echo '</div>';
}
mysql_close();
?>
</div>
<p>Post your comments. All fields are obligatory.</p>
<div id="results"></div>
<form action="" id="cForm" name="cForm" method="post" class="cform">
 <table>
<tr><td><label for="name" id="name_label">Name</label></td><td><input type="text"     name="name" id="name" size="30" /></td></tr>
<tr><td><label for="email" id="email_label">Email</label></td><td><input type="text" name="email" id="email" size="30" /></td></tr>
<tr><td><label for="comment" id="comment_label">Comment</label></td><td><textarea name="comment" id="comment" cols="30" rows="5"></textarea></td></tr>
<tr><td><input type="hidden" name="idi" value="<?php echo $id ?>" /></td></tr>
<tr><td></td><td><input type="submit" name="submit" value="Submit" /></td></tr>
</table>
</form> 
```

我的进程 php 看起来像这样

```
if (isset($_POST['submit']))
{
include ('databas/conektion.php');
function escape_data ($data)
        {
            global $con;
            if (ini_get('magic_quotes_gpc'))
            {
                $data = stripslashes($data);
            }
        return mysql_real_escape_string($data,$con);
        }
        if (empty($_POST['name']))
        {
            $n = FALSE;
            echo '<p>Invalid name</p>';
        }
        else
        {
            $n = escape_data($_POST['name']);
        }
        if (empty($_POST['email']))
        {
            $e = FALSE;
            echo '<p>Invalid Email</p>';
        }
        else
        {
            $e = escape_data($_POST['email']);
        }
        if (empty($_POST['comment']))
        {
            $c = FALSE;
            echo '<p>Invalid Comments</p>';
        }
        else
        {
            $c = escape_data($_POST['comment']);
        }
        $id = $_POST['idi'];
        if($n && $e && $c)
        {
            $query2 = "INSERT INTO blog_comments (name, c_email, c_c, art_id, c_date) VALUES ('$n', '$e', '$c', '$id', NOW())";
            $result2 = @mysql_query($query2);
            if($result2)
            {
                echo '<p>Your comments have been posted successfully.</p>';
            }
            else
            {
                echo '<p>System Error</p><p>' . mysql_error() . '</p>';
            }
        mysql_close();
        }
        else
        {
            echo '<p style="color:red">Please try again.</p>';
        }
 }
?> 
```

我想要做的是刷新带有 id 注释的 div，一旦提交表单。我应该在我的代码中进行哪些更改...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:46:48.670

*   Create a new file called comments.php (with source code of your comments block)
*   Initially load comments
    `$(document).ready(function() { $("#comments_div").load("comments.php"); });`
*   Then when you want to refresh, just call `$("#comments_div").load("comments.php");` ie. from your first given code

    ```
    submitHandler: function(form) {
        // do other stuff for a valid form
        $.post('process.php', $("#cForm").serialize(), function(data) {
            $('#results').html(data);
            $("#comments_div").load("comments.php");
        });
    } 
    ```

EDIT:

If you have an ID in your url, then replace

```
 $("#comments_div").load("comments.php"); 
```

with

```
 $.get("comments.php", {"id": "<?=(0+$_GET['id'])?>"}, 
              function(response) {
                 $("#comments_div").html(response);
              }
           ); 
```

Where your_id is the name of GET parameter.

EDIT2:

So how about if you try something like:

```
 $.get("comments.php", {id: <?php echo (0+$_GET['id']); ?>}, 
              function(response) {
                 $("#comments_div").html(response);
              }
            ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T01:16:00.200

谢谢兄弟的帮助，给了我这么多时间……我的头标签现在看起来完全像这样……

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?php echo $page_title; ?></title>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js">       </script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
$(document).ready(function(){
    $("#cForm").validate({
        debug: false,
        rules: {
            name: "required",
            email: {
                required: true,
                email: true
            },
            comment: "required"
        },
        messages: {
            name: "Empty.",
            email: "Invalid email.",
            comment: "Empty.",
        },
        submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('process.php', $("#cForm").serialize(),  function(data) {
                $('#results').html(data);
                 $.get("comment.php", {"id": "<?=(0+$_GET['id'])?>"}, 
          function(response) {
             $("#comment").html(response);
          }
       );
            });
        }
    });
});
</script>
<script type="text/javascript">
$(document).ready(function() {  $.get("comment.php", {"id": "<?=(0+$_GET['id'])?>"}, 
          function(response) {
             $("#comment").html(response);
          }
       ); });
</script>
</head> 
```

# javascript - 使用 jquery 对子转发器控件中的文本框值求和，并在页脚的标签中显示总数

> ID：11609069
> 
> 赞同：0
> 
> 时间：2012-07-23T08:40:59.170
> 
> 标签：javascript, jquery

我在 jquery 中尝试使用此代码对子转发器控件中的文本框值求和，并在页脚的标签中显示总数。我得到`null is null or not an object`错误。

```
function display(objSecName) {
    var objsec = objSecName;
    // var lablTotAmount = document.getElementById(objSecName);
    alert(objsec);
    $('.totamt input[type=text]').each(function () {
        $(this).change(function () {
            alert(calsum());
        });
    });

    function calsum() {
        var Total = 0;
        var limtamt = 120000;

        $('.totamt input[type=text]').each(function () {
            if (!isNaN(this.value) && this.value.length != 0) {
                Total += parseFloat($(this).val());
                document.getElementById(lblTotalAmountId80C).value = Total;
            }
        });
        return Total;
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:36:38.970

嗯，您应该在此处发布时尝试限制您的代码。我为你清理了一下。在这种情况下，isNaN 很可能有点烦人，我用 jquery-variant isNumeric 替换了它。

```
function display(objSecName) {
  $('.totamt input[type=text]').change(function () {
     alert(calsum());
  });

  function calsum() {
    var total = 0;
    $('.totamt input[type=text]').each(function () {
      var value = parseFloat(this.value);
      if ($.isNumeric(value)) {
        total += value;
      }
    });
    document.getElementById(lblTotalAmountId80C).value = total;
    return total;
  };
} 
```

# spring - Spring Security - 我可以同时使用命名空间和过滤器链吗？

> ID：11609070
> 
> 赞同：6
> 
> 时间：2012-07-23T08:41:00.857
> 
> 标签：spring, spring-security

我正在使用弹簧安全性，我必须同时使用过滤器链和命名空间。命名空间工作正常，但过滤器链似乎没有！
这是我的配置。一、命名空间：

```
<sec:global-method-security secured-annotations="enabled" />

<sec:http pattern="/app/login.jsp*" security="none" />
<sec:http pattern="/admin/login.jsp*" security="none" />
<sec:http pattern="/app/*.png" security="none" />
<sec:http pattern="/admin/*.png" security="none" />
<sec:http pattern="/app/**" authentication-manager-ref="authenticationManager"
    access-decision-manager-ref="accessDecisionManager">
    <sec:intercept-url pattern="/app/**" access="ROLE_USER" />
    <sec:access-denied-handler error-page="/app/login.jsp?aer=" />
    <sec:form-login login-processing-url="/app/j_spring_security_check"
        always-use-default-target="true" default-target-url="/app/index.html"
        login-page='/app/login.jsp' authentication-failure-url='/app/login.jsp?login_error' />
    <sec:logout logout-url="/app/j_spring_security_logout"
        invalidate-session="true" logout-success-url="/app/login.jsp" />
</sec:http>
<sec:http pattern="/admin/**" authentication-manager-ref="authenticationManager"
    access-decision-manager-ref="accessDecisionManager">
    <sec:intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
    <sec:access-denied-handler error-page="/admin/login.jsp?aer=" />
    <sec:form-login login-processing-url="/admin/j_spring_security_check"
        always-use-default-target="true" default-target-url="/admin/index.html"
        login-page='/admin/login.jsp' authentication-failure-url='/admin/login.jsp?login_error' />
    <sec:logout logout-url="/admin/j_spring_security_logout"
        invalidate-session="true" logout-success-url="/admin/login.jsp" />
</sec:http> 
```

这工作正常。但我还需要一个过滤器链来检查其他请求。（这些请求是动态创建的，我们必须以这种方式控制它们）
这是我的过滤器链：

```
<bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
    <security:filter-chain-map path-type="ant">

    <sec:filter-chain pattern="/css/**" filters="none" />
    <sec:filter-chain pattern="/common/**" filters="none" />
    <sec:filter-chain pattern="/images/**" filters="none" />
    <sec:filter-chain pattern="/login.jsp*" filters="none" />
    <sec:filter-chain pattern="/rest/**"
        filters="
        ConcurrentSessionFilter,
        securityContextPersistenceFilter,
        logoutFilter,
        authenticationProcessingFilter,
        sessionManagementFilter,
        exceptionTranslationFilter,
        filterSecurityInterceptor" />

    </security:filter-chain-map> 
</bean> 
```

问题是，**过滤器链不控制任何东西**。我确信当不使用命名空间时过滤器链工作正常。但是当我添加命名空间时，问题就开始了。
为什么？我不能用那个吗？或者我可以而且我必须改变一些东西？

**更新：**
调用此资源时，这是我的调试日志：`/rest/asrv/gtallmmbrsofusrgrp`

```
DEBUG AntPathRequestMatcher           - Checking match of request : '/rest/asrv/gtallmmbrsofusrgrp'; against '/app/login.jsp*'
DEBUG AntPathRequestMatcher           - Checking match of request : '/rest/asrv/gtallmmbrsofusrgrp'; against '/admin/login.jsp*'
DEBUG AntPathRequestMatcher           - Checking match of request : '/rest/asrv/gtallmmbrsofusrgrp'; against '/app/*.png'
DEBUG AntPathRequestMatcher           - Checking match of request : '/rest/asrv/gtallmmbrsofusrgrp'; against '/admin/*.png'
DEBUG AntPathRequestMatcher           - Checking match of request : '/rest/asrv/gtallmmbrsofusrgrp'; against '/app/**'
DEBUG AntPathRequestMatcher           - Checking match of request : '/rest/asrv/gtallmmbrsofusrgrp'; against '/admin/**'
DEBUG FilterChainProxy                - /rest/asrv/gtallmmbrsofusrgrp has no matching filters 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T16:47:54.070

我认为您在 web.xml 中缺少 DelegatingFilterProxy 条目。但无论如何，

从 Spring 3.1 开始，FilterChainProxy 使用 SecurityFilterChain 实例列表进行配置，并且不推荐使用 FilterChainMap。所以尝试这样配置它：

```
<bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
    <constructor-arg>
        <list>
            <sec:filter-chain pattern="/css/**" filters="none" />
            <sec:filter-chain pattern="/common/**" filters="none" />
            <sec:filter-chain pattern="/images/**" filters="none" />
            <sec:filter-chain pattern="/login.jsp*" filters="none" />
            <sec:filter-chain pattern="/rest/**"
                filters="
                ConcurrentSessionFilter,
                securityContextPersistenceFilter,
                logoutFilter,
                authenticationProcessingFilter,
                sessionManagementFilter,
                exceptionTranslationFilter,
                filterSecurityInterceptor" />
        </list>
    </constructor-arg>
</bean> 
```

并将过滤器添加到您的 web.xml 中，如下所示：

```
<filter>
    <filter-name>filterChainProxy</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>filterChainProxy</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

[API 文档](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/FilterChainProxy.html)

**更新 1**：

要将日志记录添加到您的应用程序，只需将 log4j jar 放在路径上，然后在类路径下添加一个 log4j.properties 文件。

Log4j.properties：

```
log4j.rootCategory=INFO, stdout
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ISO8601} %-5p %c %M - %m\n

log4j.category.org.springframework.security=DEBUG 
```

另请参阅[使用 Log4j 进行日志记录](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/overview.html#overview-logging-log4j)

**更新2**：它似乎对我有用，我在rest目录中放置了一个测试页面welcome.xhtml。调试日志如下：

```
2012-07-30 00:26:05,917 DEBUG org.springframework.security.web.util.AntPathRequestMatcher matches - Checking match of request : '/rest/welcome.xhtml'; against '/javax.faces.resource/**'
2012-07-30 00:26:05,923 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 1 of 11 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter'
2012-07-30 00:26:05,923 DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository readSecurityContextFromSession - No HttpSession currently exists
2012-07-30 00:26:05,923 DEBUG org.springframework.security.web.context.HttpSessionSecurityContextRepository loadContext - No SecurityContext was available from the HttpSession: null. A new one will be created.
2012-07-30 00:26:05,925 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 2 of 11 in additional filter chain; firing Filter: 'LogoutFilter'
2012-07-30 00:26:05,925 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 3 of 11 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter'
2012-07-30 00:26:05,925 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 4 of 11 in additional filter chain; firing Filter: 'BasicAuthenticationFilter'
2012-07-30 00:26:05,925 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 5 of 11 in additional filter chain; firing Filter: 'RequestCacheAwareFilter'
2012-07-30 00:26:05,925 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 6 of 11 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter'
2012-07-30 00:26:05,926 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 7 of 11 in additional filter chain; firing Filter: 'RememberMeAuthenticationFilter'
2012-07-30 00:26:05,926 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 8 of 11 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter'
2012-07-30 00:26:05,928 DEBUG org.springframework.security.web.authentication.AnonymousAuthenticationFilter doFilter - Populated SecurityContextHolder with anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS'
2012-07-30 00:26:05,928 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 9 of 11 in additional filter chain; firing Filter: 'SessionManagementFilter'
2012-07-30 00:26:05,929 DEBUG org.springframework.security.web.session.SessionManagementFilter doFilter - Requested session IDD44EAA53A767F3DC9C7338D3CD335198 is invalid.
2012-07-30 00:26:05,929 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 10 of 11 in additional filter chain; firing Filter: 'ExceptionTranslationFilter'
2012-07-30 00:26:05,929 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml at position 11 of 11 in additional filter chain; firing Filter: 'FilterSecurityInterceptor'
2012-07-30 00:26:05,929 DEBUG org.springframework.security.web.util.AntPathRequestMatcher matches - Checking match of request : '/rest/welcome.xhtml'; against '/login.xhtml'
2012-07-30 00:26:05,929 DEBUG org.springframework.security.web.util.AntPathRequestMatcher matches - Checking match of request : '/rest/welcome.xhtml'; against '/*'
2012-07-30 00:26:05,929 DEBUG org.springframework.security.web.util.AntPathRequestMatcher matches - Checking match of request : '/rest/welcome.xhtml'; against '/admin/**'
2012-07-30 00:26:05,930 DEBUG org.springframework.security.web.access.intercept.FilterSecurityInterceptor beforeInvocation - Public object - authentication not attempted
2012-07-30 00:26:05,932 DEBUG org.springframework.security.web.FilterChainProxy doFilter - /rest/welcome.xhtml reached end of additional filter chain; proceeding with original chain
2012-07-30 00:26:06,229 DEBUG org.springframework.security.web.access.ExceptionTranslationFilter doFilter - Chain processed normally 
```

我认为这是您拥有的两个表单登录导致问题。尝试只有一个登录表单，然后根据角色控制导航。例如，请参阅此问题：[我可以使用一个登录页面来重定向具有 Spring 3.0 安全性的不同页面..吗？](https://stackoverflow.com/questions/11486222/can-i-use-one-login-page-to-redirect-different-page-with-spring-3-0-security/11488598)

# jquery - 从 3 个字段计算的日期

> ID：11609074
> 
> 赞同：0
> 
> 时间：2012-07-23T08:41:33.153
> 
> 标签：jquery, forms, datepicker, timestamp

我的表格中有 3 个字段。一个带有日期打包器的字段和两个带有小时和分钟选择字段的字段。是否有可能将这 3 个字段中的数据转换为时间戳？

```
<label for="date_from">Date *</label>
<input type="text" size="20" id="date_from" name="[date_from]" value="" readonly="readonly" />

<label for="time_from_hour">Hour: </label>
<select id="time_from_hour" name="[time_from_hour]" class="select">
    <option value="">---</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
</select>
<span> : </span>

<label for="time_from_minute" style="display: none;">Minute: </label>
<select id="time_from_minute" name="[time_from_minute]" class="select">
    <option value="">---</option>
    <option value="00">00</option>
    <option value="15">15</option>
    <option value="30">30</option>
    <option value="45">45</option>
</select> 
```

对不起我的英语：P

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:48:24.307

这可能会有所帮助 [http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

并且您始终`formatDate`可以拥有可打印的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:13:26.070

如果您获得的日期是格式，`mm/dd/yyy hh:mm`那么您可以尝试以下代码

```
var myDate="7/23/2012 10:03";
myDate=myDate.split("/");
var newDate=myDate[1]+","+myDate[0]+","+myDate[2];
var timestamp = (new Date(newDate).getTime()/1000); 
```

您可能需要进行更改以满足您的要求

# jsp - 仅为登录用户包含 header.jsp

> ID：11609075
> 
> 赞同：1
> 
> 时间：2012-07-23T08:41:34.447
> 
> 标签：jsp, header, include

我有`index.jsp`，我需要在其中包含一个`header.jsp`。问题是 - header.jsp 包含动态菜单（对于已登录用户和未登录用户）我可以检查用户是否已登录或未使用会话`index.jsp`。但不在`header.jsp`

在这种情况下如何包含标题？

我可以访问会话对象`header.jsp`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:48:16.430

中添加条件语句`header.jsp`。（假设您已经命名了会话密钥`islogged`，表示用户是否登录的*状态）*

```
<c:choose>
 <c:when test="${not empty islogged}">
   //html markup for logged user
 </c:when>
 <c:otherwise>
  //html markup for not logged user
 </c:otherwise>
</c:choose> 
```

编辑 ：

@我没有维护任何会话密钥..但我想..我该怎么做？

创建一个[servlet ，在 doPost() 方法中比较用户名和密码，如果用户通过了](https://stackoverflow.com/tags/servlets/info)*身份验证*，则设置会话键值。

[您可以通过检查filter](https://stackoverflow.com/tags/servlet-filters/info)中的会话键值来验证用户（无论他/她是否已登录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:49:37.737

您可以将表达式放入头文件中，以检查您的登录条件。例如。

```
<%
    if(user.session != null)
    {
      //includeFile here 
%>
      <jsp:include file="header.jsp" />
<%
    }
%> 
```

# php - websockets socket_select错误

> ID：11609076
> 
> 赞同：1
> 
> 时间：2012-07-23T08:41:37.067
> 
> 标签：php, websocket, phpwebsocket

您好，我正在尝试在客户端和服务器之间实现 websocket 通信。问题是当我尝试启动服务器时，我在命令行中收到此错误

```
# php -q htdocs\socket\server\startDaemon.php
2012-07-23 10:10:02 System: Socket Resource id #7 cre
2012-07-23 10:10:02 System: Socket bound to localhost
2012-07-23 10:10:02 System: Start listening on Socket

Strict Standards: Only variables should be passed by reference in 
C:\xampp\htdocs\socket\server\socketWebSocket.class.php on line 35 
```

第 35 行的代码如上：

```
$num_sockets = socket_select($changed_sockets,$write=NULL,$exceptions=NULL,NULL); 
```

我已经寻找答案，但没有任何效果。有谁能够帮助我？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T08:44:19.537

尝试

```
$write=NULL;
$exceptions=NULL;

$num_sockets = socket_select($changed_sockets,$write,$exceptions, NULL); 
```

# c# - EF 代码优先迁移：没有 NUGET 的 MigrateDatabaseToLatestVersion

> ID：11609080
> 
> 赞同：12
> 
> 时间：2012-07-23T08:42:03.510
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-migrations

我需要帮助来阐明 EF Code First Migrations 如何在生产机器上工作。我有一些实体类和 DbContext 派生类来访问实体。现在，我想执行以下几件事：

*   当我的应用程序启动时，它必须创建数据库，如果数据库不存在；
*   然后必须将数据库模式调整为模型；
*   如果刚才创建了数据库，我想创建一些索引；
*   另外，如果数据库刚刚创建，它必须由一些初始数据作为种子；
*   所有这些事情都必须自动执行，无需任何 NUGET 命令或外部工具。

我读过一些关于迁移的文章，但它们主要关注 NUGET 的使用或运行时的纯自动数据库更新（通过`MigrateDatabaseToLatestVersion`）。我知道`DbMigration`类，但我不明白如何将`MigrateDatabaseToLatestVersion`策略和`DbMigration`.

**更新。**
事实上，我不能在项目中使用 NUGET，我需要能够“手动”进行迁移。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-23T09:26:23.473

只需使用`MigrateDatabaseToLatestVersion`.

> 当我的应用程序启动时，它必须创建数据库，如果数据库不存在；

`MigrateDatabaseToLatestVersion`会那样做

> 然后必须将数据库模式调整为模型；

`MigrateDatabaseToLatestVersion`会那样做

> 如果刚才创建了数据库，我想创建一些索引；

`Sql`为您的数据库和方法创建基于代码的初始迁移，`Up`以定义您需要的所有索引。

> 另外，如果数据库刚刚创建，它必须由一些初始数据作为种子；

再次用于`Sql`初始迁移或`Seed`迁移配置中的方法

> 所有这些事情都必须自动执行，无需任何 NUGET 命令或外部工具

NuGet 和命令将帮助您在设计时准备它（但您可以简单地引用所需的程序集并自己编写所有代码）。运行时不需要任何 powershell 命令。

`DbMigrator``MigrateDatabaseToLatestVersion`适用于您不想使用并且想要控制代码迁移的场景。

# python - 0x88 棋盘表示中的行号。

> ID：11609088
> 
> 赞同：1
> 
> 时间：2012-07-23T08:42:28.703
> 
> 标签：python, chess

如果移动是伪合法的，我正在制作一个返回 True 的函数。问题是，为了找出棋子是否在它的起始位置，我必须循环这一行中的所有方格，看看棋子所在的方格是否在那个范围内。有一个更好的方法吗 ？我可以以某种方式计算典当所在的行号或其他东西吗？

```
# Pawn.
    if piece == PAWN:
        if not from_piece & 8: # White pawn.
            if start_point < end_point: # Can't move backwards.
                return False
            elif diff == 32 and start_point in range(96, 104) and not board[start_point - 16] and not board[end_point]:
                pass # Valid case, skip next elif statement. Can move 2 spaces at the starting position. 
            elif diff != 16:
                return False 

        else: # Black pawn.
            if start_point > end_point: # Can't move backwards.
                return False
            elif diff == 32 and start_point in range(16, 24) and not board[end_point + 16] and not board[end_point]:
                pass # Valid case, skip next elif statement. Can move 2 spaces at the starting position. 
            elif diff != 16:
                return False 

        if diff == 16 and board[end_point]: # Can't move ahead one square if there's already a piece.
            return False 
        elif (diff == 15 or diff == 17) and board[end_point]: # Can't move one step diagonal when there's no enemy piece. 
            return False
return True 
```

我编写了程序，让白棋的值为 1，黑棋的值为 9。空方格用 0 表示。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:26:26.787

您可能想重新考虑您的模型，对我来说它看起来有点不必要的复杂。但是，您可以进行整数除法，而不是循环：

```
(...)
elif diff == 32 and start_point / 16 == 6 and not board[end_point + 16] and not board[end_point]:
    (...)

elif diff == 32 and start_point / 16 == 1 and not board[end_point + 16] and not board[end_point]:
    (...) 
```

## 编辑（回复评论）：

就个人而言，我认为您的代码看起来像是用 Python 完成的典型 C 表示数据的方法。这并没有错，但我怀疑大多数 pythonistas 会做一些事情，比如定义一个`board`类或提供一些实用方法：

```
board = [...]

def xy288(field):
    """Converts from (col, row) to [0...127]"""
    return field[0] * 16 + field[1]

def is_white(field):
    board[xy288(field)] <=8

def row(field):
    return field[0]

def col(field):
    return field[1]

def is_pawn(field):
    return board[xy288(field)] % 8 == PAWN

def is_empty(field):
    return board[xy288(field)] == 0

def valid_move(start, end):
    # use tuples for encoding start and end, ie. start = (4,7)
    if is_pawn(start):
        direction = 1 if is_white(start) else -1
        if col(start) == col(end) and \
           row(start) == row(end) + 2*direction and \
           is_empty(end) and \
           is_empty((row(start) + direction, col(start)):
           pass 
```

这个想法是使代码具有语义和自包含性，即我不必查看板的定义方式来了解valid_move 的工作原理。请注意，Python 中具有全局范围的变量可能非常棘手 - 即。在这个例子中它可以工作，但是如果你在一个函数中*改变*或分配一个变量，它会自动假设本地范围。

# asynchronous - 等待取消异步工作流

> ID：11609089
> 
> 赞同：4
> 
> 时间：2012-07-23T08:42:31.647
> 
> 标签：asynchronous, concurrency, f#

对象的`Cancel`成员`CancellationTokenSource`“传达取消请求”，我认为这意味着它是触发后忘记并且不会等到取消完成（例如，所有异常处理程序都已运行）。这很好，但我需要等到一个未完成的异步完全取消后再创建另一个异步。有没有简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T10:50:45.597

我认为没有任何直接的方法可以使用 F# 异步库中的标准库函数来做到这一点。当工作流（实际）取消时，我们最接近的操作`Async.TryCancelled`会运行回调，但是必须手动将回调中的消息发送到启动工作流的代码。

使用事件和我编写的 F# 异步扩展（也包含在 FSharpX 包中）的扩展相对容易解决 - 该扩展`GuardedAwaitObservable`可用于等待事件的发生（可由某些人立即触发）手术）。

以下`Async.StartCancellable`方法采用异步工作流并返回`Async<Async<unit>>`. 当您在外部工作流程上绑定时，它会启动参数（如`Async.StartChild`），当您在返回的内部工作流程上绑定时，它会取消计算并等待直到实际取消：

```
open System.Threading

module Async = 
  /// Returns an asynchronous workflow 'Async<Async<unit>>'. When called
  /// using 'let!', it starts the workflow provided as an argument and returns
  /// a token that can be used to cancel the started work - this is an
  /// (asynchronously) blocking operation that waits until the workflow
  /// is actually cancelled 
  let StartCancellable work = async {
    let cts = new CancellationTokenSource()
    // Creates an event used for notification
    let evt = new Event<_>()
    // Wrap the workflow with TryCancelled and notify when cancelled
    Async.Start(Async.TryCancelled(work, ignore >> evt.Trigger), cts.Token)
    // Return a workflow that waits for 'evt' and triggers 'Cancel'
    // after it attaches the event handler (to avoid missing event occurrence)
    let waitForCancel = Async.GuardedAwaitObservable evt.Publish cts.Cancel
    return async.TryFinally(waitForCancel, cts.Dispose) } 
```

**编辑**按照乔恩的建议将结果包装`TryFinally`起来处理。`CancellationTokenSource`我认为这应该足以确保它被正确处理。

这是使用该方法的示例。该`loop`功能是我用于测试的简单工作流程。其余代码启动它，等待 5.5 秒然后取消它：

```
/// Sample workflow that repeatedly starts and stops long running operation
let loop = async {
  for i in 0 .. 9999 do
    printfn "Starting: %d" i
    do! Async.Sleep(1000)
    printfn "Done: %d" i }

// Start the 'loop' workflow, wait for 5.5 seconds and then
// cancel it and wait until it finishes current operation  
async { let! cancelToken = Async.StartCancellable(loop)
        printfn "started"
        do! Async.Sleep(5500)
        printfn "cancelling"
        do! cancelToken
        printfn "done" }
|> Async.Start 
```

为了完整起见，带有来自 FSharpX 的必要定义的示例[位于 F# snippets 上](http://www.fssnip.net/d4)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T14:47:14.327

考虑到易于使用的同步原语，这应该不难。我特别喜欢只写一次的“逻辑”变量：

```
type Logic<'T> =
    new : unit -> Logic<'T>
    member Set : 'T -> unit
    member Await : Async<'T> 
```

很容易包装一个 Async 在完成时设置一个逻辑变量，然后等待它，例如：

```
type IWork =
    abstract member Cancel : unit -> Async<unit>

let startWork (work: Async<unit>) =
    let v = Logic<unit>()
    let s = new CancellationTokenSource()
    let main = async.TryFinally(work, fun () -> s.Dispose(); v.Set())
    Async.Start(main, s.Token)
    {
        new IWork with
            member this.Cancel() = s.Cancel(); v.Await
    } 
```

逻辑变量的可能实现可能是：

```
type LogicState<'T> =
    | New
    | Value of 'T
    | Waiting of ('T -> unit)

[<Sealed>]
type Logic<'T>() =
    let lockRoot = obj ()
    let mutable st = New
    let update up =
        let k =
            lock lockRoot <| fun () ->
                let (n, k) = up st
                st <- n
                k
        k ()

    let wait (k: 'T -> unit) =
        update <| function
            | New -> (Waiting k, ignore)
            | Value value as st -> (st, fun () -> k value)
            | Waiting f -> (Waiting (fun x -> f x; k x), ignore)

    let await =
        Async.FromContinuations(fun (ok, _, _) -> wait ok)

    member this.Set<'T>(value: 'T) =
        update <| function
            | New -> (Value value, ignore)
            | Value _ as st -> (st, ignore)
            | Waiting f as st -> (Value value, fun () -> f value)

    member this.Await = await 
```

# json - Jstree、JSON_DATA 插件和特殊字符

> ID：11609090
> 
> 赞同：0
> 
> 时间：2012-07-23T08:42:35.623
> 
> 标签：json, character-encoding, jstree

我的页面上有一个 jstree 树结构，它使用 JSON 数据和 AJAX。有一些斯堪的纳维亚字符（ä 和 ö）处理不当。

Jstree 通过 Java servlet 过滤器获取 JSON 结构。该结构被编码为 UTF-8。当我用 firebug 查看返回的 JSON 结构时，斯堪的纳维亚字符显示正确。我尝试将字符编码更改为 ISO 8859-4 只是为了看看它是否有帮助，但它没有。

我不确定代码的哪些部分与此问题相关，但这里有一些部分。

初始化树：

```
.jstree({   
    "json_data" : {
        "ajax" : {
            "url" : hostUrl+"/json/getAreaTree?treeType=Areas",
            "data" : function (n) {
                    return { id : n.attr ? n.attr("id") : 0 };
                }
        }
    }, 
```

一些servlet过滤器代码：

```
protected class GetAreaTreeContext extends ActionContext implements StreamResponseContext{

    private byte[] bytes;

    public GetAreaTreeContext() {
        super("getAreaTree");
    }

    @Override
    public byte[] getBytes() {
        return this.bytes;
    }

    @Override
    public String getContentType() {
        return "application/json; charset=UTF-8";
    }

    @Override
    protected boolean doAction() {
        if (!getWebSessionObject().isValid())
            return false;
        Map<String,Object> p = getParameterMap();
        String type = (String)p.get("treeType");
        String id = (String)p.get("id");
        if(id.equals("1") || id.equals("0") || id.equals("id1") || id.equals("id0")){ //get the tree only if request comes from initial situation (id=0) or the root (id=1)
            try {
                this.bytes = ObjectFactory.getInstance().getDbManager().getAreaFolderTree(type, phone).getBytes();
            } catch (Exception ex) {
                this.result = "";
            }
            return bytes.length > 0;
        }else{
            //init the array again so that when empty folders make ajax requests, they dont get the tree
            this.bytes = new byte[0];
            return true;
        }
    }

} 
```

如何让 jstree JSON_DATA 插件处理 UTF-8 编码的斯堪的纳维亚字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-28T20:49:34.657

我今天恰好遇到了这个问题。尽管`Øst`当我在（Safari）调试器中检查节点时，我可以看到数据回调在 JSON 中返回，但它被呈现为`�st`. 但是，[Ricola3D](https://stackoverflow.com/users/1365265/ricola3d)的建议对我有用。我添加`Content-Type: application/json;charset=UTF-8`到响应标头中，渲染立即清理。

YMMV：我们的服务器端堆栈是 Clojure+Ring，代理在 Apache 之后，并且 Content-Type 标头似乎确实会影响从服务器返回的编码，无论是从 Ring 还是底层码头层。坦率地说，我不确定添加内容类型标头是否会改变浏览器中的 JSON 解析器解码响应正文的方式，或者改变响应正文在 Web 服务器中的编码方式。

# c# - 如何根据第一个 ListView 中的选定值显示第二个 ListView？

> ID：11609103
> 
> 赞同：2
> 
> 时间：2012-07-23T08:43:12.480
> 
> 标签：c#, asp.net, sql-server-2008-r2, sqldatasource

我是一名新的 ASP.NET 开发人员，我必须创建一个测验引擎应用程序。我正在使用三个 LiveView 控件来显示： 测验信息 问题信息（基于第一个 ListView 上选择的测验） 答案信息（基于第二个 ListView 上选择的问题）

我有以下数据库设计：

```
QuizContent Table: ID, QuizID, QuestionID, AnswerID
Quiz Table: QuizID, Title, Description
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
Answers Table: AnswerID, Answer 
```

我现在想要的是以下内容：当用户（管理员）来到测验引擎页面时，他应该只看到第一个 ListView，主要是关于测验信息。当他选择其中一个测验时，第二个 ListView 将显示该所选测验的问题信息。当他选择其中一个问题时，第三个 ListView 将显示该问题的答案信息。

**那么该怎么做呢？**

我知道我不应该发布太多的代码或信息，但我必须这样做才能明确：

```
<div align="center">
            <asp:ListView ID="ListView1" runat="server" DataKeyNames="QuizID" 
                DataSourceID="SqlDataSource1" InsertItemPosition="LastItem" >

                <EditItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update"  runat="server" CommandName="Update" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                        </td>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </EditItemTemplate>
                <EmptyDataTemplate>
                    <table id="Table1" runat="server" style="">
                        <tr>
                            <td>
                                No data was returned.</td>
                        </tr>
                    </table>
                </EmptyDataTemplate>
                <InsertItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add"  runat="server" CommandName="Insert" />

                            <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel"  runat="server" CommandName="Cancel" />
                        </td>

                        <%--<td>
                            &nbsp;</td>--%>
                        <td>
                            <asp:TextBox ID="TitleTextBox" runat="server" Text='<%# Bind("Title") %>' />
                        </td>
                        <td>
                            <asp:TextBox ID="DescriptionTextBox" runat="server" 
                                Text='<%# Bind("Description") %>' />
                        </td>
                    </tr>
                </InsertItemTemplate>
                <ItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete"  runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit"  runat="server" CommandName="Edit" />

                            <asp:ImageButton ID="SelectButton" ImageUrl="Images/icons/select.png" ToolTip="Select"  runat="server" CommandName="Select" />
                            <%--<asp:Button ID="SelectButton" runat="server" CommandName="Select" Text="Select" />--%>
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </ItemTemplate>
                <LayoutTemplate>
                    <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Title</th>
                                <th style="border-bottom:2px solid #003366; ">Description</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>
                </LayoutTemplate>
                <SelectedItemTemplate>
                    <tr style="">
                        <td>
                            <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                            <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                        </td>
                        <%--<td>
                            <asp:Label ID="QuizIDLabel" runat="server" 
                                Text='<%# Eval("QuizID") %>' />
                        </td>--%>
                        <td>
                            <asp:Label ID="TitleLabel" runat="server" Text='<%# Eval("Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="DescriptionLabel" runat="server" 
                                Text='<%# Eval("Description") %>' />
                        </td>
                    </tr>
                </SelectedItemTemplate>
            </asp:ListView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 

                SelectCommand="SELECT * FROM [Quiz]" 
                DeleteCommand="DELETE FROM [Quiz] WHERE [QuizID] = @QuizID" 
                InsertCommand="INSERT INTO [Quiz] ([Title], [Description]) VALUES (@Title, @Description)" 

                UpdateCommand="UPDATE [Quiz] SET [Title] = @Title, [Description] = @Description WHERE [QuizID] = @QuizID">
                <DeleteParameters>
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Title" Type="String" />
                    <asp:Parameter Name="Description" Type="String" />
                    <asp:Parameter Name="QuizID" Type="Int32" />
                </UpdateParameters>
            </asp:SqlDataSource>
    </div>

    <br /><br />

    <%--Second ListView that will contain the content of the quiz--%>
    <div align="center">
        <asp:ListView ID="ListView2" runat="server" DataSourceID="SqlDataSource2" 
            DataKeyNames="QuestionID" InsertItemPosition="LastItem">

            <EditItemTemplate>

                <tr style="">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        <asp:Label ID="QuestionIDLabel1" runat="server" 
                            Text='<%# Eval("QuestionID") %>' />
                    </td>--%>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" 
                            Text='<%# Bind("Question") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' />
                    </td>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table runat="server" 
                    style="">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel"  runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        &nbsp;</td>--%>
                    <td>
                        <asp:TextBox ID="QuestionTextBox" runat="server" 
                            Text='<%# Bind("Question") %>' />
                    </td>
                    <td>
                        <asp:TextBox ID="QuestionOrderTextBox" runat="server" 
                            Text='<%# Bind("QuestionOrder") %>'/>
                    </td>
                    <td>
                        <asp:TextBox ID="AnswerExplanationTextBox" runat="server" 
                            Text='<%# Bind("AnswerExplanation") %>' />
                    </td>
                </tr>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />

                        <asp:ImageButton ID="SelectButton" ImageUrl="Images/icons/select.png" ToolTip="Select" runat="server" CommandName="Select" />
                            <%--<asp:Button ID="SelectButton" runat="server" CommandName="Select" Text="Select" />--%>
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                        <thead>
                            <tr style="background-color:#C6D7B5;">
                                <th style="border-bottom:2px solid #003366; ">...</th>
                                <th style="border-bottom:2px solid #003366; ">Question</th>
                                <th style="border-bottom:2px solid #003366; ">Question Order</th>
                                <th style="border-bottom:2px solid #003366; ">Answer Explanation</th>
                            </tr>
                       </thead>
                       <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                    </table></div>     
            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="QuestionLabel" runat="server" Text='<%# Eval("Question") %>' />
                    </td>
                    <td>
                        <asp:Label ID="QuestionOrderLabel" runat="server" 
                            Text='<%# Eval("QuestionOrder") %>' />
                    </td>
                    <td>
                        <asp:Label ID="AnswerExplanationLabel" runat="server" 
                            Text='<%# Eval("AnswerExplanation") %>' />
                    </td>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>

        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT * FROM [Question]"

            DeleteCommand="DELETE FROM [Question] WHERE [QuestionID] = @QuestionID" 
            InsertCommand="INSERT INTO [Question] ([Question], [QuestionOrder], [AnswerExplanation]) VALUES (@Question, @QuestionOrder, @AnswerExplanation)" 

            UpdateCommand="UPDATE [Question] SET [Question] = @Question, [QuestionOrder] = @QuestionOrder, [AnswerExplanation] = @AnswerExplanation WHERE [QuestionID] = @QuestionID">
                <DeleteParameters>
                    <asp:Parameter Name="QuestionID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Question" Type="String" />
                    <asp:Parameter Name="QuestionOrder" Type="Int32" />
                    <asp:Parameter Name="AnswerExplanation" Type="String" />
                    <asp:ControlParameter ControlID="ListView1" Name="QuizID" PropertyName="SelectedValue" Type="Int32" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Question" Type="String" />
                    <asp:Parameter Name="QuestionOrder" Type="Int32" />
                    <asp:Parameter Name="AnswerExplanation" Type="String" />
                </UpdateParameters>

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView1" Name="QuizID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>

        <br /><br />

    <%--Third ListView that will contain the content of the quiz--%>
    <div align="center">
        <asp:ListView ID="ListView3" runat="server" DataSourceID="SqlDataSource3" 
            DataKeyNames="AnswerID" InsertItemPosition="LastItem">

            <EditItemTemplate>

                <tr style="">
                    <td>
                        <asp:ImageButton ID="UpdateButton" ImageUrl="Images/icons/update24.png" ToolTip="Update" runat="server" CommandName="Update" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/cancel324.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        <asp:Label ID="AnswerIDLabel1" runat="server" Text='<%# Eval("AnswerID") %>' />
                    </td>--%>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" 
                            Text='<%# Bind("Answer") %>' />
                    </td>
                </tr>
            </EditItemTemplate>

            <EmptyDataTemplate>
                <table runat="server" 
                    style="">
                    <tr>
                        <td>
                            No data was returned.</td>
                    </tr>
                </table>
            </EmptyDataTemplate>

            <InsertItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="InsertButton" ImageUrl="Images/icons/add24.png" ToolTip="Add" runat="server" CommandName="Insert" />

                        <asp:ImageButton ID="CancelButton" ImageUrl="Images/icons/clear24.png" ToolTip="Cancel" runat="server" CommandName="Cancel" />
                    </td>
                    <%--<td>
                        &nbsp;</td>--%>
                    <td>
                        <asp:TextBox ID="AnswerTextBox" runat="server" 
                            Text='<%# Bind("Answer") %>'/>
                    </td>
                </tr>

            </InsertItemTemplate>

            <ItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <%--<td>
                        <asp:Label ID="AnswerIDLabel" runat="server" Text='<%# Eval("AnswerID") %>' />
                    </td>--%>
                    <td>
                        <asp:Label ID="AnswerLabel" runat="server" Text='<%# Eval("Answer") %>' />
                    </td>
                </tr>
            </ItemTemplate>

            <LayoutTemplate>
                <div ><table id="thetable" width="97%" cellpadding="0px" cellspacing="0px" style="margin:0px 0px 0px 0px; border:2px solid #003366; font-size:13px; font-weight:bold;">
                    <thead>
                        <tr style="background-color:#C6D7B5;">
                            <th style="border-bottom:2px solid #003366; ">...</th>
                            <th style="border-bottom:2px solid #003366; ">Answer</th>
                        </tr>
                    </thead>
                    <tbody><tr id="itemPlaceholder" runat="server"></tr></tbody>
                </table></div>
            </LayoutTemplate>
            <SelectedItemTemplate>
                <tr style="">
                    <td>
                        <asp:ImageButton ID="DeleteButton" ImageUrl="Images/icons/delete24.png" ToolTip="Delete" runat="server" CommandName="Delete" />

                        <asp:ImageButton ID="EditButton" ImageUrl="Images/icons/edit24.png" ToolTip="Edit" runat="server" CommandName="Edit" />
                    </td>
                    <td>
                        <asp:Label ID="AnswerLabel" runat="server" 
                            Text='<%# Eval("Answer") %>' />
                    </td>
                </tr>
            </SelectedItemTemplate>
        </asp:ListView>
        </div>

        <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
            ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
            SelectCommand="SELECT * FROM [Answers] WHERE QuestionID = @QuestionID"

            DeleteCommand="DELETE FROM [Answers] WHERE [AnswerID] = @AnswerID" 
            InsertCommand="INSERT INTO [Answers] ([Answer]) VALUES (@Answer)" 

            UpdateCommand="UPDATE [Answers] SET [Answer] = @Answer WHERE [AnswerID] = @AnswerID">
                <DeleteParameters>
                    <asp:Parameter Name="AnswerID" Type="Int32" />
                </DeleteParameters>
                <InsertParameters>
                    <asp:Parameter Name="Answer" Type="String" />
                    <asp:ControlParameter ControlID="ListView2" Name="QuestionID" PropertyName="SelectedValue" Type="Int32" />
                </InsertParameters>
                <UpdateParameters>
                    <asp:Parameter Name="Answer" Type="String" />
                </UpdateParameters>

            <SelectParameters>
                <asp:ControlParameter ControlID="ListView2" Name="QuestionID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource> 
```

**注意：** 我没有任何代码隐藏。

**更新：**

问题如下：当我运行代码时，我会看到三个 ListView 控件。它应该只显示其中之一。此外，通过显示所有 ListView 控件，即使我在第一个 ListView 中选择了一个测验，我仍然会在第二个和第三个 ListView 控件中看到与第一个 ListView 中所选测验无关的相同内容，我不知道为什么。

更新＃2：现在，它适用于我，但我不知道为什么我在第二个 ListView 中两次（重复）获得该选定测验的一组问题，如下所示：

![在此处输入图像描述](../Images/c997adcc74a6c4f08c9650e68ced11cb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:12:46.040

你快到了，因为你已经有了这样的代码：

```
<SelectParameters>
    <asp:ControlParameter ControlID="ListView1" Name="QuizID" 
        PropertyName="SelectedValue" Type="Int32" />
</SelectParameters> 
```

这就是将一个 ListView 与另一个绑定所需的所有代码

你的问题是你至少有两个`UpdatePanels`，一个更新面板是一个允许在你的页面上**部分呈现的控件。**这意味着默认情况下，当异步回发发生时**，只有更新面板下的控件才会刷新。**

您需要做的是连接这三个`UpdatePanels`以在它们之间强制刷新。为此，您需要在面板中添加触发器：

在您的`UpdatePanel1`面板中添加：

```
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="ListView1" EventName="SelectedIndexChanged" />
</Triggers> 
```

在您的`UpdatePanel2`面板中添加：

```
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="ListView2" EventName="SelectedIndexChanged" />
</Triggers> 
```

基本上将父级添加为触发器`ListView.SelectedIndexChanged`

## 编辑 1

好吧，根据您的评论，您的查询是错误的

这是一个我认为它应该看起来的例子：

**SqlDataSource2**

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
   ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
   SelectCommand="SELECT [Question].* FROM [Question] INNER JOIN [QuizContent] ON [QuizContent].[QuizID] = @QuizID" 
```

**SqlDataSource3**

```
<asp:SqlDataSource ID="SqlDataSource3" runat="server" 
   ConnectionString="<%$ ConnectionStrings:QuizSysDBConnectionString %>" 
   SelectCommand="SELECT [Answers].* FROM [Answers] INNER JOIN [QuizContent].QuestionID = @QuestionID" 
```

我认为这些查询应该有效。老实说，您的设计不是传统的，相同的设计不会包含`QuizContent`表格（也许我遗漏了一些东西）。此问题的传统设计如下所示：

```
Quiz Table: QuizID, Title, Description
Question Table: QuestionID, QuizID, Question, QuestionOrder, AnswerExplanation
Answers Table: AnswerID, QuestionID, Answer 
```

# algorithm - 通过代码求解联立方程

> ID：11609107
> 
> 赞同：12
> 
> 时间：2012-07-23T08:43:33.663
> 
> 标签：algorithm, math, equation

这似乎是一个非常简单和愚蠢的问题，但我发现的一切都太复杂了，我无法理解。

我有这两个非常基本的联立方程：

```
X = 2x + 2z
Y = z - x 
```

鉴于我知道 X 和 Y，我将如何找到 x 和 z？手动完成很容易，但我不知道如何在代码中完成。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T09:32:10.477

> 这似乎是一个非常简单和愚蠢的问题

一点也不。这是一个很好的问题，不幸的是它有一个复杂的答案。我们来解决

```
a * x + b * y = u
c * x + d * y = v 
```

我在这里坚持 2x2 案例。更复杂的案例将需要您使用库。

首先要注意的是，[克莱默公式](http://en.wikipedia.org/wiki/Cramer%27s_rule)不好用。当你计算行列式时

```
a * d - b * c 
```

只要你有`a * d ~ b * c`，那么你就有[灾难性的取消](http://en.wikipedia.org/wiki/Loss_of_significance)。这种情况很典型，*一定要*提防。

简单性/稳定性之间的最佳权衡是[部分旋转](http://en.wikipedia.org/wiki/Pivot_element#Partial_and_complete_pivoting)。假设`|a| > |c|`. 那么系统等价于

```
a * c/a * x + bc/a * y = uc/a
      c * x +    d * y = v 
```

这是

```
cx + bc/a * y = uc/a
cx +       dy = v 
```

现在，将第一个减去第二个产量

```
cx +       bc/a * y = uc/a
     (d - bc/a) * y = v - uc/a 
```

现在很容易解决：`y = (v - uc/a) / (d - bc/a)`和`x = (uc/a - bc/a * y) / c`。计算`d - bc/a`比 更稳定`ad - bc`，因为我们除以最大数（这不是很明显，但它成立——用非常接近的系数进行计算，你会明白它为什么有效）。

现在，如果`|c| > |a|`，您只需交换行并以类似方式继续。

在代码中（请检查 Python 语法）：

```
def solve(a, b, c, d, u, v):
    if abs(a) > abs(c):
         f = u * c / a
         g = b * c / a
         y = (v - f) / (d - g)
         return ((f - g * y) / c, y)
    else
         f = v * a / c
         g = d * a / c
         x = (u - f) / (b - g)
         return (x, (f - g * x) / a) 
```

您可以使用完全旋转（要求您交换 x 和 y，以便第一次除法始终按最大系数），但这写起来更麻烦，而且几乎不需要 2x2 的情况。

对于 nxn 情况，所有旋转的东西都被封装到[LU 分解](http://en.wikipedia.org/wiki/LU_decomposition)中，你应该为此使用一个库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T10:44:46.247

@Alexandre，您错过了一个条件。这是最终代码

```
void SolveLinearEquations (float a,float b,float c,float d,float u,float v, float &x, float &y)
{
float f;
float g;
if (abs(a) > abs(c))
{
     f = u * c / a;
     g = b * c / a;
     y = (v - f) / (d - g);
     if(c != 0)
        x = (f - g * y) / c;
     else
        x = (u - b * y)/a;
}
else
{
    f = v * a / c;
     g = d * a / c;
     x = (u - f) / (b - g);
     if (a != 0)
        y = (f - g * x) / a ;
     else
        y = (v - d * x)/c;
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T13:12:57.060

```
(1)  ax + by = c    
(2)  dx + dy = f

(3)1*d     adx + bdy  = cd
(4)2*b     abx + bdy  = fb

(3)-(4)   adx - abx  = cd - fb

          x(ad-ab) = cd - fb

          x = (c*d - f*b)/(a*d-a*b) //use this equation for x

ax + by = c
     by = c - ax

     y = (c - a*x)/b    //use this equation for y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-16T14:08:32.517

以下功能可能对某些人有用：

```
function solve(s1,s2){    //only works if coefficients > 0

   str=s1 + " " +s2
   str=str.replace(/[^0123456789.-]/g, ' ') //eliminate letters
   str=str.replace( /\s\s+/g, ' ' )         //no double spaces

   var n=str.split(" ");            //put into an array
   var a=0,b=1,c=2,d=3,e=4,f=5      //see what were doing
   var x = ( n[c]*n[e] -n[b]*n[f])/(n[a]*n[e] - n[b]*n[d])
   var y= (n[c]-n[a]*x)/n[b]

   return({x:x, y:y})
} 
```

要使用：

```
result=solve("12x +  2y =32", "9x -5y=55")
alert (result.x+" ----- "+result.y) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-21T08:14:07.647

求解算法：Ax + By = C, Dx + Ey = F

开始

```
1)  PRINT "Enter A"
2)  INPUT A
3)  PRINT "Enter B"
4)  INPUT B
5)  PRINT "Enter C"
6)  INPUT C
7)  PRINT "Enter D"
8)  INPUT D
9)  PRINT "Enter E"
10) INPUT E
11) PRINT "Enter F"
21) INPUT F

22) detS <-- AE - BC
22) detX <-- CE - BF
24) detY <-- AF - CD

25) x <-- detX / detS
26) y <-- detY / detS

27) PRINT x, y 
```

结尾

# openerp - 在 openerp 中计算年龄

> ID：11609108
> 
> 赞同：0
> 
> 时间：2012-07-23T08:43:41.857
> 
> 标签：openerp

我想让代码可以计算年龄

```
def _compute_age(self, cr, uid, ids, field_name, field_value, context=None):
    records = self.browse(cr, uid, ids, context=context)
    result={}
    for r in records:
        age=0
        if r.date_birth:
            d = strptime(r.date_birth,"%Y-%m-%d")
            count = date(d[0],d[1],d[2])-date.today()
            age = count.days/365 
        result[r.id] = age
    return result 
```

但是错误**的“光标”对象没有“浏览”属性**，有什么问题？

PS：这是我的新代码

```
def _compute_age(self, cr, uid, ids,field_name,field_value,arg, context=None):
    records = self.browse(cr, uid, ids, context=context)
    result = {}
    for r in self.browse(cr, uid, ids, context=context):
        age=0
        if r.date_birth:
            print date_birth
            age = (datetime.now()-datetime.strptime(r.date_birth,"%Y-%m-%d")).days/365.25
        result[r.id] = age 

    return result
_columns = {
    'date_birth': fields.date('Date of Birth'),
    'age' : fields.function(_compute_age, type='char', method=True, string='Age'), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:35:17.523

该错误消息与日期计算无关。您可能正在使用与您正在使用的 OpenERP 版本不兼容的模块。

您需要提供有关您的模块、OpenERP 和插件版本以及完整回溯的更多详细信息。

虽然与错误无关，但您的年龄计算会产生负值。

一个更简单的代码是：

```
from datetime import datetime
...
    if r.date_birth:
        age = (datetime.now()-datetime.strptime(r.date_birth,"%Y-%m-%d")).days/356 
```

* * *

关于下面的新代码和错误消息，您不能通过分配给新索引来附加到列表，`result`而是改为字典；更改`result = []`为`result = {}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T05:05:45.390

以下是我的代码。它返回一个字符串。

```
from dateutil.relativedelta import relativedelta
from datetime import datetime
def _compute_age(self, cr, uid, ids, field_name, arg, context={}):
    result = {}
    now = datetime.now()
    for r in self.browse(cr, uid, ids, context=context):
      if r.date_birth:
        dob = datetime.strptime(r.date_birth,'%Y-%m-%d')
        delta=relativedelta (now, dob)
        result[r.id] = str(delta.years) +"y "+ str(delta.months) +"m "+ str(delta.days)+"d" #if you only want date just give delta.years
      else:
        result[r.id] = "No DoB !"
    return result

_columns = {
    'age' : fields.function(_compute_age, method=True, type='char', size=32, string='Age',),
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T04:36:43.157

我创建了学生模块并使用计算字段从出生日期字段中获取年龄字段

模型.py

```
from openerp import models, fields, api
from dateutil.relativedelta import relativedelta
from datetime import date

class studentimg(models.Model):

     _name = 'studentimg.studentimg'
     name=fields.Char('Student')
     email = fields.Char('Email')
     phone = fields.Char('Phone')
     gender = fields.Selection([('m','Male'),('f','Female')],'Gender')
     is_active =fields.Boolean('Active')
     birth_date=fields.Date('Birth Date')
     age=fields.Char('Age',compute='calculate_age')
     image=fields.Binary()
     mat=fields.Integer('Maths')
     phy=fields.Integer('Physics')
     tot=fields.Integer('Total',compute='_computediff')

     @api.onchange('phy')
     def _computediff(self):
          self.tot = self.mat + self.phy

     def calculate_age(self):
         today = date.today()
         #self.age= today.year -  self.birth_date.year - ((today.month, today.day) < (self.birth_date.month, self.birth_date.day))
         yr=int(self.birth_date[0:4])
         mt=int(self.birth_date[5:7])
         dt=int( self.birth_date[8:10])
         self.age = today.year - yr - ((today.month, today.day) < (mt, dt)) 
```

模板.xml

```
<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>
<record id='student_form_view' model="ir.ui.view">
    <field name="name">Student Form View</field>
        <field name="model">studentimg.studentimg</field>
        <field name="arch" type="xml">
            <form string="Student Information">
                <sheet>
                        <field name="image" widget="image" class="oe_left oe_avatar"/>
                    <h2>
                        <field name="name"/>
                    </h2>
                           <notebook>
                             <page string="Public Information">
                                 <group>
                                          <group string="Contact Information" class="oe_left oe_avatar">
                                           <field name="email"/>
                                           <field name="phone"/>
                                          </group>

                                          <group string="Student Details">
                                             <field name="gender"/>
                                             <field name="is_active"/>
                                          </group>
                                          <group string="DOB">
                                              <field name="birth_date"/>
                                              <field name="age"/>
                                          </group>
                                          <group string="Total Marks">
                                              <field name="mat"/>
                                              <field name="phy"/>
                                              <field name="tot"/>
                                          </group>
                                 </group>
                             </page>
                           </notebook>
                </sheet>
            </form>
        </field>
</record>

<record id='student_tree_view' model="ir.ui.view">
    <field name="name">Student Tree View</field>
        <field name="model">studentimg.studentimg</field>
        <field name="arch" type="xml">
            <tree string="Student Details">
                <field name="image"/>
                <field name="name"/>
                <field name="email"/>
                <field name="phone"/>
                <field name="gender"/>
                <field name="is_active"/>
                <field name="birth_date"/>
            </tree>
        </field>
</record>
<record id="students_students_action" model="ir.actions.act_window">
       <field name="name">Students</field>
       <field name="res_model">studentimg.studentimg</field>
       <field name="view_mode">tree,form</field>
</record> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-13T07:25:10.960

```
birth_date = fields.Date('Birth Date')
age = fields.Char('Age',compute='_cal_age')

 @api.multi
    @api.depends('birth_date')
    def _cal_age(self):
        today = date.today()
        for record in self:
            age = []
            dob = fields.Date.from_string(record.birth_date)
            gap = relativedelta(today, dob)
            if gap.years > 0:
                record.age = str(gap.years) + ' Years'
            else:
                raise UserError(_('Birth Date must be Low than the Current Date')) 
```

# linux - 如何从用户空间访问系统调用？

> ID：11609110
> 
> 赞同：20
> 
> 时间：2012-07-23T08:43:53.947
> 
> 标签：linux, system-calls

我阅读了 LKD ¹中的一些段落， 但我无法理解以下内容：

> **从用户空间访问系统调用**
> 
> 通常，C 库提供对系统调用的支持。用户应用程序可以从标准头文件中提取函数原型并与 C 库链接以使用您的系统调用（或库例程，反过来，使用您的系统调用调用）。但是，如果您只是编写系统调用，那么 glibc 是否已经支持它是值得怀疑的！
> 
> 值得庆幸的是，Linux 提供了一组宏来包装对系统调用的访问。它设置寄存器内容并发出陷阱指令。这些宏被命名为，其中0 到 6 之间。该数字对应于传递给系统调用的参数数量，因为宏需要知道预期有多少参数，因此需要推入寄存器。例如，考虑系统调用，定义为`_syscall*n*()`*`n`*`open()`
> 
> ```
> long open(const char *filename, int flags, int mode) 
> ```
> 
> 在没有显式库支持的情况下使用此系统调用的系统调用宏将是
> 
> ```
> #define __NR_open 5
> _syscall3(long, open, const char *, filename, int, flags, int, mode) 
> ```
> 
> 然后，应用程序可以简单地调用`open()`.
> 
> 对于每个宏，有 2+2×n 个参数。第一个参数对应于系统调用的返回类型。第二个是系统调用的名称。接下来按照系统调用的顺序为每个参数的类型和名称。`__NR_open`定义在`<asm/unistd.h>`; 它是系统调用号。宏通过`_syscall3`内联汇编扩展为 C 函数；程序集执行上一节中讨论的步骤，将系统调用号和参数推送到正确的寄存器中，并发出软件中断以陷入内核。将这个宏放在应用程序中是使用`open()`系统调用所需的全部内容。
> 
> 让我们编写宏来使用我们出色的新`foo()`系统调用，然后编写一些测试代码来展示我们的努力。
> 
> ```
> #define __NR_foo 283
> __syscall0(long, foo)
> 
> int main ()
> {
>         long stack_size;
> 
>         stack_size = foo ();
>         printf ("The kernel stack size is %ld\n", stack_size);
>         return 0;
> } 
> ```

***应用程序可以简单地调用`open()`***是什么意思？

此外，对于最后一段代码， 的声明在`foo()`哪里？我怎样才能使这段代码可编译和可运行？我需要包含哪些头文件？

__________
¹ *Linux 内核开发*，作者 Robert Love。  [wordpress.com 上的 PDF 文件](https://ignorelist.files.wordpress.com/2012/01/linux_kernel_development__3rd_edition_.pdf)（转到第 81 页）；[谷歌图书搜索结果](https://books.google.com/books?id=5BwdBAAAQBAJ&pg=PA81&dq=%22Accessing+the+System+Call+from+User-Space%22&hl=en&sa=X&ved=0ahUKEwiC5YbK3vDUAhUIez4KHYyQB0MQ6AEIJjAA#v=onepage&q=%22Accessing%20the%20System%20Call%20from%20User-Space%22&f=false)。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-23T09:27:58.873

您首先应该了解[linux 内核](http://en.wikipedia.org/wiki/Linux_kernel)的作用是什么，并且应用程序*仅*通过[系统调用](http://en.wikipedia.org/wiki/System_call)与内核交互。

实际上，应用程序在内核提供的“虚拟机”上运行：它在[用户空间](http://en.wikipedia.org/wiki/User_space)中运行，并且只能执行（在最低机器级别）在[用户 CPU 模式下](http://en.wikipedia.org/wiki/CPU_modes)允许的由指令增强的机器指令集（例如`SYSENTER`或`INT 0x80`...）用于进行系统调用。因此，从用户级应用程序的角度来看，系统调用是原子伪机器指令。

[Linux Assembly Howto](http://tldp.org/HOWTO/Assembly-HOWTO/)解释了如何在程序集（即机器指令）级别完成系统调用。

[GNU libc](http://www.gnu.org/software/libc/)提供了对应于系统调用的 C 函数。因此，例如[open](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)函数是 number 的系统调用上方的一个小胶水（即包装器）`NR__open`（它正在制作系统调用然后更新`errno`）。应用程序通常在 libc 中调用此类 C 函数，而不是进行系统调用。

^(您可以使用其他一些`libc`. 例如，[MUSL libc](http://musl-libc.org/)就显得“更简单”了，而且它的代码可能更容易阅读。它还将原始系统调用包装到相应的 C 函数中。)

如果您添加自己的系统调用，最好也实现一个类似的 C 函数（在您自己的库中）。因此，您的库还应该有一个头文件。

另请参见[intro(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/intro.2.html)和[syscall(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/syscall.2.html)和[syscalls(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)手册页，以及[VDSO 在 syscalls 中](http://davisdoesdownunder.blogspot.fr/2011/02/linux-syscall-vsyscall-and-vdso-oh-my.html)的作用。

请注意，[系统调用](http://syscalls.kernelgrok.com/)不是 C 函数。它们不使用调用堆栈（甚至可以在没有任何堆栈的情况下调用它们）。系统调用基本上是一个类似于`NR__open`from的数字`<asm/unistd.h>`，它是一条`SYSENTER`机器指令，约定哪些寄存器在系统调用的参数之前保存，哪些在系统调用的结果[s] 之后保存（包括失败结果，`errno`在 C 库包装中设置系统调用）。系统调用的约定不是 ABI 规范中 C 函数的调用约定（例如[x86-64 psABI](https://github.com/hjl-tools/x86-psABI/wiki/X86-psABI)）。所以你需要一个 C 包装器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-01T23:11:47.287

首先，我想提供一些系统调用的定义。系统调用是从用户空间应用程序同步显式请求特定内核服务的过程。同步是指系统调用的动作是通过执行指令序列预先确定的。中断是异步系统服务请求的一个例子，因为它们完全独立于处理器上执行的代码到达内核。与系统调用相比，异常是对内核服务的同步但隐式请求。

系统调用包括四个阶段：

1.  通过将处理器从用户模式切换到内核模式将控制权传递给内核中的特定点，并通过将处理器切换回用户模式将其返回。
2.  指定请求的内核服务的 id。
3.  为请求的服务传递参数。
4.  捕获服务的结果。

一般来说，所有这些动作都可以作为一个大型库函数的一部分来实现，该函数在实际系统调用之前和/或之后进行许多辅助动作。在这种情况下，我们可以说系统调用嵌入在这个函数中，但这个函数通常不是系统调用。在另一种情况下，我们可以有一个小函数，它只完成这四个步骤，仅此而已。在这种情况下，我们可以说这个函数是一个系统调用。实际上，您可以通过手动实现上述所有四个阶段来实现系统调用本身。请注意，在这种情况下，您将被迫使用 Assembler，因为所有这些步骤都完全依赖于体系结构。

例如，Linux/i386 环境有下一个系统调用约定：

1.  可以通过编号为 0x80 的软件中断（汇编指令 INT 0x80）或 SYSCALL 指令 (AMD) 或 SYSENTER 指令 (Intel) 将控制权从用户模式传递到内核模式
2.  请求的系统服务的id由进入内核模式时存储在EAX寄存器中的整数值指定。内核服务 id 必须以 _NR 的形式*定义*。您可以在路径上的 Linux 源代码树中找到所有系统服务 ID `include\uapi\asm-generic\unistd.h`。
3.  最多可以通过寄存器 EBX(1)、ECX(2)、EDX(3)、ESI(4)、EDI(5)、EBP(6) 传递 6 个参数。括号中的数字是参数的序号。
4.  内核返回在 EAX 寄存器中执行的服务的状态。这个值通常被 glibc 用来设置 errno 变量。

在现代版本的 Linux 中，没有任何 _syscall 宏（据我所知）。取而代之的是 glibc 库，即 Linux 内核的主接口库，它提供了一个特殊的宏 - `INTERNAL_SYSCALL`，它扩展为由内联汇编指令填充的一小段代码。这段代码针对特定的硬件平台，实现了系统调用的所有阶段，因此，这个宏代表了一个系统调用本身。还有另一个宏 - `INLINE_SYSCALL`. 最后一个宏提供了类似 glibc 的错误处理，在失败的系统调用中将返回 -1 并将错误号存储在`errno`变量中。这两个宏都在`sysdep.h`glibc 包中定义。

您可以通过以下方式调用系统调用：

```
#include <sysdep.h>

#define __NR_<name> <id>

int my_syscall(void)
{
    return INLINE_SYSCALL(<name>, <argc>, <argv>);
} 
```

where`<name>`必须替换为系统调用名称字符串，`<id>`- 需要的系统服务编号 id，`<argc>`- 参数的实际数量（从 0 到 6）和`<argv>`- 以逗号分隔的实际参数（如果参数存在，则以逗号开头） .

例如：

```
#include <sysdep.h>

#define __NR_exit 1

int _exit(int status)
{
    return INLINE_SYSCALL(exit, 1, status); // takes 1 parameter "status"
} 
```

或另一个例子：

```
#include <sysdep.h>

#define __NR_fork 2 

int _fork(void)
{
    return INLINE_SYSCALL(fork, 0); // takes no parameters
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-02T21:18:29.327

**最小可运行程序集示例**

[hello_world.asm](https://github.com/cirosantilli/x86-assembly-cheat/blob/b629fe55109aa585ead0aee1168b81bee33866ac/linux/hello_world.asm)：

```
section .rodata
    hello_world db "hello world", 10
    hello_world_len equ $ - hello_world
section .text
    global _start
    _start:
        mov eax, 4               ; syscall number: write
        mov ebx, 1               ; stdout
        mov ecx, hello_world     ; buffer
        mov edx, hello_world_len
        int 0x80                 ; make the call
        mov eax, 1               ; syscall number: exit
        mov ebx, 0               ; exit status
        int 0x80 
```

编译并运行：

```
nasm -w+all -f elf32 -o hello_world.o hello_world.asm
ld -m elf_i386 -o hello_world hello_world.o
./hello_world 
```

从代码中不难推断：

*   `eax`包含系统调用号，例如`4`用于写入。内核源代码的完整 32 位列表：[https ://github.com/torvalds/linux/blob/v4.9/arch/x86/entry/syscalls/syscall_32.tbl#L13](https://github.com/torvalds/linux/blob/v4.9/arch/x86/entry/syscalls/syscall_32.tbl#L13)
*   `ebx`，`ecx`并`edx`包含输入参数。这些应该可以从内核源代码中每个系统调用的签名中推断出来。另请参阅：[x86-64 上的 UNIX 和 Linux 系统调用的调用约定](https://stackoverflow.com/questions/2535989/what-are-the-calling-conventions-for-unix-linux-system-calls-on-x86-64)以及[汇编语言中的 Linux 系统调用表或小抄表](https://stackoverflow.com/questions/3614995/linux-system-call-table-or-cheetsheet-in-assembly-language)
*   返回值主要包含错误代码并转到 eax（为简单起见，此代码中未显示）
*   `int 0x80`拨打电话，尽管现在有更好的方法：[“int 0x80”或“syscall”哪个更好？](https://stackoverflow.com/questions/12806584/what-is-better-int-0x80-or-syscall)

当然，汇编很快就会变得乏味，并且您很快就会想尽可能使用 glibc / POSIX 提供的 C 包装器，或者`SYSCALL`当您不能使用宏时。

# java - Java Web 应用程序的加密/解密/密钥轮换的现有做法是什么

> ID：11609122
> 
> 赞同：5
> 
> 时间：2012-07-23T08:44:34.833
> 
> 标签：java, security

我需要在我的基于 Java 的 Web 应用程序（使用 jasypt）中加密用户输入的数据，这些数据保存在 MySQL 数据库中，我希望能够定期（例如 90 天）更改加密密钥/密码。该应用程序位于 Web 中的服务器上。

现有的已经加密的数据需要用新密钥重新加密，但为了这样做，它当然需要旧密钥。

1.  轮换密钥的常见做法是什么？
2.  使系统可以使用加密密钥的常用方法是什么（例如，通过命令行传递的系统属性、加密的属性文件、通过 https 从另一台服务器下载）

我希望对此没有单一的答案，但我想获得一些提示、指针和流行语，以便朝着正确的方向进行调查。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T00:22:31.473

首先，了解密钥轮换的目的很重要。您的用例是加密静态数据。在这种情况下，密钥轮换的目的是在密钥泄露或加密数据集泄露并受到暴力解密攻击的情况下遏制数据泄露。密钥轮换的常见做法：

*   有时限的密钥轮换：在这种做法中，密钥会定期更新。
*   交易级密钥：在这种做法中，每笔交易都使用自己的唯一密钥进行加密，从而降低了更高级别的数据泄露风险。

使系统可以使用密钥：这通常使用密钥管理服务器来完成。该服务器的核心是根据参数向请求者分发（通常是对称的）密钥。服务器可以选择安全地存档生成的密钥以供以后检索，或者确保它们的密钥是基于一个固定的函数生成的，该函数保证在给定相同的参数集的情况下生成相同的密钥。

您可以选择编写自己的服务器或购买/许可一个。如果您需要满足特定的安全合规性准则并需要检查合规性项目，则许可此组件可能是更好的选择。对于现成的解决方案，以[StrongAuth](http://www.strongauth.com/)或[Porticor](http://www.porticor.com/)为例。

# android - 在两个字段上对自定义对象数组进行排序

> ID：11609123
> 
> 赞同：0
> 
> 时间：2012-07-23T08:44:35.987
> 
> 标签：android, arrays, sorting, custom-object

我`ListData[]`在两个字段上对一组自定义对象 ( ) 进行排序。我希望它按主题排序，并按名称排序。我认为我在自定义对象类中做了一个很好的比较器，我可以用它`Arrays.sort(ld)`来使我的代码工作并排序我的数组。但显然我做错了什么......

我的自定义对象：

```
 public class ListData implements Comparable<ListData>{
public int venueID;
public String name;
public String photoUrl;
public String tip;
public String theme;
@Override
public int compareTo(ListData ld0) {
    return this.venueID- ld0.venueID;
}

public static Comparator<ListData> ListDataThemeAndNameComparator = new Comparator<ListData>() {
    @Override
    public int compare(ListData ld1, ListData ld2) {

        String compareTheme1 = ld1.theme.toUpperCase();
        String compareTheme2= ld2.theme.toUpperCase();
        String compareName1 = ld1.name.toUpperCase();
        String compareName2= ld2.name.toUpperCase();

        //ascending
        int comp = compareTheme1.compareTo(compareTheme2); // comp themes
        if(comp==0){ // same theme
            comp= compareName1.compareTo(compareName2); // compare names 
        }
        return comp;
        }
};

} 
```

在我的主要活动中，我有：

```
 ListData ld[]= new ListData[jsonResponse.size()];
(some code filling my ListData array)
 Arrays.sort(ld, ListData.ListDataThemeAndNameComparator); // compare by theme and then by name 
```

有谁知道我做错了什么？

**我编辑了我的代码**但它仍然失败，现在在`compareTheme1 = ld1.theme.toUpperCase();`. 但我确信我的数组不是空的，我在对其进行排序之前将其记录在一行中，并且它填充了大约 500 个项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:54:31.490

您的`ListData`对象应该实现`Comparable`而不是`Comparator`接口。

`EDIT:`

为了清楚起见，您可以`array`按排序`Array.sort()`。要进行自定义排序，您可以在 中指定您的比较器`Array.sort()`，如果您不这样做，数组将按照您可以通过实现`Comparable`接口定义的自然顺序进行排序。因此，您有两种选择如何自定义排序：

*   通过使用自定义比较器并在`Array.sort()`
*   通过为您的项目实现`Comparable`接口

我建议你去实施`Comparable`. 您可以通过不创建新的比较器对象来节省内存，并且`Comparator`如果您比较不同类型的对象而不是您的情况，这很有用。

# java - Java，是否可以继承接口？

> ID：11609126
> 
> 赞同：0
> 
> 时间：2012-07-23T08:44:48.313
> 
> 标签：java, inheritance, interface

在我的应用程序中，我有一个类，让我称之为 class `A`。四个类，让我称它们为`B`, `C`，`D`并`E`从这个类扩展。这四个类中的每一个都有一个功能相同的接口。

我想知道我是否将这个接口放在类中，`A`所有这些类都可以访问它。我对吗？

我有另一个类，`G`就是实现这个接口。如果我实现这个接口，它是否同时适用于这四个库？

**更新** 让我详细介绍一下。我有四节课。每个类都有一个方法，当这个类连接到互联网时会设置一个标志。像这样。

```
public class ClassB extends {

    public interface OnConnectingToServer {
        public void onGettingDataFromServer(boolean flag);
    }

    public ClassB () {
        if(I'm_downloading_from_internet)
                OnConnectingToServer.onGettingDataFromServer(true);
    }
} 
```

我对“B”、“C”、“D”和“E”类有这种情况。“G”类，实现了这个接口。因此，如果我想将每个接口放在每个类中，我需要分配四个不同的名称，并且在“G”类中也实现了 4 个接口。我认为这种方式不是一个好方法。

我正在寻找一种方法，而不是实现 4 个相同的接口，而只实现一个接口。因此，无论是由一个类还是全部四个类触发接口，都只完成一个实现。

希望把它说得更清楚。再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:47:40.813

Don't put the interface definition inside class A. Make it a separate top-level type and then make all your classes `implements MyInterface`. If `class B extends A`, then you don't have to explicitly say `implements MyInterface` since there is no way for a subclass to "unimplement" an interface.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:47:56.740

*   Yes, if you let `A` implement an interface, then all classes that extend that class also implement that interface.
*   Not entirely sure what you mean with letting `G` implement the interface. Doing that will only affect classes that extend `G`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:48:39.083

简而言之，是的。来自[Java 语言规范](http://www.cs.cornell.edu/andru/javaspec/9.doc.html)：

> 一个类可以被声明为直接实现一个或多个接口，这意味着该类的任何实例都实现了由一个或多个接口指定的所有抽象方法。***一个类必须实现其直接超类和直接超接口所做的所有接口***。这种（多个）接口继承允许对象在不共享任何实现的情况下支持（多个）公共行为。

（我的重点）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T08:49:39.110

如果您在 A 和 B 类中实现接口（称为 I），C + D 扩展 A，那么 B、C 和 D 也将实现 I 接口。

这意味着您将能够编写：

```
I aInstance = new A();
I bInstance = new B(); 
```

但是也：

```
A aInstance = new A();
A bInstance = new B(): 
```

因为从逻辑上讲，您的数据模型将变为：

```
A is an I 
and  
B is an A 
so this implies:
B is an I 
```

如果类 G 实现了接口但不继承 A，则您还必须在类 G 中实现 I 中定义的功能。

这意味着您将能够编写：

```
I aInstance = new A();
I gInstance = new G(); 
```

但不是这个（这不会编译）： A gInstance = new G();

请记住，接口只是一个合同。任何实现接口的类都必须遵守契约，但不会继承任何实现（接口中无论如何都不能存在实现）。

# java - tomcat 可以存储从战争中调用的变量/属性吗

> ID：11609127
> 
> 赞同：1
> 
> 时间：2012-07-23T08:44:55.303
> 
> 标签：java, tomcat, deployment, ant, war

我希望能够使用 ANT 将我的应用程序部署到 Tomcat。

我不希望开发和产品的过程有任何不同。然而，两者使用不同的数据库，即 myapp 和 myapp-dev

我怎样才能做到这一点？我可以在不同的 Tomcat 容器中存储一个变量，并让应用程序从 Tomcat 调用数据库的名称吗？

或者，如果我要问的问题很荒谬，那么使用相同流程实现部署到开发和生产的普遍接受的方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:48:58.670

通用方法是将配置字符串放在 JNDI 条目中。

如果 JNDI 不是一个可能的解决方案，那么在正确位置的属性文件（因此它显示在 WAR 文件的类路径中）也很有用，但需要仔细的文档。

有没有考虑过让web容器管理数据库连接池，那么只需要一个pr容器，然后就可以通过JNDI来获取了？

# r - SAS中的R Markdown等价物

> ID：11609131
> 
> 赞同：12
> 
> 时间：2012-07-23T08:45:04.880
> 
> 标签：r, sas, knitr

我想知道SAS中是否有相当于R Markdown的东西？或者如何在SAS中这样做？我想在下面有彩色 SAS 代码及其结果。

链接到 R Markdown：[http ://rstudio.org/docs/authoring/using_markdown](http://rstudio.org/docs/authoring/using_markdown)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T20:18:54.430

[格氏](http://qbnz.com/highlighter/demo.php)支持SAS。我认为它做得很好。它是 Wikimedia 中的荧光笔，也可作为 Perl 模块使用。

将 Geshi 连接到 Markdown 应该不会太难（著名的遗言 :)）。您可以通过运行控制台 SAS 作业来获取绘图。但是，我认为从 2012 年（SAS 9.3）开始，您必须自己自动化工作流程。当其中一种标记语言占据主导地位时，您可能会看到更正式的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:50:21.063

[此链接](http://support.sas.com/publishing/pubcat/chaps/59602.pdf)描述如何使用 SAS 生成报告。从浏览 pdf 来看，您似乎可以集成 SAS 分析和文本：

> 借助 SAS 过程、SAS DATA 步骤和 SAS 功能（例如输出交付系统 (ODS) 和宏工具），您拥有成功编写分析数据和创建报告的程序的工具

# java - 在通过 SecureSocial 进行身份验证后对 Linkedin API 进行额外的 Oauth 调用

> ID：11609133
> 
> 赞同：0
> 
> 时间：2012-07-23T08:45:08.360
> 
> 标签：java, oauth, playframework, playframework-2.0, linkedin

我们使用 SecureSocial 模块通过 LinkedIn API [https://github.com/jaliss/securesocial](https://github.com/jaliss/securesocial)对用户进行身份验证。这很好用，并且用户已获得授权。但是，我们想在战后使用来自 LinkedIn 的信息填充用户配置文件，我不知道如何正确地进行 API 调用。

我们有访问令牌（包含 oauth_token 和 oauth_secret），但我不确定如何在下次调用中使用这些字段。根据 LinkedIn API 文档，我需要以下字段才能成功调用 API：oauth_consumer_key、oauth_token、oauth_signature_method、oauth_signature、oauth_timestamp 和 oauth_nonce。我不知道如何访问或生成这些值。我尝试使用此 URL：“http://api.linkedin.com/v1/people/~?&”无济于事。

我们正在使用 Play！框架 2.0.2 和 Java。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:25:45.757

您是否已经查看过 LinkedIn 提供商的[SecureSocial 源代码？](https://github.com/jaliss/securesocial/blob/master/module-code/app/securesocial/core/providers/LinkedInProvider.scala)

就算是Scala，我觉得也可以基于它写一个Java类。

# sql - SSMS - 更改脚本数据

> ID：11609136
> 
> 赞同：1
> 
> 时间：2012-07-23T08:45:27.097
> 
> 标签：sql, ssms

有谁知道通过 SSMS 编写数据更改脚本的方法，例如更新表行并显示该更改的更新 SQL，同样用于插入和删除？

我知道能够使用发布向导或使用 redgate 软件编写整个更改的脚本，并且我知道您可以打开脚本以进行架构更改。然而，我正在寻找类似的东西：我在 SSMS 中做了一些事情，我得到一个即时 SQL 语句，告诉我我做了什么。我记得 SQLYog 为 MYSQL 做了类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:01:36.690

我只是在 SO 上寻找同样的东西，没有运气，所以点击了 SSMS 中的几个按钮，发现了这个：

![在此处输入图像描述](../Images/6411b292bbc9cdc739cdc8b73aa3835d.png)

在 SSMS 设计器中进行更改后，可以单击“生成更改脚本”。单击此按钮后，将出现一个对话框，可让您查看为这些更改在数据库上运行所需的 SQL。

如果您选中“每次保存时自动生成更改脚本”，那么每次单击保存按钮时都会出现相同的对话框。

您会注意到，有时 SSMS 会为看似简单的更改生成一些非常长的 SQL 语句。不幸的是，即使是像重新排序/重命名列这样简单的事情也无法在标准 SQL DDL 语句中表达[——SSMS 所能做的就是删除并重新创建表](https://stackoverflow.com/questions/1969096/saving-changes-after-table-edit-in-sql-server-management-studio)。

# android - 从 JSON 获取坐标并在 Android 上的 Google 地图中移动到它们

> ID：11609140
> 
> 赞同：0
> 
> 时间：2012-07-23T08:45:34.950
> 
> 标签：android, json, google-maps

我对 JAVA 编程很陌生，但我遇到了大麻烦，这取决于我的工作。反正。好的，所以我在这里有这个 json：

```
{
"GetPOIByTypeResult": [
    {
        "Address": {
            "City": "Bucuresti",
            "ID": 1,
            "Number": 3,
            "Street": "Otopeni"
        },
        "ID": 1,
        "IsSpecial": true,
        "Latitude": 44.542869567871094,
        "Logo": "6fb43083ee663364ef6771293653e56b.jpg",
        "Longitude": 26.06893539428711,
        "Name": "Spitalul Judetean",
        "Phone": "085228291",
        "Remark": "Normal Hospital",
        "Schedule": "Monday to Friday",
        "Specialities": [
            {
                "ID": 1,
                "Name": "Stomatologie"
            },
            {
                "ID": 2,
                "Name": "Radiologie"
            },
            {
                "ID": 3,
                "Name": "Cardiologie"
            },
            {
                "ID": 4,
                "Name": "Ginecologie"
            },
            {
                "ID": 5,
                "Name": "Pediatrie"
            },
            {
                "ID": 6,
                "Name": "Patologie"
            },
            {
                "ID": 7,
                "Name": "Oncologie"
            },
            {
                "ID": 8,
                "Name": "Macelarie"
            },
            {
                "ID": 9,
                "Name": "Oftalmologie"
            },
            {
                "ID": 10,
                "Name": "Ghipsologie"
            }
        ],
        "Type": "Hospital"
    }, 
```

我需要从 JSON 中获取纬度和经度，并在我的应用程序中的谷歌地图上显示位置。我在这里有这个小代码片段，它适用于本地坐标，比如输入我自己的数字，但我希望它从 JSON 中获取。

```
drawable = getResources().getDrawable(R.drawable.marker);
    itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(drawable, mapView);
GeoPoint point2 = new GeoPoint((int)(44.55332946777344*1E6),(int)(26.07666015625*1E6));
    CustomOverlayItem overlayItem2 = new CustomOverlayItem(point2, "Bucuresti Spital 2", 
            "(Spitalul 2)", 
            "http://ia.media-imdb.com/images/M/MV5BMzk2OTg4MTk1NF5BMl5BanBnXkFtZTcwNjExNTgzNA@@._V1._SX40_CR0,0,40,54_.jpg");       
    itemizedOverlay.addOverlay(overlayItem2);</code> 
```

我有一个 JSONparser 设置，我只是不知道如何使地图控制器动画到我的坐标所在的点，所以我想得到一些帮助:-S

**编辑：这就是我解决问题的方法，也许它也会帮助其他人。**

```
drawable = getResources().getDrawable(R.drawable.marker);
    itemizedOverlay = new CustomItemizedOverlay<CustomOverlayItem>(
            drawable, mapView); //showing marker on the map
public void showHospitalList(ArrayList<Hospitals> hospitals) {

    for (int i = 0; i < hospitals.size(); i++) {

        Hospitals hospital = hospitals.get(i);
        CustomOverlayItem temp1 = toOverlay(hospital);
        itemizedOverlay.addOverlay(temp1);
    }
    mapOverlays.add(itemizedOverlay); //this is to get the list in the activity
}

public CustomOverlayItem toOverlay(Hospitals hospitals) {

    GeoPoint point = new GeoPoint((int) (hospitals.Latitude * 1E6),
            (int) (hospitals.Longitude * 1E6));

    CustomOverlayItem temp = new CustomOverlayItem(
            point, hospitals.Name, hospitals.Phone, hospitals.Type);

    return temp;
// used the hospitals object to define the cordinates and then multiplied by 1E6 to make it compatible(from double to int)  
// Last line defines the balloon pop-up and what to show(everything is from json).
} 
```

谢谢你的帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:02:17.633

处理 JSON。您可以使用一些库，例如 Gson 或 Jackson。更多信息：[发送和解析 JSON 对象](https://stackoverflow.com/questions/2818697/sending-and-parsing-json-in-android) 。或者您可以使用[JSONObject](http://developer.android.com/reference/org/json/JSONObject.html)自己解析它们。

```
String jsonString = ... // Your JSON
List<GeoPoint> locationList = new ArrayList<GeoPoint>();
Double lat, lng; // temp
JSONArray jsonArray = new JSONArray(jsonString);
for (int i = 0; i < jsonArray.length(); i++) {
    JSONObject jsonObject = jsonArray.getJSONObject(i);
    lat = jsonObject.getDouble("Latitude");
    lng = jsonObject.getDouble("Longtitude");
    locationList.add(
        new GeoPoint((int)(lat*1E6),(int)(lng*1E6)));
} 
```

然后处理地图。

```
MapView mapView = (MapView) findViewById(R.id.map);

MapController mc = mapView.getController();
// Set Zoom level of this map (1-21).
mc.setZoom(21);
int x = 0; // Position to get location
GeoPoint point2 = locationList.get(x); // Get Object from list
// This call handle animation to move map to display the given location
mc.animateTo(point2);
mapView.postInvalidate(); 
```

# c# - 带有子类参数的函数

> ID：11609141
> 
> 赞同：2
> 
> 时间：2012-07-23T08:45:36.293
> 
> 标签：c#, class, inheritance

所以我得到了一个类人，它包含年龄、性别、姓名（和主键 ID）。然后我得到了两个人的子类：

```
Teacher(Class(French, math, english etc etc), Sick(boolean))

student(Class(French, math, english etc etc), Sick(boolean)) 
//so these 2 got the same 5 fields. 
```

现在我想制作一种可以创建所有 2 个的方法。（实际上还有更多，但对于我将只使用这两个的问题来说还可以）

这就是我的想法：

```
public Person CreateNewPerson (int age, boolean sex, string name, int class, boolean sick, HELP HERE plz OFTYPE<TEACHER OR STUDENT>)
{
    var Person1 = new Person { Age = age, Sex = sex, ....... };
    // but now to return it as the correct type I got no clue what todo
    return (OFTYPE)Person1; // ofc this doesn t work but I hope you understand the problem here
} 
```

希望有人能在这里帮助我，因为 atm 我正在为我得到的每个子类制作一个单独`CreateNewTeacher`的`CreateNewStudent`等。（我得到了 5 个 ^^）

提前致谢！

PS：它们稍后保存在不同的表中，我不希望它们都在同一个类中，因为我知道我可以像 boolean at person 一样去添加：`IsPersonChild`然后 true 或 flase 但不

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:58:02.717

建议的班级设置：

```
public class Person
{
    public string Name { get; set; }
}

public class Teacher : Person
{
}

public class Student : Person
{
}

public static class PersonFactory
{
    public static T MakePerson<T>(string name) where T: Person, new()
    {
        T person = new T {Name = name};
        return person;
    }
} 
```

用法：

```
Teacher teacher = PersonFactory.MakePerson<Teacher>("Mrs. Smith");

Student student = PersonFactory.MakePerson<Student>("Johnny"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:59:49.410

使用可以使用这样的泛型：

```
public T CreateNewPerson<T> (int age, boolean sex, string name, int class, boolean sick) where T : Person, new()
{
    var Person1 = new T { Age = age, Sex = sex, ....... };
    return Person1; 
} 
```

# boost - boost unordered_map fail to find key

> ID：11609148
> 
> 赞同：0
> 
> 时间：2012-07-23T08:46:14.023
> 
> 标签：boost, unordered-map

It sounds wired. But I cannot think of the cause of it. The situation is that there is boost::unordered_map (key=std::string, value=std::string) which stores the exchange order ID and internal order ID.

I add a new entry by using operator [] i.e. map[key] = value When I try to find the key by using find().

It is fine except around 14:xx while the program start to run at 9:00AM for last two days. the key cannot be found while it is supposed to insert into the map. so what I suspect is related to the map size.

Is it possible for a hash map lose its entry during re-hasing?

PS no multi-thread issue as there is a lock protecting the map

# facebook - Facebook 分享将不再提取任何图像

> ID：11609149
> 
> 赞同：0
> 
> 时间：2012-07-23T08:46:15.740
> 
> 标签：facebook, facebook-opengraph, addthis

我创建了一个公司博客，并开始实施各种社交分享插件，查看了与 OG 的集成，现在 Facebook 在分享页面时不会提取任何图像。

调试器工具说它可以找到合适的图像（每个帖子的特色图像），当我分享到 LinkedIn 的相同链接时，图像拉得很好。

我终其一生都无法弄清楚可能出了什么问题，这并不是说 Facebook 没有拉出正确的图像，而是没有拉出任何东西。

有没有人有这方面的经验/知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:04:55.093

将您的 og:url 值更改为[http://www.chapman-freeborn.com/en/blog/](http://www.chapman-freeborn.com/en/blog/)（添加尾随 / ）

还要填写您的 og:image 值，以便 facebook 获得该图像...

方便的调试工具：http: [//developers.facebook.com/tools/debug/og/object ?q=www.chapman-freeborn.com%2Fen%2Fblog%2F](http://developers.facebook.com/tools/debug/og/object?q=www.chapman-freeborn.com%2Fen%2Fblog%2F)

文档：http: [//developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/)

干杯!

# javascript - 根据条件线性执行请求

> ID：11609151
> 
> 赞同：0
> 
> 时间：2012-07-23T08:46:35.237
> 
> 标签：javascript, jquery

我正在使用 jQuery AJAX 请求动态获取数据。Ajax 调用是嵌套的，它们在`success`每个先前请求的函数中调用。我这样做是为了不给服务器增加太多负载。*只有在前一个请求完成* **或**成功时才应发送下一个请求。

这是ajax代码

```
function showforLanguagetra(option, catid, meta)
{
    $.ajax({       ///execute only if catid = 1,3,6,8
        type:"GET",
        url: "/Ajax1111",
        data: {
            opt: option,
            cid: catid,
            mta: meta
        },
        success: function(data){
            $("#1111").html(data);

            $.ajax({           ///execute only if catid = 5,7,9
                type:"GET",
                url: "/Ajax2222",
                data: {
                    opt: option,
                    cid: catid,
                    mta: meta
                },
                success: function(data){
                    $("#2222").html(data);

                    $.ajax({            ///execute only if catid = 2,5,4,8
                        type:"GET",
                        url: "/Ajax3333",
                        data: {
                            opt: option,
                            cid: catid,
                            mta: meta
                        },
                        success: function(data){
                            $("#3333").html(data);

                            $.ajax({               ///execute only if catid = 6,4,8,9,0
                                type:"GET",
                                url: "/Ajax4444",
                                data: {
                                    opt: option,
                                    cid: catid,
                                    mta: meta
                                },
                                success: function(data){
                                    $("#4444").html(data);

                                    $.ajax({              ///execute only if catid = 2,3,5,7,4
                                        type:"GET",
                                        url: "/Ajax5555",
                                        data: {
                                            opt: option,
                                            cid: catid,
                                            mta: meta
                                        },
                                        success: function(data){
                                            $("#5555").html(data);
                                        }
                                    });        
                                }
                            });      
                        }
                    });        
                }
            });     
        }
    }); 
}    ​ 
```

这段代码工作正常！

但是这里需要的是，我想根据**catid**中的值执行 ajax 请求，如 ajax 代码中的注释所示。我知道它在 if 条件下滞后，但对 jQuery AJAX 是新手，所以不知道在哪里以及如何使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:58:55.547

我想也许你真正想要的只是`async: false`部分 - 这使得 ajax 调用在继续执行代码之前完成。

我已经**更新了这个答案**，因为我不相信您希望所有后续调用都不会触发，而是它们应该按顺序触发并依赖于`catid`

* * *

为此，您需要放置`if`或`switch`阻塞您的 ajax 调用。这将导致比你已经拥有的更深的嵌套。

我强烈建议将这种逻辑分解为单独的例程。拥有一个调用 ajax 例程而不是这种深度嵌套的函数。

设置`async`为`false`使 ajax 例程在继续之前等待成功。

```
function callAjax( service , option catid , meta ) {
   var ret = {data:false};

    $.ajax({       
        type:"GET",
        url: service,
        async: false,
        data: {
            opt: option,
            cid: catid,
            mta: meta
        },
        success: function(data){
            ret.data = data;
        });

    return ret;
}

function showforLanguagetra(option, catid, meta) {
    var successData;

    if ( catid == 1 || catid == 3 || catid == 6 || catid == 8) {
        successData = callAjax( '\Ajax1111' , option , catid, meta ).data
        if ( successData )
            $("#1111").html(successData);
    }

    if ( catid == 5 || catid == 7 || catid == 9) {
        successData = callAjax( '\Ajax2222' , option , catid, meta ).data
        if ( successData )
            $("#2222").html(successData);
    }

    if ( catid == 2 || catid == 5 || catid == 4 || catid == 8) {
        successData = callAjax( '\Ajax3333' , option , catid, meta ).data
        if ( successData )
            $("#3333").html(successData);
    }

    // etc etc

} 
```

**请注意，您的代码实际上没有意义**，因为如果 catid 不等于 1、3、6 或 8，那么以后的 ajax 调用将永远不会被命中......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:20:00.623

好的，所以您想线性执行函数，但前提是满足某些条件？

为了使事情变得更容易，您必须将问题抽象一点。例如，找出所有请求的共同点和不同点。它们都有不同的 URL、条件和成功。

您可以创建一个 Ajax 调用配置对象数组，对它们进行迭代并使用[`.pipe()` *^([docs])*](http://api.jquery.com/deferred.pipe/)对它们进行线性化。如果你返回最终的 promise 对象，你也将能够在所有调用完成后执行一个函数。

```
var ajax_config = [{
       url: '/Ajax1111', // URL
       // a function accepting catid and returning true or false
       condition: function(catid) { 
           return catid === 1 || catid === 3 || ...;
       },
       // function to be executed when call was successful
       success: function(data) {
           $("#1111").html(data);
       }
   },
   // some for all the other calls
];

function showforLanguagetra(option, catid, meta) {
    var queue = new $.Deferred();

    // iterate over the configuration objects and add them to the
    // queue if the condition is met 
    $.each(ajax_config, function(i, config) {
        if(config.condition(catid)) {
            queue = queue.pipe(function() {
                return $.get(config.url, {
                    opt: option,
                    id: catid,
                    mta: meta
                }).done(config.success);
            });
        }
    });
    queue.resolve();
} 
```

# c# - Get RETURN value from ASMX web service

> ID：11609152
> 
> 赞同：0
> 
> 时间：2012-07-23T08:46:38.110
> 
> 标签：c#

Is it possible to get a return value from asmx web service, i have this code:

```
[WebMethod(CacheDuration = 0)]
public System.Xml.XmlDocument Load_DOK(System.Xml.XmlDocument XmlDoc)   
  {
  } 
```

The INPUT parameter is XML DOCUMENT, and return message has to be a formatted SOAP message, like this:

```
 soapEnvelop.LoadXml(@"<soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema""><soap:Body><Response_status>0</Response_status><Description>SUCCESS</Description></soap:Body></soap:Envelope>");
return soapEnvelop; 
```

This is a call with parameter passing to web service:

```
System.Xml.XmlDocument ReceivingXmlDoc = new System.Xml.XmlDocument();
 TestService.TestService ws_dok = new TEST.TestService.TestService();

 ws_dok.Load_DOK(SendingXmlDoc); 
```

So is it possible to extract that return?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:24:04.207

这应该像这样简单：

```
XmlDocument receivingXmlDoc = ws_dok.Load_DOK(sendingXmlDoc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:25:21.633

是的，因为您已经声明了`webmethod Load_DOK to return as XmlDocument`

```
XmlDocument doc=  ws_dok.Load_DOK(SendingXmlDoc); 
```

# android - Android DownloadManager class

> ID：11609153
> 
> 赞同：0
> 
> 时间：2012-07-23T08:46:44.443
> 
> 标签：android, class, download-manager

I need to download a large file . I need to use `DownloadManger` class for api 9 or higher version . But I wish my download to continue even if User pauses the `Activity` or presses `Back` ... or user kills the `Activity`. Once he starts the downloading process it should stop only after finishing that respective download. If meanwhile network connectivity breaks the downloading should resume from where it stopped,i.e, should not start from the beginning .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:16:36.843

仅依赖`Activity`于这个用例并不是一个好主意。有两种选择：

### 选项1

1.  `Service`除了你的`Activity`. 在您的 Activity 中`onPause()`，启动`Service`和在您`onResume()`的 Activity 中，停止`Service`.
2.  它`Service`本身也应该注册`ACTION_DOWNLOAD_COMPLETE`广播。
3.  如果您在 Activity 处于后台（即在您`Service`的`Activity`. 您还应该注册`ACTION_NOTIFICATION_CLICKED`.

### 选项 2

1.  只需创建一个 manifest-registered`BroadcastReceiver`来监听`ACTION_DOWNLOAD_COMPLETE`广播。
2.  在`onReceive()`下载完成后，您可以做任何您想做的事情。同样，如果您的 Activity 已经在前台，您可以直接更新您的 UI。否则，用户单击`Notification`，您可以在`ACTION_NOTIFICATION_CLICKED`.

# php - 如果表单仅通过 JavaScript 提交，是否需要 PHP 验证？

> ID：11609158
> 
> 赞同：2
> 
> 时间：2012-07-23T08:46:55.303
> 
> 标签：php, javascript, ajax

如果我有一个表单，比如说一个简单的联系我表单，其中包含姓名、电子邮件、消息等的输入。并且我将表单设置为在 JavaScript 验证对所有输入返回 true*后使用 Ajax 提交。*

我还需要使用 PHP 验证输入吗？如果 JavaScript 被关闭，表单如何仍然提交？如果由于 JavaScript 关闭而无法提交表单，那怎么会造成任何伤害呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:52:14.400

当然，您需要服务器端验证！`:-)`

*它总是需要的。*

只需安装此插件：[https](https://addons.mozilla.org/en-US/firefox/addon/tamper-data/) ://addons.mozilla.org/en-US/firefox/addon/tamper-data/ 。

它使您可以自由修改发送到服务器的内容。

此外，[Firebug](http://getfirebug.com)允许您修改浏览器看到的内容，从而提交给服务器。

这是一个类比：银行的保险箱上都有锁。但他们*也*有安全摄像头和警报系统，以防万一锁无法阻止某人偷窃。

**编辑：**

如果您使用的是联系表格（并且脚本会自动向联系人发送电子邮件），请记住有人可以让您的脚本发送 1000 条垃圾邮件，只需在电子邮件字段中添加地址即可。

为避免这种情况，您需要进行服务器端验证。您根本不能依赖客户端验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:51:23.070

我认为最好每次都有两种验证类型：客户端（使用 JavaScript，因此不对浏览器进行 Ajax 调用）和服务器端（使用 PHP 验证）。

仍然可以使用 Firebug 控制台或其他类型的 hack 提交表单。

普通用户无法做到这一点，但......仍然。如果有机会可以做到，你不应该冒险。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T08:51:38.530

最好在服务器端进行验证，因为最终用户可以做的不仅仅是打开/关闭 JavaScript。

由于 JavaScript 在客户端可用，恶意用户可以更改客户端验证以使恶意输入通过客户端验证。

信任经过服务器端验证的输入总是比信任用户不改变 JavaScript 行为要好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T08:52:34.120

无论是否存在前端验证，您都应该始终使用后端验证来清理用户输入。

虽然您是正确的，无法在禁用 Javascript 的情况下提交表单，但仍然可以通过简单地向您使用的 URL 发送 POST 请求来提交具有恶意意图的人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T09:04:01.720

任何人都可以使用任何数据向您的 URL 提交表单。即使来自本地主机

所以服务器端验证是必须的

# php - OAuth Error: verification of signature failed

> ID：11609159
> 
> 赞同：0
> 
> 时间：2012-07-23T08:46:56.440
> 
> 标签：php, javascript, ios, oauth

I have my Oauth Provider which is written in php using the library [Oauth php](http://code.google.com/p/oauth-php/)

and I am making a phonegap application to use Oauth service from my server using jsOauth library [link](https://github.com/bytespider/jsOAuth) I am following the steps provided in [this tutorial](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt5p1)

But I am getting error from server while requesting the access_token in exchange with the request token received.

> OAuth Verification Failed: Verification of signature failed (signature base string was "GET&http%3A%2F%2Fapi.amishra.abc-dev.com%2Foauth%2Faccess_token.php&oauth_callback%3Dhttp%253A%252F%252Fwww.cd.com%26oauth_consumer_key%3Dab17b706d7320aa3607c8a774954eb495f7cccb3338a1f44ad4396c5a9ff69db%26oauth_nonce%3D5B702F7E46305E3B%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1343032505%26oauth_token%3D1ca90d9a8039ebe04e1c25eec852137b0500d0c4f%26oauth_version%3D1.0").

How to fix this error?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:04:15.543

您似乎没有发送`oauth_verifier`您应该在授权步骤中收到的参数。即在用户授权您的应用程序后调用您的回调时。这适用于[https://www.rfc-editor.org/rfc/rfc5849#section-2.2](https://www.rfc-editor.org/rfc/rfc5849#section-2.2)中的最新 OAuth 1.0a 规范。

此外，无需`oauth_callback`在访问令牌请求中发送参数，这仅在请求令牌步骤中需要。

# javascript - auto slidedown div not working when page fully loads

> ID：11609160
> 
> 赞同：0
> 
> 时间：2012-07-23T08:47:00.170
> 
> 标签：javascript, html, slide

i want to make so when the page full loads the div content slides down once but not working here is code

```
$(document).ready(function() {
   $('#slidercontent').delay(1000).slideDown(100);
}); 
```

no result ;( hot to fix it ?

html

```
<div id="slidercontent">(here goes my Slideshow)</div> 
```

css

```
#slidercontent {width:1101px; height:195px; margin:0 auto;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:26:46.113

您只需要添加`display:none;`CSS。另外，我希望您在 javascript 之前包含 jQuery 库：

**这是工作小提琴：http:** [//jsfiddle.net/gopi1410/Sjarv/1/](http://jsfiddle.net/gopi1410/Sjarv/1/)

（已将 slideDown 时间增加到 1000 以使其更明显）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T08:58:41.523

没有名为 slideLeft 的默认效果，因此您必须使用：

```
$(document).ready(function(){
    $("#selector").delay(1000).animate({width:0},500);
}); 
```

或者你可以使用**setTimeout()**方法

```
$(document).ready(function(){
    setTimeout(function(){
        $('#slidercontent').animate({width:0},100,function(){
            // do some other stuff after the animation is complete
        });
    },1000);
}); 
```

# javascript-events - JS - get divHeight in one div and, depending on the value, load a certain div or class into another div

> ID：11609161
> 
> 赞同：0
> 
> 时间：2012-07-23T08:47:00.183
> 
> 标签：javascript-events

I have two floated divs: a #center div and a #sidebar div. Center div has got updatable text in it and so its height is set to "auto". The sidebar div also has height auto but, right underneath a scrolling div with definite height, it continues till reaching the bottom of the first div. I want to fill this different space by loading a proper class (each with different backgrounds and different heights). So far I managed to create a js script that retrieves center div height and displays a msg according to its value.

```
<div id="center">
    <p>Some long text</p>
</div>
<div id="sidebar">
    <div class="scroller"></div>

<script type="text/javascript">

    var gd;
    function getDivHeight(divID){ 
        gd = document.getElementById('center').offsetHeight;
        if(gd <=400) alert("no space");
        else if(gd >400 <=500) alert("short space");
        else if(gd >500 <=600) alert("mid space");
        else if(gd >600 <=700) alert("large space");
        else if(gd >700) alert("too much space");
    }

    getDivHeight('center'); 

</script> 
```

What I don't know is how can I use that gd value to load a certain class or div. Can it be done all in JS or do I need some php.... I'm a newbee in both of them and can't really find my way around without some help. Any suggestion or hint that could put me on the right track will be highly appreciated

thx

Alberto

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:05:40.663

我猜它不能这样做，因为 PHP 在 JS 执行任何类型的计算之前解析页面。做这种事情的唯一方法可能是通过 Ajax 并返回到 php，这对我来说听起来非常复杂 ^__^

阿尔贝托

# sql-server - SQL Server to SQLite query translation error

> ID：11609169
> 
> 赞同：0
> 
> 时间：2012-07-23T08:47:34.800
> 
> 标签：sql-server, sqlite, translation

To calculate the MPG values from a `Fuel` table I'm using this SQL Server query which works great:

```
SELECT 
    CASE 
       WHEN Fuel.Quantity = 0 THEN 0 
       ELSE (Fuel.Odometer - ISNULL((SELECT TOP 1 Dupe.Odometer FROM Fuel AS Dupe WHERE Dupe.MainID = Fuel.MainID AND Dupe.FuelingDateTime < Fuel.FuelingDateTime ORDER BY Dupe.FuelingDateTime DESC, Dupe.FuelID),0)) / Fuel.Quantity 
    END AS MPG 
FROM Fuel 
WHERE MainID = 1 
```

When I translate it to SQLite query I get an error:

> Near "1" : syntax error

The SQLite query is:

```
SELECT CASE 
WHEN Fuel.Quantity = 0 THEN 0 
ELSE 
(Fuel.Odometer - IFNULL((Select TOP 1 Dupe.Odometer FROM Fuel As Dupe WHERE Dupe.MainID = Fuel.MainID AND Dupe.FuelingDateTime < Fuel.FuelingDateTime ORDER BY Dupe.FuelingDateTime DESC, Dupe.FuelID),0)) / Fuel.Quantity 
END As MPG 
FROM Fuel 
WHERE MainID = 1 
```

Is it the temporary table ('Dupe')? How do I write the query in SQLite?

# jquery - Aborting All Ajax Calls - jqXHR

> ID：11609171
> 
> 赞同：3
> 
> 时间：2012-07-23T08:47:53.367
> 
> 标签：jquery, ajax, break, jqxhr

Basically im using jqXHR with asmx. I want to do this if its possible;

Overally in everypage im using 6-7 ajax calls with sync or async depends on which method it is. But when one of them got error i want to break that ajax call and after the all of ajax calls.

Thanks already!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T08:56:42.710

使用一个数组来存储每个 ajax 调用返回的对象，并遍历该数组以中止它们：

```
var XHR = []
........//later
var myajax = $.ajax({
    type: 'GET',
    url: url
}).done(function() {
    //do something
}).fail(function() {
   abortAll();
});
XHR.push(myajax);

function abortAll() {
   XHR.each(function(i,e) {
      e.abort();
   });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T08:53:11.313

每次创建 ajax 请求时，它都会返回一个对象，您可以使用它来中止请求：

```
var request = $.ajax({
    type: 'POST',
    url: url,
    success: function(data){}
}); 
```

然后使用请求中止调用：

```
request.abort(); 
```

# php - PayPal IPN 错误和自定义端口 IPN URL

> ID：11609174
> 
> 赞同：3
> 
> 时间：2012-07-23T08:47:56.613
> 
> 标签：php, codeigniter, paypal, paypal-ipn

我的 IPN URL 是 http://:85/ 它有一个自定义端口。这个 url 工作正常，但 paypal 总是在它的模拟器上给我错误，而不是在付款时调用我的 IPN。

什么会导致这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-28T07:27:42.947

IPN 监听器需要监听 http(80) 的标准端口。https(443) 否则它不起作用......这在文档中没有指定，它没有意义，所以它很混乱！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:00:00.267

这是在贝宝沙盒中启用 IPN 的步骤

1.  登录到 Sandbox Merchant Id，然后单击“我的帐户”下的“个人资料”子选项卡。
2.  单击配置文件下的更多选项链接。
3.  看第三行的销售偏好。
4.  单击销售首选项下的即时付款通知首选项链接
5.  输入 IPN 网址

更新设置....

# android - sendJavascript not working in phonegap

> ID：11609177
> 
> 赞同：2
> 
> 时间：2012-07-23T08:48:05.893
> 
> 标签：android, cordova

I have made a phonegap plugin application on android. I am trying to send String value from Java Code to JavaScript using the `sendJavaScript API` in Phonegap. But I am facing a problem. If the string contains a single quote, then `sendJavaScript` does not work. Without single quote, it works perfectly fine. Following is the code, in the java file of Plugin class.

```
String result = "Any text except single quote ";
String SendJS = "javascript:" + SuccessCallBack + "('" + JSONObject.quote(result) +    "')"; 
sendJavaScript(SendJS); 
```

`SuccessCallBack` - Callback function in the JavaScript.

`result` - String to be passed to JavaScript Callback.

If the result string contains a single quote, then sendJavaScript does not work.

**Any Suggestions?**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T07:39:38.640

[在使用http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html（JS](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/StringEscapeUtils.html)或 HTML 之一）发送之前转义字符串。在 JS 端使用 unescape(string) 取消它，这应该可以帮助你。

# android - NDK添加预建库。正确方法

> ID：11609181
> 
> 赞同：0
> 
> 时间：2012-07-23T08:48:23.460
> 
> 标签：android, android-ndk

这是指定 Android.mk 的正确格式吗？是否有任何语法错误？我找不到任何可以解决这个疑问的来源。在此先感谢您。

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := imageprocessing
LOCAL_SRC_FILES := imageprocessing.c
LOCAL_LDLIBS    := -lm -llog -ljnigraphics

include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE := libfreeimage
LOCAL_SRC_FILES := libfreeimage.so

include $(PREBUILT_SHARED_LIBRARY) 
```

并且在 C 代码中有

```
#include <android/libfreeimage.h> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:54:21.303

因为您从现有共享库创建共享库：所以您需要先提供预构建的共享库部分，然后您可以创建自己的库。所以你的代码应该是这样的：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := libfreeimage
LOCAL_SRC_FILES := libfreeimage.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := imageprocessing
LOCAL_SRC_FILES := imageprocessing.c
LOCAL_LDLIBS    := -lm -llog -ljnigraphics

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:21:55.193

好吧，我从 [http://www.kandroid.org/ndk/docs/PREBUILTS.html](http://www.kandroid.org/ndk/docs/PREBUILTS.html)得到了解决方案， 感谢您宝贵的时间 Subrat nayak，非常感谢

# java - 在JAVA中用零初始化一个二维数组

> ID：11609188
> 
> 赞同：7
> 
> 时间：2012-07-23T08:48:40.237
> 
> 标签：java, arrays, time

> **可能重复：**
> [将所有数组元素初始化为零的任何快捷方式？](https://stackoverflow.com/questions/2154251/any-shortcut-to-initialize-all-array-elements-to-zero)

如何在不使用需要大量时间的旧循环方法的情况下用零初始化一个普通的 2D 数组（所有外壳都应该存储零）。我的代码想要一些应该花费更少时间但通过循环方法我的时间限制超过的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T08:50:37.083

这里要意识到的重要一点是，如果您要存储原语，则[默认值为零](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)（向下滚动到*默认值*部分）。这适用于数组初始化以及简单的变量初始化，因此您不必将数组内容显式初始化为零。

但是，如果必须重置现有结构，则必须遍历该结构，并且最好初始化数组结构的新实例。

请注意，如果您正在创建一个或多个数组，显然您必须使用包含的数组初始化第一个数组。

# ajax - 如何使用 selenium 处理谷歌搜索 ajax 数据

> ID：11609193
> 
> 赞同：0
> 
> 时间：2012-07-23T08:48:59.747
> 
> 标签：ajax, selenium, webdriver

如何使用 selenium 处理谷歌搜索 ajax 数据（在谷歌搜索中键入一些字符串，不要按回车键并在搜索文本框中检查匹配的字符串数据）？如何使用 selenium RC/Webdriver 获取这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:02:40.553

如果您知道某些事件的操作（例如 sendKeys、onClick 等）将触发某些事件（例如 Ajax 请求），您应该使用 waitFor 直到满足您的条件（请参阅[高级使用](http://seleniumhq.org/docs/04_webdriver_advanced.html)指南）。

为了避免在测试中提供脆弱的超时阈值，您可能希望在 Poll 实现中调用它，例如每 500 毫秒 10 次，然后相应地通过/失败

**FitLibraryWeb 对此有一些不错的、干净的抽象，但你当然需要使用 Fitnesse**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:49:14.073

谢谢你的朋友..我可以使用 Firefox 驱动程序从 selenium 示例代码运行谷歌搜索：http: [//seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)

现在，我尝试在获得搜索结果后单击左侧窗格中可用的“更改位置”，但没有运气。代码示例：

```
WebDriver driver = new FirefoxDriver();
driver.get("http://www.google.com");
WebElement element = driver.findElement(By.name("q"));
element.sendKeys("Cheese!");
element.submit();
WebElement expandLocation = driver.findElement(By.id("expand_location_link"));
expandLocation.click(); 
```

调试信息：在查看源代码中，我无法看到元素 expand_location_link，但在 firefox/chrome 的元素检查部分或将页面从浏览器保存到本地系统后可见。**

# mysql - 根据一个标准获取同一表中不存在的记录

> ID：11609200
> 
> 赞同：0
> 
> 时间：2012-07-23T08:49:27.923
> 
> 标签：mysql, join

我想获取订阅了一个帖子但其他类型的用户的 ID。

请检查下表

表：订阅者

```
userid  post_id  notification_made
33      780          2
35      780          2
29      780          2
33      780          1
35      780          1 
```

在上图中，在插入最后 2 条记录时，我使用插入查询添加 33 和 35，notification_made = 1。在这里，我想获取此表中具有相同 post_id (780) 的用户的 ID，但那些不在相同的 notification_id (1)。所以我需要 29 个用户 ID，它在同一个 post_id 下但不在同一个 notification_made 下。

请帮忙 ！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:55:02.617

考虑到您有三个参数（两个用户标识和一个通知模式），并且要插入，您可以尝试：

```
INSERT INTO subscribers
SELECT DISTINCT a.userid, a.post_id, 1
FROM subscribers a
INNER JOIN
(
    SELECT post_id
    FROM subscribers
    WHERE userid IN (33,35) AND notification_made = 1
    GROUP BY post_id
    HAVING COUNT(*) = 2
) b ON a.post_id = b.post_id
WHERE a.userid NOT IN (33,35) AND a.notification_made <> 1 
```

# android-emulator - 应用程序意外停止。单击按钮后出现强制关闭

> ID：11609203
> 
> 赞同：0
> 
> 时间：2012-07-23T08:50:00.390
> 
> 标签：android-emulator

应用程序意外停止。强制关闭。单击“更新”按钮后，此消息仅针对一个意图，对于另一个意图，该应用程序可以正常工作。该应用程序将获取两个字符串输入并将它们更新到数据库并查看表。我的应用程序正在完美更新，但是当我单击查看它时出现错误消息。

```
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL("CREATE TABLE " + DATABASE_NAME + "(" +
            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            KEY_NAME + " TEXT NOT NULL, " + 
            KEY_HOTNESS + " TEXT NOT NULL);"

    );

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS " + DATABASE_NAME);
    onCreate(db);
}

}

public hotornot(Context c){
ourcontext = c;
}
public hotornot open(){
ourHelper = new DbHelper(ourcontext);
ourDatabase = ourHelper.getWritableDatabase();
return this;
}
public void close(){
ourHelper.close();
}
public Long createentry(String name, String hotness){
ContentValues cv= new ContentValues();
cv.put(KEY_NAME, name);
cv.put(KEY_HOTNESS,hotness );
return ourDatabase.insert(DATABASE_TABLE, null, cv);
}
    public String getdata() {
// TODO Auto-generated method stub
String[] columns = new String[]  {KEY_ROWID, KEY_NAME, KEY_HOTNESS};
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null,      null);
String result = "";
int irow = c.getColumnIndex(KEY_ROWID);
int iname = c.getColumnIndex(KEY_NAME);
int ihotness = c.getColumnIndex(KEY_HOTNESS);
for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
{
    result = result + c.getString(irow) + " " + c.getString(iname) + " " + c.getString(ihotness) + "\n";

}
return result;
}
} 
```

这是更新的清单文件：

```
07-24 17:31:05.134: ERROR/AndroidRuntime(203): Uncaught handler: thread main exiting      due to uncaught exception
07-24 17:31:05.164: ERROR/AndroidRuntime(203): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=org.sqlite.SVIEW }
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.app.Activity.startActivityForResult(Activity.java:2749)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.app.Activity.startActivity(Activity.java:2855)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at org.sqlite.sqliteexample.onClick(sqliteexample.java:75)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.view.View.performClick(View.java:2364)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.view.View.onTouchEvent(View.java:4179)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.widget.TextView.onTouchEvent(TextView.java:6541)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.view.View.dispatchTouchEvent(View.java:3709)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.os.Looper.loop(Looper.java:123)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at android.app.ActivityThread.main(ActivityThread.java:4363)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at java.lang.reflect.Method.invokeNative(Native Method)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at java.lang.reflect.Method.invoke(Method.java:521)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-24 17:31:05.164: ERROR/AndroidRuntime(203):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T03:39:53.370

Your exception stack shows that the error is due to the table (peopletable) not being present.

A quick glance at your code shows the following:

`db.execSQL("CREATE TABLE " + DATABASE_NAME + "(" + KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_NAME + " TEXT NOT NULL, " + KEY_HOTNESS + " TEXT NOT NULL);"`

The error is probably due to a typo in your code. You are using `DATABASE_NAME` instead of `DATABASE_TABLE` in your code, as a result of which your table name is different from the one that the rest of your code is expecting.

# java - Java中Set的并发迭代和删除

> ID：11609206
> 
> 赞同：3
> 
> 时间：2012-07-23T08:50:08.993
> 
> 标签：java, multithreading

我有一组预先填充的字符串。我想迭代项目，在迭代时，我需要“做工作”，这也可能从集合中删除项目。我想为每个项目的“工作”产生一个新线程。请注意，在“做工作”期间，只有一些项目会从集合中移除。

现在我有以下问题，

我可以通过简单地使用 Collections.synchronizedSet(new HashSet()); 来实现这一点吗？? 我猜这会抛出 ConcurrentModificationException 因为我在迭代时从列表中删除项目。如何在没有一致性问题的情况下有效地实现上述行为？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T08:53:43.707

我会使用 ExecutorService

```
ExecutorService es = Executors.newFixedThreadPool(n);
List<Future<String>> toRemove = new ARraysList<>();
for(String s: set)
   toRemove.add(es.submit(new Task(s)));
for(Future<String> future : toRemove()) {
   String s = future.get();
   if (s != null)
       set.remove(s);
} 
```

这避免了需要以多线程方式访问集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:09:18.070

是的，SynchronisedSet 仍然会抛出 ConcurrentModificationExceptions。

尝试这个：

```
Set s = Collections.newSetFromMap(new ConcurrentHashMap()) 
```

当多个线程访问和修改它时，ConcurrentHashMap 绝不应该抛出 ConcurrentModificationException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:51:50.607

使用一个主**生产者**线程，该线程将从集合中删除元素并将它们提供给**消费者**线程。消费者线程无需“亲自”删除项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T10:13:10.917

该方法取决于您集合中的数据与操作的成功完成之间的关系。

## Remove from Set 独立于任务执行的结果

如果您不关心线程执行的实际结果，则可以在分派任务时遍历集合并删除每个项目（您已经有一些示例）

## 仅当任务执行成功完成时从 Set 中移除

如果从集合中删除对执行成功是事务性的，则可以使用`Future`s 收集有关任务执行成功的信息。这样，只有成功执行的项目才会从原始集合中删除。无需同时访问 Set 结构，因为您可以使用`Future`s 和 an将执行与检查分开`ExecutorService`。例如：

```
// This task will execute the job and, 
// if successful, return the string used as context
class Task implements Callable<String> {
    final String target;
    Task(String s) {
        this.target = s; 
    }
    @Override
    public String call() throws Exception {
        // do your stuff
        // throw an exception if failed 
        return target;
    }
} 
```

这就是它的使用方式：

```
ExecutorService executor;

Set<Callable<String>> myTasks = new HashSet<Callable<String>>();
for(String s: set) {
   myTasks.add(new Task(s));
}
List<Future<String>> results = executor.invoqueAll(myTasks);
for (Future<String> result:results) {
    try {
        set.remove(result.get());
    } catch (ExecutionException ee) {
        // the task failed during execution - handle as required
    } catch (CancellationException ce) {
        // the task was cancelled - handle as required
    }
} 
```

# javascript - 如何CSS沙箱/重置当前页面中的整个DIV区域？

> ID：11609207
> 
> 赞同：10
> 
> 时间：2012-07-23T08:50:16.467
> 
> 标签：javascript, html, css, bookmarklet

我们正在开发一个书签，当书签加载到不同的网站上时，例如：cnn.com、bbc.co.uk、yahoo.com，它会以各种样式显示，我们很难重新设置这些样式。

小书签内容在当前页面的 DOM 中，而不是在 iframe 中（因为我们需要 cookie 和访问 DOM）。

我们尝试使用 CSS 重置，但这只会重置一些基本的东西，比如边距。和页面，例如，有一个自定义表单，或者它继承的圆桌矩形，它不应该。

有没有办法可以完全隔离当前页面中的这个 DIV 区域，只看我们想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:27:43.373

我们最终使用[https://github.com/premasagar/cleanslate](https://github.com/premasagar/cleanslate)

CleanSlate 是一个极端的 CSS 重置样式表。它用于将 HTML 元素及其所有子元素的样式重置为默认 CSS 值。它完全由 !important 规则组成，这些规则覆盖所有其他类型的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:37:44.390

尝试用一些不太可能出现在其页面上的晦涩元素替换您的 div 怎么样。

例如。如果您不关心浏览器支持，或者或者甚至可能是较新的 html5 元素`b`之一`em`。`i`

并将它们设置`display: block`为像`div`块元素一样运行。

您生成的 HTML 不会是有效的或漂亮的，但它是一个书签，所以，嗯。

除此之外，您需要一个非常好的重置。

或者你只需​​要忍受你的造型略有不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:29:31.990

好吧，您可以使用唯一的 id 并在之后为每个属性添加 !important - 用于重置 DOM 中生成的元素 - 或者您可以使用“HTML5”中的新范围属性。

但这可能会导致该元素或父元素上的所有显式“继承”值样式出现问题。例如，相对字体大小也会导致问题。

因此是样式部分的实验范围属性，但上次我尝试它时只有 Chrome/Chromium 支持它，Firefox 可能最近也支持它 - 因为邮件列表上有很大的讨论。

[http://updates.html5rocks.com/2012/03/A-New-Experimental-Feature-style-scoped](http://updates.html5rocks.com/2012/03/A-New-Experimental-Feature-style-scoped)

编辑：

另一种解决方案可能是使用默认情况下不在 DOM 中的自定义元素。像 document.createElement("thisisfrommyapp"); 您可以像其他元素一样设置它们的样式，但必须应用 display:block 或任何他们想要的行为。

此外，IE 允许使用它们，但实际上您需要先将它们插入到 Tridents 的解析器中。如果你想在 HTML 中使用它们，你必须在解析 DOM 之前执行 createElement() （所以它很可能在文档的头部）。

```
<html>
<head><script>document.createElement('customelement');</script></head>
<body><customelement>is stylable in IE8, too</customelement></body>
</html> 
```

你必须只为 Trident 做 createElement 的东西，否则你会因为它们的 display:inline-block 默认模型而导致奇怪的解析行为:)

如果您出于任何愚蠢的原因在网站上使用 XHTML（没有正当理由在 HTML 上使用 XHTML，因为解析器无论如何都会剥离 XML 标记），您应该为它使用自定义命名空间。

~干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-03T09:54:41.623

按照这 2 个步骤对容器进行沙箱处理。

```
<div class="namespace-box">
    <h1 class="namespace-title">Title</h1>
    <p class="namespace-text">Text</p>
</div> 
```

1.  取消设置容器命名空间的所有属性，`all: unset;`只是一个占位符：

```
[class*="namespace-"],
[class*="namespace-"]:之后，
[class*="namespace-"]：之前，
[class*="namespace-"]:hover:after,
[class*="namespace-"]:hover:before {
    全部：未设置；
    // 要取消设置的属性
}

```

2.  使用 Grunt 或 Gulp 任务将属性选择器添加到您的原始 CSS。这增加了级联并防止未设置的黑客覆盖：

```
[class*="namespace-"].namespace-box,
[class*="namespace-"].namespace-title,
[class*="namespace-"].namespace-text {
    // 原始属性
}

```

您可以使用[postcss-increase-specificity](https://github.com/MadLittleMods/postcss-increase-specificity)任务自动化规范。

享受您的防弹容器。

# c# - 在 C# 中定义可以接受大量参数的函数

> ID：11609210
> 
> 赞同：2
> 
> 时间：2012-07-23T08:50:25.737
> 
> 标签：c#, function, parameters

例如，`printf`在 c 中可以采用任意数量的参数，如`printf("%d %d %s %s...",a,b,c,d,...`) 并记录如下

```
printf( const char *format [, argument]... ); 
```

如何在 C# 中定义这样的函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T08:52:38.987

使用[params](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.71%29.aspx)关键字：

```
void WriteAll(params object[] args) {
   for(int i = 0; i < args.Length; i++)
       Console.WriteLine(args[i]);
} 
```

args 将是一个包含您传递的所有参数的数组。请注意，它必须是最后一个正式参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:52:41.047

使用 params object[] arg 作为最后一个参数。 [http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.71%29.aspx) 查看更多详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:54:16.313

```
private void Print(params object[] values)
    {
        foreach (var item in values)
        {
            Console.WriteLine(item);
        }
    } 
```

此代码将使用“params”关键字将您将在对象数组中发送的每个项目打印到控制台。您可以使用任意数量的参数（或无参数）调用此方法。

链接： http: [//msdn.microsoft.com/en-us/library/w5zay9db (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/w5zay9db(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T08:54:46.643

在 c# 中，您将使用**[params](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)**关键字。

```
public static void UseParams2(params object[] list)
{
    for (int i = 0; i < list.Length; i++)
    {
        Console.Write(list[i] + " ");
    }
    Console.WriteLine();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T08:53:52.883

在这种情况下有几种方法：

*   您可以定义一个`type`包含您需要在方法之间传递和返回的所有字段。比 simple 更好`object array`，因为它是类型安全的。

*   您可以定义放置参数名称和值的字典。比 simple 更好`object array`，因为它是类型安全的。

*   （这取决于参数的数量，以及代码的使用逻辑）您可以定义相同函数的重载。

    ```
    func A (AA aa) 

    func A(AA aa, BB bb =null)

    func A(AA aa, BB bb = null, CC cc = null) 
    ```

等等...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T08:52:32.023

只需使用您的参数传递一个对象

```
private void MyVoid(MyParameterObject params)
{

} 
```

# javascript - 鼠标悬停时的链接按钮变大，字体加粗

> ID：11609217
> 
> 赞同：0
> 
> 时间：2012-07-23T08:50:49.987
> 
> 标签：javascript, jquery, asp.net, linkbutton

当我将鼠标移到 ASPNET 链接按钮上时，我怎样才能做到这一点，它不会变成粗体字？

![在此处输入图像描述](../Images/84c63d74bc221ae5e5e59a340272ad2c.png)

```
a:hover{something here} 
```

不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:05:54.153

您可以做的是从链接按钮中添加或删除属性，例如

$('#linkbutton-id"').mouseover(function() { $('this').attr("font-weight","weight:bold")

});

$('#linkbutton-id"').mouseover(function() { $('this').removeAttr("font-weight")

});

您也可以使用 Jquery 的 addClass 或 removeClass 函数，它们为您提供了在元素上添加 css 类以实现任何效果的功能

# ios - iOS5 - 如何解析来自 Facebook 的 JSON 响应

> ID：11609219
> 
> 赞同：0
> 
> 时间：2012-07-23T08:50:52.337
> 
> 标签：ios, facebook, json, ios5, feed

> **可能重复：**
> [使用 Facebook Graph Api 在 iphone 中解析新闻提要响应](https://stackoverflow.com/questions/5712108/news-feed-response-parsing-in-iphone-using-facebook-graph-api)

我目前正在尝试访问用户新闻源中的帖子。所以我做了什么，在我的电话中`-viewDidLoad`发出了这个电话`[self.facebook requestWithGraphPath:@"me/home" andDelegate:self]`。

为了检查这个请求是否正常工作，我`NSLog`进入了`- (void)request:(FBRequest *)request didReceiveResponse:(NSURLResponse *)response`我收到响应的方法。

因此，在方法中`- (void)request:(FBRequest *)request didLoad:(id)result`我`NSLog`选择了`result`f。通过进一步检查`result`我得到的是什么，我确认这是在`Dictionary`包含一个`Array`of 的a 中`Dictionaries`。如果我错了，请纠正我，但似乎这是一个 JSON 数据。

启发我如何解析这个。我希望访问帖子的消息内容并用这些内容填充 tableView。

以下是部分`result`内容。由于 JSON 数据很长，因此打算剪切内容。

```
 actions =             (
                                {
                    link = "http://www.facebook.com/1281439485/posts/3530285457443";
                    name = Comment;
                },
                                {
                    link = "http://www.facebook.com/1281439485/posts/3530285457443";
                    name = Like;
                }
            );
            application =             {
                id = 312323298863842;
                name = Visitors;
                namespace = "pdf_balkyh";
            };
            comments =             {
                count = 0;
            };
            "created_time" = "2012-07-23T05:24:22+0000";
            description = "Check  here--->>>>>>> FA\U0152BOOK PROFILE VIEWER \U00ae <<<<<<<<<------";
            from =             {
                id = 1281439485;
                name = "Ruje Anne Granada";
            };
            icon = "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif";
            id = "1281439485_3530285457443";
            likes =             {
                count = 2;
                data =                 (
                                        {
                        id = 100001286433192;
                        name = "Lea Jean Nasis";
                    },
                                        {
                        id = 100001689591913;
                        name = "Donna Mae Mata Severino";
                    }
                );
            };
            link = "http://www.facebook.com/photo.php?fbid=444944958870260&set=at.444944952203594.105123.100000642787491.1281439485&type=1&relevant_count=1";
            "object_id" = 444944958870260;
            picture = "http://photos-g.ak.fbcdn.net/hphotos-ak-snc7/487763_444944958870260_1869491222_s.jpg";
            story = "Ruje Anne Granada was tagged in Dominik Espedido's photo.";
            "story_tags" =             {
                0 =                 (
                                        {
                        id = 1281439485;
                        length = 17;
                        name = "Ruje Anne Granada";
                        offset = 0;
                        type = user;
                    }
                );
                32 =                 (
                                        {
                        id = 100000642787491;
                        length = 16;
                        name = "Dominik Espedido";
                        offset = 32;
                        type = user;
                    }
                );
            };
            type = photo;
            "updated_time" = "2012-07-23T05:24:22+0000";
        },
                {
            actions =             (
                                {
                    link = "http://www.facebook.com/1653195989/posts/3973684834542";
                    name = Comment;
                },
                                {
                    link = "http://www.facebook.com/1653195989/posts/3973684834542";
                    name = Like;
                }
            );
            comments =             {
                count = 0;
            };
            "created_time" = "2012-07-23T05:22:27+0000";
            from =             {
                id = 1653195989;
                name = "Moisheil Shawnaleh Casin";
            };
            id = "1653195989_3973684834542";
            likes =             {
                count = 5;
                data =                 (
                                        {
                        id = 1188264972;
                        name = "Fatima Mariz Siapco Ballon";
                    },
                                        {
                        id = 100000082876900;
                        name = "Charisskayne Cudilla";
                    },
                                        {
                        id = 100000278413364;
                        name = "Ser Jerido Mendoza";
                    },
                                        {
                        id = 100000510643459;
                        name = "Joselito Delacruz";
                    }
                );
            };
            message = "Time to face the book. Goodnight Facebook :*";
            type = status;
            "updated_time" = "2012-07-23T05:22:27+0000";
        },
    {
            actions =             (
                                {
                    link = "http://www.facebook.com/753114045/posts/10151290447744046";
                    name = Comment;
                },
                                {
                    link = "http://www.facebook.com/753114045/posts/10151290447744046";
                    name = Like;
                }
            );
            comments =             {
                count = 5;
                data =                 (
                                        {
                        "created_time" = "2012-07-23T06:10:14+0000";
                        from =                         {
                            id = 664040284;
                            name = "Karla Zulueta";
                        };
                        id = "753114045_10151290447744046_27243728";
                        likes = 1;
                        message = "nice seeing you master jedi! ";
                    },
                                        {
                        "created_time" = "2012-07-23T06:52:06+0000";
                        from =                         {
                            id = 605194601;
                            name = "Punky Taguines";
                        };
                        id = "753114045_10151290447744046_27243977";
                        message = "awww!!! =)";
                    }
                );
            };
            "created_time" = "2012-07-23T05:15:08+0000";
            from =             {
                id = 753114045;
                name = "Al Hiquiana";
            };
            id = "753114045_10151290447744046";
            likes =             {
                count = 29;
                data =                 (
                                        {
                        id = 1799103505;
                        name = "Hans Soriano";
                    },
                                        {
                        id = 1285932568;
                        name = "Dean Edward Mejos";
                    },
                                        {
                        id = 613326737;
                        name = "Kathleen Lois Tolentino";
                    },
                                        {
                        id = 562689505;
                        name = "Miguel Valeroso";
                    },
                                        {
                        id = 590597501;
                        name = "Juan M. Borra III";
                    }
                );
            };
            message = "Is today a \"Look There's Dr. Hiquiana Let's Greet Him Day\"? Walking across Pearl, a huge SUV pulls over and out comes Samantha Maristela, Karla Zulueta, and Mia Penaflor to greet me, and two minutes later while crossing over Amethyst, my niece Camille Hiquiana pulls her car over and greets her uncle. Next time, please let me know what time you want me to come out to Pearl so that you can all pull your cars along the street and greet me at the same time okay? Don't wanna get blamed for traffic delays. :)";
            "message_tags" =             {
                118 =                 (
                                        {
                        id = 728750295;
                        length = 18;
                        name = "Samantha Maristela";
                        offset = 118;
                        type = user;
                    }
                );
                138 =                 (
                                        {
                        id = 664040284;
                        length = 13;
                        name = "Karla Zulueta";
                        offset = 138;
                        type = user;
                    }
                );
                244 =                 (
                                        {
                        id = 550729297;
                        length = 16;
                        name = "Camille Hiquiana";
                        offset = 244;
                        type = user;
                    }
                );
            };
            to =             {
                data =                 (
                                        {
                        id = 728750295;
                        name = "Samantha Maristela";
                    },
                                        {
                        id = 664040284;
                        name = "Karla Zulueta";
                    },
                                        {
                        id = 550729297;
                        name = "Camille Hiquiana";
                    }
                );
            };
            type = status;
            "updated_time" = "2012-07-23T06:52:06+0000";
        },
                {
            actions =             (
                                {
                    link = "http://www.facebook.com/1513598830/posts/4307072084362";
                    name = Comment;
                },
                                {
                    link = "http://www.facebook.com/1513598830/posts/4307072084362";
                    name = Like;
                }
            );
            application =             {
                id = 2915120374;
                name = Mobile;
            };
            comments =             {
                count = 1;
                data =                 (
                                        {
                        "created_time" = "2012-07-23T04:49:22+0000";
                        from =                         {
                            id = 1513598830;
                            name = "Lhuzie Fherr Imba";
                        };
                        id = "1513598830_4307072084362_4645870";
                        likes = 1;
                        message = "hehehe liked agd kua?! lol";
                    }
                );
            };
            "created_time" = "2012-07-23T04:45:22+0000";
            from =             {
                id = 1513598830;
                name = "Lhuzie Fherr Imba";
            };
            id = "1513598830_4307072084362";
            likes =             {
                count = 3;
                data =                 (
                                        {
                        id = 100000163093708;
                        name = "Joezell Lance";
                    },
                                        {
                        id = 100000168291972;
                        name = "Maya Imba";
                    },
                                        {
                        id = 1269626082;
                        name = "Jade Siquig";
                    }
                );
            };
            message = "i wanna live in your world ..\n:)";
            type = status;
            "updated_time" = "2012-07-23T04:49:22+0000";
        },
                {
            actions =             (
                                {
                    link = "http://www.facebook.com/144392208916916/posts/443652415657559";
                    name = Comment;
                },
                                {
                    link = "http://www.facebook.com/144392208916916/posts/443652415657559";
                    name = Like;
                }
            );
            comments =             {
                count = 15;
                data =                 (
                                        {
                        "created_time" = "2012-07-23T06:32:30+0000";
                        from =                         {
                            id = 100000965461049;
                            name = "Marvin Corpuz Nueva Espana";
                        };
                        id = "144392208916916_443652415657559_1142915";
                        message = "wow scrape";
                    },
                                        {
                        "created_time" = "2012-07-23T06:48:05+0000";
                        from =                         {
                            id = 100001181620235;
                            name = "Acist Aj Kulits";
                        };
                        id = "144392208916916_443652415657559_1142944";
                        message = "LIKE SANA ASO nalang wahahhahaha LOSO";
                    }
                );
            };
            "created_time" = "2012-07-23T04:44:02+0000";
            from =             {
                category = "Public figure";
                id = 144392208916916;
                name = "Steelwolves Guild (cabal online ph.)";
            };
            icon = "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif";
            id = "144392208916916_443652415657559";
            likes =             {
                count = 19;
                data =                 (
                                        {
                        id = 100001313573878;
                        name = "Rigel ANthony";
                    },
                                        {
                        id = 100001029619613;
                        name = "Micheal Dohinog";
                    },
                                        {
                        id = 100001189865269;
                        name = "Vicente Tapdasan Aparri";
                    },
                                        {
                        id = 100000579428324;
                        name = "Souljaboy RosaLes";
                    }
                );
            };
            link = "http://www.facebook.com/photo.php?fbid=443652395657561&set=a.144534268902710.19465.144392208916916&type=1&relevant_count=1";
            message = "oi! doggy ano yan!!
\n~xJaxs";
            "object_id" = 443652395657561;
            picture = "http://photos-h.ak.fbcdn.net/hphotos-ak-snc6/602592_443652395657561_2117800715_s.jpg";
            shares =             {
                count = 2;
            };
            type = photo;
            "updated_time" = "2012-07-23T06:48:05+0000";
        }
    ); 
```

# android - Apk 安装在设备上，但我在应用程序中看不到它

> ID：11609224
> 
> 赞同：5
> 
> 时间：2012-07-23T08:51:38.233
> 
> 标签：android, apk, grid-layout

我想调整 API Demos 组中的一段示例代码 - GridLayout0。为此，我创建了一个单独的项目并将 GridLayout0.java 复制到其中。现在，当我尝试查看更改的结果时，我进入的 LogCat 是

```
Uploading GridLayoutSampleTwicked.apk onto device '0388920542204257'
Installing GridLayoutSampleTwicked.apk...
Success!
/GridLayoutSampleTwicked/bin/GridLayoutSampleTwicked.apk installed on device
Done! 
```

显然 apk 已成功安装在设备上，但我在可以从中启动它的应用程序列表中看不到该应用程序（它不应该在安装后立即启动吗？）

我是菜鸟，可能错过了什么。

如果这很重要，那么在创建新项目时 Eclipse 会询问我有关“根父级”的问题。我不得不将它链接回 API Demos 包，因为 Eclipse 不允许我继续进行新项目。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T09:10:28.637

验证此元素是否存在于 manifest.xml 上的主要活动中：

```
 <intent-filter>
          <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T18:08:35.077

是的，这部分丢失了。添加这个并删除我在下面给出的代码段会按照我的意愿启动应用程序。

Eclipse 生成了这段代码，我不太明白它的作用

```
<meta-data android:name="android.support.PARENT_ACTIVITY"
           android:value="com.example.android.apis.view.GridLayout0" /> 
```

# perl - 如何使用 Perl 启动多个火灾并忘记 PHP 脚本？

> ID：11609229
> 
> 赞同：1
> 
> 时间：2012-07-23T08:51:52.723
> 
> 标签：perl, fire-and-forget

我目前有一个 perl 脚本，我试图用它来启动三个（或更多）php 脚本，每个脚本都有一组从数据库提供的参数：

```
$sql = "SELECT id,url,added,lasttotal,lastsnapshot,speed,nextsnapshot FROM urls WHERE DATE(NOW()) > DATE(nextsnapshot)  LIMIT 0,3";
$sth = $dbh->prepare($sql);
$sth->execute or print "SQL Error: $DBI::errstr\n";

my ($urlID, $url, $added,$lastTotal,$lastSnapshot,$lastSpeed,$nextsnapshot);

$sth->bind_col(1, \$urlID);
$sth->bind_col(2, \$url);
$sth->bind_col(3, \$added);
$sth->bind_col(4, \$lastTotal);
$sth->bind_col(5, \$lastSnapshot);
$sth->bind_col(6, \$lastSpeed);
$sth->bind_col(7, \$nextsnapshot);

while ($sth->fetch) {
  $myexec = "php /usr/www/users/blah/blah/launch_snapshot.php '$url' $urlID '$added' $lastTotal '$lastSnapshot' $lastSpeed".'  /dev/null 2>&1 &';

  exec ($myexec)     or print  "\n Couldn't exec $myexec: $!";  
} 
```

我不关心 PHP 脚本的任何结果，我只需要一次启动它们，或者延迟很小。

提取工作正常并返回三组唯一的值。但是，它似乎永远无法启动第一个 php 脚本。我没有收到任何错误消息。

非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:02:51.237

您可以使用`fork`或仅用`system`于此目的。

使用`fork`：

```
foreach($sth->fetch) {
  my $pid = fork();
  if($pid) { # Parent
    waitpid($pid, 0);
  } elsif ($pid == 0) { # A child
    $myexec = "...";
    exec($myexec) or print "\n Couldn't exec $myexec: $!";
    exit(0); # Important!
  } else {
    die "couldn't fork: $!\n";
  }
} 
```

使用`system`：

```
foreach($sth->fetch) {
  $myexec = "...";
  system($myexec);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:00:47.980

从`perldoc -f exec`

```
 exec LIST
   exec PROGRAM LIST
           The "exec" function executes a system command and never
           returns-- use "system" instead of "exec" if you want it to
           return.  It fails and returns false only if the command does
           not exist and it is executed directly instead of via your
           system's command shell (see below). 
```

你想`system`（或`fork`）不`exec.`

# css - 如何在创建引导响应式布局时为容器 div 设置宽度？

> ID：11609231
> 
> 赞同：7
> 
> 时间：2012-07-23T08:52:05.783
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在尝试制作一个引导响应式布局。在这里，我正在尝试缩短主容器 div 的宽度。我尝试设置内联宽度，但布局失去了响应性。当我检查 bootstrap.css 时，容器 div 的宽度是自动的。如果有人能揭示这背后的逻辑，我将不胜感激。以下是引导程序的演示代码。

PS - 我不想缩短 navbar-fixed 类的宽度，我只想缩短容器的宽度而不失去响应能力。

## HTML

```
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Project name</a>
      <div class="nav-collapse">
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>

<div class="container" >

  <!-- Main hero unit for a primary marketing message or call to action -->
  <div class="hero-unit">
    <h1>Hello, world!</h1>
    <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
    <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
  </div>

  <!-- Example row of columns -->
  <div class="row">
    <div class="span4">
      <h2>Heading</h2>
       <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
    <div class="span4">
      <h2>Heading</h2>
       <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
   </div>
    <div class="span4">
      <h2>Heading</h2>
      <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
      <p><a class="btn" href="#">View details &raquo;</a></p>
    </div>
  </div>

  <hr>

  <footer>
    <p>&copy; Company 2012</p>
  </footer>

</div> 
```

## CSS

```
 .container,
  .navbar-fixed-top .container,
  .navbar-fixed-bottom .container {
    width: 1170px;
  }
  .container {
    width: auto;
  } 
```

## 截屏

[截图 http://img442.imageshack.us/img442/7074/testjxk.jpg](http://img442.imageshack.us/img442/7074/testjxk.jpg)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T16:08:03.913

在 bootstrap-responsive.css 文件中，您将找到代码块，称为媒体查询，例如

```
@media (max-width: 480px) {
  /* Your CSS here */
} 
```

和

```
@media (min-width: 768px) and (max-width: 980px) {
  /* Your CSS here */
} 
```

您可以将内容区域的宽度设置为这些块内每个屏幕宽度的适当宽度，而不会影响其他块。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T09:11:52.697

尝试这个

```
 .container {
    width: auto;
    margin-left: 200px;
    margin-right: 200px;
  }​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T03:30:49.157

为了让它看起来响应，您可以创建`#page-wrap`和使用`max-width: 1200px; margin: 0 auto;`，或者您可以将其仅应用于内容。所以看起来像这样

## HTML

```
<div ID="page-wrap">
 <!-- CONTENT -->
</div> 
```

## CSS

```
#page-wrap {
 max-width: 1200px;
 margin: 0 auto;
} 
```

# watir - 如何获取 watir 中隐藏元素的文本

> ID：11609235
> 
> 赞同：0
> 
> 时间：2012-07-23T08:52:31.117
> 
> 标签：watir, hidden

html元素是，当鼠标在元素上移动时`p`，它的属性`style="display:none;"` 是可见的。我怎样才能得到`p`in Watir 的文本？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:06:25.263

尝试：

```
@browser.p(:style, 'display:none;').fire_event 'mouseover
@browser.p(:style, 'display:none;').click   #change to visible element you want to click 
```

fire_event 'mouseover' 就像你的鼠标悬停在元素上一样

# c#-4.0 - C# - 为事件设置空委托

> ID：11609236
> 
> 赞同：1
> 
> 时间：2012-07-23T08:52:33.323
> 
> 标签：c#-4.0, event-handling

```
public event EventHandler MyButtonClick = delegate { }; 
```

上面的结构允许不检查是否有任何订阅者：

```
public virtual void OnMyButtonClick(EventHandler e)
        {
            this.MyButtonClick(this, e);
        } 
```

代替

```
 public virtual void OnMyButtonClick(EventHandler e)
            { 
                if (MyButtonClick!=null)
                   this.MyButtonClick(this, e);
            } 
```

但这真的是个好主意吗？这是唯一的好处：不检查是否存在任何订阅者？

更新：这是示例

```
namespace ConsoleApplication2
{
    public class TestClass
    {
        public event EventHandler MyButtonClick;
            //= delegate { };

        public void OnButtonClick(EventArgs e)
        {
            MyButtonClick(this, e);
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var testClass = new TestClass();
            //it throws an exception
            testClass.OnButtonClick(new EventArgs());

            // if you add an handler it will call it

            testClass.MyButtonClick += myCustomHandler;
            testClass.OnButtonClick(new EventArgs()); // myCustomHandler has been invoiked

        }

        private static void myCustomHandler(object sender, EventArgs e)
        {
            Console.WriteLine("myCustomHandler has been invoiked");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T16:41:28.083

好吧，你在这里给出的代码：

```
public virtual void OnMyButtonClick(EventHandler e)
{ 
    if (MyButtonClick!=null)
       this.MyButtonClick(this, e);
} 
```

不是线程安全的。如果在无效性检查*之后*但调用*之前*删除了最终订阅，您可能会得到一个`NullReferenceException`（取决于“提升”线程是否看到更改）。

因此，您可以将其更改为：

```
public virtual void OnMyButtonClick(EventArgs e)
{ 
    var handler = MyButtonClick;
    if (handler != null)
    {
        handler(this, e);
    }
} 
```

......但当然你可能会忘记这样做，即使你不这样做，在整个地方都这样做很麻烦，IMO。所以是的，虽然好处是“仅”是为了避免无效检查，但我想说在许多情况下这并不是一个糟糕的权衡。IMO，任何使犯错更难的事情都是个好主意。

另一种选择是有一个扩展方法：

```
public static void SafeInvoke(this EventHandler handler, object sender,
                              EventArgs e)
{
    if (handler != null)
    {
        handler(sender, e);
    }       
} 
```

然后将您的调用代码更改为：

```
public virtual void OnMyButtonClick(EventArgs e)
{
    MyButtonClick.SafeInvoke(this, e);
} 
```

（并对其他事件使用相同的代码）。您可能还需要一个通用表格`EventHandler<T>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:58:36.620

你不需要这样做。如果使用您的类的客户端不会为`MyButtonClick`事件添加处理程序（订阅者），则代码不会引发异常。

这就是事件的工作方式（和委托是一样的），否则你将被迫为一个类的所有事件添加一个处理程序（假设有任何事件）

所以您可以执行以下操作：

```
public virtual void OnMyButtonClick(EventArgs e)
{ 
   MyButtonClick(this, e);
} 
```

看看下面的例子：

```
public class TestClass
{
    public event EventHandler MyButtonClick = delegate { };

    public void ButtonClick(EventArgs e)
    {
        MyButtonClick(this,e);
    }
}

class Program
{
    static void Main(string[] args)
    {
        var testClass=new TestClass();
        testClass.ButtonClick(new EventArgs());

        // if you add an handler it will call it

        testClass.MyButtonClick += myCustomHandler;
        testClass.ButtonClick(new EventArgs()); // myCustomHandler has been invoiked

    }

    private static void myCustomHandler(object sender, EventArgs e)
    {
        Console.WriteLine("myCustomHandler has been invoiked");
    }
} 
```

# python - 在 ldap 中提取 DN（专有名称）

> ID：11609237
> 
> 赞同：0
> 
> 时间：2012-07-23T08:52:33.930
> 
> 标签：python, ldap, python-ldap

我正在编写一段代码，它使用来自 ldap 服务器的身份验证。目前我的代码只允许显示用户 DN 和密码以进行登录。

```
Username: CN=mynane,CN=Users,DC=example,DC=com
Pwd : XXXX 
```

现在要做的是允许格式中的用户名

```
Username: myname@example.com
Pwd: xxxx 
```

我可以使用格式为“myname@example.com”的凭据绑定到服务器，但我的代码也需要“myname”组进行身份验证。为此，我需要从“myname@example.com”中找出 DN，以便提取“myname”所属的组。

**所以我的问题是如何从格式“myname@example.com”中找出 DN**

它是如何完成的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T15:23:54.663

您将必须获取 'userPrincipalName'='myname@example.com' 或 'samAccountName'='myname' 的用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:04:53.390

如果您想通过电子邮件地址查询 dn，您可以尝试以下代码。

```
ldap = "SELECT distinguishedName From 'LDAP://DC=example,DC=com' WHERE mail = '{}'"
mail = 'myname@example.com'

import win32com.client
c = win32com.client.Dispatch('ADODB.Connection')
c.Open('Provider=ADsDSOObject')
rs,rc = c.Execute(ldap.format(mail))
while not rs.EOF:
    for e in rs.fields:
        print('{}: {}'.format(e.Name, e.Value))
    rs.MoveNext() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-09T15:28:43.167

你必须做两件事：

1.  为 DNS 域 example.com 找到正确的子树（通常来自 Configuration 子树），如果您只有一个域，则更容易，只需忽略 @ 后面的部分。
2.  在该子树中查找 sAMAccountName=myname，因为它在域中是唯一的。

这些名称通常看起来像 UPN，但实际上并非如此。实际上，它们通常只是附加到 DNS 域名的 sAMAccountName。

# python-2.7 - 如何在python中删除特殊字符

> ID：11609245
> 
> 赞同：0
> 
> 时间：2012-07-23T08:52:57.517
> 
> 标签：python-2.7

我有一个看起来像这样的python字符串：

```
str='(/|\\)cmd\.exe$' 
```

现在我想删除特殊字符并获取以下字符串：

```
new_str=replace_func(str)
print new_str
cmd.exe 
```

有人可以帮我，如何编写这个 replace_func 函数。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:57:47.220

使用正则表达式可以删除特殊字符

这是一个正则表达式，用于匹配不是字母或数字的字符串：

```
[^A-Za-z0-9]+ 
```

前任：

```
import re
str='(/|\\)cmd\.exe$'
re.sub('[^A-Za-z0-9.]+', '',str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:16:49.350

尝试这个：

```
string = "(/|\\)cmd\.exe$"

chars_to_remove = ("(|\\/$")
for char in chars_to_remove:
    string=string.replace(char, "")

print string 
```

# ruby-on-rails - model.attributes = hash 与 model.attribute = value 有什么区别？

> ID：11609246
> 
> 赞同：0
> 
> 时间：2012-07-23T08:52:59.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3

和有什么区别

```
t = Zombie.find(3)
t.attributes = {:graveyard => "Benny Hills Memorial"}
t.save 
```

和

```
t = Zombie.find(3)
t.graveyard = "Benny Hills Memorial"
t.save 
```

railsforzombies 问题 1.5。第一个有效，第二个无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T08:57:32.487

该`graveyard`属性可能不是`attr_accessible`.

# java - Java：-Dweblogic 和 weblogic 控制台中的设置值之间的区别

> ID：11609249
> 
> 赞同：0
> 
> 时间：2012-07-23T08:53:11.667
> 
> 标签：java, parameters, console, client, weblogic

我试图用谷歌搜索这个问题，但没有得到任何有希望的答案。使用 -Dweblogic.XXX 在 java 客户端设置 weblogic 配置参数值与在 weblogic 管理控制台中设置相同的参数值有什么区别。

例如，如果我们考虑 CompleteMessageTimeout 参数，我可以在我的 java 客户端使用

```
-Dweblogic.CompleteMessageTimeout=300 
```

同时我也可以在 weblogic 管理控制台中配置它，在 AdminServer -> Protocols -> General 选项卡中。

这两种方法有什么区别？是否像在客户端设置的值会覆盖在管理服务器控制台中设置的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:10:36.370

当您使用 -Dweblogic.XXX 选项时，您可以覆盖控制台配置。

# r - R刻度数据：将日期和时间合并到一个对象中

> ID：11609252
> 
> 赞同：58
> 
> 时间：2012-07-23T08:53:17.783
> 
> 标签：r, statistics, time-series, finance

我目前正在使用 R 处理刻度数据，我想将日期和时间合并到一个对象中，因为我需要获得一个精确的时间对象来计算我的数据的一些统计数据。这是我的数据的样子：

```
 date       time      price flag    exchange
2   XXH10   2010-02-02   08:00:03   2787 1824        E
3   XXH10   2010-02-02   08:00:04   2786    3        E
4   XXH10   2010-02-02   08:00:04   2787    6        E
5   XXH10   2010-02-02   08:00:04   2787    1        E
6   XXH10   2010-02-02   08:00:04   2787    1        E 
```

基本上，我想将“日期”和“时间”列合并为一个。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-07-23T09:13:16.547

创建一个`datetime`对象`as.POSIXct`：

```
as.POSIXct(paste(x$date, x$time), format="%Y-%m-%d %H:%M:%S")
[1] "2010-02-02 08:00:03 GMT" "2010-02-02 08:00:04 GMT" "2010-02-02 08:00:04 GMT"
[4] "2010-02-02 08:00:04 GMT" "2010-02-02 08:00:04 GMT" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-05-25T15:06:56.737

当然，更优雅的解决方案（可以说）可以通过额外的包来实现。使用日期时，它是**lubridate**包：

```
library(lubridate)

with(x, ymd(date) + hms(time)) 
```

应该产生*POSIXlt*向量。

更新：

还有另一种使用通用日期和时间转换包的解决方案`anytime`（基于 C++ 库[Boost date_time](https://www.boost.org/doc/libs/1_61_0/doc/html/date_time.html)）：

```
 library(anytime)

 with(x, anytime(paste(date, time))) 
```

事实上，`anytime`与基础 R 和`lubridate`（当之无愧地被认为相当慢 - 请参阅[为什么我的函数在 lubridate 日期这么慢？](https://stackoverflow.com/q/46046714/59470)）C++（`anytime`）胜出：

```
 x = read.csv(text = 'date,time
2010-02-02,08:00:03
2010-02-02,08:00:04
2010-02-02,08:00:04
2010-02-03,08:00:04
2010-02-04,08:00:05
2010-02-04,08:00:05
2010-02-04,08:00:06
2010-02-04,08:00:07
2010-02-04,08:00:08
2010-02-04,08:00:14')

 microbenchmark::microbenchmark(
   base = with(x, as.POSIXct(paste(date, time), format="%Y-%m-%d %H:%M:%S")),
   anytime = with(x, anytime::anytime(paste(date, time))),
   lubri = with(x, lubridate::ymd(date) + lubridate::hms(time)),
   times = 1000L
) 
```

> ```
> Unit: microseconds
>   expr      min        lq       mean   median        uq        max  neval
>  base       71.163   91.2555   104.38747  104.785  112.1185   256.997  1000
>  anytime    40.508   52.5385   63.46973   61.843   68.5730    221.076  1000
>  lubri      1596.490 1850.4400 2235.34254 1909.588 2033.096   110751.622  1000 
> ```

# iphone - 一个自定义导航栏，用于五个以上带有按钮操作的视图控制器

> ID：11609253
> 
> 赞同：1
> 
> 时间：2012-07-23T08:53:25.050
> 
> 标签：iphone, ios5

我是 obj-C 的新手。目前我正在实现基于导航的应用程序。在我的应用程序中，我需要向所有视图（七个视图控制器）显示导航栏和五个按钮。我不想在每个类中创建五个按钮，而是创建具有五个按钮的单个自定义导航控制器并将其显示给所有视图控制器。它在视图控制器中工作正常，但在导航视图控制器中却不行。请帮助我或告诉我一些例子。

我在我的第一个视图控制器中调用下面的代码以及在 CustomNavBArViewController 类中实现的按钮操作代码。

```
- (void)viewDidLoad
{
[super viewDidLoad];
CustomNavBarViewController *navBar=[[CustomNavBarViewController alloc]init];
navBar.view.frame=CGRectMake(0, 0, 320, 50);
[self.view addSubview:navBar.view];
} 
```

当我单击该按钮时，该类正在调用但未执行操作。但正在为

[自我presentModalViewController：createAcc动画：YES]；不是为了

[self.navigationController pushViewController:createAcc 动画：YES];

我需要推送另一个视图控制器，请帮助我。谢谢

# mysql - MySQL - 左连接并从表中选择不在另一个表中的行

> ID：11609254
> 
> 赞同：2
> 
> 时间：2012-07-23T08:53:33.373
> 
> 标签：mysql, select, join, compare

好的，这是我现有的查询，可以满足我的需要。

```
SELECT C1.id AS id, C1.title AS title, C1.instructor_id AS instructor_id, 
  C1.description AS description, C1.date AS date, C1.starttime AS starttime, 
  C1.endtime AS endtime, C1.training_id AS training_id, C2.name AS name, 
  C2.id AS instructors_id 
FROM trainings C1 
LEFT JOIN instructors C2 ON C1.instructor_id = C2.id 
```

但是，我需要添加一些东西。除了我拥有的表之外，我还有两张表需要比较。

表“培训”有一个培训课程列表，由“id”索引。我还有另一个表“registrations”，其中包含有关哪些用户注册了哪些培训课程的信息，包含 3 列：“id”-索引，“user_id”-注册培训的用户的 ID，以及“course_id” - 培训课程的 ID。

除了我现有的查询之外，我还需要做的是仅选择在该用户的“注册”中没有一行的培训课程。

我希望这是有道理的。谢谢谁能帮忙。我已经尝试了几个小时。查询太大了，我无法保持井井有条并正确思考如何去做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T08:59:15.800

```
SELECT C1.id AS id, C1.title AS title, C1.instructor_id AS instructor_id, 
  C1.description AS description, C1.date AS date, C1.starttime AS starttime, 
  C1.endtime AS endtime, C1.training_id AS training_id, C2.name AS name, 
  C2.id AS instructors_id 
FROM trainings C1 
LEFT JOIN instructors C2 ON C1.instructor_id = C2.id
LEFT JOIN registrations C3 ON < Whatever they're connected on >
WHERE C3.id IS NULL 
```

基本上也是这样，并通过as`JOIN`过滤它会将连接表的列返回为.`WHERE ... IS NULL``LEFT JOIN``NULL`

# android - 如何将位图的黑色背景颜色更改为透明？

> ID：11609257
> 
> 赞同：7
> 
> 时间：2012-07-23T08:54:08.803
> 
> 标签：android, bitmap

我正在`Bitmap`使用以下代码创建：

```
Bitmap bm= Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888); 
```

但我想将`Background`颜色从*黑色*更改为*透明*，因为我也想在另一个对象中使用这个对象`Activity`。我搜索了很多，但我无法找到解决方案。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T14:23:35.643

当然ARGB_8888模式下创建的Bitmap是支持透明的，但是alpha通道最初是用0xff填充的，所以bitmap是不透明的。您必须像这样清除包括 alpha 通道在内的整个位图：

```
Canvas c = new Canvas(bm);
c.drawColor(0, Mode.CLEAR); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T08:59:54.170

位图图像不支持透明度。您应该使用 GIF 或 PNG。

[http://www.gimpchat.com/viewtopic.php?f=8&t=1290](http://www.gimpchat.com/viewtopic.php?f=8&t=1290)

# eclipse - eclipse for java-如何添加对 jsf 2.1 的支持到 eclipse 3.7-indigo

> ID：11609260
> 
> 赞同：2
> 
> 时间：2012-07-23T08:54:16.393
> 
> 标签：eclipse, jsf

我在 Eclipse 4.2 (Juno) 中处理 JSF 2.1 项目-但是我需要使用尚未更新的插件才能在 Eclipse 4.2 中工作-所以我安装了 Eclipse 3.7-Indigo 并尝试在 Eclipse Indigo 中打开 JSF 项目。

但是，这是我收到的错误消息-

```
Implementation of version 2.1 of project facet jst.jsf could not be found. Functionality will be limited. 
```

我该如何解决这个问题？我正在使用的项目使用 JSF 2.1 和 PrimeFaces。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T12:16:31.793

在将项目导入不支持较新 JSF facet 版本的较旧 Eclipse 版本之前，您实际上应该已经在项目属性的*Project Facets条目中编辑了 JSF facet 版本。*

如果由于某种原因不能这样做，那么您也可以通过转到`.settings`导航器视图中的文件夹，打开`org.eclipse.wst.common.project.facet.core.xml`文件并编辑来手动更改它

```
<installed facet="jst.jsf" version="2.1"/> 
```

进入

```
<installed facet="jst.jsf" version="2.0"/> 
```

# java - 如何将下拉列表包含到 Tapestry3 Contrib:Table 组件中？

> ID：11609267
> 
> 赞同：0
> 
> 时间：2012-07-23T08:54:46.497
> 
> 标签：java, drop-down-menu, tapestry

我正在使用 Tapestry3 和 Contrib:Table 库。我想在表格组件的每一行中包含一个下拉列表。代码可能如下所示：

```
<table jwcid="table@contrib:Table" width="90%"
    source="..."
    columns="..."/>
<span jwcid="selectColumnHeader@Block"><span jwcid="selectPayementMehtod"></span></span> 
```

如果有人可以对此有所了解，那将非常感激！

# android - 如何确定应用程序是在后台还是被终止？

> ID：11609268
> 
> 赞同：0
> 
> 时间：2012-07-23T08:54:54.760
> 
> 标签：android, lifecycle

我有一个应用程序，该应用程序应使用应跟踪以下事件的应用程序跟踪代码进行扩展：应用程序启动、关闭、前台和后台。我的应用程序有两个活动。

对于应用程序启动，我使用 app.onCreate()。对于前台和后台：每个活动中的 onResume 和 onPause。

所以我的问题是：

*   我如何检测应用程序何时完全消失？像 onTerminate() 这样的东西？
*   从第一个活动切换到第二个活动时，我得到 a1.onPause() 然后是 a2.onResume() ，因此事件背景后跟前景。在那种情况下，我不想要那些事件。我如何在 onPause 或 onStop 中知道我留在我的应用程序中并且只切换活动？

我想要的是：应用程序以 a1 -> 应用程序启动和应用程序前台事件开始，然后切换到 a2 -> 没有，按主页 -> 背景。当应用程序被杀死 -> 关闭时

至少我认为我想要那个，或者不应该因为androids特定的应用程序和活动生命周期而使用这种线性方法并做其他事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:58:23.237

> 我如何在 onPause 或 onStop 中知道我留在我的应用程序中并且只切换活动

恐怕您仅使用回调无法检测到这一点。

> 我如何检测应用程序何时完全消失？像 onTerminate() 这样的东西？

AFAIK 框架不为您提供此类回调。

# jquery - 如何在 jsFiddle 中运行代码，而在 html 窗口中没有标签 html、body、script

> ID：11609274
> 
> 赞同：0
> 
> 时间：2012-07-23T08:55:03.893
> 
> 标签：jquery, html, css, jsfiddle

我有 要从窗口 html 中删除的[演示代码：](http://jsfiddle.net/centerwow/Vdht5/4/)

1 - 标签为 html,body, (like `<html class="no-js" lang="en">`) **class="no-js"**在标签 html 中。

2 - 我有 jQuery 代码，如：

```
$(function(){

      SyntaxHighlighter.all();

    });

    $(window).load(function(){

      $('.flexslider').flexslider({

        animation: "slide",

        start: function(slider){

          $('body').removeClass('loading');

        }

      });

    }); 
```

并尝试将其移动到 js 窗口，但代码无法正常工作。

如何在 html 窗口上留下干净的代码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:06:02.733

1.  在 HTML 窗格中，您只能保留 div 内的内容（您可以安全地删除`DOCTYPE`, `<html>`,`<body>`标记）
2.  将您的 jQuery 代码放在 JS 窗口`<script>`中（不需要标记）。
3.  将“选择框架”部分左侧的下拉选择器选项更改为`onDomReady`（而不是`onLoad`）

# google-apps-script - 文件夹上的 typeof 运算符返回错误

> ID：11609275
> 
> 赞同：0
> 
> 时间：2012-07-23T08:55:07.297
> 
> 标签：google-apps-script

在*谷歌应用程序脚本*函数中，我有一个`Folder`参数。所以，这个说法

```
Logger.log(typeof folder); 
```

未提供参数时记录“未定义”，这是正确的。但是当提供一个文件夹时，我得到这个错误：

> $Proxy686 类型的 JavaScript 值无效。（第 15 行）

无法诊断原因。需要一些帮助。谢谢。

桑杰

*更新*：这是重现问题的代码：

```
function typeOfTest() {

  var folders = DocsList.getAllFolders();
  for (var i = 0; i < folders.length; i++)
    Logger.log(typeof folders[i]);

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:09:05.337

实际上。我有同样的行为。我不知道这是一个错误还是一个功能。一种可能的解决方法是使用文件夹的`toString()`功能。就像是

```
function typeOfTest() {

  var folders = DocsList.getAllFolders();
  for (var i = 0; i < folders.length; i++)
    Logger.log(folders[i].toString());

}; 
```

# c# - 如何正确地将列表绑定到 WPF DataGrid

> ID：11609277
> 
> 赞同：0
> 
> 时间：2012-07-23T08:55:14.207
> 
> 标签：c#, .net, wpf, xaml, datagrid

我正在尝试使用 ItemSource 将列表绑定到数据网格：

xml.cs

```
<UserControl x:Class="DDCUI.CommDiagnosisWPFCtrl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" Height="800" Width="300">
    <DockPanel>
        <DataGrid DockPanel.Dock="Top" Height="300" AutoGenerateColumns="True" Name="DGComm" CanUserResizeColumns="True" IsReadOnly="True" ItemsSource="{Binding Source=dataGridRows}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="No." Binding="{Binding Number}" Width="0.1*"/>
                <DataGridTextColumn Header="Time" Binding="{Binding Time}" Width="0.1*" />
                <DataGridTextColumn Header="Protocol" Binding="{Binding Protocol}" Width="0.15*" />
                <DataGridTextColumn Header="Source" Binding="{Binding Source}" Width="0.15*" />
                <DataGridTextColumn Header="Destination" Binding="{Binding Destination}" Width="0.15*" />
                <DataGridTextColumn Header="Data" Binding="{Binding Data}" Width="0.5*" />
            </DataGrid.Columns>
        </DataGrid>
        <RichTextBox DockPanel.Dock="Bottom" Height="150" Name="RtbHexCode"/>
        <TreeView DockPanel.Dock="Bottom" Height="200" Name="TreeViewDecode"/>

    </DockPanel>
</UserControl> 
```

代码：

```
public class CommDGDataSource
{
    public string Number { get; set; }
    public string Time { get; set; }
    public string Protocol { get; set; }
    public string Source { get; set; }
    public string Destination { get; set; }
    public string Data { get; set; }
}

private List<object> dataGridRows = new List<object>();

private void DGAddRow(string name, FunctionType ft)
{
    CommDGDataSource ds = new CommDGDataSource();
    ds.Protocol = name;
    ds.Source = "";
    ds.Destination = "";
    ds.Number = rowCount.ToString();
    ds.Data = "";
    ds.Time = "";
    dataGridRows.Add(ds);
} 
```

调用 DGAddRow 时，DataGrid 不会更新其值。

我在这里做错了什么？任何帮助，将不胜感激。

此外，XAML 甚至在填充数据之前预先生成空行。我希望能够只显示用项目填充的行（并将新行添加到最后一个填充行的底部）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T09:07:25.993

使用 ObservableCollection<> 而不是 List<> 并使 dataGridRows 公开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:02:37.173

好的，让我惊讶的**第一**件事`dataGridRows`是私有领域。如果我没记错的话，您不能绑定到私有字段，最好将其设为公共财产。（如果我错了，请纠正我）。

困扰我的**第二**件事是，`AutoGenerateColumns="True"`不确定何时网格`AutoGenerateColumns`是如何工作的，`True`并且列是明确指定的。尝试设置`AutoGenerateColumns="False"`。

第三**个**：正如@Rover 已经说过的，尝试将类型设置`datagridRows`为 `ObservableCollection<CommGDDataSource>`

# c# - 如何在 C# 的许多页面中获取会话变量？

> ID：11609281
> 
> 赞同：1
> 
> 时间：2012-07-23T08:55:42.163
> 
> 标签：c#, asp.net, session

我有一个名为 username 的字段作为会话变量。我添加了一个继承基页的类。现在我希望代码在用户移动的所有页面中获取会话变量。

请帮我写代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:09:28.777

您应该能够通过以下方式访问所有页面的 Session 变量：

```
 var username = Session["Username"].ToString(); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:07:49.160

您可以使用带有索引的 Session 对象访问当前会话变量，例如

```
var myvalue = Session["mysessionvariable"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:09:22.780

用于`session["username"]`获取值。然后根据您的需要使用此值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:13:57.317

您可以在基类（继承自 Page 类）中添加一个属性，该属性将封装 Session 变量并在您创建的每个页面中继承该基类

```
public string UserNameInSession 
{
    get 
           { 
              return HttpContextCurrent["UserNameSessionKey"].ToString();
           }
    set 
           { 
              HttpContextCurrent["UserNameSessionKey"] = value; 
           }
} 
```

然后您可以使用此属性来设置或获取来自/到会话的用户名，例如

```
string UserName = UserNameInSession; //Get it
UserNameInSession = string.Empty();//set it 
```

# javascript - 全局变量和 if 语句比较 this

> ID：11609282
> 
> 赞同：0
> 
> 时间：2012-07-23T08:55:45.037
> 
> 标签：javascript, variables, if-statement, this, global

我试图通过一些 if 语句运行，在 if 语句中更改全局变量“var1”，并在另一个 mouseup 事件时比较该值并根据 var1 的值继续。

当我逐步执行代码并且 var1 等于 $this 时，if 语句被传递，就好像不是真的一样。比较可能有什么问题，为什么即使它是真的也会被忽略。

```
var var1 = null;
var var2 = null;

$('.button').on(mouseup, function(evt) {

if (var1 == null) {

    Do Something...
    var1 = $(this);
    return;
}

if (var1 == $(this) {

    Do Something...
    var1 = $(this);
    return;
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:07:51.533

每次调用 $(this) 都会创建一个新的 jQuery 对象。这就是他们不匹配的原因。

例如： `$(document) === $(document) ---> false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:18:07.173

当你调用 $(this) 时，它会调用 jQuery 来创建一个新的 jquery 对象。在内部，jQuery 对象是对 DOM 对象的引用数组。尽管两个 jQuery 对象可能在内部包含相同的引用，但它们是不同的对象，因此不是 ==。

前任：

```
<button id="theId">test</button>

$("#theId").click(function(){alert($(this) == $(this))}); will always display false; 
```

# php - 如何在 php 中将 in_array 用于子数组？

> ID：11609283
> 
> 赞同：2
> 
> 时间：2012-07-23T08:55:45.067
> 
> 标签：php, arrays

我需要验证一个值是否在数组中，并且我正在使用 php 函数`in_array()`。`in_array()`我注意到当我发送给函数的数组由子数组组成时它不起作用。无论如何要对子数组进行此验证？为了帮助您理解我的问题，我有以下代码：

```
$userIds = array();
foreach($accounts as $account){
    $accounIds[] = $account->getId();
    $userIds[] = AccountUserBeanHome::findAllIdsByAccountId($account->getId());
}
$userId = 225;
if (in_array($userId, $userIds, true)) {
    do action...
} 
```

问题是数组 $userIds 可能是这样的：

```
Array
(
[0] => Array
    (
        [0] => 225
        [1] => 226
        [2] => 227
        [3] => 228
        [4] => 229
        [5] => 230
        [6] => 340
        [7] => 355
    )

[1] => Array
    (
        [0] => 313
        [1] => 314
        [2] => 315
        [3] => 316
        [4] => 318
        [5] => 319
    )

[2] => Array
    (
        [0] => 298
        [1] => 301
        [2] => 302
        [3] => 338
    )

) 
```

我注意到`in_array()`检查子数组不起作用，所以我希望你能帮助做这个验证......也许是一种让所有子数组元素成为主数组的所有元素的方法......好吧..我希望你能帮我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-23T08:59:39.540

你需要的是一个递归的 in_array。幸运的是，很多人已经做到了。

This one is directly from the PHP manual comments section: [http://www.php.net/manual/en/function.in-array.php#84602](http://www.php.net/manual/en/function.in-array.php#84602)

```
<?php 
function in_array_recursive($needle, $haystack) { 
    $it = new RecursiveIteratorIterator(new RecursiveArrayIterator($haystack)); 
    foreach($it AS $element) { 
        if($element == $needle) { 
            return true; 
        } 
    } 
    return false; 
} 
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:01:04.577

```
$iterator = new RecursiveIteratorIterator(
                new RecursiveArrayIterator($userIds), 
                RecursiveIteratorIterator::SELF_FIRST);

foreach($iterator as $key => $val) {
    if($val == $userId) {
        // do something
    }
} 
```

Documentation about [recursiveiteratoriterator](http://php.net/manual/en/class.recursiveiteratoriterator.php).

Kudo's to [gordon](https://stackoverflow.com/a/2416306/657496)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:02:34.670

You can flatten `$userIds` array using `array_merge()`:

```
$userIds[] = array();
foreach($accounts as $account){
    $accounIds[] = $account->getId();
    $userIds = array_merge($userIds, AccountUserBeanHome::findAllIdsByAccountId($account->getId()));
} 
```

Then call `in_array()` to check your id.

# jquery - jQuery：砌体+可排序的重新排序网格

> ID：11609284
> 
> 赞同：1
> 
> 时间：2012-07-23T08:55:52.550
> 
> 标签：jquery, jquery-masonry, jquery-ui-sortable

我正在使用`Masonry`+ jQuery`Sortable`重新设计一个 3x3 网格，您可以在下面看到。

![在此处输入图像描述](../Images/a86e08d6712d293bb1810aee0d789cfa.png)

```
 $('#container').masonry({
        itemSelector: '.element',
        isResizable: true,
        columnWidth: 100
    }) 
```

用户可以对`div`s (1-4) 进行排序并给它们一个新的顺序。将`div`1 拖到右上角的位置将重新排列网格，但与预期不同。重新排序后，它将如下所示：

![在此处输入图像描述](../Images/2e5a1fad3f5bb39f8ba97d08a6d8a888.png)

我想以这种方式添加事件停止/开始/更改以排序...

```
change: function(event, ui) {
               ui.item.parent().masonry('reload');
        } 
```

...将以`2`, `3`,`4`在顶部和`div`1 以下的方式重新排列网格。但它看起来像上面的屏幕截图。

有人可以帮我做这种预期的行为吗？我使用 Masonry 错了吗？

* * *

**编辑：** 在`reload`DOM 返回2、3、1、4 之后`div`。我预计是 2、3、4、1。

* * *

TIA frgtv10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:08:25.057

我认为，我不完全确定，砌体订单元素基于 DOM 元素的顺序。当用户拖动一个元素时，你会重新排序 DOM 吗？如果没有，当砌体重新加载时，顺序仍然会与之前的顺序相反。

# csv - .csv 条目应该以分隔符结尾吗？

> ID：11609285
> 
> 赞同：1
> 
> 时间：2012-07-23T08:56:04.167
> 
> 标签：csv

是否应该以分隔符结束每个条目（在本例中为“，”）：

```
axis1,axis2,axis3,
    1,    2,    3,
    2,    3,    4, 
```

或不：

```
axis1,axis2,axis3
    1,    2,    3
    2,    3,    4 
```

在 .csv 中还是只是不同的方言？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T08:58:56.723

[根据 RFC4180](https://www.rfc-editor.org/rfc/rfc4180)并非如此，其中 csv 记录（行）定义为

```
record = field *(COMMA field) 
```

这并不意味着您永远不会遇到带有逗号尾随的表单，因为 csv 因其变化和偏差而臭名昭著，有时甚至是草率的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T08:58:44.393

由你决定。**通常我不**希望。为什么 ？因为当您`split()`对

```
A,B,C,D 
```

我希望最终有 4 个元素 (AD)。如果我在以下情况下做同样的事情：

```
A,B,C,D, 
```

由于最后的逗号，我通常希望大多数实现/语言给我一个长度为零的最终元素。然后你必须处理这个（忽略它，把它扔掉等等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T08:58:02.957

不，行尾不应有列分隔符。如果有，这意味着还有另一个空列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T08:58:06.090

第二个是要走的路。行尾没有分隔符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T08:58:15.830

第二个选项是最好的，否则您的解析将假定每行末尾都有一条空白记录。分隔符只能在记录之间“分隔”它们。

# sql - SQL 心理障碍 - 检查一个时间段是否与另一个时间段重叠

> ID：11609290
> 
> 赞同：2
> 
> 时间：2012-07-23T08:56:35.487
> 
> 标签：sql, tsql

我有四个 unix 时间。两个是“今天”的开始和结束（以那一天为准）——即 00:00:00 和 23:59:59——另外两个是用户选择的时间。

我需要的是一个（TSQL 友好的）查询来检查“今天”时间之间的时间段是否与用户的时间重叠。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T10:05:34.547

我在一个 txt 文档中有这个要记住（日期阅读障碍）：

**相交：**

```
Date Range 1   |         |>----------------------<|
Date Range 2   |                 |>------------------------<|

where Range1Start <= Range2End and Range1End >= Range2Start 
```

**范围 2 中的范围 1：**

```
Date Range 1   |                   |>-------------<|
Date Range 2   |                 |>------------------------<|

where Range1Start >= Range2Start and Range1End <= Range2End 
```

**范围 1 中的范围 2：**

```
Date Range 1   |         |>----------------------<|
Date Range 2   |                 |>-------------<|

where Range2Start >= Range1Start and Range2End <= Range1End 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:38:10.347

```
where UserStart <= TodayEnd and
      UserEnd >= TodayStart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-07T16:48:01.817

我知道这篇文章很旧，但我认为接受的答案是不完整的。大多数情况下至少还有一个相交案例并修改上述内容。

**相交（固定）**

```
Date Range 1   |         |>----------------------<|
Date Range 2   |                 |>------------------------<|
WHERE Range1Start <= Range2Start AND Range1End <= Range2End AND Range1End>=Range2Start 
```

像这样进行修复可以避免将 Range 1 中的 Range 2 检测为交叉点（这是已接受解决方案中的查询结果）

接下来的两个还可以，但是没有很好的说明

**范围 2 中的范围 1**

```
Date Range 1   |                      |>-------------<|
Date Range 2   |                 |>------------------------<|

Date Range 1   |                 |>------------------------<|
Date Range 2   |                 |>------------------------<|

WHERE Range1Start >= Range2Start AND Range1End <= Range2End 
```

**范围 1 中的范围 2：**

```
Date Range 1   |         |>------------------------<|
Date Range 2   |               |>-------------<|

Date Range 1   |         |>------------------------<|
Date Range 2   |         |>------------------------<|

WHERE Range2Start >= Range1Start AND Range2End <= Range1End 
```

最后是第二个相交

**相交（右）**

```
Date Range 1   |                |>----------------------<|
Date Range 2   |       |>------------------------<|
WHERE Range2Start <= Range1Start AND Range2End <= Range1End AND Range1Start <=Range2End 
```

根据您的需要，我建议不要使用大于 (>=) 和小于 (<=) '因为您还认为这些组中包含相等的句点，但取决于您

**等于范围**

```
Date Range 1   |         |>------------------------<|
Date Range 2   |         |>------------------------<|

WHERE Range1Start = Range2Start AND Range1End = Range2End 
```

# jquery - jquery在一个页面中提交多个表单

> ID：11609295
> 
> 赞同：2
> 
> 时间：2012-07-23T08:56:58.820
> 
> 标签：jquery

我从这里搜索并找到了不错的代码。[使用 jQuery 提交表单](https://stackoverflow.com/questions/1200266/submit-a-form-using-jquery)

```
 <input type='button' value='Submit form' onClick='submitDetailsForm()' />
<script language ="javascript" type = "text/javascript" >
    function submitDetailsForm()
    {
       $("#formId").submit();
    }
</script> 
```

但是你能告诉我如何在一个页面中处理多个表单吗？

```
<form id="myForm1" action="comment.php" method="post"></form>
<form id="myForm2" action="comment.php" method="post"></form>
<form id="myForm3" action="comment.php" method="post"></form>
<form id="myForm4" action="comment.php" method="post"></form> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T09:06:37.583

我建议在您希望像这样提交的每个输入按钮上放置一个类。

例如，您可以有一些这样的表格：

```
<form id="form1">
  <!--Form elements-->
  <input class="submitButton" type="button" value="submit" />
</form>
<form id="form2">
  <!--Form elements-->
  <input class="submitButton" type="button" value="submit" />
</form> 
```

然后，您可以使用 jQuery 像这样提交它们：

```
$(".submitButton").click(function() {

  //Select the parent form and submit
  $(this).parent("form").submit();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:06:22.640

如果没有 Ajax，就没有办法做到这一点。当您提交表单时，您实际上是在发出 http 请求，因此将加载一个全新的 html 页面。

避免这种情况的唯一方法是通过 Ajax 发送表单，这样您就可以控制请求的响应（因此没有什么能阻止您通过这种方式发送多个表单）。

[您可以使用这个 jQuery 插件](http://jquery.malsup.com/form/)来实现这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-13T06:46:13.177

```
/* get all form and loop foreach */
$( "form" ).each( function() {

    /* addEventListener onsubmit each form */
    $( this ).bind( "submit", function(event) {

        /* return false */
        event.preventDefault();

        /* display each props of forms */
        console.log( event.target ); // object formHTML
        console.log( "form id: " + event.target.id );
        console.log( "form action: " + event.target.action );
        console.log( "form method: " + event.target.method );

    } );

});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<form id="myForm1" action="comment1.php" method="post">
    <input type="submit" value="Submit Form1" />
</form>
<form id="myForm2" action="comment2.php" method="post">
    <input type="submit" value="Submit Form2" />
</form>
<form id="myForm3" action="comment3.php" method="post">
    <input type="submit" value="Submit Form3" />  
</form>
<form id="myForm4" action="comment4.php" method="post">
    <input type="submit" value="Submit Form4" />  
</form>
```

[密码笔](https://codepen.io/antelove/pen/bGNezQd)

[复制（演示）](https://jquery-form-multi-submit-preventdefault--antelove19.repl.co/)

# sql-server-2008 - 我怎样才能加入这两个表？

> ID：11609296
> 
> 赞同：2
> 
> 时间：2012-07-23T08:57:10.663
> 
> 标签：sql-server-2008

我有两张桌子。例如第一个表是父表，即包含`deptno`（主键）和`deptname`的部门，另一个表是子表，即包含`empid`，`empname`和（外键）`sal`的员工。`deptno`我想加入这两个表来获得输出，比如`deptname`在那个特定部门工作的员工数量。我尝试使用联接、视图、游标、子查询、组子句等进行查询。我可以得到一半查询 using`group by`子句的解决方案，以找出特定部门下的员工人数，但无法计算出另一半。

部

```
deptno    deptname
101       sales
102       hr
103       finance 
```

员工

```
empid  empname   sal    deptno
  1     john    1500$    101
  2     kevin   1000$    101
  3     james   1200$    101
  4     ford    700$     102
  5     david   855$     102
  6     george  955$     103 
```

我想使用 SQL 查询显示下表。

```
deptname    no.of employees
sales            3
hr               2
finance          1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:06:29.357

希望这可以帮助

```
Select deptname, count(1) no_employees
From table1 t1
Join table2 t2 on t1.deptno = t2.deptno
Group By deptname
Order By Count(1) desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:09:17.207

**SELECT t1.deptname AS deptname, COUNT(1) AS "no. of employees" FROM table1 t1 JOIN table2 t2 ON t2.deptno = t1.deptno GROUP BY t1.deptno;**

您可以通过执行以下操作重新创建它：

```
mysql> 
mysql> CREATE TABLE table1 (deptno INT NOT NULL, deptname VARCHAR(24) NOT NULL, PRIMARY KEY (deptno));
Query OK, 0 rows affected (0.01 sec)

mysql> CREATE TABLE table2 (empid INT NOT NULL, empname VARCHAR(48) NOT NULL, sal VARCHAR(16), deptno INT);
Query OK, 0 rows affected (0.01 sec)

mysql> INSERT INTO table1 VALUES (101, "sales"), (102, "hr"), (103, "finance");
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> INSERT INTO table2 VALUES (1, "John", "1500$", 101);
Query OK, 1 row affected (0.01 sec)

mysql> INSERT INTO table2 VALUES (2, "Kevin", "1200$", 101), (3, "James", "1000$", 101);
Query OK, 2 rows affected (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> INSERT INTO table2 VALUES (4, "Ford", "700$", 102), (5, "David", "855$", 102), (6, "George", "955$", 103);
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> SELECT t1.deptname AS deptname, COUNT(1) AS "no. of employees" FROM table1 t1 JOIN table2 t2 ON t2.deptno = t1.deptno GROUP BY t1.deptno;
+----------+------------------+
| deptname | no. of employees |
+----------+------------------+
| sales    |                3 |
| hr       |                2 |
| finance  |                1 |
+----------+------------------+
3 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:06:44.890

尝试这个

```
select d.deptname,COUNT(*) [no.of employees]
from employee E join department D
on E.deptno=D.deptno
group by d.deptname
order by COUNT(*) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:01:48.227

试试下面的代码。

```
select COUNT(*) from tblEmp E inner join tblDept d on d.Deptid=l.Deptid 
```

希望这能解决您的问题。

# regex - 在 bash 和正则表达式中排序数组

> ID：11609299
> 
> 赞同：0
> 
> 时间：2012-07-23T08:57:17.130
> 
> 标签：regex, linux, bash, shell, sed

我有一个数组，其中包含 CPU 核心编号和每个核心的编号。数组是总数。

我该如何排序

```
totals=( CPU0=12345 CPU1=23456 CPU3=01234) 
```

根据数字并返回 cpu 编号的排序版本，例如 (3,0,1) 表示它已排序，核心 3 是最小值，核心 1 是最大值，在 bash 中？然后将 (3,0,1) 分配给数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:02:47.093

试试这个进行排序：

```
echo ${totals[*]} | tr ' ' '\n' | sort -n -t= -k2 
```

要仅将 CPU 编号存储在新数组中，请尝试：

```
sorted_cpu_numbers=( $(echo ${totals[*]} | tr ' ' '\n' | sort -n -t= -k2 | awk -F= '{print substr($1, 4, length($1))}') ) 
```

# regex - 使用 sed 和正则表达式从字符串中获取数字

> ID：11609301
> 
> 赞同：0
> 
> 时间：2012-07-23T08:57:23.713
> 
> 标签：regex, sed

我有一个字符串：

```
abc = "2342" 
```

或：任何字符串=“任何数字”

我想要一个返回值 2342 （或任何数字）

我该怎么做（最好使用 SED）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:03:06.747

```
sed 's/^[^=]*= *"\([^"]*\)"$/\1/' 
```

或者

```
sed -E 's/^[^=]*= *"([^"]*)"$/\1/' 
```

假设：

*   任何非“=”都可以出现在“=”的左侧
*   任何字符（不仅仅是数字）都可以出现在 '"'s 之间
*   只有 ' ' 在 '=' 和第一个 '"' 之间
*   第二个 '"' 后没有字符

# c - 将大量常量列表导出到 Lua 状态

> ID：11609305
> 
> 赞同：1
> 
> 时间：2012-07-23T08:57:34.980
> 
> 标签：c, lua

使用 C(99)，我有一个从 Lua 脚本加载 Lua 表的游戏。

技术方面没有问题，一切都按预期工作。但是，C 核心使用许多常量来定义项目类型等。该脚本实际上提供了要加载的武器数据，为了清楚起见，应该使用相同的常量名称/值。在 C 中，常量是诸如 #define ITEM_TYPE_EDIBLE 2 之类的东西。

所以，我的问题是：如何轻松地将一个长的（约 300 个定义）整数列表从 C 导出到 Lua？应该不止一个脚本使用该列表，虽然内存大小并不是一个真正的问题，但我主要是为了方便。

我已经想到了这些可能的解决方案，但不确定从长远来看哪一个会更好：

*   A) 在处理所需脚本的 Lua 状态下手动创建嵌套表。
*   B) 手动创建一个包含常量的 lua 脚本，并将其导入到每个使用它们的脚本中。

那么，您认为最方便的方法是什么？如中，方便更新和在 Lua 方面使用，因此可以轻松编写 mods。项目加载都是在启动时完成的，所以如果它不是一个超快速的方法也没关系（例如，它不会滞后动作，只是启动时间）

哦，我正在使用 Lua 5.1，但不反对使用 5.2，如果它使我的任务变得更容易的话。如果可能，也不反对以编程方式更新列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:29:42.153

我会编写一个脚本来生成一个 C 标头，其中所有整数常量都设置为`enum`s。另一个 C 文件，它具有改变 Lua 状态的函数，方法是添加所有这些常量的表，或者将它们单独添加到全局范围内作为预定义的数字变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:22:51.717

> *   A) 在处理所需脚本的 Lua 状态下手动创建嵌套表。
> *   B) 手动创建一个包含常量的 lua 脚本，并将其导入到每个使用它们的脚本中。

你忘了：

*   C）手动创建一个包含常量的 Lua 脚本，然后当我创建我的 lua_State 时，立即导入它。这样，每个使用它们的脚本都可以假定它已被导入。

实际上，我通常会将这个脚本放在可执行文件本身或可执行文件加载的特殊文件中。

# php - Magento 按产品属性值计数对集合进行排序

> ID：11609306
> 
> 赞同：0
> 
> 时间：2012-07-23T08:57:50.930
> 
> 标签：php, zend-framework, magento, collections

我目前正在开发一个使用分层导航和大量自定义属性进行导航的 Magento 网站。我要做的是在列表中添加一个新的“排序依据”选项（默认情况下为某些类别选择），这应该有助于提高为大量客户展示的产品的相关性。

该网站销售针织纱线。

这是客户希望它的工作方式 -

*   我们设置了一个名为“colour_name”的自定义属性，其值包括红色、绿色、黄色、紫色等。

*   由于产品的性质，有时这种分类可能有些模糊，因此许多产品都列在多个类别下，例如，蓝绿色纱线将同时选择“蓝色”和“绿色”选项。

*   如果客户从分层导航中选择“蓝色”，我们希望首先列出仅选择蓝色选项的产品，然后是具有 2 种颜色的产品，然后是 3 种颜色，以此类推。

我没有大量的集合经验，但是我熟悉基本的排序和过滤。我们需要使用的集合位于 app/design/frontend/default/[template_name]/template/catalog/product/list.phtml 的以下行：

```
<?php $_productCollection=$this->getLoadedProductCollection() ?> 
```

我不确定是在 list.phtml 文件中执行此排序，还是在类别/排序的帮助程序中进一步执行此排序。

不幸的是，该网站尚未上线，因此我无法向您展示示例，希望描述已经足够，但如果需要，请随时要求澄清任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:36:16.757

您可以通过`addAttributeToFilter`(`addFieldToFilter`对于 productCollection 以外的集合) 和`addAttributeToSort`.

默认情况下，Magento 在底层 SQL 中使用“ORDER BY”进行排序，因此您应该使用一种方法，该方法使用自定义模块对加载的集合进行自定义排序。

如果您想尝试一下，[这里](https://stackoverflow.com/a/5724449/498226)有一个非常可能的答案。

# javascript - 在整个网站上保持相同的 URL

> ID：11609312
> 
> 赞同：0
> 
> 时间：2012-07-23T08:58:10.470
> 
> 标签：javascript, html, .htaccess

我想在我的网站上使用相同的 URL。无论用户在网页上单击什么，重定向的链接都不应显示在地址栏中，以避免用户为该页面添加书签。

不管它是什么，用户必须来自主页并且应该点击链接以进一步进行。

有什么帮助？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:04:32.080

有几个选择-

1.  用 flash / silverlight 或类似的东西建立您的网站。
2.  将您的所有网站放在一个 IFrame 中，然后浏览它。
3.  放置一个 http 端点并将所有数据放在 http 请求数据中（带有帖子正文或会话或 cookie）。

对于 2 和 3 用户可能会嗅探流量并跳转到特定页面。

但你能解释一下你为什么需要它吗？我不认为这真的是你想要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:10:45.303

除非您使用 IFrame，否则您无法仅使用 HTML 来做到这一点，但您不会走得太远。

“单一 URL”网站使用 javascript XMLHttpRequest/Ajax 调用或 Flash、Siverlight 等框架...

如果您必须从现有的 HTML 页面集合重新启动，所有 Javascript 框架（Dojo、jQuery、Ext Js 等）都提供了将驻留在多个文件中的 HTML 注入当前页面的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:35:13.733

完全可能！如前所述，这可以使用 Silverlight/flash/.. 以及 HTML 来实现。

你可以看看 MVC4 SPA (single-page-application) MVC4 提供了很多方便的工具。

我个人是用 Java 做的。

主要思想是..您使用javascript处理所有逻辑。因此，当用户单击链接时，您使用 AJAX 获取 html 并将当前 html 与更新的 html 交换。

请注意（就像闪光灯和银光一样）这是一个 SEO 杀手...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:07:40.850

您的想法可能会导致谷歌机器人（和其他人）无法正确索引您的网站......

无论如何，您只需将所有 GET 请求（链接）替换为 POST 请求（表单）。

例子 ：

```
<a href="?do=foo&var=bar">click here</a> 
```

应该替换为

```
<form method="post">
    <input type="hidden" name="do" value="foo" />
    <input type="hidden" name="var" value="bar" />
    <input type="submit" name="click" value="click here" />
</form> 
```

# android - AddThisSdk 的 Twitter 问题

> ID：11609313
> 
> 赞同：2
> 
> 时间：2012-07-23T08:58:13.283
> 
> 标签：android, addthis

我正在尝试在 android 中使用 AddThisSdk 与 facebook 和 twitter 分享。到目前为止，facebook 工作正常。但是使用 twitter，我遇到了一些问题。当我在 twitter 对话中单击“授权应用程序”按钮时，我得到一个白色的空白页并保留在那里。我添加了以下 jar 文件 - addthis0.0.7.jar、signpost-commonshttp4-1.2.1.1.jar、signpost-core-1.2.1.1.jar。并且还配置了库如下

```
Config.configObject().setShouldUseTwitterOAuth(true);
Config.configObject().setTwitterConsumerKey("XXXXXXXXX");
Config.configObject().setTwitterConsumerSecret(
                "XXXXXXXXXX");
Config.configObject().setTwitterCallbackUrl(
                "https://addthis.com/mobilesdk/twittertesting");
Config.configObject().setTwitPicApiKey(
                "XXXXXXXXX"); 
```

在这个问题上的任何帮助或建议都是非常可观的，谢谢提前

# java - 在 Spring 表达式语言中处理空值

> ID：11609314
> 
> 赞同：13
> 
> 时间：2012-07-23T08:58:14.057
> 
> 标签：java, spring, spring-el

我有以下使用spring表达式语言的代码：

```
StandardEvaluationContext stdContext = new StandardEvaluationContext();
stdContext.setVariable("emp", filterInputData); 
ExpressionParser parser = new SpelExpressionParser();     
parser.parseExpression("#emp.?[name.toLowerCase().contains('Hari')]").getValue(stdContext); 
```

其中*emp*是 bean 的名称。这里名称可以为空，并且在调用`name.toLowerCase()`时我得到一个空指针异常。在这种情况下如何处理空值？我只需要调用`toLowercase()`非空值。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-23T12:18:06.190

```
"#emp.name != null ? #emp.name.toLowerCase().contains('hari') : null" 
```

或者

```
"#emp.name != null ? #emp.name.toLowerCase().contains('hari') : false" 
```

取决于您在缺少名称时想要返回的内容。

实际上，这个简短的形式也有效......

```
"#emp.name != null ? toLowerCase().contains('hari') : null" 
```

顺便说一句，在你原来的问题中......

```
name.toLowerCase().contains('Hari') 
```

永远不会返回真（H 是大写）。

或者，猫王是你的朋友……

```
Expression expression = new SpelExpressionParser().parseExpression("#emp.name?:'no name found'");
value = expression.getValue(context, String.class).toLowerCase(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T11:47:47.390

你能把这个bean自动连接到你的班级吗？

就像是：

```
public class YourClass{ 
    @Autowire
    private Employee emp

    public boolean func(){
        if (emp.getName() != null){
            return emp.getName().toLowerCase().contains('Hari');
        }else{
            return false;
        }
    }
} 
```

# php - 调用未定义的函数 imageconvolution()

> ID：11609316
> 
> 赞同：1
> 
> 时间：2012-07-23T08:58:16.810
> 
> 标签：php, image, thumbnails

我使用生成缩略图的 php 脚本。在我的本地服务器上一切正常，但是当我提交它时，远程服务器会抛出“调用未定义的函数 imageconvolution()”。我阅读了一些关于 GD 库的内容，发现它在两个服务器（本地和远程）上都启用了。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:01:44.310

`Imageconvolution()`在 5.1.0 中引入。您是否检查过服务器上运行的版本至少是那个版本？

编辑：啊，Ubunutu 是吗？那个老栗子。

由于安全原因，Ubuntu 不支持 PHPs GD 进行编译。它使用通用 GD。[这里](http://forum.junowebdesign.com/share-php-script/25457-simple-replication-imageconvolution-function.html)有一个功能可以复制该功能，但它显然没有那么快。

如果您对服务器具有适当的访问权限，则可以将适当的 GD 支持编译到其中。说明： http: [//www.howtoforge.com/recompiling-php5-with-bundled-support-for-gd-on-ubuntu](http://www.howtoforge.com/recompiling-php5-with-bundled-support-for-gd-on-ubuntu)

# sql-server - 使用 sql DataTable 中存在的整数 ID 填充列表

> ID：11609319
> 
> 赞同：0
> 
> 时间：2012-07-23T08:58:26.470
> 
> 标签：sql-server, list, c#-4.0, datatable

我有一个整数列表：

```
 List<int> AllowedLinks = new List<int>(); 
```

我有一个包含 integerIds 的数据表 .. 我试图通过迭代将它们放入此列表，但它给出错误：输入字符串格式不正确..

//GetDataTable是一个返回数据表的函数

我的代码：

```
 DataObj = new DAL();
        DataTable dt
    dt = DataObj.GetDataTable("GetAllowedLinksForUserRole",1);
    foreach (DataRow myRow in dt.Rows)
    {
        AllowedLinks.Add(Convert.ToInt32((myRow).ToString()));
    } 
```

我不希望我的列表是数据行类型，因为我将需要整数以供以后操作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:08:02.250

您应该索引您的 ID 在数据行中所在的列
在我对代码的修订中，我使用 var x 作为占位符。
您需要在数据表中设置包含整数值的列的索引。
更好的是，你也可以使用它的名字

```
DataObj = new DAL(); 
DataTable dt 
int x = 0; // <= here 0 is the index of the column with the IDs 
int name = "ID"; // <= here ID is the name of the column with the IDs
dt = DataObj.GetDataTable("GetAllowedLinksForUserRole",1); 
foreach (DataRow myRow in dt.Rows) 
{ 
    AllowedLinks.Add(Convert.ToInt32(myRow[x])); 
    // This is to use column name
    // AllowedLinks.Add(Convert.ToInt32(myRow[name])); 
} 
```

注意：上面的代码假定您的整数列不包含 NULL 值。
如果不是这种情况，则需要在将列值转换为整数之前进行测试

```
 AllowedLinks.Add(Convert.ToInt32(myRow[x] == DBNull.Value ? 0 : myRow[x])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:49:01.750

签入快速表。必须有与行 myRow 关联的属性/索引。您不能像这样直接访问数据行`Convert.ToInt32((myRow).ToString())`

相反，您需要通过

```
Convert.ToInt32((myRow.propertyname).ToString()) 
```

或者`Convert.ToInt32((myRow[incrementedindex]).ToString())`

# javascript - 如何将参数传递给jquery函数

> ID：11609324
> 
> 赞同：-4
> 
> 时间：2012-07-23T08:58:43.610
> 
> 标签：javascript, jquery

我有这个功能：

```
$(function () {
$('#zucker').slider({
    some code        
    });
}); 
```

我称之为

```
 <div id="zucker"></div> 
```

我必须将参数传递给我的函数有什么可能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:02:39.397

```
$(function() {
    $('#zucker').slider({
        myFirstParameterToSlider: "myFirstValue",
        mySecondParameterToSlider: "mySecondValue"
    });
}); 
```

要查看所有可能的参数，请查看[此处](http://jqueryui.com/demos/slider/#options)

# windows - 有没有办法确定 CloseHandle() 是否是命名对象的最后一个？

> ID：11609325
> 
> 赞同：4
> 
> 时间：2012-07-23T08:58:45.460
> 
> 标签：windows, resources

在 Windows 中创建命名对象时，可以通过调用`GetLastError()`并检查`ERROR_ALREADY_EXISTS`.

有没有办法提出双重问题：我`CloseHandle()`是最后一个关闭（句柄）命名资源的人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:06:53.860

不，[内核句柄不是引用计数的](http://blogs.msdn.com/b/oldnewthing/archive/2007/08/29/4620336.aspx)。当您调用`CloseHandle`时，将关闭句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:52:34.910

直接说不行。

~~但是，您可以通过在 之后调用[GetHandleInformation来](http://msdn.microsoft.com/en-us/library/ms724329%28VS.85%29.aspx)*间接*获取它。如果句柄无效，则函数将失败并将错误号设置为。`CloseHandle``ERROR_INVALID_HANDLE`~~

不，也不是间接地，再次考虑它。这只会告诉您您的句柄无效......自从您关闭它以来您就已经知道了。

# java - 如何通过 Javascript 在 Phonegap 中调用本机函数？

> ID：11609326
> 
> 赞同：1
> 
> 时间：2012-07-23T08:58:52.350
> 
> 标签：java, javascript, android, cordova

我正在使用 PhoneGap 为 Android 开发一个应用程序。我已经用Java实现了一些功能。如何使用 Javascript 调用这些 Java 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T10:09:12.537

有一个类似的问题[https://stackoverflow.com/a/8733773/905565](https://stackoverflow.com/a/8733773/905565)

编写[自己的插件，或者通过 WebView 的](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)[addJavascriptInterface](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)方法提供 JavaScript 接口

在您的 phonegap 活动中访问 webview`this.webView`

# c# - 在代码隐藏中获取文本区域

> ID：11609330
> 
> 赞同：2
> 
> 时间：2012-07-23T08:59:09.830
> 
> 标签：c#, asp.net, textarea

我正在尝试使用以下代码从后面的代码中获取 textarea 值。

```
 HtmlTextArea bodytextarea = new HtmlTextArea();
    bodytextarea = (HtmlTextArea)(this.FindControl("codearea"));
    string txtbod = bodytextarea.Value; 
```

当我调试它时，我得到一个空引用异常，说 bodytextarea 为空。我不得不提到我的 textarea 不是 runat="server" 并且我不想在服务器端制作它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T09:01:00.443

你应该添加`runat="server"`到你的`<TextArea id="myTextArea" runat="server" />`

像这样你可以直接使用 textarea 的 ID 在后面的代码中获取值

* * *

如果您不想使用服务器端，那么您必须使用 Jquery 来获取值并`[webmethod]`在您的代码中创建一个方法，以便 Jquery 可以调用该方法传递值

* * *

或者干脆`string data = request["codearea"];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:01:45.560

如果它不是 runat="server" 控件，那么您必须从 http 上下文中获取值。来自 textarea 的值将被视为（最有可能的）POST 或 GET 变量。

另请参阅：[在 C#/ASP.NET 中获取 POST 数据](https://stackoverflow.com/questions/976613/get-post-data-in-c-asp-net)

并[获取 POST 变量](https://stackoverflow.com/questions/2162495/check-post-variable-in-asp-net)

官方 MSDN：http: [//msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.aspx)

# c++ - 如何在无向图中找到遍历最多节点的路径？

> ID：11609331
> 
> 赞同：1
> 
> 时间：2012-07-23T08:59:11.973
> 
> 标签：c++, algorithm, data-structures, graph, graph-algorithm

给定一个无向图和图中的两个任意节点（A 和 B），我如何找到通过最多唯一节点的路径以便在节点 A 和 B 之间导航？

我知道您可以深度搜索它并比较所有长度，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T09:10:29.733

那是一个[NP完全问题](http://en.wikipedia.org/wiki/Longest_path_problem)。你真正能做的就是尝试每一种可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:14:55.087

~~这个问题只有在我们谈论无环图时才有意义，所以我假设你是这个意思。~~

您将不得不暴力尝试所有可能的路径。

要了解原因，请想象一个图形，其中您知道两个节点的最长路径并添加一个节点。如果节点以某种方式连接到它们，您现在必须测试包含新节点的每条路径，包括您已经测试过的路径。

# c# - 如何在 Dot Net 应用程序中保持连续的 Session？

> ID：11609335
> 
> 赞同：0
> 
> 时间：2012-07-23T08:59:25.500
> 
> 标签：c#, asp.net, session-state

我在我的应用程序中遇到一个问题，每当用户搜索任何数据然后让应用程序空闲 15-20 分钟，然后尝试对应用程序执行任何操作时，应用程序就会崩溃。我正在使用简单的 DevEx Grid 来显示该网格的数据和详细信息行和弹出控件。

我认为问题出在会话上，因为我的应用程序无法在这段时间内维护会话，并且由于哪个应用程序崩溃了。

此外，我没有在我的数据应用程序中使用任何会话变量。

我找不到这个错误的真正原因。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:04:21.377

您可以编写客户端 javascript 来对服务器进行 ajax 调用。这将使您的会话保持活跃。

它允许您在服务器上有一个短暂的超时，而对于空闲用户来说仍然有很长的超时。

不过一定要超时，如果您的用户离开一个小时，该页面应该将他注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:08:25.560

您可以将 IIS 中的会话超时设置为非常高的数字或分钟数（例如一整天的 1440）。此设置位于“会话状态”区域。

另一种选择是使用 Opera 作为您的浏览器，并加载一次页面。之后，使用 Opera 的“每隔...重新加载页面”选项每分钟自动重新加载页面。这将永远延长会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:32:04.360

由于您没有在会话中存储任何有用的内容，因此您应该设法重新加载而不会崩溃。为此，您需要在崩溃发生时进行分析并找到防止崩溃的方法。通过使用合理的默认值进行初始化或捕获异常并重新开始。

# checkbox - 无法隐藏 QComboBox 的选择指标

> ID：11609337
> 
> 赞同：3
> 
> 时间：2012-07-23T08:59:33.623
> 
> 标签：checkbox, stylesheet, indicator, qcombobox, qtstylesheets

程序员

当我设置属于**QComboBox**（每个 QSS）的列表视图的背景颜色时，这个 QComboBox 将不再使用内置的 opticel 外观。Instaed 我还必须根据 QSS 样式表指定所有光学设置：

```
QComboBox QListView {
    background-color:white;
    border:1px solid black;
} 
```

显示可选择项的列表视图现在在左侧显示一个复选框。选中此框以查看上次使用时选择的那些项目。

**如何隐藏带有复选框的列，以便它们不可见并且不会占用屏幕上的任何空间？**

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T13:03:18.250

**QSS Workaround 用于 QComboBox 的一个困难的绘制主题**

如果您不使用 QSS 块，则 QComboBox 将使用其 OS-Look-and-Feel 进行绘制。如果您开始指定 QSS 规则，则 QComboBox 的某些或所有子控件开始失去 OS-Look-and-Feel。在最坏的情况下，您现在必须在 QSS 中指定所有属性。

本文的主题是选择指示器，由 QStyleViewItem 类绘制，它是 QT 源代码中 .../src/gui/widgets/qcombobox_p.h 中实现的渲染助手。这个功能似乎不可能被 QProxyStyle 的子类修改，它可以在其他情况下用于解决硬布局问题。

但是，我通过指定一组精心挑选的规则在 QSS 中找到了解决方案：

```
/* Background color of popup-list.*/ 
QComboBox QListView{
    background-color:white;
    border:1px solid gray;
}
/* Needed to complete the rule set. */
QComboBox::item:alternate {
    background: white;
}
/* Color of the selected list item. */
QComboBox::item:selected {
    border: 1px solid transparent;
    background:yellow;
}
/* Indicator will shine through the label text if you don't make it hidden. */
QComboBox::indicator{
    background-color:transparent;
    selection-background-color:transparent;
    color:transparent;
    selection-color:transparent;
} 
```

# python - 即使对于服务器上的单个基于 django 的应用程序，是否也推荐使用 virtualenv？

> ID：11609339
> 
> 赞同：1
> 
> 时间：2012-07-23T08:59:42.940
> 
> 标签：python, django, virtualenv

如果我们只想在 VPS 或某个云实例上托管单个 django 应用程序，那么使用 virtualenv 是否仍然有益？还是使用全局 python 设置会是一种矫枉过正的做法，因为只有一个 django 应用程序说 Project X 将托管在该服务器上？

virtualenv 是否为生产环境中的单个应用程序设置提供了我可能不知道的任何主要好处？例如。django 升级、cron 脚本等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:04:06.527

我建议始终使用 virtualenv，因为它使您的环境更具可重复性——您可以在应用程序的同时对依赖项进行版本控制，您不受系统存储库中 python 包的版本的限制，并且如果您需要复制您的在其他地方的环境中，即使您没有在下面运行完全相同的操作系统，您也可以这样做。

# ios - 带有 Phonegap 的 iOS：在特定文件夹中下载文件

> ID：11609341
> 
> 赞同：0
> 
> 时间：2012-07-23T08:59:47.153
> 
> 标签：ios, cordova, download

我刚开始在 iOS 模拟器上测试我的 Phonegap 应用程序，但我遇到了一些问题：

我做的第一件事是获取**根**路径： `requestFileSystem(LocalFileSystem.PERSISTENT, 0, onSuccess, onError);`

所以我得到这样的东西： Users/christophe/Library/Application Support/iPhone Simulator/5.1/Applications/CODE/Documents 然后我发现我需要在此路径之前添加 file:// 才能使用，`resolveLocalFileSystemURI()`否则文件是未找到。

所以我像这样测试了我的下载功能：download(url, "file://"+ **root** +" **folder** /siteList.xml", callbacks)

但我收到一条错误消息，告诉我文件路径或 URL 错误。所以，我检查了网址：没问题。

问题来自文件路径。我添加的“**文件夹**”阻止了下载。如果我在根文件夹中下载文件： `download(url, "file://"+root+"/siteList.xml", callbacks);.` 它工作。

如何下载到其他文件夹？

我已经在安卓上试过了。不存在这样的问题。

谢谢

# python - Django查询集获取某个图像的所有标签以及图像

> ID：11609343
> 
> 赞同：0
> 
> 时间：2012-07-23T08:59:50.503
> 
> 标签：python, django, django-models

我的 webapp 中有两个 Django 类，Image 和 Tag（请原谅格式），如下所示：

```
class Image(models.Model):
image_path = models.CharField(max_length=200)
image_name = models.CharField(max_length=200)
x = models.IntegerField(default=0)
y = models.IntegerField(default=0)
num_tags = models.IntegerField(default=0)   
image_score = models.FloatField()
def __unicode__(self):
    return u'%d' % self.id 

class Meta:
    unique_together = ("image_path", "image_name")  

class Tag(models.Model):

    TEXT_BRIGHTNESS_CHOICES = (
    ('bright', 'bright'),
    ('dark', 'dark'),
    )

image = models.ForeignKey(Image)
tag_text = models.CharField(max_length=200)
x = models.IntegerField(default=0)
y = models.IntegerField(default=0)
width = models.IntegerField(default=0)
height = models.IntegerField(default=0)
textbrightness = models.CharField(max_length=10, choices=TEXT_BRIGHTNESS_CHOICES, default='dark')
text_alignment = models.CharField(max_length=16, default="horizontal")

def __unicode__(self):
    return self.tag_text 
```

我想返回对所有 Image 对象的查询，类似于 Image.objects.all()，但是在查询集中，是否也可以获取 Tag.image = Image.id 的所有 Tag 对象？对不起，我敢肯定这在 SQL 中会很容易，但我不知道如何在这里做......

编辑：感谢大家的回复，但是有没有办法让 QuerySet 包含图像信息和与之关联的所有标签？我正在尝试生成包含所有信息的 XML 格式。例子：

```
<image image_path="downloaded_images/1_music_working/">
    <imageName>51rtpUU4meL.jpg</imageName>
    <resolution x="393" y="500" />
    <taggedRectangles>
        #each tag associated with the photo will go here
    </taggedRectangles>
</image> 
```

我正在使用 Django 模板来填写信息。模板如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<tagset>
{% for object in query_set %}
    <image image_path="{{object.image_path}}">
    <imageName>{{object.image_name}}</imageName>
    <resolution x="{{object.x}}" y="{{object.y}}" />
    <taggedRectangles>
    </taggedRectangles>
    </image>    
{% endfor %}
</tagset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:07:16.447

您可以通过在另一端使用模型名称后跟“_set”的字段来[“向后”遵循 ForeignKey 关系：](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)

```
image = Image.objects.get(id=1)
tags = image.tag_set.all() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:07:47.157

使用反向关系

```
tags = image.tag_set.all() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:17:50.790

如果我理解你的问题，你可以做 `tags = image.tag.all()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T02:00:24.043

出于某种原因，我没有想到 QuerySet 是可迭代的......所以我只是做了这样的事情：

```
for image in Image.objects.all():
        image_data = serialize_image(image)
        myfile.write(image_data)
        all_tags = image.tag_set.all()
        tag_data = serialize_tag(all_tags)
        myfile.write(tag_data) 
```

仍在尝试学习 Python / Django，这只是我真正使用它的第 4 周（除了在学校的 3 周）。这是一种非常好的语言，相比之下，Java/C 代码看起来很臃肿:)

# c# - 需要设计基于推送的排队系统的建议/方法

> ID：11609347
> 
> 赞同：0
> 
> 时间：2012-07-23T08:59:56.820
> 
> 标签：c#, queue, push-notification

我有一个网络表单，其中包含某些字段，上面显示了值。这些字段是可编辑的。编辑后有一个需要更新（耗时）的列表： 1\. 必须将所有编辑的值输入数据库 2\. 有一个 scheuler 可以选择这些值并运行某些模块

因此，当快速连续进行编辑时，我们无法继续执行这些更新。在将值输入数据库之前，我们将查看是否对同一字段进行了两次编辑。如果是这样，我们将只选择最新的编辑并输入数据库。所以必须定期选择编辑的值（必须是可配置的），这样我们就可以避免两次运行昂贵的更新。

我计划使用推送通知和队列来设计它。也就是说，无论何时进行编辑，它都会被推送到队列中。将定期检查此队列以获取更新，最后将数据推送到数据库中。还有其他更好的方法吗？对不起，冗长的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:06:28.770

我可能会考虑考虑允许客户端和服务器之间进行双向通信的 SignalR。听起来您有很多“开始”的过程，您可以使用 SignalR 更好地编排它，以便根据需要在服务器之间推送/拉取信息 - 只是值得考虑的事情可能会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:01:46.543

这听起来像你需要像 nservicebus 这样的东西

[http://particular.net/nservicebus](http://particular.net/nservicebus)

您可以在此处获得有关服务总线功能的更多信息：

[什么是服务总线？](https://stackoverflow.com/questions/7617166/what-is-a-servicebus)

# php - 提前查询。对mysql中最相关的字段进行排名

> ID：11609348
> 
> 赞同：2
> 
> 时间：2012-07-23T09:00:01.377
> 
> 标签：php, mysql, sql, inner-join

假设我们有一个这样的数据库：

`Project_tbl`：

```
-----------------
编号 | 项目名称
-----------------
1 | 一个
2 | 乙
3 | C
-----------------

```

* * *

`personel_project_tbl`：

```
--------------------
用户 ID | 项目编号
--------------------
1 | 1
2 | 2
3 | 1
3 | 2
2 | 3
--------------------

```

`instrument_project_tbl`：

```
--------------------------
仪器ID | 项目编号
--------------------------
1 | 1
1 | 2
2 | 2
2 | 1
1 | 3
--------------------------

```

* * *

现在，我需要对项目列表进行排序，并根据它们与项目 A 的相似性对它们进行排名。

例如：

> A 和 B 在 3 个用户中有 1 个共同用户，在 2 个仪器上有 2 个仪器，因此它们的相似度排名为 (1/2 + 2/2) / 2 = 75%
> 
> A 和 C 没有共同的用户，但有 1 比 2 仪器，所以它将是 (1/2)/2 = 25%

所以 B 比 be 更相似，输出应该是

```
--------------
项目 | 秩
--------------
2 | 75
3 | 25

```

这是我想到的第一个解决方案......
如果我在 PHP 和 MySQL 中这样做，它会是这样的：

```
 for all tables as table_x
    for all projects (except A) as prj_y
         unique = (Select distinct count(items) from table_x where project is A)
         count += (Select distinct count(items) from table_x
                   where project is prj_x and items are in
                     (select distinct items from table_x where project is a)
                  )/unique 
```

所以复杂性是 O( *n* ² ) 并且索引选择也会花费 O(log *n* )，这是负担不起的。

您是否有任何想法完全在 MySQL 中完成，或者以更好更快的方式完成？

******** 更多信息和注意事项：**

1.  我仅限于 PHP 和 MySQL。

2.  这只是一个示例，在我的实际项目中，表有 20 多个表，因此该解决方案应该具有**高性能**。

3.  这个问题是这个问题的补充问题：[获取 MySQL 数据库中重复次数最多的相似字段，](https://stackoverflow.com/questions/11538409/get-the-most-repeated-similar-fields-in-mysql-database)如果您的解决方案可以以某种方式用于它们两者（不知何故），那就太好了。我想将相关项目的价值与项目的相似性相乘以获得最佳选择......

总之，这两个问题将：获取最相关的项目，获取所有项目的相似项，并找到当前项目与当前项目最相似的项目！哟

* * *

**感谢您的智慧回答，如果您能对这些情况有所了解，我们将不胜感激**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:37:31.877

你可以这样[做](http://sqlfiddle.com/#!2/bfd9e/23)：

```
SET @Aid = (SELECT id
            FROM Project_tbl
            WHERE Project_name = 'A');

SELECT P.id
  , (IFNULL(personel.prop, 0) +
     IFNULL(instrument.prop, 0)
    )/2*100 Rank
  , personel.prop AS personell
  , instrument.prop AS instrument
FROM Project_tbl P
LEFT JOIN
  ( SELECT B.Project_id pid, COUNT(*)/C.ref prop
    FROM personel_project_tbl A,
         personel_project_tbl B,
         (SELECT COUNT(*) AS ref
          FROM personel_project_tbl
          WHERE Project_id = @Aid
         ) AS C
    WHERE A.user_id = B.user_id
    AND A.Project_id = @Aid
    GROUP BY B.Project_id
  ) personel ON P.id = personel.pid
LEFT JOIN
  ( SELECT B.Project_id pid, COUNT(*)/C.ref prop
    FROM instrument_project_tbl A,
        instrument_project_tbl B,
         (SELECT COUNT(*) AS ref
          FROM instrument_project_tbl
          WHERE Project_id = @Aid
         ) AS C
    WHERE A.instrument_id = B.instrument_id
    AND A.Project_id = @Aid
    GROUP BY B.Project_id
  ) instrument ON P.id = instrument.pid
WHERE P.id <> @Aid
ORDER BY Rank DESC 
```

想法是为每个表创建一个子查询，每个子查询将项目 ID 映射到给定表的对应比率。

关于性能，我什么都没说。您必须尝试看看它是否足够快以满足您的需求，但正如我所见，没有办法击败您提到的 O( *n* ² ) 复杂性，因为您必须检查所有数据。

# android - 多个日期选择器的问题

> ID：11609349
> 
> 赞同：1
> 
> 时间：2012-07-23T09:00:06.300
> 
> 标签：android, datepicker

我想设置一个日期间隔，当用户按下结束日期时，绘制一个图表。我遇到的问题是图表是在开始日期和结束日期绘制的。

我试图设置一个布尔变量或一个整数来决定何时绘制图表，但由于我使用“DatePickerFragmet”中的“onDateSet”，我无法修改它的参数......我在这里粘贴我的代码以提供帮助澄清我要解释的内容：

在我的主要活动中，我有：

```
startDate.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
    // TODO Auto-generated method stub
        for (int i=0; i<2; i++){
            showDatePickerDialog(v,i);
        }
    }
});

public void showDatePickerDialog(View v, int i) {
    DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getFragmentManager(), "datePicker");

} 
```

然后在一个新类上我调用 onDateSet：

```
public class DatePickerFragment extends DialogFragment 
                implements DatePickerDialog.OnDateSetListener {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of DatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this, year, month, day);
}

public void onDateSet(DatePicker view, int year, int month, int day) {
    // Do something with the date chosen by the user
    LineGraph lineGraph = new LineGraph();
    lineGraph.run(getActivity());

} 
```

... 选择最终日期后如何绘制图表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T10:51:48.750

根据传入的 Tag 编写 if..else 或 switch 语句`newFragment.show();`

在这里，您必须`showDatePickerDialog()`为每个日期选择器分别编写一个方法，以便每个日期选择器拥有不同的标签。我已按如下方式实现它：

```
public void showDeadlineDatePickerDialog(View v) {
    DialogFragment newFragment = new DatePickerFragment();
    newFragment.show(getSupportFragmentManager(), "deadlineDate");
}

public void onDateSet(DatePicker view, int year, int month, int day) {
    StringBuilder task = new StringBuilder();
     task.append(day);
     task.append(".");
     task.append(month+1);
     task.append(".");
     task.append(year);
     String x=task.toString();
     if (getTag()=="deadlineDate")
        {

            btn=(Button) getActivity().findViewById(R.id.btn_deadline_date);
            btn.setText(x);

        }
     if (getTag()=="reminderDate")
     {
         btn=(Button) getActivity().findViewById(R.id.btn_reminder_date);
         btn.setText(x);

     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:12:34.637

正如我之前提到的那样，我找不到这样做的方法，我已经通过使用 2 个按钮（开始和结束）来选择日期，而不是只有一个按钮并使用循环来达到解决方案。之后，我创建了另一个类，每个按钮调用一个不同的类。

按钮和方法“showStartDatePicker”和“showEndDatePicker”的声明：

```
final Button startDate = (Button)findViewById(R.id.startDate);
final Button endDate = (Button)findViewById(R.id.endDate);

public void showStartDatePicker(View v) {
    DialogFragment newFragment = new StartDatePickerFragment();
    newFragment.show(getFragmentManager(), "StartDatePicker");
}

public void showEndDatePicker(View v) {
    DialogFragment newFragment = new EndDatePickerFragment();
    newFragment.show(getFragmentManager(), "EndDatePicker");
} 
```

类“StartDatePickerFragment”：

```
public class StartDatePickerFragment extends DialogFragment 
                    implements DatePickerDialog.OnDateSetListener {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of DatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this, year, month, day);
}

public void onDateSet(DatePicker view, int year, int month, int day) {
    // Do something with the date chosen by the user

    Toast.makeText(getActivity(), "Fecha seleccionada: " + day + "/" + (month+1) + "/" + year, Toast.LENGTH_SHORT).show();
}
} 
```

“EndDatePickerFragment”类：

```
public class EndDatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of DatePickerDialog and return it
    return new DatePickerDialog(getActivity(), this, year, month, day);
}

public void onDateSet(DatePicker view, int year, int month, int day) {

    LineGraph lineGraph = new LineGraph();
    lineGraph.run(getActivity());
}
} 
```

我几乎两次做同样的事情（创建 DatePicker），但我找不到更有效的方法。

# objective-c - 在 MonoTouch 中释放/处置 UIViewController

> ID：11609353
> 
> 赞同：5
> 
> 时间：2012-07-23T09:00:36.180
> 
> 标签：objective-c, uiviewcontroller, garbage-collection, xamarin.ios, didreceivememorywarning

据我了解，在 MonoTouch 中处理 Cocoa 对象时，我们需要保存对它们的引用。这样做的原因是 ObjC 运行时可能仍然持有对对象的引用，如果我们在它们上没有“MonoTouch 引用”，它们可能会被垃圾收集，这会导致`EXC_BAD_ACCESS`一旦 ObjC 运行时尝试访问它们。

比如说，我们有两个 UIViewController 子类，VC1 和 VC2。如果用户单击 VC1 上的按钮，UI 会导航到 VC2，并且用户可以来回导航。如果我每次用户导航到它时都创建一个新的 VC2 实例，那么对旧实例的引用会丢失，因此它们会被垃圾收集，并且应用程序在下次 a`didReceiveMemoryWarning`传播到 UIViewControllers 时崩溃。

我怎样才能释放旧的引用，所以我不必每次都使用相同的 VC2 实例？`Dispose`似乎还不够。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T13:01:43.833

> 据我了解，在 MonoTouch 中处理 Cocoa 对象时，我们需要保存对它们的引用。

不完全的。MonoTouch**托管**实例将保留对**本机**实例的引用。只要**托管**实例存在，**本机**实例就会处于活动状态（因为它们被引用计数并且 MonoTouch 不会释放它的引用）。

IOW 您需要保留对 MonoTouch**托管**实例的引用，只要它们的**本机**部分是必需的。

> 这样做的原因是 ObjC 运行时可能仍然持有对对象的引用......它们可能被垃圾收集，

本机（Objective C）实例是引用计数的，而不是垃圾收集的。*本地实例在其引用计数*达到 0之前不会被释放（当关联的**托管**实例存在时不会发生这种情况）；

本机实例也可以保存对其他本机实例的引用。并非每个*本机*实例都有相应的*托管*实例。

> 一旦 ObjC 运行时尝试访问它们，就会导致 EXC_BAD_ACCESS。

这不会发生，至少不会这样。OTOH 很难告诉您您的情况发生了什么（没有看到代码和/或崩溃）。

我**怀疑**您在托管实例完成工作之前正在处理（手动或不手动）您的**托管实例。**以下是可能发生的情况的*简化：*

*   您创建一个*托管*MT.X 实例（例如一个`UIView`）；
*   这将创建并引用*本机*X（本机引用计数 == 1）；
*   您在 MT.X 上覆盖一个事件（或添加一个委托......）“ViewWillUnload”（它本身也存在）；
*   您将 MT.X 实例分配给另一个（托管）实例，例如`UIViewController`;
*   本**机** `UIViewController`将添加对本**机**X 的引用（本机引用计数 == 2）；
*   应用程序执行愉快...
*   您停止引用该`MT.X`实例（例如将变量设置为`null`或不同的实例）；
*   由于不再引用`MT.X`垃圾收集器将处理**托管**实例，调用`Dispose`这将**减少**对*本机*X 的引用（本机引用计数 == 1）。但是本*机*实例不会被释放，因为它仍然被视图控制器引用（不是 0）；
*   `UIViewController`做一些本机触发的事情`X.ViewWillUnload`（例如，它试图加载一个新的`UIView`）；
*   因为`X`仍然存在于本机（ref count == 1），它会调用它`ViewWillUnload`，它会尝试回到**托管**实例......被**释放**。

此问题的解决方案是确保在托管实例的**本机**部分完成其工作之前，您不会处置**托管**实例。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T12:34:53.963

我在我的应用程序中遇到了同样的情况，GC 正确地收集了对象。换句话说，我从来没有遇到过简单地取消对 VC 的引用并让 GC 完成其余工作的问题。

但是，当像您一样调用`Dispose`方法时，我确实遇到了问题。看来我们不应该手动执行此操作。相反，我们应该等待 GC 收集对象并释放其资源。基`NSObject`类在其终结器中有一个调用`Dispose`，因此所有非托管资源将在对象被收集时被释放。

你也可以调用`GC.Collect`一些根VC的`DidReceiveMemoryWarning`方法。**

# sql - 在 SQL 语句中使用 VBA 数组

> ID：11609355
> 
> 赞同：3
> 
> 时间：2012-07-23T09:00:37.993
> 
> 标签：sql, ms-access, vba

我正在尝试编写一些使用 SQL 从多个表中删除行的代码。

用户可以在文本框中键入类型编号，该文本框中用逗号分隔，该逗号用于 SQL DELETE 语句的 WHERE 子句中。

我已经设法将字符串拆分为一个变体数组，现在我想将它插入到我的 SQL 语句中。

如何将变量插入 SQL 语句并让它遍历数组的每个元素？

编辑：更多的挖掘让我了解了 For Each Next 语句。这可能是我正在寻找的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T09:12:52.213

我建议您在 VBA 中构建查询，然后您的数字列表可以是 IN 语句：

```
 sSQL = "DELETE FROM table WHERE ID In (" & MyList & ")" 
```

其中 MyList = "1,2,3,4" 或类似的。

如您所见，您不需要数组，文本框比组合框更合适。如果您希望允许您的用户通过名称进行选择，那么列表框很有用。您可以遍历列表框中的选定项目，并从 ID 构建一个字符串以在 Delete 语句中使用。（[MS Access 2007 - 循环遍历列表框中的值以获取 SQL 语句的 ID](https://stackoverflow.com/questions/3310904/ms-access-2007-cycling-through-values-in-a-list-box-to-grab-ids-for-a-sql-sta/3311022#3311022)）

然后，您可以针对数据库实例执行 sql。例如：

```
 Dim db As Database

 Set db = CurrentDB
 db.Execute sSQL, dbFailOnError

 MsgBox "You deleted " & db.RecordsAffected & " records." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:09:29.127

通用方法

```
WHERE 
','+Array+',' like '%,'+col+',%' 
```

它将考虑您的 Array 中可用的所有数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:10:00.137

你可以让它变得简单并精心制作一个字符串，比如

```
stringBuilder sb = StringBuilder("DELETE FROM YOURTABLE WHERE ");
foreach(string st in stringArray){
    sb.append("YOURFIELD='" + st + "'");
    //If it is not the last element, add an "OR"
    if (st != stringArray[stringArray.length -1]) sb.append(" OR ");
}

//Now, you have a string like
//DELETE FROM YOURTABLE WHERE YOURFIELD='hello' OR YOURFIELD='YES'

//... do something with the command 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-11T04:20:50.727

如果您想使用来自两个不同数组的数组值对两个（或多个）列运行 SQL 查询，此方法将失败。。例如

```
where col1=array1(i) and col2=array2(i) 
```

# c# - 我如何将它添加到中继器？

> ID：11609363
> 
> 赞同：0
> 
> 时间：2012-07-23T09:01:06.670
> 
> 标签：c#, asp.net, linq-to-sql, repeater, asp.net-controls

早晨，

我正在编写一个简单的测验应用程序。我从我的 MS SQL DB 中得到我的问题和答案。我将如何获得这个并将其放入一个中继器控件中，这样我就可以显示 6 个问题及其答案。

或者......你知道更好的方法吗？

```
 var questions = dc.Questions.ToList().OrderBy(q => Guid.NewGuid()).Take(6);

        foreach (var q in questions)
        {
            litQuestion.Text = q.question1;
            int qId = q.id;

            var ans = dc.Answers.Where(a => a.questionId == qId).ToList();

            litAnswer1.Text = ans[0].answer1.ToString();
            litAnswer2.Text = ans[1].answer1.ToString();
            litAnswer3.Text = ans[2].answer1.ToString();
        } 
```

dc 是我的数据上下文。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:38:57.390

除了其他答案之外，这是一种非常简单的方法：

假设您的**Question**对象包含一组可用的答案，称为**Answers**

```
<asp:Repeater runat="server" DataSourceID="ods">
    <ItemTemplate>
        <%# Eval("QuestionText") %>
        <br />
        <asp:RadioButtonList runat="server" DataSource='<%# Eval("Answers") %>' DataTextField="AnswerText" DataValueField="ID">
        </asp:RadioButtonList>
    </ItemTemplate>
</asp:Repeater> 
```

这会产生类似的东西：

![在此处输入图像描述](../Images/b26f8ea9cc6ad0706dc5ccbc7e77800a.png)

## 编辑 1

ods 数据源：

```
 <asp:ObjectDataSource ID="ods" runat="server" 
        SelectMethod="GetQuestions" 
        TypeName="WebApplication1.Questions.QuestionsContext">
    </asp:ObjectDataSource>

    public IEnumerable<Question> GetQuestions()
    {
        // return your questions
    }

public class Question
{
    public Guid ID { get; set; }
    public string QuestionText { get; set; }
    public IEnumerable<Answer> Answers { get; set; }
    public bool MultipleAnswers { get; set; }
    public bool IsCorrect { get; set; }

    public Question()
    {
        this.Answers = Enumerable.Empty<Answer>();
    }
}
public class Answer
{
    public Guid ID { get; set; }
    public Question Question { get; set; }
    public bool IsCorrect { get; set; }
    public string AnswerText { get; set; }
    public bool WasSelected { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:29:29.383

除了在转发器的 DataBound 事件中绑定之外，您还可以使用服务器端标签（如果您只是显示问题和答案）：

aspx：

```
 <asp:Repeater ID="quizRepeater" runat="server">
    <ItemTemplate>
        <div class="fullWidthDiv">
            <span class="rightAlignedForQuestion">
                <asp:Label ID="questionNumberLabel" runat="server">
        Question
        <%# DataBinder.Eval(Container.DataItem,"QuestionNumber") %>:
                </asp:Label>
            </span><span class="leftAlignedForQuestion">
                <label>
                    <%# DataBinder.Eval(Container.DataItem,"Question") %>
                </label>
            </span>
        </div>
        <div class="fullWidthDiv">
            <span class="leftAlignedForOptions">
            Correct Answer: 
                <asp:Label CssClass="boldFont" id="correctAnswerLabel" runat="server" Text='<%# DataBinder.Eval(Container.DataItem,"Answer") %>'>
                </asp:Label>
            </span>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

而 QuestionNumber、Question 和 Answers 将是您绑定列表/DataTable 的属性/列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:10:41.537

这应该让你开始：

标记：

```
<asp:repeater ID="repeater" runat="server" OnItemDataBound="repeater_OnItemDataBound">
    <ItemTemplate>
           <asp:Label id="lblQuestion" runat="server" />
           <asp:Label id="lblAnswer" runat="server" />                 
    </ItemTemplate>
</asp:repeater> 
```

后面的代码：

```
public void repeater_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if ((e.Item.ItemType == ListItemType.Item) || (e.Item.ItemType == ListItemType.AlternatingItem))
    {
        Label lblQuestion = (Label)e.Item.FindControl("lblQuestion");
        Label lblAnswer = (Label)e.Item.FindControl("lblAnswer");

        //Your logic for getting the questions and answers per iteration
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:28:15.223

如果您不知道每个问题的答案数量，您可以使用嵌套中继器

```
<asp:Repeater runat="server" ID="questionsRep" OnItemDataBound="QuestionsRep_ItemDataBound">

        <ItemTemplate>
            <asp:Label runat="server" Text='<%# Eval("question1") %>'></asp:Label>
            <asp:Label runat="server" Text='<%# Eval("id") %>'></asp:Label>

            <asp:Repeater runat="server" ID="answersRep">

                <ItemTemplate>
                    <asp:Label runat="server" Text='<%# Eval("answer1") %>'></asp:Label>
                </ItemTemplate>

            </asp:Repeater>

        </ItemTemplate>

    </asp:Repeater> 
```

在转发器的Databound-Event中，绑定答案

```
protected void QuestionsRep_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if ((e.Item.ItemType == ListItemType.Item) || (e.Item.ItemType ==    
    ListItemType.AlternatingItem))
    {
        Question q = (Question)e.Item.DataItem;
        var answers = dc.Answers.Where(a => a.questionId == q.id).ToList();
        Repeater answersRep = (Repeater)e.Item.FindControl("answersRep");
        answersRep.DataSource = answers;
        answersRep.DataBind();
    }
} 
```

# java - 我对Java多线程感到困惑

> ID：11609367
> 
> 赞同：1
> 
> 时间：2012-07-23T09:01:27.003
> 
> 标签：java, multithreading

我正在开发一个可以发送 http 请求来获取文档的程序。我已经用所有请求项填充了一个队列：

```
Queue<RequestItem> requestItems = buildRequest4Docs(); 
```

然后，

```
int threadNum = requestItems.size();
        //ExecutorService exs = Executors.newFixedThreadPool(threadNum);

        for (int i = 0; i < threadNum; i++) {
            ResponseInterface response = new CMSGOResponse();
            RequestTask task = new RequestTask(requestItems.poll(), this, response);
            task.run();
            //exs.execute(new RequestTask(requestItems.poll(), this, response));
        }
        //exs.shutdown(); 
```

我在这里很困惑，在for循环中，任务是同时运行的吗？还是一个接一个地运行？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:03:40.760

> 我在这里很困惑，在for循环中，任务是同时运行的吗？还是一个接一个地运行？

使用您发布的代码，它们将一个接一个地运行，因为~~（假设`RequestTask`是 的子类`Thread`）~~您调用了`run`. ~~你应该打电话`start`。~~既然您已经说过`RequestTask`implements `Runnable`，那么正确的代码不会调用`start`（它没有！）而是`new Thread(task);`. *（但看起来您现在已经收到了关于 的好答案`ExecutorService`，这是另一种方法。）*

假设您改为在不同的线程上~~调用`start`~~它们，那么是的，它们都将并行运行（尽可能在硬件上运行，等等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T09:14:45.127

以您现在获得的方式，任务将被一一执行。如果您取消注释您现在作为注释获得的代码并注释行`RequestTask task = new RequestTask(requestItems.poll(), this, response);`，`task.run();`您将获得并发执行。

因此，对于并发执行，它必须如下所示：

```
int threadNum = requestItems.size();
ExecutorService exs = Executors.newFixedThreadPool(threadNum);

for (int i = 0; i < threadNum; i++) {
    ResponseInterface response = new CMSGOResponse();
    exs.execute(new RequestTask(requestItems.poll(), this, response));
}
exs.shutdown();
while (! exs.isTerminated()) {
    try {
        exs.awaitTermination(1L, TimeUnit.DAYS);
    }
    catch (InterruptedException e) {
        // you may or may not care here, but if you truly want to
        // wait for the pool to shutdown, just ignore the exception
        // otherwise you'll have to deal with the exception and
        // make a decision to drop out of the loop or something else.
    }
} 
```

除此之外，我建议您不要将使用创建的线程数量绑定`ExecutorService`到您要工作的任务数量。将其连接到主机系统的处理器数量通常是更好的方法。要获得处理器数量，请使用：`Runtime.getRuntime().availableProcessors()`

在像这样初始化的执行器服务中，您放置队列中的项目。但这在不获取总大小的情况下很好地工作，而是通过轮询`Queue`直到它不返回额外的数据。

我的建议的最终结果可能如下所示：

```
final int threadNum = Runtime.getRuntime().availableProcessors();
final ExecutorService exs = Executors.newFixedThreadPool(threadNum);

while (true) {
    final RequestItem requestItem = requestItems.poll();
    if (requestItem == null) {
        break;
    }
    final ResponseInterface response = new CMSGOResponse(); 
    exs.execute(new RequestTask(requestItem , this, response));
}
exs.shutdown(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T09:13:34.157

目前您正在按顺序运行线程，那么您有两种运行线程的方法。（假设 RequestTask 扩展了 Thread）

I.要么创建线程对象，要么调用`start()`方法。

```
RequestTask task = new RequestTask(requestItems.poll(), this, response);
task.start(); // run() method will be called, you don't need to call it 
```

二、或者创建ExecutorService

```
ExecutorService pool = Executors.newFixedThreadPool(poolSize);
//....
for (int i = 0; i < threadNum; i++) {
    ResponseInterface response = new CMSGOResponse();
    RequestTask task = new RequestTask(requestItems.poll(), this, response);
    pool.execute(task);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T09:17:50.087

```
I am confused here, in the for loop,does the tasks run simultaneously？ Or the tasks run one by one? 
```

任务将在同一个线程中执行，即`one by one`因为您正在调用`run()` 它`start`，所以它不会在新线程中运行任务。

```
 int threadNum = requestItems.size();
        ExecutorService exs = Executors.newFixedThreadPool(threadNum);

        ResponseInterface response = new CMSGOResponse();
        RequestTask task = new RequestTask(requestItems.poll(), this, response);

        exs.execute(task );        
        exs.shutdown(); 
```

在上述情况下，任务将在新线程中执行，一旦您分配 10 个不同的任务，`ExecutorService`它们将在不同线程中异步执行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T09:03:26.527

您正在当前线程中一一运行它们。您需要使用 ExecutorService 来同时运行它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T12:42:24.150

我通常倾向于创建我的线程（或实现接口的类），然后使用 start() 方法启动它们。

在您的情况下，由于 RequestTask 实现了 Runnable，您可以添加一个 start() 方法，如下所示：

```
public class RequestTask implements Runnable {
    Thread t;
    boolean running;

    public RequestTask() {
        t = new Thread(this);
    }

    public void start() {
        running = true;    // you could use a setter
        t.start();
    }

    public void run() {
        while (running) {
            // your code goes here
        }
    }
} 
```

， 然后 ：

```
int threadNum = requestItems.size();
RequestTask[] rta = new RequestTask[threadNum];

// Create the so-called Threads ...
for (int i=0;i<threadNum;i++) {
    rta[i] = new RequestTask(requestItems.poll(), this, new CMSGOResponse());
}

// ... THEN launch them
for (int i=0;i<threadNum;i++) {
    rta[i].start();
} 
```

# javascript - 在 html 页面之间共享数据

> ID：11609376
> 
> 赞同：37
> 
> 时间：2012-07-23T09:01:53.460
> 
> 标签：javascript, jquery, html

我想将一些数据从一个 HTML 页面发送到另一个页面。我通过查询参数发送数据，如 `http://localhost/project/index.html?status=exist`. 这种方法的问题是数据保留在 URL 中。是否有任何其他方法可以使用 JavaScript 或 jquery 在 HTML 页面之间发送数据。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-23T09:06:44.653

为什么不将值存储在 HTML5 存储对象中，例如`sessionStorage`或`localStorage`，请访问[HTML5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用它，您可以在本地临时/永久存储中间值，然后稍后访问您的值。

要存储会话的值：

```
sessionStorage.setItem('label', 'value')
sessionStorage.getItem('label') 
```

或更永久地：

```
localStorage.setItem('label', 'value')
localStorage.getItem('label') 
```

因此，您可以使用 HTML5 存储对象在多个页面之间存储（临时）表单数据，您甚至可以在重新加载后保留这些数据。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-06T19:10:05.160

我知道这是一篇旧帖子，但我想我会分享我的两分钱。@Neji 是正确的，因为您可以使用`sessionStorage.getItem('label')`, 和`sessionStorage.setItem('label', 'value')`（尽管他的`setItem`参数是向后的，但没什么大不了的）。我更喜欢以下内容，我认为它更简洁：

```
var val = sessionStorage.myValue 
```

代替`getItem`和

```
sessionStorage.myValue = 'value' 
```

代替`setItem`.

另外，应该注意的是，为了存储 JavaScript 对象，必须将它们字符串化以设置它们，并解析以获取它们，如下所示：

```
sessionStorage.myObject = JSON.stringify(myObject); //will set object to the stringified myObject
var myObject = JSON.parse(sessionStorage.myObject); //will parse JSON string back to object 
```

原因是 sessionStorage 将所有内容都存储为字符串，所以如果你只是说`sessionStorage.object = myObject`你得到的只是 [object Object]，这对你没有太大帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-23T09:05:58.850

可能如果您只想传输数据以供 JavaScript 使用，那么您可以使用像这样的哈希标签

```
http://localhost/project/index.html#exist 
```

所以一旦你完成检索数据显示消息并将window.location.hash更改为合适的值..现在每当你刷新页面时`hashtag`不会出现
**注意：**当你将使用它而不是查询字符串数据时服务器无法检索/读取正在发送的内容

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-23T09:08:31.360

好吧，您实际上可以通过 JavaScript 发送数据 - 但您应该知道这是网页中的 #1 漏洞利用源，因为它是 XSS :)

我个人建议改用 HTML 公式并修改服务器端的 javascript 数据。

但是如果你想在两个页面之间共享（我假设它们不在本地主机上，因为在两个后端驱动的页面之间共享没有意义）你需要指定 CORS 标头以允许浏览器将数据发送到列入白名单的域。

这两个链接可能会对您有所帮助，它通过 Node 后端显示了示例，但您明白了它是如何工作的：

[链接 1](http://www.bennadel.com/blog/2327-Cross-Origin-Resource-Sharing-CORS-AJAX-Requests-Between-jQuery-And-Node-js.htm)

当然，还有 CORS 规范：

[链接 2](http://www.w3.org/TR/cors/)

~干杯

# ruby-on-rails - 带有 ruby 1.9.3 和 cldwalker/debugger 的 Aptana Studio 3.2

> ID：11609377
> 
> 赞同：1
> 
> 时间：2012-07-23T09:01:57.247
> 
> 标签：ruby-on-rails, debugging, aptana

我无法使用 ruby​​ 1.9.3p0 和 cldwalker/debugger 在 Aptana Studio 3.2 中进行调试。

如果我安装了 ruby​​-debug，它会输出这个错误：

/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:59:in `require': /var/lib/gems/1.9.1/gems/ruby-debug-base19-0.11.25/lib/ruby_debug .so：未定义符号：ruby_current_thread - /var/lib/gems/1.9.1/gems/ruby-debug-base19-0.11.25/lib/ruby_debug.so（LoadError）

如果我没有它，单击调试按钮时不会发生任何事情。

从终端运行调试器（rails server --debugger）工作正常，所以在我看来，就像 AS3 有某个地方硬编码了 ruby​​-debug 设置。

是否可以使用 cldwalker/debugger 调试应用程序？

提前致谢。

# windows-phone-7 - 在WP7中构建应用程序栏的正确方法

> ID：11609390
> 
> 赞同：0
> 
> 时间：2012-07-23T09:03:06.153
> 
> 标签：windows-phone-7, expression-blend-4, application-bar

我正在 WP7 中进行本地化应用程序，所以我在代码中制作了我的应用程序栏。当我有某种形式（注册、登录等）时，就会出现问题。在 Blend 中一切看起来都很好，但是当我在设备上用文本框模拟它时，文本块是完全不同的（有时它们是相互的）

我的解决方案是在 Blend (PhoneApplicationPage -> New (Common Properties)) 中构建空的应用程序栏，然后在这样的代码中创建一个新的应用程序栏：

```
private void BuildApplicationBar()
        {
            // Set the page's ApplicationBar to a new instance of ApplicationBar.
            ApplicationBar = new ApplicationBar();

            // Create a new button and set the text value to the localized string from AppResources.
            ApplicationBarIconButton OkAppBarButton = new ApplicationBarIconButton(new Uri("icons/ok.png", UriKind.Relative));
            OkAppBarButton.Text = AppResource.OkAppBarButton;
            ApplicationBar.Buttons.Add(OkAppBarButton);
            OkAppBarButton.Click += new EventHandler(OkAppBarButton_Click);

            ApplicationBarIconButton CancelAppBarButton = new ApplicationBarIconButton(new Uri("icons/cancel.png", UriKind.Relative));
            CancelAppBarButton.Text = AppResource.CancelAppBarButton;
            ApplicationBar.Buttons.Add(CancelAppBarButton);
            CancelAppBarButton.Click += new EventHandler(CancelAppBarButton_Click);
        } 
```

效果很好，但我想确定这是处理它的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:09:01.750

@dargod。有许多框架可以帮助构建和绑定 appbar。许多人抱怨的应用栏的关键问题是，该栏不支持开箱即用的命令，因此不适合 MVVM。

以下是一些可能有帮助的链接

[AppBarUtils](http://windowsphonegeek.com/marketplace/components/AppBarUtils-for-Windows-Phone-SDK-7-1)

[可绑定应用栏](http://blogs.interknowlogy.com/2012/02/22/bindable-application-bar-attached-property-windows-phone-7/)

# python - 如何在 Python 中回测策略

> ID：11609391
> 
> 赞同：2
> 
> 时间：2012-07-23T09:03:06.010
> 
> 标签：python, stocks, trading

我需要能够通过指示每个交易的赢或输来确定特定的“交易”（由“信号”表示）是否导致了盈利或亏损。

我需要 Python 检查High 和 Low 列表（列表： 、和将具有相同数量的值）中的下一个位置（**`signal`**或入口点或 date + 1）是否增加等于或大于 2.5 % 在某个点超出入场信号。**`close`****`highs`****`lows`**

但是，我还希望 Python 在升值 2.5% 或更多之前确定该值是否下降了 3% 或更多。

这必须发生在`signal`.

本质上，我需要在 102.5% 处卖出限价，在 97% 处止损。

不幸的是，到目前为止我开发的代码似乎不起作用。

**我错过了什么？**

```
signals = [1,5,7]
close   = [5,10,10,10.5,11,12,11.9,14,14,15,16]
highs   = [7,10.2,10.1,11,12,12.1,12.2,14.5,18,19,20]
lows    = [4,9.9,9.8,10,10,11.8,11.8,12,13.8,13.85,14]

for i in signals:
    entry = close[i]
    print i
    for high in highs[i+1:]:
        profit = ( ( high - entry ) / entry ) * 100
    for low in lows[i+1:]:
        loss   = ( ( low  - entry ) / entry ) * 100
    if abs( loss ) <  3:
        if profit  >= 2.5:
            print 'Win'
        else:
            print 'Loss' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:06:29.183

你`profit`只计算，`highs[-1]`而`loss`只计算`lows[-1]`。其他所有内容都被丢弃，因为您替换`profit`和`loss`在每个循环中。

您想找到您的条件为真的一*组值。*用于[`zip`](http://docs.python.org/library/functions.html#zip)将低点和高点放在一起：

```
for i in signals:
    entry = float(close[i])
    for high, low in zip(high[i + 1:], low[i + 1:]):
        profit = ((high - entry) / entry) * 100
        loss = ((low - entry) / entry) * 100
        if loss > -3:
            if profit >= 2.5:
                print "Win"
            else:
                print "Loss" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-05T07:40:25.413

您是否已经检查了 python 库以进行回测？事实上，我使用其他库，但有一些非常流行的基于 python 的解决方案，例如“pybacktest”、“PyAlgoTrade”或“UltraFinance”。也许集成这样的库可能对您的用例有利......

# python - 使用布尔表达式生成器展平序列

> ID：11609393
> 
> 赞同：3
> 
> 时间：2012-07-23T09:03:25.660
> 
> 标签：python, list-comprehension

我正在寻找一个生成器，它将基于布尔表达式展平一系列元组。我的数据如下所示：

```
my_data = ((3, 4), (None, 4), (5, 8), (None, 1), (None, 9)...) 
```

我想做的是将它展平为一个一维数字生成器，如果不是，我将在每个元组中取第一项`None`，否则取第二项。我的结果将产生以下序列：

```
3, 4, 5, 1, 9... 
```

我认为最简单的方法是使用带有短路功能的布尔表达式，但我似乎无法组成一个合适的生成器。我意识到我可以定义一个生成器函数，这将相当简单，但我很好奇这是否可以通过理解来完成？

我的尝试：

```
(x or y for subitem in my_data for x, y in subitem) 
```

追溯：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 1, in <genexpr>
TypeError: 'int' object is not iterable 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T09:05:36.030

```
(x[0] or x[1] for x in my_data) 
```

或者，

```
(x or y for x,y in my_data) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:15:24.307

恐怕你需要`None`明确地检查，或者像这样的元组`(0, None)`或者`(0, 1)`会让你绊倒：

```
(x if x is not None else y for x,y in my_data) 
```

例子：

```
>>> my_data = ((3, 4), (None, 4), (5, 8), (None, 1), (0, None), (0, 1))
>>> [x or y for x,y in my_data]
[3, 4, 5, 1, None, 1]
>>> [x if x is not None else y for x,y in my_data]
[3, 4, 5, 1, 0, 0] 
```

# actionscript-3 - Actionscript 错误 #2032 仅在 IE 中

> ID：11609404
> 
> 赞同：0
> 
> 时间：2012-07-23T09:04:07.947
> 
> 标签：actionscript-3

对不起我的英语。

我正在使用 Flex SDK 开发一个 flash 应用程序，它是一个 actionscript 项目，而不是一个 Flex 项目。我用来`URLLoader`向服务器发送 HTTP 发布请求。

在 Safari/Chrome 中，它运行良好，但在 IE 中我得到了这个：

```
[IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error.  URL: https://graph.renren.com/renren_api/session_key"] 
```

我怎样才能解决这个问题？
如果它可以在 Safari/Chrome 中运行，为什么它不能在 IE 中运行？

就我而言，我无法更改服务器端代码，我可以通过编写一些 Actionscript 代码来解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:32:19.367

这个奇怪的问题很受欢迎。它可以通过设置缓存控制头来修复。[在http://faindu.wordpress.com/2008/04/18/ie7-ssl-xml-flex-error-2032-stream-error/](http://faindu.wordpress.com/2008/04/18/ie7-ssl-xml-flex-error-2032-stream-error/)中有很好的描述

# java - 无法实例化活动 ComponentInfo java.lang.NullPointerException

> ID：11609409
> 
> 赞同：0
> 
> 时间：2012-07-23T09:04:14.560
> 
> 标签：java, android, android-listview, android-arrayadapter

> 07-23 05:01:10.925: E/AndroidRuntime(4520): 致命异常: main 07-23 05:01:10.925: E/AndroidRuntime(4520): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{nsixty. Crew.app/nsixty.crew.app.gallery}：java.lang.NullPointerException 07-23 05:01:10.925：E/AndroidRuntime(4520)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1586) 07 -23 05:01:10.925: E/AndroidRuntime(4520): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1680) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在 android.app .ActivityThread.access$1500(ActivityThread.java:117) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 07-23 05: 01:10.925: E/AndroidRuntime(4520): 在 android.os.Handler.dispatchMessage(Handler.java:99) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在 android.os.Looper.loop(Looper.java:130) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在android.app.ActivityThread.main(ActivityThread.java:3703) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在 java.lang.reflect.Method.invokeNative(Native Method) 07-23 05:01 :10.925: E/AndroidRuntime(4520): at java.lang.reflect.Method.invoke(Method.java:507) 07-23 05:01:10.925: E/AndroidRuntime(4520): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841) 07-23 05:01:10.925: E/AndroidRuntime(4520): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599) 07 -23 05:01:10.925: E/AndroidRuntime(4520): at dalvik.system.NativeStart.main(Native Method) 07-23 05:01:10.925: E/AndroidRuntime(4520): Caused by: java.lang.NullPointerException 07-23 05:01:10.925: E/AndroidRuntime(4520): 在 nsixty.crew.app.gallery.(gallery.java:49) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在java.lang.Class.newInstanceImpl(Native Method) 07-23 05:01:10.925: E/AndroidRuntime(4520): at java.lang.Class.newInstance(Class.java:1409) 07-23 05:01:10.925 : E/AndroidRuntime(4520): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread. java:1578) 07-23 05:01:10.925: E/AndroidRuntime(4520): ... 11 更多在 java.lang.Class.newInstance(Class.java:1409) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 07-23 05 :01:10.925: E/AndroidRuntime(4520): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1578) 07-23 05:01:10.925: E/AndroidRuntime(4520): ... 还有 11 个在 java.lang.Class.newInstance(Class.java:1409) 07-23 05:01:10.925: E/AndroidRuntime(4520): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021) 07-23 05 :01:10.925: E/AndroidRuntime(4520): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1578) 07-23 05:01:10.925: E/AndroidRuntime(4520): ... 还有 11 个

```
public class gallery extends ListActivity {

private List<String> item = null;

private List<String> path = null;

private String root = "sdcard/Crews/";

private TextView myPath;
VideoView videoView;

String[] itemArr;

String[] itemArr2 = item.toArray(new String[item.size()]);
ListView list;

File folder = new File("sdcard/Crews/Videos/");

MyThumbnaildapter fileList;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.gallery);
    myPath = (TextView) findViewById(R.id.path);

    getDir(root);

    videoView = (VideoView) this.findViewById(R.id.videoView);

}

private void getDir(String dirPath)

{

    myPath.setText("Location: " + dirPath);

    item = new ArrayList<String>();

    path = new ArrayList<String>();

    File f = new File(dirPath);

    File[] files = f.listFiles();

    if (!dirPath.equals(root))

    {

        item.add(root);

        path.add(root);

        path.add(f.getParent());

    }

    for (int i = 0; i < files.length; i++)

    {

        File file = files[i];

        path.add(file.getPath());

        if (file.isDirectory()) {

            item.add(file.getName() + "/");
        }

        else {

            item.add(file.getName());
        }

    }

    fileList = new MyThumbnaildapter(this, R.layout.row, itemArr2);
    setListAdapter(fileList);
    list = (ListView) findViewById(android.R.id.list);

    list.setAdapter(fileList);
    registerForContextMenu(list);

}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    final File file = new File(path.get(position));

    if (file.isDirectory())

    {

        if (file.canRead()) {

            getDir(path.get(position));
            // imageThumbnail.setImageBitmap(bmThumbnail);
        }

        else

        {

            new AlertDialog.Builder(this)

            .setIcon(R.drawable.icon)

            .setTitle("[" + file.getName() + "] folder can't be read!")

            .setPositiveButton("OK",

            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {

                    // TODO Auto-generated method stub

                }

            }).show();

        }

    }

    else

    {

        new AlertDialog.Builder(this)

        // .setIcon(R.drawable.icon)
        // .setView(getCurrentFocus())
                .setTitle("[" + file.getName() + "]")

                .setPositiveButton("OK",

                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {

                        if (file.getPath().contains(".3gp")) {

                            Intent intent = new Intent();
                            intent.setAction(Intent.ACTION_VIEW);

                            intent.setDataAndType(
                                    Uri.fromFile(new File(file.getPath())),
                                    "video/*");

                            startActivity(intent);

                        } else if (file.getPath().contains(".jpg")) {
                            Intent intent = new Intent();
                            intent.setAction(Intent.ACTION_VIEW);

                            intent.setDataAndType(
                                    Uri.fromFile(new File(file.getPath())),
                                    "image/*");

                            startActivity(intent);
                        } else {
                            Toast displayError = Toast.makeText(
                                    gallery.this, "unsupported media type",
                                    Toast.LENGTH_SHORT);
                            displayError.show();
                        }

                    }

                }).show();
        // });
    }

} 
```

}

```
public class MyThumbnaildapter extends ArrayAdapter<String> {

    public MyThumbnaildapter(Context context, int textViewResourceId,
            String[] objects) {
        super(context, textViewResourceId, objects);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        View row = convertView;
        if (row == null) {
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.row, parent, false);
        }

        ImageView imageThumbnail = (ImageView) row
                .findViewById(R.id.Thumbnail);

        Bitmap bmThumbnail;
        bmThumbnail = ThumbnailUtils.createVideoThumbnail(
                itemArr2[position], Thumbnails.MICRO_KIND);
        imageThumbnail.setImageBitmap(bmThumbnail);

        return row;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:09:33.137

盲目假设，

```
fileList = new MyThumbnaildapter(this, R.layout.row, itemArr2); 
```

您的**itemArr2 是 null**，因为您试图在填充项目数组之前全局启动它.. 像，

```
String[] itemArr2 = item.toArray(new String[item.size()]); 
```

解决方案（可能）：

在`String[] itemArr2 = item.toArray(new String[item.size()]);` 填充`item`字符串数组后放行，

所以应该在这里

```
String[] itemArr2 = item.toArray(new String[item.size()]);
fileList = new MyThumbnaildapter(this, R.layout.row, itemArr2);
setListAdapter(fileList); 
```

同时删除这两行，

```
list = (ListView) findViewById(android.R.id.list);
list.setAdapter(fileList); 
```

调试您的应用程序代码，找出问题所在。

# asp.net-mvc - MVC 上的实体框架验证

> ID：11609413
> 
> 赞同：1
> 
> 时间：2012-07-23T09:04:35.183
> 
> 标签：asp.net-mvc, entity-framework

我有一个使用 ef 的 asp.net mvc 项目。它的“添加”控制器 =>

```
 [Authorize(Roles = "Admin")]
    public ActionResult Add()
    {
        using (Process _process = new Process())
            ViewBag.KlinikListesi = _process.KlinikleriGetir();
        return View();
    }

    [Authorize(Roles = "Admin")]
    [HttpPost]
    public ActionResult Add(uzmanlik_egitim _ueModel)
    {
        using (Process _process = new Process())
        {

            ViewBag.KlinikListesi = _process.KlinikleriGetir();
            if (Request.QueryString["userName"] != null)
            {
                _ueModel.kullanici_adi = Request.QueryString["userName"].ToString();
                _process.Add(_ueModel);
            }
        }
        return View();
    } 
```

我创建了视图（选择模型作为 ef 表（uzmanlik_egitim））

它完美地工作。

但我需要验证字段，我试过 =>

```
 //[MetadataType(typeof(uzmanlik_egitim_metadata))]
//public partial class uzmanlik_egitim
//{

//}

//public class uzmanlik_egitim_metadata
//{
//    [Required]
//    public string kullanici_adi { get; set; }

//    [Required]
//    public int ID { get; set; }

//    [Required]
//    public string klinik { get; set; }

//    [StringLength(1, ErrorMessage = "En Fazla 1 Karakter")]
//    public int? ulusal_kongre { get; set; }

//    [StringLength(1, ErrorMessage = "En Fazla 1 Karakter")]
//    public int? uluslararasi_kongre { get; set; }

//    [StringLength(1, ErrorMessage = "En Fazla 1 Karakter")]
//    public int? yurtici_sunum { get; set; }

//    [StringLength(1, ErrorMessage = "En Fazla 1 Karakter")]
//    public int? yurtdisi_sunum { get; set; }

//    [StringLength(1, ErrorMessage = "En Fazla 1 Karakter")]
//    public int? yurtici_bilimsel_yayin { get; set; }

//    [StringLength(1, ErrorMessage = "En Fazla 1 Karakter")]
//    public int? yurtdisi_bilimsel_yayin { get; set; }
//} 
```

但由于我被卡住的类型，我得到了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T13:59:41.330

我认为[RangeAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.rangeattribute.aspx)在这里更合适，因为您使用`int`的是属性类型。

```
[Range(0, 9, ErrorMessage = "En Fazla 1 Karakter")]
public int? ulusal_kongre { get; set; } 
```

# javascript - Underscore.js 和无冲突

> ID：11609415
> 
> 赞同：1
> 
> 时间：2012-07-23T09:04:39.100
> 
> 标签：javascript, underscore.js

编写第三方 javascript 代码，该代码使用`underscore.js`并尝试避免与*可能*在主站点上使用的*underscore.js*版本发生冲突。所以，我天真的代码是这样的：

 *```
window.$MyUS = _.noConflict(); 
```

我从现在开始使用`$MyUS`而不是。`_`不幸的是，在某些网站上我收到以下错误：

> 未捕获的 ReferenceError：_ 未定义

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T15:30:38.807

定义了一个全局`exports`对象，这阻止了*underscore.js*正确安装。该对象声明了两个函数：`compile()`和`compileToString()`. 函数的实现揭示了`LF`最有可能属于 LiveFyre Javascript API 的对象：[http](http://www.livefyre.com/docs/javascript-sdk-reference) ://www.livefyre.com/docs/javascript-sdk-reference 。

以上就是关于*underscore.js*安装不成功的调查。仍然对我现在应该做什么以及如何正确解决它感到困惑：[underscore.js、名为“exports”的全局对象和 livefyre javascript API - 集成冲突](https://stackoverflow.com/questions/11615610/underscore-js-global-object-named-exports-and-livefyre-javascript-api-integ)。*

# java - 如何从图库中拍照并在我的应用程序中使用这张照片

> ID：11609416
> 
> 赞同：1
> 
> 时间：2012-07-23T09:05:01.710
> 
> 标签：java, android, eclipse

我想从我的画廊拍一张照片，我想给它一个“id”来使用我的 android 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:15:56.537

甚至在按钮单击时，调用以下代码....

```
Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(intent, GET_IMAGE); 
```

并且，在活动结果上，编写以下代码：

```
if (requestCode == GET_IMAGE) {    
  targetUri = data.getData();
  imageView.setImageURI(targetUri);                 
} 
```

在哪里，`private static final int GET_IMAGE = 2;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:19:34.957

你可以试试下面的代码

```
 btnChoosePhoto.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i = new Intent(Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.INTERNAL_CONTENT_URI);

            startActivityForResult(i, 1);
        }
    });

public void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    if(resultCode == RESULT_OK && requestCode == 1 ) {

        final Uri selectedImage = data.getData();

        try {
            bitmap = Media.getBitmap(getContentResolver(),selectedImage);
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 90, bytes);

            //path = selectedImage.getEncodedPath();

            // create new file to write the encrypted bytes of image in file
            File f = new File(Environment.getExternalStorageDirectory()
                    + File.separator
                    + filename);
            f.createNewFile();
            FileOutputStream fo = new FileOutputStream(f);
            fo.write(bytes.toByteArray());

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        imageView.setImageBitmap(bitmap);

    }
} 
```

# android - Android上的PDF库？

> ID：11609420
> 
> 赞同：1
> 
> 时间：2012-07-23T09:05:20.393
> 
> 标签：android, pdf, pdf-reader, pdf-viewer

我做了一项研究以在 Android 上搜索开源 PDF 库。我想要一个 LGPL 库。

我找到了一些例子，比如

*   PDF-渲染器
*   PDFBox
*   gnujpdf
*   波多佛

我想要一个可以在现代 PDF 文件中编辑、阅读、搜索文本的库。

他们能完成这些任务吗？或者，还有其他选择吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:30:39.540

[试试这个例子。在这里，您可以使用 jar 文件示例代码](https://github.com/jblough/Android-Pdf-Viewer-Library)从 SDCARD 读取、搜索、放大/缩小 Pdf 文件

# php - Android - 将 JSONArray 发送到 php

> ID：11609423
> 
> 赞同：1
> 
> 时间：2012-07-23T09:05:29.053
> 
> 标签：php, android, json, http-post

大家好，我正在尝试将我的 JSONArray 发送到 php 页面我得到 HTTP//1.1 200 但我仍然无法在我的 php 页面中显示它，我仍然不知道我是否成功发送它在这里是我的安卓代码

```
public void sendJson() {

                HttpClient client = new DefaultHttpClient();
                HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
                HttpResponse response;

                try{
                    HttpPost post = new HttpPost("http://sap-sp-test.dff.jp/sp.php/ranking/index");
                    Log.i("entry", MixiActivity.entry.toString());

                    ArrayList<NameValuePair> nVP = new ArrayList<NameValuePair>(2);  
                    nVP.add(new BasicNameValuePair("json", MixiActivity.entry.toString()));
                    post.setEntity(new UrlEncodedFormEntity(nVP));
                    response = client.execute(post);
                    Log.i("postData", response.getStatusLine().toString());
                }
                catch(Exception e){
                    e.printStackTrace();
                    Log.i("error", e.getMessage());
                }

    } 
```

PHP 代码

```
$data =  $_POST['json'];
echo $data; 
```

我已经在这里尝试了一些示例，但是我仍然无法发送数据，并且当我尝试使用日志打印它时 JSON 数组（MixiActivity.entry）不为空，日志显示 JSON 数组的正确值但我可以'不要把它发送到 PHP 请帮我解决这个问题

非常感谢

尼可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:29:26.177

您可以尝试像这样在 post.setEntity() 中添加编码...

```
post.setEntity(new UrlEncodedFormEntity(nameValuePairs, "utf-8")); 
```

在我看来，其他一切都很好。如果这不起作用，那么您也可以尝试使用 android 中的 JSON 库直接对其进行编码并将该数据传递给页面使用

```
HttpPost httppost = new HttpPost("http://your/url/path/");  
httppost.addHeader("Content-Type", "application/json");
httppost.setEntity(new ByteArrayEntity(json.toString().getBytes("UTF8"))); 
```

然后在php中你可以通过这段代码访问它

```
$json = file_get_contents('php://input');
$obj = json_decode($json);
$name = $obj->{'name'}; 
```

或者

您还可以尝试通过 php 文件中的 $_REQUEST 发出获取请求或访问数据。无论您使用什么，都正是您所需要的。

或者

试试这个，这是一个工作代码......它是一个可以直接用于将数据传递到文件的类。使用 :: 静态调用函数，并导入所有需要的 json 类

```
public class RestClient {

private static String convertStreamToString(InputStream is) {
    /*
     * To convert the InputStream to String we use the BufferedReader.readLine()
     * method. We iterate until the BufferedReader return null which means
     * there's no more data to read. Each line will appended to a StringBuilder
     * and returned as String.
     */
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return sb.toString();
}

public static String connectSend(){

    /*
    HttpParams httpparams = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpparams, 30000);
    HttpConnectionParams.setSoTimeout(httpparams, 30000);
    */

    HttpClient httpclient = new DefaultHttpClient();

    HttpPost httppost = new HttpPost("http://path/to/your/php/file");   

    httppost.addHeader("Content-Type", "application/json");

    JSONObject json = new JSONObject();
    try {
        json.put("item0", "data0");
        json.put("item1", "data1");
        json.put("item2", "data2");
        json.put("item3", "data3");
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    try {
        httppost.setEntity(new ByteArrayEntity(json.toString().getBytes("UTF8")));
        //httppost.setHeader("json", json.toString());
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream instream = entity.getContent();
            String result = RestClient.convertStreamToString(instream);

            return result;
        }

    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return e.toString();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return e.toString();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return e.toString();
    } 
    catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    return "false";

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T06:50:59.907

最后我放弃了 android 中的 http post 现在我使用 javascript 从 android 获取 jsonarray

有了这个

公共类 JavaScriptInterface { 上下文 mContext;

```
 JavaScriptInterface(Context c) {
             mContext = c;
         }

         public String load() {
             String JS = JsonArray.toString();
             return JS;
         } } 
```

并在 HTML

```
 function loadJSON()        
{           
var jsonData = Android.load();
var myDictionary = [];          
myDictionary["jsonData"] = jsonData;

post(myDictionary, "http://sap-sp-test.dff.jp/sp.php/ranking/index?user_id=" + user_id+"&display_name=" + display_name + "&photo=" + photo +"&device=android", "post");         
} 
```

对于 PHP 的帖子，我在 javascript 中使用表单 POST

```
function post(dictionary, url, method) 
        {
            method = method || "post"; // post (set to default) or get

            // Create the form object
            var form = document.createElement("form");
            form.setAttribute("method", method);
            form.setAttribute("action", url);

            // For each key-value pair
            for (key in dictionary) {
                //alert('key: ' + key + ', value:' + dictionary[key]); // debug
                var hiddenField = document.createElement("input");
                hiddenField.setAttribute("type", "hidden"); // 'hidden' is the less annoying html data control
                hiddenField.setAttribute("name", key);
                hiddenField.setAttribute("value", dictionary[key]);
                form.appendChild(hiddenField); // append the newly created control to the form
            }

            document.body.appendChild(form); // inject the form object into the body section
            form.submit();
        } 
```

并在 PHP 中接收 json

```
if($this->_getParam('device') == "android")
        {
            $data = $_POST["jsonData"];
            $data = stripslashes($data);
            $friends = $data;
        } 
```

无论如何，这种方法对我有用，谢谢墨西哥流浪乐队的帮助

# gwt - 如何使用 gwt mvp 创建母版页或所有视图共有的页面

> ID：11609425
> 
> 赞同：0
> 
> 时间：2012-07-23T09:05:34.333
> 
> 标签：gwt, gwt-mvp

嗨，我是 GWT MVP 模式的新手。我来自 asp.net 背景，目前我正在研究 GWT，我被要求创建一个母版页，其中包含所有视图应该共有的菜单项。[最初，我使用https://developers.google.com/web-toolkit/articles/mvp-architecture-2](https://developers.google.com/web-toolkit/articles/mvp-architecture-2)创建了一个示例 mvp 项目，并且可以从一个视图导航到另一个视图。如何保持一个视图不变并根据我们单击的菜单项不断更改其他视图。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:07:57.080

您将屏幕划分为两个或更多区域，并为每个区域分配专用的 ActivityMapper 和 ActivityManager。例如，一个区域可以是带有 MenuActivityManager 的“菜单”，而另一个区域可以是带有 BodyActivityManager 的“body”。

这是一个很好的解释： [http ://blog.ltgt.net/gwt-21-activities-nesting-yagni/](http://blog.ltgt.net/gwt-21-activities-nesting-yagni/)

请注意，使用此方法有利也有弊。浏览器需要几毫秒来呈现标准的 html。创建一个小部件 mainMenu 并将它（最好是使用 UiBinder）包含到每个视图中可能会更容易，而不是处理两个活动管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:02:38.640

您提到的文章来自在 GWT 中添加 MVP 支持之前。它擅长解释概念，但实际实现用处不大。要继续查看有关活动的 GWT 文档：[https](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces) ://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces 。在那里，您还将找到解决问题的方法。简而言之，看看`ActivityManager`. 这管理所有活动。在活动管理器上，您设置一个对所有活动都是静态的小部件。这个小部件必须有一个方法`setWidget`（实际上它必须实现`AcceptsOneWidget`）。在您的每个活动实现中，您都可以通过`start`方法。通过在 start 方法中使用该活动的特定视图调用 setWidget，您可以设置活动特定视图。这一切都非常简要地描述，但如果您阅读提到的文档，您应该了解这个概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:14:01.103

如果您正在使用`UiBinder`，您的`ui.xml`文件应该是这样的，

```
 <!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
 <ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
  xmlns:g="urn:import:com.google.gwt.user.client.ui">

<ui:style>
</ui:style>

<g:DockLayoutPanel unit="EM">
    <g:north size="4">
        //Add Logo, menus or what you want to be displayed for all the pages 
    </g:north>
    <g:center>
        //Add code for your desired UI. In java code you change the UI by this "flowpanel"
        For eg: <g:FlowPanel ui:field="flowpanel" />
    </g:center>
</g:DockLayoutPanel> 
```

`<g:center>`然后，每次您都可以像这样使用您的 java 代码清除并添加要在视图中显示的小部件`flowpanel.clear(); flowpanel.add(anyWidget you need)`。

`<g:north>`静态视图和动态视图也是如此`<g:center>`。现在您将获得所需的页面。因为您每次只能更改您的视图`<g:center>`。

像这样，您可以添加`<g:east>`,如果需要。`<g:west>``g:south>`

如果您不使用 UiBinder，请在您的 java 代码中执行以下操作，

```
 final DockLayoutPanel dockLayoutPanel = new DockLayoutPanel(Style.Unit.EM);
    dockLayoutPanel.addNorth(any widget you need, "4"); //NorthPanel
    dockLayoutPanel.add(any widget you need);   //CenterPanel 
```

`"4"`面板的大小在哪里，你可以改变它。

像这样`dockLayoutPanel.addWest(any widget you need, "4"); //WestPanel dockLayoutPanel.addEast(any widget you need, "4");//EastPanel
dockLayoutPanel.addSouth(any widget you need, "4"); //SouthPanel`

我希望你现在明白了。

# google-analytics - 一页上有多个 GA 跟踪代码

> ID：11609427
> 
> 赞同：2
> 
> 时间：2012-07-23T09:05:41.767
> 
> 标签：google-analytics

我刚刚继承了一个网站，该网站在从顶级跟踪到子域的同一页面上具有两个不同的 GA 代码。我现在已经删除了“两个”GA 代码，并使用下面建议的方法将两个不同的 ID 合并为一个代码。

```
gaq.push(
['_setAccount', 'UA-XXXXX-1'],
['_trackPageview'],
['b._setAccount', 'UA-XXXXX-2'],
['b._trackPageview'] 
```

这似乎工作正常，但数据，特别是跳出率自实施新代码片段以来发生了显着变化，变得更糟。

我发现大量教程解释你不应该在一个页面上有两个 GA 代码，你应该使用 _set Account 方法，但我找不到任何关于你为什么不应该的解释。

我想回到客户那里，解释为什么自从新的 GA 代码片段实施以来这些数字发生了如此巨大的变化，但找不到有效的解释。我最初假设第二个 GA 代码可能已经覆盖了以前的 cookie，或者可能是异步标签在那里推出带有两个标签的数据的问题。

任何想法为什么两个标签不能在同一页面上正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T17:43:31.907

您可能丢失了与子域相关的所有数据。在您修改之前，我会猜测该网站是否有旧的谷歌跟踪代码，甚至可能是旧的 urchin 代码？

[在任何情况下，如果您按照https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#yourDomainName](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#yourDomainName)中的说明跟踪多个域，您都需要使用 _setDomainName('example.com')

另一个有用的指南位于[http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55570](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55570)

像您正在做的两个标签应该可以正常工作，[这是一个用例](http://scottpatten.ca/2011/11/multiple-google-analytics-codes-on-one-page.html)。不建议您使用两个单独的跟踪 javascript (.js) 加载，也不[支持实现。](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1032400)

```
gaq.push(
['_setAccount', 'UA-XXXXX-1'],
['_trackPageview'],
['_setDomainName', 'example.com'],
['b._setAccount', 'UA-XXXXX-2'],
['b._trackPageview'],
['b._setDomainName', 'example.com'] 
```

# xml - Nmap::Parser，大文件的分段错误

> ID：11609428
> 
> 赞同：17
> 
> 时间：2012-07-23T09:05:49.067
> 
> 标签：xml, perl, cpan, nmap

我想`Nmap::Parser`用来将扫描的 XML 输出转换`nmap`为 CSV 文件，但一开始我就遇到了问题。

解析小型 TCP/UDP 扫描工作正常，但是当我尝试转换一个较大的文件（例如 20 MB）时，尤其是一个所有 65535 个 UDP 端口都打开|过滤的文件时，我遇到了分段错误。

问题似乎是“parsefile”方法。

我在 Linux 和 Mac OS X 上尝试了不同版本的 Perl 5.10/5.14，结果相同。请参阅下面的代码片段。

```
#!/usr/bin/env perl
use strict; use warnings;
use Nmap::Parser;

my $np1 = new Nmap::Parser;
my $xmlin = $ARGV[0];

sub read_file {
    $np1->parsefile($xmlin);
    for my $host ($np1->all_hosts()) {
        for my $port ($host->udp_ports()) {
            print $host->ipv4_addr()." ".$port."\n";

        }   
    }
}

&read_file; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T19:14:35.063

问题的出现是由于 perl 版本 <5.16 中的一个已知错误，如下所述： [http ://www.perlmonks.org/?node_id=955478](http://www.perlmonks.org/?node_id=955478)

将 perl 升级到 5.16 或更高版本将解决此问题。

# javascript - 具有实时格式的 Markdown 编辑器

> ID：11609430
> 
> 赞同：2
> 
> 时间：2012-07-23T09:05:57.117
> 
> 标签：javascript, html, editor, markdown

我想创建一个具有有限所见即所得格式的在线降价编辑器。如果您熟悉[iA Writer](http://www.iawriter.com)，我正在尝试创建一个类似于他们的桌面版本的编辑器。在大多数情况下，它只是一个简单的文本编辑器，但它做了一些我试图复制的时髦的事情。

*   **斜体**，****粗体****，******粗体斜体******自动下划线/粗体
**   缩进 ">" 块引号*   突出“#”标题和“-”列表，使文本左对齐，就像在旧的三孔打孔纸上一样，您可以将文本与红线对齐并将列表编号放在它的左侧。*

 *我对如何实现这一点有一些想法，但我对他们每个人都有一些担忧。

**可编辑的 iFrame**

*   如何突出文本或对其应用 css 类
*   格式化会自动发生，所以我将如何更改文本的选择，重新格式化，然后返回到原始选择位置
*   我听说您可以将另一个页面加载到可编辑的 iFrame 中以执行更高级的功能，但我对此不太熟悉 - 有什么好的资源吗？

**纯 JavaScript**

*   如何在区域中创建闪烁光标，因为我认为我无法在输入或文本区域中执行此操作...
*   可能使每一行成为当我单击它时转换为输入框的 div（类似于标签框在您提出问题时在标签框上的工作方式（尽管不适用于内联格式）

对我如何做这样的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:22:32.183

一个好的开始是查看已经提供 Markdown 编辑器和强大 API 的 Code Mirror (http://codemirror.net/)。

您应该能够在其上添加功能和实时渲染。*

# android - 带有正交相机的 libgdx 视口段

> ID：11609432
> 
> 赞同：1
> 
> 时间：2012-07-23T09:06:01.190
> 
> 标签：android, opengl-es, libgdx

有谁知道，如何将相机视口切割成比屏幕更小的尺寸？例如，如果我想在屏幕顶部显示状态栏，并且只将相机移动到没有此状态栏的区域？问题是相机视口总是被拉伸到全屏。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:27:33.113

通常我这样做的方式是定义两个相机。一个用于 UI，一个用于游戏世界。UI 相机永远不会改变它的位置，只有世界相机移动。

然后在渲染你的 UI 时（假设你正在使用 SpriteBatch）你只需这样做：

```
batch.setProjectionMatrix(gameCamera.combined);

// ... render your game code

batch.setProjectionMatrix(uiCamera.combined);

// ... render ui code 
```

如果通过 camera.update() 更改了相机，请确保按正常方式更新相机

# windows - 如何在 Windows Embedded Compact 7 上安装 .exe 文件？

> ID：11609435
> 
> 赞同：1
> 
> 时间：2012-07-23T09:06:05.500
> 
> 标签：windows, embedded, windows-embedded-compact

我想`.exe`在 Windows Embedded Compact 7 终端中安装一个文件。但是，当我单击该文件时，什么也没有发生。

希望有人可以提供帮助，我是 Windows Embedded Compact 7 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:44:13.687

如果它真的是一个嵌入式紧凑型设备，那么你可能不走运。您所说的应用程序是一个完整的 Windows 应用程序。Windows Embedded Compact 不会运行它。WEC7 与旧的 Windows Mobile 手持设备的关系比 Windows 7 更密切。

你确定它是嵌入式紧凑型而不是嵌入式标准吗？

# iphone - UILocalizedIndexedCollat ion 的 sectionForObject:(id)object collat ionStringSelector:(SEL)selector 方法中 selector 的作用是什么

> ID：11609440
> 
> 赞同：2
> 
> 时间：2012-07-23T09:06:27.367
> 
> 标签：iphone, ios, selector

我是 iOS 开发的初学者，在阅读[本](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/CreateConfigureTableView/CreateConfigureTableView.html#//apple_ref/doc/uid/TP40007451-CH6-SW10)文档（关于使用索引列表配置 TableView 的 iOS 开发人员指南）时，我遇到了这个问题：

```
// Listing 4.7
for (State *theState in statesTemp) {
        NSInteger sect = [theCollation sectionForObject:theState collationStringSelector:@selector(name)];
        theState.sectionNumber = sect;
    } 
```

我无法弄清楚选择器 ( `@selector(name)`) 及其用途，也无法找到带有在选择器中传递的名称的方法，即`name`. 我搜索了示例以找到更好的解释，并遇到了[这个](http://benedictcohen.co.uk/blog/archives/230)示例。

在代码清单中，有一条语句是方法调用：     

```
self.tableData = [self partitionObjects:objects collationStringSelector:@selector(title)]; 
```

现在选择器被调用`title`。我一直没能找到更好的解释，我的问题是这个选择器的目的和这个选择器引用的方法，它应该做什么和返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:08:48.560

# 一般来说

使用`@selector(title:)`您定义将调用哪个方法。

在我的例子中，它会调用

```
- (void) title:(id)someObject {} 
```

注意最后的分号！如果你最后有一个分号，你的方法将有像我上面的参数。

您的代码仅声明`@selector(title)`并将调用不带参数的方法标题，如下所示：

```
- (void)title {} 
```

# 特定于 UILocalizedIndexCollat​​ion

文档状态：

> **选择器**
> 一个选择器，它标识一个方法，该方法返回一个在排序规则中使用的对象的标识字符串。该方法不应该接受任何参数并返回一个 NSString 对象。例如，这可能是对象的名称属性。

所以我建议你像这样实现它

```
self.tableData = [self partitionObjects:objects collationStringSelector:@selector(title)];
 ...
- (NSString *)title {
     NSString *title;
     // some code to fill title with an identifier for your object
     return title;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-16T04:16:17.777

尝试替换`title`为`self`：

```
self.tableData = [self partitionObjects:objects collationStringSelector:@selector(self)]; 
```

为我工作

# javascript - extjs 消息框显示

> ID：11609450
> 
> 赞同：0
> 
> 时间：2012-07-23T09:06:59.217
> 
> 标签：javascript, extjs, messagebox

我在我的应用程序中使用 Extjs 消息框。当消息框出现在屏幕上时，它会出现在其他窗口的下方。如何在其他窗口顶部显示消息框。我正在使用 extjs 版本：3.4.0

这是我的屏幕截图：![在此处输入图像描述](../Images/83451493ae14bca4864079527fb64b3d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:33:07.687

尝试

```
(function () { yourGridWindow.toBack();}).defer(100); 
```

# mongodb - MongoDB提取任何数字但不是0

> ID：11609451
> 
> 赞同：1
> 
> 时间：2012-07-23T09:07:10.710
> 
> 标签：mongodb

我有一个简单的文档，其中包含一系列产品。

```
{
    "products" : [
        {
            "amount" : 0,
            "id" : "9647562"
        }
    ],
} 
```

我想删除数组中数量为 0 的所有对象。我认为这很容易：

```
db.shop.update({}, {"$pull": {"products": {"amount": 0} }}); 
```

这不起作用，但这样做：

```
db.shop.update({}, {"$pull": {"products": {"amount": 2} }}); 
```

所以基本上如果我将数字从 2 更改为 0，它就不再起作用了。如您所见，数量是整数，我也试图将其删除为整数，所以情况并非如此。我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:27:58.483

试试这个 ：

```
db.shop.update({}, {"$pull": {"products": {"amount": 0} }},false,true); 
```

文档摘录[`update`](http://www.mongodb.org/display/DOCS/Updating/#Updating-update%28%29)：

```
db.collection.update( criteria, objNew, upsert, multi ) 
```

所以，在这里你应该有 upsert = false 和 multi = true。原因：您的匹配条件`{}`意味着全部匹配，因此更新语句在匹配第一行后退出，并且不对其执行任何操作，要更改所有匹配行，您需要将标志提供`multi`为 true。

例子：

```
> db.newColl.find()
{ "_id" : ObjectId("500d262db869eab21b7fc6b0"), "products" : [ ] }
{ "_id" : ObjectId("500d2632b869eab21b7fc6b1"), "products" : [ { "amount" : 5, "id" : "9647562" } ] }
> 
> 
> db.newColl.update({},{"$pull": {"products": {"amount": 5 } }});
> db.newColl.find()
{ "_id" : ObjectId("500d262db869eab21b7fc6b0"), "products" : [ ] }
{ "_id" : ObjectId("500d2632b869eab21b7fc6b1"), "products" : [ { "amount" : 5, "id" : "9647562" } ] }
> 
> 
> db.newColl.update({},{"$pull": {"products": {"amount": 5 } }},false,true);
> db.newColl.find()
{ "_id" : ObjectId("500d2622b869eab21b7fc6ae"), "products" : [ ] }
{ "_id" : ObjectId("500d2632b869eab21b7fc6b1"), "products" : [ ] } 
```

# ruby-on-rails-3 - 全新安装 Spree 1.1.1 运行良好，Spree 1.1.2 则不然

> ID：11609454
> 
> 赞同：0
> 
> 时间：2012-07-23T09:07:18.490
> 
> 标签：ruby-on-rails-3, spree

我使用以下步骤安装 Spree 版本 1.1.1，

```
rvm use ruby-1.9.2-p318@my_spree_shop --create
gem install rails -v 3.2.3 --no-ri --no-rdoc
gem install spree -v 1.1.1 --no-ri --no-rdoc
rails new my_spree_shop -d postgresql
cd my_spree_shop
open config/database.yml # modify database settings
rake db:create
spree install # 'Enter'ing all defaults 
```

这可行，但由于存在安全漏洞，管理页面建议使用**1.1.2版本。**对带有 Rails **3.2.6**的 spree **1.1.2**执行相同的步骤，将在最后一步导致以下错误：

 **```
precompiling  assets
/Users/~/.rvm/rubies/ruby-1.9.2-p318/bin/ruby /Users/~/.rvm/gems/ruby-1.9.2-    p318@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
rake aborted!
couldn't find file 'admin/spree_auth'
  (in /Users/~/Development/spree_pixelhobby/app/assets/javascripts/admin/all.js:9) 
```

**Spree 1.1.2**应该做些什么不同的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:55:51.087

发生此问题是因为运行时安装了错误版本的 Spree `bundle install`。

在 Gemfile 中指定正确的依赖项，如下所示：

```
gem 'spree', '1.1.2' 
```

然后`bundle install`再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:39:04.480

好吧，您确实必须将其添加`gem 'spree', '1.1.2'`到您的 Gemfile，但您还必须在 . 之后将其删除`bundle update`，否则您将在`spree install`.

Spree 1.1.2 & Rails 3.2.6 全新安装的所有步骤

```
rvm use ruby-1.9.2-p318@my_spree_shop --create
gem install rails -v 3.2.6 --no-ri --no-rdoc
gem install spree -v 1.1.2 --no-ri --no-rdoc
rails new my_spree_shop -d postgresql
cd my_spree_shop 
```

与安装 Spree 1.1.1 相比增加

```
echo "gem 'spree', '1.1.2'" >> Gemfile  # adding spree to the Gemfile
bundle update
sed -ie '$d' Gemfile # removing the line you just added. 
```

编辑您的数据库配置并创建数据库

```
vi config/database.yml
rake db:create
rake db:create RAILS_ENV=production 
```

最后：

```
spree install 
```**

# ios - ios fwrite 函数 EXC_BAD_ACCESS

> ID：11609457
> 
> 赞同：2
> 
> 时间：2012-07-23T09:07:26.243
> 
> 标签：ios, exc-bad-access, fwrite

我尝试在 iPhone 应用程序中使用 fwrite（C 函数）。

出于自定义原因，我不想使用**writeToFile**而是使用**fwrite** C 函数。

**我在didFinishLaunchingWithOptions**函数中编写了这段代码：

```
 FILE *p = NULL;
  NSString *file= [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Hello.txt"];
  char buffer[80] = "Hello World";
  p = fopen([file UTF8string], "w");
  if (p!=NULL) {
      fwrite(buffer, strlen(buffer), 1, p);
      fclose(p);
  } 
```

但是我在 fwrite 函数中收到错误**EXC_BAD_ACCESS 。**

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:20:25.720

你的问题是你写错了地方。使用 NSString 类中提供的函数要简单得多，它允许您写入文件。进入你的应用沙箱的/Documents文件夹（你的应用沙箱是唯一允许你自由写文件的地方）

```
NSString *stringToWrite =  @"TESTING";
NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/filename.txt"];
[stringToWrite writeToFile:path atomically:YES encoding NSUTF8StringEncoding]; 
```

我认为这是最简单的方法。您可以使用 fwrite 进行相同的操作，您只需使用 cstringUsingEncoding 将路径转换为 ​​cstring，如下所示：

```
NSString *stringToWrite =  @"TESTING";
NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/filename.txt"];
char *pathc =  [path cStringUsingEncoding:NSUTF8StringEncoding];
char *stringToWritec = [stringToWrite cStringUsingEncoding:NSUTF8StringEncoding]; 
```

注意：我几乎可以肯定苹果使用 UTF8 编码作为文件名。如果没有，请尝试 NSASCIIStringEncoding 和 NSISOLatin1StringEncoding。

# mysql - 如何将我的结果命名为其他名称

> ID：11609459
> 
> 赞同：2
> 
> 时间：2012-07-23T09:07:34.777
> 
> 标签：mysql

我在 MYSQL DB 中有这样的查询

```
SELECT date_format( doj, '%d/%m/%Y' ) AS week ,COUNT(user_id) FROm user_tb 
WHERE doj between '2012-01-01' AND '2012-01-31' group BY WEEK(doj)

Result

week    COUNT(user_id)
06/01/2012  3
17/01/2012  2
25/01/2012  3
29/01/2012  1 
```

我怎么能这样命名

```
week    COUNT(user_id)
week1   3
week2   2
week3   3
week4   1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:11:37.027

如果您想从 1 开始对周数进行编号，请执行以下操作：

```
SELECT concat('week', @row := @row + 1) AS week, COUNT(user_id)
from user_tb, (select @row := 0) r
WHERE doj between '2012-01-01' AND '2012-01-31' 
group BY WEEK(doj) 
```

## 编辑

如果您想要一年中的周数，请执行以下操作：

```
SELECT concat('week', week(doj)) AS week, COUNT(user_id)
from user_tb, (select @row := 0) r
WHERE doj between '2012-01-01' AND '2012-01-31' 
group BY WEEK(doj) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:13:45.197

搜索[`WEEK()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)at mysql 站点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:17:48.097

`week()`使用您在 group 语句中使用的相同功能。

```
SELECT CONCAT("week", WEEK(doj)) AS week, COUNT(user_id) 
FROM user_tb 
WHERE doj between '2012-01-01' AND '2012-01-31' 
GROUP BY WEEK(doj) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-23T09:13:57.030

我认为最有效的方法是使用rownum（行号）并将其与“周”连接（不要忘记按周排序，以便行号与周号匹配）。

week 函数将返回一年中的星期数，我认为这不是您要寻找的。

# ruby-on-rails - 如何在 Rails 中获取 cookie 过期时间？

> ID：11609460
> 
> 赞同：3
> 
> 时间：2012-07-23T09:07:36.423
> 
> 标签：ruby-on-rails, cookies, set

我在这里读到： [获取 cookie 过期时间](https://stackoverflow.com/questions/2839732/get-cookie-expiration)

只有名称和值被发送到服务器，因此没有其他 cookie 数据可用。

那意味着没有办法获取cookie的过期日期？所以我必须将该日期保存在我的数据库中，如果我以后需要它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T09:19:48.250

没错，只返回*cookie-name*和*cookie-value*。

这不是 Rails 或 PHP 的缺点，它在[RFC 6265](https://www.rfc-editor.org/rfc/rfc6265#section-4.2.2)中是这样定义的：

> 请注意，不会返回 cookie 属性。特别是，服务器无法仅根据 Cookie 标头确定 cookie 何时过期、cookie 对哪些主机有效、cookie 对哪些路径有效，或者 cookie 是否设置了 Secure 或 HttpOnly 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T08:51:11.620

虽然公认的答案是正确的，但我来到这里是因为我想确保我的应用程序设置一个*永久*cookie（过期日期在很远的将来），而不是一个普通的。

如果您想验证是否是这种情况（并且您不关心确切的到期日期），您可以设置这样的期望（示例使用[Mocha](https://github.com/freerange/mocha) gem）：

```
ActionDispatch::Cookies::PermanentCookieJar.any_instance.expects(:[]=).with(:key, "value").once 
```

这种期望将通过一次调用而通过，`cookies.permanent[:key] = "value"`但将失败 for `cookies[:key] = "value"`。

它也适用于签名的 cookie ( `cookies.permanent.signed[:key] = "value"`)。但是，请注意，签名的 cookie 将根据您的应用程序对其值进行加密`secret_key_base`，因此您必须将期望调整为类似

```
ActionDispatch::Cookies::PermanentCookieJar.any_instance.expects(:[]=).with(:key, anything).once 
```

反而。

# jquery - Jquery 将正确的用户控件文本框值设置为 0

> ID：11609466
> 
> 赞同：0
> 
> 时间：2012-07-23T09:08:09.080
> 
> 标签：jquery, asp.net, user-controls

我在使用 jquery 访问用户控件中的文本框时遇到了一点问题。

在我的页面上，我有一个网格控件，在第 28、29、30 行，我使用相同的用户控件填充单元格。这是因为用户控件用于输入百分比，并且在一列中三个值不能超过 100%。

因此，如果确实发生这种情况，我想将正确的文本框值设置为 0 或更改颜色，即三个数字超过 100% 的列。我的问题是我无法使用 jquery 访问文本框。

**Javascript**

```
function percentageCheck(objNetMarginUnitsSoldFullPrice, objNetMarginUnitsSoldMarkdown,  objNetMarginGoodsUnsold) { // pass objects with values
    var percentageCntr = new Array();
    cntrString = '';

    for (var i = 1; i < 15; i++) { // 14 cells in row. Ignore cell 0

        if (i < 11) { // less than logic to build control IDs
            ctrlString = '_ctl0';
        } else {
            ctrlString = '_ctl';
        }

        percentageCntr[0] = objNetMarginUnitsSoldFullPrice[i];
        percentageCntr[1] = objNetMarginUnitsSoldMarkdown[i];
        percentageCntr[2] = objNetMarginGoodsUnsold[i];

        var total = percentageCntr[0] + percentageCntr[1] + percentageCntr[2];

        var result = 0;

        if(total > 100) {
            alert("Cannot exceed 100%");

            alert(i); // See correct int value

//              $('#ctl00_PageContent_freight_rate_column_chaair_r28_ctl10_txtPercentage').val(result); Works!

            $('#ctl00_PageContent_freight_rate_column_chaair_r' + 28 + ctrlString + i + '_txtPercentage').css('backgroundColor', '#EC3434');
            $('#ctl00_PageContent_freight_rate_column_chaair_r' + 29 + ctrlString + i + '_txtPercentage').css('backgroundColor', '#EC3434');
            $('#ctl00_PageContent_freight_rate_column_chaair_r' + 30 + ctrlString + i + '_txtPercentage').css('backgroundColor', '#EC3434');
        }  
    }
} 
```

我已经硬编码了一个可以工作的 jquery 选择器，但是当我连接整个 jquery 选择器时它不起作用。我也知道有一种使用 jquery 访问用户控件的正确方法，但我不确定它是否可以在这里工作。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:17:21.247

您用于设置背景颜色的 jquery 是正确的

问题可能如下——

```
if (i < 11) { // less than logic to build control IDs
            ctrlString = '_ctl0';
        } else {
            ctrlString = '_ctl';
        } 
```

如果 i = 1 你会得到`_ctl01`并且不认为你可以控制 01 索引的原因

# objective-c - 如何添加像照片应用程序这样的动画

> ID：11609471
> 
> 赞同：1
> 
> 时间：2012-07-23T09:08:24.697
> 
> 标签：objective-c, ios

我想在照片应用程序中添加动画 beetwen 视图。我从以下网址下载了示例代码：[https ://developer.apple.com/library/ios/#samplecode/ViewTransitions/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/ViewTransitions/Introduction/Intro.html)

而且我知道有一种动画类型：

```
UIViewAnimationOptionTransitionNone            ,
UIViewAnimationOptionTransitionFlipFromLeft    ,
UIViewAnimationOptionTransitionFlipFromRight   ,
UIViewAnimationOptionTransitionCurlUp          ,
UIViewAnimationOptionTransitionCurlDown        ,
UIViewAnimationOptionTransitionCrossDissolve   ,
UIViewAnimationOptionTransitionFlipFromTop     ,
UIViewAnimationOptionTransitionFlipFromBottom  , 
```

但是如果我想在从左/右滑动时添加效果，我的屏幕会像在照片应用程序中一样进入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:15:23.103

照片应用程序不使用多个屏幕来显示照片，只有一个`ViewController`，其中包含一个`UIScrollView`. 并且在滚动视图中，`UIImageView`添加了许多 s（并且`pagination`属性设置为`YES`），因此当用户用手指滑动时，它会看到与照片一起出现的不同视图。

[在这里](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)，您将找到有关如何精确实现此效果的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:51:42.647

这段代码是可重用的，并带有你需要的所有功能，在以前的项目中使用过，非常好。链接： http: [//www.cocoacontrols.com/platforms/ios/controls/fgallery](http://www.cocoacontrols.com/platforms/ios/controls/fgallery)

# mysql - MySQL 总是将 BIT 值返回为空白

> ID：11609474
> 
> 赞同：42
> 
> 时间：2012-07-23T09:08:40.533
> 
> 标签：mysql, sqldatatypes

在我的创建表脚本中，我将 hasMultipleColors 字段定义为 BIT：

```
hasMultipleColors BIT NOT NULL, 
```

运行 INSERT 时，不会针对此或其他 BIT 字段引发警告，但选择行显示所有 BIT 值都是空白的。

手动尝试从命令行更新这些记录会产生奇怪的效果 - 表明记录已匹配并已更改（如果合适），但仍始终显示空白。

服务器版本：5.5.24-0ubuntu0.12.04.1（Ubuntu）

```
mysql> update pumps set hasMultipleColors = 1 where id = 1;
Query OK, 0 rows affected (0.00 sec)
Rows matched: 1  Changed: 0  Warnings: 0

mysql> select hasMultipleColors from pumps where id = 1;
+-------------------+
| hasMultipleColors |
+-------------------+
|                  |
+-------------------+
1 row in set (0.00 sec)

mysql> update pumps set hasMultipleColors = b'0' where id = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select hasMultipleColors from pumps where id = 1;
+-------------------+
| hasMultipleColors |
+-------------------+
|                   |
+-------------------+
1 row in set (0.00 sec) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-23T09:17:21.227

您需要将位字段转换为整数。

```
mysql> select hasMultipleColors+0 from pumps where id = 1; 
```

这是因为一个错误，请参阅：[http](http://bugs.mysql.com/bug.php?id=43670) ://bugs.mysql.com/bug.php?id=43670 。状态显示：不会修复。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-12-11T06:23:27.850

您可以将 BIT 字段转换为无符号。

```
 SELECT CAST(hasMultipleColors AS UNSIGNED) AS hasMultipleColors 
  FROM pumps 
  WHERE id = 1 
```

它将根据 的值返回 1 或 0 `hasMultipleColors`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-23T09:11:52.020

您需要执行转换，因为`bit 1`不可打印。

`SELECT hasMultipleColors+0 from pumps where id = 1;`

在这里查看更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/bit-field-literals.html](http://dev.mysql.com/doc/refman/5.0/en/bit-field-literals.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T06:16:34.280

您看到效果的实际原因是它按预期正确完成。

该`bit`字段具有位，因此返回位，并且尝试将单个位作为字符输出将显示具有给定位值的字符 - 在这种情况下是零宽度控制字符。

一些软件可能会自动处理这个问题，但对于命令行 MySQL，您必须以某种方式将其转换为 int（例如，通过添加零）。

在像 PHP 这样的语言中，字符的序数值将使用该`ord()`函数为您提供正确的值（尽管要真正正确，它必须从十进制转换为二进制字符串，才能用于长度超过一个字符的位字段）。

**编辑：**
发现一个很老的消息来源说它发生了变化，因此 MySQL 升级可能会使一切按预期工作：http: [//gphemsley.wordpress.com/2010/02/08/php-mysql-and-the-bit-字段类型/](http://gphemsley.wordpress.com/2010/02/08/php-mysql-and-the-bit-field-type/)

# hadoop - 使用 hive 自定义输出格式处理日志文件

> ID：11609476
> 
> 赞同：0
> 
> 时间：2012-07-23T09:08:44.957
> 
> 标签：hadoop, hive, output-formatting

我想使用 hive 版本 0.7.0 处理日志文件，并设置自定义输入格式和输出格式。在输入格式中，我将“\n”替换为“@#@”，在输出格式中我想改回“\n”。经过测试，我的 inputformat 表现良好，但我的 outputformat 不起作用。我想知道为什么。这是代码。谢谢！

```
公共类 ErrlogOutputFormat，V 扩展可写>
    扩展 HiveIgnoreKeyTextOutputFormat {

    公共静态类 CustomRecordWriter 实现 RecordWriter{

        RecordWriter 作家；
        BytesWritable bytesWritable;

        公共CustomRecordWriter（RecordWriter作家）{
            this.writer = 作家；
            bytesWritable = new BytesWritable();
        }

        @覆盖
        公共无效写入（可写 w）抛出 IOException {
            //String str = ((Text) w).toString().replaceAll("@#@","\n");
            String[] str = ((Text) w).toString().split("@#@");
            StringBuffer sb = new StringBuffer();
            for(字符串 s:str){
                sb.append(s).append("\n");
            }
            文本 txtReplace = new Text(sb.toString());
            System.out.println("------------------------");
            System.out.println(txtReplace.toString());
            System.out.println("------------------------");

            // 获取输入数据
            // 编码
            字节[] 输出 = txtReplace.getBytes();

            bytesWritable.set(output, 0, output.length);

            writer.write(bytesWritable);
        }

        @覆盖
        公共无效关闭（布尔中止）抛出 IOException {
            writer.close（中止）；
        }

    }

    @覆盖
    公共 RecordWriter getHiveRecordWriter(JobConf jc, 路径 finalOutPath,
            类 valueClass, boolean isCompressed,
            属性表Properties，Progressable progress）
            抛出 IOException {

        CustomRecordWriter writer = new CustomRecordWriter(super
                .getHiveRecordWriter(jc, finalOutPath, BytesWritable.class,
                        isCompressed，tableProperties，进度））；

        返回作家；
    }
}
```

# android - Android 下载管理器限制

> ID：11609478
> 
> 赞同：0
> 
> 时间：2012-07-23T09:08:58.830
> 
> 标签：android, zip, download

我需要在android中下载一个zip格式的文件，就像他给定的URL一样，所以请建议如何通过android下载它

[https://flyppdeveloper.com/downloadableFiles/FlyppIconGuidelines.zip](https://flyppdeveloper.com/downloadableFiles/FlyppIconGuidelines.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:33:14.360

```
if (enqueue == 0) {
        Request request = new Request(
                Uri.parse("http://o-o.preferred.del01s04.v7.nonxt1.c.bigcache.googleapis.com/androiddevelopers/shareables/icon_templates-v2.0.zip?ms=nxu&mt=1342508167&cms_redirect=yes&redirect_counter=1"));
        **request.setMimeType("application/zip");**
        enqueue = mDownloadManager.enqueue(request);
    } 
```

只需要声明我缺少的 MIME 类型，因此它正在下载任意 html

# windows - 如何获得没有任何窗口或任务栏的桌面打印屏幕？

> ID：11609480
> 
> 赞同：0
> 
> 时间：2012-07-23T09:09:02.340
> 
> 标签：windows, winforms

我的应用程序是一个 Windows 窗体。

我尝试使用 windows 壁纸，但这取决于“填充”、“拉伸”、“适合”或“平铺”设置。我只需要桌面上的图像，但包括任务栏“下方”的部分，因为在透明任务栏的情况下这部分是可见的。

为什么我需要这个？因为我有一个托盘应用程序，它在打开时会从任务栏下方滑动。而且我需要在那里设置一个遮罩，所以在它到达任务栏的顶部之前看不到它的滑动。同样，这只是任务栏透明时的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:05:19.943

我不确定我是否正确理解了您的问题。但对我来说，您似乎需要创建壁纸的图像。如果看起来更容易，请查看以下位置的注册表项：

```
HKEY_CURRENT_USER\Control Panel\Desktop 
```

这将为您提供墙纸的路径、大小、平铺/无平铺等信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:56:50.120

您可以尝试一个名为[PaintDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162758%28v=vs.85%29.aspx)的 Win32 函数，但除非我误解了您应该能够调整窗口的高度，因此它永远不会真正位于任务栏后面...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T11:00:12.923

> 为什么我需要这个？因为我有一个托盘应用程序，它在打开时会从任务栏下方滑动。而且我需要在那里设置一个遮罩，所以在它到达任务栏的顶部之前看不到它的滑动。同样，这只是任务栏透明时的问题。

这里的问题是您从*整个屏幕的底部*开始向上滑动，而不是从*屏幕工作区域的底部*（即任务栏的顶部）开始。这就是为什么您会看到弹出窗口在透明任务栏后面向上滑动。

幸运的是，该解决方案比获取桌面背景和/或进行任何类型的遮罩要简单得多。它也*快得多*，而且你的眼睛糖果不会对用户的计算机造成不必要的负担，这总是好的。

你只需要确定屏幕工作区域的坐标，Windows定义为应用程序可以使用的区域，不包括任务栏和其他侧边栏。[`Screen.PrimaryScreen.WorkingArea`您可以通过查询属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.workingarea)在 WinForms 中轻松获取此信息。这将返回`Rectangle`与主屏幕的工作区域相对应的 a。由于您知道任务栏始终显示在主屏幕上，这正是您想要的。

获得主屏幕工作区域的坐标后，从底部开始弹出窗口的幻灯片。^*

这是一个很好的教训，为什么你应该*总是*解释你为什么要完成某事。通常有一个更好的方法是你没有想到的。

*[当然，我忽略了用户可能没有将他们的任务栏放在屏幕*底部的事实。*你可以把它放在两边，甚至放在上面。在我看来，您的问题中也没有考虑到这一点。如果这是您仅为自己编写的应用程序，或者是为受控环境编写的应用程序，您可以确保没有人将任务栏置于非默认位置，那可能没问题。但是，如果您正在编写软件以分发给更广泛的受众，您将需要考虑到这一点。当然，无论任务栏位于何处，`rcWork`坐标都是正确的，但您需要知道是从底部、左侧、右侧还是顶部开始滑动弹出窗口。]

# mfc - 如何动态更改 CRichEidt 对象的样式？

> ID：11609484
> 
> 赞同：0
> 
> 时间：2012-07-23T09:09:21.263
> 
> 标签：mfc, cricheditctrl

现在我创建了一个 CRichEdit 对象，它处于单行模式，如果我想将其更改为多行样式，我想做所有这些以响应 ctrl 消息，例如有人按下一个按钮。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:52:36.427

GetWindowLong()/SetWindowLong() 组合可能吗？不确定更改此特定样式是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T22:46:01.760

使用[ModifyStyle](http://msdn.microsoft.com/en-us/library/0xhz2t1c%28v=vs.71%29)：

```
richedit.ModifyStyle(0, ES_MULTILINE); // Adds multi-line style
richedit.ModifyStyle(ES_MULTILINE, 0); // Removes multi-line style 
```

如果它不起作用，请考虑添加`SWP_FRAMECHANGED`为第三个参数。

# asp.net - 以编程方式创建的用户控件上的 RadAjaxManagerProxy

> ID：11609486
> 
> 赞同：0
> 
> 时间：2012-07-23T09:09:28.380
> 
> 标签：asp.net, vb.net, telerik, radajaxloadingpanel

**情况：**

我创建了一个自定义 webusercontrol。用户控件完全用代码创建。

它由 radgrid 和 radcombox 组成。

radcombox 填充了数据库表，当用户选择表时，数据
需要显示在 radgrid 中。

此用户控件被添加到一个 aspx 页面。一切都很完美。

**问题来了：**

我希望使用 radajaxmanagerproxy 控件在 radgrid 重新绑定时显示 radajaxloadingpanel。在我**点击****刷新**按钮或**radgrid的****下一页**或**上一页**之前，这**不起作用**。然后一切**正常**。

 ******我知道组合框有效，因为数据确实改变了，只有加载面板没有显示。

有没有人知道如何解决这个问题，解决方法或我可以研究的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:21:10.580

终于让它工作了。我在创作生活cicle中做错了：

现在我有这样的。它有效；）

```
 public class CustumControl
     implements CompositeControl

     Private RadAjaxLoadingPanel1 As New RadAjaxLoadingPanel
     Private RadAjaxManagerProxy1 As New RadAjaxManagerProxy
      ....
      Protected Sub Control_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
          Me.Controls.Add(RadAjaxLoadingPanel1)
          Me.Controls.Add(RadAjaxManagerProxy1)

          With RadAjaxManagerProxy1.AjaxSettings  
               .AddAjaxSetting(...) 
          End with 
      End Sub
      ....

      Protected Overrides Sub CreateChildControls()
        'Set properties controls and add themwill
      End Sub
   end class 
```

希望这会帮助其他有类似问题的人。

grtz 尤里******

# c++ - 结构读取 C++

> ID：11609494
> 
> 赞同：-2
> 
> 时间：2012-07-23T09:09:51.347
> 
> 标签：c++, configuration

我有以下问题：我有一个包含字段描述的配置文件，我读取它然后解析它。我想把它移到代码里面编译它。作为错误结构，您将如何做到这一点？？？要不然 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:27:39.930

我不会将它移动到代码中，我会将配置文件保留为配置文件。

如果您真的必须这样做，您可以将文件作为字符串资源嵌入到应用程序中并使用它 - 这样您只需更改最少量的现有代码。您执行此操作的方式取决于您的平台。

如果那不可行（无论出于何种原因），我会设置一个配置类/命名空间来包含所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:25:44.807

目前还不是很清楚你到底在问什么。

如果您正在寻找即时代码执行（如`eval()`某些语言中的函数），那么 C++ 中没有这样的东西。它不是一种可以逐行读取和执行的解释性语言，每次代码更改时都需要对其进行编译。虽然在技术上可以编写自更改代码，但可能不值得付出努力。

# ios - 通过 ibtool 生成字符串时如何使 UILabel 内容不可本地化？

> ID：11609495
> 
> 赞同：6
> 
> 时间：2012-07-23T09:09:50.827
> 
> 标签：ios, localization, interface-builder, xib

我的xib上有一些标签。其中一些不需要本地化。当我通过 ibtool 生成字符串文件时，结果文件中包含所有标签内容。生成字符串时如何从本地化中排除 IB 中的一些 UI 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:30:07.260

不幸的是，无法注释 nib/xib 文件的内容，因此 ibtool 的`--export-strings-file`命令会忽略某些字符串。

您可以改为选择使用该`--export-xliff`选项，然后编辑 XLIFF 文件以锁定不能翻译的句段（属性`translate="no"`），然后再将它们发送出去，以便以您的所有语言进行本地化。不过，这可能只有在本地化人员使用与 XLIFF 兼容的 CAT 工具时才值得这样做。

# ios - iOS命令行工具将jpeg转换为png？

> ID：11609496
> 
> 赞同：0
> 
> 时间：2012-07-23T09:09:59.160
> 
> 标签：ios

我正在寻找一种命令行工具，用于在我的 bash 脚本中将 jpg 图像转换为 png 图像。谢谢！

编辑：需要明确的是，脚本运行的平台是 iOS。所以我正在寻找为 ARM 平台编译的二进制文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:15:32.020

既然您提到了 iOS，我假设您使用的是 Mac OSX。[如果是这样，您可以通过Homebrew](https://mxcl.dev/homebrew/)或[MacPorts](https://www.imagemagick.org/script/download.php#macosx)安装 ImageMagick，并在脚本中使用以下命令

```
convert my_image.jpg my_image.png 
```

ImageMagick 是处理各种图像的强大工具。如果您想更高级一点，请查看[文档](https://www.imagemagick.org/script/command-line-processing.php)

# java - 线程完成时是否发出通知？为什么此代码示例有效？

> ID：11609501
> 
> 赞同：15
> 
> 时间：2012-07-23T09:10:09.620
> 
> 标签：java, multithreading, concurrency, wait, notify

我正在寻找线程的一些谜题，但我无法弄清楚为什么以下内容始终打印`999999`：

```
class Job extends Thread {  
    private Integer number = 0;  
    public void run() {  
        for (int i = 1; i < 1000000; i++) {  
            number++;  
        }  
    }  
    public Integer getNumber() {  
        return number;  
    }  
}  
public class Test {  
    public static void main(String[] args)   
    throws InterruptedException {  
        Job thread = new Job();  
        thread.start(); 
        synchronized (thread) {  
            thread.wait();  
        }  
        System.out.println(thread.getNumber());  
    }  
} 
```

同一个锁上没有`notify`（并且虚假唤醒似乎被忽略了）。
如果线程完成，是否会发出通知或其他信号？
为什么`main`打印结果而不是“卡住”等待？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T09:33:34.483

在 Java 7 [Thread.join(long)的 Javadoc 中](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28long%29)

> 此实现使用以 this.isAlive 为条件的 this.wait 调用循环。当线程终止时，将调用 this.notifyAll 方法。建议应用程序不要在 Thread 实例上使用 wait、notify 或 notifyAll。

以这种方式直接使用线程被认为是不实用的。注意：wait() 可能因多种原因而结束，可能是虚假的。

* * *

基于与@Voo 评论相关的谜题。关键是您不应该玩弄 Thread 的内部行为，因为这更有可能导致混乱。

```
public static String getName() {
    return "MyProgram";
}
public static void main(String... args) {
    new Thread() {
       public void run() {
           System.out.println("My program is " + getName());
        }
    }.start();
} 
```

这个程序打印什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:14:35.003

为了澄清起见，我已将您的代码修改为：

```
Job thread = new Job();
thread.start();
final Object lock = new Object();
synchronized (lock) { lock.wait(); }
System.out.println(thread.getNumber()); 
```

现在它阻塞了。这是对@Nitram 在他的回答中解释的内容的第一手确认。如果您[想看看](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Thread.java#1159)实现代码，`Thread`很明显为什么这是观察到的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T09:28:57.403

**注意：**此答案已被广泛编辑。

* * *

这种行为的原因是，“某人”在`notifyAll`内部调用。这个“某人”是 JVM 本身，您可以在此处的 C 源代码中“看到”：

[http://hg.openjdk.java.net/jdk7/hotspot/hotspot/file/f95d63e2154a/src/share/vm/runtime/thread.cpp](http://hg.openjdk.java.net/jdk7/hotspot/hotspot/file/f95d63e2154a/src/share/vm/runtime/thread.cpp)

在第 1531 行，该方法`ensure_join`调用`notifyAll`. `wait`这是调用的对应物`java.lang.Thread#join`（如 Marko 和其他人所指出的）。

`ensure_join`依次在方法的第 1664 行调用`JavaThread::exit`。

* * *

由于这是“内部簿记”，因此没有人应该依赖这种行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-23T09:20:50.133

简单地说，`Thread`一旦线程执行结束，就会通知所有等待的线程。它不是建议的为什么要这样做，但它有效。要在线程结束时同步，请使用`Thread.join`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T09:17:18.907

当线程完成时会自动通知线程对象，这就是主线程不会卡住的原因。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-23T09:16:43.133

嗯....notify 用于提前通知等待锁定对象的线程。如果您不使用 Notify ，那么当它完成时肯定会释放锁定。

```
So that is equivalent to notify 
```

不，不是……考虑下面的情况。

```
class Job extends Thread {  
    private Integer number = 0;  
    public void run() {

       synchronized(this) {
       for (int i = 1; i < 1000000; i++) {  
            number++;  
        }  
        notify();     //releases lock here and your main thread continues
        do sumthing...
        do sumthing...
        }  
    }
    public Integer getNumber() {  
        return number;  
    }  
} 
```

如果你不使用 notify() ...锁只会在你做完所有事情后释放..

# android - Android以编程方式设置文本样式

> ID：11609510
> 
> 赞同：2
> 
> 时间：2012-07-23T09:11:10.040
> 
> 标签：android

我需要访问以下内容 -

```
android:textStyle(of a digital clock control) 
```

以编程方式，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T09:12:50.017

采用[`setTypeface(typeface, style)`](http://developer.android.com/reference/android/widget/TextView.html#setTypeface%28android.graphics.Typeface,%20int%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:26:59.730

对于文本视图：

```
TextView tv = (TextView) findViewById(R.id.tv); 
```

设置字体`tv.setTypeface(tf);`

要获取当前字体集，请使用`tv.getTypeface();`

# blackberry - 如何检测字段是否被触摸或单击？

> ID：11609516
> 
> 赞同：0
> 
> 时间：2012-07-23T09:11:29.403
> 
> 标签：blackberry, touch-event

我重写了这样的方法。

```
 newsbtn = new Custom_ButtonField(news, newsactive, newsactive) {
            protected boolean navigationClick(int status, int time) {
                Main.getUiApplication().pushScreen(
                        new Menu_PopupMenu(position));
                return true;
            }

            protected boolean touchEvent(TouchEvent message) {
                int eventCode = message.getEvent();
                if (eventCode == TouchEvent.UNCLICK){
                    Main.getUiApplication().pushScreen(
                            new Menu_PopupMenu(position));
                }
                return true;
            }
        };

        add(newsbtn); 
```

这里是`Custom_ButtonField`

```
public class Custom_ButtonField extends ButtonField {
Bitmap mNormal;
Bitmap mFocused;
Bitmap mActive;

int mWidth;
int mHeight;

private int color = -1;
String text;

public Custom_ButtonField(Bitmap normal, Bitmap focused, Bitmap active) {
    super(CONSUME_CLICK | Field.FOCUSABLE | Field.FIELD_HCENTER
            | Field.FIELD_VCENTER);
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
}

public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color) {
    super(CONSUME_CLICK | Field.FOCUSABLE | Field.FIELD_HCENTER
            | Field.FIELD_VCENTER);
    this.color = color;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    this.text = text;
}

public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color, long style) {
    super(style);
    this.color = color;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    this.text = text;
}

public void setText(String text){
    this.text = text;
    invalidate();
}

public String getText(){
    return text;
}

public void setColor(int color){
    this.color = color;
}

protected void onFocus(int direction) {     
    super.onFocus(direction);
    color = 0x540604;
    this.invalidate();
}

protected void onUnfocus() {
    super.onUnfocus();
    color = Color.WHITE;
    this.invalidate();
}

protected void paint(Graphics graphics) {
    int fontcontent;
    if (Display.getWidth() > 480)
        fontcontent = 28;
    else if (Display.getWidth() < 481 && Display.getWidth() > 320)
        fontcontent = 23;
    else
        fontcontent = 18;

    Bitmap bitmap = null;
    switch (getVisualState()) {
    case VISUAL_STATE_NORMAL:
        bitmap = mNormal;
        break;
    case VISUAL_STATE_FOCUS:
        bitmap = mFocused;
        break;
    case VISUAL_STATE_ACTIVE:
        bitmap = mActive;
        break;
    default:
        bitmap = mNormal;
    }
    setBackground(BackgroundFactory.createBitmapBackground(bitmap));
    graphics.setFont(Font.getDefault().derive(Font.PLAIN, fontcontent));
    graphics.setColor(color);
    graphics.drawText(text, (mNormal.getWidth() - Font.getDefault()
            .getAdvance(text)) / 2, ((mNormal.getHeight() - Font
            .getDefault().getHeight()) / 2) + 10, DrawStyle.HCENTER
            | DrawStyle.VCENTER);
}

public int getPreferredWidth() {
    return mWidth;
}

public int getPreferredHeight() {
    return mHeight;
}

protected void layout(int width, int height) {
    setExtent(mWidth, mHeight);
}
} 
```

但是，按钮无法执行推屏，只能`setfocus()`在按钮上执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:19:03.277

您不必使用`CONSUME_CLICK`构造函数字段，只需**获得**点击。**这决定了该字段**是否使用点击事件，或者让它们传播到其他类来处理。但是，发帖人的代码已经`true`在他的两个点击处理方法中返回，这也意味着*“我已经处理了这个点击......不要费心将它传递给其他`Field`类”*。 [在此处查看更多信息](http://supportforums.blackberry.com/t5/Java-Development/ButtonField-CONSUME-CLICK-what-is-it-for/td-p/190434)

正如艾伦在评论中所说，他已经在使用`CONSUME_CLICK`，所以这绝对不是问题。

如果该`Custom_ButtonField`课程与[您在此处发布](https://stackoverflow.com/questions/11553286/ambiguous-of-the-custom-buttonfield)的课程相同，那么当我使用您的代码时，我就能很好地获得点击。但是，我可以看到一个潜在的问题。您没有显示您的 Java 导入。您的`TouchEvent`导入看起来像这样吗？

```
import net.rim.device.api.ui.TouchEvent; 
```

在 BlackBerry 框架中实际上还有另一个`TouchEvent`类，如果您使用了错误的类，那么您创建的方法实际上并没有覆盖基类`touchEvent()`。使用 Eclipse 快捷方式来输入您的导入很容易，但也有可能输入错误。

但是，我认为如果您这样做，Eclipse 应该会显示一个警告，即`touchEvent()`永远不会调用不正确的版本。

**编辑：**顺便说一句，我通常在事件上触发我的点击处理代码`TouchEvent.UNCLICK`，而不是在`TouchEvent.CLICK`. 我认为这会带来更好的 UI。在用户的手指被抬起之前，点击不会注册。但是，这是一件小事，并不是造成这个问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:06:47.747

您的 Custom_ButtonField 的父级是什么？

如果是buttonField，则要在构造函数中设置属性CONSUME_CLICK

# android - 在android原生项目中使用ffmpeg库

> ID：11609519
> 
> 赞同：2
> 
> 时间：2012-07-23T09:11:46.470
> 
> 标签：android, android-ndk, ffmpeg

在我的原生 android 项目中，我需要减小视频文件的大小。

我已经为 android 构建了 ffmpeg 库。

如何在我的项目中初始化 ffmpeg 库以及如何减小视频大小而不在 android 命令行中调用 ffmpeg。

提前致谢！

# sql - 使用 Google BigQuery 在 SQL 中订购日期 (dd-mm-yyyy)

> ID：11609524
> 
> 赞同：0
> 
> 时间：2012-07-23T09:11:56.867
> 
> 标签：google-bigquery, sql, google-bigquery

我有一个返回*日期*、*值*和*类别*的查询：

```
SELECT Date, Value, Category FROM MyTable 
```

**输出：**

```
2011 年 12 月 18 日 || 6 || 玩具   
2012 年 4 月 1 日 || -4 || 狗项圈
2012 年 5 月 31 日 || 4 || 猫
2011 年 12 月 17 日 || 3 || 健康与卫生    
2011 年 12 月 12 日 || 3 || 旅行和培训   

```

当我添加`Order By Date ASC`它时，它会根据***日期***而不是年份将日期按升序排列。

我希望它看起来像这样：

```
2011 年 12 月 12 日 || 3 || 旅行和培训
2011 年 12 月 17 日 || 3 || 健康与卫生
2011 年 12 月 18 日 || 6 || 玩具
2012 年 4 月 1 日 || -4 || 狗
2012 年 5 月 31 日 || 4 || 猫

```

**注意：** `Date`是类型`string`。我正在使用[![](../Images/f2f8cfd686e9359161260b5bb42c0c5e.png)google-bigquery](/questions/tagged/google-bigquery "显示标记为“google-bigquery”的问题")。

如何先按升序获取年份，然后是月份，然后是日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T20:06:50.920

**更新**：正如下面的 FH 所说，“BigQuery 现在有一个时间戳类型：developers.google.com/bigquery/timestamp”

~~BigQuery 目前没有 Date 或 DateTime 数据类型。~~您还可以将 BigQuery 中的日期戳存储为[POSIX（UNIX 纪元）日期格式的整数，并可以使用](http://en.wikipedia.org/wiki/Unix_time)[FORMAT_UTC_USEC 函数](https://developers.google.com/bigquery/docs/query-reference#timestampfunctions)将它们转换为人类可读的时间。

另一种方法是将日期戳存储为`YYYY-MM-DD HH:MM:SS.uuuuuu`格式中的字符串，使用 PARSE_UTC_USEC() 函数在您的有序查询中转换它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:14:59.280

将日期转换为日期格式 ISO 9000 样式 yyyy-mm-dd 然后对其进行排序（如果您想保留其他日期格式以用于渲染目的，可能在新的单独列中）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-23T09:15:42.667

SQL 服务器，MySQL

```
Order By CAST(Date AS DATETIME) ASC 
```

甲骨文

```
Order By TO_DATE(Date,'DD-Mon-YYYY') ASC 
```

# gdata-api - 为什么我没有这个网址的视频信息

> ID：11609525
> 
> 赞同：0
> 
> 时间：2012-07-23T09:11:57.463
> 
> 标签：gdata-api, youtube.net-api

[https://gdata.youtube.com/feeds/api/playlists/DC4048825BC38BD7?v=2&start-index=3&max-results=1](https://gdata.youtube.com/feeds/api/playlists/DC4048825BC38BD7?v=2&start-index=3&max-results=1) 我没有这个网址的视频信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:15:21.357

我在该 XML 中看到的最接近的内容是 feed/media:group/media:content 元素，它引用了[http://www.youtube.com/p/DC4048825BC38BD7](http://www.youtube.com/p/DC4048825BC38BD7)，这是所需的（？）闪存视频。

# php - 打破嵌套循环

> ID：11609532
> 
> 赞同：78
> 
> 时间：2012-07-23T09:12:32.963
> 
> 标签：php, loops, nested-loops

我遇到了嵌套循环的问题。我有多个帖子，每个帖子都有多个图像。

我想从所有帖子中获得总共 5 张图片。所以我使用嵌套循环来获取图像，并希望在数量达到 5 时打破循环。以下代码将返回图像，但似乎没有打破循环。

```
foreach($query->posts as $post){
        if ($images = get_children(array(
                    'post_parent' => $post->ID,
                    'post_type' => 'attachment',
                    'post_mime_type' => 'image'))
            ){              
                $i = 0;
                foreach( $images as $image ) {
                    ..
                    //break the loop?
                    if (++$i == 5) break;
                }               
            }
} 
```

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-07-23T09:14:13.573

与 C/C++ 等其他语言不同，在 PHP 中，您可以使用 break 的可选参数，如下所示：

```
break 2; 
```

在这种情况下，如果您有两个循环：

```
while(...) {
   while(...) {
      // do
      // something

      break 2; // skip both
   }
} 
```

`break 2`将跳过两个 while 循环。

文档： http: [//php.net/manual/en/control-structures.break.php](http://php.net/manual/en/control-structures.break.php)

这使得跳过嵌套循环比使用`goto`其他语言更具可读性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T10:01:20.910

使用 while 循环

```
<?php 
$count = $i = 0;
while ($count<5 && $query->posts[$i]) {
    $j = 0;
    $post = $query->posts[$i++];
    if ($images = get_children(array(
                    'post_parent' => $post->ID,
                    'post_type' => 'attachment',
                    'post_mime_type' => 'image'))
            ){              
              while ($count < 5 && $images[$j]) { 
                $count++; 
                $image = $images[$j++];
                    ..
                }               
            }
}
?> 
```

# wpf - 一个控件上的 mousedown 和另一个控件上的 mousemove

> ID：11609534
> 
> 赞同：0
> 
> 时间：2012-07-23T09:12:41.780
> 
> 标签：wpf, custom-controls, mouseevent, creation

我想创建一个小图表工具，但我遇到了鼠标问题。

我有 2 个自定义控件，一个用于节点，一个用于边缘箭头。

Node 自定义控件是放置在网格上的边框。我可以拖动我的节点单击边框部分并在网格部分上创建一个带有 mousedown 的箭头。

当我在网格部分触发 mousedown 时，我想要调整箭头的大小并使其跟随鼠标（拖动假）。

但是现在所有的鼠标事件处理程序都在节点自定义控件中，因为单击箭头自定义控件时我会有另一种行为。

我不需要图书馆的答案，因为我想自己实现它。

有什么猜测吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:36:46.953

解决！这不是 wpf 问题，而是编码问题，边框和网格 MouseEvents 共享一个我没有看到的变量，我有奇怪的行为，但现在一切都很好

# tridion - 无法在 MMC 中添加 SiteEdit 脚本扩展

> ID：11609547
> 
> 赞同：-1
> 
> 时间：2012-07-23T09:13:53.887
> 
> 标签：tridion

我们正在使用 Tridion 5.3。已经为 Content Manager 服务器和内容交付服务器 (.NET) 设置了一台新机器。

当我们尝试在 MMC 管理单元中添加 SiteEdit 脚本扩展时，我们收到错误“无法创建对象 TCMSiteEdit.SiteEdit，请检查可用性”。

谁能帮我们解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T18:30:35.577

我们可以假设您实际安装了 SiteEdit 吗？如果有，是哪个版本？通常，运行安装程序会自动将脚本扩展添加到 MMC 管理单元。

# regex - 没有竖线 (|) 字符的字符串的正则表达式是什么？

> ID：11609550
> 
> 赞同：3
> 
> 时间：2012-07-23T09:13:58.597
> 
> 标签：regex

不应包含竖线 (|) 字符的字符串的正则表达式是什么？例如，“这是一个示例 |” 带有管道字符的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T09:17:54.023

使用否定[字符类](http://www.regular-expressions.info/charclass.html)：

```
\A[^|]*\z 
```

**解释：**

```
\A    # Start of string
[^|]* # Match zero or more characters except |
\z    # End of string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:24:08.730

通常，您不需要正则表达式来确定字符串中是否包含字符。

您没有指定语言；例如在 Perl 中，您可以使用`tr`运算符：

```
if( $string !~ tr/|// ) {
   ... 
```

或者您可以查找字符并检查其`index`（如果不存在则为-1）：

```
if( index($string, '|') == -1 )
   ... 
```

其他语言肯定有类似的语言结构（[VB.NET](https://stackoverflow.com/q/5193893/170194)、[Java](https://stackoverflow.com/q/275944/170194)、[SQL](https://stackoverflow.com/q/287373/170194)、[Matlab](https://stackoverflow.com/q/1425147/170194)、[C++](http://www.cplusplus.com/reference/clibrary/cstring/strchr/)等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:19:42.493

如果您想问的是：什么是正则表达式来匹配没有管道符号的行，那么：答案是：`^[^|]*$`

那是匹配零个或多个字符的整行`|`

# android - 膨胀类 android.widget.SlidingDrawer 时出错

> ID：11609552
> 
> 赞同：0
> 
> 时间：2012-07-23T09:14:19.337
> 
> 标签：android, slidingdrawer

我在使用 Slidingdrawer 时遇到了一些问题。如何修复它。

主要 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@color/white">
    <SlidingDrawer 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@color/black"
    android:handle="@+id/handle"
    android:id="@+id/slideD">
    <Button 
        android:layout_width="60dp" 
        android:layout_height="60dp" 
        android:id="@id/handle" 
        android:background="@drawable/arrow_up"
        />
        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
              <Button 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:background="@drawable/ic_launcher"
            >
          </Button>
          <Button 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:background="@drawable/ic_launcher"
            >
          </Button>     
        </LinearLayout>
    </SlidingDrawer>
</LinearLayout> 
```

活动

```
public class ATDTActivity extends Activity {

    SlidingDrawer slideD;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        slideD = (SlidingDrawer)findViewById(R.id.slideD);
        slideD.setOnDrawerOpenListener(new OnDrawerOpenListener(){
            @Override
            public void onDrawerOpened() {
            slideD.getHandle().setBackgroundResource(R.drawable.arrow_down);
            }
        });
        slideD.setOnDrawerCloseListener(new OnDrawerCloseListener(){
            @Override
            public void onDrawerClosed() {
            sideD.getHandle().setBackgroundResource(R.drawable.arrow_up);
                    }
        });
    }
} 
```

谢谢帮忙！。您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:27:16.530

向 SlidingDrawer 添加内容：

```
....
<SlidingDrawer
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:content="@+id/content"
        android:handle="@+id/handle"
        android:id="@+id/slideD">
 ........
 <LinearLayout
            android:id="@id/content"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">

  ....... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:49:05.953

甚至不要打扰这[堂课](http://developer.android.com/reference/android/widget/SlidingDrawer.html)。

> 此类在 API 级别 17 中已弃用。

# iphone - 应用内购买 - 发生未知错误 - 5002 错误代码 - iOS5

> ID：11609561
> 
> 赞同：1
> 
> 时间：2012-07-23T09:15:03.237
> 
> 标签：iphone, ios, in-app-purchase, ios5

在 ios5 模拟器上，我正在尝试使用测试帐户测试我的应用内购买。当我尝试进行测试购买时，它提示我输入应用商店凭据。我输入了我的测试帐户凭据。

但我明白了

> error as**发生未知错误**，我得到的错误代码是 5002

.

我从我的模拟器中删除了所有内容，清理了没有用的构建。我还创建了新的测试用户帐户，但它不起作用。

请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:59:51.600

如果您在模拟器上测试您的应用程序，那么您将收到以下错误。

**错误域=SSServerErrorDomain 代码=5002“发生未知错误” UserInfo=0x80ca070 {NSLocalizedDescription=发生未知错误}**

因为，store-kit 不适用于模拟器。如果你想测试你的应用内购买，那么你必须在真实的**​​ iOS 设备**上测试，而不是在**模拟器**上。

您可以从[这里找到更多详细信息](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/DevelopingwithStoreKit/DevelopingwithStoreKit.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:04:42.877

无法按照[Apple 提供的 StoreKit 文档](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction.html)中的说明从 iOS 模拟器测试应用内购买。

# cakephp - 不同名称的蛋糕关系

> ID：11609570
> 
> 赞同：0
> 
> 时间：2012-07-23T09:15:26.990
> 
> 标签：cakephp, relational-database, relationship

我有一个表用户和一个表组。每个组都有一个 GroupLeader。所以我使用的字段是 groupLeader ($hasOne)，其中包含用户的外键。

我无法得到那种关系。所以我的问题是，如何在具有不同名称的字段上定义关系。

谢谢你的提示。远藤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:24:45.063

你的模型应该看起来：

```
class Group extends AppModel
{
    public $name = 'Group';
    public $belongsTo = array('GroupLeader' => array(
                                                   'className' => 'User',
                                                   'foreignKey' => 'groupLeader'
                                                    )
                             );
} 
```

试试上面的代码。并询问它是否不适合您。

# asp.net - UpdatePanel 不适用于脚本管理器。下面的代码发生了回发。我该如何做 Ajax 行为？

> ID：11609571
> 
> 赞同：0
> 
> 时间：2012-07-23T09:15:27.317
> 
> 标签：asp.net

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

<asp:UpdatePanel ID="UpdatePanel" runat="server">
        <ContentTemplate>
            <asp:Repeater ID="rpChat" runat="server" OnItemDataBound="rpChat_ItemDataBound" OnItemCommand="rpChat_ItemCommand">
                <ItemTemplate>
                    <div id="divChatWindow" title='<%# Eval("username") %>' runat="server" class="clChatWindow">
                        <div>
                            <asp:Label runat="server" Text='<%# Eval("username") %>' class="divHeader"></asp:Label>
                            <img src="../../Menu/close.jpg" onclick="HideDiv(this)" style="float: right; width: 20px;
                                height: 20px;" /></div>
                        <div class="chatText">
                            <asp:Repeater ID="rpChatMessages" runat="server">
                                <ItemTemplate>
                                    <asp:Image ID="imageForFriend" runat="server" CssClass="clFriendsImage" ImageUrl='<%# "HttpImageHandler.jpg?username=" +  DataBinder.Eval(Container.DataItem,"fromusername").ToString() %>' />
                                    <asp:Label ID="chatMessage" runat="server" Text='<%# Eval("Message") %>'></asp:Label>
                                    <br>
                                </ItemTemplate>
                            </asp:Repeater>
                        </div>
                        <asp:TextBox ID="txtChatMessage" runat="server" Width="115px"></asp:TextBox>
                        <asp:LinkButton ID="btnSendChat" runat="server" CommandName="Insert" CommandArgument='<%# Eval("username") %>'>Send</asp:LinkButton>
                    </div>
                </ItemTemplate>
            </asp:Repeater>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

我已经编辑了代码......现在我该怎么办？我在内容模板中有链接按钮。仍在进行回发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:19:41.010

来自外部任何控件的任何回发都`UpdatePanel`将触发完整回发，除非您将这些事件添加为`UpdatePanel`

在你的例子中，

```
<asp:LinkButton ID="btnSendChat" runat="server" CommandName="Insert" CommandArgument='<%# Eval("Username2") %>'>Send</asp:LinkButton> 
```

它不在，`UpdatePanel`因为您的面板中没有触发器，这些触发器总是会导致完整的回发

解决方案：

## 方法一

把`LinkButton`里面的`UpdatePanel.ContentTemplate`

## 方法二

将触发器添加到您的`UpdatePanel`

```
<Triggers>
    <asp:AsyncPostBackTrigger ControlID="btnSendChat" EventName="Click" />
</Triggers> 
```

# html - IE7定位问题

> ID：11609577
> 
> 赞同：0
> 
> 时间：2012-07-23T09:15:56.000
> 
> 标签：html, css, internet-explorer-7

我在 IE7 中有一个奇怪的布局问题。基本上发生的情况是，内容不是对齐到左上角，它应该在哪里，而是对齐到中间的某个地方。

似乎一切都正确显示，但这`main-bank-container`是一个不合适的元素。我真的不想绝对定位它，因为这意味着我必须使用 jQuery 保持包含 div 的高度，而不是隐含的。

我在这里设置了一个[jsFiddle 来](http://jsfiddle.net/kNwCE/)提供帮助。

这是代码：

HTML

```
<div style="padding: 4px;" class="nopad" id="maincontent">
    <div id="summary-page-container">
        <div id="main-bank-container">
            <div id="bank1" class="bank-container">
                <div class="basicview">
                </div>
            </div>
            <div id="bank2" class="bank-container">
                <div class="basicview">
                </div>
            </div>
            <div id="bank3" class="bank-container">
                <div class="basicview">
                </div>
            </div>
            <div id="bank4" class="bank-container">
                <div class="basicview">
                </div>
            </div>
        </div>
        <div style="clear: both;">
        </div>
    </div>
</div> 
```

​CSS

```
#maincontent {
    overflow: hidden;
    text-align: center;
}
#summary-page-container {
    overflow: hidden;
    position: relative;
    width: 1400px;
}
#main-bank-container {
    width: 690px;
}
.bank-container, .bank-container-small {
    border: 1px solid #CFCFCF;
    border-radius: 5px 5px 5px 5px;
    color: #555555;
    height: 90px;
    margin: 10px;
    position: relative;
    text-align: left;
    text-shadow: 0 1px 1px #FFFFFF;
    width: 670px;
}
.basicview {
    background:-webkit-gradient(linear,left top,left bottom,from(#ffffff),to(#ebebeb));
    background:-moz-linear-gradient(top,#ffffff,#ebebeb);
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#ffffff', endColorstr='#ebebeb')"; /* IE8 */
    filter:  progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#ffffff', endColorstr='#ebebeb'); /* IE6 & IE7 */

    border-radius: 5px 5px 5px 5px;
    height: 90px;
    width: 100%;
}
​ 
```

哦，如果这很重要，那就是 mydoctype

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:23:17.373

`text-align: center;`从中删除`#maincontent`

[我的小提琴](http://jsfiddle.net/kNwCE/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:22:43.380

```
#main-bank-container {
    width: 690px;
    float:left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:32:25.880

我可以看到的两个可能的问题是#main-bank-container 的宽度为 690 像素，而摘要页面容器的宽度为 1400 像素。

如果你删除#maincontent div上的文本对齐中心声明，它也会在IE7标准中查看IE9中的小提琴，它将整理定位。

# go - golang：运行时错误：无效的内存地址或 nil 指针取消引用

> ID：11609583
> 
> 赞同：11
> 
> 时间：2012-07-23T09:16:23.540
> 
> 标签：go

我是 golang 新手，目前正在关注本教程和源代码 - [http://golang.org/doc/articles/wiki/part2.go](http://golang.org/doc/articles/wiki/part2.go)

构建此文件后，我得到

```
calvin$ ./mywebwiki2 
2012/07/23 17:12:59 http: panic serving [::1]:58820: runtime error: invalid memory address or nil pointer dereference
/usr/local/go/src/pkg/net/http/server.go:576 (0x3f202)
    _func_003: buf.Write(debug.Stack())
/private/tmp/bindist454984655/go/src/pkg/runtime/proc.c:1443 (0x10c79)
/private/tmp/bindist454984655/go/src/pkg/runtime/runtime.c:128 (0x11745)
/private/tmp/bindist454984655/go/src/pkg/runtime/thread_darwin.c:418 (0x148b5)
/Users/calvin/work/gowiki/mywebwiki2.go:33 (0x2248)
    viewHandler: fmt.Fprintf(w, "<h1>%s</h1><div>%s</div>", p.Title, p.Body)
/usr/local/go/src/pkg/net/http/server.go:690 (0x331ae)
    HandlerFunc.ServeHTTP: f(w, r)
/usr/local/go/src/pkg/net/http/server.go:926 (0x34030)
    (*ServeMux).ServeHTTP: mux.handler(r).ServeHTTP(w, r)
/usr/local/go/src/pkg/net/http/server.go:656 (0x32fc1)
    (*conn).serve: handler.ServeHTTP(w, w.req)
/private/tmp/bindist454984655/go/src/pkg/runtime/proc.c:271 (0xed7f)
2012/07/23 17:12:59 http: panic serving [::1]:58821: runtime error: invalid memory address or nil pointer dereference 
```

知道我做错了什么导致这种明显的内存损坏吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-23T11:37:59.060

第 36 行有一个被忽略的错误。该错误可能表明`open .txt: no such file or directory`您是在浏览器中使用 URL进行测试，`http://localhost:8080/view/`还是`open foo.txt: no such file or directory`在浏览器中使用 URL 进行测试`http://localhost:8080/view/foo`。在后一种情况下，您的工作目录中必须有一个文件“foo.txt”，此示例代码才能工作。之后，代码似乎在本地对我有用。

有人可能应该填写有关忽略的错误值的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T04:04:57.617

在本教程中，您之前创建了文件 TestPage。首次构建服务器时应该导航到哪个页面。在本教程中，他们让您导航到`view/test`而不是`view/TestPage`按照您应该的方式导航，这会造成混乱。

# java - 有没有办法找到 Java 程序访问了哪些内存地址以及以什么顺序访问？

> ID：11609584
> 
> 赞同：3
> 
> 时间：2012-07-23T09:16:25.850
> 
> 标签：java, instrumentation

我想研究 Java 程序的内存访问模式。是否有一个框架或方法可以实现这一目标。

假设有一个程序 P，它按顺序访问内存地址 m1、m2、m3 等。我希望能够按该顺序查看这些访问，如果可能的话，访问的是什么类型的对象？

**更新（添加到 Durandal 的建议）：**

我总是可以通过运行带有 PIN 检测的 Java 程序来找到内存访问模式。除了这样做之外，这一切都很好，我将丢失内存地址到对象的映射。我想做的研究的一个重要方面是能够将内存使用情况映射到相应的类型（类）。

尽管正确地提到内存使用模式将取决于 JVM 实现，但我想将其视为研究的后续步骤。现在，我只在寻找字节码检测。（如果我走错了方向，请纠正我！）

**我认为字节码检测将如何帮助我分析缓存使用情况？** 在任何解释之前！这只是我想做的一方面。当内存访问模式（从 PIN 或修改后的 VM 或其他）不足以为我提供有关不同对象（或属于特定类的对象）使用缓存的信息时，我会这样做. 假设我得到字节码访问为

```
ObjectA
ObjectB
ObjectC
... 
```

很容易找到物体的大小。我还可以通过这是对对象的第一次访问来确定对象的内存访问是否是内存分配。然后，假设 JVM 在运行时会分配连续的内存，我可以对缓存的使用情况做一个假设（通过运行缓存模拟）。现在，这不是一个很好的假设，但仍然给了我缓存使用的上限（至少我相信如此）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:49:27.870

好吧，您总是可以通过艰难的方式做到这一点：更改虚拟机。有一些完全用 Java 编写的 JVM 实现，可以对其进行更改以收集您想要的数据。

但是，我坚信内存访问模式在*很大程度上取决于*运行程序的特定 VM（因为它们会以不同的方式在内存中组织数据）。不同的虚拟机 = 不同的访问模式。如果您在其中测量的 VM 具有 JIT，它还取决于 JIT 是否启动。

*真正*收集所有内存访问的方法是在某种沙盒环境中运行 VM 并计算其访问次数（这可以在某些模拟器中完成，或者在 MMU 的帮助下完成）。

* * *

编辑（问题更新 - 仅字节码检测）：使用字节码检测，您基本上非常接近检测分析器所做的事情。您现在的主要问题是您无法轻松地在对象和内存地址之间建立关系。我可以想到两种方法来规避这个问题：

*   有一个（JRE 私有，但可用）类 sun.misc.Unsafe*可以*为您获取对象、字段和数组的绝对内存地址（它有很多方法可以做到这一点）。如果您检测字节码以调用实用程序方法进行计数，它们可以使用 Unsafe 来确定将使用的地址。但是 Unsafe 是特定于实现的，垃圾收集器在堆周围移动对象可能会出现问题。这可能是也可能不是您想要衡量的。至少这可以通过合理的努力来实现。

*   *您可以完全放弃内存地址*的概念，并将其替换为*对象标识*和*字段*（分别为数组标识和索引）。然后，您的分析工具将需要跟踪对象和访问的字段。您真正需要注意的唯一一件事是您必须以不会阻塞垃圾收集器的方式保留对象引用（例如，使用 Wea​​kReferences）。这也不应该太难实现。这种方法不会识别*热内存*位置，而是识别*热对象/字段*。

这两种方法都会对测量产生一些影响，因为收集到的数据将与正在分析的代码存储在同一个堆中。如果这是非常不可取的，您可以使用 JNI 来收集堆外数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T16:57:23.553

Java 程序的哪一部分？Java“用户空间”由“public static void main(String[] args) {...”或整个 JVM 加载和先前可访问的类组成，其中包括幕后内存管理、垃圾收集、调试设施、管理设施等

如果您正在寻找真正的内存地址，那么您需要调试 JVM。这与调试 Java 程序有很大不同，因为在真实内存和“用户空间”程序之间存在内存抽象层。要调整实际内存访问，您无法重写 Java 程序，您需要重写 JVM。

字节码插入仍然是“用户空间”Java 程序的一部分，这意味着您将永远无法通过字节码插入确定绝对内存地址。事实上，对于同一个对象，JVM 引用到实际内存地址的“用户空间”映射甚至不会随着时间的推移保持不变。

# jquery - JQuery：鼠标悬停事件触发

> ID：11609586
> 
> 赞同：2
> 
> 时间：2012-07-23T09:16:40.243
> 
> 标签：jquery, mouseover

我正在尝试使用 jQuery 模拟 mouseout 上的事件处理，但是在测试环境中未调用事件处理程序。可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:25:39.167

像这样的东西？

```
$(document).ready(function() {
    $('#test, .comments').on('mouseenter', function() {
        $('.comments').stop(true,true).show('slow');
    });
    $('#test').on('mouseleave', function() {
        $('.comments').stop(true,true).hide('slow');
    });
})​;​ 
```

[小提琴](http://jsfiddle.net/9zQPm/)

也可以缩短为：

```
$('#test').on('mouseenter mouseleave', function(e) {
    $('.comments').stop(true,true)[e.type==='mouseenter'?'show':'hide']('slow');
}); 
```

[小提琴](http://jsfiddle.net/9zQPm/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:26:28.853

我认为您正在寻找 mouseenter 和 mouseleave。

它们只在悬停和退出时执行一次。

[http://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

[http://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

# ajax - 使用 Ajax 的 ASP MVC 重定向

> ID：11609588
> 
> 赞同：0
> 
> 时间：2012-07-23T09:16:50.167
> 
> 标签：ajax, asp.net-mvc

我在重定向获取现有网址时遇到问题。我有一个页面，上面有谷歌图表，我在条形图中的条形图中添加了一个侦听器。当用户单击其中一个条形图时，case 语句会确定要传递给路由器的 id。

```
google.visualization.events.addListener(wrapper, 'select', selectHandler);

function selectHandler() {
  var selection = wrapper.getChart().getSelection()
     var monthsTransform = 0;
        switch(selection[0].column)
           {
            case 1:
                monthsTransform = 0;
                break;
            case 2:
                monthsTransform = 3;
                break;
            case 3:
                monthsTransform = 6;
                break;
            case 4:
                monthsTransform = 12;
                break;
            case 5:
                monthsTransform = 18;
                break;

            //no need to default as already set to 0!
            }
            var url = "newController/newPage/" + monthsTransform;
            window.location.href = url;
        } 
```

我遇到的问题是

```
window.location.href 
```

将 newController/newPage 附加到现有的 url，所以它最终像：

```
localhost:1234/oldController/oldPage/newController/newPage/id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:17:56.327

使用 window.location.assign("/newController/newPage/" + monthsTransform)，而不是 window.location.href

如果您在新 URL 前添加服务器名称和协议，并使用 Html.Action html 帮助程序生成 url，那就更好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:28:32.410

查看我关于在服务器端创建 URL 的博客文章：

[http://ilovedevelopment.blogspot.co.uk/2012/04/aspnet-mvc-3-generating-actionlink-in.html](http://ilovedevelopment.blogspot.co.uk/2012/04/aspnet-mvc-3-generating-actionlink-in.html)

为简洁起见，我在下面粘贴了它的症结 - 根据需要进行修改：

```
string absoluteAction = string.Format("{0}://{1}{2}",
                                                  Url.RequestContext.HttpContext.Request.Url.Scheme,
                                                  Url.RequestContext.HttpContext.Request.Url.Authority,
                                                  Url.Action("ActionName", "ControllerName", new {Id = "Data"})); 
```

这可以在控制器方法中完成，因此您可以进行 ajax 调用并将正确的 url “absoluteAction”作为 Json 结果返回。

# java - 为什么在 c3p0 配置后出现内存泄漏异常？

> ID：11609590
> 
> 赞同：1
> 
> 时间：2012-07-23T09:16:57.533
> 
> 标签：java, mysql, tomcat, memory-leaks, c3p0

我在 mysql 中使用 java、GWT 和 hibernate。为了避免太多的连接异常，我在我的应用程序中配置了 c3p0，但是在配置后，当我将应用程序部署到 tomcat 并运行应用程序时，在 5 到 10 个请求应用程序崩溃并且在 tomcat 日志中我反复收到以下异常：

```
org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks
SEVERE: The web application [/war] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@1d2aa39]) and a value of type [com.google.inject.servlet.ServletDefinition$2] (value [com.google.inject.servlet.ServletDefinition$2@ef3675]) but failed to remove it when the web application was stopped.Threads are going to be renewed over time to try and avoid a probable memory leak. 
```

我的c3p0配置如下：

```
<property name="connection.provider_class"> org.hibernate.connection.C3P0ConnectionProvider</property>
   <property name="hibernate.connection.autoReconnect">true</property>
   <property name="hibernate.c3p0.acquire_increment">3</property>
   <property name="hibernate.c3p0.idle_test_period">5</property>
   <property name="hibernate.c3p0.max_size">50</property>
   <property name="hibernate.c3p0.max_statements">0</property>
   <property name="hibernate.c3p0.min_size">0</property>
   <property name="hibernate.c3p0.timeout">5</property>
   <property name="hibernate.c3p0.idleConnectionTestPeriod">5</property> 
```

如果有人知道解决方案，请帮助我...在此先感谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:01:10.517

这不是你崩溃的**原因**，而是它的**后果**——你的应用程序由于未知的原因而崩溃并留下了一团糟。该错误与该混乱有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:18:07.993

这是重新部署应用程序时发生的与类加载器相关的内存泄漏。

有关此类内存泄漏的更多信息，请参阅[此问题](https://stackoverflow.com/questions/7788280/memory-leak-when-redeploying-application-in-tomcat)。

您的问题是Google Guice[的 Guava 依赖项中的错误。](http://code.google.com/p/google-guice/issues/detail?id=288)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:34:41.627

这不是您异常的原因，而是异常的结果。应用程序崩溃的最可能原因是代码中的内存泄漏。在做任何事情之前，请确保您的连接在 finally 块中正确关闭...

# aem - 在 CQ5 的内容查找器中看不到内容

> ID：11609591
> 
> 赞同：0
> 
> 时间：2012-07-23T09:17:03.880
> 
> 标签：aem

我已经在 CQ5 存储库中导入了图像和视频。我可以在 DAM（数字资产管理）中看到所有这些，但是当我使用已定义的模板和组件创建页面时，我无法在内容查找器菜单中看到它们（图像和视频）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:26:19.930

你运行的是哪个版本？我已经在 MSM 功能包中看到了 CQ5.4 的这个问题。一个类似的问题会影响更新 1 中 CQ5.5 中的某些浏览器。
否则，我会检查评论中提到的错误日志。查找 DAM 工作流故障或类似的此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T11:47:50.720

当您使用内容查找器打开页面时，请查看哪个调用正在加载图像。

例如这里提到的链接资产是从`/content/dam/assets`路径加载的。

[http://localhost:4502/bin/wcm/contentfinder/asset/view.json/content/dam/assets?_dc=1466163645234&query=&mimeType=image& *charset* =utf-8](http://localhost:4502/bin/wcm/contentfinder/asset/view.json/content/dam/assets?_dc=1466163645234&query=&mimeType=image&_charset_=utf-8)

[![在此处输入图像描述](../Images/c55a1953910722bd84bef1d6c2d6f84b.png)](https://i.stack.imgur.com/nSkKB.jpg)

**如何获取此网址**

1.  用chrome打开页面
2.  启用“网络”视图
3.  单击内容查找器中的刷新图标

[![在此处输入图像描述](../Images/39002e5c8870ead0870824687cb7186c.png)](https://i.stack.imgur.com/KZJG4.jpg)

# objective-c - class_addmethod 和公共 API

> ID：11609592
> 
> 赞同：0
> 
> 时间：2012-07-23T09:17:10.273
> 
> 标签：objective-c, runtime

我正在开发一个游戏项目，并希望使用对象组合模式来给我很大的灵活性。我目前重写了消息转发方法，以便 Composite 可以调用其组件的方法。

唯一的缺点是 -forwardingTargetForSelector: 仅在只有一个目标时才有效。如果我有一个包含两个具有相同选择器的组件的 Composite，那么我将不得不求助于使用（慢得多）-forwardInvocation 方法并在两个目标上执行 NSInvocation。

通过阅读几本关于高级 Objective-C 和运行时参考的书籍，我似乎可以通过动态创建一个在子组件类中调用 IMP 的实现来转发消息。我会使用运行时方法 class_addmethod 来执行此操作。

我的问题是，有谁知道 Apple 是否认为这是私有 API 并因此违反 App Store 规则？有没有人在通过审核的应用中使用过 class_addmethod ？

众所周知，商店中不允许进行[方法调配](https://stackoverflow.com/questions/7720947/method-swizzling-in-ios-5)，但这并不完全相同。一个典型的例子是在外观 API 可用之前在 UINavigationBar 上调配 -drawRect:。这将向我自己的对象添加方法，而不是弄乱 Apple 自己的 API。

谢谢阅读！

劳伦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:47:04.757

从我读过的内容来看，只要您不使用 Apple 提供的类来更改功能，您应该没问题。Objective-C 运行时不是私有 API，所以如果这一切都发生在您自己的代码上，那么您应该可以这样做。

# mysql - MySQL：1 列指的是 2 个不同的表

> ID：11609593
> 
> 赞同：1
> 
> 时间：2012-07-23T09:17:10.013
> 
> 标签：mysql, database-design

如果我有 2 个账户表：储蓄账户和透支账户，然后我有表事务，其中“from_account”列的值只能等于储蓄账户 ID 或透支账户 ID，我应该如何设置外键约束？是否有更好的架构设计，因为储蓄和透支帐户 ID 可能会发生冲突。我正在使用 mysql btw :) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:24:55.377

更好的模式设计是在交易表中有两个不同的列：一个引用储蓄账户表，另一个引用透支账户表。当然，这些列应该可以为空，并且只有其中一个会指向其他表中的实际行。但是通过这种设计，您可以强制执行参照完整性约束。

另一种选择是将两个帐户表合并为一个，特别是如果它们有许多相似的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:29:47.033

您可以定义一个附加列`ACCOUNT_TYPE`并设置一个`UNIQUE CONSTRAINT`组合列`FROM_ACCOUNT`和`ACCOUNT_TYPE`列。您还可以添加 a`CHECK CONSTRAINT`以`ACCOUNT_TYPE`将其值限制为 1,2。

或者您为每个引用的表定义一列加上 a`CHECK CONSTRAINT`以确保您永远不会同时填充两者。

最后，考虑合并两个帐户表，如果它们之间没有太大区别的话。

# mysql - MySQL比较同一张表上的两个值

> ID：11609594
> 
> 赞同：2
> 
> 时间：2012-07-23T09:17:15.220
> 
> 标签：mysql, compare

我正在尝试比较同一张表中的两个值，并检查是否存在差异。现在，我在 cms_statistics_pages 表中有 1485 条记录，但是当查询如下：

```
SELECT
    cp.identifier,
    COUNT(csp1.statID) AS hits,
    COUNT(csp2.statID) AS hits_yesterday,
    IF(COUNT(csp1.statID)>COUNT(csp2.statID),1,0) AS growth
FROM cms_pages cp
LEFT JOIN cms_statistics_pages csp1
      ON csp1.pageID = cp.pageID
      AND DATE(csp1.datetime) = '2012-07-20'
LEFT JOIN cms_statistics_pages csp2
      ON csp2.pageID = cp.pageID
      AND DATE(csp2.datetime) = '2012-07-19'
GROUP BY cp.identifier 
```

..被解雇，我得到这些结果：

```
identifier                  hits    hits_yesterday  growth
index                       13395   13395           0
siden-er-under-opdatering   638     638             0
vores-historie              0       3               0 
```

这不符合我的目的。然后，如果我改变：

```
AND DATE(csp1.datetime) = '2012-07-20' 
```

到不匹配任何记录的日期

```
AND DATE(csp1.datetime) = '2012-07-21' 
```

我的结果现在看起来像这样：

```
identifier                  hits   hits_yesterday   growth
index                       0      141              0
siden-er-under-opdatering   0      29               0
vores-historie              0      3                0 
```

现在点击是正确的，所以我想知道当两个连接都包含一些数据时，查询是否会多次计算记录。

来自 cms_pages 的示例数据：

```
    pageID sectionID templateID 标识符 默认标题 exclude_title
    1 1 1 索引 1 欢迎来到 SiteTech 框架 2012

```

cms_statistics_pages 中的示例数据：

```
    statID frontend backend pageID sectionID panel datetime
    1 0 1 34 6 管理员 2012-07-17 12:34:14

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:27:00.157

我遇到了这篇文章，它提供了一种更高级的方法来计算多个表，这可能会阻止查询多次计算同一条记录。自己没有尝试过 - [https://discussion.dreamhost.com/thread-9112.html](https://discussion.dreamhost.com/thread-9112.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T09:04:37.793

所以我一直在搞乱查询，并找到了一个包括左连接和子查询的解决方案。我的查询现在看起来像：

```
SELECT 
    cp.identifier,
    now.hits AS hits,
    yd.hits AS hits_yesterday,
    IF(now.hits>yd.hits,1,0) AS growth
FROM cms_pages AS cp
LEFT JOIN 
    (
        SELECT
            pageID,
            COUNT(pageID) AS hits
        FROM cms_statistics_pages
        WHERE DATE(datetime) = '2012-07-20'
        GROUP BY pageID
    ) now
ON now.pageID = cp.pageID
LEFT JOIN
    (
        SELECT  pageID,
            COUNT(pageID) AS hits
        FROM cms_statistics_pages
        WHERE DATE(datetime) = '2012-07-19'
        GROUP BY pageID
    ) yd
ON yd.pageID = cp.pageID 
```

这给了我这个正确的结果！：

```
identifier                  hits    hits_yesterday  growth
index                       95      141             0
siden-er-under-opdatering   22      29              0
vores-historie              NULL    3               0 
```

# django - 通过 django 中的 _set 选项访问自定义管理器

> ID：11609596
> 
> 赞同：0
> 
> 时间：2012-07-23T09:17:19.577
> 
> 标签：django, django-models

我有两个模型和一个自定义管理器：

```
class ActiveModelAManager(models.Manager):
    def get_query_set(self):
        return super(ActiveModelAManager,self).get_query_set().filter( active = True)

class ModelA(models.Model):
    name = CharField(....)
    active = BooleanField()

    active_models = ActiveModelAManager()
    objects = models.Manager()

class ModelB(models.Model):
    modelA = ForeignKey(ModelA) 
```

在我看来，我将 ModelA 传递给模板，我想访问 ModelB_set 但使用我的 active_models 管理器而不是对象？

所以如果我这样做：

```
{{ ModelB.modelb_set.all }} 
```

我正在访问对象管理器，但我想访问 active_models。当我尝试通过我的视图访问自定义管理器时，也会出现同样的问题。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:49:36.783

不确定我的问题是否正确，但是为了查询引用活动 ModelA 对象的 modelB 对象，在您看来，您可以编写。

```
active_modelA_objects = ModelA.active_models.all().values_list('pk', flat=True)
modelB_objects_with_active_modelA = ModelB.objects.filter(modelA__in=active_modelA_objects) 
```

相关文档：

[值列表](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values-list)

[__在](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)

# ruby - Webdriver - 在特定坐标打开上下文菜单

> ID：11609599
> 
> 赞同：0
> 
> 时间：2012-07-23T09:17:22.587
> 
> 标签：ruby, webdriver, contextmenu

我有一个很大的画布区域，该区域的不同部分有不同的上下文菜单操作。所以我需要使用特定坐标执行上下文菜单单击。

在文档中我只找到了这个功能：

```
element = @@driver.find_element(:xpath, xpath_value)
@@driver.action.context_click(element).perform 
```

但我无法为此上下文单击指定坐标。这是有效的，但仅在画布区域的中心。

还有其他方法可以打开上下文菜单吗？我也尝试从键盘打开它，但我的测试页面不支持通过按“Shift”+ F10 的上下文菜单，只能通过从键盘按“菜单键”。我可以从 WebDriver 按下键盘上的菜单键吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:49:02.363

```
require 'win32ole'

require "selenium-webdriver"

driver = Selenium::WebDriver.for :firefox
driver.navigate.to('http://www.elmcomputers.com/Shortcut_Keys.pdf')

skey = WIN32OLE.new('Wscript.Shell')

skey.SendKeys('+{F10}') #SHIFT+f10 
```

测试和工作。试试你的页面看看会发生什么。我知道您提到它不会接受组合键，但我认为这与 Windows 而非页面本身有关。看一看..

# php - 如何创建排除某些单词（根目录名称）的 url slug？

> ID：11609603
> 
> 赞同：0
> 
> 时间：2012-07-23T09:17:39.173
> 
> 标签：php

我允许我的网站用户为他们创建的页面指定他们自己的 slug，以实现更好的 seo 目的。我想要做的是我想限制用户指定根目录中存在的目录名称。例如，我有名称为“abc”的目录，那么用户不应将此名称用作 slug，例如 www.mywebsite.com/abc 应标记为无效，因为“abc”是我的项目根目录中存在的目录名称。避免根目录名称作为 slug 的好方法是什么？

# php - Facebook 选项卡应用程序和 PHP 会话

> ID：11609604
> 
> 赞同：0
> 
> 时间：2012-07-23T09:17:41.527
> 
> 标签：php, facebook, session

**设置：**

有一个 Facebook 选项卡应用程序（PHP 和 Javascript），它安装在两个不同的 Facebook 页面上。应用程序的每个实例都有一些彼此不同的配置值。

**问题：**

当应用程序通过 Facebook 加载时，我可以根据 Facebook 的“签名请求”确定要加载的内容。但是，例如，当应用程序本身进行 AJAX 调用以更新某些数据时，有没有办法确定调用来自何处，而无需随请求发送某种标识符？

**想法：**

我尝试了 PHP 会话，虽然我对会话不是很熟悉，但如果两个实例同时打开，应用程序似乎会感到困惑。我错过了什么吗？

当然，我可以在每个 AJAX 请求中发送某种 ID，以指定调用的来源，如上所述，但这是我想避免的。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T11:41:19.780

会话是用户级别的，因此它不是解决问题的最佳方式。

相反，解决问题的最简单方法是解码`signed_request`并找到`page_id`（的一部分`signed_request`）。然后，当您在页面上进行 ajax 调用时，在调用中传递 ID（作为`GET`或`POST`数据），以便您的服务器知道要为该页面加载哪些数据。

您可以执行以下操作：

```
switch ( $_GET['page_id'] ) {
  case '1234':
    // load settings for page 1234
  break;
  case '5678':
    // load settings for page 5678
  break;
} 
```

或者，您可以使用数据库更轻松地管理它并使其具有可扩展性。

# objective-c - 将携带字典对象的 NSdata 与 String 进行比较

> ID：11609611
> 
> 赞同：0
> 
> 时间：2012-07-23T09:17:58.027
> 
> 标签：objective-c, cocoa-touch, cocoa, xcode4.3

我想弄清楚如何做到这一点

```
NSData *xxx = [xxx objectForKey:@"xxx"];
if (xxx == @"xxx")
//do somthing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:33:23.360

您可以使用自省来确定一个对象是否与另一个对象具有相同的数据类型，但您必须这样做（注意 type `id`）；

```
id *obj = [dict objectForKey:@"key"];

if ([obj isKindOfClass:[NSString class]])
{
    if ([obj isEqualToString:@"text"])
    {
       //...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T10:31:04.210

或者您可以只使用`isEqual:`which 允许与任何对象进行比较，而无需先测试该类。

```
id obj = [dict objectForKey:@"key"];
if ( [obj isEqual:@"text"] ) {
    //...
} 
```

# php - MS SQL 2000 ODBC PHP 慢速 connect() 和慢速 odbc_fetch_row()

> ID：11609624
> 
> 赞同：1
> 
> 时间：2012-07-23T09:18:46.300
> 
> 标签：php, sql-server, odbc

当我`odbc_connect()`在**本地网络（不是主机）**中使用 ODBC 使用 PHP 连接 MS SQL 时，连接大约需要**11 秒**。这是我的连接代码：

```
function __construct(){
    $connstr = "Driver={SQL Server};Server=serv;Database=Base;";
    $this->lnk = odbc_connect($connstr, "login", "passs");
} 
```

而当我`odbc_fetch_row()`也需要大约**5 秒**。这是我的结果函数代码：

```
function manual($query){
    $result = odbc_exec($this->lnk, $query);// or exit(odbc_error);
    for($i = 1; $i<odbc_num_fields($result)+1; $i++){
        $arr_row[] = odbc_field_name($result,$i);
    }
    while(odbc_fetch_row($result)){
        foreach($arr_row as $name){
            $ownsql_result[$name][] = trim(odbc_result($result, $name));
        }
    }
    odbc_free_result($result);
    return $ownsql_result; 
} 
```

我在**Windows 7**上使用**WAMP** ，在同一**本地网络**中的其他 PC **Windows Server 2003上使用****MS SQL 2000** ...请大家帮忙

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:17:26.527

到去年为止，我们一直在使用 SQL Server 2000，并且 php 的 MSSQL 库运行良好。尝试从 ODBC 切换到 MSSQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:58:53.313

问题出在 MSSQL SERVER VERSION 中...我将其从 2000 年更改为 2005 年，并且一切正常******

# bash - 在外部脚本中声明变量

> ID：11609625
> 
> 赞同：3
> 
> 时间：2012-07-23T09:18:47.513
> 
> 标签：bash

我正在编写一个使用在另一个脚本中声明的变量的脚本。到目前为止，我已经尝试过使用`export`定义环境变量或仅使用本地变量。

所以我有我的配置脚本：

```
export DIR_STORAGE="/var/storage/" 
```

并且脚本试图在同一目录中使用它：

```
source conf.sh
echo "DIR="${DIR_STORAGE} 
```

但这似乎不起作用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:58:03.273

即使您将两个文件都放在同一个目录中，也会在*当前目录*`source conf.sh`中查找 conf.sh 。例如：

 *```
SHELL$ pwd
/home/user

SHELL$ ls mydir/
script.sh conf.sh

SHELL$ mydir/script.sh
script.sh: line 1: conf.sh: No such file or directory 
```

在这种情况下，脚本将在当前（主）目录中查找“conf.sh”，而不是在 mydir 下。

为避免这种情况并始终在脚本所在的同一目录中查找配置文件，通常的做法是使用：

```
source "$(dirname $0)/conf.sh" 
```

这将从您用于调用脚本的命令中提取路径并将配置文件名附加到它；在上面的示例中，这将成为`source "mydir/conf.sh"`应该可以正常工作的。

PS如果您使用`source`，则不需要`export`任何变量。*

# c# - 将函数调用字符串解析为名称和参数

> ID：11609626
> 
> 赞同：-2
> 
> 时间：2012-07-23T09:18:47.560
> 
> 标签：c#

我正在尝试编写一个正则表达式来解析表示函数调用的字符串。我想解析：

`createNewEmail(mailToJohn, recipientGeorge, Subject, content);`

成一个字符串数组： `createNewMail`, `mailToJohn`, `recipientGeorge`, `Subject`, `content`

其他可能的输入可能是：

`createNewEmail(mailToJohn, recipientGeorge, Subject, content);`

`makeTemplateUser(templateName, userName);`

`deleteEmail(emailToDelete);`

`updateUserSetting(userId, changedSettings, oldSettingsId);`

你建议我如何解析这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T16:27:08.477

如果您的输入真的那么简单，您可以使用

```
line.Split(new[] { ' ', ',', '(', ')', ';' }, StringSplitOptions.RemoveEmptyEntries).Where(s => s.Length > 1).ToArray(); 
```

只要您的标识符（函数名或参数）都不是单个字符长，它就可以工作；如果您需要处理这种情况，只需修改`Where`过滤器。这将返回一个数组，您可以将其插入更大的数组（或添加到列表等）。

# asp.net - 如何更改 ClickOnce 清单文件中的部署提供程序 url？

> ID：11609628
> 
> 赞同：11
> 
> 时间：2012-07-23T09:18:51.510
> 
> 标签：asp.net, clickonce

（免责声明：我使用日文版的 Visual Studio 2005，虽然我将我的 Visual Studio 的菜单名称翻译成英文，但它可能与原始版本中的实际不同）

无论如何，我正在尝试在服务器上发布 ClickOnce 应用程序，但生成的清单文件 (.application) 在 deploymentProvider 代码库属性中有一个值，我根本无法更改。

```
<deploymentProvider codebase="http://foo.jp/foo/ClickOnce/fooApp.application" /> 
```

我希望通过将路径放入可以指定位置路径的框中来更改值（我的意思是，解决方案探索-> 属性-> 发布浴缸-> 发布位置），但是我是否忽略了其他内容？

当然，我可以在记事本上手动更改它，但我认为这不是正常行为！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-08-11T20:38:38.983

我正在使用 VS 2017。

*   转到项目属性

*   选择发布页面

*   选择更新...按钮

*   更改页面底部的更新位置以匹配您的新位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T02:11:40.723

Microsoft 提供了一个名为 Mage 或 MageUI 的实用程序来编辑和管理 clickonce 部署的清单。我主要使用它来更改和重新签署我需要在远程位置部署的应用程序。

链接： http: [//msdn.microsoft.com/en-us/library/xhctdw55 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/xhctdw55(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T04:21:29.343

![在此处输入图像描述](../Images/fc40f4d36d1fde05a84eb869e5030d9c.png)

导航到项目属性（在解决方案资源管理器中单击“属性”）。

转到“发布”标签。编辑配置。

（见截图）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-05T20:44:05.203

我认为可能值得添加我们用来通过 DevOps 完成此任务的方法。该过程仍然使用上面提到的 Glenn Ferrie 法师。

如果您正在签署申请，则此过程必须在签署之前完成。

您将向代理作业添加命令行任务。将任务命名为您认为合适的名称，并按如下方式设置脚本（根据需要更新任何路径或变量）：

```
$(Mage)\mage.exe -Update $(app.publish)\fooApp.application -pu http://foo.jp/foo/ClickOnce/fooApp.application 
```

我会注意到，我们还必须根据我们的需要更新引导程序。这超出了这里的问题范围，但是对于那些需要更新引导程序 URL 的人，我们在 DevOps 中使用了以下过程。

我们使用以下脚本添加了一个单独的命令行任务（同样，根据需要更新您的名称和路径/变量）：

```
$(app.publish)\setup.exe -url="http://foo.jp/foo/ClickOnce/" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-05T15:30:45.373

在做了一些测试后，我发现这是 InstallURL 属性。使用 MSBuild，您可以使用

`/p:InstallURL=http://www.http://foo.jp/foo/ClickOnce/`

或者您可以打开您的 csproj 文件并在正确的部分添加 InstallURL。因为我使用命令行功能，所以我无法在这部分提供真正的帮助。

这是我用来构建应用程序以使用 Azure DevOps 部署 ClickOnce 的完整命令行。

```
/target:publish 
/p:ApplicationVersion=$(Build.BuildNumber) 
/p:InstallURL=http://install-staging.newsprintgroup.com/ 
#/p:PublishURL=http://install-staging.newsprintgroup.com/ #This one is not working for me
/p:UpdateEnabled=true 
/p:UpdateMode=Foreground  
/p:ProductName="App Staging" 
/p:OutputPath="$(build.ArtifactStagingDirectory)\Publish\\" #With the double backslash 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-13T18:08:13.790

您需要同时传递 /property:InstallURL 和 /property:UpdateEnabled=true 来设置 deploymentProvider

# random - 具有随机访问的种子 3D 白噪声随机发生器

> ID：11609629
> 
> 赞同：1
> 
> 时间：2012-07-23T09:18:56.583
> 
> 标签：random, seed, noise-generator

我对随机生成器的经验几乎为零。我在 C 中使用了标准 rand 函数，并且使用了 perlin 噪声。

但是现在，我需要一个分辨率为 NxNxN 的立方体（N 可能为 1e6 或更大），其中充满白噪声（没有柏林平滑度或其他），我可以在其中“选择”一个值，如果我重新选择相同的值，它应该是每次都一样的结果。它应该被播种，这样如果我再次启动应用程序，结果需要相同。它不应该是安全的或其他什么，只是足够随机，以至于人类不应该能够通过思考来预测值。如果他真的用电脑分析，可以预见也无妨。

就像我会使用标准的 C rand 函数，设置种子并为 3 维执行嵌套 for 循环，并每次生成一个随机数，直到我到达坐标。这当然非常慢。我需要一些快速的东西！

我在互联网上搜索过，发现很多，但同时什么也没有。也许我正在寻找错误的关键字，但我没有找到任何可以使用的东西。

谁能帮我开始？代码？一条链接？我真的不在乎我是否理解算法，但它应该易于实现和使用，并且应该特别快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:13:22.063

由于似乎没有人能够回答这个问题，我一直在研究这个问题，并通过以下解决方案解决了这个问题：

```
int pseudoRandom(int &seed)
{
    const int a = 16807; // 7^5
    const int m = 2147483647; // 2^31 - 1
    seed = int(unsigned(seed * a) % m);
    return seed;
} 
```

我采用上述众所周知的随机函数。这是一个很好的功能，因为它可以轻松转换为着色器语言，并且可以轻松扩展为 64 位整数或其他内容。

现在，我需要能够在 0.0 和 ?.? 之间创建随机数 在 3 个维度上，它们应该始终使用相同的基础种子具有相同的结果，所以我取了每个分量 x、y 和 z 的整数部分，以及一个基础种子。

```
int seed = baseseed;
pseudoRandom(seed);
pseudoRandom(seed * (int(x) + seed) * (int(y) + seed) * (int(z) + seed); 
```

=> 种子现在是我可以开始制作详细随机网格的值。因此，如果我需要 32x32x32 随机值的详细信息，我只需在此处将其生成为一个数组。如果我需要一个更大的数组，我可以再次执行相同的步骤来生成另一个层，例如：

```
pseudoRandom(seed * (int(x * 100) + seed) * (int(y * 100) + seed) * (int(z * 100) + seed); 
```

这样，您实际上可以完全自由地随机化，并且可以完全控制细节。

这解决了我的问题。

# objective-c - iOS 本地化

> ID：11609637
> 
> 赞同：1
> 
> 时间：2012-07-23T09:19:24.940
> 
> 标签：objective-c, ios, localization, localizable.strings

我正在尝试本地化我的应用程序。但是出了点问题，而不是显示我的 .string 文件的内容。它只显示我在 NSLocalizedString 中设置的键。这是示例：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    self.passwordTextField.placeholder = NSLocalizedString(@"Password", nil);
} 
```

在我的本地化（英语）中，我做了：“密码”=“密码”；
在我的本地化（俄语）中，我做了：“密码”=“Пароль”；

我检查了目录，我有 ru.lproj 和 en.lproj。但无论如何，它没有奏效。

有人能帮我吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T03:04:55.263

开发人员看到英文而不是翻译的最常见原因是没有正确命名本地化文件。它必须是**Localizable.strings** - 拼写完全一样，没有其他。

没有其他工作！此外，确保它位于正确命名的目录中（en.lproj、ru.lproj 等）

[这里](http://www.ibabbleon.com/iphone_app_localization.html)有完整的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:32:18.547

信息太少，看起来不错...请参阅[此分步教程](http://www.raywenderlich.com/2876/how-to-localize-an-iphone-app-tutorial)以检查您的设置有什么问题（只需要大约 15 分钟...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:37:05.827

这种风格一直很适合我...

```
NSString *text = NSLocalizedStringFromTable(@"text-key", currentLocale, @""); 
```

但是，语言环境必须与文件名匹配。如：“en_US.strings”

# r - 使用 gWidgets 选择文件

> ID：11609638
> 
> 赞同：2
> 
> 时间：2012-07-23T09:19:31.557
> 
> 标签：r, gwidgets

下面是使用 gWidgets 包创建的 R 小部件的人工示例：

```
library(gWidgets)
options("guiToolkit"="RGtk2")

f <- function(file){
    dat <- read.table(file, header=TRUE)
return(dat[1,])
}

lst <- list() 
    lst$action <- list(beginning="f(",ending=")")
    lst$arguments$file <- list(type="gfilebrowse")

ggenericwidget(lst, container=gwindow("Example")) 
```

使用 Windows 浏览和选择文件时会出现问题：文件路径中的反斜杠没有加倍。如何克服这个问题？我不知道如何用字符串中的双反斜杠替换反斜杠。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T19:40:06.813

您可能想要`gsub("/", "\\\\", x)`但不确定是否需要。我没有准备好测试的 Windows 机器，但如果需要，我会感到惊讶。

# .net - sqlite 没有得到更新

> ID：11609639
> 
> 赞同：0
> 
> 时间：2012-07-23T09:19:32.790
> 
> 标签：.net, entity-framework, sqlite

这是我的 app.config

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
  </startup>
  <connectionStrings>
    <add name="DataBaseEntity"  connectionString="metadata=res://*/DBModel.csdl|res://*/DBModel.ssdl|res://*/DBModel.msl;provider=System.Data.SQLite;provider connection string=&quot;data  source=I:Sompepath\dbfilename&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

以下是用法

```
 using (var context = new DataBaseEntity("name=DataBaseEntity"))
            {
                context.Connection.Open();
                var status = delegatefunction(context);
                if (status)
                {
                    context.AcceptAllChanges();
                    context.SaveChanges(SaveOptions.DetectChangesBeforeSave);
                    context.Connection.Close();
                    return true;
                }
                return false;
            } 
```

委托函数看起来像这样

```
(context =>{var abc = new xyz();                
            context.xyzs.AddObject(abc);}); 
```

数据库没有刚刚添加到委托中的数据

应用程序中也不例外

上下文中的连接对象如下所示

![数据库和数据源为空](../Images/b6caa76609965245c4dbca0fcf1ec4eb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:27:45.050

删除`context.AcceptAllChanges();`该调用告诉 EF 没有挂起的更改，因此`SaveChanges`没有任何内容可保存到数据库，因为它认为所有更改都已保存。

`AcceptAllChanges``SaveChanges`一旦所有修改都正确保存到数据库中，通常在内部调用。[此方法是公开的，以支持您希望在单个事务](http://blogs.msdn.com/b/alexj/archive/2009/01/11/savechanges-false.aspx)中保存对多个上下文的修改的一些复杂场景。

# android - Toast 没有出现在 UnCaughtExceptionHandler 中

> ID：11609640
> 
> 赞同：8
> 
> 时间：2012-07-23T09:19:33.290
> 
> 标签：android, toast, uncaught-exception, uncaughtexceptionhandler

我正在使用此代码来处理任何可能导致我的应用程序崩溃的未捕获异常。

```
public class ExceptionHandler implements java.lang.Thread.UncaughtExceptionHandler {
    private final Context myContext;

    public ExceptionHandler(Context context) {

        myContext = context;
    }

    public void uncaughtException(Thread thread, Throwable exception) {

        Toast.makeText(myContext,
                "The application has crashed, and a report is sent to the admin",
                Toast.LENGTH_SHORT).show();
        StringWriter stackTrace = new StringWriter();
        exception.printStackTrace(new PrintWriter(stackTrace));
        System.err.println(stackTrace);// You can use LogCat too
        Intent intent = new Intent(myContext, CrashActivity.class);
        myContext.startActivity(intent);
        Process.killProcess(Process.myPid());
        System.exit(10);
    }
} 
```

当我使用已知但未捕获的异常（只是为了测试）运行它时，会调用活动“CrashActivity”，但必须在它之前出现的 Toast 没有出现。

实际上我只想显示 Toast 然后调用 myContext.finish(); 而不是去 CrashActivity。但那吐司在不可见。

我哪里错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T18:40:23.480

Found this question while googling for exact the same problem. As far as I can tell it is not necessary to have the `Toast.show()` called from the UI thread as long as there is an Application context.

AFAIK: The problem that here occurs is the following: You're trying to show a Toast and immediately afterwards your application is shut down by the VM, which means your Toast is shutdown as well.

A solution for the problem is the following:

*   Run the Toast from a sepearate Thread
*   Delay shutdown of your application in the Uncaught Exception Handler.

What I do is the following:

In `Application::onCreate()`:

```
Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {
    @Override
    public void uncaughtException(Thread thread, Throwable ex)
    {
        new Thread() {
            @Override
            public void run() {
                Looper.prepare();
                Toast.makeText(getApplicationContext(), "Application crashed", Toast.LENGTH_LONG).show();
                Looper.loop();
            }
        }.start();

        try
        {
            Thread.sleep(4000); // Let the Toast display before app will get shutdown
        }
        catch (InterruptedException e)
        {
            // Ignored.
        }
    }
}); 
```

It is similiar to how the Toast notification in ACRA works (in fact this is where I got the hint from).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T13:36:09.370

`System.exit(0)`从 Android 内部调用`UncaughtExceptionHandler`有助于应用程序从错误中恢复并重新启动上一个 Activity。恕我直言，用户体验得到显着改善。但是，这种方法需要在多个安卓平台上进行尝试和测试。已在 GB 和 JB 上尝试过。它工作得很好。此外，我从其他人（我是 Android 新手）那里听说，`System.exit()`在 Android 中不推荐调用，但 .. 可以将其用作 android 应用程序崩溃的一个很好的恢复选项。

```
 public void uncaughtException(Thread thread, Throwable ex) {
        new Thread() {
            @Override
            public void run() {
                Looper.prepare();  
                Toast.makeText(YourActivity.this, "Application has Crashed. Recovering now.", Toast.LENGTH_LONG).show();
                /* Log relevant message/analytics from here. */
                System.exit(1);
                Looper.loop();
            }
        }.start();
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T09:26:28.217

您可能正在从线程调用 Toast，而应该从 UI 线程调用 Toast...

如果这没有帮助，请向我们提供 logcat 输出，以便我们查看您遇到的错误类型。

# json - 使用 mongoimport 导入超过 1 个 json 文件

> ID：11609647
> 
> 赞同：28
> 
> 时间：2012-07-23T09:19:48.060
> 
> 标签：json, mongodb, mongoimport

我是新手`mongodb`，想了解如何将`json`文件从一台服务器导入到另一台服务器。我尝试了以下命令`mongoimport -d test -c bik check.json`，它对我来说很好。现在我想知道当有多个`json`文件时如何一次导入所有文件。我找不到任何相关的文档，这是不可能的。请帮助我这是否可能以及如何

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-10-21T21:11:34.613

我想出了一种更优雅的方式来自动导入所有集合：

```
ls -1 *.json | sed 's/.json$//' | while read col; do 
    mongoimport -d db_name -c $col < $col.json; 
done 
```

我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-23T09:21:45.970

您总是可以编写一些 shell 脚本。

```
colls=( mycoll1 mycoll2 mycoll5 )

for c in ${colls[@]}
do
  mongoimport -d mydb -c $c.json
done 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-01-07T13:40:01.167

Windows 批处理版本：

```
@echo off
for %%f in (*.json) do (
    "mongoimport.exe" --jsonArray --db databasename --collection collectioname --file %%~nf.json
) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-05-26T07:18:23.617

你也可以这样做：

```
for filename in *; do mongoimport --db <Database> --collection <Collection Name> --file $filename; done 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-01-15T05:47:33.163

这在 MAC OS X 中对我有用

```
find . -regex '.*/[^/]*.json' | xargs -L 1 mongoimport --db DB_NAME -u USER_NAME -p PASSWORD --collection COLLECTION_NAME  --file 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-03-17T15:41:15.037

对于**windows** bat 文件。如果您在文件夹中有一个 json 文件列表，这会更好。并且集合名称与文件中的名称匹配

```
@echo off
for %%f in (*.json) do (
    "mongoimport.exe" --db databasename --collection %%~nf --drop --file %%f
)
pause 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-01T11:30:17.390

一线解决方案：

`for /F %i in ('dir /b c:\files\*.json') do mongoimport.exe /d db /c files /file c:\file\%i`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-09-10T08:03:59.180

不确定它是否是一个新功能，但`mongoimport`现在可以从标准输入中读取。所以导入多个 JSON 文件可以做的很简单

```
cat *.json | mongoimport --uri "mongdb://user:password@host/db?option=value" --collection example 
```

我正在使用 mongodb-tools v4.2.0 顺便说一句。

**更新**

`mongodbimport`可能会消耗大量内存，这可能导致程序被系统 OOM 杀死。我的机器有 32GB 的 RAM，当我尝试导入存储在 RAM 磁盘中的 ~10GB 数据时，这种情况一直发生。

将一个相对较大的作业分成多个批次：

```
#!/usr/bin/env bash

declare -a json_files=()
for f in *.json; do
    json_files+="$f"
    if [[ "${#json_files[@]}" -ge 1000 ]]; then
        cat "${json_files[@]}" | mongoimport --uri="mongodb://user:pass@host/db" --collection=examples -j8 #--mode=upsert --upsertFields=id1
        json_files=()
    fi
done 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-12-07T18:27:05.777

Linux：

```
> cat one.json two.json > three.json

> mongoimport --db foo --collection baz --file three.json" 
```

或者，文件夹中的所有文件：

```
> cat *.json > big.json

> mongoimport --db foo --collection baz --file "big.json" 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-04-05T13:56:28.327

另一种单行解决方案（假设您在 json 文件所在的文件夹中）：

```
ls | sed 's/.json$//' | xargs -I{} mongoimport -d DATABASE_NAME -c {} {}.json 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-10-04T02:21:46.227

我使用此处的解决方案在我的 bash 配置文件中添加了一个 shell 函数，以便快速执行此操作。

我的示例依赖于将每个集合输出为具有集合名称和`.metadata.json`扩展名的文件的 mongo 导出。

`function mimport() { for filename in *; do collection="${filename%.metadata.json}"; mongoimport --db $1 --collection $collection --file $filename; done }`

在导出文件的路径中使用，将数据库名称传递给命令...

`mimport my_db`

将所有集合加载到本地主机的数据库中。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-07-19T02:47:35.830

我将展示如何仅使用 Linux 的终端（它也适用于 Mac）有效地导入许多集合。

您必须将所有 json 文件放在同一个文件夹中，并且文件名应该是要导入数据库的集合。

所以，让我们开始吧，打开包含 json 文件的文件夹。将 替换`<DATABASE>`为您的数据库名称，然后执行以下行：

`for collection in $(ls | cut -d'.' -f1); do mongoimport --db <DATABASE> --collection ${collection} --file ${collection}.json; done`

**但是那里发生了什么？**

首先，您必须记住括号将首先执行。在这种情况下，它会创建一个所有文件的列表，仅获取每个文件的名称（删除它的扩展名）。

其次，所有列表都将被添加到一个名为集合的局部变量中的循环“for”中（这个变量的名称可以是任何你想要的）

三、“do”执行导入行(*)

最后“完成”，完成循环。

(*) 导入行由“mongoimport”组成，需要数据库名称“--db”、集合名称“--collection”和文件名“--file”。这些要求已由在“for”东西上创建的变量“$collection”填充

我希望对某人有所帮助！祝大家好运 ：）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-15T13:37:11.137

Python：

```
from pathlib import Path
import subprocess

jsons_folder = "./out/"
mongodb_host = "172.22.0.3"
mongodb_port = "27017"
mongodb_user = "root"
mongodb_password = "1234"

for f in Path(jsons_folder).glob("*.json"):
    cmd = [
        "mongoimport", "-h", mongodb_host, "-p", mongodb_port, "--authenticationDatabase", "admin",
        "-u", mongodb_user, "-p", mongodb_password,
        "--db", "callscoring", "--collection", "scoring_result_entry", str(f.absolute())
    ]
    subprocess.run(cmd) 
```

# java - 如何根据hadoop中的公共键连接两个数据集？

> ID：11609649
> 
> 赞同：2
> 
> 时间：2012-07-23T09:20:00.430
> 
> 标签：java, hadoop, mapreduce, hive, apache-pig

我有两个数据集 Customer 和 Goods。客户数据集将客户 ID 作为键，并将客户购买的商品 ID 列表作为价值。Goods 数据集将其作为关键，将其价格作为价值。如何根据外键商品id加入这两个数据集？

```
customer dataset:
customer id, goods id1,goods id2, ...

goods dataset
goods id1, price1
goods id2, price2

The join result dataset I want:
customer id1,price1,price2,...
customer id2,pric3e,price4,... 
```

我是 hadoop 的新手。我知道它可以在 Pig 和 Hive 中完成，但我想用 Hadoop 在 java 中实现它。有谁能够帮我？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:21:59.503

查看[Data-Intensive Text Processing with MapReduce](http://lintool.github.com/MapReduceAlgorithms/index.html)文档`Relational Joins`中的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T13:25:57.587

也许我可以补充保罗的答案。您可以在这里使用分布式缓存的概念。将较小的文件（我猜在您的情况下是**商品数据集**）加载到分布式缓存中。（分布式缓存默认最多可容纳 10Gb 的数据）。然后，您可以使用法线贴图读取**客户数据集**并使用分布式缓存中的匹配数据执行连接。

有趣的事实是，每个映射器都可以访问分布式缓存数据中的数据，而与数据节点无关。

[http://bigdatapartnership.com/map-side-and-reduce-side-joins/](http://bigdatapartnership.com/map-side-and-reduce-side-joins/)可以为您提供有关加入 MapReduce 应用程序的见解。

**Hadoop：Tom White 的权威指南**给出了关于 Map Side Join、Reduce Side Join 和 Join with Distributed Cache 的程序示例。

**Chuck Lam 的Hadoop In Action**的第 5 章也讨论了连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:54:08.790

“商品”数据集有多大？如果它足够小，最简单的做法是将其加载到映射器的内存中（在哈希图中），然后将“客户”数据集作为工作的输入。然后，您可以运行您的工作并在迭代输入时查找“商品”。您可以使用分布式缓存将“货物”数据分发到集群中的每个节点。

# ios - 检测 iOS 应用程序是否被黑客入侵

> ID：11609651
> 
> 赞同：8
> 
> 时间：2012-07-23T09:20:03.063
> 
> 标签：ios, xcode, app-store, jailbreak

我的朋友有一个越狱的 iPad。当他从 Installous 安装 Business Model Generation App 并尝试使用它时，应用程序显示`UIAlertView`以下消息： ![破解版](../Images/c4cae800c511299594ff2d0f0fa2acc5.png)

有人知道该怎么做吗？

我有两个想法：

1.  如果您从 App Store 下载应用程序时设置了一些标志，那么您可以使用此标志：如果`flag = NO`，则显示`UIAlertView`.
2.  带有服务器的东西（但在这种情况下，您应该知道所有设备 ID 以及谁从 App Store 安装了您的应用程序）。

我对吗？如何实现此功能？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T04:44:14.493

您可以检测两个文件：`SC_Info`和`iTunesMetadata.​plist`.

如果您找不到它们，那么您的应用程序被盗版：这些文件是在从 App Store 下载后安装的。

这是要检查的代码：

```
NSString * bundlePath = [ [NSBundle mainBundle] bundlePath ];
if ( ! [ [NSFileManager defaultManager] fileExistsAtPath: ( @"%@/SC_Info", bundlePath ) ] )
{
    // jailbroken
}
if ( ! [ [NSFileManager defaultManager] fileExistsAtPath: ( @"%@/iTunesMetadata.​plist", bundlePath ) ] )
{
    // jailbroken
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:43:06.770

有一些库可以检测应用程序是否被破解（以及越狱），这个[问题](https://stackoverflow.com/questions/846309/reducing-piracy-of-iphone-applications)提供了一个很好的概述，但基本上它是通过检查签名者身份来完成的

一个库是[AntiCrack](http://www.cocoanetics.com/anticrack/)。我没有使用过这个库，所以我不知道它的效果如何

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-01T11:06:13.500

这是一个老问题，但作为一名越狱开发人员，我认为它可以帮助那些在寻找越狱检测绕过或类似的东西时偶然发现它的人，这些东西现在越来越相关。OP 的问题现在经常出现，比以前更多。

即使在 2020 年的今天，这类应用程序也会检测到各种越狱实用程序。我自己是一名越狱开发人员。当我们为任何 iOS 版本构建越狱时，我们会添加相当多的基础二进制文件以进一步提供帮助。

现在我们将它们放置在各种隐藏文件夹中，例如`/jb/bin`or`/jailbreak/binbag/`或`/jb/jbstuff/`等，而在过去，它们通常被放置在默认的 iOS 目录中，例如 /bin`/sbin`等。

具有越狱检测功能的应用程序会`[NSFileManager defaultManager] fileExistsAtPath:...`检查`Cydia`这些基本二进制文件是否存在（大多数情况下它们会检查`/bin/bash`，但现在检查更多），而今天，它们甚至会检查是否`ROOT FS`已重新安装为`R/W`（通常`RO`是只能`/var`写）。

下载的调整`Cydia`通常不会检查越狱检测（嗯，大多数时候 - 各种越狱开发人员之间存在戏剧性，所以即使在今天也存在人为限制），但他们会检查您下载的存储库。

`AppSync Unified`大多数时候，它就像调整最终所做的一样简单。

调整的代码中有一个变量或`#define`某处具有正确的`Cydia`回购 URL 或标识符，调整检查`Cydia`列表以查看调整是否已从那里下载。如果没有，它将显示警报。

一些调整实现了奇怪的 DRM，每次重新启动手机时都会从服务器端下载许可证（这很奇怪，在越狱社区中很少使用）。

以下是 AppSync 统一调整功能的示例：

```
#define DPKG_PATH "/var/lib/dpkg/info/net.angelxwind.appsyncunified.list"

....

if (access(DPKG_PATH, F_OK) == -1) {
        NSLog(@"You seem to have installed AppSync Unified from a Cydia/APT repository that is not cydia.akemi.ai (package ID net.angelxwind.appsyncunified).");
        NSLog(@"If someone other than Linus Yang (laokongzi) or Karen/あけみ is taking credit for the development of this tweak, they are likely lying.");
        NSLog(@"Please only download AppSync Unified from the official repository to ensure file integrity and reliability.");

}

.... 
```

所以在这个越狱调整的情况下，它只是检查它被下载的 repo。这里的一个简单补丁就是将其加载`AppSyncUnified.dylib`到诸如 Hopper 或 IDA 甚至 Radare2 之类的 arm64/arm 反汇编程序中并修补分支。将其设为 a`B`而不是条件分支，以便永远不会考虑比较的结果。就如此容易。如果您想分析 AppSync Unified 的完整源代码，请访问[GitHub 存储库](https://github.com/angelXwind/AppSync/blob/master/AppSyncUnified/AppSyncUnified.x#L114)。

当然，正如我所说，许多调整使用更复杂的方案，如服务器端 DRM，但它们都不是防故障的。

*请理解我不容忍tweak 盗版。此回复旨在帮助新用户访问此页面，旨在提供有关越狱检测和越狱调整 DRM 的当前状态的一些见解。请从适当的回购购买付费调整，它们只需一美元左右。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-14T08:18:14.827

我在 swift 上使用此代码：

```
if Bundle.main.infoDictionary?["SignerIdentity"] != nil
     || !FileManager.default.fileExists(atPath: ("\(Bundle.main.bundlePath)/SC_Info"))
     || !FileManager.default.fileExists(atPath: ("\(Bundle.main.bundlePath)/iTunesMetadata.​plist")){
        // Jailbroken
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-23T09:52:32.627

这相当简单，但您可以检查是否安装了 cydia 应用程序（通过检查它的文件夹是否存在）。如果已安装，则您不信任该设备。这留下了错误地释放从应用商店下载您的应用的越狱 iPhone/iPad 的风险。

# php - 关注用户时获取mysql记录

> ID：11609654
> 
> 赞同：0
> 
> 时间：2012-07-23T09:20:33.770
> 
> 标签：php, mysql

我有两张桌子：

```
[TABLE1]

+----------+-------------------+
| USERNAME | POST              |
+----------+-------------------+
| Bob      | 'Hi There'        |
| Jack     | 'Hello'           |
| Bob      | 'Today is Monday' |
+----------+-------------------+

[TABLE2]

+----------+-----------+
| USERNAME | FOLLOWING |
+----------+-----------+
| Mike     | Jack      |
| Jack     | Bob       |
| Bob      | Jack      |
| Jack     | Mike      |
+----------+-----------+ 
```

我知道当你想要一行时如何连接两张桌子.. 但是当你想解决下面的问题时呢？

```
Select * from TABLE1 when TABLE1.USERNAME IS A USERNAME JACK is FOLLOWING; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:25:05.440

对于用户名 Jack 如下：

```
select TABLE1.USERNAME, TABLE1.POST 
from TABLE1, TABLE2
where 
     TABLE1.USERNAME = TABLE2.FOLLOWING 
     and
     TABLE2.USERNAME = "Jack" 
```

对于关注 Jack 的用户名

```
select TABLE1.USERNAME, TABLE1.POST 
from TABLE1, TABLE2
where 
     TABLE1.USERNAME = TABLE2.USERNAME 
     and
     TABLE2.FOLLOWING = "JACK" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:30:35.000

这有帮助吗？

```
SELECT * FROM table1 t1, table2 t2
WHERE t2.username = 'Jack'
AND t1.username = t2.following 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:25:24.770

尝试（假设 PHP）

```
$username - 'Jack';
"SELECT t1.* FROM TABLE1 t1
INNER JOIN table2 t2 
ON t1.username = t2.username AND t2.following = '".$username."' "; 
```

**注意：**两个表的列名是否相同，那么您可以使用`USING(username)`而不是`ON`条件

# xml - VB.net xml 检查元素是否存在以及它是否具有值

> ID：11609655
> 
> 赞同：1
> 
> 时间：2012-07-23T09:20:40.477
> 
> 标签：xml, vb.net, xml-parsing, gettype

我有一个 xml ant 我试图检查一个元素是否存在，如果是，那么它是否有一个值
xml 示例：

```
<Attributes Version="1.0.2012">  
   <OpenAtStart>True</OpenAtStart>  
   <RefreshTime>60</RefreshTime>  
 </Attributes> 
```

所以我想检查 OpenAtStart 是否存在，然后我想检查它是否有一个值：所以我构建了下面的函数

```
Private Function existsOrEmpty(ByVal type As Type, ByVal node As XmlNode, ByVal defaultValue As Object) As Object
    Dim myObj As Object = Nothing
    Try
        Cursor.Current = Cursors.WaitCursor
        If node IsNot Nothing Then
            Select Case type
                Case GetType(Integer)
                    If Integer.TryParse(node.InnerText, myObj) = False Then
                        myObj = defaultValue
                    End If
                Case GetType(Double)
                    If Double.TryParse(node.InnerText, myObj) = False Then
                        myObj = defaultValue
                    End If
                Case GetType(Boolean)
                    If Boolean.TryParse(node.InnerText, myObj) = False Then
                        myObj = defaultValue
                    End If
                Case Else
                    myObj = node.InnerText
            End Select
        Else
            myObj = defaultValue
        End If

    Catch ex As Exception
        gError.GetAppEx(ex, CLASS_NAME & ".existsOrEmpty")
    Finally
        Cursor.Current = Cursors.Default
    End Try
    Return myObj
End Function 
```

这是一个好方法还是有更好/更快的方法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T10:28:22.117

尝试`LINQ-XML`有效地解析 XML 文档/字符串。

```
 Dim str = "<Attributes Version=""1.0.2012"">" _
                   & "<OpenAtStart>True</OpenAtStart>" _
                   & "<RefreshTime>60</RefreshTime></Attributes>"

 Dim doc As XDocument = XDocument.Parse(str)
 Dim element = doc.Root.Element("OpenAtStart")

 If IsNothing(element) Then
      Console.WriteLine("Not Found")
 Else
      Console.WriteLine(element.Value)
      Console.WriteLine(element.Parent.Element("RefreshTime").Value)
 End If 
```

# opencv - 特征检测 - 大图中的小项目

> ID：11609657
> 
> 赞同：11
> 
> 时间：2012-07-23T09:20:57.750
> 
> 标签：opencv, computer-vision

假设您有两个图像。在一个中，您有一个小图标（例如小于 300X300 像素）。第二个是一个非常大的，并且在您内部有一个（或多个）较小的图标实例（当然以不同的比例，旋转）。

手头的任务是在大图中找到图标的实例。你们将如何处理这个问题？

我尝试通过使用 OpenCV 库来使用基于特征的对象检测，但是对于拥挤的大图像（包含许多特征点），匹配是不确定的。我已经使用 BRUTE/FLAN 匹配算法尝试了 SURF/OBJ 特征提取器。

根据我的经验，匹配似乎没有注意两个图像上特征点之间的几何关系。作为可视化帮助，我附上了两个示例图像的特征点实例。![在此处输入图像描述](../Images/69d22ef6c93418cfcbc617708d899f72.png)

这是任务的一个更难的例子。我已经突出显示了大图中的图标。![在此处输入图像描述](../Images/a0e1b741a0c63e013fb3689f73631615.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T13:10:04.307

基于有限的经验，我对遇到此类问题的其他人提出三项建议。

**1) 使用[Mathieu Labbé 的 FindObject 进行实验](http://code.google.com/p/find-object/)**

这是一个非常好的工具，它帮助我快速进行实验以找到用于特征检测/描述的良好设置组合。只需将您的图标加载为对象，并将您的示例大图像加载为场景。然后进行调整，直到为您的应用程序获得可靠的结果。作为奖励，他最近添加了 BRISK 和 FREAK 非专利保护特征检测/描述方法。

**2）获得现实的解决方案**

您的图标对象和您正在搜索的大场景中的实际图标的分辨率是如此不同。在我的理解中，这些方法的尺度不变性实际上是非常有限的。查看[Ievgen Khvedchenia 所做的出色比较](http://computer-vision-talks.com/2012/08/a-battle-of-three-descriptors-surf-freak-and-brisk/)。通过将图像大小调整到您期望的范围的中间，您可能会获得更好的结果。

**3）使图标示例图像更逼真（例如，模糊）**

与 #2 相关，我发现在更逼真的场景中搜索时，拥有非常清晰的样本图像效果不佳。我对我的尖锐样本应用高斯，以使它们与我期望找到的更相似。下面有一个例子。奇怪的公式只是确保内核尺寸是奇数。

```
def proportional_gaussian(image):
    kernel_proportion = 0.005
    kernel_w = int(2.0 * round((image.shape[1]*kernel_proportion +1)/2.0)-1)
    kernel_h = int(2.0 * round((image.shape[0]kernel_proportion +1)/2.0)-1)
    return cv2.GaussianBlur(image, (kernel_w, kernel_h), 0) 
```

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T09:40:46.923

您的特征匹配方法很好。如果可以使用颜色，请使用预处理来找到感兴趣的区域，例如[直方图反投影](http://docs.opencv.org/2.4/doc/tutorials/imgproc/histograms/back_projection/back_projection.html)，然后进行斑点提取和一些形状分析。

您应该匹配从大图像到小图像的所有特征。这导致许多匹配项很少有内点。

由于您的图标是平面的，您可以使用单应性作为匹配的几何约束。无需编写任何代码，您可以尝试 OpenCV 示例“descriptor_extractor_matcher”，该示例位于 OpenCV 源代码的示例目录中。

```
./descriptor_extractor_matcher SURF SURF BruteForce NoneFilter icon.jpg image.jpg 3 
```

有关详细信息，请参阅descriptor_extractor_matcher 的帮助输出。

您可以尝试切换图像的顺序，我不记得哪个是训练图像，哪个是查询图像。

*关于这种对象检测*的论文是 David Lowe 的***“Distinctive Image Features from Scale-Invariant Keypoints”**。在本文的第 7.3 节中，他描述了他处理非常低的内点/异常值比率的方法，这似乎是您的情况。*

 *祝你好运！*

# maven - maven-antrun-plugin sshexec 与 cygwin 无法找到我的密钥文件，无论我使用哪种格式

> ID：11609661
> 
> 赞同：1
> 
> 时间：2012-07-23T09:21:22.537
> 
> 标签：maven, cygwin, ssh-keys, maven-antrun-plugin

无论我使用哪种密钥文件格式 - 正斜杠、反斜杠、cygwin 格式、maven-antrun-plugin sshexec 都找不到我的密钥文件，但它就在那里。我究竟做错了什么？ `<sshexec username="cloudera" keyfile="C:\Users\gaga\.ssh\id_rsa" host="myhost" command="bla"/>`

# delphi - Delphi XE - 现有应用程序中的本地化

> ID：11609669
> 
> 赞同：0
> 
> 时间：2012-07-23T09:22:07.140
> 
> 标签：delphi, localization, delphi-xe

我需要修改现有应用程序以获得多语言支持。这意味着使用相同的英文版数据库（Firebird），我的客户想在中国销售该应用程序。

应用程序是用 Delphi 7 编写的，用于访问数据库的组件来自[FibPlus](http://www.devrace.com/en/fibplus/)套件。

从[这个](https://stackoverflow.com/questions/8786673/delphi-application-independent-of-regional-settings)问题开始，据我所知，使用 .AsDate、.AsDateTime 等例程正在使用系统中的区域设置转换数据库中的数据。这意味着我将使用当前格式设置向最终用户显示数据，对吗？

在数据库中保存数据时，数据库连接器应正确（使用当前格式设置）保存数据库中的数据。或者，我错了？

所以，基本上我的问题是：我应该如何管理日期时间、千位、小数等[分隔符](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.TFormatSettings)，以便向最终用户显示/保存正确的来自/进入数据库的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:31:14.403

`AsDateTime`等不要使用区域设置进行转换，因为它们根本不转换。就您的应用程序而言，数据库读取和写入`TDateTime`值，而不是字符串。只要您*不*将`TDateTime`值与`string`s 相互转换，就没有问题。标准编辑控件将使用最终用户的区域设置显示它们。只有当您自己执行转换时，您才需要查看`FormatSettings`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T14:43:17.643

您会考虑数据库和 FibPlus 的连接字符串中的文本数据类型。这样就可以正确存储/检索非英文字母。特别是如果以后的非 Delphi 程序需要这样的数据库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-23T16:10:32.983

这取决于用于在数据库中存储日期/时间值的格式。如果您需要在保存之前将日期/时间转换为字符串，您应该选择一种内部格式来保存这些值。在我们的应用程序中，我们更喜欢“yyyy-MM-dd hh:mm:ss”这样的格式，因为这种格式消除了任何歧义。此外，我建议在保存到数据库之前将所有日期/时间值调整为一个时区（例如 GMT），然后在显示给用户之前将它们修改回来。

# c# - 在 Windows Phone 7 上创建视频文件

> ID：11609673
> 
> 赞同：6
> 
> 时间：2012-07-23T09:22:20.447
> 
> 标签：c#, silverlight, windows-phone-7, video

*是否可以在Windows Phone*上以编程方式创建视频文件`(e.g. .wmv, .avi, etc.)`（合并`BMP`和`.wav`文件）？我发现了很多 3rd 方实用程序，但实际上它们是基于*C++*的，不能在*Windows Phone Platform*上运行。

 ***非常感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:39:58.597

我不建议走这条路……电话是一种轻量级的设备。如果你想做这些，建议上传它们并在其他地方做。完成后，将下载结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:40:44.003

即使有可能，我也会质疑它在考虑手机性能方面的有用性。在 1-1.4GHz 单核上编码视频并不是一个好主意。您将需要低级优化或硬件编码，这两者都不适用于 3rd 方开发人员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:29:12.270

将 RAW 视频写入后端时的成像场景。1 帧约为 1.5 MB，几秒钟后您将获得约 100MB 的上传空间。移动数据连接无法处理此问题（移动数据连接也无法处理）。相反，客户端应该预处理数据并将 RAW 视频数据转换为手机上的压缩视频文件（然后提交到服务器，例如用于持久存储）。***

# hibernate - hibernate - 列值的自动转换（字符串到枚举）

> ID：11609678
> 
> 赞同：0
> 
> 时间：2012-07-23T09:22:43.913
> 
> 标签：hibernate, hibernate-mapping

有没有办法做这样的事情。我有一个叫做人的实体。

```
@Entity
@Table(name = "PERSON")
public class Person {
   @Column(name = "NAME", length = 128, columnDefinition = "VARCHAR2(128)")
   String name;
   @Column(name = "NATIONALITY", length = 128, columnDefinition = "VARCHAR2(128)")
   String nationality;
} 
```

'NATIONALITY' 列具有数值 - 每个数字都是一个国家/地区的代码。我想将“国籍”字段映射到我的自定义枚举并创建一些方法转换代码<->国家。

```
@Entity
@Table(name = "PERSON")
public class Person {
   @Column(name = "NAME", length = 128, columnDefinition = "VARCHAR2(128)")
   String name;
   @Column(name = "NATIONALITY", length = 128, columnDefinition = "VARCHAR2(128)")
   Nationality nationality;
}

enum Nationality {
   USA, Brazil, Germany; // etc.
}

public static Nationality codeToNationality(String code); 
```

有没有这样的休眠方法？我无法修改列定义 - 数据库是只读的。

我想要实现的第二件事是排除任何未解决国籍代码的实体。codeToNationality(...) == null 的实体对休眠是不可见的。

我的模型（个人、国籍）只是一个例子。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:39:20.857

两个问题：

1.  通常将枚举映射到某个字符串，并且
2.  映射未知到空

可以通过创建适当的[UserType](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/usertype/UserType.html)来解决。

可以从[这里](http://learningviacode.blogspot.de/2011/09/creating-hibernate-custom-type-4.html)找到一些关于枚举和自定义用户类型的示例。自定义类型的一般描述是[Hibernate 文档](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html_single/#types-custom)的一部分。

其他选项是为枚举提供特定的设置器，这些设置器将与映射到数据库列的字符串值相互转换。如果仅在此实体中需要此自定义类型，这可能是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:47:44.403

好的，我已经使用 UserType 将字符串转换为国籍。

```
public Object nullSafeGet(ResultSet rs, String[] names, SessionImplementor session, Object owner) throws HibernateException, SQLException {
   String value = rs.getString(names[0]);
   // resolve nationality
   return /nationality found/ ? /Nationality object/ : null;
} 
```

现在我还有其他问题。如何创建仅查找已解决国籍的标准？

当我做

```
criteria.add(Restrictions.isNotNull("nationality")); 
```

条件查询字符串字段，而不是国籍字段，该字段始终不为空。

我知道标准适用于原始数据库（在转换为 java 实体之前），所以我怎样才能得到我想要的 - 过滤未解决国籍的行？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:50:47.367

对于您的第一个问题，请查看`@Enumerated`JPA 注释，这会将您的字符串映射到枚举。使用`(EnumType.STRING)`属性，您应该能够覆盖枚举值的 name() 并完全按照它们在数据库中的状态返回字符串。

# matlab - matlab输入输出：将平方英寸转换为平方厘米？

> ID：11609679
> 
> 赞同：0
> 
> 时间：2012-07-23T09:22:49.230
> 
> 标签：matlab

Matlab 输入输出：如何编写代码将面积从平方英寸转换为平方厘米，然后以平方英寸和平方厘米打印结果？我知道转换 1 平方英寸 = 2.54^2 平方厘米，并且我知道如何分配变量等。我对 MatLab 感到非常沮丧。

先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:48:19.203

为了帮助您入门，并作为您问题的参考，以下是您问题的解决方案：

把它放在一个名为`sqinch2sqcm.m`

```
function sqcm = sqinch2sqcm(sqinc)
    sqcm = (2.54)^2 * sqinc;
end 
```

如果这个文件在你的 matlab 路径上（就在 matlab 的当前目录中（[如果你不知道那是什么，请看这里](http://etools.fernuni.ch/matlab/matlab2/en/image/gui_currentdir_s.png)）就足够了），你可以尝试执行`sqinch2sqcm(4)`来测试你的函数。

# version-control - 使用化石 scm / 共享主机使网站保持最新

> ID：11609680
> 
> 赞同：0
> 
> 时间：2012-07-23T09:22:50.493
> 
> 标签：version-control, fossil

对于我最新的网站项目，我第一次使用了化石，而且效果很好。到目前为止，我所做的是在我的 PC 上开发，然后推送到 chiselapp。因此，我现在可以与一个使用 chiselapp 存储库作为公共基础的团队一起在该站点上工作。非常好。

同时我已经上传了网站并且它正在运行。我想继续在 PC 上进行更改，然后上传更改。到目前为止，我已经手动完成了这项工作，跟踪更改的文件，然后将它们 ftp'​​ed 到实时站点。

当然，我想使用化石来跟踪更改并保持网站最新。最好的方法是什么？像我对 chiselapp 所做的那样推送文件似乎很好，但我不知道如何在另一台服务器上做到这一点。它是共享主机，没有 root 访问权限，没有命令行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T14:31:30.143

您说您的网站是“共享主机，没有 root 访问权限，没有命令行”。假设您可以使用 CGI 是否安全？

如果是这样，请参阅“[如何配置 Fossil 服务器：Fossil 作为 CGI](https://www.fossil-scm.org/index.html/doc/tip/www/server.wiki#cgi) ”：

“Fossil 服务器也可以作为 CGI 程序从普通 Web 服务器运行。此功能允许 Fossil 无缝集成到更大的网站中。CGI 是实现自托管化石存储库的方式。

要将 Fossil 作为 CGI 运行，请在 Web 服务器的 CGI 目录中创建一个 CGI 脚本（此处称为“repo”）并具有如下内容：

```
#!/usr/bin/fossil
repository: /home/fossil/repo.fossil 
```

……”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:18:54.387

您可以在 chiselapp 创建存储库，然后将其克隆到您的 PC。将其设置为自动同步（默认模式）。就这样。

如果您想在 chiselapp 上保留分支，也许您可​​以使用 --private 选项进行克隆。

也许您可以在 Web 服务器上设置一个 cron 表。每小时将化石更新到生产版本。

# javascript - 为什么这些链式速记运算符不起作用？

> ID：11609681
> 
> 赞同：2
> 
> 时间：2012-07-23T09:22:54.300
> 
> 标签：javascript, operators, shorthand, chained

在 javascript 中使用链式速记运算符编写交换函数时，我偶然发现了一些让我很困惑的东西。

此代码应该交换 a 和 b 值。

```
var a = 4532;
var b = 969;

a^=b^=a^=b; 
```

但它不是：b = 4532，而是 a = 0。

如果我将此代码分成两行，它会按预期工作。

```
var a = 4532;
var b = 969;

b^=a^=b;
a^=b; 
```

技术解释是什么？

PS：如果有人想快速尝试一下，这[是 jsfiddle 上的代码。](http://jsfiddle.net/ytmhp/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:41:34.777

在回答你的问题之前，你能说出下面代码的结果吗？

```
var c = 1;
c += c += 1; 
```

你可能认为是4，你自己试试吧：）

我不知道如何在后台解释 javascript 代码。以下是我试图解释为什么会发生这种情况的方法。

，`a += b`它等于`a = a + b`。所以，`c += c += 1`是`c = c + (c = c + 1)`。以形式赋值`(c + (c = c + 1))`，结果为`(c + c + 1)`。这里我认为是关键点，而且令人困惑的是，变量`c`仍然是`1`，尽管我们`c + 1`在第一次赋值时给它重新赋值了一个新值`c += 1`。

所以，`a^=b^=a^=b`等于`a = a^b^a^b`，就是`0`。因为内部更改`a`被忽略了，或者它可能是一个错误？

我的另一个猜测是，代码可能会像这样扩展：

```
c = 1 + (c = 1 + 1)// in form of c = c + (c = c + 1) 
```

这就是我的猜测，因为我不知道 VM 生成的字节码是什么样子的。希望它有用。

# mysql - 如何连接两列不同的 mySQL 选择语句？

> ID：11609682
> 
> 赞同：1
> 
> 时间：2012-07-23T09:22:53.973
> 
> 标签：mysql

如何组合以下两个 mySQL select 语句，以便将每个语句放在不同的列但在同一个表中？

```
select a.property as p1 from T1 a inner join T2 b on a.id = b.id1;

select a.property as p2 from T1 a inner join T2 b on a.id = b.id2; 
```

这些语句中的每一个都单独工作，并将返回相同数量的行。我只想在同一张表中的两列中获得两个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:28:42.193

在这样的单个语句中使用它

```
select 
     case when a.id=b.id1 then a.property end as p1,
     case when a.id=b.id2 then a.property end as p2
from 
     T1 a inner join T2 b on a.id in (b.id1,b.id2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:40:58.167

您可以使用此解决方案：

```
SELECT
    a.property AS p1, b.property AS p2
FROM
(
    SELECT a.property, @rn1:=@rn1+1 AS rn
    FROM T1 a
    INNER JOIN T2 b ON a.id = b.id1
    CROSS JOIN (SELECT @rn1:=0) var_init
) a
INNER JOIN
(
    SELECT a.property, @rn2:=@rn2+1 AS rn
    FROM T1 a
    INNER JOIN T2 b ON a.id = b.id2
    CROSS JOIN (SELECT @rn2:=0) var_init
) b ON a.rn = b.rn 
```

* * *

**编辑：**这是 Madhivanan 解决方案的变体，应该更简单：

```
SELECT   MAX(CASE WHEN a.id=b.id1 THEN a.property END) AS p1,
         MAX(CASE WHEN a.id=b.id2 THEN a.property END) AS p2
FROM     T1 a 
JOIN     T2 b ON a.id IN (b.id1,b.id2)
GROUP BY a.id 
```

我们添加了 GROUP BY 和 MAX，这样我们就不会得到两行`id`，我们只选择 case 表达式的最大值，它为每个组获取非空值（基本上将每列中的属性放在同一每个行`id`）。

# multiprocessing - OpenCL：将工作组定位到特定设备

> ID：11609686
> 
> 赞同：0
> 
> 时间：2012-07-23T09:23:15.487
> 
> 标签：multiprocessing, opencl, cpu-architecture, gpu, multiple-gpu

假设我有一台多处理器机器。我可以将我的工作组绑定到特定设备（处理器）吗？我们有任何 API 可以在 openCL 中完成这项任务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:14:12.483

你正在寻找一种叫做设备裂变的东西。我相信目前除了 cpus 以外的设备不支持它。 [相关问题在这里](https://stackoverflow.com/questions/10476315/processor-affinity-in-opencl)

# android - 带有 ArrayAdapter 的 ListView，当我单击一行时出现异常

> ID：11609693
> 
> 赞同：0
> 
> 时间：2012-07-23T09:23:25.487
> 
> 标签：android, listview, android-arrayadapter

我正在使用 ArrayAdapter 创建一个 listView。每个 View 包含 4 个 TextView 和一个 ImageButton。当我单击一行时，它会在表格中显示数据，如果我单击该行中的 imageButton，它会将用户发送到另一个活动。

我的问题是：当我滚动列表并单击 imageButton （在开始时不在列表的可见部分中）时，我有一个异常

```
07-23 11:07:50.150: E/AndroidRuntime(9326): FATAL EXCEPTION: main
07-23 11:07:50.150: E/AndroidRuntime(9326): java.lang.IllegalStateException: Could not execute method of the activity
07-23 11:07:50.150: E/AndroidRuntime(9326):     atandroid.view.View$1.onClick(View.java:2700)
07-23 11:07:50.150: E/AndroidRuntime(9326):at ndroid.view.View.performClick(View.java:3127)
07-23 11:07:50.150: E/AndroidRuntime(9326): at android.view.View$PerformClick.run(View.java:12025)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at android.os.Handler.handleCallback(Handler.java:587)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at android.os.Looper.loop(Looper.java:132)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at android.app.ActivityThread.main(ActivityThread.java:4126)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at java.lang.reflect.Method.invokeNative(Native Method)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at java.lang.reflect.Method.invoke(Method.java:491)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at dalvik.system.NativeStart.main(Native Method)
07-23 11:07:50.150: E/AndroidRuntime(9326): Caused by: java.lang.reflect.InvocationTargetException
07-23 11:07:50.150: E/AndroidRuntime(9326):     at java.lang.reflect.Method.invokeNative(Native Method)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at java.lang.reflect.Method.invoke(Method.java:491)
07-23 11:07:50.150: E/AndroidRuntime(9326):     at android.view.View$1.onClick(View.java:2695)
07-23 11:07:50.150: E/AndroidRuntime(9326):     ... 11 more
07-23 11:07:50.150: E/AndroidRuntime(9326): Caused by: java.lang.NullPointerException
07-23 11:07:50.150: E/AndroidRuntime(9326):     at com.android.androidlistview.MainActivity.MyHandler(MainActivity.java:48) 
```

这是我的代码：

主要活动 ：

```
public class MainActivity extends ListActivity {

private ListView listView;

private String id;
private static final int REQUEST_CODE = 1;
private AccountNameListAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ArrayList<Account> accountData = new ArrayList<Account>();
    for (int i = 0; i < 50; i++) {
        Account account = new Account("n" + i, "test", "0154654654",
                "gdfg", "gfdg", "2635454564");
        accountData.add(account);
    }

    adapter = new AccountNameListAdapter(this, R.layout.list_detail,
            accountData);

    listView = this.getListView();
    listView.setAdapter(adapter);

}

public void MyHandler(View v) {
    ImageButton cb = (ImageButton) v;

    int position = Integer.parseInt(cb.getTag().toString());

    View o = listView.getChildAt(position).findViewById(R.id.blocCheck);

    TextView t = (TextView) listView.getChildAt(position).findViewById(
            R.id.id);
    Toast.makeText(getApplicationContext(), t.getText(), Toast.LENGTH_LONG)
            .show();

    Intent editIntent = new Intent(MainActivity.this, EditActivity.class);
    editIntent.putExtra("accountId", t.getText());
    startActivityForResult(editIntent, REQUEST_CODE);

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {

        final Account account = new Account("424242", "RhfghOCK", "0154654654",
                "ghfgh", "hgfh", "2635454564");

        adapter.add(account);
        adapter.notifyDataSetChanged();

    }

} 
```

}

第 48 行对应于：

```
View o = listView.getChildAt(position).findViewById(R.id.blocCheck); 
```

我的自定义适配器：

```
public class AccountNameListAdapter extends ArrayAdapter<Account> {

    private Context context;
    private int layoutResourceId;   
    private ArrayList<Account> data;
    private TableLayout table;
    private TextView tableName;
    private TextView tableId;

    public AccountNameListAdapter(Context context, int layoutResourceId, ArrayList<Account> data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
        table = (TableLayout) ((Activity) context).findViewById(R.id.tableLayout);
        tableName = (TextView) ((Activity) context).findViewById(R.id.NameText);
        tableId = (TextView) ((Activity) context).findViewById(R.id.idText);
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {           

        AccountHolder holder = null;

        if(convertView == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            convertView = inflater.inflate(layoutResourceId, parent, false);

            holder = new AccountHolder();

            convertView.setClickable(true);
            convertView.setFocusable(true);

            convertView.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    new AlertDialog.Builder(context).setTitle("touched").show();                   
                    table.setVisibility(0);
                    tableName.setText("ok name");
                    tableId.setText("ok "+ data.get(position).getAccountId());                      
                }

            });

            holder.txtName = (TextView)convertView.findViewById(R.id.nom);
            holder.txtId = (TextView)convertView.findViewById(R.id.id);

            convertView.setTag(holder);

        }
                   else{
        holder = (AccountHolder)convertView.getTag();
        }

        holder.txtName.setText(data.get(position).getName());
        holder.txtId.setText(data.get(position).getAccountId());

        ImageButton img = (ImageButton) convertView.findViewById (R.id.check);  
        img.setTag (position);
        });

        return convertView;
    }

    static class AccountHolder
    {
        TextView txtName;
        TextView txtId;
    }

} 
```

list_detail.xml ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal" android:layout_width="fill_parent"
android:layout_height="wrap_content">

<TableLayout android:id="@+id/blocCheck" 
    android:background="#EEF9F8"
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp">

    <TableRow android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:paddingLeft="4sp"
        android:paddingBottom="4sp">
        <LinearLayout
            android:orientation="horizontal" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:paddingLeft="20sp"
            android:layout_weight="1" 
            android:gravity="center"
            >

            <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:textSize="20sp"
                android:text="Name : " 
                android:layout_gravity="left"
                android:layout_marginRight="5sp" />
            <TextView android:id="@+id/nom" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:textSize="20sp"
                android:layout_gravity="left" />
        </LinearLayout>
    </TableRow>

    <TableRow android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:paddingLeft="4sp"
        android:baselineAligned="true">
        <LinearLayout
            android:orientation="horizontal" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:paddingLeft="20sp"
            android:layout_weight="1" 
            android:gravity="center">
            <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:textSize="20sp"
                android:text="Id : " 
                android:layout_gravity="left"
                android:layout_marginRight="5sp" />
            <TextView android:id="@+id/id" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:textSize="20sp"
                android:layout_gravity="left" />
        </LinearLayout>
        <ImageButton android:layout_height="wrap_content" 
            android:id="@+id/check"
            android:layout_width="wrap_content" 
            android:background="@drawable/edit"
            android:layout_gravity="right"
            android:layout_marginRight="10sp" 
            android:onClick="MyHandler"/>
    </TableRow>
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:47:34.483

仅当位置对应于屏幕上的可见子项时，该方法`getChildAt`才会返回`ListView`有效的`View`（静止）。`null`提供给该方法的整数必须在`ListView.getLastVisiblePosition()`-定义的区间内`ListView.getFirstVisiblePosition()`。

尝试从`position`的值中减去`getFirstVisiblePosition()`：

```
View o = listView.getChildAt(position - listView.getFirstVisiblePosition()).findViewById(R.id.blocCheck); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:14:10.500

尝试设置自定义列表 Linearlayout id 并基于该单击事件调用....

这是 ListAdapter 的调用

```
lv.setAdapter(new Listadapter(getApplicationContext(), R.id.listView1, list)); 
```

这是 ListAdapter 类....

```
public class Listadapter extends ArrayAdapter<BinForBlog>
        {
            ArrayList<BinForBlog> mList = new ArrayList<BinForBlog>();
            public Listadapter(Context context, int textViewResourceId,ArrayList<BinForBlog> list) 
            {
                super(context, textViewResourceId, list);
                this.mList = list;

            }
            @Override
            public View getView(int position, View convertView, ViewGroup parent) 
            {

                View v = convertView;

                if(v==null)
                {
                    LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    v=li.inflate(R.layout.custom_blog, null);

                }

                TextView Title = (TextView) v.findViewById(R.id.blog_title);
                TextView Date = (TextView) v.findViewById(R.id.blog_date);
                TextView Desc = (TextView) v.findViewById(R.id.blog_desc);
                LinearLayout content = (LinearLayout) v.findViewById(R.id.lnrblog);

                final BinForBlog listitem = mList.get(position);

                // For Underline
                SpannableString text = new SpannableString(listitem.getTitle());
                text.setSpan(new UnderlineSpan(), 0, text.length(), 0);

                Title.setText(text);
                Date.setText(listitem.getDate());
                Desc.setText(listitem.getDesc());

                content.setOnClickListener(new OnClickListener()
                {

                    public void onClick(View arg0) 
                    {

                        Intent i = new Intent(getApplicationContext(),show_blog_web.class);
                        i.putExtra("link1", listitem.getLink());
                        startActivity(i);

                    }
                });

                return v;
            }

        } 
```

# android - 图像的缩放动画

> ID：11609694
> 
> 赞同：0
> 
> 时间：2012-07-23T09:23:25.937
> 
> 标签：android, image, android-animation

我是 Android 新手，我正在开发一个简单的小应用程序，其中包含主页上的缩放动画。上周我一直试图让它工作，但我没有设法获得预期的输出。

我正在使用以下代码，但我得到的结果就像我从图像的一侧（从下到上）获取动画，但是，我想居中动画（从下到上）。

```
ImageView imageView = (ImageView) findViewById(R.id.animationimage);
ScaleAnimation scale = new ScaleAnimation((float) 1.0, (float) 1.5, (float) 1.0, (float) 1.5);
scale.setFillAfter(true);
scale.setDuration(700);
imageView.startAnimation(scale); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:39:25.897

愿这对您有所帮助：

利用，

```
 ScaleAnimation animation = new ScaleAnimation(fromXscale, toXscale, fromYscale, toYscale, Animation.RELATIVE_TO_SELF, (float)0.5, Animation.RELATIVE_TO_SELF, (float)0.5); 
```

# android - 如何将图像侧向或倒置？

> ID：11609695
> 
> 赞同：8
> 
> 时间：2012-07-23T09:23:36.233
> 
> 标签：android

我有一个自定义视图，我正在使用 onDraw() 绘制到我的画布上。我正在此画布上绘制图像。

我想把图像倒置有点像在水平线上翻转作为参考。这与将图像旋转 180 度或 -180 度不同。

同样，我想镜像或侧向翻转，即使用垂直线作为枢轴或参考。同样，这与 canvas.rotate() 提供的不同。

我想知道该怎么做。我应该使用矩阵还是画布提供任何方法来做到这一点，比如“旋转”。

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-23T09:27:01.447

你不能直接用 Canvas 来做。在绘制位图之前，您需要实际修改位图（使用矩阵）。幸运的是，这是一个非常简单的代码：

```
public enum Direction { VERTICAL, HORIZONTAL };

/**
    Creates a new bitmap by flipping the specified bitmap
    vertically or horizontally.
    @param src        Bitmap to flip
    @param type       Flip direction (horizontal or vertical)
    @return           New bitmap created by flipping the given one
                      vertically or horizontally as specified by
                      the <code>type</code> parameter or
                      the original bitmap if an unknown type
                      is specified.
**/
public static Bitmap flip(Bitmap src, Direction type) {
    Matrix matrix = new Matrix();

    if(type == Direction.VERTICAL) {
        matrix.preScale(1.0f, -1.0f);
    }
    else if(type == Direction.HORIZONTAL) {
        matrix.preScale(-1.0f, 1.0f);
    } else {
        return src;
    }

    return Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);
} 
```

# javascript - Expressjs：搜索查询api

> ID：11609697
> 
> 赞同：5
> 
> 时间：2012-07-23T09:23:42.313
> 
> 标签：javascript, express, mongoose

我想使用查询字符串搜索我的用户存储库。

这应该返回具有相似用户名“kyogron”和相似电子邮件“kyogron@gmail”的所有用户

```
GET localhost:3000/users?username=kyogron&email=kyogron@gmail.com 
```

这应该返回所有用户：

```
GET localhost:3000/users 
```

我已经设法处理了路由参数，但我一直在优化它：

```
app.get('/users', function(req, res) {
    // creates a mongoosejs query object
    var query = User.find({});

    // to understand how expressjs handles queries:
    // ?username=kyogron&email=kyogron@gmail.com
    // { username: "kyogron", email: "kyogron@gmail.com" }
    //console.log(req.query);

    // this was one idea of optimizing the search query parameters
    // this doesn't work don't know why I always get an array of ALL users
    // even the key and value is right
    Object.keys(req.query).forEach(function(key) {
        query.select(key, req.query[key]);
    });

    // this was the way I was first handling the parameters, this works !!
    //if (req.query.username) query.where('username', req.query.username);
    //if (req.query.email) query.where('email', req.query.email);

    // the rest of the query
    query.select('username', 'email');
    query.exec(function(err, users) {
        if (err) throw err;
        res.json(users);
    });

}); 
```

这些是我正在解决的问题：

1.  为什么迭代 req.query 对象不起作用？
2.  如何说猫鼬使用通配符（例如 kyo*）

如果有人可以帮助我会很好:)

问候

**编辑**：

第二个问题可以用 $where 解决：

```
 if (req.query.username) {
        query.$where(function() {
            return this.username === req.query.username; // here we need a regex check
        });
    } 
```

那些不起作用...有人可以给我一个提示吗？

**编辑2：**

没有用 $where 管理任何东西......但是我现在发现

```
query.where('username').regex(); 
```

我只需要寻找一个寻找相似词的搜索正则表达式

**编辑3：**

我找到了这个线程：[如何用“like”查询 MongoDB？](https://stackoverflow.com/questions/3305561/how-to-query-mongodb-with-like)我在 mongoosejs 小组中问我如何用 mongoose 做到这一点

**编辑4：**

```
if (req.query.username) {
            query.where('username').regex(new RegExp("\/"+req.query.username+"\/"));
} 
```

我几乎明白了。只需要修复这个愚蠢的正则表达式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:40:18.400

```
app.get('/users', function(req, res) {
    var query = User.find({});

    Object.keys(req.query).forEach(function(key) {
        query.where(key).regex(new RegExp(req.query[key]));
    });

    /*
    if (req.query.username) {
        query.where('username').regex(new RegExp(req.query.username));
    }
    if (req.query.email) {
        query.where('email').regex(new RegExp(req.query.email));
    }*/

    query.select('username', 'email');
    query.exec(function(err, users) {
        if (err) throw err;
        res.json(users);
    });

}); 
```

第一个不起作用，因为我有一个错字（.select() 而不是 .where()）。第二个是在一个额外的线程中找到的

我仍然对选择的方法有点不确定。

迭代 req.query 将允许使代码可重用（可能作为前置条件路由参数函数），但它很容易出错

# plot - 自定义 Matplotlib 缩放：Log(Ln(x))

> ID：11609698
> 
> 赞同：2
> 
> 时间：2012-07-23T09:23:43.410
> 
> 标签：plot, matplotlib, scale

我有以下情况：我有一个带有两个 y 轴的图，左边是对数刻度并显示 quantitiy `y(x)`。`x`在 x 轴上是线性的。在第二个`y`轴上，我想要绘制在第一个轴上的相同值的附加自然对数刻度。`y`所以想象我在第一个轴上有以下刻度：

```
10^0       10^1       10^2 
```

然后在第二个`y`轴上我会有一个比例

```
exp(10^0)  exp(10^1)  exp(10^2) 
```

使用此[示例](http://matplotlib.sourceforge.net/examples/api/fahrenheit_celcius_scales.html)中的代码，我设法正确设置了第二个轴的限制。但是，由于标度与对数不同，因此两者之间的值以错误的方式放置。由于`exp(10^2)`非常大， 和 的刻度`exp(10^1)`在`exp(10^0)`轴的底部彼此非常接近，而`10^1`恰好位于第一个 y 轴的中间。

我想我可以使用自定义比例，但示例非常复杂，我认为可能有更简单的方法来做到这一点。如果没有，我仍然可以自己手动标记蜱虫，这是一个非常肮脏的解决方案。

* * *

一个例子：

```
#!/usr/bin/python2

from numpy import arange, exp
import matplotlib.pyplot as plt

fig = plt.figure()
ax1 = fig.add_subplot(111)
ax2 = plt.twinx()
ax1.set_yscale("log")
ax2.set_yscale("log")
ax1.grid(True)

# the conversion
def time(energy):
    return exp(energy)

# the callback to adjust the limits
def update_ax2(ax1):
   y1, y2 = ax1.get_ylim()
   ax2.set_ylim(time(y1), time(y2))
   ax2.figure.canvas.draw()
ax1.callbacks.connect("ylim_changed", update_ax2)

# plot some function
xvals = arange(0,4,0.1)
ax1.plot(xvals, exp(xvals), '-')

plt.show() 
```

生成的图片如下所示：

![剧情](../Images/637e5d605fdbba9433e4df63399049f8.png)

如您所见，上下轴限制在左右刻度上匹配，而中点不匹配，因为右轴上的缩放比例不同。虽然我最终为我的图片手动放置了所需的刻度，但如果有一个简单的解决方案来解决这个问题，那就太好了。转换函数就是`exp(y)`，when`y`是左轴上的勾号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:51:25.653

您可能想尝试使用 FuncFormatter：

```
 from matplotlib.ticker import FuncFormatter

...

def ticks2(y, pos):
    return '%1.1e' % exp(y)

xvals = arange(0,4,0.1)
ax1.plot(xvals, exp(xvals), '-')
ax2.set_ylim(ax1.get_ylim())
ax2.yaxis.set_major_formatter(FuncFormatter(ticks2))

plt.show() 
```

请注意，我或多或少地绕过了您的回调，使用`ax2.set_ylim(ax1.get_ylim())`. 上面的内容似乎并不多，但它确实有一个缺点，即刻度数的间距不是很好（如果你尝试这个，你会看到）。

再说一次，我仍在试图弄清楚你试图在第二个 y 轴上绘制什么，以及以这种方式显示它是否真的有用（我看到提到了时间和能量，所以能量是什么，时间随着能量呈指数增长？）。但这是另一个问题。

# asp.net - 创建水晶报表模板

> ID：11609703
> 
> 赞同：3
> 
> 时间：2012-07-23T09:24:15.890
> 
> 标签：asp.net, templates, crystal-reports

我在我的 asp web 应用程序中使用水晶报表。我想开发许多具有相同设计、页眉、页脚等的报表。水晶报表是否提供创建任何可用于其他报表的模板？就像母版页一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:13:10.013

在水晶报表中有模板的概念；我没有发现它很有用，只是用来保存一些图表并在其他报告中使用相同的参数。

**对于页眉和页脚，我改用子报表**；如果要更改模板，很容易导入它们并重新导入

编辑：

这是一个例子

*   创建一个名为`header.rpt`
*   在标题中放置一个参数称为`Title`
*   插入 a`text area`并`Title`在其中显示
*   创建一个名为的报告`main.rpt`
*   `header.rpt`作为子报表插入到里面`main.rpt`，放到`Page Header`section里面
*   将报告名称传递`main.rpt`给`header.rpt`使用`subreport links`
*   享受报告！

更改模板

*   打开`header.rpt`并修改它（更改标题字体，或对齐，或插入图像）
*   打开`main.rpt`点击`reimport subreport`
*   享受报告！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:04:02.860

我有同样的查询......但我解决了它的差异。方式（非官方方式）

我没有找到这样的方法。

谢谢fr的问题...

# c# - System.Net.Http.HttpClient 不包含 TransportSettings 的定义

> ID：11609709
> 
> 赞同：-1
> 
> 时间：2012-07-23T09:24:38.467
> 
> 标签：c#, .net, compiler-errors

我有问题。首先，这是我的代码：

```
HttpClient fond = new HttpClient();
using (var client = new HttpClient())
{
    HttpClient.TransportSettings.Credentials = new System.Net.NetworkCredential("username", "pwd");
}
var reponse = await fond.GetStreamAsync("" + TitleNewsGrid.Text); 
```

对我来说一切都很好，但是（对不起，这是我的第一个应用程序 ^^'）当我编译时我发现了这个错误：

> “System.Net.Http.HttpClient”不包含“TransportSettings”的定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:56:21.023

尝试这个

```
using (var handler = new HttpClientHandler()) 
{
    handler.Credentials = new System.Net.NetworkCredential("username", "pwd");
    using (var client = new HttpClient(handler){  })
    { 
        // code
    } 
} 
```

未测试;)

# jsf-2 - JSF2 支持 Bean 无法获得对 @Inject 会话 Bean 的引用

> ID：11609711
> 
> 赞同：1
> 
> 时间：2012-07-23T09:24:46.390
> 
> 标签：jsf-2, jboss7.x, ejb-3.1

我有以下 JSF2 控制器/bb，我已经注入了一个会话 bean。但是，它无法获得对 EJB 本地会话 Bean 的引用。

JSF2 支持 Bean：

```
@ManagedBean
@Named("scorecardBackingBean")
@SessionScoped
public class ScorecardBackingBean implements Serializable {
    private static final long serialVersionUID = 7231502115861150753L;

    @Inject
    private IScorecardServiceBean scorecardServiceBean;

    @PostConstruct
    private void prepareMainLineChart() {
        this.mainLineChart = new CartesianChartModel();

         List<OrderVolume> orderVolumeList = this.scorecardServiceBean
         .getOrderVolume(); //ERROR here, scorecardServiceBean is null.
} 
```

EJB：

```
@Stateless
public class ScorecardServiceBean implements IScorecardServiceBean {
} 
```

EJB接口：

```
@Local
public interface IScorecardServiceBean {
    List<OrderVolume> getOrderVolume();
} 
```

遇到的错误：

```
java.lang.IllegalStateException: JBAS011048: Failed to construct component instance
    at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:163)
    at org.jboss.as.ee.component.BasicComponent.createInstance(BasicComponent.java:95)
    at org.jboss.as.web.deployment.component.WebComponentInstantiator$2.<init>(WebComponentInstantiator.java:96)
    at org.jboss.as.web.deployment.component.WebComponentInstantiator.initializeInstance(WebComponentInstantiator.java:94)
.................
Caused by: java.lang.NullPointerException
    at sg.java.bus.controller.scorecard.ScorecardBackingBean.prepareMainLineChart(ScorecardBackingBean.java:79)
    at sg.java.bus.controller.scorecard.ScorecardBackingBean.init(ScorecardBackingBean.java:61)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.as.ee.component.ManagedReferenceLifecycleMethodInterceptorFactory$ManagedReferenceLifecycleMethodInterceptor.processInvocation(ManagedReferenceLifecycleMethodInterceptorFactory.java:130)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.as.ee.component.ManagedReferenceInterceptorFactory$ManagedReferenceInterceptor.processInvocation(ManagedReferenceInterceptorFactory.java:106)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)
    at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
    at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
    at org.jboss.as.ee.component.BasicComponent.constructComponentInstance(BasicComponent.java:161)
    ... 52 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:31:14.817

您正在混合 CDI 托管 bean ( `@Named`) 和 JSF 托管 bean ( `@ManagedBean`)。这些注释中只有一个是必需的。

如果您选择其中一个，请确保导入正确的范围类。

CDI：[`javax.enterprise.context.SessionScoped`](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/SessionScoped.html)

JSF：[`javax.faces.bean.SessionScoped`](http://docs.oracle.com/javaee/6/api/javax/faces/bean/SessionScoped.html)

有关背景信息，请参阅这些相关问题和答案：

*   [JSF2.0 Tomcat7中@Named和@ManagedBean注解的区别](https://stackoverflow.com/a/10994901/620338)
*   [CDI @Named bean 中的 ManagedProperty 返回 null](https://stackoverflow.com/q/9921324/620338)
*   [我应该使用@EJB 还是@Inject](https://stackoverflow.com/q/8138232/620338)

# python - 在 python 中使用 os.popen 运行命令时无法获得正确的输出

> ID：11609717
> 
> 赞同：0
> 
> 时间：2012-07-23T09:25:04.847
> 
> 标签：python, command-line

```
import os

def getName(AAPTLocation, apkFile):

    AAPTLocation = AAPTLocation.replace('\\','\\\\')
    apkFile = apkFile.replace('\\','\\\\')
    pname = ''
    cmd = ' \"\"' + AAPTLocation + '\" dump badging \"' + apkFile + '\"\"'
    p = os.popen(cmd)
    while 1:
        s = p.readline()
        if s:
            print s
            if s.find('package') != -1 and s.find('name') != -1:
                pname = s  
        if not s:
            break
    p.close()
    return pname

AAPTLocation = 'C:\Program Files\Android\android-sdk\platform-tools\aapt.exe'
apkFile = 'C:\APKs\test.apk'
print getName(AAPTLocation, apkFile) 
```

我需要运行 aapt.exe，获取 apk 的包名并解析结果。

直接在命令行界面中运行“C:\Program Files\Android\android-sdk\platform-tools\aapt.exe”转储标记“C:\APKs\test.apk”工作正常。然而，在我粘贴在上面的 python 脚本中，它并没有给我任何东西。

我已经尝试转义反斜杠，但它根本没有任何区别。我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:28:08.947

您需要将 python 文字中的斜杠加倍，否则它们将被解释为转义码的开头：

```
>>> 'C:\Program Files\Android\android-sdk\platform-tools\aapt.exe'
'C:\\Program Files\\Android\x07ndroid-sdk\\platform-tools\x07apt.exe'
>>> 'C:\\Program Files\\Android\\android-sdk\\platform-tools\\aapt.exe'
'C:\\Program Files\\Android\\android-sdk\\platform-tools\\aapt.exe'
>>> print 'C:\\Program Files\\Android\\android-sdk\\platform-tools\\aapt.exe'
C:\Program Files\Android\android-sdk\platform-tools\aapt.exe 
```

请注意，在第一个示例（来自您的代码）中，python 如何将`\a`条目解释为十六进制 07 字符，而不是 BELL 的 ASCII 代码。

替代方法是使用原始 python 字符串文字，在其前面加上字母`r`：

```
>>> r'C:\Program Files\Android\android-sdk\platform-tools\aapt.exe'
'C:\\Program Files\\Android\\android-sdk\\platform-tools\\aapt.exe' 
```

有关字符串转义如何在字符串文字中工作的更多信息，请参阅[字符串文字文档。](http://docs.python.org/reference/lexical_analysis.html#grammar-token-stringliteral)

# ios - 如何在 UIScrollView 中闪烁/闪烁滚动指示器？

> ID：11609720
> 
> 赞同：8
> 
> 时间：2012-07-23T09:25:19.323
> 
> 标签：ios

如何让 UIScrollView 中的滚动指示器闪烁/闪烁一段时间？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-23T09:27:12.380

在 UIScrollView 中使用此方法：

```
- (void)flashScrollIndicators 
```

**斯威夫特 5**

```
scrollView.flashScrollIndicators() 
```

# php - Opencart 中的自定义“找不到页面”

> ID：11609722
> 
> 赞同：0
> 
> 时间：2012-07-23T09:25:21.567
> 
> 标签：php, module, opencart

我想在页面未找到模板中添加“特色产品”模块。有没有人定制了“找不到页面”模板添加了一些模块或者这是不可能的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T14:25:01.970

像这样获取您的文件：MVC ....

**控制器：**

```
opencart/catalog/controller/error/not_found.php 
```

**模板 (tpl)**

```
opencart/catalog/view/theme/pikcal/template/error/not_found.tpl 
```

.....您现在可以通过这种 MVC 方法在任何您想要的地方调用视图文件

```
if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/error/not_found.tpl')) 
{
    $this->template = $this->config->get('config_template') . '/template/error/not_found.tpl';
}
else {
    $this->template = 'default/template/error/not_found.tpl';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T14:01:49.577

这很容易实现。首先，转到`SYSTEM > DESIGN > LAYOUTS`并单击`INSERT`。对于布局名称，把

```
Error Page 
```

或者其他你会发现有用的东西来记住它。然后在“路线”字段中放置

```
error/not_found 
```

然后保存。完成后，只需转到您的`EXTENSIONS > MODULES`，单击`EDIT`您希望在页面上拥有的模块旁边的 ，单击`Add Module`以添加新模块，然后从该行的布局下拉列表中选择`Error Page`一个。其余设置按您认为合适的方式配置

# c# - 我们可以将 UTC 时间转换为 24 小时格式吗？如果是，那么如何？

> ID：11609724
> 
> 赞同：1
> 
> 时间：2012-07-23T09:25:23.933
> 
> 标签：c#, asp.net, datetime, time, utc

我有两个不同的列来存储日期和时间。一个是保存日期，另一个是时间。在我使用当地时间之前，它工作正常。现在我想为亚利桑那州设置这个时间所以我将我的日期时间转换为 UTC 时间和使用**TimeZoneIfo**的方法**ConvertTime**来获取亚利桑那州的时间。现在我的问题是我可以使用它来获取日期，但是当我节省时间时，它以 12 小时格式出现，我想将其转换为 24 小时。我的代码是

```
DateTime UniversalScheduleDate = Convert.ToDateTime(txtDate.Text).ToUniversalTime();
TimeZoneInfo timeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById(Session["TimeZone"].ToString());
objSchdl.SDate = TimeZoneInfo.ConvertTime(UniversalScheduleDate, timeZoneInfo);
DateTime UniversalStartTime = Convert.ToDateTime(txtStartTime.Text).ToUniversalTime();
objSchdl.Stime = TimeZoneInfo.ConvertTime(UniversalStartTime, timeZoneInfo).ToString(); 
```

请帮我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T09:28:19.323

尝试使用**DateTimeParse 和 DateTimeKind.Utc进行转换**

例子：

```
DateTime UniversalScheduleDate = DateTime.SpecifyKind(
DateTime.Parse(txtDate.Text),DateTimeKind.Utc);

string formattedDate = DateTime.UniversalScheduleDate.ToString("HH:mm:ss tt"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:28:34.273

您需要将*时区*信息与*字符串表示*分开。它们是完全正交的概念。

听起来您可能只需要在`ToString`调用中指定格式，例如

```
ToString("yyyy-MM-dd'T'HH:mm:ss", CultureInfo.InvariantCulture); 
```

您还应该考虑使用特定格式进行*解析*- 并考虑要使用哪种文化。

另请注意，由于夏令时转换，将本地时间转换为世界时间可能是有损的。.NET 框架使得很好地处理它变得相对痛苦，但您应该牢记这一点。

最后，请注意，当您调用时`ToUniversalTime`，将使用*系统本地*时区进行转换 - 这真的是您想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:35:25.600

以 12 小时格式安排您的时间。在将其保存到数据库之前，您可以使用以下脚本更改为 24 小时格式并保存

希望下面的代码对您有所帮助。

```
 Response.Write("With Seconds" + "<br />");

        Response.Write("24 Hour Date Format : " + DateTime.Now.ToString("HH:mm:ss tt") + "<br />");
        Response.Write("Without Seconds" + "<br />");

        Response.Write("24 Hour Date Format : " + DateTime.Now.ToString("HH:mm tt") + "<br />"); 
```

# objective-c - 如何将视图推送到另一个视图

> ID：11609733
> 
> 赞同：1
> 
> 时间：2012-07-23T09:26:06.063
> 
> 标签：objective-c, ios, xcode, uibutton, storyboard

如何以编程方式将我的按钮连接到另一个视图控制器类

这是我的编程按钮的代码

```
UIBarButtonItem *yearButton= [[UIBarButtonItem alloc] initWithTitle:@"Year" style:UIBarButtonItemStyleBordered    
 target:self action:@selector(year:)];

-(void) year:(id)sender{
    NSLog(@"Year button clicked");

    //I don't know what should I write here to connect my button to UIViewController**
    //when I added this line my process is terminated** 

    [self performSegueWithIdentifier:@"YearView" sender:self]; 
 }

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString: @"YearView"]){
       [segue.destinationViewController setTitle:@"YearView"];
    }
} 
```

在这里您可以在情节提要中看到我的视图：！[在此处输入图像描述][1]

**编辑：** **当我使用此方法时，我的进程已终止**

```
-(void)year:(id)sender{

// [self performSegueWithIdentifier:@"YearView" sender:self]; 
NSLog(@"Year button clicked");
YearView *yearVC = [[YearView alloc] initWithNibName:@"YearView" bundle:nil];

[[self navigationController] pushViewController:yearVC animated:YES];   // [yearVC release];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:26:33.933

试试这个：

```
YearView *year = [[YearView alloc] initWithNibName:nil bundle:nil];
[self presentModalViewController:year animated:YES]; 
```

最好先阅读教程：Presing View Controllers from Other View Controllers [http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:36:44.443

```
UIBarButtonItem *yearButton = [[UIBarButtonItem alloc] initWithTitle:@"Year"style:UIBarButtonItemStyleBordered target:self action:@selector(year:)];
self.navigationItem.rightBarButtonItem = yearButton;

-(void) year:(id)sender {
    NSLog(@"Year button clicked");
    YearViewcontroller *yearVC = [[YearViewcontroller alloc] initWithNibName:@"YearViewcontroller" bundle:nil];
    [self.navigationController  pushViewController:yearVC  animated:YES];
    [yearVC release];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:29:04.673

要将您的按钮与 viewController 中的方法链接，您需要在界面设计器中设置一个 IBOutlet（这是最简单的方法）。如果您仍然希望在另一个视图控制器中使用它，您可以设置另一个视图控制器的属性，例如在 viewDidLoad 方法中，以便另一个视图控制器也具有对按钮的引用，尽管这远非理想。只有一个 viewController 应该管理该按钮。

# html - 如何防止 Gmail 添加锚标记

> ID：11609736
> 
> 赞同：0
> 
> 时间：2012-07-23T09:26:24.767
> 
> 标签：html, gmail

我通过 Amazon SES 发送 HTML 电子邮件。

这是一个示例电子邮件 -

> 嘿，约翰，
> 
> 山姆大叔刚刚申请了这份工作，**需要有人在您在 JobHouse 上发布的 craigs list.com**上发帖。
> 
> 干杯。

现在，Gmail（可能还有其他电子邮件客户端）将超链接添加到`list.com`. 如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T04:22:17.660

服务器端解决方案：

**用零宽度空格**字符包围所有**点**(".") 和**at 符号**("@") 。

 **示例（PHP）：

```
$email = 'name@server.com';
$email = str_replace (
                        array('@', '.'),
                        array('&#8203;@&#8203;', '&#8203;.&#8203;'),
                        $email
); 
```

或者，您可以使用单位分隔符 ( `&#31;`) 或记录分隔符 ( `&#30;`)，而不是上面的零宽度空格字符 ( `&#8203;`)。

从视觉上看，电子邮件/网站地址看起来很正常，就像替换之前一样。

**注意**`&#46;`：用它们的 html 代码（ &分别）替换点和 at 符号`&#64;`并不能解决问题。Gmail 的算法仍将字符串解释为地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:33:37.233

根据我在发送电子邮件时的理解，如果您没有在 HTML 内容中创建超链接，那么您将无法控制客户端如何呈现内容。如果有人使用 Gmail、Outlook、Mail 等查看电子邮件并注意到他们确定为 URL 的“模式”，则客户端应用程序将替换这些值。

*   您可以做的一件事是生成域名图像并引用它以完全控制它的呈现方式。

见： http: [//php.net/manual/en/function.imagettftext.php](http://php.net/manual/en/function.imagettftext.php)

例如，您可以创建一个简单的 PHP 脚本并将网址作为 URL 参数传入，然后它会返回带有该 URL 的图像。然后更改 HTML 代码，改为：

```
<img src="domain.com/path/to/your/text.php?text=craigslist.com" /> 
```

除了这样做之外，您无法控制客户端应用程序如何呈现您的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:34:55.637

理论上，您可以`<text>yoururl.com</text>`在电子邮件生成中使用。

虽然我不是 100% 确定它是否可以在 GMail 中工作，因为我目前没有什么可以测试的。**

# caching - 在 Symfony 2 的私有上下文中使用缓存

> ID：11609741
> 
> 赞同：0
> 
> 时间：2012-07-23T09:26:38.447
> 
> 标签：caching, symfony, private

我正在尝试缓存个人资料用户页面。为此，我使用：

```
$response = new Response();
$response->setETag(md5($response->getContent()));

if ($response->isNotModified($this->getRequest())) {
    return $response;
} 
```

但是，应用程序从不使用缓存，因为*$this->getRequest()->getEtags()*（在*isNotModified*函数中使用）总是空的。如果我设置

```
$response->setPublic() 
```

一切正常。那么，如何在 Private 上下文中使用缓存？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:44:12.293

在 Symfony 2 中使用*私有*响应时，它设置以下标头：

```
Cache-Control: private 
```

根据[HTTP 1/1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.1)：

> **私人的**
> 
> > 表示响应消息的全部或部分是针对单个用户的，并且不得由共享缓存缓存。这允许源服务器声明响应的指定部分仅针对一个用户，而不是对其他用户请求的有效响应。私有（非共享）缓存可以缓存响应。

这意味着您**不能**将`ETag`标头与`Cache-Control: private`.

# c# - 使用 Altova MapForce 生成的 XSLT 文件时出现 XslCompiledTransform 异常

> ID：11609742
> 
> 赞同：0
> 
> 时间：2012-07-23T09:26:44.330
> 
> 标签：c#, xml, xslt, xslcompiledtransform, altova

我正在使用 .NET 的 XslCompiledTransform 来执行 XSLT 转换。当我尝试使用使用 Altova 的 MapForce 工具自动生成的 XSLT 文件时，出现异常：

```
XSL conversion is failed: Cannot find the script or external object that implements prefix 'http://www.altova.com/xslt-extensions'. 
```

从 XSL 样式表定义：

```
<xsl:stylesheet ... xmlns:ns0="http://www.altova.com/xslt-extensions" ... > 
```

...似乎 Altova 为 XSLT 定义了自己的扩展函数，而 XslCompiledTransform 不知道如何找到它们。如何让 XslCompiledTransform 识别那些外部函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:23:47.380

我不知道 Mapforce 的任何细节，但我知道人们使用 Saxon 成功运行了 Mapforce 生成的样式表。也许（我推测）如果您要求 mapforce 生成 2.0 样式表，那么它就不需要任何 Altova 扩展，然后您可以使用 Saxon 或 XmlPrime 等 2.0 处理器运行样式表。

（顺便说一句，微软已经明确表示他们不打算将 XsltCompiledTransform 升级到 XSLT 2.0，因此您使用的是一种死胡同。Saxon、Altova 和 XmlPrime 都在向前发展；Saxon 和 XmlPrime 不仅支持 XSLT 2.0 以及 3.0 的大块。你错过了很多生产力优势。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:35:40.773

通常扩展是不可移植的，只有一些 EXSLT 扩展像`exsl:node-set`被广泛的 XSLT 1.0 处理器支持，包括 XslCompiledTransform。如果您使用 XML Spy 开发并希望使用 .NET 代码执行其样式表，那么您可以考虑将[AltovaXML](http://www.altova.com/altovaxml.html)与 .NET 一起使用，请参阅[http://manual.altova.com/AltovaXML/altovaxmlcommunity/index.html?axnetinterface.htm](http://manual.altova.com/AltovaXML/altovaxmlcommunity/index.html?axnetinterface.htm)，而不是使用 XslCompiledTransform。

# android - 使用 ActionBarSherlock 以编程方式在 Android 中切换选项卡

> ID：11609745
> 
> 赞同：6
> 
> 时间：2012-07-23T09:26:55.753
> 
> 标签：android, android-actionbar, actionbarsherlock

我找不到有关此的任何信息，但是，如何以编程方式在 ActionBarSherlock 中切换选项卡？

通常当我想切换视图时，我会使用类似的东西：

```
Intent intentSecondView = new Intent(this, SecondView.class);
this.startActivity(intentSecondView); 
```

但显然这不起作用，因为选项卡中的视图是片段。

那么在使用 ActionBarSherlock 时有没有办法通过代码在选项卡之间切换？

* * *

这就是我当前添加带有标签的操作栏的方式。

在我的 onCreate 方法中，我有：

```
 mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);

    setContentView(mViewPager);
    ActionBar bar = getSupportActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    mTabsAdapter = new TabsAdapter(this, mViewPager);

    mTabsAdapter.addTab(
            bar.newTab().setText("Fragment 1"),
            MyFragment1.class, null);
    mTabsAdapter.addTab(
            bar.newTab().setText("Fragment 2"),
            MyFragment2.class, null); 
```

我在我的 AndroidManifest 文件中没有添加任何内容来创建选项卡。这一切都是以编程方式进行的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-23T09:45:26.747

尝试调用 actionBar.setSelectedNavigationItem(x)：

```
int position = 1;
getSupportActionBar().setSelectedNavigationItem(position); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T20:22:31.990

在我的应用程序中，我有一个标签片段，其中包含相册。当用户单击其中一张图片时，它会导致该图片显示在另一个选项卡片段上的 ViewPager 中，并使用 setCurrentTabByTag() 自动切换到该选项卡。

```
public class EditAlbumTabs extends SherlockFragmentActivity {
   TabHost mTabHost;
   TabsAdapter mTabsAdapter;

   public void onPagerPositionSet(int pagerPosition, String[] imageUrls) {
        FragmentFlash fragmentFlash = (FragmentFlash)mTabsAdapter.getFragment("flash");
        if (fragmentFlash != null) {
           fragmentFlash.pagerPositionSet(pagerPosition, imageUrls);
           **mTabHost.setCurrentTabByTag("flash");**
        }
   }

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fragment_tabs_pager);
    mTabHost = (TabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup();

    mViewPager = (ViewPager)findViewById(R.id.pager);
    mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);
    mTabsAdapter.addTab(mTabHost.newTabSpec("album").setIndicator("Album"),
            FragmentAlbumFlashum.class, null);
    mTabsAdapter.addTab(mTabHost.newTabSpec("flash").setIndicator("Flash"),
            FragmentFlash.class, null);
} 
```

# macos - OSX Lion 错误：以编程方式启动屏幕保护程序时桌面可能无法使用

> ID：11609751
> 
> 赞同：2
> 
> 时间：2012-07-23T09:27:10.773
> 
> 标签：macos, osx-lion, applescript, screensaver

为了在 OS X Lion 上启动屏幕保护程序，我使用了一个系统范围的键盘快捷键，它可以立即启动屏幕保护程序，使用一个简单的 applescript：

```
tell application "ScreenSaverEngine" to launch 
```

尽管这在大多数情况下都可以完美运行，但是当鼠标恰好在调用脚本时移动时，我遇到了一个奇怪的问题。然后，ScreenSaverEngine.app 被加载并且桌面被锁定，但是 ScreenSaverEngine UI 没有出现。相反，桌面仍然可见，但无法将焦点设置在其他应用程序或 UI 控件上；桌面会话基本上被锁定。

“解锁”桌面的唯一方法是强制将焦点设置在 Activity Monitor 应用程序上（通过按住 Ctrl 键单击其停靠图标并选择 Show All Windows），然后终止 ScreenSaverEngine 进程。

通过从终端启动 ScreenSaverEngine 可以轻松重现相同的行为：

```
/System/Library/Frameworks/ScreenSaver.framework/Resources/ScreenSaverEngine.app/Contents/MacOS/ScreenSaverEngine 
```

并在按下 Enter 键的同时主动移动鼠标光标。

有谁知道一种可以用来以编程方式启动屏幕保护程序的方法，并且不会遇到这个问题？

**注意：**我知道还有其他选项可以锁定屏幕（快速用户切换、钥匙串锁定和热角），但我对这些解决方案不感兴趣，我需要一种以编程方式启动屏幕保护程序的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:12:40.060

我自己在谷歌的深处找到了答案。使用私有 ScreenSaver.framework 中未记录的 ScreenSaverController 类来启动屏幕保护程序按预期工作。

我使用以下标题：

```
#import <Foundation/Foundation.h>

@interface ScreenSaverController : NSObject
+ controller;
@end

@protocol ScreenSaverControl
- (BOOL) screenSaverIsRunning;
- (BOOL) screenSaverCanRun;
- (void) setScreenSaverCanRun:(BOOL)fp8;
- (void) screenSaverStartNow;
- (void) screenSaverStopNow;
- (void) restartForUser:(id)fp8;
- (double) screenSaverTimeRemaining;
- (void) screenSaverDidFade;
- (BOOL) screenSaverIsRunningInBackground;
- (void) screenSaverDidFadeInBackground:(BOOL)fp8 
                                  psnHi:(unsigned int)fp12 
                                 psnLow:(unsigned int)fp16;
@end 
```

并将 ScreenSaver.framework 链接到我的项目。启动屏幕保护程序非常简单：

```
[[ScreenSaverController controller] screenSaverStartNow]; 
```

当屏幕保护程序以这种方式启动时，我在问题中描述的行为无法重现。如果调用此方法时鼠标主动移动，屏幕快速闪烁，屏幕保护程序立即返回（不锁定桌面）。

适用于 10.6.8 和 10.7.4。

**免责声明：**请谨慎使用 Apple 框架中未记录的类，因为它们不受支持，并且功能可能会在 OS X 的未来版本中中断（考虑弱链接）。此外，它还会取消您的应用在 App Store 中的资格。

# android - 如何点击 Android 按钮然后转到 google play 应用程序

> ID：11609757
> 
> 赞同：10
> 
> 时间：2012-07-23T09:27:18.383
> 
> 标签：android

我想知道如何使 android 按钮可以单击并将用户重定向到 google play。

示例：在用户单击我的活动中的按钮后，我想将用户发送到 android 应用程序（https://play.google.com/store/apps/details?id=com.theopen.android）。

这该怎么做？

问候，

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-23T09:29:32.570

```
intent = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id=com.theopen.android"));
startActivity(intent); 
```

**这将在Play 商店**（Android 市场）中打开您的应用程序

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-14T14:02:57.110

要重定向到 google play，我们需要检查手机是否已经有 play store 应用，如果没有，应该在浏览器中打开 google play。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("market://details?id=com.android.app"));
try{
     startActivity(intent);
}
catch(Exception e){                 intent.setData(Uri.parse("https://play.google.com/store/apps/details?id=com.android.app"));
            } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-23T09:32:03.497

```
Button.setOnClickListener(new OnClickListener() {
   public void onClick(View v) {
   view=(WebView) findViewById(R.id.w);
   view.loadUrl("https://play.google.com/store/apps/details?id=com");
}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-16T09:00:57.383

```
Intent launchIntent = getPackageManager().getLaunchIntentForPackage("package name here");
startActivity(launchIntent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-27T11:35:08.160

看看我做了什么，即使没有应用程序（如 GooglePlay）采取第一个意图，它也能工作。在这种情况下，还有另一种尝试在网络浏览器中打开 GooglePlay - 至少应该有默认值：

```
 mOkButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=com.sbm.bc.smartbooksmobile")); // Open precisely @link SmartBooks
            boolean tryAgain = false; // Flag to denote that normal attempt to launch GooglePlay update failed

            try
            {
                startActivity(intent);
            }
            catch(Exception e)
            {
                tryAgain = true;
            }

            if (!tryAgain) return;

            // Try to launch GooglePlay with SB in browser !
            try
            {
                intent.setData(Uri.parse("https://play.google.com/store/apps/details?id=com.sbm.bc.smartbooksmobile"));
                startActivity(intent);
            }
            catch (Exception e)
            {
                mEmailView.setError("Unable to run app update automatically. Please run it from GooglePlay manualy.");
                mEmailView.requestFocus(View.FOCUS_UP);
            }

            // No need to exit the app, as it already exits
            //finishAffinity();  // this requires  API level > 16
            //finish();
            //System.exit(0);
        }
    }); 
```

# php - 解析字符串并将参数附加到 PHP 中的所有 URL

> ID：11609758
> 
> 赞同：0
> 
> 时间：2012-07-23T09:27:29.150
> 
> 标签：php, parsing, url

我有一个字符串，其中包含 HTML 中的 URL。我想为每个 URL 添加参数。

```
$my_string = "See our full range of <a href="http://www.mysite.com/cat.php?cPath=8" target="_blank">some category</a> online and also our popular <a href="http://www.mysite.com/product.php?products_id=22" target="_blank">some product</a>."; 
```

最终应该是：

```
$my_new_string = "See our full range of <a href="http://www.mysite.com/cat.php?cPath=8&new_param=test" target="_blank">some category</a> online and also our popular <a href="http://www.mysite.com/product.php?products_id=22&new_param=test" target="_blank">some product</a>."; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:32:19.503

尝试一个正则表达式：

```
$my_new_string = preg_replace('`<a (.*)href="(.+)"(.*)>`iU', '<a $1href="$2&new_param=test"$3>', $my_string); 
```

# cakephp - 在 CakePHP 中从模型中获取用户信息

> ID：11609761
> 
> 赞同：0
> 
> 时间：2012-07-23T09:27:39.477
> 
> 标签：cakephp, cakephp-2.1

我刚刚学习了 CakePHP，我希望用户在编辑自己的信息时输入他们的旧密码。

在我的模型 User.php

```
'password_old' => array(
                'match_old_password' => array(
                    'rule' => 'matchOldPassword',
                    'message' => 'Wrong password'
                ),
                'minlength' => array(
                    'rule'    => array('minLength', '8'),
                    'message' => 'Minimum 8 characters long'
                )
            ) 
```

我创建了一个函数 matchOldPassword

```
public function matchOldPassword(){
        if($this->data['User']['password_old']==$current_password){
            return true;
        }
        return false;
} 
```

我的问题是，如何在模型中获取当前用户密码的值？我使用 CakePHP 2.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:40:12.827

您可以像在控制器中一样从模型中执行数据库查询。

因此，在您的用户模型中，您可以调用：

```
$this->find('first', array('conditions' => array('User.id' => $userId))); 
```

或者

```
$this->read(null, $userId); 
```

当然，您必须将当前用户 ID 从控制器传递给模型方法。如果您使用的是 Cake 提供的 Auth 组件，您可以调用`$this->Auth->user('id')`来检索当前登录的用户的 id（如果这就是您所说的“当前用户”）。`$this->Auth->user()`是一种控制器方法，因此不能在模型中使用。您的设置大致如下所示：

用户模型方法：

```
public function getCurrentUserPassword($userId) {
  $password = '';
  $this->recursive = -1;
  $password = $this->read('password', $userId);
  return $password;
} 
```

用户控制器调用：

```
$userId = $this->Auth->user('id');
$this->User->getCurrentUserPassword($userId); 
```

# ios - 如何将 Linphone 集成到现有项目中（IOS 中的 SIP）

> ID：11609763
> 
> 赞同：17
> 
> 时间：2012-07-23T09:27:43.907
> 
> 标签：ios, objective-c, sip, linphone

**我正在寻找在我的 ios 项目中集成 Linphone 库。而且我找不到可以帮助我的教程。该项目提供的文档很少，但似乎运行良好。**

*   有关信息，这里是提供其开源代码的项目页面：

    [Linphone开源代码](http://www.linphone.org/eng/download/git.html)

*   我已经按照所有步骤编译了源代码，这个工作非常好，但下一步是在我的个人 iPhone 项目中集成部分代码，用于 SIP 层，以及音频和视频的管理。

在我使用的情况下，它不会是用户而是应用程序会在需要时自动调用（我的项目是用于家庭自动化系统）。

Linphone 应用程序似乎很难集成到其他项目中，因为要包含很多库和很多配置......

我在互联网上没有找到任何示例，我承认我不知道在没有帮助的情况下从哪里开始，没有办法进行集成。

***因此，如果您有任何可以帮助我的资源（教程），或者如果您曾经体验过集成这个库，这对我来说是一个非常大的帮助。***

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T18:24:48.120

当您构建 linphone 时，您已经有了一个集成了这些库的 Xcode 项目。你可以开始检查这个。您会注意到有一个名为 LinphoneManager 的类，它管理应用程序使用 linphone 库的方式（您可以将其视为外观）。因此，如果您想将 linphone 集成到您自己的项目中，则必须包含**linphone-sdk/apple-darwin/include**和**linphone-sdk/apple-darwin/lib**。祝你好运。

源链接 [https://docs.google.com/uc?id=0B0DwszanZcPhV0doNm5rMHdWa28&export=download](https://docs.google.com/uc?id=0B0DwszanZcPhV0doNm5rMHdWa28&export=download)

# android - ICS 中的 Logcat 中未显示包名称

> ID：11609766
> 
> 赞同：15
> 
> 时间：2012-07-23T09:27:50.853
> 
> 标签：android, android-4.0-ice-cream-sandwich, logcat

为什么将 ICS 升级到 Android 4.0.3 后，我的 Eclipse logcat 中的应用程序（包名称）仍为空白？

据我了解，它是日志的重要组成部分，不应该从 Android 4.0.3 中删除。

![在此处输入图像描述](../Images/b9ddf0f8003120b2bd3d5416483d9a98.png)

似乎这个问题只出现在运行 Android 4.0.3 的[三星 Galaxy S](http://en.wikipedia.org/wiki/Samsung_Galaxy_S)上，因为我在我的模拟器（4.0、4.0.3 和 4.1）以及[Google Nexus](http://en.wikipedia.org/wiki/Google_Nexus)（运行 4.0.5）上获取包信息。

那么有什么方法可以让我们从 Logcat 中查看或获取应用程序的唯一标识符（除了包名）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:24:13.410

好的。这个问题似乎只出现在运行 Android 4.0.3 的三星 Galaxy 上，因为我在我的模拟器（4.0、4.0.3 和 4.1）以及 Google Nexus（运行 4.0.5）上获取包信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:16:26.783

您是否从设备中选择了您的应用程序？我在我的设备中没有发现这个问题。希望能帮助到你.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:09:40.393

PID（进程ID）可用于此。如果您发现应用程序的一条消息，请记下 PID 并对其进行过滤。缺点是您的应用程序将为每次调用获取一个新的 PID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-20T05:53:56.817

根据我的猜测，您正在从应用程序的 manifirst 文件而不是从主活动文件运行您的应用程序。

1.  转到您的主要活动文件（MainActivity.java），然后单击运行。
2.  现在，您将在 LogCat 中获得一个带有您的包名称的附加过滤器。
3.  点击那个。现在您可以看到您的应用程序的日志。

为什么你没有在你附加的屏幕截图上得到应用程序名称，所有的过程都是系统的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-08T11:09:56.520

`Android Studio`我在Beta 版（0.8.*）上遇到了同样的问题。

我重新启动了设备，但问题没有解决（至少现在还没有）。然后重新启动`Android Studio`，一切正常。包名称已恢复，因此内置功能`logcat`就像魅力一样。

谢天谢地，不必像这个[链接](https://stackoverflow.com/questions/6854127/filter-logcat-to-get-only-the-messages-from-my-application-in-android/10239563#10239563)那样弄乱 PID 。

# jquery - jQuery 和 IE 的问题

> ID：11609767
> 
> 赞同：0
> 
> 时间：2012-07-23T09:27:53.003
> 
> 标签：jquery

我似乎无法弄清楚为什么我的代码在 IE 中根本不起作用。它在所有其他浏览器中都可以正常工作。有人能发现问题吗？

```
$(document).ready(function (){
    var timerId = 0;
    $("#timerwrap").ready(function(){
        $("#timerwrap").html("Please wait <span style='font-weight: bold !important;' id='show-time'>4</span> seconds");
        console.log(timerId)

        if(timerId == 0){
            timerId = window.setInterval(function() {
            var timeCounter = $("#show-time").html();
            var updateTime = parseInt(timeCounter,10) - 1;
            $("#show-time").html(updateTime);

            if(updateTime <= 0){
               clearTimeout(timerId);

               $("#ltext").fadeOut('fast');
               $("#closeme").delay(600).fadeIn('fast');

            }
         }, 1000);
      }
   });

});

$(document).ready(function () {
   $("#closeme").click(function() {

      $("#rf").css("display", "none");
      $("#toppy").css("display", "none");
   });
});

$(document).ready(function () {
   $("#closelogo").click(function() {
      $("#rf").css("display", "none");
      $("#toppy").css("display", "none");
   });
}); 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:30:51.680

IE 与console.log 中断。删除`console.log(timerId)`，你应该没问题

# c++ - 将天数转换为年数（包括闰年）的高效算法

> ID：11609769
> 
> 赞同：14
> 
> 时间：2012-07-23T09:28:04.860
> 
> 标签：c++, algorithm, time

## 问题

我正在编写一个用于在 C++ 中保存日期的类，我发现了以下问题：

`N`自参考日期（在我的情况下是公元 001 年 1 月 1 日）以来，我有很多天，包括自参考日期以来经过的闰日。**如何有效地将这个数字转换为年、`Y`月`M`和日`D`**？

我想尽可能高效地做到这一点，所以最好的实现显然具有 O(1) 复杂性。

接下来的部分将解释我已经学到的一些东西。

## 闰年

要确定一年是否是闰年，有一些规则：

1.  能被4整除的年份是闰年
2.  规则 1 的例外：能被 100 整除的年份不是闰年
3.  规则 2 的例外：能被 400 整除的年份是闰年

这将转化为如下代码：

```
bool IsLeapYear(int year)
{
    // Corrected after Henrick's suggestion
    if (year % 400 == 0) return true;
    if ((year % 4 == 0) && (year % 100 != 0)) return true;
    return false;
} 
```

计算一年前闰年的有效方法是：

```
int LeapDaysBefore(int year)
{
    // Years divisible by 4, not divisible by 100, but divisible by 400
    return ((year-1)/4 - (year-1)/100 + (year-1)/400);
} 
```

## 计算月份

一旦找到年份，我就可以计算到今年还有多少天，然后我可以从 N 中减去这个数字。这将给我一年中的哪一天。

保留每个月开始的日期的表格，我们可以轻松计算月份。我还创建了一个函数，如果年份是闰，则加 1，并且月份大于或等于 2。

```
// What day each month starts on (counting from 0)
int MonthDaySt[] = { 0, 31, 59, 90, 120, 151, 181, 212, 
    243, 273, 304, 334, 365 };

int MonthDayStart(int month, bool leap)
{
   if (leap && month >= 2) return MonthDaySt[month]+1;
   return MonthDaySt[month];
} 
```

## 我的点子

我的算法非常复杂，看起来像这样：

```
void GetDate(int N, int &Y, int &M, int &D)
{
    int year_days;

    // Approximate the year, this will give an year greater or equal
    // to what year we are looking for.
    Y = N / 365 + 1;

    // Find the actual year, counting leap days
    do {
        Y--;

        // Calculate the actual number of days until the
        // approximate year
        year_days = Y * 365 + LeapDaysBefore(year);

    } while (year_days > N);

    // Add 1, because we start from year 1 AD (not 0)
    Y++;

    // Calculate month
    uint64_t diff = N - year_days; // Will give us the day of the year
    bool leap = IsLeapYear(Y);  // Is current year leap?

    // Use table to find month
    M = 0;
    while (MonthDayStart(M, leap) <= diff && M <= 12)
        M++;

    // Calculate day
    D = diff - MonthDayStart(M - 1, leap) + 1;
} 
```

该函数可能有一些错误（例如，当 N 为 0 时它不起作用）。

## 其他注意事项

我希望我的算法仍然正确，因为我对这个问题的原始算法做了一些更改。如果我遗漏了什么，或者有什么问题，请告诉我修改它。很抱歉这个冗长的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T09:45:59.187

用一句老笑话的话来说，“我不会从这里开始”。

您需要了解“现代”之前日历的各种变化，例如 1752 年发生的事情

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T10:09:57.000

这里有一些建议。注意：对于本练习，我将假设`N=0`当`Y % 400 == 0`.

**1：**每400年有固定天数`(400 * 365) + 100 + 1 - 4`。

`+100`是闰年，`+1`每400年是`-4`闰年，每100年是没有闰年。

所以你的第一行代码将是：

```
GetDate(int N, int &Y, int &M, int &D) {
  const int DAYS_IN_400_YEARS = (400*365)+97;
  int year = (N / DAYS_IN_400_YEARS) * 400;
  N = N % DAYS_IN_400_YEARS; 
```

**2：**如果您将 3 月 1 日视为一年中的第一天，您的生活会轻松很多

**3：**加上**（1）**中的代码，我们可以计算出年份。请记住，每四个世纪都以闰年开始。因此，您可以使用以下内容完成年份的计算：

```
 const int DAYS_IN_100_YEARS = (100*365) + 24;
  year += 100 * (N / DAYS_IN_100_YEARS) + (N < DAYS_IN_100_YEARS ? 1 : 0); // Add an extra day for the first leap year that occurs every 400 years.
  N = N - (N < DAYS_IN_100_YEARS ? 1 : 0);
  N = N % DAYS_IN_400_YEARS; 
```

**4：**现在你已经把岁月整理好了，剩下的就这么简单了（只要记住**（2）**，过程就简单了）。

或者，您可以使用[boost::date](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGQQFjAA&url=http%3A%2F%2Fwww.boost.org%2Flibs%2Fdate_time%2F&ei=oiINUNa5Eoqp0AWYzri8Cg&usg=AFQjCNHqzBUilIMg5xFhJj_3uc-fjKAs-Q&sig2=YJnZHL3NW8CwL3cmHq6QsA)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-20T22:44:35.827

多年来，我在解决公历日期问题方面进行了多次失败的尝试。我在大约 15 年前开发了这段代码，并且它继续表现良好。因为我很久以前写过这段代码的版本，它是用原生 C 语言编写的，但很容易编译成 C++ 程序。如果您愿意，可以随意将它们包装在 Date 类中。

我的代码基于将所有闰年规则组合成一个 400 年的周期。根据公历闰年规则，每 400 年周期正好有 146,097 天。

我采用的一项优化是将 1 月和 2 月移至上一年年底。这使得闰日（如果存在）总是落在一年的最后一天。这让我可以建立一个表格 (dayOffset)，它提供从 3 月 1 日开始的天数。因为闰日会在最后落下，所以这个表格对于闰年和非闰年都是准确的。

我将从头文件开始。

```
#if !defined( TIMECODE_H_ )
#define TIMECODE_H_ 1

#if defined(__cplusplus)
extern "C" {
#endif

int dateCode( int month, int dayOfMonth, int year );

void decodeDate( int *monthPtr, int *dayOfMonthPtr, int *yearPtr, int dateCode );

int dayOfWeek( int dateCode );

int cardinalCode( int nth, int weekday, int month, int year );

enum Weekdays { eMonday, eTuesday, eWednesday, eThursday, eFriday, eSaturday, eSunday };

#if defined(__cplusplus)
}
#endif

#endif 
```

API 包含四个方法： dateCode() 计算公历日期的日期代码。decodeDate() 根据日期代码计算公历月、日和年。dayOfWeek() 返回日期代码的星期几。cardinalCode() 返回特定月份的“主要”日的日期代码（例如，2014 年 8 月的第二个星期三）。

这是实现：

```
#include <math.h>

enum
{
   nbrOfDaysPer400Years = 146097,
   nbrOfDaysPer100Years = 36524,
   nbrOfDaysPer4Years = 1461,
   nbrOfDaysPerYear = 365,
   unixEpochBeginsOnDay = 135080
};

const int dayOffset[] =
{
   0, 31, 61, 92, 122, 153, 184, 214, 245, 275, 306, 337, 366
};

/* ------------------------------------------------------------------------------------ */
int mod( int dividend, int divisor, int* quotientPtr )
{
   *quotientPtr = (int)floor( (double)dividend / divisor );
   return dividend - divisor * *quotientPtr;
}

/* ------------------------------------------------------------------------------------ */
int dateCode( int month, int dayOfMonth, int year )
{
   int days;
   int temp;
   int bYday;
   /*
   we take the approach of starting the year on March 1 so that leap days fall
   at the end. To do this we pretend Jan. - Feb. are part of the previous year.
   */
   int bYear = year - 1600;
   bYday = dayOffset[ mod( month - 3, 12, &temp ) ] + dayOfMonth - 1;
   bYear += temp;

   bYear = mod( bYear, 400, &days );
   days *= nbrOfDaysPer400Years;

   bYear = mod( bYear, 100, &temp );
   days += nbrOfDaysPer100Years * temp;

   bYear = mod( bYear, 4, &temp );
   days += nbrOfDaysPer4Years * temp + nbrOfDaysPerYear * bYear + bYday -
      unixEpochBeginsOnDay;

   return days;
}

/* ------------------------------------------------------------------------------------ */
int dayOfWeek( int dateCode )
{
   int temp;
   return mod( dateCode + 3, 7, &temp );
}

/* ------------------------------------------------------------------------------------ */
void decodeDate( int *monthPtr, int *dayOfMonthPtr, int *yearPtr, int dateCode )
{
   int diff;
   int diff2;
   int alpha;
   int beta;
   int gamma;
   int year;
   int temp;

   /* dateCode has the number of days relative to 1/1/1970, shift this back to 3/1/1600 */
   dateCode += unixEpochBeginsOnDay;
   dateCode = mod( dateCode, nbrOfDaysPer400Years, &temp );
   year = 400 * temp;
   dateCode = mod( dateCode, nbrOfDaysPer100Years, &temp );
   /* put the leap day at the end of 400-year cycle */
   if ( temp == 4 )
   {
      --temp;
      dateCode += nbrOfDaysPer100Years;
   }
   year += 100 * temp;
   dateCode = mod( dateCode, nbrOfDaysPer4Years, &temp );
   year += 4 * temp;
   dateCode = mod( dateCode, nbrOfDaysPerYear, &temp );
   /* put the leap day at the end of 4-year cycle */
   if ( temp == 4 )
   {
      --temp;
      dateCode += nbrOfDaysPerYear;
   }
   year += temp;

   /* find the month in the table */
   alpha = 0;
   beta = 11;
   gamma = 0;
   for(;;)
   {
      gamma = ( alpha + beta ) / 2;
      diff = dayOffset[ gamma ] - dateCode;
      if ( diff < 0 )
      {
         diff2 = dayOffset[ gamma + 1 ] - dateCode;
         if ( diff2 < 0 )
         {
            alpha = gamma + 1;
         }
         else if ( diff2 == 0 )
         {
            ++gamma;
            break;
         }
         else
         {
            break;
         }
      }
      else if ( diff == 0 )
      {
         break;
      }
      else
      {
         beta = gamma;
      }
   }

   if ( gamma >= 10 )
   {
      ++year;
   }
   *yearPtr = year + 1600;
   *monthPtr = ( ( gamma + 2 ) % 12 ) + 1;
   *dayOfMonthPtr = dateCode - dayOffset[ gamma ] + 1;
}

/* ------------------------------------------------------------------------------------ */
int cardinalCode( int nth, int weekday, int month, int year )
{
   int dow1st;
   int dc = dateCode( month, 1, year );
   dow1st = dayOfWeek( dc );
   if ( weekday < dow1st )
   {
      weekday += 7;
   }
   if ( nth < 0 || nth > 4 )
   {
      nth = 4;
   }
   dc += weekday - dow1st + 7 * nth;
   if ( nth == 4 )
   {
      /* check that the fifth week is actually in the same month */
      int tMonth, tDayOfMonth, tYear;
      decodeDate( &tMonth, &tDayOfMonth, &tYear, dc );
      if ( tMonth != month )
      {
         dc -= 7;
      }
   }
   return dc;
} 
```

mod() 函数是一个显而易见的效率问题。如您所料，它提供了两个积分红利的商和余数。C/C++ 提供了模数运算符 (%)，这似乎是一个更好的选择；但是，标准没有具体说明该操作应如何处理负股息。（有关更多信息，请参见[此处](https://stackoverflow.com/questions/7594508/modulo-operator-with-negative-values)）。

可能有一个使用有效整数数学的便携式解决方案；但是，我在这里选择了一个效率稍低的，但保证在所有平台上都是正确的。

日期代码只是相对于基准日期的天数偏移量。我选择了 1600-March-01，因为它是一个 400 年的公历周期的开始，它足够早，因此我们可能遇到的所有日期都会产生一个正整数的日期代码。但是，基准日期之前的日期代码没有任何错误。由于我们使用的是稳定/便携的模运算，因此所有数学运算都适用于负日期代码。

有些人不喜欢我的非标准基准日期，所以我决定采用标准的 Unix 纪元，从 1970 年 1 月 1 日开始。我定义了 unixEpochBeginsOnDay 以使日期代码在所需日期开始。如果你想使用不同的基准日期，你可以用你喜欢的替换这个值。

计算日期代码就像将月份、dayOfMonth 和年份传递给 dateCode() 一样简单：

```
int dc = dateCode( 2, 21, 2001 );  // returns date code for 2001-Feb-21 
```

我编写了 dateCode 以便它接受超出月份和 dayOfMonth 范围的值。您可以将月份视为给定年份一月之后的整数月数。这里有一些测试来证明：

```
assert(dateCode( 14, 1, 2000 ) == dateCode( 2, 1, 2001 ));
assert(dateCode( 5, 32, 2005 ) == dateCode( 6, 1, 2005 ));
assert(dateCode( 0,  1, 2014 ) == dateCode(12, 1, 2013 )); 
```

使用非规范月份和 dayOfMonth 值调用 dateCode，然后使用 decodeDate 转换回来，是规范化日期的有效方法。例如：

```
int m, d, y;
decodeDate( &m, &d, &y, dateCode( 8, 20 + 90, 2014 ));
printf("90 days after 2014-08-20 is %4d-%02d-%02d\n", y, m, d); 
```

输出应该是：

2014-08-20 之后的 90 天是 2014-11-18

decodeDate() 总是生成月份和 dayOfMonth 的规范值。

dayOfWeek() 只返回 dateCode 的模数 7，但由于 1970-January-01 是星期四，我不得不将 dateCode 偏置 3。如果您希望在与星期一不同的一天开始您的一周，则修复 Weekdays 枚举并根据需要更改偏差。

cardinalCode() 提供了这些方法的有趣应用。第一个参数提供月份的周数（“nth”），第二个参数提供工作日。因此，要找到 2007 年 8 月的第四个星期六，您将：

```
int m, d, y;
decodeDate( &m, &d, &y, cardinalCode( 3, eSaturday, 8, 2007 ) );
printf( "%d/%02d/%d\n", m, d, y ); 
```

这产生了答案：

2007 年 8 月 25 日

请注意，上例中的第 n 个参数 3 指定了第四个星期六。我争论过这个参数应该是从零开始还是从一开始。无论出于何种原因，我决定：0=第一，1=第二，2=第三，等等。即使是最短的月份，每个工作日也会出现四次。值 4 具有特殊含义。人们会期望它返回请求的工作日的第五次出现；但是，由于该月可能会或可能不会出现第五次，因此我决定返回该月的*最后一次*出现。

例如，要显示明年每个月的最后一个星期一：

```
int i, m, d, y;
for (i=1; i <= 12; ++i) {
    decodeDate( &m, &d, &y, cardinalCode( 4, eMonday, i, 2015 ) );
    printf( "%d/%02d/%d\n", m, d, y );
} 
```

最后一个示例，说明 cardinalCode() 的一种用法，显示距离下一次大选的天数：

```
#include <stdio.h>
#include <time.h> /* only needed for time() and localtime() calls */
#include "datecode.h"

void main()
{
   int eYear, eday, dc;
   int eY, eM, eD;
   time_t now;
   struct tm bdtm;

   time(&now);
   if (localtime_r(&now, &bdtm) == NULL) {
       printf("Error\n");
       return 1;
   }
   eYear = bdtm.tm_year + 1900;
   dc = dateCode(bdtm.tm_mon + 1, bdtm.tm_mday, eYear);
   if ((eYear % 2) != 0) {
       ++eYear;
   }
   for(;;) {
       eday = cardinalCode(0, eTuesday, 11, eYear);
       if (eday >= dc) break;
       eYear += 2;    /* move to the next election! */
   }
   decodeDate(&eM, &eD, &eY, eday);
   printf("Today is %d/%02d/%d\neday is %d/%02d/%d, %d days from today.\n",
           bdtm.tm_mon + 1, bdtm.tm_mday, bdtm.tm_year + 1900,
           eM, eD, eY, eday - dc);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T09:33:36.107

这

```
bool IsLeapYear(int year) 
{ 
    if ((year % 4 == 0) && (year % 100 != 0) && (year % 400 == 0)) return true; 
    else return false; 
} 
```

是不正确的。它返回`false`2000 年。更好：

```
bool IsLeapYear(int year) 
{ 
    if (year % 400 == 0) return true; 
    if ((year % 4 == 0) && (year % 100 != 0)) return true; 
    return false; 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-23T09:41:20.753

显然，瓶颈是年份计算。我建议你这样做。初始化日历时，通过将天数除以 365 来近似年份（非常粗略）。之后，在此估计之前预先形成所有闰年的列表。它应该相当快，因为​​您不需要计算*所有*这些，只需每次添加 4 年。另外，在做的时候，数一数你有多少这样的东西。实际上，您甚至可以将它们计算在更大的包中（即每 400 年有 100 个闰年），但您需要仔细检查闰年的例外情况，而不是跳过其中的一些。

在此结束时，您将获得年份的粗略估计，以及之前所有闰年的数量。现在您可以非常轻松地计算精确的年份，而无需遍历任何内容：

```
leapYearCount * 366 + (lastCalculatedYear - leapYearCount) * 365 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-23T09:47:31.380

让我简化问题，我不会考虑解释的例外情况。每 4 年发生一次闰年，如果您有 365*5 天，则必须有闰年（除非应用了例外 2）。您可以只使用除法来获取闰年的数量（如果忽略例外情况）。

然后，您可以轻松地使用除法和余数来获得非闰年/月/日。

使用相同的基本直觉来解决*异常 1*（如果年数是 100 的倍数，则还要检查*异常 2*）

> 1.  能被4整除的年份是闰年
> 2.  规则 1 的例外：能被 100 整除的年份不是闰年
> 3.  规则 2 的例外：能被 400 整除的年份是闰年

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-23T09:55:34.827

> 自参考日期（在我的情况下是**Jan 1, 0001 AD**）以来，我有 N 天...

在这种情况下，应用 4-100-400 规则和查找月份长度的“效率”不是您的主要问题。还请注意将今天的公历应用到其成立之前的日期所固有的多个问题，*以及*公历没有统一引入的事实。(*)

[维基百科](http://en.wikipedia.org/wiki/Gregorian_calendar#Proleptic_Gregorian_calendar)是一个非常[复杂](http://en.wikipedia.org/wiki/Conversion_between_Julian_and_Gregorian_calendars)的主题的[良好](http://en.wikipedia.org/wiki/30_February)起点。

(*)：取决于国家，1582 年 10 月 15 日至 1923 年 2 月 15 日之间的任何时间，分别。实际上，一点也不。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-23T09:45:25.307

为了加快年份的计算，你可以建立一个查找表

```
int[] YearStartDays =
{
    0,                     // 1 AD
    365,                   // 2 AD
    365 + 365,             // 3 AD
    365 + 365 + 365,       // 4 AD
    365 + 365 + 365 + 366, // 5 AD (4 was a leap year)
    /* ... */
}; 
```

然后，您可以在此数组中进行二进制搜索，即 O(log N) 而不是当前年份查找算法的 O(N)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-20T20:18:51.073

```
bool IsLeapYear(int year)
{
    boost::gregorian::date d1(year, 1, 1);
    boost::gregorian::date d2 = d1 + boost::gregorian::years(1);
    boost::gregorian::date_duration diff = d2 - d1;
    return diff.days() != 365;
} 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-07-23T15:36:15.613

你为什么要重新发明日期？

日期数学很好理解。标准 C 库（没错，是 C，而不仅仅是 C++）已经有很多年的日期函数了。

正如其他人所指出的那样，提升日期类也设计精良且易于使用。

在寻找答案时，第一个问题应该是，问题是否已经解决。这个问题已经解决了很多年。

# 3d - Leica ScanStation C10 输出文件格式

> ID：11609773
> 
> 赞同：2
> 
> 时间：2012-07-23T09:28:15.303
> 
> 标签：3d, file-format, point-clouds, lidar

这是他们尚未发布的徕卡专有文件格式。必须使用他们自己的（仅限 Windows）软件 Cyclone 来处理来自 ScanStation 的数据。

任何人都可以提供有关这些 .bin 文件的内部结构的任何提示吗？

# jquery - 使用 jQuery 显示内容

> ID：11609777
> 
> 赞同：0
> 
> 时间：2012-07-23T09:28:22.207
> 
> 标签：jquery, html

快速提问，如何在另一个页面中的“page-result”div 上显示搜索结果：

```
document.getElementById( 'page-result' ).innerHTML = xmlhttp.responseText; 
```

任何的想法？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:35:10.217

你需要使用jquery吗？

```
$('#page-result').html( xmlhttp.responseText); 
```

如果您需要在另一个窗口中进行操作，只需打开它

```
var newWindow = window.open( 'some params');
$(newWindow.document).find('#page-result') 
```

# android - 触摸屏幕并在android中添加标记

> ID：11609778
> 
> 赞同：2
> 
> 时间：2012-07-23T09:28:31.340
> 
> 标签：android, coordinates, marker, osmdroid

我想在触摸屏幕时添加一个标记。我使用 osmdroid，没有谷歌地图。此外，我想取回这个标记的坐标。

目前，我可以显示 osm 地图并显示用户的位置。

谢谢 ！

# actionscript - 如何使用 actionscript 从 xml 树中提取值

> ID：11609779
> 
> 赞同：2
> 
> 时间：2012-07-23T09:28:31.197
> 
> 标签：actionscript

我有一个如下的 xml 树

```
<Response>
<Terminal>
<Name>m1</Name>
<Value><Array1><DBL><Val>-0.143077</Val></DBL></Array1></Value>
</Terminal>
<Terminal>
<Name>m3</Name>
<Value><Array3><DBL><Val>-0.876611</Val></DBL></Array3></Value>
</Terminal>
<Terminal>
<Name>m2</Name>
<Value><Array2><DBL><Val>-0.459437</Val></DBL></Array2></Value>
</Terminal>
</Response> 
```

我必须使用动作脚本提取 m1、m2、m3 值

谁能帮我写这段代码。

下面的代码是否足够

```
for (var i=0; i<xml.Terminal.length(); i++) {

     if (xml.Terminal.Name.text()=="m1") {

                       voltage=xml.Terminal.Value.Array1.DBL.Val.text()
                              }
     else if (xml.Terminal[i].Name.text()=="m2") {

                      current=xml.Terminal.Value.Array2.DBL.Val.text();

                              }
     else if (xml.Terminal[i].Name.text()=="m3") {

                       temperature=xml.Terminal.Value.Array3.DBL.Val.text();

                            }
        }

        Menu_Content1.volt_val.text = voltage;
    Menu_Content1.curr_val.text = current;
    Menu_Content1.temp_val.text = temperature;
) 
```

volt_val.text 等用于在 flash 中添加的文本显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T13:02:24.110

要解析 XML 中的常见格式化标签，您必须首先将它们放入父标签中，在您的情况下创建这样的 XML

```
<Response>
<**PARENT_TAG**>
<Terminal>
<Name>m1</Name>
<Value><Array1><DBL><Val>-0.143077</Val></DBL></Array1></Value>
</Terminal>
<Terminal>
<Name>m3</Name>
<Value><Array3><DBL><Val>-0.876611</Val></DBL></Array3></Value>
</Terminal>
<Terminal>
<Name>m2</Name>
<Value><Array2><DBL><Val>-0.459437</Val></DBL></Array2></Value>
</Terminal>
</**PARENT_TAG**>
</Response> 
```

在 actionscript 中解析 XML 之后非常容易，您只需创建 XML 的对象，然后使用 DOM 格式获取特定标签的值作为示例

```
var result:XML = new XML(event.target.data);

for(var i:int=0; i<result.PARENT_TAG.length; i++)
{
   trace(result.PARENT_TAG.Terminal[i].Name);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:01:35.783

是的，你的想法是正确的。但你应该首先在对象中加载 xml 文件。您可以在项目中使用[此处](http://www.blog.mpcreation.pl/actionscript-30-basics-part-3-loading-xml-data/)或[此处](https://stackoverflow.com/questions/7402440/action-script-3-read-values-from-xml-file)的 XML 。

# android - 更改操作栏分隔符

> ID：11609782
> 
> 赞同：2
> 
> 时间：2012-07-23T09:28:36.247
> 
> 标签：android, android-actionbar

我正在使用[Johan Nilsson](https://github.com/johannilsson/android-actionbar/)操作栏。我只是想知道，是否可以将操作栏分隔符更改为图像？即我想要一个图像作为操作栏分隔符而不是某种颜色。

# c++ - 1 valgrind 的无效读取大小

> ID：11609783
> 
> 赞同：1
> 
> 时间：2012-07-23T09:28:37.670
> 
> 标签：c++, valgrind

我一直在抓挠头发，但似乎找不到以下代码有什么问题。这是它生成的 valgrind 输出的一小段

> 在 0x4c22d82 处读取大小为 1 的无效：strlen (mc_replace_strmem.c:242) by 0x5E65CA: Application::readConfigurationFile() (char_traits.h:262) by 0x5694BD: main Address 0xafc9660 是大小为 39 的块内的 24 个字节 free'd在 0x4C20E0D：操作员 delete(void*) (vg_replace_malloc.c:342) by 0x635618: Configurator::getParameterValue(char const*, char**) by 0x5E65B2: Application:readConfigurationFile() (Application.cpp:77) by 0x5694BD:主要的

```
bool Configurator::getParameterValue(const char *p_pParameterName, char** p_pParameterValue)
{
    bool blReturnValue = false;

    QDomElement element;
    QDomNode node;
    QDomNodeList list;

    list = doc.elementsByTagName(p_pParameterName);
    if (!list.isEmpty())  
    {
        node = list.item(0);
        element = node.toElement();
        QString qs = element.text().toUtf8();
        *p_pParameterValue = (char *)(qs.toStdString().c_str());
        blReturnValue = true;
    }
    else
    {
        char sMessage[200];
        sprintf(sMessage, "<Configurator::getParameterValue> Error! Parameter %s could not be found\n", p_pParameterName);
        m_outputFunction(sMessage);
    }

    return blReturnValue;
}

bool Configurator::parseFile()
{
    bool blReturnValue = false;

    QString errorStr;
    int errorLine;
    int errorColumn;

    if (!doc.setContent((QIODevice*)(&file), true, &errorStr, &errorLine, &errorColumn))
    {
        char aTemp[512];
        sprintf(aTemp, "<Configurator::parseFile> error! can not read the file row: %d, column: %d:\n",errorLine, errorColumn);
        m_outputFunction(aTemp);
    }
    else
    {
        closeFile();
        blReturnValue = true;
    }

    return blReturnValue;
}

bool Application::readConfigurationFile()
{
    bool blReturnValue = false;

    m_outputFunction("<Application::readConfigurationFile> Reading configuration..\n");

    if(m_configurator.parseFile())
    {
        blReturnValue = true;

        m_configurator.writeParameters();

        char *pTemp = 0;

        if(!m_configurator.getParameterValue("center_no", m_bCenterNo)) 
            m_bCenterNo = 1;
        if(m_configurator.getParameterValue("highway_header", &pTemp))
            m_strHighwayHeader.assign(pTemp);
        else
            m_strHighwayHeader.assign("... HIGHWAY"); // Default value
    }
    return blReturnValue;
} 
```

有人可以告诉我为什么我看到无效的读取，我什至没有在这个代码片段中使用 malloc/calloc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:36:01.223

```
*p_pParameterValue = (char *)(qs.toStdString().c_str()); 
```

你为什么这样做？QString 是局部变量并`toStdString`返回新的`std::string`

```
std::string QString::toStdString () const 
```

因此，返回的 std::string 将被删除。c_str() 返回指向 const char* 的指针。引自 n3337 草案：

```
const charT* c_str() const noexcept;
const charT* data() const noexcept; 
```

> 1 返回： 一个指针 p 使得 p + i ==`&operator[](i)`对于每个 i in `[0,size()]`。2 复杂性：恒定的时间。3 要求：程序不得更改存储在字符数组中的任何值。

```
if(m_configurator.getParameterValue("highway_header", &pTemp))
                m_strHighwayHeader.assign(pTemp); 
```

错误的。由于 pTemp 中的值被删除，所以当临时对象`qs.toStdString()`被删除时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:44:15.603

您实际上是在返回一个指向局部变量的指针。在`getParameterValue`变量`qs`中是块内的局部变量，并且您将该字符串指针分配给`p_pParameterValue`. 当`getParameterValue`以前占用的堆栈空间`qs`现在被回收并且指针 pTemp 现在指向未使用的内存时。这是*未定义的行为*，可能会导致很多不好的事情发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:44:50.983

从返回的临时字符串对象`qs.toStdString()`为字符串分配内存，当临时对象被销毁时（在评估完整表达式之后），该内存被释放。如果您正在使用优化进行编译，则`std::string`d'tor 很可能已内联到您的函数中，因此它不会显示在您的调用堆栈中。

当函数完成后要继续使用字符串数据时，需要使其持久化。（在我看来）最明智的方法是返回一个`std::string`对象而不是 a `char *`，因此最后一个参数可以是 a `std::string **`（由 填充`new std::string(qs.toStdString())`）或`std::string &`分配给的 a 。

如果你有 Boost 库，你也可以使用`boost::optional<std::string>`它作为返回类型，它提供了一个“带有有效标志的字符串”数据类型。

# php - 使用数组 PHP 中的数据形成一个新字符串

> ID：11609786
> 
> 赞同：0
> 
> 时间：2012-07-23T09:28:45.657
> 
> 标签：php, arrays

我需要减少这些数字的数量并以更简洁的方式呈现它们，而不是呈现具有相同“前缀”或“根”的几行数字。例如：

如果我有一个这样的数组，有几个数字字符串（obs：只有数字并且数组已经排序）：

```
$array = array( 
"12345647",
"12345648",
"12345649",
"12345657",
"12345658",
"12345659",
); 
```

字符串：123456 在数组的所有元素中都是相同的，因此它是数字的根或前缀。根据上面的数组，我会得到这样的结果：

```
//The numbers in brackets represent the sequence of the following numbers,
//instead of showing the rows, I present all the above numbers in just one row:
$stringFormed = "123456[4-5][7-9]"; 
```

**另一个例子：**

```
$array2 = array( 
"1234",
"1235",
"1236",
"1247",
"2310",
"2311",
); 
```

从第二个数组，我应该得到这样的结果：

```
$stringFormed1 = "123[4-7]";
$stringFormed2 = "1247";
$stringFormed3 = "231[0-1]"; 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:16:50.230

```
 $array = array( 
    "12345647",
    "12345648",
    "12345649",
    "12345657",
    "12345658",
    "12345659",
    );

    //find common string positions for all elements

    $res = array();
    foreach($array as $arr){

        for($i=0;$i<strlen($arr);$i++){

            $res[$i][$arr[$i]] = $arr[$i];
        }

    }
    //make final string
    foreach($res as $pos){
        if(count($pos)==1)
        $str .= implode('',$pos);
        else{
//u may need to sort these values if you want them in order
            $end = end($pos);
            $first = reset($pos); 
            $str .="[$first-$end]";
        }
    }

echo $str; // "123456[4-5][7-9]"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T10:18:42.377

作为第一个示例的解决方案，但我不认为可能有多个根源。顺便说一句，我不确定它是否编码良好......

```
<?php
function longest_common_substring($words)
{
  $words = array_map('strtolower', array_map('trim', $words));
  $sort_by_strlen = create_function('$a, $b', 'if (strlen($a) == strlen($b)) { return strcmp($a, $b); } return (strlen($a) < strlen($b)) ? -1 : 1;');
  usort($words, $sort_by_strlen);
  // We have to assume that each string has something in common with the first
  // string (post sort), we just need to figure out what the longest common
  // string is. If any string DOES NOT have something in common with the first
  // string, return false.
  $longest_common_substring = array();
  $shortest_string = str_split(array_shift($words));
  while (sizeof($shortest_string)) {
    array_unshift($longest_common_substring, '');
    foreach ($shortest_string as $ci => $char) {
      foreach ($words as $wi => $word) {
        if (!strstr($word, $longest_common_substring[0] . $char)) {
          // No match
          break 2;
        } // if
      } // foreach
      // we found the current char in each word, so add it to the first longest_common_substring element,
      // then start checking again using the next char as well
      $longest_common_substring[0].= $char;
    } // foreach
    // We've finished looping through the entire shortest_string.
    // Remove the first char and start all over. Do this until there are no more
    // chars to search on.
    array_shift($shortest_string);
  }
  // If we made it here then we've run through everything
  usort($longest_common_substring, $sort_by_strlen);
  return array_pop($longest_common_substring);
}

$array = array( 
"12345647",
"12345648",
"12345649",
"12345657",
"12345658",
"12345659",
);
$result= longest_common_substring($array);
for ($i = strlen($result); $i < strlen($array[0]); $i++) {
    $min=intval($array[0][$i]);
    $max=$min;
    foreach ($array as $string) {
        $val = intval($string[$i]);
        if($val<$min)
            $min=$val;
        elseif($val>$max)
            $max=$val;
}
    $result.='['.$min.'-'.$max.']';
}
echo $result;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:50:14.963

好吧，据我了解，您想要具有唯一字符的最终字符串。（我不确定您是否要订购）所以，首先 implode 创建字符串

```
$stringFormed = implode("", $array); 
```

然后我们得到唯一的字符：

```
$stringFormed=implode("",array_unique(str_split($stringFormed))); 
```

输出：123456789

# javascript - 无法使用backbone.js 正确获取集合

> ID：11609788
> 
> 赞同：0
> 
> 时间：2012-07-23T09:28:55.467
> 
> 标签：javascript, backbone.js, backbone.js-collections

请阅读到最后（我最后参考了console.log）

该模型：

```
// Spot model:
define([
  'jquery',    
  'underscore',
  'backbone'  
], function($, _, Backbone){
    var Spot = Backbone.Model.extend({
        url: function(){
            if (this.get('id') !== null){
                return '/spot/' + this.get('id');
            }
            return '/spots';
        },
        idAttribute: "id",
        defaults: {
            id: null,
            details:{
                name: "school",
                type: 4,
                rank: 3,
                comment: null
            },
            location:{
                    address: '',
                    lat: 70.345,
                    lng: 90.123
            },
            user:{
                id: 12345,
                name: "magneto"
            }
        },
        parse: function(response){
        /*  var attrs = {
                details: {},
                location: {},
                user: {}
            };
            attrs.id = response.id;

            attrs.details.name = response.details.name;
            attrs.details.type = response.details.type;
            attrs.details.rank = response.details.rank;
            attrs.location.lat = response.location.lat;
            attrs.location.lng = response.location.lng;
            return attrs; */
        }
    });
    return Spot;
}); 
```

收藏：

```
// Spots collection:
define([
  'jquery',    
  'underscore',
  'backbone',  
  'models/Spot'
], function($, _, Backbone,spot_model){
    var Spots = Backbone.Collection.extend({
        model: spot_model,
        url:
            function() {
            return '/projects/FE/spots';
          },
        parse: function(response){
    /*      var parsed = [],
              key;

          _.each(response, function (value) {
              parsed.push(value);
          }, this);

          return parsed;*/
        },
      comparator: function(spot){
        return spot.rank;
      }
    });
    return Spots;
}); 
```

风景：

```
// inside our view named: SpotsView
define([
  'jquery',
  'underscore',
  'backbone',
  'mustache',
  'icanhaz',
  'views/spots/Spot',
  'collections/Spots',
  'text!../../../../templates/spots/spots.mustache!strip',
], function($,
            _,
            Backbone,
            mustache,
            ich,
            SpotView,
            Spots,
            SpotsTemplate){
  var SpotsView = Backbone.View.extend({
    //el: $("#container"),
    tagName: "ul",
    initialize: function(){

      console.log('initialize view');
      console.log(this.collection);
      _.bindAll(this,'render');

    },
    render: function(){
      console.log(this.collection);
      console.log('length: ' + this.collection.length);
      console.log('models: ' + this.collection.models);

      _.each(this.collection.models, function (spot) {
            $(this.el).append(new SpotView({model:spot}).render().el);
        }, this);
      return this;
    }
  });
  return SpotsView;
}); 
```

在我们的 app.js 中

```
 var spots = new Spots({model: Spot}),
        spotsview;

    spots.reset();
    console.log(spots.fetch());
    console.log('spots:');
    console.log(spots.length);
    console.log(spots);
    spotsview = new SpotsView({collection: spots}); 
```

服务器输出

```
// SERVER output(s) i tried:
{"id": 666,"details":{"name": "mark","type":4,"rank":3.1,"comment":"nothing"},"location":{"lat":70.123,"lng":90.321,"address":"5th avenue"},"user":{"id":333,"name":"wolverine"}}

// another one i tried:
[{"id": 666,"details":{"name": "mark","type":4,"rank":3.1,"comment":"nothing"},"location":{"lat":70.123,"lng":90.321,"address":"5th avenue"},"user":{"id":333,"name":"wolverine"}}]

// another one:
[{"id":"55","details":{"name":"Dan","type":"6","rank":"-9.9","comment":"myEx"},"location":{"lat":"40.780346","lng":"-73.957657","address":"78, West 86th Stree"}},{"id":"57","details":{"name":"Ron","type":"6","rank":"3.0","comment":"Butch"},"location":{"lat":"40.715569","lng":"-73.832428","address":"1344 Queens Boulevard"}},{"id":"58","details":{"name":"Monk's","type":"11","rank":"9.5","comment":"yesss"},"location":{"lat":"40.805443","lng":"-73.965561","address":"112th and broadway "}}]

// without using "parse" method in the collection and in the model (they are commented) i get:
d
_byCid: Object
_byId: Object
length: 0
models: Array[0]
__proto__: x

// when not commented (parse in both collection and model) i get:
_byCid: Object
_byId: Object
length: 6
models: Array[6]
__proto__: x

// despite it says 6, in the view you can see there are lines:
//console.log(this.collection);  <--- returns the abovee
//console.log('length: ' + this.collection.length); <-- returns 0
//console.log('models: ' + this.collection.models); <--- none 
```

我还尝试从模型中删除所有属性定义。仍然没有工作。返回值内容类型为：application/json（已验证）且为有效json。

我读过： [Backbonejs 集合长度始终为零](https://stackoverflow.com/questions/10159360/backbonejs-collection-length-always-zero)

但尽管 console.log 显示 0 length ，也：

```
for(var i=0; i< this.collection.length; i++){
        console.log(this.collection.get(i));
} 
```

不行！

我也读过 [主干集合是否自动解析加载的数据](https://stackoverflow.com/questions/10427764/did-backbone-collection-automatically-parse-the-loaded-data)

非常感谢

更新：我可能已经解决了：我什至从模型和集合中删除了“解析”声明并且它有效：长度：6 SpotsView.js 模型：[object Object]，[object Object]，[object Object ],[object Object],[object Object],[object Object] 无论哪种方式，我都想知道正确的用法，如果我做得对以及如何在两种情况下都以正确的方式使用 PARSE（收集和模型方面），什么你是否同时返回（！）。肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:14:41.123

`Collection.fetch`是一个异步操作，因此当您获取集合时，将发送 ajax 调用，然后您的代码将继续运行，就像什么都没发生一样。

```
spots.reset(); // emptied your collections

console.log(spots.fetch()); // fetch your collection (why is this inside a console.log???)

console.log('spots:'); // log some text, this will be executed right after your fetch call has been made

console.log(spots.length); // here the fetch call probably hasn't returned yet, so returns 0

console.log(spots); // same as above, so returns an empty collection

spotsview = new SpotsView({collection: spots}); // the collection might or might not get populated by the time you get to rendering so there is probably variation from program run to another 
```

那么如何解决这个问题呢？在视图中，将渲染函数绑定到集合的重置事件（在每次成功获取或强制重置后启动）。这样，视图只会在有要显示的内容时呈现。

```
// view's initialize method
initialize: function() {
  ...
  this.collection.on('reset', this.render);
  ...
} 
```

# mysql - 使用 UCS2 时 mysql 的编码问题

> ID：11609789
> 
> 赞同：0
> 
> 时间：2012-07-23T09:28:55.890
> 
> 标签：mysql, encoding

我正在尝试将一个以 UCS2-Big Indian 编码的大 csv 文件导入 mysql 表。

这是mysql代码：

```
DROP TABLE if exists PAPERS; 

CREATE TABLE `PAPERS` (
ID_RESEARCHER VARCHAR(20),
PAPER_ACCESSOR_NUMBER VARCHAR(20),
  primary key(ID_RESEARCHER,PAPER_ACCESSOR_NUMBER)
) ENGINE=InnoDB DEFAULT CHARSET=ucs2;

load data local infile '...dump_all_papers_test_2.csv' 
into table PAPERS
CHARACTER SET ucs2
fields terminated by '\t' enclosed by '"'
lines terminated by '\n' 
(ID_RESEARCHER, PAPER_ACCESSOR_NUMBER); 
```

以及csv的内容（格式ucs-2大印，notepad++表示）

```
"100"   "A1974U626600001"
"100"   "A1974U626600001"
"100"   "A1974U626600001" 
```

csv样本的副本：

[http://pastebin.com/HMssuxCf](http://pastebin.com/HMssuxCf)

错误是：

```
1 row(s) affected, 2 warning(s):
1265 Data truncated for column 'ID_RESEARCHER' at row 1
1261 Row 1 doesn't contain data for all columns
Records: 1  Deleted: 0  Skipped: 0  Warnings: 2 
```

这里发生了什么？

该操作仅填充第一个字段。是不是mysql支持ucs2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:36:19.493

好的。

解决方案在文档中：

请注意，目前无法加载使用 ucs2 字符集的数据文件。

[http://dev.mysql.com/doc/refman/5.0/en/load-data.html](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

# c - dbus总是需要总线吗

> ID：11609794
> 
> 赞同：1
> 
> 时间：2012-07-23T09:29:07.713
> 
> 标签：c, ipc, dbus, bus

我正在尝试使用 DBUS 的低级 c-api 通过套接字实现服务器客户端。我的问题是..是否有必要始终使用总线进行 dbus 通信。并且 BUS 是否仅意味着 dbus-daemon 的额外实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:52:51.453

是的，您需要一条用于 DBus 通信的总线。总线是一个通信通道，仅此而已。更多的总线并不意味着更多的 Dbus 守护进程实例，它只是意味着更多的通信通道。

在一个系统中，您通常有一个 DBus 守护程序和一个或多个总线。每条总线都用于某种类型的消息（在您的应用程序中定义）。

2 个应用程序可以通过 DBus 进行通信，绕过守护进程，通过指定要向其发送信号/方法的客户端的名称（DBus 标准允许）。但是，我认为没有提供此功能的 DBus 绑定。但是如果你想使用 DBus 的原始 C API，你可以自己实现它。您可以查看[此讨论](https://stackoverflow.com/questions/11019048/selective-d-bus-signal-emitting-from-observer-unicast-signal)以获取有关该主题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:29:16.303

不确定 C API，但您可以使用我的 node.js dbus 实现直接连接客户端和服务器。这是一个[例子](https://github.com/sidorares/node-dbus/tree/master/examples/p2p)

# javascript - 如何使用客户端 less.js 导出缩小的 CSS 文件？

> ID：11609796
> 
> 赞同：3
> 
> 时间：2012-07-23T09:29:11.727
> 
> 标签：javascript, css, client-side, less, minify

我有一个正在开发的网络项目，它使用 LESS 将所有文件组合成一个 CSS。但是我显然不希望客户端javascript必须在生产中运行，因为这会减慢速度。

**客户端**less.js有没有办法可以将您提供的 .less 文件导出到单个 CSS 文件中，然后我可以在我的实时环境中调用该文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T15:03:21.493

据我所知，您有几个选择：

1.  使用[LESS 命令行工具](http://lesscss.org/#-server-side-usage)
2.  如果您使用的是 Mac，请使用[LESS.app](http://incident57.com/less/)

运行 watch 命令没什么大不了的，它很快就变成了第二天性:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T15:09:26.673

由于您需要非命令行选项，因此如果您运行的是 OS X ，我建议您使用[LESS.app 。如果不是，请尝试](http://incident57.com/less/)[使用 Simpless](http://wearekiss.com/simpless)（跨平台）或[Crunch](http://crunchapp.net/)（基于 Adob​​e Air）。

PS。他们都是免费的！

# sql - 从三个表中获取所需结果的 SQL 查询

> ID：11609803
> 
> 赞同：1
> 
> 时间：2012-07-23T09:29:31.723
> 
> 标签：sql, sql-server-2008, tsql, join

我为我的照片库使用 5 个表格来存储不同的信息

照片、PhotoDetails、PhotoMappings、PhotoAlbum、PhotoAlbumCategory。

这是一个多语言网站，我想为相册上传一次照片并与任何语言版本的网站分享。

涉及的步骤。

1.  我将照片添加到照片表
2.  其次，我将照片与 PhotoMapping 表中的（LanguageID、AlbumID、AlbumCategoryID）一起映射到特定相册
3.  第三，我需要添加与特定照片相关的详细信息，如标题、描述、日期......

为了添加详细信息，我想根据这张照片的详细信息是否在 Photodetails 表中显示特定相册下的照片用户列表以及其他信息，例如是/否。

```
PhotoDetails
    [PhotoDetailsID] [int] IDENTITY(1,1) NOT NULL,
    [PhotoTitle] [nvarchar](300) NULL,
    [PhotoDesc] [nvarchar](max) NULL,
    [PhotoDate] [date] NULL,
    [PhotoVisible] [bit] NULL,
    [PhotoID] [int] NOT NULL,
    [AlbumID] [int] NULL,
    [LanguageID] [int] NULL,
    [PhotoDetailsCreatedOn] [date] NULL

PhotoMappings
    [MappingID] [int] IDENTITY(1,1) NOT NULL,
    [LanguageID] [int] NULL,
    [CategoryID] [int] NULL,
    [AlbumID] [int] NULL,
    [PhotoID] [int] NULL,

Photos
    [PhotoID] [int] IDENTITY(1,1) NOT NULL,
    [PhotoTN] [nvarchar](100) NULL,
    [PhotoLarge] [nvarchar](100) NULL,
    [PhotoGUID] [nvarchar](50) NULL,
    [PhotoCreatedOn] [date] NULL,

SELECT d.PhotoTitle,d.AlbumID,p.PhotoTN AS TN,  p.PhotoID AS PID,p.PhotoLarge AS PL,
case when d.PhotoId is null then 'NO' else 'YES' end AS [Details]
FROM Photos p  JOIN  PhotoDetails d
ON  p.PhotoId = d.PhotoId JOIN PhotoMappings m
ON  p.PhotoId = m.PhotoId WHERE d.AlbumID  = 14 and m.LanguageID = 1 
```

我需要编写一个查询，它将显示 PhotoMapping 表中的所有记录以及 PhotoDetails 表中不存在的那些行。

我正在使用上面的查询，它得到了我想要的结果，但没有显示 PhotoDetails 表中不存在的列

我希望 OUTPUT 如下所示，假设我想要关于 AlbumID=14 & Language =1 的专辑的详细信息（我从查询中只得到前 6 行）

```
PhotoTitle      AlbumID TN      PID PL  Details         
Title of Photo1 14      1Icon.JPG   16  1.JPG   YES
Title of Photo2 14      2Icon.JPG   21  2.JPG   YES
Title of Photo3 14      3Icon.JPG   20  3.JPG   YES
Title of Photo4 14      4Icon.JPG   22  4.JPG   YES
Title of Photo5 14      5Icon.JPG   18  5.JPG   YES
Title of Photo6 14      6Icon.JPG   17  6.JPG   YES
Title of Photo7 14      7Icon.JPG   23  7.JPG   NO
Title of Photo8 14      8Icon.JPG   24  8.JPG   NO 
```

`JOIN`对于我确实更改为`LEFT OUTER JOIN`&`RIGHT OUTER JOIN`但输出保持不变，我将不胜感激

样本数据

**映射表**

```
MappingID   LanguageID  CategoryID  AlbumID PhotoID
1   1   7   14  16
2   1   7   14  21
3   1   7   14  20
4   1   7   14  22
5   1   7   14  19
6   1   7   14  18
7   1   7   14  17
8   1   7   14  23 
```

PhotoDetails 表中的示例数据

```
PhotoDetailsID  PhotoTitle  PhotoDate   PhotoVisible    PhotoID AlbumID LanguageID  PhotoDetailsCreatedOn
20  Title of Photo1     2012-07-02  1   16  14  1   2012-02-07
21  Title of Photo2     2012-07-02  1   17  14  1   2012-02-07
22  Title of Photo3     2012-07-02  1   18  14  1   2012-02-07
24  Title of Photo4     2012-07-02  1   20  14  1   2012-02-07
25  Title of Photo5     2012-07-02  1   21  14  1   2012-02-07
26  Title of Photo6     2012-07-02  1   22  14  1   2012-02-07
23  Title of Photo7     2012-07-02  1   19  10  1   2012-02-07
27  Title of Photo8     2012-07-02  1   23  13  1   2012-02-07
34  Something       2012-07-02  1   14  13  1   2012-02-07
35  Something       2012-03-20  1   37  17  1   2012-03-07
36  Something       2012-03-13  1   38  10  1   2012-03-07 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:50:01.753

在我看来，您需要更改两件事：AlbumID 上的过滤器应该来自 PhotoMappings，而不是 PhotoDetail，并且您需要在 PhotoDetails 上进行左连接。

```
SELECT d.PhotoTitle,
       m.AlbumID,
       p.PhotoTN AS TN,
       p.PhotoID AS PID,
       p.PhotoLarge AS PL,
       case when d.PhotoId is null 
            then 'NO' 
            else 'YES' 
        end AS [Details]
  FROM Photos p
 INNER JOIN PhotoMappings m
    ON p.PhotoId = m.PhotoId
  LEFT JOIN  PhotoDetails d
    ON p.PhotoId = d.PhotoId
 WHERE m.AlbumID = 14
   and m.LanguageID = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:41:32.317

在 PhotoMappings 应该工作之前左外部 JOIN：

```
SELECT d.PhotoTitle,d.AlbumID,p.PhotoTN AS TN,  p.PhotoID AS PID,
p.PhotoLarge AS PL,
case when d.PhotoId is null then 'NO' else 'YES' end AS [Details]
FROM Photos p  JOIN  PhotoDetails d
ON  p.PhotoId = d.PhotoId 
left outer JOIN PhotoMappings m
ON  p.PhotoId = m.PhotoId 
WHERE d.AlbumID  = 14 and m.LanguageID = 1 
```

# android - 在android中同时运行两个动画

> ID：11609804
> 
> 赞同：1
> 
> 时间：2012-07-23T09:29:33.487
> 
> 标签：android, android-animation

我有两个带有两个不同 .xml 文件的动画，一个动画是 Translet，另一个是逐帧动画。我想在一个活动中同时运行这两个动画。谁能告诉我我该怎么做... ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:41:49.360

使用[AnimationSet](http://developer.android.com/reference/android/view/animation/AnimationSet.html)。您可以调用**addAnimation(Animation a)**添加所需的动画数量；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:33:48.110

```
overridePendingTransition(R.anim.youranim1,R.anim.youranim12); 
```

# java - 为什么程序迭代时java语言禁止程序更新集合？

> ID：11609807
> 
> 赞同：1
> 
> 时间：2012-07-23T09:29:54.293
> 
> 标签：java

我知道在 java.util.AbstractList 中有一个名为“Itr”的 InnerClass。并且有一个名为“expectedModCount”的字段，一个名为“checkForComodification”的方法。当迭代一个集合但更新集合时，这个方法会抛出ConcurrentModificationException 我想知道为什么java语言设计成这样？这样做的目的是什么。

谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T09:32:56.297

> 我想知道为什么java语言设计成这样？

它不是*语言*的一部分。它是集合框架的一部分。

基本上，如果你在迭代一个集合并且它在你下面发生了变化，那么就应该发生什么做出一个*非常通用的规范是相对困难的。*虽然您当然可以决定列表的一些规则，但是（比如说）地图的条目集呢？添加或删除条目可能会完全改变内部顺序——那么您希望发生什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:43:02.520

如果允许更改集合，您会得到很多有问题的案例。

假设我们有一个包含元素 0 到 4 的列表，迭代器刚刚通过 3

```

|0|1|2|3|4|
迭代器^

```

现在我们在开头添加一个元素

```

|5|0|1|2|3|4|
迭代器^?^

```

迭代器现在应该返回什么？

*   它可以返回 4，因为这是更改之前的下一个元素
*   它可以返回 3，因为它现在位于迭代器指向的索引处

根据列表实现，每一个都增加了复杂性并有性能损失，通过禁止修改集合，我们可以避免指定正确的行为和附加的复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:37:29.967

您可以迭代集合并使用`Iterator`（这是执行此操作的标准方法）对其进行修改。

请参阅[遍历集合，在循环中删除时避免 ConcurrentModificationException 以](https://stackoverflow.com/questions/223918/java-efficient-equivalent-to-removing-while-iterating-a-collection)获取更多讨论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T09:40:15.230

如果一个线程修改了一个集合，而另一个线程从中读取，则可能会发生我们所说的[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。避免它会消耗一些性能，但可以避免不可预测/不需要的结果（例如，如果没有这样的检查，您可能会跳过或读取 ArrayList 中的现有元素两次）。

# ios4 - 重要的LocationChangeMonitoringAvailable 在iOS 4 上不起作用

> ID：11609809
> 
> 赞同：1
> 
> 时间：2012-07-23T09:30:05.510
> 
> 标签：ios4, location, monitoring, cllocationmanager

我有以下简单代码，用于查看设备是否支持重要的位置变化监控：

```
if (![CLLocationManager significantLocationChangeMonitoringAvailable])
{UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Sorry" message:@"Your device won't support the significant location change." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alert show];
    return;                                   
} 
```

这总是在 iOS 5 设备上返回 yes，但在 iOS 4.3 设备上返回 NO。这些设备中有3G。

根据[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)，从 4.0 开始支持此 API 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:23:01.720

支持 API，但直到 iOS 5 及更高版本才支持该功能。

# mysql - 重复结果内连接查询

> ID：11609811
> 
> 赞同：1
> 
> 时间：2012-07-23T09:30:16.673
> 
> 标签：mysql

我正在尝试从 4 个表中检索数据：

1.  users_profile
2.  好友列表
3.  bs_items
4.  bs.照片

我正在尝试检索用户朋友上传的产品，为此我进行了以下查询

```
select F.friend_id,F.status,F.uid, b.owner_id,b.price, b.currency, 
  b.item_name,b.item_id,bs.productId,bs.userId,bs.photo_thumb,u.uid,u.fname,
  u.lname, u.profile_pic 
from bs_items b,bs_photos bs,friend_list F,users_profile u 
where    F.status=1 and  F.uid='5' and U.uid=F.friend_id 
  and b.owner_id=F.friend_id 
  and b.item_id=bs.productId  and b.owner_id=bs.userId 
order by b.timestamp desc 
```

但上面的查询给了我想要的结果，但它重复了它们。例如，我有一个朋友上传了产品，然后记录被提取并重复了 5 次。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:58:26.793

试试这个它可能对你有用。

```
select F.friend_id,F.status,F.uid, b.owner_id,b.price, b.currency,b.item_name,b.item_id,bs.productId,bs.userId,bs.photo_thumb,u.uid,u.fname,u.lname,u.profile_pic 
from users_profile u inner join friend_list F on u.uid=f.friend_id
Inner join bs_items b on b.owner_id=F.friend_id
inner join bs_photos bs on b.item_id=bs.productId 
where F.status=1 and F.uid='5' 
Group by F.uid
order by b.timestamp desc 
```

# asp.net - 如何提醒 @Html.EditorFor 值在 asp.net mvc 3 中具有整数数据类型

> ID：11609813
> 
> 赞同：0
> 
> 时间：2012-07-23T09:30:20.773
> 
> 标签：asp.net, asp.net-mvc-3

我已经将数据类型 int 赋予模型中的 ID，现在当我调用 javascript 来提醒它时，它不显示任何结果，而是显示 [object object]。我想显示该 ID 的值。任何提示都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:52:16.360

```
try this:

$(function () {
    $('form').submit(function () {
        $.ajax({
            url: this.action,
            type: this.method,
            success: function (result) {
                $('#elementid').html(result);
            }
        });
        return false;
    });
});

$('#elementid').html(result) 
```

为您提供价值而不是 [object object]。

# core-plot - OHLC 图表的线条颜色

> ID：11609815
> 
> 赞同：0
> 
> 时间：2012-07-23T09:30:33.300
> 
> 标签：core-plot

我们如何用不同的颜色表示 OHLC 图表的上升线和下降线？对于烛台，我们有 increaseFill 和 reductionFill 属性。但是对于 OHLC？有财产吗？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T23:40:27.483

[您应该在Core Plot 问题跟踪器](http://code.google.com/p/core-plot/issues/list)上提交增强请求。

同时，您可以创建两张图——一张用于递增值，另一张用于递减值。

# java - 如何将 unicode 转义序列转换为 char

> ID：11609817
> 
> 赞同：0
> 
> 时间：2012-07-23T09:30:34.470
> 
> 标签：java

在 xml 配置文件中，我有一个分隔符属性配置为 unicode 转义序列，如下所示：

```
<adapter name="Adapter2">
  <property name="adapter.delimiter" value="\u0009"/>
</adapter> 
```

还有一种方法可以获取 Adapter 类中的任何属性：

```
String getProperty(String propertyName) 
```

对于 getProperty("adapter.delimiter") 它返回已经转义的字符串 "\t"

我需要将属性 \u0009 转换为 char 以便能够将 \t char 提供给任何其他方法。

*   如何验证该方法在单元测试中是否真的返回 tab char？

这不起作用（我不确定代码或单元测试是否错误）：

```
public char getDelimiter() throws VTBaseException {
    String delimiterProperty = getProperty("adapter.delimiter");

    if (delimiterProperty == null || "".equals(delimiterProperty)) {
        //default
        return DEFAULT_DELIMITER;
    } else if (delimiterProperty.length() == 1) {
        return delimiterProperty.charAt(0);
    } else {
        throw new VTBaseException();
    }
} 
```

单元测试：

```
@Test
public void testReturnDelimiterProperty()
    throws Exception
{
    VTAdapter adapter = manager.getAdapter("Adapter2");
    assertEquals(',', adapter.getDelimiter());//passes if property not set
    adapter = world.getAdapterList().getAdapter("Adapter1");
    assertEquals("\t", adapter.getDelimiter());//fails with exception bellow

}

junit.framework.AssertionFailedError: expected:<    > but was:< >
at junit.framework.Assert.fail(Assert.java:47)
at junit.framework.Assert.failNotEquals(Assert.java:283)
at junit.framework.Assert.assertEquals(Assert.java:64)
at junit.framework.Assert.assertEquals(Assert.java:71)
at 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:57:29.710

输出一个选项卡：

```
String s = "\\u0009";
s = s.substring(2);
char i = (char)(int)Integer.valueOf(s, 16);
System.out.println(i); 
```

# html - 如何使用 css 制作气球教科书的谈话风格

> ID：11609819
> 
> 赞同：0
> 
> 时间：2012-07-23T09:30:40.470
> 
> 标签：html, css

我不知道如何准确地称呼它，这些是我正在研究的例子。是否可以在正方形和三角形部分使用 html 和 css 来完成所有这些，或者最好只使用图像

![在此处输入图像描述](../Images/20d20d0a5c58e1c58b6aa689c6ff8283.png)

![在此处输入图像描述](../Images/81def5aae39d870e197644494b58f985.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:21:56.627

```
Yes it possible to make it using pure css but 
```

它针对不同的浏览器显示不同的结果。我最好建议您借助 CSS 和图像。

```
<div class="firstDiv">
    <div class="secondDiv"></div>
    <div class="arrowDiv"></div>
</div>

apply following css

.firstDiv { float:left; height:25px; width:200px;}
.secondDiv{ float:left; height:25px; width:170px; background:#666; font-family:Arial, Helvetica, sans-serif; font-size:12px; line-height:25px; color:#FFF;}
.arrowDiv { float:left; height:25px; width:25px; background:url(images/arrow.png) left no-repeat;} 
```

# bash - 追加到上一行进行匹配

> ID：11609821
> 
> 赞同：3
> 
> 时间：2012-07-23T09:30:51.397
> 
> 标签：bash, shell, sed, awk

如果找到匹配项，我可以使用`sed`或附加到上一行吗？`awk`

我有一个格式为：

```
 INT32
          FSHL (const TP  Buffer)
             {
          INT32
          FSHL_lm (const TP  Buffer) 
          { WORD32 ugo = 0; ... 
```

我要做的是扫描独立的大括号`{`并将其附加到前一个非空行。对于在同一行中附加任何内容的开放大括号不应发生匹配。

预期输出：

```
 INT32
          FSHL (const TP  Buffer){
          INT32
          FSHL_lm (const TP  Buffer) 
          { WORD32 ugo = 0; ... 
```

感谢您的回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T10:06:00.007

这可能对您有用（GNU sed）：

```
sed '$!N;s/\n\s*{\s*$/{/;P;D' file 
```

解释：

*   `$!N`除非最后一行将下一行附加到模式空间。
*   `s/\n\s*{\s*$/{/`用一个左大括号替换一个换行符，后跟没有或任何数量的空格，然后是一个左大括号，然后是没有或任何数量的空格，直到字符串的末尾。
*   `P`打印到并包括第一个换行符。
*   `D`删除直到并包括第一个换行符（如果是这样，不要开始新的循环）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T11:23:18.950

一种使用方式`awk`：

```
awk '!(NF == 1 && $1 == "{") { if (line) print line; line = $0; next; } { sub(/^[ \t]+/, "", $0); line = line $0; } END { print line }' file.txt 
```

或分成多行：

```
!(NF == 1 && $1 == "{") { 
    if (line) print line
    line = $0
    next
}

{
    sub(/^[ \t]+/, "", $0)
    line = line $0
}

END {
    print line
} 
```

结果：

```
INT32
          FSHL (const TP  Buffer){
          INT32
          FSHL_lm (const TP  Buffer) 
          { WORD32 ugo = 0; ... 
```

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T10:20:04.077

一种使用方式`perl`。我以 slurp 模式读取所有文件，并使用正则表达式搜索只有大括号的行并删除其前导空格。

```
perl -ne '
    do {
        local $/ = undef;
        $data = <>;
    };
    $data =~ s/\n^\s*(\{\s*)$/\1/mg;
    print $data
' infile 
```

假设`infile`问题的内容，输出将是：

```
FSHL (const TP  Buffer){
INT32
FSHL_lm (const TP  Buffer)
{ WORD32 ugo = 0; ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-05T12:29:59.913

[shyam@localhost ~]$ perl -lne 's/^/\n/ if $.>1 && /^\d+/; printf "%s",$_' appendDateText.txt

那可行

i/p:

06/12/2016 20:30 测试测试测试

测试一下

2019 年 6 月 12 日 20:30 abbs abcbcb abcbc

06/11/2016 20:30 测试测试

i123312331233123312331233123312331233123312331233Test

2016 年 6 月 12 日 20:30 美国广播公司

o/p：

06/12/2016 20:30 测试测试TestTestTest

2019 年 6 月 12 日 20:30 abbs abcbcb abcbc

06/11/2016 20:30 测试##testi123312331233123312331233123312331233123312331233Test

# c# - 如何停止执行所有任务 3 分钟然后继续执行代码

> ID：11609824
> 
> 赞同：0
> 
> 时间：2012-07-23T09:31:05.123
> 
> 标签：c#, multithreading, task

我有正在运行 Work 方法的任务

```
private void Work(Crawler crawler, PropertyBag propertyBag) {} 
```

现在我想停止所有任务 3 分钟，然后继续执行。我尝试

`Thread.Sleep`但不工作。任务仍在工作。什么是停止任务 3 分钟然后继续的好解决方案。也许锁定以及如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:45:16.693

`Thread.Sleep`不起作用，因为它使当前线程休眠。

如果您手动创建线程，而不是使用 TPL，那么您希望拥有线程的列表/数组。您可以使用 Thread.Suspend 和 Thread.Resume 方法。

```
foreach (var t in threads) t.Suspend();

// Then in 3 minutes.
foreach (var t in threads) t.Resume(); 
```

请注意，睡眠/恢复已过时！

**编辑**

如果没有线程列表，那么您可以使用`ManualResetEvent`. `.WaitOne()`在尝试任何工作之前，在您的 Work 方法中对其进行操作。

当您想使任务休眠时，在您的主线程调用`.Reset`上，然后在 3 分钟内调用`.Set`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:43:39.710

无法随意自动暂停和恢复任务。但是，您可以在您可能希望暂停的代码中放置特殊的“观察者”，例如`ManualResetEvent.WaitOne()`语句并随时从另一个线程重置它们。

# javascript - Backbone.js - 如何在视图之间进行通信？

> ID：11609825
> 
> 赞同：8
> 
> 时间：2012-07-23T09:31:05.513
> 
> 标签：javascript, backbone.js

我有一个带有多个backbone.js 视图的单页Web 应用程序。视图有时必须相互交流。两个例子：

1.  当有两种方式的视图同时以不同的方式呈现集合时，必须将一个视图中的项目单击传递到另一个视图。
2.  当用户转换到流程的下一阶段并且第一个视图将数据传递给第二个视图时。

为了尽可能地解耦视图，我目前使用自定义事件来传递数据（`$(document).trigger('customEvent', data)`）。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T10:02:48.400

一种广泛使用的技术是扩展`Backbone.Events`-object 以创建您的个人全局事件聚合器。

```
var vent = {}; // or App.vent depending how you want to do this
_.extend(vent, Backbone.Events); 
```

根据您使用的是 requirejs 还是其他东西，您可能希望将其分离到自己的模块中或使其成为 Application 对象的属性。现在，您可以在应用程序的任何位置触发和监听事件。

```
// View1
vent.trigger('some_event', data1, data2, data3, ...);

// View2
vent.on('some_event', this.reaction_to_some_event); 
```

这也允许您使用事件聚合器在模型、集合、路由器等之间进行通信。[这是 Martin Fowler 的事件聚合器概念](http://martinfowler.com/eaaDev/EventAggregator.html)（不是在 javascript 中）。这里有一个更[主干](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)的实现和对这个主题的反思，更像是 Backbone.Marionette 的脉络，但其中大部分适用于 vanilla Backbone。

希望这有帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-25T00:32:43.737

我在第一部分同意@jakee

```
var vent = {}; 
_.extend(vent, Backbone.Events); 
```

但是，使用“on”监听全局事件可能会导致内存泄漏和僵尸视图问题，并且还会导致多个操作处理程序调用等。

您应该在视图中使用“listenTo”而不是“on”

```
 this.listenTo(vent, "someEvent", yourHandlerFunction); 
```

因此，当您删除视图时`view.remove()`，此处理程序也将被删除，因为处理程序绑定到您的视图。

触发全局事件时，只需使用

```
vent.trigger("someEvent",parameters); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T22:09:28.203

[jakee 的回答](https://stackoverflow.com/a/11610335/30433)提出了我自己使用过的一种很好的方法，但是还有另一种有趣的方法，那就是将一个对象的引用注入到每个视图实例中，而注入的对象又包含对尽可能多的视图的引用。总计的。

本质上，视图聚合器是一种“App”对象，可以附加视图之外的东西，例如集合。它确实涉及扩展视图，因此可能不符合每个人的口味，但另一方面，扩展是这样做的一个简单示例。

我使用[http://arturadib.com/hello-backbonejs/docs/1.html](http://arturadib.com/hello-backbonejs/docs/1.html)上的代码作为我的 ListView 的基础，然后我得到了以下工作：

```
define(
    ['./listView'],

    function (ListView) {
        var APP = {
            VIEWS : {}
        }

        ListView.instantiator = ListView.extend({
            initialize : function() {
                this.app = APP;
                ListView.prototype.initialize.apply(this, arguments);
            }
        });

        APP.VIEWS.ListView = new ListView.instantiator();
        console.log(APP.VIEWS.ListView.app);
    }
); 
```

# html - 无法使用选择插件更改下拉菜单的宽度

> ID：11609826
> 
> 赞同：0
> 
> 时间：2012-07-23T09:31:10.820
> 
> 标签：html, css, forms, jquery-chosen

我正在使用选择插件并对其进行样式设置，但遇到了这个问题：

![](../Images/083863ab86a463274e05d390711c7cad.png)

这是由这个生成的HTML引起的：

```
 <div id="sel1WY_chzn" class="chzn-container chzn-container-single" style="width: 300px;>
//this is width of container
  <div class="chzn-drop" style="left: -9000px; width: 298.333px; top: 22.3333px;">
//this is html of dropdown 
```

我该如何解决？也可能是由额外的边界引起的，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:35:37.357

抱歉，我确实很快找到了它）

**添加**

```
 .chzn-container-single .chzn-single {
border: 1px solid rgba(98,141, 40, 0.5);
} 
```

**删除**

```
 .chzn-container {
       border: 1px solid rgba(98,141, 40, 0.5);} 
```

# php - 我的 PHP 更新代码没有写入数据库

> ID：11609830
> 
> 赞同：0
> 
> 时间：2012-07-23T09:31:16.563
> 
> 标签：php, mysql

我是一个新手 php 程序员。我有这个 actionfrm.php，当它运行时我得到这个消息：

```
UPDATE personal 
   SET membername='test this', 
       sponsorid='102', 
       dateofjoining='2012-07-23', 
       address='13432 main', 
       city='pomona', 
       state='CA', 
       country='USA', 
       mobileno='8187321592', 
       countrycode='1', 
       dateofbirth='1988/05/03', 
       emailid='tlhkapil@gmail.com' 
 WHERE membername='test this'

update query succeeded 
```

但是，它没有写入数据库。我把这段代码放入 phpmyadmin 并得到了这个消息：0 行受到影响。

这是代码：

```
<?php include('dbconnect.php'); ?>
<?php
$membername=$_POST['membername'];
if(isset($_POST['username']) and $_POST['username']!=""){
$sponsorid=$_SESSION['memberid_for_sp'];
}else{
$sponsorid=0;
}
$dateofjoining=date("Y-m-d");;
$address=$_POST['address'];
$city=$_POST['city'];
$state=$_POST['state'];
$country=$_POST['country'];
$mobileno=$_POST['mobileno'];
$countrycode=$_POST['countrycode'];
$dateofbirth=$_POST['dateofbirth'];
$emailid=$_POST['emailid'];
$myid=$_SESSION['memberid'];

$query = "UPDATE personal SET membername='$membername',
sponsorid='$sponsorid', 
dateofjoining='$dateofjoining',
address='$address', 
city='$city',
state='$state',
country='$country',
mobileno='$mobileno',
countrycode='$countrycode',
dateofbirth='$dateofbirth', emailid='$emailid' WHERE membername='$membername'";

echo $query;
$checkresult = mysql_query($query); 
if ($checkresult) echo 'update query succeeded'; 
else echo 'update query failed';

mysql_close();

//return $frmdetail.php;
?> 
```

请帮忙，我真的需要纠正这个......我对此感到头疼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:41:55.343

您将 membername 设置为新值`UPDATE personal SET membername='$membername'`，然后在 WHERE 条件中使用该新值。当然它会返回 0 行，因为表中不存在新值。

您还必须在 WHERE 子句中使用不同的字段（例如 id）来更新成员名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:49:01.683

表中不存在新值，但您执行更新，因此您收到此消息：0 行受影响，

你应该使用替换而不是更新。

当membername不存在时，mysql会调用insert，否则mysql会调用update。

# facebook - 如何使用 Facebook javascript API 获取 Sessionkey

> ID：11609831
> 
> 赞同：0
> 
> 时间：2012-07-23T09:31:16.113
> 
> 标签：facebook, facebook-graph-api

我正在使用以下代码在我的网站中使用 Fconnect：

```
<script type="text/javascript" src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" ></script>
<div id="fb-root"></div>
<script type="text/javascript" language="javascript">
    FB_RequireFeatures(["XFBML"], function () {
        FB.init(MY_App_ID, Domain_Path + "xd_receiver.htm");
    });
</script>

<fb:login-button length='short' size='medium' onlogin="facebook_onlogin_ready()" ></fb:login-button> 
```

以前以下代码返回会话密钥，但现在不是。

```
FB.Facebook.apiClient.get_session() 
```

它给出未定义的错误我如何使用 Facebook Jascript Api 获取用户会话密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T10:26:24.443

该代码正在使用已弃用的 API，该 API 不再受支持，并且可以在计划删除时随时删除。

当前的[Javascript SDK](https://developers.facebook.com/docs/reference/javascript/)使用 OAuth 访问令牌，而不是会话密钥。

# view - SAS：查看到表

> ID：11609835
> 
> 赞同：1
> 
> 时间：2012-07-23T09:31:32.707
> 
> 标签：view, sas, dataset

如何从视图创建表？

视图命名`A`-> 表命名`A`

我只找到`proc sql`and`data set`语句，但是 sas 中是否有任何本机功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:27:03.667

```
/* create a table as a copy of data from view by SQL ... */

proc sql;
create table A_COPY as select * from A;
quit;

/* ... or by DATA step */
data A_COPY;
set A;
run;

/* Delete the view A 
  and rename the table to original view name */
proc datasets lib=work nolist;
delete A / mt=view;
change A_COPY = A / mt=data;
quit; 
```

编辑：

您可以通过“描述”将创建 DATA 步骤视图或 SQL 视图的代码检索到 LOG：

```
data A /view=A;
    set sashelp.air;
run;

data view = A;
    describe;
run;

proc sql;
create view A as select * from sashelp.air;
describe view A;
quit; 
```

# mysql - `Count Distinct` 和 `Group By` 产生奇怪的结果

> ID：11609836
> 
> 赞同：0
> 
> 时间：2012-07-23T09:31:40.970
> 
> 标签：mysql, sql, count, group-by, distinct

请考虑以下查询：

```
SELECT artist.id, COUNT(DISTINCT artist$styles.v_id)
FROM artist
LEFT JOIN artist$styles ON artist$styles.p_id = artist.id 
```

这是我得到的结果：

```
id  count
1   4 
```

问题是：

1.  为什么它只从`artist`表中选择一行，当它有 4 行并且没有应用于查询的`WHERE`, `HAVING`, `LIMIT`or子句时？`GROUP BY`
2.  有价值的`artist$styles`记录只有三个，为什么要计数？`p_id``1``4`
3.  为什么如果我添加一个`GROUP BY`子句我会得到正确的结果？

    ```
    SELECT artist.id, COUNT(DISTINCT artist$styles.v_id)
    FROM artist
    LEFT JOIN artist$styles ON artist$styles.p_id = artist.id
    GROUP BY artist.id
    ----
    id  count
    1   3
    2   1
    3   3
    4   1 
    ```

4.  这一切对我来说毫无意义。这可能是MySQL的错误吗？我正在运行社区 5.5.25a

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:42:25.813

1.  如[关于聚合函数的手册页](http://dev.mysql.com/doc/en/group-by-functions.html)中所述（其中`COUNT()`之一）：

    > 如果在不包含`GROUP BY`子句的语句中使用 group 函数，则相当于对所有行进行分组。

2.  如[手册页中所述`GROUP BY`，隐藏列](http://dev.mysql.com/doc/en/group-by-hidden-columns.html)：

    > 服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。

    换句话说，服务器已经为 column 选择了一个（不确定的）值`p_id`，在这种情况下恰好是 value `1`，同时它已经正确地聚合并计算了`COUNT()`函数的结果。

3.  因为您然后在正确的列上分组，而不是在所有行上。

4.  这不是错误；此行为已记录在案并且是设计使然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:50:00.380

1.  如果您不使用 group by 子句，则计数函数返回单行结果，这就是它返回一行的原因。

2.在你的输出中

```
id  count
1   4 
```

4 是该表中的结果总数，而不是 id 1 的结果。它显示在 1 的前面，因为只有一行产生。

3.当您使用 group 时，会创建一组该列值，这就是您获得该输出的原因。

最后它不是一个错误。Mysql 提供了一个适当的文档，您可以在 mysql 站点上阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:35:30.333

这可能是 Mysql 中的一个错误。所有非聚合列都应包含在 Group by 子句中。MySQL 不强制这样做，结果是不可预测的并且难以调试。通常，始终在 Group by 子句中包含所有非聚合列。这就是所有 RDBMS 的工作方式

# java - 选择枚举类型时方法设计好？

> ID：11609837
> 
> 赞同：1
> 
> 时间：2012-07-23T09:31:42.533
> 
> 标签：java, methods

以下两种方法哪个更好？我选择了枚举，因为在典型情况下，子类型多态是最好的方法；这也是编写简单工厂方法时的典型方法。

```
public class SomeClass {
    public SomeEnum returnAType(String someString) {
        //implementation bellow
   }

   private boolean method1() {
   //...
   }

   private boolean method2() {
   //...
   }

   private boolean method3() {
   //...
   }

} 
```

returnATypeMethod 的第一个实现；这更快，因为如果method1有效，它不会调用method2和method3（可能更多）。

```
 public SomeEnum returnAType(String someString) {
        if(method1(someString)) {
            SomeEnum.ENUM1.doSomething();
            return SomeEnum.ENUM1;
        }
        if(method2(someString)) {
            SomeEnum.ENUM2.doSomething();
            return SomeEnum.ENUM2;
        }
        if(method3(someString)) {
            SomeEnum.ENUM3.doSomething();
            return SomeEnum.ENUM3;
        }
        SomeEnum.DEFAULT_ENUM.doSomething();
        return SomeEnum.DEFAULT_ENUM;
   } 
```

returnATypeMethod 的第二个实现；这更清楚，没有代码重复：

```
 public SomeEnum returnAType(String someString) {
        SomeEnum enumType = SomeEnum.DEFAULT_ENUM;
        if(method1(someString)) {
            enumType = SomeEnum.ENUM1;
        }
        if(method2(someString)) {
            enumType = SomeEnum.ENUM2;            }
        }
        if(method3(someString)) {
            enumType = SomeEnum.ENUM3;
        }
        enumType.doSomething();
        return enumType;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:41:11.877

我很想使用

```
public SomeEnum returnAType(String someString) {
    SomeEnum enumType = method1(someString) ? SomeEnum.ENUM1 :
                        method2(someString) ? SomeEnum.ENUM2 :
                        method3(someString) ? SomeEnum.ENUM3 : SomeEnum.DEFAULT_ENUM;
    enumType.doSomething();
    return enumType; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:44:55.617

我发现 Java 枚举非常令人困惑，一般来说，**当您不只是枚举时，我建议尽量避免使用枚举**。您可以将代码组织成一个接口或一个抽象类，以及几个实现该接口或抽象类的单例。最终的设计更清晰，更易于理解。

我强烈建议**尽量避免使用返回 T 并在内部调用 t.someMethod 的方法**。这种模式再次令人困惑和误导。*将您的 returnAType 视为您的单例的工厂方法，此函数的目标只是为您返回正确类型的单例*

**如果您的函数不使用某些模式而是使用简单的等式，请使用数据结构来存储键值关联**。不是有人说的 EnumMap ，因为在 EnumMap 中， Enum 是键，而不是值。

事实上，@Peter Lawrey 收到的评论强调了如果您不遵循第二个建议会遇到的问题：不要编写返回 t 并通过 t 产生副作用的方法。我的建议是部分遵循它的建议，但以这种方式将副作用移到外面：

```
// Beautiful and testable with no side-effects

public SomeEnum returnAType(String someString) {
    SomeEnum enumType = method1(someString) ? SomeEnum.ENUM1 :
                        method2(someString) ? SomeEnum.ENUM2 :
                        method3(someString) ? SomeEnum.ENUM3 : SomeEnum.DEFAULT_ENUM;

    return enumType;
}

// Do something for real
public void doSomethingWith(String someString) {
    SomeEnum enumType = returnAType(someString);
    enumType.doSomething();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T07:08:49.087

在 Java 7 中，您可以使用`switch`String ：

`SomeEnum`用 Constructor 在别处上课`SomeEnum(Integer) {..;}`。

它可以`private`像`Pattern.class`例子一样，所以它会是`return SomeEnum.set(1);`。

```
public SomeEnum returnAType(final String someString) {
     switch (someString.toLowerCase()) { //toLowerCase() if needed
        case "one":
            return new SomeEnum(1);
            break;
        case "two":
            return new SomeEnum(2);
            break;
        case "three":
            return new SomeEnum(3);
            break;
        default: 
            return new SomeEnum(-1); // or zero or Integer.[MIN|MAX]_VALUE
            break;
      }
} 
```

然后您可以根据需要使用 SomeEnum 。

有些模型不喜欢中间返回，所以你可以在里面添加一个临时的 SomeEnum 并在最后返回它。

`typeOf SomeEnum`是_`enum`

```
public SomeEnum returnAType(final String someString) {
     switch (someString.toLowerCase()) { //toLowerCase() if needed
        case "one":
            return SomeEnum.ENUM1;
            // break; // Normaly break; is unused, you can  remove it
        case "two":
            return SomeEnum.ENUM2;
        case "three":
            return SomeEnum.ENUM3;
        default: 
            return SomeEnum.DEFAULT_ENUM; 
      }
} 
```

# jquery - jQuery flot 插件，绘图和标签顺序

> ID：11609838
> 
> 赞同：2
> 
> 时间：2012-07-23T09:31:45.360
> 
> 标签：jquery, flot

[http://code.google.com/p/flot/](http://code.google.com/p/flot/)

默认情况下，图和标签按顺序显示，我定义了它们

```
$.plot($("#chart"),
                        plotData
                    ,
                    {
                        series:{
                        lines:{ show:true },
                        points:{ show:true }
                        },
                        grid:{ hoverable:true, clickable:true },
                        yaxis:{ min:0, max:data.maxYaxisValue, tickDecimals:0},
                        xaxis:{ tickFormatter:tickFormatter}
                    }
                ); 
```

其中 plotdata 是一个数组，具有以下结构：

```
var plotData = [
 {data: statData1,  color: plotColor1, label: label1},
 {data: statData2,  color: plotColor2, label: label2},
 {data: statData3,  color: plotColor3, label: label3}
]; 
```

我想以一种顺序显示图，以另一种顺序显示标签：

情节：

情节1情节2情节3

图例表：

情节3情节1情节2

我只有一个想法：通过脚本更改图例表中的顺序，我在这里看不到选项

```
 if ($('#chart div.legend table tr').length > 1) {
                var $tableRow = $('#chart div.legend table tr:last');
                $tableRow.insertBefore($('#chart div.legend table tr:first'));
            } 
```

是否存在更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T12:00:30.130

[Github](https://github.com/flot/flot)上的 Flot master 分支支持独立于它们的系列对图例标签进行排序。

它是大约一周前才添加的，所以如果你已经在使用 master 分支，你可能只需要更新。如果您使用的是 0.7，您可以切换到 master 分支，如果您对它不太稳定的话感到满意，或者在历史记录中找到那些特定的提交并手动将它们应用到您的副本中。

# java - 使用对象或适当的数据类型

> ID：11609839
> 
> 赞同：0
> 
> 时间：2012-07-23T09:31:52.390
> 
> 标签：java, object

我将数据放入`HashMap`of type`<String, Object>`中。我正在使用对象，因为我不知道来自后端的内容。现在我的问题是，当我必须使用该对象时，我应该将其转换为正确的数据类型吗？如果我将它们用作对象，是否有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:35:15.847

在访问它时，您必须将其转换为正确的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:34:42.783

您应该将它们转换为正确的数据类型以在它们上调用您的方法。使用`instance Of`运算符来检查它们的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:36:00.827

好吧，如果您想使用仅在您的子类中而不是在 java.lang.Object 中的任何方法，则必须将其“转换”（即强制转换）为正确的类型

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:35:24.310

您可以将对象类型用作值，但在检索该值时需要注意转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T09:35:49.537

在`Java`您不能调用实例类型中未声明的方法。如果您想使用来自特定类型的某些方法，该类型是 的子类`Object`，那么您需要进行强制转换。

# android - 在android上检查互联网连接的问题

> ID：11609841
> 
> 赞同：0
> 
> 时间：2012-07-23T09:31:59.233
> 
> 标签：android, connection

我正在使用这段代码：

```
public boolean isOnline() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

但是有连接或没有连接总是会收到 true。有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:35:58.563

尝试使用此代码

```
ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo activeNetworkInfo = connectivityManager
                    .getActiveNetworkInfo();

            if (activeNetworkInfo == null) {

                Toast.makeText(SlideShow.this,
                        "Network Not Connected...Please Try Again",
                        Toast.LENGTH_LONG).show();

            } else {
                if (activeNetworkInfo.isConnected()) {

                    try {
                        //Here u can do your task

                    } catch (Exception e) {
                        // TODO Auto-generated catch block
                        System.out.println("Inside the Exception"
                                + e.getMessage());
                    }

                } else if (activeNetworkInfo.isConnectedOrConnecting()) {

                    Toast.makeText(SlideShow.this,
                            "Network is connecting Now please patient",
                            Toast.LENGTH_LONG).show();
                }

            } 
```

不要忘记添加此权限，

```
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:34:00.840

您是否已将 android.permission.ACCESS_NEWTORK_STATE 添加到您的 AndroidManifest.xml 中？您要检查网络状态的连接是什么？无线上网？还是边缘？

```
if (cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI)
        .isConnectedOrConnecting()) {
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T19:37:44.070

我最近在尝试使用时遇到了这个问题，`isConnectedOrConnecting()`并发现了另一种可能的方法：只需在指定的 URL 上 ping 答案（例如，选择`google.com`，用于整个互联网可用性检查）。

```
static public boolean isURLReachable(Context context) {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnected()) {
        try {
            URL url = new URL("http://192.168.1.13");   // Change to "http://google.com" for www test.
            HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
            urlc.setConnectTimeout(10 * 1000);          // 10 s.
            urlc.connect();
            if (urlc.getResponseCode() == 200) {        // 200 = "OK" code (http connection is fine).
                Log.wtf("Connection", "Success !");
                return true;
            } else {
                return false;
            }
        } catch (MalformedURLException e1) {
            return false;
        } catch (IOException e) {
            return false;
        }
    }
    return false;
} 
```

不要忘记在线程中运行此函数（而不是在主线程中）。

希望这可以帮助其他人......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:35:01.940

在清单中

```
 <uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

接着

```
public static boolean checkConnection(Context c) 
{
    ConnectivityManager mConnectivityManager = (ConnectivityManager) c
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    TelephonyManager telephonyManager = (TelephonyManager) c
            .getSystemService(Context.TELEPHONY_SERVICE);

    if (mConnectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI)
            .isConnected() || telephonyManager.getDataState() == TelephonyManager.DATA_CONNECTED)
        return true;
    else
        return false;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T09:40:36.557

检查下面的代码。

```
String IsNetworkConnected;
String ConnectionType;
NetworkInfo ActiveNetwork;

ConnectivityManager connectivitymanager;
connectivitymanager=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

try
    {           
        ActiveNetwork=connectivitymanager.getActiveNetworkInfo();
        ConnectionType=ActiveNetwork.getTypeName(); 
        Isconnected=String.valueOf(ActiveNetwork.getState());
        IsNetworkConnected="true";

    }
catch(Exception error)
    {
        IsNetworkConnected="false";
    } 
```

# json - Spring中的响应编码

> ID：11609844
> 
> 赞同：1
> 
> 时间：2012-07-23T09:32:06.050
> 
> 标签：json, spring, encoding, character, response

我的 http 响应的字符编码有问题。我阅读了许多技巧、教程等，但我无法解决我的问题。我们使用带有 Hibernate 和 ExtJS 的 Spring MVC 作为视图技术。所有数据都使用控制器方法上的@ResponseBody 作为 JSON 返回。示例方法：

```
@RequestMapping(method = RequestMethod.POST, value = "dispatcher")
@ResponseBody
public String dispatcherPost(HttpServletRequest req, HttpServletResponse resp, HttpSession session) {
    return process(req, resp, session);
} 
```

有简单的调度机制来调度 url 命令（在这种情况下并不重要）。Process 方法正在使用参数做一些事情并返回 JSON。此 JSON 包含例如来自数据库 (PostgreSQL 9.1.4) 的数据。Postgres 中的数据以 UTF-8 存储，并且“正确可见”，例如在 pgAdmin 中。在 Eclipse 中调试时，我们还可以看到有效数据（来自数据库）。看起来从 Postgres 获取数据一切正常。当我们想通过 @ResponseBody 注释方法返回它们时，问题就开始了。方法“进程”返回带有 utf-8 字符的有效字符串（我可以在调试模式下看到），但在 Web 浏览器（chrome、firefox）中有“？” 而不是存储在数据库中的波兰语字符。查看萤火虫，我可以看到响应标头部分有效：'内容类型：文本/html；charset=UTF-8'。我告诉'部分'，因为我在处理方法中有这行代码：

`resp.setContentType("application/json;charset=UTF-8");`

其中 resp 是 HttpServletResponse。我试过从这个解决方案中添加 springs bean 后处理器：http://stackoverflow.com/questions/3616359/who-sets-response-content-type-in​​-spring-mvc-responsebody/3617594#3617594 但它没有有效。我在 web.xml 中也有字符编码过滤器

```
<!-- Force Char Encoding -->
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
 </filter-mapping> 
```

所以基本上问题在于从服务器返回编码良好的 JSON。任何想法？

编辑：

我将代码粘贴到过程方法中：

System.err.println("测试" + System.getProperty("file.encoding"));
System.err.println("测试正常：" + response);
System.err.println("测试 cp1250:" + new String(response.getBytes(),"cp1250"));
System.err.println("测试 UTF-8:" + new String(response.getBytes(),"UTF-8"));

结果是这样的：

TEST Cp1250
TEST normal: {"users":[{"login":"userąęśćółżń"}]}
TEST cp1250: {"users":[{"login":"userąęśćółżń"}]}
TEST UTF-8: {"users ":[{"登录":"用户？？？？？？"}]}

谢谢， 阿雷克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:10:15.717

[好的，使用 springs http 消息转换器的http://static.springsource.org/spring/docs/3.0.x/reference/remoting.html#rest-message-conversion](http://static.springsource.org/spring/docs/3.0.x/reference/remoting.html#rest-message-conversion)和 @ResponseBody 注释似乎有些奇怪。我没有时间创建自定义消息转换器，所以我的解决方案是删除 @ResponseBody 注释并使用如下内容：

```
@RequestMapping(method = RequestMethod.GET, value = "dispatcher")
public void dispatcherGet(HttpServletRequest req, HttpServletResponse resp, HttpSession session) {
    String response =  process(req, resp, session);
    try {
        resp.getWriter().write(response);
        resp.getWriter().flush();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

也许这会对某人有所帮助。谢谢， 阿雷克

# python - python和redis，语法不清楚

> ID：11609848
> 
> 赞同：0
> 
> 时间：2012-07-23T09:32:19.147
> 
> 标签：python, redis, mining

这是**挖掘社交网络**书的代码副本。

我是这个领域的新手，也是 Redis 的新手。`$`我想了解在这种情况下是什么意思。还有print with `%s`，是什么意思？

这是下面的源代码（*来自：[https](https://github.com/ptwobrussell/Mining-the-Social-Web/blob/master/python_code/friends_followers__friends_followers_in_common.py)* ://github.com/ptwobrussell/Mining-the-Social-Web ）：

```
import sys
import redis

from twitter__util import getRedisIdByScreenName

# A pretty-print function for numbers
from twitter__util import pp

r = redis.Redis()
screen_names=['user1','user2']
def friendsFollowersInCommon(screen_names):
    r.sinterstore('temp$friends_in_common',
        [getRedisIdByScreenName(screen_name, 'friend_ids')
         for screen_name in screen_names]
    )

r.sinterstore('temp$followers_in_common',
    [getRedisIdByScreenName(screen_name, 'follower_ids')
     for screen_name in screen_names]
)

print 'Friends in common for %s: %s' % (', '.join(screen_names),
                                        pp(r.scard('temp$friends_in_common')))

print 'Followers in common for %s: %s' % (', '.join(screen_names),
                                          pp(r.scard('temp$followers_in_common')))

# Clean up scratch workspace

r.delete('temp$friends_in_common')
r.delete('temp$followers_in_common')

if __name__ == "__main__":
    if len(screen_names) < 2:
        print >> sys.stderr, "Please supply at least two screen names."
        sys.exit(1)

friendsFollowersInCommon(screen_names[1:]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:35:42.283

`$`符号只是键名的一部分。它分隔名称部分。我通常`:`用于相同的目的（例如`users:123`）

`%s`部分是[python](/questions/tagged/python "显示标记为“python”的问题")的[字符串格式](http://docs.python.org/release/2.5.2/lib/typesseq-strings.html)。

# c# - textbox_tapped 事件未在 Metro 应用程序中触发

> ID：11609850
> 
> 赞同：1
> 
> 时间：2012-07-23T09:32:19.727
> 
> 标签：c#, microsoft-metro

我正在构建一个 win 8 应用程序，它在 ScrollViewer->Stackpanel->Grid->Image & TextBox 等元素的层次结构中有一个文本框控件。文本框包含一个点击事件以导航到页面。这个 textbox_tapped 事件根本没有触发。我也没有收到任何错误或异常。有人能告诉我得到这个的解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:18:58.227

也许与您正在使用鼠标在普通 PC 上测试它的事实有关，所以它不是轻敲，尽管我不确定。改用“GotFocus”事件可能会得到类似的结果。

# linux - 如何在 IP 地址字符串的末尾附加一个冒号零，:0？

> ID：11609855
> 
> 赞同：0
> 
> 时间：2012-07-23T09:32:30.790
> 
> 标签：linux, string, bash, shell

我有一个简单的 Linux shell 脚本，它解析在 Windows 中生成的与 Linux VM 共享的文件。我想从这个文件中获取一个IP地址，并在末尾附加一个冒号0（：0），以设置DISPLAY环境变量。当我尝试这样做时，我得到了奇怪的结果。

这是脚本：

```
#!/bin/bash
LOCAL_HOST=`grep IPv4 /mnt/hgfs/share/localip | awk 'NR ==1 {printf "%s\n", $14 }'`

# for some reason, it overwrites the string from the beginning
COLON_ZERO=':0'
export DISPLAY=${LOCAL_HOST}${COLON_ZERO}
echo $DISPLAY

# This obviously works, but doesnt have the COLON_ZERO on the end
echo "export DISPLAY="$LOCAL_HOST 
```

这是运行此脚本的输出：

```
# ./display.sh
:09.107.26.25
export DISPLAY=159.107.26.25

# bash --version
GNU bash, version 3.2.48(1)-release (x86_64-pc-linux-gnu)
Copyright (C) 2007 Free Software Foundation, Inc. 
```

以防万一，这里是脚本中使用的文件的 grep 结果：

```
# grep IPv4 /mnt/hgfs/share/localip
   IPv4 Address. . . . . . . . . . . : 159.107.26.25
   IPv4 Address. . . . . . . . . . . : 192.168.223.1
   IPv4 Address. . . . . . . . . . . : 192.168.132.1 
```

为什么当我将冒号零附加到 IP 地址字符串的末尾时会得到这个奇怪的结果？如何更改脚本以获得正确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:47:20.660

您的输入文件包含 Windows 行尾 (\r\n)。从 IP 地址中删除 \r 字符。

# database - oracle中的条件唯一约束

> ID：11609856
> 
> 赞同：4
> 
> 时间：2012-07-23T09:32:35.733
> 
> 标签：database, oracle, constraints, unique-constraint

我目前已将此约束添加到表中`MY_TABLE`

`ALTER TABLE MY_TABLE ADD CONSTRAINT MY_TABLE_UNQ_01 UNIQUE (COLUMN1, COLUMN2, COLUMN3) USING INDEX TABLESPACE "MY_TABLE_INDEX";`

问题是我添加了一个新列：

`ALTER TABLE MY_TABLE ADD (DRAFT NUMBER(1,0));`

现在约束应该仅在 column `DRAFT`= 0时适用

有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T09:46:20.330

在 11g 中，您可以在虚拟列上定义一个约束：

```
ALTER TABLE my_table ADD (
   draft_column1 <DATATYPE> GENERATED ALWAYS AS (DECODE(draft, 0, column1)),
   draft_column2 <DATATYPE> GENERATED ALWAYS AS (DECODE(draft, 0, column2)),
   draft_column3 <DATATYPE> GENERATED ALWAYS AS (DECODE(draft, 0, column3)),
   CONSTRAINT UNQ_02 UNIQUE(draft_column1, draft_column2, draft_column3)
); 
```

在 10g 及之前的版本中，您可以使用基于函数的唯一索引以及不记录全空索引条目这一事实。因此，以下索引仅在以下情况下才能保证唯一性`draft=0`：

```
CREATE UNIQUE INDEX UNQ_03 ON my_table (
   DECODE(draft, 0, column1),
   DECODE(draft, 0, column2),
   DECODE(draft, 0, column3)
); 
```

# c# - 定义枚举结构时出错。

> ID：11609858
> 
> 赞同：1
> 
> 时间：2012-07-23T09:32:40.090
> 
> 标签：c#, enums

我正在用枚举创建这样的类。

```
 public class D
    {
        enum e { "one","two","three"};
    } 
```

它给出了**“预期的标识符”**编译错误。这有什么问题。有没有其他结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:35:57.060

您不能在 C# 中使用字符串枚举，例如使用属性，请查看[codeproject 上的这篇文章](http://www.codeproject.com/Articles/11130/String-Enumerations-in-C)。

你需要定义你的枚举

```
enum e
{
  One, Two, Three
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:33:59.233

答案在错误消息中。您需要识别枚举中的每个值，例如

```
 enum e
 {
   One = 1,
   Two = 2,
   Three = 3
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:34:30.193

```
public class D
    {
        enum e { one = 1, two = 2, three = 3};
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T09:35:55.303

删除引号并尝试这样。

```
enum e{
one,
two,
three
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T10:20:50.830

你可以这样做：

```
enum e
{
   One = 1,
   Two = 2,
   Three = 3
} 
```

# xcode - 使用 Xcode 从 SQlite3 更改选定字段的值

> ID：11609859
> 
> 赞同：1
> 
> 时间：2012-07-23T09:32:44.547
> 
> 标签：xcode, uitableview, sqlite

当我从 tableView 中选择一行，从 sqlite 加载数据时，目的是能够更改某个字段的值。通过两个视图进行操作，第一个将整个数据库加载到一个可变数组中，当我按下某个字段时，我转到另一个视图。在第二个视图中，我有一个按钮。如何获取按下此按钮时数据库中的字段将更改值的结果。

TableviewController 称为 AuthorVC.m

```
#import "AuthorVC.h"
#import "Author.h"
#import <sqlite3.h>
#import "SearchVC.h"
//#import "DetailViewController.h"
#import "Details.h"

@implementation AuthorVC

@synthesize theauthors;
@synthesize author;
NSString *authorNAme; 
NSString *authorNAme2; 

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{   searchBar.delegate = (id)self;
    [self authorList];
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [searchBar release];
    searchBar = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    if(text.length == 0)
    {
        isFiltered = FALSE;
    }
    else
    {
        isFiltered = true;
        filteredTableData = [[NSMutableArray alloc] init];

        for (Author* author in theauthors)
        {  //[NSPredicate predicateWithFormat:@"SELECT * from books where title LIKE %@", searchBar.text];
            NSRange nameRange = [author.name rangeOfString:text options:NSAnchoredSearch];
            NSRange descriptionRange = [author.genre rangeOfString:text options:NSAnchoredSearch];
            if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
            {
                [filteredTableData addObject:author];

            }
        }
    }

    [self.tableView reloadData];
}

/*
-(void) showDetailsForIndexPath:(NSIndexPath*)indexPath
{

    NSLog(@"This is the showDetailsForIndexPath");
    [self->searchBar resignFirstResponder];
    Details* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"Details"];
    AuthorVC* author;

    if(isFiltered)
    {
        author = [filteredTableData objectAtIndex:indexPath.row];
    }
    else
    {
        author = [theauthors objectAtIndex:indexPath.row];
    }

    vc.author = author;
    [self.navigationController pushViewController:vc animated:true];   
    NSLog(author);
}
*/

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    int rowCount;
    if(self->isFiltered)
        rowCount = filteredTableData.count;
    else
        rowCount = theauthors.count;

    return rowCount;
    // Return the number of rows in the section.
    //return [self.theauthors count];
}
/*

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    //    NSString *Title;
    // Author *auth = (Author*)segue.destinationViewController;
    Details *dv = (Details*)segue.destinationViewController;
    dv.labelText.text = author.title;
    NSLog(@"Did Enter prepareForSegue");
    //   labelText.text = @"Hy";
}
*/

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"This is the one in authorVc");
    static NSString *CellIdentifier = @"AuthorsCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    int rowCount = indexPath.row;

    Author *author = [self.theauthors objectAtIndex:rowCount];

      if(isFiltered){
        author = [filteredTableData objectAtIndex:indexPath.row];
//          UIAlertView *messageAlert = [[UIAlertView alloc]
//                                       initWithTitle:@"Filtered" message:titleString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
//          
//          [messageAlert show];

    }
    else{
        author = [theauthors objectAtIndex:indexPath.row];
//        UIAlertView *messageAlert = [[UIAlertView alloc]
//                                     initWithTitle:@"Not filtered" message:titleString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
//        
//        [messageAlert show];

    }

    cell.textLabel.text = author.name;
  // cell.detailTextLabel.text = author.genre;
   //NSString *titleString = [[[NSString alloc] initWithFormat:@"Element number :  %d",author.name] autorelease];

    return cell;

}

-(NSMutableArray *) authorList{
    theauthors = [[NSMutableArray alloc] initWithCapacity:1000000];
   NSMutableArray * new2 = [[NSMutableArray alloc ] initWithCapacity:100000];
   // authorNAme = theauthors.sortedArrayHint.description;
    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
         NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite"];

        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }

      // const char *sql = "SELECT F_Keyword FROM wordss";  
     const char *sql = "SELECT * FROM Sheet1";

        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
         NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
        }else{
            while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
                Author * author = [[Author alloc] init];

               //NSString *authorName = author.name;
                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];

                author.title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,4)];
                author.genre = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 6)];
                new2 = author.genre;
               // NSLog(new2);
                authorNAme=author.genre;              
                //NSLog(author.genre);
                [theauthors addObject:author];

            }
     //      authorNAme = author.genre;

                 }
    }
    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
    }
    @finally {
     //   sqlite3_finalize(sqlStatement);.
     //   authorNAme = nil;
        sqlite3_close(db);
     //   authorNAme = Nil;
        return theauthors;
    }

}

- (void)dealloc {
    [searchBar release];
    [super dealloc];
    //[authorNAme release];
}

//- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
//    
//    /*
//     When a row is selected, the segue creates the detail view controller as the destination.
//     Set the detail view controller's detail item to the item associated with the selected row.
//     */
//    if ([[segue identifier] isEqualToString:@"ShowSelectedPlay"]) {
//        
//        NSIndexPath *selectedRowIndex = [self.tableView indexPathForSelectedRow];
//        Details *detailViewController = [segue destinationViewController];
//        detailViewController.author = [dataController objectInListAtIndex:selectedRowIndex.row];
//    }
//}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"This is the showDetailsForIndexPath");
    [self->searchBar resignFirstResponder];
    Details* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"Details"];
    AuthorVC* author;

    if(isFiltered)
    {
        author = [filteredTableData objectAtIndex:indexPath.row];
    }
    else
    {
        author = [theauthors objectAtIndex:indexPath.row];
    }

    vc.author = author;
    authorNAme =  vc.author.genre;
    authorNAme2 = vc.author.name ;
    NSLog(@"This is the details %@",vc.author.genre);
    NSLog(@"This is the authorNAme Variable %@" , authorNAme);
    vc.labelText.text = vc.author.genre;
    vc.text2.text = vc.author.name;
    NSString *titleString = [[[NSString alloc] initWithFormat:@"Element number :  %d",indexPath.row] autorelease];
   UIAlertView *messageAlert = [[UIAlertView alloc]
                                 initWithTitle:@"Row Selected" message:authorNAme2 delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [messageAlert show];

    [self.navigationController pushViewController:vc animated:true];   

 /*   

    //Get the selected country
    NSString *selectedAuthors = [theauthors objectAtIndex:indexPath.row];
    //NSLog(selectedAuthors);

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    Details *dvController = [storyboard instantiateViewControllerWithIdentifier:@"Details"]; //Or whatever identifier you have defined in your storyboard

    //authorNAme = selectedAuthors.description;

        //Initialize the detail view controller and display it.
    //Details *dvController = [[Details alloc] init/*WithNibName:@"Details" bundle:nil*///];
/*       
   dvController.selectedAuthors = selectedAuthors;

NSString *titleString = [[[NSString alloc] initWithFormat:@"Element number :  %d",indexPath.row] autorelease];
    UIAlertView *messageAlert = [[UIAlertView alloc]
                                 initWithTitle:@"Row Selected" message:titleString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [messageAlert show];*/
 //   NSString *elem = [new2 objectAtIndex:0]; 

    //NSLog(dvController.labelText.text);
//    NSString *titleString = [[[NSString alloc] initWithFormat:@"Author title :  %d",indexPath.row] autorelease];

  //  NSString *titleString2 = [[new2 objectAtIndex:indexPath.row] autorelease];
   // NSLog(@"this is the selected row , %s",titleString2);

   // authorNAme = titleString;

    /* !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! BReak point of SQL Query!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
 /*   
    @try {

        NSFileManager *fileMgr2 = [NSFileManager defaultManager];

        // NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dictionary.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"authorsDb2.sqlite"];
        //     NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"FinalDb.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"xxJuridique-FINAL-OK.sqlite"];

        NSString *dbPath2 = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite"];

        BOOL success = [fileMgr2 fileExistsAtPath:dbPath2];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath2);
        }
        if(!(sqlite3_open([dbPath2 UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }
        NSLog(@"access to the second DB is ok");

        // const char *sql = "SELECT F_Keyword FROM wordss";  
        const char *sql2 = "SELECT field7 FROM Sheet1 WHERE field1 = 'titleString' ";
        //NSLog(sql2);

        sqlite3_stmt *sqlStatement2;
        if(sqlite3_prepare(db, sql2, -1, &sqlStatement2, NULL) != SQLITE_OK)
        {   NSLog(@"Problem with prepare the db");
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
        }else{

  //  while (sqlite3_step(sqlStatement2)==SQLITE_ACCESS_EXISTS) {

            NSLog(@"Starting to prepare the result");
            Author * author2 = [[Author alloc] init];
            NSLog(@"Author 2 created");

            author2.genre2 = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement2, 7 )];
            NSLog(@"Initialistion of author 2 is ok");

        //        NSLog(author2.genre);
              // authorNAme = author2.genre;   

            [theauthors addObject:author2];

   // }

        }

    }
    @catch (NSException *exception) {
        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));
    }
    @finally {
        //   sqlite3_finalize(sqlStatement);.
        //   authorNAme = nil;
        sqlite3_close(db);
        //   authorNAme = Nil;
        return theauthors;
    }

*/

    //[self.navigationController pushViewController:dvController animated:YES];

}

- (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath {

    //return UITableViewCellAccessoryDetailDisclosureButton;
    return UITableViewCellAccessoryDisclosureIndicator;
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {

    [self tableView:tableView didSelectRowAtIndexPath:indexPath];
}

@end 
```

DetailsView 控制器称为 Details.m ：

```
//
//  Details.m
//  AuthorsApp
//
//  Created by georges ouyoun on 7/17/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "Details.h"
#import "Author.h"
#import "AuthorVC.h"
#import <sqlite3.h>

@interface Details ()

@end

@implementation Details
@synthesize Favo;
@synthesize text2;
@synthesize labelText;
@synthesize selectedAuthors;
@synthesize author , infoRequest;

BOOL PAss  = NO;
BOOL SElected2  = NO;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
 //       authorNAme = author.genre;
 //  self.labelText.text =authorNAme; 
    // Do any additional setup after loading the view.

   self.labelText.text = authorNAme;
    self.text2.text = authorNAme2;

    /*          This is where the label text APPearsssssssss                 */

    NSLog(@"Everything is ok now !");
  //  NSLog(authorNAme);

}
- (void)viewDidUnload
{
  //  [self setLabelText:nil];
    NSLog(@"U have entered view did unload");
    [AddBut release];
    AddBut = nil;
    [self setText2:nil];
    [super viewDidUnload];

    [self setLabelText:Nil];
    [authorNAme release];

    // Release any retained subviews of the main view.
}

/*
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([segue.identifier isEqualToString:@"AuthorsCell"]) {

        [segue.destinationViewController setLabelText:author.title];

    }

}

*/

-(void)viewWillAppear:(BOOL)animated
{ 

   //labelText.text = authorNAme;

    NSLog(@"U have entered the viewWillAppear tag");

  //  detailsLabel.text = food.description;
    //authorNAme=Nil;
    //[self setauthorName:Nil];
}

/*
-(void) viewDidAppear:(BOOL)animated{

    labelText.text = @"This is the DidAppearTag";

    NSLog(@"U have entered the viewDidAppear tag");

}

*/

-(void) viewWillDisappear:(BOOL)animated{

    NSLog(@"This is the view will disappear tag");

    //authorNAme.release;

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)dealloc {
    [labelText release];
    [AddBut release];
    [text2 release];
    [super dealloc];
}

- (IBAction)AddButClick:(UIButton *)sender {

    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateSelected];
    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateHighlighted];
    Favo = [[NSMutableArray alloc] initWithCapacity:1000000];

    NSLog(authorNAme);

    @try {
        NSFileManager *fileMgr = [NSFileManager defaultManager];
        // NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dictionary.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"authorsDb2.sqlite"];
        //     NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"FinalDb.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"xxJuridique-FINAL-OK.sqlite"];

        NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite"];

        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
        {
            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));

        }

        // const char *sql = "SELECT F_Keyword FROM wordss";  
        const char *sql = "SELECT * FROM Sheet1";
        NSLog(@"Successfully selected from database");
        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));

        }else{

            NSLog(@"Got in the else tag");

            while (sqlite3_step(sqlStatement)==SQLITE_ROW /*&& PAss == NO*/) {

                NSLog(@"Got in the while tag");

                Author * author = [[Author alloc] init];
                NSLog(@"Author initialized");

                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,10)];
                NSLog(@"Initialization ok");
           //     NSLog(author.name);

                if(/*author.name == @"NO" &&*/ HighLighted == NO){
                    //const char *sql2 = "INSERT INTO Sheet1 ";

                    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateNormal];
                    NSLog(@"We have not selected it as fav yet");
                  //  [AddBut setSelected:NO]; //btn changes to normal state
                    NSLog(@"The button was NOt highlighted and now is");
                    HighLighted = YES;
                    //  PAss = YES;
                    //  [self release];
                     break;

                }

                else
                {

                    NSLog(@"We have selected it as fav");

                    [AddBut setImage:[UIImage imageNamed:@"apple-logo.png"] forState:UIControlStateNormal];
                    [AddBut setSelected:NO]; //btn changes to normal state
                    NSLog(@"The button was highlighted and now is NOt");

                    HighLighted = NO;
                     break;

                   // [self viewDidLoad];
                  //  PAss = YES;

                }
         //       [Favo release];

         //       NSLog(Favo);

//                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
//                author.title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
//                author.genre = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 4)];
//                [theauthors addObject:author];
            }
        }
    }
    @catch (NSException *exception) {

        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));

    }
    @finally {
        //   sqlite3_finalize(sqlStatement);
        sqlite3_close(db);

        return Favo;
    }

   // [AddBut setSelected:YES];

//    if(SElected == YES){
//        NSLog(@"The button was highlighted and now not");
//        
//        [AddBut setImage:[UIImage imageNamed:@"apple-logo.png"] forState:UIControlStateNormal];
//        [AddBut setSelected:NO]; //btn changes to highlighted åstate 
//        SElected = NO;
//        
//            }
//    
//    else{
//    
//        [AddBut setSelected:YES]; //btn changes to normal state
//        NSLog(@"The button was NOt highlighted and now is");
//        SElected = YES;
//    
//    }

}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:37:15.077

首先，您必须获取所选行的值；这是在您的 TABLEVIEWCONTROLLER

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath     {
  if(listObject.count!=0){
//you will get the object from the list
ObjectType *selectedObject=(ObjectType*)[listObject objectAtIndex:indexPath.row];

//you can call your view controller (in my example init with nib)
yourDetailViewController = [[YourDetailViewController alloc] initWithNibName:@"YourDetailViewControllerNib" bundle:nil];
//you can set your selected object in order to use it on your detail view controller
    yourDetailViewController.objectSelected = selectedObject;
    [self.navigationController yourDetailViewController animated:YES];
}
} 
```

这是在您的 DETAILVIEWCONTROLLER 中；

```
-(void)objectUpdate:(Object*)selectedObject withDBPath:(NSString *)dbPath{
NSError *errMsg;
if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

    const char *sql_stmt = [@"CREATE TABLE IF NOT EXISTS iosobjecttable (yourcolumns INTEGER PRIMARY KEY  NOT NULL , youranothercolumn VARCHAR)" cStringUsingEncoding:NSUTF8StringEncoding];

    if (sqlite3_exec(database, sql_stmt, NULL, NULL, (__bridge void*)errMsg) == SQLITE_OK)
    {
        // SQL statement execution succeeded
    }

        if(updateStmt == nil) {
            NSString *querySQL = [NSString stringWithFormat: 
                                  @"update iosobject set youranothercolumn=%@ where p_event_id=%@", object.changedcomlumn,object.objectid];

            const char *query_sql = [querySQL UTF8String];
            if(sqlite3_prepare_v2(database, query_sql, -1, &updateStmt, NULL) != SQLITE_OK){
                NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(database));
               //NSLog(@"%@",errMsg);
            }
        }
    @try {

        if(SQLITE_DONE != sqlite3_step(updateStmt)){
            NSAssert1(0, @"Error while updating data. '%s'", sqlite3_errmsg(database));
           //NSLog(@"%@",errMsg);
        }
        else{
            //NSLog(@"updatingupdatingedelementt %@",tEvent.eventid); 
        }
        sqlite3_reset(updateStmt);
    }
    @catch (NSException* ex) {
           //NSLog(@"Error while updating data. '%s'", sqlite3_errmsg(database));
        }
    }
} 
```

以及你如何调用这个函数是这样的；

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
NSString *dbPath=[appDelegate getDBPath]; 
[self objectUpdate:objectUpdate withDBPath:dbPath]; 
```

在应用程序委托中，您必须在应用程序委托中编写 getDBPath；

```
 - (NSString *) getDBPath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"yourdbname.sqlite"];
} 
```

# windows-phone-7 - WP7 NameOrPhoneNumber inputscope：可以将 PhoneNumber 设置为默认值吗？

> ID：11609860
> 
> 赞同：1
> 
> 时间：2012-07-23T09:32:55.247
> 
> 标签：windows-phone-7

我有一个包含文本和数字的文本框，但主要使用数字。我真的很喜欢 NameOrPhoneNumber 输入范围，但如果我可以指定此 SIP 的 PhoneNumber 部分在打开时为默认值，它会更加用户友好。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:41:23.747

InputScope 枚举支持大量格式。您只需将 InputScope 设置为 Number。

更多详细信息可以在这里找到。

[输入范围](http://msdn.microsoft.com/en-us/library/system.windows.input.inputscopenamevalue%28v=VS.95%29.aspx)

或者，如果您想允许电话号码等，您可以将范围设置为 TelephoneNumber。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:39:17.347

您可以添加一个按钮，允许用户在两​​个 InputScope 之间切换。

InputScope 可以在代码隐藏中设置，如下所示：

```
InputScope scope = new InputScope();
InputScopeName name = new InputScopeName();

name.NameValue = InputScopeNameValue.Number;
scope.Names.Add(name);

txtPhoneNumber.InputScope = scope; 
```

# iphone - 从图像 iPhone SDK 中读取文本

> ID：11609862
> 
> 赞同：8
> 
> 时间：2012-07-23T09:32:56.207
> 
> 标签：iphone, ios, image, text, ocr

我的设备上有一张从相机拍摄的图像。图像具有可读文本。我想将该图像转换为文本，即获取图像的文本并显示它。

我通过了[Tesseract](https://github.com/nolanbrown/Tesseract-iPhone-Demo)演示，但并非图像的所有文本都转换为文本。我知道很少有像[ABBY SDK](http://www.abbyy.com/mobileocr/ios/?source=products)这样的付费 SDK可用于此，但我一直在寻找一些免费资源。

是否有其他可用的 SDK？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:41:22.553

有关如何使用 Tesseract 在 iOS 上快速执行操作的信息，请参阅[此内容。](https://github.com/nolanbrown/Tesseract-iPhone-Demo)我怀疑你会得到你想要的准确性。到目前为止，我还没有找到一个好的开源解决方案，因为 iPhone 摄像头不太适合这个问题。有一些在线 API 选项做得更好。

哦，还有一句忠告，在您的情况下不尝试就不要支付任何费用:)

# phpunit - 如何将代码覆盖率报告映射到差异文件？

> ID：11609863
> 
> 赞同：2
> 
> 时间：2012-07-23T09:32:58.160
> 
> 标签：phpunit, code-coverage

我有从 PhpUnit 运行的代码覆盖率，我可以在 Git 中生成一个差异文件，它将向我展示即将发布的内容。

我将如何将一个映射到另一个，以便我可以说我们即将发布的代码已包含在我们的测试中？

理想情况下，这可以作为 Jenkins 中的构建步骤自动运行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T05:27:29.007

在通过 Ant / maven 构建运行 phpunit 测试之前，请运行 phpscript。在这个 php 脚本中，将即将发布的 git 文件中指定的每个文件与匹配的单元测试一起复制到一个临时目录中。当然，这要求您[为单元测试使用正确的命名约定和结构](http://cdn.oreillystatic.com/en/assets/1/event/45/PHPUnit%20Best%20Practices%20Presentation.pdf)。在临时目录上运行 phpunit

```
-application
  -app
  -tests
-temp
  -app
  -tests 
```

当您在构建文件中运行 phpunit 时，请包含三叶草报告

```
phpunit --coverage-clover="clover.xml" temp/tests 
```

在 Jenkins 中，如果 clover.xml 不满足指定的覆盖率百分比，您可以将构建标记为不稳定。

![詹金斯的三叶草目标](../Images/0557aeefc2c1699d558611d924dccc17.png)

这应该有效。让我知道它是如何工作的。

# magento - 类别中的下拉属性 - Magento

> ID：11609867
> 
> 赞同：1
> 
> 时间：2012-07-23T09:33:21.163
> 
> 标签：magento, attributes

我需要类别中的下拉属性。我试图在安装程序中这样做：

```
 $installer = $this;

$installer->startSetup();

$entityTypeId = $installer->getEntityTypeId('catalog_category');
$attributeSetId = $installer->getDefaultAttributeSetId($entityTypeId);
$attributeGroupId = $installer->getDefaultAttributeGroupId($entityTypeId, $attributeSetId);

$installer->addAttribute('catalog_category', 'priority', array(
    'type' => 'varchar',
    'label' => 'Priority2',
    'input' => 'select',
    'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
    'visible' => true,
    'required' => false,
    'user_defined' => false,
    'option' => array(
            'value' => array(
                0 => array(''),
                1 => array('normal'),
                2 => array('grouping'),
                3 => array('highlighted'),
                4 => array('trendy'),
            ),
        ),
    'default' => array(0),
));

$installer->addAttributeToGroup(
        $entityTypeId, $attributeSetId, $attributeGroupId, 'priority', '11'
);

$attributeId = $installer->getAttributeId($entityTypeId, 'priority');

$installer->run("
INSERT INTO `{$installer->getTable('catalog_category_entity_int')}`
(`entity_type_id`, `attribute_id`, `entity_id`, `value`)
    SELECT '{$entityTypeId}', '{$attributeId}', `entity_id`, '1'
        FROM `{$installer->getTable('catalog_category_entity')}`;
");

Mage::getModel('catalog/category')
        ->load(1)
        ->setImportedCatId(0)
        ->setInitialSetupFlag(true)
        ->save();

Mage::getModel('catalog/category')
        ->load(2)
        ->setImportedCatId(0)
        ->setInitialSetupFlag(true)
        ->save();

$installer->endSetup(); 
```

但它不起作用。Catalog->categories->Manage Categories 中没有显示任何内容。我只能像这样创建文本字段属性：

```
$installer->addAttribute('catalog_category', 'priority', array(
'type' => 'varchar',
'label' => 'Priority2',
'input' => 'text',
'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
'visible' => true,
'required' => false,
'user_defined' => false,
'default' => '', 
```

));

你有什么想法？谢谢帮助。

编辑。

我还像这样绑定 SQL 查询：

```
INSERT INTO eav_attribute (entity_type_id, attribute_code, attribute_model, backend_model, backend_type, backend_table, frontend_model, frontend_input, frontend_label, frontend_class, source_model, is_required, is_user_defined, default_value, is_unique, note) VALUES
    (9, 'priority', NULL, 'NULL', 'int', 'NULL', 'NULL', 'select', 'Priority', NULL, 'eav/entity_attribute_source_table', 1, 0, 0, 0, '');
    INSERT INTO eav_attribute_option (option_id,attribute_id,sort_order) VALUES
    (1500,282,0),
    (1501,282,1),
    (1502,282,2),
    (1503,282,3),
    (1504,282,4);
    INSERT INTO eav_attribute_option_value (value_id,option_id,store_id,value) VALUES
    (201,1500,0,''),
    (202,1501,0,'normal'),
    (203,1502,0,'grouping'),
    (204,1503,0,'highlighted'),
    (205,1504,0,'trendy');

    INSERT INTO eav_entity_attribute (entity_type_id, attribute_set_id, attribute_group_id, attribute_id, sort_order) VALUES
    (9, 12, 7, (SELECT atribute_id FROM eav_attribute WHERE attribute_code='priority'), 2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:59:57.483

可以使用模块安装程序：

```
$installer->addAttribute(Mage_Catalog_Model_Category::ENTITY, 'myattribute', array(
    'type' => 'varchar',
    'label' => 'My attribute',
    'source' => 'module/category_attribute_myattribute',
    'backend' => 'module/category_attribute_backend_myattribute',
    'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
    'input' => 'select',
    'visible' => true,
    'required' => true,
    'user_defined' => false,
    'used_in_product_listing' => false,
    'group' => 'Group name',
    'default' => Module_Catalog_Model_Category_Attribute_Myattribute::DEFAULT_Groupname,
)); 
```

希望它可以帮助某人；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-29T21:41:57.773

有关文件结构和分步说明，请参阅教程。 [http://www.pearlbells.co.uk/how-to-add-custom-dropdown-attribute-to-magento-category-section/](http://www.pearlbells.co.uk/how-to-add-custom-dropdown-attribute-to-magento-category-section/)

```
<?php
$this->startSetup();
$this->addAttribute(Mage_Catalog_Model_Category::ENTITY, 'custom_dropdown', array(
'group'         => 'General Information',
'input'         => 'select',
'type'          => 'text',
'label'         => 'Custom Dropdown',
'backend'       => '',
'visible'       => true,
'required'      => false,
'visible_on_front' => true,
'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
'source' => 'customfeaturedattribute/source_custom',
));

$this->endSetup(); 
```

并在模型类中添加选项。

```
public function getAllOptions()
{
    $options = array(
        1 => 'One',
        2 => 'Two',
        3 => 'Three'
    );

    return $options;
} 
```

# c++ - 是否广泛支持 C++11？

> ID：11609868
> 
> 赞同：7
> 
> 时间：2012-07-23T09:33:23.377
> 
> 标签：c++, c++11

对于希望他的 C++ 代码在不同的 C++ 编译器之间可移植的人来说，是时候开始使用 C++11，还是需要一段时间才能让所有主要编译器（VC、 GCC、CLang、英特尔）？

换句话说，主要编译器对 C++11 的支持情况如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T09:38:15.277

Clang（定期更新）：

> [http://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html)

GCC 4.5 到 4.7（定期更新）：

> [http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

Visual C++ 10 和 11（有点旧，但我发现是最新的）：

> [http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:42:55.337

所有主要编译器的最新版本都支持*某些*C++11 功能。但是还没有编译器提供完整的支持，如果您希望您的代码具有可移植性，您可能还必须考虑并非每个人都在使用其编译器的最新版本。

所以答案是“视情况而定”。

所有主要编译器都支持许多功能。（`auto`例如，rvalue refs 和 lambdas 广泛可用）。

在某些（但不是全部）编译器上还提供了许多功能。

@Kos 发布的链接应该让您很好地了解每个编译器的位置。

您是否可以/应该开始使用 C++11 完全取决于您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-23T10:54:42.797

除了提到的网站之外：在这里可以找到包含编译器支持 c++11 功能的确切版本的不同编译器的比较：

[http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport](http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport)

列出的编译器：

HP aCC、EDG eccp、GCC、英特尔 C++、MSVC、IBM XLC++、Sun/Oracle C++、C++ Builder 2009/10、Digital Mars C++、Clang

# css - 在最小化浏览器时需要帮助定位 div

> ID：11609870
> 
> 赞同：0
> 
> 时间：2012-07-23T09:33:23.380
> 
> 标签：css, html

在我的 html 页面中，我有 3 个 div。他们的定位是：

```
.rightPanel1 {
   position: absolute;
   right: 3%;
   top: 15%;
   border-style: solid;
   border-color: teal;
   border-width: 0.5px;
   padding-left: 0.5%;
   padding-right: 0.5%;
   padding-bottom: 0.5%;
   padding-top: 0.5%;
}
.rightPanel2 {
   position: absolute;
   right: 3%;
} pithigoooo top: 37%;
        padding-left: 0.5%;
    padding-right: 0.5%;
    padding-bottom: 0.5%;
    border-style: dashed;
    border-color: teal;
    border-width: 0.5px;
        padding-top : 0.5%;
    padding-left: 0.5%;
    padding-top: 0.5%;
      }
.body {
    position: absolute;
    left: 3%;
    right: 25%;
    top: 15%;
   } 
```

现在，当浏览器最小化时，所有 div 往往会相互重叠。浏览器中不会出现滚动条，这与其他网站通常发生的情况相同。我应该怎么做才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:37:31.940

你应该固定你的身体高度和宽度。

前任：

```
.body {   
height: 900px;
width: 1000px;
 } 
```

# wpf - WPF ContextMenu 单击路由到 WinForms 应用程序

> ID：11609874
> 
> 赞同：4
> 
> 时间：2012-07-23T09:33:36.363
> 
> 标签：wpf, winforms, ms-word, vsto, contextmenu

我正在编写一个托管在 Word VSTO 插件（WinForms）中的 WPF 控件。现在我遇到了上下文菜单上的鼠标单击事件的问题。

如果我单击左半部分的上下文菜单项（WinForms 应用程序上方的部分），则单击将直接转到 WinForms 应用程序，并且我的上下文菜单不会收到事件。

如果我单击项目的右半部分（WPF 表单上方的部分），一切都会按预期工作。

![说明问题](../Images/0069b623e32b6fac64993cc29e66fe8f.png)

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:19:06.880

经过一些深入的研究，我偶然发现了以下错误：

[https://web.archive.org/web/20101211205036/http://connect.microsoft.com:80/VisualStudio/feedback/details/432998/excel-2007-vsto-custom-task-pane-with-wpf-上下文菜单有焦点问题](https://web.archive.org/web/20101211205036/http://connect.microsoft.com:80/VisualStudio/feedback/details/432998/excel-2007-vsto-custom-task-pane-with-wpf-context-menu-has-focus-problems)

它适用于 Excel 2007，但仍适用于其他 Office 产品（2007、2010）。我设法使用此处描述的方法解决了我的问题：

[https://web.archive.org/web/20151231010333/http://blogs.msdn.com/b/vsod/archive/2009/12/16/excel-2007-wpf-events-are-not-fired- for-items-that-overlap-excel-ui-for-wpf-context-menus.aspx](https://web.archive.org/web/20151231010333/http://blogs.msdn.com/b/vsod/archive/2009/12/16/excel-2007-wpf-events-are-not-fired-for-items-that-overlap-excel-ui-for-wpf-context-menus.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-27T15:37:17.783

来自非活动博客的答案是：

声明一个类级别的调度程序框架对象

```
System.Windows.Threading.DispatcherFrame _frame; 
```

订阅菜单的 GotFocusEvent 和 LostFocusEvent：

```
_menu.AddHandler(System.Windows.UIElement.GotFocusEvent,new RoutedEventHandler(OnGotFocusEvent));
_menu.AddHandler(System.Windows.UIElement.LostFocusEvent, new RoutedEventHandler(OnLostFocusEvent)); 
```

下面是 GotFocusEvent 和 LostFocusEvent 的事件过程的实现：

```
private void OnGotFocusEvent(object sender, RoutedEventArgs e)
{
 if (LogicalTreeHelper.GetParent((DependencyObject)e.OriginalSource) == _menu)
  {
     Dispatcher.BeginInvoke(DispatcherPriority.Normal (DispatcherOperationCallback)delegate(object unused)
        {
         _frame = new DispatcherFrame();
         Dispatcher.PushFrame(_frame);
         return null;
        }, null);
  }
}

private void OnLostFocusEvent(object sender, RoutedEventArgs e)
{
  if (LogicalTreeHelper.GetParent((DependencyObject)e.OriginalSource) == _menu)
  {
     _frame.Continue = false;
  }
} 
```

就我而言，不需要 if 语句，我订阅了这样的事件

```
<EventSetter Event="GotFocus" Handler="contextMenu_GotFocus" />
<EventSetter Event="LostFocus" Handler="contextMenu_LostFocus" /> 
```

# android - android中的文本视图图像

> ID：11609876
> 
> 赞同：2
> 
> 时间：2012-07-23T09:33:39.797
> 
> 标签：android, textview

在我的应用程序中，我必须在我的文本视图中显示图像。另外，当我单击第一次时，应绘制 1 张图像，然后单击下一次应绘制另一张图像。是否可以在 textview 中绘制图像？请帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:41:15.857

您可以使用

```
setCompoundDrawables(Drawable left, Drawable top, Drawable right, Drawable bottom) 
```

对于文本视图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:37:38.260

`android:background`您可以使用属性设置背景图像

```
<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/image" /> 
```

或以编程方式使用`setBackgroundDrawable()`or`setBackgroundResource()`方法：

```
textView.setBackgroundResource(R.drawable.image); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T09:48:38.973

你可以获取一个 Drawable 数组，一个索引：

```
TextView tv;
Drawable[] drbl = new Drawable[4];
int drblIndex = 0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);

    drbl[0] = getResources().getDrawable(R.drawable.ic_launcher);
    drbl[1] = getResources().getDrawable(R.drawable.img2);
    drbl[2] = getResources().getDrawable(R.drawable.img3);
    drbl[3] = getResources().getDrawable(R.drawable.right_arrow);
    tv = (TextView) findViewById(R.id.textView1);
    tv.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            tv.setBackgroundDrawable(drbl[drblIndex++]);
            if(drblIndex == drbl.length)
                drblIndex = 0;
        }
    });
} 
```

然后你可以像我一样设置该数组的值。

然后 onClick 你可以移动到下一个索引并且可以将新的 Drawable-Image 设置为 TextView。

当 Index 达到最后一个值时，简单地将其设置为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T09:42:24.243

在 TextView 上设置`OnClickListener`，并在其`onClick()`方法中，使用以下方法设置图像：

```
textview.setBackgroundDrawable(); 
```

或者

```
textview.setBackgroundResource(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-23T10:24:56.720

试试这个代码，带有图像的文本视图。

CharSequence dogstate = null ; Html.fromHtml("" + " " + "你的文本" + "
", featuregetter, null);

dogatstatus.append（狗状态）；

私有 ImageGetter featuregetter = new ImageGetter() {

```
 public Drawable getDrawable(String source) {

        Log.i(" get drawable mathod ", "");
        Bitmap B = BitmapFactory.decodeResource(getResources(),
                R.drawable.bone);
        BitmapDrawable BD = new BitmapDrawable(B);

        BD.setBounds(0, 0, B.getWidth(), B.getHeight());

        return BD;
    }
}; 
```

# javascript - 如何在 HTML5 画布中添加背景图像数据

> ID：11609881
> 
> 赞同：0
> 
> 时间：2012-07-23T09:33:56.210
> 
> 标签：javascript, html, canvas

我想用白色背景填充图像数据。如何使用图像数据添加白色背景数据。

我正在使用以下场景：-

```
var imageData = shapesContext.getImageData(x,y,width,height);

context.putImageData(imageData,x,y); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:41:18.567

如果您只使用一种颜色，那么使用 fillRect 呢？

```
context.fillStyle="white";
context.fillRect(0,0,canvas.width,canvas.height); 
```

~干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:37:26.520

有关更多详细信息，请参阅[此](https://stackoverflow.com/questions/11391149/how-to-scale-imagedata-using-html5/11391504#11391504)问题。

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

var c2=document.getElementById("myCanvas2");
var ctx2=c2.getContext("2d");

ctx.strokeRect(5,5,25,15);

ctx2.drawImage(c, 10, 10); 
```

# c# - 鼠标悬停在日历控件上时弹出 Jquery

> ID：11609885
> 
> 赞同：2
> 
> 时间：2012-07-23T09:34:03.397
> 
> 标签：c#, jquery, asp.net, jquery-plugins

我正在使用 ASP.NET 的日历控件。当我将鼠标悬停在日历控件中的特定日期上时，我需要显示一个弹出表单。此弹出窗口应显示数据库中的数据。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:43:00.063

我不知道日期跨度的asp名称如何，检查一下，在让选择器用户jQuery添加事件后很容易检测到

```
jQuery('selector').hover(function(){ //or use mousemove
  getPopup(jQuery(this).text()); // just send any data to detect the date
}) ; 
```

之后，您需要在 getPopup 函数中发出 AJAX 请求

你可以使用

```
jQuery.get()//or jQuery.post()
__doPostBack()//if you have update panels 
//or any ajax technique xmlhttprequest,PM,... 
```

在 ajax 请求的响应中，只需绘制弹出窗口...

希望这可以帮助

例如 getPopup 函数

```
function getPopup(date/*for example*/){
  jQuery.getScript('www.myWebsite.com/pageThatDrawsThePopup?date='+date);
  // getScript assuming that the return value is JS code the immediately draws the popup
  // ?date = date assuming that your page takes the date as query string and get the data from the database upon this field 
  //dont forget to change the url
 //very simple very easy ...  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:49:38.443

你应该有一个空的 div：

```
<div id="popup"></div> 
```

然后将事件绑定到日历元素：

```
('li.calendar').hover(function(){
   //make an ajax call and populate the popup div with the data
   //easiest method is jquery.load(), but if you need more control use jquery.ajax();
   $("popup").load('path/to/page.asp',data,function(){
       $("popup").show();
   });

}); 
```

查看[jquery.load()](http://api.jquery.com/load/)和[jquery.ajax()](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T10:00:09.427

将 CSS 类添加到包含应触发弹出窗口的日期的单元格。您需要覆盖[DayRender 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.dayrender.aspx)才能执行此操作。

```
void myCalendar_DayRender(object sender, DayRenderEventArgs e)
{
    if (e.Day.Date.Day.ToString().EndsWith("7")){// Replace with your own condition
        e.Cell.CssClass+=   "specialCell"; //replace with your own custom css class name
    }
} 
```

然后添加一些 JavaScript（或 Jquery）来触发弹出窗口。JQuery ajax 函数提供了获取数据并根据@user1225246 的回答填充弹出窗口的最简单方法。

```
$(document).ready(function(){

    $('.specialCell').hover(function(){

        function(){//This will get called when you mouseover
            alert('put your JQuery AJAX code here.');
        },

        function(){
            alert('do any clean-up (e.g. hiding the popup if you need to) here.');
        }
    }); 
```

# svn - 锁定 TortoiseSVN

> ID：11609889
> 
> 赞同：2
> 
> 时间：2012-07-23T09:34:15.067
> 
> 标签：svn, tortoisesvn

我的团队使用 TortoiseSVN 来编写版本控制代码。有时，有人使用“获取锁定”选项。是否有可能看到解决方案中的锁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:38:47.557

[http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html#tsvn-dug-locking-status](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-locking.html#tsvn-dug-locking-status)：

要查看您和其他人持有什么锁，您可以使用 TortoiseSVN → 检查修改...。本地持有的锁令牌会立即显示。要检查其他人持有的锁（并查看您的任何锁是否损坏或被盗），您需要单击检查存储库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:41:33.060

如果您可以访问托管 SVN 的服务器，并且可以打开终端或 shell，则可以键入以下命令：

```
svnadmin lslocks /path/to/repo 
```

这将为您提供您正在寻找的信息，并且您还有其他命令：

```
mike$ svnadmin help
general usage: svnadmin SUBCOMMAND REPOS_PATH  [ARGS & OPTIONS ...]
Type 'svnadmin help <subcommand>' for help on a specific subcommand.
Type 'svnadmin --version' to see the program version and FS modules.

Available subcommands:
   crashtest
   create
   deltify
   dump
   help (?, h)
   hotcopy
   list-dblogs
   list-unused-dblogs
   load
   lslocks
   lstxns
   pack
   recover
   rmlocks
   rmtxns
   setlog
   setrevprop
   setuuid
   upgrade
   verify 
```

# python - 无法在 python shell 中导入 GAE api

> ID：11609892
> 
> 赞同：1
> 
> 时间：2012-07-23T09:34:32.353
> 
> 标签：python, google-app-engine

我已经下载了 GAE SDK 并想从 python shell 中使用它的 api。

我在 .bashrc 中放置了以下内容，其中 google_appengine 是我解压缩 SDK 的文件夹 -

```
#GAE
export PATH=$PATH:/opt/google_appengine/ 
```

现在我使用 virtualenv 创建了一个新项目。当我启动 python shell 并尝试使用它的 api 时，我收到以下错误 -

```
>>> from google.appengine.ext import db
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named google.appengine.ext 
```

有人可以帮我调试吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T09:42:42.963

这样做会丢失很多设置。您会发现使用远程 api shell 会容易得多。只需运行`python $PATH_TO_APPENGINE/remote_api_shell.py appid` ，这将为您提供一个正确定义所有路径的 shell。您实际上不必连接到远程实例，尽管这很有用。在没有一些数据存储后端的情况下，您无法真正通过 shell 使用任何模型。您还可以使用远程 api shell 连接到本地开发服务器实例。

在此处查看有关使用它的好文章[https://developers.google.com/appengine/articles/remote_api](https://developers.google.com/appengine/articles/remote_api)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:38:21.740

AppEngine 不能从 Python shell 运行，需要完成太多的连线（并由 dev_server 完成）才能使平台工作。
您可以做的是拥有一个[AppEngine 应用程序，它是一个交互式 Python 控制台](http://code.google.com/p/google-app-engine-samples/source/browse/trunk/shell)( [Live](http://con.appspot.com/console/) )，可以运行 AppEngine 平台和所有受支持的 Python 库。

# android - 使用 AsyncTask 加载 MapView 失败

> ID：11609893
> 
> 赞同：1
> 
> 时间：2012-07-23T09:34:36.013
> 
> 标签：android, android-mapview, android-maps

我正在尝试在单击时加载 MapView，`Activity`但`button`由于加载整个活动需要一些时间，并且用户觉得有些地方出了问题。

所以我尝试使用`AsyncTask`，但我得到以下异常：

> 原因：java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

这是我的代码：

```
@Override
protected String doInBackground(Void... arg0) {
            // TODO Auto-generated method stub              

            locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            geoHandler=  new GeoUpdateHandler();

                    //Getting error over here 
            locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0,
                    0, geoHandler);

            return null;
        }

 @Override
 protected void onPreExecute() {

        mapView.setBuiltInZoomControls(true);

        mapOverlays = mapView.getOverlays();
        mapController=mapView.getController();
        mapController.setZoom(16);                  
     }

@Override
 protected void onPostExecute(String str) {

                // first overlay
        drawable = getResources().getDrawable(R.drawable.marker);
        itemizedOverlay = new SimpleItemizedOverlay(drawable, mapView);     
    } 
```

我无法解决它。

# java - 如何使 JTable 的背景透明？

> ID：11609900
> 
> 赞同：5
> 
> 时间：2012-07-23T09:34:58.183
> 
> 标签：java, swing, jtable, transparent

> **可能的重复：**
> [Java swing Table 透明度](https://stackoverflow.com/questions/9769909/java-swing-table-transparency)

让 JTable 背景透明并不是那么容易。我只想查看单元格的文本内容。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-23T09:34:58.183

如果表格本身和单元格都不透明，则表格将是透明的：

```
table.setOpaque(false);
((DefaultTableCellRenderer)table.getDefaultRenderer(Object.class)).setOpaque(false); 
```

如果表格在 a 中`ScrollPane`，它也是透明的：

```
scrollPane.setOpaque(false);
scrollPane.getViewport().setOpaque(false); 
```

至少，您可以删除网格线：

```
table.setShowGrid(false); 
```

一个简单的结果是一项相当大的工作......

# mysql - 在 mysql 工作台上看不到其他数据库

> ID：11609903
> 
> 赞同：0
> 
> 时间：2012-07-23T09:35:09.123
> 
> 标签：mysql, database, workbench

两台电脑安装了从mysql官网下载的mysql 5.5.25a。一个正在通过 MySql WorkBench 连接到另一个的 mysql 服务器，但只能看到“测试”数据库，看不到其他数据库，例如“sakila”数据库。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T10:00:32.283

您必须从[此处](http://dev.mysql.com/doc/index-other.html)手动导入 sakila/world/menagerie 数据库。只有这些数据库`test, mysql, information_schema and performance_schema`- 安装 MySQL 后才会出现。

# jquery - 获取选择元素的值作为查询字符串数组

> ID：11609914
> 
> 赞同：0
> 
> 时间：2012-07-23T09:35:26.807
> 
> 标签：jquery

我正在从 select 元素中获取所有值，`selected`使用这段 jquery 代码将没有属性。

```
$('#purchaseEditUpdateItemBtn').on('click', function(){
    var selected = [];
    $('#box2View option').each(function(index, element){ 
        selected[index] = $(element).val(); 
    });
    return false;
}); 
```

这是我的选择框。

```
 <select id="box2View" multiple="multiple" class="multiple">
     <option value="1">ITEM001</option>
     <option value="2">ITEM002</option>
     <option value="3">ITEM003</option>
     <option value="4">ITEM004</option>
 </select> 
```

这将创建一个名为`selected`并将值保存为数组的 javascript 数组。我想从选项中获取所有值并模拟这样的查询。

```
estimate_id[]=1&estimate_id[]=2&estimate_id[]=3&estimate_id[]=4 
```

以便服务器端将其作为数组接收。

PS：请注意，我想从选择元素中获取所有元素，而无需用户选择任何元素，因此，未使用 selected 属性。我尝试使用`serialize()`which 不起作用，因为`serialize()`需要选择元素，这在我的情况下是不正确的。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:46:56.727

你可以尝试这样的事情：

```
$('#purchaseEditUpdateItemBtn').click(function(){
    var selected = [];
    $('#box2View option').each(function(index, element){ 
        selected[index] = 'estimate_id[]=' + $(element).val(); 
    });
    alert(selected.join('&')); 
    return false;
});​ 
```

不确定这是否是最优雅的方式。`Array.join`它通过函数使用简单的字符串连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:37:36.307

对于上述问题，我已经完成了完整的 bin。所以，请在[http://codebins.com/bin/4ldqp9x上查看](http://codebins.com/bin/4ldqp9x)**演示**

**HTML：**

```
<select id="box2View" name="box2View" multiple="multiple" class="multiple">
  <option value="1">
    ITEM001
  </option>
  <option value="2">
    ITEM002
  </option>
  <option value="3">
    ITEM003
  </option>
  <option value="4">
    ITEM004
  </option>
  <option value="5">
    ITEM005
  </option>
  <option value="6">
    ITEM006
  </option>
  <option value="7">
    ITEM007
  </option>
</select>
<p>
  <input type="button" id="purchaseEditUpdateItemBtn" name="purchaseEditUpdateItemBtn" value="Show Items" />
</p> 
```

**查询：**

```
$(function() {
    $('#purchaseEditUpdateItemBtn').on('click', function() {
        var selected = new Array();
        var i = 0;
        $('#box2View option').each(function(index, element) {
            if ($(this).is(":selected")) {
                selected[i] = "box2View[]=" + $(element).val();
                i++;
            }
        });
        if (selected.length > 0) {
            alert(selected.join('&'));
        }
        return false;
    });
}); 
```

# sql - 数据库系统和浏览器之间的连接

> ID：11609917
> 
> 赞同：0
> 
> 时间：2012-07-23T09:35:30.553
> 
> 标签：sql, database, jsp, browser, system

我想创建一个数据库系统，然后将该系统上传到任何浏览器。..我真的是这个领域的初学者，我想知道我应该使用什么工具以及为了实现它而使用的最佳程序是什么？在我实现它之后，我应该把它放在一个服务器中，它应该有一个特定的 IP 地址

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:53:53.443

据我了解......你想要：

1) 收集数据的客户端

2）将此数据存储在本地数据库中

3) 将此数据上传到位于服务器上的数据库。

做这件事有很多种方法：

1）使用简单的网络表单手动上传数据库文件并读取服务器上的数据库文件。（当您的数据不一致时，这可能会引发问题......）

2) 使用客户端程序读取数据库文件并将数据仅上传到例如 REST API。（同样的数据不一致问题）

3）跳过本地数据库部分，直接提交到服务器。（在服务器上存储数据的最常见方式）

# java - 使用 Zabbix 监控同一台机器上的两个 Java 进程

> ID：11609932
> 
> 赞同：1
> 
> 时间：2012-07-23T09:36:16.727
> 
> 标签：java, monitoring, jmx, zabbix

我有一台带有两个正在运行的 Java 进程的机器。它们中的每一个都可以使用 JMX 在唯一的端口上进行监视。例如端口 10001 和 10002。

我想使用 Zabbix 2.0 来监控每​​个 Java 进程的内存使用情况。然而，我正在努力让它工作，这可能与我对 Zabbix 很陌生。

在 Zabbix 中，我向运行两个 Java 进程的主机添加了两个 JMX 接口。一个使用端口 10001，另一个使用端口 10002。

我使用 key 为第一个 JXM 接口 (10001) 创建了一个 JMX 项`jmx["java.lang:type=Memory","HeapMemoryUsage.used"]`。它工作得很好。

尝试使用相同的密钥为第二个 JMX 接口 (10002) 创建第二个 JMX 项时，出现以下错误：

> “Zabbix server”上已经存在键为“jmx[”java.lang:type=Memory”，“HeapMemoryUsage.used”]”的项。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:12:43.517

不幸的是，密钥在所有情况下都必须是唯一的。

通常这是通过向键添加参数来处理的，例如向键添加端口号。

# python - 如何在 window.hide&show 之后重新显示 gtk.Image？

> ID：11609934
> 
> 赞同：0
> 
> 时间：2012-07-23T09:36:18.820
> 
> 标签：python, gtk, pygtk

正如你在这个例子中看到的那样，如果我们关闭然后再次显示包含 gtk.Label 的窗口 - 标签也会显示，但如果窗口包含 gtk.Image - 我们看不到它。

```
import gtk,gobject

def dest(*a):
   print 1
   gobject.timeout_add(1000,dest2) 
#also, why it is impossible to show window again at once it closed?

def dest2(*a):
   print 2
   win.add(child)
   win.show_all()
   shild.queue_draw()
   print 'where is is?'

win = gtk.Window()
win.connect('delete-event', dest)
l = gtk.Label('gtk')

image=gtk.Image()
f=fopen('some_image.png','r')
loader = gtk.PixbufLoader()
loader.write(f.read())
loader.close()
f.close()
image.set_from_pixbuf(loader.get_pixbuf())

child=image
#child=l  #so, if uncomment this string - everything is perfect
win.add(child)
win.show_all()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T09:16:49.163

@scythargon

什么是 shild.queue_draw()？反正：

```
def dest2(*a):
   print 2
   image.set_from_pixbuf(loader.get_pixbuf())      # <<<---- add this "and your hair will be soft and silky"
   win.add(child)
   win.show_all()
#   shild.queue_draw()
   print 'where is is?' 
```

我的 pygtk 说： loader = gtk.gdk.PixbufLoader()

> #另外，为什么窗口关闭后不能再次显示？

您可以尝试在 dest() 中使用“return True”

# java - excel表格非结构化数据转结构化数据

> ID：11609936
> 
> 赞同：0
> 
> 时间：2012-07-23T09:36:26.737
> 
> 标签：java, mysql, jakarta-ee

我有一堆 100 张 excel 表。这些工作表包含姓名、父亲姓名、地址、电子邮件 ID、电话号码、塔楼号码等条目。

问题是，我想要那些在一张或多张 excel 表中具有多个属性的细节。这些表有购买该物业的客户的条目。

但是情况是数据输入操作员以随机方式输入数据，例如：在输入名称时，在同一列中添加了电子邮件ID，因此很难为此建立数据库（MY SQL），因此我可以得到我的可行结果。

# sql - 需要在Access数据库中选择第一个地址

> ID：11609937
> 
> 赞同：1
> 
> 时间：2012-07-23T09:36:36.637
> 
> 标签：sql, ms-access

我在混合的*Windows 7/Windows XP*环境中使用*Office 10中的**Access 。*

 **我需要能够从列表中选择员工的当前地址。我遇到的问题是地址`datefrom`可能是*过去*、*未来*或*null*。

在标准中删除未来显然很容易，即`WHERE datefrom <=date()`

我遇到的问题是，在最初导入地址数据时，大多数地址都没有此信息，因此该字段为空。数据示例如下：（日期格式为`dd/mm/yyyy`）

```
ID  EmployeeID  Postcode  DateFrom
1   1           AB12 3CD  [null]
2   2           GH12 5RF  [null]
3   1           CD34 5EF  10/03/2012
4   3           HA25 3PO  [null]
5   3           HA4  7RT  04/06/2012]
6   3           DB43 5YU  12/11/2011] 
```

我想要的输出是：（员工的顺序不重要）

```
ID  EmployeeID  Postcode  DateFrom
2   2           GH12 5RF  [null]
3   1           CD34 5EF  10/03/2012
5   3           HA4  7RT  04/06/2012 
```

我已经尝试按`DateFrom DESC`以下排序列表排序：

```
ID  EmployeeID  Postcode  DateFrom
3   1           CD34 5EF  10/03/2012
1   1           AB12 3CD  [null]
2   2           GH12 5RF  [null]
5   3           HA4  7RT  04/06/2012
6   3           DB43 5YU  12/11/2011
4   3           HA25 3PO  [null] 
```

因此，如果我可以为每个员工获取第一个结果，我会很好。但是，我尝试（但失败）执行*SQL* ，包括`DISTINCT`,`first()`和`GROUP BY`，但似乎无法到达任何地方。

我可能只是看不到简单明显的答案，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:38:25.167

你能简单地将`null`值更新为一个设定的日期`1900-01-01`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:56:13.313

怎么样：

```
SELECT Adr.ID, Adr.EmployeeID, Adr.Postcode, Adr.DateFrom
FROM Adr
WHERE (((Adr.ID) In 
  (SELECT Top 1 ID 
   FROM adr b 
   WHERE b.EmployeeID=Adr.EmployeeID 
   ORDER BY DateFrom DESC ))); 
```

以上是使用查询设计窗口构建的，所以一半的括号是不必要的，但是，如果您使用的是查询设计窗口，您不妨留下它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:40:32.390

像这样使用 order by：

```
ORDER BY (CASE WHEN [DateFrom] IS NULL THEN 1 ELSE 0 END) DESC, 
         [DateFrom] DESC 
```

[我从这篇](https://stackoverflow.com/questions/821798/order-by-date-showing-nulls-first-then-most-recent-dates)文章中找到了答案。请务必先搜索。**

# reporting-services - SSRS 除以零误差表达式

> ID：11609939
> 
> 赞同：2
> 
> 时间：2012-07-23T09:36:57.430
> 
> 标签：reporting-services, expression, divide-by-zero, ssrs-expression

希望你好。我正在编写一份报告，似乎收到了#error。似乎这是除以零错误，但我无法找到解决方案。表达方式：

```
=( Sum(Fields!Line_Sell.Value) - Sum(Fields!Line_Cost.Value) ) / Sum(Fields!Line_Sell.Value) 
```

我对 RS 比较陌生，但尝试过

```
ISNULL( ) 
```

但没有成功。

任何帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-24T23:06:55.373

假设您有一个设置为 x / y 的表达式，其中 y 可能为零。正如您所经历的，SSRS 会将此值更改为 #ERR（或有时为 NaN）。你的第一直觉是测试为零

```
=Iif(y = 0, 0, x/y) 
```

不幸的是，这可能会导致调试器警告说您正在尝试除以零。这是因为 SSRS 试图在编译期间评估整个语句。因此，我们需要为 SSRS 提供一个可以评估的值

```
=x * y ^ -1 
```

这与除以您的 y 值相同，但 SSRS 将其视为除以无穷大，因此可以进行评估。作为最后一步，您需要确保您的代码可以正确导出到 Excel。在 2012 SSRS 下（可能以后，我还没有测试过），SSRS 存在一个问题，即可能的零值导出到 Excel 为 0.000000000000000 并导致数据丢失错误。为了纠正这个问题，我们显式输出零值

```
=Iif(x = 0 OR y = 0, 0, x * y ^ -1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T20:35:20.440

您评论中的表达看起来不完整，所以我无法判断您接下来尝试的内容没有奏效。您肯定想在执行除法之前测试为零。

你可以试试这个：

```
=iif( Sum(Fields!Line_Sell.Value) = 0, 0, (Sum(Fields!Line_Sell.Value) - Sum(Fields!Line_Cost.Value)) / Sum(Fields!Line_Sell.Value)) 
```

或者也检查一个空值，你可以试试这个：

```
=iif( (Sum(Fields!Line_Sell.Value) = 0 or IsNothing(Sum(Fields!Line_Sell.Value)), 0,Sum(Fields!Line_Sell.Value) - Sum(Fields!Line_Cost.Value)) / Sum(Fields!Line_Sell.Value)) 
```

如果仍然没有产生结果，请分解表达式并运行报告。尝试 Sum(Fields!Line_Sell.Value) 本身，运行报告，看看你得到了什么。为了更有效地创建一个表，其中一列用于 Fields!Line_Sell.Value，另一列用于 Fields!Line_Cost.Value。在表中，包括详细信息行并添加总计行，以便您获得单独包含每个字段的 Sum 函数。您需要查看详细记录以尝试推断聚合函数不起作用的原因。底线 - 分解你的表情并逐个测试它。答案就在某处。

# python - 模型验证和表单验证的区别

> ID：11609943
> 
> 赞同：2
> 
> 时间：2012-07-23T09:37:05.457
> 
> 标签：python, django, forms, model

我目前正在研究一个已经构建好的模型，我需要添加一些验证管理。（访问两个字段并检查数据，没什么太戏剧化的）

我想知道从验证的角度来看模型和表单之间的确切区别，以及我是否能够像在模型视图中的表单视图中那样制作一个干净的方法来引发错误？

*   对于额外的知识，为什么将这两件事分开？

最后，你会怎么做？已经有一些为模型编写的方法，我还不知道我是否会重写它以将其变形为一种形式并简单地添加 clean() 方法 + 我不完全知道它们是如何工作的。

哦，一切都在管理界面中，自从我不久前开始使用 django 以来，还没有做很多工作。

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:51:32.290

您应该使用模型（字段）验证来确保返回的数据类型满足您的数据库的要求。通常你不需要这个，因为 django 的内置字段会为你做这个，所以除非你已经构建了一些自定义字段或者知道你在做什么，否则你不应该改变任何事情。

表单验证是您清理用户输入的地方，您可以通过添加 clean_FIELD(self) 方法为每个表单字段添加一个 clean 方法，例如

```
class ContactForm(forms.Form):
    # Everything as before.
    ...

    def clean_recipients(self):
        data = self.cleaned_data['recipients']
        if "fred@example.com" not in data:
            raise forms.ValidationError("You have forgotten about Fred!")

        # Always return the cleaned data, whether you have changed it or
        # not.
        return data 
```

在运行表单的主要清理方法之前，它会检查每个字段的字段级别清理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:58:45.357

通常，模型代表可能存储在某些持久存储（通常是关系数据库）中的业务实体。表单用于呈现可能从用户那里获取数据的 HTML 表单。

Django 支持基于模型创建表单（使用 ModelForm 类）。表单可用于获取应保存在持久存储中的数据，但不仅如此——人们可能使用表单只是为了获取要在持久存储中搜索或传递给外部服务的数据，提供一些应用程序计数器，测试 Web 浏览器引擎，根据用户输入的数据（例如“Hello USERNAME”）、登录用户等呈现一些文本。

在模型实例上调用 save() 应保证当且仅数据有效时数据将保存在持久存储中 - 这将在保存到持久存储之前提供一致的数据验证机制，无论用户单击后是否要保存业务实体网页或 django 交互式 shell 中的“保存我”按钮用户将执行模型实例的 save() 方法。

# ms-access - 如何在 MS Access 查询中格式化日期以防止出现美国/英国问题

> ID：11609944
> 
> 赞同：3
> 
> 时间：2012-07-23T09:37:13.953
> 
> 标签：ms-access, date

在 Access Query 中过滤日期时，如何确保获取正确数量的记录：

```
SELECT ID, REF, SalesDate, DCount("ID","tblRecords"," Ref='" & [Ref] & "' AND [SalesDate]=#" & format([SalesDate],"yyyy/mm/dd") & "#") as EXPR1 from tblCurrent 
```

如果它不能被误解，例如 28-04-12，它会选择日期，但如果它是 04-06-12，它不会选择它，因为它假设它是错误的方式。

请注意，此查询不是即时创建的，也不是从表单等生成的......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T09:42:53.403

我要么使用 yyyy/mm/dd 作为 VBA 中的日期：

```
#" & Format([SalesDate],"yyyy/mm/dd") & "#" 
```

或参数，用于构建查询。

编辑重新附加信息

看到你用的是SQL server，我建议你用一个派生表，你可能会发现它更快，例如：

```
SELECT dbo_Table_1.ADate, ACount FROM dbo_Table_1
LEFT JOIN (SELECT a.ADate,Count(*) As ACount 
           FROM  dbo_Table_1 As a GROUP BY a.ADate) b
ON dbo_Table_1.Adate=b.ADate 
```

编辑重新讨论

```
SELECT * FROM dbo_vwRecordsCurrent As t 
LEFT JOIN (
   SELECT a.OpptyIncentiveModifiedDate, a.DataSetID, Count(*) AS ACount 
   FROM dbo_vwRecordsHistorical AS a 
   WHERE a.OpportunityIgnored = True 
   GROUP BY a.OpptyIncentiveModifiedDate, a.DataSetID) AS h 
ON t.OpptyIncentiveModifiedDate = h.OpptyIncentiveModifiedDate 
AND t.DataSetID = h.DataSetID 
```

由于名称很长，我给你的表加上了别名，所以对我来说，在外部 sql 上使用别名更具可读性。它们在内部 sql 中是必不可少的。使用现有表的名称为派生表起别名并不是一个好主意。

# iphone - iOS中的用户界面。带有视网膜的 iPhone 的元素大小？

> ID：11609949
> 
> 赞同：-1
> 
> 时间：2012-07-23T09:37:38.210
> 
> 标签：iphone, user-interface, iphone-4, retina-display

[我需要这样的东西](http://www.idev101.com/code/User_Interface/sizes.html)

但是对于带有视网膜显示屏的 iphone，我没有发现任何类似的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:42:54.173

注意测量值是如何以点（不是像素）为单位的。这是视网膜和普通 iPhone 显示器的正确尺寸。

在非视网膜显示器上 1 点 == 1 像素，在视网膜显示器上 1 点 == 2 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:44:52.717

如果您正在设计自己的界面元素并需要图像尺寸，是的；您只需将值加倍。但是，在您的代码中，当引用元素（点）的坐标系时，您仍然使用 320x480 点系统，因为这些点会针对不同的设备分辨率自动缩放。

对于图像，retina 大小的图像必须具有相同的文件名，但后跟@2x。例如，background.png (320x480) 必须具有相似的图像 background@2x.png，尺寸为 640x960。

# asp.net-mvc-3 - 临时持有一个数据对象

> ID：11609951
> 
> 赞同：0
> 
> 时间：2012-07-23T09:37:48.103
> 
> 标签：asp.net-mvc-3

我有一个`object`我想暂时存储的东西。该对象现在在控制器中，控制器将生成一个视图。从视图向下一个`AJAX`控制器发出请求。在那一刻，我需要以前存储的对象。以前，我用过`session`，效果很好。但不确定这是正确的做法。是`session`这个问题的答案还是还有别的？

**PS**我需要多次访问数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T12:23:56.607

您可以将您的对象缓存。

添加：

```
HttpContext.Current.Cache.Add("MyData", myObject, null, DateTime.Now.AddHours(6),
                        System.Web.Caching.Cache.NoSlidingExpiration, System.Web.Caching.CacheItemPriority.Normal, null); 
```

检索对象：

```
var my object = HttpContext.Current.Cache["MyData"] as MyType 
```

# python - 函数（属性）python的函数

> ID：11609952
> 
> 赞同：0
> 
> 时间：2012-07-23T09:38:05.263
> 
> 标签：python, numpy

我有一个 Python 类，其函数和属性如下：

```
@property
def xcoords(self):
    ' Returns numpy array. '
    try:
        return self.x_coords
    except:
        self.x_coords = self._read_coords('x')
        return self.x_coords

def _read_coords(self, type):
    # read lots of stuff from big file
    return array 
```

这使我可以这样做：`data.xcoords`，又好又简单。

我想保持原样，但是我想定义允许我这样做的函数：

```
 data.xcoords.mm
    data.xcoords.in 
```

我该怎么做？我还希望这些函数适用于类的其他属性，例如`data.zcoords.mm`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T10:07:36.470

如果你真的想`xcoords`返回一个`numpy`数组，那么人们可能不会期望`xcoords`拥有`mm`和`in_`方法的值。您应该考虑是否`mm`并且`in_`真的是*数组本身*的属性，或者它们是否是您正在定义的类的属性。在后一种情况下，我建议不要子类`ndarray`化——只需将它们定义为包含类的方法。

另一方面，如果这些肯定是由返回的事物的属性`xcoords`，那么子类`ndarray`化是一种合理的方法。确保通过定义`__new__`并按照[文档中的](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html)`__array_finalize__`讨论来正确处理。

要决定是否应该 subclass `ndarray`，您可能会考虑是否可以看到自己在程序的其他地方重用这个类。（你现在*实际上*不必在其他地方使用它——你只需要能够*看到自己*在某个时候重用它。）如果你不能，那么这些可能是包含类的属性。这里的推理思路是——从函数的角度思考——如果你有一个短函数`foo`和一个短函数`bar`，并且知道你*永远不会*以任何其他方式调用它们`foo(bar(x))`，那么你最好改写`foo_bar`。同样的逻辑也适用于类。

最后，正如 larsmans 所指出的，`in`是 python 中的一个关键字，因此在这种情况下不能使用（这就是我在`in_`上面使用的原因）。

# android - GCMIntentReceivier 不在根包中时不起作用

> ID：11609957
> 
> 赞同：1
> 
> 时间：2012-07-23T09:38:24.283
> 
> 标签：android

> **可能重复：**
> [Google GCMIntentService 实例化](https://stackoverflow.com/questions/11332034/google-gcmintentservice-instantiate)

我试图与`GoogleCloud`android 一起工作。我按照教程进行操作，效果很好。但是当我尝试将`GCMIntentService.java`类放入某个包（不是根）时，它根本找不到它（没有错误，只是无法获取 RegID）。

在清单文件中我已经指定了它：

```
<service android:name=".service.GCMIntentService" /> 
```

休息一切都不变。

谢谢。

# javascript - 使用 JavaScript 进行 Google API 授权

> ID：11609958
> 
> 赞同：1
> 
> 时间：2012-07-23T09:38:38.073
> 
> 标签：javascript, google-api, google-api-client

嗨，我希望有人可以帮助解决这个问题，因为它现在让我发疯。

我正在尝试在我自己的网络服务器[http://james-上复制此 Google API 授权示例](http://james-gilmore.co.uk/test.html)[https://code.google.com/p/google-api-javascript-client/source/browse/samples/authSample.html](https://code.google.com/p/google-api-javascript-client/source/browse/samples/authSample.html) [gilmore.co.uk/test.html](http://james-gilmore.co.uk/test.html)

我复制了代码，但用 google api 控制台中设置的密钥替换了 clientID 和 API 密钥，并在“服务”部分打开了 Google+ api 服务。

我在“Web 应用程序的客户端 ID”下进行了以下设置

重定向 URI： http: [//james-gilmore.co.uk/oauth2callback](http://james-gilmore.co.uk/oauth2callback) JavaScript 来源：http: [//james-gilmore.co.uk](http://james-gilmore.co.uk)

我还在“简单 API 访问”下进行了以下设置

推荐人：*.james-gilmore.co.uk/*。

当我运行[http://james-gilmore.co.uk/test.html](http://james-gilmore.co.uk/test.html)脚本时，我可以授权我的访问，但我可以看到控制台中生成了一个 JS 错误：

'未捕获的类型错误：无法读取未定义的属性'url''

有谁知道我可能做错了什么？我认为这可能与我的客户端 ID 和允许的引用者的设置有关，因为当我运行以下示例[https://code.google.com/apis/console/?api=plus](https://code.google.com/apis/console/?api=plus)时它工作正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:54:37.873

OAuth 身份验证似乎正在工作，但我看到`Access Not Configured`AJAX 调用返回错误。

将您的推荐人设置为`james-gilmore.co.uk/*`（使用尾随通配符，以便允许以您的域名*开头的任何内容）。*

# selenium - Selenium 自动注销

> ID：11609959
> 
> 赞同：2
> 
> 时间：2012-07-23T09:38:40.573
> 
> 标签：selenium, testng

我正在研究 VCM，并使用 Selenium 和 TestNG（不使用 webdriver）创建了一些测试脚本。

问题是，一旦登录它就会自动注销，显示找不到链接的错误。如果单独运行脚本运行完美，但在运行套件时它总是无法显示上述错误。

这是我的代码供参考：

```
 @BeforeTest
public void setup()
{
    selenium = new DefaultSelenium("localhost",4444,"*firefox","http://BaseURL/");
    selenium.start();
    selenium.windowMaximize();
}
@AfterTest
public void teardown()
{
    this.selenium.close();
}

@Test public void testTC_07() throws Exception {
    selenium.open("http://BaseWebsite");
    selenium.type("name=j_username", "UserId");
    selenium.type("name=j_password", "PassWord");
    selenium.click("id=login-button");
    selenium.waitForPageToLoad("60000");
    selenium.click("id=href_Menus");
    selenium.waitForPageToLoad("60000");
    selenium.click("link=TestContents");
    selenium.waitForPageToLoad("60000");
    selenium.click("link=Test");
    selenium.waitForPageToLoad("60000");
    selenium.click("link=Test_title");
    selenium.waitForPopUp("Pop Up Window", "60000");
    selenium.selectWindow("null");
    verifyEquals(selenium.getTitle(), "Test_Title Properties Window");
    verifyTrue(selenium.isTextPresent("Title"));
    selenium.type("id=textbox", "");
    Thread.sleep(10000);
    selenium.click("id=doOK");
    String title= selenium.getTitle();

    if(title!="Window Title"){
        selenium.close();
        selenium.selectWindow("null");
        selenium.click("link=Logout");
        selenium.waitForPageToLoad("60000");
        }

    else{
        TC_07.fail(null);
        this.selenium.close();

    }
} 
```

# jquery - 单击箭头时，如何使用 jQuery 替换选择元素的内容？

> ID：11609963
> 
> 赞同：0
> 
> 时间：2012-07-23T09:38:58.953
> 
> 标签：jquery

我有一个看起来像这样的选择：

```
 <select name="rowKey_1" id="rowTopic_1">
        <option value="00">Topic 1</option>
    </select> 
```

我在桌子上的网格中有很多这样的东西。

我想要的是当用户单击选择箭头时，我希望 jQuery 触发，然后拥有调用 URL 并检索新选项的代码。然后我想用我的新长选项列表替换一个选项。

我可以对 ajax 请求进行编码，但是如何对感知触发器单击的 jQuery 进行编码，然后如何对用新选项替换选项的 jQuery 进行编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:43:33.620

```
//When the #rowTopic_1 element is clicked
$("#rowTopic_1").click(function() {

  //Cache the element
  $this = $(this);

  //Load new content
  $.ajax({
    url: "yoururl",
    type: "POST",
    success: function(data) {
      //Remove the old content and replace with the returned data
      $this.empty().append(data);
    }
  });

}); 
```

为此，您需要使用服务器端语言以格式将 html 返回到页面`<option value="00">Foo</option>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T09:43:12.963

```
 $.ajax({
      success:function(){
           $(this).html('insert html');
      }
 }); 
```

我相信不检查应该可以工作：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:48:31.463

你需要这个`focus`事件：

```
$(document).ready(function() {
   $('#rowTopic_1').focus(function() {
        // ajax code here
   })
}); 
```

[您可以在此处](http://api.jquery.com/focus/)的 api 中找到它。

# c++ - 另一个“类型引用的无效初始化”错误

> ID：11609965
> 
> 赞同：0
> 
> 时间：2012-07-23T09:38:59.987
> 
> 标签：c++, reference, constants

我的课堂上有这样的容器：

```
protected:
std::map<const AAA*, std::set<BBB*> > conn; 
```

以下两个 getter 函数都可以正常工作：

```
std::map<const AAA*, std::set<BBB*> > & getConnectors()       {return connectors;}
std::map<const AAA*, std::set<BBB*> >   getConnectors() const {return connectors;} 
```

但是 & 和 const 一起，Nope.Gives 错误：

```
std::map<const AAA*, std::set<BBB*> > & getConnectors() const {return connectors;} //error 
```

错误是：

```
/home.../Multi.hpp:65:108: error: invalid initialization of reference of type ‘std::map<const AAA*, std::set<BBB*> >&’ from expression of type ‘const std::map<const AAA*, std::set<BBB*> >’
make[2]: *** [CMakeFiles/SimMobility.dir/main.cpp.o] Error 1 
```

为什么我会得到这个，请问我该如何解决

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T09:42:24.213

这不起作用，因为**从一个`const`方法中，所有成员**（除了`mutable`）**都应该被视为他们`const`自己**。

这意味着您不仅不能从该方法修改它们，而且您也不能用指向非常量的指针指向它们或形成对非常量的引用。

因此，使用：

```
 std::map<Foo, Bar> & GetConnectors();
const std::map<Foo, Bar> & GetConnectors() const; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:43:50.227

最后一个应该写成

```
const std::map<const AAA*, std::set<BBB*> > & getConnectors() const {return connectors;} 
```

# navigation - 黑莓 WebWorks 应用迷恋：多页

> ID：11609967
> 
> 赞同：1
> 
> 时间：2012-07-23T09:39:09.207
> 
> 标签：navigation, blackberry-webworks

我正在开发一个多页面的 WebWorks 应用程序。我的应用程序有主页和指向表格视图的链接。表格视图链接到页面详细信息。当我在每个页面之间导航（进入并返回）我的应用程序迷恋。

由于代码非常简单，因此我无法弄清楚暗恋的确切原因。只链接到另一个页面，没有别的。

任何建议都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T07:50:33.653

您可能需要先在本地服务器上测试 html、css（和 js）文件，以确保您的代码实际上是正确的。尝试删除 javascript 文件以查看它们是否是错误的来源。如果是，请确保您拥有您尝试使用的代码/插件的正确版本。

如果这不起作用，请发布您的代码示例，以便有人可以提供帮助。

# java - 如何创建替换 JPAPlugin 和 DBPlugin 的插件

> ID：11609970
> 
> 赞同：0
> 
> 时间：2012-07-23T09:39:24.030
> 
> 标签：java, playframework, playframework-1.x

我想创建 2 个插件来替换 play 框架的 JPAPlugin 和 DBPlugin 并阻止它们运行。我想通过制作其他 2 个插件来替换这些插件的默认行为。

我应该如何进行？我是否只需要创建这 2 个插件并赋予它们较低的优先级？或者我是否必须做一些特定的事情来确保我用我的插件的行为替换它们的默认行为？

谢谢您的帮助 ！

PS：我正在使用 playframework 1.2.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:57:04.567

快速的源搜索显示该类`play.test.Fixtures.resolveDependencies(Class<Model>, Map<String, String[]>)`具有硬编码的引用`JPAPlugin`。因此，您需要分叉 Play 源才能不依赖于当前`JPAPlugin`类。

# jquery - 网站使用jquery，但代码中没有jquery

> ID：11609973
> 
> 赞同：-1
> 
> 时间：2012-07-23T09:39:32.673
> 
> 标签：jquery

我想知道网站如何制作动画、加载内容而不加载整个页面等，所以我在谷歌上搜索了使用 jquery 的网站并找到了这个[http://docs.jquery.com/Sites_Using_jQuery](http://docs.jquery.com/Sites_Using_jQuery)。当我查看几个站点的代码时，我很难找到其中任何一个使用诸如 fadein() fadeout() 之类的方法或我的简单代码

```
$.ajax({type: "POST",
url: "page.php",
data: data,
beforeSend: function(pager) {etc. etc. 
```

查看此站点[http://www.2minuteexplainer.com/](http://www.2minuteexplainer.com/)或查看 stackoverflow.com 本身。他们都在做动画和页面加载以及其他所有事情，但没有使用 fadein() fadeout() 和我上面发布的其他代码。他们是如何做到这一点的，有没有办法窥探他们的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:42:54.330

jQuery 并不是唯一可用于制作动画和 ajax 的 JavaScript 框架。

也有可能这些网站已经缩小/打包并组合了他们的 JavaScript，所以他们确实可以使用你提到的技术并不明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T09:48:05.557

我相信您作为示例提供的网站实际上是在“最小化”他们的 JS 代码。因此，可能是像 fadeIn() 这样的方法有些混淆了。

我不会太担心这个。

jQuery 中的 fadeIn() 和 fadeOut() 已经存在了很长时间，并且非常擅长各自的任务。没有理由不想使用我可以看到的它们。

另一方面，您还可以查看 jQuery 中的“animate()”，它允许您为特定的 CSS 属性设置动画。在淡入淡出的情况下，它们可能会在“不透明度”属性上进行动画处理。

jQuery 实际上在此页面下方有一个不透明演示：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

祝你好运！

# c# - 如何在参数化查询中检查 null？

> ID：11609975
> 
> 赞同：1
> 
> 时间：2012-07-23T09:39:38.317
> 
> 标签：c#, ms-access-2007, parameterized-query

我有一个如下所示的类，它在 Access 2007 中有一个相应的表

```
Class Product
{
    public int ProductId
    {
        get;set;
    }
    public string ProductName
    {
        get;set;
    }
    public string ProductColor
    {
        get;set;
    }
} 
```

这是我用于将产品添加到数据库的方法。

```
public static void AddProduct(Product product)
    {
        con.Open();
        string strSql = @"INSERT INTO PRODUCTS (PRODUCTID,PRODUCTNAME,PRODUCTCOLOR)
                        VALUES(?,?,?)";
        IDbCommand cmd = con.CreateCommand();
        cmd.CommandText = strSql;

        dh.AddInParam(cmd, "@productId", DbType.Int32, product.ProductId);
        dh.AddInParam(cmd, "@productName", DbType.String, product.ProductName);
        dh.AddInParam(cmd, "@productColor", DbType.String, product.ProductColor);
        cmd.ExecuteNonQuery();
        con.Close()
    } 
```

现在我不介意用户是否输入了一些空值。在那种情况下，我该如何更新 AddProduct 方法？我想到的唯一情况是对每个参数进行空检查，如下所示..

```
if(product.ProductColor = null)
{
    dh.AddInParam(cmd, "@productColor", DbType.String, DbNull.Value);
}
else
{
    dh.AddInParam(cmd, "@ProductColor, DbType.String, product.ProductColor)
} 
```

我错过了一些明显的东西吗？在这些参数化查询中检查空值的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T09:42:14.060

[空合并](http://msdn.microsoft.com/en-us/library/ms173224.aspx)运算符可能是解决方案

```
dh.AddInParam(cmd, "@productId", DbType.Int32, 
                    product.ProductId ?? (object)DBNull.Value); 
```

这要求 dh.AddInParam 的第三个参数是对象数据类型（应该已经是这种方式了）

可能这个要求对于你传递给 AddInParam 的每个参数都是正确的，所以解决这个问题的最好方法是改变这个方法的代码来解释传入的空值。（当然，如果你有源）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T09:42:01.107

如何使用 NULL 合并运算符？

`dh.AddInParam(cmd, "@productColor", DbType.String, product.ProductColor ?? DbNull.Value);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T09:44:55.200

尝试使用空合并运算符

# iphone - 在 UITableView 单元格中显示 JSON 对象 - 应用程序崩溃

> ID：11609977
> 
> 赞同：0
> 
> 时间：2012-07-23T09:40:13.297
> 
> 标签：iphone, ios, xcode, uitableview

我正在从我的服务器加载一个 json 文件，该文件有几个字段，如 id、category、value、price。我尝试了 SBJSON 库文件。如果我试图在单元格中显示单个内容，我正在使用以下代码

```
cell.textLabel.text=[[mutarray objectAtIndex:indexPath.row] valueForKey: @"id"]; 
```

但如果我需要在每个单元格中显示所有字段，如 id、类别、值。我不知道。请指导我..

这里 mutarray 是我的 NSMutableArray ，它包含我的 json 文件的所有元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:44:41.410

您将需要放置自定义单元格。请检查下面的链接，如果有任何疑问，请告诉我。

[将自定义单元格放在表格视图中](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:10:31.883

我使用以下代码完成了

```
cell.textlabel.text=[[NSString stringWithFormat:@"%@",[[mutarray objectAtIndex:indexPath.row] valueForKey: @"id"]]; 
```

问题是我忘记将 JSON 对象转换为 NSSTring

# javascript - zend加载js文件顺序

> ID：11609980
> 
> 赞同：0
> 
> 时间：2012-07-23T09:40:35.850
> 
> 标签：javascript, zend-framework, load

我在 layout.phtml 中包含我的 jquery.js，

```
 <?php $this->headScript()->appendFile($this->baseUrl('js/jquery-1.7.2.min.js')); ?>
  <?= $this->headScript() ?> 
```

我在 IndexController 中包含了我自己的 test.js，

```
$this->view->headScript()->appendFile('js/test.js'); 
```

但是zend先加载test.js文件，我怎么能让zend先加载jquery？因为我在 test.js 文件中使用了查询代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:14:23.463

您可以使用“offsetSetFile(order, file)”来做到这一点。

```
$this->view->headScript()->offsetSetFile(10, $this->baseUrl('js/jquery-1.7.2.min.js'));
$this->view->headScript()->offsetSetFile(20, $this->baseUrl('js/test.js')); 
```

# iphone - 如何使用 UISlider 以及如何在特定值上设置滑块？

> ID：11609992
> 
> 赞同：4
> 
> 时间：2012-07-23T09:41:16.560
> 
> 标签：iphone, objective-c, ios, xcode, uislider

我第一次使用 UIslider。首先，如果值的范围是 0 到 10，我想知道如何获取滑块位置的值：

其次，我希望我的滑块设置为 5 个不同的值。像 1, 2, 3, 4, 5

滑块不应设置在标记值之间 ![在此处输入图像描述](../Images/38784e61ca3d028d7f0475ba134bc7b9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:31:52.487

首先你设置文本文件并将这个函数添加到代码中

```
-(IBAction)changeSlider:(id)sender 
{
    text_field .text= [[NSString alloc] initWithFormat:@" Value %d ", (int)slider.value];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-23T09:48:27.597

我按照本教程进行操作，它非常有帮助，您可以在代码中设置一些变量，例如最大数量和滑块每次增加多少。链接：[http ://www.xprogress.com/post-35-uislider-tutorial-example-how-to-use-slider-in-iphone-sdk-xcode/](http://www.xprogress.com/post-35-uislider-tutorial-example-how-to-use-slider-in-iphone-sdk-xcode/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-27T11:27:22.190

在这种情况下，我将 XCode 中的滑块设置为：0-3。但滑块值是浮动的：0.000 - 3.000。

```
// **** Cylinder Volume Slider ****

- (NSInteger) normalizeValueCylinderVolumeSlider:(float) value
{
NSInteger normalizedValue = 0;

if (value>1.5)
{
    if (value>2.5)
        normalizedValue = 3;
    else
        normalizedValue = 2;
}
else if (value>0.5)
    normalizedValue = 1;

return normalizedValue; 
```

}

```
- (IBAction)valueChangedCylinderVolumeSlider:(UISlider *)sender
{
float value = [sender value];
NSInteger normalizedValue;

// Step 1:

normalizedValue = [self normalizeValueCylinderVolumeSlider:value];

// Step 2:

if (normalizedValue>value)
{
    if ((normalizedValue-value)<0.3)
        sender.value = normalizedValue;
}
else if ((value-normalizedValue)<0.3)
    sender.value = normalizedValue; 
```

}

```
- (IBAction)touchUpInsideCylinderVolumeSlider:(UISlider *)sender
{
float normalizedValue = 0;

normalizedValue = [self normalizeValueCylinderVolumeSlider:[sender value]];

sender.value = normalizedValue; 
```

}

```
- (IBAction)touchUpOutsideCylinderVolumeSlider:(UISlider *)sender
{
float normalizedValue = 0;

normalizedValue = [self normalizeValueCylinderVolumeSlider:[sender value]];

sender.value = normalizedValue; 
```

}

* * *

在 valueChanged 操作上，（步骤 1）我将值设置为刚性值：0、1、2、3。并且（步骤 2）如果滑块距离刚性值接近 0.3，我将滑块拇指粘贴到刚性值。

在 touchUpInside 和 touchUpOutside 上，我重复 valueChanged 操作中的“步骤 1”代码，以修复拖动操作结束于摇杆范围之外的情况（“步骤 2”）的滑块值。

* * *

最好的办法是将所有这些代码放在 Slider 的子类中。但这是我在 iOS 开发上唯一的第一周/尝试。

# python - 在后台进程中捕获串行数据

> ID：11609994
> 
> 赞同：2
> 
> 时间：2012-07-23T09:41:19.363
> 
> 标签：python, serial-port, subprocess, pyserial

我目前正在尝试在 python 脚本中捕获串行数据。我打算开始捕获在串行端口上捕获的所有数据的日志，同时脚本的其余部分继续与我正在测试的系统进行交互。

如果我使用 pyserial，我相信它最终会阻止我想要执行的其余测试，直到我完成记录为止。

我考虑过的选择是：

*   使用 pyserial 编写另一个脚本来捕获日志，使用 subprocess.Popen() 调用此脚本
*   使用内置的 unix 工具，例如 tail 或 cat 并使用 subprocess.Popen() 调用它们

我相信我可以找到一种方法来让其中任何一个工作，但如果有人知道更直接的方法，那么我很想知道。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-23T10:14:49.410

为什么要创建另一个从 pySerial 读取数据的进程？对于非阻塞读取，您可以在串行类中配置超时。例如

```
ser = serial.Serial()
ser.baudrate = 19200
ser.port = 0
ser.timeout = 2 #By default, this is set to None
ser.open() 
```

另请查看包装类以供参考。

[http://pyserial.sourceforge.net/examples.html#wrapper-class](http://pyserial.sourceforge.net/examples.html#wrapper-class)

您可以运行一个线程来继续从串行读取数据并将其更新到缓冲区。

创建另一个进程涉及 IPC 的开销，不建议用于此任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T14:57:37.103

[您可以随时通过查看链接](http://pyserial.sourceforge.net/pyserial_api.html#serial.Serial.inWaiting)检查是否有可用数据`ser.inWaiting()`

```
from serial import Serial
ser = Serial(port=0, baudrate=19200) # set the parameters to what you want
while 1:
    if ser.inWaiting():
        temp = ser.read()
    #all the other code in the loop 
```

如果没有可读取的数据，则循环跳过串行读取

或者如果数据对时间敏感，您可以这样[做](https://stackoverflow.com/questions/13585238/subprocess-in-reading-serial-port-read/13585959#13585959)