# StackOverflow 问答 000657000-000657999

# apache-flex - Adobe AIR - 读取 AIR 包外同一文件夹中的文件

> ID：657028
> 
> 赞同：3
> 
> 时间：2009-03-18T05:03:18.213
> 
> 标签：apache-flex, actionscript-3, air, adobe

我如何从我的 .app 或 .exe AIR 应用程序正在运行的文件夹中知道 File.nativepath？当我尝试这个时，我得到了

> '/Users/MYNAME/Desktop/MYAPP/Contents/Resources/FILETHATINEED.xml'

我需要将它放在任何文件夹中并读取同一文件夹中的 xml 文件。我不需要包内的 xml 文件。

我需要这个结构

> /文件夹/AIRAPP.exe
> 
> /文件夹/FILE.xml

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-20T08:18:38.047

据我所知，如果不自己做一些工作，就没有办法做到这一点。如果我们假设`File.applicationDirectory`仅在 Mac 上指向错误的位置（似乎是这种情况），我们可以这样做：

```
var appDir = File.applicationDirectory

if ( appDir.resolvePath("../../Contents/MacOS").exists ) {
  appDir = appDir.resolvePath("../../..");
} 
```

也就是说，检查 app 目录的父目录是否与 Mac .app 包目录结构匹配，在这种情况下使用父目录的父目录（应该是包含 .app 包的目录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T05:59:56.940

我相信你想使用 File.applicationDirectory。

# asp.net - 是否可以查看程序集的源代码？如果是，那么如何？

> ID：657035
> 
> 赞同：1
> 
> 时间：2009-03-18T05:09:21.880
> 
> 标签：asp.net, dll, assemblies

我正在使用程序集 EventCalender。ddl 是 EventCalender.dll。我从现有应用程序中复制了这个程序集。它为日历提供定制的功能。我想查看该 dll 的代码并想更改它的某些功能。怎么可能..？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-18T05:12:14.137

如果 dll 是用 .NET 编写的，您可以使用[.NET Reflector](http://www.red-gate.com/products/reflector/)查看代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T05:11:43.077

试试 lutz roeders 'Reflector' 工具

[http://www.red-gate.com/products/reflector/](http://www.red-gate.com/products/reflector/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T05:34:34.347

如果只想查看DLL的IL代码，可以使用ILDASM。如果要将其转换回 VB.NET 或 C#，请按照前面的答案建议使用 Reflector。其中一个插件允许您将程序集中的所有类文件提取到一个文件夹中。

但是，其他人没有解决的一点是，如果要更改功能，**则**需要在解析所有外部引用后重新编译库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T05:12:42.263

我认为这个[链接](http://www.builderau.com.au/program/asp/soa/Look-inside-NET-DLL-files-with-Reflector/0,339028371,339287377,00.htm)会对你有所帮助。您可以使用反射器来做到这一点。

# c# - 为什么多线程访问 WPF UI 控件的开销？

> ID：657037
> 
> 赞同：1
> 
> 时间：2009-03-18T05:10:18.010
> 
> 标签：c#, wpf

关于在开发多线程应用程序时需要编写大量重复代码的问题，我是否错过了 WPF（以及之前的 Windows 窗体）的某些内容。应用程序中的每个 UI 控件最终都需要额外的代码行来获取和设置每个属性。

```
internal delegate void SetElementIsEnabledDelegate(UIElement element, bool isEnabled);
internal delegate void SetBrushesAndTextDelegate(Brush foregroundBrush, string message);
internal delegate void SetCheckBoxCheckedDelegate(CheckBox checkbox, bool checkedValue);
internal delegate void SetTextBoxTextDelegate(TextBox richTextBox, string text);
internal delegate void SetRichTextBoxTextDelegate(RichTextBox textBox, string text);

internal static void SetElementIsEnabled(UIElement element, bool isEnabled)
{
    if (element.Dispatcher.Thread != Thread.CurrentThread)
    {
        // Execute the same method, but this time on the GUI thread
       element.Dispatcher.Invoke(DispatcherPriority.Normal, new SetElementIsEnabledDelegate(SetElementIsEnabled), element, isEnabled);
       return;
   }

   element.IsEnabled = isEnabled;
} 
```

再添加 30 个委托和相应的方法。

据我所知，没有类型安全的方法可以解决所有线程调用的需要。这似乎也可以很容易地在控制库的引擎盖下处理。我做错了什么，如果不是，为什么微软会选择不处理控件中调用的线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T06:35:16.073

那么你当然可以让它比这更简单。一方面，您不需要所有自己单独的委托类型 - 如果您使用的是 .NET 3.5，则可以使用内置`Func<...>`和`Action<...>`委托，如果不是，您可以自己声明它们，然后一般使用它们。

您可能会考虑的另一件事是编写辅助方法（作为扩展方法，如果您使用 C# 3），然后使用匿名方法（或 lambda 表达式）：

```
internal static void SetElementIsEnabled(UIElement element, bool isEnabled)
{
    InvokeIfNecessary(element, delegate
    {
        element.IsEnabled = isEnabled;
    });
} 
```

辅助方法是：

```
public static void InvokeIfNecessary(UIElement element, MethodInvoker action)
{
    if (element.Dispatcher.Thread != Thread.CurrentThread)
    {
        element.Dispatcher.Invoke(DispatcherPriority.Normal, action);
    }
    else
    {
        action();
    }
} 
```

（您可能还应该包括一个`BeginInvoke`等价物。`BeginInvoke`除非我需要会合，否则我通常更喜欢。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T05:27:58.980

简而言之，出于性能原因。当只有多线程的应用程序需要编组代码时，为什么每个 GUI 应用程序都必须承担编组代码的性能影响？

此外，您可以将您的应用程序设计为具有更少的跨线程聊天，从而减少调用的必要性。

此外，您的代码不是特别有效。更好的方法是：

```
if ( InvokeRequired ) {
    Invoke(new MethodInvoker(this.Function));
} else {
    // do code
} 
```

**编辑**：我想我的代码更多用于 Windows 窗体，而您的代码用于 WPF，但目的是相同的。由于线程本地存储问题，Windows 要求所有控件更新都发生在创建控件的线程上。这不是所有用途都应该存在的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-24T21:21:45.340

不要忘记 lambda：

```
int myParam = 5;

Dispatcher.BeginInvoke((Action)(() => SomeMethod(myParam))); 
```

调度器上还有一个隐藏的智能感知方法：

```
if(Dispatcher.CheckAccess())
    DoSomething(); 
```

# tomcat - 如何安装 VeriSign 的中间 CA 证书？

> ID：657040
> 
> 赞同：0
> 
> 时间：2009-03-18T05:11:51.890
> 
> 标签：tomcat, certificate, solaris

我在 Solaris 服务器上运行 tomcat，我想知道如何安装 VeriSign 的中间 CA 证书？

我已经苦苦挣扎了好几天，并且一直出现*keytool 错误：java.io.EOFException* 我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-25T21:05:32.733

你可以试试[Portecle](http://portecle.sourceforge.net)。它是 java 证书管理 api 的图形用户界面。此外，您应该确保证书不包含不必要的空格。

# iphone - iPhone核心数据示例产生异常

> ID：657042
> 
> 赞同：4
> 
> 时间：2009-03-18T05:12:00.720
> 
> 标签：iphone, cocoa-touch, core-data

不再受保密协议约束。

iPhone Core Data 示例中有一处遗漏，但现在已更正。此外，示例代码总是正确的，他们只是在教程中遗漏了一些细节。

（请参考[iPhone Dev Forums](https://devforums.apple.com/message/46441)的解释）

我两次构建了一个应用程序并两次收到相同的错误（但在 2 个不同的地方）：

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“+entityForName：找不到实体名称“事件”的 NSManagedObjectModel

我阅读了[苹果文档](http://developer.apple.com/documentation/Cocoa/Conceptual/CoreData/Articles/cdTroubleshooting.html)：

它说明了模型丢失的问题，或者上下文为零，或者持久性存储无效。

然而，由于这是我的第一个 Core Data 项目，我在调试方面有点弱。如果需要，我可以发布代码。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-18T06:33:22.850

我找到了答案。（如果您想要此答案的 iPhone 3.0 sdk 版本，请参阅页面底部的链接）应用程序委托 applicationDidFinishLaunching 方法中应该是这样的：

```
(void)applicationDidFinishLaunching:(UIApplication *)application { 

    NSManagedObjectContext *context = [self managedObjectContext];
    if (!context) {
        // Handle the error.
    }

    RootViewController *rootViewController = [[RootViewController alloc] 
                                              initWithStyle:UITableViewStylePlain]; 

    rootViewController.managedObjectContext = context;

    UINavigationController *aNavigationController = [[UINavigationController 
                                                      alloc] initWithRootViewController:rootViewController]; 
    self.navigationController = aNavigationController; 
    [window addSubview:[navigationController view]]; 
    [window makeKeyAndVisible]; 
    [rootViewController release]; 
    [aNavigationController release]; 
} 
```

[iPhone 开发者论坛链接](https://devforums.apple.com/message/46441)

# php - 将 Symfony 应用程序从 1.1 升级到 1.2 有多轻松

> ID：657047
> 
> 赞同：2
> 
> 时间：2009-03-18T05:12:45.663
> 
> 标签：php, symfony1, migration

我目前正在运行 PHP 5.1.6 版的服务器上开发一个系统，因此我被迫在当前环境中使用 Symfony 1.1。我计划在不久的将来将应用程序从 1.1 迁移到 1.2，我想知道是否有人对此有任何经验？我曾尝试将系统从 1.0 迁移到 1.1，这是一个很大的麻烦。

那些从 Symfony 1.1 迁移到 1.2 的人感觉如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-24T15:43:21.690

我的 2 美分是，这完全取决于您的应用程序中有多少表格，这是迄今为止最痛苦的部分。Symfony 1.2 有一个全新的表单系统。

您始终可以执行 compac10 = true 或其他任何操作...以使您的旧代码兼容，..

Symfony 1.2 确实有许多新的有用的小部件，..propel 1.3 是一个重大改进，修复了一些我实际遇到的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-29T16:27:26.740

如果您在 Propel 1.3 切换到 PDO 时不使用带有 Propel 的自定义 SQL 查询（即手动水合），这应该相当容易。我将一个 1.1 的应用程序迁移到了 1.2，除了运行自动升级脚本外，我无事可做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T08:13:08.383

对我来说，迁移到 1.2 相当轻松。升级脚本应该做所有艰苦的工作。

如果您使用 1.2（默认使用 symfony 1.0.x 和 1.1.x），最大的问题将是迁移到推进 1.3。如果您之前使用的是 propel 1.3（使用 sfPropelPlugin）或 Doctrine，应该不会有任何问题。

另一个是将管理员生成的模块移植到新的管理员生成器，但在 1.2 中，旧的模块现在仍然可以工作。

上面列出的是 1.2 中最大的变化。

我喜欢 1.2，因为它有很多很酷的新东西（REST 路由、新的管理生成器、一些小修复等）

# c# - C# 中的流和通道

> ID：657048
> 
> 赞同：0
> 
> 时间：2009-03-18T05:14:27.953
> 
> 标签：c#, stream

我想知道流在 C# 内部是如何工作的。StreamReader 和 StreamWriter 内部是否使用Winsock`recv()`的`send()`功能。我还想知道流和频道之间的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T05:20:01.263

我觉得你有点困惑。A`StreamReader`不是 a `Stream`，也不是 a `StreamWriter`。 `Stream`对网络 I/O 一无所知，因为它被抽象得更远了。

`NetworkStream`是一个流，它知道如何在网络上交谈，但`StreamReader`使用`StreamWriter`抽象`Stream`引用（或者更抽象）。

`NetworkStream`使用一个`Socket`类，它实际上调用 Winsock API，但实际上你并不需要知道任何关于它的知识就可以使用它。

没有什么叫做“频道”，也许你可以更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T05:19:25.180

我敢打赌他们不会在内部使用winsock，因为流不仅用于网络IO——它们还用于很多事情（移动内存块、加载文件等）

**编辑**- 我从未听说过 ac# 频道，而且谷歌没有提出任何内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T18:37:29.287

通道在整个 Windows Communication Foundation 中都被引用（在 .NET 3.0 中可用）。

流和通道没有直接关系。您应该参考MSDN 上的Windows Communication Foundation[文档。](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx "MSDN WCF")

另一个很好的资源是[IDesign.NET](http://www.idesign.net "设计网")的 Indigo Girl 和 gang 。

不要忘记安全。[WCF安全](http://wcfsecurity.codeplex.com/ "WCF 安全@CodePlex")

# fluent-nhibernate - 流畅的 NHibernate - HasMany().WithKeyColumnName

> ID：657056
> 
> 赞同：4
> 
> 时间：2009-03-18T05:20:36.847
> 
> 标签：fluent-nhibernate

我刚刚从 Google 代码中获得了 Fluent 的最新版本，自从我上次使用它以来，似乎有些映射发生了变化。

以前，当我加入的 id 在第二个表中具有不同的名称时，我可以使用以下方式映射关系

```
HasMany(x => x.Roles).WithTableName("tbl_Roles").WithKeyColumn("RoleId"); 
```

最新版本的 Fluent 是怎么做的？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-18T09:01:16.473

```
HasMany(x => x.Roles)
  .WithTableName("tbl_Roles")
  .KeyColumns.Add("RoleId"); 
```

添加了多列支持，因此需要改进方法签名以明确发生了什么。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-18T14:54:38.200

这对我有用：

```
HasMany(x => x.Roles)
  .WithTableName("tbl_Roles")
  .KeyColumnNames.Add("RoleId"); 
```

# xml - 如何使用 XML::Simple 检索标签属性？

> ID：657058
> 
> 赞同：2
> 
> 时间：2009-03-18T05:20:42.650
> 
> 标签：xml, perl

我只是想从 XML 中检索一个属性到我的 Perl 程序中。但是，我在检索属性时遇到问题。

我正在使用[XML::Simple](http://search.cpan.org/dist/XML-Simple)。

当 XML 像这样时，我可以很好地恢复信息：

```
<IdList>
    <Id>17175540</Id>
</IdList> 
```

通过使用此代码

```
 $data->{'DocSum'}->{'Id'}; 
```

但是，当 XML 是这样的时：

```
<Item Name="Title" Type="String">
    Some Title
</Item> 
```

使用以下代码时，我没有得到任何数据

```
$data->{'DocSum'}->{'Title'}; 
```

顺便说一句，这是我从[http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=19288470获取 XML 的链接](http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=19288470)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T05:31:26.680

跑：

```
$ perl -MXML::Simple -M'Data::Dump qw/pp/' 
my $ref = XMLin('<Item Name="Title" Type="String">Some Title</Item>');
pp $ref; 
```

输出：

```
{ Name => "Title", Type => "String", content => "Some Title" } 
```

因此，看来您应该在“内容”下查找它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T06:54:36.510

我从您提供的那个页面中获取了 xml，将整个内容用作 XMLin 参数的字符串，并取得了成功

```
print $data->{DocSum}->{Item}->[5]->{content}; 
```

给出输出

> 密西西比淤泥壤土中溴苯腈的降解。

这和德罗伯特说的差不多。

编辑：

与其假设第 6 个 Item 元素是您所追求的，不如打印 Name 属性为 'Title' 的节点的内容（然后由于您找到了您想要的内容而跳出循环）：

```
foreach my $item_node (@{$data->{DocSum}->{Item}})
{
    if($item_node->{Name} eq 'Title')
    {
        print $item_node->{content};
        last;
    }
} 
```

当然，这仍然只查看 DocSum 下的 Item 节点，因此如果您正在寻找 PubType 而不是 Title，由于它是 PubTypeList Item 节点的子节点，因此不会找到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T05:27:12.587

我猜你正在使用 XML::Simple 来解析 XML。我建议您使用[Data::Dumper](http://search.cpan.org/~ilyam/Data-Dumper-2.121/Dumper.pm)转储您的数据结构。那时你应该很容易找到它。

```
use Data::Dumper;
print Dumper($data); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T15:57:20.920

但是当然，“标题”不是键，而是属性值，因此是哈希值。您需要 XPath，然后您可以指定`/DocSum/Item[@Name='Title']`

XML::Simple （或*Perl*）中的等价物是

```
my ( $item ) = grep { $_->{Name} eq 'Title' } @{$data->{DocSum}{Item}}; 
```

甚至

```
use List::Util qw<first>;
...
( first { $_->{Name} eq 'Title' } @{$data->{DocSum}{Item}} )->{content}; 
```

我不得不不同意daotoad。据我所知，它并没有错误地转换数据。你只是没有*使用*它正确产生的东西。这是一个*简单*的模块，它不是很健壮，也不是太 DWIM。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T05:59:26.627

看起来 XML::Simple 对如何转换数据的猜测是错误的。您是否尝试过修改[KeyAttr](http://search.cpan.org/~grantm/XML-Simple-2.18/lib/XML/Simple.pm#KeyAttr_=%3E_[_list_]_%23_in+out_-_important)选项`XMLin()`？

# perl - 集成到 Perl 代码中的最佳文档搜索引擎是什么？

> ID：657063
> 
> 赞同：1
> 
> 时间：2009-03-18T05:23:43.563
> 
> 标签：perl, full-text-search, search-engine, kinosearch

集成到允许自定义和调整搜索算法的 Perl 代码中的最佳文档搜索引擎（可能是 Plucene？）是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T23:50:39.597

您还应该查看[swish-e](http://swish-e.org)。非常快，非常容易设置并且非常灵活。我已经在很多项目中成功使用了它，它也有[很多](http://search.cpan.org/perldoc?SWISH::API::More)[CPAN](http://search.cpan.org/perldoc?SWISH) [支持](http://search.cpan.org/perldoc?SWISH::HiLiter) ：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T17:31:31.440

考虑改用[KinoSearch](http://search.cpan.org/perldoc?KinoSearch)。然后，阅读[它的教程](http://search.cpan.org/perldoc?KinoSearch::Docs::Tutorial)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-19T00:47:06.293

只是提出其他建议：我很喜欢[sphinx](http://www.sphinxsearch.com/)。下一个版本应该得到适当的“实时更新”；但在那之前，它会非常快速地重建其索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T09:27:03.760

首先，请认真考虑 Lucene - 它速度更快，并且它生成的文件与 lucene 的其他实现更兼容。对 clucene 库有依赖性，但如果可以的话，这是值得的。

[http://search.cpan.org/dist/Lucene](http://search.cpan.org/dist/Lucene)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-19T20:26:13.377

什么平台？有哪些可用资源？这是整体还是已部署的东西。这是否也必须处理诸如修订控制之类的问题？

# ssis - 无法通过 DOS 命令运行 SSIS PACKAGE

> ID：657070
> 
> 赞同：0
> 
> 时间：2009-03-18T05:28:01.867
> 
> 标签：ssis, dos, package, command

我想在命令提示符下运行 SSIS 包...为此，我使用了命令 dtexec/f "C:/Filename.dtsx"...但是当我执行此命令时，我收到类似“产品级别不足以满足组件“数据转换”...

但是当我在 BIDS 中运行 SSIS 包时，它成功执行了……这是为什么？是因为安装问题吗？？请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T06:34:02.130

看到这个帖子。[ssis 产品级别不足](http://blogs.msdn.com/michen/archive/2006/11/11/ssis-product-level-is-insufficient.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T10:23:18.867

是的，这是因为安装问题...我已经重新安装并检查过..它对我有用...您可以查看 Michael 发送的上一个链接以供参考

# algorithm - 如何在php中检测歌曲的BPM

> ID：657073
> 
> 赞同：79
> 
> 时间：2009-03-18T05:32:14.477
> 
> 标签：algorithm, audio, signal-processing, beat-detection

如何以编程方式确定歌曲的速度/BPM？常用的算法有哪些，需要注意什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2009-03-18T05:38:35.430

这很难在单个 StackOverflow 帖子中解释。通常，最简单的节拍检测算法通过定位声能中的峰值来工作，这很容易检测。更复杂的方法使用**[梳状滤波器](http://en.wikipedia.org/wiki/Comb_filter)**和其他统计/波形方法。有关包括代码示例的详细说明，请查看[**此 GameDev 文章**](http://archive.gamedev.net/archive/reference/programming/features/beatdetection/index.html)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-27T15:30:52.790

要搜索的关键字是“节拍检测”、“节拍跟踪”和“音乐信息检索”。这里有很多信息：http: [//www.music-ir.org/](http://www.music-ir.org/)

有一个（可能）年度竞赛叫做 MIREX，不同的算法在它们的节拍检测性能上进行测试。

[http://nema.lis.illinois.edu/nema_out/mirex2010/results/abt/mck/](http://nema.lis.illinois.edu/nema_out/mirex2010/results/abt/mck/)

那应该给你一个要测试的算法列表。

一个经典的算法是*Beatroot* (google it)，它很好而且很容易理解。它是这样工作的：

1.  对音乐进行短时 FFT 以获得声波图。
2.  将每个时间步长的所有频率的幅度*增加相加（忽略减少）。*这为您提供了一个称为“光谱通量”的一维时变函数。
3.  使用任何旧的峰值检测算法查找峰值。这些被称为“开始”并且对应于音乐中声音的开始（音符的开始，鼓声等）。
4.  构建发病间隔 (IOI) 的直方图。这可以用来找到可能的节奏。
5.  为节拍跟踪结果初始化一组“代理”或“假设”。按顺序一次给这些代理喂食。每个代理跟踪也是节拍的起始列表，以及当前的节奏估计。代理可以接受这些起始点，如果它们与他们最后跟踪的节拍和节奏非常吻合，如果它们完全不同，则忽略它们，或者如果它们介于两者之间，则生成一个新代理。并非每个节拍都需要开始 - 代理可以插值。
6.  每个智能体都根据其假设的简洁程度给出一个分数——如果它的所有节拍开始都响亮，它会得到更高的分数。如果他们都是正常的，它会得到更高的分数。
7.  得分最高的代理就是答案。

根据我的经验，这种算法的缺点：

*   峰值检测是相当临时的，并且对阈值参数等敏感。
*   有些音乐在节拍上没有明显的开始。显然它不适用于那些。
*   很难知道如何解决 60bpm-vs-120bpm 问题，尤其是实时跟踪！
*   仅使用一维光谱通量会丢弃*大量*信息。我认为你可以通过使用一些带限制的光谱通量（可能还有一个用于鼓的宽带）来做得更好。

[这](https://www.youtube.com/watch?v=fWk9my4RB6c)是该算法的实时版本的演示，显示了光谱通量（底部的黑线）和起始点（绿色圆圈）。值得考虑的事实是节拍*仅从*绿色圆圈中提取。我已经像点击一样回放了起始点，老实说，我认为我听不到它们的节拍，所以在某些方面，这个算法在节拍检测方面比人们更好。我认为减少到这样一个低维信号是它的弱步骤。

令人烦恼的是，几年前我确实找到了一个非常好的网站，其中包含许多用于节拍检测的算法和代码。我完全没有重新找到它。

# 编辑：找到了！

这里有一些很棒的链接可以帮助您入门：

[http://marsyasweb.appspot.com/](http://marsyasweb.appspot.com/)

[http://www.vamp-plugins.org/download.html](http://www.vamp-plugins.org/download.html)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2009-03-18T07:56:15.927

节拍提取涉及识别音乐中的认知度量结构。很多时候，这些与物理声音能量不对应——例如，在大多数音乐中都有一定程度的切分音，这意味着我们感知到的“踩脚”节拍与物理声音的存在不对应。这意味着这是一个与*起始检测*完全不同的领域，它是物理声音的检测，并且以不同的方式执行。

你可以试试[Aubio](http://aubio.org/)库，它是一个简单的 C 库，提供了起始和节拍提取工具。

还有在线[Echonest API](http://developer.echonest.com)，虽然这涉及将 MP3 上传到网站并检索 XML，所以可能不太适合..

**编辑：**我昨晚遇到了这个 - 一个非常有前途的 C/C++ 库，虽然我自己没有使用它。[鞋面插件](http://www.vamp-plugins.org/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-03-18T06:18:27.487

如果你能设法在你的项目中与 python 代码交互，[**Echo Nest Remix API**](http://code.google.com/p/echo-nest-remix/)是一个非常漂亮的 python API：

有一种方法`analysis.tempo`可以为您提供 BPM。**[正如您从 API 文档或本](http://lindsay.at/work/remix/overview.html)**教程中看到的那样，它可以做的不仅仅是简单的 BPM

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-03-13T20:43:17.240

**您感兴趣的一般研究领域称为音乐信息检索**

有许多不同的算法可以做到这一点，但它们基本上都以起始检测为中心。

开始检测测量事件的开始，在这种情况下，事件是正在播放的音符。您可以查找加权傅立叶变换（高频内容）的变化，您可以查找光谱内容的大变化。（光谱差异）。（我建议您进一步研究几篇论文）一旦应用了起始检测算法，您就可以通过阈值确定节拍的位置。

获得节拍的时间定位后，您可以使用各种算法。您可以将其转换为脉冲序列（创建一个始终为零的信号，仅在您的节拍发生时为 1）然后对其应用 FFT 和 BAM，现在您在最大峰值处有一个起始频率。

**这里有一些论文可以引导您朝着正确的方向前进：**

[http://www.elec.qmul.ac.uk/people/juan/Documents/Bello-TSAP-2005.pdf](http://www.elec.qmul.ac.uk/people/juan/Documents/Bello-TSAP-2005.pdf)

[http://bingweb.binghamton.edu/~ahess2/Onset_Detection_Nov302011.pdf](http://bingweb.binghamton.edu/~ahess2/Onset_Detection_Nov302011.pdf)

这是一些人正在讨论的内容的扩展：

有人提到研究应用机器学习算法：基本上从起始检测函数（如上所述）中收集一堆特征，并将它们与神经网络/逻辑回归中的原始信号结合起来，并了解是什么让节拍成为节拍。

看看 Andrew Ng 博士，他有来自斯坦福大学的在线免费机器学习讲座（不是冗长的视频讲座，实际上有一个在线远程课程）

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-03-18T05:37:42.157

执行[傅里叶变换](http://en.wikipedia.org/wiki/Fourier_transform)，并在功率谱中找到峰值。您正在寻找低于 20 Hz 人类听觉截止频率的峰值。我猜通常在 0.1-5ish Hz 范围内是慷慨的。

可能有帮助的问题：[Bpm 音频检测库](https://stackoverflow.com/questions/477944/bpm-audio-detection-library)

此外，这是关于 SO 的几个“峰值发现”问题[之一： 测量信号的峰值检测](https://stackoverflow.com/questions/3260/peak-detection-of-measured-signal/)

* * *

**编辑：**不是我做音频处理。这只是基于您正在寻找文件的频域属性这一事实的猜测......

* * *

**另一个编辑：**值得注意的是，像 mp3 这样的有损压缩格式首先存储傅里叶域数据而不是时域数据。稍微聪明一点，您就可以省去一些繁重的计算……但请参阅 cobbal 的深思熟虑的评论。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-20T21:46:54.720

重新发布我的答案：最简单的方法是让用户按照节拍的节奏点击一个按钮，然后计算点击次数除以时间。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2011-02-23T23:16:01.767

有几种方法可以获得 BPM，但我发现最有效的一种是“节拍频谱”（**[在此处](http://www.rotorbrain.com/foote/papers/icme2001/icmehtml.htm)**描述）。该算法通过将音乐的每个短样本与其他样本进行比较来计算相似度矩阵。一旦计算出相似度矩阵，就有可能获得每个时间间隔 T 的每个样本对 {S(T);S(T+1)} 之间的平均相似度：这是拍频。拍频频谱中的第一个高峰大部分时间是拍频持续时间。最好的部分是您还可以进行音乐结构或节奏分析等操作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-02-13T12:15:32.270

其他人已经描述了一些节拍检测方法。我想补充一点，有一些库可以为这类任务提供技术和算法。

[Aubio](http://aubio.org/)就是其中之一，它享有很高的声誉，它是用 C 语言编写的，带有 C++ 包装器，因此您可以轻松地将它与可可应用程序集成（Apple 框架中的所有音频内容也是用 C/C++ 编写的）。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2009-03-18T07:27:30.333

我想这在 4-4 舞曲中是最简单的，因为应该有大约每秒两次的单一低频砰砰声。

# iphone - 有机会拒绝苹果的 mp3 播放器申请吗？

> ID：657075
> 
> 赞同：1
> 
> 时间：2009-03-18T05:34:14.067
> 
> 标签：iphone

我打算开发一个 iphone 应用程序，将 mp3 文件下载到我的应用程序文件夹并播放。有机会拒绝我的申请吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T05:37:57.100

它似乎很可能会被拒绝，因为 Apple 包含 iTunes 音乐播放器，而您的应用程序会复制其功能。然而，最好的人是苹果公司的人。

# java - JAXB 给我： java.lang.IllegalArgumentException: is parameter must not be null

> ID：657091
> 
> 赞同：20
> 
> 时间：2009-03-18T05:41:59.650
> 
> 标签：java, jaxb

我正在使用 JAXB 将一些 XML 解组为 Java 对象：

我的代码看起来有点像这样：

```
InputStream testMsg = getClass().getResourceAsStream("TestDocumentEvent.xml");
Unmarshaller unmarshaller = JAXBContext.newInstance(DocumentEvent.class).createUnmarshaller();
DocumentEvent unmarshalled = (DocumentEvent) unmarshaller.unmarshal(testMsg); 
```

但是，当我运行此代码时，出现异常：

```
java.lang.IllegalArgumentException: is parameter must not be null 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-18T05:43:15.310

这是因为`InputStream`您传递给解组器（'is' 参数，geddit）为空，请检查资源名称是否正确。

# php - 脸书状态栏

> ID：657093
> 
> 赞同：2
> 
> 时间：2009-03-18T05:42:47.043
> 
> 标签：php, jquery, ajax, facebook

任何人都知道如何制作新facebook中的状态栏的好教程？底部的那个。看起来很酷

我在想它是用 ajax 或 jquery 编写的。但不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-17T14:51:15.427

以下是一些有用的链接/插件，可能会对您有所帮助：

[定位页脚](http://plugins.jquery.com/project/positionFooter)

[启用拖放功能（如应用程序）](http://docs.jquery.com/UI/Draggable)

[工具提示（悬停时）](http://plugins.jquery.com/project/tipsy)

对于与服务器的交互（对于新事件等），您可以使用[jQuery 中的 AJAX 功能](http://docs.jquery.com/Ajax)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T06:33:21.727

为了让它始终位于底部，这更多的是 CSS 而不是 javascript。如果你更具体，我认为你会得到更好的答案。例如，我希望答案围绕着聊天室在 Facebook 上的工作方式。是否每秒发送一次 javascript 请求以检查新消息？或者是否正在使用其他协议来获得即时消息？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T09:22:43.707

目前尚不清楚您在寻找什么：酒吧的设计或功能。如果您在谈论设计，您应该研究[css 定位](http://www.barelyfitz.com/screencast/html-training/css/positioning/)（绝对）。如果它是关于功能的，我想有某种 ajax javascript 每隔 x 秒检查一次是否有状态变化，如果有更深入并找出要加载的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-07T20:44:42.033

Soh Tanaka 刚刚发布了一个关于如何重新创建 Facebook 状态栏的精彩[分步教程：](http://www.sohtanaka.com/web-design/facebook-style-footer-admin-panel-part-1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-17T14:51:05.820

为什么不直接下载[Facebook 源代码](http://developers.facebook.com/opensource.php)并看看他们是如何做到的呢？他们开源了很多他们使用/创建/增强的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-16T12:44:47.843

我浏览了 jQuery 插件，并为您搜索了该主题。我所能找到的只是[这](http://www.west-wind.com/weblog/posts/388213.aspx)不是你想要的，但它是一个很好的起点。通过一些样式更改和一些调整，它可以很容易地看起来与 Facebook 栏完全一样。

不确定这是您正在寻找的答案类型，但我一直在寻找同样的东西，这段代码似乎至少显示了它是如何完成的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-17T14:21:28.353

这是另一个很好的起点：[http](http://www.ben-griffiths.com/project/jquery-position-footer/) ://www.ben-griffiths.com/project/jquery-position-footer/ 。如果我没记错的话，它适用于 FF & IE & Safari

# linq - 将 linq 与 Sharepoint 一起使用并处理对象

> ID：657095
> 
> 赞同：3
> 
> 时间：2009-03-18T05:43:50.237
> 
> 标签：linq, sharepoint

如何在以下查询中处理对 subWeb 的引用？

```
using (SPSite spSite = Utility.GetElevatedSite(_rootUrl))
{
    from SPWeb web in spSite.AllWebs
    where web.ServerRelativeUrl.ToLower() == path
    from SPWeb subWeb in web.Webs                            
    select subWeb
} 
```

如果 iam 已经在 Using 语句中包装了 spSite，我什至需要担心处置 subWeb 吗？

编辑：

在这种情况下调用垃圾收集是个好主意吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T06:14:42.817

不幸的是，你做到了。问题从 SPSite.AllWebs 属性开始。SPWeb.Web 属性也不安全。

阅读[这份非常详尽的参考资料](http://blogs.msdn.com/rogerla/archive/2008/02/12/sharepoint-2007-and-wss-3-0-dispose-patterns-by-example.aspx)，了解您需要担心处置 SharePoint 对象的情况。

（我建议将此添加到您的 SharePoint 备忘单中）。

结果，我觉得当前的 SharePoint 对象模型不能安全地与 LINQ 语法一起使用。

您的代码需要重新编写各种隐含循环，以便您可以显式处理所涉及的对象。

**编辑：** SPDisposeCheck 工具是一个命令行控制台应用程序，它将扫描您的 .NET 程序集并根据上述最佳实践指南警告您未处理的引用。一探究竟。

[http://code.msdn.microsoft.com/SPDisposeCheck](http://code.msdn.microsoft.com/SPDisposeCheck)

[http://blogs.msdn.com/sharepoint/archive/2008/11/12/announcing-spdisposecheck-tool-for-sharepoint-developers.aspx](http://blogs.msdn.com/sharepoint/archive/2008/11/12/announcing-spdisposecheck-tool-for-sharepoint-developers.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T05:46:00.733

您原始问题的技术答案是合格的“否”：`SPWeb`从 an 打开的所有对象都会`SPSite`在处置时自动`SPSite`处置。但是，在实践中，最好`SPWeb`在完成后立即处理它以减少内存压力，尤其是在使用这样的打开多个`SPWeb`对象的代码时。

在 C# 中为 LINQ 实现这种处置安全行为实际上非常简单。[您可以在这篇文章](http://solutionizing.net/2009/01/05/linq-for-spwebcollection-revisited-assafeenumerable/)中找到完整的详细信息，但简短的版本是 C# 迭代器可以为您处理处置。使用我的`AsSafeEnumerable()`扩展方法，您的代码相对安全，如下所示：

```
using (SPSite spSite = Utility.GetElevatedSite(_rootUrl))
{
    var sw = from SPWeb web in spSite.AllWebs.AsSafeEnumerable()
             where web.ServerRelativeUrl.ToLower() == path
             from SPWeb subWeb in web.Webs.AsSafeEnumerable()      
             select subWeb;
    foreach(SPWeb aSubWeb in sw)
    {
        // Do something
    }
} 
```

现在，我分配给 的查询结果`sw`是类型为 的惰性迭代器`IEnumerable<SPWeb>`。当您枚举该结果`SPWeb`时，每个将在枚举器移动到下一个项目时被释放。这意味着在循环之外使用该`SPWeb`引用或从它创建的任何 SP* 对象（等）是不安全的。在该块之外使用也不安全，因为迭代器将绑定到 now-disposed 。`SPList``foreach``sw``using``SPWebCollections``SPSite`

也就是说，像这样枚举所有网络（两次！）的代码非常昂贵。几乎可以肯定有一种更有效的方法可以实现这一点，只要使用`spSite.AllWebs[path]`而不是`from`/ `where`。

关于垃圾收集，这些对象需要处理，因为分配了 GC 甚至不知道的非托管内存。

最后，请注意您的“GetElevatedSite”实用程序。如果您`RunWithElevatedPrivileges`在帮助方法中使用来获得提升的，则通过将您的提升上下文`SPSite`返回可能会遇到许多问题。`SPSite`如果可能的话，我建议改用`SPSite`模拟 - 我的首选方法在[此处](http://solutionizing.net/2009/01/06/elegant-spsite-elevation/)描述。

# asp.net - ASP.NET MVC RC2 模板头在正文之后？

> ID：657097
> 
> 赞同：0
> 
> 时间：2009-03-18T05:46:12.447
> 
> 标签：asp.net, asp.net-mvc

当我安装 ASP.NET MVC RC2 时，我注意到模板已从 RC1 更改。现在，所有新视图在主要内容占位符之后都有标题占位符。为什么是这样？这对我来说似乎很不合逻辑，而且 RC1 绝对不是这种情况。我用谷歌搜索，但找不到任何关于这种变化的理由。你知道吗？

例子：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage" %>
<asp:Content ID="Content1" ContentPlaceHolderID="MainContent" runat="server">
    <h2>Rules</h2>
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="head" runat="server">
</asp:Content> 
```

请注意 ContentPlaceHolderID 为“head”的占位符如何位于底部？诡异的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T05:55:17.887

我不能说我在升级时注意到了它，但这应该没关系。这两个`<asp:Content>`部分由属性映射`ID`到它们在 中定义的位置`Site.master`。

一定要检查订单`Site.master`，但应该没问题。

如果你想改变它，你可以查看你的视图使用的 T4 模板。查看：

[t4-templates-in-asp.net-mvc](http://haacked.com/archive/2009/01/31/t4-templates-in-asp.net-mvc.aspx)

[t4-templates-a-quick-start-guide-for-asp-net-mvc-developers](http://blogs.msdn.com/webdevtools/archive/2009/01/29/t4-templates-a-quick-start-guide-for-asp-net-mvc-developers.aspx)

[覆盖-global-t4-templates-in-asp-net-mvc-project-with-per-project-templates](http://codebetter.com/blogs/david.hayden/archive/2009/01/29/overriding-global-t4-templates-in-asp-net-mvc-project-with-per-project-templates.aspx)

# python - 我在哪里可以获得用于 delphi 或 python 的免费 G SM 库/组件？

> ID：657100
> 
> 赞同：4
> 
> 时间：2009-03-18T05:47:08.077
> 
> 标签：python, delphi, gsm

我在哪里可以获得适用于**Delphi**或**Python**的免费 G​​SM 库？我可以用来在我的应用程序上发送和接收短信的库？

加思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T06:47:04.703

免费和开源[AsyncPro](http://sourceforge.net/projects/tpapro/) >

不是免费的，但组件有积极的发展[nrComm Lib](http://www.deepsoftware.com/nrcomm)

使用 SMS 网关的另一种解决方案，例如[ClickAtell](http://www.clickatell.com/)，您可以使用简单的 post 命令向网关 url 或 web 服务发送短信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-16T10:32:23.813

[在这里获取](http://sourceforge.net/projects/tpapro/)- 完全免费（以前是商业组件）：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-01T21:17:41.767

另一个带有 Python 接口的 SMS 网关是 TextMagic。

[在此处](https://stackoverflow.com/questions/716946/how-do-i-enable-sms-notifications-in-my-web-app/1071496#1071496)阅读我对类似问题的回复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-30T20:34:20.007

PyPi[搜索出现了几个有前途的 Python SMS 库](http://pypi.python.org/pypi?:action=search&term=sms&submit=search)。其中一些与 GSM 调制解调器通信，另一些通过网络 SMS 网关工作，甚至还有一个与 Apple 的突发运动传感器接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-16T14:51:40.023

我一直很喜欢使用我的索尼爱立信设备的[这个应用程序：](http://fma.sf.net/)

# asp.net - 是否可以在管道的早期处理和结束请求？

> ID：657104
> 
> 赞同：8
> 
> 时间：2009-03-18T05:50:11.783
> 
> 标签：asp.net, httpmodule, pipeline

我有一个将事件处理程序绑定到 EndRequest 的 HttpModule。

有没有办法在事件处理程序中处理请求？意思是，我不只是想运行代码并保持请求移动——我想阻止它死在轨道上，返回一个 200 状态代码，然后收工，而不是请求继续执行下一步管道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-18T06:43:14.497

`HttpContext.Current.ApplicationInstance.CompleteRequest();`

[文档](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.completerequest(vs.80).aspx)

# bash - 如何递归地将子目录添加到 PATH？

> ID：657108
> 
> 赞同：21
> 
> 时间：2009-03-18T05:53:30.200
> 
> 标签：bash, file, path

你怎么做呢？我的目录`code/`在工作中被组织在文件夹、子文件夹和子子文件夹中，所有这些（至少在理论上）都包含我想要定期运行的脚本或程序。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-03-18T06:06:08.797

在脚本的末尾，添加以下行：

```
PATH=${PATH}:$(find ~/code -type d | tr '\n' ':' | sed 's/:$//') 
```

这会将 ~/code 树中的每个目录附加到当前路径。我自己不喜欢这个想法，更喜欢只有几个目录保存我自己的可执行文件并明确列出它们，但每个目录都有自己的。

如果要排除所有隐藏的目录，则基本上需要删除具有序列的每一行`"/."`（以确保您不检查隐藏目录下的子目录）：

```
PATH=${PATH}:$(find ~/code -type d | sed '/\/\\./d' | tr '\n' ':' | sed 's/:$//') 
```

这将阻止您获取诸如此类的目录`~/code/level1/.hidden/level3/`（即，一旦检测到子树被隐藏，它就会停止在子树中搜索）。如果您只想将隐藏目录拒之门外，但仍允许在其下使用非隐藏目录，请使用：

```
PATH=${PATH}:$(find ~/code -type d -name '[^\.]*' | tr '\n' ':' | sed 's/:$//') 
```

这将允许`~/code/level1/.hidden2/level3/`但不允许`~/code/level1/.hidden2/.hidden3/`，因为`-name`只检查文件的基本名称，而不是完整路径名。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-03-18T07:27:12.127

以下内容是正确的，包括修剪隐藏目录及其子目录以及使用换行符或其他空格正确处理名称：

```
export PATH="${PATH}$(find ~/code -name '.*' -prune -o -type d -printf ':%p')" 
```

我使用类似的技巧来自动设置`CLASSPATH`s.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T05:56:20.270

就像是

```
my_path=$(find $root -type d | tr '\n' ':') 
```

或者

```
my_path=$(find $root -type d -printf '%p:') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-20T12:56:52.153

如果您真的需要走这条路，您可以尝试将 PATH 列表最小化：删除不包含可执行文件的文件夹。当然，代价是更多的统计数据。;-/

```
PATH=$PATH$(find ~/code -name '.*' -prune -o -type f -a -perm /u+x -printf ':%h\n' | sort | uniq | tr -d '\n') 
```

我会避免在每个 shell 生成时都这样做。应该使用某种缓存。例如，将此行添加到您的 ~/.bashrc：

```
[ -s ~/.codepath ] && export PATH=$PATH$(<~/.codepath) 
```

并运行

```
find ~/code -name '.*' -prune -o -type f -a -perm /u+x -printf ':%h\n' |sort |uniq |tr -d '\n' > ~/.codepath 
```

只有当您知道某些事情确实发生了变化时。

编辑：这是一个没有丢失 -printf 的重写

```
find ~/code -name '.*' -prune -o -type f -a -perm /u+x -print | sed 's@/[^/]\+$@:@' | sort | uniq | tr -d '\n' | sed 's/^/:/; s/:$//' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T06:05:44.727

在 bash 4.0 中，您可以只使用新支持的`**`运算符。

您必须先在某些设备上启用它：

```
shopt -s globstar 
```

然后你可以做

```
echo ** 
```

它递归地回显当前目录的后代的所有文件。

请注意，有时它确实倾向于解决过于复杂的目录，因此请在重复出现的最低点使用 **。

```
echo **/ 
```

巧合的是，递归地发出所有目录名称，并且仅发出目录名称。（不包括当前目录）

```
echo ./**/ 
```

包括当前目录。（顺便说一下，它也会跳过隐藏目录）

因此，这应该适合创建路径字符串：

```
echo ./**/ | sed 's/\s\s*/:/g' 
```

如果你不想要相对路径，

```
echo $PWD/**/ | sed 's/\s\s*/:/g' 
```

## 确认

从您对其他帖子之一的评论看来，您想要的行为很像“Ack”提供的行为。如果您打算使用 find + grep 组合，则此工具通常更有效且更易于用于此任务。

*   [确认](http://betterthangrep.com/)

例子：

```
# search for 'mystring' in all c++ files recursively ( excluding SCM dirs and backup files ) 
ack  "mystring" --type=cpp 

# finds all text files not in an SCM dir ( recursively) and not a backup using type heuristics. 
ack -f --type=text 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-01-17T20:50:54.467

我也一直在寻找解决这个问题的方法。如果 bash 有办法说对于某些路径，您希望它递归地搜索文件，那就太好了。例如

```
PATH="$PATH:/usr/local/bin:~/bin**" 
```

where`~/bin`将搜索该目录及其所有子目录，而不会弄乱您的`PATH`变量。

由于这没有实现，我的临时解决方案是将所有内容放在我的 bin 目录中，然后创建另一个目录“bindir”，其中包含指向“bin”中实际可执行文件的符号链接，但它们整齐地排列在子目录中，以便更容易找到。

我唯一的问题是我是否应该使用硬链接而不是符号链接。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T06:32:19.310

我有一个`bin`目录`$HOME/bin`，它会获取我构建的任何程序（或脚本，或程序或脚本的符号链接）的已安装副本。它目前有近 600 个命令（`ls | wc -l`说 604，但由于各种原因有十几个子目录）。

当我测试一个程序时，我会在我构建它的地方执行它；一旦我暂时完成了测试，我`acquire`就会使用我的`acquire`脚本来复制文件并设置它的权限。

这给我留下了一个漂亮整洁的配置文件（我不使用`.bashrc`；我宁愿在登录 shell 启动时进行一次设置，并且子 shell 继承工作环境而不必`.bashrc`再次解析），但是一个相当笨拙的`bin`目录. 例如，它避免了每次 shell 启动时重置 PATH 的成本，并且考虑到我的路径设置代码有多复杂，这也是一样的！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T10:34:06.953

像这样的东西：

```
_path="$(
  find <path> -name '.*' -prune -o -type d -print
  )" 

[[ $_path ]] && _path="${_path//$'\n'/:}" PATH="$PATH:${_path%:}" 
```

如果你有 GNU find 你可以`-printf ':%p'`直接使用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-09T19:34:10.890

试试这个方法：
`export PATH="$PATH:$(du "~/code/" | cut -f2 | tr '\n' ':' | sed 's/:*$//')"`
这会将 ~/code 本身及其所有子目录添加到 $PATH
说明：
-`du`将显示每行的所有子目录信息
-`cut -f2`将提取第二列，即子目录的名称
-`tr '\n' ':'`将更改每个链接中断成一个冒号。这会将所有行合并为一行，并且子目录由冒号分隔
-`sed 's/:*$//'`将删除最后一个冒号

# visual-c++ - 如何制作项目exe，如何包含所有运行时dll文件

> ID：657109
> 
> 赞同：0
> 
> 时间：2009-03-18T05:53:33.693
> 
> 标签：visual-c++

如何在安装项目中包含 Windows 运行时 dll 文件。

项目必须执行的机器中没有 vc++ 6.0 软件。

或者给我提示如何在 vc++ 6.0 中进行项目设置（EXE），我正在使用创建安装程序，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T06:01:06.750

您可以修改项目设置以静态链接到 C 运行时（我假设这就是您所说的 windows 运行时的意思？）。静态链接标志是：

*   多线程静态链接 (/MT)
*   多线程调试静态链接 (/MTd)

抱歉，我用VC6.0有一段时间了，所以我不得不检查GUI。您可以在项目设置、C++ 选项卡、代码生成组合框、“使用运行时库”中找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T06:03:12.017

添加到 Cannonade 已经说过的内容，如果您是通过 Visual Studio 进行的，那么可以通过项目设置->常规页面->将 MFC 用作静态库来完成。这样，您创建的 exe 就可以在任何 Windows 机器上运行。

# c# - 为什么在 C# 网络中使用 TCPListner 时需要读取器/写入器流？

> ID：657112
> 
> 赞同：2
> 
> 时间：2009-03-18T05:57:39.783
> 
> 标签：c#

为什么在 C# 网络中使用 TCPListner 时需要读取器/写入器流？

例子 ：

```
TcpClient client = server.AcceptTcpClient();
client.ReceiveTimeout = 75000;
Stream s = client.GetStream();
StreamReader reader = new StreamReader(s);
StreamWriter writer = new StreamWriter(s);
writer.AutoFlush = true; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T07:07:41.440

如果你想处理文本而不是二进制数据，你只需要`StreamReader`/ 。`StreamWriter`

套接字自然地处理二进制数据，这就是`TcpClient`公开 Stream 的原因。Stream 是二进制抽象，因此它的 Read/Write 方法处理字节数组。`TextReader`/ `TextWriter`（从中派生出`StreamReader`/ `StreamWriter`）处理文本 - 他们的方法处理字符串和字符数组。

`StreamReader`/基本上包装一个流并为您在文本和二进制数据之间`StreamWriter`进行转换（通过一个）。`Encoding`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T06:01:38.933

你不需要它们。如果您不喜欢 Tcp 包装类，可以使用原始套接字。看一眼`System.Net.Sockets.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T06:58:05.987

TcpListener 被设计为使用流有几个原因。

首先，它使 API 与 BCL 中的其他中高级（与使用原始套接字相比）API 保持一致。例如，处理 File IO 的标准方法是使用 Streams。

其次，流为 TCP 通道的读写提供了巨大的优势。诚然，当您处理非常简单的案例时，它们会使生活稍微困难一点，但只是稍微困难一点。但是，当您开始查看更复杂的场景时，它们会使一切变得更加简单。

例如，如果 Tcp API 不使用流，那么在连接上压缩流量（只需通过 GZipStream 或类似的方式传递写入器+读取器）会更困难，或者更难以加密所有您的网络通讯。流提供了大量机会，可以轻松扩展您的算法以处理未来可能出现的情况。

# reporting-services - 在VS2005中部署报表项目需要什么权限？

> ID：657120
> 
> 赞同：0
> 
> 时间：2009-03-18T06:03:57.193
> 
> 标签：reporting-services

当我尝试将报告部署到新安装的 SSRS 2005 服务器（远程服务器）时，我在 VS2005 中收到以下错误：

授予用户“CEINTERNAL\IUSR_COMPELLENT01”的权限不足以执行此操作。

**在VS2005中部署报表项目需要什么权限？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T08:35:36.477

将管理员或发布者角色分配给 CEINTERNAL\IUSR_COMPELLENT01 到 Report Manager 层次结构中的根文件夹。

希望这可以帮助，

账单

# bash - 在终端命令行上移动光标的最快方法？

> ID：657130
> 
> 赞同：181
> 
> 时间：2009-03-18T06:07:38.527
> 
> 标签：bash, terminal, window

在终端中给定的很长的命令行上移动的最佳方式是什么？

假设我使用箭头键或`Ctrl`-`R`来获取这个长命令行：

```
./cmd --option1 --option2 --option3 --option4 --option5 --option6 --option7 --option8 --option9 --option10 --option11 --option12 --option13 --option14 --option15 --option16 --option17 --option18 --option19 --option20 --option21 --option22 --option23 --option24 --option25 --option26 --option27 --option28 --option29 --option30 --option31 --option32 --option33 --option34 --option35 --option36 --option37 --option38 --option39 --option40 --option41 --option42 --option43 --option44 --option45 --option46 --option47 --option48 --option49 --option50 
```

现在我需要移动（从行首或行尾开始）光标`--option25`以修改那里的内容。

到达那里最快的方法是什么？我通常做的是`Ctrl`-`A`从头开始​​，然后反复`Alt`-`F`逐字前进（或`Ctrl`-`E`走到尽头，然后`Alt`-`B`然后倒退）。但是排长队需要太多时间。必须有一种方法可以搜索并直接跳转到我需要修改的部分，例如`option25`？

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-08-17T16:58:12.933

需要明确的是，您不想要“在**终端**命令行上移动光标的快速方法”。您真正想要的是一种在**shell**程序中导航命令行的快速方法。

[例如， Bash](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29)是非常常见的 shell。它使用[Readline](http://en.wikipedia.org/wiki/GNU_readline)库来实现命令行输入。可以这么说，了解 Readline 绑定非常方便，因为它不仅用于 bash。例如，gdb 也使用 Readline 来处理输入。

在 Readline 文档中，您可以找到所有与导航相关的绑定（以及更多）： [http ://www.gnu.org/software/bash/manual/bash.html#Readline-Interaction](http://www.gnu.org/software/bash/manual/bash.html#Readline-Interaction)

如果上面的链接关闭，则进行简短的复制粘贴：

基本必需品

*   Ctrl-b 后退一个字符。
*   Ctrl-f 向前移动一个字符。
*   [DEL] 或 [Backspace] 删除光标左侧的字符。
*   Ctrl-d 删除光标下的字符。
*   Ctrl-_ 或 Cx Cu 撤消上一个编辑命令。您可以一直撤消到空行。

移动

*   Ctrl-a 移动到行首。
*   Ctrl-e 移动到行尾。
*   Meta-f 向前移动一个单词，其中一个单词由字母和数字组成。
*   Meta-b 向后移动一个单词。
*   Ctrl-l 清除屏幕，在顶部重新打印当前行。

杀戮和拉扯

*   Ctrl-k 杀死从当前光标位置到行尾的文本。
*   Md 从光标终止到当前单词的结尾，或者如果在单词之间，则到下一个单词的结尾。字边界与 Mf 使用的相同。
*   M-[DEL] 从光标终止当前单词的开头，或者如果在单词之间，则终止到前一个单词的开头。字边界与 Mb 使用的相同。
*   Ctrl-w 从光标处杀死到前一个空格。这与 M- 不​​同，因为单词边界不同。
*   Ctrl-y 将最近删除的文本拉回光标处的缓冲区。
*   我的 旋转杀戮环，然后拉出新的顶部。仅当先前的命令是 Cy 或 My 时，您才能执行此操作。

M 是元密钥。对于 Max OS X 终端，您可以为此在设置/键盘中启用“使用选项作为元键”。对于 Linux，它更复杂。

**更新**

另请注意，Readline 可以在两种模式下运行：

*   emacs 模式（默认）
*   [**vi**模式](https://tiswww.case.edu/php/chet/readline/readline.html#SEC22)

要将 Bash 切换为使用 vi 模式：

```
$ set -o vi 
```

我个人更喜欢 vi 模式，因为我使用 vim 进行文本编辑。

**奖金**

在 macOS 终端应用程序（以及 iTerm 中）中，您可以 Option-Click 移动光标（光标将移动到单击位置）。这甚至适用于内部`vim`。

* * *

## 回答 #2

> 赞同：118
> 
> 时间：2009-05-13T11:01:13.873

由于这还没有关闭，这里有更多的选择。

*   使用`Ctrl`+`x`后跟`Ctrl`+在由or`e`指定的编辑器中打开当前行或（按该顺序尝试）。`$FCEDIT``$EDITOR``emacs`
*   如果您之前运行过该命令，请点击`Ctrl`+`r`进行反向历史搜索并输入`option25`（在本例中）。将显示该行。此时点击`Tab`开始编辑。
*   使用带有`s///`修饰符的历史扩展。例如`!-2:s/--option25/--newoption/`，将重新运行倒数第二个命令，但替换 option25。要修改最后一个`./cmd`命令，请使用以下`!string`语法：`!./cmd:s/--option25/--newoption/`
    可以使用任何分隔符代替 / 在替换中。
*   如果编辑上一行，您可以使用快速替换：`^--option25^--newoption`
*   字符搜索。Pax 提到了这一点，可以在常规 emacs 模式下使用`Ctrl`+`]`进行前向搜索，而`Ctrl`+ `Alt`+`]`用于后向搜索。

我推荐第二种选择。`Ctrl`+`r`非常方便快捷，无需与编辑器混为一谈，并且您可以在命令运行之前看到结果（与历史扩展不同）。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-07-21T12:44:50.680

按住 Option 键并单击您希望光标移动的位置，终端会将光标冲到该精确位置。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2009-03-18T06:21:31.270

我更喜欢 vi 编辑模式（因为这些击键现在嵌入到我的脊髓中（大脑根本不使用），以及 WordStar 3.3 中的 CTRL-K、CTRL-X :-)。您可以使用命令行`set -o vi`来激活它（并`set -o emacs`恢复）。

在 Vi 中，它会是（ESC-K 当然首先要排好队）“ `f5;;B`”（不带双引号）。

当然，您必须了解要摆脱这种情况的风险。基本上，它是

```
f5 to find the first occurrence of "5" (in --option5).
;  to find the next one (in --option15).
;  to find the next one (in --option25).
B  to back up to the start of the word. 
```

让我们看看emacs爱好者能否想出更好的解决方案，少于5次击键（虽然我不想引发宗教战争）。

您是否考虑过是否愿意将这个长得可怕的命令放入脚本中？:-)

实际上，我可以比这更好：" `3f5B`" 找到第三次出现的 "5"，然后返回到单词的开头。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-05-11T11:28:17.827

使用 Meta-b / Meta-f 分别向后/向前移动一个单词。

在 OSX 中，Meta 翻译为 ESC，这很糟糕。

但或者，您可以打开终端首选项 -> 设置 -> 配置文件 -> 键盘并选中“使用选项作为元键”

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-03-18T12:46:15.590

运行一次命令后，运行`fc`

它将`$EDITOR`使用上一个命令启动，然后您可以使用常规编辑器修改命令。当您保存并退出时，该文件将被执行。

..但是，正如 Pax 所说 - 命令行对于编辑荒谬的长行并不是特别好 - 为什么不将命令变成脚本呢？

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-01-06T06:25:51.707

如果您想向前移动一定数量的单词，请点击`M-<n>`（`M-`用于 Meta，通常是转义键）然后点击一个数字。这会向 readline 发送一个重复参数，因此您可以重复任何您想要的命令 - 如果您想前进然后点击`M-<n> M-f`，光标将向前移动`<n>`字数。

例如

```
 $|echo "two three four five six seven"
 $ M-4
 (arg: 4) echo "two three four five six seven"
 $ M-f
 $ echo "two three four| five six seven" 
```

因此，对于您的示例，从您将要点击的行首的光标开始，`M-26 M-f`您的光标将位于`--option25|`- 或 - 从行尾开始，`M-26 M-b`您的光标将位于`--|option25`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-20T06:59:06.143

增量历史搜索

在终端输入：

```
gedit  ~/.inputrc 
```

然后复制粘贴并保存

```
"\e[A": history-search-backward
"\e[B": history-search-forward
"\e[C": forward-char
"\e[D": backward-char 
```

查找上一个命令所需要做的就是输入说前 2 或 3 个字母，然后向上箭头将带您快速到达那里说我想要：

```
for f in *.mid ; do timidity "$f"; done 
```

我需要做的就是输入

```
fo 
```

并点击向上箭头命令将很快出现

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-18T18:19:40.687

一种选择是使用`M-x shell`in `emacs`。这提供了所有的编辑工具和击键`emacs`，因此`C-s`可以用于搜索文本`option25`，例如。

（但如果有人能指出我良好的搜索和编辑设施，我仍然更喜欢使用真正的终端外壳。）

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-10-31T04:21:27.230

使用选项键并单击要使用鼠标或触摸板放置光标的位置是您使用的是 Mac 内置终端。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-13T12:49:57.793

## 使用鼠标

有时，编辑命令行的最简单方法是使用鼠标。以前的一些答案给出了在 $EDITOR 中打开当前行的命令。对我（带有 grml 配置的 zhs）来说，这种组合是`Alt+e`. 如果您在编辑器中启用鼠标，则可以使用它。

要在 Vim 中启用鼠标，请将其添加到 ~/.vimrc

```
set mouse=a
set ttymouse=xterm2 
```

如果您想在终端中进行文本选择（而不是将鼠标单击传递给 vim），请在单击时按住 Shift；当然，这是特定于终端的。

系统管理员不应该害怕鼠标。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-14T13:00:00.627

在 Cygwin 中，您可以通过右键单击窗口来激活此类功能。在弹出窗口中，选择*选项...* -> 鼠标 -> 激活*点击放置命令行光标*-> 应用。

从现在开始，只需在命令行中的某个位置单击鼠标左键即可将光标放置在那里。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-29T18:46:53.143

第一：export EDITOR='nano -m'

然后：按顺序CTRL+X CTRL+E。

您当前的行将在启用鼠标的 nano 编辑器中打开。您可以单击文本的任何部分并进行编辑

然后 CTRL+X 退出， y 确认保存。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-31T05:06:06.697

我制作了一个脚本，使命令行**光标在鼠标单击时移动**：

1.  启用 xterm 鼠标跟踪报告
2.  设置 readline 绑定以使用点击生成的转义序列

可以在[github上找到](https://github.com/tinmarino/mouse_xterm/blob/master/mouse.sh)

[其他帖子的](https://stackoverflow.com/a/55437976/2544873)更多信息

`echo -e "\e[?1000;1006;1015h" # Enable tracking`如果使用鼠标单击时在终端上打印转义序列，则将起作用

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-16T21:01:00.933

它可能不是最快的，但这需要在这里，**一些关于[ANSI 光标移动的阅读](http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html)**

*ANSI 转义序列允许您随意在屏幕上移动光标。这对于由 shell 脚本生成的全屏**用户界面更有用，但也可以在 prompts 中使用**。运动转义序列如下：*

```
- Position the Cursor:
  \033[<L>;<C>H
     Or
  \033[<L>;<C>f
  puts the cursor at line L and column C.
- Move the cursor up N lines:
  \033[<N>A
- Move the cursor down N lines:
  \033[<N>B
- Move the cursor forward N columns:
  \033[<N>C
- Move the cursor backward N columns:
  \033[<N>D

- Clear the screen, move to (0,0):
  \033[2J  or \033c
- Erase to end of line:
  \033[K

- Save cursor position:
  \033[s
- Restore cursor position:
  \033[u 
```

*(...)*

*尝试在提示符处输入以下代码行（如果输入时提示符在终端下几行，它的作用会更清楚一些）：`echo -en "\033[7A\033[1;35m BASH \033[7B\033[6D"`这应该将光标移动到屏幕上七行，打印单词“ BASH "，然后返回开始产生正常提示的位置。*

* * *

**例子**：

将光标向后移动 7 行：

```
echo -e "\033[7A" 
```

将光标移动到第 10 行第 5 列：

```
echo -e "\033[10;5H" 
```

快速回显[颜色代码](http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html)，为程序着色：

```
echo -e "\033[35;42m" ; ifconfig 
```

# c# - 如何使用 C# 读取 Excel 文件的数据？

> ID：657131
> 
> 赞同：70
> 
> 时间：2009-03-18T06:08:10.600
> 
> 标签：c#, excel

如何使用 C# 读取 Excel 文件？我打开一个 Excel 文件进行阅读并将其复制到剪贴板以搜索电子邮件格式，但我不知道该怎么做。

```
FileInfo finfo;
Excel.ApplicationClass ExcelObj = new Excel.ApplicationClass();
ExcelObj.Visible = false;

Excel.Workbook theWorkbook;
Excel.Worksheet worksheet;

if (listView1.Items.Count > 0)
{
    foreach (ListViewItem s in listView1.Items)
    {
        finfo = new FileInfo(s.Text);
        if (finfo.Extension == ".xls" || finfo.Extension == ".xlsx" || finfo.Extension == ".xlt" || finfo.Extension == ".xlsm" || finfo.Extension == ".csv")
        {
            theWorkbook = ExcelObj.Workbooks.Open(s.Text, 0, true, 5, "", "", true, Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, false, false);

            for (int count = 1; count <= theWorkbook.Sheets.Count; count++)
            {
                worksheet = (Excel.Worksheet)theWorkbook.Worksheets.get_Item(count);
                worksheet.Activate();
                worksheet.Visible = false;
                worksheet.UsedRange.Cells.Select();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2009-03-18T07:04:46.970

好的，

关于 Excel VSTO 编程的一个更难掌握的概念是，您不会像数组一样引用单元格，`Worksheet[0][0]`不会给您单元格 A1，它会在您身上出错。即使您在 Excel 打开时在 A1 中键​​入，您实际上是在将数据输入到 Range A1 中。因此，您将单元格称为命名范围。这是一个例子：

```
Excel.Worksheet sheet = workbook.Sheets["Sheet1"] as Excel.Worksheet; 
Excel.Range range = sheet.get_Range("A1", Missing.Value) 
```

您现在可以按字面意思输入：

```
range.Text // this will give you the text the user sees
range.Value2 // this will give you the actual value stored by Excel (without rounding) 
```

如果你想做这样的事情：

```
Excel.Range range = sheet.get_Range("A1:A5", Missing.Value)

if (range1 != null)
     foreach (Excel.Range r in range1)
     {
         string user = r.Text
         string value = r.Value2

     } 
```

可能有更好的方法，但这对我有用。

您需要使用`Value2`而不是使用的原因`Value`是因为该`Value`属性是参数化的，而 C# 尚不支持它们。

至于清理代码，我会在明天上班时发布，我没有代码，但它非常样板。您只需按照创建对象的相反顺序关闭和释放对象。您不能使用`Using()`块，因为 Excel.Application 或 Excel.Workbook 没有实现`IDisposable`，如果您不清理，您将在内存中留下一个悬挂的 Excel 对象。

笔记：

*   如果您不设置`Visibility`属性 Excel 不显示，这可能会让您的用户感到不安，但如果您只想提取数据，那可能就足够了
*   您可以使用 OleDb，这也可以。

我希望这能让你开始，如果你需要进一步澄清，请告诉我。我会发一个完整的

这是一个完整的示例：

```
using System;
using System.IO;
using System.Reflection;
using NUnit.Framework;
using ExcelTools = Ms.Office;
using Excel = Microsoft.Office.Interop.Excel;

namespace Tests
{
    [TestFixture]
    public class ExcelSingle
    {
        [Test]
        public void ProcessWorkbook()
        {
            string file = @"C:\Users\Chris\Desktop\TestSheet.xls";
            Console.WriteLine(file);

            Excel.Application excel = null;
            Excel.Workbook wkb = null;

            try
            {
                excel = new Excel.Application();

                wkb = ExcelTools.OfficeUtil.OpenBook(excel, file);

                Excel.Worksheet sheet = wkb.Sheets["Data"] as Excel.Worksheet;

                Excel.Range range = null;

                if (sheet != null)
                    range = sheet.get_Range("A1", Missing.Value);

                string A1 = String.Empty;

                if( range != null )
                    A1 = range.Text.ToString();

                Console.WriteLine("A1 value: {0}", A1);

            }
            catch(Exception ex)
            {
                //if you need to handle stuff
                Console.WriteLine(ex.Message);
            }
            finally
            {
                if (wkb != null)
                    ExcelTools.OfficeUtil.ReleaseRCM(wkb);

                if (excel != null)
                    ExcelTools.OfficeUtil.ReleaseRCM(excel);
            }
        }
    }
} 
```

明天我将发布 ExcelTools 中的函数，我也没有那个代码。

编辑：正如所承诺的，这里是您可能需要的 ExcelTools 中的函数。

```
public static Excel.Workbook OpenBook(Excel.Application excelInstance, string fileName, bool readOnly, bool editable,
        bool updateLinks) {
        Excel.Workbook book = excelInstance.Workbooks.Open(
            fileName, updateLinks, readOnly,
            Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
            Type.Missing, editable, Type.Missing, Type.Missing, Type.Missing,
            Type.Missing, Type.Missing);
        return book;
    }

public static void ReleaseRCM(object o) {
        try {
            System.Runtime.InteropServices.Marshal.ReleaseComObject(o);
        } catch {
        } finally {
            o = null;
        }
    } 
```

坦率地说，如果您使用 VB.NET，这些东西会容易得多。它在 C# 中，因为我没有编写它。VB.NET 可以很好地处理选项参数，而 C# 没有，因此 Type.Missing。一旦你连续输入两次 Type.Missing，你就会尖叫着跑出房间！

至于你的问题，你可以尝试以下：

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.find(VS.80).aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.find(VS.80).aspx)

当我从会议回来时，我会发布一个例子......干杯

编辑：这是一个例子

```
range = sheet.Cells.Find("Value to Find",
                                                 Type.Missing,
                                                 Type.Missing,
                                                 Type.Missing,
                                                 Type.Missing,
                                                 Excel.XlSearchDirection.xlNext,
                                                 Type.Missing,
                                                 Type.Missing, Type.Missing);

range.Text; //give you the value found 
```

这是受此[站点](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.find(VS.80).aspx)启发的另一个示例：

```
 range = sheet.Cells.Find("Value to find", Type.Missing, Type.Missing,Excel.XlLookAt.xlWhole,Excel.XlSearchOrder.xlByColumns,Excel.XlSearchDirection.xlNext,false, false, Type.Missing); 
```

它有助于理解参数。

PS 我是那些喜欢学习 COM 自动化的怪人之一。所有这些代码都来自我为工作而编写的工具，该工具需要我每周一处理来自实验室的 1000 多个电子表格。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-28T09:08:19.053

您可以使用`Microsoft.Office.Interop.Excel`程序集来处理 excel 文件。

1.  右键单击您的项目并转到`Add reference`. 添加 Microsoft.Office.Interop.Excel 程序集。
2.  包括`using Microsoft.Office.Interop.Excel;`使用汇编。

这是示例代码：

```
 using Microsoft.Office.Interop.Excel;

    //create the Application object we can use in the member functions.
    Microsoft.Office.Interop.Excel.Application _excelApp = new Microsoft.Office.Interop.Excel.Application();
    _excelApp.Visible = true;

    string fileName = "C:\\sampleExcelFile.xlsx";

    //open the workbook
    Workbook workbook = _excelApp.Workbooks.Open(fileName,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing);

    //select the first sheet        
    Worksheet worksheet = (Worksheet)workbook.Worksheets[1];

    //find the used range in worksheet
    Range excelRange = worksheet.UsedRange;

    //get an object array of all of the cells in the worksheet (their values)
    object[,] valueArray = (object[,])excelRange.get_Value(
                XlRangeValueDataType.xlRangeValueDefault);

    //access the cells
    for (int row = 1;  row <= worksheet.UsedRange.Rows.Count; ++row)
    {
        for (int col = 1; col <= worksheet.UsedRange.Columns.Count; ++col)
        {
            //access each cell
            Debug.Print(valueArray[row, col].ToString());
        }
    }

    //clean up stuffs
    workbook.Close(false, Type.Missing, Type.Missing);
    Marshal.ReleaseComObject(workbook);

    _excelApp.Quit();
    Marshal.FinalReleaseComObject(_excelApp); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-03-18T06:13:25.957

为什么不创建 OleDbConnection？互联网上有很多可用的资源。这是一个例子

```
OleDbConnection con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source="+filename+";Extended Properties=Excel 8.0");
con.Open();
try
{
     //Create Dataset and fill with imformation from the Excel Spreadsheet for easier reference
     DataSet myDataSet = new DataSet();
     OleDbDataAdapter myCommand = new OleDbDataAdapter(" SELECT * FROM ["+listname+"$]" , con);
     myCommand.Fill(myDataSet);
     con.Close();
     richTextBox1.AppendText("\nDataSet Filled");

     //Travers through each row in the dataset
     foreach (DataRow myDataRow in myDataSet.Tables[0].Rows)
     {
          //Stores info in Datarow into an array
          Object[] cells = myDataRow.ItemArray;
          //Traverse through each array and put into object cellContent as type Object
          //Using Object as for some reason the Dataset reads some blank value which
          //causes a hissy fit when trying to read. By using object I can convert to
          //String at a later point.
          foreach (object cellContent in cells)
          {
               //Convert object cellContect into String to read whilst replacing Line Breaks with a defined character
               string cellText = cellContent.ToString();
               cellText = cellText.Replace("\n", "|");
               //Read the string and put into Array of characters chars
               richTextBox1.AppendText("\n"+cellText);
          }
     }
     //Thread.Sleep(15000);
}
catch (Exception ex)
{
     MessageBox.Show(ex.ToString());
     //Thread.Sleep(15000);
}
finally
{
     con.Close();
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-08-17T06:52:41.753

```
try
        {
            DataTable sheet1 = new DataTable("Excel Sheet");
            OleDbConnectionStringBuilder csbuilder = new OleDbConnectionStringBuilder();
            csbuilder.Provider = "Microsoft.ACE.OLEDB.12.0";
            csbuilder.DataSource = fileLocation;
            csbuilder.Add("Extended Properties", "Excel 12.0 Xml;HDR=YES");
            string selectSql = @"SELECT * FROM [Sheet1$]";
            using (OleDbConnection connection = new OleDbConnection(csbuilder.ConnectionString))
            using (OleDbDataAdapter adapter = new OleDbDataAdapter(selectSql, connection))
            {
                connection.Open();
                adapter.Fill(sheet1);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        } 
```

这对我有用。请尝试一下，让我知道查询。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-18T10:37:18.583

首先，重要的是要了解“打开 Excel 文件进行阅读并将其复制到剪贴板......”的意思。

这非常重要，因为您可以通过多种方式做到这一点，这取决于您打算做什么。让我解释：

1.  如果您想读取一组数据并将其复制到剪贴板并且您知道数据格式（例如列名），我建议您使用**OleDbConnection**打开文件，这样您可以将 xls 文件内容视为数据库表，因此您可以使用 SQL 指令读取数据并根据需要处理数据。

2.  如果您想使用 Excel 对象模型对数据进行操作，请按照您开始的方式打开它。

3.  有时可以将 xls 文件视为一种 csv 文件，有诸如[File Helpers](http://www.filehelpers.com/)之类的工具允许您通过将结构映射到任意对象上以简单的方式处理和打开 xls 文件。

另一个重点是文件的 Excel 版本。

不幸的是，我在所有方面都拥有使用 Office 自动化的丰富经验，即使受限于应用程序自动化、数据管理和插件等概念，通常我建议仅作为最后的手段，使用 Excel 自动化或 Office 自动化来读取数据；只是如果没有更好的方法来完成这项任务。

就资源成本而言，使用自动化可能会影响性能，可能涉及与安全性等相关的其他问题，最后但并非最不重要的是，使用 COM 互操作并不是那么“免费”。所以我的建议是思考和分析您需要的情况，然后采取更好的方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-05T05:27:58.693

使用 OLEDB Connection 与 excel 文件进行通信。它给出了更好的结果

```
using System.Data.OleDb;

                string physicalPath = "Your Excel file physical path";
                OleDbCommand cmd = new OleDbCommand();
                OleDbDataAdapter da = new OleDbDataAdapter();
                DataSet ds = new DataSet();
                String strNewPath = physicalPath;
                String connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + strNewPath + ";Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=2\"";
                String query = "SELECT * FROM [Sheet1$]"; // You can use any different queries to get the data from the excel sheet
                OleDbConnection conn = new OleDbConnection(connString);
                if (conn.State == ConnectionState.Closed) conn.Open();
                try
                {
                    cmd = new OleDbCommand(query, conn);
                    da = new OleDbDataAdapter(cmd);
                    da.Fill(ds);

                }
                catch
                {
                    // Exception Msg 

                }
                finally
                {
                    da.Dispose();
                    conn.Close();
                } 
```

输出数据将存储在数据集中，使用数据集对象可以轻松访问数据。希望这可能会有所帮助

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-02-02T19:40:42.177

这是 2020 年的答案 - 如果您不需要支持较旧的 .xls 格式（所以在 2003 年之前），您可以使用：

*   [LightweightExcelReader](https://github.com/ChrisHodges/LightweightExcelReader)可访问特定单元格，或通过电子表格中的所有数据游标。

或者

*   [ExcelToEnumerable](https://github.com/ChrisHodges/ExcelToEnumerable)如果要将电子表格数据映射到对象列表。

优点：

*   **性能**- 在撰写本文时（读取 .xlsx 文件的最快方式）[ [https://github.com/ChrisHodges/ExcelToEnumerable/wiki/Performance]](https://github.com/ChrisHodges/ExcelToEnumerable/wiki/Performance])。
*   **简单**- 比[OLE DB](https://en.wikipedia.org/wiki/OLE_DB)或[OpenXml 更简洁](https://www.nuget.org/packages/DocumentFormat.OpenXml/)

缺点：

*   **LightweightExcelReader**和**ExcelToEnumerable**都不支持 .xls 文件。

*免责声明：*我是 LightweightExcelReader 和 ExcelToEnumerable 的作者

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-03-04T11:25:46.640

使用OlebDB，我们可以很容易地用C#读取excel文件，这是使用Web-Form时的代码，其中FileUpload1是文件上传工具

```
 string path = Server.MapPath("~/Uploads/");
  if (!Directory.Exists(path))
{
    Directory.CreateDirectory(path);
}
//get file path
filePath = path + Path.GetFileName(FileUpload1.FileName);
//get file extenstion
string extension = Path.GetExtension(FileUpload1.FileName);
//save file on "Uploads" folder of project
FileUpload1.SaveAs(filePath);

string conString = string.Empty;
//check file extension
switch (extension)
{
    case ".xls": //Excel 97-03.
        conString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=Excel03ConString;Extended Properties='Excel 8.0;HDR=YES'";
        break;
    case ".xlsx": //Excel 07 and above.
        conString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=Excel07ConString;Extended Properties='Excel 8.0;HDR=YES'";
        break;
}

//create datatable object
DataTable dt = new DataTable();
conString = string.Format(conString, filePath);

//Use OldDb to read excel
using (OleDbConnection connExcel = new OleDbConnection(conString))
{
    using (OleDbCommand cmdExcel = new OleDbCommand())
    {
        using (OleDbDataAdapter odaExcel = new OleDbDataAdapter())
        {
            cmdExcel.Connection = connExcel;

            //Get the name of First Sheet.
            connExcel.Open();
            DataTable dtExcelSchema;
            dtExcelSchema = connExcel.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);
            string sheetName = dtExcelSchema.Rows[0]["TABLE_NAME"].ToString();
            connExcel.Close();

            //Read Data from First Sheet.
            connExcel.Open();
            cmdExcel.CommandText = "SELECT * From [" + sheetName + "]";
            odaExcel.SelectCommand = cmdExcel;
            odaExcel.Fill(dt);
            connExcel.Close();
        }
    }
}

//bind datatable with GridView
GridView1.DataSource = dt;
GridView1.DataBind(); 
```

来源：[https ://qawithexperts.com/article/asp-net/read-excel-file-and-import-data-into-gridview-using-datatabl/209](https://qawithexperts.com/article/asp-net/read-excel-file-and-import-data-into-gridview-using-datatabl/209)

控制台应用程序类似代码示例 [https://qawithexperts.com/article/c-sharp/read-excel-file-in-c-console-application-example-using-oledb/168](https://qawithexperts.com/article/c-sharp/read-excel-file-in-c-console-application-example-using-oledb/168)

如果您不想使用 OleDB，可以尝试[https://github.com/ExcelDataReader/ExcelDataReader](https://github.com/ExcelDataReader/ExcelDataReader) ，它似乎能够处理两种格式（.xls 和 .xslx）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-02T16:34:22.147

> 在您的系统上没有 Excel 的 Excel 文件阅读器和编写器

*   为您的项目下载并添加 [NPOI](https://npoi.codeplex.com/releases)的 dll 。
*   使用此代码读取 excel 文件。

    ```
     using (FileStream file = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
            {
               XSSFWorkbook XSSFWorkbook = new XSSFWorkbook(file);
            }
            ISheet objxlWorkSheet = XSSFWorkbook.GetSheetAt(0);
            int intRowCount = 1;
            int intColumnCount = 0;
            for (; ; )
            {
                IRow Row = objxlWorkSheet.GetRow(intRowCount);
                if (Row != null)
                {
                    ICell Cell = Row.GetCell(0);
                    ICell objCell = objxlWorkSheet.GetRow(intRowCount).GetCell(intColumnCount); }} 
    ```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-10T17:04:29.510

使用[开放 XML](https://www.nuget.org/packages/DocumentFormat.OpenXml/)。

这是一些代码，用于处理具有特定选项卡或工作表名称的电子表格并将其转储到 CSV 之类的文件中。（我选择了一个管道而不是逗号）。

我希望从单元格中获取价值更容易，但我认为这就是我们所坚持的。您可以看到我参考了 MSDN 文档，其中大部分代码是在其中获得的。这是微软推荐的。

```
 /// <summary>
    /// Got code from: https://msdn.microsoft.com/en-us/library/office/gg575571.aspx
    /// </summary>
    [Test]
    public void WriteOutExcelFile()
    {
        var fileName = "ExcelFiles\\File_With_Many_Tabs.xlsx";
        var sheetName = "Submission Form"; // Existing tab name.
        using (var document = SpreadsheetDocument.Open(fileName, isEditable: false))
        {
            var workbookPart = document.WorkbookPart;
            var sheet = workbookPart.Workbook.Descendants<Sheet>().FirstOrDefault(s => s.Name == sheetName);
            var worksheetPart = (WorksheetPart)(workbookPart.GetPartById(sheet.Id));
            var sheetData = worksheetPart.Worksheet.Elements<SheetData>().First();

            foreach (var row in sheetData.Elements<Row>())
            {
                foreach (var cell in row.Elements<Cell>())
                {
                    Console.Write("|" + GetCellValue(cell, workbookPart));
                }
                Console.Write("\n");
            }
        }
    }

    /// <summary>
    /// Got code from: https://msdn.microsoft.com/en-us/library/office/hh298534.aspx
    /// </summary>
    /// <param name="cell"></param>
    /// <param name="workbookPart"></param>
    /// <returns></returns>
    private string GetCellValue(Cell cell, WorkbookPart workbookPart)
    {
        if (cell == null)
        {
            return null;
        }

        var value = cell.CellFormula != null
            ? cell.CellValue.InnerText 
            : cell.InnerText.Trim();

        // If the cell represents an integer number, you are done. 
        // For dates, this code returns the serialized value that 
        // represents the date. The code handles strings and 
        // Booleans individually. For shared strings, the code 
        // looks up the corresponding value in the shared string 
        // table. For Booleans, the code converts the value into 
        // the words TRUE or FALSE.
        if (cell.DataType == null)
        {
            return value;
        }
        switch (cell.DataType.Value)
        {
            case CellValues.SharedString:

                // For shared strings, look up the value in the
                // shared strings table.
                var stringTable =
                    workbookPart.GetPartsOfType<SharedStringTablePart>()
                        .FirstOrDefault();

                // If the shared string table is missing, something 
                // is wrong. Return the index that is in
                // the cell. Otherwise, look up the correct text in 
                // the table.
                if (stringTable != null)
                {
                    value =
                        stringTable.SharedStringTable
                            .ElementAt(int.Parse(value)).InnerText;
                }
                break;

            case CellValues.Boolean:
                switch (value)
                {
                    case "0":
                        value = "FALSE";
                        break;
                    default:
                        value = "TRUE";
                        break;
                }
                break;
        }
        return value;
    } 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-08-03T05:25:31.010

```
public void excelRead(string sheetName)
        {
            Excel.Application appExl = new Excel.Application();
            Excel.Workbook workbook = null;
            try
            {
                string methodName = "";

                Excel.Worksheet NwSheet;
                Excel.Range ShtRange;

                //Opening Excel file(myData.xlsx)
                appExl = new Excel.Application();

                workbook = appExl.Workbooks.Open(sheetName, Missing.Value, ReadOnly: false);
                NwSheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);
                ShtRange = NwSheet.UsedRange; //gives the used cells in sheet

                int rCnt1 = 0;
                int cCnt1 = 0;

                for (rCnt1 = 1; rCnt1 <= ShtRange.Rows.Count; rCnt1++)
                {
                    for (cCnt1 = 1; cCnt1 <= ShtRange.Columns.Count; cCnt1++)
                    {
                        if (Convert.ToString(NwSheet.Cells[rCnt1, cCnt1].Value2) == "Y")
                        {

                            methodName = NwSheet.Cells[rCnt1, cCnt1 - 2].Value2;
                            Type metdType = this.GetType();
                            MethodInfo mthInfo = metdType.GetMethod(methodName);

                            if (Convert.ToString(NwSheet.Cells[rCnt1, cCnt1 - 2].Value2) == "fn_AddNum" || Convert.ToString(NwSheet.Cells[rCnt1, cCnt1 - 2].Value2) == "fn_SubNum")
                            {
                                StaticVariable.intParam1 = Convert.ToInt32(NwSheet.Cells[rCnt1, cCnt1 + 3].Value2);
                                StaticVariable.intParam2 = Convert.ToInt32(NwSheet.Cells[rCnt1, cCnt1 + 4].Value2);
                                object[] mParam1 = new object[] { StaticVariable.intParam1, StaticVariable.intParam2 };
                                object result = mthInfo.Invoke(this, mParam1);
                                StaticVariable.intOutParam1 = Convert.ToInt32(result);
                                NwSheet.Cells[rCnt1, cCnt1 + 5].Value2 = Convert.ToString(StaticVariable.intOutParam1) != "" ? Convert.ToString(StaticVariable.intOutParam1) : String.Empty;
                            }

                            else
                            {
                                object[] mParam = new object[] { };
                                mthInfo.Invoke(this, mParam);

                                NwSheet.Cells[rCnt1, cCnt1 + 5].Value2 = StaticVariable.outParam1 != "" ? StaticVariable.outParam1 : String.Empty;
                                NwSheet.Cells[rCnt1, cCnt1 + 6].Value2 = StaticVariable.outParam2 != "" ? StaticVariable.outParam2 : String.Empty;
                            }
                            NwSheet.Cells[rCnt1, cCnt1 + 1].Value2 = StaticVariable.resultOut;
                            NwSheet.Cells[rCnt1, cCnt1 + 2].Value2 = StaticVariable.resultDescription;
                        }

                        else if (Convert.ToString(NwSheet.Cells[rCnt1, cCnt1].Value2) == "N")
                        {
                            MessageBox.Show("Result is No");
                        }
                        else if (Convert.ToString(NwSheet.Cells[rCnt1, cCnt1].Value2) == "EOF")
                        {
                            MessageBox.Show("End of File");
                        }

                    }
                }

                workbook.Save();
                workbook.Close(true, Missing.Value, Missing.Value);
                appExl.Quit();
                System.Runtime.InteropServices.Marshal.FinalReleaseComObject(ShtRange);
                System.Runtime.InteropServices.Marshal.FinalReleaseComObject(NwSheet);
                System.Runtime.InteropServices.Marshal.FinalReleaseComObject(workbook);
                System.Runtime.InteropServices.Marshal.FinalReleaseComObject(appExl);
            }
            catch (Exception)
            {
                workbook.Close(true, Missing.Value, Missing.Value);
            }
            finally
            {
                GC.Collect();
                GC.WaitForPendingFinalizers();
                System.Runtime.InteropServices.Marshal.CleanupUnusedObjectsInCurrentContext();
            }
        }

//code for reading excel data in datatable
public void testExcel(string sheetName)
        {
            try
            {
                MessageBox.Show(sheetName);

                foreach(Process p in Process.GetProcessesByName("EXCEL"))
                {
                    p.Kill();
                }
                //string fileName = "E:\\inputSheet";
                Excel.Application oXL;
                Workbook oWB;
                Worksheet oSheet;
                Range oRng;

                //  creat a Application object
                oXL = new Excel.Application();

                //   get   WorkBook  object
                oWB = oXL.Workbooks.Open(sheetName);

                //   get   WorkSheet object
                oSheet = (Microsoft.Office.Interop.Excel.Worksheet)oWB.Sheets[1];
                System.Data.DataTable dt = new System.Data.DataTable();
                //DataSet ds = new DataSet();
                //ds.Tables.Add(dt);
                DataRow dr;

                StringBuilder sb = new StringBuilder();
                int jValue = oSheet.UsedRange.Cells.Columns.Count;
                int iValue = oSheet.UsedRange.Cells.Rows.Count;

                //  get data columns
                for (int j = 1; j <= jValue; j++)
                {
                    oRng = (Microsoft.Office.Interop.Excel.Range)oSheet.Cells[1, j];
                    string strValue = oRng.Text.ToString();
                    dt.Columns.Add(strValue, System.Type.GetType("System.String"));
                }

                //string colString = sb.ToString().Trim();
                //string[] colArray = colString.Split(':');

                //  get data in cell
                for (int i = 2; i <= iValue; i++)
                {
                    dr = dt.NewRow();
                    for (int j = 1; j <= jValue; j++)
                    {
                        oRng = (Microsoft.Office.Interop.Excel.Range)oSheet.Cells[i, j];
                        string strValue = oRng.Text.ToString();
                        dr[j - 1] = strValue;

                    }
                    dt.Rows.Add(dr);
                }
                if(StaticVariable.dtExcel != null)
                {
                    StaticVariable.dtExcel.Clear();
                    StaticVariable.dtExcel = dt.Copy();
                }
                else
                StaticVariable.dtExcel = dt.Copy();

                oWB.Close(true, Missing.Value, Missing.Value);
                oXL.Quit();
                MessageBox.Show(sheetName);

            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {

            }
        }

//code for class initialize
 public static void startTesting(TestContext context)
        {

            Playback.Initialize();
            ReadExcel myClassObj = new ReadExcel();
            string sheetName="";
            StreamReader sr = new StreamReader(@"E:\SaveSheetName.txt");
            sheetName = sr.ReadLine();
            sr.Close();
            myClassObj.excelRead(sheetName);
            myClassObj.testExcel(sheetName);
        }

//code for test initalize
public  void runValidatonTest()
        {

            DataTable dtFinal = StaticVariable.dtExcel.Copy();
            for (int i = 0; i < dtFinal.Rows.Count; i++)
            {
                if (TestContext.TestName == dtFinal.Rows[i][2].ToString() && dtFinal.Rows[i][3].ToString() == "Y" && dtFinal.Rows[i][4].ToString() == "TRUE")
                {
                    MessageBox.Show(TestContext.TestName);
                    MessageBox.Show(dtFinal.Rows[i][2].ToString());
                    StaticVariable.runValidateResult = "true";
                    break;
                }
            }
            //StaticVariable.dtExcel = dtFinal.Copy();
        } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-07-29T10:33:45.017

在服务器端应用程序上读取 Excel 文件的推荐方法是 Open XML。

分享几个链接-

[https://msdn.microsoft.com/en-us/library/office/hh298534.aspx](https://msdn.microsoft.com/en-us/library/office/hh298534.aspx)

[https://msdn.microsoft.com/en-us/library/office/ff478410.aspx](https://msdn.microsoft.com/en-us/library/office/ff478410.aspx)

[https://msdn.microsoft.com/en-us/library/office/cc823095.aspx](https://msdn.microsoft.com/en-us/library/office/cc823095.aspx)

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2016-03-02T09:40:07.273

我建议您使用 Bytescout 电子表格。

[https://bytescout.com/products/developer/spreadsheetsdk/bytescoutspreadsheetsdk.html](https://bytescout.com/products/developer/spreadsheetsdk/bytescoutspreadsheetsdk.html)

我在 Unity3D 中使用 Monodevelop 进行了尝试，它非常简单。检查此示例代码以了解该库的工作原理：

[https://bytescout.com/products/developer/spreadsheetsdk/read-write-excel.html](https://bytescout.com/products/developer/spreadsheetsdk/read-write-excel.html)

# visual-c++ - 生成exe文件

> ID：657137
> 
> 赞同：0
> 
> 时间：2009-03-18T06:13:45.267
> 
> 标签：visual-c++

我已经在 Visual c++ 6.0 中开发了应用程序，我已经做了那个应用程序的 exe，我已经使用 icnt.exe（安装创建者）完成了，但是当我在没有 vc++ 软件的其他系统上运行我的应用程序 exe 文件时显示 dll 文件丢失，我怎么能再次下载 dll 文件，它正在询问其他 dll 文件。我想在 Windows 中不安装 vc++ 软件的情况下运行我的应用程序，我该如何解决，请帮助我，我很麻烦。如何让Realease构建？默认情况下它的调试版本

谢谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T06:30:04.697

作为一个疯狂的猜测，您已经部署了 Debug 版本，它依赖于不允许发布的 DLL。

如果是这种情况，让 VC6 创建一个发布版本并部署它。

您可以使用 Visual Studio 附带的 depends.exe 实用程序来验证您的应用程序需要哪些 DLL。

**编辑：**准备好后获得发布版本的最简单方法是使用“构建”菜单中的“批量构建”命令。它将让您在项目中所有已知的构建类型中进行选择，并选择将它们构建干净（推荐）或将它们更新。

也可以将 GUI 切换为默认的 Release 版本而不是 Debug。如果您确实需要在发布版本上运行调试器，那么这是正确的做法。请注意，两个版本都包含调试符号。差异更多地与链接哪些运行时库有关，并且某些优化（例如制作`assert()`宏）无效。

# c++ - 如何避免阻塞（C++、Win32）

> ID：657141
> 
> 赞同：1
> 
> 时间：2009-03-18T06:14:47.123
> 
> 标签：c++, multithreading, blocking

我正在制作一个必须响应应用程序请求的 dll。应用程序的要求之一是调用不应花费很长时间才能完成。

比如说，我有一个函数 foo()，它由主机应用程序调用：

```
int foo(arg){
    // some code i need to execute, say,
    LengthyRoutine();
    return 0;
} 
```

可以说， foo 必须执行肯定需要很长时间的任务（或调用函数）。该应用程序允许我设置一个等待变量；如果 foo 返回时此变量非零，它会一次又一次地调用 foo（在每次调用之前重置等待变量），直到等待返回 0。

最好的方法是什么？

我去吗：

```
int foo(arg){

    if (inRoutine == TRUE) {
        wait = 1;
        return 0;
    } else {
        if (doRoutine == TRUE) {
             LengthyRoutine();
             return 0;
        }
    }

    return 0;
} 
```

这并不能真正解决 LongyRoutine 需要很长时间才能完成的问题。我是否应该根据它是否完成任务来生成某种类型的线程来更新 inRoutine？

谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-18T06:29:50.813

产生另一个线程几乎是最好的方法，只需确保在设置表示您已完成的变量之前设置结果变量以避免竞争条件。如果经常调用它，您可能希望提前生成一个工作线程并重用它以避免线程启动开销。

还有另一种可能的解决方案，每次调用函数时都做部分工作，但是这会在 DLL 中花费更多时间并且可能不是最佳的，而且对于大多数算法来说实现工作代码也更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T19:45:43.087

如果是 C 编程，请使用回调 - 将回调传递给 foo。您必须就回调签名达成一致，并在 LongyRoutine 中的工作完成时进行一些内务处理以触发它。

```
typedef (void) callbackFunction(void);

int foo(arg, callbackFunction)
{
   // some code i need to execute, say,
   // register callback and return right away
   // Trigger the LengthyRoutine to run after this function returns

   return 0;
}

LengthyRoutine()
{
   // do lenghty routine

   // now inform the caller with their suppiled callback
   callbackFunction();
} 
```

本质上是 C 中的[观察者](http://en.wikipedia.org/wiki/Observer_pattern#C.2B.2B)模式。在我看来，C++ 使工作变得更容易/更干净

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T07:23:04.213

如果难以置信的罕见情况`LengthyRoutine()`不是 3rd 方代码并且您拥有所有源代码并且可以将其拆分，那么您可以考虑使用[coroutines](http://www.chiark.greenend.org.uk/~sgtatham/coroutines.html)。

# c# - 如何在 ASP.NET 中为 div 修改代码隐藏文件中的 CSS 样式？

> ID：657144
> 
> 赞同：104
> 
> 时间：2009-03-18T06:15:35.730
> 
> 标签：c#, asp.net, css

我正在尝试根据我从 aspx 页面后面代码中的数据库表中获得的信息来修改 div 的 CSS 样式属性。以下基本上是我想要做的，但我得到了错误。

ASP:

```
<div id="testSpace" runat="server">
    Test
</div> 
```

代码背后：

```
testSpace.Style = "display:none;"    
testSpace.Style("display") = "none"; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2009-03-18T06:29:16.650

```
testSpace.Style.Add("display", "none"); 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2009-03-18T13:07:08.520

这是一个 HtmlGenericControl 所以不确定推荐的方法是什么，所以你也可以这样做：

```
testSpace.Attributes.Add("style", "text-align: center;"); 
```

或者

```
testSpace.Attributes.Add("class", "centerIt"); 
```

或者

```
testSpace.Attributes["style"] = "text-align: center;"; 
```

或者

```
testSpace.Attributes["class"] = "centerIt"; 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-06-25T10:06:46.783

另一种方法：

```
testSpace.Style.Add("display", "none"); 
```

或者

```
testSpace.Style["background-image"] = "url(images/foo.png)"; 
```

在 vb.net 你可以这样做：

```
testSpace.Style.Item("display") = "none" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-23T20:54:10.070

如果您正在使用[初始化语法](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/object-and-collection-initializers#collection-initializers)`new`创建一个元素，您可以执行以下操作：

```
var row = new HtmlTableRow
{
  Cells =
  {
    new HtmlTableCell
    {
        InnerText = text,
        Attributes = { ["style"] = "min-width: 35px;" }
    },
  }
}; 
```

或者，如果`CssStyleCollection`具体使用：

```
var row = new HtmlTableRow
{
  Cells =
  {
    new HtmlTableCell
    {
        InnerText = text,
        Style = { ["min-width"] = "35px" }
    },
  }
}; 
```

# silverlight - Silverlight Popup UserControl - 工作一次，然后崩溃

> ID：657148
> 
> 赞同：1
> 
> 时间：2009-03-18T06:19:39.870
> 
> 标签：silverlight, user-controls

我正在制作一个 Silverlight2 UserControl 来模拟 WinForms MessageBox 的基本功能。我在关注[Shawn Wildermuth](http://wildermuth.com/2008/05/01/Creating_a_Pseudo-Dialog_with_Silverlight_s_Popup_Control)和[John Papa 的](http://www.silverlightshow.net/items/Tutorial-Create-a-Silverlight-2-User-Control-from-a-Popup-Control.aspx)例子。

编译得很好，我用一个按钮将用户控件添加到我的应用程序以显示弹出窗口。这有效 - 出现弹出窗口，您可以单击一个按钮将其关闭并关闭。您可以多次执行此操作。

如果包含“MessageBox”的 UserControl 已关闭并创建了一个新用户控件，则会出现此问题。如果您尝试在新实例上打开弹出窗口，则会引发异常：

```
Unhandled Error in Silverlight 2 Application
Code: 4004
Category: ManagedRuntimeError
Message: System.ArgumentException: Value does not fall within the expected range.
  at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
  at MS.Internal.XcpImports.FrameworkElement_MeasureOverride(FrameworkElement element, Size availableSize)
  at System.Windows.FrameworkElement.MeasureOverride(Size availableSize)
  ...
  (stack trace doesnt go as far as any of my code) 
```

控件的代码在帖子的底部。如果你想运行它，我已经做了一个[测试台项目来演示这个问题。](http://wintec.ac.nz/applications/dnug/code/SilverlightPopupControlTest.zip)测试台有屏幕说明，告诉您如何重现问题。

这一直让我发疯，所以任何帮助或指示将不胜感激。

这是 PopupMessage 用户控件的代码：

```
<UserControl x:Class="SilverlightPopupControlTest.PopupMessage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:vsm="clr-namespace:System.Windows;assembly=System.Windows" 
    >
    <Grid x:Name="LayoutRoot">

        <vsm:VisualStateManager.VisualStateGroups>
            <vsm:VisualStateGroup x:Name="PopupState" CurrentStateChanged="PopupState_CurrentStateChanged">
                <vsm:VisualStateGroup.Transitions>
                    <vsm:VisualTransition GeneratedDuration="00:00:00.2000000"/>
                    <vsm:VisualTransition GeneratedDuration="00:00:00.2000000" To="PopupStateOpened"/>
                    <vsm:VisualTransition GeneratedDuration="00:00:00.2000000" To="PopupStateClosed"/>
                </vsm:VisualStateGroup.Transitions>
                <vsm:VisualState x:Name="PopupStateClosed">
                    <Storyboard>
                        <ColorAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="PopupFillGrid" Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)">
                            <SplineColorKeyFrame KeyTime="00:00:00" Value="#00FFFFFF"/>
                        </ColorAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="border" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.5"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="border" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.5"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="border" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </vsm:VisualState>
                <vsm:VisualState x:Name="PopupStateOpened">
                    <Storyboard>
                        <ColorAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="PopupFillGrid" Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)">
                            <SplineColorKeyFrame KeyTime="00:00:00" Value="#BFFFFFFF"/>
                        </ColorAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="border" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="border" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="border" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </vsm:VisualState>
            </vsm:VisualStateGroup>
        </vsm:VisualStateManager.VisualStateGroups>

        <Popup x:Name="PopupControl">
            <Grid x:Name="PopupFillGrid">
                <Grid.Background>
                    <SolidColorBrush Color="#00ffffff"/>
                </Grid.Background>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>

                <Border Grid.Row="1" Grid.Column="1" RenderTransformOrigin="0.5,0.5" x:Name="border" Opacity="0" >
                    <Border.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="0.5" ScaleY="0.5"/>
                            <SkewTransform/>
                            <RotateTransform/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Border.RenderTransform>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="40"/>
                        </Grid.RowDefinitions>

                        <ContentPresenter x:Name="PopupContentPresenter"/>

                        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button x:Name="Button1" Click="Button1_Click" Margin="4" MinWidth="80">
                                <ContentPresenter x:Name="Button1ContentPresenter"/>
                            </Button>
                            <Button x:Name="Button2" Click="Button2_Click" Margin="4" MinWidth="80">
                                <ContentPresenter x:Name="Button2ContentPresenter"/>
                            </Button>
                            <Button x:Name="Button3" Click="Button3_Click"  Margin="4" MinWidth="80">
                                <ContentPresenter x:Name="Button3ContentPresenter"/>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Popup>
    </Grid>
</UserControl> 
```

及其代码隐藏

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace SilverlightPopupControlTest
{
    public partial class PopupMessage : UserControl
    {
        #region PopupContent Dependency Property
        public UIElement PopupContent
        {
            get { return (UIElement)GetValue(PopupContentProperty); }
            set { SetValue(PopupContentProperty, value); }
        }
        public static readonly DependencyProperty PopupContentProperty = DependencyProperty.Register(
            "PopupContent", typeof(UIElement), typeof(PopupMessage), new PropertyMetadata(PopupContentChanged));

        private static void PopupContentChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            ((PopupMessage)o).OnPopupContentChanged((UIElement)e.OldValue, (UIElement)e.NewValue);
        }

        private void OnPopupContentChanged(UIElement oldValue, UIElement newValue)
        {
            this.PopupContentPresenter.Content = newValue;
        }
        #endregion
        #region Button1Visibility Dependency Property
        public Visibility Button1Visibility
        {
            get { return (Visibility)GetValue(Button1VisibilityProperty); }
            set { SetValue(Button1VisibilityProperty, value); }
        }
        public static readonly DependencyProperty Button1VisibilityProperty = DependencyProperty.Register(
            "Button1Visibility", typeof(Visibility), typeof(PopupMessage), new PropertyMetadata(Button1VisibilityChanged));

        private static void Button1VisibilityChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            ((PopupMessage)o).OnButton1VisibilityChanged((Visibility)e.OldValue, (Visibility)e.NewValue);
        }

        private void OnButton1VisibilityChanged(Visibility oldValue, Visibility newValue)
        {
            this.Button1.Visibility = newValue;
        }
        #endregion
        #region Button2Visibility Dependency Property
        public Visibility Button2Visibility
        {
            get { return (Visibility)GetValue(Button2VisibilityProperty); }
            set { SetValue(Button2VisibilityProperty, value); }
        }
        public static readonly DependencyProperty Button2VisibilityProperty = DependencyProperty.Register(
            "Button2Visibility", typeof(Visibility), typeof(PopupMessage), new PropertyMetadata(Button2VisibilityChanged));

        private static void Button2VisibilityChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            ((PopupMessage)o).OnButton2VisibilityChanged((Visibility)e.OldValue, (Visibility)e.NewValue);
        }

        private void OnButton2VisibilityChanged(Visibility oldValue, Visibility newValue)
        {
            this.Button2.Visibility = newValue;
        }
        #endregion
        #region Button3Visibility Dependency Property
        public Visibility Button3Visibility
        {
            get { return (Visibility)GetValue(Button3VisibilityProperty); }
            set { SetValue(Button3VisibilityProperty, value); }
        }
        public static readonly DependencyProperty Button3VisibilityProperty = DependencyProperty.Register(
            "Button3Visibility", typeof(Visibility), typeof(PopupMessage), new PropertyMetadata(Button3VisibilityChanged));

        private static void Button3VisibilityChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            ((PopupMessage)o).OnButton3VisibilityChanged((Visibility)e.OldValue, (Visibility)e.NewValue);
        }

        private void OnButton3VisibilityChanged(Visibility oldValue, Visibility newValue)
        {
            this.Button3.Visibility = newValue;
        }
        #endregion
        #region Button1Content Dependency Property
        public UIElement Button1Content
        {
            get { return (UIElement)GetValue(Button1ContentProperty); }
            set { SetValue(Button1ContentProperty, value); }
        }
        public static readonly DependencyProperty Button1ContentProperty = DependencyProperty.Register(
            "Button1Content", typeof(UIElement), typeof(PopupMessage), new PropertyMetadata(Button1ContentChanged));

        private static void Button1ContentChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            ((PopupMessage)o).OnButton1ContentChanged((UIElement)e.OldValue, (UIElement)e.NewValue);
        }

        private void OnButton1ContentChanged(UIElement oldValue, UIElement newValue)
        {
            this.Button1ContentPresenter.Content = newValue;
        }
        #endregion
        #region Button2Content Dependency Property
        public UIElement Button2Content
        {
            get { return (UIElement)GetValue(Button2ContentProperty); }
            set { SetValue(Button2ContentProperty, value); }
        }
        public static readonly DependencyProperty Button2ContentProperty = DependencyProperty.Register(
            "Button2Content", typeof(UIElement), typeof(PopupMessage), new PropertyMetadata(Button2ContentChanged));

        private static void Button2ContentChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            ((PopupMessage)o).OnButton2ContentChanged((UIElement)e.OldValue, (UIElement)e.NewValue);
        }

        private void OnButton2ContentChanged(UIElement oldValue, UIElement newValue)
        {
            this.Button2ContentPresenter.Content = newValue;
        }
        #endregion
        #region Button3Content Dependency Property
        public UIElement Button3Content
        {
            get { return (UIElement)GetValue(Button3ContentProperty); }
            set { SetValue(Button3ContentProperty, value); }
        }
        public static readonly DependencyProperty Button3ContentProperty = DependencyProperty.Register(
            "Button3Content", typeof(UIElement), typeof(PopupMessage), new PropertyMetadata(Button3ContentChanged));

        private static void Button3ContentChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            ((PopupMessage)o).OnButton3ContentChanged((UIElement)e.OldValue, (UIElement)e.NewValue);
        }

        private void OnButton3ContentChanged(UIElement oldValue, UIElement newValue)
        {
            this.Button3ContentPresenter.Content = newValue;
        }
        #endregion

        public enum PopupMessageResult
        {
            Unknown=0,
            Button1=1,
            Button2,
            Button3
        }

        #region PopupMessageClosed Event
        public class PopupMessageClosedEventArgs : EventArgs
        {
            public PopupMessage.PopupMessageResult Result { get; set; }

            public PopupMessageClosedEventArgs()
            {
            }

            public PopupMessageClosedEventArgs(PopupMessage.PopupMessageResult _Result)
            {
                this.Result = _Result;
            }

        }

        public delegate void PopupMessageClosedEventHandler(object sender, PopupMessageClosedEventArgs e);

        public event PopupMessageClosedEventHandler PopupMessageClosed;

        protected virtual void OnPopupMessageClosed(PopupMessageClosedEventArgs e)
        {
            if (PopupMessageClosed != null)
            {
                PopupMessageClosed(this, e);
            }
        }
        #endregion

        private PopupMessageResult m_Result = PopupMessageResult.Unknown;
        public PopupMessageResult Result
        {
            get { return m_Result; }
            set { m_Result = value; }
        }

        private FrameworkElement m_HostControl = null;
        public FrameworkElement HostControl
        {
            get { return m_HostControl; }
            set { m_HostControl = value; }
        }

        public PopupMessage()
        {
            InitializeComponent();

            this.Button1Visibility = Visibility.Collapsed;
            this.Button2Visibility = Visibility.Collapsed;
            this.Button3Visibility = Visibility.Collapsed;

            VisualStateManager.GoToState(this, "PopupStateClosed", false);
        }

        private void Close()
        {
            VisualStateManager.GoToState(this, "PopupStateClosed", true);
        }

        public void Show()
        {

            this.PopupControl.IsOpen = true;
            this.Visibility = Visibility.Visible;
            this.TabNavigation = KeyboardNavigationMode.Cycle;
            this.Button1.Focus();

            VisualStateManager.GoToState(this, "PopupStateOpened", true);
        }

        void PopupState_CurrentStateChanged(object sender, VisualStateChangedEventArgs e)
        {
            if (e.NewState.Name == "PopupStateClosed")
            {
                this.PopupControl.IsOpen = false;
                this.Visibility = Visibility.Collapsed;

                this.OnPopupMessageClosed(new PopupMessageClosedEventArgs(this.Result));
            }
        }

        private void Button1_Click(object sender, RoutedEventArgs e)
        {
            this.Result = PopupMessageResult.Button1;
            this.Close();
        }

        private void Button2_Click(object sender, RoutedEventArgs e)
        {
            this.Result = PopupMessageResult.Button2;
            this.Close();
        }

        private void Button3_Click(object sender, RoutedEventArgs e)
        {
            this.Result = PopupMessageResult.Button3;
            this.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T08:51:59.803

您收到的实际错误消息如下：

[![替代文字](https://i.stack.imgur.com/SBup1.png)](https://i.stack.imgur.com/SBup1.png)

如果您将 Page.xaml.cs 重构为如下所示，它将修复您的错误：

```
public partial class Page : UserControl
{
    private PopupHost popupHost1 = new PopupHost();

    public Page()
    {
        InitializeComponent();
    }

    private void OpenButton_Click(object sender, RoutedEventArgs e)
    {
        this.PageContent.Children.Add(popupHost1);
    }

    private void CloseButton_Click(object sender, RoutedEventArgs e)
    {
        this.PageContent.Children.Remove(popupHost1);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-23T22:54:58.960

仅供参考，作为新的 Silverlight Toolkit 2009 年 3 月版本的一部分，我们已经发布了 Picker 基类。该 Picker 类提供弹出功能，您无需手动定位和显示弹出窗口。

如果您有兴趣，请给我留言，我会尽力在此处发布有关如何使用 Picker 的快速教程。基本上：

1.  创建一个继承自 Picker 的类
2.  在 Blend 中，编辑控件的模板
    1.  在模板的弹出窗口中，在弹出窗口中放置您想要的任何内容（如按钮或其他东西）
    2.  在模板中的切换按钮旁边放置您想要展示弹出窗口关闭时的值的任何可视化。
3.  为您在 2.1 和 2.2 中创建的元素公开 TemplateParts。
4.  在 OnApplyTemplate 中使用 GetTemplatePart 抓取那些 TemplateParts 的实例
5.  注册这些控件上的事件以响应它们的更改并更新控件。

# android - Android 通过 ID 获取联系人组

> ID：657154
> 
> 赞同：6
> 
> 时间：2009-03-18T06:24:24.057
> 
> 标签：android, android-contentprovider, contacts

我有联系人 ID，如何获取联系人分配到的组？我确信这与 Contacts.Groups 类有关，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T15:45:19.560

在`GroupMembership.PERSON_ID`您有人员的 ID，在同一个表中，`GroupMembership.GROUP_ID`您有组的 ID。您可以使用 检索组`Contacts.Groups`。

请记住，在每个“表”中都有唯一的 ID 来标识行。

希望这可以帮助。（我也在努力）

# c++ - 如何启用父级和派生的_shared_from_this

> ID：657155
> 
> 赞同：45
> 
> 时间：2009-03-18T06:25:28.673
> 
> 标签：c++, boost, smart-pointers

我有我想要的简单基类和派生类`shared_from_this()`。

这个简单的解决方案：

```
class foo : public enable_shared_from_this<foo> {
    void foo_do_it()
    {
        cout<<"foo::do_it\n";
    }
public:
    virtual function<void()> get_callback()
    {
        return boost::bind(&foo::foo_do_it,shared_from_this());
    }
    virtual ~foo() {};
};

class bar1 : public foo , public enable_shared_from_this<bar1> {
    using enable_shared_from_this<bar1>::shared_from_this;
    void bar1_do_it()
    {
        cout<<"foo::do_it\n";
    }
public:
    virtual function<void()> get_callback()
    {
        return boost::bind(&bar1::bar1_do_it,shared_from_this());
    }
}; 
```

`tr1::bad_weak_ptr`在以下代码中导致异常：

```
shared_ptr<foo> ptr(shared_ptr<foo>(new bar1));
function<void()> f=ptr->get_callback();
f(); 
```

因此，在“谷歌搜索”之后，我找到了以下解决方案：

```
class bar2 : public foo {
    void bar2_do_it()
    {
        cout<<"foo::do_it\n";
    }
    shared_ptr<bar2> shared_from_this()
    {
        return boost::static_pointer_cast<bar2>(foo::shared_from_this());
    }
public:
    virtual function<void()> get_callback()
    {
        return boost::bind(&bar2::bar2_do_it,shared_from_this());
    }
}; 
```

现在它可以工作了。

有没有更好、更方便、更正确的方式对`enable_shared_from_this`父母和孩子都适用？

谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-08-23T23:18:52.563

通过在基类上定义以下内容，可以使 OP 解决方案更加方便。

```
protected:
    template <typename Derived>
    std::shared_ptr<Derived> shared_from_base()
    {
        return std::static_pointer_cast<Derived>(shared_from_this());
    } 
```

这可以通过将其放在基类中（以供重用）来更方便。

```
#include <memory>

template <class Base>
class enable_shared_from_base
  : public std::enable_shared_from_this<Base>
{
protected:
    template <class Derived>
    std::shared_ptr<Derived> shared_from_base()
    {
        return std::static_pointer_cast<Derived>(shared_from_this());
    }
}; 
```

然后从它派生如下。

```
class foo : public enable_shared_from_base<foo> {
    void foo_do_it()
    {
        std::cout << "foo::do_it\n";
    }
public:
    virtual std::function<void()> get_callback()
    {
        return boost::bind(&foo::foo_do_it, shared_from_base<foo>());
    }
};

class bar1 : public foo {
    void bar1_do_it()
    {
        std::cout << "bar1::do_it\n";
    }
public:
    virtual std::function<void()> get_callback() override
    {
        return boost::bind(&bar1::bar1_do_it, shared_from_base<bar1>());
    }
}; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-21T17:30:30.320

对不起，但没有。

问题是，`shared_ptr<foo>`并且`shared_ptr<bar1>`是不同的类型。我不了解幕后发生的一切，但我*认为*当构造函数返回并分配给 a`shared_ptr<foo>`时，内部`weak_ptr<bar1>`会看到没有任何东西指向它（因为只有 a`shared_ptr<bar1>`会增加计数器）并自行重置。当你调用`bar1::shared_from_this`时`get_callback`，你会得到异常，因为内部`weak_ptr`没有指向任何东西。

本质上，`enable_shared_from_this`似乎只能从层次结构中的单个类透明地工作。如果您尝试[手动实现它](http://www.boost.org/doc/libs/1_38_0/libs/smart_ptr/sp_techniques.html#from_this)，问题应该会变得很明显。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-12-13T09:30:50.063

如果您想实现一个`shared_from_this()`函数，@evoskuil 的类似解决方案可以减少派生类中的样板，从而在类中的使用点产生以下代码：

```
auto shared_from_this() {
    return shared_from(this);
} 
```

这使用了类之外的“shim”函数。通过这样做，它还为那些接口不能修改但派生自的类提供了一种干净的方法`enable_shared_from_this`- 例如

```
auto shared_that = shared_from(that); 
```

注意：`auto`此处使用 for 返回类型取决于编译器的年龄。

可以放置在库头文件中的 Shim 函数：

```
template <typename Base>
inline std::shared_ptr<Base>
shared_from_base(std::enable_shared_from_this<Base>* base) 
{
    return base->shared_from_this();
}
template <typename Base>
inline std::shared_ptr<const Base>
shared_from_base(std::enable_shared_from_this<Base> const* base) 
{
    return base->shared_from_this();
}
template <typename That>
inline std::shared_ptr<That>
shared_from(That* that) 
{
    return std::static_pointer_cast<That>(shared_from_base(that));
} 
```

上面的代码依赖于这样一个事实，即传递给的类型`shared_from(...)`继承自`std::enable_shared_from_this<Base>`其祖先的某个点。

调用`shared_from_base`将找出最终是什么类型。由于我们知道`That`继承自`Base`，因此可以进行静态向下转换。

可能存在一些带有类型转换运算符的类的病态极端情况。但这不太可能发生在并非旨在打破这种情况的代码中。

**例子：**

```
struct base : public std::enable_shared_from_this<base> {};
struct derived : public base
{
    auto shared_from_this() {
        return shared_from(this);
    }
    // Can also provide a version for const:
    auto shared_from_this() const {
        return shared_from(this);
    }
    // Note that it is also possible to use shared_from(...) from
    // outside the class, e.g. 
    // auto sp = shared_from(that);
};
template <typename X>
struct derived_x : public derived
{
    auto shared_from_this() {
        return shared_from(this);
    }
}; 
```

**编译测试：**

```
int main()
{
    auto pbase = std::make_shared<base>();
    auto pderived = std::make_shared<derived>();
    auto pderived_x = std::make_shared<derived_x<int> >();

    auto const& const_pderived = *pderived;
    const_pderived.shared_from_this();

    std::shared_ptr<base> test1 = pbase->shared_from_this();
    std::shared_ptr<derived> test2 = pderived->shared_from_this();
    std::shared_ptr<derived_x<int> > test3 = pderived_x->shared_from_this();

    return 0;
} 
```

[https://onlinegdb.com/SJWM5CYIG](https://onlinegdb.com/SJWM5CYIG)

**我发布的先前解决方案**一直使评论仍然有意义 - 这将函数放置在有一些问题的基类中 - 特别是“普通”类和模板类所需的实现之间的不一致性。
此外，对于新的类层次结构，需要重复基类中的实现，这并不是那么干燥。此外，通过提供来自不同对象的基类指针，基类函数存在被滥用的可能性。上面的较新方案完全避免了这种情况，并且运行时 assert(...) 检查进行。

旧实现：

```
#include <cassert>
#include <memory>

class base : public std::enable_shared_from_this<base>
{
protected:   
    template <typename T>
    std::shared_ptr<T> shared_from(T* derived) {
        assert(this == derived);
        return std::static_pointer_cast<T>(shared_from_this());
    }
};

class derived : public base
{
public:
    auto shared_from_this() {
        return shared_from(this);
    }
};

template <typename X>
class derived_x : public derived
{
public:
    auto shared_from_this() {
        return this->template shared_from(this);
    }
};

int main()
{
    auto pbase = std::make_shared<base>();
    auto pderived = std::make_shared<derived>();
    auto pderived_x = std::make_shared<derived_x<int> >();

    std::shared_ptr<base> test1 = pbase->shared_from_this();
    std::shared_ptr<derived> test2 = pderived->shared_from_this();
    std::shared_ptr<derived_x<int> > test3 = pderived_x->shared_from_this();

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-13T21:14:32.937

很容易; `public shared_from_this`仅在您的基类中继承。在派生类中实现一个访问器，该访问器转换为适当的类型；

```
std::shared_ptr<Derived> shared() 
{
   return std::dynamic_pointer_cast<Derived>(Base::shared_from_this());
} 
```

# java - 使用 Web Start / JNLP 动态加载额外的 jar 文件

> ID：657157
> 
> 赞同：6
> 
> 时间：2009-03-18T06:26:02.633
> 
> 标签：java, osgi, java-web-start

[Web Start 开发人员](http://java.sun.com/j2se/1.5.0/docs/guide/javaws/developersguide/development.html#retrieving)指南指出

> 所有应用程序资源都必须从 JNLP 文件的资源部分中指定的 JAR 文件中检索，或者使用对 Web 服务器的 HTTP 请求显式检索。
> 
> 建议将资源存储在 JAR 文件中，因为它们会被 Java Web Start 缓存在本地机器上。

现在，我想要在我的应用程序启动后动态加载一些资源（例如 OSGi 包）。我可以使用纯 HTTP 来做到这一点，但我想利用 Web Start 对本地缓存和特定于版本/架构的资源的支持。

有没有办法使用 Web Start 基础设施从原始代码库（在应用程序的 jnlp 文件中指定）下载额外的 jar 文件？

或者：是否已经有一种整合 OSGi 和 Web Start 的既定方法可以减轻我从 Web Start 服务器安装包的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T07:30:48.127

如果您使您的应用程序本身成为基于 Equinox 的 OSGI 应用程序，您可以使用所需的所有附加包启动它。

这篇文章“ [WebStarting Equinox OSGi Apps](http://eclipse.dzone.com/articles/webstarting-equinox-osgi-apps) ”可以很好地介绍所需的设置。

> *   所有捆绑包都必须部署为签名的 JAR 文件
> *   您需要一个包含所有必要捆绑包的功能
> *   导出功能时，确保 PDE 为该功能创建 JNLP（Java 网络启动协议）文件（导出向导中的复选框）
> *   为您的应用程序提供根 JNLP 文件
> *   将您的应用程序部署到 Web 服务器并确保 Web 服务器知道 application/x-java-jnlp-file mime 类型

他还有一个[OSGI 演示](http://max-server.myftp.org/trac/pm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-12T19:46:52.207

我没试过，但看看[javax.jnlp.DownloadService API](http://java.sun.com/j2se/1.5.0/docs/guide/javaws/developersguide/examples.html)

# c++ - 帮助！错误 C2040：“HWINEVENTHOOK”：“DWORD”与“HWINEVENTHOOK__ *”的间接级别不同

> ID：657163
> 
> 赞同：1
> 
> 时间：2009-03-18T06:28:51.317
> 
> 标签：c++, windows, visual-c++, sdk

我正在一个新盒子（vista 64）上编译我的应用程序，现在它不再编译了。编译器给了我标题中的错误。问题似乎（？）是 HWINEVENTHOOK 在

文件名

```
#if(WINVER >= 0x0400)
DECLARE_HANDLE(HWINEVENTHOOK);
#endif /* WINVER >= 0x0400 */ 
```

然后在 winable.h 中

```
#if WINVER < 0x0500 // these structures and functions
                    // are in NT 5.00 and above winuser.h
typedef DWORD   HWINEVENTHOOK; 
```

但是，我只是在 WINVER 中查找 vista，它是 0x0600，而 windows XP 是 0x0501，那么为什么要定义 DWORD？我不知所措。有人帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T06:57:54.867

根据[这个 MSDN 论坛主题](http://social.msdn.microsoft.com/Forums/en-US/windowssdk/thread/ee57cc38-1dc6-4a5f-b7e3-1f16dbd91b83/)：

> winable.h 于 2005 年 7 月从 Windows SDK 中移出，因为 winuser.h 中的功能重复。当时确定将 winuser.h 更新为 Windows Vista 级别的功能而不是更新这两个文件的功能会更好。

您使用的是什么版本的 Windows SDK，以及您的代码目标是什么 Windows 版本？目标 Windows 版本可以在生成文件、项目文件或头文件中指定。在 Vista 上编译代码并不一定意味着目标版本是 Vista。

另外，您是否尝试过从 winable.h 切换到 winuser.h？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T07:52:03.957

您可能需要将 WINVER 显式设置为与您所针对的 Windows 的最低版本相对应的版本。我怀疑它的默认值在Win2K之上并不多...

您可以通过快速（未经测试）的 hack 来检查其默认值，如下所示：

```
#include <windows.h>
#include <stdio.h>
int main(int argc, char **argv) {
    printf("WINVER=0x%04x\n", WINVER);
    return 0;
} 
```

编译为控制台应用程序并在命令提示符下运行它可能会提供线索。否则，您将花费很长时间来寻找包含文件，试图确定它在哪里设置了默认值。

**编辑：**通常，*始终*为项目指定 WINVER 是最安全的。在 Visual Studio 的项目设置中执行此操作（并且对于**所有构建**，而不仅仅是当前构建！），或者在项目中每个模块包含的公共头文件中执行此操作。明确地这样做将减少不同构建环境可能有不同假设的机会。

# iphone - iphone模拟器加载问题？

> ID：657168
> 
> 赞同：1
> 
> 时间：2009-03-18T06:31:34.600
> 
> 标签：iphone, cocos2d-iphone

我使用 cocos2d 开发了一个 iphone 应用程序。但是在包含声音文件后发现加载问题。我不明白为什么会出现问题。我发送链接图像（从控制台获取）。在此图像中显示错误。[链接文本](http://img10.imageshack.us/img10/131/picture100.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T06:33:25.407

重命名或删除 Divx 解码器。这显然正在成为一个众所周知/广泛传播的问题！

# c# - 在 NHibernate 中查询未映射的列

> ID：657170
> 
> 赞同：8
> 
> 时间：2009-03-18T06:32:20.137
> 
> 标签：c#, nhibernate, nhibernate-mapping

我有一个使用 NHibernate 映射到表的类。问题是只有一些属性映射到表中的列。这很好，因为我们用于显示的唯一列是映射的，但是我想知道是否有任何方法可以查询表中未映射到我的类中的属性的其他列。

例如，我们有一个包含以下列的表：

```
Customer
-----------
CustomerId
Name
DateCreated 
```

我们有一个对象

```
public class Customer
{
    public virtual int CustomerId {get;set;}
    public virtual string name {get;set;}
} 
```

和`name`和`customerId`被映射`DateCreated`并不是因为我们从不在任何地方显示它。我们想查询在`Customer`特定日期创建的客户表。有没有办法在**不**映射的情况下做到这一点`DateCreated`？此外，最好使用标准 API 来执行此操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-07-11T05:12:32.167

Ayende Rahien 发布了一篇文章，描述`access="noop"`了在映射中指定以指定仅查询属性。请参阅[NHibernate – 仅查询属性](http://ayende.com/Blog/archive/2009/06/10/nhibernate-ndash-query-only-properties.aspx "NHibernate – 仅查询属性")。我自己没有尝试过。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-18T06:39:36.923

使用普通的 SQL 查询是不可能的吗？我现在无法对其进行测试，但我想您可以查询未映射的字段，只要您的查询返回 Hibernate 可以映射到对象的内容。（对不起，如果这已经被排除在选项之外）

编辑：这似乎工作：

```
ISQLQuery query = session.CreateSQLQuery(
                "select c.* " +
                "from Customer c " +
                "where c.CreateDate > :CreateDate");

query.SetDateTime("CreateDate", new DateTime(2009, 3, 14));
query.AddEntity(typeof(Customer));

IList<Customer> results = query.List<Customer>(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-18T13:36:23.097

对于 HQL/Criteria 查询，NHibernate 只能处理已映射的内容（尽管正如 Andy White 所指出的，原始 SQL 仍然是一种选择）。如果要使用 Criteria 查询，则必须映射列。

然而，NHibernate 并不局限于使用可公开访问的成员。因此，如果您想继续隐藏该`CreateDate`字段，请声明一个私有（可能是只读的？）属性。`access="field"`或者，您可以跳过该属性并通过在映射中的属性元素上设置来指示 NHibernate 使用字段级别访问。

我知道您想在不映射字段的情况下执行此操作，但我认为这是不可能的（无需修改 NHibernate 源；）。尽管如此，如果您正在查询该字段，那么该字段与您的域有一些相关性，因此可能值得映射到其中，并且使用私有或受保护的成员，您可以将信息隐藏在适当的位置。

# database - 将实时数据库上传到网络

> ID：657183
> 
> 赞同：0
> 
> 时间：2009-03-18T06:43:28.677
> 
> 标签：database, ms-access, upload

大家好，我在上传数据库时遇到了一个小问题。我在我的电脑上为车辆跟踪系统创建了一个本地主机网站，现在我不知道上传它。我的电脑中有两个 Microsoft Access 数据库，用于网站，它们会定期（几乎每秒）更新，必须实时上传到网络。现在我在本地主机上使用 ODBC .. 有人知道怎么做吗？如果有请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T07:01:33.640

根据您在网络服务器多用户环境中使用 ACCESS 的流量，这将是一个真正的痛苦。（访问中的文件等）。也许尝试构建一个 Web 服务以直接在服务器上进行更改？

如果您不想使用 ODBC，您可以查看 ADO 连接字符串（www.connectionstrings.com 是一个很好的起点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-19T07:50:17.837

我同意@Sascha，我什至不会浪费时间尝试运行您的网站以访问。

根据您的主机，您应该可以访问免费的 mysql 或 mssql 数据库。改用这个。编写一个新页面，获取参数并将它们写入您的在线数据库，这样您就可以在您的机器上设置一个中继，将更改从本地机器推送到网络。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-22T14:18:42.207

这绝对不容易，但可以做到。您需要在 Web 服务器上运行 SQL Server 数据库，然后将数据从 Access 推送到 SQL Server，或从 SQL Server 拉取数据。

我们有几个链接在 SQLServerPedia 上讨论它：

*   [如何在 MS Access 和 SQL Server 数据库之间同步数据？](http://web.archive.org/web/20100207052632/http://sqlserverpedia.com/blog/2007/08/page/im-a-newbie/how-can-i-synchronize-data-between-ms-access-and-sql-server-databases/)
*   [如何使用 MS Access 中的链接表将 SQL Server 数据库链接到 MS Access？](http://web.archive.org/web/20130122041144/http://sqlserverpedia.com/blog/replication/how-can-i-link-a-sql-server-database-to-ms-access-using-link-tables-in-ms-access/)

再说一次，这并不容易——从你提出问题的方式来看，你不会喜欢你会读到的答案。您可能希望聘请在基于 Web 的数据库和复制方面经验丰富的人员，以加快您的速度并设定您对这将是多么具有挑战性的期望。

# python - Python：防止文件输入添加换行符

> ID：657186
> 
> 赞同：25
> 
> 时间：2009-03-18T06:44:30.687
> 
> 标签：python, file-io

我正在使用 Python 脚本来**查找和替换**给定目录的文本文件中的某些字符串。我正在使用该`fileinput`模块来简化查找和替换操作，即读取文件、替换文本并写回同一个文件。

代码如下所示：

```
import fileinput
def fixFile(fileName):
    # Open file for in-place replace
    for line in fileinput.FileInput(fileName, inplace=1):
        line = line.replace("findStr", "replaceStr")
        print line  # Put back line into file 
```

问题是写入的文件有：

1.  *在每一*行之后插入一个空行。
2.  *每*行末尾的 Ctrl-M 字符。

如何防止这些额外的附件被插入到文件中？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-03-18T06:54:22.707

您的换行符来自打印功能

采用：

```
import sys

sys.stdout.write ('some stuff') 
```

你的换行符会消失

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-18T06:49:34.510

采用

```
print line, 
```

或者

```
file.write(line) 
```

修复额外的换行符。

从 [Ctrl]-[M] 开始 - 这可能是由 DOS 编码的输入文件引起的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-05-20T09:06:39.420

而不是这个：

```
print line  # Put back line into file 
```

用这个：

```
print line,  # Put back line into file 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2010-04-08T15:04:01.917

将 for 循环中的第一行更改为：

`line = line.rstrip().replace("findStr", "replaceStr")`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T08:35:51.393

由于每个迭代打印语句都以换行符结尾，因此行之间会出现空行。

为了克服这个问题，您可以将条带与打印一起使用。

```
import fileinput
def fixFile(fileName):
  for line in fileinput.FileInput(fileName, inplace=1):
    line = line.replace("findStr", "replaceStr")
    print line.strip() 
```

现在，您可以看到空白行是条纹的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-10T12:43:29.303

对于 Python 3.4 的更新，您可以使用：

```
print(line, end = '') 
```

以避免插入新行。

# vb.net - 在 gridview 的 rowdatabound 事件中获取命令参数

> ID：657188
> 
> 赞同：0
> 
> 时间：2009-03-18T06:45:48.390
> 
> 标签：vb.net

以下是gridview 中buttonclick 的代码。

```
Protected Sub lnkChangeStatus_Click(ByVal sender As Object, ByVal e As EventArgs) 

    Dim gvr As GridViewRow = TryCast(DirectCast(sender, LinkButton).Parent.Parent, GridViewRow) 

    Dim lngProfileId As Long = Convert.ToInt64(gvwBusinessProfiles.DataKeys(gvr.RowIndex).Value) 

End Sub 
```

我想`lnkChangeStatus`在它的点击中获得命令参数。有什么办法吗

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2009-03-18T07:10:05.243

我猜事件处理程序的语法（针对 Click 的命令事件）应该如下所示。

```
Protected Sub lnkChangeStatus_Command(ByVal sender As Object, ByVal e As CommandEventArgs) 
.....
End Sub 
```

您可以在代码块中使用 e.CommandName 或 e.CommandArgument。
参考[这个](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx)

# interface - 托管 C++ 中的接口类

> ID：657209
> 
> 赞同：1
> 
> 时间：2009-03-18T07:02:51.577
> 
> 标签：interface, managed-c++, vtable

托管 C++ 中的接口对我来说有点奇怪，因为它们允许在其中使用静态方法和成员。例如，以下是一个有效的 MC++ 接口。

```
interface class statinterface
{
    static int j;
    void Method1();
    void Method2();

    static void Method3()
    {
        Console::WriteLine("Inside Method 3");
    }

    static statinterface()
    {
        j = 4;
    }
}; 
```

好吧，我的问题是接口中静态方法的用途是什么。以及虚拟表等发生了什么。实现此接口的类的虚拟表将是什么。有很多问题浮现在脑海。这种类型的类，即接口类不等同于普通的抽象类，因为我们不能在这里定义非静态方法。

我只想知道在界面中允许静态的智慧。这肯定违反了 IMO 的 OOP 原则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T07:43:24.850

回答这个问题的最简单方法是使用 .NET Reflector 检查从代码生成的程序集。

VTable 只包含虚函数，因此根本不会包含静态。

该语言称为 C++/CLI，而不是托管 C++（早在 2002 年就已经很糟糕了）。

这与 OOP 原则无关，OOP 原则本来就没有包含纯接口的概念。

# regex - 如何在 TextMate 中搜索并替换包含一些变量的代码片段？

> ID：657218
> 
> 赞同：0
> 
> 时间：2009-03-18T07:11:22.960
> 
> 标签：regex, search, replace, project, textmate

我有一个包含 49 个文件夹的项目，每个文件夹都有一个名为 index.php 的文件

所有 index.php 文件**几乎**相同，除了一部分会根据其所在的文件夹而变化。

```
<?php include_once("/home/bgarch/public_html/galleryheader.html"); ?>
<?php include_once("/home/bgarch/public_html/culture/loadscripts.html"); ?>

</head>
<body>

<div class="header">
    <?php include_once("/home/bgarch/public_html/header.html"); ?>
</div>

<div class="clear"></div>

<div class="displaywrapper">
    <?php include_once("content.html"); ?>
</div></div>    

<div class="clear"></div>

<?php include_once("/home/bgarch/public_html/footer.html"); ?> 
```

在上面写着：“../culture/..”的第二行中，文化一词是变量，并且根据它所在的文件夹而有所不同。

我需要知道的是执行“在项目中查找/替换所有内容”，它会自动将每个“index.php”文件中的**所有文本替换为以下内容“**

```
<?php include_once("http://www.bgarchitect.co.nz/subPage/index.php"); ?> 
```

在过去的 2 个小时里，我一直在试图找出正则表达式来实现这一点，但到目前为止还没有成功。也许不可能这样做？

无论如何，我想我会在这里问一个问题，希望它实际上比我预期的要容易得多。因此，非常感谢任何帮助/指针/提示或技巧。

感谢阅读，詹尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T08:19:02.580

如果我理解正确，您想用单词 subPage 替换单词文化（即当前目录）？

您可以在 TextMate 包的帮助下做到这一点。

*Bundles > Bundle editor > Edit commands*，然后添加一个*新命令*。将此添加为命令。我认为它可以满足您的需求。您必须将命令的输入设置为*Entire document*并将输出设置为*Replace document*。

```
#!/bin/bash

sed "s/"${TM_DIRECTORY##*/}"/theWordYouWanToReplaceTheDirWith/g" | cat 
```

# c# - 哪个是 C# 和 .NET 的“最佳”数据访问框架/方法？

> ID：657220
> 
> 赞同：30
> 
> 时间：2009-03-18T07:14:31.207
> 
> 标签：c#, .net, asp.net, sql

（编辑：我把它做成了一个社区维基，因为它更适合协作格式。）

从 .NET 访问 SQL Server 和其他数据库的方法有很多。所有人都有其优点和缺点，这绝不是一个简单的问题，即哪个是“最好的”——答案将永远是“视情况而定”。

但是，我正在寻找**在不同系统级别的上下文中对不同方法和框架进行高级别比较**。例如，我可以想象，对于一个又快又脏的 Web 2.0 应用程序，答案将与内部企业级 CRUD 应用程序大不相同。

我知道 Stack Overflow 上有很多关于这个问题的子集的问题，但我认为尝试建立一个摘要比较会很有用。随着我们的进行，我将努力通过更正和澄清来更新问题。

到目前为止，这是我在高层次上的理解——但我确信这是错误的……我主要关注微软的方法来保持这一点。

## [ADO.NET 实体框架](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework)

*   与数据库无关
*   很好，因为它允许交换后端进出
*   不好，因为它会影响性能并且数据库供应商对此不太满意
*   似乎是MS未来的首选路线
*   学习起来很复杂（不过，请参阅[267357](https://stackoverflow.com/questions/267357/how-is-the-net-entity-framework-overkill-versus-linqtosql)）
*   它通过[LINQ to Entities](http://en.wikipedia.org/wiki/ADO.NET_Entity_Framework#LINQ_to_Entities)访问，因此提供了 ORM，从而允许在您的代码中进行抽象

## [LINQ 到 SQL](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_SQL)

*   不确定的未来（请参阅[LINQ to SQL 真的死了吗？](http://www.infoq.com/news/2008/11/DLINQ-Future)）
*   简单易学 （？）
*   仅适用于 MS SQL Server
*   另请参阅[LINQ 的优缺点](https://stackoverflow.com/questions/271384/pros-and-cons-of-linq-language-integrated-query)

## “标准”ADO.NET

*   没有 ORM
*   没有抽象，所以你回到“自己动手”并使用动态生成的 SQL
*   直接访问，可实现更好的性能
*   这与关于是否关注对象或关系数据的古老争论有关，答案当然是“这取决于大部分工作在哪里”，因为这是一个无法回答的问题，希望我们不要必须进入太多。恕我直言，如果您的应用程序主要是处理大量数据，那么将其过多地抽象为前端代码中的对象是没有意义的，您最好使用存储过程和动态 SQL 来完成尽可能多的工作可以在后端。然而，如果您主要有导致数十或数百行级别的数据库交互的用户交互，那么 ORM 是完全有意义的。所以，我想我对好的老式 ADO.NET 的论点是在你操纵和修改大型数据集的情况下，
*   当然，另一种情况是您必须访问已经由存储过程保护的遗留数据库。

## ASP.NET 数据源控件

这些是完全不同的东西还是只是标准 ADO.NET 上的一层？- 如果你有一个 DAL 或者你实现了 LINQ 或实体，你真的会使用这些吗？

## 休眠

*   似乎是一个非常强大和强大的ORM？
*   开源

其他一些相关链接； [NHibernate 或 LINQ to SQL](https://stackoverflow.com/questions/53417/nhibernate-or-linq-to-sql) [实体框架与 LINQ to SQL](https://stackoverflow.com/questions/8676/entity-framework-vs-linq-to-sql)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T07:22:28.877

我认为 LINQ to SQL 非常适合针对 SQL Server 的项目。

如果我们针对不同的数据库，ADO.NET Entity Framework 会更好。目前我认为有很多提供程序可用于 ADO.NET 实体框架、PostgreSQL、MySQL、esql、Oracle 和许多其他提供程序（请查看[http://blogs.msdn.com/adonet/default.aspx](http://blogs.msdn.com/adonet/default.aspx)）。

我不想再使用标准的 ADO.NET，因为这很浪费时间。我总是选择 ORM。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T10:17:33.887

从事过 20 多个不同的 C#/ASP.NET 项目后，我总是最终使用[NHibernate](http://en.wikipedia.org/wiki/NHibernate)。我经常从一个完全不同的堆栈开始——ADO.NET、ActiveRecord、手卷怪异。NHibernate 可以在各种情况下工作的原因有很多，但对我来说绝对突出的是节省时间，尤其是与代码生成相关联时。您可以更改数据模型，并重建实体，但大多数/所有其他代码不需要更改。

MS 确实有一个讨厌的习惯，即在该领域推动与现有开源平行的技术，然后在它们没有起飞时放弃它们。有人记得 ObjectSpaces 吗？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-19T04:53:08.960

为新技术添加：

现在 Microsoft Sql Server 在 Beta 版中适用于 Linux，我认为不与数据库无关是可以的。.Net Core Path 和 MS-SQL 路由允许您在完全不依赖 Windows 的情况下在 Ubuntu 等 Linux 服务器上运行。

因此，imo，一个非常好的流程是不使用完整的 ORM 框架或数据控件，并利用 SSDT Visual Studio Projects（Sql Server 数据工具）和 Micro ORM 的强大功能。

在 Visual Studio 中，您可以将 Sql Server 项目创建为合法的 Visual Studio 项目。这样做允许您通过表设计器或直接在 Visual Studio 中进行原始查询编辑来创建整个数据库。

其次，您将获得 SSDT 的 Schema Compare 工具，您可以使用该工具将您的数据库项目与 Microsoft Sql Server 中的实时数据库进行比较并更新它。您可以将 Visual Studio 项目与服务器同步，从而将项目中的更新发送到服务器。或者您可以将服务器与您的项目同步，从而更新您的源代码。通过这条路线，您可以轻松获取 DBA 昨晚在维护中所做的更改，并使用简单的工具轻松推出新功能的新开发更改。

使用相同的工具，您无需实际运行即可计算迁移脚本，如果您需要将其传递给运营部门并提交变更单，它适用于该流程。

现在要针对您的 MS-SQL 数据库编写代码，我推荐 PetaPoco。

因为 PetaPoco 与上述 SSDT 解决方案完美内联。PetaPoco 带有 T4 文本模板，您可以使用它来生成所有数据实体类，并为您生成批量数据层类。

问题是，您必须自己编写查询，这不是一件坏事。

所以你最终会得到这样的结果：

```
var people = dbContext.Fetch<Person>("SELECT * FROM People where Username Like '%@0%'", "bob"); 
```

PetaPoco 会自动为您处理参数化 @0，它还有方便的 Sql 类来构建查询。

此外，PetaPoco 比 EF6 快一个数量级，比 EF7 快 8 倍以上。

所以总的来说，这个解决方案涉及使用 SSDT 进行 SCHEMA 管理，使用 PetaPoco 进行代码集成，以获得高可维护性、定制化和非常好的性能。

这种方法的唯一缺点是您很难将自己绑定到 Microsoft Sql Server。但是，imo，Microsoft Sql Server 是最好的 RDBM 之一。

它有 DBMail、Jobs、CLR 对象功能等等。此外，Visual Studio 和 MS-SQL 服务器之间的集成非常出色，如果您选择不同的 RDBMS，您将不会得到任何结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-12-25T00:51:36.283

我必须说，我从来没有使用**NHibernate**需要开始使用的大量时间......浪费在**XML 设置**上的时间。

我最近在**MVC2**中做了一个 Web 应用程序，我确实选择了**ADO Entities Framework**，并且一直使用 Linq。

我必须说，**我对速度印象深刻**！我们的网站每天有大约 35 000 名唯一访问者，每天大约有 60Gb 的带宽（我通过在 Amazon S3 中托管所有静态文件从根本上减少了这个 60Gb 的数字 - 我必须说，他们拥有很棒的 .NET 包装器）。

**我会一直走这条路**。它很容易上手（只需添加新的数据项，选择表就可以了！对于数据库中的每次更改，我们只需要刷新模型 - 只需单击 2 次即可自动完成）而且使用起来很有趣 - Linq 规则！

# c# - 如何创建命令应用程序，例如为 vista 运行命令

> ID：657225
> 
> 赞同：0
> 
> 时间：2009-03-18T07:18:56.407
> 
> 标签：c#, winapi

如何使用 C# 创建类似于窗口运行命令的应用程序。当我插入任何命令（例如：ipconfig）时，会在文本框中返回结果（例如：192.168.1.1）。

1.  如何获取windows命令列表？
2.  如何获得命令结果？
3.  如何在机器上获取已安装的应用程序列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T07:42:55.817

(1) 命令列表很可能来自在您的 %PATH% 中找到的任何可执行文件。您可以通过在 %PATH% 指定的每个文件夹中查找所有 .exe/.bat/其他可执行文件来找出您的列表。您甚至可能不需要知道哪些应用程序可用，Process.Start 方法会为您找到它们。（见下文）

(2) 您可以使用以下方式以编程方式运行命令行工具：

```
System.Diagnostics.Process.Start("notepad.exe"); // located using %PATH% 
```

要捕获输出，您必须像这样重定向它：

```
System.Diagnostics.ProcessStartInfo psi =
    new System.Diagnostics.ProcessStartInfo(@"ipconfig");
psi.RedirectStandardOutput = true;
psi.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
psi.UseShellExecute = false;

System.Diagnostics.Process myProcess;
myProcess = System.Diagnostics.Process.Start(psi);
System.IO.StreamReader myOutput = myProcess.StandardOutput; // Capture output
myProcess.WaitForExit(2000);
if (myProcess.HasExited)
{
    string output = myOutput.ReadToEnd();
    Console.WriteLine(output);
} 
```

(3) 可能与1相同的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T07:37:34.990

使用向导创建 Windows 窗体应用程序。绘制一个文本框和一个按钮。将 Click 处理程序添加到获取文本框内容并启动进程的按钮。使用[进程](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)类。该类还有一个`StandardOutput`属性，您可以从中读取输出，以便将其放入文本框中。

您可能会发现要使用许多命令提示符命令，您需要`CMD /C`在前面键入，因为它们不是与命令解释器分开的程序。

至于发现命令列表，这通常是不可能的。命令只是一个程序（或`CMD`命令解释器的一个功能）。您可以在硬盘驱动器中搜索`.exe`文件，但其中许多文件不适合用作“命令”。

# sql-server - 从 SQL Server 报告 Web 服务调用返回数据

> ID：657227
> 
> 赞同：0
> 
> 时间：2009-03-18T07:20:01.613
> 
> 标签：sql-server, reporting-services, reportingservices-2005

我正在生成一个包含版本号的报告。版本号存储在数据库中，并作为报告生成的一部分进行检索/递增。

唯一的问题是，我通过 Web 服务调用调用 SSRS，它将生成的报告作为字节数组返回。

有没有办法从这个生成的报告中获取版本号？例如显示一个对话框，上面写着

> 您生成了状态报告，版本号 3

我尝试传入一个输出参数并将其设置在存储过程中。当我在 sql 管理工作室中执行它时，它被修改了，但在报告工作室中没有。或者至少我似乎无法绑定到修改后的执行后值（使用表达式`=Parameters!ReportVersion.Value`）。

当然，我可以在调用 SSRS 网络服务之前自己从数据库中获取/增加版本号，并将其作为参数传递给报告，但这可能会导致并发问题。

总的来说，storedproc 访问/生成版本号并将其返回给 ReportingEngine 似乎更简洁，ReportingEngine 将生成带有版本号的报告并将更新的版本号返回给 WebService 客户端。

有什么想法/想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-08T22:42:34.703

由于我还不能添加评论...

只是把这个扔出去。也许将报告呈现为 XML（到 XML 文档对象）并通过 XQuery 或 XPath 提取您的版本号。

当然，这可能会扰乱您的整个“版本控制”方案，因为您将呈现两次报告。也许添加一个参数来指示是否增加您的版本号？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-23T06:48:20.613

作为一种解决方法，您可以创建一个子报告来执行此操作。与其将版本作为输出变量返回，不如将其作为结果集中的列返回。

希望这可以帮助，

账单

# syntax - 从程序员的角度来看，Erlang 是一种简洁的语言吗？

> ID：657235
> 
> 赞同：6
> 
> 时间：2009-03-18T07:23:52.073
> 
> 标签：syntax, erlang

Erlang 会在简明性的范围内落在哪里，比如说，Java/.net 在不太简洁的一端，而 Ruby/Python 在更简洁的一端？我有一个 RSI 问题，因此出于健康原因，简洁对我来说尤其重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-18T08:48:14.070

作为语言特征的简洁性定义不明确，可能不统一。根据问题，不同的语言可能或多或少简洁。

Erlang 作为一种函数式语言可以非常简洁，超越 Ruby 或 Python。具体来说，模式匹配通常会替换 if 语句，递归和列表推导可以替换循环。

例如Java会有这样的东西：

```
String foobar(int number){
  if (number == 0) {
    return "foo";
  } else if (number == 1) {
    return "bar";
  }
  throw new Exception();
} 
```

而 Erlang 代码看起来像：

```
foobar(0) -> "foo";
foobar(1) -> "bar". 
```

例外是固有的，因为除了 0 或 1 之外没有输入子句。这是一个很适合 Erlang 风格开发的问题。

一般来说，任何可以定义为转换的东西都会特别好地匹配函数式语言，并且可以写得非常简洁。当然，许多函数式语言狂热者表示，编程中的任何问题*都是*一种转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T08:46:10.970

与我在 Java 和 Python 方面的经验相比，Erlang 允许您用很少的代码行来实现功能。过去只有 Smalltalk 或 Scheme 能接近我。你只得到很少的开销，但你通常倾向于说出模块、函数、变量和原子的标识符。它们使代码更具可读性。你有很多正常的、花括号和方括号。因此，它的舒适程度取决于您的键盘布局。你应该试一试。

缪

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T09:14:30.870

Erlang 出奇的简洁，尤其是当您想要获得性能和可靠性时。

即使与 Haskell 相比，Erlang 也很简洁：

> [http://thinkerlang.com/2006/01/01/haskell-vs-erlang-reloaded.html](http://thinkerlang.com/2006/01/01/haskell-vs-erlang-reloaded.html)

即使与 C++ 相比，它的速度也出奇的快（而且可靠）：

> [http://www.erlang.se/euc/06/proceedings/1600Nystrom.ppt](http://www.erlang.se/euc/06/proceedings/1600Nystrom.ppt)

（少 18 倍的 SLOC 不足为奇）。

无论如何，它总是取决于你的喜好和你想要达到的目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-24T00:37:26.200

你必须花一些时间，编写代码，来理解 erlang 的最佳点，与所有其他新兴工具相比，DHT、文档存储、mapreduce 框架、hadoop、GPU、scala，......如果你尝试这样做，比如说 SIMD 类型应用程序超出最佳范围，您可能最终会与范式作斗争并编写冗长的代码，而如果您遇到需要无缝扩展服务器和中间件的问题，它会自然而然地进行。（我认为，scala 在其最佳位置的崛起也是不可避免的）

几年前的 Tim Bray Wide Finder 实验（提取大型 apache 日志文件）是一件值得查找的好事情，以及他对 erlang 的失望程度。

我一般不建议在 Alioth 枪战中放置太多存储，因为您不可避免地最终会比较真正好和坏的代码，但是如果您需要放置 LOC、erlang 与 C、ruby 的数量，等等

[https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/erlang.html](https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/erlang.html)

# automated-deploy - 什么是好的代码部署策略？

> ID：657237
> 
> 赞同：3
> 
> 时间：2009-03-18T07:26:13.423
> 
> 标签：automated-deploy

我正在做一个 Django 项目。我们的团队遵循敏捷实践（TDD、非常短的启动时间等..）

在功能的部署阶段，我们按照手动程序将代码部署到我们的生产机器上。从某种意义上说，手动程序是手动运行（整个项目的）测试用例并手动运行syncdb（或任何最新的数据库更改）和其他东西。

这个手动的东西每天大约需要 1/2 小时。所以我想自动化这个。那么是否有任何自动部署系统或其他东西可以接受我给出的命令并做我想做的事情，或者它应该只手动完成？（使用一个包含我所有命令的简单 shell 文件。在这种情况下，我需要学习一点 shell 编程，因为如果任何测试用例失败，我不想在生产机器上更新我的最新代码。所以这样的排序的部署条件存在，这可能涉及一些 shell 编程。我猜！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-31T05:00:26.843

我自己刚开始研究这个，看起来 Capistrano 的 Python 等效项是[Fabric](http://www.nongnu.org/fab/)，尽管可能不那么成熟。似乎越来越多的人想要切换只是因为 Capistrano 过于以 ruby​​/rails 为中心，尽管我没有看到有人抱怨 Capistrano 无能或缺乏。YMMV。更多信息[在这里](http://lethain.com/entry/2008/nov/04/deploying-django-with-fabric/)和[这里](http://stii.co.za/python/switched-to-python-fabric/)。

编辑：看起来 Fabric 正在经历很多变化。他们将主页移至[http://docs.fabfile.org/](http://docs.fabfile.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T09:39:15.180

因此，在敏捷术语中，您已经确定了部署过程中的重复，现在您正在寻找重构它的方法。;-)

在 Ruby/Rails 世界中，您首先会转向[Capistrano](http://en.wikipedia.org/wiki/Capistrano)或[Vlad The Deployer](http://rubyhitsquad.com/Vlad_the_Deployer.html)，而在 Python/Django 世界中，您会转向等价物，除了 AFAIK 没有。

从[这篇文章](http://www.unessa.net/en/hoyci/2007/06/using-capistrano-deploy-django-apps/)看来，Capistrano 已成功用于处理 Django 部署，因此这是一个值得探索的选项。

除此之外，你为什么需要 shell 编程？你在 Python 中有一个超级强大的脚本语言——为什么不自动化你的手动过程呢？

# c# - SharePoint ListItem 错误：“值不在预期范围内”

> ID：657241
> 
> 赞同：7
> 
> 时间：2009-03-18T07:27:14.280
> 
> 标签：c#, sharepoint, sharepoint-2007

您好我正在使用 SharePoint 命名空间进行开发，当我尝试从列表项中检索标题字段时遇到了以下错误。

> 值不在预期范围内

但是我知道该字段存在，因为我打印了所有字段。

```
string value = (string)listItem[listItem.Fields["Title"].Id];
Console.WriteLine("Title = " + value); 
```

**更新：**用于检索列表项的视图在多大程度上在哪些字段可用？此代码失败并出现相同的异常：

```
SPListItemCollection items = list.GetItems(list.DefaultView);
foreach (SPListItem listItem in items)
{
  try
  {
    Console.WriteLine("Title = " + listItem.Title);
  }
  catch (Exception e) 
  { 
    Console.WriteLine("Exception: " + e.Message); 
  }
} 
```

在这两种情况下，list.DefaultView 属性都用于检索列表项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-17T10:01:20.870

我不知道你的错误是否解决了。但是我遇到了同样的问题，我找到了解决问题的方法。

您必须前往：
管理中心 > 应用程序管理 > 管理 Web 应用程序
选择正在使用的 Web 应用程序，然后通过功能区选择：
“常规设置 > 资源限制”。

在该向下滚动并查找“ `List View Lookup Threshold`”中，默认值是`8`增加值直到错误消失。

[参考链接](http://sharepointjoint.com/2012/09/value-does-not-fall-within-the-expected-range/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T15:04:38.970

“标题”字段可能存在于列表中，但不存在于默认视图中。你能做这个吗？

```
foreach (var item in list.Items) Console.WriteLine((string)item["Title"]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-04-13T19:07:09.283

我建议像

```
if (item.Fields.ContainsField("Last_x0020_Modified"))
{
    if (query.ViewFields.Contains("Last_x0020_Modified"))
    ... 
```

B/c 如果在 SPQuery.ViewFields 中没有请求该字段，您可能无法获取它（例外包括 Created 字段、ID 字段）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-26T13:34:39.133

我遇到了这个问题，因为该列不是默认视图的一部分。在创建 SPListItemCollection 时直接查询特定列，而不是依赖视图。

```
 SPList cityList = web.Lists[cityListName];
  SPListItemCollection items = cityList.GetItems("Title","LocCode");
  foreach (SPListItem item in items)
     {
          cityName = item["Title"].ToString().Trim();
          cityCode = item["LocCode"].ToString().Trim();
     } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-08T01:13:52.433

“标题”字段（默认情况下）在默认视图中不可用。如果您查看视图设置页面，标题被选中，但它被标记为“链接到带有编辑菜单的项目”。

视图公开的字段实际上名为“LinkTitle”（您可以通过枚举来确认`list.DefaultView.ViewFields`）。

您的问题的解决方案是简单地替换`item.Title`为`item["LinkTitle"].ToString()`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-12-29T14:35:15.823

我不知道为什么，但我从 SPListItemCollection 创建了一个 GridView 作为数据源。我有同样的错误。但我试图从集合中获取数据表：

```
SPListItemCollection res = da.getAllItems();
DataTable dt = res.GetDataTable(); 
```

然后我在我的 GridView 中看到包含列表项标题的字段称为“LinkTitle”。所以，我重写了我的代码： SPListItemCollection res = da.getAllItems();

```
gridView.DataSource = res.Cast<SPListItem>().Select(a=> a["LinkTitle"] );
gridView.DataBind(); 
```

一切正常:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-29T15:06:06.420

如果您重命名已存在的列，则可能会出现此问题。尝试删除它并创建一个具有相同名称的新文件。

或者在我发生的另一种情况下，我不小心用希腊文写了一个列名的字母！例如。"IsCooperation" Ι 是一个希腊字符

# asp.net - 运行时错误 - “/cart”应用程序中的服务器错误

> ID：657242
> 
> 赞同：-1
> 
> 时间：2009-03-18T07:27:16.153
> 
> 标签：asp.net, vb.net

我在 asp.net 中运行购物车应用程序。我在 IIS 中运行我的应用程序。运行时出现以下错误。

> ## “/cart”应用程序中的服务器错误。
> 
> 配置错误描述：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。
> 
> 源错误：
> 
> 第 32 行： --> 第 33 行： 第 34 行： 第 35 行：
> 
> 源文件：D:\ecomm_3_1_LITE\wwwroot\web.config 行：34
> 
> -------------------------------------------------- ------------------ 版本信息：Microsoft .NET Framework 版本：2.0.50727.42；ASP.NET 版本：2.0.50727.42

以下是我的 web.config 文件

Visual Studio 中的 Asp.Net 配置选项。设置和注释的完整列表可以在 machine.config.comments 中找到，通常位于 \Windows\Microsoft.Net\Framework\v2.x\Config -->

```
 <!-- SQL SP & TABLES PREFIX -->
    <add key="SQLprefix" value="gaspprod_"/>

</appSettings>

<connectionStrings> 
<add name="ConnStr" connectionString="Data Source=GRAPHIX\SQLEXPRESS;Initial Catalog=GlitzCart;Integrated Security=True " providerName="System.Data.SqlClient" />
</connectionStrings>
<system.web>
    <globalization uiCulture="en" culture="en-US"/>
    <!--<globalization uiCulture="hr" culture="hr-HR"/>-->

    <authentication mode="Forms"> 
        <forms name="guru_aspnet_cart"
               protection="All"
               timeout="30"
               path="/"
               loginUrl="AdminLogin.aspx"></forms>
    </authentication>

    <pages maintainScrollPositionOnPostBack="false"
           buffer="true"
            validateRequest="false"
           compilationMode="Auto"></pages>
    <customErrors mode="Off"
                  defaultRedirect="error.html"></customErrors>
    <compilation debug="true">
    </compilation>
    <!--<trace  enabled="true"  pageOutput="true"/>-->

</system.web>

<!--disable access to Admin directory for everyone, except for the administrators -->
<location path="admin"  allowOverride="false">
    <system.web>
        <authorization>
            <allow users="admin, admin2, malik "/> <!--ADMINISTRATORS USERNAMES, SEPARATED BY ", " -->
            <deny users="*"/>
        </authorization>
    </system.web>
</location>

<!--disable access to Admin/Modules directory -->
<location path="admin/modules"  allowOverride="false">
    <system.web>
        <authorization>
            <deny users="*"/>
        </authorization>
    </system.web>
</location>

<!--disable access to Modules directory -->
<location path="modules"  allowOverride="false">
    <system.web>
        <authorization>
            <deny users="*"/>
        </authorization>
    </system.web>
</location>

<!--disable access to Modules directory -->
<location path="SQLbackup"  allowOverride="false">
    <system.web>
        <authorization>
            <deny users="*"/>
        </authorization>
    </system.web>
</location> 
```

我必须进行哪些更改才能使我的应用程序运行？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T07:56:27.627

错误本身询问您是否启用了虚拟目录并将其设置为应用程序。

是这样吗？您的 web.config 位于文件根目录中，所以我会说不。

无论如何，您是否仔细检查过您是否启用了应用程序、启用了正确版本的 ASP.NET 并确保允许 ASP.NET 运行。

如果一切正常，那么我建议您接下来使用一个普通的 ASP.NET 网站/Web 应用程序（我更喜欢后者）并将其部署到该文件夹​​。不要编写任何代码并仔细检查它是否有效。

如果没有，则默认的 web.config 不起作用。这可能是您的 machine.config 或类似的错误。我个人会重新安装并重新注册.NET。大锤的方法！

如果它确实有效，那么您的 web.config 可能已损坏。

这些都是猜测，但我希望他们能有所帮助！

# c++ - C++ 程序员不知道以空字符结尾的字符串是如何工作的可以接受吗？

> ID：657248
> 
> 赞同：7
> 
> 时间：2009-03-18T07:30:45.020
> 
> 标签：c++, string

有 1,5 年经验的 C++ 程序员有没有办法不知道空终止字符串作为一个概念存在并广泛用于各种应用程序中？这是否表明他可能是一个糟糕的雇员？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-03-18T07:35:50.687

> 有 1,5 年经验的 C++ 程序员有什么办法不知道以 NULL 结尾的字符串作为一个概念存在并广泛用于各种应用程序中？

没有。他/她在这 1.5 年里做了什么？

> 这是否表明他可能是一个糟糕的雇员？

是的。对于 C++ 程序员来说，C 知识应该是强制性的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-18T07:36:37.067

他用什么——`std::string`只用？他知道字符串文字吗？他对字符串文字有什么看法？

没有太多细节可以告诉你他是否是一个糟糕的员工，但他听起来比大多数人都需要更多的交谈。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2009-03-18T07:56:40.420

> 这是否表明他可能是一个糟糕的雇员？

毫无疑问，C++ 程序员**必须**了解所有很酷的 STL 东西背后发生的事情。

不幸的是，市场上有太多不合标准的 C++ 程序员。

顺便说一句：不是以 NULL 结尾，而是以零结尾。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-03-18T08:06:22.017

恕我直言，我希望一个称职的程序员有基本的好奇心，想知道像 STL 容器这样的东西实际上是如何工作的。请注意，我不希望他们一定准备好实施一个。

但是以 NUL 结尾的字符串是 C 和 C++ 的基本数据类型。有机会避免使用容器的杂乱细节是一种奢侈。您仍然必须欣赏容器为您做的事情。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-18T08:01:21.750

我想说这取决于你想雇佣他们的目的，以及他们在你的组织中的目的。

懂 C++ 但不懂 C（现在很容易做到）的人将属于这种类型。他们有可能成为一名优秀的员工。但是，我会说这是一个警告，所以根据他们的简历，这将是我书中对他们的一个标记。

但是，如果他们将从事相当简单的项目，并且不需要设计和开发代码库的关键部分（至少在早期），他们可能会很好。

但是，我不会聘请不了解此类基本概念的人进行设计或从事关键系统的工作。我聘请的任何将从事 C++ 项目的高级开发人员都需要了解内存管理、C 和 C++ 的基本概念、模板和泛型编程，以及他们所使用的语言的所有基础知识，至少在合理程度上将使用。

不理解字符串文字如何工作的概念将是一个很大的缺点 - 即使他们将使用 std::string 或类似的东西，我希望他们至少在某种程度上理解它是如何工作的，以及其他选项在那里。理解这些概念有助于理解更新、更好的技术背后的基本原理，也有助于理解使用它们时所做的妥协。它还有助于理解在那里做出的设计决策，并将它们应用到您自己的项目中。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-18T08:01:48.503

在我们公司所做的工作中，我想许多其他地方也是如此，您必须了解以 NULL 结尾（或以零结尾）的字符串。是的，我们使用 C++，并且尽可能使用 std::string。但是我们有几年前开发的代码，它使用了 C 风格的字符串、sprintf 和这类东西。那么你有外部代码和API，你怎么能在不知道这些C概念的情况下调用Windows API呢？

那么他会是一个糟糕的雇佣者吗？好吧，你不知道的东西你可以学到……但这绝对不是一个好兆头。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-18T07:57:37.030

以 NUL 结尾的字符串（又名 ASCIIZ）甚至不是 C 构造，我认为一个好的程序员至少应该知道有不同的方式来存储字符串（以 0 结尾，以长度为前缀......）。

也许你永远不需要这个，但对我来说，感觉就像在没有打开它的情况下使用你的电脑，看看里面有什么只是为了更好地理解它。

我不会说不了解它的人可能是一个糟糕的雇用，但请注意，如果您在项目中使用以 NUL 结尾的字符串，他将不得不学习这个概念并且可能会偶然发现常见的错误这个字段（不将数组大小增加 1 以存储额外的 0 等），了解 NUL 终止字符串的程序员不会。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-18T07:41:16.057

不知道它们的存在 - 一个很难使用它们的非常糟糕的迹象 - IMO 并不是一个真正的坏迹象。早在我编写 C++ 编程的时候，我就避免使用 null 终止的字符串，但字符串文字除外。

改为使用 std::strings（或 CStrings）。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-03-18T08:17:04.147

这意味着他们从未打开过输入或输出的文件。标准库无法通过 std::string 指定文件名 - 您必须使用以零结尾的文件名。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-03-26T13:53:44.633

听起来这是一个没有程序员出身的程序员。我在大学里上过 C++ 课，甚至读过几本关于这门语言的书。前 3 章中的每本书都将解释一个字符串（一个字符数组）如何通过使用“/0”标识符来知道它的结尾。这是C++的基础知识。

这个程序员听起来像是一个商业用户，他想通过学习“编程”来降低成本，以便在没有受过适当教育和经验丰富的开发人员的情况下为公司创建软件。

对不起，如果这听起来很苛刻。我非常认真地对待我的职业，并认为它是一种艺术形式。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-18T08:09:21.573

考虑任何基于 C/C++ 的本科课程作业。他/她必须参加一门数据结构课程，并且这门课程必须有一个作业，他们必须从头开始实现字符串类型。显然，没有人期望 std::string 的所有功能，但他们一定已经实现了一个字符串类，并且当他们这样做时，他们一定已经深入探讨了这个问题。

没有雇佣。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-03-18T12:05:30.743

人们在接受采访时会说和做各种奇怪的事情。你见过这个人做任何编码吗？

1.5年不是很长的时间，但是如果员工不能正确思考，经验就意味着蹲下。因此，我将其记录为警告标志并深入挖掘。如果面试阶段结束了，你必须做出决定，在我看来，[你的答案应该是 NO HIRE](http://www.joelonsoftware.com/articles/GuerrillaInterviewing3.html)。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-03-18T12:11:33.130

我会说这取决于你在寻找什么。如果您正在寻找一个相对缺乏经验（因此可能很便宜）的程序员，您可以塑造以适应您的组织，那么他可能没问题。您刚刚发现他不知道 C 是如何做事的，而且当它们出现时您必须向他解释一大堆 C 概念。

在这一点上，重要的是要弄清楚他是没有受过教育（他以前从未遇到过这种需要），还是他是那种从不学习任何他不需要的东西的人，或者他是个白痴。如果＃1，那么您可以考虑雇用他，如果他知道足够有用的话。如果＃2，那么我会通过，但也许您可以使用 9-5er。如果#3，给他看门。

而且我不会太认真地不知道 C 的东西，我遇到过用 C 编程 15 年的人，他们不知道`__FILE__`和`__LINE__`. 他们很好，只是在我展示给他们之前他们从来没有遇到过。这家伙可能也是这样——他只见过STL的做事方式，所以他什么都不知道。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-03-26T13:49:40.870

好吧，我从德国 SAP 的一个朋友那里听说他们聘请了一个开发人员，后来发现他一直认为 1KB = 1000 字节。看起来他们是在他制造某种错误时发现的。他们很震惊，然后让他去做客户支持。

与此相比，您新聘用的开发人员可能是个天才。如果认真的话，他本可以在高级语言占据大部分市场并且没有跳过低级编程时代（C++ 或其他东西）时才开始积累经验。

不一定说明他不好。只是属于新一代的百事可乐开发者。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-03-26T13:54:47.847

在您的招聘决定中，您应该考虑他是否能够了解重要信息，而不是他现在是否知道这些信息。就商业经验而言，一年半几乎不是任何时间。正如其他人所提到的，深入挖掘，尝试找到他的编程知识的边界，并尝试弄清楚将这些边界向外推会有多困难。这在很大程度上取决于个人习惯和性格。如果他是一个很好的学习者和一个很好的沟通者，他就是一个很好的雇员。如果技术学习超出了他的能力范围，那么编程对他来说可能不是最好的职业。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-03-18T07:39:29.507

不存在以 NULL 结尾的字符串，所以我猜他可能是个好员工。

**更新：** 根据一些评论，C++ 标准中出现了*空终止*和*终止 '\0' 。*我没有删除我的答案，而是把它变成了 wiki，以保留辩论中有趣的部分。

# automated-tests - Watin - 如何使用弹出页面测试网站

> ID：657250
> 
> 赞同：7
> 
> 时间：2009-03-18T07:31:37.577
> 
> 标签：automated-tests, dynamics-crm, watin, dynamics-crm-4

我正在使用 WatiN（.Net 中的 Web 应用程序测试）在 Dynamics CRM 4.0 网站上进行集成测试。CRM 使用许多弹出窗口——例如，单击列表中的联系人会打开一个包含联系人详细信息的新浏览器窗口。

我想测试：

*   登录 CRM（完成）
*   转到联系人列表（完成）
*   单击联系人，从而触发弹出窗口（完成）
*   测试联系人实体/表单中的功能（不能）

所以我需要抓住弹出的窗口。如何？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-18T08:45:05.763

```
//after the click that opens the popup:    
IE iepopup_1 = IE.AttachToIE(Find.ByUrl(theUrlOfThePopup));
//operate on iepopup_1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-12-17T14:22:40.187

最新版本的 WatiN (v2.0.20.1089) 的语法略有变化，现在是：

```
IE poppedUpBrowser = IE.AttachTo<IE>(Find.ByUrl("http://www.popped-up-site.co.uk/")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-02-15T19:56:59.977

也许只搜索 URL 的一部分就可以解决它。这可以使用正则表达式来完成：

```
System.Text.RegularExpressions.Regex popupHiddenRegEx = new System.Text.RegularExpressions.Regex("part_Of_URL");
IE poppedUpBrowser = IE.AttachTo<IE>(Find.ByUrl(popupHiddenRegEx)); 
```

# visual-studio - Visual Studio 2008 在打开 aspx/ascx 文件时挂起

> ID：657251
> 
> 赞同：11
> 
> 时间：2009-03-18T07:31:47.700
> 
> 标签：visual-studio, visual-studio-2008

我有VS08的问题。我有 Web 应用程序项目 (vb.net)。每当我尝试打开 aspx 或 ascx （在源视图中 - 只需双击解决方案资源管理器）时，文件都会打开，但 VS 挂起并且没有响应。重新启动 VS 的唯一方法是杀死它的进程。这些类型的文件总是会发生这种情况。：/重新安装不起作用。

此外，我在这个 VS 实例中安装的唯一插件是 ClearCase 源代码控制插件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2010-06-01T23:44:02.097

这显然看起来像是“Microsoft Visual Studio Web 创作组件”程序的问题。只需按“程序中的更改”并选择“修复”即可为我解决问题。现在我也可以使用设计外观了。这发生在我安装 Office 2010 时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-01-16T01:24:55.553

您应该尝试删除“Microsoft Visual Studio Web 创作组件”（从程序中）。我遇到了同样的问题并删除了 Visual Studio 的这个组件（更多关于它[的信息](http://blogs.msdn.com/mikhailarkhipov/archive/2007/08/20/what-is-microsoft-visual-studio-web-authoring-component.aspx)）。您将失去视觉设计师，但 VS 将不再挂起。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T11:26:07.950

您可以尝试使用其他 Visual Studio 编辑器打开（右键单击文件，选择打开方式...）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T08:36:28.297

与解决方案 (.sln) 文件位于同一文件夹中的“解决方案用户选项”文件 (.suo) 可能存在问题。

尝试检查所有内容，关闭visual stuido，删除此文件并重新启动。

可能有帮助，也可能没有帮助 - 毕竟你甚至可能没有解决方案！

* * *

或者，您是否使用任何防病毒软件？通常 AV 设置为在访问文件时检查文件。我似乎记得不久前我们的问题，停止它检查我的解决方案中的文件有帮助。

如果您使用 Sophos，我可以提供进一步帮助，否则请尝试停止 AV 扫描您的解决方案文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-07-01T06:43:26.410

有很多情况可能会导致您的 vs2008 挂起。导致我的 VS2008 挂起的唯一经历是在安装 Office2010 之后。一旦发生这种情况，唯一的解决方法是在任务管理器中终止 Visual Studio。此问题的根本原因是 Office 2007 和 VS 2008 网页设计器都共享一个组件，即 32 位 MSXML5。当 Office 2007 卸载或升级即 office2010 时，MSXML5 被删除，但 Visual Studio 仍然需要它。

有很多方法可以解决这个特定问题

1 - 卸载 Office 2010 并重新启动您的机器；这些问题将得到解决。2 - 如果您仍然坚持使用 Office 2010（最终会发生），请转到您的程序并右键单击 Microsoft Visual Studio Web 创作工具并单击修复。3 - 您可以简单地从程序中完全删除 Microsoft Visual Studio Web 创作组件。从使用的 VS2008 重新安装“Microsoft Visual Studio Web 创作组件”。您可以从 Visual Studio 的此特定路径中找到 Web 核心设计器：

WCU\WebDesignerCore 文件夹并运行 WebDesignerCore.exe

4 - 如果您仍然遇到更多问题，下面的链接应该可以解决

[http://blogs.msdn.com/b/webdevtools/archive/2010/04/19/upgrade-or-uninstall-of-office-2007-might-cause-vs-2008-web-designer-to-hang。 aspx](http://blogs.msdn.com/b/webdevtools/archive/2010/04/19/upgrade-or-uninstall-of-office-2007-might-cause-vs-2008-web-designer-to-hang.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T09:07:18.313

狂野的镜头，但尝试在选项中关闭 Html 验证。在某些时候存在一个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T09:23:21.600

关闭 Html 验证不起作用。我注意到，在解决方案内存使用量（VS）中打开 .aspx/.ascx 文件之前，例如 50k，当我双击即 Default.aspx 查看源代码时，内存使用量上升到例如 150k，而 VS 是没反应。

上周一切正常。：/

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-03-13T09:14:17.837

我遇到了同样的问题......打开时设计器页面挂起VS。我使用 VS2008 SP1。我已经安装了 Office 2010，通过谷歌搜索发现需要修复 MICROSOFT VISUAL STUDIO WEB AUTORING 组件。

如果您在干净的机器上安装 VS 2008 Beta，您将在已安装程序列表中找到 Microsoft Visual Studio Web Authoring Component。即使您没有安装 Office 2007，您也会发现 Program Files\Microsoft Web Designer Tools\Office12 和 Program Files\Common Files\microsoft shared\OFFICE12 文件夹中包含一些 Office 2007 组件。

什么是 Microsoft Visual Studio Web 创作组件，为什么它会在我的机器上安装 Office 2007 组件？答案是它是新的 HTML/ASP.NET 设计界面，它基于以前的 FrontPages 技术，类似于 Expression Web Designer。设计器被制成一个单独的组件，但很难将代码与 Office 库完全分离。因此，在 VS 2008 中，设计器是使用单独的设置安装的，该设置还安装了设计器所依赖的一些 Office 库。这意味着您将获得通过 Microsoft Update 提供给您的 Office 2007 更新，尽管从技术上讲您没有安装 Office 2007。这是因为 Microsoft Update 可识别共享组件并会为您提供相关更新，因此请不要惊慌或惊讶。Office 2007 组件与 Office 2007 完全兼容，因此您可以自由安装和卸载 Office 2007 或 VS 2008，两个系统都将继续正常工作。Designer 还与 Office 2003 兼容，不应影响 Office 2003 应用程序。如果您发现任何差异，请尽快通过 Microsoft Connect 报告错误，我们一定会调查该问题。

该组件可以单独安装/卸载/更新。安装程序位于 VS DVD 上的 WCU\WebToolsCore 文件夹中。如果您不小心卸载了该组件，您只需从上述文件夹中运行 WebToolsCore.exe。该设置没有 UI，只需大约 5-10 分钟即可完成。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-22T01:11:44.803

一个老问题，但我本周遇到了这个问题，想发布微软建议的解决方案。

**根本原因**

此问题的根本原因是 Office 2007 和 VS 2008 网页设计器都共享一个组件，即 32 位 MSXML5。当 Office 2007 卸载或升级时，MSXML5 被删除，但 Visual Studio 仍然需要它。

**解决方法**

如果您手动卸载了 Office 2007 并且拥有 VS 2008 的非 Express 版本，则解决方法。卸载并重新安装“Microsoft Visual Studio Web 创作组件”。接下来从安装盘运行 WCU\WebDesignerCore\WebDesignerCore.exe。

有关更多信息，请参阅 MS 文章：

[升级或卸载 Office 2007 可能会导致 VS 2008 Web Designer 挂起](https://blogs.msdn.microsoft.com/webdev/2010/04/19/upgrade-or-uninstall-of-office-2007-might-cause-vs-2008-web-designer-to-hang/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-22T14:11:50.830

如果您不使用 ClearCase 插件，您还会遇到问题吗？

即尝试保存将您的解决方案复制到本地计算机，删除所有源代码控制绑定，看看您是否遇到同样的问题。

根据您的环境设置方式，当 VB 与 ClearCase 通信时，您可能会看到延迟。

如果一切都失败了，旧的 SysInternal 套件中有一些很好的诊断工具可以帮助您确定是文件访问、注册表还是网络问题。

[SysInternals 站点](http://technet.microsoft.com/en-us/sysinternals/bb842062.aspx)
FileMon - 文件读取/写入
RegMon - 注册表读取/写入
TCPView - 网络流量

# vba - 关于 WordBasic 的 FilePrintSetup 是否有更多文档？

> ID：657254
> 
> 赞同：1
> 
> 时间：2009-03-18T07:32:26.170
> 
> 标签：vba, ms-word

`WordBasic.FilePrintSetup`当我在寻找一种在不更改 Windows 默认打印机的情况下更改 Word 打印机的方法时，我发现了该功能。

不幸的是，我找不到任何真正的文档`FilePrintSetup`，即使我在 Google 中找到的参数也没有正式记录。(`Printer`和`DoNotSetAsSysDefault`)

那么你知道任何文件吗？或者您是否知道 支持的其他参数`FilePrintSetup`？（我对设置托盘/纸箱特别感兴趣）

**编辑：**我发现可以使用`FilePageSetup`同样未记录的功能来选择纸箱。所以如果你有关于这个功能的信息，我也会很感激他们:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T08:32:05.013

联机帮助记录了 WordBasic 函数/方法的等效 VBA。这些都是只读的。

[http://msdn.microsoft.com/en-us/library/aa264153(office.10).aspx](http://msdn.microsoft.com/en-us/library/aa264153(office.10).aspx)

编辑：ActiveDocument.PrintOut 允许您为第一页和后续页面选择一个托盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T13:16:38.727

请注意，fileprintsetup 方法的printername 参数区分大小写。XP 和 Win7 存储服务器\打印机名的方式不同，因此升级操作系统时可能会发现问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-26T15:26:35.910

前面的回复是错误的。ActivePrinter 确实更改了系统默认打印机。微软的文档清楚地说明了这一点。

# asp.net - 使用 ASP.NET 作为后端进行 AJAX 最稳定的解决方案？

> ID：657259
> 
> 赞同：1
> 
> 时间：2009-03-18T07:37:04.367
> 
> 标签：asp.net, ajax

我正在计划一个使用 AJAX 的 ASP.NET 项目。我正在研究 .NET 世界中所有可用的技术。我需要一个有据可查且稳定的解决方案。我找到的当前解决方案是： 1\. ASP.NET AJAX UpdatePanel 2\. 带有 Web 服务 + JQuery 的 ASP.NET AJAX 3\. JQuery + Http 处理程序

在第二种和第三种解决方案中，后端只会向客户端发送 JSON 或 XML 消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T07:59:16.840

以我的经验，最好的方法是 JQuery with WCF with JSON webservices。

原因是：

1.  ASP.NET ajax 在编码方面免费为您提供了很多，但从一开始就很臃肿，需要加以限制和精简。另一方面，您拥有需要更多开发但重量轻的 JQuery。JQuery 也有一个很棒的插件库。

2.  XML 慢，JSON 快。

这就是我今天要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T07:49:08.330

一切都会工作，但我在使用 JQuery 和脚本服务时获得了最大的性能和稳定性。

更新面板可以工作，但由于它设计用于在一般情况下工作，如果您不小心，它可能会有点臃肿。一个原因是它会在每次更新时发布视图状态。

我建议您查看该站点：encosia.com，因为它有许多关于如何使用脚本服务和页面方法的帖子。然后，您可以做出更明智的决定。我会说我没有使用页面方法，也可能不会，但这完全是出于个人原因。

要考虑的另一件事是您最终可能会做的任何 mvc。普遍的共识是使用 JQuery 会容易得多。此外，微软已经正式采用了它，并且在 VS2008 中也提供了智能感知。

所有令人信服的理由至少将其中的一部分包含在您的项目中。在我的情况下，我只在绝对必要时使用内置的 ScriptManager。

！

小号

# .net - HashSet 是否保留插入顺序？

> ID：657263
> 
> 赞同：76
> 
> 时间：2009-03-18T07:39:10.180
> 
> 标签：.net, hashset

[`HashSet`](https://msdn.microsoft.com/en-us/library/bb359438(v=vs.110).aspx).NET 3.5 中引入的集合在使用迭代时是否保留插入顺序`foreach`？

该[文档](http://msdn.microsoft.com/en-us/library/bb397727.aspx)指出，该集合未排序，但没有说明插入顺序。一个预发布的 BCL[博客条目](http://blogs.msdn.com/bclteam/archive/2006/11/09/introducing-hashset-t-kim-hamilton.aspx)声明它是无序的，但[这篇文章](http://www.vcskicks.com/hashset.php)声明它旨在保留插入顺序。我有限的测试表明，该顺序被保留，但这可能是巧合。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2009-03-18T08:03:12.557

[这个 HashSet MSDN 页面](http://msdn.microsoft.com/en-us/library/bb359438.aspx)特别说：

> 集合是不包含重复元素且其元素没有特定顺序的集合。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2009-03-18T07:54:05.247

我认为声称它保留排序的文章是完全错误的。对于简单的测试，由于内部结构可能会很好地保留插入顺序，但不能保证并且不会总是以这种方式工作。我会尝试提出一个反例。

编辑：这是反例：

```
using System;
using System.Collections.Generic;

class Test
{
    static void Main()
    {
        var set = new HashSet<int>();

        set.Add(1);
        set.Add(2);
        set.Add(3);
        set.Remove(2);
        set.Add(4);

        foreach (int x in set)
        {
            Console.WriteLine(x);
        }
    }
} 
```

尽管在 4 之前插入了 3，但仍会打印 1、4、3。

如果您从不删除任何项目，它*可能*会保留插入顺序。我不确定，但我不会完全感到惊讶。但是，我认为依靠它是一个非常糟糕的主意：

*   它没有记录以这种方式工作，并且文档明确指出它没有排序。
*   我没有看过内部结构或源代码（显然我没有）——在坚定地提出任何此类声明之前，我必须仔细研究它们。
*   实现可以很容易地在框架的版本之间进行更改。依靠这一点就像依靠实现不改变——有些人在 .NET 1.1 天就这样*做*`string.GetHashCode`了，然后当实现在 .NET 2.0 中发生改变时他们被烧毁了......

 ** * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-18T08:04:17.577

该文档指出：

> HashSet<(Of <(T>)>) 集合未排序且不能包含重复元素。如果顺序或元素重复对应用程序而言比性能更重要，请考虑将 List<(Of <(T>)>) 类与 Sort 方法一起使用。

因此，它是否实际上保留了当前实现中元素的顺序并不重要，因为它没有被记录为这样做，即使现在看起来这可能会在未来的任何时候改变（即使在一个修补程序中框架）。

您应该根据*记录的合同*而不是*实施细节*进行编程。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-03-19T19:43:29.347

.NET4中专门有一个[`SortedSet<T>`集合](http://msdn.microsoft.com/en-us/library/dd412070.aspx)。

这会给你排序，但不太可能是插入顺序排序。由于您可以使用自定义`IComparer`，因此理论上您可以让它做任何事情。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-18T09:11:19.397

不，哈希集不会保留插入顺序，至少不可预测。您可以使用 LinkedHashSet (Java) 或等效的。LinkedHashSet 将保持顺序。

~~如果你想要订购，你甚至不应该首先使用一个集合~~......它不是为有序元素制作的，除非在特殊情况下。

编辑：听起来我在说教：-/对不起。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-26T15:52:27.220

阅读[HashSet.AddIfNotPresent](https://github.com/dotnet/corefx/blob/master/src/System.Collections/src/System/Collections/Generic/HashSet.cs#L1057)的源代码，您可以看到插入顺序被保留*，假设没有任何删除*。

因此`new HashSet<string> { "Tom", "Dick", "Harry" }`保留了顺序，但是如果您随后删除 Dick 并添加 Rick，则顺序将是 ["Tom", "Rick", "Harry"]。

# java - JMS 替代方案？用于将发送电子邮件与 http reqs 分离的东西

> ID：657266
> 
> 赞同：2
> 
> 时间：2009-03-18T07:40:25.933
> 
> 标签：java, queue, jms

我们有一个 Web 应用程序，它可以做各种事情，有时会根据给定的操作向用户发送电子邮件。我想将 http 请求线程与实际发送电子邮件分离，以防 SMTP 服务器或积压出现问题。过去，我为此使用过 JMS，并且对此没有任何问题。然而，目前我们正在做 JMS 的 web 应用程序现在感觉有点过头了（在设置等方面），我想知道还有什么其他的选择。理想情况下，我只是喜欢可以在进程中运行的东西（JVM/Tomcat），但是当卸载 servlet 上下文时，队列中的任何待处理项目都将被交换到磁盘/数据库。我当然可以一起编写涉及内存 Q 的代码，但我希望获得开源项目的好处，所以想知道那里有什么。

如果 JMS 真的是任何人都知道的可以满足我们简单要求的答案的话。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-27T02:51:13.457

我认为弹簧集成在这种情况下也可以工作。

[http://www.springsource.org/spring-integration](http://www.springsource.org/spring-integration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T09:45:36.537

我正在使用 JMS 来做类似的事情。我们使用 JMS 的原因：

*   我们已经有一个用于其他东西的 JMS 服务器（所以它只是添加了一个新队列）
*   我们希望我们的应用程序与处理过程分离，因此任何一方的错误都会留在他们一方
*   该应用程序可以将消息放入队列中，提交，然后继续。无需担心如何保存消息、如何在崩溃后重新开始等等。JMS 为您完成了所有这些。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T12:38:48.353

哇，这个问题出现了很多。CommonJ WorkManager 是您正在寻找的。可以在[此处](http://www.myfoo.de/commonj/index.shtml)找到 Tomcat 实现。它允许您在 Java EE 环境中安全地创建线程，但比使用 JMS 轻得多（显然也可以使用）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T08:00:55.353

您可以使用调度程序。看看[石英](http://www.quartz-scheduler.org/)。

这个想法是你安排一个工作定期开始。所有请求都需要保存在某个地方。计划的作业将读取它们并处理它们。您需要定义两个后续作业之间的间隔以满足您的需要。

这是推荐的做事方式。成熟的应用程序服务器为此提供了 Java EE 计时器，但这些在 Tomcat 中不可用。Quartz 很好，您可以避免启动自己的线程，这会在某些情况下造成混乱（例如在应用程序更新中）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-22T17:47:54.883

除了 JMS，对于短消息，您还可以使用[Amazon Simple Queue Service](http://aws.amazon.com/sqs/) (SQS)。虽然您可能也认为这太过分了，但请考虑这样一个事实，即所需的维护最少、可扩展性好、具有超高可用性，而且成本也不高。创建新队列等无需任何费用；或有帐户。据我记得，这完全取决于您执行的操作数量（发送消息、轮询/检索）。

主要限制确实是消息大小（还有其他限制，例如由于分布式性质而不能保证排序等）；但这可能会按原样工作。或者对于较大的消息，使用相关的 AWS 服务 s3 来存储实际的正文，并通过 SQS 传递标头。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T07:52:30.913

我同意 JMS 对此太过分了。

您可以在单独的线程中发送电子邮件（即与请求处理线程分开）。唯一需要注意的是，如果您的应用程序获得任何类型的流量，您可能希望使用线程池来避免资源耗尽问题。该`java.util.concurrent`软件包有一些线程池的好东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T12:55:09.827

既然您说该应用程序“有时”会向用户发送电子邮件，这听起来不像您在谈论大量邮件。一个快速而肮脏的解决方案是`Runtime.getRuntime().exec()`：

`sendmail recipient@domain.com`

并将消息转储到生成的 Process 的 getOutputStream() 中。之后是sendmail的问题。

花一分钟时间看看服务器上是否有可用的 sendmail，如果有的话，大约十五分钟来进行测试，假设你找到了 sendmail，则无需安装任何东西。再过几分钟来正确构建电子邮件标题（很简单 -[这里有一些示例](http://www.kangry.com/topics/viewcomment.php?index=427)），您就完成了。

希望这可以帮助...

# flash - 如何将错误消息语言重置为英文

> ID：657269
> 
> 赞同：2
> 
> 时间：2009-03-18T07:42:16.583
> 
> 标签：flash

在我的 Windows 系统语言中出现了第 10 次 Flash 播放器更新引发的异常之一（在我的情况下为抛光）。示例：'TypeError: Error #1010: Zapytanie...' 是否可以在非英语机器上将语言设置为原始英语？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-18T09:14:19.967

小技巧：假设您已经从 Adob​​e 的网站下载了 FP10，请[在此处](http://www.adobe.com/international/selector/)将您的语言设置为“英语”并下载 Flash 播放器。运行全新安装的播放器。

# windows - Windows 7 不包含 .net 3.5 为什么？

> ID：657273
> 
> 赞同：-5
> 
> 时间：2009-03-18T07:44:49.603
> 
> 标签：windows, .net-3.5

我两天前设置了Windows 7。但我下载了 .net framework 3.5 。我认为 Windows 7 包括 .net 3.5

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T07:46:12.317

问题不是很清楚！但 Windows 7 预装了 .NET 3.5。几天前，我在上面安装了一个需要 .NET 3.5 的应用程序，并且不需要先安装任何东西。

# java - 您在 java 世界中首选的脚本语言（JVM 上的脚本语言）和方式是什么？

> ID：657276
> 
> 赞同：8
> 
> 时间：2009-03-18T07:45:43.393
> 
> 标签：java, scripting-language, jvm-languages

您在 java 世界中首选的脚本语言（JVM 上的脚本语言）和方式是什么？什么时候你更喜欢你的脚本语言而不是 java（在什么情况下，例如原型设计）？您将其用于大型项目还是仅用于个人项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-12-11T21:56:10.780

For me, [Clojure](http://clojure.org/) wins hands down. Being a Lisp, it's concise and dynamically typed, it has enormous expressive power so I can write a lot of functionality in a few lines. And its integration with Java is unsurpassed – I'm only partly joking when I say Clojure is more compatible to Java than Java itself. As a result, the entire breadth of Java libraries, both from the JDK and 3rd party, is fully useable.

Finally, with a little care Clojure code can be as fast as Java code, so I'm not even losing performance.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T07:55:28.440

我最喜欢的是 Jython，我通过在我的 Java 应用程序中嵌入一个 Jython 解释器来使用它。它正在商业项目中使用，它允许根据客户的需要轻松定制应用程序，而无需编译任何东西。只需将脚本发送给他们，就是这样。一些客户甚至可以自己定制他们的应用程序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-18T09:30:52.330

我已经在一个商业项目中成功使用了[Groovy 。](http://groovy.codehaus.org/)由于鸭子类型和闭包，我更喜欢脚本语言：

```
def results = []
def min = 5
db.select(sql) { row ->
    if (row.value > min)
        results << row;
} 
```

翻译：对数据库运行 SQL 查询，并将列“value”大于“min”的所有行添加到“result”。请注意您可以轻松地将数据传递到内部“循环”或从中获取结果。是的，我知道我可以用 SQL 实现同样的效果：

```
def results = []
def min = 5
db.select(sql, min) { row ->
    results << row;
} 
```

（想象一下“sql”中的字符串在正确的位置有一个“？”）。

恕我直言，使用不提供丰富列表操作（排序、过滤、转换）和闭包的语言的数据库只是作为一个例子，你*不应该这样*做。

我很想更多地使用 Jython，但是 Jython 2.5 的工作最近才开始，而 Python 2.2 对我的目的来说太旧了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-18T07:56:35.100

我可能更喜欢 Scala，但我不能说，还在学习。目前使用 Groovy 编写小型实用程序。甚至没有在 Grails 上尝试过 Groovy。也听说过很多关于[Lift Framework for Scala](http://liftweb.net/)的好消息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-18T09:15:26.813

JavaScript Rhino 有一个引人注目的优势——它[包含在 JDK](http://java.sun.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)中。话虽如此，Rhino 比 Java 6 更高的版本具有很好的特性，比如[生成器、数组解析和解构赋值。](https://developer.mozilla.org/en/New_in_JavaScript_1.7)

每当处理 Java 异常的仪式使代码混乱而没有真正的好处时，我都喜欢使用它。当我想编写一个利用 Java 库的简单命令行脚本时，我也会使用它。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-18T11:35:15.667

爪哇。严重地。它是一种功能强大、易于使用（虽然有点冗长）的语言，大家都知道。与 Java 的集成很棒。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T11:47:12.970

我工作的公司将 Groovy 嵌入到 Java/Spring 网站中，该网站部署在多个站点上。脚本存储在编译后的 WAR 文件的外部，允许我们操作一些站点逻辑，而无需向每个站点推出新的 WAR。到目前为止，这种方法对我们来说非常优雅。

Groovy 的一个特别好的特性是它可以非常类似于 Java 代码，这使得将现有的 Java 类移植到它变得非常容易。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-10-23T12:08:35.143

SISC（方案代码的第二解释器）怎么样？

参考：[http ://sisc-scheme.org/](http://sisc-scheme.org/)

# c++ - 您如何对应用程序状态建模？

> ID：657281
> 
> 赞同：7
> 
> 时间：2009-03-18T07:50:19.373
> 
> 标签：c++, states

我正在编写一个游戏，我想以一种干净的、面向对象的方式对其不同的状态进行建模（我猜 Game Maker 类比是帧）。以前，我是通过以下方式完成的：

```
class Game
{
  enum AppStates
  {
    APP_STARTING,
    APP_TITLE,
    APP_NEWGAME,
    APP_NEWLEVEL,
    APP_PLAYING,
    APP_PAUSED,
    APP_ENDED
  };

  typedef AppState(Game::*StateFn)();
  typedef std::vector<StateFn> StateFnArray;

  void Run()
  {
    // StateFn's to be registered here

    AppState lastState(APP_STARTING);
    while(lastState != APP_ENDED)
    {
      lastState = GetCycle_(lastState);
    }
    // cleanup
  }

protected:
  // define StateFn's here

  AppState GetCycle_(AppState a)
  {
    // pick StateFn based on passed variable, call it and return its result.
  }

  StateFnArray states_;
}; 
```

对于一个较小的项目来说，这很难管理。状态使用的所有变量都转储在 Game 类中，但是我希望最大限度地保持面向对象性，只公开由多个状态共享的变量。我还希望能够在切换到新状态时初始化它，而不是在刚刚完成的状态下进行（因为它可能有多个结果 - APP_PLAYING 可以切换到 APP_PAUSED、APP_GAMEOVER、APP_NEWLEVEL 等）。

我想到了这样的事情（注意！模糊的东西！）：

```
struct AppState
{
  enum { LAST_STATE = -1; }
  typedef int StateID;
  typedef std::vector<AppState*> StateArray;

  static bool Add(AppState *state, StateID desiredID);
  // return false if desiredID is an id already assigned to

  static void Execute(StateID state)
  {
    while(id != LAST_STATE)
    {
      // bounds check etc.
      states_[id]->Execute();
    }
  }

  AppState() {};
  virtual ~AppState() {};

  virtual StateID Execute() =0; // return the ID for the next state to be executed

protected:
  static StageArray stages_;
}; 
```

这里的问题是类和实例级别变得混乱（静态与虚拟）。状态需要从 AppState 继承，但是 - 我想如何 - 它们中的大多数将是具有全静态成员的类，或者，至少我不需要来自一个类的多个实例（TitleState、LevelIntroState、PlayingState , GameOverState, EndSequenceState, EditorState... - 暂停将不再是一种状态，而不是在有意义的状态中得到照顾）。

如何优雅高效地完成它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-18T08:04:47.293

下面的文章提供了一种很好、简单的方法来管理游戏状态：

[http://gamedevgeek.com/tutorials/managing-game-states-in-c/](http://gamedevgeek.com/tutorials/managing-game-states-in-c/)

基本上，您维护一堆游戏状态，然后只运行顶部状态。你是对的，许多州只有一个实例，但这并不是一个真正的问题。但是，实际上，您所谈论的许多州可能有多个实例。例如：

```
push TitleState
push MenuState
push LevelIntroState
change_to PlayingState
change_to GameOverState
pop (back to MenuState) 
```

...您可以从 的新实例重新开始`LevelIntroState`，依此类推。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T22:04:05.983

我在即将推出的游戏中使用了某种类型的[工厂模式](http://en.wikipedia.org/wiki/Factory_pattern)和[状态模式。](http://en.wikipedia.org/wiki/State_pattern)

代码可能有点乱，但我会尝试清理它。

这是您将从中派生所有状态的类，例如菜单、游戏或其他。

```
class GameState {
public:
    virtual ~GameState() { }

    virtual void Logic() = 0;
    virtual void Render() = 0;
}; 
```

这个类将是你处理不同状态的接口。您可以动态添加和动态标识。

```
class State {
public:
    State();
    virtual ~State();

    void Init();
    void Shutdown();
    void SetNext( std::string next_state );
    void Exit();

    bool Logic();
    void Render();
protected:
    bool Change();

    std::string state_id;
    std::string next_state;

    GameState *current_state;
    std::vector<std::string> state_ids;

    StateFactory *state_factory;

    bool is_init;
}; 
```

我正在使用函子来处理不同 GameState 衍生物的创建。

```
class BasicStateFunctor {
public:
    virtual GameState *operator ()() = 0;
};

template<class T>
class StateFunctor : public BasicStateFunctor {
public:
    StateFunctor() { }
    GameState *operator ()() {
        return new T;
    }
    typedef T type;
}; 
```

最后是一个工厂，它将存储和管理不同的状态。

```
class StateFactory {
public:
    StateFactory();
    virtual ~StateFactory();

    bool CheckState( std::string id );
    GameState *GetState( std::string id );
    template<class T> void AddState( std::string id );
private:
    typedef std::map<std::string, BasicStateFunctor*>::iterator StateIt;
    std::map<std::string, BasicStateFunctor*> state_map;
}; 
```

在您的定义文件中：在这里我确实遗漏了很多东西，但希望您能明白这一点。

```
bool StateFactory::CheckState( std::string id )
{
    StateIt it = state_map.find( id );
    if( it != state_map.end() )
        return true;
    else
        return false;
}

GameState *StateFactory::GetState( std::string id )
{
    StateIt it = state_map.find( id );
    if( it != state_map.end() )
    {
        return (*(*it).second)();
    } else {
        //handle error here
}

template<class T> void StateFactory::AddState( std::string id )
{
    StateFunctor<T> *f = new StateFunctor<T>();
    state_map.insert( state_map.end(), std::make_pair( id, f ) );
}

void State::Init()
{
    state_factory = new StateFactory();
    state_factory->AddState<Game>( "game" );
    current_state = state_factory->GetState( "game" );
    is_init = true;
}

void State::SetNext( std::string new_state )
{
    //if the user doesn't want to exit
    if( next_state != "exit" ) {
        next_state = new_state;
    }
}

bool State::Change()
{
    //if the state needs to be changed
    if( next_state != "" && next_state != "exit" ) 
    {

        //if we're not about to exit( destructor will call delete on current_state ),
        //call destructor if it's a valid new state
        if( next_state != "exit" && state_factory->CheckState( next_state ) ) 
        {
            delete current_state;

            current_state = state_factory->GetState( next_state );

        } 
        else if( next_state == "exit" ) 
        {
                return true;
        }

        state_id = next_state;

        //set NULL so state doesn't have to be changed
        next_state = "";
    }
    return false;
}

bool State::Logic()
{
    current_state->Logic();
    return Change();
} 
```

下面是你如何使用它：初始化并添加不同的状态，我在 Init() 中进行。

```
State.Init();

//remember, here's the Init() code:
state_factory = new StateFactory();
state_factory->AddState<Game>( "game" );
current_state = state_factory->GetState( "game" );
is_init = true; 
```

对于框架函数

```
State.Logic(); //Here I'm returning true when I want to quit 
```

而对于渲染功能

```
State.Render(); 
```

这可能并不完美，但对我来说效果很好。为了进一步推进设计，您需要为 State 添加 Singleton，并可能将 StateFactory 作为 State 中的隐藏类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T09:23:26.140

这是我的解决方案：

*   每个状态都像一个小游戏，所以我在堆栈上管理一组游戏。
*   事件会冒泡堆栈，直到有人阻止它们（因此“游戏”再往上看就看不到它们了）。这允许我在菜单中通过加/减缩放地图。OTOH，由于第一个打开的菜单将其吞下，因此 Esc 提前停止了冒泡。
*   堆栈上的每个“游戏”都有相同的方法：handleUserEvent()、keyDown()、keyUp()、mousePressed()、mouseReleased()、mouseMotion()、update()（渲染前的内部计算）、draw()（渲染），prepare（）（通过缓存纹理中的某些内容来优化渲染，该纹理刚刚在draw（）中标记在目标表面上）

对于渲染，我使用具有优先级的图层。所以每个游戏都会在透明画布上渲染，图层渲染器会以正确的顺序渲染它们。这样，每个游戏都可以更新自己的层，而不会打扰其他人正在做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T21:49:40.090

我使用带有 GameStates 列表的游戏状态管理器，其中列表中的每个项目都是实现 IGameState 并具有两个方法 .render() 和 .HandleInput() 的“GameState 对象”

此 GameStateManager 实现为单例，因此任何状态都可以通过调用跳转到任何其他状态

```
 GameStateManager.gi().setState("main menu") 
```

主循环看起来像这样

```
while(isRunning)
{
   GameStateManager.gi().getCurrentState().handleKeyboard(keysobject);
   GameStateManager.gi().getCurrentState().handleMouse(mouseobject);

   GameStateManager.gi().getCurrentState().render(screenobject);

} 
```

那种创建状态的方式，只需要新建一个实现IGameState的类，并将其添加到GameStateManager中即可。

（注意：这是在主游戏中制作小游戏的一种非常方便的方法）

# c# - 刷新问题

> ID：657282
> 
> 赞同：0
> 
> 时间：2009-03-18T07:51:19.463
> 
> 标签：c#, javascript, asp.net-2.0

我正在使用 asp.net C# 开发聊天应用程序。应用程序工作得非常好，但是当有人按下 F5 或浏览器的刷新按钮时，整个页面都会刷新，那时我所有的东西都回来了，但是如果我完成了文件上传，那么再上传一次就可以完成。有人说为什么会这样。当我按刷新时首先转到页面加载方法，但是当我进行文件上传然后执行刷新按钮时，时间控制直接转到文件上传方法而不是页面加载方法。在此先感谢我知道我解释得不是很好但请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T09:08:13.977

如果我理解正确，您尝试解决回发刷新问题。

在您的回发方法中，您可以在完成后重定向回同一页面

```
Response.Redirect(Request.Path) 
```

虽然这会解决问题，但它也是一个额外的服务器往返，您应该注意。

# sql-server - SQL Server 2008 稀疏列 - 逆

> ID：657287
> 
> 赞同：0
> 
> 时间：2009-03-18T07:52:46.637
> 
> 标签：sql-server, sql-server-2008

SQL Server 2008 引入了稀疏列的概念——在大量行中只有少数具有值。

我们想使用这个概念，但主要用途是创建一个稀疏列为 NULL 的视图。不是更常见的 - NOT IS NULL。微软表示稀疏列和相关索引针对非空行的检索进行了优化。

有谁知道检查 NULL 条件是否有缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T14:26:07.160

很好的讨论[在这里](http://blogs.technet.com/andrew/archive/2008/02/28/sql-server-2008-sparse-columns.aspx)他说

> 对稀疏列的访问（读取和写入）更昂贵，但我无法找到任何确切的数字。

和

> 正如您从在线书籍中看到的那样，有一个非常有用的指南来指导何时将它们用于特定数据类型，例如，如果超过 64% 的值在 int 列中为空，则使用稀疏列，并且基本上更长数据类型越低，使用稀疏列的阈值。

由于这是一项新功能，因此您绝对应该进行一些时序测试。

# .net - 捕获数据网格单元格标题单击

> ID：657297
> 
> 赞同：0
> 
> 时间：2009-03-18T07:57:39.357
> 
> 标签：.net

我只想检查是否在数据网格中进行了单击，是否在单元格内容的标题 r 上进行了单击。

当我遇到问题时...

单击单元格时，我正在处理数据。但是如果单击标题进行排序，则会触发相同的单元格单击事件。

我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T08:02:47.173

在您的事件代码中，检查是否

```
e.RowIndex >= 0 
```

在执行代码之前。如果用户单击标题单元格，则 RowIndex 将为 -1，因此不会执行代码。

# arrays - 有没有更好的方法在 COBOL 的二维数组中使用 SEARCH？

> ID：657299
> 
> 赞同：1
> 
> 时间：2009-03-18T07:58:43.503
> 
> 标签：arrays, search, cobol

Cobol 的 SEARCH 关键字可用于搜索索引的一维数组。

但我认为这个 SEARCH 在用于搜索二维数组时有一些缺点。我们也可以使用 PERFORM 循环进行搜索，但是否有更好的方法将 SEARCH 用于二维数组。你建议哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T13:02:49.883

它有什么缺点？如果您的数组已排序，则可以使用 SEARCH ALL 代替（它使用二进制搜索而不是串行搜索）。无论哪种方式，使用搜索语句可能比编写多个嵌套执行循环更简洁。

也[看看这里](http://publibfp.boulder.ibm.com/cgi-bin/bookmgr/BOOKS/IGY3LR31/6.2.32.2?SHELF=igy3sh33&DT=20060329140556)。

# sql-server - 如何恢复主数据库？

> ID：657306
> 
> 赞同：0
> 
> 时间：2009-03-18T08:01:53.433
> 
> 标签：sql-server

您好我想恢复主数据库。

为此，我尝试以单用户模式启动我的实例。

但我得到一个错误：

> ```
> C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Binn>sqlservr.exe - m -s TST_01
> 2009-03-18 13:17:35.18 Server      Authentication mode is WINDOWS-ONLY.
> 2009-03-18 13:17:35.18 Server      Error: 17112, Severity: 16, State: 1.
> 2009-03-18 13:17:35.18 Server      An invalid startup option  was supplied, either from the registry or the command prompt. Correct or remove the option. 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T14:32:28.487

也许这只是您的消息中的拼写错误，但是在您编写的命令中，第一个连字符和字母“m”之间有一个空格。你写了**-m**而不是**-m**。

# ruby - 如何在 ruby 中解析天/小时/分钟/秒？

> ID：657309
> 
> 赞同：13
> 
> 时间：2009-03-18T08:03:20.997
> 
> 标签：ruby, parsing, time, rubygems

是否有宝石或其他东西可以解析诸如“4h 30m”“1d 4h”之类的字符串 - 有点像 JIRA 或任务规划器中的估计值，也许是国际化？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-19T07:49:00.523

发布第二个答案，因为慢性（我的原始答案建议）不会给你时间跨度而是时间戳。

这是我的解析器。

```
class TimeParser
  TOKENS = {
    "m" => (60),
    "h" => (60 * 60),
    "d" => (60 * 60 * 24)
  }

  attr_reader :time

  def initialize(input)
    @input = input
    @time = 0
    parse
  end

  def parse
    @input.scan(/(\d+)(\w)/).each do |amount, measure|
      @time += amount.to_i * TOKENS[measure]
    end
  end
end 
```

该策略相当简单。拆分`"5h"`为，定义代表 ( ) 的`["5", "h"]`秒数，并将该数量添加到。`"h"``TOKENS``@time`

```
TimeParser.new("1m").time
# => 60

TimeParser.new("1m wtf lol").time
# => 60

TimeParser.new("4h 30m").time
# => 16200

TimeParser.new("1d 4h").time
# => 100800 
```

处理它也不应该太难`"1.5h"`，看到代码库就这么简单。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-12-17T17:13:17.563

[`chronic_duration`](https://github.com/hpoydar/chronic_duration)做这个。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-03-18T11:16:02.843

你可以用[慢性](http://chronic.rubyforge.org/)的。它几乎可以解析你所掌握的所有内容，包括“昨天”、“上周”等。

更新：正如 OP 在评论中指出的那样，Chronic 是针对日期，而不是时间跨度。请参阅我的另一个答案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-18T11:20:44.907

我写了这个方法做得很好

```
 def parse_duration(dur)
    duration = 0

    number_tokens = dur.gsub(/[a-z]/i,"").split
    times = dur.gsub(/[\.0-9]/,"").split

    if number_tokens.size != times.size
      raise "unrecognised duration!"
    else
      dur_tokens = number_tokens.zip(times)

      for d in dur_tokens
        number_part = d[0].to_f
        time_part = d[1]

        case time_part.downcase
        when "h","hour","hours"
          duration += number_part.hours
        when "m","minute","minutes","min","mins"
          duration += number_part.minutes
        when "d","day","days"
          duration += number_part.days
        when "w","week","weeks"
          duration += number_part.weeks
        when "month", "months"
          duration += number_part.months
        when "y", "year", "years"
          duration += number_part.years
        else
          raise "unrecognised duration!"
        end

      end

    end

    duration
  end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T08:34:35.443

解析成什么？

这将解析为一个哈希：

```
"4h 30m".split(/\s/).each{|i| h[i.gsub(/\d+/,"")] = i.gsub(/\w/,"")} 
```

对不起。不熟悉JIRA....

# javascript - Javascript 历史框架的经验

> ID：657310
> 
> 赞同：8
> 
> 时间：2009-03-18T08:03:24.647
> 
> 标签：javascript, jquery, ajax, hashchange

当用户选择多个更改页面行为的选项时，我正在寻找一个 javascript 历史框架来处理页面内的导航。

页面上有多个人工制品会改变页面的数据加载，我想将其存储为一组堆叠的行为。在更广泛的意义上，出于同样的原因，我想将此作为工具包添加到我未来的 Web 项目中。

我主要用 JQuery 在 ASP.NET 中编写，但我现在只担心 JQuery。我确实用 PHP、Python 和 Perl（取决于演出）编写了其他项目，所以它必须与平台无关。

我一直在网上寻找并找到了一些，但只有一个（在 OReilly 上报道）看起来符合要求。我已经开始使用它，但我想知道其他人正在使用哪些工具包以及其他人会推荐什么。

因此，如果您对历史框架、在 Ajax 中处理后退按钮（等）有任何经验，我很想听听您使用了什么以及它是如何工作的。这真的会帮助我对图书馆做出最终选择。

谢谢，

小号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T10:08:00.150

前段时间我在构建一个仅限 Flash 的站点时遇到了类似的问题。我们尝试了：

*   [真正简单的历史](http://code.google.com/p/reallysimplehistory/)（在 safari 和 flash 的组合中存在一些问题）
*   [ExtJS](http://extjs.com)有一个[历史组件](http://extjs.com/deploy/dev/docs/?class=Ext.History)，对我们非常有用。( [Demo](http://extjs.com/deploy/dev/examples/history/history.html) ) [除此之外，我们已经将这个框架用于其他项目。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T09:48:24.283

也许[这个问题](https://stackoverflow.com/questions/568719/is-monitoring-location-hash-a-solution-for-history-in-xhr-apps)对你有用。在我链接到一个测试页的问题中，其中 location.hash 用于跟踪历史记录。我目前在测试站点中使用这种方法，并且遇到了 Opera 的问题（在问号处截断 location.hash 值，您必须使用：），`location.href.split(/#/)[1]`当然还有 IE（需要 iframe）。在带有 iframe 的 IE 中，历史记录仅保存在当前会话中。如果您在同一窗口/选项卡中加载另一个页面并使用后退按钮返回到 AJAX 页面，则以前的历史记录将丢失。这对我来说没什么大不了的，但可能会很烦人。我知道 IE8s 的历史应该表现得像 location.hash 的预期，它甚至应该有一个 hashchange 处理程序。

我认为大多数框架都使用相同的技术（监控 location.hash 的变化，使用 IE 的 iframe）。我不想使用框架，因为我使用的是我自己的自制小框架，而常规框架包含太多我永远不会使用的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-07-27T10:28:29.167

jQuery History 是我的首选。它可以在这里找到：[http](http://www.balupton.com/projects/jquery-history/) ://www.balupton.com/projects/jquery-history/提供跨浏览器支持、绑定到哈希、重载哈希等等。

它还有一个名为 jQuery Ajaxy 的 Ajax 扩展，允许它轻松地将您的网页升级为适当的 Ajax 应用程序，而无需更改服务器端并保持对 SEO 和 JS-Disabled 友好：[http ://www.balupton.com/projects /jquery-ajaxy/](http://www.balupton.com/projects/jquery-ajaxy/)

总的来说，它们都有很好的文档记录、支持和功能丰富。他们还在这里赢得了一个赏金问题[如何在 URL 中显示 Ajax 请求？](https://stackoverflow.com/questions/3205900/how-to-show-ajax-requests-in-url/3276206#3276206)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-16T13:00:42.577

[Dial.js](http://danielteichman.github.io/Dial.js/)是一个 JavaScript 浏览器历史框架，旨在为单页应用程序 (SPA) 提供带有 jQ​​uery 和 History.js 的成熟 MVC 框架的一些功能。

# asp.net - 无法识别 URL 意外结尾的请求格式

> ID：657313
> 
> 赞同：292
> 
> 时间：2009-03-18T08:05:03.767
> 
> 标签：asp.net, web-services

这不是一个问题 - 在此处发布以供参考：

使用 WebService 时，出现以下错误：

> *无法识别以/myMethodName*结尾的 URL 的请求格式

 ** * *

## 回答 #1

> 赞同：534
> 
> 时间：2009-03-18T08:05:47.807

[在这个网站](https://web.archive.org/web/20160711020417/http://aspadvice.com:80/blogs/ssmith/archive/2007/09/04/FIX-Request-format-is-unrecognized-for-URL-unexpectedly-ending-in.aspx)上找到了解决方案

您只需将以下内容添加到您的 web.config

```
<configuration>
  <system.web>
    <webServices>
      <protocols>
        <add name="HttpGet"/>
        <add name="HttpPost"/>
      </protocols>
    </webServices>
  </system.web>
</configuration> 
```

[来自微软](https://web.archive.org/web/20100523032751/http://support.microsoft.com/kb/819267)的更多信息

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-19T11:31:29.067

尽管我发现的所有信息中有 90%（在试图找到解决此错误的方法时）告诉我将`HttpGet`and添加`HttpPost`到配置中，但这对我不起作用……而且对我来说也没有任何意义。

我的应用程序在许多服务器（30 多台）上运行，我从来不需要为其中任何一个添加此配置。在 .NET 2.0 或 .NET 4.0 下运行的应用程序版本。

我的解决方案是针对 IIS 重新注册 ASP.NET。

我使用以下命令行来实现这一点......

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -i 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2011-01-26T18:28:25.237

确保您使用正确的方法：发布/获取、正确的内容类型和正确的参数（数据）。

```
$.ajax({
    type: "POST",
    url: "/ajax.asmx/GetNews",
    data: "{Lang:'tr'}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) { generateNews(msg); }
}) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-02-05T06:26:45.790

高超。

案例 2 - 可能会出现同样的问题）在我的情况下，问题是由于以下行引起的：

```
<webServices>
  <protocols>
    <remove name="Documentation"/>
  </protocols>
</webServices> 
```

它在服务器中运行良好，因为直接调用 webservice 功能 - 但是如果您在调试环境中直接从 .Net 运行服务并想要手动测试运行该功能，则会失败。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-01T11:22:39.333

作为记录，当我将旧应用程序从一台服务器移动到另一台服务器时，我遇到了这个错误。我将`<add name="HttpGet"/> <add name="HttpPost"/>`元素添加到 web.config，将错误更改为：

```
System.IndexOutOfRangeException: Index was outside the bounds of the array.
   at BitMeter2.DataBuffer.incrementCurrent(Int64 val)
   at BitMeter2.DataBuffer.WindOn(Int64 count, Int64 amount)
   at BitMeter2.DataHistory.windOnBuffer(DataBuffer buffer, Int64 totalAmount, Int32 increments)
   at BitMeter2.DataHistory.NewData(Int64 downloadValue, Int64 uploadValue)
   at BitMeter2.frmMain.tickProcessing(Boolean fromTimerEvent) 
```

为了修复这个错误，我必须将 ScriptHandlerFactory 行添加到 web.config：

```
 <system.webServer>
    <handlers>
      <remove name="ScriptHandlerFactory" />
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </handlers>
  </system.webServer> 
```

为什么它在一个 Web 服务器上没有这些行而在另一个我不知道的情况下工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-31T20:53:50.620

在我的情况下，当我从本地 PC Windows 10 移动到具有 Windows 2012 的专用服务器时发生错误。解决方案是将以下行添加到 web.config

```
<webServices>
        <protocols>
               <add name="Documentation"/>
        </protocols>
</webServices> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-26T10:39:43.427

我使用以下代码行来解决此问题。在 web.config 文件中写入以下代码

```
<configuration>
    <system.web.extensions>
       <scripting>
       <webServices>
       <jsonSerialization maxJsonLength="50000000"/>
      </webServices>
     </scripting>
   </system.web.extensions>
</configuration> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-26T18:08:29.173

在 localhost 中开发时我没有遇到问题。但是，一旦我发布到 Web 服务器，Web 服务返回一个空（空白）结果，我在日志中看到了错误。

我通过将我的 ajax contentType 设置为：

```
"application/json; charset=utf-8" 
```

并使用：

```
JSON.stringify() 
```

在我发布的对象上。

```
var postData = {data: myData};
$.ajax({
                type: "POST",
                url: "../MyService.asmx/MyMethod",
                data: JSON.stringify(postData), 
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    console.log(data);
                },
                dataType: "json"
            }); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-12-18T22:05:17.513

我也遇到了 apache mod-mono 这个错误。看起来 webservice 的文档页面还没有在 linux 中实现。但是尽管有这个错误，webservice 仍在工作。您应该通过`?WSDL`在 url 末尾添加来看到它，即[http://localhost/WebService1.asmx?WSDL](http://localhost/WebService1.asmx?WSDL)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-04T14:18:20.293

在 html 中，您必须使用 GET 将调用包含在 aa 表单中，例如

```
<a href="/service/servicename.asmx/FunctionName/parameter=SomeValue">label</a> 
```

您还可以将 a`POST`与作为 Web 服务位置的操作一起使用，并通过输入标签输入参数。

还有`SOAP`代理类。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-13T05:25:05.637

在我的情况下，我有一个导致此异常的函数重载，一旦我更改了我的第二个函数的名称它运行正常，猜测 Web 服务器不支持函数重载

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-09-28T15:51:39.157

需要 ContextKey 的 WebMethod，

```
[WebMethod]
public string[] GetValues(string prefixText, int count, string contextKey) 
```

当此键未设置时，出现异常。

通过分配 AutoCompleteExtender 的键来修复它。

```
ac.ContextKey = "myKey"; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-12T23:38:32.920

在我们的例子中，问题是由使用 OPTIONS 请求方法（而不是 GET 或 POST）调用 Web 服务引起的。

我们仍然不知道为什么会突然出现这个问题。Web 服务已经在 HTTP 和 HTTPS 上运行了 5 年。我们是唯一使用 Web 服务的人，它总是使用 POST。

最近我们决定让网站只托管 Web 服务 SSL。我们在 Web.config 中添加了重写规则，以将任何 HTTP 转换为 HTTPS、部署并立即开始在常规 GET 和 POST 请求之上获取 OPTIONS 请求。OPTIONS 请求导致了本文讨论的错误。

应用程序的其余部分运行良好。但是由于这个问题，我们不断收到数百个错误报告。

有几篇文章（例如[这篇](https://stackoverflow.com/questions/19095777/how-to-support-http-options-verb-in-asp-net-mvc-webapi-application)文章）讨论了如何处理 OPTIONS 方法。我们直接在 Global.asax 中处理 OPTIONS 请求。这让问题消失了。

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        var req = HttpContext.Current.Request;
        var resp = HttpContext.Current.Response;

        if (req.HttpMethod == "OPTIONS")
        {
            //These headers are handling the "pre-flight" OPTIONS call sent by the browser
            resp.AddHeader("Access-Control-Allow-Methods", "GET, POST");
            resp.AddHeader("Access-Control-Allow-Headers", "Origin, Content-Type, Accept, SOAPAction");
            resp.AddHeader("Access-Control-Max-Age", "1728000");
            resp.End();
        }
    } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-05-31T15:40:14.160

在我的 Web 服务调用开始时添加（如下面的代码所示）**$.holdReady(true)和结束后****添加 $.holdReady(false)**之前，我一直收到此错误。这是 jQuery 的事情，用于暂停页面的就绪状态，因此 document.ready 函数中的任何脚本都将等待这个（以及其他可能但我不知道的事情）。

```
<span class="AjaxPlaceHolder"></span>
<script type="text/javascript">
$.holdReady(true);
function GetHTML(source, section){
    var divToBeWorkedOn = ".AjaxPlaceHolder";
    var webMethod = "../MyService.asmx/MyMethod";
    var parameters = "{'source':'" + source + "','section':'" + section + "'}";

    $.ajax({
        type: "POST",
        url: webMethod,
        data: parameters,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: true,
        xhrFields: {
            withCredentials: false
        },
        crossDomain: true,
        success: function(data) {
            $.holdReady(false);
            var myData = data.d;
            if (myData != null) {
                $(divToBeWorkedOn).prepend(myData.html);
            }
        },
        error: function(e){
            $.holdReady(false);
            $(divToBeWorkedOn).html("Unavailable");
        }
    });
}
GetHTML("external", "Staff Directory");
</script> 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-05-15T09:57:32.497

确保禁用自定义错误。这可以掩盖代码中的原始问题：

改变

```
<customErrors defaultRedirect="~/Error" mode="On"> 
```

到

```
<customErrors defaultRedirect="~/Error" mode="Off"> 
```

# .net - 您如何决定将项目拆分为哪些程序集？

> ID：657318
> 
> 赞同：1
> 
> 时间：2009-03-18T08:07:50.190
> 
> 标签：.net, design-patterns, architecture, assemblies

在决定如何将应用程序划分为程序集时，最重要的考虑因素是什么？为了方便起见，有些人是否只为每个唯一的命名空间（或者可能是每个根命名空间）创建一个程序集？还是每个应用层一个（如演示、业务/服务、数据）？或者更微妙的是，将整个模型放在一个组件中？这真的很重要吗？

有太多的程序集会减慢速度吗？应用程序应该有一个临界质量或“好”数量的程序集吗？同样，当单个组件太大时是否存在临界点，大型组件是否也会影响性能？

我知道这当然取决于特定的应用程序 - 所以我主要对一般准则以及决定时使用的标准感兴趣。

谢谢！

* * *

（尽管在我的特殊情况下，如果有人想对此发表评论，我正在构建一个 WCF 服务，其下方有一个业务和 DAL 层，以及一个使用该服务的网站。我传统上创建了许多较小的程序集，但是现在我认为“Web”、“Service”、“Model”和“Data”（用于存储库等）的简单性看起来很吸引人。Web 仅引用 Service，Service 仅引用 Model，Model 仅引用 Data。不是确定它有多重要。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T08:14:19.160

对我来说，我将一些代码隔离到 dll 中的主要原因是：

*   多个项目之间的功能共享
*   无需更新其他功能即可轻松交付此功能的新版本
*   例如，客户端和服务器之间的接口共享

如果你需要这些东西之一，你应该考虑制作一个 dll

不利的一面是，您需要解决一些棘手的周期性依赖关系（通常使用回调完成）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T08:14:53.167

每层一个，一个用于任何“从上到下”特定于应用程序的东西（可能像模型），一个用于“通用实用程序”对我来说似乎是合理的。在层之间拆分的一个好处是，`internal`类型和方法等将仅在其层内可见，这可以很好地帮助封装。

我见过有太多项目的各种应用程序*——*它很快就会变得笨拙，特别是当你用单元测试加倍项目时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T10:09:44.607

我倾向于选择垂直拆分的单层，一旦代码库开始增长，我就会考虑水平拆分，通常面向特定的业务功能块。例如，如果我的持久层正在与 > 20 个左右的表对话，我希望将其拆分，知道在哪里拆分有点玄学，它是高度领域和项目特定的。

我使用的经验法则是，我可能会在其他地方重用哪些合理的类集。刚刚在我自己的代码库上完成了这个过程，有趣的是，有多少其他东西成为重构为基类、抽象类或接口类的明确候选者，然后它们又被推入较低级别的通用程序集。

# visual-studio-2008 - Visual Studio - 使用 word API 调试应用程序是不可能的

> ID：657324
> 
> 赞同：1
> 
> 时间：2009-03-18T08:11:35.437
> 
> 标签：visual-studio-2008, api, ms-word

我有一个使用 MS-Word API 的应用程序。尝试使用打开文档的函数 Document.Open(Filename) 时卡住了。如果我在调试或发布模式下运行并不重要。任何帮助，将不胜感激。谢谢你，盖伊·马罗姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-18T10:12:59.123

Open 方法还需要更多参数！

```
object fileName = "MyDocuemnt.docx";
object readOnly = false;
object isVisible = true;
object missing = System.Reflection.Missing.Value;
WordApp.Visible = true;
Word.Document aDoc = WordApp.Documents.Open(ref fileName, ref missing,ref readOnly, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref isVisible);
aDoc.Activate(); 
```

.Net 的 Word（和 Office）API 需要所有参数，而不是 VBA，因此缺少长线

这很痛苦，但是如果解决方案变得庞大而复杂，您可以制作一些包装类以将其隐藏在您的主应用程序逻辑中

# orm - 数据集是 ORM 吗？

> ID：657327
> 
> 赞同：8
> 
> 时间：2009-03-18T08:12:58.570
> 
> 标签：orm, dataset

与 ORM（NHibernate 或 Spring.Net）相比，我对 Dataset 有点困惑。据我了解，ORM 位于应用层和数据库层之间。它将为应用层生成 SQL 命令。这与 Dataset 的作用相同吗？数据集和 ORM 有什么区别？这两种方法的优缺点是什么？希望这里的专家能解释一下。

谢谢，法赫鲁尔

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-03-18T10:09:07.043

它们之间有很大的不同，首先是它们所代表的编程模型：

1.  **数据集**基于表模型
2.  **ORM** （没有指定框架的特定产品）基于并且倾向于域模型。
3.  还有一种工具可以用在数据场景中，这种工具就是**Data Mapper**（例如iBatis.NET）

正如其他人在我之前回答的那样，我认为查看 Microsoft 对 Dataset 的评价以及更好地了解 Wikipedia 对 ORM 的评价很重要，但我认为（这对我来说一开始是这样）更多的是了解它们在模型方面的区别。理解这一点不仅会澄清背后的选择，而且会更好地接近和理解工具本身。

几乎没有解释可以说：

## **表模型**

是一种模型，它倾向于尽可能接近（甚至根据需要）在内存结构中表示表格数据。因此很容易找到实现**Table**、**Columns**、**Relations**等概念的实现，实际上模型集中在表结构上，因此面向对象是基于它而不是数据本身。该模型可能有其自身的优势，但在某些情况下，管理起来可能很繁重，并且难以将概念应用于包含的数据。正如之前的答案所说，像 Dataset、let 或更好的实现会强制您准备（即使使用工具）所需的 SQL 指令来对数据执行操作。

## **甲骨文**

是一个模型（正如**mendelt**在我之前所说的那样......），其中**对象**直接映射到数据库对象，主要是表和视图（即使也可以映射函数和过程）。这通常以两种方式完成，使用描述映射的映射文件，或使用（在 .NET 或 Java 的情况下）代码属性。该模型基于**对象**它代表数据，因此可以像在普通程序中一样对它们进行面向对象，在某些情况下需要更多的关注和谨慎，但通常情况下，当您对 ORM 有信心时，它可能是一个非常强大的工具！如果管理和设计不好，或者没有更好地理解，即使是 ORM 也可能难以管理，因此了解技术很重要，但我可以根据我的经验说 ORM 是一个非常强大的工具。在 ORM 中，该工具主要负责生成在代码中执行操作所需的 SQL 指令，并且在更多情况下，ORM 具有中间语言（如 HQL）来对对象执行操作。

## **映射器**

映射器是一种工具，它不会像 ORM 那样制作东西，而是将手写 SQL 指令映射到对象模型。当需要手动编写 SQL 指令但想要设计一个应用程序对象模型来表示数据时，这种工具可能是一个更好的解决方案。在这个“模型”中，对象被映射到指令并在映射文件中描述（通常是一个 Xml 文件，如 iBatis.Net 或 iBATIS (java) 所做的）。映射器允许您在 SQL 指令中定义细粒度规则。在这种情况下，很容易找到一些 ORM 概念，例如会话管理。

ORM 和 Mappers 允许应用一些非常有趣的设计模式，以同样的方式应用到表模型和在这种情况下应用到数据集可能并不那么容易。

首先，请原谅我这个冗长的答案和我糟糕的英语，但对我来说，这样的答案让我过去很好地理解了这个模型之间以及实现之间的区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T09:05:21.597

Dataset 类绝对不是 ORM；ORM 将关系数据映射到面向对象的表示。

不过，它可以被视为某种“工作单元”，因为它跟踪必须删除/更新/插入的行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T08:24:37.230

*   **ADO.NET 数据集** =

    [http://msdn.microsoft.com/en-us/library/zb0sdh0b(VS.80).aspx](http://msdn.microsoft.com/en-us/library/zb0sdh0b(VS.80).aspx)

*   **ORM** =

    [http://en.wikipedia.org/wiki/Object-relational_mapping](http://en.wikipedia.org/wiki/Object-relational_mapping) （示例 Developer Express XPO、DataObjects.NET）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T08:27:16.633

ORM 基于对象和表之间的映射。此数据集并非如此。数据集本身以某种方式直接指向表。ORM 基于最少的 SQL 脚本。但足以使用您编写的 SQL 子句的数据集。在这种情况下，数据集不是 ORM。

查看[数据集](http://en.wikipedia.org/wiki/Data_set)和[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T09:27:52.150

不，数据集不是 ORM。它们可能看起来像 orm，因为数据集将表映射到对象，就像 ORM 一样，主要区别在于它们映射到的对象。

数据集有自己的表和行对象类型，它们与数据库的结构非常相似。您正在对象中重建部分数据库的关系模型。将这些对象限制为类似于关系数据库的东西可以解决将数据库映射到对象模型中固有的一些问题。

ORM 将数据库中的表和行映射到您自己的对象模型中。您的对象模型的结构可以针对您的应用程序进行优化，而不是类似于关系数据库。ORM 解决了将关系模型转换为对象模型的困难。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T10:12:22.603

DataSet 是一个 DTO，一个数据传输对象。DataSet 本身无能为力。您可以使用 DataAdapter（使用的提供程序）来生成 sql 或调用预定义的查询，尽管它仍然没有做任何事情。

# c# - 线程结束后执行语句

> ID：657332
> 
> 赞同：1
> 
> 时间：2009-03-18T08:15:48.797
> 
> 标签：c#, .net, multithreading

我有一个函数，我在 c#.net 中使用了一个线程。

我在该线程的下一行有另一个函数。但是这个函数只能在线程被执行后调用。

我该怎么做 ？

例子..

```
Somefunction()
{
    // thread        //(thread started)
    add()            (another function but need to be executed only tha above thread gets over)
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T08:22:13.977

使用 BackgroundWorker 并将函数调用包含在 worker 完成的事件处理程序中。

```
var worker = new BackgroundWorker();
_worker.DoWork += delegate { DoStuff(); };    
_worker.RunWorkerCompleted += worker_RunWorkerCompleted;
_worker.RunWorkerAsync();

[...]

private void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e) {
   /// Do post-thread stuff
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T08:26:37.243

使用[Thread.Join](http://msdn.microsoft.com/en-us/library/system.threading.thread.join.aspx)阻塞当前线程，直到指定线程完成执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T08:21:17.270

如果您希望执行是单线程的，为什么要启动一个单独的线程？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T08:23:10.043

通过“线程被执行后”，你的意思是它一定已经*开始了*吗？或者它一定已经*完成了*？

如果您的意思是完成，那么您通常会`Join()`使用线程 - 但是没有指向`Join()`您之前在该行中盯着的线程（只需直接执行代码）。另一种方法是在线程方法的末尾使用“回调”。

如果您的意思是开始，那么您可以执行以下操作：

```
object lockObj = new object();
lock(lockObj) {
    ThreadPool.QueueUserWorkItem(delegate {
        lock(lockObj) {
            Monitor.Pulse(lockObj);
        }
        // do things (we're on the second thread...)
    });
    Monitor.Wait(lockObj);
}
// thread has definitely started here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T08:24:23.970

例如，您可以使用 ManualResetEvent。当你在另一个线程上开始处理时，你调用了 reset 方法。当另一个线程上的处理完成时，您调用 set. 然后，必须在“主线程”上执行的方法，需要等到 ManualResetEvent 设置后才能执行。

有关更多信息，您可以查看 MSDN 上[的 ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent(VS.71).aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T08:55:01.060

如果 add() 是线程安全的，只需在您传递的函数末尾调用它以创建线程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T09:35:10.713

您可以尝试以下方法，它可能不适用于您的场景：鉴于您提供的详细信息量，我无法判断：

首先创建一个委托：

```
public delegate int MyThreadSignature(Something arg); 
```

然后使用 Begin/End Invoke 模式：

```
var thread = new MyThreadSignature(WorkerMethod);
thread.BeginInvoke(theArg, 
                   MyThreadEnded, /*Method to call when done*/, 
                   thread /*AsyncState*/); 
```

创建 MyThreadEnded 方法：

```
void MyThreadEnded(IAsyncResult result)
{
    var thread = (MyThreadSignature)result.AsyncState;
    var result = thread.EndInvoke(result);
    // Call your next worker here.
} 
```

调用的方法*必须*具有示例中的签名：Name(IAsyncResult result)。

# java - 如何将文本文件中的字符串分配给 Java 的整数数组？

> ID：657333
> 
> 赞同：0
> 
> 时间：2009-03-18T08:16:07.923
> 
> 标签：java, arrays, string, integer

如何将文本文件中的字符串分配给 Java 的整数数组？我已将整数数组保存到文本文件中，但现在如何在不进行任何修改的情况下从文本文件中检索所有整数数组？我希望检索的整数数组与将其存储到文本文件之前相同。以下是我的部分代码：

```
BufferedWriter f1 = new BufferedWriter(new InputStreamReader(new FileInputStream("Input.txt")));

int a[ ] = yes(test, test.length); //go to yes method,return value to array  
for(int i = 0; i < a.length; i++)  
{  
    f1.write(a[i]);  
}  
    f1.close( );  

BufferedReader f2 = new BufferedReader(new InputStreamReader(new FileInputStream("Input.txt")));  
String src;  
while((src = f2.readLine( )) != null)  
{  
    String[ ] s = src;  
    int a[ ] = Integer.parseInt(s);//same with before it saved  
    ... ...  
} 
```

(发现不兼容的类型)
整数数组(a[ ]) 保存并从文本文件中检索后如何保留其原创性？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T08:33:20.050

这看起来像家庭作业。无论如何，这是我的测试代码：

```
// Write integers to a file, each on a different line
BufferedWriter f1 = new BufferedWriter( new FileWriter( new File( "Input.txt" ) ) );
int a[] = new int[]{ 17 , 42 , 37 };
for ( int i = 0 ; i < a.length ; i++ ) {
  f1.write( String.valueOf( a[ i ] ) + "\r\n" );
}
f1.close();

// Read integers from a file, assume each value on a different line
final BufferedReader bufferedReader = new BufferedReader( new FileReader( new File( "Input.txt" ) ) );
String line;
final List< Integer > values = new ArrayList< Integer >();
while ( ( line = bufferedReader.readLine() ) != null ) {
  values.add( Integer.valueOf( line ) );
}
bufferedReader.close();

// Convert List elements to array
final int[] valueArray = new int[ values.size() ];
int counter = 0;
for ( int value : values ) {
  valueArray[ counter ] = value;
  counter++;
}

// Print array values
for ( int value : valueArray ) {
  System.out.println( "value: |" + value + "|" );
} 
```

输出如下

```
value: |17|
value: |42|
value: |37| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T08:21:43.650

您需要以某种方式分隔整数。最简单的解决方案是将每一个都写在单独的行中。或者使用逗号分隔的列表，然后使用 String.split(",")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T08:24:38.683

您编写字符的方式是完全错误的，您正在编写 int 的字符表示。在内部这被写成一个字符。你需要像这样写你的整数。

```
for(int i = 0; i < a.length; i++)
{
   String value = String.valueOf(a[i]);
   f1.println(value);
} 
```

这应该与您现在阅读整数的方式兼容。

# java - 启动 SQL Developer 时出错

> ID：657336
> 
> 赞同：2
> 
> 时间：2009-03-18T08:16:44.270
> 
> 标签：java, oracle, oracle-sqldeveloper

嗨，大家好。

我试图在我的 Red Hat Linux Enterprise 5 机器上运行 sqldeveloper，但得到以下错误：

[root@machine 插件]# sqldeveloper

Oracle SQL Developer 版权所有 (c) 2006, 2007, Oracle。版权所有。

警告：错误实例化 'java.util.logging.FileHandler'，由处理程序引用，找不到类 java.lang.ClassNotFoundException：java.util.logging.FileHandler，<> 运行时初始化期间出现异常: java.lang.NullPointerException <> [root@machine 插件]#

有人有想法可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-26T07:14:46.340

您的机器中可能没有安装 Java SDK，或者您的 Java SDK 安装不正确。因此，请尝试重新安装 Java SDK 并再次运行 SQL Developer。

有关 SQL Developer 的系统要求和安装指南，请参阅以下网站。

[http://download.oracle.com/docs/cd/E12151_01/doc.150/e12153/install.htm#sthref15](http://download.oracle.com/docs/cd/E12151_01/doc.150/e12153/install.htm#sthref15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T08:50:38.557

它正在寻找的类（即[java.util.logging.FileHandler](http://java.sun.com/j2se/1.4.2/docs/api/java/util/logging/FileHandler.html)）是 JRE（或 JDK）的一部分。

那么，您的机器上是否安装了任何 JRE 或 JDK（以及哪个版本）？您是否还设置了 JAVA_HOME 环境变量？

# asp.net - 如何将列和行动态添加到 asp.net 1.1？

> ID：657347
> 
> 赞同：-1
> 
> 时间：2009-03-18T08:22:03.383
> 
> 标签：asp.net, .net-1.1

我正在开发一个 ASP.NET 1.1 项目，该项目的要求是创建一个矩阵表，其中行数和列数由两个单独的数据集确定并且可以变化。创建矩阵后，该页面有几个按钮可以执行回发，这些按钮需要数据以及对矩阵表中的单元格所做的任何修改以被保留。
这`<asp:DataGrid />`是显而易见的选择，但如何将列动态添加到控件？我也在考虑动态构建`<asp:table />`控制，但我不确定这是否是可行的方法。

我对数据网格的一个问题是它们盲目地绑定到数据集。我正在创建的表的第一列作为总和，第二列作为后续列数据的加权平均值。还有一组列。

在这种情况下，最好使用表服务器控件并构建整个事物还是在数据网格中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T09:00:22.527

您可以像这样以编程方式将列添加到数据网格：

```
BoundColumn linkColumn = new BoundColumn();
linkColumn.DataField = "UserID";
linkColumn.DataFormatString = "<a href='UserDetails.aspx={0}'>User Details</a>";
linkColumn.HeaderText = "User Details";

DataGrid1.Columns.Add(linkColumn); 
```

以编程方式添加行是将行添加到绑定到数据网格的数据源，不是吗？

在我看来，使用网格更简单，网格为您管理绑定和格式化。但是使用表格可以让您管理单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T08:32:46.433

不知道瓶颈是什么。可以使用视图状态或会话在数据集中保留值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-03-18T08:32:57.383

您可以创建列的实例以及您需要的内容并添加到数据网格中。检查谷歌的示例而不是在此处发布，在谷歌上您会找到如何使用数据网格的示例。数据网格更好。

# java - Apache Tapestry 和 Apache Wicket 之间的区别

> ID：657352
> 
> 赞同：47
> 
> 时间：2009-03-18T08:23:47.140
> 
> 标签：java, wicket, web-frameworks, tapestry

Apache Wicket ( [http://wicket.apache.org/](http://wicket.apache.org/) ) 和 Apache Tapestry ( [http://wicket.apache.org/](http://wicket.apache.org/) ) 都是Apache 基金会的**面向组件的 Web 框架**- 与 Stripes 等基于动作的框架相反。两者都允许您从 Java 组件构建应用程序。*他们俩看起来都和我很相似*。

这两个框架之间有什么区别？有人在这两个方面都有经验吗？具体来说：

*   它们的性能如何，可以定制多少状态处理，*可以无状态使用*吗？
*   他们的组件模型有什么区别？
*   你会为哪些应用选择什么？
*   它们如何与 Guice、Spring、JSR 299 集成？

**编辑**：我已经阅读了两者的文档并且我已经使用了两者。阅读文档无法充分回答这些问题，但从使用这些文档一段时间的经验来看，例如如何在无状态模式下将 Wicket 用于高性能站点。谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2009-08-13T18:18:55.103

我看到的一些相关差异：

*   Tapestry 使用半静态页面结构，您可以在其中使用条件和循环来实现动态行为。Wicket 是完全动态的；您可以动态加载组件，在运行时替换它们等。这样做的结果是 Tapestry 更容易优化，并且 Wicket 的使用更灵活。
*   两个框架的执行效率大致相同，但 Wicket 依赖于服务器端存储（默认情况下会话中的当前页面，以及“二级缓存”中的过去页面，默认情况下是文件系统中的临时文件）。如果这让您感到困扰，请考虑一下您希望在高峰时间有多少并发会话，并以每个会话约 100kb 的方式进行计算（这可能偏高）。这意味着您可以运行大约支持 2GB 的 20k 并发会话。说 15k，因为您也需要该内存用于其他事情。当然，存储状态的一个缺点是它只适用于会话亲和性，所以这是使用 Wicket 时的一个限制。该框架为您提供了一种实现无状态页面的方法，但如果您
*   Wicket 的目标是最大程度地支持静态类型，而 Tapestry 更多的是关于节省代码行数。因此，使用 Tapestry，您的代码库可能会更小，这有利于维护，而使用 Wicket，您的代码大部分是静态类型的，这使得使用 IDE 导航和使用编译器检查变得更容易，这也有利于维护。恕我直言。

到目前为止，我已经读过几次，人们认为 Wicket 主要通过继承来工作。我想强调的是，你是有选择的。有一个组件的层次结构，但 Wicket 也支持通过 IBehavior 之类的结构组合（例如，在其之上构建了 Wicket 的 Ajax 支持）。除此之外，您还有转换器和验证器之类的东西，您可以将它们全局添加到组件中，甚至使用 Wicket 提供的一些阶段侦听器作为横切关注点。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2009-03-18T13:06:21.593

**学习 Tapestry 5 后**修订。****

 ****Wicket 的目标**是尝试使**Web 开发类似于桌面 GUI**。他们设法以牺牲内存使用（ HTTPSession ）为代价做得很好。

**Tapestry 5 的目标**是制作**非常优化的（针对 CPU 和内存）**面向组件的 Web 框架。

**对我来说真正的大陷阱**是响应“Wicket 支持无状态组件！” 对于“Wicket 内存不足”的论点。虽然 Wicket 确实支持无状态组件，但它们并不是“Wicket 开发的重点”。例如，StatelessForm 中的一个错误很长时间没有得到修复 - 请参阅[StatelessForm - 验证失败后的参数问题](http://www.nabble.com/StatelessForm---problem-with-parameters-after-validation-fails-td22438953.html)。

*   恕我直言，在您要优化/微调 Web 应用程序参数之前，使用 Wicket 会更容易一些
*   恕我直言，如果您编写了 Web 应用程序并想从请求处理的角度思考，那么 Wicket 就更难学习了
*   Tapestry 5会在您更改**组件类时自动重新加载它们。**两个框架都重新加载组件标记。
*   Wicket 强制**标记/代码分离**，Tapestry 5 正好给你这个能力。您还可以在 Tapestry 5 中使用不那么冗长的语法。与往常一样，这种自由需要更加谨慎。
*   Wicket 的核心更容易调试：用户组件基于继承，而 Tapestry 5 用户组件基于注解。从另一方面来说，Tapestry 比 Wicket 更容易过渡到未来版本。

不幸的是， [Tapestry 5 教程](http://tapestry.apache.org/tapestry5/tutorial1/hilo.html)并没有强调 Tapestry 代码示例，例如 't:loop source="1..10"...' 可能是一个不好的做法。因此，如果您的团队不是非常小，那么应该在编写 Tapestry 使用约定/良好实践方面付出一些努力。

**我的建议**：

*   当您的页面结构非常动态并且您可以负担每个用户花费 10-200 Kbs 的 HttpSession 内存（这些是粗略的数字）时，请使用 Wicket。
*   在您需要更有效地使用资源的情况下使用 Tapestry 5

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-08-06T16:43:34.417

这是来自 IBM 的 Developer Works 的非常彻底的比较。

[http://www.ibm.com/developerworks/java/library/os-tapestrywicket/index.html?ca=drs](http://www.ibm.com/developerworks/java/library/os-tapestrywicket/index.html?ca=drs)

[更新：链接已失效，但您可以在http://web.archive.org/web/20131011174338/http://www.ibm.com/developerworks/java/library/os-tapestrywicket/index.html](http://web.archive.org/web/20131011174338/http://www.ibm.com/developerworks/java/library/os-tapestrywicket/index.html?ca=drs)上找到该页面[?ca=drs](http://web.archive.org/web/20131011174338/http://www.ibm.com/developerworks/java/library/os-tapestrywicket/index.html?ca=drs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-18T07:00:54.177

我认为 Wicket 是一个使用起来更简单的框架。

此外，Wicket 确实允许通过 IDE 的热代码替换系统重新加载类。这就是 Wicket 运行当前运行的应用程序类的修改版本所需的全部内容。通常的限制适用于热代码替换，例如必须在调试模式 (Eclipse) 下运行并且不能更改类的结构方面（即类名、更改方法签名等...）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-01-16T11:00:56.170

I don't like the Tapestry programming model and I know of many developers leaving Tapestry because of too much changes and incompatibilities in development. See: [http://ptrthomas.wordpress.com/2009/09/14/perfbench-update-tapestry-5-and-grails/](http://ptrthomas.wordpress.com/2009/09/14/perfbench-update-tapestry-5-and-grails/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-23T07:05:16.123

Wicket 是一个非常好的 Web 框架。最好的我所知道的。我从 1.3 版开始使用它，并且总是得到我想要的。Wicket 与 Spring 具有出色的集成 - 只需在代码中使用 @SpringBean 注释即可将任何 Spring bean 注入到您的类中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-01-16T10:47:15.170

试试[http://incubator.apache.org/click/](http://incubator.apache.org/click/)。这是一个了不起的 java web 框架。有人称其为“Wicket 做得对”；-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-06-13T09:48:18.050

As I said when 4.1 was the official stable release:

You should take a very good look at the development history of Tapestry before committing to use it. Tapestry has done a lot of non-compatible upgrades, with no continuation of support of older versions. Patches to 4.1 are not processed anymore within a reasonable timeframe. That is in my point of view not acceptable for the official stable version.

Committing to use Tapestry 5 means:

you should become a committer; you need to keep up with all new development, abandon old versions as fast as possible; maintain stable versions yourself.

# asp.net - Safari IndexOutOfRangeException

> ID：657365
> 
> 赞同：0
> 
> 时间：2009-03-18T08:29:46.063
> 
> 标签：asp.net, safari, infragistics, webcombo

我在我的 Web 应用程序（ASP.net）中使用 Infragistics 控件......我也在其中使用 Ultra Web 网格......我的应用程序在 IE 和 Mozilla 中运行良好。但在野生动物园中，我收到以下错误：（非常模糊和模糊）......这是什么错误？是否与兼容性问题有关？如何解决这个问题？

**指数数组的边界之外。**

```
说明：在执行当前 web *request 期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
异常详细信息：System.IndexOutOfRangeException：索引超出了数组的范围。
源错误：
在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
堆栈跟踪：
[IndexOutOfRangeException：索引超出了数组的范围。]
   Infragistics.WebUI.WebCombo.WebCombo.LoadPostData（字符串 postDataKey，NameValueCollection 值）+611
   System.Web.UI.Page.ProcessPostData(NameValueCollection postData, Boolean fBeforeLoad) +611
   System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+2877
版本信息：Microsoft .NET Framework 版本：2.0.50727.3053；ASP.NET 版本：2.0.50727.3053*
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-18T09:01:37.500

很可能是浏览器兼容性问题，我建议您直接联系 Infragistics 并询问他们的组件是否在 Safari 中受支持。如果是，那么您应该将此问题作为错误报告给他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-06T20:32:52.733

我在使用 WebCombo 控件时遇到了同样的问题，这似乎是一个真正的兼容性问题。到目前为止，Infragistics 的响应是更新到他们的控件的最新版本，这不是我现在的选择：

[Infragistics 论坛关于此问题的问题](http://blogs.infragistics.com/forums/t/23315.aspx)

# c# - 如何访问 Internet Explorer 的用户字体设置？

> ID：657367
> 
> 赞同：1
> 
> 时间：2009-03-18T08:31:01.117
> 
> 标签：c#, .net, internet-explorer, bho

我想在用 C# 编写的浏览器帮助器对象中访问 Internet Explorer 用户设置的字体，尤其是字体系列。

我查看了 SHDocVw.WebBrowser 和 IHTMLDocument(to 5) 但我没有看到我正在寻找或缺少的属性。

BHO 适用于 Internet Explorer 7。

非常感谢！

**编辑**：理查德问我为什么需要这些信息：如果系统上未安装 HTML 文档或 CSS 给定的字体系列，则使用您可以在 IE7 设置中调整的字体系列。我需要这个基于应用程序的字体系列，它用于在最后一个实例中呈现文本（如果所有其他信息都失败）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-18T13:59:53.463

What you need to do is use a degrading setting for the font-family in CSS.

```
font-family: "Font 1", "Font 2", "Font 3" // etc 
```

The first font is the one you want to use, the 2nd one is the one that is similar but more users have, then the 3rd one is the safety font. You could keep going but here's an example.

```
font-family: "Calibri", arial, sans-serif 
```

In this example only Vista and Office 2008 have Calibri, other Windows machines have Arial and then Linux machines have sans-serif.

# asp.net - localhost 查找失败，浏览器尝试 www.localhost.com

> ID：657383
> 
> 赞同：6
> 
> 时间：2009-03-18T08:35:08.283
> 
> 标签：asp.net, localhost, vwdexpress

我以前一直在笔记本电脑上运行 Web 应用程序，没问题，我使用的是 VWD 2008 Express，我有最新的框架，Windows Vista Home Basic 等。现在，每当我尝试运行一个网站时，甚至选择在 VWD 内的浏览器中显示页面，浏览器（IE 和 Firefox）一直在寻找 www.localhost.com...

我试图复制地址并将其直接粘贴到标题栏中，没有，同样的问题我试图从气球通知（运行任何 ASP.net 项目时弹出的那个）中获取该地址，仍然没有任何反应。 ..

我的同事也面临同样的问题，但对他来说，他可以简单地复制并粘贴地址栏中的 url，但它对我不起作用....Heeeeeellllllllllllllllp

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T08:41:21.917

检查您的[主机文件](http://en.wikipedia.org/wiki/Hosts_file)，它应该将 localhost 重定向到 127.0.0.1 而没有别的。将导致此错误的条目应如下所示：

```
127.0.0.1    www.localhost.com 
```

如果你发现这个，删除它或将 www.localhost.com 更改为 localhost。

您也可以尝试在地址栏中发布其中之一：

```
127.0.0.1
http://localhost 
```

请注意，hosts 文件是病毒的常见受害者，因此如果它已被修改，您可能会运行病毒检查。

另请参阅[此处的讨论](http://forums.asp.net/t/1232820.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-11T05:47:21.177

如果这也不起作用，请打开 nod32（如果上述方法不起作用，您可能已经在系统上安装了它）进入高级设置，在左侧菜单中，选择协议过滤，然后选择 HTTP 和 POP3 端口。 .. ;)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-09-03T07:55:14.370

当我的服务器关闭时，我在 Firefox 3.6 中遇到了同样的问题。就我而言，线路所在的 etc/hosts 没有问题

> 127.0.0.1 本地主机

在那里，确定。

对我有用的解决方案是禁用 Firefox 在找不到页面时执行的“切割器”URL 修复。从[这里](http://rolfje.wordpress.com/2008/05/06/no-more-wwwlocalhostcom/)采取的程序：

> 1.  在地址栏中输入 about:config 并按回车键。
> 2.  找到 browser.fixup.alternate.enabled
> 3.  双击“真”值。该行将变为粗体，值将变为“false”</li>

这直接解决了问题。无需重启firefox。如果您的服务器已关闭，您将按预期获得“找不到页面”。希望能帮助到你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-11-05T09:29:17.523

感谢您的解决方案...这很好用...

> 当我的服务器关闭时，我在 Firefox 3.6 中遇到了同样的问题。就我而言，线路所在的 etc/hosts 没有问题
> 
> ```
> 127.0.0.1 localhost 
> ```
> 
> 在那里，确定。
> 
> 对我有用的解决方案是禁用 Firefox 在找不到页面时执行的“切割器”URL 修复。从这里采取的程序：
> 
> ```
>  1\. Type about:config in the address bar and hit return.
>    2\. find browser.fixup.alternate.enabled
>    3\. double click the “true” value. The line will become bold, and 
> ```
> 
> 该值将更改为“false”</p>
> 
> 这直接解决了问题。无需重启firefox。如果您的服务器已关闭，您将按预期获得“找不到页面”。希望能帮助到你。链接|flag
> 于 9 月 3 日 7:55 回答 joaquin 2,237112

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T08:41:58.953

一些随机的事情要检查......

*   `localhost`是 IP 地址的常规名称`127.0.0.1`。如果该地址不起作用，则说明您的网络配置有问题。

*   在某个地方会有一个`hosts`文件，可能在某个地方`C:\Windows\System32\Drivers\Etc\hosts`，通常应该只包含 localhost 的定义。如果它有更多的名字并且你没有把它们放在那里，那么你完全有另一个问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-11-19T15:30:59.643

您的网络服务器当前未运行也有可能会拍打额头。:)

# delphi - TSaveDialog 位置

> ID：657388
> 
> 赞同：1
> 
> 时间：2009-03-18T08:38:37.900
> 
> 标签：delphi

TSaveDialog 的默认位置是屏幕的中心。如何设置 TSaveDialog 窗口的位置？我想要这样的东西：

```
SaveDialog1.top := topValue;
SaveDialog1.left := leftValue;
if (SaveDialog1.execute(self.handle)) then begin
  ...
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T14:28:17.280

[`GetSaveFileName`](http://msdn.microsoft.com/en-us/library/ms646928.aspx)API函数，这是`TSaveDialog`一个包装形式，不提供任何方式来控制对话框的位置，所以你需要截取对话框的早期消息并在那里调整位置，就像你有的其他解决方案一样见过做过。

您希望对话框以您的表单为中心，因此为对话框提供`Top`和`Left`属性的解决方案将无法很好地工作，因为它们没有考虑窗口的大小，并且它们还要求您在计算之前计算新坐标`Execute`每次打电话。

这是一个不同的想法。它仍然需要覆盖`WndProc`.

```
type
  TCenterSaveDialog = class(TSaveDialog)
  private
    FCenterForm: TCustomForm;
  protected
    procedure WndProc(var Message: TMessage); override;
  public
    // When this property is assigned, the dialog will center
    // itself over the given form each time the dialog appears.
    property CenterForm: TCustomForm read FCenterForm write FCenterForm;
  end;

procedure TCenterSaveDialog.WndProc(var Message: TMessage);
var
  lpOfNotify: POFNotify;
  FormRect, DialogRect: TRect;
  NewLeft, NewTop: Integer;
begin
  inherited;
  if (Message.Msg = wm_Notify) and Assigned(CenterForm) then begin
    lpOfNotify := POFNotify(Message.LParam);
    if lpOfNotify.hdr.code = cdn_InitDone then begin
      GetWindowRect(CenterForm.Handle, FormRect);
      GetWindowRect(lpOfNotify.hdr.hwndFrom, DialogRect);
      NewLeft := FormRect.Left
        + (FormRect.Right - FormRect.Left) div 2
        - (DialogRect.Right - DialogRect.Left) div 2;
      NewTop := FormRect.Top
        + (FormRect.Bottom - FormRect.Top) div 2
        - (DialogRect.Bottom - DialogRect.Top) div 2;
      SetWindowPos(lpOfNotify.hdr.hwndFrom, 0,
        NewLeft, NewTop, 0, 0,
        swp_NoActivate or swp_NoOwnerZOrder or swp_NoSize or swp_NoZOrder);
    end;
  end;
end; 
```

也可以看看：[`cdn_InitDone`](http://msdn.microsoft.com/en-us/library/ms646863.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T09:10:45.187

我在这个[页面上](http://forum.builder.cz/read.php?18,2957266,2957975)找到了这个示例，但我已经修改它以使用退出 TSaveDialog 而不是创建新类。

```
type
 TSaveDialog = class(Dialogs.TSaveDialog)
   protected
      fTop: integer;
      fLeft: integer;
      procedure WndProc(var Message: TMessage); override;
   public
      property top: integer read fTop write fTop;
      property left: integer read fLeft write fLeft;
   end;

type
  TForm1 = class(TForm)
    dlgSave1: TSaveDialog;
    btn1: TButton;
    procedure btn1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}
uses
  CommDlg;

procedure TForm1.btn1Click(Sender: TObject);
begin
  dlgSave1.left := 20;
  dlgSave1.top := 100;
   if dlgSave1.Execute then
   // do your work here
end;

{ TMySaveDialog }

procedure TSaveDialog.WndProc(var Message: TMessage);
begin
  inherited WndProc(Message);
  if (Message.Msg = WM_NOTIFY) then
      case (POFNotify(Message.LParam)^.hdr.code) of
           CDN_INITDONE: SetWindowPos(POFNotify(Message.LParam)^.hdr.hwndFrom, 0, fLeft, fTop, 0, 0, SWP_NOSIZE);
      end;
end; 
```

# unicode - 为什么泰米尔语在 vb6 的richtextbox 中不起作用以及如何解决这个问题？

> ID：657396
> 
> 赞同：2
> 
> 时间：2009-03-18T08:41:34.397
> 
> 标签：unicode, vb6, richtextbox, tamil

我在vb6中有一个像应用程序这样的编辑器，我正在寻找一个可以使用win xp泰米尔语ime输入支持泰米尔语输入的richedit。这很奇怪，但我可以使用richtextbox 输入中文、日文、英文、阿拉伯文、法文，但泰米尔语会以某种方式显示为？？当我使用 ime 键入它时。但是，如果我从记事本/单词/网页进行复制和粘贴，泰米尔语文本会显示得很好。

现在这个应用程序是一个编辑器，当然我不能要求用户这样做。我在richtextbox中使用了锁定和解锁的某些文本，到目前为止，我在符合unicode的richtextbox附近发现的唯一东西是Edanmo的richedit控件。但它也不允许直接 ms ime 输入。而且我已经尝试过包含richedit控件的hexagora控件集，因为我认为ti是基于edanmo的richedit，自然它也不起作用。

所以现在我需要找到一个完全工作的 unicode 兼容的 Richtextbox 控件，或者以某种方式解决它，因为我有[unitoolbox2 控件](https://stackoverflow.com/questions/540361/whats-the-best-option-to-display-unicode-text-hebrew-etc-in-vb6)。我正在考虑使用unitext并以某种方式将其切换到前景和背景并将文本链接回richtextbox以进行锁定等。

那么有没有人知道任何好的richtextbox unicode 工具或者对我的问题有很好的解决方法？为什么泰米尔语在这种情况下脱颖而出？是因为richtextbox 不是为支持泰米尔语而设计的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T18:30:31.270

[这个问题](https://stackoverflow.com/questions/540361/whats-the-best-option-to-display-unicode-text-hebrew-etc-in-vb6/540975#540975)的答案列出了一些 VB6 的 Unicode 控件。

泰米尔语是少数没有 Windows 代码页的语言之一（请参阅[MSDN](http://msdn.microsoft.com/en-gb/goglobal/bb688174.aspx#ques12)）。VB6*部分*以 Unicode 处理字符串，*部分*通过代码页表示来处理 - 请参阅大师 Michael Kaplan 的这个[很好但不可避免的冗长解释](http://www.i18nwithvb.com/chapters/Chapter06_en.htm)。VB6 运行时与控件的交互使用代码页。Michael Kaplan 关于 VB6 国际化的优秀[著作](http://www.amazon.co.uk/Internationalization-Visual-Basic-Michael-Kaplan/dp/0672319772)说，仅 Unicode 的语言会导致问题。对我来说幸运的是，我自己从来不用处理这些语言！

如果您尝试一些解决方法来显示当前系统代码页不支持的字符，例如 Unicode 控件，我想这会有所帮助。回帖让我们知道什么是有效的。

# privacy - 向 WhoIs 隐藏个人信息

> ID：657401
> 
> 赞同：11
> 
> 时间：2009-03-18T08:42:49.980
> 
> 标签：privacy, whois

有没有办法隐藏它？

**stackoverflow.com 的 WhoIs 信息**

注册人：

Jeff Atwood
410 Clayton Ave
El Cerrito, California 94530, United States 注册地址：GoDaddy.com, Inc. ( [http://www.godaddy.com](http://www.godaddy.com) ) 域名：STACKOVERFLOW.COM
创建于：2003 年 12 月 26 日
到期： 2014 年 12 月 26 日
最后更新日期：2008 年 4 月 13 日

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T08:54:39.563

这些公司中的大多数会在第一次请求时提供您的隐藏信息。至少 enom 是这样做的，我在某处读到过他们向任何提及“侵权”一词的请求提供信息。我还听说有些网站会监视和收集 whois 更新，包括激活 whois 隐私之前的第一个注册数据。然后，他们将此信息出售给付款的人。

如果您想要隐私，请使用虚假信息。但是，您可以通过支付操作进行追踪。

因此，从长远来看，您的问题的答案是不可能的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-18T08:59:57.973

如您所见，stackoverflow.com 已在 GoDaddy 中注册。他们通过 DomainsByProxy.com 提供额外的 2 美元来保护您的个人信息。注册人、行政和技术联系人显示他们的信息：

```
Registrant:
   Domains by Proxy, Inc.
   DomainsByProxy.com
   15111 N. Hayden Rd., Ste 160, PMB 353
   Scottsdale, Arizona 85260
   United States 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T08:47:51.420

有些公司允许您将信息保密。至少 bluehost 可以。看看这个信息：[http](http://helpdesk.bluehost.com/kb/index.php?x=&mod_id=2&id=146) ://helpdesk.bluehost.com/kb/index.php?x=&mod_id=2&id=146 。

在他们的情况下，他们称之为域隐私，如果您需要使用已注册的域进行操作，您可以转移到他们的注册商处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T08:51:10.553

我不知道你怎么做或者怎么做。但我确实知道我通过 Dreamhost 拥有我的域，它们为我提供了一种方式。所以当我在我的域上做 WhiIs 时，我得到了这个：

> geekjuggler.net 私人注册
> 人 geekjuggler.net@proxy.dreamhost.com
> DreamHost 虚拟主机
> 417 Associated Rd #324
> Brea, CA 92821
> US
> +1.2139471032
> 
> 记录创建于 2007-06-24 14:29:55。
> 记录于 2009-06-24 14:29:55 到期。

# css - 面向对象的 CSS：流行的流行语还是合法的设计方法？

> ID：657407
> 
> 赞同：16
> 
> 时间：2009-03-18T08:45:02.673
> 
> 标签：css, oop, methodology, oocss

似乎 Web 开发领域出现了一个新的流行语：面向对象的 CSS。

从表面上看，这让我觉得这只是将最佳实践包装在一个朗朗上口的口号中。我理解并完全尊重运动背后的意图，但还有更多吗？

有没有人有任何进一步的见解可以使这种方法与众不同，因为它更可信，或者我应该把它作为一个提醒，以确保我正确地继承和级联我的类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-18T09:18:12.923

对于 CSS 中已经存在的东西，我会说它更像是一个吸引人的流行语。当然，在我们开始谈论什么是 OO 和什么不是以及 CSS 如何面向对象之前，我们必须先定义它实际上是什么——这是其他人之前一直在努力解决的问题，并且受到了激烈的争论。但是，如果我们假设[OO 的基本原则是：](http://en.wikipedia.org/wiki/Object_orientated_programming)

*   班级
*   目的
*   实例
*   方法
*   消息传递
*   遗产
*   抽象
*   封装
*   多态性
*   解耦

我们可以说，级联样式表在某种程度上是面向对象的，因为它们允许定义类、创建实例/对象（通过将类分配给元素）、类的继承（甚至多重继承）、抽象（例如通过定义普通元素的样式）和多态性（通过为不同的元素定义相同的类名）。当然，由于 CSS 的静态特性，方法/消息传递是不可能的。

所以总的来说，我会说它是一种以面向对象的方式开发 CSS 的有效方法，但我不会真正称之为面向对象的 CSS，因为至少对我来说，它是 CSS 固有的东西。这有点像说“我正在做面向对象的 Java ......”

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-18T08:53:38.910

吸引人的流行语和合法的设计方法。

尽管我认为其中一些想法有点天真，因为它们往往会忘记“客户端会随其变化”的 Web 开发范式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-19T11:16:05.533

我认为称其为“面向对象的 CSS”的流行语实际上削弱了它的实用性和该概念的更广泛采用。

当我阅读它时，我认为它是 OO 的说法实际上减慢了我对它的真正含义的理解。

知道“面向对象”在编程中的含义的人会怀疑，因为它不是*真正*的OO，不是吗？这只是尝试将一些OO原则应用于CSS以提高其效率。另一方面，如果不是程序员，大多数客户端开发人员根本不会理解这个概念，因此他们只会感到困惑或尴尬。

所以，伟大的概念，需要重新命名。最大的 CSS！给 CSS 供电！CSS重生！CSS平方！CSS 总理！类似的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-18T09:04:25.140

我已经说了很多*年*了。

CSS 选择器基于实例 ID 和类。它甚至支持多重继承。这能有多明显？

从对象角度考虑 CSS 的美妙之处在于，开始“投射”标记元素变得非常简单。需要那个 div 突然变成 INotRenderedAnymore 吗？让 JS 扩展它的 class 属性来匹配`.removed`，不要乱用样式属性。

显然这是一个相当陈词滥调的例子，但好处应该是显而易见的——尤其是在 JS 操作的上下文中。您可以将 JS 与其必须修改的实际样式解耦，这既是维护和抽象的好处，也有附带好处，例如不直接设置非常高特异性的样式（CSS 无法覆盖）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-30T13:03:51.027

多年后为后代写下这个答案。上面所有的答案显然从未听过关于面向对象 CSS 的严肃讨论。当 OP 询问它是否是一个流行词时，这应该表明该表达式指的是一个值得讨论的主题（比“我们所说的面向对象是什么意思？”）。

我相信面向对象的 CSS 是雅虎前端技术布道者 Nicole Sullivan 创造的一个术语，她曾为 Facebook 提供咨询，将他们的演示前端代码重构为更苗条且更易于管理的东西，并且可以随着时间的推移轻松扩展和修改继续。术语“面向对象”不是指 CSS 本身的性质（本身），而是指一种编写 CSS 和受影响的标记的方法，这种方法有助于简洁和可扩展。

OO CSS 的一些示例原则包括：

*   避免使用 ID 作为选择器：对象是唯一的这一事实并不一定意味着它的关键属性应该以覆盖所有其他属性的方式定义。
*   避免基于嵌套标记的长选择器：根据元素在文档结构中的偶然位置来定义元素的外观通常是逻辑谬误，将其移动到新位置将迫使您重新编写选择器。与前面提到的一样，这种不良做法也导致条件覆盖或扩展需要在其选择器中具有额外的强度和特异性，这几乎没有帮助。
*   使用非语义标记来创建具有不同表示目的的元素，而不是试图将单个元素外观的所有细节重载到一个规则中。这会导致 CSS 不那么冗长。

OOCSS 的最终目标是 DRY。当您实际上是在创建类似事物的变体时，您不应该编写数千行 CSS。

Nicole 就这个主题做了一些[很好的演讲](http://www.stubbornella.org/content/2009/03/23/object-oriented-css-video-on-ydn/ "会谈")——她还写了几篇文章，扩展了一些[有用的技术](http://www.stubbornella.org/content/2010/06/25/the-media-object-saves-hundreds-of-lines-of-code/)，以及要避免的[不良做法。](http://www.stubbornella.org/content/2011/04/28/our-best-practices-are-killing-us/)

“OOCSS”也是她编写的[框架的名称，它为可扩展的 CSS 布局提供了一些样板代码。](https://github.com/stubbornella/oocss/wiki)这个框架如何以及为什么这么好（[grids 模块](http://www.stubbornella.org/content/2011/01/22/grids-improve-site-performance/)是我几乎在任何地方都使用的东西）并不是从代码本身完全不言而喻的，阅读她关于背后想法的博客文章肯定有助于更好地利用它和一般的CSS。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-06T16:13:15.320

我一直在为 OOCSS 和 BEM 命名约定感到尴尬很长一段时间，并且永远不会回头。对于那些声称这只是一个“吸引人的流行语”或“CSS 已经可以做到这一点”的人，不了解使用这两种方法编写 CSS 的潜力。

让我们看一下最简单的对象，一个带有链接的列表。它有许多不同的口味：

1.  菜单

2.  工具栏

3.  标签

4.  面板（引导程序）

在 OOCSS 中，我们找到每一个的共同属性并创建一个基础对象。我通常称之为导航。

```
/*  Nav
    =================================================*/

    /*  B
        ---------------------------------------------*/

        .nav
        {
            margin-left:            0;

            padding-left:           0;

            list-style:             none;
        }

    /*  E
        ---------------------------------------------*/

        .nav__item
        {
            float:                  left;
        }

        .nav__link
        {
            display:                block;

            color:                  inherit;

            text-decoration:        none;
        }

    /*  M
        ---------------------------------------------*/

        .nav--right
        {
            float:                  right;
        }

        .nav--stack .nav__item
        {
            float:                  none;
        } 
```

你会注意到一些事情：

1.  Nav 是应用于块元素的基础对象

2.  子元素以 nav_ 为前缀

3.  修饰符以 nav-- 为前缀

4.  修饰符是改变行为的选项。例如 --right 浮动导航右。

一旦我有了我的基础对象，我就会创建将改变对象外观的皮肤。这将把它变成工具栏、选项卡等。微软在他们的手机上有 Pivot 选项卡。现在创建fpr的皮肤更容易。

```
/*  Nav
    =================================================*/

    /*  E
        ---------------------------------------------*/

        .pivot .nav__item
        {
            margin-left:            24px;

            color:                  #aaa;

            font-size:          36px;
        }

        .pivot .nav__item--active, .pivot .nav__item:hover
        {
            color:                  #000;
        } 
```

要使用这个对象和皮肤，你会写

```
<ul class="pivot nav">

   <li class="nav__item">

        <a class="nav__link"> Item 1 </a>

    </li>

   <li class="nav__item">

        <a class="nav__link"> Item 2 </a>

    </li>

</ul> 
```

由于其位置独立性，您也可以将其写为

```
<nav class="pivot nav">

   <div class="nav__item">

        <a class="nav__link"> Item 1 </a>

    </li>

   <div class="nav__item">

        <a class="nav__link"> Item 2 </a>

    </div>

</nav> 
```

最终，您将容器与皮肤分离。我建议从 Nicole Sullivans 媒体对象开始。查看 Twiter Bootstrap 和 Inuit.css 以获得更多灵感。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-25T21:01:38.183

术语“面向对象的 CSS”是用词不当。

“面向对象的 CSS”实际上只是一种如何充分利用 CSS 的设计模式，与 Jonathan Snooks 所说的[SMACSS](http://smacss.com/)基本相同。

无论您将其称为 OOCSS 还是 SMACSS，该方法的关键在于您创建通用 UI 元素，例如[nav 抽象](http://csswizardry.com/2011/09/the-nav-abstraction/)。然后可以通过向元素和/或容器元素添加额外的类来增强这些 UI 元素的特定功能。或者，作为替代方案，您可以使用元素的 ID 或语义类添加您自己的自定义 CSS 规则。

[Cascade Framework](http://jslegers.github.io/cascadeframework/)是基于这种方法的全新 CSS 框架。它只需占用很小的空间即可为您提供最佳性能、最佳灵活性和最佳模块化。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-31T22:00:25.507

CSS 在很多方面都类似于 OO 语言：写

```
p { color: red }
p span { color: blue } 
```

你基本上拥有继承权。这是一个更复杂的例子，让 terrier 扩展 dog 扩展动物类：

```
.animal { font-weight:bold; color: blue; } 
.dog:before, .terrier:before { content: "GRRR"; }
.animal, .dog, .terrier { color: brown } 
```

现在您可以以 OO 方式使用动物、狗和梗犬类。

重要的是要记住 CSS 非常适合解决它的问题：以透明的方式指定元素的样式。使用更多面向对象的概念会更好吗？我不知道。假设有人说：如果 CSS 文件看起来像这样，它会更简单：

```
@class dog @derives_from animal /* the syntax i just invented */
@class terrier @derives_from dog

.animal { font-weight:bold; color: blue; } 
.dog:before { content: "GRRR"; }
.terrier { color: brown } 
```

这看起来确实更简单，但更简单的解决方案是删除@class 的东西，同时将'dog' 添加到任何'terrier' 和'animal' 到任何'dog' 服务器端（简单的替换语句）或使用javascript。

CSS 最棒的地方在于它很简单并且很容易回退，这意味着浏览器不需要解释他们不理解的 CSS，而且一切正常。由于您必须打破与主要新 CSS 结构的这种向后兼容性，我认为这使得面向对象的 CSS 更像是一个流行语。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-18T09:03:53.877

它确实是那些有争议的事情之一，例如表格与 div 等。

在我看来，有很多开发人员在 OO 中如此根深蒂固，以至于他们试图将其应用到所有东西上，首先是 Javascript，现在是 CSS。不要误会我的意思 JavaScript 也有面向对象的元素，但我离题了。

由于 CSS 本身已经是一个流行词（所有雇主都希望使用 web 2.0 CSS 方法），许多新开发人员正在发现它。这不是一件坏事，但是作为开发人员，他们做了他们最擅长的事情并试图改进 CSS。在开发人员的头脑中（我是一名开发人员），根据 OO 原则组织 CSS 非常有意义 - 因此是新的流行语。

最后我想说的是，OO CSS 只是某些人采用的一种方法，因为它看起来更合乎逻辑。如果您正在编写将由开发人员维护的 CSS，那么这种方法将非常适合。这真的取决于你如何编写你的 CSS 和你自己的个人风格......

就我个人而言，我不在乎人们如何编写他们的 CSS - 如果我需要维护它，无论如何，Firebug 都会让这项工作变得微不足道。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-11T04:51:29.380

我相信这没什么大不了的。

**OOCSS** *面向对象级联样式表*

它减少了一遍又一遍地重复的代码，您可以设置一次全局 css并在任何地方重用，并为和`foocontainer`具有自定义样式。`header` `body``footer`

```
<div class="foocontainer header"> Your header </div> <!-- two classes -->
<div class="foocontainer body"> Your body </div>  <!-- two classes -->
<div class="foocontainer footer> Some footer </div> <!-- two classes --> 
```

* * *

**BEM** *Block--Element__Modifier*

它使代码易于阅读但难以编写，您可以轻松地将孩子与他们的父母识别出来。

```
<div class="foocontainer--header"> Your header </div> <!-- one class -->
<div class="foocontainer--body"> Your body </div> <!-- one class -->
<div class="foocontainer--footer> Some footer </div> <!-- one class --> 
```

# c# - 查看与按钮关联的所有事件处理程序？

> ID：657419
> 
> 赞同：2
> 
> 时间：2009-03-18T08:48:44.957
> 
> 标签：c#, winforms, visual-studio-2008, event-handling

我有许多继承的用户控件，对于每个用户控件，我有时会为控件上的按钮覆盖事件处理程序。（允许发生特定儿童的行为）

有没有办法查看与特定组件关联的所有事件处理程序？

问题是在其中一个按钮上，事件处理程序被调用了两次。我相信这是因为我已经分配了两次 Click 事件处理程序，一次在父级中，一次在子级用户控件中。我删除了子控件中的分配，现在当我单击按钮时没有任何反应（在 VS2008 设计器中）！

任何和所有的帮助将不胜感激！

**编辑**

没有发生任何事情的原因归结为版本控制问题....孩子的覆盖事件处理程序不正确！

但重点仍然存在......我不是代码库的唯一贡献者，如果我需要查看哪些事件归因于组件，我目前无法明确。特别是关于定时器，因为我们动态添加和删除需要“同步”到单个定时器的事件。看看哪些事件被标记到 Tick 事件上会很好？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T09:23:15.640

您可以根据您要查找的内容对整个解决方案或当前项目源代码进行文本搜索。
搜索例如：“ `controlName.EventName +=`”。您将直接看到订阅了此控件事件的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T09:40:15.973

使用[Resharper](http://www.jetbrains.com/resharper/)，我使用 Shift-F12 执行此操作，它显示所有用法的树视图（包括通过界面的用法）。在没有 Resharper 的情况下，使用 Tyalis 建议的文本搜索可能是最简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T08:56:17.903

查看组件上所有事件处理程序（据我所知）的唯一方法是编写代码为您执行此操作，可能使用反射。

VS 2008 设计器不会为你做这些；尽管控件上的大多数事件都是多播的，但设计器仅支持为每个事件分配一个处理程序。如果您正在做比这更复杂的事情，那么只有在实际调试程序时才能获得准确的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T09:02:32.727

也许可以尝试查看源代码，看看它是否被分配了两次？要么在`.cs`文件中，要么在`.designer.cs`文件中。

# c - 我正在寻找内容寻址数据结构

> ID：657422
> 
> 赞同：3
> 
> 时间：2009-03-18T08:50:36.937
> 
> 标签：c, algorithm, data-structures

我正在尝试设计一种数据结构，允许从部分内容中有效地提取条目。

假设我正在寻找与此匹配的条目： `[`x **2 3** xx`]`

如果`[`0 **2 3** 4 5`]`或`[`3 **2 3** 7 8`]`在我的数据结构中，它们应该由我的 find 函数返回。

我写了这样一个数据结构，我将“模式”与数据结构的所有条目进行比较，但当然这需要太多时间。我对如何以更快的方式做到这一点几乎没有什么想法，但实施起来非常繁重。这样的东西已经存在了吗？如果没有，你会怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T09:05:57.117

首先想到的是为元组中的每个位置都有一个哈希表。对于搜索，您将所有位置的结果与指定值相交。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T09:03:36.437

好吧，[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)可以在 O(1) 中完成，但会占用大量内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T08:53:58.283

你试图实现的东西看起来很像[tuple space](http://en.wikipedia.org/wiki/Tuple_space)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-22T02:46:07.270

你可以看看[RETE](http://www.ddj.com/184405218)算法。这个普遍的问题出现在 70 年代的 AI 系统中。[人工智能编程范式中的](http://norvig.com/paip.html)第 14 章涵盖了它。（IIRC主要阐述了starblue的答案和决策树。）

# c# - 将所有表从一个 mdb 文件复制到另一个 mdb 文件的 C# 代码

> ID：657435
> 
> 赞同：0
> 
> 时间：2009-03-18T08:54:59.593
> 
> 标签：c#, ms-access, visual-studio-2005, .net-2.0

如何使用 C# 代码将所有表从一个 mdb 文件复制到另一个空白 mdb 文件有人可以帮忙吗？

你好

感谢您提供文件复制建议，但在执行该查询后出现此错误”

```
 Error 1 Invalid token '(' in class, struct, or interface member declaration    
 C:\Documents and Settings\E457808\My Documents\Visual Studio 2005
 \Projects\19032009\trymdbpulling\WindowsApplication1\Form1.cs  
 21 28  WindowsApplication1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T09:23:36.543

只复制文件会不会更容易，例如

```
System.IO.File.Copy("source.mdb", "dest.mdb"); 
```

如果您只想要没有数据的结构，您可以创建一个仅包含表的模板数据库并从中复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-24T00:29:16.427

请参阅此批量复制示例：http: [//www.codeproject.com/KB/cs/CopyDBSchemaUsingSMO.aspx](http://www.codeproject.com/KB/cs/CopyDBSchemaUsingSMO.aspx)

# icons - 我需要数学符号的图像/剪贴画/图标

> ID：657439
> 
> 赞同：1
> 
> 时间：2009-03-18T08:57:25.373
> 
> 标签：icons, symbols

我需要为我的应用程序添加图标 (16x16)。图标必须显示 +,-,x,%,<,>,!= 和类似符号的图像。有什么网站可以得到吗？或者任何可以快速帮助我生成它们的软件。我不擅长设计它们。

还建议我一个可以免费收集图标或图像的网站（我可以将图像转换为图标）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T09:01:11.620

也许你会喜欢这些。我相信大多数也是 16x16：

[http://commons.wikimedia.org/wiki/Category:Mathematical_icons](http://commons.wikimedia.org/wiki/Category:Mathematical_icons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T10:00:59.700

您可以使用您最喜欢的文字处理器（或任何能够显示具有所需属性的文本的软件，例如您的 Web 浏览器！）以所需的大小、颜色、字体等显示这些符号。

然后你可以使用截屏软件做快照，然后将图像转换为图标。

或者只是使用能够显示文本的图标编辑器......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-16T04:36:29.730

glyFX 有一组[“字符拼贴”图标](http://www.glyfx.com/shop/detail/vistacharacter/)，其中包含 212 个不同颜色的 unicode 字符的图标。我认为它包括你提到的所有角色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-16T04:44:00.727

你能把字体渲染成图像吗？

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Arrows](http://en.wikipedia.org/wiki/Template:Unicode_chart_Arrows)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Greek_and_Coptic](http://en.wikipedia.org/wiki/Template:Unicode_chart_Greek_and_Coptic)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Letterlike_Symbols](http://en.wikipedia.org/wiki/Template:Unicode_chart_Letterlike_Symbols)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Mathematical_Operators](http://en.wikipedia.org/wiki/Template:Unicode_chart_Mathematical_Operators)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Miscellaneous_Mathematical_Symbols-A](http://en.wikipedia.org/wiki/Template:Unicode_chart_Miscellaneous_Mathematical_Symbols-A)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Miscellaneous_Mathematical_Symbols-B](http://en.wikipedia.org/wiki/Template:Unicode_chart_Miscellaneous_Mathematical_Symbols-B)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Miscellaneous_Technical](http://en.wikipedia.org/wiki/Template:Unicode_chart_Miscellaneous_Technical)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Supplemental_Arrows-A](http://en.wikipedia.org/wiki/Template:Unicode_chart_Supplemental_Arrows-A)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Supplemental_Arrows-B](http://en.wikipedia.org/wiki/Template:Unicode_chart_Supplemental_Arrows-B)

[http://en.wikipedia.org/wiki/Template:Unicode_chart_Supplemental_Mathematical_Operators](http://en.wikipedia.org/wiki/Template:Unicode_chart_Supplemental_Mathematical_Operators)

# r - 给定 X 轴的累积图

> ID：657440
> 
> 赞同：10
> 
> 时间：2009-03-18T08:59:04.467
> 
> 标签：r, statistics

我有看起来像这样的数据。我想在其中绘制 dat1 相对于 x 轴的累积值。还将它与 dat2 一起绘制。

```
#x-axis dat1              dat2
-10     0.0140149       0.0140146
-9      0.00890835      0.00891768
-8      0.00672276      0.00672488
-7      0.00876399      0.00879401
-6      0.00806879      0.00808141
-5      0.0088366       0.00885121
-4      0.00856872      0.00857769
-3      0.0195384       0.0196094
-2      0.0160239       0.0161829
-1      0.0254455       0.0257845
0       0.0397413       0.0400913
1       0.0743316       0.0755453
2       0.0247501       0.0253324
3       0.0214285       0.021778
4       0.0241462       0.0244967
5       0.0150943       0.015241
6       0.0141398       0.0142373
7       0.0101515       0.0102948
8       0.0308843       0.031294
9       0.0095504       0.00960626
10      0.00729676      0.0073713 
```

在 R 中的常用方法是什么？

我从 Hmisc 查看了 ECDF，它似乎没有做我想要的。特别是它不允许我们给出 x 轴值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-03-18T14:44:54.213

我认为您正在寻找的函数是`cumsum()`对向量进行累积求和。

```
#put your data into 3 vectors
x<-c(-10,-9,-8,-7,-6,-5,-4,-3,-2,-1,0,1,2,3,4,5,6,7,8,9,10)
dat1<-c(0.0140149,0.00890835,0.00672276,0.00876399,0.00806879,0.0088366,0.00856872,0.0195384,0.0160239,0.0254455,0.0397413,0.0743316,0.0247501,0.0214285,0.0241462,0.0150943,0.0141398,0.0101515,0.0308843,0.0095504,0.00729676)
dat2<-c(0.014015,0.008918,0.006725,0.008794,0.008081,0.008851,0.008578,0.019609,0.016183,0.025785,0.040091,0.075545,0.025332,0.021778,0.024497,0.015241,0.014237,0.010295,0.031294,0.009606,0.007371)

#create a new vector called cdat1 to hold the cumulative sum
cdat1<-cumsum(dat1)
plot(x,cdat1)
points(x,dat2,col="red") 
```

我使用上面的功能点将 dat2 添加到现有绘图中。在 R 中运行它，看看它是否能满足您的需求。

[![情节图像](https://i.stack.imgur.com/t7tIA.png)](https://i.stack.imgur.com/t7tIA.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-30T06:05:50.377

如果您在文本文件（例如 data.txt）中有该数据，您还可以执行以下操作：

```
A <- read.table("data.txt",header=TRUE)
attach(A)
plot(x.axis, cumsum(dat1))
points(x.axis, cumsum(dat2), col='red') 
```

正如 JD Long 所说，cumsum 函数就是您要寻找的。

# vim - Vim 清除上次搜索突出显示

> ID：657447
> 
> 赞同：2171
> 
> 时间：2009-03-18T09:00:32.310
> 
> 标签：vim, full-text-search, highlight

在 Vim 中进行搜索后，我会突出显示所有出现的事件。我怎样才能禁用它？我现在再次搜索无法找到的乱码。

有没有办法暂时禁用突出显示，然后在需要时重新启用它？

* * *

## 回答 #1

> 赞同：1880
> 
> 时间：2009-03-18T09:02:47.920

要在下一次搜索之前关闭突出显示：

```
:noh 
```

或者完全关闭突出显示：

```
set nohlsearch 
```

或者，切换它：

```
set hlsearch!

nnoremap <F3> :set hlsearch!<CR> 
```

* * *

## 回答 #2

> 赞同：761
> 
> 时间：2009-03-18T09:12:09.690

来自[VIM 文档](http://vimdoc.sourceforge.net/htmldoc/pattern.html#last-pattern)

要清除上次使用的搜索模式：

```
:let @/ = "" 
```

这不会将模式设置为空字符串，因为它会在任何地方匹配。模式真的很清晰，就像启动 Vim 时一样。

* * *

## 回答 #3

> 赞同：617
> 
> 时间：2009-03-18T14:26:22.183

你可以做

```
:noh 
```

或[`:nohlsearch`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#:nohlsearch)暂时禁用搜索突出显示，直到下一次搜索。

* * *

## 回答 #4

> 赞同：333
> 
> 时间：2009-03-19T16:22:09.407

几年前我在 vim.org 上找到了这个答案：

将以下内容添加到您的 .vimrc 中：

```
"This unsets the "last search pattern" register by hitting return
nnoremap <CR> :noh<CR><CR> 
```

因此，在您搜索后，只需在命令模式下再次按回车键，突出显示就会消失。

* * *

## 回答 #5

> 赞同：147
> 
> 时间：2009-06-24T08:53:24.267

来自[http://twitter.com/jonbho/status/2194406821](http://twitter.com/jonbho/status/2194406821)

```
" Clear highlighting on escape in normal mode
nnoremap <esc> :noh<return><esc>
nnoremap <esc>^[ <esc>^[ 
```

第二行用于[映射到转义键](https://stackoverflow.com/a/20458579/1079110)，因为 Vim 内部使用转义来表示特殊键。

* * *

## 回答 #6

> 赞同：43
> 
> 时间：2012-03-17T15:38:09.950

我最初的解决方案（下）是肮脏和浪费的。我现在用`:noh`

像 Vim 中的许多特性一样，正确的方法通常不容易被发现。

--

（不要这样做）

搜索一个不太可能的字符序列（混合主行上的键）：

`/;alskdjf;`

这适用于 vim 和更少，并且比@ShaunBouckaert 逻辑上更简洁的解决方案“清除最后使用的搜索模式”更容易记住/输入：

`:let @/ = ""`

一个潜在的缺点是它会在您的搜索历史记录中添加垃圾内容。

* * *

## 回答 #7

> 赞同：34
> 
> 时间：2011-10-23T19:48:21.273

重新映射到我的 .vimrc.local 文件中，快速而肮脏但非常实用：

```
" Clear last search highlighting
map <Space> :noh<cr> 
```

* * *

## 回答 #8

> 赞同：34
> 
> 时间：2012-08-09T19:04:32.910

```
nnoremap <cr> :noh<CR><CR>:<backspace> 
```

这样，在搜索后`:noh`点击时，我就摆脱了命令行中显示的内容`enter`。

`:`就像开始输入一个新命令，`Backspace`清除它并将焦点放回编辑器窗口。

* * *

## 回答 #9

> 赞同：34
> 
> 时间：2014-08-29T13:35:00.737

`:noh`建议或[`:nohlsearch`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#:nohlsearch)（例如，Matt McMinn 的）的答案对于*暂时*禁用搜索突出显示是正确的——正如原始问题中所问的那样。

我想我会贡献一个我觉得在普通模式下有用的映射：

```
nnoremap <C-L> :nohlsearch<CR><C-L> 
```

默认情况下，`Ctrl``L`在 Vim 中清除并重绘屏幕。许多命令行程序（主要是那些使用[GNU Readline 库](https://en.wikipedia.org/wiki/GNU_Readline)的程序，例如 Bash）使用相同的组合键来清除屏幕。此功能在后台运行的进程打印到终端，覆盖前台进程的部分的情况下很有用。

此正常模式映射还会在重绘屏幕之前清除最近搜索词的突出显示。我发现这两个功能相辅相成，将一个`Ctrl``L`功能一起用于两个操作很方便，而不是创建一个单独的映射来禁用搜索突出显示。

**注意：** `noremap`使用而不是`map`其他方式，映射将是递归的。

*提示：*我通常会重新映射`Caps Lock`到`Ctrl`，以便更轻松地键入此类组合键；执行此操作的详细信息取决于您选择的操作系统/窗口系统（并且与此答案无关）。以下两个提示都包括有关映射 `Caps Lock`到的信息`Ctrl`以及`Esc`：

*   [地图大写锁定以在 XWindows 中转义](http://vim.wikia.com/wiki/VimTip166)
*   [地图大写锁定以在 Windows 中转义](http://vim.wikia.com/wiki/Map_caps_lock_to_escape_in_Windows)

* * *

## 回答 #10

> 赞同：27
> 
> 时间：2010-11-12T17:49:43.987

我通常映射`:noh`到反斜杠键。要重新启用突出显示，只需点击`n`，它将再次突出显示。

* * *

## 回答 #11

> 赞同：27
> 
> 时间：2015-11-07T07:08:40.517

## 永久禁用搜索突出显示

每当您使用搜索进行搜索时，匹配项都不会突出显示`/`

```
:set nohlsearch 
```

* * *

## 清除突出显示直到下一次搜索

```
:noh 
```

或`:nohlsearch`（清除直到按下`n`或`N`）

* * *

## 按下时清除突出显示`ESC`

```
nnoremap <esc> :noh<return><esc> 
```

* * *

## 按另一个键或自定义地图清除突出显示

*   按下时清除突出显示`\`（反斜杠）

    ```
    nnoremap \ :noh<return> 
    ```

*   击中`ESC`两次清除亮点

    ```
    nnoremap <esc><esc> :noh<return> 
    ```

* * *

## 回答 #12

> 赞同：22
> 
> 时间：2014-11-29T21:58:32.987

这就是我使用的（从许多不同的问题/答案中提取）：

```
nnoremap <silent> <Esc><Esc> :let @/=""<CR> 
```

使用“double”`Esc`可以删除突出显示，但是一旦再次搜索，突出显示就会重新出现。

* * *

另一种选择：

```
nnoremap <silent> <Esc><Esc> :noh<CR> :call clearmatches()<CR> 
```

根据 vim 文档：

> 清除匹配（）
> 
> ```
>  Clears all matches previously defined by |matchadd()| and the
> 
>     |:match| commands. 
> ```

* * *

## 回答 #13

> 赞同：17
> 
> 时间：2015-12-31T22:54:09.363

关闭突出显示直到下一次搜索

```
:noh 
```

[![视觉插图](https://i.stack.imgur.com/Skzzj.gif)](https://i.stack.imgur.com/Skzzj.gif)

* * *

## 回答 #14

> 赞同：13
> 
> 时间：2017-11-05T20:59:56.130

## 移动光标后立即关闭突出显示：

安装[vim-cool](https://github.com/romainl/vim-cool)。它的创建是为了解决这个特定问题。只要您移动光标，它就会关闭突出显示。但请注意，它需要最新的 vim 版本！

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2016-09-09T06:46:04.047

如果你安装了[incsearch.vim 插件](https://github.com/haya14busa/incsearch.vim)，那么有一个设置可以在搜索后自动清除高亮：

```
let g:incsearch#auto_nohlsearch = 1 
```

[![在此处输入图像描述](https://i.stack.imgur.com/75EF2.gif)](https://i.stack.imgur.com/75EF2.gif)

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2016-03-14T08:16:20.833

为此有两个“必备”插件：

1.  [明智](https://github.com/tpope/vim-sensible)的-`Ctrl-l`用于 nohlsearch 和重绘屏幕。
2.  [unimpared](https://github.com/tpope/vim-unimpaired) - `[oh`，`]oh`并`coh`控制 hlsearch。

* * *

## 回答 #17

> 赞同：8
> 
> 时间：2012-11-20T19:07:52.650

[Vim和 GVIM](https://github.com/carlhuda/janus "用于 VIM/GVIM 的 Jenus")的 Janus 为像我这样的新手准备了许多东西，包括

```
<leader>hs - toggles highlight search 
```

这正是您所需要的。只需`\hs`在正常模式下输入。（领导键`\`默认映射到。）

HTH。

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2014-04-24T03:56:25.550

`updatetime`这将在几毫秒不活动 后清除搜索突出显示。

`updatetime`默认为 4000 毫秒或 4 秒，但我将我的设置为 10 秒。重要的是要注意，`updatetime`它的作用远不止于此，因此请在更改之前阅读文档。

```
function! SearchHlClear()
    let @/ = ''
endfunction
augroup searchhighlight
    autocmd!
    autocmd CursorHold,CursorHoldI * call SearchHlClear()
augroup END 
```

* * *

## 回答 #19

> 赞同：7
> 
> 时间：2017-08-07T18:29:53.353

我的猜测是，最初的问题不是*禁用*搜索突出显示，而是简单地清除上次搜索的突出显示。原始海报提到的搜索乱码字符串的解决方案是我已经使用一段时间来清除先前搜索中的突出显示的解决方案，但它既丑陋又麻烦。

我发现添加`nnoremap ...`到 ~/.vimrc 的几个建议在这里具有在启动时将 vim 置于替换模式的效果，这根本不是我想要的。我找到的最简单的解决方案是添加该行

```
nmap <esc><esc> :noh<return> 
```

到我的 ~/.vimrc。这符合 KISS 原则，并且不会干扰使用单个 <esc> 的箭头键。在命令模式下需要双 <esc>（或在插入或替换模式下使用三重 <esc>）来清除先前搜索的突出显示，但从 UI 的角度来看，这使得操作尽可能简单。

* * *

## 回答 #20

> 赞同：7
> 
> 时间：2017-12-26T08:11:21.867

我个人喜欢映射`esc`到命令`:noh`如下：

`map <esc> :noh<cr>`

[我最近写了一篇关于 Vim 搜索的整篇文章](http://web-techno.net/vim-search/)：如何在 vanilla Vim 上搜索以及增强搜索功能的最佳插件。

* * *

## 回答 #21

> 赞同：6
> 
> 时间：2015-09-30T13:04:37.927

如果您希望能够**快速****启用/禁用**突出显示，您可以将一个键映射到

 **```
" Press F4 to toggle highlighting on/off, and show current value.
:noremap <F4> :set hlsearch! hlsearch?<CR> 
```

只需将上面的代码片段放入您的 .vimrc 文件中。

这对我来说是最方便的方式来显示和隐藏搜索亮点

有关更多信息，请查看文档[http://vim.wikia.com/wiki/Highlight_all_search_pattern_matches](http://vim.wikia.com/wiki/Highlight_all_search_pattern_matches)

* * *

## 回答 #22

> 赞同：6
> 
> 时间：2017-02-28T13:45:37.747

我只使用下面的简单 nohl，不需要任何插件。

`:nohl`

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2015-04-03T21:44:10.353

通过结合 2 个最佳答案的另一种解决方案：

```
"To clear the last used search pattern:
nnoremap <F3> :let @/ = ""<CR> 
```

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2015-12-09T06:06:23.493

你可以使用**:noremap**打开/关闭搜索结果，像这样

`:noremap <F3> :set hls! hls?<CR>`

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2017-11-07T21:24:24.307

我在我的`~/.vimrc`

`nnoremap <Leader><space> :noh<Enter>`

这使得清除当前突出显示的搜索变得非常容易和快速。我的引导键已映射到，`\`因此这使得用我的右手小指和拇指执行该操作非常容易。

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2014-04-29T09:51:24.280

我认为混合@ShaunBouckaert 和 2009 年 3 月 19 日 16:22 的答案是一个很好的折衷方案：

```
" Reset highlighted search
nnoremap <CR> :let @/=""<CR><CR> 
```

按下`Enter`，突出显示的文本不再突出显示，而搜索突出显示仍处于启用状态。

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2016-08-19T08:26:15.700

根据@baruch-even 的回答，您可以`ESC`在**正常**模式下双击删除搜索词：

```
nnoremap <esc> :let @/ = ""<return><esc>
nnoremap <esc>^[ <esc>^[ 
```

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2018-08-07T01:39:14.320

我也不喜欢。我发现一直输入很烦人`:nohl`......所以我把下面的映射放在我的`.vimrc`

```
noremap <C-_> :nohl<cr>:<backspace> 
```

第一位 ( `:nohl<cr>`) 清除突出显示；第二位 ( `:<backspace>`) 是*清理*命令行的技巧。搜索仍然在后台，所以如果你只是点击`n`它会重新突出显示并带你到下一个事件。

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2021-02-22T19:03:03.143

### *为这两种*行为定义映射，因为*两者*都很有用！

*   完全清除搜索缓冲区（例如，按下`n`下一个匹配**不会**恢复搜索）
*   保留搜索缓冲区，并切换突出显示搜索结果 on/off/on/...（例如，按下`n`将恢复搜索，但突出显示将基于切换的当前状态）

```
" use double-Esc to completely clear the search buffer
nnoremap <silent> <Esc><Esc> :let @/ = ""<CR>
" use space to retain the search buffer and toggle highlighting off/on
nnoremap <silent> <Space> :set hlsearch!<CR> 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2019-02-18T10:57:35.510

我将此添加到我的`vimrc`文件中。

`command! H let @/=""`

在您进行搜索并想要清除搜索中的亮点后，只需执行`:H`

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2020-08-23T01:08:24.627

不喜欢 nohlsearch 的任何解决方案，下一个搜索呢？最好的答案是由 let @/ = "" 创建的，但我不喜欢 mac 上的按功能键映射，所以这是我的：

```
let mapleader=','
let g:mapleader=','
nnoremap <leader>cs :let @/ = ""<cr> 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-01-19T13:28:41.980

你也可以在你的 .vimrc 文件中添加映射，

> **nmap `<C-N>`:nohlsearch**

然后你可以按

> Ctrl+N

随时清除突出显示的文本

# ruby-on-rails - 如何使用 Nokogiri 导航 DOM

> ID：657468
> 
> 赞同：7
> 
> 时间：2009-03-18T09:07:35.663
> 
> 标签：ruby-on-rails, ruby, dom, xpath, nokogiri

我正在尝试填充变量`parent_element_h1`和`parent_element_h2`. 谁能帮我使用[Nokogiri](http://github.com/tenderlove/nokogiri/tree/master)将我需要的信息放入这些变量中？

```
require 'rubygems'
require 'nokogiri'

value = Nokogiri::HTML.parse(<<-HTML_END)
  "<html>
    <body>
      <p id='para-1'>A</p>
      <div class='block' id='X1'>
        <h1>Foo</h1>
        <p id='para-2'>B</p>
      </div>
      <p id='para-3'>C</p>
      <h2>Bar</h2>
      <p id='para-4'>D</p>
      <p id='para-5'>E</p>
      <div class='block' id='X2'>
        <p id='para-6'>F</p>
      </div>
    </body>
  </html>"
HTML_END

parent = value.css('body').first

# start_here is given: A Nokogiri::XML::Element of the <div> with the id 'X2
start_here = parent.at('div.block#X2')

# this should be a Nokogiri::XML::Element of the nearest, previous h1.
# in this example it's the one with the value 'Foo'
parent_element_h1 = 

# this should be a Nokogiri::XML::Element of the nearest, previous h2\. 
# in this example it's the one with the value 'Bar'
parent_element_h2 = 
```

* * *

请注意：该`start_here`元素可以在文档中的任何位置。HTML 数据只是一个示例。也就是说，标头`<h1>`和`<h2>`可能是 的兄弟姐妹`start_here`或兄弟姐妹的孩子`start_here`。

以下递归方法是一个很好的起点，但它不起作用，`<h1>`因为它是 的兄弟姐妹的孩子`start_here`：

```
def search_element(_block,_style)
  unless _block.nil?
    if _block.name == _style
      return _block
    else
      search_element(_block.previous,_style)
    end
  else
    return false
  end
end

parent_element_h1 = search_element(start_here,'h1')
parent_element_h2 = search_element(start_here,'h2') 
```

* * *

接受答案后，我想出了[自己的解决方案](https://stackoverflow.com/a/778182/30594)。它就像一个魅力，我认为它很酷。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-18T15:08:07.277

我会采取的方法（如果我理解您的问题）是使用 XPath 或 CSS 来搜索您的“start_here”元素和您想要在其下搜索的父元素。然后，从父节点开始递归地遍历树，当您点击“start_here”元素时停止，并一直保持与您的样式匹配的最后一个元素。

就像是：

```
parent = value.search("//body").first
div = value.search("//div[@id = 'X2']").first

find = FindPriorTo.new(div)

assert_equal('Foo', find.find_from(parent, 'h1').text)
assert_equal('Bar', find.find_from(parent, 'h2').text) 
```

`FindPriorTo`处理递归的简单类在哪里：

```
class FindPriorTo
  def initialize(stop_element)
    @stop_element = stop_element
  end

  def find_from(parent, style)
    @should_stop = nil
    @last_style  = nil

    recursive_search(parent, style)
  end

  def recursive_search(parent, style)
    parent.children.each do |ch|
      recursive_search(ch, style)
      return @last_style if @should_stop

      @should_stop = (ch == @stop_element)
      @last_style = ch if ch.name == style
    end

    @last_style    
  end

end 
```

如果这种方法的可扩展性不够，那么您可以通过重写`recursive_search`不使用递归来优化事物，并传入您正在寻找的两种样式并跟踪最后找到的样式，因此您没有遍历树一个额外的时间。

我还要说尝试猴子修补节点以在文档被解析时挂钩，但看起来所有这些都是用 C 编写的。也许使用具有本机 Ruby SAX 解析器的 Nokogiri 以外的其他东西可能会更好（可能是[REXML](http://www.germane-software.com/software/rexml/)），或者如果您真正关心的是速度，请使用 Xerces 或类似工具在 C/C++ 中执行搜索部分。我不知道这些将如何处理解析 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-11T22:28:33.183

我想我发现这个已经晚了几年，但我觉得有必要发布，因为所有其他解决方案都太复杂了。

这是一个带有 XPath 的语句：

```
start = doc.at('div.block#X2')

start.at_xpath('(preceding-sibling::h1 | preceding-sibling::*//h1)[last()]')
#=> <h2>Foo</h2>    

start.at_xpath('(preceding-sibling::h2 | preceding-sibling::*//h2)[last()]')
#=> <h2>Bar</h2> 
```

这可以容纳直接的先前兄弟姐妹或先前兄弟姐妹的孩子。无论哪个匹配，`last()`谓词确保您获得最接近的先前匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T09:11:27.560

也许这会做到。我不确定性能以及是否可能有一些我没有想到的情况。

```
def find(root, start, tag)
    ps, res = start, nil
    until res or (ps == root)
        ps  = ps.previous || ps.parent
        res = ps.css(tag).last
        res ||= ps.name == tag ? ps : nil
    end
    res || "Not found!"
end

parent_element_h1 =  find(parent, start_here, 'h1') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T16:46:24.853

这是我自己的解决方案（感谢我的同事帮助我解决这个问题！）使用递归方法解析所有元素，无论是兄弟姐妹还是另一个兄弟姐妹的孩子。

```
require 'rubygems'
require 'nokogiri'

value = Nokogiri::HTML.parse(<<-HTML_END)
  "<html>
    <body>
      <p id='para-1'>A</p>
      <div class='block' id='X1'>
        <h1>Foo</h1>
        <p id='para-2'>B</p>
      </div>
      <p id='para-3'>C</p>
      <h2>Bar</h2>
      <p id='para-4'>D</p>
      <p id='para-5'>E</p>
      <div class='block' id='X2'>
        <p id='para-6'>F</p>
      </div>
    </body>
  </html>"
HTML_END

parent = value.css('body').first

# start_here is given: A Nokogiri::XML::Element of the <div> with the id 'X2
@start_here = parent.at('div.block#X2')

# Search for parent elements of kind "_style" starting from _start_element
def search_for_parent_element(_start_element, _style)
  unless _start_element.nil?
    # have we already found what we're looking for?
    if _start_element.name == _style
      return _start_element
    end
    # _start_element is a div.block and not the _start_element itself
    if _start_element[:class] == "block" && _start_element[:id] != @start_here[:id]
      # begin recursion with last child inside div.block
      from_child = search_for_parent_element(_start_element.children.last, _style)
      if(from_child)
        return from_child
      end
    end
    # begin recursion with previous element
    from_child = search_for_parent_element(_start_element.previous, _style) 
    return from_child ? from_child : false
  else
    return false
  end
end

# this should be a Nokogiri::XML::Element of the nearest, previous h1.
# in this example it's the one with the value 'Foo'
puts parent_element_h1 = search_for_parent_element(@start_here,"h1")

# this should be a Nokogiri::XML::Element of the nearest, previous h2\. 
# in this example it's the one with the value 'Bar'
puts parent_element_h2 = search_for_parent_element(@start_here,"h2") 
```

您可以复制/粘贴它并像运行 ruby​​ 脚本一样运行它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-03-18T19:40:12.787

如果您不知道元素之间的关系，您可以通过这种方式搜索它们（文档中的任何位置）：

```
 # html code
text = "insert your html here"
# get doc object
doc = Nokogiri::HTML(text)
# get elements with the specified tag
elements = doc.search("//your_tag") 
```

但是，如果您需要提交表单，则应使用 mechanize：

```
 # create mech object
mech = WWW::Mechanize.new
# load site
mech.get("address")
# select a form, in this case, I select the first form. You can select the one you need 
# from the array
form = mech.page.forms.first
# you fill the fields like this: form.name_of_the_field
form.element_name  = value
form.other_element = other_value 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-25T19:15:37.240

`HTML::Element`您可以使用 CSS 选择器搜索 Nokogiri 的后代。`.parent`您可以使用该方法遍历祖先。

```
parent_element_h1 = value.css("h1").first.parent
parent_element_h2 = value.css("h2").first.parent 
```

# debugging - 断点无法设置且已禁用

> ID：657470
> 
> 赞同：1
> 
> 时间：2009-03-18T09:08:03.647
> 
> 标签：debugging, visual-c++

如果我在 VC++ 6.0 项目中添加断点，然后开始调试，则会显示以下错误消息：

> 一个或多个断点无法设置且已被禁用，执行将在程序开始处停止

它显示了反汇编窗口。这是什么问题？

如何添加断点并开始调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-30T16:53:23.563

此问题主要发生在您在源文件中设置断点时，而不是您开始调试的源文件中。

假设您已经开始调试工作区 MainModule.dsw，并且从这个打开的 Visual Studio 编辑器本身中，您已经在其他 cpp 文件中插入了断点，那么在调试一开始您将收到此错误。

如果您已将源代码路径设置为 Visual Studio installaiton 的 vc 文件夹，您的编辑器将显示 winmain 方法或 dllmain 方法，而不是汇编代码。然后你就可以理解错误信息背后的主要逻辑了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T09:16:37.327

查看 ：

1.  [http://www.tek-tips.com/viewthread.cfm?qid=326950]](http://www.tek-tips.com/viewthread.cfm?qid=326950])
2.  [http://www.codeguru.com/forum/archive/index.php/t-118951.html](http://www.codeguru.com/forum/archive/index.php/t-118951.html)

加：

KB957912 - Visual Studio 2008 SP1 调试和断点更新 [http://code.msdn.microsoft.com/KB957912/Release/ProjectReleases.aspx?ReleaseId=1796](http://code.msdn.microsoft.com/KB957912/Release/ProjectReleases.aspx?ReleaseId=1796)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-08T02:38:56.400

我也遇到过这样的问题，但是以前的代码可以正常工作，我什至将所有文件与另一个正常工作的实例进行了比较。问题是路径中带有前导和尾随空格的破折号。一旦我删除了尾随空格（例如“-dir”变成“-dir”），它就可以正常工作了。尽管您可能希望尽可能避免使用破折号。希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T05:41:39.430

您很可能将“Win32 Release”作为活动配置。将其设置为“Win32 Debug”，然后您将获得必要的调试信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T12:41:19.393

首先要检查的两件事是：

*   您是否使用正确的调试信息设置编译了 C++ 代码？
*   您是否还告诉链接器生成调试信息？

当您在发布配置中构建二进制文件时，这两者往往会被关闭。IME，上述错误的最常见原因是有人忘记告诉链接器发出调试信息......

当具有损坏调试信息的二进制文件链接到可执行文件并使调试信息不​​可用时，我也看到了这个问题。

# c++ - 解析器生成有哪些程序？

> ID：657472
> 
> 赞同：1
> 
> 时间：2009-03-18T09:08:55.127
> 
> 标签：c++, parsing

我最近在学校上了一门课，在那里我们必须学习 Scheme 来为一种简单的类似 scheme 的语言构建一个解析器。随着学期的进行，我们添加到解析器中以使其越来越有趣。

从那时起，在我自己的时间里，我开始编写自己的解析器，它比我在课堂上所做的要简洁得多，但它会解析我的 C++ 代码，收集所有数据结构和公共成员的列表，并生成一个递归下降解析器。例如，如果我有以下

```
class Bar
{
public: 
    int a;
}

class Foo
{
public: 
    Bar* myBar;
    int x;
} 
```

我在它上面运行我的解析器生成器，它吐出一个新的类，简称为 Parser，我可以像这样使用它来从文件中读取：

```
Parser p;
Foo* f = p.parseFoo("example.txt"); 
```

其中 example.txt 将是这样的：

```
Foo
{
    myBar
    {
        a 5
    }
    x 10
} 
```

（这只是一个简单的例子，还有其他一些巧妙的事情，比如识别何时应该将它 push_back-ing 到向量上，并能够分配函数回调）

这似乎是其他人（可能更聪明）在我之前应该做的事情。我做了一些快速的谷歌搜索，看看那里有什么，但有很多东西要筛选。所以我的问题是：有没有工具可以做我的解析器生成器现在所做的事情？这个项目值得继续*还是已经有更好的工具？

*当然，作为一种学习体验，它总是值得继续的。相反，我的意思是从希望从文本读取数据结构的用户的角度来看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T09:11:34.403

lex 和 yacc（或者更确切地说是[flex](https://github.com/westes/flex)和[bison](http://www.gnu.org/software/bison/)）是强大的工具，可以帮助您轻松地为常规语言生成解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T09:21:06.427

Boost.Spirit*非常*令人印象深刻且非常有用。

可以在[此处找到有关此的文档](http://www.boost.org/doc/libs/1_38_0/libs/spirit/classic/index.html)

但请注意，解析 C++**确实不**容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T12:48:53.803

Qt 有一个免费的工具，只有一点文档，但没有太多开销。我已经用它为成熟的 DSL 创建了一个解析器。[QLALR](http://labs.trolltech.com/page/Projects/Compilers/QLALR)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T09:21:42.133

lex/yacc 或 flex/bison。
或 Boost.Spirit ( [http://spirit.sourceforge.net/](http://spirit.sourceforge.net/) )。

# python - 如何使用 Python SOAPpy 访问 Yahoo Enterprise Web Services？

> ID：657473
> 
> 赞同：1
> 
> 时间：2009-03-18T09:08:57.907
> 
> 标签：python, soap, soappy

我有一个可以工作的 PHP 脚本，我需要用 Python 编写相同的脚本，但是 SOAPpy 生成的请求略有不同，我不确定如何修复它，以便服务器喜欢它。

php 脚本生成的请求如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:ns1="http://marketing.ews.yahooapis.com/V4"
>
<SOAP-ENV:Header>
<ns1:username>*****</ns1:username>
<ns1:password>*****</ns1:password>
<ns1:masterAccountID>*****</ns1:masterAccountID>
<ns1:accountID>6674262970</ns1:accountID>
<ns1:license>*****</ns1:license>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
<ns1:getCampaignsByAccountID>
<ns1:accountID>6674262970</ns1:accountID>
<ns1:includeDeleted>false</ns1:includeDeleted>
</ns1:getCampaignsByAccountID>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

当尝试使用 SOAPPy 做同样的事情时，我收到了这个请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope
SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
xmlns:xsi="http://www.w3.org/1999/XMLSchema-instance"
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsd="http://www.w3.org/1999/XMLSchema"
>
<SOAP-ENV:Header>
<username xsi:type="xsd:string">*****</username>
<masterAccountID xsi:type="xsd:string">*****</masterAccountID>
<license xsi:type="xsd:string">*****</license>
<accountID xsi:type="xsd:integer">6674262970</accountID>
<password xsi:type="xsd:string">*****</password>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
<ns1:getCampaignsByAccountID xmlns:ns1="http://marketing.ews.yahooapis.com/V4">
<includeDeleted xsi:type="xsd:boolean">False</includeDeleted>
<accountID xsi:type="xsd:integer">6674262970</accountID>
</ns1:getCampaignsByAccountID>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

一个稍微不同的请求，但我想它应该可以工作，但我从服务器收到一个错误：“在

标头与参数中指定的不匹配。”

但他们确实匹配！

我唯一看到的是命名空间的一些差异，但我不知道现在该做什么。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-17T14:54:47.440

问题不在于 SOAP 标头格式，而在于参数顺序。这是完整的解释和代码： http: [//pea.somemilk.org/2009/04/05/yahoo-search-marketing-python-soap-binding/](http://pea.somemilk.org/2009/04/05/yahoo-search-marketing-python-soap-binding/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T10:46:21.603

accountID 的类型应为 xsd:string 而不是 xsd:integer。（也许您传递的是字符串而不是整数，这就是 SOAPpy 这样做的原因？）

# unit-testing - 单元测试和冗长的设置字符串：风格/最佳实践

> ID：657474
> 
> 赞同：2
> 
> 时间：2009-03-18T09:09:47.887
> 
> 标签：unit-testing

我对在单元测试中使用冗长的设置字符串的意见、实践和推荐的最佳实践感兴趣。

您更喜欢将测试声明为内联、靠近您的测试，还是在某个文件中外部化？

请注意，我说的是特定于单个单元测试的测试资产，因此不一定适合使用 setup() 方法。

我看到了两者的优点/缺点——我喜欢让对你的测试很重要的事情尽可能接近测试，但是在测试方法中，几行字符串设置很快就会变得很麻烦。

例如，我正在编写一个快速解析器来从文件中删除未使用的 css 声明。我想测试给定一个特定的输入字符串，正确的文本被删除。我的测试因所有字符串连接而变得非常嘈杂。

```
public void removesStyleFromText() 
{
    StyleCleaner styleCleaner = new StyleCleaner();
    String source = ".presentInFileOne {\r\n" + 
            "}\r\n" + 
            "\r\n" + 
            ".presentInFileTwo {\r\n" + 
            "   bottom-corners-rounded : false;\r\n" + 
            "}\r\n" + 
            ".notUsed {\r\n" + 
            "}\r\n" + 
            "";

    String actual = styleCleaner.removeDeclaration(source , "notUsed");

    String expected = ".presentInFileOne {\r\n" + 
    "}\r\n" + 
    "\r\n" + 
    ".presentInFileTwo {\r\n" + 
    "   bottom-corners-rounded : false;\r\n" + 
    "}\r\n";

    assertEquals(expected , actual);
} 
```

鉴于此示例，我*可以*将实际/预期外部文件外部化，但这也使测试对于它实际测试的内容有点不清楚。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T09:16:35.517

我个人更喜欢在这种情况下保持字符串内联。该字符串对于理解测试应该做什么很重要，因此必须从外部查找它似乎适得其反。

如果您有许多相同的测试，只是输入的字符串和输入的字符串有所不同，那么故事会有些不同，您可能需要查看基于表格的测试解决方案。在 .Net 中，您有 mbunit。它允许您使用不同的预期输入/输出运行相同的测试，或者您可以查看像 Fitnesse 这样的工具，这些工具允许您定义要测试的数据表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T09:14:54.943

绝对是代码，它更容易立即告诉你正在测试什么，并且当你想要重用它时更容易重构。我喜欢让它保持干燥，所以我通常倾向于将它移动到构建器或具体类（取决于我在做什么），这为我提供了一个默认配置，我可以针对特定测试进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T09:14:25.223

我会将字符串外部化并就您正在测试的内容写一些评论。注释还具有比这些字符串结构更具可读性的优点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T09:34:11.917

如果您使用支持**正确字符串文字**的编程语言，您的问题就会消失。例如，Python 支持多行字符串：

```
source = """
.presentInFileOne {
}

.presentInFileTwo {
       bottom-corners-rounded : false;
}
.notUsed {
}
"""

expected = """
.presentInFileOne {
}

.presentInFileTwo {
       bottom-corners-rounded : false;
}
"""

assert removeDeclaration(source, "notUsed") == expected 
```

这样的语言结构将使您的测试比其他任何东西都更具可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T09:58:01.063

有一个技巧可以使[多行字符串文字在 Java 中工作](http://blog.efftinge.de/2008/10/multi-line-string-literals-in-java.html)。性能可能不是您希望在生产中看到的，但对于测试来说已经足够了。

我的规则是：如果字符串很小（< 10 行），我将它们保持内联，但我总是可以将 "" 之间的所有内容剪掉并粘贴新版本（这意味着我将字符串转换为我的 assertEquals() 如有必要）。

如果字符串文字更长、更复杂或者当我有一个好的编辑器（带有语法突出显示等）时，我喜欢将它们保存在一个测试数据文件夹中，并以测试名称作为文件名。然后，您可以在 JUnit 测试中使用实用程序函数，该函数使用 getName() 来加载字符串，您将毫不费力地知道哪个文件属于哪个测试。

如果你有很多这些，我使用测试类名称 (class.getSimpleName()) 作为文件夹名称来保持我对它们的控制。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-18T09:31:59.830

我会这样 - 因为它对于那个测试很重要，并且如果你在测试中依赖“外部”的东西，它就不是严格的单元测试。

# asp.net - asp.net 的 xml 解析/查询性能问题

> ID：657477
> 
> 赞同：1
> 
> 时间：2009-03-18T09:11:04.327
> 
> 标签：asp.net, xml, caching, xml-serialization

我必须将较小的 Windows 窗体应用程序（产品配置器）移植到将在大公司网站上使用的 asp.net 应用程序，需求应该适中，因为它是针对专业产品线的。

我无权访问数据库，并且使用 XML 是他们的 Web 开发人员的要求。

xml 文件中存储了大约 30 种不同的产品，大约有 300 种不同的可能配置，以及导致产品推荐的链接问题/答案。还有一些生产选项。该应用程序有 6 种语言版本。

如果您可以这样称呼它，您将如何解决“数据访问”层？我想过将 xml 文件读入/反序列化到它们的对象中，如果它们不存在，则将它们存储在 asp.net 的缓存中，然后在后续请求中从缓存中读取。但这意味着所有对象都日日夜夜地生活在记忆中。

这甚至是必要的，还是明智的，性能明智的？正如我之前所说，应用程序没有那么大，xml 文件也没有那么大。我是否可以创建一些 Repository 类来在请求对象时读取 xml 文件（即“产品详细信息”或“下一个问题”）并以这种方式返回它，并降低内存消耗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T09:29:22.427

整个方法似乎坚持使用单个服务器。首先考虑这是否合适，因为您提到了“大公司的网站”，这对我来说是一个危险信号。如果您需要扩展站点，您最终将拥有多个服务器，这会妨碍您考虑使用简单的本地文件。

如果您受限于使用它，请分析哪些数据更适合保存在缓存中（不经常更改，它的寿命很长，不同时间请求相同的信息）。尝试将缓存的内容与非缓存的内容分开，这将减少更多动态文件中的信息量。如果您期望大量信息，请考虑使用适合您的域的内容拆分文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T22:29:40.337

我尽可能使用缓存。我在他们第一次请求时缓存对象。如果内存有任何问题，我会设置过期策略。不管是不是，当内存不足时，框架无论如何都会卸载缓存。

由于它是针对每个应用程序而不是针对每个用户的，因此拥有它是有意义的，尤其是在相对占用空间很小的情况下。

如果您以后必须扩展到多个服务器，您可以通过网络访问同一个文件或修改 DA 层以通过任何其他方式（服务、DB 等）检索数据。缓存代码将保持不变，性能几乎不受影响。

如果您设置依赖关系，对象将始终保持最新状态。

我赞成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-25T09:44:45.287

使用缓存并按照其他人的建议设置适当的过期策略是一种合理的方法。我建议您考虑使用 LINQ to XML 作为数据访问代码的基础，因为它比查询 XML 的传统方法更容易使用。[你可以在这里](http://www.hookedonlinq.com/LINQtoXML5MinuteOverview.ashx)找到一个不错的介绍。

# unix - 如何在不登录主机的情况下从 IP 中查找主机名

> ID：657482
> 
> 赞同：129
> 
> 时间：2009-03-18T09:11:47.757
> 
> 标签：unix, command-line, hostname

我需要找到一个 UNIX 主机的主机名，该主机的 IP 已知，无需登录该 UNIX 主机

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2009-03-18T09:15:27.687

使用[nslookup](http://en.wikipedia.org/wiki/Nslookup)

```
nslookup 208.77.188.166 
...
Non-authoritative answer:
166.188.77.208.in-addr.arpa     name = www.example.com. 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2009-03-18T09:43:53.000

您也可以使用 进行反向 DNS 查找`host`。只需给它 IP 地址作为参数：

```
$ host 192.168.0.10
server10 has address 192.168.0.10 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2013-01-25T20:26:38.683

另一个可用于反向查找的 NS 查找实用程序`dig`带有以下`-x`选项：

```
$ dig -x 72.51.34.34

; <<>> DiG 9.9.2-P1 <<>> -x 72.51.34.34
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 12770
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 1460
;; QUESTION SECTION:
;34.34.51.72.in-addr.arpa.      IN      PTR

;; ANSWER SECTION:
34.34.51.72.in-addr.arpa. 42652 IN      PTR     sb.lwn.net.

;; Query time: 4 msec
;; SERVER: 192.168.178.1#53(192.168.178.1)
;; WHEN: Fri Jan 25 21:23:40 2013
;; MSG SIZE  rcvd: 77 
```

或者

```
$ dig -x 127.0.0.1

; <<>> DiG 9.9.2-P1 <<>> -x 127.0.0.1
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 11689
;; flags: qr aa ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;1.0.0.127.in-addr.arpa.                IN      PTR

;; ANSWER SECTION:
1.0.0.127.in-addr.arpa. 10      IN      PTR     localhost.

;; Query time: 2 msec
;; SERVER: 192.168.178.1#53(192.168.178.1)
;; WHEN: Fri Jan 25 21:23:49 2013
;; MSG SIZE  rcvd: 63 
```

引用[dig 联机帮助页](http://linux.die.net/man/1/dig)：

> 反向查找（将地址映射到名称）通过 **-x**选项进行了简化。addr 是点分十进制表示法的 IPv4 地址，或冒号分隔的 IPv6 地址。使用此选项时，无需提供名称、类和类型参数。dig 会自动查找类似 11.12.13.10.in-addr.arpa 的名称，并将查询类型和类分别设置为 PTR 和 IN。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-02-13T11:59:04.293

对于 Windows ping -a 10.10.10.10

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-11-21T06:12:36.843

*   对于 Windows，请尝试：

    ```
    NBTSTAT -A 10.100.3.104 
    ```

    或者

    ```
    ping -a 10.100.3.104 
    ```

*   对于 Linux，请尝试：

    ```
    nmblookup -A 10.100.3.104 
    ```

它们几乎相同。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-10-21T10:28:23.813

```
python -c "import socket;print(socket.gethostbyaddr('127.0.0.1'))" 
```

如果您只需要名称，不需要其他信息，请在末尾添加 [0]：

```
python -c "import socket;print(socket.gethostbyaddr('8.8.8.8'))[0]" 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-01-19T20:49:45.513

这取决于上下文。我认为您指的是操作系统的主机名（`hostname`在您登录时返回）。该命令仅用于*内部名称*，因此查询机器名称需要不同的命名系统。有多个系统使用名称来识别主机，包括 DNS、DHCP、LDAP (DN)`hostname`等，并且许多系统使用[zeroconf](https://en.wikipedia.org/wiki/Zero-configuration_networking#Name_resolution)在多个命名系统之间同步名称。出于这个原因，结果`hostname`有时会匹配来自`dig`（见下文）或其他命名系统的结果，但通常它们不会匹配。

**DNS**是迄今为止最常见的，在互联网（如`google.com. A 216.58.218.142`）和家庭（mDNS/LLMNR）中都使用，所以这里是执行[反向 DNS 查找](https://en.wikipedia.org/wiki/Reverse_DNS_lookup#Multiple_pointer_records)`dig -x <address>`的方法：（`nslookup`并且`host`更简单，提供的细节更少，甚至可能返回不同的结果；但是，`dig`不包含在 Windows 中）。

请注意，[CDN](https://en.wikipedia.org/wiki/Content_delivery_network)中的主机名不会解析为规范域名（例如“google.com”），而是您查询的主机 IP 的主机名（例如“dfw25s08-in-f142.1e100.net”；有趣的花絮： 1e100 是 1 古戈尔）。

另请注意，DNS 主机可以有多个名称。这对于具有多个网络服务器（虚拟主机）的主机来说很常见，尽管由于虚拟化技术的普及，这种情况变得越来越少。这些主机有[多个 PTR DNS 记录](https://en.wikipedia.org/wiki/Reverse_DNS_lookup#Multiple_pointer_records)。

最后，请注意，本地计算机可以通过[/etc/hosts](https://en.wikipedia.org/wiki/Hosts_(file))覆盖 DNS 主机记录。如果您没有得到您期望的主机名，请务必检查此文件。

**DHCP**主机名的查询方式因使用的 DHCP 服务器软件而异，因为（据我所知）该协议没有定义查询方法；但是，大多数服务器都提供了某种方式来执行此操作（通常使用特权帐户）。

注意 DHCP 名称通常与 DNS 服务器同步，因此通常会在 DHCP 客户端最小表和 DNS 服务器的 A（或 IPv6 的 AAAA）记录中看到相同的主机名。同样，这通常作为 zeroconf 的一部分完成。

另请注意，仅仅因为客户端存在 DHCP 租约，并不意味着它仍在使用中。

**用于 TCP/IP (NBT)**的 NetBIOS 几十年来一直用于执行名称解析，但后来被 LLMNR 取代*用于名称解析*（Windows 上 zeroconf 的一部分）。仍然可以使用`nbtstat`(Windows) 或`nmblookup`(Linux) 查询此遗留系统。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-03-18T09:46:31.183

这里的其他答案是正确的 - 使用反向 DNS 查找。如果您想通过脚本语言（Python、Perl）来实现，您可以使用 gethostbyaddr API。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-30T04:25:46.673

如果您正在寻找 Windows 机器，请尝试以下命令：

```
nbtstat -a 10.228.42.57 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2009-03-18T09:35:22.287

您也可以使用 traceroute 命令。

[http://linux.die.net/man/8/traceroute](http://linux.die.net/man/8/traceroute)

只需使用 traceroute 它会向您显示带有主机名的路由路径（IP 已解析）

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-01-30T04:51:10.817

在大多数情况下，traceroute 命令可以正常工作。nslookup 和 host 命令可能会失败。

# javafx - 为什么这个“绑定”代码在 JavaFX 中不能按预期工作？

> ID：657486
> 
> 赞同：5
> 
> 时间：2009-03-18T09:13:33.417
> 
> 标签：javafx

我是 JavaFX 的新手。我无法理解为什么下面的代码不起作用。

```
import javafx.util.Sequences;

def nums = [1..10];
var curr = 0;

var evenOrOdd = bind if (nums[curr] mod 2 == 0) "{nums[curr]} is an even number" else "{nums[curr]} is an odd number";

for (curr in [0..(sizeof nums -1)])
{
    println("{evenOrOdd}");
} 
```

我正进入（状态

```
1 is an odd number
1 is an odd number
1 is an odd number
1 is an odd number
1 is an odd number
1 is an odd number
1 is an odd number
1 is an odd number
1 is an odd number
1 is an odd number 
```

如果我将代码更改为

```
import javafx.util.Sequences;

def nums = [1..10];
var curr = 0;

var evenOrOdd = bind if (nums[curr] mod 2 == 0) "{nums[curr]} is an even number" else "{nums[curr]} is an odd number";

for (i in [0..(sizeof nums -1)])
{
    curr = i;
    println("{evenOrOdd}");
} 
```

我得到正确的输出：

```
1 is an odd number
2 is an even number
3 is an odd number
4 is an even number
5 is an odd number
6 is an even number
7 is an odd number
8 is an even number
9 is an odd number
10 is an even number 
```

显然，循环中的计数器增量不会被视为值更改，并且不会重新评估绑定表达式。

谁能解释一下这种行为背后的概念？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T19:21:32.097

*for*表达式隐式定义了它的迭代变量（这就是为什么您不需要在第二个示例中声明*i的原因）。*即使已经有一个同名的变量，*for*仍然会为其作用域创建一个新变量。您的*绑定*表达式绑定到*for*循环外部的*curr*变量，而不是绑定到*for*循环内的变量。并且循环之外的那个不会改变，所以绑定的表达式不会改变。

 ***演示for 的*这种行为的示例：

```
var curr = 0;
var ousideCurrRef = bind curr;
println("Before 'for' loop: curr={curr}");
for (curr in [0..3])
{
    println("In 'for' loop: curr={curr} ousideCurrRef={ousideCurrRef}");
}
println("After 'for' loop: curr={curr}"); 
```

这将打印：

```
Before 'for' loop: curr=0
In 'for' loop: curr=0 ousideCurrRef=0
In 'for' loop: curr=1 ousideCurrRef=0
In 'for' loop: curr=2 ousideCurrRef=0
In 'for' loop: curr=3 ousideCurrRef=0
After 'for' loop: curr=0 
```

因此，如果您在*for*循环内修改同名变量，则*for*循环外的*curr*不会改变。

 **# java - 如何使用图块在我现有的项目中包含图像？

> ID：657487
> 
> 赞同：-4
> 
> 时间：2009-03-18T09:13:47.550
> 
> 标签：java, jsp, web-applications, struts, tiles

我开发了一个简单的 struts 应用程序，它从数据库中检索和操作客户数据。现在我想在所有页面的顶部包含一个图像。我知道瓷砖是最好的方法。如何使用图块在我现有的项目中包含图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T09:29:08.980

你可以在这里找到一个很好的例子： [First Struts Tiles Tutorial](http://www.laliluna.de/download/first_struts_tiles_tutorial.pdf)

基本上，您必须：

*   使用磁贴标签 (tiles:insert) 定义页面的布局（模板）
*   创建图块定义，告诉哪些 jsps（或静态资源）进入图块：插入您在布局中定义
*   调整您的 struts 映射以重定向到命名的切片定义，而不是直接重定向到 jsps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-27T07:15:50.797

首先你根据它划分你的模板（即 - 在单独的文件中制作 image.jsp），然后在你的示例中添加你想要显示它的 jsp 页面到 tiles.xml

```
<definition name="template">
<put-attribute name="image" value="/image.jsp"/>
<put-attribute name="header" value="/header.jsp"/>
<put-attribute name="content" value="/content.jsp"/>
<put-attribute name="footer" value="/footer.jsp"/>
</definition> 
```

如果您不想显示任何内容，只需将其从 tiles.xml 中删除

# linux - 如果Linux中单个目录下的文件太多会发生什么？

> ID：657488
> 
> 赞同：12
> 
> 时间：2009-03-18T09:13:57.567
> 
> 标签：linux, file, system

如果单个目录中有大约 1,000,000 个单独的文件（大小大多为 100k），平坦（其中没有其他目录和文件），是否会以任何其他可能的方式降低效率或劣势？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-18T09:16:40.757

ARG_MAX 会对此提出异议……例如， rm -rf * （在目录中）会说“参数太多”。想要进行某种通配（或外壳）的实用程序将有一些功能中断。

如果该目录对公众可用（比如说通过 ftp 或 Web 服务器），您可能会遇到其他问题。

对任何给定文件系统的影响完全取决于该文件系统。这些文件的访问频率如何，文件系统是什么？请记住，Linux（默认情况下）更喜欢将最近访问的文件保留在内存中，同时将进程放入交换中，具体取决于您的设置。这个目录是通过 http 提供的吗？谷歌会看到并抓取它吗？如果是这样，您可能需要调整 VFS 缓存压力和 swappiness。

**编辑：**

ARG_MAX 是一个系统范围的限制，限制了可以向程序的入口点提供多少参数。因此，让我们以“rm”为例，以“rm -rf *”为例——shell 会将“*”转换为以空格分隔的文件列表，该列表又将成为“rm”的参数。

ls 和其他几个工具也会发生同样的事情。例如，如果太多文件以 'foo' 开头， ls foo* 可能会中断。

我建议（无论使用什么 fs ）将其分解为更小的目录块，仅出于这个原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T09:43:45.980

我在 ext3 上使用大型目录并`dir_index`启用的经验：

*   如果您知道要访问的文件的名称，几乎没有任何惩罚
*   如果您想要执行需要读取整个目录条目的操作（例如`ls`对该目录的简单操作），第一次将需要几分钟。然后该目录将保留在内核缓存中，不再有任何惩罚
*   如果文件数量过多，则会遇到 ARG_MAX 等问题。这基本上意味着通配符 ( `*`) 不再按预期工作。仅当您真的想一次对所有文件执行操作时

但是，如果没有`dir_index`，您真的被搞砸了:-D

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T09:23:55.047

当你不小心在那个目录中执行了“ls”，或者使用了tab补全，或者想要执行“rm *”，你就会遇到大麻烦。此外，可能存在性能问题，具体取决于您的文件系统。

将文件分组到由文件名的前 2 或 3 个字符命名的目录中被认为是一种很好的做法，例如

```
啊啊/
   aaavnj78t93ufjw4390
   aaavoj78trewrwrwrwenjk983
   aaaz84390842092njk423
   ...
ABC/
   abckhr89032423
   abcnjjkth29085242nw
   ...
...

```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-18T09:26:09.487

大多数发行版默认使用[Ext3](http://en.wikipedia.org/wiki/Ext3)，它可以对大型目录使用 b-tree 索引。某些发行版`dir_index`默认启用此功能，而其他发行版则必须自己启用。如果启用它，即使是数百万个文件也不会减速。

要查看 `dir_index`功能是否已激活（以 root 身份）：

```
tune2fs -l /dev/sdaX | grep features 
```

要激活 dir_index 功能（以 root 身份）：

```
tune2fs -O dir_index /dev/sdaX
e2fsck  -D /dev/sdaX 
```

替换`/dev/sdaX`为要为其激活它的分区。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-18T09:27:13.650

显而易见的答案是，在任何技术限制之前很久，人类就很难使用该文件夹，（读取 ls 的输出所花费的时间是一个原因，还有很多其他原因）您是否有充分的理由不能拆分进入子文件夹？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-07-02T07:57:30.857

并非每个文件系统都支持那么多文件。

在其中一些（ext2、ext3、ext4）上，很容易达到 inode 限制。

# javascript - 使用 javascript 限制用户输入

> ID：657492
> 
> 赞同：6
> 
> 时间：2009-03-18T09:14:44.630
> 
> 标签：javascript, html, user-interface, input

有人可以向我展示一些限制 Javascript 中用户输入（在输入标签上）的示例吗？

当我们将输入 (type="text") 设置为仅接受数字时，它会忽略除数字之外的任何其他输入...

我认为数字输入很方便（例如邮编、信用卡、货币、价值、分数、日期等），如果你能告诉我如何使用模式创建输入，例如：

```
请输入日期：
|-----------------|
| // |
|-----------------|

```

PS：听说 WebForms 2.0 以后会支持这个……（Acid 3 兼容浏览器？）

输入类型="日期"
输入类型="时间"
输入类型="数字"
输入类型="金钱"

但这只是来自未来的消息：D

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-18T09:30:03.253

这可能会帮助你。

[http://www.w3schools.com/jsref/event_onkeydown.asp](http://www.w3schools.com/jsref/event_onkeydown.asp)

```
<html>
<body>

<script type="text/javascript">
function noNumbers(e)
{
var keynum;
var keychar;
var numcheck;

if(window.event) // IE
{
keynum = e.keyCode;
}
else if(e.which) // Netscape/Firefox/Opera
{
keynum = e.which;
}
keychar = String.fromCharCode(keynum);
numcheck = /\d/;
return !numcheck.test(keychar);
}
</script>

<form>
<input type="text" onkeydown="return noNumbers(event)" />
</form>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-07T07:42:38.013

这个问题已经有一个公认的答案，但我认为有一个更好的解决方案。您不必自己在 keydown 等上实现它，有相应的库。他们将您描述的技术称为“输入掩码”。查看[这个 jQuery 插件](http://digitalbush.com/projects/masked-input-plugin/)，它完全符合您的要求。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-18T09:24:02.020

您可以在表单提交时使用特定的库，例如 jQuery Validate（或任何您的 JS 框架提供的）。另一种解决方案是控制 keyUp 和 blur 事件的值，但决定如何处理格式错误的条目可能会变得非常混乱（尤其是当格式有点复杂时——即不仅仅是不想要的字符）。所以，总而言之，我建议在提交时进行客户端控制。

# vba - 如何使用 VBA 将标题添加到 Excel 用户表单中的多列列表框

> ID：657498
> 
> 赞同：17
> 
> 时间：2009-03-18T09:16:10.697
> 
> 标签：vba, excel

是否可以在不使用工作表范围作为源的情况下在多列列表框中设置标题？

以下使用分配给列表框的列表属性的变量数组，标题显示为空白。

```
Sub testMultiColumnLb()
    ReDim arr(1 To 3, 1 To 2)

    arr(1, 1) = "1"
    arr(1, 2) = "One"
    arr(2, 1) = "2"
    arr(2, 2) = "Two"
    arr(3, 1) = "3"
    arr(3, 2) = "Three"

    With ufTestUserForm.lbTest
        .Clear
        .ColumnCount = 2
        .List = arr
    End With

    ufTestUserForm.Show 1
End Sub 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-18T15:54:26.230

不，我在列表框上方创建标签作为标题。您可能认为每次 lisbox 更改时都更改标签是一件非常痛苦的事情。你是对的 - 这是一种痛苦。第一次设置很痛苦，更不用说更改了。但是我还没有找到更好的方法。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-04-13T00:21:23.703

## 这是我解决问题的方法：

此解决方案要求您添加第二个 ListBox 元素并将其放在第一个元素之上。

像这样：

[![添加一个额外的列表框](https://i.stack.imgur.com/sFBwU.png)](https://i.stack.imgur.com/sFBwU.png)

然后调用函数 CreateListBoxHeader 以使对齐正确并添加标题项。

**结果：**

[![调用函数 CreateListBoxHeader](https://i.stack.imgur.com/Uwq9U.png)](https://i.stack.imgur.com/Uwq9U.png)

## 代码：

```
 Public Sub CreateListBoxHeader(body As MSForms.ListBox, header As MSForms.ListBox, arrHeaders)
            ' make column count match
            header.ColumnCount = body.ColumnCount
            header.ColumnWidths = body.ColumnWidths

        ' add header elements
        header.Clear
        header.AddItem
        Dim i As Integer
        For i = 0 To UBound(arrHeaders)
            header.List(0, i) = arrHeaders(i)
        Next i

        ' make it pretty
        body.ZOrder (1)
        header.ZOrder (0)
        header.SpecialEffect = fmSpecialEffectFlat
        header.BackColor = RGB(200, 200, 200)
        header.Height = 10

        ' align header to body (should be done last!)
        header.Width = body.Width
        header.Left = body.Left
        header.Top = body.Top - (header.Height - 1)
End Sub 
```

## 用法：

```
Private Sub UserForm_Activate()
    Call CreateListBoxHeader(Me.listBox_Body, Me.listBox_Header, Array("Header 1", "Header 2"))
End Sub 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-05T20:55:49.953

我刚才在看这个问题并找到了这个解决方案。如果您的**RowSource**指向一系列单元格，则多列列表框中的列标题取自 RowSource 正上方的单元格。

使用此处图示的示例，在列表框中，“**符号**”和**“名称**”这两个词显示为标题。当我更改单元格 AB1 中的名称，然后再次在 VBE 中打开表单时，列标题发生了变化。

![显示命名范围和范围之外的列标题的屏幕截图。](https://i.stack.imgur.com/ImfA5.png)

该示例来自 S. Christian Albright 的 VBA For Modelers 工作簿，我试图弄清楚他是如何在列表框中获取列标题的：)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-18T09:29:07.000

简单的回答：没有。

我过去所做的是将标题加载到第 0 行，然后在显示表单时将 ListIndex 设置为 0。然后以蓝色突出显示“标题”，呈现标题的外观。如果 ListIndex 保持为零，则忽略表单操作按钮，因此永远无法选择这些值。

当然，一旦选择了另一个列表项，标题就会失去焦点，但此时他们的工作已经完成。

以这种方式做事还允许您拥有水平滚动的标题，这对于浮动在列表框上方的单独标签来说是困难/不可能的。另一方面，如果列表框需要垂直滚动，标题不会保持可见。

基本上，这是一种妥协，适用于我所经历的情况。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-12-13T18:38:29.093

有一个非常简单的解决方案可以在多列列表框的顶部显示标题。只需将“columnheads”的属性值更改为“true”，默认情况下为 false。

之后只需提及属性“rowsource”中的数据范围，不包括数据范围中的标题，标题应位于数据范围的第一行，然后它将自动选择标题，您的标题将被冻结。

**如果假设您的数据范围为“A1:H100”，标题为“A1:H1”，这是第一行，那么您的数据范围应该是“A2:H100”，这需要在属性“rowsource”和“columnheads”属性中提及值应该为真**

问候， 阿西夫·哈米德

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-02-21T01:01:53.367

只需使用两个列表框，一个用于标题，另一个用于数据

1.  对于标题 - 将 RowSource 属性设置为顶行，例如 Incidents!Q4:S4

2.  对于数据 - 将行源属性设置为事件！Q5:S10

“3-frmSpecialEffectsEtched”的特殊效果 [![在此处输入图像描述](https://i.stack.imgur.com/X9W22.png)](https://i.stack.imgur.com/X9W22.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-14T18:47:45.333

我喜欢对未从工作表加载 CboBx 的 ComboBox 上的标题使用以下方法（例如，来自 sql 的数据）。我不从工作表中指定的原因是，我认为让 RowSource 工作的唯一方法是从工作表加载。

这对我有用：

1.  创建您的 ComboBox 并创建一个具有相同布局但只有一行的 ListBox。
2.  将 ListBox 直接放在 ComboBox 的顶部。
3.  在您的 VBA 中，使用所需的标题加载 ListBox row1。
4.  在操作 yourListBoxName_Click 的 VBA 中，输入以下代码：

    ```
    yourComboBoxName.Activate`
    yourComboBoxName.DropDown` 
    ```

5.  当您单击列表框时，组合框将下拉并正常运行，而标题（在列表框中）仍保留在列表上方。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-02T12:17:25.457

我一直在寻找一种解决方案来添加标题而不使用单独的工作表并将所有内容复制到用户表单中。

我的解决方案是使用第一行作为标题并通过 if 条件运行它并在下面添加其他项目。

像那样：

```
If lborowcount = 0 Then
 With lboorder
 .ColumnCount = 5
 .AddItem
 .Column(0, lborowcount) = "Item"
 .Column(1, lborowcount) = "Description"
 .Column(2, lborowcount) = "Ordered"
 .Column(3, lborowcount) = "Rate"
 .Column(4, lborowcount) = "Amount"
 End With
 lborowcount = lborowcount + 1
End If

With lboorder
 .ColumnCount = 5
 .AddItem
 .Column(0, lborowcount) = itemselected
 .Column(1, lborowcount) = descriptionselected
 .Column(2, lborowcount) = orderedselected
 .Column(3, lborowcount) = rateselected
 .Column(4, lborowcount) = amountselected

 End With

lborowcount = lborowcount + 1
```

在该示例中， lboorder 是列表框， lborowcount 计数添加下一个列表框项目的行。这是一个 5 列的列表框。不理想，但它有效，当您必须水平滚动时，“标题”保持在行上方。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-24T12:54:19.260

这是我的解决方案。

我注意到，当我通过 VBE 中的属性窗口指定列表框的行源时，标题弹出没有问题。只有当我们尝试通过 VBA 代码定义行源时，标头才会丢失。

因此，我首先通过属性窗口将列表框行源定义为 VBE 中的命名范围，然后我可以在 VBA 代码中重置行源。标题仍然每次都出现。

我将它与来自列表对象的高级过滤器宏结合使用，然后创建另一个（过滤的）列表对象，行源所基于的列表对象。

这对我有用

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-23T20:33:29.920

Lunatik 响应的另一个变体是使用本地布尔值和更改事件，以便在初始化时可以突出显示该行，但在用户进行选择更改后取消选择并阻止：

```
Private Sub lbx_Change()

    If Not bHighlight Then

        If Me.lbx.Selected(0) Then Me.lbx.Selected(0) = False

    End If

    bHighlight = False

End Sub 
```

初始化列表框后，您设置 bHighlight 和 lbx.Selected(0) = True，这将允许标题行初始化选中；之后，第一次更改将取消选择并防止再次选择该行...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-27T08:06:50.617

这是一种自动在列表框的每一列上方（在工作表上）创建标签的方法。

只要列表框上没有水平滚动条，它就可以工作（虽然不是超级漂亮！）。

```
Sub Tester()
Dim i As Long

With Me.lbTest
    .Clear
    .ColumnCount = 5
    'must do this next step!
    .ColumnWidths = "70;60;100;60;60"
    .ListStyle = fmListStylePlain
    Debug.Print .ColumnWidths
    For i = 0 To 10
        .AddItem
        .List(i, 0) = "blah" & i
        .List(i, 1) = "blah"
        .List(i, 2) = "blah"
        .List(i, 3) = "blah"
        .List(i, 4) = "blah"
    Next i

End With

LabelHeaders Me.lbTest, Array("Header1", "Header2", _
                     "Header3", "Header4", "Header5")

End Sub

Sub LabelHeaders(lb, arrHeaders)

    Const LBL_HT As Long = 15
    Dim T, L, shp As Shape, cw As String, arr
    Dim i As Long, w

    'delete any previous headers for this listbox
    For i = lb.Parent.Shapes.Count To 1 Step -1
        If lb.Parent.Shapes(i).Name Like lb.Name & "_*" Then
            lb.Parent.Shapes(i).Delete
        End If
    Next i

    'get an array of column widths
    cw = lb.ColumnWidths
    If Len(cw) = 0 Then Exit Sub
    cw = Replace(cw, " pt", "")
    arr = Split(cw, ";")

    'start points for labels
    T = lb.Top - LBL_HT
    L = lb.Left

    For i = LBound(arr) To UBound(arr)
        w = CLng(arr(i))
        If i = UBound(arr) And (L + w) < lb.Width Then w = lb.Width - L
        Set shp = ActiveSheet.Shapes.AddShape(msoShapeRectangle, _
                                         L, T, w, LBL_HT)
        With shp
            .Name = lb.Name & "_" & i
            'do some formatting
            .Line.ForeColor.RGB = vbBlack
            .Line.Weight = 1
            .Fill.ForeColor.RGB = RGB(220, 220, 220)
            .TextFrame2.TextRange.Characters.Text = arrHeaders(i)
            .TextFrame2.TextRange.Font.Size = 9
            .TextFrame2.TextRange.Font.Fill.ForeColor.RGB = vbBlack
        End With
        L = L + w
    Next i
End Sub 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-05-08T13:36:21.783

你可以试试这个。我对论坛很陌生，但我想提供一些对我有用的东西，因为我过去从这个网站得到了很多帮助。这本质上是上述的变体，但我发现它更简单。

只需将其粘贴到用户表单代码的 Userform_Initialize 部分。请注意，您必须在用户窗体上已经有一个列表框，或者在此代码上方动态创建它。另请注意，数组是标题列表（以下为“Header1”、“Header2”等。将这些替换为您自己的标题。然后，此代码将根据列表框的列宽在顶部设置一个标题栏. 抱歉，它不滚动 - 它是固定标签。

更高级的编码人员 - 请随时发表评论或改进。

```
 Dim Mywidths As String
    Dim Arrwidths, Arrheaders As Variant
    Dim ColCounter, Labelleft As Long
    Dim theLabel As Object                

    [Other code here that you would already have in the Userform_Initialize section]

    Set theLabel = Me.Controls.Add("Forms.Label.1", "Test" & ColCounter, True)
            With theLabel
                    .Left = ListBox1.Left
                    .Top = ListBox1.Top - 10
                    .Width = ListBox1.Width - 1
                    .Height = 10
                    .BackColor = RGB(200, 200, 200)
            End With
            Arrheaders = Array("Header1", "Header2", "Header3", "Header4")

            Mywidths = Me.ListBox1.ColumnWidths
            Mywidths = Replace(Mywidths, " pt", "")
            Arrwidths = Split(Mywidths, ";")
            Labelleft = ListBox1.Left + 18
            For ColCounter = LBound(Arrwidths) To UBound(Arrwidths)
                        If Arrwidths(ColCounter) > 0 Then
                                Header = Header + 1
                                Set theLabel = Me.Controls.Add("Forms.Label.1", "Test" & ColCounter, True)

                                With theLabel
                                    .Caption = Arrheaders(Header - 1)
                                    .Left = Labelleft
                                    .Width = Arrwidths(ColCounter)
                                    .Height = 10
                                    .Top = ListBox1.Top - 10
                                    .BackColor = RGB(200, 200, 200)
                                    .Font.Bold = True
                                End With
                                 Labelleft = Labelleft + Arrwidths(ColCounter)

                        End If
             Next 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-22T22:44:15.497

这是一个无赖。必须使用中间表来放入数据，以便 Excel 知道要抓取标题。但是我希望隐藏该工作簿，所以这就是我必须执行行源的方法。大部分代码只是设置...

```
Sub listHeaderTest()
Dim ws As Worksheet
Dim testarr() As String
Dim numberOfRows As Long
Dim x As Long, n As Long

'example sheet
Set ws = ThisWorkbook.Sheets(1)
'example headers
For x = 1 To UserForm1.ListBox1.ColumnCount
    ws.Cells(1, x) = "header" & x
Next x
'example array dimensions
numberOfRows = 15
ReDim testarr(numberOfRows, UserForm1.ListBox1.ColumnCount - 1)
'example values for the array/listbox
For n = 0 To UBound(testarr)
    For x = 0 To UBound(testarr, 2)
        testarr(n, x) = "test" & n & x
    Next x
Next n

'put array data into the worksheet
ws.Range("A2").Resize(UBound(testarr), UBound(testarr, 2) + 1) = testarr

'provide rowsource
UserForm1.ListBox1.RowSource = "'[" & ws.Parent.Name & "]" & ws.Name & "'!" _
& ws.Range("A2").Resize(ws.UsedRange.Rows.Count - 1, ws.UsedRange.Columns.Count).Address

UserForm1.Show

End Sub 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-01T05:03:23.073

对于滚动，一个想法是创建一个模拟滚动条，它将整个列表框左右移动。

1.  确保列表框设置为全宽，这样水平滚动条就不会出现（比可用空间宽，否则我们不需要滚动）
2.  在底部添加一个滚动条控件，但使用 .left 和 .width 来匹配可用的水平空间（所以不像太宽的列表框那么宽）
3.  计算您需要滚动的距离，即扩展列表框的宽度与可用水平空间的宽度之差
4.  将 .Min 设置为 0 并将 .Max 设置为您需要滚动的量
5.  设置 .LargeChange 使滑块更宽（我只能让它成为总跨度的一半）

为此，您需要能够用框架覆盖预期查看空间的左右两侧，以便列表框可以在其下方通过并保留表单中的任何水平框架。这变得具有挑战性，因为让框架覆盖列表框似乎并不容易。我当时放弃了，但我正在为后代分享这些步骤。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-06-16T20:31:15.910

为什么不直接将标签添加到列表框的顶部，如果需要更改，您唯一需要以编程方式更改的就是标签。

# c# - 如何处理要扩展的类，该类被密封在 .NET 库中？

> ID：657503
> 
> 赞同：11
> 
> 时间：2009-03-18T09:17:12.223
> 
> 标签：c#, .net

我正在某处阅读有关如何处理希望在 .NET Framework 库中扩展密封类的问题。

这通常是一项常见且有用的任务，因此我开始思考，在这种情况下，有哪些解决方案？我相信在我阅读的文章中演示了一种扩展密封类的“方法”，但我现在不记得了（它不是扩展方法）。

还有其他方法吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T09:25:46.587

存在“假”继承。也就是说，您实现了基类和其他类实现的任何接口：

```
// Given
sealed class SealedClass : BaseClass, IDoSomething { }

// Create
class MyNewClass : BaseClass, IDoSomething { } 
```

然后你有一个私人成员，我通常称之为 _backing，因此：

```
class MyNewClass : BaseClass, IDoSomething
{
   SealedClass _backing = new SealedClass();
} 
```

这显然不适用于具有以下签名的方法：

```
void NoRefactoringPlease(SealedClass parameter) { } 
```

如果您要扩展的类在某些时候继承自 ContextBoundObject，请查看[这篇文章](http://msdn.microsoft.com/en-us/magazine/cc301356.aspx "MSDN 文章")。前半部分是COM，后半部分是.Net。它解释了如何代理方法。

除此之外，我什么都想不出来。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-18T09:25:53.653

扩展方法是一种方法，另一种方法是适配器模式。因此，您编写了一个类，该类将一些调用委托给要扩展的密封调用，并添加其他调用。这也意味着您可以将界面完全适应您的应用程序认为更合适的东西。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-12-10T15:25:46.603

这个方法可能上面已经提到了它的正式名称，但我不知道它的正式名称，所以在这里。此示例“扩展”了 TextBox 类（VB 中的示例）。我相信这种方法的一个优点是您不需要显式编码或公开内置成员。希望这是相关的：

VB 类模块“MyTextBox”：

```
public Base as TextBox, CustomProperty as Integer

Private Sub Init(newTextBox as TextBox)
    Set Base = newTextBox
End Sub

public Property Get CustomProperty2() As String
    CustomProperty2 = "Something special"
End Property 
```

要调用代码，您可能会说：

```
Dim MyBox as New MyTextBox
MyBox.Init MyForm.TextBox3 
```

从这里您可以访问所有内置成员，以及您的自定义成员。

```
Debug.Print MyBox.Base.Text
MyBox.CustomProperty = 44 
```

为了进一步完善，您可以将 Base 设置为类的默认属性，然后在调用 Base 类的属性时可以省略“Base”。你这样称呼 Base 成员：

```
Debug.Print MyBox().Text
MyBox().Text = "Hello World" 
```

[VBA 演示](http://www.hipload.com/download/8976/Fake_Inheritance.xlsm.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T09:25:01.097

也许使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)？

除了扩展方法，这是我能想到的唯一明智的技术。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-18T09:25:01.110

不，您不能以任何合法的方式扩展密封类。

[TypeMock](http://www.typemock.com/)允许您*模拟*密封类，但我怀疑他们会鼓励您对生产代码使用相同的技术。

如果一个类型已经被密封，这意味着类设计者没有为继承而设计它。在那时使用它进行继承很可能会给您带来*很多*痛苦，无论是现在还是以后更改实现时。

更喜欢组合而不是继承——根据我的经验，它更健壮。有关这方面的更多信息，请参见“Effective Java (2nd edition)”中的第 16 项。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-18T09:25:05.900

我知道“扩展”没有扩展方法的密封类的唯一方法是包装它。例如：

```
class SuperString
{
    private String _innerString;

    public SuperString(String innerString)
    {
        _innerString = innerString;
    }

    public int ToInt() 
    {
        return int.Parse(_innerString);
    }
} 
```

您需要公开所有与字符串类相同的方法/属性。

一些框架允许您扩展现有对象。在 WPF 中，请参阅**依赖属性**。对于 Windows 窗体，请参阅**IExtenderProvider**。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-18T09:20:04.167

扩展方法怎么样？您可以通过这种方式“添加”其他方法，而无需处理继承限制。

# oracle - 使用 Microsoft System.Data.OracleClient 进行休眠

> ID：657507
> 
> 赞同：7
> 
> 时间：2009-03-18T09:18:27.180
> 
> 标签：oracle, nhibernate

我正在尝试使用 Microsoft 的 System.Data.OracleClient 将 Nhibernate 与 Oracle 一起使用

Nhibernate 配置（对于 Microsoft 驱动程序是否正确？）

```
 <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
      <property name="show_sql">true</property>
      <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
      <property name="cache.use_second_level_cache">true</property>
      <property name="cache.provider_class">NHibernate.Caches.SysCache.SysCacheProvider, NHibernate.Caches.SysCache</property>
      <property name="cache.use_query_cache">true</property>
      <property name="dialect">NHibernate.Dialect.Oracle9Dialect</property>
      <property name="connection.driver_class">NHibernate.Driver.OracleDataClientDriver</property>
      <property name="connection.connection_string">Data Source=localhost;User Id=jbadmin;Password=justbooks12;Integrated Security=no;</property>
    </session-factory>
  </hibernate-configuration> 
```

它抛出异常，

```
The IDbCommand and IDbConnection implementation in the assembly Oracle.DataAccess could not be found. Ensure that the assembly Oracle.DataAccess is located in the application directory or in the Global Assembly Cache. If the assembly is in the GAC, use <qualifyAssembly/> element in the application configuration file to specify the full name of the assembly. 
```

我尝试将 System.Data.OracleClient.dll 复制到输出 bin 目录。它没有帮助。我还尝试将 Oracle 客户端 dll 复制到输出 bin 目录。它也没有帮助。

异常说未找到“Oracle.DataAccess”程序集。但是微软的 System.Data.OracleClient 内部没有这样的程序集。是在搜索 Oracle 的 ODP 驱动程序吗？

**编辑：**如果上述配置错误，请通过发布 System.Data.OracleClient 的配置来帮助我

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-18T09:24:23.610

您的配置中的这一行：

```
 <property name="connection.driver_class">NHibernate.Driver.OracleDataClientDriver</property> 
```

指示 NHibernate 使用 Oracle.DataAccess.dll 中的 ODP.NET 驱动程序。这允许 NHibernate 使用 ODP.NET 功能，例如连接池和跟踪。根据安装的 Oracle 客户端软件的版本，您应该可以在 C:\Oracle\product\10.1.0\Client_1\BIN\ 之类的某个位置找到此程序集的副本

如果您更愿意使用 Microsoft 的 System.Data.OracleClient 驱动程序，请将此行更改为：

```
 <property name="connection.driver_class">NHibernate.Driver.OracleClientDriver</property> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-05-21T12:40:27.377

使用 microsoft oracle 驱动程序会大大降低您的性能。

# c++ - 支持 C++0x 功能的 C++ 编译器？

> ID：657511
> 
> 赞同：9
> 
> 时间：2009-03-18T09:20:52.760
> 
> 标签：c++, c++11

是否有任何支持 C++0x 功能的 C++ 编译器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-18T09:24:31.503

GCC 支持其中的一些。见[这里](http://gcc.gnu.org/projects/cxx0x.html)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-18T09:24:07.493

2008 Visual C++ '功能包' 和 g++ 都支持一些功能。

g++ 支持的[C++0x 特性列表](http://gcc.gnu.org/projects/cxx0x.html)。

* * *

[Visual C++ 2008 Feature Pack](http://www.microsoft.com/DownLoads/details.aspx?FamilyID=d466226b-8dab-445f-a7b4-448b326c48e7&displaylang=en) ... 包括 TR1 的实现。TR1 的部分内容计划在即将到来的 C++0x 标准中采用，作为 ISO 2003 标准 C++ 库的第一个主要补充。我们的实现包括许多重要功能，例如：

*   智能指针
*   正则表达式解析
*   新容器（元组、数组、无序集等）
*   复杂的随机数生成器
*   多态函数包装器
*   类型特征
*   和更多！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-18T09:39:01.327

Microsoft 的 Visual Studio 2010 CTP（社区技术预览版）包含对[四个 C++0x 功能](http://blogs.msdn.com/vcblog/archive/2008/10/28/lambdas-auto-and-static-assert-c-0x-features-in-vc10-part-1.aspx)的支持，即 lambdas、auto、static_assert 和 rvalue 引用。

[您可以在此处](http://www.microsoft.com/downloads/details.aspx?familyid=922b4655-93d0-4476-bda4-94cf5f8d4814&displaylang=en)下载 VPC 映像，请务必阅读有关 2009 年 1 月 1 日到期日的会计信息（参考[此博客文章](http://blogs.msdn.com/briankel/archive/2008/10/27/visual-studio-2010-ctp-vpc-dealing-with-activation-messages.aspx)）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-18T09:29:08.370

*   GCC 4.4（尚未发布）将支持一些特性，如 auto。
*   GCC 4.3 有不错的 tr1 支持和一些像 Variadic 模板这样的特性。
*   最新的 Intel 编译器很好地支持了一些 C++0x 特性：它已经支持 auto 和 lambda 函数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-03-18T09:27:57.610

有编译器部分支持 C++0x，但还不能完全支持，因为最终的 C++0x 还没有标准化。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-04-26T18:25:34.023

Scott Meyers 在此处对一些常见编译器的 C++0x 支持进行了很好的详细总结：

[http://www.aristeia.com/C++0x/C++0xFeatureAvailability.htm](http://www.aristeia.com/C++0x/C++0xFeatureAvailability.htm)

# concurrency - rsync 对并发文件访问有何表现？

> ID：657524
> 
> 赞同：3
> 
> 时间：2009-03-18T09:24:42.173
> 
> 标签：concurrency, locking, rsync

我每天使用 rsync 对我的机器进行两次备份，它会在十到十五分钟内搜索我的文件以进行修改，这大大减慢了一切，开始让我紧张。

现在我想使用内核的inotify 接口（我正在运行Linux）编写一个小型后台应用程序，该应用程序收集有关已修改文件的通知并将其路径名添加到列表中，然后通过调用rsync 定期处理该列表。

现在，因为根据定义，这个过程总是适用于我刚刚 - 并且可能仍在 - 工作的文件，我想知道我是否会在备份中获得大量损坏/部分更新的文件，因为 rsync 复制文件而我正在给他们写信。

我在联机帮助页中找不到任何内容，但在谷歌搜索中仍未成功。我可以去阅读源代码，但这可能需要相当长的时间。任何人都知道如何在 rsync 中处理并发文件访问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T09:50:37.807

它根本没有被处理：rsync 打开文件，尽可能多地读取并复制它。

因此，这取决于您的应用程序如何处理此问题：他们是重写文件（而不是创建新文件）还是创建一个临时文件并在所有数据都写入后重命名（应该如此）。

在第一种情况下，您几乎无能为力：如果两个进程在没有任何同步的情况下访问相同的数据，结果将是一团糟。您可以做的是将 rsync 推迟 N 分钟，假设写入过程最终将在此之前完成。如果文件在此时间限制内再次更改，请重新安排文件。

在第二种情况下，您必须告诉 rsync 忽略临时文件（*.tmp、*~ 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T09:50:25.607

它不以任何方式处理。如果有问题，您可以使用例如 LVM 快照，并从快照中进行备份。这本身并不能保证文件将处于可用状态，但它确实保证，顾名思义，它是特定时间的快照。

请注意，这与您是让 rsync 自己处理更改检测还是使用自己的应用程序没有任何关系。您的应用程序或 rsync 本身仅生成已更改文件的列表，然后针对每个文件运行 rsync 二进制差异算法。问题是文件是否在 rsync 算法运行时更改，而不是在生成文件列表时更改。

# objective-c - Objective C中长整数的模

> ID：657536
> 
> 赞同：1
> 
> 时间：2009-03-18T09:26:40.000
> 
> 标签：objective-c, math, modulo

我正在尝试在 long long 上使用模运算符 (%)，如果数字高于 unsigned int 的范围，它似乎返回 0。是否有我应该使用的运算符或函数，或者我应该自己滚动？

--更新：抱歉之前缺少示例代码，我很着急，出门了--

这是代码：

```
long long val = 12345678991245; // always less than LLONG_MAX
int power = 0;
NSMutableArray *powers = [[NSMutableArray alloc] init];
while (pow(10, power) <= val) {
    tVal = (val % (lround(pow(10, power + 1)))) / lround(pow(10, power));
    [powers addObject:[NSNumber numberWithInt:tVal]];
    NSLog(@"Power: %d tVal: %d", power, tVal);
    val -= val % lround(pow(10, power + 1));
    power++;
} 
```

`NSLog`但是，当您查看该语句的输出时，您会在数字超过时看到这一点`UINT_MAX`（对于数字 1,111,111,111,111）：

```
2009-03-18 20:42:16.471 Numbers[11197:20b] Power: 0 tVal: 1
2009-03-18 20:42:16.472 Numbers[11197:20b] Power: 1 tVal: 1
2009-03-18 20:42:16.473 Numbers[11197:20b] Power: 2 tVal: 1
2009-03-18 20:42:16.476 Numbers[11197:20b] Power: 3 tVal: 1
2009-03-18 20:42:16.476 Numbers[11197:20b] Power: 4 tVal: 1
2009-03-18 20:42:16.477 Numbers[11197:20b] Power: 5 tVal: 1
2009-03-18 20:42:16.477 Numbers[11197:20b] Power: 6 tVal: 1
2009-03-18 20:42:16.477 Numbers[11197:20b] Power: 7 tVal: 1
2009-03-18 20:42:16.477 Numbers[11197:20b] Power: 8 tVal: 1
2009-03-18 20:42:16.478 Numbers[11197:20b] Power: 9 tVal: 0
2009-03-18 20:42:16.478 Numbers[11197:20b] Power: 10 tVal: 0
2009-03-18 20:42:16.479 Numbers[11197:20b] Power: 11 tVal: 0
2009-03-18 20:42:16.479 Numbers[11197:20b] Power: 12 tVal: 0 
```

一切都是犹太洁食，直到你起身过去`UINT_MAX`，然后它只返回 0。

我正在使用 Xcode 3.1.2 针对 iPhone SDK 进行编译。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T15:31:02.213

`lround`返回一个 long，它有 32 位。试试`llround`吧。

更好的是，不要使用浮点数来做整数数学。由于您每次通过循环将指数增加一，因此您不必每次都计算功率。只需将其存储在一个变量中，并在每次迭代时将其乘以 10。

此外，不要将数字除以越来越大的十次方，而是尝试每次将数字除以十。

当您在寻找错误时，将代码分解为更小的步骤，并检查中间操作的结果。

# java - 支柱和豆

> ID：657541
> 
> 赞同：0
> 
> 时间：2009-03-18T09:28:35.317
> 
> 标签：java, jsp, web-applications, struts, javabeans

我有两个问题：

1）我们在struts中在哪里调用bean（我们调用bean的确切行是什么以及从哪个文件中调用）以及如何调用getter和setter方法？

2）我们还将范围固定为请求或会话或其他内容，我可以理解这些值将存储在请求对象或会话对象中，但我的问题是这些值将以什么形式存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T09:46:23.323

1) 如果您谈论的是struts form beans，它们会通过struts 的ActionServlet 和您使用的各种标签自动填充。

2) 这取决于您的 struts-config.xml 配置和您的`<html:form action="/myAction">`标签：

```
<form-beans>
    <form-bean name="myForm" type="com.example.struts.form.MyForm" />
<form-beans>
<action-mappings>
    <action path="/myAction"
            type="com.example.struts.action.MyAction"
            name="myForm"
            scope="request">
        <forward name="success" path="myjsp.jsp" />
        <forward name="failure" path="named.error.tiles.definition" />
    </action>
</action-mappings> 
```

在此示例中，包含 html:form 标记的 html 表单将在您提交公式时使用请求范围可见性填充 myForm struts 表单 bean。

然后，您将在 MyAction 类中检索它：

```
public ActionForward execute(
        ActionMapping mapping,
        ActionForm form,
        HttpServletRequest request,
        HttpServletResponse response) {

        if(isCancelled(request))
            form.reset(mapping, request);

        if(form != null)
            MyForm myForm = (MyForm)form;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T09:33:16.973

2) 这些值将作为对象存储。请求和会话属性是包含键和您存储的对象的映射。

# java - 在 Velocity 中取消设置变量

> ID：657548
> 
> 赞同：15
> 
> 时间：2009-03-18T09:31:09.023
> 
> 标签：java, templates, velocity

是否可以将 Velocity 引用设置为“null”或“undefined”？

[Velocity 模板语言](http://velocity.apache.org/engine/devel/vtl-reference-guide.html)参考说

> `#set`- 建立参考格式的值：
> 
> `# [ { ] set [ } ] ( $ref = [ ", ' ]arg[ ", ' ] )`
> 
> 用法：
> 
> `$ref`- 赋值的 LHS 必须是变量引用或属性引用。
> 
> `arg`- 赋值的 RHS，如果用双引号括起来，则解析 arg，如果用单引号括起来，则不解析。*如果 RHS 计算结果为 null，则不会将其分配给 LHS。*（强调我的）

我找不到等效的`#unset`宏。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-03-18T11:01:24.953

您可以将引用设置为 false。由于非空引用被认为是真实的，因此您可以测试是否设置了引用。这在循环中很有用。

```
#foreach（$list 中的 $obj）
#set ($x = false)
#set ($x = $obj.maybeNull())
#if ($x)
...
$x
＃结尾
＃结尾

```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-03-18T09:45:51.327

继续阅读...

> 根据 Velocity 的配置方式，通常无法通过此机制从上下文中删除现有引用。（请注意，这可以通过更改 Velocity 配置属性之一来实现）

在VE默认配置有属性

```
directive.set.null.allowed = false 
```

> 如果为真，#set() 语句的右侧具有无效引用或 null 值会将左侧设置为 null。如果为假，左侧将保持不变

将其更改为`true`using `setProperty()`on `org.apache.velocity.app.Velocity`，您就可以开始使用了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-01-15T03:24:37.333

如果您尝试获取作用域变量，则可以滥用由以下方式建立的作用域`#foreach`：

```
#foreach($localVar in [ 'theValue'])

#end

## localVar will be unset (or returned to previous value) again 
```

# xml - W3 和 xmlsoap.org 模式之间有什么区别？

> ID：657551
> 
> 赞同：5
> 
> 时间：2009-03-18T09:32:48.863
> 
> 标签：xml, web-services, soap, wsdl

在 Eclipse 中创建 wsdl 文件时，它将名称空间设置为：

```
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
```

为什么它使用 schemas.xmlsoap.org 而不是相关的 w3 模式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-03-18T20:12:16.110

“schemas.xmlsoap.org”命名空间用于 SOAP 1.1。有关详细信息，请参阅[W3C 文档](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383489)。

“w3c.org”命名空间用于[SOAP 1.2](http://www.w3.org/TR/2007/REC-soap12-part0-20070427/#L1157)。根据[Wikipedia](http://en.wikipedia.org/wiki/SOAP)，SOAP 直到 1.2 版才成为 W3C 推荐。

琐事：域“xmlsoap.org”归微软所有（尝试运行 whois）。

**编辑：** 原来这个问题是[我对 SOAP 命名空间感到困惑的重复](https://stackoverflow.com/questions/403980/i-am-confused-about-soap-namespaces)

# javascript - “谷歌未定义”

> ID：657555
> 
> 赞同：0
> 
> 时间：2009-03-18T09:34:34.630
> 
> 标签：javascript, internet-explorer, google-gears

我正在使用在 FF3 和 Safari 中运行良好的 Gears；IE6/7 都在页面加载时报告“google is undefined”错误，出现在 gears_init.js 中。快速的网络搜索显示，Google 的 Javascripts 实际上在 IE7 中引起了问题。有人有解决方法的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T13:50:12.207

这可能是因为 IE6/7 没有安装齿轮。这意味着谷歌相关代码将不可用。

您可能只想执行以下操作：

```
`if ( !window.google ) {
    alert("please install google gears");
}
else {
    // gears is available
}` 
```

`尽管在现实中你想做一些比显示警告告诉用户下载齿轮更好的事情。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-08T21:01:07.063

我正在使用 IE8，我正在编写以下代码，在 Mozilla Firefox 中运行良好，但在 IE8 中无法运行

```
if (!window.google || !google.gears) {
        if (confirm("This application requires Gears to be installed. Install now?")) {
            location.href = "http://code.google.com/apis/gears/install.html"
            return;
        } else {
            addStatus('Gears is not installed', 'error');
            return;
        }
} 
```

第一个条件`!window.google`工作正常，但第二个条件`!google.gears`不适用于 IE8，说**google 未定义**

# php - 列出我电脑上的所有文件夹（php）

> ID：657562
> 
> 赞同：0
> 
> 时间：2009-03-18T09:39:43.150
> 
> 标签：php

我想在 PHP 中不使用 opendir() 浏览计算机上的所有文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T11:35:43.170

我想我设法从评论中提取了真正的问题：您真正想要的是提供多个文件的上传。

答：不，这在 PHP 中是不可能的，因为它是由服务器执行的，而不是由浏览器执行的。PHP 可以在服务器上为您提供文件夹，而不是在用户的机器上。如果你想在一个步骤中上传多个文件，你应该使用 flash、javascript 或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T09:43:17.057

你为什么不想使用实际提供的功能来做你想做的事？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T12:21:39.190

在其中一条评论中，似乎说：

> 我希望用户选择几个文件并上传，而不是有多个上传框。为什么人们不赞成这个问题？

嗯，这是因为你的问题不清楚，没有多个文件上传的上下文是不可能回答的。

答案是：你不能用 PHP 做到这一点。PHP 运行服务器端，因此它只能为您提供服务器上所有文件夹的列表；不是客户端的文件夹。

所以你需要的解决方案要么是

*   一个 Java-Applet（Facebook 使用它来上传多个文件）
*   或 Flash/Flex（Gmail 多文件上传）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T09:42:57.980

结果将是 glob() 和 stat() 的非常丑陋的组合。有什么原因你不能和 opendir() 和朋友一起工作吗？

编辑：

如果 PHP 没有合适的权限来访问您想查看的所有内容，那么使用其他函数也无济于事。

你想做什么（确切地说）？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T10:23:28.817

为什么不使用以下内容？

```
opendir(DIRECTORY_SEPARATOR); 
```

# sql - SQL Server 中的用户定义数据类型有多酷？

> ID：657568
> 
> 赞同：18
> 
> 时间：2009-03-18T09:42:11.570
> 
> 标签：sql, sql-server, user-defined-types

SQL Server 中的用户定义数据类型是中级 SQL 用户应该知道和使用的吗？

使用 UDT 的优缺点是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-18T14:08:01.150

永远不要使用它们是我的建议。如果您不得不更改定义，您将处于一个受伤的世界。也许自 SQ​​L Server 2000 以来这已经有所改善，并且更熟悉新版本的人可以告诉您现在下水是否安全，但在我确认这一点并亲自通过测试检查之前，我不会不要把它放在我的生产系统上。

查看此问题以了解详细信息： [如何在 Sql Server 2005 中更改 UDT 的基本类型？](https://stackoverflow.com/questions/349049/how-to-change-the-base-type-of-a-udt-in-sql-server-2005)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-03-18T14:21:58.027

我*不*使用基于代码的 UDT，因为我不认为额外的复杂性保证了优势。我*确实*使用 T-SQL UDT，因为几乎没有额外的复杂性，因此这些优势值得付出努力。（感谢 Marc_s 指出我的原始帖子不完整！）

**关于基于代码的 UDT**

可以这样想：如果您的项目有一个托管代码组件（您的应用程序）和一个数据库组件（SQL Server），那么在数据库中定义托管代码您能获得什么真正的优势？在我的经验中？没有任何。

部署更加困难，因为您必须将程序集添加到数据库部署并在 SQL Server 中更改这些程序集、添加文件等。您还必须在 SQL Server 中打开 CLR（没什么大不了的，但没有人向我证明这不会影响性能/内存）。最后，如果您只是将它设计到应用程序的代码中，您将拥有完全一样的东西。可能会有一些性能提升，但它确实让我印象深刻，因为它是过早优化的一个案例——特别是因为我不知道*整体*性能是否会因为 CLR 的开启和关闭而受到影响。

注意：我假设您将使用 SQL Server 的 CLR 来定义您的类型。HLGEM 谈论 SQL Server 2000，但我不熟悉 2000，并认为它在外部定义的 dll 中只有 UDF 而没有 UDT（但不要引用我的话......我真的不熟悉它！）。

**关于 T-SQL UDT**

T_SQL UDT 可以单独在 SQL 中定义（转到 SQL Server Management Studio 中的“可编程性 | 类型 | 用户定义的数据类型”）。对于标准 UDT，我*实际上*建议您掌握它们。它们非常简单，可以使您的 DDL 更加自文档化，并且可以强制执行完整性约束。例如，我定义了一个“GenderType”（char(1)，不可为空，包含“M”或“F”），以确保在 Gender 字段中只允许适当的数据。

UDT 总体上非常简单，但[本文](http://www.mssqltips.com/tip.asp?tip=1628)提供了一个很好的示例，说明如何通过定义规则来限制 UDT 中允许的数据，从而将其提升到一个新的水平。

当我最初回答这个问题时，我被固定在复杂的代码定义类型的想法上（从*手掌到额头*）。所以……谢谢马克。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-20T17:58:01.957

Alex Papadimoulis[很好地解决](http://weblogs.asp.net/alex_papadimoulis/archive/2005/10/07/426930.aspx)了用户定义类型的专业问题。缺点在这里已经很好地说明了。

我还想指出，该`sp_bindrule`功能已被弃用，正如 Alex 的帖子所指出的那样。我不确定它什么时候被弃用，但现在已经被弃用了。事实上，规则作为一个整体已被弃用。

如果我想创建一个有限制的类型，我会考虑使用用户定义的表类型，并在适当的列上使用检查约束。这也为我提供了一种构建复杂数据类型的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T06:37:31.280

我真的不推荐使用任何 sql 实现特定的功能，当您从 mssql 成长并迁移到另一个 dbms 时，它们会变得更加困难。对于我们的 dwh 数据库，我们从 mssql 开始，迁移到 oracle，并从去年毕业到 hp vertica。

# php - AMFPHP + Zend 会话

> ID：657571
> 
> 赞同：0
> 
> 时间：2009-03-18T09:43:16.683
> 
> 标签：php, zend-framework, amfphp, zend-session

我曾尝试将 ZendSession 类与 AMFPHP 一起使用，但 AMFPHP 在其某些函数和方法中使用原始 PHP 会话。我强烈需要通过 ZendSession 管理所有会话变量。有没有什么聪明的方法来获取它，而不是破解和修改原始 AMFPHP 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T10:00:04.710

我知道这不是您问题的答案，但是您是否看过[http://framework.zend.com/download/amf](http://framework.zend.com/download/amf)？

# visual-studio - VS Intellisense：你能隐藏扩展方法吗？

> ID：657573
> 
> 赞同：14
> 
> 时间：2009-03-18T09:43:26.887
> 
> 标签：visual-studio, intellisense

默认情况下，Visual Studio 会在智能感知中显示类型的所有成员及其扩展方法。

有时我想隐藏扩展方法，以便更容易找到我实际正在寻找的成员（尤其是在使用 Linq 时）。

是否有快捷方式或其他方式仅在智能感知中显示类型的成员？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T09:47:24.413

不是我知道 - 但你*可能*想做的一件事是摆脱 using 指令`System.Linq`。那时，扩展方法将无法访问，我*相信*Intellisense 不会提供它。

显然，如果您想从一个类中的一段代码中使用 LINQ，而不是在另一个中使用 LINQ，那显然是不好的——但对于根本不使用 LINQ 的类，它可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T09:51:11.627

从理论上讲，您可以使用适当的装饰器属性*来执行此操作，但是在谷歌上搜索它似乎是错误的[，](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=395913)修复可能正在等待服务包。

* [System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T09:58:49.157

也许您可以尝试使用类似 resharper 的东西，它会在您键入时过滤方法列表。我发现这可以帮助我快速找到我需要的东西。它会在不隐藏有用的扩展方法的情况下这样做

# sql-server - 从存储过程执行驻留在远程服务器中的“查看”

> ID：657577
> 
> 赞同：2
> 
> 时间：2009-03-18T09:44:19.473
> 
> 标签：sql-server

如何从存储过程中获取远程服务器视图的结果（也传递参数）？

该视图位于与存储过程所在的当前服务器不同的服务器中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-03-18T09:52:44.353

您可以在存储过程中使用 SQL Server的[链接服务器功能：](http://msdn.microsoft.com/en-us/library/aa213778.aspx)

> 链接服务器配置允许 Microsoft SQL Server 对不同服务器上的 OLE DB 数据源执行命令。链接服务器具有以下优势：
> 
> *   远程服务器访问
>     
>     
> *   能够在整个企业的异构数据源上发布分布式查询、更新、命令和事务。
>     
>     
> *   以类似方式处理不同数据源的能力。

您必须以这种方式在存储过程中编写查询，例如：

```
 SELECT * 
   FROM   MyRemoteServer.MyDB.dbo.MyView
   WHERE  MyViewColumnX = @ParameterY 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T10:08:36.390

在主 SQL Server 上创建[链接](http://msdn.microsoft.com/en-us/library/ms188279.aspx)服务器，创建到远程服务器的链接。

您在远程服务器上有一个视图这一事实很好，它为您的数据提供了一个抽象层。您可以为仅有权读取该视图的链接服务器指定登录名。您还可以在将来修改视图（例如添加“where”子句以提高性能）而无需更改前端。

我还将在您的主服务器上添加另一个视图，该视图从您的远程服务器上的视图中进行选择：-

创建视图 vwMain 作为从 RemoteServer.DB.dbo.RemoteView 中选择 col1、col2。

这样，您可以在整个代码中（在许多存储过程中）引用 vwMain，而无需不断地引用远程服务器。这样，如果您的远程服务器发生更改或您将数据移动到主服务器，只需对 vwMain 进行一次简单的更改，您的所有代码都会继续工作。

# java - 在 Java 中重新排列 ArrayList 的最佳方法

> ID：657581
> 
> 赞同：14
> 
> 时间：2009-03-18T09:45:58.067
> 
> 标签：java, list

重新排列列表中元素的最佳方法是什么？我需要移动元素的能力来移动列表中的元素，在索引中后退或前进一步。我正在考虑获取项目的索引，将其添加到索引 -1 / +2 并删除旧参考。

是否有一种更快的方法来处理重新排列，而无需在过程中在列表中创建重复项。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-03-18T10:14:09.263

**使用JDK的swap方法**

JDK 的 Collections 类包含一个专门用于此目的的方法，称为[Collections.swap](http://java.sun.com/javase/6/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29)。根据 API 文档，此方法允许您“交换指定列表中指定位置的元素”。

我建议使用此解决方案，这样您就不必从 List 中删除元素，也不必滚动自己的交换方法。此外，看起来这种方法自 Java 1.4 版本以来就已经存在，因此它应该适用于大多数现代 JDK。

# filesystems - 什么是嵌入式 NAND 驱动器的好文件系统？

> ID：657586
> 
> 赞同：11
> 
> 时间：2009-03-18T09:48:04.973
> 
> 标签：filesystems, embedded, flash-memory

我正在开发一个使用 NAND 闪存进行存储的嵌入式应用程序。现在看来，我们不会使用 Linux 或任何其他 RTOS。应用程序必须处理意外断电。

我们一直在寻找不同的文件系统解决方案，包括 YAFFS2、JFFS2、FAT+FTL 以及来自[HCC Embedded](http://www.hcc-embedded.com/en/products/file_systems/ "HCC嵌入式")的解决方案。

我听说 FAT+FTL 是一个正常的选择，但我担心在意外断电和性能的情况下会丢失数据。如果有人能分享这方面的见解和经验，将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-18T10:07:17.250

FAT-FTL 是“正常选择”，但不一定是好的选择。YAFFS2 比 JFFS2 更新，并且对于大型 NAND 来说似乎更快且更具可扩展性。[“Embedded Linux Conference Europe”的这个演示文稿](http://tree.celinuxforum.org/CelfPubWiki/ELCEurope2008Presentations?action=AttachFile&do=get&target=flash-filesystems.pdf)比较了这两个和其他闪存文件系统。

另一个解决方案是[LogFS](http://logfs.org/logfs/)（注意：这里的 log 代表 logorithmic，而不是 log-structured）。它也应该更具可扩展性，但我不知道它有多成熟。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2010-03-30T20:42:40.020

有UBIFS。我知道的唯一实现是在 Linux 内核中，它依赖于 Linux 内核的 UBI 接口。但是，基本算法应该可以在您使用的任何环境中轻松实现。至于生产准备，诺基亚在他们的 N900 智能手机中使用 UBIFS，并且基于 SheevaPlug 的插头计算机也支持它。我发现 Linux 实现是可靠的，即使在喜欢随机重置自身的片状硬件上也是如此。与 JFFS2 不同，UBIFS 不需要在启动时读取整个文件系统。

您可能需要重新考虑“不使用 Linux”的决定，因为使用 Linux 会使使用 UBIFS 变得更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T20:25:31.977

有一个名为[DataLight](http://www.datalight.com/resources/download.php?type=public&resourceid=715)的商业供应商提供了一个强大的闪存文件系统，但它当然不是免费的。

他们有一份关于表演的有趣[白皮书 (PDF) （持保留态度）。](http://www.datalight.com/)

# database - DBArtisan 性能调整

> ID：657588
> 
> 赞同：0
> 
> 时间：2009-03-18T09:48:40.120
> 
> 标签：database

DBArtisan 8.0.0 在我的机器上非常慢（win XP 2 GB RAM）。

没有启用日志记录或跟踪。然而，每次我尝试键入查询或在选项卡之间切换时，该工具都会挂起几分钟。

我可以使用任何调整来提高 DBArtisan 的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-11T05:57:38.963

我升级到 DBArtisan 8.5 并看到与以前的版本相比有显着的性能改进。

# java - Java WebServiceException：带有 JBoss 的未定义端口类型

> ID：657590
> 
> 赞同：2
> 
> 时间：2009-03-18T09:49:11.647
> 
> 标签：java, web-services, jboss

我是 JBoss 的 Web 服务新手。一个客户端使用 JAX-WS 连接到一个基于 EJB3 的 Web 服务，使用 JBoss AS 5 和 JDK 6。我遇到了以下异常：

```
Exception in thread "main" javax.xml.ws.WebServiceException:
Undefined port type: {http://webservice.samples/}HelloRemote
at com.sun.xml.internal.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:300)
at com.sun.xml.internal.ws.client.WSServiceDelegate.getPort(WSServiceDelegate.java:306)
at javax.xml.ws.Service.getPort(Service.java:161)
at samples.client.BeanWSClient.getPort(BeanWSClient.java:44)
at samples.client.BeanWSClient.main(BeanWSClient.java:35) 
```

BeanWSClient.java（客户端是与 EJB3 WS 不同的项目）：

```
package samples.client;
import java.net.MalformedURLException;
import java.net.URL;

import javax.xml.namespace.QName;
import javax.xml.ws.Service;
import samples.webservice.HelloRemote;

public class BeanWSClient {
    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        String endpointURI ="http://192.168.22.100:8080/SampleWSEJBProject/HelloWorld?wsdl";
        String helloWorld = "Hello world!";
        Object retObj = getPort(endpointURI).echo(helloWorld);
        System.out.println(retObj);
    }

    private static HelloRemote getPort(String endpointURI) throws MalformedURLException  {   
        QName serviceName = new QName("http://www.openuri.org/2004/04/HelloWorld", "HelloWorldService");   
        URL wsdlURL = new URL(endpointURI);   
        Service service = Service.create(wsdlURL, serviceName);   
        return service.getPort(HelloRemote.class);   
    } 
```

HelloRemote.java：

```
package samples.webservice;
import javax.jws.WebService; 

@WebService
//@SOAPBinding(style=SOAPBinding.Style.RPC)
public interface HelloRemote  {
    public String echo(String input);
} 
```

HelloWorld.java：

```
package samples.webservice;

import javax.ejb.Remote;   
import javax.ejb.Stateless;   
import javax.jws.WebMethod;   
import javax.jws.WebService;   
import javax.jws.soap.SOAPBinding;

/**
 * Session Bean implementation class MyBean
 */
@WebService(name = "EndpointInterface", targetNamespace = "http://www.openuri.org/2004/04/HelloWorld", serviceName = "HelloWorldService")
@SOAPBinding(style = SOAPBinding.Style.RPC)
@Remote(HelloRemote.class)
@Stateless
public class HelloWorld implements HelloRemote {
    /**
     * @see Object#Object()
     */
    @WebMethod
    public String echo(String input) {
        return input;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-09T14:50:49.277

在`HelloWorld.java`中，您应该将注释的`name = "EndpointInterface"`参数更改为`@WebService``name = "HelloRemote"`

**或者**

在`BeanWSClient.java`，在`getPort(String endpointURI)`方法中，替换

```
return service.getPort(HelloRemote.class); 
```

和

```
QName port_name = new QName("http://www.openuri.org/2004/04/HelloWorld","HelloWorldPort");
return service.getPort(port_name, HelloRemote.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T18:04:22.620

在 @WebSevice 注释中添加端点接口，如果你没有提到端点接口，则在使用 getPort 方法时给出完全限定的端口名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-03T07:26:14.433

尝试在执行 BeanWSClient 时添加：
-Djava.endorsed.dirs=${jbossHome}/lib/endorsed/
作为 vm 参数。（其中 jbossHome 当然是你的 jboss 家）。
问题是，据我所知，jboss 覆盖了 WSService 的 sun 实现，您需要设置类加载以在 sun 实现之前加载 jboss 实现。
因为 sun 的实现在 rt.jar 中，所以您需要使用认可的库。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-09T03:18:33.367

尝试使用此方法：

```
//inicia classe
public void test(){ 
    String url = "http://localhost:8080/soujava_server/HelloWorld?wsdl";
    // Create an instance of HttpClient.
    HttpClient client = new HttpClient();

    // Create a method instance.
    GetMethod method = new GetMethod(url);

    // Provide custom retry handler is necessary
    method.getParams().setParameter(HttpMethodParams.RETRY_HANDLER, new DefaultHttpMethodRetryHandler(3, false));

    try {
        // Execute the method.
        int statusCode = client.executeMethod(method);

        if (statusCode != HttpStatus.SC_OK) {
        System.err.println("Method failed: " + method.getStatusLine());
        }

        // Read the response body.
        byte[] responseBody = method.getResponseBody();

        // Deal with the response.
        // Use caution: ensure correct character encoding and is not binary data
        System.out.println(new String(responseBody));

    } catch (HttpException e) {
    System.err.println("Fatal protocol violation: " + e.getMessage());
    e.printStackTrace();
    } catch (IOException e) {
    System.err.println("Fatal transport error: " + e.getMessage());
    e.printStackTrace();
    } finally {
    // Release the connection.
    method.releaseConnection();     
    }       
} 
```

# c# - 动态生成的 PDF 文件显示给用户后立即删除

> ID：657591
> 
> 赞同：6
> 
> 时间：2009-03-18T09:49:59.897
> 
> 标签：c#, asp.net, vb.net, pdf-generation

我正在使用 ITextSharp 和 ASP.NET 1.1 即时创建 PDF 文件。我的流程如下——

*   在服务器上创建文件
*   将浏览器重定向到新创建的 PDF 文件，以便向用户显示

我想做的是在用户浏览器中显示 PDF 后立即从服务器中删除它。PDF 文件很大，因此不能将其保存在内存中，需要对服务器进行初始写入。我目前正在使用定期轮询文件然后删除它们的解决方案，但我更喜欢在文件下载到客户端计算机后立即删除文件的解决方案。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T10:01:24.003

您可以使用自己的 HttpHandler 自己提供文件，而不是将浏览器重定向到创建的文件。然后，您可以在提供文件后立即删除该文件，甚至可以在内存中创建该文件。

将 PDF 文件直接写入客户端：

```
public class MyHandler : IHttpHandler {
    public void ProcessRequest(System.Web.HttpContext context) {
        context.Response.ContentType = "application/pdf";
        // ...
        PdfWriter.getInstance(document, context.Response.OutputStream);
        // ... 
```

或读取已生成的文件“文件名”，提供文件，删除它：

```
context.Response.Buffer = false;
context.Response.BufferOutput = false;
context.Response.ContentType = "application/pdf";

Stream outstream = context.Response.OutputStream;
FileStream instream = 
    new FileStream(filename, FileMode.Open, FileAccess.Read, FileShare.Read);

byte[] buffer = new byte[BUFFER_SIZE];
int len;
while ((len = instream.Read(buffer, 0, BUFFER_SIZE)) > 0) {
    outstream.Write(buffer, 0, len);
}
outstream.Flush();
instream.Close();

// served the file -> now delete it 
File.Delete(filename); 
```

*我没有尝试这段代码。这就是我认为它会起作用的方式......*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-18T10:42:46.027

受 f3lix 回答的启发（感谢 f3lix！）我想出了以下 VB.net 代码 -

```
HttpContext.Current.Response.ClearContent()
HttpContext.Current.Response.ClearHeaders()
HttpContext.Current.Response.ContentType = "application/pdf"
HttpContext.Current.Response.TransmitFile(PDFFileName)
HttpContext.Current.Response.Flush()
HttpContext.Current.Response.Close()
File.Delete(PDFFileName) 
```

这似乎有效 - 我使用的“WriteFile”方法是否比 f3lix 使用的流方法效率低？有没有比我们的任何一种解决方案都更有效的方法？

编辑（2009 年 3 月 19 日）根据下面的评论，我已将“WriteFile”方法更改为“TransmitFile”，因为它似乎将文件以块的形式发送到客户端，而不是在发送之前将整个文件写入网络服务器的内存。更多信息可以在[这里](http://forums.asp.net/t/1275581.aspx)找到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-01-22T15:37:05.643

或者你可以直接将它返回给浏览器而不写入磁盘：

```
byte[] pdf;

using (MemoryStream ms = new MemoryStream()) {
    Document doc = new Document();
    PdfWriter.GetInstance(doc, ms);
    doc.AddTitle("Document Title");
    doc.Open();
    doc.Add(new Paragraph("My paragraph."));
    doc.Close();
    pdf = ms.GetBuffer();
}

Response.ContentType = "application/pdf";
Response.AddHeader("Content-Disposition", "attachment;filename=MyDocument.pdf");
Response.OutputStream.Write(pdf, 0, pdf.Length); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-12T21:00:33.297

解决方案：

```
Response.TransmitFile(PDFFileName)
Response.Flush()
Response.Close()
File.Delete(PDFFileName) 
```

根本不适合我（文件永远不会发送给客户）。读取字节数组并调用 Response.BinaryWrite 也不是一种选择，因为文件可能很大。这是唯一的黑客启动等待文件被释放然后删除它的异步进程吗？

# php - 如何正确创建 Zend Feed？

> ID：657600
> 
> 赞同：4
> 
> 时间：2009-03-18T09:52:45.273
> 
> 标签：php, zend-framework, rss

我已经成功创建了一个简单的 RSS 提要，但条目不断返回为未读和更新，并且每次我要求邮件更新提要时，从客户端删除的条目都会重新出现。

我究竟做错了什么？

我使用这个简单的函数来创建一个 RSS 提要：

```
public static function getFeed($db)
{
    $title = 'Latest feeds';
    $feedUri = '/rss/';

    //link from which feed is available
    $link = 'http://' . $_SERVER['HTTP_HOST'] . $feedUri;

    //create array according to structure defined in Zend_Feed documentation
    $feedArr = array('title' => $title,
                     'link'  => $link,
                     'description' => $title,
                     'language' => 'en-us',
                     'charset' => 'utf-8',
                   //'published' => 1237281011,
                     'generator' => 'Zend Framework Zend_Feed',
                     'entries' => array()
              );
    $itemObjs = array();
    $select = $db->select('id')->from('things')
                               ->order('createddate desc')
                               ->limit(10);
    $results = $db->fetchAll($select->__toString());
    $count = count($results);
    for($i=0;$i<$count;$i++) {
        $itemObjs[] = SiteUtil::getItemObjectInstance($db, $results[$i]['id']);
    }
    $count = count($itemObjs);
    for($i=0;$i<$count;$i++) {
        $obj = & $itemObjs[$i];
        $feedArr['entries'][] = array('title' => $obj->getSummary(),
                                      'link'    => 'http://' . $_SERVER['HTTP_HOST'] . $obj->getDetailUri(),
                                      'description' => $obj->description,
                                      'publishdate' => $obj->publishedDate,
                                      'guid' => 'http://' . $_SERVER['HTTP_HOST'] . $obj->getDetailUri()
                                      );
    }
    $feed = Zend_Feed::importArray($feedArr, 'rss');
    return $feed;
} 
```

控制器类中的动作是：

```
public function rssAction()
{
    $feed = FeedUtil::getFeed($this->db);
    $feed->send();
} 
```

因此，要访问提要，我将客户端指向： http: [//mysite.com/rss](http://mysite.com/rss)

我正在使用 mac mail 的 rss 客户端进行测试。提要下载得很好，显示了我在数据库中用于测试的所有 5 个项目。问题如下：

1）如果我将一个或多个项目标记为“已读”，然后告诉邮件更新提要，它会再次拉出所有项目，就好像我从来没有下载过它们一样。

2）如果我删除了一个或多个项目，它们又回来了，未读，就像我第一次订阅提要一样。

3) 提要*始终*标记为已更新。应该是这样吗？

是否与我正在设置的参数有关，我是否省略了某些内容，或者解决方案是否可以更微妙地设置 HTTP 内容标头（例如“304 未修改”）？

我对 rss 的理解是，一旦某个项目被标记为已从客户端读取或删除，它就永远不会回来，这就是我所追求的行为。

需要注意的是，'link' 和 'guid' 参数总是唯一的，我尝试使用 'published' 和 'publishdate' （都是可选的）属性只能得到相同的结果。上面的代码是我所拥有的简化版本，只显示了相关位，最后，是的，我已经阅读了[rss 规范](http://cyber.law.harvard.edu/rss/rss.html)。

提前感谢您在这里提供的任何帮助，我很乐意澄清任何一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T13:50:22.877

根据 Zend Framework Doc，您必须使用**lastUpdate**参数来设置条目的最后修改日期。

```
 'entries'     => array(
                         array(
                               [...]
                               'lastUpdate'   => 'timestamp of the publication date', // optional
                               [...] 
```

因此为提要*发布，最后**更新*为条目。

# django - 在 Django forms.ChoiceField 上设置选定的值

> ID：657607
> 
> 赞同：114
> 
> 时间：2009-03-18T09:57:02.377
> 
> 标签：django, django-models, django-forms

这是表单中的字段声明：

```
max_number = forms.ChoiceField(widget = forms.Select(), 
    choices = ([('1','1'), ('2','2'),('3','3'), ]), initial='3', required = True,) 
```

我想将初始值设置为`3`，这似乎不起作用。我玩过参数，引号/无引号等......但没有变化。

如果可能的话，谁能给我一个明确的答案？和/或我的代码片段中的必要调整？

*我正在使用 Django 1.0*

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2009-03-20T09:04:41.510

实例化表单时尝试设置初始值：

```
form = MyForm(initial={'max_number': '3'}) 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2012-07-09T18:04:22.010

这并没有触及手头的直接问题，但是这个 Q/A 用于与尝试将所选值分配给 a 相关的搜索`ChoiceField`。

如果您已经调用`super().__init__`了 Form 类，则应该更新`form.initial`字典，而不是`field.initial`属性。如果您学习`form.initial`（例如`print self.initial`，在调用 之后`super().__init__`），它将包含*所有*字段的值。在该字典中有一个值`None`将覆盖该`field.initial`值。

例如

```
class MyForm(forms.Form):
    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        # assign a (computed, I assume) default value to the choice field
        self.initial['choices_field_name'] = 'default value'
        # you should NOT do this:
        self.fields['choices_field_name'].initial = 'default value' 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2010-07-01T21:14:38.500

您还可以执行以下操作。在您的表单类定义中：

```
max_number = forms.ChoiceField(widget = forms.Select(), 
                 choices = ([('1','1'), ('2','2'),('3','3'), ]), initial='3', required = True,) 
```

然后在您的视图中调用表单时，您可以动态设置初始选择和选择列表。

```
yourFormInstance = YourFormClass()

yourFormInstance.fields['max_number'].choices = [(1,1),(2,2),(3,3)]
yourFormInstance.fields['max_number'].initial = [1] 
```

注意：初始值必须是一个列表，选择必须是 2 元组，在我上面的示例中，我有一个 2 元组列表。希望这可以帮助。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2009-12-02T15:29:45.073

我也遇到了这个问题，发现问题出在浏览器上。当您刷新浏览器时，会使用与以前相同的值重新填充表单，而忽略选中的字段。如果您查看源代码，您会看到选中的值是正确的。或者将光标放在浏览器的 URL 字段中，然后按 Enter。这将从头开始重新加载表单。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2011-02-27T09:45:02.433

汤姆和伯顿的答案最终都对我有用，但我在弄清楚如何将它们应用于[`ModelChoiceField`](http://docs.djangoproject.com/en/1.2/ref/forms/fields/#django.forms.ModelChoiceField).

唯一的技巧是选择存储为 的元组`(<model's ID>, <model's unicode repr>)`，因此如果要设置初始模型选择，则将模型的**ID**作为初始值传递，而不是对象本身或其名称或其他任何内容。然后它很简单：

```
form = EmployeeForm(initial={'manager': manager_employee_id}) 
```

或者，`initial`可以忽略该参数来代替额外的一行：

```
form.fields['manager'].initial = manager_employee_id 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-01-13T21:27:46.837

戴夫 - 找到解决浏览器问题的方法有什么运气吗？有没有办法强制刷新？

至于原来的问题，在初始化表单的时候尝试如下：

```
def __init__(self, *args, **kwargs):
  super(MyForm, self).__init__(*args, **kwargs)   
  self.base_fields['MyChoiceField'].initial = initial_value 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T12:06:46.167

可以肯定的是，我需要看看您是如何呈现表单的。初始值仅用于未绑定的表单，如果已绑定且未包含该字段的值，则不会选择任何内容。

# django - 如何使用 apache/django 重定向 http 请求

> ID：657611
> 
> 赞同：2
> 
> 时间：2009-03-18T09:58:16.897
> 
> 标签：django, apache, django-urls

我在 Django 中创建了一个简单的站点。我使用的网址是 http::/www.example.com/nl/ 和[http://www.example.com/fr/](http://www.example.com/fr/)。

我的 Django urls.py 有以下行：

(r'^(?Pnl|fr)/', 'example.views.index'),

在 example.views.index 我检查语言参数。如果它是“nl”，我会显示一个模板。如果它是“fr”，我会显示一个不同的模板。

这很好用。现在客户制作了两个不同的网址：

[http://www.dutch.com/](http://www.dutch.com/)和[http://www.french.com/](http://www.french.com/)

最后我会问这个问题：

有没有办法让我在不更改我的 django 代码的情况下使用新的 url？我假设我可以告诉 apache在用户访问[http://www.dutch.com/时显示](http://www.dutch.com/)[http://www.example.com/nl/](http://www.example.com/nl/)页面。但是我该怎么做呢？django 还能从 url 中获取“语言”参数吗？

提前感谢您的任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T10:52:53.600

如果您可以在[http://www.dutch.com](http://www.dutch.com)上使用 .htaccess 文件，您可以像这样使用 apache 的重定向指令

```
redirectMatch 301 ^(.*)$ http://www.example.com/nl/ 
```

这会将发送到 dutch.com 的**所有请求重定向到 example.com/nl**

你也可以使用

```
redirect 301 /index.html http://www.example.com/nl/ 
```

这只会将 dutch.com 上的“index.html”重定向到 example.com/nl/（请注意，第一个参数是路径，不能是 URL - 没有[http://www](http://www)）

# algorithm - 解析具有未定义数量参数的表达式

> ID：657614
> 
> 赞同：2
> 
> 时间：2009-03-18T09:59:06.630
> 
> 标签：algorithm, parsing, nlp, rpn

我正在尝试将自制语言中的字符串解析为一种树，例如：

```
# a * b1 b2 -> c * d1 d2 -> e # f1 f2 * g 
```

应该导致：

```
# a
  * b1 b2
    -> c
  * d1 d2
    -> e
# f1 f2
  * g 
```

#、* 和 -> 是符号。a、b1 等是文本。

从那一刻起，我只知道评估表达式的 rpn 方法，我目前的解决方案如下。如果我在每个符号之后只允许一个文本标记，我可以很容易地将表达式首先转换为 RPN 表示法（b = b1 b2；d = d1 d2；f = f1 f2）并从这里解析它：

abc -> * de -> * # fg * #

然而，合并文本标记和其他任何东西似乎是有问题的。我的想法是创建标记令牌（M），所以 RPN 看起来像：

a M b2 b1 M c -> * M d2 d1 M e -> * # f2 f1 M g * #

这也是可解析的，似乎可以解决问题。

那说：

1.  有没有人有类似的经验并且可以说它是或不是未来可行的解决方案？
2.  是否有更好的方法来解析具有未定义的运算符数量的表达式？
3.  你能指点我一些好的资源吗？

笔记。是的，我知道这个例子非常类似于 Lisp 前缀表示法，也许要走的路是添加一些括号，但我在这里没有任何经验。但是，源文本不得包含任何人工括号，而且我不确定如何处理潜在的中缀混合，如 # a * b -> [if value1 = value2] c -> d。

谢谢你的帮助。

编辑：似乎我正在寻找的是带有可变数量参数的后缀表示法的来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T11:12:25.957

~~我无法完全理解您的问题，但您似乎想要的是语法定义和解析器生成器。我建议您看一下[ANTLR](http://www.antlr.org/)，它应该非常简单，可以为您的原始语法或 RPN 定义语法。~~

**编辑：（**在进行自我批评并努力理解问题细节之后。）实际上，您的示例中的语言语法并不清楚。但是，在我看来，前缀/后缀表示法的优点（即您既不需要括号也不需要优先级感知解析器）源于您每次遇到运算符时都*知道参数的数量*，因此您确切知道要读取多少个元素（对于前缀表示法）或从堆栈中弹出多少个元素（对于后缀表示法）。OTOH，我相信拥有可以具有可变数量参数的运算符使得前缀/后缀符号不仅难以解析，而且完全模棱两可。以下面的表达式为例：

```
# a * b c d 
```

以下哪三个是规范形式？

1.  # （A B C D））

2.  # （A B C D）

3.  # （A B C D）

如果不了解更多关于运营商的信息，则无法分辨。当然，您可以定义某种贪婪的运算符，例如 * 比 # 更贪婪，因此它会吞噬所有参数。但这会超出前缀符号的目的，因为您根本无法写下上述三个变体中的第二个变体；并非没有额外的句法元素。

现在我想起来了，我所知道的编程语言都不支持具有可变数量参数的*运算符，只有**functions/procedures* ，这可能不是绝对的机会。

# vb.net - 包含表单的 .NET 类库中的 SetCompatibleTextRenderingDefault

> ID：657615
> 
> 赞同：4
> 
> 时间：2009-03-18T09:59:52.777
> 
> 标签：vb.net, class, vb6

我有一个 .net 类库，其中包含一个调用表单的 com 类。我想`SetCompatibleTextRenderingDefault(false)`确保表单字体看起来不错。

如果我在类构造函数中运行命令，则会收到以下错误： `SetCompatibleTextRenderingDefault must be called before the first IWin32Window object is created in the application.`

我可以/应该在哪里运行它？肯定没有比子New更早的地方了！

预先感谢

乔恩

Edit1：为了澄清，我在从.net 测试工具启动类时收到此错误，如果我从 VB6 应用程序调用它，那么我只会收到“自动化错误”

`SetCompatibleTextRenderingDefault`Edit2：从 vb6 应用程序调用时，我不能在 com 类中使用答案吗？也许它是需要调用此方法的“父”应用程序，因此 vb6 应用程序不能？

***Edit3：也许我以错误的方式问这个问题！- 也许问题是：如何使字体在从 vb6 应用程序调用的 .net 类库表单中看起来不错？***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-29T15:21:06.290

一种可能的解决方法是在表单构造函数中的所有按钮和标签上手动设置属性：

```
public Form1()
{
    InitializeComponent();
    DisableCompatibleTextRendering(this);
}

private static void DisableCompatibleTextRendering(Control c)
{
    var button = (c as ButtonBase);
    var label = (c as Label);

    if (button != null)
    {
        button.UseCompatibleTextRendering = false;
    }

    if (label != null)
    {
        label.UseCompatibleTextRendering = false;
    }

    foreach (var child in c.Controls.Cast<Control>())
    {
        DisableCompatibleTextRendering(child);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T10:44:26.567

在创建第一个窗口之前将其放在应用程序启动代码中。在 C# 下，这将是创建初始窗口的*主程序。*

# java - 如何从用户那里获取链接并将它们正确显示在我的页面中？

> ID：657617
> 
> 赞同：0
> 
> 时间：2009-03-18T10:00:51.057
> 
> 标签：java

我正在开发一个 Java 项目，在该项目中，我将从 a 中的用户那里获取文本，`textArea`并使用该文本生成一个 HTML 页面。

我想允许用户在生成的 HTML 页面中添加链接。当我从用户那里获取页面内容时，我还需要从用户那里获取链接名称和 URL。

如何提供此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T10:04:52.543

这个有点模糊...

你不会说你是否也知道在文本中需要生成链接的位置。如果你不这样做，你的问题就无法解决。

如果你这样做了，那么我猜你只需要添加一些逻辑来测试输出流中的当前位置是否以某种方式对应于应该有链接的位置之一，并生成链接。

HTML 链接的语法可以在任何地方找到，我假设您已经知道它，但为了完整起见，它看起来像这样：

```
<a href="http://www.example.com/">link to example.com</a> 
```

将引号内的部分替换为引用，将 > 和 < 之间的文本替换为链接名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T10:09:04.330

您需要一个数据库来存储链接。除非你只想展示一次。

```
String links = request.getParameter("textArea_name");
// then save it on your prefered database 
```

为了显示它，您可以从数据库中加载它并输出它们。

# certificate - 私钥在哪里？

> ID：657622
> 
> 赞同：1
> 
> 时间：2009-03-18T10:01:34.127
> 
> 标签：certificate, key, private, pki

`makecert`关于命令的两个简单问题，

假设我正在使用以下命令：

```
makecert -n "CN=PowerShell Local Certificate Root" -a sha1 -eku 1.3.6.1.5.5.7.3.3 -r -sv root.pvk root.cer -ss Root -sr localMachine 
```

*私钥会自动在证书管理器中的某处注册，还是只会在文件 root.pvk 中？*

假设我正在使用以下命令：

```
makecert -r -pe -n "CN=XYZ Company" -ss my 
```

*执行此命令后，私钥存储在哪里（由于我没有指定`-pe`选项，所以私钥没有嵌入证书中，而是在哪里）？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T12:15:45.693

即使没有 -pe（启用私钥导出），私钥仍应存储在您指定的证书存储中。在您的示例中，该存储是 LocalMachine 物理存储和 TrustedRoot 逻辑存储。您可以通过打开 mmc (start->run->mmc) 并添加证书管理单元并选择“计算机帐户”作为存储来进行检查。

一个更简单的测试是：

```
makecert -sk myKey -n "CN=test" -ss my -pe 
```

然后开始->运行->certmgr.msc（打开本地用户存储的证书管理器）并检查个人证书存储。在那里，您应该有一个名为 test 的证书，并附有私钥。

然后，您可以右键单击证书并将其导出到 .pfx 文件，以获取嵌入了证书和私钥的单个文件。

编辑： -pe 选项代表可导出的私钥。如果使用 -pe，您将可以选择使用私钥从 certmgr 导出密钥。如果您不使用 -pe，那么您将无法选择导出私钥（我在下面的评论应该说“不使用 -pe”而不是“使用 -pe”）。

# .net - Oracle SQLPLUS 是否有 .Net 接口？

> ID：657623
> 
> 赞同：7
> 
> 时间：2009-03-18T10:03:25.543
> 
> 标签：.net, oracle, automation, sqlplus

我正在开发一些自动化来控制 SQL 脚本的执行。这些脚本通过**SQL*PLUS**运行，并在其中包含**PL/SQL**调用（因此我无法通过**ODP.NET**运行它们）。

**我想知道SQL*PLUS**是否有**.NET**接口？如果有，有人用过吗？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T17:46:54.267

我花了一段时间才弄清楚如何让它全部工作，所以这是我的调查结果：

c#代码：

```
ORAUtils.execString(@"c:\tmp.sql 'Oracle sucks!'");
...

using System.Diagnostics; -- where the Process stuff lives
...
public static int execString(string scriptFileName)
{
 ...
 ProcessStartInfo processInfo = new ProcessStartInfo();
 processInfo.FileName = "sqlplus.exe";
 processInfo.Arguments = "user/pwd@db @" + scriptFileName;
 ...
 Process process = Process.Start(processInfo); // typo in code above small p instead of caps helps
 ... 
```

结果命令行：

sqlplus.exe user/pwd@db @c:\tmp.sql 'Oracle 糟透了！

输入 sqlplus /? 在 dos 提示符下，您将获得以下语法：

sqlplus

这里 login=user/pwd@db 和 start=@c:\tmp.sql 'Oracle 糟透了！

它将启动 sql 文件并将参数字符串传递给它。

tmp.sql 第一行：

提示 &1

将显示参数字符串。

谢谢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T11:02:06.213

您可以使用以下代码在 C# 中执行此操作：

```
public int execString(string scriptFileName)
{
   int exitCode;
   ProcessStartInfo processInfo;
   Process process;
   int timeout = 5000;

   processInfo = new ProcessStartInfo("sqlplus.exe", "@" + scriptFileName);
   processInfo.CreateNoWindow = true;
   processInfo.UseShellExecute = false;
   process = process.Start(ProcessInfo);
   process.WaitForExit(timeout);
   exitCode = process.ExitCode;
   process.Close();

   return exitCode;
} 
```

在 VB.NET 中，您可以使用框架中的相同 API 完成完全相同的事情，但我对 VB.NET 语法知之甚少。

您还可以尝试检查 SQL/Plus DLL，看看是否可以从中获得一些东西。但我认为，即使它应该是一种更快（性能方面）的方法，它也会比使用我建议的方法复杂得多。

# java-me - J2ME 中的拆分字符串逻辑

> ID：657627
> 
> 赞同：9
> 
> 时间：2009-03-18T10:04:17.990
> 
> 标签：java-me

我正在开发一个 J2ME 应用程序。

我想在`"<br>"`& 逗号处拆分以下字符串：

```
3,toothpaste,2<br>4,toothbrush,3 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-03-18T10:35:34.530

```
 private String[] split(String original,String separator) {
    Vector nodes = new Vector();
    // Parse nodes into vector
    int index = original.indexOf(separator);
    while(index >= 0) {
        nodes.addElement( original.substring(0, index) );
        original = original.substring(index+separator.length());
        index = original.indexOf(separator);
    }
    // Get the last node
    nodes.addElement( original );

     // Create split string array
    String[] result = new String[ nodes.size() ];
    if( nodes.size() > 0 ) {
        for(int loop = 0; loop < nodes.size(); loop++)
        {
            result[loop] = (String)nodes.elementAt(loop);
            System.out.println(result[loop]);
        }

    }
   return result;
} 
```

上面的方法可以让你分割一个关于传递的分隔符的字符串，很像 J2EE 的 String.split()。所以首先在换行标记上拆分字符串，然后在返回数组的每个偏移处对“，”逗号进行拆分。例如

```
 String[] lines = this.split(myString,"<br>");
 for(int i = 0; i < lines.length; i++) 
 {
      String[] splitStr = this.split(lines[i],",");
      System.out.println(splitStr[0] + " " + splitStr[1] + " " + splitStr[2]);     
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-09-24T07:45:34.863

```
private String[] split(String original, String separator, int count)
{
    String[] result;
    int index = original.indexOf(separator);
    if(index >= 0)
        result = split(original.substring(index + separator.length()), separator, count + 1);
    else
    {
        result = new String[count + 1];
        index = original.length();
    }
    result[count] = original.substring(0, index);
    return result;
}

String[] lines = this.split(myString,"<br>",0); 
```

# ruby-on-rails - Rails：使用表单（集合选择）调用 show-action

> ID：657629
> 
> 赞同：0
> 
> 时间：2009-03-18T10:05:21.157
> 
> 标签：ruby-on-rails, actionview

给出了一个名为“book”的模型，其属性为“name”和“id”。我如何使用这个集合选择来调用某本书的显示动作？下面提到的一个代码返回以下错误消息：

**找不到 ID=book_id 的书**

```
<% form_tag(book_path(:book_id)), :method => :get  do %>
  <p>
  <%= label(:book, :id, 'Show Book:') %>
    <%= @books = Books.find(:all, :order => :name)
      collection_select(:book, :id, @books, :id, :name) 
  %> 
  </p>
  <p>
  <%= submit_tag 'Go' %>
  </p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T10:40:30.197

`book_path`仅生成一次，用于表单标签本身。每当您的选择更改时，它都不会更新。

当您提交该表单时，它将请求以下 URL：

```
/books/book_id?book[id]=5 
```

由于您`book_path`认为 book_id 是您想要的 ID 号，因此它会尝试查找它。您可以通过更改控制器中的代码来做您想做的事情：

```
@book = Book.find(params[:id]) 
```

到：

```
@book = Book.find(params[:book][:id]) 
```

但它闻起来有点难闻，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T17:16:17.033

您可以创建不基于 id 的新路由，例如

```
get 'books/show'    # put this above your "resources :books" 
```

并将您的表格更改为

```
<% form_tag books_show_path, :method => :get %> 
```

# windows-vista - 在 Windows Vista 上安装 cc.net

> ID：657631
> 
> 赞同：0
> 
> 时间：2009-03-18T10:06:09.390
> 
> 标签：windows-vista, cruisecontrol.net

尝试在 windows vista 上配置 cc.net 但不断出错。现在收到以下错误

HTTP 错误 404.3 - 未找到 由于扩展配置，无法提供您请求的页面。如果页面是脚本，则添加处理程序。如果应该下载文件，请添加 MIME 映射。

谁能告诉我要添加哪种 MIME 类型以使其正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T11:03:10.393

首先通过命令行进入C:\Windows\Microsoft.NET\Framework\v2.0.50727，运行aspnet_regiis.exe /i。接下来检查站点的 IIS 下的 ISAPI 和 CGI​​ 注册，并确保 ASP.NET 2.0.x 在那里并且已启用。我已经看到列出了 ASP.NET 2.0.x，即使它没有正确安装，而且我还看到 ASP.NET 2.0.x Web 服务器扩展被禁用，两者都会导致与您遇到的类似的问题.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-23T17:19:48.543

如果你还没有得到这个（我看到这是一个旧帖子）首先按照 wegrata 的推荐执行 aspnet_regiis.exe /i，然后

```
%systemroot%\system32\inetsrv\APPCMD.EXE migrate config "Default Web Site/ccnet" 
```

此外，除了执行 aspnet_regiis 位，您*应该*能够通过从添加/删除 Windows 组件打开 ASP.NET 来完成相同的操作。这就是我在 Win 7 上必须做的事情

# c# - IShell shell = new... 和 Shell shell = new 之间有什么区别

> ID：657634
> 
> 赞同：1
> 
> 时间：2009-03-18T10:07:28.297
> 
> 标签：c#, interface

我正在研究复合应用程序指南，并且经常遇到类型接口对象的实例化，例如：

```
IShell shell = new Shell(); 
```

而不是类型类：

```
Shell shell = new Shell(); 
```

*   这两者有什么区别？
*   为什么要使用第一种方式（因为第二个 shell 对象可以在任何指定 IShell 接口的地方使用，对吧？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T10:14:16.093

如果该类具有接口方法的显式实现，您可能希望这样做。考虑这个例子：

```
public interface ISomething { void Action(); }
public interface ISomethingElse {void Action(); }
public class Something : ISomething
{
    public void Action()
    {
    }
    void ISomething.Action()
    {
    }
}
public class Something2 : ISomething, ISomethingElse
{
    void ISomething.Action()
    {
    }
    void ISomethingElse.Action()
    {
    }
} 
```

如果您希望 ISomething.Action 在某事上被调用，那么您必须通过 ISomething 变量调用它。即使在Something2中，如果您不通过界面进行操作，Action方法也会被隐藏。

也就是说，您通常希望避免使用这样的实现。我怀疑框架类会强迫您这样做，但这将是使用接口声明它的场景。

**更新 1：**为了澄清一点，一些关于如何使用方法的额外代码：

```
Something some = new Something();
some.Action(); //calls the regular Action
ISomething isome = some;
isome.Action(); //calls the ISomething.Action
((ISomething)some).Action(); //again, calls ISomething.Action

Something2 some2 = new Something2();
some2.Action();//compile error
((ISomething)some2).Action(); //calls ISomething.Action
((IsomethingElse)some2).Action(); // calls ISomethingElse.Action 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T10:13:17.267

明显的区别是第一个允许您仅将 shell 用作 IShell，第二个允许您使用 Shell 的所有功能，其中恰好也包括 IShell 的功能。

也许你可以把观点从维护者那里拿走。

首先是说我们需要一个支持 IShell 的实例，如果我们愿意，我们可以将其更改为其他对象。

第二个是说我们必须专门为它提供的某些功能提供一个 Shell 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T10:32:48.517

对于第一个示例，您只能在源代码中使用 IShell 中指定的功能，对于第二个示例，您还可以使用接口中未定义的 Shell 对象的附加功能。

如果您需要将 Shell 对象替换为具有相同功能但实现不同的不同对象 ShellEx，则第一个解决方案提供了更大的灵活性。为此，您只需要更改

```
IShell shell = new Shell(); 
```

到

```
IShell shell = new ShellEx(); 
```

您的其余代码不需要更改。

第二种解决方案使您能够使用 Shell 对象的完整功能。

您必须逐案决定，在当前情况下哪种解决方案更可取。

# c# - 在富文本框中显示行号c#

> ID：657635
> 
> 赞同：11
> 
> 时间：2009-03-18T10:07:32.507
> 
> 标签：c#, textbox, multiline, line-numbers

我有一个多行 Richtextbox 控件，我想将添加行号的功能集成到该控件中。我考虑了很多方法

1.  添加标签并随着行数的变化更新行号
2.  添加一个图片框并在其上绘制字符串。
3.  添加另一个文本框并在其上显示行号
4.  添加列表框并在其中显示行号。

我有两个疑问。

1.  我正在使用的 Richtextbox 是一个定制的控件，它来自 RichTextBox 类。我怎样才能向它添加多个控件。
2.  在 c# 中显示多行文本的行号的最佳方法是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-08-25T16:50:28.747

我自己的例子。一切都很好，但必须禁用自动换行 :(

```
 int maxLC = 1; //maxLineCount - should be public
    private void rTB_KeyUp(object sender, KeyEventArgs e)
    {
        int linecount = rTB.GetLineFromCharIndex( rTB.TextLength ) + 1;
        if (linecount != maxLC)
        {
            tB_line.Clear();
            for (int i = 1; i < linecount+1; i++)
            {
                tB_line.AppendText(Convert.ToString(i) + "\n");
            }
            maxLC = linecount;
        }
    } 
```

其中 rTB 是我的富文本框，而 tB 是 rTB 旁边的文本框

小JT

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-08-25T20:42:33.157

这段代码帮助了我，谢谢你，需要转换 Visual Basic，但可以：

```
Private Sub TextBox1_KeyUp(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles TextBox1.KeyUp
    Dim maxlc As Integer = 1
    Dim linecount As Integer = TextBox1.GetLineFromCharIndex(TextBox1.Height) + 1

    If linecount <> maxlc Then
        TextBox2.Clear()
        For i = 0 To linecount - 1 Step 1
            TextBox2.AppendText(Convert.ToString(i) + vbNewLine)
        Next i
        maxlc = linecount
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-27T10:12:20.247

```
 public int getWidth()
    {
        int w = 25;
        // get total lines of richTextBox1
        int line = richTextBox1.Lines.Length;

        if (line <= 99)
        {
            w = 20 + (int)richTextBox1.Font.Size;
        }
        else if (line <= 999)
        {
            w = 30 + (int)richTextBox1.Font.Size;
        }
        else
        {
            w = 50 + (int)richTextBox1.Font.Size;
        }

        return w;
    }

    public void AddLineNumbers()
    {
        // create & set Point pt to (0,0)
        Point pt = new Point(0, 0);
        // get First Index & First Line from richTextBox1
        int First_Index = richTextBox1.GetCharIndexFromPosition(pt);
        int First_Line = richTextBox1.GetLineFromCharIndex(First_Index);
        // set X & Y coordinates of Point pt to ClientRectangle Width & Height respectively
        pt.X = ClientRectangle.Width;
        pt.Y = ClientRectangle.Height;
        // get Last Index & Last Line from richTextBox1
        int Last_Index = richTextBox1.GetCharIndexFromPosition(pt);
        int Last_Line = richTextBox1.GetLineFromCharIndex(Last_Index);
        // set Center alignment to LineNumberTextBox
        LineNumberTextBox.SelectionAlignment = HorizontalAlignment.Center;
        // set LineNumberTextBox text to null & width to getWidth() function value
        LineNumberTextBox.Text = "";
        LineNumberTextBox.Width = getWidth();
        // now add each line number to LineNumberTextBox upto last line
        for (int i = First_Line; i <= Last_Line + 2; i++)
        {
            LineNumberTextBox.Text += i + 1 + "\n";
        }
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        LineNumberTextBox.Font = richTextBox1.Font;
        richTextBox1.Select();
        AddLineNumbers();
    }

    private void richTextBox1_SelectionChanged(object sender, EventArgs e)
    {
        Point pt = richTextBox1.GetPositionFromCharIndex(richTextBox1.SelectionStart);
        if (pt.X == 1)
        {
            AddLineNumbers();
        }
    }

    private void richTextBox1_VScroll(object sender, EventArgs e)
    {
        LineNumberTextBox.Text = "";
        AddLineNumbers();
        LineNumberTextBox.Invalidate();
    }

    private void richTextBox1_TextChanged(object sender, EventArgs e)
    {
        if (richTextBox1.Text == "")
        {
            AddLineNumbers();
        }
    }

    private void richTextBox1_FontChanged(object sender, EventArgs e)
    {
        LineNumberTextBox.Font = richTextBox1.Font;
        richTextBox1.Select();
        AddLineNumbers();
    }

    private void LineNumberTextBox_MouseDown(object sender, MouseEventArgs e)
    {
        richTextBox1.Select();
        LineNumberTextBox.DeselectAll();
    }

    private void Form1_Resize(object sender, EventArgs e)
    {
        AddLineNumbers();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-15T15:00:07.730

100% 有效！！！但是您需要为行号添加richTextBox2，如果您想将其更改为列表框等其他形式，无论如何它对我很有帮助。

```
 private void richTextBox1_keyDown(object sender, KeyEventArgs e)
    {

        for (int i = 0; i <= richTextBox1.Lines.Count(); i++)
        {
            if (!(e.KeyCode == Keys.Back))
            {
                if (!richTextBox2.Text.Contains(i.ToString()))
                {
                    richTextBox2.Text += i.ToString() + "\n";
                }
            }
            else
            {
                richTextBox2.Clear();
            }
        }    
    } 
```

# communication - 您是否发现公司流行语或繁重的行话阻碍了软件项目的沟通？

> ID：657636
> 
> 赞同：3
> 
> 时间：2009-03-18T10:07:51.943
> 
> 标签：communication, terminology

您是否发现企业流行语或繁重的管理术语阻碍了软件项目的沟通？例如使用诸如

*   主流化
*   整体的
*   可竞争性
*   协同效应
*   等等

您是否愿意看到行业内的一项举措来停止使用此类行话，以帮助人们更好地沟通并以简单的英语进行项目沟通？这甚至是一个问题吗？你有什么想法/轶事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T10:25:24.617

我实际上喜欢流行语，**当它们被适度使用时。**

它们成为流行语有一个实际的原因：即使这些概念可能非常复杂和/或抽象，但在含义上存在共识。因此，只需一个词，您就可以向一大群人传达大量信息。我认为它是一种信息封装形式。（注意使用稍微过时的流行语*封装*？）

当然，这正是许多人开始滥用它们的原因：它们只传达一般概念（即为什么做 FizzBu​​zz 很棒），而避免讨论混乱的细节（即为什么它不起作用）。由于使用流行语给人的印象是你对手头的主题非常熟悉，它可以用来在讨论中让其他人保持沉默。

**结论**：流行语是可以的 - 如果以正确的方式使用它们。如果您想改善团队沟通，请培训他们正确使用流行语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T10:11:42.280

我认为某种行业范围的举措是不切实际的，因为行话在旁观者的眼中。

我认为你所能做的就是确保你自己不使用流行语，即使在与使用流行语的人交流时也是如此。例如，在与将您和您的同事称为“资源”的项目经理交谈时使用“人员”一词。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-20T12:04:27.507

技术语言的使用既可以帮助也可以阻碍项目团队的进展，这取决于适当性。

首先有必要指出，什么被认为“技术性太强”[完全取决于视角](https://stackoverflow.com/questions/590254/why-programming-is-called-technical-and-lets-say-banking-isnt-closed)。“[主流](http://en.wikipedia.org/wiki/Mainstreaming)化”与 SSD、CORBA 和 SOAP 一样，是一个技术术语。对一个人来说听起来像是行话胡说八道的东西实际上是为另一个人传达复杂概念的捷径。

软件开发通常是跨领域活动，除了软件知识之外还涉及一个或多个技术用户领域。假设销售、市场营销、管理和银行业务（仅举几个经常被错误地认为“非技术”的领域）没有发展和推进他们自己复杂的知识体系，换句话说——技术是一个大错误：销售技术、营销技术、管理技术和银行技术。

促进不同技术领域代表之间的有效沟通是项目经理的责任。一些建议：

*   方便地制作一个可供所有相关人员访问和更新的项目字典。

*   确保用于跨域文档（即功能规范）的公分母语言。

*   仅在必要时引入特定领域的术语，但始终提供含义的简要解释（不要“从头开始构建”——通过尽可能链接来利用在线百科全书的财富）。

*   确保项目团队对关键术语达成共识。

*   请记住，什么被认为是“技术性的”完全取决于视角，您需要促进全方位的沟通，而不仅仅是单向的（通常是从软件开发人员到业务用户）。

*   最后，软件必须在用户领域工作，你必须判断 UI 将在多大程度上依赖特定的领域语言（这将是易于学习和使用之间的权衡 -效率）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-07-20T19:01:43.670

技术术语（ORM、TDD 等）使说话*更*准确。另一方面，企业流行语（又称管理术语）旨在在无法获得完整信息时表达模糊的想法。

因此，管理术语很好地发挥了它的作用，因为它确实允许管理人员有效地就他们理解非常有限的事物进行沟通。也就是说，优秀的经理知道什么时候不使用行话，例如在与开发人员或高管交谈时，他们都讨厌废话。

综上所述，（反）流行语运动更应该提高对管理术语正确使用和应用的认识，并鼓励仅用适当的听觉进行适当的信息封装。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-07-20T22:27:31.100

个人觉得行话应该多用。我看到这种情况越来越多，IT 人员想简单地隐藏在世界的技术元素后面，表现得好像说更怪异完全是业务人员的责任。

老实说，说更多的***GEEK***不是业务人员可以做的事情，您不应该希望这种情况发生。学习行话。与行话合一。掌握行话。那么下次你讨论事情的时候，你就不会回来踩踏板了。

掌握业务条款并将其应用于事物的技术方面......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T10:11:24.167

“整体”或“协同”有什么问题？这些是普通的普通英语单词。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T10:28:46.247

每个领域都有自己的行话，这必须告诉我们一些事情——人们喜欢使用特殊的单词、短语或为仅在他们自己的领域内相关的现有单词赋予特殊含义。我怀疑如果我们回到金字塔，会有一整套普通埃及人无法理解的建筑和建筑用语。所以禁止行话是行不通的，创建一个常见问题解答和词汇表通常可以解决问题。

顺便说一句，这必须是锅和水壶的情况。IT 之外的任何人是否会认为这样的短语 - “......我们将使用 ORM，然后 WCF 将通过 HTTPS 进行对话，在客户端上添加一些 AJAX 和一些聪明的 CSS，我们在笑......”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-18T10:30:12.483

绝对地。由于管理人员只是笼统地说，我们作为开发人员想了解确切的含义。我个人在阅读充满流行语的抽象作品时睡着了。

最糟糕的是 SOA。尽管都广泛使用它，但学术人员和管理人员都不理解它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-07-20T18:24:25.850

我受不了流行语。一个人的“封装”是另一个人对语言的奥威尔式破坏。流行语吸引了喜欢“套牌”而不是备忘录的人。对于作为许多可能事物的表示的东西[例如，“利用资源”可以意味着从使用双面打印选项到为军队起草人员的任何事情]，必然会稀释意义。如果我公司的一位高级律师要我“利用资源，然后把它推到旗杆上，让鸭子排队”，我知道他在午餐时把约翰尼沃克扔回去了。

相反，如果我用上面那些空洞的流行语来回应高级合伙人的备忘录请求，我会因为白痴而被当场解雇——这是正确的。太糟糕了，其他白领世界不是这样的。

脾气暴躁的老式 X'r

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-07-20T22:16:06.677

只要所有利益相关者（看看我在那里做了什么？）都清楚每个单词/短语的共同含义，我就可以接受流行语。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-07-20T22:26:29.183

总的来说，我认为流行语在用于封装想法和概念时很好。它简化了理解单词的人之间的交流。然而，当人们使用流行词时，我会划清界限，而一个完全正常的词就可以了。我知道有人会说他们在打电话时会说他们是“在音频上”，或者说“对话”而不是说话。这让我想打他们。难的！

# oracle - 从 oracle db 截断表时出错

> ID：657639
> 
> 赞同：3
> 
> 时间：2009-03-18T10:08:43.660
> 
> 标签：oracle, storage, truncate

我在清除数据库中所有表中的所有数据的过程中正在执行类似的操作。

```
LOOP
    dbms_utility.exec_ddl_statement('alter table ' || c.owner || '.' || c.table_name || ' disable constraint ' || c.constraint_name);
  END LOOP;
 .
 .
 .

LOOP
    EXECUTE IMMEDIATE 'TRUNCATE TABLE ' || t.table_name ;
  END LOOP; 
```

现在，这会引发以下错误：

```
ORA-03291: Invalid truncate option - missing STORAGE keyword
ORA-06512: at "MYSCHEMA.CLEAR_DATA", line 15
ORA-06512: at line 2
Process exited.
Disconnecting from the database MYDB. 
```

1.  为什么存储关键字是强制性的？我以为`DROP STORAGE`是默认的。
2.  即使指定存储关闭，如，

    立即执行“截断表”|| t.table_name || '丢弃存储';

    没有帮助。错误是一样的。

3.  我认为这可能与某些表上的外部约束有关。因此，脚本前面的“禁用约束”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T12:17:19.340

我建议您在字符串变量中构建您正在执行的命令，使用 dbms_output 输出它，然后执行它。这样，您将准确地看到它正在尝试执行的生成错误的内容。

可能导致此错误的一件事是，如果您的表名中带有空格（是的，有可能）。如果是这种情况，解决方案是将表名用双引号引起来。

```
dev> create table "dave exp" (x number);

Table created.

dev> truncate table dave exp;
truncate table dave exp
                    *
ERROR at line 1:
ORA-03291: Invalid truncate option - missing STORAGE keyword

dev> truncate table "dave exp";

Table truncated. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T23:13:30.620

改变你的程序：

1.  在执行之前将您的 truncate 命令放入 PL/SQL 变量中
2.  添加一个异常处理程序，当您遇到异常时，该处理程序通过 dbms_output 或 utl_file 输出截断语句（在每个语句之后进行 fflush）：

> ```
> LOOP 
>   BEGIN
>       ...
>     v_sql := 'TRUNCATE TABLE ' || t.table_name ;
>     EXECUTE IMMEDIATE v_sql;
>   EXCEPTION
>     WHEN OTHERS THEN
>        dbms_output.put_line(SQLERRM);
>        dbms_output.put_line(v_sql);
>   END;
> END LOOP; 
> ```

这应该向您显示导致问题的语句。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-04-21T07:52:21.123

截断表 Table_NAME 删除存储；

# php - 如何删除html特殊字符？

> ID：657643
> 
> 赞同：61
> 
> 时间：2009-03-18T10:09:42.173
> 
> 标签：php, html-encode

我正在为我想要删除 HTML 标记的应用程序创建一个 RSS 提要文件，该文件由`strip_tags`. 但`strip_tags`不删除 HTML 特殊代码字符：

```
&nbsp; &amp; &copy; 
```

等等

请告诉我任何可以用来从字符串中删除这些特殊代码字符的函数。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2009-03-18T10:16:58.460

使用解码`html_entity_decode`或删除它们`preg_replace`：

```
$Content = preg_replace("/&#?[a-z0-9]+;/i","",$Content); 
```

（从[这里](http://www.webmasterworld.com/forum88/7046.htm)）

编辑：根据 Jacco 的评论替代

> 用 {2,8} 或其他东西替换“+”可能会很好。当存在未编码的“&”时，这将限制替换整个句子的机会。

```
$Content = preg_replace("/&#?[a-z0-9]{2,8};/i","",$Content); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2009-03-18T10:15:19.417

用于[`html_entity_decode`](http://www.php.net/manual/en/function.html-entity-decode.php)转换 HTML 实体。

您需要设置字符集以使其正常工作。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-02-16T16:59:55.767

除了上面的好答案，PHP 还有一个非常有用的内置过滤器函数：filter-var。

要删除 HMTL 字符，请使用：

`$cleanString = filter_var($dirtyString, FILTER_SANITIZE_STRING);`

**更多信息：**

1.  [function.filter-var](http://php.net/manual/en/function.filter-var.php)
2.  [filter_sanitize_string](http://www.w3schools.com/php/filter_sanitize_string.asp)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-03-18T10:16:14.187

您可能想在[这里查看 htmlentities() 和 html_entity_decode()](http://fr.php.net/manual/en/function.html-entity-decode.php)

```
$orig = "I'll \"walk\" the <b>dog</b> now";

$a = htmlentities($orig);

$b = html_entity_decode($a);

echo $a; // I'll &quot;walk&quot; the &lt;b&gt;dog&lt;/b&gt; now

echo $b; // I'll "walk" the <b>dog</b> now 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-29T09:58:05.493

这可能适用于删除特殊字符。

```
$modifiedString = preg_replace("/[^a-zA-Z0-9_.-\s]/", "", $content); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-18T11:19:50.883

一种简单的香草字符串方式，无需使用 preg 正则表达式引擎：

```
function remEntities($str) {
  if(substr_count($str, '&') && substr_count($str, ';')) {
    // Find amper
    $amp_pos = strpos($str, '&');
    //Find the ;
    $semi_pos = strpos($str, ';');
    // Only if the ; is after the &
    if($semi_pos > $amp_pos) {
      //is a HTML entity, try to remove
      $tmp = substr($str, 0, $amp_pos);
      $tmp = $tmp. substr($str, $semi_pos + 1, strlen($str));
      $str = $tmp;
      //Has another entity in it?
      if(substr_count($str, '&') && substr_count($str, ';'))
        $str = remEntities($tmp);
    }
  }
  return $str;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-16T15:36:35.443

我所做的是使用：`html_entity_decode`，然后使用`strip_tags`删除它们。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-03-11T04:11:08.323

试试这个

```
<?php
$str = "\x8F!!!";

// Outputs an empty string
echo htmlentities($str, ENT_QUOTES, "UTF-8");

// Outputs "!!!"
echo htmlentities($str, ENT_QUOTES | ENT_IGNORE, "UTF-8");
?> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-01-26T00:19:47.187

如果您想*转换*HTML 特殊字符，而不仅仅是删除它们以及剥离内容并准备纯文本，那么这就是对我有用的解决方案......

```
function htmlToPlainText($str){
    $str = str_replace('&nbsp;', ' ', $str);
    $str = html_entity_decode($str, ENT_QUOTES | ENT_COMPAT , 'UTF-8');
    $str = html_entity_decode($str, ENT_HTML5, 'UTF-8');
    $str = html_entity_decode($str);
    $str = htmlspecialchars_decode($str);
    $str = strip_tags($str);

    return $str;
}

$string = '<p>this is (&nbsp;) a test</p>
<div>Yes this is! &amp; does it get "processed"? </div>'

htmlToPlainText($string);
// "this is ( ) a test. Yes this is! & does it get processed?"` 
```

html_entity_decode w/ENT_QUOTES | ENT_XML1 转换`&#39;` htmlspecialchars_decode 之类的东西html_entity_decode 之类的东西`&amp;` 转换之类的东西`'&lt;` strip_tags 删除任何剩余的 HTML 标签。

**编辑**- 添加 str_replace(' ', ' ', $str); 和其他几个 html_entity_decode() 继续测试表明需要它们。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-18T16:21:55.197

看起来你真正想要的是：

```
function xmlEntities($string) {
    $translationTable = get_html_translation_table(HTML_ENTITIES, ENT_QUOTES);

    foreach ($translationTable as $char => $entity) {
        $from[] = $entity;
        $to[] = '&#'.ord($char).';';
    }
    return str_replace($from, $to, $string);
} 
```

它将命名实体替换为它们的等价物。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2010-07-10T11:43:18.977

```
<?php
function strip_only($str, $tags, $stripContent = false) {
    $content = '';
    if(!is_array($tags)) {
        $tags = (strpos($str, '>') !== false
                 ? explode('>', str_replace('<', '', $tags))
                 : array($tags));
        if(end($tags) == '') array_pop($tags);
    }
    foreach($tags as $tag) {
        if ($stripContent)
             $content = '(.+</'.$tag.'[^>]*>|)';
         $str = preg_replace('#</?'.$tag.'[^>]*>'.$content.'#is', '', $str);
    }
    return $str;
}

$str = '<font color="red">red</font> text';
$tags = 'font';
$a = strip_only($str, $tags); // red text
$b = strip_only($str, $tags, true); // text
?> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-07-14T15:08:37.510

我用来执行任务的函数，加入 schnaader 所做的升级是：

```
 mysql_real_escape_string(
        preg_replace_callback("/&#?[a-z0-9]+;/i", function($m) { 
            return mb_convert_encoding($m[1], "UTF-8", "HTML-ENTITIES"); 
        }, strip_tags($row['cuerpo']))) 
```

此函数删除每个 html 标记和 html 符号，转换为 UTF-8 准备保存在 MySQL 中

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-29T09:01:30.183

如果您在 WordPress 中工作并且像我一样只需要检查一个空字段（并且在看起来像一个空白字符串的地方有大量随机 html 实体），那么请查看：

```
sanitize_title_with_dashes( string $title, string $raw_title = '', string $context = 'display' ) 
```

[链接到wordpress功能页面](https://developer.wordpress.org/reference/functions/sanitize_title_with_dashes/)

对于不使用 WordPress 的人，我发现这个功能对于创建我自己的消毒剂非常有用，看看完整的代码，它真的很深入！

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-13T01:37:23.543

### 如果“删除 HTML 特殊字符”的意思是“适当替换”怎么办？

毕竟，看看你的例子......

```
&nbsp; &amp; &copy; 
```

如果您将其剥离为 RSS 提要，您不应该想要等价物吗？

```
" ", &, © 
```

或者，也许您并不*完全想要等价物。* 也许您`&nbsp;`只想被忽略（以防止太多空间），但`&copy;`实际上已被替换。让我们制定一个解决方案来解决这个问题的任何人的版本......

### 如何*选择性地替换*HTML 特殊字符

逻辑很简单：`preg_match_all('/(&#[0-9]+;)/'`抓取所有匹配项，然后我们简单地构建一个可匹配项和可替换项列表，例如`str_replace([searchlist], [replacelist], $term)`. 在我们这样做之前，我们还需要将命名实体转换为它们的数字对应物，即，`"&nbsp;"`这是不可接受的，但`"&#00A0;"`很好。（感谢[it-alien对这部分问题的解决。](https://stackoverflow.com/a/39898858/2430549)）

### 工作演示

在这个演示中，我`&#123;`用`"HTML Entity #123"`. 当然，您可以将其微调为您想要的任何类型的查找替换。

我为什么做这个？我使用它*从 UTF8 字符编码的 HTML 生成富文本格式。*

查看完整的工作演示：

[**完整的在线工作演示**](https://ideone.com/PPAo1g)

```
 function FixUTF8($args) {
        $output = $args['input'];

        $output = convertNamedHTMLEntitiesToNumeric(['input'=>$output]);

        preg_match_all('/(&#[0-9]+;)/', $output, $matches, PREG_OFFSET_CAPTURE);
        $full_matches = $matches[0];

        $found = [];
        $search = [];
        $replace = [];

        for($i = 0; $i < count($full_matches); $i++) {
            $match = $full_matches[$i];
            $word = $match[0];
            if(!$found[$word]) {
                $found[$word] = TRUE;
                $search[] = $word;
                $replacement = str_replace(['&#', ';'], ['HTML Entity #', ''], $word);
                $replace[] = $replacement;
            }
        }

        $new_output = str_replace($search, $replace, $output);

        return $new_output;
    }

    function convertNamedHTMLEntitiesToNumeric($args) {
        $input = $args['input'];
        return preg_replace_callback("/(&[a-zA-Z][a-zA-Z0-9]*;)/",function($m){
            $c = html_entity_decode($m[0],ENT_HTML5,"UTF-8");
            # return htmlentities($c,ENT_XML1,"UTF-8"); -- see update below

            $convmap = array(0x80, 0xffff, 0, 0xffff);
            return mb_encode_numericentity($c, $convmap, 'UTF-8');
        }, $input);
    }

print(FixUTF8(['input'=>"Oggi &egrave; un bel&nbsp;giorno"])); 
```

输入：

> `"Oggi &egrave; un bel&nbsp;giorno"`

输出：

> `Oggi HTML Entity #232 un belHTML Entity #160giorno`

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-05-13T11:32:12.563

```
$string = "äáčé";

$convert = Array(
        'ä'=>'a',
        'Ä'=>'A',
        'á'=>'a',
        'Á'=>'A',
        'à'=>'a',
        'À'=>'A',
        'ã'=>'a',
        'Ã'=>'A',
        'â'=>'a',
        'Â'=>'A',
        'č'=>'c',
        'Č'=>'C',
        'ć'=>'c',
        'Ć'=>'C',
        'ď'=>'d',
        'Ď'=>'D',
        'ě'=>'e',
        'Ě'=>'E',
        'é'=>'e',
        'É'=>'E',
        'ë'=>'e',
    );

$string = strtr($string , $convert );

echo $string; //aace 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2015-10-01T12:56:02.153

你可以试试`htmlspecialchars_decode($string)`。这个对我有用。

[http://www.w3schools.com/php/func_string_htmlspecialchars_decode.asp](http://www.w3schools.com/php/func_string_htmlspecialchars_decode.asp)

# unit-testing - 重构和测试驱动开发

> ID：657645
> 
> 赞同：5
> 
> 时间：2009-03-18T10:09:47.400
> 
> 标签：unit-testing, refactoring, testing

我目前正在阅读两本优秀的书“有效地使用遗留代码”和“干净的代码”。

他们让我以全新的方式思考我编写和使用代码的方式，但其中一个共同的主题是测试驱动开发，以及在进行更改或实施之前用测试扼杀一切并进行测试的想法一个新的功能。

这导致了两个问题：

问题 1：如果我使用的是遗留代码。根据书籍，我应该进行测试以确保我没有破坏任何东西。考虑到我有一个 500 行长的方法。我假设我将有一组等效的测试方法来测试该方法。当我拆分这个函数时，我是否为每个产生的新方法/类创建新的测试？

根据“清洁代码”，任何耗时超过 1/10 秒的测试都是耗时过长的测试。尝试测试一个长达 500 行的遗留方法，该方法进入数据库，天知道还有什么可能需要超过 1/10 秒的时间。虽然我知道您需要打破依赖关系，但我遇到的问题是初始测试创建。

问题 2：当代码重构如此之多以至于在结构上不再类似于原始代码时会发生什么（向方法添加/删除新参数等）。那么测试是否也需要重构？在这种情况下，您可能会在允许测试继续通过的同时更改系统的功能？在这种情况下，重构测试是否合适？

虽然可以继续假设，但我想知道集体经验是否对这些问题有任何想法/建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T10:30:41.047

1.  这就是处理遗留代码时的问题。传统意味着没有测试且紧密耦合的系统。在为该代码添加测试时，您实际上是在添加集成测试。当您重构并添加避免网络调用等的更具体的测试方法时，这些将是您的单元测试。你想保留两者，然后分开，这样你的大多数单元测试都会运行得很快。
2.  您只需很小的步骤即可做到这一点。您实际上在测试和代码之间不断切换，并且您是正确的，如果您更改签名（小步骤）相关的测试需要更新。

还要检查我的“更新 2”[如何改进我的 junit 测试](https://stackoverflow.com/questions/589603/how-can-i-improve-my-junit-tests/589620#589620)。它不是关于遗留代码和处理它已经拥有的耦合，而是关于你如何编写涉及外部系统的逻辑+测试，即数据库、电子邮件等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T10:20:15.300

0.1s 的单元测试运行时间相当愚蠢。没有理由单元测试不应该使用网络套接字、读取大文件或其他大量操作（如果必须）。是的，如果测试运行得很快，那很好，这样您就可以继续编写应用程序的主要工作，但最终得到最好的结果要好得多，如果这意味着运行一个需要 10 秒的单元测试，那就是我会做的。

如果您要重构，关键是要花尽可能多的时间来理解要重构的代码。这样做的一种好方法是为它编写一些单元测试。当您掌握某些代码块在做什么时，您可以对其进行重构，然后为您的每个新方法编写测试是一种很好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T10:21:14.237

1.  *   是的，为新方法创建新测试。

    *   我认为 1/10 秒是你应该争取的目标。较慢的测试仍然比没有测试好得多。

2.  尽量不要同时更改代码和测试。总是采取小步骤。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T10:33:32.367

当您有一个冗长的遗留方法来执行 X（可能是 Y 和 Z，因为它的大小）时，真正的诀窍不是通过“修复”它来破坏应用程序。旧版应用程序的测试有前置条件和后置条件，所以在分解它之前你必须真正了解它们。测试有助于促进这一点。一旦您将该方法分解为两个或多个新方法，显然您需要知道每个方法的前/后状态，因此对那些“保持诚实”的测试进行测试，让您晚上睡得更好。

我不太担心第二个断言的 1/10。相反，我编写单元测试的目标是覆盖我的所有基础。显然，如果测试需要很长时间，可能是因为正在测试的只是太多的代码做的太多了。

最重要的是，您绝对不想将可能是工作系统的东西“修复”到它有时可以工作并在某些条件下失败的程度。这就是测试可以提供帮助的地方。他们每个人都希望世界在测试开始时处于一种状态，而在结束时处于新状态。只有你才能知道这两种状态是否正确。所有测试都可以“通过”，应用程序仍然可能出错。

每当代码发生更改时，测试可能会发生更改，并且可能需要添加新的测试来解决对生产代码所做的更改。这些测试适用于当前代码——无论参数是否需要更改，仍然需要满足前置/后置条件。显然，仅仅将代码分解成更小的块是不够的。你内心的“分析师”必须能够理解你正在构建的系统——这是工作之一。

根据您开始的“混乱”，使用遗留代码可能是一件真正的苦差事。我真的发现知道你已经拥有什么以及它应该做什么（以及在你开始重构之前它是否真的在第 0 步完成）是成功重构代码的关键。我认为，一个目标是我应该能够抛弃旧的东西，将我的新代码放在它的位置上，并让它像宣传的那样工作（或更好）。根据编写的语言、原作者所做的假设以及将功能封装到可包含块中的能力，这可能是一个真正的技巧。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T10:33:26.983

这是我的看法：

1.  不，是的。首先要做的是有一个单元测试来检查该 500 行方法的输出。然后只有当你开始考虑拆分它时*。*理想情况下，该过程将如下所示：

    *   为原始的遗留 500 行庞然大物编写测试
    *   弄清楚，首先用注释标记，您可以从该方法中提取哪些代码块
    *   为每个代码块编写一个测试。一切都会失败。
    *   一个一个地提取块。集中精力让所有的方法一次又一次地变成绿色。
    *   冲洗并重复，直到完成整个过程

    在这个漫长的过程之后，您会意识到将某些方法移到其他地方可能是有意义的，或者是重复的，并且可以将几个方法简化为一个函数；这样你就知道你成功了。相应地编辑测试。

2.  继续重构，但是一旦您需要更改签名，请先在测试中进行更改，然后再对实际代码进行更改。这样，您可以确保在方法签名发生变化的情况下仍然做出正确的断言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-18T10:34:32.410

**问题 1：“当我拆分这个函数时，我是否为每个产生的新方法/类创建新的测试？”**

与往常一样，真正的答案是视*情况而*定。如果合适的话，将一些巨大的单体方法重构为处理不同组件部分的较小方法以将新方法设置为私有/受保护并保持现有 API 完整以继续使用现有单元测试可能会更简单。如果您需要测试新分离的方法，有时将它们标记为包私有是有利的，这样您的单元测试类可以获取它们，而其他类则不能。

**问题 2：“当代码被重构到结构上不再类似于原始代码时会发生什么？”**

我在这里的第一条建议是，您需要获得一个好的 IDE 并熟悉正则表达式 - 尝试使用自动化工具尽可能多地进行重构。如果您足够谨慎，不要引入新问题，这*可以帮助您节省时间。*正如你所说，你必须改变你的单元测试——但如果你使用好的 OOP 原则（你做得对吗？），那么它不应该那么痛苦。

总的来说，重要的是要问自己关于重构的好处是否超过成本？我只是在摆弄架构和设计吗？我是否在进行重构以理解代码并且真的需要它吗？我会咨询熟悉代码库的同事，了解他们对您当前任务的成本/收益的看法。

还要记住，您在书中阅读的理论理想需要与现实世界的业务需求和时间安排相平衡。

# asp.net-mvc - ASP.NET MVC – 用于控制器测试的模拟成员资格

> ID：657648
> 
> 赞同：5
> 
> 时间：2009-03-18T10:11:04.993
> 
> 标签：asp.net-mvc, unit-testing, asp.net-membership

我不确定如何为我的控制器测试模拟 ASP.NET 成员资格。

控制器代码：

```
MembershipUser username = Membership.GetUser();
string UserID = username.UserName.ToString(); 
```

有谁知道如何模拟这个以进行控制器测试？我正在使用 RhinoMocks。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-10-30T13:31:44.870

我已经开始做这样的事情了。我没有做一个真正的模拟，而是创建了一个`FakeMembershipProvider`只实现`MembershipProvider`我需要的最低限度的东西，并提供了一种设置用户等的方法。我也在做同样的事情`RoleProvider`。然后我为我的测试项目设置了 App.config，因此它使用这些作为提供程序。

到目前为止，它似乎运作良好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T10:57:38.190

我会看 MVS StoreFront 系列[http://www.asp.net/learn/mvc-videos/](http://www.asp.net/learn/mvc-videos/)

对于一个嘲笑 -

[http://www.asp.net/learn/mvc-videos/video-365.aspx](http://www.asp.net/learn/mvc-videos/video-365.aspx)

和会员一 [http://www.asp.net/learn/mvc-videos/video-372.aspx](http://www.asp.net/learn/mvc-videos/video-372.aspx)

一种用于会员资格和使用 OpenID 进行重构的视图

[http://www.asp.net/learn/mvc-videos/video-425.aspx](http://www.asp.net/learn/mvc-videos/video-425.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2010-06-25T15:58:02.033

要模拟与 Membership 静态类连接的对象，你应该在这种情况下使用它的抽象类，为了模拟 GetUser() 方法，使用 MembershipProvider 类，可以模拟，只需将它传递给你的控制器就可以了。

祝你好运，如果你有任何问题，现在就让我，我会发布一些代码示例。

# ruby-on-rails - 你通常如何在 Rails 中对项目进行排序？

> ID：657654
> 
> 赞同：27
> 
> 时间：2009-03-18T10:12:06.757
> 
> 标签：ruby-on-rails, sorting

我有一个名为tickets 的小示例Rails 应用程序，它可以查看和编辑出售给各种客户的虚构门票。在tickets_controller.rb 里面`def index`，我有这个标准行，由脚手架生成：

```
@tickets = Ticket.find(:all) 
```

要按名称对票进行排序，我发现了两种可能的方法。你可以这样做：

```
@tickets = Ticket.find(:all, :order => 'name') 
```

...或者这样：

```
@tickets = Ticket.find(:all).sort!{|t1,t2|t1.name <=> t2.name} 
```

（提示：Ruby 文档解释说，`sort!`它将修改它正在排序的数组，而不是`sort`单独的，它返回排序后的数组但保持原始数组不变）。

**你通常使用什么策略？什么时候可以使用`.sort!`vs.`:order => 'criteria'`语法？**

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-03-18T10:31:31.873

用于`:order => 'criteria'`数据库可以完成的任何简单操作（即基本字母或时间顺序）。假设您有正确的索引，它可能比让您的 Ruby 代码执行此操作要快得多。

我唯一认为您应该使用该`sort`方法的情况是，如果您有一个在运行时计算且未存储在数据库中的复杂属性，例如基于好/坏响应数量的“可信度值”等。在这种情况下，最好使用该`sort`方法，但请注意，如果您有分页，这会搞砸（每个页面都会按顺序显示 ITS 结果，但整个页面集将是无序的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T10:31:09.050

我在 ActiveRecord 查找器或模型关联中指定了一个顺序，因为使用 SQL 进行排序更快。当您能够这样做时，您应该利用 RDBMS 提供的功能。

# c# - 如何防止线程在 C# .NET 中死亡或退出？

> ID：657664
> 
> 赞同：0
> 
> 时间：2009-03-18T10:15:36.590
> 
> 标签：c#, multithreading

我在 C# .NET 的一个程序中最多启动 5 个线程。但有时这些线程中的一些甚至在分配给它的函数执行完成之前就莫名其妙地退出或死亡。

它随机发生。如果我尝试通过放置断点来调试代码 - 它工作正常。

有时所有线程都完美地执行分配的功能。它们之间不共享任何资源。

```
 Thread[] td = new Thread[5];
            for (count = 4; count >= 0; --count)
            {
                ds[count] = dba.getData(ru[count]);
                td[count] = new Thread(delegate() {  runRule[count].performTask(ru[count], ds[count], count); });
                td[count].Name = "Thread " + count.ToString();
                td[count].Start();
                Thread.Sleep(50);
            } 
```

如果我删除最后一行“Thread.Sleep(50)”，则只有第一个线程盯着运行，其余的就死了。

有人可以解释为什么线程会死吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T10:25:07.910

我怀疑他们没有死——我怀疑问题是你实际上并没有按照你认为的规则运行。在匿名方法中使用方法的局部变量时，会捕获变量本身。在这种情况下，您正在捕获`count`局部变量 - 然后更改它（随着循环计数器的减少）。当 count=4 开始运行时创建的线程`count`可能是 3 - 所以它将调用`runRule[3].performTask(ru[3], ds[3], 3)`. 事实上，*在计算表达式时*`count`可能会发生变化，这可能会带来很多乐趣。

 *解决这个问题的方法是为循环的每次迭代设置一个不同的“局部”变量。这很容易做到：

```
Thread[] td = new Thread[5];
for (count = 4; count >= 0; --count)
{
    int copy = count;
    ds[count] = dba.getData(ru[count]);
    td[count] = new Thread(delegate() {  
        runRule[copy].performTask(ru[copy], ds[copy], copy); 
    });
    td[count].Name = "Thread " + count.ToString();
    td[count].Start();
    Thread.Sleep(50);
} 
```

现在，在委托中捕获的唯一变量是`copy`和`runRule`/ `ru`/ `ds`- 我假设后三个不会改变。`copy`每次循环时都会创建一个新的变量“实例” ，因此更改不会相互干扰。

看看这是否有帮助——这*至少*是造成大量混乱的潜在原因，而且很可能是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T10:24:08.787

如果一个线程到达其执行路径的末端，它将自动结束。在您的示例中，一旦线程完成，无论 performTask 方法是什么，它都会退出。

如果您希望一个线程永远挂起（仅出于调试目的，因为您不希望未使用的线程在实际应用程序中挂起）您可以在线程正在运行的方法的末尾添加类似下面的内容。

```
ManualResetEvent stayAlive = new ManualResetEvent(false);
stayAlive.WaitOne(); 
```

# xml - 如何将 Xml 模式中的元素设为可选

> ID：657667
> 
> 赞同：3
> 
> 时间：2009-03-18T10:16:38.100
> 
> 标签：xml, xsd

我有一个元素需要设为可选。

```
<xs:element name="Version" type="xs:string" minOccurs="1" /> 
```

除了制作还有其他方法`minOccurs="0"`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T10:18:17.647

不，这是正确的做法。你有什么理由要避免`minOccurs="0"`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T10:18:39.563

`minOccurs="0"` *是*指定可选的方式

# emacs - 如何在 Emacs 中选择或突出显示块？

> ID：657672
> 
> 赞同：91
> 
> 时间：2009-03-18T10:17:20.267
> 
> 标签：emacs, selection, highlight

我想在 emacs 中选择或突出显示一个块，而不使用鼠标，而是像 vim 的可视模式一样从键盘上进行操作。从键盘执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2009-03-18T12:20:11.550

如果我正确理解了这个问题，那么它最初与矩形区域无关。

**`C-Spc`**在当前位置做标记。

之后无论您的光标在哪里，最后一个标记和当前位置之间的文本都被“选中”（您可以通过激活 来突出显示它`transient-mark-mode`，但这也意味着当您不想突出显示时必须删除标记）。

您可以使用以下命令对该区域进行操作：

**`C-w`**. . 杀区。这将删除该区域并将其放入杀伤环中。
**`C-y`**. . 扬克。这将插入 kill ring 中的最后一个片段。
**`M-y`**. . 循环杀戒。紧随其后`C-y`，这会将被拉出的部分替换为杀伤环中的其他片段。
**`M-w`**. . 将区域保存到杀戮环中。喜欢`C-w`，但不删除。

这只是基本用法。标记也有其他用途。我推荐教程（**`C-h t`**）。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2009-03-18T10:36:14.047

看一下emacs中的区域矩形。

简而言之，你像往常一样用`Control`-开始选择，然后用-`Space`杀死区域并用`Control`-`x` `r` `k`粘贴（或*yank*）被杀死的块。`Control``x` `r` `y`

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2014-10-29T15:35:00.597

Emacs 24.4 现在有[rectangle-mark-mode](https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Rectangles)。Cx 空间来调用它。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-03-18T10:55:16.200

请参阅文章：[“使用矩形选择”](http://emacs-fu.blogspot.com/2008/12/working-with-rectangular-selections.html)，尤其是评论部分。另请参阅标题为“CUA 矩形支持”的[CUA 模式文档部分。](http://www.cua.dk/cua.html)vimeo上还有一个[不错的视频](http://vimeo.com/1168225)。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2016-04-14T19:07:53.997

虽然`C-SPC`是从您的点开始标记某物的常用方法，但通常有更快/更简单的方法不涉及明确移动到起点/终点......

## 内置选择快捷键

*   **`M-h`***——标记段落*的重要手段。“段落”通常意味着一段代码。

*   **`C-M-h`**和`C-M-@`— 分别用于*标记 sexps 和 defuns*。这适用于多种语言，而不仅仅是 lisps。

*   **按住 shift** — 在移动过程中突出显示的另一种巧妙方式。例如，`M-S-f`向前选择整个单词。这是 **[`shift-select-mode`](https://www.gnu.org/software/emacs/manual/html_node/emacs/Shift-Selection.html)**，并且在 Emacs 24+ 中默认启用。`C-S-`在某些（非chiclet）键盘上，您应该能够用一个小指按住。

您可以反复按其中任何一个来扩大选择范围。

还有一些特殊的方法来标记事物：

*   **`C-x h`**—*标记整个缓冲区*

*   **`C-x SPC`**— 进入*矩形标记模式*

[*（注意：`C-g`在实验时经常使用取消标记。）*]

## 附加组件

有一些*附加包*可以改进选择区域和事物。这些都很好地结合在一起，适合不同的用例。全部使用！

*   **[expand-region](https://github.com/magnars/expand-region.el)**：扩展区域按语义单元增加选定区域。只需按住该键，直到它选择您想要的。 `C-=`是推荐的绑定。多打几次就能得到你需要的东西。

*   **[easy-kill](https://github.com/leoliu/easy-kill)**：使用`M-w`和 助记符来选择不同类型的事物，例如单词、sexp、列表等。

*   **[zop-to-char](https://github.com/thierryvolpiatto/zop-to-char)**：类似于*zap-to-char*，但提供了不错的选择和其他菜单驱动的操作。

*   **[diff-hl](https://github.com/dgutov/diff-hl)**：突出显示未提交的更改区域。用于`diff-hl-mark-hunk`选择/标记一个大块。

*   **[symbol-overlay](https://github.com/wolray/symbol-overlay)**：通过击键（`M-i`）选择点处的符号。然后你可以用它做其他事情，比如复制、搜索、跳转、替换等。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2009-03-18T10:38:04.447

使用`Control`-`Space`设置标记并移动光标。

`transient-mark-mode`将为您突出显示选择。`M`- `x` `transient-mark-mode`。

您可以使用自定义设置 Emacs 以默认启用此模式。`M`- `x` `customize-option` `RET` `transient-mark-mode`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-10T09:40:52.140

...如果您使用的是 Ubuntu 并且`C-spc`不适合您：您需要清除 IBus“下一个输入法”键绑定，如

> 运行`ibus-setup`并将“下一个输入法”的键绑定更改为其他内容（或通过单击“...”按钮然后单击“删除”按钮将其完全删除）。

引用自SO question[的答案。](https://stackoverflow.com/a/23458103/1587329)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-11T16:34:44.320

要扩展 Edin Salkovic 的答案，如果您使用 CUA 模式，您可以使用开始视觉块选择。[在CUA](http://www.cua.dk/cua.html)的文档中描述了很多控制块选择的快捷方式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-10T13:54:50.397

使用 Emacs 25，只需按`C`-`Space`然后将光标移动到您想要突出显示/选择您感兴趣的文本区域的任何位置。之后，您可能需要以下命令：

*   `C`-`w`用于切割。
*   `M`-`w`用于复制。
*   `C`-`y`用于粘贴。

# c# - 索引器属性的 PropertyChanged

> ID：657675
> 
> 赞同：37
> 
> 时间：2009-03-18T10:17:38.880
> 
> 标签：c#, wpf, data-binding, indexer

我有一个带有索引器属性的类，带有一个字符串键：

```
public class IndexerProvider {
    public object this[string key] {
        get
        {
            return ...
        }
        set
        {
            ...
        }
    }

    ...
} 
```

我使用索引器表示法绑定到 WPF 中此类的一个实例：

```
<TextBox Text="{Binding [IndexerKeyThingy]}"> 
```

这很好用，但我想`PropertyChanged`在索引器值之一发生变化时引发一个事件。我尝试使用“[keyname]”的属性名称来提升它（即在键名周围包含[]），但这似乎不起作用。我的输出窗口中没有任何绑定错误。

我不能使用 CollectionChangedEvent，因为索引不是基于整数的。从技术上讲，该对象无论如何都不是一个集合。

我可以做到这一点，那么，怎么做？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-03-18T10:27:46.657

根据[这个博客条目](http://blogs.msdn.com/xtof/archive/2007/09/28/binding-to-indexers.aspx)，你必须使用`"Item[]"`. Item 是编译器在使用索引器时生成的属性的名称。

如果您想明确，可以使用[IndexerName](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.indexernameattribute.aspx)属性装饰索引器属性。

这将使代码看起来像：

```
public class IndexerProvider : INotifyPropertyChanged {

    [IndexerName ("Item")]
    public object this [string key] {
        get {
            return ...;
        }
        set {
            ... = value;
            FirePropertyChanged ("Item[]");
        }
    }
} 
```

至少它使意图更加清晰。不过，我不建议您更改索引器名称，如果您的伙伴发现字符串`"Item[]"`是硬编码的，则可能意味着 WPF 将无法处理不同的索引器名称。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2011-08-11T09:29:04.587

另外，您可以使用

```
FirePropertyChanged ("Item[IndexerKeyThingy]"); 
```

仅通知索引器上绑定到 IndexerKeyThingy 的控件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-27T19:30:46.603

在处理 INotifyPropertyChang(ed/ing) 和索引器时，至少还有一些额外的注意事项。

首先是大多数避免魔术属性名称字符串的[流行方法](https://stackoverflow.com/questions/1315621/ "SO：实施 INotifyPropertyChanged：是否存在更好的方法？")是无效的。该[`[CallerMemberName]`](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callermembernameattribute%28v=vs.110%29.aspx "MSDN：CallerMemberNameAttribute")属性创建的字符串末尾缺少“[]”，而 lambda 成员表达式在表达概念时根本存在问题。

```
() => this[]  //Is invalid
() => this[i] //Is a method call expression on get_Item(TIndex i)
() => this    //Is a constant expression on the base object 
```

[其他](https://stackoverflow.com/a/6338627/1848719 "例一") 几篇[文章](https://stackoverflow.com/a/4964858/1848719 "例二")已经用来[`Binding.IndexerName`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.indexername%28v=vs.110%29.aspx "MSDN：绑定。索引器名称")避免使用字符串文字`"Item[]"`，这是合理的，但会引发第二个潜在问题。对 WPF 相关部分的拆解的调查在 PropertyPath.ResolvePathParts 中发现了以下部分。

```
if (this._arySVI[i].type == SourceValueType.Indexer)
  {
    IndexerParameterInfo[] array = this.ResolveIndexerParams(this._arySVI[i].paramList, obj, throwOnError);
    this._earlyBoundPathParts[i] = array;
    this._arySVI[i].propertyName = "Item[]";
  } 
```

作为常量值的重复使用`"Item[]"`表明 WPF 期望它是在 PropertyChanged 事件中传递的名称，并且，即使它不关心实际属性的名称（我没有满意地确定它）方式或其他），避免使用`[IndexerName]`将保持一致性。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-07-11T17:16:54.477

实际上，我认为将 IndexerName 属性设置为“Item”是多余的。IndexerName 属性专门设计用于重命名索引，如果你想给它的集合项一个不同的名称。所以你的代码可能看起来像这样：

```
public class IndexerProvider : INotifyPropertyChanged {

    [IndexerName("myIndexItem")]
    public object this [string key] {
        get {
            return ...;
        }
        set {
            ... = value;
            FirePropertyChanged ("myIndexItem[]");
        }
    }
} 
```

一旦您将索引器名称设置为您想要的任何名称，您就可以在 FirePropertyChanged 事件中使用它。

# asp.net - 保护图片，怎么做？

> ID：657676
> 
> 赞同：2
> 
> 时间：2009-03-18T10:17:44.993
> 
> 标签：asp.net, security, protection, image

我正在使用 asp.net，我的用户需要将私人图片上传到我的服务器。这些照片无论如何都不会传播，所以我需要以某种方式保护它们。保护它们免受公共使用的最简单方法是什么，只有授权用户才能接触到它们？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-18T10:32:52.603

*   您是否希望公众能够查看图像，但让下载它们变得有点困难？

    如果是这样，您可以研究[Flickr 的做法](http://labnol.blogspot.com/2007/08/download-flickr-photos-protected-by.html)，任何选择不允许下载的人。他们在真实图像的顶部放置一个透明的 GIF 图像，以防止通过右键单击它来下载图像。

    下载它们仍然很容易，因为根据经验，公众可以查看的任何内容都可以保存到硬盘中。因此，我认为阻止下载公开可见材料的尝试是徒劳的；而且大多只是对可用性的侵犯。也许您应该考虑法律途径而不是混淆；清楚地说明您的版权声明和您想要的任何许可，并准备追捕任何窃取它们的人。

*   您是否希望允许人们从您的站点查看和下载图像，但不允许从其他站点进行热链接？

    如果是这样，关键是检测发送的referer（sic）头，如果referer不匹配，则拒绝图像。请注意，如果referer 为空，则默认情况下您必须信任它，因为很多人的浏览器合法地不发送referer，即使在您自己的页面上查看也是如此。

    这通常在服务器指令中完成；如果您使用的是 Apache，您将[使用 mod_rewrite 指令在 .htaccess 文件中](http://altlab.com/htaccess_tutorial.html)执行此操作。但是，如果您使用的是 IIS，那么我就不太清楚了，尽管[这些说明可能有帮助，也可能没有帮助](http://www.irritatedvowel.com/Programming/DeepLinkingHttpModule.aspx)。

*   或者，您是否想完全阻止公众看到它们？如果是这样，您只需要在您使用的任何服务器上使用访问控制 - 这是[IIS 的访问控制说明](http://technet.microsoft.com/en-us/library/cc778815.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T10:20:37.983

使用 asp.net 处理程序而不是直接提供图像。这样，您可以在提供图像时对授权进行精细控制。

此外，将图像保留在公共文件夹之外，这样用户就无法下载它们，即将它们存储在网站文件夹之外或数据库中。

检查此以获取有关处理程序的更多信息：[http](http://www.wrox.com/WileyCDA/Section/id-291916.html) ://www.wrox.com/WileyCDA/Section/id-291916.html 。这两个样本都提供图像，但它们都专注于非常具体的场景。正如您在其中看到的，您可以完全控制您在其中实现的逻辑，因此您可以检查请求图像的用户是否有权下载指定的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T18:29:27.433

您可能想查看这个问题以获得一些想法：[针对静态请求的安全图像](https://stackoverflow.com/questions/585919/asp-net-secure-images-against-static-requests-from-other-users)

# c# - 使用事件处理程序与覆盖事件触发方法

> ID：657685
> 
> 赞同：25
> 
> 时间：2009-03-18T10:21:00.010
> 
> 标签：c#, .net, winforms

我正在创建 Button 的子类，并希望为其某些事件（例如 OnClick）添加自定义功能。哪种方法更可取？我是否覆盖 OnClick：

```
protected override void OnClick(EventArgs e)
{
    base.OnClick(e);
    doStuff();
} 
```

还是应该通过设计器将 OnClick 事件链接到在我的 Button 子类中定义的事件处理程序？

```
class ButtonSubclass
{
    public ButtonSubclass() : base()
    {
        InitializeComponent();
    }

    private void InitializeComponent()
    {
        this.Click += new System.EventHandler(this.ButtonSubclass_Click);
    }
} 
```

**编辑**：我添加了微小的视觉更改（可能作为基本皮肤传递），但大多数更改都在事件处理程序中，我不想在每个重用它的表单上重新实现（复制粘贴）。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-18T10:26:30.137

如果您真的专门化了按钮，那么覆盖`OnClick`. 如果您只是*实际*更改单击按钮时发生的情况，那么我一开始就不会子类`Button`化——我*只会*添加事件处理程序。

编辑：只是为了提供更多的想法——如果你想为多个按钮添加类似的事件处理程序，编写一个实用方法来做到这一点很容易，并从多个地方调用它。它不需要实际的子类化。当然，这并不是说子类在你的情况下绝对*是*错误的——只是给你额外的选择:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-03-18T10:25:48.673

继承时始终覆盖 OnClick。它为您提供更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-14T16:53:57.030

实际上，附加一个覆盖方法的事件处理程序有一个优点。您的事件处理程序是**private**，而您的覆盖方法必须使用预定义的名称进行**保护。**如果您使用混淆/加密工具来保护您的应用程序，那么您的代码`protected override`在`private`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-03-18T10:36:37.540

对于单击按钮，我会将其保留为一种阅读方法。但我想这是个人喜好的事情。我很想知道共识是什么。

# c++ - 在编译期间估计相对 CPU 使用率

> ID：657688
> 
> 赞同：0
> 
> 时间：2009-03-18T10:23:19.067
> 
> 标签：c++, linux, gcc, compilation, cpu-usage

今天早上编译时，我有一个想法。

给定一台专用的 Linux 机器（例如运行 Fedora），用户远程登录并编译（使用 gcc）他们的 c++ 软件，该软件存储在他们自己的机器上（在一个小型 LAN 上），通过符号链接链接到 Linux 机器。

假设每个用户现在正在编译完全相同的代码......一个用户可以在 10 分钟内编译和链接他的代码。

是否需要 2 个用户总共 20 分钟才能同时编译 3 个或 10 个用户呢？

随着用户的增加，是否存在导致收益递减的开销？

作为一个额外的问题 - 你有什么技巧可以提高这个设置的编译效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T10:30:54.993

我建议[`distcc`](http://distcc.samba.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T10:36:24.590

编译主要受 CPU 限制，因此假设您有足够的 RAM，您可以预期编译时间大致为（每个任务的时间）*（任务数）/（系统中的 CPU/核心数）。（奇怪的是，我在我的一个项目的 3 核系统上运行了“make -j”，并且速度提高了 3 倍以上，因此可能存在某种阻塞问题，阻止了顺序 make 全速运行。）

为什么用户不在自己的计算机上编译他们的程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T10:28:26.730

根据项目源的大小，节省*可能*是在编译之前将所有文件本地复制到构建机器。如果编译器必须根据需要通过网络提取所有文件，这将引入一些开销，因为网络访问比磁盘访问慢得多。

如果您编写脚本或使用仅将修改后的文件复制到构建机器的工具，那么开销将大大减少。在这种情况下，构建机器基本上会保留源文件的本地镜像，并且每次编译时，它都会更新任何修改过的文件，然后编译。显然，如果您有很多用户和/或大型项目文件，那么您会遇到存储/空间问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T10:29:03.237

由于以下原因，总会产生开销：

*   调度需求
*   时间冲突的 I/O 操作

最后一个对您来说是最重要的，因为网络访问比磁盘访问慢得多。预缓存（首先在本地获取所有文件，然后开始编译）在这里可能会有所帮助。已经开始的构建将不会受到新的并发用户的阻碍。

# windows - 如何判断网络适配器在 Windows 上是否可移动

> ID：657701
> 
> 赞同：3
> 
> 时间：2009-03-18T10:26:14.943
> 
> 标签：windows, winapi, networking

如何判断通过 Win32 [GetAdaptersInfo()](http://msdn.microsoft.com/en-us/library/aa365917(VS.85).aspx)或[GetAdaptersAddresses()](http://msdn.microsoft.com/en-us/library/aa365915(VS.85).aspx)函数检索到的给定网络适配器是否是可移动的，例如 USB、SmartCard 等？

这些功能的文档似乎没有包含任何获取该信息的方法，所以我假设我必须去向 Windows 询问我发现的每个设备是否可以以某种方式移动。

你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-24T02:58:09.737

If you think about it then *all* adapters are removable (e.g. PCI, USB, Virtual, etc) Even an in-built NIC can usually be disabled in the BIOS.

What you really want to know is the 'interface type' of each adapter. This information can be found in caption property of the Win32_NetworkAdapterConfiguration Class. You could use this (with other information from the class) to work out how each device is connected to the machine and if it is in use.

```
strComputer = "." 
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2") 
Set colItems = objWMIService.ExecQuery( _
    "SELECT Caption, IPEnabled FROM Win32_NetworkAdapterConfiguration",,48) 
For Each objItem in colItems 
    Wscript.Echo objItem.IPEnabled & " " & objItem.Caption
Next 
```

Also, the Win32_NetworkAdapterConfiguration is very useful for the IPEnabled property as it lets you see if TCP/IP is bound and enabled on the adapter.

Here is an example output

```
False [00000001] 1394 Net Adapter
False [00000002] RAS Async Adapter
False [00000003] WAN Miniport (L2TP)
False [00000004] WAN Miniport (PPTP)
False [00000005] WAN Miniport (PPPOE)
False [00000006] Direct Parallel
False [00000007] WAN Miniport (IP)
False [00000008] Packet Scheduler Miniport
True [00000009] Wireless-B PCI Adapter
False [00000010] Packet Scheduler Miniport
False [00000011] Cisco AnyConnect VPN Virtual Miniport Adapter for Windows
False [00000012] Packet Scheduler Miniport 
```

# c++ - 如何在 Visual C++ 中添加条件断点

> ID：657724
> 
> 赞同：5
> 
> 时间：2009-03-18T10:34:43.860
> 
> 标签：c++, debugging, visual-c++, visual-studio-2005, breakpoints

我想在 VC++ Express 2005 中为我的代码添加断点条件，以便只有在局部变量满足指定条件时才会触发断点。例如

```
bool my_test(UIDList test_list) {
    foo(test_list);
    bar(test_list); // I have a breakpoint here, but only want it to trigger if test_list.Length() > 0
    print(test_list);
} 
```

右键单击我的断点并选择“条件...”后，我发现一个对话框似乎可以执行我想要的操作，但是我尝试在文本字段中输入的任何内容都会导致以下错误：

> 无法评估断点条件：CX0052：错误：成员函数不存在

我尝试了帮助文档，但找不到答案。我希望有 VC++ 经验的人能够指出我正确的方向......

我之前曾尝试升级到更新版本的 VC++ Express，但该项目没有干净地导入。由于项目的复杂性和我目前的时间尺度，我现在不能考虑将升级作为解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-11T08:21:57.123

VS 确实有一些微观评估引擎——在可变观察窗口、即时窗口、断点条件等中。我永远找不到关于它们的像样的文档。据我所知，他们对愿意调用的方法很挑剔，**但**他们对访问限制也不敏感。
因此，您可能可以从

```
test_list.Length() > 0 
```

类似于

```
test_list.m_nLength > 0 
```

（或任何您的私人长度变量）。

（编辑）刚刚发现[这个 msdn 页面](http://msdn.microsoft.com/en-us/library/e0ysa1hs(VS.80).aspx)解释了调试器可以处理和不能处理的表达式。所以首先，[确实](http://msdn.microsoft.com/en-us/library/0888kc6a(VS.80).aspx)——

> '无论访问控制如何，调试器都可以访问所有类成员。您可以检查任何类对象成员，包括基类和嵌入的成员对象。

其次，我对未能评估 'Length()' 的猜测 - 它可能是内联的：

> '除非函数作为普通函数至少出现一次，否则调试器表达式不能调用内在函数或内联函数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-18T10:56:52.590

使用 DebugBreak(); 功能：

```
bool my_test(UIDList test_list) {
    foo(test_list);
    if (bar(test_list) /* or whatever check :) */) // I have a breakpoint here, but only want it to trigger if test_list.Length() > 0
        DebugBreak();
    }
    print(test_list);
} 
```

或者你总是可以使用 assert(expression)

```
bool my_test(UIDList test_list) {
    foo(test_list);
    bar(test_list);
    assert(test_list.Length() > 0); // will break here
    print(test_list);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-18T10:52:02.557

据我所知，断点中的条件不能调用方法。所以，你需要做的是事先计算好长度。像这样的东西。

```
 bool my_test(UIDList test_list) {
 foo(test_list);
 int i = test_list.Length();
 bar(test_list); // I have a breakpoint here, but only want it to trigger if test_list.Length() > 0
 print(test_list);
} 

```

在 i 的值上放一个条件断点，你应该没问题。

# sharepoint - 创建需要唯一值的自定义字段

> ID：657725
> 
> 赞同：2
> 
> 时间：2009-03-18T10:35:02.770
> 
> 标签：sharepoint, sharepoint-2007, moss

我正在实现一个包含多列的自定义列表定义。对其中一列的要求是，它只能包含唯一值。如果用户输入的值已经存在于另一个列表项中，则必须显示验证错误。

是否有任何选项可以执行此 OOTB，可能在列表定义或自定义字段类型中？还是我需要自己实现这个功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T10:53:21.023

为了确保列中的唯一值，您有两种可能。

1.  您可以覆盖字段类型的 Validate() 方法，并在列表中查询具有相同值的项目并相应地设置 IsValid 属性。

2.  编写自己的 ItemAdding 和 ItemUpdating eventreceivers 来查询列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-19T09:42:05.150

我过去使用过以下内容。

```
 /// <summary>
            /// Override Validation to check to see if our list already contains an item with the same value
            /// </summary>
            /// <param name="value"></param>
            /// <returns></returns>
            public override string GetValidatedString(object value)
            {
                // Get Current List
                SPList thisList = ParentList;

                SPQuery keywordQuery = new SPQuery();

                // Check to see if the current field contains the value entered into field
                keywordQuery.Query = string.Format("<Where>" +
                         "<Eq>" +
                            "<FieldRef Name='{1}' />" +
                            "<Value Type='Text'>{0}</Value>" +
                         "</Eq>" +
                   "</Where>", value, InternalName);

                SPListItemCollection liKeywords = thisList.GetItems(keywordQuery);

                // Will return greater than 0 if it finds the value in the list
                if (liKeywords.Count > 0)
                {
                    // checks to see if the list item is being updated, if it is the same finds the same ID as the one being Validated
                    if (liKeywords[0].ID != SPContext.Current.ItemId)
                    {

                        // Show error message
                        throw new SPFieldValidationException(string.Format("An item called '{0}' already exists", value));
                    }
                }

                // return entered value if unique
                return base.GetValidatedString(value);
            } 
```

HTH菲尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-19T17:59:49.763

[http://www.codeplex.com/features](http://www.codeplex.com/features)上有一个名为“Unique Column Policy”的开源功能，它可以解决您的问题，而无需创建对新字段类型的依赖。

# c# - 对于 C、COBOL 程序员来说，启动 C# 的最佳方式是什么？

> ID：657731
> 
> 赞同：4
> 
> 时间：2009-03-18T10:37:55.367
> 
> 标签：c#

我知道 C、C++、COBOL。

现在我正在尝试学习 C#，我想用 C# 做一些爱好项目。

所以你能建议我从哪里开始。

我在谷歌上搜索过，但我想从一本书开始，这本书给了我更多的练习问题，为新来的 .net

任何人都可以在网上推荐一本我应该真正开始的好书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T10:48:40.817

我参考了几本书，这本书很棒。

您可以从[Professional C#, Third Edition下载它](http://www.flazx.com/ebook1039.php)

这也是一本好书。没读过整本书，但几个月前我看过

[Sams 24 小时内自学 C#](http://www.flazx.com/ebook10401.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T10:51:42.417

我建议您首先从基本的视频教程开始，您可以找到更多[此类](http://www.learncsharp.com)视频的来源。

[然后在完成基本功能和主要区别后，您可以通过阅读更详细的书籍（如CLR via C#](http://www.microsoft.com/learning/en/us/Books/6522.aspx)）来深入了解

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-17T01:19:05.493

每个人的学习方式略有不同，因此我提供了几种不同类型的资源。

## 图书

对于 COBOL 程序员来说，迁移到像 C# 这样的语言的最大挑战之一似乎是一切都以面向对象的方式完成。“一切都是对象”在 C# 中是一个很好的概括，对于初学者来说当然已经足够好了。所以，第一个建议是一本关于[对象思维](https://rads.stackoverflow.com/amzn/click/com/0735619654)的书。它试图从哲学和历史的角度介绍对象。它专门讨论了过程语言和 OO 语言之间的一些差异。现在，它有点学术性（由教授撰写），但这里有一个很好的基础。

一旦理解了 OO，就会有许多 C# 书籍可用。许多人通过 C# 推荐 Richter 的[CLR，](https://rads.stackoverflow.com/amzn/click/com/0735627045)这是一本非常好的书。如果此人是 CS 的老手，那么您不能推荐一本更好、更全面的 C# 和 CLR 书籍。对于更“平易近人”、面向功能的方式，我一直认为[Troelsen](http://www.amazon.com/Pro-2010-NET-Platform-Fifth)非常出色。

## 网站

另一种方法是比较和对比语法。精通 COBOL 的人在第一次尝试编写 C# 时会想到 COBOL。所以这里有一篇关于[CodeProject](http://www.codeproject.com/KB/net-languages/COBOLvsVBvsCSharp.aspx)的文章，它对 VB.NET、C# 和 COBOL 进行了并排比较。这不是一个完整的概述，但对于试图弄清楚如何用 C# 编写循环的人来说，它可能是一个很好的参考。还有这篇[博](http://www.csharphelp.com/2006/11/converting-c-to-cobol/)文，更倾向于采用 C# 并转换为 COBOL。不过，两者之间的比较可能会有所帮助。

## 训练

对于那些需要讲师指导课程的人，Microsoft[为 COBOL 程序员提供了 Microsoft .NET 入门](http://www.microsoft.com/learning/en/us/course.aspx?ID=2363A&locale=en-us)。然而，在哪里提供这种服务可能是一个挑战。

## 编码

Fujistu 制作了一个很酷的产品，名为[NetCOBOL for .NET](http://www.netcobol.com/)。没有什么比写代码更好的了。在这里，您可以在 Visual Studio 中编写 COBOL 代码来生成在 CLR 上运行的 Microsoft 的中间语言 (MSIL)（太酷了）。使用它，COBOL 程序员可以编写 OO COBOL，但要利用 .NET Framework。也许使用这个，您可以进行下一步并使用[Reflector](http://www.red-gate.com/products/reflector/)将 IL 反编译为 C#、VB 等。该网站没有列出价格，这意味着“如果你必须问，你买不起。 " 此外，这里的目标不是编写更多的 COBOL，因此这可能是过渡到 C# 的一个非常容易上瘾的拐杖。

## 视频

Fujistu 还在 youtube 上为 COBOL 程序员发布了一系列 .NET。介绍视频位于[此处](http://www.youtube.com/user/fujitsucobol#p/u/40/jJuVp5uUClA)，第一课位于[此处](http://www.youtube.com/user/fujitsucobol#p/u/38/3Ot_pY30DG0)，但用户[fujistucobol](http://www.youtube.com/user/fujitsucobol)的任何内容都会很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T11:14:41.957

如果您对构建一些业余项目感兴趣，那么从下载和安装免费的快速版 Visual Studio 并完成示例和快速入门开始可能是值得的。

没有什么比一点编码更能加快速度了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T11:16:34.510

从 C/C++ 背景来看，对 C# 语法的快速覆盖应该是足够的（并没有太大的不同），尤其是考虑到 C++ 的 OO。

我建议使用“ [C# in a Nutshell](http://oreilly.com/catalog/9780596527570/) ”（O'Reilly）来快速介绍该语言。

然后开始编码。

您真正面临的挑战是框架的范围，我建议从简单的控制台应用程序开始以获得最基本的知识，然后扩展到 WinForms、Web 服务和客户端或 ASP.NET 之一。请注意，Web 应用程序 (ASP.NET) 还需要 HTML 和 CSS（可能还有 JavaScript），因此可能值得留给第二次学习迭代。

# wpf - 如何解决： IE 截获 WPF 访问密钥

> ID：657734
> 
> 赞同：0
> 
> 时间：2009-03-18T10:38:56.003
> 
> 标签：wpf, internet-explorer, keyboard-shortcuts, xbap, access-keys

我们已经构建了一个 XBAP 应用程序，并在标签/按钮上提供了访问键（键盘快捷键）。但是 IE 似乎首先捕获了访问密钥，因此应用程序没有机会处理访问密钥。

是否有任何解决方法/解决方案使 XBAP 应用程序覆盖 IE 的访问密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-19T02:33:40.857

似乎有一些 IE 总是会首先捕获的访问密钥：

[从这个链接：](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/bde090af-4fa2-4cf5-89c3-b68e1484a261/)

“不幸的是，现实并不是所有的 IE 键盘快捷键都可以被截获，甚至被 .xbaps 接收。这是因为 IE 会首先破解进入其窗口的输入，无论谁拥有焦点。如果它选择不传播消息，我们对此无能为力。”

# asp.net - ASP.NET 是如何多线程的？

> ID：657735
> 
> 赞同：25
> 
> 时间：2009-03-18T10:40:03.850
> 
> 标签：asp.net, multithreading, iis

我被告知 ASP.NET 在 IIS 中默认是多线程的。这个线程是如何实现的？

服务器场是否向不同的核心发送不同的请求？

单个请求是否使用多个核心？

更重要的是，如果线程是在 IIS 中完成的，那么在 ASP.NET 代码中添加线程有什么好处吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-03-18T10:44:37.223

服务器不仅将不同的请求集中到不同的线程，而且单个请求*可以*在生命周期过程中更改线程。这称为*线程敏捷性*。我正在寻找一篇解释它的好文章...

编辑：还没有明确的文章，但[一篇博客文章](http://piers7.blogspot.com/2005/11/threadstatic-callcontext-and_02.html)解释了一些困难。

编辑：来自评论的更多链接：

*   [ASP.NET 线程切换](http://www.lhotka.net/WeBlog/PermaLink,guid,019e3c37-38ed-492e-b769-16e1a57fed0a.aspx)（博客文章）
*   [.NET 中的“异步 IO 操作”是什么？](https://stackoverflow.com/questions/585206/)（所以问题；听起来无关紧要，但不是）
*   [ASP.NET 和 System.Diagnostics 跟踪](https://stackoverflow.com/questions/536596/)（SO 问题）
*   [IIS 6 和 7 之间的线程差异](http://blogs.msdn.com/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-18T10:55:20.193

ASP.net 使用 .Net 线程池（可配置） 每个请求都由线程池中的一个线程接收，直到每个线程都已被占用。然后请求在 IIS 堆栈中排队，直到这也溢出。从那里新的请求会遇到非常丑陋的“服务器不可用”消息。

这是 ASP.net 网站常见的“多线程”故事。

有很多方法可以确保可扩展性。最明显的是性能测试和消除代码中的瓶颈。

ASP.net 可以通过将 I/O 线程用于任何 I/O 请求来真正利用多个内核。它会产生丑陋的代码，但速度从来都不是很漂亮。

这是有关如何执行此操作的[权威 MSDN MAG帖子](http://msdn.microsoft.com/en-us/magazine/cc163725.aspx)

**更新**

好吧，我可能会尝试回答您的完整问题：

> “更重要的是，如果线程是在 IIS 中完成的，那么在 ASP.Net 代码中添加线程有什么好处吗？”

简短的回答是：这取决于！如果您正在等待一个长时间运行的进程，那么最好建议您为请求客户端实现更好的体验（即带外 AJAX 调用）

如果您有多个需要为请求客户端完成的独立任务：那么您最好生成一个新进程来并行运行这些任务。

如果您的网站获得大量流量，那么您确实需要考虑实施异步模式以更好地利用您的 CPU

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-18T10:45:54.287

IIS 自动使用多个核心（尽管您可以选择关闭它）。

将线程添加到 ASP.NET 代码的好处是，您可以控制自己的应用程序的内部工作，而不必被迫依赖 IIS 为您做出所有决定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-18T10:44:21.047

通常为每个新请求生成一个单独的线程，然后操作系统进行处理器调度。除非您一次只需要处理几个请求，否则您不需要额外的线程。

# calculator - 有理数计算器

> ID：657737
> 
> 赞同：0
> 
> 时间：2009-03-18T10:40:07.453
> 
> 标签：calculator, rational-numbers

我想做一个有理数计算器，但我不知道如何忽略一些字符。例如，如果程序要计算表达式“2/9+9/3”并且答案应该是非简化形式，那么如何在输入时忽略上面表达式中的'/'？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T10:52:24.193

我认为您需要定义一个了解有理数的语法/解析器。对于您的示例输入，您希望得到一个包含如下内容的解析树：

```
 add(rational(2, 9)
       rational(9, 3)) 
```

然后，您将编写代码，了解使用有理数进行计算时使用的各种技巧，以便实现该`add`操作的代码可以检查其输入参数的[最大公约数](http://en.wikipedia.org/wiki/Greatest_common_divisor)，并将数字转换为可加数。

在这种情况下，它可能会将参数重写为`rational(2, 9)`and `rational(27, 9)`，然后进行加法运算，从而以 . 结尾`rational(29, 9)`。

您可以有一个单独的函数进行简化，可以将其简化回`3+rational(2, 9)`.

# jquery - 如何使用绑定函数来“ "，哪个是动态保存的？

> ID：657744
> 
> 赞同：1
> 
> 时间：2009-03-18T10:44:17.333
> 
> 标签：jquery, events, event-handling

`<li>`由**set_input()**函数保存，在使用**getJSON()获取****数据**后。但即使绑定功能也不起作用。任何人都可以帮助我！

 **```
$(document).ready(function()
{

$.getJSON("sample1.php?",
    function(data){
          $.each(data, function(i,j){
                testA[j.id]=j.name;
            });
            set_input("div_1","continent",testA);
    });

$("#"+div_D+" ul li").bind("click",function(){
    $("#"+div_D+" input[type='text']").val($(this).text());
})  
});

  function set_input(div_D,name_N,Array_A){

    $("#"+div_D).html("<input id="+name_N+">");
    var str="<ul>";
    $.each(Array_A,function(m,n){
        str +="<li>"+n+"</li>"
    })
    $("#"+div_D+" input[type="text"]").after(str);
  }

  This is JSON array:
[ {'id':'0','name':'Africa'},{'id':'1','name':'Americas'},{'id':'2','name':'Asia'},{'id':'3','name':'Europe'},{'id':'4','name':'Oceania'} ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T11:03:06.057

您正在尝试绑定到 DOM 中尚不存在的项目。

移动

```
$("#"+div_+" ul li").bind("click",function(){
        $("#"+div_+" input[type="text"]").val($(this).text());
}) 
```

到 set-input 函数的最后一行。即到

```
function set-input(div_,name_,Array_){
        $("#"+div_).html("<input id="+name_+">");
        var str="<ul>";
        $.each(Array_,function(m,n){
                str +="<li>"+n+"</li>"
        })
        $("#"+div_+" input[type="text"]").after(str);

    $("#"+div_+" ul li").bind("click",function(){
        $("#"+div_+" input[type="text"]").val($(this).text());
    })
} 
```

*PS你有很多错别字。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T11:06:50.383

我看到几个错误：

*   testA 从未被声明，并且将被假定为全局
*   set-input 不是有效的函数名
*   `" input[type="text"]"`应该`" input[type='text']"`
*   str 应该等于`$("ul")`（也许，不完全确定你在尝试什么）
*   您正在创建多个输入，它们都将具有相同的 id，请改用 class

如果您发布了您正在运行的 HTML，这将有所帮助

同样作为编写干净 jQuery 代码的经验法则，我尝试几乎从不在 $() 中使用连接，几乎总是有更好的方法。

# xsd - XSD 文件中的 CHM 文件

> ID：657746
> 
> 赞同：1
> 
> 时间：2009-03-18T10:44:24.557
> 
> 标签：xsd, sandcastle

是否可以从 XSD 文件创建 CHM 文件或 HTML 帮助（类似于 Sandcastle 创建的帮助）？`xs:documentation`节点中的文本包含文档。

我拥有的一个 XSD 文件的示例片段是

```
<xs:element name="Request" type="RequestType">
    <xs:annotation>
        <xs:documentation>
            <html:p>The Request message contains a number of <html:i>RequestType</html:i> elements for the server to process.</html:p>
            <html:p>A <html:i>Request</html:i> will always result in a <html:i>Response</html:i> message being returned by the server, and <html:b>must</html:b> contain an <html:b>xmlns=[<html:i>Default namespace</html:i>]</html:b> declaration.</html:p>
        </xs:documentation>
    </xs:annotation>
</xs:element>
<xs:element name="Response" type="ResponseType">
    <xs:annotation>
        <xs:documentation>The Response message contains the result of a previous <html:i>Request</html:i> message, with one <html:i>ResponseType</html:i> element for each <html:i>RequestType</html:i> sent to the server.</xs:documentation>
    </xs:annotation>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-01T15:47:23.067

[XML Schema Documenter](https://github.com/terrajobst/xsddoc)是一个[Sandcastle Help File Builder](http://shfb.codeplex.com/releases)插件，它允许您在帮助文件中集成 XML 模式的参考文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T11:08:11.847

有一个名为“xs3p”的 XSLT，可以从[xml.fiforms.org/xs3p](http://xml.fiforms.org/xs3p/)下载。

您可以使用任何 XSLT 处理器将您的 XSD 转换为 HTML - 我使用 Oleg Tkachenko 的“ [nxslt3](http://www.tkachenko.com/blog/archives/000722.html) ”。

然后，第二步是使用一些 Html 帮助构建器将几个 HTML 组合到一个 CHM 中。

马克

PS：忘了提 - 当然，这两个工具都是免费的 :-)

# project-management - 为您的项目创建支持/开发工具——您应该/应该花多少时间在上面？

> ID：657751
> 
> 赞同：0
> 
> 时间：2009-03-18T10:45:25.507
> 
> 标签：project-management, devtools

它可以像单行脚本一样简单，也可以像带有解析器和调试器的完整编程语言一样复杂。

但是创建一个节省劳动力的工具有一个众所周知的危险，它比最初的任务需要更多的劳动力来创建（除非你可以将它分摊到多个项目中）。

我担心被这个次要项目冲昏了头脑，试图使它完美，并扩展它......而主要项目却萎靡不振（例如：Knuth 花了数年时间写“计算机编程的艺术”来创建 TeX帮他排版）。

我不是在考虑标准的支持/开发工具，例如构建工具、测试系统、错误跟踪器和源代码控制，而是您为特定项目创建的工具，以支持您自己的开发，只有开发人员才会使用（即它不是项目的可交付成果）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T10:50:25.570

很容易沉浸在工具创建的乐趣中。我们试图通过查看我们需要编写的工具来管理它，花费一些体面的时间寻找我们可以使用或屈服于我们意愿的开源，然后才诉诸自己的滚动。我们也将其作为零迭代、练习、冲刺和 Scrum 来执行 - 如果一个工具需要超过一个冲刺（2 周），它就太大了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T11:12:21.477

这简单。

从编写用例（或用户故事）开始。确保包括运营和支持人员以及最终用户。

然后构建软件以交付用例。

任何“支持/开发工具”都必须是用例的一部分来证明它的合理性。

*编辑*在编码支持方面，成本/收益很简单。构建代码生成工具的成本与项目的净节省成本是多少？开发人员工具很少有价值。软件长期运行支持；它只是在很短的时间内开发。你可能会花 2 年时间来开发它；客户可能会花费 10 年或更长时间来运营它。节省几个月的开发时间通常是无关紧要的。

这里的所有都是它的。

请记住，支持和帮助台是一流的用户。支持用例必须与最终用户用例一起混合。用例根据需要进行优先级排序和构建。在某些时候，可操作性考虑必须优先于用户功能。

例如，我们刚刚完成了几个页面，这些页面仅供运营（和可能的服务台）人员使用，以帮助客户完成一项特别重要的交易。

很少需要编写新的基础架构（语言、编译器、调试器、操作系统、RDBMS、ESB 等）。

然而，编写新协议以及相关的客户端和服务器通常是必要的。并非所有事情都可以通过使用 ODBC/JDBC 数据库连接的桌面软件轻松解决。同样，并非一切都是基于 HTTP 的 Web 应用程序。

发明一种新的编程语言就是让你的爱好接管你的工作的一个例子。如果您无法使用[TIOBE 索引](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html)中的前 50 种语言中的一种，那您只是在玩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-06T15:54:39.353

感谢您的提问！回复很长，很晚，但希望值得一读。

**约定**

我将这些临时工具称为“脚手架”，类似于建筑行业，在制造业中，它们通常被称为“夹具和固定装置”，如果您更喜欢学术上听起来更响亮的名称，它是“工具和生产技术”。

**“正确的方式**

似乎可以通过简单的成本效益分析来确定是否投资脚手架的决定（正如项目管理科学所拥有的那样）：估计开发成本，与预测的收益进行比较，以及脚手架的价值是否更大比建造它的成本有一个好处：

```
COST               BENEFIT
Spec         £500  Time saved over 2 years £3000
Development £2000  Savings on training      £600
Total:      £2500                          £3600 
```

好吧，但是如果一个类似的工具已经现成可用，但没有提供完全所需的功能，因此没有提供相同水平的好处怎么办？该分析得到了一个额外的维度“购买与构建”（请注意，对于许多社区工具，它只是免费的许可成本，许多其他费用仍然适用，因此这些工具需要在“购买”类别下进行评估）：

```
 COSTS              BENEFIT
BUILD  Spec         £500  Time saved over 2 years £3000
       Development £2000  Savings on training      £600
       Total:      £2500                          £3600

BUY    License      £500  Time saved over 2 years £1000
       Setting up   £500  Savings on training      £300
       Total:      £1000                          £1300 
```

显然，现成的工具更便宜。然而，它的投资回报率 (ROI) 仅为 30%，而对于自己动手的解决方案则为 44%。

好吧，如果事情就这么简单就好了，因为在现实生活中，实际成本和收益很难提前识别和量化。您如何量化开发人员在脚手架上工作而不是项目可交付成果的机会成本？或者在脚手架中包含一些生产知识的好处，这样新的初学者就不必花时间学习手动构建或发布过程？或者任何人都能够在不到半小时的时间内一步构建任何版本的软件，而不是高级开发人员花费大部分时间来完成任务的好处？

此外，预测数据和实际数据之间不可避免地会存在一些差异，预期差异（也称为“风险”）越大，您就越不能依赖这些数据来实现。风险为我们的分析提供了第三个维度，并且考虑到一些成本和收益完全取决于整个成本收益情况，它们真的开始失控了。

**实用方法**

我相信有更简单的方法。与其尝试将脚手架视为一项资本投资并量化未来几年的成本和收益，不如尝试评估当前情况并采取更灵活的方法，即：

*   自动执行任务会比手动执行任务花费更长的时间吗？

*   一项任务能否在没有脚手架的情况下可靠地完成，并且不需要高度专业化的人才或超人的能力？

*   成本是否超过在不久的将来可以提取的收益？

如果有任何答案为“否”，那么您最有可能在脚手架上进行投资会更好。

**一些笔记**

还有一些事情要记住：

*   脚手架是高度特定的、临时的，有时甚至是一次性的。避免以与处理应用程序或组件相同的方式进行开发的陷阱，脚手架本质上更接近工作原型。请记住，编写一个涵盖相同功能的应用程序将花费大约 10 倍于脚手架脚本的资源，而编写一个通用组件将花费 10 倍于应用程序的工作量。Benji Smith 在他的创造性爆发“[我为什么讨厌框架](http://discuss.joelonsoftware.com/default.asp?joel.3.219431.12)”中对这一点做了一个精彩的说明。工具应该作为实现目标的手段，但本身并不是目标。

*   脚手架应与应用程序分开；它并不是真正的可交付成果，在大多数情况下不应替换旨在维护和配置的应用程序部分。

*   拥有定制脚手架在竞争中具有真正的优势：

    *   加快发展。

    *   避免重复工作。

    *   减少对准确性和魔法超能力的需求，这些超能力通常供不应求且非常昂贵。

    *   减少人为错误。

    *   提供结果的一致性。

    *   赋予以所需的确切方式做事的能力（与现成的工具相反）。

    *   有助于在团队中保存知识（它永远不会退出，并且总是可以进行逆向工程）。

    *   提高士气，因为开发人员不必将时间花在平凡的任务上。

*   通过粗略的非关键解决方案脚手架可以作为新工具、技术、技术、想法的试验场，这些工具后来可以成为杀手级应用程序的基础（[FogBugz](http://www.fogbugz.com)是最初开发的内部工具的一个很好的例子测试 FogCreek 创始人关于处理软件问题的正确方法的假设，因为他们坚信必须以任何 COTS 工具都不支持的精确方式完成。众所周知，后来脚手架被利用成为独立旗舰产品）。通过搭建脚手架，您可以创造知识产权。

*   [Test Driven Development](https://stackoverflow.com/questions/tagged/tdd) (TDD) is a notable and practical way of building scaffolding for testing. TDD provides some excellent guidelines on “when enough is enough” that can be extended on other bespoke tools.

# sql-server-2005 - 如何从具有特定行号的表中删除或选择行？

> ID：657754
> 
> 赞同：2
> 
> 时间：2009-03-18T10:48:35.670
> 
> 标签：sql-server-2005, tsql, row-number

我有一个关于 Microsoft SQL Server 2005 的问题。如何从具有特定行号的表中删除或选择行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T10:52:34.193

编辑：修改了代码，使其更符合 OP 的意图

```
Declare @RowNum as INT
SET @RowNum = 15 ---Just for example

WITH OrdersRN AS
(
    SELECT ROW_NUMBER() OVER(ORDER BY OrderDate, OrderID) AS RowNum
          ,OrderID
          ,OrderDate
          ,CustomerID
          ,EmployeeID
      FROM dbo.Orders
)

SELECT * 
  FROM OrdersRN
 WHERE RowNum = @RowNum
 ORDER BY OrderDate
         ,OrderID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T10:53:31.163

检查[此](http://blogs.conchango.com/jamiethomson/archive/2005/02/16/1025.aspx)网址。从 SQL Server 2005 开始，您正在寻找一个名为“row_number()”的函数。

# eclipse - 使用片段修补/合并插件中的 plugin.properties 文件

> ID：657756
> 
> 赞同：2
> 
> 时间：2009-03-18T10:48:43.267
> 
> 标签：eclipse, plugins, merge, patch, fragment

在我的插件 de.support.help 中是 plugin.properties 文件。这些属性文件包括首选项页面的字符串。

我想为不同的客户使用这个插件，但客户名称在属性文件中。

我想通过使用 Eclipse 片段机制来修补属性文件。就我现在而言，片段插件可以在运行时修补对应的插件。

我在插件 de.support.help 中确实有文件 plugin.properties，其中包括该行

```
plugin.name = Copyright XYZ 
```

而且我确实有 fragemt de.support.help.fragment ，其中包括文件 plugin.properties 与行

```
plugin.name = Copyright ABC 
```

我希望在运行时显示字符串“Copyright ABC”，但事实并非如此。很久以前我用 java 类测试过同样的东西，我记得他正在工作。片段中的 java 代码被放置到原始插件中。

你有什么想法来处理这个吗？还是我误解了片段机制？

谢谢

**编辑：**

当我从 de.support.help 插件中删除 plugin.properties 文件时，它按预期工作。片段文件被复制到插件目录并在运行时使用。

还是我必须修补 somce eclipse 类[Can_fragments_be_used_to_patch_a_plug](http://wiki.eclipse.org/FAQ_Can_fragments_be_used_to_patch_a_plug-in%3F)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T11:43:14.477

根据[**How to Internationalize your Eclipse Plug-In**](http://www.eclipse.org/articles/Article-Internationalization/how2I18n.html)文章

> 插件片段为其目标插件提供附加功能。
> 在运行时，这些插件贡献与所有依赖的片段一起合并。
> 
> 这些贡献可以包括代码贡献和与插件相关联的资源贡献，例如属性和 HTML 文件。
> 
> 换句话说，插件可以通过插件的类加载器访问片段的内容。
> 
> Eclipse 平台以一种方式合并插件片段，片段中的运行时元素增强了原始目标插件。
> 目标插件不会以任何方式移动、移除或修改。
> 
> 由于片段的资源由类加载器定位，因此插件开发人员无需知道资源是从插件的 JAR 文件还是从其片段的 JAR 文件之一加载的。

* * *

我怀疑 classLoader在片段之前首先`plugin.name`在`de.support.help`插件中检测。`de.support.help.fragment`

在这一点上，我不确定它是否可以完成，因为之前已经尝试过（对于[Eclipse CheckStyle 插件](http://sourceforge.net/forum/forum.php?thread_id=2206671&forum_id=274377)），但没有取得多大成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-28T09:14:48.023

我实施的解决方案就像

首先查找特殊片段属性文件，然后查找默认属性文件。

代码是（捆绑名称已更改）

```
public final class FrameworkMessages {
    private static final String BUNDLE_NAME = "de.rts.messages"; //$NON-NLS-1$

    private static final ResourceBundle RESOURCE_BUNDLE = ResourceBundle.getBundle(BUNDLE_NAME);

    private static final String BUNDLE_FRAGMENT_NAME = "de.rts.fragment"; //$NON-NLS-1$

    private FrameworkMessages() {
    }

    public static String getString(String key) {
        try {
            return ResourceBundle.getBundle(BUNDLE_FRAGMENT_NAME).getString(key);
        } catch (MissingResourceException e) {
            // Use messages in this plugin when no external fragment files can found
        }

        try {
            return RESOURCE_BUNDLE.getString(key);
        } catch (MissingResourceException e) {
            return '!' + key + '!';
        }
    }

    public static String getString(String pKey, Object[] pArgument) {
        try {
            return MessageFormat.format(RESOURCE_BUNDLE.getString(pKey), pArgument);
        } catch (MissingResourceException e) {
            return '!' + pKey + '!';
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-28T09:27:02.137

您不能用片段替换文件的内容 - 只能添加其他文件。这适用于类、属性文件、图像……

有几种解决这个问题的标准方法：

*   您可以使用此信息和其他客户特定信息添加扩展点。
*   您可以先查找一个特殊文件，然后再返回到一般文件 - 正如 Markus 所做的那样。
*   您可以对具有相关信息的插件有一个可选的依赖项。

我更喜欢最后一个解决方案，因为这也允许在替代算法和其他不属于 .properties 文件的东西之间进行选择......

# c++ - 英特尔 TBB 的可扩展分配器如何工作？

> ID：657783
> 
> 赞同：30
> 
> 时间：2009-03-18T10:58:35.397
> 
> 标签：c++, multithreading, stl, malloc, tbb

`tbb::scalable_allocator`Intel Threading Building Blocks 中的实际作用是什么？

它当然可以有效。我刚刚用它来减少 25% 的应用程序执行时间（并看到 CPU 利用率在 4 核系统上从 ~200% 增加到 350% `std::vector<T>`）`std::vector<T,tbb::scalable_allocator<T> >`。另一方面，在另一个应用程序中，我看到它使已经很大的内存消耗翻了一番，并将东西发送到交换城市。

[英特尔自己的文档并没有提供太多内容（例如，本常见问题解答](http://www.threadingbuildingblocks.org/wiki/index.php?title=Using_TBB)末尾的一小部分 ）。在我自己深入研究它的代码之前，谁能告诉我它使用了什么技巧？

**更新**：第一次使用 TBB 3.0，并从可扩展分配器中看到了我最好的加速。将单个更改`vector<int>`为`vector<int,scalable_allocator<int> >`减少某些东西的运行时间从 85 秒到 35 秒（Debian Lenny，Core2，TBB 3.0 来自测试）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-03-19T06:22:33.287

有一篇关于分配器的好论文：[The Foundations for Scalable Multi-core Software in Intel Threading Building Blocks](http://www.intel.com/content/dam/www/public/us/en/documents/research/2007-vol11-iss-4-intel-technology-journal.pdf)

我有限的经验：我用 tbb::scalable_allocator 为我的 AI 应用程序重载了全局 new/delete。但时间分布几乎没有变化。我没有比较内存使用情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-05T15:03:13.077

您提到的解决方案针对英特尔 CPU 进行了优化。它结合了特定的 CPU 机制来提高性能。

前段时间我发现了另一个非常有用的解决方案：[Fast C++11 allocator for STL containers](https://github.com/moya-lang/Allocator)。它略微加快了 VS2017 (~5x) 和 GCC (~7x) 上的 STL 容器。它使用内存池进行元素分配，这使得它对所有平台都非常有效。

# c# - 从 C# 运行 Oracle 存储过程

> ID：657787
> 
> 赞同：3
> 
> 时间：2009-03-18T11:00:02.910
> 
> 标签：c#, .net, oracle, ora-06550

一个初学者问题：我在 Oracle 数据库中有一个存储过程（只是一个过程，没有任何包）：

```
CREATE OR REPLACE procedure FII_DBO.CLEAR_UNIT_TEST_PRODUCT
IS
BEGIN
 ...
END CLEAR_UNIT_TEST_PRODUCT; 
```

它在 TOAD 中运行良好。但是，当我尝试从 C# 运行它时，它会抱怨：

```
System.Data.OracleClient.OracleException: ORA-06550: line 1, column 7:
PLS-00201: identifier 'CLEAR_UNIT_TEST_PRODUCT' must be declared
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

相关C#代码：

```
Command = new OracleCommand();
Command.CommandText = procedureName;
Command.CommandType = CommandType.StoredProcedure;
Command.Connection = connection;
Command.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T11:12:44.770

检查与您的 .NET 应用程序连接的 Oracle 用户是否具有执行存储过程的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T11:15:21.970

找到了，错误信息有点误导。我以不同的用户身份执行它，他没有适当的访问权限。这成功了：

```
grant execute on FII_DBO.CLEAR_UNIT_TEST_PRODUCT to FII_USER; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T11:07:06.327

您是否在 procedureName 变量中包含包名称？

即设置procedureName为“ `FII_DBO.CLEAR_UNIT_TEST_PRODUCT`”，而不仅仅是“ `CLEAR_UNIT_TEST_PRODUCT`”？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T11:11:36.580

您的过程似乎是在另一个模式中创建的。

问题

```
ALTER SESSION SET CURRENT_SCHEMA = FII_DBO 
```

连接后。

我记得提供者在调用存储过程方面存在一些错误。

设置`CommandText`为

```
BEGIN FII_DBO.CLEAR_UNIT_TEST_PRODUCT(); END; 
```

并`CommandType`_`Text`

您也可以尝试更改存储过程名称的大小写，例如：

```
fii_dbo.clear_unit_test_product 
```

，我记得案件也很重要。

# file-format - 有哪些免费软件/牙线工具可以帮助将数据加载到 SPSS 中？

> ID：657789
> 
> 赞同：0
> 
> 时间：2009-03-18T11:01:09.197
> 
> 标签：file-format, spss

我正在寻找一种用于生成 SPSS 格式数据文件以加载到 SPSS 中的解决方案。我能找到的少数产品都是商业的。

有没有人使用开源、免费软件或本土解决方案生成 SPSS 格式的数据文件？

我什至不确定文件格式是否“开放”。任何提示都表示赞赏（任何语言都可以，尽管首选 java、perl 或 ruby​​）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T11:17:09.907

你到底想生产什么？数据文件 (sav)、语法文件 (sps) 或输出文件 (spv)。SPSS 是一个高度商业化的产品，我非常认为与 SPSS 相关的文件格式是专有的。

Python 有一个 SPSS API。所以也许你应该研究那个。

[http://www.spss.com/devcentral/](http://www.spss.com/devcentral/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-11T01:14:57.533

为了结束这个问题的循环，我避免了深入研究专有数据格式的需要，方法是编写一个语法文件来读取我从系统导出的标准逗号分隔文本文件，该文件是我的数据源。

语法文件本身使用专有的“语言”来描述加载过程。不幸的是，SPSS 的开源替代品（例如 PSPP）不支持复制此解决方案所需的全部语法语言。

# c++ - C 中的文件流和 C++ 中的 iostream 有什么区别？

> ID：657791
> 
> 赞同：3
> 
> 时间：2009-03-18T11:01:40.600
> 
> 标签：c++, c, programming-languages, stream

C 中的 File (File* pointer)stream 和 C++ 中的 iostream 有什么区别？

为什么它们都被称为流，它们有共同点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T11:05:34.707

它们都处理文件，“流”只是一个非常笼统的术语，用于表示来自某些来源的数据。

区别主要是C++的iostream对象是类/对象，C文件数据是通过定义的f*()函数来访问的。

所以基本上，相同的任务，不同的界面风格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-03-18T11:12:16.487

它们通常都是缓冲的，这意味着您在流上执行的 I/O 与在底层系统对象（例如文件）上执行的 I/O 不匹配 1:1。

例如`fread()`，读取 2 个字节的调用可能会尝试从文件中读取 1,024 个字节，如果您接近文件末尾，则可能只会返回 57。差异都被流实现隐藏了，它将返回 2 个字节并记住它的缓冲区中还有 55 个字节。因此，它将满足下一个读取请求，而根本不会达到文件级别。

编辑：值得指出的是，两种语言（`stderr`和`cerr`，分别）的默认错误流都没有缓冲。这是一个巨大的胜利，因为它增加了及时输出的机会。当通过在代码中添加语句来追踪奇怪的崩溃错误时，`printf()`出于这个特殊原因，打印到错误流是一个非常好的主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T11:12:51.163

两者都是 OS I/O 子系统的不同接口。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T13:20:25.477

C++ 流可通过两种 C 文件无法扩展的方式进行扩展：

*   您可以创建自己的流类型，所有可流式处理的对象都会自动使用它。
*   如果为一个类定义了流操作符，则该类的任何对象都可以写入任何流，也可以从任何流中读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-25T07:06:39.620

比较 C 和 Java 之间的文件流

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-18T11:51:39.840

区分他们的熟悉程度比区分他们更容易，因为他们只有一个熟悉程度：他们都有一个在编程世界中很常见的术语（流）。

流通常用于指代未格式化的原始数据，它们只是一大块二进制字节。想想复制到新分配内存的文件内容，在它们被解析之前（即它们被复制后的那一刻）它们对你来说只是一大块二进制字节。所以你只有像 seek() 这样的方法来访问它们，它基于字节工作。

将其与您可以 ReadLine()、WriteLine() 的文本文件进行比较，它们在预格式化实体中工作（在这种情况下称为行）。你会明白的。

# java - 有没有一种简单的方法可以在 java 中计算和格式化时间/日期间隔？

> ID：657792
> 
> 赞同：7
> 
> 时间：2009-03-18T11:01:49.023
> 
> 标签：java, datetime, date, time, intervals

我熟悉 JDK 中的日期和时间类及其相关的格式化方法。我可能是盲人，但我找不到一组等效的类来处理时间间隔。例如，我想显示给定长毫秒值的天数。我意识到进行这些转换的方法非常简单，但是当您考虑国际化和本地化支持时，这变得不那么简单了。

我很惊讶 JDK 缺少对间隔处理的支持。但是，[Postgresql](http://www.postgresql.org/docs/8.1/interactive/functions-datetime.html)等数据库支持它。

基本上我在 JDK（如果我太盲目看不到它）或第三方库中寻找的是以下功能：

*   时间计算方法。例如毫秒到数周或秒到纳秒。尽管这些操作的数学计算很简单，但对我来说，拥有一个 API 似乎更能自我记录。
*   根据传递的区域设置格式化的时间间隔格式化函数，如 DateFormat 工作。例如，在 EN_US 中，我假设 10 天是“10 天”，而在日语中，我希望返回“10 日”。

有什么东西吗？或者这是一个新的开源项目的候选人？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-03-18T11:05:50.557

你试过[乔达时间](http://joda-time.sourceforge.net/)吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T11:05:00.170

看看[http://commons.apache.org/](http://commons.apache.org/)和那里的 DateUtils 类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-28T08:20:27.137

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T11:09:35.307

不幸的是，标准库中没有这样的东西，但正如 Tobiask 指出的那样，Apache Commons 有一个有用的工具。

DurationFormatUtils 有一些预定义的格式（Hour:Minutes:Second, ISO）并允许您指定自己的格式。

# html - 如何从 textarea 中删除自动换行？

> ID：657795
> 
> 赞同：166
> 
> 时间：2009-03-18T11:03:06.930
> 
> 标签：html, textarea, word-wrap

当文本溢出时，我的简单文本区域不显示水平条。它为新行换行。那么如何在文本溢出时删除自动换行并显示水平条？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-11-19T00:08:22.987

```
textarea {
  white-space: pre;
  overflow-wrap: normal;
  overflow-x: scroll;
} 
```

`white-space: nowrap`如果您不关心空格，也可以使用，但是如果您正在使用代码（或缩进的段落或任何可能故意有多个空格的内容），您当然不希望这样做......所以我更喜欢`pre`.

`overflow-wrap: normal`（`word-wrap`在较旧的浏览器中）是需要的，以防某些父母更改了该设置；即使`pre`设置它也可能导致包装。

还 - 与当前接受的答案相反 - textareas**通常**默认换行。`pre-wrap`似乎是我浏览器的默认设置。

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2009-03-18T11:10:14.010

默认情况下，Textareas 不应换行，但您可以设置 wrap="soft" 以显式禁用换行：

```
<textarea name="nowrap" cols="30" rows="3" wrap="soft"></textarea> 
```

~~编辑：“包装”属性不受官方支持。我是从[德语 SELFHTML 页面（](http://de.selfhtml.org/navigation/suche/index.htm?Suchanfrage=textarea)[这里](http://www.idocs.com/tags/forms/_TEXTAREA_WRAP.html)有英文来源）得到的，上面写着 IE 4.0 和 Netscape 2.0 支持它。我还在 FF 3.0.7 中对其进行了测试，它按预期工作。~~这里的情况发生了变化，SELFHTML 现在是一个 wiki，而英文源链接已经失效。

EDIT2：如果您想确保每个浏览器都支持它，您可以使用 CSS 来更改换行行为：

> 使用级联样式表 (CSS)，您可以使用 `white-space: nowrap; overflow: auto;`. 因此，wrap 属性可以被认为是过时的。

从[这里](http://www.cs.tut.fi/~jkorpela/forms/textarea.html)（似乎是一个很好的页面，包含有关 textarea 的信息）。

EDIT3：我不确定它何时更改（根据评论，一定是在 2014 年左右），但`wrap`现在是官方 HTML5 属性，请参阅[w3schools](http://www.w3schools.com/tags/att_textarea_wrap.asp)。更改了答案以匹配此。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-03-18T13:13:00.830

以下基于 CSS 的解决方案适用于我：

```
<html>
 <head>
  <style type='text/css'>
   textarea {
    white-space: nowrap;
    overflow:    scroll;
    overflow-y:  hidden;
    overflow-x:  scroll;
    overflow:    -moz-scrollbars-horizontal;
   }
  </style>
 </head>
 <body>
  <form>
   <textarea>This is a long line of text for testing purposes...</textarea>
  </form>
 </body>
</html> 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2011-11-15T12:59:42.713

我找到了一种让所有这些同时工作的文本区域的方法：

*   带水平滚动条
*   支持多行文本
*   文字不换行

它适用于：

*   铬 15.0.874.120
*   火狐 7.0.1
*   歌剧 11.52 (1100)
*   Safari 5.1 (7534.50)
*   即 8.0.6001.18702

让我解释一下我是如何做到这一点的：我正在使用 Chrome 检查器集成工具，我看到了 CSS 样式的值，所以我尝试这些值，而不是普通的值......反复试验直到我把它减少到最低限度，在这里适合任何想要它的人。

在 CSS 部分，我只在 Chrome、Firefox、Opera 和 Safari 上使用了这个：

```
textarea {
  white-space:nowrap;
  overflow:scroll;
} 
```

在 CSS 部分中，我只在 IE 中使用了这个：

```
textarea {
  overflow:scroll;
} 
```

这有点棘手，但有 CSS。

像这样的 (x)HTML 标签：

```
<textarea id="myTextarea" rows="10" cols="15"></textarea> 
```

在本节的末尾有 `<head>`一个这样的 JavaScript：

```
 window.onload=function(){
   document.getElementById("myTextarea").wrap='off';
 } 
```

JavaScript 用于使 W3C 验证器通过 XHTML 1.1 Strict，因为 wrap 属性不是官方的，因此不能直接作为 (x)HTML 标记，但大多数浏览器都会处理它，因此在加载页面后它会设置该属性。

希望这可以在更多浏览器和版本上进行测试，并帮助某人改进它并使其完全跨浏览器适用于所有版本。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-04-06T15:26:05.553

这个问题似乎是禁用`textarea`换行最流行的问题。但是，截至 2017 年 4 月，我发现**IE 11** (11.0.9600)**不会**使用上述任何解决方案禁用自动换行。

*唯一*适用于 IE 11的解决方案是`wrap="off"`. `wrap="soft"`和/或各种 CSS 属性，例如`white-space: pre`更改 IE 11 选择包装的位置，但它仍会包装在某处。请注意，我已经在有或没有**Compatibility View**的情况下对此进行了测试。IE 11 与 HTML 5 相当兼容，但在这种情况下不兼容。

因此，为了实现保留其空白并离开右侧的行，我正在使用：

```
<textarea style="white-space: pre; overflow: scroll;" wrap="off"> 
```

幸运的是，这似乎也适用于 Chrome 和 Firefox。我不是为 pre-HTML 5 的使用辩护`wrap="off"`，只是说 IE 11 似乎需要它。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-08-28T19:38:19.793

如果您可以使用 JavaScript，那么以下可能是当今最便携的选项（经过测试的 Firefox 31、Chrome 36）：

*   一个 div`contenteditable="true"`
*   Partly 建议的样式
*   单击按钮时提交 JavaScript 表单：[如何使用 javascript 提交表单？](https://stackoverflow.com/questions/9855656/how-to-submit-a-form-using-javascript)

[http://jsfiddle.net/cirosantilli/eaxgesoq/](http://jsfiddle.net/cirosantilli/eaxgesoq/)

```
<style>
  div#editor {
    white-space: pre;
    word-wrap: normal;
    overflow-x: scroll;
  }
<style>
<div contenteditable="true"></div> 
```

似乎没有标准的、可移植的 CSS 解决方案：

*   `wrap`属性不标准

*   `white-space: pre;`不适用于 Firefox 31 的`textarea`. [小提琴](http://jsfiddle.net/cirosantilli/t8j1kcya/)，[打开功能请求](https://bugzilla.mozilla.org/show_bug.cgi?id=82711)。

另外，如果你会使用 Javascript，你还不如使用 ACE 编辑器：

[http://jsfiddle.net/cirosantilli/bL9vr8o8/](http://jsfiddle.net/cirosantilli/bL9vr8o8/)

```
<script src="http://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
<div id="editor">content</div>
<script>
  var editor = ace.edit('editor')
  editor.renderer.setShowGutter(false)
</script> 
```

可能与 ACE 一起使用，因为它不使用未指定`textarea`/不连贯实现的 any，但不确定它是否使用`contenteditable`.

# java - Oracle 中的 java 类存储在哪里？

> ID：657803
> 
> 赞同：8
> 
> 时间：2009-03-18T11:06:41.320
> 
> 标签：java, oracle, oracleinternals

存储在 oracle 数据库中的已加载 java 类的 java 字节码在哪里？具体来说，我可以使用视图或表来获取 Oracle 中 Java 类模式对象的原始字节吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-03-18T11:50:29.483

如果您使用 CREATE JAVA SOURCE 命令将 Java 源加载到 Oracle 数据库中，那么您可以转到数据字典视图 USER_SOURCE 并找到您的 Java 源。

如果您需要显示它或其他内容，您可以查看 DBMS_JAVA.EXPORT_SOURCE，它将源代码放入您可以操作的 PL/SQL 结构中。

通常，如果您只想列出所有与 Java 相关的存储对象，您可以执行以下操作：

```
SELECT
  object_name, 
  object_type, 
  status, 
  timestamp
FROM 
  user_objects
WHERE 
  (object_name NOT LIKE 'SYS_%' AND 
   object_name NOT LIKE 'CREATE$%' AND 
   object_name NOT LIKE 'JAVA$%' AND 
   object_name NOT LIKE 'LOADLOB%') AND
  object_type LIKE 'JAVA %'
ORDER BY
  object_type, 
  object_name; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-10-26T06:27:45.300

`IDL_UB1$`存储在表中的 Java 字节码：

```
select o.NAME, i.PIECE 
from obj$ o, IDL_UB1$ i 
where o.type# = 29 
    and o.obj# = i.obj# 
```

# flash - Flash 联系表的问题

> ID：657806
> 
> 赞同：0
> 
> 时间：2009-03-18T11:07:58.757
> 
> 标签：flash, actionscript-3, textinput

在 Flash (AS3) 中，我创建了一个联系表单，其中我采用了一个“提交按钮”、一个“重置按钮”、四个输入文本字段“名称、电子邮件、主题、消息”，实例名称为“contact_name、contact_email、contact_subject、联系信息”

我对 setFocus 和 killFocus 感到非常困惑。

在 AS3 中，我给出了

```
contact_name.text = "Name";
contact_email.text= "Email";
contact_subject.text = "Sub";
contact_message.text = "Message"; 
```

现在，当我发布此文件时，默认情况下输入文本字段显示文本“名称、电子邮件、子、消息”

现在我的要求是，如果我单击名称字段，那么文本“名称”应该消失，以便我可以输入我的姓名，然后我单击电子邮件字段，文本“电子邮件”应该同时消失，我没有想丢失在名称字段中输入的我的姓名。

如果我单击主题文本字段，文本“Sub”应该会消失，但不会丢失我输入的名称和电子邮件数据。

如果我单击消息文本字段，文本“消息”应该会消失，但我不想丢失在剩余文本字段中输入的数据。

请参阅下面的操作脚本。请帮助我找到解决方案。

> *动作脚本：*

```
contact_name.text ="Name";
contact_email.text ="Email";
contact_subject.text = "Sub";
contact_message.text ="Message";
message_status.text = "";

send_button.addEventListener(MouseEvent.CLICK, submit);
reset_button.addEventListener(MouseEvent.CLICK, reset);

var timer:Timer;
var var_load:URLLoader = new URLLoader;
var URL_request:URLRequest = new URLRequest( "send_email.php" );
URL_request.method = URLRequestMethod.POST;

function submit(e:MouseEvent):void
{
if( contact_name.text == "Name" || contact_email.text == "Email" ||
    contact_subject.text == "Sub" || contact_message.text == "Message" )
{
    message_status.text = "Please fill up all text fields.";
}
else if( !validate_email(contact_email.text) )
{
    message_status.text = "Please enter the valid email address.";
}
else
{
    message_status.text = "sending...";

    var email_data:String = "name=" + contact_name.text
                   + "&email=" + contact_email.text
                   + "&subject=" + contact_subject.text
                   + "&message=" + contact_message.text;

    var URL_vars:URLVariables = new URLVariables(email_data);
    URL_vars.dataFormat = URLLoaderDataFormat.TEXT;

    URL_request.data = URL_vars;
    var_load.load( URL_request );
    var_load.addEventListener(Event.COMPLETE, receive_response );
}
}

function reset(e:MouseEvent):void
{
contact_name.text ="Name";
    contact_email.text ="Email";
    contact_subject.text = "Sub";
    contact_message.text ="Message";
    message_status.text = "";
}

function validate_email(s:String):Boolean 
{
var p:RegExp = /(\w|[_.\-])+@((\w|-)+\.)+\w{2,4}+/;
var r:Object = p.exec(s);
if( r == null ) 
{
    return false;
}
return true;
}

function receive_response(e:Event):void
{
var loader:URLLoader = URLLoader(e.target);
    var email_status = new URLVariables(loader.data).success;

if( email_status == "yes" )
{
    message_status.text = "Success! Your message was sent.";
    timer = new Timer(500);
    timer.addEventListener(TimerEvent.TIMER, on_timer);
    timer.start();
}
else
{
    message_status.text = "Failed! Your message cannot sent.";
}
}

function on_timer(te:TimerEvent):void 
{
if( timer.currentCount >= 10 )
{
    contact_name.text = contact_email.text = contact_subject.text = 
    contact_message.text = message_status.text = "";
    timer.removeEventListener(TimerEvent.TIMER, on_timer);
}
} 
```

谢谢--vamsi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-08T17:33:59.717

我会使用 focusIn 事件而不是单击，因为在您的文本字段中切换不会清空它们...此外，当您从文本字段中将 focusOut 留空时，它应该重新填充其标签文本...

```
var defaultText="Name";
addEventListener(FocusEvent.FOCUS_IN, function() {
   if(text==defaultText) {
      text="";
   }
}
addEventListener(FocusEvent.FOCUS_OUT, function() {
   if(text=="") {
      text=defaultText;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T12:36:55.923

假设您`contact_name`是一个`Button`，您可以添加一个事件侦听器，`text`当用户单击此字段时重置该属性。就像是：

```
contact_name.addEventListener(
             MouseEvent.CLICK, 
             function(e:Event):void { 
                 contact_name.text = ''; 
             }
); 
```

# asp.net - 如何篡改cookie

> ID：657808
> 
> 赞同：0
> 
> 时间：2009-03-18T11:08:56.463
> 
> 标签：asp.net, cookies

我只是想知道如何篡改cookie（仅出于知识目的:-)）。我创建了一个应用程序并试图篡改 cookie，但它不起作用。

**代码：**

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (Request.Cookies["myCookie"] != null)
    {
        Response.Redirect("Default2.aspx");

    }
    else
    {

        HttpCookie storeData = new HttpCookie("myCookie");
        storeData["name"] = "Arin";
        storeData["color"] = "Blue";
        storeData.Expires = DateTime.Now.AddDays(1);
        Response.Cookies.Add(storeData);
        Response.Redirect("Default2.aspx");
    }
} 
```

**代码（默认2.aspx）：**

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpCookie storeData = Request.Cookies["myCookie"];
    string myString= storeData["name"];
    TextBox1.Text = myString;
} 
```

**保存的 Cookie 内容：**

```
myCookie
name=Arin&color=Blue
localhost/
1024
1178851840
29993085
467738336
29992884
* 
```

当我运行代码时，它正在创建 cookie。此外，下次检查 cookie 是否存在时：如果存在，则重定向到 default2.aspx 页面，并且我在文本框中获取名称。

但是当我篡改 cookie 时——比如说当我将 Arin 更改为 Arinzzl 时——它没有得到反映。应用程序正在考虑不存在 cookie 名称“myCookie”并正在创建一个新的 cookie。因此我没有在 Default2.aspx 中得到 Arinzzz。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T11:12:27.327

如果您只是想玩 cookie，请使用 Firefox 上的“Add N Edit Cookies”插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T11:33:41.007

您实际上最终将 2 个 cookie 保存到您的硬盘驱动器中吗？如果是这样，您应该能够比较 2，看看有什么不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T11:36:37.427

在两端设置断点，看看发生了什么，并让我们知道你是如何篡改 cookie 的。我按照你说的写了一个简单的例子，用Firefox中的Web Developer插件（查看Cookies -> Edit Cookie）篡改了cookie，然后重新加载页面，篡改的数据就显示出来了。

这个问题听起来最好通过更多的调试来回答。我猜您正在使用一种工具/方法来篡改使其无效的 cookie，或者您有一些程序逻辑在您不期望的情况下重新创建 cookie。

此外，您可以使用另一个名为 Live HTTP Headers 的 firefox 插件查看双向（请求和响应）发送的 cookie 的内容，以查看是否存在未将其发送回服务器的问题。该插件将向您显示与请求和响应一起发送的所有标头，包括所有 cookie。

[网页开发者插件](https://addons.mozilla.org/en-US/firefox/addon/60)

[实时 HTTP 标头插件](https://addons.mozilla.org/en-US/firefox/addon/3829)

# apache-flex - 使用框架 RSL 减少 SWF 文件大小

> ID：657817
> 
> 赞同：1
> 
> 时间：2009-03-18T11:12:15.720
> 
> 标签：apache-flex, rsls

我正在使用 RSL 框架来减少我的 SWF 文件大小。我正在使用 Flex Builder 来编译 SWF。

当我在我的 SWF 中使用 RSL 进行编译时，我注意到大小显着减小。然而，创建的框架 SWF 相当大。我如何处理新创建的框架 SWF？我是否将它放在我的服务器上并让 Flash 播放器将其拾取、缓存，然后坐下来享受改进的性能，还是还有其他步骤？

我不想让我的自定义 swf 加上框架 swf 在每次应用程序受到打击时都被加载（而不是从缓存中）的额外开销。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-03-18T11:23:18.817

我假设您已编译您的应用程序以将 Flex 框架用作 RSL（详见[此处](http://livedocs.adobe.com/flex/3/html/help.html?content=rsl_09.html)）。

框架 RSL 通常由 Flash Player（而不是浏览器 - 与普通用户 RSL 一样）缓存。

当您加载应用程序时，Flash Player 会检查框架 RSL 是否存在于其缓存中，如果不存在，则加载它然后运行您的应用程序。

> 我如何处理新创建的框架 swf？我是否将它放在我的服务器上并让 Flash 播放器将其拾取、缓存，然后坐下来享受改进后的性能，还是还有其他步骤？

从文档中：

> 部署应用程序时，必须确保将 SWZ 文件部署到您在命令行中指定的位置。您还必须确保 crossdomain.xml 文件位于 RSL 的域中。为确保您的 Flex 应用程序可以支持旧版本的 Flash Player，您还应该部署未签名的框架 RSL SWF 文件（除了已签名的 SWZ 文件），并将该文件指定为故障转移 RSL。

通读一遍页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-03T12:43:41.197

除了 RSL swf 文件大小之外，还可以通过使用模块来减少文件大小，避免嵌入对象等。您可以从本文中获得更多详细信息链接在这里

[http://askmeflash.com/article_m.php?p=article&id=9](http://askmeflash.com/article_m.php?p=article&id=9)

# c# - 下载前检查下载大小

> ID：657826
> 
> 赞同：16
> 
> 时间：2009-03-18T11:14:15.107
> 
> 标签：c#, .net, asp.net

我需要一些方法来检查下载的大小，而不必下载整个文件。我正在使用 C# 和 System.Net.WebClient 进行下载。检查需要在 asp.net Web 服务中运行。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-03-18T11:23:46.723

使用 HTTP 方法**HEAD**检索**Content-Length:**标头。

```
HEAD / HTTP/1.1
Host: www.example.com

HTTP/1.1 200 OK
Date: Wed, 18 Mar 2009 11:21:51 GMT
Server: Apache/2.2.3 (CentOS)
Last-Modified: Tue, 15 Nov 2005 13:24:10 GMT
ETag: "b80f4-1b6-80bfd280"
Accept-Ranges: bytes
Content-Length: 438 
Connection: close
Content-Type: text/html; charset=UTF-8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T11:17:46.830

发出 HEAD（而不是 GET 或 POST）请求以获取响应标头，这应该包括带有您需要的信息的 content-length 标头。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-23T06:42:59.610

您还可以使用 HTTP RANGE 标头仅下载您想要的内容。

如果远程服务器是 HTTP 1.1 并且正确支持 RANGE 标头，那么构建一个支持在远程 HTTP 资源上查找和读取的 HttpRangeStream 将非常简单。

# ajax - scriptaculous ajax 自动完成空响应

> ID：657839
> 
> 赞同：3
> 
> 时间：2009-03-18T11:20:37.900
> 
> 标签：ajax, autocomplete, prototypejs, scriptaculous

我正在使用效果很好的 ajax-autocompleter。我的目标是在现有项目的编辑功能或未找到项目的创建功能之间重定向。

我为每个 li 插入一个特定的 id，因此我可以将它用于带有 afterUpdateElement 选项的编辑功能。

但是如果没有找到结果，则列表是空的，我找不到任何方法告诉 afterUpdateElement 脚本没有找到结果。实际上，没有调用 afterUpdateElement，因为没有选择。所以 afterUpdateElement 没用……</p>

我正在考虑测试 ajax 请求发送的全部值。但是我没有找到如何抓住它......</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-19T13:34:48.663

所以，我终于找到了一种方法来检查结果是否被选中（在 Gwyohm 的巨大帮助下）：

1.  首先，我们设置了一个隐藏字段，它将记录是否选择了结果（真/假）。默认情况下，它设置为 FALSE。
2.  afterUpdateElement 仅在选择后使用。所以我们使用这个 aferUpdateElement 将我们的隐藏字段变为 TRUE。
3.  如果用户更改了搜索字段值，对于未选择的全新值，不使用 afterUpdateElement，我们的隐藏值仍然设置为 TRUE。该问题的解决方案是聆听按下的键。如果按下某个键，则隐藏字段将返回 FALSE。这适用于所有键，甚至是实际用于进行选择的 Enter 键。所以这是一个我们应该从按键监听器中移除的异常。所以，最后让我们看看我们的额外功能：

    > $(id-of-text-field).observe("keyup", function(e) {
    > 
    > > if (window.event) keycode = window.event.keyCode;
    > > else if (e) keycode = e.which;
    > > 如果（键码！= 13）{
    > > 
    > > > $(id-of-hidden-field).value="FALSE";
    > > 
    > > }
    > 
    > }.bindAsEventListener($(id-of-text-field)));

然后我们可以使用隐藏字段来了解是否应该编辑或创建文本值......

注意：使用此解决方案，如果用户键入与现有值匹配的值，但未选择它，它将被视为新值，如果将此值添加到数据库中，则会导致重复条目。（但这对我来说没问题，因为我正在处理名字，两个不同的人可能有相同的名字......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-19T13:38:35.067

您可以尝试像这样覆盖 updateChoices 方法：

```
Ajax.Autocompleter.prototype.updateChoices =  function (choices) {
if(!this.changed && this.hasFocus) {

      if(!choices) {
        //do your "new item" thing here
      }
      else {
         this.update.innerHTML = choices;
         Element.cleanWhitespace(this.update);
         Element.cleanWhitespace(this.update.down());

         if(this.update.firstChild && this.update.down().childNodes) {
           this.entryCount =
             this.update.down().childNodes.length;
           for (var i = 0; i < this.entryCount; i++) {
             var entry = this.getEntry(i);
             entry.autocompleteIndex = i;
             this.addObservers(entry);
           }
         } else {
           this.entryCount = 0;
         }

         this.stopIndicator();
         this.index = 0;

         if(this.entryCount==1 && this.options.autoSelect) {
           this.selectEntry();
           this.hide();
         } else {
           this.render();
         }
      }
   }
} 
```

在controls.js 中覆盖不是一个好主意。相反，您可以将其添加到新的 .js 中，并将其包含在库之后。

编辑：pff .. 抱歉缩进不好，但它是从 TextMate 复制/粘贴的，并且有制表符和空格。我希望你明白这一点。我唯一添加的是

```
 if(!choices) {
        //do your "new item" thing here
      }
      else {} 
```

堵塞。另外，我没有测试代码，但我认为它应该可以工作。

# xml - 接受和返回 XML 文档的 Web 服务 - 为什么？

> ID：657840
> 
> 赞同：4
> 
> 时间：2009-03-18T11:20:38.370
> 
> 标签：xml, web-services, api

编写一个其方法都接受和返回 XML 文档的 Web 服务接口，而不是更常见的本地类型和类的参数列表，是否有好处？

我们有一些像这样设计的现有 Web 服务。传递给它们的方法的 XML 文档通常很大（因为它们可能包含 100 条与方法调用相关的数据）。我们有用于验证 XML 文档的 XSD 文件，但是客户端开发人员的整体体验很差而且很慢。当然最好有一个强类型的接口吗？

Web 服务是用 C# 编写的，客户端是用 C# 和 Java 编写的（我们的一些业务合作伙伴使用 Java）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T12:15:04.090

如果您完全确定您的最终用户/客户端技术是什么（例如纯 .NET 和 Java，其中的功能集可能是最丰富的），那么一定要继续利用可用的强类型接口。但是，如果您的客户群是 Perl、PHP、ASP、Python 等的混合包，那么我会让这些人的生活变得简单易懂。

我们有许多 Web 服务必须供这种混合的客户使用，虽然我很乐意让我们的生活变得简单，但我们必须稍微简化一下以确保最大的互操作性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-03-18T12:27:02.717

另一个原因是某些非常复杂的 XML 文档*可以*表示为类，但这会很尴尬。具有许多重复元素的深层嵌套文档，例如：`doc.a[3].b.c[4].d[52].e`，例如，很快就会变得令人厌烦。

此外，请记住，并非所有 XML 模式构造都可以直接转换为类。他们不是故意的。构建为 XML 而不是类型的 XML Schema 很可能根本不会转换为类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-18T11:32:32.803

几个原因，以及一些相关的想法：

*   互操作性。它肯定可以通过一些粗糙的边缘加速，但如果你坚持简单的课程，你不应该有问题。也有可能先签订合同，但是您必须再次了解限制，在某些情况下类生成器不能很好地工作:(。但即使那样，您也可以将该部分加载为 XML，而不是为整件事做这件事。
*   您想用它来处理不同类型的消息。这些消息甚至可能被聚合。不过，它不是唯一的解决方案，因为在定义上做一些工作，您可以将这些场景放入类型化的消息中。
*   它不需要了解所涉及的所有位，只需将适当的部分发送到适当的系统即可。这个很引人注目，但即便如此，我也不认为有理由不考虑如何为不同系统聚合 xsd 并为您的 Web 服务定义整合它们。无论如何，这可能需要完成。

关于互操作性，请注意您可以坚持使用简单的模式并仍然输入它。如果这是您不需要放弃对富客户端的支持的问题，那么对于简单的模式来说效果最好。这些是您想要的某些语言的模式类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T12:27:26.540

我曾经听说过将服务方法与输入/输出的“字符串 xml”进行比较，这与编写这样的 C# 函数相比：

```
public object DoSomething(object o){

} 
```

我想它有时可能会有它的用途，例如，如果您希望您的服务支持模式的多个版本，但它并不是真正的透明设计，因此应该避免。

I've even seen organizations that define web-service standards for insurance companies design services like this. [Sigh]

# installation - Clickonce - 如何将图像添加到安装程序？

> ID：657842
> 
> 赞同：4
> 
> 时间：2009-03-18T11:21:20.490
> 
> 标签：installation, clickonce, customization

是否可以更改 Clickonce 安装程序的 GUI？例如添加自定义图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-18T11:30:03.777

没有。您可以更改图标，仅此而已。

这是故意的，因为 ClickOnce 允许您从 Web 安装东西，并且允许 UI 更改为有恶意的人打开了大门。每次点击安装都使用相同的 UI 可以确保人们知道正在安装某些东西：例如，您不能让 UI 模拟标准消息框，而实际上在后台安装软件（用户不知道）。

# linux - 如何使用 echo 编写非 ASCII 字符？

> ID：657846
> 
> 赞同：36
> 
> 时间：2009-03-18T11:22:59.207
> 
> 标签：linux, bash, ascii, echo, non-ascii-characters

如何使用 echo写入非[ASCII字符？](http://en.wikipedia.org/wiki/ASCII)是否有转义序列，例如`\012`或类似的东西？

我想使用以下命令将 ASCII 字符附加到文件中：

```
echo ?? >> file 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-03-18T13:18:36.137

如果您关心可移植性，您将放弃*echo*并使用*printf(1)*：

```
printf '\012' 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2009-03-18T11:29:47.503

采用

```
echo -e "\012" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-01-16T17:37:03.027

在我的终端上，

```
printf '\012' >>output.txt 
```

适用于 ascii 字符的八进制表示和相应的十六进制：

```
printf '\xA' >>output.txt 
```

命令

```
echo -en '\012' >>output.txt 
```

但是，无法正常运行。只有十六进制似乎可以与 echo -e 一起使用。-n 从 echo 中删除默认的额外换行符。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-12-06T22:22:20.137

您可以使用 ANSI-C 引用`echo`：

```
echo $'\012' # octal

echo $'\x0a' # hex 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-20T20:43:13.210

至少在我的情况下，我将非 ASCII 表示为 Unicode，但`printf "\x##"`对于我的 2 字节解决方案来说还不够，所以我改用了这种略有不同的语法：

```
> printf "\u25ba"
► 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-28T14:15:46.040

## 简短的

```
echo -e 'toto\010\010ti'   # OUTPUTS: toti
echo -e '\x41'             # OUTPUTS: A
echo -e '\u03B1'           # OUTPUTS: α
echo -e '\U1F413 <= \U1F1EB\U1F1F7' # OUTPUTS  <= 
```

## 文档

从`man bash`> /BUILTIN/ > /^ *echo/

```
 \0nnn  the eight-bit character whose value is the octal value nnn (zero  to
                     three octal digits)
              \xHH   the eight-bit character whose value is the hexadecimal value HH (one
                     or two hex digits)
              \uHHHH the Unicode (ISO/IEC 10646) character whose value is the hexadecimal
                     value HHHH (one to four hex digits)
              \UHHHHHHHH
                     the Unicode (ISO/IEC 10646) character whose value is the hexadecimal
                     value HHHHHHHH (one to eight hex digits) 
```

## 关联

*   ASCII列表：`man ascii`
*   [Unicode 列表](https://unix.stackexchange.com/a/337989/257838)：StackOverflow 上的脚本

# bash - CMake：如何在 CMakeLists.txt 中使用 bash 命令

> ID：657850
> 
> 赞同：22
> 
> 时间：2009-03-18T11:24:20.530
> 
> 标签：bash, cmake

我想知道如何在 CMakeLists.txt 中使用 bash 命令。我想要的是获取使用检索的处理器数量：

```
export variable=`getconf _NPROCESSORS_ONLN` 
```

并使用以下方法将 NB_PROCESSOR 设置为变量：

```
SET (NB_PROCESSOR variable) 
```

所以我的问题是如何在 CMakeLists.txt 中使用 getconf 命令以及如何在 CMake SET 命令中使用结果（存储在变量中）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-03-18T11:52:28.043

这似乎可以解决问题，并且也可以保存“集合”。

```
execute_process(COMMAND getconf  _NPROCESSORS_ONLN
                OUTPUT_VARIABLE NB_PROCESSOR) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-03-30T08:14:59.427

使用 EXEC_PROGRAM 命令，然后使用 SET 命令的 CACHE 选项将输出保存到一个变量，如 GTK_PKG_FLAGS。然后使用 SET 命令添加该值。像这样的东西：

```
IF(NOT GTK_PKG_FLAGS)
   EXEC_PROGRAM(pkg-config ARGS --cflags --libs gtkmm
                OUTPUT_VARIABLE GTK_PKG_FLAGS)
   SET(GTK_PKG_FLAGS "${GTK_PKG_FLAGS}" CACHE STRING "GTK Flags")
ENDIF(NOT GTK_PKG_FLAGS)
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${GTK_PKG_FLAGS}") 
```

链接：[http ://www.cmake.org/pipermail/cmake/2005-January/006051.html](http://www.cmake.org/pipermail/cmake/2005-January/006051.html)

# javascript - 如何选择 xpath 1.0 中的第 n 个项目？

> ID：657855
> 
> 赞同：16
> 
> 时间：2009-03-18T11:26:01.930
> 
> 标签：javascript, xml, xpath, yahoo-widgets, xpath-1.0

我有一些 XML 和 XPath 查询。我正在使用雅虎！小部件，所以我使用的是 XPath 1.0。

这是我的 XML 的要点...

```
<root>
    <cat num="SOURCE">
        <movie>
            <swf>speak.swf</swf> 
            <width>250</width> 
            <height>150</height> 
            <colour>cccccc</colour> 
        </movie>
        <movie>
            <swf>inertia.swf</swf> 
            <width>380</width> 
            <height>130</height> 
            <colour>9a9a9a</colour> 
        </movie>
        <movie>
            <swf>swing.swf</swf> 
            <width>380</width> 
            <height>130</height> 
            <colour>9A9A9A</colour> 
        </movie>
        .... 
```

现在......如果我运行这个查询：

```
"root/cat/movie/swf" 
```

我得到 42 个结果，所有 'swf' 节点都是正确的。

但是，如果我只想要第 6 个，我希望能够做到：

```
"root/cat/movie/swf[6]" 
```

但我得到一个包含 0 个节点的列表。

奇怪的是，使用 [1]（没有其他值）会产生我所有 42 个节点的列表。

显然，我在这里遗漏了一些非常基本的东西。任何人都看到它是什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-03-18T11:32:30.603

我想知道你的意思是：

```
"root/cat/movie[6]/swf" 
```

（获取第 6 部电影的 swf）

或者：

```
"(root/cat/movie/swf)[6]" 
```

（查找所有电影/swf 元素，并选择第 6 个）

当每部电影恰好有一个 swf 时，两者是相同的；如果一部电影有零个或多个 swf 元素，那么这两个查询会略有不同...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-18T11:32:46.513

```
"root/cat/movie/swf[6]" 
```

指上下文中的每个第 6 个`<swf>`节点。`"root/cat/movie"`

每个人只有一个`<swf>`节点。

你的意思是：

```
"root/cat/movie[6]/swf" 
```

# python - Python：返回布尔值和字符串都可以吗？

> ID：657857
> 
> 赞同：9
> 
> 时间：2009-03-18T11:26:18.543
> 
> 标签：python

原始问题

我制作了一个函数，它等待特定字符串出现在串行端口上，并返回所有读取的字符，直到找到字符串，否则返回 false。这很方便，但我想知道这是否被认为是不好的做法？

澄清：

主要目标是等待**特定**字符串在给定时间内出现。除了 IO 错误，可能的结果是 True（确实出现了字符串）或 False。次要目标是获取整个输出，因为在寻找的实际答案之前可能有我想解析的信息。我想也许我可以将主要目标和次要目标结合在一个返回值中。

```
def MyFunc(s, timeout) :
    test = get_some_input(timeout)
    if test.endswith(s)
        return test
    else
        return False 
```

编辑：另一个建议的答案是引发异常。我认为这不是一个好主意，因为超时是预期的行为。我的意思是，如果有指定超时的参数，那么超时是可能的结果，而不是例外。

编辑2：由于我需要存储输入，也许使用类是正确的解决方案。等待函数具有明确的返回值，但在超时之前读取的整个字符串也是可访问的。

```
class Parser :
        def __init__(self, sport_name):
                self.currentMsg = ''
                self.ser = serial.Serial(sport_name, 115200)
        def WaitFor(self, s, timeOut=None):
                self.ser.timeout = timeOut
                self.currentMsg = ''
                while self.currentMsg.endswith(s) != True :
                        # should add a try catch here
                        c=self.ser.read()
                        if c != '' :
                               self.currentMsg += c
                        else :
                                print 'timeout waiting for ' + s
                                return False
                return True 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-03-18T11:28:22.967

返回 a`None`而不是 不是更合适`False`吗？

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-03-18T12:53:35.137

我相信正统的 Python 设计会返回 None。[手册](http://docs.python.org/reference/datamodel.html#the-standard-type-hierarchy)说：

> 没有任何
> 
> 这种类型只有一个值。有一个具有此值的对象。该对象通过内置名称 None 访问。它用于表示在许多情况下没有值，例如，它是从没有显式返回任何内容的函数返回的。它的真值是假的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-03-18T17:32:43.827

最好返回一个字符串和一个布尔值（如标题所示），而不是返回一个字符串或一个布尔值。您不必弄清楚返回值的含义。它应该是完全明确的，并且应该将正交问题分成不同的变量。

```
(okay,value) = get_some_input(blah);
if (okay): print value 
```

我倾向于不经常返回元组，因为这感觉很有趣。但这样做是完全有效的。

返回“无”是一个有效的解决方案，这里已经提到过。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-18T11:28:38.053

在这种情况下，方便的是返回一个空字符串。

此外，Python 中的空字符串无论如何都会评估为 False。所以你可以这样称呼它：

```
if Myfunc(s, timeout):
    print "success" 
```

补充：正如 S.Lott 所指出的，真正的 Pythonic 方式是返回 None。虽然我选择在与字符串相关的函数中返回字符串。确实是一个偏好问题。

此外，我假设 Myfunc 的调用者只关心获取要操作的字符串 - 是否为空。如果调用者需要检查超时问题等。最好使用异常或返回无。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-18T12:47:39.877

如果字符串及时到达，您可以返回该字符串，或者引发一个合适的异常指示超时。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-18T11:28:57.880

也许如果你返回一个像 (False, None) 和 (True, test) 这样的元组会更好，因为你可以单独评估它们而不增加不必要的复杂性。

编辑：也许出现在串口上的字符串是“”（可能是预期的），所以返回 True 可以说它是以这种方式到达的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-03-18T17:58:29.537

为了补充 Ber 的观点，您可能需要考虑其他因素。如果您使用空字符串或无字符串，您就会为“愚蠢”种类的错误敞开大门。另一方面，如果您引发异常，您将强制中止正在运行的任何操作的执行。

例如，考虑以下代码：

```
result = MyFunc(s, timeout)
if result[0] == 'a':
    do_something() 
```

如果操作超时并获得空字符串或无，这将引发异常。因此，您必须将其更改为：

```
result = MyFunc(s, timeout)
if result and result[0] == 'a':
    do_something() 
```

这些类型的更改往往会增加并使您的代码更难以理解。

当然，我敢肯定，您对此的回答将类似于“我不会那样做”或“那不会发生”，而我的回答是“即使您没有遇到它有了这个功能，你最终会养成这样做的习惯。” 这些类型的错误几乎总是您通常不会考虑的极端情况的结果。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-22T17:06:20.463

这是 Python 生成器的经典用例。该`yield`关键字提供了一种简单的方法来迭代离散集，而无需一次返回整个事物：

```
def MyFunc(s, timeout) :
    test = get_some_input(timeout)
    while test.endswith(s)
        yield test
        test = get_some_input(timeout)

for input in MyFunc(s, timeout):
    print input 
```

这里的关键是没有返回值来指定输入的结束；相反，您只需到达迭代器的末尾。更多关于发电机的信息在[这里](http://www.python.org/dev/peps/pep-0255/)。

# asp.net - 映射 IIS 外部的服务器路径

> ID：657859
> 
> 赞同：2
> 
> 时间：2009-03-18T11:27:48.290
> 
> 标签：asp.net, iis, administration

我有一个网络应用程序，用户可以在其中上传文件。这些文件由 IIS 物理存储在映射到外部存储设备的虚拟文件夹中。每个上传文件的记录都存储在数据库中。数据库记录包含有关文件是否仍然“活动”（尚未被用户删除）和虚拟文件夹路径（例如：/storage1/test）的信息

现在，我想定期在 IIS 之外运行一个管理任务，该任务检索所有不再“活动”的文件的列表，并从物理存储中删除这些文件。我希望管理任务在 IIS 之外作为计划任务或 Windows 服务运行。但是，我无法弄清楚如何在外部进程中将存储在数据库记录中的虚拟文件夹路径映射到物理路径。有没有办法从外部进程或任何其他聪明的方式“利用”到 IIS？（或者我完全走错了方向）。

TIA /亨里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T12:44:13.847

您需要在项目中添加对 System.Web 的引用。

```
string path = System.Web.HttpServerUtility.MapPath("/MyWebSite"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T11:37:00.187

如果您的应用程序是 ASP.NET 应用程序，则可以调查 Server.MapPath 调用 - 如果您使用与主应用程序相同的虚拟目录。

否则，我建议将“基本路径”（对应于虚拟目录路径）存储在您的外部应用程序的配置中，并将该基本路径和文件路径连接成一个完整路径。

马克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T11:46:51.193

如果您需要以编程方式检索此路径，则可以执行以下操作：

```
using(DirectoryEntry de = 
    new DirectoryEntry("IIS://Localhost/w3svc/1/root/storage1/test"))
{
    string pathToFiles = de.Properties["Path"].Value;

    // Do my file tidy up tasks....
} 
```

有几点需要注意：

*   `1`构造函数路径中的 数字“ ”`DirectoryEntry`是站点的 IIS 编号。

*   在 path `IIS://Localhost/w3svc/1/root/storage1/test`中，第一部分 `IIS://Localhost/w3svc/1/root`是您网站的“根”应用程序。你总是需要这部分。

*   您需要将`System.DirectoryServices` 程序集的引用添加到您的项目中。

# python - 如何找到可从包中导入的模块？

> ID：657868
> 
> 赞同：2
> 
> 时间：2009-03-18T11:30:35.757
> 
> 标签：python, import

有没有办法知道哪些模块可以从包中导入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T11:35:47.303

许多包将包含一个名为 的列表`__all__`，其中列出了成员模块。这在 python 执行时使用`from x import *`。您可以[在此处](http://docs.python.org/tutorial/modules.html#importing-from-a-package)阅读更多相关信息。

如果包没有定义`__all__`，你将不得不做一些类似于我之前提出的问题的答案，[here](https://stackoverflow.com/questions/487971/is-there-a-standard-way-to-list-names-of-python-modules-in-a-package)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-03-18T12:57:33.520

你有来源。

查看包目录中的文件。这些模块可供您导入。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-03-18T19:08:31.957

目录（[对象]）；

没有参数， dir() 返回当前本地范围内的名称列表。使用参数，尝试返回该对象的有效属性列表。

因此，对于模块，例如“sys”：

```
>>> import sys
>>> dir(sys)
['__displayhook__', '__doc__', '__excepthook__', '__name__', '__stderr__', '__stdin__', '__stdout__', '_current_frames', '_getframe', 'api_version', 'argv', 'builtin_module_names', 'byteorder', 'call_tracing', 'callstats', 'copyright', 'displayhook', 'exc_clear', 'exc_info', 'exc_type', 'excepthook', 'exec_prefix', 'executable', 'exit', 'getcheckinterval', 'getdefaultencoding', 'getdlopenflags', 'getfilesystemencoding', 'getrecursionlimit', 'getrefcount', 'hexversion', 'maxint', 'maxunicode', 'meta_path', 'modules', 'path', 'path_hooks', 'path_importer_cache', 'platform', 'prefix', 'ps1', 'ps2', 'pydebug', 'setcheckinterval', 'setdlopenflags', 'setprofile', 'setrecursionlimit', 'settrace', 'stderr', 'stdin', 'stdout', 'subversion', 'version', 'version_info', 'warnoptions'] 
```

这里的所有都是它的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-03-18T11:51:05.877

进口弗雷德

打印目录（弗雷德）

# java - IE 上的另一个 JQuery 编码问题

> ID：657871
> 
> 赞同：4
> 
> 时间：2009-03-18T11:31:50.120
> 
> 标签：java, jquery, ajax, internet-explorer, iso-8859-1

我正在编写一个意大利网站，我需要在其中使用 xhr 调用验证一些输入数据。我的 ajax 请求代码是这样的（我使用的是 JQuery 1.3.2）：

```
 $.ajaxSetup({
    type: "POST",
    timeout: 10000,
    contentType: "application/x-www-form-urlencoded; charset=iso-8859-1"        
}); 

 $.ajax({
    url: "ajaxvalidate.do",
    data: {field:controlInfo.field,value:controlInfo.fieldValue},
    dataType: "json",
    complete: function() {
        //
    },
    success: function(msg) {
        handleAsyncMsg(controlInfo, msg, closureOnError);
    },
    error: function(xhr, status, e) {            
        showException(controlInfo.id, status);

    }

}); 
```

在后端，我有一个 java struts 动作来处理 xhr。我需要在页面中使用编码 ISO-8859-1 以确保数据（特殊重音字符）在同步提交中正确发送。

在 Firefox 中，一切都像魅力一样工作，但是当我必须处理来自 IE 7 的带有重音字符的异步帖子时，我遇到了一个问题：我总是收到无效字符（也许是 utf-8？）。EG 我以 ààààààààà 的形式输入，然后在我的请求中得到这个值：Ã Ã Ã Ã Ã Ã Ã Ã。由于请求字符集已正确设置为 ISO-8859-1，我无法理解为什么服务器仍未正确解析表单值。

这是一个包含所有请求标头和错误的日志示例（服务器是旧的 Bea Weblogic 8.1）：

```
Encoding: ISO-8859-1
Header: x-requested-with - Value: XMLHttpRequest
Header: Accept-Language - Value: it
Header: Referer - Value: https://10.172.14.36:7002/reg-docroot/conv/starttim.do
Header: Accept - Value: application/json, text/javascript
Header: Content-Type - Value: application/x-www-form-urlencoded; charset=iso-8859-1
Header: UA-CPU - Value: x86
Header: Accept-Encoding - Value: gzip, deflate
Header: User-Agent - Value: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729)
Header: Host - Value: 10.172.14.36:7002
Header: Content-Length - Value: 65
Header: Connection - Value: Keep-Alive
Header: Cache-Control - Value: no-cache
Header: Cookie - Value: JSESSIONID=JQJlNpVC86yTZJbcpt54wzt82TnkYmWYC5VLL2snt5Z8GTsQ1pLQ!1967684811
Attribute: javax.net.ssl.cipher_suite - Value: SSL_RSA_WITH_RC4_128_MD5
Attribute: javax.servlet.request.key-size - Value: 128
Attribute: javax.servlet.request.cipher_suite - Value: TLS_RSA_WITH_RC4_128_MD5
Attribute: javax.servlet.request.key_size - Value: 128
Attribute: weblogic.servlet.network_channel.port - Value: 7001
Attribute: weblogic.servlet.network_channel.sslport - Value: 7002
Attribute: org.apache.struts.action.MESSAGE - Value: org.apache.struts.util.PropertyMessageResources@4a97dbd
Attribute: org.apache.struts.globals.ORIGINAL_URI_KEY - Value: /conv/ajaxvalidate.do
Attribute: errors - Value: org.apache.struts.util.PropertyMessageResources@4a97e4d
Attribute: org.apache.struts.action.MODULE - Value: org.apache.struts.config.impl.ModuleConfigImpl@4aa2ff8
Attribute: weblogic.servlet.request.sslsession - Value: javax.net.ssl.impl.SSLSessionImpl@42157c5
field: nome - value: Ã Ã Ã Ã Ã Ã Ã Ã  - action: /endtim 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T14:55:10.037

> 内容类型：“应用程序/x-www-form-urlencoded；字符集=iso-8859-1”

您可以*说*您在标头中以 ISO-8859-1 格式发送表单提交，但这并不意味着您实际上是。jQuery 使用标准的 JavaScript encodeURIComponent() 方法将 Unicode 字符串编码为查询字符串字节，并且*始终*使用 UTF-8。

在任何情况下，MIME 类型 'application/x-www-form-urlencoded' 的 'charset' 参数是高度非标准的。作为 'x-' 类型，该类型没有正式的 MIME 注册，但 HTML 4.01 没有指定这样的参数，并且对于 'application/*' 类型来说是非常不寻常的。Weblogic 声称可以检测到这个构造，因为它的价值。

所以你可以做的是：

1：自己创建 POST body form-urlencoded 内容，手动将其破解为 ISO-8859-1 格式，使用类似的东西

```
function encodeLatin1URIComponent(str) {
    var bytes= '';
    for (var i= 0; i<str.length; i++)
        bytes+= str.charCodeAt(i)<256? str.charAt(i) : '?';
    return escape(bytes).split('+').join('%2B');
} 
```

而不是 encodeURIComponent()。

2：丢失'charset'并让它正常提交UTF-8，并使您的servlet理解传入的UTF-8。这通常是最好的，但意味着要修改 servlet 容器配置以使其选择正确的编码。对于 Weblogic，这似乎意味着在 weblogic.xml 中[使用 <input-charset> 元素](http://edocs.bea.com/wls/docs100/webapp/configurejsp.html#wp162180)。到那时，您正在考虑将整个应用程序迁移到 UTF-8。这绝不是一件坏事（不支持 Unicode 的网站太 20 世纪了！）但很可能需要做很多工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T12:21:12.127

实际上刚刚解决了这个问题，我需要这样做：

jQuery.ajaxSetup({ contentType: "application/json;charset=utf-8" });

这会覆盖将 application/x-www-form-urlencoded 添加到 IE 中的内容类型的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-06-03T23:18:39.967

我在西班牙门户网站的内容评论系统中工作时遇到了类似的问题。经过几个小时的搜索，最终解决了我的问题，而不是弄乱 jQuery 字符集，似乎无论如何都使用 utf-8，它是在处理的 PHP 中从 utf-8 解码回 ISO-8859-1 ajax POST。在 PHP 中有一个内置函数 utf8_decode()，所以我对注释字符串做的第一件事是：$commentario = utf8_decode($_POST['comentario']);

（然后我使用 nl2br() 和 htmlentities() PHP 函数来准备要使用 html 实体而不是特殊字符存储的文本）

祝你好运与和平！塞巴

# .net - 到机器的最大 TCP 连接数

> ID：657874
> 
> 赞同：3
> 
> 时间：2009-03-18T11:32:43.363
> 
> 标签：.net, windows-services, tcplistener

我正在.NET 中创建一个 Windows 服务，N 个客户端可以连接到该服务。该服务启动一个 TCP 侦听器并接受客户端连接。我面临的问题是我只能打开 10 个与该服务的连接。listener::AcceptTcpClient() 方法只接受 10 个连接，并为第 11 个连接抛出异常。客户端应用程序使用 System.Net.Sockets.TcpClient 类，服务使用 System.Net.Sockets.TcpListener 类。

这是我尝试在 for 循环中与该服务建立多个连接时遇到的异常（在建立第 10 个连接之后）：

“无法从传输连接读取数据：现有连接被远程主机强制关闭”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T11:42:47.193

这听起来像是您遇到了众所周知的[**Windows XP 上半开 TCP 连接的 10 个连接限制**](http://support.microsoft.com/kb/314882)。自 XP SP 2 起，此限制是硬编码的，除了修补您的系统之外，无法覆盖它，这在技术上可能违反您的最终用户许可协议 (IANAL)。唉，XP 并不是一个服务器系统。

> 对于 Windows XP Professional， **允许同时通过网络连接的其他计算机的最大数量为 10。**此限制包括所有传输和资源共享协议的组合。对于 Windows XP Home Edition，允许同时通过网络连接的其他计算机的最大数量为五台。此限制是允许系统托管的其他计算机的同时会话数。此限制不适用于从远程计算机附加的管理工具的使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-04-08T05:12:56.413

我不认为之前给出的答案是有效的。我做了一些研究，似乎没有理由认为 TcpClient 有任何严格的限制。另一个答案建议在 Windows XP 中为服务器服务设置 10 个活动 TCP 连接的限制，但这仅适用于 Microsoft 提供的特定应用程序协议（如共享、邮件）。

我确实发现微软在 XP SP2 中添加了一些限制，并继续通过 Vista SP1 将[半开 TCP 连接限制为 10](http://www.windowsbbs.com/general-discussions/84686-half-open-outbound-tcp-connections-limit-removed-windows-7-vista-sp2.html)。他们还将一秒钟内的新连接数限制为[10 个](http://forum.emule-project.net/index.php?showtopic=56016&s=f1ece72d9e7e067c672faf697a67f87d)。这些都是减少病毒软件影响的尝试。显然这些都不是很成功，所以微软最终决定在 Vista SP2 及更高版本中删除这些。

这可能是 OP 的实际问题 - 也许您正试图在客户端中过快地创建这些连接？

正如我在对先前接受的答案的评论中提到的那样，我个人编写客户端/服务器软件并且没有遇到限制为 10 的问题。当我进行测试时，过去使用 Windows XP，现在使用 Windows 7（应用程序限制现在有 20 个连接），我可以轻松超过这个限制。我刚刚重新测试，能够在一台主机（Windows 7 Home Premium）和另一台主机（Windows 7 Enterprise）之间创建 >140 个活动/已建立的连接；两个客户端操作系统。这是使用 Java，但与 .NET 确实应该没有区别（我过去也测试过）。

# load - sIFR 在页面其余部分之前加载？

> ID：657876
> 
> 赞同：1
> 
> 时间：2009-03-18T11:32:48.387
> 
> 标签：load, sifr, preloader, flicker

是否可以在页面内容的其余部分之前“预加载”或加载 sIFR？目前它是最后加载的东西（由于文本位置），因为它是页面的一个非常明显的部分，所以我很快就得到了一个巨大的文本替换混搭，这不是很吸引人。

看起来该网站正在癫痫发作。一旦加载，一切都很好:)

负载配件的任何变通方法？

干杯休

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T20:35:02.827

这里有两个单独的问题：

1.  尽快更换元件
2.  使更换尽可能无痛

对于 #1，sIFR 默认替换文档加载时的元素。但是，要在 Safari 中进行这项工作，请查看[http://wiki.novemberborn.net/sifr3/DetectingCSSLoad](http://wiki.novemberborn.net/sifr3/DetectingCSSLoad)。

对于#2，问题在于文本的尺寸与 HTML 文本不同，具体取决于 Flash 中使用的字体。查看[http://wiki.novemberborn.net/sifr3/Ratio+Calculation](http://wiki.novemberborn.net/sifr3/Ratio+Calculation)以帮助减少垂直跳跃。您可能需要调整`letter-spacing`HTML 文本以减少水平跳跃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T11:53:14.377

如果我了解 sIFR 的工作方式，您需要先在 DOM 中创建标题，然后再尝试更改它。老实说，我去过的每个使用 sIFR 的网站在加载时都会有轻微的翻转。

那么在我看来，答案是否定的。不过，我正在接受纠正。

# asp.net - ASP.NET MVC IIS7 更好的配置

> ID：657877
> 
> 赞同：1
> 
> 时间：2009-03-18T11:32:51.163
> 
> 标签：asp.net, asp.net-mvc

我有一个简单但脚本和 css 风格的 ASP.NET MVC 应用程序，在 VS2008 开发服务器中一切顺利，但是当我将它带到 IIS7 时，我尝试了一些丑陋的脚本和图像问题.. 相对路径找不到脚本（这个特别是在默认路由页面中）和图像。

经过一些研究和谷歌搜索后，我找到了许多示例并提供了解决方案，但任何东西都可以真正解决问题，有人说一个解决方案是使用 Url.Content 方法，但我讨厌使用它，因为我失去了 VS2008 中的所有 javascript 智能感知功能。 .

如果 mvc 项目是在根网站或 Web 应用程序中发布的，我也发现这个问题可能会有所不同。我知道在根网站中它可以工作，因为引用相对路径如

```
<script src="../../Scripts/myScript.js" type="text/javascript" /> 
```

在没有根的情况下解析 Web 应用程序文件夹。有人有什么建议或其他吗？我打算开始一些东西来构建一种配置“指南”..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T11:43:05.773

可能是我建议使用 Url.Content。如果是这样，我忽略了我所做的另一半——将相对路径包装在 if (false) 块中以保留智能感知。下面是我如何处理 javascript 的（完整）示例。

```
 <% if (false) { %>
    <script type="text/javascript"
            src="../../Scripts/jquery-1.3.1.min.js">
    </script>
 <% } %>
 <script type="text/javascript"
         src='<% Url.Content( "~/Scripts/jquery-1.3.1.min.js" ) %>'>
 </script> 
```

# asp.net - ASP.Net 中的资源存储

> ID：657885
> 
> 赞同：0
> 
> 时间：2009-03-18T11:36:55.867
> 
> 标签：asp.net

大家好，

我正在将 j2me 应用程序修改为移动 Web 应用程序。在 J2me 中，有一个称为持久存储的概念。ASP.net 中有没有类似的东西。如果是这样，请告诉我...

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T16:29:08.503

如果我理解正确的话，这个持久存储就在实际的移动设备上。如果是这种情况，那么在 ASP.NET 中就没有这样的东西了。我认为使用 cookie 的本地存储在移动设备上是不可靠的，因此您需要在服务器端存储数据。

# .net - DLL 在 EXE 中调用对象的最佳实践

> ID：657889
> 
> 赞同：1
> 
> 时间：2009-03-18T11:39:49.867
> 
> 标签：.net, vb.net

我正在构建一个包含几个需要访问应用程序 LINQ DataContext 的“主”对象的 DLL。DLL 将为具有不同数据上下文的多个项目提供服务，因此我需要 DLL 可以调用它在 EXE 中的对象。

最好或优雅的方法是什么？

 **编辑：我正在尝试做的**澄清代码示例：****

 **```
'DLL
'---
Public MustInherit Class MasterObject(Of T As Class)
   Friend db As DataContext
   Public Sub New()
      'How do I do something like this?
      db = New DataContextInTheExe()
   End Sub

   ...

   Public MustOverride Sub Save()
end class

'In the Exe
'---
Public Class Order
   Inherits MasterObject(Of Order)

   Public Overrides Sub Save()
       ...
       Me.db.SubmitChanges()
   End Sub
end class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T11:42:53.183

通过将数据上下文传递给需要在 DLL 中使用它的类来使用依赖注入，通常是通过其构造函数。

这是 C# 中的一个示例：

```
public abstract class MasterObject<T>
{
   private DataContext _dataContext;

   public MasterObject(DataContext dataContext)
   {
      _dataContext = dataContext;
   }
}

public class Order : MasterObject<Order>
{
   public Order(DataContext dataContext) : base(dataContext)
   {
      // additional constructor logic
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T11:42:45.990

最合适的方法是让 exe 将数据上下文传递给 dll，例如作为 dll 正在执行的任何操作的方法参数，或者作为任何类（在 dll 中）需要它的构造函数参数。如果您有不同类型的数据上下文，那么类型必须是`DataContext`或子类。扩展方法（在 DataContext 上）是这样做的一种方法（但不是唯一的方法）。

或者 - 在标准的“存储库”实现中（其中 dll 是存储库），调用者（exe）完全有可能甚至不知道数据上下文 - 只是`ICustomerRepository`dll 的接口（或其他）暴露。

* * *

重新编辑；仅凭这一点，它就无法知道要创建的数据上下文的类型。您可能需要传入一个数据上下文，*或者*告诉它（通过泛型）数据上下文的类型；请原谅我的 C#，但是：

```
public abstract class MasterObject<TDataContext, TEntity>
    where TDataContext : DataContext, new()
    where TEntity : class
{
    internal TDataContext db;
    public MasterObject() {
        db = new TDataContext();
    }
} 
```

但是，我强烈怀疑依赖注入路线更简单 - 即让调用者告诉我们：

```
public abstract class MasterObject<TEntity>
    where TEntity : class
{
    internal DataContext db;
    public MasterObject(DataContext db) {
        this.db = db;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T12:16:33.680

目前还不清楚你想做什么，所以我会向你指出我发布的一些相关答案：

*   [有关结构图的一些链接](https://stackoverflow.com/questions/596563/structuremap-tutorial/596611#596611)（用于依赖注入）
*   [从程序集中动态加载类型](https://stackoverflow.com/questions/653128/how-to-get-namespace-of-an-assembly/653149#653149)（.net .exe 也是程序集）

关于结构图，你可以这样称呼它：

```
var someMaster = StructureMap.GetInstance<SomeMasterDefinedInDll>(); 
```

Structure Map 将实例化并将所需的任何内容传递给 SomeMasterDefinedInDll 构造函数。您确实需要配置它，因此您告诉它在请求 DataContext 时获取 exe 中定义的上下文。现在，通常 SomeMasterDefinedInDll 是其他东西的依赖项，因此您甚至不需要在上面编写该代码（它是其他东西的构造函数的参数），您只需为层次结构的顶部执行此操作。检查链接，那里解释得很清楚。

更新：在 c# 语法中，你会：

```
public abstract class MasterObject<T>
{
    protected MasterObject(DataContext context)
    {
    }
}
public class Order : MasterObject<Order>
{
    public Order() : base(new ExeDataContext()) {}
} 
```

基本上，接收数据上下文作为构造函数参数，并在子类中将数据上下文传递给基构造函数。

**更新 2：**请注意，上面的代码是为了回复您最初想要做的事情。如果您只是想这样做，那么就可以了（不需要其他东西）。也就是说，我确实建议您研究依赖注入。在这种情况下，也会在 Order 构造函数中收到 ExeDataContext： public Order(ExeDataContext context) : base(context){}

# cluster-analysis - 如何计算聚类中的精度和召回率？

> ID：657890
> 
> 赞同：9
> 
> 时间：2009-03-18T11:40:37.870
> 
> 标签：cluster-analysis, precision-recall

我真的很困惑如何在集群应用程序中计算精度和召回率。

我有以下情况：

给定两个集合 A 和 B。通过为每个元素使用唯一键，我可以确定 A 和 B 的哪些元素匹配。我想根据功能对这些元素进行聚类（当然不使用唯一键）。

我正在做聚类，但我不确定如何计算精度和召回率。根据论文“Extended Performance Graphs for Cluster Retrieval”（[http://staff.science.uva.nl/~nicu/publications/CVPR01_nies.pdf](http://staff.science.uva.nl/~nicu/publications/CVPR01_nies.pdf)），公式为：

p = 精度 = 相关检索项目/检索项目和 r = 召回 = 相关检索项目/相关项目

我真的不知道哪些元素属于哪个类别。

到目前为止，我所做的是，我在集群中检查了我有多少匹配对（使用唯一键）。这已经是精确度或召回率之一了吗？如果是这样，它是哪一个，我如何计算另一个？

[更新：我刚刚在http://mtg.upf.edu/files/publications/unsuperf.pdf](http://mtg.upf.edu/files/publications/unsuperf.pdf)找到另一篇题为“An F-Measure for Evaluation of Unsupervised Clustering with Non-Determined Number of Clusters”的论文。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-23T15:13:33.220

我想你会发现 wikipedia 上有[一篇关于精确率和召回率的有用文章](http://en.wikipedia.org/wiki/Precision_and_recall)。简而言之：

精度 = 真阳性 /（真阳性 + 假阳性）

召回=真阳性/（真阳性+假阴性）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-30T16:20:15.850

在我在访问聚类方法方面所做的一些研究中，我一直在使用其他几种聚类有效性度量。如果您有一个标有类（监督聚类）的数据集，您可以使用上面提到的精度和召回率，或者纯度和熵。

一个簇的纯度=最频繁类的出现次数/簇的大小（这个应该很高）

集群的熵 = 衡量类在集群中的分散程度（这应该很低）

在没有类标签（无监督聚类）的情况下，内部和内部相似性是很好的衡量标准。

单个集群的集群内相似度 = 集群内所有对的平均余弦相似度（这应该很高）

单个集群的集群间相似度 = 一个集群中所有项目与其他集群中所有项目相比的平均余弦 sim（这应该很低）

本文对所有这四种措施都有很好的描述。 [http://glaros.dtc.umn.edu/gkhome/fetch/papers/edcICAIL05.pdf](http://glaros.dtc.umn.edu/gkhome/fetch/papers/edcICAIL05.pdf)

与无监督 F-measure 的链接很好，我现在正在研究。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-03-30T12:43:16.410

我对这个问题的看法是：

一组 A 和 B 中的一组是“正”组。假设 A 为正

鉴于对于簇中 A 的元素

1.  B的匹配元素在同一个簇中。这是一个真正的积极
2.  B的匹配元素不在同一个簇中。这是一个假阴性
3.  B的不匹配元素在同一个簇中。是误报
4.  B 的非匹配元素不在同一个簇中。is 是一个真正的否定。

然后只需使用

精度 = 真阳性 /（真阳性 + 假阳性）

召回=真阳性/（真阳性+假阴性），正如某人所说

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T12:00:03.703

我觉得你的定义有问题。

准确率和召回率适用于分类问题，分类问题基本上是两簇问题。如果您聚集成“好项目”（=检索到的项目）和“坏项目”（=未检索到的项目）之类的东西，那么您的定义将是有意义的。

在您的情况下，您计算了所有项目中正确聚类的百分比，这有点像精度，但不是真的，因为正如我所说的定义不适用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-30T12:47:04.030

有关评估聚类算法的方法，请参见“信息检索简介”第 18 章（胖聚类）。 [http://nlp.stanford.edu/IR-book/html/htmledition/flat-clustering-1.html](http://nlp.stanford.edu/IR-book/html/htmledition/flat-clustering-1.html)

本书的这一部分也可能很有用，因为它讨论了精度和召回率等指标：http: [//nlp.stanford.edu/IR-book/html/htmledition/evaluation-of-unranked-retrieval-sets-1.html](http://nlp.stanford.edu/IR-book/html/htmledition/evaluation-of-unranked-retrieval-sets-1.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T15:43:12.827

精度和召回率的问题在于，它们通常要求您了解“真实”标签是什么，而在许多情况下（以及在您的描述中）您不知道标签，但您知道要比较的*分区*反对。我可能会建议**调整后的兰德指数**：

[http://en.wikipedia.org/wiki/Rand_index](http://en.wikipedia.org/wiki/Rand_index)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-26T14:25:50.197

如果您将其中一组（例如 A）视为**黄金聚类**，而将另一组 (B) 视为聚类过程的输出，则（精确）精度和召回值可以估计为：

> *精度 =（A 和 B 共有的元素数）/（B 中的元素数）*
> 
> *召回率 =（A 和 B 共有的元素数）/（A 中的元素数）*

从这些标准 F 测量也可以估计。

# asp.net - ASP.NET SiteMap 控件无效的 XHTML -title 包含 &

> ID：657892
> 
> 赞同：1
> 
> 时间：2009-03-18T11:41:24.577
> 
> 标签：asp.net, validation, xhtml, sitemap, web-controls

我正在使用 .SiteMap 文件和 Sitemap 控件在页面上创建站点地图。Web.sitemap 中页面的标题是：“Out & About”。

当页面呈现时，＆符号在源代码中显示为＆（Out＆About），这显然会导致验证错误。

任何想法，当我将它输入到标题中时，我可以如何强制良好的 ol' .net 站点地图对 & 符号进行编码。

像往常一样，感谢您的帮助。彼得斯基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T12:06:38.070

用于`HttpUtility.HtmlEncode`首先对您的文本进行编码，这将发出适当的实体（在本例中为“ `&amps;`”）。

# internet-explorer - 当您认为公司政策错误时，遵守公司政策是否合乎道德？

> ID：657893
> 
> 赞同：1
> 
> 时间：2009-03-18T11:41:39.957
> 
> 标签：internet-explorer

有人建议我辞职，因为我工作的公司坚持要求我编写各种功能以仅受 Internet Explorer 支持的特定方式工作。

我相信我遵守该政策是正确的，尽管我对此提出了反对意见。

这是正确的方法吗？

这与问题有关：[Problem creating an email with an attachment in Javascript](https://stackoverflow.com/questions/553416/problem-creating-an-email-with-an-attachment-in-javascript)

特别是[Breton](https://stackoverflow.com/users/51101/breton)的评论，请参阅与第二个回复相关的评论。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2009-03-18T11:46:27.340

只为 Internet Explorer 编码可能在政治上是愚蠢的，但我不会说这在道德上是错误的。比如说，只在美国销售你的产品，这并没有什么错。你会失去一些市场，但这肯定是公司的选择。如果你强烈反对，你可能不想在那里工作，但我们不要在其中涉及道德。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-03-18T11:51:11.837

![看法](https://imgs.xkcd.com/comics/perspective.png)

如果你每次不得不做出技术妥协时都觉得有必要辞职，那么你可能走错了职业。

正确的方法是你采取的方法——注意反对意见，然后继续你被要求做的工作。

另一方面，如果你一直在技术问题上被贬低，你可能会更乐意在一家与你观点相似的公司中寻找工作。

* * *

作为对要求 Outlook 问题的 JS 电子邮件的回应——这对于公共 Web 应用程序来说显然是愚蠢的。在每台机器都有 IE 和 Outlook 的公司的 Intranet 上完全可以。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-03-18T11:51:14.160

让我们不要在这里混合道德。不良的道德规范是从你的工作场所偷一台电脑，撒谎以传播针对某些同事的信息，或类似的事情。

这是关于流程、规则和要求的。您**必须**遵守公司政策。当然，您总是可以制作一份文件来解释您的观点并试图说服当权者，但与此同时，无论如何，如果您没有成功，您仍然必须遵守政策。

也就是说，我不喜欢“退出的建议”。但那是另一回事了。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-03-18T11:44:19.670

在这种情况下，贵公司的业务决策可能在经济上是错误的，但它们并非不道德——至少，不会比其他一些市场限制更不道德。正如其他人指出的那样，如果这是用于内部应用程序，那会在一定程度上降低重要性水平。此外，检测用户代理充满了各种危险。无论如何，有决心的人很有可能将自己伪装成 IE。

简而言之，**不是为了什么而失眠。**

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-03-18T12:19:26.793

如果您的公司决定支持哪种浏览器对您来说是一个道德问题，那么您需要坐下来好好审视一下自己。你的优先事项被搞砸了。除非你是大股东，否则那家公司是你的雇主，不是你的宗教，也不是你的生活。

你的公司付钱给你做一份工作，而这份工作就是写代码。他们已经决定（面对您希望合理的反对意见）将他们的支持仅限于 IE 仍然可以让他们赚钱，同时节省他们的开发时间。

如果他们希望你只为 IE 编写代码，那么你能做的唯一明智的事情就是只为 IE 编写代码！

如果你真的不能忍受只为 IE 编码，那就离开吧。我敢肯定，在这个经济体中，其他人会很乐意拥有这份薪水。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-03-18T11:57:09.983

我认为您的组织决定将其应用程序限制为 Internet Explorer 用户是一种商业选择，虽然它可能是短视的，但我几乎不会将其视为道德或道德问题。

现在，如果您的公司提倡泡小海豹或向海中喷洒有毒废物，我想我可能会重新审视我的职业选择。这些是真正的“道德”和“道德”问题。

如果这份工作报酬不错，而且他们对你很好，那就把它收起来。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-03-18T11:58:54.907

这与我在咨询职业生涯早期遇到的困难相似。作为一名顾问（告诉客户该做什么，而不是承包商，他们告诉我该做什么）我经常告诉他们做 A，他们想做 B。最初这让我很疯狂，很难共事（至少.) 然而，我最终开悟了（小“e”）并开发了我所谓的“顾问 2 步骤”。

我：你应该做 A，这就是为什么... 他们：我们想做 B 我：好的，但是如果你这样做，这就是将会发生的事情。所以，你应该做A，这就是为什么（再次）。他们：我们想做 B。我：好的。

我意识到“这不是我的系统，也不是我的项目。” 生活将会继续。

又，出自《道德经》： 57\. 以无为取胜 勿以法制人，勿以暴行，勿以奸佞，以无为取之。

因为：道德和禁忌越多，人们就越残酷；枪刀越多，派别越多；艺术和技能越多，变化越过时；法律和税收越多，盗窃就越容易腐蚀人。

却不为所动，民心相生；不制定法律，人民彼此公平对待；自己没有利益，人民互相合作；表达不欲，民心相和。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-03-18T12:52:53.437

考虑到这一点。

你有一份工作。

这是一个不同意的小问题。

保住你的工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-18T11:50:24.677

恕我直言，这很棘手。

我是一名承包商，归根结底，无论我认为是对还是错，他们都会用一个如果我拒绝就会按照他被告知的那样做的人来代替我。看看我们在工作中的气候是一个很大的好处。然而，我确实建议了更好的做事方式，但如果客户不愿意倾听，那么什么都不会改变。

我还可以看到他们的一些推理，他们知道只有运行 IE 的人才会使用该功能，因此他们可以降低测试和开发成本。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-03-18T12:41:19.937

退出的建议是这样表述的：

*通过专门针对 IE 和 Outlook 进行编码，您参与了不道德的公司锁定策略。也许您可以忍受您给所有 Web 开发人员和系统用户带来的未来痛苦和痛苦。如果我处于你的位置，我将不得不辞职。*

讨论的“道德”问题是您正在为供应商锁定做出贡献。尽管我可以理解评论员的来源，但作为程序员，您所做的几乎所有事情都会导致某种供应商锁定。历史代码的绝对重量意味着很难用以前使用过的语言以外的语言进行编程。（尝试以一种易于转移到新语言的方式编写花哨的 .NET 代码）事实上，您的用户经过培训可以使用某些包，并且这些包中的数据也不容易转移到其他系统意味着你被锁定了。

您正在寻找问题的技术解决方案，并且由于当前使用的包、内置包安全性和公司策略的组合，您将不得不接受它。无需辞职，这里没有真正的道德问题。

如果您确实对这种情况有疑问，请确保将代码划分为打开 Outlook 并填充字段。如果你这样做，那么用“在 Eudora 中打开并填充字段”替换模块会更容易一些。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-03-18T13:29:09.620

我觉得这样的事情很容易发火，但是抛开感情，我不认为这是一个复杂的问题。

如果您的公司现在只使用 IE，那么只为 IE 编码可以解决问题。但是，如果以这样一种方式编码的成本可以忽略不计，它不仅适用于 IE/Outlook（在您引用的示例中），那么这样做可以通过改进您提供的解决方案来为您的工作增加价值如果他们确实更改了浏览器并仍然使用您的代码，则为您的公司提供服务。

正如用户 42 所说，视角在这里很重要。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-03-18T11:45:57.793

辞职是个愚蠢的举动。您已经提出了您的担忧，也许他们下次可能会被采纳。

做一些只在 Internet Explorer 中支持的事情是我过去做过的事情。尝试在其他浏览器的警告中编写代码或至少表明您知道的内容。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-03-18T11:46:07.917

我会说是的。如果这是您的公司政策，并且您已经解释了您在该主题上的立场，但他们仍然希望这样，那么是的。

这不是道德问题，而是工作问题，最后你必须遵循雇主的工作路线。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-03-18T12:42:31.137

人们似乎缺少的东西是大多数优秀的开发人员对他们的工作感到自豪。他们希望使系统运行良好并为用户提供最小的干扰（例如，必须为某些站点启动 IE）。

我曾在代码*从不*重构、类通常超过 5000 行且 UI 不一致且过时的地方工作过。在这样的环境中工作并不愉快。对于许多人来说，管理层/架构师的糟糕设计决策真的会摧毁你的自我并推动发展。

我承认在这种情况下，似乎没什么好担心的，但显然原始发帖人对这种限制有强烈的感觉。更不用说其他糟糕的管理决策的高概率，因为它们正在放弃/惹恼大部分市场。

如果你能找到一份类似的高薪工作，但文化更好，那就辞职吧。人生苦短，浪费你的才能为一家不遵循最佳实践的公司发展是不好的。是的，只为 IE 开发是一种不好的做法（很少有例外）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-03-18T12:50:06.190

这与编写仅适用于 Windows 的代码真的有什么不同吗？

他们可能通过将自己限制在 IE 上而完全疏远了市场的一部分，但这在道德上并没有错。只是一个糟糕的商业决策。

根据需要进行工作，但在进行时自己做笔记，以便以后可以“升级”编码以更符合其他浏览器。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-03-18T13:20:24.667

即使您为 Google 工作，也不要作恶。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2010-02-24T04:27:22.800

如果你足够在乎，就辞职吧。否则做你的公司希望你做的事情。

# c# - 将xml文件打包到dll中，c#

> ID：657897
> 
> 赞同：9
> 
> 时间：2009-03-18T11:42:45.757
> 
> 标签：c#, dll

我有一个 .NET C# 2.0 项目，它引用了许多 .xml 文件，当我将项目移植到另一个位置或分发它时，我需要这些文件。我目前对将其作为 setup.exe 文件不感兴趣。我想独立。目前我已经将它们全部放在我的项目中的一个文件夹“文件”中。所以我想知道的是

1.  我可以将所有这些 XML 文件打包到一个 dll 中，以便它安全且可移植吗？如果有怎么办？
2.  当我构建程序时，不会复制 FILES 文件夹。我怎样才能让它也复制它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-03-18T11:46:21.210

您可以将 xml 文件标记为资源，它们将被打包在程序集中。只需将“构建操作”设置为“嵌入式资源”即可。或者，使用资源文件 (resx)，并将 xml 文件拖到 resx 设计器上，它会为您完成所有工作（包括提供获取数据的访问方法）。

# c++ - 查找表应该是静态的

> ID：657920
> 
> 赞同：1
> 
> 时间：2009-03-18T11:48:46.523
> 
> 标签：c++, static, members

我有一个 Message 类，它使用查找表解析文本消息。我收到很多消息并创建和销毁很多对象，所以我认为我将这些查找表声明为静态成员，以防止一次又一次地用相同的值初始化相同的表。

它是正确的方法还是有更合适的 C++ 方法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T11:58:57.763

如果您的消息类共享查找信息，则可能值得将您的静态查找抽象为它们自己的类，以便它们实际上只初始化一次。

但无论如何，静态类成员绝对是要走的路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-18T11:53:08.337

它们可以是类变量，即类级别的静态变量。这样，它们对子类（如果有）可用，并且可能比在单个方法中作为静态局部变量“隐藏”时更明显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T11:53:03.673

这听起来像是正确的方法，尽管我希望编译器对此进行优化。您是否对您的应用程序进行了基准测试并将表声明为静态加速它？

另请注意，如果您有许多大型查找表，性能会提高，但这些表将一直保存在内存中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T11:56:59.937

是的，一切都好。有时这是一个很好的解决方案：静态函数，它只会创建一次。您也可以使用单例对象，但它具有更广泛的可访问性。

如果您有多线程应用程序并且您的查找表包含指向另一个数据的指针，该数据可能比该表更早被销毁，请小心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-03-18T12:21:45.990

使用单例模式也适用于此。

# java - 如何使用纯 Java 流式传输 mp3

> ID：657921
> 
> 赞同：10
> 
> 时间：2009-03-18T11:49:05.680
> 
> 标签：java, mp3, stream

是否可以使用纯 Java 流式传输 mp3？如果是这样，实现这一点的最佳资源是什么。

如果不是，是否有任何其他音乐格式可以仅使用 Java 进行流式传输？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T12:03:34.147

正如[Mario 所说](https://stackoverflow.com/questions/657921/how-to-stream-mp3-using-pure-java/657955#657955)，[**JMF** - Java Media Framework](http://java.sun.com/javase/technologies/desktop/media/jmf/)是一个很好的起点。

马里奥没有说的是，Sun 从 2.1.1b 开始就停止了对 MP3 的支持，详见“ [My Lost Streaming MP3 Article](http://www.oreillynet.com/mac/blog/2003/04/my_lost_streaming_mp3_article.html) ”博客条目。

所以你需要添加[一个**插件**来支持 MP3](http://java.sun.com/javase/technologies/desktop/media/jmf/mp3/download.html)：[JMF 格式列表](http://java.sun.com/javase/technologies/desktop/media/jmf/2.1.1/formats.html)
确实提到 了MP3（在 ACM -- Window's Audio Compression Manager support -- 部分下），但仅适用于 Windows，而不是单独使用 JMF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T12:05:11.850

您可以使用[JavaZoom](http://www.javazoom.net/mp3spi/mp3spi.html)中的 MP3SPI 流式传输 MP3 文件

正如其网页上所说：“MP3SPI 是一个 Java 服务提供者接口，它为 Java 平台添加了 MP3（MPEG 1/2/2.5 第 1/2/3 层）音频格式支持。它支持流式传输、ID3v2 帧、均衡器、.. ……”

人们已经使用它来[构建从 Shoutcast 流式传输的应用程序](http://forums.sun.com/thread.jspa?threadID=5351944)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-18T11:58:48.200

我认为您可以使用 SUN 的[Java Media Framework](http://java.sun.com/javase/technologies/desktop/media/jmf/)来实现您想要的。作为官方的 SUN 实施，这将是要走的路。我很确定实际的流媒体是原生的。

我查看了常见问题解答，并找到[了以下答案](http://java.sun.com/javase/technologies/desktop/media/jmf/reference/faqs/index.html#jmf2-streaming)：

> 问：JMF 2.1.1 是否支持流式传输？
> 
> 是的。JMF 2.1.1 提供 RTP/RTSP 流支持。
> 
> JMF 2.1.1 还在客户端提供 HTTP 和 FTP 流支持。

# internet-explorer - 有没有办法将 Internet Explorer 设置转储到文本文件？

> ID：657926
> 
> 赞同：15
> 
> 时间：2009-03-18T11:50:47.377
> 
> 标签：internet-explorer, settings

话题说明了一切。有些东西在我的一些客户的浏览器上不起作用，我们已将其缩小为 IE 错误，但如果有一种方法可以轻松比较 IE 的设置，那就太好了。

有人有想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-03T16:44:10.443

如果在 XP 及更高版本上：在命令提示符下，输入（带引号！）当前用户设置：

```
reg export "HKCU\Software\Microsoft\Internet Explorer" ie_hkcu.txt 
```

在命令提示符下，输入（带引号！）机器设置：

```
reg export "HKLM\Software\Microsoft\Internet Explorer" ie_hklm.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-03-18T11:55:09.690

如果这是在 XP 或 Vista 上，请尝试运行`gpedit.msc`，然后导航到`Local Computer Policy > Computer Configuration-> Administrative Templates > Windows Components > Internet Explorer`. 右键单击 Internet Explorer，您将能够导出所有设置。

如果您需要以编程方式执行此操作，您可以尝试查看配置单元中的 IE 注册表设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-07-27T15:22:55.483

与 John Feminella 的[回答](https://stackoverflow.com/questions/657926/is-there-any-way-to-dump-internet-explorer-settings-to-a-textfile/657943#657943)有关...如果您看不到“Internet Explorer”作为选项下`Local Computer Policy > Computer Configuration-> Administrative Templates > Windows Components`

1.  右键单击管理模板
2.  选择添加/删除模板
3.  选择添加...按钮
4.  从文件选择器中选择添加 inetres 模板 (inetres.adm)。我在 WinXP 上的 C:\Windows\inf 中找到了该模板

但是 - 导出所有功能似乎没有递归执行，也没有提供有关设置的详细信息。

替代方法 - 尝试“ [BackRex Internet Explorer Backup](http://www.backsettings.com/internet-explorer-backup.html) ”

# wcf - Serialize Entity Framework objects into JSON

> ID：657939
> 
> 赞同：46
> 
> 时间：2009-03-18T11:53:49.100
> 
> 标签：wcf, json, entity-framework, asp.net-ajax

It seems that serializing Entity Framework objects into JSON is not possible using either WCF's native DataContractJsonSerializer or ASP.NET's native JavaScript serializer. This is due to the reference counting issues both serializers reject. I have also tried [Json.NET](http://james.newtonking.com/projects/json-net.aspx), which also fails specifically on a Reference Counting issue.

* * *

**Edit:** Json.NET can now [serialize and deserialize Entity Framework entities](http://james.newtonking.com/archive/2009/07/10/ado-net-entity-framework-support-accidently-added-to-json-net.aspx).

* * *

My objects are Entity Framework objects, which are overloaded to perform additional business functionality (eg. authentication, etc.) and I do not want to decorate these classes with platform-specific attributes, etc. as I want to present a platform-agnostic API.

I've actually blogged about the individual steps I went though at [https://blog.programx.co.uk/2009/03/18/wcf-json-serialization-woes-and-a-solution/](https://blog.programx.co.uk/2009/03/18/wcf-json-serialization-woes-and-a-solution/)

Have I missed something obvious?

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2009-03-18T12:30:06.643

The way I do this is by projecting the data I want to serialize into an anonymous type and serializing that. This ensures that only the information I actually want in the JSON is serialized, and I don't inadvertently serialize something further down the object graph. It looks like this:

```
var records = from entity in context.Entities
              select new 
              {
                  Prop1 = entity.Prop1,
                  Prop2 = entity.Prop2,
                  ChildProp = entity.Child.Prop
              }
return Json(records); 
```

I find anonymous types just about ideal for this. The JSON, obviously, doesn't care what type was used to produce it. And anonymous types give you complete flexibility as to what properties and structure you put into the JSON.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-03-18T12:16:06.537

Microsoft made an error in the way they made EF objects into data contracts. They included the base classes, and the back links.

Your best bet will be to create equivalent Data Transfer Object classes for each of the entities you want to return. These would include only the data, not the behavior, and not the EF-specific parts of an entity. You would also create methods to translate to and from your DTO classes.

Your services would then return the Data Transfer Objects.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-02-23T12:05:51.313

My solution was to simply remove the parent reference on my child entities.

So in my model, I selected the relationship and changed the Parent reference to be Internal rather than Public.

May not be an ideal solution for all, but worked for me.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-10T17:50:32.950

Based off of @Craig Stuntz answer and similar to a DTO, for my solution I have created a partial class of the model (in a separate file) and a return object method with how I want it using only the properties that will be needed.

```
namespace TestApplication.Models
{
    public partial class Employee
    {
        public object ToObject()
        {
            return new
            {
                 EmployeeID = EmployeeID,
                 Name = Name,
                 Username = Username,
                 Office = Office,
                 PhoneNumber = PhoneNumber,
                 EmailAddress = EmailAddress,
                 Title = Title,
                 Department = Department,
                 Manager = Manager
            };
        }
    }
} 
```

And then I call it simply in my return:

```
var employee = dbCtx.Employees.Where(x => x.Name == usersName).Single();
return employee.ToObject(); 
```

I think the accepted answer is more quick and easy, I just use my method to keep all of my returns consistent and DRY.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-09-26T14:53:35.887

One more solution if you want to have better code consistency is to use JavaScriptConverter which will handle circular reference dependencies and will not serialize such references.

I've blogged about here:

[http://hellowebapps.com/2010-09-26/producing-json-from-entity-framework-4-0-generated-classes/](http://hellowebapps.com/2010-09-26/producing-json-from-entity-framework-4-0-generated-classes/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-28T10:10:32.093

FYI I found an alternative solution

You can set the parent relationship as private so then the properties are not exposed during the translation removing the infinite property loop

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-24T13:35:01.860

I battled with this problem for days,

Solution. Inside your edmx window. - right click and add code generation item - Select Code tab - select EF 4x.POCOC Entity Generator

If you don't see it, then you will have to install it with nuget, search EF.

The Entity generator will generate all you complex type and entity object into simple classes to serialize into json.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-01-03T13:02:03.103

I solved it by getting only object types from System namespace, and then convert them to Dictionary and then add them to list. Works good for me :)

It looks complicated, but this was the only generic solution that worked for me... I'm using this logic for a helper I'm making, so it's for a special use where I need to be able to intercept every object type in entity object, maybe someone could adapt it to his use.

```
List<Dictionary<string, string>> outputData = new List<Dictionary<string, string>>();

// convert all items to objects
var data = Data.ToArray().Cast<object>().ToArray();

// get info about objects; and get only those we need
// this will remove circular references and other stuff we don't need
PropertyInfo[] objInfos = data[0].GetType().GetProperties();
foreach (PropertyInfo info in objInfos) {
    switch (info.PropertyType.Namespace)
    { 
          // all types that are in "System" namespace should be OK
          case "System":
              propeties.Add(info.Name);
              break;
     }
}
Dictionary<string, string> rowsData = null;
foreach (object obj in data) {
     rowsData = new Dictionary<string, string>();
     Type objType = obj.GetType();
     foreach (string propertyName in propeties)
     {
//if You don't need to intercept every object type You could just call .ToString(), and remove other code
         PropertyInfo info = objType.GetProperty(propertyName);
         switch(info.PropertyType.FullName)
         {
               case "System.String":
                    var colData = info.GetValue(obj, null);
                    rowsData.Add(propertyName, colData != null ? colData.ToString() : String.Empty);
                    break;
//here You can add more variable types if you need so (like int and so on...)
           }
      }

      outputData .Add(rowsData); // add a new row
} 
```

"outputData " is safe for JSON encode... Hope someone will find this solution helpful. It was fun writing it :)

# java - Java 中不弃用的 Date(String s) 的完全等价物？

> ID：657962
> 
> 赞同：27
> 
> 时间：2009-03-18T12:00:21.767
> 
> 标签：java, date

我有`new Date(dateString)`用于解析日期字符串的旧代码。编译代码会产生弃用警告*`Date(java.lang.String) in java.util.Date has been deprecated`*。

javadoc 无益地建议我使用`DateFormat.parse()`，即使`DateFormat`该类没有静态`parse`方法。

现在，我知道如何使用`SimpleDateFormat`，但我想确保获得与弃用的构造函数**完全相同的行为**`Date`。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-03-18T12:06:53.000

这是我的猜测（我发布为社区 wiki，所以如果我是对的，你可以投票）：

```
Date parsed;
try {
    SimpleDateFormat format =
        new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy");
    parsed = format.parse(dateString);
}
catch(ParseException pe) {
    throw new IllegalArgumentException(pe);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-18T12:41:23.120

SimpleDateFormat 是要走的路。但是，我能否指出，您可能觉得有必要定义一个 SimpleDateFormat 实例并使用它构建 Date 对象。如果这样做，请注意 SimpleDateFormat 不是线程安全的，您可能会遇到一些潜在的难以调试的问题！

我建议借此机会看看[Joda](http://joda-time.sourceforge.net/)，它是一个经过深思熟虑（和线程安全）的 API。它构成了 JSR-310 的基础，这是新提议的 Java Date API。

我知道这是一个多一点的工作。但是，考虑到您目前必须重构代码，这可能是值得的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-18T13:09:46.173

如果您查看 Nicolas 提到的 Date.parse(String s) 方法的来源，您会发现很难或不可能构建**准确**再现该行为的日期格式。

如果你只是想消除警告，你可以把`@SuppressWarnings({“deprecation”})`调用 Date(String) 构造函数的方法放在外面。

如果您真的想确保将来使用未来的 JRE 访问此行为，您也许可以从 JDK 源中提取该方法并将其放入您自己的源中。这需要仔细阅读源代码许可证并考虑将它们应用于您的特定项目，并且可能根本不允许。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-18T12:05:38.980

DateFormat 具有返回 DateFormat 实例的静态方法。我不知道哪一个（如果有的话）有相同的行为，`Date(String s)`但你去：

```
DateFormat.getInstance()
DateFormat.getDateInstance()
DateFormat.getTimeInstance()
DateFormat.getDateTimeInstance() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-18T12:13:37.133

简短的回答（在进一步调查之前）是：不，它不等同。Date(String toParse) 构造函数等效于 Date 类的 parse 方法（也已弃用）......并且该方法的[javadoc](http://java.sun.com/javase/6/docs/api/java/util/Date.html#parse(java.lang.String))声称：

> 请注意，这与 SimpleDateFormat 中使用的小于 100 年的解释略有不同。

如果这是唯一的变化，我想你可以继续这样下去。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-10T17:36:53.367

要解析 ISO 格式的日期时间字符串，您应该像这样使用 DateFormat：

`java.text.DateFormat.getDateInstance().parse(dt);`

使用 SimpleDateFormat，您需要知道格式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-11T22:28:09.057

# c++ - 使用 NULL 引用可以吗？

> ID：657964
> 
> 赞同：12
> 
> 时间：2009-03-18T12:00:58.523
> 
> 标签：c++

我遇到了这段代码：

```
void f(const std::string &s); 
```

然后打电话：

```
f( *((std::string*)NULL) ); 
```

我想知道其他人对这种结构的看法，它用于表示函数 f() 应该使用一些默认值（它计算）而不是一些用户提供的值。

我不知道该怎么想，它看起来很奇怪，但你觉得这个结构怎么样？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2009-03-18T12:03:56.097

不，这是未定义的行为，可能导致代码做任何事情（包括重新格式化硬盘、核心转储或侮辱你的母亲）。

如果您需要能够传递 NULL，则使用指针。接受引用的代码可以假定它引用了一个有效的对象。

* * *

附录：C++03 标准（ISO/IEC 14882，2003 年第 2^版）在第 8.3.2 节“参考”第 4 段中说：

> 应初始化引用以引用有效的对象或函数。[*注意：*特别是，空引用不能存在于定义良好的程序中，因为**创建此类引用的唯一方法是将其绑定到通过取消引用空指针获得的“对象”，这会导致未定义的行为。**如 9.6 中所述，引用不能直接绑定到位域。]

[加粗强调]

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-03-18T22:00:17.940

你有时会在相当深奥的模板库代码中看到这样的结构，但只`sizeof()`在它无害的地方。

假设你想知道一个类函数类型的返回类型的大小，`F`如果它作为参数传递了一个类型的引用`T`（这两个都是模板参数）。你可以写：

```
sizeof(F(T())) 
```

但是如果 T 碰巧没有公共默认构造函数怎么办？所以你这样做：

```
sizeof(F(*((T *)0))) 
```

传递给`sizeof`永远不会执行的表达式 - 它只是被分析到编译器知道结果大小的地步。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-03-18T12:42:28.813

我很好奇 - 函数“f”是否真的检查这种情况？因为如果它没有，并且它尝试使用该字符串，那么当您尝试使用它时，这显然会崩溃。

如果 'f' 确实检查了 NULL 的引用，那为什么不只是使用指针呢？是否有一些硬性规定，您不会使用指针，并且某些傻瓜遵守法律条文而不考虑其含义？

我只是想知道...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-03-18T12:32:37.510

> 使用 NULL 引用可以吗？

不，除非你不喜欢你的老板和你的工作；）

这是非常糟糕的事情。最重要的参考点之一，它不能为 NULL（除非你强制它）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-03-18T17:12:45.683

对于这种情况，您可以制作“空对象”，它将起到零指针的作用

```
class Foo
{
static Foo empty;
public:
  static bool isEmpty( const Foo& ref )
  {
    return &ref==&empty;
  }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-03-18T21:47:41.093

正如其他人已经说过的那样：引用必须是有效的。这就是为什么它是引用而不是指针的原因。

如果你想让 f() 有一个默认行为，你可能想使用这个：

```
static const std::string default_for_f;

void f(const std::string &s = default_for_f)
{
    if (&s == &default_for_f)
    {
        // make default processing
    }
    else
    ...
}
...
void bar()
{
    f();              // call with default behavior
    f(default_for_f); // call with default behavior
    f(std::string()); // call with other behavior
} 
```

您可以保留 f() 的默认参数。（有些人讨厌默认参数。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-18T22:09:53.237

```
f( *((std::string*)NULL) ); 
```

这本质上是取消对 NULL 的引用，在大多数系统上，它的 #defined 为 0。最后我检查了 0x00000000 是一个**无效**的内存地址，无法执行任何操作。

不管发生了什么只是检查

```
if (std::string.length() > 0) .... 
```

# javascript - Firefox中绕过浏览器缓存？

> ID：657966
> 
> 赞同：4
> 
> 时间：2009-03-18T12:02:44.167
> 
> 标签：javascript, html, firefox, caching, firebug

考虑以下 html 页面，它可以加载许多大型 png 文件：

```
<html>
<head>
    <script type="text/javascript">

        function hide( ) {
            document.getElementById("here").innerHTML = "hidden";
        }    
        function show( ) {
            var loadMe = "";
            for (var i=1; i<250; i++) {
                loadMe += "<img src='http://example.com/" + i + "_a.png'><br>";
                loadMe += "<img src='http://example.com/" + i + "_b.png'><br>";
        }
        document.getElementById("here").innerHTML = loadMe;
    }
</script>
</head>
<body>
    <a href="javascript:hide();">hide</a>
    <a href="javascript:show();">show</a>
    <div id="here"></div>
</body>
</html> 
```

在 Windows 机器上的 IE、Safari 和 Opera 中，此页面上的图像仅在切换显示和隐藏按钮时加载一次（使用 FreeMeter 监控）。

但是，在 Firefox（新安装）中，*一些*图像会从服务器多次加载（我们永远不会匹配网络请求的初始峰值......一些东西是从缓存中加载的）。

图像的响应标头读取：

```
Date              Wed, 18 Mar 2009 11:42:02 GMT
Server            Apache/2.2.3 (Red Hat)
Last-Modified     Mon, 27 Oct 2008 19:19:47 GMT
Etag              "1abb7d7-292-45a41039f7ac0"
Accept-Ranges     bytes
Content-Length    658
Cache-Control     max-age=7257600
Expires           Thu, 15 Apr 2010 20:00:00 GMT
Connection        close
Content-Type      image/png 
```

查看**`about:cache`**，大多数加载的图像似乎都列在那里（尽管检查`hide`/`show`点击之间的缓存，似乎缺少图像）：

```
Number of entries:  462
Maximum storage size:   50000 KiB
Storage in use:     5593 KiB

...

Key: http://example.com/23_a.png
Data size: 16139 bytes
Fetch count: 13
Last modified: 2009-03-18 07:40:14
Expires: 2009-06-10 07:40:00 
```

Firefox 期望我从缓存中重新加载这些图像，以便我们可以轻松地进行网络调用？谢谢！

* * *

**更新**

如果我在第一个选项卡中显示/隐藏后在新选项卡中打开此页面，则第二个选项卡不会发出网络请求。第一个选项卡继续发出网络请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-20T01:13:18.710

该错误在[此处描述](https://bugzilla.mozilla.org/show_bug.cgi?id=290032)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T12:10:31.073

我不能告诉你为什么 Firefox 会这样（或者更好的是，如何覆盖这种行为），但我会建议一种不同的方法来规避这个问题。与其一遍又一遍地构建 HTML 字符串并`img`从 DOM 中完全删除这些元素，为什么不使用外部容器`div`和`show`/构建`hide`一次`div`？这样，`img`s 始终是 DOM 的一部分（Firefox 很可能不会觉得需要从缓存中删除图像）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T12:14:32.560

除了 Rich 的回答之外，您还可以尝试更改一些 Firefox 缓存[配置值](http://kb.mozillazine.org/Firefox_:_FAQs_:_About:config_Entries)，看看它们是否会改变行为：

```
browser.cache.check_doc_frequency
browser.cache.disk.capacity
browser.cache.memory.capacity 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-03-18T12:27:15.540

另一种消除缓存命中、提高页面性能和减少网络拥塞（一般来说，每个域一次只执行两个请求）的方法是使用[CSS Sprites](http://www.alistapart.com/articles/sprites/ "CSS 精灵")。

如果所有图像的大小都相似，请将其中的一些组合起来并使用 CSS 来控制图像的显示位置。您将保存每个附加图像的 HTTP 请求并显着增强页面。许多较大的网站（例如 Yahoo!）使用这种技术。

# iphone - 创建 iPhone 地图应用程序

> ID：657972
> 
> 赞同：2
> 
> 时间：2009-03-18T12:05:18.480
> 
> 标签：iphone, uiwebview

如何为 Iphone 创建地图应用程序。我知道 UIwebView 可以用来显示地图。但是 iPhone 上是否有任何可用的原生 API（原生 iphone 地图应用程序使用）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-03-18T13:53:42.683

我认为您必须等到 iPhone OS 3.0 才能访问[Map Kit 框架](http://developer.apple.com/iphone/program/sdk.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-03-18T19:42:26.323

看看 CloudMade 的简单框架：

[http://developers.cloudmade.com/projects/show/iphone-api](http://developers.cloudmade.com/projects/show/iphone-api)

我在一个简单的应用程序中使用它来定位您的位置。它位于导航部分的 PinDrop 下的 App Store 中。

该框架确实很粗糙，但它可以满足我的需要。当 3.0 出来时，我会更新使用谷歌地图。到那时，它的工作原理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-04T10:17:37.170

CloudMade 的 iPhone 库上手速度很快，可以让您将地理编码和路由添加到您的 iPhone 应用程序中，但无疑是非常基本的。许多使用 CloudMade 服务（如定制地图、地理编码和路由）的开发人员使用“Route-Me”库。Route-Me 是一个开源库，使用核心动画添加捏缩放、平移等效果。它已用于热门的 iPhone 应用程序，如 Trails 和 [Offmaps][2] - 这两个应用程序都使用 CloudMade 平台和 Route-Me 库。

通过将 CloudMade 的路由、地理编码和自定义地图与出色的 Route-Me 库相结合，您可以创建比使用 MapKit 所做的任何事情都更先进的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T15:16:55.493

创建地图目前涉及查看[Map Ninja](https://www.mapninja.com/start)等框架。Map Kit 框架可能会取代它，具体取决于您想要做什么......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-04T08:28:13.660

您应该真正使用 Cloudmade 框架，因为 Apple、Google 和 TomTom（拥有 Google 使用的地图）的 MapKit 存在一些许可问题。这有具体的缺点，因此 MapKit 中没有前向地理编码。

但是 Cloudmade 发布了很多教程如何使用那里的框架。这并不难，您可以将 MapKit 与 Cloudmade 一起使用来改进 MapKit 中缺少的功能。

# c++ - “Event ID 26 Source Application Popup”之类的错误如何提供帮助

> ID：657973
> 
> 赞同：0
> 
> 时间：2009-03-18T12:05:20.133
> 
> 标签：c++, windows-services, debugging, crash

我有这个错误，就像在服务窗口一样，每周发生一次或更多次： *应用程序弹出窗口：**application_name** - 应用程序错误：memory_location 处的指令**引用了 memory_location****处**的内存。无法“读取”内存。*

 ***   生产环境;
*   多线程应用程序；
*   每个线程执行一个任务；
*   源代码是 C++、VC8；
*   在发布版本中有一个 PDB 文件；
*   使用UDP与客户端通信；
*   无法重现开发环境中的错误；
*   导致错误的线程中止；
*   总是在崩溃时停止的同一个线程；

如何在以下信息的源中找到导致此错误的代码：“内存位置”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T12:28:57.190

这听起来像是一个指针问题。一个好的开始是使 Dr. Watson 能够获取故障转储并将转储文件加载到 Visual Studio 中。首先阅读[Dr. Watson](http://msdn.microsoft.com/en-us/library/cc265793.aspx)使用指南。

您可能还想考虑使用调试监视器。在某些情况下，我发现它比 Dr. Watson 更有用。我能找到下载它的唯一链接是来自 Microsoft 的 FTP 站点。这是地址：`ftp://ftp.microsoft.com/PSS/Tools/Developer Support Tools/DebugMonitor/`

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T15:48:26.197

你可以把每个线程在block try() 中捕获。在未处理异常的情况下 - 使用 API 函数 MiniDumpWriteDump 生成的 crashdump

PS。在 catch 块中使用此函数，您可以生成故障转储，并将此转储通过电子邮件发送给开发人员。这是标准的解决方案。

# compact-framework - compact framework 3.5 应用程序无法在 windows mobile 6.1 上运行

> ID：657974
> 
> 赞同：0
> 
> 时间：2009-03-18T12:05:27.170
> 
> 标签：compact-framework, smartphone

但是可以运行紧凑的框架 2.0 程序。

手机上安装了compact 3.5？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T12:45:46.153

我不认为所有 Windows Mobile 6.1 手机都预装了 3.5 版本。您可以通过读取注册表项来检测安装了哪个版本的紧凑框架：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETCompactFramework 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T12:54:16.570

CF 3.5 是 OEM 安装的一个*选项*，不是必需的，所以它可能不在您的手机上。运行 \Windows 文件夹中的 cgacutil.exe 以使其报告所有已安装的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-25T01:04:27.960

如果您的手机没有 NETCF 3.5，此 Microsoft 网页显示（我认为）您可以在 WM6 设备上安装 NETCF 3.5：

[NET Compact Framework 3.5 可再发行组件](http://www.microsoft.com/downloads/details.aspx?FamilyID=E3821449-3C6B-42F1-9FD9-0041345B3385&displaylang=en)

（你的问题很不清楚；我不确定你是说设备已经安装了 NETCF 3.5，还是你在问是否是。）

# apache-flex - Ant Flex 问题

> ID：657980
> 
> 赞同：0
> 
> 时间：2009-03-18T12:06:48.850
> 
> 标签：apache-flex, ant, cairngorm, remoteobject

我的 Cairngorm 程序在允许 Cairngorm 的 ServiceLocator 开始使用相同的 RemoteObject 获取业务数据之前对 RemoteObject 进行了一些初步验证。Flex Builder 一切正常，但我需要一个 Ant 构建。Ant mxmlc 任务编译一切正常，但在运行时生成的代码在 Cairngorm 的 RemoteObjects 类的 getService() 方法处失败，因为它找不到服务。

这可能是因为 Cairngorm 代码在 Ant 驱动的编译中的链接方式不同？在由 -dump-config 生成的文件中（这个文件很好，在命令行上与 mxmlc 一起使用）唯一对 Cairngorm swc 的引用在这个元素中：

```
<库路径>
     <路径元素>\路径\到\目录\包含\Cairngorm.swc</路径元素>
</库路径>

```

我的 build.xml 中的相应元素是

```
<compiler.library-path dir="${basedir}" append="true">
    <include name="libs"/>
</compiler.library-path>

```

除了在 FB 输出和我的 build.xml 中将 static-link-runtime-shared-libraries 显式设置为 true 之外，我看不到任何会影响 Cairngorm 链接方式的内容。也许我的链接理论都是错误的？但是，当从同一个 SWF 中的其他地方访问同一个 RemoteObject 正常时，还有什么可能导致 Cairngorm 的远程访问失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-07-01T17:49:55.283

听起来 ANT 构建可能缺少在配置 RemoteObject 端点的*services-config.xml*文件中编译的*-services标志。*

 *在 FlexBuilder 中，查看项目属性并导航到 Flex Compiler 窗格。您应该看到“附加编译器参数”字段。确保将这些相同的附加参数传递给 ANT 编译任务。您正在寻找类似“-services services-config.xml”的内容

# java - 如何在我们的 web mvc 项目中组织我的 java 包？

> ID：657982
> 
> 赞同：2
> 
> 时间：2009-03-18T12:06:53.250
> 
> 标签：java, architecture, package

关于我应该如何为我的 java 项目组织类包，你有什么好的建议吗？

我们通常在构建 Web MVC 项目，我们的结构是这样的

com.company.project.model.* - 所有模型类 com.company.project.service.* - 所有服务类 com.company.project.service.entity.* - 与特定模型类 com.company.project 相关的服务类.service.dao.* - dao 类

这似乎有点臭...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T12:57:53.003

使用现代 IDE 时，它可能不会对开发人员产生太大影响 - 就我个人而言，我第一次使用 Eclipse 需要它时添加包，之后就忘记了。从性能的角度来看，仅列出所需的类不会获得任何好处 - 使用 * 符号不会导致使用更多内存或降低应用程序的速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T13:04:26.873

我们也是偷懒的，如果你需要一个包就加一个，我想如果你有更多的包，你会更快地找到一个类...

# c# - 如何将 DateTimePicker 设置为只读？

> ID：657983
> 
> 赞同：14
> 
> 时间：2009-03-18T12:07:13.920
> 
> 标签：c#, winforms, .net-2.0

我有一个 DateTimePicker（可空版本），我需要只读。如果显示器被禁用，我对显示器不满意，所以想知道是否有人有一个很好的例子来说明如何停止现场更新？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-06-27T09:41:29.967

我知道这已经很老了，但为了帮助其他人搜索这个（因为这是我通过谷歌找到的第一个）你可以使用：

```
this.dateTimePicker1.Enabled = false; 
```

使其行为方式与 aa 文本框相同`this.textbox1.ReadOnly = true`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-03-18T12:21:15.727

您可以挂钩 Changed 事件，并将值设置回您想要的值（如果不同） - 这样您将涵盖任何更改原因（通过鼠标或键盘）

您是否考虑过使用不同的控件，例如只读文本框甚至是标签控件？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-12T23:25:12.287

这个问题 - 六年后 - 似乎仍然引起了一些兴趣，所以我会投入 2 美分：对我有用的是 1）制作一个 UserControl 并将基类更改为 DateTimePicker 2）拍摄一个小位图快照每当值更改时控件 3) 拦截 WM_PAINT 消息，如果我们的控件被禁用，则绘制位图而不是控件。（注意：designer.cs 中的 AutoScaleMode 属性会导致编译错误，因此只需删除）

```
public partial class DateTimePickerWithReadOnly : DateTimePicker
{
  Bitmap ReadOnlyImage;
  // We maintain a "shadow" control to avoid capturing selections in the snapshot.
  // If you use different formatting or styles just make sure the shadow is set to match!
  DateTimePicker Shadow = new DateTimePicker(); 
  public DateTimePickerWithReadOnly()
  {
    InitializeComponent(); 
    CaptureBitmap();
    this.ValueChanged += new EventHandler(DateTimePickerWithReadOnly_ValueChanged);
  }
  private void CaptureBitmap()
  {
    Shadow.Value = Value;
    Shadow.Size = Size;
    ReadOnlyImage = new Bitmap(Width, Height);
    Shadow.DrawToBitmap(ReadOnlyImage, new Rectangle(0, 0, Size.Width, Size.Height));
  }
  void DateTimePickerWithReadOnly_ValueChanged(object sender, EventArgs e)
  {
    CaptureBitmap();
  }
  protected override void DefWndProc(ref Message m)
  {
    base.DefWndProc(ref m);
    // WM_PAINT is 0x000F
    if ((m.Msg == 0x000F) && !Enabled)
    {
      Graphics g = base.CreateGraphics();
      g.DrawImage(ReadOnlyImage, new Rectangle(0, 0, Size.Width, Size.Height));
      g.Dispose();
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-18T17:37:05.103

作为另一个建议：使用文本框（或标签）并使其只读。在其中显示您想要的值。

如果您必须有一个 datetimepicker，请同时创建一个 datetimepicker 和一个文本框。将它们叠放在一起。当您需要 datetimepicker 时，隐藏文本框。等等。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-21T13:38:48.760

在 Keydown 上：e.SuppressKeyPress = true；为我工作，仍然可以选择日期，但无法手动输入

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-03-18T14:40:03.677

> “如果显示器被禁用，我对显示器不满意”

为什么？如果是因为禁用的文本框看起来很奇怪，您可以更改禁用的样式以使其看起来正常，或者以更漂亮的方式指示它只接受通过日期选择器的输入。可能没有边界，说它不是真正的文本框。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-14T22:07:52.150

我这样做的一种方法是将允许的日期范围简单地限制为单个值。

```
dateTimePicker.MinDate = dateTimePicker.Value;
dateTimePicker.MaxDate = dateTimePicker.Value; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-07T12:04:36.427

我知道它已经过时了，但我讨厌找到仍然相关但没有解决方案的问题。顺便说一句，您可能不想禁用它的原因是您无法轻松显示工具提示和自定义背景色（尽管这可以更轻松地解决）

无论如何，我找到了我相信这个问题的解决方案（感谢其他地方的其他人）。我已经有了 DateTimePicker 的自定义控件。

然后我添加了一个 Readonly 属性。我的问题出在 VB.Net 项目中

如果 Readonly = True，则覆盖 KeyDown 事件并标记为已处理。

```
Protected Overrides Sub OnKeyDown(e As KeyEventArgs)
  If mReadOnly Then
    e.Handled = True
  Else
    MyBase.OnKeyDown(e)
  End If
End Sub 
```

这负责箭头键和 F4 下拉键。

然后要禁用下拉菜单，请覆盖 WndProc 方法：

```
Protected Overrides Sub WndProc(ByRef m As Message)
  '   m.Msg = 0x201 / &H201 = WM_LBUTTONDOWN
  '   m.Msg = 0x203 / &H203 = WM_LBUTTONDBLCLK
  If ReadOnly And (m.Msg = &H201 Or m.Msg = &H203) Then
    Return
  End If
  MyBase.WndProc(m)
End Sub 
```

为了使它在我的 OnPaint 覆盖中看起来是只读的，我有以下内容：

```
Protected Overrides Sub OnPaint(ByVal e As System.Windows.Forms.PaintEventArgs)

Dim g As Graphics = Me.CreateGraphics()

Dim dropDownIcon As Rectangle = New Rectangle(ClientRectangle.Width - 17, 0, 17, ClientRectangle.Height)
Dim b As Brush
Dim v As VisualStyles.ComboBoxState
Dim vn As ButtonState

b = New SolidBrush(Me.BackColor)

If Me.IsReadOnly Then
  v = VisualStyles.ComboBoxState.Disabled
  vn = ButtonState.Inactive
Else
  b = New SolidBrush(Me.BackColor)
    v = VisualStyles.ComboBoxState.Normal
    vn = ButtonState.Normal
  End If

'changed to only do this if the control is visible
If Me.Visible = True Then

  'colour rectangle
  g.FillRectangle(b, 0, 0, ClientRectangle.Width, ClientRectangle.Height)

  'for border 
  g.DrawRectangle(System.Drawing.SystemPens.ActiveBorder, 0, 0, ClientRectangle.Width - 1, ClientRectangle.Height - 1)

  'for text
  g.DrawString(Me.Text, Me.Font, New SolidBrush(Me.ForeColor), 0, 2)

  'we need to render the dropdown when visual styles is not turned on
  If ComboBoxRenderer.IsSupported Then
    ComboBoxRenderer.DrawDropDownButton(g, dropDownIcon, v)
  Else
    ControlPaint.DrawComboButton(g, dropDownIcon, vn)
  End If
End If

g.Dispose()
b.Dispose()
End Sub 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-03-18T12:13:30.490

处理 DateTimePicker.MouseClick 事件并将 event.handled 设置为 true

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-29T11:19:24.703

只选择 Changed 事件并设置 e.Cancel = true 怎么样？

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-05-23T14:28:26.870

不是最好的方法，但这确实会停止通过 keyUp 更新日期时间

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
    }

    private DateTime originalValue;

    private void dateTimePicker1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        originalValue = dateTimePicker1.Value;
    }

    private void dateTimePicker1_ValueChanged(object sender, EventArgs e)
    {
        dateTimePicker1.Value = originalValue;
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-12T05:19:44.197

1.  我们必须首先记住原始日期时间。

    ```
    procedure TForm1.dtpDateEnter(Sender: TObject);
    begin
      oldDtpDate := dtpDate.DateTime;
    end; 
    ```

2.  过程 TForm1.dtpDateClick(Sender: TObject); 开始 dtpDate.DateTime := oldDtpDate; 结尾;

    ```
    procedure TForm1.dtpDateExit(Sender: TObject);
    begin
      dtpDate.DateTime :=  oldDtpDate;
    end; 
    ```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-06T06:36:00.827

```
this.dateTimePicker1.Enabled = false; 
```

它是简单而完美的解决方案之一。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-05-29T12:17:18.657

`dateTimePicker2.Enabled = false;`

* * *

## 回答 #15

> 赞同：-4
> 
> 时间：2010-11-24T18:55:40.543

试试这个：

```
private void dateTimePicker1_ValueChanged(object sender, EventArgs e)
    {
        dateTimePicker1.Value = DateTime.Now;
    } 
```

# xml - 转换 XML 文档以与 .NET 2.0 TreeView 控件一起使用

> ID：657984
> 
> 赞同：1
> 
> 时间：2009-03-18T12:07:50.877
> 
> 标签：xml, xslt, treeview, .net-2.0, xslt-1.0

我有一个 XML 文件，格式如下：

```
<root>
  <category>
    <doctype>
      <name>Doc1</name>
      <site>
        <name>Site1</name>
        <target>iframe</target>
        <url>http://www.gmail.com</url>
      </site>
    </doctype>
    <doctype>
      <name>Doc2</name>
      <site>
        <name>Site2</name>
        <target>iframe</target>
        <url>http://www.bbc.co.uk</url>
      </site>
    </doctype>
  </category>
</root> 
```

我需要在标准 .net 2.0 TreeView 控件上使用它，该控件需要以下格式的 XML

```
<root>
  <category>  
    <doctype name="Doc1">
      <site name = "Site1" target = "iframe" url = "http://www.gmail.com">
      </site>
    </doctype>
    <doctype name="Doc2">
      <site name = "Site2" target = "iframe" url = "http://www.bbc.co.uk">
      </site>
    </doctype>
  </category>
</root> 
```

最大的复杂性是 DOCTYPE 节点的一些子节点需要转换为属性（即 NAME），而有些则保留为需要它们自己的属性的子节点（即 SITE）。

如何使用 XSLT 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-18T12:31:46.093

以下 XSLT 1.0 转换符合您的预期。

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="root | category | doctype | site">
    <xsl:copy>
       <xsl:apply-templates select="*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="name | target | url">
    <xsl:attribute name="{local-name()}">
      <xsl:value-of select="." />
    </xsl:attribute>
  </xsl:template>

</xsl:stylesheet> 
```

输出：

```
<root>
  <category>
    <doctype name="Doc1">
      <site name="Site1" target="iframe" url="http://www.gmail.com"></site>
    </doctype>
    <doctype name="Doc2">
      <site name="Site2" target="iframe" url="http://www.bbc.co.uk"></site>
    </doctype>
  </category>
</root> 
```

# ajax - Ajax 响应的字符串值的分隔符

> ID：657985
> 
> 赞同：3
> 
> 时间：2009-03-18T12:07:57.740
> 
> 标签：ajax

我有一个 javascript 函数，当用户在 ipyt 框中键入一个字母时，它会在 div 中填充相关项目的列表。我在我的 ajax 调用中调用了一个 aspx（C# -codebehind 页面）页面，并且该 aspx 页面将返回输出为由 | 分隔的字符串 （管道符号）。但是如果字符串项包含 |，我的代码就会中断。符号本身。对于正常情况，我的项目是 Item1, Item2,Item 3 并获得每个值。如果项目包含管道符号 Ex : Ite|m1 拆分脚本正在刹车。谁能告诉我如何解决这个问题。是否有任何字符不存在于 keyboeard 中，我可以将其用作分隔符

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T12:16:02.260

我认为您应该尝试使用 JSON（[主页](http://www.json.org)/[维基百科](http://en.wikipedia.org/wiki/Json)）而不是连接/拆分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-18T12:22:44.663

过去我用过 ~ 和 | 's 然后忽略了那些按键事件，但我同意 andi - json 是一种更好的方法

# java - 开闭原则和Java“final”修饰符

> ID：657987
> 
> 赞同：24
> 
> 时间：2009-03-18T12:08:58.377
> 
> 标签：java, open-closed-principle

开闭原则指出“软件实体（类、模块、函数等）应该对扩展开放，对修改关闭”。

然而，Joshua Bloch 在他的名著《Effective Java》中给出了以下建议：“设计和记录继承，否则禁止它”，并鼓励程序员使用“final”修饰符来禁止子类化。

我认为这两个原则显然相互矛盾（我错了吗？）。您在编写代码时遵循哪个原则，为什么？您是让您的类保持打开状态，禁止对其中一些类（哪些类？）进行继承，还是尽可能使用 final 修饰符？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-03-18T12:17:49.433

坦率地说，我认为开放/封闭原则与其说是不合时宜的，不如说是不合时宜的。它似乎来自 80 年代和 90 年代，当时 OO 框架建立在一切都必须从其他东西继承并且一切都应该是可子类化的原则之上。

这在 MFC 和 Java Swing 等时代的 UI 框架中最为典型。在 Swing 中，您有荒谬的继承，其中 (iirc) 按钮扩展复选框（或相反）给其中一个未使用的行为（我认为这是它对复选框的 setDisabled() 调用）。为什么他们有共同的祖先？没有别的原因，好吧，他们有一些共同的方法。

如今，组合比继承更受青睐。Java 默认允许继承，而.Net 采用了（更现代的）默认禁止继承的方法，我认为这更正确（并且更符合 Josh Bloch 的原则）。

DI/IoC 也进一步说明了组合的情况。

Josh Bloch 还指出继承破坏了封装，并给出了一些很好的例子来说明原因。还证明，如果通过委托而不是扩展类来更改 Java 集合的行为，则更加一致。

就我个人而言，这些天来，我在很大程度上认为继承只不过是一个实现细节。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-03-18T12:13:58.380

我不认为这两种说法相互矛盾。一个类型可以对扩展开放，对继承仍然关闭。

一种方法是使用依赖注入。一个类型可以在创建时提供这些实例，而不是创建它自己的辅助类型的实例。这允许您更改类型的部分（即打开以进行扩展）而不更改类型本身（即关闭以进行修改）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-03-18T12:15:10.407

在[开闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)（对扩展开放，对修改关闭）您仍然可以使用 final 修饰符。这是一个例子：

```
public final class ClosedClass {

    private IMyExtension myExtension;

    public ClosedClass(IMyExtension myExtension)
    {
        this.myExtension = myExtension;
    }

    // methods that use the IMyExtension object

}

public interface IMyExtension {
    public void doStuff();
} 
```

对类内部的`ClosedClass`修改关闭，但对通过另一个类的扩展开放。在这种情况下，它可以是任何实现`IMyExtension`接口的东西。这个技巧是依赖注入的一种变体，因为我们正在向封闭类提供另一个，在这种情况下是通过构造函数。由于扩展是一个`interface`它不能，`final`但它的实现类可以。

在 java 中对类使用 final 来关闭它们类似于`sealed`在 C# 中使用。在 .NET 方面也有[类似的讨论。](https://stackoverflow.com/questions/252257/why-arent-classes-sealed-by-default)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-18T12:20:56.273

我非常尊重 Joshua Bloch，我认为**Effective Java**几乎就是**Java 圣经**。但我认为自动默认`private`访问通常是一个错误。我倾向于`protected`默认设置，以便至少可以通过扩展类来访问它们。这主要是出于对组件进行单元测试的需要，但我也发现它可以方便地覆盖类的默认行为。当我在自己公司的代码库中工作并最终不得不复制和修改源代码时，我发现这很烦人，因为作者选择“隐藏”所有内容。如果它完全在我的权力范围内，我会游说更改访问权限`protected`以避免重复，恕我直言，这要糟糕得多。

还要记住，Bloch 的背景是设计**非常** **公共**的基础 API 库；获得此类代码“正确”的标准必须设置得非常高，因此很可能与您将编写的大多数代码的情况不同。重要的库（例如 JRE 本身）往往更具限制性，以确保该语言不被滥用。查看JRE 中所有**已弃用的 API？**几乎不可能更改或删除它们。你的代码库可能不是一成不变的，所以如果你最初犯了一个错误，你*确实*有机会解决问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-03-18T12:32:38.680

现在我默认使用 final 修饰符，几乎反射性地作为样板的一部分。当您知道给定方法将始终按照您现在正在查看的代码中看到的那样运行时，它使事情变得更容易推理。

当然，有时在某些情况下，类层次结构正是您想要的，那么不使用它会很愚蠢。但是要害怕超过两个级别的层次结构，或者非抽象类被进一步细分的层次结构。一个类应该是抽象的或最终的。

大多数时候，使用组合是要走的路。将所有常见的机器归为一个类，将不同的案例归为不同的类，然后将实例组合成工作整体。

您可以将其称为“依赖注入”、“策略模式”或“访问者模式”或其他任何名称，但归结为使用组合而不是继承来避免重复。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-03-18T13:18:18.553

两种说法

> 软件实体（类、模块、函数等）应该对扩展开放，对修改关闭。

和

> 设计和记录继承，否则禁止。

彼此并不直接矛盾。只要您为其设计和记录（根据 Bloch 的建议），您就可以遵循开闭原则。

我不认为布洛赫说你应该*更喜欢*使用 final 修饰符来禁止继承，只是你应该明确地选择在你创建的每个类中允许或禁止继承。他的建议是您应该考虑并自己决定，而不是仅仅接受编译器的默认行为。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-27T22:50:41.690

我不认为最初提出的开放/封闭原则允许解释最终类可以通过注入依赖项来扩展。

在我的理解中，原则就是不允许对已投入生产的代码进行直接更改，而在仍然允许修改功能的同时实现这一点的方法是使用实​​现继承。

正如第一个答案所指出的，这有历史根源。几十年前，继承受到青睐，开发人员测试闻所未闻，代码库的重新编译通常需要很长时间。

此外，考虑到在 C++ 中，类的实现细节（特别是私有字段）通常暴露在“.h”头文件中，因此如果程序员需要更改它，所有客户端都需要重新编译。请注意，Java 或 C# 等现代语言并非如此。此外，我认为当时的开发人员不能指望能够执行动态依赖分析的复杂 IDE，从而避免频繁的完全重建。

`final`以我自己的经验，我更喜欢做完全相反的事情：“默认情况下，类应该对扩展 () 关闭，但对修改开放”。想一想：今天我们喜欢**版本控制**（使恢复/比较类的以前版本变得容易）、**重构**（鼓励我们修改代码以改进设计，或作为引入新功能的前奏）和**开发人员等实践testing**，它在修改现有代码时提供了一个安全网。

# security - 识别证书是 der 编码还是 base 64 编码

> ID：657989
> 
> 赞同：9
> 
> 时间：2009-03-18T12:10:07.157
> 
> 标签：security, encoding, base64, certificate, x509

有没有办法可以知道证书文件的编码类型？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-03-18T12:21:23.450

如果您在记事本中打开证书并且它以 -----BEGIN CERTIFICATE----- 开头，那么它是 Base64 编码的。如果它都是 goobledygook 它是 DER 编码的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T17:38:17.323

信息，因为这得到了搜索 - 所有 X.509 证书几乎都使用可分辨编码规则 (DER) 作为事实上的编码标准，以抽象语法表示法一 (ASN.1) 存储证书数据。Base64 是一种二进制到文本编码的形式（通常是 ASCII 文本）。这使其“传输”友好。

参考： [http ://www.herongyang.com/Cryptography/Certificate-Format-DER-Distinguished-Encoding-Rules.html](http://www.herongyang.com/Cryptography/Certificate-Format-DER-Distinguished-Encoding-Rules.html)

[https://support.ssl.com/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them](https://support.ssl.com/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them)

# c# - System.InvalidOperationException：无法生成临时类（结果 = 1）

> ID：657993
> 
> 赞同：63
> 
> 时间：2009-03-18T12:11:17.967
> 
> 标签：c#, input

我使用 .net 3.5 开发了一个应用程序，并将其作为 .exe 部署在具有相同环境的多台机器上。但是，在一台特定的机器上，我收到以下错误。堆栈跟踪：

* * *

有关调用即时 (JIT) 调试而不是此对话框的详细信息，请参阅此消息的末尾。

```
System.InvalidOperationException: Unable to generate a temporary class (result=1).
error CS2001: Source file 'C:\WINDOWS\TEMP\wz58eig4.0.cs' could not be found
error CS2008: No inputs specified

   at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)
   at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies)
   at System.Xml.Serialization.TempAssembly..ctor(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, String location, Evidence evidence)
   at System.Xml.Serialization.XmlSerializer.GetSerializersFromCache(XmlMapping[] mappings, Type type)
   at System.Xml.Serialization.XmlSerializer.FromMappings(XmlMapping[] mappings, Type type)
   at System.Web.Services.Protocols.SoapClientType..ctor(Type type)
   at System.Web.Services.Protocols.SoapHttpClientProtocol..ctor()
   at SSOClient..ctor()
   at sc.tradesvc.SSOManager..ctor()
   at sc.tradesvc.SSOManager.get_Inst()
   at sc.cashflowgenerator.Controls.LoginForm.btnLogin_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.PerformClick()
   at System.Windows.Forms.Form.ProcessDialogKey(Keys keyData)
   at System.Windows.Forms.TextBoxBase.ProcessDialogKey(Keys keyData)
   at System.Windows.Forms.Control.PreProcessMessage(Message& msg)
   at System.Windows.Forms.Control.PreProcessControlMessageInternal(Control target, Message& msg)
   at System.Windows.Forms.Application.ThreadContext.PreTranslateMessage(MSG& msg) 
```

* * *

**加载程序集：**

```
mscorlib
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll

CashflowGenerator
    Assembly Version: 1.0.0.0
    Win32 Version: 1.0.0.0
    CodeBase: file:///C:/DATA/DEVEL/Output/CashflowGenerator.exe

System.Windows.Forms
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll

System
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll

System.Drawing
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll

System.Configuration
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll

System.Xml
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll

System.Core
    Assembly Version: 3.5.0.0
    Win32 Version: 3.5.21022.8 built by: RTM
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Core/3.5.0.0__b77a5c561934e089/System.Core.dll

System.Web.Services
    Assembly Version: 2.0.0.0
    Win32 Version: 2.0.50727.1433 (REDBITS.050727-1400)
    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Web.Services/2.0.0.0__b03f5f7f11d50a3a/System.Web.Services.dll 
```

************** JIT 调试 ************** 要启用即时 (JIT) 调试，此应用程序的 .config 文件或计算机 (machine.config) 必须在 system.windows.forms 部分中设置 jitDebugging 值。还必须在启用调试的情况下编译应用程序。

例如：

启用 JIT 调试后，任何未处理的异常都将发送到计算机上注册的 JIT 调试器，而不是由该对话框处理。

* * *

有人可以帮我解决这个问题吗？

由于我是 .net 的新手，有人还可以告诉我为什么需要首先创建一个临时类吗？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2014-03-06T12:25:46.440

我只是花了很多时间寻找这个问题的答案，所以我想我会把它添加到这里，以免让其他人头疼。如果您使用 xsd.exe 工具生成您的 cs，它可能添加了双数组 [][]，其中数组应该是 []。将生成的 cs 文件中的所有 [][] 替换为 [] 并重试。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-03-18T12:16:51.730

XML 序列化通过生成代码来执行序列化工作。这是在第一次需要时在为此目的创建的临时程序集中完成的。

然而，这依赖于能够将程序集写入磁盘。¹

您的选择是（1）给定运行进程写入权限的用户帐户（对于 ASP.NET 应用程序，这可能是一个坏主意）。(2) 使用 SDK 工具 ( [sgen.exe](http://msdn.microsoft.com/en-us/library/bk3w6240(VS.80).aspx) ) 预生成（在开发/编译时）序列化程序集，然后使用（和 deplot）该程序集。

¹开放式问题：存在 API 以在内存中动态创建程序集：为什么不这样做？

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2009-04-07T09:00:14.487

您只需授予对 %windir%\Temp 的列表文件夹内容和读取权限。

我在尝试解决我的问题时发现了这篇文章，并且不必授予我的用户帐户写入权限。

[来自微软](http://support.microsoft.com/kb/908158)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-08-17T11:10:32.460

您需要授予 windows 文件夹中临时文件夹的权限。你的问题就解决了…………

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-18T09:26:30.507

您需要将具有读写权限的 *IIS_IUSR* 用户添加到*C:\Windows\Temp 文件夹*。

**注意**：每个用户都不能完全控制。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-03-18T10:45:46.993

为最近的用户进一步展示@grzenio 的评论：

如果您转到项目属性 -> 构建 -> 生成序列化程序集 -> 开，它会强制在编译时生成 XML 序列化程序程序集，而无需在运行时这样做。

反过来，这意味着您不需要更改文件系统权限（例如，如果您在 Windows Azure 网站上托管，这不是一个选项，这很有用）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-28T15:02:24.300

它也可能只是序列化类中的一些简单错误（通常是一些复制/粘贴的结果）。例如下面的类会导致这个错误：

```
 public class Foo
  {
      private string[] contexts;

      /// <remarks/>
      [System.Xml.Serialization.XmlArrayItemAttribute("Context", 
       typeof(Property), IsNullable = false)]
      public string[] Contexts
      {
          get { return this.contexts; }
          set { this.contexts = value; }
      }
  } 
```

请注意， XmlArrayItem 属性中的**typeof(Property)**参数与导致类似异常的字符串不兼容（很可能）：

```
System.InvalidOperationException: 
Unable to generate a temporary class (result=1). 
```

如果**typeof(Property)**被**typeof(string)**替换，序列化将再次起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-18T12:43:38.047

> API 的存在是为了在内存中动态创建程序集：为什么不这样做呢？

只是一个疯狂的猜测：我认为这种可能性在 .NET 1.0 中还不存在，或者至少在创建 XmlSerializer 并且 MS 不喜欢改变现有行为时......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-11T11:56:06.137

将读/写权限授予“C:\WINDOWS\TEMP”文件夹。它会起作用的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-10T13:12:00.287

这可能是因为您将应用程序池身份切换`IIS` 为密码而不是预定义的，所以您有以下之一

1.  返回预定义
2.  将权限完全控制给 Windows 临时文件夹上的用户 IWAM_WBSRV-01

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-10T18:58:24.843

如果这对任何人都有帮助，我的问题来自序列化中使用的继承类。当我对我正在序列化的课程进行完整复制/粘贴并使用 ineritance 退出时，问题就消失了。不幸的是，继承的优势消失了，但这比遇到这个问题要好。（嘿，至少我很确定这就是解决它的原因。碰巧在那里进行了重新启动。）

# linux - 跟踪 Informix Client for Linux 的 ODBC 调用

> ID：657994
> 
> 赞同：1
> 
> 时间：2009-03-18T12:11:21.790
> 
> 标签：linux, odbc, trace, informix

我试图从我在 Linux 上运行的程序中跟踪 ODBC 函数调用。该程序动态链接 ODBC 管理器，然后连接到数据库并获取一些数据。

我可以通过添加到 odbcinst.ini 来使用 unixODBC 跟踪 ODBC 调用：

```
[ODBC]
Trace=yes
TraceFile=/tmp/sql.log 
```

此方法由 IBM 记录：[Collecting data for an ODBC Problem](http://www-01.ibm.com/support/docview.wss?rs=681&context=SSVT2J&dc=DB560&dc=DB520&uid=swg21323418&loc=en_US&cs=UTF-8&lang=en&rss=ct681db2)

但是当我将管理器从 unixODBC 更改为 Informix 自己的管理器 (libifdmr.so) 时，不会创建跟踪文件。有人从 Linux 上的 Informix 管理器（和驱动程序）成功获得 ODBC 跟踪吗？

客户端版本：CSDK 3.50UC3

我希望这不是错误，并且我的配置有问题。

至于 unixODBC：我不能在多线程应用程序中使用 unixODBC。当断开连接来自另一个线程而不是连接时，我使用连接池并且我的应用程序出现段错误。在多线程应用程序中它也慢得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-03-18T23:18:34.807

如果你运行：

```
strings $INFORMIXDIR/lib/cli/libifdmr.so | grep _OdbcSetTrace 
```

你能看到任何参考资料吗？如果没有，则该库没有支持功能。如果您确实看到了这一点，那么概述的机制应该可以工作。如果没有，您可能有一个可报告的错误。

您试图追踪问题的级别是什么？而且，既然 unixODBC 有效，为什么不使用有效的驱动程序管理器呢？

* * *

我从 $INFORMIXDIR/demo/cli 中获取了示例 distsel.c，并使用 CSDK 3.50.FC3 在 Solaris 10 上对其进行了编译。我已经到了连接成功的地步，但是我正在使用的数据库中缺少表“项目”，因此程序停止了 SQLExecDirect()。当我在“truss”（相当于 Linux 上的“strace”）下运行它时，即使尝试打开跟踪文件，我也看不到代码的证据。

我编译使用：

```
gcc -I$INFORMIXDIR/incl/cli distsel.c -DNO_WIN32 \
    -L$INFORMIXDIR/lib/cli -lifdmr -lifcli -o distsel 
```

我使用了以下 .odbc.ini 文件：

```
;
;  odbc.ini
;
[ODBC Data Sources]
odbc_demo = IDS 11.50.FC3 stores on black

[ODBC]
Trace           = yes
TraceFile       = /tmp/odbc.trace

[odbc_demo]
Driver          = /usr/informix/11.50.FC1/lib/cli/libifcli.so
Description     = IBM Informix CLI 3.50
Server          = black_19
FetchBufferSize = 99
UserName        = jleffler
Password        = XXXXXXXX
Database        = stores
ServerOptions   =
ConnectOptions  =
Options         =
ReadOnly        = no 
```

和这个：

```
;
;  odbc.ini
;
[ODBC Data Sources]
odbc_demo = IDS 11.50.FC3 stores on black

[odbc_demo]
Driver          = /usr/informix/11.50.FC1/lib/cli/libifcli.so
Description     = IBM Informix CLI 3.50
Server          = black_19
FetchBufferSize = 99
UserName        = jleffler
Password        = XXXXXXXX
Database        = stores
ServerOptions   =
ConnectOptions  =
Options         =
ReadOnly        = no
Trace           = yes
TraceFile       = /tmp/odbc.trace 
```

因此，我相信您发现了一个错误。我不确定该错误是在您引用的常见问题解答中还是在产品中 - 我倾向于认为是后者。您应该将此问题报告给 IBM 技术支持。（我没有检查过 Informix CLI (ODBC) 手册；在尝试提交产品错误之前可能值得检查一下；如果手册表明 Trace 不起作用，或者如果它没有表明它起作用工作，那么您列出的常见问题解答页面中有一个错误。）

如果您要查看 SQL 数据，FAQ 中的 SQLIDEBUG 部分有效：

```
SQLIDEBUG=2:distsel ./distsel 
```

这为我生成了一个文件 distsel_6004_0_102d40 - 它对你来说会有所不同。然后，您可以使用“sqliprint”实用程序查看客户端和服务器之间的数据流动。

如果您找不到“sqliprint”，请回复我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T11:41:23.370

我在 odbc.ini 中使用这些设置获得了 ODBC 跟踪：

```
[ODBC]
TRACE=1
TRACEFILE=/tmp/odbc_trace.txt
TRACEDLL=idmrs09a.so 
```

我从 IBM Informix ODBC Driver Programmer's Manual Version 3.50 复制了它们。因此，当这些设置在 odbc.ini 而不是 odbcinst.ini 中时，其他 IBM 文档似乎无效，您必须设置“为 ODBC 问题收集数据”文档中未提及的 TRACEDLL。

更新：似乎 IBM 更改了文档：有关于 TRACEDLL 的信息，但 odbcinst.ini 仍然存在。

# wpf - 控件在 WPF 中交换 UIElements

> ID：657997
> 
> 赞同：1
> 
> 时间：2009-03-18T12:12:19.167
> 
> 标签：wpf, tabcontrol, contentpresenter, uielement

`UIElement`在 UI 上的某个“插槽”动态交换 s 的最简单方法是什么？我有许多`UIElement`s 并且基于一些外部数据绑定（例如组合框选择），我希望显示其中一个，而隐藏当前可见的一个。所以行为有点像，`TabControl`但没有 tabstrip、chrome 和 tabitem 实例。所以我实际上可以使用`TabControl`并覆盖控制模板。但这真的是最小的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-03-18T12:17:41.213

```
<ContentControl Content="{Binding SomePropertyThatYieldsTheContent}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-18T12:23:41.353

我不知道这是否是最简洁的方式，但如果你使用 a `DataTemplate`，你可以使用`DataTrigger`s （这里的假设是初始可见性是`Collapsed`）：

```
<DataTemplate.Triggers>
    <DataTrigger Binding="{Binding Path=SourceProperty.ValueType}">
        <DataTrigger.Value>
            <pm:ValueType>Text</pm:ValueType>
        </DataTrigger.Value>
        <Setter TargetName="TextEditor" Property="Visibility" Value="Visible" />
    </DataTrigger>
    <DataTrigger Binding="{Binding Path=SourceProperty.ValueType}">
        <DataTrigger.Value>
            <pm:ValueType>Logical</pm:ValueType>
        </DataTrigger.Value>
        <Setter TargetName="LogicalEditor" Property="Visibility" Value="Visible" />
    </DataTrigger>
    <DataTrigger Binding="{Binding Path=SourceProperty.ValueType}">
        <DataTrigger.Value>
            <pm:ValueType>DateTime</pm:ValueType>
        </DataTrigger.Value>
        <Setter TargetName="DateEditor" Property="Visibility" Value="Visible" />
    </DataTrigger>
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-18T14:43:38.973

你有几个选择。正如 Bryan 提到的，[数据模板选择器](http://www.developingfor.net/net/dynamically-switch-wpf-datatemplate.html)绝对可以工作，尽管我认为它们经常是矫枉过正的。以您的示例为例-如果您想将元素的可见性绑定到 a 中的选择`ComboBox`，我更喜欢 a [`ValueConverter`](http://www.developingfor.net/wpf/multibinding-in-wpf.html)。将 传递`ComboBox.SelectedItem`给`Converter`并让它返回一个可见性值：

```
public class MyObjectToVisibleOrCollapsed : IValueConverter
{
    #region IValueConverter Members
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is MyObject)
        {
            var myObject = (MyObject)value;
            if (myObject.SomeState)
            {
                return Visibility.Visible;
            }
        }

        return Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

现在在您的 Window.Resources 中，创建一个实例`ValueConverter`并将元素绑定到`ComboBox.SelectedItem`使用该`ValueConverter`实例：

```
<local:MyObjectToVisibleOrCollapsed x:Key="myObjectToVisibleOrCollapsed"/>
<DataTemplate x:Key="MyTemplate">
    <TextBlock Text="{Binding Path=myText}" 
               x:Name="MyText" 
               Visibility="{Binding ElementName=MyComboBox, Path=SelectedItem, Converter={StaticResource myObjectToVisibleOrCollapsed}, Mode=Default}" />
</DataTemplate> 
```

当然，您可以重用您的`ValueConverter`所有元素`DataTemplate`（如果它们很多，那么数据模板选择器方法变得更可取）。

[免责声明：上面的代码是从内存中散列出来的，没有经过测试——可能需要稍微调整一下]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-18T14:21:06.593

查看[数据模板选择器，Bea Stollnitz](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)[在这里](http://bea.stollnitz.com/blog/?p=16)有一篇很好的文章。基本上，您将`ContentPresenter`在每个 UI“插槽”中使用 a，然后使用该`ContentTemplateSelector`属性来定义您将使用的模板选择器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-22T08:45:10.587

我为每个可能的“视图”创建自定义用户控件。

它们的可见性是使用 c# 更改的，你。需要很少的编码。

这种方法的主要原因是易于开发——设计者关注特定的视图，而不是所有可能存在的控件集。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-03-18T12:18:03.707

我这样做的方法是将元素相互叠加，并以编程方式将它们的 Visibility 属性从 Visible 更改为 Collapsed 并根据需要再次返回。

# wpf - 如何根据所需的客户区大小设置 WPF 窗口的大小？

> ID：657999
> 
> 赞同：2
> 
> 时间：2009-03-18T12:12:53.157
> 
> 标签：wpf, xaml

我知道在 XAML/WPF 中，我可以使用 Width 和 Height 属性设置窗口大小，但假设我想设置窗口大小，以便客户区（减去 Windows 边框/装饰）将是某个固定大小，最简单的方法是什么？

就像，假设我希望窗口的客户区是 640x480，阿拉这个：

```
 <Window x:Class="SomeProject.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Background="Black">

<Canvas Width="640" Height="480"/>
</Window> 
```

如何确保初始窗口大小具有 640x480 客户端大小，完全适合子画布？我只对如何轻松设置启动时间真正感兴趣，而不是担心如何处理调整大小事件等。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-03-18T12:15:25.913

将以下属性添加到窗口

SizeToContent="宽度和高度"**********`**********