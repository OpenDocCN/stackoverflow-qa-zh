# StackOverflow 问答 10708000-10708999

# python - 在 python 中访问嵌套类（循环引用？）

> ID：10708001
> 
> 赞同：1
> 
> 时间：2012-05-22T18:36:51.927
> 
> 标签：python, sql, class, nested, parent-child

我正在制作一个 python 脚本来从 sqlite db 中提取数据以获取网络路径。我有两个类：节点，链接：

```
 class node:
        nodeName = str()
        nodeType = str()
        node1 = str()
        node2 = str()
        active = 0

        def __init__(self, nodeID):
            self.nodeID = nodeID
            cursor = network.execute("SELECT linkID FROM link WHERE nodeA = ? OR nodeB = ?", (nodeID, nodeID,))
            row1 = cursor.fetchone()
            row2 = cursor.fetchone()
            if row1:
                self.link1 = link(row1[0])
            if row2:
                self.link2 = link(row2[0])
            self.nodeName, selfsnodeType, self.active = network.execute("SELECT nodeName, nodeType, active FROM node WHERE nodeID = ?", (nodeID,)).fetchall()[0] 
```

Link 完全一样，只是它尝试获取两个节点子节点。如您所见，这创建了一个循环引用，但似乎有三层深，链接子节点没有获得自己的节点子节点，节点子节点也没有链接子节点。尝试读取值返回 None 类型：

```
NODE object 67 getting link children:
(19,)
(48,)
link object 19 getting node childs:
(67,)
(112,)
NODE object 67 getting link children:
None
None 
```

*   这种行为是设计使然吗？
*   这是一个坏主意吗？
*   是否可以遍历孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:43:51.457

是的，这是糟糕的设计。

您只需要存储边即可构建图形。因此，您应该通过从数据库中提取边来构建图形。

之后或同时，您应该提取装饰节点所需的信息（如果装饰边缘，则提取边缘）。这不应触发任何尝试从数据库中提取有关边缘的信息（装饰信息除外）。

# spring - JPA 事务未提交给数据库

> ID：10708002
> 
> 赞同：2
> 
> 时间：2012-05-22T18:36:52.720
> 
> 标签：spring, hibernate, jpa, transactions

我正在开发一个小型 Spring-Hibernate-Mysql 测试项目，由于某种原因，我的事务没有提交给数据库。

在我的应用程序上下文中，我得到了：

```
<!-- JTA -->

<bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />

</bean>

<tx:annotation-driven transaction-manager="txManager" />

<!-- JPA -->

<jee:jndi-lookup id="entityManagerFactory" jndi-name="persistence/myPU" />

<!-- In order to enable EntityManager injection -->
<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor">
    <property name="persistenceUnits">
        <map>
            <entry key="myPU" value="persistence/myPU" />
        </map>
    </property>
</bean> 
```

我的persistence.xml：

```
<persistence-unit name="myPU" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/mysqlResource</jta-data-source>
    <properties>
        <property name="hibernate.connection.shutdown" value="true" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect"></property>
        <property name="hibernate.show_sql" value="true" />
    </properties>
</persistence-unit> 
```

我在我的数据库中创建了一个名为“persons”的简单表：

```
CREATE TABLE persons(
id VARCHAR(255) PRIMARY KEY,
version int, 
full_name VARCHAR(255),
person_id VARCHAR(255),
email VARCHAR(255)); 
```

创建实体对应的实体和Dao：

```
@Entity
@Table(name = "persons")
public class Person implements Serializable {

private static final long serialVersionUID = 4349832844316517922L;

/*--- Members ---*/

/**
 * Hibernate genetared UUID
 */
@Id
@GeneratedValue(generator = "system-uuid")
@GenericGenerator(name = "system-uuid", strategy = "uuid")
private String id;

@Version
private int version;

@Column(name = "full_name")
private String fullName;

@Column(name = "person_id")
private String personId;

@Column(name = "email")
private String eMail;

/*--- Constructor ---*/

public Person() {
}

/*--- Overridden Methods ---*/

@Override
public boolean equals(Object obj) {

    if ((obj == null) || !(obj instanceof Person)) {
        return false;
    }

    // reference comparison
    if (obj == this) {
        return true;
    }

    final Person other = (Person) obj;

    return new EqualsBuilder().append(getPersonId(), other.getPersonId())
            .append(geteMail(), other.geteMail())
            .append(getFullName(), other.getFullName()).isEquals();
}

/**
 * The unique hash code based on the clients' id and citizenship
 * 
 * {@inheritDoc}
 */
@Override
public int hashCode() {

    return new HashCodeBuilder().append(geteMail()).append(this.geteMail())
            .append(this.getFullName()).toHashCode();
}

/*--- Getters & Setters ---*/

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public int getVersion() {
    return version;
}

public void setVersion(int version) {
    this.version = version;
}

public String getFullName() {
    return fullName;
}

public void setFullName(String fullName) {
    this.fullName = fullName;
}

public String getPersonId() {
    return personId;
}

public void setPersonId(String personId) {
    this.personId = personId;
}

public String geteMail() {
    return eMail;
}

public void seteMail(String eMail) {
    this.eMail = eMail;
} 
```

}

道：

```
@Repository
public class PersonJpaDao extends BasicJpaDao<Person> implements IPersonDao {

public PersonJpaDao() {
    super(Person.class);
} 
```

}

这是BasicJpaDao：

```
public class BasicJpaDao<T> implements IBasicDao<T> {

/* --- Members --- */

/** The JPA utility to work with the persistence layer. */
@PersistenceContext
protected EntityManager entityManager;

/** The type of the entity to which this DAO offers access. */
protected Class<T> entityClass;

/* --- Constructors --- */

/**
 * Default constructor.
 * 
 * @param entityClass
 *            The type of the entity to which this DAO offers access.
 */
public BasicJpaDao(Class<T> entityClass) {
    super();
    this.entityClass = entityClass;
}

/* --- Public methods --- */

/**
 * {@inheritDoc}
 */
@Override
public void create(T entity) {
    getEntityManager().persist(entity);
}

/**
 * {@inheritDoc}
 */
@Override
public T read(Object primaryKey) {
    return getEntityManager().find(getEntityClass(), primaryKey);
}

/**
 * {@inheritDoc}
 */
@Override
public T update(T entity) {
    return getEntityManager().merge(entity);
}

/**
 * {@inheritDoc}
 */
@Override
public void delete(T entity) {
    getEntityManager().remove(entity);
}

/**
 * {@inheritDoc}
 */
@Override
public void flush() {
    getEntityManager().flush();
}

/* --- Getters/Setters --- */

/**
 * @return The JPA utility to work with the persistence layer.
 */
public EntityManager getEntityManager() {
    return this.entityManager;
}

/**
 * @param entityManager
 *            The JPA utility to work with the persistence layer.
 */
public void setEntityManager(EntityManager entityManager) {
    this.entityManager = entityManager;
}

/**
 * @return The type of the entity to which this DAO offers access.
 */
public Class<T> getEntityClass() {
    return entityClass;
}

/**
 * @param entityClass
 *            The type of the entity to which this DAO offers access.
 */
public void setEntityClass(Class<T> entityClass) {
    this.entityClass = entityClass;
} 
```

Soo .. 基本上它可以工作，但没有任何承诺，我的意思是，如果我运行

```
@Transactional(propagation = Propagation.REQUIRED)
private void crearePerson() {
    Person p1 = myDao.read("12345");
    p1.setFullName("kiko too");
    myDao.update(p1);
} 
```

我可以看到（在调试中） p1 从数据库中返回，但更新从未发生。我能找到的唯一接近的是：

[JPA - 未提交的事务](https://stackoverflow.com/questions/3207208/jpa-transactions-not-being-commited)

我尝试添加

```
<property name="hibernate.connection.shutdown" value="true" /> 
```

在这个线程之后到我的 persistence.xml，但它没有帮助。我还向我的连接池（在我的应用程序服务器 gui 中）添加了一个名为 connection.shutdown 的属性，其值为 true，但它也没有帮助。

**更新：** 由于我使用的是 JTA，我认为我的事务管理器配置错误。当我使用 org.springframework.orm.jpa.JpaTransactionManager 时，我应该使用 org.springframework.transaction.jta.JtaTransactionManager。所以我改变了我的应用程序上下文，现在我有了：

```
<bean id="txManager"
    class="org.springframework.transaction.jta.JtaTransactionManager" />

<tx:annotation-driven transaction-manager="txManager" /> 
```

不幸的是，我仍然遇到同样的问题:(在我的控制台中，我可以看到如下休眠查询（）我已经更改了一些原始实体字段，但这并不重要）：

信息：休眠：选择 user0_.id 作为 id0_0_，user0_.email 作为 email0_0_，user0_.full_name 作为 full3_0_0_，user0_.password 作为 password0_0_，user0_.update_by_email 作为 update5_0_0_，user0_.user_name 作为 user6_0_0_，user0_.version 作为来自用户 user0_ 的 version0_0_ user0_.id=?

有任何想法吗？

在此先感谢，瑜伽士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T00:51:19.203

它可能不起作用的原因是因为您使用`@Transactional`的是私有方法。`@Transactional`对非公共方法没有影响，因为代理生成器会忽略它们。来自[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#transaction-declarative-annotations)：

> **方法可见性和@Transactional**
> 
> 使用代理时，您应该仅将 @Transactional 注释应用于具有公共可见性的方法。如果您使用 @Transactional 注释对受保护的、私有的或包可见的方法进行注释，则不会引发错误，但带注释的方法不会显示配置的事务设置。如果您需要注释非公共方法，请考虑使用 AspectJ（见下文）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-11T17:59:37.963

我遇到了类似的问题，对我来说，修复来自以下内容：

在 PersistenceXML 中：

```
<property name="hibernate.transaction.manager_lookup_class"
value="org.hibernate.transaction.JBossTransactionManagerLookup"> 
```

弹簧文件：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="nameOfUnitInPersistenceXml" />
</bean>

<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManagerName" value="java:/TransactionManager" />
</bean> 
```

Java 类（命名持久化上下文）

```
private EntityManager em;

@PersistenceContext(name="nameOfUnitInPersistenceXml")
public void setEntityManager(EntityManager em) {
    this.em = em;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T18:43:28.020

将“@Transactional”添加到您的 create() 方法中。

编辑：最好将 @Transactional 放在服务层而不是 dao 层，仅供参考

# javascript - 循环 json_encoded 数据

> ID：10708006
> 
> 赞同：0
> 
> 时间：2012-05-22T18:37:10.973
> 
> 标签：javascript

嘿，我有一个 json_encode，我试图循环并显示输出，但它不工作，我没有输出 =/

这是我的 js 小提琴：http: [//jsfiddle.net/Z4jTc/1/](http://jsfiddle.net/Z4jTc/1/)

有人可以解释为什么它不会循环吗？

代码：

```
var messages = {"1":["2","1","0000-00-00 00:00:00","testing once"],"2":["2","1","0000-00-00 00:00:00","testing twice :)"]};

    for(var id in messages){

            var read = messages[id][0];
            var from = messages[id][1];
            var sent_on = messages[id][2];
            var content = messages[id][3];

            document.write = 'test';
            document.write = '<div class="message_info">';
            document.write =  '<b>From:</b> '+from+'<br/><br/>';
            document.write = '<b>Sent On:</b> '+sent_on;
            document.write = '</div><div class="message_content">';
            document.write = content;
            document.write = '</div> <br/><br/>';

    }​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:38:47.020

你不断地覆盖这个`document.write`函数，你从来没有真正调用它。

```
document.write("test"); 
```

是应该如何使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:53:59.647

So many document.write's is pretty slow. You could do it in one call after you parse the object:

```
var messages = {"1":["2","1","0000-00-00 00:00:00","testing once"],"2":["2","1","0000-00-00 00:00:00","testing twice :)"]};
var output = [];
for(var id in messages){

    var read = messages[id][0];
    var from = messages[id][1];
    var sent_on = messages[id][2];
    var content = messages[id][3];

    output.push('test');
    output.push('<div class="message_info">');
    output.push( '<b>From:</b> '+from+'<br/><br/>');
    output.push('<b>Sent On:</b> '+sent_on);
    output.push('</div><div class="message_content">');
    output.push(content);
    output.push('</div> <br/><br/>');
}​

document.write(output.join('')); 
```

...or place the output in a container on the page...

```
document.getElementById('destinationContainer').innerHTML(ouput.join('')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T18:42:29.470

`document.write` 是一个函数

利用

```
document.write('test'); 
```

代替

```
 document.write = 'test'; 
```

见[http://jsfiddle.net/Z4jTc/2/](http://jsfiddle.net/Z4jTc/2/)

# asp.net-mvc - MVC 3 中执行流程的差异？

> ID：10708008
> 
> 赞同：2
> 
> 时间：2012-05-22T18:37:16.740
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我一直在寻找 MVC 的良好执行流程摘要，发现这篇文章有一些很好的答案和链接：[MVC 中的执行流程](https://stackoverflow.com/questions/1982517/execution-flow-in-mvc)

然后我很好奇，这些是否仍然是最新的（第 3 版），如果没有，有人可以发布更新的流程概述吗？

如果您知道版本 4 的更改，也请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:14:19.497

该图仍然有效。但这里有一个[更新](http://www.simple-talk.com/content/article.aspx?article=1358)的。第5步只有一个错误：授权过滤器在模型绑定**之前执行。**

# ruby-on-rails - 控制器创建期间的 RoR 总和相关记录

> ID：10708020
> 
> 赞同：0
> 
> 时间：2012-05-22T18:38:16.137
> 
> 标签：ruby-on-rails

我有表格=费用和invlines（发票行）。

费用属于_to Invline

Invline has_many 费用

使用 Invlines 输入表单，我让用户选择费用。

保存 Invlines 记录后，我想将费用汇总并放入 invline.price

在我尝试使用的 Invlines 控制器中：

```
def create
@invline = Invline.new(params[:invline])
@invline.price ||= @invline.expenses.amount.sum 
```

但是，我得到

```
undefined method `amount' 
```

想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:42:40.390

代替：

```
@invline.price ||= @invline.expenses.amount.sum 
```

和

```
@invline.price ||= @invline.expenses.sum(:amount) 
```

该`.expenses`调用返回一个费用列表，但只有一个特定的费用有`amount`。

# ruby-on-rails - 有没有办法消除“未预编译”的错误？

> ID：10708030
> 
> 赞同：1
> 
> 时间：2012-05-22T18:38:53.357
> 
> 标签：ruby-on-rails, assets, precompile

我有一个 rails 应用程序，我在其中预编译我的资产并将它们发送到远程 AWS S3 存储桶。我想将我的 public/assets 文件夹添加到我的 gitignore 中，因为它开始变得非常大，我不希望 git 将所有更改保存到已编译的文件中。但是，如果我这样做，rails 会抱怨它没有找到预编译的文件，并且基本上会使整个应用程序崩溃。

有没有解决的办法 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:54:55.030

Try to ignore public and set `config.assets.enabled = false`

# haskell - haskell中的简单输入误解

> ID：10708031
> 
> 赞同：0
> 
> 时间：2012-05-22T18:38:55.933
> 
> 标签：haskell, syntax, input

```
import System.IO
import Data.Char
edastaNr n
   = do
      putStrLn "Anna rida:"
      line <- getLine
      if null line
         then return () 
         else do return length(line) 
```

谁能解释为什么最后一行不正确以及如何修复它？我没有意识到..错误是：

```
Couldn't match expected type `IO ()' with actual type `[a0] -> Int' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T18:40:54.230

你缺少括号。

```
...
else do return (length line) 
```

但是，也有类型错误。你的`edasaNr`函数类型是什么？`Int`当给定一个参数时，它必须做一些 IO 并返回一个, 。

所以最好写成：

```
edastaNr :: a -> IO Int
edastaNr n = do
    putStrLn "Anna rida:"
    line <- getLine
    if null line
     then return 0
     else return $ length line 
```

这也表明您不使用该`n`参数（因此它可以具有任何类型）。

# image - Love2d 旋转图像

> ID：10708034
> 
> 赞同：2
> 
> 时间：2012-05-22T18:39:09.473
> 
> 标签：image, lua, rotation, love2d

我想在 Love2D 中旋转图像。我在 love2d.org 上找到了一个文档：[https](https://love2d.org/wiki/love.graphics.rotate) ://love2d.org/wiki/love.graphics.rotate 但是当我尝试加载图像时，我似乎无法让它工作。这是我的代码：

```
local angle = 0

function love.load()
    g1 = love.graphics.newImage("1.png") 
end

function love.draw()
    width = 100
    height = 100
    love.graphics.translate(width/2, height/2)
    love.graphics.rotate(angle)
    love.graphics.translate(-width/2, -height/2)
    love.graphics.draw(g1, width, height)
end

function love.update(dt)
    love.timer.sleep(10)
    angle = angle + dt * math.pi/2
    angle = angle % (2*math.pi)
end 
```

谁能给我看一个在love2d中旋转图像的简单示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T18:45:47.320

[https://love2d.org/wiki/love.graphics.draw](https://love2d.org/wiki/love.graphics.draw)

您最好使用第四个参数，显示为 'r' 来旋转图像，例如：

```
love.graphics.draw(image, x, y, math.pi/4) 
```

使用 translate 函数也是一个相当糟糕的主意，最好为每个图像提供 x 和 y 位置，除非您正在执行诸如偏移整个地图之类的操作，在这种情况下它可以节省计算时间（或者在至少代码的长度和复杂性）。（当然还有其他情况下它非常有用）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:35:12.850

除了一个不相关的小问题（[`love.timer.sleep`](https://love2d.org/wiki/love.timer.sleep)在 LÖVE 0.8.0 中使用秒数）之外，您的代码对我来说非常有效。

如果您向我们提供更多信息，我们将能够更好地帮助您，并可能重现您的错误。
当你说

> 当我尝试加载图像时，我似乎无法让它工作

..结果是什么？图像是白框吗？应用程序会崩溃吗？屏幕上什么都没有？

所有这些都意味着图像加载问题，而不是旋转问题。虽然，可能是图像从屏幕上旋转出来的情况。

* * *

如果你继续使用`translate`, `rotate`, and `scale`（这通常是个好主意），我建议你看看[`push`](https://love2d.org/wiki/love.graphics.push)and[`pop`](https://love2d.org/wiki/love.graphics.pop)函数。
它们允许您“堆叠”转换，以便您可以渲染子元素。

示例用途是渲染一个 GUI（每个孩子推动它的平移，然后渲染孩子）和在滚动地图上绘制精灵（相机平移整个地图，然后做`for entity in entities do push() entity:draw() pop() end`。每个实体可以在本地坐标中平移和旋转（0,0 =精灵的中心））。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-15T16:15:13.147

```
love.graphics.draw( drawable, x, y, r, sx, sy, ox, oy, kx, ky ) 
```

R是旋转..你为什么不把它设置为一个变量并随意改变它？...我是编程新手，所以我可能错了，但这就是我的做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-29T02:39:51.780

使用 LOVE 11.3 (Mysterious Mysteries) 在图像中心旋转的示例：

```
function love.draw()
    love.graphics.draw(img, 400,300, wheel.r, wheel.sx, wheel.sy, wheel.w / 2,  wheel.h / 2)
end

function love.update(dt)
    wheel.r = wheel.r + dt  
end

function love.load()
    wheel = {x = 0, y = 0, w = 0, h = 0, sx = 0.5, sy = 0.5, r = 0, image = "wheel.png"}
    img = love.graphics.newImage(wheel.image)
    wheel.w = img:getWidth()
    wheel.h = img:getHeight()               
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-13T09:37:17.380

通常，旋转的轴是左上角。要将轴居中到图像的中间，您必须使用参数后的`r`参数到图像的一半宽度和一半高度。

# android - 在 Android 中使用时微调器不显示

> ID：10708035
> 
> 赞同：2
> 
> 时间：2012-05-22T18:39:12.230
> 
> 标签：android, jquery-mobile, cordova

我正在使用 WebViewClient 在 Android 中创建 Phonegap/Jquery 移动应用程序，当用户单击按钮时，我想在加载 JNI/javascript 函数时显示微调器。但是我无法使用下面的代码这样做。

***注意：***如果我删除对 JNI/Javascript 函数的调用，那么微调器会按预期显示。Helper 是从 DroidGap onCreate() 方法注册为 appView.addJavascriptInterface(helperObject, "Helper"); 的 java 类。

此外，如果复制粘贴为 .html 并通过浏览器浏览将起作用（当然我当时也没有调用 JNI/Javascript 函数），这意味着它会显示微调器，只要我有一个 sleep() 时间。但是，当我使用 Android 时，它不会显示。index.html 位于 assets/www 文件夹中。

```
<head>
<title>Employee Finder</title>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/ui/1.8.20/jquery-ui.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="http://fgnass.github.com/spin.js/spin.js"></script>
<!-- <script src="phonegap-1.3.0.js"></script> -->
<script> 

$(document).ready(function() {

    $('#findemp').click(function() {
         var empNumber = $("#employeenumber").val();
         showSpinner();         

             var empdetail = JSON.parse(window.Helper.getEmpDetails(empNumber));
         //Above call takes 3-4 sec and is a JNI call meaning calling a java function.

         hidespinner();
    });
});

function showSpinner()
{
    var opts = {
              lines: 13, // The number of lines to draw
              length: 7, // The length of each line
              width: 4, // The line thickness
              radius: 10, // The radius of the inner circle
              rotate: 0, // The rotation offset
              color: '#000', // #rgb or #rrggbb
              speed: 1, // Rounds per second
              trail: 60, // Afterglow percentage
              shadow: false, // Whether to render a shadow
              hwaccel: false, // Whether to use hardware acceleration
              className: 'spinner', // The CSS class to assign to the spinner
              zIndex: 2e9, // The z-index (defaults to 2000000000)
              top: 'auto', // Top position relative to parent in px
              left: 'auto' // Left position relative to parent in px
            };
            var spinner = new Spinner(opts).spin();
            $("#loading").append(spinner.el);
}

function hidespinner(){     
    $('.spinner').hide();

}
</script>

</head> 
<body> 

<div data-role="page" id="page1">
    <div data-role="header">
        <h1>Find Employee Data</h1>
    </div>

    <div data-role="content" id="searchDetails">    
       <input name="employeenumber" type="text" id="employeenumber"  placeholder="Employee Number" min="13"/>
       <input type="button" id="findemp" data-theme="b" value="Find Employee"/>
       <div id="loading" ></div>
    </div>

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>

<div data-role="page" data-theme="b" data-add-back-btn="true" id="page2">
    <div data-role="header">
        <h1>Page Two</h1>
    </div>
    <div id="empDetails">
       <p><b>Name: </b></p><p id="name"></p>
    </div>
    <div data-role="footer">
        <h4>Page Footer</h4>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:50:58.957

Spin.js 没问题，但如果您已经在使用 JQuery 移动版，则最好使用内置微调器。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

在标题中，然后：

```
$.mobile.loadingMessageTextVisible = true;
$.mobile.loadingMessage = "please wait...";
$.mobile.showPageLoadingMsg(); 
```

显示了内置的 jquery 移动微调器。

```
$.mobile.hidePageLoadingMsg(); 
```

隐藏移动微调器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:32:43.957

所以使用超时功能似乎是一种工作。它不是一个解决方案，但至少我看到了微调器一段时间，然后执行了函数。

```
$('#findemp').click(function() {

        showSpinner('#loading');
        setTimeout(function() {
        getempData();
        hidespinner();}, 1000);      
     });

function getempData()
{
    var empNumber = $("#employeenumber").val();     
    var empdetail = JSON.parse(window.Helper.getEmpDetails(empNumber));
   //transition to a result page here
} 
```

# c# - 将数据行（仅单列）转换为字符串列表

> ID：10708036
> 
> 赞同：0
> 
> 时间：2012-05-22T18:39:27.067
> 
> 标签：c#, linq, datatable, datarow

请看看有什么问题？我想将数据行转换为字符串列表。

```
 public List<string> GetEmailList()
    {
        // get DataTable dt from somewhere.
        List<DataRow> drlist = dt.AsEnumerable().ToList();
        List<string> sEmail = new List<string>();
        foreach (object str in drlist)
        {
            sEmail.Add(str.ToString()); // exception
        }
        return sEmail; // Ultimately to get a string list.
    } 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T18:43:38.893

这里有几个问题，但最大的问题是您试图将*整行*转换为字符串，而实际上您应该尝试将*单个单元格*转换为字符串。您需要引用 that 的第一列，`DataRow`您可以使用括号（如数组）来执行此操作。

尝试这样的事情：

```
public List<string> GetEmailList()
{
    // get DataTable dt from somewhere.
    List<string> sEmail = new List<string>();
    foreach (DataRow row in dt.Rows)
    {
        sEmail.Add(row[0].ToString());
    }
    return sEmail; // Ultimately to get a string list.
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T13:08:08.070

这是我从 ReSharper 那里得到的关于如何做到这一点的一条线，不确定性能影响，只是想我会分享它。

```
List<string> companyProxies = Enumerable.Select(
            vendors.Tables[0].AsEnumerable(), vendor => vendor["CompanyName"].ToString()).ToList(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-20T06:44:09.790

以下是去除所有额外语法噪音后的情况：单线。

```
public List<string> GetEmailList()
{
    return dt.AsEnumerable().Select(r => r[0].ToString()).ToList();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:10:33.357

林克方式...

```
 private static void Main(string[] args)
    {
        var dt = getdt();

        var output = dt
            .Rows
            .Cast<DataRow>()
            .ToList();

        // or a CSV line
        var csv = dt
            .Rows
            .Cast<DataRow>()
            .Aggregate(new StringBuilder(), (sb, dr) => sb.AppendFormat(",{0}", dr[0]))
            .Remove(0, 1);

        Console.WriteLine(csv);
        Console.ReadLine();
    }

    private static DataTable getdt()
    {
        var dc = new DataColumn("column1");
        var dt = new DataTable("table1");
        dt.Columns.Add(dc);
        Enumerable.Range(0, 10)
            .AsParallel()
            .Select(i => string.Format("row {0}", i))
            .ToList()
            .ForEach(s =>
            {
                var dr = dt.NewRow();
                dr[dc] = s;
                dt.Rows.Add(dr);
            });
        return dt;
    } 
```

# python - 用 GridBagSizer 中的列填充可用空间

> ID：10708037
> 
> 赞同：3
> 
> 时间：2012-05-22T18:39:35.853
> 
> 标签：python, wxpython, wxwidgets

我正在尝试创建一个对话框，其中有一些长描述，每个描述后跟一个带有单选按钮答案的简短问题。我正在使用`GridBagSizer`（[wxWidgets docs](http://docs.wxwidgets.org/2.8/wx_wxgridbagsizer.html)，[wxPython docs](http://wxpython.org/docs/api/wx.GridBagSizer-class.html)）来布置我的控件，其中长描述跨越所有三列，问题和两个单选按钮答案都在它们自己的列中。

![在此处输入图像描述](../Images/af84c6f6116d4296c99acc1d9a0941ec.png)

我希望答案与右侧对齐，因此在将问题添加到布局`flag=wx.EXPAND`时尝试传递。`StaticText`然而，这似乎没有达到预期的效果。第一列保持足够大以容纳最长的问题，而不是填充可用空间并将单选按钮推到右侧。

```
import wx

class MyDialog(wx.Dialog):
    def __init__(self, *args, **kwargs):
        wx.Dialog.__init__(self, *args, **kwargs)

        sizer = wx.GridBagSizer(5, 5)
        sizer.SetEmptyCellSize((0,0))
        sizer.AddGrowableCol(0)

        for i in range(5):
            description = wx.StaticText(self, -1, "This is a long description \
that may span several lines. Filler filler filler filler filler. More filler \
filler filler filler filler.")
            description.Wrap(500)

            question = wx.StaticText(self, -1, "Are you sure?")
            yes = wx.RadioButton(self, -1, "Yes", style = wx.RB_GROUP)
            no = wx.RadioButton(self, -1, "No")

            sizer.Add(description, (i*3, 0), (1, 3))
            sizer.Add(question, (i*3+1, 0), flag=wx.EXPAND)
            sizer.Add(yes, (i*3+1, 1))
            sizer.Add(no, (i*3+1, 2))

        self.SetSizerAndFit(sizer)
        self.Show()

app = wx.App(False)
dialog = MyDialog(None)
app.MainLoop() 
```

我也尝试过添加一个额外的间隔列，并设置`wx.EXPAND`它，但这也无济于事。我也尝试过设置`wx.ALIGN_RIGHT`单选按钮，但正如预期的那样，这只会导致“否”按钮向右对齐，因为它是第三列占用了剩余的可用空间。

我在这里错过了什么吗？是否不可能在`GridBagSizer`展开中有一列来填充可用空间，还是我做错了？如果我做错了，它是否记录在任何地方？参考适当的文档会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:01:25.803

我尝试使用 wx.Sizer.AddStretchSpacer() 填补空白来解决您的问题。[http://wxpython.org/docs/api/wx.Sizer-class.html#AddStretchSpacer](http://wxpython.org/docs/api/wx.Sizer-class.html#AddStretchSpacer)

我让它工作了，但 StretchSpacers 在 wx.GridBagSizers 中的行为似乎很奇怪

```
sizer.Add(description, (i*3, 0), (1, 3))
sizer.Add(question, (i*3+1, 0), flag=wx.EXPAND)
sizer.AddStretchSpacer((i*3+1,1))
sizer.Add(yes, (i*3+1, 2), flag=wx.ALIGN_RIGHT)
sizer.Add(no, (i*3+1, 3)) 
```

请注意我需要如何将“是”按钮向右对齐。我不知道这是为什么。无论我将拉伸垫片插入哪一列，我都必须将“是”按钮向右对齐（即使垫片已插入第 0 列！）。此外，“否”按钮出现在右侧有点太远了。我不明白为什么代码的行为是这样的，而且这一切似乎有点骇人听闻，所以我强烈建议你不要使用这个解决方案。

但是，使用拉伸间隔应该允许您创建宽度相对于窗口宽度的 wx.BoxSizer。这将允许您排列按钮（因为它们的宽度都相同，并且拉伸垫片将它们推到右侧）。因此，就像@Mike Discoll 简要建议的那样，我重构了您的代码以使用 wx.BoxSizers

```
class MyDialog(wx.Dialog):
    def __init__(self, *args, **kwargs):
        wx.Dialog.__init__(self, *args, **kwargs)

        sizer = wx.BoxSizer(wx.VERTICAL)

        for i in range(5):
            description = wx.StaticText(self, -1, "This is a long description \
that may span several lines. Filler filler filler filler filler. More filler \
filler filler filler filler.")
            description.Wrap(500)

            questionSizer = wx.BoxSizer(wx.HORIZONTAL)
            question = wx.StaticText(self, -1, "Are you sure?")
            yes = wx.RadioButton(self, -1, "Yes", style = wx.RB_GROUP)
            no = wx.RadioButton(self, -1, "No")

            sizer.Add(description)
            questionSizer.Add(question)
            questionSizer.AddStretchSpacer()
            questionSizer.Add(yes)
            questionSizer.Add(no)
            sizer.Add(questionSizer, flag=wx.EXPAND)

        self.SetSizerAndFit(sizer)
        self.Show() 
```

我想你会发现它给了你想要的结果：

![Stretch Spacer 和 wx.BoxSizer](../Images/0ef325de3b85fbf38b959353b4d3edfb.png)

请注意，您必须使用 wx.EXPAND 标志添加 questionSizer，因为拉伸垫片会扩展以填充未使用的区域。如果你在没有wx.EXPAND 的情况下调用sizer.Add()，那么宽度默认设置为文本和按钮的长度（即没有额外的空间来填充拉伸间隔）。使用 wx.Expand 将宽度设置为 sizer 的宽度（根据描述，我们知道大约为 500 像素）

您可以使用边框来获得您喜欢的项目之间的间距。

- -编辑 - -

我刚刚尝试了一个实验，我将描述文本更改为一个非常短的字符串（远小于 500 像素），并且由于调用 self.SetSizerAndFit() 调用，生成的窗口非常非常小并且在视觉上令人不快：

![没有最小尺寸的小描述](../Images/7da4904f8b7e27b1163aacd3baec2605.png)

我认为如果您明确设置 sizer 的大小以确保一致的最小宽度会更好。

```
[...]
width = 500 #the desired minimum width
sizer = wx.BoxSizer(wx.VERTICAL)
sizer.SetMinSize((width,1)) #ensures sizer will be minimum width
"""NOTE: the minimum size gets recalculated when new items are added.
i.e. if height exceeds 1 pixel or if width exceeds wdith, the sizer
will recalculate the minimum size"""

for i in range(5):
    description = wx.StaticText(self, -1, "Short Description") #description is less than 500 pixels, Wrap() will have no effect.
    description.Wrap(width)
[...] 
```

结果是：

![最小尺寸的小描述](../Images/ddb753df27c39cb1be270ca1143b2bdf.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:37:53.110

部分问题是您正在使用 SetSizerAndFit()。尝试只使用 SetSizer()。这很有帮助。就个人而言，我更喜欢嵌套 BoxSizer，因为它可以让我更精细地控制小部件的外观。

# php - 使用 Codeigniter 从 user_id 接收用户信息

> ID：10708039
> 
> 赞同：0
> 
> 时间：2012-05-22T18:39:40.270
> 
> 标签：php, codeigniter, foreign-keys

我有一件事要问大家。我有一个模型类，它从数据库中接收一些文本。在这一行中，我也有 user_id colounm。我需要为每个帖子接收带有另一个模型文件的 userInformation 我该怎么做?

我解释我想要什么：我有这样的表：id[PK] title content user_id[Foreign Key]

示例数据：1 | loreim ipsum | 你好它的新内容文本| 1

我也有一个用户表 id[PK] 用户名头像

示例数据 1 | 管理员 | 头像.gif

我正在从第一个表中接收数据，但我需要接收作者用户的用户名和头像。如何在控制器中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:56:22.430

你可以使用 a `JOIN`，它看起来像这样使用 CI 的[Active Record 类](http://codeigniter.com/user_guide/database/active_record.html)（取决于你到底想要做什么）：

```
$query = $this->db->join('users', 'users.id = posts.user_id')->get('posts');
foreach ($query->result() as $row)
{
    echo $row->post_title;
    echo $row->username;
} 
```

您还可以为每个帖子单独查询用户表，并将用户对象存储在每个帖子的属性中，例如：

```
// foreach $post
$post->user = $this->db->where('id', $post->user_id)->get('users')->row(); 
```

...或其他东西，只需确保不要运行比必要更多的查询（例如，您可以在一个查询中获取所有用户，其中用户 ID 位于一组发布用户 ID 中，无需为每个用户单独查询如果您这样做，请发布）。

我还建议考虑使用像[Datamapper for Codeigniter](http://datamapper.wanwizard.eu/)这样的 ORM ，以消除编写连接和复杂关系的麻烦。这似乎有点矫枉过正，但我​​更喜欢它而不是 CI 的 Active Record 类（即使它在内部使用它），即使对于小型项目也是如此。

# facebook - Facebook - 谁可以使用我的页面标签应用程序？

> ID：10708040
> 
> 赞同：0
> 
> 时间：2012-05-22T18:39:47.337
> 
> 标签：facebook

快速一：是否只有我作为应用程序管理员可以将应用程序添加到粉丝页面，或者任何发现它的人都可以在他们的粉丝页面上使用它？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:43:48.347

只有页面管理员可以将应用添加到页面

他们可以通过[API](https://developers.facebook.com/docs/reference/api/page/#tabs)或[“添加页面选项卡”对话框执行此操作](https://developers.facebook.com/docs/reference/dialogs/add_to_page/)

# objective-c - WebService 与 plist 同步和 plist 同步 WebService

> ID：10708043
> 
> 赞同：0
> 
> 时间：2012-05-22T18:39:56.663
> 
> 标签：objective-c, web-services, synchronization, plist

我只想同步字符串和数字，然后问：将 plist 与 web 服务同步的最佳和最安全的方法是什么？用户离线时，使用app，同步webservice找网络，还是打开app？有信心知道 plist 文件是否已被篡改。有人做过吗？这是正确的方法吗？

如果不清楚，请建议我提供更多详细信息。

# xaml - Infragistics/XAML - 检查字段中的值

> ID：10708044
> 
> 赞同：1
> 
> 时间：2012-05-22T18:39:57.880
> 
> 标签：xaml, infragistics

我一直在检查 Infragistics DataProvider 字段中的值，如果它是特定值，请更改它。

```
<igDP:Field Name="BeginDate" Label="Begin Date">
    <igDP:Field.Settings>
        <igDP:FieldSettings>
            <igDP:FieldSettings.EditorStyle>
                <Style TargetType="{x:Type igEditors:XamDateTimeEditor}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding BeginDate}" Value="01/01/0001">
                            <Setter Property="Text" Value=" "/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </igDP:FieldSettings.EditorStyle>
        </igDP:FieldSettings>
    </igDP:Field.Settings>
</igDP:Field> 
```

BeginDate 值的类型为 DateTime。我正在尝试检查它是否是 DateTime 的最小值，如果是这样，我只是希望该字段显示为空白。

我试过 XamDateTimeEditor 和 XamTextEditor。使用 DateTimeEditor，什么都不会发生。使用 TextEditor，*所有*值都被清除。

希望能朝着正确的方向轻推！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T23:26:12.250

当值是 DateTime 的最小值时，您可以通过将编辑器的模板更改为空来执行此操作。完成此操作需要进行一些更改。

更改 #1，在样式中提供绑定到 BeginDate 并且此绑定无效，因为 DataContext 是 DataRecord 而不是您要绑定到的列表中的项目。如果您检查输出窗口，您将看到如下错误：

System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“DataRecord”（HashCode=13078478）上找不到“BeginDate”属性。绑定表达式：路径=开始日期；DataItem='DataRecord' (HashCode=13078478); 目标元素是'XamDateTimeEditor'（名称=''）；目标属性是“NoTarget”（类型“对象”）

要解决此问题，请将绑定更改为“DataItem.BeginDate”而不是“BeginDate”。

更改 #2，修改 Setter 以设置 Template 而不是 Text，并将其设置为空的 ConrolTemplate。

更新后的字段定义将是：

```
<igDP:Field Name="BeginDate">
    <igDP:Field.Settings>
        <igDP:FieldSettings>
            <igDP:FieldSettings.EditorStyle>
                <Style TargetType="{x:Type igEditors:XamDateTimeEditor}">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding DataItem.DateOfHire}" Value="01/01/0001">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </igDP:FieldSettings.EditorStyle>
        </igDP:FieldSettings>
    </igDP:Field.Settings>
</igDP:Field> 
```

如果为网格中的此字段启用编辑，此解决方案仍将允许您编辑值。

# ruby-on-rails-3 - 如何将对象从 rake 任务传递给 rabl 视图

> ID：10708046
> 
> 赞同：2
> 
> 时间：2012-05-22T18:40:08.923
> 
> 标签：ruby-on-rails-3, json, rabl

我正在尝试使用 rabl 从 rake 任务创建一个 json 文件。下面我有简化版本进行测试。

当我通过 url 查看“articles.json”或“articles/2.json”时，我得到了预期的 json 响应。

但是当我尝试通过 rake 任务运行它时，在创建的 jsonFile 中，@articles 总是有一个空值。它将以与@articles.count 相同的次数呈现 index.json.rabl 视图，但值始终为空。

那么如何将在我的 rake 任务中创建的 @articles 对象传递给 Rabl.render？

# index.json.rabl

```
@feedName ||= 'default'
node(:rss) { partial('articles/rss), :object => @feedName }
node(:headlines) { partial('articles/show'), :object => @articles } 
```

# 显示.json.rabl

```
object @article
attributes :id,:body
.... 
```

# 出口.rake

```
task :breakingnews => :config do
  filename = 'breakingnews.json'
  jsonFile = File.new(filename)
  @articles = Article.limit(10)
  n = Rabl::renderer.json(@articles,'articles/index',view_paths => 'app/views')
  jsonFile.puts b
  jsonFile.close 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-13T18:08:28.287

我遇到了类似的问题。你基本上有2个选择：

1.  显式传递单个对象**作为参数**
2.  **按范围隐式**传递多个对象

 **# 按参数

## 在你的任务中

```
@your_object = ...
Rabl.render(@your_object, 'your_template', view_paths => 'relative/path/from/project/root', :format => :json) 
```

## 在你的 Rabl 模板中

```
object @any_name_you_like
attributes :id,:body
.... 
```

这会将您的模板呈现为 json，并将对象指定为其实例对象（您可以将其命名为任何您想要的名称）

# 按范围

这有点棘手。我发现的唯一选择是将所需的对象设置为调用范围中的实例变量，并将此范围设置为模板的呈现（请参阅*范围*）。

## 在你的任务中

```
@one_object = ...
@another_object = ...
Rabl.render(nil, 'your_template', view_paths => 'relative/path/from/project/root', :format => :json, :scope => self) 
```

## 在你的 Rabl 模板中

```
object @one_object
attributes :id,:body
node(:my_custom_node) { |m| @another_object.important_stuff } 
```**

# c# - DataSet.WriteXml() 表顺序

> ID：10708052
> 
> 赞同：0
> 
> 时间：2012-05-22T18:40:23.403
> 
> 标签：c#, dataset, writexml

我正在使用 c# dataset.writexml() 方法创建一个 xml 文件。我的一个父表有两个子表，我希望 xml 将两个表中的记录一起显示。我在父表和子表之间的数据集中添加了关系，但我没有将记录放在一起。xml 始终将子表 1 中的所有记录放在一起，然后是子表 2 中的所有记录。

有没有办法从两个表中获取记录 1，然后从两个表中获取记录 2，依此类推。

```
<Parent>
  <Child Table 1 Row 1>
  <Child Table 2 Row 1>
  <Child Table 1 Row 2>
  <Child Table 2 Row 2>
<\parent table> 
```

示例 xml 看起来像这样。这就是客户所要求的。

```
<Parent>
  <Count>2</Count> 
  <Child 1>
    <ID>111</ID> 
    <No>11111</No> 
  </Child 1>
  <Child 2>
      <AppNo>11111111</AppNo> 
  </Child 2>
  <Child 1>
    <ID>222</ID> 
    <No>22222</No> 
  </Child 1>
  <Child 2>
      <AppNo>22222222</AppNo> 
  </Child 2>
<\Parent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:48:15.260

如果我正确理解您的问题，这甚至不是有效的 xml。子元素永远不会像您期望的那样在一起。

在打开另一个子表之前，子表必须有一个结束标记，除非您希望子表 2 位于子表 1 下。

你有一个具体的例子可以解释这个问题吗？我不认为它会像你期望的那样表现。

# android - USB Accessory Activity 更改 UI：只有创建视图层次结构的原始线程才能触摸其视图

> ID：10708059
> 
> 赞同：0
> 
> 时间：2012-05-22T18:40:50.843
> 
> 标签：android, usb, android-activity

我只是想知道这个问题是否有有效的解决方案。

我正在开发 USB 附件硬件以连接到 Android 设备。我的 Android 应用程序的活动在接收器线程中创建了我的 Dongle 类的实例，该实例负责处理 USB 通信。该活动还将自身的一个实例传递给 Dongle，因为它在收到消息时为 Dongle 类提供回调。

所以现在你想让硬件做这件事，Dongle 类将监听消息并通过回调通知主 Activity 正在发生的事情，以便它可以调整它的视图以反映正在发生的事情。错误：**只有创建视图层次结构的原始线程才能接触其视图**。

每次硬件或用户更改某些内容时，我都可以创建一个全新的活动，但我会留下一片活动森林。（AFAIK Google 不赞成强行杀死活动）我看不出有任何解决办法，这无论如何都是有效的。我可以让原始线程坐在那里轮询 USB 更改，但这会减慢整个系统的速度。

我试图用“activity.setContentView(R.layout.main)”更改布局，也许我会忘记布局文件并在 SW 中生成 UI。我仍然会在错误的线程中。嗯

任何有任何想法的人，我都会很高兴收到你的来信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:44:51.323

在要更改的活动中创建一个公共处理程序并在其中发布 Runables

# javascript - 在调试控制台代码上设置断点

> ID：10708066
> 
> 赞同：0
> 
> 时间：2012-05-22T18:41:28.813
> 
> 标签：javascript, debugging, firefox, google-chrome, firebug

是否可以在 chrome 或 firebug 的调试控制台上输入的代码上设置断点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:42:41.207

当然！在控制台中输入：

```
(function(){
    debugger;
    alert(0);
})(); 
```

### [DEMO，（打开控制台并重新运行）](http://jsfiddle.net/AR4Sa/)

# php - 如何根据文本框中选择的值获取值？

> ID：10708067
> 
> 赞同：-1
> 
> 时间：2012-05-22T18:41:42.970
> 
> 标签：php, javascript

我想知道，当我从下拉框中选择任何值时，它会在下一个字段中显示它的价格。

示例：如果我从下拉菜单中选择零食，那么它会通过从 PHP 中的数据库中获取其价格来在下一个字段中显示其价格。项目也从数据库中获取。

这是我在选择特定值时想要的方式：

![这是我在选择特定值时想要的方式](../Images/b07eea476f0504ff255fe835b8e5cc56.png)

下面是从数据库中获取数据的代码：

```
<?php
$eb = "SELECT EmployeeID,FirstName,LastName FROM employees";
$res = mysql_query($eb);
$no_records = mysql_num_rows($res);
if($no_records > 0)
{?>
    <select name="EnteredBy" id="EnteredBy"><?php
    while($row = mysql_fetch_array($res))
    {
         echo '<option value='.$row['EmployeeID'].'>'.$row['LastName'].",".$row['FirstName'].'</option>';
    }
    ?>
    </select>
    <?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:59:32.377

像下面这样的东西应该可以帮助你。您需要做的就是编写一个 onchange 函数来使用所选选项的值更新您的“下一个字段”。

```
<html>
<head>
    <script type="text/javascript">
        function changeValue() {
            var price = document.getElementById('items').options[document.getElementById('items').selectedIndex].value;
            document.getElementById('price').innerHTML= '$'+price;
        }
    </script>

</head>
<body onload="changeValue();">
    Select Item:
    <select id="items" onchange="changeValue();">
        <option value="5">Snack</option>
        <option value="1">Soda</option>
        <option value="10">Meal</option>
    </select>

    <br/><br/>
    Price:
    <div id="price">
    </div>
</body>
</html> 
```

# apache-flex - 服务器端 Flex/AIR 应用程序可能吗？

> ID：10708069
> 
> 赞同：0
> 
> 时间：2012-05-22T18:41:48.587
> 
> 标签：apache-flex, air, flex4, mxml, server-side

是否有任何干净的方法来实现服务器端 Flex/AIR 应用程序？基本思想是大型 Flex 应用程序将在服务器上运行。然后，用户将只能在客户端看到 Flex 应用程序的当前视图，并能够与之交互。交互将被发送到服务器，并相应地处理它们。这样做的总体目标是不强迫客户端下载一个非常大的 Flex 应用程序只是为了使用该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:48:26.163

不。这是一个荒谬的想法。为什么不直接使用 Flashplayer 作为交付设备？

你会阻塞服务器。您绝对不想管理弹性应用程序实例。不。不要这样做。什么，你会给每个人一个 RDP 到一个运行它自己的 flex 应用程序的虚拟服务器？哈哈哈哈哈哈

如果您需要协作，请设置 RTMP 服务器。

# oop - Actionscript3 澄清类的使用？

> ID：10708071
> 
> 赞同：0
> 
> 时间：2012-05-22T18:42:08.587
> 
> 标签：oop, class, actionscript

嗨，我对 actionscript 3 很陌生，我想澄清一下类的使用。我正在尝试使用来自[http://siirjak.com](http://sibirjak.com)的 AS3Commons UI 项目。但我不确定如何使用他们的一些课程。我在其中一个关键帧中对其进行格式化的方式是：

```
import com.AlertBox; // The location of the alertbox class
import com.AlertTutorialStep1; // The location of the example AlertTutorialStep1 class

var alertbox:AlertTutorialStep1 = new com.AlertTutorialStep1; // Creating an instance of the example class in the AlertTutorialStep1 doc

alertbox.AlertTutorialStep1(); // Trying to access the AlertTutorialStep1() function which is in the AlertTutorialStep1 class 
```

但是我无法访问功能 AlertTutorialStep1() 并且不确定为什么会出现错误，有人可以为我提供一些见解吗？[http://sibirjak.com/osflash/blog/tutorial-creating-an-alert-box-with-the-as3commons-popupmanager/](http://sibirjak.com/osflash/blog/tutorial-creating-an-alert-box-with-the-as3commons-popupmanager/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T23:42:37.090

如果可能，尽量避免使用时间线。我认为，如果您知道自己在做什么，OOP 和 Flash 时间线就可以工作，但是 stackoverflow 充满了初学者在时间线和课程上苦苦挣扎的问题，而且这些问题往往难以调试。尝试使用单个 Main 文档类来设置您的项目，该类实例化您的项目所需的所有其他类。

也就是说，假设您在相对于它的正确目录中有`AlertBox`和`AlertTutorialStep1`类及其依赖项，我认为如果您将 .fla 的文档类设置为该类，您的代码将起作用`AlertBoxTutorial1`。

再次假设包都设置正确，您可以尝试用以下代码替换现有代码：

```
//import com.AlertBox; // Don't need to import this, AlertTutorialStep1 imports and uses it
import com.AlertTutorialStep1; // The location of the example AlertTutorialStep1 class

var alertbox:AlertTutorialStep1 = new AlertTutorialStep1(); // Don't need to fully qualify the class as it is already imported in the line above

this.addChild(alertbox); // Need to add the instance to the stage

//alertbox.AlertTutorialStep1(); // AlertTutorialStep1() is the constructor of the class and can't be invoked via an instance of it 
```

# excel - 将 Excel 表数据传输到 SQL 2008R2 的最快方法

> ID：10708077
> 
> 赞同：9
> 
> 时间：2012-05-22T18:42:30.987
> 
> 标签：excel, vba, sql-server-2008, import, large-data

有谁知道在*不*使用外部实用程序（即 bcp）的情况下从 Excel 表（VBA 数组）获取数据到 SQL 2008 表的最快方法？请记住，我的数据集通常是 6500-15000 行，大约 150-250 列；我最终在自动 VBA 批处理脚本中传输了大约 20-150 个。

我已经尝试了几种方法从 Excel 表 (VBA) 获取大量数据到 SQL 2008。我在下面列出了这些：

方法 1\. 将表传递到 VBA 数组并发送到存储过程 (ADO) -- 发送到 SQL 很慢

方法2\. 创建断开连接的RecordSet 加载它，然后同步。-- 发送到 SQL 非常慢

方法 3\. 将表放入 VBA 数组，遍历数组并连接（使用分隔符）然后发送到存储过程。-- 发送到 SQL SLOW，但比方法 1 或 2 快。

方法 4\. 将表放入 VBA 数组，循环遍历数组并连接（使用分隔符），然后使用 ADO 记录集 .addnew 命令放置每一行。-- 发送到 SQL 非常快（比方法 1-3 快大约 20 倍），但现在我需要使用单独的过程拆分该数据，这将增加大量等待时间。

方法 5\. 将表放入 VBA 数组，序列化为 XML，以 VARCHAR 形式发送到存储过程，并在存储过程中指定 XML。-- 发送到 SQL 非常慢（比方法 1 或 2 慢大约 100 倍）

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:50:08.747

没有单一的最快方法，因为它取决于许多因素。确保 SQL 中的索引已配置和优化。许多索引会破坏插入/更新性能，因为每个插入都需要更新索引。确保只与数据库建立一个连接，并且在操作过程中不要打开/关闭它。在服务器负载最小时运行更新。您还没有尝试过的唯一其他方法是使用 ADO Command 对象，并发出直接的 INSERT 语句。使用记录集对象的“AddNew”方法时，请确保在插入结束时只发出一个“UpdateBatch”命令。除此之外，VBA 的运行速度只能与接受输入的 SQL 服务器一样快。

编辑：好像你已经尝试了一切。SQL Server 中还有所谓的“批量记录”恢复模式，它减少了写入事务日志的开销。可能是值得研究的东西。这可能很麻烦，因为它需要稍微修改数据库恢复模型，但它可能对您有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-12T10:04:52.287

以下代码将在几秒钟（2-3 秒）内传输数千条数据。

```
Dim sheet As Worksheet
    Set sheet = ThisWorkbook.Sheets("DataSheet")        

    Dim Con As Object
    Dim cmd As Object
    Dim ServerName As String
    Dim level As Long
    Dim arr As Variant
    Dim row As Long
    Dim rowCount As Long

    Set Con = CreateObject("ADODB.Connection")
    Set cmd = CreateObject("ADODB.Command")

    ServerName = "192.164.1.11" 

    'Creating a connection
    Con.ConnectionString = "Provider=SQLOLEDB;" & _
                                    "Data Source=" & ServerName & ";" & _
                                    "Initial Catalog=Adventure;" & _
                                    "UID=sa; PWD=123;"

    'Setting provider Name
     Con.Provider = "Microsoft.JET.OLEDB.12.0"

    'Opening connection
     Con.Open                

    cmd.CommandType = 1             ' adCmdText

    Dim Rst As Object
    Set Rst = CreateObject("ADODB.Recordset")
    Table = "EmployeeDetails" 'This should be same as the database table name.
    With Rst
        Set .ActiveConnection = Con
        .Source = "SELECT * FROM " & Table
        .CursorLocation = 3         ' adUseClient
        .LockType = 4               ' adLockBatchOptimistic
        .CursorType = 0             ' adOpenForwardOnly
        .Open

        Dim tableFields(200) As Integer
        Dim rangeFields(200) As Integer

        Dim exportFieldsCount As Integer
        exportFieldsCount = 0

        Dim col As Integer
        Dim index As Integer
        index = 1

        For col = 1 To .Fields.Count
            exportFieldsCount = exportFieldsCount + 1
            tableFields(exportFieldsCount) = col
            rangeFields(exportFieldsCount) = index
            index = index + 1
        Next

        If exportFieldsCount = 0 Then
            ExportRangeToSQL = 1
            GoTo ConnectionEnd
        End If            

        endRow = ThisWorkbook.Sheets("DataSheet").Range("A65536").End(xlUp).row 'LastRow with the data.
        arr = ThisWorkbook.Sheets("DataSheet").Range("A1:CE" & endRow).Value 'This range selection column count should be same as database table column count.

        rowCount = UBound(arr, 1)            

        Dim val As Variant

        For row = 1 To rowCount
            .AddNew
            For col = 1 To exportFieldsCount
                val = arr(row, rangeFields(col))
                    .Fields(tableFields(col - 1)) = val
            Next
        Next

        .UpdateBatch
    End With

    flag = True

    'Closing RecordSet.
     If Rst.State = 1 Then
       Rst.Close
    End If

   'Closing Connection Object.
    If Con.State = 1 Then
      Con.Close
    End If

'Setting empty for the RecordSet & Connection Objects
Set Rst = Nothing
Set Con = Nothing
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:53:16.947

到目前为止，最快的方法是通过 T-SQL 的[`BULK INSERT`](http://msdn.microsoft.com/en-us/library/ms188365.aspx).

有一些注意事项。

*   您可能需要先将数据导出到 csv （*您可以直接从 Excel 导入；我的经验是从 Access .mdbs 转到 SQL Server，这需要到 csv 的中间步骤*）。
*   SQL Server 机器需要有权访问该 csv（*当您运行`BULK INSERT`命令并指定文件名时，请记住文件名将在运行 SQL Server 的机器上解析*）。
*   您可能需要调整默认值`FIELDTERMINATOR`和`ROWTERMINATOR`值以匹配您的 CSV。

我最初进行了一些尝试和错误的设置，但与我尝试过的所有其他技术相比，性能提升是惊人的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T06:37:58.243

工作得很好，另一方面为了提高速度，我们仍然可以修改查询：

反而：`Source = "SELECT * FROM " & Table`

我们可以用：`Source = "SELECT TOP 1 * FROM " & Table`

这里我们只需要列名。因此无需对整个表进行查询，只要导入新数据就可以扩展流程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-15T16:57:23.513

据我记得，你可以创建一个链接到Excel文件的服务器（只要服务器能找到路径；最好把文件放在服务器的本地磁盘上），然后使用SQL从中检索数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-20T23:04:00.870

刚刚尝试了几种方法，我又回到了一种相对简单但速度很快的方法。它的速度很快，因为它使 SQL 服务器完成所有工作，包括高效的执行计划。

我只是构建了一个包含 INSERT 语句脚本的长字符串。

```
 Public Sub Upload()
        Const Tbl As String = "YourTbl"
        Dim InsertQuery As String, xlRow As Long, xlCol As Integer
        Dim DBconnection As New ADODB.Connection

        DBconnection.Open "Provider=SQLOLEDB.1;Password=MyPassword" & _
            ";Persist Security Info=false;User ID=MyUserID" & _
            ";Initial Catalog=MyDB;Data Source=MyServer"

        InsertQuery = ""
        xlRow = 2
        While Cells(xlRow, 1) <> ""
            InsertQuery = InsertQuery & "INSERT INTO " & Tbl & " VALUES('"

            For xlCol = 1 To 6 'Must match the table structure
                InsertQuery = InsertQuery & Replace(Cells(xlRow, xlCol), "'", "''") & "', '"  'Includes mitigation for apostrophes in the data
            Next xlCol
            InsertQuery = InsertQuery & Format(Now(), "M/D/YYYY") & "')" & vbCrLf 'The last column is a date stamp, either way, don't forget to close that parenthesis
            xlRow = xlRow + 1
        Wend

        DBconnection.Execute InsertQuery 'I'll leave any error trapping to you
        DBconnection.Close  'But do be tidy :-)
        Set DBconnection = Nothing
    End Sub 
```

# java - 在特定时间内运行 Java

> ID：10708079
> 
> 赞同：1
> 
> 时间：2012-05-22T18:42:38.067
> 
> 标签：java

```
for(int i = 1; i < 10000; i++) {
Command nextCommand = getNextCommandToExecute();
} 
```

我想运行上述程序 60 分钟。所以我需要做一些类似的事情，而不是 for 循环

```
long startTime = System.nanoTime();

    do{
    Command nextCommand = getNextCommandToExecute();
    } while (durationOfTime is 60 minutes); 
```

但我不确定，我应该如何让这个程序运行 60 分钟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T18:47:25.787

启动一个休眠 60 分钟并退出的后台线程：

```
Runnable r = new Runnable() {
    @Override
    public void run() {
        try {
            Thread.sleep(60 * 60 * 1000L);
        }
        catch (InterruptedException e) {
            // ignore: we'll exit anyway
        }
        System.exit(0);
    }
}
new Thread(r).start();
<your original code here> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T18:48:16.850

```
long startTime = System.currentTimeMillis();
do 
{
  //stuff
} while (System.currentTimeMillis() - startTime < 1000*60*60); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T18:49:35.240

尝试以下操作：

```
long startTime = System.currentTimeMillis();
long endTime = startTime + (60*60*1000);

while(System.currentTimeMillis() <= endTime) {
    Command nextCommand = getNextCommandToExecute();
} 
```

这种方法的一个缺点是，如果`Command`您尝试执行超过 60 分钟的计时器，或者根本不会完成。如果不允许这种行为，最好实现一个线程来中断正在运行此循环的任何线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T18:49:10.667

你可以使用：

```
long startTime = System.nanoTime();
do {
    Command nextCommand = getNextCommandToExecute();
} while ((System.nanoTime() - startTime) < 60 * 60 * 1000000000L); 
```

请注意，与不仅在刻度上`System.nanoTime()`使用略有不同，而且在测量方面也有所不同：是经过的时间，是系统时间（挂钟）。如果系统时间发生变化，则无法按预期工作。（但这不适用于夏令时更改，因为返回值是 UTC / GMT。）`System.currentTimeMillis()``System.nanoTime()``System.currentTimeMillis()``System.currentTimeMillis()`

`1000000000L`纳秒是一秒。请注意`L`for `long`。在 Java 7 中，您还可以编写更具可读性的`1_000_000_000L`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T18:51:29.307

```
long startTime = System.currentTimeMillis();

do{
Command nextCommand = getNextCommandToExecute();
}while (startTime < startTime+60*60*1000); 
```

# c# - .net 上的 system.io.streamwriter 紧凑框架口音

> ID：10708087
> 
> 赞同：0
> 
> 时间：2012-05-22T18:43:01.953
> 
> 标签：c#, compact-framework, iostream, streamwriter

好吧，我正在使用所有这些代码：

```
// StreamWriter file = new StreamWriter(AppSettings.Instance.Dpath + "\\notaventa.txt");

// StreamWriter file = new StreamWriter(AppSettings.Instance.Dpath + "\\notaventa.txt", false, System.Text.Encoding.GetEncoding(1252));
' Dim objEscritor = New StreamWriter("C:\temp\salida_encoding.txt", True, System.Text.Encoding.Default)
// StreamWriter file = new StreamWriter(AppSettings.Instance.Dpath + "\\notaventa.txt", true, System.Text.Encoding.ASCII); 
```

但没有一个适用于打印

> 坎西翁

每个人都打印

> 坎昆

我该如何解决？我在用

> 紧凑型框架 3.5

用于手持设备

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:45:59.707

您可以通过*不*指定`Encoding.ASCII`. UTF-8 通常是一个不错的选择，尽管它当然取决于要*读取*文件的内容。基本上 ASCII 没有*任何*重音字符。它停在 U+007E。

不过我希望`Encoding.GetEncoding(1252)`能工作，因为[Windows 1252](http://en.wikipedia.org/wiki/Windows-1252)包含字符“ó”。当您未指定编码时与默认值相同，因为那将使用 UTF-8。您确定您的字符串包含正确的数据吗？你也用什么来*读取*文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:51:59.323

ASCII 不包括对`ó`字符的支持。除非您有令人信服的理由，否则您应该始终使用 Unicode：

```
System.IO.StreamWriter file = new System.IO.StreamWriter(
    Path.Combine(AppSettings.Instance.Dpath, "notaventa.txt"), true, 
    System.Text.Encoding.UTF8); 
```

与您的问题无关：您应该使用`Path.Combine`（而不是显式字符串连接）来构建文件路径。它将为您省去确定是否包括前导/尾随的麻烦`\`。

# c# - 正则表达式查找文本阶段后面的数字

> ID：10708089
> 
> 赞同：0
> 
> 时间：2012-05-22T18:43:09.953
> 
> 标签：c#, regex

我有一个字符串，它是电子邮件对象的 ContentStream。

该字符串类似于“....苹果数：\t1000....”

我需要将 1000 放入一个变量中。但我无法构建一个有效的正则表达式。

我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:45:57.143

`\d+`对于非负整数。`\-?\d+`对于正整数或负整数。

当然，这将匹配字符串中的*任何*数字。您应该包括一些环顾四周以确保您捕获正确的数字。对于上面的例子：

```
@"(?<=Number\ of\ apples\:\s*)\d+" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T18:50:36.317

您可以从以下内容开始，作为实验的基础：

```
\b(-?[0-9]+(\.[0-9]+)?)\b 
```

# javascript - 在chrome扩展中获取executeScript之外的变量

> ID：10708093
> 
> 赞同：4
> 
> 时间：2012-05-22T18:43:29.147
> 
> 标签：javascript, google-chrome, google-chrome-extension, global-variables

我正在尝试编写 chrome 扩展程序，并且我有一个带有以下代码的 background.html：

```
var x = "test";

function tabChanged(id, info, tab){
    if(info.status == 'complete'){
        chrome.tabs.executeScript(id, {code:"try{alert(x);}catch(e){alert(e);}"}, null);
    }
}

chrome.tabs.onUpdated.addListener(tabChanged);
chrome.tabs.getAllInWindow(null,function(tabs){
    for(var index=0; index < tabs.length; index++){
        chrome.tabs.executeScript(tabs[index].id, {code:"try{alert(x);}catch(e){alert(e);}"}, null);
    }
}); 
```

但是变量“x”在 executeScript 中始终是未定义的。

**如何从 executeScript 获取/设置 x？**不使用消息传递。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:51:05.060

内容脚本在网页上下文中执行。有关更多信息，请参阅Chrome 文档中的[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)部分。

如果要将字符串变量从后台页面传递给`chrome.tabs.executeScript`您必须执行以下操作：

```
var x = "test";
chrome.tabs.executeScript(id, {code:"var x = '"+x+"'; try{alert(x);}catch(e){alert(e);}"},null); 
```

如果要修改变量，则只有一种方法-消息传递：

```
var x = 1;
console.log('x=' + x);

chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    console.log(request);
    if(request.command == 'setVar') {
        window[request.name] = request.data;
    }
});

chrome.browserAction.onClicked.addListener(function() {
    var code = "chrome.extension.sendRequest({command: 'setVar', name: 'x', data: 2});";
    chrome.tabs.executeScript(null, {code:code});
    window.setTimeout(function(){console.log('x=' + x);}, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-02T13:42:56.447

对于 chrome `Chrome 92+`，您可以使用[args](https://developer.chrome.com/docs/extensions/reference/scripting/#type-ScriptInjection)

```
chrome.tabs.query({active: true, currentWindow: true}).then(([tab])=>{
  const para = "Hello world!!!"
  chrome.scripting.executeScript({
    target: {tabId: tab.id},
    function: (args) => {
      alert(args)
    },
    args: [para]
  })
}) 
```

* * *

或者您可以使用[chrome.storage](https://developer.chrome.com/docs/extensions/reference/storage/#usage)

```
{
  "manifest_version": 3,
  "permissions": [
    "storage",
    "activeTab",
    "scripting"
  ]
} 
```

```
chrome.storage.sync.set({msg: "hello world"})
chrome.tabs.query({active: true, currentWindow: true}).then(([tab])=>{
  chrome.scripting.executeScript({
    target: {tabId: tab.id},
    function: () => {
      chrome.storage.sync.get(['msg'], ({msg})=> {
        console.log(`${msg}`)
        alert(`Command: ${msg}`)
      })
    }
  })
}) 
```

### args 中传递函数的更新可以吗？

**你不能**

也不`Storage`是`Args`，它们都不能接受函数参数。

例子：

```
const myObj = {
  msg: "Hi",
  myNum: 1,
  myFunc: ()=>{return "hi"},
  myFunc2: function() {return ""}
}

chrome.storage.sync.set({
  msg: "my storage msg",
  myObj,
})

chrome.tabs.query({active: true, currentWindow: true}).then(([tab])=>{
  chrome.scripting.executeScript({
    target: {tabId: tab.id},
    function: (para1, para2MyObj) => {
      console.log(para1) // Hello
      console.log(JSON.stringify(para2MyObj)) // {"msg":"Hi","myNum":1} // myFunc, myFunc2 are missing. You can't get the variable if its type is function.
      chrome.storage.sync.get(['msg', "myObj"], ({msg, myObj})=> {
        console.log(`${msg}`) // "my storage msg"
        console.log(JSON.stringify(myObj)) // {"msg":"Hi","myNum":1}
        alert(`Command: ${msg}`)
      })
    },
    args: ["Hello", myObj]
  })
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-21T20:57:27.543

您的变量未定义的原因是因为您在字符串中引用了您的变量，所以您可以简单地执行以下操作：

```
var yourVar = "your variable"
   //define your variable
chrome.tabs.executeScript({code: 'Your code here' + yourVar + ';}'})
   //then format it like this ({code: "Your code as a string" + your variable + "code"}) 
```

如果您想稍后更改变量而不是只做同样的事情但使用新变量，这很简单

# java - Java Serializable：serialVersionUID 的重要性？

> ID：10708095
> 
> 赞同：1
> 
> 时间：2012-05-22T18:43:32.923
> 
> 标签：java, serialization

> **可能重复：**
> [我为什么要关心serialVersionUID？](https://stackoverflow.com/questions/285793/why-should-i-bother-about-serialversionuid)

我正在使用一个实现 Serializable 的类。Eclipse 给了我一个“No Serial UID”警告，但是写和读类工作正常。我想知道具有 UID 的 Serializable 类的目的是什么？这只是一种好的做法，还是没有它我的课最终无法工作？可以是任何数字吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T18:46:51.403

当您使用不同的 VM 或在不同的机器上对同一个类进行序列化和反序列化时，这一点很重要。UID 用于检查您尝试反序列化的类是否真的是您认为的那个，所以如果您的代码中的类有一个 UID，而被序列化的类有一个不同的 UID，则 de - 序列化将失败。

JVM 会自动给一个没有 UID 的类，但不能保证不同的 JVM 会给同一个类提供相同的 UID。

[阅读 Serializable 接口的 javadoc 了解更多细节。](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)

> 可以是任何数字吗？

理想情况下，它应该是某个特定版本的类所独有的数字（如哈希），如果您对影响序列化字段（非`transient`）的类进行更改，则 UID 需要更改。我认为 Eclipse 可以自动为您生成 UID。

# java - uk.co.mmscomputing twine 扫描仪

> ID：10708097
> 
> 赞同：3
> 
> 时间：2012-05-22T18:43:41.283
> 
> 标签：java, japplet, twain, image-scanner

我正在使用这个 mmscomputing 库作为 java 小程序来扫描图像或文档。使用swings，我创建了一个扫描按钮，它通过调用mmscomputing jar的scanner.acquire（）方法来获取扫描仪。

然后将扫描的图像放入jpanel进行显示。

问题是，当我第一次启动我的小程序并点击我的扫描按钮时..扫描工作正常..它进入的吐温状态是：3,4,5,6,7,5,4,3

然后第二次，再次点击我的扫描按钮..吐温状态它进入的是：3,4,5,4,3

它不会进入图像传输就绪和传输状态，因此不会进入下面的 CODE IF 循环

if (type.equals(ScannerIOMetadata.ACQUIRED))

所以我第二次无法在我的 jpanel 中看到新的扫描图像......

然后第三次，点击我的扫描按钮..再次正常工作..进入所有状态。所以我的意思是，对于交替打开或重新启动java小程序..它可以工作。会有什么问题..？

我想，每次当我点击扫描按钮时，它都应该让我在 Jpanel 中获得一个新图像。但它正在做替代时间。我可以强制显式设置或更改 twain 状态以进入第 6 和第 7 状态.. 还是第二次出现一些 twain 源初始化问题？因为每次重新启动小程序都很好..或者每次单击扫描按钮时都可以通过某种方式重新初始化小程序对象..因为每次单击扫描按钮时我都会重新启动小程序...

我不明白。。

下面是示例代码：

```
import uk.co.mmscomputing.device.twain.TwainConstants;
import uk.co.mmscomputing.device.twain.TwainIOMetadata;
import uk.co.mmscomputing.device.twain.TwainSource; 
import uk.co.mmscomputing.device.twain.TwainSourceManager;

public class XXCrop extends JApplet implements PlugIn, ScannerListener 
{

    private JToolBar jtoolbar = new JToolBar("Toolbar", JToolBar.HORIZONTAL);
    ImagePanel ipanel;
    Image im =null;
    BufferedImage imageforCrop;
    ImagePlus imp=null;
    int imageWidth;
    int imageHeight;
    private static final long serialVersionUID = 1L;
    Container   content = null;
    private JPanel jContentPane = null;
    private JButton jButton = null;
    private JButton jButton1 = null;
    JCheckBox clipBox = null;
    JPanel crpdpanel=null;
     JPanel cpanel=null;
    private Scanner scanner=null;
    private  TwainSource ts ;
    private boolean       is20;

    ImagePanel imagePanel,imagePanel2 ;

    public static void main(String[] args) {
        new XXCrop().setVisible(true);
    }

    public void run(String arg0) {

        new XXCrop().setVisible(false);
        repaint();
    }

    /**
     * This is the default constructor
     */
    public XXCrop() {
        super();
        init();
        try {
            scanner = Scanner.getDevice();

            if(scanner!=null)
            {
            scanner.addListener(this);
            }

        } catch (Exception e) 
        {
            e.printStackTrace();
        }

    }

    /**
     * This method initializes this
     * 
     * @return void
     */
    public void init() 
    {
        this.setSize(1200, 600);
        this.setLayout(null);
        //this.revalidate();
        this.setContentPane(getJContentPane());
    }

    private JToolBar getJToolBar() 
    {
        jtoolbar.add(getJButton1());
        jtoolbar.add(getJButton());

        jtoolbar.setName("My Toolbar");   
        jtoolbar.addSeparator();
        Rectangle r=new Rectangle(0, 0,1024, 30 );
        jtoolbar.setBounds(r);
        return jtoolbar;
    }

    private JPanel getJContentPane() 
    {
        if (jContentPane == null) 
        {
            jContentPane = new JPanel();
            jContentPane.setLayout(null);
            jContentPane.add(getJToolBar());
        }
        return jContentPane;
    }

    private JButton getJButton() {
        if (jButton == null) {
            jButton = new JButton();
            jButton.setBounds(new Rectangle(4, 16, 131, 42));
            jButton.setText("Select Device");
            jButton.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent e) {
                    if (scanner.isBusy() == false) {
                        selectDevice();
                    }

                }
            });
        }
        return jButton;
    }

    /* Select the twain source! */
    public void selectDevice() {

        try {
            scanner.select();
        } catch (ScannerIOException e1) {
            IJ.error(e1.toString());
        }

    }

    private JButton getJButton1() 
    {
        if (jButton1 == null) {
            jButton1 = new JButton();
            jButton1.setBounds(new Rectangle(35,0, 30, 30));
            jButton1.setText("Scan");
            jButton1.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent e) 
                {//jContentPane.remove(crpdpanel);
                    //jContentPane.removeAll();
                //jContentPane.repaint();
                //jContentPane.revalidate();

                    getScan();
                }
            });
        }
        return jButton1;
    }

    public void getScan() 
    {

        try 
        {   

        //scanner = Scanner.getDevice();
        //scanner.addListener(this);
            scanner.acquire();
        } 
        catch (ScannerIOException e1) 
        {
            IJ.showMessage("Access denied! \nTwain dialog maybe already opened!");
            e1.printStackTrace();
        }
    }

     public Image getImage()
     { 
         Image image = imp.getImage();
         return image;
     }

     /*Image cimg;

     public Image getCimg()
        { 
            return cimg;
        }*/

    public void update(ScannerIOMetadata.Type type, ScannerIOMetadata metadata) {

        if (type.equals(ScannerIOMetadata.ACQUIRED)) 
        {   

            //imagePanel.revalidate();
            //imagePanel.repaint();
            //imagePanel.invalidate();

            //jContentPane.remove(ipanel);
            //ipanel.repaint();

    if(imp!=null)
    {
        jContentPane.remove(ipanel);
        jContentPane.remove(cpanel);
        jContentPane.remove(crpdpanel);
    }

             imp = new ImagePlus("Scan", metadata.getImage());
             //imp.show();
             im = imp.getImage();

             //imagePanel = new ImagePanel(im,imageWidth,imageHeight);
             imagePanel = new ImagePanel(im);
             imagePanel.updateUI();

             imagePanel.repaint();
             imagePanel.revalidate();

             ClipMover mover = new ClipMover(imagePanel);
             imagePanel.addMouseListener(mover);
             imagePanel.addMouseMotionListener(mover);

              ipanel = imagePanel.getPanel();

             ipanel.setBorder(new LineBorder(Color.blue,1));
             ipanel.setBorder(BorderFactory.createTitledBorder("Scanned Image"));
             ipanel.setBounds(0, 30,600, 600);
             ipanel.repaint();
             ipanel.revalidate();
             ipanel.updateUI();
             jContentPane.add(ipanel);
             jContentPane.getRootPane().revalidate();
             jContentPane.updateUI();
             //jContentPane.repaint();

            // cimg=imagePanel.getCimg();

            // ImagePanel cpanel = (ImagePanel) imagePanel.getUIPanel();
             /*
             cpanel.setBounds(700, 30,600, 800);
             jContentPane.add(imagePanel.getUIPanel());
             */
              cpanel = imagePanel.getUIPanel();
             cpanel.setBounds(700, 30,300, 150);
             cpanel.repaint();
             cpanel.setBorder(new LineBorder(Color.blue,1));
             cpanel.setBorder(BorderFactory.createTitledBorder("Cropping Image"));
             jContentPane.add(cpanel);

             jContentPane.repaint();
             jContentPane.revalidate();

            metadata.setImage(null);
            try {
                new uk.co.mmscomputing.concurrent.Semaphore(0, true).tryAcquire(2000, null);
            } catch (InterruptedException e) {
                IJ.error(e.getMessage());

            }

        } 

        else if (type.equals(ScannerIOMetadata.NEGOTIATE)) {
            ScannerDevice device = metadata.getDevice();
            try {
                device.setResolution(100);
            } catch (ScannerIOException e) {
                IJ.error(e.getMessage());
            }

              try{
              device.setShowUserInterface(false);
            // device.setShowProgressBar(true);
        //   device.setRegionOfInterest(0,0,210.0,300.0);
              device.setResolution(100); }catch(Exception e){
              e.printStackTrace(); }

        }

        else if (type.equals(ScannerIOMetadata.STATECHANGE)) {
            System.out.println("Scanner State "+metadata.getStateStr());
            System.out.println("Scanner State "+metadata.getState());
            //switch (metadata.ACQUIRED){};
            ts = ((TwainIOMetadata)metadata).getSource();
        //ts.setCancel(false);
            //ts.getState()
            //TwainConstants.STATE_TRANSFERREADY
             ((TwainIOMetadata)metadata).setState(6);
            if ((metadata.getLastState() == 3) && (metadata.getState() == 4)){} 
            // IJ.error(metadata.getStateStr());
        } 

        else if (type.equals(ScannerIOMetadata.EXCEPTION)) {
            IJ.error(metadata.getException().toString());
        }

    }

     public void stop(){                                                    // execute before System.exit
            if(scanner!=null){                                                   // make sure user waits for scanner to finish!
                 scanner.waitToExit();

                    ts.setCancel(true);

                    try {
                        scanner.setCancel(true);
                    } catch (ScannerIOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
            }
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:27:23.213

我不是专家，但你什么时候`ScannerIOMetadata.STATECHANGE`不应该检查扫描是否完成？

如果是，您应该再次初始化扫描仪。

像这样的东西：

```
if (metadata.isFinished())
{
   twainScanner = (TwainScanner) Scanner.getDevice();
} 
```

# wcf - 自定义 WCF 绑定等效于 WSHttpBinding 并关闭 WS-Addressing

> ID：10708104
> 
> 赞同：1
> 
> 时间：2012-05-22T18:44:22.087
> 
> 标签：wcf, wshttpbinding, ws-addressing

我正在尝试创建需要由 Java 客户端使用的 WCF 服务。Java 客户端的要求是禁用 WS-Addressing。我必须使用 WSHttpBinding。首先，我对此有点陌生。我在网上做了一些快速搜索，但无法确定这是否是正确的解决方案。有人可以指出我正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:54:40.510

对于此类问题，请使用[http://webservices20.cloudapp.net/ 。](http://webservices20.cloudapp.net/)您没有指定需要哪种安全性。一种选择是

```
<!-- generated via Yaron Naveh's http://webservices20.blogspot.com/ -->

<customBinding>
  <binding name="NewBinding0">
    <transactionFlow />
    <security authenticationMode="UserNameOverTransport" messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10" />
    <textMessageEncoding messageVersion="Soap12" />
    <httpsTransport />
  </binding>
</customBinding>

<!-- generated via Yaron Naveh's http://webservices20.blogspot.com/ --> 
```

# javascript - 如何使用 JQuery 将动态小数添加到 div 中的另一个小数

> ID：10708105
> 
> 赞同：4
> 
> 时间：2012-05-22T18:44:25.273
> 
> 标签：javascript, jquery, html

我需要能够将输入中的小数添加到 div 中的小数。下面是我的代码。现在，它只是将两个数字连接在一起。谢谢。

编辑：工作代码

```
<div id="addme">5.01</div>
<input type="text" id="anumber" value="">
<button id="add">Add Number to div</button>

$('#add').click(function() {
var number = parseFloat($('#anumber').val()) || 0;
//alert(number);
$('#addme').html(function(i, val) {
return (parseFloat(val) + number).toFixed(2);
});
}); 
```

旧的非工作代码如下：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<div id="addme">5.01</div>

<input type="text" id="anumber" value="" />

<button id="add">Add Number to div</button>

<script type="text/javascript">
    $('#add').click(function(){
        var number = $('#anumber').val();
        if(number=='undefined' || number==''){
            var number=0;
        }
        //alert(number);
        $('#addme').html(function(i, val) {return val*1+number });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:51:57.403

由于您正在处理十进制数字，请使用`parseFloat()`：

```
$('#add').click(function() {
    var number = parseFloat($('#anumber').val()) || 0;
    $('#addme').html(function(i, val) {
        return parseFloat(val) + number;
    });
});​ 
```

[http://jsfiddle.net/mblase75/47t7x/](http://jsfiddle.net/mblase75/47t7x/)

**更新**

由于您可能会引入浮点数学错误（尝试输入“0.6”），您应该在返回之前将其四舍五入到合适的小数位数（如果处理美元和美分，则为 2；如果处理其他度量，则为 7 或更多）：

```
$('#add').click(function() {
    var number = parseFloat($('#anumber').val()) || 0;
    $('#addme').html(function(i, val) {
        return parseFloat((parseFloat(val) + number).toFixed(9)); 
    });
});​ 
```

[http://jsfiddle.net/mblase75/47t7x/1/](http://jsfiddle.net/mblase75/47t7x/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T18:48:47.227

您应该为此使用 parseInt()。

```
$('#addme').html(function(i, val) {return parseInt(val,10)+parseInt(number,10) }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T18:49:36.173

只需确保将字符串解析为实际数值即可。

```
function(i, val) {return parseFloat(val)*1+parseFloat(number) } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T18:50:08.770

```
// On the click event of #add
$('#add').on("click", function(){
    // n is equal to #anumber, or 0 if #anumber is blank
    var n = $('#anumber').val() || 0
    // Determine new HTML content for #addme
    $('#addme').html(function(i,v) {
        // Return the sum of n and v floated, to two decimal places
        return ( parseFloat(n) + parseFloat(v) ).toFixed(2);
    });
});​ 
```

小提琴：http: [//jsfiddle.net/G8nka/1/](http://jsfiddle.net/G8nka/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T18:51:57.263

要将字符串转换为数字，您可以使用`+`字符串值之前的技巧。它将字符串值转换为数字。此代码工作正常：

```
$('#add').click(function() {
    var number = +$('#anumber').val() || 0;
    $('#addme').html(function(i, val) {
        return (+val + number).toFixed(2);
    });
});​ 
```

**演示：http:** [//jsfiddle.net/K9g49/](http://jsfiddle.net/K9g49/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T19:06:25.667

在您的代码中，您似乎想要总和，而不是这里的连接是总和的代码，您需要将其放在 $(document).ready 上，因为您的代码在对象可用之前运行。

```
 $(document).ready(function() {
        $('#add').click(function(){
            var number = $('#anumber').val();
            if(number=='undefined' || number=='')
                number=0;
            var target=$('#addme');
            target.html(1*target[0].innerHTML+1*number);
        });
    }); 
```

如果你想要连接只需删除 1*

# c# - stackpanel的参数不正确错误

> ID：10708108
> 
> 赞同：1
> 
> 时间：2012-05-22T18:44:30.797
> 
> 标签：c#, wpf, windows-phone-7, xaml, exception

所以我正在开发一个 Windows 手机应用程序，我试图在两个堆栈面板（基本上是我的应用程序的两个主屏幕）之间移动元素。

我有一个如下所示的枢轴项目：

```
<controls:Pivot Title="MY APPLICATION">
<!--Pivot item one-->
    <controls:PivotItem Header="All Tokens">
        <ListBox x:Name="AllTokenListBox" Margin="0,0,0,0">
            <StackPanel x:Name="AllTokenStack"></StackPanel>
        </ListBox>
    </controls:PivotItem>
    <!--Pivot item two-->
    <controls:PivotItem Header="My Tokens">
        <ListBox x:Name="MyTokenListBox" Margin="0,0,0,0">
            <StackPanel x:Name="myTokenStack"></StackPanel>
        </ListBox>
    </controls:PivotItem>
</controls:Pivot> 
```

当双击 AllTokenStack 中的一个项目时，我想将它移到 myTokenStack。当我这样做时，程序崩溃并说“参数不正确”。仅当我未处于调试模式时才会这样做（因此，如果手机从计算机上拔下并且我尝试运行该应用程序）。如果它处于调试模式，它工作正常。

这是我用来传输对象的代码：

```
private void container_Tap(object sender, GestureEventArgs e) {
    if (AllTokenContainer.Children.Contains(this)) {
       AllTokenContainer.Children.Remove(this);
       MyTokenContainer.Children.Add(this);      
    }
} 
```

有谁知道如何解决这个奇怪的错误？

**编辑** 只是为了说清楚。C# 代码位于我称为 Token 的类中。Token 类是一个用户控件。正是用户点击以触发事件的控件。这是错误的方法吗？

来自异常的堆栈跟踪：

```
 at MS.Internal.XcpImports.CheckHResult(UInt32 hr)
   at MS.Internal.XcpImports.Collection_AddValue[T](PresentationFrameworkCollection`1 collection, CValue value)
   at MS.Internal.XcpImports.Collection_AddDependencyObject[T](PresentationFrameworkCollection`1 collection, DependencyObject value)
   at System.Windows.PresentationFrameworkCollection`1.AddDependencyObject(DependencyObject value)
   at System.Windows.Controls.UIElementCollection.AddInternal(UIElement value)
   at System.Windows.PresentationFrameworkCollection`1.Add(UIElement value)
   at MTG_Token_Tracker.TokenGraphic.container_Tap(Object sender, GestureEventArgs e)
   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:10:43.747

我会尝试使用数据绑定，而不是使用 UserControl，`ObservableCollection`在后端使用令牌类。当 GUI 部分由绑定处理时，移动事物变得更容易一些。

对于如何执行此操作的示例，我使用“Windows Phone Pivot Application”模板创建了一个 Windows Phone 项目以用作基础，并将其命名为“TokenAnswer”（如果您这样做并粘贴下面的代码，您应该有一个工作示例）。

在 MainPage.xaml 中，我将 DoubleTap 事件添加到第一个列表的项目模板中，并将 SecondListBox 绑定设置为“Items2”。我还设置了 Tag={Binding}，它将 Tag 变量设置为 GUI 项目后面的 ItemViewModel（这样做是为了我可以访问被点击的项目，还有其他方法可以做到这一点，但对于这个例子来说，这很容易）。

```
<phone:PhoneApplicationPage 
x:Class="TokenAnswer.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768" 
d:DataContext="{d:DesignData SampleData/MainViewModelSampleData.xaml}"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait"  Orientation="Portrait"
shell:SystemTray.IsVisible="True">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <!--Pivot Control-->
    <controls:Pivot Title="MY APPLICATION">
        <!--Pivot item one-->
        <controls:PivotItem Header="first">
            <!--Double line list with text wrapping-->
            <ListBox x:Name="FirstListBox" Margin="0,0,-12,0" ItemsSource="{Binding Items}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                      <StackPanel DoubleTap="Token_DoubleTap" Tag="{Binding}" Margin="0,0,0,17" Width="432" Height="78">
                          <TextBlock Text="{Binding LineOne}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                          <TextBlock Text="{Binding LineTwo}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                      </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </controls:PivotItem>

        <!--Pivot item two-->
        <controls:PivotItem Header="second"> 
            <!--Triple line list no text wrapping-->
                <ListBox x:Name="SecondListBox" Margin="0,0,-12,0" ItemsSource="{Binding Items2}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,0,0,17">
                                <TextBlock Text="{Binding LineOne}" TextWrapping="NoWrap" Margin="12,0,0,0" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                                <TextBlock Text="{Binding LineThree}" TextWrapping="NoWrap" Margin="12,-6,0,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
        </controls:PivotItem>
    </controls:Pivot>
</Grid>

</phone:PhoneApplicationPage> 
```

在 MainViewModel.cs 中，我添加了第二个集合（“Items2”）并在构造函数中对其进行了初始化，该集合用于第二个列表框：

```
public MainViewModel()
    {
        this.Items = new ObservableCollection<ItemViewModel>();
        this.Items2 = new ObservableCollection<ItemViewModel>();
    }

    /// <summary>
    /// A collection for ItemViewModel objects.
    /// </summary>
    public ObservableCollection<ItemViewModel> Items { get; private set; }
    public ObservableCollection<ItemViewModel> Items2 { get; private set; } 
```

最后，在 MainPage.xaml.cs 中，我添加了事件处理程序的代码隐藏，以从第一个集合中删除项目，并将其添加到第二个集合。

```
private void Token_DoubleTap(object sender, GestureEventArgs e)
    {
        var token = (sender as StackPanel).Tag as ItemViewModel;
        App.ViewModel.Items.Remove(token);
        App.ViewModel.Items2.Add(token);
    } 
```

希望您可以将此作为指南来帮助您当前的项目！

# arrays - 修改MongoDB中数组的最后一个元素

> ID：10708109
> 
> 赞同：12
> 
> 时间：2012-05-22T18:44:31.047
> 
> 标签：arrays, mongodb

我有一个这样的对象结构：

```
 {
    name: "...",
    pockets: [
        {
            cdate: "....",
            items: [...]
        }
        ...
    ]
 } 
```

在更新操作中，我想将一些记录添加到最后一个*口袋项目的**项目*字段中。使用点表示法是我知道访问子文档的唯一方法，但我无法得到我想要的。所以，我正在寻找这样的东西：

 **   口袋.-1.items
*   口袋.$last.items

是否可以修改最后一个元素？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:55:04.450

I don't know of a way to do this using a single-line query. But you could select the record, update and then save it.

```
var query = <insert query here>;
var mydocs = db.mycollection.find(query);
for (var i=0 ; i<mydocs.length ; i++) {
    mydocs[i].pockets[pockets.length-1].items.push('new item');
    db.mycollection.save(mydoc);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:43:51.693

我不相信有可能以原子方式做到这一点。有一个将此功能添加到 MongoDB的[请求。](https://jira.mongodb.org/browse/SERVER-2476)

如果您可以确保**应用程序**代码中的线程安全，您可以使用一系列 $pop 从 pockets 数组（从 pockets 中删除最后一个元素）到变量 p，然后 $addToSet 到 p.items，现在您可以 $push p 回到口袋里。但是，如果您的应用程序无法确保一次只能有一个进程执行此操作，那么另一个进程可能会在这些步骤的中间修改数组，您最终可能会丢失该更新。

您还可以[在此处](http://www.mongodb.org/display/DOCS/Atomic+Operations)查看“如果当前更新”语义，以查看另一种可以解决多线程问题的可能竞争的方法。*

# java - 我需要在同一页面上打印 JTextArea 和 JTable。

> ID：10708118
> 
> 赞同：0
> 
> 时间：2012-05-22T18:45:17.627
> 
> 标签：java, swing, printing, jtable, jtextarea

我正在尝试在同一页面上打印 jtable 和 jtextarea。到目前为止我已经尝试过了

```
private void printButtonActionPerformed(java.awt.event.ActionEvent evt) {                                            
// TODO add your handling code here:

JTextArea detailArea = new JTextTable();        
JTable detailTable = new JTable();

    int page = 1;
    MessageFormat mf = new MessageFormat(detailArea.getText()));
    MessageFormat mf2 = new MessageFormat(Integer.toString(page));
page++;

try

    {
        detailTable.print(JTable.PrintMode.FIT_WIDTH,mf,mf2);
    }

    catch(PrinterException p)

    {
        JOptionPane.showMessageDialog(null,"Printer Exception");
    }    

} 
```

这是一个糟糕的解决方案，因为它将 textarea 的文本打印为粗体标题。我需要一种方法来在同一页面上打印带有文本的 Jtable。

有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:49:33.230

[*How to Print Tables*](http://docs.oracle.com/javase/tutorial/uiswing/misc/printtable.html)文章可能会为您提供一些关于如何构建[sscce](http://sscce.org/)的想法。

*   用于从and`getPrintable()`中获取a 在您自己的.`Printable``JTextArea``JTable``Printable`

*   覆盖`getPrintable()`以使用内容来装饰您的表格`JTextArea`，如 中所示`TablePrintDemo3`。

[此处](https://stackoverflow.com/a/10251531/230513)`java.awt.print.Book`概述的 A可能是组织文档的有用方式。

# c - 如何将用户空间进程切换回根网络命名空间？

> ID：10708120
> 
> 赞同：0
> 
> 时间：2012-05-22T18:45:22.463
> 
> 标签：c, networking, linux-kernel, lxc

问题是该*`/var/run/netns/`*目录包含所有网络名称空间，除了 **根**名称空间。所以我不确定如何获取*`fd`*应该传递给以下内核调用的 , ：

```
syscall(__NR_setns, fd, CLONE_NEWNET) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:21:19.097

AFAIU，您可以使用`/proc/<pid>/ns/net`.

# javascript - 通过 Twitter Bootstrap 模式登录表单

> ID：10708121
> 
> 赞同：1
> 
> 时间：2012-05-22T18:45:23.667
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap, modal-dialog, ruby-on-rails-3.2

我目前安装了 Devise gem，并正在使用它为我的 web 应用程序进行身份验证。

因此，我的首页上有登录/注销链接..

```
<ul class="user_nav">
                <% if user_signed_in? %>
                <li>Signed in as <%= current_user.email %> | <%= link_to('Logout', destroy_user_session_path, :method => :delete ) %></li>
                <% else %>
                <li> <%= link_to('Login', new_user_session_path, :id => 'login') %>  | <%= link_to('Create an account', new_user_registration_path, :id => "create") %></li>
                <% end %>
            </ul> 
```

我正在尝试利用 Twitter-Bootstrap Modal 功能，因此将我的登录表单放在一个单独的框中，当用户单击它时会显示该框。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:55:09.047

此示例使用 Simpleform

```
 #Modal
    <div class="modal" id="loginModal">
      <div class="modal-header">
        <button class="close" data-dismiss="modal">×</button>
        <h3>Sign in</h3>
      </div>
      <div class="modal-body">
        <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name),:html => { :class => 'form-horizontal' }) do |f| %>
                <%= f.input :email, :required => false, :autofocus => true %>
                <%= f.input :password, :required => false %>
                <%= f.input :remember_me, :as => :boolean if devise_mapping.rememberable? %>
                <%= f.button :submit, "Sign in", :class => 'btn' %>
            <% end %>
      </div>
    </div>

    #link
    <%= link_to('Login', "#loginModal", :id => 'login', "data-toggle" => "modal") %> 

    #javascript
    $('#loginModal').modal(options) 
```

# php - Cookiee set in PHP; but not being found?

> ID：10708122
> 
> 赞同：0
> 
> 时间：2012-05-22T18:45:23.700
> 
> 标签：php, session, cookies, isset

When a user logs in, here is my user function:

```
public function login($user) {
    global $database;
    if ($user) {

        $_SESSION['user_id'] = $user->id;
        $this->user_id = $_SESSION['user_id'];

        $_SESSION['username'] = $user->username;
        $this->username = $_SESSION['username'];

        setcookie('user_id', $this->user_id, time() + (60 * 60 * 24 * 14));
        setcookie('username', $this->username, time() + (60 * 60 * 24 * 14));

        $this->logged_in = true;

    }
} 
```

When I look at the Cookiees in Chrome, I find two cookies relating to this:
1 for user_id, 1 for username.

But when the browser is closed and I try to come back, it will not detect the cookiee: Here is the process:

```
class Session {

     // Most of the class has been edited out; the code above is also a method in this clas. Removed so it's not duplicated.

     private $logged_in = false;
     public $user_id; // yes I realize this is insecure
     public $username; // yes I realize this is insecure

     function __construct() {
          session_start();
           $this->check_login();
     }

    public function is_logged_in() {
        return $this->logged_in;
    }

   private function check_login() {

    if (isset($_COOKIE['user_id']) && (isset($_COOKIE['username']))) {
        $_SESSION['user_id']= $_COOKIE['user_id'];
        $_SESSION['username'] = $_COOKIE['username'];

    } else { // When I test, below shows up showing it doesn't think Cookie is set.
        echo "Cookie not set in check_login().<br />";
    }

    if (isset($_SESSION['user_id'])) {
        $this->user_id = $_SESSION['user_id'];
        $this->username = $_SESSION['username'];
        $this->logged_in = true;
    } else {
        unset($this->user_id);
        $this->logged_in = false;

    }
  }

 $session = new Session();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:52:13.527

Try to set the path and domain.

```
setcookie('user_id', $this->user_id, time() + 3600, '/', '.yourdomain.com'); 
```

If you leave the path to empty, the cookie will only "active" within the current directory. For example, if your login script is `http://example.com/user/login.php`, then when you open `http://example.com`, the browser won't set the cookies.

# templates - 从现有的 JS 节点上下文中编译 Jade

> ID：10708123
> 
> 赞同：4
> 
> 时间：2012-05-22T18:45:36.673
> 
> 标签：templates, node.js, pug

我有兴趣使用 Jade 创建动态生成数据的静态 HTML 文件。我已经有一组 JS 脚本在 Node.js 中运行时创建我的数据。我想做的是计算我的数据，然后使用我创建的那些 JS 对象编译我的 HTML 页面。

例如

```
var myArry = MyLib.calculateSomeArray();
var myObj = MyLib.createSomeObj();
jade.compile(myTemplate); 
```

翡翠模板：

```
each item in myArry
  li= item
each val, key in myObj
  li #{key}: #{val} 
```

我假设这是其中一种情况，很明显我在文档中遗漏了它，但我没有看到它，而且我看到的最接近的答案似乎涉及 Express，这似乎应该是不必要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T18:53:20.120

我会说，鉴于[文档](https://github.com/visionmedia/jade#public-api)：

```
var jade = require('jade');

// Create the function
var fn = jade.compile(myTemplate);
var html = fn({ myArry: myArry, myObj: myObj }); 
```

刚刚测试过，这工作得很好：

```
> var jade = require('jade');
undefined
> var myTemplate = "each item in myArry\n\tli= item\neach val, key in myObj\n\tli #{key}: #{val}"
undefined
> var myObj = { foo: 'bar', woo:'loo' };
undefined
> var myArry = ['moo', 'boo', 'roo'];
undefined
> var fn = jade.compile(tpl);
undefined
> fn({ myArry: myArry, myObj: myObj });
'<li>moo</li><li>boo</li><li>roo</li><li>foo: bar</li><li>woo: loo</li>' 
```

那是你要的吗？

# c# - 动态工具提示取决于鼠标悬停在数据网格中的一行（不是数据网格视图）

> ID：10708132
> 
> 赞同：6
> 
> 时间：2012-05-22T18:46:01.920
> 
> 标签：c#, winforms, datagrid, tooltip, dataview

我试图做到这一点，以便当用户将鼠标悬停在我的 DataGrid / dataview 中的一行上时，每一行都会显示不同的工具提示结果。

我无法真正弄清楚这一点。使用 DataGrid 我如何在每一行上说 mouseOver 并给出行特定的数据？似乎我所有常用的在线资源都没有出现！

不是如果有办法使用datagridview进行这项工作，我不知道如何填充它（datagridview），因为每次程序运行时我的表的长度都会变化。（程序会跟踪信号，所以如果收到更多信号，那么表格就会有更多行......）

***注意：这是 Visual Studios 2005 环境中的 Visual C# 2.0。

***最终得到以下结果：

```
private void datagridSignal_MouseMove(object sender, MouseEventArgs e)
{
        this.toolTip.Hide(datagridSignal);
        this.toolTip.RemoveAll();
        DataTable dt = GetSignalTable();
        DataView dv = new DataView(dt);
        Point prop = new Point(e.X, e.Y);
        System.Windows.Forms.DataGrid.HitTestInfo myHitTest;
        prop = datagridSignal.PointToClient(prop);
        myHitTest = datagridSignal.HitTest(prop.X, prop.Y);
        this.toolTip.SetToolTip(datagridSignal, " ID = '" + (int)dv[myHitTest.Row][0] + "' ");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:56:48.947

为什么不在网格上处理 MouseMove 事件？然后，您可以将鼠标的坐标转换为行句柄并相应地更改网格的工具提示。

就像是：

```
private void dataGrid_MouseMove(object sender, MouseEventArgs e) {
 var point = dataGrid.PointToClient(e.X, e.Y);
 var hittest = dataGrid.HitTest(point.X, point.Y);
 toolTip1.SetToolTip(dataGrid, hittest.Row); // add Tooltip conotrol to the form!!!
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:24:45.097

您可以在 XAML 中执行此操作：

```
<extToolkit:DataGrid Name="dgData" AutoGenerateColumns="False">
            <extToolkit:DataGrid.RowStyle>
                <Style TargetType="{x:Type extToolkit:DataGridRow}">
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Mode=Self}, Path=DataContext.ID}" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </extToolkit:DataGrid.RowStyle>
            <extToolkit:DataGrid.Columns>
                <extToolkit:DataGridTextColumn Header="ID" Binding="{Binding ID}" />
                <extToolkit:DataGridTextColumn Header="First Data" Binding="{Binding FirstData}" />
                <extToolkit:DataGridTextColumn Header="Second Data" Binding="{Binding SecondData}" />               
            </extToolkit:DataGrid.Columns>
        </extToolkit:DataGrid> 
```

# scala - 如何在 Scala 中为具有最少额外样板的命令行创建 DSL

> ID：10708136
> 
> 赞同：8
> 
> 时间：2012-05-22T18:46:25.847
> 
> 标签：scala, dsl

我需要为不熟悉 scala（既不是 Java）但熟悉 Shell 的用户开发一个 API。他们基本上会在 scala 类中编写 shell 脚本（我知道我可以只调用外部 shell 脚本，但是来吧！另外，稍后我们将有一些用于常见 shell 任务的函数）。

我希望完成类似的事情：

```
1 object MyCoolScript extends MyMagicTrait {
2   $ "mkdir /tmp/test"
3   $ "cd /tmp/test"
4   $ "wget some-url"   
5 } 
```

更直接地说，如何将第 2-4 行（或可能不太简洁的版本）转换为可以在 MyMagicTrait 中处理的 Seq[String]？

我知道*sys.process.stringToProcess*但如果我有：

```
object MyCoolScript extends MyMagicTrait {
  "mkdir /tmp/test" !!
  "cd /tmp/test" !!
  "wget some-url" !!  
} 
```

如何以简洁的方式获得每个命令的结果？另外，我希望有一个 $"xxx" 符号。

发布答案更新：

感谢@debilski、@tenshi 和@daniel-c-sobral，我能够提出非常接近所需的实现：[https ://gist.github.com/2777994](https://gist.github.com/2777994)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:32:37.040

```
class Shell {
  var elems = Vector[String]()
  def >(str: String) = elems :+= str

  def run() = elems.map( whatever )
}

val shell = new Shell

shell> "mkdir /tmp/test.dir"
shell> "cd /tmp/test.dir" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T20:50:31.370

似乎 Scala 2.10 附带的字符串插值可以在这里为您提供帮助。首先，您可以实现简单的`$`方法，即立即执行命令。为了做到这一点，您需要在以下位置添加此自定义方法`StringContext`：

```
object ShellSupport {
    implicit class ShellStrings(sc: StringContext) {
        def $(args: Any*) = 
            sc.s(args: _*) split "\n" map (_.trim) filterNot (_.isEmpty) foreach { cmd =>
                // your excution logic goes here
                println(s"Executing: $cmd")
            }

    }
} 
```

现在你可以像这样使用它：

```
import ShellSupport._

val testDir = "/tmp/test"

$"mkdir $testDir"
$"cd $testDir" 
$"""
    wget some-url
    wget another-url
 """ 
```

您可以利用它的语法（它唯一的缺点是不能在`$`and之间添加空格`"`）和命令中的字符串插值。

* * *

现在让我们尝试实现你的魔法特质。这通常是相同的想法，但我也使用`DelayedInit`它来正确定义命令，然后在类创建期间自动执行它们。

```
trait MyMagicTrait extends DelayedInit {
    private var cmds: List[String] = Nil

    def commands = cmds

    implicit class ShellStrings(sc: StringContext) {
        def $(args: Any*) = {
            val newCmds = sc.s(args: _*) split "\n" map (_.trim) filterNot (_.isEmpty)
            cmds = cmds ++ newCmds
        }
    }

    def delayedInit(x: => Unit) {
        // your excution logic goes here
        x
        cmds map ("Excutintg: " + _) foreach println
    }
} 
```

它的用法：

```
class MyCoolScript extends MyMagicTrait {
  val downloader = "wget"

  $"mkdir /tmp/test"
  $"cd /tmp/test" 
  $"""
    $downloader some-url
    $downloader another-url
   """ 
}

new MyCoolScript 
```

这两种解决方案都产生相同的输出：

```
Executing: mkdir /tmp/test
Executing: cd /tmp/test
Executing: wget some-url
Executing: wget another-url 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T20:02:40.007

这只是重复@Debilski 和@Tomasz 的想法，以表明您可以很好地结合它们：

```
trait Magic {
  object shell {
    var lines = IndexedSeq[String]()
    def >(xs: String) { lines ++= xs.split("\n").map(_.trim) }
  }
  def doSomethingWithCommands { shell.lines foreach println }
}

object MyCoolScript extends App with Magic {
  println("this is Scala")

  shell> """
    mkdir /tmp/test
    cd /tmp/test
  """

  doSomethingWithCommands

  shell> """
    wget some-url
  """
} 
```

如果您想将 shell 与 Scala 命令结合使用，我真的不明白如何获得更少的样板文件，因为您需要一些东西来显示 shell 的开始和结束位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T19:05:51.803

# 虚拟方法

```
class Shell(commands: String) {
    commands.lines foreach {
        command =>
            //run your command
    }
}

class MyCoolScript extends Shell("""

    mkdir /tmp/test
    cd /tmp/test
    wget some-url

""") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-22T22:46:42.250

这些结果到处都是。唉，我认为 sys.process 不足以满足您的需求。让我们首先写出该示例，使其符合您的要求：

```
val result = (
    "mkdir /tmp/test ###
    "cd /tmp/test" ###
    "wget someurl
).lines_! 
```

现在，为什么它不起作用：

首先，`cd`会抛出一个异常——没有`cd`可执行文件。这是一个内部 shell 命令，所以只有 shell 可以执行它。

接下来，假设`cd`会起作用，则`wget`不会*发生*在`/tmp/test`. 上面的每个命令都在 Java 的当前工作目录中重新执行。您可以指定要执行每个命令的目录，但不能有 CWD（它不是“可变的”）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-22T19:09:19.133

**编辑：**

我会这样做：

```
res = List("mkdir /tmp/test", "cd /tmp/test", "wget some-url").map(_!!)
// res is a List[String] of the output of your commands 
```

您可以像这样执行系统命令：

```
scala> import scala.sys.process._
import scala.sys.process._

scala> "pwd"!
/Users/kgann
res0: Int = 0 
```

您应该能够将其包装到 DSL 中，但它已经非常简洁了。

# python - 为什么 Django 不能加载 Auth 模块？

> ID：10708145
> 
> 赞同：1
> 
> 时间：2012-05-22T18:46:54.787
> 
> 标签：python, django, django-authentication

我目前正在尝试使用 apache + mod_wsgi 为应用程序设置 Django 应用程序，并为静态文件使用 nginx。我让应用程序正常工作，现在想添加身份验证，以便控制提供静态文件。

我仍然可以加载我的`index.html`，但是当我尝试登录或管理时，我得到一个 ImportError“没有名为 auth 的模块”。

我已经检查过了，它在设置和模板登录中。我不知道问题是什么，也许有人知道可能出了什么问题。

错误页面

```
ImportError at /admin/
No module named auth
Request Method: GET
Request URL:    http://127.0.1.1:8080/admin/
Django Version: 1.5
Exception Type: ImportError
Exception Value:    
No module named auth
Exception Location: /usr/local/lib/python2.7/dist-packages/django/utils/importlib.py in import_module, line 35
Python Executable:  /usr/bin/python
Python Version: 2.7.3
Python Path:    
['/usr/local/lib/python2.7/dist-packages/flup-1.0.3.dev_20110405-py2.7.egg',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gst-0.10',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
 '/usr/lib/python2.7/dist-packages/ubuntuone-couch',
 '/usr/lib/python2.7/dist-packages/ubuntuone-installer',
 '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol',
 '/home/christian/public_html/django_nginx_test/private/test_project',
 '/home/christian/public_html/django_nginx_test/private'] 
```

设置.py

```
# Django settings for test_project project.

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'django_nginx_test',                      # Or path to database file if using sqlite3.
        'USER': '###',                      # Not used with sqlite3.
        'PASSWORD': '###',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'Europe/Berlin'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = 'http://127.0.1.1:8081/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = '___'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'test_project.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'test_project.wsgi.application'

TEMPLATE_DIRS = (
    '/home/christian/public_html/django_nginx_test/private/test_project/templates/test_app'
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'test_app',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

项目的 URLS.PY

```
from django.conf.urls import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^$', include('test_app.urls')),
    # Examples:
    # url(r'^$', 'test_project.views.home', name='home'),
    # url(r'^test_project/', include('test_project.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
    url(r'^login/$', 'auth.views.login_user'),
) 
```

来自 APP 的 URLS.PY

```
from django.conf.urls.defaults import *

urlpatterns = patterns('test_app.views',

    url(r'^$', 'index'),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:39:06.887

您需要包含视图的完整路径，假设这意味着`django.contrib.auth`.

```
urlpatterns = patterns('',
    # Other urls are here
    url(r'^login/$', 'django.contrib.auth.views.login'),
) 
```

如果您包含来自同一模块的多个视图，那么您可以在模式的第一部分包含一个公共视图。

```
urlpatterns = patterns('django.contrib',
    # Other urls are here
    url(r'^login/$', 'auth.views.login'),
    url(r'^logout/$', 'auth.views.logout'),
) 
```

# javascript - 如何在 Ruby on Rails 中缓存/加速下拉框数据

> ID：10708146
> 
> 赞同：3
> 
> 时间：2012-05-22T18:46:55.223
> 
> 标签：javascript, ruby-on-rails, ruby, caching

我有一个页面需要很长时间才能刷新下拉列表。基本上在更改表单中的一个下拉值时，第二个下拉列表的潜在选项会更改为不同的列表。

我怎样才能加快速度？如果有帮助的话，我已经出于其他原因使用 REDIS。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:27:44.500

Andrew Kuklewicz 给出了很好的回答。添加到它...

使用 Rails 的“[片段缓存](http://guides.rubyonrails.org/caching_with_rails.html#fragment-caching)”。

如果您在页面加载时将其发送到客户端，example.html.erb：

```
<% cache do %>
  <script>
    var javascript_hash = {name: '<%=@ruby_val%>'};
  </script>
<% end %> 
```

如果您需要缓存 ajax 操作的输出，example.js.erb：

```
<% cache do %>
  alert('hello from javascript');
<% end %> 
```

此外，在您的操作本身中，请确保您仅实例化 ActiveRecord::Relation，而不是实际执行查询：

```
Company.where({name: 'foo'}) # this
Company.where({name: 'foo'}).all # not this 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:19:27.733

如果您的主要选择中的选项很少，那么您可以在第一次呈现页面时在数组的 js 哈希中设置所有可能的次要选项，然后在更改主要选项时，从此客户端 js 数组中查找 - 这是显然很快，但如果选项太多，可能会减慢初始页面加载或使页面大小膨胀。

另一种方法是在主选择更改时仍然进行 ajax 调用，但缓存返回辅助选项的操作。这将允许它基于请求的参数进行缓存，并在可能的情况下使用 rails 缓存中的渲染结果（而不是总是点击 redis 或 db）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T21:04:02.937

一种技术含量较低的方法可能是呈现静态 JSON 或 JavaScript 文件，这些文件可由客户端缓存，其中包含辅助下拉列表的内容。

最简单的版本只是简单地写入某个路径，例如`/cache/drop_down.state1.js`等等，客户端根据需要检索这些路径。您可以使用 Rails 页面缓存系统`/public`自动为您保存这些结果，以便后续请求转到相同的先前创建的 JavaScript，从而无需往返数据库。它们也可以根据需要过期。

您可以为每个下拉菜单单独执行此操作，或者如果可行，一次为所有下拉菜单执行此操作，然后将其包括在内并从列表中选择适当的键。

这需要构建客户端脚本以动态创建和填充辅助下拉字段，包括选择适当的条目（如果应该预先选择一个条目）。不过，像 jQuery 这样的辅助库并不难。

# python - 扭曲的简单 HTTP 代理（续）

> ID：10708148
> 
> 赞同：1
> 
> 时间：2012-05-22T18:47:16.460
> 
> 标签：python, twisted, twisted.web

我在这个网站上找到了这个脚本：

```
from twisted.web import proxy, http
from twisted.internet import reactor
import sys

class MyProxy(proxy.Proxy):

    def dataReceived(self, data):
      print data 
      return proxy.Proxy.dataReceived(self, data)

class ProxyFactory(http.HTTPFactory):
  protocol=MyProxy

factory = ProxyFactory()
reactor.listenTCP(8080, factory)
reactor.run() 
```

如您所见，我覆盖 dataReceived 方法来打印数据。这在运行时将每个请求的标头打印到标准输出：

```
GET http://careers.stackoverflow.com/ad/i/nNxudq0-kvjnJ84-n6osrC0-12-vYY HTTP/1.1
Host: careers.stackoverflow.com
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: image/png,image/*;q=0.8,*/*;q=0.5
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Proxy-Connection: keep-alive
Referer: http://stackoverflow.com/questions/7052849/simple-http-proxy
Cookie: __utma=140029553.285085787.1331510700.1337692646.1337711538.33; __utmz=140029553.1337711538.33.19.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); __qca=P0-608923218-1331510699748; usr=t=5TLQ0kWmkGJo&s=RgkodeSUGq8k; __utmc=140029553; __utmb=140029553.3.10.1337711538 
```

1.  是否可以以这种方式（或任何其他实现）覆盖它，我可以将接收到的数据（标题）作为字典访问，（例如：data['Host'] = 'xxxx' ...）
2.  而且我想从此页面获取所有网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:10:57.697

由于您正在获取原始数据，因此请测试每一行是否是标题（/^[-a-zA-Z]+: / 听起来像是一个好的开始；还要注意表示标题结束的双 crlf） ，然后自己将其存储到字典中。

# php - 使用 Zend 的 move_uploaded_file() 不起作用

> ID：10708149
> 
> 赞同：1
> 
> 时间：2012-05-22T18:47:18.483
> 
> 标签：php, zend-framework

我们正在 Zend 框架中构建一个应用程序，并且在移动上传的文件时遇到了问题。我们通过 $filePath = $form->image->getFileName(); 获取文件 但是当我们尝试对其运行 move_uploaded_file 时，它​​只会返回 false。

图像已成功上传到临时目录，但我们无法将其移动到文件夹中。

```
 $formData = $request->getPost();
        if ($form->isValid($formData)) 
        {
              $form->image->receive();
              $filePath = $form->image->getFileName();
               move_uploaded_file($filePath,APPLICATION_PATH . '\images\new');
         } 
```

提前致谢

编辑：

当我尝试这个时，我得到 500 - internal server error：

```
 $upload = new Zend_File_Transfer_Adapter_Http();

            $upload->setDestination("C:\xx\xx\public\banners");

            if (!$upload->isValid()) 
             {
                 throw new Exception('Bad image data: '.implode(',', $upload->getMessages()));
              }

      try {
        $upload->receive();
       } 
       catch (Zend_File_Transfer_Exception $e) 
       {
           throw new Exception('Bad image data: '.$e->getMessage());
       } 
```

似乎是“ $upload->setDestination("C:\xx\xx\public\banners"); ”导致崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:54:32.987

这个关于 stackoverflow 的等效问题和答案应该可以帮助您：[File Upload using zend framework 1.7.4](https://stackoverflow.com/questions/665334/file-upload-using-zend-framework-1-7-4)

```
//validate file
//for example, this checks there is exactly 1 file, it is a jpeg and is less than 512KB
$upload = new Zend_File_Transfer_Adapter_Http();
$upload->addValidator('Count', false, array('min' =>1, 'max' => 1))
       ->addValidator('IsImage', false, 'jpeg')
       ->addValidator('Size', false, array('max' => '512kB'))
       ->setDestination('/tmp');

if (!$upload->isValid()) 
{
    throw new Exception('Bad image data: '.implode(',', $upload->getMessages()));
}

try {
        $upload->receive();
} 
catch (Zend_File_Transfer_Exception $e) 
{
        throw new Exception('Bad image data: '.$e->getMessage());
}

//then process your file, it's path is found by calling $upload->getFilename() 
```

使用后`->receive()`您已经移动了上传的文件，因此调用另一个文件`move_uploaded_file()`毫无意义。

# vb.net - 如何在 VB.net 中编写这个 lambda 选择方法？

> ID：10708158
> 
> 赞同：27
> 
> 时间：2012-05-22T18:48:13.670
> 
> 标签：vb.net, linq, .net-3.5, lambda

因为我试过这个：

```
Dim exampleItems As Dictionary(Of String, String) = New Dictionary(Of String, String)
Dim blah = exampleItems.Select (Function(x) New (x.Key, x.Value)).ToList 'error here 
```

但是我遇到了一个语法错误，而且我看到的所有示例都在 C# 中。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-22T18:49:51.243

这将是：

```
Dim blah = exampleItems.Select (Function(x) New With { .Key = x.Key, .Value = x.Value }).ToList 
```

有关详细信息，请参阅[匿名类型](http://msdn.microsoft.com/en-us/library/bb384767.aspx)。（根据使用情况，您可能还希望使用[Key 关键字](http://msdn.microsoft.com/en-us/library/bb531349.aspx)标记 Key 或 Value 。）

话虽这么说，`Dictionary(Of TKey, Of TValue)`已经是一个`IEnumerable(Of KeyValuePair(Of TKey, Of TValue)`，所以你也可以这样做：

```
Dim blah = exampleItems.ToList 
```

你会得到一个 KeyValuePair 列表，它已经有一个`Key`and`Value`属性。这实际上意味着不需要创建匿名类型。

# centos - 在 CentOS 上为 apache 设置 ulimit

> ID：10708162
> 
> 赞同：3
> 
> 时间：2012-05-22T18:48:26.007
> 
> 标签：centos, ulimit

我一直尝试更改在 CentOS 上运行的 apache 的 ulimit 参数设置。这是我的 /etc/security/limits.conf 的设置

```
apache hard fszie 1024
apache soft fszie 1024
apache hard nproc 512
apache soft nproc 512
apache hard cpu 14
apache soft cpu 14
apache hard nofile 1024
apache soft nofile 1024 
```

我也重新启动了系统，但是当我尝试使用 PHP 脚本检查 apache 的 ulimit 参数时，它们没有设置。有什么我遗漏的东西，我是否需要在某处创建其他条目或其他参数？请建议

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T08:07:12.907

最后我得到了答案，如果您为用户使用登录名但没有 apache 的登录名，上述设置将有所帮助，因此您必须将 ulimit -H -n filno 等命令放在 /etc/init.d/httpd 脚本中并重新启动服务器。希望这对其他人有帮助。

# javascript - 为什么我的 jquery val() 没有从我的选择框中选择实际选择的值？

> ID：10708172
> 
> 赞同：3
> 
> 时间：2012-05-22T18:49:06.807
> 
> 标签：javascript, jquery

当我输入`$('select[id*=lstAdvGradYear]')`chrome 给我

```
<select name="Views\ContentArea$ctl00$lstAdvGradYear" id="Views\ContentArea_ctl00_lstAdvGradYear" class="ddReplace" style="display: none; ">
    <option value="2016">2016</option>
    <option value="2015">2015</option>
    <option value="2014">2014</option>
    <option selected="selected" value="2013">2013</option>
    <option value="2012">2012</option>

</select> 
```

当我键入`$('select[id*=lstAdvGradYear]').val()`chrome 回复时`"2016"`。

当我输入`$('select[id*=lstAdvGradYear] option:selected ').val()`chrome 时也会回复`"2016"`

当我键入`$('select[id*=lstAdvGradYear] option:selected')`chrome 回复时`[<option value="2016">2016</option>]`

我究竟做错了什么？

我已验证没有其他名称相似的下拉菜单

* * *

**编辑：**要清楚，我的问题是`.val()`应该返回 2013 而不是 2016

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T18:52:42.277

这是因为在前两种情况下，您调用了 $.val() 函数，但在最后一种情况下，您没有。

$.val() 返回 HTML 元素的值。$() 返回一个代表一个或多个 html 元素的对象，您可以调用许多方法，包括 $.val()

**更新：**似乎根据文档（http://api.jquery.com/attribute-contains-selector/），右边的`id*=`值应该用引号引起来。这有什么区别吗？

# javascript - Javascript 使用 `apply()` 传递参数数组，但保留 `call()` 中的 `this` 引用

> ID：10708173
> 
> 赞同：8
> 
> 时间：2012-05-22T18:49:10.417
> 
> 标签：javascript, call, apply

我需要结合 JavaScript`call()`和`apply()`方法的强大功能。我遇到的问题是`call()`保留了对 的正确引用`this`，但是当我需要它作为函数参数发送时，将我拥有的参数数组作为数组发送。使用数组时，该`apply()`方法将参数发送给函数就好了，但我不知道如何向它发送对该方法似乎自然可以访问的正确`this`引用`call()`。

下面是我拥有的代码的简化版本，它可能看起来毫无用处，但它是一个很好的理解要点的方法：

```
// AN OBJECT THAT HOLDS SOME FUNCTIONS
var main = {};
main.the_number = 15;
main.some_function = function(arg1, arg2, arg3){
    // WOULD VERY MUCH LIKE THIS TO PRINT '15' TO THE SCREEN
    alert(this.the_number);
    // DO SOME STUFF WITH THE ARGUMENTS
    ... 
};
// THIS STORES FUNCTIONS FOR LATER.
//  'hub' has no direct knowledge of 'main'
var hub = {};
hub.methods = [];
hub.methods.push(main.some_function);
hub.do_methods = function(arguments_array){
    for(var i=0; i<this.methods.length; i++){
        // With this one, '15' is printed just fine, but an array holding 'i' is 
        //  just passed instead if 'i' itself
        this.methods[i].call(arguments_array);   
        // With this one, 'i' is passed as a function argument, but now the
        //  'this' reference to main is lost when calling the function 
        this.methods[i].apply(--need a reference to 'main' here--, arguments_array); 
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T18:52:06.437

什么？[Apply 也通过了范围](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)...

```
method.apply(this, [args]); 
```

**编辑：**

在您的代码中，您在包含范围内定义了主要对象，因此您可以简单地执行；

```
this.methods[i].call(main); 
```

或者

```
this.methods[i].apply(main, [args]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T18:54:12.267

使用时`apply`，`call`第一个参数是您要`this`设置的参数。

`call`接受参数列表：

```
.call(main, i, j) 
```

并`apply`接受一个数组或参数：

```
.apply(main, [i, j]) 
```

所以，在这一行：

```
this.methods[i].call([i]); 
```

`[i]`这作为`this`inside传递`this.methods[i]`。

你可能想做：

```
this.methods[i].call(main, i); 
```

这将调用`this.methods[i]`、设置`this`为`main`并传递`i`给它。

或者：

```
this.methods[i].call(main, arguments_array); 
```

这将调用`this.methods[i]`、设置`this`为`main`并将 的元素`arguments_array`作为参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:10:06.117

只需将对父对象的引用附加到函数对象：

```
main.some_function = function () {
    //...
}
main.some_function.parent = main;

// now some_function.parent holds a ref to main 
```

或者，如果您愿意，可以关闭救援：包括对`main`您定义时的引用`main.some_function`：

```
// self-execution function the returns a function with `that` (i.e., main) in scope
main.some_function = (function(that) {
    return function() {
        alert(that.the_number);
    }
})(main); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T19:16:32.233

当我阅读前面答案中的评论时，我认为您需要某种绑定。您可以使用 jQuery 或类似的库，也可以自己实现：

```
var bound_some_function = function(){
    return main.some_function.apply(main, arguments);
}
// ...
hub.methods.push(bound_some_function);
// ...
this.methods[i].apply(null /*whathever, has no effect*/, arguments_array); 
```

绑定函数的通用定义如下所示：

```
function bind(fun, scope){
    return function(){
        return fun.apply(scope, arguments);
    };
} 
```

有关绑定的进一步阅读，请谷歌“Javascript 函数绑定”。有很多关于它的文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-26T14:50:56.567

我之前有不正确的信息（在我删除的答案中），因为应用不会对绑定函数产生影响（如上面的答案）；

只需添加一个简单的代码即可证明：

```
/*Lets suppose we have a class "MessageReader" that has a method printMessage
 * that for some reason needs to receive the message to be printed from a function,
 * not directly a value.*/
function MessageReader() {
    this.value = "This is NOT a message and is not supposed to be readed!";
}
/*getMessage needs to return a string that will be printed!*/
MessageReader.prototype.printMessage = function(getMessage) {
    console.log(getMessage.apply(this, []));
}

function Message(value) {
    this.value = value;
}
Message.prototype.getMessage = function() {
    return this.value;
}

var myMessageReader = new MessageReader();
var myMessage1 = new Message("This is a simple message");
var myMessage2 = new Message("This is another simple message");

/*This will print the wrong message:*/
myMessageReader.printMessage(myMessage1.getMessage);

/*But this works!*/
myMessageReader.printMessage(myMessage2.getMessage.bind(myMessage2)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-20T16:22:18.570

`.call()`和方法在`.apply()`与 的处理方面没有区别`this`。来自 MDN 文档：

> 虽然此函数的语法与 apply() 的语法几乎相同，但根本区别在于 call() 接受参数列表，而 apply() 接受单个参数数组。

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call)

不幸的是，使用 call / bind / apply 调用函数并维护它的原始`this`引用是不可能的，但是，这看起来很丑陋，有一种解决方法可以通过

```
function applyOriginalThis(fn, parametersArray)
{
    var p = parametersArray;

    switch (p.length)
    {
        case 0: fn(); break;
        case 1: fn(p[0]); break;
        case 2: fn(p[0], p[1]); break;
        case 3: fn(p[0], p[1], p[2]); break;
        case 4: fn(p[0], p[1], p[2], p[3]); break;
        case 5: fn(p[0], p[1], p[2], p[3], p[4]); break;
        case 6: fn(p[0], p[1], p[2], p[3], p[4], p[5]); break;
        case 7: fn(p[0], p[1], p[2], p[3], p[4], p[5], p[6]); break;
        case 8: fn(p[0], p[1], p[2], p[3], p[4], p[5], p[6], p[7]); break;
        case 9: fn(p[0], p[1], p[2], p[3], p[4], p[5], p[6], p[7], p[8]); break;
        default: throw "Too many parameters.";
    }
} 
```

当然，这仅适用于您希望支持的参数数量。从好的方面来说，采用过多参数的函数是[代码异味](https://en.wikipedia.org/wiki/Code_smell)。另外，如果我没记错的话，AngularJS 1.x 中使用了这种类型的代码模式作为性能优化`.apply()`（现在找不到参考）。

# asp.net-mvc - 即使我在控制器中分配了值，值仍显示为 null

> ID：10708174
> 
> 赞同：0
> 
> 时间：2012-05-22T18:49:10.593
> 
> 标签：asp.net-mvc, model

我正在尝试做某种条件语句来计算一个值。为了模拟我的数据，我在我的控制器中（临时）分配值以查看我的 UI 是如何进行的。我可以在视图中的功能块中执行计算，但它很长并且不属于那里。所以，我现在正在尝试在模型（`Calculations.cs`）中进行计算。

计算代码的工作原理是传递一个值，除了我的条件失败并传递了默认值，`0`即它应该何时传递基于控制器中的模拟值的另一个值。

这里是`Calculations.cs`

```
public class Calculations
{
    PriceQuote price = new PriceQuote();
    StepFilingInformation filing = new StepFilingInformation();
    public decimal Chapter7Calculation
    {
        get
        {
            return
                price.priceChapter7
                +
                ((ReferenceEquals
                    (filing.PaymentPlanRadioButton,
                    Models.StepFilingInformation.PaymentPlan.Yes))
                ?
                price.pricePaymentPlanChapter7
                :
                0);
        }

    }
} 
```

我最初`(filing.PaymentPlanRadioButton == Models.StepFilingInformation.PaymentPlan.Yes)`检查单选按钮是否设置为“是”，但将其更改为`ReferenceEquals`. 这不影响结果。

我让我的控制器将值分配`PaymentPlanRadioButton`给“是”，因此`pricePaymentPlanChapter7`应该将值添加到`priceChapter7`，但事实并非如此。相反，添加“0”作为回退到条件。`PaymentPlanRadioButton`即使我在控制器中分配它也是 null 。

我无法弄清楚如何解决这个问题。如果我在模型中分配它并让它工作，这将无法解决问题，因为当我删除模拟控制器并期望用户选择一个单选按钮时，它仍然是`null`并且条件将失败。

这是“模拟”控制器：

```
public class QuoteMailerController : Controller
{
    public ActionResult EMailQuote()
    {
        Calculations calc = new Calculations();
        var total = calc.Chapter7Calculation;

        QuoteData quoteData = new QuoteData
        {
            StepFilingInformation = new Models.StepFilingInformation
            {
                //"No" is commented out, so "Yes" is assigned
                //PaymentPlanRadioButton = 
                    //Models.StepFilingInformation.PaymentPlan.No,
                PaymentPlanRadioButton = 
                    Models.StepFilingInformation.PaymentPlan.Yes,
            }
         };
    }
} 
```

这是我存储价格的地方（`PriceQuote.cs`）：

```
public class PriceQuote
{
    public decimal priceChapter7 { get { return 799; } }
    public decimal pricePaymentPlanChapter7 { get { return 100; } }
} 
```

这是我的视图模型：

```
public class QuoteData
{
    public PriceQuote priceQuote;
    public Calculations calculations;
    public StepFilingInformation stepFilingInformation { get; set; }
    public QuoteData()
    {
        PriceQuote = new PriceQuote();
        Calculations = new Calculations();
    }
} 
```

因此，这应该工作的方式是 799 + 100 = 899，因为`PaymentPlan.Yes`它被指定为控制器中单选按钮的值。但相反，我得到的只是 799 (799 + 0)，因为当我调试时`PaymentPlanRadioButton`出现空值。

有什么想法/指导吗？

以防万一，这是`PaymentPlanRadioButton`位于内部`StepFilingInformation.cs`（并且是我的模型之一）：

```
public enum PaymentPlan
{
    No,
    Yes
}
public class PaymentPlanSelectorAttribute : SelectorAttribute
{
    public override IEnumerable<SelectListItem> GetItems()
    {
        return Selector.GetItemsFromEnum<PaymentPlan>();
    }
}       
[PaymentPlanSelector(BulkSelectionThreshold = 3)]
public PaymentPlan? PaymentPlanRadioButton { get; set; } 
```

对不起，长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:00:30.687

您的 Calculations 类基于它包含的 StepFilingInformation 对象进行数学运算。但是，您永远不会将 Calculations 中的 StepFilingInformation 设置为新的空对象以外的任何内容。

您的构造函数可能需要 StepFilingInformation 类型的参数。

```
public class Calculations
{
    StepFilingInformation filing;
    public Calculations(StepFilingInformation filing)
    {
       this.filing = filing;
    } 
```

无论您如何向计算类传递对 StepFilingInformation 的引用，都必须在运行依赖于它的计算**之前设置此值。**

此外，如果 QuoteData 是您的 ViewModel，那么它不应包含对您的 Calculations 类的引用。它应该只包含在视图必须显示的计算类中创建的结果。

```
StepFilingInformation filing = new Models.StepFilingInformation
{
    PaymentPlanRadioButton = Models.StepFilingInformation.PaymentPlan.Yes,
};

Calculations calc = new Calculations(filing);
var total = calc.Chapter7Calculation;

QuoteData quoteData = new QuoteData //Only include Properties you're going to display in the view model
{
    Total = total
}; 
```

# jquery - jquery after/insertAfter - 无法插入新元素

> ID：10708178
> 
> 赞同：-1
> 
> 时间：2012-05-22T18:49:28.450
> 
> 标签：jquery, html, codeigniter

这是非常明显的事情，但是尽管查看了其他人在stackoverflow中遇到并得到解决的非常相似的问题，但我还是看不到它。我希望它会跳到你身上。请帮我弄清楚为什么我无法插入（或 insertAfter）现有元素。

我已经将我的 html 视图文件（我正在使用 codeigniter）包含在相关的 javascript 中。

一如既往，非常感谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Afterview</title>
    <script src="jquery-1.6.4.js" type="text/javascript" charset="utf-8"></script>  
    </head>
    <body>
        <div class="divm@n.com">
            <li>
                Click for more details.&nbsp;
                <a id="m@n.com" class="detailbtn" href="#detail-id">(Details)</a>
            </li>
       </div>
    </body>
</html>

<script type="text/javascript">
    var html_string;
    $('.detailbtn').each(function(i){
        $(this).click(function(){
            html_string='<li>hello</li>';
            $('.divm@n.com').insertAfter(html_string).show();
       });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:06:42.233

实际上，您需要 2 个转义变量，一个用于`@`，一个用于`.`.

据我了解，您似乎想`HTML`在单击链接后附加一些代码，如果是这样，我建议使用`append()`（如果需要，您也可以使用`after()`）

**HTML**

```
<div class="divm@n.com">
<li>
    Click for more details.&nbsp;
    <a id="m@n.com" class="detailbtn" href="#detail-id">(Details)</a>
</li> 
```

**JS**

```
$('.detailbtn').click(function(){
    var html_string='<li>hello</li>';
    $('.divm\\@n\\.com').after(html_string);
}); 
```

[这](http://jsfiddle.net/luissanchezm86/dTkPf/5/)是一个有效的解决方案......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T18:52:38.220

我认为您想更改代码以使用`.after()`和修复您的类名，如下所示：

```
$('.divmncom').after('<li>hello</li>').show(); 
```

将您的类名更改为`<div class="divmncom">`以摆脱解释与您想要的不同的特殊字符。

而且，当你清理东西时，你应该摆脱`html_string`全局变量，要么完全消除对它的需求，要么将其设为局部变量。

* * *

通过解释，您似乎不了解其`insertAfter()`工作原理。当你有：

```
$(x).insertAfter(y) 
```

它将每个与选择器匹配的元素插入到由 .`x`表示的目标之后`y`。在您的代码中：

```
 html_string='<li>hello</li>';
 $('.divm@n.com').insertAfter(html_string).show(); 
```

`html_string`确实匹配任何现有的 DOM 元素，因此它没有地方进行插入。

此外，CSS 选择器可能对字符`.divm@n.com'`有问题，并将in解释为第二个类的开始，这不是您想要的。可能有一些方法可以转义这些特殊字符并仍然使用它们，但是完全停止使用它们并使您的类名成为不需要特殊字符转义的简单类名会更安全。`@``.``.com`

您可能应该阅读两个相关 jQuery 方法的页面，[`.after()`](http://api.jquery.com/after/)并[`.insertAfter()`](http://api.jquery.com/insertAfter/)确保针对您的特定问题将正确的参数应用于正确的方法。在我看来，您想`.after()`改用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T18:53:14.220

我不理解代码，但您需要转义句点并`@`在选择器中

```
$('.divm\\@n\\.com') 
```

编辑

从它的外观你可以更换

```
$('.detailbtn').each(function(i){           
        $(this).click(function(){
            html_string='<li>hello</li>';
            $('.divm@n.com').insertAfter(html_string).show();
       });
    }); 
```

和

```
$(".detailbtn").click(function(e){
  e.preventDefault();
 $("<li>hello</li>").insertAfter(".divm\\@n\\.com");
}); 
```

[**演示**](http://jsfiddle.net/68TwD/)

PS 还可以查看@jfriend00 的回答了解如何`insertAfter`工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T18:56:11.020

The class-name "divm@n.com" is invalid, because it contains an '.', which means, that the element should have a class "divm@n" and a class "com". And to insert the value from html_string after this element, you have to use the .after() function or change your current .insertAfter() to this:

```
$(html_string).insertAfter('.divm@ncom').show(); 
```

This is, what i got:

```
var html_string;
$('.detailbtn').each(function(i){
    $(this).click(function(){
        html_string='<li>hello</li>';
        $('.divm@ncom').after(html_string).show();
   });
});​ 
```

# facebook - 我如何从 cookie 获取 Facebook seesion 密钥和 facebook 令牌访问

> ID：10708183
> 
> 赞同：0
> 
> 时间：2012-05-22T18:49:45.693
> 
> 标签：facebook, facebook-graph-api

我使用 facebook cookie fbs_FacebookApplicationKey 来获取 Facebook seesion 密钥和 facebook 令牌访问现在 facebook 名称已更改为 fbsr_FacebookApplicationKey 并且我看到它已加密我如何从 cookie facebook 或图形获取 Facebook seesion 密钥和 facebook 令牌访问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:06:19.460

我认为您不能这样做，请参阅：

[https://developers.facebook.com/docs/authentication/](https://developers.facebook.com/docs/authentication/)

# sql-server-2008 - 如何确保字符串列没有空格？

> ID：10708184
> 
> 赞同：5
> 
> 时间：2012-05-22T18:49:48.513
> 
> 标签：sql-server-2008, tsql, ssms

我目前有一个主键字段`nvarchar(50)`，如果我能让它不接受空格，我愿意更改类型。有没有办法做到这一点？

**应允许以下内容：**

```
------
AAAA
BBBB
CCCC 
```

**不应允许以下情况：**

```
------
AA AAA
BBBB B
C CCCC 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T18:51:33.797

您可以添加以下检查约束：

~~`CHECK LEN(col) = LEN(REPLACE(col, ' ', ''));`~~

...或者...

```
CHECK (col NOT LIKE '% %'); 
```

...或者...

```
CHECK (CHARINDEX(' ', col) = 0) 
```

例子：

```
USE tempdb;
GO

CREATE TABLE dbo.bar(foo NVARCHAR(50) PRIMARY KEY);

ALTER TABLE dbo.bar ADD CONSTRAINT chkNoSpaces
 CHECK (foo NOT LIKE '% %'); 
```

成功：

```
INSERT dbo.bar(foo) SELECT 'AAAA';
GO 
```

失败：

```
INSERT dbo.bar(foo) SELECT 'AA AA';
GO 
```

结果：

> 消息 547，级别 16，状态 0，第 1 行
> INSERT 语句与 CHECK 约束“chkNoSpaces”冲突。冲突发生在数据库“tempdb”、表“dbo.bar”、列“foo”中。
> 该语句已终止。

清理：

```
DROP TABLE dbo.bar; 
```

**编辑**

如果您出于某种原因需要通过 UI 执行此操作（我再次建议您使用可以使原子化、可重复、保存到文件、存储在源代码管理中等的脚本来执行此操作）：

1.  在对象资源管理器中，右键单击您的表并选择`Design`
2.  右键单击上方网格中的列，然后选择`Check Constraints...`
3.  点击`Add`
4.  `column_name NOT LIKE '% %'`在“表达式”框中输入（使用您的实际列名，而不是`column_name`）
5.  如果您认为您已经有违反约束的数据，请将“检查现有数据...”的选项更改为`No`（并立即修复该数据）
6.  点击`Close`
7.  单击工具栏上的“保存”图标

请注意，用户界面实际上改变了子句的结构，例如`(NOT col_name LIKE '% %')`

# delphi - 如何在 delphi firemonkey 应用程序中显示来自网络新闻提要的最新消息？

> ID：10708186
> 
> 赞同：1
> 
> 时间：2012-05-22T18:49:51.900
> 
> 标签：delphi, delphi-xe2, firemonkey

好吧，我有一个程序和一个网站，该网站必须与最新消息分开，只用 CSS3 等格式化.. 我不知道如何在我的 delphi 程序中显示最新消息，因为 TWebBrowser 不透明，不能渲染CSS3和HTML5，有别的办法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T19:27:09.140

在 RSS 提要中发布您的新闻。在您的程序中，使用 Indy 之类的内容获取该提要，使用 XML 解析器提取重要部分，然后按照您的需要呈现。您不需要为此嵌入 Web 浏览器。

您可以装配您的 Web 服务器以使用来自同一 RSS 提要的输入来生成新闻页面。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T18:56:18.013

Try [Delphi Chromium Embedded](http://code.google.com/p/delphichromiumembedded/). It has the same HTML5 and CSS features as Google Chrome, more or less. No adobe flash support out of box though. I have not used it with Firemonkey yet, but there is a demo of doing that [here](http://code.google.com/p/delphichromiumembedded/source/browse/trunk/demos/firemonkey/firemonkey.dproj?r=119).

# c++ - 控制和分析内存和时间消耗 C++ Windows 应用程序？

> ID：10708191
> 
> 赞同：0
> 
> 时间：2012-05-22T18:50:07.297
> 
> 标签：c++, windows, logging, profiling, runtime

有谁知道在 Windows 上测量（分析）C++ 应用程序的内存和处理时间的好方法？我不想做一个分级机，如果它们是正确的，那将检查我的解决方案。它需要告诉我我的源代码生成的输出是否等于特定问题的测试。如果程序超过指定的时间或内存限制，我将终止它，如果没有，我希望记录程序执行所用的时间和执行期间的内存使用情况？

是否有任何指南教程或代码可以指向我或与我分享以实现此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:57:50.583

如果您正在为您的 Windows C++ 应用程序寻找分析器，那么我建议您使用 Sleepy 或[Very Sleepy](http://www.codersnotes.com/sleepy)

# php - 通过 Ajax 更新“like this”链接的逻辑和方法

> ID：10708193
> 
> 赞同：0
> 
> 时间：2012-05-22T18:50:11.533
> 
> 标签：php, mysql, ajax

我回来查看我的问题，并被告知它已“被作者自愿删除”，但我没有删除它！所以我不知道那里发生了什么。所以现在我得再问一遍，希望这一次能留在这里！

我有一个显示许多图像的 PHP 脚本页面。我正在设置一种方法，登录用户可以单击图像下方的链接来“喜欢”该图像（使其成为“收藏”） - 如果它已经是收藏，则“不喜欢”它。用户当前的“相似状态”保存在 MySQL 数据库中（作为 1 或 0）。

我的 PHP 页面遍历图像记录（以及一些分页逻辑），轮询数据库并根据返回的“like state”在每个图像下输出不同的链接。为已经“喜欢”的图像绘制一种形式的链接，为未“喜欢”的图像绘制另一种形式（每个使用两个不同的 css 类中的一个以显示为视觉反馈的翻转类型图标）。

它看起来像这样：

```
<?php
$step = 0;
while($row = $statement3->fetch()) {
$step++;
$ThisPhotoID = $row['photoid'];

echo '<img src="images/'.$ThisPhotoID.'.jpg" alt="" />';

echo '<div class="info">';
$statement4 = $db->prepare("SELECT COUNT(*) FROM `likes` WHERE `username` = ? AND `photoid` = ?");
$statement4->execute(array($username, $ThisPhotoID));
    if (!$statement4->fetchColumn() > 0) {
    //Favourite doesn't exist for this user, so invite to "like"...
    echo '<a href="#" id="linkid'.$step.'" title="Click to like this photo" class="like">&nbsp;</a>';
    }
    else {
    //Favourite does exist for this user, so check if already "liked" or not...
    $LikeState = 1;
    $statement5 = $db->prepare("SELECT COUNT(*) FROM `likes` WHERE `username` = ? AND `photoid` = ? AND `likestate` = ?");
    $statement5->execute(array($username, $ThisPhotoID, $LikeState));
        if ($statement5->fetchColumn() > 0) {
        //Favourite exists and it is liked, so invite to "unlike"...
        echo '<a href="#" id="linkid'.$step.'" title="Click to UNLIKE this photo" class="unlike">&nbsp;</a>';
        }
        else {
        //Favourite exists but it is not "liked", so invite to "like"...
        echo '<a href="#" id="linkid'.$step.'" title="Click to like this photo" class="like">&nbsp;</a>';
        }
    }
echo '</div>';
}
?> 
```

这一切正常，并根据是否“喜欢”为每个图像绘制适当的链接。目前，链接引用只是散列，因为我想知道如何进行处理以更改“类似状态”。

我准备好了一个处理脚本，我可以用它的名字代替哈希，它可以在查询字符串中获取 $ThisPhotoID 变量，并更新数据库（切换“like state”），然后通过 a 返回到页面PHP 标头 - 可能是锚点。

该处理脚本看起来像这样：

```
<?php
include("login.php");
$username = $session->username;

include('db_connect.php');

//This would be used in the link's query string...
$PhotoID = $_GET['photoid'];

//Get existing "likestate"...
$askstatement = $db->prepare("SELECT `likestate` FROM `likes` WHERE `username` = ? AND `photoid` = ?");
$askstatement->execute(array($username, $PhotoID));
$CurrentLikeState = $askstatement->fetchColumn(0); // Will be 1 or 0.

//Make new likestate...
if ($CurrentLikeState == 1) {
$NewLikeState = 0;
}
else {
$NewLikeState = 1;
}

//Change the like state...
$update_statement = $db->prepare("UPDATE `likes` SET `likestate` = ? WHERE `username` = ? AND `photoid` = ?");
$update_statement->execute(array($NewLikeState, $username, $PhotoID));

header("Location:mypage.php");
?> 
```

但这并不理想，我想知道是否可以通过 Ajax 进行更新，而无需离开或刷新页面，也许使用 JQuery。据我所知，要做到这一点，我需要包括 JQuery，并且：

*   插入一个js函数
*   在每个链接中插入一个 js onclick 事件
*   在处理文件中构建新形式的链接，供 javacsript/ajax 用作替换链接

这是我需要帮助的 javascript/ajax 代码，但我对它可能如何工作感到有点困惑 - 如果要这样做的话，javascript/ajax 是否必须首先绘制我的链接更新数据库后更改它们？（如果 PHP 输出链接，它们不会像 PHP 输出一样保持不变吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:08:26.713

只是因为我真的不知道如何评论您的问题，所以我在本节中提供此评论。JQuery 有两个不同的函数可供您使用，它们是函数`$.post()`和`$.ajax()`- 函数。

您可以像这样对链接进行分类：

```
<a class="like_link" title="<?php echo $picture_id; ?>"> 
```

并且只需使用 jquery click 功能：

```
$('.like_link').click(function(){
     var id=$(this).attr("title");
     // Ajax-stuff
}); 
```

或以这种方式。我真的不打算将此作为答案，只是提供信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:10:30.200

我过去做过类似的事情，并将其修改为您的示例。

假设您的带有链接的 html 如下所示：

```
<div id="allmylinks">
    <a href="toggle.php?link=foo">First link</a>
    <a href="toggle.php?link=bar">Second link</a>
</div> 
```

```
$("div#allmylinks a").click(function(e){
    e.preventDefault();
    var link= $(this);
    $.get(
        $(this).attr('href'),
        function(data){
            console.log('Succesfull! '+data);
            link.attr('href',data);      // Set the new link
            $link.append(' was toggled');// Add some text
    });
    $(this).parents('div.entry-content').fadeOut('slow');
}); 
```

在 toggle.php 我有这个：

```
if(isset($_REQUEST['link']))
    $link = $_REQUEST['link'];
else
    $link = "error";

// Validate link and process it
...

// If it's ajax
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH']==='XMLHttpRequest')
{
    // The new link
    echo 'toggle.php?link=toggled-'.$link;
}
// Not an ajax-request, redirect to previous page
else 
{
    header('Location: index.php');
    die();
} 
```

# ruby - Ruby 中的“==”实现是否应该检查类型？

> ID：10708199
> 
> 赞同：5
> 
> 时间：2012-05-22T18:50:37.190
> 
> 标签：ruby, equality

我想`==`为一个 ruby​​ 类实现。我可以

```
def ==(o)
  o.respond_to?(:id) && self.id == o.id
end 
```

**或者**

```
def ==(o)
  o.is_a?(Foo) && self.id == o.id
end 
```

根据[这篇](http://www.wellho.net/mouth/985_Equality-in-Ruby-eql-and-equal-.html)文章，似乎前者更有意义。如果我正在实施`eql?`，那么我会做后者。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:56:38.827

这取决于您是与任意对象还是特定类型之一进行比较。第二种形式是具体的，第一种是通用的。

在您的情况下，您可能对特定表格没问题。仅当您要比较的对象可以转换或解释为可以匹配的对象时，通用比较才相关。使用`id`似乎太开放了。这意味着当 Foo 10 和 Bar 10 可能来自完全不同的来源时，它们是等价的。

# sql - SQL 将 INT 转换为日期时间

> ID：10708202
> 
> 赞同：7
> 
> 时间：2012-05-22T18:51:00.960
> 
> 标签：sql, datetime, int

我有 1323648000，它是 int(10)。我需要能够将其转换为某种日期格式。类似于 dd/hh/yy hh:mm:ss。我在这里尝试了一些例子，但我似乎无法让它发挥作用。我试图将它转换为 varchar(10) 并转换但没有。Excel 还输出########。那这个数字不正确吗？

```
SELECT
engine4_openid_statusstats.openidstat_id,
CONVERT(datetime,CAST(engine4_openid_statusstats.openidstat_time AS varchar(10),3),
engine4_openid_services.openidservice_id,
engine4_openid_services.openidservice_name
FROM
engine4_openid_statusstats ,
engine4_openid_services 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T18:56:42.783

这看起来像是 Unix 风格的基于纪元的时间戳，即自 1970 年以来的秒数。

转换是特定于 RDBMS 的。使用 SQLITE 你会做

```
select datetime( 1323648000, 'unixepoch' ); 
```

这会产生 2011-12-12 00:00:00 (GMT)。

检查您的 RDBMS 文档以了解日期时间转换函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:04:35.357

如果确实将其存储为纪元时间（看起来确实如此），那么这些是自 1970 年 1 月 1 日以来的秒数。您可以通过在该日期上添加秒数来将其转换为日期时间。

```
SELECT DATEADD(SS, 1323648000, '01/01/1970') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T18:55:10.950

```
TO_CHAR(column_name, 'DD/MM/YYYY hh:mm:ss') 
```

# git - SVN + 受限 GIT 仅在 svn repo 的一部分上

> ID：10708206
> 
> 赞同：1
> 
> 时间：2012-05-22T18:51:18.460
> 
> 标签：git, svn, restriction

我有一个大型 SVN 存储库
，我会将一个文件夹“主题”外包给无法访问完整 svn 存储库的外部团队。
我听说 'git svn' 会是一种方法，
但我对 git 还是很陌生，不知道如何继续。
如果有人有明确的用例，我将不胜感激
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:52:03.927

这完全取决于如何设置 Subversion 的安全性。您可以在[authz 数据库](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.pathbasedauthz.html)中指定每个特定用户的访问权限。您需要做的是限制这两个用户只能访问那个项目。

大多数公司不关心`authz`限制：如果您可以访问 Subversion 存储库，那么您就可以访问整个存储库。但是，如果您有外部组，则需要进行设置。

您想查看[Subversion 在线手册](http://svnbook.red-bean.com)的[第 6 章](http://svnbook.red-bean.com/en/1.7/svn.serverconfig.html)，了解如何设置数据库。这并不难。问题在于设置存在差异，这取决于您访问 Subversion 存储库的方式以及您使用的是 Apache还是作为通用服务器。你没有在你的帖子中提到这一点，所以我不能给你比仅仅说*第 6 章*更好的指导。`authz``httpd``svnserve`

 ** * *

### 什么是 Git？

Git 是另一个版本控制系统。Git 和 Subversion 的主要区别在于，在 Subversion 中，您只有一个中央存储库。如果要签出并进行更改，则必须从该存储库中进行。

另一方面，Git 允许任何人下载整个存储库并制作自己的本地副本。其他人可以使用该本地副本作为他们的存储库，或者克隆该存储库并拥有自己的存储库。然后，您可以在各个存储库之间传递*补丁以使它们保持同步。*

在 Git 中，您可以像在 Subversion 中一样使用*签*出和*提交*命令来签入和签出 Git 存储库，但是您还可以使用*拉取*和*推送*，这就像*签*出和*提交*到创建时使用的*主*存储库一样该存储库的本地副本。

### 什么是 Git-SVN？

GIt-SVN 允许使用 Git 的人将 Subversion 存储库视为 Git 主存储库。您使用 Git-SVN 将 Subversion 存储库下载到本地副本，然后使用 Git 的*checkout*和*commit*命令进行更改。例如，这两个用户可以使用 Git-SVN 创建一个他们可以共享的本地 Git 存储库。他们将签入并将他们的东西提交到该本地 Git 存储库。更改完成后，这些用户将使用 Git-SVN将更改*推*送回您的 Subversion 存储库。您可能只会看到他们从您的 Subversion 存储库中签出内容，然后重新签入。您不一定会看到他们的 Git 活动。

最后，他们是否使用 Git-SVN 并不重要。你唯一担心的是他们确保他们的东西能与其他人正在做的事情一起工作。*

# jquery - jquery 工具日期输入：addDay(amount)

> ID：10708210
> 
> 赞同：0
> 
> 时间：2012-05-22T18:51:53.707
> 
> 标签：jquery, date, jquery-tools

我正在使用[jquery 工具日期输入](http://jquerytools.org/documentation/dateinput/index.html)。在我的应用程序中，我有一个功能允许用户根据日期范围检查他的个人数据。

我有一个输入文本字段，它加载日期输入功能。当用户选择一个日期时，它会在文本字段中以**“dddd dd, mmmm yyyy”格式显示。**
我想要做的是添加 7 天（即一周）并在上限容器中显示新日期，以进一步解释它的外观：

从：2012 年 5 月 18 日星期五到：//这里是我想要的地方：2012 年 5 月 25 日星期五

我正在尝试使用内置的 api 函数：**addDay(amount)**但它似乎不起作用。我有以下代码：

```
var ret_date = $(this).data("dateinput").getValue('dddd dd, mmmm yyyy');
//I tried: $(this).data("dateinput").addDay(7).getValue('dddd dd, mmmm yyyy')
//but it kept the same currently selected date
$("#to_field").html(ret_date); 
```

我在网上搜索过，但找不到解决方案。我通常不是前端开发人员，所以我对 javascript/jquery 的了解并不先进。
任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:07:19.023

顺便说一句，这就是我最终做的事情并且它奏效了：

```
$("#DateField").change(function(event, date) {
        //I used format: yyyy-mm-dd
        var ret_date= $(this).data("dateinput").getValue('yyyy-mm-dd');   
        //Format the date using javascript
        //--> For that 2 javascript prototypes have been created(check at the end of the answer)          
        var myDate = new Date(ret_date);
        myDate.setDate(myDate.getDate()+7);
        $("#FinalDateField").html(myDate.dateFormat("Y-m-d"));
}); 
```

原型：

```
Date.prototype.dateFormat = function(format) {
  var result = "";
  for (var i = 0; i < format.length; ++i) {
    result += this.dateToString(format.charAt(i));
  }
  return result;
}

Date.prototype.dateToString = function(char) {
  switch (char) {
  case "Y":
    return this.getFullYear();
  case "m":
    return this.getMonth() + 1; //Since months are zero based, add 1
  case "d":
    return this.getDate();
  default:
    return char;
 }
} 
```

# javascript - 需要将值加在一起的 javascript（实时结果），而无需单击 = 按钮

> ID：10708211
> 
> 赞同：1
> 
> 时间：2012-05-22T18:51:55.413
> 
> 标签：javascript, html, live

我需要制作一种带有按钮的“计算器”，其值为 1 到 10。然后，例如，当我按下“1”时，结果框将显示“1”，然后当我按下“4”时，结果将自动打印“5”，而无需按“=”按钮。

我只需要它来将值相加，并具有重置功能。

Javascript对我来说很新。我还不太擅长写它，但我几乎什么都懂。

真的希望有人能帮助我！

这是我当前的代码：

```
 <html>
<head>
<style type="text/css">
table.calc {
     border: 2px solid #0034D1;
     background-color: #809FFF;
}
input.calc {
     width: 100%;
     margin: 5px;
}
</style>

<script>
function pushButton(buttonValue) {
     if (buttonValue == 'C') {
          document.getElementById('screen').value = '';
     }
     else {
          document.getElementById('screen').value += buttonValue;
     }
}
function calculate(equation) {
     var answer = eval(equation);
     document.getElementById('screen').value = answer;
}

</script>
</head>

<body>
<table class="calc" cellpadding=4>
<tr><td colspan=3><input class="calc" id="screen" type="text"></td></tr>
<tr>
<td><input class="calc" type="button" value=1 onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value=2 onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value=3 onclick="pushButton(this.value);"></td>
</tr>
<tr>
<td><input class="calc" type="button" value=4 onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value=5 onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value=6 onclick="pushButton(this.value);"></td>
</tr>
<tr>
<td><input class="calc" type="button" value=7 onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value=8 onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value=9 onclick="pushButton(this.value);"></td>
</tr>
<tr>
<td><input class="calc" type="button" value=0 onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value='.' onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value='C' onclick="pushButton(this.value);"></td>
<td><input class="calc" type="button" value='+' onclick="pushButton(this.value);"></td>
</tr>
<tr><td colspan=3><input class="calc" type="button" value='=' onclick="calculate(document.getElementById('screen').value);"></td></tr>
</table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:09:48.410

您正在使用将字符串连接在一起的 JavaScript“功能”（字符串 + 数字也等于字符串），因此您需要`parseInt`围绕每个数字。另外，由于我使用的是 parseInt，需要将屏幕值设置为 0（零）而不是 ''

```
<input class="calc" id="screen" value="0" type="text"> 
```

然后改变这个：

```
function pushButton(buttonValue) {
     if (buttonValue == 'C') {
          document.getElementById('screen').value = '0';
     }
     else {
          document.getElementById('screen').value = 
            parseInt(document.getElementById('screen').value) + 
            parseInt(buttonValue);
     }
} 
```

注意：按 。（点）或 +（加号）会导致错误。我认为你需要在按下时调用一个单独的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:12:19.320

```
 <html>
        <head>
        <style type="text/css">
        table.calc {
             border: 2px solid #0034D1;
             background-color: #809FFF;
        }
        input.calc {
             width: 100%;
             margin: 5px;
        }
        </style>

        <script>
        function pushButton(buttonValue) {
             if (buttonValue == 'C') {
                  document.getElementById('screen').value = '0';
             }
             else {//this is where most changes occured
                    var x= document.getElementById('screen').value 
                    x =parseInt(x)+ parseInt(buttonValue);
                    document.getElementById('screen').value=x;
             }
        }
        function calculate(equation) {
             var answer = eval(equation);
             document.getElementById('screen').value = answer;
        }

        </script>
        </head>

        <body>
        <table class="calc" cellpadding=4>
        <tr><td colspan=3><input class="calc" id="screen" value='0'type="text"></td></tr>
        <tr>
        <td><input class="calc" type="button" value=1 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=2 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=3 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value='/' onclick="pushButton(this.value);"></td>
        </tr>
        <tr>
        <td><input class="calc" type="button" value=4 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=5 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=6 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value='*' onclick="pushButton(this.value);"></td>
        </tr>
        <tr>
        <td><input class="calc" type="button" value=7 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=8 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value=9 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value='-' onclick="pushButton(this.value);"></td>
        </tr>
        <tr>
        <td><input class="calc" type="button" value=0 onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value='.' onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value='C' onclick="pushButton(this.value);"></td>
        <td><input class="calc" type="button" value='+' onclick="pushButton(this.value);"></td>
        </tr>
        <tr><td colspan=3><input class="calc" type="button" value='=' onclick="calculate(document.getElementById('screen').value);"></td></tr>
        </table>

        </body>
        </html 
```

当您 clr 页面时，这会执行您想要的操作，但会显示 0。在将它们加在一起之前，我确保将它们设为 int。

# c# - 从 QuickBooks 获取所有发票

> ID：10708214
> 
> 赞同：0
> 
> 时间：2012-05-22T18:51:58.090
> 
> 标签：c#, asp.net, api, quickbooks, quickbooks-online

我正在寻找一种简单的方法（网络服务、API 调用等）来简单地从 Quickbooks 在线版获取所有即将到来的发票。有什么简单的方法可以实现吗？我正在寻找一个相对高级的抽象。

注意：我愿意禁用身份验证以避免必须处理证书等。只是寻找一个简单的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T17:18:10.333

在此处向 Intuit 注册您的应用程序：[https ://appreg.intuit.com/](https://appreg.intuit.com/)

注册：

*   目标应用：QBOE
*   环境：生产
*   应用类型：桌面

在浏览器中转到此 URL（将您自己的应用程序 ID 替换为 URL）： [https ://login.quickbooks.com/j/qbn/sdkapp/confirm?appid=YOUR-APPLICATION-ID-HERE&serviceid=2004&appdata=1](https://login.quickbooks.com/j/qbn/sdkapp/confirm?appid=YOUR-APPLICATION-ID-HERE&serviceid=2004&appdata=1)

出现提示时，请确保通过选择“否。任何可以登录 [应用程序名称] 的人都可以使用连接”来关闭登录安全。选项。

在流程结束时，您将获得一张连接票。将其保存在安全的地方。

编写一个程序来发送这个 HTTP 正文：

```
<?xml version="1.0" ?>
<?qbxml version="6.0"?> 
<QBXML>
    <SignonMsgsRq>
        <SignonDesktopRq>
            <ClientDateTime>2009-10-09T07:10:10</ClientDateTime> 
            <ApplicationLogin>application login goes here</ApplicationLogin> 
            <ConnectionTicket>connection ticket goes here</ConnectionTicket> 
            <Language>English</Language> 
            <AppID>application id goes here</AppID> 
            <AppVer>1</AppVer> 
        </SignonDesktopRq> 
    </SignonMsgsRq> 
</QBXML> 
```

到 Intuit 的服务器： [https ://webapps.quickbooks.com/j/AppGateway](https://webapps.quickbooks.com/j/AppGateway)

您将取回一张会话票。

编写一个程序来发送这个 HTTP 请求：

```
<?xml version="1.0" ?> 
<?qbxml version="6.0"?> 
<QBXML> 
    <SignonMsgsRq>
        <SignonTicketRq> 
            <ClientDateTime>2006-09-20T15:49:26</ClientDateTime> 
            <SessionTicket>session ticket goes here</SessionTicket>
            <Language>English</Language> 
            <AppID>application id goes here</AppID>
            <AppVer>1</AppVer> 
        </SignonTicketRq> 
    </SignonMsgsRq> 
    <QBXMLMsgsRq onError="continueOnError"> 
        <InvoiceQueryRq requestID="2"> 
            <MaxReturned>10</MaxReturned>
        </InvoiceQueryRq>
    </QBXMLMsgsRq> 
</QBXML> 
```

到同一个 URL。

响应将是一组 XML 格式的发票数据。

当您需要有关 qbXML 请求语法的更多详细信息时，请参阅 OSR：http: [//developer.intuit.com/qbsdk-current/common/newosr/index.html](http://developer.intuit.com/qbsdk-current/common/newosr/index.html)

您可以在此处找到一些 C# 示例代码： [http ://wiki.consolibyte.com/wiki/doku.php/quickbooks_integration_csharp#c_net_sample_code_for_quickbooks_online_edition](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_integration_csharp#c_net_sample_code_for_quickbooks_online_edition)

其他阅读这篇文章的人的重要提示：这应该只用于一次性/自定义类型的应用程序。如果您正在构建一个软件即服务应用程序并试图让您的最终用户将他们自己的 QuickBooks 数据与您的应用程序同步，那么您应该查看 IPP/IDS 而不是上面的 qbXML 示例。[http://developer.intuit.com/](http://developer.intuit.com/)

# html - W3C 地理位置和 Safari

> ID：10708221
> 
> 赞同：1
> 
> 时间：2012-05-22T18:52:23.343
> 
> 标签：html, safari, geolocation, w3c-geolocation

任何人都知道为什么 Safari 5 有时会执行 W3C 地理定位，然后有时会停止运行？

示例 我在我的网站上设置了地理位置。今天它在 Safari 中运行良好，然后经过 3 次测试，现在它什么也没做。它提示许可，但不返回成功或失败。但在 FireFox 中它工作正常。

还有其他人遇到 Safari 5 在 W3C Geolocation 上停滞不前吗？就像我说的那样，这就像工作时的 50-50。

# java - 删除值后重置微调器

> ID：10708224
> 
> 赞同：1
> 
> 时间：2012-05-22T18:52:42.197
> 
> 标签：java, android, spinner, default, reset

我正在尝试重新填充`Spinner`删除值后的值。

目前，该应用程序设置了一个`Spinner`字符串值列表，然后随着应用程序的使用，其中一些值从`ArrayAdaptor`. 然后在某些时候`Spinner`需要使用默认值列表重置 's 列表。我当前的代码只是创建一个新的`ArrayAdaptor`并将其分配给`Spinner`使用`Spinner`最初设置的相同字符串数组资源：

```
Spinner mySpinner = (Spinner) findViewById(R.id.spinner);
ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1,
    Static.itemList);
arrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
mySpinner.setAdapter(arrayAdapter); 
```

`Static.itemlist`类型的数组在哪里`String[]`。

就目前而言，项目已从微调器中删除，但使用上面的代码不会将`Spinner`'s 的值重置为存储在`Static.itemList`. 在我看来，这应该可行，但显然缺少一些东西，因为它没有。

完整代码可以在[https://github.com/Uruwolf/VO-Miner/blob/master/src/com/uruwolf/vominer/VoMinerActivity.java](https://github.com/Uruwolf/VO-Miner/blob/master/src/com/uruwolf/vominer/VoMinerActivity.java)有问题的方法是从第 142 行到第 147 行（我知道缩进关闭了，在我的编辑器中看起来不错。我不确定为什么它在 github 上不正确）。

这是我在 StackOverflow 上的第一个问题，所以如果我做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:24:52.883

更改列表后，您可能需要在适配器上调用 notifyDataSetChanged()。

我认为更好的方法是避免重新创建新适配器并在将数据重新添加到主列表后调用 notifyDataSetChanged() 。您实际上不需要重新创建适配器，因为除了适配器*指向*的数据列表之外，适配器中没有任何变化。由于适配器只指向一个列表并且不使用/包含列表本身，因此如果您更改引用的列表，适配器应该能够获取更改（收到通知时）。

这样的事情可能会奏效

**定义变量**

```
Static.itemlist ... /*This list is static. Data never changes */
List<String> myListOfStrings;
ArrayAdapter<String> arrayAdapter; 
```

**初始化微调器和适配器**

```
Spinner mySpinner = (Spinner) findViewById(R.id.spinner); 

arrayAdapter = new ArrayAdapter<String>(this,     android.R.layout.simple_list_item_1,     myListOfStrings);

arrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

mySpinner.setAdapter(arrayAdapter); 
```

**刷新适配器**

```
myListOfStrings.clear();

myListOfStrings.addAll(Static.itemList); = /* Copy/Add the data from Static.itemList into myListOfStrings */

arrayAdapter.notifyDataSetChanged(); /* Inform the adapter  we've changed items, which should force a refresh */ 
```

# java - 在整个应用程序中收听电话状态？

> ID：10708227
> 
> 赞同：0
> 
> 时间：2012-05-22T18:53:01.180
> 
> 标签：java, android

我需要使用电话状态监听器来监听电话状态。我在一个项目中有很多活动。我应该注册每个活动的听众还是更好的方法。

ps：我对使用广播接收器不感兴趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:34:33.220

如果您的应用中有多个活动需要使用 PhoneStateListener 监控手机的状态，那么您可以查看是否可以将这些功能整合到一个单元中。例如，您可能希望使用片段来处理电话状态并将这个片段嵌入到多个活动中。

广播接收器也可能是一种选择，尽管您对它有兴趣。广播接收器是 Android 处理应用内/跨应用通知的方式。

答案实际上取决于您的应用程序的架构。

# php - Opencart - 将“添加到愿望清单”添加到类别页面

> ID：10708228
> 
> 赞同：0
> 
> 时间：2012-05-22T18:53:05.367
> 
> 标签：php, button, e-commerce, opencart

尝试将“添加到愿望清单”添加到编码中，以便它显示在类别页面上。因此，类别字段中显示的每个产品都会有自己单独的“添加到愿望清单”按钮。我也将把它复制到搜索方法中，因为我的很多类别实际上都是搜索。我正在开发的网站有很多类似的产品，而且主要是视觉效果，所以它真的会派上用场。

我为 ADD TO WISHLIST 准备的当前代码是（省略了 CSS - 无需让任何人感到厌烦！）：

```
<a class="wish_add" href="<?php echo $add_to_wishlist[$j]['add']; ?>" title="<?php echo $button_to_wishlist; ?>" rel="nofollow"><span><?php echo $button_to_wishlist; ?>+ Favorites</span></a> 
```

整个页面的代码是（CATEGORY.TPL）：

```
<div class="clear">&nbsp;</div><!--[if lt IE 7]><br /><![endif]-->
    <?php if (!$categories && !$products) { ?>
    <div class="content"><?php echo $text_error; ?></div>
    <?php } ?>
    <?php
  if($_SERVER['QUERY_STRING']!='_route_=ketubahs'){
  ?>
    <!--<?php /* if ($categories) { */ ?> -->
    <?php if ($categories && $heading_title!="Scroll Down to View All Our Ketubahs on One Page") { ?>
    <table class="listC" cellspacing="7">
      <?php for ($i = 0; $i < sizeof($categories); $i = $i + 4) {
       $numpages=sizeof($products);
      ?>
      <tr>
        <?php for ($j = $i; $j < ($i + 4); $j++) { ?>
        <td width="25%"><?php if (isset($categories[$j])) { ?>
          <a href="<?php echo $categories[$j]['href']; ?>"><img src="<?php echo $categories[$j]['thumb']; ?>" title="<?php echo $categories[$j]['name']; ?>" alt="<?php echo $categories[$j]['name']; ?>" style="margin-bottom: 3px;" /></a><br />
          <a href="<?php echo $categories[$j]['href']; ?>"><?php echo $categories[$j]['name']; ?></a>
          <?php } ?></td>
        <?php } ?>
      </tr>
      <?php } ?>
    </table>
    <?php } 
                                                   }
    ?>
    <?php if ($products) { ?>
 <!-- <div class="sort"> -->
      <div class="sort" <?php if ($heading_title=="Scroll Down to View All Our Ketubahs on One Page") { echo "style='margin-top:-40px;'"; } ?> >
      <div class="div1">
        <select name="sort" onchange="location = this.value">
          <?php foreach ($sorts as $sorts) { ?>
          <?php if (($sort . '-' . $order) == $sorts['value']) { ?>
          <option value="<?php echo $sorts['href']; ?>" selected="selected"><?php echo $sorts['text']; ?></option>
          <?php } else { ?>
          <option value="<?php echo $sorts['href']; ?>"><?php echo $sorts['text']; ?></option>
          <?php } ?>
          <?php } ?>
        </select>
      </div>
      <div class="div2"><?php echo $text_sort; ?></div>
    </div>
    <table class="listC" cellspacing="7">
      <?php for ($i = 0; $i < sizeof($products); $i = $i + 4) {
       $numpages=sizeof($products);
      ?>
      <tr>
        <?php for ($j = $i; $j < ($i + 4); $j++) { ?>
        <td width="25%">
<?php if (isset($products[$j])) { ?>
              <a href="<?php echo $products[$j]['href']; ?>"><img src="<?php echo $products[$j]['thumb']; ?>" title="<?php echo $products[$j]['name']; ?>" alt="<?php echo $products[$j]['name']; ?>" width="210px" height="210px" /></a><br /><Br />
          <div style="margin-top:-15px;"><a href="<?php echo $products[$j]['href']; ?>"><?php echo $products[$j]['name']; ?></a><br />
<?php       if($products[$j]['artist'] != 'Rosenthal, Gary' and $products[$j]['artist'] != 'Jessy Judaica' and !empty($products[$j]['artist'])){
            $artist_fname=substr($products[$j]['artist'],strpos($products[$j]['artist'],",")+1);
            $artist_lname=substr($products[$j]['artist'],0,strpos($products[$j]['artist'],","));
        $artist_fullname=trim($artist_fname)." ".trim($artist_lname);
        if (trim($products[$j]['artist'])=="Zeev") {
        $artist_fullname="Ze&#39;ev"; }
        if (trim($products[$j]['artist'])=="This is not a Ketubah") {
        $artist_fullname="This is not a Ketubah"; }
        $artistname=str_replace(' ','-',$artist_fullname);
        if (trim($artistname)=="Ze&#39;ev") {
        $artistname="Ze-ev"; }
        if (trim($artistname)=="This is not a Ketubah") {
        $artistname="This is not a Ketubah"; }
        $artist_path='meet-our-artists/'.strtolower($artistname);
 ?>
          <a href="<?php echo $artist_path; ?>"><span style="color:#FFF;font-weight:200;"><?php echo $artist_fullname; ?></span></a><br />
<?php } else { ?>
          <span style="color: #999; font-size: 11px;"><?php echo $products[$j]['model']; ?></span><br />
<?php } ?>
          <?php if ($display_price) { ?>
          <?php if (!$products[$j]['special']) { ?>
          <span style="color: #00d8ff; font-weight: bold;cursor:default;"><?php echo $products[$j]['price']; ?></span>
          <?php } else { ?>
          <span style="color: #00d8ff; font-weight: bold; text-decoration: line-through;"><?php echo $products[$j]['price']; ?></span> <span style="color: #FAA; font-weight: bold;"><?php echo $products[$j]['special']; ?></span>
          <?php } ?>
</div>
          <?php } ?>
          <br />
          <?php if ($products[$j]['rating']) { ?>
          <img src="catalog/view/theme/default/image/stars_<?php echo $products[$j]['rating'] . '.png'; ?>" alt="<?php echo $products[$j]['stars']; ?>" />
          <?php } ?>
          <?php } ?>

        <a class="wish_add" href="<?php echo $add_to_wishlist[$j]['add']; ?>" title="<?php echo $button_to_wishlist; ?>" rel="nofollow"><span><?php echo $button_to_wishlist; ?>+ Favorites</span></a>
          <a class="cart_add" href="<?php echo $products[$j]['add']; ?>" title="<?php echo $button_add_to_cart; ?>" ><span><?php echo $button_add_to_cart; ?></span></a>

          </td>
        <?php } ?>
      </tr>
      <?php } ?>

    </table>
    <div class="pagination" style="width:950px;text-align:right"><?php
    if (($numpages-$ii)>1) {
     echo "Displaying all ".($numpages-$ii)." items in this category.";
     } else {
     echo "Displaying 1 item in this category.";
     } ?></div>
         <?php } ?>

  </div>
  <div class="bottom">
    <div class="left"></div>
    <div class="right"></div>
    <div class="center"></div>
  </div>
</div>
<?php echo $footer; ?> 
```

任何帮助都会很棒！

干杯

股份公司

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:46:05.973

想通了。控制器中有一个禁用的功能阻止按钮投入生产：

位于 Controller/category/category.php

```
$this->data['add_to_wishlist'] = HTTPS_SERVER . 'index.php?route=product/wishlist&p=' . $result['product_id']; 
```

一旦启用，它就会为 Opencart 提供其余的愿望清单代码，允许我放置愿望清单并将其添加到类别页面中每个产品的购物车：

位于 view/category/category.php

```
<a href="<?php echo $add_to_wishlist; ?>" class="wish_add" rel="nofollow"><span><?php echo  $button_to_wishlist; ?>+ Favorites</span></a> 
```

# java - Java从字符串中删除除x之外的非数字字符

> ID：10708236
> 
> 赞同：7
> 
> 时间：2012-05-22T18:53:30.027
> 
> 标签：java, regex

我正在尝试从字符串中删除除 x 之外的所有非数字字符。我有点困惑。

我当前的代码

```
number.replaceAll("[^\\d\\x]", "") 
```

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-22T18:59:18.760

用这个：`[^x0-9]`

您可以在[http://gskinner.com/RegExr/上查看](http://gskinner.com/RegExr/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T19:59:08.747

你的正则表达式是

```
number.replaceAll("[^\\dxX]+", ""); 
```

无需转义字符类中的普通字符。一个改进也是`+`在字符类之后有量词，这样这些字符的序列会立即被替换，而不是每个字符都单独替换。

阅读有关*Xisb*的一些正则表达式基础知识：[每个程序员都应该了解的正则表达式](http://blog.xisb.de/?p=4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:01:02.767

我想通了，也许有更好的方法来做到这一点。

```
number.replaceAll("[^\\d+xX]", ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:07:19.463

你应该使用这个：

```
number.replaceAll("[\\D&&[^x]]", "") 
```

# c++ - 为什么 std::cin 字符串输入要求我输入每个空格

> ID：10708239
> 
> 赞同：0
> 
> 时间：2012-05-22T18:53:38.893
> 
> 标签：c++

本周我开始研究 C++ 中的文本文件，在我的练习中，我必须做一个程序，让用户在文件中输入行，但是......对于用户输入的每个空间，程序都会询问新用户。

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main(void){
    ofstream myfile;
    string answer;

    do{
        cout << "Insert a line in the file[END to finalize]: ";
        cin >> answer;
        myfile.open("example.txt");
        myfile << answer;
        myfile.close();
    }while(answer != "END");
} 
```

结果是：

> 在文件中插入一行[END to finalize]：**你好我的朋友**
> 
> 在文件中插入一行[END to finalize]：在文件中插入一行[END to finalize]：在文件中插入一行[END to finalize]：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T18:58:13.140

`operator>>(istream&, string&)`基本上抓住了下一个词。如果您想抢一整行，请尝试`std::getline(std::cin, answer);`.

`getline`不过，不会包括换行符。这意味着你必须做一些事情，比如`myfile << answer << '\n';`将它们输出为行。

顺便说一句，在大多数情况下，您希望在循环之外打开文件，或者打开它以附加类似`myfile.open("example.txt", ios::app);`. 每次像您一样在循环中打开文件，我很确定您将文件指针定位在文件的开头，因此您编写的每一行将至少覆盖前一行的第一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:03:54.830

`cin >> answer`将读取一个单词，以空格分隔。如果您想阅读整行，请使用`getline(cin, answer)`

# c# - XmlSerializer：如何反序列化不再存在的枚举值

> ID：10708240
> 
> 赞同：9
> 
> 时间：2012-05-22T18:53:42.363
> 
> 标签：c#, xml, serialization, versioning, deserialization

我正在使用 XMLSerializer 将此类保存到文件中。该类有一个字符串和一个枚举，如下所示：

```
public class IOPoint
{
     string Name {get; set;}
     TypeEnum {get; set;}
}

public enum TypeEnum
{
    Temperature,
    Pressure,
    Humidity,
} 
```

序列化时看起来像这样。

```
<IOPoint>
  <Name>Relative Humidity</Name>
  <TypeEnum>Humidity</TypeEnum>
</IOPoint> 
```

我一直在序列化和反序列化这个对象，几个版本都没有问题。我不再想支持 Humidity，所以我将它从枚举中删除。但是，当从 XML 反序列化时，这会导致异常，因为 TypeEnum 字段中的值 Humidity 不是 TypeEnum 的有效值。这是有道理的，但是如何处理呢？

我想做的就是忽略这个错误。并将值保留为空。我已经尝试实现 OnUnknownElement XmlDeserilizationEvent 类。不幸的是，这并没有捕捉到这个错误。

关于如何捕获和忽略此错误的任何想法（我可以在反序列化完成后进行清理）。

米奇

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T18:56:29.790

您可以将成员标记为已过时

```
public enum TypeEnum
{
    Temperature,
    Pressure,
    [Obsolete]
    Humidity
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T19:01:20.937

在您的库已经在使用之后删除枚举成员通常被认为是不好的做法。为什么不将成员留在原处，而是用`[Obsolete]`属性标记它以防止将来使用？如果访问标记的成员，将[`ObsoleteAttribute(string,bool)`](http://msdn.microsoft.com/en-us/library/961hff5d)构造函数的第二个参数指定为将导致编译时错误。`true`

```
public enum TypeEnum
{
    Temperature,
    Pressure,

    [Obsolete("It's always sunny in Philadelphia", true)]
    Humidity,
} 
```

为了在检查反序列化值时规避错误，您可以与基础值进行比较：`typeEnum == (TypeEnum)2`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T19:45:11.050

您可以使用属性来更改节点名称并从 xml 序列化中隐藏元素，手动解析一个元素：

```
public class IOPoint
{
 public string Name {get; set;}

 [XmlIgnore]
 public TypeEnum TypeEnum {get; set;}

 [XmlElement("TypeEnum")]
 public string LegacyTypeEnum 
 {
  get { return this.TypeEnum.ToString(); }
  set 
  { 
   try
   {
    this.TypeEnum = (TypeEnum)Enum.Parse(typeof(TypeEnum),value);
   }
   catch(ArgumentException)
   {
    // Handle "Humidity"
   }
   catch(OverflowException)
   {
   }
  }
 }
} 
```

根据评论，似乎有些混乱；这是一个作为 Visual Studio 2010 项目[的工作示例。](http://dl.dropbox.com/u/2717390/stackoverflow-10708240.zip)这种方法是手动仅解析对象的一个​​属性的简单方法（仍然利用 XmlSerializer 进行 XML 解析）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T19:04:00.383

您可以实现[IXmlSerializable](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)，您可以在其中对枚举使用 TryParse 之类的东西。

但我同意其他使用过时属性的海报。

# xslt - 如何在 XSL 中实现递归？

> ID：10708242
> 
> 赞同：0
> 
> 时间：2012-05-22T18:53:42.113
> 
> 标签：xslt

我有一个 XML 数据文档，其中包含名为“folio”的嵌套标签。这种嵌套标签的最大级别是 4。我需要递归处理每个作品集，直到达到没有嵌套作品集的级别并打印内容。

我不确定如何在 XSL 中进行递归。这是一个示例文档。有人可以帮忙吗？

谢谢。

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
    <reporting:root xmlns:reporting="http://www.xyzcorp.net/reporting">
      <reporting:default0 reporting:type="Portfolio">
        <reporting:header>
          <reporting:configuration>
        <reporting:columns>
          <reporting:column reporting:group="instrument" reporting:name="Ident" reporting:tag="ident" reporting:type="int"/>
          <reporting:column reporting:group="prices" reporting:name="Last (Time)" reporting:tag="lastTime" reporting:type="string"/>
          <reporting:column reporting:group="noGroup" reporting:name="RIC" reporting:tag="ric" reporting:type="string"/>
          <reporting:column reporting:group="instrument" reporting:name="Reference" reporting:tag="reference" reporting:type="string"/>
          <reporting:column reporting:group="result" reporting:name="Currency" reporting:tag="currency" reporting:type="string"/>
        </reporting:columns>
      </reporting:configuration>
    </reporting:header>
    <reporting:window reporting:Id="36674" reporting:level="0" reporting:name="MY_PORTFOLIO" reporting:parentId="11991">
      <reporting:folio>
        <reporting:folioid>1234</reporting:folioid>
        <reporting:folio>
          <reporting:folioid>9876</reporting:folioid>
          <reporting:line reporting:Id="67520135" reporting:level="1" reporting:name="INTERNATIONAL BUSINESS MACHINES CORP" reporting:parentId="36674" reporting:positionType="0">
            <reporting:ident>643633</reporting:ident>
            <reporting:reference>IBM.USD</reporting:reference>
            <reporting:currency>USD</reporting:currency>
          </reporting:line>
          <reporting:line reporting:Id="67520179" reporting:level="1" reporting:name="GENERAL ELECTRIC CO" reporting:parentId="36674" reporting:positionType="0">
            <reporting:ident>643635</reporting:ident>
            <reporting:ric>GE.N</reporting:ric>
            <reporting:reference>GE.USD</reporting:reference>
            <reporting:currency>USD</reporting:currency>
          </reporting:line>
        </reporting:folio>
      </reporting:folio>
    </reporting:window>
  </reporting:default0>
</reporting:root> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:04:17.667

XSLT 中正常的默认处理模式是为每个元素编写一个模板规则，并调用 apply-templates 来处理它的子元素：

```
<xsl:template match="folio">
  <do something>
    <xsl:apply-templates/>
  </do something>
</xsl:template> 
```

这自然是递归的：每当你处理一个元素时，你都会调用它的后代的处理。

所以你真的不需要学习如何在 XSLT 中进行递归；你几乎需要学习如何不去做。

# php - 在 PHP 中，从基类的实例创建扩展类的对象

> ID：10708243
> 
> 赞同：5
> 
> 时间：2012-05-22T18:53:51.800
> 
> 标签：php

如果我有一个扩展类 Bar 的类 Foo 和一个 Bar 的实例，那么无论如何是否可以使用该 Bar 的实例来“填充”一个新的 Foo 实例？

本质上，我只能检索 Bar，但我想在我的代码中使用 Foo，因为它给了我很多额外的方法。

我看到很多解决方案都提出了类似的问题，但它们似乎都是 python 或 c#。

我无法使用 ReflectionClass::newInstanceArgs，因为我无法访问进入 Bar 构造函数的数据以首先创建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:21:42.060

推荐的方法是通过[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。您的构造函数 for`Foo`可以接受 的实例`Bar`，然后您必须编写代码以`Foo`从对象加载新对象的状态`Bar`。

如果 PHP 具有完全符合您描述的功能，那将是有问题的，因为即使`Foo`extends `Bar`，这两个类仍然可能非常不同。我不明白 PHP 是如何聪明到知道如何自动将一个类的实例转换为另一个类的实例。

话虽如此，在正确的情况下，下面的（非常hacky）“解决方案”可以做你描述的事情。我不建议实际使用它。我主要只是想表明你必须诉诸一些奇怪的东西才能做到这一点。

```
function convertObject($object, $newClass)
{
    return unserialize(
        preg_replace(
            '/^O\:\d+\:"[^"]+"/',
            'O:'.strlen($newClass).':"'.$newClass.'"',
            serialize($object)
        )
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:18:44.893

没有内置的方法可以轻松地做你想做的事。这些类的接口必须重新设计一点。也许是这样的：

```
<?php
class Bar
{
    ...
}

class Foo extends Bar
{
     public static function fromBar(Bar $bar)
     {
         $foo = new self();
         ... (copy data here) ...

         return $foo;
     }
} 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T19:28:47.663

我刚刚写了一些此示例基于扩展自定义驱动程序的内容，这些驱动程序可能需要为上述核心驱动程序文件提供额外的支持包。

```
// File: parent.php

class parent_class() {

    protected $_protected_object; // set in constructor
    protected $_protected_var = "Something dynamic";

    public function __construct() {
        // keep in mind that if you don't override this constructor, this will execute when extended
    }

    public function create_resource() {
        $this->_protected_object = new SomeObjectInstance();
    }

    public function child_class() {

        static $child = null;

        if (is_null($child)) {

            $file = "child.php";

            if (!\file_exists($file)) {
                throw new Exception("Couldn't load '$file', doesn't exist");
            } else {

                require_once($file);

                $child = new child_class();
                $child->__overload("_protected_object", $this->_protected_object)->__overload("_protected_var", $this->_protected_var);

            }

        }

        return $child;

    }

}

// File: child.php

class child_class extends parent_class {

    protected function __overload($index, &$value) {

        $this->$index =& $value;
        return $this;

    }

    public function __construct() {
        // REMEMBER: if you don't declare this method, the parent's constructor will execute
    }

    public function extended_func() {
        // code
    }

    public function etc() {
        // code
    }

}

// Code instantiating objects:

$parent = new parent_class();
$parent->create_resource();

var_dump($parent);

/**
 *  Would output something like this:
 *  
 *  object(parent_class)#1 (2) {
 *    ["_protected_object":protected]=>
 *    object(SomeObjectInstance)#2 (*) {
 *      %OBJECT PROPERTIES%
 *    }
 *    ["_protected_var":protected]=>
 *    string(17) "Something dynamic"
 *  }
 */

$child = $parent->child_class();

var_dump($child);

/**
 *  Would output something like this:
 *  
 *  object(child_class)#3 (2) {
 *    ["_protected_object":protected]=>
 *    &object(SomeObjectInstance)#2 (*) {
 *      %OBJECT PROPERTIES%
 *    }
 *    ["_protected_var":protected]=>
 *    &string(17) "Something dynamic"
 *  }
 */ 
```

请注意，$child 的第二个 var_dump() 输出与 $parent 相同的信息，只是您现在可以看到所述属性前面带有与号 (&)，表示现在有引用。因此，如果您更改父类实例中关于这两个属性的任何内容，它将反映在子类实例中。

# magento - 1.7 中的 magento REST/OAuth

> ID：10708244
> 
> 赞同：0
> 
> 时间：2012-05-22T18:53:58.980
> 
> 标签：magento

我在 magento 1.6.2 中，正在根据客户状态设置一些东西来显示/隐藏 cms 页面。

类似于 WordPress 拥有许多“付费墙/会员”插件的方式。

所以用户订阅（目前正在考虑使用 AW SARP 插件）-> 然后 magento 授予对 CMS 页面的访问权限，

IE

*   显示/隐藏插件
*   在客户帐户中显示/隐藏视频节目链接

视频节目是 CMS 页面上的产品。

```
Customer buys (or subscribes to) a Video Program 
-->a listener looks for customer ID 
-->customer ID is found and shows magento what product(s) (one or more products) customer has paid for (and/or is currently subscribed to) 
-->magento displays an array in customer account on a tab "My Purchased Videos" that includes links to CMS pages for each Video Program 
-->once subscription expires, customer can not access CMS pages for each Video Program. 
```

那么，我认为 1.7 允许使用 REST/OAuth 以完全不同的方式完成客户管理/访问，或者 REST/OAuth 只是另外一件管理事情，我是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:38:05.557

据我了解，Magento REST API 主要是为集成 3rd 方应用程序而设计的，所以它“只是”另外一件管理事情。

# php - Wordpress - Multiple images per post

> ID：10708246
> 
> 赞同：1
> 
> 时间：2012-05-22T18:54:00.250
> 
> 标签：php, image, wordpress, custom-post-type, image-management

Looking for any pointers really.

**The functionality I'm after**

Basically I'd like to have the functionality to assign up to 6 different images to one single post. All 6 images will be displayed as normal within single.php. On the homepage, for example, I'd then like one of those images to be randomly displayed on page load for that post.

**A couple of questions**

1.  Is this even possible?
2.  Is there a plugin that can manage this sort of thing?
3.  If I were to do it myself how should I go about creating this sort of functionality?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:21:42.200

是的，这是可能的，而且不是那么困难。您在创建帖子时上传图像。

然后在 single.php 中使用 get_children 从帖子中获取所有图像。

假设在循环中：

```
$images =& get_children( 'post_type=attachment&post_mime_type=image&post_parent=$post->ID' ); 
```

并像这样输出它们：

```
if ($images)
{
foreach ( $images as $attachment_id => $attachment ) {
        echo wp_get_attachment_image( $attachment_id, 'full' );
    }
} 
```

对于您的随机图像，您可以使用与上面相同的 get_children 但添加`&numberposts=1`到 args 字符串。

或类似的东西：

```
 function fetch_random_img($postid='') {
    global $wpdb;
    if (empty($postid))
    {
       //we are going for random post and random image
     $postid = $wpdb->get_var("SELECT ID FROM $wpdb->posts WHERE post_status = 'publish' ORDER BY RAND() LIMIT 1");
    }
    $imageid = $wpdb->get_var($wpdb->prepare("SELECT ID FROM wp_posts WHERE post_type='attachment' AND post_mime_type LIKE 'image/%' AND post_parent=$postid ORDER BY RAND() LIMIT 1"));
    if ($imageid) {
         echo wp_get_attachment_image( $imageid, 'full' );
    }
    else {
    return false;
    }

    } 
```

这只会给你一个随机图像，而且它是随机的，而 get_children 每次都会拉出相同的图像，除非你添加 order 和 orderby 参数，这将允许你更改输出的图像。

要在 div 中回显图像，只需调用函数：

```
<div>
<?php fetch_random_img(); ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:04:16.513

对于每个帖子，添加一个带有名称和值的自定义字段。您可以将名称设为 ImageURL1，值可以是图像的 URL。根据需要向帖子中添加任意数量的自定义字段。例子：

![在此处输入图像描述](../Images/401a9290cdd2c3b624389467e4f4e768.png)

使用以下代码将其打印到您的 single.php 或循环内的任何其他文件中：

```
<?php $values = get_post_custom_values("ImageURL"); echo $values[0]; ?> 
```

要将其加载到主页上，您将查询帖子，然后在 index.php 中获取特定名称的自定义字段值：

```
<?php query_posts('cat=10')  //your cat id here ?>
<?php if (have_posts()) : ?><?php while (have_posts()) : the_post(); ?>
<a href="<?php $values = get_post_custom_values("LinkURL"); echo $values[0]; ?>" target="_blank"><img src="<?php $values = get_post_custom_values("ImageURL"); echo $values[0]; ?>" alt="<?php the_title(); ?>" /></a>
<?php endwhile; ?><?php endif; ?>
<?php wp_reset_query(); ?> 
```

如果需要，您可以将其随机化或遍历自定义字段。

# c - Stdin is from keyboard or from a file

> ID：10708247
> 
> 赞同：1
> 
> 时间：2012-05-22T18:54:07.333
> 
> 标签：c, stdin

Can a program detect if it's stdin is coming from keyboard input vs. being redirected from a file? in c ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T18:57:15.333

是的，在大多数系统上。在 POSIX 系统（Linux、Mac OS X、BSD 等等）上，您可以[`isatty(3)`](http://linux.die.net/man/3/isatty)在文件描述符 0（标准输入）上使用该函数。在 Windows 上，您可以使用[`_isatty`](http://msdn.microsoft.com/en-us/library/f4s0ddew%28v=vs.80%29.aspx). 例如：

```
if(isatty(0))
{
    // standard input is a terminal device
} 
```

请注意，许多程序用于`isatty`更改其输出缓冲行为：如果标准输出是终端，则输出是行缓冲的（例如，在每个换行符打印后刷新），而如果标准输出不是终端，则它是完全缓冲的（例如仅当缓冲区已满、进程正常退出或应用程序显式刷新流时才会刷新它）。

# java - Populating a Javascript array using MYSQL and JSP

> ID：10708250
> 
> 赞同：0
> 
> 时间：2012-05-22T18:54:17.203
> 
> 标签：java, javascript, mysql, jsp, d3.js

I'm trying to receive data from a MySQL database using a .jsp, put that data into an array, and then send that array to javascript and use the array to populate a graph made through d3.js. I've done some research on how to do the .jsp part, but it doesn't really make much sense to me. I've found little, if anything, about going from java to javascript as well. This is what I currently have:

```
<%@ page language="java" import="java.sql.*"%>

<html>
    <head>
        <title>D3 Test</title>
        <script type="text/javascript" src="d3/d3.v2.js"></script>
            <style type="text/css">
        </style>
    </head>
    <body>

    <%

    Connection con=null;
    ResultSet rst=null;
    Statement stmt=null;

    try{
        String url="jdbc:mysql://localhost:3306/usermaster?    user=root&password=7rubA5Ra";

        int i=1;
        con=DriverManager.getConnection(url);
stmt=con.createStatement();
rst=stmt.executeQuery("select * from test ");

%>
    <script type="text/javascript">

        var dataset = [ 7, 12, 15, 21, 23, 27, 24, 20, 17, 15,
            12, 14, 17, 22, 20, 19, 18, 20, 25, 27 ];
        var w = 500;
        var h = 100;
        var barPadding = 1;
        var svg = d3.select("body")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h);
        svg.selectAll("rect")
            .data(dataset)
            .enter()
            .append("rect")
            .attr("id", "rect1")
            .attr("x", function(d, i) {
                    return i * (w / dataset.length);
                })
            .attr("y", function(d) {
                return h - d*4;
            })
            .attr("width", w/ dataset.length - barPadding)
            .attr("height", function(d) {
                return d * 4;
            })
            .attr("fill", function(d) {
                return "rgb(0, 0, " + (d * 10) + ")";
            });

        /*svg.selectAll("rect")
            .data(dataset2)
            .enter()
            .append("rect")
            .attr("id", "rect2")
            .attr("x", function(d, i) {
                    return i * (w / dataset2.length);
            })
            .attr("y", function(d) {
                return h - d*4;
            })
            .attr("width", w/ dataset2.length - barPadding)
            .attr("height", function(d) {
                return d * 4;
            })
            .attr("fill", function(d) {
                return "rgb(0, 100, " + (d * 10) + ")";
            });*/

        svg.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(function(d) { 
                return d;
            })
            .attr("x", function(d, i) {
                return i * (w / dataset.length) + 5;
            })
            .attr("y", function(d) { 
                return h - (d * 4) + 15;
            })
            .attr("font-family", "sans-serif")
            .attr("font-size", "11px")
            .attr("fill", "white");
    </script>
</body> 
```

I really just need some one to point me in the right direction. I want the information from the database to be put into the variable dataset.

Thanks, EmptyBox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:09:44.557

在您希望将其嵌入 JavaScript 的位置周围添加 JSP 标记。

```
 var dataset = [ 
    <% while (rst!=null && rst.next()) { %>
       <%=rst.getInt("<column name>")%>, 
    <% } %>
    ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:55:04.873

在您的情况下，最好的办法是使用**JSON 库。**

*第一：*在一个**JSP**页面中通过 ResultSet 从数据库中检索所有数据。
*第二：*将它们保存在**JsonArray**中并将数组发送到另一个页面。

*最后：*在 JavaScript 函数中接收 JsonArray 并使用元素填充
页面中的任何位置。

# android - How do I change the shape of a dialog?

> ID：10708251
> 
> 赞同：0
> 
> 时间：2012-05-22T18:54:23.883
> 
> 标签：android, background, dialog

In my app I use many dialogs (popups) and I want to give them a rounded corner shape.

The way I create these popups is this:

On java code I create a function like this:

```
private void showpopup(){

   dialog = new Dialog(this);
   dialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
   dialog.setContentView(getLayoutInflater().inflate(R.layout.popup, null));
   dialog.setCancelable(false);

    TextView fin = (TextView) dialog.findViewById(R.id.solu);
    fin.setText("¡¡safsfasfsafs!!");  

   fin.setOnClickListener(new OnClickListener() {
           public void onClick(View v) {
               dialog.dismiss();
               }

   });   
  dialog.show();
} 
```

The layout I call there is created in this way:

```
<?xml version="1.0" encoding="utf-8" ?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center"
  >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
          android:background="@drawable/shape"
        android:orientation="vertical"
        android:padding="10dp" 
        >

<TextView
    android:id="@+id/solu"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="25sp"
    android:padding="10dp"
    android:textAppearance="?android:attr/textAppearanceLarge" />
  </LinearLayout>

</LinearLayout> 
```

and finally, the xml "shape" that I call in the background is this:

```
<?xml version="1.0" encoding="utf-8"?>

<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<corners android:radius="20dp"/>

<stroke
android:width="1dp"
android:color="@color/black"/>

</shape> 
```

The result it's something like this:

[![enter image description here](../Images/067b44eb17a3e7918352f98f6ff1a6e0.png)](https://i.stack.imgur.com/HJYPy.png)

As you can see, I don't achieve what I want...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T19:05:32.343

尝试从这里使用我的答案：[如何获得活动的圆形对话框主题](https://stackoverflow.com/questions/10072045/how-to-get-rounded-dialog-theme-for-activity/10072780#10072780)（这与您尝试做的事情相同）。创建一个自定义主题（引用您自己的可绘制形状）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="ThemeWithCorners" parent="android:Theme.Dialog">
        <item name="android:windowBackground">@drawable/another_test_drawable</item>
    </style>

</resources> 
```

（这将在`res/themes.xml`）。然后简单地将主题添加到的构造函数中`Dialog`：

```
dialog = new Dialog(this, R.style.ThemeWithCorners); 
```

# ajax - DataTable 按列擦除值排序

> ID：10708257
> 
> 赞同：0
> 
> 时间：2012-05-22T18:54:54.903
> 
> 标签：ajax, jsf, datatable, primefaces

我有由**Ajax**调用填充的**PrimeFaces 数据表。**

 **当我单击列标题以对其值进行排序时，这些值会消失。

```
<p:commandButton value="Pesquisar" actionListener="#{requestController.listRequests}" update="dataTable" /> 
```

这是我的看法：

```
<p:dataTable id="dataTable" var="order" value="#{requestController.backing.requestsList}"
                         paginator="true" rows="10"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
                <p:column sortBy="#{order.companyRequest}">
                    <f:facet name="header">
                        <h:outputText value="Pedido" />
                    </f:facet>
                    <h:outputText value="#{order.companyRequest}" />
                </p:column>

                <p:column sortBy="#{order.company.companyName}">
                    <f:facet name="header">
                        <h:outputText value="Cliente" />
                    </f:facet>
                    <h:outputText value="#{order.company.companyName}" />
                </p:column>

                <p:column sortBy="#{order.emissionDate}">
                    <f:facet name="header">
                        <h:outputText value="Data" />
                    </f:facet>
                    <h:outputText value="#{order.emissionDate}">
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </h:outputText>
                </p:column>
                <p:column sortBy="#{order.requestSituation.description}">
                    <f:facet name="header">
                        <h:outputText value="Status" />
                    </f:facet>
                    <h:outputText value="#{order.requestSituation.description}" />
                </p:column>
                <p:column>
                    <f:facet name="header">
                    </f:facet>
                    <h:form>
                        <h:commandLink value="Detalhes"/>
                    </h:form>
                </p:column>
            </p:dataTable> 
```

**编辑**

*请求控制器*

```
@ManagedBean
@RequestScoped
public class RequestController implements Serializable
{

    private RequestBacking backing;

    public RequestController()
    {
        backing = new RequestBacking();
    }

    public void changeEventListener(ValueChangeEvent e)
    {
        backing.requestSearchType = e.getNewValue().toString();
    }

    public void change()
    {
        switch (backing.requestSearchType)
        {
            case "data":
                backing.mask = "99/99/9999";
                backing.maskSize = "10";
                break;
            case "cnpj":
                backing.mask = " 99.999.999/9999-99";
                backing.maskSize = "20";
                break;
            default:
                backing.mask = "";
                backing.maskSize = "50";
        }
    }

    public void listRequests() throws ParseException
    {

        CompanyVO companyVO = new CompanyVO();
        switch (backing.requestSearchType)
        {
            case "cnpj":
                companyVO.setCnpj(backing.requestSearchValue);
                break;
            case "cliente":
                companyVO.setCompanyName(backing.requestSearchValue);
                break;
            case "pedido":
                backing.requestVO.setCompanyRequest(Integer.parseInt(backing.requestSearchType));
                break;
        }
        SupplierVO supplierVO = new Support().getUserSession().getSupplier();
        backing.requestVO.setEmissionDate(new Support().convertDate(backing.requestSearchValue));
        backing.requestVO.setSupplier(supplierVO);
        backing.requestVO.setCompany(companyVO);

        backing.requestsList = new ArrayList<>(backing.getBo().getRequest(backing.requestVO));

        if (backing.requestsList.isEmpty())
        {
            FacesMessage facesMessage = new FacesMessage(FacesMessage.SEVERITY_WARN, "Nenhum registro encontrado!", null);
            FacesContext.getCurrentInstance().addMessage(null, facesMessage);
            backing.requestsList = null;
        }
    }

..backing getter and setter
} 
```

我`requestsList`在`RequestBacking`我所有的 getter 和 setter 上，如果有更好的方法，请纠正我，我正在使用它，因为它让我的控制器更干净。

```
public List<RequestVO> requestsList; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:00:51.993

显然，`value="#{requestController.backing.requestsList}"`它没有返回与初始请求相同的值。如果它是一个请求范围的 bean 和/或如果`requestsList`基于基于请求的变量在每个请求上填充它，就会发生这种情况。

这只是一个设计错误。将托管 bean 放在视图范围内，并确保您没有在 getter 方法中执行任何业务逻辑。嵌套类`backing`也是可疑的，或者它一定是一个糟糕的命名。

### 也可以看看：

*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

* * *

**简而言之**，您的 bean 应该如下所示：

```
@ManagedBean
@ViewScoped
public class Orders {

    private String query; // +getter +setter
    private List<Order> results; // +getter (no setter required)

    @EJB
    private OrderService service;

    public void search() {
        results = service.search(query);
    }

    // Add/generate normal getters/setters (don't change them!)
} 
```

你的视图应该是这样的：

```
<h:form>
    <p:inputText value="#{orders.query}" />
    <p:commandButton value="Search" action="#{orders.search}" update=":tableForm" />
</h:form>
<h:form id="tableForm">
    <p:dataTable value="#{orders.results}" var="order" ... rendered="#{not empty orders.results}">
        ...
    </p:dataTable>
    <h:outputText value="No results found" rendered="#{facesContext.postback and empty orders.results}" />
</h:form> 
```**

# xml - Why is this XML header tag invalid?

> ID：10708267
> 
> 赞同：2
> 
> 时间：2012-05-22T18:55:11.100
> 
> 标签：xml

If I enter

```
<?xml version="1.0" encoding="utf-8"?> 
```

into www.xmlvalidation.com it puts a cross next to xml and says "The processing instruction target matching [xX],mM][lL] is not allowed".

What is it complaining about?

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:58:05.443

它抱怨这个材料不是文件中的第一件事，所以它试图在 PI 而不是标题中解释。

# windows-installer - 如何在 MSI 安装程序中搭载 MSI 安装程序

> ID：10708268
> 
> 赞同：2
> 
> 时间：2012-05-22T18:55:14.497
> 
> 标签：windows-installer

这是我第一次尝试使用 Windows Installer 构建安装包（我们的客户不希望使用我已经广泛使用的 Wix）。目前，我有一个可以按预期构建和工作的 MSI。但是，我需要为我编写的程序在其他机器上工作所需的 SDK 添加安装程序。我已将第二个安装程序（也是 MSI）添加为自定义操作，该操作根据您在安装过程中是否勾选复选框来执行。问题是，当第二个安装程序执行时，我收到错误提示系统上已经有一个安装程序正在运行并且安装无法继续。我怎样才能解决这个问题？自定义操作设置为在安装期间运行。

提前感谢您为解决此问题提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:17:49.827

您不能同时安装两个 MSI 软件包，更具体地说，您不能在另一个 MSI 的 InstallExecuteSequence 期间启动另一个 MSI。但是，如果您在 UI 序列中触发自定义操作，这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:39:10.843

设置项目因其提供的创作限制和质量而臭名昭著。以至于 MSFT 已将它们从 Visual Studio 11 中删除，并用 InstallShield Limited Edition 取而代之。

最好的办法是查看安装项目使用的 setup.exe 引导程序。查看驱动它们的 XML 格式，并使您的 SDK 安装程序成为一个简单的静默安装程序，可以在调用您现在正在处理的主 MSI 之前由该基础结构驱动。

InstallShield（Setup Prereqs 和 Suite Installers）和 WiX（Burn）对于这种情况来说都是功能更强大的工具。

# jquery - jQuery UI Accordion don't work with form

> ID：10708269
> 
> 赞同：0
> 
> 时间：2012-05-22T18:55:16.950
> 
> 标签：jquery, forms, jquery-ui, accordion

I am using the jQuery UI Accordion to develop a "wizard" form. I have four panels. Each panel contains a part of the form. The form starts before the div with acccordion instance.

**The problem:** If i click on the 'Submit' button, the form doesn't submit, as if the button has "return false;", but i didn't add that. If i hide the jQuery UI Accordion, the submit button works properly.

Does jQuery UI Accordion disable submit buttons? How can I solve this problem?

[HTML on Pastebin](http://pastebin.com/McPyfmi6)

Javascript:

```
// Accordion in Tags area
$("#accordionTag").accordion(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T18:59:56.133

尝试将您的值处理到另一个表单中的隐藏字段，然后在提交按钮上单击运行提交该隐藏值表单的函数。希望它会起作用

# vb.net - Windows Forms App: System.NullReferenceException Error

> ID：10708271
> 
> 赞同：0
> 
> 时间：2012-05-22T18:55:30.083
> 
> 标签：vb.net

Good day,

I have been trying to figure out the source of error in my application. What this function (`GetConcentrations()`) is to display data from my database onto a DataGridView. The function is called in the PageLoad but works fine but when I call it in another Sub, I get this error.

Could anyone help me? I already tried different ways.

Thanks!

![enter image description here](../Images/ed579dea55efe9e24dbd56c1fdaa54e1.png)

Here is the code:

```
Private Sub GetConcentrations()
    Dim conString As String = ConfigurationManager.ConnectionStrings("dbAsthmaConnectionString").ConnectionString
    Me.dataAdapter = New SqlDataAdapter("Select * from tblConcentrations", conString)
    'Dim adapter As New SqlDataAdapter("Select * from tblConcentrations", conString)
    Dim dataset As New Data.DataSet

    Try
        Dim commandBuilder As New SqlCommandBuilder(Me.dataAdapter)

        Dim table As New DataTable()
        table.Locale = System.Globalization.CultureInfo.InvariantCulture
        Me.dataAdapter.Fill(table)
        'Dim datasetgetconcentrations = New DataSet
        Me.dataAdapter.Fill(dataset)
        Me.bindingSource1.DataSource = table

        DataGridView3.AutoResizeColumns(DataGridViewAutoSizeColumnMode.AllCellsExceptHeader)

        DataGridView3.DataSource = dataset.Tables(0)

        dataset.Dispose()

    Catch ex As Exception
        MsgBox("Failed to display the concentration table (GetConcentrations)!", MsgBoxStyle.Information)
    End Try

    'Dim ConcentrationValue As Double = DataGridView2.Rows.Contains
    'TextBoxCurrentConcentration.Text = txtMessage.Text
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:15:45.517

我不明白你为什么调用 Fill 方法两次。
一次填充 DataTable，再次填充 DataSet。只有一个数据集是真正需要的。如果这改变了你的问题，你能试试吗？

```
 Dim ds as New DataSet
    ds.Locale = System.Globalization.CultureInfo.InvariantCulture 
    Me.dataAdapter.Fill(ds) 
    DataGridView3.AutoResizeColumns(DataGridViewAutoSizeColumnMode.AllCellsExceptHeader) 
    DataGridView3.DataSource = ds.Tables(0) 
```

此外，不要在退出时处理您的数据集，您仍在使用它。
在这种情况下，最好让垃圾收集来处理这个任务。

# ajax - 通过 .htaccess 重定向 AJAX 查询

> ID：10708273
> 
> 赞同：0
> 
> 时间：2012-05-22T18:55:32.737
> 
> 标签：ajax, .htaccess, redirect

我有一个 .htaccess 文件：

```
RewriteEngine On
DirectoryIndex control.php
Options +FollowSymlinks
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.+) controller.php?do=$1 [L] 
```

这会重定向所有查询并设置干净的 URL。但是当我使用 ajax 时，它也会重定向。是否可以过滤ajax查询并重定向到

```
controller-ajax.php?do=$1 [L] 
```

反而？

我试图在controller.php 中捕获它，但`X_REQUESTED_WITH`不存在。最好的办法是将所有 ajax 请求重定向到另一个脚本，而不是进行额外的脚本检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:14:09.740

当您调用 AJAX 时，将 GET 变量添加到查询中（即添加`?ajax=true`到查询的末尾）。然后在你的 .htaccess 中有这个：

```
RewriteEngine On
DirectoryIndex control.php
Options +FollowSymlinks
RewriteBase /

RewriteCond %{REQUEST_FILENAME} -f {OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .* - [L]

RewriteCond %{QUERY_STRING} ajax.true
RewriteRule (.+) controller-ajax.php?do=$1 [L]

RewriteRule (.+) controller.php?do=$1 [L] 
```

# java - What's the quickest validation query from a jdbc-pool to a specific table in SQL Server 2008

> ID：10708274
> 
> 赞同：3
> 
> 时间：2012-05-22T18:55:43.643
> 
> 标签：java, sql-server-2008, validation, connection-pooling

I usually use `SELECT 1` as my preferred validation-query from tomcat jdbc pools, because it returns only one row with the result **1** that is very faster, but today I've found one terrible mistake:

My database **only** has **one table** with its **primary key** and is **not nullable**. This table sometimes is dropped, and then appears again by application circumstances. And that's the problem, `SELECT 1` validate connection to database because it's already up but the table is missing so I get a terrible exception.

So, the solutions passes by finding one validation-query against the only table that exists in the database. And also, I need the query to be as fast as possible, because the performance in the application is one of the main objetives.

You can answer than an obvius query may be `SELECT 1 FROM THE_TABLE` but this query returns **1** for each row that the table has, and that's not very quick.

So, **what could be the faster validation-query to this table??**

*EDIT*

If I need to return *at least one result*, **How should be the validation-query?**
I ask this because some pool implementations, like commons-dbcp doesn't accept a query without results as a validated query.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:20:30.947

这个怎么样，它应该验证表是否存在，而无需通过拉取`0`行而不实际列来实际加载任何数据。

```
SELECT TOP 0 1 FROM THE_TABLE 
```

演示：[http ://www.sqlfiddle.com/#!3/c670b/3](http://www.sqlfiddle.com/#!3/c670b/3)

* * *

还有一些内置方法可以检查 SQL SERVER 中是否存在对象。这里有两个例子可以有效地做同样的事情。

```
select count(1) from information_schema.tables where table_name = 'THE_TABLE'
select OBJECT_ID('THE_TABLE') is not null 
```

# iphone - UIWebview becomes zombies in didReceiveMemoryWarning

> ID：10708275
> 
> 赞同：0
> 
> 时间：2012-05-22T18:55:46.403
> 
> 标签：iphone, xcode, uiwebview

I have a uiwebview that I connect via IB to my `UIViewController`. In the controller.h, I define

```
@property (nonatomic, unsafe_unretained) IBOutlet UIWebView *myUIWebView; 
```

I'm compiling for iOS 4.3, so I need the `unsafe_unretained` (otherwise I would use weak)

I've set the delegate of the UIWebView to be the UIViewController in IB.

If the controller gets `didReceiveMemoryWarning` while not being displayed (i.e. I'm on the next screen), the webView is ok (pointing to a valid webView) just before `[super didReceiveMemoryWarning]` , and becomes a Zombie right after the call . Is this normal? I've read that Because it is now a Zombie, I can't set it's delegate to nil in the controller dealloc.
So if it is "normal" that it is a Zombie, should I set the delegate to nil in dealloc ?

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:01:41.070

将委托设置为零`viewWillUnload`或`viewDidUnload`类似-

```
- (void)viewWillUnload {
    [webView setDelegate:nil];
} 
```

# javascript - javascript随机数使获得某些值的机会更大

> ID：10708285
> 
> 赞同：0
> 
> 时间：2012-05-22T18:56:44.240
> 
> 标签：javascript, random

我已经制作了某种编码函数，它使用一个包含 62 个字符（az、AZ、0-9）的数组，然后我使用一个随机数来访问其中一个。
但是如果我使用它，它会返回很多字母，并且我想要与数字一样多的字母（这也是合乎逻辑的，因为数字的机会是 10/62 与 50/62）
有人能告诉我一些生成随机数的函数吗数字，但有更高的机会获得 52-62 之间的值，然后是低于 52 的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:04:45.513

这使您有 50/50 的机会获得数字：

```
var letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
var digits = "0123456789";

function getRandomChar() {
  var r = Math.random();
  return r < 0.5 ? letters.charAt(Math.floor(r*letters.length*2)) : digits.charAt(Math.floor((r-0.5)*digits.length*2));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:00:58.417

如果您想获得例如 0..100 之间的随机值，但在 50..60 中发生的几率更高，您应该在方程中添加第二个随机函数：

```
var rnd = Math.round(Math.random()*( 100 - 50 ) + Math.round(Math.random()*10)); 
```

在这种情况下，第一个随机数生成在 0 到 50 之间，然后它有机会更高，直到 60

在您的 52-62 的情况下，它应该是这样的：

```
var rnd = Math.round(Math.random()*( 52 ) + Math.round(Math.random()*10)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:01:06.643

```
function getRandomIndex(){
    // flip a coin... 50% chance the if occurs, 50% chance the else occurs
    if(Math.floor(Math.random() * 2) == 0){
        // return the number random function, values 52 and up
        return Math.floor(Math.random() * 10) + 52;
    }
    else{
        // return the character random function, values 0 to 51
        return Math.floor(Math.random() * 52);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:01:09.537

首先在 0 和 1（正面或反面）之间进行选择，如果是 1，请使用仅返回数字的单独函数。否则返回一个带有单独函数的字母，该函数只返回字母。

# objective-c - 具有多个切换按钮的 NSMatrix？

> ID：10708291
> 
> 赞同：1
> 
> 时间：2012-05-22T18:56:56.817
> 
> 标签：objective-c, cocoa, multi-select, nsmatrix, nsbuttoncell

我正在尝试创建一个`NSMatrix`of `NSButtonCell`s，其中可以选择零到四个按钮（打开）。我尝试了以下（测试）代码，但不确定如何提供所需的功能。也许这是不可能的`NSMatrix`，我需要查看替代控件，或者创建自己的控件？

```
@interface MatrixView : NSView
{
    NSScrollView *_scrollView;
    NSMatrix *_matrixView;
}
@end

@implementation MatrixView

- (id)initWithFrame:(NSRect)frameRect
{
    NSLog(@"initWithFrame. frameRect=%@", NSStringFromRect(frameRect));
    self = [super initWithFrame:frameRect];
    if (self != nil)
    {
        _scrollView = [[NSScrollView alloc] initWithFrame:NSMakeRect(0, 0, frameRect.size.width, frameRect.size.height)];
        [_scrollView setBorderType:NSNoBorder];
        [_scrollView setHasVerticalScroller:YES];
        [_scrollView setHasHorizontalScroller:NO];
        [_scrollView setAutoresizingMask:NSViewWidthSizable|NSViewHeightSizable];

        NSSize contentSize = [_scrollView contentSize];
        contentSize.height = 300;

        // Make it 3 x however-many-buttons-will-fit-the-height
        CGFloat gap = 8.0;
        CGFloat width = (contentSize.width / 3.0) - (gap * 2.0);
        NSUInteger rows = (contentSize.height / (width + gap));

        NSLog(@"width=%f, rows=%lu", width, rows);

        NSButtonCell *prototype = [[NSButtonCell alloc] init];
        [prototype setTitle:@"Hello"];
        [prototype setButtonType:NSToggleButton];
        [prototype setShowsStateBy:NSChangeGrayCellMask];
        _matrixView = [[NSMatrix alloc] initWithFrame:NSMakeRect(0, 0, contentSize.width, contentSize.height)
                                                 mode:NSListModeMatrix
                                            prototype:prototype
                                         numberOfRows:rows
                                      numberOfColumns:3];
        [_matrixView setCellSize:NSMakeSize(width, width)];
        [_matrixView setIntercellSpacing:NSMakeSize(gap, gap)];
        [_matrixView setAllowsEmptySelection:YES];
        [_matrixView sizeToCells];
        [_scrollView setDocumentView:_matrixView];
        [self addSubview:_scrollView];
        [self setAutoresizesSubviews:YES];
        [prototype release];
    }

    return self;
}

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T15:31:01.273

我让它与以下 NSMatrix 子类一起使用。我添加了一个属性 onCount，以跟踪有多少按钮处于开启状态：

```
@implementation RDMatrix
@synthesize onCount;

-(id) initWithParentView:(NSView *) cv {
    NSButtonCell *theCell = [[NSButtonCell alloc ]init];
    theCell.bezelStyle = NSSmallSquareBezelStyle;
    theCell.buttonType = NSPushOnPushOffButton;
    theCell.title = @"";
    if (self = [super initWithFrame:NSMakeRect(200,150,1,1) mode:2 prototype:theCell numberOfRows:4 numberOfColumns:4]){ 
        [self setSelectionByRect:FALSE];
        [self setCellSize:NSMakeSize(40,40)];
        [self sizeToCells];
        self.target = self;
        self.action = @selector(buttonClick:);
        self.drawsBackground = FALSE;
        self.autoresizingMask = 8;
        self.allowsEmptySelection = TRUE;
        self.mode = NSHighlightModeMatrix;
        self.onCount = 0;
        [cv addSubview:self];
        return self;
    }
    return nil;
}

-(IBAction)buttonClick:(NSMatrix *)sender {
    NSUInteger onOrOff =[sender.selectedCells.lastObject state];
    if (onOrOff) {
        self.onCount += 1;
    }else{
        self.onCount -= 1;
    }
    NSLog(@"%ld",self.onCount);
    if (self.onCount == 5) {
        [sender.selectedCells.lastObject setState:0];
        self.onCount -= 1;
    }    
} 
```

当您尝试选择第 5 个按钮时，它会闪烁，然后熄灭。这可能是一个问题，具体取决于您如何使用这些按钮的状态。我只是用这种方法记录了它们：

```
-(IBAction)checkMatrix:(id)sender {
    NSIndexSet *indxs = [self.mat.cells indexesOfObjectsPassingTest:^BOOL(NSButtonCell *cell, NSUInteger idx, BOOL *stop) {
        return cell.state == NSOnState;
    }];
    NSLog(@"%@",indxs);
} 
```

编辑后：我不喜欢我的第一种方法在您尝试单击第 5 个按钮时再次关闭按钮之前短暂闪烁按钮的方式。我发现我认为更好的解决方案涉及在矩阵子类中覆盖 mouseDown （如果你想尝试这个，你应该删除 setAction 和 setTarget 语句并删除 buttonClick 方法）：

```
-(void)mouseDown:(NSEvent *) event {
    NSPoint matPoint = [self convertPoint:event.locationInWindow fromView:nil];
    NSInteger row;
    NSInteger column;
    [self getRow:&row column:&column forPoint:matPoint];
    NSButtonCell *cell = [self cellAtRow:row column:column];
    if (self.onCount < 4 && cell.state == NSOffState) {
        cell.state = NSOnState;
        self.onCount += 1;
    }else if (cell.state == NSOnState) {
        cell.state = NSOffState;
        self.onCount -= 1;
    }
} 
```

# java - 使用java获取tomcat的安装目录

> ID：10708295
> 
> 赞同：1
> 
> 时间：2012-05-22T18:57:21.393
> 
> 标签：java, tomcat, catalina

我想使用java在我的计算机中获取tomcat的安装目录。我尝试使用：

```
System.getProperty("catalina.base"); 
```

和

```
System.getProperty("catalina.home"); 
```

但是这两种方法都`null`作为答案返回。我试过了`System.getProperty("java.home");`，它正确地返回了java路径。关于问题是什么的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:31:05.527

尝试安装此 JSP 并为“property”参数传递各种值：

```
<%
  String propertyName = request.getParameter("property");
  Object propertyValue;
  String typeString;
  if(null == propertyName)
    propertyValue = null;
  else
    propertyValue = System.getProperty(propertyName);

  if(null == propertyValue)
    typeString = "null";
  else
    typeString = propertyValue.getClass().getName();
%>
The system property <code><%= propertyName %></code> has the value:
<code><%= propertyValue %></code> (<%= typeString %>). 
```

也许您可以找到属性值返回 null 的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T04:45:20.993

我也遇到了和你一样的错误。但后来我意识到tomcat服务器没有运行。启动服务器后，还是无法获取到tomcat路径。
然后我意识到我试图在tomcat仍在运行时从JSF项目中的main方法获取路径。
所以我终于通过使用：`System.out.println(System.getProperty("catalina.base"));`在我的一个项目中的一个bean的`@PostConstruct`方法中获得了tomcat路径。并成功显示在控制台中。 `@ViewScoped`**`JSF`**`C:\Documents and Settings\S!LENT W@RRIOR\Application Data\NetBeans\7.2.1\apache-tomcat-7.0.27.0_base``NetBeans`

所以为了获取Tomcat的安装目录，需要注意以下几点：

*   Tomcat 服务器正在运行
*   你不是想从`main`方法 中获取路径

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T05:24:00.783

我们正在使用黄瓜进行测试，在黄瓜的情况下，我们正在访问项目的个人方法。在项目中，我们正在读取 xml 的配置，位置在 Apache tomcat 的 config 文件夹中。现在当我运行项目时，System.out.println( **System.getProperty("catalina.base")** ); 它提供了正确的路径但是当我从黄瓜调用项目的方法时它**返回 null**

# c# - 在视图中禁用复选框

> ID：10708296
> 
> 赞同：3
> 
> 时间：2012-05-22T18:57:27.963
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-3

我正在尝试使用模型属性禁用视图中的复选框。但是，在这两种情况下，复选框都被禁用。我不应该在下面的代码中使用“”吗？

```
<%= Html.CheckBoxFor(c => c.HasList, new { disabled = (Model.CanModifyList) ? "" : "disabled" })%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:03:46.363

即使您已设置`disabled=""`它仍然被归类为被禁用，因为该元素仍将具有该`disabled`属性。如果不使用 JavaScript/JQuery，您必须在视图中执行 if 语句。

忍受我，因为我习惯了 Razor 语法，但它应该是这样的：

```
<%if (model.CanModifyList) { %>
<%= Html.CheckBoxFor(c => c.HasList)%> 
<% } else { %>
<%= Html.CheckBoxFor(c => c.HasList, new { disabled = "disabled" })%>
<% } %> 
```

更好的是，如果您创建自己的 HTML 帮助器（可能是 的重载`CheckBoxFor`），它根据模型属性返回正确的 HTML，这样可以节省您在视图中执行额外的逻辑 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T01:41:02.747

@mattytommo 的代码可以重写为

```
@{
    if (model.CanModifyList) 
    { 
        @Html.CheckBoxFor(c => c.HasList)%> 
    } 
    else 
    { 
        @Html.CheckBoxFor(c => c.HasList, new { disabled = "disabled" })
    }
} 
```

# json - perl：将字符串转换为 utf-8 以进行 json 解码

> ID：10708297
> 
> 赞同：8
> 
> 时间：2012-05-22T18:57:47.060
> 
> 标签：json, perl, utf-8

我正在抓取一个网站并从其 JSON 中收集信息。结果保存在哈希中。但是有些页面给了我“JSON 字符串中格式错误的 UTF-8 字符”错误。我注意到“cafe”中的最后一个字母会产生错误。我认为这是因为字符类型的混合。所以现在我正在寻找一种将所有类型的字符转换为 utf-8 的方法（希望有一种完美的方法）。我尝试了 utf8::all，它只是不起作用（也许我没有做对）。我是菜鸟。请帮忙，谢谢。

* * *

更新

好吧，在我阅读了由 brian d foy 发布的文章“[知道字符串和 UTF-8 字符串之间的区别”之后。](http://www.effectiveperlprogramming.com/2011/08/know-the-difference-between-character-strings-and-utf-8-strings/)我用代码解决了这个问题：

```
use utf8;
use Encode qw(encode_utf8);
use JSON;

my $json_data = qq( { "cat" : "Büster" } );
$json_data = encode_utf8( $json_data );

my $perl_hash = decode_json( $json_data ); 
```

希望这对其他人有帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-22T21:29:13.257

`decode_json`期望 JSON 已使用 UTF-8 编码。

虽然您的源文件是使用 UTF-8 编码的，但您可以使用 Perl 对其进行解码`use utf8;`（如您所愿）。这意味着您的字符串包含 Unicode 字符，而不是代表这些字符的 UTF-8 字节。

正如您所展示的，您可以在将字符串传递给`decode_json`.

```
use utf8;
use Encode qw( encode_utf8 );
use JSON   qw( decode_json );

my $data_json = qq( { "cat" : "Büster" } );
my $data = JSON->new->utf8(1)->decode(encode_utf8($data_json));
   -or-
my $data = JSON->new->utf8->decode(encode_utf8($data_json));
   -or-
my $data = decode_json(encode_utf8($data_json)); 
```

但是您可以简单地告诉 JSON 该字符串已被解码。

```
use utf8;
use JSON qw( from_json );

my $data_json = qq( { "cat" : "Büster" } );
my $data = JSON->new->utf8(0)->decode($data_json);
   -or-
my $data = JSON->new->decode($data_json);
   -or-
my $data = from_json($data_json); 
```

# ruby-on-rails - Rails 会话中的复杂哈希结构

> ID：10708298
> 
> 赞同：1
> 
> 时间：2012-05-22T18:57:50.427
> 
> 标签：ruby-on-rails, session, hash

是否可以在会话中存储复杂的哈希结构？像这样的东西：

```
session[:blabla] = {}
session[:blabla][:sub] = { :special => [], :xyz => {} } 
```

当我重新加载页面时，这些变量会从会话中丢失。

编辑1：我正在使用 Rails 2.3.x

edit2：如果我在会话中保存一个简单的哈希，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T08:31:10.147

好吧，这可能是旧版本的 rails 造成的。

如果要保存深度嵌套的哈希结构，可以尝试

```
session[:nestedstructure] = nested_hash.to_json 
```

当然，这取决于可使用 json 序列化的对象。

# bash - 比较两个文件忽略顺序

> ID：10708300
> 
> 赞同：29
> 
> 时间：2012-05-22T18:57:51.787
> 
> 标签：bash, unix, diff

我有两个行的顺序无关的文件，我想比较它的内容。

我查看了`diff`文档，但找不到类似`--ignore-order`.

有小费吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-05-22T18:59:53.830

首先对文件进行排序：

```
$ sort file1 > file1.sorted
$ sort file2 | diff - file1.sorted 
```

此外，虽然我个人不鼓励这种事情，但如果您使用 bash 并且在您的系统上启用了此功能，您可以通过使用进程替换来避免临时文件：

```
$ diff <(sort file1) <(sort file2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-15T13:29:22.533

不是 bash，但仍然是使用 python 的快速方法：

```
def check_diff(file1,file2):
    check = {}
    for file in [file1,file2]:
        with open(file,'r') as f:
            check[file] = []
            for line in f:
                check[file].append(line)
    diff = set(check[file1]) - set(check[file2])
    for line in diff:
        print(line.rstrip()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:01:26.537

也许你从错误的角度看待问题。也许您想对这两个文件进行排序然后比较它们？

除此以外，

```
diff file1 file2 
```

会完全按照您的要求进行。

# apache - 从 301 重定向中删除查询字符串

> ID：10708301
> 
> 赞同：11
> 
> 时间：2012-05-22T18:57:55.693
> 
> 标签：apache, redirect, query-string, http-status-code-301

我正在努力为最初使用查询字符串构建的网站创建适当的 301 重定向。旧的 URL 结构如下所示：

```
http://www.oldsite.com/about/index.cfm?fuseaction=cor_av&artID=5049 
```

我想将整个子文件夹（名为“about”）重定向到新域上的新页面。新域的 URL 如下所示：

```
http://www.newsite.com/info 
```

因此，我设置了一个如下所示的重定向：

```
redirectMatch 301 ^/about/ http://www.newsite.com/info 
```

它的重定向很好，但它保留了原始 URL 字符串，因此新 URL 最终在浏览器中看起来像这样：

```
http://www.newsite.com/info/?fuseaction=cor_av&artID=5049 
```

我绝对不是 Apache/301 专家，不知道如何解决这个问题。我只想从 ? 在。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-22T19:46:27.540

两个选项：

```
redirectMatch 301 ^/about/ http://www.newsite.com/info? 
```

或者：

```
RewriteEngine on
RewriteRule ^about/(.*) http://www.newsite.com/info? [L,R=301] 
```

最后的问号似乎是关键位。第二个看起来更干净一些（首先在 URL 的末尾留下一个问号）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:56:12.723

尝试将此代码添加到为`.htaccess`指定的代码中`oldsite.com`：

```
RewriteCond %{REQUEST_URI} ^/about/index.cfm$
RewriteRule ^(.+) http://www.newsite.com/info/ [R=301,QSA] 
```

跟进？

# memory - 在 C 中通过 void 指针传递结构

> ID：10708308
> 
> 赞同：0
> 
> 时间：2012-05-22T18:58:16.120
> 
> 标签：memory, pointers, struct, allocation, void

我正在尝试实现 ARM/DSP 共享内存通信。ARM 端将一个数据块放在共享内存上（我们将其命名为 array[]），并将块的地址和大小发送到 DSP 端，DSP 端只是读取它们。在 DSP 方面，

```
void * buf //address of block on shared memory
int length //size of block 
```

但是，当我尝试阅读它们时，我得到的实际上是：

```
buf[0] = length
buf[1] = array[1]
buf[2] = array[2]
buf[3] = array[3]
    :
    :
    : 
```

看起来好像长度变量覆盖了数组的第一个单元格（这有点奇怪），或者我以错误的方式使用了 void 指针。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:24:43.830

我认为，该数据结构是：

```
buf[0] = length
buf[1] = array[0]
buf[2] = array[1]
:
buf[length] = array[lenght-1] 
```

并且你必须保留 buf 为 length+1

# android - 如何强制 SharedPreferences 保存？

> ID：10708309
> 
> 赞同：1
> 
> 时间：2012-05-22T18:58:22.303
> 
> 标签：android, xml, sharedpreferences, android-preferences

据我所知，值在`SharedPreferences`被显式访问之前不会存储在 Android 中。也就是说，虽然它们在 XML 中可能具有默认值，但在`SharedPreferences`调用访问器方法之前不会将值放在存储中，这就是所有访问器都包含“默认”参数的原因。

虽然这对于简单地从首选项存储中提取值并不是什么大问题，但它可以防止任何尝试获取应用程序中使用的所有首选项键，即使它们存储在 XML 中。`SharedPreferences#getAll()`除非已显式访问首选项，否则在调用时不会出现键。

有没有办法强制将 XML 中定义的所有首选项保存到`SharedPreferences`商店中？我能找到的最接近的解决方案是手动解析 Preference XML 文件，找到所有键和默认值，并为每个键保存默认值。有更清洁的方法吗？

**更新**

在更深入地研究了这个之后，出于不同的原因，我得到了部分偏好列表。设置默认值时，仅保存`EditTextPreference`和`ListPreference`值。另外两个，一个自定义首选项和一个`CheckBoxPreference`，完全被忽略了。这是一个被忽略的示例`CheckBoxPreference`：

```
<CheckBoxPreference
    android:defaultValue="false"
    android:key="PREF_NAME"
    android:summary="Summary text"
    android:title="Title" /> 
```

知道为什么不设置所有默认值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:00:49.787

您可以使用`PreferenceManager::setDefaultValues`. 例如，在你的`Application::onCreate`方法。

```
PreferenceManager.setDefaultValues(this, R.xml.preferences, false); 
```

如果最后一个参数是`false`，则仅在过去从未调用过此方法时才设置默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:28:50.397

*在我的情况下*缺少首选项的原因实际上是一个[Android 错误](http://code.google.com/p/android/issues/detail?id=6641)。解决方法是手动将缺少的首选项设置为其默认值，如重复问题所示：[Android CheckBoxPreference Default Value](https://stackoverflow.com/questions/3907830/android-checkboxpreference-default-value)

# c# - 如何迭代这种特定类型的字典 ?

> ID：10708313
> 
> 赞同：4
> 
> 时间：2012-05-22T18:58:43.897
> 
> 标签：c#, .net

我有一堆来自数据库的结果，我保存在`Dictionary<int, Result>()`.

我拥有的 Result 类是：

```
public int Id { get; set; }
public string something { get; set; }
public string somethingtwo { get; set; }
public string somethingthree { get; set; }
public DateTime Posted { get; set; }
public string Location { get; set; }
public bool somethingfour { get; set; } 
```

所以，`Dictionary<int, Result>`里面有很多结果，我想迭代它们。我该怎么做？我尝试了几种方法，但即使我知道它们也行不通。

我想做这样的事情：

```
foreach(var result in resultDict)
{
   mynewstring = result.Location;
   mynewstringtwo = result.Posted;
   // etc etc.
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T19:00:56.940

```
foreach(var kvp in resultsDict) {
    //Do somethign with kvp
    UseResult(kvp.Value); //kvp.Value is a Result object
    UseKey(kvp.Key); //kvp.Key is the integer key you access it with
} 
```

在上面的代码`kvp`中是一个`KeyValuePair<int, Result>`. 您可以访问`Key`和`Value`属性以获取 的整数键`Dictionary`和`Result`与之关联的值`Key`。我将把它作为一个练习/猜谜游戏让你弄清楚哪个属性是哪个！;-)

正如@Wiktor 所提到的，您还可以访问字典`Values`和`Keys`集合来做同样的事情，但是取而代之的是检索`int`或`Value`属性的序列。

使用其他集合的替代方案：

```
foreach(var val in resultsDict.Values) {
    // The key is not accessible immediately,
    // you have to examine the value to figure out the key
    UseResult(val); //val is a value.
}

foreach(var key in resultsDict.Keys) {
    //The value isn't directly accessible, but you can look it up.
    UseResult(resultsDict[key]);
    UseKey(key);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T19:05:22.880

Dcitionary 有一个名为 Values 的 ValueCollection，因此代码为：

```
foreach (Result r in dict.Values)
{
    mynewstring = result.Location;
    mynewstringtwo = result.Posted;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:01:50.697

```
var dictionary = ...;
foreach ( var result in dictionary.Values )
{
   ...
} 
```

那是你需要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:02:19.263

您可以使用该`Values`属性来迭代 a 的值`Dictionary`（另请参阅[MSDN 页面](http://msdn.microsoft.com/en-us/library/ekcfxy3x.aspx)）。

代码示例：

```
// Your dictionary
var myResultDictionary = new Dictionary<int, Result>();

foreach (var item in myResultDictionary.Values)
{
    // "item" holds a Result object
    // Do something with item
} 
```

您也可以定期循环您的`Dictionary`, 但是`item`将是一个`KeyValuePair`（[MSDN 页面](http://msdn.microsoft.com/en-us/library/5tbh8a42)）对象。您可以使用`Value`变量 item 上的属性访问该值。

代码示例：

```
// Your dictionary
var myResultDictionary = new Dictionary<int, Result>();

foreach (var item in myResultDictionary)
{
    // "item" holds a KeyValuePair<int, Result> object
    // You can access the value (a Result object) by calling "item.Value"
    // Do something with item
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T19:02:39.850

您可以迭代 Dictionary.Values，这将与其他任何`IEnumerable<Result>`

或者，您可以遍历 Dictionary，这是一个`IEnumerable<KeyValuePair<int, Result>>`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T19:03:11.130

```
foreach (KeyValuePair<int,Result> item in dictionary)
            {
                //do stuff
            } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T19:03:32.877

```
foreach(KeyValuePair<int,result> keyValue in yourDictionary)
{
    Debug.WriteLine(keyValue.Value);
    //or
    Debug.WriteLine(keyValue.Key);
} 
```

或相同的东西，但使用 var：

```
foreach(var keyValue in yourDictionary)
{
    Debug.WriteLine(keyValue.Value);
    //or
    Debug.WriteLine(keyValue.Key);
} 
```

^^ 同样的事情，但 var 动态计算出它自己的类型

或者你可以这样做，如果你只需要结果：

```
foreach(var result in yourDictionary.Values)
{
    Debug.WriteLine(result);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-22T19:06:13.550

[`foreach`](http://msdn.microsoft.com/en-us/library/ttw7t8t6.aspx)在字典上使用 a ：

`foreach (var keyValue in dictionary) { //Use key value here }`

# r - 网格排列以在一张图像上放置表格和图形

> ID：10708315
> 
> 赞同：0
> 
> 时间：2012-05-22T18:58:58.927
> 
> 标签：r

我喜欢在同一张图片中放置一张桌子和一张图。我正在这样做：

我的数据框 x 是这样的：

```
1/1/2010 10
1/2/2010 20
1/3/2010 15
1/4/2010 56
1/5/2010 46
1/6/2010 15
1/8/2010 15
1/9/2010 15
1/10/2010 20
1/11/2010 15
1/12/2010 15
1/13/2010 40
1/14/2010 15
1/15/2010 15
1/16/2010 70

p1<-plot(x)
p2<-tableGrob(x)

png("image1.png")
grid.arrange(p2, p1, main="Total Data and Image"
dev.off() 
```

它有效，但 p2 和 p1 之间似乎有很多空间。我怎么可能没有或只有一点点空间？另外，有没有办法让主字体变大？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:49:11.887

这不是一个答案。

您的代码不可重现。将您的数据包装在一个`read.table()`函数中（并接受默认变量名称），猜测您正在使用基本图形，修复代码中的拼写错误，并加载`gridExtra`包（`grid.arrange`函数所必需的），我仍然无法让您的代码工作。使用`ggplot2`包来绘制图表，我可以让你的代码工作。代码现在可以重现了。[请参阅此处了解如何制作一个可重复的**出色**示例](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)。使用我的代码，我认为结果看起来相当不错。但这可能不是你想要的。这就是社区要求您生成可重现示例的原因。最好看看“p2 和 p1 之间有很多空间”是什么意思。

但是从您上面的评论中获取您的解决方法 - 代码中有不必要的元素。您不需要同时使用`grid.arrange`和`arrangeGrob`。另外，因为您将元素并排排列，所以我认为您不需要同时使用`widths`and `heights`; `widths`一个人就足够了。

```
library(ggplot2)
library(gridExtra)

x = read.table(text = "
1/1/2010 10
1/2/2010 20
1/3/2010 15
1/4/2010 56
1/5/2010 46
1/6/2010 15
1/8/2010 15
1/9/2010 15
1/10/2010 20
1/11/2010 15
1/12/2010 15
1/13/2010 40
1/14/2010 15
1/15/2010 15
1/16/2010 70", sep = "", header = FALSE)

p1<-ggplot(x, aes(V2, V1)) + geom_point()
p2<-tableGrob(x)
grid.arrange(p2, p1, main="Total Data and Image", ncol = 2) 
```

你的修复：

```
grid.arrange(p2, p1, main="Total Data and Image", ncol = 2, widths=c(1,2)) 
```

**编辑** Baptiste 的解决方案 - 请参阅以下评论：

```
 grid.arrange(p2, p1, main=textGrob("Total Data and Image", gp=gpar(cex=3)), ncol = 2,
   widths=unit.c(grobWidth(p2), unit(1,"npc") - grobWidth(p2))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:24:28.867

要增加主要用途的字体大小：

```
plot(x, y , cex.main=3) 
```

看看这篇文章，你就会知道字体大小： [在 R 软件中绘图，如何在大型 PNG 文件中放大轴值](https://stackoverflow.com/questions/10677788/plotting-in-r-software-how-to-magnify-axis-values-in-a-large-png-file)

# grails - Grails 查询数据库服务器

> ID：10708316
> 
> 赞同：0
> 
> 时间：2012-05-22T18:58:59.677
> 
> 标签：grails

我可以使用 grails 执行这句话吗？如何？

```
select @@global.max_allowed_packet; 
```

原因：我想确保用户插入的文件不大于允许的值。

缺点：正如我所见，程序员将有能力进行以下查询：显示数据库；（人们可能会说这是安全漏洞）。优点：如果用户尝试插入大于允许的文件，则会收到警告。

考虑： max_allowed_pa​​cket 是程序员不知道或有能力改变的东西，因为服务器管理员。

谢谢 4 您的好评！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T02:06:51.860

您是否尝试过在服务类中使用 groovy Sql 类？

```
import groovy.sql.Sql
class DbConfigService {
   javax.sql.DataSource dataSource // For spring

   def maxPacket(){
      def sql = new Sql(dataSource)
      sql.firstRow('select @@global.max_allowed_packet;').max_allowed_packet
   }
} 
```

# ruby-on-rails-3 - 用于 Mac 的 Rails 代码重构工具

> ID：10708321
> 
> 赞同：2
> 
> 时间：2012-05-22T18:59:26.220
> 
> 标签：ruby-on-rails-3, macos, refactoring

我正在为 Mac 中的 rails 应用程序寻找重构工具。在研究了一整周后，我有点惊讶地发现没有好的工具可以一次性重构命名空间/控制器/模型/视图/路由。我对 Mac 范式有点陌生，所以我可能遗漏了一些东西。

我可以看到为 Rails 开发的几个 gem，它们可以进行一些重命名/替换，但在重构后仍然需要“手动调整”。

为了满足我的要求，这里是标准 Rails 项目

```
# routes
map.namespace :admin do |admin|
  admin.resources :items
end
match "/admin/items/:id/enable" => "admin/items#enable"

# model
/app/models/items.rb
class item < ActiveRecord::Base

end

# views
/app/views/admin/items/
/app/views/admin/items/index.html.erb
/app/views/admin/items/show.html.erb
/app/views/admin/items/new.html.erb
/app/views/admin/items/edit.html.erb

# controller
/app/controllers/admin/items_controller.rb

class Admin::ItemsController < ApplicationController
  def index
    #
  end

  def show
    #
  end

  def enable
    #
  end
end 
```

我对这个工具的要求非常基本：

重构：“item”到“product”——大小写匹配

1.  工具应将任何包含“项目”的文件重命名为“产品”
2.  工具应将任何包含“项目”的文件夹重命名为“产品”
3.  工具应在当前或子目录中的所有文件中查找并替换“item”和“product”。

具有上述功能：

我可以通过以下方式简单地反应整个项目：

```
> refactor "item" "product"
> refactor "Item" "Product"
> refactor "admin" "shop"
> refactor "Admin" "Shop" 
```

如果您能帮助我提供任何可以满足我上述要求的 Mac 工具或任何脚本的链接，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:25:22.707

好吧，我觉得这听起来很整洁，所以我写了一个工具，它可以缝合你想要的东西，我决定称之为 refato。

这是您的快速自述：

正确用法是：`refacto findString changeString <file extensions> <options>`

文件扩展名不是可选的。为了重命名或重构任何文件，您必须至少列出一个文件扩展名。默认情况下将重命名文件夹，如果您不想重命名它们，请使用 -nf。

选项：
-a ：要求确认重构或重命名每个文件/文件夹。
-nf：不重命名文件夹或子文件夹
-ci：不区分大小写。将更改 findString 的所有版本

在此处获取源代码：[https ://github.com/bpo217/refacto](https://github.com/bpo217/refacto)

有几点需要注意：

Refato 会更改文件中 findString 的所有实例，而不仅仅是类名或类似名称。

Refato 将触及所有子文件夹和这些子文件夹中的文件。

由于它是编译后的工具，只需将其放入 /usr/local/bin 以及您需要执行的任何其他操作，因此您只需在终端的任何位置键入 refato 即可运行它。它将始终与当前工作目录一起使用。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T14:17:37.603

我相信 Rails 并不那么容易重构。

如果您不想**经常**或**大规模**执行此操作，那么我建议您简单地在文件中查找并在需要的地方替换。是的，这需要时间，但寻找工具并学习它也是如此。如果您想小心的话，可以在之后查看工具的更改；-)

*旁注*：Netbeans 是我个人对此类工作的偏爱，因为它具有搜索功能。特别是如果您将其与源代码控制集成在一起（良好的提交前审查）。当您需要切换 OS-es（如 Mac）或编程语言时，它对您来说也相当不错。

# symfony - 修改请求参数值

> ID：10708332
> 
> 赞同：27
> 
> 时间：2012-05-22T18:59:58.123
> 
> 标签：symfony

我想知道是否可以修改请求参数的值。

但我不知道该怎么做。

我尝试

```
$requestContent = $this->getRequest()->request->get('tactill_customerbundle_customertype'); 
```

接下来我使用

```
$request->request->replace() 
```

但我不知道如何在我的情况下使用这种方法。

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-22T19:12:37.367

该`replace`方法替换了请求中的**所有**参数，因此您可能不想这样做。

我会改用该`set`方法 - 所以你可以这样做：

```
$request->request->set('tactill_customerbundle_customertype', $newValue) 
```

您可以在 Symfony2 文档 ( [http://api.symfony.com/2.0/](http://api.symfony.com/2.0/) ) 中阅读更多内容 - 您正在寻找`Symfony\Component\HttpFoundation\Request`（这是`$request`变量），然后`Symfony\Component\HttpFoundation\ParameterBag`在您调用该`request()`方法时返回 a 。

# python - 在 ctypes 子类上使用 __repr__()？

> ID：10708333
> 
> 赞同：2
> 
> 时间：2012-05-22T19:00:02.847
> 
> 标签：python, ctypes

我正在玩一些 ctypes 来按摩我写到 Python 中的一些 C 代码。C 代码严重依赖结构和联合，目前，Python 中的快速解决方案是通过 ctypes 对它们进行子类化：

即，由此：

```
struct foo {
    uint32_t a;
    uint32_t b;
    uint16_t c;
    uint16_t d;
}; 
```

对此：

```
from ctypes import *

class Foo(Structure):
    _fields_ = [("a", c_uint),
                ("b", c_uint),
                ("c", c_ushort),
                ("d", c_ushort)] 
```

除非，如果我将`__repr__()`定义扔到 Python 类中，然后`repr()`在实例上使用，我得到的只是`<class 'Foo'>`（或类似的东西，在这里回忆一下）。

所以我想知道是否有一种方法可以利用`repr()`并尝试在 Python 和 C 之间实现两全其美，或者我是否应该查看元类并使用该`struct`库将字节打包/解包到适当的 Python 类中。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:57:58.963

I don't really understand the problem. This works just fine:

```
from ctypes import *

class Foo(Structure):
    _fields_ = [("a", c_uint),
                ("b", c_uint),
                ("c", c_ushort),
                ("d", c_ushort)]

    def __repr__(self):
        return "<Foo: a:%d b:%d c:%d e:%d>" % (self.a, self.b, self.c, self.d)

f = Foo(1,2,3,4)
print repr(f)

# <Foo: a:1 b:2 c:3 e:4> 
```

only if you do:

```
print repr(Foo) 
```

you'll end up with

```
<class '__main__.Foo'> 
```

or something similar.

Are your sure you use `repr` on an instance?

# python - 如何使用 Python 在 Windows 上创建带有嵌入式斜杠的文件？

> ID：10708334
> 
> 赞同：9
> 
> 时间：2012-05-22T19:00:05.133
> 
> 标签：python, windows

在谷歌搜索半小时后，我很惊讶我找不到任何方法在 Windows 上创建名称中带有斜杠的文件。客户要求文件名具有以下结构：

2012 年 4 月 28 日下午 4:07 6,781 12Q1_C125_G_04-17.pdf

到目前为止，我还没有找到任何编码斜杠的方法，因此它们成为文件名而不是路径的一部分。

有什么建议么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-22T19:07:04.673

你不能。

正斜杠是不允许在 Windows 文件名中使用的字符之一，请参阅 [http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)

> 以下基本规则使应用程序能够创建和处理文件和目录的有效名称，而不管文件系统如何：
> 
> 使用句点将基本文件名与目录或文件名中的扩展名分开。
> 
> 使用反斜杠 ( `\`) 分隔路径的组成部分。反斜杠将文件名与其路径分开，并将一个目录名与路径中的另一个目录名分开。您不能在实际文件或目录的名称中使用反斜杠，因为它是将名称分隔为组件的保留字符。
> 
> 根据需要使用反斜杠作为卷名的一部分，例如，对于 Universal，“C:\path\file”中的“C:\”或“\server\share\path\file”中的“\server\share”命名约定 (UNC) 名称。有关 UNC 名称的详细信息，请参阅最大路径长度限制部分。
> 
> 不要假设区分大小写。例如，将名称 OSCAR、Oscar 和 oscar 视为相同的名称，即使某些文件系统（例如符合 POSIX 的文件系统）可能将它们视为不同的名称。请注意，NTFS 支持 POSIX 语义以区分大小写，但这不是默认行为。有关详细信息，请参阅创建文件。
> 
> 卷指示符（驱动器号）同样不区分大小写。例如，“D:\”和“d:\”指的是同一个卷。
> 
> 使用当前代码页中的任何字符作为名称，包括 Unicode 字符和扩展字符集 (128–255) 中的字符，但以下字符除外：
> 
> ```
>  The following reserved characters:
>         < (less than)
>         > (greater than)
>         : (colon)
>         " (double quote)
>         / (forward slash)
>         \ (backslash)
>         | (vertical bar or pipe)
>         ? (question mark)
>         * (asterisk) 
> ```
> 
> 整数值零，有时称为 ASCII NUL 字符。
> 
> 整数表示在 1 到 31 范围内的字符，但允许使用这些字符的备用数据流除外。有关文件流的更多信息，请参阅文件流。
> 
> 目标文件系统不允许的任何其他字符。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-22T19:07:17.787

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T19:07:00.923

嗯...正斜杠不是 Windows 文件名中的合法字符？

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)

# java - Apache Camel：将交换消息头信息发送到端点

> ID：10708336
> 
> 赞同：0
> 
> 时间：2012-05-22T19:00:26.267
> 
> 标签：java, jms, apache-camel

我正在将 xml 从 seda 队列发送到 JMS 队列。我在交换的标头中有一些元数据，我想将其传递给 JMS 队列。

我是否必须从交换对象的标头中显式获取元数据，然后将其设置为 xml？或者，如果 Camel 可以开箱即用，是否还有呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:48:02.183

“将其设置为 XML”？Camel 会将标头作为骆驼交换标头放置，这些标头将自动转换为 JMS 属性。不应该涉及 XML。如果您需要将标头放置在 XML 正文中，则需要手动执行此操作。

# c++ - 在回调函数中删除对象

> ID：10708340
> 
> 赞同：0
> 
> 时间：2012-05-22T19:00:44.233
> 
> 标签：c++, oop, pointers, memory-management, dangling-pointer

我正在发送 HTTP 请求以在服务器上保存/更新数据。请求是异步发出的，并在完成时调用回调函数。一切正常，只是有时应用程序在回调中崩溃。

这就是我正在做的事情：

```
user = new User();
user->saveOnServer();
user->zombie = true;  // Mark the user that it needs to be deleted in the callback. 
```

在`User`中，我有一个`saveOnServer()`方法：

```
void User::saveOnServer(){
    Request *request = new Request();

    // Send request to the server and register the callback.
    request ->setCallback(&userCallback, (void*)this);
} 
```

回调：

```
void userCallback(void *data){
    User *user = (User*)data;

    // Do something here.
    // Delete user if it's a zombie.
    if(user->zombie)
        delete user;
} 
```

有时，我需要在向服务器发送请求后创建一个新用户：

```
user = new User();
user->saveOnServer();
user->zombie = true;
// Some code comes here.
if(user)
    delete user;
user = new User(); 
```

问题是在这种情况下，应用程序在回调中删除用户时崩溃，因为它已经被删除了。另一个问题是回调删除了用户，但`user`指针`main`仍然指向某个地址（悬空指针），所以我再次尝试删除它。

我不确定在这种情况下管理内存的最佳方法是什么。我已经`zombie`到位，因为在某些情况下我不希望回调删除用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:12:06.353

一旦您调用`saveOnServer`了僵尸用户，该请求就是该用户对象的有效“所有者”。不要自己释放它，因为还有其他东西仍然打算使用它并稍后将其删除。

事实上，如果服务器操作可以异步返回，那么用户对象可能随时被销毁。您应该从其他代码中完全停止使用它。您已将该对象的控制权授予该请求，并且您必须在其他任何地方停止使用它：

```
user = new User();
user->zombie = true; // set *before* transferring ownership to server
user->saveOnServer();
user = NULL;
//some code comes here
user = new User(); 
```

如果您不希望请求再使用该对象，那么您需要提供一些工具来“取消”服务器上的保存操作，以便它不使用该对象。

* * *

另一种选择是使用智能指针。在您的主代码中，将对象存储在`shared_ptr`. 在请求对象中，将其存储在`weak_ptr`. 这样，如果您的主代码想要销毁用户对象，它可以简单地调用`user.reset()`. 然后，如果回调尝试使用`weak_ptr`，它将发现指向的对象不再可用。使用智能指针时，*两个*函数都不应该使用`delete`. 指针对象将为您管理用户的生命周期。

```
shared_ptr<User> user = make_shared<User>()
user->saveOnServer();
//some code comes here
user.reset(new User()); 
```

在`saveOnServer`函数中，使用`shared_from_this`创建一个`weak_ptr`对象：

```
void User::saveOnServer(){
  Request *request = new Request();

  //send request on server and register the callback
  weak_ptr<User> self(shared_from_this());
  request ->setCallback(&userCallback, self);
} 
```

在回调中，使用`weak_ptr`：

```
void userCallback(weak_ptr<User> data){
  shared_ptr<User) user = data.lock();
  if (!user)
    return;

  //do something here
} 
```

# c++ - JNI 函数没有被调用

> ID：10708348
> 
> 赞同：0
> 
> 时间：2012-05-22T19:01:08.393
> 
> 标签：c++, java-native-interface

我需要调试团队成员的 JNI 问题。问题出在使用 JNI 连接 USB 连接硬件的 Java 应用程序中。他提到在 C++ dll 中实现的 JNI 函数不会被 Java 应用程序调用。他还特别提到这不是一个不满意的链接错误问题，这是我首先怀疑的。

奇怪的是，Java 应用程序在他的开发系统上运行良好，并且 JNI 调用正常进行。然而，在 QA 团队的目标机器上，Java 应用程序似乎无法运行。

DLL（32位）是使用VS2010生成的，目标机器是WinXP/Win 7 32位系统。我会排除 DLL 方法签名问题，因为 DLL 在开发系统上已被识别。如前所述，这不是链接问题。

JNI 方法根本没有被调用可能是什么问题？这可能是可再发行产品的问题吗？如何调试（使用 JVM 选项）并确定问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:04:49.400

标准调试程序：

1.  在Java中设置断点
2.  运行到断点
3.  将调试器附加到 java 可执行文件（按进程 ID 附加 Visual Studio）
4.  在 JNI 中设置断点。
5.  继续 Java 程序。

# ruby-on-rails - 我如何编写与此迁移相反的内容？

> ID：10708354
> 
> 赞同：0
> 
> 时间：2012-05-22T19:01:22.767
> 
> 标签：ruby-on-rails, polymorphic-associations

我现在的迁移：

```
class CreateActivities < ActiveRecord::Migration
  def self.up
    create_table :activities do |t|
      t.integer :account_id, :null => false
      t.integer :target_id, :null => false
      t.string  :target_type, :null => false
      t.string  :event_type, :null => false
      t.integer :employee_id
      t.string  :name
      t.timestamps
    end

    add_index :activities, [:target_id, :target_type] 
```

有了这个，我现在可以像这样调用目标：

```
Activity.first.target 
```

它会根据 target_type 调出 target_id。

我将如何做相反的事情，以便我可以选择一个目标，如果它有任何相关的活动，它们会出现？

像这样：

```
Job.find(1234).activities
# Where Job.find(1234) is the target_id of many activities. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:14:37.533

如果我理解正确，应该这样做：

```
class Job < ActiveRecord::Base
  has_many :activities, :conditions => ['target_type = ?', 'Job'], :as => :target
end 
```

# jquery - 如何在 jquery 滑块上添加幻灯片计数器？

> ID：10708356
> 
> 赞同：0
> 
> 时间：2012-05-22T19:01:34.953
> 
> 标签：jquery, slider

我是 jquery 的新手，想以位于下一个/上一个导航按钮旁边的“当前幻灯片/总幻灯片”的形式实现幻灯片计数。这是我在图像滑块方面的内容。谢谢你的帮助！

```
$(function() {
    $('#navigation a').click(function() {
        var button = $(this).attr('id');
        var current_image = $('#image img.active');
        var next;
        if (button == 'previous') {
            next = ($('#image img.active').prev().length > 0) ? $('#image img.active').prev() : $('#image img:last-child');
        } else {
            next = ($('#image img.active').next().length > 0) ? $('#image img.active').next() : $('#image img:first-child');
        }
        next.css('z-index', 2).show();
        current_image.fadeOut(600, function() {
            $(this).css('z-index', 1).removeClass('active');
            next.css('z-index', 3).addClass('active');
        });
        return false;
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:11:39.763

尝试这个

```
$(function() {
var $slides=$('#image img'),klass='active';
$('#navigation a').click(function() {
    var button = $(this).attr('id');
    var current_image = $slides.filter('.'+klass);
    var index=$slides.index(current_image.get(0));
    if (button == 'previous') {
        index=current_image.prev().length?--index:-1;
    } else {
        index=current_image.next().length?++index:0;
    }
    var next=$slides.eq(index);

    next.css('z-index', 2).show();
    current_image.fadeOut(600, function() {
        $(this).css('z-index', 1).removeClass(klass);
        next.css('z-index', 3).addClass(klass);
    });
    return false;
});
}); 
```

# ruby - 如何在新窗口上设置 WATIR 焦点

> ID：10708360
> 
> 赞同：6
> 
> 时间：2012-05-22T19:01:59.350
> 
> 标签：ruby, automated-tests, watir, watir-webdriver, webautomation

我是 WATIR 测试的新手（我喜欢它吗！）并且在如何将我的 WATIR 脚本重新聚焦到新打开的窗口时遇到了困难。这是我的（简化的）脚本......

```
#!/usr/bin/ruby
require 'rubygems'
require 'watir-webdriver'
browser=Watir::Browser.new
browser.goto("http://0:3050")

browser.text_field(:name,"userkey300203830").set("OKJHNB")
browser.button(:id, "interview48").click

puts "Expected Result:"
puts "A successful display of cars"

if browser.window(:title=>"300203830").exists?
   puts " Test passed. New window opened!"
else
   puts " Test Failed! No window found"
end 
```

这一切都工作到最后。单击“interview48”键后，会打开一个标题为“300203830”的新窗口。看起来我找到了，但我只是不知道现在如何专注于那个窗口。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T19:30:19.310

```
browser.window(:title => "300203830").use do
  # do something
end 
```

更多信息：[http ://watir.github.io/docs/browser-popups/](http://watir.github.io/docs/browser-popups/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T15:31:59.540

此外，对于 2 个以上的窗口，您可以使用以下内容：

```
browser.windows[n].use 
```

#n 是哪个窗口的变量。n 将按照从左到右打开或标签的顺序访问它们

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-18T21:47:56.377

```
browser.windows.last.use 
browser.windows.first.use 
```

如果您从第一个浏览器实例打开一个新窗口并希望在两者之间切换，则可以使用上述命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-25T13:25:38.517

窗口有 3 个主要选择器：

*   `:title` - 通常是最简单的

*   `:url` - 通常与 Regexp 值一起使用

*   `:element`- 一个独特的元素可能是最不脆弱的（从 Watir 6.18 开始的新元素！）

    browser.window(title: '新窗口') browser.window(url: /my_page.html/) browser.window(element: browser.div(id: 'my-element'))

不再支持按索引定位

更多信息：[Watir 浏览器窗口](http://watir.com/guides/windows/)

# c# - 使用 JSON.NET 反序列化枚举值数组

> ID：10708361
> 
> 赞同：1
> 
> 时间：2012-05-22T19:02:02.193
> 
> 标签：c#, .net, json.net, deserialization

我正在尝试使用 JSON.NET 反序列化来自第三方 Web 服务的响应。这是我的（人为的）示例的完整代码，显示了我正在尝试做的事情：

```
namespace JsonNetTests
{
public enum Parameter
{
    Alpha = 1,
    Bravo = 2,
    Charlie = 3,
    Delta = 4
}

public class ResponseElement
{
    public int Id { get; set; }

    public string Name { get; set; }

    [JsonProperty(ItemConverterType = typeof(StringEnumConverter))]
    public Parameter[] Parameters { get; set; }
}

public class ResponseBody
{
    public string Locale { get; set; }
    public string[] Errors { get; set; }
    public ResponseElement[] ResponseElements { get; set; }
}

[TestFixture]
public class JsonNetTest
{
    [Test]
    public void TestEnumArray()
    {
        string jsonResponse = @"
{""ResponseBody"": {
""Locale"": ""en-US"",
""Errors"": [],
""ResponseElements"": [{
    ""Id"": 1,
    ""Name"": ""ABC"",
    ""Parameters"" : {
        ""Parameter"" : ""Alpha""
    },
    }, {
    ""Id"": 2,
    ""Name"": ""BCD"",
    ""Parameters"" : {
        ""Parameter"" : ""Bravo""
    },
    }
]
}}
";

        JObject rootObject = JObject.Parse(jsonResponse);
        JToken rootToken = rootObject.SelectToken("ResponseBody");

        JsonSerializerSettings settings = new JsonSerializerSettings();
        settings.MissingMemberHandling = MissingMemberHandling.Error;

        ResponseBody body = JsonConvert.DeserializeObject<ResponseBody>(rootToken.ToString(), settings);

        foreach (var element in body.ResponseElements)
        {
            Console.WriteLine(string.Format("{0}: {1}", element.Id, element.Name));
            foreach (var parameter in element.Parameters)
            {
                Console.WriteLine(string.Format("\t{0}", parameter));
            }
        }
    }
}
} 
```

我得到以下异常：

Newtonsoft.Json.JsonSerializationException：无法将 JSON 对象（即 {"name":"value"}）反序列化为类型“JsonNetTests.Parameter[]”。反序列化的类型应该是普通的.NET 类型（即不是像整数这样的原始类型，不是像数组或列表这样的集合类型）或字典类型（即字典）。要强制 JSON 对象反序列化，请将 JsonObjectAttribute 添加到类型。路径“ResponseElements[0].Parameters.Parameter”，第 9 行，位置 21。

我尝试使用 ItemConverterType 属性来指定应如何反序列化数组：

```
[JsonProperty(ItemConverterType = typeof(StringEnumConverter))] 
```

但这也无济于事。有人可以建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:18:02.093

您正在尝试将对象填充到数组中。ResponseElement.Parameters 是一个枚举数组，您的 json 代码使用一个对象来描述每个参数。

你的 json 看起来像这样：

```
// some json
"Parameters" : {
    "Parameter" : "Alpha"
},
// more json 
```

但是要将其转换为枚举数组，它应该如下所示：

```
// some json
"Parameters" : [ "Alpha", "Bravo" ],
// more json 
```

如果你不能改变 json，你可以改变你的模型：

```
public enum ParameterEnum 
{
    Alpha = 1,
    Bravo = 2
}

public ParameterContainer
{
    [JsonProperty(ItemConverterType = typeof(StringEnumConverter))]
    public ParameterEnum Parameter {get;set;}
}

public class ResponseElement
{
    public int Id { get; set; }

    public string Name { get; set; }

    public ParameterContainer[] Parameters { get; set; }
} 
```

实际上，您会将 json 序列化为一个 ParameterContainers 数组，该数组将公开它们的值。

# java - 在java中将十六进制数字字符串转换为双精度数字

> ID：10708362
> 
> 赞同：2
> 
> 时间：2012-05-22T19:02:02.230
> 
> 标签：java, numbers, hex

我们如何在java中将十六进制数字字符串转换为双精度数字？

在matlab中很简单：

```
>> hex2num('c0399999a0000000')

ans =

  -25.6000 
```

但我也可以在 java 中做同样的事情吗？

我试过 parseInt() 但这个数字不是整数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T19:10:37.590

我想你想要[`Double.longBitsToDouble`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#longBitsToDouble%28long%29)，像这样：

```
public class Test {
    public static void main(String[] args) {
        String hex = "c0399999a0000000";
        long longHex = parseUnsignedHex(hex);
        double d = Double.longBitsToDouble(longHex);
        System.out.println(d);
    }

    public static long parseUnsignedHex(String text) {
        if (text.length() == 16) {
            return (parseUnsignedHex(text.substring(0, 1)) << 60)
                    | parseUnsignedHex(text.substring(1));
        }
        return Long.parseLong(text, 16);
    }
} 
```

（使用 Java 签名的事实`long`使这比您真正想要的更尴尬，但是嘿......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:06:56.373

先做一个long，然后调用[longBitsToDouble](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#longBitsToDouble%28long%29)

# android - 注册和注销 onSharedPreferenceListeners

> ID：10708363
> 
> 赞同：2
> 
> 时间：2012-05-22T19:02:09.137
> 
> 标签：android, listener, sharedpreferences

我有两个关于注册/注销*OnSharedPreferenceChangeListener*对象的问题：

**问题 1**：我是否需要在*SharedPreferences*对象的同一实例上调用*registerOnSharedPreferenceChangeListener*和*unregisterOnSharedPreferenceChangeListener*才能正确注册和注销共享首选项的更改，或者在为同一首选项文件获得的两个*SharedPreferences实例上调用这两种方法是否足够？*

 ****问题 2**：传递给*registerOnSharedPreferenceChangeListener的**OnSharedPreferenceChangeListener*实例必须与传递给*unregisterOnSharedPreferenceChangeListener*的实例完全相同，即我不能使用new *OnSharedPreferenceChangeListener* *() { ... }*为这两种方法动态创建一个新实例？

 *****问题 3**：我可以注册多个*OnSharedPreferenceChangeListener*对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:39:57.913

作为 SharedPreferences 的侦听器的接口只是一个“实现”OnSharedPreferenceChangedListener 的类，这意味着该类可以处理 SharedPrefs 将发送给它的消息。

因此，无论您注册什么*实例*，都需要使用相同的引用来取消注册它。

Q1) 是的，您在 sharedpreferences 超出范围之前取消注册，即在 onCreate 中注册在 onPause 中取消注册

Q2）是的，你不能，创建一个新实例会产生一个全新的对象。

Q3）您必须检查[源](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/SharedPreferences.java)实现以查看该类是否保留了一个寄存器列表，或者它是否只允许一个。（拥有 reg 和 unreg 让我相信您可以设置多个侦听器，但请检查）*****

# android - 如何在android中获取电池电量变化（仅当有电量/百分比变化时）？

> ID：10708367
> 
> 赞同：2
> 
> 时间：2012-05-22T19:02:30.477
> 
> 标签：android, power-management

有没有办法只在电量变化时才获得电池电量？

我知道如何获取电池信息`Intent.ACTION_BATTERY_CHANGED`，然后我将它的电池电量与最后一次电池电量（我之前保存的）进行比较，以防它等于我不做任何其他事情。

我也知道`ACTION_BATTERY_CHANGED`当电池信息发生变化（不仅仅是电平）时会发生这种情况，因此我需要检查电平。我不知道为什么，但有时它不能很好地工作。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:45:23.670

没有其他（记录在案的）方法可以获取电池电量。当级别没有变化时忽略广播。正如你已经做的那样。

您可以通过以下方式立即获得最新状态：

```
IntentFilter batIntentFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
Intent battery = this.registerReceiver(null, batIntentFilter);
int level = battery.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
Log.d("TAG", "Current Level: " + level); 
```

# ruby-on-rails-3 - 将文档附加到 rails 3.2 中的联系表单

> ID：10708370
> 
> 赞同：1
> 
> 时间：2012-05-22T19:02:44.030
> 
> 标签：ruby-on-rails-3, email-attachments

我创建了一个联系表格，一旦发送就会给我发电子邮件。现在我需要能够选择附加将通过电子邮件发送给我的文档。我不需要将它保存在数据库中，因为它将与电子邮件一起并从那里下载。

我是 Rails 新手，所以想看看其他人在这种情况下做了什么，我做了一些阅读，发现在大多数情况下我需要 gem 回形针？我也看过 github 中的 jquery/paperclip 但这似乎需要做很多工作，因为我希望这只是一小部分工作？我可能在这里错了，如果我错了，请道歉

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:41:16.270

您需要做的是使用carrierwave gem 或paperclip gem 将文件上传到公共目录中的指定文件夹。我会使用 ajax 来执行此操作，一旦您选择要发送的文件，您就可以立即上传文件。这将允许您上传附件并准备好文件路径，因此当您单击提交时，将执行以下代码以允许您发送文件。如果您不想在服务器上堆积文件，您也可以在文件发送成功后添加一行代码删除文件。更多文档可以在这里找到.. [http://guides.rubyonrails.org/action_mailer_basics.html#sending-emails-with-attachments](http://guides.rubyonrails.org/action_mailer_basics.html#sending-emails-with-attachments)

```
class ApplicationMailer < ActionMailer::Base
  def welcome(recipient)
    attachments['free_book.pdf'] = File.read('path/to/file.pdf')
    mail(:to => recipient, :subject => "New account information")
  end
end 
```

# css - 如何使浮动导航栏的宽度与网站的其余部分流畅地运行？

> ID：10708373
> 
> 赞同：0
> 
> 时间：2012-05-22T19:03:03.807
> 
> 标签：css, html, media-queries, fluid-layout

我正在构建一个基于[1140 CSS Grid](http://cssgrid.net/)的网站，这是一个完全流畅的网格，最大宽度设置为 1140px。我已经在该层上放置了将要成为导航栏的内容，该导航栏在每侧进一步延伸五个像素（对于每个人最喜欢的“丝带”设计效果），并且希望中间的 1140 像素（现在的 1150 像素导航）可以调整宽度与它下面的网格。然而，到目前为止我所尝试的一切都没有奏效。有人有想法么？

HTML：

```
<div class="float">
<div class="nav">
    <div class="navleft">
    <img src="images/banneredgel.png"/>
    </div>
    <div class="navbar">
    </div>
    <div class="navright">
    <img src="images/banneredger.png"/>
    </div>
</div>
</div> 
```

CSS：

```
.float {
width: 100%;
display: inline block;
overflow: hidden;
position: fixed;
}

.nav {
width: 100%;
height: 43px;
max-width: 1150px;
min-width: 755px;
margin: 0 auto;
overflow: hidden;
}

.navleft {
float: left;
width: 5px;
height: 43px;
}

.navbar {
float: left;
width: 100%;
max-width: 1140px;
height: 38px;
background-color: #6fd0f6;
}

.navright {
float: left;
width: 5px;
height: 43px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:32:18.313

我用你的答案创建了一个 JS fiddle。 [http://jsfiddle.net/thinkingsites/Vz4TC/3/](http://jsfiddle.net/thinkingsites/Vz4TC/3/)

您的问题是宽度 100% 不允许侧面的两位，因此当您的页面缩小时，它会包裹 .nav 的子项

我所做的是将它们绝对定位在 .nav 中，并给 .navbar 一个左右边距以允许色带而不将其设置为 width:100%，因为这会将色带推开。我还将 .nav 的最大宽度设置为 800，并且导航永远不会超出此范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T16:51:03.140

我能够采用 Thinking Sites 提供的代码并对其进行多行更改，以便在宽度小于浏览器（边缘上的丝带）时悬停在中心上方，然后在网站流畅地调整到较小的浏览器宽度。

HTML：

```
<div class="float">

        <div class="navleft">
        <img src="images/banneredgel.png">
        </div>

        <div class="navbar">
        <img src="images/logo.png" class="logo"/>
        </div>

        <div class="navright">
        <img src="images/banneredger.png">
        </div>
</div> 
```

CSS：

```
.float {
width: 100%;
max-width: 1140px;
height: 38px;
position: fixed;
}

.navbar {
background-color: #6fd0f6;
height: 38px;
padding-left: 5px;
padding-right: 5px;
}

.navright,.navleft { 
width: 5px; 
height: 43px;
position: absolute;
top: 0px;
}

.navleft{
left: -5px;
}

.navright{
right: -5px;
} 
```

# python - 子类化 django 的 fileField 表单的小部件？

> ID：10708374
> 
> 赞同：1
> 
> 时间：2012-05-22T19:03:08.390
> 
> 标签：python, django

我上传工作正常，但问题是，我想过滤掉所有不需要的文件类型。我知道使用 html，您可以使用以下内容：

`<input type="file" name="file" accept="image/*" id="file"> <input type="submit" name="submit" value="Upload Image!">`

在这种情况下，这告诉浏览器只在文件对话框中显示图像文件。

我不知道如何将 accept="image/*" 添加到 Django 的小部件中。

任何帮助都是最受欢迎的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:21:21.170

您可以使用`attrs`此处记录的小部件进行更改：[https ://docs.djangoproject.com/en/1.3/ref/forms/widgets/#django.forms.Widget.attrs](https://docs.djangoproject.com/en/1.3/ref/forms/widgets/#django.forms.Widget.attrs)

```
from django import forms

class MyForm(forms.Form):    
    my_file = forms.FileField()

    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.fields['my_file'].widget.attrs.update({'accept': 'image/*'}) 
```

或者，您可以使用[django-widget-tweaks 之](https://github.com/kmike/django-widget-tweaks)类的东西通过模板标签来执行此操作。

# linq - 有没有更好的方法来制定这个实体框架 4 更新？

> ID：10708375
> 
> 赞同：1
> 
> 时间：2012-05-22T19:03:09.220
> 
> 标签：linq, entity-framework

我有以下代码：

```
List<Item> csItems = (from i in context.Items
                      where i.CSItem == true
                      select i).ToList<Item>();
csItems.ForEach(i => i.Active = false);
context.SaveChanges(); 
```

似乎这非常低效，因为我必须先阅读整个表格，然后更新表格。有没有更好的方法来做到这一点，以便我只进行更新而不阅读所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:11:44.890

Linq2EF 没有内置的批量更新，但是你可以使用[Alex James](https://stackoverflow.com/users/94610/alex-james)，[文章](http://blogs.msdn.com/b/alexj/archive/2007/12/07/rolling-your-own-sql-update-on-top-of-the-entity-framework-part-1.aspx)自己做，实际上你应该自己实现它。同样简单的方法是使用存储过程。但是如果你想自己拥有它，你可以阅读所有 4 篇文章系列，它们很容易阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:11:50.313

无需构建`List<T>`项目。我个人只会列举结果并设置值：

```
IQueryable<Item> csItems = (from i in context.Items
                  where i.CSItem == true
                  select i);
foreach(var item in csItems)
     item.Active = false;

context.SaveChanges(); 
```

请注意，Entity Framework 没有内置批量更新功能，因此做一些更有效的事情需要[一些其他技术](https://stackoverflow.com/a/2720660/65358)。

# jsf - 如何使用 Glassfish 从 JSF 应用程序提供静态网页

> ID：10708379
> 
> 赞同：2
> 
> 时间：2012-05-22T19:03:13.893
> 
> 标签：jsf, glassfish-3

我有一个在 Glassfish 3.1.1 下运行的 JSF 2.0 应用程序，我需要提供与部署 WAR 文件时创建的应用程序根目录不同物理位置的静态网页。我找到了各种参考（比如[这个](https://stackoverflow.com/questions/3636503/glassfish-vhost-to-serve-only-static-contents-disable-session-how-to)和[这个](https://stackoverflow.com/questions/3266608/how-to-provide-access-to-an-external-resource-file-for-a-glassfish-web-applica)）来使用标签定义一个备用文档根，比如

```
<property name="alternatedocroot_1" value="from=/myimages/* dir=/images"/> 
```

添加到 sun-web.xml（我认为这意味着 Glassfish 3.1.1 中的 glassfish-web.xml）。但是，我似乎无法让它工作。就我而言，我认为问题在于 glassfish-web.xml 根本没有为备用 docroot 定义足够的上下文以使其具有任何意义：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
  <property name="alternatedocroot_1" value="from=/myimages/* dir=/images"/>
</glassfish-web-app> 
```

我的应用程序定义的内容似乎在 web.xml 中比在 glassfish-web.xml 中更多。我是否可能需要放一些东西来引用备用文档根？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:30:28.203

这种精确的配置需要一个`/images/myimages`相对于与运行 Web 服务器的 JVM 相同的磁盘的绝对根目录的文件夹。`foo.png`然后，该文件夹中的文件可由`http://localhost:8080/contextname/myimages/foo.png`.

围绕此设置的一个常见混淆是该`from`属性被解释为单独的 URL 中的上下文路径，而不是该`dir`位置中的实际子文件夹。但这不是真的。

如果您在 Windows 环境中运行 Glassfish，那么您需要`dir`像这样指定磁盘盘符`dir=C:/images`。

# c - 将具有大约 50 个局部变量的非常大的 C 函数分解为更小的函数的最佳方法是什么？

> ID：10708380
> 
> 赞同：1
> 
> 时间：2012-05-22T19:03:20.433
> 
> 标签：c, variables, refactoring, local

我有一个由其他人编写的 3500 行长的 C 函数，我需要在不引起任何回归的情况下将其分解。由于它在 C 中，我面临的主要问题是维护变量的状态。例如，如果我将一小部分代码分解为另一个函数，我将需要传递 10 个参数。其中一些实际上会在新函数的代码中发生变化。所以有效地我需要向他们传递一个指针。它变得非常混乱。有没有更好的方法来处理这种重构？任何“最佳实践”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:10:45.123

*   每个函数都应该做一件通过检查代码很容易弄清楚的事情。
*   与其传递 10 个变量，不如将它们放入一个结构中并传递。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:10:35.840

单元测试。提取依赖于 3 个或更少变量（最好是 1 个变量）的代码的一小部分并对其进行测试。将原始函数中的代码替换为对新函数的调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T19:13:55.847

在我看来，您能做的最好的事情就是彻底研究该功能，并充分了解其内部结构。这个函数很可能里面有很多反模式，所以我不会尝试重构它：一旦我知道它是如何工作的（我知道这可能需要很多时间）我会把它扔掉并从头开始重写所需的等效较小函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T19:10:53.793

将在多个子函数之间共享的局部变量打包到一个结构中并传递结构？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T19:36:55.273

你被C卡住了吗？我有时会将此类函数转换为 C++ 类，在其中我将部分（或全部）局部变量转换为成员变量。完成此步骤后，您可以轻松地将部分代码分解为处理成员变量的方法。

在实践中，这意味着这样的功能：

```
... do_xxx(...)
{
  .. some thousand lines of code...
} 
```

可以转换为：

```
class xxx_handler
{
public:
  xxx_handler(...);
  ... run(...)
  {
    part1();
    part2();
    part3();
    return ...;
  }
private:
  // Member variables goes here.
};

// New replacement function.
... do_xxx(...)
{
  xxx_handler handler(...);
  return handler.run(...);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T11:49:09.240

作为将函数的一部分作为独立函数取出的第一步，首先要做的事情是将“函数全局”临时变量移动到更紧密的范围内，例如：

```
int temp;

temp = 5;
while(temp > 0) {...}
... 
temp = open(...);
if (temp < 0) {...} 
```

转换成

```
{
  int temp = 5;
  while(temp > 0) {...}
}
...
{
  int temp = open(...);
  if (temp < 0) {...}
} 
```

之后，将每个`{}`块移动到一个单独的函数中会更容易，它会做一件定义明确的事情。

但是，在进行单元测试之后，最重要的指导方针是：使用支持“樱桃采摘”的版本控制（如*git*）。**经常**提交，基本上每当它在重构某些内容后编译时，然后在它实际工作时再次提交（或者如果您不想拥有第一个提交版本，则*修改之前的提交）。*学习使用版本控制的 diff 工具和樱桃采摘，当您需要在破坏某些内容后回滚时。

# css - 光标：手不在 chrome 和 mozilla 上工作，但在 ie 上工作

> ID：10708386
> 
> 赞同：13
> 
> 时间：2012-05-22T19:03:38.527
> 
> 标签：css

CSS光标：手；这在 Internet Explorer 中有效，但在其他浏览器中无效……这是为什么呢？

```
<input type="button" class="submit" value="submit" />
.submit {
background: transparent;
border-top: 2px solid #00F;
border-right: 0;
border-bottom: 2px solid #00F;
border-left: 0;
color: #00F;
display: inline;
margin: 0;
padding: 0;
cursor:hand;
 } 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-22T19:05:52.007

它不起作用，因为财团将其重命名为`pointer`. 所以更改`hand`为`pointer`它应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T19:10:06.803

你应该使用`cursor: pointer`

阅读：[http ://www.w3schools.com/cssref/pr_class_cursor.asp](http://www.w3schools.com/cssref/pr_class_cursor.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T19:04:48.150

“手”不是 IE 以外的浏览器支持的样式。

[http://www.quirksmode.org/css/cursor.html](http://www.quirksmode.org/css/cursor.html)

# windows - 在 windows xp 上安装 microsoft access 1.x

> ID：10708392
> 
> 赞同：0
> 
> 时间：2012-05-22T19:03:56.150
> 
> 标签：windows, ms-access

我想安装 access 1.x 以打开该类型的 mdb 文件，但我无法安装该程序，它给了我这个错误：

> “安装 Windows for Workgroups 驱动程序”

在互联网的某个地方，我发现您需要从软盘安装 odbc： [http ://www.experts-exchange.com/Microsoft/Development/MS_Access/Q_22103622.html](http://www.experts-exchange.com/Microsoft/Development/MS_Access/Q_22103622.html)

但我找不到那张软盘！
我能做些什么？如何打开这个 mdb 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:29:28.853

好吧，今天一大早，我再次尝试了这个，发现你可以使用 access 2007 导入数据库，就像在这个论坛上写的一样： [http ://www.pcreview.co.uk/forums/re-unable-open -access-1-x-file-t1068111.html](http://www.pcreview.co.uk/forums/re-unable-open-access-1-x-file-t1068111.html)

“创建一个空白数据库，然后使用表中的导入功能来导入旧的 mdb 对象。您可能需要做很少的重新格式化，但您会看到大部分数据。”

它会在新数据库中添加您的表。

感谢您的帮助：D。

# excel - 在多个文件上运行 excel 宏

> ID：10708395
> 
> 赞同：3
> 
> 时间：2012-05-22T19:04:02.223
> 
> 标签：excel, powershell, vbscript, vba

我有一个保存在空白工作簿和多个数据工作簿中的 excel 宏。

我目前单独打开宏文件和每个数据文件，并使用键盘快捷键在每个文件上运行宏。

有没有办法在所有数据工作簿上运行宏而不打开它们，或者使用

*   一个批处理文件，
*   VBA/VBScript,
*   电源外壳，
*   或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T08:12:13.750

一种方法是将宏添加到文件 PERSONAL.XLSB。每次启动 Excel 时，此文件都会在后台加载。最初，PERSONAL.XLSB 文件将不存在。要自动创建此文件，只需开始录制“虚拟”宏（使用电子表格左下角的录制按钮）并选择“个人宏工作簿”将其存储。录制宏后，您可以打开 VBA使用 [Alt]+[F10] 编辑器，您将看到带有“虚拟”宏的 PERSONAL.XLSB 文件。我使用这个文件来存储总是可用的通用宏的负载。我已将这些宏添加到我自己的菜单功能区中。这个通用宏文件的一个缺点是，如果您启动多个 Excel 实例，您将收到一条错误消息，即 PERSONAL. Excel 实例 Nr 已在使用 XLSB 文件。1\. 这时候只要不添加新的宏就没有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:45:33.827

以下两种可能的解决方案，

1.  [vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题")可以直接作为 vbs 文件运行
2.  从 Excel 中运行的[vba](/questions/tagged/vba "显示标记为“vba”的问题")解决方案（根据 Tim Williams 的建议）

**[vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题")解决方案**

```
Dim objFSO
Dim objFolder
Dim objFil
Dim objXl
Dim objWb
Dim objExcel
Set objExcel = CreateObject("Excel.Application")
Set objFSO = CreateObject("scripting.filesystemobject")
Set objFolder = objFSO.getfolder("c:\temp")
For Each objFil In objFolder.Files
    If InStr(objFil.Type, "Excel") > 0 Then
        Set Wb = objExcel.Workbooks.Open(objFil.Path)
        wscript.echo Wb.name
        Wb.Close False
    End If
Next 
```

[vba](/questions/tagged/vba "显示标记为“vba”的问题")解决方案

```
Sub OpenFilesVBA()
    Dim Wb As Workbook
    Dim strFolder As String
    Dim strFil As String

    strFolder = "c:\Temp"
    strFil = Dir(strFolder & "\*.xls*")
    Do While strFil <> vbNullString
        Set Wb = Workbooks.Open(strFolder & "\" & strFil)
        Wb.Close False
        strFil = Dir
    Loop
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T08:48:16.620

我刚刚偶然发现了你的帖子，也许很晚，但对于所有未来的搜索。可以通过创建 .vbs 文件来启动您的宏。为此，请打开记事本并添加以下内容：

```
objExcel = CreateObject("Excel.Application")

objExcel.Application.Run <insert macro workbook file path, module and macro name here>
objExcel.DisplayAlerts = False
objExcel.Application.Save
objExcel.Application.Quit

Set objExcel = Nothing 
```

按如下方式保存文件（“您的文件名”.vbs）

通过双击（打开）保存的`.vbs`文件，它将启动您的宏，而您根本无需打开您的 Excel 文件。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T23:07:19.727

另一种方式，

```
Sub LoopAllWorkbooksOpened()

Dim wb As Workbook

For Each wb In Application.Workbooks
    Call YourMacroWithWorkbookParam(wb)
Next wb

End Sub

Sub YourMacroWithWorkbookParam(wb As Workbook)
    MsgBox wb.FullName
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T19:51:59.197

您可以将宏保存在您的个人.xls 或主文件中，并使用 vba 循环浏览工作簿，并在运行宏之前激活它们。据我所知，您仍然必须使用 vba 打开它们。

你可以使用这样的东西：

```
sub LoopFiles
  Dim sFiles(1 to 10) as string  'You could also read this from a range in a masterfile
      sFiles(1) = "Filename1.xls"
         .
         .
      sFiles(10) = "Filename10.xls"
  Dim wb as Workbook
  Dim iCount as integer
     iCount = ubound(sFiles)
  Dim iCount2 as integer

  For iCount2 = 1 to iCount
     Workbooks(sFiles(iCount2)).open
     Workbooks(sFiles(iCount2)).activate
     Call YourMacro
     Workbooks(sFiles(iCount2)).close
  next iCount2
end sub 
```

# php - 为什么 CodeIgniter 将输出存储在变量中？

> ID：10708396
> 
> 赞同：3
> 
> 时间：2012-05-22T19:04:02.640
> 
> 标签：php, codeigniter, variables

我最近查看了 CodeIgniter 的代码，只是想看看它是如何工作的。

我不明白的一件事是为什么 CodeIgniter 将视图生成的所有输出存储在一个变量中并在脚本末尾输出？

[这是来自 ./system/core/Loader.php 第 870 行CI 源代码 @ GitHub](https://github.com/EllisLab/CodeIgniter/blob/1d79efea47d26e0e567f919c648adf5b554f3ff0/system/core/Loader.php#L870)的一段代码

```
/*
* Flush the buffer... or buff the flusher?
*
* In order to permit views to be nested within
* other views, we need to flush the content back out whenever
* we are beyond the first level of output buffering so that
* it can be seen and included properly by the first included
* template and any subsequent ones. Oy!
*/
if (ob_get_level() > $this->_ci_ob_level + 1)
{
    ob_end_flush();
}
else
{
    $_ci_CI->output->append_output(ob_get_contents());
    @ob_end_clean();
} 
```

函数 append_output 将给定的字符串附加到 CI_Output 类中的变量。
这样做有什么特殊原因而不使用 echo 语句还是只是个人喜好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T19:13:33.297

有几个原因。原因是您可以加载视图并将其返回而不是直接输出：

```
// Don't print the output, store it in $content
$content = $this->load->view('email-message', array('name' => 'Pockata'), TRUE);
// Email the $content, parse it again, whatever 
```

第三个参数`TRUE`缓冲输出，因此结果不会打印到屏幕上。没有你必须自己缓冲它：

```
ob_start();
$this->load->view('email-message', array('name' => 'Pockata'));
$content = ob_get_clean(); 
```

另一个原因是您在发送输出后无法设置标题，因此例如您可以 user `$this->output->set_content($content)`，然后在某些时候设置标题（设置内容类型标题，启动会话，重定向页面等）然后实际显示（或不显示）内容。

一般来说，我发现使用任何类或函数是非常糟糕的形式，`echo`或者`print`（例如，在 Wordpress 中很常见）。出于与上述相同的原因，我几乎总是宁愿使用它而`echo $class->method();`不是让它回显，例如能够将内容分配给变量而不会直接溢出到输出中或创建我自己的输出缓冲区。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T19:12:58.303

答案在您帖子的评论中。

```
/**
* In order to permit views to be nested within
* other views, we need to flush the content back out whenever
* we are beyond the first level of output buffering so that
* it can be seen and included properly by the first included
* template and any subsequent ones. Oy!
*/ 
```

这样你就可以去：

```
$view = $this->load->view('myview', array('keys' => 'value'), true);
$this->load->view('myotherview', array('data' => $view)); 
```

# java - 如何连接到netbeans平台中的php解析器

> ID：10708398
> 
> 赞同：11
> 
> 时间：2012-05-22T19:04:07.800
> 
> 标签：java, php, netbeans, netbeans-plugins, netbeans-platform

我正在为 Java / Netbeans 平台中的 PHP 库编写代码完成插件。我需要找到一种方法来获取对其中一个 PHP 模块的引用，以便我可以解释部分源代码，有人遇到过这种问题吗？

*   如何获取对 PHP 模块的引用（用于代码完成插件模块）
*   在 NetBeans 平台上将代码完成器与 PHP 模块集成的推荐方法是什么？

提前干杯和感谢 Gabor

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T17:01:44.467

您将使用 org.netbeans.modules.php.api 和其他一些核心内容并实现一个新的 CompletionProvider。( `MyCompleter implements CompletionProvider`)

```
import org.netbeans.modules.php.api.phpmodule.PhpModule;
import org.netbeans.modules.php.api.util.UiUtils;
import org.netbeans.modules.php.api.executable.PhpInterpreter; 
```

也许 Tokenizer 和 Completion 可能有用

**分词器**

```
import org.netbeans.api.lexer.Token;
import org.netbeans.api.lexer.TokenSequence; 
```

**完成**

```
import org.netbeans.spi.editor.completion.CompletionProvider;
import org.netbeans.spi.editor.completion.CompletionResultSet;
import org.netbeans.spi.editor.completion.CompletionTask;
import org.netbeans.spi.editor.completion.support.AsyncCompletionQuery;
import org.netbeans.spi.editor.completion.support.AsyncCompletionTask; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T06:36:49.900

在 Netbeans 中，PHP 支持最初是在您决定下载的版本中选择的。但是，您可以通过 Netbean 的插件功能添加 PHP 支持，就像事后描述的那样。只需转到**工具>插件**，然后单击顶部的**可用插件选项卡。**在那里，您将看到许多与 PHP 相关的插件，从手动引用到您可以安装的特定于框架的帮助程序。您还可以通过同一菜单界面中的另一个选项卡手动安装从[此处下载的各个插件。](http://plugins.netbeans.org/PluginPortal/)

请参阅此处查看下载选项表...注意最右边的所有点，仅此而已。开始支持 Java + PHP 的唯一方法是安装对所有其他语言的支持。如果您有集中的开发需求，这可能会有点沉重，这可能是您跳过此内容的原因。

希望这可以帮助！

[Netbeans 下载](https://netbeans.org/downloads/)

# objective-c - 排序 CGPoints 数组

> ID：10708401
> 
> 赞同：2
> 
> 时间：2012-05-22T19:04:14.440
> 
> 标签：objective-c, arrays, nsarray, sorting, cgpoint

我试图弄清楚对 CGPoints 数组进行排序的最快/最干净的方法是什么。我想我可以使用循环来实现这一点，但这可能不是最快的，我希望它不是最干净的方式。我想获取一个随机 CGPoints 数组，并按最小 x 坐标到最大或最小 x*和*y 坐标到最大对它们进行排序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T19:15:41.967

在 Chuck 发表正确评论后，我使用 sortUsingComparator 方法更新了答案：

这是带有示例数据的完整代码：

**首先，我们生成 100 个随机值并输入到数组中：**

```
NSMutableArray *testArray = [[NSMutableArray alloc] initWithCapacity:100];
for (int i=0; i<100; i++) {
    CGPoint testPoint = CGPointMake(arc4random()%100, arc4random()%100);
    [testArray addObject:[NSValue valueWithCGPoint:testPoint]];
} 
```

**这是对数组进行排序的实际代码：**

```
[testArray sortUsingComparator:^(id firstObject, id secondObject) {
    CGPoint firstPoint = [firstObject CGPointValue];
    CGPoint secondPoint = [secondObject CGPointValue];
    return firstPoint.x>secondPoint.x;
}]; 
```

**最后，我们可以通过打印它来验证数组是否已排序：**

```
NSLog(@"%@",testArray); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:12:47.390

`qsort()`如果你只有一个简单的 CGPoints 数组，C函数可能是你最好的选择。像这样的东西：

```
int compareXCoords(CGPoint *a, CGPoint *b) {
    return b->x - a->x;
}

// Later:

CGPoint points[100];
// initialize points somehow
qsort(points, 100, sizeof(CGPoint), compareXCoords);
// points is now sorted by the points' x coordinates 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:24:39.510

根据我的评论，这是一个很好的解决方案，将它们插入到 NSMutableArray 上，保持您决定的排序。

你必须做这样的事情：

```
NSMutableArray *array = [[NSMutableArray alloc] initWithCapacity:1];

CGPoint candidate;
// Look for the position it has to be
int 0;
for (CGPoint point in array) {
    i++;
    // Compare candidate with current point
    // You have to define this condition, when point is greater than candidate
    if (point > candidate) {
        break;
    }
}
[array insertObjectAtIndex:i-1]; 
```

也许我的代码有一些错误，我现在无法检查它是否正确。

# c# - 调试 - 将数据从控制器传递到视图

> ID：10708419
> 
> 赞同：0
> 
> 时间：2012-05-22T19:05:10.787
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我有一个收藏：

```
 var results =
            from result in xml.Descendants(ns + "GetQuoteResult")
            select new SpotPriceModel
            {
                Type = result.Element(ns + "Type").Value,
                Currency = result.Element(ns + "Currency").Value,
                Date = result.Element(ns + "Date").Value,
                Time = result.Element(ns + "Time").Value,
                Rate = (decimal)result.Element(ns + "Rate"),
                Bid = (decimal)result.Element(ns + "Bid"),
                BidTime = result.Element(ns + "BidTime").Value,
                ExpTime = result.Element(ns + "ExpTime").Value,
                DisplayTime = result.Element(ns + "DisplayTime").Value,
                DisplayDate = result.Element(ns + "DisplayDate").Value,
                Ask = (decimal)result.Element(ns + "Ask"),
                AskTime = result.Element(ns + "AskTime").Value
            };

        var spot = results.First();

        return View(spot);
    } 
```

我已经创建了该集合的模型：

```
 public class SpotPriceModel
{
    public string Type { get; set; }
    public string Currency { get; set; }
    public DateTime Date { get; set; }
    public DateTime Time { get; set; }
    public decimal Rate { get; set; }
    public decimal Bid { get; set; }
    public DateTime BidTime { get; set; }
    public DateTime ExpTime { get; set; }
    public DateTime DisplayTime { get; set; }
    public DateTime DisplayDate { get; set; }
    public decimal Ask { get; set; }
    public DateTime AskTime { get; set; }
} 
```

我正在尝试搭建一个“spot”的视图模型。

但是当我编译时，我得到以下错误：

```
The model item passed into the dictionary is of type 'BD.Models.SpotPriceModel', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[BD.Models.SpotPriceModel]'. 
```

该视图需要以下模型类型：

```
@model IEnumerable<BD.Models.SpotPriceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:09:33.033

您尚未在 Linq 查询中指定类型，因此创建了匿名类型而不是 SpotPriceModel。

```
 select new SpotPriceModel
        {
            Type = result.Element(ns + "Type").Value,
            Currency = result.Element(ns + "Currency").Value,
            Date = result.Element(ns + "Date").Value,
            Time = result.Element(ns + "Time").Value,
            Rate = (decimal)result.Element(ns + "Rate"),
            Bid = (decimal)result.Element(ns + "Bid"),
            BidTime = result.Element(ns + "BidTime").Value,
            ExpTime = result.Element(ns + "ExpTime").Value,
            DisplayTime = result.Element(ns + "DisplayTime").Value,
            DisplayDate = result.Element(ns + "DisplayDate").Value,
            Ask = (decimal)result.Element(ns + "Ask"),
            AskTime = result.Element(ns + "AskTime").Value
        }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:10:37.207

而不是使用匿名类型尝试

```
IEnumerable<SpotPriceModel> results =(from result in xml.Descendants(ns + "GetQuoteResult")
              select new SpotPriceModel    
            {
                Type = result.Element(ns + "Type").Value,
                Currency = result.Element(ns + "Currency").Value,
                Date = result.Element(ns + "Date").Value,
                Time = result.Element(ns + "Time").Value,
                Rate = (decimal)result.Element(ns + "Rate"),
                Bid = (decimal)result.Element(ns + "Bid"),
                BidTime = result.Element(ns + "BidTime").Value,
                ExpTime = result.Element(ns + "ExpTime").Value,
                DisplayTime = result.Element(ns + "DisplayTime").Value,
                DisplayDate = result.Element(ns + "DisplayDate").Value,
                Ask = (decimal)result.Element(ns + "Ask"),
                AskTime = result.Element(ns + "AskTime").Value
            }).AsEnumerable();    
        //var spot = results.First();    
        return View(results);
    } 
```

# java - Android 设备模拟器是否有 MAC 地址？

> ID：10708421
> 
> 赞同：6
> 
> 时间：2012-05-22T19:05:17.543
> 
> 标签：java, android, wifi, avd, mac-address

我编写了以下代码来获取 MAC 地址：

```
WifiManager wimanager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
String address = wimanager.getConnectionInfo().getMacAddress();
Log.d("TOKEN", address); 
```

这在我的手机上完美运行，但在 Android 模拟器中它返回 null。这是因为安卓模拟器没有MAC地址吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:12:56.103

这与您尝试在模拟器上获取蓝牙内容时相同。没有 MacAdress 并且应该返回 null。尝试在真实设备上，它会工作。代码是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:46:38.750

[请参阅](https://stackoverflow.com/a/13007325/185565)我已提交 Utils.java 示例以提供纯 Java 实现并在没有 WifiManager 的情况下工作的这篇文章。代码也适用于模拟器。

```
Utils.getMACAddress("wlan0");
Utils.getMACAddress("eth0");
Utils.getIPAddress(true); // IPv4
Utils.getIPAddress(false); // IPv6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T18:50:24.953

默认情况下，Android 模拟器运行模拟以太网连接，而不是 wifi 连接。由于未启用 Wifi，因此您的代码不会显示 wifi mac 地址。请参阅[http://kmansoft.com/2010/07/27/debugging-wifi-in-the-emulator/](http://kmansoft.com/2010/07/27/debugging-wifi-in-the-emulator/)

在尝试查看我的设备上的所有网络设备和 MacAddress 时，我发现这个答案非常有用 - [https://stackoverflow.com/a/17719579/90236](https://stackoverflow.com/a/17719579/90236)查看

# actionscript-3 - FlashDevelop 4.0.1 尝试格式化代码时出错

> ID：10708423
> 
> 赞同：0
> 
> 时间：2012-05-22T19:05:21.750
> 
> 标签：actionscript-3, flashdevelop

我正在尝试在 FlashDevelop 中格式化我的课程。

这个类有 1132 行代码。

问题是... FlashDevelop 没有格式化代码。

如果我尝试格式化少量的 AS3 代码，程序可以正常工作。

看来，Flash Develop 有一个试图格式化大量代码的错误。

有什么解决方法吗？

有什么bug修复吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:03:57.357

您可以将函数单独复制到另一个文件中并在那里格式化，然后将它们粘贴回去。虽然 1132 行并不多，但如果它不起作用，我会自己格式化它。

# mysql - 1 列 2 结果的总和每个结果的差异！如此简单但不起作用

> ID：10708426
> 
> 赞同：1
> 
> 时间：2012-05-22T19:05:49.083
> 
> 标签：mysql, sum, union, case, where-clause

好的，这很简单，但已经搜索了 3 个小时，仍然无法正常工作！

场景是我有一个单独成本为 2 个业务的数据库，我想将每个业务的成本相加并显示在屏幕上。现在我知道这很简单，很容易用两个 SELECTS 完成。但我想在一个查询中做到这一点！

D B

```
|cost|business|
|100 |   1    |
|200 |   2    |
|200 |   1    |
|300 |   2    | 
```

所以从上表我们知道 b1 = 300 和 b2 = 500！但我的查询都不起作用！

我尝试过 UNION 和 CASE，但对它们不熟悉。我的查询：

第一次尝试：

```
$buscost = mysql_query("SELECT FORMAT(sum(`cost`),2) as `b1` FROM `outgoing` WHERE `business`=1 
UNION 
SELECT FORMAT(sum(`cost`),2) as `b2` FROM `outgoing` WHERE `business`=2")
or die(mysql_error());
    $buscost = mysql_fetch_array($busowe); 
```

第二次尝试：

```
$buscost = mysql_query("SELECT 
CASE WHEN `business` = 1 THEN FORMAT(sum(`cost`),2) END AS `b1` ,
CASE WHEN `business` = 2 THEN FORMAT(sum(`cost`),2) END AS `b2`  
FROM `outgoing` WHERE `active`='yes' ");
$buscost = mysql_fetch_array($buscost); 
```

*cost 设置为 float(11,2)。

我确定我很接近我只是不知道如何弄清楚，在这里找到了类似的问题，但没有一个答案有帮助！

哦，如果 i `print_r`，第一个只获取 b1 的总和，b2 不存在！我得到的第二个数组是第一个案例的结果集，案例2“b2”为空，但存在！我检查了表格，其中有两个业务的测试数据。

请帮助任何建议或解决方案，非常感谢。

编辑：忘记提及所有结果也需要使用 where `active`='yes'进行过滤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:08:58.370

您需要按以下方式分组：

```
SELECT business, FORMAT(sum(`cost`),2) AS cost
FROM outgoing
WHERE active = 'yes'
GROUP BY business 
```

如果你想要格式：

```
business | cost
b1       | 300
b2       | 500 
```

或者

```
SELECT
(
   SELECT FORMAT(sum(`cost`),2) as `b1`
   FROM `outgoing`
   WHERE `business`=1 AND active = 'yes'
   GROUP BY business
) AS b1,
(
   SELECT FORMAT(sum(`cost`),2) as `b1`
   FROM `outgoing`
   WHERE `business`=2 AND active = 'yes'
   GROUP BY business
) AS b2 
```

如果你需要格式

```
b1 | b2
300| 500 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:09:00.143

```
SELECT  business, SUM(cost)
FROM    mytable
GROUP BY
        business 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:09:35.730

尝试

```
SELECT business, SUM(cost) AS totalCost FROM myTable GROUP BY business 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:22:37.327

你可以试试这个：

```
 select

 @num1:=(select sum(actor_id) from actor where actor_id%2=0)as number_1, 

@num2:=(select sum(actor_id) from actor where actor_id%2!=0)as number_2,

@num1+@num2 as TOTAL; 
```

或者如果你需要活跃。

```
 select

 @num1:=(select sum(actor_id) from actor where actor_id%2=0 and  active='yes')as number_1, 

@num2:=(select sum(actor_id) from actor where actor_id%2!=0 and  active='yes')as number_2,

@num1+@num2 as TOTAL; 
```

# python - Python 的 append() 只允许列表中的唯一项目？

> ID：10708430
> 
> 赞同：3
> 
> 时间：2012-05-22T19:06:09.493
> 
> 标签：python, data-structures, append

python 文档暗示列表中可以存在重复项，这由 assignmnet 支持：list = ["word1", "word1"]。但是，如果项目已经在列表中，Python 的 append() 似乎不会添加项目。我在这里遗漏了什么，还是故意尝试类似 set() 的行为？

```
>> d = {}
>> d["word1"] = 1
>> d["word2"] = 2
>> d["word2"] = 3

>> vocab = []
>> for word,freq in d.iteritems():
>> ...  vocab.append(word)

>> for item in vocab:
>> ...  print item 
```

返回：

```
word1 
word2 
```

第二个字2在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T19:07:57.950

没有第二个词2 *。*

```
>>> d = {}
>>> d["word1"] = 1
>>> d["word2"] = 2
>>> d
{'word1': 1, 'word2': 2}
>>> d["word2"] = 3
>>> d
{'word1': 1, 'word2': 3} 
```

字典将特定键映射到特定值。如果您希望单个键对应多个值，通常使用列表，并且 defaultdict 非常方便：

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> d["word1"].append(1)
>>> d["word2"].append(2)
>>> d["word2"].append(3)
>>> d
defaultdict(<type 'list'>, {'word1': [1], 'word2': [2, 3]}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:07:57.610

您首先将单词放入字典中。字典不接受重复项，因此当您在字典中输入相同的键两次时，第二个条目会覆盖第一个条目。然后，当您遍历字典中的键时，您不会得到重复项。

```
>>> d = {}
>>> d['word1'] = 1
>>> d['word2'] = 2
>>> d['word2'] = 3
>>> print d
{'word1': 1, 'word2': 3} 
```

迭代一个包含重复项的列表可以按预期工作：

```
>>> words = ['word1', 'word2', 'word2']
>>> newlist = []
>>> for word in words:
...     newlist.append(word)
... 
>>> newlist
['word1', 'word2', 'word2'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:08:28.103

没有第二个`"word2"`，因为`dict`s 每个键只有一个条目。这是哈希表支持的映射的通常行为。

请注意，如果您只想要一个`dict`use的键`dict.keys()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:08:21.677

它从来没有出现过（除非你的例子不正确）。`dict`覆盖它：

```
In [5]: d
Out[5]: {'word1': 1, 'word2': 3} 
```

第二个`word2`覆盖了第一个。`dict`键必须是唯一的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T19:08:33.263

这里的问题不`append()`在于 ，而是字典中不能有重复的键，它们都必须是唯一的。

这意味着该行`d["word2"] = 3`没有添加额外的`"word2"`键，它正在覆盖 的当前值`d["word2"]`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T19:18:12.453

因为 d 是一个字典，一个键可能只有一个值，所以当你修改`d["word2"] = 2`then时`d["word2"] = 3`，你是在用 3 覆盖值 2。

```
>> d = {}
>> d["word1"] = 1
>> d["word2"] = 2
>> d["word2"] = 3

#the fourth line `d["word2"] = 3` only modifies the value of d["word2"].

>> print(d)
{'word1': 1, 'word2': 3} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T19:29:05.233

字典映射重复键并用最新输入的条目覆盖旧条目。

```
>>> d = {}
>>> d["word1"] = 1
>>> d
{'word1': 1}
>>> d["word2"] = 2
>>> d
{'word1': 1, 'word2': 2}
>>> d["word2"] = 3
>>> d
{'word1': 1, 'word2': 3} 
```

# c - RAND_MAX 宏：有符号还是无符号？

> ID：10708433
> 
> 赞同：14
> 
> 时间：2012-05-22T19:06:18.497
> 
> 标签：c

我查看了 C 标准（从 1999 年开始），它只说`RAND_MAX`应该至少为 32767，但没有说明这个宏是否应该扩展为有符号或无符号 int。单一 UNIX 规范（[链接 1](http://pubs.opengroup.org/onlinepubs/7908799/xsh/stdlib.h.html)、[链接 2](http://pubs.opengroup.org/onlinepubs/7908799/xsh/rand.html)）和 Linux 手册（[链接](http://www.kernel.org/doc/man-pages/online/pages/man3/rand.3.html)）并没有增加任何清晰度。

有人会认为`RAND_MAX`应该是 a `signed int`，因为这就是`rand()`回报。

但是，我发现一些编译器将其定义为无符号：

*   古老的 Turbo C++ 1.01：#define RAND_MAX **0x7FFFU**
*   不那么古老的 C++ Builder 5.5：#define RAND_MAX **0x7FFFU**
*   还活着的 Open Watcom C/C++ 1.9：#define RAND_MAX **32767U**
*   DJGPP（用于 DOS 的 gcc 3.3.4）：#define RAND_MAX 2147483647
*   MinGW（适用于 Windows 的 gcc 4.6.2）：#define RAND_MAX 0x7FFF
*   MS Visual Studio 2010（[链接](http://msdn.microsoft.com/en-us/library/2dfe3bzd%28v=vs.100%29.aspx)）：*RAND_MAX 定义为值 0x7fff*
*   Tiny C 编译器 0.9.25：#define RAND_MAX 0x7FFF
*   lcc-win32 3.8：#define RAND_MAX 0x7fff
*   Pelles C 6.50：#define RAND_MAX 0x3fffffff*或*#define RAND_MAX 0x7fff
*   数字火星 C/C++ 8.52：#define RAND_MAX 32767

这使得像下面这样看似无害的代码变得不可移植并且由于已签名到未签名的促销而崩溃：

```
cos(w * t) + (rand() - RAND_MAX / 2) * 0.1 / (RAND_MAX / 2); 
```

`rand()`返回`signed int`[0, `RAND_MAX`] 范围内的 a。

如果`RAND_MAX`定义为`unsigned int`，则 from 的值也会`rand()`提升为`unsigned int`。

如果是这种情况，则差异`(rand() - RAND_MAX / 2)`变成无符号整数的无符号差异，其值在 [0, `RAND_MAX`- `RAND_MAX`/2] 和 [ `UINT_MAX`+1- `RAND_MAX`/2, `UINT_MAX`-1] 范围内，而不是有符号整数的有符号差异[- `RAND_MAX`/2, `RAND_MAX`- `RAND_MAX`/2] 范围内的值。

无论如何，它似乎`RAND_MAX`应该被签名并且大多数（？）编译器都这样定义它，但是是否有任何权威来源说它应该被签名？旧标准？K&R? 另一个 UNIX 规范？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T19:35:39.097

是的，这看起来像是标准中的一个缺陷。

首先，现在可能没有人会定义`rand()`返回一个`int`. 其目的显然是返回一个正数，并且没有可以使用负返回的错误返回。如果今天引入这样的函数，它将被设计为使用无符号整数类型作为返回类型。我的猜测是它早于 C89 和无符号整数概念的引入。

然后，显然人们必须期望函数返回的最大值的定义与函数的类型具有相同的类型。在其他地方，宏被很好地定义为扩展为具有某种类型的表达式，所以这在这里也是可能的。

至于你的问题，我认为最容易携带的东西是`[0, 1)`通过做类似的事情首先将值缩放到两倍，`rand()/(RAND_MAX+1.0)`然后从那里推导出你的所有计算。在任何情况下，`rand()`如果您的平台没有更好的伪随机生成器可用，您应该只作为最后的手段使用。例如，在 POSIX 系统上，该`rand48`族是具有良好描述的属性的方便替代品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T18:37:49.820

答案是：该代码在做出无根据的假设，因此需要对其进行修复。该代码应该执行的操作`RAND_MAX`取决于`(int)`使用情况。

虽然编译器将其宏定义为有符号会更有意义`RAND_MAX`，但标准小心地避免要求他们这样做。这使得任何代码盲目地假设它已签名成为可移植性错误。

# ruby - 为什么用 Nokogiri 解析 HTML 返回空白？

> ID：10708435
> 
> 赞同：3
> 
> 时间：2012-05-22T19:06:23.067
> 
> 标签：ruby, nokogiri

这是我正在解析的 HTML：

```
<div class="audio" id="audio59779184_153635497_-28469067_16663">
  <table width="100%" cellspacing="0" cellpadding="0"><tbody><tr>
<td>
        <a onclick="playAudioNew('59779184_153635497_-28469067_16663')"><div class="play_new" id="play59779184_153635497_-28469067_16663"></div></a>
        <input id="audio_info59779184_153635497_-28469067_16663" type="hidden" value="http://cs5888.userapi.com/u59779184/audio/0fc0fc5d8799.mp3,245">
</td>
      <td class="info">
        <div class="duration fl_r" onmousedown="if (window.audioPlayer) audioPlayer.switchTimeFormat('59779184_153635497_-28469067_16663', event);">4:05</div>
        <div class="audio_title_wrap">
<b><a href="/search?c%5Bsection%5D=audio&amp;c%5Bq%5D=Don+Omar+feat.+Lucenzo+and+Pallada">Don Omar feat. Lucenzo and Pallada</a></b> – <span id="title59779184_153635497_-28469067_16663"> Danza Kuduro (Dj Fleep Mashup)(21.05.12).ılııllı.♫♪Новая Клубная Музыка♫♪.ıllıılı.http://vkontakte.ru/public28469067 </span>
</div>
      </td>

    </tr></tbody></table>
<div class="player_wrap">
    <div class="playline" id="line59779184_153635497_-28469067_16663"><div></div></div>
    <div class="player" id="player59779184_153635497_-28469067_16663" ondragstart="return false;" onselectstart="return false;">
      <table width="100%" border="0" cellspacing="0" cellpadding="0"><tbody><tr id="audio_tr59779184_153635497_-28469067_16663" valign="top">
<td style="padding: 0px; width: 100%; position: relative;">
            <div class="audio_white_line" id="audio_white_line59779184_153635497_-28469067_16663" onmousedown="audioPlayer.prClick(event);"></div>
            <div class="audio_load_line" id="audio_load_line59779184_153635497_-28469067_16663" onmousedown="audioPlayer.prClick(event);"><!-- --></div>
            <div class="audio_progress_line" id="audio_progress_line59779184_153635497_-28469067_16663" onmousedown="audioPlayer.prClick(event);">
              <div class="audio_pr_slider" id="audio_pr_slider59779184_153635497_-28469067_16663"><!-- --></div>
            </div>
          </td>
          <td id="audio_vol59779184_153635497_-28469067_16663" style="position: relative;"></td>
        </tr></tbody></table>
</div>
  </div>
</div> 
```

我正在使用的代码：

```
require 'watir'
require 'nokogiri'
require 'open-uri'

ff = Watir::Browser.new
ff.goto 'http://vk.com/wall-28469067_16663'
htmlSource = ff.html

doc = Nokogiri::HTML(htmlSource, nil, 'UTF-8')

doc.xpath('//div[@class="audio"]/@id').each do |idSongs|
  divSong = doc.css('div#'+idSongs)
  aa = idSongs.text

  link = doc.xpath("//input[@id='#{aa}']//@value")
  puts link
  puts '========================='
end

ff.close 
```

如果我写：

```
aa = 'audio_info59779184_153625626_-28469067_16663' 
```

`puts link`返回 的良好结果`"http://cs5333.userapi.com/u14251690/audio/bcf80f297520.mp3,217"`。

为什么会这样，`aa = idSongs.text` 如果`puts link`返回`" "`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:09:14.127

要回答所提出的问题，链接返回“”，因为它是一个空的 NodeSet。换句话说，Nokogiri 没有找到你要找的东西。NodeSet 的行为类似于数组，因此当您尝试`puts`使用空数组时，您会得到`""`.

因为它是一个 NodeSet，你应该像数组一样迭代它。（你的也一样`doc.css`，它也将返回一个 NodeSet。）

它是空的原因是因为 Nokogiri 找不到你想要的东西。您正在寻找的内容`aa`是：

```
"audio59779184_153635497_-28469067_16663" 
```

将其代入`"//input[@id='#{aa}']"`给出：

```
"//input[@id='audio59779184_153635497_-28469067_16663']" 
```

但应该是：

```
"//input[@id='audio_info59779184_153635497_-28469067_16663']" 
```

搜索找到内容：

```
 doc.search("//input[@id='audio_info59779184_153635497_-28469067_16663']").size => 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T23:41:04.093

简短回答：“为什么会这样，如果 aa = idSongs.text 确实 puts 链接返回“”？因为你试图找到一个与你已经匹配的 div 具有相同 dom id 的输入元素，但它不存在，因此 Nokogiri 只会给你一个空字符串。

看起来他们在多个地方重用了音频标识符，因此为了使您的代码更加通用，可能会将其提取出来，然后在您的选择前加上您需要访问的任何内容......因此：

```
doc.xpath('//div[@class="audio"]/@id').each do |idSongs|
  divSong = doc.css('div#'+idSongs)
  aa = idSongs.text

  identifier = (match = aa.match(/^audio(.*)$/)) ? match[1] : ""

  link = doc.xpath("//input[@id='audio_info#{identifier}']//@value")
  puts link
  puts '========================='

  ## now if you want:
  title = doc.xpath("//input[@id='title#{identifier}']//@value")
  puts title
end 
```

# ruby-on-rails-3 - Paperclip Rails 3.2.2 不旋转和调整大小

> ID：10708442
> 
> 赞同：1
> 
> 时间：2012-05-22T19:06:39.667
> 
> 标签：ruby-on-rails-3, imagemagick, paperclip

回形针宝石 3.0.4

当我在模型中使用平面回形针定义时（UserDetail 有一个头像）：

```
has_attached_file :avatar, :styles => {:medium =>  "300x300>", : :thumb => "64x64#" } 
```

所有图像均以正确的比例创建。

当我通过 lambda ( [http://www.matthuggins.com/articles/rotating-paperclip-image-attachments-in-rails](http://www.matthuggins.com/articles/rotating-paperclip-image-attachments-in-rails) ) 使用自定义处理器时：

```
has_attached_file :avatar, :processors => [:rotator], :styles => lambda { |a| {
  :thumb => { :geometry => '64x64#', :rotation => a.instance.rotation, },
  :medium => { :geometry => '300x300>', :rotation => a.instance.rotation, },  } } 
```

图像旋转了指定的量，但所有图像都保持与 :original 相同的大小和比例。

:geometry 是正确的参数吗？这在后来的 Paperclip 版本中是否发生了变化（我不确定 Web 示例中使用的 Paperclip 版本）？

感激地收到任何指示

问候

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T19:45:13.813

每种风格一个过程：

```
has_attached_file :avatar, 
  :processors => [:rotator], 
  :styles => {
    :thumb =>  Proc.new { |a| { :geometry => '64x64#', :rotation => a.instance.rotation } },
    :medium => Proc.new { |a| { :geometry => '300x300>', :rotation => a.instance.rotation } } 
  } 
```

# algorithm - 最小化向量的函数

> ID：10708443
> 
> 赞同：2
> 
> 时间：2012-05-22T19:06:40.383
> 
> 标签：algorithm, minimization

我需要最小化以下总和：

最小化所有人的总和`i{(i = 1 to n) fi(v(i), v(i - 1), tangent(i))}`

`v`并且`tangent`是向量。 `fi`将 3 个向量作为参数并返回与这 3 个向量相关的成本。对于这个函数，`v(i - 1)`是在上一次迭代中选择的向量。
`tangent(i)`也是众所周知的。给定其他两个向量和，`fi`计算选择向量 的成本。和向量是已知的。所有的值也都是预先知道的。 我的任务是确定所有这样的 s，以使函数值的总成本最小化。 你能给我一些解决这个问题的想法吗？ 到目前为止，我可以想到分支定界或动态编程方法。`v(i)``v(i - 1)``tangent(i)``v(0)``v(n)``tangent(i)`
`i = 0 to n`
`v(i)``i = 1 to n`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:47:56.077

我认为这是数学优化中的一个问题，目标函数由点积和反余弦组成，受制于向量应该是单位向量的约束。您可以使用拉格朗日乘数或通过在反余弦中包含归一化步骤来强制执行此操作。如果 Ti 是单位向量，则为 Vi 计算 cos^-1(Ti.Vi/sqrt(Vi.Vi))。我会尝试为此使用共轭梯度优化器，或者甚至是牛顿法，我的起点是 Vi = Ti。

我希望这将是合理的，因为 Vi 只与相邻的 Vi 相关。您甚至可以通过一个一个地反复调整每个 Vi 来优化目标函数。如果您反复将 Vi 设置为 Ti、Vi+1 和 Vi-1 的平均值，然后再次将 Vi 缩放为单位向量，可能值得看看会发生什么。

# nhibernate - 如何使用将项目添加到 NHibernate 持久 IList 的 MassTransit Saga 确保良好的性能

> ID：10708451
> 
> 赞同：2
> 
> 时间：2012-05-22T19:07:10.337
> 
> 标签：nhibernate, fluent-nhibernate, masstransit, saga

我有一个有 3 个状态的传奇 -

```
 public static State Initial { get; set; }
    public static State ReceivingRows { get; set; }
    public static State Completed { get; set; } 
```

当它收到 BofMessage（其中 Bof = 文件开头）时，它从 Initial 转换为 ReceivingRows。在 BofMessage 之后，它会接收大量 RowMessage，其中每个都描述平面文件中的一行。发送完所有 RowMessage 后，将发送 EofMessage 并且状态更改为 Completed。观察 -

```
static void DefineSagaBehavior()
{
    Initially(When(ReceivedBof)
        .Then((saga, message) => saga.BeginFile(message))
        .TransitionTo(ReceivingRows));

    During(ReceivingRows, When(ReceivedRow)
        .Then((saga, message) => saga.AddRow(message)));

    During(ReceivingRows, When(ReceivedRowError)
        .Then((saga, message) => saga.RowError(message)));

    During(ReceivingRows, When(ReceivedEof)
        .Then((saga, message) => saga.EndFile(message))
        .TransitionTo(Completed));
}

public override void OnAddRow(ParcelRowMessage message)
{
    // ensure isCauvReturned is "Y"
    var fields = message.Value;
    var isCauvReturned = fields[33] == "Y";
    if (!isCauvReturned)
        return;

    // add row with just parcel number
    var parcelNumber = fields[1];
    var row = parcelNumber;
    _rows.Add(row);
} 
```

这有效，只是它具有 n 平方性能。使用 NProf 进行调查显示，每行添加都会导致**整个**行列表为：

a) 从数据库中选择

B) 从数据库中删除

C) 重新插入数据库。

这对我来说似乎是非常糟糕的行为。添加一行所需要做的就是……好吧，向数据库中添加一行！添加操作实际上是我对行列表所做的唯一事情。当我们在列表中有 10,000 个项目时，这不会扩展。

有谁知道如何让这个传奇更加理智的表现行为？

顺便说一句-如果需要，这是 IList 的映射方式-

```
 HasMany(x => x.Rows)
            .Table("OwnerHistorySagaRow")
            .KeyColumn("CorrelationId")
            .Element("Row")
            .Cascade.AllDeleteOrphan(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-25T15:29:10.100

我知道这是一个死物，但这是让包正常工作的真正答案。

```
Bag(x => x.Rows, c =>
{
    c.Key(k =>
    {
        k.Column("RowCorrelationId");
        k.ForeignKey("FK_State_Row");
        k.NotNullable(true);
    });
    c.Fetch(CollectionFetchMode.Join);
    c.Lazy(CollectionLazy.NoLazy);
    c.Cascade(Cascade.All);
}, r => r.OneToMany()); 
```

的类类型`Rows`是`IList<Row>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:01:13.630

请看一下

[https://community.jboss.org/wiki/NHibernateUsersFAQ#NHibernate_is_deleting_my_entire_collection_and_recreating_it_instead_of_updating_the_table](https://community.jboss.org/wiki/NHibernateUsersFAQ#NHibernate_is_deleting_my_entire_collection_and_recreating_it_instead_of_updating_the_table)

# java - 测量 double 与 BigDecimal

> ID：10708452
> 
> 赞同：2
> 
> 时间：2012-05-22T19:07:13.783
> 
> 标签：java, double, bigdecimal

我编写了简单的基准测试来测试乘法双打与 BigDecimal 的性能。我的方法正确吗？我使用随机值是因为编译器多次优化了乘法常量（例如`Math.PI * Math.E`）。
但是：
- 我不知道在测试中生成随机数是否会破坏结果。
- 在测试中创建新`BigDecimal`对象也是如此。

我只想测试乘法的性能（不是构造函数使用的时间）。

如何做呢？

```
import java.math.*;
import java.util.*;

public class DoubleVsBigDecimal
{
    public static void main(String[] args)
    {
        Random rnd = new Random();
        long t1, t2, t3;
        double t;

        t1 = System.nanoTime();

        for(int i=0; i<1000000; i++)
        {
            double d1 = rnd.nextDouble();
            double d2 = rnd.nextDouble();
            t = d1 * d2;
        }

        t2 = System.nanoTime();

        for(int i=0; i<1000000; i++)
        {
            BigDecimal bd1 = BigDecimal.valueOf(rnd.nextDouble());
            BigDecimal bd2 = BigDecimal.valueOf(rnd.nextDouble());
            bd1.multiply(bd2);
        }

        t3 = System.nanoTime();

        System.out.println(String.format("%f",(t2-t1)/1e9));
        System.out.println(String.format("%f",(t3-t2)/1e9));
        System.out.println(String.format("%f",(double)(t3-t2)/(double)(t2-t1)));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:15:32.383

您不仅在为乘法运算计时，还在为其他事情计时。

您需要执行以下操作：

```
 long time = 0; 
    for(int i=0; i<1000000; i++) {
        double d1 = rnd.nextDouble();
        double d2 = rnd.nextDouble();
        long start = System.nanoTime();
        t = d1 * d2;
        long end = System.nanoTime();
        time += (end-start)
    }
    long meantime = time / 1000000; 
```

然后可能也会计算标准误差。此外，您可能需要在开始之前先对 jvm 进行一些计算，否则您将在开始时获得一些较高的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:21:52.250

Java 中的基准测试*真的很奇怪。* 例如，JVM 实际上不会完全优化一段代码，直到它已经运行了很多次——但是在优化之后进行测量会更公平，因为任何生产系统都会多次调用这个方法。

Java 基准测试还有很多其他问题。避免它们的最简单方法可能是使用由专家构建的 Java 基准测试工具，例如[Caliper](http://caliper.googlecode.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:43:45.180

您可以预先生成两个包含 1000 个双精度数/BigDecimals 的集合，并在 2 个嵌套循环中将每个与每个相乘：

```
public static void main(String[] args)
{
    Random rnd = new Random();
    List <Double> dl = new ArrayList <Double> ();
    List <BigDecimal> bdl = new ArrayList <BigDecimal> ();

    for(int i=0; i<1000; i++)
    {
        double d = rnd.nextDouble();
        dl.add (d);
        bdl.add (new BigDecimal (d));
    }

    long t1 = System.nanoTime();
    double t;
    for (double d1 : dl)
            for (double d2 : dl)
                t = d1 * d2;

    long t2 = System.nanoTime();

    for (BigDecimal b1 : bdl)
        for (BigDecimal b2 : bdl)
                b1.multiply (b2);

    long t3 = System.nanoTime();

    System.out.println (String.format ("%f", (t2 - t1) / 1e9));
    System.out.println (String.format ("%f", (t3 - t2) / 1e9));
    System.out.println (String.format ("%f", (double) (t3 - t2) / (double) (t2 - t1)));
} 
```

重复时，第一个代码会产生像这样的非常稳定的值：

```
0,186755
10,970243
58,741445 
```

我的代码有不同的值，但也很稳定：

```
0,077177
1,112490
14,414710 
```

关系的差异是1：4，这几乎是。没有关系 BigDecimal:double 那么多，但很好 ---

（i386-32、客户端模式、JRE-1.6、linux、oracle、2Ghz Centrino 单核）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T20:08:27.963

我强烈推荐这篇文章作为基准测试的介绍：

[http://www.ibm.com/developerworks/java/library/j-benchmark1/index.html](http://www.ibm.com/developerworks/java/library/j-benchmark1/index.html)

# google-drive-api - 使用 .net google drive api 迭代 Google Drive 上的文件夹

> ID：10708456
> 
> 赞同：1
> 
> 时间：2012-05-22T19:07:29.490
> 
> 标签：google-drive-api

我将 C# 用于 google drive api (.net google api)。我需要迭代我的谷歌驱动器上的文件夹？我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:27:48.310

您可以使用 Documents List API 在 .NET 中列出所有 Google Drive 文件夹，这是一个完整的片段，展示了如何在 C# 中执行此操作：

[https://developers.google.com/google-apps/documents-list/#retrieving_a_list_of_collections](https://developers.google.com/google-apps/documents-list/#retrieving_a_list_of_collections)

如果您的目标是迭代 SkyDrive 文件夹，那么 Google Drive SDK 不会帮助您，我猜 SkyDrive 有一个您可以使用的 API。

# c# - Simulating mouse wheel without move the mouse

> ID：10708458
> 
> 赞同：0
> 
> 时间：2012-05-22T19:07:45.743
> 
> 标签：c#, winapi

I'm trying to simulate the mouse wheel up/down using the `PostMessage()`

```
PostMessage(Handle, Msg, wParam, lParam);
PostMessage(Handle, 0x20A, 0xFF880000, lpara); 
```

These values I got using Spy++, the lparam is created using the X Y coordinate.

So, here is my problem... When I try to simulate it in a window that I can scroll up/down, it only works if I move the mouse in the position of the scroll, the window doesn't need to be at the top/in focus, but the mouse must be at that position.

But the problem is that I need to simulate it without move the cursor itself, maybe with a "fake" movement or whatever.

Someone knows how to do that without move the mouse?

# objective-c - 如何在目标 c 中捕获 exc_arithmetic

> ID：10708461
> 
> 赞同：1
> 
> 时间：2012-05-22T19:08:01.367
> 
> 标签：objective-c

我试图在我的代码中捕捉除以 0 算术异常，但看起来 NSException 没有捕捉到它并且程序以消息`exc_arthimetic`错误终止。捕获异常的方法是什么

```
 @try {

         int k;

         printf("please enter k value \n");
         scanf("%i",&k);

         int j=1;

         // testing division 1/0 condition
         int i=j/k;
         NSLog(@" value of i= %i",i);
     }

     @catch (NSException *exception) {
         NSLog(@"exception is = %@  reason is %@",[exception name],[exception reason]);
     }
     @finally {
         NSLog(@"inside finally");
     }

     NSLog(@" last line"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:13:57.057

# bash - Cygwin .bashrc PATH 获取重复条目

> ID：10708463
> 
> 赞同：0
> 
> 时间：2012-05-22T19:08:11.240
> 
> 标签：bash, path, cygwin

我在我的 cygwin $HOME/.bashrc 中设置了以下变量

```
PATH=/bin:/usr/sbin:"/cygdrive/c/Program Files/Java/jdk1.6.0_26/bin":$PATH 
```

问题是当我登录并执行 .bashrc 时，我开始重复如下：

```
Dragos@dragos ~
$ echo $PATH | tr ':' '\n'
/bin
/usr/sbin
/cygdrive/c/Program Files/Java/jdk1.6.0_26/bin
/bin
/usr/sbin
/cygdrive/c/Program Files/Java/jdk1.6.0_26/bin
/usr/local/bin
/usr/bin
/cygdrive/c/WINDOWS
/cygdrive/c/WINDOWS/system32
/cygdrive/c/WINDOWS/System32/Wbem
/cygdrive/c/curl
/
/cygdrive/c/gnupg
/cygdrive/c/Progra~1/cvsnt
/cygdrive/c/Progra~1/GNU/WinCvs 2.0
/cygdrive/c/Progra~1/Notepad++
/cygdrive/c/Progra~1/PuTTY
/cygdrive/c/Progra~1/WinSCP
/cygdrive/c/Python26
/cygdrive/c/Python26/Lib/site-packages/PyQt4/bin
/cygdrive/c/Python26/Scripts
/usr/bin
/usr/lib/lapack 
```

有谁知道这是什么原因？

这是我的`.bashrc`

```
$ cat ~/.bashrc    
# base-files version 3.7-1

# To pick up the latest recommended .bashrc content,
# look in /etc/defaults/etc/skel/.bashrc

# Modifying /etc/skel/.bashrc directly will prevent
# setup from updating it.

# The copy in your home directory (~/.bashrc) is yours, please
# feel free to customise it to create a shell
# environment to your liking.  If you feel a change
# would be benificial to all, please feel free to send
# a patch to the cygwin mailing list.

# User dependent .bashrc file

# Shell Options
# #############

# See man bash for more options...

# Don't wait for job termination notification
# set -o notify

# Don't use ^D to exit
# set -o ignoreeof

# Use case-insensitive filename globbing
# shopt -s nocaseglob

# Make bash append rather than overwrite the history on disk
# shopt -s histappend

# When changing directory small typos can be ignored by bash
# for example, cd /vr/lgo/apaache would find /var/log/apache
# shopt -s cdspell

# Completion options
# ##################

# These completion tuning parameters change the default behavior of bash_completion:

# Define to access remotely checked-out files over passwordless ssh for CVS
# COMP_CVS_REMOTE=1

# Define to avoid stripping description in --option=description of './configure --help'
# COMP_CONFIGURE_HINTS=1

# Define to avoid flattening internal contents of tar files
# COMP_TAR_INTERNAL_PATHS=1

# If this shell is interactive, turn on programmable completion enhancements.
# Any completions you add in ~/.bash_completion are sourced last.
# case $- in
#   *i*) [[ -f /etc/bash_completion ]] && . /etc/bash_completion ;;
# esac

# History Options
# ###############

# Don't put duplicate lines in the history.
# export HISTCONTROL="ignoredups"

# Ignore some controlling instructions
# export HISTIGNORE="[   ]*:&:bg:fg:exit"

# Whenever displaying the prompt, write the previous line to disk
# export PROMPT_COMMAND="history -a"

# Aliases
# #######

# Some example alias instructions
# If these are enabled they will be used instead of any instructions
# they may mask.  For example, alias rm='rm -i' will mask the rm
# application.  To override the alias instruction use a \ before, ie
# \rm will call the real rm not the alias.

# Interactive operation...
# alias rm='rm -i'
# alias cp='cp -i'
# alias mv='mv -i'

# Default to human readable figures
# alias df='df -h'
# alias du='du -h'

# Misc :)
# alias less='less -r'                          # raw control characters
# alias whence='type -a'                        # where, of a sort
# alias grep='grep --color'                     # show differences in colour

# Some shortcuts for different directory listings
alias ls='ls -hF --color=tty'                 # classify files in colour
# alias dir='ls --color=auto --format=vertical'
# alias vdir='ls --color=auto --format=long'
# alias ll='ls -l'                              # long list
# alias la='ls -A'                              # all but . and ..
# alias l='ls -CF'                              #

# Functions
# #########

# Some example functions
# function settitle() { echo -ne "\e]2;$@\a\e]1;$@\a"; }

# Notepad++ function
# Pass in a UNIX path
# Starts notepad++ given a UNIX path argument
function notepadpp() { 
  local notepadUnixPath="/cygdrive/c/Program Files/Notepad++/notepad++.exe"
  #local notepadArgPath=$(eval $(echo cygpath -w -a "$*"))
  local notepadArgPath=`cygpath -w -a "$*"`
  "$notepadUnixPath" -multiInst "$notepadArgPath" &
}

alias notepad++=notepadpp

# Explorer function
# Pass in a UNIX path
# Starts explorer given a UNIX path argument
function explorer() { 
  local explorerArgPath=`cygpath -w -a "$*"`
  cmd /C start "" "$explorerArgPath" &
}

alias vi=vim

# Change filename starting with prefix string to another prefix string
alias mvprefix='$HOME/mvprefix.sh'

# Change filename ending with suffix string to another suffix string
alias mvsuffix='$HOME/mvsuffix.sh'

# Change filename ending with suffix string to a string prefixed with todays date
alias todaysuffix='$HOME/todaysuffix.sh'

# Generate secure passwords by default 
alias pwgen='pwgen -y -c -s -n'

export INPUTRC=$HOME/.inputrc
export EDITOR=vim
export PATH=/bin:/usr/sbin:"/cygdrive/c/Program Files/Java/jdk1.6.0_26/bin":$PATH

# Overwrite DOS env variable APPDATA with our own for installing perl CPANPLUS
export APPDATA=$HOME 
```

这是我的`.bash_profile`

```
$ cat .bash_profile
# base-files version 3.7-1

# To pick up the latest recommended .bash_profile content,
# look in /etc/defaults/etc/skel/.bash_profile

# Modifying /etc/skel/.bash_profile directly will prevent
# setup from updating it.

# The copy in your home directory (~/.bash_profile) is yours, please
# feel free to customise it to create a shell
# environment to your liking.  If you feel a change
# would be benifitial to all, please feel free to send
# a patch to the cygwin mailing list.

# ~/.bash_profile: executed by bash for login shells.

# source the system wide bashrc if it exists
if [ -e /etc/bash.bashrc ] ; then
  source /etc/bash.bashrc
fi

# source the users bashrc if it exists
if [ -e "${HOME}/.bashrc" ] ; then
  source "${HOME}/.bashrc"
fi

# Set PATH so it includes user's private bin if it exists
# if [ -d "${HOME}/bin" ] ; then
#   PATH=${HOME}/bin:${PATH}
# fi

# Set MANPATH so it includes users' private man if it exists
# if [ -d "${HOME}/man" ]; then
#   MANPATH=${HOME}/man:${MANPATH}
# fi

# Set INFOPATH so it includes users' private info if it exists
# if [ -d "${HOME}/info" ]; then
#   INFOPATH=${HOME}/info:${INFOPATH}
# fi 
```

这是我的`/etc/bash.bashrc`

```
$ cat /etc/bash.bashrc
# To the extent possible under law, the author(s) have dedicated all
# copyright and related and neighboring rights to this software to the
# public domain worldwide. This software is distributed without any warranty.
# You should have received a copy of the CC0 Public Domain Dedication along
# with this software.
# If not, see <http://creativecommons.org/publicdomain/zero/1.0/>.

# base-files version 4.1-1

# /etc/bash.bashrc: executed by bash(1) for interactive shells.

# The latest version as installed by the Cygwin Setup program can
# always be found at /etc/defaults/etc/bash.bashrc

# Modifying /etc/bash.bashrc directly will prevent
# setup from updating it.

# System-wide bashrc file

# Check that we haven't already been sourced.
([[ -z ${CYG_SYS_BASHRC} ]] && CYG_SYS_BASHRC="1") || return

# If not running interactively, don't do anything
[[ "$-" != *i* ]] && return

# Set a default prompt of: user@host and current_directory
PS1='\[\e]0;\w\a\]\n\[\e[32m\]\u@\h \[\e[33m\]\w\[\e[0m\]\n\$ '

# Uncomment to use the terminal colours set in DIR_COLORS
# eval "$(dircolors -b /etc/DIR_COLORS)" 
```

`PATH=`除了上面的 set 命令，我不会在我的 $HOME/.bashrc 中修改 $PATH 。

如果我只在 $PATH 前面添加一个路径，那也会被重复：

```
PATH="/cygdrive/c/Program Files/Java/jdk1.6.0_26/bin":$PATH 
```

结果是：

```
Dragos@dragos ~
$ echo $PATH | tr ':' '\n'
/cygdrive/c/Program Files/Java/jdk1.6.0_26/bin
/cygdrive/c/Program Files/Java/jdk1.6.0_26/bin
/usr/local/bin
/usr/bin
/cygdrive/c/WINDOWS
/cygdrive/c/WINDOWS/system32
/cygdrive/c/WINDOWS/System32/Wbem
/cygdrive/c/curl
/
/cygdrive/c/gnupg
/cygdrive/c/Progra~1/cvsnt
/cygdrive/c/Progra~1/GNU/WinCvs 2.0
/cygdrive/c/Progra~1/Notepad++
/cygdrive/c/Progra~1/PuTTY
/cygdrive/c/Progra~1/WinSCP
/cygdrive/c/Python26
/cygdrive/c/Python26/Lib/site-packages/PyQt4/bin
/cygdrive/c/Python26/Scripts
/usr/bin
/usr/lib/lapack 
```

那么......为什么重复？

附录：

我发现我在我`C:\cygwin\Cygwin.bat`
的 bash 中执行了两次，原因是我有一个上下文菜单命令“在此处打开 Bash”，它传递了一个起始路径`C:\cygwin\Cygwin.bat`

这是我的`C:\cygwin\Cygwin.bat`

```
@echo off

C:

set PATH=%PATH%;C:\cygwin\bin

REM SHELL needed for any screen instances started from bash
set SHELL=/bin/bash
set HOME=C:\cygwin\home\Dragos
set HOMEDRIVE=C:
set HOMEPATH=\cygwin\home\Dragos

REM 

if not [%1]==[] (
  C:\cygwin\bin\cygpath %1 > tmpFile
  set /p startingpath= < tmpFile
  del tmpFile
)

if "%startingpath%"=="" start C:\cygwin\bin\mintty.exe --icon /Cygwin-Terminal.ico --size 140,50 --exec /bin/bash --login -c "exec /bin/bash -rcfile ~/.bashrc"
if not "%startingpath%"=="" start C:\cygwin\bin\mintty.exe --icon /Cygwin-Terminal.ico --size 140,50 --exec /bin/bash --login -c "cd '%startingpath%'; exec /bin/bash -rcfile ~/.bashrc"
exit 
```

附录：

发现我需要`--noprofile --norc`在调用 bash 时传递给 bash。
这是更新的`C:\cygwin\Cygwin.bat`

```
@echo off

C:

set PATH=%PATH%;C:\cygwin\bin

REM SHELL needed for any screen instances started from bash
set SHELL=/bin/bash
set HOME=C:\cygwin\home\Dragos
set HOMEDRIVE=C:
set HOMEPATH=\cygwin\home\Dragos

REM 

if not [%1]==[] (
  C:\cygwin\bin\cygpath %1 > tmpFile
  set /p startingpath= < tmpFile
  del tmpFile
)

if "%startingpath%"=="" start C:\cygwin\bin\mintty.exe --icon /Cygwin-Terminal.ico --size 140,50 --exec /bin/bash --login
if not "%startingpath%"=="" start C:\cygwin\bin\mintty.exe --icon /Cygwin-Terminal.ico --size 140,50 --exec /bin/bash --noprofile --norc --login -c "cd '%startingpath%'; exec /bin/bash -rcfile ~/.bashrc"

exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:11:50.383

我没有安装 Cygwin，也没有 Windows 机器，所以我不能给你很多细节。

看看该`man bash`页面是否可以帮助您。在普通的 BASH 中，`/etc/profile`, `/etc/bashrc`, `$HOME/.bash_profile`, `$HOME/.bashrc`, 有时`$HOME/.profile`都被读入，这取决于这是否是一个登录 shell。Cygwin 对目录中的每个文件都有自己的特殊版本`/etc`。但是，还有其他脚本会被调用并可能影响您的 Cygwin 环境。例如，有一些特殊的脚本可以导入 Windows 环境变量，包括`%PATH%`.

在 Cygwin 中，默认设置是包含 Windows`%PATH%`变量作为 Cygwin 路径的一部分。它实际上是所有 Windows 环境变量的一般导入（根据安装，`\`有时会转换为 a`/`并使用短目录名称）。

如果您为 Cygwin 命令行打开 xterm 窗口而不是标准 Windows 控制台窗口，您还必须检查*xserve*脚本（或其他任何名称），因为这也会将很多东西导入 Cygwin 环境。

我过去使用过 Cygwin，每次使用 Cygwin 时，我都会发现自己在追查这些确切的东西，以及其他一些问题：例如，默认的 Kornshell 加载环境脚本中有一个错误。我相信他们有一个文字“^G”而不是 Ctrl-G，或者它可能是另一个控制字符。我不记得了。我所知道的是，每次安装 Cygwin 环境时，我都会花大约一两个小时*来清理它。*我喜欢 Cygwin，但这可能会很痛苦。

对不起，我不能给你更具体的指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:52:04.973

只需将 设置`PATH`为您喜欢的任何内容（不引用`$PATH`）。你不应该相信`PATH`一些随机的系统管理员认为是好的`PATH`。在最后为您的 shell 提供的文件中执行此操作。

# php - 插入时如何从数据库中检索最后一个结果

> ID：10708466
> 
> 赞同：-1
> 
> 时间：2012-05-22T19:08:28.310
> 
> 标签：php, javascript, mysql, google-maps, gps

我想知道如何在javascript中制作某种事件，每次插入新数据时都会触发？

我需要这个，所以我可以在谷歌地图中使用实时跟踪。

例如，这是我在地理位置页面上找到的代码：

```
function scrollMap(position) 
{
// Scrolls the map so that it is centered at (position.coords.latitude,position.coords.longitude).
}
// Request repeated updates.
var watchId = navigator.geolocation.watchPosition(scrollMap);

 function buttonClickHandler() 
 {
 // Cancel the updates when the user clicks a button. 
 //I want to put my code in here so for example when I click button live tracking starts.

   navigator.geolocation.clearWatch(watchId);
 } 
```

这是我用来检索数据数组的代码：

```
function initialize() {
  var myLatLng = new google.maps.LatLng(0, 180);
  var myOptions = {
    zoom: 3,
    center: myLatLng,
    mapTypeId: google.maps.MapTypeId.TERRAIN
  };

  var map = new google.maps.Map(document.getElementById("map_canvas"),
      myOptions);
  var flightPlanCoordinates = [<?php echo implode(',', $coordinates) ?>];
  var flightPath = new google.maps.Polyline({
    path: flightPlanCoordinates,
    strokeColor: "#FF0000",
    strokeOpacity: 1.0,
    strokeWeight: 2
  });

  flightPath.setMap(map);
} 
```

每次将代码插入数据库时​​，如何使代码正常工作并获得最后一个结果？并在我的问题开始时提供的谷歌代码中的地图上显示它。

数据库是mysql，它有ID、纬度和经度。

编辑：

这是我的 PHP 代码，它从数据库中获取所有数据并将它们放入谷歌地图的数组中：

```
$coordinates  = array();
$result = dbMySql::Exec('SELECT Latitude,Longitude FROM data');
while ($row = mysqli_fetch_assoc($result))
   $coordinates[] = 'new google.maps.LatLng(' . $row['Latitude'] . ', ' . $row['Longitude'] . ')'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:27:10.367

最简单的解决方案是轮询您的服务器。询问在最后 X 分钟内创建的条目并添加新条目。

# sql-server - 未映射行的 SQL 视图

> ID：10708470
> 
> 赞同：1
> 
> 时间：2012-05-22T19:08:54.843
> 
> 标签：sql-server, sql-server-2008, sql-view

基本上我想弄清楚的是，说我有

表格1`tbl1`

`ID | Name`

和表2`tbl2`

`ID | Name`

然后我有一个映射表`mt`

`ID | tbl1ID | tbl2ID`

数据在这里并不重要，这些表格只是示例。

如何制作一个`view`将抓取所有`tbl1`未映射到的项目`mt`。

顺便说一句，我正在使用 Microsoft SQL-server 2008。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:10:45.663

```
CREATE VIEW v_unmapped
AS
SELECT  *
FROM    tbl1
WHERE   id NOT IN
        (
        SELECT  tbl1Id
        FROM    mt
        ) 
```

# facebook - 如何在美国只获得可播放的歌曲？

> ID：10708471
> 
> 赞同：1
> 
> 时间：2012-05-22T19:08:56.793
> 
> 标签：facebook, spotify

我正在使用 facebook api 开发一个 spotify 应用程序。

我有以下查询。

**我/music.listens?limit=5&util=1 周前**

或者

**[朋友 id]/music.listens?limit=5&util=1 周前**

当我从上述 api 获取曲目时，我会得到在美国无法播放的歌曲。是否有参数或方法可以获取仅在美国可播放的歌曲？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:41:53.997

不，您可以检索用户在任何音乐应用程序中收听的内容列表，但除非您与音乐提供者（例如 spotify、rdio）达成其他协议，否则无法知道其他用户是否可以收听到相同的歌曲。

编辑：根据 iKenndac 的回答，似乎有一个 Spotify API 可以按地区确定可玩性，但您无法从 Facebook 的 API 获取信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T20:27:42.823

您可以使用 Spotify [Web API](https://developer.spotify.com/technologies/web-api/)来查找区域可用性。

# ssl - 我可以只使用 makecert.exe 为 Windows Azure 创建自签名 SSL 证书吗？

> ID：10708473
> 
> 赞同：7
> 
> 时间：2012-05-22T19:08:59.743
> 
> 标签：ssl, azure, makecert

**背景**：我需要在 Windows Azure 上测试 WebRole 的 https 端点。为此，我需要上传自签名证书，将证书的指纹添加到 WebRole 的配置中，最后将端点与配置的证书相关联。

我使用创建了一个自签名证书`makecert.exe`，可通过 Visual Studio 命令提示符获得。我使用了以下命令：

```
makecert.exe -r -pe -n "CN=test.cloudapp.net" -sky exchange -ss my -len 2048 test.pfx 
```

命令成功，我可以将证书文件上传到 Windows Azure 托管服务。但是 WebRole 的部署失败并出现以下错误：

> 与 HTTPS 输入端点 Endpoint2 关联的指纹为 6AB... 的证书不包含私钥。

我必须从我的商店导出证书，并选择包含私钥并提供密码。如果我上传此导出的证书文件并使用其指纹，则部署成功。

我想创建一个包含私钥的证书文件，而无需先将证书保存到任何商店并从商店中导出。这可能使用`makecert.exe`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T20:10:50.327

要创建证书而不将其保存到任何商店，您需要使用**pvk2pfx.exe**（可通过 Visual Studio 命令提示符获得）。

它是这样工作的：

```
makecert.exe -sv CertKey.pvk -n "CN=My Azure Certificate" CertKey.cer
pvk2pfx.exe -pvk CertKey.pvk -spc CertKey.cer -pfx MyPFX.pfx -po yourPasswordHere 
```

运行 makecert.exe 将要求您输入私钥的密码。您需要为 pvk2pfx.exe 命令的 -po 参数输入该密码。

**最后，您将拥有一个名为MyPFX.pfx**的 pfx 文件（包含私钥）

# operating-system - 简而言之，BIOS 与 DOS

> ID：10708475
> 
> 赞同：1
> 
> 时间：2012-05-22T19:09:05.000
> 
> 标签：operating-system, dos, bios

**基本输入输出系统 [ BIOS** ] 和磁盘操作系统 [ **DOS** ]之间的主要区别是什么？

两者都是有中断的应用程序，我真的很困惑！

在否决我之前，我在谷歌上搜索了这个问题并没有找到答案，所以请回答我，因为我真的很关心学习差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:25:40.323

对于完整的初学者来说，DOS 是一个操作系统（如 windows、linux 等），但之前使用过（在 windows 计算机中使用命令提示符，您将了解它是如何使用的）。它安装在硬盘上并在系统启动后运行。

但是，当我们打开 PC 电源时，我们需要一些固件来检查 RAM、硬盘和所有其他组件是否就位、正常工作，并且该固件需要位于您的 ROM 上而不是硬盘上，以防万一意外移除硬盘，仍会执行此自检。

所以简而言之 => DOS = 操作系统
BIOS => 在加载实际操作系统（DOS/Windows 等）之前您的计算机执行的自检

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:14:15.557

维基百科无法告诉您的一切：[DOS](http://en.wikipedia.org/wiki/DOS)和[BIOS](http://en.wikipedia.org/wiki/BIOS) ...

# windows - 使用 ReadDirectoryChanges 时如何绕过 UAC？

> ID：10708476
> 
> 赞同：3
> 
> 时间：2012-05-22T19:09:16.590
> 
> 标签：windows, winapi, uac

我有一个应用程序需要通过`ReadDirectoryChangesW`. 但是，当 UAC 启用时，它不起作用。

所有 Windows API 调用都成功，但我没有收到任何更改的通知。

我可以通过单独监视根目录中的每个目录来解决此问题，但这是一个问题，因为如果目录太多，它可能会导致蓝屏。

是否有一种可接受的方法来绕过 UAC 并在整个主驱动器上接收文件更改通知？

相关的`CreateFile`和`ReadDirectoryChangesW`在下面。在它不起作用的情况下，`directory`是 C:\。如果我监视任何辅助驱动器（即 E:\、F:\、G:\），它会按预期工作。没有任何调用返回错误。

```
HANDLE fileHandle = CreateFileW(directory.c_str(), FILE_LIST_DIRECTORY, 
    FILE_SHARE_READ | FILE_SHARE_DELETE, NULL, OPEN_EXISTING, 
    FILE_FLAG_BACKUP_SEMANTICS | FILE_FLAG_OVERLAPPED, NULL);

BOOL success = ReadDirectoryChangesW(fileHandle, watched.buffer.data(),
    watched.buffer.size(), TRUE, 
    FILE_NOTIFY_CHANGE_FILE_NAME | FILE_NOTIFY_CHANGE_LAST_WRITE, 
    NULL, &watched.overlapped, NULL); 
```

有趣的是，.NET`System.IO.FileSystemWatcher` **确实**可以正常工作，它使用与我使用的完全相同的函数和参数，但它的行为正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:35:31.447

`ReadDirectoryChangesW`首先，使用API 运行提升的应用程序最好为您的应用程序创建一个清单文件并设置`requireAdministrator`为`requestedExecutionLevel`级别。[在这里](http://msdn.microsoft.com/en-us/library/bb756929.aspx)查看以供参考。

如果您正在使用它，请尝试`FILE_SHARE_WRITE`从`CreateFile`通话中删除。

另一种选择是让您的程序作为服务运行，我不确定这对您的需求有多适用。您可以发布一些关于如何获取文件句柄以及传递给什么的代码`ReadDirectoryChangesW`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T21:59:12.480

这是一些工作测试代码，以供将来参考。

```
#include <Windows.h>

#include <stdio.h>

int main(int argc, char ** argv)
{
    HANDLE filehandle;
    BYTE buffer[65536];
    DWORD dw;
    FILE_NOTIFY_INFORMATION * fni;
    OVERLAPPED overlapped = {0};

    overlapped.hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
    if (overlapped.hEvent == NULL)
    {
        printf("CreateEvent: %u\n", GetLastError());
        return 1;
    }

    filehandle = CreateFile(L"C:\\", 
        FILE_LIST_DIRECTORY, 
        FILE_SHARE_READ | FILE_SHARE_DELETE, 
        NULL, 
        OPEN_EXISTING, 
        FILE_FLAG_BACKUP_SEMANTICS | FILE_FLAG_OVERLAPPED, 
        NULL);

    if (filehandle == INVALID_HANDLE_VALUE)
    {
        printf("CreateFile: %u\n", GetLastError());
        return 1;
    }

    for (;;)
    {
        if (!ReadDirectoryChangesW(filehandle, buffer, sizeof(buffer),
            TRUE, 
            FILE_NOTIFY_CHANGE_FILE_NAME | FILE_NOTIFY_CHANGE_LAST_WRITE, 
            NULL, &overlapped, NULL))
        {
            printf("ReadDirectoryChangesW: %u\n", GetLastError());
            return 1;
        }

        printf("Queued OK.\n");

        if (!GetOverlappedResult(filehandle, &overlapped, &dw, TRUE))
        {
            printf("GetOverlappedResult: %u\n", GetLastError());
            return 1;
        }

        printf("%u bytes read.\n", dw);

        fni = (FILE_NOTIFY_INFORMATION *)buffer;

        for (;;)
        {
            printf("Next entry offset = %u\n", fni->NextEntryOffset);
            printf("Action = %u\n", fni->Action);
            printf("File name = %.*ws\n", 
                                  fni->FileNameLength / 2, 
                                  fni->FileName);

            if (fni->NextEntryOffset == 0) break;

            fni = (FILE_NOTIFY_INFORMATION *)
                               (((BYTE *)fni) + fni->NextEntryOffset);
        }
    }

    printf("All done\n");
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:51:12.053

您可以像这样自己调整进程的权限：

```
// enable the required privileges for this process

LPCTSTR arPrivelegeNames[] = {  SE_BACKUP_NAME,
                                SE_RESTORE_NAME,
                                SE_CHANGE_NOTIFY_NAME
                             };

for (int i=0; i<(sizeof(arPrivelegeNames)/sizeof(LPCTSTR)); ++i)
{
    CAutoGeneralHandle hToken;
    if (OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES, hToken.GetPointer()))
    {
        TOKEN_PRIVILEGES tp = { 1 };

        if (LookupPrivilegeValue(NULL, arPrivelegeNames[i],  &tp.Privileges[0].Luid))
        {
            tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;

            AdjustTokenPrivileges(hToken, FALSE, &tp, sizeof(tp), NULL, NULL);
        }
    }
} 
```

这也适用于非特权进程（又名普通用户进程）。

# java - 2D 网格导航可能的操作

> ID：10708477
> 
> 赞同：1
> 
> 时间：2012-05-22T19:09:18.570
> 
> 标签：java, grid, 2d, breadth-first-search

我有一个 2D 网格供机器人导航。我需要找到两点之间的最短路径，startNode 和goalNode。网格由anxn 多维数组表示。

机器人可能的动作（过渡）

*   上 [0,1]
*   向下 [0,-1]
*   左 [-1,0]
*   对 [1,0]

其中 [x,y]

如果它不超过多维数组边界，我将如何构造一个方法来返回上述操作之一？

```
getAction(x,y)
get potential action from transition
if valid action - in array bounds
return action 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:19:50.127

检查是否朝某个方向移动会让你出界。

所以它看起来像

```
String move()
   {

   if(y+1<n)//Can Move Up
   return "up";

   if(y-1>=0)//Can Move Down
   return "down";

   if(x+1<n)//Can Move Right
   return "right";

   if(x-1>=0)//Can Move Left
   return "left";

   return "can't move";

  } 
```

当然，这总是会尝试先向上移动，然后向下移动，然后向右移动，然后向左移动。因此，您可以更改此代码以满足您的需求。

# jquery - 从集合中删除元素后，为什么我的视图框不能正确调整大小？

> ID：10708481
> 
> 赞同：1
> 
> 时间：2012-05-22T19:09:23.987
> 
> 标签：jquery, svg, raphael, viewbox

这是一个有效的[jsFiddle](http://jsfiddle.net/25fYE/1/)示例。

基本上你输入一个数字并点击“添加”。将使用 Raphael 生成包含该数量框的行，并且视图框将调整大小以适应行。添加更多行，视图框将再次调整大小。这工作正常。

我的问题是，在创建框后，我在行尾添加了一个删除对象。单击它应该只是删除该行。这看起来工作正常，除了一旦我删除一行尝试添加一个新行将导致视图框随着控制台消息而缩小

```
Unexpected value 10 0 NaN NaN parsing viewBox attribute. 
```

我知道错误来自以下两行代码：

```
var sectionSize = section.getBBox();
paper.setViewBox(sectionSize.x, sectionSize.y, sectionSize.width, sectionSize.height, true); 
```

哪里`sectionSize.width`和`.height`是NaN，但我不知道为什么。我没有正确删除行吗？

完整代码：

```
$(window).load(function() {

    var paper = Raphael("container", 600, 500);
    var section = paper.set();
    var rowCount = 0;
    var boxSize = 15;
    var boxPadding = 5;
    var pathString = " m0,0 h" + boxSize + ", v" + boxSize + " h-" + boxSize + " v-" + boxSize + " z";

    $("#add-row").click(function() {
        var row = paper.set();

        for (var i = 0; i < $("#count").val(); i++) {
            var x = ((boxSize + boxPadding) * i) + (boxPadding * 2);
            var y = ((boxSize + boxPadding) * rowCount);

            var transformString = "t" + x + "," + y + ", s1,1,0,0 r0,0,0";

            var box = paper.path(pathString).transform(transformString);
            box.attr({
                fill: "red",
                stroke: "black",
                cursor: "pointer"
            });
            row.push(box);

            if (i == $("#count").val() - 1) {
                var del = paper.text(((box.getBBox().width + x) + boxPadding), ((box.getBBox().height / 2) + y), "x");
                del.click(function() {
                    row.remove();
                });

                row.push(del);
            }
        }

        rowCount++;
        section.push(row);

        // Resize ViewBox
        var sectionSize = section.getBBox();
        paper.setViewBox(sectionSize.x, sectionSize.y, sectionSize.width, sectionSize.height, true);

    });
}); 
```

HTML

```
<input type="text" id="count" value="3" />
<button id="add-row">Add</button>

<div id="container" style="border: 1px solid black;">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:00:02.590

显然我没有正确删除元素。在删除元素本身之前，我必须将其从`section`集合中删除，否则任何调用`getBBox`都会导致宽度和高度为 NaN。

```
del.click(function() {
  section.splice($.inArray(row, section), 1);
  row.remove();
}); 
```

# jquery - jquery sliddown隐藏第三级无序列表

> ID：10708485
> 
> 赞同：0
> 
> 时间：2012-05-22T19:09:35.017
> 
> 标签：jquery, html-lists

我有以下jQuery：

```
 <script type="text/javascript" src="./js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function()
    {  
     $(".indexSlideMenu1_Folder div").click(function()
     {
      $(this).removeClass('sliding');
      if ($(this).parent().find('ul').is(':hidden'))
      {                                     
      $(this).parent().find('ul').slideDown(); 
      }
      else
      {
      $(this).parent().find('ul').slideUp(); 
      }
     });  
    });
    </script> 
```

当页面首次加载时，列表仅显示视觉艺术。单击视觉艺术时，包括电影列表在内的整个列表会向下滑动。单击视觉艺术列表时，我试图隐藏电影列表。然后我将选择单击电影列表并将其向下滑动。

```
 <div id="indexSlideMenu1">
    <ul> 
    <li class="indexSlideMenu1_Folder"><div><a href="#">VISUAL ARTS</a></div>
     <ul style="display:none;"> 
      <li><a href="./index.php">(dè)Collage</a></li>
      <li><a href="">Drawing</a></li>
      <li><div><a href="#">Film</a></div><span><!-- empty --></span>
       <ul style="display:none;">
        <li><a href="./index.php">(dè)Collage</a></li>
        <li><a href="">Drawing</a></li>
        <li><a href="">Design</a></li>
        <li><a href="">Painting</a></li>
        <li><a href="">Photography</a></li>
      </ul>
     </li> 
     <li><a href="">Design</a></li>
     <li><a href="">Painting</a></li>
     <li><a href="">Photography</a></li>
     <li><a href="">Print Making</a></li>
     <li><a href="">Sculpture</a></li>
     <li><a href="">Street Art</a></li>
     </ul>
     </li>
     </ul>
     </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:58:40.287

像这样的东西怎么样：

```
$(".indexSlideMenu1_Folder div").click(function() {
    $(this).removeClass('sliding');
    if ($(this).parent().find('ul:first').is(':hidden')) {
        $(this).parent().find('ul:first').slideDown();
    }
    else {
        $(this).parent().find('ul').slideUp();
    }
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/4R9a8/)**。

# mysql - 如果添加了 header()，则没有 mysql 插入

> ID：10708487
> 
> 赞同：0
> 
> 时间：2012-05-22T19:09:36.213
> 
> 标签：mysql, forms, redirect, header, submit

我试图让我的表单提交，然后使用 header() 重定向。

只要我不包含 header('location: setup2.php'); MYSQL 更新就可以正常工作 在第 9 行。当我添加它时，重定向有效，但 MYSQL 没有更新。想法？

```
<?php
$link;
@mysql_select_db(stevensp_beattrack) or die( "Unable to select database");
$inst=$_POST['inst'];
$id=$_SESSION['user_id'];
if(isset($_POST['submit'])) {
  $query = "UPDATE users SET inst='$inst' WHERE id=$id";
  mysql_query($query);
  header('location: setup2.php'); //adding this line stops the update from working
  }
?>

<HTML>
<form action="<?php $_SERVER['PHP_SELF']; ?>" method="post">
 <select name="inst">
  <option value="None">Select a Specialty:</option>
  <option value="Voice">Voice</option>
  <option value="Guitar">Guitar</option>
 </select><br/><br/>
 <input type="submit" name="submit" value="Next"/>&nbsp;&nbsp;&nbsp;
</form>
</HTML> 
```

# delphi - 如何使 TFrame（及其上的所有内容）部分透明？

> ID：10708488
> 
> 赞同：10
> 
> 时间：2012-05-22T19:09:37.010
> 
> 标签：delphi, bitmap, transparency, delphi-xe

我有一个由 a 组成的对象`TFrame`，在它上面 a`TPanel`和在那个 a 上`TImage`。一个位图被分配给`TImage`包含一个钢琴卷。这个框架对象放在一个`TImage`，包含一个包含网格的图像。有关示例，请参见图像。

![在此处输入图像描述](../Images/d94d6f32783e9d15721c1ad726013c70.png)

问题：是否可以使框架部分透明，从而使包含网格（在主窗体上）的背景图像隐约可见？理想情况下，透明度的数量可以由用户设置。位图是 32 位深，但尝试 alpha 通道并没有帮助。面板不是绝对必要的。它用于在对象周围快速设置边框。我可以把它画在图像上。

**更新 1**添加了一个小代码示例。主机用垂直线绘制背景。第二个单元包含一个 TFrame 和一个在其上绘制水平线的 TImage。我想看到的是垂直线部分通过 TFrame 图像发光。

**更新 2**我在原始问题中没有指定的内容：TFrame 是更大应用程序的一部分并且独立运行。如果透明度问题可以由 TFrame 本身处理，那将有所帮助。

```
///////////////// Main unit, on mouse click draw lines and plot TFrame
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls,
  Unit2;

type
  TForm1 = class(TForm)
    Image1: TImage;
    procedure Image1MouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Image1MouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
var background: TBitmap;
    f: TFrame2;
    i, c: Int32;
begin
   background := TBitmap.Create;
   background.Height := Image1.Height;
   background.Width  := Image1.Width;
   background.Canvas.Pen.Color := clBlack;

   for i := 0 to 10 do
   begin
      c := i * background.Width div 10;
      background.Canvas.MoveTo (c, 0);
      background.Canvas.LineTo (c, background.Height);
   end;
   Image1.Picture.Assign (background);
   Application.ProcessMessages;

   f := TFrame2.Create (Self);
   f.Parent := Self;
   f.Top    := 10;
   f.Left   := 10;
   f.plot;
end;

end.

///////////////////Unit containing the TFrame
unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, ExtCtrls;

type
  TFrame2 = class(TFrame)
    Image1: TImage;

    procedure plot;
  end;

implementation

{$R *.dfm}

procedure TFrame2.plot;
var bitmap: TBitmap;
begin
   bitmap := TBitmap.Create;
   bitmap.Height := Image1.Height;
   bitmap.Width  := Image1.Width;
   bitmap.PixelFormat := pf32Bit;
   bitmap.Canvas.MoveTo (0, bitmap.Height div 2);
   bitmap.Canvas.LineTo (bitmap.Width, bitmap.Height div 2);
   Image1.Picture.Assign (bitmap);
end;

end. 
```

**更新 3**我曾希望会有一些消息或 API 调用会产生一个解决方案，即控件可以使其自身部分透明，就像 WMEraseBkGnd 消息为完全透明所做的那样。在他们的解决方案中，Sertac 和 NGLN 都指向使用 AlphaBlend 函数*模拟透明度。*此功能合并两个位图，因此需要了解背景图像。现在我的 TFrame 有一个额外的属性：`BackGround: TImage`由父控件分配。这给出了预期的结果（看到它工作真是太专业了:-)

RRUZ 指向 Graphics32 库。我所看到的它产生了惊人的结果，对我来说学习曲线太陡峭了。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T21:43:31.313

隐藏框架并使用`Frame.PaintTo`. 例如，如下所示：

```
unit Unit1;

interface

uses
  Windows, Classes, Graphics, Controls, Forms, Unit2, JPEG, ExtCtrls;

type
  TForm1 = class(TForm)
    Image1: TImage; //Align = alClient, Visible = False
    Frame21: TFrame2; //Visible = False
    procedure FormPaint(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure FormResize(Sender: TObject);
  private
    FBlendFunc: TBlendFunction;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TForm1 }

procedure TForm1.FormPaint(Sender: TObject);
var
  Bmp: TBitmap;
begin
  Bmp := TBitmap.Create;
  try
    Bmp.Width := Frame21.Width;
    Bmp.Height := Frame21.Height;
    Frame21.PaintTo(Bmp.Canvas, 0, 0);
    Canvas.StretchDraw(ClientRect, Image1.Picture.Graphic);
    with Frame21 do
      Windows.AlphaBlend(Canvas.Handle, Left, Top, Left + Width, Top + Height,
        Bmp.Canvas.Handle, 0, 0, Width, Height, FBlendFunc);
  finally
    Bmp.Free;
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FBlendFunc.BlendOp := AC_SRC_OVER;
  FBlendFunc.BlendFlags := 0;
  FBlendFunc.SourceConstantAlpha := 255 div 2;
  FBlendFunc.AlphaFormat := 0;
end;

procedure TForm1.FormResize(Sender: TObject);
begin
  Invalidate;
end;

end. 
```

框架单元：

```
unit Unit2;

interface

uses
  Windows, Classes, Controls, Forms, JPEG, ExtCtrls;

type
  TFrame2 = class(TFrame)
    Image1: TImage;  //Align = alClient
    Panel1: TPanel;  //Align = alClient, BevelWidth = 5
  end;

implementation

{$R *.dfm}

end. 
```

结果：

![部分透明框](../Images/6ed6885b2c5e91f9521d61ea8820c96a.png)

根据您的具体情况重写上述内容，理想情况下`TPaintBox`在主窗体上删除图像组件。但是当框架中唯一重要的元素是图像时，我也会停止使用它，并开始自己绘制所有内容。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T22:23:12.013

这是另一种解决方案，它将背景图像复制到顶部图像并`AlphaBlend`在其上放置位图，同时保留黑点的不透明度：

单元1：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, Unit2, ExtCtrls, ComCtrls, StdCtrls;

type
  TForm1 = class(TForm)
    Clip_View1: TClip_View;
    TrackBar1: TTrackBar;
    Label1: TLabel;
    procedure TrackBar1Change(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  TrackBar1.Min := 0;
  TrackBar1.Max := 255;
  TrackBar1.Position := 255;
end;

procedure TForm1.TrackBar1Change(Sender: TObject);
begin
  Label1.Caption := IntToStr(TrackBar1.Position);
  Clip_View1.Transparency := TrackBar1.Position;
end;

end. 
```

单元2：

```
unit Unit2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls;

type
  TClip_View = class(TFrame)
    Image1: TImage;
    Panel1: TPanel;
    Image2: TImage;
  protected
    procedure SetTransparency(Value: Byte);
  private
    FTopBmp: TBitmap;
    FTransparency: Byte;
  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
    property Transparency: Byte read FTransparency write SetTransparency;
  end;

implementation

{$R *.dfm}

{ TClip_View }

constructor TClip_View.Create(AOwner: TComponent);
begin
  inherited;
  Image1.Left := 0;
  Image1.Top := 0;
  Image1.Picture.LoadFromFile(ExtractFilePath(Application.ExeName) + '..\..\back.bmp');
  Image1.Picture.Bitmap.PixelFormat := pf32bit;
  Image1.Width := Image1.Picture.Bitmap.Width;
  Image1.Height := Image1.Picture.Bitmap.Height;

  FTopBmp := TBitmap.Create;
  FTopBmp.LoadFromFile(ExtractFilePath(Application.ExeName) + '..\..\top.bmp');
  FTopBmp.PixelFormat := pf32bit;
  Image2.SetBounds(1, 1, FTopBmp.Width, FTopBmp.Height);
  Panel1.SetBounds(20, 20, Image2.Width + 2, Image2.Height + 2);
  Image2.Picture.Bitmap.SetSize(Image2.Width, Image2.Height);
  Image2.Picture.Bitmap.Canvas.Draw(0, 0, FTopBmp);
end;

destructor TClip_View.Destroy;
begin
  FTopBmp.Free;
  inherited;
end;

procedure TClip_View.SetTransparency(Value: Byte);
var
  Bmp: TBitmap;
  R: TRect;
  X, Y: Integer;
  Pixel: PRGBQuad;
  BlendFunction: TBlendFunction;
begin
  if Value <> FTransparency then begin
    FTransparency := Value;
    R := Image2.BoundsRect;
    OffsetRect(R, Panel1.Left, + Panel1.Top);
    Image2.Picture.Bitmap.Canvas.CopyRect(Image2.ClientRect,
                                          Image1.Picture.Bitmap.Canvas, R);

    Bmp := TBitmap.Create;
    Bmp.SetSize(FTopBmp.Width, FTopBmp.Height);
    Bmp.PixelFormat := pf32bit;
    Bmp.Assign(FTopBmp);
    try
      for Y := 0 to Bmp.Height - 1 do begin
        Pixel := Bmp.ScanLine[Y];
        for X := 0 to Bmp.Width - 1 do begin
          if (Pixel.rgbBlue <> 0) and (Pixel.rgbGreen <> 0) and
              (Pixel.rgbRed <> 0) then begin
            Pixel.rgbBlue := MulDiv(Pixel.rgbBlue, Value, $FF);
            Pixel.rgbGreen := MulDiv(Pixel.rgbGreen, Value, $FF);
            Pixel.rgbRed := MulDiv(Pixel.rgbRed, Value, $FF);
            Pixel.rgbReserved := Value;
          end else                      // don't touch black pixels
            Pixel.rgbReserved := $FF;
          Inc(Pixel);
        end;
      end;

      BlendFunction.BlendOp := AC_SRC_OVER;
      BlendFunction.BlendFlags := 0;
      BlendFunction.SourceConstantAlpha := 255;
      BlendFunction.AlphaFormat := AC_SRC_ALPHA;
      AlphaBlend(Image2.Picture.Bitmap.Canvas.Handle,
          0, 0, Image2.Picture.Bitmap.Width, Image2.Picture.Bitmap.Height,
          Bmp.Canvas.Handle, 0, 0, Bmp.Width, Bmp.Height,
          BlendFunction);
    finally
      Bmp.Free;
    end;
  end;
end;

end. 
```

在启动时：
![在此处输入图像描述](../Images/d6fd11c30922bcb748095256e7796583.png)
应用透明度：
![在此处输入图像描述](../Images/62108b104a4849c3ae1bd56ffcbed060.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T23:20:31.517

我会用 a`TPaintBox`代替。在这种`OnPaint`情况下，首先绘制您的网格，然后在顶部混合您的滚动图像。根本不需要使用任何`TImage`, `TPanel`, 或`TFrame`组件。

# c# - IComparable IgnoreCase

> ID：10708490
> 
> 赞同：0
> 
> 时间：2012-05-22T19:09:44.983
> 
> 标签：c#, icomparable

我正在编写一个函数来比较 IComparable 类型的 2 个值，如果不相等则抛出。基本上，重新制作断言。是的，我知道我正在重新发明轮子。

```
 public static void IsEqual<T>(T Value1, T Value2) where T : IComparable<T>
    {
        if (0 != Value1.CompareTo(Value2))
        {
            throw new ApplicationException("Fail");
        }
    } 
```

工作正常，除了字符串，我希望忽略大小写的选项。“AA”与“AA”

我想在 T 是字符串时专门重写此方法，因此我可以使用 String.Compare 并忽略大小写。拥有另一个参数也很酷，因此用户可以指定是否应忽略字符串（尽管，这对于其他类型（如 int）没有用，因此看起来有点像一个令人困惑/糟糕的设计。我愿意接受这里的建议）。

有没有好的方法来做到这一点？我也愿意更改为与 IComparable 不同的类型，最初认为这是该工作的最佳界面，但现在意识到我可能错了。

```
where T : IComparable<T> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:25:01.247

您可以创建另一个函数，专门用于字符串。

```
public static void IsEqual(string value1, string value2) 
{
  if (string.Compare(value1, value2, true) != 0)
    throw new ApplicationException("Fail for strings");
} 
```

然后如果你要调用`IsEqual(1, 1)`你的泛型重载将被调用，但如果你调用`IsEqual("A", "a")`字符串重载将被调用。然后，如果需要，您可以简单地为字符串重载添加另一个可选参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:26:59.823

你可以试试：

```
public static void IsEqual<T>(T Value1, T Value2) where T : IComparable<T>
    {
        if (typeof(T) == typeof(String))
        {
            if (String.Compare(Value1.ToString(), Value2.ToString(), true) != 0)
            {
                throw new ApplicationException("Fail");
            }
        }
        else if (0 != Value1.CompareTo(Value2))
        {
            throw new ApplicationException("Fail");
        }
    } 
```

# grails - grails 抽象域类：快速简单的脚手架方法，使域的列表视图正确链接

> ID：10708492
> 
> 赞同：0
> 
> 时间：2012-05-22T19:09:53.387
> 
> 标签：grails, abstract-class

我正在开发一个 Grails 应用程序，其中一些子域类扩展了一个基本抽象域类。我还有一个包含许多抽象域类的父域类。当您为父级运行“grails generate-all”然后创建一个带有一堆子级的父级时，列表视图中的链接指向没有控制器或视图的抽象域类。让这种观点发挥作用的最简单方法是什么？如果问题有点模糊，下面是一些伪代码，以帮助使事情更清楚。

领域类

```
abstract class Automobile{
    String description
}

class Car extends Automobile{}

class Truck extends Automobile{}

class Dealership{
   static hasMany = [automobiles:Automobile]
} 
```

用汽车和卡车创建经销商

```
def car = new Car(description:"Toyota Camry").save()
def truck = new Truck(description : "Toyota Tacoma").save()

def dealership = new Dealership()
dealership.addToAutomobiles(car)
dealership.addToAutomobiles(truck)
dealership.save() 
```

为 Dealership 生成的 show.gsp 将如下所示：

```
<htm>
 <table>
  <tr>
    <th>Id</th>
    <td>${dealershipInstance.id}</td>
  </tr>
  <tr>
    <th>Automobiles</th>
    <td>
      <ul>
        <g:each in="${dealershipInstance.automobiles}" status="i" var="automobileInstance">
          <li><g:link action="show" id="${automobileInstance.id}">${automobileInstance.description}</g:link></li>
        </g:each>
      </ul>
    </td>
  </tr>
 </table>
</html> 
```

问题在于与汽车实例的链接，因为基础抽象类汽车没有自己的视图。因此“显示”操作返回 404。在这种情况下，链接到适当的域类的最佳方式是什么？可能有一个简单的方法来解决这个问题，我只是还没有找到它。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T01:18:37.150

谢谢克罗托。您的问题和回答使我找到了与您类似的解决方案。不过，您不必将类名属性添加到您的 Domain 类。它已经在那里了。

使用 class.simpleName 来获取您需要的内容。

例如：

```
<g:link controller="${p.class.simpleName}" action="show" id="${p.id}">${p.description}</g:link> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:09:57.557

为了避免在我的 gsp 中编写 groovy 或 java 代码，我添加了一个带有类名的字符串变量，以便在 gsp 中轻松引用。

```
<g:link controller="${p.classname}" action="show" id="${p.id}">${p.description} ${p?.classname}</g:link> 
```

# c# - 在 C# 中，如何像枚举一样使用结构？

> ID：10708493
> 
> 赞同：3
> 
> 时间：2012-05-22T19:10:01.267
> 
> 标签：c#

我有一个我想像枚举一样使用的结构：

```
public struct SQLDS_statementTypes
{
    public static string Select = "Select", 
        Update = "Update", Insert = "Insert", Delete = "Delete";
} 
```

但它会抛出一个错误： **“运算符'=='不能应用于'SQLDS_statementTypes'和'string'类型的操作数”**在此语句中：

```
if (statement == SQLDS_statementTypes.Update) 
```

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:16:06.020

有人正在寻找一些看起来或多或少的东西你正在寻找一段时间（我无法找到链接），我当时写了这个。您可能希望更改类名以更符合您的要求。我希望添加/删除值的配置简单明了，如果不是我可以详细说明。

```
public struct Group
{
    #region Code that is to be configured
    public static readonly Group Alpha = new Group("Group Alpha");
    public static readonly Group Beta = new Group("Group Beta");
    public static readonly Group Invalid = new Group("N/A");

    public static IEnumerable<Group> AllGroups
    {
        get
        {
            yield return Alpha;
            yield return Beta;
            yield return Invalid;
            //...
            //add a yield return for all instances here.
        }
    }

    #endregion
    private string value;

    /// <summary>
    /// default constructor
    /// </summary>
    //private Group()
    //{
    //    //you can make this default value whatever you want.  null is another option I considered, but you 
    //    //shouldn't have this me anything that doesn't exist as one of the options defined at the top of 
    //    //the page.
    //    value = "N/A";
    //}
    /// <summary>
    /// primary constructor
    /// </summary>
    /// <param name="value">The string value that this is a wrapper for</param>
    private Group(string value)
    {
        this.value = value;
    }

    /// <summary>
    /// Compares the Group to another group, or to a string value.
    /// </summary>
    /// <param name="obj"></param>
    /// <returns></returns>
    public override bool Equals(object obj)
    {
        if (obj is Group)
        {
            return this.value.Equals(((Group)obj).value);
        }

        string otherString = obj as string;
        if (otherString != null)
        {
            return this.value.Equals(otherString);
        }

        throw new ArgumentException("obj is neither a Group nor a String");
    }

    public override int GetHashCode()
    {
        return value.GetHashCode();
    }

    /// <summary>
    /// returns the internal string that this is a wrapper for.
    /// </summary>
    /// <param name="group"></param>
    /// <returns></returns>
    public static implicit operator string(Group group)
    {
        return group.value;
    }

    /// <summary>
    /// Parses a string and returns an instance that corresponds to it.
    /// </summary>
    /// <param name="input"></param>
    /// <returns></returns>
    public static Group Parse(string input)
    {
        return AllGroups.Where(item => item.value == input).FirstOrDefault();
    }

    /// <summary>
    /// Syntatic sugar for the Parse method.
    /// </summary>
    /// <param name="other"></param>
    /// <returns></returns>
    public static explicit operator Group(string other)
    {
        return Parse(other);
    }

    public override string ToString()
    {
        return value;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:15:17.723

你不能。如果你想做这样的字符串比较，为什么不使用带有公共成员的静态类呢？

```
static class StatementTypes
{
    public static Select
    {
        get { return "Select"; }
    }
} 
```

然后你可以在比较中使用 StatementTypes.Select 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T19:12:27.037

你为什么不使用常规枚举？[http://msdn.microsoft.com/en-us/library/sbbt4032.aspx](http://msdn.microsoft.com/en-us/library/sbbt4032.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:13:03.330

错误是正确的，我认为它（从错误中）`statement`是 SQLDS_statementTypes 类型，但 SQLDS_statementTypes.Update 是 type `string`，因此您试图将结构与字符串进行比较，默认情况下这对 C# 没有意义。

Make `statement`of type`string`如果你真的想这样做，它会编译，但我不确定你为什么不`enum`首先使用常规。

您是否正在尝试获取`string`枚举的值？默认情况下，C# 已经这样做了：

```
public enum Coordinates
{
    Cartesian,
    Polar
}

...

// x will contain the string "Cartesian"
var x = Coordinates.Cartesian.ToString(); 
```

# c# - 将参数从gridview传递到sqldatasource错误

> ID：10708499
> 
> 赞同：0
> 
> 时间：2012-05-22T19:10:10.097
> 
> 标签：c#, asp.net, gridview, drop-down-menu, parameter-passing

我正在使用带有编辑/删除功能的gridview。当用户单击“编辑”时，我需要将一个列 (100mPLot) 中的值传递给将填充另一列 (SubPlot) 的下拉列表的数据源。这就是我所拥有的：

```
<asp:BoundField DataField="100mPlot" HeaderText="100m plot" 
     SortExpression="100mPlot" ReadOnly="True" />
<asp:TemplateField HeaderText="SubPlot" SortExpression="SubPlot">
    <EditItemTemplate>                            
        <asp:DropDownList ID="DropDownList1" runat="server" 
            DataSourceID="dsSubPlotNames" 
            DataTextField="SiteName" DataValueField="SiteID" 
            SelectedValue='<%# Bind("SiteID") %>'
        >
        </asp:DropDownList>
        <asp:SqlDataSource ID="dsSubPlotNames" runat="server" 
            ConnectionString="<%$ ConnectionStrings:WERCMTX %>" SelectCommand='exec [339_PPM].usp_SubPlotNames_Select null, @100mPlotName;'
            CancelSelectOnNullParameter="False">                                
            <SelectParameters>
                <asp:ControlParameter ControlID="GridView1" DefaultValue='<%# Eval("100mPlot") '
                    Name="100mPlotName" PropertyName="SelectedValue" />
             </SelectParameters>
         </asp:SqlDataSource>
     </EditItemTemplate>
          <ItemTemplate>
              <asp:Label ID="Label3" runat="server" Text='<%# Bind("SubPlot") %>'></asp:Label>
     </ItemTemplate>                        
 </asp:TemplateField> 
```

不幸的是，我在 Eval("100mPlot") 中遇到了这个错误：

> 只有具有 DataBinding 事件的对象才支持数据绑定表达式。System.Web.UI.WebControls.ControlParameter 没有 DataBinding 事件。

我该如何解决？谢谢，

编辑：

在创建包含前一列值的隐藏标签标记后，我将其移至代码后面并在 RowDataBound 中处理它。

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
     if (e.Row.RowType == DataControlRowType.DataRow && (e.Row.RowState & DataControlRowState.Edit) == DataControlRowState.Edit)
     { 
         Label lbl100mPlot = (Label)e.Row.FindControl("lbl100mPlot");
         SqlDataSource dsPlotNames = (SqlDataSource)e.Row.FindControl("dsSubPlotNames");
         dsPlotNames.SelectParameters.Clear();
         dsPlotNames.SelectParameters.Add("100mPlotSiteID", null);
         dsPlotNames.SelectParameters.Add("100mPlotName", lbl100mPlot.Text);               
    }
} 
```

我的下一个问题是这个错误：

> Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。
> 
> 异常详细信息：System.InvalidOperationException：Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。
> 
> 源错误：
> 
> [没有相关的源代码行]

我不确定是什么原因造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:25:55.520

我不认为你可以这样做。您可以在后面的代码中处理 RowEditing 事件并手动调整 SqlDataSource 以显示正确的数据。此外，将 SqlDataSoruce 移出网格。

# objective-c - 在 iOS 中，NSURL 或 NSXML 是否跨越一个新线程？

> ID：10708500
> 
> 赞同：0
> 
> 时间：2012-05-22T19:10:11.007
> 
> 标签：objective-c, ios, xml, xcode, nsurl

我有一个进度如下的程序。我调用了一个名为`getCharacteristics`. 此方法通过 NSURL 连接（所有网络代码在另一个文件中完成）连接到远程服务器，并且当它收到响应时，它会回调原始类的方法。然后这个原始类解析数据 (xml) 并将其内容存储为地图。

我遇到的问题是，似乎在这个事务的某个地方产生了另一个线程。

这是显示我在做什么的示例代码：

```
@property map

- (void) aMethod
{
    [[WebService getSingleton] callWebService: andReportBackTo: self]
    Print "Ready to Return"
    return map;
}
- (void) methodThatIsReportedBackToAfterWebServiceRecievesResponse
{
    //Parse data and store in map
    Print "Done Parsing"
} 
```

我遇到的问题是地图在完全创建之前被返回。此外，在“完成解析”之前打印“准备返回”，这向我表明有多个线程在工作。我对吗？如果是这样，一个简单的锁是让它工作的最好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:41:35.337

如果您告诉它异步执行，NSURLConnection 将在另一个线程中执行。

在我看来，处理这个问题的最好方法是编写你自己的委托协议，并在你下载并解析数据后使用委托返回你的地图。

您可以使用 NSURLConnection 同步检索数据，但您可能会强制用户等待较长时间，尤其是在发生连接超时时。我会避免这种方法。

# jquery - jQuery - 使用 maxlength 迭代字段元素

> ID：10708501
> 
> 赞同：0
> 
> 时间：2012-05-22T19:10:14.777
> 
> 标签：jquery

我在一个页面上有**几个**表单元素，其属性为 maxlength，并且希望有一个字符倒计时来提醒用户剩余的字符。我认为这会起作用，但每个计数器跨度都是空的。

这是元素的示例（所有其余的结构都相似）：

```
<label for="homeTagline">Tagline</label>
<input type="text" name="homeTagline" value="IT'S YOUR LIFE!" maxlength="24" class="maxed" />
<br>
<span class='emphasisTxt'><span class='cntr'></span> characters of 24 remaining</span> 
```

这是我的jQuery

```
$('.maxed').each( function(){
   var ml = parseInt( $(this).attr('maxlength') );
   if( $(this).val().length() == 0){
      $(this).sibling('span.cntr').html(ml);
   } else {
      $(this).sibling('span.cntr').html(ml - $(this).val().length() );
   } // end if
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:16:35.227

我看到三个问题：

1.  `.length()`on`$(this).val().length()`应该是`.length`. 它是 的属性`String`，而不是方法。

2.  jQuery 没有`.sibling`方法，它是`.siblings`, 复数形式。

3.  `span.cntr`不是该领域的兄弟姐妹，它实际上是一个 slibling 的孩子。所以你需要`$(this).siblings('.emphasisTxt').find('span.cntr')`选择它。

[在 jsfiddle 上](http://jsfiddle.net/XBrFZ/3/)查看工作版本。

此外，您是否希望在编辑字段时更新跨度（不仅仅是在页面加载时）？您需要为此设置一个 keyup 侦听器。请澄清。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:19:47.360

你的问题是`siblings()`-Bit。（你可能拼错了）。

`siblings()`只选择那些元素，它们是......嗯......兄弟姐妹。您的输入字段的兄弟姐妹是您的`label`,`<br>`和`<span class="emphasisTxt">`。与后一个*内部*一样，它不再`span.cntr`是.*`this`*

 *相反，`$(this).siblings('span.emphasisTxt').children('span.cntr')`应该施展魔法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T19:34:21.377

这是你想要完成的事情吗？

```
$('.maxed').each(function(){
   var ml     = parseInt( $(this).attr('maxlength') );
   var length = $(this).val().length;

   $(this).nextAll('span:first').find('.cntr').html(ml-length);      
}).keyup(function() {
    var ml     = parseInt( $(this).attr('maxlength') );
    var length = $(this).val().length;

    $(this).nextAll('span:first').find('.cntr').html(ml - length );
}); 
```

这是一个**更新**的jsFiddle 示例：http: [//jsfiddle.net/RtHyX/4/](http://jsfiddle.net/RtHyX/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T19:15:54.667

这是您最初问题的答案：http: [//jsfiddle.net/kPYqq/](http://jsfiddle.net/kPYqq/)您要寻找的不是兄弟姐妹，而是兄弟姐妹的孩子。长度是字符串的属性，而不是函数，因此请删除 ()。

我知道这并不能直接回答您的问题，但它可能是一个有用的选择。我之前在一个与您想要做的类似的网站上使用过这个 jquery 插件：http: [//nooshu.com/jquery-plug-in-characters-left](http://nooshu.com/jquery-plug-in-characters-left)*

# assembly - 64 位 Windows 汇编程序

> ID：10708502
> 
> 赞同：8
> 
> 时间：2012-05-22T19:10:17.387
> 
> 标签：assembly, 64-bit, compatibility, 32-bit

我想编写 64 位 Windows 程序集（最好使用 NASM）。我在谷歌上看起来很不错，但似乎找不到 64 位 Windows 编译器。一些网站提到了 ml64，但它似乎不再包含在 VC++ 中。我尝试过使用 32 位汇编，但显然它只是在我的 64 位机器上崩溃了。是否可以在 64 位 Windows 机器上编写、编译和运行 32 位汇编应用程序？还是应该为 64 位编写和编译？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T02:40:28.833

Yasm(*) 是一个现代的、多平台的 NASM 重写的汇编器，能够为 x86 和 AMD64/x86-64 指令集进行汇编。

但是......您可能的意思是您需要一个**链接器**来链接组装的目标代码/文件以创建可执行文件。至少完全免费的 MinGW（Minimal GNU for Windows）项目包附带了一个链接器（称为 ld），它能够从目标文件（至少是 ELF 和 PE 目标格式）组装 32 位和 64 位 Windows 可执行文件。

您绝对可以在 64 位环境中交叉编译/构建 32 位项目，反之亦然，前提是您为汇编器和链接器提供了正确的命令行参数。请参阅您选择的工具的文档以获取更准确的详细信息。

*) [http://yasm.tortall.net/](http://yasm.tortall.net/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:48:36.230

可以在 64 位 Windows 上编写、汇编和运行 32 位汇编。我在我的 Windows 7 x64 机器上用 masm32 编写了一些实用程序。如果要汇编 64 位代码，我相信 FASM 支持 64 位目标代码。

# mdx - MDX 聚合行（在列上显示小计）

> ID：10708506
> 
> 赞同：1
> 
> 时间：2012-05-22T19:10:36.483
> 
> 标签：mdx

我有一个非常简单的 MDX 查询。

```
SELECT 
    NON EMPTY {[Measures].[ing_pc_hh_presupuestadas], horas,[Measures].[ing_pc_hh_faltantes],[Measures].[ing_pc_faltante] }
    ON COLUMNS,
    NON EMPTY CROSSJOIN([proyecto].[codigo proyecto].[All].CHILDREN, [proyecto].[descripcion proyecto].[All].CHILDREN, [concepto].[descripcion concepto].[All].CHILDREN)
    ON ROWS
    FROM
        [TACO V1]
    WHERE 
        {([concepto].[id concepto].&[1]) , ([concepto].[id concepto].&[5])} 
```

这就是想法。一个项目有两个概念。因此，在这个查询中，我可视化了每个项目和概念的一些度量。这可以。但是我需要为每个项目添加一个额外的行，其中包含每个度量的汇总值。

此图是实际场景： ![在此处输入图像描述](../Images/343d91fa71ce7c989a12a07630edbe7e.png)

我需要查看每个项目的第二种情况（这里是一个项目的示例） ![在此处输入图像描述](../Images/0a484ad86288651d5ee10941f77bf5a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:46:36.567

试试这个：

```
WITH MEMBER [proyecto].[codigo proyecto].[ Subtotal] AS ' SUM( { [proyecto].[codigo proyecto].[All].CHILDREN }) ', SOLVE_ORDER = 1000 

MEMBER [proyecto].[descripcion proyecto].[ Subtotal] AS ' SUM( { [proyecto].[descripcion proyecto].[All].CHILDREN }) ', SOLVE_ORDER = 1000

MEMBER [proyecto].[descripcion concepto].[ Subtotal] AS ' SUM( { [proyecto].[descripcion concepto].[All].CHILDREN }) ', SOLVE_ORDER = 1000

SELECT NON EMPTY {[Measures].[ing_pc_hh_presupuestadas], horas,[Measures].[ing_pc_hh_faltantes],[Measures].[ing_pc_faltante] }
    ON COLUMNS,

NON EMPTY { { 

{ { [proyecto].[codigo proyecto].[ Subtotal] }, { [proyecto].[codigo proyecto].[All].CHILDREN } } 

* { { [proyecto].[descripcion proyecto].[ Subtotal] }, { [proyecto].[descripcion proyecto].[All].CHILDREN } } 

* { { [proyecto].[descripcion concepto].[ Subtotal] }, { [proyecto].[descripcion concepto].[All].CHILDREN } } 

} } ON ROWS
FROM
        [TACO V1]
    WHERE 
        {([concepto].[id concepto].&[1]) , ([concepto].[id concepto].&[5])} 
```

# silverlight - 使用模板时流过 PivotItem 标头的页面内容

> ID：10708520
> 
> 赞同：0
> 
> 时间：2012-05-22T19:11:28.023
> 
> 标签：silverlight, windows-phone-7, xaml, pivotitem

我使用 Blend 来修改我的数据透视项目标题的模板。结果看起来不错，但我不明白由此产生的加价。

当我将数据绑定到我的数据透视项时，就会出现问题，因为它看起来漂浮在标题上。我可以通过设置边距来解决这个问题，但是我不想为每个枢轴项目都这样做，我想了解样式标记并希望在那里修复它。

```
<Style x:Key="PivotStyle1" TargetType="controls:Pivot">
<Setter Property="Margin" Value="0"/>
<Setter Property="Padding" Value="0"/>
<Setter Property="Background" Value="White"/>
<Setter Property="ItemsPanel">
    <Setter.Value>
        <ItemsPanelTemplate>
            <Grid/>
        </ItemsPanelTemplate>
    </Setter.Value>
</Setter>
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="controls:Pivot">
            <Grid HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid CacheMode="BitmapCache" Grid.RowSpan="2" >
                    <Grid.Background>
                        <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                            <GradientStop Color="#FFD7E9F1"/>
                            <GradientStop Color="#FF1BA1E2" Offset="1"/>
                        </LinearGradientBrush>
                    </Grid.Background>
                </Grid>
                <Grid Background="{TemplateBinding Background}" CacheMode="BitmapCache" Grid.Row="2" />
                <ContentPresenter ContentTemplate="{TemplateBinding TitleTemplate}"
                    Content="{TemplateBinding Title}" Margin="24,17,0,-7"/>
                <controlsPrimitives:PivotHeadersControl x:Name="HeadersListElement" Grid.Row="1" Foreground="White" />
                <ItemsPresenter x:Name="PivotItemPresenter" Margin="0,2,0,8" Grid.RowSpan="3"/>
            </Grid>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

按照 Shawn 的建议设置 Pivot.HeaderTemplate 要简单得多，但会导致标题项目之间的背景颜色出现间隙。

```
<controls:Pivot>
        <controls:Pivot.HeaderTemplate>
            <DataTemplate>
                <StackPanel>
                    <StackPanel.Background>
                        <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                            <GradientStop Color="#FFD7E9F1"/>
                            <GradientStop Color="#FF1BA1E2" Offset="1"/>
                        </LinearGradientBrush>
                    </StackPanel.Background>

                    <TextBlock Text="{Binding}" FontSize="{StaticResource PhoneFontSizeExtraExtraLarge}" Foreground="White" />

                </StackPanel>
            </DataTemplate>
        </controls:Pivot.HeaderTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:32:59.007

如果您只是想修改标题，只需修改标题

```
<controls:Pivot>
    <controls:Pivot.HeaderTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}" FontSize="{StaticResource PhoneFontSizeExtraExtraLarge}"
                       Margin="24,17,0,-7" Foreground="White" />
        </DataTemplate>
    </controls:Pivot.HeaderTemplate>
    <controls:PivotItem Title="item one"/>
</controls:Pivot> 
```

根据您的最新更新，我了解您要执行的操作。将以下内容添加到页面的资源中

```
 <Style TargetType="controlsPrimitives:PivotHeadersControl">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="controlsPrimitives:PivotHeadersControl">
                            <Grid>
                                <Grid.Background>
                                    <LinearGradientBrush EndPoint="0.5,1" MappingMode="RelativeToBoundingBox" StartPoint="0.5,0">
                                        <GradientStop Color="#FFD7E9F1"/>
                                        <GradientStop Color="#FF1BA1E2" Offset="1"/>
                                    </LinearGradientBrush>
                                </Grid.Background>
                                <Canvas x:Name="Canvas">
                                    <ItemsPresenter/>
                                </Canvas>
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

您需要定义以下命名空间

```
xmlns:controlsPrimitives="clr-namespace:Microsoft.Phone.Controls.Primitives;assembly=Microsoft.Phone.Controls" 
```

所以更多信息在我的博客[www.VisuallyLocated.com](http://www.visuallylocated.com/post/2012/05/23/Changing-the-background-color-of-your-pivot-headers.aspx)

# http - 通过 HTTP 下载数据的最可靠方法

> ID：10708521
> 
> 赞同：0
> 
> 时间：2012-05-22T19:11:29.883
> 
> 标签：http, high-load, http-status-code-503

执行请求最可靠的编程语言/技术选择是什么，最重要的是，从负载非常重的 HTTP 服务器检索正确和完整的响应，通常会产生 HTTP 503 服务不可用或响应时间过长。从这样的服务器检索数据的方法是什么，这几乎可以保证所有数据都将在最快的时间内正确下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:07:38.690

鉴于您的应用程序没有从服务器获得特殊处理的情况，您将不得不继续尝试，直到服务器为您提供页面。

请记住，在实际服务器中断（不仅仅是高负载）期间，这可能是一个非常糟糕的主意，因此您可能希望向用户报告故障并告诉他们稍后再试。

# html - Html 访问公用文件夹之外的文件

> ID：10708523
> 
> 赞同：1
> 
> 时间：2012-05-22T19:11:46.313
> 
> 标签：html, apache, security, directory

我有一个名为“upload.php”的 php 脚本，它有几个需要工作的文件。我不希望人们能够通过在 URL 中输入文件名来访问它需要的那些文件。我该怎么做才能让 upload.php 访问公共文件夹之外的那些？

我想有可能把它全部放在公用文件夹之外并制作一个upload.html文件来指向upload.php？如果是，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:17:46.860

是的，如果您不希望人们从服务器外部访问这些文件，那么最好的办法是将它们保存在公用文件夹之外，即服务器文件系统的其他位置。PHP，在服务器端被解释，仍然能够访问文件（假设权限是正确的）。

您将如何访问它们取决于您的代码中“它需要如何工作”。假设有问题的文件是需要包含的 PHP 文件，[include](http://php.net/manual/en/function.include.php)和[require](http://www.php.net/manual/en/function.require.php)都采用服务器端路径，并且可以引用服务器文件系统上的任何文件。

像这样的东西：

```
include '/full/path/to/file.php'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:25:35.350

您还可以将这些 php 文件放在一个文件夹中，比如说“包含”并在其中设置一个 .htaccess 文件：

```
<Limit GET POST PUT>
  order deny,allow
  deny from all
  allow from 127.0.0.1
</Limit> 
```

# linq - Linq 从 SL 4 和 SL 5 得到不同的结果

> ID：10708527
> 
> 赞同：1
> 
> 时间：2012-05-22T19:11:57.417
> 
> 标签：linq, silverlight-4.0, linq-to-xml, silverlight-5.0

我在 SL 应用程序中有一个富文本。我想得到纯文本，所以我将带有格式的富文本转换为 xml，然后尝试摆脱所有格式标记。当我使用 SL4 运行应用程序时没问题。但不为 SL 5 起床。

这是丰富的格式数据：

```
<Section xml:space="preserve" HasTrailingParagraphBreakOnPaste="False" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
  <Paragraph FontSize="20" FontFamily="Calibri" Foreground="#FF000000" FontWeight="Normal" FontStyle="Normal" FontStretch="Normal" CharacterSpacing="0" Typography.AnnotationAlternates="0" Typography.EastAsianExpertForms="False" Typography.EastAsianLanguage="Normal" Typography.EastAsianWidths="Normal" Typography.StandardLigatures="True" Typography.ContextualLigatures="True" Typography.DiscretionaryLigatures="False" Typography.HistoricalLigatures="False" Typography.StandardSwashes="0" Typography.ContextualSwashes="0" Typography.ContextualAlternates="True" Typography.StylisticAlternates="0" Typography.StylisticSet1="False" Typography.StylisticSet2="False" Typography.StylisticSet3="False" Typography.StylisticSet4="False" Typography.StylisticSet5="False" Typography.StylisticSet6="False" Typography.StylisticSet7="False" Typography.StylisticSet8="False" Typography.StylisticSet9="False" Typography.StylisticSet10="False" Typography.StylisticSet11="False" Typography.StylisticSet12="False" Typography.StylisticSet13="False" Typography.StylisticSet14="False" Typography.StylisticSet15="False" Typography.StylisticSet16="False" Typography.StylisticSet17="False" Typography.StylisticSet18="False" Typography.StylisticSet19="False" Typography.StylisticSet20="False" Typography.Capitals="Normal" Typography.CapitalSpacing="False" Typography.Kerning="True" Typography.CaseSensitiveForms="False" Typography.HistoricalForms="False" Typography.Fraction="Normal" Typography.NumeralStyle="Normal" Typography.NumeralAlignment="Normal" Typography.SlashedZero="False" Typography.MathematicalGreek="False" Typography.Variants="Normal" TextOptions.TextHintingMode="Fixed" TextOptions.TextFormattingMode="Ideal" TextOptions.TextRenderingMode="Auto" TextAlignment="Left" LineHeight="0" LineStackingStrategy="MaxHeight">
    <Run FontSize="20" FontFamily="Calibri" Foreground="#FFFF0000" FontWeight="Normal" FontStyle="Normal" FontStretch="Normal">Hello  ddd </Run>
  </Paragraph>
</Section> 
```

我使用此代码删除标记（值高于输入数据）：

```
 XDocument xmlRichText = XDocument.Parse(value.ToString());
  var q = from c in xmlRichText.Descendants(xamlPresentationNamespace + "Run")
          select (string)c.Attribute("Text");
  foreach (string text in q)
         result += text + " "; 
```

如何使其适用于 SL 4 和 SL5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T20:13:17.517

我没有看到任何名为“文本”的属性。如果您需要值“Hello ddd”，您可以这样做：

```
XNamespace ns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation";
var path = "...\file.xml";

using(var stream = File.Open(path, FileMode.Open))
{
    var q = XDocument.Load(stream).Descendants(ns + "Run").Select (d => d.Value);
    var result = string.Join(" ", q);
    Debug.WriteLine(result);
} 
```

这适用于 LINQPad，但我尚未在 SL4 或 SL5 中进行测试。

# sql-server - 首先匹配密码然后更改密码的存储过程

> ID：10708536
> 
> 赞同：3
> 
> 时间：2012-05-22T19:12:37.107
> 
> 标签：sql-server, sql-server-2008, tsql

我无法编写一个存储过程，该过程首先根据用户提供的密码（也是散列）检查散列密码。如果密码匹配，该过程会将密码更改为用户提供的新密码，以便在存储之前对其进行哈希处理。我试了一下，发现下面的代码似乎完全超出了正确的语法。任何可以提供的帮助将不胜感激。有问题的代码如下：

```
Create Proc UserChangePassword
    @pGuid varchar(50),
    @pOldPassword varchar(100),
    @pHashedPassword varchar (100),
    @pNewPassword varchar(10)
AS
        set @pHashedPassword = HASHBYTES('md5', @pOldPassword)
        set @pOldPassword as select st01Password from st01UserData where @pGuid = st01GUID
        If  ( @pOldPassword = @pHashedPassword)
    Begin
        Update st01UserData (
        set st01Password = HASHBYTES('md5', @pNewPassword))
        where st01GUID = @pGuid
        Return 'SUCCESS'
    Else
        RETURN 'FAILED'
GO 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T19:28:31.137

您的问题背后的一些原因：

*   `@pHashedPassword`如果您只是盲目地将其设置为程序的第一行，为什么您的应用程序会提供？
*   该语法`set @variable AS SELECT ...`不是有效的 T-SQL 语法。
*   您`BEGIN`没有匹配的`END`.
*   语法`UPDATE table (`也无效。
*   我认为没有理由将旧密码放入变量中，在查询之外进行比较，然后执行更新，当您可以一步完成所有这些时。
*   你不能`RETURN`是字符串，只能是`INT`.
*   也很好奇旧密码可以是100个字符，而新密码只有10个？

试试这个版本：

```
CREATE PROCEDURE dbo.UserChangePassword
  @pGuid        VARCHAR(50),
  @pOldPassword VARCHAR(100),
  @pNewPassword VARCHAR(10)
AS
BEGIN
  SET NOCOUNT ON;

  UPDATE dbo.st01UserData
    SET st01Password = HASHBYTES('md5', @pNewPassword)
    WHERE st01Guid = @pGuid
    AND st01Password = HASHBYTES('md5', @pOldPassword);

  IF @@ROWCOUNT = 0
    RETURN -1;

  RETURN 0;
END
GO 
```

# python - 如何在 64 位 Windows 7 机器上安装 pycrypto？

> ID：10708538
> 
> 赞同：4
> 
> 时间：2012-05-22T19:12:39.407
> 
> 标签：python, windows, pip, pycrypto

我尝试使用 安装 PyCrypto `pip`，但它抱怨需要 vcvarsall.bat。我安装了 Visual Studio 2008，但现在`ValueError: [u'path']`当我尝试从`pip`.

[我尝试从Voidspace](http://www.voidspace.org.uk/python/modules.shtml#pycrypto)下载预构建的二进制文件，但它们只有 32 位版本，而且它似乎没有正确安装在我的机器上（它说它成功，但运行 python 并尝试`import Crypto`给我一个`ImportError: No module named Crypto`.

我需要做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T16:55:25.630

[Voidspace](http://www.voidspace.org.uk/python/modules.shtml#pycrypto)现在已经预建了 64 位二进制文​​件：

例如。[python 2.7 的 64 位二进制文​​件](http://www.voidspace.org.uk/downloads/pycrypto26/pycrypto-2.6.win-amd64-py2.7.exe)

# visual-studio-2010 - NHibernate 从 SymbolSource.org 加载符号

> ID：10708546
> 
> 赞同：3
> 
> 时间：2012-05-22T19:13:05.047
> 
> 标签：visual-studio-2010, nhibernate, debug-symbols

我希望能够调试 NHibernate，而且我以前从未加载过任何符号`SymbolSource.org`。

我需要在 Visual Studio 中输入什么 url 才能加载 NHibernate 的符号，以便我可以正确调试它？我正在运行 NHibernate 的 3.2.0.4000 版本。

## 编辑：

这就是我配置它的方式。

![调试选项](../Images/ccf3b8cf16e987afc1e66ec5d244277a.png)

我在输出窗口中看到了这个。请注意，它加载了 Iesi.Collections 的符号，而不是 NHibernate。

```
'QTAgent32.exe' (Managed (v4.0.30319)): Loaded 'C:\Users\cwerner\TFS\Zeta\TestResults\cwerner_LKN030 2012-05-23 07_33_53\Out\NHibernate.dll'
'QTAgent32.exe' (Managed (v4.0.30319)): Loaded 'C:\Users\cwerner\TFS\Zeta\TestResults\cwerner_LKN030 2012-05-23 07_33_53\Out\Iesi.Collections.dll', Symbols loaded. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:30:04.827

您的 NHibernate 版本存在于 symbolsource.org 的服务器上。

如何配置 symbolsource.org 看到这个链接：

[http://www.symbolsource.org/Public/Home/VisualStudio](http://www.symbolsource.org/Public/Home/VisualStudio)

符号源服务器网址：`http://srv.symbolsource.org/pdb/Public`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:06:11.350

你从哪里得到你的 NHibernate 3.2 GA 二进制文件？这些符号由 SymbolSource 通过独立编译源和逆向工程 PDB 提供 - 因此结果可能会有所不同。NHibernate 从 3.3 CR1 开始才开始推送官方符号。

如果您发布指向您正在使用的实际二进制文件的链接，我们也可能会尝试为这些文件伪造 PDB，但前提是它是任何官方发行版。

# excel - 使用 Excel VBA 组织单元格范围

> ID：10708547
> 
> 赞同：0
> 
> 时间：2012-05-22T19:13:05.183
> 
> 标签：excel, vba

我在 B 到 U 列中有大约 400 行的数据。F 列是发布日期的地方。我需要将它放在所有数据按 F 列组织的位置，而不会弄乱与其相邻的其余单元格。

这可能吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:00:20.543

```
Range("F1").Sort key1:=Range("F1"), order1:=xlAscending 
```

如果您有一些不应排序的标题行，则需要指定要排序的完整范围（例如`Range("B2:U10").Sort`...）。如果您希望它降序，请将 order1 替换为 xlDescending。

# c# - 从 char 到 byte 的转换中使用的编码

> ID：10708548
> 
> 赞同：7
> 
> 时间：2012-05-22T19:13:06.033
> 
> 标签：c#, character-encoding, casting

看一下以下 C# 代码（从[http://wmsauth.org/examples](http://wmsauth.org/examples)`BuildProtectedURLWithValidity`中的函数中提取的函数）：

```
byte[] StringToBytesToBeHashed(string to_be_hashed) {
    byte[] to_be_hashed_byte_array = new byte[to_be_hashed.Length];
    int i = 0;
    foreach (char cur_char in to_be_hashed)
    {
        to_be_hashed_byte_array[i++] = (byte)cur_char;
    }
    return to_be_hashed_byte_array;
} 
```

我的问题是：**从 byte 到 char 的转换在编码方面有什么作用？**

我想它在编码方面确实没有做任何事情，但这是否意味着 Encoding.Default 是使用的那个，因此返回的字节将取决于框架将如何编码特定操作系统中的底层字符串？

此外，char 实际上是否大于一个字节（我猜是 2 个字节）并且实际上会省略第一个字节？

我正在考虑通过以下方式替换所有这些：

```
Encoding.UTF8.GetBytes(stringToBeHashed) 
```

你怎么看？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T19:18:47.553

.NET Framework 使用 Unicode 来表示它的所有字符和字符串。char 的整数值（您可以通过转换为 获得`int`）等效于其 UTF-16 代码单元。对于基本多语言平面中的字符（构成您将遇到的大多数字符），此值是 Unicode 代码点。

> .NET Framework 使用该`Char`结构来表示 Unicode 字符。Unicode 标准用一个唯一的 21 位标量数字（称为代码点）标识每个 Unicode 字符，并定义了 UTF-16 编码形式，该形式指定代码点如何编码为一个或多个 16 位值的序列。每个 16 位值的范围从十六进制`0x0000`到`0xFFFF`并存储在一个`Char`结构中。对象的值`Char`是它的 16 位数字（序数）值。—[字符结构](http://msdn.microsoft.com/en-us/library/system.char.aspx)

转换`char`为`byte`将导致值大于 255 的任何字符的数据丢失。尝试运行以下简单示例以了解原因：

```
char c1 = 'D';        // code point 68
byte b1 = (byte)c1;   // b1 is 68

char c2 = 'ń';        // code point 324
byte b2 = (byte)c2;   // b2 is 68 too!
                      // 324 % 256 == 68 
```

是的，你绝对应该使用它`Encoding.UTF8.GetBytes`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T19:26:00.217

`byte`在and之间转换`char`类似于使用[ISO-8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)编码（= Unicode 的前 256 个字符），除了在编码超过 U+00FF 的字符时它会默默地丢失信息。

> 此外，char 实际上是否大于一个字节（我猜是 2 个字节）并且实际上会省略第一个字节？

是的。AC# `char`= UTF-16 代码单元 = 2 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-17T17:03:53.780

`char`表示 16 位 UTF-16 代码点。将 a`char`转换为 a`byte`会导致字符的低字节，但*Douglas*和*dan04*都是错误的，因为它总是会悄悄地丢弃高字节。如果高字节不为零，则结果取决于是否设置了编译器选项*检查算术上溢/下溢*：

```
using System;
namespace CharTest
{
    class Program
    {
        public static void Main(string[] args)
        {   ByteToCharTest( 's' );
            ByteToCharTest( 'ы' );

            Console.ReadLine();
        }

        static void ByteToCharTest( char c )
        {   const string MsgTemplate =
                "Casting to byte character # {0}: {1}";

            string msgRes;
            byte   b;

            msgRes = "Success";
            try
            {   b = ( byte )c;  }
            catch( Exception e )
            {   msgRes = e.Message;  }

            Console.WriteLine(
                String.Format( MsgTemplate, (Int16)c, msgRes ) );
        }
    }
} 
```

带有溢出检查的输出：

```
Casting to byte character # 115: Success
Casting to byte character # 1099: Arithmetic operation resulted in an overflow. 
```

没有溢出检查的输出：

```
Casting to byte character # 115: Success        
Casting to byte character # 1099: Success 
```

# java - 黑莓：FileSystemJournalListener 不返回新捕获的图像路径

> ID：10708549
> 
> 赞同：0
> 
> 时间：2012-05-22T19:13:08.750
> 
> 标签：java, blackberry

**FileSystemJournalListener 未返回新捕获的图像路径。我的相机将图像保存到 sdcard/blackberry/pictures/...**

但是听众在 store/home/user/pictures/Image_1337710522032.jpg 给我空白图像路径

实际保存的文件在 sdcard/BlackBerry/pictures/IMG00010-20111019-1225.jpg

我应该如何设置 FileSystemJournalListener 来扫描 sdcard 以查找新添加的图像路径？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:33:05.147

这是BlackBerry 开发人员文档中[应遵循的适当示例。](http://docs.blackberry.com/en/developers/deliverables/11942/Detect_when_img_is_added_or_removed_file_system_740288_11.jsp)

在我拥有的应用程序中，我`FileSystemJournalListener`的代码如下所示。您必须遍历 USN 才能找到新图像。

您还可以[查看此页面](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/io/file/FileSystemJournal.html)以获取有关`FileSystemJournal`以及如何检查新文件的更多信息。

```
public class FileSystemListener implements FileSystemJournalListener, Runnable {
       /** The last USN to have to search until, when looking for new files added to the file system */
       private long _lastUSN;
       /** The filename of the new image */
       private String _imageFilename;

       public void run() {
          // TODO: do something with the new image
       }

       public FileSystemListener() {
          // we record the next system USN before the Camera app has a chance to add a new file
          _lastUSN = FileSystemJournal.getNextUSN();
       }

       public void fileJournalChanged() {
          long nextUSN = FileSystemJournal.getNextUSN();
          boolean imgFound = false;
          // we have to search for the file system event that is the new image
          for (long lookUSN = nextUSN - 1; (lookUSN >= _lastUSN) && !imgFound; --lookUSN) {
             FileSystemJournalEntry entry = FileSystemJournal.getEntry(lookUSN);
             if (entry == null) {
                break;
             } else {
                String path = entry.getPath();
                if (path != null) {
                   if (path.endsWith("png") || path.endsWith("jpg") || path.endsWith("bmp") || path.endsWith("gif")) {
                      switch (entry.getEvent()) {
                         case FileSystemJournalEntry.FILE_ADDED:
                            // either a picture was taken or a picture was added to the BlackBerry device
                            _lastUSN = lookUSN;
                            _imageFilename = path;
                            imgFound = true;

                            // unregister for file system events?
                            UiApplication.getUiApplication().removeFileSystemJournalListener(this);

                            // let this callback complete before responding to the new image event
                            UiApplication.getUiApplication().invokeLater(this);
                            break;
                         case FileSystemJournalEntry.FILE_DELETED:
                            // a picture was removed from the BlackBerry device;
                            break;
                      }
                   }
                }
             }
          }
       }
    } 
```

# c++ - CFile 读取 0 个字节

> ID：10708550
> 
> 赞同：0
> 
> 时间：2012-05-22T19:13:27.010
> 
> 标签：c++, file-io, mfc, cfile

使用 CFile 时，出于某种原因，我对 read() 的调用在第一次调用后返回 0 个字节

```
CFile iniFile;
int bytesRead=0;
char buffer[_MAX_PATH]; 
if(iniFile.Open(iniDirFilename,CFile::modeRead)){
        bytesRead += iniFile.Read(buffer,_MAX_PATH); // read file path
        SaveDirectoryBox->SetWindowTextA(buffer);
        iniFile.Seek(bytesRead,CFile::begin); // reposition pointer

        int x =iniFile.GetLength();
        int y =iniFile.GetPosition();

        bytesRead += iniFile.Read(buffer,_MAX_PATH); // read subfile path
        subSaveDirectoryBox->SetWindowTextA(buffer);
        iniFile.Seek(bytesRead,CFile::begin); // reposition pointer
} 
```

当我知道文件长度明显更多时，它告诉我文件长度只有 72 个字节。我保存了一堆以空字符结尾的字符串。例如“你好”，我怀疑 CFile 类在构造时会查找第一个 NULL 字符并将其称为文件结尾。我尝试使用 setLength() 函数，但这给了我一个错误

如何阅读文件的其余部分？

## 编辑：

我应该提到我的项目设置为用 ascii 读取写入。而且文件也是用ascii写的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:40:48.457

如果您有以零结尾的字符串的文件，则应将其视为二进制而不是文本。这是从开头读取字符串到下一个终止​​零字符的可能解决方案之一。

```
 ULONGLONG iTotalBuffSize = 0;
    CFile iniFile(_T("TestFile.txt"), CFile::modeRead);

    iTotalBuffSize = iniFile.GetLength();

    TCHAR* pBuff = new TCHAR[(UINT)iTotalBuffSize];

    iniFile.Read(pBuff, (UINT)iTotalBuffSize);

    while(0 != *pBuff)
    {
        CString csText(pBuff);   // this is your n-th string
        TRACE(_T("%s\n"), csText);

        pBuff += csText.GetLength() + sizeof(TCHAR);
    } 
```

我使用通用文本映射编写了此代码，因此代码可以在 UNICODE 和 ANSI 应用程序中使用。

# c# - 数据集更改为 sdf 本地数据库

> ID：10708555
> 
> 赞同：0
> 
> 时间：2012-05-22T19:13:45.347
> 
> 标签：c#, database, dataset, sdf

我在我的项目中创建了 .sdf 数据库。

为我的基地创建了数据集。所以我正在使用这个 DataSet 对象，并使用 DataGridView 向表中添加新行。

然后我想将所有更改保存回 .sdf 数据库。

我怎么能简单地做到这一点？我确信有一些东西可以从 DataSet 自动更新到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:25:52.277

使用`SqlDataAdapter`已`SqlCommands`为每一行设置的 a。有关如何使用 DataAdapter 的更多信息，请参见[此处。](http://msdn.microsoft.com/en-us/library/bh8kx08z.aspx)

# c# - 如何在数据网格视图中默认选中复选框？

> ID：10708556
> 
> 赞同：1
> 
> 时间：2012-05-22T19:13:46.590
> 
> 标签：c#, datagridview, checkbox

Good ol' Ellie here with an Visual Studio 2010 question。

我在数据网格视图中有一个列，它只是一个复选框，我希望它显示为选中状态，除非用户特别取消选中它。我发现的唯一事情是如何检查它是否只是一个独立的复选框。

提前感谢您的帮助！

艾莉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:22:29.827

循环遍历每一行并选中其各自的框，使其显示为选中（默认情况下）。

应该是这样的：

```
foreach (DataGridViewRow row in dataGridView.Rows)     
{
    row.Cells[CheckBoxColumn.Name].Value = true;     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:56:00.240

如果要将 DataGridView 绑定到集合，则可以将对象的布尔属性的默认值设置为 true，将对象添加到 BindingList 集合，并将集合设置为 DataGridView 的数据源。

例如，要绑定到 DataGridView 的集合将包含所需的属性（每个属性代表一个列），包括一个表示复选框列的布尔属性。这是该类的外观示例：

```
public class Product : INotifyPropertyChanged
{
    private bool _selected;
    private string _product;

    public event PropertyChangedEventHandler PropertyChanged;

    public Product(string product)
    {
        _selected = true;
        _product = product;
    }

    public bool Selected
    {
        get { return _selected; }
        set
        {
            _selected = value;
            this.NotifyPropertyChanged("Selected");
        }
    }

    public string ProductName
    {
        get { return _product; }
        set
        {
            _product = value;
            this.NotifyPropertyChanged("Product");
        }
    }

    private void NotifyPropertyChanged(string name)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
} 
```

在包含 DataGridView 的表单中，您可以将项目添加到 BindingList 并将该集合绑定到 DataGridView：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        InitGrid();
    }

    private void InitGrid()
    {
        dgProducts.AutoGenerateColumns = true;

        BindingList<Product> products = new BindingList<Product>();

        products.Add(new Product("Eggs"));
        products.Add(new Product("Milk"));
        products.Add(new Product("Bread"));
        products.Add(new Product("Butter"));

        dgProducts.DataSource = products;
    }

} 
```

这只是一个快速而肮脏的示例，但展示了如何为对象设置默认值，将该对象添加到 BindingList，然后将其添加到 DataGridView。

要在绑定列表后添加项目，您始终可以访问 DataSource 集合并添加到它（下面的示例代码假设一个按钮被添加到表单并连接到下面显示的单击事件，以及一个名为 newItemName 的文本框):

```
 private void addItemButton_Click(object sender, EventArgs e)
    {
        BindingList<Product> products = dgProducts.DataSource as BindingList<Product>;
        products.Add(new Product(newItemName.Text));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-12T13:43:20.250

我现在有同样的问题。
我的解决方案是，在我的 dataGridView 上使用一个事件。
您只需获取当前行并将复选框列的空值替换为 true 或 false。

```
 private void myDataGridView_RowValidating(object sender, DataGridViewCellCancelEventArgs e)
    {
        // Get current row.
        DataGridViewRow obj = myDataGridView.CurrentRow;
        // Get the cell with the checkbox.
        DataGridViewCheckBoxCell oCell = obj.Cells[theIndexOfTheCheckboxColumn] as DataGridViewCheckBoxCell;
        // Check the value for null.
        if (oCell.Value.ToString().Equals(string.Empty))
            oCell.Value = true;
    } 
```

# ios - iPhone得到编译错误ABC函数禁止发送dealoc的exploit消息

> ID：10708559
> 
> 赞同：0
> 
> 时间：2012-05-22T19:13:58.877
> 
> 标签：ios

当我尝试构建我的项目时，我收到以下错误消息

ABC函数禁止dealoc的exploit消息发送

```
- (void)dealloc {
    [super dealloc];
} 
```

这是类定义：

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>

@interface cPlay : UIViewController{
    MPMoviePlayerController *mp;

}
- (void) moviePlayBackDidFinish:(NSNotification*)notification;
-(void) NewVideo : (NSString *) strName;
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:16:22.860

使用 ARC 时，您通常不需要为内存管理编写 dealloc 方法，因为编译器会为您插入所有必要的代码，如果您真的需要不要`[super dealloc]`在里面调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:19:03.713

只需删除 dealloc 功能，ARC（自动引用计数）不允许您自己进行 dealloc。ARC 会为您做到这一点。

请参阅此链接：

[http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

> 我喜欢 ARC 的一件事是，在大多数情况下，它完全消除了 > 编写 dealloc 方法的需要。当一个对象被释放时，它的实例变量和
> 综合属性被自动释放。您不再需要编写：

```
- (void)dealloc
{
    [_window release];
    [_viewController release];
   [super dealloc];
} 
```

> 因为现在 Objective-C 会自动处理这个问题。事实上，甚至不可能 > 再写上面的内容了。在 ARC 下，你不能调用 release，也不能调用 [super
> dealloc]。你仍然可以实现 dealloc——稍后你会看到一个这样的例子——但是不再需要手动释放你的 ivars。

# javascript - 尝试用拉斐尔画圆，非动态时有效，动态时无效

> ID：10708561
> 
> 赞同：0
> 
> 时间：2012-05-22T19:14:16.013
> 
> 标签：javascript, jquery, raphael

在 td 之上执行一些计算后，我试图画一个圆圈。当我运行以下代码时，它可以工作：

```
$('#priority_one').width($('#learning_streams').width());
$('#priority_one').height($('#learning_streams').height());
var priority_one_paper = new Raphael('priority_one', $('#priority_one').width(), $('#priority_one').height());
var priority_one_circle = priority_one_paper.circle((pos.left).toFixed(0), (pos.top).toFixed(0), (width/2).toFixed(0));
priority_one_circle.attr('stroke','#000000'); 
```

但是，当我尝试使其动态化（td 根据用户的输入而变化）时，它不再起作用。代码：

```
function circlePriorityOne() {
    //priority_one is a div absolutely positioned over a table called learning_streams
    //sets size of priority_one based off the table learning_streams
    $('#priority_one').width($('#learning_streams').width());
    $('#priority_one').height($('#learning_streams').height());

    //creates the 'paper' to draw the circle on
    var priority_one_paper = new Raphael('priority_one', $('#priority_one').width(), $('#priority_one').height());

    var main = getMax(priority_one_count); //returns the id of the td to circle
    var pos = $('#'+main).position();
    var width = $('#'+main).width();

    //using toFixed() to get rid of decimals
    var priority_one_circle = priority_one_paper.circle((pos.left).toFixed(0), (pos.top).toFixed(0), (width/2).toFixed(0));
    priority_one_circle.attr('stroke','#000000');
} 
```

看看这有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:47:34.397

你是对的。[.position()](http://api.jquery.com/position/)获取相对于父元素的当前位置。

您应该改用[.offset()](http://api.jquery.com/offset/)，它获取相对于`document`

**编辑**
我不太确定，因为我还没有测试过它，但它应该做你想要的^^

```
var td = $("#td"),
    pos_td = td.offset(),
    table = td.parents("table"),
    pos_table = table.offset();

// td's position relative to table
console.log("left: " + (pos_td.left - pos_table.left));
console.log("top: " + (pos_td.top - pos_td.top)); 
```

# c# - IFilterProvider and separation of concerns

> ID：10708565
> 
> 赞同：12
> 
> 时间：2012-05-22T19:14:34.650
> 
> 标签：c#, dependency-injection, asp.net-mvc-filters

I have a situation where I need to inject some dependencies in a action filter, namely, my custom authorization provider in my custom authorization attribute. I stumbled upon a lot of people and posts who were saying that we should be separating the 'attribute metadata' from the 'behavior'. This makes sense and there is also the fact that filter attributes are not instantiated through the 'DependencyResolver' so it is difficult to inject the dependencies.

So I did a little refactoring of my code and I wanted to know if I had it right (I'm using Castle Windsor as the DI framework).

First off I stripped my attribute to contain only the raw data I need

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public class MyAuthorizeAttribute : Attribute
{
    public string Code { get; set; }
} 
```

I created a custom authorization filter that would contain the logic of determining if the current user has the proper authorization

```
public class MyAuthorizationFilter : IAuthorizationFilter
{
    private IAuthorizationProvider _authorizationProvider;
    private string _code;

    public MyAuthorizationFilter(IAuthorizationProvider authorizationProvider, string code)
    {
        Contract.Requires(authorizationProvider != null);
        Contract.Requires(!string.IsNullOrWhiteSpace(code));

        _authorizationProvider = authorizationProvider;
        _code = code;
    }

    public void OnAuthorization(AuthorizationContext filterContext)
    {
        if (filterContext == null)
        {
            throw new ArgumentNullException("filterContext");
        }

        if (filterContext.HttpContext.Request.IsAuthenticated)
        {
            BaseController controller = filterContext.Controller as BaseController;
            if (controller != null)
            {
                if (!IsAuthorized(controller.CurrentUser, controller.GetCurrentSecurityContext()))
                {
                    // forbidden
                    filterContext.RequestContext.HttpContext.Response.StatusCode = 403;
                    if (filterContext.RequestContext.HttpContext.Request.IsAjaxRequest())
                    {
                        filterContext.Result = new RedirectToRouteResult("default", new RouteValueDictionary(new
                        {
                            action = "http403",
                            controller = "error"
                        }), false);
                    }
                    else
                    {
                        filterContext.Result = controller.InvokeHttp404(filterContext.HttpContext);
                    }
                }
            }
            else
            {

            }
        }
        else
        {
            filterContext.Result = new RedirectResult(FormsAuthentication.LoginUrl);
        }
    }

    private bool IsAuthorized(MyUser user, BaseSecurityContext securityContext)
    {
        bool has = false;
        if (_authorizationProvider != null && !string.IsNullOrWhiteSpace(_code))
        {
            if (user != null)
            {
                if (securityContext != null)
                {
                    has = _authorizationProvider.HasPermission(user, _code, securityContext);
                }
            }
        }
        else
        {
            has = true;
        }
        return has;
    }
} 
```

The last part was to create a custom filter provider that would fetch this specific attribute and instantiate my custom filter passing its dependencies and any data it needs, extracted from the attribute.

```
public class MyAuthorizationFilterProvider : IFilterProvider
{
    private IWindsorContainer _container;

    public MyAuthorizationFilterProvider(IWindsorContainer container)
    {
        Contract.Requires(container != null);
        _container = container;
    }

    public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        Type controllerType = controllerContext.Controller.GetType();
        var authorizationProvider = _container.Resolve<IAuthorizationProvider>();
        foreach (MyAuthorizeAttribute attribute in controllerType.GetCustomAttributes(typeof(MyAuthorizeAttribute), false))
        {
            yield return new Filter(new MyAuthorizationFilter(authorizationProvider, attribute.Code), FilterScope.Controller, 0);
        }
        foreach (MyAuthorizeAttribute attribute in actionDescriptor.GetCustomAttributes(typeof(MyAuthorizeAttribute), false))
        {
            yield return new Filter(new MyAuthorizationFilter(authorizationProvider, attribute.Code), FilterScope.Action, 0);
        }
    }
} 
```

The last step is the register the filter provider in the global.asax

```
FilterProviders.Providers.Add(new MyAuthorizationFilterProvider(_container)); 
```

So I'm wondering first, if I got the idea right and second, what could be improved.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:50:35.513

Yes, I think you got the idea right. I like that you're separating concerns between the attribute and the filter implementation, and I like that you're using constructor DI rather than property DI.

Your approach works well if you only have one type of filter. I think the biggest potential area for improvement, if you had more than one type of filter, would be how the filter provider is implemented. Currently, the filter provider is tightly coupled to the attribute and filter instances it is providing.

If you're willing to combine the attribute with the filter and use property DI, there's a simple way to have a more decoupled filter provider. Here are two examples of that approach: [http://www.thecodinghumanist.com/blog/archives/2011/1/27/structuremap-action-filters-and-dependency-injection-in-asp-net-mvc-3](http://www.thecodinghumanist.com/blog/archives/2011/1/27/structuremap-action-filters-and-dependency-injection-in-asp-net-mvc-3) [http://lozanotek.com/blog/archive/2010/10/12/dependency_injection_for_filters_in_mvc3.aspx](http://lozanotek.com/blog/archive/2010/10/12/dependency_injection_for_filters_in_mvc3.aspx)

There are two challenges to solve with the current approach: 1\. Injecting some, but not all, of the filter constructor parameters via DI. 2\. Mapping from an attribute to a (dependency-injected) filter instance.

Currently, you're doing both manually, which is certainly fine when there's only one filter/attribute. If there were more, you'd probably want a more general approach for both parts.

For challenge #1, you could use something like a _container.Resolve overload that lets you pass in arguments. That solution is rather container-specific and probably a bit tricky.

Another solution, which I'll describe here, separates out a factory class that only takes dependencies in its constructor and produces a filter instance requiring both DI and non-DI arguments.

Here's what that factory might look like:

```
public interface IFilterInstanceFactory
{
    object Create(Attribute attribute);
} 
```

You'd then implement a factory for each attribute/filter pair:

```
public class MyAuthorizationFilterFactory : IFilterInstanceFactory
{
    private readonly IAuthorizationProvider provider;

    public MyAuthorizationFilterFactory(IAuthorizationProvider provider)
    {
        this.provider = provider;
    }

    public object Create(Attribute attribute)
    {
        MyAuthorizeAttribute authorizeAttribute = attribute as MyAuthorizeAttribute;

        if (authorizeAttribute == null)
        {
            return null;
        }

        return new MyAuthorizationFilter(provider, authorizeAttribute.Code);
   }
} 
```

You can solve challenge #2 by just registering each implementation of IFilterInstanceFactory with CastleWindsor.

The filter provider can now be decoupled from any knowledge of specific attributes and filters:

```
public class MyFilterProvider : IFilterProvider
{
    private IWindsorContainer _container;

    public MyFilterProvider(IWindsorContainer container)
    {
        Contract.Requires(container != null);
        _container = container;
    }

    public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        Type controllerType = controllerContext.Controller.GetType();
        var authorizationProvider = _container.Resolve<IAuthorizationProvider>();
        foreach (FilterAttribute attribute in controllerType.GetCustomAttributes(typeof(FilterAttribute), false))
        {
            object instance = Resolve(attribute);
            yield return new Filter(instance, FilterScope.Controller, 0);
        }
        foreach (FilterAttribute attribute in actionDescriptor.GetCustomAttributes(typeof(FilterAttribute), false))
        {
            object instance = Resolve(attribute);
            yield return new Filter(instance, FilterScope.Action, 0);
        }
    }

    private object Resolve(Attribute attribute)
    {
        IFilterInstanceFactory[] factories = _container.ResolveAll<IFilterInstanceFactory>();

        foreach (IFilterInstanceFactory factory in factories)
        {
            object dependencyInjectedInstance = factory.Create(attribute);

            if (dependencyInjectedInstance != null)
            {
                return dependencyInjectedInstance;
            }
        }

        return attribute;
    }
} 
```

David

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T11:47:42.270

This is probably a bit much, but one way of avoiding the factory as suggested by David (and making this a little more generic) is to introduce yet another attribute.

```
[AssociatedFilter(typeof(MyAuthorizationFilter))] 
```

Which you could add to the original attribute as follows.

```
[AssociatedFilter(typeof(MyAuthorizationFilter))]
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public class MyAuthorizeAttribute : Attribute
{
    public string Code { get; set; }
} 
```

The AssociatedFilter Attribute looks like this.

```
public class AssociatedFilterAttribute : Attribute
{
    public AssociatedFilterAttribute(Type filterType)
    {
        FilterType = filterType;
    }
    public Type FilterType { get; set; }
} 
```

Then you can retrieve the correct filter by pulling out the FilterType from this attribute.

```
private object Resolve(Attribute attribute)
{
    var filterAttributes = attribute.GetType().GetCustomAttributes(typeof(AssociatedFilterAttribute), false);
    var first = (AssociatedFilterAttribute)filterAttributes.FirstOrDefault();
    return new Filter(_container.Resolve(first.FilterType), FilterScope.First, null); 
} 
```

Currently this is limited to only taking the first AssociatedFilter attribute, theoretically I guess you could add more than one (one attribute kicks off several filters) in which case you'd omit the bit where this grabs the first result.

Obviously we also need to add error handling, e.g. if there is no AssociatedFilterAttribute...

# ruby-on-rails - 自定义验证器抛出 RuntimeError: :attributes 不能为空

> ID：10708568
> 
> 赞同：1
> 
> 时间：2012-05-22T19:14:38.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, customvalidator

在我的 Rails 应用程序中，我有一个 Like 模型。

```
### like.rb
### Custom Validator Code:
class UniquenessValidator < ActiveModel::Validator
  def validate(record)
      # Empty   
  end
end

class Like < ActiveRecord::Base
  include ActiveModel::Validations
  validates_with UniquenessValidator

  attr_accessible :user_id

  belongs_to :likeable, polymorphic: true
  belongs_to :user
end 
```

在我的 Rails 控制台中，我尝试执行 Like.all （目前我的 Likes 表是空的）

```
1.9.2p320 :001 > Like.all
RuntimeError: :attributes cannot be blank
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activemodel-3.2.3/lib/active_model/validator.rb:141:in `initialize'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activerecord-3.2.3/lib/active_record/validations/uniqueness.rb:7:in `initialize'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activemodel-3.2.3/lib/active_model/validations/with.rb:84:in `new'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activemodel-3.2.3/lib/active_model/validations/with.rb:84:in `block in validates_with'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activemodel-3.2.3/lib/active_model/validations/with.rb:83:in `each'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activemodel-3.2.3/lib/active_model/validations/with.rb:83:in `validates_with'
        from /Users/user/Programming/WWW/Rails/experiments/test_app/app/models/like.rb:3:in `<class:Like>'
        from /Users/user/Programming/WWW/Rails/experiments/test_app/app/models/like.rb:1:in `<top (required)>'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:469:in `load'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:469:in `block in load_file'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:639:in `new_constants_in'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:468:in `load_file'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:353:in `require_or_load'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in `load_missing_constant'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in `block in const_missing'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `each'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in `const_missing'
        from (irb):1
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
        from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>'
1.9.2p320 :002 > 
```

这里发生了什么 ？（顺便说一句，如果我删除`validates_with UniquenessValidator`from `Like.rb`，我不会收到此错误）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:48:54.950

调用您的验证器 MyUniquenessValidator。

**UniquenessValidator 已存在**于活动记录中。这个字符串`from /Users/user/.rvm/gems/ruby-1.9.2-p320@test_app/gems/activerecord-3.2.3/lib/active_record/validations/uniqueness.rb:7:in`初始化'`正在告诉你它。

小心预定义的 ruby​​ 和 RoR 类（数据类型（例如，“Complex”）、rails 验证器等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-13T11:31:39.387

我知道这不是你的情况，但我得到了这个错误，因为我意外地从 EachValidator 而不是 Validator 子类化。

它是：

```
class UserProfileValidator < ActiveModel::EachValidator
  def validate(record)
  end
end 
```

它应该是：

```
class UserProfileValidator < ActiveModel::Validator
  def validate(record)
  end
end 
```

或者：

```
class UserProfileValidator < ActiveModel::EachValidator
  def def validate_each(record, attribute, value)
  end
end 
```

# java - 在 Eclipse 中验证两个引用指向同一个对象

> ID：10708569
> 
> 赞同：0
> 
> 时间：2012-05-22T19:14:40.680
> 
> 标签：java, eclipse

如果我在 Eclipse 中运行调试器，如何检查以确保一个类中的字段与另一个类中的字段指向同一个对象？我在两个类中都设置了断点，我很确定这两个字段都指向同一个对象，但是我该如何验证呢？（代码库太大而无法追踪周围的引用。）

如果我将鼠标悬停在相关字段上，我相信 Eclipse 会解决这个问题。（上面写着 MyClass@79d99e6b。地址指的是 RAM 中的对象，对吧？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:18:18.897

如果它们相同，它们是相同的[`identityHashCode`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:22:49.763

Eclipse 中的一种简单方法是在调试模式下查看变量选项卡。如果变量具有相同的 id，则可以确定它们是相同的引用。身份证=？位于变量选项卡上的值标题下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:20:32.477

地址应该指向 RAM 地址是的。我不熟悉 eclipse 的调试器，但如果它给你一个地址，而且它们对两者都是一样的，那么是的，它应该是相同的参考。

此外，根据您使用的语言，您可以放入一个小变量，它是指向对象地址的指针。（例如，在 c++ 中，如果 x 是变量，则为“&x”语法。假设我没记错）然后您可以检查参考变量的值。

# ruby-on-rails - 嵌套表单：link_to_add：自定义以使用多个字段_for builder

> ID：10708571
> 
> 赞同：4
> 
> 时间：2012-05-22T19:14:48.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, nested-forms

我有一个嵌套子对象类型的嵌套表单，它在表单上重复，以便我可以在表单元素中应用各种不同的默认值。将它们分成不同类别的子对象对我来说没有意义，因为我只是为了以对用户有意义的方式组织它们并填充不同的默认值而将它们分开；它们在其他方面是相同的。

在我的部分，我有这样的事情：

```
Children 1
<%= f.fields_for :children do |builder| %>
  <% next if not builder.object.type == 1 %>
  ... fields for type 1 children ...
<% end %>
<%= f.link_to_add( "add child", :children ) %>

Children 2
<%= f.fields_for :children do |builder| %>
  <% next if not builder.object.type == 2 %>
  ... fields for type 2 children ...
<% end %>
<%= f.link_to_add( "add child", :children ) %>

... etc ... 
```

这很好用，除了`link_to_add`总是给出具有最终`fields_for/builder`块（即类型 N 子项）的默认值的字段，而不是使用`fields_for/builder`紧邻它们上方的块的默认值。我怎样才能提供`link_to_add`正确的功能？

来自[https://github.com/ryanb/nested_form#enhanced-jquery-javascript-template](https://github.com/ryanb/nested_form#enhanced-jquery-javascript-template)：

> 您可以覆盖将新子表单插入表单的默认行为。例如：
> 
> ```
>  window.nestedFormEvents.insertFields = function(content, assoc, link) {
>    return $(link).closest('form').find(assoc + '_fields').append($(content));
>  } 
> ```

在我看来，必须对这个 insertFields 函数进行一些小的调整，让它复制所需的表单元素，而不仅仅是页面上的最终元素。我只有最简单的javascript经验，所以我希望有人能指出那是什么！

仅供参考，完整的 jquery 文件在这里： [https ://github.com/ryanb/nested_form/blob/master/vendor/assets/javascripts/jquery_nested_form.js](https://github.com/ryanb/nested_form/blob/master/vendor/assets/javascripts/jquery_nested_form.js)

非常感谢，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T18:17:00.680

我忽略了发布我为这个问题找到的解决方案。来晚了，来了。

我最终为我的子类型使用了单表继承 (STI)，使每个类型都成为一个类，尽管这对我来说太过分了。然后，以下工作：

```
<h>ClassOneChild form</h>
<%= f.fields_for :class_one_children do |builder| %>
  ...
<% end %>
<%= f.link_to_add( "add child", :class_one_children ) %>

<h>ClassTwoChild form</h>
<%= f.fields_for :class_two_children do |builder| %>
  ...
<% end %>
<%= f.link_to_add( "add child", :class_two_children ) %>

...

<%= f.submit "Save Children" %> 
```

# javascript - 为什么dojo会发出这个错误？未捕获的类型错误：对象 [对象对象] 没有方法“查询”

> ID：10708574
> 
> 赞同：-4
> 
> 时间：2012-05-22T19:15:14.187
> 
> 标签：javascript, dojo

此错误似乎发生在 AutoCompleterMixin.js 中。我无法确定这个问题的原因。我在 google chrome 中运行 Web 应用程序，并检查了脚本中是否存在 AutoCompleterMixin.js 文件。为什么会发生这种情况，我该如何解决？这是截断的代码，似乎是导致问题的原因。

```
dijit.byId("home").store=new dojo.data.ItemFileReadStore({data:information.list}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:09:47.317

很抱歉明显缺乏信息。我确实进行了谷歌搜索并找到了相同的信息，即组件可能正在寻找传递 dojo.data 的 dojo.store。答案是在 1.7.2 中需要设置一个 FilteringSelect。

所以，dijit.byId("home").set("x",dojo.data.ItemFileReadStore({data:information.list})

会成功的。

# javascript - 点击时显示 div 内容

> ID：10708577
> 
> 赞同：0
> 
> 时间：2012-05-22T19:15:20.830
> 
> 标签：javascript, jquery, html, css

我不确定如何用搜索引擎术语来表达我正在寻找的内容，所以我想做的是：

我想在页面的中心有一个或两个部门，如果需要的话，点击时会分开。顶部向上滑动，底部向下滑动，中间显示网站内容。

* * *

![点击](../Images/c47bbb7f94ac9847ea1bbb9a6af4b3d8.png)

* * *

![滑动](../Images/88b1dc034eb0cec23c5c85e4f0f2f027.png)

* * *

我不完全确定我的搜索词是如何正确执行的。我见过一些有这种变化的网站。只有那些打开左/右的。我确信这很困难，但任何有助于实现这一目标的帮助将不胜感激。

在此先感谢，BC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:19:43.943

如果您使用的是 JQuery，您可以简单地在目标 div 上使用[slideUp](http://api.jquery.com/slideUp/)和[slideDown 。](http://api.jquery.com/slideDown/)

**编辑**

实际上，在这种情况下，我认为*slideToggle*是您正在寻找的：

```
<script type='text/javascript'>
    $(document).ready(function() {
        $(".button").click(function() {
            $("#content).slideToggle();
        });
    });
</script>

<div class='button'>Top Panel</div>
<div id='content'>Content</div>
<div>Bottom Panel</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:56:07.983

我认为这就是你需要的：http: [//jsfiddle.net/WQCav/](http://jsfiddle.net/WQCav/)

HTML：

```
<div id="hider1" style="position:absolute;background-color:black;width:100%;height:50%;" onclick="displayWebsite();" ></div>
<div id="hider2" style="background-color:black;width:100%;height:50%;position:absolute;top:50%;" onclick="displayWebsite();" ></div>
HI 
```

JS：

```
var up,down;
function displayWebsite()
{
    if(typeof up!=="undefined")return;
    up=setInterval(goUp,20);
    down=setInterval(goDown,20);
}
function goUp(x)
{
    var h1=document.getElementById("hider1");
    if(h1.offsetHeight<=80)
    {
        clearInterval(up);
        return;
    }
    h1.style.height=parseInt(h1.style.height)-1+"%";
}
function goDown(x)
{
    var h2=document.getElementById("hider2");
    if(h2.offsetHeight<=80)
    {
        clearInterval(down);
        return;
    }
    h2.style.top=parseInt(h2.style.top)+1+"%";
    h2.style.height=parseInt(h2.style.height)-1+"%";
} 
```

CSS：

```
html,body
{
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:43:17.543

我刚刚解决了这个问题。我不希望 div 遍历它下面的材料，而是将其向下移动。这将使分割分成你想要的一半 - 你需要在滑动 div 下方的东西（比如另一个 div，或者一个 div 有一些不可见的高度和 CSS 中的 Auto 高度，以使其适用于你的主包装.

这是我所做的：

我的 CSS：

```
.slide {
    height:200px;
    background-color: white;
    padding:20px;
    margin-top:10px;
    -moz-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
    -webkit-box-shadow: inset 0 3px 8px rgba(0,0,0,.4);
    box-shadow: inset 0 3px 8px rgba(0,0,0,.24);

}

#show_div {
    margin-left: 40px;
    text-decoration: none;
    background-color: white;
    color: black;
    padding: 5px 10px;
    border: 1px solid #333;
    font-size: 20px;

} 
```

这是为了让它看起来很漂亮。下面是更多功能：

```
.show_hide {
    display:none; 
```

编码：在标题中我放置了 JQ 函数：

```
 $(document).ready(function(){

        $(".slide").hide();
        $(".show").show();

    $('.show').click(function(){
    $(".slide").slideToggle();
    });

}); 
```

​</p>

然后在 div 本身中不要忘记放置实际的好东西，这些东西将使您的 div 以您喜欢的方式执行：

```
<a id="show_div" href="#" class="show">Browse Styles</a>

    <div class="slide">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus fermentum, nibh at iaculis ultrices, mi eros tincidunt enim, vitae vehicula lectus odio a ipsum. Aliquam erat volutpat. Fusce id nisl sit amet diam iaculis pulvinar. Sed ultrices ullamcorper ornare. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis mi arcu, porta ut elementum et, ullamcorper sed eros. In euismod tellus sed ipsum adipiscing suscipit. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam ac magna dui. Aenean nec leo libero. Pellentesque lacinia dolor a dui lacinia consectetur. Mauris euismod porta magna, non dignissim orci adipiscing malesuada. Phasellus nunc sapien, consectetur nec vestibulum ac, euismod a ipsum.

    </div>
​ 
```

对此的主要影响是，您需要为每个要使用它的 div 放置一个 Jscript 实例，否则它们将同时激活。您可以将按钮（或链接）放在页面上的任何位置。我有几个并排的，当点击它们时，它们会从同一位置拆分页面。

如果您需要其中的多个，请不要忘记为 div 提供唯一的 id 并在 Jscript 中更改它们的名称以使魔术发生。

这是一个 JFIDDLE 示例：http: [//jsfiddle.net/vH3cK/1/](http://jsfiddle.net/vH3cK/1/)

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:22:16.707

第一个“div”应该由两个不同的 div 组成，一个用于顶部，另一个用于底部。您的页面内容首先应设置为“display:none”。当用户点击第一个 div 时，使用“$(selector).slideDown(500)”显示页面内容。必须对其进行测试，但我认为它应该像魅力一样起作用。您可以尝试使用 .show()、.toggle() 和不同的时间量（以毫秒为单位）来查看最适合的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T19:24:12.490

jQuery .animate() 函数也可能值得研究——它使用 CSS，这通常是更好的做法。

# php - 如何将应用页面重定向到 Facebook 的粉丝页面？

> ID：10708586
> 
> 赞同：1
> 
> 时间：2012-05-22T19:15:54.853
> 
> 标签：php, facebook, canvas

我有一个站点并设置了 facebook 连接，以便用户使用 facebook 登录，这工作正常。现在，如果我在浏览器中输入我的应用程序网址，它只会打开带有 facebook 徽标等的空白页面。我想在用户输入应用程序地址时显示他们的粉丝页面。就像当我们输入[http://apps.facebook.com/uno](http://apps.facebook.com/uno)时，它会向我们展示他们的粉丝页面[http://www.facebook.com/uno](http://www.facebook.com/uno)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:29:33.460

我使用 top.location.href，这应该重定向 Facebook 内的页面。

例如：top.location.href = "apps.facebook.com/yourappid"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:22:43.990

您可以访问页面的 html 吗？如果是这样，请尝试以下操作：

```
<p><META HTTP-EQUIV=REFRESH CONTENT="1; URL=http://www.facebook.com/uno"></p> 
```

它将浏览器重定向到粉丝页面。

# c# - 使用连接表创建关系

> ID：10708588
> 
> 赞同：0
> 
> 时间：2012-05-22T19:15:58.507
> 
> 标签：c#, entity-framework

我有两个通过连接表包含相关项目的表。

连接表包含 TableA-ItemId 和 TableB-ItemId。在我的实体模型中，我希望 ObjectA 拥有来自 TableB 的项目集合。如何使用实体框架实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:22:05.523

您正在寻找的是如何使用实体框架创建多对多关系。我将假设您使用 Code First 方法。

[http://www.codeproject.com/Articles/234606/Creating-a-Many-To-Many-Mapping-Using-Code-First](http://www.codeproject.com/Articles/234606/Creating-a-Many-To-Many-Mapping-Using-Code-First)

该项目应该让你站稳脚跟

或者[How to have Many to Many Association in Entity Framework Code First](https://stackoverflow.com/questions/4251794/how-to-have-many-to-many-association-in-entity-framework-code-first)应该能让你更快开始。在那个线程中进行了很好的讨论。

# visual-studio-2010 - 如何让 VS2010/ReSharper 记住我已经关闭了“单元测试会话”？

> ID：10708592
> 
> 赞同：1
> 
> 时间：2012-05-22T19:16:25.417
> 
> 标签：visual-studio-2010, settings, resharper-6.0

我已经在 VS2010 中关闭了“单元测试会话”窗格，但每次重新启动 VS 时它都会再次出现。

如何让 VS 记住我已关闭此窗格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:17:04.513

在 ReSharper 中取消选中以下选项：

`Options > Tools > Unit Testing > Save and restore Unit Test Sessions`

# c# - C# 中“厨房水槽”类的优缺点

> ID：10708594
> 
> 赞同：0
> 
> 时间：2012-05-22T19:16:34.053
> 
> 标签：c#

在单个 C# 类中拥有大量变量、属性和/或方法是否有任何明显的性能损失？

我有几个类（棋盘、移动生成器和 PGN 解析器），总共大约 1,200 行代码。移动生成器和解析器都与棋盘类紧密耦合，很容易将所有三个类简单地组合成一个大的“厨房水槽”类。

我理解并赞赏让每个类都专注于单一任务并干净地封装其内部设计的概念，但由于使用 .NET 是一项不可协商的要求，我也愿意牺牲“设计的纯粹性”以换取性能

除了明显的可读性/可维护性问题之外，与大量较小的简单类相比，拥有较少数量的大型复杂类有什么缺点？

干杯! 卑微的程序员,,,^..^,,,

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T19:19:53.883

> 在单个 C# 类中拥有大量变量、属性和/或方法是否有任何明显的性能损失？

拥有更多变量会导致实例具有更高的内存使用率和可能更长的构建时间 - 如果在每种情况下都不一定需要变量，这可能会产生不利影响。

话虽如此，主要的缺点更多是在可靠性、可维护性和可测试性方面。

> 我理解并赞赏让每个类都专注于单一任务并干净地封装其内部设计的概念，但由于使用 .NET 是一项不可协商的要求，我也愿意牺牲“设计的纯粹性”以换取性能

.NET 与编写糟糕的代码无关——您可以在同一个项目中拥有良好的设计和 .NET，事实上，这很容易实现。

> 我有几个类（棋盘、移动生成器和 PGN 解析器），总共大约 1,200 行代码。移动生成器和解析器都与棋盘类紧密耦合，很容易将所有三个类简单地组合成一个大的“厨房水槽”类。

我会考虑尝试找到重构它并将其解耦为更多、更小的类的动机。这可能会在各个方面都有帮助，包括性能（如果您认为有必要），因为在干净、经过深思熟虑的设计中解决性能问题通常比在紧密的设计中查找或解决性能问题更简单耦合，大型代码库。较小的类更容易分析和测量，这反过来允许发现和纠正真正的性能问题（如果有的话）比处理大量代码时更简单。

# image-processing - 从视频帧中去除运动模糊的开源库？

> ID：10708598
> 
> 赞同：1
> 
> 时间：2012-05-22T19:16:47.733
> 
> 标签：image-processing, opencv

我有一组从视频中提取的帧，并且想要删除运动模糊效果（主要是一维的）。是否有任何开源库可以做到这一点？我在 OpenCV 中找不到任何东西。我找到了很多关于这个主题的学术论文，但希望可能有一个图书馆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:34:04.823

我认为，avisynth 可以做到这一点。抱歉，说得太早了。avisynth 可以做帧插值，有利于改变采样率。它可以进行帧修复，根据它的邻居插入一个帧应该是什么。我不记得确切的去模糊选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T13:01:15.320

使用带有重尾先验的交替最大后验估计的盲反卷积是一种可能的方法，但它非常慢。见[http://zoi.utia.cas.cz/deconv_sparsegrad](http://zoi.utia.cas.cz/deconv_sparsegrad)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:00:41.157

您可以在此处找到运动去模糊算法的 Matlab/C 代码：[http ://www.umiacs.umd.edu/~aagrawal/MotionBlur/index.html](http://www.umiacs.umd.edu/~aagrawal/MotionBlur/index.html)

您需要将 Matlab/C 代码移植到 OpenCV。

# cakephp - CakePHP 2.x - jQuery EasyUI - 如何将 jQuery EasyUI 放入 CakePHP 2.x？

> ID：10708599
> 
> 赞同：1
> 
> 时间：2012-05-22T19:16:50.737
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有个问题。我不知道在 CakePHP 中将 jQuery EasyUI 放在哪里？哪个文件夹？

我像帮手一样使用它吗？

我是否必须输入以下内容：

```
var  $helpers = array('jQuery'); 
```

我必须把一些放在眼里吗？

非常感谢您一直以来的帮助。:)

编辑：

如果你能给我一些关于 jQuery EasyUI 和 CakePHP 2.x 的在线教程。（我已经谷歌了。）：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:42:28.950

因为这个问题是针对 CakePHP 2.x 的，所以正确的答案是：

```
echo $this->Html->script('jquery-1.7.2.min'); 
```

请注意，JavaScript 文件没有扩展名。[HtmlHelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#htmlhelper)的[script() 函数](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper%3a%3ascript)包括来自 app/webroot/js forlder 的脚本文件。您还可以加载多个脚本文件：

```
echo $this->Html->script(array(
    'jquery/jquery-1.7.2.min',
    'jquery/jquery-ui-1.8.19.custom.min',
    'jquery/jquery.tooltip.min',
    'raphael',
    'main',
    'screen'
)); 
```

脚本依赖性和优先级也在这里起作用。这意味着如果说**scriptA.js**依赖于**scriptB.js**，则必须先加载后者：

```
echo $this->Html->script(array(
    'scriptB',
    'scriptA'
)); 
```

当您加载 jQuery 插件时，您也必须注意这一点。请注意，在我给出的加载多个脚本文件的示例中显示了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:43:13.663

在 CakePHP 中，javascript 文件存储在 app/webroot/js/ 中。

然后，您可以通过调用将它们包含在布局中

```
echo $html->script('jquery-1.7.2.min.js'); 
```

然后，您可以在视图或另一个外部 js 文件中编写您的 javascript 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T12:01:26.193

```
echo $html->script('jquery-1.7.2.min'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:52:53.537

将 jQuery 和 jQuery EasyUI 源代码上传到您的 /app/webroot/js 目录

在您的布局中（如果您希望它包含在所有页面中）或在单个视图中链接到它们：

```
<?php $this->Html->script(array('jquery.js', 'jquery-easyui.js'), array('inline'=>false)); ?> 
```

（用实际文件名替换 jquery.js 和 jquery-easyui.js 文件名）

如果您正确加载了库（使用 Firebug 检查 ;-)，您应该能够使用内联脚本（不推荐）或加载外部脚本：

```
<?php $this->Html->script(array('jquery.js', 'jquery-easyui.js', 'myscript.js'), array('inline'=>false)); ?> 
```

注意：包含它们的顺序很重要。

# c++ - 如何重载运算符+？

> ID：10708600
> 
> 赞同：0
> 
> 时间：2012-05-22T19:16:51.503
> 
> 标签：c++, operator-overloading

有人可以用**初学者**的方式解释运算符重载的工作原理吗？我需要将“+”运算符作为成员函数重载，并链接到对象数组。我从谷歌读过一些东西，它的运行方式似乎与“+”相同，没有超载，所以我真的很困惑。

这是我到目前为止的声明：

```
ALIST<t_type> & operator+(const t_type ); 
```

所以我在公共部分的 ALIST 类中声明了这一点。“+”运算符现在是否已重载，还是在此函数定义中我需要做更多才能使其重载？

另外，一旦它最终超载，我现在可以用它做什么？超载它有什么意义？

请用初学者的术语解释一下，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:02:42.107

这是为什么的一个例子。

假设您正在实现一类特殊向量。比如一个`Color`类。 `Color`s 将基本上是具有 4 个值的向量，r,g,b,a。

现在我们正在编写一个图形引擎，在我们的程序中，我们经常想知道当来自两个不同来源的光作用于我们正在评估的像素（如光线追踪器中）时，像素会发生什么。定义一个 + 运算符来评估当来自两个不同光源的光加在一起时会发生什么会很方便。

如果我们没有运算符，您可以在代码中编写将两个`Color`s 相加：

```
Color newColor = Color(
    color1.r + color2.r, 
    color1.g + color2.g,
    color1.b + color2.b,
    color1.a + color2.a
); 
```

更糟糕的是，如果您与光的物理特性密切合作，您可能会发现颜色无法正常添加。例如，它们可能会根据一些线性函数相加，例如 f(a) = a^2 ...（我不认为光不会这样做，它只是一个随机示例）。

```
f(a) = a^2; f(b) = b^2
f(a + b) = ??
a = f(a)^.5; b = f(b)^.5
a + b = f(a)^.5 + f(b)^.5
f(a + b) = (f(a)^.5 + f(b)^.5)^2 *yada yada yada i'm terrible at math. 
```

这意味着我们`Color`现在添加的代码变成了

```
Color newColor = Color(
    pow(pow(color1.r, .5) + pow(color2.r, .5),2), 
    pow(pow(color1.g, .5) + pow(color2.g, .5),2),
    pow(pow(color1.b, .5) + pow(color2.b, .5),2),
    pow(pow(color1.a, .5) + pow(color2.a, .5),2), 
); 
```

写出来很痛苦。但是，当然，如果我们使用`Color`类，并覆盖 add 运算符来为我们完成所有这些操作，我们可以在我们的代码中编写

```
Color color = color1 + color2; 
```

在`Color`类定义中定义了这个

```
Color Color::operator+(const Color &rhs) const {
     return Color(
           pow(pow(this.r, .5) + pow(rhs.r, .5),2), 
           pow(pow(this.g, .5) + pow(rhs.g, .5),2),
           pow(pow(this.b, .5) + pow(rhs.b, .5),2),
           pow(pow(this.a, .5) + pow(rhs.a, .5),2)
     ); 
} 
```

由于我们的特殊添加代码只在一个地方，您可以更好地优化它，并且您程序其余部分的代码变得更具可读性。

至少这是一种看待它的方式。过去，我更喜欢这样的函数，`addLights(color1, color2)`因为它更容易编码，同样容易阅读，而且更易读，因为很明显它不是传统的`vector`添加。我敢打赌，你的整个职业生涯都不会凌驾于运营商之上，我认为你不会错过太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:19:47.160

如果您有一个自定义类并且希望能够将该类的两个实例“添加”在一起，则 operator+ 重载将允许您自定义如何将两个对象“添加”在一起。

您现在需要在 .h 或 .cpp 文件中实现 operator+ 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:39:20.960

到目前为止，您得到了正确的声明，然后您需要实现它，例如，通过将输入参数添加到内部管理的数组来填充主体。

当您将其放在适当位置时，您将可以说 `mylist = mylist + mytype;`而不是`mylist.add(mytype)` 例如。在这种情况下没什么大不了的，但是如果您正在开发自然应该使用标准运算符（如数学矩阵、向量、复数等）的类，或者如果您`[]`在类中覆盖运算符，`ALIST`则更有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:54:42.123

默认情况下，运算符符号设计为与内置类型（int、char、string 等）一起使用。

C++ 的创建者不可能定义操作数应该如何为用户定义的类型工作，因此他实现了一个系统，您可以在其中重载它们并以在该对象的上下文中有意义的方式自己定义行为。

您通常会像这样重载运算符：

在类.h

```
class MyClass {
    int a;
    MyClass(int value) : a(value) {}
    MyClass MyClass::operator+(const MyClass&) const;
} 
```

在类.cpp

```
MyClass MyClass::operator+(const MyClass& other) const
{
    return MyClass(this->a+other.a);
} 
```

这将返回一个`MyClass`带有变量 a 的新变量，该变量设置为两个`MyClass`a 相加的值。完成后，您可以执行以下操作：

```
MyClass first(2);
MyClass second(5);
MyClass last = first + second;
std::cout << last.a << std::endl; // prints 7, which is the result of 2+5 
```

如果不重载`operator+`on `MyClass`，将两个`MyClass`' 加在一起将是无效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T20:01:41.467

如前所述，必须有一个实现。仅仅对重载进行原型设计并不能让编译器为您编写操作。

如果您是初学者*（或至少，在**“初学者术语”**中寻求答案）*，运算符重载不一定是直接在重要项目中使用的最佳主意。涉及一些语义问题......因为这`+`是一个非常抽象的符号，对于阅读您的代码的人可能意味着许多不同的东西，而更具描述性的名称可能会更好。

请注意，即使是标准库也不提供诸如附加`+=`到向量之类的功能，因为它们存储可能添加在一起的元素...或附加向量...或在末尾添加一个元素...添加恶心*[双关语意图]*。将“添加”的一个定义称为最“正确”是很棘手的：

[为什么不为 std::vector 重载 operator+=()？](https://stackoverflow.com/questions/6366231/why-not-overload-operator-for-stdvector)

*（请注意，由于`std::string`不存储任意数学类型，所以它不那么模棱两可。）*

也很难搜索这些运算符方法被调用的位置，因为您的方法没有唯一的名称可供搜索。要找到调用，您必须筛选`+`用于算术和字符串类等的上下文。

除了命名问题之外，我还会提到运算符重载在您以后是否要传递其他参数方面会束缚您的手。如果您想在每次将某些内容放入列表时使用优先级参数进行扩展怎么办？有一些技巧可以绕过它，例如将重载维护为默认实现以及使用参数化方法。或者您可以执行 iostreams 所采用的方法`<iomanip>`：

[http://www.cplusplus.com/reference/iostream/manipulators/](http://www.cplusplus.com/reference/iostream/manipulators/)

但这只是指出了在深入研究域中的运算符重载之前应该谨慎使用的想法。另一个需要注意的微妙之处是使用类的全局“朋友”函数重载与使用成员重载之间的区别。这里有一个讨论...

[运算符重载：成员函数与非成员函数？](https://stackoverflow.com/questions/4622330/operator-overloading-member-function-vs-non-member-function)

*重要的一点是，如果您想为操作左侧*出现非类（例如整数）的情况赋予意义，则无法将方法添加到`int`. 因此，您必须使其成为全局过载。

# iphone - 在 IOS 中创建自定义 UITableView

> ID：10708606
> 
> 赞同：0
> 
> 时间：2012-05-22T19:17:15.087
> 
> 标签：iphone, ios, xcode, uitableview, ios5

我正在使用 XCode 使用 iOS5 SDK 和 StoryBoards 在 iPhone 上开发应用程序。我正在为应用程序中的好友列表创建一个视图，该视图应具有以下格式：

b1 | b2 | b3
b4 | b5 | b6
b7 | b8 | b9
.... | .... | ……

b 对应于具有 UIImage 和 2 个标签的伙伴单元格。

所以基本上我试图在行中创建视图，并且每 3 个好友（列）会为下一个条目出现一个新行。在四处搜索后，我发现与此类似的解决方案是创建一个垂直表，其中每个单元格都包含一个水平表，其中包含将包含好友信息的单元格，并进行适当的自定义，例如转换等。

现在我知道该怎么做，所以我的问题是，这是最好的解决方法，还是有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:28:52.257

这是一个链接，其中包含有关谁为 UITableView 创建自定义单元格的教程

[http://mobileorchard.com/ios-development-tutorial-series-tableviews/](http://mobileorchard.com/ios-development-tutorial-series-tableviews/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:21:42.480

如果没有创建自己的控件，我会这样做：

*   创建一个最多显示 3 个好友的单元格
*   创建一个返回正确行数的数据源类（假设每行有 3 个好友）
*   数据源应将您的自定义单元格初始化为该行的（最多）3 个伙伴。

# selenium - Selenium webdriver 找不到文本字段元素

> ID：10708607
> 
> 赞同：2
> 
> 时间：2012-05-22T19:17:20.893
> 
> 标签：selenium, webdriver

Selenium Webdriver 无法找到下面的元素。我尝试过使用 name 和 xpath，但都没有。我正在使用 ruby​​（但这没关系）需要一种方法来识别下面的页面对象

```
<input name="description" maxlength="128" value="" onmouseover="hoverField(this)"   onmouseout="jjj" onblur="blurField(this)" onfocus="focusField(this)" class="formInputFieldFilled" type="text"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:25:46.593

这对我有用，使用 XPath：

```
//input[@name='description'] 
```

我会冒险猜测它很可能在另一个 IFrame 中，所以请仔细检查一下。

也可能是该元素当时在页面上不可见的问题，因此请查看 WebDriverWait：

[http://seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)

# objective-c - 在 UIViewController 中创建整个 UIView

> ID：10708610
> 
> 赞同：1
> 
> 时间：2012-05-22T19:17:43.010
> 
> 标签：objective-c, uiview, uiviewcontroller

我有一个 UIViewController (controller1)，它在 UIView 上显示一些 UIbuttons。当单击其中一个按钮时，我想实例化第二个 UIViewController（controller2，它是一个完全不同的控制器类），然后它将以编程方式创建一些 UIView，并将它们添加到由 controller1 管理的 UIView 之一。

所以，在 controller1 我想要以下代码：

```
- (void) someButtonPressed: (id)sender
{
    ViewController2* controller2 = [ [ ViewController2 alloc ] initWithNibName:nil bundle:nil ];
} 
```

然后我想以编程方式在 controller2 中创建额外的 UIViews。理想情况下，我不会在 controller1 中再添加任何代码行（以添加视图等）。我真的很想创建所有视图并将它们从 controller2 代码中添加到现有视图中。

我可以这样做吗，怎么做？我试过简单地将以下代码放在控制器2中：

```
- (void)loadView
{

    NSLog(@"HPSViewEditorViewController loadView");

} 
```

但它不会被调用。

我想将控制器 2 的整个 UIView 层次结构封装在控制器 2 代码中，并且不想将控制器 1 与控制器 2 实例化以外的任何东西“混淆”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:54:00.633

来自[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

> 视图控制器在其视图属性被请求但当前为 nil 时调用此方法。此方法加载或创建视图并将其分配给视图属性。

-loadView 在 controller2.view 被引用之前不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:00:09.070

我会尝试类似的东西

```
[viewController1 presentModalViewController:viewController2 animated:YES]; 
```

这可以解决问题...

# cordova - 是否可以使用 PhoneGap 读取 nfc 标签 UID？如何？

> ID：10708614
> 
> 赞同：5
> 
> 时间：2012-05-22T19:17:52.993
> 
> 标签：cordova, nfc, phonegap-plugins

我想阅读一个`NFC`标签的`UID`，标签没有任何`ndef`消息或任何东西（空），只是`UID`。在 Android 上很容易做到，但 Phonegap 的开发速度要快得多，所以我想知道是否有可能让它在 Phonegap 上运行，可能使用[phonegap-nfc](https://github.com/chariotsolutions/phonegap-nfc)插件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-25T03:20:19.627

phonagap [-nfc 插件](http://github.com/chariotsolutions/phonegap-nfc)将允许您阅读`tag's UID`.

`nfc.addTagDiscoveredListener()`如果您需要标签 ID，那就太好了。自`phonegap-nfc-0.4.0`标签 ID 可用时，它也包含在`NDEF`侦听器中。

您可以将 id 转换为十六进制字符串以显示`nfc.bytesToHexString(tag.id)`

```
function ready() {

    function onNfc(nfcEvent) {

        var tag = nfcEvent.tag;
        var tagId = nfc.bytesToHexString(tag.id);
        alert(tagId);

    }

    function win() {
        console.log("Listening for NFC Tags");
    }

    function fail(error) {
        alert("Error adding NFC listener");
    }

    nfc.addTagDiscoveredListener(onNfc, win, fail);
}

function init() {
    document.addEventListener('deviceready', ready, false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:39:02.220

答案就在您的问题中：是的，使用 NFC 插件。为任何标签添加回调`nfc.addTagDiscoveredListener()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T09:54:23.947

我尝试过使用 phonegap nfc 插件，该应用程序运行良好，日志上没有错误，每当我读取标签 UID 时，我都会得到未定义。

# c++ - 一起编译多个 C++ 文件与分别编译

> ID：10708620
> 
> 赞同：0
> 
> 时间：2012-05-22T19:18:13.990
> 
> 标签：c++, compilation

对于大型 C++ 项目，最好是在一次 g++ 的大调用中编译所有 cpp 文件，还是单独编译它们，然后链接结果或者可能是中间的东西（比如一次编译命名空间/模块/子目录的所有文件）。

实际的区别是什么？哪种方法最快，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:32:26.517

单独编译文件然后链接是更好的做法，因为它允许您在修改时仅重新编译受影响的文件。因此，第一次构建后构建时间最小化。

实际上，由于上​​述原因，大部分时间都使用这种方法准备了 makefile。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:23:23.663

有个窍门。假设你有一堆文件

```
file1.cpp
file2.cpp
... 
fileN.cpp 
```

然后您可以创建“master.cpp”文件：

```
#include "file1.cpp"
#include "file2.cpp"
...
#include "fileN.cpp" 
```

并编译它。

通过这种方式，您可以轻松比较单个文件和文件组的构建时间。

如果您在 UNIX 上，请使用“时间”来获取 gcc 调用的执行时间。

而且，当然，瓶颈是“聚集”操作——链接阶段。有一个 GOLD 链接器（[维基百科](http://en.wikipedia.org/wiki/Gold_%28linker%29)）可以解决 ELF 文件的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:21:21.807

显然，考虑到您在多核或多 CPU 系统上，并行启动多个编译器进程将导致更有效的 CPU 使用。然而，整个项目的主要瓶颈仍然是实际上必须从所有目标文件创建可执行文件的链接器。

除此之外，这实际上取决于项目本身。文件之间有多少依赖关系？哪些需要先编译？你最好让你的构建系统为你做这些决定。

# c++ - 使用 ctypes 的回调函数

> ID：10708624
> 
> 赞同：2
> 
> 时间：2012-05-22T19:18:21.373
> 
> 标签：c++, python, struct, callback, ctypes

我有C中的代码：

```
typedef result function_callback(struct mes_t* message, void* data) 
struct mes_t
{
uint32_t field1
uint32_t field2
void* data
};
function_one(&function_callback, data) 
```

应用程序调用用户定义的（在*function_one*中）回调函数*function_callback*。在回调函数中传递field1、field2和data参数（data通常等于0）

此示例的 python 代码是否正确编写？

```
class mes_t(ctypes.Structure):
    pass
mes_t._fields_ = [
    ('field1', ctypes.c_uint32),
    ('dfield2', ctypes.c_uint32),
    ('data', ctypes.POINTER(ctypes.c_void_p))]
data_t=ctypes.c_void_p
data=data_t()
CALLBACK=CFUNCTYPE(ccg_msg, data_t)
cb_func=CALLBACK()
result = function_one(ctypes.byref(cb_func), ctypes.byref(data)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T16:00:43.773

我在这里猜到了解释代码的正确方法。在此处调整示例片段：

```
typedef int /* or whatever */ result;

struct mes_t
{
    uint32_t field1;
    uint32_t field2;
    void* data;
};
typedef result function_callback(struct mes_t* message, void* data);
result function_one(function_callback fcb, void* data); 
```

下面是一些使用 Python 的 ctypes 示例`function_one()`：

```
class mes_t(ctypes.Structure):
    _fields_ = (
        ('field1', ctypes.c_uint32),
        ('field2', ctypes.c_uint32),
        ('data', ctypes.c_void_p))

result_t = ctypes.c_int; # or whatever

callback_type = ctypes.CFUNCTYPE(result_t, ctypes.POINTER(mes_t), ctypes.c_void_p)
function_one.argtypes = (callback_type, ctypes.c_void_p)
function_one.restype = result_t

data_p = ctypes.c_char_p('whatever')

def the_callback(mes_p, data_p):
    my_mes = mes_p[0]
    my_data_p = ctypes.cast(data_p, ctypes.c_char_p)  # or whatever
    my_data = my_data_p.value
    print "I got a mes_t object! mes.field1=%r, mes.field2=%r, mes.data=%r, data=%r" \
          % (my_mes.field1, my_mes.field2, my_mes.data, my_data)
    return my_mes.field1

result = function_one(callback_type(the_callback), ctypes.cast(data_p, ctypes.c_void_p)) 
```

你会发现这和你的代码有很多不同。可能太多，无法对所有内容进行全面解释。但是，如果有一些看起来特别令人困惑，我可以解释一些特定的部分。不过，一般来说，重要的是要很好地理解 ctypes 指针的工作原理（例如，您可能不想要指向 void 指针的指针，但这就是您的 python 代码所做的）。

# javascript - 需要添加到javascript代码中的显示/隐藏图像旋转href按钮

> ID：10708627
> 
> 赞同：0
> 
> 时间：2012-05-22T19:18:28.800
> 
> 标签：javascript, jquery

我有以下脚本，当您单击 div 中的图像时，它会在新窗口中打开相应的 href 链接。同时，在父页面被点击的 div 被隐藏，显示下一个 div。

还有一个“下一步”按钮，所以为了前进到下一个 div 而不点击图像。此“下一步”按钮不会打开当前 div 上的相应 a href。它只是跳到下一个 div。

这一切都很完美，但是我现在尝试添加一个按钮，单击该按钮将带您到可见 div 的 href 位置。

那有意义吗？

这是一个 JSFiddle 演示：http: [//jsfiddle.net/QTyRq/](http://jsfiddle.net/QTyRq/)

这是代码...

```
<div id="container">
    <div class="imgrotation"><a href="http://google.com" target="_blank"><img src="abc.jpg" width="100" height="100" border="0" /></a></div>
    <div class="imgrotation"><a href="http://yahoo.com" target="_blank"><img src="def.jpg" width="200" height="200" border="0" /></a></div>
    <div class="imgrotation"><a href="http://msn.com" target="_blank"><img src="ghi.jpg" width="300" height="300" border="0" /></a></div>
    <div class="imgrotation"><a href="http://bing.com" target="_blank"><img src="jkl.jpg" width="400" height="400" border="0" /></a></div>
</div>

<button id="nextimg">Next Image</button>

<!--This is what I need added to JS -->
<button id="gotourl">Visit Site</button> 
```

查询：

```
var alldoneURL = 'next-image-group.html'; //final click
function next(event, duration) {
    duration = duration || 900; // default value
    var that = $('.imgrotation:visible');
    if (that.next('.imgrotation').length) {
        that.fadeOut(duration, function() {
            that.next('.imgrotation').fadeIn(duration);
        });
    } else {
        window.location.href = alldoneURL;
    }
    return false;
}

$('.imgrotation').not(':first').hide();
$('.imgrotation a').click(

function(e) {
    e.preventDefault();
    var newWin = window.open(this.href), //(this.href, 'newWindow') to load all clicks in one window.open
        duration = 900;
    next(e, duration);
});
$('#nextimg').click(next); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:32:31.663

添加这个jquery也可以

```
$('#gotourl').on('click',function(){
      window.open($(".imgrotation:visible a").prop('href'));
}); 
```

​ ​</p>

[http://jsfiddle.net/QTyRq/3/](http://jsfiddle.net/QTyRq/3/)

```
function$('#gotourl').on('click',function(){
    window.open($(".imgrotation:visible a").prop('href'));
    $('#nextimg').trigger('click');
}); 
```

​<a href="http://jsfiddle.net/QTyRq/4/" rel="nofollow">同时更新了 JSFIDDLE

# asp.net - DropDownList 两个 SqlDataSources

> ID：10708628
> 
> 赞同：1
> 
> 时间：2012-05-22T19:18:37.970
> 
> 标签：asp.net, .net, drop-down-menu, sqldatasource

我在 DetailsView 中有一个 DropDownList 作为 TemplateField。我想使用将从一个 SqlDataSource 中提取的所有可能选项填充此 DropDownList，同时将 DropDownList 的选定值分配给来自 DetailsView 绑定到的 SqlDataSource 的当前值。所以像：

```
<asp:DetailsView DataSourceID="SqlDataSource1">
    <asp:TemplateField>
         <asp:DropDownList ID="Serial">
           /* Here is where I need to bind the dropdown to data source 2 so that All serials are available while selecting it's current value from data source 1.
    </asp:TemplateField>
</asp:DetailsView>

<asp:SqlDataSource ID="SqlDataSource1"
    SelectCommand = "Select SerialNumber From Equipment Where EquipID = @EquipID">
   <SelectParameters>
        <asp:ControlParameter ControlID="GridView1" DefaultValue=""
            Name="EquipID" PropertyName="SelectedDataKey.Values[EquipID]" />
   </SelectParameters>
</asp:SqlDataSource>

<asp:SqlDataSource ID="SqlDataSource2"
    SelectCommand = "Select SerialNumber From Equipment">
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:54:33.897

您可以将 的 分配给`DataSourceID`填充`DropDownList`选项的数据源，然后将 分配给`SelectedValue`绑定到 的数据源中的当前值`DetailsView`：

```
<asp:DropDownList ID="Serial" DataSourceID="SqlDataSource#"
    DataValueField="..." DataTextField="..."
    SelectedValue='<%#Bind("MYFIELDNAME")%>'>
</asp:DropDownList> 
```

where`MYFIELDNAME`来自绑定到`DetailsView`表示该记录的当前值的数据源。

# wordpress - 将我的 Blogger（自定义）域移至新的托管服务提供商

> ID：10708631
> 
> 赞同：0
> 
> 时间：2012-05-22T19:18:59.920
> 
> 标签：wordpress, dns, google-apps, blogger

我希望将我的自定义域从博客移至 wordpress。我通过谷歌购买了域名，现在它是谷歌应用程序帐户。我想做的是将站点更改为指向新主机，但我想保持其他所有内容都完好无损（当前的博客将继续存在，我只是希望将域指向新主机） . 我想让谷歌应用程序继续运行，这样我就可以管理电子邮件等。

目前域名是通过ENOM，默认托管信息为：

```
@   216.239.32.21   A (Address)
@   216.239.34.21   A (Address)
@   216.239.35.21   A (Address)
@   216.239.36.21   A (Address)
docs   ghs.google.com   CNAME (Alias)
calendar   ghs.google.com   CNAME (Alias)
...(Rest of the google apps here) 
```

那么，有没有办法将虚拟主机指向我的新媒体殿堂主机？那么 www.mydomain.com 是从媒体殿堂主机那里得到服务的吗？

如果我将 DNS 设置更改为“自定义”，我会丢失所有 google 内容，并且它说我可以设置 MX 记录的唯一方法是使用默认设置。

有没有人这样做过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:35:04.933

如果您选择自定义 DNS，您可以设置 DNS 以继续与 Google 合作。此处的一些步骤[http://support.google.com/a/bin/answer.py?hl=en&answer=140034](http://support.google.com/a/bin/answer.py?hl=en&answer=140034) http://support.google.com/a/bin/answer.py?hl=en&answer=54693

然后将网站 (A) 记录指向您的新主机。

（顺便说一句，我不是 Media Temple 的粉丝。我有一个客户，那里有一个 WP 网站，而且有更好的主机。）

我有很多由多个主机托管的网站，以及通过 Google Apps 电子邮件运行的电子邮件，包括 MT 上的客户。

# php - 查询中的变量

> ID：10708635
> 
> 赞同：0
> 
> 时间：2012-05-22T19:19:21.703
> 
> 标签：php, mysql, database

```
UPDATE ost_timeblock 
SET 
  timeblock_due_date=DATE(timeblock_next_update),
  timeblock_next_update=DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time **timeblock_recurrence_unit** )
WHERE timeblock_recurrence=1 
  AND timeblock_complete=0 
  AND timeblock_next_update=FROM_UNIXTIME(1337662800) 
```

当我使用手动日期或月份时，`timeblock_recurrence_unit`它工作正常。

`timeblock_recurrence_unit = enum(day,month,year)`我想要`timeblock_recurrence_unit`在上面的粗体位置的值

有什么办法可以处理案件。

```
If timeblock_recurrence_unit = 'day' then 
timeblock_next_update=DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time day )

If timeblock_recurrence_unit = 'month' then  
timeblock_next_update=DATE_ADD(NOW(),INTERVAL timeblock_recurrence_time month) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:28:34.253

```
UPDATE ost_timeblock SET 
    timeblock_due_date = DATE(timeblock_next_update),
    timeblock_next_update = DATE_ADD(NOW(), INTERVAL timeblock_recurrence_time      
**timeblock_recurrence_unit** )
WHERE 
    timeblock_recurrence=1 
AND timeblock_complete=0 
AND timeblock_next_update = FROM_UNIXTIME(1337662800) 
```

根据mysql文档： [http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

date_add 功能接受日期和单位的倒数，以执行日期算术。你必须提供一个给定的单位，而不是你想要的单位的枚举。

您将不得不修改您的功能要求，并且可能再次考虑 DATE_ADD 方法是否正在执行所需的操作。

rgds。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:34:09.350

您可以按如下方式使用用户定义变量；见[http://dev.mysql.com/doc/refman/5.0/en/user-variables.html](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)

```
SET @timeblock_recurrence_unit = 'DAY';
UPDATE ost_timeblock SET
 timeblock_due_date=DATE(timeblock_next_update),
 timeblock_next_update=DATE_ADD(
       NOW(),
       INTERVAL timeblock_recurrence_time @timeblock_recurrence_unit
 ) WHERE 
    timeblock_recurrence=1 AND 
    timeblock_complete=0 AND
    timeblock_next_update= FROM_UNIXTIME(1337662800); 
```

# cakephp - 使用模型中的表字段创建标签

> ID：10708639
> 
> 赞同：1
> 
> 时间：2012-05-22T19:19:27.537
> 
> 标签：cakephp, cakephp-1.3

PHP

```
echo $this->Form->create('Street');
echo $this->Form->input('street', array('empty' => '-- select --', 'label' => '???')); 
```

D B

```
ID | Street | Description
-----------------------
1  | Foo    | Street 1 description
2  | Bar    | Street 2 description
3  | FooFoo | Street 3 description 
```

我想创建如下标签：

```
Foo - Street 1 description 
```

像：

```
echo $this->Form->input('street', array('empty' => '-- select --', 'label' => 'Street.street - Street.description')); 
```

如何使用 Cakephp Form Helper 生成它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:33:54.417

我不明白你为什么要这样做，但这取决于你想在哪里做。如果您在添加操作中，显然您无法从数据库中读取，因为其中还没有这样的记录。如果您正在进行编辑操作（我假设它已被烘焙），则您在视图中拥有数据。因此，您可以执行以下操作：

在控制器中应该有类似的东西：

```
//There should be a variable called $street containing the record data for this to work
//The following sets $street, so it is accessible as $street in the view 
$this->set(compact('street')); 
```

在视图中：

```
echo $this->Form->input('street', array('empty' => '-- select --', 'label' => $street['Street']['description'])); 
```

如果有很多记录，则该`$street`数组将被索引。

# java - JavaFx 2.0 - 一种游戏精灵动画的方法

> ID：10708642
> 
> 赞同：4
> 
> 时间：2012-05-22T19:19:38.373
> 
> 标签：java, swing, javafx-2

哇... JavaFx 2 在游戏编程方面让我陷入了困境。我正在尝试确定如何最好地处理玩家控制的精灵动画。（即制造敌人和事物以及玩家动画）。

我知道如何编写代码来读取 spritesheet 并在 AS3 或 Java swing 中设置游戏循环......但是我很难理解我的游戏中的动画循环应该如何与任何组件交互FX 就是渲染。

我研究过api。有一个 TranslateTransition 类。但与其他语言相比，它似乎太过分了。其他的 eberything 看起来完全基于界面或过于有限。

我正在阅读 Weaver 的 Pro JavaFx2 ......而且我在复制这种编码风格时遇到了麻烦。但我可以阅读它找到:) 不知道是爱还是恨这个野兽呢。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T21:10:15.707

阅读此博客条目：http: [//blog.netopyr.com/2012/03/09/creating-a-sprite-animation-with-javafx/](http://blog.netopyr.com/2012/03/09/creating-a-sprite-animation-with-javafx/)

这是有史以来最好的 JavaFX sprite 动画实现 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-17T22:44:32.067

我参加这个聚会有点晚了，但我想我会为使用 JavaFX 的精灵动画贡献我的解决方案。这是一个您可以粘贴到您自己的项目中的类，以使用 ImageView 显示精灵动画，该动画与帧速率无关。

```
import javafx.animation.AnimationTimer;
import javafx.geometry.Rectangle2D;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;

public class ImageViewSprite extends AnimationTimer {

    private final ImageView imageView; //Image view that will display our sprite

    private final int totalFrames; //Total number of frames in the sequence
    private final float fps; //frames per second I.E. 24

    private final int cols; //Number of columns on the sprite sheet
    private final int rows; //Number of rows on the sprite sheet

    private final int frameWidth; //Width of an individual frame
    private final int frameHeight; //Height of an individual frame

    private int currentCol = 0;
    private int currentRow = 0;

    private long lastFrame = 0;

    public ImageViewSprite(ImageView imageView, Image image, int columns, int rows, int totalFrames, int frameWidth, int frameHeight, float framesPerSecond) {
        this.imageView = imageView;
        imageView.setImage(image);
        imageView.setViewport(new Rectangle2D(0, 0, frameWidth, frameHeight));

        cols = columns;
        this.rows = rows;
        this.totalFrames = totalFrames;
        this.frameWidth = frameWidth;
        this.frameHeight = frameHeight;
        fps = framesPerSecond;

        lastFrame = System.nanoTime();
    }

    @Override
    public void handle(long now) {
        int frameJump = (int) Math.floor((now - lastFrame) / (1000000000 / fps)); //Determine how many frames we need to advance to maintain frame rate independence

        //Do a bunch of math to determine where the viewport needs to be positioned on the sprite sheet
        if (frameJump >= 1) {
            lastFrame = now;
            int addRows = (int) Math.floor((float) frameJump / (float) cols);
            int frameAdd = frameJump - (addRows * cols);

            if (currentCol + frameAdd >= cols) {
                currentRow += addRows + 1;
                currentCol = frameAdd - (cols - currentCol);
            } else {
                currentRow += addRows;
                currentCol += frameAdd;
            }
            currentRow = (currentRow >= rows) ? currentRow - ((int) Math.floor((float) currentRow / rows) * rows) : currentRow;

            //The last row may or may not contain the full number of columns
            if ((currentRow * cols) + currentCol >= totalFrames) {
                currentRow = 0;
                currentCol = Math.abs(currentCol - (totalFrames - (int) (Math.floor((float) totalFrames / cols) * cols)));
            }

            imageView.setViewport(new Rectangle2D(currentCol * frameWidth, currentRow * frameHeight, frameWidth, frameHeight));
        }
    }
} 
```

使用以下方法实现这一点：

```
ImageViewSprite anim = new ImageViewSprite(ImageView, new Image("/pathToImage"), columns, rows, totalNumberOfFrames, FrameWidth, FrameHeight, FPS);
anim.start(); 
```

# asp.net-mvc-3 - 在 ApiController 中检查 ModelState

> ID：10708649
> 
> 赞同：3
> 
> 时间：2012-05-22T19:20:02.993
> 
> 标签：asp.net-mvc-3, asp.net-ajax, asp.net-mvc-4, asp.net-web-api

这是我的 POST 操作`ApiController`。

```
public HttpResponseMessage Post(ViewModel model)
    {
        if (!ModelState.IsValid)
        {
            var ResponseMessage = new HttpResponseMessage(HttpStatusCode.XXXXXX
            return ResponseMessage; 
        }

        if (!_service.Create(model))
        {
            var ResponseMessage=new HttpResponseMessage(HttpStatusCode.NotAcceptable);
            return ResponseMessage;
        }
        else
        {
            return new HttpResponseMessage(HttpStatusCode.Created);
        }
    } 
```

这样启用服务端模型验证可以吗？而且，如果一切正常，我很确定`Created`应该返回 a 。但是如果 ModelState 无效，或者发生错误，我应该返回什么样的 HttpStatusCode 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:49:55.190

通常它应该是 400 - `BadRequest`。

`NotAcceptable`是当服务器无法满足 Accept 标头时。

`PreConditionFailed`是缓存验证条件失败的时候。例如，如果 PUT 请求需要更新，当且仅当 ETag 匹配请求中的值。

* * *

或者，您可以发送自定义错误。由于和Request有关，所以需要使用4xx号：

```
return new HttpResponseMessage((HttpStatusCode) 499) 
     {
          ReasonPhrase = "Validation failed"
     }; 
```

# html - 简单的 CSS 动画，我应该在画布或 SVG 中执行此操作吗？

> ID：10708650
> 
> 赞同：0
> 
> 时间：2012-05-22T19:20:09.077
> 
> 标签：html, css, canvas, svg

前两个键是可操作的（最左边的键和旁边的黑键）。这里是托管的，所以你可以看到

```
http://23.23.184.26/miller/keyboardanimation/main.html 
```

我必须重新绘制整个键盘，因为每个键的 3d 特性不会留下可以用方形图像替换的方形轮廓。我在任何地方都看不到梯形元素的支持...

我应该在 SVG 或画布中执行此操作吗？我觉得我这样做的方式真的很愚蠢。

而且，有时我会在转换之间出现奇怪的白色闪光（我认为仅在 IE9 上）

```
<!DOCTYPE HTML>
<html>
<head>
    <style type="text/css">
        a{
            color:white;
        }
        #main{
            background:white url('0.gif') no-repeat 0 0;
            position:relative;
            z-index:0;
            width:506px;
            height:319px;
        }

        #key1{
            position:absolute;
            width:50px;
            height:75px;
            top:175px;
            left:55px; 
        }
        #key2{
            position:absolute;
            width:50px;
            height:75px;
            top:100px;
            left:85px;
        }
        /*uncomment this to show button zones*/
        /*#key1:hover, #key2:hover{
            border:1px solid red;
        }*/
    </style>
</head>

<body>
    <div id="main">
        <div id="key1" onMouseDown="document.getElementById('main').style.background = 'url(1.gif)'" onMouseUp="document.getElementById('main').style.background = 'url(0.gif)'"></div>
        <div id="key2" onMouseDown="document.getElementById('main').style.background = 'url(2.gif)'" onMouseUp="document.getElementById('main').style.background = 'url(0.gif)'"></div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:31:20.013

您没有使用 CSS 动画：-/，您正在使用 Javascript 进行简单的背景转换。

也就是说，还有一个小细节，如果你使用画布来绘制钢琴动画，你需要“重新绘制”没有变化的钢琴和变化的钢琴的每个部分。

我建议您在 SVG 中执行此操作并为其设置动画，因为您将拥有更少的动画部分:-)。

问候！贡萨洛·G。

# linkedin - LinkedIn API - 是否可以找出看到状态更新的人数？

> ID：10708651
> 
> 赞同：0
> 
> 时间：2012-05-22T19:20:10.543
> 
> 标签：linkedin

我正在浏览 LinkedIn API 以获取状态更新：[https ://developer.linkedin.com/documents/get-network-updates-and-statistics-api](https://developer.linkedin.com/documents/get-network-updates-and-statistics-api)

以及人员连接：[https ://developer.linkedin.com/documents/connections-api](https://developer.linkedin.com/documents/connections-api)

而且我想知道是否有可能通过获取他们的 user_id 或他们帐户中的其他内容来获取用户连接数。

是否有可能获得一个人的连接总数，以及他们的连接总数？换句话说，如果有人与他们的LinkedIn朋友分享这个，可以计算总覆盖率吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:30:20.600

无法确定共享的“查看范围”，因为没有 API 可让您确定谁查看了共享。您可以确定谁评论了某个共享，或者谁喜欢了某个共享，但不能确定谁查看了该共享。

在连接方面，只能获取已授予您的应用程序访问权限的用户的完整连接列表 - 即使对于这些连接，也无法获得他们的连接，根据[docs](https://developer.linkedin.com/documents/connections-api)。如果您只想获取给定用户的连接数，可以使用[Profile API](https://developer.linkedin.com/documents/profile-api)[`num-connections`](https://developer.linkedin.com/documents/profile-fields)的字段。

更新：

有趣的是，还可以通过自定义共享按钮确定共享（不查看）内容的频率：

[https://developer.linkedin.com/retrieving-share-counts-custom-buttons](https://developer.linkedin.com/retrieving-share-counts-custom-buttons)

# jquery - jQuery UI 选项卡错误 - 选项卡相互混合

> ID：10708654
> 
> 赞同：0
> 
> 时间：2012-05-22T19:20:14.417
> 
> 标签：jquery, asp.net, ajax, jquery-ui, jquery-ui-tabs

我的页面中有选项卡（选项卡中的选项卡），当我将选项卡从父部分更改时（例如，我从第一个选项卡到第二个选项卡，然后返回到第一个选项卡）第一个选项卡的子选项卡的内容混合在一起，你见过这个错误吗？有没有办法修复它？谢谢

（内容正在通过 Ajax 加载）

起初的标签：看起来很好，没有混合 ![在此处输入图像描述](../Images/e966c40c4179360104bac67838ec79f2.png)

选项卡混合：（所有三个选项卡都显示在一个选项卡中）

![在此处输入图像描述](../Images/c3be6b5918cde83bcdef03db11432fbb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T16:49:46.663

我能够重现类似的问题。当您有非唯一的选项卡 ID 时会出现此问题。

这是一个说明问题的jsfiddle：（
查看选项卡3。即使选择了A，内部选项卡C也会显示）

[http://jsfiddle.net/gizmovation/JJnJF/](http://jsfiddle.net/gizmovation/JJnJF/)

要解决此问题，请将内部选项卡更改为具有与外部选项卡不同的 ID。

这是一个固定的 jsfiddle：（
查看选项卡 3。内部选项卡 A 将正确显示）

[http://jsfiddle.net/gizmovation/EqyPM/](http://jsfiddle.net/gizmovation/EqyPM/)

如果这不能解决您的问题，则可能与 jquery ui 选项卡未绑定到新加载的 ajax 内容有关。您可以在加载内容后尝试重新绑定 $(selector).tabs() 以查看是否有效。

希望这些信息有帮助！

# iphone - 更改图像的色彩空间

> ID：10708656
> 
> 赞同：0
> 
> 时间：2012-05-22T19:20:19.893
> 
> 标签：iphone, objective-c, ios, core-graphics, quartz-graphics

我正在创建基于基于 DeviceGray 颜色空间的图像的蒙版。

基本上我想要做的是将各种灰色（除了黑色）像素更改为白色并保持黑色像素不变。

所以我希望我的图像由黑白像素组成。

知道如何使用 CoreGraphics 手段实现这一目标吗？

请不要提供在循环中的所有像素上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T23:34:54.047

像这样一起使用`CGImageCreateWithMaskingColors`和`CGContextSetRGBFillColor`：

```
CGImageRef myMaskedImage;
const CGFloat myMaskingColors[6] = { 0, 124, 0, 68, 0, 0 };
myColorMaskedImage = CGImageCreateWithMaskingColors (image,
                                        myMaskingColors);
CGContextSetRGBFillColor (myContext, 0.6373,0.6373, 0, 1);
CGContextFillRect(context, rect);
CGContextDrawImage(context, rect, myColorMaskedImage); 
```

顺便说一句，在[CGImageCreateWithMaskingColors](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageCreateWithMaskingColors)讨论中提到了填充颜色。

# android - 获取最新意图

> ID：10708659
> 
> 赞同：3
> 
> 时间：2012-05-22T19:20:35.397
> 
> 标签：android, android-intent

我正在`Activity`从我的`Service`. 每当发生事件以及每次通过 Intent 传递 Serializable 对象时，我都会这样做。这里的问题是，当第二次调用 Activity 时，它有旧的 Intent 数据而不是新的 Intent 数据。所以我确信这是由于我在`Activity`课堂上犯了一些错误，但我无法弄清楚。

```
public class ReceiveActivity extends Activity {
AlertDialog alertDialog;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    alertDialog = new AlertDialog.Builder(this).create();
    alertDialog.setTitle("Event");
    CustomEvent custom= (CustomEvent) getIntent().getSerializableExtra("custom");
    alertDialog.setMessage(custom.getName());
    alertDialog.setIcon(R.drawable.ic_launcher);
    alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) { 
            ReceiveActivity.this.finish();
        }
    });
    alertDialog.show();
}

@Override
protected void onPause() {
    if(alertDialog!=null) {alertDialog.dismiss();}
    super.onPause();

}

@Override
protected void onStop() {
    if(alertDialog!=null) {alertDialog.dismiss();}
    super.onStop();

} 
```

这是我用来从服务中调用活动的代码（通过 a `Notification`）

```
Notification notification = new Notification(R.drawable.ic_launcher, "msg", 
System.currentTimeMillis());
notification.flags |= Notification.FLAG_ONLY_ALERT_ONCE | Notification.FLAG_AUTO_CANCEL;
Intent incoming =new Intent(this, ReceiveActivity.class);
incoming.putExtra("custom",custom);
PendingIntent contentIntent = PendingIntent.getActivity(this, 0,incoming, 0);
notification.setLatestEventInfo(this, "msg","incoming", contentIntent);
NotificationManager nm = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
nm.notify("Incoming", count++,notification);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:45:02.780

我认为你需要重写[`onNewIntent`](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)方法来获得后来的意图。如果您的活动的启动模式设置为**singleTop**并且活动在获得第二个意图之前尚未完成，则会发生这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:45:38.053

尝试使用 onResume() 方法，因为没有再次创建 Activity。它只与顶部 Activity 交换位置。

Android 仅在需要内存时才完成 Activity。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T12:28:31.473

```
/**
 * Override super.onNewIntent() so that calls to getIntent() will return the
 * latest intent that was used to start this Activity rather than the first
 * intent.
 */
@Override
public void onNewIntent(Intent intent){
    super.onNewIntent(intent);
    setIntent(intent);
} 
```

# cordova - 为什么我的 PhoneGap 应用程序会收到 2 个定位服务请求？

> ID：10708662
> 
> 赞同：1
> 
> 时间：2012-05-22T19:20:40.987
> 
> 标签：cordova

我有一个 PhoneGap 应用程序，当它加载时询问“MyApp”是否可以访问位置服务。然后在到达一个在地图上显示您的位置的页面时，询问“www/index.html/”是否可以访问位置服务。

有没有办法让它只是应用程序询问......而不是页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:24:02.707

我假设您正在谈论一个 iOS 应用程序。因此，您还必须从 Xcode 中打开位置服务选项，否则 webview 将尝试自己作为您的问题。您可以通过将资源中的 Cordova.plist 中的 EnableLocation 更改**为****true**来打开它。

# twitter-bootstrap - Bootstrap - 相互干扰的多个按钮下拉菜单

> ID：10708663
> 
> 赞同：1
> 
> 时间：2012-05-22T19:20:44.490
> 
> 标签：twitter-bootstrap

我有以下代码 - 3 个按钮下拉菜单彼此相邻，每个都有自己唯一的 ID。但是，在第一个 2 上按下插入符号不会执行任何操作，而在按下第三个插入符号时会出现第一个上的下拉菜单。有什么理由吗？我是否错过了为 Button Group 添加独特性的东西？引导程序中的错误？

```
<div class="btn-group" id="all-sectors">
    <button class="btn btn-larger btn-primary title">All Sectors</button>
    <button class="btn btn-larger btn-primary dropdown-toggle" data-toggle="dropdown">
       <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="#" class="camera-filter" data-filter-type="all">All Cameras</a></li>
        <li><a href="#" class="camera-filter" data-filter-type="camera-Joe0">camera-Joe0</a></li>
            <li><a href="#" class="camera-filter" data-filter-type="North-Joe0">North-Joe0</a></li>
        <li><a href="#" class="camera-filter" data-filter-type="East-Joe0">East-Joe0</a></li>
    </ul>
</div>

<div class="btn-group" id="all-grids">
    <button class="btn btn-larger btn-primary title">All Grids</button>
    <button class="btn btn-larger btn-primary dropdown-toggle" data-toggle="dropdown">
       <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="#" class="camera-filter" data-filter-type="all">All Cameras</a></li>
        <li><a href="#" class="camera-filter" data-filter-type="camera-Joe0">camera-Joe0</a></li>
    </ul>
</div>

<div class="btn-group" id="all-cameras">
    <button class="btn btn-larger btn-primary title">All Cameras</button>
    <button class="btn btn-larger btn-primary dropdown-toggle" data-toggle="dropdown">
       <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="#" class="camera-filter" data-filter-type="all">All Cameras</a></li>
        <li><a href="#" class="camera-filter" data-filter-type="camera-Joe0">camera-Joe0</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:46:42.343

问题出在我的 CSS 中。我添加了一个

```
float:left; 
```

对于阻止前两个正常工作的每个 .btn-group。我应该把它们包在一个

```
.btn-toolbar 
```

包装器代替。

# ruby-on-rails - 我应该隐藏 url 还是存储在 rails 的会话中

> ID：10708666
> 
> 赞同：0
> 
> 时间：2012-05-22T19:20:56.910
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个我正在开发的具有用户和位置的 Rails 站点

一个用户有很多位置，一个位置可以有很多用户，所以我有很多...

```
has_many :through 
```

我的问题是……大多数用户只有一个位置，只有一个位置，所以当他们登录时，我应该将它放在 url 中还是存储在会话中

```
/some_location/users 
```

或者我应该使用这样的方法将位置存储在会话中

```
def current_location
  @location ||= Location.find(session[:location_id])
rescue ActiveRecord::RecordNotFound
  @location = current_user.locations.first
  session[:location] = @location.id
  @location
end 
```

并让网址更清洁

```
/users 
```

如果我确实使用路径中的位置名称以上述方式执行此操作，我将如何执行路由

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:32:49.810

对于拥有多个位置的用户，下面的代码将返回随机位置

```
@location = current_user.locations.first 
```

您可以优先选择位置 - 比如按字母顺序

```
@location = current_user.locations.order("name DESC").first 
```

但是，当用户更改位置时，他的 URL 将被映射到不同的位置。它可能是也可能不是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:24:58.717

如果用户不需要直接访问该位置（或者如果您有一种简单的方法让他们切换位置），您可能想要使用会话。对于大多数只有一个位置的用户来说，这将使导航更简单、更容易混淆，同时允许您以不太复杂的方式处理具有多个位置的用户的边缘情况。

# ios - 使用 IOS Accelerate Framework 对非二次幂图像进行 2D 信号处理？

> ID：10708667
> 
> 赞同：14
> 
> 时间：2012-05-22T19:21:06.487
> 
> 标签：ios, signal-processing, fft, vdsp

//编辑...

我正在稍微编辑我的问题，以解决专门处理非二次幂图像的问题。我有一个基本结构，适用于大小为 256x256 或 1024x1024 的方形灰度图像，但看不到如何推广到任意大小的图像。fft 函数似乎希望您包含宽度和高度的 log2，但随后不清楚如何解压缩结果数据，或者数据是否只是被打乱。我想显而易见的事情是将 npot 图像居中在一个更大的全黑图像中，然后在查看数据时忽略这些位置的任何值。但是想知道是否有一种不那么尴尬的方式来处理 npot 数据。

//...结束编辑

我在使用 Accelerate Framework 文档时遇到了一些问题。我通常会使用 FFTW3，但我无法在实际的 IOS 设备上编译它（参见这个[问题](https://stackoverflow.com/questions/10695053/compiling-fftw3-for-ios-5-1-on-osx-10-7)）。谁能指出我使用 Accelerate 的一个超级简单的实现，它执行以下操作：

1) 将图像数据转换为可以传递给 Accelerate 的 FFT 方法的适当数据结构。
在 FFTW3 中，最简单的是，使用灰度图像，这涉及将无符号字节放入“fftw_complex”数组中，该数组只是两个浮点数的结构，一个保存实数，另一个保存虚数（虚数在每个像素初始化为零）。

2) 采用此数据结构并对其执行 FFT。

3) 打印出幅度和相位。

4) 对其执行IFFT。

5) 根据 IFFT 产生的数据重新创建原始图像。

尽管这是一个非常基本的示例，但我在使用 Apple 网站上的文档时遇到了问题。[Pi 在这里](https://stackoverflow.com/questions/3398753/using-the-apple-fft-and-accelerate-framework)的 SO回答非常有帮助，但我仍然对如何使用 Accelerate 使用灰度（或彩色）2D 图像执行此基本功能感到有些困惑。

无论如何，任何指针或特别是一些处理 2D 图像的简单工作代码都会非常有帮助！

\\\ 编辑 \\\

好的，在花一些时间深入研究 SO 以及[pkmital 的 github repo](https://github.com/pkmital/pkmFFT/blob/master/pkmFFT.h)上的文档和一些非常有用的代码之后，我有一些我认为我会发布的工作代码 1）我花了一段时间才弄清楚2）因为我还有几个问题......

初始化 FFT“计划”。假设一个二次方图像：

```
#include <Accelerate/Accelerate.h>
...
UInt32 N = log2(length*length);
UInt32 log2nr = N / 2; 
UInt32 log2nc = N / 2;
UInt32 numElements = 1 << ( log2nr + log2nc );
float SCALE = 1.0/numElements;
SInt32 rowStride = 1; 
SInt32 columnStride = 0;
FFTSetup setup = create_fftsetup(MAX(log2nr, log2nc), FFT_RADIX2); 
```

传入一个字节数组以获得二次方灰度图像并将其转换为 COMPLEX_SPLIT：

```
COMPLEX_SPLIT in_fft;
in_fft.realp = ( float* ) malloc ( numElements * sizeof ( float ) );
in_fft.imagp = ( float* ) malloc ( numElements * sizeof ( float ) );

for ( UInt32 i = 0; i < numElements; i++ ) {
    if (i < t->width * t->height) {
      in_fft.realp[i] = t->data[i] / 255.0;
      in_fft.imagp[i] = 0.0;
    }
} 
```

对转换后的图像数据运行 FFT，然后获取幅度和相位：

```
COMPLEX_SPLIT out_fft;
out_fft.realp = ( float* ) malloc ( numElements * sizeof ( float ) );
out_fft.imagp = ( float* ) malloc ( numElements * sizeof ( float ) );

fft2d_zop ( setup, &in_fft, rowStride, columnStride, &out_fft, rowStride, columnStride, log2nc, log2nr, FFT_FORWARD );

magnitude = (float *) malloc(numElements * sizeof(float));
phase = (float *) malloc(numElements * sizeof(float));

for (int i = 0; i < numElements; i++) {
   magnitude[i] = sqrt(out_fft.realp[i] * out_fft.realp[i] + out_fft.imagp[i] * out_fft.imagp[i]) ;
   phase[i] = atan2(out_fft.imagp[i],out_fft.realp[i]);
} 
```

现在您可以对 out_fft 数据运行 IFFT 以获取原始图像...

```
COMPLEX_SPLIT out_ifft;
out_ifft.realp = ( float* ) malloc ( numElements * sizeof ( float ) );
out_ifft.imagp = ( float* ) malloc ( numElements * sizeof ( float ) );
fft2d_zop (setup, &out_fft, rowStride, columnStride, &out_ifft, rowStride, columnStride, log2nc, log2nr, FFT_INVERSE);   

vsmul( out_ifft.realp, 1, SCALE, out_ifft.realp, 1, numElements );
vsmul( out_ifft.imagp, 1, SCALE, out_ifft.imagp, 1, numElements ); 
```

或者您可以在幅度上运行 IFFT 以获得自相关......

```
COMPLEX_SPLIT in_ifft;
in_ifft.realp = ( float* ) malloc ( numElements * sizeof ( float ) );
in_ifft.imagp = ( float* ) malloc ( numElements * sizeof ( float ) );
for (int i = 0; i < numElements; i++) {
  in_ifft.realp[i] = (magnitude[i]);
  in_ifft.imagp[i] = 0.0;
}

fft2d_zop ( setup, &in_fft, rowStride, columnStride, &out_ifft, rowStride, columnStride, log2nc, log2nr, FFT_INVERSE );      

vsmul( out_ifft.realp, 1, SCALE, out_ifft.realp, 1, numElements );
vsmul( out_ifft.imagp, 1, SCALE, out_ifft.imagp, 1, numElements ); 
```

最后，您可以将 ifft 结果放回图像数组中：

```
for ( UInt32 i = 0; i < numElements; i++ ) {
  t->data[i] = (int) (out_ifft.realp[i] * 255.0);
} 
```

我还没有弄清楚如何使用 Accelerate 框架来处理非二次幂图像。如果我在设置中分配了足够的内存，那么我可以进行 FFT，然后进行 IFFT 以获得我的原始图像。但是，如果尝试进行自相关（与 FFT 的幅度），那么我的图像会得到不稳定的结果。我不确定适当填充图像的最佳方法，所以希望有人知道如何做到这一点。（或分享 vDSP_conv 方法的工作版本！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T21:25:16.040

我想说，为了对任意图像大小执行工作，您所要做的就是将输入值数组的大小适当地调整为 2 的下一个幂。

困难的部分是放置原始图像数据的位置以及要填充的内容。您真正想要对图像或从图像中挖掘数据做的事情是至关重要的。

在下面链接的 PDF 中，请特别注意 12.4.2 [http://www.mathcs.org/java/programs/FFT/FFTInfo/c12-4.pdf上方的段落](http://www.mathcs.org/java/programs/FFT/FFTInfo/c12-4.pdf)

虽然上面谈到了沿 2 个轴的操作，但我们可能会在第二个维度之前执行类似的想法，然后进入第二个维度。如果我是正确的，那么这个例子可以适用（这绝不是一个精确的算法）：

假设我们有一个 900 x 900 的图像：首先我们可以将图像分成 512、256、128 和 4 个垂直条带。然后我们将为每一行处理 4 个 1D FFT，一个用于前 512 个像素，下一个用于对于接下来的 256 个像素，接下来是 128 个像素，然后是剩下的 4 个像素。由于 FFT 的输出本质上是频率的流行度，因此可以简单地添加这些（仅从频率的角度来看，而不是角度偏移）。然后我们可以将同样的技术推向二维。在这一点上，我们将考虑每个输入像素，而无需实际填充。

这实在是令人深思，我自己没有尝试过，确实应该自己研究一下。如果你现在真的在做这样的工作，你现在可能比我有更多的时间。

# vb.net - 表格顶部的白色方块？

> ID：10708675
> 
> 赞同：1
> 
> 时间：2012-05-22T19:21:49.563
> 
> 标签：vb.net, winforms

我试图在表格的上部显示一个白色方块，但我一点也不知道如何。

像这样： ![在此处输入图像描述](../Images/1c84469d43aba3820b2be45388824d3f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:24:58.393

做这个：

1.  将 Panel 控件从设计器工具箱中的 Containers 部分拖到表单上
2.  将 Dock 属性设置为 Top
3.  调整它的大小，使其与您想要的一样高
4.  将背景颜色属性设置为白色

这只是可以实现这一点的多种不同方式之一。你打算用表格的这个白色区域做什么？

# linq - Linq 2 SQL Sum 使用 lambda 和处理空值

> ID：10708677
> 
> 赞同：2
> 
> 时间：2012-05-22T19:21:52.497
> 
> 标签：linq, linq-to-sql

在 Linq to SQL 中使用 sum 和 lambda 时，使用以下代码：

```
int query = (from f in odc.RDetails
                     where f.ticketID == int.Parse(ticket.ToString())
                     select f).Sum(x => x.Rate); 
```

我收到以下错误：

**无法将 null 值分配给 System.Int32 类型的成员，该类型是不可为 null 的值类型。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:31:53.697

. 您必须确保`x.Rate`是一个`int`，而不是一个`int?`（一个`int`接受`null`作为值的）。

. 如果查询没有元素，`.Sum`则不执行任何操作并返回`null`。选择一个默认值，比如说`0`.

```
var query = from f in odc.RDetails
            where f.ticketID == int.Parse(ticket.ToString())
            select f;

int result = query.Any() 
             ? query.Sum(x => x.Rate ?? 0) // use the ?? if x.Rate is an "int?".
             : 0; // default value you can choose. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:44:06.817

我会将`int.Parse(ticket.ToString())`其拆分为自己的行，以将该解析与 Linq 隔离以进行调试。

我们不知道这是否引发了异常，或者其中一个`RDetails.Rate`值是否为空。真的是一个`Nullable<int>`吗？

如果`RDetails.Rate`是 a `Nullable<int>`，那么您`...Sum(x => x.Rate ?? 0)`可以避免异常。

# html - 简单的jsfiddle示例不起作用

> ID：10708678
> 
> 赞同：0
> 
> 时间：2012-05-22T19:21:55.223
> 
> 标签：html, css

我知道很多问题都是这样问的，但除此之外我也不知道该写什么。这是我的小提琴：http: [//jsfiddle.net/CnJF5/2/](http://jsfiddle.net/CnJF5/2/)

HTML：`<div id="myDiv" ></div>`

CSS：

```
#myDiv
{
    background-color:black;
    width:100%;
    height:100%;
} 
```

这个小提琴怎么能`div`在洞页上做出一个黑色的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:28:31.883

如果您希望该 div 占据整个页面，则还需要将所有父元素`height`设置`100%`为：

```
body, html {
    height:100%
}

#hider
{
    background-color:black;
    width:100%;
    height:100%;
} 
```

JSFiddle：http: [//jsfiddle.net/CnJF5/8/](http://jsfiddle.net/CnJF5/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:30:16.170

你必须设置

```
body, html {
    height: 100%
} 
```

元素仅在其父元素具有固定高度时才考虑百分比高度。

*   [http://www.tutwow.com/htmlcss/quick-tip-css-100-height/](http://www.tutwow.com/htmlcss/quick-tip-css-100-height/)
*   [http://jsfiddle.net/CnJF5/11/](http://jsfiddle.net/CnJF5/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:29:58.073

100% 什么？`width`和`height`的默认值为`auto`。如果你想要一个黑页，你还需要给`<div>`'s 的祖先一些值。

```
html, body {
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:30:55.147

试试这个... [http://jsfiddle.net/CnJF5/12/](http://jsfiddle.net/CnJF5/12/)

```
#myDiv {
    z-index: 10000;
    filter: alpha(opacity=50); /*older IE*/
    filter:progid:DXImageTransform.Microsoft.Alpha(opacity=50); /* IE */
    -moz-opacity: .50; /*older Mozilla*/
    -khtml-opacity: 0.5;   /*older Safari*/
    opacity: 0.5;   /*supported by current Mozilla, Safari, and Opera*/
    background-color:#000000;
    position:fixed;
    top:0px;
    left:0px;
    width:100%;
    height:100%;
    text-align:center;
    vertical-align:middle;
}​ 
```

# ruby-on-rails - 推送到 heroku 后现在显示的页面

> ID：10708679
> 
> 赞同：0
> 
> 时间：2012-05-22T19:21:59.733
> 
> 标签：ruby-on-rails, ruby, heroku

我已成功将我的应用程序提交到 git，然后将其推送到 heroku。开始页面正常工作，但路径 heroku_site.com/pages/page_name 的其余部分告诉我“我们很抱歉，但出了点问题。” 相同的页面在本地服务器上工作正常。有什么想法有什么问题吗？

inb4 路线很好（也可以休息，rspec 规范/绿色）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:44:00.343

您可以使用以下命令查看您的 Heroku 日志`$ heroku logs`

查看您的路线，我猜您的页面是基于您尚未添加到生产数据库中的本地数据库中的内容。

如果是这样，您可以将本地数据库推送到生产环境`$ heroku db:push`

或者，您可以将该数据放入 Rails 迁移中或为其播种。或者您可以在您的生产应用程序中创建它。

一般来说，要找出你能做什么：`$ heroku help`

# c# - DataContractSerializer 向后兼容性

> ID：10708684
> 
> 赞同：2
> 
> 时间：2012-05-22T19:22:06.173
> 
> 标签：c#, wcf, datacontractserializer

我正在尝试从旧版本的序列化对象反序列化，但出现错误 elementNameX_backField is not expected, expecting element newElementName_backingField。这是我的代码的样子：

```
using (var fileStream = new FileStream(fullName, FileMode.Open))
                using (var decryptStream = new CryptoStream(fileStream, decryptor, CryptoStreamMode.Read))
                using (var reader = XmlDictionaryReader.CreateBinaryReader(decryptStream, XmlDictionaryReaderQuotas.Max))
                {

                    var ser = new DataContractSerializer(typeof(classA), KnownTypes);
                    rv = ser.ReadObject(reader) as classA;
                }
[DataContract]
public class classA
{
 [DataMember]
 public classB ClassBee {get; set;}
}
[Serializable]
public class ClassB
{
[XmlElement("element")]
public customType1 elementNameX{get; set;}
[XmlElement("newElement")]
public customType2 newElementName{get; set;}
} 
```

任何想法，如果它在已经序列化的文件中不存在，我如何让它忽略 newElement？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-08-14T06:09:55.813

从上述评论中回答后代：将 DataContract 属性添加到 ClassB 解决了这个问题。XML 序列化和 DataContractSerialization 现在都在该 ClassB 上工作

# jquery - 带有自定义日期的 Jquery 日期选择器

> ID：10708691
> 
> 赞同：-2
> 
> 时间：2012-05-22T19:22:21.837
> 
> 标签：jquery, datapicker

我试图在 JQuery UI 1.8.10 日期选择器上显示从今天起 2 年零 3 个月后的日期。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:27:53.237

.datepicker(" [setDate](http://jqueryui.com/demos/datepicker/#method-setDate) ", '+3m +2y');

# c# - 使用 WrapPanel 来自 Windows Phone 7 URL 的方形照片网格

> ID：10708692
> 
> 赞同：0
> 
> 时间：2012-05-22T19:22:23.197
> 
> 标签：c#, wpf, windows-phone-7.1

我有一个 Web 服务，它返回大约 100 张照片，我想在 Windows Phone 7 上以 3xN 网格显示所有照片。

我已经尝试过 WrapPanel 并且它可以工作，但只有几张图像.. 还有更多，我的内存不足并且调试停止。

代码：

```
<ListBox Height="600" HorizontalAlignment="Left" Name="screenshotsListBox" VerticalAlignment="Top" Width="420">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Image Source="{Binding}"
                Margin="0"
                Height="110"
                Width="110"
                CacheMode="BitMapCache"
                Stretch="UniformToFill"
                Grid.Row="0" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

我将所有图像放在一个字符串数组中，然后将其绑定到列表框。

有什么办法可以在不占用所有内存的情况下显示从 Web 服务下载的照片网格？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:09:25.043

我建议对代码进行分析以确定内存使用的实际原因是什么，但我猜如果您仅将它们显示为 110x110px版本。即使您将它们显示为拉伸（收缩）到更小的尺寸，完整的图像也会加载到内存中。如果它们是大图像，则内存使用量将很快增加。

[在http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx](http://blogs.msdn.com/b/swick/archive/2011/04/07/image-tips-for-windows-phone-7.aspx)上有一些与图像和内存相关的有用提示

# fxcop - 发布版本中的 FxCop 发现多于调试版本

> ID：10708699
> 
> 赞同：0
> 
> 时间：2012-05-22T19:22:59.000
> 
> 标签：fxcop

我发现在针对发布版本运行 FxCop 时会产生比调试版本更多的发现。有人遇到过同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:05:07.470

编译器优化可能会导致 FxCop 规则行为的差异，尽管 FxCop 附带的规则通常在这方面非常健壮。您在自定义规则中看到的差异是什么？如果没有，您是否为您的发布版本启用了 CODE_ANALYSIS 编译标志？如果是这样，哪些规则仅在发布模式下产生问题？

# javascript - 这个 JS 有什么问题？

> ID：10708701
> 
> 赞同：1
> 
> 时间：2012-05-22T19:23:05.847
> 
> 标签：javascript

有任何有趣的[文章](http://www.fitzblog.com/2007/08/nine-javascript-gotchas)警告 JS 问题。

但是，请注意 #2：

```
<input type="button" value="Gotcha!" id="MyButton" >
<script>
var MyObject = function () {
    this.alertMessage = "Javascript rules";
    this.ClickHandler = function() {
          alert(this.alertMessage );
      }
}();

</script> 
```

注意最后的自执行功能`()`。但是我很确定`this.xxx`在做`new MyObject()`. 他写了 ：

> 如果你打电话`MyObject.ClickHandler();`，你会得到一个弹出窗口，上面写着“Javascript 规则”。

他的样本不起作用。我试过`MyObject.ClickHandler()`了，但遇到了一个错误......（无法调用未定义的方法'ClickHandler'）

我怎样才能`MyObject.ClickHandler()`工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:25:18.877

您缺少`new`关键字。目前，`this`指的是`window`并且`ClickHandler`可以通过`window.ClickHandler`.

使用[`new`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)关键字时，会创建一个新对象，并且`this`关键字将引用该新创建的对象。这就是为什么将`ClickHandler`方法添加到`MyObject`下面的原因：

```
var MyObject = new (function () {
    this.alertMessage = "Javascript rules";
    this.ClickHandler = function () {
        alert(this.alertMessage);
    };
})(); 
```

执行以下操作时要小心：

```
document.getElementById("MyButton")
    .addEventListener("click", MyObject.ClickHandler, false); 
```

`addEventListener`make`this`引用分配了事件侦听器的对象。另请参阅[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)更改`this`范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:26:04.987

**编辑：** Zoiks，Lekensteyn 一针见血。我不完全明白你打算在这里完成什么......

* * *

这不完全是一个“自动执行功能”。如果你是这样构建的：

```
(function(MyObject) {
    MyObject.alertMessage = "Javascript rules";
    MyObject.ClickHandler = function() {
        alert(this.alertMessage );
    }
})(window.MyObject = window.MyObject || {}); 
```

然后我将其称为自执行功能。

完成此操作后，现在您可以执行`MyObject.ClickHandler()`并获取警报。

# android - 打开电子邮件客户端和短信客户端的意图

> ID：10708704
> 
> 赞同：0
> 
> 时间：2012-05-22T19:23:17.800
> 
> 标签：android, android-intent

我正在尝试使用意图在 Android 中打开一些客户端：

1.  对于电子邮件客户端，我使用带有 mailto URI 的 ACTION_VIEW，我收到消息：“不支持的操作！当前不支持该操作”。它是否仅在模拟器上是一个问题，并且应该在设备上工作？（我没有，所以不能查）

2.  对于文本消息，我使用带有电话 URI 的 ACTION_SENDTO，但我只是没有得到任何响应。什么是正确的行动？

我知道常量 CATEGORY_APP_EMAIL 和 CATEGORY_APP_MESSAGING，但它们仅在最新版本 (API 15) 中添加。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:32:46.593

第一点没问题。

第二，你必须用“短信：”之类的uri调用动作视图......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:40:26.630

我使用下面的代码发送电子邮件。我在模拟器中遇到错误，但它可以在真实设备上运行

```
Intent emailDeveloper = new Intent(Intent.ACTION_SEND);
emailDeveloper.setType("message/rfc822");
emailDeveloper.putExtra(Intent.EXTRA_EMAIL       , new String[]{"YourEmail@email.com"});
emailDeveloper.putExtra(Intent.EXTRA_SUBJECT, "E-mail subject");
emailDeveloper.putExtra(Intent.EXTRA_TEXT   , "Message text");

try 
{
    startActivity(Intent.createChooser(emailDeveloper, "Send e-mail..."));
} 

catch (android.content.ActivityNotFoundException ex) 
{

    Toast.makeText(YourActivity.this, "Error finding E-mail application", 
            Toast.LENGTH_SHORT).show();
} 
```

# regex - 在除索引之外的所有页面上使用 Servlet 过滤器

> ID：10708706
> 
> 赞同：1
> 
> 时间：2012-05-22T19:23:31.430
> 
> 标签：regex, servlets, servlet-filters, regex-negation

`Filter`如果他们想访问某些页面，我正在尝试使用 a强制我的用户登录。

所以我`Filter`必须将它们重定向到没有会话的错误页面。

但我不希望他们访问时发生这种情况`index.html`，因为他们可以登录索引页面。

所以我需要一个匹配除`/`和之外的所有页面的 URL 模式`index.xhtml`。

我怎样才能做到这一点？我可以在我的 regex 中使用正则表达式`web.xml`吗？

编辑：

看完[这篇](https://stackoverflow.com/questions/8496552/specify-negative-path-match-for-servlet-mapping)

我以为我可以做类似的东西：

```
if (!req.getRequestURI().matches("((!?index)(.*)\\.xhtml)|((.*)\\.(png|gif|jpg|css|js(\\.xhtml)?))")) 
```

在我的`doFilter()`方法中，但它仍然处理所有内容。

我确信正则表达式可以工作，因为我已经在线测试过它并且它匹配不需要过滤的文件，但是即使对于排除的文件也会执行 if 的内容！

编辑 2：

我正在尝试一种新方法。

我已将过滤器映射到`*.xhtml`我的`web.xml`.，所以我不需要使用上面的正则表达式排除 css、图像和 javascript。

这是新代码（进入`doFilter()`）

```
if (req.getRequestURI().contains("index")) {
    chain.doFilter(request, response);
} else {
    if (!userManager.isLogged()) {
        request.getRequestDispatcher("error.xhtml").forward(request, response);
    } else {
        chain.doFilter(request, response);
    }
} 
```

但它仍然没有，因为它`chain.doFilter()`在每一页上调用（在外部 if）。

如何排除我的索引页面被过滤？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:56:11.510

`web.xml`URL 模式不支持正则表达式。它仅支持通配符前缀（文件夹）和后缀（扩展名）匹配，如 `/faces/*`and `*.xhtml`。

至于您的具体问题，您显然已将索引文件定义为 a`<welcome-file>`并通过`/`. 这样`request.getRequestURI()`将等于`/contextpath/`，不是`/contextpath/index.xhtml`。调试`request.getRequestURI()`以了解过滤器实际检索到的内容。

我建议重写：

```
String path = request.getRequestURI().substring(request.getContextPath().length());

if (userManager.isLogged() || path.equals("/") || path.equals("/index.xhtml") || path.startsWith(ResourceHandler.RESOURCE_IDENTIFIER)) {
    chain.doFilter(request, response);
} else {
    request.getRequestDispatcher("/WEB-INF/error.xhtml").forward(request, response);
} 
```

将此过滤器映射到`/*`. 请注意，我包含了[`ResourceHandler.RESOURCE_IDENTIFIER`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#RESOURCE_IDENTIFIER)检查，以便 JSF 资源（如`<h:outputStylesheet>`,`<h:outputScript>`和）`<h:graphicImage>`也将被跳过，否则当用户未登录时，您最终会得到一个没有 CSS/JS/图像的索引页面。

请注意，我假设`FacesServlet`被映射到`*.xhtml`. 否则，您需要相应地更改`/index.xhtml`检查`path`。

# c# - 传递给数据表时，C# Excel Trim 工作表单元格？

> ID：10708707
> 
> 赞同：0
> 
> 时间：2012-05-22T19:23:32.523
> 
> 标签：c#

这是我正在使用的下面的代码，在执行 convert.ToString() 时如何修剪？

```
while (((Microsoft.Office.Interop.Excel.Range)workSheet.Cells[rowIndex, 1]).Value2 != null)
        {
            rowIndex = 2 + index;
            row = excel_Holding_Table.NewRow();
            for (int i = 1; i <= range.Columns.Count; i++)
            {
                row[i-1] = Convert.ToString(((Microsoft.Office.Interop.Excel.Range)workSheet.Cells[rowIndex, i]).Value2);
            }
            excel_Holding_Table.Rows.Add(row);
            index++;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:25:17.530

只需更改以下行..在最后添加 Trim() 函数

```
row[i-1] = Convert.ToString(((Microsoft.Office.Interop.Excel.Range)workSheet.Cells[rowIndex, i]).Value2); 
```

到

```
string temp = Convert.ToString(((Microsoft.Office.Interop.Excel.Range)workSheet.Cells[rowIndex, i]).Value2);
if(temp!=null)
     row[i-1] =temp.Trim();
else
     row[i-1] = ""; 
```

# osx-lion - MAC OS X VPN 客户端 / 证书 / Cisco ASA 系列

> ID：10708708
> 
> 赞同：0
> 
> 时间：2012-05-22T19:23:34.320
> 
> 标签：osx-lion, vpn, ipsec, asa, e-token

我花了很多时间在网上寻找解决方案，但是，唉，所以我最终得出结论，这可能是一个有趣的话题。

这是任务：

**1\. 我需要建立从 MAC OS X（最好是内置 IPSec 客户端）到远程 Cisco ASA 5500 的 VPN 连接。**

**2\. 我有什么：两张证书，一张用于VPN连接密码，一张用于远程桌面登录。它们都存储在 eToken 上。**

问题在于建立连接：在cisco官方网站上有关于支持的vpn客户端的评论，并且mac os x内置的IPSec客户端似乎是合适的。此外，对于 ASA 5500，它适用于“l2tp over ipsec”和“Cisco IPSec”模式。现在，让我们尝试建立“Cisco IPSec”（设置>网络>添加连接）。我有主机地址、账户名和密码，而且我确定它是正确的，因为我在 Win7 中检查过。

**最有趣的是“身份验证设置”：在这里，我应该选择一个证书，但我的钥匙串报告说，我的钥匙串中没有合适的证书。**

其原因可能在于证书的“类型”。我拥有的所有证书都被 OS X 识别为**用户证书**，因此它不能用于授权机器（**顺便说一句，对吗？**）。

好的，如果我们尝试通过 IPSec 的 l2tp 存在同样的问题：我什至可以从 eToken 中选择*用户证书*，但我仍然没有*机器证书*。

*这是它通常在 Windows 中的样子*：

1.  运行 Cisco VPN 客户端

2.  设置主机地址，而不仅仅是选择证书（允许以某种方式选择:)）

3.  点击连接，输入 eToken 的 pin 即可连接

**那么在以下情况下如何建立连接：**

**1\. 即使对于本地 IPsec 客户端，eToken 的证书也非常明显。**

**2\. 另一端有一个cisco asa 5500。**

**或者我会很高兴获得提示或链接，我可以在其中找到有关 cisco vpn 功能的任何描述...**

系统：OS X Lion 10.7.4，eToken SafeNet Authentication Client 8.0。

如果有人知道不同客户的决定 - 很高兴在这里看到它。

预先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:11:11.527

证书颁发机构通过 OpenSSL 进行管理，目前驻留在服务器 497398 (appdr.Company.com) 上。

CA 目录结构在 /etc/pki/CA/

OpenSSL 配置文件位于 /etc/pki/tls/openssl.cnf

openssl.cnf 文件中最重要的配置条目是以下行：

```
subjectAltName = DNS:primary-vpn.Company.com,DNS:backup-vpn.Company.com 
```

此行需要 = 符号周围的空格。

如果客户选择添加另一个防火墙设备，则需要在另一个 DNS 中使用该 FQDN 更新此行：必须重新创建条目和所有密钥并将其重新发布给用户。

DFW 和 ORD 中客户帐户上的防火墙设置为通过使用证书以及用户名/密码的两阶段身份验证进行身份验证。

我们正在使用我们在 CA 上生成并分发给客户端的证书。每个防火墙还需要它自己的 PFX 格式证书以及 PEM 格式 CA 证书的副本。防火墙设备的 PFX 证书不得包含 CA 证书。CA 证书必须以 PEM 格式单独导入防火墙！此 CA 证书成为防火墙上的信任点。

防火墙还包括在设备本身上设置的基本用户名/密码身份验证。

防火墙证书密钥密码与设备本身一起记录在密码注释中。

客户端需要连接到每个防火墙的 DNS 名称，并且它必须（截至 2013 年 5 月 31 日）是 primary-vpn.Company.com 或 backup-vpn.Company.com。不支持通过 IP 地址进行连接，因为证书不包含 IP 地址的 subjectAltName。这是为了支持任何未来的 IP 更改，而无需重新键入所有客户端和设备。

每个用户都需要使用 openssl 和 CA 密钥生成单独的密钥和证书。CA 密钥密码记录在密码说明中的设备 497398 (appdr) 下。

您将需要 CA 密钥密码用于下面的证书创建过程（openssl ca ...）

* * *

如何添加新用户...

在 ca 服务器上：

*   切换到 OpenSSL CA 目录

    cd /etc/pki/CA

*   生成密钥

    openssl genrsa 2048 -out > username.Companyvpn.key

*   产生企业社会责任

    openssl req -new -key username.Companyvpn.key -out username.Companyvpn.csr (OU = username) (Common Name = username) (无密码)

*   生成证书 openssl ca -policy policy_anything -out username.Companyvpn.crt -infiles username.Companyvpn.csr（是签署证书）

*   生成新的随机密码（12 个字符） echo`</dev/urandom tr -dc 'a-zA-Z0-9'| head -c12`

*   制作 PFX 证书/密钥存档 openssl pkcs12 -export -out username.Companyvpn.pfx -inkey username.Companyvpn.key -in username.Companyvpn.crt -certfile /etc/pki/CA/certs/CompanyCA.crt (输入随机密码你刚刚生成）

*   使用此命令验证证书 openssl x509 -in username.Companyvpn.crt -text -noout

*   看保质期，应该是一年。

*   还要寻找这条线：
*   X509v3 主题备用名称
*   如果您没有看到主题备用名称行——停止——openssl.cnf 文件可能有问题！！
*   联系更高级别的管理员寻求帮助

*   通过将新的 PFX 文件附加到客户票证并为他们提供密码来分发新的 PFX 文件。

    如何创建设备证书/密钥...

    在 ca 服务器上：

    *   切换到 OpenSSL CA 目录 cd /etc/pki/CA

    *   为固件设备本身生成密钥 openssl genrsa 1024 > backup-vpn.Company.com.key

    *   为 FW 设备本身生成 CSR openssl req -new -key backup-vpn.Company.com.key -out backup-vpn.Company.com.csr（OU 是 Kimbia 证书）（通用名称 backup-vpn.Company.com）（没有密码）

    *   从 CSR 为 FW 设备生成证书 openssl ca -days 3650 -in backup-vpn.Company.com.csr -out backup-vpn.Company.com.crt

    *   为固件设备制作 PFX（无捆绑 CA 证书）openssl pkcs12 -export -out backup-vpn.Company.com.pfx -inkey backup-vpn.Company.com.key -in backup-vpn.Company.com.crt（使用'rack' 用于导出密码或生成随机密码）

    *   Base64 编码 PFX 存档以供 NetSec 包含在 ASA 上，因为 Cisco 设备需要此 openssl base64 -in backup-vpn.Company.com.pfx -out backup-vpn.Company.com.pfx.b64

    *   将 Base64 编码的 PFX 存档分发给 NetSec 团队

    *   将 PEM 编码的 /etc/pki/CA/certs/CompanyCA.crt 分发给 NetSec 团队

    天堂禁止，如果您必须重新生成 CA 证书和密钥，这里是过程......

    *   将目录更改为 CA cd /etc/pki/CA

    *   生成密钥 openssl genrsa -out /etc/pki/CA/private/CompanyCA.key -des3 2048

    *   生成证书 openssl req -new -x509 -key /etc/pki/CA/private/CompanyCA.key -days 3650 > /etc/pki/CA/certs/CompanyCA.crt

    *   您现在必须重新生成所有设备密钥和证书，重新配置所有设备，并根据上述说明重新生成所有用户密钥和证书。

    *   我们已经为 2023 年设置了当前 CA/设备集的到期时间，以尽量避免必须重新执行此操作。

    要撤销特定证书并禁用用户...

    在 ca 服务器上：

    *   将目录更改为 CA cd /etc/pki/CA

    *   撤销证书 openssl ca -revoke username.Companyvpn.crt

    *   让 NetSec 从防火墙中删除用户名和隧道组条目。

    这是截至 2013 年 5 月 31 日的当前 /etc/pki/tls/openssl.cnf

    ```
    #
    # OpenSSL example configuration file.
    # This is mostly being used for generation of certificate requests.
    #

    # This definition stops the following lines choking if HOME isn't
    # defined.
    HOME            = .
    RANDFILE        = $ENV::HOME/.rnd

    # Extra OBJECT IDENTIFIER info:
    #oid_file       = $ENV::HOME/.oid
    oid_section     = new_oids

    # To use this configuration file with the "-extfile" option of the
    # "openssl x509" utility, name here the section containing the
    # X.509v3 extensions to use:

    #extensions     = v3_req,v3_ca

    # (Alternatively, use a configuration file that has only
    # X.509v3 extensions in its main [= default] section.)

    [ new_oids ]

    # We can add new OIDs in here for use by 'ca', 'req' and 'ts'.
    # Add a simple OID like this:
    # testoid1=1.2.3.4
    # Or use config file substitution like this:
    # testoid2=${testoid1}.5.6

    # Policies used by the TSA examples.
    tsa_policy1 = 1.2.3.4.1
    tsa_policy2 = 1.2.3.4.5.6
    tsa_policy3 = 1.2.3.4.5.7

    ####################################################################
    [ ca ]
    default_ca  = CA_default        # The default ca section

    ####################################################################
    [ CA_default ]

    dir     = /etc/pki/CA       # Where everything is kept
    certs       = $dir/certs        # Where the issued certs are kept
    crl_dir     = $dir/crl      # Where the issued crl are kept
    database    = $dir/index.txt    # database index file.
    #unique_subject = no            # Set to 'no' to allow creation of
                        # several ctificates with same subject.
    new_certs_dir   = $dir/newcerts     # default place for new certs.

    certificate = $certs/CompanyCA.crt  # The CA certificate
    serial      = $dir/serial       # The current serial number
    crlnumber   = $dir/crlnumber    # the current crl number
                        # must be commented out to leave a V1 CRL
    crl     = $dir/crl.pem      # The current CRL
    private_key = $dir/private/CompanyCA.key # The private key
    RANDFILE    = $dir/private/.rand    # private random number file

    x509_extensions = usr_cert      # The extentions to add to the cert

    # Comment out the following two lines for the "traditional"
    # (and highly broken) format.
    name_opt    = ca_default        # Subject Name options
    cert_opt    = ca_default        # Certificate field options

    # Extension copying option: use with caution.
    # copy_extensions = copy

    # Extensions to add to a CRL. Note: Netscape communicator chokes on V2 CRLs
    # so this is commented out by default to leave a V1 CRL.
    # crlnumber must also be commented out to leave a V1 CRL.
    # crl_extensions    = crl_ext

    default_days    = 365           # how long to certify for
    default_crl_days= 30            # how long before next CRL
    default_md  = default       # use public key default MD
    preserve    = no            # keep passed DN ordering

    # A few difference way of specifying how similar the request should look
    # For type CA, the listed attributes must be the same, and the optional
    # and supplied fields are just that :-)
    policy      = policy_match

    # For the CA policy
    [ policy_match ]
    countryName     = match
    stateOrProvinceName = match
    organizationName    = match
    organizationalUnitName  = optional
    commonName      = supplied
    emailAddress        = optional

    # For the 'anything' policy
    # At this point in time, you must list all acceptable 'object'
    # types.
    [ policy_anything ]
    countryName     = optional
    stateOrProvinceName = optional
    localityName        = optional
    organizationName    = optional
    organizationalUnitName  = optional
    commonName      = supplied
    emailAddress        = optional

    ####################################################################
    [ req ]
    default_bits        = 2048
    default_md      = sha1
    default_keyfile     = privkey.pem
    distinguished_name  = req_distinguished_name
    attributes      = req_attributes
    x509_extensions = v3_ca # The extentions to add to the self signed cert

    # Passwords for private keys if not present they will be prompted for
    # input_password = secret
    # output_password = secret

    # This sets a mask for permitted string types. There are several options. 
    # default: PrintableString, T61String, BMPString.
    # pkix   : PrintableString, BMPString (PKIX recommendation before 2004)
    # utf8only: only UTF8Strings (PKIX recommendation after 2004).
    # nombstr : PrintableString, T61String (no BMPStrings or UTF8Strings).
    # MASK:XXXX a literal mask value.
    # WARNING: ancient versions of Netscape crash on BMPStrings or UTF8Strings.
    string_mask = utf8only

    req_extensions = v3_req # The extensions to add to a certificate request

    [ req_distinguished_name ]
    countryName         = Country Name (2 letter code)
    countryName_default     = US
    countryName_min         = 2
    countryName_max         = 2

    stateOrProvinceName     = State or Province Name (full name)
    stateOrProvinceName_default = Texas

    localityName            = Locality Name (eg, city)
    localityName_default    = AmericanCity

    0.organizationName      = Organization Name (eg, company)
    0.organizationName_default  = Software Company Inc

    # we can do this but it is not needed normally :-)
    #1.organizationName     = Second Organization Name (eg, company)
    #1.organizationName_default = World Wide Web Pty Ltd

    organizationalUnitName      = Organizational Unit Name (eg, section)
    #organizationalUnitName_default = Software Company Certificate

    commonName          = Common Name (eg, your name or your server\'s hostname)
    commonName_max          = 64

    emailAddress            = Email Address
    emailAddress_max        = 64

    # SET-ex3           = SET extension number 3

    [ req_attributes ]
    challengePassword       = A challenge password
    challengePassword_min       = 4
    challengePassword_max       = 20

    unstructuredName        = An optional company name

    [ usr_cert ]

    # These extensions are added when 'ca' signs a request.

    # This goes against PKIX guidelines but some CAs do it and some software
    # requires this to avoid interpreting an end user certificate as a CA.

    basicConstraints=CA:FALSE

    # Here are some examples of the usage of nsCertType. If it is omitted
    # the certificate can be used for anything *except* object signing.

    # This is OK for an SSL server.
    # nsCertType            = server

    # For an object signing certificate this would be used.
    # nsCertType = objsign

    # For normal client use this is typical
    # nsCertType = client, email

    # and for everything including object signing:
    # nsCertType = client, email, objsign

    # This is typical in keyUsage for a client certificate.
    # keyUsage = nonRepudiation, digitalSignature, keyEncipherment

    # This will be displayed in Netscape's comment listbox.
    nsComment           = "OpenSSL Generated Certificate"

    # PKIX recommendations harmless if included in all certificates.
    subjectKeyIdentifier=hash
    authorityKeyIdentifier=keyid,issuer

    # This stuff is for subjectAltName and issuerAltname.
    # Import the email address.
    # subjectAltName=email:copy
    # An alternative to produce certificates that aren't
    # deprecated according to PKIX.
    # subjectAltName=email:move

    # Copy subject details
    # issuerAltName=issuer:copy

    #nsCaRevocationUrl      = http://www.domain.dom/ca-crl.pem
    #nsBaseUrl
    #nsRevocationUrl
    #nsRenewalUrl
    #nsCaPolicyUrl
    #nsSslServerName

    # This is required for TSA certificates.
    # extendedKeyUsage = critical,timeStamping

    subjectAltName = DNS:primary-vpn.Company.com,DNS:backup-vpn.Company.com

    [ v3_req ]

    # Extensions to add to a certificate request

    basicConstraints = CA:FALSE
    keyUsage = nonRepudiation, digitalSignature, keyEncipherment

    #subjectAltName = DNS:primary-vpn.Company.com
    #subjectAltName = IP:122.123.321.221

    #subjectAltName=IP:221.321.123.122,DNS:backup-vpn.Company.com
    #subjectAltName=IP:122.123.321.221,DNS:primary-vpn.Company.com
    # Changing from IP+DNS to just DNS to mitigate future IP change issues
    # Added quotes 130530-07939

    [ v3_ca ]

    # Extensions for a typical CA

    # PKIX recommendation.

    subjectKeyIdentifier=hash

    authorityKeyIdentifier=keyid:always,issuer

    # This is what PKIX recommends but some broken software chokes on critical
    # extensions.
    #basicConstraints = critical,CA:true
    # So we do this instead.
    basicConstraints = CA:true

    # Key usage: this is typical for a CA certificate. However since it will
    # prevent it being used as an test self-signed certificate it is best
    # left out by default.
    # keyUsage = cRLSign, keyCertSign

    # Some might want this also
    # nsCertType = sslCA, emailCA

    # Include email address in subject alt name: another PKIX recommendation
    # subjectAltName=email:copy
    # Copy issuer details
    # issuerAltName=issuer:copy

    # DER hex encoding of an extension: beware experts only!
    # obj=DER:02:03
    # Where 'obj' is a standard or added object
    # You can even override a supported extension:
    # basicConstraints= critical, DER:30:03:01:01:FF

    subjectAltName = DNS:primary-vpn.Company.com,DNS:backup-vpn.Company.com

    [ crl_ext ]

    # CRL extensions.
    # Only issuerAltName and authorityKeyIdentifier make any sense in a CRL.

    # issuerAltName=issuer:copy
    authorityKeyIdentifier=keyid:always

    [ proxy_cert_ext ]
    # These extensions should be added when creating a proxy certificate

    # This goes against PKIX guidelines but some CAs do it and some software
    # requires this to avoid interpreting an end user certificate as a CA.

    basicConstraints=CA:FALSE

    # Here are some examples of the usage of nsCertType. If it is omitted
    # the certificate can be used for anything *except* object signing.

    # This is OK for an SSL server.
    # nsCertType            = server

    # For an object signing certificate this would be used.
    # nsCertType = objsign

    # For normal client use this is typical
    # nsCertType = client, email

    # and for everything including object signing:
    # nsCertType = client, email, objsign

    # This is typical in keyUsage for a client certificate.
    # keyUsage = nonRepudiation, digitalSignature, keyEncipherment

    # This will be displayed in Netscape's comment listbox.
    nsComment           = "OpenSSL Generated Certificate"

    # PKIX recommendations harmless if included in all certificates.
    subjectKeyIdentifier=hash
    authorityKeyIdentifier=keyid,issuer

    ###################################################
    ###################################################

    ###Change the subjectAltName per DC####

    # This stuff is for subjectAltName and issuerAltname.
    # Import the email address.
    # subjectAltName=email:copy

    # MOVED THIS UNDER [ v3_req ] above
    ##
    #subjectAltName=IP:221.321.123.122,DNS:backup-vpn.Company.com
    #subjectAltName=IP:122.123.321.221,DNS:primary-vpn.Company.com
    # Changing from IP+DNS to just DNS to mitigate future IP change issues
    #subjectAltName="DNS:primary-vpn.Company.com"

    #####################################################
    #####################################################

    # An alternative to produce certificates that aren't
    # deprecated according to PKIX.
    # subjectAltName=email:move

    # Copy subject details
    # issuerAltName=issuer:copy

    #nsCaRevocationUrl      = http://www.domain.dom/ca-crl.pem
    #nsBaseUrl
    #nsRevocationUrl
    #nsRenewalUrl
    #nsCaPolicyUrl
    #nsSslServerName

    # This really needs to be in place for it to be a proxy certificate.
    proxyCertInfo=critical,language:id-ppl-anyLanguage,pathlen:3,policy:foo

    ####################################################################
    [ tsa ]

    default_tsa = tsa_config1   # the default TSA section

    [ tsa_config1 ]

    # These are used by the TSA reply generation only.
    dir     = ./demoCA      # TSA root directory
    serial      = $dir/tsaserial    # The current serial number (mandatory)
    crypto_device   = builtin       # OpenSSL engine to use for signing
    signer_cert = $dir/tsacert.pem  # The TSA signing certificate
                        # (optional)
    certs       = $dir/cacert.pem   # Certificate chain to include in reply
                        # (optional)
    signer_key  = $dir/private/tsakey.pem # The TSA private key (optional)

    default_policy  = tsa_policy1       # Policy if request did not specify it
                        # (optional)
    other_policies  = tsa_policy2, tsa_policy3  # acceptable policies (optional)
    digests     = md5, sha1     # Acceptable message digests (mandatory)
    accuracy    = secs:1, millisecs:500, microsecs:100  # (optional)
    clock_precision_digits  = 0 # number of digits after dot. (optional)
    ordering        = yes   # Is ordering defined for timestamps?
                    # (optional, default: no)
    tsa_name        = yes   # Must the TSA name be included in the reply?
                    # (optional, default: no)
    ess_cert_id_chain   = no    # Must the ESS cert id chain be included?
                    # (optional, default: no) 
    ```

# shell - awk 操作 csv 文件

> ID：10708709
> 
> 赞同：2
> 
> 时间：2012-05-22T19:23:36.440
> 
> 标签：shell, csv, awk

我想使用 awk 读取 csv 文件。csv 文件包含 5 列，c1、c2、c3、c4、c5。我想判断c1，c2和c3一起是唯一的，就像数据库约束一样。

这是示例 csv 文件：

```
c1,c2,c3,c4,c5
1886,5141,11-2011,62242.57,52.71
1886,5140,11-2011,63763.75,52.22
23157666,4747,11-2011,71.07,83.33
1886,5141,11-2011,4645.45,2135.45 
```

在这种情况下，row1和row4违反了唯一性约束，并提示错误信息。

如何用awk实现它？提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:35:18.990

```
awk -F, 'line[$1,$2,$3] {printf "Error: lines %d and %d collide\n", line[$1,$2,$3], NR; next} {line[$1,$2,$3] = NR}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:26:00.547

这列出了每个重复的*所有*行。它只为每组输出*一次重复消息。*

```
awk -F, '{count[$1,$2,$3]++; line[$1,$2,$3] = line[$1,$2,$3] ", " NR} END {for (i in count) {if (count[i] > 1) {v=i; gsub(SUBSEP, FS, v); print "Error: lines", substr(line[i], 3), "collide on value:", v}}}' 
```

分成多行：

```
awk -F, '
    {
        count[$1,$2,$3]++; 
        line[$1,$2,$3] = line[$1,$2,$3] ", " NR
    }
    END {
        for (i in count) {
            if (count[i] > 1) {
                v = i;
                gsub(SUBSEP, FS, v);
                print "Error: lines", substr(line[i], 3), "collide on value:", v
            }
        }
    }' 
```

这是凯文答案的变体。

# c# - 将外键值发送到 Create 操作

> ID：10708715
> 
> 赞同：1
> 
> 时间：2012-05-22T19:24:01.993
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我正在开发一个简单的项目跟踪网站。“项目”有“任务”，“任务”有“子任务”。使用默认脚手架，在创建“任务”时，我必须手动选择“任务”的“ProjectId”字段。我想设置它，我只能从“项目详细信息”视图中创建一个“任务”。我想知道如何做到这一点，这样我就不必在创建新任务时手动选择“ProjectId”。以下是片段：

这是由 Visual Studio 自动生成的 Task 的 Create.cshtml 的一部分：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.ProjectId, "Project Id")
    </div>
    <div class="editor-field">
        @Html.DropDownList("ProjectId", String.Empty)
        @Html.ValidationMessageFor(model => model.ProjectId)
    </div> 
```

这会导致一个下拉框，我必须在其中手动选择项目 ID。

这是来自“任务”控制器的默认“创建”操作：

```
 public ActionResult Create()
    {
        ViewBag.ProjectId = new SelectList(db.Projects, "Id", "Id");
        ViewBag.StatusId = new SelectList(db.Status, "Id", "Name");
        ViewBag.TaskTypeId = new SelectList(db.TaskTypes, "Id", "Name");
        return View();
    } 
```

我想要的是这样的：

```
 public ActionResult Create()
    {
        ViewBag.ProjectId = RouteData.Values["Id"];
        ViewBag.StatusId = new SelectList(db.Status, "Id", "Name");
        ViewBag.TaskTypeId = new SelectList(db.TaskTypes, "Id", "Name");
        return View();
    } 
```

我必须在某个地方设置 myTask.ProjectId = ViewBag.ProjectId。但我不知道在哪里。这甚至是正确的做法吗？或者，还有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:39:32.870

设置的默认值`ProjectId`并不像你想象的那么难`SelectList`，需要一个`object selectedValue`.

替换这个：

```
ViewBag.ProjectId = new SelectList(db.Projects, "Id", "Name"); 
```

有了这个（在这种情况下，我使用 2 作为选定的 ID）：

```
ViewBag.ProjectId = new SelectList(db.Projects, "Id", "Name", 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:50:37.753

你确定你需要`DropDownList`而不只是一个具有固定值的隐藏输入吗？

听起来您希望设置该值，甚至不应该看到它的视觉表示。如果是这种情况，您只需在模型中传递您的 ID，然后将其绑定到隐藏的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:47:09.270

我想到了两种可能性。

控制器：

```
public ActionResult Create()
{
    var task = new Task()  { ProjectId = your_predefined_value };
    ViewBag.Projects = new SelectList(db.Projects, "Id", "Id");
    ViewData.Model = task;
    return View();
} 
```

看法：

```
@Html.DropDownListFor(x => x.ProjectId, (SelectList)ViewBag.Projects) 
```

DropDownListFor 将从 ViewBag.Projects 中预先选择 Id 与 x.ProjectId 匹配的项目

另一种方法是`Selected`在特定项目上将 SelectListItem 的属性设置为 true。

控制器：

```
public ActionResult Create()
{
    ViewBag.Projects = new List<SelectListItem>() { 
        new SelectListItem() 
        {
            Value = "1",
            Text = "Project 1",
            Selected = true
        }
    };
    //...
} 
```

看法：

```
@Html.DropDownList("ProjectId", (IEnumerable<SelectListItem>)ViewBag.Projects) 
```

# wpf - 在 WPF 中使用 HierarchicalDataTemplate 和 Observable

> ID：10708721
> 
> 赞同：0
> 
> 时间：2012-05-22T19:24:26.617
> 
> 标签：wpf, xaml, treeview, observablecollection, hierarchicaldatatemplate

我需要使用 ObservableCollection 并且只有一个类。这是我的代码。出于某种原因，我无法让 TreeView 填充 Observable Collection 。任何帮助，将不胜感激。

XAML：

```
<UserControl x:Class="ValidationWPF.ValidationUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:local="clr-namespace:ValidationWPF.DataSources"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <local:ValidationItem x:Key="ValidationMessages" />

        <DataTemplate x:Key="Messages">
            <TextBlock Text="{Binding Messages}" />
        </DataTemplate>

        <HierarchicalDataTemplate x:Key="SubItem" ItemTemplate="{StaticResource Messages}" ItemsSource="{Binding Messages}" >
            <TextBlock Text="{Binding subItem}" />
        </HierarchicalDataTemplate>

        <HierarchicalDataTemplate  ItemTemplate="{StaticResource SubItem}" x:Key="ItemTemplate"
                ItemsSource="{Binding subItem}">
            <TextBlock Text="{Binding item}" FontWeight="Bold" />
        </HierarchicalDataTemplate>

    </UserControl.Resources>

    <Grid>
        <telerik:RadTreeView ItemsSource="{Binding Source={StaticResource ValidationMessages}}"
                ItemTemplate="{StaticResource ItemTemplate}" x:Name="RadTreeView"/> 
    </Grid>
</UserControl> 
```

班级：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.ObjectModel;

namespace ValidationWPF.DataSources
{
    class ValidationItem : ObservableCollection<ValidationItem>
    {
        public ValidationItem()
        {
        }

        public ValidationItem(Item item, SubItem subItem, string Messages)
        {
            this.item = item;
            this.subItem = subItem;
            this.Message = Messages;
        }

        public string Message { get; set; }

        public SubItem subItem { get; set; }

        public Item item { get; set; }

        public ObservableCollection<ValidationItem> ValidationItems
        {
            get
            {
                Add(new ValidationItem(Item.Customer, SubItem.Name, "Customer Name Cannot be Null"));
                Add(new ValidationItem(Item.Customer, SubItem.Phone, "Phone number cannot be Null"));
                Add(new ValidationItem(Item.Customer, SubItem.Phone, "Phone number must be in the format (###)###-####"));
                Add(new ValidationItem(Item.Customer, SubItem.Address, "Customer Address cannot be Null"));
                return ValidationItems;
            }
        }
    }

    public enum Item
    {
        Customer
    }

    public enum SubItem
    {
        Address,
        Phone,
        Name
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:36:56.883

更新：好的，这里发生了很多事情，所以需要一段时间才能真正理解。两件事情。

将模型的默认构造函数更改为

```
public ValidationItem()
    {
        Add(new ValidationItem(Item.Customer, SubItem.Name, "Customer Name Cannot be Null"));
        Add(new ValidationItem(Item.Customer, SubItem.Phone, "Phone number cannot be Null"));
        Add(new ValidationItem(Item.Customer, SubItem.Phone, "Phone number must be in the format (###)###-####"));
        Add(new ValidationItem(Item.Customer, SubItem.Address, "Customer Address cannot be Null"));
    } 
```

另一种是更改您的“subItem”属性。HierarchicalDataTemplate 期望 ItemsSource 是一个 IEnumerable。所以将属性更改为

```
public IEnumerable<SubItem> subItems 
```

即使您只有一个，也将其设为 IEnumerable。您还需要将 HierarchicalDataTemplates 更改为

```
 <HierarchicalDataTemplate x:Key="SubItem">
        <TextBlock Text="{Binding}" />
    </HierarchicalDataTemplate>

    <HierarchicalDataTemplate ItemTemplate="{StaticResource SubItem}" x:Key="ItemTemplate"
            ItemsSource="{Binding subItems}">
        <TextBlock Text="{Binding item}" FontWeight="Bold" />
    </HierarchicalDataTemplate> 
```

它还有助于调试您的应用程序并查看“输出”窗口。如果有任何绑定问题，它会告诉你。像“错误绑定，找不到属性'消息'”之类的东西。

# java - 在Java中返回排序列表

> ID：10708729
> 
> 赞同：4
> 
> 时间：2012-05-22T19:25:04.800
> 
> 标签：java, oop, sorting, collections, refactoring

我正在编写这样的代码：

```
List<Bean> beans = service.findBeans();
Collections.sort(beans, new BeanComparator());
return beans; 
```

它完美地工作。我正在寻找的是一条捷径，只需一行：

```
return somelibrary.Collections.sort(service.findBeans(), new BeanComparator()); 
```

或者：

```
return somelibrary.newList(service.findBeans(), new BeanComparator()); 
```

请注意，它需要一个可变列表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T19:39:11.427

这是一行：

```
List<Bean> beans = service.findBeans(); Collections.sort(beans, new BeanComparator()); return beans; 
```

但更严重的是，Java 并不是真正适合单行代码的语言。此外，仅仅因为某些东西是单线的，并不意味着它会更好。例如，我最初惊讶地发现：

```
return condition ? a : b; 
```

创建比

```
if( condition )
    return a;
else
    return b; 
```

但这就是语言和编译器的样子。

如果你坚持你的单线，番石榴[可以](http://code.google.com/p/guava-libraries/)[`Ordering`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Ordering.html)做到：

```
return Ordering.from( new BeanComparator() ).sortedCopy( service.findBeans() ); 
```

返回的列表是可修改的、可序列化的，并且具有随机访问权限。

效率方面，我认为在开销方面有点浪费。而且您现在还依赖于第 3 方库。您实际上是在使用非常强大的工具来完成一项非常简单的任务。如果这就是你使用它的全部，那就太过分了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T19:32:22.817

我相信下面的函数会产生你想要的结果。只需将其放在您选择的类中即可。

```
public static <T> List<T> sort(List<T> list, Comparator<? super T> compare) {
    Collections.sort(list, compare);
    return list;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T19:51:22.613

您可以使用 apache CollectionUtils 将列表与比较器和空列表进行比较。

```
CollectionUtils.collate(service.findBeans().iterator(),Collections.EMPTY_LIST.iterator(),new beanComparator()) 
```

CollectionUtils 真的应该添加一个返回排序列表的实用方法......

对 use-more-lines 的经典反驳是 LOGGING。出于可读性目的而进行的日志记录不应超过一行。当您试图找出代码实际在做什么时，日志记录是一种静态噪音，但日志记录是相当关键的。

所以日志记录应该是紧凑的（一行）和安静的（不应该抛出异常/是空安全的）并且应该是高性能的（如果关闭不应该引入超出 isDebugOn() 检查的额外处理。

第二个反驳是流利的接口，如 JOOQ，它变得越来越流行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T22:25:09.707

我想如果你没有重复并且不介意你可以使用的hacky代码：

```
return new ArrayList<Bean>(new TreeSet<Bean>(service.findBeans())); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-02T16:02:46.443

我认为发布的原始问题是有效的。因为“Collections.sort(..)”方法具有对传入的 Collection 进行排序的预期副作用，所以如果您想维护原始 Collection，则必须执行以下操作：

```
List<Bean> beans = service.findBeans();
List<Bean> sortedBeans = new ArrayList<Bean>(beans);
Collections.sort(sortedBeans, new BeanComparator());
return sortedBeans; 
```

在上面的例子中，我们对服务方法返回的 Collection 进行排序可能没什么大不了的。但是，如果我们正在排序的 Collection 是一个方法参数，并且调用者不希望传入的 Collection 被排序怎么办？

我通常更喜欢没有后果的方法。

由于“Collections.sort(..)”影响列表，我必须编写以下代码：

```
public void doSomethingWithBeansInOrder(List<Bean> beans) {
    Collection<Bean> sortedBeans = new ArrayList<Bean>(beans);
    Collections.sort(sortedBeans, ...comparator...;

    for (Bean bean : sortedBeans) {
        .. do something
    }
} 
```

我发现“sortedBeans”的定义很难看。

如果“（Collections.sort（..）”（或类似的东西）返回一个新的集合并且不影响传入的集合，我可以写：

```
public void doSomethingWithBeansInOrder(List<Bean> beans) {
    for (Bean bean : Collections.sort(beans, ...comparator...) {
        .. do something
    }
} 
```

[我认为Guava](http://code.google.com/p/guava-libraries/)的答案[`Ordering`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/Ordering.html)是最好的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-08T06:56:09.520

首先，Java 8在接口上引入了[sort()方法。](https://docs.oracle.com/javase/8/docs/api/java/util/List.html#sort-java.util.Comparator-)`List`因此，对实际列表进行排序的示例是：

```
List<Integer> integerList = Arrays.asList(3, 2, 1);
integerList.sort(Comparator.naturalOrder());
return integerList; 
```

在这里，我使用了预定义的`naturalOrder()`比较器，它又依赖于[Comparable](https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html)，但也可以使用自定义比较器。这仍然需要两个语句。

但是，如果所需的行为是创建一个新的排序列表，并保持原来的状态不变，我猜流将是最简单的方法：

```
integerList.stream().sorted(Comparator.naturalOrder()).collect(Collectors.toList()); 
```

与上面相同的内容适用于这里的比较器。

# c++ - 在 C++ 中做某事两次的成语

> ID：10708731
> 
> 赞同：5
> 
> 时间：2012-05-22T19:25:12.180
> 
> 标签：c++, idioms

有没有做某事两次的常见习语，如以下情况？

```
 for ( int i = 0; i < num_pairs; i++ ) {
        cards.push_back( Card(i) );
        cards.push_back( Card(i) );
    } 
```

我觉得有一种比引入一个从 0 到 1 计数的新循环变量更清晰的方法，特别是因为它除了计数之外不使用。

```
 for ( int i = 0; i < num_pairs; i++ )
        for ( int j = 0; j < 2; j++ )
            cards.push_back( Card(i) ); 
```

（`Card`只是我编的一些课程，与问题无关。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T19:29:03.867

您可能想`fill_n`在`<algorithm>`

```
for ( int i = 0; i < num_pairs; i++ )
    std::fill_n(std::back_inserter(cards), 2, Card(i)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T19:29:49.483

就我个人而言，我会保持现状。它看起来很干净，很容易理解，而且可读性很强。只需发表评论，说明您为什么要这样做两次（但无论如何您都会这样做）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-22T21:10:13.560

我有几个建议。我的建议见*最后一个：*

1.  在我看来节拍：`insert(it,` *`N`*`, value)``std::fill_n`

    ```
    for ( int i = 0; i < num_pairs; i++ ) {
        cards.insert(cards.end(), 2, Card(i) );
    } 
    ```

2.  如果顺序不重要，您可以只生成一次卡片，然后**再**复制

    ```
    std::copy(cards.begin(), cards.end(), std::back_inserter(cards)); 
    ```

3.  使用脏 lambda 和整数除法技巧。**警告**这具有过早优化的标志：无缘无故降低可读性。

    ```
    std::vector<Card> cards(num_pairs * 2);
    int i = 0;
    std::generate_n(cards.begin(), num_pairs, [&i] () { return Card(i++/2); }); 
    ```

    （假设`Card`是*default-constructible*。如果不是，使用`cards.back_inserter()`）

4.  ## 我的推荐

    以下在性能和意图表达方面均胜出：

    ```
    std::vector<Card> cards;
    cards.reserve(num_pairs*2);
    for (int i = 0; i < num_pairs; ++i)
    {
        cards.emplace_back(i);
        cards.emplace_back(i);
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T19:45:37.717

使用将内部循环扩展为语句是正确的，因为仅使用另一个循环 2 次迭代对性能不利。由于频繁`jumps`，第二个（嵌套循环）将执行缓慢。是否会有任何明显的差异完全取决于`num_pairs`.

所以第一个对性能更好（无论增益可能有多小）。这种扩展循环`loop unwinding/unrolling`在编译器的术语中被称为。但是，该术语不在编程级别使用，因为通常只有编译器这样做才能使代码更快。`Idioms`肯定`design notions`会帮助程序员编写更好、更高效的代码并更好地理解语言。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T19:46:26.807

如果您想经常这样做，请编写一个小实用函数：

```
template<class F>
void repeat(unsigned times, F callback) {
  while (times--) callback();
}

// ...

for (int i = 0; i < num_pairs; i++) {
  repeat(2, [&] { cards.push_back(Card(i)); });
} 
```

我在[Ideone](http://ideone.com/lHjtP)上写了一个例子。

* * *

您的第一种方法可能会让您的代码的未来读者感到困惑。他们可能会认为代码偶然出现了两次。使用这样的函数可以避免这种混乱。

即使> 0，性能损失也将非常小，因为编译器可能会内联函数并完全优化小`times`'的循环。如果您担心性能，请先进行基准测试。

# rspec - 如何在 spec_helper.rb 中包含一个模块？

> ID：10708735
> 
> 赞同：2
> 
> 时间：2012-05-22T19:25:20.140
> 
> 标签：rspec, paperclip

我正在为回形针宝石设置测试，部分说明如下：

在 spec_helper.rb 中，您需要使用匹配器：

```
require "paperclip/matchers" 
```

并包含模块：

```
Spec::Runner.configure do |config|
  config.include Paperclip::Shoulda::Matchers
end 
```

我想知道我是否应该粘贴：

```
Spec::Runner.configure do |config|
  config.include Paperclip::Shoulda::Matchers
end 
```

到 spec_helper.rb 文件中，或者如果我应该把它放在其他人并在这个文件中以某种方式引用它。

感谢你的帮助 ：）

# java - Java整数比较：大于

> ID：10708736
> 
> 赞同：6
> 
> 时间：2012-05-22T19:25:23.130
> 
> 标签：java, comparison, integer

我有一百万个整数的数组，因为我正在尝试并行快速排序。我有时会有以下奇怪的行为：

为了检查数组是否正确排序，我在排序后输入了以下代码：

```
for(int j=0; j < array_parallel.length-1; ++j)
   if(array_parallel[j] > array_parallel[j+1])
    System.out.println("ERROR! NOT SORTED CORRECTLY!"); 
```

在某些情况下，我得到错误输出，它没有正确排序，当我调试时，我发现以下内容（示例，总是不同）：

> j=1942 array_parallel[1942] = 6000; array_parallel[1943] = 6000;

（尝试忽略数字，它不是任何特定的值或范围）所以它总是在左值等于右值的情况下。好吧，为了比较更大，这应该返回 false，但我肯定会得到输出。

到底怎么了！？

我什至交叉检查了数组，它的排序正确。如果我绘制一个小数组（大约 100 个）也可以。我错过了什么我的想法欺骗了我吗？

21:32 (UTC+1) 编辑：

```
private static int ANZAHL = 1000000;        // Größe des Arrays

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        int array_single[] = new int[ANZAHL];
        int array_parallel[] = new int[ANZAHL];

        Speedmeasure sp_single = new Speedmeasure();
        Speedmeasure sp_parallel = new Speedmeasure();
        ArrayReader ar = null;

        try {
            ar = new ArrayReader(array_single, array_parallel);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (ClassNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        if(ar == null) {
            System.err.println("Großes Problem. Lass es sein!");
            System.exit(-1);
        }
        else {

            for(int i=0; i < 5; ++i) {
                Quicksort_Single qs = new Quicksort_Single();
                sp_single.setStart(System.currentTimeMillis());

                qs.quicksort_start(array_single);
                sp_single.setStop(System.currentTimeMillis());

                //printArray(array);
                PrintSpeed(sp_single.getSpeed(), "Single");

                System.out.print("\nUnd jetzt treiben wir es parallel! \n\n");
                Thread t1 = new Thread(new Quicksort_Parallel(0, array_parallel.length-1, array_parallel));

                sp_parallel.setStart(System.currentTimeMillis());
                t1.start();

                try {
                    t1.join();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                sp_parallel.setStop(System.currentTimeMillis());

                //printArray(array_parallel);
                PrintSpeed(sp_parallel.getSpeed(),"Parallel");

                System.out.println("Speed up was: "+sp_parallel.calcSpeedup(sp_single.getSpeed(), sp_parallel.getSpeed()));
                System.out.println("******************************************");

                for(int j=0; j < array_single.length-1; ++j)
                    if(array_single[j] > array_single[j+1])
                        System.out.println("ERROR! NICHT SORTIERT KORREKT BEI SINGLE!");

                for(int j=0; j < array_parallel.length-1; ++j)
                    if(array_parallel[j] > array_parallel[j+1])
                        System.out.println("ERROR! NICHT SORTIERT KORREKT BEI PARALLEL!");

                ar.copyArray(array_single, array_parallel);
            }
        }
    } 
```

我在启动并行排序的线程上进行连接。第一个线程最多同时产生最多 4 个线程。我不能 100% 确定它可能是什么并发，正如我在调试器中看到的那样，数组已排序。我将两个整数的输出相加，再看看。

已编辑 23/05/12 16:46 UTC+1

我正在改变整个事情以使用来自 JDK 1.7 的新的、非常简单的 ForkJoinPool。使用最多 10 个 mio 整数的整数数组进行测试，得到了有趣的结果：我在 Core2Duo (2010) MacBook Pro 和 Core-i5 (2011) Windows 7 上对其进行了测试：

core2duo 和 i5 可以进行超线程，所以我现在使用 availableProcessors()*2 进行了测试 -> core2duo 的 2 个线程加速到 1.8 和 1.7 得到了一点提升；i5 目前的加速比约为 3.2，每个 availableProcessors()*2 最多 8 个线程

还在用我的机器做实验。所有测试均使用相同的数组完成，平均值是根据每个数组大小的 1000 次排序迭代计算得出的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:31:26.970

查看您的代码，您生成了一个线程，然后立即将其加入主执行线程：

```
 Thread t1 = new Thread(new Quicksort_Parallel(0, array_parallel.length-1, array_parallel));

        sp_parallel.setStart(System.currentTimeMillis());
        t1.start();

        try {
            t1.join(); 
```

问题变成了 - 你在 Quicksort_Parallel 例程中做什么？你是否产生了额外的线程？你要加入**所有**这些吗？如果不是，您已经创建了一个竞争条件，可以解释您所看到的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:32:04.827

您可能是竞争条件的受害者，这意味着您的输出取决于其他事件的顺序。因此，如果您有一个工作速度更快的线程，您将获得竞争条件。阻止这种情况的一种方法是使用信号量或在线程之间划分循环。你怎么样？你用的是减法吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:58:37.100

如果您使用的是 Java SE 7，请考虑使用新的 fork/join API：

[http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)

[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinPool.html)

[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinTask.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinTask.html)

[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinWorkerThread.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ForkJoinWorkerThread.html)

# jquery - 位置绝对表单验证失败时提交

> ID：10708737
> 
> 赞同：1
> 
> 时间：2012-05-22T19:25:31.933
> 
> 标签：jquery, validation

[我正在尝试使用 Postion Absolute jQuery Form Validation https://github.com/posabsolute/jQuery-Validation-Engine](https://github.com/posabsolute/jQuery-Validation-Engine)设置我的表单，但遇到了一个小问题。当我单击提交时，错误将正确弹出，但是表单无论如何都会提交，无论是否未正确填写必填字段。

这是我必要的代码：

```
<script>
        jQuery(document).ready(function(){
            // binds form submission and fields to the validation engine
            jQuery("#formID").validationEngine();
        });
    </script>
</head> 
```

……

```
<form  method="post" id="formID" action="sendform.php"> 
```

...

```
<input name="Submit" class="submit" type="submit" id="submit" /> 
```

如果您需要更多信息，请告诉我。再一次，当我单击提交时，会弹出错误对话框，但无论如何都会提交表单。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:49:56.400

尝试这个：

```
jQuery("#formID").validationEngine('attach', {
  onFailure: function(form, status){
    alert("The form status is: " +status+", it will never submit");
  }  
}); 
```

# c# - 遍历 XML sql 插入

> ID：10708747
> 
> 赞同：2
> 
> 时间：2012-05-22T19:26:17.000
> 
> 标签：c#, .net, sql-server, sql-server-2008

我有三个`table1, table2, table3`带有`col1, col2`标识`ID`列的表。这些表关系是在数据库中定义的。

我正在尝试创建一个接受 xml 字符串输入并将该数据保存到表中的存储过程。

这是 XML 输入

```
<root>
 <table1 col1='a' col2='b'>
  <table2Array>
   <table2 col1='c' col2='d'>
    <table3array>
     <table3 col1='g' col2='h' />
     <table3 col1='i' col2='j' />
    </table3array>
   </table2>
  <table2 col1='c' col2='d'>
   <table3array>
    <table3 col1='k' col2='l' />
    <table3 col1='i' col2='j' />
   </table3array>
  </table2>
 </table2Array>
</table1>
 <table1 col1='a' col2='b'>
  <table2Array>
   <table2 col1='e' col2='f'>
    <table3array>
     <table3 col1='i' col2='j' />
     <table3 col1='i' col2='j' />
    </table3array>
   </table2>
   <table2 col1='e' col2='f'>
    <table3array>
     <table3 col1='g' col2='h' />
     <table3 col1='g' col2='h' />
    </table3array>
   </table2>
  </table2Array>
 </table1>
</root> 
```

此 xml 来自第三方对象，我们无法控制修改第三方对象以发出不同格式的 xml。

算法：

1.  循环遍历每个节点
2.  将节点属性插入表中
3.  获取最后一个身份值
4.  调用具有最后一个标识值的子节点作为外键
5.  做直到没有更多的子节点

这是处理这种情况的唯一方法吗？如果是这样，如何遍历 xml 节点？

请帮忙！！

谢谢，

埃森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:30:36.123

使用[合并](http://technet.microsoft.com/en-us/library/bb510625.aspx)，`output`您可以使用[此处](https://stackoverflow.com/questions/5365629/using-merge-output-to-get-mapping-between-source-id-and-target-id)描述的技术在没有循环的情况下执行此操作。

我假设你的表结构是这样的。

```
create table Table1
(
  Table1ID int identity primary key,
  Col1 char(1),
  Col2 char(1)
)

create table Table2
(
  Table2ID int identity primary key,
  Table1ID int references Table1(Table1ID),
  Col1 char(1),
  Col2 char(1)
)

create table Table3
(
  Table3ID int identity primary key,
  Table2ID int references Table2(Table2ID),
  Col1 char(1),
  Col2 char(1)
) 
```

编码

```
declare @T1 table (XMLCol xml, TargetID int);
declare @T2 table (XMLCol xml, TargetID int);

merge Table1 as T
using (select T1.XMLCol.query('*'),
              T1.XMLCol.value('@col1', 'char(1)'),
              T1.XMLCol.value('@col2', 'char(1)')
       from @XML.nodes('/root/table1') as T1(XMLCol)) as S(XMLCol, Col1, Col2)
on 1 = 0
when not matched then
  insert (Col1, Col2) values (S.Col1, S.Col2)
output S.XMLCol, inserted.Table1ID into @T1;          

merge Table2 as T
using (select T2.XMLCol.query('*'),
              T1.TargetID,
              T2.XMLCol.value('@col1', 'char(1)'),
              T2.XMLCol.value('@col2', 'char(1)')
       from @T1 as T1  
         cross apply T1.XMLCol.nodes('table2Array/table2') as T2(XMLCol)) as S(XMLCol, ID1, Col1, Col2)
on 1 = 0
when not matched then
  insert (Table1ID, Col1, Col2) values (S.ID1, S.Col1, S.Col2)
output S.XMLCol, inserted.Table2ID into @T2;          

insert into Table3(Table2ID, Col1, Col2)
select T2.TargetID,
       T3.XMLCol.value('@col1', 'char(1)'),
       T3.XMLCol.value('@col2', 'char(2)') 
from @T2 as T2
  cross apply T2.XMLCol.nodes('table3array/table3') as T3(XMLCol); 
```

[SE-Data](https://data.stackexchange.com/stackoverflow/query/71074)（选择“纯文本结果”以查看所有结果集）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:50:10.283

如果您的代码示例代表您获得的数据类型，并且严格遵守一致的结构，您可以尝试创建一个类来反序列化。下面是一组示例类，它们将从给定的 XML 示例中正确反序列化：

```
[XmlRoot("root")]
public class MyCustomStructure
{
    [XmlElement("table1")]
    public Table1Structure[] Table1Array { get; set; }
}

[XmlRoot("table1")]
public class Table1Structure
{
    [XmlAttribute("col1")]
    public string Col1 { get; set; }
    [XmlAttribute("col2")]
    public string Col2 { get; set; }
    [XmlArray("table2Array")]
    [XmlArrayItem("table2")]
    public Table2Structure[] Table2Array { get; set; }
}

[XmlRoot("table2")]
public class Table2Structure
{
    [XmlAttribute("col1")]
    public string Col1 { get; set; }
    [XmlAttribute("col2")]
    public string Col2 { get; set; }
    [XmlArray("table3array")]
    [XmlArrayItem("table3")]
    public Table3Structure[] Table3Array { get; set; }
}

public class Table3Structure
{
    [XmlAttribute("col1")]
    public string Col1 { get; set; }
    [XmlAttribute("col2")]
    public string Col2 { get; set; }
} 
```

将应用反序列化的示例代码：

```
var ser = new XmlSerializer(typeof(MyCustomStructure));

// if xml is in a string, use the following:
var sr = new StringReader(xml);
var xr = new XmlTextReader(sr);

// if xml is in a stream, use the following:
var xr = new XmlTextReader(stream);

// if xml is in an XmlElement, use the following:
var xr = new XmlNodeReader(element);

// result contains an instance of MyCustomStructure
var result = ser.Deserialize(xr); 
```

从这里开始，它就像遍历`MyCustomStructure`with for each 循环的内容并应用您的自定义数据库插入逻辑一样简单：

```
for each (var table1 in result.Table1Array)
{
    // insert table1, get inserted ID
    for each (var table2 in table1.Table2Array)
    {
        // insert table2, use table1 inserted ID, get table2 ID
        for each (var table3 in table2.Table3Array)
        {
            // insert table3, use table2 inserted ID
        }
    }
} 
```

如果您担心插入的数据规模的性能，您可以尝试将数据作为表值参数传递，或者您可以在 SQL 端轻松解析的其他格式。您还可以批量上传所有 table1 条目，取回所有 ID，然后批量上传具有正确映射 ID 的所有 table2 条目，取回所有新 ID，等等，总共需要 3 次左右往返并且应该很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:41:52.590

认为这对寻找类似解决方案的人会有所帮助。这就是我在 SQL 中处理遍历节点的方式

```
 declare @xmlRoot as xml 
        set @xmlRoot= '<root>
         <table1 col1="a" col2="b">
          <table2Array>
           <table2 col1="c" col2="d">
            <table3array>
             <table3 col1="g" col2="h" />
             <table3 col1="i" col2="j" />
            </table3array>
           </table2>
          <table2 col1="c" col2="d">
           <table3array>
            <table3 col1="k" col2="l" />
            <table3 col1="i" col2="j" />
           </table3array>
          </table2>
         </table2Array>
        </table1>
         <table1 col1="a" col2="b">
          <table2Array>
           <table2 col1="e" col2="f">
            <table3array>
             <table3 col1="i" col2="j" />
             <table3 col1="i" col2="j" />
            </table3array>
           </table2>
           <table2 col1="e" col2="f">
            <table3array>
             <table3 col1="g" col2="h" />
             <table3 col1="g" col2="h" />
            </table3array>
           </table2>
          </table2Array>
         </table1>
        </root>'
        Declare @col1 varchar(100),@col2 varchar(100), @table1Counter int, @table2Counter int

        select @table1Counter=0

        DECLARE table1_cursor CURSOR FOR 
            SELECT
            col1 =  item.value('./@col1', 'varchar(100)'), 
            col2 =  item.value('./@col2', 'varchar(100)') 
            FROM @xmlRoot.nodes('root/table1') AS T(item);

            OPEN table1_cursor

            FETCH NEXT FROM table1_cursor 
            INTO  @col1 ,@col2

            WHILE @@FETCH_STATUS = 0
                BEGIN
                    --insert into table1 and get id into a variable
                     set @table1Counter=@table1Counter+1

                    DECLARE table2_cursor CURSOR FOR 
                    SELECT
                    col1 =  item.value('./@col1', 'varchar(100)'),
                    col2 = item.value('./@col2', 'varchar(100)') 
                    FROM @xmlRoot.nodes('root/table1[sql:variable("@table1Counter")]/table2Array/table2') AS T(item);                            
                        OPEN table2_cursor
                        FETCH NEXT FROM table2_cursor INTO @col1 ,@col2                       
                        WHILE @@FETCH_STATUS = 0
                            BEGIN
                                --insert into table2 and get id into a varialbe
                                set @table2Counter = @table2Counter+1

                                 --do same for table3 similar to table2

                                FETCH NEXT FROM table2_cursor INTO @col1 ,@col2
                             END
                        CLOSE table2_cursor
                        DEALLOCATE table2_cursor                            
                    FETCH NEXT FROM table1_cursor 
                    INTO  @col1, @col2                      
                END 
        CLOSE table1_cursor;
        DEALLOCATE table1_cursor; 
```

# php - 如何规范化此汽车零件数据库？

> ID：10708748
> 
> 赞同：3
> 
> 时间：2012-05-22T19:26:25.757
> 
> 标签：php, mysql, database, normalization

我是 PHP/数据库的新手……但我很快就学会了。我想问你们的很简单。我想规范化我的数据库并且不积极如何去做。我明白了这个概念，但看到了多种方法来做到这一点。图我会问有经验的人。

这是我的数据库（到目前为止 2 个表）：品牌产品

```
***Brands Breakdown:***
1   id          int(6)
**Note:** Above, I will probably use 4-Letter codes for each brand instead of primary/int/auto.
2   name            text
3   logo            varchar(20)
4   phone           varchar(20)
5   website     varchar(30)
6   contact_name    text
7   contact_number  varchar(20)
8   contact_email   varchar(30)
9   warehouse       varchar(20)
10  pricing         varchar(15)
11  bio             varchar(300)

***Products Breakdown***
id (INT(6) / Auto_Increment)
brand (This is where I'll insert the four letter code for brand)
category (e.g. Brakes)
subCategory (e.g. Brake Rotors)
details (e.g. Drilled and Slotteed 'Razr')
sku (Part #)
minYear
maxyear
make (e.g. Subaru)
model (e.g. Impreza)
subModel (e.g. WRX STi)
description (Paragraph on part describing it)

specs (I imagine this can be expanded on. need cells somewhere for sizes / colors / engine codes / etc.)

msrp
jobber
price
cost
weight (of part)
warehouse (Could be moved to brand's table)
image (URL of image for the part) 
```

* * *

所以我的主要问题是：我是否让每个品牌都有自己的表格，类似于我目前的“产品”表格？还是有“类别”表？“子类别”？你们将如何规范化这些数据？

我想在学习这些东西的同时拥有一个可靠的数据库，这样我才能以正确的方式学习。任何意见，将不胜感激。

更新：对于遇到这个问题并试图学习如何构建数据库的人来说，当我问这个问题时，我没有意识到的一件主要事情是所谓的“**[基数](http://www.databasejournal.com/features/mysql/article.php/3906761/Cardinality-in-MySQL-Data-Modeling.htm)**”。研究这个主题并学习如何将它应用到您的数据库模式中！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:35:41.723

更改`products.brand`为`products.brand_id`并使其成为 的外键`brands.id`。

创建一个`categories`表和字段`id`，`name`和`parent_id`（允许`NULL`）将容纳`categories.id`其父级（`NULL`表示顶级类别）。或者，您可以使用嵌套集模型。`products`然后会有一个`products.category_id`字段（不需要`subCategory`字段）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:00:44.743

不要让每个品牌都有自己的桌子。那不是标准化，那是分区。在您的数据库变得非常大之前不要这样做。

目前尚不清楚您的品牌表是什么意思。我猜你的意思是零件制造商，但我不确定。本讨论的其余部分假定您确实指的是零件制造商。

这是我的建议。

重命名您的品牌表。将其称为“制造商”并将其分成两部分，即制造商和联系人。

制造商：

```
mfrid (your four letter code, primary key)
mfrname            text
mrflogo            varchar(20)
mfrwebsite     varchar(30)
mfrphone           varchar(20)
warehouse       varchar(20) 
```

接触：

```
mfrid (four letter code)  (part of primary key)
contactid (autoincrement) (part of primary key)
contact_name    text
contact_number  varchar(20)
contact_email   varchar(30)
bio             varchar(300) 
```

为什么“定价”是制造商的属性？“定价”是什么意思？它不是个别部分的属性吗？

将零件表分成两部分。每个部分 sku 都有一个表。另一个将为每个应用程序（即可以使用该零件的每个品牌和型号的汽车）提供一个表格。像这样：

货号：

```
sku (your stock-keeping unit number, primary key).
mfrid (maker of the PART, not the vehicle in which it fits, foreign key to mfr table).
mfrsku (the brand's stock keeping unit, not necessarily unique in your system)
category (e.g. Brakes)
subCategory (e.g. Brake Rotors)
details (e.g. Drilled and Slotteed 'Razr')
description (Paragraph on part describing it)
saleprice (?)
cost (?) 
```

应用：

```
ApplicationID (auto incrementing primary key)
make (e.g. Subaru)
model (e.g. Impreza)
subModel (e.g. WRX STi)
firstYear.
lastYear. 
```

然后，您需要一个连接表（因为每个应用程序可以有零个或多个 SKU，反之亦然；也就是说，您的 SKU 和应用程序实体可以有多对多关系）。在您的示例中，您知道多个型号的 Subarus 通常采用相同的部件。该架构允许这样做。

应用SKU：

```
ApplicationID
SKU 
```

规范化的诀窍是了解您的应用程序域。弄清楚你有什么实体：例如

1.  德科和斯巴鲁等制造商
2.  联系像乔和哈利这样的人
3.  左前雨刮器总成和后雨刮器总成等零件
4.  1999-2006 Subaru Forester 和 1998-2007 Subaru Impreza 等应用

创建一个与您拥有的每个实体匹配的表。弄清楚您将如何唯一标识每个实体（换句话说，弄清楚您将使用什么作为主键）。

当实体之间存在多对多关系时，请创建连接表。

创建外键以将各种实体连接在一起。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T20:07:23.050

请记住，当您到达实际有订单或将物品放入仓库库存的部分时，请存储采取行动时的实际价格。产品的价格是一种查询，它会随着时间而变化，但库存中的订单或商品价值应与输入记录时的实际成本相关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:48:20.953

一种产品可以安装不止一辆汽车——例如，您可能有一个适合 2010 年丰田凯美瑞、2009 年 Scion tC 和 2011 年讴歌 TL 的雨刮片。因此，您需要从 products 表中拆分 year/make/model，并为车辆（id、year、make、model）和一个连接它们的交叉表（id、product_id、vehicle_id）制作一个单独的表。

# android - 活动无法开始

> ID：10708749
> 
> 赞同：2
> 
> 时间：2012-05-22T19:26:36.157
> 
> 标签：android, android-intent, android-emulator

我使用tabhost，当我想通过imagebutton移动到新活动时，模拟器检查这些错误

```
05-22 19:18:23.021: E/AndroidRuntime(879): FATAL EXCEPTION: main
05-22 19:18:23.021: E/AndroidRuntime(879): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.projet/com.projet.Inter_produit}; have you declared this activity in your AndroidManifest.xml?
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.app.Activity.startActivityFromChild(Activity.java:3057)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.app.Activity.startActivityForResult(Activity.java:2837)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.app.Activity.startActivity(Activity.java:2923)
05-22 19:18:23.021: E/AndroidRuntime(879):  at com.projet.Accueil$1.onClick(Accueil.java:24)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.view.View.performClick(View.java:2408)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.view.View$PerformClick.run(View.java:8816)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.os.Handler.handleCallback(Handler.java:587)
05-22 19:18:23.021: E/AndroidRuntime(879):  at     android.os.Handler.dispatchMessage(Handler.java:92)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.os.Looper.loop(Looper.java:123)
05-22 19:18:23.021: E/AndroidRuntime(879):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-22 19:18:23.021: E/AndroidRuntime(879):  at java.lang.reflect.Method.invokeNative(Native Method)
05-22 19:18:23.021: E/AndroidRuntime(879):  at java.lang.reflect.Method.invoke(Method.java:521)
05-22 19:18:23.021: E/AndroidRuntime(879):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-22 19:18:23.021: E/AndroidRuntime(879):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-22 19:18:23.021: E/AndroidRuntime(879):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T19:44:32.007

考虑将您的类（文件和文件中的类名）从 Inter_produit 重命名为 InterProduit，并将其作为 Activity 添加到 Manifest.xml。

像这样：

```
<activity android:name=".InterProduit"/> 
```

如果它在您的应用程序包中。

# c - C中的UDP客户端

> ID：10708750
> 
> 赞同：0
> 
> 时间：2012-05-22T19:26:49.797
> 
> 标签：c, sockets, udp

我使用[http://www.abc.se/~m6695/udp.html上的代码](http://www.abc.se/~m6695/udp.html)

代码工作正常，我可以看到消息已发送并且服务器接收到它。但是，当我构建程序时，对于“”行，我得到以下“从不兼容的指针类型 [默认启用] 传递 'sendto' 的参数 5 `if (sendto(s, buf, BUFSIZE, 0, &si_other, slen)==-1){`”。如果有人能告诉我如何解决，我将不胜感激。谢谢你

```
 #define  MAXSTRINGLENGTH 128
#define BUFSIZE 512

void log_msg_send(char *message, char *next_hop);
    void log_msg_send(char *message, char *next_hop);

int main(int argc, char** argv) {
    char hello[] = "hello bitches";
    char next_hop[]= "192.168.1.178";
    log_msg_send(hello, next_hop);
}

void log_msg_send(char *message, char *next_hop){
    char SRV_IP[16]; 
    strcpy(SRV_IP,  next_hop);

         struct sockaddr_in si_other;
         int s, i, slen=sizeof(si_other);
         char buf[50] ;
         strcpy(buf, message);

        if ((s=socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP))==-1){
          fprintf(stderr, "inet_aton() failed\n");
          exit(1);
        }

        memset((char *) &si_other, 0, sizeof(si_other));
        si_other.sin_family = AF_INET;
        si_other.sin_port = htons(33333);
        if (inet_aton(SRV_IP, &si_other.sin_addr)==0) {
          fprintf(stderr, "inet_aton() failed\n");
          exit(1);
        }
          printf("Sending the packet %d\n", i);
          if (sendto(s, buf, BUFSIZE, 0, &si_other, slen)==-1){
          fprintf(stderr, "inet_aton() failed\n");
          exit(1);
        }

        close(s);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:31:13.457

快速解决：

```
sendto(s, buf, BUFSIZE, 0, (struct sockaddr *)&si_other, slen) 
```

此转换是必需的，因为当您的特定套接字地址类型为 时，[`sendto()`](http://linux.die.net/man/3/sendto)需要一个指向`struct sockaddr`作为其第五个参数的指针`struct sockaddr_in`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:31:15.687

来自 POSIX 文档：

```
ssize_t sendto(int socket, const void *message, size_t length,
   int flags, const struct sockaddr *dest_addr,
   socklen_t dest_len); 
```

所以第 5 个参数`sendto()`应该是 a `struct sockaddr *`。但是，您将其传递给 (memory layout-compatible) `struct sockadd_in *`。修复：将其转换为适当的指针类型：

```
sendto(s, buf, BUFSIZE, 0, (struct sockaddr *)&si_other, slen) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T19:33:19.107

请检查：

```
sendto(s, buf, BUFSIZE, 0, (SOCKADDR *)&si_other, slen) 
```

在哪里：

```
typedef struct sockaddr SOCKADDR; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T17:33:45.800

采用：

```
sendto(s,buf,BUFSIZE,0,(struct sockaddr*) &si_other, (socklen_t) slen) 
```

这个对我有用！

# permissions - Redmine 允许用户仅查看一个问题

> ID：10708751
> 
> 赞同：3
> 
> 时间：2012-05-22T19:26:51.623
> 
> 标签：permissions, bug-tracking, redmine, user-permissions

我有一个 Redmine 安装，并且希望能够授予用户查看（并且可能更新）单个问题（不是项目中的所有问题）的能力。问题是该问题是由其他人报告的。

用例：用户 A、B 和管理员 C

1.  管理员 C 创建两个错误报告 1 和 2
2.  管理员 C 想要在 bug 1 上向用户 A 授予查看访问权限
3.  管理员 C 想要在错误 2 上向用户 B 授予查看访问权限
4.  用户 A 应该无法访问 bug2
5.  用户 B 应该无法访问 bug1

这可以用Redmine完成吗？我一直在搞乱设置，但我没有看到一个简单的方法来完成这个用例。

如果没有，是否还有其他允许此类用例的错误跟踪器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:29:01.057

你至少还有几个选择。

1.  创建一个新角色“查看自己的问题”。为刚刚创建或分配的问题提供问题可见性，标记“问题可以分配给此角色”并仅启用“查看问题”和“添加注释”。

    然后，您可以将每个问题分配给适当的用户。

    私人问题的优点是您可以拥有一组特权用户作为记者，他们仍然能够检查问题，因为它仍然是公开的。

    缺点是只能将一个用户分配给该问题，因此您的自由度有限。

2.  创建一个表示可见性上下文的子项目并根据需要添加成员。将问题移至子项目。您仍然可以在上层看到问题，其中分配的可见性由“项目”字段显示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T21:11:56.287

您不能为 redmine 中的单个问题分配查看权限。

从我的脑海中，您可以在您的场景中使用以下方法之一：

*   如果您的用户数量有限，您可以添加**不同的跟踪器**（*ACIssues*和 BCIssues），创建两个角色（*AC*和*BC*），将用户 A 和 C 与角色*AC*关联，将用户 B 和 C 与角色*BC*关联，并设置权限，以便角色*AC*有权访问*ACIssues*，角色*BC*有权访问*BCIssues*。
*   [](http://www.redmine.org/issues/7414)**如果将问题 1 分配给用户 A，将问题 2 分配给用户 B，则[**私有问题的工作方式与您描述的方式相同。**](http://www.redmine.org/issues/7414)**

# silverlight - 为 SL5 OOB 应用程序实施启动任务

> ID：10708754
> 
> 赞同：1
> 
> 时间：2012-05-22T19:27:01.043
> 
> 标签：silverlight, silverlight-5.0

我正在整理一个 Silverlight 5 应用程序，该应用程序将在浏览器之外运行，并且在启动时拥有一些东西。具体来说，这是我需要遵循的步骤：

1.  检查应用程序是否耗尽了浏览器（如果没有，显示一个屏幕指示用户在本地安装它）。
2.  显示一个“启动画面”（如果在执行剩余步骤的同时播放动画，那就太好了）。
3.  配置 MEF
4.  从服务器预加载上下文信息和“静态”数据（例如，设置）。在运行任何应用程序逻辑之前需要此数据。
5.  动态加载其他 XAP 文件，包括外部主题库。
6.  将“启动画面”替换为包含导航框架的外壳。
7.  导航到应用程序的起始页。

我还需要支持应用程序扩展服务（IApplicationService、IApplicationLifetimeAware），因此我实现的任何流程都必须尊重这些服务。这些服务中的大多数都需要配置 MEF，因此在配置 MEF 并满足导入之前它们不应执行。

另一个考虑因素是，只有在动态 XAP 文件被拉入并重新组合 MEF 之后，才能满足某些导入。

我遇到的障碍之一是在前面的步骤完成之前我无法执行第 5 步。加载 XAP 文件或异步调用服务器获取数据允许代码继续执行。我需要一种方法来“停止” UI，直到所有组合都完成并且所有必需的上下文数据都已加载。

因此，我正在寻找满足所有这些要求的推荐方法，如果这有助于找到可行的解决方案，我很乐意提供更多详细信息。

**更新**

对于我的困难，我能给出的最好解释是，我必须“释放” UI 线程以显示“启动屏幕”，但在每个步骤执行时还要暂停应用程序的正常生命周期。我不能（也不想）在 Application.Start 事件处理程序中做所有事情，因为应用程序服务已经启动。

另外，释放 UI 线程意味着我确实在后台工作并让原始方法（例如 Application.Start）返回，并且运行时将在启动过程中前进。例如，在应用程序服务的启动方法中启动后台进程然后返回允许运行时在应用程序对象上引发启动事件。但是，如果我需要在执行下一件事之前完成后台进程，我必须挂起阻塞 UI 的当前线程。

所以我不确定如何划分工作或将其放在哪里（应用程序、应用程序服务、引导程序、工作流等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:10:02.423

您可以使用 ManualResetEvent 类强制服务调用同步（并保证它们完成的顺序）。您还可以使用它来将后台线程同步到主 UI 线程。

[http://mohundro.com/blog/2006/06/27/a-little-bit-about-manualresetevent/](http://mohundro.com/blog/2006/06/27/a-little-bit-about-manualresetevent/)

# apache - 非法选项 \xe2\x80\x93MultiViews

> ID：10708760
> 
> 赞同：0
> 
> 时间：2012-05-22T19:27:21.523
> 
> 标签：apache, virtualhost

尝试重新启动 Apache2 服务器时出现错误：

```
 ubuntu$ sudo /etc/init.d/apache2 restart
  Syntax error on line 6 of /etc/apache2/sites-enabled/default:
  Illegal option \xe2\x80\x93MultiViews
  Action 'configtest' failed.
  The Apache error log may have more information.
  ...fail! 
```

这是我的`sites-available/default.conf`

```
<VirtualHost *:80>
    ServerName server.example.comm
    DocumentRoot /var/www/testapp/public

    <Directory /var/www/testapp/public>
        AllowOverride all
        Options –MultiViews
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:35:56.353

尝试

```
Options Indexes FollowSymLinks MultiViews 
```

# spring-mvc - 将所有项目添加到列出模型属性我有一个 Spring MVC 表单，其中有两个选择框。一个盒子是预先填充的，而另一个盒子最初是空的。我使用 JQuery 将项目从预先填充的列表移动到空列表中，我想将列表中的所有项目都放入模型属性中。有没有办法使用 Spring 表单来做到这一点？当表单提交发生时，绑定到选择列表的模型属性似乎为空，因为实际上没有一个列表项被“选中”。谢谢，史蒂夫 我们在 Android 上尝试通过 RTSP 播放 MJPEG 流时遇到了问题。我们拥有的多播视频服务器无法通过

> ID：10708769
> 
> 赞同：0
> 
> 时间：2012-05-22T19:28:24.570
> 
> 标签：spring-mvc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:32:07.160

您将需要以某种方式提交这些项目。我看到几个选项

*   在提交表单之前使用 jQuery 选择所有项目
*   使用jQuery提交表单并手动将所有项目添加到提交的表单中
*   添加到空表单时还添加到隐藏的输入字段

# c# - 这个简单的 C++ DLL 在 C# 中不起作用

> ID：10708782
> 
> 赞同：0
> 
> 时间：2012-05-22T19:29:09.820
> 
> 标签：c#, c++, dll, pinvoke

我整天都在研究需要在 c# 中运行的 c++ 代码。我浏览了这个[DLL 教程](http://www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c9855/DLL-Tutorial-For-Beginners.htm)，并且在我的 c# 应用程序中使用它时遇到了问题。我将在下面发布所有代码。

我收到此**PInvokeStackImbalance**错误：'对 PInvoke 函数'frmVideo::Add'的调用使堆栈不平衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

一如既往地感谢凯文

## DLLTutorial.h

```
#ifndef _DLL_TUTORIAL_H_
#define _DLL_TUTORIAL_H_
#include <iostream>

#if defined DLL_EXPORT
#define DECLDIR __declspec(dllexport)
#else
#define DECLDIR __declspec(dllimport)
#endif

extern "C"
{
   DECLDIR int Add( int a, int b );
   DECLDIR void Function( void );
}

#endif 
```

## DLLTutorial.cpp

```
#include <iostream>

#define DLL_EXPORT

#include "DLLTutorial.h"

extern "C"
{
   DECLDIR int Add( int a, int b )
   {
      return( a + b );
   }

   DECLDIR void Function( void )
   {
      std::cout << "DLL Called!" << std::endl;
   }
} 
```

## 使用 DLL 的 C# 代码：

```
using System.Runtime.InteropServices;
[DllImport(@"C:\Users\kpenner\Desktop\DllTutorialProj.dll"]
public static extern int Add(int x, int y);
int x = 5;
int y = 10;
int z = Add(x, y); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:30:33.657

您的 C++ 代码使用`cdecl`调用约定，而 C# 代码默认为`stdcall`. 这种不匹配解释了您看到的消息。

使接口的两侧匹配：

```
[DllImport(@"...", CallingConvention=CallingConvention.Cdecl]
public static extern int Add(int x, int y); 
```

或者，您可以将`stdcall`其用于您的 C++ 导出：

```
DECLDIR __stdcall int Add( int a, int b ); 
```

您可以选择这两个选项中的哪一个，但出于显而易见的原因，请确保您只更改界面的一侧而不是两者！

# dojo - cometd hello world 示例与 dojo

> ID：10708783
> 
> 赞同：0
> 
> 时间：2012-05-22T19:29:13.760
> 
> 标签：dojo, cometd

我正在尝试在这里遵循基本的彗星示例：http: [//dojotoolkit.org/reference-guide/1.7/dojox/cometd.html](http://dojotoolkit.org/reference-guide/1.7/dojox/cometd.html)

它使用的是旧的模块加载器，所以我尝试了如下等价的：

```
require(["dojo/ready","dojo/io/script","dojox/cometd","dojox/cometd/callbackPollTransport"], function(ready, dontcare, cometd) {
    ready(function(){   
        cometd.init('http://localhost:8080/MyCometD/cometd');
        comted.subscribe("/test", function(msg){
            console.debug(msg);
        });
    });
}); 
```

这不起作用，我认为它与加载模块有关 - 存在某种静默错误，因为就绪函数中的代码根本不执行。我发现当“dojox/cometd”require 语句存在时，ready 函数中的代码不会执行。

运行示例：http: [//jsfiddle.net/Q9W8f/2/](http://jsfiddle.net/Q9W8f/2/)

删除 dojox/comted 的示例：http: [//jsfiddle.net/mMs2h/4/](http://jsfiddle.net/mMs2h/4/)

我没有太多地使用新的模块加载器，所以我敢打赌我只是有一些简单的误解。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:10:57.380

您似乎是正确的，并且对于永远不会加载的模块要求存在“等待循环”。这可能是 dojox.cometd 中的任何要求，您需要重写代码库以进行修复。

我对 RollingListPane 也有类似的问题，也在 dojox 存储库中 - 开发人员说“我们 100% 兼容 AMD 1.7”但是 dojox 中的 X 是实验性的缩写。dojox 模块的开发不是由核心 djtk 团队完成的，仍然存在故障..

尝试让初学者避免使用在每个模块上执行 >>built 宏的 CDN。在使用 AMD 时，这有时会失败。而是下载 tarball 并使用本地副本 - 未压缩 (dojo-release-1.7.2- **src** )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T03:40:06.350

You can find the hello world example in cometD and ExtJs at following link: [http://jksnu.blogspot.in/2013/08/network-reliability-by-cometd-hellow_16.html](http://jksnu.blogspot.in/2013/08/network-reliability-by-cometd-hellow_16.html)

# jquery - 无法使用 jQuery 在 JSON 上加载完整数据

> ID：10708786
> 
> 赞同：1
> 
> 时间：2012-05-22T19:29:34.850
> 
> 标签：jquery, json, struts2

我正在尝试将 Json 与 struts 2 和 jquery 一起使用，我能够做到这一点，但过去两天我一直遇到一些问题。这是我用于此的代码和配置

```
<package name="default" extends="struts-default,json-default" namespace="/">    

    <result-types>
        <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"></result-type>
    </result-types>

    <action name="showUpdateAjax" class="courseCreateAction" method="showUpdateAjax">
            <result type="json">
                <param name="includeProperties">courseInfo, fetchedAllSubjects, selectedFetchedSubs, subjectList, fetchedAllExamType, examTypeList, selectedExmTypes, fetchedAllCourse, isUpdate, btnPressed, updateCourseId, nextCourse, previousCourse</param>
                <param name="prefix">true</param>
                <param name="ignoreHierarchy">false</param>
            </result>
    </action> 
```

这是我这部分的 Jsp 代码

```
<tr><td><input type="submit" value="Refresh" onclick="refreshData()" id="refreshBtn"/></td></tr>

    <tr><td><s:a href="/SASIS/showUpdateAjax.action?updateCourseId=4">click Here 2</s:a></td></tr>
</table>
</center>
<script type="text/javascript"> 
    $(document).ready(function(){
            $("#refreshBtn").click(function(){
                $.getJSON("/SASIS/showUpdateAjax.action?updateCourseId=4",function(data){
                    alert('its working '+data);

                    });

                });
        });
</script> 
```

这是我的java代码

```
public class CourseCreateAction extends ActionSupport implements ServletRequestAware{
private CourseInfo courseInfo;
private List fetchedAllSubjects;
private List<SubjectInfo> selectedFetchedSubs;
private List subjectList;
private List fetchedAllExamType;
private List examTypeList;
private List<ExamType> selectedExmTypes;
private List fetchedAllCourse;
private String nextCourse;
private String previousCourse;
private DAOInterface dao;
private String btnPressed;
private String updateCourseId;  
private HttpServletRequest request; 
private boolean isUpdate;

public void setServletRequest(HttpServletRequest request) {
    request=request;
}

public List getFetchedAllSubjects() {
    return fetchedAllSubjects;
}

public void setFetchedAllSubjects(List fetchedAllSubjects) {
    this.fetchedAllSubjects = fetchedAllSubjects;
}

public List<SubjectInfo> getSelectedFetchedSubs() {
    return selectedFetchedSubs;
}

public void setSelectedFetchedSubs(List<SubjectInfo> selectedFetchedSubs) {
    this.selectedFetchedSubs = selectedFetchedSubs;
}

public List getSubjectList() {
    return subjectList;
}

public void setSubjectList(List subjectList) {
    this.subjectList = subjectList;
}

public CourseInfo getCourseInfo() {
    return courseInfo;
}

public void setCourseInfo(CourseInfo courseInfo) {
    this.courseInfo = courseInfo;
}
public List getFetchedAllExamType() {
    return fetchedAllExamType;
}

public void setFetchedAllExamType(List fetchedAllExamType) {
    this.fetchedAllExamType = fetchedAllExamType;
}

public List getExamTypeList() {
    return examTypeList;
}

public void setExamTypeList(List examTypeList) {
    this.examTypeList = examTypeList;
}

public List<ExamType> getSelectedExmTypes() {
    return selectedExmTypes;
}

public void setSelectedExmTypes(List<ExamType> selectedExmTypes) {
    this.selectedExmTypes = selectedExmTypes;
}

public List getFetchedAllCourse() {
    return fetchedAllCourse;
}

public void setFetchedAllCourse(List fetchedAllCourse) {
    this.fetchedAllCourse = fetchedAllCourse;
}

public String getNextCourse() {
    return nextCourse;
}

public void setNextCourse(String nextCourse) {
    this.nextCourse = nextCourse;
}

public String getPreviousCourse() {
    return previousCourse;
}

public void setPreviousCourse(String previousCourse) {
    this.previousCourse = previousCourse;
}

public DAOInterface getDao() {
    return dao;
}

public void setDao(DAOInterface dao) {
    this.dao = dao;
}

public String getBtnPressed() {
    return btnPressed;
}

public void setBtnPressed(String btnPressed) {
    this.btnPressed = btnPressed;
}

public String getUpdateCourseId() {
    return updateCourseId;
}

public void setUpdateCourseId(String updateCourseId) {
    this.updateCourseId = updateCourseId;
}

public boolean getIsUpdate() {
    return isUpdate;
}

public void setIsUpdate(boolean isUpdate) {
    this.isUpdate = isUpdate;
}

public String showUpdateAjax(){
        try{
        System.out.println("Ajax calling...........");
        showUpdateCourse();
        }catch (Exception e) {
            e.printStackTrace();
        }
        return SUCCESS;
    }

public String showUpdateCourse(){
    try {
        isUpdate=true;
        courseInfo=dao.getCourse(Integer.parseInt(updateCourseId));
        System.out.println(courseInfo.getCourseId());
        selectedFetchedSubs=courseInfo.getSubjectList();
        selectedExmTypes=courseInfo.getExamTypeList();
        fetchedAllSubjects=dao.getAllSubjects();
        fetchedAllExamType=dao.getActiveExamTypes();
        for(ExamType exmType:selectedExmTypes)
            for (int i = 0; i < fetchedAllExamType.size(); i++) {
                if(exmType!=null&&((ExamType)fetchedAllExamType.get(i)).getExamTypeId()==exmType.getExamTypeId()){
                    fetchedAllExamType.remove(i);
                    break;
                }
            }
        for(SubjectInfo subInfo:selectedFetchedSubs)
            for (int i = 0; i < fetchedAllSubjects.size(); i++) {
                if(subInfo!=null&&((SubjectInfo)fetchedAllSubjects.get(i)).getSubjectId()==subInfo.getSubjectId()){
                    fetchedAllSubjects.remove(i);
                    break;
                }
            }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return SUCCESS;
} 
```

我也在项目中使用过spring和hibernate。在执行此操作时，当我单击调用 showUpdateAction.action 的链接时，我得到了这样的响应

```
{}&& {"btnPressed":null,"courseInfo":{},"examTypeList":null,"fetchedAllCourse":[],"fetchedAllExamType":[],"fetchedAllSubjects":[],"isUpdate":true,"nextCourse":null,"previousCourse":null,"selectedExmTypes":[],"selectedFetchedSubs":[],"subjectList":null,"updateCourseId":"4"} 
```

但是当我单击按钮时，它没有显示任何内容，但调用了该函数。此外，这里的 CourseInfo 是一个对象，其中有带有 setter getter 方法的变量，并且在调用 showUpdateAction.action 时该对象处于状态满状态，但在输出中我们可以看到 courseInfo 带有空花括号。请帮助解决这个问题我已经浏览了几篇文章并在谷歌上搜索了很多。现在除了问我别无选择。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:46:05.103

作为点击 refrehButton 的启动器，为什么要调用 refreshData javascript 方法？

```
onclick="refreshData()" 
```

因为您已经为此声明了 jQuery 操作

`$("#refreshBtn").click(function()`, 对于同一事件没有两个侦听器`onclick="refreshData()`, 如果需要`refreshData`从 jQuery 侦听器调用, 请删除, 如：

```
 $(document).ready(function(){
                $("#refreshBtn").click(function(){
                    //refreshData(); call this method here if you need to call
                    $.getJSON("/SASIS/showUpdateAjax.action?updateCourseId=4",
                        function(data){
                            alert('its working '+data);        
                        }, function(error) {
                            alert('Error here');
                        });

                    });
            }); 
```

第二，如果您的包裹扩展，`json-default`您不需要扩展`struts-default``json-default``struts-default`

而不是`extends="struts-default,json-default"`使用这个`extends="json-default"`

第三还要检查您是否真的从数据库中检索结果

```
courseInfo=dao.getCourse(Integer.parseInt(updateCourseId)); // Check if your object has field values 
```

您能否做这些更改以发布您的发现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:04:54.467

我看了你的代码（不了解struts），我注意到，

```
<action name="showUpdateAjax" class="courseCreateAction" method="showUpdateAjax"> 
```

你的ajax调用是为了，

```
"/SASIS/showUpdateAjax.action?updateCourseId=4" 
```

我相信您的控制器是“courseCreateAction”，动作是“showUpdateAjax”，典型的 GET url 看起来像`/controller/action?param1=value1&param2=value2...`

但是您的网址不包含控制器。

处理此请求的操作，

```
public String showUpdateAjax(){
  try{
  System.out.println("Ajax calling...........");
  showUpdateCourse();
  }catch (Exception e) {
      e.printStackTrace();
  }
  return SUCCESS;
} 
```

courseId 在哪里传递给 showUpdateAjax() ？

最后，就像 mprabhat 提到的那样，您已经绑定了按钮以在单击时触发 ajax 调用。所以没有必要有一个 `onclick="refreshData()"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T20:40:53.607

感谢您的答复 mprabhat 先生和 Rahul 先生。我使用 firebug 来调试这个问题，因为 Rahul 告诉我为此目的使用 webinspector，因为我使用的是 firefox，所以我更喜欢 firebug。而且我确实得到了解决 mprabhat 建议的 jquery 问题的帮助。

现在，实际问题出在 struts-jquery 插件和 spring 上。在我的“dao”代码中，对象是通过弹簧注入的。当 json 插件试图序列化对象时，它创建了一个具有公共访问修饰符的数据库对象的方法。这以某种方式造成了所有问题。`includeProperties`我在尝试返回没有“ ”参数的 json 时遇到如下异常

```
org.apache.struts2.json.JSONException:  
org.apache.struts2.json.JSONException:  
org.apache.struts2.json.JSONException:  
org.apache.struts2.json.JSONException: java.lang.IllegalAccessException:  
Class org.apache.struts2.json.JSONWriter can not access a member of class  
org.hibernate.persister.entity.AbstractEntityPersister$3 with  
modifiers "public"
org.apache.struts2.json.JSONWriter.bean(JSONWriter.java:230)
org.apache.struts2.json.JSONWriter.process(JSONWriter.java:160)
org.apache.struts2.json.JSONWriter.value(JSONWriter.java:126) 
```

因此，我决定在我的 struts 配置中排除属性“dao”，而不是包括其余属性。

```
<action name="showUpdateAjax" class="courseCreateAction" method="showUpdateAjax">
    <result type="json">
        <param name="excludeProperties">dao</param>
        <param name="ignoreHierarchy">false</param>
        <param name="excludeNullProperties">true</param>
    </result>
</action> 
```

问题就解决了。

# .net - 微软问：单列还是双列？使用每种方法的优缺点是什么？

> ID：10708790
> 
> 赞同：22
> 
> 时间：2012-05-22T19:29:51.660
> 
> 标签：.net, linked-list

我被问到这样的问题，我有自己的说法，但我真的不知道该说些什么利弊？微软向其中一位候选人提出了这个问题。

单链表可以让你走一个方向。而双向链表具有下一个和上一个方向。

这是一张绘制单链表和双链表的好图。

![在此处输入图像描述](../Images/3ad0d3953b07b83fec670e12ea49afeb.png)

但是，您如何更有序地解释这些物品的优缺点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-12T12:02:24.617

虽然这个问题已经回答了，但我对答案不满意（没有冒犯的意思），所以我将如何回答：

使用什么 - 单链表或双链表取决于您打算实现的目标和系统限制（如果有）。

单链表：

优点：实现简单，需要相对较少的存储内存，假设您需要删除/插入（在）下一个节点 - 删除/插入更快。

缺点：不能反向迭代，需要维护链表头节点的句柄，否则链表会丢失在内存中。如果要删除前一个节点或在前一个节点插入，则需要从头到前一个节点遍历列表才能执行这些操作 - O(N) 时间。

--因此，当您的内存较少并且您的主要目标是插入/删除而不是搜索元素时，应该使用它。

双向链表：

优点：可以正向和反向迭代。如果需要删除前一个节点，则不需要从头节点遍历，因为可以从'.previous'指针中找到要删除的节点。

缺点：实现起来相对复杂，需要更多内存来存储（每个节点 1 个“.previous”指针）。插入和删除相对更耗时（为相邻节点分配/重新分配“.previous”指针）

--这应该在您对内存没有限制或限制最小的情况下使用，并且您的主要目标是搜索元素。

如果有更多的优点和缺点，请随时添加，在评论中回复。谢谢！

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-22T19:31:38.760

> 我被问到这样的问题，我有自己的说法，但我真的不知道该说些什么利弊？

这一切都归结为使用。这里有一个权衡。

单链表在实现方面更简单，并且通常具有较小的内存需求，因为它只需要保持前向成员引用到位。

双链表的迭代效率更高，特别是如果您需要反向迭代（单链表效率极低），以及更有效地删除特定节点时。

话虽这么说 - 由于您有这个标记的 .NET，双链表还具有直接以[`LinkedList<T>`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)类的形式存在于框架中的优点。这提供了一个巨大的优势，因为您不必实现、测试和维护自己的集合类。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-22T19:33:04.597

虽然单链表每个节点使用较少的内存（一个指针与两个指针），但它的删除操作是，`O(N)`如果您只有一个指向要删除的节点的指针，而双链接删除是`O(1)`. 有一个鲜为人知的技巧，可以让您从 中的单链表中删除`O(1)`，但列表必须是循环的才能工作（将 的内容移动`next`到当前，然后删除`next`）。

双链表可用于单链表不起作用的地方（双向队列），但它们需要稍微多一点的“内务处理”，因此插入效率略低。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-22T19:32:16.800

双链表的优点：可以双向遍历

单链表的优点：更新/插入/删除要做的家务少，内存占用少。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-22T19:32:28.883

好吧，这取决于情况。如果您需要能够从给定元素中快速获取上一个和下一个元素，那么双向链表是最好的。

如果只需要从给定元素中获取下一个元素，那么单链表就足够了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-01T12:41:25.807

单链表优于双链表：

优点： 1\. 更少的内存需求。

2.  它只需要保持前向指针/引用到位。
3.  单链表是持久化的数据结构。[http://en.wikipedia.org/wiki/Persistent_data_structure#Linked_lists](http://en.wikipedia.org/wiki/Persistent_data_structure#Linked_lists)

缺点： 1\. 一般来说，要从列表中删除一个节点，您必须更改出现在要删除节点之前的节点的下一个指针，使其不再指向要删除的节点。如果您有一个指向要删除的节点的指针。您必须从列表的开头开始，遍历它，直到找到要删除的节点之前的节点。这需要时间 O(n)，因此在最坏的情况下，删除步骤的运行时间是 O(n)。

2.  提供一个方向的顺序访问。如果您想双向访问，使其成为 DLL，该怎么办。

单链表上的双链表：

优点： 1\. 要在将指针指向该节点时删除该节点，双链表在最坏的情况下需要 O(1)。

2.  提供双向顺序访问。

缺点： 1\. 更多内存要求（如果不是异或 A Memory-Efficient 双链表，异或链表）。需要两个指针previous和next，因为它是双向的。

2.  它需要保持前向和后向指针都在适当的位置。

3.  双链表不能很好地适应持久化设置。

# iphone - iPhone 如何确定前一个视图控制器支持哪些方向

> ID：10708791
> 
> 赞同：0
> 
> 时间：2012-05-22T19:29:53.567
> 
> 标签：iphone, sdk, orientation, uialertview

由于内置的​​ iOS UIAlertView 没有给我们换肤的能力，我已经构建了自己的 UIAlertViewCustom 类，我正在使用它。我的任何视图控制器都可以显示 UIAlertViewCustom 的实例，就像使用 UIAlertView 一样，除了我的版本允许皮肤图形/字体/颜色等。

我的 UIAlertViewCustom 类通过创建新的键窗口和根视图控制器来工作。然后我在这个新的根视图控制器上绘制我的消息视图。（选择显示消息的视图控制器会在后台看到，就像您在 UIAlertView 中看到的一样。

所有这些都运行良好。我想实现一项功能，但还没有弄清楚如何实现。我希望 UIAlertViewCustom 的每个实例都知道它是否应该在设备方向更改时自动旋转。当然，我想知道下面的视图控制器（创建 UIAlertViewCustom 实例并显示它的视图控制器）支持哪些方向？如果它只支持纵向，那么我不会自动旋转 UIAlertViewCustom 等。

我不希望每个视图控制器都必须将支持的方向属性传递给 UIAlertViewCustom 的每个实例。我只是希望 UIAlertViewCustom 的每个实例能够确定它是否应该自动旋转。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:53:16.483

我会在你的视图控制器类中尝试这个：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return [[view superview] shouldAutorotateToInterfaceOrientation:interfaceOrientation];
} 
```

我不确定它是否会起作用，但这就是我要开始的地方。这是必要的，因为它的默认实现返回`YES`for`UIInterfaceOrientationPortrait`和其他一切都是`NO`.

另一个小事。Apple 保留了它使用的前缀（NS、CF、CA、UI 等），您的自定义类不应使用它们。

**编辑**将 [self superview] 更改为 [view superview]

# javascript - 将 onRowClick 绑定到 DoJo 数据网格 (dojox.grid.DataGrid)

> ID：10708794
> 
> 赞同：0
> 
> 时间：2012-05-22T19:30:02.033
> 
> 标签：javascript, datagrid, dojo

除了一件事，我已经能够让 DataGrid 做我想做的一切。我正在尝试将 onRowClick 事件绑定到将执行某些操作的常规 javascript 函数。我使用的是 Dojo 1.7.2，所以 connect(object,event,method) 不起作用。我尝试使用新的 on(object,event...) 无济于事。我究竟做错了什么？

在标签之间但低于 changeValue()[我编写并已知工作的函数] 和 dojo.require... 换句话说，块中的最后一件事。我知道 on 方法的语法有问题，但不知道是什么。

```
var ngrid = dijit.byId('grid');
dojo.on(ngrid,"onRowClick",changeValue()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:44:23.223

修复您的代码；因为我相信你想要绑定的函数是实际的 changeValue 而不是它可能返回的，试试这个

```
dijit.byId('grid').connect("onRowClick", changeValue) 
```

*.on对**Something 上的前缀 * 产生了一些魔力，因此请尝试使用 .connect 代替。最佳做法是通过对象本身注册侦听器，以便在网格被破坏时断开连接。上面的调用作为网格对象的扩展，因此您不应将网格引用作为第一个参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T14:22:15.037

这是该`on`方法的正确语法

您必须删除事件名称字符串的“on”部分

```
var ngrid = dijit.byId('grid');
dojo.on(ngrid,"rowClick",changeValue()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:50:41.197

将`jsid ="mygrid"`属性分配给您的 Datagrid 。通过你`jsid`的道场连接你不必做`dijit.byId()`。

```
 dojo.connect(mygrid, "onRowClick", changeValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:58:54.470

与@mschr 的回答类似，这里也是如何获取与单击的行关联的数据。

```
dojo.connect(grid, "onRowClick", function(e) {
     var dataItem = grid.selection.getSelected();
     // call you change method here with dataItem
}); 
```

和一个例子

[http://jsfiddle.net/cswing/T27hv/](http://jsfiddle.net/cswing/T27hv/)

# javascript - jquery hasClass，是否可以给类名开头，获取完整的类名

> ID：10708796
> 
> 赞同：4
> 
> 时间：2012-05-22T19:30:12.707
> 
> 标签：javascript, jquery

我正在尝试做与[这个问题](https://stackoverflow.com/questions/10333210/how-can-i-get-the-class-name-as-a-string-that-begins-with-test-using-jquery)类似的事情，但它有点不同，所以那里的解决方案对我不起作用。

```
<span class="a-class another-class test-top-left"></span> 
```

我有一个元素（此代码显示一个`span`但它可能是`div` `span`或任何东西）。这个元素有一个以`test-`(`test-top-left`等`test-top-right`) 开头的类。我在以 ( 等) 开头的类上触发了一个点击事件，`test-`并将点击的对象保存为`var object = this;`. 到目前为止很简单的东西。

我现在要做的是获取该类的全名（`test-top-left`）。我知道它的开头，`test-`但全名是什么。**问题是还有其他类`a-class` `another-class`和`test-top-left`.** 可以`hasClass`用来获取类的全名吗？我宁愿不使用`find()`，或者`filter()`只是因为其中可能还有其他元素`class="test-"`

**编辑：**

我现在拥有的代码是，但它给了我所有的类。我需要的是以`test-`.

```
var object = this;
$(object).attr('class'); 
```

所以现在我 for 循环遍历所有类并分别测试每个类，这似乎是很多不必要的代码。我希望 jQuery 有一个聪明的方法来获取被点击的确切类。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T19:34:15.450

### 描述

您可以使用 jQuerys和`Attribute Contains Selector`方法。`.attr()``.click()`

> **属性包含选择器**- 选择具有指定属性且值包含给定子字符串的元素。
> 
> **.attr()** - 获取匹配元素集中第一个元素的属性值。
> 
> **.click()** - 将事件处理程序绑定到“click”JavaScript 事件，或在元素上触发该事件。

### 样本

**html**

```
<span class="anyclass test-hello">Hello World</span>​ 
```

**jQuery**

```
$("[class*='test']").click(function() {
    var object = $(this);
    alert(object.attr("class").match(/(test-.*?)(?:\s+|$)/)[1])
;}); 
```

### 查看更新的[jsFiddle](http://jsfiddle.net/PyUPq/2/)

## 更新

如果你不想使用正则表达式，你可以这样做。

```
$("[class*='test']").click(function() {
    var object = $(this);
    alert("test-" + object.attr("class").split("test-")[1].split("-"))
;}); 
```

​</p>

### 更多信息

*   [jQuery - 属性包含选择器](http://api.jquery.com/attribute-contains-selector/)
*   [jQuery - .attr()](http://api.jquery.com/attr/)
*   [jQuery - .click()](http://api.jquery.com/click/)
*   [jsFiddle 演示](http://jsfiddle.net/PyUPq/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:46:44.460

这应该适合你：

```
var object = this;
var className = object.className.match(/(test-.*?)(?:\s+|$)/)[1]; 
```

类名是您要查找的类的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T21:50:36.957

如果您不想使用拆分或正则表达式，可以尝试将类放在单独的属性中

```
<span class="someclass test-something" _rel="test-something">test<span> 
```

或者

```
<span class="someclass" _rel="test-something">test<span> 
```

用脚本

```
$("[_rel*='test-']").click(.... 
```

并检索属性，使用`$(this).attr("_rel")`

# windows - ShowWindow 不显示

> ID：10708797
> 
> 赞同：0
> 
> 时间：2012-05-22T19:30:15.607
> 
> 标签：windows, winapi

所以，我正在做一个项目，我想做的第一步是创建一个窗口，我想我稍后会填充它。我使用 createwindowex 来制作它：

```
IntPtr newWindow = CreateWindowEx(WindowStylesEx.WS_EX_OVERLAPPEDWINDOW, "HelloWin", "New Window", WindowStyles.WS_OVERLAPPEDWINDOW, 0, 0, 100, 100, IntPtr.Zero, IntPtr.Zero, hInstance,IntPtr.Zero); 
```

并使用 ShowWindow 显示它：

```
ShowWindow(newWindow, ShowWindowCommands.Normal); 
```

这两种方法之间有什么我忘记做的吗？我没有收到任何错误，我设置的所有其他内容都在运行，但窗口没有弹出。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:53:52.357

我认为，那个问题是，您不会在 ShowWindow 之后调用 UpdateWindow。但我不在.Net 中工作，只有纯win32 api。:-)

# php - PHP MySQLi 致命错误（非对象）

> ID：10708799
> 
> 赞同：1
> 
> 时间：2012-05-22T19:30:18.343
> 
> 标签：php, function, mysqli, fatal-error

我有一个在测试文件中独立运行的脚本，但是当我将它作为函数调用时，我会看到“致命错误：调用非对象上的成员函数 query()”。

功能代码：

```
function next_image($currentId) {
   $next = $mysqli->query("SELECT id FROM mp_images WHERE
      id > $currentId ORDER BY id ASC LIMIT 1");
   while ($nextrow = $next->fetch_row()){
      $nextid = $nextrow[0];
   }
   if (!empty($nextid)) {
      echo "Next ID: ".$nextid;
   }
   else {
      echo "No more images";
   }
   $next->close();
} 
```

页面代码：

```
$id=$_GET['id'];
next_image($id); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:32:47.463

`$mysqli`未在函数范围内定义。您要么需要将其传递给函数，要么将其设为全局（但不要将其设为全局）。

# android - 使用 AsyncTask 从错误的线程异常调用

> ID：10708800
> 
> 赞同：1
> 
> 时间：2012-05-22T19:30:19.367
> 
> 标签：android, android-asynctask, asyncsocket, thread-exceptions

即使我将它扔到 AsyncTask 的 DoInBackground 方法中，我也会不断收到 CalledFromWrongThreadException！谁能告诉我为什么以及如何解决它？

```
/**
     * Recognizes key words in responseTexts and runs the appropriate function
     * @param responseText
     */
    private void responseHandler(String responseText) {
        if(responseText.startsWith("Notes", 0)) {
            notes.add(responseText);
            new DownloadFilesTask().execute("WriteInternal" , null, null);
        }
    } 
```

这是我的 AsyncTask 类

```
private class DownloadFilesTask extends AsyncTask<String, Void, String> {
    protected String doInBackground(String... command) {
    if(command[0].equals("WriteInternal") {
        //write to internal storage
    FileOutputStream fOut = null;
    OutputStreamWriter osw = null;
    try{
        fOut = openFileOutput("notes.txt", Context.MODE_PRIVATE);
        osw = new OutputStreamWriter(fOut);
        for (int i = 0; i < notes.size(); i++){
            osw.write(notes.get(i) + "\n");
        }
        osw.close();
        fOut.close();
    } catch(Exception e) {
        e.printStackTrace(System.err);
    }

    notesListView.setAdapter(arrayAdapter);  //refreshes the listView

       }
else {
        sendCommand(command[0]);
        return null;
}
    }

    protected void onProgressUpdate(Void... progress) {}
    protected void onPostExecute(String result) {}
} 
```

这是我得到的堆栈跟踪：

```
05-22 15:14:20.370: E/AndroidRuntime(11730): FATAL EXCEPTION: AsyncTask #2
05-22 15:14:20.370: E/AndroidRuntime(11730): java.lang.RuntimeException: An error occured while executing doInBackground()
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at java.lang.Thread.run(Thread.java:856)
05-22 15:14:20.370: E/AndroidRuntime(11730): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.view.ViewRootImpl.invalidateChild(ViewRootImpl.java:722)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.view.ViewRootImpl.invalidateChildInParent(ViewRootImpl.java:771)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.view.ViewGroup.invalidateChild(ViewGroup.java:4005)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.view.View.invalidate(View.java:8576)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.view.View.invalidate(View.java:8527)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.widget.AbsListView.resetList(AbsListView.java:1734)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.widget.ListView.resetList(ListView.java:502)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.widget.ListView.setAdapter(ListView.java:442)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at com.nelson.jarvisclientics.Notes$DownloadFilesTask.doInBackground(Notes.java:281)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at com.nelson.jarvisclientics.Notes$DownloadFilesTask.doInBackground(Notes.java:1)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
05-22 15:14:20.370: E/AndroidRuntime(11730):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-22 15:14:20.370: E/AndroidRuntime(11730):    ... 5 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T19:34:01.427

尝试用`runOnUIThread(new Runnable{/*code goes here*/}())`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:47:20.983

您收到此异常的原因是您尝试在 AsyncTask 的 doInBackground() 方法中更新 UI。当您在此处为列表视图设置适配器时会发生这种情况：`notesListView.setAdapter(arrayAdapter); //refreshes the listView`

您应该将其移至 onPostExecute。更新 onPostExecute 中的 UI 并在必要时显示任何错误消息。

另请注意，您也在后台调用 handleCommand() ；确保这也不会更新 UI！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:37:21.460

您可以使用在 UI 线程上运行的 onPostExecute ......这是使用 asynctask 的基础。

# actionscript-3 - 类之间的命名空间变量

> ID：10708802
> 
> 赞同：2
> 
> 时间：2012-05-22T19:30:20.053
> 
> 标签：actionscript-3, class, namespaces

# 概要

1.  使用语句时如何在命名空间中声明变量[`use`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/statements.html#use_namespace)？*（即，没有用变量名声明命名空间）*
2.  如何在没有容器引用的情况下使用“use”语句引用命名空间变量。*（即，`trace(foo)`而不是`trace(a.foo)`[如果我必须在已经切换到命名空间后声明这一点似乎有点毫无意义]）*

### 解释

阅读了 Grant Skinner 的[“使用命名空间的完整指南”](http://gskinner.com/blog/archives/2010/01/a_complete_guid.html)和其他文章，例如 Jackson Dustan 的[“通过命名空间实现更好的 OOP”](http://jacksondunstan.com/articles/1242)，我留下了上述未解决的问题。我觉得好像我错过了一些基本原则，但我似乎无法让命名空间工作。以下示例是为与 Flash IDE 一起使用而编写的，因此假设以下...

*轨迹.as*

```
package com.atriace {
    public namespace locus = "atriace.com";
} 
```

*测试A.as*

```
package com.atriace {
    public class testA {
        import com.atriace.locus;
        locus var foo:String = "Apple";

        public function testA() {}
    }
} 
```

*测试B.as*

```
package com.atriace {
    public class testB {
        import com.atriace.locus;
        use namespace locus;

        public function testB() {
            trace(foo);
        }
    }
} 
```

*文档类：*

```
import com.atriace.testA;
import com.atriace.testB;

var a:testA = new testA();
trace(a.foo); // results in "Apple"

var b:testB = new testB(); // compile error: variable "foo" not defined. 
```

### 问题 #1

在我看来，命名空间只不过是一个保存具有范围级别访问权限的变量的对象。因此，global 是对所有函数可见的命名空间（因为它是根作用域），local 是命名空间（特定于当前作用域和子作用域），依此类推。如果为真，那么切换到命名空间`use`应该允许您简单地声明恰好存在于本地和自定义命名空间中的变量。例如：

```
use namespace locus
var bar:String = "test"; // this now *should* exist in both local & locus scope/namespace. 
```

由于我不知道像普通对象一样迭代命名空间的方法，我不知道这是否会发生。此外，我还没有看到有人以这种方式声明自定义命名空间变量的任何情况，所以我假设命名空间变量必须始终显式定义。

### 问题 #2

你可能会问，“这里的目标是什么？” 很简单，我们想要一个动态的变量和方法池，任何新类都可以添加到（在同一个包中）。通过在调用方法之前切换到这个命名空间，我们可以减少代码的冗长。所以，`class.method()`就变成了`method()`。

在*testB.as中，如果我们从未导入**testA.as*类并实例化它，我们完全可以预料会发生错误；特别是因为 foo 不是类的静态成员（我们也不希望它是）。然而，由于我们至少实例化了一次 foo，所以命名空间`locus`现在应该有一个名为 的变量`foo`，这意味着当*testB.as*被实例化并且构造函数为 foo 寻找一个值时，命名空间已经有了一个。

显然，这种想法存在缺陷，因为 Flash 编译器抱怨`foo`从未声明过，而我可以`foo`从文档类引用的唯一方法是引用容器（即，`a.foo`而不是仅仅使用 use 切换到命名空间，并且直接追踪`foo`）。

> *为了论证，继承和静态成员都不是解决这个困境的办法。这既是学习更好的代码技术的练习，也是对具有复杂依赖关系的大型实用程序类结构的回答。鉴于没有变量/方法，您可以简单地围绕它编写代码。*

* * *

我知道这不是一个有大量文档的主题，这就是为什么我希望这里的一些圣人可以看到我所缺少的。非常感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:25:05.467

“使用命名空间”适用于消费者方面。您始终必须在任何声明中包含命名空间：

> MyNamespace var foobar : uint;

如果您希望添加命名空间包全局变量（您不应该作为一般规则），您必须在单独的 .as 文件中定义它们中的每一个，因为包只允许顶部的每个文件有一个公开可见的定义 -等级。

在上面的示例中，您错误地使用了命名空间。一个命名空间可以跨越多个类，但不能实现您正在寻找的跨类功能。这更多是面向方面编程的领域。

# c# - WCF 通道随机变为故障（在线程终止时）

> ID：10708804
> 
> 赞同：1
> 
> 时间：2012-05-22T19:30:28.733
> 
> 标签：c#, .net, wcf

我们的应用程序由 2 个应用程序域组成。辅助应用程序域中的某些方法调用（日志记录）**必须**“重定向”到第一个应用程序域。

这是通过在主 appdomain 上设置 WCF 服务并让辅助 appdomain 调用其操作来完成的。

例如，下面是在第二个 AppDomain 中运行的代码：

```
Logger.Debug("Message"); 
```

将在内部作为 WCF 服务调用重定向到第一个 AppDomain：

```
public void Debug(string message)
{
    if (useService)
    {
        logProxy.Log(message);
    }
} 
```

问题是，在**随机**情况下，我看到服务代理转换为**故障**状态。

深入挖掘，我发现当进行服务调用的线程被关闭时，在某些情况下代理对象会出现故障。

我的问题是——我如何保护自己免受执行 WCF 服务调用但启动调用的线程被关闭的情况？（可能在收到回复之前）。

另外——ClientBase 是否优于使用 ChannelFactory 选项来创建客户端代理？

关于我的设置的一些额外细节：

*   WCF 服务通过 NetNamedPipeBinding（命名管道）公开
*   我正在使用 ChannelFactory.CreateChannel 方法来创建“客户端”代理（不是 ClientBase）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:41:23.933

只有客户端可以处理这个。

```
ServiceClient client = new ServiceClient();
 try {
     client.Operation();
 }
 catch(Exception ex)
 {
     if (client.State == CommunicationState.Faulted)
     {
             client.Abort();
             client = new ServiceClient();
     }
 } 
```

# c# - 更改 DataGrid.ItemsSource 时如何引发事件

> ID：10708806
> 
> 赞同：36
> 
> 时间：2012-05-22T19:30:30.023
> 
> 标签：c#, wpf, events, datagrid

我是 WPF 的新手，我正在使用 DataGrids，我需要知道何时更改属性 ItemsSource。

例如，我需要在执行这条指令时触发一个事件：

```
dataGrid.ItemsSource = table.DefaultView; 
```

或者当添加一行时。

我曾尝试使用此代码：

```
CollectionView myCollectionView = (CollectionView)CollectionViewSource.GetDefaultView(myGrid.Items);
((INotifyCollectionChanged)myCollectionView).CollectionChanged += new NotifyCollectionChangedEventHandler(DataGrid_CollectionChanged); 
```

但是此代码仅在用户向集合中添加新行时才有效。因此，我需要在整个 ItemsSource 属性发生任何更改时引发一个事件，无论是因为替换了整个集合还是添加了单行。

我希望你能帮助我。先感谢您

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-22T19:45:39.287

`ItemsSource`是一个依赖属性，因此当属性更改为其他内容时很容易得到通知。除了您拥有的代码之外，您还想使用它，而不是：

在`Window.Loaded`（或类似的）中，您可以像这样订阅：

```
var dpd = DependencyPropertyDescriptor.FromProperty(ItemsControl.ItemsSourceProperty, typeof(DataGrid));
if (dpd != null)
{
    dpd.AddValueChanged(myGrid, ThisIsCalledWhenPropertyIsChanged);
} 
```

并有一个变更处理程序：

```
private void ThisIsCalledWhenPropertyIsChanged(object sender, EventArgs e)
{
} 
```

只要`ItemsSource`设置了属性，`ThisIsCalledWhenPropertyIsChanged`就会调用该方法。

您可以将其用于您希望收到更改通知的*任何依赖项属性。*

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-22T19:52:00.157

这有什么帮助吗？

```
public class MyDataGrid : DataGrid
{
    protected override void OnItemsSourceChanged(
                                    IEnumerable oldValue, IEnumerable newValue)
    {
        base.OnItemsSourceChanged(oldValue, newValue);

        // do something here?
    }

    protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e)
    {
        base.OnItemsChanged(e);

        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
                break;
            case NotifyCollectionChangedAction.Remove:
                break;
            case NotifyCollectionChangedAction.Replace:
                break;
            case NotifyCollectionChangedAction.Move:
                break;
            case NotifyCollectionChangedAction.Reset:
                break;
            default:
                throw new ArgumentOutOfRangeException();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-22T02:39:10.067

如果您想检测添加的新行，可以尝试 DataGrid`InitializingNewItem`或`AddingNewItem`Event。

`InitializingNewItem`用法 ：

[Datagrid自动添加带有父数据的项目](https://stackoverflow.com/questions/20726930/datagrid-auto-add-item-with-data-of-parent)

# android - Android 免费商店/检索云选项

> ID：10708808
> 
> 赞同：0
> 
> 时间：2012-05-22T19:30:37.750
> 
> 标签：android, cloud

我想知道是否有任何免费选项可以使用 Android 从云中存储和检索数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:34:38.340

我使用 parse.com 进行对象云存储，使用起来非常简单，请参阅[http://www.parse.com](http://www.parse.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:32:13.600

您可以使用谷歌应用引擎。它在一定限度内是免费的。如果您需要额外的存储和/或流量，则必须在该阈值之后付费。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:36:00.193

如果您只想从云端存储和检索数据，您可以使用非常易于使用的 Google App 引擎。它具有 Java 和 python 中的 API 如果您想更好地控制存储数据的方式，您应该使用 Amazon Web 服务创建一个帐户并尝试使用 S3。总体而言，Amazon S3 也将比 Google App Engine 更便宜。

# jpa - 如何通过集合值查询实体

> ID：10708809
> 
> 赞同：11
> 
> 时间：2012-05-22T19:30:43.337
> 
> 标签：jpa, collections, criteria-api

我正在使用 jpa 并且我有以下实体：

```
@Entity
@Table(name="favorites_folders")
public class FavoritesFolder {

     private static final long serialVersionUID = 1L;

     @Id
     private String id;

     @NotNull
     @Size(min = 1, max = 50)
     public String name;

     @ElementCollection(fetch = FetchType.LAZY)
     @CollectionTable(
        name="favorites_products",
        joinColumns=@JoinColumn(name="folder_id")
        )
     @Column(name="product_id")
     @NotNull
     private Set<String> productsIds = new HashSet<String>();
} 
```

我想要做的是在其成员集中获取一组`FavoritesFolder`包含字符串“favorite-id”的实体。`productsIds`

有谁知道如何在**标准 api**中完成？

**更新：**
我认为以下 sql 应该可以解决问题，但我不知道如何在`JPQL`or中做到这一点`Criteria API`：

```
select * from favorites_folders join favorites_products on favorites_folders.id = favorites_products.folder_id where favorites_products.product_id = 'favorite-id' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-23T09:00:03.540

要使用标准 api 在其 productsIds 成员集中获取一组包含字符串“favorite-id”的收藏夹实体，您应该执行以下操作：

```
CriteriaBuilder cb = em.getCriteriaBuilder(); //em is EntityManager
CriteriaQuery<FavoritesFolder> cq = cb.createQuery(FavoritesFolder.class);
Root<FavoritesFolder> root = cq.from(FavoritesFolder.class);

Expression<Collection<String>> productIds = root.get("productsIds");
Predicate containsFavoritedProduct = cb.isMember("favorite-id", productIds);

cq.where(containsFavoritedProduct);

List<FavoritesFolder> favoritesFolders = em.createQuery(cq).getResultList(); 
```

[有关JPQL 和标准查询](http://www.objectdb.com/java/jpa/query/jpql/collection)中的集合的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T22:34:00.430

使用 IN 的另一种方式

```
@Entity
public class UserCategory implements Serializable {
private static final long    serialVersionUID    = 8261676013650495854L;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@ElementCollection
private List<String> categoryName;

(...)
} 
```

然后你可以写一个标准查询，如

```
 CriteriaBuilder cb = entityManager.getCriteriaBuilder();
    CriteriaQuery<UserCategory> q = cb.createQuery(UserCategory.class);
    Root<UserCategory> root = q.from(UserCategory.class);

    Predicate predicate = cb.conjunction();
    Predicate p1 = cb.equal(root.get(UserCategory_.targetSiteType), siteType.getName());
    Predicate p2 = root.get(UserCategory_.categoryName).in(category);
    predicate = cb.and(p1,p2);

    q.where(predicate);

    TypedQuery<UserCategory> tq = entityManager.createQuery(q);
    List<UserCategory> all = tq.getResultList();

    if (all == null || all.size() == 0){
        return null;
    }else if (all.size() > 1){
        throw new Exception("Unexpected result - "+all.size());
    }else{
        return all.get(0);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-02T12:16:53.233

这是我的工作。我正在使用 Springboot 1.5.9。我没有时间找出根本原因。我所知道的是这样的嵌套属性在通过时被忽略了`JacksonMappingAwareSortTranslator`。所以我为解决这个问题所做的不是使用由解析器创建的 Sort 对象。这是我的代码`Kotlin`。如果不这样做，则`pageable.sort`is`null`和排序不起作用。我的代码将创建一个`PageRequest`具有非空值的新对象`sort`。

```
 @RequestMapping("/searchAds", method = arrayOf(RequestMethod.POST))
    fun searchAds(
        @RequestBody cmd: AdsSearchCommand,
        pageable: Pageable,
        resourceAssembler: PersistentEntityResourceAssembler,
        sort: String? = null
    ): ResponseEntity<PagedResources<Resource<Ads>>> {
        val page = adsService.searchAds(cmd, pageable.repairSortIfNeeded(sort))
        resourceAssembler as ResourceAssembler<Ads, Resource<Ads>>
        return adsPagedResourcesAssembler.toResource(page, resourceAssembler).toResponseEntity()
    }

    fun Pageable.repairSortIfNeeded(sort: String?): Pageable {
        return if (sort.isNullOrEmpty() || this.sort != null) {
            this
        } else {
            sort as String
            val sa = sort.split(",")
            val direction = if (sa.size > 1) Sort.Direction.valueOf(sa[1]) else Sort.Direction.ASC
            val property = sa[0]
            PageRequest(this.pageNumber, this.pageSize, direction, property)
        }
    } 
```

# php - 联机 SQL 适用于本地页面但不适用于联机页面

> ID：10708819
> 
> 赞同：1
> 
> 时间：2012-05-22T19:31:34.063
> 
> 标签：php, sql

我在 PHP 中创建了一个页面

数据库是在线连接的，所以当我在本地运行站点时 / 但是在线连接的 sql 数据库一切正常。但是一旦我运行在线页面，并尝试对它说的数据库做任何事情

> 该网站在检索时遇到错误`http://www.....`它可能因维护而关闭或配置不正确。

所以我知道出了点问题，但我似乎不明白为什么我可以在本地驱动页面时将内容上传到我的 SQL 数据库。

关于我应该考虑什么的任何提示？

我将添加我的 upload.php 文件

问题是即使我删除了我的 include('/core/inc/init.inc.php'); 文件。它仍然得到同样的错误。所以它一定与我的查询有关？

这是我的代码。

```
 <?php  
 // Connects to your Database 
include('/core/inc/init.inc.php');

 if($_FILES['file_name'])) {
 $file_name = mysql_real_escape_string($_FILES['file_name']['name']); 
  //Writes the information to the database 

 mysql_query("INSERT INTO `files` (`file_name`) VALUES ('$file_name')") ; 

move_uploaded_file($_FILES['file_name']['tmp_name'], "core/files/{$_FILES['file_name']['name']}");

  }
  // sid antal
  $page = ($_GET['page'])) ? (int)$_GET['page'] : 1;

 //Retrieves data from MySQL 
 $data = mysql_query("SELECT * FROM files") or die(mysql_error()); 
 //Puts it into an array 

 $files = mysql_query("SELECT * FROM files") or die(mysql_error()); 

  /*pagination */ 
    $per_page = 5;
    $pages_query = mysql_query("SELECT COUNT('user_id') FROM files");
    $pages = ceil(mysql_result($pages_query, 0) /$per_page);

    $page = ($_GET['page'])) ? (int)$_GET['page'] : 1;
    $start = ($page - 1) * $per_page;
  /*pagination */ 

 ?> 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
<title>Pixeltouch</title> 

<link rel="stylesheet" type="text/css" href="ext/style.css" />

</head> 
<body> 
<div id="page-wrap"> 
<div id="main-content"> 
<br/>
<?php include_once('template/head.inc.php');
?>
<div id="menu"> 

<?php include_once('template/nav.inc.php');
?> 

</div> 
<!-- SKRIVBOX-->

    <div>
 <form enctype="multipart/form-data" action="" method="post"> 
    <p>
<input type="file" name="file_name" /><br/> 
    </p>    
    <p>
 <input type="submit" value="Add" /> 
    </p>
</form>
<!-- <a href="file_list.php">Listan</a> -->
</div>

<!--Pagination-->

    <?php  
 $data = mysql_query("SELECT * FROM files LIMIT $start, $per_page")
 or die(mysql_error()); 
 echo "<table border cellpadding=1>"; 
 while($info = mysql_fetch_array( $data )) 
    { ?><?php
        echo "<tr>"; 
    //  echo "<td>".$info['user_id'] . "</td> "; 
        echo "<td>".$info['user_name'] . "</td> ";
        echo "<td>".$info['file_name'] . "</td> ";
        ?>
        <td> <a href="download.php?user_id=<?php echo $_SESSION ['uid']; ?>"> <?php echo $info['file_name']; ?></a></td>
        <?php
        echo "<td>".date('d/m/Y') . "</td>" ;

    }
        echo "</tr>";
        echo "</table>"; 

 if($pages >= 1 && $page <=$pages){

 for ($x = 1; $x<=$pages; $x++){ 

 echo ($x == $page) ? '<strong><a href="?page='.$x.'">' .$x. '</a> </strong>' : '<a href="?page=' .$x. '">' .$x. ' </a> ';

 }

 }

 ?> 
 <!--Pagination-->

<!--PAGINATION-->

<!-- SKRIVBOX END-->
</div> 

<?php include_once('template/foot.inc.php');
?>
</div>
</body>
</html> 
```

初始化.inc.php 文件

```
 <?php
 session_start();

 mysql_connect("server", "username", "password") or die(mysql_error()) ; 
 mysql_select_db("pixeltouch2") or die(mysql_error()) ;

 $path = dirname(__FILE__);
 include("{$path}/user.inc.php");

 ?>

                                    <!--Registration/Login (START)-->
 <?php 

 $exceptions = array('register', 'login', 'user_list', 'profile', 'edit_profile');

 $page = substr(end(explode('/', $_SERVER['SCRIPT_NAME'])), 0, -4);

 if(in_array($page, $exceptions) == false){
    if (isset($_SESSION['username']) == false){
    header('Location: login.php');
    die();
    }
  }
 ?>

                                    <!--Registration/Login (END)--> 

                                        <!--User Profile (START)-->
 <?php
 $_SESSION['uid'] = 1;

 ?>

                                        <!--User Profile (END)--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:23:12.757

确保你有这样的东西：

```
mysql_connect($server, $username, $password) 
```

在你的`/core/inc/init.inc.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T21:51:57.113

> > 这就是我得到的错误消息 Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) – Felipe Otarola 1 小时前

Felipe 尝试启动/重启你的 mysql 服务器：

```
sudo service mysql start // ubuntu
sudo service mysqld start // centos 
```

**编辑 1**

尝试这个：

```
if ($_SERVER['HTTP_HOST'] != 'localhost') // running in remote server
    $server = 'localhost';  
else // running locally
    $server = 'your-online-database-server-address';

mysql_connect($server, "username", "password") or die(mysql_error()); 
```

# tinymce - 在 textarea 可见之前初始化 tinyMCE

> ID：10708822
> 
> 赞同：1
> 
> 时间：2012-05-22T19:31:46.667
> 
> 标签：tinymce

如何在要应用的元素尚不可见之前初始化 tinyMCE？

所以，是的，这在我的情况下不起作用。

```
tinyMCE.init({ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:59:27.903

假设您正在动态添加由某个操作触发的文本区域，那么您可以使用 TinyMCE 命令“mceAddControl”将 TinyMCE 添加到页面。

例如，如果 textarea ID 是“myText”，那么您添加编辑器控件

```
tinyMCE.execCommand('mceAddControl', true,"myText"); 
```

当然，您需要在添加控件之前设置编辑器设置。这是通过设置控件的设置属性来完成的。例如

```
tinyMCE.settings = {
                     theme: 'advanced', 
                     ....
                   }; 
```

# python - Django 查询集

> ID：10708826
> 
> 赞同：2
> 
> 时间：2012-05-22T19:32:00.007
> 
> 标签：python, django

我的一种形式有以下内容：

```
self.fields['advisor'].queryset = User.objects.filter(groups__name='advisor') 
```

唯一的问题是它`username`在下拉框中显示。我想做的是显示`first_name`then`last_name`以使其更具人类可读性。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:07:33.417

有`ModelChoiceField`一个`label_from_instance`方法可以在子类中更改以使用模型方法以外的`__unicode__`方法。 [https://docs.djangoproject.com/en/1.3/ref/forms/fields/#django.forms.ModelChoiceField.empty_label](https://docs.djangoproject.com/en/1.3/ref/forms/fields/#django.forms.ModelChoiceField.empty_label)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:37:32.157

根据这个[文档](https://docs.djangoproject.com/en/dev/topics/db/models/)，试试这个快速而肮脏的代码：

```
u = User.objects.filter(groups__name='advisor')
self.fields['advisor'].queryset = u.get_first_name_display() + " " + u.get_last_name_display() 
```

# python - 如何修复 httplib.BadStatusLine 异常？

> ID：10708828
> 
> 赞同：5
> 
> 时间：2012-05-22T19:32:04.797
> 
> 标签：python, httplib

```
URL = "MY HTTP REQUEST URL"
XML = "<port>0</port>"

parameter = urllib.urlencode({'XML': XML})
response = urllib.urlopen(URL, parameter)
print response.read()

IOError: ('http protocol error', 0, 'got a bad status line', None) 
```

我正在尝试将 XML 发送到服务器并取回 XML。有没有办法修复/忽略这个异常？

我知道状态行是空的，这会引发这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T14:05:34.580

试着看看你的服务器实际返回了什么！它可能不是有效的 HTTP 响应。您可以使用类似这样的方式向服务器发送原始 http 请求：

```
from socket import socket

host = 'localhost'
port = 80
path = "/your/url"
xmlmessage = "<port>0</port>"

s = socket()
s.connect((host, port))
s.send("POST %s HTTP/1.1\r\n" % path)
s.send("Host: %s\r\n" % host)
s.send("Content-Type: text/xml\r\n")
s.send("Content-Length: %d\r\n\r\n" % len(xmlmessage))
s.send(xmlmessage)
for line in s.makefile():
    print line,
s.close() 
```

响应应该类似于：

```
HTTP/1.1 200 OK
<response headers>

<response body> 
```

# xml - MS Project 同步后 TFS 工作项字段只读

> ID：10708838
> 
> 赞同：0
> 
> 时间：2012-05-22T19:32:21.583
> 
> 标签：xml, tfs, tfs-workitem

在从 MS Project 计划同步到 TFS 后，团队基础服务器 2010 中是否有一种方法可以使工作项字段从 Visual Studio 和团队 Web 访问中只读。这是我的想法，但问题是该`<READONLY />`属性阻止字段与项目计划同步：

```
<WHENNOT field="Custom.WBS" value="">
    <READONLY />
</WHENNOT> 
```

说明一下，第一次同步项目计划的时候，WBS字段是带值推送到TFS的，那么包含上述条件的字段就会是只读的，很完美，可惜阻止了进一步的同步，报错说该字段无法同步，因为它是只读的。

有没有办法将字段设置为只读而不阻止来自 MS Project 的同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:09:47.433

我希望工作项表单中的字段始终为只读，您可以将控件设置为只读（这与字段规则不同，这是不可变的）。MS Project 仍然可以修改该字段，但用户不能。

不知道是不是你想达到的。

**编辑**

那么我认为不可能自动实现您所需要的，主要是因为 WHEN/WHENOT 条件仅与静态值进行比较，理想情况下，您需要与动态值进行比较以检测与 MS Project 的最近同步。

您仍然可以通过手动维护在 WHEN/WHENNOT 条件中使用的布尔自定义字段来处理它，总比没有好。

# python - Python：大浮点数的小数部分

> ID：10708840
> 
> 赞同：3
> 
> 时间：2012-05-22T19:32:23.233
> 
> 标签：python

我正在尝试获取`(pow(10, i) - 1)/23`for的小数部分`0 < i < 50`。我试过了

```
(pow(10, i) - 1)/23 % 1 
```

在 Python 3 中，但我得到`0.0`所有`i`大于 17 的值。

如何在 Python 中提取大整数的小数部分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T19:38:09.353

为了保持精度，我可能会使用[分数](http://docs.python.org/library/fractions.html)模块：

```
>>> from fractions import Fraction
>>> Fraction(10)
Fraction(10, 1)
>>> Fraction(10)**50
Fraction(100000000000000000000000000000000000000000000000000, 1)
>>> Fraction(10)**50-1
Fraction(99999999999999999999999999999999999999999999999999, 1)
>>> (Fraction(10)**50-1)/23
Fraction(99999999999999999999999999999999999999999999999999, 23)
>>> ((Fraction(10)**50-1)/23) % 1
Fraction(5, 23)
>>> float(((Fraction(10)**50-1)/23) % 1)
0.21739130434782608 
```

尽管使用[十进制](http://docs.python.org/library/decimal.html)模块将是另一种选择。

更新：等等，再想一想，这里的答案总是会是`((10^n-1) % 23)/23`，所以上面的内容是显着的矫枉过正（尽管它确实可以更好地扩展到更复杂的问题）。我们甚至可以利用三参数 pow 调用：

```
>>> pow(10, 50, 23)
6
>>> pow(10, 50, 23) - 1
5
>>> (pow(10, 50, 23) - 1) % 23 # handle possible wraparound
5
>>> ((pow(10, 50, 23) - 1) % 23) / 23.0
0.21739130434782608 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:55:22.007

不使用其他模块的一种选择是

```
N = 10**i - 1
remainder = N % 23
print remainder / 23.0 
```

当然也很容易写在一行上。

使用执行[模幂运算](http://en.wikipedia.org/wiki/Modular_exponentiation)[的 pow 的三个参数形式](http://docs.python.org/py3k/library/functions.html#pow)，您可以完全避免大量数字，从而提高性能。

```
((pow(10, i, 23) + 22) % 23) / 23.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:38:28.170

您的意思是：“如何在 Python 中提取大**浮点数**的小数部分？不再有“小数”部分，因为逗号是*浮动*的...... :-)

在 Python 2.7 上，对于`i=20`（我除以 23.0 以获得浮点结果），结果为`4.347826086956522e+18`. 10^18 的数量有 16 位数字。因此，“逗号后”没有数字（这可能仍然不正确，`i=20`因为可能并非所有数字都已打印，但至少您明白我的意思）。

您必须应用一个为大型`i`.

# objective-c - 沙盒化应用程序后 NSSavePanel 不保存文件

> ID：10708845
> 
> 赞同：8
> 
> 时间：2012-05-22T19:32:37.463
> 
> 标签：objective-c, cocoa, appstore-sandbox, nssavepanel

`NSSavePanel`在为 Mac App Store 沙盒化应用程序后，我在保存字符串文件时遇到问题。我设置`com.apple.security.files.user-selected.read-write`为`YES`并且`NSOpenPanel`正在按应有的方式工作。

但是，当我尝试保存新文件时，似乎一切正常，但是没有保存的文件应该在....

这是我用来保存文件的代码：

```
NSSavePanel *save = [NSSavePanel savePanel];

long int result = [save runModal];

if (result == NSOKButton)
{
    NSString *selectedFile = [save filename];
    NSString *fileName = [[NSString alloc] initWithFormat:@"%@.dat", selectedFile];
    NSString *arrayCompleto = [[NSString alloc]initWithFormat:@"bla bla bla"];
    [arrayCompleto writeToFile:fileName
                    atomically:NO
                      encoding:NSUTF8StringEncoding
                         error:nil];
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T12:30:03.917

首先，`-[NSSavePanel filename]`选择器已被弃用。改为使用`-[NSSavePanel URL]`。其次，`-[NSString writeToFile:atomically:encoding:error]`告诉你你做错了什么的方式是`error:(NSError**)`争论。

您还应该特别处理文件 I/O 的错误，因为即使您的代码 100% 正确，用户的系统上仍然可能存在错误（权限不足等），并且将错误呈现给用户将允许他们看到它失败了（并且知道为什么）。处理代码中的错误也将使您的应用程序恢复。例如，如果您尝试读取您粘贴的代码下方的文件（在将其写入磁盘之后），但用户尝试将其写入他们无权访问的网络共享，您的应用程序可能会崩溃。如果您知道写入失败，您可以进行相应的操作（可能会提示输入不同的保存位置）。

但是，在这种情况下，我相信以下行是您的问题：

```
NSString *fileName = [[NSString alloc] initWithFormat:@"%@.dat", selectedFile]; 
```

当您的应用程序被沙盒化时，用户需要通过打开/保存面板授予您对*特定文件*或*特定目录*的权限，以将它们带入您的沙盒。您正在做的是获取用户授予您写入权限的文件并说“这很好，但我想保存一个不同的文件”，这违反了沙箱。您应该做的是在保存面板中设置扩展名。完整的固定解决方案是：

```
NSSavePanel *save = [NSSavePanel savePanel];
[save setAllowedFileTypes:[NSArray arrayWithObject:@"dat"]];
[save setAllowsOtherFileTypes:NO];

NSInteger result = [save runModal];

if (result == NSOKButton)
{
     NSString *selectedFile = [[save URL] path];
     NSString *arrayCompleto = @"bla bla bla";

     NSError *error = nil;
     [arrayCompleto writeToFile:selectedFile
                     atomically:NO
                       encoding:NSUTF8StringEncoding
                          error:&error];
}

if (error) {
    // This is one way to handle the error, as an example
    [NSApp presentError:error];
} 
```

如果将来有其他问题，您可以`error`在运行时检查 的值。调试时，在语句中设置断点`if (error)`以检查`error`对象的值（`po error`在 Xcode 的调试器中执行 a）。这应该可以帮助您找出问题所在。

# objective-c - 第 n 个字符的子字符串

> ID：10708851
> 
> 赞同：0
> 
> 时间：2012-05-22T19:33:07.523
> 
> 标签：objective-c

我需要子字符串到 NSString 中的第二个逗号。

输入：

```
NSString *input = @"title, price, Camry, $19798, active"; 
```

期望的输出：

```
NSString *output = @"title, price"; 
```

谢谢！

更新：

我有以下内容，但问题是它需要跳过最后一个逗号：

```
NSString *output = [input rangeOfString:@"," options:NSBackwardsSearch]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:43:43.957

试试这个：

```
- (NSString *)substringOfString:(NSString *)base untilNthOccurrence:(NSInteger)n ofString:(NSString *)delim
{
    NSScanner *scanner = [NSScanner scannerWithString:base];
    NSInteger i;
    for (i = 0; i < n; i++)
    {
         [scanner scanUpToString:delim intoString:NULL];
         [scanner scanString:delim intoString:NULL];
    }
    return [base substringToIndex:scanner.scanLocation - delim.length];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:51:36.337

这段代码应该做你需要的：

```
NSString *input = @"title, price, Camry, $19798, active";

NSArray *array = [input componentsSeparatedByString:@","];

NSArray *subArray = [array subarrayWithRange:NSMakeRange(0, 2)];

NSString *output = [subArray componentsJoinedByString:@","];

NSLog(output); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:48:48.020

您可以像这样在objc中**拆分->拼接->加入**该字符串：

```
NSString *input = @"title, price, Camry, $19798, active";
// split by ", "
NSArray *elements = [input componentsSeparatedByString: @", "];
// grab the subarray
NSArray *subelements = [elements subarrayWithRange: NSMakeRange(0, 2)];
// concat by ", " again
NSString *output = [subelements componentsJoinedByString:@", "]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:40:51.123

你可以尝试这样的事情：

```
NSArray *items = [list componentsSeparatedByString:@", "];
NSString result = @"";
result = [result stringByAppendingString:[items objectAtIndex:0]];
result = [result stringByAppendingString:@", "];
result = [result stringByAppendingString:[items objectAtIndex:1]]; 
```

如果你想避免异常，你必须检查你至少有两个项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T19:49:54.860

简单地编写代码来做你想做的事真的没有错。例如：

```
int commaCount = 0;
int i;
for (i = 0; i < input.count; i++) {
    if ([input characterAtIndex:i] == (unichar) ',') {
        commaCount++;
        if (commaCount == 2) break;
    }
}

NSString output = nil;
if (commaCount == 2) {
   output = [input substringToIndex:i];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T20:28:18.840

您可以创建一个`NSString`类别来处理查找任何字符串的第 n 次出现。这是 ARC 的示例。

```
//NSString+MyExtension.h

@interface NSString(MyExtension)
-(NSString*)substringToNthOccurrence:(NSUInteger)nth 
                            ofString:(NSString*)string;
-(NSString*)substringToNthOccurrence:(NSUInteger)nth 
                            ofString:(NSString*)string 
                             options:(NSStringCompareOptions)options;
@end
@implementation NSString(MyExtension)
-(NSString*)substringToNthOccurrence:(NSUInteger)nth 
                            ofString:(NSString*)string
{
    return [self substringToNthOccurrence:nth ofString:string options:0];
}
-(NSString*)substringToNthOccurrence:(NSUInteger)nth 
                            ofString:(NSString*)string 
                             options:(NSStringCompareOptions)options
{
    NSUInteger location = 0,
        strlength = [string length],
        mylength = [self length];

    NSRange range = NSMakeRange(location, mylength);

    while(nth--)
    {
        location = [self rangeOfString:string 
                               options:options 
                                 range:range].location;   
        if(location == NSNotFound || (location + strlength) > mylength) 
        {
            return [self copy]; //nth occurrence not found
        }           
        if(nth == 0) strlength = 0; //This prevents the last occurence from being included

        range = NSMakeRange(location + strlength, mylength - strlength - location);
    }        
    return [self substringToIndex:location];
}
@end 
```

* * *

```
//main.m
#import "NSString+MyExtension.h"
int main(int argc, char *argv[])
{
    @autoreleasepool {
        NSString *output = [@"title, price, Camry, $19798, active" substringToNthOccurrence:2 ofString:@","];
        NSLog(@"%@", output);
    }
} 
```

**我将把它作为练习留给某人来实现可变版本。*

# nlp - 如何从混淆矩阵中计算概率？需要分母，字符矩阵

> ID：10708852
> 
> 赞同：5
> 
> 时间：2012-05-22T19:33:16.823
> 
> 标签：nlp, machine-learning, stanford-nlp, opennlp, confusion-matrix

[本文](http://acl.ldc.upenn.edu/C/C90/C90-2036.pdf)包含用于嘈杂通道中拼写错误的混淆矩阵。它描述了如何根据条件属性更正错误。

条件概率计算在第 2 页左栏。在脚注 4，第 2 页，左栏，作者说：“字符矩阵可以很容易地复制，因此从附录中省略。” 我无法弄清楚它们如何被复制！

**如何复制它们？我需要原始语料库吗？或者，作者是否意味着他们可以从论文本身的材料中重新计算？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:01:45.877

查看论文，您只需要使用语料库来计算它们，可以是相同的语料库，也可以是与您的应用程序相关的语料库。

在复制矩阵时，请注意它们隐含地定义了两个不同`chars`的矩阵：一个向量和一个 n×n 矩阵。对于每个字符`x`，向量包含字符在语料库中出现`chars`的次数的计数。`x`对于每个字符序列`xy`，矩阵`chars`包含该序列在语料库中出现的次数的计数。

`chars[x]``x`表示在向量中的查找；表示在矩阵中`chars[x,y]`查找序列。`xy`请注意`chars[x]`= 的`chars[x,y]`每个值的总和`y`。

请注意，它们的计数均基于 1988 年 AP Newswire 语料库（[可从 LDC 获得](http://www.ldc.upenn.edu/Catalog/catalogEntry.jsp?catalogId=LDC93T3A)）。如果您不能使用他们确切的语料库，我认为使用同一类型的另一个文本（即另一个新闻专线语料库）并缩放您的计数以使其适合原始数据是不合理的。也就是说，如果一个文本足够相似，一个给定字符的频率不应该在另一个文本之间变化太大，所以如果你有一个包含 2200 万字新闻专线的语料库，你可以计算那个文本中的字符并且然后将它们加倍以接近其原始计数。

# jquery - 有什么方法可以选择性地“缓存”标签吗？

> ID：10708853
> 
> 赞同：1
> 
> 时间：2012-05-22T19:33:17.720
> 
> 标签：jquery, jquery-ui, jquery-tabs

有什么方法可以让我`cache`有选择地选择 jQuery-UI 中的选项卡吗？

我的意思是，我有 3 个标签，我只想选择`cache`标签号。2.

我知道我们可以使用

```
$( ".selector" ).tabs({ cache: true }); 
```

但这会缓存所有选项卡。

谢谢。

**更新**

我尝试了**voigtan**和**Pheonixblade9**的建议，但效果与

```
$( "#tabs" ).tabs({ cache: true }); 
```

简而言之，它正在缓存所有选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:36:31.643

`id`您可以通过使用缓存它们

```
$("#tab1").tabs({cache:true}); 
```

当然，你需要分配一个id，但如果有逻辑缓存特定的选项卡，应该有逻辑为每个选项卡分配一个id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:38:32.373

你应该能够（如果@Pheonixblade9 说的话）是真的：

```
$(".selector").each(function() {
    $(this).tabs({ cache: true });
}); 
```

也应该工作。或使您的 css-selector 更加独特，例如说只选择第一个或选择所有 .selector 但不选择最后一个。

或者：

```
$(".selector").tabs().eq(1).tabs( "option", "cache", true ); 
```

将所有 .selector 设置为选项卡并过滤掉 2:nd 并将其缓存选项设置为`true`. 但我会使用更具体的 CSS 选择器（额外的 css-class 说它要缓存或其他东西）。

# git - 命令行中的 Git 不起作用，但使用 git 客户端（如 SmartGit）可以

> ID：10708857
> 
> 赞同：6
> 
> 时间：2012-05-22T19:33:48.537
> 
> 标签：git, command-line

我在 Mac 上，我通常通过命令行运行我的大部分 git 命令。今天早上突然间，我所有的命令行 git 命令都停止了工作。如果我输入“git status”，终端似乎会挂起大约一分钟，最终什么都不显示：

```
01412b-malberts:f2 sbanerjee$ git status
01412b-malberts:f2 sbanerjee$ 
```

其他 git 命令，如 pull、push 和 branch 都具有类似的行为。

奇怪的是，使用像 SmartGit 这样的 git GUI（它实际上使用与命令行相同的 git 可执行文件）似乎工作正常。我可以看到修改过的文件，推，拉，一切。

我已经尝试卸载并重新安装 git，重新克隆我的 repo 并重新启动我的笔记本电脑。谁能帮我让我的 git 命令从命令行工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T19:24:30.877

请完全忽略这个问题......对不起，伙计们，但我被一位同事控制了，他在我的终端中运行了一个脚本，让我的 Mac 使用 SimpleText 说出 git 命令的所有输出......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T19:59:52.977

尝试运行 git 并进行一些调试：

```
GIT_TRACE=2 git status 
```

听起来像是本地（库？）问题，而不是 git 错误。

# css - DIV 中的绝对值

> ID：10708868
> 
> 赞同：0
> 
> 时间：2012-05-22T19:34:31.853
> 
> 标签：css, image, html, absolute

我正在尝试将图像定位在另一个图像中，因此我可以将一个图像更改为另一个图像上方的位置。

这是包装：

```
<!--Start Slider Wrapper-->
        <div class="slider_wrapper">
         <div id="main" class="container">            
              <div id="foto1" class="foto1"> <?php if (inkthemes_get_option('inkthemes_featureimg') != '') { ?>
                 <img src="<?php echo inkthemes_get_option('inkthemes_featureimg'); ?>"/>
            <?php } else { ?>
                 <img src="<?php echo get_template_directory_uri(); ?>/images/slideimg.jpg"/>
            <?php } ?>
        </div>
        <div id="groenid" class="groenclass"><img src="<?php echo get_template_directory_uri(); ?>/images/groen.jpg" />
        </div>          
        <div class="slider_shadow"></div>
    </div>
     </div>
     </div>
    <!--End Slider wrapper--> 
```

这是CSS：

```
 #main {
    padding: 10px;
    background: #f9fbfb;
    border: 1px solid #ccc;
    z-index:1;
    height:460px;
    width: 928px;
}
#foto1 img{
    position:absolute;
    width: 928px;
    height: 460px;
    z-index:1;
}
#groenid {
   width: 116px;
   height:113px;
   position:absolute;
   z-index:2;
   top:0px;
   left:0px; 
```

我认为这没关系，但图像位置在顶部：0px left:0px 在网站的左上角，而我希望它位于图像的左上角..

有人可以帮助我吗？这是给学校的，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:42:42.640

你测试*保证金*吗？或*顶部：0px；左：116px；*例如？也许嵌套的 div 块或*左右浮动*可以帮助你。

# ssl - 带指针的多域 SSL 设置

> ID：10708870
> 
> 赞同：0
> 
> 时间：2012-05-22T19:34:32.470
> 
> 标签：ssl

我有一台带有 DirectAdmin 的服务器，主域 DomainA.com。其他本地域，如 DomainA.co.uk、DomainA.fr 和 DomainA.de 都指向（别名）这个主域。当有人访问本地域时，它会在内部重定向到 DomainA.com，其中一些代码会识别该域并以本地语言显示网站，而不会将访问者重定向到 DomainA.com。

这工作正常，但现在我想在所有域名上使用 SSL。目前的设置可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:22:50.653

您可以使用具有主题替代名称的证书或用于 GlobalSign 的 CloudSSL 等解决方案：[https ://www.globalsign.com/cloud/](https://www.globalsign.com/cloud/)

# javascript - 窗口渲染后将元素宽度分配给窗口宽度

> ID：10708872
> 
> 赞同：0
> 
> 时间：2012-05-22T19:34:33.663
> 
> 标签：javascript, html

我想像这样获得一个html元素的宽度：

```
var elementWidth = document.getElementById("myElement").style.width; 
```

然后我想将此分配给当前窗口，该窗口是使用以下方法创建的弹出窗口：

```
window.open("myUrl","myName","width=200,height=200"); 
```

我该怎么做呢？任何指针，因为窗口不能像元素一样分配宽度和高度值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:45:14.723

这可以通过执行以下操作来完成：

```
var elemWidth = document.getElementById("myElem").style.width;
var elemHeight = document.getElementById("myElem").style.height;
window.resizeTo(elemWidth,elemHeight); 
```

# c# - 将对象添加到字典...但测试部分唯一性

> ID：10708874
> 
> 赞同：1
> 
> 时间：2012-05-22T19:34:46.257
> 
> 标签：c#, generics, dictionary, hashtable, hashcode

我有以下对象，我想要一个字典来*有条件地确定*是否有重复。例如，在一本字典中，我只关心两个属性对于我的键来说是唯一的。在第二个字典中，我希望所有属性对于键都是唯一的。

**问题一：**

我应该覆盖哪些接口来完成此操作？（例如 GetHashCode、IEqualityComparer、equals 运算符）

**问题2：**

如果我更改了最终会更改键值的属性，我该怎么办？如果我做一个字典，这可能更相关，因为 .NET 框架以某种方式为我处理了这个问题，但我从来没有想过。

**代码**

```
public class EventData : IEqualityComparer<EventData>
{
    public string ComputerName { get; set; }
    public Guid? CategoryName { get; set; }
    public string LogName { get; set; }
    public int EventID { get; set; }
    public long? EventUniqueTracker { get; set; }

    public DateTime LastQueryDate { get; set; }
    public DateTime? DateOfRecord { get; set; }

    //public int QueryCount { get; set; }
    public int QueryCount = 0 ;//

    public string  zData { get; set; }

    public EventData(string computerName, Guid? categoryName, string logName, int eventID, long? eventUniqueTracker, int queryCount)
    {
        ComputerName = computerName;
        CategoryName = categoryName;
        LogName = logName;
        EventID = eventID;
        EventUniqueTracker = eventUniqueTracker;

        LastQueryDate = DateTime.Now;
        QueryCount = queryCount;
    }

    public EventData()
    {
    }

    public override int GetHashCode()
    {
        return GetHashCode(HashType.ZCompCatLogEventAllData);
    }
    public object GetString(HashType hType)
    {
        switch (hType)
        {
            case HashType.AComputerName:
                return ComputerName;
                break;
            case HashType.BCompAndCat:
                return new { A = ComputerName, B = CategoryName };
                break;
            case HashType.CCompCatLog:
                return new { A = ComputerName, B = CategoryName, C = LogName };
                break;
            case HashType.DCompCatLogEvent:
                return new { A = ComputerName, B = CategoryName, C = LogName, D = EventID };
                break;
            case HashType.ECompCatLogEventUserDefined1:
            case HashType.FCompCatLogEventUserDefined2:
            case HashType.ZCompCatLogEventAllData:
                return new { A = ComputerName, B = CategoryName, C = LogName, D = EventID, E = EventUniqueTracker };
            default:
                break;
        }
        return new object { };
    }

    public int GetHashCode(HashType hType)
    {
        return GetString(hType).GetHashCode();
        return 1;
    }

    public override string ToString()
    {
        return ComputerName + " " + CategoryName + " " + LogName + " " + EventID + " " + EventUniqueTracker;
    }

    public bool Equals(EventData x, EventData y)
    {
        return x.ComputerName == y.ComputerName &&
               x.CategoryName == y.CategoryName &&
               x.LogName == y.LogName &&
               x.EventID == y.EventID &&
               x.EventUniqueTracker == y.EventUniqueTracker;
    }

    public int GetHashCode(EventData obj)
    {
        EventData ci = (EventData)obj;
        // http://stackoverflow.com/a/263416/328397
        return new { A = ci.ComputerName, B = ci.CategoryName, C = ci.LogName, D = ci.EventID, E = ci.EventUniqueTracker }.GetHashCode();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:39:03.847

听起来您应该实施`IEqualityComparer<EventData>`- 但*不是*在其内部`EventData`。创建两个单独的实现 - 一个用于第一个相等概念，一个用于第二个。然后将您的字典创建为：

```
var first = new Dictionary<EventData, string>(new PartialDataEqualityComparer());
var second = new Dictionary<EventData, string>(new FullDataEqualityComparer()); 
```

或者，也许您想将第二种情况视为 的“自然”相等`EventData`，在这种情况下，您可以在创建第二个字典时`EventData`实现`IEquatable<EventData>`而不指定比较器。

基本上，您实现`IEquatable<T>`说“这种类型的实例能够将*自身*与”的实例进行比较，`T`而您实现`IEqualityComparer<T>`说“这种类型的实例能够比较`T`”的任何两个实例。

> 如果我更改了最终会更改键值的属性，我该怎么办？

基本上，你已经吃饱了。您将不会（或至少可能不会）能够在您的字典中再次找到该键。您应该尽可能小心地避免这种情况。就我个人而言，我通常发现作为字典键的良好候选者的类*也是*不变性的良好候选者。

# python - 生产服务器上的 django (ubuntu)

> ID：10708876
> 
> 赞同：1
> 
> 时间：2012-05-22T19:34:53.233
> 
> 标签：python, django, ubuntu, nginx

我正在尝试将我的 Web 应用程序发送到生产服务器。按照本教程[http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/](http://ijcdigital.com/blog/django-gunicorn-and-nginx-setup/) ，我的设置是**django-gunicorn-nginx**。我还没有安装主管进行检查。完美的配置设置没有问题，我得到了 Django 欢迎页面。然后我将我的应用程序加载到项目中。然后我运行它显示`gunicorn_django --bind=127.0.0.1:8001`

```
cover.backgroundmodel: "background": To use ImageFields, you need to install the Python Imaging Library. Get it at http://www.pythonware.com/products/pil/ .
cover.backgroundmodel: "tmpbg": To use ImageFields, you need to install the Python Imaging Library. Get it at http://www.pythonware.com/products/pil/ .
2012-05-22 14:24:02 [15359] [INFO] Worker exiting (pid: 15359)
2012-05-23 00:54:02 [15360] [INFO] Booting worker with pid: 15360
2012-05-22 14:24:02 [15360] [INFO] Worker exiting (pid: 15360)
2012-05-23 00:54:02 [15349] [INFO] Handling signal: int
2012-05-23 00:54:02 [15349] [INFO] Shutting down: Master 
```

但我已经成功安装了所有东西，包括 PIL 和其他图像库。有趣的是我让我的项目在我的电脑上完美运行。但我无法确定生产服务器中问题的原因。

我再次尝试安装`pip install PIL`它显示如下[https://gist.github.com/2771119](https://gist.github.com/2771119)为什么会这样？为什么我现在无法安装我之前在安装 django 时成功安装的 PIL。

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T19:40:40.127

安装[python-dev](http://packages.ubuntu.com/fr/lucid/python-dev)包，因为你没有 python 的头文件来编译 PIL。

# actionscript-3 - 在 Flash Builder Flex 移动项目中保存和读取用户数据的最佳方式

> ID：10708877
> 
> 赞同：0
> 
> 时间：2012-05-22T19:34:54.200
> 
> 标签：actionscript-3, mobile, settings, storage

在一个移动项目中，我有一些编辑（确切地说是 5 个）和一些单选按钮（但可以是一个，因为它是一个组，用户可以编辑需要在用户重新打开应用程序时恢复的内容。

我已经知道一些 FileReference 类，但这是最好的方法吗？我不喜欢 XML，因为它是简单的数据。下一个问题是：是否允许在安装时将数据保存在应用程序的本地目录中？或者......我可以使用一些注册表功能（如在 Windows 中）在手机上存储一些用户数据吗？

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:43:11.973

你看过`PersistenceManager`课堂吗？我认为它是您正在寻找的... [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/managers/PersistenceManager.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/managers/PersistenceManager.html)

该数据将一直存储，直到您将其刷新（清除）或删除该应用程序。它在应用程序启动之间持续存在。

[http://cookbooks.adobe.com/post_Simple_data_persistence_in_a_Flex_4_5_mobile_appli-18856.html](http://cookbooks.adobe.com/post_Simple_data_persistence_in_a_Flex_4_5_mobile_appli-18856.html) http://devgirl.org/2011/05/18/flex-4-5-mobile-data-handling/

# ajax - 来自非 Ajax 调用的 PrimeFaces Push

> ID：10708881
> 
> 赞同：0
> 
> 时间：2012-05-22T19:35:12.280
> 
> 标签：ajax, primefaces, push

我正在使用 primefaces 3.1，并且我想使用 PrimeFaces Push。

我想从**非**ajax 调用中进行推送，但当然不能这样做

```
RequestContext.getCurrentInstance().push(channel, msg) 
```

因为它返回null。

我可以用别的东西来推动吗？因为我需要通过非 ajax 调用来实现。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T18:00:20.110

在 primefaces 论坛上，他们告诉我，使用该版本的 primefaces 是不可能的。理论上，在 primefaces 3.4 中是可能的

# c# - C#计算每个大写字母和每个小写字母

> ID：10708886
> 
> 赞同：-3
> 
> 时间：2012-05-22T19:35:28.977
> 
> 标签：c#, string

嗨所以我有一些作业，目标是计算有多少单词，有多少空格，以及大写和小写字母。但令我困惑的是，输出必须显示每个单独的字母 AZ az 并在其旁边有一个数字显示它出现了多少次。过去我在代码中的位置我真的不明白这一点。我只上这门课，所以我可以学习思科网络，所以我不必学习微积分。这个学期以后我再也不去编程了。并且已经坚持了4个小时。任何帮助将不胜感激......即使你可以帮助我理解如何做到这一点的概念？谢谢你。

我想出了这个

```
using System;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            int countedWords = 0, count = 0;  //Declaring integers to be used 

            Console.WriteLine("Please enter a string\n");
            string inputString = Console.ReadLine();

            countedWords = inputString.Split(' ').Length; //counts words
            Console.WriteLine("\nREPORT FOR: " + inputString + "\n");
            Console.WriteLine("WORDCOUNT: " + countedWords);

            foreach (char c in inputString)  //counts number of uppercase letters
            {
                if (Char.IsUpper(c))
                    count++;
            }

            Console.WriteLine(count);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:38:50.643

因为这是家庭作业——我会给你一个线索。

由于您想要计算每个可能的字母，您可能需要考虑从*分组*而不是迭代和计数的角度考虑这个问题。这可以通过[GroupBy](http://msdn.microsoft.com/en-us/library/bb534501.aspx)处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T21:48:48.517

这是你的一个开始。

首先，我会将您的每个声明放在一个新行上，并使它们与它的用途有关（如果它的小写计数器使变量称为 lowerCase_Count 等）IMO，因为它通常被认为是一种好习惯和使阅读代码和对每个变量或对象的作用进行注释变得更加容易。

接下来，如果我理解你写的正确，他正在寻找这段代码来显示每个的计数：大写字母、小写字母、空格（这只是我的空格还是 , : 等？）和单词。他还想要一个列表，列出每个字母在给定文本中出现的次数。

你所拥有的是一个好的开始，我在你的 foreach 循环中添加了更多内容，如下所示：

```
 using System;
using System.IO;
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            //Declaring integers to be used 
            int countedWords = 0;
            int cap_count = 0;
            int lower_count = 0;

            Console.WriteLine("Please enter a string\n");
            string inputString = Console.ReadLine();

            countedWords = inputString.Split(' ').Length; //counts words
            Console.WriteLine("\nREPORT FOR: " + inputString + "\n");
            Console.WriteLine("WORDCOUNT: " + countedWords);

            foreach (char c in inputString)
            {
                //if is upper case add to cap_count
                if (Char.IsUpper(c))
                    cap_count++;
                //if char is a punctuation or white space ignore it else 
                // add as lower case
                else if (!char.IsPunctuation(c) && !char.IsWhiteSpace(c))
                    lower_count++;

            }

            //display results.
            Console.WriteLine("Number of Letters: " + (cap_count + lower_count));
            Console.WriteLine("Number of capital Letters: " + cap_count);
            Console.WriteLine("Number of lower case Letters: " + lower_count);
            Console.WriteLine("Number of spaces: " + (countedWords - 1));

            Console.ReadLine();
        }
    }
} 
```

这应该是您完成其余部分的良好起点。我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:38:08.333

我要做的是创建一个由 26 个（或 52 个）整数组成的数组，将它们全部初始化为 0，每次看到适当的字母时，就增加适当的存储桶。您可以将其放入现有的`foreach`.

为了显示，您只需遍历您的数组并打印它所代表的字母和该字母的实例数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T19:39:09.457

用 Alphabet 做一个结构

1.  字母
2.  数数

从中列出列表，ListUpper、ListLower、ListSpace、ListOthers。当您遇到适当的元素时加载列表并在完成时显示。

不会为您编写代码:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T19:46:55.217

这是另一个提示：字符串中的每个字符都有一个数值，通常称为它的 ASCII 值*。`char`您可以使用 s将字符串作为 s 数组获取`str.ToCharArray()`。

**完整性说明，比原始海报需要的更详细。*C# 中的字符串实际上存储为 Unicode 字符。但是 UTF-8 的前 128 个字符映射到相应的 ASCII 字符，所以在这种情况下，差异并不重要。

* * *

## 回答 #6

> 赞同：-9
> 
> 时间：2012-06-11T18:34:08.130

```
Using system;
Using system.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            int a = 0;
            int b = 0;
            int c = 0;
            int d = 0;
            int e = 0;
            int f = 0;
            int g = 0;
            int h = 0;
            int i = 0;
            int j = 0;
            int k = 0;
            int l = 0;
            int m = 0;
            int n = 0;
            int o = 0;
            int p = 0;
            int q = 0;
            int r = 0;
            int s = 0;
            int t = 0;
            int u = 0;
            int v = 0;
            int w = 0;
            int x = 0;
            int y = 0;
            int z = 0;

            int A = 0;
            int B = 0;
            int C = 0;
            int D = 0;
            int E = 0;
            int F = 0;
            int G = 0;
            int H = 0;
            int I = 0;
            int J = 0;
            int K = 0;
            int L = 0;
            int M = 0;
            int N = 0;
            int O = 0;
            int P = 0;
            int Q = 0;
            int R = 0;
            int S = 0;
            int T = 0;
            int U = 0;
            int V = 0;
            int W = 0;
            int X = 0;
            int Y = 0;
            int Z = 0;
            int readChar = 0;
            int word = 0;
            int lower = 0;
            int upper = 0;
            string inputString ="";
            char ch = ' ';
            string findString = "";
            int space = 0;
            int startingPoint = 0;
            int findStringCount = 0;

            Console.Write("Please enter a string: ");

            do{
                readChar = Console.Read();

                ch = Convert.ToChar(readChar);
                if (ch.Equals(' '))
                {
                    space++;
                }
                else if (Char.IsLower(ch))
                {
                    lower++;
                    if (ch.Equals('a')) 
                    {
                        a++;
                    }
                    else if (ch.Equals('b')) 
                    {
                        b++;
                    }
                    else if (ch.Equals('c')) 
                    {
                        c++;
                    }
                    else if (ch.Equals('d')) 
                    {
                        d++;
                    }
                    else if (ch.Equals('e')) 
                    {
                        e++;
                    }
                    else if (ch.Equals('f')) 
                    {
                        f++;
                    }
                    else if (ch.Equals('g')) 
                    {
                        g++;
                    }
                    else if (ch.Equals('h')) 
                    {
                        h++;
                    }
                    else if (ch.Equals('i')) 
                    {
                        i++;
                    }
                    else if (ch.Equals('j')) 
                    {
                        j++;
                    }
                    else if (ch.Equals('k')) 
                    {
                        k++;
                    }
                   else if (ch.Equals('l')) 
                    {
                        l++;
                    }
                    else if (ch.Equals('m')) 
                    {
                        m++;
                    }
                    else if (ch.Equals('n')) 
                    {
                        n++;
                    }
                    else if (ch.Equals('o')) 
                    {
                        o++;
                    }
                    else if (ch.Equals('p')) 
                    {
                        p++;
                    }
                    else if (ch.Equals('q')) 
                    {
                        q++;
                    }
                    else if (ch.Equals('r')) 
                    {
                        r++;
                    }
                    else if (ch.Equals('s')) 
                    {
                        s++;
                    }
                    else if (ch.Equals('t')) 
                    {
                        t++;
                    }
                    else if (ch.Equals('u')) 
                    {
                        u++;
                    }
                    else if (ch.Equals('v')) 
                    {
                        v++;
                    }
                    else if (ch.Equals('w')) 
                    {
                        w++;
                    }
                    else if (ch.Equals('x')) 
                    {
                        x++;
                    }
                    else if (ch.Equals('y')) 
                    {
                        y++;
                    }
                    else if (ch.Equals('z')) 
                    {
                        z++;
                    }
                }
                else if (Char.IsUpper(ch))

                {
                    upper++;
                    if (ch.Equals('A')) 
                    {
                        A++;
                    }
                    else if (ch.Equals('B')) 
                    {
                        B++;
                    }
                    else if (ch.Equals('C')) 
                    {
                        C++;
                    }
                    else if (ch.Equals('D')) 
                    {
                        D++;
                    }
                    else if (ch.Equals('E')) 
                    {
                       E++;
                    }
                    else if (ch.Equals('F')) 
                    {
                        F++;
                    }
                    else if (ch.Equals('G')) 
                    {
                       G++;
                    }
                    else if (ch.Equals('H')) 
                    {
                        H++;
                    }
                    else if (ch.Equals('I')) 
                    {
                       I++;
                    }
                    else if (ch.Equals('J')) 
                    {
                        J++;
                    }
                    else if (ch.Equals('K')) 
                    {
                        K++;
                    }
                    else if (ch.Equals('L')) 
                    {
                        L++;
                    }
                    else if (ch.Equals('M')) 
                    {
                       M++;
                    }
                    else if (ch.Equals('N')) 
                    {
                        N++;
                    }
                    else if (ch.Equals('O')) 
                    {
                        O++;
                    }
                    else if (ch.Equals('P')) 
                    {
                       P++;
                    }
                    else if (ch.Equals('Q')) 
                    {
                        Q++;
                    }
                    else if (ch.Equals('R')) 
                    {
                        R++;
                    }
                    else if (ch.Equals('S')) 
                    {
                       S++;
                    }
                    else if (ch.Equals('T')) 
                    {
                        T++;
                    }
                    else if (ch.Equals('U')) 
                    {
                        U++;
                    }
                    else if (ch.Equals('V')) 
                    {
                        V++;
                    }
                    else if (ch.Equals('W')) 
                    {
                        W++;
                    }
                    else if (ch.Equals('X')) 
                    {
                        X++;
                    }
                    else if (ch.Equals('Y')) 
                    {
                        Y++;
                    }
                    else if (ch.Equals('Z')) 
                    {
                        Z++;
                    }
                }

                if (((ch.Equals(' ') && (!inputString.EndsWith(" ")))||(ch.Equals('\r') && (!inputString.EndsWith(" "))))&&(inputString!=""))
                {
                    word++;
                }

                inputString = inputString + ch;

            } while (ch != '\r');

            Console.ReadLine();

            Console.WriteLine("Report on {0}",inputString);

            Console.WriteLine("# of spaces {0}",space);
            Console.WriteLine("# of lower {0}", lower);
            Console.WriteLine("# of upper {0}", upper);
            Console.WriteLine("# of word {0}", word);
            Console.WriteLine("UPPERCASE");
            if (A >= 1)
            {
                Console.WriteLine("A = {0}",A);
            }
            if (B >= 1)
            {
                Console.WriteLine("B = {0}",B);
            }
            if (C >= 1)
            {
                Console.WriteLine("C = {0}", C);
            }
            if (D >= 1)
            {
                Console.WriteLine("D = {0}", D);
            }
            if (E >= 1)
            {
                Console.WriteLine("E = {0}", E);
            }
            if (F >= 1)
            {
                Console.WriteLine("F = {0}", F);
            } if (G >= 1)
            {
                Console.WriteLine("G = {0}", G);
            }
            if (H >= 1)
            {
                Console.WriteLine("H = {0}", H);
            }
            if (I >= 1)
            {
                Console.WriteLine("I = {0}", I);
            }
            if (J >= 1)
            {
                Console.WriteLine("J = {0}", J);
            }
            if (K >= 1)
            {
                Console.WriteLine("K = {0}", K);
            }
            if (L >= 1)
            {
                Console.WriteLine("L = {0}", L);
            }
            if (M >= 1)
            {
                Console.WriteLine("M = {0}", M);
            }
           if (N >= 1)
            {
                Console.WriteLine("N = {0}",N);
            }
            if (O >= 1)
            {
                Console.WriteLine("O = {0}",O);
            }
            if (P >= 1)
            {
                Console.WriteLine("P = {0}",P);
            }
            if (Q >= 1)
            {
                Console.WriteLine("Q = {0}",Q);
            }
            if (R >= 1)
            {
                Console.WriteLine("R = {0}",R);
            }
            if (S >= 1)
            {
                Console.WriteLine("S = {0}",S);
            }
            if (T >= 1)
            {
                Console.WriteLine("T = {0}",T);
            }
            if (U >= 1)
            {
                Console.WriteLine("U = {0}",U);
            }
            if (V >= 1)
            {
                Console.WriteLine("V = {0}",V);
            }
            if (W >= 1)
            {
                Console.WriteLine("W = {0}",W);
            }
            if (X >= 1)
            {
                Console.WriteLine("X = {0}",X);
            }
            if (Y >= 1)
            {
                Console.WriteLine("Y = {0}",Y);
            }
            if (Z >= 1)
            {
                Console.WriteLine("Z = {0}",Z);
            }

            Console.WriteLine("LOWERCASE");
            if (a >= 1)
            {
                Console.WriteLine("a = {0}", a);
            }
            if (b >= 1)
            {
                Console.WriteLine("b = {0}", b);
            }
            if (c >= 1)
            {
                Console.WriteLine("c = {0}", c);
            }
            if (d >= 1)
            {
                Console.WriteLine("d = {0}", d);
            }
            if (e >= 1)
            {
                Console.WriteLine("e = {0}", e);
            }
            if (f >= 1)
            {
                Console.WriteLine("f = {0}", f);
            } if (g >= 1)
            {
                Console.WriteLine("g = {0}", g);
            }
            if (h >= 1)
            {
                Console.WriteLine("h = {0}", h);
            }
            if (i >= 1)
            {
                Console.WriteLine("i = {0}", i);
            }
            if (j >= 1)
            {
                Console.WriteLine("j = {0}", j);
            }
            if (k >= 1)
            {
                Console.WriteLine("k = {0}", k);
            }
            if (l >= 1)
            {
                Console.WriteLine("l = {0}", l);
            }
            if (m >= 1)
            {
                Console.WriteLine("m = {0}", m);
            }
            if (n >= 1)
            {
                Console.WriteLine("n = {0}", n);
            }
            if (o >= 1)
            {
                Console.WriteLine("o = {0}", o);
            }
            if (p >= 1)
            {
                Console.WriteLine("p = {0}", p);
            }
            if (q >= 1)
            {
                Console.WriteLine("q = {0}", q);
            }
            if (r >= 1)
            {
                Console.WriteLine("r = {0}", r);
            }
            if (s >= 1)
            {
                Console.WriteLine("s = {0}", s);
            }
            if (t >= 1)
            {
                Console.WriteLine("t = {0}", t);
            }
            if (u >= 1)
            {
                Console.WriteLine("u = {0}", u);
            }
            if (v >= 1)
            {
                Console.WriteLine("v = {0}", v);
            }
            if (w >= 1)
            {
                Console.WriteLine("w = {0}", w);
            }
            if (x >= 1)
            {
                Console.WriteLine("x = {0}", x);
            }
            if (y >= 1)
            {
                Console.WriteLine("y = {0}", y);
            }
            if (z >= 1)
            {
                Console.WriteLine("z = {0}", z);
            }
            Console.WriteLine();

            Console.Write("Please enter a substring ");
            findString = Console.ReadLine();

            if (findString.Length <= inputString.Length)
            {
                do
                {
                    if (inputString.IndexOf(findString, startingPoint) != -1)
                    {
                        findStringCount++;
                        startingPoint = inputString.IndexOf(findString, startingPoint) + findString.Length;
                    }

                } while (inputString.IndexOf(findString, startingPoint) != -1);
            }
            else
            {
                Console.WriteLine("Substring is too long!");
            }
            Console.WriteLine("The number of times that {0} is found in the text is {1}", findString, findStringCount);

            Console.ReadLine();

        }
    }
} 
```

# oracle - Oracle 表单依赖项

> ID：10708887
> 
> 赞同：0
> 
> 时间：2012-05-22T19:35:36.803
> 
> 标签：oracle, dependency-management

有谁知道任何可以为我提供 oracle 6i 表单的依赖关系图的工具？如果不是工具，那么我可以使用一些技术来分析表单依赖关系，例如特定表单使用的其他表单调用、表或过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T06:57:46.490

一种可能有用的技术是将 .fmb 文件转换为文本文件 .fmt。您可以在 Oracle Forms Builder 中的文件 -> 管理 -> 转换下找到该选项。

生成的 .fmt 文件包含大量可能对您有用或可能没用的文本。

一个例子：

```
TABLE USAGES
  BASE   NGM_DATASET                   SEL INS UPD DEL

REFERENTIAL INTEGRITY RULES
Block DATASETS
  Deletion of NGM_DATASET prevented if NGM_EXPORT_LEVERING records exist
  Foreign key(s): NGM_ELG_FILTERDST_FK
  Deletion of NGM_DATASET causes deletion of NGM_OBJECTSELECTIE
  Foreign key(s): NGM_OSE_DST_FK
  Deletion of NGM_DATASET prevented if NGM_SPATIAL_QUERY records exist
  Foreign key(s): NGM_OSE_DST_FK,NGM_SQY_OSE_FK_1
  Deletion of NGM_DATASET prevented if NGM_SPATIAL_QUERY records exist 
```

也许可以编写一些代码来从中提取您需要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T05:51:59.253

您可以检查两个工具： [ODA 对象依赖关系分析器](http://samtrest.com) ODA 具有表单查看器，用于查看针对 Oracle 数据库对象的表单依赖关系，以及具有表单电源搜索功能的[ORCL 工具箱。](http://www.orcl-toolbox.com/)

# javascript - 检查是否使用 jQuery 检查了复选框，然后将一个类添加到最近的 td

> ID：10708894
> 
> 赞同：0
> 
> 时间：2012-05-22T19:35:58.823
> 
> 标签：javascript, jquery, asp.net, jquery-selectors

我正在使用 ASP.NET，我有一个带有复选框元素的 gridview，我想检查是否选中了复选框，将一个类添加到可以将背景颜色更改为黑色的最接近的 td

我使用它，但它不起作用：

Js（（品尝目的））：

```
 $(document).ready(function () {

    $(":CheckBox").closest('td').addClass("OnSelectTr");
}); 
```

CSS：

```
.OnSelectTr
{
    background-color:Black;
} 
```

ASP.NET 代码：

```
<asp:GridView ID="DossierGV" runat="server" AllowPaging="True" 
                            AllowSorting="True" DataSourceID="DossierPF" AutoGenerateColumns="False" 
                            DataKeyNames="ID_Dossier">
                          <Columns>
                              <asp:TemplateField HeaderText="Choisir">
                                  <EditItemTemplate>
                                      <asp:CheckBox ID="CheckBox1" runat="server" />
                                  </EditItemTemplate>
                                  <ItemTemplate>
                                      <asp:CheckBox ID="CheckBox1" runat="server" />
                                  </ItemTemplate>
                              </asp:TemplateField>
                              <asp:BoundField DataField="ID_Dossier" HeaderText="ID_Dossier" ReadOnly="True" 
                                  SortExpression="ID_Dossier" />
                              <asp:BoundField DataField="ID_Entreprise" HeaderText="ID_Entreprise" 
                                  SortExpression="ID_Entreprise" />
                              <asp:BoundField DataField="Date_Depot" HeaderText="Date_Depot" 
                                  SortExpression="Date_Depot" />
                              <asp:BoundField DataField="Type_Etude" HeaderText="Type_Etude" 
                                  SortExpression="Type_Etude" />
                              <asp:BoundField DataField="Dernier_Type" HeaderText="Dernier_Type" 
                                  SortExpression="Dernier_Type" />
                              <asp:BoundField DataField="Eligibile" HeaderText="Eligibile" 
                                  SortExpression="Eligibile" />
                              <asp:BoundField DataField="Fiche_Information" HeaderText="Fiche_Information" 
                                  SortExpression="Fiche_Information" />
                              <asp:BoundField DataField="Buletin_Adhesion" HeaderText="Buletin_Adhesion" 
                                  SortExpression="Buletin_Adhesion" />
                              <asp:BoundField DataField="Fiche_Renseignment" HeaderText="Fiche_Renseignment" 
                                  SortExpression="Fiche_Renseignment" />
                              <asp:BoundField DataField="Attestation" HeaderText="Attestation" 
                                  SortExpression="Attestation" />
                              <asp:BoundField DataField="ID_Cabinet" HeaderText="ID_Cabinet" 
                                  SortExpression="ID_Cabinet" />
                              <asp:BoundField DataField="Montant_Demander" HeaderText="Montant_Demander" 
                                  SortExpression="Montant_Demander" />
                              <asp:BoundField DataField="Duree" HeaderText="Duree" SortExpression="Duree" />
                              <asp:BoundField DataField="Porcentage_Taux" HeaderText="Porcentage_Taux" 
                                  SortExpression="Porcentage_Taux" />
                              <asp:BoundField DataField="Nom_Giac" HeaderText="Nom_Giac" 
                                  SortExpression="Nom_Giac" />
                          </Columns>
                      </asp:GridView> 
```

导航器中的代码源：

```
<div class="GridViewDiv">

              <div id="Corps_DossierUpdatePanel">
                      <div>

        <table cellspacing="0" rules="all" border="1" id="Corps_DossierGV" style="border-collapse:collapse;">

            <tr>
                <th scope="col">Choisir</th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$ID_Dossier&#39;)">ID_Dossier</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$ID_Entreprise&#39;)">ID_Entreprise</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Date_Depot&#39;)">Date_Depot</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Type_Etude&#39;)">Type_Etude</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Dernier_Type&#39;)">Dernier_Type</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Eligibile&#39;)">Eligibile</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Fiche_Information&#39;)">Fiche_Information</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Buletin_Adhesion&#39;)">Buletin_Adhesion</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Fiche_Renseignment&#39;)">Fiche_Renseignment</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Attestation&#39;)">Attestation</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$ID_Cabinet&#39;)">ID_Cabinet</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Montant_Demander&#39;)">Montant_Demander</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Duree&#39;)">Duree</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Porcentage_Taux&#39;)">Porcentage_Taux</a></th><th scope="col"><a href="javascript:__doPostBack(&#39;_ctl0$Corps$DossierGV&#39;,&#39;Sort$Nom_Giac&#39;)">Nom_Giac</a></th>

            </tr><tr>

                <td>

                                      <input id="Corps_DossierGV_CheckBox1_0" type="checkbox" name="_ctl0:Corps:DossierGV:_ctl2:CheckBox1" />

                                  </td><td>3</td><td>4</td><td>10/12/2011 00:00:00</td><td>DS</td><td>IN</td><td>oui</td><td>oui</td><td>oui</td><td>oui</td><td>oui</td><td>1</td><td>1000,00</td><td>10</td><td>70</td><td>GIAC1-IMME</td>

            </tr>

        </table>

    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:55:25.240

由于您已指定应将类添加到整行，因此您可以尝试以下操作：

```
$(document).ready(function(){
    $(':checkbox').on('change', function(){
        if ($(this).attr('checked'))
            $(this).parents('tr').addClass('OnSelectTr');
        else
            $(this).parents('tr').removeClass('OnSelectTr');
    });
});​ 
```

***[JSFiddle](http://jsfiddle.net/J65ap/)***

每当复选框的值发生更改时，它将绑定要调用的函数，根据选中的值添加或删除其父 tr 的类。

请注意，`.on`仅在 JQuery 1.7+ 中受支持，对于旧版本，请替换`.on`为`.live`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:41:22.660

我看不到您在哪里调用该 JS，但我感觉选择器不太正确。我会将其添加为复选框上的 onchange 事件，然后将选择器更改为：

```
$(this).closest('td').addClass("OnSelectTr"); 
```

您可能还想将 addClass 更改为 toggleClass 因为这也将处理取消选中。

编辑好试试这个初始化：

```
$(document).ready(function () {
     $("checkbox").change(function () { $(this).closest('td').addClass("OnSelectTr"); });
}); 
```

# android - 使用 HTTPClient 和 JSON Titanium Android 模拟器处理远程数据时出错

> ID：10708895
> 
> 赞同：0
> 
> 时间：2012-05-22T19:35:59.210
> 
> 标签：android, titanium

我正在尝试运行 Titanium Appcelerator 教程：[https ://wiki.appcelerator.org/display/guides/Handling+Remote+Data+with+HTTPClient+and+JSON](https://wiki.appcelerator.org/display/guides/Handling+Remote+Data+with+HTTPClient+and+JSON)

但是 HTTP 请求不起作用，这是跟踪错误：

```
I/TiAnalyticsSvc(  289): (Thread-14) [289,25871] Sending 10 analytics events.
E/TiAnalyticsSvc(  289): (Thread-14) [20264,46135] Error posting events: api.appcelerator.net
E/TiAnalyticsSvc(  289): java.net.UnknownHostException: api.appcelerator.net
E/TiAnalyticsSvc(  289):    at java.net.InetAddress.lookupHostByName(InetAddress.java:513)
E/TiAnalyticsSvc(  289):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:278)
E/TiAnalyticsSvc(  289):    at java.net.InetAddress.getAllByName(InetAddress.java:242) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:40:33.517

错误是说“api.appcelerator.net”是未知主机。我查看了链接，看不到对这个 URL 的引用。

该示例使用：“https://www.appcelerator.com”；

第二个代码片段使用：“https://raw.github.com/appcelerator/Documentation-Examples/master/HTTPClient/data/json.txt”；

这也有效。如果您在其他页面上看到该 URL，那么这显然是一个错误，因为它无效，可能是旧的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:45:26.527

这是因为您正在尝试使用`api.appcelerator.net`并且不存在。本教程使用`https://www.appcelerator.com`

# haskell - 遍历列表并删除haskell中的元素

> ID：10708898
> 
> 赞同：0
> 
> 时间：2012-05-22T19:36:08.933
> 
> 标签：haskell

我需要编写一个函数，它接受一个列表并返回一个新列表。如果列表尾部有较小的元素，则通过删除元素创建一个新列表。例如： `minimum [3, 2, 5, 2, 5]`应该返回`[2,2,5]`

```
minimum (x : xs)
   | null xs
      = []
   | otherwise
      = let
         minelem (x : xs) n
            =
               if x < head(xs)
                  then drop n (x : xs) --how to go to the end of the list here? 
                  else --and here?
      in minimum (x : xs) 1

minimum _
   = [] 
```

这是家庭作业的一部分。请帮助完成此功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T20:23:19.277

我留下了一些细节供你填写。

```
minimum' []       = []                     -- base case
minimum' (x : xs) = case minimum' xs of    -- recursive case
    []       -> ...
    (y : ys) -> ...                        -- clue: none of the ys are smaller than y 
```

# ruby-on-rails - Bootstrap-sass > ie_hex_str 在资产预编译期间未解释

> ID：10708900
> 
> 赞同：0
> 
> 时间：2012-05-22T19:36:19.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, twitter-bootstrap, rails-3.1

我遇到了一个非常奇怪的问题：

我正在与：

*   导轨 3.1.1
*   Bootstrap-sass 1.4.4（还没来得及升级到 2.0）

以前的 bootstrap-sass 1.4.0 中的一个已知问题是[此处](https://github.com/thomas-mcdonald/bootstrap-sass/issues/14)描述的与 IE 渐变显示相关的问题。通过 ie_hex_str 函数和 IE 的特定过滤器的介绍（据我了解），这在 1.4.3 中得到了修复，例如：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#{ie_hex_str($startColor)}', endColorstr='#{ie_hex_str($endColor)}', GradientType=0); 
```

[这里](http://pinds.com/2011/11/30/fixing-ie-gradients-with-rails-3-1-and-scss/)给出了一些细节。

我仍然有问题，我的问题是在资产预编译后我得到类似的东西：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='ie_hex_str(#FFFFFE)', endColorstr='ie_hex_str(#E6E6E6)', GradientType=0); 
```

那就是编译资产时没有解释 ie_hex_str。我没有接触任何 bootstrap-sass 代码，所以我不明白发生了什么......

任何的想法 ？

**更新 ：**

“有趣”的事情是我有 2 个应用程序使用相同版本的 rails 和 bootstrap-sass 并且做几乎相同的事情并且它们的反应方式不同。一方面，ie_hex_str 被正确解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:33:53.507

我不知道发生了什么事。似乎 bootstrap-sass 的 sass mixins 中的函数在资产预编译期间没有得到解释。

由于我不知道为什么，我使用了一种解决方法：我覆盖了我正在使用的定义，例如 btn ：

```
.btn {
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#FFFFFFFE, endColorstr=#FFE6E6E6, GradientType=0);

  .primary {
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#FF049CDB, endColorstr=#FF0064CD, GradientType=0);
  }
} 
```

使用我需要的颜色。至少它运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:50:22.200

该问题似乎是由application.rb (Rails 3.1) 中的资产管道**initialize_on_precompile设置引起的：**

```
config.assets.initialize_on_precompile = false 
```

当我们在 application.rb 中包含这一行时，出现了“ie_hex_str”预编译问题。删除/评论解决了这个问题。

*   导轨 3.1.3
*   引导 sass 1.4.4

# android - 如何在滚动视图中关注线性布局的最后一个元素？

> ID：10708901
> 
> 赞同：0
> 
> 时间：2012-05-22T19:36:19.847
> 
> 标签：android, android-layout

我在 xml 中创建了一个滚动视图..我将滚动视图的高度设置为包装内容...我以编程方式向这个滚动视图添加一个线性布局我的问题是当我们向我想要的线性布局添加更多内容时聚焦滚动视图中的最后一个元素？

这是我的代码..

```
<ScrollView
        android:id="@+id/ScrollView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:background="#ffffff"
        android:fillViewport="true"
        android:scrollbarAlwaysDrawVerticalTrack="true"
        android:scrollbars="vertical" >

        <LinearLayout
            android:id="@+id/layoutMessage"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/linearLayout1"
            android:layout_weight="1"
            android:background="#ffffff"
            android:orientation="vertical"
             >
        </LinearLayout>

    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T12:42:17.353

在线性布局中添加行后，只需使用这行代码即可享受：

```
yourScrollView.fullScroll(ScrollView.FOCUS_DOWN); 
```

你也可以使用这个：

```
yourScrollView.postDelayed(new Runnable() {
    @Override
    public void run() {
        scroll.fullScroll(ScrollView.FOCUS_DOWN);
    }
}, 600); 
```

# javascript - 元素如何仅在滚动时固定在页面顶部？

> ID：10708903
> 
> 赞同：1
> 
> 时间：2012-05-22T19:36:28.740
> 
> 标签：javascript, jquery, css, html, parallax

[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)

左侧的侧边栏最初打印在页面下方，但是当您滚动它时，它会向上移动到顶部，然后停留而不是消失在视口顶部之外。我已经看到很多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:38:31.003

当页面的滚动顶部大于您要滚动的 div 的顶部位置时，给该 div 一个固定位置，以便它跟随用户向下滚动页面。

例子：

在这里，我对顶部位置进行了硬编码，因为它在我的用例中永远不会改变。

```
var $window = $(window), $menu = $("#menu");
$window.bind('scroll', function() {
    var pos = +$window.scrollTop();
    if (pos > 284) {
        $menu.addClass("fixed");
    }
    else {
        $menu.removeClass("fixed");
    }
}).trigger("scroll");​ 
```

其中 fixed 是一个将位置设置为固定且顶部为 0 的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:41:56.903

您可能想看看[sticky.js](http://labs.anthonygarand.com/sticky/) jQuery 插件。如果您不需要它太花哨，它可以很好地处理这些事情。

其背后的原理是检查元素容器中的滚动。一旦达到某个滚动级别，它就会被*修复。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:47:17.693

使用 jQuery，您可以在文档中添加一个滚动侦听器：

```
$(document).scroll(function() {

}); 
```

在该函数中，您检查文档的 scrollHeight 是否大于元素的 y 位置：

```
if($(document).scrollTop() < $('.sidebar').offset().top) {
    // here you change the css attributes position to fixed and top to 0
    $('.sidebar').css('position', 'fixed').css('top', 0);
} else {
    // change the position of the element to relative (default)
    $('.sidebar').css('position', 'relative');
} 
```

这几乎可以工作，但是因为您总是检查固定元素的位置，所以 y 位置始终为 0。要使其工作，您只需保存默认的 y 位置。这是我也在使用的代码：

```
var initial_y = $('.sidebar').offset().top;

$(document).scroll(function() {
    $e = $('.sidebar');
    if(initial_y - $(document).scrollTop() <= 0) {
        $e.css('position', 'fixed').css('top', 0);
    } else {
         $e.css('position', 'relative');
    }
}); 
```

# javascript - 输入焦点字段，然后在页面加载时添加类

> ID：10708911
> 
> 赞同：0
> 
> 时间：2012-05-22T19:37:12.247
> 
> 标签：javascript, jquery, load, addclass

好的，这就是我有一个带有 .cf-se-input 类的输入字段。我希望该字段尽快以 jquery 为重点，并准备好文档。此外，如果当用户单击输入字段或通过 jquery 焦点时该字段成为焦点，我想将类添加到 ID 为#searchput 的 div。这是整顿。

页面加载 => .cf-se-input 成为焦点 =>

.cf-se-input 成为焦点 下一个代码将触发 => 如果 .cf-se-input 在用户单击字段或 jquery 自动将其集中在页面加载 addClass .cfse_a 到 #searchput 时聚焦。

走得更远

这是我的搜索框

```
<div id="searchput"> <input type="textarea" class="cf-se-input" /> </div> 
```

我对 .cfse_a 进行了样式设置，因此该类的任何内容都有蓝色边框。在我的情况下，它不是带有蓝色边框的输入字段，我希望 searchput 的 div 具有蓝色边框，但仅当输入字段被聚焦时。

现在有两种方法可以通过 jquery 或手动聚焦字段。我希望两者都被覆盖。因此，如果用户单击输入并且它变得专注，我仍然想将类添加到#searchput。此外，如果在页面加载 jquery 强制输入字段集中，我仍然希望 #searchput 在其上添加类 .cfse_a。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:48:31.220

您需要使用该`$.focus()`方法。请参阅文档：[http](http://api.jquery.com/focus/) ://api.jquery.com/focus/ 。

您可以调用`$('.cf-se-input').focus()`以使焦点移动到您的文本区域。

当文本区域聚焦时，您可以调用`$('.cf-se-input').focus(function() { alert('focused!'); });`from`$(document).ready`以执行一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-22T07:00:05.090

让用户专注于突出显示最简单的方法是只使用 CSS

```
.inputElement:focus {
  box-shadow: 0 0 5px #EC8937;
  padding: 3px 0px 3px 3px;
  margin: 5px 1px 3px 0px;
  border: 1px solid #EC8937;
} 
```

如果您可以在 Jquery 文档准备好时向元素添加另一个类，您可以在启动时突出显示输入

但请确保您有办法在不再需要焦点或用户单击其他内容时删除该类

# c# - 如何在客户端接受 SoapException

> ID：10708915
> 
> 赞同：1
> 
> 时间：2012-05-22T19:37:29.190
> 
> 标签：c#, winforms, web-services, asmx, soapexception

我收到了可怕的“客户端发现响应内容类型为“text/html”但预期为“test/xml”错误，但经过一番谷歌搜索后，我发现[了这篇](http://www.codinghorror.com/blog/2004/08/throwing-better-soap-exceptions.html)关于如何返回 SoapException 的帖子。

所以我继续并实现了它，但现在我仍然遇到同样的错误。是否需要在客户端进行更改才能接受 SoapException（我不这么认为，一切都只是从 Exception 继承，对吗？）

为什么我仍然在客户端收到可怕的响应？

```
 [WebMethod]
    [SoapHeader("authenticationHeader")]
    [WebServiceAuthentication(AuthenticationRequired = false)]
    public DataSet GetConversionErrors()
    {
        try
        {
            return Components.PWD.GetConversionErrors();
        }
        catch (Exception ex)
        {
            PublishingManager.Publish(ex, HttpContext.Current.User.Identity.Name);
            throw Components.SoapException.GenerateSoapException(ex, Context);
        }
    } 
```

编辑：我知道这个 catch 块中的异常正是我需要看到的，但我仍然在客户端收到 System.InvalidOperationException。

Edit2：如果有帮助/很重要，我将通过 WebReference（调用 *.asmx 文件）连接到 Web 服务。

Edit3：这是写入我们的异常日志服务器端的内容（在 PublishingManager.Publish() 调用中）。我的想法是这应该是返回给客户的东西......

```
Exception Details:
Exception Type: System.Exception
Message: Test the text/html text/xml message. 
Method: PWD.Components.PWD.GetConversionErrors 
Username: xxxxxx Created 5/22/2012 4:20:53 PM 
Application: xxxx Application Identity: NT AUTHORITY\IUSR 
Source: xxxx Severity 2 
Machine: xxxxxxxxx IP Address 127.0.0.1 
AppDomain /LM/W3SVC/1/ROOT-1-129821937733610609 
Stack Trace    at PWD.Components.PWD.GetConversionErrors() in C:\Vault\Development-New\Web\Main_Logging\PWD\Components\PWD.cs:line 73 
   at PWD.PWD.GetConversionErrors() in C:\Vault\Development-New\Web\Main_Logging\PWD\PWD.asmx.cs:line 44 
Additional Information:
  +System.Exception: 
    Message: Test the text/html text/xml message. 
    Data: System.Collections.ListDictionaryInternal 
    InnerException:  
    TargetSite: System.Data.DataSet GetConversionErrors() 
    StackTrace:    at PWD.Components.PWD.GetConversionErrors() in C:\Vault\Development-New\Web\Main_Logging\PWD\Components\PWD.cs:line 73 
   at PWD.PWD.GetConversionErrors() in C:\Vault\Development-New\Web\Main_Logging\PWD\PWD.asmx.cs:line 44 
    HelpLink:  
    Source: xxxx 
     UserName: xxxxxxx 
     TypeName: PublishingManager 
     MachineName: xxxxxxxxx 
     TimeStamp: 5/22/2012 4:20:54 PM 
     FullName: Services.Publishing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=null 
     AppDomainName: /LM/W3SVC/1/ROOT-1-129821937733610609 
     ThreadIdentity:  
     WindowsIdentity: NT AUTHORITY\IUSR 
     Severity: 2 
     MachineIPAddress: 127.0.0.1 
```

Edit3：只是想抛出这个额外的代码块，以便人们看到我是如何测试这些异常的（也许这是错误的测试方式......）。在我的第一个代码块中，我在 try 块中调用了“return Components.PWD.GetConversionErrors();”，这是该方法：

```
 public static DataSet GetConversionErrors()
    {
        DB db = new DB();

        try
        {
            //return db.ExecuteDataset(Configuration.GenericConfig.AppConnectionString, CommandType.Text, spGetConversionErrors);
            throw new Exception("Test the text/html text/xml message.");
        }
        catch
        {
            throw;
        }
    } 
```

正如你所看到的，我已经注释掉了实际的调用，只是加入了我自己的行，每次都会抛出异常以进行测试......

Edit4：@gbvb 这是新方法：

```
 [WebMethod]
    [SoapHeader("authenticationHeader")]
    [WebServiceAuthentication(AuthenticationRequired = false)]
    public DataSet GetConversionErrors()
    {
        try
        {
            return Components.PWD.GetConversionErrors();
        }
        catch (Exception ex)
        {
            //PublishingManager.Publish(ex, HttpContext.Current.User.Identity.Name);
            //throw Components.SoapException.GenerateSoapException(ex, Context);

            System.Xml.XmlDocument xmlDoc = new System.Xml.XmlDocument();
            System.Xml.XmlNode detailNode = xmlDoc.CreateNode(System.Xml.XmlNodeType.Element, System.Web.Services.Protocols.SoapException.DetailElementName.Name, System.Web.Services.Protocols.SoapException.DetailElementName.Namespace);
            detailNode.InnerText = ex.ToString();

            throw new System.Web.Services.Protocols.SoapException(ex.Message, System.Web.Services.Protocols.SoapException.ClientFaultCode, System.Web.HttpContext.Current.Request.Url.AbsoluteUri, detailNode, ex.InnerException);
        }
    } 
```

Edit5：Fiddler2 看到了什么：

```
HTTP/1.1 500 Internal Server Error
Cache-Control: private
Content-Type: text/html
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Wed, 23 May 2012 19:25:56 GMT
Content-Length: 1208

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<title>500 - Internal server error.</title>
<style type="text/css">
<!--
body{margin:0;font-size:.7em;font-family:Verdana, Arial, Helvetica, sans-serif;background:#EEEEEE;}
fieldset{padding:0 15px 10px 15px;} 
h1{font-size:2.4em;margin:0;color:#FFF;}
h2{font-size:1.7em;margin:0;color:#CC0000;} 
h3{font-size:1.2em;margin:10px 0 0 0;color:#000000;} 
#header{width:96%;margin:0 0 0 0;padding:6px 2% 6px 2%;font-family:"trebuchet MS", Verdana, sans-serif;color:#FFF;
background-color:#555555;}
#content{margin:0 0 0 2%;position:relative;}
.content-container{background:#FFF;width:96%;margin-top:8px;padding:10px;position:relative;}
-->
</style>
</head>
<body>
<div id="header"><h1>Server Error</h1></div>
<div id="content">
 <div class="content-container"><fieldset>
  <h2>500 - Internal server error.</h2>
  <h3>There is a problem with the resource you are looking for, and it cannot be displayed.</h3>
 </fieldset></div>
</div>
</body>
</html> 
```

如果有人知道很好地格式化本节，请这样做:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T21:20:54.843

所以，我得到了它的工作。这是我发现的：

在 IIS 中查看我网站的属性，然后选择“模块”时，有一个名为“CustomErrorModule”的条目正在尝试处理网站/Web 服务引发的错误。

解决方法是删除该条目“CustomErrorModule”，或从以下位置更新我的配置文件：

```
<httpErrors errorMode="Custom" existingResponse="Replace"> 
```

到：

```
<httpErrors errorMode="Custom" existingResponse="Auto"> 
```

感谢大家的帮助，它引导我朝着正确的方向前进。（顺便说一句，我正在更新配置文件，所以我不必弄乱模块的东西）

另外，[这里有一个](http://www.iis.net/ConfigReference/system.webServer/httpErrors)解释这种情况的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T13:06:02.017

只是为了咯咯笑，您可以尝试使用 SoapException.ClientFaultCode 作为该调用的类型显式抛出 new SoapException() 吗？显然，您在上面显示的代码中有几层可能会失败，而且很容易搞砸（相信我，我知道 :)）。并且不要调用其他方法，例如 Publisher.publish.. 这将指向是消息声明（即 ASMX 基础结构）还是您的代码与异常混淆..

# xampp - XAMPP 如何加载 mod_expires

> ID：10708917
> 
> 赞同：13
> 
> 时间：2012-05-22T19:37:37.687
> 
> 标签：xampp, mod-expires

我有 XAMPP，我可以在路径下看到文件 mod_expires.so

...XAMPP\apache\modules\mod_expires.so

但是，我认为该模块未加载有两个原因：

首先：调用 phpinfo() 时未列出 mod_expires

第二，我是否将缓存时间线添加到 .htaccess 文件中我得到 500 服务器错误

（.htaccess 中的缓存代码示例

```
<IfModule mod_expires.c>
# Activate mod_expires for this directory
ExpiresActive on
#HTML documents are good for a week from the time they were changed
ExpiresDefault M604800 
</IfModule> 
```

那么有两个问题：

mod_expires.so 文件的存在是否表明模块已安装？

如果是，我该如何启用或激活？

如果不是，我如何在 XAMPP 中安装和启用？

谢谢，

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-26T05:57:47.030

要加载 expires 模块，假设它是 XAMPP 包的一部分，我们需要从 apache 的配置文件中取消注释 LoadModule。

首先检查 XAMPP 包是否有模块：

转到 C:\XAMPP\apache\module 并查找文件 mod_expires.so

如果您有此文件，请转到文件 C:\XAMPP\apache\conf\httpd.conf 并搜索“mod_expires.so”

你会看见

```
#LoadModule expires_module modules/mod_expires.so 
```

取消注释此行以便拥有

```
LoadModule expires_module modules/mod_expires.so 
```

重置服务器

# sql-server - 文件具有日期列名称

> ID：10708920
> 
> 赞同：1
> 
> 时间：2012-05-22T19:37:44.247
> 
> 标签：sql-server, ssis

我正在尝试导入一个以日期为列名的文件。

例如：

*   订单号
*   全部的
*   2012 年 1 月
*   2012年2月

当我将其导入为：

*   订单号
*   全部的
*   日期

所以，表格看起来像：

```
OrderNumber    Total       Date 
1                5         Jan2012 
1                6         Feb2012 
2                3         Jan 2012 
2                4         Feb2012 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:45:27.157

这称为 PIVOT 转换，并且有一个特定的任务可以做到这一点。

[这](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)是一个 SQL 示例的链接（如果您想了解它是如何工作的）

[这](http://msdn.microsoft.com/en-us/library/ms140308.aspx)是 SSIS PIVOT 转换

和[这里的例子](http://sqlblog.com/blogs/eric_johnson/archive/2010/10/20/the-ssis-pivot-transformation.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T02:23:44.970

这种类型的转换是`UNPIVOT`：

```
select OrderNumber, Total, Date
from yourtable
unpivot
(
    date
    for col in (jan2012, Feb2012)
) unpiv 
```

或者您可以使用`UNION ALL`：

```
select ordernumber, total, jan2012 as date
from yourtable
union all
select ordernumber, total, feb2012 as date
from yourtable 
```

# c# - 从类型创建泛型变量 - 如何？或者使用带有属性 {} 而不是参数 () 的 Activator.CreateInstance()？

> ID：10708925
> 
> 赞同：6
> 
> 时间：2012-05-22T19:38:16.600
> 
> 标签：c#, generics, reflection, types, dynamically-generated

我目前正在使用泛型来制作一些动态方法，例如创建一个对象并用值填充属性。

有没有办法在不知道类型的情况下“动态”创建泛型？例如：

```
List<String> = new List<String>() 
```

是预定义的方式，但是

```
List<(object.GetType())> = new List<(object.GetType()>() 
```

不工作......但可以吗？

这不起作用（是否有类似的方法有效？）

```
 public T CreateObject<T>(Hashtable values)
    {
        // If it has parameterless constructor (I check this beforehand)
        T obj = (T)Activator.CreateInstance(typeof(T));

        foreach (System.Reflection.PropertyInfo p in typeof(T).GetProperties())
        {
            // Specifically this doesn't work
            var propertyValue = (p.PropertyType)values[p.Name];
            // Should work if T2 is generic
            // var propertyValue = (T2)values[p.Name];

            obj.GetType().GetProperty(p.Name).SetValue(obj, propertyValue, null);
        }
    } 
```

所以，简而言之：如何在不使用泛型的情况下获取“类型”并从中创建一个对象？到目前为止，我只在方法中使用了泛型，但是是否可以在变量上使用相同的方式？我必须在方法之前定义一个通用（T），所以我可以在“创建”变量之前对变量执行相同的操作吗？

...或如何使用“激活器”创建具有属性而不是参数的对象。就像你在这里做的那样：

// 带参数值

```
Test t = new Test("Argument1", Argument2); 
```

// 有属性

```
Test t = new Test { Argument1 = "Hello", Argument2 = 123 }; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T19:44:46.747

您可以使用`MakeGenericType`：

```
Type openListType = typeof(List<>);
Type genericListType = openListType.MakeGenericType(obj.GetType());
object instance = Activator.CreateInstance(genericListType); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T19:44:42.747

您可以使用[MakeGenericType](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)方法获取特定类型参数的泛型类型：

```
var myObjListType = typeof(List<>).MakeGenericType(myObject.GetType());
var myObj = Activator.CreateInstance(myObjListType);
// MyObj will be an Object variable whose instance is a List<type of myObject> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:41:46.367

当您使用对象初始化器时，它只是使用默认构造函数（无参数），然后在构造对象后设置各个属性。

上面的代码很接近——但`var`在这里不起作用，因为它只是一个编译时类型推断。由于您已经在使用反射，您可以使用`System.Object`：

```
object propertyValue = values[p.Name]; 
```

调用将`SetValue`与`System.Object`.

# c# - 将压缩文件保存到同一目录

> ID：10708930
> 
> 赞同：3
> 
> 时间：2012-05-22T19:38:32.437
> 
> 标签：c#, zip, permission-denied, dotnetzip

我有一个问题，我是 C# 新手，第一次使用路径 :(

我正在使用 DotNetZip 库来压缩我的文件夹...当我尝试保存它时，它会尝试将其保存到 programfiles/iis 并给我一个错误，说没有权限将其保存到该位置.. 我该怎么做才能保存它到同一个目录，有人可以帮忙:(

我正在做类似的事情

```
using (ZipFile zip = new ZipFile())
{
    zip.AddDirectory(Mypath);
    zip.Save("zippedfolder.zip");
} 
```

我知道我的问题非常简单直接，但我不知道如何使用它..有人可以帮助我吗？我错过了什么吗？

PS：如果我的问题不清楚，请告诉我，我可以再次解释

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:41:52.577

将其保存到 Mypath/zippedfolder.zip：

```
zip.Save(Path.Combine(Mypath, "zippedfolder.zip")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:42:35.070

我假设这是 ASP？您需要在 Web 根目录中创建一个文件夹，`Server.MapPath("~/FolderName")`用于获取物理路径，附加名称/和/或您想要使用的路径，然后保存。

请注意，您的应用程序在特定身份下运行（通常也是运行 IIS 应用程序池的身份），因此该帐户需要具有写入目录的权限。

# haskell - Haskell 仅将函数箭头应用于结果类型？

> ID：10708935
> 
> 赞同：2
> 
> 时间：2012-05-22T19:38:58.680
> 
> 标签：haskell, types, type-kinds

在 Haskell 中是否可以将函数箭头类型构造函数 (->) 仅应用于其右侧类型（例如：(-> a)）以获得类型 * -> * 的类型构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:19:13.580

不，目前是不可能的。Haskell 的类型系统有一些限制，使其在大多数情况下都很有用和方便，这就是这些限制之一。您最好的选择是使用新类型。

```
newtype FuncFlip r a = FuncFlip { unFuncFlip :: a -> r } 
```

新类型只是帮助编译器知道如何进行类型检查和正确执行类型定向调度（类型类）的标记。大概您想翻转类型参数以提供一些类型类实例。这只是意味着，每当您想使用该类型类的功能时，您必须用 装饰任何特定的输入`FuncFlip`，并使用 取消装饰任何特定的输出`unFuncFlip`。这比预期的要冗长一些，但实际上并没有那么糟糕，因为它迫使您明确识别要使用的类型类的哪个实例。

您可以为此创建一个[Newtype](http://hackage.haskell.org/packages/archive/newtype/0.2/doc/html/Control-Newtype.html)实例，这可能对您来说很方便，也可能不方便。

```
instance Newtype (FuncFlip r a) (a -> r) where
  pack = FuncFlip
  unpack = unFuncFlip 
```

进一步阅读：[是否有“类型级组合？”](https://stackoverflow.com/questions/8248217/are-there-type-level-combinators-will-they-exist-in-some-future)

# iphone - 如何在 XCode 4.3 中创建新的视图控制器

> ID：10708936
> 
> 赞同：28
> 
> 时间：2012-05-22T19:39:00.900
> 
> 标签：iphone, xcode

所以我发现在 XCode 4.3 中，要创建一个新的 ViewController，我必须做 New > Objective-C Class，然后是 UIViewController 的子类。但是，为什么 xib 复选框是灰色的？如何使用 xib 创建新的视图控制器？

![在此处输入图像描述](../Images/4674dc0fcf19e0a635ffda23e629129e.png)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-22T19:59:38.110

看起来您正在尝试将 OS X Objective-C 类添加到 iOS 项目

![在此处输入图像描述](../Images/2288ea154a9e38c36cf9fa601cbbad11.png)

产生这个..

![在此处输入图像描述](../Images/65987b545ce221f4f3eb64c798b0b8d6.png)

而是像这样添加新文件..

![在此处输入图像描述](../Images/dad875203e5d12864b63b0875b32481a.png)

产生这个..

![在此处输入图像描述](../Images/b215fb62411a46dd9475c9441f3cacc1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:56:50.000

我不知道为什么 xib 框是灰色的（对我来说不会发生），但是您总是可以转到新文件并从那里创建一个 nib 并将其类设置为您`UIViewController`在界面生成器中的子类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T19:57:02.293

这是一个bug，只要在combo的**Subclass中**再次选择UIViewController ，它就会再次启用。

当我取消创建一次并再次打开对话框时发生在我身上。

# javascript - 如何存储一个div数组

> ID：10708944
> 
> 赞同：0
> 
> 时间：2012-05-22T19:39:22.233
> 
> 标签：javascript, html, css

我在表格中有单元格，我想在单击时跟踪任何选定的单元格。我如何在 JavaScript 中处理这个问题？我不想使用 jQuery-ui 来处理选择，因为我也在使用拖动，这会导致冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:46:04.763

如果你想用没有 id 的 jquery 存储单元格：

```
var list;
$('td.cell').click(function(){

    list.push($(this));

}); 
```

或者只是 id：

```
var list;
$('td.cell').click(function(){

    list.push($(this).attr('id'));

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T19:43:09.837

您可以只添加一个类，调用`selected`已选择的每一行/单元格：`$("td").on("click", function(e) { $(e.currentTarget).addClass("selected") })`

之后，它只是一个简单的 jQuery 选择器查询来获取选定单元格的列表：`$(".selected")`

# mysql - EC2 服务器，一个微型实例就够了吗？

> ID：10708949
> 
> 赞同：2
> 
> 时间：2012-05-22T19:39:42.567
> 
> 标签：mysql, amazon-ec2, amazon-web-services, instance

我一直在开发一个网站，该网站将每小时将约 1200 万行代码（约 1GB/数据）导入 mySQL 数据库。在查看了不同的 VPS 和亚马逊 ec2 之后，我正在考虑采用最具成本效益的解决方案。

至于网站的访问者，每月的页面浏览量应该只有 300-600k 左右（最大 15GB 的带宽），在一天中均匀分布。

当我导入数据时，我使用“IN FILE”，它一次导入 ~200-350k 行，只需要 ~1-3 秒。导入通过 Cron Job 运行，每分钟运行 1 次（每天约 1400 次）。

拥有 VPS 或使用 Amazon EC2 会更好吗？如果我使用 Amazon EC2，CPU 峰值对于微型甚至小型（我是否需要高 CPU 中型实例）来说是否会太多？

如果有人可以分享一些关于 mySQL 在这 1-3 秒内实际拉入多少 CPU 或 CPU 时间允许多少微实例的见解。

如果我选择 VPS 路线，我将从[http://x10vps.com/self-managed-vps.php](http://x10vps.com/self-managed-vps.php)获取 S1 包，并在需要时升级到 S3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T20:58:53.767

如果不了解您正在加载的数据的详细信息，很难对此多说。MySQL是否必须更新表中的索引？一切都已经正确分类了吗？有多少列，您是否在`LOAD DATA INFILE`语句中执行任何 CPU 密集型操作（例如替换部分字符串）？是在一段时间后删除旧数据，还是应该在应用程序的整个生命周期内保留所有数据？

话虽如此，听起来单个 Micro 实例可能很难处理这个问题。如果您使用大量 EBS 存储备份实例（可能在 RAID 配置中），则导入数据应该没问题，但如果该单个实例还负责在如此大的数据集上运行用户查询，那可能不会运行非常顺利。当导入脚本运行时，充其量您最终会延迟几秒钟的用户请求。根据您的应用程序，这可能会或可能不会被接受。

如果您要对数据运行昂贵的查询，我现在可以说，这在单个 Micro 实例上效果不佳：) 您可以扩展到更大的实例或根据您的需要，您也可以想考虑使用 SimpleDB 或类似的 NoSQL 解决方案（尽管这会在您的导入脚本中占用更多代码，因为您必须对每批最多 25 个项目进行批量放置）。

但这些只是一些一般性的想法。AWS 实际上为新用户提供了免费使用套餐，让您可以连续运行一个 EC2 Micro 实例一整年而无需支付一分钱，那么为什么不注册一个帐户并运行自己的测试呢？更多细节[在这里](http://aws.amazon.com/free/)。[这里](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/concepts_micro_instances.html)有一些关于微实例如何工作以及它们适合哪些应用程序的更一般的信息。

# scala - Scala 抽象类型边界交叉引用

> ID：10708950
> 
> 赞同：2
> 
> 时间：2012-05-22T19:39:42.643
> 
> 标签：scala, type-bounds

我有两个抽象类，它们将相互引用。我如何/可以键入绑定类型成员，以便派生 Hex 类的 SideT 成员中的 HexT 类型将始终是派生 Hex 类？所以对于派生类 HexA 保证： HexA#SideT#HexT = HexA

同样，所有派生侧类的 HexT 成员中的 SideT 类型将是派生侧类： SideB#HexT#SideT = SideB

我将 Scala 用于 Eclipse 2.1.0.M1 和 Eclipse 3.7.2 所有类都在单独的文件中。以下编译正常，但不能保证我想要什么：

```
abstract class Hex { type SideT <: Side {type HexT <= Hex } }
abstract class Side { type HexT <: Hex {type SideT <= side } }
class HexC() extends Hex() { type SideT = SideC }
class SideC extends Side { type HexT = HexC } 
```

但以下内容不会在派生实现中编译：

```
abstract class Hex{type SideT <: Side {type HexT = this.type}}
abstract class Side{type HexT <: Hex {type SideT = this.type}}
class HexC() extends Hex(){
  type SideT = SideC //This won't compile
}
class SideC extends Side {
  type HexT = HexC //this won't compile
} 
```

它是否正确？这应该编译吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:20:03.500

这个怎么样？

```
abstract class Hex {
  type SideT <: Side
}

abstract class Side {
  type HexT <: Hex
}

class HexC extends Hex {
  type SideT = SideC
}

class SideC extends Side {
  type HexT = HexC
}

val evidence1 = implicitly[SideC#HexT =:= HexC]
val evidence2 = implicitly[SideC#HexT#SideT =:= SideC] 
```

或者具有域的封装特征：

```
trait abstractDomain {
  type SideT <: Side
  type HexT <: Hex

  abstract class Hex
  abstract class Side
}

object domain extends abstractDomain {
  type SideT = SideC
  type HexT = HexC

  class HexC extends Hex
  class SideC extends Side
} 
```

或使用类型参数：

```
abstract class Hex[HexT <: Hex[HexT, SideT], SideT <: Side[HexT, SideT]]
abstract class Side[HexT <: Hex[HexT, SideT], SideT <: Side[HexT, SideT]]

class HexC extends Hex[HexC, SideC]
class SideC extends Side[HexC, SideC] 
```

# javascript - 在 javascript 中使用浮点文字时出现意外结果

> ID：10708953
> 
> 赞同：0
> 
> 时间：2012-05-22T19:39:49.977
> 
> 标签：javascript

看看这段代码

```
var x=2E-7
console.log(x); 
```

当我运行它时，结果将是 2E-7 而不是 20000000

为什么？是错误还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:44:52.310

2E-7 是 2 * 10^-7

又名 0.0000002

2E7 是 2 * 10^7

又名 20000000

# c# - 如何从 Web 服务方法代码中获取 WS URL

> ID：10708954
> 
> 赞同：3
> 
> 时间：2012-05-22T19:40:21.250
> 
> 标签：c#, wcf, web-services, url

我从另一个团队继承了在 .net 框架 3.5 上开发的 WCF Web 服务。安装在沙盒上时，WS URL 如下所示：

URL：https://< *EnvironmentName* >/fr/webservices/< *someWebServiceName* >.svc

我被要求在 WS 执行（运行时）期间从 Web 服务方法代码中获取该 URL。你有什么主意吗？

我倾向于认为应该有一个可以轻松用于获取 URL 的环境变量。任何贡献将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T19:51:09.413

OperationContext 可用并且应该提供您正在寻找的内容，特别是：

```
OperationContext.Current.EndpointDispatcher.EndpointAddress.Uri 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T19:52:14.550

```
var context = OperationContext.Current;
var requestedUrl =  context.IncomingMessageHeaders.To.PathAndQuery; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T16:37:43.373

[**更新**]：在@MichelZ 提供的帮助下，我已经能够解决我的问题。这是代码：

```
var context = OperationContext.Current;
string requestedUrl = context.EndpointDispatcher.EndpointAddress.Uri.ToString(); 
```

谢谢你们！

# java - 当 FetchType 为 LAZY 时获取嵌套对象

> ID：10708956
> 
> 赞同：1
> 
> 时间：2012-05-22T19:40:26.623
> 
> 标签：java, jpa, persistence, lazy-loading, eclipselink

我正在研究 EclipseLink，出于性能原因，我们在具有 OneToMany 关系的任何地方都设置了 FetchType.lazy。现在，持久性位于具有其他业务逻辑的第 1 层，然后还有一些其他 EAR 使用来自第 1 层的持久性。在获取这些对象时，我遇到了 elipselink 引发 ClassCast 异常的问题。稍微深入研究一下这个问题就会发现，这是因为跨多个耳朵的延迟加载。

现在我在想的是在第 1 层创建一个方法，如果他们想要加载所有对象，即急切加载机制，它将由其他耳朵调用。我想知道如何在 eclipselink 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:39:51.907

EclipseLink 定义了允许强制加载关系的加载组。复制 API 也可用于强制加载。

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup](http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:47:07.143

EAR 不应像您那样相互依赖。您将使用类加载器创建一大堆问题。

如果您有多个交互的服务或 web 应用程序，它们应该在同一个耳朵里。如果不是，则将通用 jar 文件复制到不同的耳朵。

# php - PHP数组格式

> ID：10708957
> 
> 赞同：0
> 
> 时间：2012-05-22T19:40:30.867
> 
> 标签：php, json

我怎样才能得到这种格式：

```
{
"products": [
    {
        "id":            4,
        "link":          "/product.php?id_product=4",
        "quantity":      1,
        "priceByLine":   "$185.00",
        "name":          "Orci hendrer...",
        "price":         "$185.00",
        "idCombination": 0,
        "hasAttributes": false,
        "hasCustomizedDatas": false,

        "customizedDatas":[
                ]

    },  {
        "id":            5,
        "link":          "/product.php?id_product=5",
        "quantity":      1,
        "priceByLine":   "$215.00",
        "name":          "Semper rutru...",
        "price":         "$215.00",
        "idCombination": 0,
        "hasAttributes": false,
        "hasCustomizedDatas": false,

        "customizedDatas":[
                ]

    }],

} 
```

作为一个PHP数组？我试过了

```
$array[] = array('id'=>5, link => 'product.php?id_product=5' ... and so on) 
```

但是当我用 JSON 编码时它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:44:36.507

您只需要以正确的方式嵌套数组，如下例所示。

```
$arr = array( 'products' => array(
  array('id'=>4, link => 'product.php?id_product=4' ),
  array('id'=>5, link => 'product.php?id_product=5' )
  )
); 
```

**编辑**

在您的代码中，初始化对象看起来像这样：

```
$arr = array( 'products' => array() ); 
```

并且每个后续产品都可以像这样添加（例如，在您解析数据库结果的循环中）：

```
$arr['products'][] = array('id'=>5, link => 'product.php?id_product=5' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:44:54.137

```
$data = array(
  'products' => array(
    array('id'=>5, link => 'product.php?id_product=5' ... and so on),
    array('id'=>5, link => 'product.php?id_product=5' ... and so on)
    // repeat once for element.
  )
);
json_encode($data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T20:16:45.083

那是 的输出`json_encode($array)`，其中`$array`嵌套。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-08T10:05:59.917

如果您需要以 JSON 格式返回 AJAX 响应 - 您需要添加标头。

```
<?php 
header("Content-type: application/json");
echo json_encode($array); 
```

否则 - 您可以将数组打印到 JS 全局变量中。

```
<?php
echo '<script>';
echo 'var foo = ' . json_encode($array); . ';';
echo '</script>'; 
```

# php - 生成随机颜色

> ID：10708965
> 
> 赞同：3
> 
> 时间：2012-05-22T19:40:58.300
> 
> 标签：php

我正在使用此代码生成随机颜色（工作正常）：

```
 {
       $r = rand(128,255); 
       $g = rand(128,255); 
       $b = rand(128,255); 
       $color = dechex($r) . dechex($g) . dechex($b);
       return "#".$color;
  } 
```

我只是想知道是否有一种方法/组合可以只生成明亮的颜色？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:13:03.163

您的原始代码无法按预期工作 - 如果生成的数字较低，您可能会得到`#1ffff`（1 是低红色值） - 这是无效的。使用它更稳定：

```
echo "rgb(".$r.",".$g.",".$b.")"; 
```

因为`rgb(123,45,67)`是完全有效的颜色规范。

沿着类似的思路，您可以为 hsl 生成随机数：

```
echo "hsl(".rand(0,359).",100%,50%)"; 
```

这将生成任何色调的完全饱和的正常亮度颜色。但是，请注意，只有最近的浏览器支持 HSL，所以如果浏览器支持是一个问题，你最好选择 RGB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T09:38:28.030

```
function getRandomColor() {
    $rand = array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f');
    $color = '#'.$rand[rand(0,15)].$rand[rand(0,15)].$rand[rand(0,15)].$rand[rand(0,15)].$rand[rand(0,15)].$rand[rand(0,15)];
    return $color;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T20:09:39.040

我使用此代码检测背景颜色是浅色还是深色，然后选择正确的字体颜色，因此字体颜色在随机生成或用户输入的背景颜色上仍然可读/可见：

```
//$hex: #AB12CD
function ColorLuminanceHex($hex=0) {
  $hex = str_replace('#', '', $hex);
  $luminance = 0.3 * hexdec(substr($hex,0,2)) + 0.59 * hexdec(substr($hex,2,2)) + 0.11 * hexdec(substr($hex,4,2));
  return $luminance;
}

$background_color = '#AB12CD';
$luminance = ColorLuminanceHex($background_color);
if($luminance < 128) {
  $color = '#FFFFFF';
}
else {
  $color = '#000000';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-22T16:06:31.670

使用上面 chakroun yesser 的[回答](https://stackoverflow.com/a/16101648/5435780)，我创建了这个函数：

```
function generateRandomColor($count=1){
    if($count > 1){
        $color = array();
        for($i=0; $count > $i; $i++)
            $color[count($color)] = generateRandomColor();
    }else{
        $rand = array_merge(range(0, 9), range('a', 'f'));
        $color = '#'.$rand[rand(0,15)].$rand[rand(0,15)].$rand[rand(0,15)].$rand[rand(0,15)].$rand[rand(0,15)].$rand[rand(0,15)];
    }
    return $color;
} 
```

# perl - 具有多个阻塞观察者的 perl 事件循环？

> ID：10708966
> 
> 赞同：2
> 
> 时间：2012-05-22T19:41:00.283
> 
> 标签：perl, event-handling

我想弄清楚 Perl 中的事件循环？

目前我的程序做这样的事情：

```
 while(my $event = wait_for_event()){
        handle_event($event);
        try_to_do_something();
    } 
```

wait_for_event 阻塞的地方。

我想弄清楚我是否可以使用 EV、AnyEvent(AE) 或其他东西来添加另一个事件观察器。

例如，我希望能够每 2 秒调用一次 try_to_do_something()，但目前我坚持将其放入事件循环中。

另外，我想添加某种形式的与程序的交互，可能通过套接字（另一个观察者）。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T21:07:44.047

事件系统的想法不是编写阻止等待某个特定事件的线性代码，而是设置处理程序以在事件发生时做什么，然后等待这些事件中的任何一个发生。当事件发生时，事件框架通常会分派给这些事件处理程序。然后诀窍是设置处理程序，然后等待它。

EV 和 AnyEvent 都将支持这种事情。还要看的东西是[`POE`](https://metacpan.org/module/POE)和。[`IO::Async`](https://metacpan.org/module/IO::Async)[`Reflex`](https://metacpan.org/module/Reflex)

在这些中的任何一个中，大体的想法都是一样的，但我会举一个`IO::Async`我最了解的例子，主要是因为我写了它。

```
use IO::Async::Loop;
use IO::Async::Timer::Periodic;

my $loop = IO::Async::Loop->new;

$loop->add( IO::Async::Timer::Periodic->new(
    interval => 2,
    on_tick => \&try_to_do_something
)->start );

# Perhaps here you'd add your socket watcher, using an
# IO::Async::Handle or ::Stream or something else

$loop->run; 
```

该`$loop->add`方法将一个通知对象安装到循环中，在这种情况下，它是一个周期性计时器，每 2 秒运行一次指定的函数。在程序的底部，main`$loop->run`方法会在适当的时间分派给事件处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:55:54.620

也许你正在尝试做这样的事情？

```
use AnyEvent;
use AnyEvent::Filesys::Notify;

sub try_to_do_something { say "every two seconds" }
sub handle_event { say $_->path." ".$_->type for @_ }

my $n = AnyEvent::Filesys::Notify->new(
    dirs => ['/tmp'],
    interval => 0.5,
    filter => sub { 1 },
    cb => sub { handle_event(@_) },
);
my $w = AE::timer 0, 2, sub {try_to_do_something};

AnyEvent->condvar->recv; 
```

This snippet with AnyEvent and AnyEvent::Filesys::Notify is just one way to do it. Basically it's almost always the same way, regardless of your framework: Setup your watchers with your callbacks and enter your "mainloop".

# c# - 无法在 Visual C# 2010 Express、Windows 7 中添加 Microsoft.Xna.Framework.Content.Pipeline？

> ID：10708968
> 
> 赞同：1
> 
> 时间：2012-05-22T19:41:12.420
> 
> 标签：c#, xna, pipeline

我在编译代码时无法找到已加载到 Visual C# 2010 Express 中的图像文件。

基于此处的答案： [XNA 中“内容导入器”的缺失选项（尝试导入视频）](https://stackoverflow.com/questions/3862381/missing-option-for-content-importer-in-xna-trying-to-import-video) 我正在尝试添加对 Microsoft.Xna.Framework.Content.Pipeline 的引用，但它不是“添加引用”中可用的选项部分。

因此，此处提到的 Content Importer 和 Content Processor 字段未显示： [xna 4.0 和加载图像失败](https://stackoverflow.com/questions/8871320/xna-4-0-and-loading-images-fails)

每当我尝试将 .jpg、.tga 或 .png 作为纹理加载时，代码就会崩溃。

我在哪里可以找到参考资料，或者有什么办法可以绕过它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T10:22:42.513

一个很晚的答案，但希望有人仍然觉得它有用：

为了能够使用 Microsoft.Xna.Framework.Content.Pipeline，您需要将项目的目标框架设置为`.NET Framework 4`，而不是`.NET Framework 4 Client Profile`默认设置。您可以在项目的属性下执行此操作。

# c++ - 如何正确处理 WS_EX_COMPOSITED？

> ID：10708972
> 
> 赞同：2
> 
> 时间：2012-05-22T19:41:43.843
> 
> 标签：c++, windows, winapi, gdi, doublebuffered

有人可以解释如何创建处理由 WS_EX_COMPOSITED 引起的错误的 WndProc（错误在某些控件上是无穷无尽的 WM_PAINT）？

我用于 WS_EX_COMPOSITED 的所有内容是当我的应用程序窗口被隐藏以便能够对其进行截图时（如果 WS_EX_COMPOSITED 未设置，PrintWindow 失败），我得到截图但 CPU 使用率始终为 99%。

这是我从谷歌找到的信息： [Never ending WM_PAINT loop with ATL CWindowImpl](https://stackoverflow.com/questions/1117511/never-ending-wm-paint-loop-with-atl-cwindowimpl) [http://forums.codeguru.com/showthread.php?t=483719](http://forums.codeguru.com/showthread.php?t=483719)

但并没有给我太多的亮度......我添加到我的 WndProc 的唯一更改如下：

```
if(Msg==WM_PAINT||Msg==WM_NCPAINT||Msg==WM_ERASEBKGND) { return DefWindowProc(hWnd,Msg,wParam,lParam); } 
```

它降低了 CPU 使用率，但不能正确绘制所有控件。

# php - 在javascript中加载php变量

> ID：10708974
> 
> 赞同：1
> 
> 时间：2012-05-22T19:41:47.370
> 
> 标签：php, javascript, jquery

我是新手

如何在javascript中加载变量php？

这是我的脚本（popup.php）

```
<?php $id_user = $this->session->userdata('id'); ?>

<script type="text/javascript">rules: {
        user: {
  required: true,
  number: true,
  range: [1, 8]
}  <script> 
```

示例变量。

`$id_user = 10;`

如何输入一个`id_user`到`range: [1,8]`

所以范围输出是`range: [1,10]`

对不起我的英语不好

太感谢了

BR

法会

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:44:08.067

尝试

```
<script type="text/javascript">

var $uid = <?php echo json_encode($this->session->userdata('id')); ?>;
rules: {
  user: {
  required: true,
  number: true,
  range: [1, $uid]
} 
 <script> 
```

为什么`json_encode`？它将您传递给它的值转换为有效的 JSON - 引用字符串、转义引号和其他特殊字符等。没有它，只要您的回显变量包含简单的字母数字字符串以外的内容，您基本上就会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:44:54.917

你可以`echo`在 php 中使用来在 javascript 中创建变量。我个人会这样处理这种情况：

```
<?php echo "<script>var user_id = ".$this->session->userdata('id').";</script>"; ?>
<script>
  rules: {
    user: {
    required: true,
    number: true,
    range: [1, user_id]
   }
  }  
</script> 
```

# c# - WCF安全实现设计问题

> ID：10708975
> 
> 赞同：4
> 
> 时间：2012-05-22T19:41:47.257
> 
> 标签：c#, .net, wcf, wcf-security

我有创建 ASP.net/WinForms 应用程序的经验，现在我想通过创建一个简单的任务管理器项目来学习 WCF。

提前感谢您阅读传入的文本块。我的问题更多是设计问题，而不是实际的编码问题。

我的目标如下：

*   创建一个 Web 服务（使用 WCF），其目的是管理任务/待办事项列表
*   Web 服务将允许用户注册帐户、创建新的待办事项列表、与其他用户共享待办事项列表等
*   在 Web 服务正常运行并实现所有内容后，我希望能够在其之上放置一个 ASP.NET 网站并将 Web 服务用于后端

目前我有以下内容：

*   1 个托管 Web 服务的控制台应用程序
*   1 个控制台应用程序（客户端）用于调用 Web 服务（我以这种方式测试我的 Web 服务）

Web 服务应用程序具有以下配置文件（希望我粘贴成功）：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="Tasker_Server.Properties.Settings.TaskerConnectionString"
      connectionString="Data Source=PROPHET\SQLEXPRESS;Initial Catalog=Tasker;Persist     Security Info=True;User ID=sa;Password=stf"
  providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.serviceModel>
    <services>
      <service name="Tasker_Server.TaskerService" behaviorConfiguration="TaskerServiceBehavior">
        <host>
          <baseAddresses>
             <add baseAddress="http://localhost:8000/TaskerTest/Service" />
          </baseAddresses>
        </host>
        <endpoint name="login" address="username" binding="wsHttpBinding"
              bindingConfiguration="Binding1"
              contract="Tasker_Server.ITasker" />
        <endpoint name="reg" address="reg" binding="wsHttpBinding"
              bindingConfiguration="Binding2"
              contract="Tasker_Server.Contracts.IRegister" />
      </service>
    </services>
    <bindings>
      <wsHttpBinding>
        <binding name="Binding1" receiveTimeout="00:20:00">
          <security mode="Message">
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
        <binding name="Binding2">
          <security mode="None">
            <transport clientCredentialType="None" />
            <message establishSecurityContext="false" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="TaskerServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom"
                                customUserNamePasswordValidatorType="Tasker_Server.CustomValidator, Tasker_Server" />
            <serviceCertificate findValue="localhost"
                            storeLocation="LocalMachine"
                            storeName="My"
                            x509FindType="FindBySubjectName" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

我像这样启动 Web 服务：

```
ServiceHost selfHost = new ServiceHost(typeof(TaskerService));

try {
    selfHost.Open();
    Console.WriteLine("Service is up... (press <ENTER> to terminate)");
    Console.ReadLine();

    selfHost.Close();
}
catch (CommunicationException ce) {
    Console.WriteLine("Exception: {0}", ce.Message);
    Console.ReadLine();
    selfHost.Abort();
} 
```

目前我只有两份合同：

```
[ServiceContract(Namespace="http://Tasker_Server")]
public interface ITasker {
    [OperationContract]
    string CheckCredentials(string username, string password);
} 
```

和

```
[ServiceContract(Namespace="http://Tasker_Register")]
public interface IRegister {
    [OperationContract]
    string RegisterUser(string username, string password, string email);
} 
```

我试图完成的是以下内容：

1.  提供不安全的端点；客户可以调用它并注册一个帐户。
2.  提供一个安全端点（我使用带有自定义 UserNamePasswordValidator 的 UserName 身份验证），用户可以通过该端点“登录”并调用所有操作。

我的软件中的这两个东西现在都可以工作。我可以通过不安全的端点注册新帐户，并且可以通过在客户端中提供正确的 ClientCredentials 来调用安全端点。

我的问题如下：

1.  据我了解，通过使用 UserName 身份验证，每次客户端调用 Web 服务方法时都会调用我的自定义验证器中的 Validation 方法（这意味着每次都会运行 DB 查询来检查凭据，而不是网站您登录一次，直到您的会话到期）。以这种方式做事有什么根本错误吗？

2.  我想到了另一种可能的方法来管理它（并且以某种方式模拟网站的工作方式）：

    *   仅将安全端点（用户名身份验证）用于类似于“登录”的操作
    *   如果凭据正确，我将创建一个新的 GUID，将其保存在内存中并在用户名和该 guid 之间建立关联。
    *   那么所有操作都不需要用户名身份验证，但会有一个附加参数（GUID）：如果 GUID 在内存中并与用户相关联，则允许该操作
    *   注销操作会破坏内存中的 GUID。
    *   我会假设我可以在此之上使用 SSL，这样 GUID 就不会被明文发送
    *   这是否违背了 Web 服务安全的目的，而我只是想重新发明轮子？

哪种方法会更好？为什么？

**更新：**添加了错误的配置文件。它来自客户端而不是 Web 服务。现在添加了正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:34:17.280

您使用 guid 的方法很好。请参阅其他问题[WCF 票证基础身份验证](https://stackoverflow.com/questions/829254/wcf-ticket-base-authentication)和参考帖子

[WCF 自定义消息头](http://blogs.microsoft.co.il/blogs/bursteg/archive/2006/04/23/141.aspx)

更新：方法比较。

第一种方法的好处是单个操作的无状态/无会话。客户端和服务都不需要记住先前身份验证调用的详细信息。但是，如果同一个客户端进行多次调用，最好记住ticket，而不是每次都记住并发送用户名和密码。如果您担心重复调用数据库，您可以缓存一段时间（例如 30 分钟）用户名和密码（或更好的哈希值），并在进行数据库调用之前比较缓存字典中新请求的详细信息。

第二种方法需要在客户端保持状态（即票证），所以有点复杂。但它更安全，因为您不需要在整个会话期间记住用户名和密码。对于您的场景，我更喜欢票务方法。

顺便说一句，登录后我仍然建议使用https（通常性能损失不是必需的），但它可以防止网络嗅探器窃取票证并使用它代替用户执行一些恶意操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:38:32.450

2是一个合理的想法。它称为窗口身份框架。

与您建议的唯一真正区别是，在联合安全模型中，您的身份验证与应用程序分离。在 WIF 中，您向颁发令牌（您的 GUID）的受信任机构进行身份验证。令牌中加密的是一组声明（允许的操作）。客户端将令牌作为其 WCF 调用的一部分传递，声明被转移到安全原则，突然你的应用程序在没有任何 WCF 知识的情况下执行基于角色的安全性。

WIF 的缺点是它很复杂并且可能需要相当长的时间。

WIF 的优势在于它由安全专家编写。如果您实际上正在构建一个将处理金钱或敏感数据的商业应用程序，那么您应该仅出于这个原因使用 WIF。

这是一篇[较旧的文章](http://msdn.microsoft.com/en-us/magazine/ee335707.aspx)，但很好地激发了这些想法。然后是[MSDN](http://msdn.microsoft.com/en-us/library/ee748475.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T21:40:54.187

你没有在 WCF 中[使用会话来实现你想要的吗？](http://msdn.microsoft.com/en-us/library/ms733040.aspx)

# python - Python将相对变化的有序列表转换为绝对变化

> ID：10708980
> 
> 赞同：0
> 
> 时间：2012-05-22T19:42:26.637
> 
> 标签：python

假设我有一组对象，其中包含：（相对变化，变化时间）：

```
(+1,0) (-1, 1) (+1,3) (+1, 3) (-1, 5) (+1, 9) 
```

现在我想用它们的绝对值替换相对变化，从 0 开始：

```
(1,0) (0, 1) (1,3) (2, 3) (1, 5) (2, 9)
 0+1   0+1-1  0+1-1+1 ... 
```

做这个的最好方式是什么？是否有一个 Python 函数可以让我

*   迭代一个（有序的）对象列表
*   内部存储一个绝对值
*   从每个对象读取变化，更新内部绝对值
*   用绝对值代替相对变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:50:54.597

以下是如何通过列表理解来做到这一点：

```
>>> data = [(+1,0), (-1, 1), (+1,3), (+1, 3), (-1, 5), (+1, 9)]
>>> [(sum(x[0] for x in data[:i+1]), data[i][1]) for i in range(len(data))]
[(1, 0), (0, 1), (1, 3), (2, 3), (1, 5), (2, 9)] 
```

或者稍微更有效（不要求`sum()`每个值）：

```
result = [data[0]]
for change, t in data[1:]:
    result.append((result[-1][0]+change, t)) 
```

由于您说这些是对象，因此您可能需要用属性 get 替换索引，例如`x[0]`in`sum(x[0] for x in data[:i+1])`可能变为`x.change`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:37:23.613

您*可以*通过列表理解来做到这一点，但考虑到您请求的具体条款，这对我来说更像是生成器的工作。这是一个非常通用的解决方案，应该适用于序列和迭代器。它对传递给它的迭代执行等效的 Haskell`scanl`函数，并使用可选的初始值作为最后一个参数。

第一个参数应该是一个函数，它接受两个参数——当前累积状态和序列中的下一项——并返回下一个累积状态。它可能很简单，也可能`operator.add`更复杂。

```
>>> def scan(f, seq, init=None):
...     seq = iter(seq)
...     state = seq.next() if init is None else init
...     yield state
...     for i in seq:
...         state = f(state, i)
...         yield state 
```

累加和（即三角数）：

```
>>> import operator
>>> list(scan(operator.add, range(10)))
[0, 1, 3, 6, 10, 15, 21, 28, 36, 45] 
```

从不同的初始值开始：

```
>>> list(scan(operator.add, range(1, 10), 10))
[10, 11, 13, 16, 20, 25, 31, 38, 46, 55] 
```

适用于您的问题：

```
>>> diffs = [(1, 0), (-1, 1), (1, 3), (1, 3), (-1, 5), (1, 9)]
>>> list(scan(lambda x, y: (x[0] + y[0], y[1]), diffs))
[(1, 0), (0, 1), (1, 3), (2, 3), (1, 5), (2, 9)] 
```

用不同的初始值，只是为了好玩。

```
>>> list(scan(lambda x, y: (x[0] + y[0], y[1]), diffs, (5, -1)))
[(5, -1), (6, 0), (5, 1), (6, 3), (7, 3), (6, 5), (7, 9)] 
```

# php - PDO 函数 setFetchMode

> ID：10708982
> 
> 赞同：0
> 
> 时间：2012-05-22T19:42:26.380
> 
> 标签：php, function, pdo

您好，我试图使用 PDO 实现功能，但出现错误（PDO 的新功能）这是我的代码

```
 function mail_id($mail){
    global $host, $dbname, $user, $pass;
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $STH = $DBH->query("select count(from) from messages where from = '$mail'");
    $STH->setFetchMode(PDO::FETCH_ASSOC);
    $row = $STH->fetch();
    return $row;
} 
```

我想从 FROM 数行，这是我正在尝试的输出

```
$mail=mail_id($userid);
if (0<count($mail['to_viewed'])) {echo "green";} else {echo "gray";} 
```

这是错误

```
Call to a member function setFetchMode() on a non-object 
```

请帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T23:44:01.363

您需要检查[`PDO::query()`](http://www.php.net/manual/en/pdo.query.php). 在（丑陋的）PHP 中有很多返回混合类型值的函数。在`PDO::query()`返回类型为要么[`PDOStatement`](http://www.php.net/manual/en/class.pdostatement.php)或布尔的情况下，尽管文档中的原型说的有所不同：

> **描述：**
> `PDOStatement PDO::query ( string $statement )`
> `...`

看起来它总是返回`PDOStatement`。

> **返回值：**
> PDO::query() 返回一个 PDOStatement 对象，失败时返回 FALSE。

糟糕，并非在所有情况下！因此，您不能保证返回的值是`PDOStatement`.

正确的原型是：

> **描述：**
> `mixed PDO::query ( string $statement )`
> `...`

在您的情况下，查询无效（通过使用像 FROM 这样的保留关键字作为列名），这会导致返回值为 FALSE 的布尔类型。布尔值不是对象，因此您的调用`$STH->setFetchMode()`失败。

根据你的 PDO::ATTR_ERRMODE 你得到

*   一个异常（PDO::ERRMODE_EXCEPTION），所以你不需要检查返回值
*   警告 (PDO::ERRMODE_WARNING)
*   什么都没有（PDO::ERRMODE_SILENT），所以你必须检查返回值，`errorCode()`并且`errorInfo()`

# c# - 对大型软件项目使用数据绑定的明智方法。

> ID：10708983
> 
> 赞同：1
> 
> 时间：2012-05-22T19:42:32.677
> 
> 标签：c#, wpf, xaml, data-binding

我正在研究将几个 WPF 功能添加到超过 1,000,000 行代码库的后勤工作。我正在研究在 XAML 中使用数据绑定和 DataTemplates 来轻松显示各种对象。我能够绑定一个可观察的集合： `points`到一个 ListBox，如果我不使用模板，我可以为列表项提供一个有意义的 toString，这样我就可以到达某个地方。当我想使用模板来显示列表项的各种属性时，问题就出现了。我的理解是它们都必须是 DependencyProperties。`parent`只是一个属性。看起来添加依赖属性相当复杂。您要显示的所有类都必须继承自`DependencyObject`而且您必须为要使用的每个属性设置一堆东西。对于大型代码库而言，这似乎不可行，因为必须为每个属性执行所有这些操作。我想知道在实践中如何使用数据绑定，你真的向所有类添加了大量依赖属性还是有更好的方法？

谢谢！

```
 <ListBox Name="listBox1" 
             ItemsSource="{Binding Source={StaticResource points}}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="Point!"/>
                    <TextBlock Text="{Binding parent}"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:44:28.597

> 当我想使用模板来显示列表项的各种属性时，问题就出现了。我的理解是它们都必须是 DependencyProperties。parent 只是一个属性。看起来添加依赖属性相当复杂。您要显示的所有类都必须从 DependencyObject 继承，并且您必须为要使用的每个属性设置一堆东西。

这不是真的。

您需要使用 Dependency Property*或*让您的类型实现`INotifyPropertyChanged`，但这仅在您希望绑定双向工作时才需要。存在此要求以便 WPF 在属性值更改时收到通知，并且 UI 可以自动更新。但是，如果在显示屏幕时属性值没有变化，则没有要求（除了值是属性，而不是字段）。

如果您只是在对象中显示值，并且它们在显示时不会更改，则标准属性将正常工作。

# sql-server-2008 - 从固定格式的文本文件批量插入忽略行终止符

> ID：10708985
> 
> 赞同：2
> 
> 时间：2012-05-22T19:42:41.423
> 
> 标签：sql-server-2008, tsql, format, bulkinsert

我有很多平面（文本）文件，我想每天将它们导入 SQLSERVER 表中。现在，当我制定程序时，我只想导入一个文件。当然，我可以编写 c# 代码来执行此操作，但我觉得这不是正确的方法，我想使用带有 xml 格式文件的批量插入之类的东西。

我的第一个示例文件看起来像这样（sample.dat）：

```
Q     RR201110010000000002000000000000232000
N     X4201110010000000001500000000000160000 
```

注意：此文件上的十六进制转储显示每一行都以换行符结束 - 不多也不少。

我的 xml 翻译文件如下所示：

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="1" xsi:type="CharFixed" LENGTH="6"/>
  <FIELD ID="2" xsi:type="CharFixed" LENGTH="2"/>
  <FIELD ID="3" xsi:type="CharFixed" LENGTH="8"/>
  <FIELD ID="4" xsi:type="CharFixed" LENGTH="14"/>
  <FIELD ID="5" xsi:type="CharFixed" LENGTH="14"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="1" NAME="c1" xsi:type="SQLNCHAR"/>
  <COLUMN SOURCE="2" NAME="c2" xsi:type="SQLNCHAR"/>
  <COLUMN SOURCE="3" NAME="c3" xsi:type="SQLCHAR"/>
  <COLUMN SOURCE="4" NAME="c4" xsi:type="SQLINT" />
  <COLUMN SOURCE="5" NAME="c5" xsi:type="SQLINT" />
 </ROW>
</BCPFORMAT> 
```

我的查询如下所示：

```
SET LANGUAGE us_english;
GO
SET DATEFORMAT ymd;
go
BULK INSERT 
  PROJ.dbo.Costs
  FROM 'C:\somewhere\test01\SAMPLE.DAT'
  WITH
  (
  DATAFILETYPE ='CHAR',
  FORMATFILE='C:\somewhere\test01\TRANSLATE02.XML',
  ERRORFILE='C:\somewhere\test01\ERRORS.TXT',
  ROWTERMINATOR='\n'
  )
  GO 
```

当我运行这个脚本时，从第 2 行开始出现溢出错误。（也就是说，第 1 行似乎已正确翻译，尽管我在 sql 表中没有看到它。） ERRORS.TXT 的十六进制转储显示第一个错误行（第 2 行）以换行符开头！当然，这会导致第 4 个字段溢出！所以看起来脚本不理解 ROWTERMINATOR。我尝试了 '\n', '\r', '\r\n', '\n\r' 以防万一它没有看到 \r。徒劳无功。

[根据 ROWTERMINATOR 的批量插入 txt 错误，](https://stackoverflow.com/questions/5818440/bulk-insert-txt-error-with-rowterminator)我还尝试了一个稍微不同的 sql 命令

并得到同样的错误。

对我所缺少的有什么想法吗？

根据要求，这是 sample.dat 的一个经过处理的十六进制转储：

```
000000: 41 20 20 20  20 20 XX XX  32 30 31 31  31 30 30 31  Q     RR20111001
000010: 30 30 30 30  30 30 30 30  30 31 35 30  30 30 30 30  0000000001500000
000020: 30 30 30 30  30 30 31 35  30 30 30 30  0A ZZ 20 20  000000150000.N
000030: 20 20 20 XX  XX 32 30 31  31 31 30 30  31 30 30 30     X420111001000
000040: 30 30 30 30  30 30 32 30  30 30 30 30  30 30 30 30  0000002000000000
000050: 30 30 30 32  33 32 30 30  30 0A ZZ 20  20 20 20 20  000232000.Y 
```

请注意，XX 和 ZZ 被屏蔽（不是真实数据）， 0A 是换行符，它是最后一个零（十六进制 30）和开始下一行的 ZZ 字符之间的唯一内容。希望这不会太令人困惑。

我下面的解决方案有效，但是，这里也讨论了这个问题，解决方案对我来说似乎更好（虽然我还没有确认，但我想我会在下一个文件中尝试）。 [批量插入行终止符问题](https://stackoverflow.com/questions/7403560/bulk-insert-rowterminator-issue)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:48:42.160

您必须使用 SSIS“SQL Server 集成服务”将数据从文件转换到数据库。并且您可以在 SQL Server 中执行此转换，以便每天自动转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T16:12:17.650

答案（嗯，至少有一个答案）非常简单。

我刚刚在 XML 中的 FIELDS 列表中添加了一个虚假的一个字符字段。

```
<?xml version="1.0"?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <RECORD>
  <FIELD ID="1" xsi:type="CharFixed" LENGTH="6"/>
  <FIELD ID="2" xsi:type="CharFixed" LENGTH="2"/>
  <FIELD ID="3" xsi:type="CharFixed" LENGTH="8"/>
  <FIELD ID="4" xsi:type="CharFixed" LENGTH="14"/>
  <FIELD ID="5" xsi:type="CharFixed" LENGTH="14"/>
  <FIELD ID="6" xsi:type="CharFixed" LENGTH="1"/>
 </RECORD>
 <ROW>
  <COLUMN SOURCE="1" NAME="c1" xsi:type="SQLNCHAR"/>
  <COLUMN SOURCE="2" NAME="c2" xsi:type="SQLNCHAR"/>
  <COLUMN SOURCE="3" NAME="c3" xsi:type="SQLCHAR"/>
  <COLUMN SOURCE="4" NAME="c4" xsi:type="SQLINT" />
  <COLUMN SOURCE="5" NAME="c5" xsi:type="SQLINT" />
 </ROW>
</BCPFORMAT> 
```

注意我没有写最后一个字段（带有相应的 COLUMN 标签）。这会将 EOL (/n) 读入一个虚拟字段。如果这不是 BULK INSERT 命令中 ROWTERMINATOR 行为的错误，那么它至少非常不直观。也就是说，ROWTERMINATOR 似乎是一个 NOOP。

观察 1：虽然第 3 列是 YYYYMMDD 格式的日期，但对应的 SOURCE 3 实际上是 SMALLDATETIME。它会自动正确转换它。

观察 2：源 3 和 4 定义为十进制 (14, 2)。我认为这会缩放输入以使用相应字段中的最后 2 个字符作为百分之一。我可以。找到一种自动缩放的方法（首选）或 b. 进行后处理以除以 100。（这是另一个问题 - 只是在这里注意到它，因为这对我来说似乎很有趣。）

无论哪种方式，这似乎都是解决问题的一种方法。感谢您的回复。

附录（顺便说一句）：我决定使用选项 b（如观察 2 中所述），在 sql 命令末尾使用 UPDATE SET 命令将货币字段除以 100。

最终产品将是一个批处理文件，它多次调用“sqlcmd” - 然后在尾部运行一个 perl 脚本来检查各种错误文件中的条目。

另外一件事：我注意到，当我运行此命令时，BULK INSERT 命令中列出的错误文件必须不存在；否则，它本身会产生不同的错误！我会在预处理过程中处理这个问题。

无论如何，再次感谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-13T10:25:29.630

有关固定格式文本的 XML 架构文件的[SQL Server 文章在](https://msdn.microsoft.com/en-us/library/ms187833(v=sql.110).aspx#ImportFixedFields)RECORD 元素中指定了终止符：

```
<RECORD>
  <FIELD ID="1" xsi:type="CharFixed" LENGTH="10"/>
  <FIELD ID="2" xsi:type="CharFixed" LENGTH="6"/>
  <FIELD ID="3" xsi:type="CharTerm" TERMINATOR="\r\n"
</RECORD> 
```

（请注意上面的错字。）也许这就是您在查询中的规范被忽略的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T19:57:21.743

试试看`char(13)`，是SQL回车。此外`char(13) + char(10)`，回车/换行。

# string - 如何恢复这个负载值

> ID：10708986
> 
> 赞同：0
> 
> 时间：2012-05-22T19:42:41.967
> 
> 标签：string, get, position

我想创建一个脚本，在 cron 中运行来执行一个任务，如果某些 OpenVZ 机器负载很高，它将被重新启动。

为此，我需要获取每个 VM 的 CPU 负载的最后一个值。我得到这个命令：

vzlist -o ctid,laverage > loading.txt

```
 CTID       LAVERAGE
  1001 0.00/0.00/0.00
  1002 0.58/0.62/0.56
  1009 0.00/0.00/0.00
  1060 0.01/0.05/0.07
  1063 0.00/0.03/0.00
  1066 0.00/0.00/0.00
  1072 0.00/0.00/0.00
  1083 11.18/5.89/2.35 
```

现在，我想选择第三个负载值放入变量中。

我试过这段代码：

> 猫加载.txt | 而读线；做
> 
> 回声 ${line:15:4}
> 
> 完毕

但我对最后一行有疑问，因为我得到了价值

/2.3

任何人都可以帮我在最后一个 / 之后输入一个变量吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:53:15.390

尝试：

```
cat loads.txt | while read line; do 
  echo ${line} | cut -d'/' -f3;
done 
```

# asp.net - SQLDataReader - 没有结果

> ID：10708988
> 
> 赞同：1
> 
> 时间：2012-05-22T19:42:43.387
> 
> 标签：asp.net, .net, sql, sql-server

请查看以下架构：

```
CREATE TABLE Person (id int not null identity,[index] varchar(30),datecreated datetime)

insert into Person ([index],datecreated) values ('4,5,6','2011-01-01')
insert into Person ([index],datecreated) values ('1,2,3','2011-02-02')
insert into Person ([index],datecreated) values ('7,8','2012-02-02') 
```

和下面的代码：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Try
            Dim _ConString As String = WebConfigurationManager.ConnectionStrings("dbConnection").ConnectionString
            Dim connection As New SqlConnection(_ConString)
            Dim objCommand As New SqlCommand
            Dim objDR As SqlDataReader
            Dim sqlString As String

            sqlString = "SELECT * FROM Person WHERE datecreated < '2012-01-01' "

            objCommand.CommandText = sqlString & " ORDER BY left (substring([index],charindex(',',[index])+1,200),  " & _
            " charindex(',',substring([index],charindex(',',[index])+1,200))-1)"
            objCommand.Connection = connection
            connection.Open()
            objDR = objCommand.ExecuteReader
            If objDR.HasRows Then
                MsgBox("Has Rows")
            Else
                MsgBox("No Rows")
            End If
            connection.Close()
        Catch ex As Exception

        End Try

    End Sub 
```

此代码是实时系统中功能的一部分。每当我使用 ORDER BY 以开发模式（或实时）运行完整的应用程序时；DataReader 没有记录，并且出现一个消息框，显示 No Rows（当我单独运行上述代码时不会发生这种情况）。注释掉 ORDER BY 子句后返回正确的行数。没有抛出异常。有没有办法查看 SQLDataReader 是否产生了错误？

更新请不要发布有关内存泄漏的答案，例如连接未关闭等或未处理异常的事实。我意识到这一点。我生成了上面的代码来尝试重新创建问题。

UPDATE2 23/05/2012 19:30 gmt 我做了一些进一步的测试，当使用参数化查询时会出现差异，即执行命令对象后，SQL Studio 管理器中会返回一行，但应用程序中不会返回一行。我知道参数化查询被缓存。参数化执行计划可能与无参数化执行计划不同的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:56:58.410

我怀疑它`ORDER BY`忽略了行投影到键导致失败的任何行。例如，您在该顺序中使用了许多字符串操作，包括子字符串。如果子字符串参数超出字符串范围会发生什么？

我建议你试试：

```
SELECT [insert order by projection here] FROM Person 
```

看看那里会发生什么*-*从等式中删除 ORDER BY 。我还建议您从 SQL Management Studio（或其他）执行此操作，而不是通过代码进行试验:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:43:54.680

为了进一步调查，我建议使用 SQL Profiler。除了 SQL 查询计划之外，您不仅可以看到来自应用程序的确切查询，而且还可以返回任何可能生成（但未返回）的错误。

# linq - Linq查询根据孙子的属性返回祖父母，父母和孙子

> ID：10708990
> 
> 赞同：0
> 
> 时间：2012-05-22T19:42:50.707
> 
> 标签：linq

为笨拙的标题道歉。我需要查询一个集合并根据孙子的属性返回祖父母、父母和孙子

例如，对于下面的对象，我只想在条件与计划的 ID 匹配时获取报价、费率（父）和计划（孙子）。

```
public class Quote
{
    public int Id { get; set; }
    public string Type { get; set; }
    public string ParentType { get; set; }
    public decimal ValueMax { get; set; }
    public virtual ICollection<Rate> Rates { get; set; }
}

public class Rate
{
    public int Id { get; set; }
    public decimal ValueMax { get; set; }
    public ICollection<Plan> Plans { get; set; }
}

public class Plan

    public int Id { get; set; }
    public decimal Price { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T20:22:30.977

你应该能够做这样的事情来获得符合任何标准的计划，以及他们的父母和祖父母对象：

```
// results is an anonymous type with properties Quote, Rate, Plan
var results = from q in quotes
    from r in q.Rates
    from p in r.Plans
    where p.Id < 500 /* whatever criteria */
    select new 
    {
        Quote = q,
        Rate = r,
        Plan = p
    }; 
```

# grails - Grails - 如何将 wiki 页面嵌入到 Grails 应用程序中

> ID：10708992
> 
> 赞同：0
> 
> 时间：2012-05-22T19:42:55.557
> 
> 标签：grails, wiki, moinmoin, xwiki, tiki-wiki

我希望我的应用程序的某些页面使用基于 wiki 的技术，例如 XWiki、MoinMoin、Tiki Wiki……我主要关心的是不必重新编码“编辑”、“预览”、“历史比较器”特征。

我怎么能那样做？iframe 会是一个解决方案吗？有人已经这样做了吗？

任何建议都是最受欢迎的。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:40:14.557

似乎 grails.org 有自己的 wiki 实现。如果您在 grails.org 上注册，您就可以看到它的实际效果，例如，您可以访问[成功案例](http://grails.org/Success+Stories)，其中有链接编辑和查看信息。

[您可以在此处](https://github.com/grails-samples/grails-website)找到实现的源代码。

# sql-server - 无法在单用户模式下启动 sql server

> ID：10708993
> 
> 赞同：2
> 
> 时间：2012-05-22T19:42:59.410
> 
> 标签：sql-server, sql-server-2008

我正在尝试恢复本地 sql server 的 sa 密码。

我读到我应该把它放在单用户模式下，我做到了。

我添加了 -m; 到启动参数。

我没有运行 sql 代理，我重新启动了 Sql Server。

当我尝试：

```
sqlmd -S .\sqlexpress 
```

我收到消息：

```
Login failed for the user 'mydomain\myuser'. reason: server is in single user mode.
only one administrator can connect at this time. 
```

我还尝试将启动参数更改为：

```
-mSQLCMD 
```

但我得到同样的错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T19:45:02.463

你试过了吗：

```
NET STOP MSSQLSERVER

… give it a minute … 

NET START MSSQLSERVER /m 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-01T10:46:41.060

对我有用的东西基本上是一样的，但我没想到我应该做什么。

网络停止 [MSSQLSERVERName]

NET START [MSSQLSERVERName] /m /c /f

**不行（但实际上这是有效的）**

现在，起初我认为没有任何改变，因为我收到了服务器无法启动的失败消息。我还检查了 sql server 配置管理器并检查了服务状态。它通常读取开始或停止的位置，它读取挂起的更改。

**意外挂起**

我无法停止或重新启动该服务并认为它已挂起，因此我重新启动了计算机。直到后来我弄清楚如何解决问题时，我才意识到“待更改”可能是我想要看到的结果（我猜，“待更改”意味着现在就解决问题）。

**启动并运行**

我再次尝试了 net start 命令，然后再次检查了 sql 配置管理器——再次“等待更改...”——。但是，这次我启动了 Sql Server Management Studio，我又重新开始工作了，谢天谢地！

**-c**
独立于服务控制管理器启动 SQL Server 服务。这样做可以加快启动速度。

**-f** 此标志以最少的配置启动 SQL Server，并允许更新系统表。如果 DBA 调整了配置选项以使服务无法启动，这将很有用。如果您发现自己处于这种情况，您会喜欢“-f”标志，因为这可能是纠正 SQL Server 配置中的错误的唯一方法。

**-m**
以单用户模式启动 SQL Server。这意味着一次只有一个用户可以连接到服务器，并且允许对系统表进行临时更新。此外，-m 选项不会启动 CHECKPOINT。当系统数据库之一损坏并且您必须从备份中重新加载它时，单用户模式很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-31T13:22:18.480

Microsoft 建议您不应该通过命令行启动 sqlserver.exe，而是进行测试：“SQL Server 只能从命令提示符启动以进行故障排除”：

[https://technet.microsoft.com/en-us/library/ms180965(v=sql.105).aspx](https://technet.microsoft.com/en-us/library/ms180965(v=sql.105).aspx)

这也建议不要使用 net stop，因为它会导致不可预测的结果。

重置sa密码的解决方法是单用户模式启动sql server；这是使用 -m 标志实现的，这应该按照 MSDN 上的建议通过 SQL Server 配置管理器进行设置；请参阅分步说明的第 4 步：

[https://msdn.microsoft.com/en-us/library/dd207004.aspx](https://msdn.microsoft.com/en-us/library/dd207004.aspx)

如果要在 SSMS UI 中重置密码，则必须*首先*告诉 SQL 配置管理器 SSMS 将启动 SQL Server；

因此，除了 SQL 配置管理器中 SQL Server 属性的高级选项卡上启动参数的开头之外，您的 -m 标志应该如下（包括分号）如下

-m”Microsoft SQL Server Management Studio – 查询”；

如果您不这样做，那么您将在 SSMS 中收到一条警告，告知它无法使用 sa 登录，因为它处于单用户模式。

完成后请记住删除此启动标志。

进入单用户模式后，您应该能够重置密码： 打开 SSMS：

1.  展开安全文件夹
2.  右键单击sa帐户
3.  更改密码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-04T21:54:54.137

确保**所有**SQL Server 服务都已停止，但**SQL Server 实例**本身除外。我浪费了一个小时试图解决这个问题，只是发现 SQL Server VSS Writer 服务一直在运行，并且在实例以单用户模式启动时立即连接。我不得不手动停止它，然后才能登录并解锁 sa 帐户。

# android - Android - 缺少父主题？

> ID：10708998
> 
> 赞同：3
> 
> 时间：2012-05-22T19:43:18.030
> 
> 标签：android, xml, styles

我正在尝试设置 ActionBar 的样式，遵循此博客文章：

[http://android-developers.blogspot.com/2011/04/customizing-action-bar.html](http://android-developers.blogspot.com/2011/04/customizing-action-bar.html)

使用此源代码：

`svn checkout http://styled-action-bar.googlecode.com/svn/trunk/ styled-action-bar-read-only`

但是，我在`/res/values/styles.xml`.

这：

```
<!-- style for the tabs -->
<style name="MyActionBarTabStyle" parent="android:style/Widget.Holo.Light.ActionBarView_TabView">
    <item name="android:background">@drawable/actionbar_tab_bg</item>
    <item name="android:paddingLeft">32dp</item>
    <item name="android:paddingRight">32dp</item>
</style> 
```

错误：

`Error retrieving parent for item: No resource found that matches the given name 'android:style/Widget.Holo.Light.ActionBarView_TabView'.`

但是，使用以下答案并挖掘 Android 的源代码，我可以看到该主题确实存在：

[https://stackoverflow.com/a/7149389/420001](https://stackoverflow.com/a/7149389/420001)

我在项目中唯一更改的是将其从 移动`android-11`到`android-14`，然后在 Eclipse 中运行“Android”>“修复项目属性”。我确实注意到，在该答案中链接到的 repo 列出了样式，位于分支 master 上，所以我看不出为什么找不到主题。

只是为了测试，我把那段代码放在我的工作`android-14`目标应用程序中，减去背景可绘制对象，它会引发同样的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T19:55:04.777

根据[https://stackoverflow.com/a/7837756/1003511](https://stackoverflow.com/a/7837756/1003511)中的链接，有一个`Widget_Holo_Light_ActionBar_TabView`但不是`Widget_Holo_Light_ActionBarView_TabView`. 自编写该教程以来，资源可能已被重命名。它说从 API 级别 13 开始包含没有额外“视图”的版本 - 如果本教程最初是在 11 上编写的，它可能在 13 中被重命名，并且由于您正在运行 14，因此您只能看到重命名的版本。我会尝试删除无关的“视图”并查看代码是否运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:59:01.400

在指定要查看 android 样式时，您可能会缺少一个“@”字符：

您还可以仔细检查此处的 API 文档中是否列出了父样式：http: [//developer.android.com/reference/android/R.style.html](http://developer.android.com/reference/android/R.style.html)

看起来你的名字可能有点错误。