# StackOverflow 问答 11407000-11407999

# android - 在android中以高分辨率保存图像

> ID：11407003
> 
> 赞同：1
> 
> 时间：2012-07-10T05:14:39.620
> 
> 标签：android, bitmap, high-resolution

我正在动态地将图像和文本视图添加到捕获的照片中。下面是我在添加视图后保存照片的代码。拍摄的照片大小为 1.3MB（照片由 3MP 相机拍摄），但保存的照片大小仅为 50KB。我将如何增加生成的文件大小以获得最大分辨率？

```
 photoLayout.setDrawingCacheEnabled(true);

    Bitmap b = Bitmap.createBitmap(photoLayout.getDrawingCache());       

    photoLayout.setDrawingCacheEnabled(false);    

    FileOutputStream fos = new FileOutputStream(path);
    b.compress(CompressFormat.PNG, 100, fos);
    fos.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:33:55.307

如果您的文件只有 50k，请检查源位图 - 您可以使用图像缩略图而不是原始图像。如果你加载一个大文件并且你不调整它的大小，那么没有理由得到一个这么小的文件。文件大小应与原始文件大小相似。

您可以发布加载位图的代码吗？我几乎可以肯定你加载了缩略图！

编辑：从相机获取照片：从相机[捕获图像并在活动中显示](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:41:56.007

从位图格式转换为 PNG 格式将减小文件大小。查看您的输出图像是否具有所需的分辨率。位图格式是一种未压缩的格式，用于存储有关图像的每个单个像素的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:47:05.580

这可能有用： [How to make Bitmap compress without change the bitmap size?](https://stackoverflow.com/a/8419112/1351659)

# c++ - 在另一个类函数中使用一个类的变量

> ID：11407005
> 
> 赞同：1
> 
> 时间：2012-07-10T05:14:47.050
> 
> 标签：c++, qt, class

我有这样的课

```
class A : public QDialog
{
A(QWidget *parent);
static map<int,QString> dataa;
};

class B : public QThread
{
public void run();
}

class C : public QDialog
{
public void abc();
} 
```

**类的定义**

```
void B::run()
{
in this function,i am using __dataa__ as __dataa.insert__which is defined initially in A class as public.
}

void C::abc()
{
in this function also,i am using __dataa__ as __dataa.find__ and dataa.end__ which is defined initially in A class as public.
} 
```

现在请帮助我如何在其他两个类 B 和 C 中使用该变量 dataa。在某处我看到我们必须将其声明为静态并在 B 和 C 类中将其用作 A::data 但它不起作用并给出错误。

这三个类被初始化为

```
int main()
{
A window;
B datathread;
datathread.start
//B is Qthread inherited and A,C are QDialog inherited
} 
```

C 类通过单击 A 类上的按钮并在新窗口中打开其对话框从 A 类初始化。我想这一次我不会因为没有明确地提出我的问题而受到指责。请以上帝的名义帮助我，因为我长期以来一直被困在这个问题上。非常感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:22:29.753

我不熟悉 QT，但我想这可能会有所帮助。如果要在 b 类或 c 类中使用 class'A 数据，有 3 个选项

1.  如果关系有意义，则从 A 类继承 B 类和 C 类
2.  在 B 类和 C 类（包含）中创建 A 类的实例
3.  通过类 A 的公共成员函数访问类 A 的数据，例如

    `public:`

    ```
     map<int, QString> GetData()
       {
         return dataa;
       } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:25:12.550

> 对 A::dataa 的未定义引用

您需要在 A 的 .cpp 文件中定义它。说：

```
std::map<int, QString> A::dataa; 
```

此外，为了确保在其他地方可以访问，有两种选择：

*   `public`在A 类的部分声明这个地图对象
*   或通过@Jeeva 建议的函数返回此对象的副本。

现在，要在其他单元中访问此变量，您将首先包含 A 类的头文件。

```
#include "A.h" //or something similar.. 
```

并访问它：

```
void B::run() //and similar with C::run(..)
{
    A::dataa //do something with it ..
} 
```

# excel - XMLHTTP onTimeOut时如何调用VBA回调函数？

> ID：11407010
> 
> 赞同：7
> 
> 时间：2012-07-10T05:15:46.710
> 
> 标签：excel, vba, callback, timeout, msxml

我正在尝试从网络服务器获取 xml 数据到 excel，然后我编写了一个`sendRequest`函数来调用 excel

`=sendRequest("http://abb.com/index.php?id=111")`

当网络服务器出现问题，无法连接或找不到时，excel 没有响应，太可怕了！为了避免它，我认为我们应该设置timeOut。这些是我的功能：

```
Function sendRequest(Url)
    'Call service
    Set XMLHTTP = CreateObject("Msxml2.ServerXMLHTTP.6.0")

    'Timeout values are in milli-seconds
    lResolve = 10 * 1000
    lConnect = 10 * 1000
    lSend = 10 * 1000
    lReceive = 15 * 1000 'waiting time to receive data from server
    XMLHTTP.setTimeOuts lResolve, lConnect, lSend, lReceive

    XMLHTTP.OnTimeOut = OnTimeOutMessage 'callback function

    XMLHTTP.Open "GET", Url, False

    On Error Resume Next
    XMLHTTP.Send
    On Error GoTo 0

    sendRequest = (XMLHTTP.responseText)
End Function

Private Function OnTimeOutMessage()
    'Application.Caller.Value = "Server error: request time-out"
    MsgBox ("Server error: request time-out")
End Function 
```

通常，当`XMLHTTP`' 超时发生时，事件`OnTimeOutMessage`将被执行（参考[#1](http://msdn.microsoft.com/en-us/library/ms760403%28v=vs.85%29)，[#2](http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx#events)）。但在[我的测试](https://dl.dropbox.com/u/60740207/TestTimeOutCallBackFunction.xlsm)中，`OnTimeOutMessage`是在开始时执行的`sendRequest()`

**Msxml2.ServerXMLHTTP.6.0**请求超时时如何使用回调函数？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T09:47:55.147

线;

`XMLHTTP.OnTimeOut = OnTimeOutMessage`

不是方法赋值；而是立即执行`OnTimeOutMessage()`（并将其无用的返回值分配给`OnTimeOut`）。

根据您的示例链接， *JavaScript*中的等效行正确地为后续调用分配了一个`Function`对象`OnTimeOut`- VBA 不支持这一点。

相反，您可以捕获之后引发的超时错误，`.send`或者使用早期绑定`WithEvents`、、& 内联事件处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T18:34:23.033

Tim 是正确的，如果您有超时，那么每个请求都会“挂起”Excel/VBA，直到超时持续时间过去后再继续。使用 async 将允许您进行多个请求，而不会延迟响应或进一步请求的长请求。

status 属性表示请求返回的 HTTP 状态代码。只需将下面的代码放在现有代码中以进行较慢的同步检查，或将响应处理移至事件处理程序以进行异步。

```
XMLHTTP.Send

If XMLHTTP.Status = "200" Then
    '200      OK
    htmlString = XMLHTTP.ResponseText
Elseif XMLHTTP.Status = "408" Then
    '408      Request Timeout
    Call OnTimeOutMessage
else
    'All status return values
    'Number      Description
    '100      Continue
    '101      Switching protocols
    '200      OK
    '201      Created
    '202      Accepted
    '203      Non-Authoritative Information
    '204      No Content
    '205      Reset Content
    '206      Partial Content
    '300      Multiple Choices
    '301      Moved Permanently
    '302      Found
    '303      See Other
    '304      Not Modified
    '305      Use Proxy
    '307      Temporary Redirect
    '400      Bad Request
    '401      Unauthorized
    '402      Payment Required
    '403      Forbidden
    '404      Not Found
    '405      Method Not Allowed
    '406      Not Acceptable
    '407      Proxy Authentication Required
    '408      Request Timeout
    '409      Conflict
    '410      Gone
    '411      Length Required
    '412      Precondition Failed
    '413      Request Entity Too Large
    '414      Request-URI Too Long
    '415      Unsupported Media Type
    '416      Requested Range Not Suitable
    '417      Expectation Failed
    '500      Internal Server Error
    '501      Not Implemented
    '502      Bad Gateway
    '503      Service Unavailable
    '504      Gateway Timeout
    '505      HTTP Version Not Supported

End If 
```

# android - Android中的动态Apk

> ID：11407019
> 
> 赞同：13
> 
> 时间：2012-07-10T05:16:26.707
> 
> 标签：android, apk

无论如何要创建动态apk。假设我们有一个主站点，它有很多子域。每个子域都应该有自己的自定义apk，其中包含他们自己的自定义徽标、新闻等。

除了为每个站点创建单独的 apk 之外，还有什么方法可以创建 apk 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T07:37:45.033

为什么要创建自定义 APK？为什么不下载需要定制的内容呢？

无论如何，您可以使用`sharedUserId`和`getResourcesForApplication()`（[链接](http://developer.android.com/reference/android/content/pm/PackageManager.html#getResourcesForApplication%28java.lang.String%29)）共享来自不同 APK 的资源。您仍然需要使每个 APK 成为一个 APK。

来自 Roman Nurik 的一些信息：

**[在应用程序之间共享文件](https://stackoverflow.com/questions/2681035/share-files-between-applications)**

> 如果您的应用程序使用相同的证书进行签名并在清单中声明了相同的证书 `android:sharedUserId`，则它们可以共享数据，因为它们可以读取/写入彼此的数据目录。如果您愿意，他们甚至可以共享一个流程（请参阅 参考资料`android:process`）。

更多类似问题的链接：

*   [在 apk 之间共享原始资源](https://stackoverflow.com/questions/4201776/share-raw-resource-between-apks)
*   [您可以跨 APK 共享资源吗？](https://stackoverflow.com/questions/4246015/can-you-share-resources-across-apks)（参见关于 getResourcesForApplication 的第二个答案）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-07T07:39:45.140

您可以使用例如 maven 或 ant 通过 java 代码动态编译您的代码。为此，您需要使您的 Android 项目成为 maven 项目。要使用 maven 编译 Android，我使用[maven-android-plugin](http://code.google.com/p/maven-android-plugin/)。比你可以只运行一些类似`mvn package`或[从 java 代码](http://maven.apache.org/embedder.html)的东西，然后等到 maven 用你需要的自定义徽标编译你的代码。你将在目标目录中有一个 apk。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T07:33:28.317

除了为每个站点创建单独的 apk 之外，别无他法。Apk 文件由 jarsigner 签名，如[文档](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/jarsigner.html)中所述：

> 签名数据不能更改；如果是，则签名将不再验证为真实。

另外：[_](http://developer.android.com/tools/publishing/app-signing.html)

> 所有申请都必须签名。如果未签名，系统将不会在模拟器或设备上安装应用程序。

您可以做的是创建脚本或使用 ant 或 maven 构建具有不同内容的 apk 集。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T03:20:56.650

用ant或maven构建，然后你可以配置标志图标等参数

# c++ - 如何在 Qt 正则表达式中模拟否定的后向断言？

> ID：11407022
> 
> 赞同：2
> 
> 时间：2012-07-10T05:16:38.677
> 
> 标签：c++, regex, qt

我正在使用 Qt 4.6 编写程序，我需要从表达式中捕获所有出现的非范围文字 `"SUM(A1:A3)+B1-B3+SUM(D1:D3)/COUNT(D1:D3)"`，即 B1、B3，但不是 A1、A3、D1、D3。我曾尝试使用 QRegExp，但它不支持否定的后向断言，所以我不能排除像 A3、D3 这样的文字。我的正则表达式`(?<!:)([A-Z]{1,4}[1-9]\\d{0,3})(?!:)`不起作用。我需要你的意见。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:58:12.740

在您的情况下，您可以使用

```
(?:^|[^:])\b([AZ]{1,4}[1-9]\d{0,3})\b(?!:)
```

第一组匹配开头的空字符串或除冒号之外的任何字符。我还添加了*单词边界* `\b`，这样模式就不会匹配`A4a`.

通常，编写“积极”模式更简单。例如，使用

```
（...）（：...）？
```

通过`...`表示您的`[A-Z]`模式以匹配单元格引用，您可以一次匹配范围和非范围，然后在循环结果时丢弃所有范围。您可以通过检查第二个捕获组是否为空来轻松检测匹配项是否为范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:47:38.757

对于需要在不支持环视的引擎上进行环视的解决方案，我只找到了一种选择：我称之为“组合暴力破解”，尽管我确信还有一个更具技术性的名称。一个例子是：[Validate proxy URL using XML regex pattern](https://stackoverflow.com/questions/11157914/validate-proxy-url-using-xml-regex-pattern/11158330#11158330)。

但是*当您需要查找不止一次出现时，它就不起作用了*。您可能自己尝试过这样的事情：

```
/[^:]\b([A-Z]{1,4}[1-9]\d{0,3})\b[^:]/ 
```

（我添加了`\b`更安全。另外，请记住再次转义反斜杠。）

如果您确实尝试过，那么您会注意到[问题](http://regexpal.com/?flags=g&regex=%5B%5E:%5D%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D&input=SUM%28A1:A3%29%2bB1-B3%2bSUM%28D1:D3%29%2bA2%2bB1:B3/COUNT%28D1:D3%29)：在阅读到`+B1-`;之后找到了第一个匹配项。因此，由于`-`已经被读取，因此`B3`无法匹配下一个单元格引用，因为 . 没有合适的字符`[^:]`。

为了重新描述这个问题，上面的正则表达式只能捕获连续的单元格引用链中的所有其他匹配项，例如字符串，

```
(A1+A2+A3+A4+A5+A6)/(B1+B2+B3+B4+B5+B6)
^^^^  ^^^^  ^^^^    ^^^^  ^^^^  ^^^^ 
```

...只有指定的部分会匹配，也显示[在这里](http://regexpal.com/?flags=g&regex=%5B%5E:%5D%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D&input=%28A1%2bA2%2bA3%2bA4%2bA5%2bA6%29/%28B1%2bB2%2bB3%2bB4%2bB5%2bB6%29)。

没有办法在单个正则表达式中解决这个问题。您的替代方案：

1.  使用非正则表达式方法。

2.  如果您出于某种原因*必须*使用正则表达式，那么您唯一的希望可能是能够使用至少*两个*正则表达式（例如，使用第一个在所有类似单元格引用的字符串周围插入空格，这样您就没有连续的单元格链参考）。

3.  或者，在不太可能的情况下，将它们捕获到子匹配中就足够了，即可以通过`.cap(1)`、`.cap(2)`等访问。您可以执行以下操作。

* * *

```
/[^:]\b([A-Z]{1,4}[1-9]\d{0,3})\b[^:](?:(\b([A-Z]{1,4}[1-9]\d{0,3})\b[^:](?:(\b([A-Z]{1,4}[1-9]\d{0,3})\b[^:](?:(\b([A-Z]{1,4}[1-9]\d{0,3})\b[^:](?:(\b([A-Z]{1,4}[1-9]\d{0,3})\b[^:](?:(\b([A-Z]{1,4}[1-9]\d{0,3})\b[^:](?:(\b([A-Z]{1,4}[1-9]\d{0,3})\b[^:]))?))?))?))?))?))?/ 
```

好吧，那是不可能阅读的，所以这里有一个更易读的版本。Pretend`XY`扩展到我们的单元格引用表达式，`\b([A-Z]{1,4}[1-9]\d{0,3})\b`. 那么，上面的同理：

```
/[^:]XY[^:](?:(XY[^:](?:(XY[^:](?:(XY[^:](?:(XY[^:](?:(XY[^:]))?))?))?))?))?))?/ 
```

看到图案了吗？在我们继续之前，您可以看到[这个正则表达式与我们的示例完美匹配](http://regexpal.com/?flags=g&regex=%5B%5E%3A%5D%5Cb(%5BA-Z%5D%7B1%2C4%7D%5B1-9%5D%5Cd%7B0%2C3%7D)%5Cb%5B%5E%3A%5D(%3F%3A(%5Cb(%5BA-Z%5D%7B1%2C4%7D%5B1-9%5D%5Cd%7B0%2C3%7D)%5Cb%5B%5E%3A%5D(%3F%3A(%5Cb(%5BA-Z%5D%7B1%2C4%7D%5B1-9%5D%5Cd%7B0%2C3%7D)%5Cb%5B%5E%3A%5D(%3F%3A(%5Cb(%5BA-Z%5D%7B1%2C4%7D%5B1-9%5D%5Cd%7B0%2C3%7D)%5Cb%5B%5E%3A%5D(%3F%3A(%5Cb(%5BA-Z%5D%7B1%2C4%7D%5B1-9%5D%5Cd%7B0%2C3%7D)%5Cb%5B%5E%3A%5D(%3F%3A(%5Cb(%5BA-Z%5D%7B1%2C4%7D%5B1-9%5D%5Cd%7B0%2C3%7D)%5Cb%5B%5E%3A%5D(%3F%3A(%5Cb(%5BA-Z%5D%7B1%2C4%7D%5B1-9%5D%5Cd%7B0%2C3%7D)%5Cb%5B%5E%3A%5D))%3F))%3F))%3F))%3F))%3F))%3F&input=(A1%2BA2%2BA3%2BA4%2BA5%2BA6)%2F(B1%2BB2%2BB3%2BB4%2BB5%2BB6))。缺点是，只要您定义正则表达式，您就只能处理一系列连续的单元格引用。以上可以处理7，超过它[会破坏](http://regexpal.com/?flags=g&regex=%5B%5E:%5D%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D%28%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D%28%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D%28%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D%28%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D%28%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D%28%5Cb%28%5BA-Z%5D%7B1,4%7D%5B1-9%5D%5Cd%7B0,3%7D%29%5Cb%5B%5E:%5D%29?%29?%29?%29?%29?%29?&input=%28A1%2bA2%2bA3%2bA4%2bA5%2bA6%2bA7%2bA8%29/%28B1%2bB2%2bB3%2bB4%2bB5%2bB6%2bB7%2bB8%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T04:43:30.723

Qt 5.0 中的 QRegularExpression 支持（固定长度）lookbehind 断言。

[https://bugreports.qt-project.org/browse/QTBUG-2371](https://bugreports.qt-project.org/browse/QTBUG-2371)已于 2012 年 3 月 22 日关闭。Qt 5.0 于 2012 年 12 月 19 日发布。

# text - 如何从头开始创建一个非常简单的文本编辑器？

> ID：11407027
> 
> 赞同：4
> 
> 时间：2012-07-10T05:16:50.293
> 
> 标签：text, canvas, text-editor

假设我想创建一个简单的文本编辑器。它真的不需要有什么特别的东西，它主要应该像记事本一样。并且，假设我想从头开始创建它：为方便起见，假设我拥有像 Canvas 这样的工具（我的意思是在浏览器中工作的工具）。对于那些不熟悉 canvas 的人，这里快速了解[一下它可以用 text 做什么](https://developer.mozilla.org/en/Drawing_text_using_a_canvas)。

但技术并不重要：重点是，我可以在屏幕上的特定坐标处放置一些文本，设置颜色和字体，并在其框中将其左中右对齐，这基本上是我可以使用可用工具做的所有事情. 这些工具不知道如何自动换行或选择文本，而且一旦我将文本放在屏幕上，它就会变成一堆像素 - 无法更新文本或轻松删除最后一个字符，因为例子。

现在，与这里的大多数聪明人不同，我从未创建过文本编辑器。那么我的问题是：

1.  每个文本编辑器设计师面临的模式是什么？
2.  会出现哪些典型问题？
3.  我应该避免解决哪些问题，因为那里有我可以移植或复制的解决方案？（我在做 Canvas，就像我说的那样。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T15:11:39.380

尝试在 Canvas 中执行此操作有点令人不悦。HTML5 Canvas 规范本身强烈建议不要尝试这样做。正如规范所说：

> 作者应避免使用 canvas 元素实现文本编辑控件。这样做有很多缺点：
> 
> *   必须重新实现插入符号的鼠标放置。
> *   插入符号的键盘移动必须重新实现（可能跨行，用于多行文本输入）。
> *   必须实现文本字段的滚动（水平滚动用于长行，垂直滚动用于多行输入）。
> *   必须重新实现诸如复制和粘贴之类的本机功能。
> *   必须重新实现拼写检查等原生功能。
> *   必须重新实现拖放等原生功能。
> *   必须重新实现页面范围的文本搜索等原生功能。
> *   必须重新实现特定于用户的本机功能，例如自定义文本服务。这几乎是不可能的，因为每个用户可能安装了不同的服务，并且可能存在无限多的此类服务。
> *   双向文本编辑必须重新实现。
> *   对于多行文本编辑，必须为所有相关语言实现换行。
> *   必须重新实现文本选择。
> *   必须重新实现双向文本选择的拖动。
> *   必须重新实现平台原生键盘快捷键。
> *   必须重新实现平台原生输入法编辑器 (IME)。
> *   撤消和重做功能必须重新实现。
> *   必须重新实现可访问性功能，例如插入符号或选择之后的放大。

在 Canvas 中实现这些东西是一场*噩梦*，尤其是在今天，相同的字体不仅在每个浏览器中看起来不同，而且在 Canvas 渲染字体和浏览器渲染字体之间看起来也不同。

我建议您查看 Mozilla Bespin 的代码，它是用画布制作的。它最终变成了 Mozilla Skywriter，然后最终他们说“Welp canvas 是这项工作的错误工具”，放弃并与 Ace 合并，后者不使用 Canvas 而是使用 DIV。如果您真的对这类事情感兴趣，那么我强烈建议您查看这些项目的代码。当我刚开始使用 Canvas 时，bespin 代码帮助了我很多。

* * *

最重要的是，如果您正在编辑文本，请在画布上使用 DIV 和输入以及其他 HTML 元素（暂时）。不要试图在画布中模仿它。无论如何，您都可以尝试，但您将度过一段糟糕的时光，您的用户也是如此。

至于画布上的多行文本，你现在必须自己计算。您甚至必须近似文本高度。

* * *

我对实际实现一个简单的编辑器的建议是：有一个画布，绘制一些文本，也许在一些复杂的图形上。当您想编辑文本时，可能通过单击图形，在单击事件上出现一个（多行或不多行）HTML Input 元素。在按下回车、退出或框失去焦点（`blur`事件）后，提交更改。

# ios - 您可以从 CLLocationManagerDelegate 响应中调用 CLLocationManager startUpdatingLocation 吗？

> ID：11407034
> 
> 赞同：0
> 
> 时间：2012-07-10T05:17:38.500
> 
> 标签：ios, core-location

我在监控区域。当我退出它 didExitRegion: 被调用到我的 . 在该响应中，我可以激活 startUpdatingLocation 以进行特定位置跟踪吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:08:41.993

是的！如果您满足 startUpdatingLocation 正常工作所需的所有条件，那么如果您在 didExitRegion 中调用它，它将同样工作。

# c# - 构造函数不在拥有对象的线程上

> ID：11407039
> 
> 赞同：0
> 
> 时间：2012-07-10T05:18:23.990
> 
> 标签：c#, wpf, multithreading, invalidoperationexception

单击主窗口上的按钮时，我会打开一个侧窗口。此侧窗口是在与主窗口不同的线程上创建的。

当我**第一次单击按钮时，一切正常**。然后我关闭侧窗。现在，当我**第二次**单击该按钮时，它会抛出`InvalidOperationException`.

当侧窗关闭时，它和它运行的线程都被丢弃，每次打开时，都会创建一个全新的线程，从而创建一个全新的窗口。在窗口的最低子元素的构造函数中引发异常（即在构造窗口时第一次访问 UI 对象）。

这就是发生的事情。按钮单击的处理程序：

```
public partial class MainWindow : Window
{
    private void OnVariableMonitoringButtonClick(object sender, RoutedEventArgs e)
    {
        if (monitoringWindow == null)
        {
            Cursor = Cursors.Wait;
            monitoringWindow = new MonitoringWindowWrapper();
            monitoringWindow.Loaded += OnMonitoringWindowLoaded;
            monitoringWindow.Closed += OnMonitoringWindowClosed;
            monitoringWindow.Start(); // <---
        }
        else
        {
            monitoringWindow.Activate();
        }
        e.Handled = true;
    }

    void OnMonitoringWindowLoaded(object sender, EventArgs e)
    {
        Dispatcher.Invoke(new Action(() => Cursor = Cursors.Arrow));
    }

    void OnMonitoringWindowClosed(object sender, EventArgs e)
    {
        monitoringWindow = null;
        Dispatcher.Invoke(new Action(() => Cursor = Cursors.Arrow));
    }
} 
```

该类`MonitoringWindowWrapper`仅将类的相关方法包装`MonitoringWindow`在`Dispatcher`调用中以处理跨线程调用。

代码进入`MonitoringWindowWrapper.Start()`方法：

```
partial class MonitoringWindowWrapper
{
    public void Start()
    {
        // Construct the window in a parallel thread
        Thread windowThread = new Thread(LoadMonitoringWindow);
        windowThread.Name = "Monitoring Window Thread";
        windowThread.IsBackground = true;
        windowThread.SetApartmentState(ApartmentState.STA);
        windowThread.Start(); // <---
    }

    private void LoadMonitoringWindow()
    {
        try
        {
            // Construct and set up the window
            monitoringWindow = new MonitoringWindow(); // <---
            monitoringWindow.Loaded += OnMonitoringWindowLoaded;
            monitoringWindow.Closed += OnMonitoringWindowClosed;
            monitoringWindow.Show();

            // Start window message pump on this thread
            System.Windows.Threading.Dispatcher.Run();
        }
        catch (Exception e)
        {
            // Catch any exceptions in this window to save the application from crashing
            ErrorMessasgeBox.Show(e.Message);
            if (Closed != null) Closed(this, new EventArgs());
        }
    }
} 
```

然后代码进入`MonitoringWindow.MonitoringWindow()`构造函数并过滤到窗口中最低的子元素：

```
public partial class MonitoringWindow : Window
{
    public MonitoringWindow()
    {
        InitializeComponent(); // <---
        // ...
    }
} 
```

一直到：

```
public partial class LineGraph : UserControl, IGraph, ISubGraph
{

    public LineGraph()
    {
        InitializeComponent();
        Brush b = GraphUtilities.BackgroundGradient;
        Background = b; // EXCEPTION THROWN AT THIS LINE
        BorderBrush = GraphUtilities.Border;
    }
} 
```

异常调用堆栈可以让我们深入了解抛出异常的位置：

```
System.InvalidOperationException was unhandled by user code
 HResult=-2146233079
 Message=The calling thread cannot access this object because a different thread owns it.
 Source=WindowsBase
 StackTrace:
    at System.Windows.Threading.Dispatcher.VerifyAccess()
    at System.Windows.Freezable.ReadPreamble()
    at System.Windows.Media.GradientStopCollection.OnInheritanceContextChangedCore(EventArgs args)
    at System.Windows.DependencyObject.OnInheritanceContextChanged(EventArgs args)
    at System.Windows.DependencyObject.OnInheritanceContextChanged(EventArgs args)
    at System.Windows.Freezable.AddInheritanceContext(DependencyObject context, DependencyProperty property)
    at System.Windows.DependencyObject.ProvideSelfAsInheritanceContext(DependencyObject doValue, DependencyProperty dp)
    at System.Windows.DependencyObject.ProvideSelfAsInheritanceContext(Object value, DependencyProperty dp)
    at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
    at System.Windows.DependencyObject.SetValueCommon(DependencyProperty dp, Object value, PropertyMetadata metadata, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType, Boolean isInternal)
    at System.Windows.DependencyObject.SetValue(DependencyProperty dp, Object value)
    at System.Windows.Controls.Control.set_Background(Brush value)
    at Graphing.LineGraph..ctor() in z:\Documents\Projects\Software\Serial\SerialWindows\Graphing\LineGraph\LineGraph.xaml.cs:line 28
    at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) 
```

我能想到的唯一原因如下：
1\. 在另一个线程上创建的对象的`Background`属性绑定到该`LineGraph`对象的属性？但是，我的应用程序中没有任何这样的绑定（至少是明确的），如果是这种情况，那么为什么它第一次工作？
2\. 该`Background`属性不知何故不归`LineGraph`对象所有？但这没有任何意义。
3\. 构造函数没有在创建它正在构造的对象的线程上执行？这又没有任何意义，Visual Studio 调试器说它正在“监视窗口线程”线程上运行。

我该如何解决这个问题？

我可以使用`Dispatcher`来设置背景，但这对于该类和所有其他类中的所有 UI 元素的调用来说都是非常乏味的，而且它实际上并没有解决问题的原因。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:21:31.473

我猜罪魁祸首是`GraphUtilities.BackgroundGradient`，但您没有列出该`GraphUtilities`课程。画笔是[可冻结](http://msdn.microsoft.com/en-us/library/system.windows.freezable.aspx)的对象。

来自MSDN 上的[可冻结对象概述：](http://msdn.microsoft.com/en-us/library/ms750509.aspx)

> 冻结的 Freezable 也可以跨线程共享，而未冻结的 Freezable 则不能。

所以第一次运行时，那个刷子是和监控窗口线程相关联的。下次打开该窗口时，它是一个新线程。如果您想从其他线程中使用它，则必须在画笔上调用 Freeze 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:36:30.173

WPF 的先决条件是所有 UI 资源都由单个线程（即 UI 线程）创建并拥有。许多事情都取决于假设的有效性，即这将是这样。如果您不遵守此规定，那么所有赌注都将取消。

您无需在后台线程上*创建*等待指示器 UI 即可在后台线程上*使用*它。大型应用程序在主线程上创建所有 UI。长时间运行的活动发生在后台线程上。时机成熟时，控件编组到 UI 线程上的时间足以更新 UI。

我建议您在继续之前[仔细阅读此内容。](http://www.albahari.com/threading/)

* * *

所以你得到了你想要的答案。*可以*做某事的事实并不意味着它是一个好主意。在软件设计中，聪明很少与聪明相同。

# css - css中的类选择器

> ID：11407045
> 
> 赞同：0
> 
> 时间：2012-07-10T05:18:42.557
> 
> 标签：css

我正在使用引导程序，我对它的 css 感到困惑。他们的 css 代码中有类选择器。我不明白这段代码实际上做了什么。这个css是否仅适用于跨度或其他什么。

```
.row-fluid [class*="span"] {
  display: block;
  float: left;
  width: 100%;
  min-height: 28px;
  margin-left: 2.127659574%;
  *margin-left: 2.0744680846382977%;
  -webkit-box-sizing: border-box;
     -moz-box-sizing: border-box;
      -ms-box-sizing: border-box;
          box-sizing: border-box;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T05:21:31.730

它是一个部分属性选择器，适用于`span`类名中包含字符串的任何内容。它用于`span2`等等。例如`[class*="span"]`将匹配这些元素：

```
<p class="span"></p>
<p class="spanner"></p>
<p class="espanol"></p>
<p class="span43 blue"></p> 
```

# java - 在java中做乘法时出现奇怪的错误？

> ID：11407047
> 
> 赞同：0
> 
> 时间：2012-07-10T05:19:04.680
> 
> 标签：java, android

```
public static int NUM_FRAMES = 8;
public static int FRAME_REPEAT_NO = 2;
int height = 24;
//bitmap.getWidth() is 168 and bitmap.getHeight() is 91

double w = bitmap.getWidth();
w = w/NUM_FRAMES;
w = w*FRAME_REPEAT_NO;
w = w*height;
w = w/bitmap.getHeight(); 
```

我这样做了，我得到的值为`w`11.07，这是正确的。

但是当我这样做时：

```
double w  = FRAME_REPEAT_NO*(bitmap.getWidth()/NUM_FRAMES)*(height/bitmap.getHeight()); 
```

的值`w`始终为 0；

有人可以向我解释为什么会这样吗？

PS我在一个Android应用程序中做...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:20:51.930

投射`int`到`double`

```
double w  = FRAME_REPEAT_NO*(bitmap.getWidth()/((double)NUM_FRAMES))*(height/((double)bitmap.getHeight())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:30:23.413

您在需要浮点运算的情况下使用整数运算：

```
double w = FRAME_REPEAT_NO*(bitmap.getWidth()/NUM_FRAMES)*(height/bitmap.getHeight());
//     w =              2 * (168             / 8       ) * (  24 / 91);
//     w =              2 * (21                        ) * ( 0 );
//     w = 0; 
```

正如@JigarJoshi 指出的那样，解决方案是确保您使用浮点运算。您可以按照他的建议进行投射，也可以执行以下操作：

```
public static float NUM_FRAMES = 8.0f;
public static float FRAME_REPEAT_NO = 2.0f;
float height = 24.0f;

float w  = FRAME_REPEAT_NO * (bitmap.getWidth() / NUM_FRAMES) *
                             (height / bitmap.getHeight()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:24:09.290

遵循**BODMAS**规则...我使用此规则获得了所需的输出...

从最高到最低优先级..

**B - 括号**

**O - 电源**

**DM - 除法和乘法**

**AS - 加法和减法**

```
 w =  ((w/NUM_FRAMES)*(FRAME_REPEAT_NO)*(height))/bitmap.getHeight(); 
```

**输出：**

```
 11.076923076923077 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T05:38:21.863

其他人已经解决了你的问题，所以我不会重复他们的答案，但我会提出一个建议。考虑使用计算结果

`w = (double)(FRAME_REPEAT_NO * bitmap.getWidth() * height) / (double)(NUM_FRAMES * bitmap.getHeight())`

这使您可以生活在可预测的整数领域，直到您进行除法的最后一刻。因此，结果中的任何错误都来自单个操作，而不是聚合多个错误。如果出于某种原因你决定要得到一个整数结果，你可以放弃双打，仍然得到 11 作为答案。

没什么大不了的，但只是想我会把它放在那里。

**编辑：**我从您对另一篇帖子的评论中看到您实际上想要 11。好。所以完全放弃双打：

`w = (FRAME_REPEAT_NO * bitmap.getWidth() * height) / (NUM_FRAMES * bitmap.getHeight())`

答案正好是 11（整数），顺便说一下，这与 11.0 的浮点近似值不同。

# sql - SQL 不会从文本列中读取超过 65536 个字符

> ID：11407048
> 
> 赞同：0
> 
> 时间：2012-07-10T05:19:08.723
> 
> 标签：sql, ssis, sql-server-2008-r2

我在具有其他空间类型的表中有一个文本字段。作为 SSIS 包的一部分，我使用此文本字段在同一个表上运行更新（作为 SQL 任务）并更新几何和地理列。我昨天能够成功运行以下查询

```
UPDATE Location 
SET [Geometry] = geometry::STGeomFromText(ShapeText, 4326).MakeValid()
FROM Location 
WHERE ShapeText IS NOT NULL 
```

但是，今天它一直在抛出以下异常：

> 消息 6522，级别 16，状态 1，第 10 行在执行用户定义的例程或聚合“几何”期间发生 .NET Framework 错误：System.FormatException：24141：输入的位置 65536 处应有一个数字。

当我查看形状时，它绝对是一个有效的形状。所以问题不在于形状，而在于 SQL 最多只能从列中读取 65536 个字符。当 shapetext 少于 65536 个字符时，它可以工作。

如果有人能帮我解决这个问题并让我知道如何从文本字段中读取超过 65536 个字符，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:52:24.617

所以，最后我找到了问题和解决方案。即使这个问题看起来有点过于离散，我希望它可以帮助别人。

问题：我开始搜索这个 65536 字符的错误消息，它引导我找到提到 SQL 内存问题的博客。然后我检查了我的 SQL 日志，它确实报告了错误消息：

> 未能保留 Size= 65536 的连续内存

令人困惑的是，它一天工作，然后第二天，它开始向我抛出错误消息，所以我肯定在某个地方进行了内存消耗操作。经过仔细检查，我发现我的 SSIS 包中有一个派生列，它是所有内存问题的根源。派生列正在检查文本字段的长度，如果长度为零，则将其设置为 null。

解决方案：我删除了派生列操作并将其替换为 SQL 任务，它再次运行良好。

# shopify - Shopify 是否提供沙盒功能？

> ID：11407052
> 
> 赞同：4
> 
> 时间：2012-07-10T05:20:38.473
> 
> 标签：shopify

我正在开发一个集成 Shopify 的模块。所以我想用真实数据测试我的应用程序。Shopify 是否提供沙盒功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T11:33:23.613

如果您创建[合作伙伴帐户](https://app.shopify.com/services/partners/signup)，则可以设置一个测试商店，让您创建真实数据以用于测试您的应用程序。您可以创建的订单数量受到限制，并且只能使用虚假网关，但其他一切都是一样的。

# java - 如何在excel中导出网页

> ID：11407054
> 
> 赞同：0
> 
> 时间：2012-07-10T05:20:56.510
> 
> 标签：java, spring, jfreechart

我正在使用spring mvc，我有一个网页，其中包含一个带有数据的html表格和一个基于数据的Jfree图表，现在我的问题是如何将整个页面导出到具有相同外观的excel文件中。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:30:40.543

您可以使用

```
$(document).ready( function () {
    $('#example').dataTable( {
        "sDom": 'T<"clear">lfrtip',
        "oTableTools": {
            "sSwfPath": "/swf/copy_csv_xls_pdf.swf"
        }
    } );
} ); 
```

TableTools 是 DataTables HTML 表格增强器的插件，它为 DataTable 添加了一个高度可定制的按钮工具栏。主要特点包括：

复制到剪贴板 将表格数据保存为 CSV、XLS 或 PDF 文件 打印视图以进行清晰打印 行选择选项 易于使用的预定义按钮 简单的按钮自定义 定义明确的 API 用于高级控制

参考[Jquery DataTables 表格工具插件。](http://datatables.net/extras/tabletools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:29:41.887

据我所知，您不能只使用 JFreeChart 图表并将其转换为与您编写时“具有相同外观和感觉”的 Excel。所以这里有 2 种可能的方法： 1\. 您获取 JFreeChart 输出，将其转换为图像，并在 Apache POI 的帮助下将此图像添加到 Excel 2\. 您根本不使用 JFreeChart，而是仅使用 Apache POI API，使用数据创建 Excel 工作表并让 Excel 生成您的图表。

当然，您可以根据需要组合这两种解决方案。希望这可以帮助

# vb.net - xxx.exe has encountered a p‌r‌o‌b‌l‌e‌m and needs to close

> ID：11407059
> 
> 赞同：0
> 
> 时间：2012-07-10T05:21:31.840
> 
> 标签：vb.net, winforms, vb6, vb6-migration

I am converting programs from VB6 to VB.NET with VS2005 then to VS2010 .

This error had occured:

> 'xxx.exe' has encountered a problem and needs to close.

while I was running a report function in an application and caused it to terminate. I read message from event view.

It said the source was

> .NET Runtime 4.0 Error Reporting, event ID: 1000 desc:Faulting application tpatoprt.exe, version 2.0.4574.21092, stamp 4ffbaa28, faulting module clr.dll, version 4.0.30319.269, stamp 4ee9ae83, debug? 0, fault address 0x0019b930.

and

> .NET Runtime, event ID :1023 desc: Application: TPATOPrt.exe Framework Version: v4.0.30319 Description: The process was terminated due to an internal error in the .NET Runtime at IP 792DB930 (79140000) with exit code 80131506.

The following link just like my problem: [http://4.bp.blogspot.com/_681goxWLnCg/S99AQRndqII/AAAAAAAAAfA/KQBnplFJ5-Y/fake_svchost_popup.jpg](http://4.bp.blogspot.com/_681goxWLnCg/S99AQRndqII/AAAAAAAAAfA/KQBnplFJ5-Y/fake_svchost_popup.jpg)

I tried to correct in many ways..but sadly it still occurs.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:46:03.797

您将不得不假设问题与您的代码有关，除非您另有发现。Hans Passant 为您提供了指向类似问题的链接。您可能已经注意到没有人能够给出解决方案，即使这是两年前的事了。因此，您不太可能得到直接的解决方案，除非您有幸让 .NET 运行时的专家来查看您的问题。

最好的办法是让您自己尝试找出问题的根源。你有任何类型的调用堆栈吗？如果是这样，那么这将是关于发生错误的行的一个很好的线索。否则，单步调试调试器中的代码，直到找到导致错误的行。此时，您也许可以自己解决问题。但无论如何，发布导致此问题的代码行，您可能会得到更大的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T02:45:13.787

为了解决这个问题，我使用 try..catch 或 On Error GoTo ErrExit 来查找导致“xxx.exe”错误的代码部分遇到问题需要关闭。发生。然后重写代码，因为有一个或多个代码使它发生。尝试使用其他方式替换旧代码。然后再次运行，它成功了。所有错误消失。

我希望这可以帮助其他人解决问题。

# php - 如何从包含的文件中插入数据并自动创建 HTML 元素？

> ID：11407060
> 
> 赞同：0
> 
> 时间：2012-07-10T05:21:33.117
> 
> 标签：php

我想从包含的文件中插入数据并自动创建 HTML 元素。

在**data.php**我有：

```
$vps_de_dc1_s1 = array(
"name"=>"Germany, DC1, First",
"price"=>"10€",
);

$vps_de_dc1_s2 = array(
"name"=>"Germany, DC1, Second",
"price"=>"10€",
); 
```

$vps_de_dc2_s1 ...、$vps_de_dc2_s2 ...、$vps_cz_dc1_s1 ...、$vps_cz_dc12_s1 ...等。

在**page.php**中应该有：

```
include('data.php');

<tr class="vps_de_dc1">
    <td class="column-left">
        name
    </td>
    <td class="column-right">
        $vps_de_dc1_s1["name"]
    </td>
    <td class="column-right">
        $vps_de_dc1_s2["name"]
    </td>
    <td class="column-right">
        $vps_de_dc1_s3["name"]
    </td>
</tr>

<tr class="vps_de_dc2">
    <td class="column-left">
        name
    </td>
    <td class="column-right">
        $vps_de_dc2_s1["name"]
    </td>
    <td class="column-right">
        $vps_de_dc2_s2["name"]
    </td>
    <td class="column-right">
        $vps_de_dc2_s3["name"]
    </td>
</tr>

... 
```

我想知道，是否可以在这里以某种方式自动创建表格元素？

* * *

更新：事实上，`echo`我必须手动创建所有表实例。但我想找到一种方法来`<tr class="vps_*_dc*">...</tr>`为每个`$vps_*`来自 data.php 的人自动创建所有这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:34:56.200

首先从 data.php 开始。在底部，添加所有数组的主数组：

```
$masterArray = array(
    'vps_de' => array ('dc' => 2, 's' => 4), // The key is the root name.
    'vps_cz' => array ('dc' => 2, 's' => 4), // The value is information about how many dc and s exist per location.
    // This example means that this has 2 dc and 4 s for a total of 8 possible arrays that you've defined.
    ...
); 
```

在 page.php 中：

```
foreach ($masterArray as $varName => $infoArray) // Iterating through the master list.
{
    for ($dc = 1; $dc <= $infoArray['dc']; $dc++) // Iterating through however many numbers up to the dc limit.
    {
        $className = $varName . '_dc' . $dc; // Creating the class name, which is the location key root concatenated with the dc number.
        echo '<tr class="' . $className . '">'; // Echo the table row.
        for ($s = 1; $s <= $infoArray['s']; $s++) // Iterating through however many numbers up to the s limit.
        {
            $arrayName = $className . '_s' . $s; // Creating the name of the variable, reference to the array.
            if (isset($$arrayName)) // Checking to see if the variable by the name we just created exists.
            {
                $tmpArray = $$arrayName; // Using a variable variable to reference the array using its name.
                echo '<td class="column-left">';
                echo $tmpArray['name']; // I think you can use $$arrayName['name'] here, but it's been loaded to $tmpArray just to be safe.
                echo '</td>';
            }
        }
        echo '</tr>';
    }
} 
```

编辑：在阅读了您的问题之后，您的要求似乎比我最初想象的要复杂。

希望这是您正在寻找的。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:30:21.307

```
<?php

include('data.php');

echo "
<tr class=\"vps_de_dc1\">
    <td class=\"column-left\">
       name
    </td>
    <td class=\"column-right\">".
       $vps_de_dc1_s1["name"].
    "</td>
    <td class="column-right">".
       $vps_de_dc1_s2["name"].
    "</td>
    <td class=\"column-right\">".
       $vps_de_dc1_s3["name"].
    "</td>
</tr>

<tr class=\"vps_de_dc2\">
    <td class="column-left">
       name
    </td>
    <td class=\"column-right\">".
       $vps_de_dc2_s1["name"].
    "</td>
    <td class=\"column-right\">".
       $vps_de_dc2_s2["name"].
    "</td>
    <td class=\"column-right\">".
       $vps_de_dc2_s3["name"].
    " </td>
</tr>"

?> 
```

# mysql - 在数据库中存储业务逻辑

> ID：11407062
> 
> 赞同：30
> 
> 时间：2012-07-10T05:21:43.150
> 
> 标签：mysql, database, business-logic, business-rules, segment

我们想编写一些在某些数据之上工作的业务逻辑规则来构建报告。不确定哪个是最好的将它们存储在数据库 MySQL 中。

![在此处输入图像描述](../Images/467be98f425c3ca5dd2c6bb5ea16eb67.png)

它可以有一个规则链，然后是一个结果声明，如上所示。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T07:22:45.427

对于构建报告，您可以使用任何编程语言转换业务逻辑。并使用数据库数据生成报告。

**反对存储在数据库中的业务逻辑**

> 我非常看重表达的力量，我发现 SQL 空间并不是那么富有表现力。使用手头上最好的工具来完成最合适的任务。摆弄逻辑和高阶概念最好在最高级别完成。因此，存储和海量数据操作最好在服务器级别完成，可能在存储过程中。
> 
> 但这取决于。如果您有多个应用程序与一种存储机制进行交互，并且您希望确保它保持其完整性和工作流程，那么您应该将所有逻辑卸载到数据库服务器中。或者，准备好管理多个应用程序中的并发开发。

资料来源：[存储过程中支持/反对业务逻辑的论点](https://stackoverflow.com/a/484563/1045444)

也可以看看：

1.  [数据库中的业务逻辑](http://pyrseas.wordpress.com/2012/01/02/business-logic-in-the-database/)
2.  [存储过程中的业务逻辑](http://c2.com/cgi/wiki?BusinessLogicInStoredProcedures)
3.  [在数据库中存储条件逻辑表达式/规则](https://stackoverflow.com/questions/545603/storing-conditional-logic-expressions-rules-in-a-database)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-15T08:26:14.823

![模型](../Images/5baf46a16f8ca938cd33bc632f87d8b4.png)

```
CREATE TABLE businessRule (
  id INT NOT NULL ,
  name VARCHAR(32) NOT NULL ,
  description VARCHAR(255) NULL ,
  statement VARCHAR(255) NOT NULL ,
  PRIMARY KEY (id) )
ENGINE = InnoDB;

CREATE TABLE leftOperand (
  id INT NOT NULL ,
  value VARCHAR(255) NOT NULL ,
  PRIMARY KEY (id) )
ENGINE = InnoDB;

CREATE TABLE ruleItem (
  id INT NOT NULL ,
  businessRuleId INT NOT NULL ,
  operator ENUM('if','and','or','not') NOT NULL ,
  loperand INT NOT NULL ,
  comparator ENUM('<','=','>') NOT NULL ,
  roperand VARCHAR(255) NOT NULL ,
  roperand_ispercentage TINYINT(1)  NOT NULL ,
  PRIMARY KEY (id) ,
  INDEX businessRule_FK (businessRuleId ASC) ,
  INDEX leftOperand_FK (loperand ASC) ,
  CONSTRAINT businessRule_FK
    FOREIGN KEY (businessRuleId )
    REFERENCES mydb.businessRule (id )
    ON DELETE CASCADE
    ON UPDATE RESTRICT,
  CONSTRAINT leftOperand_FK
    FOREIGN KEY (loperand )
    REFERENCES mydb.leftOperand (id )
    ON DELETE RESTRICT
    ON UPDATE RESTRICT)
ENGINE = InnoDB; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-07-18T14:58:48.897

反对“软编码”业务逻辑的论点如下：[http ://thedailywtf.com/Articles/Soft_Coding.aspx](http://thedailywtf.com/Articles/Soft_Coding.aspx)

> “我们发现自己是软编码的原因是因为我们害怕改变。不是正常的害怕改变，而是害怕我们编写的代码会因为业务规则的改变而改变。这是一种非常愚蠢的恐惧. 软件的全部意义（因此，“软”）是它可以改变它会改变。使您的软件免受业务规则更改的唯一方法是构建一个完全通用的程序，它没有所有业务规则但可以实施任何规则。哦，他们已经构建了那个工具。它叫做 C++。还有 Java。还有 C#。还有 Basic。而且，我敢说，COBOL。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-18T09:25:05.460

我能给你的只是你应该解决这个问题的方法，而不是答案本身。

设计数据库以存储此类复杂数据的一般方法是设计将它们作为对象保存在内存中的方式，然后尝试相应地设计数据库。毕竟，您将在编程语言中评估规则。过程如下： 首先是类图

![类图](../Images/5691e44ba540bd70aff5f21bda2ad155.png)

然后是时候将其转换为 ERD：

![在此处输入图像描述](../Images/d609283cfce675cbb8f64bad704d764c.png)

一旦你有一个数据库结构来存储/重新加载你的对象，你可以简单地创建你的类，这样每个对象都负责加载/存储自己。

**[更新]**

例如，如果要将语句存储`a + b * -c`到数据库中，可以将其翻译为以下插入：

```
-- c
INSERT INTO statement (statement_id) VALUES (1);
INSERT INTO operand (statement_id, type) VALUES (1, 'double');
-- - (minus)
INSERT INTO statement (statement_id) VALUES (2);
INSERT INTO operator (statement_id, type) VALUES (2, 'minus');
-- -c
INSERT INTO binary (operator_statement_id, operand_statement_id) VALUES (2, 1);
-- b
INSERT INTO statement (statement_id) VALUES (3);
INSERT INTO operand (statement_id, type) VALUES (3, 'double');
-- * (multiply)
INSERT INTO statement (statement_id) VALUES (4);
INSERT INTO operator (statement_id, type) VALUES (4, 'multiply');
-- b * -c
INSERT INTO unary (operator_statement_id, operand_statement_id1, operand_statement_id2) VALUES (4, 3, 2);
-- a
INSERT INTO statement (statement_id) VALUES (5);
INSERT INTO operand (statement_id, type) VALUES (5, 'double');
-- + (plus)
INSERT INTO statement (statement_id) VALUES (6);
INSERT INTO operator (statement_id, type) VALUES (6, 'sum');
-- a + b * -c
INSERT INTO unary (operator_statement_id, operand_statement_id1, operand_statement_id2) VALUES (6, 5, 4); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-19T00:22:43.750

我认为首先需要做的是质疑您是否应该将规则放入数据库中。

**数据库是一种繁重的解决方案**，通常根本不需要。

在处理过各种形式的规则引擎（包括数据库驱动）之后，我可以告诉你它会很快变得非常令人沮丧和低效。我见过的最大错误之一是尝试编写自己的临时规则语言并使用它来通过数据库驱动条件逻辑。至少，使用已经过验证的语言（Python、javscript 等）并将其嵌入其中。

更好的是——如果规则足够复杂，我个人更喜欢使用 Excel 电子表格。我们将其用于自动化（处理基于生效日期等的可变逻辑），我们还将相当复杂的保险评级逻辑编译为通过 Web 服务接口的 Perl 脚本，使用此产品：[http ://decisionresearch.com/products/评级.html](http://decisionresearch.com/products/rating.html)。

将逻辑存储在数据库中与 Excel 电子表格进行对比：

1.  与 Excel 相比，数据库中的逻辑更难测试和开发，因为 Excel 提供即时反馈。
2.  与 Excel 相比，数据库的表现力要低得多（少得多）。
3.  您可以对 Excel 进行颜色编码并向 Excel 添加各种其他视觉提示，以使错误条件等真正脱颖而出。

当然，您可以想象，Web 服务驱动的 Excel 规则引擎并不适合所有情况。这不是这里唯一可能的解决方案。

不过，我要确保您在可用性/表现力/可测试性/性能方面做出正确的权衡。在我工作的地方，正确和高效比快速执行更重要，因此我们使用 Excel/Web 服务。

并且扩展 slavik262 的评论，**您真正希望使用规则引擎最终实现的是抽象和泛化，以最大限度地减少移动部件并提高可靠性、可测试性和可理解性。**以我的经验，数据库规则引擎通常与甚至只是简单地制作基于 Java 的规则相比是次优的。只要它们被沙盒化并正确组织，并隐藏在通用且一致的界面后面，那么它们就可以正常工作。

在我的公司，这取决于规则的规模以及它们改变的频率。评级保险-Excel，毫无疑问。一些国家特定的逻辑？接口的 Java 规则文件就足够了。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-07-19T14:34:04.517

如果您不需要基于规则的组件执行搜索，那么您可以将规则存储在数据库的两个字段中。语句在一个中执行的条件和在另一个中执行的语句。

```
id, name, description, condition, statement 
```

您的规则可以使用 JSON 或类似的格式存储。

我需要定义一些我将要使用的术语。有**原子术语**，系统值与用户输入的值比较，评估为真/假，**复杂术语**，使用逻辑运算符组合的术语。

在**原子术语**中，**var**表示系统将提供的值（例如访问者的数量或唯一访问者的数量）。**比较**确定如何根据**value**评估**var**。该**值**是用户生成的数字或字符串。当 var 和 value 都是数字时，比较可以是 "<"、"<="、"="、">=" 或 ">"。当 var 和 value 都是字符串时，比较可以是“等于”、“开始于”、“结束于”或“包含”。原子项可以存储如下：

 ****```
{ var: varName, comp: comparison, value: numberOrString } 
```

您可以使用以下格式存储由连词、析取和否定（和/或/非）组成的复杂术语。

```
// Conjunction
{ op: "and", terms: [ term, ..., term ] }

// Disjunction
{ op: "or", terms: [ term, ..., term ] }

// Negation
{ op: "not", term: term } 
```

然后，您可以使用这些方法构建评估为真/假的语句。一个例子如下：

```
{ op: "and", terms: [
    {op "or", terms: [
        { field: "numVisitors", comp: ">", value: 1000 },
        { field: "numUniqueVisitors", comp: ">=" 100 }
    ]},
    { op: "not", term: {
        { field: "numVisitors", comp: "<", value: 500 }
    }}
]} 
```

当访问者数量大于 1000 或唯一访问者数量大于等于 100 且访问者数量不小于 500 时，上例等价于 true。

然后，当规则评估为真时，您可以执行您称为“语句”的内容。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-13T20:44:02.060

因此，如果我理解正确，您希望使用前端来允许人们动态创建将应用于查询的逻辑（在运行时根据正在使用的规则动态构建 where 子句）？

如果是这种情况，您需要非常具体地说明他们可以在规则中选择哪些条件（更改什么值（列），以便他们只能针对您报告的数据集中存在的列使用条件规则）。

如果我正确理解了您的问题，我将首先绘制出您希望他们能够选择条件的表/列。这将是您为网页设计规则的控件。

但是，如果您只是询问在数据库中选择规则后如何存储规则，我建议将其存储在包含以下内容的单个表中：

```
ID  |  RuleSetName         |  Table     |  Column      |  Comparison  |  Value   |  Percentage  |  Notes  |  CreatedDate  |  Created By
1   |  'VisitorAnalytics'  |  Visitors  |  SUM(Views)  |  >           |  null    |  10          |  n/a    |  1/1/2012     |  JohnDoe 
```

然后，一旦创建了这些记录，您将通过将表注入 from 子句，将列注入动态 sql 的 where 子句来使用它们。

我知道这听起来可能令人困惑，但您要问的是一个相当复杂的解决方案。但最终，您只想将规则一起存储在一个可以循环动态构建然后执行 SQL 以生成报告的地方。希望这会为您指明正确的方向。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-18T13:41:36.423

一种简单的方法是使用 OODBMS。在那里，方法用槽封装到对象中，它们甚至可以在数据库中执行（如触发器）。

现在如果你坚持使用 SQL 数据库，你可以做的是使用动态编程语言，并有一个表来存储代码，可能与其他表或行相关联。

几年前，我看到了阿尔及利亚政府税收系统的招标，他们计划将业务规则（税收规则）作为 Visual Basic 代码存储在 RDBMS 中。

您可以选择任何可以轻松将解释器嵌入到应用程序中的语言（Common Lisp [http://ecls.sourceforge.net](http://ecls.sourceforge.net)；或者[http://common-lisp.net/project/armedbear/](http://common-lisp.net/project/armedbear/)，如果您使用以下语言编写应用程序Java)、Lua、Javascript、Scheme 等。

它倾向于使用 Common Lisp 或 Scheme，因为使用这些语言，您可以轻松地为业务规则编写 DSL。

给出的示例可以写成符号表达式，例如：

```
(rule :name "RuleName"
      :description "Some description"
      :body (if (and (< (change-in total-visitor)   (percent 10))
                     (> (change-in unique-visitors) (percent 2)))
                (do-something))) 
```

在 lisp 中，这样的符号表达式可以使用 PRINT 或 PRINT-TO-STRING 运算符以可读的方式打印出来，这样您就可以将此表达式插入 SQL 数据库：

```
insert into rules (id,expression) values (42,"(rule :name \"RuleName\"
      :description \"Some description\"
      :body (if (and (< (change-in total-visitor)   (percent 10))
                     (> (change-in unique-visitors) (percent 2)))
                (do-something)))"); 
```

您可以从 SQL 中获取它，使用 lisp READ 或 READ-FROM-STRING 运算符将其作为符号表达式读回，然后使用正确的 DSL，您可以使用 lisp EVAL 运算符对其进行评估：

```
;; with the right DSL written:
(eval (read-from-string (sql-select (expression) :where (= id 42)))) 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-07-20T02:20:55.837

我猜测规则的目的是从现有的数据库表（或表）中命名计算字段。否则，仅出于报告目的，您可以将数据转储到 Excel 中，并让用户使用 Excel 函数和数据透视表来实现其目的。

关键问题是你将如何将规则转化为行动。如果目的只是为了存储业务规则，那么就可以创建业务规则报表，那么简单的 SQL 数据结构就足够了。

但是，如果要将规则转化为代码，则需要考虑代码将在何处运行。当数据存储在 SQL 中时，您有多种选择：

*   创建将提取“业务规则”结果的 SQL 代码。
*   创建将解析和执行业务规则的用户定义函数。
*   将数据提取到另一个环境，例如 C++ 或 C#，并在那里运行代码。

我对其中的第一个有偏见。主要原因是它将工具限制为一个：SQL。

我不确定您的规则在做什么；关键是“语句”组件的作用。让我假设这是一个常数或可以计算的数据表达式。在这种情况下，您的规则开始看起来很像案例陈述。需要注意的是，该语句可能需要查看数据表中的多行（以处理随时间的变化）。

我的建议是将这些规则存储在数据库中。此存储将允许您使用 SQL 编码从一系列业务规则构造查询。Mysql 允许动态 SQL（现在）。在不了解基础表和规则的情况下，很难提供更多信息。

我可以说我设计了一个用于场景分析的复杂得多的系统。场景本身存储在电子表格、一系列表格、常量等中——很像您的业务规则。该系统通过使用 SQL（和一些 Excel）将场景的电子表格表示转换为（巨大的）查询来工作。然后它可以运行查询以生成相关的报告。该系统已被证明灵活、高效且功能强大。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-19T16:07:49.747

使用存储过程的唯一可能好处是可以从使用不同技术（如 Python 和 Java）的应用程序访问数据库。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-19T19:00:44.870

我想您是否已经记录了现有的业务逻辑规则和要求？.. 这是设计架构、选择最佳客户端开发工具和设计客户端程序和过程的最重要因素。我为我的当铺管理应用程序做了这个。该应用程序的功能完全由表驱动。它具有控制表，管理员可以在其中更改有效参数以修改系统的工作方式。当与结构化编程技术结合使用时，可以最大限度地减少编程代码修改量。银行应用程序也是具有复杂业务规则的一个很好的例子。****

# javascript - 下划线模板错误 = Uncaught SyntaxError: Unexpected token ILLEGAL

> ID：11407064
> 
> 赞同：0
> 
> 时间：2012-07-10T05:22:04.830
> 
> 标签：javascript, backbone.js, underscore.js

```
var metrobusApp = metrobusApp || {Views:{},Models:{},Routes:{},JST:{}};
metrobusApp.JST["/main"] = _.template('
    <label>Introduzca el codigo de la tarjeta</label>
    <input type="text" id="txtCodigo"/>
    <input type="submit" id="btnSubmit"/>
    ');

metrobusApp.JST["/consultar/:id"] = _.template('
    <p>Id: <%tarjeta.get("id")%></p>
    <p>Saldo: <%tarjeta.get("saldo")%></p>
    <p>Estado de Contrato: <%tarjeta.get("estadoContrato")%></p>
    <p>Fecha y Hora: <%tarjeta.get("tiempo").fecha%> <%tarjeta.get("tiempo").hora%></p>
    '); 
```

我正在做一个带有骨干网和 phonegap 的应用程序。但首先我想在浏览器中对其进行测试，然后在模板文件中出现此错误： Uncaught SyntaxError: Unexpected token ILLEGAL

我做错了什么？错误出现在第 2 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T05:24:16.423

`\`在javascript中，如果它是多行的，则需要放在每行字符串文字的末尾

像

```
metrobusApp.JST["/main"] = _.template('\
    <label>Introduzca el codigo de la tarjeta</label>\
    <input type="text" id="txtCodigo"/>\
    <input type="submit" id="btnSubmit"/>\
    '); 
```

或者您可以将其拆分为几个连接的字符串，例如：

```
'foo' + 
'bar' + 
'baz' 
```

# joomla-extensions - Joomla : Mambot

> ID：11407067
> 
> 赞同：0
> 
> 时间：2012-07-10T05:22:19.090
> 
> 标签：joomla-extensions

**Q1- Do some body knows what actually Mambot does in Joomla?**

**Q-2 Is there any Mambot for Joomla - 2.5.6?**

**Q-3 If Mambot is Suite of Administrator Modules, is there any other Extention which replace Mambot?**

I googled but very little found that Mambot is just like a **plugin**.

I also visited [Joomla Extensions - Joomla Official Website](http://extensions.joomla.org/) but surprised when saw that ![enter image description here](../Images/25fce068a0ae658c987c14fda45ec1fc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:56:34.020

1- [http://help.joomla.org/content/view/1893/251/](http://help.joomla.org/content/view/1893/251/) ::

> Mambots 本质上是代码片段或小程序，当通过各种参数调用时，它们要么激活程序、脚本，要么在组件或数据库上执行特定功能。

2-但似乎mambot不像各种类型的模块或组件等，已经创建了一些mambot来控制或访问一些商业插件、组件或其他东西。

3-对不起，我对你的第三个问题一无所知。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-22T11:05:04.567

Q1。Mambots 仅与 Joomla 1.X 相关。它们反映了早期版本源于“曼波”。Mambots 是在页面级别插入的小段代码。它们与模块的不同之处在于它们不能分配给特定的菜单项。

Q2。在包括 2.5 在内的更高版本的 Joomla 中，Mambots 被“插件”取代。

Q3。插件取代了 mambots，您可以根据需要发布/取消发布安装和卸载

# c# - 如何将按钮从一个面板拖放到另一个面板？

> ID：11407068
> 
> 赞同：9
> 
> 时间：2012-07-10T05:22:22.010
> 
> 标签：c#, winforms

我在一个表单中有 5 个面板，在两个不同的面板中有两个按钮，现在的要求是将按钮从一个面板移动到另一个面板。

请给我一个代码。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-10T13:09:36.870

为了演示，在一个表单上放置两个面板，在其中一个面板中放置一个按钮：

```
public Form1() {
  InitializeComponent();

  panel1.AllowDrop = true;
  panel2.AllowDrop = true;

  panel1.DragEnter += panel_DragEnter;
  panel2.DragEnter += panel_DragEnter;

  panel1.DragDrop += panel_DragDrop;
  panel2.DragDrop += panel_DragDrop;

  button1.MouseDown += button1_MouseDown;
}

void button1_MouseDown(object sender, MouseEventArgs e) {
  button1.DoDragDrop(button1, DragDropEffects.Move);
}

void panel_DragEnter(object sender, DragEventArgs e) {
  e.Effect = DragDropEffects.Move;
}

void panel_DragDrop(object sender, DragEventArgs e) {
  ((Button)e.Data.GetData(typeof(Button))).Parent = (Panel)sender;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-06T23:39:13.543

此方法也适用于组框，但必须手动添加 MouseEnter、MouseLeave 和 MouseUp 事件：

```
public frmMain ( ) {
    InitializeComponent ( );

    pbxMoveIt.BringToFront ( );
    gbx1.AllowDrop = true;
    gbx2.AllowDrop = true;
    lblStatus.Text = "GUI Status: Started";
    gbx1.MouseEnter += gbx_MouseEnter;
    gbx1.MouseLeave += gbx_MouseLeave;
    gbx1.MouseUp += gbx_MouseUp;
    gbx2.MouseEnter += gbx_MouseEnter;
    gbx2.MouseLeave += gbx_MouseLeave;
    gbx2.MouseUp += gbx_MouseUp;
}

private void gbx_MouseEnter ( object sender, EventArgs e ) {
    // useful code
    // ...
}
private void gbx_MouseLeave ( object sender, EventArgs e ) {
    // useful code
    // ...
}
private void gbx_MouseUp ( object sender, EventArgs e ) {
    // useful code
    // ...
} 
```

# ruby-on-rails - rails changing the root route

> ID：11407073
> 
> 赞同：0
> 
> 时间：2012-07-10T05:22:58.140
> 
> 标签：ruby-on-rails

I'm using the Enki gem to create a blogging application. By default, it makes the root route to the index of the posts_controller.rb

```
root :to => 'posts#index' 
```

However, I don't want the blog to be the root page, so, I made a scaffold with a homes_controller.rb and tried to set it to the root

```
root :to => 'homes#index' 
```

However, in spite of making that change, it's still resolving to posts#index when I start the server. It does the same even if I try in a new browser (i.e. it's not a caching issue).

I have copied the config/routes.rb file below. Can anyone explain...

```
Enki::Application.routes.draw do

  namespace :admin do
    resource :session

    resources :posts, :pages do
      post 'preview', :on => :collection
    end
    resources :comments
    resources :undo_items do
      post 'undo', :on => :member
    end

    match 'health(/:action)' => 'health', :action => 'index', :as => :health

    root :to => 'dashboard#show'
  end

  resources :archives, :only => [:index]
  resources :pages, :only => [:show]
resources :homes
  constraints :year => /\d{4}/, :month => /\d{2}/, :day => /\d{2}/ do
    get ':year/:month/:day/:slug/comments'  => 'comments#index'
    post ':year/:month/:day/:slug/comments' => 'comments#create'
    get ':year/:month/:day/:slug/comments/new' => 'comments#new'
    get ':year/:month/:day/:slug' => 'posts#show'
  end

  scope :to => 'posts#index' do
    get 'posts.:format', :as => :formatted_posts
    get '(:tag)', :as => :posts
  end

  #root :to => 'posts#index'
  root :to => 'homes#index'

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:56:34.690

将根放在路由文件的顶部。Rails 路由自上而下解析

# c# - 基于配置文件以编程方式创建新的 NUnit 测试

> ID：11407075
> 
> 赞同：2
> 
> 时间：2012-07-10T05:23:03.613
> 
> 标签：c#, .net, unit-testing, nunit

我正在寻找是否可以在运行时向 NUnit 动态添加额外的测试，我计划基于配置文件。我的测试旨在比较来自两个来源的数据（例如开发系统和测试系统，用于一组特定的值，包括日期和客户端。）因此，数据不需要硬编码（我这样做用于其他测试。）我目前已经为一组我想要测试的值（例如，不同的日期和客户）设置了大量测试，这些值被硬编码到我的源代码中，类似于如下：

```
[Test]
public void ClientName_Janurary_1_2012()
{
    RunTest("Client Name", new DateTime(2012, 1, 1));
} 
```

但是，这意味着如果需要测试其他日期，则需要更改源代码`[Test]`以为每个日期添加一个方法（通常这些测试方法将只有一行，即调用另一种方法，日期为一个参数。）

是否可以动态创建在运行时出现在 NUnit 中的测试，因此可以通过更改配置文件来添加测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:02:45.487

我建议不要在每次数据更改时生成新测试，而是编写一个参数化测试和一个 NUnit 扩展，将文件用作测试的输入。您可能可以使用[NUnit RowTest 之](http://code.google.com/p/rowtest-extension/downloads/list)类的东西作为起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T06:26:36.093

正如其他人所说，您真正要问的（我认为）是如何在运行时使用新的测试*数据*。

[您可以使用TestCaseSource](http://www.nunit.org/index.php?p=testCaseSource&r=2.5)属性在 NUnit 中本地执行此操作。只需将属性指向一个函数，该函数读取您的配置文件并将输入映射到所需的输出。测试数据中的每个点都将显示为该测试方法的一个单独的“子”。

# html - Persistent storage maximum size reached while the length of storage is 0

> ID：11407079
> 
> 赞同：2
> 
> 时间：2012-07-10T05:23:25.360
> 
> 标签：html, local-storage

I got a "Persistent storage maximum size reached" error when I call the following code:

```
 localStorage.setItem('key', 1); 
```

But when I get the length attribute of the localStorage, the result is 0:

```
 localStorage.length; // returns 0 
```

The problem occurred on my Firefox 13.0.1 Mac version

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-22T23:58:30.813

`localStorage/sessionStorage`限制可以设置为零。使用以下过程进行检查：

*   打开配置地址：about:config
*   在搜索中键入存储查询：`storage`
*   检查配额值：`dom.storage.default_quota`
*   将其更改为非零值

**参考**

*   [Dom.storage.default 配额 - MozillaZine 知识库](http://kb.mozillazine.org/Dom.storage.default_quota)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-01T15:40:16.393

我能够通过基本上清除以下所有内容来解决此问题：首选项->隐私->清除您最近的历史记录（清除所有历史记录）

我最终检查了所有复选框并点击立即清除。

我们遇到了同样的问题，一些本应存储在 localStorage 中的数据由于存储中的其他一些项目而没有被填充。这清除了它。我想也许是饼干，但我现在不确定。

# c - How to calculate TCP checksum

> ID：11407081
> 
> 赞同：7
> 
> 时间：2012-07-10T05:23:25.880
> 
> 标签：c, linux, networking, network-programming, linux-kernel

I am writing a Kernel Module that uses Netfilter hooks to modify some of the TCP header information and obviously, before sending, I want to re-calculate the checksum.
I also edit the header at the receiving side, so I need to re-calculate it there too.

Searching online, I found some people saying I can simply set it to 0 and it'll be calculated for me, apparently that didn't work.
I've also found this function

```
tcp_v4_send_check(struct sock *sk, struct sk_buff *skb); 
```

Though no one explained how this is used, and whether I can actually use it at the receiving/sending the same way.
My own attempt was to set checksum to 0 then call this function passing the skb I have and the skb->sk I have, still nothing.

So please, what is a straightforward way to calculate the checksum of TCP datagrams?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:42:59.167

要重新计算校验和，您最好计算增量校验和 - 只需根据您更改的字段修改现有校验和，而不是读取整个数据包。

这必须在您更改数据包时完成，当您知道旧值和存储的新值时。

基本思想是`tcp->check += (new_val - old_val)`。
它比这更复杂一点，因为：
1.`old_val`并且`new_val`需要是 16 位值，它们在 2 个字节上对齐（例如更改端口号）。
2.校验和使用补码算法，所以需要做“进位反馈”。这基本上意味着，如果`tcp->check + new_val - old_val`是负数，则需要从结果中减去 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:13:11.133

这是一个结合了 netfilter API + TCP（不是 IP）校验和的示例：

[http://www.linuxvirtualserver.org/software/tcpsp/index.html](http://www.linuxvirtualserver.org/software/tcpsp/index.html)

查看名为 tcpsp_core.c 的文件。

```
 th->check = 0;
    th->check = csum_tcpudp_magic(iph->saddr, iph->daddr,
                                  datalen, iph->protocol,
                                  csum_partial((char *)th, datalen, 0));
    skb->ip_summed = CHECKSUM_UNNECESSARY; 
```

（注意它首先分配为零，计算校验和，然后 IP 校验和指示为不需要）。

取决于您加载的 netfilter 模块（有很多！！！）它们将在不同的层工作，例如，在 IP 层工作的 iptable 如下所示（图片）：

[http://ars.sciencedirect.com/content/image/1-s2.0-S1389128608004040-gr3.jpg](http://ars.sciencedirect.com/content/image/1-s2.0-S1389128608004040-gr3.jpg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-30T00:54:05.067

@ugoren 的回答并不准确。根据 RFC1624 [https://www.rfc-editor.org/rfc/rfc1624](https://www.rfc-editor.org/rfc/rfc1624)，这有时会产生 -0 (0xFFFF)，这是不允许的。

计算校验和的正确方法应该是： `new_tcp_check = ~(~old_tcp_check + ~old_val + new_val)`

# android - NoClassDefFoundError: com/android/sdklib/xml/ManifestData started appearing for unknown reasons

> ID：11407083
> 
> 赞同：0
> 
> 时间：2012-07-10T05:23:39.233
> 
> 标签：android, eclipse, blackberry

This error suddenly started occurring on BlackBerry projects that worked a week ago, can't think of what could have changed in the past week. The error doesn't happen when I'm working on Android projects.

I've checked similar questions on the site and the path and classpath variables are fine. I also updated to the latest Java SDK, just in case something got messed up. I'm running Windows 7 (x64), Eclipse (x64) and Java (x64).

***Here's the error log entry***

```
java.version=1.7.0_05
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_CA
Command-line arguments:  -os win32 -ws win32 -arch x86_64 
```

Error Tue Jul 10 00:53:40 EDT 2012 An internal error occurred during: "Launching UAV Coverage (1)".

java.lang.NoClassDefFoundError: com/android/sdklib/xml/ManifestData

```
at net.rim.ajde.internal.launch.BlackBerryAndroidLaunchConfigDelegate.startLaunch(BlackBerryAndroidLaunchConfigDelegate.java:425)
at net.rim.ajde.internal.launch.BlackBerryAndroidLaunchConfigDelegate.run(BlackBerryAndroidLaunchConfigDelegate.java:326)
at net.rim.ajde.internal.launch.BlackBerryAndroidLaunchConfigDelegate.launch(BlackBerryAndroidLaunchConfigDelegate.java:308)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:937)
at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1141)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

Caused by: java.lang.ClassNotFoundException: com.android.sdklib.xml.ManifestData

```
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 8 more 
```

Thanks Rob

# ms-word - How to hide text in Word Document using Apache POI library

> ID：11407085
> 
> 赞同：1
> 
> 时间：2012-07-10T05:23:48.510
> 
> 标签：ms-word, apache-poi

Is it possible to hide text in MS Word Document using Apache POI library? If yes, please let me know how. I am able to create and read the document using POI library. Is there any way to hide some kind of text (could be in header or anywhere in the document).

Thanks in advance,

idds24

# php - 如何在 symfony 1.4 中使用 tinyMCE？

> ID：11407095
> 
> 赞同：0
> 
> 时间：2012-07-10T05:25:18.393
> 
> 标签：php, symfony1, tinymce, symfony-1.4

我需要为我的 symfony 项目使用 HTML 编辑器。因此，我将 tinyMCE 编辑器与 sfFormExtraPlugin 一起使用。

这些是我遵循的步骤

*   `php symfony plugin:install sfFormExtraPlugin`
*   下载最新的 tinyMCE 并将 tiny_MCE 目录添加到`web/js`
*   并在小部件中使用它`'text' => new sfWidgetFormTextareaTinyMCE(array()),`

但是当我保存值时，它既显示又保存在带有 html 标签的 db 中......我该如何阻止它？

或者有没有其他方法可以在 symfony 中使用 HTML 编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:01:53.940

如果您不想保存 HTML 标签，为什么要使用 sfWidgetFormTextAreTinyMCE？！
只需使用文本区域...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:13:07.687

事实上，这就是 TinyMCE 的目的：为构建富文本提供用户友好的界面。然后它将 html 保存到您的数据库中，当您必须显示内容时，您不必再次解析它。

但是如果你想使用不同的方法，你可以使用[markdown](http://en.wikipedia.org/wiki/Markdown)（在很多项目中使用，比如 Github 甚至这里）。有不同的插件来实现 Markdown 集成：

*   [https://github.com/jmather/majaxMarkdownPlugin](https://github.com/jmather/majaxMarkdownPlugin)
*   [http://www.symfony-project.org/plugins/sfWmdPlugin](http://www.symfony-project.org/plugins/sfWmdPlugin)
*   [https://github.com/KnpLabs/knpMarkdownPlugin](https://github.com/KnpLabs/knpMarkdownPlugin)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-20T07:19:53.967

```
sfOutputEscaper::unescape("Escaped Text"); 
```

# javascript - 从 Javascript 文件中获取价值

> ID：11407099
> 
> 赞同：2
> 
> 时间：2012-07-10T05:26:16.550
> 
> 标签：javascript, cordova

我为语言设置创建了一个 javascript 文件（.js）。那么我怎样才能从这个文件中获取值呢？

文件。

```
{
"language" : "german",

"glossary" : {
    "Level" : "Ebene",
    "Codes" : "Codes",
} } 
```

那么如何为特定标签设置值。？

我想要“Ebene”而不是“Level”。例如。

```
<script type="text/javascript"> document.getElementById("lblLevel").innerHTML = glossary["Level"]; 
```

```
<div class="level">
     <b id = "lblLevel">Level</b>
</div> 
```

但它不起作用。任何的想法..？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T05:29:56.803

在您的`language.js`文件中：

```
var language = {
    "language": "german",
    "glossary": {
        "Level": "Ebene",
        "Codes": "Codes"
    }
}; 
```

然后在您的 HTML 文件中：

```
document.getElementById("lblLevel").innerHTML = language.glossary.Level; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:40:20.617

```
<html>
<head>
<script type="text/javascript">
var language = {
        "language": "german",
        "glossary": {
            "Level": "Ebene",
            "Codes": "Codes"
        }
    };

function ab()
{
document.getElementById("lblLevel").innerHTML = language.glossary.Level;
}
</script>
</head>
<body onload="ab()">
<div class="level">
     <b id ="lblLevel">Level</b>
</div>
</body>
</html> 
```

**@Manan 这是有效且经过测试的代码。尝试一下。如果您有任何其他问题，请评论其他问题并投票回答并关闭问题。**

# asp.net-mvc-3 - 优化长时间运行的 linq 表达式

> ID：11407100
> 
> 赞同：0
> 
> 时间：2012-07-10T05:26:30.233
> 
> 标签：asp.net-mvc-3, linq-to-entities

我的 mv3-entity 项目中有这个 linq 表达式

```
 SubCatNews = (from c in context.NewsInSubCats
      where
      (c.SubCat.Visible == true &&
          c.SubCatNews.Visible == true &&
          c.SubCatNews.StatusID == 1 &&
          c.SubCatNews.NewsTypeID != 5 &&
          (c.SubCatID == catId || c.SubCat.ParentId == catId))
orderby c.SubCatNews.SubCatNewsID descending
      select c.SubCatNews)
.Distinct()
.OrderByDescending(p => p.SubCatNewsID)
.Skip(pageIndex * pageSize)
.Take(pageSize); 
```

我在 SubCatNews 表中有 23000 条记录（我的新闻）

这些记录，使用 NewsInSubCats 表将组关联到新闻

和组在 SubCat 表中

这行得通，但是从 sql server 获取过程需要很长时间执行并在大多数时间从 sql server 返回 Timeout Exeption

我在具有 2 GB 内存的虚拟专用服务器中托管了 3 个具有这种结构的站点

这是 Linq 表达式优化吗？

或者我必须在 sql server 中使用索引

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:21:32.127

我会建议。在 sql server 上创建索引并编写存储过程并传递所有必需的参数（包括 pageindex 和 pagesize）并在 SQL 端进行过滤并仅返回所需的数据。

要创建存储过程，您可以检查以下 URL。

[http://weblogs.sqlteam.com/randyp/archive/2005/06/23/6335.aspx](http://weblogs.sqlteam.com/randyp/archive/2005/06/23/6335.aspx)

[http://msdn.microsoft.com/en-us/magazine/gg650669.aspx](http://msdn.microsoft.com/en-us/magazine/gg650669.aspx)

[http://basquang.wordpress.com/2011/03/18/stored-procedures-paging-solution-in-asp-net-mvc-2/](http://basquang.wordpress.com/2011/03/18/stored-procedures-paging-solution-in-asp-net-mvc-2/)

# c++ - 如何使用汇编程序从英特尔处理器中获取随机数？

> ID：11407103
> 
> 赞同：8
> 
> 时间：2012-07-10T05:26:43.680
> 
> 标签：c++, assembly, random, intel, rdrand

我需要从处理器（英特尔酷睿 i3）中的英特尔随机生成器获取随机数。我不想使用任何库。我想在 C++ 中使用汇编程序粘贴，但我不知道应该使用哪些寄存器和指令。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T05:32:38.327

在支持的 CPU（目前只有 Ivy Bridge 和 Haswell Intel CPU）上调用`RDRAND`指令会将随机值放入指定的寄存器中。例如，这会给你一个随机的 64 位值：

```
RDRAND %rax 
```

成功时，将设置进位位。有关详细信息，请参阅英特尔的[Bull Mountain 软件实施指南](http://software.intel.com/file/37157)。（“Bull Mountain”是英特尔硬件 RNG 的代号。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-04T18:56:52.840

> ...但我不知道应该使用哪些寄存器和指令。

下面是我在带有 GCC 的 Linux 机器上使用的内联汇编程序。我相信我从英特尔手册中撕下了很大一部分。它可能是由 David Johnston 编写的，他为[rdand](/questions/tagged/rdand "显示标记为“rdand”的问题")问题提供了很棒的技术答案。他也是在英特尔设计硬件的人。

* * *

```
int RDRAND_bytes(byte* buff, size_t bsize)
{
    if (!HasRDRAND())
        return -1;

    size_t idx = 0, rem = bsize;
    size_t safety = bsize / sizeof(unsigned int) + 4;

    unsigned int val;
    while (rem > 0 && safety > 0)
    {
        char rc;    
        __asm__ volatile(
                "rdrand %0 ; setc %1"
                : "=r" (val), "=qm" (rc)
        );

        // 1 = success, 0 = underflow
        if (rc)
        {
            size_t cnt = (rem < sizeof(val) ? rem : sizeof(val));
            memcpy(buff + idx, &val, cnt);

            rem -= cnt;
            idx += cnt;
        }
        else
        {
            safety--;
        }
    }

    // Wipe temp on exit
    *((volatile unsigned int*)&val) = 0;

    // 0 = success; non-0 = failure (possibly partial failure).
    return (int)(bsize - rem);
} 
```

下面的代码用于`HasRDRAND`. 它同时检测 AMD 和 Intel CPU（我认为这是所有提供 RDRAND 的 CPU）。

```
struct CPUIDinfo {
    unsigned int EAX;
    unsigned int EBX;
    unsigned int ECX;
    unsigned int EDX;
};

// Be careful below. EBX/RBX needs to be preserved depending on the memory model and use of PIC.
void cpuid_info(CPUIDinfo *info, const unsigned int func, const unsigned int subfunc) {
    __asm__ __volatile__ (
            "cpuid"
            : "=a"(info->EAX), "=b"(info->EBX), "=c"(info->ECX), "=d"(info->EDX)
            : "a"(func), "c"(subfunc)
    );
}

int HasAmdCpu() {
    CPUIDinfo info;
    cpuid_info(&info, 0, 0);
    if (memcmp((char *) (&info.EBX), "htuA", 4) == 0
            && memcmp((char *) (&info.EDX), "itne", 4) == 0
            && memcmp((char *) (&info.ECX), "DMAc", 4) == 0) {

        return 1;
    }

int HasIntelCpu() {
    CPUIDinfo info;
    cpuid_info(&info, 0, 0);
    if (memcmp((char *) (&info.EBX), "Genu", 4) == 0
            && memcmp((char *) (&info.EDX), "ineI", 4) == 0
            && memcmp((char *) (&info.ECX), "ntel", 4) == 0) {

        return 1;
    }

    return 0;
}

int HasRDRAND() {    
    if (!HasAmdCpu() || !HasIntelCpu())
        return 0;

    CPUIDinfo info;
    cpuid_info(&info, 1, 0);

    static const unsigned int RDRAND_FLAG = (1 << 30);
    if ((info.ECX & RDRAND_FLAG) == RDRAND_FLAG)
        return 1;

    return 0;
} 
```

* * *

另请参阅[如何使用 RDRAND 内在函数？](https://stackoverflow.com/q/31214457)它不会回答您的直接问题，但它可能是您的替代方案（并且可能会帮助其他人）。

# html - 如何相应地增长正确的div？

> ID：11407104
> 
> 赞同：0
> 
> 时间：2012-07-10T05:26:48.330
> 
> 标签：html

我们计划有两个 div 如下。左 div 我们计划以任何分辨率对其进行修复。右边的 div 我们计划根据分辨率增加宽度的地图是如何实现的呢？

```
<body>
<div id="left" style="position:absolute;top:0px;left:0px; width:220px;">
</div>

<div id="map" style="position:absolute;top:0px;left:250px; width:780px; height:100%">Map goes here.
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:02:51.730

我希望你看起来像这样：http: [//jsfiddle.net/BNvke/2/](http://jsfiddle.net/BNvke/2/)

**CSS**

```
#left {
width:220px;
float:left;
background:red;
}

#map {
background:yellow;
} 
```

**HTML**

```
<body>
<div id="left">stackoverflow
</div>

<div id="map" >Map goes here.
</div>
</body> 
```

# css - IE7 CSS for IE7

> ID：11407106
> 
> 赞同：0
> 
> 时间：2012-07-10T05:27:08.017
> 
> 标签：css, internet-explorer-7

I am trying to design my disabled select box in IE7.

```
<div id="wwctrl_pay" class="wwctrl styled-select">
     <select id="payment"><option>...</option></select>
</div> 
```

How can I change the CSS of `#wwctrl_pay` if the select box is disabled? Can I do it using CSS?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:39:03.467

最好的选择是当您禁用选择框时，添加一个新类并在该类中添加您的样式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T05:43:38.577

如果您不介意一些额外的标记和其他限制：

[http://jsfiddle.net/s6LbB/1/](http://jsfiddle.net/s6LbB/1/)

```
<div id="wwctrl_pay" class="wwctrl styled-select">
     <select id="payment" disabled="disabled"></select>
     <div></div>
</div> 
```

CSS：

```
.wwctrl {
    position: relative;
    border: 1px solid blue;
}

select[disabled] + div {
    position: absolute;
    z-index: -1;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: yellow;
}
​ 
```

或者，如果这仅适用于 IE7，您可以尝试使用 IE 的专有 css 表达式功能。

# android - How to customize android VideoView Error Dialogue

> ID：11407108
> 
> 赞同：-1
> 
> 时间：2012-07-10T05:27:19.123
> 
> 标签：android, android-alertdialog, android-videoview

In my application i want to stream video. In case if mobile can not play that video `VideoView` shows dilogue like this what i want if to customize this dialogue and insert two buttons one to download this video and one to try to play an `Low Quality` video. right now in `onErrorLitener` of `VideoView` i am showing dialogue to user but in this way with my `dialogue` VideoView own dialogue also show on screen which i don't want.

If i cant customize `VideoView` Error dialogue can i make it dont show on screen

![enter image description here](../Images/47e06e85e5a5e820836a9c62cddce142.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:25:23.007

我通过将您的代码放入 MediaPlay.setOnErrorListener() 解决了我的问题@AkashG

```
AlertDialog.Builder builder=new Builder(YourActivityName.this);
        builder.setTitle("Video");
        builder.setMessage("Message you want to pass");
        builder.setPositiveButton("Download", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        builder.setNegativeButton("Play", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        builder.create();
        builder.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:40:05.917

```
 AlertDialog.Builder builder=new Builder(YourActivityName.this);
        builder.setTitle("Video");
        builder.setMessage("Message you want to pass");
        builder.setPositiveButton("Download", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        builder.setNegativeButton("Play", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub

            }
        });
        builder.create();
        builder.show(); 
```

只需编写您想在下载/播放按钮单击时执行的代码。

# php - How to open application just by typing server name?

> ID：11407111
> 
> 赞同：0
> 
> 时间：2012-07-10T05:27:44.673
> 
> 标签：php, apache, wampserver, mod-alias

I have a server which is having several applications. lets say server is abc.corp.com it is having application xyz pqr mno etc. Today the applications are accessed as

abc.corp.com/xyz abc.corp.com/pqr abc.corp.com/mno

Out of these i want application xyz to open just by typing abc.corp.com and rest of the applications opening normally.

My Server is apache and i am having php applications inside it. I have read alias can help me do that. But how exactly i can achieve it is not clear.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:02:01.693

请将这段代码放在**（** http://abc.corp.com/index.php位置）的**index.php**中`abc.corp.com`

 **```
<?php
header location('http://abc.corp.com/xyz');
die();
?> 
```**

# c# - 在 C# 中使用在运行时确定的 C++ DLL

> ID：11407113
> 
> 赞同：0
> 
> 时间：2012-07-10T05:28:18.920
> 
> 标签：c#, c++, dll, wrapper

我目前正在做一个 C# 项目，我对 C# 的经验为零。

我们有一组用 C++ 编写的 DLL，它们具有相同的类和相同的功能，但它们的工作方式不同。例如，假设我们的程序转换 BMP 文件。我们有用于将 BMP 转换为 JPG、BMP 为 PNG 等的 DLL。

我们用 C# 编写的程序应该以某种方式包装这些 DLL，但不是以静态方式。我们希望能够在运行时更改正在使用的 DLL，并在需要时（也在运行时）添加新的 DLL。喜欢插件，如果你愿意的话。

您对实施这种方法有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:42:19.447

这看起来不错：http: [//blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_.aspx](http://blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:50:11.337

如果它们已经在 C++ 中，我会选择用 C++ 编写托管程序集。
本[演练](http://msdn.microsoft.com/en-us/library/ms235638.aspx)可能是一个起点。尤其是 C++ 的家伙不需要学习 C#。
P/Invoke 有点慢，但更深层次的问题是版本管理，因为 P/Invoke 将导致运行时异常，并且在发生更改时不会编译错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T05:38:44.980

如果您事先不知道所有 DLL 是什么，您可能需要调用 Win32 函数“LoadLibrary”“GetProcAddress”和“FreeLibrary”。据我所知，c# 没有办法自动执行某种动态 PInvoke。有关更多信息，请参阅[此博客文章](http://blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_.aspx)

或者，您可以使用 PInvoke 为每个 DLL 创建一个 C# 包装器，然后使用托管委托来调用这些函数。然后，通过更改委托，您可以在运行时调用不同的函数（可能在不同的 DLL 中）。这取决于您是否拥有打算在编译时使用的 DLL 的完整列表。不过，它比第一个选项更强大。让运行时为您处理所有封送处理也容易上千倍。有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspxIf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T05:37:03.577

你可以使用`extern`和`DLLImport`喜欢微软提供的设施，更多细节[去这里](http://msdn.microsoft.com/en-us/library/e59b22c5%28v=vs.71%29.aspx)或[这里](http://www.codeproject.com/Articles/12121/Essential-P-Invoke)

# c++ - 搜索算法以查找列表中的 k 个最小值

> ID：11407114
> 
> 赞同：5
> 
> 时间：2012-07-10T05:28:32.020
> 
> 标签：c++, c, algorithm, search, selection

我有一个包含*n 个*双精度值的列表，我需要在该列表中找到*k*个最低双精度值

*   *k*远小于*n*
*   *具有n 个*双精度值的初始列表是随机排序的
*   不需要对找到的*k个最低 double 值进行排序*

**你会推荐什么算法？**

目前我使用*Quicksort*对整个列表进行排序，然后从排序列表中取出前*k*个元素。我希望应该有一个更快的算法。

**谢谢您的帮助！！！**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T05:55:44.153

您可以为解决方案建模以匹配[Python 标准库中的 nlargest() 代码](http://hg.python.org/cpython/file/3fa1414ce505/Lib/heapq.py#l183)。

*   将前*k*个值堆放在一个 maxheap 上。
*   迭代剩余的*n - k 个*值。
*   将每个元素与堆顶元素进行比较。
*   如果新值较低，请执行*heapreplace*操作（将最顶部的堆元素替换为新值，然后向下筛选）。

该算法可能非常有效。例如，当 n=100,000 且 k=100 时，对于随机排列的输入，比较次数通常约为 106,000。这仅比 100,000 次多一点的比较来找到单个最小值。而且，它在整个数据集上进行的比较比完整的快速排序少了大约 20 倍。

各种算法的相对强度研究总结在：[http ://code.activestate.com/recipes/577573-compare-algorithms-for-heapqsmallest](http://code.activestate.com/recipes/577573-compare-algorithms-for-heapqsmallest)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T05:30:01.723

您可以使用[**选择算法**](http://en.wikipedia.org/wiki/Selection_algorithm)找到第 k 个最低元素，然后迭代并返回它以及低于它的所有元素。如果列表可以包含重复项，则必须做更多的工作（确保您最终不会得到更多需要的元素）。
这个解决方案是`O(n)`。选择算法在 C++ 中实现为[`nth_element()`](http://www.cplusplus.com/reference/algorithm/nth_element/)

另一种选择是使用大小**为 的最大[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)**`k`，并在保持堆容纳所有 k 个最小元素的同时迭代元素。

```
for each element x:
   if (heap.size() < k):
      heap.add(x)
   else if x < heap.max():
      heap.pop()
      heap.add(x) 
```

完成后 - 堆包含 k 个最小元素。
这个解决方案是`O(nlogk)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T05:31:16.143

看看C++ 标准库中的[partial_sort](http://www.cplusplus.com/reference/algorithm/partial_sort/)算法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T05:32:05.427

您可以使用[std::nth_element](http://en.cppreference.com/w/cpp/algorithm/nth_element)。这是 O(N) 复杂度，因为它不对元素进行排序，它只是将它们排列为使得某个 N 下的每个元素都小于 N。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T11:35:35.690

您可以使用选择排序，它需要 O(n) 来选择第一个最小值。一旦我们在位置 1 上设置了这个最低值，我们就可以重新扫描数据集以找出第二个最低值。并且可以做到这一点，直到我们有第 k 个最低值。这样，如果 k 足够小然后 n 那么我们将有复杂度 kn 相当于 O(n)...

# c# - 将应用程序池分配给网站

> ID：11407115
> 
> 赞同：2
> 
> 时间：2012-07-10T05:28:38.750
> 
> 标签：c#, asp.net, iis, sharepoint-2007

我正在尝试制作一个 Web 应用程序，它可以访问本地 iis 并以编程方式创建/删除/分配应用程序池给 iis 中的网站（其中大多数是 SharePoint 2007 网站）。创建和删除有效，但分配无效。我在 Windows server 2003 上使用 WSS 3.0、iis 6。我的代码在这里：

```
protected void btnChangePool_Click(object sender, EventArgs e)
    {
        string siteId = GetWebSiteId(ddlSites.SelectedValue);
              //ddlSites contains name of site as it shows in iis under websites
        DirectoryEntry oldAppPool = new DirectoryEntry("IIS://localhost/W3SVC/AppPools/" + lblAppPool.Text); 
        //lblAppPool contains name of currently app pool associated to our site
        if (chkDeleteOld.Checked)
        {

            using (DirectoryEntry appPool = oldAppPool)
            {
                using (DirectoryEntry parent = oldAppPool.Parent)
                {
                    parent.Children.Remove(oldAppPool); 
                    parent.CommitChanges();
                }
            }
        }
        DirectoryEntry VDir = new DirectoryEntry("IIS://localhost/W3SVC/"+siteId+ "/ROOT");
        VDir.Properties["AppPoolId"].Value = ddlAppPools.SelectedValue; 
                   //ddlappPools contains name of new app pool (to be assigned)
        VDir.CommitChanges();
    }

public string GetWebSiteId(string websiteName)
    {
        string result = "-1";

        DirectoryEntry w3svc = new DirectoryEntry("IIS://localhost/w3svc");

        foreach (DirectoryEntry site in w3svc.Children)
        {
            if (site.Properties["ServerComment"] != null)
            {
                if (site.Properties["ServerComment"].Value != null)
                {
                    if (string.Compare(site.Properties["ServerComment"].Value.ToString(), websiteName,false) == 0)
                    {
                        result = site.Name;
                        break;
                    }
                }
            }
        }

        return result;
    }

  protected void btnCreatePool_Click(object sender, EventArgs e)
    {
        DirectoryEntry root = new DirectoryEntry("IIS://localhost/W3SVC/AppPools");
        DirectoryEntry newAppPool;
        //newAppPool = root.Invoke("Create", "IIsApplicationPool", txtCreatePool.Text) as DirectoryEntry;
            //OR 
        newAppPool = root.Children.Add(txtCreatePool.Text, "IIsApplicationPool");
        newAppPool.CommitChanges();
        root.CommitChanges();
    } 
```

# oracle - 从 r 连接 oracle

> ID：11407116
> 
> 赞同：2
> 
> 时间：2012-07-10T05:28:52.533
> 
> 标签：oracle, r

我是新手`R`，正在尝试使用此处告知的方式连接到 Oracle。

我下载了即时客户端，但除了那里的一些 .dll 文件外找不到任何东西。

请大家逐步指导我如何从`R`. 我已经看过一些解决方案，但他们无法解决。

请告诉我是否存在从`R`. 顺便说一句，我正在使用 oracle sql 开发人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T09:29:12.720

如果您已经在桌面上使用的客户端使用 JDBC，那么使用 RJDBC 包并使用与桌面包相同的 URL 可能是最简单的！

```
library(RJDBC)
drv <- JDBC("oracle.jdbc.OracleDriver",
            "/home/sean/local/DbVisualizer/jdbc/oracle/ojdbc6.jar", "`")
conn <- dbConnect(drv, "jdbc:oracle:thin://localhost/test")
dbListTables(conn)
data(iris)
dbWriteTable(conn, "iris", iris)
dbGetQuery(conn, "select count(*) from iris")
d <- dbReadTable(conn, "iris") 
```

您显然必须更改驱动程序 jar 文件和连接字符串的路径。

它可能没有本地驱动程序那么快，但我发现它更容易开始工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T04:32:10.883

我建议最好的方法是安装 oracle R 企业版软件包。

这将有助于连接到 oracle，并且它包含许多其他功能。您可以从以下链接免费下载这些软件包。

[http://www.oracle.com/technetwork/database/options/advanced-analytics/r-enterprise/ore-downloads-1502823.html](http://www.oracle.com/technetwork/database/options/advanced-analytics/r-enterprise/ore-downloads-1502823.html)

下载客户端以及客户端支持包，并通过 R 控制台或 R Studio 安装这些包。安装后使用 library(ore) 加载库。您可以使用 ore.connect() 函数连接到 oracle 和 ore.sync() 函数将表和视图同步到 r 中，以便您可以将其用作 r 对象。您可以参考本文档了解 ore.connect() 的语法以及其他可用函数。

[http://www.oracle.com/technetwork/database/options/advanced-analytics/r-enterprise/ore-reference-manual-1882822.pdf](http://www.oracle.com/technetwork/database/options/advanced-analytics/r-enterprise/ore-reference-manual-1882822.pdf)

ore.ls() 将帮助您列出可用的矿石对象。要将其用作 r 数据框，请使用以下函数：data=ore.pull(table_name)

# ios5 - UIButton上的UIProgressView显示下载状态iOS5

> ID：11407117
> 
> 赞同：1
> 
> 时间：2012-07-10T05:29:08.663
> 
> 标签：ios5, queue, nsurlconnection, uiprogressview

我正在使用 iOS 5 开发一个 iphone 应用程序。我想实现类似 kindle 应用程序的功能来从服务器下载数据，如下图所示

![在此处输入图像描述](../Images/d5f1fd5ea22ba485c3abe95e29623918.png)

我已经在按钮上实现了进度视图。当我滚动表格单元格时，进度与当前进度不同步。当我滚动表格时，进度显示为 0.0

另外，如何在上一个请求完成后对请求进行排队并启动一个？当用户单击交叉按钮时，如何删除特定请求？

任何形式的帮助表示赞赏。谢谢。

# asp.net - 关于 .net 中的 dll

> ID：11407131
> 
> 赞同：0
> 
> 时间：2012-07-10T05:30:45.387
> 
> 标签：asp.net, dll

如何使用 .net 为类型化数据集和非类型化数据集设置相同的 dll。在我的程序中，我在一页中通过编码编写数据集。我在另一个页面的同一个项目中使用像这样的连接字符串“server=10.103.200.142;User Id=root;password=test123;Persist Security Info=True;database=ezdatabase”正在使用向导创建数据集。这里也使用相同的连接字符串。当我运行这个项目时出现错误。如何解决这个问题？出错了吗？

```
error
-----
  The type 'MySql.Data.MySqlClient.MySqlCommand' exists in both  'c:\Users\Bharathiraja.m\AppData\Local\Temp\Temporary ASP.NET Files\rbuzz_test\d83db07e\8aa569c6\assembly\dl3\64f6c429\004e2a48_7b32cc01\MySql.Data.DLL' and C:\Windows\Microsoft.NET\assembly\GAC_MSIL\MySql.Data\v4.0_6.3.6.0__c5687fc88969c44d\MySql.Data.dll'                c:\Users\Bharathiraja.m\AppData\Local\Temp\Temporary ASP.NET Files\rbuzz_test\d83db07e\8aa569c6\App_Code.jla9qgxc.1.cs   7993       

web.config contains the following connection string
---------------------------------------------------
<configuration>
<connectionStrings>
<add name="ezdatabaseConnectionString" connectionString="server=10.103.200.192;User Id=user;password=pwd;Persist Security Info=True;database=ezdatabase" providerName="MySql.Data.MySqlClient"/>
<add name="green" connectionString="server=10.103.200.192;User Id=user;database=ezdatabase; password= pwd " providerName="MySql.Data.MySqlClient"/>
</connectionStrings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:02:54.300

清空`Temporary ASP.NET Files`文件夹后尝试`c:\Users\Bharathiraja.m\AppData\Local\Temp\Temporary ASP.NET Files\`

更新：检查您的`web.config`文件，看看您是否有多个对`MySql.Data.DLL`.

# android - 浮动窗口

> ID：11407135
> 
> 赞同：1
> 
> 时间：2012-07-10T05:31:15.877
> 
> 标签：android, android-layout

我在以下主题的帮助下设计了一个浮动窗口：

```
<style name="MyFloatingWindow">
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:background">@android:color/transparent</item>
        <item name="android:windowIsFloating">true</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowFrame">@null</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:gravity">top</item>
</style> 
```

我的活动布局具有宽度高度作为填充父项。但行为仍然不一致。在姜饼上它工作得很好，但在冰淇淋三明治上，还有很多我不想要的上边距。我希望我的浮动窗口在所有设备上全屏显示。任何人都可以帮忙吗？

# asp.net-mvc - 如何将字节数组图像/png从控制器方法（id）显示到 Asp.net 视图

> ID：11407137
> 
> 赞同：1
> 
> 时间：2012-07-10T05:31:21.950
> 
> 标签：asp.net-mvc, view

```
public ActionResult Overview(int subId, string countrycod)
{
    byte[] objByteArray =(byte[]) objResponse.Data;
    //return View();
    System.IO.MemoryStream imagestream = new System.IO.MemoryStream();
    imagestream.Write(objByteArray, 0, objByteArray.Length);
    //return new FileStreamResult(new System.IO.MemoryStream(objByteArray,true),"image/png");
    return new FileStreamResult(imagestream, "image/png");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:54:38.317

你不需要内存流，你可以直接返回字节数组：

```
public ActionResult Overview(int subId, string countrycod) 
{
    byte[] objByteArray = (byte[])objResponse.Data;
    return File(objByteArray, "image/png");
} 
```

然后在视图内部使用一个`<img>`标签，您将指向`Overview`控制器操作：

剃刀：

```
<img src="@Url.Action("Overview", "SomeController", new { subId = 123, countrycod = "en-US" })" /> 
```

网络表单：

剃刀：

```
<img src="<%= Url.Action("Overview", "SomeController", new { subId = 123, countrycod = "en-US" }) %>" /> 
```

# javascript - Javascript / jQuery 并行调整大小插件

> ID：11407138
> 
> 赞同：2
> 
> 时间：2012-07-10T05:31:24.030
> 
> 标签：javascript, jquery, ckeditor

我正在寻找一个可以在相反方向同时调整两个平行 div 大小的插件。

```
<div class='one'></div>
<div class='handle'></div>
<div class='two'></div> 
```

假设 div 彼此相邻浮动。

当用户向右拖动 .handle 时，它​​应该使 .two 更小，.one 更大。

我试过写一个基本的插件，但我不能解释所有的浏览器等。

如果有人感兴趣，我真正想做的是调整多个 CKEditor 实例的大小。.one 和 .two 将包含 CKEditor 的实例，并且 handle 需要并行调整它们的大小。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T09:23:41.380

您需要的是名为“jQuery UI resizable”的插件。

在示例页面上有一个您正在尝试做的示例：[同步调整大小](http://jqueryui.com/demos/resizable/#synchronous-resize)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T17:45:05.980

在我的应用程序中，我有两个高度相同的 div 并排，所以我使用 jquery UI 使一个可调整大小，然后使用第一个 div 的大小信息来设置第二个 div 的位置。这是在调整大小回调函数中完成的。

```
<script>
$(function() {
    $( ".one" ).resizable({
        handles: "e",
        resize: function(event, ui) {
            $( ".two" ).css("left", $(this).width() );
        }
    });
});
</script> 
```

# c# - 使用链接表和实体框架创建连接

> ID：11407139
> 
> 赞同：0
> 
> 时间：2012-07-10T05:31:32.323
> 
> 标签：c#, asp.net, asp.net-mvc-3, linq

现在我正在努力使用 ASP.Net 和 MVC3 来显示一个人。我有一个人信息表，一个人类型表。一个人可以是多种类型。所以我创建了一个链接表来链接 personid 和 typeid。我正在努力寻找一种方法来推送用户详细信息和他们所属的不同类型。

所以 ActionResult 采用了 PersonID，我可以很好地显示人员信息，但我还需要传递他们所属类型的列表。

任何帮助、示例或教程链接都会很棒。提前致谢。

这是我现在控制器中的内容。

```
public ViewResult Details(long id)
    {
        champion champion = _db.champions.Single(c => c.id == id);
        return View(champion);
    } 
```

我尝试使用 ViewBag 对象和 join 语句，但它太复杂了，超出了我对 linq 语句的了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:19:34.803

[http://msdn.microsoft.com/en-us/library/bb738708.aspx](http://msdn.microsoft.com/en-us/library/bb738708.aspx)

```
var champion = _db.champions.Include("TheOtherModel").SingleOrDefault(c => c.id == id);
return View(champion); 
```

你应该可以通过使用访问“TheOtherModel”

```
champion.TheOtherModel 
```

或在您看来：

```
@foreach (var item in Model.TheOtherModel){
    item.Property1
    ....
 } 
```

（应该包含一个列表）。

# java - 这种二分搜索的实现是如何工作的？

> ID：11407140
> 
> 赞同：0
> 
> 时间：2012-07-10T05:31:36.453
> 
> 标签：java

```
% java BinarySearch 1.txt < 2.txt 
```

如果我有两个文本文件（1.txt 和 2.txt），其中 2.txt 包含不在 1.txt 中的值，那么二进制搜索如何为我们提供这些值？如果参数`BinarySearch`是一个键和一个排序数组，我看不出这是如何应用的。

下面是二分查找的代码：

```
import java.util.Arrays;

public class BinarySearch {

    // precondition: array a[] is sorted
    public static int rank(int key, int[] a) {
        int lo = 0;
        int hi = a.length - 1;
        while (lo <= hi) {
            // Key is in a[lo..hi] or not present.
            int mid = lo + (hi - lo) / 2;
            if      (key < a[mid]) hi = mid - 1;
            else if (key > a[mid]) lo = mid + 1;
            else return mid;
        }
        return -1;
    }

    public static void main(String[] args) {
        int[] whitelist = In.readInts(args[0]);

        Arrays.sort(whitelist);

        // read key; print if not in whitelist
        while (!StdIn.isEmpty()) {
            int key = StdIn.readInt();
            if (rank(key, whitelist) == -1)
                StdOut.println(key);
        }
    }
} 
```

根据维基百科，根据我的理解：二进制搜索或半间隔搜索算法在排序数组中找到指定值（输入“键”）的位置。

那么如何在两个文本文件中找到不常见的值呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:53:26.587

```
while (!StdIn.isEmpty()) { //WHILE THE INPUT FILE (OR STANDARD INPUT) ISN'T EMPTY
            int key = StdIn.readInt();  //GET THE NEXT INTEGER
            if (rank(key, whitelist) == -1) // USE BINARY SEARCH TO SEARCH FOR THAT INTEGER
                StdOut.println(key); //PRINT WHEN IT'S NOT FOUND
        } 
```

它正在执行 N 二进制搜索的代码，其中 N 是标准输入文件中的整数数。复杂度为 O(n * log n) + O(m * log n)。n 和 m 不同文件的大小。while 列表中的 n 和其他列表中的 m。如果 whilelist 比其他文件小得多，这将很有效。如果没有，最好对两个文件进行排序，然后使用合并排序的合并步骤来比较它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:46:29.937

我认为创建哈希表将比修改的合并排序算法更好地比较仅包含整数的大文件。您所要做的就是读取第一个文件（它已经在做）并在读取时将整数放入某种哈希中桌子。一次读取一个 int 的下一个文件，main 中的循环正在执行该操作，计算 int 的哈希并比较该表是否包含与哈希对应的哈希表中的任何值。我假设了完美的哈希表，因此您可能需要在发生冲突时进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T09:34:15.370

据我了解这个问题，您想知道该程序在（正确）确定 2.txt 中的条目不在 1.txt 中时是如何工作的。这有一个非常简单的答案。

该算法对数组白名单进行排序。它将 lo 指针初始化为指向元素 0，将 hi 指针初始化为指向元素 whitelist.length-1，它是白名单中的最后一个元素。数组段是第一次迭代的整个数组。必须对数组进行排序或排序才能使其正常工作。

对于每次连续迭代，如果在当前数组段的中间没有找到该值，则逻辑确定该值必须在中间以上的半段中还是中间以下的半段中。该半段，不包括旧的中间元素，成为下一次迭代的新搜索段。该算法调整 hi 和 lo 指针，以一次接近数组剩余段的一半，如果搜索值在数组中，则它必须在哪里。

最终，对于不在数组中的搜索值，hi 和 lo（因此 mid）将收敛到同一个元素，它将是搜索到的数组的最后一段，只有一个元素的段。如果该元素没有搜索值，则根据搜索值和该元素的值，hi 将变为 mid - 1 或 lo 将变为 mid + 1。无论哪种方式，while 继续条件都将变为 false，因为 lo < = hi 不再正确。新的剩余搜索段现在具有负大小。这可以解释为如果在 while 终止之前没有发生返回，那么搜索在任何先前的段中都没有找到值，并且没有剩余的段要搜索。因此，搜索值不能在数组中。

这个问题中给出的实现有效。我已经使用包含此处使用的 In 和 StdIn 类的 Princeton.edu 标准库对其进行了测试。我已经使用标准输入管道从命令行编译并运行它，以管道输入第二个文本文件。我不认为我会像这样实现这个应用程序，除非作为二进制搜索方法的演示，也许是为了一个类或检查一些技术。

这里有一些关于为什么使用二分搜索的进一步背景。使用二分查找的原因是为了获得平均 1.5*logBase2(n) 复杂度的最坏情况 2*logBase2(n) 执行复杂度。对不在数组中的值进行二进制搜索将始终是 2*logBase2(n) 比较的最坏情况。

二进制搜索远远优于仅从数组的一端开始并搜索每个元素直到找到匹配项或到达数组末尾的线性搜索。平均搜索可能约为 n/2，具体取决于数组中值的分布。对不在数组中的值的线性搜索总是会有 n 次比较的最坏情况。

在二分查找中，每对比较都会消除一半的可能性。最多可在 20 次比较中搜索 1024 个条目的数组。将其与线性搜索的最大值 1024 进行比较。对搜索数组的大小进行平方只会使二分搜索的比较次数加倍。二进制搜索可以搜索包含 1,048,576 个条目的数组，最多可进行 40 次比较。将其与线性搜索最大值 1,048,576 进行比较。

问题中给出的基本二进制搜索算法对于从排序或有序集合继承的对象非常有用，并且您必须实现自己的比较和搜索方法以重载继承的方法。只要您有一个比较来确定对象之间的较小、较大和相等，并且根据该比较对集合进行排序或排序，您就可以使用这种基本的二分搜索算法来搜索集合。

# javascript - 一次将选择一个单选按钮

> ID：11407141
> 
> 赞同：0
> 
> 时间：2012-07-10T05:31:44.863
> 
> 标签：javascript, jquery

我有一个 jsp 页面，其中显示了表格的单选按钮内容（单击它，将出现选择框）。但是在这里我无法一次选择一个单选按钮（带有选择框）。我向您展示代码。

```
<table>
<tr>
<td><input type="radio" onclick="document.getElementById('select1000').style.display=(this.checked)?'inline':'none';" name="license" value="1000"> 1-1000</td>
<td>
<div id="select1000" style="display: none">
<select id="">    
<option test="l25" value="25">25</option>
<option test="l100" value="100">100</option>

</select>
</div>
</td>
</tr>
<tr>
<td><input type="radio" onclick="document.getElementById('select3000').style.display=(this.checked)?'inline':'none';" name="license" value=""> 1001-3000</td>
<td>
<div id="select3000" style="display: none">
<select id="">
<option test="l1001" value="1001">1001</option>
<option test="l1075" value="1075">1075</option>

</select>
</div>
</td>
</tr>
<tr>
<td><input type="radio" onclick="document.getElementById('select5000').style.display=(this.checked)?'inline':'none';" name="license" value=""> 3001-5000</td>
<td>
<div id="select5000" style="display: none">
<select id="">
<option test="l3001" value="3001">3001</option>
<option test="l3075" value="3075">3075</option>

</select>
</div>
</td>
</tr>
</table> 
```

我哪里出错了.....任何有价值的意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:04:51.350

这是您的输入

```
<input type="radio" onchange="hideElem(this,'select1000')" name="license" value="1000">
<input type="radio" onchange="hideElem(this,'select3000')" name="license" value="">
<input type="radio" onchange="hideElem(this,'select5000')" name="license" value=""> 
```

和功能：

```
<script type="text/javascript">
    function hideElem(self,divId){
        var divs = ['select1000','select3000','select5000'];
        if(self.checked){
           for(var i=0; i < divs.length; i++){
                if (divs[i] === divId){
                    document.getElementById(divs[i]).style.display = 'inline';
                } else{
                    document.getElementById(divs[i]).style.display = 'none';
                }
           }
        }
    }        
</script> 
```

[演示](http://jsfiddle.net/uDy7R/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:06:05.530

因为当你点击一个input(radio)时，`this`是当前的radio，你不知道上一个，你需要记录之前的选择，使用jQuery，代码如下：

```
(function () {
    var oldSel = null;
    $('input:radio').click(function () {
        // get the current select
        var sel = $('#select' + this.value);
        // show current select
        sel.show();
        // if old select is exist, hide it
        oldSel && oldSel.hide();
        // store the current select when radio on click
        oldSel = sel;
    })​;
})();​ 
```

看[演示](http://jsfiddle.net/b24dt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:56:56.400

您能否尝试更改输入元素的名称：

```
<td><input type="radio" onclick="change(this, 'select1000')" name="license[1]" value="1000"> 1-1000</td> 
```

并创建一个函数：

```
function change(t, div){

    var ele = document.getElementsByTagName("div");

    var radios = document.getElementsByName("license[1]"); 

        for (var i = 0, radio; radio = radios[i]; i++) {
            if (!radio.checked) {
                if(ele[i].id != div){
                    ele[i].style.display = 'none';               
                }
            }else{
               document.getElementById(div).style.display='inline';                
            }
        }

} 
```

我不确定这是否是你想要的，但在[这里](http://jsfiddle.net/3NjpC/)你可以看到一个例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T06:02:08.277

你只需要改变你的括号：

```
document.getElementById('select5000').style.display =  (this.checked ? 'inline':'none'); 
```

# java - Android String 操作，字符串中的单独行

> ID：11407145
> 
> 赞同：0
> 
> 时间：2012-07-10T05:31:55.123
> 
> 标签：java, android, string

我有以下形式的输出：

```
 {"status":"07\/09\/201207:16||heythisisatestquestion||AndyesIreallyansweredthisquestiontoo-||07\/09\/201207:10||heythisistestquestion||ThisismyresponsetoyourTESTquestion-yes,Ireallyansweredyou.:-)||07\/09\/201206:29||sos||SOSagain-yes||07\/09\/201206:27||sos||SOSagain-yes||07\/09\/201205:05||test||Yes,respondingtothisTEST-yes,it'sworking","phone":"xxxxxxxxx"} 
```

我想要做的是，我应该让每个值用 || 分隔 在一个**数组中**

例如：

```
 **07\/09\/201207:16 .. 07\/09\/201207:10 .. 07\/09\/201206:29**  should be in array date

 **heythisisatestquestion .. heythisistestquestion .. sos** should be in array question 

 **AndyesIreallyansweredthisquestiontoo .. ThisismyresponsetoyourTESTquestion .. Ireallyansweredyou** 
```

应该在数组 Answers 中，如何通过匹配关键字 || 分隔每个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:35:44.420

首先，您应该解析 JSON 以获取状态字符串。

然后将状态字符串沿`"\\|\\|"`. 即`.split("\\|\\|")`。并挑选出 3 个一组的令牌。

假设状态文本的格式始终有效：

```
 ArrayList<String> date = new ArrayList<String>();
 ArrayList<String> question = new ArrayList<String>();
 ArrayList<String> response = new ArrayList<String>();

 for (int i = 0; i < tokenArray.length / 3; i++) {
     date.add(tokenArray[i * 3]);
     question.add(tokenArray[i * 3 + 1]);
     response.add(tokenArray[i * 3 + 2]);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:51:35.307

如果您使用 PHP 生成 JSON，您可以使用表达式在[explode](http://php.net/manual/en/function.explode.php)中找到类似的函数 ，然后发送数组或在 java 中

```
 int count=0;
        String[] arr;
        arr=str.split("\\|\\|");
        for(int i=0,j=1,k=2;i<str.length;i+=3,j+=3,k+=3)
    {

    array1[count]=arr[i];
    array2[count]=arr[j];
    .....
    .....
count++;

    } 
```

# jquery - 自动完成字段上的 jQuery 表单验证

> ID：11407147
> 
> 赞同：3
> 
> 时间：2012-07-10T05:32:10.543
> 
> 标签：jquery, validation, autocomplete

我有一个输入字段，它使用 jQuery 自动完成方法。用户开始输入用户名，并获得结果列表。一旦他选择了一个结果，就会显示更多的输入字段，其中包含该用户的更多详细信息（此数据在后台使用 AJAX 获取）。

自动完成字段中选定的用户名也被复制到隐藏的输入中。我这样做是因为我想防止用户在不从建议列表中选择用户名的情况下更改用户名。我正在使用 jQuery`equalTo`验证来执行此操作。它将可见的用户名输入字段的值与隐藏的值进行比较。

因此，当用户现在更改可见用户名输入字段的值（只需键入）时，会显示一条通知，说明他必须从列表中选择一个名称。这实际上工作正常。

但是，我有一个奇怪的行为。用户打开表单以编辑用户。他开始输入用户名，然后选择一个（显示更多输入字段 + 设置隐藏输入）。但由于某种原因，我收到通知说我必须选择一个用户名。单击下一个字段后，此错误就会消失。显然，选择用户名后，jQuery 不会再次检查输入。相反，它等待按键或其他表单操作，以重新验证表单。

有什么办法，在设置隐藏输入后，我可以强制 jQuery 重新验证表单吗？

这是我的（缩短的）jQuery 代码：

```
$(document).ready(function() {
    // Autocomplete
    $("#username").autocomplete({
        source: function(request, response) {
            $.ajax({
                url: "http://localhost/users.php",
                contentType: "application/json; charset=utf-8",
                dataType: "jsonp",
                data: {
                    search: request.term,
                    uid: "ahatius" // This value is generated server side --> It just makes the list smaller by just selecting users relevant to this administrator
                },
                success: function(data) {
                    response($.map(data.persons, function(item) {
                        return {
                            label: item.username + " (ID: " + item.uid + ")",
                            value: item.username,
                            username: item.username,
                            groupnumber: item.groupnumber
                        }
                    }));
                }
            });
        },

        minLength: 0,

        // Write input values
        select: function(event, ui) {
            $("#checkUsername").val(ui.item.username);
            $("#groupnumber").val(ui.item.groupnumber);

            showAll(); // This just shows all other input fields, isn't relevant
        }
    })

    // Validation
    $("#useredit").validate({
        rules: {
            username: {
                equalTo: "#checkUsername"
            },
            groupnumber: {
                required: true,
                minlength: 2,
                number: true
            }
        },
        messages: {
            cnAntragsteller: {
                equalTo: "Please select a user from the dropdown!"
            },
            groupnumber: {
                required: "You need to specify a group number!",
                minlength: "The specified group number is too short!",
                number: "You have to specify a numeric value!"
            }
        },
        errorPlacement: function ($error, $element) {
            var name = $element.attr("name");

            $("#" + name + "Error").append($error);
        }
    })
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:42:53.233

不确定它是否符合您的要求。但是您可以轻松地`$("#useredit").valid()`在您想要的事件中重新验证表单。您也可以查看此[链接](http://docs.jquery.com/Plugins/Validation/validate)以查看是否有适合您的属性，例如 onkeyup、onfocusout ...等

我认为问题是因为 jquery 验证的属性“onfocusout”在默认情况下是 true。在您选择用户名之前触发 onfocustout 事件。所以也许你可以尝试覆盖“onfocusout”，比如follow

```
$(form).validate({
    onfocusout:function(element){
         var dovalid ;
         // Do somethings to determine dovalid is true or false;
         if (dovalid){
            return $(element).valid();    
         }
         else{
            return true;
         }                          
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:15:36.630

可能不是最漂亮的解决方案，我仍然愿意接受更好的想法，但目前我只是在选择用户后清除错误元素的 html。

`$("#usernameError").html("")`

# java - 如何使用 Eclipse 在 Axis2 Web 服务上实现最小值、最大值、必需和可选？

> ID：11407151
> 
> 赞同：0
> 
> 时间：2012-07-10T05:32:52.710
> 
> 标签：java, eclipse, wsdl, axis2, axis

如何在 Axis2 Web 服务中设置请求参数的最小、最大、必需和可选属性？我正在使用 Eclipse 和 Axis2 来构建我的 Web 服务，因为 wsdl 文件是自动生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:19:07.097

最好先编写您的接口（WSDL）并从 WSDL 生成服务器存根。在 WSDL 中，您可以使用 Document/Literal 格式强制执行最小、最大和所有其他约束。把你所有的约束放在下面的部分。

# javascript - 使用 Javascript/jQuery 在当前窗口后面打开一个窗口

> ID：11407153
> 
> 赞同：13
> 
> 时间：2012-07-10T05:33:08.873
> 
> 标签：javascript, jquery

我想在点击时打开一个窗口，但我想在当前窗口后面打开它，或者当新窗口打开时它应该最小化自己。我做了一个功能，但它实际上没有用。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript">
function wn(){
  var mm=window.open('http://www.google.com','newwindow','width=200, height=200', "_blank");
}
</script>
</head>
<body>
<a href="#" onclick="wn()">click</a>
</body> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-10T05:40:12.547

**编辑**

**父窗口 HTML**

```
<script language="JavaScript" type="text/javascript">
function openPopUP() {
  window.open('mywindow.html','NewWin',
            'toolbar=no,status=no,width=350,height=135')
}
</script>

<body onLoad="openPopUP();">
or
<a href="javascript:openPopUP();">Click to open popup</a> 
```

**子窗口即弹出窗口文件**

下面的脚本应该在子窗口中。子窗口将打开并在 1 秒后自动隐藏。`1000`该方法中指定的值`setTimeout`是以毫秒为单位的子窗口将打开的持续时间。如果您希望子窗口打开更长的时间，您可以增加此超时持续时间。

```
<body onLoad="setTimeout('window.blur()', 1000);" 
          onFocus="setTimeout('window.blur()', 1000);"> 
```

* * *

`onload`这可能对您有用：在您的子窗口事件中添加这行代码......

```
window.parent.opener.focus(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-12T11:50:57.217

```
popunder = window.open('http://www.google.com','newwindow','width=200, height=200', "_blank");
popunder.blur();
window.focus(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-13T02:22:30.767

尝试这样的事情。

```
window.open(url); 
self.focus(); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-17T09:52:20.850

虽然它会导致安全问题，但我想这样做的方法之一是：

```
popup = window.open('http://www.google.com', 'newwindow',  "_blank");
popup.blur(); 
```

这仅适用于 IE。对于其他浏览器，您需要将安全级别设置为最低。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-18T06:11:18.657

```
popunder = window.open('your_site_url','newwindow','width=500, height=500', "_blank");
popunder.blur();
window.focus(); 
```

或者干脆

```
window.open(url); self.focus(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-17T18:57:30.363

如果你想要真正的 popunder 功能，有一个很棒的 jQuery 插件可以在[https://github.com/hpbuniat/jquery-popunder处理它](https://github.com/hpbuniat/jquery-popunder)

它使用各种技术的组合在各种浏览器中完成它。并非所有浏览器都能以相同的方式处理它，但结果非常相似。

当前浏览器兼容性列为：（^(上次更新时间为 18 年 4 月）)

*   火狐浏览器 3-57
*   谷歌浏览器 10-62
*   Microsoft Internet Explorer 6-11 -- MSIE 6-8 需要 jquery 1.x
*   苹果Safari 5

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-04T11:21:49.380

最后，它只在 chrome 浏览器中对我有用。在父窗口中添加此代码：

```
<script type="text/javascript" language="javascript"> 
    function popWindow() 
    { 
    var popupo = window.open("popup.html", 'newwindow','toolbar=no,status=no,width=650,height=450', "_blank");
    popupo.moveTo(0, 0);
    popunder.blur();
    window.focus();
    } 
</script> 
```

在子窗口主体 onload 事件中添加此代码为

```
<body onLoad="setTimeout('window.blur()', 1000);" onFocus="setTimeout('window.blur()', 1000);"> 
```

# java - HTTPS POST 使用 HttpClient API 打开 2 个套接字

> ID：11407155
> 
> 赞同：1
> 
> 时间：2012-07-10T05:33:14.837
> 
> 标签：java, networking, https

经过大量的研发和谷歌搜索，无法解决我的问题。

**环境设置**

Web 服务器 (Tomcat 6.0.20) --> 代理服务器 (Windows Server 2007) --> 第三部分主机

我们有应用程序，它进行在线支付交易，在完成此交易后，我们希望将交易状态发送到第三方服务器。因此，从我们的 Web 服务器向第三方服务器发布数据会在代理服务器上为一项事务打开 2 个套接字，但是当我们在 Web 服务器上检查时，它只创建了一个套接字。那么为什么代理服务器上有2个套接字。

下面是我的示例代码

```
import javax.net.ssl.*;
import javax.net.SocketFactory;
import java.net.*;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.IOException;
import java.security.MessageDigest;
import java.util.Hashtable;
import java.math.BigInteger;
import org.apache.commons.httpclient.*;
import org.apache.commons.httpclient.methods.PostMethod;
import org.apache.commons.httpclient.protocol.*;

public class HTTPPostDemo {

    private String privateKey;
    private String host;
    private int port;
    private String userName;
    private Header[] headers = null;

    public class MySSLSocketFactory implements SecureProtocolSocketFactory {

        private TrustManager[] getTrustManager() {
            TrustManager[] trustAllCerts = new TrustManager[]{
                new X509TrustManager() {
                    public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                        return null;
                    }
                    public void checkClientTrusted(
                            java.security.cert.X509Certificate[] certs, String authType) {
                    }
                    public void checkServerTrusted(
                            java.security.cert.X509Certificate[] certs, String authType) {
                    }
                }
            };
            return trustAllCerts;
        }

        public Socket createSocket(String host, int port) throws IOException, UnknownHostException {

            TrustManager[] trustAllCerts = getTrustManager();
            try {
                SSLContext sc = SSLContext.getInstance("SSL");
                sc.init(null, trustAllCerts, new java.security.SecureRandom());
                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                SocketFactory socketFactory = HttpsURLConnection.getDefaultSSLSocketFactory();
                return socketFactory.createSocket(host, port);
            } catch (Exception ex) {
                throw new UnknownHostException("Problems to connect " + host + ex.toString());
            }
        }

        public Socket createSocket(Socket socket, String host, int port, boolean flag) throws IOException, UnknownHostException {
            TrustManager[] trustAllCerts = getTrustManager();
            try {

                SSLContext sc = SSLContext.getInstance("SSL");
                sc.init(null, trustAllCerts, new java.security.SecureRandom());
                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                SocketFactory socketFactory = HttpsURLConnection.getDefaultSSLSocketFactory();
                return socketFactory.createSocket(host, port);
            } catch (Exception ex) {
                throw new UnknownHostException("Problems to connect " + host + ex.toString());
            }

        }

        public Socket createSocket(String host, int port, InetAddress clientHost, int clientPort) throws IOException, UnknownHostException {

            TrustManager[] trustAllCerts = getTrustManager();
            try {
                SSLContext sc = SSLContext.getInstance("SSL");
                sc.init(null, trustAllCerts, new java.security.SecureRandom());
                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
                SocketFactory socketFactory = HttpsURLConnection.getDefaultSSLSocketFactory();
                return socketFactory.createSocket(host, port, clientHost, clientPort);
            } catch (Exception ex) {
                throw new UnknownHostException("Problems to connect " + host + ex.toString());
            }

        }
    }

    public SslClient(String host, int port, String userName, String privateKey) {
        this.host = host;
        this.port = port;
        this.userName = userName;
        this.privateKey = privateKey;
    }

    protected String md5Sum(String str) {
        String sum = new String();
        try {
            MessageDigest md5 = MessageDigest.getInstance("MD5");
            sum = String.format("%032x", new BigInteger(1, md5.digest(str.getBytes())));
        } catch (Exception ex) {
        }
        return sum;

    }

    public String getSignature(String xml) {
        return md5Sum(md5Sum(xml + privateKey) + privateKey);
    }

    public String sendRequest(String xml) throws Exception {

        HttpClient client = new HttpClient();
        client.setConnectionTimeout(60000);
        client.setTimeout(60000);
        String response = new String();
        String portStr = String.valueOf(port);
        Protocol.registerProtocol("https", new Protocol("https", new MySSLSocketFactory(), port));
        String signature = getSignature(xml);
        String uri = "https://" + host + ":" + portStr + "/";
        PostMethod postRequest = new PostMethod(uri);
        postRequest.addRequestHeader("Content-Length", String.valueOf(xml.length()));
        postRequest.addRequestHeader("Content-Type", "text/xml");
        postRequest.addRequestHeader("X-Signature", signature);
        postRequest.addRequestHeader("X-Username", userName);
        postRequest.setRequestBody(xml);
        System.out.println("Sending https request....." + postRequest.toString());

        try {
            client.executeMethod(postRequest);
        } catch (Exception ex) {
            throw new TaskExecuteException("Sending post got exception ", ex);
        }

        response = postRequest.getResponseBodyAsString();
        headers = postRequest.getRequestHeaders();
        return response;
    }

    public String getPrivateKey() {
        return privateKey;
    }

    public void setPrivateKey(String privateKey) {
        this.privateKey = privateKey;
    }

    public String getHost() {
        return host;
    }

    public void setHost(String host) {
        this.host = host;
    }

    public int getPort() {
        return port;
    }

    public void setPort(int port) {
        this.port = port;
    }

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    public Header[] getHeaders() {
        return headers;
    }

    public void setHeaders(Header[] headers) {
        this.headers = headers;
    }

    public static void main(String[] args) {

        String privateKey = "your_private_key";
        String userName = "your_user_name";
        String host = "demo.site.net";
        int port = 55443;

        String xml =
                "<?xml version='1.0' encoding='UTF-8' standalone='no' ?>"
                + "<!DOCTYPE OPS_envelope SYSTEM 'ops.dtd'>"
                + "<OPS_envelope>"
                + "<header>"
                + "<version>0.9</version>"
                + "<msg_id>2.21765911726198</msg_id>"
                + "<msg_type>standard</msg_type>"
                + "</header>"
                + "<body>"
                + "<data_block>"
                + "<dt_assoc>"
                + "<item key='attributes'>"
                + "<dt_assoc>"
                + "<item key='domain'>test-1061911771844.com</item>"
                + "<item key='pre-reg'>0</item>"
                + "</dt_assoc>"
                + "</item>"
                + "<item key='object'>DOMAIN</item>"
                + "<item key='action'>LOOKUP</item>"
                + "<item key='protocol'>XCP</item>"
                + "</dt_assoc>"
                + "</data_block>"
                + "</body>"
                + "</OPS_envelope>";

        SslClient sslclient = new SslClient(host, port, userName, privateKey);

        try {
            String response = sslclient.sendRequest(xml);
            System.out.println("\nResponse is:\n" + response);
        } catch (Exception e) {
            e.printStackTrace();

        }

    }
} 
```

由于一天我们要处理超过 10,000 笔交易，所以代理的套接字数量正在增加，所以 2-3 天后，我们需要硬重启 Web 服务器以释放所有使用代理服务器打开的套接字。

HTTPClient 是否为 SSL 握手打开一个套接字并为实际数据发布打开另一个套接字？我不这么认为。那么它应该在 Web 服务器上而不是在代理服务器上

为了检查 web 服务器上的套接字和打开的端口，我们使用 netstat 命令。为了检查代理服务器上的套接字和开放端口，我们使用代理工具

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T09:41:04.407

> 当我们在网络服务器上检查时，它只创建了一个套接字。

因为它只有一个入站连接。

> 那么为什么代理服务器上有2个套接字。

因为您通过代理服务器连接到两个不同的服务器？

> 代理的套接字数量越来越多，因此 2-3 天后，我们需要硬重启 Web 服务器以释放所有使用代理服务器打开的套接字。

那没有意义。具有双重连接的是代理服务器，而不是 Web 服务器。你上面说了。如果 Web 服务器的套接字不足，则说明有人没有正确关闭他们的连接：客户端、代理服务器或 Web 服务器。可能您的套接字工厂也需要覆盖 equals() 和 hashCode()，以启用连接池`HttpClient`可能执行的任何操作，我不是这方面的专家。

**但是**你`TrustManager`是完全不安全的。如果您已将其部署在生产环境中，则您已经犯了*重大*的安全漏洞。目前这是一个*更大*的问题，即每隔几天就会用完套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:02:09.970

当套接字端口用完时，会发生事务超时。解决这个问题的方法是调优 TIMEWAIT 相关的 Windows 注册表参数：

*   TcpTimedWaitDelay

*   最大用户端口

*   StrictTimeWaitSeqCheck

与 TIMEWAIT 相关的 Windows 注册表参数控制套接字端口在关闭后保持不可用的时间以及有多少端口可供使用。

通过设置这些windows注册表参数，我已经解决了这个问题，但不知道，执行与否是一个正确的解决方案。

# direct2d - 直接 2D 矩形模糊效果

> ID：11407156
> 
> 赞同：1
> 
> 时间：2012-07-10T05:33:16.500
> 
> 标签：direct2d

我是 Direct2D 的新手。我想在矩形上应用模糊效果。Direct2D 效果仅在 windows2008 预览版中可用。请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:22:03.670

我通过将高斯模糊应用于矩形并移动它自己解决了这个问题

# jquery - 动态生成的点击事件未触发

> ID：11407159
> 
> 赞同：1
> 
> 时间：2012-07-10T05:33:52.737
> 
> 标签：jquery, html, list, dynamic, click

大家好，我正在生成我的 ul 和 li，如下所示，并且想要触发 click 事件，但是 delegate()、on() 和 click() 方法不起作用，只有 live() 效果很好，但 live() 已被弃用，所以有没有我可以使用的其他方法请帮助我？？/这里**“loadpage”**是我的html代码中的div

```
<script type="text/javascript">
       $(document).ready(function() {
             $('#LoadPage').append('<ul class="testul" id="list">');
                 for (var i = 1; i < 5; i++) {
                   $('#list').append('<li class="clicks" id="item'+i+'"></li>');
                 }          
             $('#LoadPage').append('</ul>');
        });

            // click event works  wtih .live() onlyyy.......................
        $('.clicks').live('click', function() {
            alert('hello');
        });

        /*$(".clicks").on("click", function(){
            alert('hello');
        });
        $("#testul").delegate("li", "click", function() {
        alert('hello');
        });

        $("#testul").delegate("li", "click", function() {
            alert('hello');
              });*/

    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T05:43:00.363

您的选择器应该与文档匹配，因为文档确实存在。*然后，*您将传递选择器以获取将存在的点击。通过最初在 .clicks 上匹配，您的结果集是空的，并且没有任何反应。

```
$(document).on("click", ".clicks", function(){ 
        alert('hello'); 
}); 
```

*live*的文档讨论了如何将使用它的代码转换为使用*或*委托*：* http: [//api.jquery.com/live/](http://api.jquery.com/live/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T05:42:49.250

嗯..

我试了一下，效果很好

试试[这个](http://jsfiddle.net/7dfSP/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T05:46:39.577

方法 delegate()、on() 和 click() 不起作用，因为您还没有加载 html。加载 li 元素后尝试定义它。

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#LoadPage').append('<ul class="testul" id="list">');
            for (var i = 1; i < 5; i++) {
              $('#list').append('<li class="clicks" id="item'+i+'"></li>');
            }          
        $('#LoadPage').append('</ul>');
        $('.clicks').click(function() {
            alert('hello');
        });
     });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T05:48:42.423

```
 $(document).ready(function() {
         $('#LoadPage').append('<ul class="testul" id="list">');
             for (var i = 1; i < 5; i++) {
               $('#list').append('<li class="clicks" id="item'+i+'"></li>');
             }          
         $('#LoadPage').append('</ul>');
    });

        // click event works  wtih .live() onlyyy.......................
    $('.clicks').live('click', function() {
        alert('hello');
    }); 
```

只需将其更改为

```
 $(document).ready(function() {
         $('#LoadPage').append('<ul class="testul" id="list">');
             for (var i = 1; i < 5; i++) {
               $('#list').append('<li class="clicks" id="item'+i+'"></li>');
             }          
         $('#LoadPage').append('</ul>');
         // click event works  wtih .live() onlyyy.......................
         $('.clicks').click(function() {
             alert('hello');
         });
    }); 
```

以前这些`<li>`项目不存在于 DOM 中，插入 DOM 后，它可以具有任何功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T05:49:41.307

从 jQuery 1.7 开始，不推荐使用 .live() 方法

您使用的是什么版本的 jQuery？On 已在 1.7 版本中添加，请查看[此处的文档](http://api.jquery.com/on/)

如果您包含正确版本的 jQuery，它应该可以正常工作。

[关于代表在这里](http://jsfiddle.net/bWb77/1/)试试这个

# javascript - Javascript 正则表达式 .*?

> ID：11407160
> 
> 赞同：1
> 
> 时间：2012-07-10T05:33:57.850
> 
> 标签：javascript, regex

我有以下正则表达式：

```
var regEx = /^\W*(.*?)\W*$/;
var regEx2 = /^\W*(.*)\W*$/; 
```

1.  实际上是什么`(.*?)`意思？`(.*?)`和有什么区别`(.*)`？
2.  为什么在 Javascript中`regEx.exec("abc ")`返回？`['abc ', 'abc']`
3.  为什么在 Javascript中`regEx2.exec("abc ")`返回？`['abc ', 'abc ']`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T05:46:12.260

1.  `?`在量词之后添加`*`, `+`,`{n,m}`等会产生不情愿/惰性匹配，而不是默认的贪婪匹配。从名字上看很直观。贪婪意味着它将尝试尽可能多地匹配。Lazy 意味着它将尝试尽可能少地匹配。

2.  没有非单词`\W`标记，因此`\W*`匹配空字符串。然后`(.*?)`将尽可能少地匹配，但检查是否`\W*`可以匹配某些东西。所以`(.*?)`将 match 和**capture** `"abc"`，并且`\W*`(non-word) 将匹配空格。

3.  与上面几乎相同，但`(.*)`会尽可能多地吃掉并匹配和**捕获** `"abc "`，并且`\W*`会留下空字符串，它匹配。

对于 2 和 3，返回数组中的第二个元素是正则表达式中第一个捕获组捕获的文本。数组中的第一个元素是匹配整个正则表达式的文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T05:37:18.913

> (.*?) 实际上是什么意思？

在匹配组中非贪婪地匹配任何字符零次或多次。

> 为什么 regEx.exec("abc") 在 Javascript 中返回 ['abc', 'abc']？

您为每个匹配组获得一个数组成员。索引 0 处的元素是整个匹配项，下一个元素来自上面的第一个（也是唯一的）匹配组。

> 为什么 regEx2.exec("abc") 在 Javascript 中返回 ['abc', 'abc']？

出于与上述相同的原因，除了这一次，贪婪匹配也会匹配末尾的空格，因此在这种情况下，您的第一个捕获组与完整匹配相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:49:08.647

好的，在查看我发现的正则表达式时，最简单的做法是将它们分解并写出每个部分在做什么。

所以取第一个正则表达式`/^\W*(.*?)\W*$/`

```
^        Start of search string
\W*      Match a non-word character zero or more times
(        Start of group
  .*?    Match any character (except a line terminator) zero or more times but as few as possible
)        End of group
\W*      Match a non-word character zero or more times
$        End of search string 
```

该`exec`方法搜索文本并返回一个字符串数组（如果失败，则返回 null）。元素 0 处的字符串是整个表达式匹配的子字符串，其后的字符串是对应于各个捕获组的字符串。

因此，对于您的第一个示例，整个表达式正在捕获`"abc "`，但`(.*?)`组正在捕获`"abc"`，因此您在数组中获得了两个项目

# git - 不能不说要变基的分支

> ID：11407161
> 
> 赞同：1
> 
> 时间：2012-07-10T05:33:59.973
> 
> 标签：git

我写了一个做变基的脚本。

当我运行时`$ my-rebase`，我得到一个错误：

> 您要求我拉动，但没有告诉我您要针对哪个分支进行变基，并且您的配置文件中的“branch.rohan_branch1.merge”也没有告诉我。请在命令行中指定您要使用的分支，然后重试（例如“git pull”）。有关详细信息，请参阅 git-pull(1)。
> 
> 如果您经常针对同一个分支进行变基，您可能希望在配置文件中使用类似以下内容：
> 
> ```
> [branch "rohan_branch1"]
> remote = <nickname>
> merge = <remote-ref>
> rebase = true
> 
> [remote "<nickname>"]
> url = <url>
> fetch = <refspec> 
> ```

* * *

我有主分支（工作副本），然后我创建了 rohan_branch1; 似乎在某个时间点我确实在 master 中进行了 rebase。

现在我想让 rohan_branch1 保持最新。我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:28:39.037

如果你想在拉 ( `git pull --rebase`) 时变基，你需要有一个上游分支与你要拉到的本地分支相关联：

```
git branch --set-upstream rohan_branch1 nickname/anotherBranch 
```

（正如[CharlesB](https://stackoverflow.com/users/11343/charlesb)在“ [“<code>git rebase origin” vs.“<code>git rebase origin/master”</a>”中所描述的）](https://stackoverflow.com/questions/5963597/git-rebase-origin-vs-git-rebase-origin-master)

[](https://stackoverflow.com/questions/5963597/git-rebase-origin-vs-git-rebase-origin-master)

[从那里，您可以考虑](https://stackoverflow.com/questions/5963597/git-rebase-origin-vs-git-rebase-origin-master)[Jason Weathered](http://jasoncodes.com/)的 gup 脚本（来自[“gup: A friendlyier `git pull --rebase`”）](http://jasoncodes.com/posts/gup-git-rebase)：

```
function gup
{
  # subshell for `set -e` and `trap`
  (
    set -e # fail immediately if there's a problem

    # use `git-up` if installed
    if type git-up > /dev/null 2>&1
    then
      exec git-up
    fi

    # fetch upstream changes
    git fetch

    BRANCH=$(git symbolic-ref -q HEAD)
    BRANCH=${BRANCH##refs/heads/}
    BRANCH=${BRANCH:-HEAD}

    if [ -z "$(git config branch.$BRANCH.remote)" -o -z "$(git config branch.$BRANCH.merge)" ]
    then
      echo "\"$BRANCH\" is not a tracking branch." >&2
      exit 1
    fi

    # create a temp file for capturing command output
    TEMPFILE="`mktemp -t gup.XXXXXX`"
    trap '{ rm -f "$TEMPFILE"; }' EXIT

    # if we're behind upstream, we need to update
    if git status | grep "# Your branch" > "$TEMPFILE"
    then

      # extract tracking branch from message
      UPSTREAM=$(cat "$TEMPFILE" | cut -d "'" -f 2)
      if [ -z "$UPSTREAM" ]
      then
        echo Could not detect upstream branch >&2
        exit 1
      fi

      # can we fast-forward?
      CAN_FF=1
      grep -q "can be fast-forwarded" "$TEMPFILE" || CAN_FF=0

      # stash any uncommitted changes
      git stash | tee "$TEMPFILE"
      [ "${PIPESTATUS[0]}" -eq 0 ] || exit 1

      # take note if anything was stashed
      HAVE_STASH=0
      grep -q "No local changes" "$TEMPFILE" || HAVE_STASH=1

      if [ "$CAN_FF" -ne 0 ]
      then
        # if nothing has changed locally, just fast foward.
        git merge --ff "$UPSTREAM"
      else
        # rebase our changes on top of upstream, but keep any merges
        git rebase -p "$UPSTREAM"
      fi

      # restore any stashed changes
      if [ "$HAVE_STASH" -ne 0 ]
      then
        git stash pop
      fi

    fi

  )
} 
```

它不会直接调用 git pull --rebase ，而是管理未跟踪的文件（存储），并在变基时保留合并提交（`git rebase -p`）。
（参见“ [Envato Notes 博客”中的“](http://notes.envato.com/) [Rebase Merge Commits in Git](http://notes.envato.com/developers/rebasing-merge-commits-in-git/) ” ）

# c# - 使用共享优先级队列进行负载平衡

> ID：11407163
> 
> 赞同：0
> 
> 时间：2012-07-10T05:34:11.910
> 
> 标签：c#, priority-queue, c5

我目前正在尝试实施负载平衡器，并且遇到了一些减速带。情况如下（简化），

*   我有一个由 worker_a 处理的**请求**队列**queue_a**
*   有第二个请求队列**queue_b**由**worker_b处理**
*   我有第三个请求队列**queue_c**可以去任何一个工人

这种设置的原因是每个工人都有独特的请求，只有它可以处理，但也有任何人都可以处理的一般请求。

我打算使用 3 个[C5](http://www.itu.dk/research/c5/) IntervalHeap 实例来实现这一点。每个工作人员都可以访问其本地队列+它所属的共享队列（例如，worker_a 可以看到 queue_a 和 queue_c）。

这个想法的问题在于，如果本地队列中有一个请求，而共享队列中有一个优先级相同的请求，则无法知道应该先处理哪个请求（IntervalHeap 通常是先来的-发生这种情况时先发球）。

**编辑：**我发现 IntervalHeap 似乎**不是**具有相同优先级请求的先到先服务器！

我想尽量减少跨队列的锁定，因为它会相对较高的吞吐量和时间敏感，但目前我能想到的唯一方法将涉及更多的复杂性，即删除第三个队列并将共享请求放入两者queue_a 和 queue_b。当请求被吸收时，它会知道这是一个共享请求，并且必须将其从其他队列中删除。

希望足够清楚地解释它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:49:47.853

看起来你最终只会推动泡沫——无论你如何安排它，在最坏的情况下，你将只有两个工人来执行三件同等优先级的事情。为了选择从哪个队列中提取下一个任务，您可以应用什么样的打破规则来超越优先级？

这里有两个想法：

1.  随机选择队列。所有优先级都是平等的，因此选择哪一个并不重要。平均而言，在最坏的情况下，所有队列的服务速度大致相同。

2.  通过从具有最多元素的队列中获取来最小化队列长度。如果一个队列的填充率始终高于其他队列，这可能会导致其他队列出现饥饿。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T02:50:02.540

同步您的工作人员可以共享相同的资源池以及他们的私有队列。在工作人员 1 的队列中有 1 个可用项目和共享队列中有 1 个可用项目中，如果工作人员 1 首先拿起共享队列的项目，那将是一种耻辱，因为这将限制并行运行。相反，您希望工人 1 首先拿起私人物品，但这会导致新的警告，即工人 1 和工人 2 都忙于处理私人物品，因此不会拿起旧的共享物品。

当还试图降低复杂性时，找到解决这些问题的解决方案将非常困难。一个简单的实现是仅在私有队列为空时处理共享项。这并没有解决在高负载情况下未正确处理优先级的部分。（例如，共享队列不会被处理，因为私有队列总是满的）。为了平衡这一点，您可能希望首先处理私有队列，前提是其他工作人员私有队列为空。这仍然不是一个完美的解决方案，因为这仍然会更喜欢私有队列项目而不是共享项目。可以通过设置多个策略来再次解决这个问题，但这里会带来更多的复杂性。

这一切都取决于您的要求。

# c# - 基于过滤子集返回集合的 LINQ 方法

> ID：11407165
> 
> 赞同：0
> 
> 时间：2012-07-10T05:34:25.083
> 
> 标签：c#, .net, linq, linq-to-sql

我有 2 张桌子。1 个实体，每行 1 个。另一个只是我的 EntitiesID 和 EmployeeID 的映射表。我正在尝试编写一个 LINQ 方法，该方法从第一个表中返回所有实体，其中 EntityID 在由 EmployeeID 过滤的映射表中。

简化表结构示例 `TaskTable: ID, Description, Status` `TaskViewTable: ID, TaskID, EmployeeID`

因此，我想从 TaskTable 返回 ID 位于基于 EmployeeID 的 TaskViewTable 的子查询结果中的所有行。

在 LINQ 中执行此操作有什么帮助吗？我在两张桌子之间也设置了一对多。我知道有类似的问题，也许我很密集，但它们似乎并不完全适用于我所问的问题。（例如[Linq Return Filtered Children](https://stackoverflow.com/questions/1860192/linq-return-filtered-children)）

抱歉忘了显示我到目前为止的内容：

```
IQueryable<tblTask> tTask=context.GetTable<tblTask>();
return tTask.Where(t => t.tblTasksViews.Where(v => v.EmployeeID == empID)) 
```

然而，它不喜欢我`where`的`unkown method Where(?)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:39:21.447

尝试这样的事情：

```
var query =
    from tt in TaskTable
    join tvt in TaskViewTable on tt.ID equals tvt.TaskID into xs
    where xs.Any(z => z.EmployeeID == empID)
    select tt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:20:29.797

这样的事情应该可以解决问题：

```
var tasks = tTask.Where(t => 
    tTaskView.Where(v => v.ID == empId).Select(v => v.TaskId).Contains(t.ID)); 
```

您可以将上述内容分为两个部分：

```
//1.) Get all task views for the employeeID and only select the mapped TaskId
var taskViews = tTaskView.Where(v => v.ID == empId).Select(v => v.TaskId); //taskViews = IEnumerable<int>

//2.) Then get all tasks from the filtered task ids  
var tasks = tTask.Where(t => taskViews.Contains(t.ID)); 
```

**更新**

```
//3.) Project filtered results into IEnumerable<Task>
return tasks.Select(t => new Task() 
{ 
    ID = t.ID, 
    ActionableID = t.ActionableID, 
    StatusID = t.StatusID, 
    TypeID = t.TypeID, 
    Description = t.Description 
}); 
```

当然，您可以将所有内容串成一个漂亮的单行：

```
public List<Task> GetTasks(int empId) 
{
    return tTask
        .Where(t => tTaskView.Where(v => v.ID == empId).Select(v => v.TaskId).Contains(t.ID))
        .Select(t => new Task() 
        { 
            ID = t.ID, 
            ActionableID = t.ActionableID, 
            StatusID = t.StatusID, 
            TypeID = t.TypeID, 
            Description = t.Description 
        }).ToList();
} 
```

# php - 在 MySQL 中使用时间而不是字符串 CURRENT_DATE 是个好主意吗？

> ID：11407167
> 
> 赞同：2
> 
> 时间：2012-07-10T05:34:37.663
> 
> 标签：php, mysql

我决定在 MySQL 中使用时间而不是字符串日期，但我想知道这是否是个好主意。例如我使用：

```
1268557200 
```

代替：

```
Sun, 14 Mar 2010 09:00:00 GMT 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:39:09.347

当然是特殊类型更好。该数据库针对此类类型进行了优化。例如，您的字符串有很多字符，日期类型在内部是整数或长整数，只需要 4 或 8 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:58:15.883

使用最能代表您尝试存储的数据的类型通常是最有意义的。也就是说，如果您的数据是面向日期的，则使用面向日期的字段。这些在内部存储为数字，这绝对比字符串更快地访问、存储、排序等。优点是您可以像访问字符串一样访问（输入和输出），但它们的工作和排序就像数字一样。

重要的一点是不要在查询中使用日期数学。在编写SQL*之前*，在代码中进行数学运算（添加天数、减去小时数等） 。这使您可以充分利用索引、查询缓存等。有一些优化可以让您摆脱将日期数学留在 SQL 中的情况，但可能并不明显缺陷在哪里。因此，除非您确定自己所做的事情已经过优化，否则一个好的经验法则是将计算排除在 SQL 之外。

# c++ - 搜索向量的问题？

> ID：11407174
> 
> 赞同：0
> 
> 时间：2012-07-10T05:34:59.330
> 
> 标签：c++

我有一个如下形式的向量（在 C++ 中）：

```
 vector<pair<int,int> > u; 
```

现在，当 u.first 的第一个元素等于 12 时，我想退出循环。我为此使用以下代码：

```
 while(1){
    if((find(u.begin().first, u.end().first, 12)!=u.end().first))
            {
                    break;
            } 
   } 
```

但是，它给了我一个错误

```
 'unable to resolve identifier first' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:36:42.580

`std::find`迭代一个范围并将迭代器返回到序列中与提供的值匹配的第一个元素（`12`在您的情况下为 ）。迭代器不是容器中的元素，它们是对容器中元素的伪引用。

您必须取消引用迭代器才能获取元素。因此，`u.begin()->first`将是`first`容器的初始元素的值。 `u.begin().first`是荒谬的。

在任何情况下，要使用 以外的操作查找匹配元素`==`，您需要使用`find_if`自定义谓词。例如，使用 lambda 表达式：

```
auto const it(std::find_if(u.begin(), u.end(), [](std::pair<int, int> const& v)
{
    return v.first == 12;
}));

if (it != u.end())
    continue; 
```

# c++ - 检测到指针引用可能的内存泄漏？

> ID：11407175
> 
> 赞同：2
> 
> 时间：2012-07-10T05:35:12.357
> 
> 标签：c++, pointers, reference

我有内存泄漏吗？我正在构建一个游戏引擎，我有一些我认为正确的代码，但我的代码分析工具 (cppcheck) 说我有内存泄漏，这可能是误报。

我有一个（这是一个简单的用例）

```
class Mesh
{
D3DMATERIAL9* mpMaterials;
LPDIRECT3DTEXTURE9* mpTextures;

D3DMATERIAL9*& GetMaterials() { return mpMaterials; }
LPDIRECT3DTEXTURE9*& GetTexures() {return mpTextures; }
}; 
```

在我的网格类中，我有一些 directx 指针当我加载网格时，我将 shared_ptr 发送到要加载的图形管理器类中的函数。

在那个功能我做

```
void Renderer::LoadMesh( shared_ptr<Mesh> myMesh)
{
// other code
D3DMATERIAL9*& pMaterials= myMesh->GetMaterials();
LPDIRECT3DTEXTURE9*& pTextures= myMesh->GetTextures();
// other code

// and then instantiate them

pMaterials = new D3DMATERIAL9[matCount];
pTextures = new LPDIRECT3DTEXTURE9[texCount];

// And then i do some stuff with those objects.
} 
```

现在在这个函数的末尾是当 cpp check 说 pMaterials 和 pTextures 泄露了它们的内存时。我的理解是 pMaterials 和 pTextures 是对 myMesh 中指针的引用，并且我实例化的内存存在于那里，因为 Mesh 类中的指针指向该实例化的内存，并且只要我稍后适当地销毁 Mesh 对象（并调用 delete[] mpMaterials; delete[] mpTextures; 在网格析构函数中）我没有泄漏内存对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:06:39.073

我在 cppcheck 中编写了内存泄漏检查。我同意这是一个误报。我会修好它。

随时在 cppcheck 问题跟踪器中报告它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:44:57.633

如果您只调用一次加载函数，您可能不会泄漏内存。无论如何，您的类设计看起来很脆弱，因为这些指针没有适当的数据封装。如果您对加载函数中加载的数据有设置器会更好。这将允许拥有数据的类在多次调用 setter 时删除旧数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T05:52:51.057

只要您在某个时候销毁您的 Mesh 对象，您就不会泄漏您的两个数组。

静态分析工具出现误报的情况并不少见，尤其是在检查内存泄漏等运行时问题时。如果您对内存泄漏感兴趣，请尝试使用运行时分析工具，例如 Valgrind。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T05:59:31.273

不，您的代码似乎没问题。

Valgrind 说“无效的删除/释放/重新分配”，但其原因可能是您（似乎）释放了您从未分配过的指针。

由于您正在使用此处的指针做一些有趣的事情，因此您可能会误报。

# c# - 模拟 Windows 8 开始菜单磁贴布局引擎

> ID：11407177
> 
> 赞同：15
> 
> 时间：2012-07-10T05:35:22.537
> 
> 标签：c#, wpf, wpf-controls, microsoft-metro

因此，任何人都知道完美模拟 Windows 8 开始菜单磁贴布局引擎的示例代码或控件吗？

它应该支持混合的方形和矩形瓷砖，并正确地重新包装矩形瓷砖上方或下方的方形瓷砖。

注意：如果所有瓷砖都是方形的，则 WrapPanel 有效。但是，一旦您混合了跨越 2 平方空间的图块，布局就会中断，并且与 Windows 8 开始菜单不一致

我期待扩展 WPF 面板的代码。

* * *

免责声明：是的，我在 Internet 上搜索过，我发现最接近的是 CodeProject 示例，但只有在所有图块都是相同大小的正方形时才有效。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-11T12:14:17.857

我环顾四周，找不到任何可以做我/我们想做的事情。我知道要获得这种行为，我们需要某种自定义面板对象，所以我开始创建一个...

归结为，瓷砖需要垂直排列，双倍宽度的瓷砖占据该列的一整行，正常宽度的瓷砖配对。当它到达容器的底部时，它需要创建一个新列并遵循相同的模式。

这是我的实现：

```
 public class MetroTilePanel : Panel
{
    protected override Size ArrangeOverride(System.Windows.Size finalSize)
    {
        double x = 0, y = 0, colWidth = 0, rowHeight = 0;
        int col = 0;
        colWidth = Children.Cast<UIElement>().Select(c => c.DesiredSize.Width).Max();

        foreach (UIElement child in Children)
        {
            rowHeight = Math.Max(rowHeight, child.DesiredSize.Height);

            if (x + child.DesiredSize.Width > (colWidth * (col + 1)))
            {
                // New row
                y += rowHeight;
                x = (colWidth * (col));
                rowHeight = child.DesiredSize.Height;
            }

            if (y + rowHeight > finalSize.Height)
            {
                // New column
                col++;
                x = (colWidth * (col));
                y = 0;
            }

            child.Arrange(new Rect(x, y, child.DesiredSize.Width, child.DesiredSize.Height));
            x += child.DesiredSize.Width;
        }
        return finalSize;
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        double x = 0, y = 0, colWidth = 0;

        foreach (UIElement child in Children)
        {
            child.Measure(availableSize);

            if (x + child.DesiredSize.Height > availableSize.Height)
            {
                x += colWidth;
                y = 0;
                colWidth = 0;
            }

            y += child.DesiredSize.Height;
            if (child.DesiredSize.Width > colWidth)
            {
                colWidth = child.DesiredSize.Width;
            }
        }
        x += colWidth;

        var resultSize = new Size();

        resultSize.Width = double.IsPositiveInfinity(availableSize.Width) ? x : availableSize.Width;
        resultSize.Height = double.IsPositiveInfinity(availableSize.Height) ? y : availableSize.Height;

        return resultSize;
    }
} 
```

正在运行的控件的屏幕截图： ![在此处输入图像描述](../Images/97e70705498495630d60065d057b0b9c.png)

免责声明：

*   MeasureOverride 只是偶然起作用，并且设置不正确。
*   如果您想要漂亮的 MetroTile 布局，请坚持统一尺寸，即 100x100 和 200x100
*   我还没有完全测试它，但我会在我的假 Metro 应用程序中实现它，所以如果你想看到未来的任何变化，请大声疾呼。
*   如果您想要正确的 GridView 平铺行为，那么我们必须创建一个全新的控件（以支持拖动项目等）。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T09:20:45.343

这些是我为我的项目评估的两个不同的库，用于在 WPF 中创建类似 Windows 8 的起始页：

1.  [Telerik RadTileList](http://www.telerik.com/help/wpf/radtilelist-overview.html)（付费）
2.  [mahapps.metro](http://mahapps.com/controls/tile.html)（开源）

# wordpress - WordPress 私人帖子

> ID：11407181
> 
> 赞同：0
> 
> 时间：2012-07-10T05:35:43.700
> 
> 标签：wordpress, private, private-members, posts

好的，这一定很容易，我只是无法弄清楚为什么没有任何效果。

我有一个带有 3 种自定义帖子类型的 wordpress 主题。我想限制对大多数帖子的访问，并允许管理员让公众可以查看一些帖子。我希望它尽可能简单。

我目前拥有的是，我已将所有帖子设置为默认为私有，然后管理员可以进来并将他喜欢的任何帖子设为“公开”，以便未登录的人可以看到它们。

问题在于，我无法在登录用户的字体端显示私人帖子。我已经尝试了许多插件、Members、Advance Member Access 和 Role Scooper，但是一旦我添加了自定义帖子类型，这些似乎都不起作用。

请帮助大家，有谁知道我可以如何设置它，所以如果用户登录显示所有内容，包括公共和私人帖子，而不向非登录用户显示私人帖子。

还是有更好的方法来处理私人帖子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:06:15.517

您可以通过将以下代码添加到 functions.php 来使具有“订阅者”角色的用户访问私人帖子。

```
$subrole = get_role( 'subscriber' );
// For private pages
$subrole->add_cap( 'read_private_pages' );
/// For private posts
$subrole->add_cap( 'read_private_posts' ); 
```

# c++ - 复制构造函数不适用于循环队列？

> ID：11407183
> 
> 赞同：0
> 
> 时间：2012-07-10T05:36:11.843
> 
> 标签：c++, queue, copy-constructor

我试图制作一个对象的副本，这是一个循环队列。我的 Enqueue 和 Dequeue 工作正常，但每当我这样做时，都会出现运行时错误。

```
CQUEUE j = k; 
```

输出窗口说我的复制构造函数在所有控制路径上都是递归的？有人可以帮我弄清楚我做错了什么吗？这是我的复制构造函数，以及重载的赋值运算符。

```
CQUEUE::CQUEUE(const CQUEUE& original)
{
(*this) = original;
}

void CQUEUE::operator=(CQUEUE w)
{
qnode *p = w.front;
(*this).front = new qnode;
(*this).back = front;

while(p -> next != w.back)
{
  back -> num = p -> num;
  p = p -> next;
  back -> next = new qnode;
  back = back -> next;
}

back -> num = p -> num;
p = p -> next;
back -> next = new qnode;
back = back -> next;
back -> num = p -> num;

back -> next = front;
front -> prev = back;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T05:42:56.080

```
(*this) = original; 
```

编译器使这一行调用复制构造函数而不是您的 = 运算符，因为您的 = 运算符当前采用**非常量的按值**CQUEUE。相反，您的 = 运算符应如下所示：

```
void CQUEUE::operator=(const CQUEUE& w) 
```

然后你的复制构造函数将调用你的 operator = 。或者，使其更明确：

```
CQUEUE::CQUEUE(const CQUEUE& original)
{
    Copy(original);
}

void CQUEUE::operator=(const CQUEUE& w)
{
    Copy(w);
}

void CQUEUE::Copy(const CQUEUE& other)
{
    // All your copy code here
} 
```

编辑：是的，你是对的，你仍然需要一个复制构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:39:47.537

将赋值运算符函数更改为并注意自赋值

```
void CQUEUE::operator=(const CQUEUE& w)
{
   if (this == &w)
        return *this;

   //Paste your code
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:44:39.227

你做的有点倒退。

一般来说，赋值运算符比复制构造函数更复杂，因为它需要在移动到新值的基础上正确处理持有的资源。

用简单的部分组成一个复杂的系统通常比创建一个*全能的*部分并在其上表达简单的系统更容易。在您的上下文中，这意味着从复制构造函数创建赋值运算符更容易。

因此，只需完整地编写复制构造函数：

```
CQUEUE(CQUEUE const& c) { ... } 
```

然后编写一个例程来交换（交换内容）两个`CQUEUE`实例：

```
void swap(CQUEUE& c) {
    using std::swap;
    swap(front, c.front);
    swap(back, c.back);
} 
```

最后，用它们构建赋值运算符：

```
CQUEUE& operator=(CQUEUE c) { // copy
    this->swap(c);
    return *this;
} 
```

这个成语被称为*复制和交换*（是的，非常有创意！）。

*Note: bonus note, if you have a move constructor, then it becomes a move-and-swap for free.*

# ruby-on-rails - 如何一次为多条记录切换标志？

> ID：11407184
> 
> 赞同：0
> 
> 时间：2012-07-10T05:36:21.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用`Mailboxer`宝石。

检查行，视图传递多个 ID，但此操作仅在接收参数时丢弃第一个 ID# 的记录。

我需要做什么来丢弃与参数中传递的 ID 对应的所有记录？

参数

```
{"utf8"=>"✓",
 "authenticity_token"=>"35UoVt+dvwrGAgg+KZjn8jCZjlkdPj1ktCg5ASyCI4w=",
 "checked_items"=>{"15"=>"15",
 "14"=>"14"},
 "commit"=>"Trash All Checked"} 
```

行动

```
def discard

  conversation = Conversation.find_by_id(params[:checked_items].keys)

  if conversation

    current_user.trash(conversation)

    flash[:notice] = "Message sent to trash."

  else

    conversations = Conversation.find(params[:conversations])

    conversations.each { |c| current_user.trash(c) }

    flash[:notice] = "Messages sent to trash."

  end

  redirect_to :back

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:52:21.737

而不是 find_by_id 使用 find_all_by_id ，您将获得所有对话，然后一一丢弃。

# android - 应用程序在接收 gcm 消息广播时没有被唤醒

> ID：11407185
> 
> 赞同：3
> 
> 时间：2012-07-10T05:36:23.410
> 
> 标签：android, android-c2dm, google-cloud-messaging

我最近使用谷歌的帮助类（GCMBroadcastReceiver、GCMBaseIntentService）将 GCM 消息添加到我的应用程序中。它在应用程序运行时运行良好，无论是在前台还是不在前台。但是，当它不运行时，没有任何效果。

作为测试，我扩展了 GCMBroadcastReceiver 并将日志语句添加到 getGCMIntentServiceClassName() 和 peekService()。当应用程序正在运行并且消息到达时，我看到前者被调用。然后操作系统实例化我的服务类，最终导致 onMessage() 被调用。

当应用程序未运行时，永远不会调用 getGCMIntentServiceClassName()。

我的清单几乎是来自 Google 的 GCM 示例的样板代码。

是否需要设置额外的权限或标志才能让操作系统在我的应用程序未运行并且消息到达时唤醒我的应用程序并带有正确的意图类别？我的接收器定义为：

```
<receiver
    android:name=".GCMBroadcastReceiver"
    android:permission="com.google.android.c2dm.permission.SEND" >
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

        <category android:name="PACKAGENAME" />
    </intent-filter>
</receiver> 
```

请记住：这在应用程序在后台运行时有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T05:46:33.077

呜呜。弄清楚了。大卫瓦瑟在这里的回答：

[广播接收器不工作](https://stackoverflow.com/questions/11273770/broadcastreceiver-isnt-working)

解释了为什么我的应用未运行时看不到广播。我被迫从管理应用程序中退出它，这使它进入“停止”状态（从而导致系统默认将其从广播中排除）。

当我安装应用程序，启动它，关闭设备，然后再次打开它，我可以正确接收广播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-27T15:04:07.903

我有同样的问题，只需从 Android Studio 运行通过 RUN 按钮即可解决。

我认为在调试模式下它不起作用

# android - 引用库项目 .. 为 R 文件提供 NoClassDeffoundError

> ID：11407190
> 
> 赞同：2
> 
> 时间：2012-07-10T05:37:07.523
> 
> 标签：android, android-library

我有一个包含 UI xml 的 android 库项目。这个库包含它自己的 R.java。我将库存储在 libs 文件夹中。

当我尝试将此引用到不同的应用程序时，我收到以下错误。

```
07-10 10:53:33.758: E/AndroidRuntime(630): Caused by: java.lang.NoClassDefFoundError: com.libraryProject.R$drawable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:49:03.533

您可能没有以正确的方式导入它。将android代码导入项目有两种方式

*   Jar 文件：不应该有任何类型的资源，因为你知道你不会被允许访问它。

*   库项目：将项目作为独立应用程序导入工作区，在需要库的项目中，在 Properties->Android->Library->Add 处引用它。

Jar 文件只是压缩代码。您可以复制并粘贴到 lib 中，并将它们添加到 BUILD_PATH。但图书馆项目是参考。如您所说，如果您只是将项目复制并粘贴到 libs 文件夹中，则不会起作用。

看来你正在混合两者。

# android - 如何在android中将图像转换为pdf？

> ID：11407192
> 
> 赞同：2
> 
> 时间：2012-07-10T05:37:24.220
> 
> 标签：android, pdf, itext

我想将从相机拍摄的图像转换为 PDF，以便我可以以编程方式读取其中的文本。我看到了一些建议我使用 itext jar 的链接。我想知道满足我要求的最佳方法。提前谢谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:49:46.343

对于图像到 PDF，可以使用[iText](http://itextpdf.com/terms-of-use/)、[droidtext](https://code.google.com/p/beratungs-app/source/browse/BeratungsKonfigurator/libs/droidText.0.2.jar?spec=svn36&r=36)等库，因此您可以使用它。但是对于您的实际要求是

```
so that I can programmatically read the text in it. 
```

要从图像文件中读取文本而不是将其转换为 PDF 文件，我建议您使用 OCR 库。有许多**Android-OCR 库**（[tesjeract](http://code.google.com/p/tesjeract/)、[mezzofanti](http://code.google.com/p/mezzofanti/)）用于从图像中读取文本。

# java - 使用“in”修饰符编写 MongoDB 查询

> ID：11407193
> 
> 赞同：1
> 
> 时间：2012-07-10T05:37:39.893
> 
> 标签：java, mongodb

我们如何在 mongodb 中编写查询，它等于内部选择 sql 查询。

```
select field1, field2 
from workflowTable 
where id in(select idField from usersTable) 
```

对分贝的命中数应该相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:52:24.387

假设您有 3 个文档。集合名称是用户。

```
 {
    "_id": ObjectId("4efa8d2b7d284dad101e4bc9"),
    "Last Name": "DUMONT",
    "First Name": "Jean",
    "alert":1,
    "Date of Birth": "01-22-1963"
},
{
    "_id": ObjectId("4efa8d2b7d284dad101e4bc7"),
    "Last Name": "PELLERIN",
    "First Name": "Franck",
    "alert":2,
    "Date of Birth": "09-19-1983",
    "Address": "1 chemin des Loges",
    "City": "VERSAILLES"
},
{
    "_id": ObjectId("4efa8d2b7d284dad101e4bc7"),
    "Last Name": "PELLERIN",
    "First Name": "Franck",
    "alert":3,
    "Date of Birth": "09-19-1983",
    "Address": {
        "Street": "1 chemin des Loges",
        "City": "VERSAILLES"
    }
} 
```

在上面的文档中，我只想要 2 个文档，其中列包含警报 1 和 2.Query

```
db.users.find({alert:{$in:[1,2]}}) 
```

这会给我前两个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:32:32.297

您可以在 mongodb 中使用 $in 参数进行此查询。查看[本](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)教程以获取更多信息。

# android - 启用/禁用广播接收器

> ID：11407195
> 
> 赞同：0
> 
> 时间：2012-07-10T05:37:46.197
> 
> 标签：android, broadcastreceiver, boot

我有一个广播接收器，它在设备完成启动时启动服务。但是我不知道如何在代码中禁用/启用它。

这是我的清单：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <receiver
        android:name=".BootReceiver"
        android:label="@string/app_name" >
      <intent-filter> 
          <action android:name="android.intent.action.BOOT_COMPLETED">
          <action android:name="android.intent.action.QUICKBOOT_POWERON">
      </intent-filter>
    </receiver> 
```

BootReceiver.java：

```
public class BootReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    context.startService(new Intent(context, TouchService.class));
   }    
} 
```

我的问题是，我在这里放什么？

```
if (!rBoot.isChecked()) {
   ????????????
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:39:30.387

您可以做的是在您的设备完成启动时使用`SharedPreference`并设置 a并检查标志以启用和禁用您的.`flag``BroadCastReceiver`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:48:02.660

试试这个

```
boolean enabled=prefs.getBoolean(key, false);
int flag=(enabled ?
            PackageManager.COMPONENT_ENABLED_STATE_ENABLED :
            PackageManager.COMPONENT_ENABLED_STATE_DISABLED);
ComponentName component=new ComponentName(EditPreferences.this, OnBootReceiver.class);

getPackageManager()
    .setComponentEnabledSetting(component, flag,
                                PackageManager.DONT_KILL_APP); 
```

# c# - 来自默认模板的 MonoMac 构建错误

> ID：11407196
> 
> 赞同：2
> 
> 时间：2012-07-10T05:37:50.157
> 
> 标签：c#, macos, mono, monodevelop, monomac

我正在尝试使用 MonoDevelop 3.0.3.2 创建 MonoMac 应用程序。我创建了一个新的 MonoMac 解决方案并尝试运行创建解决方案后创建的模板，但这是我的构建输出：

```
Building Solution: MAC1 (Debug|x86)

Building: MAC1 (Debug|x86)
Performing main compilation...
/Library/Frameworks/Mono.framework/Versions/2.10.9/bin/dmcs /noconfig
"/out:/Users/zgillis/Projects/MAC1/bin/Debug/MAC1.exe"
"/r:/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.dll" 
"/r:/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Xml.dll" 
"/r:/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Core.dll" 
"/r:/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Xml.Linq.dll" 
"/r:/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Drawing.dll" 

"/r:/Applications/MonoDevelop.app/Contents/MacOS/lib/monodevelop/AddIns/MonoDevelop.MonoMac/MonoMac.dll" /nologo /warn:4 /debug:full /optimize- /codepage:utf8 /platform:x86     
"/define:DEBUG"  /t:exe "/Users/zgillis/Projects/MAC1/MainWindow.cs"
 "/Users/zgillis/Projects/MAC1/MainWindowController.cs" 
"/Users/zgillis/Projects/MAC1/MainWindow.designer.cs" 
"/Users/zgillis/Projects/MAC1/Main.cs" "/Users/zgillis/Projects/MAC1/AppDelegate.cs" 
"/Users/zgillis/Projects/MAC1/AppDelegate.designer.cs" 

Copying content files
Copying '/Users/zgillis/Projects/MAC1/bin/Debug/MAC1.exe' to
'/Users/zgillis/Projects/MAC1/bin/Debug/MAC1.app/Contents/MonoBundle/MAC1.exe'
Copying '/Users/zgillis/Projects/MAC1/bin/Debug/MAC1.exe.mdb' to 
'/Users/zgillis/Projects/MAC1/bin/Debug/MAC1.app/Contents/MonoBundle/MAC1.exe.mdb'
Build complete -- 0 errors, 0 warnings

Updating application manifest

---------------------- Done ----------------------

Build successful.
Build failed. The given key was not present in the dictionary. 
```

我正在运行 Mac OS X Snow Leopard (10.6.8)，我的 Xcode 版本是 3.2.2。

它甚至不允许我编译默认的 MonoMac 模板，所以我知道我必须有一些配置不正确。我很感激帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:00:45.890

看起来您的 Xcode 版本很旧 - MonoDevelop 对从较旧的 Apple SDK 的 plist 中读取值的支持可能已经倒退。我建议您升级 Xcode，或者使用附加的 MonoDevelop 日志文件（在 ~/Library/Logs/MonoDevelop-3.0 中找到）[提交错误。](https://bugzilla.xamarin.com)

# php - 获取参数值

> ID：11407198
> 
> 赞同：-3
> 
> 时间：2012-07-10T05:38:13.393
> 
> 标签：php, parameters, get

我有多个 php 文件，我想将所有文件合并到一个文件中。所有文件都带有参数。如果某个文件与参数匹配，则应执行该文件，否则应执行其他文件。

它不工作。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:48:17.633

在“合并”文件的顶部，创建一个以文件为关键字的字典以包含，以及包含该页面的参数名称数组的每条记录，然后将这些与 $_GET（或 $_REQUEST 适当的）的键进行比较，并在找到匹配项时包含并中断。

```
$page_parameters = array(
  "person_search.php" => array("first_name","last_name"),
  "edit_post.php" => array("post_id")
);

foreach($page_parameters as $page => $parameters) {
  if($parameters == array_keys($_GET)) {
     include $page;
     break;
  }
} 
```

在这个例子中，如果一个请求进来，`?first_name=bill&last_name=wilson`它会被传递给 person_search.php，如果它带有`?post_id=3121`，它会被传递给 edit_post.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:52:44.360

我假设你的文件是这样的：

01.php

```
<?php
echo $_GET["var1"];
?> 
```

02.php

```
<?php
echo $_GET["var2"];
?> 
```

03.php

```
<?php
echo $_GET["var3"];
?> 
```

然后，您的 final.php 可以是：

```
<?php

//file 01.php
if(isset($_GET["var1"]){
    echo $_GET["var1"];
    exit();
}

//file 02.php
if(isset($_GET["var2"]){
    echo $_GET["var2"];
    exit();
}

//file 03.php
if(isset($_GET["var3"]){
    echo $_GET["var3"];
    exit();
}

?> 
```

当然不会那么简单，除非你发布一些相关的代码。

**更新：**根据您的评论，

访问第一个文件：`read.php?param=dread`
访问第二个文件：（`read.php?param=dread2` *我的猜测）*

在`read.php`：

```
if(isset($_Get['param'])){
    if($param == 'dread'){
        //mycode;
    }
} 
```

您可以在以下位置使用此代码`read.php`：

```
if(isset($_Get['param'])){

$param = $_Get['param'];

    if($param == 'dread'){
        //your code for 'dread'
    }
    if($param == 'dread2'){
        //your code for 'dread2'
    }
} else { // if(isset($_Get['param'])) ENDS
     // your code for the case if $param value is not pre-defined.
} //else ENDS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:47:06.253

您可以传递查询字符串来检查文件。例如：`my~url.com?file=one`在 php`if(GET['file'] == 'one'] //execute that file...`

# c# - 将 ODBC 查询结果转换为 XML

> ID：11407200
> 
> 赞同：0
> 
> 时间：2012-07-10T05:38:21.273
> 
> 标签：c#, visual-studio-2010, odbc

我正在尝试编写一个小 C# 控制台应用程序，它将在现有 ODBC 连接上运行查询并将 ResultSet 转换为 XML 文件。有人可以对此有所了解吗？

我正在考虑使用 System.Xml.XmlReader 在以下上下文中执行此任务，

```
System.Data.Odbc.OdbcConnection conn = new System.Data.Odbc.OdbcConnection();
conn.ConnectionString = "FIL=MS Access;DSN=valid data source name";
string query = "SELECT * FROM Customers FOR XML AUTO, ELEMENTS";

    try {
         OdbcCommand odbcComm = new OdbcCommand(query);
         conn.Open();
         odbcComm.Connection = conn;

         OdbcDataReader data = odbcComm.ExecuteReader();
                         .
                         .
                         .

    } catch (Exception ex) {
            System.Console.WriteLine( "Failed to connect to the data source" );
    } finally {
            conn.Close();
    } 
```

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:29:45.780

这是您想要做的一个示例，尽管它是使用 OleDB 完成的。您可以忽略 OleDB 连接代码（将其替换为 ODBC 等效代码），并通过使用架构将其格式化为 XML 来关注使用 MS Access 数据库中的数据填充 DataSet 的部分：

[http://nathanbrixius.wordpress.com/2010/07/21/converting-an-access-db-to-xml-using-c/](http://nathanbrixius.wordpress.com/2010/07/21/converting-an-access-db-to-xml-using-c/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:03:33.473

这是我使用网络服务所做的。由于工作中的版权废话，我不会将 Web 服务代码放在这里。但是这段代码应该给你一个想法，基本上是创建一个方法并使节点部分成为该方法的返回/结果，然后从那里使用 xmlnodeReader 并从那里你需要的任何字段替换我在 DataTable 中的内容和你自己的行字段名值

```
XmlNode node = svc.GetInfoByZIP("02116");
    DataSet ds = new DataSet();
    using (XmlNodeReader reader = new XmlNodeReader(node))
    {
        ds.ReadXml(reader);
    }

    DataTable table = ds.Tables["Table"];
    DataRow row = table.Rows[0];
    string city = (string) row["CITY"];
    string state = (string) row["STATE"];
    string zip = (string) row["ZIP"];
} 
```

# javascript - jquery ui自动完成comobox重新创建选项不起作用

> ID：11407206
> 
> 赞同：0
> 
> 时间：2012-07-10T05:38:51.110
> 
> 标签：javascript, jquery, combobox, jquery-ui-autocomplete

嗨，我正在使用 jquery ui 自动完成组合框插件，我最初是在`document.ready`

```
jQuery('#combolist_city').combobox(); 
```

我在页面加载时设置了一些选项

```
<select id="combolist_city" class="city" name="search[city]">
                            <option value="0">Select city</option>
                            <?php 
                                if(isset($city_list))
                                {
                                    foreach($city_list as $city_data)
                                    {
                                        if(isset($selected_city) && ($selected_city == $city_data['CityID']))
                                        {
                                            echo "<option selected='selecetd' value=".$city_data['CityID'].">".$city_data['CityName']."</option>";
                                        }
                                        else 
                                        {
                                            echo "<option value=".$city_data['CityID'].">".$city_data['CityName']."</option>";  
                                        }
                                    }   
                                }
                            ?>                      
                        </select> 
```

现在我想改变他的选择，我想通过

```
jQuery("#combolist_city").combobox({
                                    initialValues: ['aaa','bbb','ccc']
                                }); 
```

但它不起作用，它没有重新创建选项，

我该怎么做，请帮助.................................

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:11:00.627

您必须手动完成。首先*销毁*组合框并*清空*选择。*追加*新选项并再次构建组合框：

```
var aList = {'id1': 'val1', 'id2': 'val2', 'id3': 'val3'};
var sKey;
$("#combolist_city").combobox('destroy').empty();
for (sKey in aList) {
    $("#combolist_city").append('<option value="' + sKey + '">' + aList[sKey] + '</option>');
}
$("#combolist_city").combobox(); 
```

另请参阅[此示例](http://jsfiddle.net/TCcRX/1/)。

# html - 如何在 MVC3 中提供基于角色的登录和菜单？

> ID：11407207
> 
> 赞同：0
> 
> 时间：2012-07-10T05:38:51.547
> 
> 标签：html, asp.net-mvc-3, c#-4.0

我的任务是为用户提供基于角色的菜单.....这是我第一次实际在 MVC3 上工作，所以期待您的帮助....我正在从数据库中获取角色...

所以我有不同的菜单，例如 [Home]、[About]、[Projects]、[SetUP]、[Resources]，我想做的是当具有 [admin] 角色的用户登录时，我必须提供给他仅使用 [Home]，[About]，[SetUP] 菜单，我该怎么做表中的 id....我创建了一个登录名，我现在不使用基于角色的登录我如何提供基于角色的登录

这是我的 LoginModel 类

```
 public class LoginModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
    public bool IsValid(string _username, string _pwd)
    {

        SqlConnection cn = new SqlConnection("Data Source=LMIT-0039;Initial Catalog=BugTracker;Integrated Security=True");
        cn.Open();
        SqlCommand cmd = new SqlCommand("GetRoleName", cn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("@UserName ", SqlDbType.VarChar).Value = _username;
        cmd.Parameters.Add("@Password", SqlDbType.VarChar).Value = _pwd;
        Object TypeUser = cmd.ExecuteScalar();
        cn.Close();
        if (TypeUser != null)
        {
            if (TypeUser.ToString() == "Admin")
                return true;
            else if (TypeUser.ToString() == "Developer")
                return true;
            else if (TypeUser.ToString() == "QA")
                return true;
            else
                return false;
        }
        return true;

    } 
```

任何人都可以帮我做这件事吗....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:54:57.363

如果您使用内置的 Forms 身份验证，您可以像这样访问用户角色：

```
string userRole = Roles.GetRolesForUser(User.Identity.Name).FirstOrDefault(); 
```

我使用了，`FirstOrDefault`因为一个用户可以拥有多个角色。从这里您可以使用`switch`语句返回相关视图。此外，如果您想隐藏项目（如全局布局中的菜单项），您可以这样做：

```
@if(Roles.GetRolesForUser(User.Identity.Name).FirstOrDefault() == "TheRoleYouWant")
{
    ...
} 
```

您还可以将`Authorize`属性添加到控制器（或整个控制器）中的功能，该属性仅允许具有此角色的用户访问它。像这样：

```
[Authorize(Roles = "Admin, Role2, Role3")]
public ActionResult Index()
{
    return View();
} 
```

请注意，您可以添加多个角色，它们只需要像上面一样用逗号分隔。

还有很多其他选项，例如`IsUserInRole("Admin")`，看看[实现角色提供者](http://msdn.microsoft.com/en-us/library/8fw7xh74.aspx)。

# map - 地图 API：Google 地球、Worldwind 或 OpenStreet MAP

> ID：11407213
> 
> 赞同：1
> 
> 时间：2012-07-10T05:39:29.197
> 
> 标签：map, gps, openstreetmap, google-earth, worldwind

我想将 MAP 包含在一个应用程序中，该应用程序将更新我的旅行路线。我研究了各种地图来源并列出了 Google Earth、Worldwind 和 Openstreet 地图。有人可以帮我选择合适的吗。我可能还需要离线使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:08:03.777

我可能会建议您选择 Google 地球：在我看来，它更快并且具有更好的纹理质量。它也很常用，因此您可以找到很多关于如何做事的信息和示例，而 Worlwind 并没有被如此使用（stackoverflow 中的 448 对 38 个标签）。

# ruby-on-rails - 处理 Oauth 2.0-facebook gem error 100: This authorization code has been used

> ID：11407216
> 
> 赞同：18
> 
> 时间：2012-07-10T05:39:40.470
> 
> 标签：ruby-on-rails, facebook, oauth-2.0

我一直在为我的 rails 应用程序设置 facebook 身份验证，并且在测试时，使用我的 facebook 帐户登录后，我不断收到此错误：

```
OAuth2::Error:
{"error":{"message":"This authorization code has been used.","type":"OAuthException","code":100}} 
```

我不确定从哪里开始，但似乎无法在网上找到任何关于它的其他内容。任何指导将不胜感激，如果有用的话，很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T10:37:04.140

我也有这个问题。我看到“（facebook）回调阶段已启动。” 在我的 Rails 日志中出现两次消息。事实证明，我两次初始化 FB 身份验证（我使用的是 Devise 和 Omniauth-Facebook），我猜其中之一是试图重置访问令牌。

禁用 Omniauth-Facebook (config/initializers/omniauth.rb) 中的初始化程序解决了我的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T19:11:01.427

这是由于到目前为止 Facebook 的更改是可选的，但将在 2012 年 12 月 5 日为所有人推出。来自 2012 年12 月重大变更的[开发者路线图：](https://developers.facebook.com/roadmap/#december-2012)

> **OAuth 授权代码的新安全限制** 我们只允许将授权代码交换为访问令牌一次，并要求在创建后 10 分钟内将它们交换为访问令牌。这符合 OAuth 2.0 规范，该规范从一开始就声明“授权代码必须是短暂的且一次性使用”。有关更多信息，请查看我们的身份验证文档。

您需要更新您的应用程序以解决此问题。

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T10:56:54.570

此错误发生在上次[Facebook 推送](http://developers.facebook.com/live_status/)之后，并已于今天早上向 facebook[报告。](https://developers.facebook.com/bugs/461571897194273)

所以我想我们只需要等待，同时，在此[报告](https://developers.facebook.com/bugs/461571897194273)中发布更多详细信息，并**按照它**来*帮助和征求 Facebook 的人来解决这个问题！*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T18:35:20.080

我错误地初始化`OmniAuth`了两次，调用`config/initializers/omniauth.rb`了两次。

这将`OmniAuth::Builder`两次添加到中间件堆栈。随着最近 Facebook 的变化，这开始失败并出现错误`100`。

确保`OmniAuth::Builder`在我设法解决此问题后添加。

要仔细检查您的中间件堆栈，请运行以下命令：

```
rake middleware 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-11T05:53:31.020

我有同样的问题，最后发现我的问题是什么。所以对于那些有这个问题并且只使用 Omniauth 而不使用 Devise 的人来说，问题的根本原因可能是重定向路径不正确。

1.  检查你的服务器 development.log
2.  找到它重定向的地方（grep by "Redirected to"）
3.  **这里是重点：**如果回调 URL 正确，请检查日志

就我而言，在 routes.rb 我有，例如：

```
get "mycontroller/home" 
```

没关系，但是在我的 SessionController 中我也有：

```
def create
    auth_hash = request.env['omniauth.auth']
    user = User.from_omniauth(auth_hash)
    session[:user_id] = user.id
    redirect_to "mycontroller/home"
end 
```

因此，我通过将控制器中的这一行更改为：

```
redirect_to "mycontroller/home" 
```

到

```
redirect_to "/mycontroller/home" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T02:14:12.403

所以我能够解决这个问题。似乎我的应用程序正在处理 facebook 身份验证，然后再次尝试执行此操作并产生此错误。奇怪，因为我试图重定向到 root_url。在任何情况下，在将用户信息存储在我的数据库中之后，将我重定向到的页面从“root_url”更改为“/”似乎都会有所不同。

我建议检查您的开发日志，看看您是否遇到类似的错误。

# asp.net - ListView selectedValue 中的 DropDownList 始终是第一个

> ID：11407221
> 
> 赞同：0
> 
> 时间：2012-07-10T05:40:18.393
> 
> 标签：asp.net, listview, data-binding

我有一个`ListView`里面`DropDownList`。`DropDownList`我都试过了：填写`OnItemDataBound`和输入`Page_Load`。我也试过检查`PostBack`，但没有任何帮助。

当我试图获得价值时，我总是得到第一个。我知道这是因为列表被重新填充，但是如何避免呢？如果我只在 时填充它们`IsPostBack = false`，它们就会变成空的。

这是我的代码：

```
<asp:ListView runat="server" ID="MyListView">
    <LayoutTemplate>
        <table border="0" cellpadding="2" cellspacing="0">
            <tr>
                <th><asp:Literal runat="server" Text='<%$ Resources: Resource, LabelWhole %>' /></th>
                <th><asp:Literal runat="server" Text='<%$ Resources: Resource, LabelImport %>' /></th>
                <th><asp:Literal runat="server" Text='<%$ Resources: Resource, LabelPeriod %>' /></th>
                <th><asp:Literal runat="server" Text='<%$ Resources: Resource, LabelDate %>' /></th>
                <th><asp:Literal runat="server" Text='<%$ Resources: Resource, LabelUpload %>' /></th>
            </tr>
            <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr>
            <td><%# DataBinder.Eval(Container.DataItem, "Whole") %></td>
            <td><%# DataBinder.Eval(Container.DataItem, "Upload")%></td>
            <td><%# DataBinder.Eval(Container.DataItem, "Period")%></td>
            <td><asp:DropDownList runat="server" ID="DaysDropDownList"></asp:DropDownList></td>
            <td><asp:FileUpload ID="FileUpload" runat="server" /></td>
        </tr>
    </ItemTemplate>
</asp:ListView>

foreach (var lvItem in MyListView.Items)
{
    if (lvItem.ItemType == ListViewItemType.DataItem)
    {
        DropDownList dr = lvItem.FindControl("DaysDropDownList") as DropDownList;
        for (int i = -1; i >= -12; i--)
        {
            dr.Items.Add(new ListItem(
                DateTime.Now.AddMonths(i).ToString("yyyy MM"),
                DateTime.Now.AddMonths(i).ToString("yyyy MM")));
        }
    }
} 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    this.Application.DataLayer.LoadData(UserID);
    this.MyListView.DataSource = this.Application.DataLayer.Data;
    this.MyListView.DataBind();

    LoadDropDownLists();
}

private void LoadDropDownLists()
{
    foreach (var lvItem in MyListView.Items)
    {
        if (lvItem.ItemType == ListViewItemType.DataItem)
        {
            DropDownList dr = lvItem.FindControl("DaysDropDownList") as DropDownList;
            dr.Items.Clear();
            for (int i = -1; i >= -12; i--)
            {
                dr.Items.Add(new ListItem(
                    DateTime.Now.AddMonths(i).ToString("yyyy MM"),
                    DateTime.Now.AddMonths(i).ToString("yyyy MM")));
            }
        }
    }
}

public void SubmitButtonClick(object sender, EventArgs e)
{
    foreach (var lvItem in MyListView.Items)
    {
        if (lvItem.ItemType == ListViewItemType.DataItem)
        {
            DropDownList dr = lvItem.FindControl("DaysDropDownList") as DropDownList;
            FileUpload fl = lvItem.FindControl("FileUpload") as FileUpload;
            if (fl.HasFile)
            {
                string filename = UploadFile(fl, dr.SelectedValue);
                this.Application.DataLayer.SaveUploadRecord(UserID, 0, (int)UploadType.Upload, dr.SelectedValue, filename);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:50:49.123

当您使用 ListItem 填充 DropdownList 时，您可以相应地设置 ListItem 的 Selected 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:02:11.320

创建一个绑定下拉列表的函数，每次页面加载时调用此函数（在 page_load 事件中），但在调用它之前先清除现有的下拉列表数据源。

# c# - 将数据更新到数据库

> ID：11407223
> 
> 赞同：1
> 
> 时间：2012-07-10T05:40:24.753
> 
> 标签：c#, linq, datagridview, updating

我在向数据库中添加数据时遇到问题。我编写的代码只能更新 shiftTiming_Start 而不能更新 shiftTiming_Stop。有人可以帮忙看看我的代码，看看出了什么问题。非常感谢。

```
private void btnUpdate_Click(object sender, EventArgs e) {
  using (testEntities Setupctx = new testEntities()) {
    var toBeUpdated = txtStart.Text;
    var toBeUpdated1 = txtStop.Text;
    shifthour updateShift = new shifthour();
    updateShift = Setupctx.shifthours.FirstOrDefault(u => u.shiftTiming_start == toBeUpdated);
    updateShift = Setupctx.shifthours.FirstOrDefault(p => p.shiftTiming_stop == toBeUpdated1);
    updateShift.shiftTiming_start = txtStart.Text;
    updateShift.shiftTiming_stop = txtStop.Text;
    Setupctx.SaveChanges();
    txtStart.Text = "";
    txtStop.Text = "";
    MessageBox.Show("Shift Timing Has Been Updated.");
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:36:55.673

假设我正确地关注了你（我建议使用更有意义的变量名），更新代码如下：

```
private void btnUpdate_Click(object sender, EventArgs e) {
  using (testEntities Setupctx = new testEntities()) {
    var toBeUpdatedStart = txtStart.Text;
    var toBeUpdatedStop = txtStop.Text;
    shifthour updateStartShift;
    shifthour updateStopShift;
    updateStartShift = Setupctx.shifthours.FirstOrDefault(u => u.shiftTiming_start == toBeUpdatedStart);
    updateStopShift = Setupctx.shifthours.FirstOrDefault(p => p.shiftTiming_stop == toBeUpdatedStop);
    if (updateStartShift != null)
    {
       updateStartShift.shiftTiming_start = txtStart.Text;
    }
    if (updateStopShift != null)
    {
        updateStopShift.shiftTiming_stop = txtStop.Text;
    }
    Setupctx.SaveChanges();
    txtStart.Text = "";
    txtStop.Text = "";
    MessageBox.Show("Shift Timing Has Been Updated.");
  }
} 
```

# java - 转换为 Graphics2D

> ID：11407224
> 
> 赞同：4
> 
> 时间：2012-07-10T05:40:31.973
> 
> 标签：java, swing

摇摆是否允许转换

```
paint (Graphics g) {
    Graphics2D g2d = (Graphics2D) g;
    ......
} 
```

会一直工作吗？或者可能有不同的图形实现，不仅是 Graphics2D？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T05:49:07.267

简短的回答是，是的，它应该可以工作，除非您使用其他一些 JVM。我不记得具体是从什么时候开始的，但是 Swings 绘制引擎将始终使用 Graphics2D 实例来执行其组件绘制

# javascript - Javascript 从另一个 iframe 更改 ElementById 值

> ID：11407227
> 
> 赞同：0
> 
> 时间：2012-07-10T05:40:37.933
> 
> 标签：javascript, iframe

只是想知道是否可以从加载在同一页面上的另一个 iframe 更改 iframe 中的标签或元素？

我在一个页面上有 2 个 iframe：

```
<iframe id="leftMenu" src="menu.htm" STYLE="top:90px" NAME="menu" width="270px" frameborder="0"></iframe>

<iframe src="page.htm" STYLE="top:90px" NAME="AccessPage" width="100%" height="100%" frameborder="0"></iframe> 
```

从 page.htm（第二个 iframe）我希望能够通过 ID 将值更改为第二个 iframe 上的其他值。

例如：menu.htm（第一个 iframe）在该页面上有一个标签..

```
<label id="test">test1234</label> 
```

从 page.htm（第二个 iframe）我想更改该标签的值。

我尝试过以下操作，但没有运气：

```
document.getElementById('leftMenu').contentWindow.document.getElementById('test').value = 'test successful'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:45:52.703

像这样使用`window.parent`：

```
 window.parent.document.getElementById('leftMenu').contentWindow.document.getElementById('test').innerHTML = "Replaced Successful!" 
```

而不是`.value`使用`.innerHTML`

**查看工作演示：http:** [//jsfiddle.net/rathoreahsan/G2un4/4/](http://jsfiddle.net/rathoreahsan/G2un4/4/)

在本地测试并且工作正常。

# maven - Maven Jetty 运行错误：没有 ClassVisitor

> ID：11407228
> 
> 赞同：1
> 
> 时间：2012-07-10T05:40:38.577
> 
> 标签：maven, maven-jetty-plugin

我正在尝试运行我的小组使用 Maven 和 Eclipse 制作的系统，但是当我尝试使用 mvn jetty:run 时，会出现以下错误：

```
java.lang.NoClassDefFoundError: org/objectweb/asm/ClassVisitor
    at org.eclipse.jetty.annotations.AnnotationConfiguration.configure(AnnotationConfiguration.java:52)
    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:975)
    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:586)
    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:349)
    at org.mortbay.jetty.plugin.JettyWebAppContext.doStart(JettyWebAppContext.java:102)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:165)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:162)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
    at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:165)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
    at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:92)
    at org.eclipse.jetty.server.Server.doStart(Server.java:228)
    at org.mortbay.jetty.plugin.JettyServer.doStart(JettyServer.java:69)
    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:55)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.startJetty(AbstractJettyMojo.java:433)
    at org.mortbay.jetty.plugin.AbstractJettyMojo.execute(AbstractJettyMojo.java:377)
    at org.mortbay.jetty.plugin.JettyRunMojo.execute(JettyRunMojo.java:546)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
2012-07-10 13:35:25.948:INFO::Started SelectChannelConnector@0.0.0.0:8080
[INFO] Started Jetty Server
[INFO] Starting scanner at interval of 10 seconds. 
```

我队友的系统可以正常运行，而且我们的设置、存储库基本相同，而且我们都使用 Maven2。

关于为什么会发生错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:39:40.770

好吧，你似乎需要`asm`图书馆。这`java.lang.NoClassDefFoundError`意味着您的类路径中根本没有`org.objectweb.asm.ClassVisitor`该类。我不知道您使用的是哪个版本的 Jetty 插件，（如果您粘贴您的`pom.xml`），我可以更准确。

基本上，您需要以下依赖项之一：

在你的项目中添加这个`<dependencies/>`：

```
 <dependency>
    <groupId>asm</groupId>
    <artifactId>asm</artifactId>
    <version>3.3.1</version>
 </dependency> 
```

或者将其添加为`<dependency>`您的 Jetty 插件：

```
<dependency>
   <groupId>org.mortbay.jetty</groupId>
   <artifactId>jetty-runner</artifactId>
   <version>8.1.0.RC4</version>
</dependency> 
```

（显然，此依赖项包含 ASM 类）。

将来，为了解决 noclassdef-s，我建议您通过以下站点查找该类所属的依赖项：

*   [http://www.mvnrepository.net/](http://www.mvnrepository.net/)

*   [http://www.jarvana.com/](http://www.jarvana.com/)

*   [http://search.maven.org/](http://search.maven.org/)（使用“高级搜索”）

*   [http://www.findjar.com/](http://www.findjar.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T19:05:05.420

如果它适用于您的同事但不适用于您，则可能是由于您计算机上的本地存储库损坏。尝试重命名或删除本地存储库目录以强制 Maven 再次下载您的插件和依赖项。

# mysql - MySql 连接在表为空时返回 null

> ID：11407230
> 
> 赞同：-3
> 
> 时间：2012-07-10T05:40:49.223
> 
> 标签：mysql, sql

我有 2 张桌子：`A`和`B`. 我想要一个查询，如果两个表中的任何一个都满足任何值，它将返回结果。我尝试使用连接，但是`null`当第二个表为空时它返回，反之亦然。

**表 A**

```
 emp_no emp_add  data
    12      go      nice 
```

**表 B**

```
 emp_no emp_add id 
    12      go      1 
```

**所需输出**

```
 data   id
    nice   1 
```

相似地

**表 A**

```
 emp_no emp_add  data
    12      go      nice 
```

**表 B**

```
 emp_no emp_add id 
```

**所需输出**

```
 data  id
    nice

SELECT A.data, B.id 
FROM   A left join B ON A.emp_no = B.emp_no 
WHERE  A.data='nice' 
AND    a.id='1' ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:44:00.233

在接受空值的表上使用左连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:45:40.443

尝试这个：：

```
Select ifnull(a.data,'') as data, ifnull(b.id,'') as id  from tableA a left join tableB b on (a.emp_no=b.emp_no) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:48:04.467

正如您所说，反之亦然，最好在您的情况下使用[外部联接](http://msdn.microsoft.com/en-us/library/ms187518%28v=sql.105%29.aspx)：

```
 Select tblA.data,tblB.id from tableA tblA FULL OUTER JOIN tableB tblB on tblA.emp_no=tblB.emp_no 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T05:55:45.340

```
select tableA.data, tableB.id from tableA, tableB 
```

# perl - 在 Cygwin 下使用 Perl Win32::OLE 读取 .xls 文件时出现问题

> ID：11407231
> 
> 赞同：3
> 
> 时间：2012-07-10T05:40:49.513
> 
> 标签：perl, excel, cygwin, win32ole

我已经为此奋斗了两天，我找不到解决方案，我感到很沮丧。在 Cygwin 下使用下面的代码时，我收到此错误

**“Microsoft Office Excel”中的 OLE 异常：Excel 无法访问“Empty.xls”。
该文档可以是只读的或加密的。Win32::OLE(0.1703) 错误 0x800a03ec 在 m:/In/make_excel.pl 第 24 行的 METHOD/PROPERTYGET“打开”**

问题是在 DOS 提示下它运行良好。该文件当然不是只读的。我猜文件格式解释存在一些问题。有什么提示吗？将不胜感激。

```
#!/usr/bin/perl
use Win32::OLE;
use Win32::OLE::Variant;
use Win32::OLE::Const 'Microsoft Excel';
$Excel = Win32::OLE->GetActiveObject('Excel.Application') ||
   Win32::OLE->new('Excel.Application');
$Excel->{'Visible'} = 0;        #0 is hidden, 1 is visible
$Excel->{DisplayAlerts}=0;  #0 is hide alerts
# Open File and Worksheet
my $Book = $Excel->Workbooks->Open('C:\Empty.xls'); 
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T20:05:48.080

MS Excel 需要 MS Windows 路径。

问题出在

```
my $seedProject = "$ENV{'HOME'}/Empty.xls"; 
```

使用 '\\' 而不是 '/' ：Excel 仅适用于 Windows 路径。还要检查 $ENV{HOME} 中的路径分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:39:39.553

在 Cygwin 中工作时，保持常规 Windows 世界和它的 Cygwin 角落的绝缘非常重要。完全有可能您实际上没有`Win32::OLE`安装 Cygwin，并且以某种方式将 ActiveState 的 lib 目录添加到`@INC`Cygwin 的目录中`perl`（通过环境设置或其他方式）。这主要适用于纯 Perl 模块，但任何使用 XS 的东西都会搞砸。

通过`Win32::OLE`在 Cygwin 中安装，您可能将它放在`@INC`ActiveState 的 lib 目录之前，因此允许 Cygwin`perl`找到正确的模块。但是，您应该运行类似：

```
$ perl -e '打印“@INC\n”'
```

在 Cygwin 提示符下确保其中仅出现 Cygwin 路径。

此外，您可能希望通过 安装 Cygwin 的`perl-libwin32`包`setup.exe`，而不是手动构建模块。

# objective-c - 将 NSMenuItems 添加到其他 Apications 的菜单

> ID：11407234
> 
> 赞同：0
> 
> 时间：2012-07-10T05:41:41.973
> 
> 标签：objective-c, macos, cocoa

我使用了一个名为 Afloat 的应用程序，它在每个使用窗口的应用程序的“窗口”菜单中添加了一些按钮。它添加了 Afloat 图标和“保持 Afloat”等选项，即使用户单击不同的窗口，它也会将活动窗口保留为最靠前的窗口。我想将一个项目添加到“编辑”菜单和文本编辑器上的所有上下文菜单中。我在文档中找不到如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:19:42.230

苹果引用：

> 为[`CFPlugIn`](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFPlugInRef/Reference/reference.html)应用程序扩展提供标准架构。上下文菜单插件`CFPlugIn`捆绑安装在`Library/Contextual Menu Items`系统适当级别的目录中，使应用程序和其他形式的软件能够扩展在上下文菜单（例如 Finder 的）上找到的命令列表。

或者，您可以使用[服务](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/SysServices/introduction.html)与其他应用程序集成。

# yii - 在 CGridView 列中显示图像

> ID：11407236
> 
> 赞同：1
> 
> 时间：2012-07-10T05:41:43.323
> 
> 标签：yii, yii-components

这是我的代码

```
$img= Yii::app()->params['questionImageUploadURL'].$model->q_type."/".$model->qImgRel->image_name;
<?php $this->widget('zii.widgets.CDetailView', array(
    'data'=>$model,
    'attributes'=>array(
        'id',
        'q_nationality_id',
        'q_type',
        'q_name',
        array(
            'name'  => 'q_image_id',
            'value' => (is_object($model->qImgRel)?CHtml::image($img,""):""),
            'visible'=>(is_object($model->qImgRel)?true:false),
        ),
        'opt1',
        'opt2',
        'opt3',
        'opt4',
        'answer',
    ),
)); ?> 
```

它像这样显示我 ![在此处输入图像描述](../Images/6f3e00f6f3947e5e2050685e1db5f2b8.png)

我在我的视图中没有得到图像请帮助我提前谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:33:28.733

尝试这个 ：-

```
 array(
            'name'  => 'q_image_id',
            'type'  => 'raw'
            'value' => (is_object($model->qImgRel)?CHtml::image($img,""):""),
        ), 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-08T05:26:08.410

```
<? php

$w="50px";$h="50px";

$this->widget('zii.widgets.grid.CGridView', array(
'id' => 'redcliffe-cms-grid',

    'dataProvider' => $model->search(),

    'filter' => $model,

    'columns' => array(
        'title','date','description',

       array(
            'filter' => '',
            'type' => 'raw',   
            'value' => 'CHtml::image(Yii::app()->baseUrl ."/upload/" .$data>image,"",array(\'width\'=>\'50\', \'height\'=>\'50\'))', 
             ),
        array(
            'class' => 'CButtonColumn',
             ),
    ),
));
? > 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:38:40.990

[http://www.yiiframework.com/doc/api/1.1/CDetailView#attributes-detail](http://www.yiiframework.com/doc/api/1.1/CDetailView#attributes-detail)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:00:27.317

一个简单的

```
 array(        
                 'name'=>'filename',
                 'value'=> CHtml::image(Yii::app()->request->baseUrl.'/path/'.$model->filename),
                 'type'=>'raw',
            ), 
```

会成功的（不要忘记'raw'类型）

# java - 不一致的 BufferedInputStream 读取（字节 []）行为

> ID：11407237
> 
> 赞同：-1
> 
> 时间：2012-07-10T05:41:46.863
> 
> 标签：java, bufferedinputstream

我对 BufferedInputStream.read(byte[]) 的理解是读取操作从 pos 开始，一直读取到字节数组已满或流结束。

我在 BufferedInputStream 上调用下面的 readInt 方法。

```
public class XDRInputStream {

private InputStream stream;

private byte[] buffer4 = new byte[4]; // fixed size buffers
private byte[] buffer8 = new byte[8];

public XDRInputStream(InputStream stream) {
    this.stream = stream;
}

public InputStream getInternalStream() {
    return stream;
}

public int readInt() throws IOException {
    if (stream.read(buffer4) != -1) {
        return ((buffer4[0] & 0xFF) << 24)
             | ((buffer4[1] & 0xFF) << 16)
             | ((buffer4[2] & 0xFF) << 8)
             | ((buffer4[3] & 0xFF));
    } else {
        throw new EOFException("End of stream");
    }
} 
```

当我在 Eclipse 调试器中跟踪执行时，`stream.read(buffer4)`调用（无论起始 pos 值如何）通常会导致 pos 的值设置为 4，读取的 4 个字节是来自输入流的前四个字节。read(byte[]) 调用是否会在某些情况下悄悄地重置流，如果是，什么时候？这似乎是预期的行为（这不是我的代码），当它以这种方式运行时，程序运行良好。

我遇到的问题是，有时，仅在 Windows 上并且仅当输入流包含特定内容时（在这种情况下，由于上游丢弃的套接字导致错误消息），这种 pos 的重置不会在它似乎是预期的情况下发生to，这会导致该方法从流中的错误位置读取并返回错误的值。

我们在 Solaris 上使用相同的代码，虽然我没有在这个平台上进行调试器逐步调试，但在 Solaris 下，程序运行良好，并且我试图修复的错误不会发生。我不知道的流是否存在一些特定于平台的问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:47:15.247

根据经验，您不能依赖一次性从流中读取整个数组。如果您查看[文档](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)，您会看到返回的`read(byte[])`是读取的字节数，可能是整个数组长度或更短。如果还没有数据，甚至为 0。并且读取少于整个数组是非常典型的（并且可能取决于操作系统）。

所以你必须确保你实际读取了 4 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:57:23.303

> 我对 BufferedInputStream.read(byte[]) 的理解是读取操作从 pos 开始，一直读取到字节数组已满或流结束。

你的理解是不正确的。

您的理解与 Javadoc 完全相反，它说它会在必要时阻塞，直到至少一个字节可用，读取可用的任何内容，并返回读取的字节数的计数，或者如果读取的是 EOS，则返回 -1。

# iphone - 如何设计带有 tableview 内容的可扩展视图？

> ID：11407242
> 
> 赞同：0
> 
> 时间：2012-07-10T05:42:18.570
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个希望实现此功能的客户：http: [//i.imgur.com/hWxfg.png](http://i.imgur.com/hWxfg.png)

X 可扩展视图，每个视图都有一个带有 Y 单元格的可滚动表格视图。主视图不可滚动。如果我点击抽屉 C，则抽屉 A 应折叠，抽屉 C 应展开。

我见过类似的结构，但里面没有表格视图，所以我不知道如何解决这个问题。

最好的方法是什么？

1) 带有“内部”表视图的表视图

2) 带有按钮和表格视图的多个海关视图

3) 其他的？

你将如何实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:02:44.037

我已经完成了这种类型的实现，但没有随身携带源代码..我仍然可以指导您按照我的方式进行操作...我将按照我的方式向您解释并考虑您的示例图像。

1.  你需要 3 个带有 3 个布尔标志的按钮（给它们 diff 标签）来处理它们的开关状态。
2.  你需要3个tableview（给他们不同的标签）
3.  如果屏幕高度为 480 且所有按钮高度为 20，则剩余高度将为 480-3*20=420。所以这是所有表格视图的高度。
4.  在任何按钮的点击事件上，根据点击的按钮标签找到其关联的表格视图。
5.  在按钮单击时设置标志值并使用布尔标志值决定显示和隐藏表格视图以及按钮上的开/关图像。

# hibernate - 用于复杂表链接的 Hibernate 注释

> ID：11407245
> 
> 赞同：0
> 
> 时间：2012-07-10T05:42:23.600
> 
> 标签：hibernate, hibernate-annotations

我在几个文件之间有以下链接。这是我创建的模型

```
PatMaster (the main object)
  private PatWorkflows patWorkflows;
  private PatActions patActions;
  private PatNextWorkflowStep patNextWorkflowStep;
...

PatWorkflows (workflow chosen for a PatMaster record)
  String patWorkflowID 
...

PatActions (current action associated with a PatMaster record)
  String patActionID 
...

PatNextWorkflowStep (next actions possible based on the workflow chosen and the current action of a PatMaster record)
  String patWorkflowID
  String patActionID
... 
```

我不知道注释会是什么样子。希望有人可以分享他们在这方面的专业知识。先感谢您！

# android - Android：Edittext 充当搜索引擎

> ID：11407247
> 
> 赞同：0
> 
> 时间：2012-07-10T05:42:38.950
> 
> 标签：android, android-edittext, search-engine

有没有办法让我的应用程序中的 Edittext 充当像 google 或 yahoo 这样的搜索引擎？有什么教程可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:01:41.587

我认为您可以使用[SearchView](http://developer.android.com/reference/android/widget/SearchView.html)，以达到您的目的

另请参阅此链接[创建搜索界面](http://developer.android.com/guide/topics/search/search-dialog.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:46:15.113

你想达到什么目的？，但你可以直接从edittext获取文本并使用google api搜索该文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:46:59.590

您可以按照 [本教程](http://rakhi577.wordpress.com/2012/06/26/buttons-on-list-view-with-easy-searching-in-android/) 在这里如果您自动搜索名称，则匹配项会像**Google一样突出显示**

# asp.net-mvc-3 - 如何使用 MVC3、C# 在 Facebook 墙上上传图片？

> ID：11407248
> 
> 赞同：0
> 
> 时间：2012-07-10T05:42:47.227
> 
> 标签：asp.net-mvc-3

我正在尝试使用 MVC3 C# 将照片上传到 Facebook。代码运行成功，但照片没有上传到 Facebook。我正在添加 ID 和 App Secret。我尝试了很多方法，并且努力了很多天，但结果是零。这是我的控制器的代码

[HttpPost][HttpGet]

```
public ActionResult Profile(HttpPostedFileBase file, FacebookOAuthResult facebookOAuthResult) {
  dynamic args = new ExpandoObject();
  args = new Dictionary<string, object>();
  args["message"] = "hi";
  args["picture"] = "http://apps.facebook.com/Uploads/photos";
  string accesstoken=FacebookWebContext.Current.AccessToken;
  FacebookClient fbApp = new FacebookClient(accesstoken);
  try {
    fbApp.Post("MYAPPID" + "/Photos", args);
  } catch (FacebookOAuthException ex) {
            //
  }
  // Verify that the user selected a file
  if (file != null && file.ContentLength > 0) {
    var path1 = Path.Combine(Server.MapPath("~/Content/uppoads"), file.FileName);
    //file.SaveAs(path1);
    fbApp.Post("MYAPPID" + "/photos", path1);
  }
  // redirect back to the index action to show the form once again
  return RedirectToAction("Profile");
} 
```

谁能帮我找到解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:57:40.703

你正在将照片的本地路径发布到 Facebook，FB 不知道它是什么。
您应该将照片以二进制形式发布在帖子正文中。

```
var media = new Facebook.FacebookMediaObject();
var filebytes  = System.IO.File.ReadAllBytes(path1);
media.SetValue(filebytes);
fbApp.Post("248050331932489" + "/photos", media); 
```

# c - 直接映射缓存的 C 缓存优化

> ID：11407251
> 
> 赞同：10
> 
> 时间：2012-07-10T05:42:53.557
> 
> 标签：c, performance, caching, optimization, memory

在确定以下两个代码片段的命中率和未命中率时遇到了一些麻烦。

给定信息：我们有一个 1024 字节的直接映射缓存，块大小为 16 字节。这样就产生了 64 行（在这种情况下为集合）。假设缓存开始为空。考虑以下代码：

```
struct pos {
    int x;
    int y;
};

struct pos grid[16][16];
int total_x = 0; int total_y = 0;

void function1() {
    int i, j;
    for (i = 0; i < 16; i++) {
         for (j = 0; j < 16; j++) {
             total_x += grid[j][i].x;
             total_y += grid[j][i].y;
         }
    }
}

void function2() {
    int i, j;
    for (i = 0; i < 16; i++) {
         for (j = 0; j < 16; j++) {
             total_x += grid[i][j].x;
             total_y += grid[i][j].y;
         }
    }
} 
```

我可以从一些基本规则（即 C 数组是行优先顺序）中看出 function2 应该更好。但我不明白如何计算命中/未命中百分比。显然 function1() 错过了 50% 的时间，而 function2() 只错过了 25% 的时间。

有人可以告诉我这些计算是如何工作的吗？我真正能看到的是，一次不会超过一半的网格可以放入缓存中。此外，这个概念是否易于扩展到 k 路关联缓存？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T12:13:59.133

**数据如何存储在内存中**
每个结构`pos`的大小为 8 Bytes，因此总大小`pos[16][16]`为 2048 Bytes。并且数组的顺序如下：
`pos[0][0]` `pos[0][1]` `pos[0][2]`………………………………`pos[0][15]` `pos[1]0[]``pos[1][15]``pos[15][0]``pos[15][15]`

**缓存组织对比数据**
对于缓存，每个块为 16 Bytes，与数组的两个元素大小相同。整个缓存为 1024 字节，是整个数组大小的一半。由于缓存是直接映射的，这意味着如果我们将缓存块标记为 0 到 63，我们可以放心地假设映射应该如下所示
------------ memory------ ----------------------缓存
`pos[0][0]` `pos[0][1]` -----------> `block 0`
`pos[0][2]` `pos[0][3]` -----------> `block 1`
`pos[0][4]` `pos[0][5]` --- --------> `block 2`
`pos[0][14]` `pos[0][15]` --------> `block 7`
.......
`pos[1][0]` `pos[1][1]` -----------> `block 8`
`pos[1][2]` `pos[1][3]` -----------> `block 9`
。 ......
`pos[7][14]` `pos[7][15]` --------> `block 63`
`pos[8][0]` `pos[8][1]` -----------> `block 0`
.......
`pos[15][14]` `pos[15][15]` -----> `block 63`

**如何`function1`操作内存**
循环遵循按列的内部循环，这意味着第一次迭代加载`pos[0][0]`和`pos[0][1]`缓存`block 0`，第二次迭代加载`pos[1][0]`和`pos[1][1]`缓存`block 8`。缓存是**冷**的，所以第一列`x`总是未**命中**，而`y`总是命中。第二列数据应该在第一列访问期间全部加载到缓存中，但事实**并非**如此。由于`pos[8][0]`access 已经驱逐了前一个`pos[0][0]`页面（它们都映射到`block 0`！）。依此类推，未命中率为 50%。

**如何`function2`操作内存**
第二个函数有很好的**stride-1**访问模式。这意味着当`pos[0][0].x` `pos[0][0].y` `pos[0][1].x` `pos[0][1].y`仅访问第一个时由于冷缓存而未命中。下面的模式都是一样的。所以失误率只有25%。

K路关联缓存遵循相同的分析，尽管这可能更乏味。为了充分利用缓存系统，请尝试启动一个良好的访问模式，例如`stride-1`，并在每次从内存加载期间尽可能多地使用数据。现实世界的 cpu 微架构采用其他智能设计和算法来提高效率。最好的方法总是在现实世界中测量时间，转储核心代码，并进行彻底的分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:37:57.807

好的，我的计算机科学课程离我有点远，但我想我明白了（当你考虑它时，这实际上是一个非常简单的例子）。

您的结构是 8 字节长 (2 x 4)。由于您的缓存块是 16 字节，因此内存访问`grid[i][j]`将准确获取两个结构条目（`grid[i][j]`和`grid[i][j+1]`）。因此，如果您循环遍历第二个索引，则只有每 4 次访问才会导致内存读取。如果您遍历第一个索引，您可能会丢弃已提取的第二个条目，这取决于内部循环中的提取次数与整体缓存大小。

现在我们还必须考虑缓存大小：您说您有 64 行直接映射。在函数 1 中，一个内部循环是 16 次获取。这意味着，第 17 次获取到 grid[j][i+1]。这实际上应该是一个命中，因为自上次内部循环遍历以来它应该一直保存在缓存中。因此，每隔一个内循环应该只包含命中。

好吧，如果我的推理是正确的，那么已经给你的答案应该是错误的。这两个函数都应该以 25% 的未命中率执行。也许有人会找到更好的答案，但如果你理解我的推理，我会问 TA。

**编辑：**再想一想，我们应该首先定义什么才是真正的未命中/命中。当你看

```
total_x += grid[j][i].x;
total_y += grid[j][i].y; 
```

这些是定义为两个内存访问还是一个？具有优化设置的体面编译器应将其优化为

```
pos temp = grid[j][i];
total_x += temp.x;
total_y += temp.y; 
```

这可以算作一次内存访问。因此，我建议所有 CS 问题的通用答案：“视情况而定”。

# excel - Excel 宏生成的文件副本保留指向原始文件的链接

> ID：11407257
> 
> 赞同：2
> 
> 时间：2012-07-10T05:43:30.647
> 
> 标签：excel, vba, save, pivot-table

我有非常大的文件中的全球销售数据，我需要按国家和产品过滤然后分析。由于我需要使用不同的国家/产品组合一遍又一遍地执行相同的分析，因此我尝试使用宏来执行此操作。

这就是宏的作用：

1.  使用全局数据打开源文件；
2.  过滤数据；
3.  将其复制并粘贴到包含宏的工作簿中；
4.  重新计算和刷新工作簿；
5.  将文件的副本保存到另一个文件夹。

宏似乎运行良好并且文件正在保存，但是我在第 4 步和第 5 步遇到了 2 个问题：

*   数据透视表似乎并不令人耳目一新——这可能是因为第二个问题：
*   已保存副本中的所有数据透视表仍引用原始文件

我更愿意通过生成没有链接的复制文件来解决这两个问题，但我也愿意接受任何可能允许我强制复制的文件链接到自身的创可贴（当我这样做时这似乎不起作用手动）。

如果您想查看全部代码，我有完整的代码，但是因为我怀疑问题在于我如何保存文件，所以我将把那一段粘贴到这里。如果您需要查看宏的另一部分，请告诉我。任何帮助将不胜感激，在此先感谢。

保存功能：

```
Public Sub SaveAsCopy(filePath As String)
   Dim updateStatus As Boolean

   'Check current status of Alerts
   updateStatus = Application.DisplayAlerts
   'Turn off alerts
   Application.DisplayAlerts = False

   ThisWorkbook.Sheets.Copy 'creates new workbook without macros"
   'The New workbook copy is now the Active workbook
   'Delete Control Sheet
   ActiveWorkbook.Sheets(1).Delete

   'Save Macro free version and close
   ActiveWorkbook.SaveAs Filename:=filePath, FileFormat:=51
   ActiveWorkbook.Close

   'Revert back to origional alert status
   Application.DisplayAlerts = updateStatus

End Sub 
```

函数调用：

```
Call SaveAsCopy(filePath) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T23:52:31.243

将分享我开发的解决方法，因为我对更优雅的解决方案没有任何了解：

```
Public Sub SaveAsCopy(filePath As String)
   Dim updateStatus As Boolean

   'Check current status of Alerts
   updateStatus = Application.DisplayAlerts
   'Turn off alerts
   Application.DisplayAlerts = False

   'Hide Control Sheet
   ActiveWorkbook.Sheets(1).Visible = False

   'Save Macro free version and close
   ActiveWorkbook.SaveAs Filename:=filePath, FileFormat:=52

   'Unhide
   ActiveWorkbook.Sheets(1).Visible = True

   'Revert back to original alert status
   Application.DisplayAlerts = updateStatus

End Sub 
```

在父函数结束时，我关闭当前文件，重新打开原始文件，然后循环浏览新工作簿以删除宏。

# java - 是否可以在子模块中“扩展”配置文件？

> ID：11407259
> 
> 赞同：12
> 
> 时间：2012-07-10T05:43:41.353
> 
> 标签：java, maven

假设我有一个父 pom A，配置文件 win32 和 win64 由操作系统激活：

```
<profile>
    <id>windows32</id>
    <activation>
        <os>
            <family>windows</family>
            <arch>x86</arch>
        </os>
    </activation>
    <properties>
        <envClassifier>win-x32</envClassifier>
    </properties>
</profile>
<profile>
    <id>windows64</id>
    <activation>
        <os>
            <family>windows</family>
            <arch>amd64</arch>
        </os>
    </activation>
    <properties>
        <envClassifier>win-x64</envClassifier>
    </properties>
</profile> 
```

这些配置文件定义了环境。${envClassifier} 等变量表示父模块有一个子模块 B，它想在 win64 上定义一些额外的东西：

```
<profile>
    <id>windows64</id>
    <properties>
        <jreName>jre6u27.zip</jreName>
    </properties>
</profile> 
```

我可以以某种方式从父级扩展 win64 配置文件，还是我注定要复制并粘贴它以及它的激活部分和所有内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T07:02:58.943

我刚刚使用[mvn help:effective-pom](http://maven.apache.org/plugins/maven-help-plugin/effective-pom-mojo.html)检查了这个案例。

如果您`<activation>`以与父配置文件相同的方式为子配置文件指定部分，则这两个配置文件的属性将被合并。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T12:56:33.577

显然它根本不可能。我在这里找到了一个很好的解释 - [http://www.dashbay.com/2011/03/maven-profile-inheritance/](http://www.dashbay.com/2011/03/maven-profile-inheritance/)

# vb.net - Visual Basic 内存信息

> ID：11407264
> 
> 赞同：2
> 
> 时间：2012-07-10T05:44:18.097
> 
> 标签：vb.net, memory, hardware

Visual Basic 中是否有任何方法可以显示任何有关内存的信息（如下面的链接中所示）？

模块名称、序列号、模块类型、内存速度、时序等？

![http://s13.postimage.org/q9vl8wsud/mem.jpg](../Images/b7e3c312630fa67c206ad8909bb4f2ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:51:12.577

我相信您要问的是如何使用 VB 检索有关硬件组件（即主存储器）的信息。

有关访问硬件信息的一些示例，请参阅VB 论坛上的[此线程。](http://www.vbforums.com/showthread.php?t=508069)

[您可能也对此](http://www.vbforums.com/showthread.php?t=303113)更感兴趣，因为它似乎更能满足您的需求。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:58:29.123

正如 Damien_The_Unbeliever 所说，您最好的选择是查看[`Win32_PhysicalMemory WMI Class`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394347.aspx). [您可以通过从 Microsoft](http://www.microsoft.com/en-us/download/details.aspx?id=8572)下载 WMI Code Creator 来试验 WMI ，它将生成 C#、VB.Net 和 VB 脚本中的代码，您可以通过程序运行这些代码并查看结果。

# struts2 - struts 2中的bean属性和modelDriven

> ID：11407265
> 
> 赞同：0
> 
> 时间：2012-07-10T05:44:26.797
> 
> 标签：struts2

我是 struts 2 的新手。我创建了一个操作类，它使用`ModelDriven`接口将 JSP 页面中的数据插入到 bean 中。

问题是我有一些非“字符串`properties in the bean like`长`,`日期”......等问题是：当我在 jsp 页面中按下提交按钮时，我收到一个错误，说它没有找到该特定属性的字符串设置器。例如，如果我的 bean 中有

 `````
 package com.hsms.aseza.enteringApproval

   Class EnteringApproval

       private Date approvalDate

      Date getApprovalDate()
      {
         return employeeId;
      }

     void setApprovalDate(Date employeeId)
     {
         this.employeeId = employeeId;
     } 
````  `当执行模型驱动的动作类时，它会触发运行时异常

```
 java.lang.NoSuchMethodException:  com.hsms.aseza.enteringApproval.EnteringApproval.setApprovalDate([Ljava.lang.String;) 
```

`Date`有没有办法在不为我的属性编写字符串设置器的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:10:54.713

1.  确保你已经在你的动作类中初始化了你的 bean

    ```
    Private YourBean bean = new YourBean(); 
    ```

    或者你可以在构造函数中拥有它

2.  确保你的 getter 和 setter 是公开的

3.  如果您尝试`date`在 jsp 页面上键入，请使用`datepicker`eg`sx:datetimepicker`或`sj:datepicker`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:17:40.797

尝试[`s:date`](http://struts.apache.org/2.0.11/docs/date.html)在你的jsp中使用标签。

编辑：

尝试使用：

```
<s:textfield key="objEnteringApproval.approvalDate"></s:textfield> 
```

其中 objEnteringApproval 是控制器中的公共可访问变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:45:43.490

我认为您的问题是转换，即从字符串到`java.util.Date`对象的转换。这个[类](http://struts.apache.org/2.0.14/struts2-core/apidocs/org/apache/struts2/util/StrutsTypeConverter.html)扩展[了这个](http://www.opensymphony.com/ognl/api/ognl/DefaultTypeConverter.html)类，它负责从 String 转换为其他类型，如 Long、Double 等。如果您检查[DefaultTypeConverter](http://www.opensymphony.com/ognl/api/ognl/DefaultTypeConverter.html)`java.util.Date`的源代码，您将看不到任何一个or的任何转换`java.sql.Date`。所以我认为你应该做的是为`approvalDate`. 我[之前](https://stackoverflow.com/questions/11304255/how-to-get-foreign-keys-using-hibernate-annotations-struts-2-and-jsp/11308703#11308703)关于此的帖子将指导您完成该过程，您所需要的只是编辑代码以满足您的需求。

在您的 jsp 上，按照[这个 datepicker](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)示例使用相同的格式，即日期格式，用于在您的 jsp 中使用[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)显示您的日期，以在转换器的`convertFromString`方法中进行转换并返回转换后的`java.util.Date`or `java.sql.Date`。

如果您在执行此操作时遇到问题，请告诉我。``

# java - 如何在基本购物车应用程序的 JSP 页面中实现添加到购物车选项？

> ID：11407266
> 
> 赞同：0
> 
> 时间：2012-07-10T05:44:29.910
> 
> 标签：java, jsp, jstl, springsource

我正在做一个基本的`Shopping Cart`任务`Springs`。分配的功能只是显示一组给定的产品 - 带有信息（带有添加到购物车按钮）。我的问题是，`Add button click`与页面中的购物车显示集成`JSP`。

如何使用应用程序会话在多次“ `Add`”按钮单击中获取和保留信息？

这是代码片段：

```
<script type="text/javascript"> 
var noOfClicks = 0; // Used to count the number of Clicks. 
function button_click() { 
  noOfClicks++; // On click of the button the value is incremented.        
  document.getElementById("item").value = noOfClicks; 
} 
</script> 
```

如何检查按钮是否被单击并将其添加到购物车及其属性（数量、价格等）在单独的汇总表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:03:19.287

您可以将会话范围的 spring bean 用于购物车。这意味着该 bean 是在创建新的 HttpSession 时创建的，并且只要 HttpSession 有效，就会保留该 bean。Spring 使用 AOP 从 httprequest 中提取 sessionId 并管理 bean 的生命周期。

[http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html#beans-factory-scopes-global-session](http://static.springsource.org/spring/docs/3.0.0.M3/spring-framework-reference/html/ch04s04.html#beans-factory-scopes-global-session)

[示例] [http://web.archive.org/web/20080828160606/http://www.memestorm.com/blog/session-scoped-beans-in-spring-20/](http://web.archive.org/web/20080828160606/http://www.memestorm.com/blog/session-scoped-beans-in-spring-20/)

在“添加”活动的操作类中，访问会话对象并将所选项目添加到会话购物车对象中。

# c# - Web API 控制器中的多个 HttpPost 方法

> ID：11407267
> 
> 赞同：132
> 
> 时间：2012-07-10T05:44:35.317
> 
> 标签：c#, asp.net-web-api, global-asax, asp.net-web-api-routing

我开始使用 MVC4 Web API 项目，我有多种`HttpPost`方法的控制器。控制器如下所示：

**控制器**

```
public class VTRoutingController : ApiController
{
    [HttpPost]
    public MyResult Route(MyRequestTemplate routingRequestTemplate)
    {
        return null;
    }

    [HttpPost]
    public MyResult TSPRoute(MyRequestTemplate routingRequestTemplate)
    {
        return null;
    }
} 
```

*这里`MyRequestTemplate`表示负责处理来自请求的 Json 的模板类。*

**错误：**

当我使用 Fiddler 发出请求时，`http://localhost:52370/api/VTRouting/TSPRoute`或者`http://localhost:52370/api/VTRouting/Route` 出现错误：

> 找到多个与请求匹配的操作

如果我删除上述方法之一，它可以正常工作。

**全球.asax**

我已尝试修改 中的默认路由表`global.asax`，但仍然出现错误，我认为我在 global.asax 中定义路由时遇到问题。这是我在 global.asax 中所做的。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapHttpRoute(
        name: "MyTSPRoute",
        routeTemplate: "api/VTRouting/TSPRoute",
        defaults: new { }
    );

    routes.MapHttpRoute(
        name: "MyRoute",
        routeTemplate: "api/VTRouting/Route",
        defaults: new { action="Route" }
    );
} 
```

我正在使用 POST 在 Fiddler 中发出请求，在 RequestBody 中为 MyRequestTemplate 传递 json。

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-10-03T07:02:54.550

您可以在单个控制器中执行多个操作。

为此，您必须做以下两件事。

*   `ActionName`首先用属性装饰动作

    ```
     [ActionName("route")]
     public class VTRoutingController : ApiController
     {
       [ActionName("route")]
       public MyResult PostRoute(MyRequestTemplate routingRequestTemplate)
       {
         return null;
       }

      [ActionName("tspRoute")]
      public MyResult PostTSPRoute(MyRequestTemplate routingRequestTemplate)
      {
         return null;
      }
    } 
    ```

*   `WebApiConfig`其次在文件中定义以下路线。

    ```
    // Controller Only
    // To handle routes like `/api/VTRouting`
    config.Routes.MapHttpRoute(
        name: "ControllerOnly",
        routeTemplate: "api/{controller}"               
    );

    // Controller with ID
    // To handle routes like `/api/VTRouting/1`
    config.Routes.MapHttpRoute(
        name: "ControllerAndId",
        routeTemplate: "api/{controller}/{id}",
        defaults: null,
        constraints: new { id = @"^\d+$" } // Only integers 
    );

    // Controllers with Actions
    // To handle routes like `/api/VTRouting/route`
    config.Routes.MapHttpRoute(
        name: "ControllerAndAction",
        routeTemplate: "api/{controller}/{action}"
    ); 
    ```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2015-11-26T23:43:56.917

您的问题的另一个解决方案是使用`Route`它允许您通过注释指定方法上的路由：

```
[RoutePrefix("api/VTRouting")]
public class VTRoutingController : ApiController
{
    [HttpPost]
    [Route("Route")]
    public MyResult Route(MyRequestTemplate routingRequestTemplate)
    {
        return null;
    }

    [HttpPost]
    [Route("TSPRoute")]
    public MyResult TSPRoute(MyRequestTemplate routingRequestTemplate)
    {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-07-10T07:02:52.423

采用：

```
routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "api/{controller}/{action}/{id}",
    defaults: new { id = RouteParameter.Optional }
); 
```

它不再是一种 RESTful 方法，但您现在可以按名称调用您的操作（而不是让 Web API 根据动词自动为您确定一个），如下所示：

```
[POST] /api/VTRouting/TSPRoute

[POST] /api/VTRouting/Route 
```

与流行的看法相反，这种方法没有任何问题，也没有滥用 Web API。您仍然可以利用 Web API 的所有出色功能（委托处理程序、内容协商、媒体类型格式化程序等）——您只需放弃 RESTful 方法。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-07-10T07:27:11.703

Web api 端点（控制器）是接受 get/post/put/delete 动词的单一资源。它**不是**一个普通的 MVC 控制器。

必然地，`/api/VTRouting`只有**一个**HttpPost 方法可以接受您发送的参数。函数名*无所谓*，只要你用 [http] 东西装饰就行。不过，我从未尝试过。

**编辑：** 这不起作用。在解决过程中，它似乎取决于参数的数量，而不是试图将模型绑定到类型。

*您可以重载函数以接受不同的参数。我敢肯定，如果您按照自己的方式声明它，但对方法使用不同的（不兼容的）参数，您会没事的。如果参数相同，那么您很不走运，因为模型绑定不会知道您的意思。*

```
[HttpPost]
public MyResult Route(MyRequestTemplate routingRequestTemplate) {...}

[HttpPost]
public MyResult TSPRoute(MyOtherTemplate routingRequestTemplate) {...} 
```

**这部分有效**

他们在您创建新模板时提供的默认模板使这一点非常明确，我想说您应该坚持这个约定：

```
public class ValuesController : ApiController
{
    // GET is overloaded here.  one method takes a param, the other not.
    // GET api/values  
    public IEnumerable<string> Get() { .. return new string[] ... }
    // GET api/values/5
    public string Get(int id) { return "hi there"; }

    // POST api/values (OVERLOADED)
    public void Post(string value) { ... }
    public void Post(string value, string anotherValue) { ... }
    // PUT api/values/5
    public void Put(int id, string value) {}
    // DELETE api/values/5
    public void Delete(int id) {}
} 
```

如果你想创建一个做很多事情的类，对于 ajax 的使用，没有理由不使用标准的控制器/动作模式。唯一真正的区别是您的方法签名不那么漂亮，并且您必须在`Json( returnValue)`返回它们之前将它们包装起来。

**编辑：**

在使用简单类型时使用标准模板（编辑为包含）时，重载工作得很好。我也用另一种方式进行了测试，使用了 2 个具有不同签名的自定义对象。永远无法让它工作。

*   与复杂对象的绑定看起来并不“深”，所以这是不行的
*   您可以通过在查询字符串上传递一个额外的参数来解决这个问题
*   [比我可以提供](http://www.west-wind.com/weblog/posts/2012/May/08/Passing-multiple-POST-parameters-to-Web-API-Controller-Methods)的可用选项更好的文章

在这种情况下，这对我有用，看看它会带给你什么。仅用于测试的例外。

```
public class NerdyController : ApiController
{
    public void Post(string type, Obj o) { 
        throw new Exception("Type=" + type + ", o.Name=" + o.Name ); 
    }
}

public class Obj {
    public string Name { get; set; }
    public string Age { get; set; }
} 
```

并像这样从控制台调用：

```
$.post("/api/Nerdy?type=white", { 'Name':'Slim', 'Age':'21' } ) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-04-04T05:48:42.330

可以在同一个 Web API 控制器中添加多个 Get 和 Post 方法。这里默认路由是导致问题的原因。Web API 检查从上到下的匹配路由，因此您的默认路由匹配所有请求。根据默认路由，一个控制器中只能使用一种 Get 和 Post 方法。将以下代码放在顶部或注释掉/删除默认路由

```
 config.Routes.MapHttpRoute("API Default", 
                               "api/{controller}/{action}/{id}",
                               new { id = RouteParameter.Optional }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-10T07:30:41.713

将路由前缀 [RoutePrefix("api/Profiles")] 放在控制器级别，并将路由放在操作方法 [Route("LikeProfile")] 中。不需要更改 global.asax 文件中的任何内容

```
namespace KhandalVipra.Controllers
{
    [RoutePrefix("api/Profiles")]
    public class ProfilesController : ApiController
    {
        // POST: api/Profiles/LikeProfile
        [Authorize]
        [HttpPost]
        [Route("LikeProfile")]
        [ResponseType(typeof(List<Like>))]
        public async Task<IHttpActionResult> LikeProfile()
        {
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-07-03T21:55:52.873

您可以使用这种方法：

```
public class VTRoutingController : ApiController
{
    [HttpPost("Route")]
    public MyResult Route(MyRequestTemplate routingRequestTemplate)
    {
        return null;
    }

    [HttpPost("TSPRoute")]
    public MyResult TSPRoute(MyRequestTemplate routingRequestTemplate)
    {
        return null;
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2022-01-11T11:59:56.723

创建另一个 Http 方法时添加`[HttpPost("Description")]`

```
[HttpPost("Method1")]
public DataType Method1(MyRequestTemplate routingRequestTemplate)
{
    return null;
}

[HttpPost("Method2")]
public DataType Method2(MyRequestTemplate routingRequestTemplate){} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-14T11:50:39.200

我想这个问题已经得到了回答。我还在寻找具有相同签名方法但名称不同的 webApi 控制器。我试图将计算器实现为 WebApi。计算器有 4 个签名相同但名称不同的方法。

```
public class CalculatorController : ApiController
{
    [HttpGet]
    [ActionName("Add")]
    public string Add(int num1 = 1, int num2 = 1, int timeDelay = 1)
    {
        Thread.Sleep(1000 * timeDelay);
        return string.Format("Add = {0}", num1 + num2);
    }

    [HttpGet]
    [ActionName("Sub")]
    public string Sub(int num1 = 1, int num2 = 1, int timeDelay = 1)
    {
        Thread.Sleep(1000 * timeDelay);
        return string.Format("Subtract result = {0}", num1 - num2);
    }

    [HttpGet]
    [ActionName("Mul")]
    public string Mul(int num1 = 1, int num2 = 1, int timeDelay = 1)
    {
        Thread.Sleep(1000 * timeDelay);
        return string.Format("Multiplication result = {0}", num1 * num2);
    }

    [HttpGet]
    [ActionName("Div")]
    public string Div(int num1 = 1, int num2 = 1, int timeDelay = 1)
    {
        Thread.Sleep(1000 * timeDelay);
        return string.Format("Division result = {0}", num1 / num2);
    }
} 
```

并且在您已经拥有的 WebApiConfig 文件中

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }); 
```

只需在 IIS 上设置身份验证/授权即可！

希望这可以帮助！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-13T19:12:19.780

我在这个主题上看到的最好和最简单的解释 - [http://www.binaryintellect.net/articles/9db02aa1-c193-421e-94d0-926e440ed297.aspx](http://www.binaryintellect.net/articles/9db02aa1-c193-421e-94d0-926e440ed297.aspx)

*   已编辑 -

我只使用 Route，不需要 RoutePrefix。

例如，在控制器中

```
[HttpPost]
[Route("[action]")]
public IActionResult PostCustomer
([FromBody]CustomerOrder obj)
{
} 
```

和

```
[HttpPost]
[Route("[action]")]
public IActionResult PostCustomerAndOrder
([FromBody]CustomerOrder obj)
{
} 
```

然后，函数名称在 jquery 中作为 -

```
options.url = "/api/customer/PostCustomer"; 
```

或者

```
options.url = "/api/customer/PostCustomerAndOrder"; 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-07-12T11:51:59.243

```
public class Journal : ApiController
{
    public MyResult Get(journal id)
    {
        return null;
    }
}

public class Journal : ApiController
{

    public MyResult Get(journal id, publication id)
    {
        return null;
    }
} 
```

我不确定重载 get/post 方法是否违反了 restfull api 的概念，但它确实有效。如果有人能在这件事上有所启发。如果我有一个 uri 怎么办

```
uri:/api/journal/journalid
uri:/api/journal/journalid/publicationid 
```

因此，您可能会看到我的日志类型是聚合根，尽管我可以单独定义另一个控制器用于发布，并在我的 url 中传递发布的 id 编号，但这更有意义。因为如果没有期刊本身，我的出版物就不会存在。

# jquery - Jquery Mobile：复选框功能

> ID：11407268
> 
> 赞同：0
> 
> 时间：2012-07-10T05:44:41.443
> 
> 标签：jquery, mobile

我正在尝试创建一个函数，其中：

用户选中复选框的位置：搜索的项目来自 myLocal Dbase；当复选框未选中时：搜索的项目来自 myNonLocal dbase。

我一直在尝试这样做，但没有 lck，任何可以帮助我的帮助、建议或链接都​​会很棒。谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:52:38.587

您应该使用“翻转切换开关”。 [http://jquerymobile.com/demos/1.1.0/docs/forms/switch/](http://jquerymobile.com/demos/1.1.0/docs/forms/switch/)

```
<label for="flip-a">Select slider:</label>
<select name="slider" id="flip-a" data-role="slider">
    <option value="off">Off</option>
    <option value="on">On</option>
</select> 
```

在您的搜索表单中，您应该确定“滑块”的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:03:50.847

选中/取消选中（1/0）您的复选框时使用javascript设置隐藏字段，然后在服务器端检查此隐藏值，例如

```
if(isset($_POST['myhidden_field']) && $_POST['myhidden_field']==1) 
{
    load local db
}
else
{
    load non local db
} 
```

# javascript - 淘汰赛 JS html 绑定返回奇怪的代码而不是 html 字符串

> ID：11407273
> 
> 赞同：4
> 
> 时间：2012-07-10T05:44:56.717
> 
> 标签：javascript, knockout.js

```
function tournamentViewModel(){
    var self= this;
    self.name = ko.observable();
    self.districts = ko.observableArray([new district('Provo',1),new district('Salt Lake City',2),new district('St. George',3)]);
    self.district = ko.observableArray();
    self.regions = ko.observableArray([new region('Utah',1),new region('Idaho',2)]);
    self.region = ko.observableArray();
    self.location = ko.observable();
    self.date = ko.observable();
    self.startTime = ko.observable();
    self.image = ko.observable();
    self.flyer = ko.computed(function(){return '<h1>'+self.name+'</h1>'+self.image},self);
    self.clearImage = function(){
        self.image(''); 
    }
    self.tournamentID = ko.computed(function(){return 't_'+self.district+'_'+self.region+'_'+self.date}, self);
}; 
```

上面的 knockout.js 视图模型似乎很好，除非我想将某些东西绑定到计算的 observable `flyer`。相反，我看到的只是以下文本：

```
<h1>function c(){if(0<arguments.length){if(!c.equalityComparer||!c.equalityComparer(d,arguments[0]))c.I(),d=arguments[0],c.H();return this}a.U.La(c);return d}</h1>function c(){if(0<arguments.length){if(!c.equalityComparer||!c.equalityComparer(d,arguments[0]))c.I(),d=arguments[0],c.H();return this}a.U.La(c);return d} 
```

我不知道这里发生了什么。下面是我应用它的绑定。我已经尝试过 html 和文本绑定。

```
<span data-bind="text: flyer"></span> 
```

顺便说一句，计算出的 observable`tournamentID`效果很好，语法似乎相同。我认为当我`self.name`在计算的 observable 中使用时会出现问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T05:50:10.953

想想看。你得到了什么？你得到了函数定义。因为你将函数传递给你的`computed`. 你需要传递**值**。你应该使用：

```
self.flyer = ko.computed(function(){
    return '<h1>'+self.name()+'</h1>'+self.image();
}); 
```

因为两者`name`和`image`都是可观察的（从 JavaScript 的角度来看：函数）。

我不确定为什么`tournamentID`对你有用。它不应该。

顺便说一句，如果您使用的是`var self = this;`，那么您可以省略 的第二个参数`computed`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T05:49:41.290

尝试这个

```
<span data-bind="text: flyer()"></span> 
```

# mysql - 使用 VB.NET 通过 SSL 远程访问 MySQL

> ID：11407283
> 
> 赞同：0
> 
> 时间：2012-07-10T05:46:10.847
> 
> 标签：mysql, vb.net, encryption, ssl

有没有办法`MySQL`通过编码来加密连接`VB.NET`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:52:28.193

不，不是“通过 VB.NET 中的编码”。

VB.Net 必须使用 MySQL 通信协议进行通信，该协议不支持直接加密。

但是，您的 VB.NET 代码*可以*与 MySQL 安全地通信。

[MySQL 建议](http://dev.mysql.com/doc/refman/5.5/en/secure-connections.html)使用 SSL 来保护传输层的通信。这与 VB.Net 无关，也与设置 SSL 连接和使用适当的连接字符串（包括`SSL Mode=Required`在连接字符串中）有关。

详情见

[http://dev.mysql.com/doc/refman/5.0/en/connector-net-tutorials-ssl.html](http://dev.mysql.com/doc/refman/5.0/en/connector-net-tutorials-ssl.html)

# javascript - Magento 可配置的.js - separatorIndex 做什么？

> ID：11407300
> 
> 赞同：1
> 
> 时间：2012-07-10T05:47:20.177
> 
> 标签：javascript, magento

我想知道以下代码的作用，因为我遇到了来自类别列表视图的自定义可配置选择器 + AJAX 预览问题。

```
 var separatorIndex = window.location.href.indexOf('#');
    if (separatorIndex != -1) {
        var paramsStr = window.location.href.substr(separatorIndex+1);
        var urlValues = paramsStr.toQueryParams();
        if (!this.values) {
            this.values = {};
        }
        for (var i in urlValues) {
            this.values[i] = urlValues[i];
        }
    } 
```

我得到的错误是`Uncaught TypeError: Cannot read property 'config' of undefined`

这只发生在我在 URL 中有哈希（分层导航）时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:02:43.757

```
var separatorIndex = window.location.href.indexOf('#'); // Looks for index of # in url
if (separatorIndex != -1) { // If # exists and index is set
    var paramsStr = window.location.href.substr(separatorIndex+1); // Get everything after the # in url
    var urlValues = paramsStr.toQueryParams(); // Transform to key value
    if (!this.values) { // Don't know where this comes from?
        this.values = {};
    }
    for (var i in urlValues) {
        this.values[i] = urlValues[i]; // Fill up the this.values with values from the substring after #
    }
} 
```

# primefaces - Primefaces 环滑动

> ID：11407302
> 
> 赞同：0
> 
> 时间：2012-07-10T05:47:32.103
> 
> 标签：primefaces

有没有办法像我们通过 jquery 那样滑动primeface“环”？？？

```
 <p:ring id="basic" value="#{user.userList}" var="player"> 
```

上面的代码在单击和旋转一次后滑动。

# java - 用于查找网页加载时间的 API

> ID：11407304
> 
> 赞同：0
> 
> 时间：2012-07-10T05:47:37.593
> 
> 标签：java, web-applications, webpage

是否有任何API可以找出网页的加载时间？还有哪些其他方法可以找出网页的加载时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:51:41.010

参考[http://www.hashemian.com/tools/page-load-time.htm](http://www.hashemian.com/tools/page-load-time.htm)

这是简单的 JavaScript 网页加载时间代码（复制并粘贴到网页顶部）：

```
<script language="JavaScript">
PLT_DisplayFormat = "Your connection took %%S%% seconds to load this page.";
PLT_BackColor = "palegreen";
PLT_ForeColor = "navy";
PLT_FontPix = "12";
PLT_DisplayElementID = "display_here";
</script>
<script language="JavaScript" src="http://www.hashemian.com/js/PageLoadTime.js"></script> 
```

示例：下面的行编码为： 。

`Your connection took 8.486 seconds to load this page.`

# android - OnPause 停止 GPS

> ID：11407309
> 
> 赞同：0
> 
> 时间：2012-07-10T05:48:04.000
> 
> 标签：android

更新#2。我最初的问题被回答的两个人的善意解决了。显然，我需要提出一个新问题，即生成的代码在运行时不会停止 GPS。但是现在没有错误，所以如果我知道怎么做，我会将其标记为已解决:-)

更新。

由于注释，我有“工作”代码，唯一的问题是它没有做它应该做的事情。它的工作原理是没有错误。

为了让它发挥作用，我在活动的顶部全局添加了这个。

```
 protected LocationListener ll;
protected LocationManager lm; 
```

并使用了这个 OnPause 代码

```
 @Override
    protected void onPause() {
        if(lm != null) {
            lm.removeUpdates(ll);
        }
        ll = null;
        lm = null;
        super.onPause();
    } 
```

一切都在手机上编译和运行。我显示 GPS 位置。麻烦的是，目标是让 GPS 关闭，以便在离开应用程序后电池不会没电。但 GPS 保持开启状态。我看到这是一个常见的投诉，但没有看到答案。我认为 lm.removeUpdates(ll) 是解决方案，但它不起作用。

--------------- 原帖 -------------

我想添加一些 OnPause 代码来停止我的 GPS 更新。我已经厌倦了至少十几个来自stackoverflow的代码示例，包括问题和答案，并且都在Eclipse中给出错误。

我的 GPS 代码在这里（它工作正常）：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    textLat = (TextView)findViewById(R.id.textLat);
    textLong = (TextView)findViewById(R.id.textLong);
    textTimex = (TextView)findViewById(R.id.textTimex);
    LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener ll = new mylocationlistener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
}
    class mylocationlistener implements LocationListener{

        @Override
        public void onLocationChanged(Location location) {
            if (location != null)
            {
                double pLat = location.getLatitude();
                double pLong = location.getLongitude();
                long pTime = location.getTime();
                DecimalFormat df = new DecimalFormat("#.######");
                textLat.setText(df.format(pLat));
                textLong.setText(df.format(pLong));
                textTimex.setText(Long.toString(pTime));
                //textTimex.setText(Long.toString(pTime));
                //textTimex.setText(df.format(pLong));
            }
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            // TODO Auto-generated method stub
        } 
    } 
```

我正在从网络上的示例中获取代码，但它们都不起作用。这是一个

```
@Override
public void onPause() {
    lm.removeUpdates(locationListener);
    super.onPause();
} 
```

我所说的 lm 真的没关系，它会给出一个无法解决的错误。我使用哪个示例代码都没有关系，它们都没有错误。

我一定是在做一些非常愚蠢的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:51:10.550

全局声明`locationListener`（在 Activity 的 onCreate 方法之外）：

```
 LocationListener ll;
     @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ////your code...
       ll = new mylocationlistener();
       ////your code..
    }

   @Override protected void onPause() 
 { 
  super.onPause();
   // TODO Auto-generated method stub 
   System.out.println("a intrat in onPause()"); 
  if(lm != null) { 
    lm.removeUpdates(ll); 
  } 
  ll = null; 
  lm = null;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:53:43.443

您尝试使用的变量仅在 onCreate 范围内可见。您需要使用成员变量。

你需要进入你的班级：

```
protected LocationListener ll;
protected LocationManager lm; 
```

然后你只需要在你的 ll 之前删除 LocationListener 并将 ll 用于你的 onPause 代码。lm 和 LocationManager 类型也是如此。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    textLat = (TextView)findViewById(R.id.textLat);
    textLong = (TextView)findViewById(R.id.textLong);
    textTimex = (TextView)findViewById(R.id.textTimex);
    lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    ll = new mylocationlistener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
} 
```

# android - XML 中的空白区域

> ID：11407314
> 
> 赞同：1
> 
> 时间：2012-07-10T05:48:25.823
> 
> 标签：android, xml, android-layout

为什么我在尝试创建 XML 文件时收到此错误消息？

如何解决？

![在此处输入图像描述](../Images/4c75562239c8b42b043e4008a07fdf1a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:05:12.710

在创建 xml 文件时，如果您引用任何被 android xml 损坏或不支持格式的文件或图像，它会给出这样的异常。

# windows-phone-7 - 在我的设备上测试我的应用程序

> ID：11407315
> 
> 赞同：0
> 
> 时间：2012-07-10T05:48:42.167
> 
> 标签：windows-phone-7, windows-phone-7.1

我想在我开发的设备中测试我的 phone 7 应用程序。请指导我如何在设备中安装我的应用程序？以及哪种 Windows Phone 7 设备适合测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:56:40.230

[此处](http://msdn.microsoft.com/en-us/library/ff928362%28v=vs.92%29.aspx)在标题为“部署到物理 Windows Phone 设备”的部分下对此进行了介绍。它需要开发人员解锁设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:59:42.867

如果您还没有这样做，您需要将您的手机注册为开发者手机。 [http://create.msdn.com/en-us/home/membership](http://create.msdn.com/en-us/home/membership)

然后你需要下载并安装 Zune，当你没有它只是为了插入你的手机并选择部署到手机而不是 Visual Studio 中的模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:00:10.710

假设您安装了 7.1 SDK 和 Zune：

1.  转到开始搜索 Windows Phone 开发人员注册。
2.  注册后，您可以通过选择目标作为“Windows Phone 设备”从 Visual Studio 在手机上进行调试。

# c# - 在 Linq 中通过 Eval 绑定 Gridview

> ID：11407317
> 
> 赞同：0
> 
> 时间：2012-07-10T05:49:00.277
> 
> 标签：c#, sql, linq, linq-to-sql, linq-to-entities

我有一个连接两个表的 LINQ 表达式。我想将“列表”绑定到 Gridview。代码在 Gridview 模板中出现此错误： **DataBinding：“SearchResult”不包含名为“codereq”的属性。**

```
IQueryable<SearchResult> myList = from t in TBL_Apartment
    join k in TBL_Owner on t.Code equals k.Code
    where k.CodeReq == t.CodeReq

        select new SearchResult
        {
           codereq= t.CodeReq,
           name = t.Name
        }

public class SearchResult
{
    public string codereq;
    public string name;
} 
```

绑定 Gridview 代码：

```
 GridSearch.DataSource = myList.ToList();
    GridSearch.DataBind(); 
```

因为我的网格视图的 aspx 页面如下：

```
<telerik:RadGrid ID="GridSearch" runat="server" Skin="Office2007" AutoGenerateColumns="False"
        dir="rtl" Width="750px" GridLines="None" >

<MasterTableView>
<Columns>

<telerik:GridTemplateColumn HeaderText="Request Code" FilterControlWidth="100px">
<ItemTemplate>
<asp:Label ID="Label1" runat="server" Text='<%# Eval("codereq")==""?"0":Eval("codereq") %>'></asp:Label>
</ItemTemplate>
</telerik:GridTemplateColumn>

<telerik:GridTemplateColumn HeaderText="Owner Name" FilterControlWidth="100px">
<ItemTemplate>
<asp:Label ID="Lbl_Mahale" runat="server" Text='<%# Eval("name")==""?"":Eval("name") %>'></asp:Label>
</ItemTemplate>
</telerik:GridTemplateColumn>

</Columns>
</MasterTableView>

<PagerStyle AlwaysVisible="True" />
<ClientSettings><Selecting AllowRowSelect="True" /></ClientSettings>

</telerik:RadGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:57:48.657

这应该有帮助

```
var myCodeReq = 1; (or some other type of variable)

    List<SearchResult> myList = (from t in TBL_Apartment join k in TBL_Owner on t.Code equals k.Code where k.CodeReq == myCodeReq select new SearchResult { codereq = t.CodeReq, name = t.Name }).ToList();

    GridSearch.DataSource = myList;
    GridSearch.DataBind(); 
```

# python - 使用 Django 缓存 Google Apps Provisioning API 登录对象

> ID：11407322
> 
> 赞同：0
> 
> 时间：2012-07-10T05:49:21.027
> 
> 标签：python, django, google-apps

我有一个 Django 站点，它使用配置 API 从 Google Apps 中提取电子邮件组。我有类似的东西：

```
import gdata.apps.groups.client

client = gdata.apps.groups.client.GroupsProvisioningClient(domain="example.com")
client.ClientLogin('email', 'password', source='apps') 
```

登录需要一段时间，所以我使用 ajax 调用来同步检索。登录调用占用了大部分时间，并且需要为多个视图完成。例如：一个视图呈现可用组的列表，而另一个视图呈现选定组的成员。

我想知道 Django 中是否有一种方法可以保留这样的客户端对象，以便它可以在多个视图中使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:06:46.017

如果您将 GroupsProvisioningClient 实例设为模块级别的全局实例，并且具有获取它的实用函数，例如：

```
CLIENT = GroupsProvisioningClient(domain="example.com")
def get_gapps_client():
    if not CLIENT.is_authenticated() # made up function!
       CLIENT = CLIENT.ClientLogin('email', 'password', source='apps')
    return CLIENT 
```

# spring - 重复请求映射

> ID：11407323
> 
> 赞同：0
> 
> 时间：2012-07-10T05:49:36.477
> 
> 标签：spring, spring-mvc

我正在开发一个名为 OpenMRS 的支持 Spring MVC 的开源软件。我以后无法修改核心源以进行更新。所以我必须写一个模块，比如插件来为系统添加功能。问题是我想通过使用portlet 重定向到我的jsp 来更改原始屏幕。核心代码的控制器是这样的：

```
@RequestMapping("/patientDashboard.form")
    protected String renderDashboard(@RequestParam(required = true, value = "patientId") Integer patientId, ModelMap map){

     ....
     return "patientDashboardForm";
} 
```

我不熟悉 Spring，但我知道当 url 以 /patientDashboard.form?patientId=xxx 结尾时，该函数将调用 patientDashboardForm.jsp。现在我想返回我的jsp，所以我必须用相同的代码定义一个新类，但返回我的jsp（这样做是因为无法修改核心代码）。但是通过定义相同的映射 /patientDashboard.form 会导致错误“无法将处理程序 XXX 映射到 URL 路径 /patientDashboard.form：已经有处理程序 YYY 映射”。那么有没有办法克服这种情况呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:54:10.973

您必须创建另一个`@Controller`扩展现有的。然后，您可以定义自定义映射（不能重用现有映射）并在方便时重新实现超类方法，重定向到您的视图并在那里定义自定义逻辑。

例子：

```
@Controller
@RequestMapping("/your_new_mapping")
public class YourController extends BaseController {

    @Override
    @RequestMapping("/patientDashboard.form")
    public void renderDashboard(@RequestParam(required = true, value = "patientId") Integer patientId, ModelMap map){
            // Call to default functionallity
            super.renderDashboard(patientId, map);
            ...
            // your custom code here
            return "yourCustomJSPHere";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:19:33.723

没有办法推翻现有的`@RequestMapping`. 每个映射必须是唯一的。你可以做的是以下。不要添加请求参数，而是添加这样的路径参数

```
@RequestMapping("/patientDashboard.form/{patientId}", method = RequestMethod.GET)
public String renderDashboard(@PathVariable("patientId") final long id, Model model) {
 /* your code here */ 
} 
```

这将创建一个`@RequestMapping`不同于现有的新的。

# php-5.3 - 文件打开和异常

> ID：11407325
> 
> 赞同：0
> 
> 时间：2012-07-10T05:49:40.653
> 
> 标签：php-5.3

文件相关函数在失败时是否会引发异常或仅返回 false。因为即使我在 try-catch 中使用它，如果 fopen/fwrite 根本不抛出它，捕获异常也没有任何意义……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:53:10.517

**返回值**

成功时返回文件指针资源，错误时返回 FALSE。

**错误/异常**

如果打开失败，则会产生 E_WARNING 级别的错误。您可以使用 @ 来抑制此警告。

[检查文档](http://php.net/manual/en/function.fopen.php)。如果你愿意，你可以抛出自定义异常。

# javascript - 在 html 中的每个 div 中调用 javascript 函数

> ID：11407330
> 
> 赞同：0
> 
> 时间：2012-07-10T05:50:04.343
> 
> 标签：javascript, ajax, html

嗨，我有一个 javascript 函数，我希望它在 c_id 循环时调用。但我对此一无所知。

这是我的功能。

```
 function getCLowestPrice(c_id){
    $.ajax({
    type: "POST",
    url: 'http://sample.com/api/store_lowest_price/',
    dataType: "xml",
    cache: false,
    data: {'id' : c_id},
    success: function(resp){  
         // we have the response 
            console.log(resp); 

        $(resp).find("response").each(function() {
            var c_name = $(this).find("c_name").text();
            var c_currency = $(this).find("currency").text();
            var c_min_price = $(this).find("price_min").text();

            var formated_price = addCommas(parseFloat(c_min_price).toFixed(2));

            $('.cinformation').html("<p>Lowest Price : " + c_currency + " " + formated_price + "</p>");
        });

       },  
    }); 

} 
```

我希望它在加载 div 时调用。但它会循环所有客户端及其 c_id。

```
<div>
      Client : <?php echo get_post_meta($post->ID, 'wpcf-c', true); ?>
      <div class="cinformation">
          C ID = <?php echo get_post_meta($post->ID, 'wpcf-c-id', true); ?>
           ....
      </div>
...
</div> 
```

所以当它循环时会是这样。

```
<div>
     Client : Hello         
   <div class="cinformation">
     C ID = 1
     ....

   </div>
   ...
</div>
....
<div>
     Client : World         
   <div class="cinformation">
     C ID = 2
     ....

   </div>
   ...
</div>
....
....
... 
```

但我不知道如何`getCLowestPrice(c_id)`在`cinformation div`.

我尝试使用，`onload`但它不能在 div 中使用。

有人知道我的案子吗？

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:14:00.283

You need to put your C ID using data attribute like so:

```
<div>
    Client : Hello         
    <div class="cinformation" data-c_id="1">
    </div>
</div> 
```

Then after the page loads just use jQuery to select all your divs and call your function:

```
$(".cinformation[data-c_id]").each(function(index, elem){
        var cId = $(this).data("c_id");
        getCLowestPrice(cId);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:17:19.380

你可以尝试添加这个

```
<script type="text/javascript">
       getCLowestPrice (<?php echo get_post_meta($post->ID); ?>) 
</script> 
```

在你的 for 循环中

# java - 在 Unix 中添加 Jar/设置类路径的不同方法

> ID：11407331
> 
> 赞同：0
> 
> 时间：2012-07-10T05:50:07.803
> 
> 标签：java, jar, classpath, executable-jar

我是一个java初学者。我正在 unix 系统中尝试 Java 程序。我收到以下错误

```
Exception in thread "main" java.lang.ClassNotFoundException: com.sybase.jdbc.SybDriver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:169)
        at reportToCSVg.main(reportToCSVg.java:13) 
```

我知道在 Eclipse 中我可以添加 jconn.jar 来使其工作。请告诉我我需要做的等效操作，以便每当我在服务器中运行程序时，我都包含了另一个路径中的 jar 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T05:56:16.267

您可以按如下方式设置类路径： [http ://www.ehow.com/how_4784820_set-classpath-eclipse.html](http://www.ehow.com/how_4784820_set-classpath-eclipse.html)

并将您的 jar 文件放在您的项目 classpath 中。或者你可以把你的 jar 文件作为

1.  选择库并单击“编辑”（窗口左侧）
2.  点击“用户库”
3.  再次选择库并单击“添加 JAR”

[http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-(Java)](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:05:04.130

如果您使用 Maven，您可以使用 Maven 打包包含所有依赖项的 -jar 文件。如果您使用带有 Ant 的普通 Eclipse - 只需使用[Fat-jar Plugin](http://fjep.sourceforge.net/)。

对于 Maven，将[程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/)添加到`pom.xml`

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <mainClass>app.runner.Runner</mainClass>
            </manifest>
        </archive>
            <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
    </configuration>
</plugin> 
```

对于 Maven 目标，请使用以下 -

```
maven assembly:single 
```

# selenium - 如何按键+单击硒

> ID：11407335
> 
> 赞同：4
> 
> 时间：2012-07-10T05:50:23.467
> 
> 标签：selenium, click, key, keypress

我的 Selenium 代码无法正确执行 keyPress + click 操作时遇到问题。

测试应该打开 jqueryui.com 链接并选择页面上的前 2 个 li 元素。

我正在使用 Selenium 2.23 和 Firefox 10。我的代码如下（我尝试了 4 种不同的方法让它工作但没有执行）：

> FirefoxProfile 配置文件 = 新的 FirefoxProfile();
> 
> profile.setEnableNativeEvents(true); WebDriver browser = new FirefoxDriver(profile); browser.get(" [http://jqueryui.com/demos/selectable/](http://jqueryui.com/demos/selectable/) ");
> 
> 列表元素 = browser.findElements(By.cssSelector("ol#selectable li"));
> 
> ```
>  Actions a = new Actions(browser);      
>  a.keyDown(Keys.CONTROL)
>  .moveToElement(elements.get(0))
>  .click()
>  .moveToElement(elements.get(1))
>  .click()
>  .keyUp(Keys.CONTROL)
>  .build()
>  .perform();
> 
>     Keyboard keyboard = ((HasInputDevices) browser).getKeyboard();
>     keyboard.pressKey(Keys.CONTROL);
>     List<WebElement> selectOptions = browser.findElements(By.cssSelector("ol#selectable li"));
>     selectOptions.get(1).click();
>     selectOptions.get(3).click();
>     keyboard.releaseKey(Keys.CONTROL); 
> ```

```
 Actions builder = new Actions(browser);
    builder.keyDown(elements.get(0), Keys.CONTROL)
        .click(elements.get(0))
        .click(elements.get(1))
        .keyUp(Keys.CONTROL);
    Action selectMultiple = builder.build();
    selectMultiple.perform();

    Robot robot = new Robot();
    robot.delay(1000);
    robot.keyPress(KeyEvent.CTRL_MASK);
    elements.get(0).click();
    elements.get(1).click();
    robot.keyRelease(KeyEvent.CTRL_MASK);

    browser.quit(); 
```

任何人都可以帮我提出其他建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:31:59.067

这是[Selenium 中的一个错误](http://code.google.com/p/selenium/issues/detail?id=3734&sort=-stars&colspec=ID%20Stars%20Type%20Status%20Priority%20Milestone%20Owner%20Summary)，影响 shift/control/alt 以及 Firefox for Windows 上的点击。给错误加注星标，也许他们会修复它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:42:23.340

我真的不知道为什么你的尝试都不起作用（尤其是第一个）。关键常数是一团糟。

无论如何，我已经能够完成这项工作（在 Windows XP 上）：

```
Robot robot = new Robot();
robot.keyPress(KeyEvent.VK_CONTROL);
elements.get(0).click();
elements.get(1).click();
robot.keyRelease(KeyEvent.VK_CONTROL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-26T09:56:26.737

我认为这不是一个错误。

尝试使用这个（C#）：

```
Action builder = new Actions(driver);
builder.KeyDown(Keys.Control);
builder.Click(element1);
builder.Click(element2);
builder.KeyUp(Keys.Control);
builder.Perform(); 
```

或为您（Java）：

> 动作 a = 新动作（浏览器）；a.keyDown(Keys.CONTROL) .moveToElement(elements.get(0)) .click() .moveToElement(elements.get(1)) .click() .keyUp(Keys.CONTROL) .build() .perform( );

只是代替

> 。点击（）; 。建造（）; 。履行（）;

采用

```
a.Click(YourWebElement);
a.keyUp(Keys.CONTROL);
a.build();
a.perform(); 
```

应该工作，

# smartgwt - smartGWT TileGrid::onKeyPress -- 如何覆盖 Enter 键，但保留其他键的默认处理

> ID：11407337
> 
> 赞同：1
> 
> 时间：2012-07-10T05:50:36.997
> 
> 标签：smartgwt, onkeypress

我在 smartGWT 项目的平铺网格上加载文件图标。按下 Enter 键时，我想打开所选文件进行显示。

当我覆盖 onKeyPress 处理程序时，它确实有效，但使用左/右/上/下箭头键的平铺网格导航行为丢失了。

我的问题是..，如何保留默认处理行为，同时仍然覆盖 Enter 键。

```
 tileGrid.addKeyPressHandler (new KeyPressHandler() {
    @Override
    public void onKeyPress(KeyPressEvent event) {
      if (EventHandler.getKey().equals("Enter")) {
       //do something special here
      }
      else {
        **//TODO: do the default processing..**.
      }
    }
  }); 
```

编辑：

@Ras，这是模拟问题的代码。

```
package com.rv.gwtsample.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.core.client.GWT;
import com.smartgwt.client.data.Record;
import com.smartgwt.client.widgets.events.KeyPressEvent;
import com.smartgwt.client.widgets.events.KeyPressHandler;
import com.smartgwt.client.widgets.tile.TileGrid;
import com.smartgwt.client.widgets.tile.TileRecord;

/**
 * @author rvnath
 *
 */
public class MyTileGrid implements EntryPoint {

    /* (non-Javadoc)
     * @see com.google.gwt.core.client.EntryPoint#onModuleLoad()
     */
    @Override
    public void onModuleLoad() {
        // TODO Auto-generated method stub
        TileGrid grid = new TileGrid();
        grid.setLeft(50);
        grid.setTop(50);
        grid.setWidth("300");
        grid.setHeight("200");
            DetailViewerField field = new DetailViewerField("Name");
        grid.setFields(field);
        grid.addKeyPressHandler(new KeyPressHandler() {
            @Override
            public void onKeyPress(KeyPressEvent event) {
                if (event.getKeyName().equals("Enter"))
                    GWT.log("Enter pressed");
            }
        });

    Record[] rec = new TileRecord[32];
    for (int i=0; i<32; ++i) {
        rec[i] = new TileRecord();
    }

    grid.setData(rec);
    grid.draw();
}

} 
```

如果我禁用 onKeyPress 处理程序，箭头键可以在磁贴网格的元素之间导航。如果我启用，则整个平铺网格面板会滚动，而不是选择更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T11:40:22.927

不要使用 KeyPressHandler，而是尝试使用 KeyDownHandler，它可以工作。

```
 tileGrid.addKeyDownHandler(new KeyDownHandler() {
            @Override
            public void onKeyDown(KeyDownEvent event) {
                if (EventHandler.getKey().equalsIgnoreCase("Enter")){
                    openModal(tileGrid.getSelectedRecord());
                }
            }
        }); 
```

使用最新的 3.0 smartgwt 构建测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:58:39.893

@Mupparthy，我还为**TextAreaItem实现了****keyPressHandler()**。我也有同样的要求，只需要处理删除和退格键。我所做的是，不要处理**其他**部分。它自动对包括所有箭头键在内的其他键进行默认处理。因此，如果它不适合您，请为我提供一个独立的代码，以便我们使其工作。

# asp.net - 使用 System.Net.Mail 发送会议请求

> ID：11407341
> 
> 赞同：1
> 
> 时间：2012-07-10T05:50:50.927
> 
> 标签：asp.net, outlook, timezone

我正在使用[此示例代码](http://www.ahmedblog.com/Blogs/ShowBlog.aspx?Id=2dc7e9e7-92b4-48cc-a7d1-d6535e5554ab)发送会议请求。我有一个问题：每次我使用代码时，会议时间总是错误的时间。

例如：`DTSTART:20120710T143000Z`在 Outlook 中给出一个约会`Tuesday, July 10, 2012 4:30 PM-5:30 PM`时应该给出`Tuesday, July 10, 2012 2:30 PM-3:30 PM`. 为什么会这样？

我们的当地时间是夏季的 UTC/GMT +3（约旦标准时间）和冬季的 UTC/GMT +2。每次我通过 Outlook 进行预约时，总是合适的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:36:16.590

您在约会中设置的开始时间应该是 UTC 时间。我怀疑您是插入当地（约旦）时间。这解释了两个小时的差异，因为 afaik UTC 没有考虑夏令时。

所以资源：

1.  [将某人的当地时间转换为 UTC 时间](https://stackoverflow.com/questions/3412611/convert-somebodys-local-time-to-the-utc-time)
2.  [夏令时和时区最佳实践](https://stackoverflow.com/questions/2532729/daylight-saving-time-and-timezone-best-practices)
3.  [将 UTC/GMT 时间转换为本地时间](https://stackoverflow.com/questions/179940/c-sharp-convert-utc-gmt-time-to-local-time)

# android - 如何设置expandablelistView的所有childview的背景？

> ID：11407344
> 
> 赞同：3
> 
> 时间：2012-07-10T05:51:07.053
> 
> 标签：android, expandablelistview

我想在不更改组视图的情况下设置可扩展列表视图的背景。设置每个子项的背景不符合要求。我认为，expandablelistView 的 childView 在某种程度上就像一个 listview ，并且必须有某个地方可以设置它的背景，而不必逐项设置。非常感谢您的善意回应！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:31:27.660

将背景设置为必须在适配器中膨胀的布局/子级，而不是父级布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:01:19.200

在子视图布局（ child_.xml ）中放入主布局背景属性。

喜欢

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

</LinearLayout> 
```

它仅更改子视图的背景。

# asp.net-mvc - 如何测试构建配置设置的消息？

> ID：11407346
> 
> 赞同：1
> 
> 时间：2012-07-10T05:51:10.543
> 
> 标签：asp.net-mvc, vb.net, tdd

我有一个字符串显示在我的所有页面上，以指示系统内置的模式（即调试、测试、发布等）。该字符串是使用编译器条件（VB 中的#If）设置的，因此它会根据我们所处的构建模式自动更改。

我为此编写了一个测试，它也使用编译器条件（就像实时代码一样），问题是，如果不在我所有不同的构建下运行我的测试，我无法验证它为所有构建生成正确的字符串。

这是我的代码：

```
 Public Sub AssertHasMessageForBuild()
            Dim message As String = Nothing
#If DEBUG Then
            message = "DEBUG MODE"
#ElseIf BETA Then
            message = "BETA"
#End If

            If Not String.IsNullOrEmpty(message) Then
                Assert.AreEqual(message, ViewData("DebugMessage"))
            Else
                CollectionAssert.DoesNotContain(ViewData, "DebugMessage")
            End If
        End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:31:22.783

TDD 并不是真正的出色测试机制。它是一种帮助你思考类的设计和责任的机制。

您可能希望将这两个职责分开 - 检测您所处的模式并创建消息。然后，您可以对消息的创建进行 TDD，使模式检测成为系统中唯一不能轻易进行 TDD 的部分。

不过，您仍然可以手动测试它。有时这是唯一的出路。如果您更改它，请确保再次手动测试它（您可能需要相应地添加评论）。

# mysql - 如何使用选项从命令行导出和导入 .sql 文件？

> ID：11407349
> 
> 赞同：350
> 
> 时间：2012-07-10T05:51:16.417
> 
> 标签：mysql, command-line, command-line-arguments, sqlcommand

**不重复！**在命令行导出期间寻找一些功能有 phpmyadmin

我想**从命令行**从 MySQL 数据库导出和导入 .sql 文件。

是否有任何命令可以在 MySQL 中导出 .sql 文件？那我怎么导入呢？

在进行导出/导入时，可能存在启用/禁用**外键检查**或**仅导出表结构等****约束**。

 ****我们可以用 设置这些**选项**吗`mysqldump`？

*一些选项的例子*

[![在此处输入图像描述](../Images/dacf60ba6d2327f49de2585fc00a02fa.png)](https://i.stack.imgur.com/qPu8g.png)

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-07-10T05:56:06.957

输入以下命令导入sql数据文件：

```
$ mysql -u username -p -h localhost DATA-BASE-NAME < data.sql 
```

在此示例中，使用 vivek 作为用户名将“data.sql”文件导入“博客”数据库：

```
$ mysql -u vivek -p -h localhost blog < data.sql 
```

如果您有专用的数据库服务器，请将 localhost 主机名替换为实际的服务器名称或 IP 地址，如下所示：

```
$ mysql -u username -p -h 202.54.1.10 databasename < data.sql 
```

要导出数据库，请使用以下命令：

```
mysqldump -u username -p databasename > filename.sql 
```

请注意每种情况下的`<`和`>`符号。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-01-04T18:05:43.843

如果您已经在运行 SQL shell，则可以使用以下`source`命令导入数据：

```
use databasename;
source data.sql; 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-03-11T13:32:27.723

mysqldump 不会转储数据库事件、触发器和例程，除非在转储单个数据库时明确说明；

```
mysqldump -uuser -p db_name --events --triggers --routines > db_name.sql 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2015-08-28T11:03:50.647

那么你可以使用下面的命令来导出，

> mysqldump --databases --user=root --password your_db_name > export_into_db.sql

并且生成的文件将在您运行此命令的同一目录中可用。

现在使用命令登录mysql，

> mysql -u[用户名] -p

然后使用带有文件路径的“source”命令。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2012-07-10T05:55:07.937

将整个数据库转储到文件中：

```
mysqldump -u USERNAME -p password DATABASENAME > FILENAME.sql 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2012-07-10T05:56:07.653

尝试

```
mysqldump databaseExample > file.sql 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-09-26T03:38:00.007

因为我没有足够的声誉在最高职位之后发表评论，所以我在这里添加。

使用“|” 在linux平台上以节省磁盘空间。

thx @Hariboo，添加事件/触发器/程序参数

```
mysqldump -x -u [uname] -p[pass]  -C --databases db_name  --events --triggers --routines | sed -e 's/DEFINER[ ]*=[ ]*[^*]*\*/\*/ '  | awk '{ if (index($0,"GTID_PURGED")) { getline; while (length($0) > 0) { getline; } } else { print $0 } }'  | grep -iv 'set @@' | trickle -u 10240 mysql -u username -p -h localhost DATA-BASE-NAME 
```

一些问题/提示：

错误：......使用 LOCK TABLES 时不存在

```
# --lock-all-tables，-x , this parameter is to keep data consistency because some transaction may still be working like schedule.
# also you need check and confirm: grant all privileges on *.* to root@"%" identified by "Passwd"; 
```

ERROR 2006 (HY000) at line 866: MySQL server has gone away mysqldump: Got errno 32 on write

```
# set this values big enough on destination mysql server, like: max_allowed_packet=1024*1024*20
# use compress parameter '-C'
# use trickle to limit network bandwidth while write data to destination server 
```

第 32730 行的错误 1419 (HY000)：您没有超级权限并且启用了二进制日志记录（您*可能*希望使用不太安全的 log_bin_trust_function_creators 变量）

```
# set SET GLOBAL log_bin_trust_function_creators = 1;
# or use super user import data 
```

第 138 行的错误 1227 (42000)：访问被拒绝；您需要（至少一个）此操作的 SUPER 权限 mysqldump: Got errno 32 on write

```
# add sed/awk to avoid some privilege issues 
```

希望这有帮助！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-10-24T21:20:18.930

您可以使用此脚本从此链接给出的终端**导出或导入任何数据库：** [https ://github.com/Ridhwanluthra/mysql_import_export_script/blob/master/mysql_import_export_script.sh](https://github.com/Ridhwanluthra/mysql_import_export_script/blob/master/mysql_import_export_script.sh)

```
echo -e "Welcome to the import/export database utility\n"
echo -e "the default location of mysqldump file is: /opt/lampp/bin/mysqldump\n"
echo -e "the default location of mysql file is: /opt/lampp/bin/mysql\n"
read -p 'Would like you like to change the default location [y/n]: ' location_change
read -p "Please enter your username: " u_name
read -p 'Would you like to import or export a database: [import/export]: ' action
echo

mysqldump_location=/opt/lampp/bin/mysqldump
mysql_location=/opt/lampp/bin/mysql

if [ "$action" == "export" ]; then
    if [ "$location_change" == "y" ]; then
        read -p 'Give the location of mysqldump that you want to use: ' mysqldump_location
        echo
    else
        echo -e "Using default location of mysqldump\n"
    fi
    read -p 'Give the name of database in which you would like to export: ' db_name
    read -p 'Give the complete path of the .sql file in which you would like to export the database: ' sql_file
    $mysqldump_location -u $u_name -p $db_name > $sql_file
elif [ "$action" == "import" ]; then
    if [ "$location_change" == "y" ]; then
        read -p 'Give the location of mysql that you want to use: ' mysql_location
        echo
    else
        echo -e "Using default location of mysql\n"
    fi
    read -p 'Give the complete path of the .sql file you would like to import: ' sql_file
    read -p 'Give the name of database in which to import this file: ' db_name
    $mysql_location -u $u_name -p $db_name < $sql_file
else
    echo "please select a valid command"
fi 
```****

# c++ - 使用 IShellDispatch 界面更改文件的详细信息选项卡（右键单击时）？

> ID：11407351
> 
> 赞同：1
> 
> 时间：2012-07-10T05:51:24.190
> 
> 标签：c++, windows, shell, com, windows-shell

正如标题所说，当我们右键单击某个文件然后选择属性选项时，是否可以通过使用 IShellDispatch 界面更改详细信息选项卡中显示的某些字段？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T14:37:51.663

在 Vista/7 上，使用 Shell 属性存储来更新 shell 属性页面中的详细信息字段。有关示例，请参见[http://blogs.msdn.com/b/benkaras/archive/2006/11/21/writing-properties-9-summary.aspx 。](http://blogs.msdn.com/b/benkaras/archive/2006/11/21/writing-properties-9-summary.aspx)

对于 2000/XP，您需要使用复合文件 API，因为元数据存储在 NTFS 替代流或文件本身中，请参阅[http://msdn.microsoft.com/en-us/library/aa379964.aspx](http://msdn.microsoft.com/en-us/library/aa379964.aspx)

# entity-framework - 一个具有两个存储提供程序的实体框架定义？

> ID：11407352
> 
> 赞同：0
> 
> 时间：2012-07-10T05:51:27.860
> 
> 标签：entity-framework, edmx

**设置**

*   我有一个使用服务器上的实体框架访问的 SQL Server 2008 数据库。
*   每个客户端都有一个 SQL Server Compact Edition 3.5 数据库，用于在脱机时存储数据。
*   我使用从服务器定义的实体框架生成的自我跟踪实体。

**问题**

目前我定义了两个 EDMX，一个用于服务器，另一个用于客户端，尽管它们除了存储提供程序之外是相同的。我使用来自服务器的自我跟踪实体，它们与客户端数据库配合良好。有没有办法只拥有一个 EDMX？目前，我可能会对一个 EDMX 进行更改而忘记更改另一个。还是我使用了错误的方法？

**笔记**

我不想使用同步框架，因为需要在服务器端应用复杂的业务逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:40:52.520

不幸的是，没有直接的方法可以将单个 EDMX 与多个存储提供商一起使用。您必须始终为每个提供商提供单独的 SSDL 部分。常见的解决方法是[将 SSDL、MSL 和 CSDL 作为单独的文件导出](http://msdn.microsoft.com/en-us/library/cc716709.aspx)（默认设置将它们作为资源添加到程序集）并使用一些脚本或预构建操作来创建 SSDL 文件的副本，其中包含第二个提供者的所有必要更改（可以有SQL Server 和 SQL Server CE 之间的数据类型也不同）。您将通过在连接字符串中指定每个应用程序来使用正确的 SSDL 文件。

另一个“更好”的解决方案是不使用 EDMX，而是在这个问题大多不存在的情况下首先使用代码 - 但这是架构更改。

# javascript - 在 Handlebars.js 中查询 Block Helpers

> ID：11407353
> 
> 赞同：1
> 
> 时间：2012-07-10T05:51:28.417
> 
> 标签：javascript, handlebars.js, templating

我在这样的模板中有一个产品块：

```
<script type="text/x-handlebars-template" id="tmpl-person">
    <div class="product">
       <!-- Product details here -->
    </div>
</script> 
```

我想要做的是，如果从我作为数据获得的人数组中，每三个人之后，我想在其中插入一个名为的容器`<div class="row-fluid"></div>`和三个人。然后是一个行流体容器和三个人。我怎样才能使用助手来实现这一点？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:19:29.373

你可以使用这样的东西

```
Handlebars.registerHelper('each', function(context, block) {
  var ret = "";

  for(var i=0, j=context.length; i<j; i++) {
    ret = ret + "<li>" + block(context[i]) + "</li>";
  }

if( i % 3 == 0)
   ret = ret + <div class="row-fluid"></div>

  return ret;
}); 
```

您可以定义您的自定义迭代器，如下所示

```
<script type="text/x-handlebars-template" id="tmpl-person">
    {{#each productInfo}}
    <div class="product">
       <!-- Product details here -->
    </div>
    {{/each}}
</script> 
```

# database - Django“bulk_save”和“bulk_update”

> ID：11407354
> 
> 赞同：6
> 
> 时间：2012-07-10T05:51:28.910
> 
> 标签：database, django, django-orm

**更新：增加了赏金。请提供一个例子，我会接受最好的答案**

**更新 2：现在包括显式示例**

[从同一个项目继续，我在一个单独的线程中询问了 bulk_create 。](https://stackoverflow.com/questions/10691359/django-1-4-bulk-create-with-a-list) 我想知道是否有一种本质上“批量保存”的方法 - 如果不存在则插入，或者如果它已经存在则简单地更新。

例如：

```
class Person(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)
    height = models.DecimalField(blank=True, null=True)
    weight = models.DecimalField(blank=True, null=True) 
```

我有一个包含这些字段的键值对的字典列表。我想按姓名过滤，然后更新身高和/或体重，因为这些我的球员仍在成长和调理。如果“bulk_save”没有简单的方法，批量更新也会有所帮助。

[参考：2012 年 6 月 8 日 - django 项目的“get_or_create()”补丁](https://code.djangoproject.com/ticket/3182)

[批量更新参考](https://stackoverflow.com/questions/324779/strategies-for-speeding-up-batch-orm-operations-in-django)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T06:16:00.497

我刚刚对下面列出的 update_many 函数做了一个变体，我似乎已经大大提高了速度。

[http://people.iola.dk/olau/python/bulkops.py](http://people.iola.dk/olau/python/bulkops.py)

更新 - 显然 DSE2 也是一种选择。

[https://bitbucket.org/weholt/dse2](https://bitbucket.org/weholt/dse2)

明天将更新速度测试。

# eclipse - Eclipse IDE 的 PMD 插件的离线安装

> ID：11407355
> 
> 赞同：3
> 
> 时间：2012-07-10T05:51:34.763
> 
> 标签：eclipse, eclipse-plugin, pmd

我正在尝试为 Eclipse 离线下载和安装 PMD 插件，但没有成功。

我下载了以下2个拉链：

*   net.sourceforge.pmd.eclipse-3.2.6.v200903300643.zip（这个版本和我网上安装的一致）
*   pmd-eclipse-1.8.0

不确定要使用哪一个以及如何在 Eclipse 中配置它。

我搜索了很多，但没有找到离线安装和配置的正确步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T03:18:33.690

如果它包含网站档案：

转到帮助-> 安装新软件

单击添加...

在 Add Repository 对话框中，单击 Archive 并指向您的 zip。其余的安装与在线安装一样。

别的：

提取 zip 将所有插件复制到目标 eclipse 插件文件夹

将所有功能复制到您的目标 Eclipse 功能文件夹

使用 -clean 选项启动 Eclipse

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T14:19:12.073

您可以通过在此处指向您的 Eclipse 安装程序来获取该插件的最新 4.0 版本：http: [//sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/](http://sourceforge.net/projects/pmd/files/pmd-eclipse/update-site/)

# javascript - 带有过滤器的 jQuery if 和 else

> ID：11407358
> 
> 赞同：0
> 
> 时间：2012-07-10T05:51:51.540
> 
> 标签：javascript, jquery, if-statement

我有一个过滤器并将这个脚本用于过滤器。

```
filteredData = filteredData.filter(function() {
  var elm = $(this),
  price = parseInt('0' + elm.attr('data-price'), 10) || 0;
  if ($(price < 15)) {
    return !(250 <= price);
  } else {
    return !(sliderData <= price);
  }
}); 
```

但有些不对劲。价格值是 15 或更多。但是代码永远不会进入 else 结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:54:24.587

尝试`$()`从此行中删除函数调用：

```
if ($(price < 15)) { 
```

它应该是：

```
if (price < 15) { 
```

该`$()`函数返回一个对象，并且所有对象都是“真实的”，因此此代码将始终进入`if`块而不是`else`块。

（顺便说一句，假设您解决了上述问题，在`if`分支中，您返回的表达式`!(250 <= price)`将始终是`true`因为`price`will be `< 15`，所以您不妨`return true;`在那时说。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:57:31.263

似乎您无意中放置了“$”选择器：

试试看：if (price < 15) { (...)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T05:55:03.697

我觉得你的`if`说法有些问题。

```
filteredData = filteredData.filter(function() { 
            var elm = $(this), 
            price = parseInt('0' + elm.attr('data-price'), 10) || 0; 
            if (price < 15) { 
                return !(250 <= price); 
            } else { 
                return !(sliderData <= price); 
            } 
        }); 
```

这会有所帮助。

# arrays - Wordpress 从帖子中求和 meta_values 并按类别排序

> ID：11407359
> 
> 赞同：1
> 
> 时间：2012-07-10T05:51:56.487
> 
> 标签：arrays, wordpress, sum, categories

我正在使用此代码从数组中查询所有类别，并对每个类别的 meta_key 值求和：

```
<? 
$arr_cat = array(1,34,64,32);
foreach ($arr_cat as $cat) {
  $MySum = 0;
  $args = array(
    'cat' => $cat,
    'meta_key' => 'proyecto_votos',
    'post_type' => 'proyecto',
    'posts_per_page' => '-1');
    $the_query = new WP_Query( $args);
    while ( $the_query->have_posts() ) : $the_query->the_post();
      $MySum += get_post_meta($post->ID, 'proyecto_votos', true);
    endwhile;
    wp_reset_postdata();
  }
  //var_dump($arr_cat);
?> 
```

它工作正常。但我不能只显示 custom_value 总和最多的前 5 个类别。请你帮我解决这个问题。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:44:36.553

最后用一点谷歌我明白了:-)：

```
<? $totalvotes = get_meta_values( 'proyecto_votos', 'proyecto' ); ?>    
<? 
foreach ($arr_cat_reg as $cat) {
    $MySum = 0;
    $args = array(
    'cat' => $cat,
    'meta_key' => 'proyecto_votos',
    'post_type' => 'proyecto',
    'posts_per_page' => '-1' );        
    $the_query = new WP_Query( $args);
    while ( $the_query->have_posts() ) : $the_query->the_post();
        $MySum += get_post_meta($post->ID, 'proyecto_votos', true);
    endwhile;       
    //echo $MySum.'<br/>';              
    $percent = $MySum * 100;
    $percent = $percent / $totalvotes;              
    //echo $percent;                
    wp_reset_postdata();
    $catslug = get_cat_slug($cat);
    $most_voted[] = array('region' => $catslug, 'votos' => $MySum); 
}               
$sortArray = array();

foreach($most_voted as $region){
    foreach($region as $key=>$value){
        if(!isset($sortArray[$key])){
            $sortArray[$key] = array();
        }
        $sortArray[$key][] = $value;
    }
} 
$orderby = "votos";
array_multisort($sortArray[$orderby],SORT_DESC,$most_voted); 
$top5 = array_slice($most_voted, 0, 5);         
?> 
```

我希望这对某人有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:57:20.490

仅适用于前 5 个帖子

```
$args = array(
    'cat' => $cat,
    'post_type' => 'proyecto',
    'meta_key' => 'proyecto_votos',
    'orderby'='meta_value_num',
    'posts_per_page' => '5'  // top 5 posts using ASC order by default
); 
```

`posts_per_page => -1`将显示所有帖子。

[**参考。**](http://codex.wordpress.org/Class_Reference/WP_Query#Order_.26_Orderby_Parameters)

# javascript - 获取“无法读取未定义的属性'myVar'”，即使使用 typeof 也无法解决

> ID：11407361
> 
> 赞同：0
> 
> 时间：2012-07-10T05:52:00.813
> 
> 标签：javascript, node.js, mongodb

```
myWord = ''

db.collection('testCollection', function (err, collection) {
    collection.find({room:"room1"}).toArray(function(err, results) {
        if(typeof results[0].word === "undefined")
            myWord = '';
        else
            myWord = results[0].word;
    });
}); 
```

我正在使用 socket.io、express 和 mongodb 本机驱动程序。

执行此查询时，数据库 100% 为空。每次它击中这条线：

```
if(typeof results[0].word === "undefined") 
```

我明白了

```
TypeError: Cannot read property 'word' of undefined 
```

我是 mongodb 和 nodejs 的新手，所以我什至可能会错误地构建我的代码。如果您需要查看更多代码，当然请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:54:43.613

尝试`if(results[0] === undefined)`或`if(typeof results[0] == "undefined")`

您正在尝试采用取消引用后所获得的类型，当它是对空值的取消引用首先破坏了它。

# javascript - 如何让我的 html5 功能不兼容警告使用 javascript 工作

> ID：11407365
> 
> 赞同：0
> 
> 时间：2012-07-10T05:52:25.807
> 
> 标签：javascript, html

我在我的网页中添加了一个表单，允许上传多个文件。我添加了输入`<input type="file" name="photo_upload[]" id="photo_upload" multiple="multiple" />`。

我尝试添加一个警告，该警告仅在浏览器不支持多文件功能时才可见。我试过这段代码：

```
<script type="text/javascript">
var testrange=document.createElement("input")
testrange.setAttribute("multiple", "multiple")
if (testrange.multiple=="multiple"){
    document.getElementById('multiple_warning').style.display = 'none';
}
</script>
<div id="multiple_warning" style="background:#FFFF99; border:dashed; border-width:thin;">Sorry, but your browser does not support the multiple file upload feature.<br />
If you have more than one photo to send us, please send it after you recieved your comformation email.</div> 
```

但无论如何它总是显示“multiple_warning”。我怎样才能让它正常运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:05:30.177

您可以使用 Modernizr 来测试特定属性。它是一个开源的跨浏览器 html 5 检测库

```
if(Modernizr.input[attribute])){
    alert("Attribute exists");
}
else{
    //error handling
} 
```

见这里[http://modernizr.com/docs/#input](http://modernizr.com/docs/#input)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:02:32.790

检查控制台，看看为什么你的测试总是失败；）

```
testrange.setAttribute("multiple", "multiple")
console.log(testrange.multiple); 
```

您可以使用此代码段检查此功能

```
if (!("multiple" in testrange)) {
    alert("no multiple upload supported");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:07:23.100

使用它而不是您拥有的 JavaScript：

```
var testrange = document.createElement("input")
if ("multiple" in testrange) {
    document.getElementById("multiple_warning").style.display = "none";
} 
```

如果您要进行大量特征检测，请考虑使用[Modernizr](http://modernizr.com/)来测试这些东西，而不是创建自己的测试。它解决了很多极端情况，并且会为您省去很多麻烦。

# iphone - 从 WordPress 网站创建应用程序

> ID：11407367
> 
> 赞同：0
> 
> 时间：2012-07-10T05:52:28.447
> 
> 标签：iphone, ios, wordpress

我有一个基于**WordPress**的个人网站。现在，我将为它创建一个简单的 iOS 应用程序，使我的读者能够阅读和评论帖子，查看存档，......通常的东西。

由于我使用的是 WordPress 并且我的网站很常见，我想知道是否有任何**免费**的开箱即用工具箱或用于此目的的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:21:13.403

你有没有发现：

[http://ios.wordpress.org](http://ios.wordpress.org)

和整个项目：

[http://ios.trac.wordpress.org/browser/trunk](http://ios.trac.wordpress.org/browser/trunk)

我希望它会为您节省很多工作;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:02:01.613

您已经在使用 WPTouch 了吗？

[http://wordpress.org/extend/plugins/wptouch/](http://wordpress.org/extend/plugins/wptouch/)

# ruby-on-rails - 将图像上传到 Rails，抛出不兼容的字符编码 UTF-8 和 ASCII-8BIT

> ID：11407369
> 
> 赞同：1
> 
> 时间：2012-07-10T05:52:31.520
> 
> 标签：ruby-on-rails, file-upload, paperclip

我知道有关此问题的类似问题，但我无法在 ActionDispatch::Http::UploadedFile 中强制进行文件名转换。这样做似乎不正确。

我正在使用[Jquery-File-Upload 上传文件](https://github.com/blueimp/jQuery-File-Upload/)，发送到 rails 并使用 Paperclip 保存

这是我在 rails 控制器中的参数：注意**@original_filename="ééééááá.jpg"**到**filename=\"\xC3\xA9\xC3\xA9\xC3....**

```
 Parameters: {"files"=>[#<ActionDispatch::Http::UploadedFile:0x007fe7d587d5d8 @original_filename="ééééááá.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"files[]\"; filename=\"\xC3\xA9\xC3\xA9\xC3\xA9\xC3\xA9\xC3\xA1\xC3\xA1\xC3\xA1.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/folders/xn/tp46f9fn0kz1181k28c45zf40000gn/T/RackMultipart20120710-65737-1ac40o4>>], "id"=>"1"} 
```

> Encoding::CompatibilityError（不兼容的字符编码：UTF-8 和 ASCII-8BIT）：app/controllers/documents_controller.rb:21:in `create'

我必须在服务器端或客户端/表单端解决这个问题？

**更新**

好吧，我检查了[https://github.com/thoughtbot/paperclip/issues/301](https://github.com/thoughtbot/paperclip/issues/301)并解决了这个问题：

```
AWS.config( :logger => nil ) 
```

但还是太猴子了，导致调整大小仍然抛出 utf8 异常

**更新 2**

改为使用载波

# c# - 如何编辑所有选定的超网格行

> ID：11407370
> 
> 赞同：3
> 
> 时间：2012-07-10T05:52:32.747
> 
> 标签：c#, sql-server-2008, ultrawingrid

我在我的 Windows 应用程序中使用了一个 ultragrid，通过将它的 DataSource 属性设置为从该表返回的数据表来显示我的数据库表的记录。

行数可以是大约 100000 行。

现在我有两个问题：

1）我想让用户选择这个网格的几行，然后全部编辑它们。要做到这一点，我需要知道这些选定行的哪些单元格具有相同的值，哪些没有，然后在一个中显示相同的列形式。

我想到的第一个解决方案是通过 2 个 foreach 循环检查所有选定行的所有列。有没有更好的解决方案？

2）最后当用户按下保存按钮时，更新应该应用在表上。什么是最好的方法？（使用`IN`sqldataadapter 的 command 或 UpdateCommand 或 ...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T12:59:24.390

您可以使用 UltraGrid 提供的方法调用 UpdateData() 来更新所有多行，而无需逐行或逐单元跟踪更改

[UpdateData 方法](http://help.infragistics.com/Help/NetAdvantage/WinForms/2011.1/CLR2.0/html/Infragistics2.Win.UltraWinGrid.v11.1~Infragistics.Win.UltraWinGrid.UltraGridBase~UpdateData.html)更新网格中的任何修改信息，并将其发送给数据提供者。更新完成后，任何标记为已修改数据的行都将清除该标记。

UpdateMethod 需要从仍处于编辑模式的单元格中退出，这是一个错误，要解决它，您需要使用它，如下所示

ultraGrid1.PerformAction（Infragistics.Win.UltraWinGrid.UltraGridAction.ExitEditMode）；ultraGrid1.UpdateData();

关于为什么以这种方式使用它的更多细节可以在这里找到[http://devcenter.infragistics.com/Support/KnowledgeBaseArticle.Aspx?ArticleID=4220](http://devcenter.infragistics.com/Support/KnowledgeBaseArticle.Aspx?ArticleID=4220)

要回答您的第二个问题，您必须以这种方式使用 UpdateData 方法

```
e.g.
private void ultraButton1_Click(object sender, EventArgs e)
{
    ultraGrid1.UpdateData();
    this.dbRowsTableAdapter.Update(this.testDataSet);
    ultraButton1.Enabled = false;
} 
```

再一次，UltraGrid 似乎保持其本地数据纯粹，因此您必须调用 TableAdapter 的 Update 方法，这意味着您必须创建一个 DataSet 并用 SqlDataAdapter 填充它。

请参阅论坛清楚地解释为什么 UltraGrid.UpdateData 方法不会在此处提交回数据库[http://www.infragistics.com/community/forums/t/57161.aspx](http://www.infragistics.com/community/forums/t/57161.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T03:33:56.120

根据我的分析，

1）您可以根据要查看和保存数据的所有列在超网格中进行分组。将相似的列分组后会出现在一起，这将节省大量的数据分析时间，并找出不同行中哪些列数据相同。一旦获得了类似数据的列表，您就可以通过 for each 循环甚至 for 循环轻松处理它们，因为您将能够访问由此生成的行数。

2）您应该考虑为此使用 System.Data.SqlClient.SqlBulkCopy。这是文档，当然还有很多在线教程。
[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx) 没有时应该避免 IN。的记录更多，因为它会影响性能。如果你不想使用sqlbulkcopy，那么你也可以去ultragrid的UpdateData（）（ultragrid的非常有用的特性）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T04:55:51.673

对于我的第一个问题，我找不到任何解决方案，因此我使用循环来比较网格中所有选定的行并诊断常见值。但我在第二个问题中使用了 SqlBulkCopy。

# c# - 当我们从列表中设置数据源时，如何在 Devexpress 网格视图中添加新行 对象

> ID：11407375
> 
> 赞同：0
> 
> 时间：2012-07-10T05:52:47.250
> 
> 标签：c#, linq

如何在 Devexpress gridview 中添加新行，当我们从 List objlst 设置 DataSource 时，我想在运行时添加新行。

```
private void SetData()
{
    List<CITEM> lstItem = new List<CITEM>();

    gridControl1.DataSource = lstItem;

    gridView1.PopulateColumns();
}

private void button1_Click(object sender, EventArgs e)
{
    gridView1.AddNewRow();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:09:55.567

如果您将列表更改为绑定列表，它将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-30T07:18:33.097

```
private void button1_Click(object sender, EventArgs e)
{
    object[] obj = //your row object;
    gridView1.AddNewRow();
    gridView1.SetRowCellValue(gridView1.FocusedRowHandle, gridView1.Columns[0], obj[0].ToString());  
    gridView1.SetRowCellValue(gridView1.FocusedRowHandle, gridView1.Columns[1], obj[1].ToString());  
    gridView1.UpdateCurrentRow(); 
} 
```

# c++ - 这个 C++ 代码我在做什么错？

> ID：11407383
> 
> 赞同：-3
> 
> 时间：2012-07-10T05:53:29.467
> 
> 标签：c++

抱歉，忘记密码

这是不正确的代码。我一直试图让这个工作，但所有的逻辑运算符都不起作用。

```
#include <iostream>
#include <string>
using namespace std;
string repeat;
string repeatnum;
string prompt = "|-[]->";
int main()
{
string entry;
bool Running = true;
while(Running == true)
{
cout << "\n";
cout << prompt;
cin >> entry;
if(entry == "Exit") return 0;
if(entry == "Help") cout << "HELP:\nThsi is a simple program, try an input";
if(entry == "ChangePrompt")
{
    cout << "What do you want to change the prompt to?: ";
    cin >> prompt;
}
if(entry == "Repeat" || "repeat")
{
    cout << "What string do you want to repeat?: ";
    cin >> repeat;
    cout << "How many times do you want to repeat" << repeat << "(1-9)?: ";
    cin >> repeatnum;
    if(repeatnum > 0){}
}
}
char f;
cin >> f;
return 0;
} 
```

这是我得到的错误。

```
Error:
C:\Users\Packard Bell\Desktop\test\main.cpp||In function 'int main()':|
C:\Users\Packard Bell\Desktop\test\main.cpp|29|error: no match for 'operator>' in 'repeatnum > 0'|
||=== Build finished: 1 errors, 0 warnings ===| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T05:56:44.403

因为在第 29 行，`main.cpp`您尝试做`repeatnum > 0`并且`repeatnum`是没有重载的类型`operator >`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:47:38.683

除了repeatnum问题，这段代码没有做你想做的事

```
if(entry == "Repeat" || "repeat") 
```

它应该是

```
if(entry == "Repeat" || entry == "repeat") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:45:00.787

根据给定的信息，我只能猜测该变量`repeatnum`是一个类或结构的对象，您不能使用它直接将其与`0`. 如果`repeatnum`您定义了的类型，请添加一个重载的成员函数`operator >`并正确处理它。

```
class YourType
{
    // Class definition
public:
    int operator >( int var )
    {
       // Code for comparison
       // return result
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T05:56:44.610

现在看到代码后。repeatnum 是一个字符串。您读取字符串的输入，然后将其与整数进行比较。现在字符串没有为整数定义运算符>，因此您需要在比较之前将字符串转换为整数。

```
atoi(repeatnum.c_str()); 
```

或者使用 stringstream 来做到这一点。

# java - 我们如何在 JVM 上拥有一种动态类型的语言？

> ID：11407385
> 
> 赞同：13
> 
> 时间：2012-07-10T05:53:30.267
> 
> 标签：java, dynamic, static, jvm, jruby

我们有`Jython`, `JRuby`，`Groovy`它们是动态类型的并且会运行`JVM`。我知道这些语言编译为字节码。

其他语言如`Scala`支持类型推断，很明显编译器会为我们推断类型。

但`Java`它是一种静态语言，它编译为字节码，这是否意味着字节码支持动态类型？

例如在`Java`我们需要在编译时声明变量类型，并且永远不能改变它。但是如果`Python`我们不必声明类型，但我们可以在运行时将任何类型的值分配给同一个变量。

动态类型如何在静态语言上工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T06:05:56.517

> 但是Java是一种静态语言，它编译成字节码，这是否意味着字节码支持动态类型？

是的，它确实是这个意思。

您会看到 Java 不是一种完全静态类型的语言。每当您将对象从类型转换为子类型时，JVM 都会执行动态（运行时）类型检查以检查对象是否真的是子类型的实例。Using`instanceof`是动态类型检查的另一个例子。

当您使用反射 API 时，甚至在您使用泛型时，动态类型检查也会在后台使用。

> 动态类型如何在静态语言上工作？

如果它是一种纯粹的静态类型检查语言，那么它不是。例如，Pascal 是一种具有（纯）静态类型的强类型语言。但大多数现代编程语言至少支持某种程度的运行时类型检查。许多动态类型语言要么具有可选的静态类型，要么具有使用类型推断来获取与类型相关的错误的开发人员工具。

顺便说一句，一种语言既可以是静态类型的，也可以使用类型推断。类型推断应被视为显式类型声明的替代方案，而不是静态类型的替代方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T06:09:41.257

正如其他人指出的那样，动态语言仅意味着某些（通常是所有）类型检查完全在运行时完成。即使在非常静态类型（甚至几乎无类型（x86 机器代码））的环境中，您也可以构建非常动态的语言。

Java 也一直在为动态语言添加越来越多的本地支持。Sun 发表[了一篇很好的概述，说明了这意味着什么以及它如何帮助动态语言在 JVM 上表现良好并让您感到宾至如归](http://www.oracle.com/technetwork/articles/java/dyntypelang-142348.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-10T06:04:32.413

你混淆了语言和架构。一般来说，架构对类型一无所知。动态类型是指对象携带类型信息。您可以将动态类型语言视为只有“Object”类型和大量“instanceof”检查的 Java。

# google-app-engine - Google App Engine Datastore 工作异常

> ID：11407386
> 
> 赞同：0
> 
> 时间：2012-07-10T05:53:30.823
> 
> 标签：google-app-engine, google-cloud-datastore

在检查手机号码是否存在后，我试图将数据存储在 Google App Engine Datastore 中，但即使手机号码在数据库中，代码也始终显示“失败”。它显示失败，但仍将数据存储在 Datastore 中。

请检查这里的代码，让我知道我的错误是什么：

```
String name= request.getParameter("name");
String email=request.getParameter("email");
String mobileno= request.getParameter("mobileno");
String password= request.getParameter("passwd");
String status=""; 
//
Query query = new Query("dailyquizuser");
    query.addFilter("mobileno", Query.FilterOperator.EQUAL, mobileno);
     DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
    PreparedQuery pq = datastore.prepare(query);
    Entity dailyquizuserentity = pq.asSingleEntity();

    out.println("dailyquizuserentity: " + dailyquizuserentity);
    if(dailyquizuserentity != null){
        status="failure";
        out.println(status);

    } else {
        Key dailyquizuserKey = KeyFactory.createKey("dailyquizuser", "dailyquiz");
        Entity  dailyquizuser = new Entity("dailyquizuser", dailyquizuserKey);
        dailyquizuser.setProperty("name",  name);
        dailyquizuser.setProperty("email", email);
        dailyquizuser.setProperty("mobileno", mobileno);
        dailyquizuser.setProperty("password", password);

       DatastoreService datastore1 = DatastoreServiceFactory.getDatastoreService();
        datastore1.put(dailyquizuser);
        out.println("dailyquizuser: " + dailyquizuser);
        status="success";
        out.println(status);

    }

    %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:22:35.473

几点注意事项：

1.  您应该检查`mobileno`变量是否不同`null`（与所有其他必需参数相同）。这可以解释为什么你*总是*找到一个实体 -`null`是一个有效的属性值。使用过滤器查询`null`会找到有`null`属性的实体，但查询没有属性的实体不会找到。

2.  您显示的代码创建具有单亲的实体：

    ```
    // a key to a parent
    Key dailyquizuserKey = KeyFactory.createKey("dailyquizuser", "dailyquiz"); 

    // new entity with a parent
    Entity  dailyquizuser = new Entity("dailyquizuser", dailyquizuserKey); 
    ```

    因此，在搜索“dailyquizuser”时，您应该考虑使用祖先查询。

3.  `addQuery(..)`已弃用。改为使用`setQuery()`。

# performance - Flash 从数字性能中创建逗号

> ID：11407392
> 
> 赞同：0
> 
> 时间：2012-07-10T05:54:28.670
> 
> 标签：performance, flash

我编写了一个将数字拆分为逗号的小函数，但我必须多次运行该数字。你能给我一个更好的方法吗？

```
public static function getCommaString(value:Number):String {
  var stringValue:String = value.toString();
  if (stringValue.length <= 3) {
    return stringValue;
  }
  var i:int = stringValue.length % 3;
  if (i == 0) {
    i = 3;
  }
  for (; i < stringValue.length; i += 4 ) {
    var part1:String = stringValue.substr(0, i);
    var part2:String = stringValue.substr(i, stringValue.length);
    stringValue = part1.concat(",", part2);
  }
  return stringValue;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T04:54:25.603

我整理了一个测试类，用于比较您的解决方案和其他解决方案，包括来自此[博客文章](http://www.cgiinteractive.com/blog/2009/05/formatting-numbers-with-commas-in-as3/)的解决方案和来自此相关[StackExchange 问题](https://stackoverflow.com/questions/721304/insert-commas-into-number-string/)的解决方案，并以一致的方式对它们进行格式化以便于比较：

```
package
{
    public class CommaNumberSolutions
    {   
        public static function commaify( input:Number ):String
        {
            var split:Array = input.toString().split( '.' ),
                front:String = split[0],
                back:String = ( split.length > 1 ) ? "." + split[1] : null,
                n:int = input < 0 ? 2 : 1,
                commas:int = Math.floor( (front.length - n) / 3 ),
                i:int = 1;

            for ( ; i <= commas; i++ )
            {
                n = front.length - (3 * i + i - 1);
                front = front.slice( 0, n ) + "," + front.slice( n );
            }

            if ( back )
                return front + back;
            else
                return front;
        }

        public static function getCommaString( input:Number ):String
        {
            var s:String = input.toString();

            if ( s.length <= 3 )
                return s;

            var i:int = s.length % 3;

            if ( i == 0 )
                i = 3;

            for ( ; i < s.length; i += 4 )
            {
                var part1:String = s.substr(0, i);
                var part2:String = s.substr(i, s.length);
                s = part1.concat(",", part2);
            }

            return s;
        }

        public static function formatNumber( input:Number ):String
        {
            var s:String = input.toString()
            var result:String = ''

            while ( s.length > 3 )
            {
                var chunk:String = s.substr(-3)
                s = s.substr(0, s.length - 3)
                result = ',' + chunk + result
            }

            if ( s.length > 0 )
                result = s + result

            return result
        }

        public static function commaCoder( input:Number ):String
        {
            var s:String = "";
            var len:Number = input.toString().length;

            for ( var i:int = 0; i < len; i++ )
            { 
                if ( (len-i) % 3 == 0 && i != 0)
                    s += ",";

                s += input.toString().charAt(i);
            }
            return s;
        }

        public static function regex1( input:Number ):String
        {
            return input.toString().replace( /-{0,1}(\d)(?=(\d\d\d)+$)/g, "$1," );
        }

        public static function regex2( input:Number ):String
        {
            return input.toString().replace( /-{0,1}\d{1,3}(?=(\d{3})+(?!\d))/g , "$&,")
        }

        public static function addCommas( input:Number ):String
        {
            var negative:String = "";
            if ( input < 0 )
            {
                negative = "-";
                input = Math.abs(input);
            }

            var s:String = input.toString();
            var results:Array = s.split(/\./);
            s = results[0];

            if ( s.length > 3 )
            {
                var mod:Number = s.length % 3;
                var output:String = s.substr(0, mod);
                for ( var i:Number = mod; i < s.length; i += 3 )
                {
                    output += ((mod == 0 && i == 0) ? "" : ",") + s.substr(i, 3);
                }

                if ( results.length > 1 )
                {
                    if ( results[1].length == 1 )
                        return negative + output + "." + results[1] + "0";
                    else
                        return negative + output + "." + results[1];
                }
                else
                    return negative + output;
            }
            if ( results.length > 1 )
            {
                if ( results[1].length == 1 )
                    return negative + s + "." + results[1] + "0";
                else
                    return negative + s + "." + results[1];
            }
            else
                return negative + s;
        }
    }
} 
```

[您可以在我的另一个答案](https://stackoverflow.com/questions/721304/insert-commas-into-number-string/13410560#13410560)中看到更详细的分析，但您可以比较每个解决方案的紧凑性并将其与它们的准确性和性能进行权衡，但是为了简洁起见，这个解决方案是最准确和性能最好的（尽管不是最紧凑的） ：

```
public function commaify( input:Number ):String
{
    var split:Array = input.toString().split( '.' ),
        front:String = split[0],
        back:String = ( split.length > 1 ) ? "." + split[1] : null,
        n:int = input < 0 ? 2 : 1,
        commas:int = Math.floor( (front.length - n) / 3 ),
        i:int = 1;

    for ( ; i <= commas; i++ )
    {
        n = front.length - (3 * i + i - 1);
        front = front.slice( 0, n ) + "," + front.slice( n );
    }

    if ( back )
        return front + back;
    else
        return front;
} 
```

# java - 如何从变量中设置 jspinner 最大值？

> ID：11407394
> 
> 赞同：1
> 
> 时间：2012-07-10T05:54:42.147
> 
> 标签：java, swing, jspinner

我有几个`jspinners`，它们是：`min char`、`max cha`r、`min low char`等。现在我需要将 、等`min up chars`的最大值设置为`min low char`，但模型不允许任何变量设置任何模型值。那么我该怎么做才能将这些微调器的最大值设置为.`min up char``max chars``jspinner``max char`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:16:18.997

SpinnerNumberModel 具有 setMaximum 和 setMinimum 方法。您可以向微调器询问它的模型，如果它是 SpinnerNumberModel 的实例，则将其转换。

否则，您可以首先保留对用于填充微调器的原始模型的引用并相应地更新它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:02:18.567

您可以`getMaximum`使用匿名模型类覆盖以使其引用父类型的成员。例如

```
JSpinner minChar = new JSpinner(new SpinnerNumberModel() {
  @Override
  public Comparable<Integer> getMaximum() {
    return maximum;
  }
}); 
```

# android - 活动将运行，但不显示（Android）？

> ID：11407397
> 
> 赞同：1
> 
> 时间：2012-07-10T05:54:54.000
> 
> 标签：android, layout, android-activity

我只是想用闪屏测试一些东西。最奇怪的事情发生在我运行应用程序时。我可以在 LogCat 中看到我的日志消息，但活动本身不会显示。一旦循环完成，它就会开始下一个活动，实际上它确实出现了。如果我注释掉 UIThread，它会显示出来。我知道我做错了一些简单的事情，但我不确定它是什么。想法？

XML:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" 
android:background="#000000">

<ImageView
    android:id="@+id/logoIV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="50dp"
    android:paddingTop="50dp"
    android:src="@drawable/logoa"
/> 
```

爪哇：

```
public class Splash extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.splash);

    final ImageView logo = (ImageView) findViewById(R.id.logoIV);
    final int[] anim = new int[6];

    anim[0]=R.drawable.logoa;
    anim[1]=R.drawable.logob;
    anim[2]=R.drawable.logoc;
    anim[3]=R.drawable.logod;
    anim[4]=R.drawable.logoe;
    anim[5]=R.drawable.logof;

    runOnUiThread(new Runnable() {
        int img = 0, counter=0;
        boolean up = true;
         public void run() {
            while(counter<21){
                logo.setImageResource(anim[img]);
                if(up){
                    img++;
                    if(img>=5)
                        up=false;
                }else{
                    img--;
                    if(img<=0)
                        up=true;
                }
                try{
                    Thread.sleep(150);
                }catch (InterruptedException e){
                    e.printStackTrace();
                }
                counter++;
                Log.e("Tag",Integer.toString(counter));
            }
            if(counter>=21){
                Intent creditsIntent = new Intent(Splash.this, TitlePage.class);
                creditsIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                Splash.this.startActivity(creditsIntent);
            }
        }
    });
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:03:22.127

像这样更改您的 oncreate 方法

```
protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.splash);

        final ImageView logo = (ImageView) findViewById(R.id.logoIV);
        final int[] anim = new int[6];

        anim[0] = R.drawable.logoa;
        anim[1] = R.drawable.logob;
        anim[2] = R.drawable.logoc;
        anim[3] = R.drawable.logod;
        anim[4] = R.drawable.logoe;
        anim[5] = R.drawable.logof;

        Thread t = new Thread(new Runnable()
        {
            int img = 0, counter = 0;
            boolean up = true;

            @Override
            public void run()
            {
                while (counter < 21)
                {
                    runOnUiThread(new Runnable()
                    {
                        public void run()
                        {
                            logo.setImageResource(anim[img]);
                        }
                    });

                    if (up)
                    {
                        img++;
                        if (img >= 5)
                            up = false;
                    }
                    else
                    {
                        img--;
                        if (img <= 0)
                            up = true;
                    }
                    try
                    {
                        Thread.sleep(150);
                    }
                    catch (InterruptedException e)
                    {
                        e.printStackTrace();
                    }
                    counter++;
                    Log.e("Tag", Integer.toString(counter));
                }
                if (counter >= 21)
                {
                    runOnUiThread(new Runnable()
                    {
                        public void run()
                        {
                            Intent creditsIntent = new Intent(Splash.this, TitlePage.class);
                            creditsIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            Splash.this.startActivity(creditsIntent);
                        }
                    });
                }
            }
        });

        t.start();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:04:08.780

而不是直接调用`runOnUiThread`执行以下操作：

```
new Timer().schedule(new TimerTask()
{           
    @Override
    public void run()
    {
        runOnUiThread(new Runnable()
        {
            int img = 0, counter=0; 
            .....
        }
    }
}, 1000); 
```

我不确定您的动画是否会起作用，但您的活动肯定会出现。

# wpf - 如何在标记符号的控制模板中访问控制

> ID：11407398
> 
> 赞同：1
> 
> 时间：2012-07-10T05:54:55.187
> 
> 标签：wpf, arcgis, esri

我正在尝试向 esri 地图添加自定义控件。为此，我正在使用标记符号，现在我必须从位于标记符号的 controltemplate 中的代码访问“eventsRadial1”控件。我怎样才能做到这一点？

```
<esri:MarkerSymbol x:Key="EventsRadialSymbol">
                <esri:MarkerSymbol.ControlTemplate>
                    <ControlTemplate>
                        <my:EventsRadial HorizontalAlignment="Left" Margin="15,15,0,0"                 
                        x:Name="eventsRadial1" VerticalAlignment="Top"/>                   
                    </ControlTemplate>
                </esri:MarkerSymbol.ControlTemplate>
</esri:MarkerSymbol> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:32:24.980

我不知道你是否解决了这个问题，但我一直在努力解决同样的问题并想出了一个解决方案。

首先创建一个您自己的自定义标记符号，如下面的代码：

```
public class TextBoxMarkerSymbol : MarkerSymbol
{
    public static readonly DependencyProperty ContentTextProperty = DependencyProperty.Register("ContentText", typeof(string), typeof(TextBoxMarkerSymbol), new PropertyMetadata(OnTextChanged));
    //private string contentText;
    public string ContentText
    {
        get { return (string)GetValue(ContentTextProperty); }
        set { SetValue(ContentTextProperty, value); }
    }

    private static void OnTextChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {

    }

    public TextBoxMarkerSymbol(int width, int height)
    {

        string template = "<ControlTemplate " +
                            "xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'>" +
                            "<Canvas>";
        template += "<TextBox Name='txtText' Text='{Binding Symbol.ContentText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}'  Height='" + height + "' Width='" + width + "' />";
        template += " </Canvas>" +
        "</ControlTemplate>";

        System.IO.MemoryStream templateStream = new System.IO.MemoryStream(System.Text.UTF8Encoding.Default.GetBytes(template));
        this.ControlTemplate = System.Windows.Markup.XamlReader.Load(templateStream) as ControlTemplate;

    }
} 
```

诀窍在于您无法直接访问您的控件，因为标记控件不是可视的。

所以你必须为你的控件属性定义依赖属性，这样你就可以使用 Symbol 来绑定它们。

然后你可以使用你的符号如下代码：

```
 TextBoxMarkerSymbol mSymbol = new TextBoxMarkerSymbol(width, height);
                mSymbol.OffsetX = width / 2;
                mSymbol.OffsetY = height / 2;
                mSymbol.ContentText = "test binding"; 
```

祝你今天过得愉快。

# java - 如何调试挂起的 Java 线程？

> ID：11407405
> 
> 赞同：9
> 
> 时间：2012-07-10T05:55:34.280
> 
> 标签：java, multithreading, debugging, tomcat

我有以下问题：
我在 Tomcat (Linux) 中部署了一个 Web 应用程序，并且在关闭 Tomcat 之后，如果我这样做了，`ps -ef`我仍然可以看到该`java`进程正在运行。
我相信这是由于一些挂起的线程而发生的，但我不知道如何追踪这个线程。
我该如何调试这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T06:01:09.493

您可以生成 4-5 个线程转储，如下所述，然后使用[Samurai](http://yusuke.homeip.net/samurai/en/index.html)等工具对其进行分析。

您要检查的是，当发生卡住线程或长时间运行的事务时，所有线程转储都会显示某个线程 id 在您的 java 堆栈跟踪中的同一行。简单来说，事务跨越多个线程转储，因此需要更多调查。

现在，当您通过[Samurai](http://yusuke.homeip.net/samurai/en/index.html)运行这些内容时，它会以红色突出显示这些内容，以便您可以快速单击它并找到显示问题的行。

[请参阅此处](http://jojovedder.blogspot.de/2009/01/app-server-high-cpu-or-low-threads.html)的示例。查看该链接中的 Samurai 输出图像。绿色细胞很好。红色和灰色单元格需要查看。

**生成线程转储：**

**(Linux)**

如果 JVM 在控制台中运行，则只需按`Ctrl-\`。如果 JVM 在后台运行，则向其发送 QUIT 信号：

`kill -QUIT process_id`

其中 process_id 是正在运行的 Java 进程的进程号。线程转储也将被发送到标准输出被重定向的任何地方。您通常可以使用以下命令获取所有正在运行的 Java 进程的进程号：

`ps axf | grep java`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:10:21.867

你说你的java进程还在，对吧？只要附加了线程，进程就存在，对吗？如果是这样，我会采用以下方法： - 运行带有 MBean 服务器的进程，并由 JVM 在内部进行管理

然后在发送 QUIT 信号后连接到进程并获取线程转储（应该有一个 JMX。看看哪些线程对你来说看起来很可疑。

我认为您也可以使用 JVisualVM 进行线程转储...

# java - 如何在没有 IDE 的情况下导入 SwingX

> ID：11407417
> 
> 赞同：3
> 
> 时间：2012-07-10T05:56:08.737
> 
> 标签：java, import, package, external, swingx

这是我的第一篇文章，所以请不要咬我的头！

我发现了这个： [Java - 如何导入外部包？](https://stackoverflow.com/questions/9153261/java-how-to-import-external-packages)

还有这个： [如何在不使用 IDE 的情况下在 java 中包含库](https://stackoverflow.com/questions/5112607/how-to-include-libraries-in-java-without-using-an-ide)

但我还是迷路了！

我已将文件 swingx-1.6.zip 下载到我的 ~/Downloads 文件夹（ubuntu），然后将其解压缩，所以我现在有 ~/Downloads/swingx-1.6 在此文件夹中是 swingx-1.6.jar 似乎有我想要的类(JXPanel)

然后我在终端中运行它： `javac -classpath :~/Downloads/swingx-1.6/swingx-1.6.jar Panels.java` Panels.java 是（或即将）依赖于 JXPanel 的类文件。

我得到了编译错误！

```
Panels.java:6: package org.jdesktop.swingx does not exist
import org.jdesktop.swingx.JXPanel;
                      ^
1 error 
```

我的问题是：我是否在`-classpath`命令中包含了正确的文件？我是否使用了正确的`import`命令？...

对不起，我是个菜鸟，我真的不想迁移到 IDE。我刚刚掌握了我现在所处的位置，大声笑提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:29:57.363

您的导入似乎是正确的。我怀疑您的问题是开头的“：”。':' 只需要作为分隔符，并且将其放在路径的开头可能会使编译器感到困惑。试试不带':'。

老实说，如果您正在学习 java，IDE 将使该过程更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:17:12.353

我认为您需要删除“：”并使用完整路径，而不是 ~/，因为某些软件无法解决它。

# jquery - 使用 jQuery 将按下 Enter 链接到单击按钮

> ID：11407420
> 
> 赞同：6
> 
> 时间：2012-07-10T05:56:29.650
> 
> 标签：jquery

我在模态表单上有一些按钮：

```
<div class="block-footer align-right">
<button type="button">Submit</button>
<button type="button">Submit &amp; Close</button>
<button type="button">Close</button>
</div> 
```

我怎样才能做到这一点，当用户单击 Enter 键时，“提交”按钮中的第一个被“单击”。对于单击操作很重要，因为我希望用户在单击时可以直观地看到按钮的颜色变化。

请注意，我已经执行了以下操作并将函数的执行绑定到该按钮：

```
$('#modal button:contains("Submit")').click(function () {
    submitHandler(dObj.$link, $('#main-form'), false);
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T06:01:16.080

这将检测到“Enter”键按下

```
$(document).keypress(function(event){

    var keycode = (event.keyCode ? event.keyCode : event.which);
    if(keycode == '13'){
        $('#Submit').click();   
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T05:59:55.607

如何处理 submit() 呢？

```
$('form#id').submit(function(){

    //some validation

    return false; //dont allow submit
}); 
```

# sql-server - 如何使用 VB.NET 在不在本地范围内的类级连接上声明连接对象？

> ID：11407425
> 
> 赞同：-1
> 
> 时间：2012-07-10T05:57:23.067
> 
> 标签：sql-server, vb.net

我得到了错误：

> 填充：SelectCommand.Connection 属性尚未初始化。

我认为这是因为我声明我的数据集不是在里面`private sub` 而是在`public class`......但是我需要在程序中多次使用不同的数据集`private sub`......我应该如何定义它？非常感谢。

```
Imports System.Data
Imports System.Data.SqlClient
Public Class Form1
Dim con As SqlConnection
Dim strsql As String
Dim da As New SqlDataAdapter(strsql, con)
Dim ds As New DataSet()
Dim strcon As String
Dim newmode As Boolean
Dim newrow As DataRow
Dim cb As SqlCommandBuilder

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    newmode = False
    'Dim con As SqlConnection
    'Dim strsql As String
    con = New SqlConnection("initial catalog=test;data source=nazi;integrated security=sspi;")
    strsql = "select*from table_1"
    con.Open()
    'Dim da As New SqlDataAdapter(strsql, con)
    'Dim ds As New DataSet()

    da.Fill(ds, "dd")

    TextBox1.DataBindings.Add(New Binding("text", ds, "dd.tel"))
    TextBox2.DataBindings.Add(New Binding("text", ds, "dd.nam"))
    TextBox3.DataBindings.Add(New Binding("text", ds, "dd.address"))
    da.update(ds, "dd")
    con.Close()
End Sub

Private Sub empty()
    textrecord.text = ""
    TextBox1.text = ""
    TextBox2.text = ""
    TextBox3.text = ""
    TextBox4.text = ""
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    newrow = ds.Tables("dd").NewRow
    newmode = True
    textrecord.BackColor = Color.Red
    textrecord.Text = "new record"
    MsgBox("enter new record and press save")
    Call empty()
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:02:27.763

代替：

```
Dim con As SqlConnection 
```

尝试添加`New`：

```
Dim con As New SqlConnection("initial catalog=test;...") 
```

但是，最佳做法是仅在需要之前打开连接，然后立即关闭它。连接应该是块中的局部变量[，`Using`而](http://msdn.microsoft.com/en-us/library/htd05whh%28v=vs.80%29.aspx)不是类变量！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:30:38.347

您在此行的全局级别创建 DataAdapter

```
Dim da As New SqlDataAdapter(strsql, con) 
```

但是此时您的 strsql 是空的，如果您之后更改它，它不会在 dataadatpter 内部更改，因此会出现错误消息。

如果您坚持保留所有全局变量（并且正如@Andomar 在答案中指出的那样，这被认为是一种不好的做法），那么您应该确保在使用之前使用正确的 sqlstring 创建 DataAdapter：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load     
    newmode = False     
    con = New SqlConnection("initial catalog=test;data source=nazi;integrated security=sspi;") 
    strsql = "select*from table_1"     
    con.Open()     
    da = New SqlDataAdapter(strsql, con) '<- added this line here '  
    da.Fill(ds, "dd")      
    ....
    con.Close() 
End Sub 
```

# iphone - 为 MKAnnotation 设置图像

> ID：11407427
> 
> 赞同：2
> 
> 时间：2012-07-10T05:57:37.283
> 
> 标签：iphone, objective-c, mkmapview, mkannotation

我使用以下代码在我的地图视图中添加了 MKAnnotation。

```
Flag *flag = [[Flag alloc] init]; 
flag.title = @"Golf Course";
flag.subtitle = @"Green"; 
flag.coordinate =CLLocationCoordinate2DMake(28.457394,77.108667);
[mapView addAnnotation:flag]; 
```

并且正在设置图像

```
 -(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:
 (id <MKAnnotation>)annotation 
 {
   if(([annotation isKindOfClass:[Flag class]])) 
   {
      MKPinAnnotationView *pinView = nil; 
      if(annotation != mapView.userLocation) 
      {
        static NSString *defaultPinID = @"PinId1";
        pinView = (MKPinAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinView == nil ) pinView = [[[MKPinAnnotationView alloc]
                                          initWithAnnotation:annotation reuseIdentifier:@"pin1"] autorelease];

        //pinView= [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"pin1"];

        pinView.canShowCallout = YES;
               pinView.draggable = YES;
        [pinView setImage:[UIImage imageNamed:@"flag2.png"]];

     } 
     else 
     {
        [mapView.userLocation setTitle:@"I am here"];
     }

   }
    return pinView;
 } 
```

但我没有得到 MKAnnoation 的图像。我在做什么错？请帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T06:05:51.783

我有同样的问题。现在使用下面给出的工作版本。

```
- (MKAnnotationView *)mapView:(MKMapView *)theMapView viewForAnnotation:(id <MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    if ([annotation isKindOfClass:[Annotation class]])
    {
        static NSString* SFAnnotationIdentifier = @"SFAnnotationIdentifier";
        MKPinAnnotationView* pinView =
        (MKPinAnnotationView *)[self.mapView dequeueReusableAnnotationViewWithIdentifier:SFAnnotationIdentifier];
        if (!pinView)
        {
            MKAnnotationView *annotationView = [[[MKAnnotationView alloc] initWithAnnotation:annotation
                                                                             reuseIdentifier:SFAnnotationIdentifier] autorelease];
            annotationView.canShowCallout = YES;

            UIImage *flagImage = [UIImage imageNamed:@"map_pin.png"];

            CGRect resizeRect;

            resizeRect.size = flagImage.size;
            CGSize maxSize = CGRectInset(self.view.bounds,
                                         10.5,
                                         10.5).size;
            maxSize.height -= self.navigationController.navigationBar.frame.size.height + 40.0;
            if (resizeRect.size.width > maxSize.width)
                resizeRect.size = CGSizeMake(maxSize.width, resizeRect.size.height / resizeRect.size.width * maxSize.width);
            if (resizeRect.size.height > maxSize.height)
                resizeRect.size = CGSizeMake(resizeRect.size.width / resizeRect.size.height * maxSize.height, maxSize.height);

            resizeRect.origin = (CGPoint){0.0f, 0.0f};
            UIGraphicsBeginImageContext(resizeRect.size);
            [flagImage drawInRect:resizeRect];
            UIImage *resizedImage = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();

            annotationView.image = resizedImage;
            annotationView.opaque = NO;

            UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

            Annotation *annoterObject = (Annotation *) annotation;

            rightButton.tag = annoterObject.annoteCount;

            [rightButton addTarget:self
                            action:@selector(showDetails:)
                  forControlEvents:UIControlEventTouchUpInside];
            annotationView.rightCalloutAccessoryView = rightButton;

            return annotationView;
        }
        else
        {
            pinView.annotation = annotation;
        }
        return pinView;
    }

    return nil;

} 
```

这是工作代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:51:45.513

你必须在哪里设置图像？是在标注上吗？如果是，则替换 `[pinView setImage:[UIImage imageNamed:@"flag2.png"]];`为`pinView.leftCalloutAccessoryView = [[ UIImageView alloc]initWithImage:[UIImage imageNamed:@"flag2.png"]];`

# php - CURL POSTFIELD 在 id 或 name 中传递值？

> ID：11407431
> 
> 赞同：1
> 
> 时间：2012-07-10T05:57:51.350
> 
> 标签：php, curl, libcurl

我现在编写一个简单的登录，使用 curl 从站点获取自定义登录信息。

```
$url2="https://192.168.1.4/j_security_check";
$PostData = "user=abc&password=123";
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $PostData); 
```

我想使用上面的代码将数据传递给 j_security_check 页面。

我想问的问题是......当数据传递到其他页面时，它会通过id或这种输入类型的名称传递吗？（文本框字段）？？

在这种情况下，“用户”和“密码”都是文本框 ID。文本框的名称是“j_user”和“j_password”。

另外，我尝试同时传递 id 和 name，但都没有成功，并且在登录时返回我失败。我确保登录名和密码都是正确的。

我的方法是将登录名和密码传递给身份验证页面（j_security_check），然后它会自动确认登录名和密码然后登录。

由于我是 curl 的新手，我的方法或考虑是否有任何错误？

非常感谢大家！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:06:03.283

文本框字段的名称（不是 id）应该识别发布的值。

# iphone - 更改单元格中detailtextlabel 的位置？

> ID：11407434
> 
> 赞同：6
> 
> 时间：2012-07-10T05:58:03.097
> 
> 标签：iphone, ios, ipad

我有一个 Iphone 应用程序，我在其中组合两个数组并显示在同一个表中。这里的问题是我无法更改单元格中详细文本标签的位置。这是我的代码片段`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
        UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"cell_with_arrow.png"]];
        [cell setBackgroundView:img];
        [img release];        
    }
    if(newssarray==nil||[newssarray count]==0)
    {            
    }
    else
    {
        NSDictionary *dicttable=[newssarray objectAtIndex:indexPath.row];
        head=[dicttable objectForKey:@"news"];
        head1=[dicttable objectForKey:@"name"];
        NSString *sub=[dicttable objectForKey:@"created"];

        NSLog (@"%@",head);

        [[cell viewWithTag:12] removeFromSuperview];
        [[cell viewWithTag:13] removeFromSuperview];
         [[cell viewWithTag:14] removeFromSuperview];

        UIButton *shopLabel=[self buttonWithText:head andFrame:CGRectMake(49, 12, 250,5)] ;
        shopLabel.tag=12;
        //shopLabel.autoresizingMask=UIViewAutoresizingFlexibleRightMargin;
        [shopLabel addTarget:self action:@selector(openRestaurantsList) forControlEvents:UIControlEventTouchUpInside];

        UIButton *shopLabel1=[self buttonWithText:head1 andFrame:CGRectMake(49, 12, 250,5)] ;
        shopLabel1.tag=14;
        //shopLabel.autoresizingMask=UIViewAutoresizingFlexibleRightMargin;
        [shopLabel1 addTarget:self action:@selector(openRestaurantsList) forControlEvents:UIControlEventTouchUpInside];
        cell.detailTextLabel.frame = CGRectMake(49, 30, 150,5);
        if(indexPath.row < [newsseperatearray count])
        {
            UIImage *cellImage = [UIImage imageNamed:@"news.png"];
            cell.imageView.image = cellImage;
            //NSStringEncoding encoding=NSASCIIStringEncoding;
            cell.imageView.frame=CGRectMake(0,0,48,48);
            cell.imageView.bounds=CGRectMake(0,0,48,48);
            [cell.imageView setClipsToBounds:NO];
            NSLog(@"%@",sub);                     
            cell.detailTextLabel.text = sub;
            cell.detailTextLabel.backgroundColor = [UIColor clearColor];
        }
        else
        {
            UIImage *cellImage = [UIImage imageNamed:@"menu_icon.png"];
            cell.imageView.image = cellImage;
            //NSStringEncoding encoding=NSASCIIStringEncoding;
            cell.imageView.frame=CGRectMake(0,0,48,48);
            cell.imageView.bounds=CGRectMake(0,0,48,48);
            [cell.imageView setClipsToBounds:NO];
        }
        [cell addSubview:shopLabel];
        [cell addSubview:shopLabel1];
        // [cell addSubview:shopLabel2];
    }
    return cell;
} 
```

`任何人都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T06:01:45.190

创建一个 UITableViewCell 子类，将该单元格样式保持为`UITableViewCellStyleSubtitle`，并在该子类中覆盖`layoutSubviews`。然后您可以更改框架`detailTextLabel`（只需确保`layoutSubviews`在您的方法中调用超级实现）。

# c# - 获取表格内的文本

> ID：11407435
> 
> 赞同：1
> 
> 时间：2012-07-10T05:58:06.107
> 
> 标签：c#, asp.net, html-parsing, html-agility-pack

我有一张这样的桌子。我想从 td 标签之间获取文本 FOO COMPANY。我怎么才能得到它？

```
<table class="left_company">
    <tr>
        <td style="BORDER-RIGHT: medium none; bordercolor="#FF0000" align="left" width="291" bgcolor="#FF0000">
            <table cellspacing="0" cellpadding="0" width="103%" border="0">
                <tr style="CURSOR: hand" onclick="window.open('http://www.foo.com')">
                    <td class="title_post" title="FOO" valign="center" align="left" colspan="2">
                        <font style="font-weight: 700" face="Tahoma" color="#FFFFFF" size="2">***FOO COMPANY***</font>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
<table> 
```

我正在使用以下代码，但 nS 为空。

```
doc = hw.Load("http://www.foo.aspx?page=" + j);
foreach (HtmlNode link in doc.DocumentNode.SelectNodes("//table[@class='left_company']"))
{
nS = doc.DocumentNode.SelectNodes("//td[@class='title_post']");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:03:28.730

您调用的页面可能会使用 JavaScript 生成感兴趣的内容。HtmlAgilityPack 不执行 JavaScript，因此无法提取内容。确认这一点的一种方法是尝试在关闭脚本的情况下访问页面，并尝试查看您感兴趣的元素是否仍然存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:11:16.163

```
var text = doc.DocumentNode.Descendants()
                .FirstOrDefault(n => n.Attributes["class"] != null && 
                                n.Attributes["class"].Value == "title_post")
                .Element("font").InnerText; 
```

或者

```
var text2 = doc.DocumentNode.SelectNodes("//td[@class='title_post']/font")
               .First().InnerText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:05:09.007

关闭：`nS = doc.DocumentNode.SelectNodes("//td[@class='title_post']//text()");`

然后您可以打开 nS 节点来检索文本。如果有多个文本节点，则需要遍历它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T06:06:11.807

向字体元素插入一些属性，例如 company="FOO"

然后使用 jquery 来获取该元素

```
alert($('font[company="FOO"]').html()) 
```

像[这样](http://jsfiddle.net/hhxuH/)

干杯

# html - 批处理文件将<>写入文本文件

> ID：11407438
> 
> 赞同：3
> 
> 时间：2012-07-10T05:58:16.990
> 
> 标签：html, batch-file, text-files

这是我第一次做这些事情。基本上我正在为教堂歌曲创建一个批处理文件 html 制作器。这就是我所坚持的：

```
echo <br> %var17% >>Runfiles\temporary2.txt 
```

基本上 var 17 是一行歌词，我想在它前面添加一个换行符。我将模板制作器分为三个部分：

*   上半场
*   歌词
*   下半场

这是代码：

```
@echo off
copy "I:\Build\Files\*.txt"

ren *.txt temp.txt

setlocal ENABLEDELAYEDEXPANSION
set vidx=0
for /F "tokens=*" %%A in (temp.txt) do (
SET /A vidx=!vidx! + 1
set var!vidx!=%%A
)
set var

echo <br> %var17% >>Runfiles\temporary2.txt

TYPE Runfiles\temp1.txt > run.html  
TYPE temp.txt >> run.html
TYPE Runfiles\temp2.txt >> run.html
pause 
```

临时 1 是开始，临时 2 是结束，所以我有一个歌词文档，我想`<br>`在它们前面插入一个元素。

原因是我有大约 100 首歌曲要处理，而且手动处理需要很长时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T06:01:23.987

```
echo ^<br^> 
```

Circumflex 是 DOS/Win 命令行中的转义字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:21:36.163

SilverbackNet 具有转义特殊字符（如`<`和）的正确答案`>`。但建立一个包含 HTML 标记的变量可能更方便。如果特殊字符被引用或使用延迟扩展进行扩展，则不需要对其进行转义。定义使用引号，扩展使用延迟扩展。

仅当您需要在多个位置编写标签时，使用该变量才具有优势。

```
set "br=<br>"
....
echo !br! %var17% >>Runfiles\temporary2.txt 
```

# c# - DataGridView 中的列顺序在运行时更改

> ID：11407440
> 
> 赞同：8
> 
> 时间：2012-07-10T05:58:38.720
> 
> 标签：c#, visual-studio-2008, datagridview

**DataGridView**有 7 列带有标题（**ID、TITLE、AUTHOR、GENRE、PRICE、PUBLISH、DESCRIPTION**）。在来自 xml 文件的 datagridview 中的数据上，两列的顺序发生了变化，新的顺序是（**ID、AUTHOR、TITLE、GENRE、PRICE、PUBLISH、DESCRIPTION**）。这背后的原因是什么？

从 xml 文件中读取

```
Application.DataSet dsFileData = new DataSet("Books"); 
dsFileData.ReadXml(lSoruceFile); 
dgvBooksDetails.DataSource = dsFileData; 
dgvBooksDetails.DataMember = "book"; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T06:01:31.740

您需要将`AutoGenerateColumns`属性设置为 false。

# facebook - 使用 Open Graph 从页面中删除选项卡（应用程序）

> ID：11407442
> 
> 赞同：1
> 
> 时间：2012-07-10T05:58:52.020
> 
> 标签：facebook, facebook-opengraph

是否可以使用 Open Graph 从页面中删除应用程序？

从官方文档中他们说这是可能的：[https ://developers.facebook.com/docs/reference/api/page/#tabs](https://developers.facebook.com/docs/reference/api/page/#tabs)

但是当我将它与图形资源管理器上的**删除**一起使用时：graph.facebook.com/128003037303086/tabs/app_333139666735547

我收到此错误：

{ "error": { "message": "(#210) 主题必须是页面。", "type": "OAuthException", "code": 210 } }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:16:33.023

来自：http: [//developers.facebook.com/blog/post/524/](http://developers.facebook.com/blog/post/524/)

Graph API Explorer 让您可以轻松地以交互方式阅读和更新您的页面设置。如果您收到“主题必须是页面”错误，则您可能没有使用页面访问令牌进行请求。

# android - yamba 时间线.db 未创建

> ID：11407446
> 
> 赞同：0
> 
> 时间：2012-07-10T05:59:08.457
> 
> 标签：android, database, sqlite

我正在阅读“Learning Android”一书，目前是数据库章节

我已经完成了书中提到的所有事情，但是我无法在文件资源管理器的数据/数据中找到文件'timeline.db'，我无法找到我出错的地方。（应用程序不返回任何错误并成功发布状态消息）

任何信息都会有帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:02:38.853

我认为您正在真实设备上进行测试？

`data/data`由于安全原因，您无法在真实设备上看到内容。如果你想看到它，你可以测试`AVD`

# python - Gtk.Treeview 在 Python 中获取当前行索引

> ID：11407447
> 
> 赞同：8
> 
> 时间：2012-07-10T05:59:28.877
> 
> 标签：python, gtk, pygtk, gtktreeview

如何在 Python 中获取 Gtk.TreeView 中当前选定行的索引？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2019-01-23T00:35:27.713

一般来说，另一个答案可能更有用。但是，要回答 OP 提出的实际问题，如何获取行索引：假设选择了一行，您可以通过以下方式获取它：

```
index = treeview.get_selection().get_selected_rows()[1][0][0] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T08:25:48.373

您可以调用[`gtk.TreeView.get_selection`](http://www.pygtk.org/docs/pygtk/class-gtktreeview.html#method-gtktreeview--get-selection)以获取当前选择 ( `gtk.TreeSelection`)。然后，您可以致电[`gtk.TreeSelection.get_selected`](http://www.pygtk.org/docs/pygtk/class-gtktreeselection.html#method-gtktreeselection--get-selected)获取：

> 包含对 gtk.TreeModel 的引用和指向当前选定节点的 gtk.TreeIter 的 2 元组。

iter 可用于 a `gtk.TreeModel`(通过调用 获得[`gtk.TreeView.get_model`](http://www.pygtk.org/docs/pygtk/class-gtktreeview.html#method-gtktreeview--get-model)。然后您可以使用它[`gtk.TreeModel.get_value`](http://www.pygtk.org/docs/pygtk/class-gtktreemodel.html#method-gtktreemodel--get-value)来获取树中该位置的节点的任何列值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-17T11:13:43.553

有点晚了，可能不太相关，但是如果您双击所选行，您将获得行索引作为 TreePath 元组的元素，就像这样

```
 def on_row_activated(self, treeview, path, column):
        model = self.treeview.get_model()
        tree_iter = model.get_iter(path)
        row = path[0]
        if tree_iter:
            # here you can get the values of the columns 
```

# f# - 默认开放系统和其他有用的命名空间

> ID：11407467
> 
> 赞同：3
> 
> 时间：2012-07-10T06:01:26.627
> 
> 标签：f#

fsi.exe（F# 交互式）是否有配置文件。以便在配置文件中我可以默认打开像 System 这样的命名空间？

今天启动 fsi.exe 后，我总是要打开系统；；手动！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:14:48.063

我认为你可以使用

```
fsi.exe --load startupscript.fsx 
```

[http://msdn.microsoft.com/en-us/library/dd233172.aspx](http://msdn.microsoft.com/en-us/library/dd233172.aspx)

[http://msdn.microsoft.com/en-us/library/dd233175.aspx](http://msdn.microsoft.com/en-us/library/dd233175.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T16:21:59.263

启动.fs：
`open System`

**fsi --use:startup.fs**

# ruby-on-rails - 在 ruby +rails 中查找和替换，包括标签

> ID：11407469
> 
> 赞同：0
> 
> 时间：2012-07-10T06:01:33.027
> 
> 标签：ruby-on-rails

我有一个与显示的字符串匹配的单词列表。字符串中匹配的单词应该放在它们自己的`<b>`标签中。

首先，`gsub`在红宝石中查找+替换的最佳方法是什么？我不需要完整的正则表达式功能，只需要子字符串匹配。

其次，rails 不会逃脱我试图作为字符串插入显示内容的任何标签吗？我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:07:24.673

我猜你正在寻找[`highlight`帮助](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-highlight)者：

```
highlight('You searched for: rails', 'rails')
# => You searched for: <strong class="highlight">rails</strong> 
```

有关更多选项，请参阅链接。

# javascript - GWT History.back() 没有触发 onValueChangeHandler

> ID：11407470
> 
> 赞同：2
> 
> 时间：2012-07-10T06:01:34.550
> 
> 标签：javascript, gwt, browser-history

我的 GWT 应用程序中有一个 Previous 按钮，我附加了一个调用**History.back()**的事件处理程序。

```
eventBus.addHandler(PrevEvent.TYPE, new PrevEventHandler() {
        public void onNext(PrevEvent prevEvent) {
            History.back();
            System.out.println("Token is" +History.getToken());

        }
    }); 
```

触发事件时，我可以看到浏览器中的 URL 令牌正在更改，但**History.getToken()**正在打印最近的令牌本身。例如，如果令牌是按#A、#B、#C 的顺序添加的**，**当我在**#C**中单击上一个时，URL 会更改为**#B**，但getToken 会显示它的**#C。** 我认为这导致没有调用**onValueChange**方法的问题，因此我的应用程序保持不变。

当我尝试使用浏览器的后退按钮时也会观察到同样的情况。我正在使用 firefox，但在其他浏览器中的行为没有什么不同。

可能是什么原因？

我的看法是**History.back()**也会触发**onValueChange()**，现在看来只有**History.newItem()**才能完成这项工作。如果我错了，请纠正我。我很困惑。那我该如何处理**之前**的 按钮事件呢？

```
 eventBus.addHandler(PrevEvent.TYPE, new PrevEventHandler() {
        public void onNext(PrevEvent prevEvent) {
            History.back();
            System.out.println("Token is" +History.getToken());
            doPrev();
        }
    });

    private void doPrev(){
       System.out.println("Calling Previous Method");
 } 
```

在我的应用程序的某处，我的代码与当前历史令牌#Step3 触发了上一个事件。因此，当涉及到上一个事件时，我执行 History.back() 并且我希望令牌回到 #Step2 并且我有这样的 onValueChange 方法，

```
 public void onValueChange(ValueChangeEvent<String> event) {

    String token = event.getValue();

    if(token != null){
         presenter = null;

    if(token == "step1")
    {
        System.out.println("Step 1");
        //do Something

    }
    else if(token == "step2")
    {
        System.out.println("Step 2");
                    //do Something      
    }
            else if(token == "step3")
    {
        System.out.println("Step 3");
                    //do Something      
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:21:16.387

看起来 History.back() 需要很长时间（字面意思很长，大约 lOO 毫秒 :)）

我写了一些代码来测试它：

```
 public void onModuleLoad()
{
    History.newItem("A");
    History.newItem("B");
    History.newItem("C");
    RootPanel.get().add(new Button("back", new ClickHandler()
    {

        @Override
        public void onClick(
            ClickEvent event)
        {
            System.out.println("After back click token is " + History.getToken());
            History.back();
            new Timer()
            {

                @Override
                public void run()
                {
                    System.out.println("After 100 millis token is " + History.getToken());
                }
            }.schedule(100);
        }
    }));
    History.addValueChangeHandler(new ValueChangeHandler<String>()
    {

        @Override
        public void onValueChange(
            ValueChangeEvent<String> event)
        {
            System.out.println("We handle ValueChangeEvent on History. Now token is " + History.getToken());
        }
    });
} 
```

谷歌浏览器中的输出如下

```
After back click token is C
After 100 millis token is C
We handle ValueChangeEvent on History. Now token is B
After back click token is B
We handle ValueChangeEvent on History. Now token is A
After 100 millis token is A
After back click token is A
We handle ValueChangeEvent on History. Now token is C
After 100 millis token is C 
```

这不是您想要的答案，但是评论太大了:)

# python - 如何从python中的url检索数据，然后将其发送到我可以处理该数据的文件下面是我检索数据的方式

> ID：11407481
> 
> 赞同：0
> 
> 时间：2012-07-10T06:02:31.337
> 
> 标签：python, django, api

如何从 python 中的 url 检索数据，然后将其发送到我可以处理该数据的文件。以下是我检索数据的方式

```
from django.http import HttpResponse
import urllib

def indexx(request):
    url ="http://##########/query?condition=%s&key=e25c7 &op=json"
    condition ='aaaaa'
    x = urllib.urlopen(url%condition)
    y=HttpResponse(x.read())
    return(y) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:08:55.817

你真的不需要这一切。帮自己一个忙，使用很棒的库[`python-requests`](http://requests.readthedocs.org/en/latest/index.html)。

从链接的文档中，您可以轻松完成所有操作：

```
>>> r = requests.get('https://api.github.com/user', auth=('user', 'pass'))
>>> r.status_code
200
>>> r.headers['content-type']
'application/json; charset=utf8'
>>> r.encoding
'utf-8'
>>> r.text
u'{"type":"User"...'
>>> r.json
{u'private_gists': 419, u'total_private_repos': 77, ...} 
```

如果需要，您还可以将所有内容写入文件。但是你真的应该将它写入内存，然后使用 SQLite 或 Redis 将其保存到磁盘。

# charts - Sencha touch charts 2：动态创建图表并从商店加载系列？

> ID：11407494
> 
> 赞同：1
> 
> 时间：2012-07-10T06:03:15.877
> 
> 标签：charts, touch, extjs

我想动态创建散点图并通过从商店中获取数据来加载系列。有什么方法可以做到吗？我做了以下事情：

```
var myChart = Ext.create('Ext.chart.Chart',{
  id:'myChart',
  renderTo:'myPanel',
  axes:[],  // blank because i need to add axes from store
  series:[] // blank because i need to add series from store
  :
  :
});

for(conditions){
  myChart.config.axes[0].fields.push(record[cnt].data.fieldName);
  var series = {
    type:'scatter',
    axis:['right', 'bottom'],
    xField:'myXfield',
    yField:record[cnt].data.yfieldVal
  }
  myChart.config.series.push(series);
}//for loop ends

myChart.redraw(); 
```

我无法看到带有动态添加的图表的图表。

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T14:59:54.867

我意识到如何解决这个问题。我为商店名称和其他相关字段声明了全局变量。我创建了 get 和 set 方法。这些在 app.js 文件中定义。我能够使用 set 方法为这些全局变量动态设置值，并使用 get 方法使用分配的值。如果需要，我希望有人能够使用这种技术。

# java - Swing应用程序中错误拼写单词的建议弹出窗口

> ID：11407497
> 
> 赞同：-1
> 
> 时间：2012-07-10T06:03:23.490
> 
> 标签：java, spell-checking

我是 Web 开发人员，对 Swing 应用程序知之甚少。

我正在做一个桌面应用程序，因为我需要为拼写错误的单词提供建议弹出窗口。请有人为此指定任何示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:06:10.240

*   专有：[Wintertree](http://www.wintertree-software.com/dev/ssce/javasdk.html)
*   开源：[JOrtho](http://jortho.sourceforge.net/)

检查项目站点以获取示例和文档。

# android - Android 模拟器：无法获得 wglGetExtensionsStringARB 错误

> ID：11407501
> 
> 赞同：31
> 
> 时间：2012-07-10T06:03:36.750
> 
> 标签：android, android-emulator, android-2.2-froyo, android-sdk-2.3

自从我更新了 SDKManager 和 ADT 后，我在 android 模拟器日志中收到了这个错误：

[2012-07-10 15:51:23 - 模拟器] 无法获取 wglGetExtensionsStringARB

这是什么意思？我能做些什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-18T17:43:29.547

我遇到了类似的问题。在我的例子中，我创建了新的虚拟设备并启用了快照。我刚刚取消选中复选框 Go to `AVD Manager`-> `Select the device`-> 单击`Edit`并取消选中`Enabled`复选框。我希望这行得通。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-23T19:31:36.600

创建模拟器时，需要选择属性 CPU/ABI 是 Intel Atom（安装在 SDK manager 中）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T06:06:43.447

只需更改您的 JDK 我安装了 SUN 的 JDK 而不是 Oracle，它对我有用....

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-26T03:11:54.060

对我来说，将**模拟性能**设置更改为“**存储快照以加快启动速度**”并取消选中“使用主机 GPU”修复了问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-29T14:53:02.893

首先，使用**INTEL x86...**作为 CPU/ABI。其次，如果选中，请取消选中快照。将目标保持在 Android 4.2.2

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-11-18T17:29:43.533

我在运行 Android Studio 1.4 时遇到了这个问题。在 Android 虚拟设备 (AVD) 管理器中，我选中了“使用主机 GPU”框，认为这会给我的模拟器速度带来一些提升。
Android Studio 会让你选择一个以这种方式配置的设备，它会向你显示它用来启动虚拟设备的命令： 但由于某种原因，它不会警告你程序崩溃，也不会显示如果您自己从命令行运行它，您会看到 stderr 消息： 当我从 Android Studio 运行它时，我没有在上面的屏幕截图中看到对话框，尽管当您运行命令时它显示得很好从命令行，所以我只是耐心地坐在那里几分钟，什么也没发生。 [![Android Studio“运行”窗口输出](../Images/ceac8c83f491a65883b505aad7f2cb9f.png)](https://i.stack.imgur.com/Fc5nc.png)

[![输出为在命令行上运行](../Images/97589ec1c9f2eee3f672b5ad1c07f722.png)](https://i.stack.imgur.com/5I4PD.png)

[使用主机 GPU 选项所需的驱动程序尚不可用](https://stackoverflow.com/questions/8941016/android-opengl-es-2-0-emulator/8948724#8948724)。通读那篇文章，似乎此设置可用于某些 Intel CPU，但不能用于我选择的 ARM 芯片（请参阅下面的 CPU/ABI 设置）。

我的解决方案是在 AVD 管理器的 Android 虚拟设备选项卡中选择虚拟设备后，取消选中通过“编辑”选项打开的窗口底部附近的“使用主机 GPU”框。您可以直接在 Windows 中的
**%ANDROID_HOME%\AVD Manager.exe**
访问 AVD 管理器 ，在我的 Windows 8 安装中，%ANDROID_HOME% 解析为
**c:\users\myusername\AppData\Local\Android\Sdk**

我目前没有在 Linux 上运行它，但我假设它在那里的路径类似，即：
**${ANDROID_HOME}/**

取消选中“使用主机 GPU”框后，我选择检查“快照”它旁边的框（据我了解，它存储了已经构建的虚拟机的副本，因此不需要每次都重新构建它，这应该为将来的实例节省一些启动时间）。这是我使用的完整设置：
[![编辑 Android 虚拟设备 (AVD) 窗口截图](../Images/def7fcde54e20293861852faf5ee8d10.png)](https://i.stack.imgur.com/ZVBQI.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-14T14:50:28.650

由于我的**Nvidea 显卡**驱动程序问题，我遇到了同样的问题。

如果您的系统有专用显卡，请检查并安装[最新的驱动程序。](http://www.nvidia.in/Download/index.aspx?lang=en-in)

否则，只需 在仿真器配置中 选择仿真性能作为**软件**[![在此处输入图像描述](../Images/776036025da2a2e4b135469853b9c4d4.png)](https://i.stack.imgur.com/j3R0y.png)

更新驱动后问题解决了:)

# jquery - 触发事件的window.opener错误

> ID：11407502
> 
> 赞同：0
> 
> 时间：2012-07-10T06:03:38.313
> 
> 标签：jquery, xml, triggers, reload, window.opener

我正在运行此代码以尝试在关闭当前页面后重新加载页面（从应该重新加载的页面中编辑值）：

```
setTimeout( function() {
            window.opener.$('window').('reload');
        window.close();trigger
    }, 1700); 
```

我每次都会收到这个错误：

* * *

> XML 过滤器应用于非 XML 值 ({length:0, prevObject:{0:({}), context:({}), length:1}, context:({}), selector:"window"} )

我真的对XML一无所知，我什至不明白什么是错的......

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:08:12.377

你的语法不正确。您正在尝试引用`window.opener`与 jQuery 对象等效的属性。删除对 j​​Query 方法的引用，因为这只是提供了一种选择当前窗口的替代技术，在这里无关紧要。

```
setTimeout( function() {
    window.opener.location.reload();
    window.close();
}, 1700); 
```

# java - 传递需要基类对象的派生类对象

> ID：11407504
> 
> 赞同：0
> 
> 时间：2012-07-10T06:03:48.430
> 
> 标签：java

```
public abstract class AbstractClass 
{
    public abstract void AbstractClassMethod();
}

public class DerivedClass extends AbstractClass {

    @Override
    public void AbstractClassMethod() {
        // TODO Auto-generated method stub

    }

}

public interface InterfaceObject 
{
    public void InterfaceObjectMethod(AbstractClass oAbstractClass);
}

public class TestAbstractParam implements InterfaceObject {

    @Override
    public void InterfaceObjectMethod(AbstractClass oAbstractClass) {
        // TODO Auto-generated method stub

    }

}

public class TestDerivedParam implements InterfaceObject {

    @Override
    public void InterfaceObjectMethod(DerivedClass oDerivedClass) {
        // TODO Auto-generated method stub

    }

} 
```

编译 TestDerivedParam 类时出现错误。谁能解释一下这背后的原因？更具体地说，问题是为什么方法不能接受期望基类型的子类型参数？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:10:22.447

在`TestDerivedParam`方法中

```
public void InterfaceObjectMethod(DerivedClass oDerivedClass) { 
```

不一样

```
public void InterfaceObjectMethod(AbstractClass oAbstractClass); 
```

在`InterfaceObject`.

您正在使用`@Override`注释，但没有使用相同的方法签名。

* * *

> 更具体地说，问题是为什么方法不能接受期望基类型的子类型参数？

请参见下面的示例：

```
public class Fruit { }

public class Apple extends Fruit { }

public class Banana extends Fruit { } 
```

两者都`Apple`和`Banana`是`Fruit`但`Apple`不是`Banana`和`Banana`不是`Apple`。所以，你不能真的给`Banana`期待 的人`Apple`，但给只是期待 a 的人提供 a`Banana`或 an是有效的。`Apple``Fruit`

所以，

```
public void method(Fruit fruit) { 
```

没有相同的签名

```
public void method(Apple apple) { 
```

因为，如果是这样，那将意味着以下具有与上述相同的签名

```
public void method(Banana banana) { 
```

并且签名必须在覆盖（实现）方法时匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:10:52.350

您正在更改方法的签名，因此，Java 只能假设您的意图是“重载”具有相同名称和不同参数的现有方法。

您也可以使用桥接方法：

```
@Override
public void InterfaceObjectMethod(AbstractClass oDerivedClass) {
   // TODO Auto-generated method stub
}

public void InterfaceObjectMethod(DerivedClass oDerivedClass) {
   InterfaceObjectMethod((AbstractClass)oDerivedClass);
} 
```

第二种方法将是一个桥接方法，其职责只是将您的请求转发给实际继承的方法。如您所见，桥接方法是重载，而不是覆盖。

另一种选择是使用泛型。

```
interface InterfaceObject<T extends AbstractClass> 
{
    public void InterfaceObjectMethod(T oAbstractClass);
}

class TestAbstractParam implements InterfaceObject<AbstractClass> {

    @Override
    public void InterfaceObjectMethod(AbstractClass oAbstractClass) {
        // TODO Auto-generated method stub

    }
}

class TestDerivedParam implements InterfaceObject<DerivedClass> {

    @Override
    public void InterfaceObjectMethod(DerivedClass oDerivedClass) {
        // TODO Auto-generated method stub

    }
} 
```

最终，泛型版本与第一个选项完全相同，即编译器综合生成桥方法。如果你反编译你的类，你会注意到它就是这样做的。

# java - 使用 JTable.setRowHeight 更改行高不起作用

> ID：11407506
> 
> 赞同：3
> 
> 时间：2012-07-10T06:03:53.880
> 
> 标签：java, swing, user-interface, jtable

我正在处理一个包含适合内容的行的表。我将 TableModelListener 安装到表模型中，这样每当添加新行时，新添加行的高度就会自动更改。这是我的测试代码：

```
final DefaultTableModel model = new DefaultTableModel(0, 1);
final JTable table = new JTable(model);
model.addTableModelListener(new TableModelListener() {
    @Override
    public void tableChanged(TableModelEvent e) {
        // TO DO: replace 100 with the actual preferred height.
        table.setRowHeight(e.getFirstRow(), 100);
    }
});

JButton button = new JButton("Add Row");
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        model.addRow(new String[] {"abc"});
    }
}); 
```

我希望当单击“添加行”按钮时，会在表格中添加一个新行并且高度为 100 像素，但它不起作用 - 行高永远不会改变。更奇怪的是，`JTable.setRowHeight`如果我像这样将调用移动到按钮的动作侦听器，该方法可以正常工作：

```
button.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        model.addRow(new String[] {"abc"});
        talbe.setRowHeight(table.getRowCount() - 1, 100);
    }
}); 
```

绝对不能依赖这个“解决方案”，因为表格模型可以从其他地方更改。我正确使用`TableModelListener`还是这是一个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:28:19.110

如何使用 EventQueue.invokeLater(...)

```
model.addTableModelListener(new TableModelListener() {
  @Override public void tableChanged(final TableModelEvent e) {
    // TO DO: replace 100 with the actual preferred height.
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        table.setRowHeight(e.getFirstRow(), 100);
      }
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:12:28.513

设置行高值后，您是否尝试过使表格无效/重绘？

# perl - Perl DBD::Oracle 模块安装

> ID：11407513
> 
> 赞同：23
> 
> 时间：2012-07-10T06:04:38.210
> 
> 标签：perl, oracle

有人可以指导我如何安装 Perl`DBD::Oracle`模块吗？

这是我到目前为止所做的：

*   平台：RHEL 5.8 64 位
*   安装 Perl DBI 包
*   安装了适用于 64 位 Linux 的 Oracle Instant 客户端（用于 Instant 客户端的基本 + sdk + sqlplus 组件
*   已设置正确`$ORACLE_HOME`和`$LD_LIBRARY_PATH`
*   然后当我这样做`perl Makefile.pl`时失败并出现以下错误：

    ```
    I'm having trouble finding your Oracle version number... trying harder

    WARNING: I could not determine Oracle client version so I'll just
    default to version 8.0.0.0\. Some features of DBD::Oracle may not work.
    Oracle version based logic in Makefile.PL may produce erroneous results.
    You can use "perl Makefile.PL -V X.Y.Z" to specify a your client version.

    Oracle version 8.0.0.0 (8.0)
    DBD::Oracle no longer supports Oracle client versions before 9.2
     Try a version before 1.25 for 9 and 1.18 for 8! at Makefile.PL line 271. 
    ```

*   即时客户端版本：11.1.0

*   版本是`DBD::Oracle`1.44

如果您已使用 Oracle 即时客户端成功安装，那么您能否告诉我我缺少什么？

是否可以在`DBD::Oracle`不使用 Oracle 即时客户端的情况下进行安装？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-10T06:54:18.047

*   如果缺少 ExtUtils-MakeMaker 模块，请安装 ( `sudo yum install perl-ExtUtils-MakeMaker`)
*   安装 Perl DBI 模块 ( `$ yum install perl-DBI`)
*   为 Oracle 即时客户端手动安装以下三个 RPM（来自[Instant Client Downloads for Linux x86-64](http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html)。示例适用于 v11.2.0.3.0-1：将以下命令调整为实际版本。）

    ```
    oracle-instantclient11.2-basic-11.2.0.3.0-1
    oracle-instantclient11.2-devel-11.2.0.3.0-1
    oracle-instantclient11.2-sqlplus-11.2.0.3.0-1 
    ```

我使用的是 64 位 Linux 机器，因此请相应地选择您的 RPM 文件名。应该做的事情`sudo yum -y install oracle-instantclient*rpm`）

*   设置以下变量：

    ```
    export LD_LIBRARY_PATH=/usr/lib/oracle/11.2/client64/lib
    export ORACLE_HOME=/usr/lib/oracle/11.2/client64 
    ```

    MacOS 用户将需要：

    ```
    DYLD_LIBRARY_PATH=/usr/lib/oracle/11.2/client64/ 
    ```

    还要添加`ORACLE_HOME`到您的`PATH`变量中。

*   从[CPAN](http://search.cpan.org/)下载**DBD::Oracle**

*   解压模块并按给定顺序运行以下命令：

    ```
    perl Makefile.PL
    make
    sudo make install 
    ```

如果您收到有关缺少 gcc 的投诉，您可以（暂时）安装它，然后将其删除。

完毕 ！！！

我遇到的问题是由于错误的`LD_LIBRARY_PATH`。我已将其设置为，`/usr/lib/oracle/11.2/client64`而正确的值为`/usr/lib/oracle/11.2/client64/lib`.

当然，对于像我这样的新手来说，这是一个很好的学习。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-22T15:34:47.130

您还可以阅读我的文章[如何安装 DBD::Oracle](http://g14n.info/2013/07/how-to-install-dbdoracle)，其中包含安装 DBD::Oracle CPAN 模块所需的所有步骤，这不是一个简单的安装。目的是减少头痛并将其转变为可重复的过程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-11T15:02:59.230

这是我在 CentOS 7.2 上使用 yum 包和 CPAN 所做的。这假设您使用的是 Oracle 12.1 版，但我想大多数版本都会以这种方式工作。

**安装 Oracle 即时客户端**

```
yum install oracle-instantclient12.1-basic-12.1.0.2.0-1 oracle-instantclient12.1-devel-12.1.0.2.0-1 oracle-instantclient12.1-sqlplus-12.1.0.2.0-1 
```

**复制演示制作文件**

安装预计 *.mk 文件位于 /usr/share/oracle/12.1/client64，但 yum 包安装将它们放在 /usr/share/oracle/12.1/client64/demo 中。

```
sudo cp /usr/share/oracle/12.1/client64/demo/* /usr/share/oracle/12.1/client64 
```

**修改.bashrc**

将以下行添加到您的 ~/.bashrc

```
export ORACLE_HOME=/usr/lib/oracle/12.1/client64
export LD_LIBRARY_PATH=/usr/lib/oracle/12.1/client64/lib
export PATH=$ORACLE_HOME:$PATH 
```

现在源文件

```
source ~/.bashrc 
```

**更新 CPAN 和 DBI**

将 CPAN 和 DBI 更新到最新版本

```
cpan> install CPAN
cpan> reload cpan
cpan> install DBI 
```

**安装 DBD::Oracle**

```
cpan> install DBD::Oracle 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T09:11:06.773

对 slayedbylucifer 答案的一点补充。我遇到了与问题中提到的相同的问题。我已经完成了 slayedbylucifer 描述的所有步骤。但我仍然遇到了[这里](http://g14n.info/2013/07/how-to-install-dbdoracle/)提到的问题：

```
/usr/lib64/gcc/x86_64-suse-linux/4.3/../../../../x86_64-suse-linux/bin/ld: skipping incompatible /opt/oracle/app/oracle/product/11.2.0/client_1/lib//libclntsh.so when searching for -lclntsh
/usr/lib64/gcc/x86_64-suse-linux/4.3/../../../../x86_64-suse-linux/bin/ld: cannot find -lclntsh 
```

所以我创建了以下符号链接：

```
ln -s /opt/oracle/app/oracle/product/<YOUR_ORACLE_VERSION>/client_1/lib/libclntsh.so $ORACLE_HOME/libclntsh.so* 
```

在那一步之后，上面的错误（找不到-lclntsh）得到了修复。make 命令的执行没有任何错误。

我唯一的问题是我不明白为什么这个符号链接是必要的。

# php - 在 PHP 中缓存 JSON 输出

> ID：11407514
> 
> 赞同：16
> 
> 时间：2012-07-10T06:04:41.847
> 
> 标签：php, json, caching

有点小问题。一直在使用 facebook 和 twitter API 并获得状态搜索查询的 JSON 输出没问题，但是我进一步阅读并意识到我最终可能会受到文档中引用的“速率限制”。

我想知道每小时缓存 JSON 输出是否容易，以便我至少可以尝试防止这种情况发生？如果是这样，它是如何完成的？当我尝试了一个 youtube 视频时，它并没有真正提供太多信息，只是如何将目录列表的内容写入 cache.php 文件，但它并没有真正指出这是否可以通过 JSON 输出完成，当然没有说如何使用 60 分钟的时间间隔或如何获取信息然后从缓存文件中返回。

任何帮助或代码将不胜感激，因为关于这种事情的教程似乎很少。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-10T06:20:01.913

这是一个简单的函数，它添加了缓存以获取一些 URL 内容：

```
function getJson($url) {
    // cache files are created like cache/abcdef123456...
    $cacheFile = 'cache' . DIRECTORY_SEPARATOR . md5($url);

    if (file_exists($cacheFile)) {
        $fh = fopen($cacheFile, 'r');
        $cacheTime = trim(fgets($fh));

        // if data was cached recently, return cached data
        if ($cacheTime > strtotime('-60 minutes')) {
            return fread($fh);
        }

        // else delete cache file
        fclose($fh);
        unlink($cacheFile);
    }

    $json = /* get from Twitter as usual */;

    $fh = fopen($cacheFile, 'w');
    fwrite($fh, time() . "\n");
    fwrite($fh, $json);
    fclose($fh);

    return $json;
} 
```

它使用 URL 来识别缓存文件，对相同 URL 的重复请求将在下一次从缓存中读取。它将时间戳写入缓存文件的第一行，超过一小时的缓存数据将被丢弃。这只是一个简单的示例，您可能想要自定义它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T06:09:22.253

使用缓存来避免速率限制是个好主意。下面是一些示例代码，展示了我如何在我最近编写的一些 php 代码中处理 Google+ 数据。

```
private function getCache($key) {
    $cache_life = intval($this->instance['cache_life']); // minutes
    if ($cache_life <= 0) return null;

    // fully-qualified filename
    $fqfname = $this->getCacheFileName($key);

    if (file_exists($fqfname)) {
        if (filemtime($fqfname) > (time() - 60 * $cache_life)) {
            // The cache file is fresh.
            $fresh = file_get_contents($fqfname);
            $results = json_decode($fresh,true);
            return $results;
        }
        else {
            unlink($fqfname);
        }
    }

    return null;
}

private function putCache($key, $results) {
    $json = json_encode($results);
    $fqfname = $this->getCacheFileName($key);
    file_put_contents($fqfname, $json, LOCK_EX);
} 
```

并使用它：

```
 // $cacheKey is a value that is unique to the
        // concatenation of all params. A string concatenation
        // might work. 
        $results = $this->getCache($cacheKey);
        if (!$results) {
            // cache miss; must call out
            $results = $this->getDataFromService(....);
            $this->putCache($cacheKey, $results);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-07T12:32:13.303

我知道这篇文章很旧，但它显示在谷歌所以对于每个人来说，我做了这个简单的卷曲 JSON url 并将其缓存在特定文件夹中的文件中，如果 5 分钟通过它会再次请求 json如果 5 分钟还没有过去，卷曲它，它会从文件中显示出来，它使用时间戳来跟踪时间，是的，享受

```
function ccurl($url,$id){

    $path    = "./private/cache/$id/";
    $files = scandir($path);
    $files = array_values(array_diff(scandir($path), array('.', '..')));
    if(count($files) > 1){
      foreach($files as $file){
        unlink($path.$file);
        $files = scandir($path);
        $files = array_values(array_diff(scandir($path), array('.', '..')));
      }
    }
    if(empty($files)){
      $c = curl_init();
      curl_setopt($c, CURLOPT_URL, $url);
      curl_setopt($c, CURLOPT_TIMEOUT, 15);
      curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
      curl_setopt($c, CURLOPT_USERAGENT,
          'Mozilla/5.0 (Windows NT 6.2; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0');
      $response = curl_exec($c);
      curl_close ($c);

      $fp = file_put_contents($path.time().'.json', $response);
      return $response;

    }else {

      if(time() - str_replace('.json', '', $files[0]) >  300){
        unlink($path.$files[0]);
        $c = curl_init();
        curl_setopt($c, CURLOPT_URL, $url);
        curl_setopt($c, CURLOPT_TIMEOUT, 15);
        curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($c, CURLOPT_USERAGENT,
            'Mozilla/5.0 (Windows NT 6.2; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0');
        $response = curl_exec($c);
        curl_close ($c);

        $fp = file_put_contents($path.time().'.json', $response);
        return $response;
      }else {
        return file_get_contents($path. $files[0]);
      }
    }
  } 
```

为使用为所有缓存文件创建一个目录，对我来说，`/private/cache`然后在内部为请求缓存创建另一个目录，例如 x，当调用函数时，它应该像 htis `ccurl('json_url','x')` ，其中 x 是 id，如果你有问题请问我^_^ 也很享受（我可能稍后会更新它，所以它不会使用目录作为 id

# html - 比较 cocos2d-x 中的图像

> ID：11407515
> 
> 赞同：1
> 
> 时间：2012-07-10T06:04:48.227
> 
> 标签：html, cocos2d-x

我正在用 cocos2d-x HTML5 制作游戏。在一层上有两张几乎相同但有几个不同区域的图像，当我单击其中一个时，如果两个图像的单击区域具有不同的像素，我想在两个图像的相同位置添加一个贴纸。

我想问如何比较cocos2d-x HTML5上的图像像素？以及如何进行点击事件来放置贴纸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:44:13.860

可能 CCImage 类会帮助你。

我的建议是，由于您已经有 2 张图像，并且您知道不同的区域，您可以创建一个记录区域位置和大小的 plist 字典。

在您的游戏场景中，您可以添加从配置列表文件创建的透明可触摸 Sprite，并在触摸时为其设置颜色。

# asp.net - 创建一个用于获取角色名称的存储过程？

> ID：11407520
> 
> 赞同：-1
> 
> 时间：2012-07-10T06:05:20.447
> 
> 标签：asp.net, sql-server

我有两张这样的桌子

```
 usertable                                 RoleTable
-----------------------                     ---------------------------
   UserID|UserName|Pwd|RoleID                RoleID|RoleName
     1   |Anil    |123|1                       1   |Admin 
```

我必须得到`rolename`用户名和密码匹配的时间，有人可以为此提供一个存储过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:09:11.750

您的方案可能存在一些问题：

*   明文密码（您应该匹配加盐哈希，而不是实际密码）
*   用户和角色之间的 1-1 关系（未来可扩展性不是很好）

假设您知道这些警告：

```
CREATE PROCEDURE GetRoleName

    @UserName VARCHAR(50), -- NVARCHAR if needed
    @Password VARCHAR(50)

AS

SELECT R.RoleName FROM [User] U 
INNER JOIN [Role] R ON R.RoleId = U.RoleId 
WHERE U.UserName = @UserName and U.Pwd = @Password;

GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:09:58.130

尝试以下查询：

```
 SELECT role.RoleName FROM usertable user JOIN RoleTabel role WHERE user.UserName=user_name AND user.Pwd=password; 
```

您可以通过以下方式在存储过程中实现上述查询

```
 CREATE PROCEDURE proc_GetRoleName
          @username nvarchar(50),
          @password nvarchar(50) 
     AS 
     BEGIN 
       SELECT role.RoleName FROM usertable user JOIN RoleTabel role WHERE user.UserName=@username AND user.Pwd=@password ;
     END 
```

# c# - 从硬盘快速读取

> ID：11407526
> 
> 赞同：3
> 
> 时间：2012-07-10T06:05:48.310
> 
> 标签：c#, performance, io

我基于两个文件创建了一个虚拟文件系统（非常类似于 fat）。

1.  第一个文件 - 分配表。

它存储有关文件分配的信息（实际上它不是文件但不关心它）

每条记录具有以下结构：

1.  名称 - 固定大小（100 字节）。前 4 个字节是字符串长度
2.  长度 - 4 个字节，文件的总长度
3.  StartCluster - 起始集群的 4 字节 id
4.  EndCluster - 端簇的 4 字节 id

每个条目都有固定的大小，我在内存中有哈希表，这可以帮助我找到每个条目的位置。

1.  第二个文件 - 虚拟驱动器

基于集群的 VD。每个集群都有固定的大小 - 256 字节。最后 4 个字节是指向文件链中下一个簇的指针。

当我尝试读取所有文件时，问题是速度非常慢。我怎样才能提高性能？有什么技巧可以快速从硬盘读取。

例如：按大块读取文件是个好主意吗？当我读取文件的一小部分时，文件被操作系统缓存对吗？下一次我只是从内存而不是从 HD 中获取数据？

那么我有几个这样的问题我可以得到答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T12:33:16.747

一些选项；

*   您可以扩大集群大小（256 字节很小，现在大多数操作系统使用 4KB+ 作为集群）

*   如果您读取所有文件，则可以根据 startCluster 进行排序，以便按照它们在磁盘上物理上彼此靠近的顺序读取文件。因此，每当操作系统获取 4K+ 块时，您更有可能在下一个文件中需要它的其他部分。

*   您可以对虚拟磁盘文件进行碎片整理

*   您似乎确信这是一个磁盘读取问题。您是否检查过您在阅读文件后对文件所做的操作不是慢的部分？

*   大量随机访问是 SSD 存储的亮点。将虚拟磁盘移动到 SSD

# asp.net - 将文件从本地复制到远程服务器

> ID：11407530
> 
> 赞同：3
> 
> 时间：2012-07-10T06:05:59.777
> 
> 标签：asp.net, html, copy

我在本地系统上动态创建 html 文件（使用 HTMLTEXTWRITER，然后使用 streamwriter 将它们保存到本地文件系统）。我想通过我们的用户交互将此文件复制到我的远程服务器，以便我的用户可以读取文件。我用 C#

例如我想从 d:\myfile.html 复制到 mysite.com\myfile.html，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:47:49.157

我已经使用了它并且它有效。可能有用

用于保持本地路径

```
rPath = "\\" & Request.UserHostAddress & "\c$\temp\" 
```

用于输出文件

```
rOutput = Session.SessionID & "_" & Format(Date.Now(), "ddMMyyhhmmss") & ".pdf" 
```

现在：将在 localhost\c\temp 中创建报告

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:15:15.197

您不能`System.IO`为此使用这些类（除非您可以将远程服务器作为网络驱动器访问），但您可以使用`System.Net`.

这是使用`WebRequest`该类的片段：

```
WebRequest request = WebRequest.Create( url );
request.Timeout = 1000; // some appropriate value
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = 0; // set a length here

using( StreamWriter requestStream = new StreamWriter( request.GetRequestStream(), System.Text.Encoding.UTF8) ) {
    // write to the stream here using requestStream.Write();
    requestStream.Close();
} 
```

有关 HTTP 的更多信息：http: [//msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

或者，您可以使用专为传输文件而设计的协议，例如 FTP（或更安全的东西），这在代码中并不难做到。

FTP 选项：http: [//msdn.microsoft.com/en-us/library/ms229718](http://msdn.microsoft.com/en-us/library/ms229718)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:22:58.713

您可以设置 FTP 服务器并通过 FTP 以编程方式复制文件。可以在[此处](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)或[此处](http://msdn.microsoft.com/en-us/library/ms229715.aspx)找到示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T06:29:00.897

您可以通过三种方式将文件复制到远程服务器。

1.  使用普通文件复制模式。在这里，您需要有权访问网络服务器共享路径。如果网络服务器与您的应用程序在同一个网络中，那么您可以共享 webroot 并为运行应用程序的用户提供写入权限。然后他可以使用`File.Copy("source.txt", "\\Servername\SharedFolderName\target.txt")`.

2.  第二种方法是使用 FTP 将文件复制到远程服务器。[这个 MSDN 示例](http://msdn.microsoft.com/en-us/library/ms229715.aspx)将帮助您了解如何执行此操作。这将适用于大多数共享托管服务提供商。

3.  您可以使用[Tim](https://stackoverflow.com/a/11407622/30594)所指出的 HTTP POST 。但这会让任何用户执行帖子。您可能需要处理用户配置、身份验证和授权。IMO，将此作为配置用户和提供特定路径权限的最后选项，可能会变得很麻烦。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T06:29:53.190

您是基于 Windows 的远程服务器，并且与您的工作机器在同一个工作组或域中吗？如果是这样，您可以打开服务器上的 Windows 文件共享。然后你可以像这样用 cmd 复制你的文件：

复制 c:\test.txt \\mysite.com

File.Copy 在 C# 中使用的路径“\\mysite.com”也有效。

否则，您需要在服务器上设置 FTP 环境并使用 C# 中的 FTP 相关 API。

# java - BufferedReader 抛出异常，我不知道为什么

> ID：11407531
> 
> 赞同：0
> 
> 时间：2012-07-10T06:05:59.917
> 
> 标签：java, android, xml-parsing, bufferedreader

```
public URL setUrl() throws Exception{
    System.out.println("1");
    URL iotd=new URL("http://www.nasa.gov/rss/image_of_the_day.rss");
    System.out.println("2");
    BufferedReader in=new BufferedReader(new InputStreamReader(iotd.openStream()));
    System.out.println("3");**//this never gets printed**

    //testing xml parser
    XmlPullParserFactory factory=XmlPullParserFactory.newInstance();
    factory.setNamespaceAware(true);
    System.out.println("4");
    XmlPullParser xpp=factory.newPullParser();
    System.out.println("5");
    xpp.setInput(in);
    System.out.println("6");

    int eventType=xpp.getEventType();
    System.out.println(eventType+"!!!!!!!!!!!!!!!!");
    while(eventType!=XmlPullParser.END_DOCUMENT){
        if(eventType==XmlPullParser.START_DOCUMENT){
            System.out.println("start");
        }
    }

    in.close();
    return iotd;

} 
```

该程序永远不会打印出“3”，并且 logcat 中有很多警告，我很难理解发生了什么，因为我已经有一段时间没有使用 java 了。有任何想法吗？我正在关注此代码示例...

[http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html](http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html)

并试图修改它以解析 xml，但我什至还没有测试那部分。

这是打印“2”后logcat给我的所有警告

```
07-10 05:31:30.610: W/System.err(534): android.os.NetworkOnMainThreadException
07-10 05:31:30.621: W/System.err(534):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
07-10 05:31:30.621: W/System.err(534):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
07-10 05:31:30.621: W/System.err(534):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
07-10 05:31:30.621: W/System.err(534):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
07-10 05:31:30.621: W/System.err(534):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
07-10 05:31:30.621: W/System.err(534):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
07-10 05:31:30.621: W/System.err(534):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
07-10 05:31:30.621: W/System.err(534):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
07-10 05:31:30.621: W/System.err(534):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
07-10 05:31:30.630: W/System.err(534):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
07-10 05:31:30.630: W/System.err(534):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
07-10 05:31:30.630: W/System.err(534):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
07-10 05:31:30.630: W/System.err(534):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
07-10 05:31:30.630: W/System.err(534):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
07-10 05:31:30.630: W/System.err(534):  at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
07-10 05:31:30.630: W/System.err(534):  at java.net.URL.openStream(URL.java:462)
07-10 05:31:30.630: W/System.err(534):  at com.wajumbie.nasadailyimage.RssParse.setUrl(RssParse.java:14)
07-10 05:31:30.630: W/System.err(534):  at com.wajumbie.nasadailyimage.NasaDailyImage.onCreate(NasaDailyImage.java:29)
07-10 05:31:30.630: W/System.err(534):  at android.app.Activity.performCreate(Activity.java:4465)
07-10 05:31:30.630: W/System.err(534):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-10 05:31:30.630: W/System.err(534):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-10 05:31:30.630: W/System.err(534):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-10 05:31:30.640: W/System.err(534):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-10 05:31:30.640: W/System.err(534):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-10 05:31:30.640: W/System.err(534):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 05:31:30.640: W/System.err(534):  at android.os.Looper.loop(Looper.java:137)
07-10 05:31:30.640: W/System.err(534):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-10 05:31:30.640: W/System.err(534):  at java.lang.reflect.Method.invokeNative(Native Method)
07-10 05:31:30.640: W/System.err(534):  at java.lang.reflect.Method.invoke(Method.java:511)
07-10 05:31:30.640: W/System.err(534):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-10 05:31:30.640: W/System.err(534):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-10 05:31:30.640: W/System.err(534):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:25:21.123

有一个`NetworkOnMainThreadException`。阅读[此链接](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)以获取更多信息。还有[这篇文章](http://developer.android.com/guide/practices/responsiveness.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:28:11.787

异常堆栈跟踪表明您正在主线程上运行它。是这样吗？Android 开发的主线程不应具有网络或磁盘访问权限。您应该将网络操作移至线程，然后严格模式保护不会导致异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:26:07.833

试试这个方法

```
 InputStream is=callWebservice("http://www.nasa.gov/rss/image_of_the_day.rss");
 BufferedReader in=new BufferedReader(new InputStreamReader(
            is, "iso-8859-1")); 
```

其中**callWebservice**如下图

```
 private InputStream callWebservice(String serviceURL) {
        HttpClient client=new DefaultHttpClient();
      HttpGet getRequest=new HttpGet();

      try {
          // construct a URI object
          getRequest.setURI(new URI(serviceURL));
      } catch (URISyntaxException e) {
          Log.e("URISyntaxException", e.toString());
      }

      // buffer reader to read the response
      BufferedReader in=null;
      // the service response
      HttpResponse response=null;
      try {
          // execute the request
          response = client.execute(getRequest);
      } catch (ClientProtocolException e) {
          Log.e("ClientProtocolException", e.toString());
      } catch (IOException e) {
          Log.e("IO exception", e.toString());
      }
      if(response!=null)
            try {
                return response.getEntity().getContent();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block

                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block

                e.printStackTrace();
            }
        else
          return null;
        return null;

    } 
```

# c++ - 遍历向量时陷入无限循环的问题

> ID：11407535
> 
> 赞同：0
> 
> 时间：2012-07-10T06:06:15.780
> 
> 标签：c++

我想搜索成对的向量，为了这样做..我正在执行以下操作：

```
 vector<pair<double ,double> > vec_pairs;

 for(vector<unsigned int>::size_type j = 0; j != vec_pairs.size(); j++ )
        {
            if(vec_pairs[j].first==12.6)
            {
              int z=7;
              continue;
            }
        } 
```

但是我的问题是……这样做后……我陷入了无限循环……谁能帮我解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:31:49.457

我已经在键盘上测试了你的代码。[在这里](http://codepad.org/kPu3MjEx)检查！它工作正常。`j`调试时检查变量的值。正如 SingerOftheFall 所说，它可能会在某处减少或重置。如果您在循环内添加增加值的元素，它也可以继续无限循环，`vec_pairs.size()`并且在这种情况下条件`j != vec_pairs.size()`永远不会为真。在您提供的代码中找不到任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:17:01.413

首先，您发布的代码“按原样”运行良好。

这种类型的代码进入无限循环的唯一原因是`j`在循环内部进行修改。

如果你在循环内*增加* `j`，你可能不会被卡住，因为你会失去联系并且可能会让你的代码崩溃。

```
for(vector<unsigned int>::size_type j = 0; j != vec_pairs.size(); j++ )
    {
        if(vec_pairs[j].first==12.6)
        {
            j++;//You will go out of vector bonds and might get an error here.
            continue;
        }
    } 
```

但是，如果您执行以下操作：

```
for(vector<unsigned int>::size_type j = 0; j != vec_pairs.size(); j++ )
    {
        if(vec_pairs[j].first==12.6)
        {
            j--;//j is decreased each time you get in here, so you will be stuck on one element,
            continue;
        }
    } 
```

然后你会卡在里面，因为当你进入`if`语句时（比如，在元素 7 上），`j`会减少到 6，然后你会`continue`循环，`j`会增加回 7，你会`if`再次进入，等等。

# android - 如何从android中的自定义视图类中捕获按键？

> ID：11407536
> 
> 赞同：0
> 
> 时间：2012-07-10T06:06:17.937
> 
> 标签：android, menu

在我的 android 应用程序中，我使用自定义视图加载为活动的视图。现在我想检测用户是否单击菜单按钮。希望下面的代码将解释该场景。

**我的自定义视图类：**

```
 public class LibraryHomeView extends LinearLayout implements OnKeyListener {
//variable dec goes here..
public LibraryHomeView(Context context, AttributeSet attrs) {
    super(context, attrs);  

    init(context,attrs);
}

private void init(Context con,AttributeSet att) {
    //custom view implementation goes here...
}
@Override
public boolean onKey(View v, int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) {
         Log.d(TAG, "KeyEvent.KEYCODE_MENU");
            return true;
        }

} 
```

我的问题是我不想从活动类中捕获这个事件我想从视图类中捕获它但是当我按下菜单键时它不会出现方法。有什么`OnKey()`帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:50:18.370

如果您可以在活动中捕获关键事件，那么将其传递给视图很简单。只需从活动中调用视图内的方法。你可能有这样的东西（我这台电脑上没有eclipse，所以我直接在浏览器中编码——我可能有语法错误）：

```
public class LibraryHomeView extends LinearLayout {

//......

    public void keyEventRecieved(String eventMessage) {
        Log.d(TAG, eventMessage);
    }
//.......
} 
```

在活动内部：

```
public class myActivity extends Activity {
LibraryHomeView control;
//......
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        control = (LibraryHomeView)findViewById(R.id.myCustomViewId);
    }

    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_MENU) {
             Log.d(TAG, "KeyEvent.KEYCODE_MENU");
             control.keyEventRecieved("Yahooooo!");
                return true;
            }

    }

//......

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:24:38.127

尝试这个，

```
public boolean onKeyUp(int keyCode, KeyEvent event) {
   if (keyCode == KeyEvent.KEYCODE_MENU) {
        // do something...
   }
    return true;
   } 
```

**编辑**

```
public class LibraryHomeView extends LinearLayout {

     public LibraryHomeView(Context context) {
     super(context);
     // TODO Auto-generated constructor stub
   setFocusable(true);
  } 
```

# eclipse - 如何从非 UI 线程关闭 SWT 中的 MessageDialog？

> ID：11407537
> 
> 赞同：0
> 
> 时间：2012-07-10T06:06:28.107
> 
> 标签：eclipse, swt

我在 UI 线程中运行了进度对话框。另一个线程正在后台运行，完成后必须关闭进度对话框。

在 UI 线程上：

```
messageDialog.open(); // synchronous 
```

我从后台线程尝试过这个：

```
UiUtils.syncExec(new Runnable()
        {
            @Override
            public void run()
            {
                   dialog.close();
            }
       }); 
```

但关闭事件不由 UI 线程处理。

# java - 脚本手动运行，但设置为 crontab 时失败

> ID：11407540
> 
> 赞同：0
> 
> 时间：2012-07-10T06:06:41.597
> 
> 标签：java, cron

我有一个`log.sh`运行 jar的脚本`Logger.jar`。`logger.xml`此 jar在运行时从属性文件中读取。

该脚本手动运行良好，但设置为 crontab

```
*/15 * * * * /log_parser/log.sh 
```

它输出错误`logger.xml missing`

如何在通过 crontab 调度时为 jar 设置属性文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:18:35.740

将参数传递给您的 shell 脚本：

```
*/15 * * * * /log_parser/log.sh %LOGGER_XML_LOCATION% 
```

或在 shell 脚本中手动设置 xml 文件的位置。

请注意，当您手动运行脚本和通过 crontab 运行脚本时，当前目录可能会有所不同。

# java - Gson，自动初始化并避免空异常

> ID：11407541
> 
> 赞同：4
> 
> 时间：2012-07-10T06:06:51.163
> 
> 标签：java, initialization, gson

将 json 反序列化为`class Foo{int id; List<String> items; List<Long> dates;}`如何在反序列化后自动初始化为空的字段时。Gson lib有这样的可能性吗？

前任：

```
Foo foo = new Gson().fromJson("{\"id\":\"test\", \"items\":[1234, 1235, 1336]}", Foo.class)
foo.dates.size(); -> 0 and not null pointerException 
```

我知道我可以做 if (foo.attr == null) foo.attr = ...
但我正在寻找更通用的代码，而不知道 Foo 类
thx

*编辑*：抱歉，只需将 Getters 放入 Foo 就足够了

* * *

关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:22:58.550

您需要创建自定义反序列化程序。

假设你的类被调用`MyAwesomeClass`，你实现了类似的东西

```
MyAwesomeClassDeserializer implements JsonDeserializer<MyAwesomeClass> {

@Override
public MyAwesomeClass deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext ctx) throws JsonParseException
{
    // TODO: Do your null-magic here

} 
```

并向 GSON 注册，如下所示：

```
Gson gson = new GsonBuilder()
    .registerTypeAdapter(MyAwesomeClass.class, new MyAwesomeClassDeserializer())
    .create(); 
```

现在，您只需调用一个`fromJson(String, TypeToken)`方法来获取您的反序列化对象。

```
MyAweSomeClass instance = gson.fromJson(json, new TypeToken<MyAwesomeClass>(){}.getType()); 
```

# php - 我如何更好地理解 php 中 symfony2 中的服务层

> ID：11407543
> 
> 赞同：4
> 
> 时间：2012-07-10T06:07:05.627
> 
> 标签：php, symfony

我正在学习使用 symfony2，但我很难了解什么是服务层以及可以在哪里使用它。

我如何更好地理解 symfony2 中的服务层

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T15:03:09.520

我会尽力解释服务，但 Symfony2[文档](http://symfony.com/doc/current/book/service_container.html)做得比我能做的要好。

在它的核心，服务只是一个类。`Dependency Injection Container`当一个类注册到 Symfony2 （或简称）时，它就变成了一个服务`Container`。此时，这个类是应用程序服务层的一部分。

服务可能具有依赖关系（而且通常确实如此），但它不是必需的。服务通常用作其他服务的依赖项。让我给你举个例子：

*   你有一个用来发送电子邮件的类，叫做`EmailSender`
*   您有一个类，其中包含有关如何通过 SMTP 发送电子邮件的说明，称为`SmtpTransport`
*   `EmailSender`具有 形式的依赖关系`SmtpTransport`。换句话说，为了`EmailSender`能够完成它的工作，它需要一个实例`SmtpTransport`来注入它。（请注意，虽然`EmailSender`有依赖关系，`SmtpTransport`但没有。）

假设您需要`EmailSender`在应用程序的五个不同位置使用。在每个地方，你可能有这样的代码：

```
$emailSender = new EmailSender(new SmtpTransport());  
$emailSender->send($email) 
```

这不是很多代码（因为`EmailSender`只有一个依赖项），但是当您决定`EmailSender`应该使用传输类而不是使用 SMTP 时会发生什么`sendmail`？您必须编辑每个代码块才能更新它。

另一种方法是将`EmailSender`其及其依赖项注册为服务。
注册看起来像这样：

```
// YourApp/YourBundle/Resources/config/services.yml
services:
  smtp_transport:
    class: YourApp\YourBundle\Email\SmtpTransport

  email_sender:
    class: YourApp\YourBundle\Email\EmailSender
    arguments:
      - @smtp_transport 
```

现在，要使用它（从有`container`意识的上下文中）：

```
$container->get('email_sender')->send($email); 
```

请注意实际使用该类发送电子邮件是多么简单和清洁？当然，您必须先完成注册服务的工作，但这很简单，只需完成一次。

想象一下，它`EmailSender`有三个依赖项，而不是一个。通过使用服务，您只需要修改服务注册，而无需更改您的实现代码（用于发送电子邮件的代码）。

简而言之，服务层充当 a) 具有一个或多个依赖项 b) 需要在“全局”范围内使用的类的中央存储库。通过从`Dependency Injection Container`.

我可能错了，但我认为 Symfony2 是第一个实现依赖注入容器的 PHP 框架。因此，很多 PHP 开发人员可能不熟悉服务的概念。我绝对建议您确保完全理解它，因为您会发现它是一个非常强大的工具。此外，服务的概念绝不限于 Symfony2 甚至 PHP——您将能够在各种框架和语言中利用这个概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:16:53.010

试试 Fabien 关于这个主题的系列文章：[依赖注入](http://fabien.potencier.org/article/11/what-is-dependency-injection)。

# java - 列出源依赖项

> ID：11407544
> 
> 赞同：0
> 
> 时间：2012-07-10T06:07:07.227
> 
> 标签：java, python, lisp

通过检查以下编程语言（Java、Python 和 Lisp）的源代码可以解决的源代码依赖程度如何。

例如，我是否可以通过查看一组 Python 文件来确定检查每个文件中的所有“导入”语句是唯一的依赖项（源依赖项）？

在 Lisp 中，我知道 (load "filename") 命令允许包含在其他文件中定义的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:30:22.857

Python中有更多的导入方式

例如

```
somemodule = __import__("somemodulename") 
```

也可以在运行时更改路径，例如

```
import os 
```

可能不会导入`os`您期望的模块。

您还可以通过其他方式包含代码

```
execfile(...)
execfile(filename[, globals[, locals]])

Read and execute a Python script from a file.
The globals and locals are dictionaries, defaulting to the current
globals and locals.  If only globals is given, locals defaults to it. 
```

您甚至可以包含存储在数据库中或从 url 下载的代码片段

所以不，你不能肯定地说

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:23:10.137

1.  即使您找到任何类型的“导入”语句，也不保证代码会使用它。

2.  在 Java 中，您可以导入名称空间，但也可以使用类的完整限定名，而无需任何导入语句

    javax.swing.JButton but = new javax.swing.JButton("MyButton");

3.  最后但并非最不重要的一点是，它们都支持某种符号编程。您可以使用纯字符串来加载或执行代码：

    对象 x = Class.forName("javax.swing."+compName); 返回 x.toString();

# python - 在 neo4jrestclient 中使用事务从索引中检索节点

> ID：11407546
> 
> 赞同：2
> 
> 时间：2012-07-10T06:07:13.520
> 
> 标签：python, transactions, neo4j

我想对已经保存到 neo4j 的一堆节点进行批处理操作，最终在它们之间创建关系。我有类似的东西

```
with gdb.transaction():
    for s_id, d_id in nodelist:
        sn = nidx['nid'][s_id].single
        dn = nidx['nid'][d_id].single 
```

`nidx`我创建的索引在哪里（'nid', s_id 是键/值对）。但是，它看起来像是`nidx['nid'][s_id]`一个 TransactionOperationProxy 对象，尽管我打算让它成为一个节点。有什么方法可以将它转换为节点，或者至少使用它来创建和之间的关系`sn`（`dn`类似于 sn.Follows(dn)）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T17:43:23.003

您可以使用批处理加载程序执行此操作，但使用 Gremlin 脚本会更容易。

如果您`nodelist`是节点 ID 对的列表，这里是 Gremlin 脚本批量加载边缘（未经测试）...

```
// gremlin.groovy

def batch_load(nodelist, label) {
  g.setMaxBufferSize(0)
  g.startTransaction()
  try {
    for (entry in nodelist) {
      s_id = entry[0]
      d_id = entry[1]
      // if s_id and d_id are actual node IDs, you don't need to use an index...
      sn = g.idx('someindex').get('nid',s_id)[0]
      dn = g.idx('someindex').get('nid',d_id)[0]
      g.addEdge(sn,dn,label)
    }
    g.stopTransaction(TransactionalGraph.Conclusion.SUCCESS)
    return true
  } catch (e) {
    g.stopTransaction(TransactionalGraph.Conclusion.FAILURE)  
    return e
  }
} 
```

以下是您在 Bulbs 中执行它的方式——您需要为 neo4jrestclient 修改它...

```
>>> from bulbs.neoj4server import Graph
>>> g = Graph()
>>> g.scripts.update('/path/to/gremlin.groovy')
>>> script = g.scripts.get('batch_load')
>>> params = dict(nodelist=your_node_list, label="follows")
>>> g.gremlin.execute(script, params) 
```

# symfony - 将当前路由或模板指定为活动链接 KnpMenu

> ID：11407550
> 
> 赞同：1
> 
> 时间：2012-07-10T06:07:35.033
> 
> 标签：symfony, menu, knpmenu

在 symfony2 中，如上所述，我想在 Controller 或 Template 中将指定的子菜单设置为活动状态，我该如何实现呢？也就是说，我想要几个路由（控制器动作，模板）映射到一个菜单子，这可能吗？我想我可以在控制器或模板中获取菜单并将其设置为活动状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T08:12:53.757

**这在使用KNPMenuBundle**时已经实现。`first` `last`为和`current`元素自动生成类。

* * *

您的菜单将自动如下所示：

```
<ul>
    <li class="first">
        <a href="/whatever1">Menu Level 1</a>        
    </li>
    <li class="current">
        <a href="/whatever2">Menu Level 2</a>        
    </li>
    <li class="last">
       <a href="/whatever3">Menu Level 3</a>
    </li>
</ul> 
```

假设您以这种方式使用菜单生成器：

```
//src/Acme/YourBundle/Menu/MenuBuilder.php
public function createSimpleMenu(Request $request)
    {
        $menu = $this->factory->createItem('root');
        $menu->setCurrentUri($request->getRequestUri());

        $menu->addChild('Menu Level 1', array('route' => '_route_whatever1'));
        $menu->addChild('Menu Level 2', array('route' => '_route_whatever2'));
        $menu->addChild('Menu Level 3', array('route' => '_route_whatever3'));

        return $menu;
    } 
```

* * *

因此，您需要将 css 应用于`current`而不是`active`. 如您所见，作业由`$menu->setCurrentUri($request->getRequestUri());`.

如果您希望手动自定义菜单（*在您的情况下，您希望有多个映射到同一元素的路由*），您可以使用 switch 语句：

```
//src/Acme/YourBundle/Menu/MenuBuilder.php
public function createSimpleMenu(Request $request)
{
// YOUR MENU AS USUAL FIRST
// ...
// A SWITCH IF YOU WISH TO CUSTOMIZE MANUALLY
switch($request->get('_route')) {
    case "_route_whatever1bis":
        $menu['Menu Level 1']->setCurrent(true);
        break;
    case "_route_whatever2bis":
        $menu['Menu Level 2']->setCurrent(true);
        break;
    case "_route_whatever3bis":
        $menu['Menu Level 3']->setCurrent(true);
        break;
    }
return $menu;
} 
```

**注意：**要自定义 KNP Menu Bundle 呈现菜单的方式，请覆盖`knp_menu.html.twig`. 您可以在[此处](https://stackoverflow.com/questions/11226963/customize-the-knpmenubundle)查看该过程。

# android - 如何将图像数据发送到其他蓝牙手机

> ID：11407551
> 
> 赞同：0
> 
> 时间：2012-07-10T06:07:53.210
> 
> 标签：android, bluetooth

我正在开发基于蓝牙的应用程序；在这里，我想发送文本数据和图像。我可以将我的设备与其他支持蓝牙的手机配对，但即使配对成功，我也无法将所需数据发送到目标手机。

在我在 Android 中搜索时，我们在传输数据“<”只是比较 J2me 蓝牙“>”期间不需要任何 Headset。那么如何将数据发送到目标手机？

我与目标手机成功建立连接后使用的代码片段如下。

```
clientSocket.connect(); //成功连接到目标手机

tmpOut = clientSocket.getOutputStream();//打开的输出流

tmpOut.write(image, 0, image.length);//试图发送数据，没有得到任何异常

//关闭clientsocket和outputstream

```

# c - 在丢失的 C 头文件上禁用 vim 的位置列表

> ID：11407565
> 
> 赞同：0
> 
> 时间：2012-07-10T06:09:04.667
> 
> 标签：c, vim, header-files

Vim 在 C 方面非常聪明，所以如果插入一个虚假的头文件，如`#include <stdioo.h>`.

> > foo.c:1|20| 致命错误：stdioo.h：没有这样的文件或目录 || 编译终止。

这很好，但无论出于何种原因，在包含`<mpi.h>`头文件时我都会遇到同样的错误。我知道这是一个 vim 问题 b/c 我可以分别用`mpicc`和编译和执行程序。`mpiexec`除了每次保存文件时都会弹出它非常烦人，发生这种情况时会忽略所有语法错误。

有什么方法可以指示 vim 忽略这个头文件，或者至少忽略所有的头文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:22:17.737

**<mpi.h>**文件在您的文件系统上的什么位置？

通常它是低一级的，例如*/usr/include/mpi/mpi.h*并且需要*<mpi/mpi.h>*才能访问它。

您可能需要在编译器的**-I**选项列表中添加另一个目录路径，或者将目录路径添加到 VIM 的**路径**选项变量

```
:help 'path 
```

将让您开始使用 VIM，您需要查看如何向当前设置添加选项，不知道您是否使用 cmake、make、visual something、netclipse 或其他任何东西。

但是一个简单的 ' **locate mpi.h** ' 将是开始的地方，因为你*知道*它就在那里。

你说“弹出”......你使用的是合成词还是这样的？同样，找到正确的路径也将有所帮助。显然 mpicc 知道包含文件的正确路径，你只需要告诉 VIM。（通过“路径”选项）

# android - 解析 sdcard 中的 XML 文件 - 出现空指针异常

> ID：11407566
> 
> 赞同：1
> 
> 时间：2012-07-10T06:09:05.783
> 
> 标签：android, xml-parsing, xmlpullparser

我想要的只是解析一个本地 XML 文件。当我将 XML 文件放在资源文件夹中时，代码可以正常工作。这是我的代码。

```
try {

        XmlResourceParser xpp = getResources().getXml(R.xml.catalog);
        xpp.next();
        int eventType = xpp.getEventType();
        int iter = 0;
        String elemtext = null;

        while (eventType != XmlPullParser.END_DOCUMENT) {

            if (eventType == XmlPullParser.START_TAG) {

                String elemName = xpp.getName();
                if (elemName.equals("catalog")) {
                    String journalAttr = xpp.getAttributeValue(null,
                            "journal");
                    String publisherAttr = xpp.getAttributeValue(null,
                            "publisher");
                    journal.setText(journalAttr);
                    publisher.setText(publisherAttr);
                }
                if (elemName.equals("article")) {
                    iter = iter + 1;
                }

                if (elemName.equals("edition")) {
                    elemtext = "edition";
                }
                if (elemName.equals("title")) {
                    elemtext = "title";
                }
                if (elemName.equals("author")) {
                    elemtext = "author";
                }
            }

            else if (eventType == XmlPullParser.TEXT) {
                if (iter == 1) {
                    if (elemtext.equals("edition")) {
                        edition1.setText(xpp.getText());
                    } else if (elemtext.equals("title")) {
                        title1.setText(xpp.getText());
                    } else if (elemtext.equals("author")) {
                        author1.setText(xpp.getText());
                    }
                }

                else if (iter == 2) {
                    if (elemtext.equals("edition")) {
                        edition2.setText(xpp.getText());
                    } else if (elemtext.equals("title")) {
                        title2.setText(xpp.getText());
                    } else if (elemtext.equals("author")) {
                        author2.setText(xpp.getText());
                    }

                }
            }
            eventType = xpp.next();
        }

    } catch (XmlPullParserException e) {
    } catch (IOException e) {
    } 
```

现在我的意图是如果将相同的文件放在 sdcard 中，则使代码正常工作。这是我的努力。

```
try {

        XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();
        int eventType = xpp.getEventType();
        int iter = 0;
        String elemtext = null;
        // get a reference to the file.
        File file = new File(Environment.getExternalStorageDirectory()
                + "/newdir/catalog.xml");
        FileInputStream fis = new FileInputStream(file);

        xpp.setInput(new InputStreamReader(fis));

        while (eventType != XmlPullParser.END_DOCUMENT) {

            if (eventType == XmlPullParser.START_TAG) {

                String elemName = xpp.getName();
                if (elemName.equals("catalog")) {
                    String journalAttr = xpp.getAttributeValue(null,
                            "journal");
                    String publisherAttr = xpp.getAttributeValue(null,
                            "publisher");
                    journal.setText(journalAttr);
                    publisher.setText(publisherAttr);
                }
                if (elemName.equals("article")) {
                    iter = iter + 1;
                }

                if (elemName.equals("edition")) {
                    elemtext = "edition";
                }
                if (elemName.equals("title")) {
                    elemtext = "title";
                }
                if (elemName.equals("author")) {
                    elemtext = "author";
                }
            }

            else if (eventType == XmlPullParser.TEXT) {
                if (iter == 1) {
                    if (elemtext.equals("edition")) {
                        edition1.setText(xpp.getText());
                    } else if (elemtext.equals("title")) {
                        title1.setText(xpp.getText());
                    } else if (elemtext.equals("author")) {
                        author1.setText(xpp.getText());
                    }
                }

                else if (iter == 2) {
                    if (elemtext.equals("edition")) {
                        edition2.setText(xpp.getText());
                    } else if (elemtext.equals("title")) {
                        title2.setText(xpp.getText());
                    } else if (elemtext.equals("author")) {
                        author2.setText(xpp.getText());
                    }

                }
            }
            eventType = xpp.next();
        }

    } catch (XmlPullParserException e) {
    } catch (IOException e) {
    } 
```

使用此代码时出现空指针异常。帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:31:44.360

我认为你没有正确解决。检查我的建议：

```
File root = android.os.Environment.getExternalStorageDirectory();
String a = root.getAbsolutePath() + "/newdir/catalog.xml";
FileInputStream fis = new FileInputStream(a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:27:27.437

[此示例与您的需要相同](http://qtcstation.com/2011/01/parsing-xml-from-the-sdcard-using-xmlpullparser/)

# asp.net - 从存储过程将参数发送到代码后面

> ID：11407567
> 
> 赞同：1
> 
> 时间：2012-07-10T06:09:06.587
> 
> 标签：asp.net, sql-server, stored-procedures

我正在使用 a`FormView`并将其绑定到 a`SqlDataSource`使用存储过程来编辑记录。问题是在更新记录后我需要调用另一个函数，我正在使用`onClick`按钮的属性。

此函数必须使用在`FormView`. 我知道如何`SCOPE_IDENTITY`在同一个存储过程中使用 when ，但这次我需要一些更容易在代码隐藏中完成的逻辑，但我不知道如何获取 ID，所以任何线索都会很棒。

这是按钮：

```
 <asp:Button ID="EditButton" runat="server" CausesValidation="True" CommandName="Update"
                            Text="Edit" OnClick="setProcessProgress" /> 
```

这是背后代码的精简版本：

```
protected void setProcessProgress(object sender, EventArgs e)
{
   int ID_p;
   ID_p = ; //TODO: Here I need to obtain the ID of the last edited record from the EditButton
   setProgress(ID_p);
} 
```

存储过程是一个简单的`UPDATE`语句。

我正在考虑将参数传递给后面的代码，但不知道如何，也许是这样的 `OnClick="setProcessProgress(@id)"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:11:24.470

像这样尝试，您需要将`OnCommand="CommandEventHandler"`事件处理程序附加到您的按钮。检查更多信息[Button.Command](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.command.aspx)

```
<asp:Button ID="EditButton" runat="server" CausesValidation="True" CommandName="Update"
                            Text="Edit"  
           CommandArgument="1"
           OnCommand="CommandBtn_Click" /> 
```

以及获取 ID 的代码

```
protected void CommandBtn_Click(Object sender, CommandEventArgs e) 

{ if (e.CommandName == "Update")
   {
      yourID =Convert.ToInt32(e.CommandArgument); 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:21:05.720

您可以使用 out 参数更新存储过程。这会给你之后的ID

更新。

然后，您可以将 ID 用于插入。

[http://blogs.msdn.com/b/spike/archive/2009/05/07/a-simple-example-on-how-to-get-return-and-out-parameter-values-using-ado-网络.aspx](http://blogs.msdn.com/b/spike/archive/2009/05/07/a-simple-example-on-how-to-get-return-and-out-parameter-values-using-ado-net.aspx)

# c++ - 如何使用升压屏障

> ID：11407577
> 
> 赞同：15
> 
> 时间：2012-07-10T06:10:01.687
> 
> 标签：c++, boost

什么是boost:barrier，如何使用这种boost方式。你能给我一个清楚的例子吗，因为我找到了以下例子：

```
 bool wait()
    {
        boost::mutex::scoped_lock lock(m_mutex);
        unsigned int gen = m_generation;

        if (--m_count == 0)
        {
            m_generation++;
            m_count = m_threshold;
            m_cond.notify_all();
            return true;
        }

        while (gen == m_generation)
            m_cond.wait(lock);
        return false;
    } 
```

上述代码中：m_cond.notify_all();是进入其他等待线程吗？你能清楚地告诉我屏障功能吗？谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T06:58:17.543

notify_all，通知等待线程。

> 障碍是一个简单的概念。也称为集合点，它是多个线程之间的同步点。屏障是为特定数量的线程（n）配置的，当线程到达屏障时，它们必须等待直到所有 n 个线程都到达。一旦第 n 个线程到达屏障，所有等待的线程都可以继续，并且重置屏障。

简单的例子。只有当 3 个线程调用屏障上的等待函数时，才会输出当前值。

```
#include <boost/thread.hpp>
#include <boost/thread/barrier.hpp>
#include <boost/bind.hpp>
#include <boost/atomic.hpp>

boost::mutex io_mutex;

void thread_fun(boost::barrier& cur_barier, boost::atomic<int>& current)
{
    ++current;
    cur_barier.wait();
    boost::lock_guard<boost::mutex> locker(io_mutex);
    std::cout << current << std::endl;
}

int main()
{
    boost::barrier bar(3);
    boost::atomic<int> current(0);
    boost::thread thr1(boost::bind(&thread_fun, boost::ref(bar), boost::ref(current)));
    boost::thread thr2(boost::bind(&thread_fun, boost::ref(bar), boost::ref(current)));
    boost::thread thr3(boost::bind(&thread_fun, boost::ref(bar), boost::ref(current)));
    thr1.join();
    thr2.join();
    thr3.join();
} 
```

# mysql - 在数据库中表示三选项的最佳方式是什么？

> ID：11407578
> 
> 赞同：3
> 
> 时间：2012-07-10T06:10:04.423
> 
> 标签：mysql, database-design

我有一个只能处于三种状态的对象列表。

数据的简化示例：

```
Substance State
H2O  solid
H2O  fluid
CO2  gas
...  ... 
```

是使用更好`TINYINT(2)`还是`ENUM`其他什么更好？我应该按原样插入值（VARCHAR）还是使用数字？外部值表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:11:55.273

任何内容都不会存储在不到一个字节中。

TINYINT(2) 和具有 3 个成员的 ENUM 都将产生 1 个字节的存储空间。要么都会好的。

ENUM 的好处是您可以使用简单的英文名称，并且它们存储紧凑。ENUM 的坏处是它们不是 ANSI SQL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:16:15.273

我会通过 ID 引用外部表。然后该表将信息显示为文本。在您的选择语句中，您只需加入即可。如果你不知道我在说什么，问我一个例子:)

不过，出于各种原因，我不会使用 ENUM。在这里找到最重要的：http: [//komlenic.com/244/8-reasons-why-mysqls-enum-data-type-is-evil/](http://komlenic.com/244/8-reasons-why-mysqls-enum-data-type-is-evil/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:12:51.537

创建一个主表作为状态（id int，desc varchar），根据它会遇到的问题

```
id   |  desc
1    |  Solid
2    |  Liquid
3    |  Gas 
```

并在解决方案（主）表中引用状态表的 id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T06:15:47.907

我认为您可以将信息存储在 BIT 类型的列中，并允许在

柱子。以下是价值和你的数据的映射。

H2O 固体 --> 是的

H2O 流体 --> FALSE

二氧化碳气体 --> NULL

# algorithm - 动态编程与贪婪方法？

> ID：11407579
> 
> 赞同：-4
> 
> 时间：2012-07-10T06:10:08.193
> 
> 标签：algorithm, dynamic-programming, greedy

我看到人们倾向于 DP 方法而不是贪婪方法，因为它可以解决优化问题。大家觉得哪一个更可取呢？我需要收集论据以支持与我的伙伴争论的更好技术。哈哈。好的，DP用于解决具有最优子结构和最优性原理的问题。但是DP比贪婪的方法更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:20:37.003

不知道您要解决什么问题，您的问题毫无意义。

动态规划是一种工具。它对于解决某一类问题很有用。

贪心算法是另一种工具。它们在其他情况下很有用。

这就像问“哪个更好 - 锤子或锯子”？

```
The answer will be very different depending on what you are trying to do. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:20:20.623

让我们以[硬币变化为例](http://en.wikipedia.org/wiki/Change-making_problem)。如果您采用贪婪方法，大多数时候您可能无法得到正确的结果，但如果您采用 DP 方法，您将始终得到正确的结果。事实上，解决问题的唯一方法就是使用DP。

要回答您的问题，请忘记最优性，但使用 Greedy 您可能无法首先获得针对某些问题的正确解决方案。

# c# - 如何存储长度前缀字符串

> ID：11407586
> 
> 赞同：0
> 
> 时间：2012-07-10T06:10:55.437
> 
> 标签：c#, string, memory, pointers, struct

我有一个程序可以接收二进制序列化的网络数据包。我目前有一种通过使用指针将数据直接从字节数组存储到结构中的方法。但是我现在需要的是一种在结构中存储 UTF 字符串的方法，同时仍然保持从字节数组复制的简单方法。假定该字符串以无符号短整数为前缀，指示字符串的长度（以字节为单位）。这是 C# 在内部存储 char[] 或字符串的方式，还是我需要创建自己的结构来存储它？

我当前的结构布局是这样的：

```
public struct GenericPacket
{
    public short packetid;

    public static GenericPacket ReadUsingPointer(byte[] data)
    {
        unsafe
        {
            fixed (byte* packet = &data[0])
            {
                return *(GenericPacket*)packet;
            }
        }
    }
} 
```

使用指针读取只需要一个字节数组并返回一个指向它的指针，但作为一个 GenericStruct。这适用于所有普通类型，但字符串更复杂。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:18:04.163

那是一个 BSTR 和 BSTR 方法将适用于它（在 Win32 和 Win32 兼容性库中可用） - 如果您的前缀指的是字节，而不是字符数，因为字符可以是多个字节；BSTR 对此一无所知。

C 字符串以空值结尾，没有前缀，C++ 和 C# 字符串使用实现定义的存储，尽管它们通常使用带有单独长度参数的数组。他们绝对不是 BSTR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:19:19.547

您可以使用返回字符串的 System.Text.Encoding.GetString(byte[]) 或 System.Text.Encoding.UTF8.GetString(byte[])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:20:42.833

您可以像这样从 char[] 构造一个字符串

```
char[] foo = new char[] {'a','b','c','d'}
string bar = new string(foo); 
```

将此与范围数组副本结合起来，以从更大的字节块中提取字符串。

我相信这是 System.Text.Encoding.GetString(byte[] data, int start, int length) 实际上在内部执行的操作，但是在 .NET Micro Framework 中这是不可用的，因此您必须将其拼写出来。

# java - 在 netbeans 7.1.2 中构建项目时出现问题？

> ID：11407591
> 
> 赞同：0
> 
> 时间：2012-07-10T06:11:45.523
> 
> 标签：java, netbeans, build

我在 netbeans 7.1.2 中有一个项目，当我尝试构建项目时遇到以下问题

```
D:\netbeans_workspace\Servlets-DWR\nbproject\build-impl.xml:479: The libs.CopyLibs.classpath property is not set up.
This property must point to 
org-netbeans-modules-java-j2seproject-copylibstask.jar file which is part
of NetBeans IDE installation and is usually located at 
<netbeans_installation>/java<version>/ant/extra folder.
Either open the project in the IDE and make sure CopyLibs library
exists or setup the property manually. For example like this:
 ant -Dlibs.CopyLibs.classpath=a/path/to/org-netbeans-modules-java-j2seproject-copylibstask.jar
BUILD FAILED (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:08:49.297

您可以按照以下步骤解决此问题：

1.  在 NetBeans 中，选择工具 > 选项 > 其他 > Ant
2.  在“属性”部分中，添加以下属性：

**libs.CopyLibs.classpath=/java/ant/extra/org-netbeans-modules-java-j2seproject-copylibstask.jar**

*确保替换为报告错误的 netbeans 实例的路径。例如 C:/Program Files/NetBeans 6.9.1*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:30:54.820

看起来您的项目正在使用 Ant，但您没有安装 Ant 插件。要安装插件，请转到`Tools -> Plugins`

然后单击“可用插件”选项卡，单击“名称”标题以按字母顺序排序。单击 Ant 旁边的复选框，然后单击安装。

如果您在列表中没有看到“Ant”，您可以尝试单击“更新”选项卡中的“重新加载目录”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T13:36:44.843

**一个真实的例子是最好的解决方案**

**在 NetBeans 6.9.1 中**

您可以按照以下步骤解决此问题：

*   在 NetBeans 中，选择工具 > 选项 > 其他 > Ant
*   在“属性”部分中，添加以下属性：

**在 NetBeans 7.4 中**

*   在 NetBeans 中，选择工具 > 选项 > JAVA>
*   在“属性”部分中，添加以下属性：

就我而言，**斜线**和**反斜线**真的很痛苦，所以最后......

> **libs.CopyLibs.classpath=C:\Program Files\NetBeans 7.1\java\ant\extra\org-netbeans-modules->java-j2seproject-copylibstask.jar**

> **libs.CopyLibs.classpath=C:\Program Files (x86)\NetBeans 6.9.1\java\ant\extra\org-netbeans-modules-java-j2seproject-copylibstask.jar**

**编辑** **编辑** **编辑**

**在我****再次**遇到这个问题后，我的解决方案没有**帮助** ，所以我读了一些页面是重新安装 netbeans，在我的情况下它有效，但请注意你没有只有默认属性 `build.compiler.emacs=true`

在您的`Tools>Options>Miscellaneous>Ant` 属性部分，您的项目属性已正确定义，如 jdk 和服务器，意味着环顾四周，然后清理并部署这应该可以工作

哦，看看[一些答案](https://stackoverflow.com/questions/8386685/is-copyfiles-a-standard-ant-task)，这是我对 shareef 用户的评论

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T18:19:29.053

在任何情况下，将绝对路径添加到 org-netbeans-modules-java-j2seproject-copylibstask.jar 而不是相对路径....

就我而言，对于 DEBIAN 和 NETBEANS 7.4：

工具 > 选项 > JAVA

在属性部分添加：

libs.CopyLibs.classpath=/home/myuser/netbeans-7.4/java/ant/extra/org-netbeans-modules-java-j2seproject-copylibstask.jar

你一个funcionar.....

# iphone - 对 iPhone 中自定义相机的影响

> ID：11407592
> 
> 赞同：0
> 
> 时间：2012-07-10T06:11:47.480
> 
> 标签：iphone, opengl-es, camera, instagram

> **可能重复：**
> [ios：为照片添加实时滤镜效果](https://stackoverflow.com/questions/7132333/ios-adding-real-time-filter-effects-to-photos)

我想对相机拍摄的图像应用滤镜效果。在捕获图像之前，我成功地将滤镜应用于图像。

但我想在相机上现场展示这种效果

[http://itunes.apple.com/us/app/instagram/id389801252?mt=8](http://itunes.apple.com/us/app/instagram/id389801252?mt=8)

和

[http://itunes.apple.com/in/app/camwow-free-photo-booth-effects/id418368641?mt=8](http://itunes.apple.com/in/app/camwow-free-photo-booth-effects/id418368641?mt=8)

应用程序做到了。

我知道在 camwow 他们正在使用 OpenGL，但不确定 instagram。有没有其他方法可以在cameraview上实时应用这种效果，也可以在拍照后应用到那张照片上。

如果有人知道我如何使用 openGl 做到这一点，我的意思是任何我可以从其中开始 OpenGl 的教程，以便我可以尽快得到我的要求

# .net - 为什么没有EventHandler 在 BCL 中代表？

> ID：11407595
> 
> 赞同：1
> 
> 时间：2012-07-10T06:12:02.333
> 
> 标签：.net, event-handling

只是想知道为什么表格的代表

```
public delegate void EventHandler<TSender, TEventArgs>(
       TSender sender, 
       TEventArgs e
) 
where TEventArgs : EventArgs; 
```

框架中不存在。是否有理由只提供以下内容？

```
public delegate void EventHandler<TEventArgs>(
     object sender,
     TEventArgs e
)
where TEventArgs : EventArgs; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:24:50.677

回答你的“为什么”问题并不容易——因为除了他们之外，谁知道为什么微软的 BCL 工程师决定这样做而不是其他方式？- 但我会做出有根据的猜测：

> ```
> public delegate void EventHandler<TEventArgs>(
>     Object sender,
>     TEventArgs e
> )
> where TEventArgs : EventArgs 
> ```

我可以想象这个委托类型是作为“事后的想法”添加到 .NET BCL 中的。请记住，.NET 1.0 没有泛型。

另一个原因是，事件处理程序通常只为一个发送者处理事件，因此在该处理程序中，您甚至无需查看`sender`参数就已经知道发送者，所以为什么要让委托比大多数人需要的更通用实际目的。

您通常对事件参数`e`比对发送者更感兴趣，因此通过使其成为通用类型来避免不必要的类型转换是有意义的。

# java - 从 setWebViewClient 获取网页标题？

> ID：11407599
> 
> 赞同：4
> 
> 时间：2012-07-10T06:12:32.810
> 
> 标签：java, android

我在我的 android 应用程序中使用 webview。我想获取 webview 中显示的当前页面的标题。我正在使用以下代码来做到这一点

```
webView.setWebViewClient(new WebViewClient(){
    public void onPageFinished(WebView view, String url) {
        TextView t=(TextView)findViewById(R.id.title); 
        t.setText(view.getTitle());
    }
} 
```

此代码有效，但并非总是如此。有时它不显示标题。有时它会显示上一页的标题。这里有什么问题？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T06:15:45.733

会给你的`WebChromeClient`网页标题比`WebViewClient`

```
webview.loadUrl("https://www.google.co.in/");
webview.setWebChromeClient(new WebChromeClient() {
    @Override
    public void onReceivedTitle(WebView view, String sTitle) {
        super.onReceivedTitle(view, sTitle);
        if (sTitle != null && sTitle.length() > 0) {
            title.setText(sTitle);
        } else {
            title.setText("Web Page");
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:41:43.767

检查此代码，我正在获取网页标题

```
webview.loadUrl("https://www.google.co.in/");
webview.setWebViewClient(new WebViewClient() {
    public void onPageFinished(WebView view, String url) {
        String name = webview.getTitle();
        Log.v("Title",name);
    }
}); 
```

# mysql - SQL选择组查询

> ID：11407601
> 
> 赞同：10
> 
> 时间：2012-07-10T06:13:02.977
> 
> 标签：mysql, sql, database

下面是我的表

表格1

```
+--------+----------+---------+  
| amount | make     | product |  
+--------+----------+---------+  
|    100 | Nokia    | Mobiles |   
|    300 | Samesung | Mobiles |   
|    700 | Micromax | Mobiles |   
|   1000 | Karbonn  | Mobiles |   
|    500 | Lava     | Mobiles |   
|    100 | Floyer   | Gift    |   
|    500 | Arichies | Gift    |   
|    300 | Feeling  | Gift    |   
+--------+----------+---------+ 
```

现在我想显示每个产品的两个最高金额......

所以我想构建一个 SQL 查询，它给我的结果如下..

```
+--------+----------+---------+  
| amount | make     | product |  
+--------+----------+---------+  
|   1000 | Karbonn  | Mobiles |   
|    700 | Micromax | Mobiles |   
|    500 | Arichies | Gift    |   
|    300 | Feeling  | Gift    |   
+--------+----------+---------+ 
```

请帮我建立这样的查询..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T06:26:55.530

您可以使用此解决方案根据以下条件检索“*分组最大值*” `amount`：

```
SELECT a.*
FROM Table1 a
INNER JOIN Table1 b ON a.product = b.product AND a.amount <= b.amount
GROUP BY a.amount, a.product
HAVING COUNT(*) <= 2 
```

只需将 更改为您想要为每个产品检索`2`的*顶部行数。*

如果您想检索每个产品的最低两行，您只需将 中的`<=`符号更改`INNER JOIN`为`>=`.

你可以在这里摆弄这个解决方案：[SQL-Fiddle Demo](http://sqlfiddle.com/#!2/6f273/23/0)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T06:26:15.580

```
select product, make, amount, rnk
from (
  select l.product, l.make, l.amount, count(*) as rnk
  from table1 as l
  left join table1 as r
  on (r.product = l.product and l.amount <= r.amount) 
  group by l.product, l.make
) a
where rnk <= 2 
```

在此处查看ideea和其他示例：[http ://www.xaprb.com/blog/2005/09/27/simulating-the-sql-row_number-function/](http://www.xaprb.com/blog/2005/09/27/simulating-the-sql-row_number-function/)

和基于 zane bien 测试数据的[sql fiddle 。](http://sqlfiddle.com/#!2/6f273/40)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:33:58.707

```
SELECT a.*
FROM Table1 a
INNER JOIN Table1 b ON a.product = b.product AND a.amount <= b.amount
GROUP BY a.amount, a.product
HAVING COUNT(*) <= 2
ORDER BY a.amount desc 
```

请参考[http://sqlfiddle.com/#!2/9ba82/1](http://sqlfiddle.com/#!2/9ba82/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T06:24:29.090

```
select top 2 amount, make, product from table1 
where product='Mobiles'
order by amount desc
union
select top 2 amount, make, product from table1 
where product='Gift'
order by amount desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T06:27:37.793

您可以通过两种方式执行此操作：1）添加将反映顺序的行索引列，然后选择所有行 <= 2 的行

```
SELECT amount, make,product
FROM 
(SELECT  ROW_NUMBER() OVER (PARTITION BY [product] ORDER BY [amount] DESC) AS [RowID],*
FROM [dbo].[Table1]) RESULT
WHERE RowID <= 2 
```

2）您也可以将表连接到自身

```
SELECT a1.* FROM Table1 AS a1
  LEFT JOIN Table1 AS a2 
    ON a1.product = a2.product AND a1.amount<= a2.amount
GROUP BY a1.product
HAVING COUNT(*) <= 2; 
```

# javascript - 如何在传单弹出窗口中以 html 形式创建 csrf 令牌？

> ID：11407602
> 
> 赞同：1
> 
> 时间：2012-07-10T06:13:04.947
> 
> 标签：javascript, django, forms, csrf, leaflet

如何在传单弹出窗口中创建 csrf 令牌，以便用户可以通过与表单交互将一些文本发布到数据库？我已经将`{% csrf_token %}`标签添加到一个简单的 html 表单中，它工作正常，但是当我将它放在弹出窗口的内容部分时它不起作用，尽管其他 html 元素工作正常。

```
map.on('click', function(e) {
 var popupContent = '<p>What would you like to post to this location? <form action="/post_temp/" method="post"> {% csrf_token %} <p> <input type="text" name="post"> </p> <input type="submit" value="Post"> </form>',  
 popup = new L.Popup();  
 popup.setLatLng(e.latlng);
 popup.setContent(popupContent);
 map.openPopup(popup); 
```

});

基本上，当我将令牌留在其中时，Leaflet 地图不会完全加载，但如果我将其排除在外，我会收到 CSRF 令牌丢失或不正确的错误。

我对这一切（javascript/leaflet/web dev/django）有点陌生，所以我不确定问题出在哪里或应该从哪里开始？我想我将不得不在leaflet.js 代码周围戳一下，但我不确定我是否能够理解它。任何明确的建议或我可以插入的一些代码，或者只是为什么（用外行的话）代码不能正常工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T23:47:28.413

对于任何人的未来参考，原始海报代码失败的原因是因为在 Django 中，

```
{% csrf_token %} 
```

呈现为单引号 html 元素。因为 Django 的模板语言在任何 JavaScript 或 html 元素之前呈现，所以引号会被弄乱。如果原作者把所有的单引号都转成双引号，再把双引号转成单引号，代码就可以了。

```
map.on('click', function(e) {
 var popupContent = "<p>What would you like to post to this location? <form action='/post_temp/' method='post'> {% csrf_token %} <p> <input type='text' name='post'> </p> <input type='submit' value='Post'> </form>",  
 popup = new L.Popup();  
 popup.setLatLng(e.latlng);
 popup.setContent(popupContent);
 map.openPopup(popup); 
```

上面更正的代码将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T12:19:44.763

您可以自己`csrfmiddlewaretoken`发送

```
$.post("/view_func/", 
      {
        yourself_var:yourself_data,
        csrfmiddlewaretoken:getCookie('csrftoken'),//or use $.cookie
      }, 
      function(data) {
       //handler result
      }
    )

function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1)); 
                break;
            }    
        }    
    }    
    return cookieValue;
} 
```

好好享受

# mysql - 没有提示指令的直接连接中的表顺序是否会影响性能？

> ID：11407605
> 
> 赞同：2
> 
> 时间：2012-07-10T06:13:24.927
> 
> 标签：mysql, sql, sql-server, oracle, informix

所有基于 SQL 的 RDBMS（版本长达 10 年）：

直接连接查询（没有提示指令）中的表顺序是否会影响最佳性能和内存管理？听说最后一个join应该是最大的表。您的数据库的查询优化器如何处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:21:20.707

回答您的问题 - 是的，表的顺序在连接中有所不同。

您还可以让优化器了解执行计划。

ORDERED 提示使 Oracle 按照它们在 FROM 子句中出现的顺序连接表。

例如，此语句将表 TAB1 连接到表 TAB2，然后将结果连接到表 TAB3：

```
 SELECT /*+ ORDERED */ TAB1.COL1, TAB2.COL2, TAB3.COL3
     FROM TAB1, TAB2, TAB3
    WHERE TAB1.COL1 = TAB2.COL1
         AND TAB2.COL1 = TAB3.COL1; 
```

如果在执行连接的 SQL 语句中省略 ORDERED 提示，优化器会选择连接表的顺序。如果您知道优化器不知道的从每个表中选择的行数，您可能希望使用 ORDERED 提示来指定连接顺序。此类信息将允许您比优化器更好地选择内部和外部表。

通常，如果您分析表，优化器会选择一个有效的星型计划。您还可以使用提示来改进计划。最精确的方法是按照索引中键的顺序对 FROM 子句中的表进行排序，大表在后。然后使用以下提示：

```
/*+ ORDERED USE_NL(FACTS) INDEX(FACTS FACT_CONCAT) */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:04:55.687

只是为了添加更多关于这个主题......是和否，取决于。这就是我的回答。它取决于许多因素，您使用的 RDBMS（MySQL、MSSQL Server、Oracle、DB2 ......）、连接类型、表大小（也就是行数）、索引等等。

先前的答案说是和否，并呼吁在查询中使用提示。但你的问题是：

> 连接语句中表的顺序是否有所不同...

在我看来，这忽略了查询提示的使用，因为您正在强制查询优化器使用您喜欢的顺序。

因此，重用[我对您的问题的第一条评论](https://stackoverflow.com/questions/10684604/sql-server-does-order-of-full-outer-join-matter)中发布的答案，@Mark Brackett 正确指出重新排列您的联接（没有查询提示）不会影响性能，因为查询优化器仍将使用最有效的执行计划来执行当前查询. 也许这不是最有效的，因此您可以使用提示并强制在连接上使用您想要的顺序，从而修改查询的执行计划。

有关以下链接的更多讨论： [顺序在 JOIN 子句中是否重要？](http://weblogs.sqlteam.com/joew/archive/2008/02/29/60542.aspx) [优化连接方法](http://www.sqlservercentral.com/articles/Advanced+Querying/optimizerjoinmethods/1708/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:56:44.440

**不。**

无论如何，就 Informix 而言。优化器将自行决定处理表的顺序，它们出现在`FROM`子句中的顺序无关紧要。*除非您选择覆盖默认行为。*

您可以使用`+ORDERED`查询优化器的提示来强制它按照它们在`WHERE`子句中出现的顺序加入表，即：

```
SELECT --+ORDERED 
       x.col1, y.col2, z.col3
  FROM z, y, x
  WHERE ... 
```

强制优化器扫描 z、连接到 y 并连接到 x，*即使这会创建中间笛卡尔积。*所以应该小心使用。

* * *

*注意：这个答案是在问题仅标记为 Informix，而不是多个 RDBMS 技术时编写的。*

# c# - 以行列格式将数据插入网格

> ID：11407606
> 
> 赞同：0
> 
> 时间：2012-07-10T06:13:29.633
> 
> 标签：c#, xaml, windows-runtime

我正在使用 C# 和 XAML 开发 Metro 应用程序，所以我需要一些帮助来将一些 XAML 代码转换为 C#，下面的代码在 XAML 中并且工作正常，我想在 C# 中执行此操作

```
<Grid x:Name="ObjRootGrid" Background="Black" Margin="248,198,227,182">
    <Grid.RowDefinitions>
        <RowDefinition Height="78*"/>
        <RowDefinition Height="101*"/>
        <RowDefinition Height="94*"/>
        <RowDefinition Height="111*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="111*"/>
        <ColumnDefinition Width="143*"/>
        <ColumnDefinition Width="147*"/>
        <ColumnDefinition Width="141*"/>
        <ColumnDefinition Width="141*"/>
    </Grid.ColumnDefinitions>
    <TextBlock Grid.Column="1" HorizontalAlignment="Left" Margin="61,49,0,0" Grid.Row="1" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/>
    <TextBlock Grid.Column="2" HorizontalAlignment="Left" Margin="71,45,0,0" Grid.Row="2" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/>
    <TextBlock HorizontalAlignment="Left" Margin="68,45,0,0" Grid.Row="2" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/>
    <TextBlock Grid.Column="1" HorizontalAlignment="Left" Margin="106,58,0,0" Grid.Row="2" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/>
    <TextBlock HorizontalAlignment="Left" Margin="63,58,0,0" Grid.Row="3" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top"/>

</Grid> 
```

任何人都可以帮我解决这个问题，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:46:49.180

```
 var grid = new Grid() {
                Name = "ObjRootGrid",
                Background = new SolidColorBrush(Colors.Black),
                Margin = new Thickness(248, 198, 227, 182)
            };
            var rowDef1 = new RowDefinition();
            rowDef1.Height = new GridLength(78, GridUnitType.Star);
            grid.RowDefinitions.Add(rowDef1);
            //continue adding row definitions...
            var colDef1 = new ColumnDefinition();
            colDef1.Width = new GridLength(111, GridUnitType.Star);
            grid.ColumnDefinitions.Add(colDef1);
            //continue adding column definitions...

            var textBox1 = new TextBlock() {
                HorizontalAlignment = System.Windows.HorizontalAlignment.Left,
                Margin = new Thickness(61,49,0,0),
                TextWrapping = TextWrapping.Wrap,
                Text = "TextBlock",
                VerticalAlignment = System.Windows.VerticalAlignment.Top
            };
            Grid.SetColumn(textBox1, 1);
            Grid.SetRow(textBox1, 1);
            grid.Children.Add(textBox1);
            //continue adding text blocks... 
```

# gwt - 示例 GWT2.5 应用程序

> ID：11407608
> 
> 赞同：-6
> 
> 时间：2012-07-10T06:13:44.740
> 
> 标签：gwt, gwt2, uibinder

请给我示例 GWT2.5 应用程序，其中包含 2.5 中的所有附加功能。请给我已经尝试过 UiBinder 增强功能。但它不起作用。

请尽快回复我。这很紧急

以下是代码，

## 主入口点

```
package com.MyApp.client;

import com.google.gwt.core.client.EntryPoint;
 import com.google.gwt.user.client.ui.RootPanel;

public class MainEntryPoint implements EntryPoint {

/** 
 * Creates a new instance of MainEntryPoint
 */
public MainEntryPoint() {
}

/** 
 * The entry point method, called automatically by loading a module
 * that declares an implementing class as an entry-point
 */
@Override
public void onModuleLoad() {
    final MainViewClass mainView = new MainViewClass();
    RootPanel.get().add(mainView);
} 
```

}

* * *

## 我的行动单元

```
package com.Rajaa.client;

import com.google.gwt.cell.client.AbstractCell;
import com.google.gwt.cell.client.Cell.Context;
import com.google.gwt.cell.client.ValueUpdater;
import com.google.gwt.core.client.GWT;
import com.google.gwt.dom.client.Element;
import com.google.gwt.dom.client.NativeEvent;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.safehtml.shared.SafeHtmlBuilder;
import com.google.gwt.uibinder.client.UiHandler;
import com.google.gwt.uibinder.client.UiRenderer;
import com.google.gwt.user.client.Window;

public class MyActionCell extends AbstractCell<String> {

interface MyUiRenderer extends UiRenderer {

    void render(SafeHtmlBuilder sb, String name);

    void onBrowserEvent(EmployeeMain o, NativeEvent e, Element p, String n);
}
private static MyUiRenderer renderer = GWT.create(MyUiRenderer.class);

@Override
public void render(Context context, String value, SafeHtmlBuilder builder) {
    renderer.render(builder, value);
}

@Override
public void onBrowserEvent(Context context, Element parent, String value,
        NativeEvent event, ValueUpdater<String> updater) {
    renderer.onBrowserEvent(this, event, parent, value);
}

public MyActionCell() {
    super("click");
}

@UiHandler("nameSpan")
void onNameGotPressed(ClickEvent event, Element parent, String name) {
    Window.alert(name + " was pressed!");
} 
```

}

* * *

## 我的主视图

```
package com.MyApp.client;

import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
 import com.google.gwt.uibinder.client.UiBinder;
 import com.google.gwt.uibinder.client.UiField;
import com.google.gwt.uibinder.client.UiHandler;
import com.google.gwt.user.cellview.client.CellTable;
import com.google.gwt.user.cellview.client.Column;
import com.google.gwt.user.cellview.client.TextColumn;
import com.google.gwt.user.client.Window;
 import com.google.gwt.user.client.ui.Composite;
 import com.google.gwt.user.client.ui.Widget;
 import java.util.Arrays;
 import java.util.List;

public class MyMainView extends Composite {

@UiField
CellTable<Student> table;

private static EmployeeUiBinder uiBinder = GWT.create(EmployeeUiBinder.class);

interface EmployeeUiBinder extends UiBinder<Widget, MyMainView> {
}

public Employee() {
    super.initWidget(uiBinder.createAndBindUi(this));
    TextColumn<Student> nameColumn = new TextColumn<Student>() {

        @Override
        public String getValue(Student object) {
            return object.name;
        }
    };
    table.addColumn(nameColumn, "Name");

    final TextColumn<Student> ageColumn = new TextColumn<Student>() {

        @Override
        public String getValue(Student object) {
            return object.age;
        }
    };
    table.addColumn(ageColumn, "Age");

    final TextColumn<Student> addressColumn = new TextColumn<Student>() {

        @Override
        public String getValue(Student object) {
            return object.address;
        }
    };
    table.addColumn(addressColumn, "Address");

    Column<Student, String> editColumn = new Column<Student, String>(new MyActionCell()) {

        @Override
        public String getValue(Student object) {
            return "Edit";
        }
    };
    table.addColumn(editColumn, "Edit");

    table.setRowCount(DETAILS.size(), true);

    table.setRowData(0, DETAILS);
}

private static class Student {

    private final String name;

    private final String age;

    private final String address;

    public Student(String name, String age, String address) {
        this.name = name;
        this.age = age;
        this.address = address;
    }
}
private static final List<Student> DETAILS = Arrays.asList(
        new Student("xxx", "50", "vvvvvvvvv"),
        new Student("xxxxxx", "37", "dfdfdfdf"),
        new Student("xxxx", "52", "fvxfxcfxdf"));

@UiHandler("nameSpan")
void onNameGotPressed(ClickEvent event) {
    Window.alert("Yes!");
} 
```

}

* * *

## MyMainView.ui.xml

```
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
xmlns:g="urn:import:com.google.gwt.user.client.ui"
    xmlns:h="urn:import:com.google.gwt.user.cellview.client">
        <ui:with field='name' type='java.lang.String'/>

<ui:style>

</ui:style>
<g:HTMLPanel>
    <h:CellTable ui:field="table"/> 
```

'

```
 <g:Button ui:field='nameSpan'><ui:text from='{name}'/></g:Button>. 
```

```
</ui:UiBinder> 
```

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:20:39.213

Google Web Toolkit 文档已更新为最新（目前为 2.5）版本。正如你所说，UiBinder 有了新的改进。

根据 Google 博客文章[What's new in GWT 2.5](https://developers.google.com/web-toolkit/doc/latest/ReleaseNotes)：

> GWT 2.5 为 UiBinder 添加了扩展，允许它支持单元渲染和事件处理。特别是，这种设计使 UiBinder 能够生成一个 UiRenderer 实现来帮助渲染 SafeHtml，并将事件分派给 @UiHandler 标签指定的方法。有关详细信息，请参阅为单元格渲染 HTML。
> 
> 我们还引入了 IsRenderable/RenderablePanel 类型。当由应用程序而不是 HTMLPanel 使用时，它们可以显着缩短渲染时间并减少复杂 UiBinder UI 的延迟。

该文档在 2.5 中显示了有关该功能的多个示例。您可以在此处查看示例：[Rendering HTML for Cells](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder#Rendering_HTML_for_Cells)。

# ajax - 无法从链接中获取 json 数据

> ID：11407613
> 
> 赞同：0
> 
> 时间：2012-07-10T06:14:06.537
> 
> 标签：ajax, json, jquery

这是我的脚本，我无法从链接中获取json数据，请帮助我，如果我在任何地方错了，请指出，提前谢谢你

```
<script type="text/javascript">
          function getsomethin()
          //wait for HTML document
          {
              alert("l");
              $.getJSON('http://developers-blog.org/resources/jquery-ajax/heroes-list.json', function (data) {
                  console.log(data);                  alert(data);
                  $.each(data, function (i, name) {
                      $("div").append(name + " ");
                  });
              });
          }       

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:40:59.450

我继续使用这种格式从链接中获取数据，它有效，感谢你们的支持

```
if (xmlHttp.readyState==4)
        {
            alert(xmlHttp.status);
            if(xmlHttp.status==200)
            {

            alert("hi");
            var jsondata=eval("("+xmlHttp.responseText+")") //retrieve result as an JavaScript object
            jsonOutput=jsondata.message.result;
            alert(jsonOutput);

            InitializeLeadStorage()

        }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:17:03.657

您必须使用[JsonP](http://en.wikipedia.org/wiki/JSONP)进行跨域请求。

“jsonp”：使用 JSONP 加载到 JSON 块中。添加一个额外的“？callback =？” 到 URL 的末尾以指定回调。通过将查询字符串参数“_=[TIMESTAMP]”附加到 URL 来禁用缓存，除非缓存选项设置为 true。

试试这样

```
$(document).ready(function() {
    var url =  "http://developers-blog.org/resources/jquery-ajax/heroes-list.json";
    $.getJSON(url + "?callback=?",  function(data) {
        console.log(data);                  alert(data);
                  $.each(data, function (i, name) {
                      $("div").append(name + " ");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:19:06.097

如果它的跨域，你需要 jsonp

```
$.ajax({
    url: 'http://example.com/.../file.json',
    data: 'param=3',
    dataType: 'jsonp',
    success: function(results) {
        //callback
    },
    complete: function() {
        //callback
    }
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# ipad - iPad PDF文件显示使用苹果的ZoomingPDFViewer源码

> ID：11407614
> 
> 赞同：1
> 
> 时间：2012-07-10T06:14:12.893
> 
> 标签：ipad, pdf, pdf-generation

我尝试使用来自“developer.apple.com”的[ZoomingPDFViewer](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010281)源代码并显示 PDF 文件。我的代码的不同之处在于我正在使用 Nib 文件来添加一些额外的功能。我只是使用源代码中的 PDFScrollView 和 TiledPDFView 类文件。当我尝试调用方法 [(PDFScrollView *)self.view setPDFPage:PDFPage]; 我收到以下错误：

> **Smart_Reader[408:f803] -[UIView setPDFPage:]: 无法识别的选择器发送到实例 0x6ea09b0 Smart_Reader[408:f803] *** **由于未捕获的异常而终止应用程序** ' **NSInvalidArgumentException** '，原因：'-[UIView setPDFPage:]: 无法识别的选择器sent to instance 0x6ea09b0' *** First throw call stack: (0x1283022 0x183bcd6 0x1284cbd 0x11e9ed0 0x11e9cb2 0x2a49 0x489e29 0x489133 0x48a3bf 0x48ca21 0x48c97c 0x4853d7 0x1ea1a2 0x1ea532 0x1d0dc4 0x1c4634 0x2176ef5 0x1257195 0x11bbff2 0x11ba8da 0x11b9d84 0x11b9c9b 0x21757d8 0x217588a 0x1c2626 0x1e5d 0x1dc5) terminate called throwing an exception**

我对 Objective-c 非常陌生，这是我在 stackoverflow.com 上的第一篇文章。我将非常感谢这个伟大社区的任何帮助

PDFReader.h

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@interface ReaderViewController : UIViewController //<UIScrollViewDelegate>
{
    IBOutlet UILabel *TapLabel;
}

- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer;

@end 
```

PDFReader.m

```
#import "ReaderViewController.h"
#import <QuartzCore/QuartzCore.h>
#import "TiledPDFView.h"
#import "PDFScrollView.h"
#import "singleton.h"

@interface ReaderViewController ()

@end

@implementation ReaderViewController
{

}

- (void)viewDidLoad
{

    [super viewDidLoad];
    self.view.backgroundColor = [UIColor clearColor];

    NSDictionary *infoDictionary = [[NSBundle mainBundle] infoDictionary];

    NSString *name = [infoDictionary objectForKey:@"NEWGEN KNOWLEDGE WORKS"];
    NSString *version = [infoDictionary objectForKey:@"CFBundleVersion"];

    self.title = [NSString stringWithFormat:@"GENIUS READER",name,version];

    TapLabel.backgroundColor = [UIColor clearColor];
    TapLabel.textColor = [UIColor whiteColor];
    TapLabel.textAlignment = UITextAlignmentCenter;
    TapLabel.font = [UIFont systemFontOfSize:24.0f];

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    singleTap.numberOfTouchesRequired = 1; singleTap.numberOfTapsRequired = 1; //singleTap.delegate = self;
    [self.view addGestureRecognizer:singleTap];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

-(void)handleSingleTap:(UITapGestureRecognizer *)recognizer
{

    NSInteger Totalpages;

    NSURL *pdfURL = [[NSBundle mainBundle] URLForResource:@"fw4" withExtension:@"pdf"];

    CGPDFDocumentRef myDocument;

    myDocument = CGPDFDocumentCreateWithURL((__bridge CFURLRef) pdfURL);// 1

    if (myDocument == NULL) {// 2

        CFRelease ((__bridge CFURLRef)pdfURL);
    }

    CFRelease ((__bridge CFURLRef) pdfURL);

    Totalpages =   CGPDFDocumentGetNumberOfPages(myDocument);

    if (Totalpages == 0) {// 5
        CGPDFDocumentRelease(myDocument);
        }

    CGPDFPageRef PDFPage = CGPDFDocumentGetPage(myDocument, 1);

    //[c setPDFPage:PDFPage];

    //PDFScrollView *PDFview = [[PDFScrollView alloc] init];
    //[PDFview setPDFPage:PDFPage];
    //[self.view addSubview:[singleton glpData].testsingleton]; 
    [(PDFScrollView *)self.view setPDFPage:PDFPage];

}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:34:07.933

似乎您只是使用苹果在该示例中给出的相同代码，

如果您正在使用它，请确保您已连接 IB 中的 IBOutlets

```
(or) 
```

如果您不使用 IB，请确保您已在 viewDidLoad 中启动 PDFScrollView

请参阅此答案-> [ZoomingPDFViewer 示例错误](https://stackoverflow.com/questions/11302469/zoomingpdfviewer-example-error)

# fish - 适用于管道输入或基于参数的输入的 Fish Shell 函数

> ID：11407617
> 
> 赞同：4
> 
> 时间：2012-07-10T06:14:37.550
> 
> 标签：fish

我正在尝试创建一个鱼壳函数，该函数将从输入中修剪新行，然后将输入复制到剪贴板。

我怎样才能编写这个函数以便它会；

*   处理管道输入（现在可以使用）
*   处理第一个参数，就好像它是通过管道输入到函数一样
*   在没有通过参数或管道提供值的情况下立即退出，如果没有在管道中传递一些值，现在`tr`不会退出

代码：

```
function copy --description 'Trim new lines and copy to clipboard'
    tr -d '\n' | pbcopy
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T20:06:49.113

更好地处理换行符的更新：

```
function copy --description 'Trim new lines and copy to clipboard'
  cat $argv ^/dev/null | while read -l line
    set argv $argv $line
  end

  test -z "$argv"; and return

  for i in $argv
    echo -n $i
  end | tr -d '\n' | pbcopy
end 
```

这是一个相当大的挑战，但有一点点诡计是可能的。此功能如您所描述的那样工作，还有一个警告，如果您在`copy`没有任何参数的情况下编写，那么它将无限期地等待您的输入。

如果您不关心多行复制，您可以删除`| tr -d '\n'`之前的`read`然后`copy`也可以工作。因为 read 被换行符终止。所以它会自动接受到第一个换行符，例如`copy\nme`只复制`copy`.

代码：

```
function copy --description 'Trim new lines and copy to clipboard'
  cat $argv ^/dev/null | tr -d '\n' | read -l input

  set -ql input; or set -l input $argv

  if test -n "$input"
    echo $input | tr -d '\n' | pbcopy
  end
end 
```

例子：

```
➤ echo copy\nme | copy
Clipboard: copyme

➤ copy copy\nyou
Clipboard: copyyou

➤ echo | copy
Clipboard: copyyou

➤ copy
(Waiting for command indefinitely...) 
```

# java - 如何修复此错误 java.util.ConcurrentModificationException

> ID：11407621
> 
> 赞同：5
> 
> 时间：2012-07-10T06:15:03.417
> 
> 标签：java, exception, arrays, concurrentmodification

我在下一行收到错误。我正在做添加到 jsonarray 的过程。请帮我。

```
jsonArr=new JSONArray();
if(req.getSession().getAttribute("userses")!=null){
    String name=(req.getParameter("name")==null?"":to_EnglishName(req.getParameter("name").toUpperCase()));
    if(!name.equals("")){
        for(Book c:GlobalObjects.bookList){
            if(c.getBookName().startsWith(name)){
                    jsonObjec=new JSONObject();
                    jsonObjec.put("label",c.getBookName());
                    jsonObjec.put("value", c.getId());
                    jsonArr.add(jsonObjec);//java.util.ConcurrentModificationException
            }
        }
    }
}
jsonArr.write(res.getWriter()); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T08:40:28.887

这是我在重新编程时经常遇到的错误。此异常的原因或细节非常清楚。迭代时不允许修改集合（您正在添加新元素）。至少语法`for`不支持这样做。

要解决您的问题，我认为有两种方法很简单。

1）。而不是使用`for`语句循环，更好的方法是使用迭代器来避免 ConcurrentModificationException。

```
 Iterator<Book> iterator = bookList.iterator();
    while(iterator.hasNext()){
      Book c = iterator.next();
      if(c.getBookName().startsWith(name)){
                jsonObjec=new JSONObject();
                jsonObjec.put("label",c.getBookName());
                jsonObjec.put("value", c.getId());
                jsonArr.add(jsonObjec);
        }
    } 
```

2）。在循环它时，不要添加它。

```
 List list = new ArrayList<>();
     for(Book c:GlobalObjects.bookList){
        if(c.getBookName().startsWith(name)){
                jsonObjec=new JSONObject();
                jsonObjec.put("label",c.getBookName());
                jsonObjec.put("value", c.getId());
                list.add(jsonObjec);//java.util.ConcurrentModificationException
        }
     }
     jsonArr.addAll(list); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T06:29:42.840

要解决此问题，请确保`If your collection is not thread safe then it must not get modified with another thread when some other thread is iterating over this collection`.

有两种可能的方法来解决这个问题 -

1）一种解决方案是同步对集合的所有访问

2）使用线程安全集合，如`CopyOnWriteArrayList`

来自 Java 文档 -

> 当这种修改是不允许的时，检测到对象的并发修改的方法可能会抛出此异常。
> 
> 例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些 Iterator 实现（包括 JRE 提供的所有集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T06:29:09.340

当您迭代一个集合并在循环中修改同一个集合时，您会得到 ConcurrentModificationException。给定的代码片段没有显示这一点，因此在修改集合的上方或下方还有其他内容。尝试在实例化它的地方声明 jsonArr。

一个可能的原因可能是 jsonArr 实例 Object 是类级别的并且被多个线程访问。声明实例化它的 jsonArr 对象。

编辑：使 jsonArr 成为局部变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T07:11:01.660

还有另一种方法，即传递实际列表，我们可以传递列表的克隆进行迭代。

listForIteration = list.clone();

//进行操作..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-25T11:56:51.877

或者使用允许迭代和修改同一个列表的 ListIterator

[http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T06:24:28.910

你是从另一个线程访问 jsonArr 吗？即当您同时修改它时迭代jsonArr。

当您在迭代集合的同时修改集合时，会引发 ConcurrentModificationException。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-17T13:31:06.120

只需使用`java.util.concurrent.CopyOnWriteArrayList`

```
List<String> empList = new CopyOnWriteArrayList<>();
empList.add("Mojtaba");
empList.add("Mojtabye");
empList.add("Yeganeh");

for (String item : empList) {
    System.out.println(item);
    empList.add("test");
} 
```

# iphone - 核心情节动量滚动

> ID：11407631
> 
> 赞同：2
> 
> 时间：2012-07-10T06:16:17.470
> 
> 标签：iphone, graph, uiscrollview, scroll, core-plot

有什么方法可以让 Core Plot 滚动表现得像 UIScrollView 中的动量滚动？我制作了一个 CPTGraphHostingView 并将其作为子视图添加到 UIViewController.view 中。

有人会提供指导或代码来指导我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-24T00:46:14.940

从 1.3 版开始，在 中[`CPTXYPlotSpace`](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_x_y_plot_space.html)，有一个名为 的标志[`allowsMomentum`](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_x_y_plot_space.html#a9fdd1c2961b64bfac4fcc37382f1d2a2)：

> 如果`YES`，绘图空间滚动会逐渐减慢而不是突然停止。默认为`NO`.

因此，您可以执行以下操作：

```
CPTGraph* graph = /* Your graph object */
CPTXYPlotSpace* plotSpace = (CPTXYPlotSpace*)graph.defaultPlotSpace;
plotSpace.allowsMomentum = YES; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T10:07:42.950

WWDC 2012 演示文稿“使用滚动视图增强用户体验”解释了如何在 OpenGL 视图上无形地覆盖 UIScrollView，然后链接 scolloffset 以获得 OpenGL 中的动量滚动行为。我希望类似的方法可以用于您的问题。

[https://developer.apple.com/videos/wwdc/2012/?id=223](https://developer.apple.com/videos/wwdc/2012/?id=223)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T00:35:35.913

没有类似的内置功能。您可以使用绘图空间委托来实现类似的效果。

# iphone - 如何在应用程序在 iphone 后台运行时重复进程？

> ID：11407633
> 
> 赞同：0
> 
> 时间：2012-07-10T06:16:24.703
> 
> 标签：iphone, objective-c, background, nstimer

在我的应用程序中，我有一个函数 updatetimer 可以连续更新计时器。我希望这个过程在应用程序处于后台时保持继续。但是只有当应用程序处于前台时才会调用该方法。当应用程序处于后台时它不会被调用。下面是那个的代码。我该如何解决这个问题？

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{ 

                         timer=[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateTimer) userInfo:nil repeats:YES];
                        [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];

                        [[NSRunLoop currentRunLoop] run]; 
                    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:22:10.360

从苹果文档中，只有这些任务被允许在后台运行，并且它们都有自己的限制：

> 音频——应用程序在后台向用户播放可听内容。（此内容包括使用 AirPlay 的流式音频或视频内容。）
> 
> 位置——应用程序让用户随时了解他们的位置，即使它在后台运行时也是如此。
> 
> voip——该应用程序使用户能够使用 Internet 连接拨打电话。
> 
> newsstand-content - 该应用程序是一个 Newsstand 应用程序，可在后台下载和处理杂志或报纸内容。
> 
> external-accessory - 该应用程序与需要通过外部附件框架定期提供更新的硬件附件配合使用。
> 
> bluetooth-central — 该应用程序与需要通过 CoreBluetooth 框架定期提供更新的蓝牙配件配合使用。

否则，您最多可以要求 10 分钟。额外的运行时间：（也来自苹果文档）

```
bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        // Clean up any unfinished task business by marking where you.
        // stopped or ending the task outright.
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task and return immediately.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Do the work associated with the task, preferably in chunks.

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }); 
```

更多信息： [苹果文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# objective-c - 访问数组的元素，Objective-C

> ID：11407643
> 
> 赞同：0
> 
> 时间：2012-07-10T06:17:21.993
> 
> 标签：objective-c, xcode, arrays, nsmutablearray

我正在尝试访问数组的元素并更改它们，例如我有一个包含数字和变量 x 的数组，我必须遍历数组并将变量 x 替换为值。我试过这个，但我在 for 语句中收到一个错误，由于未捕获的异常 'NSRangeException'，正在终止应用程序，原因：'*** -[__NSArrayM objectAtIndex:]: index 3 beyond bounds [0 .. 2]'

```
 if( [stack containsObject:@"X"] )
    {
    int x;
    for(x=0; [stack objectAtIndex:x] ;x++)
    {
    [stack replaceObjectAtIndex:x withObject:[variableValues objectForKey:@"X"]];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:26:22.647

你得到什么错误？查看您的代码可能有几件事。如果数组长度为零，则访问索引 0 处的对象将引发错误。此外，数组需要是可变的才能进行替换。

-- update 另外，如果你的objectForKey返回nil，在replacement方法中，尝试替换nil也会抛出错误。请参阅下面的更新代码：

```
if( [stack containsObject:@"X"] )
{
    assert([stack isKindOfClass:[NSMutableArray class]] );
    NSUInteger count = [stack count];
    for(NSUInteger x = 0; x < count ;x++)
    {
        id value = [variableValues objectForKey:@"X"];
        if ( value != nil )
        {
            [stack replaceObjectAtIndex:x withObject:value];
        }
    }
} 
```

# javascript - 谷歌地图地理编码器，访问其中的全局变量

> ID：11407647
> 
> 赞同：0
> 
> 时间：2012-07-10T06:17:58.547
> 
> 标签：javascript, global-variables

我必须从地址中找到 latlong，我想将它们全部加载到全局数组变量中，这就是我在做什么

```
 for(i=0; i<locations.length; i++){

    var paddress = locations[i]['address'] +','+locations[i]['postal_code'] + ', ' +locations[i]['district'] + ',' + locations[i]['country'];
    var  pgeocoder = new google.maps.Geocoder();
    pgeocoder.geocode( { 'address': paddress}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {

            Storelatlong[i] = results[0].geometry.location;

        }
    });
    }

    alert(Storelatlong.length); 
```

但它总是返回长度 0，如果我在地理编码器函数内发出警报，它给出 latlong 很好，有没有其他方法可以从地理编码器内部将数据分配给全局变量，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:34:08.620

我认为问题在于，当您从谷歌获得响应时，我不再被定义，尝试用闭包修复它，像这样

```
pgeocoder.geocode( { 'address': paddress}, (function(index) {
      return function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            Storelatlong[index] = results[0].geometry.location;
        };
      }(i))
); 
```

# gwt - 是否适用于企业应用程序的 GWT

> ID：11407649
> 
> 赞同：1
> 
> 时间：2012-07-10T06:18:05.347
> 
> 标签：gwt, extjs, smartgwt, gxt, smartclient

我正在开发一种在应用引擎上创建企业级应用程序的工具。这个需要跨浏览器（也包括IE8），可以在手机上运行，​​以后也可以通过（Qt4/GTK/etc）支持桌面客户端

我一直面临的问题是：对于我的网络应用程序 - 我应该使用 GWT(GoogleWebToolkit) 还是不使用？

我很擅长使用“EXT-JS”，但由于它的开源政策，它不是一个选择。还有另一个框架“SmartClient”，它具有更好的开源许可证——它非常成熟并且比 EXT-JS（基于一些 POC）更好，但是它的文档很烂！我需要很多时间才能以正确的方式完成某件事。SmartClient 和 EXT-JS 非常适合企业级应用程序（正确使用时）——我在 Ext-JS 上体验过这一点，并且对 SmartClient 也非常肯定。

然后是“JQuery and addons and HTML5”这个组合。与上述库相比，我喜欢更快、更干净、更小的 JS。我对 HTML5 持怀疑态度，因为那是一个不断发展的标准

我真正喜欢 GWT 的地方在于它的性能优势。至少这些例子似乎效果很好。我不喜欢它的是 Java，而且我非常擅长 javascript 对于我在 app-engine 的服务器端应用程序，我没有使用 Java，而是使用 Python。所以 rpc 将仅基于 json。我们还没有移动版，但这又是一个非常需要的版本，我们以后可能会使用 Sencha-touch。

我已经为所有这些做了 POC，与 extjs 或 smartclient 相比，GWT 部署感觉快速和流畅。GWT 会自动为我做很多事情。我也喜欢 gwt 呈现的“clean-html”。我也很擅长使用 javascript，并且非常清楚那里发生的导致 javascript 地狱的“错误”。

（我不期待 ExtGWT 或 SmartGWT）

关于我是否应该切换到 GWT 或者这对于企业级应用程序是否是一件好事有什么建议？

或者，如果有人使用 GWT 构建大型应用程序，有什么缺点（和优点）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T10:00:27.347

对于已经在 J​​SP/JEE 和 HTML/Javascript 方面有丰富经验的人来说，GWT 只需要半天时间就可以理解。但是你需要两个月才能掌握。

以下是关于将技术与 GWT 相结合的建议，我相信这将使您的企业级应用程序成功。我认为您应该使用 GWT，因为它具有可调试性。但是可调试性是有代价的。GWT 调试至少需要一台四核 8GB 的​​机器。如果您认为这不是真的，那可能是因为您找到了一种使 GWT UI 变得小而简单的方法。

[Eclipse 在调试 GWT 应用程序时挂起](https://stackoverflow.com/questions/11297733/eclipse-is-getting-hang-while-debugging-gwt-application/11305395#11305395)

**RequiresResize、ProvidesResize 和 Layouts**

在 GWT 中您需要掌握的第一件事是由接口 RequiresResize、ProvidesResize 规定的简单布局概念。您需要确保从 RootLayoutPanel 到可调整大小的小部件的 RequiresResize/ProvidesResize 链必须不间断。你需要掌握在你的 UI 中构建 RequiresResize/ProvidesResize 的流程。否则，在调整浏览器大小时，您会看到一两个奇怪的悬垂的果实，它们的大小无法调整。

我认为应该不惜一切代价避免为每个小部件编写预定的调整大小而不是依赖于谷歌的 RequiresResize/ProvidesResize。否则，请记住在几次迭代中对调整大小进行去抖动。太多的试验/错误让我无法完善调整大小。

**异步异步异步**

你需要接受的下一个概念......我没有说“你需要学习”，但“你需要接受”是 Javascript 的异步行为，因此也是 GWT Java 的异步行为。是否使用 GWT 并不重要。您必须习惯于将控制权反转给被调用者以控制调用者的成功响应。

你不能写

```
List<Persons> persons = server.getData(personId); 
```

你必须屈服于做

```
server.getData(personId, new Callback<Persons>(){
  @override public void onSuccess(Person person){ ..... }
  @override public void onFailure(Exception ex){ ..... }
}); 
```

你不能写

```
boolean doOrNot = ConfirmDialogBox(); 
```

你必须写

```
ConfirmDialogBox(new CloseHandler(){
  public void onAccept(Person person){ ...}
  public void onCancel(){ ... }
}); 
```

**GWT 是 Java 但不是 Java**

我对不断尝试使用 apache 字节码 jar 与 GWT 客户端进行编译的人的存在感到很有趣，GWT 客户端是用 Java 编写的 Javascript。

[二进制数据和 GWT](https://stackoverflow.com/questions/11048223/binary-data-and-gwt/11096410#11096410)

**GWT 可视化客户端**

我发现最好的组合是 GWT 2.4.0 和 Sencha gxt 2.2.5。

我避免使用 GXT-Uibinder 项目，因为我发现它对 3rd 方 GWT 框架的其他组合施加了不便的限制。特别是那些严重依赖 GWT.create() 生成器的框架。GXT-Uibinder 是 Sencha 之外的一个项目。

GXT 2.2 及以下版本要求我编写包装器以使其可与 uibinder 一起使用，因为我拒绝使用 kludgy GXT-uibinder 项目。由于一个愚蠢的错位，包装器是必要的。任何在 uibinder 中用作父窗口小部件节点的类都必须实现 GWT HasWidgets，这需要实现一个方法返回`iterator<Widget>`。不幸的是，GXT 2.2 已经实现了返回错误泛型迭代器的 iterator() 方法。

GXT 3 解决了这个问题。我认为 GXT 3 包含 GXT-uibinder 但您不必使用它。您不必使用 GXT 3 编写太多包装（不使用 GXT-uibinder）即可将其与 uibinder 一起使用。但我发现 GXT 3 仍然有一些古怪的错误行为，试图解决这些问题并不值得我花时间。所以我坚持使用 GXT 2.2.5，直到 GXT 3 稳定下来。

我创建了用于包装 SmartGWT (uibinding-smartgwt) 的谷歌代码项目。SmartGWT 是一个非常*自私*的框架。如果我尝试将它与 GWT vanilla 混合，我的努力通常会导致灾难。这是由于 SmartClient 和 GWT 的小部件之间存在某种 Z 索引。

如果您出于许可问题决定使用 SmartGWT，则必须确保仅使用 SmartGWT 而不是与任何其他 Widget 提供程序一起使用。甚至没有 GWT 香草。你很可能需要使用我的 uibinding-smartgwt 项目。我正在尝试增强它以使用一些更新的 uibinder 功能并将非可视元素重新定义为不是小部件，但我目前对 GXT 的使用过于复杂，同时考虑这两个框架让我感到困惑。因为他们的行为不同。

尽管 GXT 3 似乎已经使自己与 GWT 完全一致，但 SmartGWT 并没有表现出任何这样做的努力。3rd 方小部件提供者与 GWT 之间的完全对齐，以便它顺利地实现 GWT 的接口是绝对必要的，以避免浪费大量时间不得不在 kludges 之后编写 kludges 以解决一些小的视觉问题。是的，尤其是 ProvidesResize/RequiresResize 架构。

永远不要使用 GWT 孵化。尝试它们，然后尝试使您的项目可维护、可持续和可增强。我们甚至不要去那里。

**客户端-服务器通信**

不要使用 GWT-RPC。不要。除了学习GWT的方便。

RPC 适用于您无意超出演示阶段和几乎不可用阶段的简单应用程序。不编写分布式/扩展企业级应用程序的程序员可能不会同意我的看法。

单元测试对于开发您的应用程序非常有帮助。首先忘记所有那些单元测试框架。仅仅能够编写一个简单的例程来测试每个小功能而不涉及应用程序的巨大画面是非常重要的。例如，我只想测试骆驼化循环以使其工作。GWT-RPC 给你的正式/非正式单元测试带来极大的不便。

我非常喜欢在 GWT 客户端使用 JAX-RS REST-RPC thro **RestGWT和在服务器端****使用 RestEasy**。我将 JAX-B 与 RestEasy 的 Jackson JSON 处理实现结合使用。您可以尝试使用 Jersey，而不是 Resteasy。

通过这种方式，我可以使用 FireFox REST 客户端来测试独立于 GWT 的服务器。事实上，在客户端使用 GWT 启动项目后，您可以扩展应用程序以使用非 GWT 客户端（如 JQuery）作为 REST 服务的客户端。

REST 还使您可以轻松编写代理/隧道服务器，让您克服浏览器的 SLD-SO-P（“二级域，同源”策略）安全限制。然而，GWT-RPC 的数据格式是故意无法破译和不稳定的（我不明白谷歌工程师在增加安全性背后的想法，因为你仍然可以看到人类可读文本的点点滴滴），我没有尝试写隧道 GWT-RPC 服务的代理。我不知道它有多可行。

[http://h2g2java.blessedgeek.com/2011/11/gwt-with-jax-rs-aka-rpcrest-part-0.html](http://h2g2java.blessedgeek.com/2011/11/gwt-with-jax-rs-aka-rpcrest-part-0.html)。

顺便说一句，克服 sld-sop 的脚本包含是非常糟糕的主意。甚至不要考虑它。

**持久性**

用于非 GAE 的休眠 JPA。Eclipselink JPA for GAE 与 Google 的 MySQL DataNucleus JPA for GAE 与 Google 数据存储。

最初，我接受了 JDO 的想法。我非常努力，JDO 不断给我带来冲突。我放弃。最初，Google 似乎一直在努力说服我们 JDO 是优秀的 JPA。不管是真是假，到目前为止，我还没有获得使用 JDO 持久性的技能。而且由于我也必须为非 GAE 编程，所以我不想让 JDO 的复杂性影响我的思想。

我提到这个的原因是因为我倾向于使用与 JAX-RS POJO 相同的 JPA POJO。这意味着，我发现 JPA、JAX-RS、JAXB 和 Jackson 注释混合到同一个 POJO-DTO 中，没有冲突。我经常在 GWT 客户端、JAX_RS 服务器和 JPA 持久性之间共享一组 POJO（有一些例外）。要实现这一点，您必须有一个限制——所有 DTO 都必须是 GWT 可序列化的。不仅仅是可序列化的。尽可能避免编写 dto 转换器。浪费时间拥有三组不同的 POJO-DTO，然后在它们之间使用转换器。

**MVP**

我发现 MVP4G 是一个非常易于管理的 MVP 框架。以下讨论演示了我如何使用 MVP4G：

[https://groups.google.com/forum/?fromgroups#!searchin/mvp4g/blessedgeek/mvp4g/T6r7egk-3Kk/Jz-dTqZDeMIJ](https://groups.google.com/forum/?fromgroups#!searchin/mvp4g/blessedgeek/mvp4g/T6r7egk-3Kk/Jz-dTqZDeMIJ)

MVP 是一种非常有用的模式。因为它可以帮助我区分“关注点”。当您能够分离关注点时，您就可以单独测试和解决问题。它还可以帮助您增强/扩展您的项目，尽可能减少来自应用程序迷宫的其他关注点/模块的干扰/纠缠。

MVP4G 还使单元测试变得容易，因为您可以简单地模拟视图或演示者，或者使用简化的事件总线/状态机来仅调试您需要调试的部分。并且由于它的模块化，您可以轻松避免非测试类的污染，这样您就可以在不破坏生产类的情况下删除测试源树。IOW，您不必修改非测试类来测试它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:41:51.333

我应该使用 X 还是 Y 等问题始终取决于您对这些工具的经验和要求。如果您不知道如何使用它并且除了“我想构建一个应用程序”之外没有其他要求，那么最好的工具/框架一文不值，我建议使用您感觉最好的工具。

GWT 的优缺点经常被解释。我认为没有必要重复。

问候，彼得

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:03:06.700

我在我的项目中主要使用纯`GWT`。
但是，您必须花费一些时间来创建自定义小部件并根据您的需要对其进行样式设置。

除了您已经获得的建议之外，您还可以查看[Vaadin](https://vaadin.com/home)和[Jboss Errai](http://www.jboss.org/errai/)。

我真的很喜欢 Errai 的 UI 模板，您可以在此[截屏视频](http://vimeo.com/44141164)中查看。

Vaading 提供了一个吸引人的小部件集，并且还将在版本 7 中使用 GWT 作为核心。
两者（JBoss 和 Vaadin）都是未来 GWT 开发的指导委员会成员。

# php - 从 Joomla 数据库中提取值的难度

> ID：11407650
> 
> 赞同：0
> 
> 时间：2012-07-10T06:18:14.227
> 
> 标签：php, button, joomla

我在获取更新的表单以填写用户名数组时遇到了一些麻烦。要查看正确的操作，请转到此处：[已删除链接]

正如您在页面完成加载时看到的那样，有一个“Mortgage Advisor”选项，该选项预加载了用户名。此用户的名称与`agentId`您在 URL 中看到的值相关联。

我正在将此站点升级到 joomla 2.5，当我复制这段代码以将下拉菜单添加到表单时，它不会选择列表：

```
 <tr>

    <td><?php echo JText::_('RSM_FORM_TXT_AGENT'); ?>:</td>

    <td>

        <select name="userId" id="userId">

            <option value="" <?php if($row->userId == ""){echo " selected='selected'";} ?>></option>

            <?php foreach($agents as $agent){

                $agents = $database->loadObjectList();

                ?> <option value='<?php echo $agent->id; ?>' <?php if($_GET['agentId'] == $agent->id){echo "selected='selected'";} ?> ><?php echo $agent->firstname; ?> <?php echo $agent->lastname; ?></option>

            <?php }?>

        </select>

    </td>

</tr> 
```

这是从 1.5 joomla 站点示例复制过来的，但就像我之前所说的那样，它没有发送值。您可以在此处查看此输出的示例：

[删除链接]

关于如何在单击提交按钮后获取值然后传递的任何想法？另外，我是否错过了与该值相关的另一个区域？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:53:38.647

查看您的代码后，如果这不是错字，那么我认为这可能是您的问题所在 -

```
 <?php foreach($agents as $agent){

                $agents = $database->loadObjectList(); 
```

`$agents`现在在您的代码中使用您正在从`$agent->id;`???获取数组

让我知道这是否是错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:47:26.003

我没有加载正在加载名称的数据库表......所以我从 Joomla 1.5 代码中复制并添加如下：

```
$database =& JFactory::getDBO();

$database->setQuery("SELECT id, firstname, lastname from `#__comprofiler` WHERE `approved` = 1 AND `confirmed` = 1 ORDER BY `firstname` ASC");

$agents = $database->loadObjectList(); 
```

这就是问题所在。

# performance - OpenCV gpu 性能

> ID：11407651
> 
> 赞同：-2
> 
> 时间：2012-07-10T06:18:19.453
> 
> 标签：performance, opencv, gpu

我没有现代的 Nvidea gpu 卡，但在购买新卡之前需要估计 opencv 中立体匹配算法的性能。

你可以在这里发布你的结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:25:23.377

[本页](http://code.opencv.org/projects/opencv/wiki/2012)描述了每周的 OpenCV 开发者会议。它很长，但您会找到算法的描述、它们的性能等。您将了解 GPU 与 CPU 相比的速度有多快。当然，这取决于图像、算法、GPU 质量等。但你会有一个想法。

一个简短且非常近似的答案是 GPU 比 CPU 快约 10 倍

# iphone - NSInvocation 抛出异常

> ID：11407655
> 
> 赞同：0
> 
> 时间：2012-07-10T06:18:32.403
> 
> 标签：iphone, objective-c, xcode, nsinvocation, ios6

我正在尝试使用 NSTimer 进行调用，但我在两件事上遇到了问题。我不知道如何让 Selector 传递 Arguments(Xcode crys) 或如何让它正常工作，因为它总是崩溃。

```
X = [NSTimer scheduledTimerWithTimeInterval:(1.0) invocation:(invoX) repeats:(YES);

with this:

SEL selX = @selector(methodY); //like i actually do to avoid errors
SEL selX = @selector(Y:(argument)); //like i want it to be  
NSMethodSignature *sigX = [self methodSignatureForSelector:selX];
NSInvocation *invoX = [NSInvocation invocationWithMethodSignature:sigX];
[invoX setTarget:self];
[invoX setSelector:selX]; 
```

但我没有让它工作（运行时例外）有人知道有什么问题吗？

# asp.net - 执行异步处理时 CurrentModuleContainer.Get Asp .Net 代码中的零星 NullPointerException

> ID：11407658
> 
> 赞同：0
> 
> 时间：2012-07-10T06:18:51.370
> 
> 标签：asp.net, asynchronous, .net-4.5, async-await, asp.net-4.5

我有一个 Asp .Net 应用程序，我正在使用新的 async/await 范式和 .net 4.5 RC。我正在使用新的基于任务的异步 http 处理程序`HttpTaskAsyncHandler`来处理 http 请求。在我的代码中，我正在做一些 I/O 将文件流式传输到客户端。

偶尔我会得到`NullPointerException`以下堆栈跟踪：

> System.Web.dll!System.Web.HttpApplication.CurrentModuleContainer.get() + 0x1e 字节 System.Web.dll!System.Web.HttpApplication.PipelineStepManager.ResumeSteps(System.Exception 错误) + 0xb7 字节
> System.Web.dll！ System.Web.HttpApplication.CallHandlerExecutionStep.OnAsyncHandlerCompletion(System.IAsyncResult ar) + 0x1f3 字节
> mscorlib.dll!System.Threading.Tasks.Task.Execute() + 0x6e 字节 mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System. Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) + 0x285 bytes mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) + 0x9 字节
> mscorlib.dll!System.Threading.Tasks.Task.ExecuteWithThreadLocal(ref System.Threading.Tasks.Task currentTaskSlot) + 0x1c5 字节
> mscorlib.dll!System.Threading.Tasks.Task.ExecuteEntry(bool bPreventDoubleExecution) + 0xb0 字节
> mscorlib.dll !System.Threading.ThreadPoolWorkQueue.Dispatch() + 0x1ea 字节
> [本地到托管转换]
> [Appdomain 转换]
> [本地到托管转换]

这似乎发生在我的代码已经返回响应之后。

发生这种情况时，下一个请求永远不会被处理，但之后的请求会恢复正常。

这种行为的原因可能是什么？我查看了 CurrentModuleContainer.Get 方法的源代码，似乎唯一可以引发空指针异常的是 Http 上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T21:20:02.837

异常可能来自许多不同的原因，但可以猜测您正在尝试访问处理程序中的当前 HttpContext，在异步结束函数期间可能为 null。

# android - OpenGL ES 2.0，进行转换的最佳实践

> ID：11407665
> 
> 赞同：0
> 
> 时间：2012-07-10T06:19:10.293
> 
> 标签：android, opengl-es-2.0

我正在使用 OpenGL ES 2.0 编写我自己的 Android 图形引擎“为了好玩”。

在管理具有多个对象网格的整个场景之后，我正在尝试实现阴影体积。

逻辑是（简化的）：首先，我从二进制文件创建一个对象（带有顶点、面、边和所有数据）。之后，我创建一个顶点缓冲区并绘制元素。

到目前为止，我在模型矩阵（glRotate 等）上使用了带有 OpenGL 函数的变换（缩放、平移、旋转）。

但是为了使用Shadow Volume，我必须在每次变换物体或灯光时计算出哪些面在灯光和轮廓前面。所以我在我的顶点数组上使用了一个循环。

我的问题是：在哪里进行转换？我是否必须在每次更改时转换顶点数组并将其重新加载到顶点缓冲区中？

据此，这是一件坏事：[Android opengl modify vertex array after draw call](https://stackoverflow.com/questions/4703550/android-opengl-modify-vertex-array-after-draw-call)

那么，最佳实践是什么？

对不起我的英语不好，提前谢谢你；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:11:12.297

阴影体积我只记得粗略，但如果我没记错那么你首先确定光前的脸，这些脸的边界是跨越体积的轮廓，对吧？

所以你想对每个顶点法线 n 和光向量 l 做这样的事情：

前面 = (l 点 M * n) < 0.0 ? 真假

其中 M 是顶点变换矩阵的逆转置。

不是将每个法线与 n 相乘，您不能为光矢量计算适当的变换……即矩阵 Ml：

(Ml * l 点 n) = (l 点 M * n)

那将是我的想法。

# javascript - 通过javascript对象递归并将变量存储到字符串中

> ID：11407669
> 
> 赞同：0
> 
> 时间：2012-07-10T06:19:21.120
> 
> 标签：javascript, arrays, json, recursion, hash

我正在尝试根据用户选择的字段将值存储在 javascript 对象表示法中。我能够将值存储到一个用逗号分隔的字符串中，如果我试图查找的术语是一个数组，我会得到 [object object] 作为回报，因为它是一个数组。我想知道如何将该数组中的所有项目存储到用逗号分隔的变量中，例如，如果我选择“时间”，那么它应该返回 2012 年 12 月 9 日

在示例中，有一个函数 findProps，如果我在 findProps("entityCount", data) 中给出参数 entityCount，我将根据我提供的 json 获得正确的返回类型为 50。Bt 如果我添加 findProps("Time", data);，因为它是一个数组，它返回 [object, object]，而不是这些数组中的值，我希望显示该数组中的所有值（如`Dec 9, 1, 2012`）并且每个数组内的键可能不同，数组的深度也可能不同。我只是在这里使用一个静态示例。

我到达的部分返回值，如果它是一个非数组，[http://jsbin.com/obehog/3/edit](http://jsbin.com/obehog/3/edit)

还有另一个我接近做的例子，[http://jsbin.com/obehog/4/edit](http://jsbin.com/obehog/4/edit) bt 我不擅长递归，所以我坚持这个..

并且数组的深度可能会改变，在每种情况下都不相同。所以通过循环将不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:51:45.817

如果我理解正确，您的代码需要额外的函数，它将所有对象的属性写入数组。看看我的解决方案：http: [//jsbin.com/obehog/6/edit#source](http://jsbin.com/obehog/6/edit#source)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:52:55.410

如果我一直在理解您的愿望，那么您希望将对象（包含字符串、数组和其他对象）“序列化”为字符串。因此，您只需要遍历您的对象并序列化它的各个部分。

快速、肮脏和递归：http: [//jsfiddle.net/AwhfV/1/](http://jsfiddle.net/AwhfV/1/)

只需根据您的需要进行更改

# apache - svn主从配置上apache测试

> ID：11407670
> 
> 赞同：0
> 
> 时间：2012-07-10T06:19:24.023
> 
> 标签：apache, svn, master-slave

我已经在 apache2.2 上设置了两个 svn（主从配置）。我需要在不同的场景中测试这个设置，比如网络故障。有没有我必须考虑的重要测试用例。测试时我应该记住哪些要点。

[更新]
我们在从站使用通过代理写入。互联网上是否有任何文件/清单可供我使用。

[更新]
我最近使用自签名证书包含了 SSL。**使用 SSL 的 SVN 有什么特殊的测试用例吗？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:32:35.917

显然，最大的问题将在同步过程中发生故障时出现。

因此，您希望将此类测试用例添加到您的测试中。具体来说，您需要定义同步失败后需要执行的操作（存储库清理脚本等）

我能想到的其他测试用例：

*   您可能还会遇到有关文件锁定的问题。因此，您可能也为这种情况准备好了脚本。您可以为此添加一个测试用例，以验证您的脚本是否按预期工作。

*   您还必须验证当它不同步时您不能提交给从属。

*   最后，如果您的奴隶通过电子邮件或其他方式运行不同步，您可以确保您和您的团队得到正确的通知。

# java - Java Slick2D 和 Jbox2D

> ID：11407673
> 
> 赞同：0
> 
> 时间：2012-07-10T06:19:35.283
> 
> 标签：java, lwjgl, slick2d, jbox2d

我最近开始`java`使用该`Slick2D`库开发游戏，并且非常喜欢它。我遇到了一个问题，我的游戏需要物理，浏览网页后我决定使用`Jbox2D`物理引擎。在安装之前`Jbox2D`，我只想确保我可以 `Jbox2D`有效地使用`Slick2D`. 刚开始，我会制作一个带有重力、动量和摩擦力的平台式游戏。这不是很多物理，我可能会自己添加它，但我想熟悉物理引擎，以防我转向需要更复杂物理的游戏。如果`Jbox2D`不是适合这项工作的物理引擎，我会很乐意使用其他东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T20:03:03.463

由于问题的性质，这是一个有点自以为是的答案，但我是 slick 的开发人员，我使用过 JBox2d、phys2d、libgdx Physics2d 和泡沫包装器。其中，Jbox2D 似乎是功能最全的，尽管它很难理解。我已经能够在不减慢速度的情况下运行数百个多边形（即使在 android 上），并且已经实现了关节、电机、接触侦听器、手动施加的力和脉冲以及具有多种形状的物体（这允许你拥有凹形物体，即使是凹形的形状是不允许的）。

# drupal-7 - 在drupal 7中按发布日期过滤

> ID：11407683
> 
> 赞同：0
> 
> 时间：2012-07-10T06:20:25.740
> 
> 标签：drupal-7, filtering, drupal-views

对于我当前的站点，我需要为 1 个月以前的新闻和文章创建存档。我尝试在视图中创建新页面，并在过滤中使用发布日期，但它并没有按我的意图工作。它不是显示我只需要的新闻，而是显示全部或不显示。有什么想法可以为我的内容制作某种存档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:55:34.270

你试过[存档模块](http://drupal.org/project/archive)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:00:40.560

我的问题在于输入数据不正确。我尝试为 30 天以上的所有内容创建过滤器，但为 30 天以下的内容创建过滤器。问题已解决

# android - 什么是“android.security.MessageDigest”？

> ID：11407685
> 
> 赞同：23
> 
> 时间：2012-07-10T06:20:30.020
> 
> 标签：android

数千名客户中的一位报告了我的一个应用程序中的错误。错误是：

```
java.lang.NoClassDefFoundError - android.security.MessageDigest 
```

我不在我的应用程序中使用该类/方法。Google Mapkey 一定没问题，因为有成千上万的人在愉快地运行相同版本的相同应用程序。这是堆栈跟踪：

```
java.lang.NoClassDefFoundError: android.security.MessageDigest
at com.google.android.maps.KeyHelper.getSignatureFingerprint(KeyHelper.java:60)
at com.google.android.maps.MapActivity.createMap(MapActivity.java:552)
at com.google.android.maps.MapActivity.onCreate(MapActivity.java:422)
at xx.yyy.zzzz.MyMapActivity.onCreate(MyMapActivity.java:41)
at xx.yyy.zzzz.TheMap.onCreate(TheMap.java:89)
at android.app.Activity.performCreate(Activity.java:4465)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
at android.app.ActivityThread.access$600(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

这是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-24T02:11:43.347

我花了一些时间研究这个问题，并且我正在记录我在这里发现的内容，希望它可以为其他人节省一些麻烦。

该错误是设备制造商或 ROM 创建者使用旧版地图库和新版 Android 造成的。通常，这与晦涩的平板电脑隔离，但理论上它可能会出现在其他情况下。可以使用以下步骤在模拟器中重新创建此问题：

1.  为包含 Google API 的旧 API（10 或更少）创建和加载模拟器
2.  从模拟器中提取地图 jar： `adb pull /system/framework/com.google.android.maps.jar <destination_folder>` 完成此操作后，您可以关闭模​​拟器。
3.  为包含 Google API 的新 API（11 或更高版本）创建并加载模拟器
4.  在模拟器中重新挂载 /system 以便您可以对其进行写入：`adb remount`
5.  将提取的地图 jar 放入新的模拟器中：`adb push <destination_folder>/com.google.android.maps.jar /system/framework`
6.  重启模拟器。这应该是可行的，`adb reboot`但只是挂了模拟器。相反，您需要终止具有相同效果的特定进程。在 Eclipse/DDMS 中，它会被调用`system_process`，你可以在那里杀死它。或者，您可以运行以下命令：`adb shell ps | grep system_server | awk '{print $2}' | xargs adb shell kill`
7.  重新启动后，您可以像往常一样使用模拟器。运行任何嵌入了谷歌地图的应用程序都会失败。

这个过程不是永久性的。重新启动模拟器会将其恢复到正常工作状态。

`KeyHelper.getSignatureFingerprint()`可以通过反射获取地图库中的方法并调用它来检测此问题- 将 a`PackageManager`和您的包名称作为参数传递。或者，您可以捕获错误`onCreate()`并加载新活动。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-10T06:41:40.753

MessageDigest 类是一个帮助类，用于使用 MD5 或 SHA-1 等常用方法对密钥进行编码/解码。

似乎 android.security.MessageDigest 类已从 Honeycomb 和更高版本的 Android 中删除，必须由 java.security.MessageDigest 替换（[请参阅此页面](http://productforums.google.com/forum/#!category-topic/maps/google-maps-for-mobile/KinrGn9DcIE)）

尝试下载最新版本的 Google Maps API 并重新构建您的应用程序，并将 targetSDK 设置为可用的最高版本（截至今天它应该是 16 / Jelly Bean）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-22T09:19:04.577

我找到了简单的解决方法！只需在 src 目录中创建包 android\security 并将 MessageDigest.java 放入其中。

```
package android.security;

import java.security.NoSuchAlgorithmException;

public class MessageDigest
{
    private java.security.MessageDigest instance;

    public MessageDigest() {}

    private MessageDigest(java.security.MessageDigest instance)
    {
        this.instance = instance;
    }

    public static MessageDigest getInstance(String algorithm) throws NoSuchAlgorithmException
    {
        if (algorithm == null) return null;

        try
        {
            if (algorithm.equals("SHA-1"))
                return (MessageDigest) Class.forName("android.security.Sha1MessageDigest").newInstance();
            else if (algorithm.equals("MD5"))
                return (MessageDigest) Class.forName("android.security.Md5MessageDigest").newInstance();
        }
        catch (Exception e) {}

        return new MessageDigest(java.security.MessageDigest.getInstance(algorithm));
    }

    public void update(byte[] input)
    {
        instance.update(input);
    }

    public byte[] digest()
    {
        return instance.digest();
    }

    public byte[] digest(byte[] input)
    {
        return instance.digest(input);
    }
} 
```

它是有效的，但由于地图库与android版本不匹配，可能会产生其他异常！

# struts2 - 在 JSP 中访问动作实例变量和模型驱动的 bean 变量值

> ID：11407686
> 
> 赞同：4
> 
> 时间：2012-07-10T06:20:32.757
> 
> 标签：struts2, ognl

我`searchKey`在动作类和模型驱动的bean对象中有一个变量。

```
public class PaymentGateWayAction extends ActionSupport implements ModelDriven<PaymentResponseDTO> {
    private String searchKey;
    private PaymentResponseDTO paymentResponseDTO = new PaymentResponseDTO();
    // ...
} 
```

`searchKey`也是 中的一个变量`PaymentResponseDTO`。

我需要`searchKey`根据某些条件从动作类和模型驱动 bean 访问。具有相同名称的变量是不好的。但是上面的已经开发好了。如果我在 Java 文件中做任何修改，我需要做很多困难的修改。

现在我需要访问动作类变量。我尝试通过以下方式从动作类访问变量：

```
<s:hidden id="searchKey" name="searchKey" value="%{searchKey}"/> 
```

但它返回空值。

我也有以下代码：

```
this.setSearchKey("somevarible"); 
```

请提出错误发生在哪里

**struts.xml**

```
<action name="atomResponse" class="com.PaymentGateWayAction" method="atomPaymentResponse">
  <result name="success" type="tiles">paymentGateWayResponse</result>
    <result name="failure" type="tiles">paymentGateWayResponseError</result>
  </action> 
```

**瓷砖 xml**

```
<definition name="paymentGateWayResponse" extends="b2cHome">
    <put-attribute name="body" value="agent_b2c/b2c_paymentGateWayResponse.jsp" />
</definition> 
```

在`b2c_paymentGatewayResponse.jsp`隐藏域中存在代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T14:29:14.343

当您的模型（在堆栈顶部）和您的操作（通常是模型下方的项目）具有相同名称的属性时，您可以使用`#action`值堆栈上下文变量或直接访问堆栈来消除歧义（坏主意）。

```
<!-- Access action properties directly: -->
<s:property value="%{searchKey}" />          <!-- Model; top of stack.       -->
<s:property value="%{#action.searchKey}" />  <!-- Action; accessed directly. -->

<!-- Hope the stack never changes: -->
<s:property value="%{[0].searchKey}" />  <!-- Model;  top of stack.   -->
<s:property value="%{[1].searchKey}" />  <!-- Action; next stack pos. --> 
```

# lotus-notes - 在代理中运行服务器端 javascript

> ID：11407692
> 
> 赞同：3
> 
> 时间：2012-07-10T06:20:55.770
> 
> 标签：lotus-notes, xpages, xpages-ssjs

有没有办法在 Lotus Notes 中定期运行服务器端 javascript？

我尝试用这个简单的脚本创建一个 java 代理

```
 ScriptEngineManager manager = new ScriptEngineManager();
      ScriptEngine engine = manager.getEngineByName("JavaScript");
      Bindings bindings = engine.createBindings();
      bindings.put("session", session);

      Object result = engine.eval("var v:NotesView = session.getCurrentDatabase().getView('allDocumentsByFormName');print(v.getTitle());"                 
        , 
      bindings);

      System.out.println(result); 
```

但它不起作用。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T09:08:35.547

不要打扰。最好的方法是使用DOT或通过调用 URL 的计划代理触发的[XAgent 。](http://www.wissel.net/blog/d6plinks/shwl-7mgfbn)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T07:54:20.333

嗯....我不认为这是可能的。

这样做的一个主要障碍是 XPages JVM 和代理管理器 JVM 并不相同。这就是您不能在代理中重用 Java 类（8.5.3 中的新设计元素）的原因。

但是，您展示的代码示例可以很容易地被编码为仅使用 Java 的“标准”Java 代理。我知道该示例可能只是用于演示目的 - 但您拥有 Java 中可用的所有后端类，因此您可以使用纯 Java 编写所需的代码。它是稳定的、可扩展的——只要你记得回收对象（就像在 Java 中一样）;-)

/约翰

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T19:11:54.497

我建议改用 LotusScript 编写计划代理。我知道语法可能不熟悉，但是在本机做某事比硬着头皮做要容易得多。

# php - php - 如何在不刷新导航栏的情况下加载内容

> ID：11407693
> 
> 赞同：2
> 
> 时间：2012-07-10T06:20:56.383
> 
> 标签：php, menubar, navigationbar, partial-page-refresh

我试图弄清楚如何加载内容而不像 facebook 那样刷新导航栏。

如果您查看 Facebook 个人资料（不是时间线），左栏中有一个导航栏，其中包含“墙”、“信息”、“照片”、“朋友”等。

例如，当您单击“墙”时，url 变为`www.facebook.com/yourid?sk=wall`，中间列刷新并加载内容。但这发生在不刷新左侧导航栏（也是顶部菜单栏）的情况下。

这是如何运作的？

我正在开发一个 php 网站，它的 url 类似于这样`www.example.com/profile.php?id=1234`，它是带有导航栏的主页，当用户创建页面时，url 变为`www.example.com/profile.php?id=1234&page=1`. 如何在`&page=1`不刷新导航栏部分的情况下加载该内容？

=======================================

我从标题中去掉了（没有 javascript）。我认为 facebook 没有 javascript 就可以做到这一点，但我错了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T06:24:46.890

首先，我很确定 facebook 为此使用了 javascript，因为它是客户端，这就是你可以做你想做的事的方式。通过禁用浏览器中的 javascript 来测试它，然后再试一次。

PHP 是服务器端，因此如果您想刷新页面的某一部分，则必须将整个页面发送回服务器，因为它将决定刷新哪个部分。

你可以做的是使用 iframe。一个带菜单的iframe，一个带内容的iframe，那么只能刷新内容的iframe。不过，由于各种原因，我并不是真正的框架粉丝。使用 Jscript 会更好:)

**更新**

几年来，单页应用程序（完全在浏览器中运行的 web 应用程序，无需在服务器上进行完全刷新）越来越受欢迎。

基本上，您使用 Angular 或 React 等前端 javascript 框架来编写应用程序。结果将是一个不重新加载的单页网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:26:03.843

正如已经评论过的，这是通过 JavaScript 完成的。PHP 是一种服务器端语言，因此您的客户端可以处理这样的效果。Facebook 使用 JavaScript，其中很多是为了在他们的网站上完成各种效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:25:02.640

我认为你可以使用 iframe 来做到这一点 - 你的主要个人资料页面将包含一个 iframe - 主 url 将是`www.example.com/profile.php?id=1234`，当用户点击你的链接时，只有 iframe 会重新加载 url`www.example.com/profile.php?id=1234&page=1`

导航链接将保持不变。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-02T06:24:04.883

```
var iDiv = document.createElement('div');
iDiv.id = 'newDiv';//give u'r div an id
document.getElementsByTagName('body')[0].appendChild(iDiv); //append the div    to   your html body 
$( "#newDiv" ).insertAfter( $( "#nameOfDiv" ) ); 
                 //moving it after your desired div(which is nameOfDiv here) 
$('#newDiv').load('somePage.php'); //load desired page in newDiv 
//or 
$('#newDiv').html('some text here') 
```

你想让你的 url 看起来像`www.example.com/profile.php?id=1234&page=1`。请查看 [http://tutorialzine.com/2009/09/simple-ajax-website-jquery/](http://tutorialzine.com/2009/09/simple-ajax-website-jquery/)它非常有帮助。

# dynamics-crm - 有人可以解释 OrgDBOrgSettings 实用程序的配置设置吗？

> ID：11407698
> 
> 赞同：2
> 
> 时间：2012-07-10T06:21:27.800
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-online

我正在尝试使用[OrgDBOrgSettings 工具](http://support.microsoft.com/kb/2691237)访问在线 CRM 2011 Org。我下载了它并按照说明使用作为指南提供的示例在线配置修改了配置。目前尚不清楚某些设置应该是什么，我最终得到了以下设置。当我运行该应用程序时，它会要求输入密码，然后告诉我**在 OrgDBOrgSettings 中发生错误并且错误详细信息是参数不正确的信息量很大的语句。**

除了上面的链接之外，似乎没有任何信息可用。有人有什么建议吗？

```
<setting name="OrgDBOrgSettingsTool_CrmService_CrmService" serializeAs="String">
<!--- Please change CrmServer to your Crm Server Name -->
<value>https://crm.dynamics.com/MSCrmServices/2007/CrmService.asmx</value>
</setting>

<setting name="OrgDBOrgSettingsTool_CrmDiscoveryService_CrmDiscoveryService" serializeAs="String">
<!--- Please change CrmServer to your Crm Server Name -->
<value>https://dev.crm.dynamics.com/XrmServices/2011/Discovery.svc</value>
</setting>

<setting name="OrgDBOrgSettingsTool_SKU" serializeAs="String">
<!--- Possible values here are Online/SPLA/OnPrem -->
<value>Online</value>
</setting>

<setting name="OrgDBOrgSettingsTool_UserName" serializeAs="String">
<!--- Please change the value below to your email Id/User Name for Online / SPLA -->
<value>my crm login email</value>
</setting>

<setting name="OrgDBOrgSettingsTool_Domain" serializeAs="String">
<value>DOMAIN</value>
</setting>

<setting name="OrgDBOrgSettingsTool_OrgServiceUri" serializeAs="String">
<value>https://dev.api.crm.dynamics.com/XrmServices/2011/Organization.svc</value>
</setting>

<setting name="OrgDBOrgSettingsTool_RegistrationEndPointUri" serializeAs="String">
<value>https://login.live.com/ppsecure/DeviceAddCredential.srf</value>
</setting>

<setting name="OrgDBOrgSettingsTool_Partner" serializeAs="String">
<!--- This is applicable only for Online -->
<value>Crm.Dynamics.com</value>
</setting>

<setting name="OrgDBOrgSettingsTool_Environment" serializeAs="String">
<!--- This is applicable only for Online -->
<value></value> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T00:43:07.933

在 MS 支持的帮助下，我得到了这个工作。我将在下面发布对我有用的配置。请注意，我正在访问 CRM 的在线版本。此外，请确保删除 LiveDeviceID 文件夹中的所有文件，因为当那里存在现有条目时，应用程序似乎会感到困惑。对我来说，该目录位于`users/<me>`. 另请注意，据称您必须使用 CRM 管理员帐户登录。另请注意，我仅使用 hotmail 电子邮件对此进行了测试。

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="OrgDBOrgSettingsTool.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <applicationSettings>
    <OrgDBOrgSettingsTool.Properties.Settings>
      <setting name="OrgDBOrgSettingsTool_CrmService_CrmService" serializeAs="String">
        <!--- Please change CrmServer to your Crm Server Name -->
        <value>http://CrmServer/MSCrmServices/2007/CrmService.asmx</value>
      </setting>
      <setting name="OrgDBOrgSettingsTool_CrmDiscoveryService_CrmDiscoveryService"
          serializeAs="String">
        <!--- Please change CrmServer to your Crm Server Name -->
        <value>https://dev.crm.dynamics.com/XrmServices/2011/Discovery.svc</value>
      </setting>
      <setting name="OrgDBOrgSettingsTool_SKU" serializeAs="String">
        <!--- Possible values here are Online/SPLA/OnPrem -->
        <value>Online</value>
      </setting>
      <setting name="OrgDBOrgSettingsTool_UserName" serializeAs="String">
        <!--- Please change the value below to your admin email Id/User Name for Online / SPLA -->
        <value>your_crm_admin_email></value>
      </setting>
      <setting name="OrgDBOrgSettingsTool_Domain" serializeAs="String">
        <value>crmdom</value>
      </setting>
      <setting name="OrgDBOrgSettingsTool_OrgServiceUri" serializeAs="String">
        <value>https://your_org_name.crm.dynamics.com/XrmServices/2011/Organization.svc</value>
      </setting>
      <setting name="OrgDBOrgSettingsTool_RegistrationEndPointUri" serializeAs="String">
        <value>https://login.live.com/ppsecure/DeviceAddCredential.srf</value>
      </setting>
      <setting name="OrgDBOrgSettingsTool_Partner" serializeAs="String">
        <!--- This is applicable only for Online -->
        <value>Crm.Dynamics.com</value>
      </setting>
      <setting name="OrgDBOrgSettingsTool_Environment" serializeAs="String">
        <!--- This is applicable only for Online -->
        <value>INT</value>
      </setting>
    </OrgDBOrgSettingsTool.Properties.Settings>
  </applicationSettings>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:51:16.890

您的 CRM 服务器名称节点在我看来是错误的。试试这个：

```
<setting name="OrgDBOrgSettingsTool_CrmService_CrmService" serializeAs="String">
  <value>http://yourorgname.api.crm.dynamics.com/MSCrmServices/2007/CrmService.asmx</value>
</setting> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T15:52:55.807

（我知道这个问题很老，但似乎没有任何好的参考资料，所以我想我会在这里添加一些有用的信息）

需要检查的一些事项：

如果您在美国以外使用 CRM Online，则需要在整个过程中将 crm.dynamics.com 替换为 crm4.dynamics.com（针对 EMEA）或 crm5.dynamics.com (APAC)

CRM 服务器名称应为“myorg.crm....”，例如

```
<setting name="OrgDBOrgSettingsTool_CrmService_CrmService" serializeAs="String">
<!--- Please change CrmServer to your Crm Server Name -->
<value>https://YOURORG.crm.dynamics.com/MSCrmServices/2007/CrmService.asmx</value>
</setting> 
```

OrgService URI 需要 api 位，但又应该是 myorg。：

```
<setting name="OrgDBOrgSettingsTool_OrgServiceUri" serializeAs="String">
<value>https://YOURORG.api.crm.dynamics.com/XrmServices/2011/Organization.svc</value>
</setting> 
```

# android - 如何使用布局充气器在另一个视图中添加视图

> ID：11407703
> 
> 赞同：1
> 
> 时间：2012-07-10T06:21:38.947
> 
> 标签：android, layout-inflater

我用两个按钮创建了 mainLayout

add：添加其他布局

remove ：删除其他布局。

```
 <Button
             android:id="@+id/btnAdd"
             android:textStyle="bold"

             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_gravity="center_horizontal"
             android:text="Add View"
             android:onClick="addView" />

      <Button
             android:id="@+id/btnRemove"
             android:textStyle="bold"

             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_gravity="center_horizontal"
             android:text="Remove View"
             android:onClick="removeView" /> 
```

现在，当我单击 addView 按钮时，我编写了以下代码来添加视图

```
 LayoutInflater inflater= (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
    view=inflater.inflate(R.layout.other_layout,null);

    mainLayout.addView(view); 
```

**视图添加到主布局下方**。但我希望视图在 addView 按钮下方添加（在 removeView 按钮上方而不是在主布局的底部）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:30:04.843

在两个按钮之间添加一个框架布局。

然后在运行时将您的视图膨胀到框架布局中。

```
LayoutInflater inflater= (LayoutInflater)this.getSystemService (LAYOUT_INFLATER_SERVICE);     view=inflater.inflate(R.layout.other_layout,null);  
    myframeLayout.addView(view); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:32:45.107

在 Android 中重用布局的最佳方法是使用`<include>`标签。在这里查看更多使用方法：[Re-using layouts with include tag](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:15:47.597

`<merge>`使用以下标签创建您希望添加的新布局：

```
<merge ...>
   //your layout
</merge> 
```

`<include>`在主布局中添加可见性消失（或不可见）的布局。通过处理您想要的事件，您可以简单地以您喜欢的方式调整可见性。

# nunit - OpenCover 能否使用 Microsoft.Moles.Runner 和 Nunit 获得代码覆盖率？

> ID：11407709
> 
> 赞同：1
> 
> 时间：2012-07-10T06:22:45.077
> 
> 标签：nunit, moles, opencover

我将 OpenCover 与 Visual Studio2010 专业版一起使用。它在命令行上与 NUnit 配合得很好。

```
OpenCover.Console.exe -register:user -target:"C:\bin\NUnit 2.6\bin\nunit-console.exe" -targetargs:"C:\App\Test\ApplicationTest\bin\Debug\ApplicationTest.dll"  -targetdir:"C:\App\bin\Debug" -output:html\result.xml 
```

结果如下。

> NUnit-Console 版本 2.6.0.12051 版权所有 (C) 2002-20011 Charlie
> Poole。版权所有 (C) 2002-2004 James W. Newkirk、Michael C. Two、
> Alexei A. Vorontsov。版权所有 (C) 2000-2002 菲利普·克雷格。
> 保留所有权利。
> 
> 运行时环境 - 操作系统版本：Microsoft Windows NT 6.1.7601
> Service Pack 1 CLR 版本：4.0.30319.269 (Net 4.0)
> 
> ProcessModel：默认 DomainUsage：单次执行运行时：
> net-4.0 .. 测试运行：2，错误：0，失败：0，不确定：0，
> 时间：42.14 秒未运行：0，无效：0，忽略：0，跳过： 0
> 
> 提交... 已访问 175 个课程中的 59 个 (33.7142857142857) 已访问
> 方法 4131 个中的 268 个 (6.48753328491891) 已访问点 71763 中的 15137 个
> (21.0930423755975) 已访问分支 8025 个中的 196 个 (2.4423676012)
> 
> ==== 替代结果（包括所有方法，包括那些没有
> 相应来源的方法） ==== 替代访问类 59 of 207
> (28.5024154589372) 替代访问方法 284 of 4371
> (6.49736902310684)

但是它不适用于 Microsoft.Moles。

```
OpenCover.Console.exe -register:user -target:"C:\Program Files\Microsoft Moles\bin\moles.runner.x86.exe" -targetargs:"""C:\App\Test\ApplicationTest\bin\Debug\ApplicationTest.dll""  /r:""C:\bin\NUnit 2.6\bin\nunit-console.exe""" -targetdir:"C:\App\bin\Debug" -output:html\result.xml 
```

这个结果如下。

> 微软 Moles Runner v0.94.51023.0 --
> [http://research.microsoft.com/moles](http://research.microsoft.com/moles) -- 。NET v4.0.30319 版权所有 (c)
> Microsoft Corporation 2007-2010。版权所有。
> 
> 检测...启动
> NUnit-Console 版本 2.6.0.12051
> CLR 版本：4.0.30319.269 (Net 4.0)
> 
> ProcessModel：默认 DomainUsage：单次执行运行时：
> net-4.0 .. 测试运行：2，错误：0，失败：0，不确定：0，
> 时间：28.004 秒未运行：0，无效：0，忽略：0，跳过： 0
> 
> 提交... 访问过的课程 0 of 2 (0) 访问过的方法 0 of 14 (0)
> 访问过的点 0 of 45 (0) 访问过的分支机构 0 of 2 (0)
> 
> ==== 替代结果（包括所有方法，包括那些没有相应
> 来源的方法） ==== 替代访问类 0 of 2 (0)
> 替代访问方法 0 of 16 (0)

测试的结果都是正确的，但没有覆盖。

我试图改变痣的参数，例如'/args:"/domain=Multiple"'、-oldType 等，但它从来没有用过。

有人注意到我应该怎么做吗？OpenCover 可以在 Nunit 中使用痣吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:59:57.420

我自己解决了这个问题。首先，将以下代码添加到批处理文件中或将其设置为命令行命令。

> 设置 CLRMONITOR_EXTERNAL_PROFILERS={1542C21D-80C3-45E6-A56C-A9C1E4BEB7B8}

此链接可能会有所帮助。[http://s135.codeinspot.com/q/2342744](http://s135.codeinspot.com/q/2342744)

# c# - 如何编写按周分组日期的查询

> ID：11407716
> 
> 赞同：-3
> 
> 时间：2012-07-10T06:23:19.170
> 
> 标签：c#, sql-server, datetime, group-by

> **可能重复：**
> [c#：减去时间的最简单方法是什么？](https://stackoverflow.com/questions/3993226/c-whats-the-easiest-way-to-subtract-time)

我有一个包含日期字段和其他字段（不重要提及）的表格，我需要两个报告：
1.基于月
2.基于周

我已经完成了第 1 号报告

我的问题是我如何才能达到报告 2，我需要一些东西来给我这个：

假设我们的日期从 2001/01/01 到 2001/01/31

我想按周对所有天进行分组，例如，如果 2001/01/01 是星期日，我想要这样的组：

第 1 周 : 2001/01/01 - 2001/01/02 - ... - 2001/01/07
第 2 周 : 2001/01/08 - ... - 2001/01/14
第 3 周 : 2001/01/15 - ... - 2001/01/21
第 4 周 : 2001/01/22 - ... - 2001/01/28
第 5 周 : 2001/01/29 - 2001/01/30 - 2001/01/31

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:24:11.180

如果您在 AddDays 方法中传递负数，它将从日期对象中减去该天数。

```
DateTime.Now.AddDays(-3); 
```

或者

```
 DateTimeObj.AddDays(-1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:25:20.770

`AddDays`您可以通过以下方式在函数中简单地插入负值：

```
 DateTimeObj.AddDays(-1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T06:25:24.380

简短的是

```
DateTimeObj.AddDays(-1); 
```

您也可以指定负数

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T06:25:45.447

这有助于

`DateTime yesterday = DateTime.Now.AddDays(-1);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T06:27:12.530

```
DateTime.Now.AddDays(-1);
dateTimeObj.AddDays(-1); 
```

# jquery - jQuery UI Datepicker 位置底部或顶部但不是两者

> ID：11407719
> 
> 赞同：0
> 
> 时间：2012-07-10T06:23:50.730
> 
> 标签：jquery, jquery-ui, datepicker

我正在使用 Datepicker 插件并根据我的需要对其进行自定义。我几乎可以在 CSS 中完成我需要的所有事情，但有一件事困扰着我。当日历根据您在屏幕上的位置打开时，它将显示在输入的顶部或下方。我怎样才能控制这种行为？我正在尝试将其调整为响应式布局，因此有时我希望它在顶部，而有时我希望它在下面但不是两者兼而有之。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:44:38.727

Datepicker 调用`$.datepicker._checkOffset`来计算位置。

我会抓取原始函数（从[这里](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js)）并根据我的需要重新定义它。

# window - 我想通过批处理文件关闭所有打开的窗口和文件

> ID：11407721
> 
> 赞同：0
> 
> 时间：2012-07-10T06:24:07.507
> 
> 标签：window, batch-file

现在，我正在关闭所有打开的窗口。我想编写一个批处理文件，只需双击批处理文件就可以关闭所有打开的文件和窗口。请为此指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:59:42.907

您可以在批处理文件中使用 taskkill 命令来终止特定进程：[http ://technet.microsoft.com/en-us/library/bb491009](http://technet.microsoft.com/en-us/library/bb491009)

# sql - 从表中选择计数所需的 Sql 查询

> ID：11407723
> 
> 赞同：-1
> 
> 时间：2012-07-10T06:24:12.223
> 
> 标签：sql

我有一个包含以下字段的表。

```
Col A  Col B
-----  -----
I1      10
I1      10
I2      16
I3      14
I2      16 
```

我需要一个应该给出如下输出的查询：

```
ColA   Col B  Count
----   -----  -----
I1      10      2
I2      16      2
I3      14      1 
```

如何为此编写查询。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T08:57:59.280

```
select colA, colB, count(colB) as `Count`
from your_table
group by colA, colB 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:58:25.520

```
SELECT ColA, ColB, Count(ColB) FROM T GROUP BY ColA, ColB 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T08:59:48.227

利用`GROUP BY`

```
SELECT  colA, colB, COUNT(colB) as Total
   FROM tableName
   GROUP BY colA, colB 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T06:27:02.987

如果`ColB`对于 的特定值始终相同`ColA`，则可以使用`max`：

```
select  ColA
,       max(ColB)
,       count(*)
from    YourTable
group by
        ColA 
```

否则，您必须解释`ColB`结果中的值是如何计算的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T04:54:02.643

尝试这个：

```
SELECT ColA, colB, COUNT(colB) AS Count
FROM TableName
GROUP BY ColA,ColB 
ORDER BY ColA,ColB 
```

请参阅[此 SQL 小提琴。](http://sqlfiddle.com/#!2/f3f3c/1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T06:39:14.113

请试试这个，让我知道

```
select [Col A] ,[Col B] ,count(*) [Count]
    from <table>
    group by [Col A] ,[Col B]
    order by [Col A] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T06:44:33.750

您可以使用此解决方案：

```
SELECT ColA, ColB, COUNT(1) AS Count
FROM tbl
GROUP BY ColA, ColB 
```

# enterprise-library - Enterprise Library 5.0 日志记录应用程序块：使用 DatabaseTraceListener 记录客户消息

> ID：11407728
> 
> 赞同：0
> 
> 时间：2012-07-10T06:24:44.053
> 
> 标签：enterprise-library, logging-application-block

我正在使用 Enterprise Library 5.0，我的任务是将信息记录到数据库中。为此，我使用了 Enterprise Library Logging Application Block 和 Database Trace Listener。

现在，几天后我发现我需要更多信息来登录 Logging.LOG 表。它们是：User_ID、Session_ID 等。

根据业务要求，我不能使用 LogEntry 类的 ExtendedProperty 属性并将此信息存储在 XML 格式的日志表的 FormattedMessage 列中。我想要日志数据库的日志表中名称为“User_ID”和“Session_ID”的正确列。

问题是：如何在日志表中推送自定义信息？

为此，我发现了一个名为“CustomTraceListener”的东西，我们需要覆盖两个方法，即 Write(string Message) & WriteLog(string Message)

*   如何使用此 CustomeTraceListener 将客户消息推送到日志表？

*   写入方法采用字符串类型的单个参数，这意味着我会得到一个连接字符串，我需要将其分解为不同的信息并使用我自己的代码推送到数据库中吗？

有人可以向我发送一个CustomeTraceListener的实施示例到-->数据库

请帮我。

谢谢，

苏拉杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T09:42:22.037

按照此创建自定义跟踪侦听器：http: [//msdn.microsoft.com/en-us/library/ff647545.aspx](http://msdn.microsoft.com/en-us/library/ff647545.aspx)

然后，您可以使用 Fluent 配置执行类似的操作（代码不起作用，但给您一个想法）：

```
 var builder = new ConfigurationSourceBuilder();
    var serviceConfig = new NameValueCollection();
    serviceConfig.Add("Key", "data");
    builder.ConfigureLogging()
        .LogToCategoryNamed("General")
        .WithOptions.SetAsDefaultCategory()
        .SendTo.Custom<ServiceTraceListener>("ServiceTraceListener", serviceConfig)
        .FormatWith(new FormatterBuilder()
        .TextFormatterNamed("Text Formatter")
        .UsingTemplate("Timestamp: {timestamp}...{newline})}"));

    var configSource = new DictionaryConfigurationSource();
    configSource.Add(LoggingSettings.SectionName, builder.Get(LoggingSettings.SectionName));
    var cont = EnterpriseLibraryContainer.CreateDefaultContainer(configSource);
    return cont.GetInstance<LogWriter>(); 
```

*（代码±来自：[Enterprise Library 5.0 Logging using CustomTraceListener and ConfigurationSourceBuilder](https://stackoverflow.com/questions/10455949/enterprise-library-5-0-logging-using-customtracelistener-and-configurationsource)）*

以下是您可以在**.UsingTemplate 方法中使用的数据的概述：http:** [//msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.logging.configuration.textformatterdata.template(v=PandP. 50).aspx](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.logging.configuration.textformatterdata.template(v=PandP.50).aspx)

然后在您的 CustomTraceListener TraceData 覆盖方法中使用此模板（如果您按照我在此处链接的 MSDN 中的演练进行操作）。

另请参阅：[http](http://msdn.microsoft.com/en-us/library/ff664363(v=PandP.50).aspx) ://msdn.microsoft.com/en-us/library/ff664363(v=PandP.50).aspx 额外格式：http: [//msdn.microsoft.com/en-us/library/ff664562( v=PandP.50).aspx](http://msdn.microsoft.com/en-us/library/ff664562(v=PandP.50).aspx)

# c# - MVC 4 后期绑定 DataContext 实体 LINQ 参考

> ID：11407729
> 
> 赞同：3
> 
> 时间：2012-07-10T06:24:46.750
> 
> 标签：c#, asp.net-mvc, entity-framework, linq-to-entities, datacontext

长期聆听者，第一次来电者。

我可能对此采取了错误的方法，所以任何帮助都会很棒。

我正在使用 C#、MVC 4、Code First、Entity Framework 4.3 和 Razor。

我正在尝试将 EF 数据类和一些方法拆分为一个单独的类项目，以便它们通常可以被多个其他项目引用。我创建了这个简化的示例来尽可能地突出这个问题。

所以在一个课堂项目中，我有：

```
public MyGeneric(string name)
{
    ID = Guid.NewGuid();
    Name = name;
}

public Guid ID { get; set; }
public string Name { get; set; }

public void AddThis(MyGeneric obj)
{
    using (var db = Activator.CreateInstance<myDbContext>())
    {
        var myOthers = from mo in db.MyOther
                       where mo.OtherID == obj.ID
                       select mo;

        myOthers.ForEach(mo => db.MyOther.Add(mo));
        db.SaveChanges();
    }
} 
```

然后我可以在主项目中引用它，例如：

```
public class SampleInherit : MyGeneric
{
    public SampleInherit(string newName, string secName)
        : base(newName)
    {
        SecName = secName;
    }

    public string SecName { get; set; }

    public void DoSomething(SampleInherit obj)
    {
        base.AddThis(obj);
        // do other stuff
    }
} 
```

我要做的是将一些类及其方法通用化（这是一个词吗？）到一个单独的辅助项目中。这个附带项目将提供基类（按需要的顺序）：

*   使用 EF DbContext 创建/访问数据库，
*   允许添加更多属性，
*   提供影响基础数据的方法/程序，
*   更适合主项目的重命名。

现在，如果我只是将基类继承到主项目中的类中，那么除了基类引用 myDbContext 和 LINQ 语句中的实体对象引用之外，它都可以工作。

你能后期绑定 DataContext 还是我把自己画到一个角落里？

为您能提供的所有帮助而欢呼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:39:05.613

我认为您要做的是实现 IRepository 模式。基本上你想做的是创建一个包含你的实体和你的 IRepository 的类项目。从那里，您可以通过创建 Repository 类来创建 IRepository 的具体实现。您使用业务逻辑层通过 IRepository 访问存储库。并在那里进行数据访问。

```
public interface IRepository<T>
{
    IQueryable<T> Fetch();

    bool Insert(T entity);

    bool Update(T entity);
} 
```

然后创建你的存储库

```
public class MyRepository<TContext> : IRepository<EntityType> where TContext: DbContext, new()
{
    private TContext context;

    public MyRepository(TContext context)
    {
        this.context = context;
    }

    public IQueryable<T> Fetch()
    {
       return context.EntityTypes;
    }

    // Insert and update logic
} 
```

最后创建您的业务逻辑

```
public class BusinessLogic
{
    private IRepository<EntityType> repository;

    public BusinessLogic(IRepository<EntityType> repository)
    {
        this.repository = repository;
    }

    public void Add(EntityType obj)
    {
      bool isNew = // check if new
      if(isNew)
      {
        this.repository.Insert (obj)    
      }
      else
      {
        this.repository.Update(obj);
      }
    }
} 
```

然后调用你的业务逻辑

```
IRepository<EntityType> repository = new MyRepository<MyDbContext>(new MyDbContext());
BusinessLogic service = new BusinessLogic(repository);

service.Add(new EntityType()); 
```

我不认为您想要数据上下文的后期绑定，出于性能考虑最好使用泛型（如上面的示例）。同样使用此方法，您可以实例化一个数据上下文并将其传递给您的业务服务，以便实体框架可以跟踪您的实体，而不是为每次调用 AddThis 实例化一个新的数据上下文。加上这种模式，你可以做各种很酷的事情，比如使用像 ninject 这样的 IOC 容器为你创建这些业务服务，并使用 Mocks 为你的代码创建单元测试，而无需访问数据库（通过模拟你的存储库）。

# php - 制作多用户微博网站的最佳方法是什么？

> ID：11407731
> 
> 赞同：0
> 
> 时间：2012-07-10T06:24:48.437
> 
> 标签：php, server-side-scripting

我有一个类似 Twitter 的想法，我正在自己实施。我是 Web 开发的新手，所以我不太了解可以使工作更快的可用工具。我尝试了许多免费的 twitter 克隆，例如 status.net，但是必须在它们的脚本中进行很多更改，以至于我回到从头开始自己编写后端代码（使用 PHP）。但是他们的方法比从头开始编码（后端）更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:00:25.117

你可以试试[Elgg](http://elgg.org)。它有一个微博插件、用户档案系统和社交网络的所有基本要求。您可以[在此处查看默认微博插件的 elgg 演示](http://elggdemo.webgalli.com/thewire/all)

Drupal 也是一个很好的解决方案。但是您必须针对 Elgg 开箱即用提供的相同结果对其进行自定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T07:03:13.387

[WordPress 网络](http://codex.wordpress.org/Create_A_Network)（以前称为 WordPress Multisite 或 MU 或 WPMU）可能是一种选择，如果您希望多个站点具有相同的后端，但仍然不能在 50 个站点上进行 50 次更新，而只有一个，那么您应该尝试一下。他们不会轻易“看到”对方（[其他安装教程](http://www.onextrapixel.com/2011/07/07/the-ultimate-wordpress-multi-site-network-management-guide/)）。

或者[P2 主题](http://p2theme.com/)，其界面接近微博站点，如果所有用户都必须进行交流。

如果你想用 PHP 编写代码，那么像[Code Igniter](http://ellislab.com/codeigniter)这样的框架绝对可以节省时间（甚至更多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:30:46.320

您可以将 Drupal-7.1 用于 php，另一件事是，如果您想使用 java，您可以使用 liferay-6.1，这也是更好的选择...

# java - 从组合框中选择国家和城市

> ID：11407734
> 
> 赞同：0
> 
> 时间：2012-07-10T06:24:58.853
> 
> 标签：java, swing, jcombobox

**对于 Java Swings 中的桌面应用程序，..**
假设有 3 个组合框。SELECT COUNTRY SELECT STATE SELECT CITY 如果我从国家/地区列表框中选择任何国家/地区，该州中的值将自动插入数据库值>>然后在选择州时，城市将插入城市组合框中

如果你能帮助那么请帮助我...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:41:21.287

**1.**尝试创建3个ComboBox。

**2.**用所有国家名称静态填充第一个组合框。

**3.**每个国家都将映射到其州。

例如：

```
 HashMap<"String",ArrayList<States>>(); 
```

**4.**一旦选择了国家，所有的国家都从数据库中取出，并插入到映射到那个国家的 ArrayList<> 中。

**5.**类似地，每个州都将使用 HashMap 与其城市相关联。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T06:42:21.510

我建议你改写你的问题。据我了解，

我建议你使用[ItemListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ItemListener.html)，[itemStateChanged()](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ItemListener.html#itemStateChanged%28java.awt.event.ItemEvent%29)。

另外，请查看[处理组合框上的事件。](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#listeners)

# iphone - 更改单元格选择的披露指示器颜色

> ID：11407747
> 
> 赞同：9
> 
> 时间：2012-07-10T06:25:55.090
> 
> 标签：iphone, objective-c, ios, ipad

我已经阅读了一些关于此的帖子，但仍然无法得到我的问题的答案。

我有一个披露指标。![在此处输入图像描述](../Images/d7a44922c6b52c2e28524ab7833b721a.png)

我这样添加：

```
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator; 
```

一切正常，很好，我唯一想改变的是当我按下单元格时，披露指示器将颜色变为白色。![在此处输入图像描述](../Images/0086c9ca8ac2cb23a22b2821b80b91e8.png)我不想要那个。所以我的问题是如何使披露指示器颜色固定而不改变？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T06:29:17.463

您需要为此使用自定义附件视图。句法：

```
cell.accessoryView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"accessory.png"]] autorelease]; 
```

在这里，您正在分配带有图像**附件.png 的****图像视图**

 **到您的单元格的附件视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-21T22:57:26.500

**斯威夫特 3**

添加自定义附件视图：

*示例 1：*

```
cell.accessoryView = UIImageView(image: UIImage(named: "accessory.png")) 
```

*示例 2：*

嵌套在一个小源图像的视图容器中：

```
let accessoryView = UIView(frame: CGRect(x: 0, y: 0, width: 24, height: 50))
let accessoryViewImage = UIImageView(image: UIImage(named: "accessory.png"))
accessoryViewImage.center = CGPoint(x: 12, y: 25)
accessoryView.addSubview(accessoryViewImage)

cell.accessoryView = accessoryView 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-02T14:55:37.063

尝试这样的事情。也许你将能够实现你想要的。

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
        for (id obj in cell.subviews){
            if([obj isKindOfClass:[UIButton class]]) {
                UIButton *button = obj;
                for(id btnObj in button.subviews){
                    if([btnObj isKindOfClass:[UIImageView class]]) {
                        UIImageView *imgView = btnObj;
                        UIImage *image = [imgView.image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
                        imgView.image = image;
                        imgView.tintColor = cell.backgroundColor;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T06:29:46.060

您可以尝试使用 uiimageview 来应用单元格附件类型，如下面的代码：

```
cell.accessoryView = myAccessoryUIImageView; 
```

单元格附件视图 uiimageview 未正确对齐尝试以下代码：

```
 UIView* accessoryView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 24, 50)];
    UIImageView* accessoryViewImage = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"accessory_image.png"]];
    accessoryViewImage.center = CGPointMake(12, 25);
    [accessoryView addSubview:accessoryViewImage];
    [cell setAccessoryView:accessoryView];
    [accessoryViewImage release];//not use this line your ios sdk in 5.0 and above! 
    [accessoryView release];//not use this line your ios sdk in 5.0 and above! 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T14:37:37.667

我遇到了同样的问题，发现即使你也在为此苦苦挣扎......虽然它的答案很晚，但我通过写下一行来解决我的问题，

`cell.selectionStyle = UITableViewCellSelectionStyleNone;`

它在选择时停止了配件类型 UITableViewCellAccessoryDisclosureIndicator 为白色。

希望这有帮助。

* * *

斯威夫特版本：

`cell.selectionStyle = .none`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-19T23:31:04.267

**Swift 3** - 一个简单的表格视图类，可以`showsDisclosure`在配置单元格时显示披露指示器或不使用布尔值。现在公开箭头的色调颜色是硬编码的，但是如果您想要一个更可重用的单元格，您的颜色选择也可以很容易地通过配置函数传递。

请注意，“chevron”图像设置为资产目录中的模板图像，这意味着它可以着色。您也可以在代码中将 UIImage 制作成模板图像，如下所示：`UIImage(named: "chevron")?.withRenderingMode(.alwaysTemplate)`

```
class HeaderTableViewCell: UITableViewCell {

    @IBOutlet weak var sectionTitle: UILabel!

    override func awakeFromNib() {
        sectionTitle.textColor = .black
    }

    func configure(title: String, showsDisclosure: Bool = false) {
        self.sectionTitle.text = title

        if showDisclosure {
            //add custom disclosure arrow
            let chevronImgView = UIImageView(image: UIImage(named: "chevron"))
            chevronImgView.tintColor = .red
            self.accessoryType = .disclosureIndicator
            self.accessoryView = chevronImgView
        } else {
            self.accessoryType = .none
            self.accessoryView = nil
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-06-16T10:00:13.290

[[UITableViewCell 外观] setTintColor:[UIColor redColor]];**

# apache-flex - Flex Tile List 的行分隔符

> ID：11407748
> 
> 赞同：0
> 
> 时间：2012-07-10T06:25:59.273
> 
> 标签：apache-flex, list, drag-and-drop, flex4

我正在使用 Flex 4.6 在 Adob​​e AIR 中创建一个应用程序。在那，我用 TileLayout 创建了一个列表。而且我只想在该列表中进行拖放。所以我在该列表中启用了拖放选项。

但问题是当我进行拖放时，用于在任何特定位置放置（或放下）一个组件的行分隔符（或位置指示器 -*我不知道它到底叫什么）不正确可见。*我想以我的方式自定义该行分隔符。

那么我怎样才能皮肤（或自定义）该行分隔符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:31:29.297

如果您使用的是 Spark 列表，请检查 `dropIndicator`皮肤部分（或`dropIndicatorSkin`样式）：[live docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/List.html#SkinPartSummary)。

希望这可以帮助。

# c - 如何禁用 DST_METRIC_READ_ONLY 内核 3.0.26

> ID：11407753
> 
> 赞同：0
> 
> 时间：2012-07-10T06:26:17.880
> 
> 标签：c, network-programming, linux-kernel, ipv6, kernel

在 net/include/dst.h 中，标志 DST_METRICS_READ_ONLY 设置在 struct dst 的 _metric 成员上。但我不希望该结构是只读的。如何禁用该标志。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:36:27.393

*dst->_metrics* 设置为 *DST_METRICS_READ_ONLY* 仅当函数 *dst_init_metrics()* 被调用且**其参数 read_only 设置为 true 时**。因此，如果您想确保不启用此只读标志，请修补您的内核以在任何调用 dst_init_metrics 的地方使用 false。

# macros - 编写宏时获取原始符号名称

> ID：11407759
> 
> 赞同：1
> 
> 时间：2012-07-10T06:26:56.127
> 
> 标签：macros, clojure, lisp

我编写了以下宏，它定义了具有自定义字符串表示的记录。

```
(defmacro defrecord*
  [rname args]
  `(defrecord ~rname [~@args]
     Object
     (toString [_]
       ~(let [kvs (->> args
                       (map (fn [arg] [(str arg ": ") arg]))
                       (interpose ", ")
                       (apply concat))]
          `(str ~rname "(" ~@kvs ")"))))) 
```

然而，`toString`返回的结果并不是我所期望的。

```
(defrecord* Foo [bar baz]) 
(.toString (Foo. 3 4))

> "class user.Foo(bar: 3, baz: 4)" 
```

在这种情况下，我希望我`toString`能回来。`Foo(bar: 3, baz: 4)`要获得这种格式的字符串表示形式，我需要进行哪些更改？

另外，我应该对上述代码进行哪些更改（如果有的话）以使其更惯用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:01:16.093

只需替换`~rname`为`'~rname`- 你想要实际的符号`Foo`，而不是它在当前范围内的值，即 class `user.Foo`。

您也有`(apply concat)`错误`(interpose ", ")`的顺序 - 您将被`", "`视为一个序列，并添加`\,`和`\space`字符而不是单个字符串。一旦你交换了它，很明显你想要`mapcat`而不是`(apply concat (map ...))`. 所以我会用类似的东西替换你的整个 let-block：

```
`(str '~rname
      "(" ~@(interpose ", "
                       (mapcat (fn [arg] [(str arg ": ") arg])
                               args))
      ")") 
```

或者，如果您真的想提高性能，您可以`~(str "(" rname)`在编译时而不是在运行时进行计算。

但请注意，从 Clojure 1.3 开始，记录的打印方式与此非常相似，因此，如果您只是为了方便调试而这样做，请不要打扰。如果您这样做是因为您`.toString`稍后会使用 ' 的输出...那么，编写该代码的人感到羞耻，因为`.toString`主要用于调试内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:58:21.257

只需更改`~rname`为`~(name rname)`：

```
(defmacro defrecord*
  [rname args]
  `(defrecord ~rname [~@args]
     Object
     (toString [_]
       ~(let [kvs (->> args
                       (map (fn [arg] [(str arg ": ") arg]))
                       (interpose ", ")
                       (apply concat))]
          `(str ~(name rname) "(" ~@kvs ")"))))) 
```

# html - 如何将 div 设置为浏览器窗口高度的 100%，但具有顶部和底部边距？

> ID：11407761
> 
> 赞同：2
> 
> 时间：2012-07-10T06:27:02.233
> 
> 标签：html, css

更具体地说，我有一个横跨浏览器窗口右侧的右侧边栏。那部分没有出现任何问题。但是，我希望它包含一个 div，它也是浏览器高度的 100%，但具有顶部和底部边距。如果内容不适合浏览器窗口高度，则此 div 中的内容将滚动。我无法让它工作。这是我的代码：

HTML：

```
<div class="outerWrap">
    <div class="innerWrap">
        // stuff
    </div>
</div> 
```

CSS：

```
.outerWrap { // this works
    position: fixed;
    right: 0;
    top: 0;
    height: 100%;
    width: 277px;
}

.innerWrap { // this doesn't work
    width: 277px;
    margin: 152px 0px 10px 0px;
    overflow-y: scroll;
    overflow-x: hidden;
    height: 100%;
} 
```

我怎样才能让它工作，所以我在内部 div 上有一个顶部和底部边距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:41:36.430

采用 -

小提琴 - [http://jsfiddle.net/EKm7p/](http://jsfiddle.net/EKm7p/)

```
html, body{height: 100%;}
.outerWrap {    
    height: 100%;
    width: 277px;
    border: 1px solid #f00;
}
.innerWrap {
    margin: 152px 0px 10px 0px;
    overflow-y: scroll;
    width: 277px;   
    display: block;
    position:absolute;
    height:auto;
    top:0;
    left:0;
    bottom:0;
    background-color: green;
} 
```

# javascript - javascript 对象属性

> ID：11407765
> 
> 赞同：-1
> 
> 时间：2012-07-10T06:27:21.397
> 
> 标签：javascript, object

有没有办法从另一个属性的值中获取一个对象属性

例如（在 SQL 中）从object.name ="somename"*的**对象获取**id ？*

 **我需要获取该对象的 id，但我只知道名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:00:49.590

我会假设您正在尝试使用一组对象来执行此操作，因为否则它没有任何意义。

根据您所需的浏览器支持，有一个名为`filter`on的方法`Array.prototype`。如果需要，您也可以对其进行填充。

代码最终看起来像这样：

```
var list = ​[
    {id:1, name:'bob'},
    {id:2, name:'jim'},
    {id:3, name:'sam'},
    {id:4, name:'tim'}
];

var sams = list.filter(function(obj){
    return obj.name == 'sam';
});

console.log(sams[0].id); 
```

这是一个 jsfiddle 链接：http: [//jsfiddle.net/g8rTA/](http://jsfiddle.net/g8rTA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:32:07.147

您可以使用此函数来获取它：

```
function getObjectByAttribute(list, attr, val){
    var result = null;
    $.each(list, function(index, item){
        if(item[attr].toString() == val.toString()){
           result = item;
           return false;
        }
    });
    return result;
}

var obj = getObjectByAttribute(yourList, 'name', 'somename');
if(obj) console.log(obj.id); 
```

编辑：

正如@nnnnnn 建议的那样，非jQuery 替代方案：

```
function getObjectByAttribut(list, attr, val){
    var result = null;
    for(var ind in list){
        if(list[ind][attr] == val) return list[ind];
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:02:58.900

你的问题我不清楚，但我正在回答这一行。

*有没有办法从另一个属性的值中获取一个对象属性。*

```
var obj = {
   'name' : 'ramesh',
   'surname' : 'suresh'
}

var obj2 = {
   'props' : 'name',
   'method' : 'blah'
}

for(var i in obj){
   if(obj.hasOwnProperty(i)){
      if(i === obj2['props']){
         console.log('Found ' + i);    // This will find 'name'
         break; 
      }

   }
} 
```**

# stored-procedures - Oracle中的引用游标和存储过程

> ID：11407767
> 
> 赞同：1
> 
> 时间：2012-07-10T06:27:25.737
> 
> 标签：stored-procedures, plsql, oracle11g, ref-cursor

我在 PL/SQL 中编写了一个简单的存储过程来执行相当于

```
 SELECT * FROM tablename 
```

这是返回引用游标的过程

```
 create or replace
   procedure proc_name (outVal OUT sys_refcursor) as
   myCursor sys_refcursor;
   myRecords records%ROWTYPE;
   l_sql VARCHAR(2000);
   begin
        l_sql := 'SELECT * FROM RECORDS';
        open myCursor for l_sql;
        loop
            FETCH myCursor INTO myRecords;
            EXIT WHEN myCursor%NOTFOUND;
            "DBMS_OUTPUT.put_line('myRecords.name =' || myRecords.name);"
        end loop;
   close myCursor;
   end; 
```

现在，当我想在 SQL 命令提示符中执行我的过程而不在代码**中包含引号**中的行时，我会这样做

```
 VARIABLE cr REFCURSOR
   EXEC proc_name(:cr) 
```

现在我得到一个提示说

```
 PL/SQL procedure successfully completed 
```

现在当我尝试执行命令时

```
 print cr; 
```

我收到一个错误

```
 ORA-24338: Statement handle not executed 
```

请帮我解决一下这个 。我需要知道如何仅使用我的存储过程返回的这个引用游标来打印表格。我不想在过程本身中打印任何内容，因此想从过程中一起删除**引号中的行**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:19:59.600

你会得到一个错误，因为游标被过程关闭了，因此它不能被“打印”。我建议如下：

1.  始终`SET SERVEROUTPUT ON`在 SQL*Plus 中执行您的过程之前运行，以便您可以看到您的`DBMS_OUTPUT`日志。使用此输出进行调试/记录。

2.  如果要返回稍后将显示的游标，请不要在过程中获取游标：

    ```
    SQL> CREATE OR REPLACE PROCEDURE p (x OUT SYS_REFCURSOR) IS
      2  BEGIN
      3     OPEN x FOR SELECT * FROM DUAL;
      4  END;
      5  /

    Procedure created.

    SQL> VARIABLE x REFCURSOR;
    SQL> EXEC p(:x);

    PL/SQL procedure successfully completed.

    SQL> PRINT x;

    DUM
    ---
    X 
    ```

请注意，调用应用程序（此处为 SQL*Plus `PRINT`）负责正确获取和关闭游标，而不是 PL/SQL 过程。

# php - 如何为动态创建的 ul li 菜单显示选择的菜单样式与其他样式不同

> ID：11407772
> 
> 赞同：0
> 
> 时间：2012-07-10T06:27:41.460
> 
> 标签：php, menu

在我的 php 项目中，我有一个动态菜单，即基于登录用户的菜单更改......菜单项是从数据库中获取的。现在我想以不同的风格显示选定的菜单...即，如果我单击用户管理器，菜单用户 _manager 应该突出显示..还有 create_user 和 modify_user 这应该突出显示...

```
 <ul>
<li>
<a href="dashboard.php">Dashboard</a>
</li>
<li>
<a href="user_manager.php">User manager</a>
</li>
<<li>
<a href="category.php">Category</a>
</li>

</ul> 
```

我该如何实现这个..任何帮助将不胜感激.... :)-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:35:55.187

简单的方法，您的 css 具有用户组命名样式。

```
<style>
.admin{}
.manager{}
.user{}
</style> 
```

并使用 PHP 在菜单中回显用户组

```
<ul class="<?=$_SESSION['user_group']?>">
<? if($_SESSION['user_group']=='admin'){ ?><li><a href'#'>Create User</a></li><? } ?>
<li><a href='#'>Logout</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:47:50.613

你如何创建你的菜单？显然，您至少有 3 个 php 文件。根据正在执行的内容，您可以选择将类添加到 li 项目。例如这样的：

```
<?php
$menuHTML = '<ul>';
foreach($menu as $menuItem) {
      if($menuItem == $fileName) $menuHTML .= '<li class="highlight">...etc...</li>';
      else $menuHTML .= '<li>...etc...</li>';
}
$menuHTML .= '</ul>';
?> 
```

要获取 $fileName，请查看[**FILE**](http://www.php.net/manual/en/language.constants.predefined.php)或[$_SERVER['PHP_SELF']](http://www.php.net/manual/en/reserved.variables.server.php)

# matlab - 提高 MATLAB 图形的质量以包含在 MS Word、MS PowerPoint 或 PDF 文档中

> ID：11407775
> 
> 赞同：1
> 
> 时间：2012-07-10T06:28:05.137
> 
> 标签：matlab, ms-word

问题是当我从 MATLAB 将图形粘贴到 MS Word 时，与其他软件包（如 MS Excel 或 SigmaPlot）制作的图形相比，图形的质量（字体大小、线宽和整体外观）非常低。更具体地说，字体大小对于 MS Word 文档来说太小了。线的宽度太窄。我可以通过更改字体大小和线宽来修复它们，但对于这样一个必不可少的东西来说，工作量太大了。我的脚本每次运行都会产生20多个图形，手动或通过代码逐个修改它们是不合理的。我希望 MATLAB 已经准备好处理这个问题（优化字体大小、将图形粘贴到 MS Word 或 PDF 中的线宽等）。

我不知道我是否使用了一种不好的方式将图形粘贴到 MS Word 中（编辑>复制图形），或者这只是 MATLAB 的方式。

以下是 PDF 文件中的图像，包括由 MATLAB 制作的图形。看看这身材有多丑小。图中的标签和文字难以阅读。

![在此处输入图像描述](../Images/c7dad2ebbf3bd95b4f85ee4e7b6e5a08.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:29:06.547

关于正确导出数据有很多话要说。您可以阅读我对上一个问题的回答，这可能会为您指明正确的方向：

[MATLAB 只打印我图的一部分](https://stackoverflow.com/questions/11341222/matlab-only-prints-a-part-of-my-figure/11391674#11391674)

如果你真的生成了很多图（20 不是很多），你应该依靠编程来确保结果具有相同的样式。诀窍是，您不必单独为每个绘图定义所有样式，而是定义可以轻松重用的样式单元数组，如下所示

```
plotstyle = {'MarkerSize',5,'LineWidth',3};
textstyle = {'FontWeight','demi','FontSize',12};

plot(data1,plotstyle{:})
plot(data2,plotstyle{:})
title('Some title',textstyle{:}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:34:39.700

导出为 eps 并切换到[LaTeX](http://en.wikipedia.org/wiki/LaTeX)以获得最佳质量（客观上你无法得到比这更好的；eps 是一种基于矢量的图形格式，即在绘图上放大多少后质量没有变化）。然而，从 MS Word 到 Latex 是相当大的一步。

您仍然必须摆弄字体大小等，我不知道任何内置优化选项：/ 有一些 LaTeX 工具可以提供帮助，但不要指望这些工具可以为您做*所有事情*。

**tldr：**如果你想要超级图形和文档布局：LaTeX+eps

# c# - 如何在此 GridView 中删除具有培训记录的员工？

> ID：11407777
> 
> 赞同：2
> 
> 时间：2012-07-10T06:28:14.657
> 
> 标签：c#, asp.net, gridview, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，并尝试使用 GridView 控件来显示数据库中员工表中的所有员工。我现在正在删除 GridView 中任何员工的全部信息。我面临以下问题，我不知道为什么：

仅供参考，我有以下数据库设计：

```
Employee Table: Username, Name, JobTitle, BadgeNo, IsActive, DivisionCode
Divisions Table: SapCode, DivisionShortcut
Groups Table: GroupID, GroupName
Courses Table: CourseID, CourseName, GroupID
Employee_Courses Table: EmployeeID, CourseID 
```

***（IsActive 就像一个标志（位数据类型）来指示员工是否在分配中）***

现在，我希望管理员能够删除员工，并删除 Employee_Courses 表中存在的所有培训信息。**怎么做？**

我的删除查询：

```
DELETE employee where dbo.employee.Username = @Username 
```

删除记录的代码隐藏如下：

```
protected void DeleteRecord(object sender, GridViewDeleteEventArgs e) 
    {
        string networkID = GridView1.DataKeys[e.RowIndex].Value.ToString();

        string connString = ConfigurationManager.ConnectionStrings["UsersInfoDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string deleteCommand = "DELETE employee where dbo.employee.Username = " + networkID;
        SqlCommand cmd = new SqlCommand(deleteCommand, conn);
        cmd.Parameters.AddWithValue("@username", networkID);
        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
        catch (SqlException se)
        {
            throw se;
        }
        finally
        {
            cmd.Dispose();
            conn.Close();
            conn.Dispose();
        }
        GridView1.DataBind();
    } 
```

它适用于没有培训记录的员工，但不适用于任何有培训记录的员工，它给了我以下错误：

> DELETE 语句与 REFERENCE 约束“FK_employee_courses_employee”冲突。冲突发生在数据库“UsersInfoDB”、表“dbo.employee_courses”、列“employeeId”中。该语句已终止。

**那么如何解决这个问题呢？**

**更新：**

仅供参考，用户名是 Employee 表中的主键，而 EmployeeID 是该主键的外键。那么如何从 Employee 表中删除该员工以及他在所有其他表中的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:30:23.923

一个错误是在您的删除查询中，您缺少表名 Employee_Courses 您的查询应该是这个

`DELETE employee from Employee_Courses where dbo.employee.Username = @Username`

出现错误是因为您有外键关系。先从子表中删除数据，再从父表中删除。UsersInfoDB 与Employee_Courses 表有关系，首先从UsersInfoDB 中删除记录，然后SQL SErver 将允许您从父表中删除记录。

可能的解决方案。转到您的表设计，右键单击表，将出现一个菜单选择**关系**，将打开一个名为**外键关系**的弹出窗口，从左侧窗格中选择所需的键，然后从右侧选择**更新和删除规范**并指定删除规则。对于 DELETE，您应该将其设置为 CASCADE。设置删除规则后，您不需要手动从子表中删除记录，现在您的代码将工作，每当您从 Employee_Courses 表中删除记录时，它也会自动从子表 (UserInfoDB) 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:41:40.490

首先从 Employee_Courses 表中删除数据，然后

从员工表。但是您在 Employee 表中有任何 EmployeeID/ID 列吗？我的意思是从

您从哪里获得 Employee_Courses 表的 EmployeeID 数据。

您已从两个表中删除数据，而不是仅从一个表中删除数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:31:48.423

首先删除employee_courses_employee 中的元素，其中EmployeeID = 您要删除的员工。删除所有记录后，您将不再获得引用约束。

首先执行，然后执行下一个（您当前尝试执行的查询我相信它只是访问员工表）

编辑：我相信您的员工表中似乎没有 EmployeeID 记录 - 但应该有（它是主键吗？）。如果有一些员工 ID 与用户名或员工表中的其他数据相关的存储，您肯定应该首先获取员工的 ID，删除他的所有记录，然后从员工表中删除员工。

“引用”约束是指称为“外键”的东西，它将一个表中的数据链接到另一个表中的数据。如果删除“主键”，则“外键”将不存在，链接它们的连接是垃圾，这就是为什么在删除具有主键（EmployeeID）的数据之前必须先处理关系的原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T06:33:28.140

使您的`DeleteCommand`调用成为存储过程。那里删除所有引用表。

如果表有外键约束，则需要先删除引用表中的条目。只有这样它才能让你删除主记录。

在这种情况下，调用

```
DELETE employee from Employee_Courses where dbo.employee.Username = @Username 
```

前

```
DELETE employee where dbo.employee.Username = @Username 
```

# python - 获取 URL 的内容并在本地进行比较

> ID：11407780
> 
> 赞同：0
> 
> 时间：2012-07-10T06:28:25.693
> 
> 标签：python, urllib

我希望每 3000 秒获取一个 URL（它只返回一行，没有 html，只是纯文本）。我想将它与“previous.txt”进行比较，如果不同则调用一个函数，然后将其写入previous.txt。

如果相同，则什么也不做。有人可以指出我开始的地方吗？我以前不是蟒蛇。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:08:18.313

这里有一些提示。

查看您的问题标签，您已经知道 urllib 会有所帮助。尝试`urllib2.urlopen()`从 URL 中检索数据。

比较以前和当前的内容就像读取内容`previous.txt`并与您刚刚从 URL 检索到的任何内容进行字符串比较一样简单。如果两个字符串不同，则将较新的字符串写入文件。查看[`open()`](http://docs.python.org/library/functions.html#open)并`read/write`满足您的文件 IO 需求。

如果您的 Python 进程长时间运行，则可以使用`time.sleep()`or `signal.alarm()`（或其他几种方式）每 3000 秒执行一次任务。

# android - Android -R 无法解析为变量

> ID：11407786
> 
> 赞同：-3
> 
> 时间：2012-07-10T06:28:47.947
> 
> 标签：android

> **可能重复：**
> [R 无法解析 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error)

我收到错误“R-无法解析为变量”。我注意到在android中有一个名为“R”的类文件。我可以导入那个 R 类文件`import.android.R;`。
这个R是强制性的吗？这个 R 是否与任何布局相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:34:11.090

这是在 Eclipse 上吗？显然有些东西妨碍了你的资源被编译。这种情况经常发生。我的一些经验提示：

1) 在首选项中更改 Android 构建器的详细设置。然后您可以检查控制台是否有资源生成错误。

2）有时资源生成不会给出好的错误。例如，如果您将 res 目录结构更改为非法目录结构，它有时会在没有适当错误的情况下失败。将您的项目与工作项目进行比较。

3) 有时Eclipse Android 插件似乎卡在了损坏状态，通常重启Eclipse 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:31:30.490

检查是否有**import android.R;** 在您的导入部分。如果有删除该导入语句

# ant - 我在某个位置有属性文件，其中包含许多 jar 文件名。从 ANT 调用并获取存储库中的所有 jar 文件

> ID：11407787
> 
> 赞同：0
> 
> 时间：2012-07-10T06:28:51.033
> 
> 标签：ant, jar

我有一个属性文件，其中包含以下格式的 jar 文件数 `hellotest.jar=1.2.3` `helootest1.jar=2.3.4` `hello.jar=3.4.5`

首先我需要在属性文件中更改 = 登录，然后从 ant 调用此 prpoerty 文件并将该 jar 文件从[http://maven.tvl.com/nexus/udp/heloo/](http://maven.tvl.com/nexus/udp/heloo/)复制到某个特定位置（/tmp）

请让我知道如何通过在蚂蚁中的智慧和目标来做到这一点（需要循环）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T19:43:49.950

我认为您正在尝试构建自己的依赖项管理客户端。我的建议是使用已经了解如何从 Maven 存储库下载的[Apache ivy 。](http://ant.apache.org/ivy/)

# 例子

## 构建.xml

ivy 检索任务可用于将项目依赖项下载到指定位置：

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant">

    <target name="init" description="Resolve dependencies populate lib dir">
        <ivy:retrieve pattern="lib/[artifact]-[revision](-[classifier]).[ext]"/>
    </target> 
```

## 常春藤.xml

此文件列表是您的项目依赖项。（比属性文件的集合简单）：

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <dependencies>
        <dependency org="udp.heloo" name="hellotest"  rev="1.2.3" conf="default" />
        <dependency org="udp.heloo" name="helootest1" rev="2.3.4" conf="default" />
        <dependency org="udp.heloo" name="hello"      rev="3.4.5" conf="default" />
    </dependencies>
</ivy-module> 
```

此外，依赖项也有依赖项，因此 ivy 也会为您管理这些依赖项。

## 常春藤设置.xml

该文件控制 ivy 从何处下载。在此示例中，配置了两个 Maven 存储库，Maven Central 和您在上面示例中列出的 Maven 存储库。

```
<ivysettings>
  <settings defaultResolver="all-repos" />
  <resolvers>
      <chain name="all-repos">
          <ibiblio name="central" m2compatible="true"/>
          <ibiblio name="extra-repo" m2compatible="true" root="http://maven.tvl.com/nexus"/>
      </chain>
    </chain>
  </resolvers>
</ivysettings> 
```

# php - MySQL 和 PHP 意外的 T_Variable

> ID：11407788
> 
> 赞同：1
> 
> 时间：2012-07-10T06:28:57.630
> 
> 标签：php, mysql

好的，所以我编写了一个 register.php 脚本，当命令尝试执行时，我得到了一个意外的 T 变量。错误位于第 15 行

```
('$_Post[username]','$_Post[sha_pass_hash]','$_Post[email]','2')"; 
```

根据第 20 行的 Dreamweaver，我的语法中还有第二个错误

```
 die('Error: ' . mysql_error()); 
```

如果有人可以提供帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:22:44.240

# 停止

直接从 post 插入数据库总是一个坏主意。这就是 PHP 目前坚持使用非常不直观的魔术引号的原因。

您至少应该使用 mysql_real_escape_string() 来转义您的数据。例如：

```
$link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password')
OR die(mysql_error());

$query = "INSERT INTO users VALUES (
    '" . mysql_real_escape_string($_POST["username"]) . "',
    '" . mysql_real_escape_string($_POST["sha_pass_hash"]) . "',
    '" . mysql_real_escape_string($_POST["email"]) . "',
    '2'
)";

mysql_query($query); 
```

您必须这样做的原因是基于安全性。例如，如果某些恶意将用户名字段设置为`'); DROP TABLE users;`没有先转义您的数据。您最终会盲目地运行以下查询：

```
INSERT INTO users VALUES (''); DROP TABLE users; 
```

这当然不会为您的应用程序带来好结果。

这是你应该做的**最低限度。**

实际上，您应该真正转向[MySQLi](http://www.php.net/manual/en/book.mysqli.php "MySQL 改进扩展")，这是一个更现代的 MySQL 界面。这是一个例子

```
$mysqli = new mysqli('mysql_host', 'mysql_user', 'mysql_password', 'mysql_database');

$query = "INSERT INTO users VALUES (
    '" . $mysqli->real_escape_string($_POST["username"]) . "',
    '" . $mysqli->real_escape_string($_POST["sha_pass_hash"]) . "',
    '" . $mysqli->real_escape_string($_POST["email"]) . "',
    '2'
)";

$mysqli->query($query); 
```

你甚至可以在程序风格中使用 MySQL。因此，如果您还没有面向对象编程，那么 MySQLi 将不会有任何问题。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:35:00.003

```
($_Post["username"],$_Post["sha_pass_hash"],$_Post["email"],'2')"; 
```

去掉引号..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:30:24.940

```
($_Post["username"],$_Post["sha_pass_hash"],$_Post["email"],'2')"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T06:30:52.177

```
($_POST["username"],$_POST["sha_pass_hash"],$_POST["email"],'2')"; 
```

丢失变量周围的单引号:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T06:35:39.563

用这个：

```
('".$_Post[username]."','".$_Post[sha_pass_hash]."','".$_Post[email]."','2') 
```

# jquery - 旧版本的 iPhone（iphone 3G-iOS 4.2.1）不支持溢出 css 属性

> ID：11407794
> 
> 赞同：0
> 
> 时间：2012-07-10T06:29:07.880
> 
> 标签：jquery, iphone, jquery-mobile, cordova, html-lists

在开发具有电话间隙的 iPhone 应用程序时，需要显示项目列表。

我使用了 jquery mobile 并创建了一个无序列表

```
<ul data-role="listview" id="list1">
      <li> List item1</li>
      <li> List item2</li>
  </ul> 
```

当向下滚动到一个长列表时，页面标题正在消失，因此尝试使用jquery mobile 的“ **data-postion ”属性修复标题。**但由于性能不佳，我使用**溢出**属性将其更改为可滚动列表（但是滚动功能不太好）。CSS是这样的

```
#listWrapper{
        position:fixed; 
        overflow:auto;
        height:330px;
   } 
```

它在 iPhone 4s 中运行良好，但在较低版本的 iPhone 中运行良好。是否有任何替代溢出属性的方法？或者任何其他可能的解决方法？

有没有办法在不移动整个页面内容的情况下在 Phonegap(iOS) 中显示项目列表（**具有固定高度和滚动功能）。**

对此问题的任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:39:11.063

请使用 js 库：iScroll。这真的很容易而且效果很好。
[http://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

只需在列表周围声明一个包装器 div。

```
<div id="wrapper">
    <ul>
        <li></li>
        ...
        ...
    </ul>
</div> 
```

然后使用您的 wrapper-div 的 id 实例化一个“iScroll”。

```
<script type="text/javascript">
    var myScroll = new iScroll('wrapper');
</script> 
```

# facebook - Facebook 应用程序无法在 Safari 中运行

> ID：11407797
> 
> 赞同：0
> 
> 时间：2012-07-10T06:29:34.157
> 
> 标签：facebook, safari

我最近使用 php 开发了一个 facebook 应用程序。尽管该应用程序适用于所有浏览器，但它不适用于 Safari，但在我尝试在用户墙上发帖后，它会返回到应用程序的第一步。以下是我的代码。

我的应用程序显示用户朋友列表，并允许用户选择朋友并在他们的墙上发帖。

```
 <?php

    require ("facebook-api/src/facebook.php");
    $facebook = new Facebook(array(
    'appId'  => '####',
    'secret' => '####',
    'cookie' => true,
    ));

    // Login or logout url will be needed depending on current user state.
    $params = array(
    'scope' => 'email,user_birthday,friends_photos,publish_stream',
    'redirect_uri' => 'https://apps.facebook.com/appname/'
    );

    if ($user) {
    $logoutUrl = $facebook->getLogoutUrl();
    } else {
    $loginUrl = $facebook->getLoginUrl($params);
    }

    $user = $facebook->getUser();

    if ($user) {

    $friends = $facebook->api('me/friends');
    $uids = "";

    foreach($friends as $f) {
    $uids .= "uid=$f OR ";
    }

    $user_id_sess = $_SESSION['userid'];
    $query_uids = substr($uids,0,strlen($query_uids)-4);
    date_default_timezone_set('UTC');
    $today = date('m\/d');

    $data = $facebook->api(array('method'=>'fql.query','req_perms' => 'friends_birthday','query'=>"select uid,sex,name,birthday from user where uid in (select uid2 from friend where uid1=me()) ORDER by name ASC")); 

    echo "
    <div class='span12 center-align' style='display:none;' id='block3'>
    <form id='frmFb' name='frmFb' action='".$_SERVER['PHP_SELF']."' method='post' >
    <p><img src='../static/images/logo.png' alt='logo' /></p>
    <br />
    <h1 style='margin-bottom:10px;'>Share with your friends</h1>
    <p id='progress' style='display:none;'><img src='static/img/processing.gif' alt='Processing' /></p>
    <div class='center-align well pull-center' style='max-height:300px; overflow:auto;'>
    ";

    foreach($data as $today_bday) {

    //$table='user_recipient';
    $remfbid = $today_bday['uid'];
    $fb_bday = $today_bday['birthday'];

    echo "
    <div style='width:50px; height:110px; margin:15px; float:left;' class='center-align'>
    <a href='#' class='thumbnail'><img src='https://graph.facebook.com/".$today_bday['uid']."/picture' class='friend' alt='".$today_bday['name']."'></a>
    <input type='checkbox' name='fbchoose[]' value='".$today_bday['uid']."'>
    <p><small>".$today_bday['name']."</small></p>
    <br/><br/>
    </div>      
    ";  
    }
    echo "
    </div>
    <br />
    <a href='#' class='btn btn-inverse btn-large'><i class='icon-ban-circle icon-white' style='margin-top:4px;'></i> CANCEL</a><input type='submit' value='SHARE NOW' name='btnAddReminder' class='btn btn-success btn-large' onclick='show()'>
    </form>
    </div>
    ";
    } else {
    echo "<p><script>top.location.href='$loginUrl';</script></p>
    ";
    }
    ?>
    <?

    if(isset($_REQUEST['btnAddReminder'])){ 

    if($_POST['fbchoose'] == "") {
    $error_msg = "<div class='alert pull-center alert-error'><i class='icon-warning-sign' style='margin-top:2px;'></i> Please select at least one friend to share</div><br/>";
    }
    else {

    foreach($_POST['fbchoose'] as $row) {

    $vars = array(
    'message' => 'Message...',
    'name' => 'Name..',
    'caption' => 'Caption',
    'link' => 'Link',
    'description' => 'Description',
    'picture' => 'Picture...'
    );

    $facebook->api("/".$row ."/feed", 'post', $vars);
    }

    echo "<script>location.href='http://www.mywebsite.com/';</script>";

    }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:49:46.990

在 Safari 偏好设置中，在“隐私”下，将“阻止 cookie”设置为从不

# android - 使用两个 Android 应用程序的内容提供程序示例

> ID：11407798
> 
> 赞同：1
> 
> 时间：2012-07-10T06:29:35.307
> 
> 标签：android, android-contentprovider

我想从我当前的 android 应用程序中获取另一个 android 应用程序数据库中的值`insert`。`delete`

我搜索了很多。大家都说用“ `content provider`”它不是用两个应用都用在一个应用中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:44:02.397

在这里，我为您找到了一些示例/教程，请看一下，下面的 tuts 包括您可以为创建内容提供者所做的一切。

[Android 基础知识：使用内容提供者。](http://mobile.tutsplus.com/tutorials/android/android-sdk_content-providers/)

[示例1](http://thinkandroid.wordpress.com/2010/01/13/writing-your-own-contentprovider/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:39:39.260

假设您的应用程序中有一个数据库和一个内容提供者......如果它被导出，您可以使用其他应用程序的数据库。要导出数据库，您只需在 android.manifest 文件中将 Provider 标签的 android:exported 属性的值设置为 true

```
 <provider
        android:exported="true"
        android:name="<content provider>"
        android:authorities="<content provider authority>" >
    </provider> 
```

在其他应用程序的 Android.Manifest 文件中提供访问内容提供者的权限。

[有关更多信息内容提供程序](http://developer.android.com/guide/topics/providers/content-providers.html) 和[使用内容提供](http://developer.android.com/guide/practices/security.html)程序，请参阅下面的链接

# c++ - 无法从 freeGlut 项目中获取标准输出

> ID：11407810
> 
> 赞同：1
> 
> 时间：2012-07-10T06:30:32.923
> 
> 标签：c++, windows, winapi, pipe, freeglut

我有免费的 glut 项目，其中包含计算 voronoy 网格、初始化 freeglut 然后绘制网格的代码。

```
pre-calculations
...
printf("Elapsed %lf seconds\n", (double)(clock() - start)/CLOCKS_PER_SEC);
glutInit            ( &argc, argv );
glutInitDisplayMode ( GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH );
glutInitWindowSize  ( WIDTH, HEIGHT );

// create window
glutCreateWindow ( "Voronoy" );

// register handlers
glutDisplayFunc  ( display );
glutReshapeFunc  ( reshape );
glutKeyboardFunc ( key     );

glutMainLoop ();

return 0;
... 
```

所以程序在控制台模式下工作，然后创建 freeglut 窗口。而且我还有一个单独的程序，它从连接到这个的标准输出管道中读取。我用这个参数创建过程

```
STARTUPINFO        si;

ZeroMemory(&si, sizeof(si));

si.cb = sizeof(si);
si.dwFlags = STARTF_USESTDHANDLES;
si.hStdInput = stdinput.ReadPipe();
si.hStdOutput = stdoutput.WritePipe();
si.hStdError = stderror.WritePipe();
stdoutput.DuplicateReadPipe();

if ( !CreateProcess( "j:\\Projects\\study\\fortune\\Debug\\voronoy.exe",//"C:\\GnuWin32\\bin\\ls.exe",
    NULL,
    NULL, NULL,
    TRUE,
    (CREATE_SUSPENDED | CREATE_SEPARATE_WOW_VDM | CREATE_NO_WINDOW),
    NULL, NULL,
    &si, &process_info) )
{
    throw("!!!");
}
DWORD w = ResumeThread(process_info.hThread);
CloseHandle(process_info.hProcess);
CloseHandle(process_info.hThread); 
```

而且我还尝试了 MSDN 中的标准管道示例。

问题是程序没有从管道接收数据。我也试过 voronoy.exe > test.txt 在 cmd.exe 和 test.txt 仍然是空的。但是如果我在没有管道的情况下运行它 - 它工作正常，我可以在控制台中看到输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T22:52:05.827

答案很简单。我需要通过简单地调用来刷新标准输出

```
fflush(stdout); 
```

# java - 将应用程序部署到 GAE 时，GCM 的 api.key 文件应该位于 WAR 文件的什么位置？

> ID：11407819
> 
> 赞同：0
> 
> 时间：2012-07-10T06:30:57.617
> 
> 标签：java, android, google-app-engine, war, google-cloud-messaging

我正在尝试使用 Google Apps 上的 Tomcat 6 获取以前在我的机器上本地运行的 .war 文件。[我在 Eclipse 中创建了项目，文件结构与Google 的 GCM Example](http://developer.android.com/guide/google/gcm/demo.html)有点不同。我想我终于把所有东西都整理好了，除了最后一部分。我不知道“api.key”属于哪个目录。我在 Google Apps 服务器上的日志中的堆栈跟踪如下：

```
Failed startup of context com.google.apphosting.utils.jetty.RuntimeAppEngineWebAppContext@1ef3ccd{/,/base/data/home/apps/s~[app-name]/1.360213803566389174}
java.lang.IllegalStateException: Could not find file /api.key on web resources)
    at [package-name].ApiKeyInitializer.getKey(ApiKeyInitializer.java:56)
    at [package-name].ApiKeyInitializer.contextInitialized(ApiKeyInitializer.java:45)
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) 
```

[您可以在此链接](https://developers.google.com/appengine/docs/java/gettingstarted/creating)中查看 Google 所说的目录应该是什么样子。当我关注 Google 的 GCM Demo（顶部的第一个链接）时，它会将“api.key”文件放在 WEB-INF/classes 目录下。我在新的 Google App Engine 结构中尝试了这个，我得到了上面的错误。我觉得我真的很接近，因为很明显我的 servlet 正在尝试运行，但它找不到这个文件。有谁知道把它放在哪里以便它可以找到它并且我可以让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:14:01.817

好的，我想通了。在我的 ApiKeyInitializer.java 类中，我有这个：

```
private static final String PATH = "/api.key"; 
```

事实上，它应该是这样的：

```
private static final String PATH = "api.key"; 
```

我按照[这些说明](https://developers.google.com/appengine/docs/java/tools/ant#The_Complete_Build_File)构建文件。我注意到它说`All other files found in src/, such as the META-INF/ directory, are copied verbatim to war/WEB-INF/classes/`。这让我意识到我应该将 api.key 放在我的 Eclipse src 目录中，以便在编译时将其正确放置在 war/WEB-INF/classes 中。除此之外，路径必须相对于 src 目录，这就是为什么我需要这样做`String PATH = "api.key"`而不是`String PATH = "/api.key"`.

# api - 如何在 VB6 中向 Aero Peek 添加按钮？

> ID：11407822
> 
> 赞同：1
> 
> 时间：2012-07-10T06:31:29.473
> 
> 标签：api, windows-7, vb6, aero

我正在开发一个可以从 iPod 上播放歌曲的程序。我希望能够在其 Aero Peek 缩略图上放置功能性的返回、播放/暂停和下一步按钮，如下所示：
![http://i45.tinypic.com/1yua0m.png](../Images/f23ee1117cd86d23b0957d2f770922bd.png)
对于那些看不到它的人：http: [//i45.tinypic.com/1yua0m.png](http://i45.tinypic.com/1yua0m.png)
我该怎么做这在VB6中？

**编辑：**我还可以为我的应用程序创建一个跳转列表吗？对于这个应用程序，我只需要任务栏跳转列表。对于其他人，我需要任务栏和开始菜单跳转列表，因此将不胜感激发布代码以实现两者。

**编辑 2：**我已经上传了一个示例，说明如何使用 ITaskBarList3 接口向窗口预览添加按钮（并处理它们的点击事件）、添加图标覆盖、剪辑窗口预览并将进度条添加到程序的任务按钮。[在这里](http://www.winntsoft.host22.com/Downloads/InternalApps/ITaskBarList3.zip)下载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T09:51:06.877

查看 Windows 资源管理器的[任务栏缩略图工具栏](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378460%28v=vs.85%29.aspx#thumbbars)功能。这确实使用了 COM 接口，所以我不知道用于 VB 的实用性如何，但我相信如果你看的话 IDL 是可用的。

您还可以在 MSDN 上找到[C# 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663597%28v=vs.85%29.aspx)和[UI 指南。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa511446.aspx#thumbnail)

Jumplist 信息也包含在同一页面上。

# jsp - 自定义 j_security_check 验证

> ID：11407824
> 
> 赞同：2
> 
> 时间：2012-07-10T06:31:33.717
> 
> 标签：jsp, authentication, tomcat, servlets

我有这样的形式：

```
<form method="POST" name="loginform" action="j_security_check">
        <table >
            <tr>
                <td>Username:</td>
                <td><input type="text" name="j_username" /></td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type="password" name="j_password" /></td>
            </tr>
            <tr>
                <td align="right"><input type="submit" value="Login" /></td>
                <td></td>
            </tr>
        </table>
    </form> 
```

现在我的要求是我想在不使用此表单的情况下进行身份验证。例如，我想调用 j_security_check 并传递参数。怎么可能？。我们可以那样做吗？j_security_check 如何处理重定向？请帮我解决这个问题。

# c# - 如何在单击的复选框上更改 DataGrid 行颜色？

> ID：11407833
> 
> 赞同：-1
> 
> 时间：2012-07-10T06:32:15.787
> 
> 标签：c#, wpf, datagrid

我花了很多时间尝试在 CheckBox 单击事件上更改行文本颜色。

因此，如果选中复选框，我们需要将颜色设置为灰色，如果未选中复选框，则将其恢复为正常颜色。

请帮助获得此结果（DataGrid 绑定到 xml 文件）。

更新。一些代码：

XAML 用于基于选中列（复选框）更改行颜色：

```
<Window.Resources>
    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="Foreground" Value="{Binding Checked, Converter={x:Static local:MainWindow.rowCheckedConverter}}" />
    </Style>
</Window.Resources>

...
<Grid.DataContext>
   <XmlDataProvider x:Name="userTasksProvider" XPath="UserTasks" />
</Grid.DataContext>
...

<DataGrid Name="dgUserTasks" Grid.Column="1" Margin="1,0,0,0"
   AutoGenerateColumns="False" HeadersVisibility="None"
   ItemsSource="{Binding XPath=Task}">

   <DataGrid.Columns>
   <DataGridCheckBoxColumn x:Name="cbUserTasksColumn" Width="20"
      Binding="{Binding Checked,
      Mode=TwoWay}" Header="">
   </DataGridCheckBoxColumn>

   <DataGridTextColumn 
      x:Name="Info" Width="*"
      Binding="{Binding Info,
      Mode=TwoWay}"
      Header="" >
   </DataGridTextColumn>
... 
```

C#WPF：

```
 public partial class MainWindow : Window
    {
        public static RowCheckedConverter rowCheckedConverter = new RowCheckedConverter();
        ...
    }

    ...

    public class RowCheckedConverter : IValueConverter {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {

            if ((bool)value) {
                return new SolidColorBrush(Colors.Gray);
            }
            else {
                return new SolidColorBrush(Colors.Black);
            }

        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            throw new Exception("The method or operation is not implemented.");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:54:48.157

你的问题很模糊，但我会尽力提供帮助。

考虑这个例子：

```
 <DataGrid ItemsSource="{Binding DataSet}" AutoGenerateColumns="False">
        <DataGrid.RowStyle>
            <Style TargetType="DataGridRow">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsActive}" Value="False">
                        <Setter Property="Foreground" Value="Gray"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </DataGrid.RowStyle>
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Name}">
            </DataGridTextColumn>
            <DataGridCheckBoxColumn Binding="{Binding IsActive, Mode=TwoWay}">

            </DataGridCheckBoxColumn>

        </DataGrid.Columns>
    </DataGrid> 
```

和代码：

```
public partial class MainWindow : Window
{
    public ObservableCollection<Data> DataSet { get; set; }

    public MainWindow()
    {
        DataSet = new ObservableCollection<Data>();
        DataSet.Add(new Data { Name = "First" });
        DataSet.Add(new Data { Name = "Second" });
        DataSet.Add(new Data { Name = "Third" });
        InitializeComponent();
        DataContext = this;
    }

}

public class Data
{
    public string Name { get; set; }

    public bool IsActive { get; set; }
} 
```

在此代码段中，我将复选框列绑定到 Data 实例中的属性，并在此属性为 false 时添加样式触发器。这就是你要找的东西吗？

**问题更新后编辑**

我在您提供的代码中看不到您的样式分配给 DataGrid 的位置：

```
<DataGrid  RowStyle="{StaticResource myStyle}" ...> 
```

并且您的样式未声明 x:Key 属性。

如果您添加它，它将起作用，但静态字段/属性闻起来很糟糕。考虑改为：

```
<Style TargetType="DataGridRow" x:Key="myStyle">
    <Style.Triggers>
          <DataTrigger Binding="{Binding Checked}" Value="False">
               <Setter Property="Foreground" Value="Gray"/>
          </DataTrigger>
    </Style.Triggers>
</Style> 
```

如果您决定使用转换器，请考虑更改为：

```
<Style TargetType="{x:Type DataGridRow}" x:Key="myStyle">
    <Setter Property="Foreground" >
        <Setter.Value>
            <Binding Path="Checked">
                <Binding.Converter>
                    <local:RowCheckedConverter />
                </Binding.Converter>
            </Binding>
        </Setter.Value>
    </Setter>
</Style> 
```

这也将消除这个领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:56:57.830

使用如下所示的转换器：http: [//timheuer.com/blog/archive/2008/07/30/format-data-in-silverlight-databinding-valueconverter.aspx](http://timheuer.com/blog/archive/2008/07/30/format-data-in-silverlight-databinding-valueconverter.aspx)

# spring - 使用 Spring 启动和停止 JMS 侦听器

> ID：11407838
> 
> 赞同：8
> 
> 时间：2012-07-10T06:32:37.693
> 
> 标签：spring, jms, spring-jms

所以问题是如何临时停止和启动使用 spring 使用休闲方式创建的 jms 侦听器：

```
<amq:connectionFactory id="exampleJmsFactory" brokerURL="tcp://${jms.broker.url}" />

<jms:listener-container concurrency="1" connection-factory="exampleJmsFactory"  destination-type="queue" message-converter="exampleMessageConverter">
        <jms:listener destination="incoming.example.client.queue" ref="exampleProductsMessageConsumer" method="consume"/>
</jms:listener-container>

<bean id="exampleProductsMessageConsumer" class="com.unic.example.jms.receive.JmsExampleProductsMessageConsumer" scope="tenant"/> 
```

所以基本上是什么问题。我们确实有一个客户端可以随时运行的初始化/更新机制，并且在此初始化/更新期间，我想停止使用任何消息，因为此时系统无法使用，如果有消息出现，它将丢失。

那么我如何使用 API 停止侦听器或侦听器容器或整个连接。我发现一个类 AbstractJmsListeningContainer 有停止/启动但我怎么能得到它？我的意思是这些 jms: listener 和 listener-containers 都没有名字或类似的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-10T07:03:59.047

您可以为侦听器容器分配一个 id。然后通过调用 getBean 或将其注入来获取对它的引用。这将为您提供一个 AbstractJmsListeningContainer ，您可以在其上调用启动/停止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T10:40:10.377

是的，这就是诀窍。

```
<jms:listener-container concurrency="1" connection-factory="exampleJmsFactory"  destination-type="queue" message-converter="exampleMessageConverter">
        <jms:listener id="exampleProductsMessageListener" destination="incoming.example.client.queue" ref="exampleProductsMessageConsumer" method="consume"/>
</jms:listener-container>

DefaultMessageListenerContainer exampleProductsMessageListener= Registry.getApplicationContext().getBean("exampleProductsMessageListener", DefaultMessageListenerContainer.class);
exampleProductsMessageListener.stop(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-07T09:47:09.293

您还可以获取 messageListenerContainer，并在其上调用 stop()：

```
@javax.annotation.Resource //autowire by name
 private AbstractJmsListeningContainer myMessageListenerContainer;

 myMessageListenerContainer.stop();

 I'm using the more verbose setup of this container:
 <bean id="myMessageListenerContainer" class="org.springframework.jms.listener.DefaultMes sageListenerContainer">
 <property name="connectionFactory" ref="jmsConnectionFactory"/>
 <property name="destination" ref="myQueue"/>
 <property name="messageListener" ref="myListener"/>
 <property name="autoStartup" value="true" />
 </bean> 
```

在这里您可以看到，如果您不希望 listenerContainer 自动启动，可以将 autoStartup 设置为 false。

# loops - if 语句：如何编码“如果 a 是 b 的倍数”

> ID：11407840
> 
> 赞同：0
> 
> 时间：2012-07-10T06:32:46.443
> 
> 标签：loops, if-statement

我想写“如果我是 11 的倍数”那么

System.out.print("|")

但我不知道该怎么做？

我试图在我的“鱼缸”边缘加入侧面。

这种情况可能很愚蠢，但我认为这个问题是有效的。

```
--------------------------------------------------
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#><
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#><
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#><
<#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#>< <#><
<#>< <#>< <#><
----------------------------------------------------

public class partCC
{

    public partCC()
    { 
    System.out.println("--------------------------------------------------");
    {
    for (int i=0; i<43; i++)

     {if (i > 0 && i%10 == 0)  
        System.out.println(); 

        System.out.print(" <#><");

    }
    {if 
       (i

      System.out.println();
      System.out.print("----------------------------------------------------");
    }

    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:43:40.557

它认为你应该看看[模数除法是如何工作](https://stackoverflow.com/questions/2664301/how-does-modulus-divison-work)的，只是为了理解为什么这个答案是正确的。

你的情况的答案是`if ((i % 11) == 0) { System.out.print("|") }`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:35:54.687

`if ((a % b) == 0) System.out.print("|");`

模运算符 % 返回 a 除以 b 后的余数，如果 a 可被 b 整除，则该余数始终为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:53:12.093

您需要检查`Zero`in 条件

```
if(i != 0 && (i % 11) == 0) System.out.print("|"); 
```

`i`因为用零初始化也会`|`在第一个循环周期`0 % 11`产生`0`

# c++ - 检查数据库中的指纹

> ID：11407850
> 
> 赞同：3
> 
> 时间：2012-07-10T06:33:56.960
> 
> 标签：c++, python, mysql, c, sqlite

我将指纹保存在“blob”字段中，然后想知道比较这些印象的唯一方法是否检索保存在数据库中的所有打印，然后使用函数“identify_finger”创建一个要检查的向量？您可以使用 SELECT 直接从数据库中检查吗？

我正在使用 libfprint。在此代码中，验证是在向量中完成的：

```
def test_identify():
    cur = DB.cursor()
    cur.execute('select id, fp from print')
    id = []
    gallary = []
    for row in cur.fetchall():
        data = pyfprint.pyf.fp_print_data_from_data(str(row['fp']))
        gallary.append(pyfprint.Fprint(data_ptr = data))
        id.append(row['id'])
    n, fp, img = FingerDevice.identify_finger(gallary) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T19:04:55.013

使用指纹数据库有两种根本不同的方式。一种是通过其他方式验证已知人的身份，一种是寻找身份不明的人。

一个简单的库，例如`libfprint`仅适用于第一种情况。由于您使用它来验证某人，您可以使用他们的身份从数据库中查找单行。也许您已经扫描了不止一根手指，或者您已经为每个手指存储了多次扫描，但仍然会返回少量的数据库 blob。

必须从头开始设计指纹搜索算法，以缩小搜索空间、快速比较、对结果进行排序和处理误报。就像谷歌搜索可能会找到与您正在寻找的内容完全无关的页面一样，指纹搜索也会如此。有些公司致力于解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:42:10.803

另一种方法是拥有一个知道如何使用指纹图像并根据您要查找的内容进行选择的 mysql 插件。

我真的怀疑有这样的事情。

您还可以尝试并行化指纹比较，即 - 调用：

```
FingerDevice.identify_finger(gallary) 
```

并行，在不同的核心/机器上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:05:50.523

您不能使用 SELECT 直接从数据库中检查，因为每次扫描都是*不同*的，并且会产生不同的 blob。libfprint 努力比较不同的扫描并判断它们是否来自同一个人

我认为[zinking](https://stackoverflow.com/questions/11407850/check-a-fingerprint-in-the-database#comment15042867_11407850)和[Tudor](https://stackoverflow.com/a/11407936/973380)的意思是，如果您了解[该判断过程](http://en.wikipedia.org/wiki/Fingerprint_recognition)是如何工作的（顺便说一下，通过[细节](http://en.wikipedia.org/wiki/Minutiae)比较），您可以开发一种方法来存储该过程的相关数据（*细节，也许？）在数据库中，然后是获取相关值的方法——可能是一种索引或某种类型的数据库扩展。

换句话说，您将不得不以`libfprint`更复杂（和美观）的方式重新实现算法，而不是仅仅接受`libfprint`将扫描与循环中所有存储的指纹进行比较的方法。

## 其他加快程序速度的解决方案

### 使用 C：

我只知道足够的 C 来编写那种 hello-world 程序，但是用纯 C 编写代码来使用 的`fp_identify_finger_img`功能并不难`libfprint`，我可以告诉你它比`pyfprint.identify_finger`.

您可以继续在 python 中进行注册部分的工作。我做。

### 使用基于时间/位置的 SELECT：

如果您知道您的用户*在某个时间比其他时间或某个地方比其他地方更有可能*扫描他们的指纹（可能在某个时间到达工作并扫描他们的手指，或者离开或通过一个门进入建筑物，或其他），您可以收集数据（在每次扫描时）以测量概率并创建并行表来对用户进行排序，以确定他们在每个时间和位置到达的概率。

我们知道它会`identify_finger`尝试使用您在列表中提供的指纹对象在循环中识别手指，因此我们可以使用它并给它排序的对象，以使该时间更有可能的用户和该位置将是第一个在列表中等等。

# jboss - 如何为我的本地网络启动 jboss

> ID：11407853
> 
> 赞同：0
> 
> 时间：2012-07-10T06:34:10.270
> 
> 标签：jboss

第一个问题是：我运行 ./run.sh 似乎很神奇，我可以关闭计算机，再次打开它，它仍然知道 //localhost:8080/jmx-console/。我查看了启动程序，但没有看到任何提示。它是如何记忆的？

没关系，真正的问题是我希望主机成为我的本地局域网，而不仅仅是本地主机。我发现我可以做 shutdown.sh 并且确实会关闭服务器，这样 //localhost:8080/jmx-console/ 将不再工作。很好，现在下一步是将其限制在我的局域网中。我知道我可以使用 ./run.sh -b 0.0.0.0 但这向世界敞开了大门。我的计算机位于 192.168.1.100，所以我尝试了 ./run.sh -b 192.168.1.0，我认为这意味着获取 192.168.1.XXX 范围内的地址。服务器“启动”，但我无法让它接听任何电话，也无法让 shutdown.sh 做任何事情。

我再次启动 ./run.sh 并连接到本地主机。我不知道它是否还记得我的 ./run.sh -b 192.168.1.0 。如果是这样，我想摆脱它。无论如何，我想知道正确的命令应该是什么。

谢谢，伊兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:45:15.903

哪个版本的jboss？

我在 jboss 4 上使用 -b 127.0.0.1

# windows-phone-7 - 从应用程序内启动后台代理

> ID：11407856
> 
> 赞同：0
> 
> 时间：2012-07-10T06:34:26.550
> 
> 标签：windows-phone-7, live-tile, background-agents

据我了解，如果您注册一个定期任务来处理您的 WP7 动态磁贴，它不会每半小时更新一次以上。但是，我想在每次用户退出应用程序时更新后台代理工作的数据。

我的场景是，我有一个活动磁贴显示计划器中的第一个条目 - 并且根据用户在应用程序中的操作，该计划器可能会删除其条目或预先设置一个新条目。让动态磁贴呈现过时的信息并不是很吸引人。

这是可能的 - 如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:12:20.907

我不知道这是否是你要找的。

当用户退出应用程序时，我的应用程序会更新 livetiles。但是后来我遇到了一些问题，例如，如果用户几天没有打开应用程序，那么它就不会更新。

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {            
        ShellTile PrimaryTile = ShellTile.ActiveTiles.First();
        StandardTileData tile = new StandardTileData();

        if (PrimaryTile != null)
        {
            tile.BackTitle = resMan.GetString("liveTileTitle");
            tile.BackBackgroundImage = new Uri("/Background.png", UriKind.Relative);

            if (pCycMan.GetStartDate() == pCycMan.GetDefaultDate())
            {
                tile.Title = resMan.GetString("liveTileNotTrackingStatus");
            }
            else
            {
                tile.Title = App.m_liveTileText;
            }

            PrimaryTile.Update(tile);
        }
   } 
```

# python - 添加行 - 网格 Tkinter。OptionMenu 的个别命令

> ID：11407860
> 
> 赞同：0
> 
> 时间：2012-07-10T06:34:47.423
> 
> 标签：python, class, lambda, tkinter, ttk

我通过在导入文本文件后重复小部件在 Tkinter 中创建了一个表（因此根据包含的信息创建新行）。

下图显示我需要能够根据 OptionMenu 选项从“7”列开始创建一个单独的输入框区域。

![桌子](../Images/b5f2762e3c1c9d1eb22b5016dd8d1f00.png)

对于选项列表，询问用户他们希望填写多少个输入框（因此创建了“n”个框）。对于“固定”值，不应该有任何框和删除之前的任何框。对于 OptionMenu 中的其他两个选项，始终有一个最小值和最大值（2 个框）。这些框中的每个值都需要在用户输入后收集。

我以前曾帮助我每次都创建一个新框架，但如果可能的话，我想使用同一个框架。我有以下代码可供选择：

```
if choice == "Fixed":

    for i in xrange(self.number_boxes):

        self.box[i].grid_remove()
        self.choice_title.grid_remove()
        self.frame_table.grid_columnconfigure(7, weight=0)
    tkMessageBox.showinfo("Message", "Value fixed.")
elif choice == "List":
    self.win2 = tk.Toplevel(self.root)
    self.win2.title("List")
    self.list_text = Label(self.win2, text="Please enter number of values to be used:")
    self.list_text.grid(row=0, column=0, sticky="nsew", padx=1, pady=1)
    self.value = StringVar()
    self.list_values = Entry(self.win2, textvariable=self.value, justify="center")
    self.list_values.grid(row=1, column=1, sticky="nsew", padx=1, pady=1)

    list_button = ttk.Button(self.win2, text="Enter", command=self.ValueBox)
    list_button.grid(row=2, column=1, sticky="nsew", padx=1, pady=1)
    self.win2.mainloop()

    column = 7
    self.number_boxes = int(self.number_boxes)
    self.numbers = [StringVar() for i in xrange(self.number_boxes) ]  
    self.box = []

    for i in xrange(self.number_boxes):
        self.clicked.append(False)
        self.choice_title = Label(self.frame_table, bg=self.mycolour, borderwidth=0, width=10) 
        self.choice_title.grid(row=1, column=self.column, columnspan=self.number_boxes, sticky="nsew", padx=1, pady=1) 
        self.box.append(Entry(self.frame_table,bg='white',borderwidth=0, width=10, justify="center", textvariable=self.numbers[i], fg='grey'))
        self.box[i].grid(row=self.row_list,column=self.column+i, sticky='nsew', padx=1, pady=1) 
        self.box[i].insert(0, "Value %g" % float(i+1))
        self.box[i].bind("<Button-1>", lambda event : self.callback(event))

        self.total_boxes = self.number_boxes * ( rows - 2 )
        self.boxes=[]
        self.boxes.append(self.box[i])

        tkMessageBox.showinfo("Message", "Please fill in list values.")

    for i in self.numbers: 
        i.trace('w',lambda : self.numberwritten() ) 

    elif choice == "Min" or "Max":

        self.numbers = [StringVar() for i in xrange(2) ] #Name available in global scope. 
        self.number_boxes = 2
        self.box = []
        for i in xrange(2): 
            self.clicked.append(False)
            self.choice_title = Label(self.frame_table, bg=self.mycolour, borderwidth=0)
            self.choice_title.grid(row=1, column=self.column, columnspan=2, sticky="nsew", padx=1, pady=1)
            self.box.append(Entry(self.frame_table,bg='white',borderwidth=0,textvariable=self.numbers[i], justify='center', fg='grey'))
            self.box[i].grid(row=self.row_list, column=self.column+i, sticky='nsew', padx=1, pady=1) 
        if i == 0:
            self.box[0].insert(0, "Min value")
        elif i == 1:
            self.box[1].insert(0, "Max value")
            self.box[i].bind("<Button-1>", lambda event : self.callback(event))
            self.boxes=[]
            self.boxes.append(self.box[i])

        tkMessageBox.showinfo("Message", "Enter Min/Max values.")

        for i in self.numbers: 
            i.trace('w',lambda a,b,n=i: self.numberwritten(n) ) 
```

更新部分

```
def numberwritten(self): # where the above code block is usually all indented differently in comparision to this.
    self.numbers.get()

def callback(self, event, index):

    if (self.clicked[index] == False):
        self.box[index].delete(0, END)
        self.box[index].config(fg='black')
        self.clicked[index] = True 
```

我不想用代码轰炸这个问题，但是如果需要任何其他功能，例如 numberwritten，我可以提供它们。我将非常感谢一些帮助，因为我快要结束了，但我正在为“最后的润色”而苦苦挣扎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:06:52.993

在下面的循环中有一些可疑的地方（我会在可疑的地方添加评论）。

```
for i in xrange(self.number_boxes):
    self.clicked.append(False)
    self.choice_title = Label(self.frame_table, bg=self.mycolour, borderwidth=0, width=10)  #Fishy
    self.choice_title.grid(row=1, column=self.column, columnspan=self.number_boxes, sticky="nsew", padx=1, pady=1) 
    self.box.append(Entry(self.frame_table,bg='white',borderwidth=0, width=10, justify="center", textvariable=self.numbers[i], fg='grey'))
    self.box[i].grid(row=self.row_list,column=self.column+i, sticky='nsew', padx=1, pady=1) 
    self.box[i].insert(0, "Value %g" % float(i+1))
    self.box[i].bind("<Button-1>", lambda event, index=i : self.callback(event, index))

    self.total_boxes = self.number_boxes * ( rows - 2 ) #fishy
    self.boxes=[] #fishy
    self.boxes.append(self.box[i])

    tkMessageBox.showinfo("Message", "Please fill in list values.") #fishy 
```

首先，您正在创建`choice_title`标签，但您只保留对您正在创建的其中一个标签的引用。也许您应该将其更改为列表并像使用框列表一样附加到它。

其次，`self.total_boxes`不需要每次循环计算。它可以在最后计算（我认为）。

三、`self.boxes=[]`应移到循环前。你所做的相当于： `self.boxes=[self.box[i]]`在循环的每一步。完成后，您的盒子列表中只有一个盒子（最后一个）。

第四，在循环的每次迭代中都用一个消息框提示用户。这真的是你想要的吗？还是缩进错误？

这里可能还有更多有点奇怪的东西，但这些给了你一个开始的地方。这是我认为它应该看起来的样子：

```
self.box=[]
self.boxes=[]
self.choice_title=[]
for i in xrange(self.number_boxes):
    self.clicked.append(False)
    choice_title = Label(self.frame_table, bg=self.mycolour, borderwidth=0, width=10)  #Fishy
    choice_title.grid(row=1, column=self.column, columnspan=self.number_boxes, sticky="nsew", padx=1, pady=1)
    self.choice_title.append(choice_title)
    box=Entry(self.frame_table,bg='white',borderwidth=0, width=10, justify="center", textvariable=self.numbers[i], fg='grey')
    self.box.append(box)
    box.grid(row=self.row_list,column=self.column+i, sticky='nsew', padx=1, pady=1) 
    box.insert(0, "Value %g" % float(i+1))
    box.bind("<Button-1>", lambda event, index=i : self.callback(event, index))

    self.boxes.append(box)  #This is still a little weird since self.box and self.boxes are essentially the same information.

self.total_boxes = self.number_boxes * ( rows - 2 ) #fishy
tkMessageBox.showinfo("Message", "Please fill in list values.") 
```

# iphone - 根据多个属性对 NSArray 进行排序

> ID：11407863
> 
> 赞同：1
> 
> 时间：2012-07-10T06:35:15.643
> 
> 标签：iphone, objective-c, ios, ipad, nsarray

这是我遇到的问题：-我有一个数组

```
Item1,
Item2,
Item3,
Item4,
Item5,
Item6,
Item7,
....,Item11 
```

我需要按特定顺序对这个数组进行排序，当然所有值都是“NSString”类型

如果我使用

```
sortedArrayUsingSelector:@selector(caseInsensitiveCompare:) 
```

它的排序是这样的： -

```
Item1,
Item10,
Item11,
Item2,
Item3,
Item4,
Item5,
Item6,
Item7,
Item8,
Item9 
```

我可以手动从中提取数值，但我认为可能有更好的方法可以通过使用“NSComparator”来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:44:26.460

像这样使用它：

```
NSArray *arry = [[NSArray alloc] initWithObjects:@"Item1",@"Item2",@"Item3",@"Item4",@"Item5",@"Item11",@"Item10",@"Item6", nil];
NSArray *sortedStrings = [arry sortedArrayUsingSelector:@selector(localizedStandardCompare:)];
NSLog(@"sortedStrings---%@",sortedStrings); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:40:15.650

```
NSInteger sortFile(id a, id b, void* context) {
    return [a compare:b options:NSNumericSearch];
}

[yourArray sortedArrayUsingFunction:mySort context:nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:44:37.263

这段代码对我有用：

```
NSArray *array = [NSArray arrayWithObjects:@"Item1",
                  @"Item10",
                  @"Item11",
                  @"Item2",
                  @"Item3", nil];

array = [array sortedArrayUsingComparator:^NSComparisonResult(NSString *str1, NSString *str2) {
    return [str1 compare:str2 options:(NSNumericSearch)];
} ];

NSLog(@"%@", array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T06:37:50.433

试试这个：

```
 NSArray *sortedStrings = [yourArray sortedArrayUsingSelector:@selector(localizedStandardCompare:)]; 
```

更多[sortedArrayUsingSelector](http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSArray_Class/NSArray.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T06:39:40.113

如果你使用[sortedArrayUsingFunction:context 来实现，你可以实现任何你想要的功能：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingFunction%3acontext%3a)

# assembly - Y86 汇编代码编译问题

> ID：11407864
> 
> 赞同：0
> 
> 时间：2012-07-10T06:35:19.897
> 
> 标签：assembly, compiler-construction, binaryfiles, y86

所以...我的老师要求我们制作一个在 Y86 模拟器中运行的乒乓球游戏，他给了我们一个汇编编译器和链接器来创建二进制文件。问题是模拟器不断调用全局变量，在代码中间放置大量 nops，等等。模拟器和编译器到目前为止工作正常，我不知道问题出在代码还是编译器上。

编译器把这个

```
.module m0

.pseg

.global _main

pushl   %ebp
rrmovl  %esp, %ebp
irmovl  -16, %ebx
andl    %ebx, %esp
irmovl  tela, %edi
.L45:
call    _repreenche
call    _preenche_matriz
call    _AI
call    _move_objs
call    _coli_barra
call    _coli_bola
;call   _limpa
;call   _imprime
call    _delay 
jmp .L45

.global _preenche_matriz
pushl   %ebp
rrmovl  %esp, %ebp
xorl    %ebx, %ebx
rmmovl  %ebx, i(%ebx)
jmp .L11
.L12:
xorl    %ebx, %ebx
mrmovl  pos_barra1(%ebx), %edx
mrmovl  i(%ebx), %eax
addl    %eax, %edx
rrmovl  %edx, %eax
irmovl  2, %ebx
shll    %ebx, %eax
addl    %edx, %eax
irmovl  3, %ebx
shll    %ebx, %eax

;addl   $tela, %eax
;inicio
irmovl  tela, %ebx
addl    %ebx, %eax
;fim
;movb   $124, (%eax)
;inicio
mrmovl  0(%eax), %ecx
irmovl  $00FFFFFF, %ebx
andl    %ebx, %ecx
irmovl  124, %ebx
irmovl  24, %esi
shll    %esi, %ebx
orl %ebx, %ecx
rmmovl  %ecx, 0(%eax)
;fim
xorl    %ebx, %ebx
mrmovl  pos_barra2(%ebx), %edx
mrmovl  i(%ebx), %eax
addl    %eax, %edx
rrmovl  %edx, %eax
irmovl  2, %ebx
shll    %ebx, %eax
addl    %edx, %eax
irmovl  3, %ebx
shll    %ebx, %eax

;addl   $tela+39, %eax
;inicio
irmovl  tela, %ebx
irmovl  39, %esi
addl    %ebx, %esi
addl    %esi, %eax
;fim

;movb   $124, (%eax)
;inicio
mrmovl  0(%eax), %ecx
irmovl  $00FFFFFF, %ebx
andl    %ebx, %ecx
irmovl  124, %ebx
irmovl  24, %esi
shll    %esi, %ebx
orl %ebx, %ecx
rmmovl  %ecx, 0(%eax)
;fim

xorl    %ebx, %ebx
mrmovl  i(%ebx), %eax
irmovl  1, %ebx
addl    %ebx, %eax
xorl    %ebx, %ebx
rmmovl  %eax, i(%ebx)
.L11:
xorl    %ebx, %ebx
mrmovl  i(%ebx), %eax
irmovl  4, %ebx
rrmovl  %eax, %esi
subl    %ebx, %esi
jle .L12
xorl    %ebx, %ebx
mrmovl  posy_bola(%ebx), %edx
mrmovl  posx_bola(%ebx), %ecx
rrmovl  %edx, %eax
irmovl  2, %ebx
shll    %ebx, %eax
addl    %edx, %eax
irmovl  3, %ebx
shll    %ebx, %eax
addl    %ecx, %eax
irmovl  tela, %ebx
addl    %ebx, %eax
;movb   $67, (%eax)
;inicio
mrmovl  0(%eax), %ecx
irmovl  $00FFFFFF, %ebx
andl    %ebx, %ecx
irmovl  67, %ebx
irmovl  24, %esi
shll    %esi, %ebx
orl %ebx, %ecx
rmmovl  %ecx, 0(%eax)
;fim
popl    %ebp
ret

.global _move_objs
;vetor, id => globais

;vetor[id] = 69
;irmovl $69, %edx    ;move 69 para edx 
;xorl %eax, %eax          ;zera eax
;mrmovl id(%eax), %eax    ;move id para eax 
;irmovl $2, %ebx          ;move 2 para ebx
;shll %ebx, %eax          ;multiplica id por 4, tornando-o um indice de inteiros    
;rmmovl %edx, vetor(%eax) ;atribui

;;pos_barra1 = vel_barra1 + pos_barra1
xorl    %eax, %eax
mrmovl  vel_barra1(%eax), %eax
xorl    %ecx, %ecx
mrmovl  pos_barra1(%ecx), %ecx
addl    %eax, %ecx
xorl    %eax, %eax
rmmovl  %ecx, pos_barra1(%eax)

;;pos_barra2 = vel_barra2 + pos_barra2
xorl    %eax, %eax
mrmovl  vel_barra2(%eax), %eax
xorl    %ecx, %ecx
mrmovl  pos_barra2(%ecx), %ecx
addl    %eax, %ecx
xorl    %eax, %eax
rmmovl  %ecx, pos_barra2(%eax)  

;;posx_bola = velx_bola + posx_bola
xorl    %eax, %eax
mrmovl  velx_bola(%eax), %eax
xorl    %ecx, %ecx
mrmovl  posx_bola(%ecx), %ecx
addl    %eax, %ecx
xorl    %eax, %eax
rmmovl  %ecx, posx_bola(%eax)

;;posy_bola = vely_bola + posy_bola
xorl    %eax, %eax
mrmovl  vely_bola(%eax), %eax
xorl    %ecx, %ecx
mrmovl  posy_bola(%ecx), %ecx
addl    %eax, %ecx
xorl    %eax, %eax
rmmovl  %ecx, posy_bola(%eax)   

ret

.global _delay
irmovl  10000000, %eax
.L41:
irmovl  1, %edx
subl    %edx, %eax
jne .L41

ret

.global _coli_barra
xorl    %edx, %edx
mrmovl  pos_barra1(%edx), %ecx
subl    %edx, %ecx
jg  .L24
xorl    %edx, %edx
irmovl  1, %ecx
rmmovl  %ecx, pos_barra1(%edx)
.L24:

xorl    %edx, %edx
mrmovl  pos_barra2(%edx), %ecx
subl    %edx, %ecx
jg  .L25
xorl    %edx, %edx
irmovl  1, %ecx
rmmovl  %ecx, pos_barra2(%edx)
.L25:
xorl    %edx, %edx
mrmovl  pos_barra1(%edx), %eax
irmovl  5, %ecx
addl    %ecx, %eax
irmovl  18, %ecx
rrmovl  %eax, %edx
subl    %ecx, %edx
jle .L26
xorl    %edx, %edx
irmovl  14, %ecx
rmmovl  %ecx, pos_barra1(%edx)
.L26:
xorl    %edx, %edx
mrmovl  pos_barra2(%edx), %eax
irmovl  5, %ecx
addl    %ecx, %eax
irmovl  18, %ecx
rrmovl  %eax, %edx
subl    %ecx, %edx
jle .L23
xorl    %edx, %edx
irmovl  14, %ecx
rmmovl  %ecx, pos_barra2(%edx)
.L23:
;rep
ret

.global _coli_bola
irmovl  28, %edx
subl    %edx, %esp
xorl    %edx, %edx
mrmovl  posy_bola(%edx), %eax

andl    %eax, %eax 
jg  .L29 
xorl    %edx, %edx
mrmovl  vely_bola(%edx), %ecx
;negl   %ecx
;inicio
xorl    %ebx, %ebx
subl    %ecx, %ebx
rrmovl  %ebx, %ecx
;fim
rmmovl  %ecx, vely_bola(%edx)

irmovl  2, %edx
subl    %eax, %edx
xorl    %ecx, %ecx
rmmovl  %edx, posy_bola(%ecx)
jmp .L30
.L29:
irmovl  18, %edx
rrmovl  %eax, %ecx
subl    %edx, %ecx
jle .L30
xorl    %edx, %edx
mrmovl  vely_bola(%edx), %ecx
;negl   %ecx
;inicio
xorl    %ebx, %ebx
subl    %ecx, %ebx
rrmovl  %ebx, %ecx
;fim
rmmovl  %ecx, vely_bola(%edx)
irmovl  36, %ecx
subl    %eax, %ecx 
rmmovl  %ecx, posy_bola(%edx)
.L30:
xorl    %edx, %edx
mrmovl  posx_bola(%edx), %eax
andl    %eax, %eax
jg  .L31

mrmovl  pos_barra1(%edx), %ecx
mrmovl  posy_bola(%edx), %edx
rrmovl  %ecx, %ebx
subl    %edx, %ebx
jg  .L32

irmovl  5, %ebx
addl    %ebx, %ecx
rrmovl  %edx, %ebx
subl    %ecx, %ebx
jg  .L32
xorl    %ebx, %ebx
mrmovl  velx_bola(%ebx), %esi
;negl   %esi
;inicio
xorl    %ebx, %ebx
subl    %esi, %ebx
rrmovl  %ebx, %esi
;fim
rmmovl  %esi, velx_bola(%ebx)
irmovl  2, %edx
subl    %eax, %edx
xorl    %ebx, %ebx
rmmovl  %edx, posx_bola(%ebx)
jmp .L28
.L32:
xorl    %ebx, %ebx
mrmovl  pontos_2(%ebx), %eax
irmovl  1, %ebx
addl    %ebx, %eax
xorl    %ebx, %ebx
rmmovl  %eax, pontos_2(%ebx)
irmovl  38, %ebx
xorl    %esi, %esi
rmmovl  %ebx, posx_bola(%esi)

mrmovl  pos_barra2(%esi), %eax
rmmovl  %eax, posy_bola(%esi)
jmp .L28
.L31:
irmovl  38, %ebx
rrmovl  %eax, %esi
subl    %ebx, %esi
jle .L28
xorl    %ebx, %ebx
mrmovl  pos_barra2(%ebx), %ecx
mrmovl  posy_bola(%ebx), %edx
rrmovl  %ecx, %esi
subl    %edx, %esi
jg  .L34
irmovl  5, %esi
addl    %esi, %ecx
rrmovl  %edx, %esi
subl    %ecx, %esi
jg  .L34
xorl    %ebx, %ebx
mrmovl  velx_bola(%ebx), %esi
;negl   %esi
;inicio
xorl    %ebx, %ebx
subl    %esi, %ebx
rrmovl  %ebx, %esi
;fim
rmmovl  %esi, velx_bola(%ebx)
irmovl  76, %edx
subl    %eax, %edx
xorl    %ebx, %ebx
rmmovl  %edx, posx_bola(%ebx)
jmp .L28
.L34:
xorl    %ebx, %ebx
mrmovl  pontos_1(%ebx), %eax
irmovl  1, %esi
addl    %esi, %eax
rmmovl  %eax, pontos_1(%ebx)
rmmovl  %esi, posx_bola(%ebx)
mrmovl  pos_barra1(%ebx), %eax
rmmovl  %eax, posy_bola(%ebx)
.L28:
popl    %ebp;noprintcode xorl %ebx, %ebx
;addl   $28, %esp
ret

.global _AI

xorl    %ebx, %ebx
mrmovl  velx_bola(%ebx), %esi
subl    %ebx, %esi
;jns    .L14
jge .L14
xorl    %ebx, %ebx
mrmovl  pos_barra1(%ebx), %edx
irmovl  2, %ebx
addl    %ebx, %edx
xorl    %ebx, %ebx
mrmovl  posy_bola(%ebx), %eax
rrmovl  %edx, %esi
subl    %eax, %esi
jge .L15
xorl    %ebx, %ebx
irmovl  1, %esi
rmmovl  %esi, vel_barra1(%ebx)
.L15:
rrmovl  %eax, %ebx
rrmovl  %edx, %esi
subl    %ebx, %esi
jle .L16
xorl    %ebx, %ebx
irmovl  -1, %esi
rmmovl  %esi, vel_barra1(%ebx)
.L16:
rrmovl  %eax, %ebx
rrmovl  %edx, %esi
subl    %ebx, %esi
jne .L17
xorl    %ebx, %ebx
rmmovl  %ebx, vel_barra1(%ebx)
.L17:
xorl    %ebx, %ebx
rmmovl  %ebx, vel_barra2(%ebx)
ret
.L14:
xorl    %ebx, %ebx
mrmovl  pos_barra2(%ebx), %edx
irmovl  2, %ebx
addl    %ebx, %edx
xorl    %ebx, %ebx
mrmovl  posy_bola(%ebx), %eax
rrmovl  %eax, %ebx
rrmovl  %edx, %esi
subl    %ebx, %esi
jne .L19
xorl    %ebx, %ebx
rmmovl  %ebx, vel_barra2(%ebx)
jmp .L20
.L19:
rrmovl  %eax, %ebx
rrmovl  %edx, %esi
subl    %ebx, %esi
jge .L21
irmovl  1, %esi
xorl    %ebx, %ebx
rmmovl  %esi, vel_barra2(%ebx)
.L21:
rrmovl  %eax, %ebx
rrmovl  %edx, %esi
subl    %ebx, %esi
jle .L20
irmovl  -1, %esi
xorl    %ebx, %ebx
rmmovl  %esi, vel_barra2(%ebx)
.L20:
xorl    %ebx, %ebx
rmmovl  %ebx, vel_barra1(%ebx)

ret

.global _repreenche
pushl   %ebp
rrmovl  %esp, %ebp
irmovl  16, %ebx
subl    %ebx, %esp
irmovl  1, %ebx
rmmovl  %ebx, -8(%ebp)
jmp .L4
.L7:
xorl    %ebx, %ebx
rmmovl  %ebx, -4(%ebp)
jmp .L5
.L6:
mrmovl  -8(%ebp), %edx
rrmovl  %edx, %eax
irmovl  2, %ebx
shll    %ebx, %eax
addl    %edx, %eax
irmovl  3, %ebx
shll    %ebx, %eax
;addl   -4(%ebp), %eax
;inicio
mrmovl  -4(%ebp), %ebx
addl    %ebx, %eax
;fim    
irmovl  tela, %ebx
addl    %ebx, %eax

;movb   $32, (%eax)
;inicio
mrmovl  0(%eax), %ecx
irmovl  $00FFFFFF, %ebx
andl    %ebx, %ecx
irmovl  32, %ebx
irmovl  24, %esi
shll    %esi, %ebx
orl %ebx, %ecx
rmmovl  %ecx, 0(%eax)
;fim
irmovl  1, %ebx
mrmovl  -4(%ebp), %esi
addl    %ebx, %esi
rmmovl  %esi, -4(%ebp)
.L5:
irmovl  39, %ebx
mrmovl  -4(%ebp), %esi
subl    %ebx, %esi
jle .L6
irmovl  1, %ebx
mrmovl  -8(%ebp), %esi
addl    %ebx, %esi
rmmovl  %esi, -8(%ebp)
.L4:
irmovl  18, %ebx
mrmovl  -8(%ebp), %esi
subl    %ebx, %esi
jle .L7
xorl    %ebx, %ebx
rmmovl  %ebx, -8(%ebp)
jmp .L8
.L9:
mrmovl  -8(%ebp), %eax
irmovl  tela, %ebx
addl    %ebx, %eax
;movb   $61, (%eax)
;inicio
mrmovl  0(%eax), %ecx
irmovl  $00FFFFFF, %ebx
andl    %ebx, %ecx
irmovl  61, %ebx
irmovl  24, %esi
shll    %esi, %ebx
orl %ebx, %ecx
rmmovl  %ecx, 0(%eax)
;fim
mrmovl  -8(%ebp), %eax
irmovl  tela, %ebx
irmovl  760, %esi
addl    %ebx, %esi
addl    %esi, %eax
;movb   $61, (%eax)
;inicio
mrmovl  0(%eax), %ecx
irmovl  $00FFFFFF, %ebx
andl    %ebx, %ecx
irmovl  61, %ebx
irmovl  24, %esi
shll    %esi, %ebx
orl %ebx, %ecx
rmmovl  %ecx, 0(%eax)
;fim
irmovl  1, %ebx
mrmovl  -8(%ebp), %esi
addl    %ebx, %esi
rmmovl  %esi, -8(%ebp)
.L8:
irmovl  39, %ebx
mrmovl  -8(%ebp), %esi
subl    %ebx, %esi
jle .L9
rrmovl  %esp, %ebp
popl    %ebp
ret

;variaveis globais
.dseg 13
.global tela
.blk 102400

.global i
.blk 4

.global j
.blk 4

.global pontos_1
.blk 4

.global pontos_2
.blk 4

.global posx_bola
.blk 4

.global posy_bola
.blk 4

.global velx_bola
.blk 4

.global vely_bola
.blk 4

.global pos_barra1
.blk 4

.global vel_barra1
.blk 4

.global pos_barra2
.blk 4

.global vel_barra2
.blk 4
.end 
```

进入这个

```
# _int0 00000000
# _int1 00000005
# _int2 0000000a
# _int3 0000000f
# _jilix_init 00000023
# _jilix_schedule 00000036
# _jilix_thread 00000095
# pid 0000019d
# next 000001a1
# ESP 000001c9
# _main 000000fe
# _produtor 0000015d
# _consumidor 0000017d
# changeador 000001f1
@ 0000
70
14
00
00
00
70
20
00
00
00
70
21
00
00
00
70
22
00
00
00
30
84
ff
ff
0f
00
80
fe
00
00
00
10
90
10
10
63
00
40
00
a1
01
00
00
90
80
36
00
00
00
70
2c
00
00
00
a0
58
a0
08
a0
38
a0
18
a0
28
a0
68
a0
78
a0
00
63
00
50
00
9d
01
00
00
30
81
02
00
00
00
68
10
40
40
c9
01
00
00
63
00
50
00
9d
01
00
00
68
10
50
00
a1
01
00
00
63
33
40
03
9d
01
00
00
63
00
50
00
9d
01
00
00
68
10
50
40
c9
01
00
00
b0
00
b0
78
b0
68
b0
28
b0
18
b0
38
b0
08
b0
58
90
a0
58
20
45
50
65
08
00
00
00
50
75
0c    
00
00
00    
20
70
30
83
36
00
00
00
61
30
20
63
30
81
02
00
00
00
68
13
40
03
c9
01
00
00
63
33
20
60
50
33
9d
01
00
00
30
81
02
00
00
00
68
10
68
13
50
23
a1
01
00
00
40
20
a1
01
00
00
40
63
a1
01
00
00
63
00
50
15
10
00
00
00
30
83
36
00
00
00
61
37
40
14
00
00
00
00
b0
58
90
63
11
30
80
05
00
00
00
40
01
f1
01
00
00
80
23
00
00
00
30
80
5d
01
00
00
a0
08    
30
80
00
10
00
00
a0    
08
30
80
01
00
00
00
a0
08
80
95    
00
00    
00
30
81
12
00
00
00
60
14
30
80
7d
01
00
00
a0
08
30
80
d0
07
00
00
a0
08
30
80
02
00
00
00
a0
08    
80
95
00
00
00
80
36
00
00
00
70
53
01
00
00
63
00
30
83
07
00
00
00
50    
10
f1
01
00
00
60
31
40
10
f1
01
00
00
80
36
00
00
00
70
73
01
00
00
63
00
30    
83
03
00    
00
00
50
10
f1
01
00
00
61
31
40
10
f1
01
00    
00
80
36
00
00
00
70
93
01
00
00
@ 019d
00
00
00
00
00    
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00    
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00
00    
00
00
00
00
00
00
00
00
00
00
00
00
00    
00
00
00
00
00
00
00
00
00
00
00 
```

当我试图在模拟器中运行它时，它一直在调用一个全局变量，很多 nops 突然出现，并且在执行过程中停止了。

你认为问题出在编译器上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:03:57.383

输入程序看起来一点也不像 Y86 程序。相反，它看起来像是使用 gcc -c 指令生成的东西。

Y86 的功能非常有限，并且不支持代码中显示的大多数指令。

# multithreading - 谁应该在 MVC 中处理线程？

> ID：11407865
> 
> 赞同：4
> 
> 时间：2012-07-10T06:35:21.150
> 
> 标签：multithreading, model-view-controller

长时间运行的任务通常在后台线程中执行，以防止 UI 冻结。似乎线程逻辑可以驻留在视图或控制器中。

举个例子（在 C# 中），假设有一个名为的方法`RunAsync`在后台线程中运行委托，这里有两种方法：

```
// Option 1

public class View {
  public void OnButtonClicked() {
    RunAsync(() => controller.DoSomething());
  }
}

public class Controller {
  public void DoSomething() {
    model.Foo();
  }
} 
```

或者：

```
// Option 2

public class View {
  public void OnButtonClicked() {
    controller.DoSomething();
  }
}

public class Controller {
  public void DoSomething() {
    RunAsync(() => model.Foo());
  }
} 
```

以一种方式或另一种方式这样做有优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T06:45:58.930

我看到控制器负责线程安全的两个论点。

1.  控制器（至少在概念上）可被许多视图重用。我们避免重复自己，而是将 RunAsync() 放在 Controller 中而不是许多 View 中。
2.  只有控制器真正“知道”是否需要任何这样的线程。事实上，我们将来可能会更改控制器。所以我们有一个“单一责任”的思维方式。控制器既决定是否需要 RunAsynch() 并且实际上确保它完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:46:28.753

我的理解是控制器（或 WPF 中的 ViewModel）应该处理这个问题。视图总是与“视图”相关的东西相结合，因此像运行后台作业这样的任务应该交给控制器。

VIEW 应该处理这个逻辑对你来说听起来不是很奇怪吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:51:08.127

在我看来，它应该由Controller处理。由于您希望尽可能地将模型与视图分开，因此视图实际上应该不知道特定调用（例如）`model.Foo()`需要很长时间，因此需要异步运行。另一方面，控制器是唯一真正了解两者的控制器，因此应该决定某些操作是否需要异步运行。

# wpf - 数据注释ErrorMessage错误（使用WPF和实体框架）

> ID：11407867
> 
> 赞同：2
> 
> 时间：2012-07-10T06:35:23.180
> 
> 标签：wpf, entity-framework, xaml, wpf-controls, data-annotations

我正在尝试在我的项目中应用数据注释。我在我的项目中使用 WPF 和实体框架，但是当我编写例如

```
 [Required(ErrorMessage="This field is required!")]
 public string Name { get; set; } 
```

它会忽略我的错误消息，而是显示自己的错误消息说

> “一个或多个实体的验证失败。有关 `EntityValidationErrors`详细信息，请参阅属性。”

你有什么建议让我传递我自己的错误信息？

提前致谢。

# c# - 自定义密码 Winform

> ID：11407871
> 
> 赞同：0
> 
> 时间：2012-07-10T06:35:44.700
> 
> 标签：c#, dialog

我正在开发 ac#winform 应用程序，我有一个按钮，点击后会出现一个询问密码的对话框。如果密码正确，则执行按钮下的代码。这是主窗体上的代码。

```
 password pass = new password();
       pass.ShowDialog();
      if (pass.DialogResult == DialogResult.OK)
        {
            if (pass.Password == "12")
            { 
```

下面是我在密码表单中的 OK 按钮上的代码

```
 private void btnOK_Click(object sender, EventArgs e)
    {
        button1.DialogResult = DialogResult.OK;
    } 
```

问题是密码表单的确定按钮必须单击两次才能正常工作。任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T06:42:44.483

将对话框窗体的 AcceptButton 属性设置为 OK 按钮，并移除 btnOK_click 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:44:08.570

从[Button.DialogResult 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.dialogresult.aspx)中，我看到该属性定义了**单击按钮时**要返回到表单的 DialogResult 。这意味着您应该`button1.DialogResult = DialogResult.OK;`在构造函数中包含代码行，或者只是在设计器中设置它，而不是在点击事件上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:38:35.600

`this.Close(...)`在里面打电话`btnOK_Click`

```
private void btnOK_Click(object sender, EventArgs e)
{
    button1.DialogResult = DialogResult.OK;
    this.Close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T06:48:54.377

将密码表单的 AcceptButton 设置为 btnOK。并删除点击事件处理程序。您不需要事件处理程序 - 来自文档 - 如果此属性的 DialogResult 设置为 None 以外的任何值，并且**如果父表单是通过 ShowDialog 方法显示的，则单击按钮将关闭父表单而无需挂钩起任何事件**。然后，当单击按钮时，表单的 DialogResult 属性设置为按钮的 DialogResult。

MSDN：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.button.dialogresult.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.dialogresult.aspx)

# node.js - nodejs中API和Form的最佳单一身份验证机制

> ID：11407872
> 
> 赞同：0
> 
> 时间：2012-07-10T06:35:54.427
> 
> 标签：node.js, authentication, express

我正在创建一个 Web 应用程序`REST service Using ExpressJS + NodeJS + MongoDB + Mongoose`，我的要求是：

1）我有一个简单的`html`页面作为单独的项目。

2) API 作为另一个使用`express + NodeJS`.

我想要一个针对表单和 API 的单一身份验证机制。我不想使用`OATH`，即使我想使用相同的身份验证来维护会话。这样我就可以使用 调用服务`JQuery.AJAX`，如果用户正在会话中。

有没有办法做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:28:42.390

当然有。如果您将用户数据**和**会话保存在数据库中（或至少像 Redis 这样的内存存储），那么您可以连接到它并从中检索数据。会话就是数据库中的简单条目。

另一方面，如果您将会话数据保存在应用程序的内存中，这是不可能的，但无论如何您都不应该这样做，因为这实际上会使您的应用程序无法扩展。

如果由于某些原因您无法让两个应用程序连接到同一个数据库/存储，那么除了 RESTful API（在主应用程序中）之外别无选择，它可以回答以下问题：“我经过身份验证了吗？”。

# java - 如何在 ListView 的一行中更改一个 ImageView？

> ID：11407876
> 
> 赞同：0
> 
> 时间：2012-07-10T06:36:14.043
> 
> 标签：java, android, android-listview

我有一个使用 SimpleCursorAdapter 填充的 ListView。行布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <TextView 
        android:id="@+id/row" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="10dp" />

    <ImageView
        android:id="@+id/enable_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:padding="10dp"
        android:contentDescription="@string/image_description"
        android:src="@android:drawable/checkbox_off_background" />

</RelativeLayout> 
```

我想要做的是在创建活动时根据一些共享偏好将图像视图的源更改为其他内容。这是我使用的代码，但它不起作用：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    long appliedProfileId = prefs.getLong("appliedProfileId", -1); 

    if(appliedProfileId != -1) {
        /*View rowView = (View) getListView().getAdapter().getView(info.psition, null, null);
        TextView textView = (TextView) rowView.findViewById(R.id.row);*/
        ListView listView = getListView();
        ListAdapter adapter = listView.getAdapter();
        View appliedRowLayout = (View) adapter.getView(getItemPositionByAdapterId(adapter, appliedProfileId), null, null);

        TextView textView = (TextView) appliedRowLayout.findViewById(R.id.row);
        Log.d("asdasd", textView.getText().toString());
        ImageView imageView = (ImageView) appliedRowLayout.findViewById(R.id.enable_image);
        imageView.setImageResource(android.R.drawable.checkbox_on_background);
        setListAdapter(adapter);
    } 
```

这是 getItemPositionByAdapterId 方法：

```
private int getItemPositionByAdapterId(ListAdapter adapter, final long id)
{
    for (int i = 0; i < adapter.getCount(); i++)
    {
        if (adapter.getItemId(i) == id)
            return i;
    }
    return -1;
} 
```

我能够阅读列表视图的内容，但无法更改它们..请帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:44:02.630

您需要覆盖此列表视图的 getView 方法。检查[自定义 Android ListView 项目](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

你需要做这样的事情。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
if (position == 0) // first element in the list
 {
   convertView.findViewById(R.id.image1).setImageURI(....)
 }
    and so on.... 
```

# java - 使用 Java 模式和匹配器将 XML 单词插入 MySQL

> ID：11407878
> 
> 赞同：0
> 
> 时间：2012-07-10T06:36:32.627
> 
> 标签：java, mysql, xml, regex

我想使用 MySQL 数据库跟踪群聊中的单词使用情况。目前传递给 insertWords 方法的消息是一个 XML 字符串。XML 字符串可以包含特殊字符，例如`&apos;`和`&quot;`。有没有比使用 String.replace 将 XML 格式的字符串转换为普通消息更好的方法？

如果我的信息是：`I&apos;m bad, but they aren&apos;t that &quot;good&quot;`

我怎样才能将其转换为：`I'm bad, but they aren't that "good"`

我的代码将插入 apos 2 次和 quot 2 次。我该如何解决？

```
Pattern p = Pattern.compile("[\\w']+");

PreparedStatement insertWordStmt = connection.prepareStatement("INSERT INTO word (word, count) VALUES (?, 1) " +
        "ON DUPLICATE KEY UPDATE count=count+1");

public void insertWords(String msg) {
    msg = msg.toLowerCase();
    try {
        Matcher m = p.matcher(msg);
        while ( m.find() ) {
            String word = msg.substring(m.start(), m.end());
            insertWordStmt.setString(1, word);
            insertWordStmt.executeUpdate();
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:34:33.153

要添加双引号匹配，请尝试

```
Pattern p = Pattern.compile("[\\w'\"]+"); 
```

评论后编辑

```
msg = msg.toLowerCase().replace("&apos;","'").replace("&quote;","\""); 
```

# python - Python 正则表达式匹配

> ID：11407879
> 
> 赞同：2
> 
> 时间：2012-07-10T06:36:36.213
> 
> 标签：python, regex

我有一个字符串，我想从中提取一个子字符串。目前我正在使用 3 行来实现这一点，如下所示：

```
for z in my_list:
    abc = re.sub('\n', '', z[0])
    xyz = re.sub('SNMPv2-SMI::', '', abc)
    egg = re.sub('\..*\ =.*$', '', xyz) 
```

但是，由于这是使用 3 个单独的正则表达式命令，有没有办法使用单个语句/命令获取字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:40:53.707

只需使用`|`("or") 运算符：

```
strng = re.sub(r'(this)|(that)|(something else)', '', strng) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:43:59.897

由于替换字符串相同，您可以使用**|** .

```
>>> import re
>>> s="this is for testing"
>>> re.sub("this|for|test","REPLACED",s)
'REPLACED is REPLACED REPLACEDing' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:38:17.233

```
for z in my_list:
    abc = re.sub('\..*\ =.*$', '', re.sub('SNMPv2-SMI::', '', re.sub('\n', '', z[0]))) 
```

丑陋的小单线给你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T22:49:50.760

您可以使用 silce 提示删除第一个字符：

```
 z[1:] 
```

就像其他人说的那样，您可以使用“（a | b | c）”进行逻辑或。我认为你的代码是这样的：

```
for z in my_list:
    egg = re.sub( r'(SNMPv2-SMI::|\..*\ =.*)', '', z[1:] ) 
```

# c++ - 当我的后台应用程序运行时，Alt + F4 在 Windows 中不起作用

> ID：11407881
> 
> 赞同：1
> 
> 时间：2012-07-10T06:36:59.723
> 
> 标签：c++, windows

我有一个在后台运行的 C++ 屏幕外应用程序，即它没有出现在 Windows 任务栏或任务管理器的“应用程序”列表中。当我按下`Alt + F4`键时，第一次出现 Windows 关机菜单对话框，当我按下`Esc`键时它会熄灭（如预期的那样）。但在此之后，如果我按下`Alt + F4`Windows 关闭菜单对话框将不会出现。我必须单击桌面，然后按下`Alt + F4`Windows 关闭菜单对话框才能再次出现。知道为什么会出现这种情况以及如何防止这种情况发生吗？当我的应用程序未运行并且我执行此操作时，每次按下时都会出现 Windows 关闭菜单对话框，`Alt + F4`而无需再次单击桌面。

# objective-c - 如何在 iPhone 的相同位置旋转按钮

> ID：11407882
> 
> 赞同：0
> 
> 时间：2012-07-10T06:37:05.747
> 
> 标签：objective-c, xcode, animation, uibutton, rotation

我有 i 按钮，通过添加动画，我将按钮从一个位置移动到另一个位置，在移动到指定位置之前，我想将按钮旋转到圆形位置。

我对动画有一个想法并在网上搜索，没有解决方案有效。我写了下面的移动代码，谁能告诉我如何为按钮添加旋转

```
 CGRect fr1 = CGRectMake(143, 429, 25, 25);
    [button setFrame:CGRectMake(121, 381, button.frame.size.width, button.frame.size.height)];

    [UIView animateWithDuration:0.3 animations:^{
        [self.navigationController setNavigationBarHidden:YES];
        [UIView setAnimationDidStopSelector:@selector(moveToRight:finished:context:)];
        [UIView setAnimationDelegate:self];
        [button setFrame:fr1];
    }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:46:45.330

使用 cabasic 动画在 ownaxis 上旋转。这对你有用。

# codeigniter - 配置文件加载两次

> ID：11407883
> 
> 赞同：0
> 
> 时间：2012-07-10T06:37:13.140
> 
> 标签：codeigniter, codeigniter-2

我正在使用代码点火器。突然，由于某种原因，我的 application/config/config.php 开始加载两次。

我在配置文件的顶部有以下代码，从第 5 行到第 12 行：

```
function __autoload ($class) {
    $file = APPPATH . 'libraries/' . $class . EXT;
    if (strpos($class, 'CI_') !== 0) {
        if (file_exists($file) && is_file($file)) {
            @include_once (APPPATH . 'libraries/' . $class . EXT);
        }
    } 
} 
```

当我测试一个页面时，我得到这个错误：

```
Fatal error: Cannot redeclare __autoload() (previously declared in C:\xampp\htdocs\ci_centric\application\config\config.php:5) in C:\xampp\htdocs\ci_centric\application\config\config.php on line 12 
```

如果我用 包装自动加载`if(!function_exists('__autoload')) { ... }`，我会得到以下输出：

```
 Notice: Constant FRONTEND_PATH already defined in C:\xampp\htdocs\ci_centric\application\config\config.php on line 390

    Notice: Constant FRONTEND_WEBPARTS_PATH already defined in C:\xampp\htdocs\ci_centric\application\config\config.php on line 391

    Notice: Constant FRONTEND_MAINPAGES_PATH already defined in C:\xampp\htdocs\ci_centric\application\config\config.php on line 392

    Notice: Constant BACKEND_PATH already defined in C:\xampp\htdocs\ci_centric\application\config\config.php on line 393

    Notice: Constant BACKEND_WEBPARTS_PATH already defined in C:\xampp\htdocs\ci_centric\application\config\config.php on line 394

    Notice: Constant BACKEND_MAINPAGES_PATH already defined in C:\xampp\htdocs\ci_centric\application\config\config.php on line 395

   Notice: Constant BACKEND_MAINPAGES_PATH already defined in C:\xampp\htdocs\ci_centric\application\config\config.php on line 396
    .
    .
    . 
```

过去几天一切正常；我玩了一点 $this->session->flashdata('...'); 然后我得到了配置双重加载问题。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:07:01.853

好吧，我不知道你使用什么样的技巧，为什么你在一个`configuration`文件中做这样的事情，只应该声明变量。您应该删除该代码，或者最好从 CodeIgniter 的新副本开始。你不知道 CodeIgniter 想要在哪里以及出于什么目的两次加载这个文件。无论如何，你不应该以任何方式做这样的事情。如果出于某种尴尬的原因确实有必要，您可以尝试将其移动到`MY_core.php`甚至`index.php`文件中，这仍然是完全错误的，但比您现在拥有的要好得多。

# html - CSS悬停在整个表格行中创建热点

> ID：11407887
> 
> 赞同：0
> 
> 时间：2012-07-10T06:37:36.183
> 
> 标签：html, css

我最近将悬停功能应用于一组按钮。当应用于不同的网站时，编码很好。当应用于此站点时，链接/热点转到下一个按钮。例如：我有 home/about/gallery/blog/prints/contact 按钮，您会认为 CSS 样式表中设置的尺寸链接仅适用于这些尺寸。没有这个。链接/热点显示链接到 index.shtml 从表格边缘到主页按钮的另一侧。按钮之间有空格，但链接/热点在空间中移动 50%，直到它碰到下一个按钮链接/热点。最后一个按钮“接触”跨越到桌子的另一边。关于我做错了什么的任何线索？

CSS：

```
div.nav-home {
margin-top: 10px;
margin-bottom: 0px;
margin-left: 130px;
Margin-right: -60px;
background-position: right top;
background-repeat: no-repeat;
width: 75px;
height: 64px;
}
#home {
background-image: url('img/home.png');
}
#home:hover {
background-image: url('img/home_hover.png');
} 
```

索引.shtml：

```
<table width="1213" height="64" align="center" background="img/tablebg2.png">
<!--#include file="menubuttons.html" --> 
```

菜单按钮.html：

```
<tr>    
<td align="center" width="75">
    <a href="/index.shtml" title="HOME" ><div id="home" class="nav-home"></div></a>
</td>

<td align="center" width="86">
    <a href="/about.shtml" title="ABOUT" ><div id="about" class="nav-about"></div></a>
</td>

<td align="center" width="94">
    <a href="/gallery.shtml" title="GALLERY" ><div id="gallery" class="nav-gallery">
</div></a>
</td>   

<td align="center" width="63">
    <a href="/blog.shtml" title="BLOG" ><div id="blog" class="nav-blog"></div></a>
</td>   

<td align="center" width="85">
    <a href="/prints.shtml" title="PRINTS" ><div id="prints" class="nav-prints"> 
 </div></a>
</td>

<td align="center" width="103">
    <a href="/contact.shtml" title="CONTACT" ><div id="contact" class="nav-contact">
</div></a>
</td>   
</tr> 
```

固定：（可能不正确？）

我只编写了 2 个月的代码，并且对如何写出它有一个很好的想法，但我不知道所有内容的含义，例如 DIV 标签。我知道我昨晚在这里搜索，我以为我要把 div 放在 TD 中。

我可以通过在每组按钮之间的第一个按钮之前和最后一个按钮之后添加一些 spacer.png 来解决所有问题。这也解决了我在侧面的间距问题。

谢谢您的帮助。我只是想找到一种简单的方法来让我的按钮在悬停时改变。这种方法是我昨晚在这里发现的第一个方法，现在我正在努力完善它……至少在我的脑海中。我需要对无序列表进行一些研究，因为我听说这会让事情变得更简单......

这是链接（基于我最近完成的网站的后端）www.blackmarkettattoos.com/amysesco/index.shtml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:28:58.693

我认为问题在于您使用的是 DIV，它是表格单元格内的容器标记，并且您都应用样式（作为类的 DIV 和作为内联的 TD）。

一般来说，最好用列表创建菜单，但如果你必须使用你提供的代码，那么试着去掉 width: 75px; 来自 div.nav-home。

检查这两个链接以了解如何使用列表创建 CSS 菜单：

*   [css.maxdesign.com.au](http://css.maxdesign.com.au/)
*   [动态驱动 CSS 库](http://www.dynamicdrive.com/style/csslibrary/)

# c# - 在 LINQ 选择结果中添加计算字段？

> ID：11407893
> 
> 赞同：0
> 
> 时间：2012-07-10T06:38:02.590
> 
> 标签：c#, linq, entity-framework

我有一个 LINQ 查询（与 EF 一起使用）

基本上我想根据另一列的值在选择结果中添加一列。

我`PaymentDate`在数据库表中有列，但没有`Paid`列。如果`PaymentDate`列中为空，它也表明付款是错误的，如果它有某个日期，则表示付款是真实的。

这是我的查询，请指导我如何做到这一点。

```
 var selectedResults=
    from InvoiceSet in Invoices
    join BookedAreasSet in BookedAreas 
    on InvoiceSet.InvoiceID equals BookedAreasSet.InvoiceID
    join AreaSet in Areas on BookedAreasSet.AreaID equals AreaSet.AreaID
    select new     {InvoiceSet.InvoiceNumber,InvoiceSet.Amount,InvoiceSet.TotalDiscount,InvoiceSet.GST,       InvoiceSet.PaymentDate,InvoiceSet.ShoppingCentreID,BookedAreasSet.BookedAreaID,
AreaSet.Name,Here I want to add calculated value column based on InvoiceSet.PaymentDate value} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:44:55.543

我认为你应该能够做这样的事情

```
var selectedResults=
    from InvoiceSet in Invoices
    join BookedAreasSet in BookedAreas 
    on InvoiceSet.InvoiceID equals BookedAreasSet.InvoiceID
    join AreaSet in Areas on BookedAreasSet.AreaID equals AreaSet.AreaID
    select new { InvoiceSet.InvoiceNumber,InvoiceSet.Amount,InvoiceSet.TotalDiscount,InvoiceSet.GST,       
        InvoiceSet.PaymentDate,InvoiceSet.ShoppingCentreID,BookedAreasSet.BookedAreaID,
        AreaSet.Name,Paid = (InvoiceSet.PaymentDate == null) } 
```

# bdd - BDD - 每个场景都应该是自包含的吗？

> ID：11407894
> 
> 赞同：2
> 
> 时间：2012-07-10T06:38:09.950
> 
> 标签：bdd

我有一个包含多个场景的 BDD 功能。每个场景都应该完全独立并且可以单独运行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T08:04:25.413

*应该是*，是的。在所有形式的 TDD（包括 BDD）中，确保每个“测试”都可以独立运行，并且不与先运行的另一个测试耦合或依赖于它，这通常是一种很好的做法。这将有助于避免创建一个脆弱的测试套件（即一个容易损坏的测试套件）。

这并不是说您不能将可读性链接在一起。对于一个非常便宜/快速的例子：

```
Feature: Users can register and log in

Scenario: Should be able to register
Given I am not registered
When I complete the registration form
Then I will be registered

Scenario: Should be able to log in
Given I am registered
When I correctly sign-in with my credentials
Then I will be logged in

Scenario: Should be able to log out
Given I am logged in
When I sign-out
Then I will be logged out 
```

每个场景都表示一个可以自动化的测试——每个场景都应该在幕后设计，以便能够独立运行。但作为该功能的读者（比如业务利益相关者） - 过程是完整的，他们可以更轻松地理解整个画面。

# backbone.js - RequireJS - 我是否必须为子类重新导入以前需要的文件

> ID：11407895
> 
> 赞同：3
> 
> 时间：2012-07-10T06:38:14.453
> 
> 标签：backbone.js, requirejs

当我使用 requirejs 和backbonejs 进行开发时，我对导入机制的工作原理感到困惑，因为我认为导入的类只适用于该功能范围。但是，当我尝试调试时，我发现对于一些我没有导入 jquery 或主干或下划线的 requirejs 类，它仍然能够正常工作，但这不适用于我创建的其他类。

下面的例子说明了我的意思：

1) index.html -> 初始加载文件

2) init.js -> 导入所有需要的类并输出该类是否可用

3) base.js -> 基类，导入所有需要的库

4) shop.js -> 从基类扩展，没有导入 jquery，主干文件，但它正在工作

索引.html

```
<html>
<head>
    <title>Testing</title>
    <script data-main='init' src='http://requirejs.org/docs/release/2.0.4/minified/require.js'></script>
</head>
<body>
    halo world
</body>
</html> 
```

初始化.js

```
require.config({
    paths: {
        jquery: 'http://code.jquery.com/jquery-1.7.2.min',
        underscore: 'http://underscorejs.org/underscore-min', 
        backbone: 'http://backbonejs.org/backbone-min'
    },
    shim: {
        backbone: {
            deps: ["underscore", "jquery"],
            exports: "Backbone"
        },

        underscore: {
            exports: "_"
        }
    }
});

require([
    'views/shop',
],function(ShopView){   
    var shopView = new ShopView();
    shopView.render();  

    console.log('Backbone - ');
    console.log(Backbone);
    console.log('Underscore - ');
    console.log(_);
    console.log('jQuery - ');
    console.log($);
    console.log('BaseView - ');
    console.log(BaseView);
}); 
```

shop.js

```
define([
    'views/base'
], function(BaseView) { 
    var ShopView = BaseView.extend({
        initialize:function(){
            console.log('ShopView');        
        }
    });
    return ShopView;
}); 
```

base.js

```
define([
    'jquery',
    'underscore',
    'backbone'  
], function($,_,Backbone) { 
    var BaseView = Backbone.View.extend({
        initialize:function(){
            console.log('BaseView');        
        }
    });
    return BaseView;
}); 
```

init.js 的结果输出：

控制台.log（主干）；-> 即使我没有导入骨干课程，也会返回给我

控制台.log($); -> 即使我没有导入它，也会返回我的 jquery 类

控制台.log(_); -> 即使我没有导入它，也会返回我下划线类

console.log(BaseView); -> 为我的自定义类返回未定义

如果我从 init.js 中删除视图/商店。

```
require([

],function(){   
    console.log('Backbone - ');
    console.log(Backbone);
    console.log('Underscore - ');
    console.log(_);
    console.log('jQuery - ');
    console.log($);
    console.log('BaseView - ');
    console.log(BaseView);
}); 
```

控制台.log（主干）；-> 未定义

控制台.log($); -> 打破

控制台.log(_); -> 打破

console.log(BaseView); -> 打破

我无法解释以前的场景是如何工作的，我认为主干、jquery、下划线是全局变量，但似乎我删除了视图类，然后变量未定义，而如果它是导入类，我可以提出我之前导入的从 base.js 到未来导入的类。对不起，如果它混淆了。

有人可以解释一下 requirejs 中的导入是如何工作的以及导入的范围。我是否必须重新要求我以前需要的课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:12:13.453

require.config 它不会自行导入任何内容。它用于声明非 AMD 文件的别名（路径）和依赖项。

考虑到当您使用 'define' 时，您实际上*需要*它的依赖项。

```
define ([ array of dependencies ], function) 
```

.

```
init: require shop  (ok, let's bring shop here:
shop: require base  (ok, let's bring base here:
base: require    (so you need backbone, underscore and jquery.. ok,  
                  I'll bring them for you) 
```

然后，当需要并加载每个依赖项时，`init`执行开始。

当您`shop`从`init.js,`您身上移除时，您不需要任何东西。再次**require.config 不导入任何东西。**

PS。这是个人喜好，但我更喜欢有一个需要 jquery、下划线和主干的文件 app.js。然后每个模块都需要'app'。如果您想向其中添加功能，共享该命名空间也很有用。( `app.myFunction`)

请参阅此骨干样板：[https ://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)

# c# - User.config 是如何创建的以及如何使用它

> ID：11407899
> 
> 赞同：8
> 
> 时间：2012-07-10T06:38:21.293
> 
> 标签：c#, configuration-files, application-settings

我开始阅读有关配置文件的内容，并阅读了有关 user.config 的内容。谷歌搜索了一下，但找不到它是如何创建的以及如何使用的。另请阅读，将为每个用户创建一个单独的 user.config。甚至阅读 StackOverflow 中的问题，但它们没有帮助。谁能指出我正确的资源。提前致谢 ：）

感谢@Ramesh、@Michael 和@Frozendragon 的回答。浏览了您发布的文章。假设我有一个 Web 应用程序，并且 3 个名为“A”、“B”和“C”的用户正在使用它们。我有一个 app.config，我在其中提供了默认值。我读到这些值可以相应地更改，并将保存在 UserName.config 文件中。这就是我迷路的地方。如果这些值保存在相应的用户配置文件中，当同一用户再次尝试打开应用程序时，它们如何取回？我的应用程序如何知道哪些文件看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T06:43:24.993

[在 C# 中使用设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)

[已应用用户设置](http://www.codeproject.com/Articles/25829/User-Settings-Applied)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T07:49:56.220

要回答“如何创建 User.config 文件”的后续问题：

当您打开具有用户范围设置的桌面应用程序时，.NET Framework 将自动尝试从用户的本地应用程序目录为您加载 User.config 文件 - 检查当前用户的确切目录的值。[`Environment.GetFolderPath`](http://msdn.microsoft.com/en-us/library/system.environment.aspx)`(`[`SpecialFolder.ApplicationData`](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)`)`

如果该文件不存在，则将创建该文件。

我没有确切的资源可以指向您，因此创建该文件的确切时间可能是找不到它，或者仅当您在 ApplicationSettings 实例上调用 Save 时才可能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T06:41:49.040

[MSDN 中的应用程序设置体系结构](http://msdn.microsoft.com/en-us/library/8eyb2ct1.aspx)，解释了如何加载应用程序的设置，还讨论了存储在 user.config 中的用户范围设置

# c# - 不推荐使用 C# SDK 时如何开发 Facebook 应用程序

> ID：11407904
> 
> 赞同：0
> 
> 时间：2012-07-10T06:39:13.390
> 
> 标签：c#, facebook, facebook-c#-sdk

目前，我有一个应用程序，我想将它与 Facebook 集成。我的应用程序基于`C#`，现在`C# SDK`已弃用。客户端请求（例如扩展访问令牌）无法发出某些请求，因此`Javascript SDK`无能为力。

有没有人知道在弃用`C#`时如何将应用程序与 Facebook集成？`C# SDK`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:50:05.420

Facebook 在 REST 上开放图形 api。事件虽然 C# SDK 已被弃用，但使用 C# 的基本 http 库编写基本的 http 调用来进行 api 调用并不难。

关于登录，您必须嵌入一个浏览器实例，据我所知，C# 有 msie 嵌入选项。使用浏览器嵌入，必须捕获重定向返回的访问令牌，并稍后使用它从 C# 对 Facebook api 的 REST 接口进行 http 调用。

# java - 登录java后为所有其他文件存储值

> ID：11407906
> 
> 赞同：0
> 
> 时间：2012-07-10T06:39:20.350
> 
> 标签：java, swing

我正在开发一个应用程序，其中第一个窗口是

![在此处输入图像描述](../Images/2f521bfa447cf137019ff22b7643c349.png)

单击登录后，将出现登录窗口，并且在正确的凭据被引导后选择时间戳和数据集 ID 窗口。这就是我访问 API 密钥 ( `Login.java`)值的方式

```
String value1=text1.getText();
String value2=text2.getText();
URL url = new URL("http://website-link/method/user.json?userName="+value1+"&password="+value2);

HttpURLConnection httpCon = (HttpURLConnection) url.openConnection(); 
BufferedReader in = new BufferedReader(new InputStreamReader(httpCon.getInputStream()));
String inputLine;
StringBuilder sb = new StringBuilder();
while ((inputLine = in.readLine()) != null) {
  sb.append(inputLine);
}

String Result;
Result=sb.toString();
String jsonSource = Result;
JSONArray array;
try {
  array = new JSONArray(jsonSource);
  for (int i = 0; i < array.length(); i++) {
    JSONObject firstObject = (JSONObject) array.get(i);
    System.out.println("APIkey is  " + firstObject.getString("apiKey"));
    APIkey=firstObject.getString("apiKey");
  } 
```

我希望在成功登录后，用户可以随时选择数据集和时间戳。那就是`Login.java`将值传递给`Algorithm.java`（用于选择数据集和时间戳窗口）

```
if (httpCon.getResponseCode()==200) {
  Algorithm frame=new Algorithm(APIkey);
  frame.setSize(450,200);
  frame.setVisible(true);
  dispose();
  JLabel label = new JLabel("Welcome:"+value1);
} 
```

现在此 API 密钥用于`Algorithm.java`设置连接并根据输入的时间戳和数据集 ID 选择一些特定节点。

现在我希望登录后我可以随时单击此窗口中显示的第二个按钮并选择时间戳和数据集 ID。但在那种情况下，我没有 API 密钥的值，因为我在`Main.java`（负责上述窗口）中使用它。并且`Main.java`API key 的值为 null。我不希望用户一次又一次地输入登录用户名和密码。

```
if (e.getSource() == myFirstButton) {
  Login frame1=new Login();
  frame1.setSize(450,200);
  frame1.setVisible(true);
}

if (e.getSource() == mySecondButton) {
  Algorithm frame=new Algorithm(APIkey);
  frame.setSize(450,200);
  frame.setVisible(true);
} 
```

**现在，一旦用户在登录窗口中输入正确的访问凭据并且可以在任何地方使用它，我如何才能将 API 密钥的值存储在所有文件中。** 每个文件：Log-in.java、Algorithm.java、Main.java 都在扩展 jframe。并且 Main.java 具有我在 Netbeans 7.1.2 中工作的 main() 函数。我在 Swing Java 中对此进行编码。我是 Java 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:28:19.233

最快的方法是在用户登录后输入一个全局变量`APIKey`并`Main.java`设置它的值。如果你这样做，我还会添加一个注销按钮来取消设置这个变量。

# mysql - 使用链表在 MySQL 中存储版本

> ID：11407907
> 
> 赞同：0
> 
> 时间：2012-07-10T06:39:32.943
> 
> 标签：mysql, linked-list

我在 MySQL 中存储版本化文本，每个版本都是一行，并且认为将数据表示为链表最有意义，因为我需要说`.next`和`.prev`. 在 MySQL 中表示这一点的最佳方式是什么？我在想一张桌子：

**表（版本）**

```
id (PK)
next (id of the next version, if head null)
prev (id of the previous version, if last null)
data 
```

或者，使用多个表尝试和规范化它是否更有意义？

# jakarta-ee - Tomcat 部署

> ID：11407911
> 
> 赞同：3
> 
> 时间：2012-07-10T06:39:58.383
> 
> 标签：jakarta-ee, tomcat, ant, webserver, tomcat7

我对tomcat很陌生，我目前使用的是tomcat 7。我有与之相关的部署问题。调用应用程序时出现“HTTP 状态 404”错误。

问题描述如下：

我有 Eclipse Helios IDE。我已经将它配置为 Tomcat 7，并且我已经启动了***没有错误***的服务器。

```
Jul 10, 2012 11:33:20 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre6\bin;.;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:/Program Files/Java/jre6/lib/i386;C:\oraclexe\app\oracle\product\11.2.0\server\bin;;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\TortoiseSVN\bin
Jul 10, 2012 11:33:20 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8090"]
Jul 10, 2012 11:33:20 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jul 10, 2012 11:33:20 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1034 ms
Jul 10, 2012 11:33:20 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jul 10, 2012 11:33:20 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.28
Jul 10, 2012 11:33:21 AM org.apache.catalina.util.SessionIdGenerator createSecureRandom
INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [172] milliseconds.
Jul 10, 2012 11:33:21 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8090"]
Jul 10, 2012 11:33:21 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Jul 10, 2012 11:33:21 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 725 ms 
```

我正在使用 ant 构建文件将其部署到当前位置：

```
C:\apache-tomcat-7.0.28-windows-x86\apache-tomcat-7.0.28\webapps 
```

我的 build.properties 文件如下。

```
deploydir=C:/apache-tomcat-7.0.28-windows-x86/apache-tomcat-7.0.28/webapps
userlib=C:/Jar/employee
<!--userlib=C:/Jar/basicstruts2jars-->
warname=balaji 
```

启动服务器后，使用 ant build**构建成功**。在 webapps 文件夹中创建了一个名为“balaji.war”的文件。

我已在“server.xml”中将端口号更改为 8090。

我的项目仅在 html 文件夹（公共财产）中构造一个 index.html 文件。

![项目结构](../Images/ed692361c02b5d46d072c4d69a3d4ac6.png)

当我运行网址时：`http://localhost:8090/balaji/html/index.html`

我收到 404 错误，如下所示：

![错误 404](../Images/6c57d64150ecbe10a6475ac1942e263a.png)

war 文件在同一位置（如下图所示）并且服务器已启动，但问题仍然存在。

![战争文件位置](../Images/9ae155413c3c832d2e1caa598eb33987.png)

请帮我解决这个部署问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T13:24:05.547

如果您希望 tomcat 在启动时部署您的战争，则需要将两个属性**unpackWARs**和**autoDeploy**设置为**true**，`server.xml`位于

> tomcat-home/conf/服务器/xml。

在 server.xml 中查找 Host 并修改为

```
<Host name="localhost" appBase="webapps" unpackWARs="true" autoDeploy="true"> 
```

# maps - 是否可以允许用户搜索地址，并将图钉附加到使用 Leaflet 的谷歌地图中的位置？我该怎么做呢？

> ID：11407916
> 
> 赞同：1
> 
> 时间：2012-07-10T06:40:27.257
> 
> 标签：maps, location, leaflet

我读过一些网站如何使用街道数据并将其覆盖在他们的地图图块上。这在传单中有必要吗？我认为标记的附加在传单文档中得到了很好的介绍，但我不确定是否有一种（理想情况下相当简单的）方法可以在谷歌地图中全面搜索地址功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:42:56.283

MapQuest 提供了两个地理编码 Web 服务，它们将获取地址并将其转换为纬度和经度坐标。

*   [MapQuest 地理编码网络服务](http://www.mapquestapi.com/geocoding/)（许可数据，意思是“幕后”地理编码数据是商业可用的数据）
*   [MapQuest 开放地理编码网络服务](http://open.mapquestapi.com/geocoding/)（开放数据，意思是“幕后”数据是开放的，由 OpenStreetMap 社区的用户生成）。

开放地理编码网络服务是全新的！如需更多信息，请查看[MapQuest 开发者网络](http://developer.mapquest.com)和[开发者网络论坛](http://developer.mapquest.com/web/info/forums)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:00:14.780

应该是可能的——你需要一个地理编码网络服务，比如谷歌的，你可以提供一个地址，然后会给你一个纬度/经度坐标，然后你可以将它绘制到 Leaflet 上。我相信 MapQuest 有一个免费的；不确定是否有 API 限制或类似的内容： http: [//www.mapquestapi.com/geocoding/](http://www.mapquestapi.com/geocoding/)

事实上，我认为 MapBox 的这个[模板站点](http://mapbox.com/map-sites/dc-properties/)虽然不使用 Leaflet，但它与 MapQuest 的地理编码挂钩。您也许可以将其用作示例。

# java - Eclipse 无法关闭 BEA WebLogic 服务器

> ID：11407917
> 
> 赞同：4
> 
> 时间：2012-07-10T06:40:48.130
> 
> 标签：java, eclipse, jakarta-ee, eclipse-plugin

我正在使用`Eclipse Galileo`并且我已经`BEA WebLogic Server v.10`安装了。我面临的问题是服务器无法再停止（在调试模式下运行）。例如，它显示停止到 93% 的进度条，然后给出消息`"The server cannot be stopped within timeout."`；我只能重新启动 eclipse 才能重新启动服务器。

在控制台中，我看到以下消息：

```
"C:/bea1001/jrockit_150_11/bin/java -classpath C:/bea1001/wlserver_10.0/server/lib/weblogic.jar weblogic.Admin -url t3://localhost:80 -username weblogic -password 12345678 FORCESHUTDOWN AdminServer 
Server "AdminServer" was force shutdown successfully ..." - 
```

但似乎有什么东西阻止了服务器。

谁能告诉我我能做什么？

ps 我试图在eclipse中删除并创建一个新服务器，但我仍然有同样的问题

谢谢并恭祝安康，

路易莎

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-05T21:54:13.303

我遇到了同样的问题，另一个解决方案可能是使用 java 命令启动 Eclipse（在我的情况下，Weblogic 以 java.exe 运行，但 Eclipse 作为 javaw.exe 运行）。还要检查是否使用相同版本的 JDK 来运行 Weblogic 和 Eclipse。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T07:33:17.640

我发现了问题：我将 BEA WebLogic 的端口更改为 80，该端口也被 Skype 使用。我更改了 Skype 的端口，现在服务器停止了

路易莎

# iphone - 当您有超过 5 个项目时，如何禁用重新排列/编辑？

> ID：11407921
> 
> 赞同：1
> 
> 时间：2012-07-10T06:40:57.697
> 
> 标签：iphone, ios, xcode

我的标签栏目前有超过 5 个项目，所以它显示为“更多*** ”，这很好。但是，当用户更多时，他们可以单击编辑，并重新排列选项卡栏中的内容。如何为用户禁用此功能？

我终于想通了，但是由于我是新用户，他们不会让我回答我自己的问题，哈哈，所以这是答案。

我想通了，所以我创建了自己的 UITabBarController 文件，并在 .m 文件中添加了：

```
self.customizableViewControllers = [NSArray arrayWithObjects:nil]; 
```

进入 viewDidLoad 方法，如下所示：

```
#import "MyTabBarController.h"

@interface MyTabBarController ()

@end

@implementation MyTabBarController

- (void)viewDidLoad
 {
    [super viewDidLoad];

   self.customizableViewControllers = [NSArray arrayWithObjects:nil];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:42:25.230

```
- (void)navigationController:(UINavigationController *)navigationController
        willShowViewController:(UIViewController *)viewController
        animated:(BOOL)animated {

    UINavigationBar *bar = navigationController.navigationBar;
    UINavigationItem *item = bar.topItem;

    item.rightBarButtonItem = nil;
} 
```

好的，您可以像这样隐藏导航栏

```
- (void)viewDidLoad
{
    self.navigationController.navigationBarHidden = YES;
} 
```

如果你不在 iOS 4.0 上试试

```
- (void)applicationDidFinishLaunching:(UIApplication *)application { 
    tabBarController.customizableViewControllers=nil;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:03:03.210

将此添加到查看确实加载。

```
self.customizableViewControllers = [NSArray arrayWithObjects:nil]; 
```

# php - 项目如何在选择/取消选择复选框时消失和出现？

> ID：11407922
> 
> 赞同：-3
> 
> 时间：2012-07-10T06:41:00.460
> 
> 标签：php, jquery, css

如何在复选框上单击事件时使用 jquery 隐藏/显示网页上的项目（假设有多个复选框，每个复选框都有其相关项目）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:43:51.537

页面中的一些 javascript 代码等待页面加载，然后注册复选框上的单击事件，当复选框的值更改时，代码查看当前值，然后隐藏/显示网页上的其他项目.

在某些情况下，它甚至可能对服务器进行 ajax 调用以获取新内容，然后将该内容插入到页面中。

在 jQuery 中，你可以这样做：

```
$(document).ready(function() {
    $("#showRelatedItems").click(function() {
        $(".relatedItems").toggle($(this).prop("checked"));
    });
}); 
```

这适用于带有 的复选框`id="showRelatedItems`和一组带有`class="relatedItems"`.

工作演示：http: [//jsfiddle.net/jfriend00/egYJj/](http://jsfiddle.net/jfriend00/egYJj/)

# android - 在应用程序中使用防病毒软件扫描文件

> ID：11407923
> 
> 赞同：5
> 
> 时间：2012-07-10T06:41:21.050
> 
> 标签：android, antivirus, interfacing

我试图在 android 中开发一个应用程序，它应该使用一些防病毒引擎（最好是开源的）来扫描设备上的文件。在互联网上搜索了很多，但找不到任何东西。任何人都请向我推荐一些可以与我的应用程序捆绑在一起的防病毒引擎，以及如何将它集成到我的应用程序中的示例。谢谢你。

编辑：需要提供API的开源防病毒库，以便第三方应用程序可以使用代码中的库和API并扫描文件，生成报告等，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:29:28.257

我从来没有尝试过，但你可以这样做：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setClassName("com.example.package", "com.example.package.ActivityToStart");
startActivity(intent); 
```

或者

```
PackageManager pm = getPackageManager();
Intent intent = pm.getLaunchIntentForPackage("com.example.package");
startActivity(intent); 
```

请参阅：[从另一个应用程序调用应用程序](https://stackoverflow.com/questions/4674391/calling-an-app-from-another-app)
这要求您必须知道安装在手机中的另一个应用程序的应用程序包名称。（转到手机设置 -> 管理应用程序）。

# css-friendly - 使用 cssfriendly 适配器垂直显示的水平菜单

> ID：11407931
> 
> 赞同：0
> 
> 时间：2012-07-10T06:41:47.273
> 
> 标签：css-friendly

我正在使用 cssfriendly 最新版本，但是当 applyinf Orientation="Horizntal" 我的手册以 Verticle 格式显示时。

下面是我的 .ASPX 代码

`<asp:Menu ID="Menu1" runat="server" DataSourceID="SiteMapDataSource1" CssSelectorClass="PrettyMenu" StaticDisplayLevels="2" Orientation="Horizontal" />`

站点地图代码

```
 <?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="default.aspx" title="Home"  description="Home page for site">
    <siteMapNode url="about/default.aspx" title="About"  description="About Us" />
    <siteMapNode url="help/default.aspx" title="Help"  description="FAQs and SiteMap">
      <siteMapNode url="help/faq.aspx" title="FAQ"  description="Frequently Asked Questions" />
      <siteMapNode url="help/sitemap.aspx" title="Sitemap"  description="Map of Site" />
    </siteMapNode>
  </siteMapNode>
</siteMap> 
```

请让我提出任何解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:17:24.340

```
 <?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="default.aspx" title="Home"  description="Home page for site">
    <siteMapNode url="help/default.aspx" title="Help"  description="FAQs and SiteMap">
      <siteMapNode url="help/faq.aspx" title="FAQ"  description="Frequently Asked Questions" />
      <siteMapNode url="help/sitemap.aspx" title="Sitemap"  description="Map of Site" />
    </siteMapNode>
  </siteMapNode>
    <siteMapNode url="about/default.aspx" title="About"  description="About Us" />
</siteMap> 
```

请试试这个，这将显示两个菜单项“Home”和“About”，它们的子项是垂直的。

# php - Date manipulation issue

> ID：11407932
> 
> 赞同：0
> 
> 时间：2012-07-10T06:41:47.637
> 
> 标签：php, date, strtotime

I want to get the start and end date of the previous calender month.

So, it's July 2012 now, I want the function to return 01 June 2012 as start and 30 June 2012 as the end.

This is my code:

```
$current_month = date("Y-m-01 00:00:00");
$start_month = strtotime(date("Y-m-d", strtotime($current_month) . " -1 month"));
$end_month = strtotime(date("Y-m-d", strtotime($current_month) . " -1 second"));
echo "Start Month: " . date('Y-m-d',$start_month) . "( " . $start_month . ")<br>";
echo "End Month: " . date('Y-m-d',$end_month) . "( " . $end_month . ")<br>"; 
```

But it echo's:

```
Start Month: 2012-07-01( 1341093600)
End Month: 2012-07-01( 1341093600) 
```

Any idea what I'm doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:52:10.757

Answering whats wrong with the code you posted, you just needed to move your round bracket over a little bit and you had it. :)

```
<?php
$current_month = date("Y-m-01 00:00:00");
$start_month = strtotime(date("Y-m-d", strtotime($current_month . " -1 month")));
$end_month = strtotime(date("Y-m-d", strtotime($current_month . " -1 day")));
echo "Start Month: " . date('Y-m-d',$start_month) . "( " . $start_month . ")<br>";
echo "End Month: " . date('Y-m-d',$end_month) . "( " . $end_month . ")<br>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T06:47:54.810

Try this, (check the manual of `strtotime`)

```
$now = time();
$current_month = date("Y-m-01 00:00:00", $now);
$start_month = strtotime("-1 month", $now);
$end_month = strtotime("-1 second", $now); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:47:58.173

Try something like this:

```
echo date("Y-m-d", mktime(0,0,0,date('m')-1,1,date('y')));
echo date("Y-m-d", mktime(0,0,0,date('m'),0,date('y'))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T06:48:47.793

Seems a little bit oversized, what you (and the other answers :X) tried. It's justs

```
echo date('Y-m-d', strtotime('first day of last month'));
echo date('Y-m-d', strtotime('last day of last month')); 
```

For arbitrary months

```
// 3 months in the past
echo date('Y-m-d', strtotime('first day of -3 months'));
echo date('Y-m-d', strtotime('last day of -3 months'));

// 3 months in the future
echo date('Y-m-d', strtotime('first day of +3 months'));
echo date('Y-m-d', strtotime('last day of +3 months')); 
```

Read more [At the manual](http://php.net/datetime.formats)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T06:58:10.510

```
echo $firstdate= "01/".date('m')."/".date('Y') ;
 $lastdateofmonth=date('t',date('m'));
 echo $lastdate=$lastdateofmonth."/".date('m')."/".date('Y') ; 
```

or

```
$date='2012-06-05 12:00:00';

echo "End = ".date("Y-m-t",strtotime($date)); 
echo "start = ".date("Y-m-01",strtotime($date)); 
```

# mysql - 显示状态像'Qcache%'；即使我启用了查询缓存，变量值仍然为 0

> ID：11407935
> 
> 赞同：0
> 
> 时间：2012-07-10T06:42:10.627
> 
> 标签：mysql, database, performance

当我跑步`SHOW STATUS LIKE 'Qcache%`时，我得到以下结果

```
Variable_name|Value
Qcache_free_blocks|0
Qcache_free_memory|0
Qcache_hits|0
Qcache_inserts|0
Qcache_lowmem_prunes|0
Qcache_not_cached|0
Qcache_queries_in_cache|0
Qcache_total_blocks|0 
```

但是我在 mysql 服务器中启用了所有缓存设置，并且我的查询得到了以下结果`SHOW VARIABLES LIKE '%query_cache%'`；

```
Variable_name|Value
have_query_cache|YES
query_cache_limit|2147483648
query_cache_min_res_unit|4096
query_cache_size|2147483648
query_cache_type|ON
query_cache_wlock_invalidate|OFF 
```

谁能帮我为什么我的 Qcache 值保持为零..？我需要这样做来提高我所有的查询性能。目前我的 innodb 表有 300 万条记录，当我尝试将我的业务逻辑作为存储过程时，我无法从中得到任何响应。此外，我已经更改了 my.conf 文件中所有可能的 innodb 缓冲区值，但速度仍然非常慢。给我一些建议来提高它的性能。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T18:49:19.700

我知道这篇文章很老了，但如果你还没有得到答案，查询缓存不适用于存储过程是这里给出的，大约在第 10 行

> [http://dev.mysql.com/doc/refman/5.6/en/query-cache-operation.html](http://dev.mysql.com/doc/refman/5.6/en/query-cache-operation.html)

# adsense - 尝试使用 4 个小广告获得 728x90 的排行榜，但改为获得 2 行广告

> ID：11407938
> 
> 赞同：1
> 
> 时间：2012-07-10T06:42:23.483
> 
> 标签：adsense

试图通过 4 个小广告获得 728x90 的排行榜，但获得了 2 行广告...帮助！

我正在使用以下代码

```
<script type="text/javascript">
                    google_ad_client = "<?= $googleSettingObj->getString("value") ?>";
                    google_ad_width = 728;
                    google_ad_height = 90;
                    google_ad_format = "728x90_as";
                    google_ad_type = "text_image";
                    google_ad_channel = "<?= $googleSettingObj_Channel->getString("value") ?>";
                    google_color_border = "336699";
                    google_color_bg = "FFFFFF";
                    google_color_link   = "0000FF";
                    google_color_url    = "008000";
                    google_color_text   = "000000";
                </script>
                <script type="text/javascript"
                        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T02:48:35.350

AdSense **does not provide the ability to change the format of the 728x90 unit** for normal accounts. You can set your unit to display text, image, or both, but besides the font, color, and corner style options that are made clearly available, you can't change anything about the text unit. AdSense will fill the unit with one, two, three, or four ads, depending on the results of its ad auction algorithm. It can change from pageload to pageload and user to user also.

# android - 这个 Handler 类应该是静态的，否则可能会发生泄漏：IncomingHandler

> ID：11407943
> 
> 赞同：310
> 
> 时间：2012-07-10T06:42:49.863
> 
> 标签：android, memory-leaks, static-classes, android-lint, android-handler

我正在开发一个带有服务的 Android 2.3.3 应用程序。我在该服务中有这个与主要活动进行通信：

```
public class UDPListenerService extends Service
{
    private static final String TAG = "UDPListenerService";
    //private ThreadGroup myThreads = new ThreadGroup("UDPListenerServiceWorker");
    private UDPListenerThread myThread;
    /**
     * Handler to communicate from WorkerThread to service.
     */
    private Handler mServiceHandler;

    // Used to receive messages from the Activity
    final Messenger inMessenger = new Messenger(new IncomingHandler());
    // Use to send message to the Activity
    private Messenger outMessenger;

    class IncomingHandler extends Handler
    {
        @Override
        public void handleMessage(Message msg)
        {
        }
    }

    /**
     * Target we publish for clients to send messages to Incoming Handler.
     */
    final Messenger mMessenger = new Messenger(new IncomingHandler());
    [ ... ]
} 
```

在这里，`final Messenger mMessenger = new Messenger(new IncomingHandler());`我收到以下 Lint 警告：

`This Handler class should be static or leaks might occur: IncomingHandler`

这是什么意思？

* * *

## 回答 #1

> 赞同：398
> 
> 时间：2012-07-10T07:13:38.647

如果`IncomingHandler`类不是静态的，它将引用您的`Service`对象。

`Handler`同一个线程的对象都共享一个共同的 Looper 对象，它们向该对象发送消息并从中读取。

由于消息中包含 target `Handler`，所以只要消息队列中有带有 target handler 的消息，就不能对 handler 进行垃圾回收。如果处理程序不是静态的，即使在被销毁之后，您的`Service`或`Activity`不能被垃圾收集。

这可能会导致内存泄漏，至少在一段时间内 - 只要消息留在队列中。除非您发布长时间延迟的消息，否则这不是什么大问题。

您可以制作`IncomingHandler`静态并`WeakReference`为您的服务提供：

```
static class IncomingHandler extends Handler {
    private final WeakReference<UDPListenerService> mService; 

    IncomingHandler(UDPListenerService service) {
        mService = new WeakReference<UDPListenerService>(service);
    }
    @Override
    public void handleMessage(Message msg)
    {
         UDPListenerService service = mService.get();
         if (service != null) {
              service.handleMessage(msg);
         }
    }
} 
```

请参阅Romain Guy 的这篇[文章以获取更多参考](http://groups.google.com/group/android-developers/msg/959f98f16a038694?pli=1)

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-02-11T00:55:56.540

正如其他人提到的那样，Lint 警告是因为潜在的内存泄漏。`Handler.Callback`您可以通过在构造时传递 a 来避免 Lint 警告`Handler`（即您没有子类`Handler`并且没有`Handler`非静态内部类）：

```
Handler mIncomingHandler = new Handler(new Handler.Callback() {
    @Override
    public boolean handleMessage(Message msg) {
        // todo
        return true;
    }
}); 
```

据我了解，这不会避免潜在的内存泄漏。`Message`对象持有对对象的引用，`mIncomingHandler`对象持有引用，`Handler.Callback`对象持有对对象的引用`Service`。只要`Looper`消息队列中有消息，`Service`就不会被GC。但是，除非您在消息队列中有长时间延迟的消息，否则这不会是一个严重的问题。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-01-07T18:25:07.773

这是一个使用弱引用和静态处理程序类来解决问题的通用示例（如 Lint 文档中所建议的那样）：

```
public class MyClass{

  //static inner class doesn't hold an implicit reference to the outer class
  private static class MyHandler extends Handler {
    //Using a weak reference means you won't prevent garbage collection
    private final WeakReference<MyClass> myClassWeakReference; 

    public MyHandler(MyClass myClassInstance) {
      myClassWeakReference = new WeakReference<MyClass>(myClassInstance);
    }

    @Override
    public void handleMessage(Message msg) {
      MyClass myClass = myClassWeakReference.get();
      if (myClass != null) {
        ...do work here...
      }
    }
  }

  /**
   * An example getter to provide it to some external class
   * or just use 'new MyHandler(this)' if you are using it internally.
   * If you only use it internally you might even want it as final member:
   * private final MyHandler mHandler = new MyHandler(this);
   */
  public Handler getHandler() {
    return new MyHandler(this);
  }
} 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-04-17T23:16:47.073

这种方式对我来说效果很好，通过将处理消息的位置保持在其自己的内部类中来保持代码清洁。

您希望使用的处理程序

```
Handler mIncomingHandler = new Handler(new IncomingHandlerCallback()); 
```

内部类

```
class IncomingHandlerCallback implements Handler.Callback{

        @Override
        public boolean handleMessage(Message message) {

            // Handle message code

            return true;
        }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-27T13:40:04.987

在@Sogger's answer的帮助下，我创建了一个通用处理程序：

```
public class MainThreadHandler<T extends MessageHandler> extends Handler {

    private final WeakReference<T> mInstance;

    public MainThreadHandler(T clazz) {
        // Remove the following line to use the current thread.
        super(Looper.getMainLooper());
        mInstance = new WeakReference<>(clazz);
    }

    @Override
    public void handleMessage(Message msg) {
        T clazz = mInstance.get();
        if (clazz != null) {
            clazz.handleMessage(msg);
        }
    }
} 
```

界面：

```
public interface MessageHandler {

    void handleMessage(Message msg);

} 
```

我使用它如下。但我不是 100% 确定这是否是安全的。也许有人可以对此发表评论：

```
public class MyClass implements MessageHandler {

    private static final int DO_IT_MSG = 123;

    private MainThreadHandler<MyClass> mHandler = new MainThreadHandler<>(this);

    private void start() {
        // Do it in 5 seconds.
        mHandler.sendEmptyMessageDelayed(DO_IT_MSG, 5 * 1000);
    }

    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
            case DO_IT_MSG:
                doIt();
                break;
        }
    }

    ...

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-07T09:25:08.470

我不确定，但您可以尝试在 onDestroy() 中将处理程序初始化为 null

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-10T03:46:04.780

我很困惑。我发现的示例完全避免了静态属性并使用 UI 线程：

```
 public class example extends Activity {
        final int HANDLE_FIX_SCREEN = 1000;
        public Handler DBthreadHandler = new Handler(Looper.getMainLooper()){
            @Override
            public void handleMessage(Message msg) {
                int imsg;
                imsg = msg.what;
                if (imsg == HANDLE_FIX_SCREEN) {
                    doSomething();
                }
            }
        };
    } 
```

我喜欢这个解决方案的一点是尝试混合类和方法变量没有问题。

# java - 正则表达式 - 不应连续允许空格

> ID：11407944
> 
> 赞同：0
> 
> 时间：2012-07-10T06:42:52.610
> 
> 标签：java, regex, spring

在我的 Web 应用程序中，我有一个文本框，用户应该在其中输入 5 到 200 个字符的字符。

问题是 - 当用户连续输入 5 个空格并保存条目时，它会成功保存。

我应该阻止用户连续输入“空格”（或单独输入空格）。

但我可以允许单个空格（如“客户表”、“客户表”）。

但我可以允许用户输入带有字符的空格。另外我不希望名称以空格开头。

任何人都可以帮我获得上述条件的正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T07:10:35.107

`^\S+(\s\S+)*$`

这个正则表达式应该做你想做的事。它接受以非空白字符开头和结尾的非空字符串，并且单词之间只有一个空格。

您应该单独检查总字符串长度。

请注意，您需要在 Java 中转义 \。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:02:04.997

全部替换`"\\s{2,}"`为`" "`，然后全部替换`"^\\s+|\\s+$"`为`""`（或者如果找到，则搜索并拒绝，具体取决于您的逻辑）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T07:00:12.820

以空格开头或包含超过 2 个连续空格：

```
^\s|\s{2,} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:00:41.530

我建议您创建两个模式一个`^\s`和另一个`\s{2,}`，如果其中一个匹配然后拒绝字符串或者`{2,}`如果您想禁止空格和换行符匹配在一起，但您不应该在那里有一个新行。

# android - 将 DDMS 提供的坐标转换为位置

> ID：11407947
> 
> 赞同：0
> 
> 时间：2012-07-10T06:43:11.920
> 
> 标签：android, eclipse, location, ddms

我正在创建一项服务，该服务将每 5 分钟更新一次用户位置。我正在使用 DDMS 将坐标发送到模拟器。我想转换坐标并找到位置。我怎样才能做到这一点？我是android新手请帮忙。到目前为止，这是我的代码

```
 public class GetLocationService extends Service {
protected LocationManager locationManager;
Button start;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public int onStartCommand(Intent intent, int flags, int startId){
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    LocationListener ll = new MyLocListener();
    Location location = new Location("abc");
    ll.onLocationChanged(location ); 
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, ll);
    return START_STICKY;
}

 private class MyLocListener implements LocationListener {
public void onLocationChanged(Location location) {
    if (location != null) {
    Log.d("LOCATION CHANGED", location.getLatitude() + "");
    Log.d("LOCATION CHANGED", location.getLongitude() + "");
    }
    Toast.makeText(GetLocationService.this,
    location.getLatitude() + "" + location.getLongitude(),
    Toast.LENGTH_LONG).show();

    }
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T07:18:19.910

尝试这个：

```
try{
 Geocoder geo = new Geocoder(youractivityclassname.this.getApplicationContext(), Locale.getDefault());
 List<Address> addresses = geo.getFromLocation(latitude, longitude, 1);
  if (addresses.isEmpty()) {
        yourtextfieldname.setText("Waiting for Location");
  }
  else {
     if (addresses.size() > 0) {       
        Log.d(TAG,addresses.get(0).getFeatureName() + ", 
         " + addresses.get(0).getLocality() +", 
         " + addresses.get(0).getAdminArea() + ",
         " + addresses.get(0).getCountryName());

     }
  }
}
catch (Exception e) {
    e.printStackTrace(); 
} 
```

# android - 如何在没有 Eclipse 的情况下构建 apk 或使用配置文件修改 apk 构建？

> ID：11407948
> 
> 赞同：8
> 
> 时间：2012-07-10T06:43:15.780
> 
> 标签：android, apk

我想从一个 xml 文件构建一个带有一些大型配置的 apk。
我想知道是否有任何方法可以控制 apk 的构建过程，或者有什么方法可以从我们的源代码创建 apk，并根据我们的配置 xml 文件对我们的源代码进行一些修改。或者任何其他构建方式apk 文件

**我不想在应用程序运行时每次都阅读我的配置文件，我想在应用程序本身中包含更改**

所有建议，评论，答案，想法都欢迎提前谢谢.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-14T11:57:18.307

如果您想手动构建您的应用程序：

首先，如果您不了解，您应该真正了解[构建过程](http://developer.android.com/tools/building/index.html)。

> 如果您在 Eclipse 中进行开发，ADT 插件会在您更改源代码时逐步构建您的项目。Eclipse 会自动将 .apk 文件输出到项目的 bin 文件夹中，因此您无需执行任何额外操作即可生成 .apk。
> 
> 如果您在非 Eclipse 环境中进行开发，您可以使用项目目录中生成的 build.xml Ant 文件来构建您的项目。Ant 文件调用自动为您调用构建工具的目标。

一旦您了解了构建过程，您就可以从学习命令开始，以执行构建中涉及的各个步骤。[该文档](http://developer.android.com/tools/projects/projects-cmdline.html)讨论了您可以使用的各种命令。

本[教程](http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html)将`Ant`带您从头到尾了解如何执行自定义构建。

还有几个教程：

*   [文档](http://developer.android.com/tools/building/building-cmdline.html)
*   [http://www.vogella.com/articles/AndroidBuildAnt/article.html](http://www.vogella.com/articles/AndroidBuildAnt/article.html)
*   [http://code.google.com/p/autoandroid/wiki/AndroidAnt](http://code.google.com/p/autoandroid/wiki/AndroidAnt)
*   [http://www.linux-mag.com/id/7667/](http://www.linux-mag.com/id/7667/)
*   [http://www.alittlemadness.com/2010/05/31/setting-up-an-android-project-build/](http://www.alittlemadness.com/2010/05/31/setting-up-an-android-project-build/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T06:54:12.440

您可以使用 Apache Ant 工具。它允许您通过命令而不是使用 Eclipse 来构建应用程序。

[您可以查看该线程](https://stackoverflow.com/questions/6529087/i-want-to-manually-compile-an-android-project-but-i-have-no-idea-how-to-use-ant)中提出的问题和给出的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:30:42.033

我使用 Maven。配置非常困难，但如果您在团队中工作，这是最好的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T01:48:25.370

请参考以下链接。这一步一步地自动化构建 Android 应用程序

[http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html](http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html)

# ms-access - Access 2010：该字段太小，无法接受您尝试添加的数据量 WITHOUT DISTINCT

> ID：11407953
> 
> 赞同：0
> 
> 时间：2012-07-10T06:43:34.607
> 
> 标签：ms-access, ms-access-2010, outer-join

我知道关于此访问错误消息有几个问题，但它们不相关，因为我的查询不使用 DISTINCT 关键字。

我有两个类似的查询，一个包含贷方，另一个包含借方。它们按月份和类别分组。

最终，我希望在这两个表上进行完整的外部联接，以便我可以减去它们以获得每个类别中每个月的结果余额。

但是 Access 不允许完全外连接，所以我需要做一个 Right OUTER UNION LEFT OUTER WHERE Null。

我现在正在尝试在 Month 和 Category ID 字段上进行 RIGHT OUTER 连接。当我在一个字段上进行外部连接时，它按预期工作。当我在另一个字段上执行此操作时，它按预期工作，但是当我加入两个字段时，我得到“该字段太小，无法接受您尝试添加的数据量”

表格1：

![积分查询](../Images/cb0e926bf8d8cac48e4eaf0e1041f4fb.png)

由。。。生产：

```
SELECT [transactions by category].[categoryid]                    AS CategoryID,
       Format([account transactions].[transaction date], "mm/yy") AS MonthYear,
       Nz(SUM([transactions by category].[amount]), 0)            AS
       [Category Total]
FROM   [transactions by category]
       INNER JOIN [account transactions]
               ON [account transactions].[id] =
                  [transactions by category].[transactionid]
WHERE  [account transactions].[transaction type] <> 8
GROUP  BY Format([account transactions].[transaction date], "mm/yy"),
          [transactions by category].[categoryid]; 
```

表 2：

![借记表](../Images/02e378ff23bd2101fd7498492604f323.png)

由。。。生产：

```
SELECT [transactions by category].[categoryid],
       Format([account transactions].[transaction date], "mm/yy") AS MonthYear,
       Nz(SUM([transactions by category].[amount]), 0)            AS
       [Category Total]
FROM   [transactions by category]
       INNER JOIN [account transactions]
               ON [account transactions].[id] =
                  [transactions by category].[transactionid]
WHERE  [account transactions].[transaction type] = 8
GROUP  BY Format([account transactions].[transaction date], "mm/yy"),
          [transactions by category].[categoryid]; 
```

给我错误的右连接：

```
SELECT * FROM
  ((SELECT [transactions by category].[categoryid],
           Format([account transactions].[transaction date], "mm/yy") 
              AS MonthYear,
           Nz(SUM([transactions by category].[amount]), 0) AS [Category Total]
    FROM   [transactions by category]
           INNER JOIN [account transactions]
                   ON [account transactions].[id] =
                      [transactions by category].[transactionid]
    WHERE  [account transactions].[transaction type] = 8
    GROUP  BY Format([account transactions].[transaction date], "mm/yy"),
              [transactions by category].[categoryid]) AS [Category Returns]
RIGHT JOIN 
   (SELECT [transactions by category].[categoryid] AS CategoryID,
           Format([account transactions].[transaction date], "mm/yy") 
               AS MonthYear,
           Nz(SUM([transactions by category].[amount]), 0) AS [Category Total]
    FROM   [transactions by category]
           INNER JOIN [account transactions]
                   ON [account transactions].[id] = 
                      [transactions by category].[transactionid]
    WHERE  [account transactions].[transaction type] <> 8
    GROUP  BY Format([account transactions].[transaction date], "mm/yy"),
              [transactions by category].[categoryid]) AS [Category Debits]

ON [Category Returns].[categoryid] = [Category Debits].[categoryid]
   AND [Category Returns].[monthyear] = [Category Debits].[monthyear] ); 
```

似乎此错误发生在文本字段中。当我使用格式时，MonthYear 字段是否会变为文本字段？即便如此，它也只有 5 个字符长。另外，当我仅在 MonthYear 列上加入时，连接有效，但只有在我同时加入两个字段时才会失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:30:38.030

根据您的标签，您正在使用 SQL 服务器作为后端。您遇到的问题不是来自 MS Access，而是来自 MS Access 和 SQL Server 的组合。该查询将在纯 MS Access 环境中工作。（是的，格式确实转换为文本。）

您可以使用[传递查询](http://support.microsoft.com/kb/303968)来创建使用 SQL Server 语法运行的查询，因此您可以使用完全外连接，或者您可能希望考虑[http://weblogs.sqlteam.com/jeffs/archive/2007/04 /19/全外连接.aspx](http://weblogs.sqlteam.com/jeffs/archive/2007/04/19/Full-Outer-Joins.aspx)

**编辑重新更改标签**

如果您的某个字段是备注字段，请参阅[http://support.microsoft.com/kb/896950](http://support.microsoft.com/kb/896950)。在像这样的复杂查询中，最好将备注字段修剪到 255 或更少。

# objective-c - 向现有动画添加新动画

> ID：11407963
> 
> 赞同：2
> 
> 时间：2012-07-10T06:44:07.757
> 
> 标签：objective-c, ios, cocoa-touch, ipad, cakeyframeanimation

我的应用程序我想将 UIImageView 从默认位置移动到用户点击的位置。但是，如果在完成此动画之前，用户再次点击其他点，则该 imageView 不应该从原始位置开始，而是应该从点击新点后停止动画的点开始。我怎样才能做到这一点。以下是将 imageView 移动到用户点击位置的代码。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

UITouch *touch=[[event allTouches]anyObject];
touchedPoint= [touch locationInView:touch.view];

[imageViews.layer removeAllAnimations];

[UIImageView animateWithDuration:2.0 delay:0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
    [CATransaction begin];        
    CAKeyframeAnimation *pathAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    pathAnimation.duration = 2.0f;
    pathAnimation.calculationMode = kCAAnimationPaced;
    animationPath = [UIBezierPath bezierPath];
    [animationPath moveToPoint:imageViews.center];
    [animationPath addLineToPoint:CGPointMake(touchedPoint.x,touchedPoint.y)];

    pathAnimation.path = animationPath.CGPath;
    pathAnimation.fillMode = kCAFillModeForwards;
    pathAnimation.removedOnCompletion = NO;
    [imageViews.layer addAnimation:pathAnimation forKey:@"animatePosition"];
    [CATransaction commit];

}
completion:nil]; //or completion:^(BOOL) finished { your code here for when the animation ended}];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:55:15.403

改用这个：

```
[UIImageView animateWithDuration:2.0 delay:0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
} completion:nil]; 
```

该`UIViewAnimationOptionBeginFromCurrentState`选项将使动画从图像的当前位置开始。因此，如果您使用另一个动画移动图像，它会很好地融合在一起。

希望这可以帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:25:24.943

1.  定义一个全局CGPoint；
2.  沿着动画开始一个 0.1 秒的步长重复计时器（在用户第一次点击时）。
3.  在每个滴答计数中，读取图像的位置并设置上面定义的 CGPoint。
4.  动画开始后，当用户再次点击时，您会停止上一个动画，并启动另一个动画，使用上面的 CGPoint 作为“moveToPoint”。

如果动画在用户点击更改其方向之前停止，则使计时器无效。

# tridion - 如何在工作流中获取当前组件 TCM id？

> ID：11407966
> 
> 赞同：1
> 
> 时间：2012-07-10T06:44:10.080
> 
> 标签：tridion, tridion-2011

我正在尝试使用下面给出的 VBscript 获取当前组件 TCM id（进入工作流程的组件），但没有获取 Component TCM id（类似于`tcm:56-1567`）

我尝试使用下面的代码，它给出了像`tcm:56-363-131200`

```
processingitem = CurrentWorkItem.ID 
```

并尝试像下面的代码一样，它给出了像`tcm:56-195-131076`

```
processingitem = CurrentWorkItem.ActivityInstance.ProcessInstance.ID 
```

并尝试像下面的代码，它没有给出任何东西。

```
processingitem = CurrentWorkItem.GetItem()
processingitem = CurrentWorkItem.GetItem(2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T06:52:36.627

应该是：`CurrentWorkItem.GetItem(2).ID`。它给你带来了什么？

# r - 泊松回归线

> ID：11407967
> 
> 赞同：3
> 
> 时间：2012-07-10T06:44:10.190
> 
> 标签：r, regression, poisson

如何在绘图中添加泊松回归线？我尝试了以下方法，但 abline 功能不起作用。这是因为 abline() 使用截距和斜率，而泊松回归线使用对数链接。

```
x = rpois(12, 5) 
plot(x, axes = F)
axis(1,at=1:length(month.name), labels = month.name)
axis(side = 2)
y = c(1:12)
poislm = glm(x~y, family=poisson)
abline(poislm) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T07:00:32.803

[从 R-help](https://stat.ethz.ch/pipermail/r-help/2004-April/049102.html)怎么样

```
predProbs<-predict(poislm,data.frame(y=seq(min(y), max(y), length.out=100)), type="response")
lines(seq(min(y), max(y), length.out=100), predProbs, col=2, lwd=2) 
```

# automation - 在 Testopia 中标记测试用例状态

> ID：11407972
> 
> 赞同：1
> 
> 时间：2012-07-10T06:44:34.187
> 
> 标签：automation, automated-tests, bugzilla

我需要根据自动化测试用例的结果在 Testopia 中标记自动化测试用例。我怎样才能做到这一点？我有 testopia API 代码，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T06:35:53.523

Jenkins v1.1 的 Testopia 插件现已推出。这个 wiki 解释了它是如何工作的：

[https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:15:35.963

我使用了 Testopia contrib 目录中的 perl 示例。我从一个 shell 脚本调用它，这会更新测试用例的状态。

最近我参与了一个项目，为 Jenkins 开发一个插件来做同样的事情。

[https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Testopia+Plugin)

# wpf - 使用 Textbox-Item 设置 WPF 组合框的样式

> ID：11407978
> 
> 赞同：0
> 
> 时间：2012-07-10T06:44:50.460
> 
> 标签：wpf, combobox, textbox, styles

我有一个组合框。每个项目由一个标题和一个描述组成。![带有标题和描述的项目](../Images/2cb8653962caeb8deb47c440efade0f6.png)

我想在第二项中使用一个文本框。这很好用。;) ![在此处输入图像描述](../Images/a684ad8f562f6efe4bbc1c9eae928923.png)

现在我想问（因为带有文本框的项目高于所有其他项目），是否有可能如果选择的项目（带有文本框）不显示文本框，只显示内容作为字符串？

![在此处输入图像描述](../Images/39716fdec9b1d24a79cd3fe7522a97b7.png)

```
<ComboBox Height="35" Margin="0 2 0 2" SelectedIndex="0">
    <ComboBoxItem>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Image Source="/WpfApplication14;component/Resources/Icon1.ico" Height="22" Width="22" Grid.Column="0" HorizontalAlignment="Left" />
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="16" MinHeight="16" MaxHeight="16" />
                    <RowDefinition Height="16" MinHeight="16" MaxHeight="16" />
                </Grid.RowDefinitions>
                <TextBlock Text="Item Titel 1" Grid.Row="0" FontWeight="Bold" />
                <TextBlock Text="Item Beschreibung 1" Grid.Row="1" FontStyle="Italic">
                    <TextBlock.TextEffects><TextEffect Foreground="#FF555454" /></TextBlock.TextEffects>
                </TextBlock>
            </Grid>
        </Grid>
    </ComboBoxItem>
    <ComboBoxItem>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Image Source="/WpfApplication14;component/Resources/Icon2.ico" Height="22" Width="22" Grid.Column="0" HorizontalAlignment="Left" />
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="16" MinHeight="16" MaxHeight="16" />
                    <RowDefinition Height="24" MinHeight="24" MaxHeight="24" />
                </Grid.RowDefinitions>
                <TextBlock Text="Item Titel 2" Grid.Row="0" FontWeight="Bold" />
                <TextBox Grid.Row="1">
                    <TextBox.Text>c:\temp\test</TextBox.Text>
                    <TextBox.Style>
                        <Style>
                            <Setter Property="TextBox.Height" Value="20"/>
                        </Style>
                    </TextBox.Style>
                </TextBox>
            </Grid>
        </Grid>
    </ComboBoxItem>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:15:53.857

您可以通过使用 TextBox 来编辑文本（就像您所做的那样）和 TextBlock 在选择项目时显示文本来实现这一点。

您可以通过将它们的 Visibility 绑定到 ComboBoxItem 的 IsSelected 值来显示/隐藏 TextBlock/TextBox，并使用 ValueConverter 将 true/false 值转换为 Visible/Collapsed。

我在这里对您的代码进行了一些编辑，以使其更简单：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <ComboBox Name="myComboBox" Margin="0 2 0 2" SelectedIndex="0" Grid.Row="1">
        <ComboBoxItem>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="16" MinHeight="16" MaxHeight="16" />
                        <RowDefinition Height="16" MinHeight="16" MaxHeight="16" />
                    </Grid.RowDefinitions>
                    <TextBlock Text="Item Titel 1" Grid.Row="0" FontWeight="Bold" />
                    <TextBlock Text="Item Beschreibung 1" Grid.Row="1" FontStyle="Italic" Foreground="#FF555454" />
                </Grid>
            </Grid>
        </ComboBoxItem>
        <ComboBoxItem Name="myComboBoxItem">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="16" MinHeight="16" MaxHeight="16" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <TextBlock Text="Item Titel 2" Grid.Row="0" FontWeight="Bold" />

                    <TextBox Grid.Row="1" Name="myTextBox" Text="c:\temp\test" Height="20" Visibility="{Binding ElementName=myComboBoxItem, Path=IsSelected, Converter={ValueConverter:BooleanToVisibilityConverter}}" />
                    <TextBlock Name="myTextBlock" Text="{Binding ElementName=myTextBox, Path=Text}" Grid.Row="1" FontStyle="Italic" Foreground="#FF555454" Visibility="{Binding ElementName=myComboBoxItem, Path=IsSelected, Converter={ValueConverter:BooleanToVisibilityConverter}, ConverterParameter=Inverted}" />
                </Grid>
            </Grid>
        </ComboBoxItem>
    </ComboBox>
</Grid> 
```

ValueConverter 的代码：

```
public abstract class BaseConverter : MarkupExtension
{
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }
}

public class BooleanToVisibilityConverter : BaseConverter, IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {

        if (parameter != null && parameter.ToString().Equals("Inverted"))
        {
            if ((bool)value)
                return Visibility.Visible;
            return Visibility.Collapsed;
        }
        if ((bool)value)
            return Visibility.Collapsed;
        return Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        try
        {
            if (parameter.ToString().Equals("Inverted"))
                return (Visibility)value != Visibility.Visible;
            return (Visibility)value == Visibility.Visible;
        }
        catch (Exception e)
        {
            // Error handling
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T08:16:05.137

代替：

```
 <TextBox Grid.Row="1">
            <TextBox.Text>c:\temp\test</TextBox.Text>
            <TextBox.Style>
                <Style>
                    <Setter Property="TextBox.Height" Value="20"/>
                </Style>
            </TextBox.Style>
        </TextBox> 
```

和：

```
 <TextBox Grid.Row="1" Text="c:\temp\test" Height="20" BorderThickness="0" Padding="0" /> 
```

但你仍然会有一个问题：

你的组合框是 35 像素高：

```
<ComboBox Height="35" Margin="0 2 0 2" SelectedIndex="0"> 
```

但你的 ComboBoxItem 是 16 + 24 = 40 像素高：

```
 <Grid.RowDefinitions>
                <RowDefinition Height="16" MinHeight="16" MaxHeight="16" />
                <RowDefinition Height="24" MinHeight="24" MaxHeight="24" />
            </Grid.RowDefinitions> 
```

所以无论如何它都会被截断。要么让你的 comboBox 更大，要么让你的 comboBoxItem 更小。

旁注：您不需要对文本块的前景使用文本效果：

```
 <TextBlock Foreground="#FF555454" /> 
```

也可以

# java - java中的多线程Web应用程序

> ID：11407982
> 
> 赞同：0
> 
> 时间：2012-07-10T06:45:20.673
> 
> 标签：java, multithreading, jsp

我正在做一个 Web 应用程序，它以 Java 作为前端，以 shell 脚本作为后端。这个概念是我需要在后端处理多个文件。我将从用户那里获取日期范围（例如从 7 月 1 日至 8 日），并且每天处理大约 100 个文件。所以我总共有 800 个文件要处理。

我将从 JSP 获取这些详细信息，并将后台调用委托给 shell 脚本，然后取回结果并将其显示给用户。

现在我以顺序方法完成所有这些 - 我的意思是没有线程。所以只有一个主线程在执行，用户必须等到 800 个文件被顺序处理。然而，这真的很慢。正因为如此，我正在考虑寻找线程。由于我是线程的初学者，因此我阅读了一些有关此的内容，并提出了以下想法：

> 当我阅读线程工作必须拆分时.. 我想将 8 天的工作拆分为 4 个线程，每个线程将执行 2 天的工作

我想知道我是否遵循正确的方法，我主要担心的是：

1.  是否建议从 Web 应用程序生成多个线程
2.  这是否是一个好方法

有关如何进行此操作的一些指导。一个例子会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T06:55:07.093

是的，您可以在多线程或任何高性能环境中运行长处理作业。您还应该使用 Servlet 3.0 异步请求处理来暂停请求线程并等待 Long 处理任务完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:26:43.653

在 Web 应用程序中创建线程不是一个好的解决方案。这是一个糟糕的设计，因为通常它是负责该活动的容器（Web 服务器）。所以我认为你必须找到另一个解决方案。

我建议您将 shell 脚本放在 cron 中，安排为每分钟运行一次，并“激活”它们，您可以触摸充当信号量的文件。在每次运行时，脚本都会验证 Web 应用程序是否接触了信号量文件，如果是，它们会从这些文件中读取日期间隔，然后开始处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:44:40.000

改善用户体验的方法不是在 Servlet 级别上并行化 100000 个线程，而是提供视图的增量渲染。首先，例如根据 MVC 模式，将应用程序分成多个层会很有用。

这么说，你将不得不看看如何

*   创建一个能够返回部分答案和最后一个答案的服务，这意味着所有可用数据都已返回。每个答案都可以并行计算以提高性能。

*   以增量方式填充网页，通常通过回调此服务来返回您用来向 DOM 添加数据的 JSON 字符串。每次获得答案时，如果这是部分答案，则再次调用提供先前序列号的服务。

如果您向 Liligo 了解，您将了解这是如何工作的。我描述的技术称为轮询，但还有其他技术可以在 UI 级别获得类似的异步结果。通常，您不想直接使用 Servlet API，这是一个非常低级的 API，而是为此使用合理的框架或抽象。

如果你想要一个温暖的建议，你应该看看 Play！框架[http://www.playframework.org/documentation/2.0.2/JavaStream](http://www.playframework.org/documentation/2.0.2/JavaStream) HTTP 流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T07:23:17.693

1.  是的，从 Web 应用程序生成多个线程并没有错。事实上，如果您正在运行一个 Servlet 容器（很可能是因为您使用的是 Java），那么它已经为您生成了多个线程。一般来说，Servlet 容器会自动生成一个新线程（或从池中重用一个）来处理它接收到的每个请求。

2.  您的方法很好，认为您需要根据系统的硬件配置和 Web 服务上的并发负载量将线程数微调为合适的值。另请注意，虽然启动一堆线程会减少处理所有数据所需的总时间，但在任何数据准备好返回给用户之前，它仍然会留下潜在的大量时间。因此，您可以通过按顺序执行较小的工作单元并在每批结果准备好后立即将其发布到用户界面来获得更好的结果。然后，用户仍然需要很长时间才能获得所有数据，但几乎可以立即开始查看其中的至少一部分。

# visual-studio-2012 - “查找和替换”文本框包含光标

> ID：11407986
> 
> 赞同：20
> 
> 时间：2012-07-10T06:45:55.280
> 
> 标签：visual-studio-2012

上下文，在 VS2012 (rc) 中查找和替换“窗口”

任何人都知道如何改变行为或找回旧的查找和替换？

当您在新的“查找和替换”中执行搜索时，您可以按 F3 循环浏览结果（与旧行为相同）。但是，您必须单击 ESC 才能将活动光标位置放在代码中。使用旧设置（如果您有搜索窗口自动关闭），光标已经在代码中。在不按 ESC 的情况下按下会请求打开搜索历史下拉列表。

基本上，我只想要旧的搜索窗口，它工作得很好。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T15:23:29.113

不，这是新的搜索框，旧的基本不再可用了。你可以做什么它在[Connect](https://connect.microsoft.com/VisualStudio/Feedback)站点上提交一个错误报告，但老实说它可能会被忽略，因为 MS 认为可用性对于这个新版本的 Visual Studio 并不重要（以我自己的拙见）

祝你好运！

作为替代方案，我想你可以做一个重复之前行为的扩展（就像我为我的所有宏所做的那样），但这有点过分了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-26T20:19:35.430

如果您点击 Ctl-Shift-F 或 Ctl-Shift-H，您将打开“在文件中查找/替换”对话框，这与 Visual Studio 2010 非常相似。即使它显示“在文件中查找”，您也可以选择在选定文本和当前文档中搜索。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-21T18:43:17.003

根据上面的信息，我进入了工具/选项/环境/键盘并切换了`Ctrl+F`和`Ctrl+Shift+F`热键。

然后我将“查找和替换”窗口拖到右侧并将其停靠为一个选项卡（*连同解决方案资源管理器、属性等*），因为我还没有找到在开始搜索后自动关闭它的方法。

我现在可以将光标放在文档中的任何位置，按`Ctrl+F`，输入我的条件，然后按`F3`开始搜索。

重复`F3`'s，即使在移动光标之后，表现得就像过去一样！（但正如 bobobobo 所提到的，如果您不小心使用*而不是**:(*）*开始搜索，请准备好诅咒`ENTER``F3`*

# ajax - AJAX 加载器在新内容加载之前不会停留

> ID：11407988
> 
> 赞同：0
> 
> 时间：2012-07-10T06:46:01.530
> 
> 标签：ajax, jquery

我正在使用 AJAX 功能来使我的 WordPress 页面实时加载。我使用以下方法使其实时加载

`var toLoad = $(this).attr('href')+' #container';
$('#container').slideUp('300',loadContent);
$('#load').remove();
$('#wrapper').append('<span id="load">LOADING...</span>');
$('#load').fadeIn('normal');
window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
function loadContent() {
$('#container').load(toLoad,'',showNewContent())
}
function showNewContent() {
$('#container').slideDown('400',hideLoader());
}
function hideLoader() {
$('#load').fadeOut('normal');
}
return false;`

我面临的问题是加载...文本出现半秒，旧内容再次出现..然后在 4-5 秒后，它只是用旧内容替换新内容。我怎样才能保持加载文本直到内容完全加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:50:52.760

问题对我来说不是很清楚，

但，

```
$('#container').load(toLoad,'',showNewContent()) 
```

应该改为

```
$('#container').load(toLoad,'',showNewContent) 
```

和，

```
$('#container').slideDown('400',hideLoader()); 
```

至

```
$('#container').slideDown('400',hideLoader); 
```

我们传递函数引用（我们不调用它们）

另外，我认为没有任何`.fadeIn('normal')`.

这将是`.fadeIn('slow')`或者`.fadeIn('fast')`

还，

在此之后的行

```
$('#container').slideUp('300',loadContent); 
```

不要等待动画完成。他们立即被呼叫。

我想，你会希望他们`loadContent`发挥作用

# python - 使用 grid_forget Tkinter 删除部分帧

> ID：11407991
> 
> 赞同：0
> 
> 时间：2012-07-10T06:46:21.397
> 
> 标签：python, user-interface, tkinter, pack, ttk

我使用以下代码删除了我的框架的一部分（希望删除当前显示的框数 - 这可能会有所不同）：

```
for i in xrange(self.number_boxes):

    self.box[i].grid_remove()
    self.choice_title.grid_remove() 
```

然而，我最终得到以下结果：

![桌子](../Images/3f68f379dfd14b7588306275e12edbed.png)

我做错了什么被卡在主窗口的最后一部分呆在那里？！

我有一个根窗口，然后是一个主窗口“win1”，其中一个框架“frame_table”包含所有表格。背景设置为黑色。

更新：对应于 OptionMenu 中的更改选项：

我没有创建单独的框架，而是在当前框架“frame_table”中创建了一组输入框。选择“列表”选项时，用户输入要创建的框数量。使用另一个选项，它总是创建 2 个框。使用“固定”值，所有框都需要删除，因为不需要额外的框。

因此，如果从“列表”转到“菜单中的其他选项（未固定）”，则需要在创建新框之前删除“列表”选项中的框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:51:06.743

成语：

```
for i in xrange(self.number_boxes):

    self.box[i].grid_remove()
    self.choice_title.grid_remove() 
```

在 python 中应该很少需要。也许您没有看到您的盒子被删除，因为您`self.number_boxes`的不正确（也许您忘记在某处更新它）。一个更好的方法是：

```
for box in self.boxes:
    box.grid_remove()
else:
    self.choice_title.grid_remove() 
```

这可能（或可能不会）解决您的问题。

# c# - 捕获 Web 浏览器控件的鼠标右键单击事件

> ID：11407992
> 
> 赞同：5
> 
> 时间：2012-07-10T06:46:24.853
> 
> 标签：c#, winforms, webbrowser-control

当用户右键单击我的网络浏览器控件时，我想全选。

我正在开发一个 win forms 应用程序，并使用网络浏览器来显示我的信息，因为我可以使用 html 来设置文字样式。

右键单击上下文菜单对我不起作用。它上面的选项都与我的应用程序无关。

但是我想保留选择后的上下文菜单，复制，剪切，粘贴选项。

我已经可以全选了：

```
getCurrentBrowser().Document.ExecCommand("SelectAll", true, null); 
```

我只想在网络浏览器的右键单击事件中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T07:19:28.430

处理`MouseDown`事件：

```
webBrowser.Document.MouseDown += new HtmlElementEventHandler(Document_MouseDown); 
```

并确保用户按下*Right button*，然后全选：

```
void Document_MouseDown(object sender, HtmlElementEventArgs e)
{
    if(e.MouseButtonsPressed == MouseButtons.Right)
    {
        webBrowser.Document.ExecCommand("SelectAll", true, null);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T07:13:04.357

[本文](http://www.codeproject.com/Articles/3219/Component-Based-Development-with-Visual-C)展示了如何将 Web 浏览器的上下文菜单替换为您自己的。

或者，如果您在 Web 浏览器中执行以下 Javascript，它将禁用默认的右键单击上下文菜单：

```
 document.oncontextmenu=new Function("return false") 
```

如果您使用的是 WinForms 而不是 WPF，则可以将 设置`IsWebBrowserContextMenuEnabled`为 false 以阻止 IE 上下文菜单，在这种情况下，它将使用您在 WebBrowser 控件上提供的 ContextMenu。

WPF 没有在 Web 浏览器上公开相同的属性，所以它可能不是那么容易。在这种情况下，您可能必须使用`WindowsFormsHost`在 WPF 中托管 WinForms Web 浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T07:16:05.437

This works :)

When the context menu shows select all is running pushing out the contextmenu i want, with the copy, paste, cut and so on.

```
private void webCompareSQL_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (webCompareSQL.Document != null)
            {
                webCompareSQL.Document.ContextMenuShowing += DocMouseClick;
            }
        }
        void DocMouseClick(object sender, HtmlElementEventArgs e)
        {
            webCompareSQL.Document.ExecCommand("SelectAll", true, null);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T17:41:32.637

您需要确保已加载 WebBrowser.Document 属性。然后就可以注册鼠标事件了。

```
`browser.DocumentCompleted += (s, e) => {
                             browser.Document.MouseMove += (sM, eM) +=> {
                                                          Debug.WriteLine(eM.ClientMousePosition.X);
                                                                        };
                                       };
`

```

# c# - 如何确保变量设置为一个值，并且如果在 catch 块中测试它可以

> ID：11407993
> 
> 赞同：1
> 
> 时间：2012-07-10T06:46:26.887
> 
> 标签：c#

我正在编写一个概念证明，其中有一个简单的要求，我加载一个帐户，进行 Web 服务调用以启动付款，如果成功则更新帐户余额。

以下代码的目的是确保在 Web 服务调用成功从客户的银行中取款但由于并发问题而无法保存帐户的情况下完成一些逆转。但是，我有一个奇怪的问题，即使响应成功，**catch 块中的 if 测试**返回 false 并重新抛出异常？

**编辑开始：**

如果`response.IsSuccessful`是`true`并且`ConcurrencyException`发生`accountService.Save(account)`在行，不`currentStatus`应该等于**WEBSERVICE_SUCCESSFUL**吗？

**编辑结束：**

这是一个 Web 应用程序，对**Process()**的调用由前端触发。我错过了什么明显的东西吗？任何帮助将非常感激。

```
function void Process(Account account, string param1, decimal param2) {
    string currentStatus = "START";
    try
    {
        log("Begin web service call"); 
        var response = webservice.Call(param, param2);
        log("End web service call");

        if(response.IsSuccessful)
        {
           currentStatus = "WEBSERVICE_SUCCESSFUL";
             //update account balance 
             accountService.Save(account);
        }
        else
           {
            // do something else
           }
    }
    catch (ConcurrencyException ex)
    {
        log("Error concurrency..");
        if( currentStatus == "WEBSERVICE_SUCCESSFUL")
            //do reversal 
        else
           throw ex;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:00:02.220

本质上，您正在寻找一个**Transaction**。您应该查看*专门为此类问题设计的*[System.Transactions()](http://msdn.microsoft.com/en-us/library/ms973865.aspx)命名空间。

 *例如，当您的服务器在付款和更新余额之间的确切时间点崩溃时，会发生什么情况？

使用[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)类不仅可以让您自己抽象处理事务，而且它会自动升级为由[MSDTC](http://en.wikipedia.org/wiki/Distributed_Transaction_Coordinator)（如果可用）管理，这将处理诸如此类的服务器崩溃。

下面的所有内容（例如异常）也将自动回滚事务。

查看[编写事务应用程序](http://msdn.microsoft.com/en-us/library/ms229973.aspx)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T09:15:56.483

除了 Ta Quans 的回答 - 可能值得同时捕获两个级别的异常，因为您的异常处理程序似乎特定于并发问题：

例如

```
 try 
    { 
       some code....
    }
    catch (ConcurrencyException ex) 
    { 
        log("Error concurrency.."); 
        if( currentStatus == "WEBSERVICE_SUCCESSFUL") 
            //do reversal  
        else 
           throw; 
    } 
    catch (Exception ex) 
    {
        log("Some other error: " + ex.Message);

        if( currentStatus == "WEBSERVICE_SUCCESSFUL") 
            //do reversal  
        else 
           throw; 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T08:42:03.630

`accountService.Save(account)`函数可能会抛出另一个异常，catch 块没有捕获它们。在这种情况下，尝试替换`ConcurrencyException`为`Exception`*

# java - 在 gmail sso 上需要帮助

> ID：11407995
> 
> 赞同：2
> 
> 时间：2012-07-10T06:46:32.800
> 
> 标签：java, struts2, gmail, single-sign-on

我正在使用 strut2 框架开发一个 Web 应用程序，并使用 gmail 凭据登录该应用程序。我能够成功使用谷歌帐户服务登录。现在我正在尝试在 gmail 和我的应用程序之间实现 SSO。用例是“如果用户已经登录到 gmail，我希望该用户自动登录到我的应用程序”。我应该怎么做？

# php - PHP - 删除部分字符串？

> ID：11407996
> 
> 赞同：2
> 
> 时间：2012-07-10T06:46:48.627
> 
> 标签：php, string, explode

我有以下结构的字符串：

```
AAA-BBB-CCC or 
BBB-CCC or
CCC-DDD 
```

我想从这些字符串中删除第一部分。

**结果**

```
BBB-CCC
CCC
DDD 
```

我可以在没有“爆炸”的情况下做到这一点吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T07:22:41.280

你可以使用这样的东西：

```
$str = "AAA-BBB-CCC";
$str2 = explode("-", $str);
array_shift($str2);
$str = implode("-", $str2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:50:42.253

如果您总是要删除 4 个字符，请尝试此代码

```
$string= substr( $your_string, 4 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T06:50:53.977

是的，只需像这样使用[strpos](http://de2.php.net/manual/en/function.strpos.php)和[substr](http://de2.php.net/manual/en/function.substr.php)：

```
$string = substr($string, strpos($string, '-')); 
```

这首先切割`-`- 如果零件总是相同的长度，那就更容易了：

```
$string = substr($string, 4); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T06:53:08.843

如果您的字符串没有定义长度，您可以使用正则表达式。

```
$str = "AAA-BBB-CCC";
preg_match('/^.+?-(.+)/', $str, $results);
var_dump($results); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T06:59:42.690

```
$str = "
AAA-BBB-CCC
BBB-CCC
CCC-DDD
";

$str = preg_replace('/^([A-Z]{3}\-)/m', '', $str);
var_dump($str); 
```

这行得通。如果它超出您的示例字符串，只需稍微修改正则表达式以适合您的格式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T06:50:32.247

如果第一部分总是四个字母，你可以使用这个：

```
$newString = substr($str, 4); 
```

# c++ - Pragma omp 并行部分

> ID：11407998
> 
> 赞同：0
> 
> 时间：2012-07-10T06:46:50.443
> 
> 标签：c++, openmp

我可以使用 pragma omp 并行部分来解决我的代码的两个并发部分，它们通过其地址调用相同的函数吗？

在这种情况下，被调用的函数是否具有两个线程的公共变量，因此没有发生加速？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:48:59.453

> 我可以吗 …？

是的。

> 在这种情况下，被调用的函数是否具有两个线程的公共变量，因此没有发生加速？

唔？该函数中的局部变量是*线程*的局部变量。无论您是通过其地址还是直接调用它都无关紧要。只有当函数修改全局状态时才会出现问题。