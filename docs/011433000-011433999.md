# StackOverflow 问答 11433000-11433999

# css - 不透明度仅应用于背面颜色而不应用于文本

> ID：11433006
> 
> 赞同：1
> 
> 时间：2012-07-11T12:48:22.397
> 
> 标签：css

我希望在某些文本中具有不透明度的背景颜色，但是我希望不透明度仅在背景颜色上。在我的示例中，不透明度适用于颜色和背面。我怎样才能保持不透明度只对背景颜色？

[http://jsfiddle.net/YA7Sw/](http://jsfiddle.net/YA7Sw/)

```
 <div class="col left">
            <p class="last"><span class="back" >here goes some text</span></p>
        </div>

p.last {
    color: #000000;
    font-family: helvetica,arial,sans-serif;
    font-size: 10px;
    font-weight: normal;
    line-height: 17px;
    margin-bottom: 17px;
}

.back { padding:5px;background-color:#893409;opacity:0.3; }​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T12:51:09.743

不要设置跨度的不透明度，只需使用[rgba 表示法](http://www.w3.org/TR/css3-color/#rgba-color)设置背景颜色的 alpha ：

```
.back { padding:5px;background-color:rgba(137, 52, 9, 0.3); }​ 
```

演示：http: [//jsfiddle.net/hRzMa/](http://jsfiddle.net/hRzMa/)

请注意，您可能希望将其添加到`p`，而不是`span`.

段落演示：http: [//jsfiddle.net/9gqYn/](http://jsfiddle.net/9gqYn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:52:06.957

听起来您想使用透明背景。尝试这样的事情：

```
p.last
{
    background: rgb(54, 25, 25); /* Fall-back for browsers that don't support rgba */
    background: rgba(54, 25, 25, .5);
} 
```

[http://jsfiddle.net/ashwyn/MDcq2/](http://jsfiddle.net/ashwyn/MDcq2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:08:44.703

这将解决您的问题。只使用 rgba

```
<p class="last"><span class="back" >here goes some text</span></p>
</div>
<style>
p.last {
color: #000000;
font-family: helvetica,arial,sans-serif;
font-size: 10px;
font-weight: normal;
line-height: 17px;
margin-bottom: 17px;

 }

 .back { padding:5px;
background-color: rgba(180,38,22, 0.2); }​
 </style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T12:54:59.540

加入css `background-color:rgba(137, 52, 9, 0.3);`。`p.last`

见演示：http: [//jsfiddle.net/akhurshid/YA7Sw/12/](http://jsfiddle.net/akhurshid/YA7Sw/12/)

**注意：rgba 取 0 - 255 之间的整数值**

# c# - 转换列中的行

> ID：11433008
> 
> 赞同：0
> 
> 时间：2012-07-11T12:48:25.477
> 
> 标签：c#, asp.net-mvc, nhibernate

我正在使用 NHibernate 开发一个 asp.net mvc 应用程序，我有一个查询，我想知道如何转换列中的行？

我有一个动态系统，其模型如下：

```
// It's a kind of metadata
public class Field
{
   public virtual long Id { get; set; }
   public virtual string Name { get; set; }
}

// the value is here with respective field
public class FieldValue
{
   public virtual long Id { get; set; }
   public virtual Field Field { get; set; }
   public virtual string Value { get; set; }
} 
```

我想知道如何获得列是 Field 对象而值是 FieldValue 对象的结果，我应该创建一个 ViewModel 吗？或者用 asp.net mvc 做的方法？

我可以进行查询以获得如下结果：

![在此处输入图像描述](../Images/c3f49e63ed068ca0c286673cedcac3a6.png)

但我想做一个这样的查询（或者一种在我的视图上创建结果的方法 asp.net mvc）：

![在此处输入图像描述](../Images/20b88303b9ccb7695f3c7fe6d2299999.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:08:34.473

我认为您将需要了解/熟悉 GroupBy()。如果您按字段分组，您将“分组”一个字段的所有值，然后移动到下一个。伪代码将类似于以下内容

```
@model IEnumerable<FieldValue>

foreach(var fields in Model.GroupBy(x=>x.Field.Name){
    <h2>fields.key</h2>
    <ul>
        foreach(var fieldValue in fields){
             <li>@fieldValue.Value</li>
        }
    </ul>
} 
```

这应该呈现类似

**字段 1**

*   一些值 1
*   一些价值 2

**字段 2**

*   一些价值 3
*   一些价值 4

等等

通过使用这种方法，您可以控制想要获得所需输出的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:54:29.253

不清楚这个问题。如果您想将行转换为列 - 您可以使用数据透视。但我建议不要对结果集进行转置，而是让它返回转置的结果集。我的意思是在查询本身中处理行到列的转换

# android - Android 中 ArrayList 项中的替代颜色

> ID：11433010
> 
> 赞同：1
> 
> 时间：2012-07-11T12:48:26.283
> 
> 标签：android, listview, arraylist, background-color

我想要动态生成的 ArrayList 项目使用不同的颜色。我不想用 getView() 的 setBackgroundColor() 方法来做，因为我已经用 onListItemClick() 实现了我的整个应用程序。所以还有其他方法可以做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:57:59.853

您可以创建一个自定义适配器并在 getView 方法中获取背景布局的参考并设置您的颜色。确保它会生成随机颜色，因为每一行 getView() 都会被调用。作为它的随机颜色，您将获得所需的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:11:49.130

查看这些链接，它将帮助您...

[Android：使用 ArrayAdapter 在 ListView 中替换颜色](https://stackoverflow.com/questions/10510910/android-alternate-colors-in-listview-using-arrayadapter)

[http://emumair.wordpress.com/2011/09/26/creating-an-alternate-colored-list-view-in-android/](http://emumair.wordpress.com/2011/09/26/creating-an-alternate-colored-list-view-in-android/)

[http://eureka.ykyuen.info/2010/03/15/android-%E2%80%93-applying-alternate-row-color-in-listview-with-simpleadapter/](http://eureka.ykyuen.info/2010/03/15/android-%E2%80%93-applying-alternate-row-color-in-listview-with-simpleadapter/)

[http://dustinbreese.blogspot.in/2009/12/creating-listview-with-alternating.html](http://dustinbreese.blogspot.in/2009/12/creating-listview-with-alternating.html)

# image-processing - 如何自动将交互式图表中的数据读出到表格中？

> ID：11433012
> 
> 赞同：1
> 
> 时间：2012-07-11T12:48:33.787
> 
> 标签：image-processing, web-scraping, interactive

最近，越来越多的交互式图表出现在网络上。看看下面的一个：

[http://www.finanzen.net/zertifikate/zertifikate_emittenten_detail.asp?inEmNr=47](http://www.finanzen.net/zertifikate/zertifikate_emittenten_detail.asp?inEmNr=47)

**我的问题**
是否有可能自动将数据读出到表格中？是否有一些工具可用，因为我在源代码中找不到数据？应该有一个解决方案，因为如果您指向曲线，您将获得所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:13:12.527

如果您使用 linux，您可以使用该工具`[espeak][1]`。这是一个命令行工具，它需要纯文本作为输入，它会读取它的负载。因此，如果您可以将数据安排为纯文本，这是可能的。

# tridion - 如何使用 C# TBB 从内容管理器发布图像文件夹？

> ID：11433013
> 
> 赞同：-1
> 
> 时间：2012-07-11T12:48:37.643
> 
> 标签：tridion

我想将我的所有图像从内容管理器中的文件夹之一移动到服务器上的文件夹之一，如何使用 C# TBB 来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T13:01:34.387

在 SDL Tridion World 上，您可以找到一组有用的模板构建块，其中包含解决方案：[http ://sdltridionworld.com/community/extension_overview/useful_tbbs.aspx](http://sdltridionworld.com/community/extension_overview/useful_tbbs.aspx)

请参阅 #5：获取 CSS 图像 - 发布特定 CMS 文件夹中的所有图像。

这是该解决方案的代码片段，只是为了了解它是如何完成的。

```
Filter filter = new Filter();
filter.Conditions["ItemType"] = ItemType.Component;
filter.Conditions["Recursive"] = false;
foreach (Component img in folder.GetItems(filter))
{
    if (img.ComponentType == ComponentType.Multimedia)
    {
        string filename = Utilities.GetFilename(img.BinaryContent.Filename);
        Item item = package.GetByName(filename);
        bool push = true;
        if (item != null)
        {
            Logger.Debug("An item with the same name exists in the package");
            KeyValuePair<string, string> pair = new KeyValuePair<string,string>("TCMURI", img.Id.ToString());
            if (item.Properties.Contains(pair))
            {
                Logger.Debug("An item with the same uri exists in the package, we will not push it twice to the package.");
                push = false;
            }
        }
        if(push)
        {
            Logger.Debug(String.Format("Pushing item {0} to the package", filename));
            package.PushItem(filename, package.CreateMultimediaItem(img.Id));
        }
    }
} 
```

您也可以调用 AddBinary 并指定您希望它也发布的结构组，而不是将项目推入包中并允许它通过默认完成操作发布。

```
Engine.PublishingContext.RenderedItem.AddBinary(img, structureGroup); 
```

有关更多详细信息，请参阅 TOM.NET API 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:06:08.517

有几种方法可以做到这一点：

1）静态发布，即创建一个结构组（即服务器上将创建的文件夹）并在里面创建一个页面。您的页面将需要一个元数据模式，该模式采用多阀多媒体组件链接，以便您可以将图像添加到页面的元数据中。您需要为此页面构建一个页面模板，该模板将具有一个 TBB，它从页面元数据中获取多媒体组件并使用 Engine.AddBinary 方法将图像添加到包中并与页面一起发布（页面输出可以是一些虚拟的东西）。请注意，如果您有很多图像，则会对性能产生影响。

2）动态发布：如果有broker，可以配置文件系统发布。然后创建一个链接到您的图像架构的动态组件模板。在内部使用带有 engine.AddBinary 方法的 TBB 给给定的 MM 组件将图像发布到给定的结构组作为动态组件表示。

# ocean - 通过 Ocean API 确定项目的 .sim 目录的位置？

> ID：11433024
> 
> 赞同：0
> 
> 时间：2012-07-11T12:49:18.510
> 
> 标签：ocean, petrel

在 Petrel 插件中，我希望确定当前项目的 .sim 目录的位置（如果有的话）。是否有可用于获取此信息的 Ocean API 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:59:51.767

您可以使用以下方法从模拟案例对象中获取此目录：

```
Case simCase = aSimulationCaseFromSomewhere;
string exportPath = EclipseFormatSimulator.GetArguments(simCase).CaseInfo.ExportPath; 
```

祝你好运！

高特

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T14:17:22.213

是的，无论您的 Simulation.Case 是来自 WellKnown 模拟器（E100、E300、FrontSim）之一还是基于 EclipseFormatSimulator 类的插件模拟器，此机制都将独立工作。

詹姆士。

# javascript - 将值设置为有条件禁用的下拉菜单

> ID：11433025
> 
> 赞同：0
> 
> 时间：2012-07-11T12:49:21.333
> 
> 标签：javascript

我有两个下拉菜单，对于某个值，另一个下拉菜单被禁用，为此我使用了javascript。但问题是当它被禁用时，我的“必填字段验证”被调用。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:51:52.137

您还需要像这样禁用下拉列表的验证器：

```
ValidatorEnable(document.getElementById('<%= ValidatorID.ClientID %>'), false); 
```

# javascript - 为什么我的 JS 代码的行为如此断断续续？

> ID：11433028
> 
> 赞同：0
> 
> 时间：2012-07-11T12:49:33.423
> 
> 标签：javascript, jquery

下面的 JS 代码用于获取浏览器的高度和 .banner div 的高度。如果横幅高度大于浏览器高度，则将两个 div（.title 和 .social）附加到正文中，否则不执行任何操作并将 .title 和 .social div 保留在原处。

我还希望 .title 和 .social div 在用户向下滚动页面时淡出，并在他们回到页面顶部时淡入。

**问题**

此代码确实有效，但并非一直有效。有时它会正确显示，有时则不会。我的意思是 div.banner 的高度可以大于浏览器窗口的高度，但 .title 和 .social 不会附加到正文中。此代码是否有任何问题可能导致此问题发生？

```
$(document).ready(function () {

// fade in/fade out banner titles
$(window).trigger('scroll');

var divs = $('.social, div.banner .title'); 
$(window).scroll(function(){
   if($(window).scrollTop() < 10){
         divs.fadeIn("fast");
   } else {
         divs.fadeOut("fast");
   }
});

// Position feature image title and social icons according to browser window height
var windowHeight = $(window).height(); // Gets browser viewport height
var bannerHeight = $(".banner").height(); // Gets .banner height

if (bannerHeight > windowHeight) {
    $("body").append($('.banner .title'));
    $("body").append($('.social'));

}
else {
    //Display .title and .social in .banner div (as originally in HTML)
}
}); 
```

我在页面加载时的 HTML 代码供参考：

```
<div class="banner y1">

    <div class="title" id="feature-title">
        <!-- title content here -->
    </div>

    <div class="social" id="feature-social">

        <!-- social content here -->

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:29:31.243

如果图像的高度发生变化，您应该使用 onload 方法。

[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

# search - 如何在 Google 自定义搜索中将开始参数更改为第 12 页及以上

> ID：11433046
> 
> 赞同：2
> 
> 时间：2012-07-11T12:50:27.017
> 
> 标签：search, google-api, google-search-api

要更改 Google 客户搜索页面的页面，我必须设置`start`参数。知道了，有效参数值从1开始，加10移动到下一页（即`start`page2的参数=11）。我需要知道，如果我想将开始参数设置为第 12 页，我该如何写数字？参考谷歌：

```
Valid values are integers between 1 and (101 - num). 
```

我看不懂是什么`(101 - num)`？？我尝试了许多不同的猜测，没有任何效果。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:23:27.930

这意味着您最多只能请求 100 页（当 num = 1 或每页询问一个结果时）。或者当 num 参数 = 10 时，最多 10 页。

# parsing - 左结合运算符的 BNF 文法

> ID：11433047
> 
> 赞同：7
> 
> 时间：2012-07-11T12:50:28.030
> 
> 标签：parsing, grammar, bnf, ebnf, associativity

对于带有左关联运算符的简单算术表达式，我有以下**EBNF语法：**

```
expression:
    term {+ term}

term:
    factor {* factor}

factor:
    number
    ( expression ) 
```

如何在不更改运算符关联性的情况下将其转换为**BNF语法？**以下 BNF 语法对我不起作用，因为现在运算符已变为右关联：

```
expression:
    term
    term + expression

term:
    factor
    factor * term

factor:
    number
    ( expression ) 
```

维基百科说：

> 几种解决方案是：
> 
> 1.  将语法重写为左递归，或
> 2.  用更多的非终结符重写语法以强制正确的优先级/关联性，或
> 3.  如果使用 YACC 或 Bison，则有运算符声明，%left、%right 和 %nonassoc，它们告诉解析器生成器强制执行哪种关联。

但它并没有说*如何*重写语法，我也没有使用任何解析工具，如 YACC 或 Bison，只是简单的递归下降。我所要求的甚至可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T14:14:25.097

```
expression
    : term 
    | expression + term; 
```

就这么简单。当然，您将需要一个具有某种描述的 LR 解析器来识别左递归语法。或者，如果递归下降，识别这样的文法是可能的，但不像右结合文法那么简单。你必须滚动一个小的递归*上升*解析器来匹配这样的。

```
Expression ParseExpr() {
    Expression term = ParseTerm();
    while(next_token_is_plus()) {
        consume_token();
        Term next = ParseTerm();
        term = PlusExpression(term, next);
    }
    return term;
} 
```

这个伪代码应该能识别出这种风格的左递归文法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-08T16:12:35.870

Puppy 所暗示的也可以用下面的语法来表达：

```
expression: term opt_add
opt_add: '+' term opt_add
       | /* empty */

term:  factor opt_mul
opt_mul: '*' factor opt_mul
       | /* emtpty */

factor: number
      | '(' expression ') 
```

# vba - 在 Word 中更新部分超链接

> ID：11433053
> 
> 赞同：1
> 
> 时间：2012-07-11T12:50:45.003
> 
> 标签：vba, hyperlink, ms-word, word-2010

我们已迁移服务器并使用相同的共享路径传输文件。我的客户有一个 word 文档，其中包含指向旧服务器名称的超链接。

IE `\\serverOld\accounts\1234.pdf and \\serverNew\accounts\1234.pdf`

我在下面找到了这个 VB 脚本，它完成了我需要的工作，但它适用于 Excel 而不是 Word。

```
Sub HyperLinkChange()
   Dim oldtext As String
   Dim newtext As String
   Dim h As Hyperlink

' These can be any text portion of a hyperlink, such as ".com" or ".org".
       oldtext = "\\topscan-server" 
       newtext = "\\ts-sbs" 

' Check all hyperlinks on active sheet.
       For Each h In ActiveSheet.Hyperlinks
       x = InStr(1, h.Address, oldtext)
       If x > 0 Then
           If h.TextToDisplay = h.Address Then
                h.TextToDisplay = newtext
           End If
           h.Address = Application.WorksheetFunction. _
           Substitute(h.Address, oldtext, newtext)
       End If
       Next
End Sub 
```

请问有人可以帮我编辑此文本以使用 Microsoft Word 2010 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:30:37.770

试试这个

```
Sub HyperLinkChange()
   Dim oldtext As String, newtext As String
   Dim h As Hyperlink

    oldtext = "\\topscan-server"
    newtext = "\\ts-sbs"

    For Each h In ActiveDocument.Hyperlinks
       If InStr(1, h.Address, oldtext) Then
           If h.TextToDisplay = h.Address Then
                h.TextToDisplay = newtext
           End If
           h.Address = Replace(h.Address, oldtext, newtext)
       End If
    Next
End Sub 
```

# sql - 参数化语句是否实际上更改了存储在数据库中的数据以防止 SQL 注入？

> ID：11433054
> 
> 赞同：1
> 
> 时间：2012-07-11T12:50:48.257
> 
> 标签：sql, database, sqlite

我的问题基本上是这样的：如果我使用参数化语句/准备语句将用户输入字符串插入表中，然后稍后获取该值并将其用于动态构造表的列值，这是否让我对 SQLInjection 持开放态度？

具体例子：

如果我使用参数化语句将用户的输入字符串存储到表中，然后从该表中选择该 TEXT 并将其存储在我的程序中的局部变量（字符串 localVariable）中，并创建一个具有以下内容的表：

```
"CREATE TABLE InjectFree (" + localVariable + " TEXT)" 
```

我的 localVariable 会没有可注入的 sql 代码吗？我知道有替代方案（并且可能会使用替代方案只是为了安全起见），但我想我只是想知道参数化值实际上做了什么以及它对存储在表中的数据有什么影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:54:38.357

你会有危险。

参数化的插入将防止对该原始插入语句进行注入，但不会防止下一次使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:14:02.697

如果您使用参数化查询，则查询和数据将分别提供给数据库。这有几个影响...

*   它允许 RDBMS 看到该查询与该查询的先前实例相同。 *（如果您将数据作为静态值嵌入到查询字符串中，RDBMS 将不会看到查询是相同的，只有数据发生了变化。）* 这允许执行计划重用和 RDBMS 的其他有益特性。

*   它简化了数据验证。这与注入攻击有关。无论将什么值代入参数，数据始终只是数据。它永远不会被视为查询的一部分。

然而，后一点也意味着你***不能***这样做......

```
INSERT INTO @tableName(@fieldName) VALUES (@dataValue) 
```

每个参数都被视为一个数据项。它不是一个松散绑定的脚本，其中的值`@tableName`不会被替换到脚本中。查询***必须***使用表名和字段名进行硬编码。只有真正的数据项才能作为参数传递。

这通常感觉像是对 java 脚本等用户的限制。然而，它是保护您免受 SQL 注入攻击的机制。那是一件好事 ：）

这意味着要允许用户定义*的数据定义语言（例如 CREATE TABLE）*，您需要自己将字符串的不同部分连接在一起。实际上，无论您如何保护自己免受 SQL 注入攻击，总会有人找到解决办法。

As soon as you allow a user to specify table names, field names, etc, you become immediately open to attack. The ***only*** safe way is to have a white-list of allowable strings.

# javascript - 在 Javascript 中，是否可以在仅取消隐藏 div 而不是加载新页面时为选项卡提供活动样式？

> ID：11433060
> 
> 赞同：0
> 
> 时间：2012-07-11T12:51:05.757
> 
> 标签：javascript, html, tabs

我有显示/隐藏 div 而不是加载新页面的 Javascript 选项卡。选项卡的样式可以产生悬停效果。我现在想添加一个活动样式来匹配当前可见的 div。

JAVASCRIPT，它不能工作，因为它来自加载页面的版本：

```
function setActive() {
  aObj = document.getElementById('nav').getElementsByTagName('a');
  for(i=0;i < aObj.length;i++) { 
    if(document.location.href.indexOf(aObj[i].href) >= 0) {
      aObj[i].className='active';
    }
  }
}

function showdiv(id){
document.getElementById(id).style.display = "block";
}

function hidediv(id){
document.getElementById(id).style.display = "none";
} 
```

样式：

```
#pageAdmin { display:block; }
#userAdmin { display:none; } 
```

的HTML：

```
<ul id="nav">
    <li><a onclick="showdiv('pageAdmin'); hidediv('userAdmin')" 
          href="#">Page Admin</a></li>
    <li><a onclick="showdiv('userAdmin'); hidediv('pageAdmin')" 
          href="#">User Admin</a></li>
</ul>

<div id="pageAdmin">
    <h1>Page admin</h1>
</div>

<div id="userAdmin">
    <h1>User admin</h1>
</div> 
```

这是我关于 SO 的第一个问题，所以我希望它是适当的 - 如果不是，请提前接受我的道歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:19:08.537

您的 setActive 功能不是很有帮助。并且使用位置、href 和哈希将很难做你想做的事。

您可以将脚本更改为

```
function showdiv(id){
  var el = document.getElementById(id);
  el.style.display = "block";
  el.className = "active";
}

function hidediv(id){
  var el = document.getElementById(id);
  el.style.display = "none";
  el.className = "";
} 
```

现在它应该做你想做的事。

但是，您应该看一下[jQuery](http://jquery.com)。使用 jQuery，您确实消除了 getElementById 的使用，并且您可以更简单地为 onclick 附加一个事件处理程序，就像使用 vanilla js 一样。在 html 属性中设置处理程序被认为是不好的做法。如果您想使用多种样式，jQuery 还会处理您拆分和连接空格分隔的 className 字符串。

使用 jQuery 它看起来像：

```
$("a", "#nav").click(function () {
  var $navA = $(this);
  var tabName = $navA.attr("data-tabName");

  $(".tab").each(function () {
    var $tab = $(this);
    if ($tab.attr("id") === tabName) {
      $tab.css({ display: 'block' }); // you may move this into active style
      $tab.addClass("active");
      $tab.removeClass("inactive");
    }
    else {
      $tab.css({ display: 'none' }); // you may move this into inactive style
      $tab.removeClass("active");
      $tab.addClass("inactive");
    }
  });
}); 
```

jQuery 示例的 HTML

```
<ul id="nav">
    <li><a data-tabName="pageAdmin" href="#">Page Admin</a></li>
    <li><a data-tabName="userAdmin" href="#">User Admin</a></li>
</ul>

<div class="tab" id="pageAdmin">
    <h1>Page admin</h1>
</div>
<div class="tab" id="userAdmin">
    <h1>User admin</h1>
</div> 
```

# r - 如何处理 R 或 ArcGIS 中多边形 shapefile 中的“孤立洞”？

> ID：11433063
> 
> 赞同：17
> 
> 时间：2012-07-11T12:51:09.770
> 
> 标签：r, overlay, gis, polygon

我正在尝试使用 over 函数（rgeos）在两个多边形（“grd”和“range”）之间进行空间叠加。

此代码适用于除一个文件以外的所有文件：

```
range.grd.overlay <- grd[!is.na(over(grd, range)), ]@data$grdID # get gridcells that overlap with range 
```

并收到此错误消息：

```
Error in createPolygonsComment(p) : 
  rgeos_PolyCreateComment: orphaned hole, cannot find containing polygon for hole at index 9 
```

我知道 shapefile 中某处有一个没有周围多边形的洞，但我不知道如何解决它。我可以简单地删除索引 9 处的孔吗？如何 ？如果您有解决方案来修复 ArcGIS 中的 shapefile，那对我来说也很好。

非常感谢您的帮助！

问候， 卡斯滕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:29:44.447

两者`grd`都`range`属于 类`SpatialPolygonsDataFrame`。

`range`有这样的结构：

```
> str(range)
Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame': 3 obs. of  17 variables:
  .. ..$ OBJECTID  : int [1:3] 725 726 727
  .. ..$ SPCRECID  : int [1:3] 3313 3313 3313
  .. ..$ DATE_     : Factor w/ 1 level "19/10/2009": 1 1 1
  .. ..$ SCINAME   : Factor w/ 1 level "Synthliboramphus antiquus": 1 1 1
  .. ..$ SOURCE    : Factor w/ 1 level "Gaston & Jones, 1998; Brazil, 2009": 1 1 1
  .. ..$ PRESENCE  : int [1:3] 1 1 1
  .. ..$ ORIGIN    : int [1:3] 1 1 1
  .. ..$ SEASONAL  : int [1:3] 2 1 3
  .. ..$ DATA_SENS : Factor w/ 0 levels: NA NA NA
  .. ..$ SENS_COMM : Factor w/ 0 levels: NA NA NA
  .. ..$ COMPILER  : Factor w/ 1 level "Philip Taylor (BirdLife International)": 1 1 1
  .. ..$ TAX_COM   : Factor w/ 0 levels: NA NA NA
  .. ..$ DIST_COM  : Factor w/ 0 levels: NA NA NA
  .. ..$ REVIEWERS : Factor w/ 0 levels: NA NA NA
  .. ..$ CITATION  : Factor w/ 1 level "BirdLife International and Natureserve (2011) Bird species distribution maps of the world.": 1 1 1
  .. ..$ SHAPE_Leng: num [1:3] 190 209 1240
  .. ..$ SHAPE_Area: num [1:3] 39 16.6 600.8
  .. ..- attr(*, "data_types")= chr [1:17] "N" "N" "C" "C" ...
  ..@ polygons   :List of 3
  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots
  .. .. .. ..@ Polygons :List of 138
  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
  .. .. .. .. .. .. ..@ labpt  : num [1:2] 178.6 51.8
  .. .. .. .. .. .. ..@ area   : num 4.58
  .. .. .. .. .. .. ..@ hole   : logi FALSE
  .. .. .. .. .. .. ..@ ringDir: int 1
  .. .. .. .. .. .. ..@ coords : num [1:49, 1:2] 180 180 179 179 179 ...
  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
  .. .. .. .. .. .. ..@ labpt  : num [1:2] -172.2 52.6 
```

... 等等。

`grd`有这样的结构：

```
> str(grd)
Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame': 40680 obs. of  12 variables:
  .. ..$ ID        : int [1:40680] 361 362 363 364 365 366 367 368 369 370 ...
  .. ..$ X_COORD   : num [1:40680] -180 -178 -178 -176 -176 ...
  .. ..$ Y_COORD   : num [1:40680] 79.1 79.1 79.1 79.1 79.1 ...
  .. ..$ ID_1      : Factor w/ 13713 levels "10","10000","10001",..: NA NA NA NA NA NA NA NA NA NA ...
  .. ..$ grdID     : int [1:40680] 1 2 3 4 5 6 7 8 9 10 ...
  .. ..$ ROW       : int [1:40680] 1 1 1 1 1 1 1 1 1 1 ...
  .. ..$ COL       : int [1:40680] 1 2 3 4 5 6 7 8 9 10 ...
  .. ..$ AREA      : num [1:40680] 12364 12364 12364 12364 12364 ...
  .. ..$ PERIMETER : num [1:40680] 445 445 445 445 445 ...
  .. ..$ MAJORITY  : int [1:40680] 0 0 0 0 0 0 0 0 0 0 ...
  .. ..$ PROP0_0062: num [1:40680] 0 0 0 0 0 0 0 0 0 0 ...
  .. ..$ AREA_KM2  : num [1:40680] 0 0 0 0 0 0 0 0 0 0 ...
  .. ..- attr(*, "data_types")= chr [1:12] "N" "N" "N" "C" ...
  ..@ polygons   :List of 40680
  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots
  .. .. .. ..@ Polygons :List of 1
  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
  .. .. .. .. .. .. ..@ labpt  : num [1:2] -179.5 79.1
  .. .. .. .. .. .. ..@ area   : num 5.3
  .. .. .. .. .. .. ..@ hole   : logi FALSE
  .. .. .. .. .. .. ..@ ringDir: int 1
  .. .. .. .. .. .. ..@ coords : num [1:13, 1:2] -179 -180 -180 -180 -180 ...
  .. .. .. ..@ plotOrder: int 1
  .. .. .. ..@ labpt    : num [1:2] -179.5 79.1 
```

... 等等。

我从[Roger Bivand](http://www.mail-archive.com/r-help@r-project.org/msg140173.html)那里找到了这个帮助，这适用于三个有问题的文件中的两个：

```
>slot(shape.input, "polygons") <- lapply(slot(shape.input, "polygons"), checkPolygonsHoles)
>range.grd.overlay <- grd[!is.na(over(grd, range)), ]@data$grdID # get gridcells of that overlay with range polygon 
```

但是对于第三个文件，修复不起作用。R 会冻结，直到我最终按下 Esc，之后在尝试进行空间叠加时我会收到相同的错误消息：

```
 Error in createPolygonsComment(p) : 
   rgeos_PolyCreateComment: orphaned hole, cannot find containing polygon for hole at index 13 
```

# magento - 重写发票模型

> ID：11433068
> 
> 赞同：0
> 
> 时间：2012-07-11T12:51:19.820
> 
> 标签：magento

有人可以帮我覆盖 Magento 中的模型。不知何故，我没有完成。

我有以下代码

本地/WP/Mstock/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <WP_Mstock>
            <version>0.1</version>
        </WP_Mstock>
    </modules>
    <global>
       <models>
          <sales>
              <rewrite>
                  <order_invoice>WP_Mstock_Model_Order_Invoice</order_invoice>
              </rewrite>
          </sales>
       </models>
    </global>
</config> 
```

本地/WP/Mstock/Model/Invoice.php

```
<?php
class WP_Mstock_Model_Order_Invoice extends Mage_Sales_Model_Order_Invoice
{

    public function register()
    {
        if ($this->getId()) {
            Mage::throwException(Mage::helper('sales')->__('Cannot register existing invoice'));
        }

        foreach ($this->getAllItems() as $item) {
            if ($item->getQty()>0) {
                $quantity = $item->getQty(); 
                $product_id = $item->getProductId();
                $stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($product_id);
                $stock->setQty($stock->getQty()-$quantity);           
                $stock->save();
                $item->register();
            }
            else {
                $item->isDeleted(true);
            }
        }

        $order = $this->getOrder();
        $captureCase = $this->getRequestedCaptureCase();
        if ($this->canCapture()) {
            if ($captureCase) {
                if ($captureCase == self::CAPTURE_ONLINE) {
                    $this->capture();
                }
                elseif ($captureCase == self::CAPTURE_OFFLINE) {
                    $this->setCanVoidFlag(false);
                    $this->pay();
                }
            }
        } elseif(!$order->getPayment()->getMethodInstance()->isGateway() || $captureCase == self::CAPTURE_OFFLINE) {
            if (!$order->getPayment()->getIsTransactionPending()) {
                $this->setCanVoidFlag(false);
                $this->pay();
            }
        }

        $order->setTotalInvoiced($order->getTotalInvoiced() + $this->getGrandTotal());
        $order->setBaseTotalInvoiced($order->getBaseTotalInvoiced() + $this->getBaseGrandTotal());

        $order->setSubtotalInvoiced($order->getSubtotalInvoiced() + $this->getSubtotal());
        $order->setBaseSubtotalInvoiced($order->getBaseSubtotalInvoiced() + $this->getBaseSubtotal());

        $order->setTaxInvoiced($order->getTaxInvoiced() + $this->getTaxAmount());
        $order->setBaseTaxInvoiced($order->getBaseTaxInvoiced() + $this->getBaseTaxAmount());

        $order->setHiddenTaxInvoiced($order->getHiddenTaxInvoiced() + $this->getHiddenTaxAmount());
        $order->setBaseHiddenTaxInvoiced($order->getBaseHiddenTaxInvoiced() + $this->getBaseHiddenTaxAmount());

        $order->setShippingTaxInvoiced($order->getShippingTaxInvoiced() + $this->getShippingTaxAmount());
        $order->setBaseShippingTaxInvoiced($order->getBaseShippingTaxInvoiced() + $this->getBaseShippingTaxAmount());

        $order->setShippingInvoiced($order->getShippingInvoiced() + $this->getShippingAmount());
        $order->setBaseShippingInvoiced($order->getBaseShippingInvoiced() + $this->getBaseShippingAmount());

        $order->setDiscountInvoiced($order->getDiscountInvoiced() + $this->getDiscountAmount());
        $order->setBaseDiscountInvoiced($order->getBaseDiscountInvoiced() + $this->getBaseDiscountAmount());
        $order->setBaseTotalInvoicedCost($order->getBaseTotalInvoicedCost() + $this->getBaseCost());

        $state = $this->getState();
        if (is_null($state)) {
            $this->setState(self::STATE_OPEN);
        }

        Mage::dispatchEvent('sales_order_invoice_register', array($this->_eventObject=>$this, 'order' => $order));
        return $this;

    }

} 
```

我不知道我做错了什么。我认为这是正确的方法。

谢谢你。

克，莱克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:51:50.240

为了重写，请执行以下操作：

调整您的模块文件以反映**WP_Sales**

这是它应该工作的方式：

本地/WP/Sales/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <global>
       <models>
          <sales>
              <rewrite>
                  <order_invoice>WP_Sales_Model_Order_Invoice</order_invoice>
              </rewrite>
          </sales>
       </models>
    </global>
</config> 
```

本地/WP/Sales/Model/Invoice.php

```
<?php
class WP_Sales_Model_Order_Invoice extends Mage_Sales_Model_Order_Invoice
{

    public function register()
    {
        if ($this->getId()) {
            Mage::throwException(Mage::helper('sales')->__('Cannot register existing invoice'));
        }

        foreach ($this->getAllItems() as $item) {
            if ($item->getQty()>0) {
                $quantity = $item->getQty(); 
                $product_id = $item->getProductId();
                $stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($product_id);
                $stock->setQty($stock->getQty()-$quantity);           
                $stock->save();
                $item->register();
            }
            else {
                $item->isDeleted(true);
            }
        }

        $order = $this->getOrder();
        $captureCase = $this->getRequestedCaptureCase();
        if ($this->canCapture()) {
            if ($captureCase) {
                if ($captureCase == self::CAPTURE_ONLINE) {
                    $this->capture();
                }
                elseif ($captureCase == self::CAPTURE_OFFLINE) {
                    $this->setCanVoidFlag(false);
                    $this->pay();
                }
            }
        } elseif(!$order->getPayment()->getMethodInstance()->isGateway() || $captureCase == self::CAPTURE_OFFLINE) {
            if (!$order->getPayment()->getIsTransactionPending()) {
                $this->setCanVoidFlag(false);
                $this->pay();
            }
        }

        $order->setTotalInvoiced($order->getTotalInvoiced() + $this->getGrandTotal());
        $order->setBaseTotalInvoiced($order->getBaseTotalInvoiced() + $this->getBaseGrandTotal());

        $order->setSubtotalInvoiced($order->getSubtotalInvoiced() + $this->getSubtotal());
        $order->setBaseSubtotalInvoiced($order->getBaseSubtotalInvoiced() + $this->getBaseSubtotal());

        $order->setTaxInvoiced($order->getTaxInvoiced() + $this->getTaxAmount());
        $order->setBaseTaxInvoiced($order->getBaseTaxInvoiced() + $this->getBaseTaxAmount());

        $order->setHiddenTaxInvoiced($order->getHiddenTaxInvoiced() + $this->getHiddenTaxAmount());
        $order->setBaseHiddenTaxInvoiced($order->getBaseHiddenTaxInvoiced() + $this->getBaseHiddenTaxAmount());

        $order->setShippingTaxInvoiced($order->getShippingTaxInvoiced() + $this->getShippingTaxAmount());
        $order->setBaseShippingTaxInvoiced($order->getBaseShippingTaxInvoiced() + $this->getBaseShippingTaxAmount());

        $order->setShippingInvoiced($order->getShippingInvoiced() + $this->getShippingAmount());
        $order->setBaseShippingInvoiced($order->getBaseShippingInvoiced() + $this->getBaseShippingAmount());

        $order->setDiscountInvoiced($order->getDiscountInvoiced() + $this->getDiscountAmount());
        $order->setBaseDiscountInvoiced($order->getBaseDiscountInvoiced() + $this->getBaseDiscountAmount());
        $order->setBaseTotalInvoicedCost($order->getBaseTotalInvoicedCost() + $this->getBaseCost());

        $state = $this->getState();
        if (is_null($state)) {
            $this->setState(self::STATE_OPEN);
        }

        Mage::dispatchEvent('sales_order_invoice_register', array($this->_eventObject=>$this, 'order' => $order));
        return $this;

    }

} 
```

# java - 将 JSON 对象反序列化为 List 不在 HTTPHandler 中工作

> ID：11433072
> 
> 赞同：0
> 
> 时间：2012-07-11T12:51:27.807
> 
> 标签：java, ajax, serialization

我在使用 Javascript Serializer 反序列化到以下实体时遇到问题。请帮忙

JSON字符串：

```
{"AccountNo":0,"EmailAddress":"test@gmail.com","Destination_Prefernce":[{"Value":"Test Data"}]} 
```

Java 代码

```
public class EMailPreferenceEntity
{
private int _accountNo;
private string emailAddress;
private DestinationPreferences _destinationPrefernce = new DestinationPreferences();

public int AccountNo
{
    get { return _accountNo; }
    set { _accountNo = value; }
}

public string EmailAddress
{
    get { return emailAddress; }
    set { emailAddress = value; }
}

public DestinationPreferences Destination_Prefernce
{
    get { return _destinationPrefernce; }
    set { _destinationPrefernce = value; }
}

} 
```

处理程序文件：

```
public class AjaxHandler : IHttpHandler, IRequiresSessionState
{

public void ProcessRequest (HttpContext context) {
    string jsData = context.Request["Data"];
    if (!string.IsNullOrEmpty(jsData))
    {
        JavaScriptSerializer ser = new JavaScriptSerializer();
        EMailPreferenceEntity jsEntity = ser.Deserialize<EMailPreferenceEntity>(jsData);            
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:03:20.900

类型擦除意味着您的列表将在编译后变为列表，因此，当您的 http 请求到达时，它将尝试反序列化列表，并且可能不会命中您为列表注册的任何内容。

我不确定您的序列化程序如何处理它，但在 Gson 的情况下，您从泛型创建一个 TypeToken，以便在编译后类型和序列化程序之间的连接不会丢失。

# c - 为什么小于表达式转换为小于或等于 gcc 中的表达式

> ID：11433073
> 
> 赞同：6
> 
> 时间：2012-07-11T12:51:28.183
> 
> 标签：c, optimization, gcc, gimple

我正在研究代码优化并通过 gcc 内部。我在我的程序中写了一个简单的表达式，我检查了那个表达式的 gimple 表示，我不知道为什么 gcc 会这样做。说我有一个表达：

```
if(i < 9) 
```

然后在 gimple 表示中它将被转换为

```
if(i <= 8) 
```

我不知道为什么 gcc 会这样做。是某种优化吗，如果是，那么谁能告诉我它如何优化我们的程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:07:13.223

规范化有助于检测 CommonSubExpressions，例如：

```
#include <stdio.h>

int main(void)
{
unsigned u, pos;
char buff[40];

for (u=pos=0; u < 10; u++) {
        buff[pos++] = (u <5) ? 'A' + u : 'a' + u;
        buff[pos++] = (u <=4) ? '0' + u : 'A' + u;
        }
buff[pos++] = 0;
printf("=%s=\n", buff);
return 0;
} 
```

GCC -O1 会将其编译为：

```
 ...
        movl    $1, %edx
        movl    $65, %ecx
.L4:
        cmpl    $4, %eax
        ja      .L2
        movb    %cl, (%rsi)
        leal    48(%rax), %r8d
        jmp     .L3
.L2:
        leal    97(%rax), %edi
        movb    %dil, (%rsi)
        movl    %ecx, %r8d
.L3:
        mov     %edx, %edi
        movb    %r8b, (%rsp,%rdi)
        addl    $1, %eax
        addl    $1, %ecx
        addl    $2, %edx
        addq    $2, %rsi
        cmpl    $10, %eax
        jne     .L4
        movb    $0, 20(%rsp)
        movq    %rsp, %rdx
        movl    $.LC0, %esi
        movl    $1, %edi
        movl    $0, %eax
        call    __printf_chk
         ... 
```

GCC -O2 实际上会删除整个循环并用一个分配流替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:01:44.240

考虑以下 C 代码：

```
int i = 10;

if(i < 9) {
  puts("1234");
} 
```

还有等效的 C 代码：

```
int i = 10;

if(i <= 8) {
  puts("asdf");
} 
```

在没有优化的情况下，两者都生成完全相同的装配序列：

```
40052c:       c7 45 fc 0a 00 00 00    movl   $0xa,-0x4(%rbp)
400533:       83 7d fc 08             cmpl   $0x8,-0x4(%rbp)
400537:       7f 0a                   jg     400543 <main+0x1f>
400539:       bf 3c 06 40 00          mov    $0x40063c,%edi
40053e:       e8 d5 fe ff ff          callq  400418 <puts@plt>
400543:       .. .. .. ..             .. ..  .. 
```

由于我不熟悉 GCC 的实现，我只能推测为什么要进行转换。也许它使代码生成器的工作更容易，因为它只需要处理一个案例。我希望有人可以提出更明确的答案。

# jquery - 运行 AJAX 调用时 GIF 停止工作

> ID：11433074
> 
> 赞同：2
> 
> 时间：2012-07-11T12:51:29.413
> 
> 标签：jquery, ajax, gif

我正在使用 AJAX 和 jQuery 读取一个大文本文件：

```
$.ajax({
    type: "GET",
    url: "testing.txt",
    dataType: "text",
    success: function (returnText) {
        $("#viewDescription").text(returnText);
    }
}); 
```

然后，我想在请求完成时显示一个带有[动画 GIF的](http://demo.webstutorial.com/loading/loading.gif)[弹出窗口。](http://demo.webstutorial.com/loading/)我使用以下代码做到了这一点：

```
$("#popup").on("ajaxSend", function () {
    $(this).show();
}).on("ajaxStop", function () {
    $(this).hide();
}).on("ajaxError", function () {
    $(this).hide();
}); 
```

* * *

```
<div style="display: none;" id="popup">
    <img src="loading.gif" />
</div> 
```

弹出窗口正确显示和隐藏，但问题是 jQuery AJAX 调用运行时 GIF 停止。它不适用于任何浏览器。请问可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:06:24.890

尝试这样的事情：

```
$('#mybtn').on('click', function(e) {
    e.preventDefault();
    $("#popup").show(); // Show the loader
    $.ajax({
        type: "GET",
        url: "testing.txt",
        dataType: "text",
        success: function(returnText) {
            $("#popup").hide(); // Hide on success
            $("#viewDescription").text(returnText);
        },
        error: function() {
            $("#popup").hide(); // Hide on error
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:40:47.893

```
Try this:
$('#mybtn').on('click', function(e) {
    $.ajax({
        type: "GET",
        url: "testing.txt",
        dataType: "text",
        beforeSend:function(){
             $("#popup").show(); // Show the loader
        },
        success: function(returnText) {
            $("#popup").hide(); // Hide on success
            $("#viewDescription").text(returnText);
        },
        error: function() {
            $("#popup").hide(); // Hide on error
        }
    });
}); 
```

# sql - 带有 LIMIT1 的 SQL 返回所有记录

> ID：11433077
> 
> 赞同：6
> 
> 时间：2012-07-11T12:51:45.407
> 
> 标签：sql

我犯了一个错误并输入：

`SELECT * FROM table LIMIT1`

代替

`SELECT * FROM table LIMIT 1`（注意和之间的`LIMIT`空格`1`）

在 MySQL 的 CLI 中。我预计会收到某种解析错误，但我很惊讶，因为查询返回了表中的所有记录。我的第一个想法是“愚蠢的 MySQL，我敢打赌这会在 PostgreSQL 中返回错误”，但 PostgreSQL 也返回了所有记录。然后用 SQLite 测试它 - 结果相同。

经过一番挖掘，我意识到我在桌子后面输入什么并不重要。只要没有`WHERE/ORDER/GROUP`子句：

```
SELECT * FROM table SOMETHING -- works and returns all records in table

SELECT * FROM table WHERE true SOMETHING -- doesn't work - returns parse error 
```

我想这是一种标准化的行为，但我找不到任何解释为什么会这样。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T12:55:03.177

您的第一个查询等效于使用表别名的此查询：

```
SELECT * FROM yourtable AS LIMIT1 
```

`AS`关键字是可选的。表别名允许您使用别名`LIMIT1.foo`而不是原始表名来引用该表的列。如果您希望在查询中为表提供更短或更描述性的别名，则使用别名会很有用。如果将表连接到自身，则必须使用别名。

从[SQL lite 文档](http://www.sqlite.org/lang_select.html)：

![AS 关键字可选](../Images/f5ec0063744e40182bc109d6dabd09a6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:02:59.177

这就是为什么我希望数据库引擎强制使用关键字 AS 作为别名 [http://beyondrelational.com/modules/2/blogs/70/posts/10814/should-alias-names-be-preceded-by-as .aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10814/should-alias-names-be-preceded-by-as.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:01:49.507

```
SELECT * FROM table LIMIT1; 
```

`LIMIT1`这已被 SQL 用作别名，原因`LIMIT1`不是 SQL 的保留文字。表名后面的东西，不是保留关键字，SQL 总是将其作为表别名。

```
 SELECT * FROM table LIMIT 1; 
```

当您`LIMIT`在表名之后使用时，SQL 发现它是一个保留关键字，并根据行为对其进行处理。如果您想在查询中使用保留关键字可以通过将保留文字放在引号中来完成。像..

```
SELECT * FROM table `LIMIT`; 
```

或者

```
SELECT * FROM table `LIMIT 1`; 
```

现在 `` 引号下的所有单词都将被视为用户定义的。通常，我们使用**日期、时间戳、限制等**关键字作为列名会出错。

# wpf - WPF 图表控件：OxyPlot 文档

> ID：11433081
> 
> 赞同：2
> 
> 时间：2012-07-11T12:51:53.227
> 
> 标签：wpf, charts

我正在为 WPF 寻找一个简单、免费的图表控件。经过一些阅读（例如[WPF 图表控件](https://stackoverflow.com/q/577278/1356597)），我查看了 OxyPlot：[http ://oxyplot.codeplex.com/](http://oxyplot.codeplex.com/)

它看起来很有前途，做得很好：你用过吗？你能建议一个地方找到一些额外的参考资料（网站上的资料似乎仍然不完整）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:46:12.077

我也开始使用这个库。直到现在我都喜欢它。

关于文档，我同意它确实很差。可能您能做的最好的事情就是探索您在项目中找到的示例代码。我可以说我可以找到我需要的所有代码。

顺便说一句，我到目前为止唯一遇到的小问题在图片中可见。它发生在大量点上（例如> 1000）。

![在此处输入图像描述](../Images/33c3e60f9844ae50aa6dd0af0f0a0767.png)

编辑：

当 LineJoin 设置为 OxyPenLineJoin.Miter 时会出现此问题；它可以通过

```
LineJoin = OxyPenLineJoin.Bevel; 
```

或者

```
LineJoin = OxyPenLineJoin.Round; 
```

希望这可以帮助

# hudson - 2012 年哈德森 vs 詹金斯

> ID：11433083
> 
> 赞同：145
> 
> 时间：2012-07-11T12:51:55.987
> 
> 标签：hudson, jenkins

在 2011 年，Hudson 和 Jenkins 的情况如下（恕我直言） - Hudson 有点稳定，但 Jenkins 的发展有点快。
2012年的《哈德逊vs詹金斯》现在情况如何？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-11T13:10:13.493

我用过哈德森和詹金斯。我一直在关注这两个更改列表。

我仍然认为我们从 Hudson 搬到 Jenkins 是正确的选择。Hudson 的核心开发人员现在正在开发 Jenkins。仍然受雇于甲骨文的是主要支持 Hudson 的人（据我所知，Apache Maven 人员也在提供修复）。

在哈德逊时代，我已经提交了许多错误。我可以告诉你，其中大部分都在 Jenkins 中得到了解决。在他们解决问题几个月后，哈德逊人修复了这些特定错误或要求提供进一步的意见。

大多数插件开发人员（几乎所有）都将他们的插件迁移到 Jenkins，现在主要支持 Jenkins。在插件方面，Jenkins 的发展速度要快得多。现在有一些 Cloudbees 提供的付费插件。

据我所知，开源社区已经将大部分成员转移到了 Jenkins。

一些喜欢付费支持并且不想迁移到 Jenkins 的公司仍在使用 Hudson。坦率地说，我不明白为什么。Jenkins 也得到了 Cloudbees 的商业支持，这就是 Kohsuke Kawaguchi（Hudson 的创建者）现在工作的地方。Cloudbees 现在甚至提供了一项免费服务，用于在其云中托管 GitHub 托管项目。他们让您的 OSS 项目免费构建！:)

Jenkins 改进了它对云的支持。如上所述，Cloudbees 也在云端提供了这种 SaaS。我不确定哈德森是否以及在多大程度上支持这一点。我认为他们目前还没有那么先进。无论如何，据我所知，Hudson 并未为云提供 SaaS。

我的观点是，如果你必须选择一个，那应该是詹金斯。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-07-11T13:14:34.377

在稳定性方面，一年多来，Jenkins 一直为希望对所安装软件的稳定性和支持更有信心的人们提供[长期支持(LTS) 版本。](https://wiki.jenkins-ci.org/display/JENKINS/LTS+Release+Line)

每隔三个月左右，就会选择一个被 Jenkins 用户社区认为运行良好的先前版本。然后这个版本被分支，任何重要的修复（已经过“实战测试”）都被反向移植到这个 Jenkins 版本中，然后这个版本得到了不同人和公司的额外测试。一旦准备好发布，这将成为新的 LTS 版本。

随着新的高优先级修复出现，这些修复被向后移植到 LTS 版本。

Jenkins 的众多[大用户都](https://wiki.jenkins-ci.org/pages/viewpage.action?pageId=58001258)坚持使用 LTS 发布线，根据公开的[Jenkins 使用统计](http://stats.jenkins-ci.org/jenkins-stats/)，有数千个部署正在使用它。

这应该意味着您正在下载的 LTS 版本比从通常的每周发布行中选择的随机版本更稳定。

除了统计数据之外，与 Hudson 相比，关于 Jenkins 的使用情况、社区规模、其开发水平、添加新功能的速度、新插件的数量和邮件列表活动似乎没有改变（即 Jenkins 保持[更进一步前面](http://www.slideshare.net/kohsuke/jenkins-user-conference-2011)）。

[基本上，之前讨论](https://stackoverflow.com/q/4973981/234938)中提出的大部分观点仍然适用，尽管 Hudson 最初的企业支持似乎有所减弱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-12T05:29:56.997

我认为[https://stackoverflow.com/a/5970813/556520](https://stackoverflow.com/a/5970813/556520)回答了很多关于 hudson vs jenkins 问题的重要问题。该主题解释了情况的双方以及每种产品的优缺点。

根据多年来与 CI 合作的个人经验，最近开始为 Hudson 开发，我会坚持使用稳定版本的 hudson 只是因为 jenkins 正在为他们的 cloudbees 服务做更多的开发和支持，而 hudson 已经转移到 eclipse 基金会而不是为服务而开发。那只是我的 0.02 美元。

# c# - 正则表达式匹配 Ip:Port

> ID：11433086
> 
> 赞同：0
> 
> 时间：2012-07-11T12:52:05.207
> 
> 标签：c#, regex

我有以下正则表达式来匹配 Ip:Port 表单 html 代码，但出于某种原因，我只返回了第一个匹配项，然后它就停止了。

我的代码：

```
 Match m = Regex.Match(_theHtmlCode, @"\b\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\:\d{1,8}\b", RegexOptions.IgnoreCase);

       if (m.Success)
       {
           if(m.Groups[0].Value != "")
           {
               resultsFound.Add(m.Groups[0].Value);
           }

       } 
```

有什么想法可以让我将所有匹配项添加到 resultsFound 中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T12:55:56.413

`var m = Regex.Matches(_theHtmlCode, @"\b(\d{1,3}\.){3}\d{1,3}\:\d{1,8}\b", RegexOptions.IgnoreCase);` 并且这个正则表达式可能会得到错误的 ip，它只匹配真正的 ip：`((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?):\d+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:53:43.597

您需要使用`Regex.Matches`方法而不是`Regex.Match`方法。这将返回 a`MatchCollection`而不是 individual `Match`，其中集合包含正则表达式的所有匹配项。

# php - PHP strpos 匹配查询字符串文本模式

> ID：11433089
> 
> 赞同：3
> 
> 时间：2012-07-11T12:52:09.657
> 
> 标签：php, strpos

`$_GET['page']`仅当参数具有文本“ *mytext-* ”时，我才需要执行一些脚本

查询字符串是：`admin.php?page=mytext-option`

这是返回 0：

```
$myPage = $_GET['page'];
$match = strpos($myPage, 'mytext-');
echo $match; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:12:08.007

strpos 返回字符串的位置。由于它是 0，这意味着它是在位置 0 找到的，即在字符串的开头。

为了便于理解它是否存在，请将布尔***===***添加到 if 语句中，如下所示：

```
<?php

$myPage = $_GET['page'];
$match = strpos($myPage, 'mytext-');

if ( $match === false ) {
    echo 'Not found';
} else {
    echo 'Found';
}

?> 
```

这会让你知道字符串是否存在。

或者，如果您只需要知道它是否存在：

```
$myPage = $_GET['page'];
$match = strpos($myPage, 'mytext-');

if ( $match !== false ) {
    echo 'Found';
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:53:38.360

[`substr()`](http://php.net/substr)获得 的位置后使用`'mytext-'`，如下所示：

```
$match = substr($myPage, strpos( $myPage, 'mytext-') + strlen( 'mytext-')); 
```

否则，[`strpos()`](http://php.net/strpos)将只返回`'mytext-'`字符串中开始位置的数字索引。

[`str_replace()`](http://php.net/str_replace)如果您的字符串只有一次，您也可以使用它来完成此操作`'mytext-'`：

```
$match = str_replace( 'mytext-', '', $myPage); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T12:54:04.990

该函数`strpos()`返回搜索字符串开始的位置，即`0`. 如果未找到该字符串，该函数将返回`false`. 请参阅[strpos 文档](http://php.net/strpos)，它也告诉您：

> **警告**此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。

您的问题的解决方案是使用`substr()`或`preg_match()`检查是否`strpos() !== false`。

最简单的解决方案应该是这样的：

```
if (preg_match('/^mytext-/i', $_GET['page'])) {
    // do something
} 
```

您也可以考虑使用多个`GET`参数，例如

```
http://www.example.com/foo.php?page=mysite&option1=123&option2=456 
```

然后，您可以使用您的参数`$_GET['page']`，如`$_GET['option1']`, `$_GET['option2']`, 等。

但是，您还应该小心处理原始数据`$_GET`或`$_POST`数据，因为用户可以直接输入它们并可能将有害代码注入您的网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T12:53:49.807

这是预期的，因为子字符串从索引 0 开始。阅读[php.net/strpos](http://php.net/strpos)上的警告：

> **警告**
> 
> 此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。

如果您只需要检查是否`$myPage`包含“mytext-”，请使用[stristr](http://php.net/stristr)：

```
if(stristr($myPage, 'mytext-') !== false) {
   // contains..
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T13:04:31.683

preg_match 有什么问题？

```
$myPage = $_GET['page'];
if (preg_match("/\bmytext-\b/i", $myPage)) {
    //Do Something
} 
```

还是您需要“mytext-option”中的“选项”？

如果是，你可以使用这个：

```
$myPage = $_GET['page'];
$querystrings = explode("-", $myPage);
if ($querystrings[0] == 'mytext')) {
    //Do Something
    echo $querystrings[1]; //outputs option
} 
```

有了这个，您甚至可以在查询字符串中使用更多“选项”，例如“mytext-option-whatever”。
`$_GET['page'], $_GET['option'], $_GET['whatever']`
用的时候和你用的时候是一样的
`?page=mysite&option=x&whatever=y`

# prestashop - 如何在商店中添加更多图像（Prestashop）

> ID：11433090
> 
> 赞同：0
> 
> 时间：2012-07-11T12:52:09.670
> 
> 标签：prestashop

在 Prestashop 1.4 上，您可以在 BO“AdminStores”上添加商店，但您只能上传一张图片，我需要上传更多，有人对这些进行了一些修改吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:03:47.637

PrestaShop 具有“意大利面条和肉丸”代码架构。他们有（至少他们曾经有 pre 1.4）一个非常硬编码的管理区域，混合了 PHP-SQL-HTML-inline CSS-inline JavaScript，hrm“作品”。

1.  您也许可以编写一个甜蜜的前端代码来将场景与该商店的主要主页类别相关联，您只需更改其中一个根文件。

2.  在没有模块的情况下制作一个完整的后端解决方案意味着一些严重的黑客攻击和不可维护的代码，你也不能允许更新。

3.  最好的办法是找到一个模块，但它需要实现所有内容，包括新的数据库表和上传接口等，然后确保它将图像与商店相关联。

如果缺少其中任何一个，如果您拥有必要的技能，那么解决方案 2 的可能性就更大了。

# java - 如何将 Mongo DB 与 Android 应用程序连接

> ID：11433091
> 
> 赞同：2
> 
> 时间：2012-07-11T12:52:12.410
> 
> 标签：java, android, mongodb

我在 Eclipse 中生成了 Android 项目，一切正常。我添加了一些带有事件的按钮等。现在，我正在尝试创建 Mongo 对象，但它会引发错误。你有什么解决办法吗？可以同时连接这两者吗？

日志：

```
07-11 12:40:17.655: E/AndroidRuntime(724): FATAL EXCEPTION: main
07-11 12:40:17.655: E/AndroidRuntime(724): java.lang.IllegalStateException: Could not execute method of the activity
07-11 12:40:17.655: E/AndroidRuntime(724):  at android.view.View$1.onClick(View.java:3591)
07-11 12:40:17.655: E/AndroidRuntime(724):  at android.view.View.performClick(View.java:4084)
07-11 12:40:17.655: E/AndroidRuntime(724):  at android.view.View$PerformClick.run(View.java:16966)
07-11 12:40:17.655: E/AndroidRuntime(724):  at android.os.Handler.handleCallback(Handler.java:615)
07-11 12:40:17.655: E/AndroidRuntime(724):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-11 12:40:17.655: E/AndroidRuntime(724):  at android.os.Looper.loop(Looper.java:137)
07-11 12:40:17.655: E/AndroidRuntime(724):  at android.app.ActivityThread.main(ActivityThread.java:4745)
07-11 12:40:17.655: E/AndroidRuntime(724):  at java.lang.reflect.Method.invokeNative(Native Method)
07-11 12:40:17.655: E/AndroidRuntime(724):  at java.lang.reflect.Method.invoke(Method.java:511)
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-11 12:40:17.655: E/AndroidRuntime(724):  at dalvik.system.NativeStart.main(Native Method)
07-11 12:40:17.655: E/AndroidRuntime(724): Caused by: java.lang.reflect.InvocationTargetException
07-11 12:40:17.655: E/AndroidRuntime(724):  at java.lang.reflect.Method.invokeNative(Native Method)
07-11 12:40:17.655: E/AndroidRuntime(724):  at java.lang.reflect.Method.invoke(Method.java:511)
07-11 12:40:17.655: E/AndroidRuntime(724):  at android.view.View$1.onClick(View.java:3586)
07-11 12:40:17.655: E/AndroidRuntime(724):  ... 11 more
07-11 12:40:17.655: E/AndroidRuntime(724): Caused by: java.lang.NoClassDefFoundError: com.mongodb.DBPortPool
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.mongodb.DBPortPool$Holder.get(DBPortPool.java:58)
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.mongodb.DBTCPConnector.setMasterAddress(DBTCPConnector.java:486)
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.mongodb.DBTCPConnector.<init>(DBTCPConnector.java:46)
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.mongodb.Mongo.<init>(Mongo.java:192)
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.mongodb.Mongo.<init>(Mongo.java:176)
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.mongodb.Mongo.<init>(Mongo.java:130)
07-11 12:40:17.655: E/AndroidRuntime(724):  at com.example.easyrest.MainActivity.clickAddOfferButton_offer(MainActivity.java:66)
07-11 12:40:17.655: E/AndroidRuntime(724):  ... 14 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:05:08.330

此驱动程序不支持 Android。[jira](https://jira.mongodb.org/browse/JAVA-291)中有一个未解决的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-01T01:24:46.187

我知道这是一篇旧文章，但我只是想分享我的 Android + MongoDB 驱动程序经验。

首先，它有效！

事实证明，parvin 提到的问题已经修复并关闭。

但是，当您使用最新版本（撰写本文时为 2.11.3）时，您会看到一个非常可怕的错误正在自我呈现，但不用担心 - 驱动程序仍然可以工作。至少我能够进行身份验证并插入数据。

您将看到的错误如下所示：

```
I/dalvikvm(17945): Could not find method java.lang.management.ManagementFactory.getRuntimeMXBean, referenced from method org.bson.types.ObjectId.<clinit>
W/dalvikvm(17945): VFY: unable to resolve static method 7096: Ljava/lang/management/ManagementFactory;.getRuntimeMXBean ()Ljava/lang/management/RuntimeMXBean;
D/dalvikvm(17945): VFY: replacing opcode 0x71 at 0x0071
I/dalvikvm(17945): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method com.mongodb.util.management.jmx.JMXMBeanServer.<init>
W/dalvikvm(17945): VFY: unable to resolve static method 7095: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
D/dalvikvm(17945): VFY: replacing opcode 0x71 at 0x0003
E/dalvikvm(17945): Could not find class 'javax.management.ObjectName', referenced from method com.mongodb.util.management.jmx.JMXMBeanServer.createObjectName
... etc. more scary stuff ... 
```

我的工作代码如下所示：

```
MongoClient mongo = new MongoClient(ip, port);
DB db = mongo.getDB("myDatabase");
boolean auth = db.authenticate(username, password);
if (auth)
{
     DBCollection collection = db.getCollection("myCollection");
     DBObject jsonData = (DBObject) JSON.parse(jsonString);
     collection.insert(jsonData);
} 
```

我希望这对某人有所帮助，因为我对这个错误感到非常困惑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-26T19:36:24.893

我同意 Phil 的观点，它确实有效，但它似乎会断断续续，如果您需要查找更多最新库，请查看以下内容

对于那些想要最新的预编译 JAR 文件[的人 最新 Java 驱动程序的快照](https://oss.sonatype.org/content/repositories/snapshots/org/mongodb/mongo-java-driver/)

如果您想要源代码，请查看[GIT Source Repository 和指向最新稳定等的链接](https://github.com/mongodb/mongo-java-driver/tree/master)

# jquery - 使用 Jquery 在三个列表之间拖放

> ID：11433095
> 
> 赞同：0
> 
> 时间：2012-07-11T12:52:34.687
> 
> 标签：jquery, jquery-ui, drag-and-drop

我有三个使用 Jquery UI 的可排序列表。all-colls-list、coll-selected-list 和 coll-grouped-list。他们都可以通过他们的 ID 来识别。

我希望能够在 all-colls-list 和 coll-selected-list 之间拖放，反之亦然 all-colls-list 和 coll-grouped-list ，反之亦然

我不希望能够在 coll-selected-list 和 coll-grouped-list 之间拖放。

但是，我的代码不同意这一点，只允许我在 all-colls-list 和 coll-grouped-list 之间切换，反之亦然。任何帮助都感激不尽。

我在这里有一个小提琴：http: [//jsfiddle.net/noscirre/NkQBy/](http://jsfiddle.net/noscirre/NkQBy/)

```
var lists = [{
    "listid": "#all-colls-list",
    "connectid": "#coll-selected-list",
    "drop": true
}, {
    "listid": "#coll-selected-list",
    "connectid": "#all-colls-list",
    "drop": true
}, {
    "listid": "#all-colls-list",
    "connectid": "#coll-grouped-list",
    "drop": true
}, {
    "listid": "#coll-grouped-list",
    "connectid": "#all-colls-list",
    "drop": true
}];

$.each(lists, function (i, list) {
    $(list.listid).sortable({
        connectWith: list.connectid,
        dropOnEmpty: list.drop,
        receive: function (event, ui) {
            $("#all-colls-list li").css("background-image", "none");
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:15:26.833

问题是您正在覆盖该`.sortable` `connectWith`属性。您需要在单个实例中设置多个目标（或更巧妙地......）

这是[您修改后的小提琴](http://jsfiddle.net/lnrb0b/NkQBy/1/)。我想这就是你所追求的？

希望能帮助到你！:)

# perl - 总是在 Perl 脚本结束之前执行一些代码

> ID：11433098
> 
> 赞同：5
> 
> 时间：2012-07-11T12:52:43.423
> 
> 标签：perl

如何设置在 Perl 脚本停止之前必须执行的代码？

在这里[如何在 perl 脚本退出之前运行一段代码，](https://stackoverflow.com/questions/3078508/how-to-run-piece-of-code-just-before-the-exit-of-perl-script)我读到了 END 子例程，但它只有在脚本正常结束时才会执行。但是，例如，如果用户通过 ^C 中止程序，我也希望执行代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T13:00:42.570

捕获终止信号并重新路由它们，最简单的方法是：

```
$SIG{TERM} = $SIG{INT} = $SIG{QUIT} = $SIG{HUP} = sub { die; }; 
```

# c# - 将可为空的列映射到不可为空的布尔值并确保查询有效

> ID：11433100
> 
> 赞同：1
> 
> 时间：2012-07-11T12:53:03.160
> 
> 标签：c#, oracle, nhibernate, fluent-nhibernate

我有一个类型的数据库列，`number(1)`它没有非空约束。
在我的实体中，我有一个简单的`bool`属性。该属性的值是`false`它`NULL`在数据库中时的值。这是预期和想要的。

现在的问题是查询的工作方式不同。

`session.Query<Entity>(x => !x.Property)`仅返回`0`列中带有的实体，而不返回带有 . 的实体`NULL`。

有没有办法告诉 NHibernate 这样做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T13:02:17.620

sql 中的“！NULL”不正确。Null 未定义且不等于 false。您可以检查 x.Property == null 是否。

# html - 设置标签内文本的宽度适用于 IE 和 Chrome，但不适用于 Firefox

> ID：11433102
> 
> 赞同：1
> 
> 时间：2012-07-11T12:53:08.183
> 
> 标签：html, css, internet-explorer, firefox

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:42:06.153

原因是 Firefox 认为 used-miscellaneous-lasers 是一个词，因此它不想将其换行。您可以通过添加空格或`nbsp;`在 - 之后轻松解决此问题。

```
<div class="banner">    
    <a target="_blank" href="http://10.0.0.145/used/b">See All used- miscellaneous- lasers</a>
</div> 
```

否则到 div css，你可以添加`word-wrap: break-word;`; 但是，单词并不总是以可读的形式被打破。

```
div.banner {
    background: url("banner.jpg") no-repeat scroll center top transparent;
    font-size: 15px;
    font-weight: normal;
    height: 38px;
    margin-top: 20px;
    padding: 18px 24px 50px 69px;
    text-align: left;
    text-transform: uppercase;
    width: 106px;
    word-wrap: break-word; 
} 
```

[现场演示](http://jsfiddle.net/VLdRj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:58:18.667

试试这个，我添加了 **溢出：可见；**

```
div.banner {
     background: url("banner.jpg") no-repeat scroll center top transparent;
     font-size: 15px;
     font-weight: normal;
     height: 38px;
     margin-top: 20px;
     padding: 18px 24px 50px 69px;
     text-align: left;
     text-transform: uppercase;
     overflow:visible;
     width: 106px; } 
```

# java - 手动将活动旋转 180 度

> ID：11433107
> 
> 赞同：3
> 
> 时间：2012-07-11T12:53:24.937
> 
> 标签：java, android, android-layout, android-activity, screen-rotation

我要做的是在首选项屏幕上手动设置活动方向。假设默认方向为 0（常规纵向方向），用户可以转到首选项并选择让我们说 180（或 90、270）。在此之后，活动方向应更改为选择器选项。有设置纵向或横向方向的方法，但我不知道如何按度旋转活动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:02:31.023

您需要调用[youractivity.setRequestedOrientation(intorientation)](http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation%28int%29)。

这个参数不是度数，它将是来自 ActivityInfo 的常数。

[这个页面](http://developer.android.com/reference/android/content/pm/ActivityInfo.html#screenOrientation)有一些常量，但我猜你想要的是[这个](http://developer.android.com/reference/android/content/pm/ActivityInfo.html#SCREEN_ORIENTATION_LANDSCAPE)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-27T12:51:49.860

如果您当前处于纵向模式，您可以使用`mainActivity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT);`旋转 180 度或`mainActivity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE);`从横向模式旋转 180 度。

# python - 安装克隆时不支持的哈希类型

> ID：11433108
> 
> 赞同：4
> 
> 时间：2012-07-11T12:53:24.707
> 
> 标签：python, plone, hashlib

我尝试安装[plone](http://plone.org/)，但在运行脚本 install.sh 时出现问题。以下是错误详细信息：

```
raise ValueError('unsupported hash type %s' % name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found
ValueError: unsupported hash type sha512 
```

我在一个论坛上读到这个错误可能是由与操作系统上的 python 版本不兼容的 Plone 版本引起的。但是，这是plone官方网站上所说的：

> Plone Unified Installer 是一个源代码安装工具包，可在大多数类 Unix 平台上从源代码安装 Plone 及其依赖项。该套件包括 Plone、Zope 和 Python。Python 的安装方式不会改变或干扰您的系统 Python。

所以我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T13:46:33.797

这不是 Plone 独有的问题。

Python 使用 OpenSSL 作为[`hashlib`模块](http://docs.python.org/library/hashlib.html)，系统上的 OpenSSL 库不提供它需要的功能。*通常情况下*，sha256、sha384 和 sha512 算法应该默认存在，但它们不在您的系统上，和/或 python 链接到错误的系统库。

如何解决这个问题取决于您的操作系统，您没有提供任何详细信息。您可以检查安装程序的要求列表，并仔细检查您是否拥有所需的一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-25T21:00:08.430

正如@Martijn 所解释的，openssl 没有所需的哈希函数。因此，将其卸载并使用其他库，例如 libressl。我做了以下事情，它在 Mac El Capitan 上工作：

```
 brew uninstall openssl@1.1
   brew install libressl
   brew uninstall python2
   brew install python2 
```

# asp.net - SMTP 服务器不发送邮件

> ID：11433109
> 
> 赞同：0
> 
> 时间：2012-07-11T12:53:25.183
> 
> 标签：asp.net, smtp

我收到了**邮件发送**的消息。但是在收件箱中没有新的电子邮件，我在其中找到了该电子邮件 `server inetpub-> mailroot-> Queue`

请告诉我解决方案

已编辑

```
 public  string  btnSendmail()
        {
            // System.Web.Mail.SmtpMail.SmtpServer is obsolete in 2.0
            // System.Net.Mail.SmtpClient is the alternate class for this in 2.0
            SmtpClient smtpClient = new SmtpClient();
            MailMessage message = new MailMessage();

            try
            {
                MailAddress fromAddress = new MailAddress("myemail@itaxsmart.com","");
                smtpClient.Host = "localhost";
                smtpClient.Port = 25;
                message.From = fromAddress;

                message.To.Add("mailsendtol@itaxsmart.com");
                message.Subject = "Feedback";

message.IsBodyHtml = false;
message.Body = "Hello World" ;
smtpClient.Send(message);
return  "Email successfully sent.";
 }
 catch (Exception ex)
{   return  "Send Email Failed." + ex.Message;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:57:46.580

你的 SMTP 启动了吗？如果没有，请启动它。如果它已经启动，请尝试重新启动它。

还要打开日志记录，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:57:56.437

当 asp.net 设法将消息发送到 smtp 服务器时，您将收到一条成功消息。这仅表示消息已到达您的 smtp 服务器。

asp.net 无法控制您的 smtp 服务器用它做什么。

如果您的本地 smtp 服务器出现问题，请尝试使用像 gmail 这样的公共 smtp 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:27:44.803

将此代码添加到您的 web.config

```
<system.net>
    <mailSettings>
      <smtp>
        <network host="relay-hosting.secureserver.net"/>

      </smtp>
    </mailSettings>
  </system.net> 
```

并删除它

```
smtpClient.Host = "localhost";
smtpClient.Port = 25; 
```

**谢谢，
苏班卡尔**

# salesforce - 对 Salesforce 的查询返回乱序的列

> ID：11433110
> 
> 赞同：1
> 
> 时间：2012-07-11T12:53:27.960
> 
> 标签：salesforce, google-apps-script

我开发了一个 Google Apps 脚本来从 Salesforce 中的自定义对象中提取一些数据，并按以下顺序排列我的列：

```
SELECT  Component__r.Name, Component__c, Product__c, Story_Name__c, Description__c, id ,  Product_Id__c, Priority__c , StoryName FROM Story__c WHERE Product_Id__c 
```

但是，我在 Google 电子表格中的结果按以下顺序排列：

```
StoryName   Component__r    Component__c    Product__c  Product_Id__c   Priority__c Id  Description__c  Story_Name__c 
```

有人告诉我，SOQL 查询以与查询不同的顺序返回数据并不罕见。有谁知道用于使列按查询顺序出现在电子表格上的方法/函数/过程？我想在将列放在电子表格上之前这样做，但如果没有其他方法，那没关系。

我的数据在这个函数中被拉回：

```
 function renderGridData(object, renderHeaders){
    var sheet = SpreadsheetApp.getActiveSheet();

 var data = [];
var sObjectAttributes = {};

//Need to always build headers for row length/rendering
var headers = buildHeaders(object.records);

 if(renderHeaders){  
  data.push(headers);
}

for (var i in object.records) {
var values = [];
for(var j in object.records[i]){
  if(j!="attributes"){
    values.push(object.records[i][j]);
  } else {
    var id = object.records[i][j].url.substr(object.records[i][j].url.length-18,18);
    //Logger.log(id);
    sObjectAttributes[id] = object.records[i][j].type;
  }
}
data.push(values);
}

Logger.log(sheet.getLastRow());
var destinationRange = sheet.getRange(sheet.getLastRow()+1, 1, data.length, headers.length);
 destinationRange.setValues(data);
 } 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:04:44.793

Partner SOAP APi 是唯一会尝试将字段顺序从查询保留到结果结构中的 API。

对于来自 REST API 的基于 JSON 的响应，JSON 明确表示对象键/值是无序的，因此保留顺序的响应需要使用不同的 JSON 结构（键/值对象数组），这将显着增加冗长。

# bash - 在bash中执行命令时路径中有多个可执行文件时生成警告

> ID：11433111
> 
> 赞同：6
> 
> 时间：2012-07-11T12:53:32.110
> 
> 标签：bash

说我有：

```
>which -a foo
/bin/foo
/usr/bin/foo 
```

我想要类似的东西：

```
>foo
Warning: multiple foo in PATH
... foo gets executed ... 
```

今天，这个功能可以为我节省很多时间。我应该早点猜到这会发生，但一开始我并不清楚这个问题，我开始朝完全相反的方向挖掘。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T13:08:03.230

好吧，你可以做到，但这并不像你想象的那么容易。

首先，您需要创建一个函数来检查 PATH 中的所有目录，并在那里查找您尝试运行的命令。然后您需要将此函数绑定到当前 shell 的 DEBUG 陷阱。

我写了一个小脚本来做到这一点：

```
$ cat /tmp/1.sh

check_command()
{
    n=0
    DIRS=""
    for i in $(echo $PATH| tr : " ")
    do 
        if [ -x "$i/$1" ]
        then 
            n=$[n+1]
            DIRS="$DIRS $i"
        fi
    done
    if [ "$n" -gt 1 ]
    then
      echo "Warning: there are multiple commands in different PATH directories: "$DIRS
    fi
}

preexec () {
    check_command $1
}
preexec_invoke_exec () {
    [ -n "$COMP_LINE" ] && return  # do nothing if completing
    local this_command=`history 1 | sed -e "s/^[ ]*[0-9]*[ ]*//g"`;
    preexec "$this_command"
}
trap 'preexec_invoke_exec' DEBUG 
```

使用示例：

```
$ . /tmp/1.sh
$ sudo cp /bin/date /usr/bin/test_it
$ sudo cp /bin/date /bin/test_it
$ test_it
Warning: there are multiple commands in different PATH directories:  /usr/bin /bin
Wed Jul 11 15:14:43 CEST 2012
$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:05:02.650

这是可能的，尽管概括起来有点技巧。[请参阅我对https://unix.stackexchange.com/q/42579/20437](https://unix.stackexchange.com/q/42579/20437)的回答以了解`history`和`PROMPT_COMMAND`魔术。你的 checkSanity 函数看起来像这样：

```
checkSanity() {
  cmd="${1%% *}" # strip everything but the first word
  candidates=$(which -a $cmd | wc -l)
  if (( candidates > 1 )); then
    echo "Warning: multiple $cmd in PATH"
  fi
} 
```

但这将在命令完成后打印警告，而不是在开始时。改用 DEBUG 陷阱来获得想要的结果：

```
trap 'checkSanity "$BASH_COMMAND"' DEBUG 
```

# javascript - ie7 和 ie8 中的 JQuery/Javascript 问题

> ID：11433116
> 
> 赞同：-6
> 
> 时间：2012-07-11T12:53:51.183
> 
> 标签：javascript, jquery, css

这部分在 ie8 和 ie7 中不起作用，我不知道为什么。它适用于所有其他经过测试的浏览器：IE9、Chrome 和 FF。

```
function onCheckChange() {

    var rowCount = 0 //amount of rows selected
    $("input.check-box-name:checked").each(function () {
        rowCount++;
    });

    if (rowCount > 0) {
        $("#lnkMulti_Remove").removeAttr("style");
        $("#lnkMulti_Remove").css('color', 'blue');
        if(rowCount == 1)
            $("#lnkMulti_Remove").html("Remove");
        else
            $("#lnkMulti_Remove").html("Remove Multiple");
       // $("#lnkMulti_Remove").removeAttr("style");
    } 
    else {
        $("#lnkMulti_Remove").html("Remove");
        $("#lnkMulti_Remove").css('color', 'gray');
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:04:01.570

过去我在旧 IE 版本中使用 .html() 时遇到过问题。您可能会考虑为此使用直接的 javascript。例如：

```
document.getElementById('lnkMulti_Remove').innerHTML = 'Remove'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:38:59.973

问题最终是 onchange 函数不包括选中该框，在 IE7 和 IE8 中，所以它等待运行脚本，直到我改变焦点，这最初并不明显。当我将事件更改为 onclick 时，一切都更加顺利。

谢谢大家

# c# - 用于电话号码验证的正则表达式，以 0 或 + 号开头的数字

> ID：11433122
> 
> 赞同：2
> 
> 时间：2012-07-11T12:54:00.637
> 
> 标签：c#, asp.net, regex

谁能帮助我，我需要一个用于电话号码验证的正则表达式，它可以接受 0 或 +

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:57:25.357

```
[0+]\d{9} 
```

当您需要整个字符串等于您必须添加的数字`^`时`$`：

```
^[0+]\d{9}$ 
```

`[0+]`指`0`或`+`；`\d`表示*任何数字*；`{9}`表示“重复 9 次”； `^`表示行首；^$^ 表示行尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T12:58:49.200

为此使用以下正则表达式：

```
^[+0]\d+ 
```

谢谢

# python - runInteraction() 中的 Scrapy mysql 管道关键部分

> ID：11433127
> 
> 赞同：1
> 
> 时间：2012-07-11T12:54:13.407
> 
> 标签：python, multithreading, twisted, scrapy, mysql-python

我需要帮助修复管道抓取代码中的关键部分。

我在 scrapy 中使用这个 MySQL 管道（来自[http://snippets.scrapy.org/snippets/33/](http://snippets.scrapy.org/snippets/33/)）：

```
class SQLStorePipeline(object):

def __init__(self):
    self.dbpool = adbapi.ConnectionPool('MySQLdb', db='mydb',
            user='myuser', passwd='mypass', cursorclass=MySQLdb.cursors.DictCursor,
            charset='utf8', use_unicode=True)

def process_item(self, item, spider):
    # run db query in thread pool
    query = self.dbpool.runInteraction(self._conditional_insert, item)
    query.addErrback(self.handle_error)

    return item

def _conditional_insert(self, tx, item):
    # create record if doesn't exist. 
    # all this block run on it's own thread

    # START CRITICAL SECTION
    some_critical_code_here
    # STOP CRITICAL SECTION

    tx.execute("select * from websites where link = %s", (item['link'][0], ))
    result = tx.fetchone()
    if result:
        log.msg("Item already stored in db: %s" % item, level=log.DEBUG)
    else:
        tx.execute(\
            "insert into websites (link, created) "
            "values (%s, %s)",
            (item['link'][0],
             datetime.datetime.now())
        )
        log.msg("Item stored in db: %s" % item, level=log.DEBUG)

def handle_error(self, e):
    log.err(e) 
```

一切正常。

如您所见，我已经知道代码中的关键部分在哪里。但是**我对python真的很**陌生，**不知道如何使用一些锁或类似的东西**来防止多个线程进入关键部分。

你能帮我么？如果您可以向我发送进入和离开我可以在此代码中使用的关键部分的代码，那就太好了。

谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T23:54:31.197

即使您使用的是 Twisted，通常涉及阻塞的所有事情都需要以不同的方式完成，但您处于 Twisted 的特定部分，其中阻塞是可以的。所以这应该像分配一个所有线程都能够引用的 Lock 对象一样简单，然后获取它：

```
import threading

insert_critical_lock = threading.Lock()

...

def _conditional_insert(self, tx, item):

    with insert_critical_lock:
        # START CRITICAL SECTION
        some_critical_code_here
        # STOP CRITICAL SECTION

    tx.execute("select * from websites where link = %s", (item['link'][0], ))
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:40:00.783

无论如何，我通过将关键部分 thx 中的 sql 语句合并到 scrapy IRC 上的 nick toothrot 来解决这个想法

# image - CakePHP 提交图像类型区分保存和打印并保存

> ID：11433128
> 
> 赞同：2
> 
> 时间：2012-07-11T12:54:13.690
> 
> 标签：image, cakephp, form-submit

在我的 CakePHP 1.3 版本中，我有两个提交类型的图像标签，如下所述：

```
echo $form->submit('save-print.jpg' , array('name'=>'savenprint','value'=>"savenprint",'id'=>"savenprint"));

echo $form->submit('save.jpg'); 
```

现在，我想要在我的控制器中识别提交了哪个按钮，是“保存”还是“打印并保存”

所以我已经申请`name and value`了他们每个人，在 Chrome 浏览器中，我得到了名称和值对，而在 Mozilla Firefox 中，我没有得到相同的结果。

任何想法，如何实现？或者我的代码中有什么问题或缺失。

尽早回复将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:57:02.760

您的表单应如下所示：

```
echo $form->submit('save-print.jpg' , array('name'=>'savenprint','value'=>"save",'id'=>"savenprint"));
echo $form->submit('save.jpg', array('name'=>'savenprint','value'=>"savenprint",'id'=>"savenprint")); 
```

在您的控制器中使用：

```
if($this->data['ModelName']['sbmtfrm_x'] == 'save')
{
     //Your save code here
}
else if($this->data['ModelName']['sbmtfrm_x'] == 'savenprint')
{
     //Your savenprint code here
} 
```

另一种解决方案是制作一个隐藏字段并在您的 jquery 代码中单击提交按钮时设置它的值，如下所示：

你的表格：

```
echo $form->submit('save-print.jpg' , array('name'=>'savenprint','value'=>"save",'id'=>"savenprint", 'class' => 'submitBtn'));    
echo $form->submit('save.jpg', array('name'=>'savenprint','value'=>"savenprint",'id'=>"savenprint", 'class' => 'submitBtn'));
echo $form->hidden('sbmtValue', array('id' => 'sbmtValue', 'value' => '')); 
```

您的 jquery 代码应如下所示：

```
$(document).ready(function(){
    $('.submitBtn').click(function(){
       $('#sbmtValue').val($(this).val());
    });
}); 
```

在您的控制器的操作中使用：

```
if($this->data['ModelName']['sbmtValue'] == 'save')
{
     //Your save code here
}
else if($this->data['ModelName']['sbmtValue'] == 'savenprint')
{
     //Your savenprint code here
} 
```

希望它对你有用。

# python - Python：在超级方法调用中调用子类的方法

> ID：11433133
> 
> 赞同：2
> 
> 时间：2012-07-11T12:54:30.150
> 
> 标签：python

**编辑：我的假设是错误的；下面的代码确实像我想要的那样工作。我观察到的行为原来是由我正在使用的另一部分代码引起的，我忽略了它，因为它看起来完全不相关。**

所以我有一些这样的代码结构：

```
class B(object):
    def foo(self):
        print "spam"

    def bar(self):
        do_something()
        self.foo()
        do_something_else()

class C(B):
    def foo(self):
        print "ham"

    def bar(self):
        super(C, self).bar()
        print "eggs"

c = C()
c.bar() 
```

这将 do_something()，打印“spam”，do_something_else()，然后打印“eggs”。但是，我*想做*的是do_something()，打印“ham”，do_something_else()，然后打印“eggs”。换句话说，我想从 C 的 bar 方法中调用 B 的 bar 方法，但我希望*它*调用 C 的 foo 方法，而不是 B 的。

有没有办法做到这一点？请注意，在我正在处理的实际代码中，B 类和实际调用 c.bar() 的代码都是不断发展的第三方库的一部分，因此不得已而为之。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:03:00.790

您发布的代码可以满足您的需求。

当`B.bar`调用`self.foo()`when`self`是一个对象类型`C`时，它会调用`C.foo`.

这是有效的，因为首先在' 实际类型的方法解析顺序 C3 线性化类和基类元组（此处）`self.foo`上查找。这将在之前返回。`self``self``(C, B, object)``C.foo``B.foo`

# javascript - 使用 jquery 在 django 中验证表单

> ID：11433152
> 
> 赞同：0
> 
> 时间：2012-07-11T12:55:38.273
> 
> 标签：javascript, jquery, ajax, django, django-templates

我有以下代码来使用 jquery 验证表单我不知道为什么它不起作用？

```
jQuery(function(){
    jQuery("#task_name").validate({
        expression: "if(VAL) return true; else return false;", message: "please enter task name" 
    });
    jQuery("#task_city").validate({
        expression: "if ( VAL) return true; else return false;", message: "please enter task  city"
    });
    jQuery("#task_address").validate({
        expression: "if (VAL) return true; else return false;", message: "please enter task   address"
    });
    jQuery("#task_desc" ).validate({
        expression: "if (VAL) return true; else return false;", message: "please enter task   desc"
    });
    jQuery("#task_price").validate({
        expression: "if (VAL) return true; else return false;", message: "please enter task  price"
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:03:32.757

根据[jQuery Validation 插件文档](http://docs.jquery.com/Plugins/Validation/validate)，您必须使用`messages`而不是`message`.

该插件也适用于整个表单，一次不是一个表单字段，请仔细阅读文档。

根据文档，这样的东西应该适合你：

```
jQuery(function(){
    /* You do not need to use jQuery instead of $ inside of a jQuery declared function */
    $("#form_id").validate({
        rules: {
            /* #task_name name */
            name1: "required",
            /* #task_city name */
            name2: "required",
            /* #task_address name */
            name3: "required",
            /* #task_desc name */
            name4: "required",
            /* #task_price name */
            name5: "required"
        },
        messages: {
           name1: "please enter task name",
           name2: "please enter task city",
           name3: "please enter task address",
           name4: "please enter task desc",
           name5: "please enter task price",
       }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:59:41.703

除了您可能添加到表单中的任何前缀之外，Django 还会在表单字段前面加上 'id_' 前缀，以防止具有相同字段的表单类之间的命名冲突。我敢打赌，您只是错误地按 ID 引用字段。使用 Firebug 或类似的检查实用程序检查渲染模板的 DOM，并确保您通过正确的 ID 引用字段。

# windows-phone-7 - 如何在wp7中将字节数组写入服务器中的文本文件

> ID：11433156
> 
> 赞同：0
> 
> 时间：2012-07-11T12:55:55.710
> 
> 标签：windows-phone-7

我想在服务器代码正在运行上将字节数组写入 txt 文件，但它没有显示服务器文件上的任何内容..我该如何编写它

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    Stream mystream = Application.GetResourceStream(new Uri(@"LoadVideo;component/test.mp4", UriKind.Relative)).Stream;

    byte[] myarray = new byte[mystream.Length];
    int bytesRead = mystream.Read(myarray, 0, (int)mystream.Length);

    mystream.Close();

    WebClient wc = new WebClient();
    wc.OpenWriteCompleted += new OpenWriteCompletedEventHandler(wc_OpenWriteCompleted);

    Uri u = new Uri("http://xyz/New.txt");
    wc.OpenWriteAsync(u, null, new object[] { myarray, bytesRead }); // Upload the file to the server
}

void wc_OpenWriteCompleted(object sender, OpenWriteCompletedEventArgs e) // The upload completed
{
    if (e.Error == null)
    {
        // Upload completed without error
    }
} 
```

我的代码正确吗？请提出任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:16:29.570

我会使用套接字。下面是一个例子： [WP7 套接字教程](http://www.pitorque.de/MisterGoodcat/post/Windows-Phone-7-Mango-Sockets.aspx)

# xml - 从另一个 xml 填充 cdata 中的文本

> ID：11433163
> 
> 赞同：-1
> 
> 时间：2012-07-11T12:56:20.030
> 
> 标签：xml, cdata

第一个 XML -`mainfood.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE doc [
<!ENTITY fooditems SYSTEM "foodnames.xml">
]>
<content>

<section name="pages">

    <page name="food">

    <texts>

<pageText> <![CDATA[
<font face="arial">food</font>
]]></pageText>

<pageText><![CDATA[
&fooditems;
]]></pageText>

</texts>
        </page> 

</section>

</content> 
```

第二个 XML -`foodnames.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<a >• <font face="Georgia">chicken biryani<br></a></font>
<a >• <font face="Georgia">manchurian<br></a></font>
<a >• <font face="Georgia">aloo dum<br></a></font>
<a >• <font face="Georgia">sushi<br></a></font> 
```

基本上，我希望`<a >• <font face="Georgia">chicken biryani<br></a></font>`从中读取`foodnames.xml`并填充这些行来`mainfood.xml`代替`&fooditems;`

但是代码不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:58:05.153

CDATA 显式阻止标记产生任何影响。您不能在 CDATA 块内使用实体（这是拥有 CDATA 的一半，另一半是停止标签产生任何影响）。

# symfony - 带有“_locale”的 FosJsRoutingBundle

> ID：11433166
> 
> 赞同：0
> 
> 时间：2012-07-11T12:56:38.407
> 
> 标签：symfony, fosuserbundle

例如，我有一个这样的脚本：

```
 Routing.generate('_moderation_profile_confirm',{'id':objectId,'_locale':'en'}) 
```

是正确的，但是当我删除“_locale”参数时，它会向我发送错误，例如必须设置“_locale”。我的路由名称 _moderation_profile_confirm 包含一个“_locale”前缀，但我如何发送路由管理器的“当前”语言环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:18:27.093

我想你在树枝模板中：

您可以使用此速记并获取当前语言环境：

```
Routing.generate('_moderation_profile_confirm',{'id':objectId,'_locale':'{{ app.session.locale }} '}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-05T11:35:23.700

我在这里复制我在这里提出的回复 [https://stackoverflow.com/a/35223108/279326](https://stackoverflow.com/a/35223108/279326)

要将请求区域设置为您对 Routing.generate 的所有调用，您可以覆盖此方法并在每个调用中添加 {{app.request.locale}} 参数。以下脚本必须在 twig 模板中并在包含路由脚本之后执行。

```
<!-- Include JSRouting libs & exposed routes -->
<script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
<script src="{{ path('fos_js_routing_js', {"callback": "fos.Router.setData"}) }}"></script>

<script>
    $(function () {
        // change name of initial method
        Routing.generateImpl = Routing.generate;
        // override generate fonction by adding a default _locale from request locale
        Routing.generate = function (url, params) {
            var paramsExt = {};
            if (params) {
                paramsExt = params;
            }
            if (!paramsExt._locale){
                paramsExt._locale = '{{ app.request.locale }}';
            }
            return Routing.generateImpl(url, paramsExt);
        }
    })
</script> 
```

现在您可以透明地使用 Routing.generate 而无需担心 _locale 参数！

```
// in any JS file
var url = Routing.generate('mypath');
var url2 = Routing.generate('another path', {param: 1}); 
```

为了澄清代码，可以将之前的脚本隔离在一个 js 文件中。为此，必须定义一个全局变量。

```
<!-- for exemple in the <head> of the page -->
<script>
    var REQUEST_LOCALE = '{{ app.request.locale }}';
</script> 
```

所以在脚本中你可以使用 REQUEST_LOCALE

```
// this line
paramsExt._locale = '{{ app.request.locale }}';
// has to be replaced by
paramsExt._locale = REQUEST_LOCALE; 
```

# c# - 调试：Microsoft JScript 运行时错误

> ID：11433167
> 
> 赞同：3
> 
> 时间：2012-07-11T12:56:43.997
> 
> 标签：c#, asp.net, debugging, error-handling

我迫切需要调试帮助，现在已经被这个错误困住了 6 天.....

我在我的 ASp.net 应用程序中遇到的错误是：

```
Microsoft JScript runtime error: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed. Common causes for this error are when the response is modified by calls to Response.Write(), response filters, HttpModules, or server trace is enabled.
Details: Error parsing near '<script type='text/j'. 
```

下面是相关的代码片段，

```
 CollyDataExchangeWebService Col_ValSub = new CollyDataExchangeWebService();
    CollyReportServiceRequest ServiceReq = new CollyReportServiceRequest();
    CollyReportServiceRequestData ServiceReqData = new CollyReportServiceRequestData();

    ServiceReqData.AmendmentIndicatorSpecified = true;
    ServiceReqData.AmendmentIndicator = false;

    ServiceReqData.CollyReport = ColRep;
    ServiceReq.ServiceRequestData = ServiceReqData;
    ServiceReq.ServiceRequestHeader = ServiceHeader;

    errValidate = null;

    //btnOK.OnClientClick = "MSGShow()";
    bool Valid = true;
    string ErrMsgs = "";

    if (((System.Web.UI.WebControls.Button)(sender)).CommandArgument == "Validate")
    {
        CollyReportServiceResponse ValResponse = Col_ValSub.validateReport(ServiceReq);

        switch (ValResponse.ServiceResponseHeader.ServiceStatus)
        {
            case ServiceStatus.Successful:

                btnOK.OnClientClick = "";
                valHeader.Text = "Validation is Completed. No errors were found";
                mlValPopup.Show();

                break;

            case ServiceStatus.ValidationErrors:
                Valid = false;
                ErrMsgs = ErrMsgs + _ValidationError(ValResponse);
                ValBTN.Update();
                mlValPopup.Show();
                break;

            case ServiceStatus.SystemError:
                btnOK.OnClientClick = "";
                Valid = false;
                ErrMsgs = ErrMsgs + _SystemError(ValResponse);
                ValBTN.Update();
                mlValPopup.Show();
                break;
        } 
```

经过数小时的调试，我发现这条线导致了错误：

```
CollyReportServiceResponse ValResponse = Col_ValSub.validateReport(ServiceReq); 
```

经过 6 天的调试和挫折后，我发现某些记录会导致此问题，而其他记录不会在旧版本的代码中，但在新版本中，所有记录都会导致此错误，因此它必须对数据库中的数据进行处理，这意味着代码中的某些方法与 null 的行为不同，但我无法确切找出问题所在，因为我的应用程序是 30k 行代码

在搜索并尝试了各种解决方案之后，以下 2 不是我的问题的解决方案。

forums.asp.net/t/1357862.aspx [http://www.vbforums.com/showthread.php?t=656246](http://www.vbforums.com/showthread.php?t=656246)

我想提一下，我已经很难处理这个应用程序了，因为它是由其他程序员编写的，这些程序员现在早已不复存在，留下了未记录或注释的意大利面条代码。

我没有对此进行编码，但过去的其他程序员已将 Response.Write 放入代码中：

```
 private void MessageBox(string msg)
    {
        if (!string.IsNullOrEmpty(msg))
        {
            Global.tmpmsg = msg;
            msg = null;
        }
        Response.Write("<script type=\"text/javascript\" language=\"javascript\">");
        Response.Write("window.open('ErrorPage.aspx?msg=" + "','PopUp','screenX=0,screenY=0,width=700,height=340,resizable=1,status=no,scrollbars=yes,toolbars=no');");
        Response.Write("</script>");

    } 
```

这是另一种方法：

```
 Response.Write("<script type=\"text/javascript\" language=\"javascript\">");
        Response.Write("alert('No search resuls were found');");
        Response.Write("</script>"); 
```

或这个：

```
if (!string.IsNullOrEmpty(msg))
{
    Global.tmpmsg = msg;
    Response.Write("<script type=\"text/javascript\" language=\"javascript\">");
    Response.Write("window.open('ErrorPage.aspx?msg=" + "','PopUp','screenX=0,screenY=0,width=700,height=340,resizable=1,status=no,scrollbars=yes,toolbars=no');");
    Response.Write("</script>");
} 
```

在 Jrummel 发表评论后，我将其添加到代码中，然后什么也没有发生。

```
private void MessageBox(string msg)
{/*
    if (!string.IsNullOrEmpty(msg))
    {
        Global.tmpmsg = msg;
        msg = null;
    }
    Response.Write("<script type=\"text/javascript\" language=\"javascript\">");
    Response.Write("window.open('ErrorPage.aspx?msg=" + "','PopUp','screenX=0,screenY=0,width=700,height=340,resizable=1,status=no,scrollbars=yes,toolbars=no');");
    Response.Write("</script>");
    */
// Define the name and type of the client scripts on the page.
String csname1 = "PopupScript";
Type cstype = this.GetType();

// Get a ClientScriptManager reference from the Page class.
ClientScriptManager cs = Page.ClientScript;

// Check to see if the startup script is already registered.
if (!cs.IsStartupScriptRegistered(cstype, csname1))
{
    String cstext1 = "<script type=\"text/javascript\" language=\"javascript\">" + " " + "window.open('ErrorPage.aspx?msg=" + "','PopUp','screenX=0,screenY=0,width=700,height=340,resizable=1,status=no,scrollbars=yes,toolbars=no');" + " " + "</script>";
  cs.RegisterStartupScript(cstype, csname1, cstext1, false);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T14:00:55.047

经过 2 周的调试和 2 天的暴力破解后，我发现了错误：

在我拥有的 800 个数据库列之一中，有一个空值/不正确的值。这个值与我的 ASP.NET 代码中的 150 种方法之一发生反应，即使 Response.Write() 不是问题，也会显示 JavaScript 错误。我还没有找到对这个值做出反应的方法，但我找到了解决方案，即简单地在列记录上输入一个有效值。

程序员如何蛮力找到问题：

在我的情况下，经过长时间的调试，我采集了一个工作记录的样本和另一个错误前导记录的样本。一旦我实现了这一点，我就使用了

```
DELETE FROM tablename WHERE UniqueColID= unique identifier for the error causing record 
```

然后我做了：

```
INSERT INTO tablename ([uniqueIdentifier],[ column 2],[column 3]) SELECT @UniqueIdentifierofErrorCausingRecord, column2, [column3] FROM TableName WHERE [uniqueIdentifier]=@UniqueIdentifierForWorkingRecord; 
```

第一条语句所做的是删除非工作记录，然后第二条语句重新插入具有工作记录的相同列值但具有非工作记录的唯一标识符的记录。通过这种方式，我可以遍历每个表以查找导致错误的表，然后我可以查明该表的哪一列是问题所在。

在我的情况下，具体问题是 DateTime.TryParse()，因为以不正确的格式插入了表列值。代码在其中一种方法中执行了字段填充，而没有使用 DateTime.Parse 方法进行尝试和捕获……之后一些测试似乎即使是 try/catch 也无法发现这个错误，因为它是一个 javascript 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:09:14.577

不要使用`Response.Write()`. ~~相反，创建一个[`LiteralControl`](http://msdn.microsoft.com/en-us/library/system.web.ui.literalcontrol.aspx)并将其添加到页面。~~

用于[`ClientScriptManager`](http://msdn.microsoft.com/en-us/library/z9h4dk8y)向页面添加脚本。这是来自 MSDN 的示例：

```
// Define the name and type of the client scripts on the page.
String csname1 = "PopupScript";
Type cstype = this.GetType();

// Get a ClientScriptManager reference from the Page class.
ClientScriptManager cs = Page.ClientScript;

// Check to see if the startup script is already registered.
if (!cs.IsStartupScriptRegistered(cstype, csname1))
{
  String cstext1 = "alert('Hello World');";
  cs.RegisterStartupScript(cstype, csname1, cstext1, true);
} 
```

# foursquare - Foursquare：真实的批量索赔场所

> ID：11433175
> 
> 赞同：0
> 
> 时间：2012-07-11T12:57:25.840
> 
> 标签：foursquare

这是房地产行业的案例

是否可以将待售住宅添加为代理商的场所？（不是代表办公室，而是代表它自己的产品）？

这可以通过房地产方面（如 4square 的 API 提要）自动完成，而不是使用 bulkclaim excel 文件吗？

系统是否允许自动管理场地（待售房屋）并在售出后将其删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T22:24:22.527

您始终可以使用[场所/添加](https://developer.foursquare.com/docs/venues/add)端点添加场所，但您可能无法立即删除场所。另请注意，未经同意在foursquare 上添加一个人的家是违反foursquare 的政策的。

# cuda - Visual C++ 中的 OpenACC

> ID：11433176
> 
> 赞同：4
> 
> 时间：2012-07-11T12:57:28.493
> 
> 标签：cuda, opencl, openmp, openacc

我想用 OpenACC 指令并行化我的代码。据说它是一个跨平台的API。开发公司没有提供有关 VisualStudio 中 OpenACC 的信息。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T03:23:01.827

目前只有 PGI、CAPS 和 Cray 提供 OpenACC 实现。[我认为 PGI 在2010 年的时事通讯](http://www.pgroup.com/lit/articles/insider/v2n3a3.htm)中提到了 Visual Studio 的 beta 级插件，但我认为他们没有任何官方支持。CAPS 仅在其网站上提及 Linux 支持。Cray 仅适用于 Cray 集群的用户，我不相信他们运行 Windows。

所以我认为目前你需要一台 Linux 机器或者可能是 Mac。我预计这会在未来发生变化，但我不知道具体的计划。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T14:17:56.423

CAPS Entreprise 现在还提供 Windows 版本：http: [//www.caps-entreprise.com/products/caps-compilers/](http://www.caps-entreprise.com/products/caps-compilers/)

# java - JPanel在缩放时不显示背景图片

> ID：11433181
> 
> 赞同：1
> 
> 时间：2012-07-11T12:57:49.650
> 
> 标签：java, image, swing, jpanel

我试图在 JPanel 上设置一个背景图像，该图像会随面板调整大小。我在显示图片时没有问题，但是一旦我使用：

`background = background.getScaledInstance(300, -1, Image.SCALE_SMOOTH );`

什么都没有显示。关于为什么的任何想法？

编码：

```
import javax.swing.*;
import java.awt.*;

public class LoginJPanel extends JPanel
{
  private Image background;

  public LoginJPanel()
  {
    super();

    background = new ImageIcon("C:\\ASYS\\Stories\\Authentication UI\\AVDsplashscreen_tiny.jpg").getImage();
  }

  @Override
  protected void paintComponent(Graphics g)
  {
    super.paintComponent(g);
    background = background.getScaledInstance(300, -1, Image.SCALE_SMOOTH );
    g.drawImage(background, 0, 0, this);
  }

  public static void main (String[] args)
  {
         LoginJPanel ip = new LoginJPanel();
        JFrame jf = new JFrame ();
        jf.setLayout (new BorderLayout ());
        jf.add (ip, BorderLayout.CENTER);
        jf.setSize (1000, 600);
        jf.setLocation (150, 150);
        jf.setVisible (true);
        jf.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:01:50.083

最后我所做的是（如评论所建议的）将缩放移到绘制方法之外。我创建了一个从父组件调用的公共方法，以通知面板有关新尺寸的信息，并据此缩放图片：

```
 public void initSize(int _width, int _height)
  {
    int h = background.getHeight(null);
    int w = background.getWidth(null);

    if (w - _width > h - _height)
    {
      scaleVertically(_width, _height);
    }
    else
    {
      scaleHorizontally(_width, _height);
    }
  } 
```

我想我应该对一些听众这样做，因为这不是很优雅，但我不知道该怎么做。

# c++ - LNK2019 错误构建 ZeroMQ Hello World 示例。VS2012 遥控

> ID：11433182
> 
> 赞同：2
> 
> 时间：2012-07-11T12:57:50.073
> 
> 标签：c++, linker-errors, zeromq, visual-studio-2012

尝试从 ZeroMQ 构建“hello world”示例时出现以下错误。

```
Error LNK2019: unresolved external symbol __imp__zmq_msg_init
referenced in function _wmain 
```

我已将库和标头路径添加到项目中（顺便说一句，我如何将它们添加到默认设置？）并且我尝试添加“libzmq-v100-mt.lib”（和“libzmq-v100-mt-gd .lib") 到链接器的附加输入属性。这没有帮助。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:31:16.287

默认情况下， ZeroMQ 标头（[`zmq.h`特别是](https://github.com/zeromq/zeromq2-x/blob/master/include/zmq.h#L36)）似乎仅支持 win32 上的动态链接。

试试看。`#define`_ `ZMQ_EXPORT`这样，它就不会看到`__declspec(dllimport)`声明，也不会期望链接到`.dll`.

# hibernate - Hibernate：@OrderBy 与 @OrderColumn 维护集合的顺序

> ID：11433195
> 
> 赞同：15
> 
> 时间：2012-07-11T12:58:19.787
> 
> 标签：hibernate

在持久化以及从数据库中检索的同时维护集合顺序的首选方法是什么？

我知道 @OrderBy 更像是一种内存排序，只有当您按照您选择的列的顺序保留行时，它才可能在检索时起作用。

假设我选择使用由数据库序列支持的列，将休眠确保集合中的元素以与集合中相同的顺序保存（例如列表）。

任何想法？

## 更多细节：

假设我有一个 A 类，它与 B 类具有一对多关系。B 有一个主键字段“Id”，它由 DB 中的序列支持。

```
Class A {
  List<B> bList;
} 
```

我一直想保留 A 中元素 B 的顺序，如下所示：

```
bList = { b1, b2, b3 } 
```

一种实现方法是使用@OrderBy（“Id ASC”）。仅当列表 B 按以下顺序保留时，这才有效：

```
----------------
Id ----bValue
----------------

1------ b1
2------ b2
3-------b3
------------------ 
```

当我们检索时，因为它是按 Id 排序的，所以顺序保持不变。

假设集合 B 以下列方式持久化：

```
----------------
Id ----bValue
----------------
1------ b2
2------ b1
3-------b3
------------------ 
```

当我们检索时，列表 B 的顺序进行了折腾（因为它是按 Id 列排序）。所以我的问题是，如果集合 B 始终以与列表中出现的顺序相同的顺序持续存在。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-11T13:09:22.997

OrderBy 在生成的 SQL 中添加 order by 子句，以按目标实体表的列对检索到的集合的成员进行排序：

```
@OrderBy("lastname ASC")
public List<Student> students; 
```

将生成一个 SQL 查询，如

```
select ... order by student.lastname ASC 
```

OrderColumn 定义表中附加列的名称，包含列表中实体的*索引*。如果更改列表中元素的顺序，Hibernate 将更改此列的值。如果您的学生在此列中有 0、3 和 5 作为值，则列表将是

```
[student0, null, null, student3, null, student5] 
```

这在这两个注释[的 javadoc](http://docs.oracle.com/javaee/6/api/)中有很好的描述。

编辑：

B 标识符的分配顺序取决于您如何持久化这些 B 实例：

*   如果您明确调用`session.save()`, of `session.saveOrUpdate()`，这将为实体分配一个 ID，因此为 b1、b2 和 b3 调用它将遵守顺序
*   AFAIK，所有其他方法（级联、合并（）、持久化（））不保证任何顺序（除非你合并或持久化，然后`flush()`）

因此，如果您希望列表按此顺序保存 b1、b2 和 b3，而不管它们的持久化方式如何，最好的办法是向`@OrderColumn`集合添加注释。Hibernate 将自动填充此列，其中 b1 为 0，b2 为 1，b3 为 2。当您重新加载父实体时，它们在列表中的顺序相同。

# mpeg-2 - mpeg2可以通过改变其编解码器的配置参数来编码高清视频吗？

> ID：11433198
> 
> 赞同：0
> 
> 时间：2012-07-11T12:58:28.203
> 
> 标签：mpeg-2

根据 MPEG-2 编解码器的配置参数设置，我意识到它可以编码高清视频格式，但我仍然怀疑。有人确定这是否可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T01:11:43.370

你为什么怀疑它？

*   [http://en.wikipedia.org/wiki/MPEG-2](http://en.wikipedia.org/wiki/MPEG-2)
*   [https://www.google.com/?q=MPEG-2%20codec%20+%20HD](https://www.google.com/?q=MPEG-2%20codec%20+%20HD)

# c# - 将数据传递到由 Javascript 打开的 ModalPopupExtender

> ID：11433199
> 
> 赞同：1
> 
> 时间：2012-07-11T12:58:28.553
> 
> 标签：c#, javascript, asp.net, ajaxcontroltoolkit, modalpopupextender

在我的代码隐藏中，我使用 javascript 打开了一个 ModalPopup

```
javascript: $find('BehaviorID').show() 
```

效果很好。但我还需要从选定的 gridview 行中传递一个用户名，以便我可以从数据库中获取一些数据并显示它们。

概述：

*   我有一个显示数据行的gridview。
*   我可以单击一行以打开有关用户（数据）的详细信息。
*   我需要将所选行的用户名传递给 ModalPopupExtender

我怎样才能做到这一点？

顺便说一句，我对 javascript 一点也不熟悉，但是当我看到代码时我就明白了，所以如果你有 javascript 解决方案，请不要犹豫分享。

谢谢

这是调用javascript方法的代码

```
e.Row.Attributes.Add("ondblclick", "javascript: $find('BehaviorID').show()"); 
```

它在 GridView 的每个 DataRow 的 for 循环中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:16:06.903

添加一个 Html 隐藏字段来保存选定的用户名：

```
<input type="hidden" name="selectedUserName" id="selectedUserName" /> 
```

在每一行中，将用户名保存在控件中。在行单击事件中，您需要找到此控件并将上述隐藏输入分配给行用户名。

```
function showModalPopup(usernameInputID) {
   document.getElementById('selectedUserName').value = document.getElementById(usernameInputID).value;
   $find('BehaviorID').show();
}
e.Row.Attributes.Add("ondblclick", "javascript: showModalPopup('" + e.Row.FindControl("inpUserName").ClientID + "')"); 
```

# jquery - 如何在 jquery 中传递 $(this) 以在 .get 上运行？

> ID：11433200
> 
> 赞同：2
> 
> 时间：2012-07-11T12:58:35.753
> 
> 标签：jquery, get, this

我有：

```
 function dosomething(data) {
    alert($(this).attr('class'))
    $(this).children('img').attr('title', data) 
}

$('.test').bind('mouseover', function() {
    $.get('/inc/ajax-function.asp?action=check', dosomething);

}) 
```

现在这显然行不通。我想做的是：

当调用 .get 时，将 rresult 放入数据（这有效）并将结果放在 img 的标题中，该标题是您鼠标悬停的链接的子项。如何获取函数的 $(this) 值？

```
<a class='test' href='book.asp><img src='image.gif' title='' /></a> 
```

感谢您提供2个很好的解决方案。我不知道在这种情况下使用哪个“更好”更快，更“标准”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T13:00:46.937

您可以为此使用 jQuery 代理功能： http: [//api.jquery.com/jQuery.proxy/](http://api.jquery.com/jQuery.proxy/)

试试这个：

```
$('.test').bind('mouseover', function() {
    $.get('/inc/ajax-function.asp?action=check', $.proxy(dosomething, this));
}) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T13:01:03.987

使用您已经为`mouseover`处理程序创建的闭包：

```
$('.test').bind('mouseover', function() {
    var elm = this;
    $.get('/inc/ajax-function.asp?action=check', function(data) {
        dosomething.call(elm, data);
    });
}); 
```

您的`get`回调将可以访问`elm`本地，然后我们调用`dosomething`via `Function#call`（这使得我们传递的第一个参数`call`是`this`在调用函数期间）。（这是 jQuery`$.proxy`在幕后为您所做的，创建一个闭包并通过`Function#call`or调用该函数`Function#apply`，但由于无论如何您都有一个闭包，不妨直接使用它。不过，+1 到 Chandu，`$.proxy`非常好方法来做到这一点。）

或者修改你`dosomething`的接受元素作为参数，你不必使用`Function#call`：

```
function dosomething(elm, data) {
    alert($(elm).attr('class'))
    $(elm).children('img').attr('title', data) 
}

$('.test').bind('mouseover', function() {
    var elm = this;
    $.get('/inc/ajax-function.asp?action=check', function(data) {
        dosomething(elm, data);
    });
}); 
```

# c# - 我应该在使用多线程 SqlBulkCopy 插入数据时使用表锁吗

> ID：11433201
> 
> 赞同：2
> 
> 时间：2012-07-11T12:58:42.807
> 
> 标签：c#, sql

我在并行线程中使用 SqlBulkCopy 将数据插入表中。互联网上的各种链接说 TableLock 是使用 SqlBulkCopy 的好选择。

数据庞大且连续。

RowLock 在多线程中提供更好的性能吗？如果启用表锁，我对一个线程完成插入所花费的时间会导致等待其他线程等待而行锁定不应该对插入产生任何影响感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-17T21:29:46.720

您应该使用表锁；SqlBulkCopy 有它自己的表锁，它对多个大容量复制插入操作是并发的（大容量更新 (BU) 锁）。在您使网络 I/O 饱和之前，并行线程将有所帮助。一个经验法则（根据我的个人测试）是使用*n 个*消费者，其中*n*是服务器内核数的**2 倍。**自己做实验。您绝对不想要行锁，因为这会破坏批量操作提供的许多优化。

提高性能的最佳选择是：

1.  尽可能保持批量大小 - 您可能需要增加操作的超时时间以防止长时间运行失败（将超时设置为零以无限制）。要一次性完成整个集合，请将批量大小设置为零。如果您有一个非常大的数据集，请查看直接从源流式传输到批量复制。

2.  删除目标表上的任何索引，然后在完成加载后进行碎片整理并创建索引。结合表锁，这应该可以最大限度地减少日志开销并提高性能。您也不能对具有聚集索引的表使用 TABLOCK 和并发操作。

# c - 使用递归函数的两个数字的 GCD - 怎么了？

> ID：11433203
> 
> 赞同：0
> 
> 时间：2012-07-11T12:58:48.773
> 
> 标签：c

> 我是编程新手，只是一名学生。

我编写了一个程序来使用递归函数计算两个数字的 GCD，但它给出了一些正确的答案，而它给出了一些错误的答案。请帮助我确定问题：

```
#include<stdio.h>
#include<conio.h>

int gcd(int,int,int)

int main(){
    int a,b,x,val;
    printf("Enter the first number: ");
    scanf("%d",&a);
    printf("Enter the second number: ");
    scanf("%d",&b);

    if(a>b)
        x=b;
    else
        x=a;

    val=gcd(a,b,x);
    printf("The GCD of the two numbers you entered is:%d",val);
    getch();
    return 0;
}

int gcd(int a,int b,int x){
    if(a%x==0){
        if (b%x==0)
            return x;
    }else
        return gcd(a,b,x-1);
} 
```

例如，当第一个数字 = 69，第二个数字 = 65 时，程序给出了错误的答案，而在其他一些情况下，它神秘地给出了正确的答案。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:04:30.010

检查您的代码路径。并非所有条件都在 gcd 函数中返回整数。您使用的是哪个编译器？它应该给你一个警告或错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:11:38.610

试试这个：

```
int gcd(int a,int b,int x){
    if(a%x==0 && b%x==0) return x;        
    }else return gcd(a,b,x-1);
} 
```

这会在一个 if 语句中捕获与 0 的模数比较，所有不属于此 get gcd 调用的条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:35:36.507

示例：考虑数字`a=100`和`b=44`。当它达到`x=25`（除以 100，而不是 44）时，您的代码没有正确的路径可供选择。

您没有考虑所有条件（路径）。

```
int gcd(int a,int b,int x){
    if(a%x==0){
        if (b%x==0)
           return x;
        else
           // ERROR ERROR ERROR, 
           // if the code reaches here, then it neither calls gcd recursively, 
           // nor does it return anything valueable
    }else
        return gcd(a,b,x-1);
} 
```

您应该如下更改代码。

```
int gcd(int a,int b,int x){        
    if(a%x==0)
        if (b%x==0)
        {
            return x;
        }
    return gcd(a,b,x-1);
} 
```

或者

```
int gcd(int a,int b,int x){
    if(a%x==0 && b%x==0) return x;        
    return gcd(a,b,x-1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-18T16:38:48.273

C中两个数字的GCD（最简单的方法）：

```
while(secNum != 0) {
    Temp = fNum % secNum;
    fNum = secNum;
    secNum = Temp;
}

printf("GCD of the given two numbers : %d",fNum); 
```

# python - python mysqldb导入错误

> ID：11433207
> 
> 赞同：1
> 
> 时间：2012-07-11T12:59:07.607
> 
> 标签：python, ubuntu, mysql-python

在 ubuntu 上我已经安装了 mysql，但我仍然无法导入 mysql 数据库。以下是我遵循的步骤。任何人都可以指出我的解决方案（其他信息是 ubuntu 安装在虚拟盒子上希望这不重要）。Python 版本是 2.6.5

```
 root@rajeev-laptop:/opt/s/site# apt-get install python-mysqldb
  Reading package lists... Done
  Building dependency tree
  Reading state information... Done
  The following packages were automatically installed and are no longer required:
    linux-headers-2.6.32-21 linux-headers-2.6.32-21-generic
  Use 'apt-get autoremove' to remove them.
  Suggested packages:
    python-mysqldb-dbg
  The following NEW packages will be installed:
    python-mysqldb
  0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
  Need to get 0B/76.6kB of archives.
  After this operation, 283kB of additional disk space will be used.
  Selecting previously deselected package python-mysqldb.
  (Reading database ... 151280 files and directories currently installed.)
  Unpacking python-mysqldb (from .../python-mysqldb_1.2.2-10build1_i386.deb) ...
  Setting up python-mysqldb (1.2.2-10build1) ...

  Processing triggers for python-support ...
  root@rajeev-laptop:/opt/s/site# python
  Python 2.6.5 (r265:79063, Apr 16 2010, 13:09:56)
  [GCC 4.4.3] on linux2
  Type "help", "copyright", "credits" or "license" for more information.
  >>> import MySQLdb
  Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
  ImportError: No module named MySQLdb
  >>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:00:29.277

全部，

我通过以下方法解决了这个问题，在我的 /etc/bash.bashrc 中，我将 pythonpath 导入为 /opt/s/ django 和我的网站所在的位置。当我从 pythonpath 中删除以下内容时，导入 MySQLdb 起作用了..希望这个帖子会帮助某人..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:12:35.210

我会检查 Python PATH 并手动构建 MySQLDB 下载。从这个源伪造站点下载安装文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:52:19.637

包信息告诉你发生了什么（ubuntu 12.04）：

```
apt-cache show python-mysqldb

[...]
Provides: python2.7-mysqldb
Depends: python2.7, [...]
Python-Version: 2.7
[...] 
```

这个包适用于 python 2.7 - 所以它不是为 2.6 安装的。在 shell 中执行`python2.7`并再次尝试导入。

（如果您有较旧的 ubuntu 版本，请在您的机器上执行 apt-cache 命令以检查您的版本是否也是这种情况）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T08:03:24.057

[啊，这些问题……在virtualenv](http://www.virtualenv.org/en/latest/index.html#what-it-does) for python 上投入一些时间。它会得到回报的=）

# android - Android Phonegap：打开pdf文件

> ID：11433211
> 
> 赞同：1
> 
> 时间：2012-07-11T12:59:31.367
> 
> 标签：android, cordova

我在 android phonegap 中非常新。我想从我的 SD 卡打开 pdf 文件。我正在使用这个链接

[http://www.giovesoft.com/2011/08/download-and-open-pdf-with-phonegap.html](http://www.giovesoft.com/2011/08/download-and-open-pdf-with-phonegap.html)

在这里，存储在 sdcard 中的 pdf 文件，而我尝试打开该文件意味着它在我的 logcat 中显示以下错误消息

PdfViewer：加载网址时出错

```
/sdcard/Downloads/:android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW cat=[android.intent.category.BROWSABLE] 
dat=file:///sdcard/Downloads typ=application/pdf flg=0x4000000 } 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:03:58.367

现在上面的问题解决了，这里是我的代码：

```
public String showPdf(String fileName) {     
        File file = new File(fileName);
        Log.d("PdfViewer", "list: " + file.exists());
        if (file.exists()) {
            try {               
                 Intent intent = new Intent();                
                 intent.setDataAndType(Uri.fromFile(file), "application/pdf");
                this.ctx.startActivity(intent);  

                Log.d("PdfViewerr", "read: " + fileName);
                return "";
            } catch (android.content.ActivityNotFoundException e) {
                System.out.println("PdfViewer: Error loding url "+fileName+":"+ e.toString());
                Log.d("PdfViewer", "error: " + fileName);
                return e.toString();
            }       

        }else{
            Log.d("PdfViewer", "notfound: " + fileName);
            return "file not found";
        }        
    }
```

# javascript - 访问 iFrame 中动态生成的元素

> ID：11433212
> 
> 赞同：0
> 
> 时间：2012-07-11T12:59:34.270
> 
> 标签：javascript, jquery, html, dom

当我按下亚马逊英国按钮时，我正在使用 iFrame 加载[http://www.amazon.co.uk](http://www.amazon.co.uk)，它也在加载，我浏览到 amazon.co.uk 的子页面。现在我想要的是当我将鼠标悬停在此 iFrame 中的标签或链接上时获取标签的 href 属性。是否可以使用 Javascript 或 jQuery 请告诉我如何？

--这就是我正在做的

```
<div id="amazon_buttons">
    <table border="0">
        <tr>
            <td><a href="../../users/product" target="_top"><input id="cmdback" name="cmdback" type="button" value="Back To IEC" /></a></td>
        </tr>
        <tr>
            <td><input id="cmdanzuk" name="cmdanzuk" type="button" value="Amazon UK" onclick="open_amazon_page('uk')" /> </td>
        </tr>
        <tr>
            <td><input id="cmdanzde" name="cmdanzde" type="button" value="Amazon DE" onclick="open_amazon_page('de')" /> </td>
        </tr>
        <tr>
            <td><input id="cmdanzfr" name="cmdanzfr" type="button" value="Amazon FR" onclick="open_amazon_page('fr')" /> </td>
        </tr>
        <tr>
            <td><input id="cmdanzes" name="cmdanzes" type="button" value="Amazon ES" onclick="open_amazon_page('es')" /> </td>
        </tr>
    </table>
</div>

<iframe id="azn_iframe" name="azn_iframe" src="" style="clear: both; width: 100%; height:800px;"></iframe> 
```

> ```
>  $("#azn_iframe").contents().find("a").hover(
>     function () {
>         alert($(this).attr("href"));
>     });
> 
>     function open_amazon_page($platform)
>     {
>         if($platform == 'uk')
>             azn_iframe.location.href = "http://www.amazon.co.uk";
>         else if($platform == 'de')
>             azn_iframe.location.href = "http://www.amazon.de";
>         else if($platform == 'fr')
>             azn_iframe.location.href = "http://www.amazon.fr";
>         else if($platform == 'es')
>             azn_iframe.location.href = "http://www.amazon.es";
>     }
> </script> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:00:45.517

这是不可能的，因为 iframe 与您的域位于不同的域中。[此限制是浏览器的同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)强加的安全措施。

更多阅读：

*   [JavaScript 的同源策略](https://developer.mozilla.org/en/Same_origin_policy_for_JavaScript)
*   [规避同源政策的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)
*   [在 Chrome 中禁用同源策略](https://stackoverflow.com/questions/3102819/chrome-disable-same-origin-policy)
*   [同源策略的威胁模型是什么？](https://stackoverflow.com/questions/6744283/what-is-the-threat-model-for-the-same-origin-policy)

# java - 阻止 Mozilla 会话恢复

> ID：11433220
> 
> 赞同：2
> 
> 时间：2012-07-11T13:00:01.017
> 
> 标签：java, session, firefox, session-state

Mozilla 能够恢复我的 Java EE 银行应用程序的会话（崩溃时，恢复会话选项）。

有没有办法通过编写一些代码来防止 Mozilla 恢复会话？或者是否可以识别会话恢复时发出的请求并强制用户再次登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:56:23.630

我正在研究同样的问题。

我认为让浏览器恢复旧会话通常是一个坏主意。但是我尝试了几件事，例如设置缓存控制标头，但这对我不起作用。

所以我确实在考虑在脚本中解决这个问题。

但是，我看到不同解决方案的不同问题。

1）在浏览器关闭时删除cookie->问题：您应该使用javascript添加漏洞来执行此操作，因为http_only应该设置为false

2) 将 cookie_lifetime 从 0（浏览器关闭时）设置为例如 3600（1 小时）。--> 问题：将其设置为高会丢失安全性并将其设置为低会给用户一个“会话已过期”错误消息，这意味着他们必须再次登录。

3) 添加第二个带有过期日期的 cookie。如果 cookie 在那里，一切都很好。--> 问题：（几乎）与 2 相同）只有在设置 cookie 后可以更改到期日期时，这才有效。在这种情况下，用户应该保持活跃至少 XX 分钟，否则他会失去他的会话（对我来说似乎是正确的）。

我自己会看看后面的。

因此，在这种情况下，我使用的是 PHP（不是 Java），但我想总体思路是一样的：

```
//create expiration cookie
private function setExpireCookie(){

    //expire cookie: name, value, expiration in seconds, path, domain, https, http-only
    setcookie("Test_Expire", "Expire", time()+3600, "/test", null, false, true);
}

//check if expiration cookie exits
private function expireExists() {

    return isset($_COOKIE['Test_Expire']);

}

//set the session check for expiration cookie
private function getSession() {

    //does the session cookie exists and the expiration cookie doesnt?
    if (!$this->expireExists() && isset($_COOKIE['Test_Cookie'])) {

        //to remove the cookie by setting the expiration time before now
        setcookie("Test_Cookie", $_COOKIE['Test_Cookie'], time()-3600, "/test");
    }

    //now we can set the new expiration cookies en start the new session
    $this->setExpireCookie();

    //set cookie params: lifetime, path, domain, https, http-only
    session_set_cookie_params(0, "/api", null, false, true);

    session_name('Test_Cookie');

    //start session
    session_start();
} 
```

这对我有用。所以希望你可以在Java中应用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:16:02.827

我不知道它是否直接回答了您的问题，但您可以关闭恢复之前的会话。以下链接中的详细信息来自 Mozilla。

[http://support.mozilla.org/en-US/kb/restore-previous-session#w_configuring-session-restore](http://support.mozilla.org/en-US/kb/restore-previous-session#w_configuring-session-restore)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T08:50:22.020

看起来这种方式还不存在（截至 2013 年 3 月 4 日）。让我们希望浏览器开发人员能够理解 Session Restore 会带来安全漏洞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:49:59.830

如果您需要在浏览器崩溃后使页面无效，则应使用驱动缓存行为的 HTTP 标头：

```
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="0"> 
```

M。

# ruby - 在 ruby 中呈现带有页面特定脚注的 pdf

> ID：11433224
> 
> 赞同：2
> 
> 时间：2012-07-11T13:00:26.867
> 
> 标签：ruby, pdf-generation, wkhtmltopdf, prawn

我正在寻找一种方法来呈现带有脚注的 pdf 文档，其中脚注文本出现在与脚注参考相同的页面的页脚中（而不是文档结尾）。这种脚注出现在书籍中，例如译者的注释所在的地方。能够将脚注引用与脚注文本链接是可选的。

到目前为止，我查看了 Prawn 和 PDFKit，但似乎找不到一个简单的解决方案。

这是我正在尝试做的一个示例：[脚注示例](http://dl.dropbox.com/u/18515331/footnote.pdf)

这就是我使用虾想出的。显然，这需要更多的工作来涵盖极端情况。我想知道是否值得沿着这条路线走得更远，或者尝试一些完全不同的东西，比如乳胶（没有将它与红宝石一起使用）。

> ```
> Prawn::Document.generate("foo.pdf",:page_size => 'A4') do
>   #read 150 lorem ipsum records of various length 
>   records = File.read(
>     Rails.root.join("lib/assets/lorem_ipsum_paragraphs.txt")
>   ).split("\n").reject(&:blank?)
>   #assign some random footnotes to the paragraphs
>   footnotes = {
>     1 => '* ' + records[120],
>     2 => '* ' + records[54],
>     11 => '* ' + records[2]
>   }
>   #this array will hold the current footnotes to draw
>   #the assumption being we'll draw them on the current page as soon as we
>   #reach the part of the page where we need to fit those
>   footnotes_to_draw = []
>   #this will hold the amount of space required to draw the footnotes
>   space_needed = 0
>   for i in 0..records.length
>     str = records[i]
>     if footnotes.keys.include? i
>       str += '*'#this one has a footnote attached
>       footnotes_to_draw << footnotes[i]
>       space_needed += (height_of(footnotes[i]) + 15)
>     end
>     text "#{str}"
>     if space_needed > 0
>       #that means we will need to draw a footer on this page
>       space_available = cursor
>       puts "space needed: #{space_needed}, space available: #{space_available}"
>       #check if we can still draw the next record, or now's the time'
>       unless space_available - space_needed > height_of(records[i+1])
>         puts "draw footer now"
>         bounding_box [0,space_needed], :width => bounds.width, :height => space_needed do
>           stroke_horizontal_rule
>           footnotes_to_draw.each do |footnote|
>             pad(10){text footnote}
>           end
>         end
>         #reset current footnotes
>         footnotes_to_draw = []
>         space_needed = 0
>         move_down space_needed
>       end
>     end
>   end
> end 
> ```

# linux - 如何在 %% 或 $$ 中间 grep/拆分单词

> ID：11433225
> 
> 赞同：0
> 
> 时间：2012-07-11T13:00:32.483
> 
> 标签：linux, perl, split, grep

我有一个变量，我必须从中 grep %% 中间的 which 和以 $$ 开头的单词。我使用 split 它可以工作...但仅适用于某些情况。

例子：

```
#!/usr/bin/perl
my $lastline ="%Filters_LN_RESS_DIR%\ARC\Options\Pega\CHF_Vega\$$(1212_GV_DATE_LDN)";
my @lastline_temp = split(/%/,$lastline);
print @lastline_temp;
my @var=split("\\$\\$",$lastline_temp[2]);
print @var; 
```

我得到了预期的o / p。但是我可以使用 Grep 命令获得相同的结果吗？我的意思是我不想使用`array[2]`or `array[1]`。这样我就可以轻松地替换这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:19:00.807

**首先，在使用引号**时要非常小心，我不确定您是否不是指 `'%Filters_LN_RESS_DIR%\ARC\Options\Pega\CHF_Vega\$$(1212_GV_DATE_LDN)'` which `"%Filters_LN_RESS_DIR%\ARC\Options\Pega\CHF_Vega\$$(1212_GV_DATE_LDN)"` 可能是不同的字符串。例如，如果评估，`"$$"`则表示变量`$PROCESS_ID`。

在尝试解决谜语后（不确定），并引用你的字符串

```
my $lastline = 
          '%Filters_LN_RESS_DIR%\ARC\Options\Pega\CHF_Vega\$$(1212_GV_DATE_LDN)' 
```

不同的是，我会使用：

```
my ($w1, $w2) = $lastline =~ m{ %        # the % char at the start
                               ([^%]+)   # CAPTURE everything until next %
                                [^(]+    # scan to the first brace
                                \(       # hit the brace
                               ([^)]+)   # CAPTURE everything up to closing brace
                              }x;
print "$w1\n$w2"; 
```

提取你的话。结果：

```
Filters_LN_RESS_DIR
1212_GV_DATE_LDN 
```

*但是，轻松替换值*是什么意思。哪些价值观？

### 附录

现在让我们提取由 . 分隔的“单词” `'\'`。使用简单的拆分：

```
my @words = split /\\/,  # use substr to start split after the first '\\'
                  substr $lastline, index($lastline,'\\'); 
```

如果您删除最后一个条目（即`$$(..)`字符串），您将得到反斜杠之间的单词：

```
pop @words;                # remove the last element '$$(..)'
print join "\n", @words;   # print the other elements 
```

结果：

```
ARC
Options
Pega
CHF_Vega 
```

这**对 grep 更有效**吗？好像：

```
 my @words = grep /^[^\$%]+$/, split /\\/, $lastline; 
```

和

```
 print join "\n", @words; 
```

还导致：

```
 ARC
 Options
 Pega
 CHF_Vega 
```

也许这就是你所追求的？你想用这些做什么？

问候

rbo

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:23:05.087

我真的不明白如何获得预期的输出。因为您将数据放在“忙碌”引号中（插值、双引号、...），所以它被存储为：

```
'%Filters_LN_RESS_DIR%ARCOptionsPegaCHF_Vega$01212_GV_DATE_LDN)' 
```

*   请参阅[Quote 和 Quote-like Operators](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)并可能阅读[*Perl 中的插值*](http://perlmeme.org/howtos/using_perl/interpolation.html)
*   请注意，反斜杠*消失了*。插入引号中的反斜杠仅表示“将下一个字符视为文字”，因此您会得到 literal `'A'`, literal `'O'`, literal `'P'`, ....
*   这`'0'`就是`$(`(aka [`$REAL_GROUP_ID`](http://perldoc.perl.org/perlvar.html#%24REAL_GROUP_ID)) 的值，您*无意中*要求它进行插值。所以*没有*`'$$'`要*拆分*的顺序。

你能用`grep`命令得到同样的结果吗？这取决于“相同”是什么。您将结果保存在*数组*中，目的`grep`是从数组中排除事物。如果您使用非平凡的 grep: ，您将既没有数组，也没有数组的*输出*`grep {; 1 } @data`。

`@vars`实际上，假设其中的单个字符串是“结果” ，您可以使用此正则表达式获得完全相同的结果。

```
m/%([^%]*)$/ 
```

当然，也不过如此

```
substr( $lastline, rindex( $lastline, '%' ) + 1 ); 
```

它可以运行速度快 8-10 倍。

# javascript - Fabric.Image.fromURL 上的 fabric.js lockUniScaling

> ID：11433227
> 
> 赞同：3
> 
> 时间：2012-07-11T13:00:38.340
> 
> 标签：javascript, fabricjs

我用fabric.js ( [http://fabricjs.com](http://fabricjs.com) ) 加载了一个图像，但我无法让'lockUniScaling' 在我的元素上工作。

这有效：

```
canvas.add(new fabric.Rect({ width: 50, height: 50, fill: '#77f', top: 100, left: 100 }));
canvas.item(0).lockUniScaling = true; 
```

我怎样才能得到这个元素的“lockUniScale”？

```
fabric.Image.fromURL('http://www.domain.com/image.png', function(obj) {
    canvas.add(obj.scale(1).rotate(0).set({ left: 100, top: 100 }));
    canvas.renderAll();
  }); 
```

如果我添加一些其他元素，我可以使用 item(1), item(2),... 来获取它们，但我无法获取图像元素。

有什么提示吗？

# java - 阅读 PDF 文件并通过 iText 提供下载

> ID：11433228
> 
> 赞同：0
> 
> 时间：2012-07-11T13:00:38.670
> 
> 标签：java, pdf, itext

如何阅读本地 PDF 文件并将其作为 iText 在浏览器中的下载提供？这是我尝试过的，但文件总是说：

Adobe Reader 无法打开“xxx.pdf”，因为它不是受支持的文件类型或文件已损坏（例如，它作为电子邮件附件发送并且未正确解码）。

```
PdfReader reader = new PdfReader(filename);
byte[] streamBytes = reader.getPageContent(1);

response.setContentType("application/force-download");
response.setCharacterEncoding("UTF-8");
response.addHeader("Content-Disposition", "attachment; filename=" + filename);

BufferedOutputStream bos = new BufferedOutputStream(response.getOutputStream());

bos.write(reader.getPageContent(1));
bos.write(streamBytes);
bos.flush();
bos.close(); 
```

如果 iText 将文件识别为 PDF，我什至进行了测试，这是输出：

```
System.out.println("PDF Version: " + reader.getPdfVersion());
System.out.println("Number of pages: " + reader.getNumberOfPages());
System.out.println("File length: " + reader.getFileLength());
System.out.println("Encrypted? " + reader.isEncrypted());
System.out.println("Rebuilt? " + reader.isRebuilt());

14:52:42,121 INFO  [STDOUT] PDF Version: 4
14:52:42,121 INFO  [STDOUT] Number of pages: 2
14:52:42,121 INFO  [STDOUT] File length: 186637
14:52:42,121 INFO  [STDOUT] Encrypted? false
14:52:42,121 INFO  [STDOUT] Rebuilt? false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:06:17.600

内容类型应为“application/pdf”

```
 response.setContentType("application/pdf"); 
```

编辑：你不必使用**PdfReader**因为你没有修改 pdf，你想做这样的事情：

```
 FileInputStream baos = new FileInputStream("c:\\temp\\test.pdf");

             response.setHeader("Expires", "0");
             response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
             response.setHeader("Pragma", "public");
             response.setContentType("application/pdf");
             response.addHeader("Content-Disposition", "attachment; filename=test.pdf");

             OutputStream os = response.getOutputStream();

             byte buffer[] = new byte[8192];
             int bytesRead;

             while ((bytesRead = baos.read(buffer)) != -1) {
                 os.write(buffer, 0, bytesRead);
             }

             os.flush();
             os.close(); 
```

# iphone - UIPickerView 委托/数据源在单独的类中

> ID：11433233
> 
> 赞同：3
> 
> 时间：2012-07-11T13:00:46.313
> 
> 标签：iphone, objective-c, xcode

我正在开发一个 iPhone 应用程序。而且我在整个应用程序中都有一个通用的 UIPickerView （使用相同的数据）。我只是想知道我是否可以在一个单独的类中拥有 UIPickerView 委托方法和数据源方法（使其成为一个通用类）。当我点击类时，它应该返回一个加载了值的 UIPickerView。

我没有使用 XIB 文件。有没有办法做到这一点？！

提前致谢！！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:23:53.113

是的，你可以这样做。像这样：

1) 声明一个实现委托方法的类。

2) 声明一个实现数据源方法的类。（可以是第 1 步中的同一个班级。事实上我建议你这样做。）

3）当您`UIPickerView`分配创建一个类型为 class_from_step1 的对象并将其设置为您的选择器的委托时

4) 当您`UIPickerView`分配创建一个 class_from_step2 类型的对象并将其设置为您的选择器的数据源时

希望这可以帮助。

干杯!

# .htaccess - 301重定向问题

> ID：11433234
> 
> 赞同：0
> 
> 时间：2012-07-11T13:00:46.617
> 
> 标签：.htaccess, redirect

我需要进行一些 301 重定向，如下所示：

```
/!go?ln=vector.dpsp&refs_=&m$id=27007&m$mid=27013    to  http://domain.com/catalog/paz-320412-vektor.htm
/!go?ln=1223-15-57-1223.html&m$id=27148&m$mid=27940  to   http://domain.com/catalog/gruzoviki/sedelnie-tyagachi-man 
```

我在 .htaccess 中尝试了这段代码：

```
RewriteCond %{QUERY_STRING} ln=vector.dpsp&refs_=&m$id=27007&m$mid=27013
RedirectPermanent   /!go    http://domain.com/catalog/paz-320412-vektor.htm? 

RewriteCond %{QUERY_STRING} ln=1223-15-57-1223.html&m$id=27148&m$mid=27940
RedirectPermanent   /!go    http://domain.com/catalog/gruzoviki/sedelnie-tyagachi-man? 
```

但是所有这两个 url 都被第一个块捕获，并且重定向总是进入`http://domain.com/catalog/paz-320412-vektor.htm`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:43:54.790

这里有几件事不对劲。首先，您需要转义表达式中与**%{QUERY_STRING}**`$`匹配的符号，它是一个保留符号（用于反向引用之类的东西）。第二件事是 a不影响 a 。重写指令是 mod_rewrite 的一部分，而重定向指令是 mod_alias 的一部分，您不能将重写条件绑定到重定向，您需要使用：**`RewriteCond``RedirectPermanent``RewriteRule`**

 **```
RewriteCond %{QUERY_STRING} ln=vector.dpsp&refs_=&m\$id=27007&m\$mid=27013
RewriteRule ^\!go$ http://domain.com/catalog/paz-320412-vektor.htm? [R=301,L] 

RewriteCond %{QUERY_STRING} ln=1223-15-57-1223.html&m\$id=27148&m\$mid=27940
RewriteRule ^\!go$ http://domain.com/catalog/gruzoviki/sedelnie-tyagachi-man? [R=301,L] 
```**

# asp.net-mvc-3 - 为什么 T4MVC 为控制器操作引入虚拟？

> ID：11433242
> 
> 赞同：2
> 
> 时间：2012-07-11T13:01:12.863
> 
> 标签：asp.net-mvc-3, t4mvc

为什么 T4MVC 使用[虚拟](http://msdn.microsoft.com/en-us/library/9fkccyh4%28v=vs.100%29.aspx)控制器方法？改变一个

```
public ActionResult Details (string Id) 
```

到：

```
public virtual ActionResult Details (string Id) 
```

我已经看到有关 T4MVC 的[其他问题](https://stackoverflow.com/questions/6238068/should-i-make-my-asp-net-mvc-controller-actions-virtual)，但不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:55:56.173

通常，如果框架/库需要虚拟方法（另请参见 Nhibernate），则意味着某处/某时您的方法将被覆盖。

所以 T4MVC 将您的操作方法标记为`virtual`因为它覆盖了它们。

让我们看一个简单的控制器：

```
public partial class HomeController : Controller
{
    public virtual ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }       
} 
```

如果你去生成`HomeController.generated.cs`下`T4MVC.tt`你会发现一个从你的控制器继承并覆盖你的动作方法的生成类：

```
[GeneratedCode("T4MVC", "2.0"), DebuggerNonUserCode]
public class T4MVC_HomeController: MvcApplication8.Controllers.HomeController {
    public T4MVC_HomeController() : base(Dummy.Instance) { }

    public override System.Web.Mvc.ActionResult Index() {
        var callInfo = new T4MVC_ActionResult(Area, Name, ActionNames.Index);
        return callInfo;
    }

} 
```

我没有使用过 T4MVC，所以我不知道 T4MVC 为什么以及出于什么目的创建这个生成的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T11:19:09.400

我可以看到使它们虚拟化的唯一好处是允许开发人员在使用 T4MVC 助手的地方“转到实现/定义”。这是因为静态助手“MVC”上的控制器类型是基本控制器类型。

```
public static partial class MVC
{
    public static HomeController Home = new T4MVC_HomeController();
} 
```

因此，在以下代码段中，Go to Definition on the Action Name 将转到 Base Implementation：

```
@Url.Action(MVC.Home.Index()) 
```

+1 David Ebbo 提供了如此直观的功能。当我意识到这一点时，我被震撼了！

PS：这不适用于通过部分函数添加的无参数操作，不幸的是它们导航到生成的代码。

# opencv - 如何创建自己的高斯内核？

> ID：11433243
> 
> 赞同：0
> 
> 时间：2012-07-11T13:01:15.360
> 
> 标签：opencv, computer-vision, javacv

有人可以告诉我如何创建自己的高斯内核吗？在论文[频率调谐显着区域检测（第 4.2 节）](http://www.cs.utoronto.ca/~strider/publications/SaliencyCVPR09.pdf)中，他们使用了 DoG 带通滤波器。我不知道如何在 OpenCV/JavaCV 中实现这一点。DoG 的内核称为：1/16[1; 4；6；4；1]。有人可以解释如何设置这些内核吗？

//编辑：及时，我设置了我的DoG过滤器：

```
double sigma_small = Math.PI/2.75; 
double sigma_large = DOUBLE.POSITIVE_INFINITY; 
IplImage gaussL= cvCreateImage(cvSize(width, height), IPL_DEPTH_8U, 3);
IplImage gaussS= cvCreateImage(cvSize(width, height), IPL_DEPTH_8U, 3);
cvSmooth(input, gaussL, CV_GAUSSIAN, kernel_size,kernel_size, sigma_small, sigma_small);
cvSmooth(input, gaussS,CV_GAUSSIAN, kernel_size,kernel_size, sigma_large, sigma_large); //eq. to 0 
```

但我认为这是错误的内核。或者我做错了什么。问候，命运

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:10:07.633

内核只是 cv::Mat

[http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=gauss#getgaussiankernel](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=gauss#getgaussiankernel)

正如文档所说，您应该创建所需的 Mat 内核，并且：

```
"generated kernels can be passed to sepFilter2D() or to createSeparableLinearFilter()" 
```

我没有测试过，但应该可以。

您也可以手动应用基于内核的操作。这并不难。

# c++ - 在另一台计算机上运行 a.out

> ID：11433244
> 
> 赞同：6
> 
> 时间：2012-07-11T13:01:17.103
> 
> 标签：c++, linux, sdl

我已经在我的计算机（Ubuntu 12）上成功编译了一个程序（包括 SDL）并且`a.out`运行良好！

现在，如果我把它`a.out`发给朋友，它就是行不通的。（给出简单的错误消息（`"Can't be run.."`）或其他东西）但是如果我再次在我朋友的计算机上编译相应的源文件，它就可以了！

我如何打包/编译/制作我的程序以使其可在其他计算机上运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T13:03:11.523

可执行文件通常特定于创建它们的环境/机器。即使涉及相同的处理器/硬件，也可能存在对库的依赖，这可能会阻止可执行文件仅在其他机器上运行。

您可以发送带有编译说明的源代码吗？假设没有 NDA 或其他问题阻止该方法（我只建议，因为你提到这对你有用）

当然，最终*还是有*可能的，毕竟这就是二进制文件的分发方式，但是它们将被仔细构建，并且将具有静态链接的库（即，所有内容都是可执行文件的一部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:28:50.033

请您的朋友执行以下操作：

```
 chmod +x a.out
 ldd a.out 
```

他看到了什么？当然，我假设这两个环境在很大程度上相似（例如，都运行 Ubuntu 等）

# c# - C# 在泛型中重复使用类型时缩短语法？

> ID：11433246
> 
> 赞同：9
> 
> 时间：2012-07-11T13:01:21.867
> 
> 标签：c#, .net, generics, .net-3.5, delegates

如果我使用泛型，就像在这个示例案例中一样，有没有办法缩短语法，所以我不必重复输入“CompanyLookupData”？

```
Func<CompanyLookupData, CompanyLookupData, bool> DELCompareNonKeyFieldsCompany =
    new Func<CompanyLookupData, CompanyLookupData, bool> 
    (CompanyLookupData.HasIdenticalNonKeyFieldsTo); 
```

我曾尝试在所有位置进行`Type t = typeof(CopmanyLookupData)`并使用`t`，但这似乎不起作用。

PS：虽然我愿意以一种更简洁的方式来做所显示的事情，但我对一种使泛型语法更简洁的方法更感兴趣。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T13:03:24.550

是的，有几种方法可以实现这一点：

如果变量是局部变量，您可以使用`var`关键字：

```
var DELCompareNonKeyFieldsCompany = new Func<CompanyLookupData, CompanyLookupData, bool>   (CompanyLookupData.HasIdenticalNonKeyFieldsTo); 
```

但是，如果`DELCompareNonKeyFieldsCompany`是类变量（字段或属性），您可以让编译器通过从方法组转换为`Func`：

```
Func<CompanyLookupData, CompanyLookupData, bool> DELCompareNonKeyFieldsCompany = CompanyLookupData.HasIdenticalNonKeyFieldsTo; 
```

如果要经常使用此类型，您可能希望创建自己的委托类型：

```
public delegate bool CompareCompanyNonKeyFields(CompanyLookupData, CompanyLookupData); 
```

并像这样使用它：

```
CompareCompanyNonKeyFields DELCompareNonKeyFieldsCompany = CompanyLookupData.HasIdenticalNonKeyFieldsTo; 
```

或者，如果该类型仅在一个类中使用，您还可以使用`using`关键字为该类型创建一个别名（尽管我个人认为这会妨碍代码的可读性）：

```
using CompareCompanyNonKeyFields = System.Func<CompanyLookupData, CompanyLookupData, bool>;
...
 CompareCompanyNonKeyFields DELCompareNonKeyFieldsCompany = CompanyLookupData.HasIdenticalNonKeyFieldsTo; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T13:06:24.907

取`using`声明别名的语句：

```
using MyType = System.Func<CompanyLookupData, CompanyLookupData, bool>;

MyType DELCompareNonKeyFieldsCompany = new MyType(CompanyLookupData.HasIdenticalNonKeyFieldsTo); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T13:07:47.843

您可以将其隐藏在辅助工厂方法中：

```
void Main() {
    var f1 = Helper.Create(CompanyLookupData.HasIdenticalNonKeyFieldsTo);
    var f2 = Helper.Create(CompanyLookupData.HasIdenticalNonKeyFieldsTo);
}

static class Helper {
    public static Func<T, T, bool> Create<T>(Func<T, T, bool> @delegate) {
        return @delegate;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T13:03:45.020

您可以使用 var，缩短一点 :)

```
var DELCompareNonKeyFieldsCompany = new Func<CompanyLookupData, CompanyLookupData, bool>(CompanyLookupData.HasIdenticalNonKeyFieldsTo); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-11T13:03:45.093

我能想到的唯一方法是使用声明。

```
using cld = MyNamespace.CompanyLookupData; 
```

然后，您可以使用 cld 代替文件其余部分的全名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T13:03:15.220

不，你不能从根本上做比这更好的事情。无论好坏，C# 都没有`typedef`.

您可能会尝试使用`using`别名来缩短类型名称，尽管我个人认为这不是一个好主意：

```
using CLD = CompanyLookupData;

Func<CLD, CLD, bool> DELCompareNonKeyFieldsCompany =
    new Func<CLD, CLD, bool> (CLD.HasIdenticalNonKeyFieldsTo); 
```

`var`如果我们谈论的是局部变量，另一种可能性（在实践中不太可能适用）是使用隐式类型变量 ( )。

# powershell - 无法使用 Windows 任务计划程序运行 powershell 脚本

> ID：11433251
> 
> 赞同：1
> 
> 时间：2012-07-11T13:01:42.647
> 
> 标签：powershell, windows-7, batch-file, scheduled-tasks

我有一个简单的 powershell 脚本来获取目录中的名称并将其写入文件。我希望它每天早上 8:00 执行，所以我从 Windows 任务调度程序为它创建了一个任务，任务调度程序能够启动脚本，但脚本无法写入文件。因此，作为替代方案，我创建了一个批处理文件，并尝试使用任务调度程序调用 ps1，这给出了错误“fileopenerror”我的批处理文件有 \PowerShell.exe \test.ps1

我的 PowerShell 脚本具有 Set-executionpolicy -scope currentuser -executionpolicy remotesigned -force ls >> names.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:31:31.203

<#所以这是我想为您提供的一个示例，它每天凌晨 3 点重新启动 BITS 服务，我想您可以使用您的 apache 服务示例修改脚本#>

<#我在这里为作业创建触发器并将其设置为每天凌晨 3 点开始#>

```
$trigger = New-JobTrigger -Daily -At 3am 
```

<# 下面我在每天凌晨 3 点使用名称和 $trigger 的触发器注册 ScheduledJob，还将要执行的脚本放置在脚本块内#>

```
Register-ScheduledJob -Name BitsServiceRestart -Trigger $trigger -ScriptBlock {

<# Suppose Lets say that you want to schedule a restart of BITS Service#>
Restart-Service -ServiceName BITS

} 
```

<# 注册 Job 后，您可以使用 Get-ScheduledJob 获取 Job 详细信息您还可以使用 TaskScheduler --> Windows --> PowerShell #> 查看任务详细信息

```
Get-ScheduledJob BitsServiceRestart | fl * 
```

<# 你可以使用 Recieve Job 接收 Scheduled Job 的输出 #>

```
Receive-Job -Name BitsServiceRestart 
```

# android - 壁纸安卓尺寸

> ID：11433256
> 
> 赞同：1
> 
> 时间：2012-07-11T13:01:51.163
> 
> 标签：android

我需要开发应用程序来设置壁纸。Android的壁纸规格是什么？大小、mdpi 和 ldpi hdpi？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:04:17.980

它们实际上是像素密度的范围。查看：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

他们在该页面上给出了近似平均值：

低密度像素：~120dpi

mdpi：~160dpi

高清：~240dpi

xhdpi: ~320dpi

nodpi：密度无关

tvdpi：~213dpi（主要用于电视，应用程序不需要它）

**编辑** 这也可能有用。

> 要为不同密度创建替代位图可绘制对象，您应该遵循四个通用密度之间的*3:4:6:8 缩放比例。*例如，如果您有一个 48x48 像素的用于中等密度屏幕（启动器图标的大小）的可绘制位图，则所有不同的大小应该是：
> 
> 36x36 用于低密度
> 
> 48x48 用于中等密度
> 
> 72x72 用于高密度
> 
> 96x96 用于超高密度

***还***

> 为了帮助您针对不同类型的设备进行一些设计，以下是典型屏幕宽度的一些数字：
> 
> 320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
> 
> 480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
> 
> 600dp：7 英寸平板电脑 (600x1024 mdpi)。
> 
> 720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:07:26.973

当您为不同的屏幕尺寸设计墙纸时，您会发现每种设计都需要最少的空间。因此，上面的每个通用屏幕尺寸都有一个由系统定义的相关最小分辨率。这些最小尺寸以“dp”单位为单位——在定义布局时应该使用相同的单位——这使系统可以避免担心屏幕密度的变化。

*   xlarge 屏幕墙纸至少为 960dp x 720dp
*   大屏幕墙纸至少 640dp x 480dp
*   普通屏幕墙纸至少为 470dp x 320dp
*   小屏幕墙纸至少 426dp x 320dp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:08:00.520

Here you have a long list of Android Devices: [http://en.wikipedia.org/wiki/Comparison_of_Android_devices](http://en.wikipedia.org/wiki/Comparison_of_Android_devices) In the "Display" column you have sizes and resolutions of presumably all of Android Devices. You maybe want to do statistical summary?

# jquery - 在网页上重新定位“绝对”元素 - CSS

> ID：11433257
> 
> 赞同：1
> 
> 时间：2012-07-11T13:01:51.837
> 
> 标签：jquery, html, css, slider, position

我真的很喜欢这个网站主页上的图像滑块：http: [//festival.co.nz/](http://festival.co.nz/)

但是，我想知道，**是否可以将“上一个”和“下一个”按钮移动到主“活动”图像的任一侧**。目前，它们固定在极左和极右。

这些元素的样式由这个**CSS 文件**处理：[http](http://css.festival.co.nz/yk-minifier/72cdcb814eb3e3beaa50436a9f869b1c.css) ://css.festival.co.nz/yk-minifier/72cdcb814eb3e3beaa50436a9f869b1c.css但是如果我要尝试将按钮移动到，我真的不确定从哪里开始位于中心图像的两侧。

非常感谢您对此的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:13:13.090

在 css 文件的第 397 行更改以下内容：

从

```
a.prev_event {
    left: 0;
} 
```

到

```
a.prev_event {
left: 50%;
    margin-left: -470px;
} 
```

在第 401 行，更改

```
a.next_event {
    right: 0;
} 
```

到

```
a.next_event {
    margin-right: -470px;
    right: 50%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:12:44.187

在你的 CSS 中设置`left:240px`而不是`left:0`for 。`a.prev_event`

在你的css中也设置`right:240px`而不是`right:0`for 。`a.next_event`

希望这会给你你想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:12:11.233

我考虑得越多，对关键台式计算机大小使用媒体查询并进行相应调整可能更有意义。

对不起，在这里浪费时间的家伙:(

# c - va_list 参数未按预期工作

> ID：11433260
> 
> 赞同：0
> 
> 时间：2012-07-11T13:02:03.427
> 
> 标签：c, gcc, variadic-functions

我一直在追踪一个我已经缩小到这个骨架的问题：

```
#include <unistd.h>
#include <stddef.h>
#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct __log_file_details {                           
    FILE  *fp ;                                               
    char  *name ;                                             
} log_file_details_t;

typedef struct __log_files {                                  
    char               is_open;                              
    log_file_details_t lf[3];
    void               (*open_log)(struct __log_files *ctl);
    void               (*close_log)(struct __log_files *ctl);
    } log_files_t ;                                           

int write_log(const int file_nbr, log_files_t *ctl, char *log_this, ...);
void close_log(log_files_t *ctl);
void open_log(log_files_t *ctl);              

// Here we go...                                                                                 
int main(int argc, char *argv[]) {
    log_files_t log_ctl = {
        0,
        { {NULL, NULL}, {NULL, NULL}, {NULL, NULL} },
        &open_log,
        &close_log
    };                                           

    write_log(0, &log_ctl, "foo"); // That's it.

    return 0;
}

void open_log(log_files_t *ctl) {}
void close_log(log_files_t *ctl) {}

int write_log(const int file_nbr, log_files_t *ctl, char *log_this, ...)
{
    int rc;
    /* ... */
    rc = 0;
} 
```

当我使用它编译此代码时，`gdb -g -o foo foo.c`它适用于我的大多数 linux 系统。

但是，我有一个 ARM 设备（实际上是一个运行 Linux 的 Netgear Stora），但它却惨遭失败。
在该设备上，如果我使用 GDB 单步执行此代码，则在`write_log`执行时（第 58 行），我看到：

> `Breakpoint 1, write(log(file_nbr=-1092220616, ctl=0x0, log_this=0xbee60ac4 "-garbage-") at foo.c:58`

（其中`-1092220616`是一个变化的值，并且`-garbage-`往往包含一堆控制字符。）

我不知道如何确定这是运行时问题（库之一？）、标准头文件之一的问题、gcc 问题还是其他问题。我可以做些什么来识别和解决这个问题？

如果我删除 write_log 的 va_list 定义，一切正常，但这当然不是我想要的。）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-11T15:10:40.270

您需要正确清理函数中的变量 args：

```
int write_log(const int file_nbr, log_files_t *ctl, char *log_this, ...)
{
    int rc;

    va_list vl;
    va_start(vl,log_this);

    /* ... */

    va_end(vl);

    rc = 0;
} 
```

# json - 为什么 JSON 应该有一个 status 属性

> ID：11433268
> 
> 赞同：6
> 
> 时间：2012-07-11T13:02:25.167
> 
> 标签：json, rest

我偶然发现了一种非常普遍的做法。我什至找到了一个给它起名字的网页，但我忘记了名字，再也无法在谷歌上找到那个页面了。

实践是来自 REST 服务的每个 JSON 响应都应具有以下结构：

```
{
    "status": "ok",
    "data": { ... }
} 
```

或在错误情况下：

```
{
    "status": "error",
    "message": "Something went wrong"
} 
```

**我的问题：为什么在 JSON 中需要这样的“状态”属性有什么意义？在我看来，这就是 HTTP 状态码的用途。**

REST 在客户端和服务器之间使用 HTTP 通信方式，例如“DELETE”动词应该用于删除。同样，如果找不到资源等，则应使用 404。因此，根据这种想法，任何错误情况都应在 HTTP 状态中正确编码。

是否有特定原因在错误情况下返回 HTTP 200 状态代码并在 JSON 中出现错误？在处理响应时，它似乎使 javascript 条件分支更加复杂。

我发现某些情况下状态可能是“重定向”以告诉应用程序重定向到某个 URL。但是，如果使用了正确的 HTTP 状态代码，浏览器将“免费”执行重定向，从而正确维护浏览历史记录。

我主要从你那里得到两个可能的答案：

*   要么有两个争吵的社区，每个社区都有他们最喜欢的方法（总是使用 HTTP 状态与从不使用 HTTP 状态）
*   或者我遗漏了重要的一点，您会告诉我，虽然在某些情况下应该使用 HTTP 状态，但在某些特定情况下，HTTP 状态不适合并且“状态”JSON 属性会发挥作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:09:03.967

你说的对。我认为您所看到的是人们没有正确执行 REST 的副作用。或者根本不做 REST。使用 REST 不是设计良好的应用程序的先决条件；没有规定 webapps 必须是 REST-ful 的。

另一方面，对于错误情况，有时应用程序想要返回 200 代码但错误表示业务逻辑失败。HTTP 错误代码并不总是与应用程序业务错误的语义相匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:34:22.473

您在这里混合了两个不同的图层：

*   HTTP 用于建立（高级）连接和传输数据。因此，[HTTP 状态代码](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)会通知您连接是否建立以及如何建立，或者为什么没有建立。在成功的连接上，HTTP 请求的主体可以包含任何内容（例如 XML、JSON 等），因此这些状态代码必须定义一般含义。它不会通知您响应的正确性或类型（例如错误消息或数据）。

*   当使用 JSON 交换数据时，您当然可以省略该`status`属性，但是如果您知道它是否包含您正在请求的对象或仅通过读取一个属性的错误消息，则解析 JSON 会更容易。

所以，是的，返回`200`状态码并`"status": "error"`在 JSON 中有一个属性是完全正常的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T13:13:20.667

HTTP 状态码可能由很多因素引起，包括负载平衡器、代理、缓存、防火墙等。这些都不会修改您的 JSON 输出，除非它们完全破坏它，这也可以视为错误。

底线：通过 JSON 执行此操作更可靠。

# graphviz - 用子图分组节点

> ID：11433270
> 
> 赞同：29
> 
> 时间：2012-07-11T13:02:33.067
> 
> 标签：graphviz, dot, subgraph

我想用以下代码对一些节点进行分组

```
digraph dataflow {
    subgraph pipeline {
        relations;
        synonyms;
        articles;
    }
    subgraph lucene {
        index;
        search;
    }
    training_data - > index;
    relations - > search;
    synonyms - > index;
    articles - > index;
    training_data - > evaluation;
} 
```

但 dot 不关心子图：

![示例点图](../Images/fba904848471d91c07eda9e8832163f9.png)

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-11T14:43:23.160

尝试在您的子图前加上“cluster_”：

```
digraph dataflow {
    subgraph cluster_pipeline {
        relations;
        synonyms;
        articles;
    }
    subgraph cluster_lucene {
        index;
        search;
    }
    training_data -> index;
    relations -> search;
    synonyms -> index;
    articles -> index;
    training_data -> evaluation;
} 
```

# java - 如何检测字符串是否包含任何从右到左的字符？

> ID：11433272
> 
> 赞同：10
> 
> 时间：2012-07-11T13:02:34.937
> 
> 标签：java, string, right-to-left

我正在尝试制作一种方法来检测用 Java 从右到左语言编写的字符串。我想出了[这个问题](https://stackoverflow.com/questions/4330951/how-to-detect-whether-a-character-belongs-to-a-right-to-left-language)，在 C# 中做类似的事情。
现在我需要有类似的东西，但用 Java 编写。
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T10:42:23.757

我想出了以下代码：

```
char[] chars = s.toCharArray();
for(char c: chars){
    if(c >= 0x600 && c <= 0x6ff){
        //Text contains RTL character
        break;
     }
} 
```

这不是一种非常有效的方法，也不是一种准确的方法，但可以给出一个想法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-20T13:17:37.853

问题很旧，但也许其他人可能有同样的问题......

在尝试了几种解决方案后，我找到了一个适合我的解决方案：

```
if (Character.getDirectionality(string.charAt(0)) == Character.DIRECTIONALITY_RIGHT_TO_LEFT
    || Character.getDirectionality(string.charAt(0)) == Character.DIRECTIONALITY_RIGHT_TO_LEFT_ARABIC
    || Character.getDirectionality(string.charAt(0)) == Character.DIRECTIONALITY_RIGHT_TO_LEFT_EMBEDDING
    || Character.getDirectionality(string.charAt(0)) == Character.DIRECTIONALITY_RIGHT_TO_LEFT_OVERRIDE
    ) {

    // it is a RTL string
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-03-07T16:32:16.850

这是达科答案的改进版本：

```
public static boolean isRtl(String string) {
    if (string == null) {
        return false;
    }

    for (int i = 0, n = string.length(); i < n; ++i) {
        byte d = Character.getDirectionality(string.charAt(i));

        switch (d) {
            case DIRECTIONALITY_RIGHT_TO_LEFT:
            case DIRECTIONALITY_RIGHT_TO_LEFT_ARABIC:
            case DIRECTIONALITY_RIGHT_TO_LEFT_EMBEDDING:
            case DIRECTIONALITY_RIGHT_TO_LEFT_OVERRIDE:
                return true;

            case DIRECTIONALITY_LEFT_TO_RIGHT:
            case DIRECTIONALITY_LEFT_TO_RIGHT_EMBEDDING:
            case DIRECTIONALITY_LEFT_TO_RIGHT_OVERRIDE:
                return false;
        }
    }

    return false;
} 
```

此代码适用于以下所有情况：

```
בוקר טוב               => true
good morning בוקר טוב  => false
בוקר טוב good morning  => true
good בוקר טוב morning  => false
בוקר good morning טוב  => true
(בוקר טוב)             => true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:08:34.567

也许这应该有所帮助：

[http://en.wikipedia.org/wiki/Right-to-left_mark](http://en.wikipedia.org/wiki/Right-to-left_mark)

当存在 rtl 字符串时，应该有一个 Unicode 字符，即 U+200F。

问候

# app-store-connect - iTunesConnect 中的英语以外的语言

> ID：11433274
> 
> 赞同：1
> 
> 时间：2012-07-11T13:02:49.370
> 
> 标签：app-store-connect, mac-app-store

我们在美国应用商店有一个应用，我们希望我们的用户也能在希伯来语中找到它。所以我们希望他们能够用英语或希伯来语搜索应用程序名称，并且仍然可以找到它。结果发现在希伯来语中输入关键字不起作用，即在美国商店中用希伯来语搜索这些关键字不会返回任何结果。美国不支持希伯来语搜索，还是我们需要在 iTunes 连接的应用程序元数据中添加希伯来语作为一种语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T23:02:39.953

在 appStore（在您的情况下为美国）中搜索当然只会带来该语言的结果（目前为英语）。如果您希望它以希伯来语提供，那么您必须将其放入相关的 appStore，而您不必将整个应用程序翻译成希伯来语，除非您希望您的用户也拥有该翻译。

希望我能帮上忙；）

# multiple-inheritance - 使用这些设施对正交性有什么影响？

> ID：11433286
> 
> 赞同：7
> 
> 时间：2012-07-11T13:03:27.360
> 
> 标签：multiple-inheritance, conceptual, orthogonal

我正在阅读[*Andrew Hunt 和 David Thomas*](http://www.goodreads.com/book/show/4099.The_Pragmatic_Programmer)[所著](http://www.goodreads.com/book/show/4099.The_Pragmatic_Programmer)[**的实用程序员：从熟练工到大师**](http://www.goodreads.com/book/show/4099.The_Pragmatic_Programmer)*。当我读到一个叫做*正交*性的术语时，我认为我做对了。我非常了解它。然而，在本章的最后，提出了几个问题来衡量对该主题的理解程度。当我试图对自己回答这些问题时，我意识到我并没有完全理解它。因此，为了澄清我的理解，我在这里提出这些问题。*

 *> C++支持多重继承，Java允许一个类实现多个接口。**使用这些设施对正交性有什么影响？使用多重继承和多重接口的影响有区别吗？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T16:46:31.893

这里实际上捆绑了三个问题：（1）支持多重继承对正交性有什么影响？(2) 实现多个接口对正交性有什么影响？(3) 这两种影响有什么区别？

首先，让我们掌握正交性。在 The Art of Unix Programming 中，Eric Raymond 解释说：“在纯粹的正交设计中，操作没有副作用；每个操作（无论是 API 调用、宏调用还是语言操作）只改变一件事而不会影响其他操作. 改变你所控制的任何系统的每个属性的方法只有一种。”

所以，现在看问题（1）。C++ 支持多重继承，因此 C++ 中的一个类可以从两个具有相同操作但具有两种不同效果的类继承。这有可能是非正交的，但 C++ 要求您明确声明哪个父类具有要调用的功能。这会将操作限制为仅一种效果，因此保持正交性。请参阅[多重继承。](http://en.wikipedia.org/wiki/Multiple_inheritance "多重继承")

和问题（2）。Java 不允许多重继承。一个类只能派生自一个基类。接口用于编码各种类型的类共享的相似性，但不一定构成类关系。Java 类可以实现多个接口，但只有一个类在执行，因此调用方法时应该只有一种效果。即使一个类实现了两个具有相同名称和签名的方法的接口，它也会同时实现这两个方法，因此应该只有一个效果。请参阅[Java 接口。](http://en.wikipedia.org/wiki/Interface_%28Java%29)

最后是问题（3）。区别在于C++和Java通过不同的机制来保持正交性：C++通过要求显式指定父级，所以效果上不会有歧义；和Java通过同时实现类似的方法所以只有一个效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T19:12:07.527

无论您扩展了多少个接口/类，该类中都只有一个实现。假设您的班级是 X。现在正交性说 - 一项更改应该只影响一个模块。如果您更改类 X 中一个接口的实现 - 它会影响使用您的类 X 的其他模块/类吗？答案是否定的——因为其他模块/类是通过接口而不是实现来编码的。因此保持正交性。*

# objective-c - Delayed deallocation of contained objects with ARC?

> ID：11433289
> 
> 赞同：0
> 
> 时间：2012-07-11T13:03:33.177
> 
> 标签：objective-c, ios, automatic-ref-counting, autorelease, dealloc

I recently migrated my game to ARC. First, I noticed my app crashed after playing for a while. So I began debugging it and noticed that, on receiving a memory warning, the deallocation of some resources was being corrupted.

**Background** (Don't read if you understand the code below)

In my game, OpenGL textures are encapsulated in an Objective-C class (`Texture`). This class keeps track of the 'use count', i.e. how many objects are referencing the texture at a given time (similar to Obj-C `retainCount`) with a property adeptly named `useCount`. On deallocation, the OpenGL texture is destroyed.

Sprites are created using `TextureAtlas` objects. Each texture atlas is associated with a `Texture` object and a database of named subregions inside the texture image. On creation of the atlas, it increases the associated `Texture`'s use count by 1\. Also, each texture atlas keeps track of how many `Sprite` instances are referencing its texture (i.e., how many sprites have been created from the atlas and are still around). Needless to say, on deallocation each atlas decreases the associated texture's use count by 1.

In addition, when a new `Sprite` is created (from a `TextureAtlas` or otherwise), the `useCount` of the corresponding texture is also increased, once by each sprite. And decreased again, on sprite deallocation.

So, as long as some `Sprite` is referencing a `TextureAtlas`'s texture, the atlas can't be purged. And as long as some `Sprite` or `TextureAtlas` is referencing a `Texture`, the texture can't be purged either.

`Texture` objects and `TextureAtlas` objects, in turn, are managed by the singletons `TextureManager` and `TextureAtlasManager` respectively. These two managers are responsible for creating resources as necessary and purging unused resources on low-memory situations.

I chose this design (decoupling `Texture` use count by sprites and atlases, and `TextureAtlas` use count by sprites) because some times I might need a texture for something else than a sprite (say, a 3D object).

**Still here?**

So, when I receive a memory warning, first I call the `-purge` method in the `TextureAtlasMananger` :

```
- (void) purge
{
    // Called on Low Memory Situations.
    // purges unused atlases.

    // _atlasRank is an array of atlases in MRU order
    // _atlasDatabase is a dictionary of atlases keyed by their name

    NSUInteger count = [_atlasRank count];   

    NSMutableArray* atlasesToRemove = [[NSMutableArray alloc] init];

    for (NSUInteger i=0; i < count; i++) {

        TextureAtlas* atlas = [atlasRank objectAtIndex:i];

        if ([atlas canDelete]) {
            // Means there are no sprites alive that where created
            //  from this atlas

            [atlasesToRemove addObject:atlas];

            [_atlasDatabase removeObjectForKey:[atlas name]];

            NSLog(@"TextureAtlasManager: Successfully purged atlas [%@]", [atlas name]);
        }
        else{
            // Means some sprite remains that was
            //  created from this atlas

            NSLog(@"TextureAtlasManager: Failed to purge atlas [%@]", [atlas name]);
        }
    }

    [_atlasRank removeObjectsInArray:atlasesToRemove];

    // At this point, atlasesToRemove should be deallocated
    //  by ARC, and every atlas in atlasesToRemove 
    //  should be deallocated as well.

    // This FAILS to delete unused textures:
    [[TextureManager sharedManager] purgeUnusedTextures];

    // (:Removed atlases are not yet deallocated and 'retain'
    //  their texture)

    // ...But This SUCCEEDS:
    [[TextureManager sharedManager] performSelector:@selector(purgeUnusedTextures) 
                                           withObject:nil 
                                           afterDelay:0.5];

    // (i.e., -[TextureAtlas dealloc] gets called before -purgeUnusedTextures)
} 
```

It seems that the temporary array I created to hold the atlases scheduled for deletion (I don't like removing objects from the array being iterated) is being 'autoreleased' later.

I've checked this similar question: [Inconsistent object deallocation with ARC?](https://stackoverflow.com/questions/9173120/inconsistent-object-deallocation-with-arc) , but I fail to see how it applies to my case. The array in question is a local variable of the method, created with alloc/init. How can I ensure it is not autoreleased? (if that is the case).

**EDIT** (Solved?)

I can confirm that the delayed deallocation disappears (i.e., code works as intended) if I replace this:

```
[atlasRank removeObjectsInArray:atlasesToRemove]; 
```

with this:

```
[atlasRank removeObjectsInArray:atlasesToRemove];
atlasesToRemove = nil; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:13:29.007

You can check if any of your objects is inadvertently retained by an autorelease pool: Just wrap your `purge` method's contents in an `@autorelease` block. That would remove any recently autoreleased objects when control flow leaves the scope of the pool.

**Edit**, to answer comment:

ARC does not give a precise promise about when objects are added to an autorelease pool. The resulting code actually differs when compiling with optimizations.

You can somehow control behavior for automatic variables (function scope) by adding a [`objc_precise_lifetime` attribute](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#optimization.precise) to it's declaration.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:49:24.337

You've already found the answer, but to elaborate: because you created a local reference to each object in your cache, the lifetime of each of those objects was extended at least to the end of the loop (and possibly further at ARC's discretion.) If you mark a local variable as `__weak`, ARC will skip that step.

# multithreading - 动画循环在一个单独的线程中，Native Client

> ID：11433290
> 
> 赞同：1
> 
> 时间：2012-07-11T13:03:34.317
> 
> 标签：multithreading, google-nativeclient

在 Native Client 中，是否可以在单独的线程中设置动画循环？我找不到任何这样做的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:40:06.300

如果您的意思是基于 OpenGL ES 2.0 的动画，那么不，您必须从主线程进行所有 OpenGL 调用。但是您可以保留不同的线程来计算帧计数器或其他计算。

唯一的限制是从主线程进行所有 OpenGL 调用。

# ubuntu - 如何在 debian 中安装 apt 包？

> ID：11433293
> 
> 赞同：2
> 
> 时间：2012-07-11T13:03:38.047
> 
> 标签：ubuntu, debian, apt

我有 Debian GNU/Linux 6.0.4（挤压）。错误地从我的操作系统中删除了所有 apt 文件。我正在尝试安装包“apt_0.9.7.1_amd64.deb”。但是在安装软件包时出现以下错误：

```
Unpacking replacement apt ...
dpkg: dependency problems prevent configuration of apt:
 apt depends on libapt-pkg4.12 (>= 0.9.7.1); however:
  Package libapt-pkg4.12 is not installed.
 apt depends on libstdc++6 (>= 4.6); however:
  Version of libstdc++6 on system is 4.4.5-8.
 apt depends on debian-archive-keyring; however:
  Package debian-archive-keyring is not installed.
dpkg: error processing apt (--install):
 dependency problems - leaving unconfigured
Processing triggers for man-db ...
Errors were encountered while processing:
 apt 
```

谁能知道如何安装apt包？或者有没有其他方法来安装包。

在使用 sudo apt-get update 等任何命令时，我收到错误

```
apt : Depends: debian-archive-keyring but it is not going to be installed 
```

为了安装 debian-archive-keyring，我需要 apt，而对于 apt，我需要 debian-archive-keyring。请提出任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T04:11:05.633

由于`apt`您的系统上不再存在，您必须手动修复此问题。

对我来说，这适用于 Ubuntu 13.10：

下载`apt_1.0.1ubuntu2.5_amd64.deb`： [http ://packages.ubuntu.com/trusty/apt](http://packages.ubuntu.com/trusty/apt)

尝试使用安装它`dpkg`：

> sudo dpkg -i apt_1.0.1ubuntu2.5_amd64.deb

您可能会收到如下错误：

```
Unpacking apt (from apt_1.0.1ubuntu2.5_amd64.deb) ...
dpkg: dependency problems prevent configuration of apt:
 apt depends on libapt-pkg4.12 (>= 0.9.16); however:
  Version of libapt-pkg4.12:amd64 on system is 0.9.9.1~ubuntu3. 
```

要修复此从[同一站点](http://packages.ubuntu.com/trusty/libapt-pkg4.12)下载正确版本的依赖项。

并安装：

> sudo dpkg -i libapt-pkg4.12_1.0.1ubuntu2.5_amd64.deb

现在您应该能够重复第一个命令并安装`apt`.

注意：软件包版本可能因您的 Ubuntu 版本而异。要找到正确的版本，请使用标题中的菜单来选择您的 ubuntu 版本： ![在此处输入图像描述](../Images/3ac6ff8856caef524a33b1d45eab79ef.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:27:02.460

尝试`su`在 tty 环境（无 gui）中扎根，然后尝试`apt-get update`和/或`apt-get -f install`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:29:08.973

尝试使用 aptitude 或下载该特定软件包（必要时带有依赖项）并使用 dpkg -i your-downloaded-packages*.deb 安装它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-19T18:16:01.830

试试这个单线，当我遇到依赖问题时，它大部分时间都对我有帮助。

输入以下命令`sudo dpkg install -f`。我希望这有帮助。

# c# - C# 中的 WebSphere MQ 侦听器

> ID：11433294
> 
> 赞同：4
> 
> 时间：2012-07-11T13:03:37.887
> 
> 标签：c#, ibm-mq

我需要用 C# 编写一个基于 Windows 的服务来监听 WebSphere MQ 中配置的请求队列。我成功地将请求放入 MQ 并获得了相关 ID，但作为响应，我没有得到实际结果。

我想开发一个系统，每当有新消息到达队列时，服务应该接收消息并处理请求。我可以使用我的相关 ID 映射该响应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T12:12:03.597

下面的代码解决了我的问题。

```
class Program
{
    static void Main(string[] args)
    {
        Program app = new Program();
        app.Setup();
        Console.ReadLine();

    }

    public void Setup()
    {
        XMSFactoryFactory xff = XMSFactoryFactory.GetInstance(XMSC.CT_WMQ);
        IConnectionFactory cf = xff.CreateConnectionFactory();
        cf.SetStringProperty(XMSC.WMQ_HOST_NAME, "10.87.188.156(7111)");
        cf.SetIntProperty(XMSC.WMQ_PORT, 7111);
        cf.SetStringProperty(XMSC.WMQ_CHANNEL, "QMEIGS1.CRM.SVRCONN");
        cf.SetIntProperty(XMSC.WMQ_CONNECTION_MODE, XMSC.WMQ_CM_CLIENT);
        cf.SetStringProperty(XMSC.WMQ_QUEUE_MANAGER, "QMEIGS1");
        cf.SetIntProperty(XMSC.WMQ_BROKER_VERSION, XMSC.WMQ_BROKER_V1);

        IConnection conn = cf.CreateConnection();
        Console.WriteLine("connection created");
        ISession sess = conn.CreateSession(false, AcknowledgeMode.AutoAcknowledge);
        IDestination dest = sess.CreateQueue("DOX.APYMT.ESB.SSK.RPO.02");
        IMessageConsumer consumer = sess.CreateConsumer(dest);
        MessageListener ml = new MessageListener(OnMessage);
        consumer.MessageListener = ml;
        conn.Start();
        Console.WriteLine("Consumer started");

    }

    private void OnMessage(IMessage msg)
    {
        ITextMessage textMsg = (ITextMessage)msg;
        Console.Write("Got a message: ");
        Console.WriteLine(textMsg.Text);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-28T09:45:52.273

我正在连接到 Z/OS 大型机上的 MQ。Rashmi 的代码示例对我有用，但我需要更改“OnMessage”方法，如下所示来提取消息：

```
 private void OnMessage(IMessage msg)
    {
        IBytesMessage bytesMessage = (IBytesMessage)msg;

        var buffer = new byte[bytesMessage.BodyLength];
        bytesMessage.ReadBytes(buffer, (int)bytesMessage.BodyLength);
        var messageAsText = Encoding.Unicode.GetString(buffer);

        Console.Write("Got a message: ");
        Console.WriteLine(messageAsText);
    } 
```

# android - 另一个屏幕中列表项的详细信息

> ID：11433303
> 
> 赞同：-1
> 
> 时间：2012-07-11T13:04:00.407
> 
> 标签：android

**android 解析来自 xml 的数据::** 此代码将数据从 xml 解析到列表视图我想制作一个详细信息屏幕，当用户单击第一个屏幕中的列表项时，它会向用户显示名称的详细信息，任何人都可以帮助解决这个问题吗？ ?

```
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class LastActivity extends ListActivity {
    /** Called when the activity is first created. */

    List links;
    List names;
    List uniUrl;
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        Uri uri = Uri.parse((String) uniUrl.get(position));

           Intent intent = new Intent(Intent.ACTION_VIEW, uri);

           startActivity(intent);

    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        links=new ArrayList();
        names=new ArrayList();
        uniUrl=new ArrayList();
        try{
            URL url=new URL(webservice);
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();
            xpp.setInput(getInputStream(url), "UTF_8");
            boolean insideItem = false;

                    // Returns the type of current event: START_TAG, END_TAG, etc..

            int eventType = xpp.getEventType();

            while (eventType != XmlPullParser.END_DOCUMENT) {

                    if (eventType == XmlPullParser.START_TAG) {

                        if (xpp.getName().equalsIgnoreCase("university")) {

                            insideItem = true;

                        } else if (xpp.getName().equalsIgnoreCase("universityName")) {

                            if (insideItem)

                                names.add(xpp.nextText()); //extract the headline

                        } else if (xpp.getName().equalsIgnoreCase("url")) {

                            if (insideItem)

                                links.add(xpp.nextText()); //extract the link of article

                        }
                    }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){

                        insideItem=false;

                    }

                    eventType = xpp.next(); //move to next element

                }

        }catch (MalformedURLException e) {

            e.printStackTrace();

        } catch (XmlPullParserException e) {

            e.printStackTrace();

        } catch (IOException e) {

            e.printStackTrace();

        }
        ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_list_item_1, names);

                setListAdapter(adapter);

    }
    private InputStream getInputStream(URL url) {
        // TODO Auto-generated method stub
        try {
             return url.openConnection().getInputStream();
             } catch (IOException e) {
                   return null;

                 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:25:09.593

在要显示详细信息的其他活动中使用`intent.putExtra("your field",your_actual_value);`方法和使用方法。`getIntent()`您想在下一个屏幕中显示哪些具体细节？请明确点..

# android - @andorid 在 alertDialog 自定义列表视图中，背景颜色变为黑色。我要白色

> ID：11433306
> 
> 赞同：0
> 
> 时间：2012-07-11T13:04:03.693
> 
> 标签：android, listview, android-alertdialog

我正在尝试制作自定义列表视图 AlertDialog。但是 Dialog 的背景颜色是黑色的。

当我滑动列表时，背景颜色变为白色。我不想让我的对话框

背景黑色。什么是问题？

```
btn_right.setOnClickListener(new Button.OnClickListener(){
        @Override
        public void onClick(View v){
            Dialog dialog2 = new Dialog(context); 
            ListView modeList = new ListView(context); 
            AlertDialog.Builder builder = new AlertDialog.Builder(context); 
            SectionedAdapter adapter;  //custom adapter
            adapter = new SectionedAdapter(context);
                builder.setTitle("list"); 
                builder.setView(modeList);          
                adapter.addSection("7th", new ArrayAdapter<String>(context,
                        R.layout.member_list, R.id.member_text, stringList));
                modeList.setAdapter(adapter); 

                dialog2 = builder.create();
                dialog2.show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:09:34.410

添加以下代码：

`android:cacheColorHint="#00000000"`在列表视图中

或者

```
listview.setCacheColorHint(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:07:38.133

使用此代码：

```
modeList.setCacheColorHint(0); 
```

# lazy-loading - 使用 db4o 进行延迟加载

> ID：11433312
> 
> 赞同：2
> 
> 时间：2012-07-11T13:04:22.987
> 
> 标签：lazy-loading, db4o

我想知道是否有任何方法可以使用 db4o 延迟加载对象？我阅读了所有的教程，似乎这个功能不存在。

让我们澄清一下我的观点。例如，假设我有一个包含 50 个复杂字段的 House 对象。

```
House
 1) location : Country (complex object)
 2) window : Window (complex object)
 3) livingRoom : Room (complex object)
   .
   .
   .
 50) door : Door (complex object). 
```

假设在我的程序的某个地方，我只需要房子的位置。如果我开启了db4o的透明激活机制，当我访问location字段的时候，整个house对象都被激活了，也就是说所有的字段都被填满了值。这很愚蠢，因为从数据库中检索所有其他大而复杂的字段（在这种情况下我不会使用）都是无用且昂贵的。

如果我有办法告诉 db4o 要么完全激活一个对象，要么只根据我的需要激活对象的某些字段，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:43:17.010

如果我对您的理解正确，那么 db4o 的透明激活应该足以完成您想要的，前提是您的所有“子对象”也实现了 Activatable 接口（当然，您在配置中添加了[TransparentActivationSupport](http://source.db4o.com/db4o/trunk/db4oj/core/src/com/db4o/ta/TransparentActivationSupport.java)）。

因此，在您的示例中，当**房屋**被激活时，其所有字段都将变为非空但不会被激活；只有当您访问这些字段时，它们才会被激活。

您能否发布让您相信所有对象都被激活的代码（或简单测试）？

最好的

# javascript - 具有条件字段的主干形式

> ID：11433314
> 
> 赞同：6
> 
> 时间：2012-07-11T13:04:26.903
> 
> 标签：javascript, html, forms, backbone.js

首先感谢[backbone-forms](https://github.com/powmedia/backbone-forms)的人，他们制作了一个完美集成到backbone.js框架中的工具。

我正在使用带有主干表单插件的主干.js，但我需要创建条件字段。

假设我有以下表格。我想根据在`select`.

```
<form method="post" action="">                  
    <select > 
        <option value="" selected="selected">choose one</option>
        <option value="1" >line</option>
        <option value="2" >area</option>
    </select>
    <input id="element_1" /> 
    <textarea id="element_2" ></textarea> 
</form> 
```

像这样的行为默认在主干中实现？

如果没有，我如何使用 javascript 和 backone-forms 实现它？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-29T22:32:44.233

您可以将事件绑定到选择元素并让它们切换其他表单元素的可见性。

尝试这个：

```
$(function() {

    //The form
    var form = new Backbone.Form({
        schema: {
            inputType: { type: 'Select', options: ['line', 'area'] },
            line: 'Text',
            area: 'TextArea'
        }
    }).render();

    form.fields['area'].$el.hide();

    form.on('inputType:change', function(form, editor) {         
        form.fields['line'].$el.toggle();
        form.fields['area'].$el.toggle();
    });

    //Add it to the page
    $('body').append(form.el);
}); 
```

这是一些实时代码：http: [//jsfiddle.net/shioyama/grn6y/](http://jsfiddle.net/shioyama/grn6y/)

源于此：[https ://groups.google.com/d/topic/backbone-forms/X5eVdTZWluQ/discussion](https://groups.google.com/d/topic/backbone-forms/X5eVdTZWluQ/discussion)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:56:58.443

没有默认实现。其实完全靠自己也很简单，请参考以下代码：</p>

```
//Pseudo code 
var line = $("element_1"),area = $("element_2");
if(selectvalue ==="1"){
  line.show();
  area.hide();
}
else{
  line.hide();
  area.show();
} 
```

# xpages - djextListTextBox onChange 依赖控件

> ID：11433315
> 
> 赞同：0
> 
> 时间：2012-07-11T13:04:29.963
> 
> 标签：xpages

我在 djextListTextBox 的更改事件后刷新依赖控件时遇到问题。

这是一个代码片段：

```
...
<xe:djextListTextBox id="reinsuranceIdentifier" 
    value="#{offerAccount.reinsuranceIdentifier}" multipleSeparator=","
    multipleTrim="true" displayLabel="true">
    <xp:eventHandler event="onChange" submit="false">
        <xp:this.script><![CDATA[alert("reinsuranceIdentifier - onChange");
            XSP.partialRefreshGet("#{id:computedField1}", {});]]></xp:this.script>
    </xp:eventHandler>
</xe:djextListTextBox>
...
<xe:valuePicker id="valuePickerReinsuranceIdentifier"
    for="reinsuranceIdentifier" dialogTitle="Reinsurance"
    pickerIcon="/dropdown_16x16.gif">
    <xe:this.dataProvider>
        <xe:simpleValuePicker labelSeparator="|">
            <xe:this.valueList><![CDATA[#{javascript:var key = "Reinsurance_" + sessionScope.language;
                return getMultiParams(key, 4, true, true);}]]></xe:this.valueList>
        </xe:simpleValuePicker>
    </xe:this.dataProvider>
</xe:valuePicker>
...
<xp:text escape="true" id="computedField1">
    <xp:this.value><![CDATA[#{javascript:return "v: " + getComponent("reinsuranceIdentifier").getValue() + " -" + offerAccount.getItemValue("reinsuranceIdentifier") + " -" + offerAccount.getItemValue("reinsuranceIdentifier").get(0);}]]></xp:this.value>
</xp:text>
... 
```

刷新后计算域显示如下值： v: -[] -

表示“reinsuranceIdentifier”listTextBox的组件值和数据源项值都是空的......

怎么了？？

我需要根据列表文本框的值更改其他字段，这不可能吗？

谢谢马里奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:32:59.870

您没有在 onchange 中提交，因此数据源将没有值。我不确定你的问题到底是什么（我没有你的数据等很难说）但下面的代码是一个修改，它对我来说很好。尝试以这种方式进行部分刷新，除非您需要以这种方式进行多个控件？

```
 <xe:djextListTextBox id="reinsuranceIdentifier" 
        value="" multipleSeparator=","
        multipleTrim="true" displayLabel="true">
        <xp:eventHandler event="onChange" submit="true"
            refreshMode="partial" refreshId="computedField1">
        </xp:eventHandler>
    </xe:djextListTextBox>

    <xp:br></xp:br>
    <xp:br></xp:br>

    <xe:valuePicker id="valuePickerReinsuranceIdentifier"
        for="reinsuranceIdentifier" dialogTitle="Reinsurance">
        <xe:this.dataProvider>
            <xe:simpleValuePicker valueListSeparator=",">
                <xe:this.valueList><![CDATA[#{javascript:
                    return "test1, test2, test3, test4";
                }]]></xe:this.valueList>
            </xe:simpleValuePicker>
        </xe:this.dataProvider>
    </xe:valuePicker>

    <xp:br></xp:br>
    <xp:br></xp:br>

    <xp:text escape="true" id="computedField1">
        <xp:this.value><![CDATA[#{javascript:return "v: " + getComponent("reinsuranceIdentifier").getValue();}]]></xp:this.value>
    </xp:text> 
```

# c - c 在浮点数中用逗号替换点

> ID：11433322
> 
> 赞同：0
> 
> 时间：2012-07-11T13:04:36.350
> 
> 标签：c, floating-point

我正在开发一个简单的 GTK+3 程序来进行简单的计算。
我对浮点数有疑问，因为如果我写`.`而不是`,`总数将是错误的。
所以我有`float price;`并且我想`.`用`,`.
示例：用户写`100.60`为价格，我想将其转换为`100,60`. 我该怎么做？
我想过，`strchr`但它是一个浮点数，我想我不能使用它 xD
谢谢 :)

编辑：添加了代码

```
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>

GtkWidget *window;
GtkWidget *grid;
GtkWidget *c_button;
GtkWidget *q_button;
GtkWidget *u_name;
GtkWidget *h_name;
GtkWidget *pass;
GtkWidget *label_user;
GtkWidget *label_host;
GtkWidget *label_pass;

/* Funzione attivata alla pressione del pulsante connect */
int calcolo_guadagno(void){
    int num_btp, i, len;
    float prezzo_attuale, subtotale, totale, diff_prezzo_attuale, PREZZO_PARTENZA = 99.42;
    char cmcd[15];
    num_btp = (atoi(gtk_entry_get_text(GTK_ENTRY(h_name)))/PREZZO_PARTENZA);
    prezzo_attuale = atof(gtk_entry_get_text(GTK_ENTRY(u_name)));
    diff_prezzo_attuale = (prezzo_attuale - PREZZO_PARTENZA);
    subtotale = (num_btp * diff_prezzo_attuale);
    totale = subtotale-((subtotale/100)*12.5);
    if(prezzo_attuale < PREZZO_PARTENZA){
        strcpy(cmcd, "Sei in perdita...");
        gtk_entry_set_text(GTK_ENTRY(pass),cmcd);
        return EXIT_SUCCESS;
    }
    if(prezzo_attuale == PREZZO_PARTENZA){
        strcpy(cmcd, "Sei in pari...");
        gtk_entry_set_text(GTK_ENTRY(pass),cmcd);
        return EXIT_SUCCESS;
    }
    sprintf(cmcd, "%.3f", totale);
    gtk_entry_set_text(GTK_ENTRY(pass),cmcd);
    return EXIT_SUCCESS;
}

   int main (int argc, char *argv[]){

    /* Inizializziamo le librerie GTK+ */
    gtk_init (&argc, &argv);

    /* Creiamo la finestra principale, impostiamo il titolo, la posizione e la dimensione */
    window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title (GTK_WINDOW (window), "Calcolo Guadagno BTP");
    gtk_window_set_position (GTK_WINDOW(window), GTK_WIN_POS_CENTER);
    gtk_window_set_default_size (GTK_WINDOW(window), 350, 250);

    /* Quando premiamo chiudi si 'disturgge' tutto */
    g_signal_connect (window, "destroy", G_CALLBACK (gtk_main_quit), NULL);

    /* Impostiamo il bordo e dichiariamo le finestra ridimensionabile */
    gtk_container_set_border_width (GTK_CONTAINER (window), 10);
    gtk_window_set_resizable(GTK_WINDOW(window), TRUE);

    /* Creiamo una nuova griglia, la aggiungiamo alla finestra e impostiamo gli spazi fra i vari widget */
    grid = gtk_grid_new ();
    gtk_container_add (GTK_CONTAINER (window), grid);
    gtk_grid_set_row_spacing (GTK_GRID (grid), 3);

    /* Creiamo delle label con il relativo nome */
    label_user = gtk_label_new("Prezzo attuale ");
    label_host = gtk_label_new("Soldi investiti ");
    label_pass = gtk_label_new("Guadagno netto ");

    /* Creo una entry_text */
    h_name = gtk_entry_new();
    /* Impostiamo il testo trasparente che scompare quando clicco o scrivo */
    gtk_entry_set_placeholder_text (GTK_ENTRY (h_name), "Soldi investiti");
    u_name = gtk_entry_new();
    gtk_entry_set_placeholder_text (GTK_ENTRY (u_name), "Prezzo attuale");
    pass = gtk_entry_new();
    /* Impostiamo il campo password non visibile */
    gtk_editable_set_editable (GTK_EDITABLE (pass), 0);
    /* Creiamo i pulsanti e li connettiamo alle relative funzioni */
    c_button = gtk_button_new_with_label ("Calcola");
    g_signal_connect (c_button, "clicked", G_CALLBACK (calcolo_guadagno), NULL);
    q_button = gtk_button_new_with_label ("Esci");
    g_signal_connect (q_button, "clicked", G_CALLBACK (gtk_main_quit), NULL);

    /* Imposto i widget come espandibili sia in orizzontale che in verticale */
    gtk_widget_set_hexpand(u_name, TRUE);
    gtk_widget_set_vexpand(u_name, TRUE);
    gtk_widget_set_hexpand(h_name, TRUE);
    gtk_widget_set_vexpand(h_name, TRUE);
    gtk_widget_set_hexpand(pass, TRUE);
    gtk_widget_set_vexpand(pass, TRUE);

    /* Posizioniamo i widget all'interno della griglia */
    gtk_grid_attach (GTK_GRID (grid), label_host, 0, 0, 1, 1);
    gtk_grid_attach (GTK_GRID (grid), h_name, 1, 0, 1, 1);
    gtk_grid_attach (GTK_GRID (grid), label_user, 0, 1, 1, 1);
    gtk_grid_attach (GTK_GRID (grid), u_name, 1, 1, 2, 1);
    gtk_grid_attach (GTK_GRID (grid), label_pass, 0, 2, 1, 1);
    gtk_grid_attach (GTK_GRID (grid), pass, 1, 2, 1, 1);
    gtk_grid_attach (GTK_GRID (grid), c_button, 0, 3, 2, 1);
    gtk_grid_attach (GTK_GRID (grid), q_button, 0, 4, 2, 1);

    /* Mostriamo tutti i widget */
    gtk_widget_show_all (window);

    /* Entriamo nel loop principale delle GTK+, da questo punto  l'applicazione attende l'accadere di un qualsiasi evento */
    gtk_main ();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:25:26.830

将价格作为浮动价格通常是一个非常糟糕的主意。浮点运算是不精确的，在非常奇怪的情况下会回来咬你。使用 a`struct`来表示货币的两个部分，然后用它们实现一些算术和打印。

```
type struct {
  int main;
  int sub;
} money;

void add(money* result, money* x, money* y);

void print(money* x);
void read(money* result, const char* input); 
```

您的 print 函数可以明确指定应使用的分隔符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:09:14.980

看看[setlocale](http://www.cplusplus.com/reference/clibrary/clocale/setlocale/)。

如果您使用使用逗号作为分隔符的语言环境，它将用于输入/输出操作。

那是你要找的吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T13:23:15.373

中的[strpbrk](http://www.cplusplus.com/reference/clibrary/cstring/strpbrk/)函数`<string.h>`可以提供帮助。

```
void dot_to_comma(char *input) {
    char *ptr = NULL;
    while(ptr = strpbrk(input, ".")) { //find the first dot in input
        *ptr = ','; //replace the dot with a comma
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:08:23.053

```
int i;
int len = strlen(string);
for (i = 0; i < len; i++) {
    if (string[i] == '.') {
        string[i] = ',';
        i = len; // or `break;`
    }
} 
```

# android - 片段内的 ViewPager

> ID：11433324
> 
> 赞同：1
> 
> 时间：2012-07-11T13:04:41.777
> 
> 标签：android, android-fragments, android-viewpager

是否可以在另一个片段中拥有 ViewPager（片段之间的哪些页面）？

为了回答我自己的问题，有些人已经找到了一定程度的“hacky”解决方案：[在片段中显示片段查看器](https://stackoverflow.com/questions/7700226/display-fragment-viewpager-within-a-fragment)，并且有半“官方”的答案[是不支持片段中的片段](https://stackoverflow.com/a/6847770/768584)。这两个问题都是大约一年前提出的，所以我希望对 Fragments 中的 Fragment 的支持可能有所进展。是这样吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:21:36.253

因为`ViewPager extends ViewGroup`，所以是的，你可以。

你可以嵌入`Fragments`到`Fragment`

# jquery - 当另一个输入改变时触发输入改变

> ID：11433329
> 
> 赞同：0
> 
> 时间：2012-07-11T13:05:10.980
> 
> 标签：jquery

我有两个输入 A nad B 和输入 ai 已设置`onchange=$("#B").val($(this).val())`

我已经设置`$(B).change(function(){aler('ok');})`但什么也没发生..这应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:07:45.150

两个错别字：

```
$('#B').change(function(){alert('ok');}); 
```

使用[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/)或 Firebug（类型 F12）查看错误。

您可能想在控制台中键入一些测试，例如

```
$('#B') 
```

看看你在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:09:29.187

在不带参数的情况下调用 B 上的 change() 以触发 B 上的事件。

```
$("#A").change(function(){
   $("#B").val($(this).val()).change();   // call change with args to trigger the change   event on B
});

$("#B").change(function() { alert("OK"); }); 
```

**编辑：**您可以更改 $.fn.val 的行为以触发其上的更改事件。但我真的不知道这种变化是否会导致不良行为。

```
<script>
    (function () {
        var originalVal = $.fn.val;
        $.fn.val = function () {
            if (!arguments.length)
                return originalVal.call(this);

            var args = Array.prototype.slice.apply(arguments);

            return this.each(function () {
                var self = $(this);
                originalVal.apply(self, args);
                self.change();
            });
        };
    })();
</script> 
```

# iphone - 如何在iphone中拨打电话？

> ID：11433330
> 
> 赞同：0
> 
> 时间：2012-07-11T13:05:11.123
> 
> 标签：iphone, ios

> **可能重复：**
> [如何以编程方式拨打电话？](https://stackoverflow.com/questions/4582327/how-to-make-a-call-programmatically)

在我的应用程序中，我有一个视图，其中显示了公司的完整地址和电话号码。我想要的是，当用户触摸该电话号码时，它应该拨打电话。那么，当用户触摸该电话号码时，该怎么做。任何答案都将得到应用。感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:12:25.067

```
-(IBAction)callPhone:(id)sender {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:1234567890"]];
} 
```

然后连接`TouchUpInside`到这个，你就可以开始了。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:13:16.920

```
-(void)callPhone:(id)sender{

    NSURL *url = [NSURL URLWithString: @"tel://848444488"];
    NSLog(@"Call %@", url);
    [[UIApplication sharedApplication] openURL:url];

} 
```

如果电话的格式为 848 44 44 88，请使用此代码消除空格：

```
NSString *phoneWithoutSpaces = [[NSString stringWithFormat:@"tel://%@", @"848 44 44 88"] stringByReplacingOccurrencesOfString:@" " withString:@""];

NSURL *url = [NSURL URLWithString:phoneWithoutSpaces]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:13:33.840

做这个

```
NSString *phoneNumber = [NSString StringWithFormat:@"tel:%@", textField.text];

[[UIApplication SharedApplication] openURL:[NSURL URLWithString:phoneNumber]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:10:21.393

如果您将文本放入其中`UITextView`，则有一个设置可以自动检测电话号码。然后操作系统将突出显示电话号码，如果用户点击它，它会提示他们是否想拨打该号码

# forms - PHP邮件到变量

> ID：11433331
> 
> 赞同：0
> 
> 时间：2012-07-11T13:05:16.100
> 
> 标签：forms, phpmailer, php

我已经搜索并搜索了类似的东西，但我认为我做得不对。所以我会问一个问题。这是非常基本的。我的问题如下：

我有一个多页表单，由 4 页 + 1 个预览页组成。在预览页面上，提交后我希望将整个表单数据发送到 2 个不同的邮件地址。一个标准，另一个是用户提交的标准。

所以我有：

```
<?php

$name = $_POST['name'];

  $visitor_email = $_POST['email'];

  $message = $_POST['message'];

?>

<?php

 $email_from = 'mail@company.com';

 $email_subject = "New Form submission";

    $email_body = "You have received a new message from the user $name.\n".
                            "Here is the message:\n $message".

$to = "yourname@yourwebsite.com, $email /n";

 $headers = "From: Company";

  mail($to,$email_subject,$email_body,$headers);

?> 
```

我应该如何插入提交的 $email 变量以使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:11:43.683

去除那个`\n`

```
$to = 'yourname@yourwebsite.com,' . $visitor_email; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:11:30.383

根据[函数文档](http://us3.php.net/manual/en/function.mail.php)，该[参数`mail()`](http://us3.php.net/manual/en/function.mail.php)`$to`将采用逗号分隔的地址列表，正如您所尝试的那样，但最后不应有换行符。此外，您的变量是`$visitor_email`，而不是`$email`。

```
$to = "yourname@yourwebsite.com, $visitor_email"; 
```

您还可以考虑将访问者的电子邮件添加为抄送或密件抄送而不是收件人地址。在这种情况下，将其添加为 CC 或 BCC 标头（由 分隔），但您需要小心确保该地址是电子邮件地址并且不包含可用于[标头注入](http://www.securephpwiki.com/index.php/Email_Injection)`\r\n`的换行符。

```
// The From should be an email address
$headers = "From: company@example.com\r\n";
$headers .= "CC: $visitor_email; 
```

# iphone - 卡在多 UIViewController 模式

> ID：11433333
> 
> 赞同：1
> 
> 时间：2012-07-11T13:05:19.813
> 
> 标签：iphone, ios5, xcode4.3

我有很多`UIViewController。例子

**UIViewController 0 - 第一视图**

我在 .h 文件和 .m 文件中都添加了 #import "MainMenuViewController.h"。我的 XIB 中带有代码的按钮：

```
- (IBAction)nextBtn:(id)sender
{
    MainMenuViewController *mainmenuData = [[MainMenuViewController alloc]initWithNibName:nil bundle:nil];        
    self.mainmenuView = mainmenuData;
    mainmenuView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:mainmenuView animated:YES];
} 
```

**UIViewController 1 - 主菜单**

我在 .h 文件和 .m 文件中都添加了 #import "Process1ViewController.h"。我的 XIB 中带有代码的按钮：

```
- (IBAction)nextBtn:(id)sender
{
    Process1ViewController *process1Data = [[Process1ViewController alloc]initWithNibName:nil bundle:nil];        
    self.process1View = process1Data;
    process1View.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:process1View animated:YES];
} 
```

**UIViewController 2 - 进程1**

我在 .h 文件和 .m 文件中都添加了 #import "Process2ViewController.h"。我的 XIB 中带有代码的按钮：

```
- (IBAction)nextBtn:(id)sender
{
    Process2ViewController *process2Data = [[Process2ViewController alloc]initWithNibName:nil bundle:nil];        
    self.process2View = process2Data;
    process2View.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:process2View animated:YES];
} 
```

**UIViewController 3 - Process2**

我在 .h 文件和 .m 文件中都添加了 #import "ResultViewController.h"。我的 XIB 中带有代码的按钮：

```
- (IBAction)nextBtn:(id)sender
{
    ResultViewController *resultData = [[ResultViewController alloc]initWithNibName:nil bundle:nil];        
    self.resultView = resultData;
    resultView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:resultView animated:YES];
} 
```

**UIViewController 4 - 结果**

我在 .h 文件和 .m 文件中都添加了 #import "MainMenuViewController.h"。我的 XIB 中带有代码的按钮：

```
- (IBAction)nextBtn:(id)sender
{
    MainMenuViewController *mainmenuData = [[MainMenuViewController alloc]initWithNibName:nil bundle:nil];        
    self.mainmenuView = mainmenuData;
    mainmenuView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:mainmenuView animated:YES];
} 
```

在这里，我将这个错误点指向我的 ResultViewController.h ：

```
Unknown type name 'MainMenuViewController'; did you mean 'UIPageViewController'?

 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/FirstViewController.m:9:
 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/FirstViewController.h:10:
 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/../MainMenuViewController.h:10:
 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/../Process1.h:10:
 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/../Process1.h:10:
 - 'UIPageViewController' declared here 
```

其他错误：

```
Unknown type name 'MainMenuViewController'; did you mean 'FirstViewController'?

 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/FirstAppDelegate.m:11:
 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/FirstViewController.h:10:
 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/../MainMenuViewController.h:10:
 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/../Process1ViewController.h:10:
 - In file included from
   /Users/Whatever/Desktop/Project1/Project1/../Process2ViewController.h:10:
 - 'FirstViewController' declared here 
```

看来我为一个 ViewController (MainMenuViewController) 使用了不止一种模式，对吧？我如何解决它。请帮我解决我的问题。

# ruby - Watir-webdriver 在数组中查找值的索引

> ID：11433335
> 
> 赞同：0
> 
> 时间：2012-07-11T13:05:29.873
> 
> 标签：ruby, watir, watir-webdriver

`:text`我正在尝试根据该表头中保存的值来定位某个表头的索引。我已经收集了所有的表头，`.ths`但是我不确定在这个数组上进行搜索以找到内部具有正确值的表头的最佳方法是什么。我尝试使用 array.index 函数，但似乎没有用。如果可能的话，我试图避免遍历整个数组来查找索引。这是我的代码片段。

```
location = @browser.table(:id, "sprintCalTable").tr.ths
index = location.index(data) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:56:18.443

我会从标题中收集所有文本，然后进行索引。

```
headers = @browser.table(:id, "sprintCalTable").tr.ths.collect{ |x| x.text }
index = headers.index(data) 
```

不确定您是否认为这太像循环整个数组。

# javascript - 无法以动态形式发布数据

> ID：11433345
> 
> 赞同：0
> 
> 时间：2012-07-11T13:06:14.280
> 
> 标签：javascript

我创建了一个带有动态字段的表单。但我很困惑我应该如何将数据发布到数据库中。因为根据不同的用户会有不同的字段。这是带有一个动态字段的基本代码

```
function add2(type) {
     var element = document.createElement("textArea");
     var label=prompt("Enter the name for lable","label");
     document.getElementById('raj').innerHTML=document.getElementById('raj').innerHTML+label;
     element.setAttribute("type", type);

     element.setAttribute("name", type);
     var col=prompt('Enter the no of columns');
     element.setAttribute("cols",col);
     var row=prompt('Enter the no of rows');
     element.setAttribute("rows",row);

     var rohit = document.getElementById("raj");
    rohit.appendChild(element);
    document.getElementById('raj').innerHTML=document.getElementById('raj').innerHTML+"<br/>";

} 
```

这是这个函数的调用。

```
<input type="button" value="Text Area" onclick="add2('textarea')"><br/>
</div>

<div id="content" style="height:200px;width:400px;float:left;">
<form action="#" method="post">
<span id="raj">&nbsp</span>
<input type="submit" value="submit"></div> 
```

帮帮我，我应该怎么做才能将动态元素存储到数据库中，我应该将哪些字段放入数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:16:36.040

将分隔的字段值存储在一个隐藏字段中，并从服务端获取它们。

```
<input id="values" type="hidden" value="value1,value2,value3"> 
```

提交时：

```
var Valuearray = values.value.Split(','); 
```

# javascript - 在 sencha touch 2 中更新商店记录值

> ID：11433346
> 
> 赞同：0
> 
> 时间：2012-07-11T13:06:15.600
> 
> 标签：javascript, sencha-touch-2

我有一家商店，里面有 5 条记录。对应的模型有 6 个字段：ordinal、pageNum、top、left、bottom、right。当我尝试更新特定记录的顶部、左侧、底部、右侧的 4 个字段时，假设我想更新第 4 条记录中的字段（顶部、左侧、底部、右侧）并且我将记录设置为肮脏的 ：

```
 markukRecord = markupStore.getAt(3)
 markupRecord.set('top',topVal);
 markupRecord.dirty = true;

 markukRecord = markupStore.getAt(3)
 markupRecord.set('left',leftVal);
 markupRecord.dirty = true;

 markukRecord = markupStore.getAt(3)
 markupRecord.set('bottom',botVal);
 markupRecord.dirty = true;

 markukRecord = markupStore.getAt(3)
 markupRecord.set('right',rightVal);
 markupRecord.dirty = true; 
```

注意：代码不重复，它通过循环运行。这里的问题是，“左”和“右”值更新到第 5 条记录，但没有更新到第 4 条记录（索引 = 3）。

我在这里错过了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:13:32.043

似乎很奇怪，如果你迭代只有一个项目没有被保存......应该是所有项目的相同代码..

您应该检查的一件事：您`markupStore.sync()`在进行这些更改后是否在做？

也许您应该向我们展示完整的代码，例如，`leftVal 或 rightVal 定义在哪里？它们是如何定义的，等等。

# unit-testing - JsTestDriver - 缺少工件错误

> ID：11433352
> 
> 赞同：1
> 
> 时间：2012-07-11T13:06:25.367
> 
> 标签：unit-testing, maven-plugin, maven-3, js-test-driver

我正在尝试将**JsTestDriver**集成到**Maven**以在部署之前测试我的脚本。[实际上，我在此处](http://code.google.com/p/jstd-maven-plugin/wiki/GettingStarted)遵循 Google Code 中描述的步骤。但不幸的是，我无法解决依赖问题。尽管我在 Maven **settings.xml**中添加了存储库和插件存储库，但我仍然收到错误“**缺少工件 com.googlecode.jstd-maven-plugin:jstd-maven-plugin:jar:1.3.2.5** ”。

如果有人可以纠正/指导我，我会很高兴。

提前致谢。

带着敬意。

**设置.xml**

```
// ..................
<repository>
    <id>jstd-maven-plugin google code repo</id>
    <url>http://jstd-maven-plugin.googlecode.com/svn/maven2</url>
</repository>
<pluginRepository>
    <id>jstd-maven-plugin google code repo</id>
    <url>http://jstd-maven-plugin.googlecode.com/svn/maven2</url>
</pluginRepository>
// .................. 
```

**pom.xml**

```
// ..................
<properties>
    <jstd.version>1.3.2.5</jstd.version>
</properties>
<dependency>
    <groupId>com.googlecode.jstd-maven-plugin</groupId>
    <artifactId>jstd-maven-plugin</artifactId>
    <version>${jstd.version}</version>
    <scope>test</scope>
</dependency>
<plugin>
<groupId>com.googlecode.jstd-maven-plugin</groupId>
<artifactId>jstd-maven-plugin</artifactId>
<version>${jstd.version}</version>
<configuration>
    <port>9876</port>
    <reset>true</reset>
    <verbose>true</verbose>
    <server>localhost:9876</server>
    <runnerMode>INFO</runnerMode>
    <config>src/test/resources/jsTestDriver.conf</config>
    <jar>src/test/resources/JsTestDriver-1.3.4.b.jar</jar>
</configuration>
<executions>
    <execution>
        <id>run-tests</id>
        <phase>test</phase>
        <goals>
            <goal>test</goal>
        </goals>
    </execution>
</executions>
</plugin>
// .................. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:56:02.773

尝试将以下内容添加到您的项目 pom.xml 文件中：

```
<repositories>
    <repository>
        <id>jstd-maven-plugin google code repo</id>
        <url>http://jstd-maven-plugin.googlecode.com/svn/maven2</url>
    </repository>
</repositories>

<pluginRepositories>
    <pluginRepository>
        <id>jstd-maven-plugin google code repo</id>
        <url>http://jstd-maven-plugin.googlecode.com/svn/maven2</url>
    </pluginRepository>
</pluginRepositories> 
```

希望这可以帮助。

# java - Java bean 无法从 jsf 文件访问 .. JSF

> ID：11433353
> 
> 赞同：-1
> 
> 时间：2012-07-11T13:06:29.430
> 
> 标签：java, jsf, jstl

我无法在附加“。”时访问班级成员。carDetails是我在**Faces-config**文件中定义的**类的实例**

 **```
<managed-bean-name>carDetails</managed-bean-name>
<h:outputLabel value="#{carDetails.}"></h:outputLabel> 
```

为什么像id，name这样的carDetails类成员在jsf文件中不可见..但同时对于其他一些类成员可见..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:22:20.000

检查您的 getter 和 setter 是否定义正确。有时，如果您重新创建 getter 和 setter 会有所帮助。最好使用 IDE 来生成 getter 和 setter。**

# php - 清空多个会话文件

> ID：11433355
> 
> 赞同：1
> 
> 时间：2012-07-11T13:06:36.453
> 
> 标签：php, session, google-chrome

我的 Chrome + 会话有问题...

通常用户登录系统并创建两个会话文件（为什么2我不知道，这正常吗？）

```
-rw-------  1 x x 8478 Jul 11 22:59 sess_6ddd3db26f98a678ed0a56a058653d56
-rw-------  1 x x    0 Jul 11 22:58 sess_ccab7f6ede0bb7635814adfd5b48332a 
```

然后通过系统使用6ddd，一切都很酷。

但是，当用户使用 Chrome 3 文件时，会创建：

```
-rw-------  1 x x    0 Jul 11 23:00 sess_165378d6d663752ad72e198ad79c7d03
-rw-------  1 x x    0 Jul 11 23:00 sess_58a0e8bd77bfe15d7531675653f36c15
-rw-------  1 x x    0 Jul 11 23:00 sess_bc9ae9c92644d39b29751a157053b7c8 
```

然后使用 bc9 文件-它是空的-它们都是...

现在我的问题是 - 这个应用程序是搞砸了还是这是一个 php 配置问题？有任何想法吗？

**更新**

我找到了乘以会话的代码并将其砍掉。现在我每个会话得到 1 个字段，并且不再为空。

但是，在 Chrome 中打开页面时仍然存在会话字段不同的问题。

第一个文件是来自 Firefox 的会话，第二个是来自 Chrome...

```
-rw-------  1 x x 8363 Jul 11 23:38 sess_6a44293683a90696aa43b0ce64cec790
-rw-------  1 x x 16722 Jul 11 23:39 sess_ce9e4a3e1ed11ee4d8b5171ce1ad4f92 
```

现在，我为什么要询问 PHP 配置……同一个系统在多台服务器上运行，只有一台有问题。在其他人身上 - 一切都完美无缺（即使是那些多个会话文件）。在这一会话中，不存储重要信息并将人员注销。仅在 Chrome 中。

因此我的问题在这里——我想排除可能的 php 配置问题，然后再花一天时间研究这个可怕的代码，后来才知道这是一个设置问题。正如我所说，它可以在 5 台服务器上运行，但在一台服务器上失败。一周前才开始出现故障 - 这是一个由客户自己管理的服务器，所以也许他们对服务器做了一些事情，导致它在 Chrome 和其他浏览器上的工作方式不同。

PS。此外，伙计们，我真的不明白您为什么将答案作为评论。这样，即使我喜欢它，我也无法接受答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T07:17:57.867

以下是遇到类似问题的任何人的解决方案：

系统位于共享托管服务器上。某些配置不正确-我不确定到底出了什么问题，但是将 .htaccess 与

```
RewriteBase /main_app_folder 
```

修复了这个问题。我不知道为什么 RewriteBase 会影响会话，但确实如此。很高兴它已修复:)。

# iphone - NSTextCheckingResult 用于电话号码

> ID：11433364
> 
> 赞同：11
> 
> 时间：2012-07-11T13:07:12.807
> 
> 标签：iphone, objective-c, validation, ios5

有人能告诉我为什么每次都会评估为真吗？！

输入是：`jkhkjhkj`。我在`phone`字段中输入的内容并不重要。每次都是真的...

```
NSRange range = NSMakeRange (0, [phone length]);    
NSTextCheckingResult *match = [NSTextCheckingResult phoneNumberCheckingResultWithRange:range phoneNumber:phone];
if ([match resultType] == NSTextCheckingTypePhoneNumber)
{
    return YES;
}
else 
{
    return NO;
} 
```

这是 的值`match`：

```
(NSTextCheckingResult *) $4 = 0x0ab3ba30 <NSPhoneNumberCheckingResult: 0xab3ba30>{0, 8}{jkhkjhkj} 
```

我正在使用 RegEx，`NSPredicate`但我已经读过自 iOS4 以来建议使用它，`NSTextCheckingResult`但我找不到任何好的教程或示例。

提前致谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-11T13:30:18.637

您使用的课​​程不正确。`NSTextCheckingResult`是由`NSDataDetector`or完成的文本检查的结果`NSRegularExpression`。改用`NSDataDetector`：

```
NSError *error = NULL;
NSDataDetector *detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypePhoneNumber error:&error];

NSRange inputRange = NSMakeRange(0, [phone length]);
NSArray *matches = [detector matchesInString:phone options:0 range:inputRange];

// no match at all
if ([matches count] == 0) {
    return NO;
}

// found match but we need to check if it matched the whole string
NSTextCheckingResult *result = (NSTextCheckingResult *)[matches objectAtIndex:0];

if ([result resultType] == NSTextCheckingTypePhoneNumber && result.range.location == inputRange.location && result.range.length == inputRange.length) {
    // it matched the whole string
    return YES;
}
else {
    // it only matched partial string
    return NO;
} 
```

# sql - 此处不允许使用相对虚拟路径“WebSite3”

> ID：11433366
> 
> 赞同：0
> 
> 时间：2012-07-11T13:07:25.940
> 
> 标签：sql, database, web-config

```
Configuration rootWebConfig = WebConfigurationManager.OpenWebConfiguration("/WebSite3"); 
```

我的项目名称是 WebSite3，但是当我尝试运行代码时，我得到相对虚拟路径“WebSite3”是不允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:17:56.310

尝试：

```
Configuration rootWebConfig = WebConfigurationManager.OpenWebConfiguration("~"); 
```

这应该打开到您的 Web 应用程序的根目录。

这是我用来测试的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    Label1.Text = "";
    System.Configuration.Configuration rootWebConfig = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("~");
    System.Configuration.KeyValueConfigurationCollection appSettings =
             rootWebConfig.AppSettings.Settings;
    foreach (string key in appSettings.AllKeys)
    {
       Label1.Text += "Name: " + key + " Value: " + appSettings[key].Value + "<br />" ;
    }
 } 
```

这导致我的标签上有以下文字（敏感信息涂黑）

![在此处输入图像描述](../Images/c482af741f35c98b61e4ee6c90a821a1.png)

# android - 自定义微调器宽度的问题

> ID：11433368
> 
> 赞同：0
> 
> 时间：2012-07-11T13:07:27.740
> 
> 标签：android, width, spinner

我正在尝试使我的应用程序右侧的编辑文本和微调器对齐并且大小相同，但我似乎无法更改微调器的宽度。我已经弄清楚如何更改微调器中单词中显示的字符数量，但我不知道如何更改实际微调器的大小。有什么建议么？这是我的微调器布局的 xml：

spinner_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/title_text_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:maxLength="15" /> 
```

这就是我在我的活动中调用它的方式：

```
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,R.layout.spinner_layout,actions);
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(dataAdapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:11:06.043

将您的 layout_width 和 layout_height 更改为“wrap_content”。然后它会改变。

代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/title_text_view"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:gravity="center" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:11:29.387

尝试将代码更改为，它可能会对您有所帮助。

```
 ArrayAdapter NoCoreAdapter =  new ArrayAdapter(this,android.R.layout.simple_spinner_item,  month); 
```

# variables - 在派生列转换 SSIS 中使用变量作为表达式

> ID：11433369
> 
> 赞同：0
> 
> 时间：2012-07-11T13:07:37.830
> 
> 标签：variables, ssis, expression, transformation, dataflow

本质上，我是一个带有 Execute SQL 语句的 SSIS pkg，该语句根据某些表值动态编写 REPLACE 函数。(即REPLACE(REPLACE(Col1," *** ","",),"@@@","")

ExecuteSQL 结果被放入变量@Cleanse

在我的派生列转换中，我试图调用 @User::Cleanse 作为表达式来替换 DataFlow 中的 Col1 的值。

结果似乎是提取 @Cleanse 的结果并将其用作字符串值，而不是将其用作 REPLACE 函数。

调试时@Cleanse 值似乎将 \ 放入字符串中，我认为这并不重要，因为它似乎将其应用于其他值而没有问题

结果是，当用完 CSV 时，这就是

Col1 中的“替换（替换（Col1”）

Col2 中的“ ** ”*

) 在 Col3 等中

如何让派生列转换“看到”变量作为函数，而不是字符串值？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:45:33.063

将`EvaluateAsExpression`变量的属性设置为`True`。

但是，使用执行 SQL 任务窗格将变量作为参数绑定到 SQL 查询`Variable Mappings`可能是更好的解决方案

# joomla - 在 Joomla 中编写表单查询

> ID：11433374
> 
> 赞同：0
> 
> 时间：2012-07-11T13:07:44.547
> 
> 标签：joomla, joomla2.5, joomla-template

我是 Joomla 的初学者。我正在使用模板 sitegroundJ16-2。我为大约 9 个文本字段设计了一个表单。我还在数据库中做了一个表。现在我想编写一个查询来连接到数据库以在 dbase 中插入数据并检索数据。

我不知道在哪里写查询。

在我设计该表格的文章中？在目录结构中我可以在哪里找到我的文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T21:12:31.077

连接数据库的代码是：

```
$db = & JFactory::getDBO(); 
```

插入查询的代码如下所示：

```
$query = "INSERT INTO `#__yourtable` (`firstname`, `lastname`) VALUES ('$firstname', '$lastname');";
$db->setQuery($query); 
```

从数据库中检索信息的代码可能是这样的：

```
$query = 'SELECT * FROM #__yourtable ORDER BY id DESC';
$db->setQuery($query); 
```

您将无法将其添加到 Joomla 文章中，您将需要创建一个组件或找到一个免费的组件并按照 GDP 所说的那样进行调整，或者创建一个模块并将其嵌入到文章中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:35:30.017

尽管您的问题非常广泛，但您需要为 joomla 编写一个组件。起点[Hello World](http://help.joomla.org/content/view/773/125/)将是合乎逻辑的起点，但我建议查找并下载类似的扩展并对其进行修改。如果它只是您要创建的表单，我强烈推荐您可以在[JED](http://extensions.joomla.org/extensions/contacts-and-feedback/forms)中找到的免费扩展程序之一。

# java - 如何打破无限循环

> ID：11433383
> 
> 赞同：1
> 
> 时间：2012-07-11T13:08:12.153
> 
> 标签：java, while-loop

这是我的一段代码：

```
// TODO Auto-generated method stub
        try
        {
            Socket clientSocket = new Socket("localhost", 8888);

            ObjectOutputStream ous = new ObjectOutputStream(clientSocket.getOutputStream());

            while(sending)
            {
                Statistics statsData = setStatisticsData();
                ous.writeObject(statsData);

                Thread.sleep(5000);
            }           
        }
        catch(UnknownHostException uhe) 
        {
            uhe.printStackTrace();
        }
        catch(IOException ioe)
        {
            ioe.printStackTrace();
        } 
        catch (InterruptedException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

它是客户端。它将无限循环发送对象统计信息。我将实现一种通过输入来打破这个无限循环的方法（例如，按下键盘上的一个按钮）。我能做什么？我怎样才能打破无限循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:10:31.230

如果这是一个单独的线程：

```
Thread statisticsSendingThread = ... 
```

然后简单地打断它：

```
statisticsSendingThread.interrupt(); 
```

`InterruptedException`将被抛出，从循环中逃脱。

我看到你已经有一个布尔`sending`标志。它也可以工作，但在最坏的情况下会延迟 5 秒。还要确保它是`volatile`- 或者更好的是使用`isInterrupted()`线程方法。但是使用中断线程`interrupt()`是迄今为止最简单的方法（不需要额外的编码）。你的循环可以是真正无限的（~~`while(true)`~~虽然有`while(!isInterrupted())`）。

* * *

顺便说一句，您`setStatisticsData()`可能应该命名为`getStatisticsData()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:11:26.997

您必须在单独的线程上执行它们，并且由于您正在寻找用户输入，因此最好将您的代码移动到某个异步线程，然后只需在输入时将您的`sending`bool 设置为 false 或中断线程`YourThread.interrupt();`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T13:12:09.110

```
while(sending) 
{ 
    Statistics statsData = setStatisticsData(); 
    ous.writeObject(statsData); 
    Thread.sleep(5000);
    if(EXIT_FLAG == true)
       sending = false;
} 
```

EXIT_FLAG 可以是一个可以从外部更新的静态变量。您可能还想在单独的线程中运行这个无限循环。阅读有关如何在线程之间共享数据的更多信息。

# android - 如何解析Android中Web服务返回的字符串？

> ID：11433389
> 
> 赞同：-3
> 
> 时间：2012-07-11T13:08:34.500
> 
> 标签：android

```
<string xmlns="http://tempuri.org/">
  <NewDataSet> 
     <myTable> 
         <USERNAME>admin</USERNAME> 
         <PASSWORD>123</PASSWORD> 
     </myTable> 
     <myTable> 
        <USERNAME>John</USERNAME>
        <PASSWORD>678</PASSWORD> 
     </myTable> 
    </NewDataSet>
  </string> 
```

如何解析从android中的Web服务返回的这个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:18:48.480

```
DocumentBuilder db = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    InputSource is = new InputSource();
    is.setCharacterStream(new StringReader(xmlRecords));

    Document doc = db.parse(is);
    NodeList nodes = doc.getElementsByTagName("employee");

    for (int i = 0; i < nodes.getLength(); i++) {
      Element element = (Element) nodes.item(i);

      NodeList name = element.getElementsByTagName("name");
      Element line = (Element) name.item(0);
      System.out.println("Name: " + getCharacterDataFromElement(line));

      NodeList title = element.getElementsByTagName("title");
      line = (Element) title.item(0);
      System.out.println("Title: " + getCharacterDataFromElement(line));
    }

  }

  public static String getCharacterDataFromElement(Element e) {
    Node child = e.getFirstChild();
    if (child instanceof CharacterData) {
      CharacterData cd = (CharacterData) child;
      return cd.getData();
    }
    return "";
  }
} 
```

# asp.net - 如何导航到实际导航网址？

> ID：11433391
> 
> 赞同：1
> 
> 时间：2012-07-11T13:08:38.360
> 
> 标签：asp.net, radgrid

当我设置时在我的代码中

```
 link.NavigateUrl = Common.grdTextCell(gridDataItem["URL"].Text); 
```

对于 rad 网格中的超链接。

当我单击它时，它会重定向到应用程序 domainName+url 而不仅仅是 URL。

如何分离域并将其重定向到实际的导航 url。

```
http://SomeDomainName/Controls/www.yahoo.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:10:24.997

确保`gridDataItem["URL"]`从`http://`（或`https://`取决于）开始

如果要导航到的 URL 不是以协议（即`http://`或`https://`）开头的，则浏览器将假定该链接是当前域的一部分。

我会有类似以下的东西......

```
string url = gridDataItem["URL"].Text;
if(!url.StartsWith("http://"))
   url = "http://" + url;
link.NavigateUrl = Common.grdTextCell(url); 
```

如果您需要改用上述内容，您显然需要修改上述内容`https://`。

# matlab - 在向量中查找最长的连续整数

> ID：11433402
> 
> 赞同：13
> 
> 时间：2012-07-11T13:09:04.360
> 
> 标签：matlab, vector

我有一个将整数列表作为向量返回的例程。

这些整数来自连续数字组；例如，它可能看起来像这样：

```
vector = 6 7 8 12 13 14 15 26 27 28 29 30 55 56 
```

请注意，上面有四个“运行”数字（6-8、12-15、26-30 和 55-56）。我想做的是将*最长*的“运行”数字转发到一个新向量。在这种情况下，这将是 26-30 的运行，所以我想制作：

```
newVector = 26 27 28 29 30 
```

这个计算必须在各种向量上执行很多次，所以我越高效越好！任何智慧都会被感激地接受。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-11T13:52:48.383

你可以试试这个：

```
v = [ 6 7 8 12 13 14 15 26 27 28 29 30 55 56];

x = [0 cumsum(diff(v)~=1)];

v(x==mode(x)) 
```

这导致

```
ans =

    26    27    28    29    30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:35:33.550

这是让球滚动的解决方案。. .

```
vector = [6 7 8 12 13 14 15 26 27 28 29 30 55 56]
d = [diff(vector) 0]

maxSequence = 0;
maxSequenceIdx = 0;
lastIdx = 1;

while lastIdx~=find(d~=1, 1, 'last')

    idx = find(d~=1, 1);
    if idx-lastIdx > maxSequence
        maxSequence = idx-lastIdx;
        maxSequenceIdx = lastIdx;
    end

    d(idx) = 1;

    lastIdx=idx;
end

output = vector(1+maxSequenceIdx:maxSequenceIdx+maxSequence) 
```

在本例中，diff 命令用于查找连续数字。当数字连续时，差为1。然后使用while循环找到最长的一组，并存储该连续组的索引。但是，我相信这可以进一步优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T13:47:53.287

没有循环 - 应该更快

```
temp = find ( ([(vector(2:end) - vector(1:end-1))==1 0])==0);
[len,ind]=max(temp(2:end)-temp(1:end-1));
vec_out =  vector(temp(ind)+1:temp(ind)+len) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T14:02:54.443

没有使用循环`diff`：

```
vector = [6 7 8 12 13 14 15 26 27 28 29 30 55 56];

seqGroups = [1 find([1 diff(vector)]~=1) numel(vector)+1]; % beginning of group
[~, groupIdx] = max( diff(seqGroups));                     % bigger group index

output = vector( seqGroups(groupIdx):seqGroups(groupIdx+1)-1) 
```

输出向量是

```
ans = 

    26    27    28    29    30 
```

# java - 如何从 try/catch 块中获取变量？

> ID：11433403
> 
> 赞同：7
> 
> 时间：2012-07-11T13:09:06.723
> 
> 标签：java, android

两天来我一直在努力解决这个问题，并且准备扔东西.....

我有一个 JSONArray，我在 try/catch 块中处理它，但它似乎没有在最后传递变量。

我的代码：

```
try{
    //Get the element that holds the results ( JSONArray )
    JSONArray  getresults = json.getJSONArray("results");
    //Loop the Array
    for(int i=0;i < getresults.length();i++){                       
        HashMap<String, String> map = new HashMap<String, String>();
        JSONObject e = getresults.getJSONObject(i);
        totalpass = e.getJSONObject(i).getString("ftotalpass");                         
    }                              

} catch(JSONException e)        {
    Log.e("log_tag", "Error parsing data "+e.toString());                                       
} 
```

我已经尝试过在 try/catch 块之前、之中、之后声明变量的所有方法，但我就是无法让它传递给我的代码的其余部分。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T13:11:12.657

唔...

你可以在外面声明。如

```
JSONArray results = null;

try {
     results = json.getJSONArray("results");
}... 
```

这样您就可以在外部访问它，但一定要使用 if 来查看它是否为空。

如果你不把`JSONArray results = null`编译器可能会抱怨变量没有被初始化。

进一步说明：

发生这种情况是因为**范围**。当你在 try 中声明时，变量的作用域在 try 结束时结束。当您在 if 中声明时，如果该 if 结束，则无法再访问该变量。这对于临时变量非常有用，您仅将它们用于比较或更好的代码可读性、内存重用等（如果这是一个单词，idk）。无论如何，如果您的变量需要在类中的任何地方访问，最好将其声明为字段。

我没有阅读[这个解释](http://maiaco.com/articles/java/scope.php)，但它似乎很好。看一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:10:52.047

在外面声明它可以解决问题：

```
JSONArray getresults = null;
try{
     //Get the element that holds the results ( JSONArray )
     getresults = json.getJSONArray("results");
     //Loop the Array
     for(int i=0;i < getresults.length();i++){                     
         HashMap<String, String> map = new HashMap<String, String>();
         JSONObject e = getresults.getJSONObject(i);
         totalpass = e.getJSONObject(i).getString("ftotalpass");                                
     }                              
} catch(JSONException e)        {
     Log.e("log_tag", "Error parsing data "+e.toString());                                      
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T13:14:46.217

加布里埃尔描述的方式有效，但你可能会遇到`nullPointerException`这种方法。我宁愿这样做：

```
JSONArray results = new JSONArray();

try {
     results = json.getJSONArray("results");
}... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:13:39.400

在块外声明变量并在块内分配它：

```
JSONArray  getresults;

try {

    ...
    getresults = ...; // your assignment;
    ...
}                              
catch(JSONException e) {
    Log.e("log_tag", "Error parsing data" + e.toString());
    getresults = ...; //maybe some other assignment
}

//use variable
if(getresults ...) {
    ...
} 
```

# php - Drupal 7在块中显示当前显示的节点字段

> ID：11433405
> 
> 赞同：2
> 
> 时间：2012-07-11T13:09:07.703
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-views

有人可以指导我吗？

我有五个与我一直隐藏的节点相关联的图像。我想在一个块中展示它们。

如何显示属于当前显示节点的块中的图像？这样当节点发生变化时，它会自动在块上加载该节点的图像？我认为这与添加过滤器有关。 但是当我看到这些列表时，我

似乎无法获得任何 **“当前节点”过滤器。**我还读到我可以将当​​前节点的参数传递给块。但是在drupal 7中，编辑块时没有称为“参数”的字段......

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T13:39:49.253

您可以使用[views](http://drupal.org/project/views)来做到这一点。

1-创建一个新的视图块。

2- 在`Fields`部分下，选择您的图像字段。

3-在`Contextual filters`点击下`Add`然后选择`Content: Nid`

4- 在`When the filter value is NOT available`选择`Provide default value`then下`Content ID from URL`，然后单击`Apply`。

5- 保存您的视图并转到块管理器页面`admin/structure/block`，然后单击`configure`新视图块旁边的。

6- 导航到页面底部`Content types`，然后检查您想要显示此块的内容类型。

希望这会有所帮助……穆罕默德。

# java - JVM 最大堆大小参数在通过 C++ 实例化时不起作用

> ID：11433408
> 
> 赞同：4
> 
> 时间：2012-07-11T13:09:16.190
> 
> 标签：java, c++, jvm, java-native-interface, jvm-arguments

我正在通过 C++ 创建 JVM 实例。我在实例化时传递了几个 VM 参数。但至少有一个最大堆大小的参数没有显示出任何差异。最大堆大小始终显示 65 536kB，无论我为它提供什么参数。

代码如下所示。

```
 jvm=NULL;
env=NULL;
long result;
char *pathname=(char*)malloc(1024);
strcpy(pathname,"-Djava.class.path=");  
strcat(pathname,"/*class path*/");

vm_args.version= 0x00010006;  
    vm_args.ignoreUnrecognized=JNI_TRUE;
options[0].optionString=pathname;
options[1].optionString="-Xms512M";
options[2].optionString="-Xmx1024M";
vm_args.options=options;
vm_args.nOptions=3; 
```

任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:12:04.817

不确定这是否重要，但在我的代码中，我在末尾使用了小写的“m”：

-Xmx1024m

代替

-Xmx1024M

这是您的代码和我们使用的代码之间最明显的区别......

# visual-studio-2010 - Visual Studio 编辑器扩展选项对话框

> ID：11433411
> 
> 赞同：15
> 
> 时间：2012-07-11T13:09:27.537
> 
> 标签：visual-studio-2010, mef, visual-studio-extensions

我有一个简单的 Visual Studio 扩展，它的构建方式与[本演练](http://msdn.microsoft.com/en-us/library/ee818135.aspx)中介绍的方式相似（使用[IWpfTextViewCreationListener](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.editor.iwpftextviewcreationlistener.aspx)接口）。

该扩展程序使用了两种我想配置的颜色。

如何为此扩展定义选项对话框？（例如，出现在“工具/选项”菜单中的属性页面）

我曾尝试使用[DialogPage Class](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.dialogpage%28v=vs.100%29.aspx)来做到这一点，但显然它需要一个 VSPackage 并且我不确定这种方法是否与我正在做的兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T21:39:48.743

我认为您可以在不提供自定义 OptionsPage 的情况下自定义颜色。您可以导出自己的颜色，它们将从`Tools`- `Options`-`Fonts and Colors`

通过您的链接示例：

```
[Export(typeof(EditorFormatDefinition))]
[Name("EditorFormatDefinition/MyCustomFormatDefinition")]
[UserVisible(true)]
internal class CustomFormatDefinition : EditorFormatDefinition
{
  public CustomFormatDefinition( )
  {
    this.BackgroundColor = Colors.LightPink;
    this.ForegroundColor = Colors.DarkBlue;
    this.DisplayName = "My Cusotum Editor Format";
  }
}

[Export(typeof(EditorFormatDefinition))]
[Name("EditorFormatDefinition/MyCustomFormatDefinition2")]
[UserVisible(true)]
internal class CustomFormatDefinition2 : EditorFormatDefinition
{
  public CustomFormatDefinition2( )
  {
    this.BackgroundColor = Colors.DeepPink;
    this.ForegroundColor = Colors.DarkBlue;
    this.DisplayName = "My Cusotum Editor Format 2";
  }
}

[Export(typeof(IWpfTextViewCreationListener))]
[ContentType("text")]
[TextViewRole(PredefinedTextViewRoles.Document)]
internal class TestViewCreationListener : IWpfTextViewCreationListener
{
  [Import]
  internal IEditorFormatMapService FormatMapService = null;

  public void TextViewCreated( IWpfTextView textView )
  {
    IEditorFormatMap formatMap = FormatMapService.GetEditorFormatMap(textView);

    ResourceDictionary selectedText = formatMap.GetProperties("Selected Text");
    ResourceDictionary inactiveSelectedText = formatMap.GetProperties("Inactive Selected Text");

    ResourceDictionary myCustom = formatMap.GetProperties("EditorFormatDefinition/MyCustomFormatDefinition");
    ResourceDictionary myCustom2 = formatMap.GetProperties("EditorFormatDefinition/MyCustomFormatDefinition2");

    formatMap.BeginBatchUpdate();

    selectedText[EditorFormatDefinition.BackgroundBrushId] = myCustom[EditorFormatDefinition.BackgroundBrushId];
    formatMap.SetProperties("Selected Text", selectedText);

    inactiveSelectedText[EditorFormatDefinition.BackgroundBrushId] = myCustom2[EditorFormatDefinition.BackgroundBrushId];
    formatMap.SetProperties("Inactive Selected Text", myCustom2);

    formatMap.EndBatchUpdate();
  }
} 
```

自定义 EFD 可以提供`SolidColorBrush`es。

如果这还不够，您还可以访问 VSPackages 使用的服务提供程序。您可以为选项页面制作一个包，并通过服务提供者使用自定义服务与编辑器扩展进行通信。

您可以像这样导入服务提供者：

```
[Import]
internal SVsServiceProvider serviceProvider = null; 
```

此解决方案也不需要您迁移原始逻辑，只需要创建一个额外的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T11:49:45.993

我知道这很旧，但我认为其中一些链接可能会对您有所帮助（**注意：**我自己实际上并没有这样做）。

我猜您缺少 MSDN 页面中详细说明的属性：

[MSDN - 演练：创建选项页面](http://msdn.microsoft.com/en-us/library/bb166195.aspx)

```
[ProvideOptionPage(typeof(OptionPageGrid),
"My Category", "My Grid Page", 0, 0, true)] 
```

其他一些选项是：

[集成到 Visual Studio 设置中](http://www.viva64.com/en/b/0172/)

[注册自定义选项页面](http://msdn.microsoft.com/en-us/library/bb164654.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-25T21:19:19.230

如果您确实决定制作 VSPackage（因为我相信这是推荐的方法），请参阅[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/bb166195.aspx)和此其他[SO 答案](https://stackoverflow.com/questions/3534804/where-should-a-visual-studio-add-in-store-its-settings/6247183#6247183)。[我还在我的博客 here 上](http://blog.danskingdom.com/adding-a-wpf-settings-page-to-the-tools-options-dialog-window-for-your-visual-studio-extension/)展示了如何使用 C# 和用于选项页面的 WPF 用户控件来执行此操作。

# ruby - 在 Ruby 中匹配多个模式时遇到问题（正则表达式）

> ID：11433420
> 
> 赞同：0
> 
> 时间：2012-07-11T13:10:12.823
> 
> 标签：ruby, regex, pattern-matching

流动的正则表达式有什么区别： `HEAD|GET`, `(HEAD|POST)`& `[HEAD|POST]`？

基本上，我想在 HEAD 或 POST 之后提取数字。

```
irb(main):001:0> "This is HEAD and a POST".match("HEAD|POST")
=> #<MatchData "HEAD">
irb(main):002:0> "This is HEAD and a POST".match("(HEAD|POST)")
=> #<MatchData "HEAD" 1:"HEAD">
irb(main):003:0> "This is HEAD and a POST".match("[HEAD|POST]")
=> #<MatchData "T">
irb(main):004:0> "This is HEAD 1 and a POST 2".match("[HEAD|POST] (.)")
=> #<MatchData "D 1" 1:"1">
irb(main):005:0> 
```

最后一个正则表达式与“POST”之后的“2”不匹配。为什么？另外，为什么要匹配“D 1”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:19:10.337

`HEAD|POST`并`(HEAD|POST)`匹配相同的字符串（HEAD 或 POST）；第二个捕获字符串，而第一个没有。

`[HEAD|POST]`匹配单个字符，任何 ADEHOPST 或 |。所以`"This is HEAD and a POST".match("[HEAD|POST]")`匹配. `T`_`This`

另一方面，`"This is HEAD 1 and a POST 2".match("[HEAD|POST] (.)")`不能匹配前导`T`，因为它后面没有空格 - 相反，它匹配`D`末尾的单个`HEAD`，加上空格和`1`后续，捕获 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:16:14.920

尝试扫描：

```
"This is HEAD 1 and a POST 2".scan /(HEAD|POST)\s(\d)/

=> [["HEAD", "1"], ["POST", "2"]] 
```

# android - 通过 proguard 创建一个用于重新分发的 Android 库，例如 paypal

> ID：11433425
> 
> 赞同：0
> 
> 时间：2012-07-11T13:10:21.490
> 
> 标签：android, encoding

我一直在为需要执行以下操作的项目之一工作。

当前状态：我已经开发了一个 Android 应用程序，我们目前正在向用户分发 apk 文件。但问题是，如果用户想要更改任何设计等，我们必须忍受这种痛苦，相反，我们要确保视图文件对他们可用，但核心逻辑在 jar 文件中。现在，创建 jar 文件不是问题，但我们仍然希望保护源代码。所以，我找到了 ProGuard [http://proguard.sourceforge.net/index.html#manual/introduction.html](http://proguard.sourceforge.net/index.html#manual/introduction.html)

现在，那里的示例显示将生成的 apk 文件将具有混淆代码。但我只希望 jar 文件下的类被混淆。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:44:59.873

您可以限制哪些类应该保留原始，哪些应该被混淆。例如，您可能不想混淆活动或服务，否则 Android 将无法再找到它们 ;-)

参考：http: [//developer.android.com/tools/help/proguard.html#configuring](http://developer.android.com/tools/help/proguard.html#configuring)

您还可以单独使用 proguard 并在应用程序本身中使用之前对您的 jar 文件进行预混淆。

# android - 将数据插入 Android SQLite 数据库

> ID：11433426
> 
> 赞同：0
> 
> 时间：2012-07-11T13:10:25.053
> 
> 标签：android, sqlite

此代码在编译时或运行时未显示任何错误，但值未插入数据库。***请指导我*** ，我是 android 编程领域的新手。此代码在编译时或运行时未显示任何错误，但值未插入数据库。

```
ContentValues values=new ContentValues();
                values.put("username",u_name);
                values.put("password", pass);
                db.insert("login", null, values); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:21:46.890

您没有调用 regs() 函数。称之为

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.reg);
    regs();
} 
```

并将 regs() 函数签名更改为

```
public void regs(View v){ 
```

至

```
public void regs(){ 
```

因为你没有使用`v`变量`View`

# r - 如何一次导入多个 .csv 文件？

> ID：11433432
> 
> 赞同：275
> 
> 时间：2012-07-11T13:10:50.623
> 
> 标签：r, r-faq

假设我们有一个包含多个 data.csv 文件的文件夹，每个文件包含相同数量的变量，但每个来自不同的时间。R中有没有办法同时导入它们，而不必单独导入它们？

我的问题是我有大约 2000 个数据文件要导入，并且必须使用代码单独导入它们：

```
read.delim(file="filename", header=TRUE, sep="\t") 
```

效率不是很高。

* * *

## 回答 #1

> 赞同：338
> 
> 时间：2012-07-11T13:16:28.437

类似下面的内容应该导致每个数据框作为单个列表中的单独元素：

```
temp = list.files(pattern="*.csv")
myfiles = lapply(temp, read.delim) 
```

这假定您将这些 CSV 文件放在单个目录（您当前的工作目录）中，并且所有这些 CSV 文件都具有小写扩展名`.csv`.

然后，如果您想将这些数据框组合成一个数据框，请使用或之类`do.call(rbind,...)`的东西查看其他答案中的解决方案。`dplyr::bind_rows()``data.table::rbindlist()`

如果您确实希望将每个数据框放在一个单独的对象中，即使这通常是不可取的，您也可以使用以下方法执行以下操作`assign`：

```
temp = list.files(pattern="*.csv")
for (i in 1:length(temp)) assign(temp[i], read.csv(temp[i])) 
```

或者，没有`assign`, 并演示 (1) 如何清理文件名和 (2) 显示如何使用`list2env`，您可以尝试以下操作：

```
temp = list.files(pattern="*.csv")
list2env(
  lapply(setNames(temp, make.names(gsub("*.csv$", "", temp))), 
         read.csv), envir = .GlobalEnv) 
```

但同样，最好将它们留在一个列表中。

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2016-12-03T01:09:11.257

一个快速而简洁的解决方案：（是*Base R 的*`tidyverse`两倍多） *`read.csv`*

 *```
tbl <-
    list.files(pattern = "*.csv") %>% 
    map_df(~read_csv(.)) 
```

和*data.table*[`fread()`](https://www.rdocumentation.org/packages/data.table/versions/1.10.4-2/topics/fread)甚至可以将这些加载时间再次减少一半。（对于 1/4 *Base R*倍）

```
library(data.table)

tbl_fread <- 
    list.files(pattern = "*.csv") %>% 
    map_df(~fread(.)) 
```

该*`stringsAsFactors = FALSE`*参数使数据帧因子保持自由，（正如 marbel 指出的那样，是 的默认设置`fread`）

如果类型转换是厚颜无耻的，您可以强制所有列作为带有`col_types`参数的字符。

```
tbl <-
    list.files(pattern = "*.csv") %>% 
    map_df(~read_csv(., col_types = cols(.default = "c"))) 
```

如果您想深入子目录以构建最终绑定的文件列表，请确保包含路径名，并在列表中注册文件及其全名。这将允许绑定工作在当前目录之外进行。（将完整路径名视为像护照一样操作，以允许跨目录“边界”移动。）

```
tbl <-
    list.files(path = "./subdirectory/",
               pattern = "*.csv", 
               full.names = T) %>% 
    map_df(~read_csv(., col_types = cols(.default = "c"))) 
```

正如哈德利在[这里](http://r4ds.had.co.nz/lists.html)描述的（大约一半）：

> `map_df(x, f)`实际上与`do.call("rbind", lapply(x, f))`....相同

**奖励功能**-*在下面的评论中根据 Niks 功能请求将文件名添加到记录：*
* 将原始文件添加`filename`到每条记录。

代码解释：在表的初始读取期间创建一个函数以将文件名附加到每条记录。然后使用该函数而不是简单`read_csv()`函数。

```
read_plus <- function(flnm) {
    read_csv(flnm) %>% 
        mutate(filename = flnm)
}

tbl_with_sources <-
    list.files(pattern = "*.csv", 
               full.names = T) %>% 
    map_df(~read_plus(.)) 
```

（类型转换和子目录处理方法也可以在`read_plus()`函数内部以与上面建议的第二个和第三个变体相同的方式进行处理。）

```
### Benchmark Code & Results 
library(tidyverse)
library(data.table)
library(microbenchmark)

### Base R Approaches
#### Instead of a dataframe, this approach creates a list of lists
#### removed from analysis as this alone doubled analysis time reqd
# lapply_read.delim <- function(path, pattern = "*.csv") {
#     temp = list.files(path, pattern, full.names = TRUE)
#     myfiles = lapply(temp, read.delim)
# }

#### `read.csv()`
do.call_rbind_read.csv <- function(path, pattern = "*.csv") {
    files = list.files(path, pattern, full.names = TRUE)
    do.call(rbind, lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE)))
}

map_df_read.csv <- function(path, pattern = "*.csv") {
    list.files(path, pattern, full.names = TRUE) %>% 
    map_df(~read.csv(., stringsAsFactors = FALSE))
}

### *dplyr()*
#### `read_csv()`
lapply_read_csv_bind_rows <- function(path, pattern = "*.csv") {
    files = list.files(path, pattern, full.names = TRUE)
    lapply(files, read_csv) %>% bind_rows()
}

map_df_read_csv <- function(path, pattern = "*.csv") {
    list.files(path, pattern, full.names = TRUE) %>% 
    map_df(~read_csv(., col_types = cols(.default = "c")))
}

### *data.table* / *purrr* hybrid
map_df_fread <- function(path, pattern = "*.csv") {
    list.files(path, pattern, full.names = TRUE) %>% 
    map_df(~fread(.))
}

### *data.table*
rbindlist_fread <- function(path, pattern = "*.csv") {
    files = list.files(path, pattern, full.names = TRUE)
    rbindlist(lapply(files, function(x) fread(x)))
}

do.call_rbind_fread <- function(path, pattern = "*.csv") {
    files = list.files(path, pattern, full.names = TRUE)
    do.call(rbind, lapply(files, function(x) fread(x, stringsAsFactors = FALSE)))
}

read_results <- function(dir_size){
    microbenchmark(
        # lapply_read.delim = lapply_read.delim(dir_size), # too slow to include in benchmarks
        do.call_rbind_read.csv = do.call_rbind_read.csv(dir_size),
        map_df_read.csv = map_df_read.csv(dir_size),
        lapply_read_csv_bind_rows = lapply_read_csv_bind_rows(dir_size),
        map_df_read_csv = map_df_read_csv(dir_size),
        rbindlist_fread = rbindlist_fread(dir_size),
        do.call_rbind_fread = do.call_rbind_fread(dir_size),
        map_df_fread = map_df_fread(dir_size),
        times = 10L) 
}

read_results_lrg_mid_mid <- read_results('./testFolder/500MB_12.5MB_40files')
print(read_results_lrg_mid_mid, digits = 3)

read_results_sml_mic_mny <- read_results('./testFolder/5MB_5KB_1000files/')
read_results_sml_tny_mod <- read_results('./testFolder/5MB_50KB_100files/')
read_results_sml_sml_few <- read_results('./testFolder/5MB_500KB_10files/')

read_results_med_sml_mny <- read_results('./testFolder/50MB_5OKB_1000files')
read_results_med_sml_mod <- read_results('./testFolder/50MB_5OOKB_100files')
read_results_med_med_few <- read_results('./testFolder/50MB_5MB_10files')

read_results_lrg_sml_mny <- read_results('./testFolder/500MB_500KB_1000files')
read_results_lrg_med_mod <- read_results('./testFolder/500MB_5MB_100files')
read_results_lrg_lrg_few <- read_results('./testFolder/500MB_50MB_10files')

read_results_xlg_lrg_mod <- read_results('./testFolder/5000MB_50MB_100files')

print(read_results_sml_mic_mny, digits = 3)
print(read_results_sml_tny_mod, digits = 3)
print(read_results_sml_sml_few, digits = 3)

print(read_results_med_sml_mny, digits = 3)
print(read_results_med_sml_mod, digits = 3)
print(read_results_med_med_few, digits = 3)

print(read_results_lrg_sml_mny, digits = 3)
print(read_results_lrg_med_mod, digits = 3)
print(read_results_lrg_lrg_few, digits = 3)

print(read_results_xlg_lrg_mod, digits = 3)

# display boxplot of my typical use case results & basic machine max load
par(oma = c(0,0,0,0)) # remove overall margins if present
par(mfcol = c(1,1)) # remove grid if present
par(mar = c(12,5,1,1) + 0.1) # to display just a single boxplot with its complete labels
boxplot(read_results_lrg_mid_mid, las = 2, xlab = "", ylab = "Duration (seconds)", main = "40 files @ 12.5MB (500MB)")
boxplot(read_results_xlg_lrg_mod, las = 2, xlab = "", ylab = "Duration (seconds)", main = "100 files @ 50MB (5GB)")

# generate 3x3 grid boxplots
par(oma = c(12,1,1,1)) # margins for the whole 3 x 3 grid plot
par(mfcol = c(3,3)) # create grid (filling down each column)
par(mar = c(1,4,2,1)) # margins for the individual plots in 3 x 3 grid
boxplot(read_results_sml_mic_mny, las = 2, xlab = "", ylab = "Duration (seconds)", main = "1000 files @ 5KB (5MB)", xaxt = 'n')
boxplot(read_results_sml_tny_mod, las = 2, xlab = "", ylab = "Duration (milliseconds)", main = "100 files @ 50KB (5MB)", xaxt = 'n')
boxplot(read_results_sml_sml_few, las = 2, xlab = "", ylab = "Duration (milliseconds)", main = "10 files @ 500KB (5MB)",)

boxplot(read_results_med_sml_mny, las = 2, xlab = "", ylab = "Duration (microseconds)        ", main = "1000 files @ 50KB (50MB)", xaxt = 'n')
boxplot(read_results_med_sml_mod, las = 2, xlab = "", ylab = "Duration (microseconds)", main = "100 files @ 500KB (50MB)", xaxt = 'n')
boxplot(read_results_med_med_few, las = 2, xlab = "", ylab = "Duration (seconds)", main = "10 files @ 5MB (50MB)")

boxplot(read_results_lrg_sml_mny, las = 2, xlab = "", ylab = "Duration (seconds)", main = "1000 files @ 500KB (500MB)", xaxt = 'n')
boxplot(read_results_lrg_med_mod, las = 2, xlab = "", ylab = "Duration (seconds)", main = "100 files @ 5MB (500MB)", xaxt = 'n')
boxplot(read_results_lrg_lrg_few, las = 2, xlab = "", ylab = "Duration (seconds)", main = "10 files @ 50MB (500MB)") 
```

### 中等用例

[![我的典型用例经过时间的箱线图比较](../Images/619659bd010a9d079deb217738651789.png)](https://i.stack.imgur.com/tFc5V.png)

### 更大的用例

[![超大负载经过时间的箱线图比较](../Images/6256397cb4ebfcabfd0ade2b74570461.png)](https://i.stack.imgur.com/UQx7S.png)

### 各种用例

行：文件数（1000、100、10）
列：最终数据帧大小（5MB、50MB、500MB）
*（点击图片查看原始大小）* [![目录大小变化的箱线图比较](../Images/e3efb42620c89477ddfaa012f8109746.png)](https://i.stack.imgur.com/ztT9o.png)

对于最小的用例，基本 R 结果更好，在这些用例中，使 purrr 和 dplyr 的 C 库承担的开销超过了执行更大规模处理任务时观察到的性能增益。

如果您想运行自己的测试，您可能会发现这个 bash 脚本很有帮助。

```
for ((i=1; i<=$2; i++)); do 
  cp "$1" "${1:0:8}_${i}.csv";
done 
```

`bash what_you_name_this_script.sh "fileName_you_want_copied" 100`将创建 100 个按顺序编号的文件副本（在文件名的前 8 个字符和下划线之后）。

### 归因和赞赏

特别感谢：

*   [Tyler Rinker](https://stackoverflow.com/questions/40640132/importing-multiple-csv-files-with-variable-column-types-into-r)和[Akrun](https://i.stack.imgur.com/tFc5V.png)演示微基准测试。
*   Jake Kaupp 将我介绍到`map_df()` [这里](https://stackoverflow.com/questions/40640132/importing-multiple-csv-files-with-variable-column-types-into-r)。
*   David McLaughlin 就改进可视化和讨论/确认在小文件、小数据框分析结果中观察到的性能倒置提供有用的反馈。
*   marbel 用于指出`fread()`. （我需要继续学习`data.table`。）

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2014-05-09T03:04:03.333

以下是一些使用 R 基础将 .csv 文件转换为一个 data.frame 的选项，以及一些用于在 R 中读取文件的可用包。

这比下面的选项慢。

```
# Get the files names
files = list.files(pattern="*.csv")
# First apply read.csv, then rbind
myfiles = do.call(rbind, lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE))) 
```

**编辑：** - 使用`data.table`和的更多额外选择`readr`

一个`fread()`版本，它是`data.table`包的一个功能。**这是迄今为止 R 中最快的选项**。

```
library(data.table)
DT = do.call(rbind, lapply(files, fread))
# The same using `rbindlist`
DT = rbindlist(lapply(files, fread)) 
```

使用[readr](https://cran.r-project.org/web/packages/readr/README.html)，这是另一个用于读取 csv 文件的包。它比基本 R 慢`fread`，比基本 R 快，但具有不同的功能。

```
library(readr)
library(dplyr)
tbl = lapply(files, read_csv) %>% bind_rows() 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2019-09-27T09:13:15.617

对于许多文件和许多内核，`fread xargs cat`（如下所述）比前 3 个答案中最快的解决方案快约 50 倍。

```
rbindlist lapply read.delim  500s <- 1st place & accepted answer
rbindlist lapply fread       250s <- 2nd & 3rd place answers
rbindlist mclapply fread      10s
fread xargs cat                5s 
```

是时候将 121401 csvs 读入单个 data.table 了。每次是平均三轮然后四舍五入。每个 csv 有 3 列，一个标题行，平均有 4.510 行。Machine 是具有 96 个内核的 GCP VM。

@A5C1D2H2I1M1N2O1R2T1、@leerssej 和 @marbel 的前三个答案基本相同：将 fread（或 read.delim）应用于每个文件，然后 rbind/rbindlist 生成的 data.tables。对于小型数据集，我通常使用`rbindlist(lapply(list.files("*.csv"),fread))`表格。对于中等规模的数据集，我使用并行的 mclapply 而不是 lapply，如果你有很多内核，这会快得多。

这比其他 R 内部替代方案要好，但在速度很重要时对于大量小型 csv 来说并不是最好的。在这种情况下，首先使用`cat`首先将所有 csv 连接成一个 csv 会快得多，就像@Spacedman 的回答一样。我将添加一些有关如何在 R 中执行此操作的详细信息：

```
x = fread(cmd='cat *.csv', header=F) 
```

但是，如果每个 csv 都有一个标题怎么办？

```
x = fread(cmd="awk 'NR==1||FNR!=1' *.csv", header=T) 
```

如果你有太多文件导致`*.csv`shell glob 失败怎么办？

```
x = fread(cmd='find . -name "*.csv" | xargs cat', header=F) 
```

如果所有文件都有标题并且文件太多怎么办？

```
header = fread(cmd='find . -name "*.csv" | head -n1 | xargs head -n1', header=T)
x = fread(cmd='find . -name "*.csv" | xargs tail -q -n+2', header=F)
names(x) = names(header) 
```

如果生成的串联 csv 对于系统内存来说太大了怎么办？（例如，/dev/shm 空间不足错误）

```
system('find . -name "*.csv" | xargs cat > combined.csv')
x = fread('combined.csv', header=F) 
```

带标题？

```
system('find . -name "*.csv" | head -n1 | xargs head -n1 > combined.csv')
system('find . -name "*.csv" | xargs tail -q -n+2 >> combined.csv')
x = fread('combined.csv', header=T) 
```

最后，如果您不希望目录中的所有 .csv 文件，而是一组特定的文件，该怎么办？（此外，它们都有标题。）（这是我的用例。）

```
fread(text=paste0(system("xargs cat|awk 'NR==1||$1!=\"<column one name>\"'",input=paths,intern=T),collapse="\n"),header=T,sep="\t") 
```

这与普通 fread xargs cat 的速度差不多 :)

注意：对于 v1.11.6 之前的 data.table（2018 年 9 月 19 日），省略`cmd=`from `fread(cmd=`。

总而言之，如果您对速度感兴趣，并且拥有许多文件和许多内核，那么 fread xargs cat 比前 3 个答案中最快的解决方案快大约 50 倍。

更新：这是我编写的一个函数，可以轻松应用最快的解决方案。我在几种情况下在生产中使用它，但是在信任它之前，您应该使用自己的数据对其进行彻底测试。

```
fread_many = function(files,header=T,...){
  if(length(files)==0) return()
  if(typeof(files)!='character') return()
  files = files[file.exists(files)]
  if(length(files)==0) return()
  tmp = tempfile(fileext = ".csv")
  # note 1: requires awk, not cat or tail because some files have no final newline
  # note 2: parallel --xargs is 40% slower
  # note 3: reading to var is 15% slower and crashes R if the string is too long
  # note 4: shorter paths -> more paths per awk -> fewer awks -> measurably faster
  #         so best cd to the csv dir and use relative paths
  if(header==T){
    system(paste0('head -n1 ',files[1],' > ',tmp))
    system(paste0("xargs awk 'FNR>1' >> ",tmp),input=files)
  } else {
    system(paste0("xargs awk '1' > ",tmp),input=files)
  }
  DT = fread(file=tmp,header=header,...)
  file.remove(tmp)
  DT
} 
```

更新 2：这是 fread_many 函数的更复杂版本，适用于您希望结果 data.table 包含每个 csv 的输入路径的列的情况。在这种情况下，还必须使用 sep 参数显式指定 csv 分隔符。

```
fread_many = function(files,header=T,keep_inpath=F,sep="auto",...){
  if(length(files)==0) return()
  if(typeof(files)!='character') return()
  files = files[file.exists(files)]
  if(length(files)==0) return()
  tmp = tempfile(fileext = ".csv")
  if(keep_inpath==T){
    stopifnot(sep!="auto")
    if(header==T){
      system(paste0('/usr/bin/echo -ne inpath"',sep,'" > ',tmp))
      system(paste0('head -n1 ',files[1],' >> ',tmp))
      system(paste0("xargs awk -vsep='",sep,"' 'BEGIN{OFS=sep}{if(FNR>1)print FILENAME,$0}' >> ",tmp),input=files)
    } else {
      system(paste0("xargs awk -vsep='",sep,"' 'BEGIN{OFS=sep}{print FILENAME,$0}' > ",tmp),input=files)
    }
  } else {
    if(header==T){
      system(paste0('head -n1 ',files[1],' > ',tmp))
      system(paste0("xargs awk 'FNR>1' >> ",tmp),input=files)
    } else {
      system(paste0("xargs awk '1' > ",tmp),input=files)
    }
  }
  DT = fread(file=tmp,header=header,sep=sep,...)
  file.remove(tmp)
  DT
} 
```

警告：我在阅读它们之前连接 csvs 的所有解决方案都假定它们都具有相同的分隔符。如果不是所有的 csv 都使用相同的分隔符，请改为批量使用 rbindlist lapply fread、rbindlist mclapply fread 或 fread xargs cat，其中批处理中的所有 csv 都使用相同的分隔符。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2012-07-11T13:28:30.777

除了`lapply`在 R 中使用或其他一些循环结构外，您还可以将 CSV 文件合并到一个文件中。

在 Unix 中，如果文件没有标题，那么它很简单：

```
cat *.csv > all.csv 
```

或者如果有标题，你可以找到一个匹配标题的字符串并且只有标题（即假设标题行都以“Age”开头），你会这样做：

```
cat *.csv | grep -v ^Age > all.csv 
```

我认为在 Windows 中，您可以使用DOS 命令框中的`COPY`and `SEARCH`（`FIND`或其他东西）来执行此操作，但为什么不安装`cygwin`并获得 Unix 命令 shell 的强大功能呢？

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2014-02-05T21:44:09.583

这是我开发的用于将所有 csv 文件读入 R 的代码。它将为每个 csv 文件单独创建一个数据框，并为该数据框命名文件的原始名称（删除空格和 .csv）我希望你觉得它有用！

```
path <- "C:/Users/cfees/My Box Files/Fitness/"
files <- list.files(path=path, pattern="*.csv")
for(file in files)
{
perpos <- which(strsplit(file, "")[[1]]==".")
assign(
gsub(" ","",substr(file, 1, perpos-1)), 
read.csv(paste(path,file,sep="")))
} 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-05-09T10:30:09.680

在我看来，大多数其他答案都被 淘汰了`rio::import_list`，这是一个简洁的单行：

```
library(rio)
my_data <- import_list(dir("path_to_directory", pattern = ".csv"), rbind = TRUE) 
```

任何额外的参数都会传递给`rio::import`. `rio`几乎可以处理 R 可以读取的任何文件格式，并且它尽可能使用`data.table`'s `fread`，所以它也应该很快。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-12-16T23:55:51.790

通过在读取 400 个 csv 文件（每个文件大约 30-40 MB）时启用该选项，使用`plyr::ldply`速度大约提高了 50% 。`.parallel`示例包括一个文本进度条。

```
library(plyr)
library(data.table)
library(doSNOW)

csv.list <- list.files(path="t:/data", pattern=".csv$", full.names=TRUE)

cl <- makeCluster(4)
registerDoSNOW(cl)

pb <- txtProgressBar(max=length(csv.list), style=3)
pbu <- function(i) setTxtProgressBar(pb, i)
dt <- setDT(ldply(csv.list, fread, .parallel=TRUE, .paropts=list(.options.snow=list(progress=pbu))))

stopCluster(cl) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2021-02-20T18:27:33.493

使用`purrr`并**包含文件 ID**作为列：

```
library(tidyverse)

p <- "my/directory"
files <- list.files(p, pattern="csv", full.names=TRUE) %>%
    set_names()
merged <- files %>% map_dfr(read_csv, .id="filename") 
```

没有`set_names()`,`.id=`将使用整数指示符，而不是实际的文件名。

如果您只想要没有完整路径的短文件名：

```
merged <- merged %>% mutate(filename=basename(filename)) 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-09-24T10:23:08.733

基于 dnlbrk 的评论，对于大文件，assign 比 list2env 快得多。

```
library(readr)
library(stringr)

List_of_file_paths <- list.files(path ="C:/Users/Anon/Documents/Folder_with_csv_files/", pattern = ".csv", all.files = TRUE, full.names = TRUE) 
```

通过将 full.names 参数设置为 true，您将获得每个文件的完整路径作为文件列表中的单独字符串，例如，List_of_file_paths[1] 将类似于“C:/Users/Anon/Documents/文件夹_with_csv_files/file1.csv"

```
for(f in 1:length(List_of_filepaths)) {
  file_name <- str_sub(string = List_of_filepaths[f], start = 46, end = -5)
  file_df <- read_csv(List_of_filepaths[f])  
  assign( x = file_name, value = file_df, envir = .GlobalEnv)
} 
```

您可以使用 data.table 包的 fread 或 base R read.csv 而不是 read_csv。file_name 步骤允许您整理名称，以便每个数据框不会保留文件的完整路径作为其名称。在将数据表传输到全局环境之前，您可以扩展循环以对数据表执行更多操作，例如：

```
for(f in 1:length(List_of_filepaths)) {
  file_name <- str_sub(string = List_of_filepaths[f], start = 46, end = -5)
  file_df <- read_csv(List_of_filepaths[f])  
  file_df <- file_df[,1:3] #if you only need the first three columns
  assign( x = file_name, value = file_df, envir = .GlobalEnv)
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2020-01-18T02:15:37.137

这是我读取多个文件并将它们组合成 1 个数据框的具体示例：

```
path<- file.path("C:/folder/subfolder")
files <- list.files(path=path, pattern="/*.csv",full.names = T)
library(data.table)
data = do.call(rbind, lapply(files, function(x) read.csv(x, stringsAsFactors = FALSE))) 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-01-08T05:26:11.417

只要您的计算机上有许多内核，以下代码应该可以为您提供最快的大数据速度：

```
if (!require("pacman")) install.packages("pacman")
pacman::p_load(doParallel, data.table, stringr)

# get the file name
dir() %>% str_subset("\\.csv$") -> fn

# use parallel setting
(cl <- detectCores() %>%
  makeCluster()) %>%
  registerDoParallel()

# read and bind all files together
system.time({
  big_df <- foreach(
    i = fn,
    .packages = "data.table"
  ) %dopar%
    {
      fread(i, colClasses = "character")
    } %>%
    rbindlist(fill = TRUE)
})

# end of parallel work
stopImplicitCluster(cl) 
```

更新于 2020/04/16：当我发现一个可用于并行计算的新包时，使用以下代码提供了一个替代解决方案。

```
if (!require("pacman")) install.packages("pacman")
pacman::p_load(future.apply, data.table, stringr)

# get the file name
dir() %>% str_subset("\\.csv$") -> fn

plan(multiprocess)

future_lapply(fn,fread,colClasses = "character") %>% 
  rbindlist(fill = TRUE) -> res

# res is the merged data.table 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-01-05T22:30:57.177

我喜欢使用`list.files()`, `lapply()`and `list2env()`(or `fs::dir_ls()`, `purrr::map()`and `list2env()`) 的方法。这看起来简单而灵活。

或者，您可以尝试使用小包 { [tor](https://maurolepore.github.io/tor/index.html) } ( *to-R* )：默认情况下，它将文件从工作目录导入列表 (`list_*()`变体) 或全局环境 (`load_*()`变体)。

例如，在这里，我使用以下命令将工作目录中的所有 .csv 文件读入列表[`tor::list_csv()`](https://maurolepore.github.io/tor/reference/index.html)：

```
library(tor)

dir()
#>  [1] "_pkgdown.yml"     "cran-comments.md" "csv1.csv"        
#>  [4] "csv2.csv"         "datasets"         "DESCRIPTION"     
#>  [7] "docs"             "inst"             "LICENSE.md"      
#> [10] "man"              "NAMESPACE"        "NEWS.md"         
#> [13] "R"                "README.md"        "README.Rmd"      
#> [16] "tests"            "tmp.R"            "tor.Rproj"

list_csv()
#> $csv1
#>   x
#> 1 1
#> 2 2
#> 
#> $csv2
#>   y
#> 1 a
#> 2 b 
```

现在我将这些文件加载​​到我的全局环境中[`tor::load_csv()`](https://maurolepore.github.io/tor/reference/index.html)：

```
# The working directory contains .csv files
dir()
#>  [1] "_pkgdown.yml"     "cran-comments.md" "CRAN-RELEASE"    
#>  [4] "csv1.csv"         "csv2.csv"         "datasets"        
#>  [7] "DESCRIPTION"      "docs"             "inst"            
#> [10] "LICENSE.md"       "man"              "NAMESPACE"       
#> [13] "NEWS.md"          "R"                "README.md"       
#> [16] "README.Rmd"       "tests"            "tmp.R"           
#> [19] "tor.Rproj"

load_csv()

# Each file is now available as a dataframe in the global environment
csv1
#>   x
#> 1 1
#> 2 2
csv2
#>   y
#> 1 a
#> 2 b 
```

如果您需要读取特定文件，您可以将它们的文件路径与`regexp`,`ignore.case`和`invert`.

* * *

为了更加灵活地使用[`list_any()`](https://maurolepore.github.io/tor/reference/list_any.html). 它允许您通过参数提供阅读器功能`.f`。

```
(path_csv <- tor_example("csv"))
#> [1] "C:/Users/LeporeM/Documents/R/R-3.5.2/library/tor/extdata/csv"
dir(path_csv)
#> [1] "file1.csv" "file2.csv"

list_any(path_csv, read.csv)
#> $file1
#>   x
#> 1 1
#> 2 2
#> 
#> $file2
#>   y
#> 1 a
#> 2 b 
```

通过 ... 或在 lambda 函数内部传递其他参数。

```
path_csv %>% 
  list_any(readr::read_csv, skip = 1)
#> Parsed with column specification:
#> cols(
#>   `1` = col_double()
#> )
#> Parsed with column specification:
#> cols(
#>   a = col_character()
#> )
#> $file1
#> # A tibble: 1 x 1
#>     `1`
#>   <dbl>
#> 1     2
#> 
#> $file2
#> # A tibble: 1 x 1
#>   a    
#>   <chr>
#> 1 b

path_csv %>% 
  list_any(~read.csv(., stringsAsFactors = FALSE)) %>% 
  map(as_tibble)
#> $file1
#> # A tibble: 2 x 1
#>       x
#>   <int>
#> 1     1
#> 2     2
#> 
#> $file2
#> # A tibble: 2 x 1
#>   y    
#>   <chr>
#> 1 a    
#> 2 b 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-04-07T22:33:52.867

有人要求我将此功能添加到 stackoverflow R 包中。鉴于它是一个 tinyverse 包（并且不能依赖于第三方包），这就是我想出的：

```
#' Bulk import data files 
#' 
#' Read in each file at a path and then unnest them. Defaults to csv format.
#' 
#' @param path        a character vector of full path names
#' @param pattern     an optional \link[=regex]{regular expression}. Only file names which match the regular expression will be returned.
#' @param reader      a function that can read data from a file name.
#' @param ...         optional arguments to pass to the reader function (eg \code{stringsAsFactors}).
#' @param reducer     a function to unnest the individual data files. Use I to retain the nested structure. 
#' @param recursive     logical. Should the listing recurse into directories?
#'  
#' @author Neal Fultz
#' @references \url{https://stackoverflow.com/questions/11433432/how-to-import-multiple-csv-files-at-once}
#' 
#' @importFrom utils read.csv
#' @export
read.directory <- function(path='.', pattern=NULL, reader=read.csv, ..., 
                           reducer=function(dfs) do.call(rbind.data.frame, dfs), recursive=FALSE) {
  files <- list.files(path, pattern, full.names = TRUE, recursive = recursive)

  reducer(lapply(files, reader, ...))
} 
```

通过参数化 reader 和 reducer 函数，人们可以选择使用 data.table 或 dplyr，或者只使用适用于较小数据集的基本 R 函数。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-09-16T18:05:45.317

从 readr 2.0.0 开始，您只需提供`file`参数路径列表即可一次读取多个文件。这是一个使用`readr::read_csv()`.

```
packageVersion("readr")
#> [1] '2.0.1'
library(readr)
library(fs)

# create files to read in
write_csv(read_csv("1, 2 \n 3, 4", col_names = c("x", "y")), file = "file1.csv")
write_csv(read_csv("5, 6 \n 7, 8", col_names = c("x", "y")), file = "file2.csv")

# get a list of files
files <- dir_ls(".", glob = "file*csv")
files
#> file1.csv file2.csv

# read them in at once
# record paths in a column called filename
read_csv(files, id = "filename")
#> # A tibble: 4 × 3
#>   filename      x     y
#>   <chr>     <dbl> <dbl>
#> 1 file1.csv     1     2
#> 2 file1.csv     3     4
#> 3 file2.csv     5     6
#> 4 file2.csv     7     8 
```

^(由[reprex 包](https://reprex.tidyverse.org)于 2021-09-16 创建(v2.0.1))*

# sql - 仅具有域帐户的服务代理

> ID：11433435
> 
> 赞同：1
> 
> 时间：2012-07-11T13:10:56.047
> 
> 标签：sql, sql-server, service-broker

我是 MS Sql 服务代理的新手。

我检查了几个教程。但我找不到答案。

我有分布式服务器，但幸运的是它们都在同一个域下。

是否可以在不使用任何证书的情况下完成结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T17:36:56.900

是的。

不要使用对话安全性。确保所有[`BEGIN DIALOG`](http://msdn.microsoft.com/en-us/library/ms187377.aspx)语句都使用`ENCRYPTION = OFF`子句：

```
BEGIN DIALOG @handle
  FROM SERVICE @from_service   
  TO SERVICE @to_service
  ON CONTRACT @contract
  WITH ENCRYPTION = OFF; 
```

授予对每个目的地服务的`SEND`权限：`[public]`

```
GRANT SEND ON SERVICE::<servicename> TO [public]; 
```

`WINDOWS`在s 上使用身份验证`ENDPOINT`：

```
 CREATE ENDPOINT broker 
   STATE = STARTED
   AS TCP (LISTENER_PORT = 4022)
   FOR SERVICE_BROKER (AUTHENTICATION = WINDOWS); 
```

授予`CONNECT`SQL 服务使用的域帐户的 ENDPOINT 权限：

```
GRANT CONNECT ON ENDPOINT::broker TO [domain\sqlserviceaccount]; 
```

（编辑以更正 GRANT SEND 语法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:44:18.800

Remus，你能用加密而不是主密钥加密来做这件事吗？我看到，当我使用时`AUTHENTICATION = WINDOWS`，我也可以做到`ENCRYPTION = SUPPORTED`。阅读 SB，有两种类型的加密（传输和消息）。

这都在同一个内部网络上，但我宁愿不使消息的内容可读。我认为这只是意味着我需要传输安全性——我不知道这是否需要证书或主密钥加密。

谢谢！

# c# - 如何在 C# 中创建一个接受 xml 请求并使用用户定义的 XML 模式返回 xml 响应的 Web 服务？

> ID：11433436
> 
> 赞同：-2
> 
> 时间：2012-07-11T13:10:56.690
> 
> 标签：c#, asp.net, .net, web-services

如何在 C# 中创建一个接受 XML 请求并使用用户定义的 XML 模式返回 XML 响应的 Web 服务？

我想创建一个具有上述要求的简单 HTTP Web 服务。

```
[WebMethod]
public XmlDocument HelloWorld(string xmlRequest)
        {
            StringBuilder sb = new StringBuilder(xmlRequest);

            XmlDocument xmlDocument = new XmlDocument();
            xmlDocument.LoadXml(sb.ToString());
            // do function
            //.....

            return xmlDocument;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:24:36.173

你应该像这样重写它：

```
[WebMethod]
public string HelloWorld(string xmlRequest)
{
    XmlDocument xmlDocument = new XmlDocument();
    xmlDocument.LoadXml(xmlRequest);
    // do function
    //.....
    return xmlDocument.OuterXml;
} 
```

是不必要的`StringBuilder`，虽然可以传递整个`XmlDocument`对象，但我强烈建议不要这样做。您应该做的只是将实际的 XML 文本作为字符串而不是序列化对象传输。

# javascript - gapi.client.load 不工作

> ID：11433442
> 
> 赞同：3
> 
> 时间：2012-07-11T13:11:20.910
> 
> 标签：javascript, google-api, url-shortener, google-api-client, google-url-shortener

我有以下代码，它应该是使用 google api javascript 客户端的简单示例，并且只是显示硬编码缩短 URL 的长格式 URL：

```
<script>
  function appendResults(text) {
    var results = document.getElementById('results');
    results.appendChild(document.createElement('P'));
    results.appendChild(document.createTextNode(text));
  }

  function makeRequest() {

    console.log('Inside makeRequest');

    var request = gapi.client.urlshortener.url.get({
      'shortUrl': 'http://goo.gl/fbsS'
    });

    request.execute(function(response) {
      appendResults(response.longUrl);
    });
  }

  function load() {

    gapi.client.setApiKey('API_KEY');
    console.log('After attempting to set API key');
    gapi.client.load('urlshortener', 'v1', makeRequest);
    console.log('After attempting to load urlshortener');
  }
</script>
<script src="https://apis.google.com/js/client.js?onload=load"></script> 
```

除了使用实际的 API 密钥而不是文本“API_KEY”。

控制台输出很简单：

尝试设置 API 密钥后

尝试加载 urlshortener 后

但我从来没有看到'Inside makeRequest'，它位于makeRequest函数内部，它是调用gapi.client.load的回调函数，让我相信该函数不起作用（或未能完成）。

任何人都可以解释为什么会这样以及如何解决它？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T09:03:56.840

花了几个小时搜索问题后，我发现问题是因为我在本地机器上而不是在服务器上运行这个文件。

当您在 chrome 上运行上述代码时，您会在开发人员控制台中收到此错误**“无法将消息发布到 file://。收件人的来源为空。”**

由于某种原因，javascript 仅在实际服务器或 XAMPP 或 WAMP 之类的东西上运行时才会加载。

如果有任何专家可以解释为什么会发生这种情况，那么学习真的很棒。

希望这可以帮助像我这样的其他菜鸟：D

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T03:23:03.070

简短回答（[http://code.google.com/p/google-api-javascript-client/issues/detail?id=46](http://code.google.com/p/google-api-javascript-client/issues/detail?id=46)）：

```
The JS Client does not currently support making requests from a file:// origin. 
```

长答案（[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)）：

```
The behavior of same-origin checks and related mechanisms is not well-defined
in a number of corner cases, such as for protocols that do not have a clearly 
defined host name or port associated with their URLs (file:, data:, etc.). 

This historically caused a fair number of security problems, such as the 
generally undesirable ability of any locally stored HTML file to access all 
other files on the disk, or communicate with any site on the Internet. 
```

# html - 具有垂直滑动内容的中心 div

> ID：11433457
> 
> 赞同：1
> 
> 时间：2012-07-11T13:11:52.887
> 
> 标签：html, css

我正在制作一些带有垂直滑动内容的页面。这很好用，但是我不能垂直居中我的内容 div。

看我的小提琴：http: [//jsfiddle.net/39kfL/1/](http://jsfiddle.net/39kfL/1/)

我需要将`.content`课程从 TOP 垂直居中到页脚内容的开头。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T16:47:23.033

### 概念

使用*Centering In The Unknown CSS hack*将未知大小的容器垂直居中；将适当的规则应用于`.item`和标记的`.container`元素，以使包含的元素在其父元素中居中。

为了成功实现这一点，您还必须补偿页脚的偏移量，并将下边距设置为`.content`. 此外，丢失`top: 17px`对同一元素的声明，因为它似乎没有任何作用。

### 代码实现

```
.content {
    position: relative;
    margin: 0 auto 150px;
    background-color:#aaa;
}

/* ... */

.item:before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

.content {
  display: inline-block;
  vertical-align: middle;
} 
```

### 演示

*   [在 jsFiddle 上](http://jsfiddle.net/3jjLF/1/)

### 参考

*   [*Chris Coyier*以未知为中心**](http://css-tricks.com/centering-in-the-unknown/)

# java - 使用 java mail api 通过 gmail 发送的邮件会被投递到垃圾邮件中。如何使它们发送到收件箱？

> ID：11433459
> 
> 赞同：2
> 
> 时间：2012-07-11T13:11:55.697
> 
> 标签：java, gmail, jakarta-mail, spam, inbox

我们有一个托管在 Amazon EC2 上的应用程序。它正在连接到 gmail 服务器，以便使用 Java Mail API 将电子邮件发送给注册用户。它使用电子邮件地址 support@domainname.com（不是 gmail.com 电子邮件地址）使用 gmail 服务器发送电子邮件。但是，最近，电子邮件被传递到用户的垃圾邮件文件夹。你能建议我如何解决这个问题并将邮件发送到收件箱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:36:48.460

如果您的电子邮件被发送到“垃圾邮件文件夹”，有几个原因：

1.  您尚未添加 SPF 域记录。SPF 记录用于设置您将从哪些 IP 地址发送电子邮件。每个其他 IP 地址都将被视为垃圾邮件。( [http://www.openspf.org/](http://www.openspf.org/) )
2.  您每小时发送的电子邮件过多 - 如果您每小时发送的电子邮件过多，您可能会被添加到黑名单中。这些黑名单由最流行的电子邮件服务提供商（如 gmail、hotmail 等）检查。
3.  您的 IP 地址被列入黑名单 ( [http://www.mxtoolbox.com/blacklists.aspx/](http://www.mxtoolbox.com/blacklists.aspx/) )

# java - boost::crc_32_type 的 CRC 结果与 java.util.zip.CRC32 不同

> ID：11433461
> 
> 赞同：0
> 
> 时间：2012-07-11T13:12:00.497
> 
> 标签：java, c++

我想使用 boost::crc_32_type 在我的 c++ 代码中生成字符串的 crc 代码，然后使用 (java.util.zip.CRC32) 在 java 中重新生成它，但结果不一样。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T13:31:43.790

所以。结果是平等的。

```
import java.util.*;
import java.lang.*;

class Main
{
        public static void main (String[] args) throws java.lang.Exception
        {
                String s = new String("123456789");
                java.util.zip.CRC32 crc32 = new java.util.zip.CRC32();
                crc32.update(s.getBytes());
                System.out.println(crc32.getValue());
        }
} 
```

> 3421780262

[http://ideone.com/Q1GTB](http://ideone.com/Q1GTB)

```
#include <boost/crc.hpp>
#include <string>
#include <iostream>
#include <algorithm>

int main()
{
   const std::string str = "123456789";
   boost::crc_32_type crc32;
   crc32 = std::for_each(str.begin(), str.end(), crc32);
   std::cout << crc32() << std::endl;
} 
```

> 3421780262

[http://liveworkspace.org/code/0a5c4f1eaa920bd0161f7d37fa809aa3](http://liveworkspace.org/code/0a5c4f1eaa920bd0161f7d37fa809aa3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:16:58.703

您需要在相同的位上使用相同的 CRC 算法，以使结果可靠地相同。您可以用 Java 和 C++ 实现自己的 CRC 算法，也可以用另一种语言实现一个 CRC 库的算法。

编辑：我只想强调你的*位*需要相同。您的 C++ 字符串很可能与您的 Java 字符串具有不同的编码和/或字符大小。

# installation - NetBeans 平台 (RCP) 和带有序列号的“打包为安装程序”

> ID：11433463
> 
> 赞同：0
> 
> 时间：2012-07-11T13:12:05.183
> 
> 标签：installation, rcp, netbeans-platform

这是我第一次将 NetBeans 平台 (RCP) 用于应用程序。我想将应用程序打包为 .exe 安装程序，现在我知道该怎么做了。我不知道，是否可以自定义此 NetBeans RCP 安装程序以提示用户输入序列号？请，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T01:59:14.077

目前（并且我知道）这样做的唯一方法是编辑安装程序的源代码。用于创建应用程序安装程序的代码在所有 NBP 项目之间共享，因此这样做可能不是一个好主意。作为参考，Windows 7 机器上的安装程序代码位于“C:\Program Files (x86)\NetBeans 7.1\harness\nbi”。

您的另一个选择是创建一个“设置”向导，该向导在应用程序第一次运行时运行，然后获取序列号。这也被认为是一种很好的做法，尽管我看到应用程序在安装时要求提供序列号。一般来说，您的安装人员应该只关心安装；激活产品应在设置过程中处理。

**编辑：** NetBeans 平台有一个位于对话框 API 中的内置向导。当然，了解 NetBeans 平台的最佳资源是[http://platform.netbeans.org](http://platform.netbeans.org)站点。如果您使用的是 7.1，那么[这就是您想要的教程](http://platform.netbeans.org/tutorials/nbm-wizard.html)。

# iphone - 需要为我的iOS游戏制作一个DLC“包”系统

> ID：11433470
> 
> 赞同：1
> 
> 时间：2012-07-11T13:12:29.810
> 
> 标签：iphone, ios, web-services, in-app-purchase, nsbundle

我正在为 iOS 开发一款游戏，我需要在玩家使用应用内购买购买“包”后创建一个系统来下载“包”。

我在互联网上搜索了一种方法，例如使用捆绑包或仅使用 Web 服务，但我真的不知道哪种方法最好。

让我具体一点：在一个包中，播放器有 1-3 个精灵、1-2 个音乐文件和 1-3 个背景。

所以我需要做的是下载那个“包”并将其存储为“购买”。哪些方法是最可重用和模块化的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:36:47.157

有几种方法可以解决这个问题。过去，我为以前的客户端创建了一个系统，该系统使用引用“包”中所有文件的清单，然后下载每个资产。如果需要，可以更新清单以指向更新的/不同的资产，并包含一个版本号，以便系统在用户之前下载包之后知道它是否需要更新资产。我可能不会太担心这种一刀切的方法。只需为这个可以在所有 DLC 包上使用的项目启动并运行一些东西。您的下一个项目可能需要大量修改才能使同一系统正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:00:04.437

到目前为止，最简单和最简单的解决方案是将 DLC 通过更新捆绑到您的应用程序中，然后简单地使用应用程序内购买来为用户解锁它们。这节省了他们的时间和带宽，因为他们不再需要下载文件，并且节省了您为托管所有文件而支付的服务器费用。

# c# - 在实体和它的代理类型之间进行转换

> ID：11433476
> 
> 赞同：2
> 
> 时间：2012-07-11T13:12:49.807
> 
> 标签：c#, entity-framework, casting

我在如何使用实体时遇到一些问题，比如 EF 实体和代理类型，它们将绑定到 UI。

假设我有以下课程

```
 // Db Entity
    public class Car
    {
        public virtual int Id { get; set; }
        public string ChassisNumber { get; set; }
        public virtual string Brand { get; set; }
        public virtual string Name { get; set; }
    }

    // Surrogate type that reflects some properties of Car entity
    // This class will be bound to UI
    public class SurrogateCar
    {
        public string Brand { get; set; }
        public string Name { get; set; }
    } 
```

现在我`List<Car>`将从 db 获取并希望创建一个`List<SurrogateCar>`代表我的实体的。我可以通过多种方式轻松做到这一点，其中一种方式如下：

```
 List<Car> cars = CarTable.GetMyCars(); // Just a dummy method, suppose it returns all entities from Db.

      List<SurrogateCar> surrogates = new List<SurrogateCar>();

      foreach (var car in cars)
      {
           surrogates.Add(new SurrogateCar { Brand = car.Brand, Name = car.Name });
      } 
```

或者我可以编写一个自定义转换方法。但我担心的是性能。这个方法会被频繁调用，所以创建一个列表并**一个一个地填充它对**我来说似乎是一个潜在的问题。

你有没有更好的方法来做到这一点，或者像这样使用它可以吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:56:58.127

如果您有一个 Web 服务，并且该服务总是返回 SurrogateCar 类，那么您可以编写实体查询来返回您想要的类，而不是获取您不想要的类：

```
var cars = from c in context.Cars where {your condition}
           select new SurrogateCar
           {
               Brand=c.Brand,
               Name=c.Name
           }; 
```

另一方面，如果您一直需要汽车列表，那么正如 Roger 指出的那样，AutoMapper 很棒！你只要打电话

```
 CreateMap<Car, SurrogateCar> 
```

那么你只需使用 Automapper 来填充你的新列表：

```
 surrogates.AddRange(Map<IEnumberable<Car>, IEnumerable<SurrogateCar>>(cars)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:21:42.923

在你真正测量出这是你的瓶颈之前，不要担心性能！很可能这些不同类型之间的映射并没有那么慢。

那里有一些工具，例如 AutoMapper [http://automapper.org/](http://automapper.org/) 它的主要目的不是性能，而是潜在地使您编写更容易和更少的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:18:05.663

我相信您真正在寻找的是[AutoMapper](http://automapper.org/)，它允许围绕这种情况编写无缝、简单的代码。除非您需要担心，否则我不会太担心性能。

[这是关于使用自动映射器映射列表的 SO](https://stackoverflow.com/questions/5589471/mapping-lists-using-automapper)

# python - Python中具有负指数的多项式

> ID：11433477
> 
> 赞同：5
> 
> 时间：2012-07-11T13:12:56.417
> 
> 标签：python, numpy, polynomial-math

当多项式可以有负指数时，是否有一个库可以处理多项式算术？我在 numpy 中找到了[poly1d](http://docs.scipy.org/doc/numpy/reference/generated/numpy.poly1d.html)类，但我不知道如何表示像`x**-3 + x**-2 + x**2 + x**3`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T13:17:57.543

引用维基百科：

> 在数学中，多项式是由变量（也称为不定数）和常数构成的有限长度表达式，仅使用加法、减法、乘法和**非负整数**指数的运算。

你要问的不是多项式——例如多项式总是有限的，但你想要的在 0 处有一个奇点。从积极的方面来说，有用于符号操作的库。看看[sympy](http://code.google.com/p/sympy/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:25:58.070

您可以使用[指数定律](http://brownmath.com/alge/expolaws.htm)（[存档链接](https://archive.ph/PXekA)）将指数移动到分数的底部并使其为正：

这：

```
print (5**-2)
print (1.0/(5**2)) 
```

产量：

```
0.04
0.04 
```

# iphone - 以相同的方法满足某些条件后如何使计时器无效？

> ID：11433478
> 
> 赞同：1
> 
> 时间：2012-07-11T13:12:58.310
> 
> 标签：iphone, objective-c, ios, xcode, nstimer

嗨，我正在尝试在我的 iPhone 应用程序中显示一个自定义进度条，因为我正在编写一种方法来增加进度条值，一旦它的值变为 100%，那么我需要使我的计时器无效，我需要停止这个递归并显示下一个 viewController。我的代码片段如下所示，

```
-(void)progressNextValue
{
    progressValue += 1.0f;
    if(progressValue >= progress.maxValue){
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"end" message:@"TimeOut!!!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        NSLog(@"Time Out!!!!");
        [mytimer invalidate];
        Second *sec = [[Second alloc] initWithNibName:@"Second" bundle:nil];
        [self.view addSubview:sec.view];    
    }

    progress.currentValue = progressValue;
    mytimer = [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(progressNextValue) userInfo:nil repeats:YES];

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    progress.maxValue = 100.0f;    
    [self progressNextValue];
} 
```

在这里，即使我的`progressValue = progress.maxValue`,`mytimer`没有失效。

提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:15:04.313

此代码导致问题，

```
mytimer = [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(progressNextValue) userInfo:nil repeats:YES]; 
```

每次您使用**repeat创建****计时器**时，这就是问题所在。

 **从任何其他方法调用该`progressNextValue`方法：

```
-(void)tempMethod

    mytimer = [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(progressNextValue) userInfo:nil repeats:YES];
} 
```

或者只是从以下位置调用它：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    progress.maxValue = 100.0f;    
    mytimer = [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(progressNextValue) userInfo:nil repeats:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:20:42.677

无论如何，每次运行该方法时，您都在设置计时器。添加 return 语句，或将计时器实例化放在 else 语句中。

例如：

```
-(void)progressNextValue
{
    progressValue += 1.0f;
    if(progressValue >= progress.maxValue){
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"end" message:@"TimeOut!!!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        NSLog(@"Time Out!!!!");
        [mytimer invalidate];
        Second *sec = [[Second alloc] initWithNibName:@"Second" bundle:nil];
        [self.view addSubview:sec.view];    
    } else {
        // Move this line inside the else statements so that it only gets run if 
        // the progress bar is not full.
        mytimer = [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(progressNextValue) userInfo:nil repeats:YES];
    }

    progress.currentValue = progressValue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:19:27.747

为了使您的计时器无效，您需要调用`[myTimer invalidate]`. 你做什么。但`myTimer`在你的情况下，据我所知没有保留。所以`retain`当你分配它时它和`release`当你使它无效时它。

希望这可以帮助。

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:20:15.763

与其在内部调用计时器`progressNextValue`，不如在`viewDidLoad`（或您想要启动它的其他地方）调用它。保留对您的计时器的引用（因此在页面顶部放置`NSTimer *t`），然后在满足您的条件时执行`[t invalidate]`；

问题是，当您在“progressNextValue”中调用计时器时，您是在告诉它重复，因此使计时器无效并没有多大作用（因为您有多个计时器在运行）。**

# wpf - 在 XAML 中设置 Grid 或 StackPanel 元素之间的距离的最佳方法是什么？

> ID：11433479
> 
> 赞同：2
> 
> 时间：2012-07-11T13:12:58.983
> 
> 标签：wpf, xaml

我有一个 Grid 里面有一些元素：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <TextBlock Text="SomeText" Grid.Column="0" Grid.Row="0" />
    <TextBox Grid.Column="1" Grid.Row="0" />

    <TextBlock Text="SomeText" Grid.Column="0" Grid.Row="1" />
    <TextBox Grid.Column="1" Grid.Row="1" />

    <TextBlock Text="SomeText" Grid.Column="0" Grid.Row="2" />
    <TextBox Grid.Column="1" Grid.Row="2" />
</Grid> 
```

问题是它看起来很紧：

[是）我有的](http://i.stack.imgur.com/wr2BI.png)

边距属性解决了这个问题，但我应该将此属性设置为网格内的每个元素。这是一条艰难的道路。

我只想获得一次类似这样的设置边距属性，但不是每个元素：

[我想得到什么](http://i.stack.imgur.com/gexsV.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:17:53.693

你可以把`Margin`放入一个隐含`Style`的`Grid.Resources`.

例如

```
<Style x:Key="MarginStyle" TargetType="FrameworkElement">
     <Setter Property="Margin" Value="5"/>
</Style>
<Style TargetType="TextBox" BasedOn="{StaticResource MarginStyle}"/>
<Style TargetType="TextBlock" BasedOn="{StaticResource MarginStyle}"/> 
```

* * *

您还可以使用 an`ItemsControl`来应用通用样式。

例如

```
<ItemsControl>
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <!-- Panel without children here -->
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition/>
          <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
      </Grid>
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemContainerStyle>
    <Style TargetType="FrameworkElement">
      <Setter Property="Margin" Value="5"/>
    </Style>
  </ItemsControl.ItemContainerStyle>
  <!-- Children here -->
  <Label Grid.Row="0" Content="Field 1: "/>
  <Label Grid.Row="1" Content="Field 2: "/>
  <TextBox Grid.Column="1" Grid.Row="0"/>
  <TextBox Grid.Column="1" Grid.Row="1"/>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:17:44.743

为什么不制作[样式](http://msdn.microsoft.com/en-us/library/ms745683.aspx)并将其应用于元素？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:28:42.477

您可以将这样的内容添加到网格的资源部分

```
 <Grid.Resources>
        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Margin" Value="0,5" />
        </Style>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Margin" Value="0,5" />
        </Style>
    </Grid.Resources> 
```

或者，您也可以使用填充有 2 个柱网的垂直堆栈面板。

然后只需设置网格样式

# c# - 将复杂的字符串解析为 DateTime

> ID：11433480
> 
> 赞同：3
> 
> 时间：2012-07-11T13:12:59.863
> 
> 标签：c#, datetime, datetime-format

有人可以告诉我应该如何将以下格式转换为正确的`DateTime`对象吗？

```
11:50:46 AM on Wednesday, October 19, 2011 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T13:17:06.020

```
 string s = "11:50:46 AM on Wednesday, October 19, 2011";
        DateTime dateTime = DateTime.ParseExact(s, 
            "hh:mm:ss tt on dddd, MMMM dd, yyyy", CultureInfo.InvariantCulture); 
```

# vb.net - Attribute.Add 使用 vb.net

> ID：11433481
> 
> 赞同：1
> 
> 时间：2012-07-11T13:13:01.667
> 
> 标签：vb.net

我试图在我的表单中向某些文本框添加属性。我正在做的是当用户专注于某些领域时，我想放置 blur 属性。这是下面的代码。当我做错了什么时请告诉我。

`textbox.Attributes.Add("onfocus()", "blur")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:23:33.377

这是一个简单的 WPF 示例。单击该按钮将模糊和取消模糊两个文本框。

我希望这能为您指明正确的方向。

XAML：

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="188" Width="373">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
        <RowDefinition/>
    </Grid.RowDefinitions>

    <TextBox Name="textBoxOne" Grid.Column="0" Grid.Row="0" Margin="10,4" Text="TextBoxBase One"/>
    <TextBox Name="textBoxTwo" Grid.Column="0" Grid.Row="1" Margin="10,4" Text="TextBoxBase Two"/>
    <TextBox Name="textBoxThree" Grid.Column="0" Grid.Row="2" Margin="10,4" Text="TextBoxBase Three"/>
    <TextBox Name="textBoxFour" Grid.Column="0" Grid.Row="3" Margin="10,4" Text="TextBoxBase Four"/>

    <Button Grid.Column="0" Grid.Row="4" Content="Toggle Blur" Click="ToggleBlur_Click"/>
</Grid> 
```

编码：

```
Class MainWindow
    Private _ToggleBlurOnOff As Boolean = False

    Private Sub ToggleBlur_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)
        _ToggleBlurOnOff = Not _ToggleBlurOnOff
        If (_ToggleBlurOnOff) Then
            Dim blur As Effects.BlurEffect = New Effects.BlurEffect()
            blur.Radius = 5
            textBoxOne.Effect = blur
            textBoxThree.Effect = blur
        Else
            textBoxOne.Effect = Nothing
            textBoxThree.Effect = Nothing
        End If
    End Sub
End Class 
```

我相信您专门寻找的代码是：

```
Dim blur As Effects.BlurEffect = New Effects.BlurEffect() 
blur.Radius = 5 
textBoxOne.Effect = blur 
```

# php - PHP/Oracle：时间表示

> ID：11433482
> 
> 赞同：10
> 
> 时间：2012-07-11T13:13:02.813
> 
> 标签：php, oracle, types, time

**免责声明：**我完全清楚表示*日期/时间*的最佳方式是 Unix 时间戳或 PHP 的`DateTime`类和 Oracle 的`DATE`数据类型。

有了这个，我想知道最适合存储**时间**数据的数据类型是什么（在 PHP 和 Oracle 中）。我对存储**日期**组件不感兴趣；只有时间。

例如，假设我有一个`employee`实体，我想为其存储他/她的典型工作时间表。该员工可能在上午 8:00 至下午 5:00 工作。这些时间没有*日期*组件，那么应该使用什么来存储和表示它们呢？

我考虑过的选项：

1.  作为字符串，具有标准格式（可能是 24 小时 HH:MM:SS+Z）。
2.  作为 0 <= n < 24 范围内的数字，小数部分表示分钟/秒（无法存储时区信息？）。
3.  作为具有规范化/未使用日期组件的 PHP`DateTime`和 Oracle `DATE`，例如`0001-01-01`.
4.  与上面相同，仅使用 Unix 时间戳（PHP`integer`和 Oracle `TIMESTAMP`）。

目前我正在使用上面的＃3，但我似乎在滥用这些数据类型，这让我有点恼火。然而，据我所知，它提供了最好的可用性。比较和排序在 PHP 和 Unix 中都按预期工作，可以维护时区数据，并且显示数据实际上不需要任何特殊操作。

我忽略了什么，还是有更合适的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:39:49.380

如果您根本不需要日期，那么您需要的是`interval day`数据类型。我不需要实际使用它，但以下*应该可以*工作：

```
interval day(0) to second(6) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T10:20:40.027

您使用的选项 (3) 是最好的选项。

Oracle 有以下类型用于存储时间和日期：

*   日期
*   时间戳（带有（本地）时区）
*   间隔年月
*   间隔天到秒

区间数据类型不适合您，因为您关心何时开始和何时结束。您可以使用一个日期和一个间隔，但这对我来说似乎不一致，因为您仍然有一个“不正确”的日期。

您提到的所有其他选项都需要您做更多的工作，并且与本机日期类型相比，可能还会导致性能下降。

有关 oracle 日期类型的更多信息：http: [//docs.oracle.com/cd/B19306_01/server.102/b14225/ch4datetime.htm#i1005946](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch4datetime.htm#i1005946)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T10:27:12.990

我认为这个问题的最正确答案完全取决于您打算如何处理数据。如果您打算在 PHP 中完成所有工作而在数据库中没有任何内容，那么存储数据的最佳方式将是您以最容易获取数据的格式来帮助您在 PHP 中所做的事情。那可能确实将它们存储为字符串。这对 DBA 来说可能听起来很可怕，但您必须记住，数据库是为您的应用程序服务的。另一方面，如果您在数据库中对一些花哨的查询进行大量比较，请确保以使您的查询最有效的格式存储数据库中的所有内容。

如果您正在执行诸如计算工作小时数的繁重任务，那么在最终转换回小时：分钟之前，转换为十进制格式可能会使计算变得更容易。当您从数据库中获取数据时，可以编写一个简单的函数来来回转换十进制，将其转换为十进制，进行所有计算，然后运行它以转换回时间格式。

在计算日期时使用 unix 时间戳很方便，但在计算时间时可能不太方便。虽然使用它似乎有一些好处，例如很容易将时间戳添加到时间戳，但我发现必须将所有内容转换为时间戳才能进行计算是令人讨厌和烦人的，所以我会避开这种情况。

所以，总结一下：

1.  如果您想轻松存储而不是操作数据，字符串可能是一种有效的方法。它们易于阅读和验证。对于其他任何事情，请选择其他内容。
2.  以数字计算使计算变得超级简单。将时间/日期转换为小数，完成所有重击，然后恢复为实时格式并存储。
3.  PHP 的 Datetime 和 Oracle 的 Date 都很方便，并且在 oracle 和 PHP 中内置了一些很棒的函数来操作数据，但即使是最好的函数也可能比添加一些小数更难。我认为以日期格式将数据存储在数据库中可能是一个安全的想法 - 特别是如果您想根据查询中的列进行计算。您计划在 PHP 中使用它们的方式将决定您如何使用它们。
4.  我会立即排除选项四。

编辑：我刚刚和一个朋友就时间类型进行了一次有趣的聊天。您应该注意的另一件事是，有时基于时间的对象可能会导致比它们解决的问题更多的问题。他正在研究一个我们跟踪交货日期和时间的应用程序。数据实际上存储在 datetime 对象中，但要注意的是：卡车交货时间是针对特定日期和交货窗口设置的。可接受的交货是准时交货，或在交货时间后一小时内交货。当一辆卡车在晚上 11:30 到达并在 45 分钟后出现时，这造成了一些破坏。虽然仍在可接受的窗口内，但它显示为第二天。另一个问题是在一个配送中心，它实际上在 4:00 AM 开始每天 24 小时工作。

# linux - nginx 上的 Scalatra：如何设置？

> ID：11433487
> 
> 赞同：0
> 
> 时间：2012-07-11T13:13:19.243
> 
> 标签：linux, mongodb, nginx, jetty, scalatra

想设置**Scalatra**在运行**nginx**的机器上运行。

已经正确设置了 nginx，并且能够提供静态 html 页面，但是，我现在希望将它指向一个 Scalatra 应用程序。所有可用的文档似乎都假设使用的服务器是 Jetty：例如 - [http://blog.everythings-beta.com/?p=430](http://blog.everythings-beta.com/?p=430)

我假设我不能简单地将它指向文件夹，因为除此之外，码头配置还需要一个类名和一个 servlet 映射。

如何**配置 nginx**以指向**Scalatra 应用程序**？

谢谢！

* * *

### 附加信息：

Ubuntu 12.04 是我的操作系统 - 所以答案可能是特定于此的，或者任何通常适用于**Linux**的东西。

* * *

### 奖金：

也可以加入**MongoDB——**即如何使用 Scalatra 和 MongoDB 设置 nginx——作为加分的答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:16:59.417

使用 nginx 进行设置很容易查看[部署](http://wiki.nginx.org/JavaServers)java 服务器的文档。

启动并运行后，安装[casbah](http://api.mongodb.org/scala/casbah/current/setting_up.html)即可启动并运行。

# eclipse - WINDOWS 中 Eclipse 中的 Nutch 和 Solr

> ID：11433495
> 
> 赞同：0
> 
> 时间：2012-07-11T13:14:04.397
> 
> 标签：eclipse, solr, nutch

我想使用集成在eclipse中的nutch和solr，我的操作系统是windows。我想在 Maven 中使用二进制文件和依赖项，然后在 Eclipse 中开发代码。有没有*明确*的教程可以做到这一点？

我试过 RunNutchInEclipse 指南，但它太讨厌了！欢迎任何有用的链接或建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:14:06.643

您必须遵循 RunNutchInEclipse 指南。据我所知，没有其他指南。即使我最初尝试在 Windows 上运行，但后来我放弃了并开始在 Ubuntu/Mac 上使用。即使您遵循指南，您也会看到许多问题。windows上的hadoop有一些问题。Nutch 1.3+ 附带的 hadoop 版本不能在 Windows 上运行。所以我们需要将hadoop版本更改为一些旧版本。或者我们应该使用 Nutch 1.2。我记得在youtube上看过一个教程。看看是否有帮助。但这就是说在 Unix 风格上使用 Nutch 绝对更容易。

# sql - 通过比较子集选择记录

> ID：11433498
> 
> 赞同：4
> 
> 时间：2012-07-11T13:14:13.200
> 
> 标签：sql, sql-server-2005

给定两个表（每个表中的行不同）：

```
 1)  x | y     z   2)  x | y     z
    -------   ---     -------   ---
     1 | a     a       1 | a     a
     1 | b     b       1 | b     b
     2 | a             1 | c
     2 | b             2 | a
     2 | c             2 | b
                       2 | c 
```

有没有办法选择第一个表的列中的值，该列`x`中的值子集与第二个表的列中的值完全匹配？`y``x``z`

万一`1)`，预期的结果是`1`。如果`c`添加到第二个表中，则预期结果为`2`。
在这种情况下`2)`，预期结果是`no record`因为第一个表中的子集都不匹配第二个表中的子集。如果`c`添加到第二个表中，则预期结果为`1, 2`。

我尝试使用`except`并将`intersect`第一个表的子集与第二个表进行比较，效果很好，但是这部分花费的时间太长`intersect`，我不知道为什么（第一个表有大约 10.000 条记录，第二个有大约10）。

编辑：我已经更新了问题以提供额外的场景。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T13:21:15.313

```
SELECT
  table1.x
FROM
  table1
INNER JOIN
  table2
    ON table1.y = table2.z
GROUP BY
  table1.x
HAVING
      COUNT(*) = (SELECT COUNT(*) FROM table2 AS lookup)
  AND COUNT(*) = (SELECT COUNT(*) FROM table1 AS lookup WHERE x = table1.x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:19:39.433

其中之一会做

```
select
    t1.x
from 
    table1 as t1 inner join table2 as t2 on t1.x=t2.x
group by t1.x
having count(distinct t1.x)=count(distinct t2.x)

select
    t1.x
from 
    table1 as t1 inner join table2 as t2 on t1.x=t2.x
group by t1.x
having count(distinct t1.x)=(select count(distinct x) from table2) 
```

# xampp - 安装和重新安装 XAMPP

> ID：11433500
> 
> 赞同：0
> 
> 时间：2012-07-11T13:14:17.467
> 
> 标签：xampp

我最近在我的计算机上安装了 XAMPP，它工作正常，但我的朋友不小心删除了 XAMPP 文件夹。所以当我重新安装它时它不起作用，Apache 和 MySql 的端口显示它们很忙。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:17:42.487

如果您正在运行 Skype，那么您可以轻松更改其端口。`Go to Tools -> Advanced -> Connections`并取消选中`Use Port 80`and`443`选项并关闭 Skype。现在再次尝试启动 Apache。你应该能够做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T10:26:28.727

开始运行`mysqld.exe`文件，该文件将`bin`在您的 MySQL 安装文件夹中看到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T06:59:36.627

看看“[如何获取开放端口](http://www.petri.co.il/quickly_find_local_open_ports.htm)”，它解释了如何查看哪些端口是打开的以及哪些程序打开了它们。

# c# - 在服务器上运行的区别

> ID：11433507
> 
> 赞同：1
> 
> 时间：2012-07-11T13:14:53.323
> 
> 标签：c#, asp.net

我有一个从服务器获取文件并下载的程序。它本身位于服务器上，因此要运行它，请打开浏览器并输入带有参数的 URL。

现在，当程序位于我的机器上时，它运行得非常好。但是，当通过浏览器访问时，它似乎挂起。我试过 MessageBox.Show(username, "Error", MessageBoxButtons.OK, MessageBoxIcon.Exclamation, MessageBoxDefaultButton.Button1, MessageBoxOptions.ServiceNotification);

```
string[] lines = {"First line", "Second line", "Third line"};
        System.IO.File.WriteAllLines(@"C:\Users\Public\TestFolder\WriteLines.txt", lines); 
```

当在服务器上完成时，这两个都会导致错误（但在我自己的机器上很好）。

```
using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\Users\Public\TestFolder\WriteLines2.txt"))
file.WriteLine("asfsd"); 
```

这似乎挂在写入行上，因为文件已创建但没有任何内容放入文件中。知道为什么会发生这种情况，或者我可以提出一些建议，以便我知道问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:17:32.943

如果我不得不猜测。我说你没有权限。尝试将所有内容包装在 Impersonate 语句中或授予工作进程访问目录的权限。

```
using (new Impersonator(username, domain,password)) {
      using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\Users\Public\TestFolder\WriteLines2.txt"))
      file.WriteLine("asfsd");
      }
 } 
```

另外，在写入之前确保目录存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:18:29.517

听起来您将 WinForms 开发与 ASP.NET 开发混合在一起，它们是两种截然不同的动物。

如果您在写入文件时遇到问题，则很可能是由权限问题引起的。IIS 默认应用程序池通常以 NETWORK SERVICE 用户身份运行，该用户很可能在您的目标目录中没有权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T13:18:36.107

您正在尝试写入本地文件，而服务器上的 IIS 显然没有这样做的权限（真是令人惊讶 :-)）。将文件保存在您的 webapp 文件夹中，而不是 C:\

# java - 下拉框 - 从 Spring MVC 模型/上下文到使用 freemarker 形成

> ID：11433510
> 
> 赞同：5
> 
> 时间：2012-07-11T13:15:00.850
> 
> 标签：java, spring, spring-mvc, freemarker

这应该是非常基本的，但我在网上找不到任何关于它的东西，只是我似乎无法组合在一起的零碎..

我们将 Spring MVC 与 freemarker 一起使用。现在我想向我的页面添加一个表单，该表单允许我从预定义列表中选择一个值（需要在后端访问数据库）。

**我的控制器：**

```
@RequestMapping(value = "/{id}", method = RequestMethod.GET)
public ModelAndView get(@PathVariable Integer id) {

    // stuff..
    ModelAndView mav = new ModelAndView();

    mav.addObject("targetObject", new TargetObject());
    mav.addObject("options", Arrays.asList("a", "b", "c"));
    mav.setViewName("someview");

    return mav;
} 
```

我找到了 freemarkers spring 支持`spring.ftl`，看来我应该使用`<@spring.formSingleSelect>`我尝试过的方法：

**someView.ftl：**

```
<#import "../spring.ftl" as spring />

<form action="somePath" method="POST">
    <@spring.formSingleSelect "targetObject.type", "options", " " />
    <input type="submit" value="submit"/>
</form> 
```

所以 targetObject.type 似乎是由宏自动绑定的。

但是如何将我的选项放入 freemarker 序列中，以便宏可以创建选项？

现在我得到：

```
Expected collection or sequence. options evaluated instead to freemarker.template.SimpleScalar on line 227, column 20 in spring.ftl.
The problematic instruction:
----------
==> list options as value [on line 227, column 13 in spring.ftl]
 in user-directive spring.formSingleSelect [on line 53, column 9 in productBase/show.ftl]
---------- 
```

我也试过：

```
<@spring.bind "${options}" /> 
```

以及更多类似的事情，但没有成功：

```
freemarker.core.NonStringException: Error on line 48, column 18 in someView.ftl
Expecting a string, date or number here, Expression options is instead a freemarker.template.SimpleSequence 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T14:42:04.947

经过多次改写和重新思考，我终于找到了解决方案：

**第一的**

显然我需要一颗豆子来决定我的选择

**第二**

这些选项需要初始化为一个字符串列表，并由 Spring MVC 提供给页面：

```
public ModelAndView get() {

    // ...
    ModelAndView mav = new ModelAndView();
    List<String> options = Arrays.asList(getOptionsFromDatabaseAndConvertToStringList());
    mav.addObject("options",options );
    mav.setViewName("someview");

    return mav;
} 
```

**第三**

`options`现在需要在 freemarker 模板中绑定，然后可以像任何其他 freemarker 变量一样访问（即**没有**引号）：

```
<@spring.bind "options" />

<form action="whatever" method="POST">
    <@spring.formSingleSelect "targetBean.choice", options, " " />
    <input type="submit" value="submit"/>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T12:15:00.780

根据 formSingleSelect 的文档：

```
@param options a map (value=label) of all the available options 
```

我认为您最好的选择是提供一个地图，其中的值作为键，标签作为地图值。否则，freemarker 可能会尝试为您进行包装，而您的控制权较少。

我刚刚验证过：如果您提供自己的地图，一切都很好。

```
<spring.formSingleSelect "target.property" referenceToYourMapProvidedInController ""/> 
```

# c# - 通过 PHP 与 .net 通信

> ID：11433513
> 
> 赞同：1
> 
> 时间：2012-07-11T13:15:12.270
> 
> 标签：c#, php, .net, mysql, sockets

我有一个 .net winform 应用程序，我想允许用户通过 PHP 连接。

我使用 PHP 是出于个人选择并帮助降低成本。

**快速概览：**

人们可以连接到我的 .net 应用程序并启动一个新线程，即使在他们关闭浏览器后仍将继续运行。然后，他们可以随时登录以查看他们的线程正在执行的状态。

目前我想出了两种方法来做到这一点：

**想法 1 - 插座：**

当用户第一次连接并产生一个线程时，GUID 与他们的“网络”登录详细信息相关联。

下次 PHP 通过套接字连接到应用程序时，PHP 会发送一个带有 GUID 的“GET.UPDATE”命令，然后将其添加到给定 GUID 的 MESSAGE IN QUEUE 中。

.net 应用程序生成的线程正在检查 MESSAGE IN QUEUE，当它看到“GET.UPDATE”命令时，它会将数据编码为 json 并将其添加到 MESSAGE OUT QUEUE

下次有来自该 GUID 的 PHP 套接字请求时，它会在 MESSAGE OUT QUEUE 中发送数据。

**想法 2 - 数据库：**

与上面相同的想法，但来自 PHP 的命令被放入数据库

.net 应用程序线程检查数据库中的新 IN MESSAGES

如果它得到一个 GET.UPDATE 命令，它会将 json 编码的数据添加到数据库中

下次 PHP 连接时，它将检查数据库中的新消息并相应地报告数据。

我只是想知道上述两个想法中的哪一个最好。乱搞插座很快就会变成一种痛苦。但是我担心数据库的想法，如果我有 1000 个用户，我们将有一个数据库表，如果队列中有很多消息，它可能会开始变慢

任何建议都会被采纳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:00:02.103

任何一种解决方案都是可以接受的，但如果您正在考虑高用户负载，您可能需要重新考虑您的方法。如果您正在查看数以千计的请求，WinForms 解决方案不会像 WCF 解决方案那样强大。我不建议仅将数据库用于消息传递，除非您的流程结果已经存储在数据库中。如果是，我不建议直接公开数据库，而是通过公开的 API 控制数据库访问。数据库具有高可用性/可扩展性，因此除非您正在查看 SQLite 之类的低端数据库，否则我不会过多担心负载。

如果您正在考虑公开公开数据库并出于任何原因将其用作消息传递服务，我可能会建议[Postgresql 的 LISTEN/NOTIFY](http://codingzombies.com/coding/how-to-listen-to-postgresql-events-using-net/)。Npgsql 对此有很好的支持，而且很容易实现。Postgresql 也可以免费获得一个大型社区的支持。

# java - SCJP 程序给出输出 8 2 怎么样？

> ID：11433516
> 
> 赞同：1
> 
> 时间：2012-07-11T13:15:17.237
> 
> 标签：java, scjp, post-increment, pre-increment

```
class Foozit {
    public static void main(String[] args) {
        Integer x = 0;
        Integer y = 0;
        for (Short z = 0; z < 5; z++) {
            if ((++x > 2) || ++y > 2)
                x++;
        }
        System.out.println(x + "Hello World!" + y);
    }
} 
```

我尝试了这段 scjp 代码，我得到了输出 5 3 谁能告诉我哪里出错了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T13:31:22.050

循环执行 5 次（z 从 0 到 4）

在 if 条件中，++x 被计算五次。但是 ++y 仅在条件的第一部分为假时才被评估。

即，这种情况：

```
if ((++x > 2) || ++y > 2) 
```

变成：

```
//1st iteration 
if( 1 > 2 || 1 > 2 ) //False, x++ is not evaluated

//2nd iteration
if( 2 > 2 || 2 > 2 ) //False, x++ is not evaluated

//3rd iteration 
if( 3 > 2 || 2 > 2 ) //True, the second ++y is skipped, but x++ is evaluated, x becomes 4

//4th iteration 
if( 5 > 2 || 2 > 2 ) //True, the second ++y is skipped, but x++ is evaluated, x becomes 6

//5th iteration
if( 7 > 2 || 2 > 2 ) //True, the second ++y is skipped, but x++ is evaluated, x becomes 8 
```

所以最后，我们有：

```
x = 8 and y = 2 
```

请记住：++x 是预增量（考虑更改和使用），而 x++ 是后增量（考虑使用和更改）

# ios - UIScrollView 和 targetContentOffset 不能正常工作

> ID：11433522
> 
> 赞同：5
> 
> 时间：2012-07-11T13:15:50.990
> 
> 标签：ios, cocoa, animation, uiscrollview, scroll

我希望 UIScrollView 始终滚动回特定点。我通过写作实现了它：

```
 - (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset 
{
    (*targetContentOffset).x = 0.0f;
} 
```

它工作得很好，有一个例外。当我滚动足够远并到达视图的末尾（然后开始弹跳）并向上拉我的手指时，视图只是平滑地滚动并稍微向后减速，停止然后跳转（没有动画）我设置它的位置。只要我不滚动到滚动视图的末尾，它就不会发生。

这是我如何初始化 UIScrollView

```
 scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 284, frame.size.height)];
  scrollView.backgroundColor = [UIColor clearColor];
  scrollView.delegate = self;

  [scrollView setContentSize:CGSizeMake(285,frame.size.height)];
  [self addSubview:scrollView];

  UIEdgeInsets inset = scrollView.contentInset;
  inset.left = 60;
  inset.right = 60;
  [scrollView setContentInset:inset]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:53:08.680

当您到达滚动视图内容的边界时，弹跳效果是默认行为，您可以通过将**反弹**属性设置为**NO**来关闭它：

```
yourscrollView.bounces = NO; 
```

我相信这只是您在这里面临的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T13:21:01.167

6 年后，反弹动画和 targetContentOffsetForProposedContentOffset 方法之间仍然存在这种冲突......

# c# - 如何使用 DotnetOpenAuth 检索配置文件 ID

> ID：11433524
> 
> 赞同：3
> 
> 时间：2012-07-11T13:16:00.720
> 
> 标签：c#, asp.net, dotnetopenauth

如何使用 DotnetOpenAuth 检索配置文件 ID 以从 google Analytics API 获取数据。

我得到了 oAuth 令牌但是当尝试使用这个令牌检索数据时，我得到了异常——执行失败错误。

```
The request 'Google.Apis.Requests.Request(list @ https://www.googleapis.com/tasks/v1/users/@me/lists?alt=json&prettyPrint=true)' has failed. The service tasks has thrown an exception: Google.GoogleApiRequestException: The remote server returned an error: (401) Unauthorized. ---> System.Net.WebException: The remote server returned an error: (401) Unauthorized.
  at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
  at Google.Apis.Requests.Request.InternalEndExecuteRequest(IAsyncResult asyncResult) in c:\google\6-21-2012\default\Src\GoogleApis\Apis\Requests\Request.cs:line 327
  --- End of inner exception stack trace ---
  at Google.Apis.Requests.Request.AsyncRequestResult.GetResponse() in c:\google\6-21-2012\default\Src\GoogleApis\Apis\Requests\Request.cs:line 301
  at Google.Apis.Requests.ServiceRequest`1.GetResponse() in c:\google\6-21-2012\default\Src\GoogleApis\Apis\Requests\ServiceRequest.cs:line 183
  at Google.Apis.Requests.ServiceRequest`1.Fetch() in c:\google\6-21-2012\default\Src\GoogleApis\Apis\Requests\ServiceRequest.cs:line 203
  at GoogleAnalyticsNew._Default.FetchTaskslists() in E:\Anagha\GA\GoogleAnalyticsNew\GoogleAnalyticsNew\Default.aspx.cs:line 186 
```

任何人都可以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:25:19.867

您应该使用您的 API 密钥询问信息，如下所示：

```
GET https://www.googleapis.com/tasks/v1/users/@me/lists/test?key={YOUR_API_KEY} 
```

您可以在[此处](https://developers.google.com/apis-explorer/#p/tasks/v1/tasks.tasklists.get)使用 Tasks API 。

如果您不知道自己的 API 密钥，可以在[API Console](https://code.google.com/apis/console/b/0/)中找到它。

# https - 什么是让 https 客户端在 erlang webmachine 服务器应用程序中运行的好方法？

> ID：11433527
> 
> 赞同：1
> 
> 时间：2012-07-11T13:16:08.203
> 
> 标签：https, erlang, httpclient, webmachine

在 webmachine 项目中，我还从其他服务器请求 https 页面。

在原型中，我设法以这种方式做到了：

```
to_html(ReqData, State) ->
    OtherResource = "https://example.com",
    inets:start(),
    ssl:start(),
    {ok, {{Version, 200, ReasonPhrase}, Headers, Body}} =
      httpc:request(get, {OtherResource, []}, [], []), 
    %% building the HTML response here...
    {HTML, ReqData, State}. 
```

它作为原型工作，现在我想知道如何以及在哪里启动 inets 和 ssl 并让它们以正确的方式运行。

我已经看到在 src/myapp.erl 中也有启动 inets，但是这个 inets 实例在我上面的页面渲染中不可用：

```
start() ->
    ensure_started(inets), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:09:19.220

您可以将 inets 和 ssl 应用程序作为标准启动脚本的一部分来启动（或者您正在使用的任何东西 - 因为您可能会为此使用 reltool）。此外，如果您在请求期间需要一些状态（来自 webmachine 的状态），您可以在 init/1 函数中启动任何您想要的状态（如果您想在请求结束时停止它，您可以在 finish_request/2 中调用任何停止过程 - “如果导出此函数，则在构造和发送最终响应之前调用此函数。忽略结果，因此此函数的任何效果必须通过返回修改后的 ReqData。”） ：

这是 reltool.config 的一个片段：

```
{sys, [
       {lib_dirs, []},
       {erts, [{mod_cond, derived}, {app_file, strip}]},
       {app_file, strip},
       {rel, "myapp", "1",
        [
         kernel,
         stdlib,
         sasl,
         myapp
        ]},
       {rel, "start_clean", "",
        [
         kernel,
         stdlib
        ]},
       {boot_rel, "myapp"},
       {profile, embedded},
       {incl_cond, exclude},
       {excl_archive_filters, [".*"]}, %% Do not archive built libs
       {excl_sys_filters, ["^bin/.*", "^erts.*/bin/(dialyzer|typer)",
                           "^erts.*/(doc|info|include|lib|man|src)"]},
       {excl_app_filters, ["\.gitignore"]},
       {app, sasl,   [{incl_cond, include}]},
       {app, stdlib, [{incl_cond, include}]},
       {app, kernel, [{incl_cond, include}]},
       {app, mnesia, [{incl_cond, include}]},
       {app, inets, [{incl_cond, include}]}
      ]}. 
```

您可以为 ssl 添加另一个条目，与 inets ({app, inets, [{incl_cond, include}]} ) 相同。通常，您可以使用 rebar 生成所需的所有骨架文件。

# json - 如何在 ASP.NET 中使用 jQuery 读取 JSON 文件？

> ID：11433530
> 
> 赞同：0
> 
> 时间：2012-07-11T13:16:18.560
> 
> 标签：json, jquery

我已经尝试了很多，但总是遇到失败问题。任何人都可以指导我们如何使用 jQuery 读取 json 文件吗？我的项目中有一个 json 文件，如图所示 ![文件](../Images/c883107645dceec1eea08e5e0e91eb1c.png)

我已经编写了下面给出的代码

```
 $(document).ready(function () {
            $('#btnLoad').click(function () {
                $.ajax({
                    url: "example.json",
                    dataType: "text/json",
                    type: "GET",
                    contentType: "application/json;charset=utf-8",
                    success: function (msg) {
                        AjaxSucceeded(msg);
                    },
                    error: AjaxFailed
                });
            });
        });

        function AjaxSucceeded(result) {
            alert(result.d);
        }
        function AjaxFailed(result) {
            alert(result.status + ' ' + result.statusText);
        } 
```

但它总是 AjaxFailed 正在触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:20:17.300

`dataType`应该`'JSON'`

仅接受 4 个值`dataType`，您可以在此处查看：http: [//docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)

此外，您的`error`函数需要 3 个参数：

```
errorFn(jqXHR, textStatus, errorThrown) {
    // your code
} 
```

此外，这：

```
success: function (msg) {
    AjaxSucceeded(msg);
}, 
```

可以是这样的：

```
success: AjaxSucceeded 
```

您的成功函数还需要 3 个参数：

```
success(data, textStatus, jqXHR) 
```

`$.ajax`参数参考：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# php - 外键约束在事务中失败

> ID：11433533
> 
> 赞同：2
> 
> 时间：2012-07-11T13:16:29.877
> 
> 标签：php, mysql, transactions, yii, innodb

我正在使用 PHP/MySQL + Yii 框架开发一个基于 Web 的应用程序。该问题作为事务中的约束检查错误发生。

我有以下表格：

## 用户

```
CREATE TABLE IF NOT EXISTS `User` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) DEFAULT NULL,
  `surname` varchar(64) DEFAULT NULL,
  `email` varchar(128) DEFAULT NULL,
  `password` varchar(255) DEFAULT NULL,
  `creation_date` datetime DEFAULT NULL,
  `last_login_date` datetime DEFAULT NULL,
  `status` tinyint(1) DEFAULT '0',
  `level` tinyint(1) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=40 ; 
```

## 候选人信息

```
CREATE TABLE IF NOT EXISTS `CandidateInfo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `candidate_status_id` int(11) DEFAULT NULL,
  `name` varchar(64) DEFAULT NULL,
  `surname` varchar(64) DEFAULT NULL,
  `email` varchar(128) DEFAULT NULL,
  `gender` tinyint(1) DEFAULT '0',
  `date_of_birth` datetime DEFAULT NULL,
  `home_phone` varchar(20) DEFAULT NULL,
  `mobile_phone` varchar(20) DEFAULT NULL,
  `creation_date` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `rating` tinyint(1) DEFAULT '0',
  `location` varchar(100)DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_candidateinfo_user` (`id`),
  KEY `FK_candidateinfo_candidatestatus` (`candidate_status_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=26 ; 
```

基本上我正在尝试向**User**表添加一个新行，然后使用插入 id 向**CandidateInfo**表添加一个新行（user_id 列）

php代码如下

```
$transaction = Yii::app()->db->beginTransaction();
try {
    $user->save();
    $candidate->setAttribute('user_id', $user->id);
    $candidate->save();
    $transaction->commit();
} catch (Exception $e) {
    $transaction->rollBack();
    var_dump($e->getMessage());
} 
```

错误是：

```
 SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails (`origo`.`CandidateInfo`, CONSTRAINT `FK_candidateinfo_user` FOREIGN KEY (`id`) REFERENCES `User` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION). The SQL statement executed was: INSERT INTO `CandidateInfo` (`gender`, `rating`, `name`, `surname`, `email`, `date_of_birth`, `home_phone`, `mobile_phone`, `user_id`) VALUES (:yp0, :yp1, :yp2, :yp3, :yp4, :yp5, :yp6, :yp7, :yp8) 
```

当我检查 mysql 查询日志时，我发现它为 CandidateInfo 表的 INSERT 语句采用了正确的 user_id。但因上述错误而失败。据我了解，它应该可以工作，但可能是我弄错了，这不是交易的工作方式。

这两个表都是 InnoDB。

提前致谢。

**编辑：** 抱歉忘记粘贴 FK 关系。

```
ALTER TABLE `CandidateInfo`
  ADD CONSTRAINT `FK_candidateinfo_candidatestatus` FOREIGN KEY (`candidate_status_id`) REFERENCES `CandidateStatus` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_candidateinfo_user` FOREIGN KEY (`id`) REFERENCES `User` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:30:37.967

```
ALTER TABLE `CandidateInfo`
  ADD CONSTRAINT `FK_candidateinfo_candidatestatus` FOREIGN KEY (`candidate_status_id`) REFERENCES `CandidateStatus` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_candidateinfo_user` FOREIGN KEY (`id`) REFERENCES `User` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

应该

```
ALTER TABLE `CandidateInfo`
  ADD CONSTRAINT `FK_candidateinfo_candidatestatus` FOREIGN KEY (`candidate_status_id`) REFERENCES `CandidateStatus` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  ADD CONSTRAINT `FK_candidateinfo_user` FOREIGN KEY (`user_id`) REFERENCES `User` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

你有 id 参考 id 在你的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:31:34.890

您的错误堆栈：

> > SQLSTATE [23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`origo`. `CandidateInfo`, CONSTRAINT `FK_candidateinfo_user`FOREIGN KEY ( `id`) REFERENCES `User`( `id`) ON DELETE NO ACTION ON UPDATE NO ACTION）。
> > 
> > 执行的 SQL 语句是：

```
INSERT INTO `CandidateInfo`
( `gender`, `rating`, `name`, `surname`, `email`, 
  `date_of_birth`, `home_phone`, `mobile_phone`, `user_id`
)
VALUES ( :yp0, :yp1, :yp2, :yp3, :yp4, :yp5, :yp6, :yp7, :yp8 ) 
```

您的`CandidateInfo`表将`id`字段定义`auto_increment`为主键字段和外键。
并且您的`insert`语句不包括`id`, 从其父`user`表中读取。
因此在插入时会为表生成一个*新* 值并应用。哪个实习生失败了，因为它与父表 的任何主键值都不匹配。`id``candidateinfo`
`id``user`

因此是错误。

**注意**：
在子表中，如果您将master的pk字段作为外键字段引用，则
不应申请`auto_increment`，只需引用即可。

* * *

仔细观察`candidateinfo`结构，我觉得你可能想要映射`use_id`到`user.id`字段。使用正确的外键定义进行更改将解决您的问题。

# yii - yii tokeninput 扩展光标在相同匹配后聚焦在错误的位置？

> ID：11433541
> 
> 赞同：1
> 
> 时间：2012-07-11T13:16:55.940
> 
> 标签：yii, jquery-tokeninput, yii-extensions

我在使用 yii tokeninput 扩展时遇到问题。当我搜索名称时，它会给出用户列表，并且如果我选择任何名称，并且如果在所选项目之后的光标点之前还选择了该名称，它不会指向输入框中所有项目的末尾。

我正在使用这个配置。

```
$this->widget('ext.tokeninput.TokenInput', array(
       'model' => $model,
       'attribute' => 'USER_ID',
       'url'=>$this->createUrl('user/searchUserNames'),
       'options' => array(
           'allowCreation' => false,
           'preventDuplicates' => true,
          // 'resultsFormatter' => 'js:function(item){ return “&lt;li><p>” + item.name + “&lt;/p></li>” }',
           'theme' => 'facebook',
            //'hintText' => 'Type',
            'prePopulate' => $prePopulate,
            'processPrePopulate' => $processPrePopulate,

       )
   )); 
```

我也查看了示例，但没有找到解决方案。谁能帮我 ？ [Loopj：jquery 令牌输入演示](http://loopj.com/jquery-tokeninput/demo.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:36:15.307

```
 plz comment the line number 509 in **jquery.tokeninput.js** 
    input_token.insertAfter(found_existing_token);
    that line insert cursor after that selected item so if you comment 
    this line cursor is at the end of all names 
```

# java - Android找不到已放在sd卡上的文件目录

> ID：11433542
> 
> 赞同：1
> 
> 时间：2012-07-11T13:16:57.520
> 
> 标签：java, android, sd-card

问题是我通过 DDMS Perspective 将文件放在 data 和 /data/data 文件夹中，当我尝试访问该文件时，会发生 FileNotFoundException。代码：

```
 String path = Environment.getExternalStorageState()+"/analyzer_settings.xml";
                System.out.println(path);

                try {
                    Scanner in = new Scanner(new File(path));
                    while (in.hasNext()) {
                        System.out.println(in.nextLine());
                    }
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

打印例外：

```
07-11 17:10:02.470: I/System.out(13506): mounted/analyzer_settings.xml
07-11 17:10:02.500: W/System.err(13506): java.io.FileNotFoundException: /mounted/analyzer_settings.xml: open failed: ENOENT (No such file or directory) 
```

我也试过：

```
String path = Environment.getExternalStorageState()+"/data/analyzer_settings.xml";
or 
String path = Environment.getExternalStorageState()+"/data/data/analyzer_settings.xml"; 
```

没有什么对我有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:19:23.953

采用

```
String path = Environment.getExternalStorageDirectory().getAbsolutePath()
              +"analyzer_settings.xml"; 
```

代替

```
 String path = Environment.getExternalStorageState()+"/analyzer_settings.xml"; 
```

* * *

**编辑：** 因为正如文档所说：

[获取外部存储目录（）](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)：

> 获取 Android 外部存储目录。如果该目录已被用户安装在他们的计算机上、已从设备中删除或发生了其他问题，则该目录当前可能无法访问。您可以使用 getExternalStorageState() 确定其当前状态。

和

[获取外部存储状态（）](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageState%28%29)：

> 获取主要“外部”存储设备的当前状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:22:47.240

试试这个编码，

```
 File sdcard = Environment.getExternalStorageDirectory();

    File file = new File(sdcard,"billdump1.xml");//Don't use '/' symbols 
```

# .htaccess - 在我通过 .htacces 将站点从子域重定向到主域后，会话无法正常工作

> ID：11433545
> 
> 赞同：0
> 
> 时间：2012-07-11T13:17:16.927
> 
> 标签：.htaccess, cakephp

我在 cakephp 上有一个站点，在子域上开发：dev.mysite.com。在我将其重定向到主域（通过 .htaccess）后，当我访问 mysite.com 时会话停止工作。他们仍然可以在 dev.mysite.com 上正常工作。

.htaccess 重定向（在 public_html）：`RewriteRule ^(.*)$ /dev/$1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:35:18.140

会话基于（默认情况下）绑定到当前域（在您的情况下为 dev.mysite.com）的 cookie。如果域发生更改，则无法再从类似域 (mysite.com) 访问 cookie（和会话）。您可能想要查看的是`session_set_cookie_params`并在两侧设置为，以便您可以访问 mysite.com 的任何子域上的会话`domain`信息`.mysite.com`

[http://us.php.net/manual/en/function.session-set-cookie-params.php](http://us.php.net/manual/en/function.session-set-cookie-params.php)

```
session_set_cookie_params(0, '/', '.mysite.com'); 
```

在你打电话之前添加这个`session_start()`

### 更新1：

在阅读[CakeSession](http://api20.cakephp.org/view_source/cake-session#l-161)类时，似乎有一个设置主机的方法（和静态变量），但看起来并没有被使用（除了在 TestCakeSession 类中）。另一种方法是使用[CookieComponent](http://book.cakephp.org/2.0/en/core-libraries/components/cookie.html)并设置`$this->Cookie->domain = '.myhost.com';`然后您可以从任何子域访问 cookie。请注意，如果您使用加密的 cookie，您将很难在框架之外获取 cookie 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T03:26:16.610

关于将子域重定向到主域的注意事项。比如说，如果您将一个作为子域的站点移动到您的主域，也就是说，您正在将文件移动到您的主域，那很好，但是如果您要关闭一个子域并希望要将用户重定向到您的主域，那么您将遇到一个规范问题。

假设您的主网站位于 mydomain.com，而您的子域位于 site.mydomain.com。然后，搜索引擎在您可能已发布指向 site.mydomain.com 的链接的任何网站上进行爬网，会将 site.mydomain.com 视为您主域的附加域（如停放域），您甚至可能在主域中列出列表具有您的子域网址的网站。

网站管理员经常会删除子域。BAD MOVE，因为在 DNS 更改传播之前，子域将自动重定向到主网站，并且会弹出规范问题。

您需要非常小心子域。

# wcf - 启动时出现 HttpNamespaceManager 异常 - 无法获取众所周知的 SID

> ID：11433549
> 
> 赞同：1
> 
> 时间：2012-07-11T13:17:43.367
> 
> 标签：wcf, session, windows-7, configuration

当我运行 HttpNamespaceManager - 一种用于配置 WCF 服务权限的工具时，我遇到了这个异常 Unable to Get Well Known SID。有没有人知道这个问题的解决方案？

我猜这与我本地 PC 中的用户凭据有关。我已经得到了应用程序源代码，这个 SID 是从系统中获取的（我不能伪造它）。

此致

# javascript - 相当于javascript中的browserField.displayContent()

> ID：11433553
> 
> 赞同：0
> 
> 时间：2012-07-11T13:17:54.923
> 
> 标签：javascript, blackberry, cordova, blackberry-webworks

我尝试使用 BlackBerry 工作流 SDK 和 phonegap 为 BlackBerry 创建自己的应用程序。

我有一个发送 html 代码的 Web 服务，我需要在新窗口中使用此代码。我试过
window.document.write('test'); 但是当我使用手机上的后退按钮时，应用程序就退出了。

没有 html 代码但 url 的分辨率：

```
//Invoke blackberry browser
var args = new blackberry.invoke.BrowserArguments(url); 
blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER, args); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:28:16.413

BlackBerry WebWorks 只有一个窗口。您将需要使用它。所以，有几种方法可以实现我认为你想要实现的目标。

1 - 如果您只需要显示新的 html 并且您不关心后退按钮的工作，您可以将 html 插入当前页面

```
document.querySelector("body").innerHTML = htmldata; 
```

2 - 如果您需要返回按钮，则需要将 htmlData 保存到 localStorage 并更改页面，然后加载存储的 html。

```
localStorage.setItem("htmldata", htmlData);
window.location.href = "page2.html";
document.querySelector("body").innerHTML = localStorage.getItem("htmldata");; 
```

**编辑**

3 - 陷阱硬件密钥

```
blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK, handleBack);

function handleBack() {
  alert("handle back button");
} 
```

# php - php sdk google analytics api，多个帐户不给我正确的数据

> ID：11433560
> 
> 赞同：1
> 
> 时间：2012-07-11T13:18:14.833
> 
> 标签：php, google-analytics-api

我使用 Google Api PHP v0.5.0(http://code.google.com/p/google-api-php-client/) 来访问 Google Analytics，我能够使用令牌（oauth）进行连接而无需任何问题，但是当我尝试切换到其他帐户时，它会从我登录的第一个帐户中检索我的数据，每个帐户都有自己的客户端 ID、客户端密码、开发人员密钥和令牌，所以当我切换到其他帐户时，我只需使用该特定帐户的信息创建一个实例

我意识到这是来自谷歌的一些 cookie，但我删除它们并仍然从我登录的第一个帐户中检索我的数据，我没有看到任何破坏会话或注销或其他东西的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:11:15.660

我发现了问题，实际上没有任何问题，您从谷歌获得的令牌来自您登录的帐户，因为我“允许”使用相同帐户的应用程序，我每次都从同一个用户生成令牌，直到现在我才明白

# c# - .NET C# 中的多级下拉菜单

> ID：11433561
> 
> 赞同：0
> 
> 时间：2012-07-11T13:18:20.477
> 
> 标签：c#, .net, user-interface

我想知道是否有一种方法可以配置下拉列表以显示多个级别（或主控件中项目的下拉列表），就像在网站中经常看到的那样。我知道这些是基于 JavaScript 的，对我来说没用。我一直在网上搜索，我认为不可能开箱即用。我发现的大多数示例都是 Tree 控件和其他控件的混合。这是唯一的方法吗？有什么想法吗？

谢谢！

# assembly - 为什么堆栈中总是有一个无用的函数参数？

> ID：11433563
> 
> 赞同：6
> 
> 时间：2012-07-11T13:18:29.543
> 
> 标签：assembly, freebsd

我正在学习 FreeBSD 上的汇编语言编程。我正在使用 FreeBSD 9.0 i386 版本和 nasm 汇编程序。

当我写一个简单的 syscall 函数时，我发现我必须将一个无用的值压入堆栈才能使代码正确运行。

例如：

```
; File:test.asm
section .text
  global _start
_start:
  xor  eax,eax
  ; Argument of exit()
  push 0x0
  ; Syscall of exit()
  mov  al,1
  int  0x80 
```

我使用以下命令来组装和链接上面的代码：

```
%nasm -f elf test.asm -o test.o
%ld test.o -o test.bin 
```

我用ktrace检查了程序，发现：

```
%ktrace ./test.bin
%kdump -d -f ./ktrace.out 
2059 ktrace   RET   ktrace 0
2059 ktrace   CALL  execve(-1077940941,-1077941260,-1077941252)
2059 ktrace   NAMI  "./test.bin"
2059 test.bin RET   execve 0
2059 test.bin CALL  exit(1) 
```

所以代码没有正确运行，因为我提供了 0 作为 exit() 的唯一参数，但程序实际上运行了 exit(1)。

然后我改变了我的代码。

```
; File:test.asm
section .text
  global _start
_start:
  xor  eax,eax
  push 0x0
  ; Whatever digits,0x1,0x2...0xFFFFFFFF, ect.
  push 0xFFFFFFFF
  mov  al,1
  int  0x80 
```

然后代码被正确执行。

起初，我认为这是因为诸如“堆栈填充”或“堆栈对齐”之类的东西，例如[堆栈分配、填充和对齐](https://stackoverflow.com/questions/1061818/stack-allocation-padding-and-alignment)。所以它可能尊重 16 位对齐。但我发现没有。例如，下面的代码：

```
; File:test.asm
section .text
  global _start
_start:
  xor  eax,eax
  push 0x0
  ; Actual argument of exit()
  push 0x3
  push 0xFFFFFFFF
  ; Syscall of exit()
  mov  al,1
  int  0x80 
```

实际执行了 exit(3)。似乎它没有对齐字节。我用gdb调试了上面的代码，当最后一行即将执行时，堆栈是这样的：

```
0xFFFFFFFF  -> esp
0x00000003
0x00000000 
```

所以这是我的问题：为什么总是有一个无用的论点，或者有一种解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T13:32:49.527

通过阻止调用/调用指令对来略微提高性能是一个虚拟参数。

请参阅以下链接中的 $2.1：

[http://www.int80h.org/bsdasm/#default-calling-convention](http://www.int80h.org/bsdasm/#default-calling-convention)

# ruby-on-rails - 在 Linux 上运行的 Rails 和 https (ssl)

> ID：11433569
> 
> 赞同：0
> 
> 时间：2012-07-11T13:18:40.320
> 
> 标签：ruby-on-rails, linux, ssl, https

我一直在寻找如何在我的本地主机上启动 SSL 的教程。但我发现的那些与使用 nginx 或 apache 有关。我想知道是否可以使用通常的 ruby​​ 服务器（如 webrick、thin、unicorn）在 localhost 上使用 HTTPS（SSL）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:07:39.287

您是否检查[过带有 SSL 支持和 ruby​​-debug 的 Thin](https://stackoverflow.com/questions/8753566/thin-with-ssl-support-and-ruby-debug)

此外，您将需要自己的证书尝试此页面[http://hints.macworld.com/article.php?story=20041129143420344](http://hints.macworld.com/article.php?story=20041129143420344)获取 osX 的分步教程

# azure - 如何使用 SRV（或任何其他）记录重定向域？

> ID：11433570
> 
> 赞同：3
> 
> 时间：2012-07-11T13:18:43.533
> 
> 标签：azure, dns, cname, http-redirect, srv

所以：

*   我有一个域 example.com

*   我在 example.cloudapp.net 有一个 microsoft azure 项目

*   我使用 CNAME 记录使 www.example.com 与 example.cloudapp.net 一起使用。

现在的问题：

*   没有www的域。部分不起作用！

*   我没有任何选项可以在我的域提供商帐户中重定向它。我只能设置：A、MX、CNAME、TXT、AAAA 或 SRV 记录。

    *   CNAME 和 A 不起作用。我尝试过 CNAME，但它不适用于 example.com。对于A记录，您必须提供IP，这对于Azure帐户来说也不是很聪明。

我能想象到的唯一记录是 SRV，但我不知道如何正确使用它。有什么帮助或建议吗？

最诚挚的问候，

危机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:43:20.240

这是比 Azure 问题更多的 DNS 管理问题。

您当然可以在 Azure 部署中使用 A 记录。当 MSFT 宣布 VIP（虚拟 IP 地址）的持久性功能时，至少早在 6 个月前（如果不是更长的话）。这意味着只要您不删除部署，您的部署（一旦部署！）将有 1 个不变的公共 IP 地址！该 VIP 将在升级过程中保持不变。

[您可以在此处](http://msdn.microsoft.com/en-us/library/windowsazure/gg981933.aspx)找到有关管理部署的更多信息。这里有一个完整[的](http://msdn.microsoft.com/en-us/library/windowsazure/hh386336.aspx)部分“VIP 的持久性”，其中解释了您的 VIP 地址是如何持久化的。

因此，只需 A 记录到您的 VIP 地址，只要您不删除部署，它就会起作用。无论如何，谁需要访问已删除的部署。尽量不要忘记在创建新部署时更新 A 记录，以防删除旧部署。

****更新 ******

 **我刚刚做了几项检查，我认为值得尝试遵循 SVR 记录：

_http._tcp 21600 IN SRV 10 10 80 yourservice.cloudapp.net。

注意最后的点，它是必不可少且重要的！

（我会尽快自己尝试——这绝对值得探索）

****更新 2 ******

 **有趣的观察。我为我的一个域做了一个这样的记录。但是结果是直接重定向到[http://yourservice.cloudapp.net/](http://yourservice.cloudapp.net/)而不是停留在[http://mydomain.com/](http://mydomain.com/)上。所以结果是 - 不能使用 SRV。只需使用 A 记录指向您的 VIP。****

# android - Android 只进行一次可运行的运行

> ID：11433575
> 
> 赞同：0
> 
> 时间：2012-07-11T13:18:57.717
> 
> 标签：android, runnable

嗨，我有一个动画，我想用一个可运行的东西来延迟开始，但是它导致动画循环我不需要我只是想让它延迟然后运行一次有人知道怎么做吗？

这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_initialsetup);
        handler = new Handler();
        final Runnable r = new Runnable()
        {
            public void run() 
            {
                animations();
                handler.postDelayed(this, 1000);
            }
        };
        handler.postDelayed(r, 1000);
    }

    public void animations(){
        image = (ImageView)findViewById(R.id.su_shirts);
        AnimationMovepos = AnimationUtils.loadAnimation(this, R.anim.shirt_anim);   
        image.startAnimation(AnimationMovepos); 
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T13:20:49.213

它是循环的，因为在可运行文件中，您通过此调用再次将其发布到处理程序：

```
handler.postDelayed(this, 1000); 
```

删除它，它不会循环

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:21:26.063

尝试`handler.postDelayed(this, 1000);`在您的`run()`方法中删除。

# interpreter - 编译为字节码的动机是什么？

> ID：11433579
> 
> 赞同：19
> 
> 时间：2012-07-11T13:19:05.687
> 
> 标签：interpreter, bytecode, abstract-syntax-tree

我正在研究我自己的玩具编程语言。现在我正在解释来自 AST 的源语言，我想知道编译成字节码然后解释它可以为我提供什么优势。

目前，我想到了三件事：

*   遍历语法树数百次可能比在数组中运行指令要慢，特别是如果数组支持 O(1) 随机访问（即上下跳转 10 条指令）。
*   在类型化的执行环境中，我有一些运行时成本，因为我的 AST 是类型化的，并且我不断地遍历它（即，我有 10 种类型的节点，我需要检查我现在要执行的类型）。也许编译成无类型的字节码可以帮助改善这一点，因为在类型检查和编译之后，我会有一个无类型的值和代码。
*   编译成字节码可以提供更好的可移植性。

我的观点正确吗？编译为字节码的其他动机是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T13:22:15.203

速度是主要原因；在实践中解释 AST 太慢了。

使用字节码的另一个原因是它可以简单地序列化（存储在磁盘上），以便您可以分发它。这就是 Java 所做的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-15T22:40:47.760

生成字节码（或任何其他“易于解释”的形式，如线程代码）本质上是性能。

为了让 AST 解释器决定下一步做什么，它需要遍历树、检查节点、确定节点类型、检查任何操作数的类型、验证合法性，并决定适用 AST 指定运算符的哪种特殊情况（它说“+”，但它意味着 16 位添加或字符串连接？），在它最终执行一些操作之前。

如果一个人采取最终行动并生成某种易于解释的结构，那么在“执行”时，解释器可以简单地专注于执行操作而无需所有检查/特殊情况确定。

最近的另一个借口是，如果您为许多著名的虚拟机（JVM、MSIL、Parrot 等）中的任何一个生成字节码，您甚至不必为解释器编写代码。对于 JVM 和 MSIL，您还可以获得与它们相关的 JIT 编译器的好处，并且通过精心设计您的语言，与庞大的库兼容，这是 Java 和 C# 的真正吸引力。

# jquery - jQuery load() 和 .prepend()

> ID：11433581
> 
> 赞同：1
> 
> 时间：2012-07-11T13:19:07.717
> 
> 标签：jquery

好的，所以我有以下代码：

```
function() { 
$("ul#postbit").load('load.php').fadeIn("slow");
}, 3000); 
```

我想要实现的是在加载 load.php 之后将结果添加到`<li>`并让它淡入。目前它会覆盖`ul#postbit`. 我只希望它加载新结果并保留其中的内容。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T13:23:12.567

该`.load()`方法被设计为以这种方式工作，即将Ajax 响应直接加载到您调用它的元素中。尝试使用其他[Ajax 方法](http://api.jquery.com/category/ajax/)之一，例如：

```
$.get("load.php", function(data) {
    $(data).prependTo("#postbit").fadeIn("slow");
}); 
```

这假设您的“load.php”返回包含 li 元素的 html，当您说您的当前代码每次都覆盖现有列表时，这似乎是您所描述的。如果您的“load.php”只返回没有`<li>`标签的新 li 的内容，那么您可以创建 li 并将其添加到前面：

```
$.get("load.php", function(data) {
    $("<li/>").html(data).prependTo("#postbit").fadeIn("slow");
}); 
```

编辑：要让它不断重新加载，您可以将上述内容包装到您调用的函数中`setInterval()`，或者执行以下操作：

```
function getMoreData() {
    $.get("load.php", function(data) {
        $(data).prependTo("#postbit").fadeIn("slow");
    }).complete(function() {
        setTimeout(getMoreData, 3000);
    });
}
getMoreData(); 
```

这用于在 3 秒后`setTimeout()`安排另一次运行`getMoreData()`，但它会在前一个请求完成后执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:24:43.690

您应该查看 jQuery API。这是 AJAX 的 API：http: [//api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/)

```
$.ajax({
    url: 'load.php',
    success: function(data) {
        $("ul#postbit").prepend('<li>'+ data +'</li>');
    }
}); 
```

# jakarta-ee - 将 iText 文档连接成 PDF

> ID：11433587
> 
> 赞同：0
> 
> 时间：2012-07-11T13:19:20.270
> 
> 标签：jakarta-ee, pdf, itext, concatenation

在我的 Java EE 应用程序中，我正在通过我的 Action 生成 PDF，如下所示：

```
 response.setContentType("application/pdf");
 Document document = new Document();                
 PdfWriter.getInstance(document, response.getOutputStream()); 
 processManagerHelper.exportingSystemStatisticsPage(document, foProcess); 
```

然后我的函数“exportingSystemStatisticsPage”打开文档，用 iText 和 JFreeChart 填充它，然后关闭文档。这很好用。

我现在想做的是用不同的参数多次调用我的函数“exportingSystemStatistics”，然后连接该函数创建的 PDF 以仅生成一个 PDF。“exportingSystemStatisticsPage”正在创建一页 PDF。

你知道我该怎么做吗？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:38:32.030

如果您将在“exportingSystemStatistics”中添加到 PDF 的所有内容添加到[ChapterAutoNumber](http://api.itextpdf.com/itext/com/itextpdf/text/ChapterAutoNumber.html)，您可以轻松地连接这些章节......

# java - 泛型-我错过了什么还是有什么意义？

> ID：11433590
> 
> 赞同：3
> 
> 时间：2012-07-11T13:19:32.507
> 
> 标签：java, generics

我有以下代码：

```
public class AClass<X extends AnInterface> implements AnotherInterface {

    public AClass(X x){
    }

} 
```

`X`当我可以将其替换为`AnInterface`??时，为什么要使用构造函数参数类型？当然，它们的意思是一样的，任何是`AnInterface`?的子类型。

我试图将我的所有参数类型保持为泛型，并且只在泛型参数声明中提及接口名称，例如“X 扩展 AnInterface”，但遇到问题，因为它表示我传入的 AnInterface 类型的值不相等键入 X。

编辑：

```
public void<X extends AnInterface> myMethod(){

    AnInterface b = new ADiffClass();
    AnotherInterface a = new AClass(b);
}

public class ADiffClass<X extends AnInterface> implements AnInterface {

    public ADiffClass(){
    }

} 
```

这就是我遇到问题的地方，我收到一个编译错误，说 b 的类型是 AnInterface，而 AClass 的构造函数中所需的类型是 X。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T13:24:21.293

假设你有这种情况：

```
public class AClass<X extends AnInterface>{

    public AClass(X x){
        ...
    }

    public X getIt() {
        ...
    }

} 
```

创建对象的人将有一个相应的接口，在这种情况下它会很有用。

例如：

```
// supposing DefaultAnInstance is an implementation of AnInstance interface
DefaultAnInterface obj = new DefaultAnInterface();
AClass<DefaultAnInterface> instance = new AClass<DefaultAnInterface>(obj);
...
// for the user getIt will return an objecct of type DefaultAnInterface
DefaultAnInterface obj = instance.getIt(); // there is no need to cast it to DefaultAnInterface 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T13:24:31.210

如果你声明一个这样的变量：

```
private AClass<Foo> a; 
```

以下将是有效的：

```
 a = new AClass<Foo>(new Foo()); 
```

但以下不会：

```
 a = new AClass<Foo>(new Bar()); 
```

（假设`Foo`和`Bar`是 的两个实现`AnInterface`）。

在这种情况下，这就是泛型的重点：将类型限制为实现（或扩展）AnInterface 的特定类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:23:26.037

你为什么要扩展接口？你的意思是实现它？我认为问题在于您正在使用一个应该使用接口的类。如果您希望能够传入多个类中的某些内容，那正是接口的用途。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:43:57.907

给定您的 AClass，您可能希望它比一般的泛型更通用 - 它不能处理任何类型，就像 LinkedList 这样的泛型可以，但您希望它能够处理很多类。

例如，假设您有一个类 SelfSortingList，它是通用的。它的所有对象都需要可比较才能进行排序。但是你不想让实现 Comparable 的 Widgets 和 Levers 在同一个列表中；那没有意义，他们对 Comparable 的特定实现可能反映了这一点。

所以你所做的就是说，“我希望我的 SelfSortingList 能够保存相同类型的对象，但它们必须是可比较的。” 这就是为什么您在类头 SelfSortingList 中同时具有类型参数 (X) 和 X 可以是什么（扩展 Comparable）的限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T14:50:09.940

没有理由你不能。但是，这可能会破坏通用类的其余部分：

```
public class AClass<X extends AnInterface> {
    private X anInterface;
    public AClass(AnInterface anInterface) {
       // Not legal.  You'd have to narrow cast to X
       this.anInterface = anInterface;
    }
} 
```

因此，您始终可以将“anInterface”的声明更改为 AnInterface 而不是 X。但是，泛型并没有给您任何东西，因为您不再指代 X

```
public class AClass<X extends AnInterface> {
    private AnInterface anInterface;
    public AClass(AnInterface anInterface) {
       // Not legal.  You'd have to narrow cast to X
       this.anInterface = anInterface;
    }
} 
```

X有什么用？您将插入一个未使用的通用参数。

然后还有另一个答案中提到的构造函数类型安全问题。

这两个构造函数并不意味着同样的事情：

```
public AClass(AnInterface anInterface) { ... }
public AClass(X anInterface) { ... } 
```

第一个意味着您可以拥有任何与 AnInterface 兼容的分配类（即实现或扩展它）。第二个意味着您可以拥有与提供的通用参数兼容的任何类，这可能比 AnInterface 更具体。有人在上面使用了这个例子：

```
public class Int1 implements AnInterface { ... }
public class Int2 implements AnInterface { ... }
public class Int3 extends Int1 { ... } 
```

因此，如果您有：

```
AClass<Int1>  --> it could accept either Int1 or Int3, but not Int2 in the constructor
AClass<Int2>  --> it could accept only Int2 in the constructor 
```

# c# - 使用 Google Maps API 和 GeoXML3 导入和显示本地 KML 文件

> ID：11433593
> 
> 赞同：1
> 
> 时间：2012-07-11T13:20:01.233
> 
> 标签：c#, javascript, google-maps, kml

我正在尝试使用嵌入了 Google Maps API 的 C# 编写桌面应用程序。为此，我在应用程序中嵌入了一个 Web 浏览器并使用 Maps API。我可以在应用程序中使用 Maps API 的基本功能。

我的目的是动态创建一个 KML 文件并将其显示在地图上。KML 文件是使用 GDAL 从 shapefile 成功创建的。我通过将它们导入到 maps.google.com 来检查它们的有效性。我面临的问题是无法使用 Maps API 在本地磁盘上显示 KML 文件。我无法将这些 KML 文件上传到 Google 可以访问的公共服务器。我在网上搜索，发现 geoxml3 可以用于这些目的，但我无法处理它。由于 Geoxml3 受到相同的跨域下载限制，因此当我尝试解析本地磁盘上的 KML 文件时出现“访问被拒绝”错误。如何确保我的 KML 文档与包含的地图页面来自同一个域？我对 javascript 很陌生，所以任何帮助都将不胜感激。

如果有另一种方法可以实现我正在尝试做的事情（比如将本地 kml 文件即时导入 Google 服务器等），请告诉我。先感谢您。

伊金格迪克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:36:15.980

跨域问题的通常答案（至少在最近使用 CORS 的浏览器之前：[Cross-Origin Resource Sharing](http://www.w3.org/TR/cors/)，我见过但没有尝试过），是在与网页相同的域中使用代理。我不确定这将如何与本地文件一起使用。

您应该能够从本地计算机上运行的应用程序访问本地文件，但我不确定这是否符合开发以外的使用条款。

另一种选择是将 kml 作为字符串传递给 geoxml3 并使用 parseKmlString 方法。那将避免xmlHttpRequest。

# php - 条件下载页面内容（js、css）

> ID：11433603
> 
> 赞同：0
> 
> 时间：2012-07-11T13:20:22.783
> 
> 标签：php, javascript, css, apache

如何告诉浏览器如果 css 或 js 文件处于`not modified (303)`状态而不是从缓存中加载它，否则从服务器获取它？

到目前为止，我有这个 htacces，但如果有任何变化，必须覆盖这个规则：

```
# Turn on Expires and set default to 0
ExpiresActive On
ExpiresDefault A0

# Set up caching on media files for 6 MONTH
<FilesMatch "\.(png|ico|css|js)$">
ExpiresDefault A604800
</FilesMatch> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:25:25.933

[http://httpd.apache.org/docs/2.0/mod/mod_expires.html](http://httpd.apache.org/docs/2.0/mod/mod_expires.html)

您可以在 Expires 规则中使用修改时间而不是访问时间。

```
<FilesMatch "\.(png|ico|css|js)$">
ExpiresDefault M604800
</FilesMatch> 
```

# python - OpenCV：将特定BGR值的所有像素设置为另一个BGR值

> ID：11433604
> 
> 赞同：11
> 
> 时间：2012-07-11T13:20:26.060
> 
> 标签：python, opencv, numpy

我正在将 OpenCV 与 Python 一起使用。我有一个图像，我想要做的是将 BGR 值 [0, 0, 255] 的所有像素设置为 [0, 255, 255]。

我问了[一个](https://stackoverflow.com/questions/11064454/adobe-photoshop-style-posterization-and-opencv)关于如何对图像进行后处理的问题，并从答案中我了解到使用索引数组进行索引，例如：image[image > 128] = 255

我了解这是如何工作的，因为 image > 128 将返回一个满足条件的多维索引数组，然后我将此数组应用于图像并将其设置为 255。但是，我对如何将其扩展到为数组做一个值。

我尝试执行以下操作：

```
 red = np.array([0, 0, 255])
      redIndex = np.where(np.equal(image, red))
      image[redIndex] = np.array([0, 255, 255]) 
```

但它不起作用，出现错误：

```
ValueError: array is not broadcastable to correct shape 
```

有没有一种有效的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T14:15:00.957

考虑一个像数组这样的图像，如下所示：

```
>>> red
array([[[  0,   0, 255],
        [  0,   0, 255],
        [  0,   0, 255],
        [  0,   0, 255],
        [  0,   0, 255]],

       [[  0,   0, 255],
        [  0,   0, 255],
        [  0,   0, 255],
        [  0,   0, 255],
        [  0,   0, 255]]]) 
```

它的所有元素都是[0,0,255]。它的形状是 2x5x3。试想其中还有其他价值。（我无法创建所有这些）。

现在您找到 [0,0,255] 的位置并将它们更改为 [0,255,255]。你可以这样做：

```
>>> red[np.where((red == [0,0,255]).all(axis = 2))] = [0,255,255] 
```

现在检查红色。

```
>>> red
array([[[  0, 255, 255],
        [  0, 255, 255],
        [  0, 255, 255],
        [  0, 255, 255],
        [  0, 255, 255]],

       [[  0, 255, 255],
        [  0, 255, 255],
        [  0, 255, 255],
        [  0, 255, 255],
        [  0, 255, 255]]]) 
```

希望这是你想要的。

测试结果：

查看此链接中的代码：[https ://stackoverflow.com/a/11072667/1134940](https://stackoverflow.com/a/11072667/1134940)

我想按照问题将所有红色像素更改为黄色。

所以我在最后添加了这段代码：

```
im2[np.where((im2 == [0,0,255]).all(axis = 2))] = [0,255,255] 
```

下面是我得到的结果：

![在此处输入图像描述](../Images/82057aa323f35c26cfaceb2ae71ac97b.png)

如果我想将绿色地面改为黄色地面怎么办：

```
im2[np.where((im2 == [0,255,0]).all(axis = 2))] = [0,255,255] 
```

结果 ：

![在此处输入图像描述](../Images/7893140b238c15dbcc407b451c6e7afd.png)

# php - AJAX - JSON 链接的动态 MySQL Select 元素不适用于文本，但适用于数值

> ID：11433608
> 
> 赞同：0
> 
> 时间：2012-07-11T13:20:37.460
> 
> 标签：php, mysql, ajax, json, jquery

我有以下代码片段，它根据从 MySQL 中提取的数据构建链式选择框。

第一个选择在名为 PartTypeDescription 的列上使用 DISTINCT。如果列中的值本质上是数字（例如：11），则此代码非常有用。您选择第一个选择，然后按应有的方式填充第二个选择。

当数据是文本时会出现问题（例如：管道）。例如，您选择 Plumbing，第二个选择框为空。我假设构建第二个选择框的第二个查询无法正常工作。下面的代码中是否存在不允许文本值的内容？

```
/* Configure the select boxes */

if (isset($_GET['key'])) {
    $key = $_GET['key'];
    switch ($key) {
        case 'callTypeSelect':
            $select = new SelectBox('What vehicle are you working from?','Choose a vehicle');
            $res = mysql_query('SELECT DISTINCT PartTypeDescription FROM ' . DB_TABLE2);
            $callTypes = array();
            for ($i = 0; list($callType) = mysql_fetch_row($res); $i++) {
                $callTypes[] = $callType;
                $select->addItem($callType, 'brandSelect-' . $callType);
            }
            header('Content-type: application/json');
            echo $select->toJSON();
            break;
        default:
            if (strpos($key, 'brandSelect-') === 0) {
                $callType = str_replace('brandSelect-', '', $key);
                $resBrands = mysql_query('SELECT Invm_InventoryNumber FROM ' . DB_TABLE2
                    . ' WHERE PartTypeDescription  = ' . mysql_real_escape_string($callType) . " ORDER BY Invm_InventoryNumber");
                $select = new SelectBox('What part number are you looking for?', 'Pick a part');
                for ($i = 0; list($brand) = mysql_fetch_row($resBrands); $i++) {
                    $select->addItem($brand, 'result-' . $brand . '-' . $callType);
                }
                header('Content-type: application/json');
                echo $select->toJSON();
            } elseif (strpos($key, 'result-') === 0) {
                list($null, $brand, $callType) = explode('-', $key);
                 $res = mysql_query('SELECT * FROM ' . DB_TABLE2
                   . ' WHERE PartTypeDescription = \'' . mysql_real_escape_string($callType) . '\'
                 AND Invm_InventoryNumber = \'' . mysql_real_escape_string($brand) . "'");

                $markup = '';
                for ($i = 0; $row = mysql_fetch_assoc($res); $i++) {
                    //$row = array_map('htmlspecialchars', $row);    it looks like the items is already encoded
                    $markup .= <<<HTML 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:35:59.943

您不能转义单引号内的字符。例如：

```
$x = 'I don\'t like tomatoes'; 
```

这不会像您认为的那样逃脱引用，并且会导致问题。在您的代码中使用此行：

```
$res = mysql_query('SELECT * FROM ' . DB_TABLE2
   . ' WHERE PartTypeDescription = \'' . mysql_real_escape_string($callType) . '\'
   AND Invm_InventoryNumber = \'' . mysql_real_escape_string($brand) . "'"); 
```

您需要使用带有双引号的转义序列来包装字符串。

```
$res = mysql_query('SELECT * FROM ' . DB_TABLE2
   . " WHERE PartTypeDescription = \'" . mysql_real_escape_string($callType) . "\'
   AND Invm_InventoryNumber = \'" . mysql_real_escape_string($brand) . "'"); 
```

# css - 未找到工具/CSS 404

> ID：11433609
> 
> 赞同：1
> 
> 时间：2012-07-11T13:20:38.267
> 
> 标签：css, drupal, http-status-code-404, drupal-ctools

我遇到了一个相当奇怪的问题。我的服务器日志充满了对 url 的调用，例如：

```
/sites/default/files/ctools/css/588b003a48050c4e59cbeba2b453cb92.css 
```

它们都是404错误。但是该站点运行良好并且看起来不错。只有我有大量的页面 CSS 404 错误。

我已经完全清除了网站的缓存，但问题仍然存在。

我正在使用 Drupal 6.17。

它看起来与这里的问题相同：

[优化 CSS 文件 - 找不到文件](https://stackoverflow.com/questions/3516352/optimize-css-files-file-not-found)

但是，我没有在 Performance 中启用 CSS 优化，我正在使用模块[Advance CSS/JS aggregation](http://drupal.org/project/advagg)。

问题突然出现，该网站已有 2 年历史，而我从未发生过类似的事情。

任何遇到同样问题的人？

# php - cakephp 防止多个 mysql 选择

> ID：11433610
> 
> 赞同：0
> 
> 时间：2012-07-11T13:20:40.617
> 
> 标签：php, mysql, cakephp

查看我的 SQL 语句，它正在执行一些与我的用户相同的 SELECT 语句。

我有一个“项目”页面，用户可以在其中评论项目本身。在同一页面上，项目也有分配给项目的更新，用户也可以评论更新。

这意味着如果用户在同一个 find() 中同时评论项目和更新，SQL 将查找用户的 ID 两次；询问。有什么办法可以防止这种情况发生或者真的不重要吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:26:17.307

看看 CakePHP 中的缓存。您可以缓存您知道在用户交互的整个生命周期内不会更改的查询，例如用户 ID。

[http://book.cakephp.org/1.3/view/1376/Cache](http://book.cakephp.org/1.3/view/1376/Cache)

[http://book.cakephp.org/1.3/view/1193/Caching](http://book.cakephp.org/1.3/view/1193/Caching)

# php - 由于php，html代码中的空格

> ID：11433616
> 
> 赞同：1
> 
> 时间：2012-07-11T13:20:55.540
> 
> 标签：php, html, whitespace

示例： ![空白](../Images/02b39bcb180f2bb6c7006198d82784e8.png) 由于我在标题中使用了一些 php，因此呈现了此空白。

我怎样才能摆脱这个空白？

生成空格的代码：

```
<?php
global $domein;
global $domeinnaam;
global $huidigDomein;
global $get;

$domeinnaam = str_replace('www.', '', $_SERVER['SERVER_NAME']);
$domein = str_replace('.nl', '', $domeinnaam);

include('ond/inc/php/meta.php');
if(!isset($_GET['ond']))
    $_GET['ond'] = 'home';
$pagina = $_GET['ond'];

$get = new Get();
$websites = $get->alleWebsites();
$domeinen = $get->huidigDomein($domein);
$huidigDomein = $domeinen[0]->id;
showMeta($websites, $domeinen);
?> 
```

元文件

```
 <?php
require_once 'php/db.php';
require_once 'php/db_get.php';
require_once 'php/db_insert.php';
require_once 'php/db_delete.php';
require_once 'php/db_update.php';
require_once 'php/form.php';
require_once 'php/proces.php';
require_once 'php/paginas.php';
require_once 'php/phpmailer.php';
require_once 'php/uploader.php';
require_once 'php/static.php';
require_once 'php/admin.php';
require_once "fckeditor/fckeditor.php"; 
include('ond/inc/php/data.php');

function showMeta($websites, $domeinen)
{
        $rubriek = null;
        $page = null;
        $domein = $domeinen[0]->domein;
        $domeinnaam = $domeinen[0]->domein . '.nl';
        $query = "SELECT * FROM paginas AS p INNER JOIN domeinen AS d ON p.domein = d.id WHERE d.domein = '$domein' AND p.titel = 'Home'";
        $result = mysql_query($query);
        while($row = mysql_fetch_object($result))
            $content = $row->content; 

        if(isset($_GET['id']) && $_GET['ond'] == 'overzicht')
        {
            $id = $_GET['id'];
            $query = "SELECT * FROM rubrieken WHERE id = '$id'";
            $result = mysql_query($query);
            $row = mysql_fetch_object($result);
            $rubriek = 'Overzicht '. ucfirst($row->titel); 
        }
        else
        {
            if(isset($_GET['page']))
            {
                $page = ' - ';
                $page .= urldecode($_GET['page']);
            }

            $pagina = strtolower($_GET['ond']);
            if($pagina == 'home')
                $intro = 'Welkom';
            elseif($pagina == 'aankondiging')
                $intro = 'Nieuws en aankondigingen';
            else
                $intro = ucfirst($pagina);
        }

        if ($websites)
        { 
                $keywords = ucfirst($domeinnaam).', '.ucfirst($domein).', DorpeninDrenthe.nl, Meppel, Bed and Breakfast, Bed & Breakfast, Bed en breakfast, Dagattractie, Dagattracties, Bungalows, Bungalow, Hotels, Hotel, Appartementen, Appartement, Stacaravans, Stacaravan, Chalets, Chalet, Campings, Camping, Galeries, Galerie, Bedrijven, Bedrijf, Restaurants, Restaurant,';
                foreach ($websites as $website)
                { 
                        $url = str_replace("http://www.", " ", $website->url);  
                        $keywords .= strtolower($url);
                        $keywords .= ', ';
                } 

        }

        echo '<meta http-equiv="keywords" content="'.$keywords.'"/>';
        echo '<meta http-equiv="description" content="'.strip_tags(html_entity_decode($content)) .$keywords.'" />';
        echo '<meta name="Author" content="ONDReclame.nl - Meppel - J.M. Suos" />';
        echo '<meta name="Revisit-After" content="1 days" />';
        echo '<meta name="robots" content="index,follow" />';
        echo '<meta name="Title" content="'.ucfirst($domeinnaam). ' - Dorpen in Drenthe - ' . $intro . $rubriek . ' in ' . ucfirst($domein). $page .'"/>';
        echo '<title>'.ucfirst($domeinnaam). ' - Dorpen in Drenthe - ' . $intro . $rubriek . ' in ' . ucfirst($domein) . $page .' </title>';

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:23:34.713

如果您至少使用**php5** ，这可能会有所帮助：

[php_strip_whitespace 函数](http://lt.php.net/manual/ro/function.php-strip-whitespace.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:26:36.023

似乎每个包含的文件都给你一个`EOL`

尝试在所有 php 文件中`EOL`最后删除`?>`或完全删除。`?>`

# php - 无法执行 php 脚本命令行

> ID：11433617
> 
> 赞同：0
> 
> 时间：2012-07-11T13:20:56.403
> 
> 标签：php

我正在使用 xampp 和 windows 操作系统。我正在尝试执行简单的 php 脚本命令行，但出现“无法打开输入文件[http://test.localhost.com/test.php](http://test.localhost.com/test.php) ”之类的错误。下面是我的代码。

```
#!/usr/local/bin/php  
<?php  
$stdin = fopen('php://stdin', 'r');  
while (true) {  
        $input = fgets($stdin, 3);  
        if ($input == 42) {  
                break;  
        } else {  
                echo $input;  
        }  
}  
fclose($stdin);  
exit; 
```

我给了我以上错误。谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:41:50.623

您想调用 CLI 脚本，而不是网站。

```
c:/path/to/php.exe c:/path/to/scrip.php 
```

# excel - 设计一个随着在 Excel 中输入更多数据而扩展的图表

> ID：11433618
> 
> 赞同：1
> 
> 时间：2012-07-11T13:21:01.553
> 
> 标签：excel, charts, excel-2010, vba

我有一个从另一个工作表中提取数据的工作表，它旨在仅显示迟到的工作，并且效果很好。我有它，它被分成几个部分，它收集所有这些数据并做我想做的一切。

我在它显示图表的地方有它，在图表将自动填充的所述区域中有数据，否则它将是空白的。如果在范围内输入更多数据，则图表会相应扩展。

附件是带有解决方案的简化工作簿。这可能不是最有说服力的方法，但它确实有效。

[https://dl.dropbox.com/u/3327208/Excel/PAERTO2_1.xlsm](https://dl.dropbox.com/u/3327208/Excel/PAERTO2_1.xlsm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:46:09.637

使用的命名范围：

*   [office.microsoft.com](http://office.microsoft.com/en-us/excel-help/using-named-ranges-to-create-dynamic-charts-in-excel-HA001109801.aspx) （向下滚动 2/3 以获取相关信息）
*   [www.gilliganondata.com](http://www.gilliganondata.com/index.php/2010/08/17/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/)

这也可以称为**结构化引用**。从 Excel 2010 帮助：

> 当您使用引用表格（表格的一部分或整个表格）的公式时，结构化引用使处理表格数据变得更加容易和直观。它们特别有用，因为表格数据范围经常更改，并且结构化引用的单元格引用会自动调整。这最大限度地减少了在表中添加和删除行和列或刷新外部数据时重写公式的需要。

## 更新

我没有在 Excel 2010 VBA 中使用这些技术，而且方法和关键字似乎确实发生了变化。我发现这篇[很有帮助的文章](http://www.jkp-ads.com/articles/excel2007tablesvba.asp)（请参阅“插入行和列”部分）。

# netsuite - 如何在 Netsuite 的 Suitescript 中按内部 id 搜索记录？

> ID：11433621
> 
> 赞同：5
> 
> 时间：2012-07-11T13:21:11.977
> 
> 标签：netsuite

我正在尝试使用他们的 Suitescript API 在 Netsuite 中按库存项目类别实现搜索。以下代码按预期工作，所以我知道我已经成功进行了远程通信。但我对如何按类别进行搜索感到困惑。

```
function NSTest() {
    var items = [];

    var filters = [
        //new nlobjSearchFilter('price',null,'lessthan','20'),
        new nlobjSearchFilter('thumbnailurl',null,'isnotempty')
        //new nlobjSearchFilter('internalid',null,'is','60635')
        ];

    var columns = [
        new nlobjSearchColumn('itemid'),
        new nlobjSearchColumn('salesdescription'),
        new nlobjSearchColumn('storedisplaythumbnail'),
        new nlobjSearchColumn('baseprice')
        ];

    var results = nlapiSearchRecord('inventoryitemdetail',null,filters,columns);
    for(var i=0,l=results.length; i < l; i++) { 
        var result = results[i];
        var price   = result.getValue('baseprice');
        var thumbImage  = result.getText('storedisplaythumbnail');
        var desc    = result.getValue('salesdescription');
        var name    = result.getValue('itemid');
        var img   = 'http://shopping.netsuite.com'+thumbImage;
        var item = {desc:desc, price:price, name:name, img:img};
        items.push(item);
    }
    response.write(JSON.stringify(items));
} 
```

这可以正常工作，但如果我取消注释该行：

```
new nlobjSearchFilter('internalid',null,'is','60635') 
```

它不是。谁能指导我在 Suitescript 中按类别搜索项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T17:42:23.780

去掉内部 ID 号的引号。internalid 的搜索过滤器正在寻找一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T10:40:40.190

我检查了记录浏览器，恐怕我找不到有效的记录内部 id 'inventoryitemdetail'，你一定弄错了。它必须是“库存项目”。我检查了代码，一切似乎都正常。

```
function start(request, response) {
   var searchId = '27890';
   var filters = new Array();
   filters[0] = new nlobjSearchFilter('internalid', null, 'is',searchId);
   var columns = new Array();
   columns[0] = new nlobjSearchColumn('itemid');
   columns[1] = new nlobjSearchColumn('salesdescription');
   columns[0] = new nlobjSearchColumn('storedisplaythumbnail');
   columns[1] = new nlobjSearchColumn('baseprice');

  // var search = nlapiCreateSearch('customer', filters, columns);
  // var resultSet = search.runSearch();
  // var results = resultSet.getResults(0, 100);
   var results = nlapiSearchRecord('inventoryitem',null,filters,columns);
   var output = "";
   for(var i in results)
       {
            output += results[i].getValue('itemid')+"\n";
            output += results[i].getValue('salesdescription')+"\n";
            output += results[i].getValue('storedisplaythumbnail')+"\n";
            output += results[i].getValue('baseprice')+"\n";

       }
   response.write(output);
} 
```

如果它必须是inventoryitem，那么考虑上面的代码。

# json - 如何验证我的 json

> ID：11433624
> 
> 赞同：0
> 
> 时间：2012-07-11T13:21:21.210
> 
> 标签：json, google-chrome, console, lint

我知道，`jsonlint`但它希望键是字符串。我想像在命令行上一样验证 json。我在 chrome 的控制台窗口上试过，但我不知道解析错误在哪里。它只是说`Unexpected token :`，并没有告诉我在哪里。

# html - svg 过滤器无法使用 godaddy 处理 FF

> ID：11433628
> 
> 赞同：0
> 
> 时间：2012-07-11T13:21:33.317
> 
> 标签：html, css, firefox, svg, svg-filters

我一直在关注此 Q&A 以在我的图像上设置灰度和透明度，并使它们在 :hover 上恢复正常， [在 HTML/CSS 中将图像转换为灰度](https://stackoverflow.com/questions/609273/convert-an-image-to-grayscale-in-html-css)

它适用于 safari/chrome，但由于某种原因它不能在 Firefox 上运行。图像只是不可见，但 :hover 有效（图像看起来像它们应该的那样，通常）

我已经更新了我的 .htaccess 并联系了 GoDaddy 支持，在进行测试后告诉我 .svg MIME 类型已在服务器上注册并正常工作。我也有离线问题，所以我想这是我的 .css 的 .svg 的问题，但无法弄清楚是什么，因为我尝试了不同的解决方案，结果相同。

我的过滤器.svg

```
<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.1"
     baseProfile="full"
     xmlns="http://www.w3.org/2000/svg">
    <filter id="desaturate">
        <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0
                                             0.3333 0.3333 0.3333 0 0
                                             0.3333 0.3333 0.3333 0 0
                                             0      0      0      1 0"/>
    </filter>
</svg> 
```

我的风格.css

```
.logos img {
    filter: url(filters.svg#grayscale); 
    filter: gray;
    -webkit-filter: grayscale(1);
    margin: 10px 20px 10px 20px;
    opacity: .5;
}

.logos img:hover {
    filter: none;
    -webkit-filter: grayscale(0);
    opacity: 1;
} 
```

提前非常感谢，乔:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:36:31.543

您的过滤器 ID 在 filter.svg 中是“去饱和”的。这与您在 CSS 中调用的内容不匹配（您称其为“灰度”）。更改您的 css 以使用`filters.svg#desaturate`或更改 svg 文件以使用`<filter id="grayscale">`.

# android - 在 Android 中发送本地通知

> ID：11433632
> 
> 赞同：8
> 
> 时间：2012-07-11T13:21:44.563
> 
> 标签：android, notifications

我想在我的应用程序中使用 android 中的本地通知。如果应用程序在 24 小时内未打开，则会发送本地通知。谁能告诉我应该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T13:24:56.000

请参阅：[Android 中的本地通知？](https://stackoverflow.com/questions/5076165/local-notifications-in-android?rq=1) 您应该能够每小时使用警报管理器安排一次 Intent。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-05T12:59:28.743

```
Intent intent = new Intent(context, yourActivity.class);
    PendingIntent pIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    NotificationCompat.Builder b = new NotificationCompat.Builder(context);

    b.setAutoCancel(true)
     .setDefaults(Notification.DEFAULT_ALL)
     .setWhen(System.currentTimeMillis())         
     .setSmallIcon(R.drawable.ic_launcher)
     .setTicker("notification")            
     .setContentTitle("notification")
     .setContentText("notification")
     .setDefaults(Notification.DEFAULT_LIGHTS| Notification.DEFAULT_SOUND)
     .setContentIntent(pIntent)
     .setContentInfo("Info");

    NotificationManager notificationManager = (NotificationManager) ctx.getSystemService(Context.NOTIFICATION_SERVICE);
    notificationManager.notify(1, b.build()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-28T06:05:17.510

**如果您想使用大数据触发本地通知，即在单个通知中使用多行文本，带有标题、Ticker、图标、声音..使用以下代码..我认为它会对您有所帮助..**

```
 Intent notificationIntent = new Intent(context,
                ReminderListActivity.class);

        notificationIntent.putExtra("clicked", "Notification Clicked");
        notificationIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                | Intent.FLAG_ACTIVITY_SINGLE_TOP); // To open only one activity

            // Invoking the default notification service 

            NotificationManager mNotificationManager;
            NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(
                    context);
            Uri uri = RingtoneManager
                    .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
            mBuilder.setContentTitle("Reminder");
            mBuilder.setContentText("You have new Reminders.");
            mBuilder.setTicker("New Reminder Alert!");
            mBuilder.setSmallIcon(R.drawable.clock);
            mBuilder.setSound(uri);
            mBuilder.setAutoCancel(true);

            // Add Big View Specific Configuration 
            NotificationCompat.InboxStyle inboxStyle = new NotificationCompat.InboxStyle();
            String[] events = null;

                events[0] = new String("Your first line text ");
                events[1] = new String(" Your second line text");

            // Sets a title for the Inbox style big view
            inboxStyle.setBigContentTitle("You have Reminders:");

            // Moves events into the big view
            for (int i = 0; i < events.length; i++) {
                inboxStyle.addLine(events[i]);
            }

            mBuilder.setStyle(inboxStyle);

            // Creates an explicit intent for an Activity in your app 
            Intent resultIntent = new Intent(context,
                    ReminderListActivity.class);

            TaskStackBuilder stackBuilder = TaskStackBuilder
                    .create(context);
            stackBuilder.addParentStack(ReminderListActivity.class);

            // Adds the Intent that starts the Activity to the top of the stack

            stackBuilder.addNextIntent(resultIntent);
            PendingIntent resultPendingIntent = stackBuilder
                    .getPendingIntent(0, PendingIntent.FLAG_CANCEL_CURRENT);

            mBuilder.setContentIntent(resultPendingIntent);
            mNotificationManager = (NotificationManager) context
                    .getSystemService(Context.NOTIFICATION_SERVICE);

            // notificationID allows you to update the notification later  on.

            mNotificationManager.notify(999, mBuilder.build()); 
```

# objective-c - 默认情况下，什么会采用布尔变量？

> ID：11433636
> 
> 赞同：0
> 
> 时间：2012-07-11T13:21:54.657
> 
> 标签：objective-c, ios5, xcode4.2, boolean

我知道，布尔变量默认为 NO。

```
BOOL first;
BOOL second;

if (first != second) {
    NSLog(@"Yes");
}else{
NSLog(@"NO");
} 
```

输出是：是

但是当我将 NO 分配给第一个和第二个时，我得到了“NO”。

```
first = NO;
second = NO;

if (first != second) {
    NSLog(@"Yes");
}else{
NSLog(@"NO");
} 
```

输出是：否

哪里有问题？或者布尔变量应该在默认情况下完全采用 NO 吗？还是取决于编译器？

我使用的是 Xcode 4.2 版本。我不明白问题出在哪里。请举例说明任何一个。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:26:50.507

局部变量默认不初始化；你会在其中得到随机垃圾。`BOOL first = NO;`如果您希望它们具有合理的值，您应该初始化它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:28:43.770

与 C 一样，Objective C 没有 Boolean 的真实类型。如果您查看`/usr/include/objc/objc.h`，您会发现：

```
#define YES             (BOOL)1
#define NO              (BOOL)0 
```

所以你的代码说

```
if (0 != 0) {
   ...
} 
```

这绝不是真的。

# c# - 正则表达式匹配整个 HTML 文档

> ID：11433641
> 
> 赞同：0
> 
> 时间：2012-07-11T13:22:20.280
> 
> 标签：c#, html, regex, parsing

所以，我仍然是一个 REGEX 假人，过去 2 天才使用它们。但是，至少对我来说，我的问题似乎很奇怪。

以下模式为我正确匹配此字符串：

```
<td valign=3D\"top\">For:</td>(\\s)+(=)?(.|\r\n|\n)+<td>(([a-z]|[A-Z]|=|\\s)+)<br> 
```

原始字符串（取自作为输入提供给正则表达式的 html 文档）：

```
<td valign=3D"top">For:</td>     =             <td>XXXXXX XXXXX<br> 
```

和匹配的字符串：

```
<td valign=3D"top">For:</td>     =             <td>XXXXXX XXXXX<br> 
```

但是对于这个字符串：

```
<td valign=3D"top">For:</td>                     <td>YYYYYYY=     YYYYY<br> 
```

它匹配整个 html 文档。我不明白为什么会这样，因为在我`(([a-z]|[A-Z]|=|\\s)+`指定应该有一个`<br>`标签之后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:44:04.257

为非贪婪匹配添加指示的问号：

```
<td valign=3D\"top\">For:</td>(\\s)+(=)?(.|\r\n|\n)+?<td>(([a-z]|[A-Z]|=|\\s)+?)<br>
                                                    ^                         ^ 
```

**编辑：**

此外，您可以简化为字符类而不是使用交替：

```
<td valign=3D\"top\">For:</td>(\\s)+(=)?(.|[\r\n])+?<td>([a-zA-Z=\\s]+?)<br>
                                           ^^^^^^        ^^^^^^^^^^^^ 
```

我唯一的问题是为什么你`\\s`的逃跑了，而你的`\r\n`却没有......

**编辑2：**

使用`*`代替`+`，例如，空格不是强制性的；在这些情况下，非贪婪量词可能总是有用的：

```
<td valign=3D\"top\">For:</td>(\\s)*?(=)?(.|[\r\n])*?<td>([a-zA-Z=\\s]*?)<br>
                                   ^^       ------ ^-     ------------^- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:43:47.023

用正则表达式解析 HTML 是一个非常糟糕的主意。

在这里查看原因： [RegEx 匹配开放标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

即使在 HTML 中解析非常简单的东西，使用 DOM 解析器通常也更干净（更易读）并且更不容易出错。如果您是 REGEX 的新手，则更多

# java - 如何让 schemaspy 看到 mysql 连接器？

> ID：11433644
> 
> 赞同：8
> 
> 时间：2012-07-11T13:22:39.977
> 
> 标签：java, mysql, schemaspy

我刚刚下载了 schemaspy，除了一件事之外它工作得很好。我总是必须使用 -dp 选项指定 mysql 连接器的路径。

如果我不指定它，我会收到此错误：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver

Failed to load driver 'com.mysql.jdbc.Driver'
This entry doesn't point to a valid file/directory: [/mysql/mysql-connector-java-5.1.6-  bin.jar] 
```

路径（符号链接`/usr/share/java/mysql-connector-java-5.1.28.jar`或您拥有的任何版本）是：

```
/usr/share/java/mysql-connector-java.jar 
```

它在 $CLASSPATH 上。

此外，不要期望`-p`提示输入密码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-25T21:49:05.097

我是这样做的.. 将此添加为参数：-dp C:\apache-tomcat-6.0.37\lib\mysql-connector-java-5.1.10.jar 将我的 mysql 驱动程序保存在目标文件夹中。

为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T05:55:25.573

我使用[**SchemaSpy**](http://www.joachim-uhl.de/projekte/schemaspygui/#installation)，一个基于 java 的应用程序，并使用**File-> Store Parameters 存储参数**一次，然后我只需在需要时通过**File -> Load Parameters 加载**它。你可以试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T17:15:04.997

然后使用 java 语句创建一个脚本，并将 mysql-connector 的路径保存为环境变量并将其传递给 -dp。

我遇到了关于 mysql-connector 和 dot 可执行文件的常见问题。如果您将正确的值传递给 -gv，则无需重新启动机器，相信我。我已经安装了 Graphviz，发现 mysql-connector 对 *.jar 文件进行了排序搜索。

以下几行是我执行该语句的方式。

```
java 
-jar schemaSpy.jar 
-t mysql 
-o library 
-host localhost 
-db dummyDB 
-u user
-p user
-dp C:\Oracle\Middleware\Oracle_Home\oracle_common\modules\mysql-connector-java-commercial-5.1.22\mysql-connector-java-commercial-5.1.22-bin.jar 
-gv "C:\Program Files (x86)\Graphviz2.38" 
```

# javascript - 如何使用javascript禁用组合键？

> ID：11433647
> 
> 赞同：2
> 
> 时间：2012-07-11T13:22:51.130
> 
> 标签：javascript, javascript-events

提前感谢您的回复。我想使用 javascript 禁用 IE 的查看源快捷键。要禁用“Ctrl + C”，我正在使用以下函数：

```
function disableCopy() {
     // current pressed key
     var pressedKey = String.fromCharCode(event.keyCode).toLowerCase();
     if (event.ctrlKey && (pressedKey == "c")) {
         // disable key press porcessing
         event.returnValue = false;
     }
} 
```

有人可以建议如何禁用“Alt + V + C”组合吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:27:56.767

每个浏览器都具有查看源代码或网页的内置功能。我们可以做一件事。那就是禁用页面中的右键单击。

要禁用右键单击，请使用以下代码：

```
<SCRIPT TYPE="text/javascript">
function disableselect(e){
return false
}
function reEnable(){
return true
}
//if IE4+
document.onselectstart=new Function ("return false")
//if NS6
if (window.sidebar){
document.onmousedown=disableselect
document.onclick=reEnable
}
</SCRIPT> 
```

**记住一件事。我们可以使用 firebug 或其他一些第三方工具查看此源。所以我们不能100%做到这一点。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:39:33.450

您不应该真正阻止查看代码。为什么？

原因

1.  最终，经过你所有的努力，如果有人确定他仍然可以看到你的代码。

2.  这样做会诽谤您的网站。

3.  你会表现得像一个“菜鸟”，因为通常其他开发人员会看到代码，他们会通过禁用 javascript 来突破你的安全措施。

4.  您的代码中没有敏感信息（我想）可以用来构成威胁。但是，如果您有一些可用于网站的代码，您应该真正考虑删除该代码并确保网站安全。

禁用组合

```
 document.onkeydown = function(e) {
        if (e.altKey && (e.keyCode === 67||e.keyCode === 86)) {//Alt+c, Alt+v will also be disabled sadly.
            alert('not allowed');
        }
        return false;
};​ 
```

任何方法，因为我知道怎么做，我会告诉你。

此处禁用右键单击：

```
function clickIE() {if (document.all) {return false;}} 
function clickNS(e) {if 
(document.layers||(document.getElementById&&!document.all)) { 
if (e.which==2||e.which==3) {return false;}}} 
if (document.layers) 
{document.captureEvents(Event.MOUSEDOWN);document.onmousedown=clickNS;} 
else{document.onmouseup=clickNS;document.oncontextmenu=clickIE;} 
document.oncontextmenu=new Function("return false") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:51:03.877

alt + V + C 是一个非常奇怪的组合。虽然下面的代码可以工作，但它有点骇人听闻。

```
if (event.altKey) {
    if (event.keyCode == 67 && window.prevKey == 86)
        event.preventDefault();
    else if (event.keyCode == 86 && window.prevKey == 67)
        event.preventDefault();
    window.prevKey = event.keyCode
} 
```

# function - 如何将函数分配为Scala中函数的返回类型

> ID：11433652
> 
> 赞同：2
> 
> 时间：2012-07-11T13:23:07.490
> 
> 标签：function, scala, return-type

我对 Scala 很陌生，我遇到了一个问题。

我正在尝试编写一个包含函数队列的类。我希望能够将函数添加到队列中，并且在添加了所有函数后，运行这些函数。本质上构建一个表达式，例如：“function1(function2(function3()))”，然后返回然后进行评估。这是我到目前为止的代码：

```
 class Pipeline() {

    // Queue of functions to run
    private var queue: Queue[ _ => _] = new LinkedList();

    // Add functions to the queue 
    def addFunction(func:_ => _ ): Unit ={
      queue.add(func)
    }

    // Run all the functions in the queue
    def run(): Unit = {
      val function = runHelper(queue.poll(), queue)
      function
    }

    def runHelper(func: _ => _, queue: Queue[_ => _]): _  = {
      // Recursion base case
      if(queue.isEmpty)
        return func
      // Keep building the function recursively
      else
        func(runHelper(queue.poll(), queue))        
    }    
  } 
```

我敢肯定，这里不止一个错误。但现在，我坚持的是 runHelper 函数的返回类型。如您所见，我正在尝试使用 _ 通配符，但这会产生编译错误。我将如何定义该函数将返回一个函数？我是否以一种好的方式来解决这个问题 - 如果不是，请指出我对问题的更合适解决方案的方向。

**编辑1：澄清** 函数的输入和返回类型事先不知道，它们的顺序需要可以动态分配。

**Edit2：更多问题** 我一直试图让 Edmondo1984 建议的代码按照我想要的方式工作，但我似乎无法得到它。

我需要做的是这样的：

```
val func1: String => File = function1
val func2: File => File = function2

var queue = func1

if(runFunc2)
    queue = queue :: func2

queue("exampleString") 
```

我特别需要知道的是如何能够执行“queue = queue :: func2”。由于 :: 返回一个 FunctionQueue，我会想象我可以将它分配给 queue 变量。但话又说回来，我猜是因为变量的第一次初始化导致它具有“String => File”需求。我觉得我在这里有点过头了，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:52:00.130

我更喜欢函数的形式是：`(parameter list) => returnType`.

这是我认为您的代码应该是什么样子的。我的 IDE 喜欢它，但这不能保证：

```
class Pipeline[T]() {

 // Queue of functions to run
 private var queue: util.Queue[ (T) => T] = new util.LinkedList()

 // Add functions to the queue
 def addFunction(func: (T)=> T ) {
   queue.add(func)
 }

 // Run all the functions in the queue
 def run() {
   val function = runHelper(queue.poll(), queue)
   function
 }

 def runHelper(func: (T) => T, queue: util.Queue[(T)=> T ]): (T)=>T = {
   // Recursion base case
   if(queue.isEmpty)
     func
   // Keep building the function recursively
   else
     func compose runHelper(queue.poll(), queue)
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:53:37.887

你可以试试函数组合。比如像这样。

```
val f = (x:Int) => 2 * x
val g = f.compose(f) 
```

如果输入和输出类型不同，您必须注意输入和输出匹配...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T14:03:00.700

您尝试执行的操作是不可能的，因为 _ 是存在类型的占位符：存在但当前不相关的类型：例如，当您想要打印如下列表时可以使用它：

```
scala>  def aMethod(a:List[_]) = println(a.size)
aMethod: (a: List[_])Unit

scala>  val b = List(2,3,4)
b: List[Int] = List(2, 3, 4)

scala>  aMethod(b)
3 
```

这是有效的，因为实际上您不会访问列表中的元素，因此您可以想象您不需要它们的类。

因为 Scala 是一种强类型语言，即编译器检查签名是否在您的代码中得到尊重。Queue[ _ => _] 是从未知类型到未知类型的函数队列，它没有用，因为如果您尝试弹出一个函数并将其应用于输入参数，您将无法验证该输入参数是否与签名匹配。

您尝试做的事情并非易事，您需要以递归方式定义队列。您可能想阅读 Shapeless HLIST implementation，但想法如下：

```
trait FunctionQueue[A,B]{

  def ::[C](newFunction: C => A): FunctionQueue[C,B]

  def apply(a:A):B
}

class FunctionQueueImpl[A,B,C](val f:A=>B, val queue:FunctionQueue[B,C]) extends FunctionQueue[A,C]{

  def apply(a:A) = queue.apply(f(a))

  def ::[D](newFunction: (D) => A):FunctionQueue[D,C] = new FunctionQueueImpl[D,A,C](newFunction,this)
}

object FunctionQueue {
  def EmptyQueue[T]:FunctionQueue[T,T] = new FunctionQueue[T,T] {
    def ::[C](newFunction: (C) => T):FunctionQueue[C,T] = new FunctionQueueImpl[C,T,T](newFunction,this)

    def apply(a: T):T = a
  }

  implicit def functionToQueue[A,B](function:A => B):FunctionQueue[A,B] = new FunctionQueueImpl(function, EmptyQueue[B])
} 
```

现在你可以在 repl 中尝试一下：

```
scala>  import FunctionQueue._
import FunctionQueue._

scala>  val a: Int => Int = _ * 10
a: Int => Int = <function1>

scala>  val b: Double => Int = _.toInt 
b: Double => Int = <function1>

scala>  val c : String => Double = _.toDouble
c: String => Double = <function1>

scala>  val queue = c::b::a
queue: FunctionQueue[String,Int] = FunctionQueueImpl@cccfa5e

scala>  queue("1.25")
res1: Int = 10

scala>  queue("3.25")
res2: Int = 30 
```

我建议阅读 Miles Sabins 的作品以了解更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T15:02:51.753

关于实现，您可以使用一个简单`List`的函数`T => T`（称为 endofunctions）。

现在，在 scalaz 中，您有一个用于此类函数的`Monoid`（由[`Semigroup`](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Semigroup.scala#L163)and构建）的实例。[`Zero`](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Zero.scala#L141)这意味着，您可以编写以下代码：

```
scala> import scalaz._, Scalaz._
import scalaz._
import Scalaz._

scala> val f = ((_:Int) + 6).endo
f: scalaz.Endo[Int] = <function1>

scala> val g = ((_:Int) * 4).endo
g: scalaz.Endo[Int] = <function1>

scala> val h = (-(_:Int)).endo
h: scalaz.Endo[Int] = <function1>

scala> f :: g :: h :: nil
res3: List[scalaz.Endo[Int]] = List(<function1>, <function1>, <function1>)

scala> .asMA.sum
res4: scalaz.Endo[Int] = <function1>

scala> f(g(h(1)))
res5: Int = 2

scala> res4(1)
res6: Int = 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T13:35:08.957

您可以像这样指定函数的类型：

```
Function[T, T] 
```

或者

```
T => T 
```

假设你的函数的输入和输出是相等的，它们确实应该是相等的。当然，您必须指定或替换`T`。

如果你真的有可变输入-输出，整个方案会变得复杂得多。

# string - 如何在dos删除某个字符之前的字符串？

> ID：11433653
> 
> 赞同：2
> 
> 时间：2012-07-11T13:23:11.240
> 
> 标签：string, batch-file, dos

假设我有文件名 text.txt 并包含几行。每行以 dayname 开头并以“/”字符结尾，然后添加路径。另一方面，我只需要每行的文件名而不是路径。因此，我需要一些东西来以这种方式转换文件：

```
mon/C:\stt\test_file.abc
sat/C:\Documents and Settings\alguri\Desktop\test_file2.txt
fri/C:\sat\new_folder2\file3.jpg 
```

至

```
mon/test_file.abc
sat/test_file2.txt
fri/file3.jpg 
```

我在 dos 命令中需要此代码。我尝试了一些代码，但无法以不同的方式解析字符串。因为路径名可以有多个“\”字符。

例如，如果我知道一行中只有两个“\”字符。我可以做类似的事情：

```
for /f "tokens=1,4 delims=/\" %%a in (text.txt) do (
echo %%a
    ) 
```

这只会为第 1 行给出正确答案，即“test_file.abc”但是所有其他行都有不同数量的“\”字符。你觉得我能怎么处理这个？

我想到的一种解决方案是计算“\”的数量并设置令牌第二个参数来决定我需要哪一部分。但我可以做到。此外，令牌值可能不会像我想的那样动态设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:42:30.717

您可以使用参数修饰符。

```
for /f "tokens=1,* delims=/" %%A in (test.txt) do (
    echo %%A/%%~nxB
) 
```

有关修饰符的更多信息，您可以阅读[%~dp0 是什么意思，它是如何工作的？](https://stackoverflow.com/a/5034119/463115)

# silverlight - Pex Silverlight 5 兼容吗？

> ID：11433658
> 
> 赞同：1
> 
> 时间：2012-07-11T13:23:17.300
> 
> 标签：silverlight, pex

我试图让 pex 与 Silverlight 5 环境（框架 4.0）一起工作，但我无法做到，因为 Pex 总是试图找到旧版本 v2 的系统引用（System.Windows、System.Net 等） .5.0 代替了正确的 v5.0.5

有什么线索吗？

谢谢和问候，奥斯卡

# ios - 如何进行 facebook 风格转换

> ID：11433660
> 
> 赞同：6
> 
> 时间：2012-07-11T13:23:22.880
> 
> 标签：ios, ios5, uiviewcontroller, core-animation, uiviewanimationtransition

想要实现类似于 facebook 和许多其他应用程序中使用的视图控制器转换，附加了快照。它需要使用 CoreAnimation 框架还是在工具包中可用？

![在此处输入图像描述](../Images/dc26c94662d18bac2c87659f6fa4f734.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:03:28.873

你必须使用CoreAnimation，除非你想导入有人建议的第3部分框架，但是使用CoreAnimation非常简单，我建议你学习它，因为它非常强大。这是给你一个想法的最简单的方法。一旦掌握了它，您可以自己更好地构建它，以满足您的需求：

在您的视图控制器中有 2 个视图：

```
@interface yourViewController : UIViewController {
    // The facebook view in the example, this will be the view that moves.
    // Init this view with x=0 and let it cover the whole screen.
    IBOutlet UIView *topView; 

    // The fb menu in the example
    // Init this view so that it stays behind the topView.
    IBOutlet UIView *bottomView; 

    BOOL menuVisible; // init to false in viewDidLoad!
} 
```

在界面生成器中创建它们，或者通过代码或您习惯的方式创建它们。让它们相互重叠，这样你就只能看到 topView，而让 buttomView 留在它后面。

当用户按下按钮显示菜单时：

```
-(IBAction)menuButtonPressed:(id)sender {
    // Set up animation with duration 0.5 seconds
    [UIView beginAnimations:@"ToggleMenu" context:nil];
    [UIView setAnimationDuration:0.5];

    // Alter position of topView

    CGRect frame = topView.frame; 

    if (menuVisible) {
        frame.origin.x = 0;
        menuVisible = NO;
    } else {
        frame.origin.x = 300; //Play with this value
        menuVisible = YES;
    }

    topView.frame = frame;   

    // Run animation
    [UIView commitAnimations];
} 
```

当然，您应该为“facebook 视图”和“菜单视图”等实现自己的 UIView 子类，并在上面的示例中用于 topView 和 bottomView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:30:23.157

看看这个，它可能会给你一个起点： [https ://github.com/Inferis/ViewDeck/](https://github.com/Inferis/ViewDeck/)

# java - 删除jsf数据表中的行

> ID：11433666
> 
> 赞同：1
> 
> 时间：2012-07-11T13:23:52.337
> 
> 标签：java, hibernate, jsf, jakarta-ee, jsf-2

我想删除 jsf 数据表中的一行。我正在使用jsf、hibernate和spring。但删除操作不起作用。Customermanagedbean.java

```
@ManagedBean(name="CustomerMB")
@RequestScoped
public class Customermanagedbean implements Serializable{
@ManagedProperty(value="#{CustomerBoImpl}")
ICustomerBo customerBoImpl;
List<Customer> CustomerList;
public int customerId;
public String name;
public String address;
public String createdDate;

public ICustomerBo getCustomerBoImpl() {
    return customerBoImpl;
}
public void setCustomerBoImpl(ICustomerBo customerBoImpl) {
    this.customerBoImpl = customerBoImpl;
}

public List<Customer> getCustomerList() {
    CustomerList=new ArrayList<Customer>();
    CustomerList.addAll(getCustomerBoImpl().findAllCustomer());

    return CustomerList;
}

public void setCustomerList(List<Customer> customerList) {
    CustomerList = customerList;
}
public String deleteCustomer(Customer customer){
    getCustomerBoImpl().deleteCustomer(customer);

    return "";

}// getter and setter method 
```

CustomerBoImpl.java

```
@Transactional(readOnly = true)
public class CustomerBoImpl implements ICustomerBo{

    ICustomerDao customerDaoImpl;

    public ICustomerDao getCustomerDaoImpl() {
        return customerDaoImpl;
    }

    public void setCustomerDaoImpl(ICustomerDao customerDaoImpl) {
        this.customerDaoImpl = customerDaoImpl;
    }
@Transactional(readOnly = false)
@Override
    public void deleteCustomer(Customer customer){
        getCustomerDaoImpl().deleteCustomer(customer);
    }

@Override
    public List<Customer> findAllCustomer(){

        return getCustomerDaoImpl().findAllCustomer();
    }
} 
```

CustomerDaoImpl.java

```
public class CustomerDaoImpl implements ICustomerDao{

    private SessionFactory sessionFactory;
    public SessionFactory getSessionFactory() {
        return sessionFactory;}
    public void setSessionFactory(SessionFactory sessionFactory) {
         this.sessionFactory = sessionFactory;
    }
public void deleteCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().delete(customer);
    }

    public List<Customer> findAllCustomer(){
        sessionFactory.openSession();

        List list = getSessionFactory().getCurrentSession

().createQuery("from Customer").list();
        return list;

    }
} 
```

默认的.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <h:head>
        <h:outputStylesheet library="css" name="table-style.css"  />
    </h:head>

    <h:body>

        <h:dataTable value="#{CustomerMB.getCustomerList()}" var="c"
                styleClass="order-table"
                headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row"
            >

            <h:column>
                <f:facet name="header">
                    Customer ID
                </f:facet>
                    #{c.customerId}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Name
                </f:facet>
                    #{c.name}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Address
                </f:facet>
                    #{c.address}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Created Date
                </f:facet>
                    #{c.createdDate}

            </h:column>
             <h:column>

    <f:facet name="header">Action</f:facet>

    <h:commandButton value="Delete" action="#{CustomerMB.deleteCustomer(c)}" />

           </h:column>

        </h:dataTable> 
```

怎么了？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:14:50.553

Check your CustomerDaoImpl class's deleteCustomer method. Your may try as like as below sample

```
 public void deleteCustomer(Customer customer){
       getHibernateTemplate().delete(customer);
   } 
```

In your CustomerBoImpl class, change this

```
 @Autowired
   ICustomerDao customerDaoImpl; 
```

The workaround is create a custom class (CustomHibernateDaoSupport) and extends the “HibernateDaoSupport” and auto wire the session factory, and your DAO classes extends this class

```
 public abstract class CustomHibernateDaoSupport extends HibernateDaoSupport{    
          @Autowired
          public void anyMethodName(SessionFactory sessionFactory){
              setSessionFactory(sessionFactory);
          }
      } 
```

# database - 避免使用 codeigniter 活动记录在数据库中插入重复值

> ID：11433667
> 
> 赞同：1
> 
> 时间：2012-07-11T13:23:52.863
> 
> 标签：database, insert, duplicates

我每 5 分钟在一个正在提取 xml 提要的文件上运行一次 cronjob，目前它只是将该提要添加到数据库中，所以我可能会低于。

```
title, this is a new title
title, this is another title 
```

但我遇到的问题是当 cron 再次运行时，我低于

```
title, this is a new title
title, this is another title
title, this is a new title
title, this is another title 
```

当它再次运行时

```
title, this is a new title
title, this is another title
title, this is a new title
title, this is another title
title, this is a new title
title, this is another title 
```

等等.....

我只希望它插入一条记录，如果它们不是已经在数据库中具有相同标题的记录，因此我的 cron 作业将继续运行，当它注意到不同的标题时，它会将其插入到数据库中。

我尝试了很多单独的选项，例如 not_like 等。

有人能告诉我最好的方法吗？？？

谢谢 ;）

我设法用以下方法做到了，但绝对不是最好的方法

```
 function addResults($data){

   $this->db->select('title');
       $this->db->from('articles');
       $this->db->where('title = ' . "'" . $data['title'] . "'");
       //$this->db->limit(1);
       $query=$this->db->get();
       echo $query->num_rows();
       if($query->num_rows()){

   }else{
        echo 'New Record ' . $data['title'];
        $this->db->set('date', 'NOW()', FALSE); 
            $this->db->insert('articles', $data);
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:57:19.077

我知道我参加聚会有点晚了，但这里有一个更好的方法：

```
function addResults($data)
{
    $result = $this->db->get_where('articles', array('title ' => $data['title']));
    $inDatabase = (bool)$result->num_rows();

    if (!$inDatabase)
    {
        echo 'New Record ' . $data['title'];
        $this->db->set('date', 'NOW()', FALSE); 
        $this->db->insert('articles', $data);
    }
} 
```

# java - 如何防止操作修改 cookie？

> ID：11433670
> 
> 赞同：0
> 
> 时间：2012-07-11T13:23:53.907
> 
> 标签：java, http, cookies, playframework, playframework-1.x

我想确保我的方法不会修改某些 cookie，例如 PLAY_FLASH 和 PLAY_SESSION（为什么？因为[bug 785](https://play.lighthouseapp.com/projects/57987-play-framework/tickets/785-lost-session-information-working-with-suspended-requests)）。

我试过这个：

```
// This method should never modify any PLAY cookie.
public static void doNothingPost() throws InterruptedException {
    logger.info("Done nothing");

    response.cookies.remove("PLAY_FLASH");
    response.cookies.remove("PLAY_ERRORS");
    response.cookies.remove("PLAY_SESSION");

    ok();
} 
```

好吧，事实证明这`respone.cookies.remove()`会主动删除一个cookie（SetCookie with a past expiry date）。我如何告诉 play 不要为特定的 cookie 发送任何 SetCookie 标头？（还是全部？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:24:58.887

*   t0 -> 调用 setSession
*   t5 -> 调用 doNothing
*   t10 -> setSession 返回
*   t15 -> doNothing 返回

    ```
    public static void setSession(String uuid){
        Cache.add(uuid, "guven");
        response.setCookie("username", "guven");
        await(1000);
        ok();
    }

    public static void doNothing(String sameUUIDWithSetSessionParameter){
        String username = Cache.get(sameUUIDWithSetSessionParameter, String.class);
        Cache.delete(sameUUIDWithSetSessionParameter);
        Logger.info("dn: " + username);
        await(1000);
        ok();
    } 
    ```

如果这些连续的 ajax 调用没有不同的会话 id，那么忘记 uuid 参数，只使用`session.getId()`从`Cache`

# c# - 如何围绕数据库中的空值设计类？

> ID：11433673
> 
> 赞同：7
> 
> 时间：2012-07-11T13:23:58.580
> 
> 标签：c#, class-design

在我的课堂上，我有这些设置器/获取器：

```
public int Id { get; set; }
public String ProjectName { get; set; }
public String ProjectType { get; set; }
public String Description { get; set; }
public String Status { get; set; }
public DateTime StartDate { get; set; } 
```

DateTime 是不可为空的类型。因此，当我从传递给类构造函数的旧数据库中检索数据时，当 StartDate 为空时，我会收到错误消息。

我应该如何围绕这个进行设计？

谢谢埃里克

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T13:24:45.950

从 .NET 2.0 开始，您可以使任何结构为空。

```
 public DateTime? StartDate { get; set; } 
```

注意`?`. 它是一个编译器操作符`Nullable<DateTime>`。

将其从阅读器中拉出时，您可以这样做

```
 obj.StartDate = reader["StartDate"] as DateTime?; 
```

以下是有关可空类型的更多信息：http: [//www.codeproject.com/Articles/275471/Nullable-Types-in-Csharp-Net](http://www.codeproject.com/Articles/275471/Nullable-Types-in-Csharp-Net)

# php - 我想在共享主机上运行 PHP 守护程序？

> ID：11433674
> 
> 赞同：0
> 
> 时间：2012-07-11T13:24:03.947
> 
> 标签：php, daemon

如何？是否可以？如果不是，我的选择是什么？

可能是python守护进程？

编辑：我的目标是在互联网（在线）中使用自定义协议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T13:30:38.980

这里有两个方面需要考虑：

1.  您的共享主机提供商是否允许您运行守护程序？很可能不是，在这种情况下，cron 任务可能是一种替代解决方案。
2.  如何在技术上创建一个守护进程？有一个[PEAR 包](http://pear.php.net/package/System_Daemon)，至少对于 Linux，它可以将脚本转换为守护程序所需的一切。

现在，一些 webhosters 甚至不提供 cronjobs，在这种情况下，使用外部服务（如[setcronjob](https://www.setcronjob.com/)）配置为定期在您的网站上调用 php 脚本可以用作切换主机的最后替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:27:50.620

几乎所有共享主机站点都会终止运行时间超过一定时间（通常为 30 秒）的任何​​进程。

您最好的选择可能是一个 cron 任务，因为这将在每次指定时运行您的脚本一次。

也就是说，如果您正在做一些非常需要 PHP 守护程序的事情，那么您可能应该使用共享主机并首先用尽所有其他选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T18:57:41.843

如果您可以运行后台任务或 Cron 作业，您可能可以运行守护程序。他们可能对进程可以运行多长时间有限制，但在大多数情况下，如果他们关心这一点，他们一开始就不会给你访问权限。

我建议使用[https://github.com/shaneharter/PHP-Daemon](https://github.com/shaneharter/PHP-Daemon)而不是 System_Daemon。这是一个更好的抽象，并且提供了一种在 PHP 中构建多进程应用程序的真实方法，而无需自己将它们拼接在一起。

# css - 在 IE8 及以下版本中背景图像居中/固定的问题

> ID：11433677
> 
> 赞同：4
> 
> 时间：2012-07-11T13:24:14.297
> 
> 标签：css, internet-explorer-8, background-image

我在以下网址发布了一个网站：[http ://semep.com.br/Clientes](http://semep.com.br/Clientes)

我在使用 IE8 和低于 background-image 属性时遇到问题

## IE8

![IE8 中的背景图像](../Images/bbd4fe77ec2439c0dfcaf5012e26b92a.png)

> 完整图片：http: [//i.stack.imgur.com/fRAHd.jpg](https://i.stack.imgur.com/fRAHd.jpg)

## IE9

![IE9 背景图片](../Images/ef64d8093d4f108128b4f25414702ad4.png)

> 完整图片：http: [//i.stack.imgur.com/UdvWw.jpg](https://i.stack.imgur.com/UdvWw.jpg)

**在 IE9 和任何其他浏览器中，一切正常！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:27:56.780

而不是使用：

```
background-position: center; 
```

采用：

```
background-position-x: center;
background-position-y: 0; 
```

或者：

```
background-position: center top; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:32:41.127

使用它：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='YOURBACKGROUND.jpg', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='YOURBACKGROUND.jpg', sizingMethod='scale')"; 
```

# iphone - 对包含 A 类对象的 NSMutabale 数组进行排序

> ID：11433680
> 
> 赞同：0
> 
> 时间：2012-07-11T13:24:26.800
> 
> 标签：iphone, nsmutablearray, sorting

我有一个“Place”类对象的可变 Arra。

我想根据对象“地名”的属性对其进行排序..

所以我看到了一些链接...但无法编写正确的代码...

我在用

```
-[NSMutableArray sortUsingSelector:] 
```

我能得到一些如何使用这个的例子吗？-[NSMutableArray sortUsingSelector:]

请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:31:31.070

我会使用一个[`NSSortDescriptor`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)：

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCompare:)];
[mutableArray sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]]; 
```

我[`NSSortDescriptor`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)是调用`localizedCompare:`on `NSString`，我假设 name 属性是一个 NSString。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:45:28.477

如果您需要不区分大小写的比较，请使用，

```
NSSortDescriptor *sorter = [[[NSSortDescriptor alloc]
          initWithKey:@"Place Name"
          ascending:YES
          selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];
NSArray *sortDescriptors = [NSArray arrayWithObject: sorter];
[yourObjectArrayt sortUsingDescriptors:sortDescriptors]; 
```

# internet-explorer - powershell 在信息亭模式下打开 Internet Explorer，30 分钟后终止

> ID：11433686
> 
> 赞同：0
> 
> 时间：2012-07-11T13:24:55.223
> 
> 标签：internet-explorer, powershell

我想使用powershell v1.0，打开Internet Explorer并以kiosk模式转到某个网址，等待30分钟然后关闭Internet Explorer的所有实例。

到目前为止，我有以下 ps 命令，它将以 kiosk 模式打开 IE 并转到网址

```
Write-Host "Starting IE"
C:\Progra~1\Intern~1\iexplore.exe -k http://google.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:35:56.850

按照您的代码：

```
Write-Host "Starting IE"
C:\Progra~1\Intern~1\iexplore.exe -k http://google.com
start-sleep -seconds 1800
get-process iexplore -ErrorAction silentlycontinue | stop-process -ErrorAction silentlycontinue 
```

# android - 在android中点击短信时启动我的应用程序

> ID：11433689
> 
> 赞同：0
> 
> 时间：2012-07-11T13:24:59.780
> 
> 标签：android, sms

> **可能重复：**
> [如何检测用户何时启动另一个应用程序？（安卓）](https://stackoverflow.com/questions/11346557/how-to-detect-when-the-user-launches-another-app-android)

我想在android中做**短信储物柜。**当我单击收件箱或对话时，如果密码正确，则**必须出现第一个锁定屏幕，然后才应打开收件箱。**我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:31:17.110

为了实现这一点，您必须构建自己的消息传递应用程序。并让您的用户使用该设备而不是设备上库存的设备。

官方 API 无法让一个应用程序知道另一个应用程序已启动或已采取任何特定操作（即在 sms 中打开对话），除非该特定应用程序广播它正在执行的操作（普通的 sms 不这样做）。

# java - 水平方向动态拉伸JRDesignTextField

> ID：11433692
> 
> 赞同：1
> 
> 时间：2012-07-11T13:25:16.153
> 
> 标签：java, jasper-reports

我正在使用 JasperReport API 动态生成我的报告。我正在使用 JRDesignTextField 类。这个类有一个方法setStretchWithOverflow(boolean)。如果我们希望文本字段在其文本不适合一行时垂直拉伸，请将其参数设置为 true。

但是当我想动态地水平拉伸我的字段时我应该怎么做。谢谢。

# android - Android - Google Play 在 3.7.13 版中停止更新预装应用程序

> ID：11433693
> 
> 赞同：0
> 
> 时间：2012-07-11T13:25:18.047
> 
> 标签：android, google-play

我们在使用最新版本的 Google Play Android 应用时遇到问题。这是问题：

我们为我们的一位客户（手机运营商）创建了几个“存根”应用程序，以预安装在他们销售的设备上。所有 stub 所做的就是通过使用带有 url market://?default=packagename 的 Intent 来调用 Play 商店（之前的 Android Market）上的应用程序页面。存根具有相同的包名称，并使用与完整应用程序相同的证书进行签名，但使用以前的版本代码。正如我们预期的那样，一旦商店页面打开，就会显示“更新”按钮，因为 Google PLay 能够检测到该应用程序已经安装，但市场上有新版本可用。

最新版本的 Google Play 应用程序 (3.7.13) 不再显示“更新”按钮，而是显示“打开”按钮。好像 Google Play 无法识别应用程序有更新。仅当该应用程序之前从未在该用户帐户上下载时才会发生这种情况。Google Play 处理应用更新的方式有什么变化吗？

有没有其他方法可以让我们在设备上预装应用程序，这些应用程序可以由 Google Play 获取和更新，就好像它是由用户下载的一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:38:19.657

我们遇到了同样的问题，而且（对我们而言）似乎是 Google Play 同步问题。如果您下载了一些应用程序（因此 Google Play 服务器可以识别该设备）并等待一段时间（实际上是几个小时），嵌入式应用程序将作为已安装的应用程序出现在 Google Play 服务器上，并且更新将从 Google Play 应用程序运行。

看起来 Google Play 的新版本需要很长时间才能与服务器同步并达到一致的状态.. 让用户感到非常困惑......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T14:31:50.720

我遇到了这个问题，因为我通过直接从 SDK 启动它来测试存根。当您这样做时，该应用程序将不会在 Google Play 上被视为同一版本。因此，Play商店将显示安装按钮。您需要生成一个签名的 APK 并将其安装在手机上，以便 google play 将其视为商店中的同一个应用程序。

# c# - 没有有效的 RoutedEventHandler

> ID：11433698
> 
> 赞同：0
> 
> 时间：2012-07-11T13:25:26.293
> 
> 标签：c#, wpf, xaml

```
<Style TargetType="ComboBoxItem" x:Key="ComboBoxItemStyle">
            <EventSetter Event="Selected" Handler="status_SelectionChanged"/>
</Style> 
```

`status_SelectionChanged`方法：

```
public void status_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    MessageBox.Show("1");
} 
```

> 错误：无效 System.Windows.RoutedEventHandler

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:28:58.950

我相信您的 SelectionChanged 方法签名应该使用`RoutedEventArgs e`而不是`SelectionChangedEventArgs e`

[这是显示 RoutedEventHandler 签名的 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.routedeventhandler.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:30:06.377

尝试

```
private void status_SelectionChanged(object sender, RoutedEventArgs e) 
```

请参见[ListBoxItem.Selected](http://ListBoxItem.Selected)

# visual-studio-2010 - 如何在 Visual Studio 中编辑上网本上的源代码并在台式计算机上构建（和调试）项目？

> ID：11433709
> 
> 赞同：3
> 
> 时间：2012-07-11T13:26:16.637
> 
> 标签：visual-studio-2010, remote-debugging

我有一台功能强大的台式电脑和一台上网本，通过 wifi 共享同一个网络。我希望能够在我的上网本上进行更改的台式计算机构建项目（因为台式计算机功能更强大，并且比上网本更快）。

我考虑过使用一些远程观察和控制工具（如 Teamviewer 或 Radmin），但它们最重要的缺点是文本编辑速度慢（从上网本传输到台式电脑并返回图像需要一些时间）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:52:47.987

如何在 Cygwin 中安装一个 SSH 恶魔，[http:](http://www.cygwin.com) //www.cygwin.com，然后使用 MSBuild 或 devenv.com 在命令行上构建您的项目？

缺点当然是错误会打印到 SSH 控制台，您需要手动转到上网本上 IDE 中的源代码行。

# ajax - 通过 ajax 进行 JSF2 导航

> ID：11433711
> 
> 赞同：0
> 
> 时间：2012-07-11T13:26:18.150
> 
> 标签：ajax, jsf, navigation

我刚刚在[链接](https://stackoverflow.com/questions/5685354/partial-page-update-when-navigating-primefaces-ajax)之前看到了这篇文章。

我试图在此基础上建立一个示例项目。只需用 jsf commandButton 替换 primeface 按钮。见下文：

模板.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core"  
  xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <!-- Links to CSS stylesheets... -->
    <title>title</title>
</h:head>

<h:body>
    <div id="wrapper">
        <div id="header">header</div>
        <script>alert("test");</script>
        <h:panelGroup id="content">
            <ui:insert name="content">
                Sample content.
            </ui:insert>
        </h:panelGroup>
    </div>

    <div id="footer">footer</div>
</h:body> 
```

page1.xhtml 看起来像这样：

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"  
            template="./template.xhtml">

<ui:define name="content">
    <h2>Page 1</h2>

    <h:form>
        <p>bla</p>
        <h:commandButton value="page2" action="page2">
            <f:ajax render=":content"></f:ajax>
        </h:commandButton>
    </h:form>
</ui:define> 
```

最后 page2.xhtml 看起来像这样：

```
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:f="http://java.sun.com/jsf/core"  
            template="./template.xhtml">

<ui:define name="content">
    <h2>Page 2</h2>

    <h:form>
        <p>blabla</p>
        <h:commandButton value="page1" action="page1">
            <f:ajax render=":content"></f:ajax>
        </h:commandButton>
    </h:form>
</ui:define> 
```

如您所见，我在 template.xhtml 上有一个简短的 javascript。我现在希望从 page1 更改为 page2 时不调用此 javascript。所以我认为使用这个 ajax 导航只是更新内容部分，并且不会在页面更改时调用脚本。

但是当我单击 commandButton 时，脚本将被执行。我看了一下萤火虫，发现洞体部分更新了，而不仅仅是内容 div。

我做错了什么？是否可以使用这种模板技术仅在内容部分进行导航？还是我必须寻找另一种方法来解决这个问题？

我正在使用tomcat和myfaces。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:19:05.790

我不认为这是可能的。如果您将视图从 page1 更改为 page2，则基本上 page2 是从模板开始构建的。

如果您希望脚本为 page1 运行，则将其包含在插入到模板中的 page1 的内容中，并且不要将其包含在 page2 中，这样您将仅在主模板中不需要的地方调用脚本。

# php - 迁移后测试数据（HTML -> PHP -> SQL）

> ID：11433715
> 
> 赞同：3
> 
> 时间：2012-07-11T13:26:31.893
> 
> 标签：php, mysql, html, sql

在将数据从 HTML 通过 PHP 解析为 SQL 之后，您是否可以建议任何有效的测试方法来测试数据？

为了给出上下文，我正在将按顺序编号的 HTML 页面（包含单个表）迁移到 MySQL 表中。Domdocument 和 XPath 被用于以 DAO 样式提取数据，并且输出看起来是一致的。在 HTML 和数据库之间进行检查的最佳方法是什么（随机选择、顺序、一些编程算法......）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:42:32.720

也许您可以使用 diff 算法将原始 HTML 与解析后的文本进行比较并计算百分比。由于 html 标签等原因，它显然永远不会 100% 匹配，但您可以找出可接受的范围并以这种方式测试您的数据。

我认为随机抽样是最好的，除非你有时间和处理能力来测试一切。

这是diff算法的PHP实现=> [http://paulbutler.org/archives/a-simple-diff-algorithm-in-php/](http://paulbutler.org/archives/a-simple-diff-algorithm-in-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:42:57.963

因为您无法访问原始数据而只能访问已解析的 HTML，所以您所能做的就是两次完全相同的操作并进行比较。

您还可以根据提取的数据创建一个新的 DOM 文档并比较 DOM。通过这种方式，您可以测试以某种方式错误导入的数据。

但是所有这些方法都和你用来提取的方法一样可靠。并且可能不值得服务器负载来测试每个导入。

随机测试发现错误的成功率非常低，而且您可能比人眼更好。

您至少可以构建某种注意到奇怪行为的概率算法。

fe 如果你要解析一个每日新闻 Html 页面，并且在特定的一天你只得到 3 个新闻条目，那么每页的平均新闻条目应该在 10 条左右。你当然可以调整这些边距。

# android - Android：一个 findViewById() 方法，它返回我们不需要转换的值

> ID：11433722
> 
> 赞同：3
> 
> 时间：2012-07-11T13:26:54.053
> 
> 标签：android, findviewbyid

由于我厌倦了为`Activity.findViewById()`返回 raw的 EVERY 编写转换运算符`View`，我终于尝试[了 Internet 建议的一种方法](http://biginteger.blogspot.jp/2011/04/better-findviewbyid-that-doesnt-require.html)。

```
public abstract class MyActivity extends Activity {

    @SuppressWarnings("unchecked")
    protected <T extends View> T findViewByID(int id) {
        return (T) this.findViewById(id);
    }
} 
```

**请注意**，这没有重载（最后一个“D”是大写的）。编译器说我们不能`View`转换成`T`. 我的实施有什么问题吗？奇怪的是，这个建议在英文网站上几乎没有出现（例如，甚至在我们可爱的 Stack Overflow 中），但上面发布的网站是个例外。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:38:52.680

这在我的测试项目中运行良好。没有编译器错误： ![截屏](../Images/b763091d36bd697520a276edcbe93b83.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:54:48.500

老实说，这种方法为下一个 Android 维护者（他们将习惯于转换方法）增加了一些微妙的复杂性开销，以便在代码文件中保存一些字符。

我建议以传统方式投射视图，或者选择像[Roboguice](http://code.google.com/p/roboguice/wiki/SimpleExample?tm=6)这样的基于反射的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-12T12:50:46.950

我通过使用自定义 eclipse-builder 解决了这个问题，该构建器为每个布局文件生成带有引用的类，因为：

*   它是类型安全且易于使用的
*   RoboGuice 和所有其他基于反射的 API 在 Android 上都非常慢。

在我看来，这是解决这个问题的最干净和最有效的方法。

在这里查看我的构建器要点：[https ://gist.github.com/fab1an/10533872](https://gist.github.com/fab1an/10533872)

**布局：test.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/text2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/text1" />

    <ScrollView
        android:id="@+id/scroll"
        android:layout_width="match_parent"
        android:layout_height="350px"
        android:layout_below="@id/text2"
        android:layout_marginTop="50px" />

</merge> 
```

**用法：TestView.java**

```
public final class TestView extends RelativeLayout {

    //~ Constructors ---------------------------------------------------------------------------------------------------
    private final ViewRef_test v;

    public TestView(final Context context) {
        super(context);

        LayoutInflater.from(context).inflate(R.layout.test, this, true);
        this.v = ViewRef_test.create(this);

        this.v.text1.setText();
        this.v.scroll.doSomething();
    }
} 
```

**生成的文件（在`gen/`）：ViewRef_test.java**

```
package org.somecompany.somepackage;

import android.view.*;
import android.widget.*;
import java.lang.String;

@SuppressWarnings("unused")
public final class ViewRef_test {

    public final TextView text1;
    public final TextView text2;
    public final ScrollView scroll;

    private ViewRef_test(View root) {
        this.text1 = (TextView) root.findViewById(R.id.text1);
        this.text2 = (TextView) root.findViewById(R.id.text2);
        this.scroll = (ScrollView) root.findViewById(R.id.scroll);
    }

    public static ViewRef_test create(View root) {
        return new ViewRef_test(root);
    }

} 
```

# redirect - 如何将所有 php 请求重定向到不同的子域

> ID：11433724
> 
> 赞同：1
> 
> 时间：2012-07-11T13:26:57.340
> 
> 标签：redirect, apache2, subdomain

我有一个用 Rails 重写的应用程序。旧应用程序在 php 中。

我需要将所有 php 请求重定向到子域 old.example.com（我已将旧应用程序放在那里运行），以便旧链接仍然有效。我相信所有链接中都有一个“.php”，而我的新网址都没有。所以它可以用作重定向的条件。

我计划使用 apache RedirectMatch。所以像：

```
RedirectMatch \.php http://old.example.com 
```

应该很近。我相信。我只是不知道如何将请求路径传递给重定向规则。

或者如果有人有更好的想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:33:06.677

使用 Apache mod rewrite，您将使用以下内容：

```
RewriteEngine On
RewriteBase /
RewriteRule ^.*\.php.*$ http://old.example.com/index.php [R=301,NC] 
```

如果您想在重定向 URL 中实际插入他们试图访问的页面：

```
RewriteEngine On
RewriteBase /
RewriteRule ^/?(.*)\.php.*$ http://old.example.com/$1.php [R=301,NC] 
```

`$1`将在括号中插入与正则表达式匹配的任何内容。

对于 GET 参数：

```
RewriteEngine On
RewriteBase /
RewriteRule ^/?(.*)\.php(.*)$ http://old.example.com/$1.php$2 [R=301,NC] 
```

# python - 将 TBB 与 OpenCV 和 Python (Eclipse) 一起使用

> ID：11433728
> 
> 赞同：1
> 
> 时间：2012-07-11T13:27:15.013
> 
> 标签：python, windows, eclipse, opencv, tbb

我正在尝试创建自己的 Haar Cascade xml 文件以用于对象识别。通过遵循本[教程](http://nayakamitarup.blogspot.in/2011/07/how-to-make-your-own-haar-trained-xml.html)，我设法让它工作。但是，创建 xml 文件需要花费大量时间，显然它可能会持续数周（两天后我取消了自己的尝试——它远未完成）。

然后我遇到了[这个小组](https://groups.google.com/forum/?fromgroups#!topic/android-opencv/wgcNL-PfGpM)，似乎可以通过使用[TBB](http://www.threadingbuildingblocks.org/)（线程构建块）将这个过程从 3 周缩短到 30 分钟。这将通过利用系统中的所有内核来加快进程。

问题是要使用 TBB，您需要从源代码构建 OpenCV，这是我没有经验的。我正在关注本[教程](http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html)，但我并不真正了解我在做什么。

我将尝试描述我的烦恼：

1.) 几乎所有教程都提到使用 Visual Studio 构建和配置 OpenCV。这是否意味着这个 OpenCV + TBB 设置只能在 Visual Studio IDE 中工作，还是我仍然能够在 Eclipse 中进行实际的 Python + OpenCV (+TBB) 开发？

2.) 最后，上述教程解释说，您可以创建一个 .exe 文件以在其他系统上安装新版本的 OpenCV。如果这很简单，为什么没有人提供这样的 exe (OpenCV + TBB) 可用？

我希望这是有道理的，我是从源代码构建库的新手，因为为了方便起见，我通常坚持使用安装文件。

任何关于如何让 TBB 与 OpenCV 和 Python 一起工作的建议将不胜感激，甚至只是对过程中使用的概念进行一些澄清。

额外的：

我正在使用 Windows 7 64 位、Python 2.7、Eclipse Indigo。我的计算机上确实安装了 Visual Studio 2010（显然我需要一个 C 编译器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:05:14.957

Eclipse 使用 mingw GCC 编译器？在这种情况下，您只需进行 mingw 构建，生成的二进制文件就可以工作。

在任何情况下，构建过程只是运行 cmake-gui 然后在生成的 makefile 上运行 make 或 nmake。所有教程都是针对 VS 的原因是 VS 和 Windows 用户比 gcc/linux 用户更不习惯从头开始构建项目

我不知道 TBB 的条款是否阻止它被分发 - 但它确实获得了很多处理器特定的优化，因此 opencv 可能必须为不同的 CPU 构建 N 个版本

# git - 为什么 git pull origin master 不起作用，但 git pull 起作用？

> ID：11433731
> 
> 赞同：6
> 
> 时间：2012-07-11T13:27:41.940
> 
> 标签：git, branch, git-pull

所以今天早上我遇到了一个特殊的问题，我想知道社区是否可以帮助我解决这个问题。`git pull origin master`因此，当我想从远程主副本中获取和合并项目更改并将它们带到我的本地主副本时，我一直在这样做。

不过最近我遇到了一些合并问题，所以我做了一个实验——
我做了一个`git pull origin master`像往常一样的实验，得到的消息是*“已经是最新的”。*

然后我做了一个正常的`git pull`工作，然后看到我所有的同事都发生了变化，并与我当地的 master 分支合并。

为什么 git pull origin master 不起作用，但 git pull 起作用？

我想知道由于我发现的这个怪癖，我没有看到多少变化。我已经做了一些研究以找出差异是什么，但是当我看到更改被提取并合并到我的之前使用该方法进行分支。

想法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:36:05.083

听起来您当地的分支机构没有跟踪您的想法。尝试发出`git remote show origin`并检查“为'git pull'配置的本地分支：”部分。`git pull`根据手册页，没有规范将默认来自当前分支的“远程”和“合并”配置：

> 和 的默认值是从 git-branch(1) --track 设置的当前分支的“远程”和“合并”配置中读取的。

我敢打赌，您为跟踪配置的分支与`origin/master`. 您也有可能从不同的遥控器拉出。要验证这些可能性，请尝试：

```
git config branch.master.remote ;# shows you the tracked remote
git config branch.master.merge ;# shows you the tracked upstream branch 
```

这些假设您的本地分支称为`master`.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T13:33:58.757

通过事物的声音，您正在拉下其他分支。其他开发人员正在另一个分支上工作，或者您处于分离状态并且不再在分支/他们的分支上。

如果你运行`git branch --all`它，它将显示你项目中的所有分支。

要切换回 master，只需运行：`git checkout master`

希望这可以帮助

# dynamic - CloudFront 如何与 EC2 PHP 中的动态应用程序配合使用？

> ID：11433735
> 
> 赞同：-1
> 
> 时间：2012-07-11T13:27:58.913
> 
> 标签：dynamic, amazon-ec2, amazon-cloudfront

CloudFront 如何与动态应用程序配合使用？是否需要设置不同的域？一个是动态的，一个是静态的？或在 CloudFront 中进行配置，以便它可以使用所有动态功能（例如提交反馈）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:52:40.107

您应该使用 CloudFront 来交付您的静态内容，例如图像、样式表和脚本，甚至是静态 HTML 站点。您的应用程序的动态部分发生在您的 EC2 实例上。

最简单的方法是设置一个子域，例如`static.example.com`使用指向 CloudFront 分配域的相应 CNAME 条目。另外不要忘记将匹配的 CNAMES 告知您的 CloudFront 分配。有关更多信息，请查看：[Amazon CloudFront - 使用备用域名 (CNAME)](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/CNAMEs.html)。

# c# - 在 ASP.NET 3.5 WebForms 中初始化一次性逻辑的首选方法是什么？

> ID：11433741
> 
> 赞同：0
> 
> 时间：2012-07-11T13:28:31.830
> 
> 标签：c#, asp.net, vb.net, webforms, application-state

*设想：*

*   我有一个基于 ASP.NET 3.5 WebForms 的网站。
*   它包含`Foo.aspx`,`Bar.aspx`和`baz.html`(jQuery 模板)。
*   看到的典型流量是`Foo.aspx`（N 次）、`Bar.aspx`（N 次）和`baz.html`（10*N 次）。
*   ASP.NET 工作进程 ( `aspnet_wp.exe`) 每 2 小时回收一次。
*   存在一个较旧的 API ( `OldFooService.Init()`)，仅需要为 的第一个请求执行`Foo.aspx`。为第一个流`OldFooService.Init()`初始化数据存储，但为后续流触发空白。`Cache`

*问题：*

我目前正在做 B（见下文），因为流量`Foo.aspx`低于第一次后触发空白`baz.html`。`OldFooService.Init()`

我应该使用 C 吗？写入`Application_State`需要锁定 ( [MSDN](http://msdn.microsoft.com/en-us/library/94xkskdf.aspx) ) 并且不能保证可用，因此不确定它是否值得付出努力。还是有更好的D？

*选项：*

一）`Application_Start`在`Global.asax`

B）`Page_Load`一次`Foo.aspx`（通过检查`Not IsPostBack`）

C) 选项 B + 使用标志在`ApplicationState`每次循环中运行一次`aspnet_wp.exe`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:31:50.523

这里的正确答案是（A），使用 Global.asax。B 将不起作用，因为后续 GET 请求将运行相同的代码。C 会起作用，但丑陋如罪。

我建议在 Global.asax 中处理 Application_Start 或 Application_Init，具体取决于您的旧版 init 函数中的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:47:38.670

如果 OldFooService.Init() 在初始化之前同时收到请求的情况下可以额外调用几次，那么我会使用 C。如果它绝对必须每次回收运行一次，那么我将使用静态类有一些适当的读/写锁。

附带说明一下，工作进程实际上是每 2 小时回收一次吗？这似乎相当频繁。

# cs-cart - CS 购物车 - 在管理面板中添加产品的自定义字段

> ID：11433743
> 
> 赞同：0
> 
> 时间：2012-07-11T13:28:37.000
> 
> 标签：cs-cart

是否可以在产品的cs卡中添加自定义字段？

我在产品功能中通过后端添加

但它没有显示在添加产品页面中。如果有人试过这个..？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:55:07.610

您可以在以下文件的管理面板中将自定义字段添加到产品添加：

皮肤/[皮肤名称]/admin/views/products/update.tpl

并使用 cs-cart 格式添加您想要的自定义字段：

喜欢：

还有一件事，您需要在数据库中添加 custom_field 列，?:products 表。

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T04:41:15.897

您需要编辑用于网关的模板。

检查您的数据库中的 cscart_payment_processors 并查找您的付款名称。

然后，您将拥有 2 个脚本，其中一个是管理端，第二个是购物车端..您需要管理购物车端..

# sql - 如何在 T-SQL for SQL Server 中捕获事务的错误？

> ID：11433750
> 
> 赞同：0
> 
> 时间：2012-07-11T13:28:55.613
> 
> 标签：sql, sql-server-2008, tsql

在 SQL Server 中，您需要检查每个 SQL 语句的错误。例如，如果我在一笔交易中有 3 次更新，我需要一些代码，例如：

```
declare @HasError int
begin tran
Update tab1 set ....
Set  @HasError = @@error;
Update tab2 set ...
Set  @HasError = @@error;
Update tab3 set ...
Set  @HasError = @@error;

If @HasError<>0
  rollback tran;
else
 commit tran; 
```

对于这种情况，还有更简单的代码的其他解决方案吗？例如，类似 c# 风格的东西：

```
 begin tran
    try
    {
      Update tab1 set ....    
      Update tab2 set ...
      Update tab3 set ...
      commit tran;
    }catch(error){
       rollback tran;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:30:33.313

您可以像在 c# 中一样使用 try catch 语法

```
 BEGIN TRY
    -- ....
 END TRY
 BEGIN CATCH
    -- ....
 END CATCH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:25:37.477

**[单击此处查看 => 为什么我真的需要使用 SET XACT_ABORT ON](https://stackoverflow.com/questions/917773/do-i-really-need-to-use-set-xact-abort-on)**？

**[单击此处查看 SET NOCOUNT ON 如何提高 SQL Server 存储过程性能](http://www.mssqltips.com/sqlservertip/1226/set-nocount-on-improves-sql-server-stored-procedure-performance/)**

```
Begin Try
    SET NOCOUNT ON
    Set XACT_ABORT ON
    Begin Tran
        --Your Query
    Commit Tran
End Try

Begin Catch
    RollBack Tran
    Select ERROR_MESSAGE() as Msg, ERROR_NUMBER() as Num
End Catch 
```

# c# - 避免通过列表进行两次迭代

> ID：11433756
> 
> 赞同：0
> 
> 时间：2012-07-11T13:29:26.060
> 
> 标签：c#, generics, linq-to-objects

我有一个通用列表，我使用 linq 进行搜索，如下所示：

```
NotificationWindowItem item = itemList.Where(elm => elm.UID == UID).SingleOrDefault();
itemList.Where(elm => elm.UID == UID).SingleOrDefault().Read = true; 
```

然后，我继续调用 WCF Web 服务，其值来自`item`. 我这样做是因为我的理解是 SingleOrDefault() 返回一个带有对象副本的新 IEnumerable。（我误会了吗？）列表通常不是很长，所以额外的迭代不是很重要，但它真的让我很烦恼。

我只是想不出一种方法来巩固这两个迭代。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:34:57.287

`SingleOrDefault`不返回 IEnumerable 而是返回单个项目。既然您已经分配并保存在您的变量`item`中，为什么不简单地使用它进行进一步处理呢？

```
NotificationWindowItem item = itemList.Where(elm => elm.UID == UID).SingleOrDefault();
item.Read = true; 
```

您可以进一步简化这一点。而且，正如 Tim 所指出的，您需要进行空值检查（原因见下文）：

```
NotificationWindowItem item = itemList.SingleOrDefault(elm => elm.UID == UID);
if (item == null)
{
    // ... some alternative or error handling code
}
else
{
    item.Read = true;
} 
```

要扩展您的问题/不明确之处：

1.  itemList 是项目列表。每个项目都是一个 NotificationWindowItem。该列表实现了 IEnumerable 接口。（更准确地说，我假设 itemList 是一个`List<NotificationWindowItem>`which implements `IEnumerable<NotificationWindowItem>`。
2.  Where 是一个扩展方法，它采用`IEnumerable<NotificationWindowItem>`并创建另一个`IEnumerable<NotificationWindowItem>`只包含匹配元素的方法。
3.  SingleOrDefault 接受`IEnumerable<NotificationWindowItem>`并返回一个普通的、简单的、单一的 NotificationWindowItem。（更重要的是，它验证只有一个匹配的元素。如果有多个元素匹配，它将引发异常。如果没有元素匹配，则返回`default(T)`您`null`的情况）。
4.  `item`不是一个。*_* `IEnumerable`它是一个`NotificationWindowItem`. 背后没有魔法。这是一个简单的对象。它与 LINQ 没有任何关系。您只使用 LINQ 来检索它，但之后您可以对 NotificationWindowItem 的任何其他实例执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:37:12.883

你可以这样做 - 不需要双循环。

```
var item = itemList.SingleOrDefault(elm => elm.UID == UID);
item.Read = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:23:36.313

你可以用这个，

```
NotificationWindowItem item = itemList.Where(elm => elm.UID == UID).SingleOrDefault().toList(); 
```

解决您的问题。

# objective-c - NSFetchedResultController。使用表达式/按条件计算 sectionNameKeyPath

> ID：11433759
> 
> 赞同：1
> 
> 时间：2012-07-11T13:29:31.663
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller

假设有一个名为 testTable 的表：

```
(NSNumber*) numValue
(NSString*) stringValue 
```

然后假设其中大约有 50 条记录。`numValue`每条记录都不一样。如果我这样创建 NSFetchedResultController ：

```
NSFetchRequest *request = [[NSFetchedResultsController alloc] 
                            initWithFetchRequest: request 
                            managedObjectContext: context 
                            sectionNameKeyPath: @"numValue" 
                            cacheName: @"testTable"]]; 
```

那我会得到50个部分。

我的问题是：如何获得 2 个部分：第一个包含`numValue`小于 some`x`的记录，第二个包含`numValue`大于相同的记录`x`。

因为`x = 15`它可能看起来像这样：

```
NSFetchRequest *request = [[NSFetchedResultsController alloc] 
                            initWithFetchRequest: request 
                            managedObjectContext: context 
                            sectionNameKeyPath: @"numValue > 15" 
                            cacheName: @"testTable"]]; 
```

**可能的解决方案是：**

1.  我们可以像@Dima 所说的那样编辑我们的实体。
2.  在 中，`numberOfSectionsInTableView:`我们可以只查看部分名称并将它们与`x`. 然后我们可以查看这些名称`tableView:numberOfRowsInSection:`并计算我们需要什么。但这感觉也很脏。比第一种方法好，但仍然。

**更新：** 嗯，我几乎想出了第三种方法来做到这一点。感谢@Dima 的链接。这是代码：

```
[self setFetchedResultsController: [[NSFetchedResultsController alloc]
    initWithFetchRequest: request 
    managedObjectContext: context 
    sectionNameKeyPath: [NSString stringWithFormat: @"numValue.compare(%f)", x]]; 
```

但是 KVC 合规性存在一个问题：带有参数的方法（选择器）显然不符合 KVC。任何解决方法的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:15:48.573

请参阅[此](https://stackoverflow.com/questions/1112521/nsfetchedresultscontroller-with-sections-created-by-first-letter-of-a-string)答案作为参考。

向实体添加可选属性并使其成为瞬态属性。

然后创建一个吸气剂（假设您的属性被调用`sectionGroup`）

```
- (NSNumber *) sectionGroup
{
  [self willAccessValueForKey:@"sectionGroup"];
  NSNumber *group = [NSNumber numberWithInt:0];
  if(numValue > 15)
  {
    group = [NSNumber numberWithInt:1];
  }
  [self didAccessValueForKey:@"sectionGroup"];
  return group;
} 
```

现在，您可以将`sectionGroup`其用作 sectionNameKeyPath。

# jquery - 如果嵌入的 vimeo 视频已经开始播放，为什么它会在 jquery 循环插件中消失？

> ID：11433761
> 
> 赞同：0
> 
> 时间：2012-07-11T13:29:37.030
> 
> 标签：jquery, jquery-cycle, vimeo

我正在尝试使用 jquery 循环插件在幻灯片中显示许多嵌入的 Vimeo 视频，用户可以手动浏览这些视频。这一切在所有桌面浏览器上都能完美运行，但由于某种原因，如果您开始播放视频，则在 ipad 上它会在您离开时从幻灯片中消失。[你可以在http://jsfiddle.net/deshg/gPfg7/](http://jsfiddle.net/deshg/gPfg7/)看到一个例子。在播放任何视频之前尝试单击上一个/下一个几次，它在桌面和 ipad 上都可以正常工作。现在重新加载它并单击第一个视频上的播放，然后单击下一个，然后单击上一个，这样您就回到了第一张幻灯片。这适用于桌面，但在 ipad 上，视频消失了，但音频仍在播放。

我在 YouTube 上尝试了类似的事情，看看它是否是 iframe/视频问题，这也不起作用，但幻灯片并没有变成空白，它似乎只是显示一个没有内容或控件的黑色 YouTube 播放器（但音频是仍在播放）：http: [//jsfiddle.net/deshg/gPfg7/2/](http://jsfiddle.net/deshg/gPfg7/2/)。我一生都无法理解为什么会发生这种情况，也无法在其他地方找到任何参考，如果有人能解释为什么会发生这种情况，那将不胜感激。

非常感谢，

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T21:47:49.787

只是为了不让你疯狂地尝试测试你的代码，Youtube 在过去的 24 小时里一直在不断变化，至少在 iMac 上是这样。这可能与您的问题有关，也可能无关，但我暂时不会使用 Youtube 来测试任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:13:02.207

这是一个“无法回答”的答案：让 Vimeo 视频与 JavaScript/jQuery 显示/隐藏一起工作是一件非常痛苦的事情。别介意让事件与他们的 javascript API 一起工作。

**RANT**他们的文档还有*很多*不足之处。有时，即使提供了他们自己的示例，也无法正常工作。在与 JavaScript 的交互方面，YouTube 领先于 Vimeo 数英里，并且性能更可靠。**结束咆哮**

我不知道您的目标浏览器是什么，但也知道使用 JavaScript 显示/隐藏 Vimeo 视频会导致在不同浏览器中出现一些奇怪的行为。

我发现我需要做的是几件事：

*   如果 IE 是一个问题，不幸的是，您将不得不使用 Flash 嵌入方法。对不起iOS。使用 JavaScript 显示/隐藏嵌入 HTML5 的视频将导致随机视频加载带有黑框，而不是“关键帧”。这确实是一种非此即彼的情况 - 所以选择对您更重要的一个：IE 或 iOS。听起来您将不得不忍受 IE 用户看到随机黑框。
*   如果您依赖 Vimeo JavaScript API 来响应某些事件，那么显示/隐藏它们以使其跨浏览器工作也有点奇怪。我自己尝试了 Cycle 插件，但它杀死了某些其他事件（例如当用户切换到另一张幻灯片时暂停播放视频）。我最终要做的是将一个类附加到其中包含视频的“活动”容器中。然后我将 CSS 设置为`<object>`绝对定位在 -4000 像素（即远离页面）。当一个容器变得“活跃”时，它就`<object>`变成`position:static`了把它带回到页面上。因此，从技术上讲，视频永远不会从 DOM 中删除，只是重新定位。

这两个子弹总结了我在处理 Vimeo 视频时所经历的许多小时的痛苦。（YouTube 很快，但客户坚持使用 Vimeo）有很多“WTF”和 facepalm 时刻。我希望我已经为您节省了一点时间。

# c# - 多播代表实现了构建器模式？

> ID：11433762
> 
> 赞同：1
> 
> 时间：2012-07-11T13:29:42.320
> 
> 标签：c#, design-patterns, delegates, builder, multicastdelegate

使用多播委托是实现构建器设计模式的适当方式吗？

我问的原因是因为我对 Builder 模式的概念/理解是一组可以像乐高积木一样组合/重新排列的方法。所以你可能有以下方法：

```
void Shave(int StrokeCount) { ... }
void FeedTheDog(int Cups) { ... }
void MakeCoffee(int Cups) { ... }
void Shower(int Temperature) { ... } 
```

...可以混合搭配/乐高积木在一起，所以有一天早上你打电话给：

```
Shower()
FeedTheDog()
MakeCoffee() 
```

...另一个早晨：

```
Shower()
Shave()
FeedTheDog()
MakeCoffee() 
```

...另一个早晨：

```
MakeCoffee()
FeedTheDog()
Shower() 
```

(etc. &c. ad infinitum ad nauseum)

而且由于多播委托允许您向委托的实例添加相同签名的方法，并且它们将按照您添加它们的顺序触发，因此这里似乎存在语义联系（在我看来/我目前的思维方式，反正）。不过，我可能错了，这就是我问的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:23:02.313

除非您出于某种原因想要推迟方法执行，否则我并没有真正看到为 Builder 模式使用多播委托的优势。我从来没有这个要求，但这并不是说它没有用。如果您有一个班级负责“准备食谱”而另一个班级负责“烹饪食谱”的场景，我想它可能会很有用。但是，即使那样，您也将仅限于使用具有相同签名的方法。这只是我的意见。

# c - C中的套接字到远程主机

> ID：11433768
> 
> 赞同：2
> 
> 时间：2012-07-11T13:30:03.267
> 
> 标签：c, sockets, host

我正在用 C 中的套接字做一些实验，但我有一个问题，我认为有一个解决方案，但我想不通！

我有一个用 C 编写的服务器和一个客户端，它们在本地网络中运行良好，我尝试了*'localhost'*和*127.0.0.1*或只是*192.168.1.2*，一切都像一个魅力...... **但是**当我尝试连接到远程主机（对于我的实验，我使用我自己的计算机，在[http://www.whatismyip.com/62.98.XXX.XX](http://www.whatismyip.com/)上找到 IP ）连接和数据（字符串）交换永远不会发生......

我该如何解决这个问题？

这是我的 server.c 代码

```
 //server

#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <time.h> 

int main(int argc, char *argv[])
{
    int listenfd = 0, connfd = 0;
    struct sockaddr_in serv_addr; 

    char sendBuff[1025];
    time_t ticks; 

    listenfd = socket(AF_INET, SOCK_STREAM, 0);
    memset(&serv_addr, '0', sizeof(serv_addr));
    memset(sendBuff, '0', sizeof(sendBuff)); 

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    serv_addr.sin_port = htons(5000); 

    bind(listenfd, (struct sockaddr*)&serv_addr, sizeof(serv_addr)); 

    listen(listenfd, 10); 

    while(1)
    {
        connfd = accept(listenfd, (struct sockaddr*)NULL, NULL); 

        ticks = time(NULL);
        snprintf(sendBuff, sizeof(sendBuff), "%.24s\r\n", ctime(&ticks));
        write(connfd, sendBuff, strlen(sendBuff)); 

        close(connfd);
        sleep(1);
     }
} 
```

这是我的 client.c 代码

```
//client

#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netdb.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <arpa/inet.h> 

int main(int argc, char *argv[])
{
    int sockfd = 0, n = 0;
    char recvBuff[1024];
    struct sockaddr_in serv_addr; 

    if(argc != 2)
    {
        printf("\n Usage: %s <ip of server> \n",argv[0]);
        return 1;
    } 

    memset(recvBuff, '0',sizeof(recvBuff));
    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
    {
        printf("\n Error : Could not create socket \n");
        return 1;
    } 

    memset(&serv_addr, '0', sizeof(serv_addr)); 

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons(5000); 

    if(inet_pton(AF_INET, argv[1], &serv_addr.sin_addr)<=0)
    {
        printf("\n inet_pton error occured\n");
        return 1;
    } 

    if( connect(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) < 0)
    {
       printf("\n Error : Connect Failed \n");
       return 1;
    } 

    while ( (n = read(sockfd, recvBuff, sizeof(recvBuff)-1)) > 0)
    {
        recvBuff[n] = 0;
        if(fputs(recvBuff, stdout) == EOF)
        {
            printf("\n Error : Fputs error\n");
        }
    } 

    if(n < 0)
    {
        printf("\n Read error \n");
    } 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T06:37:09.937

这段代码至少有一个问题：

```
memset(&serv_addr, '0', sizeof(serv_addr)); 
```

你真的想用 0x30 填充内存吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T07:32:59.827

正如评论中的某些人已经说过的那样，可能是您的路由器或任何为您提供服务的东西来跨越边界`192.168.*`并`62.98.XXX.XX`阻止访问。原因很清楚——它不知道应该连接它后面的哪台 PC（如果有的话）。

你必须明确告诉盒子（我假设你有完全的访问权限）要转发到哪个内部 IP。如果您没有完全访问权限，您将无法执行此操作，因为没有肯定打开的端口。

在 3G 上，它可能无法正常工作，因为大多数移动提供商都会提供该范围内的 IPv4 地址`10.0.0.0/8`。

或者，正如我们同时拥有 2012 年一样，您可以设置 IPv6 环境并修改您的程序以使其能够使用它。

# google-maps-api-3 - Google Maps API V3 上的自定义折线

> ID：11433771
> 
> 赞同：2
> 
> 时间：2012-07-11T13:30:16.810
> 
> 标签：google-maps-api-3, google-polyline

我需要帮助，我尝试更改我的折线颜色，但它不起作用，我不知道我的绘制线解决方案是否正确，请帮助我 =) 我将发布 2 个我的正常代码和一个代码尝试. 谢谢 =)

```
//This is My complete code
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0px; padding: 0px }
#map_canvas { height: 100% }
</style>

<script type="text/javascript"
src="https://maps.google.com/maps/api/js?sensor=true">
</script>
<script type="text/javascript">
var infowindow, map, path = [], service = new google.maps.DirectionsService(), poly;

var directionDisplay;
var directionsService = new google.maps.DirectionsService();

function initialize() 
{
directionsDisplay = new google.maps.DirectionsRenderer();
 directionsDisplay.setPanel(document.getElementById("directionsPanel"));
var latlng = new google.maps.LatLng(41.850033, -87.6500523);
 var myOptions = 
{
  zoom: 8,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
   mapTypeControlOptions: {
  mapTypeIds: [google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.HYBRID]
},
disableDoubleClickZoom: true, //Desabilitar atalho do zoom por clique

draggableCursor: "crosshair" //Cursor do Mouse em +

};

var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

directionsDisplay.setMap(map);

// FAZ A ROTA

google.maps.event.addListener(map, "click", function(evt) {
if (path.length == 0) {
  path.push(evt.latLng);
  poly = new google.maps.Polyline ({ map: map});
  poly.setPath(path);
} else {
  service.route({
    origin: path[path.length - 1],
    destination: evt.latLng,
    travelMode: google.maps.DirectionsTravelMode.DRIVING  //Pode ser Walking, Driving ou Bicycling

  }, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      path = path.concat(result.routes[0].overview_path);
      poly.setPath(path);
       }
     });
    }
  });

//Marcador
/*var marker = new google.maps.Marker({ position: latlng,   title:"Hello World!"});
marker.setMap(map);

setMap()*/
var image = 'http://i47.tinypic.com/11wg1o0.png'
var marker = new google.maps.Marker({
map: map,
position: new google.maps.LatLng(41.810033, -87.8500523),
icon : image,
draggable: true

});
    var marker2 = new google.maps.Marker({
map: map,
position: new google.maps.LatLng(41.850033, -87.6500523),
draggable: true

});

var pointA = marker;
var pointB = marker2;

//var jsonObj = Maps.newDirectionFinder().setOrigin(pointA).setDestination(pointB).getDirections();

//  InfoBox
var content = '<iframe width="560" height="315"        src="http://www.youtube.com/embed/v2ORAUREQUo" frameborder="0" allowfullscreen></iframe> ';

infowindow = new google.maps.InfoWindow({
content: content    
});
google.maps.event.addListener(marker, 'click', function() 
{
      infowindow.open(map, this);
    });

    // rotas de bike
    var bikeLayer = new google.maps.BicyclingLayer();
    bikeLayer.setMap(map);  

  }

</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>

</html> 
```

这是死记硬背的部分

```
google.maps.event.addListener(map, "click", function(evt) {
if (path.length == 0) {
  path.push(evt.latLng);
  poly = new google.maps.Polyline ({ map: map});
  poly.setPath(path);
} else {
  service.route({
    origin: path[path.length - 1],
    destination: evt.latLng,
    travelMode: google.maps.DirectionsTravelMode.DRIVING  //Pode ser Walking, Driving ou Bicycling

  }, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      path = path.concat(result.routes[0].overview_path);
      poly.setPath(path);
       }
     });
    }
  }); 
```

最后，这就是我尝试放置颜色

```
var polylineOptions = {
   strokeColor:"#FF0000",
   strokeOpacity: 1, 
   strokeWeight: 2, 
   zIndex: 5
}
google.maps.event.addListener(map, "click", function(evt) {
  if (path.length == 0) {
  path.push(evt.latLng);
  poly = new google.maps.Polyline (polylineOptions)({map: map});
  poly.setPath(path);
 } else {
  service.route({
    origin: path[path.length - 1],
    destination: evt.latLng,
    travelMode: google.maps.DirectionsTravelMode.DRIVING  //Pode ser Walking, Driving ou Bicycling

  },  function(result, status) {
      if (status == google.maps.DirectionsStatus.OK) {
      path = path.concat(result.routes[0].overview_path);
      poly.setPath(path);
     }
    });
   }
 }); 
```

什么错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:06:17.463

这对我来说看起来不像正确的语法：

```
poly = new google.maps.Polyline (polylineOptions)({map: map}); 
```

相反，我会说要么将 map 属性添加到您的 polylineOptions，要么在 poly 对象上调用 setMap 函数。

# android - CLEAR_TOP 并保存额外的意图字段

> ID：11433772
> 
> 赞同：0
> 
> 时间：2012-07-11T13:30:17.857
> 
> 标签：android

我有一系列 A、B、C 活动。从C活动我做：

```
 Intent clearTopIntent = new Intent(LoginActivity.this, Class.forName(getIntent().getExtras().getString("prev_activity").toString()));
    clearTopIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(clearTopIntent); 
```

它使用 clear_top 标志调用活动 B。

我的问题是当清除的活动 B 启动时 mIntent 对象中的 mExtras 是空的。可以做些什么来保留这些额外的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:19:30.090

也许这会帮助你：

```
intent.putExtras(intentSource) 
```

和`intentSource = getIntent()`

真的，我没有正确回答您的问题。

# android - 适用于 Android 的 Linderdaum 引擎演示 - 缺少文件

> ID：11433774
> 
> 赞同：2
> 
> 时间：2012-07-11T13:30:22.000
> 
> 标签：android, c++, ant, linderdaum

我正在为 Android 构建 Linderdaum 引擎演示，但由于缺少对 CommonMedia.XML 的引用而失败。我已经下载了官方 SDK 0.6.08 但那里没有这样的文件。如何生成该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T09:00:57.300

CommonMedia.xml 包含将通用数据文件从 SDK 文件夹复制到您的 apk 的目标。官方 SDK 版本 0.6.08 中缺少此文件。您可以从这里获取最近的 CommonMedia.xml [http://www.linderdaum.com/temp/CommonMedia.xml](http://www.linderdaum.com/temp/CommonMedia.xml)它应该放在 BuildAndroid 文件夹中。

# connection - # WAP/路由器上的连接数导致中断

> ID：11433780
> 
> 赞同：0
> 
> 时间：2012-07-11T13:30:37.790
> 
> 标签：connection, wireless

连接到我的无线接入点或无线路由器的人数是否可能导致连接不稳定？带宽不受影响，但似乎我们连接到 WAP 的人越多，断开连接的次数就越多。每个人的连接一次断开 5 到 15 分钟，然后自行恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:14:09.320

发生这种情况的原因有几个，具体取决于您使用的特定硬件和固件。我们已经看到来自许多客户端和相邻 AP 对通道的过度干扰使 Meraki MR12 上的 CPU 不堪重负。在我们重新启动设备之前，所有客户端都会失去连接。我们改用更强大的双频 MR16，问题就消失了。

低端消费硬件通常会配备更少的内存、更慢的 CPU 和对高负载条件不太稳健的固件。高端企业硬件通常在负载下会表现得更好，并且会被指定为处理一定数量的并发客户端。

即使使用高端硬件，您最终也会遇到可用频谱的物理限制。在不太拥挤的 5ghz 频段中运行的双频段硬件可以提供帮助。

# asp.net-mvc - 将 mvc 部署到 iis 7 - 目录和文件列表

> ID：11433782
> 
> 赞同：2
> 
> 时间：2012-07-11T13:30:47.403
> 
> 标签：asp.net-mvc, deployment, iis-7

我已经使用 MVC 3.5 开发了一个标准的 MVC 应用程序，我试图在 IIS 中获取它以让我在 localhost 中导航。好吧，我在 localhost 路径中发布了该项目，但是当我在浏览器中键入该项目时，嗯...它没有向我显示站点，而是在 localhost 中创建的文件和目录的列表。

我该怎么办？IIS 已完全安装，并且使用 Framework 4.0 和 ApplicationPoolIdentity 设置了“DefaultAppPool”。

提前感谢大家。

问题已解决：我正在运行 Windows 7 64 位，并且我已经安装了 aspnet_regiis 32 位版本。那是让我忙了3天的烂摊子，该死的！顺便说一句，现在它成功了，我终于很高兴输入一些代码而不是阅读论坛。就这些了，谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T18:25:41.120

尝试在 system.webServer 部分添加 web.config <runAllManagedModulesForAllRequests="true"/>。

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:00:29.843

看起来您的部署位置未配置为 IIS 中的应用程序。尝试[这些说明](http://weblogs.asp.net/gunnarpeipman/archive/2009/06/18/visual-studio-2010-web-application-packaging-and-publishing.aspx)，但勾选*标记为目标上的 IIS 应用程序*框。

或者您可以打开[IIS 管理器](http://technet.microsoft.com/en-us/library/e4b3aded-09fe-43c6-9634-d878d23940eb)并将您的位置设置为那里的应用程序。

# c# - C# Web 表单日历返回值到字符串

> ID：11433786
> 
> 赞同：0
> 
> 时间：2012-07-11T13:31:17.437
> 
> 标签：c#, string, forms, calendar

这个问题的答案很可能遍布整个网络，我就是找不到。

我正在编写一个 C# Web 表单，需要获取日历的返回值，以便我可以将其转换为字符串（如果可能的话），但是，我不知道它的返回值是什么.

例如：要`dateTimePicker`在 C# Windows 窗体中将 a 的“返回值”转换为字符串，您只需输入`dateTimePicker1.Value.ToShortDateString();`，但是，这应该更容易，但我无法弄清楚。

感谢您提前输入！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:38:12.493

假设您使用的是开箱即​​用的日历控件：

```
Calendar1.SelectedDate.ToShortDateString() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:40:08.150

这非常简单：

```
 Calendar1.SelectedDate.ToLongDateString(); 
```

为后代添加参考：http: [//msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.calendar.selecteddate](http://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.calendar.selecteddate(v=vs.100) (v=vs.100 )

> 使用 SelectedDate 属性确定日历控件上的选定日期。
> 
> SelectedDate 属性和 SelectedDates 集合密切相关。当 SelectionMode 属性设置为 CalendarSelectionMode.Day（一种仅允许选择单个日期的模式）时，SelectedDate 和 SelectedDates[0] 具有相同的值，并且 SelectedDates.Count 等于 1。当 SelectionMode 属性设置为 CalendarSelectionMode.DayWeek 或 CalendarSelectionMode .DayWeekMonth，允许选择多个日期的模式，SelectedDate 和 SelectedDates[0] 具有相同的值。
> 
> SelectedDate 属性是使用 System.DateTime 对象设置的。
> 
> 当用户在 Calendar 控件上选择日期时，将引发 SelectionChanged 事件。SelectedDate 属性更新为所选日期。SelectedDates 集合也更新为仅包含此日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:35:35.403

你需要投：

```
DateTime dt = (DateTime)dateTimePicker1.value;
string dtString = dt.ToShortDateString(); 
```

# math - 为什么有符号字节的范围是从 -128 到 127（2 的补码）而不是从 -127 到 127？

> ID：11433789
> 
> 赞同：28
> 
> 时间：2012-07-11T13:31:22.797
> 
> 标签：math, bit-manipulation, computer-architecture, twos-complement

我读 [了为什么Java中的字节范围是-128到127？](https://stackoverflow.com/questions/3621067/why-is-the-range-of-bytes-128-to-127-in-java) 它说

> 128是10000000，倒过来就是01111111，加一又是10000000

所以它得出结论 -128 是 10000000

所以 +128 不能用 8 位的 2 的补码表示，但这意味着我们可以用 9 位表示它，所以 128 是 010000000，所以取它的 2 的补码 -128 是 110000000，

-128 10000000 或 110000000 的表示也是如此吗？表示位依赖吗？

为什么不简单地将较低范围 -127 fot 8 位而不是将 -128 写为 10000000 ？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-11T13:33:45.850

> 为什么无符号字节的范围是-128到127？

它不是。一个无符号字节（假设为 8 位）是从 0 到 255。

**使用 2 的补码的有符号**字节的范围是从 -128 到 127，直接来自[2 的补码](http://en.wikipedia.org/wiki/2%27s_complement)的定义：

```
01111111 = +127
01111110 = +126
01111101 = +125
...
00000001 = +1
00000000 =  0
11111111 = -1
...
10000010 = -126
10000001 = -127
10000000 = -128 
```

> -128 10000000 或 110000000 的表示也是如此吗？

在 8 位中，它是`10000000`，在假设的 9 位表示中，它是`110000000`.

> 为什么不简单地为 8 位设置较低的范围 -127？

人为地将范围限制为 -127 不会有太大的效果；您将不允许一个完全有效的值，并且通常会使代码更复杂（您还会对位模式做`10000000`什么？）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-11T13:56:39.880

> so is representation of -128 10000000 or 110000000 ? Is the representaion bit dependent ?

Yes, 2's complement representation is bit dependent

> Why not simply make the lower range -127 fot 8 bits instead of writing -128 as 10000000

2^8 = 256\. So whatever representation scheme you use, it should be able to represent 256 different values.

And you can draw a circle to understand how good 2's complement system is.

First look at this table :

```
Bits    Unsigned 2's complement
00000000    0   0
00000001    1   1
00000010    2   2
01111110    126     126
01111111    127     127
10000000    128     −128
10000001    129     −127
10000010    130     −126
11111110    254     −2
11111111    255     −1 
```

for 2's complement system you can draw circle for understanding this system.

Here is the 4 bit version. You can easily develop a 8bit version on yourself. This circle represent what this 2's complement system actually is. Its a circular system. That means its representation depends on the "span" you give it to it. thats why 8bit version of a negative number will differ with a 16 bit version of same negative number. you can compare same negative number in 4bit version given in the circle with 8bit version given in the table.

```
 0000  0
                 1111  -1     0001  1

        1110  -2                       0010  2

  1101  -3                                   0011  3

1100  -4                                       0100  4

  1011  -5                                   0101  5

        1010  -6                       0110  6

                 1001  -7     0111  7
                          1000  -8 
```

On a side note, 2's complement arithmetic plays good with "fixed" width computation storages inside computers(registers, memory etc).

In first generation computers, there was a tendency to provide native decimal arithmetic. But this was quickly abandoned in favour of "complemented" or "circular" scheme because, decimal arithmetic is bizarre from a computer's point of view. We find it natural because "we have 10 fingers". These fingers were our ancestor's earliest computation tool. thats why we find decimal system so natural. its built into our genes.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-11T13:36:24.973

二进制补码的替代方案是

*   [一个补码](https://en.wikipedia.org/wiki/Ones%27_complement)，由于其“负零”而存在问题
*   [sign/magnitude](https://en.wikipedia.org/wiki/Signed_number_representations#Signed_magnitude_representation)，它也有一个负零
*   not assign a meaning to `10000000`, in which case many functions that accept signed 8-bit integers will have to check for that invalid value, wasting time. (Unless your code is running on hypothetical hardware that treats this bit pattern as an integer NaN.)

It's easier to just assign a meaning to that bit pattern, and the natural meaning in the two's complement representation is -128.

For example, in two's complement, checking whether is negative mounts to checking whether its highest bit is set. In a variant where `10000000` is invalid, it's (pseudocode)

```
if (highest_bit_zero(x))
    return false;
else if (x == 0b10000000)
    ERROR
else
    return true; 
```

You decide how to handle the error :)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-11T13:45:37.827

> so is representation of -128 10000000 or 110000000 ? Is the representaion bit dependent ?

In a 9-bit world, it would be 110000000\. In a 16-bit world, it would be 1111111110000000\. At least, as long as we're talking two's complement.

> Why not simply make the lower range -127 for 8 bits instead of writing -128 as 10000000 ?

As larsmans pointed out, you'd end up with an "invalid" value, which you would constantly have to check against. Two's complement has been chosen because it's so easy for the ALU to handle. Just like byte widths have been chosen to be power-of-two (which was not always the case either). At a hardware level, two's complement addition is identical to unsigned, so no special instructions or extra hardware is needed (unlike with one's complement).

With things the way they are, all values with the highest bit set are negative, all values with the highest bit unset are non-negative (positive or zero). Easy, isn't it? The negative range being one larger than the positive range is simply an artifact of trying to keep two's complement simple.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-25T10:36:52.213

**Reason for why you cannot have range from [![enter image description here](../Images/f914b85de00437d91a0c057875dfa443.png)](https://i.stack.imgur.com/bEbNf.gif) to [![enter image description here](../Images/3062967e441f56c344facde7319067aa.png)](https://i.stack.imgur.com/IUMA2.gif).**

It looks like [![enter image description here](../Images/1c8f3b835d784c28cef99899df66b6da.png)](https://i.stack.imgur.com/VyTNP.gif) and [![enter image description here](../Images/61600bd9c0107b44692d66d84c2b1a4e.png)](https://i.stack.imgur.com/o7Udv.gif) are represented by the same pattern. This is not good. A non-zero integer and its negative can't both be represented by the same pattern. So [![enter image description here](../Images/ee5096f6d88b5eeb5bc332984ad8aa88.png)](https://i.stack.imgur.com/p5zEQ.gif) can not be represented in eight bits. The maximum positive integer that can be represented in eight bits is [![enter image description here](../Images/0f4e6797a963f0e0914cd437e4190c49.png)](https://i.stack.imgur.com/WFrAD.gif).

What number is represented by 1000 0000? Add the representation of [![enter image description here](../Images/442347f63700a536ed4616b942344d68.png)](https://i.stack.imgur.com/1iQBk.gif)  to it:

[![enter image description here](../Images/bf98e0527cd35a78ce0670fea6be24a4.png)](https://i.stack.imgur.com/7dcxy.png)

A good choice for ? is [![enter image description here](../Images/f8e5353a856a0c5e1830d152dbac3f14.png)](https://i.stack.imgur.com/8aywA.gif). Therefore 1000 0000 represents [![enter image description here](../Images/0ba39b6b77ba2a14375548748dcd0394.png)](https://i.stack.imgur.com/LhQOB.gif). Eight bits can be used to represent the numbers   [![enter image description here](../Images/0fae6856b2833cbb8f582f812226a609.png)](https://i.stack.imgur.com/0YqHU.gif) ... 0 ... [![enter image description here](../Images/73038460e68ea24a86b47e1e04a0e0bc.png)](https://i.stack.imgur.com/2j0cE.gif).

[![enter image description here](../Images/db2d6944f7d6a5321df6ec72077deb57.png)](https://i.stack.imgur.com/0gLiY.png)

For example, the range of integers that can be represented in eight bits using two's complement is:

[![Example](../Images/5a81d053676c7b8495d3af2ce9562524.png)](https://i.stack.imgur.com/0pXQz.png)

Notice that one more negative integer can be represented than positive integers.

Source:- [http://programmedlessons.org/AssemblyTutorial/Chapter-08/ass08_20.html](http://programmedlessons.org/AssemblyTutorial/Chapter-08/ass08_20.html)

# java - 为 Symbian 客户端获取 MSISDN

> ID：11433790
> 
> 赞同：3
> 
> 时间：2012-07-11T13:31:27.703
> 
> 标签：java, java-me, symbian, wap, msisdn

我需要获取 MSISDN 进行身份验证。通过任何其他方式进行身份验证都不是一种选择。

到目前为止，我可以将我的研究总结如下：

1.J2ME上没有获取MSISDN的API。

2.获取MSISDN的一种方法是在设备发出HTTP请求时获取它，因为MSISDN no是在HTTP标头中发送的。这不是一种可靠的方法，因为某些服务提供商不发送MSISDN no .另外，如果没有通过WAP网关获取请求，将无法获取MSISDN。我已从相关服务提供商处读取HTTP标头（使用PHP脚本），我可以确认标头中没有MSISDN .

我的疑问是：

1.该产品适用于电信服务提供商。如果不存在，我们可以做些什么来让它们在标题中包含 MSISDN no？

2.在安装过程中收到 MSISDN 后会发生什么？我读过一些地方，在下载之前必须对 JAD 文件进行更改。

3.还有其他获取MSISDN的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:01:47.803

对于包含在标题中的信息，它完全取决于运营商和我至少在英国的经验，他们都没有这样做。因此，不能保证该号码将永远存在。

可能存在妥协或解决方法，因为用户正在与您的服务器建立 http 连接，您可以要求他们在表单字段中输入他们的号码。收到该号码后，您会发送一条带有密钥的短信，他们需要在同一网页上输入该密钥才能进行安装。我不完全知道你想要什么，但至少你有某种验证用户就是他/她声称的那个人。收到正确的密钥代码后，您可以在继续安装之前相应地修改您的 jad 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:10:07.420

Symbian 前段时间成为OSS 时开放了内部API，可以在Symbian OS 的完整源码中找到。由于它依赖于平台，因此无法保证为某些 SDK 编译它可以在目标手机上运行。

# javascript - 三.js禁用深度测试

> ID：11433794
> 
> 赞同：6
> 
> 时间：2012-07-11T13:31:39.857
> 
> 标签：javascript, webgl, three.js

我使用一个 EffectComposer ：

```
renderer = new THREE.WebGLRenderer();
renderer.setDepthTest(false);
...
composer = new THREE.EffectComposer( renderer); 
```

所以我想禁用深度测试，但是当我这样做时：

```
composer.render();
var gl = renderer.context;
alert(gl.getParameter(gl.DEPTH_TEST)); 
```

该值为真而不是假。如何禁用深度测试？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-31T10:14:21.387

我意识到这是三年后的事了，但我在研究 Three.js（版本 r73）中的 z-buffer 时遇到了它。为了在渲染器中禁用 DEPTH_TEST，我最终执行了以下操作（Google Chrome 版本 47.0.2526.106 m）：

```
var renderer = new THREE.WebGLRenderer( { antialias: true });
renderer.setClearColor(0xaaaaaa);
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.context.disable(renderer.context.DEPTH_TEST);
document.body.appendChild(renderer.domElement);

var render = function () {
    requestAnimationFrame(render);
    renderer.render(scene, camera);
};

render();
var gl = renderer.context;
alert(gl.getParameter(gl.DEPTH_TEST)); 
```

关键是`renderer.context.disable(renderer.context.DEPTH_TEST)`在创建渲染器时。

我一开始尝试使用`renderer.setDepthTest(false)`，但实际上并没有加载。我没有深入研究这是否只是与我现有项目的交互、实际错误或可能已删除，但现在我建议只使用上述工作方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:04:40.820

你可以试试

```
gl.disable(gl.DEPTH_TEST); 
```

# mysql - Magento - 如何将文件加载到数据库中

> ID：11433797
> 
> 赞同：1
> 
> 时间：2012-07-11T13:31:46.713
> 
> 标签：mysql, magento

我想执行以下命令：

`INTO TABLE example_table FIELDS TERMINATED BY ';' LINES TERMINATED BY '\n' (field1,field2,field3);`

我试图这样：

```
$app = Mage::app();

umask(0);

Mage::setIsDeveloperMode(true);

$write = Mage::getSingleton('core/resource')->getConnection('core_write');
$write->query("INTO TABLE example_table
FIELDS TERMINATED BY ';'
LINES TERMINATED BY '\n'
(field1,field2,field3)"); 
```

我也想`CREATE OR REPLACE VIEW...`和`TRUNCATE example_table`

我得到的错误是：

`Error: Warning: PDOStatement::execute(): LOAD DATA LOCAL INFILE forbidden in \lib\Zend\Db\Statement\Pdo.php on line 228`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:13:46.767

好的，问题解决了。

```
$dbConfig = array(
    'host'      => 'HOST',
    'username'  => 'USER',
    'password'  => 'PASS',
    'dbname'    => 'DBNAME',
    'driver_options'=> array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES UTF8')
);
$db_magento = Zend_Db::factory('Pdo_Mysql', $dbConfig);
$db_magento->query("TRUNCATE table1");
    $db_magento->query("LOAD DATA INFILE '{$file_name}'
    INTO TABLE table1
    FIELDS TERMINATED BY ';'
    LINES TERMINATED BY '\n'
    (field1,field2,field3)"); 
```

我无法使用`LOAD DATA LOCAL INFILE`，但没有`LOCAL`它可以工作。

# javascript - UML 活动图中的异步回调

> ID：11433799
> 
> 赞同：9
> 
> 时间：2012-07-11T13:32:07.160
> 
> 标签：javascript, asynchronous, uml, activity-diagram

我正在尝试使用 UML 活动图为我的应用程序建模。我正在使用 JavaScript 和 Node.js 以及许多异步回调。这是我想出的：

![活动图](../Images/999612bdbdff267d25e1dd832dc2b8f2.png)

你怎么看？你明白发生了什么吗？我正在使用“通用连接器”将回调与操作（“run MyClass.myMethod）相关联，并使用叉节点来显示“并行”执行。我在任何地方都没有在活动图中找到关于回调的书面文字网络或我的书。

**编辑** 这将是图表的 JavaScript 代码：

```
var MyClass = function () {
    //constructor
};
MyClass.prototype = {
    myMethod : function(cb) {
        //this is an async method
        var result = 5 + 5;
        setTimeout(function () {
            cb(null, result);
        },100); //execute Callback after 100ms
    }
};

//instanciate a MyClass Object
var myClassInstance = new MyClass();

//create a callback function that prints the result
var callbackFunction = function (err,result) {
    console.log(result);
};

myClassInstance.myMethod(callbackFunction);
console.log('I am first'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T13:45:10.707

显示回调的正确方法如下：⁺

您实例化一个对象，将其传递给目标端口并`calculateTime`在其上调用指定的操作 ()。控制流立即继续，当异步操作完成时，结果被传输到结果引脚。可以通过向操作添加更多对象（输入）输入引脚来指定异步调用的参数。

![异步回调活动图](../Images/1e81dced74dee937b19792ef06898dff.png)

⁺（参见 UML 规范 11-08-06 11.3.10 CallOperationAction/11.3.8 CallAction）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T15:14:37.430

在活动图中显示回调的最佳方式是信号。只需考虑到信号是完全异步的（发送方和接收方之间完全分离），我不确定 javascript 中的情况是否如此。但是它们与您想要的含义更接近。

# javascript - MVC4 razor 在客户端 javascript 中从我的模型访问 JsonResult 数据

> ID：11433800
> 
> 赞同：4
> 
> 时间：2012-07-11T13:32:09.410
> 
> 标签：javascript, json, asp.net-mvc-4, jsonresult

我正在开发一个 MVC4 剃须刀项目。我有一个角色对象列表，我作为 jsonResult 存储在我的模型上，打算在我的客户端 javascript 中使用。

```
//Model
public JsonResult JsonRoles { get; set; }

//Controller
var myroles = from r in myroles select new { r.Id, r.Description };
var myModel.JsonRoles = Json(myroles);

//Client side javascript
var data = '@(Model.JsonRoles)';
alert(data); 
```

我试图在 javascript 中访问它，如下所示。当我发出警报时，我总是得到字符串“System.Web.Mvc.JsonResult”，但我需要的是 json 数据。我究竟做错了什么？有人可以指出我正确的方向吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T13:50:12.683

我已经使用 ViewData 解决了您的问题，并且我能够在类似的行上获得结果，您也可以解决模型属性

```
//Contoller Class 
 public ActionResult CreateRequest()
        {

            var data = new { Id = "one", Make = "Two" };

            ViewData["Data"] = Json(data);

            return View();

        }

//And client side is 

  <script type="text/javascript">
        var data = @Html.Raw(Json.Encode(ViewData["Data"]));
        alert(JSON.stringify(data.Data));
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:52:21.977

在 linqpad 中，我能够通过

```
var x= new System.Web.Mvc.JsonResult();
x.Data=new System.Web.Script.Serialization.JavaScriptSerializer().Serialize("testing, testing");
x.Data.Dump(); 
```

还检查了

```
var x= new System.Web.Mvc.JsonResult();
x.Data=new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(new{test="testing"});
x.Data.Dump(); 
```

这可能不是剃刀页面的正确解决方案。我预计

```
var data = "@{Model.JsonRoles.ExecuteResult(this.ControllerContext);}"; 
```

在适当的 mvc 应用程序中正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:01:16.463

`JsonResult`倾向于用作您打算从 Ajax 调用的操作方法的返回类型。

您需要使用`JavaScriptSerializer`来序列化您的“myroles”对象。例如

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
myModel.JsonRoles = serializer.Serialize(myroles); 
```

将模型上的 JsonRoles 类型更改为字符串。

```
public string JsonRoles { get; set; } 
```

最后，在您的视图中输出例如：

```
var data = @Html.Raw(Model.JsonRoles);
alert(data.id); 
```

# jquery - Slidetoggle + 外部 html：Jquery load() + 滚动问题

> ID：11433801
> 
> 赞同：0
> 
> 时间：2012-07-11T13:32:11.427
> 
> 标签：jquery, html, scroll, slidetoggle, jquery-load

**这是有问题的脚本部分**

```
<script type="text/javascript">

// To deploy big preview vertically :
var deployer;
deployer = "";

function deploy() {
    $("#" + deployer.substring(0, 4)).slideToggle({
        duration: 500,
        easing: 'easeOutCirc'
    });
}

function reset(bigno) {
    var attendre = false;
    var deployno = deployer.substring(0, 4);
    // close other pictures if opened
    if ((deployer == deployno + "_on") && (deployno != bigno)) {
        $("#" + deployno).slideToggle({
            duration: 300,
            easing: 'easeOutCirc'
        });
        attendre = true;
    }
    // if picture is opened or closed
    if (deployer == bigno + "_on") // if bigno is deployeddeployer = bigno + "_off"; // bigno closed
    else deployer = bigno + "_on"; // bigno opened
    // deploy the current picture
    if (attendre) setTimeout(deploy, 600);
    else deploy();
}
$(document).ready(function() {
    $(".vignette01").click(function() {
        reset("big1");
        return false;
    });
    $(".vignette02").click(function() {
        reset("big2");
        return false;
    });
    $(".vignette03").click(function() {
        reset("big3");
        return false;
    });
    $(".vignette04").click(function() {
        reset("big4");
        return false;
    });
});
$("#big1").toggle(false);
$("#big2").toggle(false);
$("#big3").toggle(false);
$("#big4").toggle(false);
// To scroll :
$(document).ready(function() {
    $('html, body').animate({
        scrollTop: $('div#topdocpart').offset().top
    }, 800, 'easeOutCirc');
});
$(function() {
    $('.vignette a').bind('click', function(event) {
        var $anchor = $(this);
        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top
        }, 1000, 'easeOutCirc');
        event.preventDefault();
    });
});
//load pages on click on small preview open a html content in #bigonglet
$(document).ready(function() {
    $('.vignette2 a').click(function() {
        var url = $('.onglet2 a').attr('href');
        $('#bigonglet').load(url);
        return false;
    });
    $('.vignette1 a').click(function() {
        var url = $('.onglet1 a').attr('href');
        $('#bigonglet').load(url);
        return false;
    });
});
</script> 
```

*我有一个我自己无法解决的问题。昨晚我失去了一半的头发试图解决它；）。如果本网站上的任何 NIIIIIIIIIICE（和有才华的）人可以帮助我，那应该很酷。我尝试在 jQuery 中制作一种图片库...*

[预览](http://designslide.byethost3.com/toggletest.html)（不要点击链接 page1 和 page2）

主要思想是**通过滑动切换垂直部署**一些**外部html页面中加载的内容**。你可以看到它不起作用。

1-如何在 html 内容出现之前有延迟？

*   **等待滑动切换被部署**或**定义延迟**

2-如何：

*   **当我重新点击它的按钮时关闭当前已经打开的 html 内容**？
*   **关闭当前已打开的 html 内容并打开一个新内容**？

如您所见，还有一个滚动功能（单击时滚动到每个大预览）。

**- 那么如何重新组合每个按钮上的这 3 个动作呢？**

***滚动、滑动切换、延迟加载外部 html。***

*非常感谢您的帮助。我很努力，但我的水平很低。*

**（如果需要，这是 html）**

```
<!-- Part Top div -->
        <div class="part" id="topdocpart"></div>
<!-- Header -->
<div id="header">
        <!-- the href of .onglet is loaded in #bigonglet -->
        <ul>
           <li class="onglet onglet1"><a href="creations/page01.html">Page1</a></li>
           <li class="onglet onglet2"><a href="creations/page02.html">Page2</a></li>
        </ul>

        <!-- this div load the iframe content-->
        <div id="bigonglet"></div>

        <!-- those div allows to slide vertically -->   
        <div class="part" id="part1" style='position:absolute; top:160px;'></div>
        <div class="part" id="part2" style='position:absolute; top:340px;'></div>   

</div>

<!-- main section -->

<div id="globalcontent">
    <div id="content">

    <!-- Row 01 : small preview -->

        <div class="rowsmallpreview">
            <div class="vignette vignette1">
            <a href="#part1" class="vignette01"><img  src="imbdg/badge01.jpg" width="236" height="130" alt="work01" /></a>            
            </div>

            <div class="vignette vignette2">
            <a href="#part1" class="vignette02"><img  src="imbdg/badge02.jpg" width="236" height="130" alt="work01" /></a>            
            </div>
        </div>

        <!-- Row 01 : big preview to hide (up and down)-->

        <div id="big1" class="workview"></div>
        <div id="big2" class="workview"></div>

    <!-- Row 02 -->

        <div class="rowsmallpreview">
            <div class="vignette">
            <a href="#part2" class="vignette03"><img  src="imbdg/badge03.jpg" width="236" height="130" alt="work01" /></a>            
            </div>

            <div class="vignette">
            <a href="#part2" class="vignette04"><img  src="imbdg/badge04.jpg" width="236" height="130" alt="work01" /></a>            
            </div>
        </div>

        <!-- Row 01 : big preview to hide (up and down)-->

        <div id="big3" class="workview"></div>
        <div id="big4" class="workview"></div>

    </div>
</div> 
```

* * *

我做了这个代码：

```
var deployer;                                                       
        deployer = "";                                                  
        var url ="";

        function deploydown() {
                url = $("#"+deployer.substring(0,6)+' a').attr('href');
                $("#"+deployer.substring(0,6)).slideDown({duration: 700, easing: 'easeOutCirc'}).load(url);
                }

            function reset(bigno) {
                var attendre=false;                                         
                var deployno=deployer.substring(0,6);                           

                if((deployer == deployno+"_on") && (deployno != bigno))                 
                {
                    $("#"+deployno).slideUp({duration: 300, easing: 'easeOutCirc'});    
                    attendre = true;  
                }

                if((deployer == deployno+"_on") && (deployno == bigno))                 
                {
                $("#"+deployno).slideUp({duration: 500, easing: 'easeOutCirc'});   
                    attendre = true;
                }

                if (deployer == bigno+"_on")                    
                    deployer = bigno+"_off";                    
                else
                    deployer = bigno+"_on";                 

                if ((attendre) && (deployno != bigno))                  
                    {
                    setTimeout(deploydown,400);                         
                    }

                else if ((attendre) && (deployno == bigno))         
                    {
                    $("#"+deployer.substring(0,6)); 
                    }

                else
                    {
                    deploydown();
                    }

            } 
```

所以现在它正在使用 load() load(url) 加载一个外部 html

但是如何在关闭时“重置”加载？

例如，当它**slideUp**时，将当前 html 加载**为空的**。然后
**在它 slideDown 时重新加载 html**。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:40:05.903

因为有一个操作顺序......你可以做的是：

```
 $(SELECTOR).slideToggle().load(url); 
```

这样，它会在加载 url 之前滑动打开。显示操作顺序的另一个示例是：

```
 $(SELECTOR).slideToggle().slideToggle().slideToggle().slideToggle().slideToggle(); 
```

这将连续切换 5 次。

# wpf - 为什么要使用 DataTemplate.DataType

> ID：11433802
> 
> 赞同：4
> 
> 时间：2012-07-11T13:32:11.570
> 
> 标签：wpf, xaml, datatemplate

当我创建资源时，我们在其中指定 DataType：

```
<Window.Resources>
    <DataTemplate x:Key="StudentView"
                  DataType="this:StudentData">
          <TextBox Text="{Binding Path=StudentFirstName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                   Grid.Row="1"
                   Grid.Column="2"
                   VerticalAlignment="Center" />
          <TextBox Text="{Binding Path=StudentGradePointAverage}"
                   Grid.Row="2"
                   Grid.Column="2"
                   VerticalAlignment="Center" />
    </DataTemplate>
<Window.Resources> 
```

并且在绑定时：

```
<ItemsControl ItemsSource="{Binding TheStudents}"
              ItemTemplate="{StaticResource StudentView}"> 
```

那么我们为什么要使用 DataType，即使我删除了 DatType ，我的示例运行良好。它是否限制了某些类型，可以在 DataTemplete 中？

但是我尝试将其中一个 TextBox 与垃圾值（视图模型中不存在）绑定，它工作正常！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T13:35:42.420

`DataType`用于隐式应用程序，如果您删除了，则`x:Key`不需要在`ItemsControl.ItemTemplate`示例中引用它。阅读[文档](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.datatype.aspx)。

> [此属性与Style](http://msdn.microsoft.com/en-us/library/system.windows.style.aspx)类的[TargetType](http://msdn.microsoft.com/en-us/library/system.windows.style.targettype.aspx)属性非常相似。当您将此属性设置为数据类型而不指定**x:Key**时，[DataTemplate](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx)会自动应用于该类型的数据对象。请注意，当您这样做时，会隐式设置**x:Key 。**因此，如果您为此[DataTemplate](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx)分配一个**x:Key**值，您将覆盖隐式**x:Key**，并且不会自动应用[DataTemplate 。](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx)

# javascript - 编辑显示值时更改 JQuery 数据表中一行的样式

> ID：11433804
> 
> 赞同：0
> 
> 时间：2012-07-11T13:32:22.497
> 
> 标签：javascript, jquery, css, asp.net-mvc-3, datatable

我有一个来自 JQuery 插件的数据表，它显示从数据库中获取的对象。在每一行的末尾都有一个“编辑”按钮，单击该按钮会打开一个弹出窗口，其中包含允许用户更改对象的字段。

下面的代码是打开弹出窗口的“编辑”按钮。

```
<td>@Ajax.ActionLink("Edit",
                                 "controllerMethodReturningEditView",
                                 new
                                 {
                                     Id = @m.Id
                                 },
                                 new AjaxOptions
                                 {
                                     HttpMethod = "GET",
                                     UpdateTargetId = "popupBox",
                                     InsertionMode = InsertionMode.Replace,
                                     OnSuccess = "openPopup('myPopup')"
                                 })</td> 
```

按下编辑按钮时调用的控制器方法只是打开一个在弹出框中部分显示的视图

```
return PartialView("editObjectView", objectModel); 
```

而这个“editObjectView”只包含一个带有输入字段的表单。

```
@using(Html.BeginForm(...
           <label>...</label><input ... />
           .... and so on 
```

然后在此弹出窗口中，允许用户编辑显示对象的值。当用户在弹出窗口中按下“保存”按钮时，新值将被发送到控制器方法，该方法将值（到对象）保存在数据库中。保存值后，控制器方法调用加载第一个视图（显示数据表的视图）的控制器方法，该方法从数据库中请求所有对象，以便显示新对象或对象更改。

现在这是我的问题：在编辑对象后重新加载页面时，如何更改已编辑行的样式？我想要的只是在最近编辑的行周围设置一个红色边框。如果我不必通过用于重新加载页面的所有控制器方法发送对象，我会更喜欢。

感谢您的帮助，不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:44:22.200

不知道返回到页面的内容，也不知道要更新的样式。

假设您要交替每行 css 类。将内容添加到页面后，您可以执行以下操作：

```
$("tr:nth-child(odd)", "#YOUR_TABLE_ID").addClass("odd-row"); 
```

或者，确保每行 HTML 都被格式化为一个唯一的 ID 标签“...”，然后在添加到页面后做一些 jQuery 设置类。

如果请求是 Ajax 请求，并且您使用 json 返回一些内容 - 例如：

```
var json { Id = Table.ID, status = true }; 
```

然后 OnSuccess 事件会做这样的事情：

```
function OnSaveSuccess(data) {
    if (data.status) {
        $("#" + data.Id).addClass("highlight-row");
    } else {
    console.warn("save was not successful!");
    }
} 
```

# gwt - GWT ui.xml - 无法将 DocklayoutPanel 转换为自定义面板

> ID：11433805
> 
> 赞同：0
> 
> 时间：2012-07-11T13:32:27.047
> 
> 标签：gwt, uibinder

所以问题是，我有一个 CommonLayout 小部件，它有自己的 ui.xml。

```
public class MyLayout extends Composite implements IsWidget,MyLayoutIntf,AcceptsOneWidget {

  private static MyLayoutUiBinder uiBinder = GWT.create(MyLayoutUiBinder.class);

  private FaGuiI18nConstant faGui18Const = GWT.create(FaGuiI18nConstant.class);

  interface MyLayoutUiBinder extends UiBinder<Widget, MyLayout>{
  }

 @UiField
 FaSplitLayoutPanel centerPanel;

 @UiField
 Label applnTitle;

 @UiField
 Label loggedInUser;

 @UiField
 FaButton logoutButton;

 @UiField
 FaButton homeButton;

 Presenter presenter;

 public MyLayout(){
  initWidget(uiBinder.createAndBindUi(this));
  this.logoutButton.setButtonText(faGui18Const.logout());
  this.logoutButton.setVisible(false);
  this.homeButton.setButtonText(faGui18Const.home());
  this.homeButton.setVisible(false);
 }

 public SplitLayoutPanel getCenterPanel(){
  return centerPanel;
 }

 @Override
 public void setPresenter(Presenter presenter){
   this.presenter = presenter;
 }

 @Override
 public void setWidgetName(String widgetName){
  // TODO Auto-generated method stub
 }

 @Override
 public void setAppName(String appName){
   applnTitle.setText(appName);

 }

 @Override
 public void setUsername(String userName){
   loggedInUser.setText(userName);
 }

 @Override
 public void setWidget(IsWidget w){
  asWidgetOrNull(w);
 }

 @Override
 public FaButton getLogoutButton(){
  return this.logoutButton;
 }

 @Override
 public FaButton getHomeButton(){
   return this.homeButton;
 }
} 
```

这是它的 ui.xml：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
xmlns:g="urn:import:com.google.gwt.user.client.ui"
xmlns:commonEditor="urn:import:com.amadeus.psp.fa.gui.common.client.view">
<ui:with
    type="com.amadeus.psp.fa.gui.common.client.constants.FaGuiI18nConstant"
    field="c" />
<ui:style field='layoutStyle' src="FACommon.css">

</ui:style>

<g:DockLayoutPanel unit='PX'>
    <g:north size='82'>
        <g:HTMLPanel styleName="{layoutStyle.headerPanel}">
            <table cellspcing="0" cellpadding="0" border="0" width="100%"
                height="100%">
                <tr>
                    <td class="{layoutStyle.logo}" align="center" valign="middle">&nbsp;</td>
                    <td align="center" class="{layoutStyle.applicationTitle}">
                        <g:Label styleName="{layoutStyle.welcomeTitle}" text="{c.welcomeTitle}"></g:Label>
                        <br />
                        <g:Label ui:field="applnTitle" styleName="{layoutStyle.applnTitle}"></g:Label>
                    </td>
                    <td align="right" valign="top" width="250" class="{layoutStyle.user}">
                        <commonEditor:FaButton ui:field="homeButton"  styleName="{layoutStyle.leftFloated}"/><commonEditor:FaButton ui:field="logoutButton" styleName="{layoutStyle.leftFloated}"/>
                        <g:Label styleName="{layoutStyle.welcomeUser}" text="{c.userWelcome}" />
                        <g:Label ui:field="loggedInUser" styleName="{layoutStyle.loggedinUser}"></g:Label>
                    </td>
                </tr>
            </table>
        </g:HTMLPanel>
    </g:north>
    <g:center>

    **<commonEditor:FaSplitLayoutPanel ui:field="centerPanel"
            styleName="{layoutStyle.westBorder} {layoutStyle.centerBorder}"/>**

    </g:center>
    <g:south size='5'>
        <g:HTMLPanel styleName="{layoutStyle.footer}">
        </g:HTMLPanel>
    </g:south>
</g:DockLayoutPanel> 
```

在那个 ui.xml 中，我使用了一个扩展 SplitLayout 面板的自定义小部件。

这是我的自定义面板：

```
public class FaSplitLayoutPanel extends SplitLayoutPanel{
 public FaSplitLayoutPanel(){
 super();
}

 @Override
public void onResize(){
  if (this.getWidgetCount() == 3){
   final Widget splitterWidget = this.getWidget(1);
    if (this.getWidget(0).getOffsetWidth() >= 330){
    splitterWidget.removeStyleName(FaResources.INSTANCE.css().resizeCursor());
    splitterWidget.removeStyleName(FaResources.INSTANCE.css().resizeRightCursor());
    splitterWidget.addStyleName(FaResources.INSTANCE.css().resizeLeftCursor());

  } else if (this.getWidget(0).getOffsetWidth() == 0){
    splitterWidget.removeStyleName(FaResources.INSTANCE.css().resizeCursor());
    splitterWidget.removeStyleName(FaResources.INSTANCE.css().resizeLeftCursor());
    splitterWidget.addStyleName(FaResources.INSTANCE.css().resizeRightCursor());
  } else{
    splitterWidget.removeStyleName(FaResources.INSTANCE.css().resizeLeftCursor());
    splitterWidget.removeStyleName(FaResources.INSTANCE.css().resizeRightCursor());
    splitterWidget.addStyleName(FaResources.INSTANCE.css().resizeCursor());

  }
}
}
} 
```

当我运行这个时：它显示一个错误，说不能将 Docklayout 转换为 FaSplitlayout，并说查看生成的代码。在生成的代码中，我找到了导致 Probelm 的行：

```
com.google.gwt.user.client.ui.Label f_Label4 = (com.google.gwt.user.client.ui.Label) GWT.create(com.google.gwt.user.client.ui.Label.class);
java.lang.String domId5 = com.google.gwt.dom.client.Document.get().createUniqueId();
com.google.gwt.user.client.ui.Label loggedInUser = (com.google.gwt.user.client.ui.Label) GWT.create(com.google.gwt.user.client.ui.Label.class);
com.google.gwt.user.client.ui.HTMLPanel f_HTMLPanel2 = new com.google.gwt.user.client.ui.HTMLPanel(template.html1("" + layoutStyle.logo() + "", "" + layoutStyle.applicationTitle() + "", domId0, domId1, "" + layoutStyle.user() + "", domId2, domId3, domId4, domId5).asString());
***com.amadeus.psp.fa.gui.common.client.view.FaSplitLayoutPanel centerPanel = new com.google.gwt.user.client.ui.DockLayoutPanel(com.google.gwt.dom.client.Style.Unit.PX);***
com.google.gwt.user.client.ui.HTMLPanel f_HTMLPanel5 = new com.google.gwt.user.client.ui.HTMLPanel(template.html2().asString());
com.google.gwt.user.client.ui.DockLayoutPanel f_DockLayoutPanel1 = new com.google.gwt.user.client.ui.DockLayoutPanel(com.google.gwt.dom.client.Style.Unit.PX); 
```

这里可能是什么问题？任何人都可以请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:12:58.100

这是 GWT 中的一个错误。它应该在最近发布的 2.5.0-rc1 中修复。请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=4342](http://code.google.com/p/google-web-toolkit/issues/detail?id=4342)

# rest - 处理用户仅授权某些子资源的集合的 GET 请求

> ID：11433806
> 
> 赞同：2
> 
> 时间：2012-07-11T13:32:27.637
> 
> 标签：rest, authorization

我正在寻找一种干净的方法来处理您拥有代表集合的资源的情况，但经过身份验证的用户可能仅有权访问集合中资源的某些子集。

例如一个博客 API：

`GET /post`- 列出帖子

`GET /post/1`- 获取特定的帖子

帖子可以是公开的或私人的。因此，如果我有私人访问权限，/post api 可以返回*所有*帖子，但如果我只有公共访问权限，它将仅限于返回公共帖子。

这通常是如何处理的？有缓存后果吗？在这种情况下，维护 GET 的语义是否存在问题？

注意：身份验证是通过在请求标头中发送的令牌处理的，不确定是否也起作用。

编辑：澄清我对如何在 RESTful 系统中正确建模感兴趣，而不是如何处理实际授权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:39:24.017

您可以使用会话变量来设置用户的授权级别。当他们访问帖子时，您可以检查他们的授权级别并仅返回他们有权访问的帖子。

有关会话和会话变量的更多信息，请[点击此处](http://www.w3schools.com/php/php_sessions.asp)和[此处](http://php.about.com/od/advancedphp/ss/php_sessions_2.htm)。

# python - Django：查询数据库

> ID：11433810
> 
> 赞同：2
> 
> 时间：2012-07-11T13:32:54.503
> 
> 标签：python, database, django, pagination

我有这个模型

```
class messages(models.Model):
    status_choices = (
        (u'read',u'read'),
        (u'unread',u'unread')
        )
    user = models.ForeignKey(User)
    message = models.TextField()
    status = models.CharField(max_length=6,choices=status_choices,default='unread')
    sender = models.ForeignKey(User,related_name="sender") 
```

现在我只想获取属于“user1”的前 10 条消息，在第二个请求中获取接下来的 10 条消息，依此类推。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:34:03.900

Django 已经通过一个[`Paginator`](https://docs.djangoproject.com/en/dev/topics/pagination/)对象提供了这个功能。在您的 URL 中，您需要一个`page`参数来说明您在哪个页面上，并且在您的视图中您需要构造一个`Paginator`对象。您需要指定页面上的对象数量（在您的情况下为 10），`Paginator`其余的将由您完成。

例如，以下代码将打印第 3 页上显示的所有实例：

```
from django.core.paginator import Paginator

objects = messages.objects.all()
p = Paginator(objects, 10)
page3 = p.page(3)
print page3.object_list 
```

该文档提供了有关如何实现视图以及如何将对象列表传递给模板的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:39:22.003

首先有两件事

*   您的模型应该大写（约定）
*   “消息”是 contrib 包的一部分，在尝试同时使用 contrib 的消息和您的应用程序的消息时，**如果没有命名空间**会引发冲突（https://docs.djangoproject.com/en/dev/ref/contrib/messages/#module -django.contrib.messages)

### 编辑

删除了我的代码示例，碰到了 Simeon Visser 的解决方案

# node.js - Windows Azure 云服务 IIS 有时会返回 503 错误

> ID：11433818
> 
> 赞同：3
> 
> 时间：2012-07-11T13:33:23.143
> 
> 标签：node.js, iis, azure, azure-web-roles

我正在为 Azure 云服务开发 node.js 应用程序。一切正常，但有时我的应用程序在 Azure 上部署时返回 503 错误，没有特别的原因。我通过远程桌面连接角色VM，在事件列表中发现如下错误，对应503码返回的时间：

> 为应用程序池“6cd02903-1cba-4667-9d0b-20883ad3f0de”提供服务的进程意外终止。进程 ID 为“2284”。进程退出代码是“0xffffffffe”。

我尝试用谷歌搜索该错误消息，似乎 IIS 配置错误通常会导致问题，但在这种情况下它似乎是持久的，而不仅仅是有时像我的经验那样。此外，我对更改 Azure 提供的现成 Web 角色服务器上的 IIS 配置没有信心。我感觉它与节点有关，更可能是 iis 节点问题。

任何调试问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T22:43:17.687

首先，这种崩溃反映了您的应用程序域由于您的网络应用程序中的一些异常而崩溃。这类问题是关键问题。因为您使用的是 node.js，所以您的某些代码很可能会导致此类问题，但是需要正确调查此问题。

如果您在应用程序池中关闭“快速故障保护”，您可以避免该问题，但不确定要多久，因为如果您在任何地方的代码有任何问题，最好先解决问题而不是掩盖它。

由于您的退出代码是 0xFFFFFFFE，这与代码**CLEAN_WORKER_PROCESS_EXIT_CODE**相关意味着该进程已终止干净，因为崩溃不是突然/强制的。你可以做的是首先对你的 Azure VM 进行 RDP（我希望你有小型或更大的 VM），然后**[调试诊断工具](http://support.microsoft.com/kb/919789)**来调查 IIS 崩溃问题。如果您无法解决此问题，您可以联系[Windows Azure 支持团队](https://support.microsoft.com/oas/default.aspx?gprid=14928&st=1&wfxredirect=1&sd=gn)以获得免费帮助，他们将帮助您解决此问题。

# java - 使用 HashSet 处理整数

> ID：11433820
> 
> 赞同：1
> 
> 时间：2012-07-11T13:33:38.883
> 
> 标签：java

我有两个清单。我想找到两者中最小的公数。我想使用 HashSet 因为它不允许重复。我可以在向其中添加两个列表元素的同时找出常见的数字。HashSet 仅`constant time`用于插入。这可以让我`O(n)`找到两个中最小的共同点。但是 HashSet 怎么能插入`n`元素`constant time`呢？在这种情况下，添加最后一个元素需要`O(n)`时间，因为要找到正确的存储桶，在最坏的情况下必须将哈希码与 n 个存储桶进行比较。请更正这一点，并提前感谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:37:18.397

该算法看起来很简单：

1.  构造一个`HashSet`包含 list 元素的a `A`。
2.  初始化`min`为像`Integer.MAX_VALUE`.
3.  对于 中的每个元素`B`，测试它是否在`HashSet`. 如果是，并且小于`min`，则更新`min`。

无论如何，散列算法或多或少总是假设散列实际上是一个好的散列函数，并且您不必担心 O(n) 最坏的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:36:23.673

找到桶是恒定的时间——它只取决于给定对象的哈希值，而不是现有对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:36:46.977

您可以在任何算法书籍（例如 Corman、Knuth）中找到答案。很快：bucketIndex = toPositiveInteger(hashcode()) % buckets.length

# google-docs-api - Google Documents List API 3.0 的 Java API 文档在哪里？

> ID：11433821
> 
> 赞同：0
> 
> 时间：2012-07-11T13:33:39.047
> 
> 标签：google-docs-api

自 Google Documents List API 版本 3.0 以来，现在没有单独的 Java 指南，就像 v2.0（现已弃用）一样。

有少量的 Java，但主要是 .Net。我必须参考已弃用的 API (v2.0) 才能获得有意义的 Java 文档。

只是想知道 Java 文档是否会在某个时候更新为与 .Net 一样完整，您是否建议我们同时继续使用已弃用的 API 文档。

我认为 Google 是 Python/Java 之家，那么为什么偏向于 .Net 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:32:56.057

您应该采用较新的 Google Drive API，它具有 Documents List API 的所有功能和完整的 Java 文档：

[https://developers.google.com/drive/](https://developers.google.com/drive/)

# objective-c - Objective-C：forKey 和 forKeyPath 有什么区别？

> ID：11433822
> 
> 赞同：7
> 
> 时间：2012-07-11T13:33:39.520
> 
> 标签：objective-c, ios

NSMutableDicitionary 的 setValue 方法中的 forKey 和 forKeyPath 有什么区别？我在文档中查找了两者，它们对我来说似乎相同。我尝试了以下代码，但我无法区分差异。

```
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
[dict setValue:@"abc" forKey:@"ABC"];
[dict setValue:@"123" forKeyPath:@"xyz"];
for (NSString* key in dict) {
    id val = [dict objectForKey:key];
    NSLog(@"%@, %@", key, val);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T13:44:49.033

这两种方法都是[键值编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)的一部分，通常不应用于字典中的元素访问。它们仅适用于类型的键`NSString`并且需要特定的语法。

它们两者之间的区别在于指定（单个）键只会查找该项目。

另一方面，指定关键路径遵循通过对象的路径。如果你有一个字典字典，你可以使用`"key1.key2"`.

如果您只想访问字典中的元素，您应该使用`objectForKey:`and `setObject:forKey:`。

**编辑**回答为什么`valueForKey:`不应该使用：

1.  `valueForKey:`仅适用于字符串键。字典可以使用其他对象作为键。
2.  `valueForKey:`以不同方式处理以“@”字符开头的键。您不能访问键以 开头的元素`@`。
3.  最重要的是：通过使用`valueForKey:`你是在说：“我正在使用 KVC”。这样做应该是有原因的。使用时，`objectForKey:`您只是通过自然的、预期的 API 访问字典中的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:42:21.310

Apple 文档：[NSKeyValueCoding 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)

**设置值：forKey：**

将给定键指定的接收器的属性设置为给定值。

*例子：*

```
[foo setValue:@"blah blah" forKey:@"stringOnFoo"]; 
```

**设置值：forKeyPath：**

将由给定键路径标识的属性的值设置为给定值。

*例子：*

```
[foo setValue:@"The quick brown fox" forKeyPath:@"bar.stringOnBar"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:57:09.630

`keyPath`可用于遍历任意对象路径，只要它们实现`NSKeyValueCoding`. 他们不需要是`NSDictionary`s。例如：

```
NSString *departmentName = [self valueForKeyPath:@"[person.department.name"]; 
```

虽然这是一个人为的例子。

# tomcat - 尝试在 tomcat 中查看 html 文件时出现 404 错误

> ID：11433823
> 
> 赞同：2
> 
> 时间：2012-07-11T13:33:45.707
> 
> 标签：tomcat

我是 tomcat 的新手。我刚刚开始阅读 headfirst 的 servlets 书。我已经安装了tomcat，并且可以在//http://localhost:8080/examples/下查看内容。书中提到要在tomcat的webapps文件夹下创建一个名为“beer”的文件夹。然后在此文件夹中放置 .html 文件和包含 web.xml 文件的 WEB-INF 文件夹。但是，当我尝试运行 //http://localhost:8080/beer 时，出现 404 错误。我已经阅读了 stackoverflow 的另一篇文章，该文章建议添加一个 jsp 文件，但该书没有提到这一点来显示 .html 文件。任何建议非常感谢？

最终解决了这个错误。。这是一个简单的从网上复制代码导致的解析错误。web.xml 文件中的撇号不正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:38:42.770

确保在您的 web.xml 文件中，您的 html 文件在欢迎文件列表标记 .like 中声明

```
<welcome-file-list>
<welcome-file>index.html</welcome-file>
<welcome-file>index.htm</welcome-file>
<welcome-file>index.jsp</welcome-file>
<welcome-file>default.html</welcome-file>
<welcome-file>default.htm</welcome-file>
<welcome-file>default.jsp</welcome-file> 
```

并且您的 html 文件名应该在那里。

# javascript - 发送 keyup 事件时如何避免竞争条件

> ID：11433829
> 
> 赞同：3
> 
> 时间：2012-07-11T13:34:07.927
> 
> 标签：javascript, backbone.js

我有一个函数`matcher`，每次发送 keyup 事件时都会调用它。

这个函数属于一个看起来像这样（1）的模块。
如果在获取完成之前完成另一个调用怎么办？
如何在本模块 (1) 中解决此问题？

* * *

(1)

```
(function ($, UserCollection) {

    var userCollection;

    var matcher = function (request, response) {
        if (!userCollection) {
            userCollection = new UserCollection();
            userCollection.fetch();
        } else {
            isMatched(request, response);
        }
    };

    return matcher;
}(jquery, UserCollection)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:35:53.333

我将采用不同的，可能是矫枉过正的方法并使用[由`collection.fetch`](http://backbonejs.org/#Collection-fetch).

```
var Matcher=(function($,UserCollection) {

    var xhr=null, userCollection=null;

    // matching against a defined ID for testing purpose
    function isMatched(id) {
        return userCollection.get(id);
    }

    // the request would be an ID in my example,
    // and the callback is the function invoked when the collection is fetched
    function matcher(request, callback) {
        if (!xhr) {
            userCollection = new UserCollection();

            // fetch returns a handy xhr object used for the deferred
            xhr=userCollection.fetch(); 
        }

        xhr.then(function() {
            callback(isMatched(request));
        });
    }       

    return matcher;

})(jQuery, UserCollection); 
```

如果 xhr 已经解析，则立即调用回调，如果没有，则在请求完成时调用：有关更多信息，请参阅[jQuery.Deferred](http://api.jquery.com/category/deferred-object/)。

你会用它作为

```
Matcher(1,console.log);
Matcher(2,console.log); 
```

还有一个小提琴[http://jsfiddle.net/EWSAV/1/](http://jsfiddle.net/EWSAV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:05:53.473

只要您运行同步操作，这应该没问题，因为事件会及时执行。

但是，您可以添加第二个变量来指示匹配是否正在进行中。

像这样的东西：

```
(function ($, UserCollection) {

    var userCollection;
    var inProgress = false;

    var matcher = function (request, response) {
        if (!inProgress){
           if (!userCollection) {
               inProgress = true;
               userCollection = new UserCollection();
               userCollection.fetch();
           } else {
               isMatched(request, response);
           }
           // inProgress = false; - after your asynchonous code is executed
        }
    };

    return matcher;
}(jquery, UserCollection)); 
```

这段代码可能不起作用，但我想你明白了。

但是，这种方法可能需要您的异步脚本在同一范围内才能访问`inProgress`. 更好的选择可能是在 fetch 上使用回调：

```
userCollection.fetch({ success:function(){inProgress=false} }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T14:09:53.360

According to [Backbone.js documentation](http://backbonejs.org/#Model-fetch), `fetch()` accepts a callback function to be called after a successful "fetch". So you can have a global variable indicating the state of the current "fetch". This is the basic idea, I think you can work your way from here

```
fetching = false;
//Event fired ->
if (!fetching ){
fetching = true;
..fetch({success: function(){fetching = false;}});
} 
```

# php - 使用 PHP 填充表的最有效方法是什么？

> ID：11433830
> 
> 赞同：0
> 
> 时间：2012-07-11T13:34:09.007
> 
> 标签：php, jquery, mysql

我正在为一个表格使用 jQuery 脚本，该表格对数据进行分页和搜索。它按应有的方式工作和发挥作用。

我正在使用包含超过 1,000 条记录的数据填充表，并且我目前正在使用 PHP while 语句来填充它。

在`table`我有这个语句的代码中，首先我执行查询来获取数据，`$article = mysql_query("SELECT * FROM articles ORDER BY published DESC");`

然后我使用 while 语句来填充 - `while($articles = mysql_fetch_array($article)) {`

虽然这确实有效，但页面加载时间很差，需要很长时间才能加载。显然，这不是最有效的填充方式。有没有一种“更简单”和有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:39:05.373

您可以将数据类型更改为更小，以便下载更少。

通过选择 * 而不是您需要的特定表格，您可能下载了很多多余的数据。

您还可以使用 LIMIT x 来限制您获得的文章/结果的数量（您可能实际上不需要在页面上显示 1000 条，对吧？...）

除此之外，您无法加快速度，因为加载需要很长时间，因为从数据库下载需要时间，而不是 PHP 脚本的效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:45:25.090

您是在一个页面上显示所有 1000 篇文章，还是使用 jQuery 一次翻阅 50 篇文章？

如果你在做后者，你为什么要获得所有 1000 条记录？相反，您可以将 sql 更改为以下内容：

```
 $startRecord = N // set to some value, initially 0
 $numRecords = 50;

 $query = "SELECT * FROM articles ORDER BY published DESC limit $startRecord, $numRecords";
 $result = mysql_query($query); 
```

这将获得前 50 条记录。修改 $startRecord 变量以从您的数据集中获取其他记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:44:04.170

(mysql)OFFSET + (php)PAGINATION + (mysql)OPTIMIZATION (比如索引键...)

# c# - 将标签移出饼图

> ID：11433841
> 
> 赞同：5
> 
> 时间：2012-07-11T13:34:36.563
> 
> 标签：c#, asp.net-mvc, mschart

我正在尝试使用 VS2010（mvc、ef 和 asp.net）中的罐装图表控件将饼图的标签移开

这是我显示饼图的代码。

```
 string xx = activePhysicianID;
  ArrayList xValue = new ArrayList();
  ArrayList yValue = new ArrayList();
  XXXXX_MainEntities dbContext = new XXXXX_MainEntities();
  var results = dbContext.Payor.Where(rs => rs.PhysicianIdentity.Equals(xx));

  results.ToList().ForEach(rs => xValue.Add(rs.Identifier));
  results.ToList().ForEach(rs => yValue.Add(rs.Strength));

  var chart = new Chart(600, 300, ChartTheme.Blue);

  chart.AddSeries(chartType: "Pie", xValue: xValue, yValues: yValue);
  chart.AddTitle("Payor");
  chart.Write("png");

  return null; 
```

饼图渲染OK，但是饼图上的标签，太难看懂了。我想用指向该段的线来标记图表之外的标签。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T23:13:46.157

尝试这个：

```
chart.Series["Pie"]["PieLabelStyle"] = "Outside"; 
```

# objective-c - 如何在拥有浅色的情况下获得较深的颜色？

> ID：11433843
> 
> 赞同：0
> 
> 时间：2012-07-11T13:34:42.003
> 
> 标签：objective-c, uiview, uicolor, cgcolor

我有一个来自服务器的颜色代码，我正在使用该颜色来设置 UIView 的颜色。现在我想用比我得到的颜色更暗（强度更高）的颜色设置 UIView 的边框。这怎么可能 ？请让我知道并告诉我您是否有任何想法要做同样的事情。

```
view.backgroundColor = [view setColor].CGColor;
view.layer.borderWidth = 1.5;
const CGFloat* components = CGColorGetComponents(view.setColor.CGColor);
NSLog(@"Red: %f", components[0]);
NSLog(@"Green: %f", components[1]);
NSLog(@"Blue: %f", components[2]);
NSLog(@"Alpha: %f", CGColorGetAlpha(view.setColor.CGColor));

/*need to set this border color as a dark color*/<br>
view.layer.borderColor = [view setColor].CGColor; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:42:31.170

将每个颜色值降低一个档次。所以像

`[UIColor colorWithRed:oldRed*0.75f green:oldGreen*0.75f blue:oldBlue*0.75f alpha:1.0]`

# drop-down-menu - 具有多个条件的流沙 - 如何使用 ul 菜单而不是选择下拉菜单

> ID：11433844
> 
> 赞同：1
> 
> 时间：2012-07-11T13:34:50.527
> 
> 标签：drop-down-menu, menu, filter, quicksand

我正在尝试将流沙与多个过滤器一起使用，我找到了一个很好的例子： [http ://www.danieltulp.nl/work/quicksand-multiple.htm](http://www.danieltulp.nl/work/quicksand-multiple.htm)

像这样工作：

```
// DOMContentLoaded
$(function() {
// bind dropdowns in the form
var $filterAlpha = $('#filter select[name="alpha"]');
var $filterBeta = $('#filter select[name="beta"]');
var $filterGamma = $('#filter select[name="gamma"]');

// get the first collection
var $applications = $('#applications');

// clone applications to get a second collection
var $data = $applications.clone();

// attempt to call Quicksand on every form change
$('#filter li a').click(function() {
$(this).addClass('animate');
if ($($filterAlpha).val() == '0'){
if ($($filterBeta).val() == '0'){
if ($($filterGamma).val() == '0'){
    //0-0-0
    var $filteredData = $data.find('div');
} else {
    //0-0-1
    var $filteredData = $data.find('div[data-gamma=' + $($filterGamma).val() + ']' );
}
} else {
if ($($filterGamma).val() == '0'){
    //0-1-0
    var $filteredData = $data.find('div[data-beta=' + $($filterBeta).val() + ']' );
} else {
    //0-1-1
    var $filteredData = $data.find('div[data-beta=' + $($filterBeta).val() + ']' + 'div[data-gamma=' + $($filterGamma).val() + ']');
}
}
} else {
if ($($filterBeta).val() == '0'){
if ($($filterGamma).val() == '0'){
    //1-0-0
    var $filteredData = $data.find('div[data-alpha=' + $($filterAlpha).val() + ']' );
} else {
    //1-0-1
    var $filteredData = $data.find('div[data-alpha=' + $($filterAlpha).val() + ']' + 'div[data-gamma=' + $($filterGamma).val() + ']');
}
} else {
if ($($filterGamma).val() == '0'){
    //1-1-0
    var $filteredData = $data.find('div[data-alpha=' + $($filterAlpha).val() + ']' + 'div[data-beta=' + $($filterBeta).val() + ']');
} else {
    //1-1-1
    var $filteredData = $data.find('div[data-alpha=' + $($filterAlpha).val() + ']' + 'div[data-beta=' + $($filterBeta).val() + ']' + 'div[data-gamma=' + $($filterGamma).val() + ']');
}
}
}

// finally, call quicksand
$applications.quicksand($filteredData, {
duration: 1000,
easing: 'easeInOutQuad',
adjustHeight:   'auto'
});
});
}); 
```

和html：

```
<form id="filter">
    <select name="alpha">
        <option value="0">All items</option>
        <option value="1">Pepper</option>
        <option value="2">Apple</option>
    </select>
    <select name="beta">
        <option value="0">All colours</option>
        <option value="1">Red</option>
        <option value="2">Green</option>
    </select>
    <select name="gamma">
        <option value="0">All places</option>
        <option value="1">Couche</option>
        <option value="2">Table</option>
    </select>
</form>
<div id="applications" class="image-grid">
    <div class="animate" data-id="id-1" data-alpha="2" data-beta="1" data-gamma="1">
        Apple<br />Red<br />Couche
    </div>
    <div class="animate" data-id="id-2" data-alpha="1" data-beta="1" data-gamma="2">
        Pepper<br />Red<br />Table
    </div>
    <div class="animate" data-id="id-3" data-alpha="1" data-beta="2" data-gamma="1">
        Pepper<br />Green<br />Couche
    </div>
    <div class="animate" data-id="id-4" data-alpha="2" data-beta="1" data-gamma="1">
        Apple<br />Red<br />Couche
    </div>
    <div class="animate" data-id="id-5" data-alpha="1" data-beta="2" data-gamma="2">
        Pepper<br />Green<br />Table
    </div>
    <div class="animate" data-id="id-6" data-alpha="1" data-beta="1" data-gamma="1">
        Pepper<br />Red<br />Couche
    </div>
    <div class="animate" data-id="id-7" data-alpha="1" data-beta="2" data-gamma="2">
        Pepper<br />Green<br />Table
    </div>
    <div class="animate" data-id="id-8" data-alpha="1" data-beta="2" data-gamma="1">
        Pepper<br />Green<br />Couche
    </div>
    <div class="animate" data-id="id-9" data-alpha="1" data-beta="1" data-gamma="2">
        Pepper<br />Red<br />Table
    </div>
    <div class="animate" data-id="id-10" data-alpha="2" data-beta="1" data-gamma="1">
        Apple<br />Red<br />Couche
    </div>
    <div class="animate" data-id="id-11" data-alpha="2" data-beta="2" data-gamma="2">
        Apple<br />Green<br />Table
    </div>
    <div class="animate" data-id="id-12" data-alpha="2" data-beta="2" data-gamma="2">
        Apple<br />Green<br />Table
    </div>
    <div class="animate" data-id="id-13" data-alpha="1" data-beta="1" data-gamma="2">
        Pepper<br />Red<br />Table
    </div>
</div> 
```

**但我希望html可以像这样工作：**

```
<ul id="filter" name="alpha">
    <li value="0"><a href="#">All items</a></li>
    <li value="1"><a href="#">Pepper</a></li>
    <li value="2"><a href="#">Apple</a></li>
</ul>
<ul id="filter" name="beta">
    <li value="0"><a href="#">All colours</a></li>
    <li value="1"><a href="#">Red</a></li>
    <li value="2"><a href="#">Green</a></li>
</ul>
<ul id="filter" name="gamma">
    <li value="0"><a href="#">All places</a></li>
    <li value="1"><a href="#">Couche</a></li>
    <li value="2"><a href="#">Table</a></li>
</ul>
<div id="applications" class="image-grid">
<div class="animate" data-id="id-1" data-alpha="2" data-beta="1" data-gamma="1">
    Apple<br />Red<br />Couche
</div>
<div class="animate" data-id="id-2" data-alpha="1" data-beta="1" data-gamma="2">
    Pepper<br />Red<br />Table
</div>
<div class="animate" data-id="id-3" data-alpha="1" data-beta="2" data-gamma="1">
    Pepper<br />Green<br />Couche
</div>
<div class="animate" data-id="id-4" data-alpha="2" data-beta="1" data-gamma="1">
    Apple<br />Red<br />Couche
</div>
<div class="animate" data-id="id-5" data-alpha="1" data-beta="2" data-gamma="2">
    Pepper<br />Green<br />Table
</div>
<div class="animate" data-id="id-6" data-alpha="1" data-beta="1" data-gamma="1">
    Pepper<br />Red<br />Couche
</div>
<div class="animate" data-id="id-7" data-alpha="1" data-beta="2" data-gamma="2">
    Pepper<br />Green<br />Table
</div>
<div class="animate" data-id="id-8" data-alpha="1" data-beta="2" data-gamma="1">
    Pepper<br />Green<br />Couche
</div>
<div class="animate" data-id="id-9" data-alpha="1" data-beta="1" data-gamma="2">
    Pepper<br />Red<br />Table
</div>
<div class="animate" data-id="id-10" data-alpha="2" data-beta="1" data-gamma="1">
    Apple<br />Red<br />Couche
</div>
<div class="animate" data-id="id-11" data-alpha="2" data-beta="2" data-gamma="2">
    Apple<br />Green<br />Table
</div>
<div class="animate" data-id="id-12" data-alpha="2" data-beta="2" data-gamma="2">
    Apple<br />Green<br />Table
</div>
<div class="animate" data-id="id-13" data-alpha="1" data-beta="1" data-gamma="2">
    Pepper<br />Red<br />Table
</div>
</div> 
```

但我不知道要对 javascript 代码进行哪些更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T13:14:28.950

我已经使用流沙插件进行了几乎相同的开发。

在这里你可以找到我的代码和工作结果。

[http://jsfiddle.net/AVnzX/](http://jsfiddle.net/AVnzX/)

我的过滤器包含更多项目：

```
<form id="filter">
<select name="country" id="filterCountry">
    <option value="alle">Alle</option>
    <option value="usa">USA</option>
    <option value="germany">Germany</option>
    <option value="australia">Australia</option>
</select>
<select name="city" id="filterCity">
    <option value="alle">Alle</option>
    <option value="newyork">New York</option>
    <option value="sydney">Sydney</option>
    <option value="paris">Paris</option>
    <option value="munich">Munich</option>
    <option value="berlin">Berlin</option>
    <option value="losangeles">Los Angeles</option>
    <option value="miami">Miami</option>
    <option value="hamburg">Hamburg</option>
    <option value="frankfurt">Frankfurt</option>
    <option value="sanfrancisco">San Francisco</option>
</select>
<select name="alphabet" id="filterName">
    <option value="name">Name</option>
    <option value="country">Country</option>
    <option value="city">City</option>
</select> 
```

# testing - 使用 MSBuild 在构建过程中进行内存分析

> ID：11433847
> 
> 赞同：0
> 
> 时间：2012-07-11T13:35:00.600
> 
> 标签：testing, msbuild, profiling, .net

除其他外，我们正在使用 MSBuild 在构建过程中使用自动化 UI 测试。由于一些问题，我们现在正在寻找可以集成到构建过程中并在运行 UI 测试期间收集信息（有趣的值、错误、警告......）的内存分析器。

我发现的内存分析器的 api（例如[，什么是好的 .NET 分析器？](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)）似乎对 msbuild 没有很好的支持！？有人遇到过此类问题或有解决方案吗？

谢谢回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T22:57:06.277

您可以使用带有命令行支持的 VSPerfASPNETCmd 工具。 [http://msdn.microsoft.com/en-us/library/dd255376.aspx](http://msdn.microsoft.com/en-us/library/dd255376.aspx)

您需要将其集成到构建后事件或使其成为 msbuild 任务。

# html - 居中 div 旁边的 DIV

> ID：11433848
> 
> 赞同：10
> 
> 时间：2012-07-11T13:35:01.677
> 
> 标签：html, css, css-float, positioning

![在此处输入图像描述](../Images/08ae1a0a605c6d103666098f04e3697d.png)

```
body {
    background: rgba(0, 0, 0, 0.8);
    font-family: sans-serif;
    font-size: 11px;
    color: #e0e0e0;
}

#wrapper {

}

#login {
    margin-left: auto;
    margin-right: auto;
    margin-top: 50px;
    background: rgba(0, 0, 0, 0.9);
    width: 360px;
    padding: 20px;
    position: relative;

    -webkit-border-radius: 15px;
    border-radius: 15px;
}

#registercontainer {
    position: relative;
    margin-left: auto;
    margin-right: auto;
    width: 1050px;
}

#register {
    position: absolute;
    left: 740px;
    top: 50px;
} 
```

//

```
 <div id="wrapper">
        <div id="login">
            <h2>Login to The Something Project</h2>
            <form action="game" method="post">
                <input type="text" name="username" maxlength="20" placeholder="username"><br>
                <input type="text" name="usericon" placeholder="http://imgur.com/icon.png"><br>
                <br>
                <input type="submit" value="login">
            </form>
        </div>

        <div id="registercontainer">
            <div id="register">
                <h2>Register for The Something Project</h2>
            </div>
        </div>
    </div> 
```

我想在居中的 div 旁边有一个 div（见上图），但我得到的是这个。[http://i.imgur.com/X0e4s.png](https://i.imgur.com/X0e4s.png)

我该如何解决这个问题？

问候

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T13:45:34.280

我想你可以采取很多方法。这是一个。

使用与您的示例相同的 HTML 结构，可以实现目标：

*   制作除 main wrapper 之外的所有元素`inline-block`。
*   `text-align: center`通过给主包装器使“居中”元素居中。
*   通过将侧边栏从文档流中删除`position: absolute`。这要求你也提供它的容器`position: relative`。
*   将侧边栏的容器的宽度和高度设为零，这样它就不会影响居中计算。给它`vertical-align: top`以使其顶部边缘（也是侧边栏的顶部边缘）与居中元素的顶部边缘对齐。
*   `text-align`如果您不希望它们的内容在它们内部居中，则可以选择指定居中元素和侧边栏。

作为奖励，使用这种方法，您可以在一个地方直接指定居中 div 和侧边栏的宽度。

[**看到它在行动**](http://jsfiddle.net/GJpuQ/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:46:54.760

请检查您的标记的已修复**[JSFiddle](http://jsfiddle.net/fedosov/Z4Tmk/)**。

您需要根据居中的块宽度删除`#registercontainer`并放置`#register`到加上一些位置修改。`#login`

![结果](../Images/1a201a13b0268718e5d4449b24bb6d24.png)

HTML：

```
<div id="wrapper">
    <div id="login">
        <h2>Login to The Something Project</h2>
        <form action="game" method="post">
            <input type="text" name="username" maxlength="20" placeholder="username"><br>
            <input type="text" name="usericon" placeholder="http://imgur.com/icon.png"><br>
            <br>
            <input type="submit" value="login">
        </form>
        <div id="register">
            <h2>Register for The Something Project</h2>
        </div>
    </div>
</div>​ 
```

和 CSS：

```
body {
    background: rgba(0, 0, 0, 0.8);
    font-family: sans-serif;
    font-size: 11px;
    color: #e0e0e0;
}

#login {
    margin-left: auto;
    margin-right: auto;
    margin-top: 50px;
    background: rgba(0, 0, 0, 0.9);
    width: 360px;
    padding: 20px;
    position: relative;
    -webkit-border-radius: 15px;
    border-radius: 15px;
}

#register {
    position: absolute;
    left: 420px;
    top: 20px;
    width: 100px;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:45:25.363

看看这个小提琴。[http://jsfiddle.net/nUk77/](http://jsfiddle.net/nUk77/) 或者更接近您的原始代码：http: [//jsfiddle.net/rSbzT/](http://jsfiddle.net/rSbzT/)

我定位了它的容器，而不是绝对定位寄存器 div。绝对定位使其脱离 html 流，因此不会干扰 margin-right:auto;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:46:32.300

`float: right`应该可以解决您的问题。记得在之后添加一个空的 div 容器`float:clear`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T13:47:41.873

这里发生了几件事——首先，“registercontainer”div 上的宽度为 1050——这将强制它清除，导致“register”div 出现在“centered”div 下方。

我会以不同的方式解决这个问题。*如果您正在处理一个固定宽度的站点：*我会将#login 和#registercontainer 浮动在彼此旁边，并给#wrapper 一个明确的宽度。然后，将 #wrapper 设置为使用 % 留下一个边距，该百分比将近似于您所追求的展示位置。

[有关示例，](http://jsfiddle.net/chippper/UbqpJ/)请参阅此JS Fiddle 。这是CSS（为了清楚起见，我更改了背景颜色）：

```
body {
    background: rgba(0, 0, 0, 0.8);
    font-family: sans-serif;
    font-size: 11px;
    color: #e0e0e0;
    width: 960px;
}

#wrapper {
   width: 760px;
    background: blue;
    overflow: hidden;
    margin-left: 35%;
}

#login {
    float: left;
    margin-top: 50px;
    background: rgba(0, 0, 0, 0.9);
    width: 360px;
    padding: 20px;

    -webkit-border-radius: 15px;
    border-radius: 15px;
}

#registercontainer {
    float:left;
    margin-top: 50px;
    clear: none;
    width: 350px;
    background: red;
}

#register {

}​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-25T10:16:09.493

试试这个：

```
 <div style="position: relative; display: inline-block; padding: 0 30px;">
    <h2>CENTERED ELEMENT</h2>
        <div style="position: absolute; top: 0; left: 100%;">
            ELEMENT NEXT TO CENTERED DIV
    </div> 
```

在绝对位置使用 100%。并为居中元素使用填充以进一步推动侧面 div。

# mysql - ORDER BY 在数字前排序字符

> ID：11433852
> 
> 赞同：-1
> 
> 时间：2012-07-11T13:35:15.503
> 
> 标签：mysql

我的问题是，MySQL 在数字之前排序字符。举一个简单的例子，我们在数据库中有这个字符串：

`3, a, 2, 1, b`

ORDER BY 语句将返回：

`a, b, 1, 2, 3`

但我希望它是：

`1, 2, 3, a, b`

我的数据库是`utf8_unicode_ci`，但这无济于事。它仍然会产生错误的结果。（我不能只检查它们是否是数字然后将它们排序到顶部，因为一个项目也可以命名为“2something”并且必须在“asomething”之前）。有任何想法吗？

*编辑：*我发现了问题。在数据库（存储用户）中，我按 排序`CONCAT(name, login)`，名称为`NULL`。MySQL 命令`NULL`总是在顶部，所以字符在数字的顶部（它们的名称字段是一个空字符串）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:36:18.797

`ORDER BY`如果列类型是`character`或，则应该以所需的方式工作`varchar`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:22:39.467

您需要对排序字段应用排序规则

尝试

```
SELECT yourfield
FROM yourtable
ORDER BY yourfield COLLATE latin1_general_ci 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:48:47.663

做这个：

```
SELECT id FROM example ORDER BY IF(id REGEXP '[0-9]+',id,CONCAT('0',id) ) 
```

这将在字母前添加“0”并按其排序。将返回原始列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T14:12:04.277

您可以尝试`cast`in`order by`子句并检查结果吗？

```
order by cast( desired_field as char ) 
```

# android - 从扩展应用程序android的类启动服务

> ID：11433853
> 
> 赞同：0
> 
> 时间：2012-07-11T13:35:24.563
> 
> 标签：android

我正在尝试从扩展 android 的类中调用服务。该服务反过来正在启动一些线程。当我从正在运行的服务列表中停止服务时，`onDestroy()`不会调用该服务。

但是当我停止从活动启动的服务时，它的`onDestroy()`方法被调用。

有什么区别 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:16:01.887

因为停止服务会“杀死服务”并中断其生命周期，但是当您从应用程序中停止它时，它会继续其生命周期并进入销毁状态。

# javascript - JavaScript / jQuery 动画错误：Uncaught SyntaxError: Unexpected token }

> ID：11433854
> 
> 赞同：-1
> 
> 时间：2012-07-11T13:35:32.010
> 
> 标签：javascript, jquery, html, jquery-animate

我在这里有一个功能可以切换打开/关闭 div：

```
function searchAnimate(goTo) {
    if (goTo == "open") {
        $("#searchdiv").animate({
            bottom: 2,
            right: 0
        }, 1500);
        document.getElementById("openclosearrow").innerHTML = "<div onclick='searchAnimate('close')' id='openclosearrow'>&harr;</div>";
    }
    if (goTo == "close") {
        $("#searchdiv").animate({
            bottom: -45,
            right: -218
        }, 1500);
        document.getElementById("openclosearrow").innerHTML = "<div onclick='searchAnimate('open')' id='openclosearrow'>&harr;</div>";
    }
} 
```

错误是**Uncaught SyntaxError: Unexpected token }**。我尝试了很多方法来解决它，但我想我的眼睛今天不工作了......有人可以帮忙吗？谢谢！

PS 如果有帮助，我正在使用 Chrome。

**编辑**

这是HTML代码：

```
<div onclick="searchAnimate('close')" id="openclosearrow">&harr;</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:36:33.893

您要添加的元素的 HTML 在引号内有引号。

此外，您似乎正在尝试通过设置元素来替换它的`innerHTML`. 那也行不通。

您需要的只是该元素上的*一个*处理程序，以及某种标记来指示它处于什么状态。处理程序可以使用它来了解单击应该打开还是关闭。

也许是这样的：

```
<div id='openclosearrow' class='open'>&harr;</div> 
```

然后，在 JavaScript 中：

```
$('#openclosearrow').click(function() {
  var arrow = this, $arrow = $(arrow),
    animations = {
      open: { bottom: 2, right: 0 },
      close: { bottom: -45, right: -218 }
    };

  $('#searchdiv').animate(animations[ $arrow.is('.open') ? 'close' : 'open' ], 1500);
  $arrow.toggleClass('open');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:52:46.713

有更好的方法可以做到这一点，混合 DOM 和 jQuery 是一个坏主意，选择一种方法，这样它就成了标准。

您的代码的一个问题是引号是错误的，它们需要被转义

```
"<div onclick=\"searchAnimate('open')\" id='openclosearrow'>&harr;</div>" 
```

这里的问题是你正在用相同的代码替换一个元素的innerHTML，所以在第一次替换后它看起来像这样

```
<div onclick="searchAnimate('close')" id="openclosearrow"><div onclick="searchAnimate('close')" id="openclosearrow">&harr;</div></div> 
```

我怀疑那是你想要的。

您应该做的是替换事件处理程序。

```
$("#openclosearrow").off("click").on("click",function(){ searchAnimate('open') }); 
```

更好的是不要替换点击处理程序，而是检测状态。

```
function searchAnimate() {
    var stateSettings,
        newState,
        elem = $("#searchdiv");
    if (elem.data("state")==="open") {
        newState = "close";
        stateSettings = {
            bottom: 2,
            right: 0
        };
    } else {
        newState = "open";
        stateSettings = {
            bottom: -45,
            right: -218
        }
    }
    elem.data("state",newState).animate(stateSettings, 1500);
} 
```

# wcf - 如何在 WCF 流模式下获取 Stream 上的 Seek 方法？

> ID：11433860
> 
> 赞同：3
> 
> 时间：2012-07-11T13:35:41.703
> 
> 标签：wcf, stream, dotnetzip

假设我有一个 WCF 方法

```
[OperationContract]
bool UploadFile(Stream stream); 
```

如何获得 Seek 功能`stream`？

我需要它来满足两个要求：

1.  读取流的前四个字节以确定文件类型是否具有`50 4B 03 04`ZIP 文件签名，然后倒带 ( `stream.Seek(0, SeekOrigin.Begin)`)
2.  `Ionic.Zip.ZipFile`从流中读取 DotNetZip ：（`ZipFile zip = ZipFile.Read(stream)`需要流是可搜索的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:45:41.373

我发现[各种](https://stackoverflow.com/questions/6460759/resuming-file-upload-seeking-a-stream) [来源](https://stackoverflow.com/questions/11374976/wcf-stream-changing-position)声称您无法在 WCF 中寻找流。

应该是这样，因为最终您的数据将通过网络套接字发送，该套接字在设计上不支持搜索（它只发送字节数组）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T14:10:14.790

正如 CodeCaster 提到的，您不能寻找 WCF 流。您必须使用不同的方法来解决您的问题：

1.  要查看流的标头，我会读取流的前四个字节，然后使用类似的东西[`ConcatenatedStream`](https://stackoverflow.com/a/3879231/149265)来连接可以放入 a 的前四个字节`MemoryStream`和原始 WCF 流的其余部分。这将基本上缓冲部分流，但连接的流仍然呈现位于位置 0 的流，而无需查找。

2.  如果 DotNetZip 需要能够查找，那么它需要能够访问文件的任何部分。您需要将整个 WCF 流读入 MemoryStream 并将其提供给 DotNetZip。更有效的替代方法是编写您自己的`Stream`包装类，该类将仅缓冲已请求的最高流位置，因此如果 DotNetZip 仅在文件的第一个兆字节中搜索，您将只缓冲一个兆字节数据（而不是整个 50 GB 文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-30T12:29:34.983

```
MemoryStream ms = new MemoryStream();
request.FileByteStream.CopyTo(ms);
s.Position = 0;
var zip = Ionic.Zip.ZipFile.Read(ms) 
```

逐行代码解释

1.  为 zip 库创建新的 memorysteam 以使用
2.  从http请求字节流“请求”复制到内存流
3.  现在由于复制，流位置位于流的末尾，因此将其返回到开始位置
4.  实际上在内存流上调用 zip，完成

这个额外的步骤是必要的，因为 ionic zip 不支持直接在流上工作

# c++ - 使用控件（按钮等）动态填充 100% 窗口的算法

> ID：11433863
> 
> 赞同：-2
> 
> 时间：2012-07-11T13:35:44.937
> 
> 标签：c++, algorithm, dynamic, grid

假设我想创建一个对象网格，比如说按钮。我知道窗口的宽度和高度，也知道要添加的按钮数量。

是否有任何智能算法可以根据此计算每个按钮的宽度和高度？我试图想出一些东西，但是当我真的想填充整个窗口时，我得到的只是空白区域。

无论对象是什么，在这种情况下，为了简单起见，我都使用按钮。

简单地说，我想用一个对象（一个按钮）填充整个屏幕。如果只有一个按钮，该按钮将填充整个屏幕，则两个按钮将共享大小。

而且，如果我想将下一次运行的值更改为更多按钮，那么它也应该填满整个屏幕。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:43:15.630

如果您有一排按钮，您只需将窗口的宽度除以按钮的数量，并将所有按钮的宽度设置为该值。

```
button.width  = window.width / numberOfButtons;
button.height = window.height; 
```

如果您有多行，只需对高度执行相同操作；

```
button.width  = window.width  / numberOfButtonsH;
button.height = window.height / numberOfButtonsV; 
```

如果您希望按钮具有更合理的尺寸，请尝试使用所需按钮数量的平方根来计算一行中的按钮数量。如果所需的按钮数量不均匀，则添加另一行并将该行中的最后一个按钮居中。

对于十七个按钮，您将有五行，前四行每行有四个按钮，最后一行有一个按钮。

可以这样做（编辑为使用临时数据结构）：

```
int width  = 600;//replace those values with your own dimensions
int height = 600;

inline bool isUneven(const int i)
{
    return (i%2);
}

struct tempButton
{
    int x,y,w,h;
};

void populateWindow( const int requestedObjects = 18 )
{
    int objectsPerRow       = (int)floor(sqrt(requestedObjects));
    int rows = objectsPerRow;

    int diff = requestedObjects-rows*objectsPerRow;

    tempButton tmp[requestedObjects];

    if(diff>0)
    {
        ++rows;// only needed for button dimension calculation, will be changed later
    }

    int buttonWidth  = width  / objectsPerRow;
    int buttonHeight = height / rows;
    int lastRowWidth = 0; width / diff;

    for(int i=0; i<requestedObjects-diff; ++i)
    {
        tmp[i].h = buttonHeight;
        tmp[i].w = buttonWidth;
    }
    if(diff>0)
    {
        lastRowWidth = width / diff;
        for(int i=requestedObjects-diff; i<requestedObjects; ++i)
        {
            tmp[i].h = buttonHeight;
            tmp[i].w = lastRowWidth;
        }
        --rows; // subtract one, because placing the last button on its own is easier
    }
    for(int i=0; i<rows; ++i)
    {
        for(int j=0; j<objectsPerRow; ++j)
        {
            tmp[j+i*objectsPerRow].x = j*buttonWidth;        // set the positions
            tmp[j+i*objectsPerRow].y = i*buttonHeight;
        }
    }
    if(diff>0)
    {
        for(int i=requestedObjects-diff; i<requestedObjects; ++i)
        {
            tmp[i].x = (i-(requestedObjects-diff))*lastRowWidth;
            tmp[i].y = rows*buttonHeight;
        }

    }

    // now create the buttons using the temporary data

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:05:03.547

为此，您需要更多规则。

控件的数量必须是另外两个数字的乘积，所以正如有人建议的那样，17 只给你 17 * 1，所以按钮宽度是网格宽度/17，按钮高度是窗口高度，反之亦然，如果你喜欢一个柱子。

您可以尝试使用纵横比做一些事情以使这一点更有意义，例如宽度 > 高度意味着您应该排成一排。

如果控件的数量是一个产品，那么它将是一个正方形，或者您可以再次使用宽度/高度来计算按钮的宽度和高度。

您可能还想考虑按钮的最小宽度和高度，但是您会遇到更多不适合的问题。如果你想在每个按钮周围有一些填充，只需计算它，然后将按钮居中。

# asp.net-mvc - 在 asp.net mvc 中共享 ajax 和非 ajax 操作的模式

> ID：11433864
> 
> 赞同：1
> 
> 时间：2012-07-11T13:35:49.577
> 
> 标签：asp.net-mvc

我有一个使用许多 ajax 请求来显示数据的网站。其中之一是消息视图。

用户收到新消息时会通过电子邮件收到通知，我提供的链接是这样的：/mailmessages/show/67?layout=true

layout=true 参数决定布局是否被渲染。使用 ajax 调用它是错误的。

这是这样做的方法吗？或者有没有更好的解决方案。将参数放在任何地方都不是一个好的解决方案。

编辑：我使用的是纯 jquery ajax 调用，而不是任何微软解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:39:08.137

你可以检查：

```
Request.IsAjaxRequest 
```

并以此为基础进行不同的渲染。

**编辑**

然后你可以检查 Request.Headers["X-Requested-With"] - 如果它是 ajax，它应该是 XMLHttpRequest。

确保进行调试并查看 jQuery 设置的标头，并检查是否仅使用 IsAjaxRequest 有效:)（可能会设置与 ms ajax 相同的标头）。

# android - Android 上带有 Phonegap 和 JQueryMobile 的 HTML5 - 滑动问题

> ID：11433865
> 
> 赞同：0
> 
> 时间：2012-07-11T13:35:49.643
> 
> 标签：android, jquery, html, cordova, swipe

我在使用 jQuery 滑动功能时遇到了一些问题。我只是想用这段代码刷到下一页：

```
<script>                                                                          
$('#dataPageOilLevel').live('swiperight',function(event){
  $.mobile.changePage("batteryStatus.html", { transition: "slideup"});
})</script> 
```

在我的 html5 文档的末尾。ID 是正确的，页面链接应该可以工作。

如果我尝试滑动，​​我会得到这个 LogCat：

webview “我们正在等待 WebCore 对着陆的响应，因此错过了一个阻力”

奇怪的是，相同的代码在第一页上运行没有问题。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:36:21.050

[https://github.com/jquery/jquery-mobile/issues/1746](https://github.com/jquery/jquery-mobile/issues/1746) http://uihacker.blogspot.com/2010/10/android-bug-miss-drag-as-we-are-waiting.html

许多 Web 框架（JQueryMobile、Sencha Touch）将覆盖导致警告的 ontouchmove 事件，因为它从未命中 touchdown 事件。我认为你不必担心这个警告。我知道我过去曾收到此警告，但它从未阻止该应用程序正常运行。

编辑：尝试其中一些 [http://forum.jquery.com/topic/looking-for-a-complete-swiperight-swipeleft-example](http://forum.jquery.com/topic/looking-for-a-complete-swiperight-swipeleft-example) http://forum.jquery.com/topic/need-example-of-swipeleft -swiperight-any-body-got-a-good-url [http://www.raymondcamden.com/index.cfm/2011/3/14/Using-swipe-gestures-for-navigation-in-jQuery-Mobile](http://www.raymondcamden.com/index.cfm/2011/3/14/Using-swipe-gestures-for-navigation-in-jQuery-Mobile)

# download - BaseCamp 导出整个项目

> ID：11433866
> 
> 赞同：1
> 
> 时间：2012-07-11T13:35:51.910
> 
> 标签：download, export, basecamp

我需要从 BaseCamp 导出项目。以前有用于 XML 导出的实用程序，但现在不见了。有什么工具或方法可以导出/下载它吗？

我已经尝试过应用程序 HTTrack，但它无法通过登录页面。

我正在使用“旧”版本的 BaseCamp。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:40:25.457

您可以使用我的信息页面中提供的令牌密钥导出 basacamp 经典项目。

# jquery - jQuery - 对 div 内容进行排序

> ID：11433871
> 
> 赞同：4
> 
> 时间：2012-07-11T13:36:07.870
> 
> 标签：jquery

> **可能重复：**
> [jQuery：根据不同子 div 的内容对 div 进行排序](https://stackoverflow.com/questions/2501789/jquery-sort-divs-according-to-content-of-different-sub-divs)

是否可以对div的内容进行排序

```
<div id="sort">
    <div id="something">A2</div>
    <div id="something">A1</div>
    <div id="something">A4</div>
    <div id="something">A3</div>
</div> 
```

排序为：

```
<div id="sort">
    <div id="something">A1</div>
    <div id="something">A2</div>
    <div id="something">A3</div>
    <div id="something">A4</div>
</div> 
```

有这样的吗？？？

```
$('#sort').sort(); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T13:38:16.877

那这个呢？

```
var mylist = $('#sort');

var listitems = mylist.children('div').get();

listitems.sort(function(a, b) {
   return $(a).text().toUpperCase().localeCompare($(b).text().toUpperCase());
});

$.each(listitems, function(index, item) {
   mylist.append(item); 
}); 
```

来自：[http ://www.onemoretake.com/2009/02/25/sorting-elements-with-jquery/](http://www.onemoretake.com/2009/02/25/sorting-elements-with-jquery/)

还有这个：[如何使用 jQuery 按字母顺序对列表进行排序？](https://stackoverflow.com/questions/1134976/how-may-i-sort-a-list-alphabetically-using-jquery)

# c - Linux中进程/线程的大小

> ID：11433880
> 
> 赞同：4
> 
> 时间：2012-07-11T13:36:33.700
> 
> 标签：c, linux, multithreading, kernel

Linux中进程/线程的大小是多少？当创建进程/线程以及其中的`task_struct`其他数据结构时，还有其他什么吗？

进程/线程初始化时是否分配了进程/线程的堆栈（固定大小）？还是在必要时分配（如虚拟内存）？

当标准进程/线程在内存中创建时，我如何知道它的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:39:28.203

当在 Linux 上首次分配大块内存（> pagesize = 4096 字节）时，它使用页表中没有任何支持的特殊“空”内存页，因此当一个线程启动时，它将分配 ~1 MB这些零页用于线程堆栈。随着堆栈的增长，页面随后被转换为实际内存支持的页面。由于这种“空”页面支持，通常可以使用大的堆栈。

线程和进程都是使用名为**clone(2)**的相同底层系统调用创建的。它有很多选择，可以做很多事情。查看`man clone`详细说明。

[http://linux.die.net/man/2/clone](http://linux.die.net/man/2/clone)

大块内存是通过匿名**mmap(2)**调用分配的。

您可能也有兴趣在网络上搜索“linux overcommit bit”

（如果你想完善你的问题，我可以更具体。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:52:23.433

安德鲁说的是真的，但这并不意味着您的线程/进程从创建的那一刻起就不会“使用内存”。为堆栈保留的空间总是在你的进程中消耗*虚拟地址空间*，这意味着对于大型线程堆栈，你将很快用完 32 位机器上的地址（glibc 上默认线程堆栈大小的大约 300 个线程将耗尽虚拟地址空间）。此外，堆栈会影响*提交费用*，这决定了禁用过度使用时可以分配的内存总量。

Linux 默认为主线程的堆栈预提交 128k，如果提交费用尚未用尽，则允许自动获得更多。线程堆栈完全由用户空间（glibc/NPTL，在大多数 Linux 系统上）分配，并且不能超过其初始大小。根据版本和系统设置，glibc/NPTL 通常默认为每个线程分配 2 MB 到 10 MB 的空间。

# android - 每个活动上的相同操作栏项目不重写代码

> ID：11433882
> 
> 赞同：2
> 
> 时间：2012-07-11T13:36:40.823
> 
> 标签：android, android-layout, actionbarsherlock, android-menu

我正在使用 ActionBarSherlock 来实现一个使用这个强大的 AB 作为菜单的 UI。这是菜单布局：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/capturador"
        android:icon="@drawable/ic_action_capturador"
        android:showAsAction="always"
        android:title="@string/capturador"/>

    <item
        android:id="@+id/preferencias"
        android:icon="@drawable/ic_action_prefs"
        android:showAsAction="always"
        android:title="@string/preferencias"/>   

</menu> 
```

如您所见，它有两个项目（*capturador*和*preferencias*）

所以，我想做的——如果可能的话——是重用代码。这没什么大不了的，因为除了主要活动之外，我还有两个活动，但如果我有五个呢？我应该在每个活动中覆盖*onOptionsItemSelected(MenuItem item)*和*onCreateOptionsMenu(Menu menu)*方法吗？

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == R.id.capturador) {
        startActivity(new Intent(this, Capturador.class));
    } else if (item.getItemId() == R.id.preferencias) {
        startActivity(new Intent(this, Ajustes.class));
    }
    return true;
} 
```

提前感谢您的帮助，如果这个问题已经得到解答，我很抱歉，但我真的不知道我必须使用哪些词来尝试找到它（此外，英语不是我的母语）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:38:33.637

只需`BaseActivity`在其中实现此代码，然后让`Activities`您想要拥有这 2 个选项菜单的所有内容，扩展您的`BaseActivity`.

# http - 是否在使用任何符合 HTTP 协议的 HTTP 方法时发送查询字符串？

> ID：11433885
> 
> 赞同：1
> 
> 时间：2012-07-11T13:36:47.370
> 
> 标签：http, query-string, standards, http-method

所有这些组合都符合`HTTP`标准吗？

```
GET /entities/?param=value HTTP/1.1
POST /entities/?param=value HTTP/1.1
PUT /entities/?param=value HTTP/1.1
DELETE /entities/?param=value HTTP/1.1
HEAD /entities/?param=value HTTP/1.1
PATCH /entities/?param=value HTTP/1.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T14:05:35.857

根据[规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5)（正如我阅读的那样），它们是允许的。

这就是[Request-Line](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.1)的构造方式（就像您的示例中的那样）：

> **5.1 请求行**
> 
> Request-Line 以方法标记开始，接着是 Request-URI 和协议版本，并以 CRLF 结束。元素由 SP 字符分隔。除了最后的 CRLF 序列外，不允许使用 CR 或 LF。
> 
> ```
>  Request-Line   = Method SP Request-URI SP HTTP-Version CRLF 
> ```

然后[关于 Request-URI](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.1.2)：

> 这`Request-URI`是一个统一资源标识符（第[3.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2)节）并标识应用请求的资源。

正如我所看到的，规范对可以使用哪种 URI 以及它们是否受某些[方法](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.1.1)的使用限制没有任何限制。

# python - 在一个语句中对列表理解进行排序

> ID：11433886
> 
> 赞同：30
> 
> 时间：2012-07-11T13:36:50.870
> 
> 标签：python, list-comprehension

今天早上写剧本时，我注意到了一些我没有预料到的事情。我尝试使用列表推导并将其全部排序在一个语句中，并得到了令人惊讶的结果。以下代码总结了我的一般用例，但针对此问题进行了简化：

```
Transaction = namedtuple('Transaction', ['code', 'type'])

my_list = [Transaction('code1', 'AAAAA'), Transaction('code2', 'BBBBB'), Transaction('code3', 'AAAAA')]

types = ['AAAAA', 'CCCCC']

result = [trans for trans in my_list if trans.type in types].sort(key = lambda x: x.code)

print result 
```

输出：

```
None 
```

如果我使用理解创建列表，然后在事后对其进行排序，一切都很好。我很好奇为什么会这样？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-11T13:38:23.787

该方法`list.sort()`正在对列表进行排序，并作为所有变异方法返回`None`。使用内置函数[`sorted()`](http://docs.python.org/library/functions.html#sorted)返回一个新的排序列表。

```
result = sorted((trans for trans in my_list if trans.type in types),
                key=lambda x: x.code) 
```

取而代之的是`lambda x: x.code`，您也可以使用稍微快一点的`operator.attrgetter("code")`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T13:39:03.817

调用`.sort`列表返回`None`。然后将此结果分配给`result`.

换句话说，您使用列表推导式匿名创建一个列表，然后调用`.sort`，列表丢失，而`.sort`调用结果存储在`result`变量中。

正如其他人所说，您应该使用`sorted()`内置函数来返回一个列表。（`sorted()`返回列表的排序副本。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T13:38:08.400

你想要`sorted`内置函数。该`sort`方法对列表进行就地排序并返回`None`。

```
result = sorted([trans for trans in my_list if trans.type in types],key = lambda x: x.code) 
```

这可以通过以下方式做得更好：

```
import operator
result = sorted( (trans for trans in my_list if trans.type in types ), key=operator.attrgetter("code")) 
```

# mysql - MySQL UPDATE 查询，其中 id 最高且字段等于变量

> ID：11433887
> 
> 赞同：12
> 
> 时间：2012-07-11T13:37:02.620
> 
> 标签：mysql

我正在尝试构建一个 MySQL 查询，它将更新我的表中的一行，其中 id 最高，并且名为 idSession 的字段等于 65。它看起来像这样：

```
UPDATE `History` 
SET `state` = 0 
WHERE `id` = (SELECT MAX(id) FROM `History` WHERE `idSession` = 65); 
```

我收到错误消息：

> “错误代码：1093。您不能在 FROM 子句中指定目标表‘历史’进行更新”。

有人知道我的语法有什么问题吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-11T13:42:05.607

正是它所说的：当您根据完全相同的表中的条件更新同一个表时，您无法从表中进行选择。（这是故意混淆写的：p）

尝试这个：

```
UPDATE `History` SET `state`=0 WHERE `idSession`=65 ORDER BY `id` DESC LIMIT 1 
```

您可以在和查询中使用`ORDER`and ;)`LIMIT``UPDATE``DELETE`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T13:41:55.500

那这个呢：

```
UPDATE `History`
SET `state` = 0
WHERE `idSession` = 65
ORDER BY `id` DESC 
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T14:03:47.773

这是对 MySQL 的模仿。有两种解决方法（实际上是三种，但我不喜欢第三种）。

1）因为查询：

```
SELECT MAX(id) 
FROM History 
WHERE idSession = 65 
```

产生与以下相同的结果：

```
SELECT id 
FROM History 
WHERE idSession = 65
ORDER BY id DESC
  LIMIT 1 
```

您可以使用@xdazz 和@Kolink 提供的解决方案，将更新更改为使用语句`ORDER BY`中的（专有MySQL）语法`UPDATE`。

2）第二种方法是用上面的子查询加入你的表。这适用于更复杂的条件/子查询/连接，不能用简单的 Order By 重写：

```
UPDATE 
      History AS h
  JOIN
      ( SELECT MAX(id) AS max_id 
        FROM History 
        WHERE idSession = 65
      ) AS m
    ON m.max_id = h.id
SET h.state = 0 ; 
```

# javascript - 有没有办法保存选定的文本并在页面刷新后再次突出显示它？

> ID：11433888
> 
> 赞同：2
> 
> 时间：2012-07-11T13:37:03.727
> 
> 标签：javascript, jquery, local-storage

我正在尝试选择文本并将该选择保存在 localStorage 或 DB 中，我可以通过从存储中读取它来突出显示先前选择的文本。但是，如果所选文本位于页面中的多个位置，则所有实例都会突出显示，这是我不想要的。我可以抓住所选文本的左侧和顶部，但在调整字体大小的情况下，左侧/顶部会发生变化。我没有在这里分享任何代码，因为没有什么可以分享的。仅供参考，我指的是 ipad 中的 iBooks 应用程序，它具有相同的功能，我很想知道它是如何正确完成的？

**更新：**我尝试了一种新方法，其中我在所选文本周围添加标记，使用它我可以找出稍后要突出显示的所选字符串的开始和结束。你可以在这里看到演示：http: [//jsfiddle.net/codef0rmer/jE4w5/](http://jsfiddle.net/codef0rmer/jE4w5/)

但在 iPad`rangeCount`中不起作用，iPad 有什么解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:48:03.683

[`window.getSelection()`](https://developer.mozilla.org/en/DOM/window.getSelection)您可以使用- 至少在现代浏览器中获取有关当前选择的信息。它将返回一个[Selection](https://developer.mozilla.org/en/DOM/Selection)对象，您可以从使用该对象提供的属性开始：

*   **anchorNode** 返回选择开始的节点。

*   **anchorOffset** 返回选择的锚点在 anchorNode 内偏移的字符数。

*   **focusNode** 返回选择结束的节点。

*   **focusOffset** 返回选择的焦点在 focusNode 内偏移的字符数。

*   **isCollapsed** 返回一个布尔值，指示选择的起点和终点是否在同一位置。

*   **rangeCount** 返回选择中的范围数。

此外，使用该[`getRangeAt()`](https://developer.mozilla.org/en/DOM/Selection/getRangeAt)方法，您可以从 Selection 中获取[Range](https://developer.mozilla.org/en/DOM/Range)对象，这些对象提供了更多有用的方法和属性。

我不知道你想用这个解决方案走多远，而且你的问题很笼统，所以这更像是一个你可以去的方向，而不是一个现成的解决方案。

# android - 我的安卓模拟器没有显示我的应用

> ID：11433891
> 
> 赞同：0
> 
> 时间：2012-07-11T13:37:05.237
> 
> 标签：android, emulation

当我第一次尝试运行我的应用程序时，它运行良好，但是当我添加了一个启动类时。它把事情搞砸了。

这是我的 android manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.fps.iHealthFirst"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash" >
        <intent-filter>
            <action android:name="android.intent.action.SPLASH" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".IHealthFirstActivity"
        android:label="@string/title_activity_ihealth_first" >
        <action android:name="android.intent.action.IHEALTHFIRSTACTIVITY" />
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:40:35.833

在您添加的以下代码中`<action/>`，`<intent-filter>`尝试在其中添加意图过滤器。

```
<activity
    android:name=".IHealthFirstActivity"
    android:label="@string/title_activity_ihealth_first" >
    <action android:name="android.intent.action.IHEALTHFIRSTACTIVITY" />
</activity> 
```

顺便说一句，为什么你需要在 Activity 声明中添加自定义操作！！或者如果不需要，您也可以在删除操作标签后尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:41:33.667

改成：

```
<activity
        android:name=".Splash" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<activity android:name=".IHealthFirstActivity"
android:label="@string/title_activity_ihealth_first"></activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:49:03.450

```
 <activity
            android:name=".Splash">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".IHealthFirstActivity"
            android:exported="false"
            android:label="@string/title_activity_ihealth_first">
            <intent-filter>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

# sockets - 如何将内核中的套接字配置为非阻塞或 accept() 调用超时？

> ID：11433892
> 
> 赞同：0
> 
> 时间：2012-07-11T13:37:08.880
> 
> 标签：sockets, linux-kernel, blocking, nonblocking

在 Linux 内核模块中，我希望对侦听套接字的接受处理程序的调用不在内核线程中等待。所以我需要要么传递`O_NONBLOCK`给接受处理程序。但我想在连接的套接字上使用超时，而不是非阻塞套接字。

我知道将内核中的套接字配置为非阻塞的两种机制。将 O_NONBLOCK 传递给`sock->op`( `struct socket * sock`) 中的接受或连接处理程序。之后我不知道如何重置 O_NONBLOCK 标志。否则如何更改套接字上的 O_NONBLOCK 标志？

是否有替代方法，例如接受超时？这将允许侦听端口上的连接套接字阻塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:05:41.683

不幸的是，术语“套接字”用于指代几种不同的事物。用户空间中的那个（通过打开的文件描述引用一个小整数值）有一个状态，你可以用`fcntl`. 内核空间中的那个（指向实际连接端点的指针）没有。传递`O_NONBLOCK`给接受或连接处理程序只会使特定的接受或连接操作成为非阻塞的。

# vb.net - 无法访问名为“TextBox”的已处置对象（Leave 和 MouseDown 事件）（如何处理 System.ObjectDisposedException）

> ID：11433896
> 
> 赞同：0
> 
> 时间：2012-07-11T13:37:21.730
> 
> 标签：vb.net, events, exception, controls, dispose

我有一个使用控件列表构建的表单。但是，它们通过删除和重建这些控件来刷新这些控件中的数据。这就是它变得敏感的地方。当我第一次单击另一个文本框时发生错误，该文本框触发了前一个文本框的离开事件，该文本框调用清理功能以重建所有控件。单击的文本框包含在已销毁项目的列表中，这就是发生错误“无法访问已处理的对象命名”的原因。但是，我只是不知道在哪里处理 System.ObjectDisposedException，因为我无法在创建表单时捕获它。

这是崩溃日志

```
 System.ObjectDisposedException: Can not access a disposed object named "TextBox".
Object name: "TextBox".
    Has System.Windows.Forms.Control.CreateHandle ()
    Has System.Windows.Forms.TextBoxBase.CreateHandle ()
    Has System.Windows.Forms.Control.get_Handle ()
    Has System.Windows.Forms.Control.set_CaptureInternal (Boolean value)
    Has System.Windows.Forms.Control.WmMouseDown (Message & m, MouseButtons button, Int32 clicks)
    at System.Windows.Forms.Control.WndProc (Message & m)
    Has System.Windows.Forms.TextBoxBase.WndProc (Message & m)
    Has System.Windows.Forms.TextBox.WndProc (Message & m)
    Has System.Windows.Forms.ControlNativeWindow.OnMessage (Message & m)
    Has System.Windows.Forms.ControlNativeWindow.WndProc (Message & m)
    at System.Windows.Forms.NativeWindow.Callback (IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

我也尝试使用该语句`if Control.Isdisposed then return`，但似乎 leave 或 mousedown 事件并不关心它：S

你们能帮我找到我可以在这个表格上处理这个错误的地方吗？我无法通过调试来跟踪它，它只是在 End Sub 之后弹出。

**在 vb.net FrameWorks 1.1 中编码**

这是我销毁目标对象的代码

```
Private Sub viderRecursiveStack(ByVal control As Control)
        Dim stack As New stack
        Dim ctl As control
        Dim enfantAssocie As ArrayList

        stack.Push(control)

        While stack.Count > 0

            ctl = CType(stack.Pop, control)

            If Not ctl Is Nothing Then

                If TypeOf ctl Is Panel Then

                    'Cree la liste des enfants associés
                    enfantAssocie = New ArrayList(ctl.Controls)

                    For Each ctli As control In enfantAssocie

                        If Not TypeOf ctli Is EasyDeal.Controls.EasyDealLabel3D AndAlso** Not TypeOf ctli Is EasyDeal.Controls.EasyDealButton Then
                            stack.Push(ctli)
                            ctl.Controls.Remove(ctli)
                        End If

                    Next

                Else
                    RemoveHandler ctl.Leave, AddressOf txtEquipAddCommissionChanged
                    ctl.Dispose()
                End If

            End If

        End While

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:43:45.303

当您“删除”一个控件时，您应该执行以下所有操作，并按以下顺序执行它们：

1.  从控件中删除所有事件处理程序
2.  从父`Controls`集合中的控件中移除控件
3.  调用`Dispose`控件上的方法

但是，在这种情况下，您正在做所有这些事情，但您仍然遇到问题，因为您正试图从它自己的事件中删除控件。如果您想首先避免出现异常，我建议在这种情况下等待对该控件调用 dispose 直到稍后时间。在第 2 步之后，您可以将控件添加到名为`_controlsToDispose As List(Of Control)`. 然后，在表单的卸载事件、计时器或来自其他控件的其他事件中，您可以循环遍历该列表中已排队等待处置的任何控件，然后处理它们。

但是，如果您想保持原样并在异常发生时忽略异常，您应该能够在`MyApplication_UnhandledException`事件处理程序中这样做。要到达那里，请打开您的项目属性，转到“应用程序”选项卡，然后单击页面底部应用程序框架框架中的“查看应用程序事件”按钮。但是，这仅在您启用了应用程序框架时才可用。如果您已经为应用程序创建了自己的入口点并且正在调用`Application.Run`自己，那么您应该能够在该调用周围放置一个 try catch 块以将其捕获。

# c++ - 静态库中的内联函数被用户项目中的同名函数替换

> ID：11433901
> 
> 赞同：2
> 
> 时间：2012-07-11T13:37:57.603
> 
> 标签：c++, inline, static-linking

我需要以某种方式为我的每个静态库和使用它们的项目定义模块名称。我不能简单地这样做：

```
std::string const module_name = "my module"; 
```

因为我在静态成员初始化期间需要这个值。由于未定义静态数据初始化顺序，`module_name`因此在我尝试使用它时，我的变量仍可能未初始化。

为了解决这个问题，我定义了

```
inline std::string const& module_name() 
{
    static std::string const name = "my module";
    return name;
} 
```

对于每个模块。但这不起作用，因为所有`module_name()`调用都被解析为使用父模块的实现（`module_name()`总是返回父可执行项目的名称）。我不明白为什么。我希望由于这个内联函数是在静态库中定义和使用的，因此应该捕获实际的模块名称。是因为这个函数没有被编译器内联吗？

有没有推荐的方法来解决这个问题？

编译器：VC++10 和 gcc，在 VC++10 上测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:52:14.010

具有外部链接的实体在程序中只能有一个定义，因此在一个程序中不能对同一函数有多个定义也就不足为奇了。

这与内联无关，发生的情况是链接器看到同一个符号的多个定义（这通常发生在模板实例化和内联函数以及使用动态库时的其他符号中）并选择一个定义来使用。

要使每个库都有一个单独的定义，您需要它们具有内部链接，这可以通过使函数静态或将其放在未命名的命名空间中或使用特定于平台的方法（例如`__dllimport`或`__attribute((visibility("hidden")))`告诉编译器符号是私有的）来完成到共享库并且不应该被导出（因此不会被相同符号的另一个定义替换。）

或者，只需将每个模块放在自己的命名空间中，并将函数放在该命名空间中，然后每个函数都是不同的，它们不会干扰。

# mingw - mingw gcc 4.7.0 的 Fortran 代码非常慢（与 4.4.0 相比）

> ID：11433902
> 
> 赞同：2
> 
> 时间：2012-07-11T13:38:01.547
> 
> 标签：mingw, gfortran

我有一个用 Fortran 90 编写的库，以及几个使用它的 C 和 C++ 应用程序。早些时候，我使用 MinGW GCC 4.4.0（它是我从我从 mingw.org 下载的几个二进制档案中组成的）来编译它们。

今天我下载了最新的 MinGW（GCC 4.7.0，网络安装）并重建了我所有的代码。令人惊讶的是，应用程序开始运行非常缓慢 - 大约慢了 30 倍或更多。同时，重新编译的版本和从备份中恢复的工作相似 - 似乎问题出在 gfortran DLL 上，它取自 PATH（即新的 MinGW，与应用程序版本无关）。

什么可能是问题的根源，以及如何解决？我暂时回到了旧的 MinGW。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:39:52.563

回到这个问题后，我成功地找到了解决方法（但不是原因）。

在我的程序中，从 C 端的多个线程调用了一些计算广泛的 fortran 子例程。出于某种原因，在 mingw-gfortran 4.6.2 或 4.7.0 上，这 会使程序*减慢*15 倍，而在 4.4.0 上则更快。如果仅从一个线程调用子程序，则 4.7.0 在速度方面等于 4.4.0。

目前速度对我来说已经足够了，我将调用者环境限制为 1 个线程。

# java - 使用 Applescript 将文本发送到 Java GUI

> ID：11433906
> 
> 赞同：0
> 
> 时间：2012-07-11T13:38:13.883
> 
> 标签：java, applescript, javafx-2

我有一个实现 WebView 对象的 Java GUI。WebView 加载 Google Docs，并将焦点设置在页面的文本编辑器部分。我还有一些 Applescript，它从对话框中获取文本输入并将变量设置`wordString`为输入文本的结果。我想知道是否可以将该文本发送到我的 GUI 应用程序？我似乎找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:01:10.660

在您的 java 应用程序中打开一个服务器套接字。看看[Writing the Server Side of a Socket](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)。在你的applescript中调用“nc”或“curl”来传递wordString

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T20:46:10.283

我实际上最终解决了这个问题。如果您的程序不可编写脚本，则需要做一些变通方法来完成一些脚本编写。我使用以下代码将文本发送到 Google Docs WebView：

```
tell application "System Events" to set frontmost of process "java" to true
tell application "System Events"
    tell process "java"
        keystroke newString --some text variable
    end tell
end tell 
```

我从以下站点的示例中得到了这个：http: [//www.makeuseof.com/tag/applescripts-ui-scripting-mac/](http://www.makeuseof.com/tag/applescripts-ui-scripting-mac/)

我还使用了一个程序，该站点建议使用它来识别 AppleScript 中使用的应用程序名称。该程序称为 UIElementInspector，可在[http://mac.softpedia.com/get/Utilities/UIElementInspector.shtml找到](http://mac.softpedia.com/get/Utilities/UIElementInspector.shtml)

希望这对其他人也有帮助。

# jquery - 电话差距 jQuery

> ID：11433910
> 
> 赞同：0
> 
> 时间：2012-07-11T13:38:21.877
> 
> 标签：jquery, jquery-mobile, cordova

谁能告诉我如何实现加载更多按钮。

我有一个包含 100 到 150 个图像 URL 的列表。我必须按一次屏幕 10 并等待用户点击底部的加载更多按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:41:02.930

像这样？

```
$('#loadmore-link').click(function() {
    // remove the "load more" link
    $(this).remove();

    // get more LI elements (probably with a $.get())
    $('ul').append('<li>More list items</li>');

    // update the list view
    $('ul').listview('refresh');
}); 
```

取自：[JQueryMobile 加载更多选项](https://stackoverflow.com/questions/5005670/jquerymobile-loadmore-options)

# android - 意外的应用程序崩溃

> ID：11433912
> 
> 赞同：0
> 
> 时间：2012-07-11T13:38:25.060
> 
> 标签：android, crash, messenger

我尝试创建一个服务客户端应用程序（仍在学习这些）。我的应用程序从一开始就崩溃并且不让我做任何事情。任何想法如何解决？这是我的 2 个类和清单文件。

//////////////// 1\. MainActivity.java ///////////////////

```
public class MainActivity extends Activity {

/** Messenger for communicating with the service. */
Messenger mService = null;

/** Flag indicating whether we have called bind on the service. */
boolean mBound;

/**
 * Handler of incoming messages from service.
 */
static class IncomingHandler extends Handler {
    private TextView mCallbackText;

    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
            case MessengerService.MSG_SET_VALUE:
                mCallbackText.setText("Received from service: " + msg.arg1);
                break;
            default:
                super.handleMessage(msg);
        }
    }
}

/**
 * Target we publish for clients to send messages to IncomingHandler.
 */
final Messenger mMessenger = new Messenger(new IncomingHandler());

public void sayHello(View v) {
    if (!mBound) return;
    // Create and send a message to the service, using a supported 'what' value
    Message msg = Message.obtain(null, MessengerService.MSG_REGISTER_CLIENT, 0, 0);
    try {
        msg.replyTo = mMessenger;
        mService.send(msg);
    } catch (RemoteException e) {
        e.printStackTrace();
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
protected void onStart() {
    super.onStart();
    // Bind to the service
    bindService(new Intent(this, MessengerService.class), mConnection,
        Context.BIND_AUTO_CREATE);
    mBound = true;
}

@Override
protected void onStop() {
    super.onStop();
    // Unbind from the service
    if (mBound) {
        unbindService(mConnection);
        mBound = false;
    }
}

/**
 * Class for interacting with the main interface of the service.
 */
private ServiceConnection mConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        // This is called when the connection with the service has been
        // established, giving us the object we can use to
        // interact with the service.  We are communicating with the
        // service using a Messenger, so here we get a client-side
        // representation of that from the raw IBinder object.
        mService = new Messenger(service);
        mBound = true;
        /*try {
            Message msg = Message.obtain(null,
                    MessengerService.MSG_REGISTER_CLIENT);
            msg.replyTo = mMessenger;
            mService.send(msg);

            // Give it some value as an example.
            msg = Message.obtain(null,
                    MessengerService.MSG_SET_VALUE, this.hashCode(), 0);
            mService.send(msg);
        } catch (RemoteException e) {
            e.printStackTrace();
        }*/

    }

    public void onServiceDisconnected(ComponentName className) {
        // This is called when the connection with the service has been
        // unexpectedly disconnected -- that is, its process crashed.
        mService = null;
        mBound = false;
    }
}; 
```

}

//////////////// 2\. MessengerService.java ////////////////////

```
public class MessengerService extends Service {

String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNM = (NotificationManager) getSystemService(ns);

/** Command to the service to display a message */
static final int MSG_SAY_HELLO = 1;
/** Command to the service to register a client */
static final int MSG_REGISTER_CLIENT = 1;
/** Command to the service to unregister a client */
static final int MSG_UNREGISTER_CLIENT = 2;
/** Command to the service to set a new value */
static final int MSG_SET_VALUE = 3;

static class IncomingHandler extends Handler {
    private ArrayList<Messenger> mClients = new ArrayList<Messenger>();
    private int mValue=0;

    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
            case MSG_REGISTER_CLIENT:
                mClients.add(msg.replyTo);
                break;
            case MSG_UNREGISTER_CLIENT:
                mClients.remove(msg.replyTo);
                break;
            case MSG_SET_VALUE:
                mValue = msg.arg1;
                for (int i=mClients.size()-1; i>=0; i--) {
                    try {
                        mClients.get(i).send(Message.obtain(null,
                                MSG_SET_VALUE, mValue, 0));
                    } catch (RemoteException e) {
                        // The client is dead.  Remove it from the list;
                        // we are going through the list from back to front
                        // so this is safe to do inside the loop.
                        mClients.remove(i);
                    }
                }
                break;
            default:
                super.handleMessage(msg);
        }
    }
}

final Messenger mMessenger = new Messenger(new IncomingHandler());

public void onCreate() {
    mNM = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    // Display a notification about us starting.
    showNotification();
    //handleMessage(msg);
}

@Override
public void onDestroy() {
    // Cancel the persistent notification.
    mNM.cancel(R.string.remote_service_started);

    // Tell the user we stopped.
    Toast.makeText(this, R.string.remote_service_stopped, Toast.LENGTH_SHORT).show();
}

@Override
public IBinder onBind(Intent intent) {
    Toast.makeText(getApplicationContext(), "Binding..", Toast.LENGTH_SHORT).show();
    return mMessenger.getBinder();
}

private void showNotification() {
    // Set icon, scrolling text, etc
    int icon = R.drawable.asd;
    CharSequence tickerText = "Hello!";
    CharSequence text = getText(R.string.remote_service_started);
    long when = System.currentTimeMillis();
    Context context = getApplicationContext();

    //Create notication with parameters
    Notification.Builder nFN = new Notification.Builder(context)
                                                .setTicker(tickerText)
                                                .setWhen(when)
                                                .setSmallIcon(icon)
                                                .setContentTitle("Test Notifications")
                                                .setContentText(text)
                                                .setAutoCancel(true);

    // The PendingIntent to launch our activity if the user selects this notification
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, new Intent(this, MessengerService.class), 0);
    nFN.setContentIntent(contentIntent);

    // Send the notification.
    Notification n = nFN.build();
    mNM.notify(R.string.remote_service_started, n);
} 
```

}

///////////////// 3\. 清单/////////////////////// /////////

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.praktiki.services.messenger"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="16"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <service 
        android:name=".MessengerService"
        android:process=":remote"
         />

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:41:44.960

我认为你忘记初始化`TextView`你正在使用的：

```
mCallbackText.setText("Received from service: " + msg.arg1); 
```

上面的行会导致`NullPointerException`if 不引用实际字段，因此将以下行添加到您的`onCreate(Bundle)`:

```
mCallbackText = (TextView) findViewById(R.id.my_textview); 
```

编辑：

从头开始，您需要以您选择的方式将其传递给您的处理程序。

# internet-explorer-8 - soapUI 更改（禁用）Internet Explorer 的代理设置

> ID：11433913
> 
> 赞同：17
> 
> 时间：2012-07-11T13:38:26.140
> 
> 标签：internet-explorer-8, proxy, soapui

*   安装了**soapUI 4.5.1**。

*   当我启动soapUI 时，它禁用了 IE 8 中的所有复选框`Internet Options > Connection > LAN Settings`。

*   如果我在soapUI > 中输入一个代理`File Preferences > Proxy Settings`，那么soapUI 会用这个代理覆盖IE 中的配置

图标栏中的切换按钮`Apply proxy defined in global preferences`对 IE 没有影响，仅对 soapUI 连接有影响。

**如何禁用此行为？**

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-16T14:08:07.233

我发现，当您取消选中 File > Preferences > UI Settings`Opens startup web page when starting soapUI`时，IE 中的代理设置保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-14T05:30:48.027

我也经历过同样的事情。可悲的是，我喜欢测试套件，而“按需测试”选项卡也做同样的事情。

# 解决方案

我发现，如果您取消勾选：UI 设置 -> 禁用浏览器 - 禁用集成浏览器组件，您可以完全摆脱这种行为

# ruby-on-rails - Foundation 3.0.5 安装问题与 rails 3.2.6

> ID：11433914
> 
> 赞同：3
> 
> 时间：2012-07-11T13:38:31.623
> 
> 标签：ruby-on-rails, gemfile, zurb-foundation, bundle-install

我刚刚开始了一个新项目并将 zurb-foundation 添加到 Gemfile。
捆绑安装显示 sass 兼容性问题，所以我运行捆绑更新和捆绑安装，一切似乎都很好。

但是当我按照文档（https://github.com/zurb/foundation-rails）中所说的那样执行rails g基础：安装时，它告诉我：找不到生成器基础：安装。
但是我做了捆绑安装，所以我不明白。

谢谢你的帮助 ！
这是我的 Gemfile ：

```
gem 'rails', '3.2.6'
gem 'sqlite3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
  gem 'zurb-foundation', '~> 3.0.5'
end

gem 'jquery-rails' 
```

bundle install 的结果：

```
Using rake (0.9.2.2)   
Using i18n (0.6.0)   
Using multi_json (1.3.6)   
Using activesupport (3.2.6)   
Using builder (3.0.0)   
Using activemodel (3.2.6)   
Using erubis (2.7.0)   
Using journey (1.0.4)   
Using rack (1.4.1)   
Using rack-cache (1.2)   
Using rack-test (0.6.1)   
Using hike (1.2.1)   
Using tilt (1.3.3)   
Using sprockets (2.1.3)   
Using actionpack (3.2.6)   
Using mime-types (1.19)   
Using polyglot (0.3.3)   
Using treetop (1.4.10)   
Using mail (2.4.4)   
Using actionmailer (3.2.6)   
Using arel (3.0.2)   
Using tzinfo (0.3.33)   
Using activerecord (3.2.6)   
Using activeresource (3.2.6)   
Using bundler (1.1.3)   
Using chunky_png (1.2.5)   
Using coffee-script-source (1.3.3)   
Using execjs (1.4.0)   
Using coffee-script (2.2.0)   
Using rack-ssl (1.3.2)   
Using json (1.7.3)   
Using rdoc (3.12)   
Using thor (0.15.4)   
Using railties (3.2.6)   
Using coffee-rails (3.2.2)   
Using fssm (0.2.9)   
Using sass (3.2.0.alpha.261)   
Using compass (0.12.2)   
Using jquery-rails (2.0.2)   
Using rails (3.2.6)   
Using sass-rails (3.2.5)   
Using sqlite3 (1.3.6)   
Using uglifier (1.2.6)   
Using zurb-foundation (3.0.5) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T14:42:35.420

设法通过foundation.zurb.com/docs/gem-install.php#simple2来做到这一点。
Github 文档不是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T03:54:20.063

由于上面的链接不再正确，对于 Foundation 3.0，请使用

```
compass create <project-name> -r zurb-foundation --using foundation 
```

（可以在[基金会文档：指南针](http://foundation.zurb.com/docs/compass.php)页面上找到）

# android - Android Apk 在 Emulator 中完美运行，但在手机上即时强制关闭

> ID：11433920
> 
> 赞同：0
> 
> 时间：2012-07-11T13:38:58.113
> 
> 标签：android, mobile, apk, forceclose

一个在 Eclipse 中运行的 Android 应用程序，可以完美地安装在 Android 2.3 和 2.1 手机上，该应用程序是为 2.2 构建的，但它在运行时直接进入强制关闭。关于我应该做什么的任何想法/帮助？请告诉我我需要发布什么以便从 stackoverflow 社区获得帮助。

```
07-11 19:19:01.117: W/KeyCharacterMap(1477): No keyboard for id 0
07-11 19:19:01.117: W/KeyCharacterMap(1477): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
07-11 19:19:01.887: W/KeyCharacterMap(129): No keyboard for id 0
07-11 19:19:01.887: W/KeyCharacterMap(129): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
07-11 19:19:07.357: D/dalvikvm(1477): GC_EXPLICIT freed 304 objects / 14088 bytes in 168ms
07-11 19:19:28.057: D/AndroidRuntime(1841): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
07-11 19:19:28.057: D/AndroidRuntime(1841): CheckJNI is ON
07-11 19:19:28.307: D/AndroidRuntime(1841): --- registering native functions ---
07-11 19:19:29.857: D/dalvikvm(204): GC_EXPLICIT freed 163 objects / 8144 bytes in 172ms
07-11 19:19:30.867: D/PackageParser(68): Scanning package: /data/app/vmdl52833.tmp
07-11 19:19:31.727: I/PackageManager(68): Removing non-system package:com.sweek2.android
07-11 19:19:31.727: I/ActivityManager(68): Force stopping package com.sweek2.android uid=10036
07-11 19:19:31.737: I/Process(68): Sending signal. PID: 1477 SIG: 9
07-11 19:19:32.068: D/dalvikvm(68): GC_FOR_MALLOC freed 12991 objects / 699136 bytes in 158ms
07-11 19:19:32.187: D/PackageManager(68): Scanning package com.sweek2.android
07-11 19:19:32.187: I/PackageManager(68): Package com.sweek2.android codePath changed from /data/app/com.sweek2.android-2.apk to /data/app/com.sweek2.android-1.apk; Retaining data and using new
07-11 19:19:32.207: I/PackageManager(68): /data/app/com.sweek2.android-1.apk changed; unpacking
07-11 19:19:32.227: D/installd(35): DexInv: --- BEGIN '/data/app/com.sweek2.android-1.apk' ---
07-11 19:19:37.617: D/dalvikvm(1850): DexOpt: load 364ms, verify 3721ms, opt 141ms
07-11 19:19:37.867: D/installd(35): DexInv: --- END '/data/app/com.sweek2.android-1.apk' (success) ---
07-11 19:19:37.867: W/PackageManager(68): Code path for pkg : com.sweek2.android changing from /data/app/com.sweek2.android-2.apk to /data/app/com.sweek2.android-1.apk
07-11 19:19:37.867: W/PackageManager(68): Resource path for pkg : com.sweek2.android changing from /data/app/com.sweek2.android-2.apk to /data/app/com.sweek2.android-1.apk
07-11 19:19:37.877: D/PackageManager(68):   Activities: com.sweek2.firstPage com.sweek2.MenuPage com.sweek2.NewList com.sweek2.Settings com.sweek2.MyPlans com.sweek2.Invites com.sweek2.CreatePlan com.sweek2.TabUI com.sweek2.FriendList com.sweek2.FriendListX com.sweek2.MainActivity com.sweek2.NewFriends com.sweek2.BooleanList com.sweek2.Follow
07-11 19:19:37.888: I/ActivityManager(68): Force stopping package com.sweek2.android uid=10036
07-11 19:19:38.058: I/installd(35): move /data/dalvik-cache/data@app@com.sweek2.android-1.apk@classes.dex -> /data/dalvik-cache/data@app@com.sweek2.android-1.apk@classes.dex
07-11 19:19:38.058: D/PackageManager(68): New package installed in /data/app/com.sweek2.android-1.apk
07-11 19:19:38.287: I/ActivityManager(68): Force stopping package com.sweek2.android uid=10036
07-11 19:19:38.617: D/dalvikvm(68): GC_EXPLICIT freed 7308 objects / 450328 bytes in 317ms
07-11 19:19:38.767: D/dalvikvm(129): GC_EXPLICIT freed 164 objects / 6896 bytes in 236ms
07-11 19:19:39.197: W/RecognitionManagerService(68): no available voice recognition services found
07-11 19:19:39.567: D/dalvikvm(68): GC_EXPLICIT freed 3034 objects / 174512 bytes in 165ms
07-11 19:19:39.607: D/dalvikvm(166): GC_EXPLICIT freed 1686 objects / 86344 bytes in 797ms
07-11 19:19:39.627: I/installd(35): unlink /data/dalvik-cache/data@app@com.sweek2.android-2.apk@classes.dex
07-11 19:19:39.647: D/AndroidRuntime(1841): Shutting down VM
07-11 19:19:39.657: D/dalvikvm(1841): Debugger has detached; object registry had 1 entries
07-11 19:19:39.688: I/AndroidRuntime(1841): NOTE: attach of thread 'Binder Thread #3' failed
07-11 19:19:40.487: D/AndroidRuntime(1860): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
07-11 19:19:40.487: D/AndroidRuntime(1860): CheckJNI is ON
07-11 19:19:40.837: D/AndroidRuntime(1860): --- registering native functions ---
07-11 19:19:42.017: I/ActivityManager(68): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.sweek2.android/com.sweek2.firstPage }
07-11 19:19:42.077: D/AndroidRuntime(1860): Shutting down VM
07-11 19:19:42.099: D/dalvikvm(1860): Debugger has detached; object registry had 1 entries
07-11 19:19:42.177: I/ActivityManager(68): Start proc com.sweek2.android for activity com.sweek2.android/com.sweek2.firstPage: pid=1867 uid=10036 gids={3003}
07-11 19:19:42.187: I/AndroidRuntime(1860): NOTE: attach of thread 'Binder Thread #3' failed
07-11 19:19:43.727: D/dalvikvm(1867): GC_EXTERNAL_ALLOC freed 725 objects / 55984 bytes in 91ms
07-11 19:19:44.528: I/ActivityManager(68): Displayed activity com.sweek2.android/com.sweek2.firstPage: 2411 ms (total 2411 ms)
07-11 19:19:49.847: D/dalvikvm(261): GC_EXPLICIT freed 28 objects / 1392 bytes in 150ms
07-11 19:19:54.917: D/dalvikvm(129): GC_EXPLICIT freed 659 objects / 37464 bytes in 158ms 
```

# asp.net-mvc - 上传和处理文件 ASP.NET MVC 3

> ID：11433922
> 
> 赞同：1
> 
> 时间：2012-07-11T13:39:01.553
> 
> 标签：asp.net-mvc, asp.net-mvc-3, file-upload, readfile

我是 ASP.NET 和 MVC3 的新手，我正在尝试弄清楚如何上传文件并处理其内容，然后在视图中显示结果。

我可以使用以下视图代码成功上传文件：

```
@using (Html.BeginForm("Index", "Home", FormMethod.Post, new {
id="UploadForm",
enctype = "multipart/form-data"})){
<input type="file" name="file" id="Upload" size="60" />
<input type="submit" value="Submit" id="submitID" /> } 
```

...以及以下控制器代码：

```
public ActionResult Index(HttpPostedFile file) {
if (file != null && file.ContentLength > 0) {
var filename = Path.GetFileName(file.FileName);
var path = Path.Combine(Server.MapPath("~/REPO"), fileName);
file.SaveAs(path); }
return RedirectToAction("Index"); } 
```

我不太清楚上传文件后如何继续：我想执行服务器端代码来读取文件内容，然后在索引视图上显示结果。

所以这就是我想要做的：

1.  重定向到某个进程（控制器操作）
2.  将字符串中的文件名传递给操作
3.  使用服务器端程序读取文件以产生输出（这部分已经用 C# 编码并从字符串输入输出字符串）
4.  将该字符串传递回索引视图控制器以显示在页面上

我该怎么办？请明确回答，不要假设太多，因为正如我所说，我对 ASP.NET 和 MVC 相对较新（约 2 周）。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:46:09.593

```
public ActionResult Index(HttpPostedFile file)
    {
        if (file != null && file.ContentLength > 0)
        {
            var filename = Path.GetFileName(file.FileName);
            var path = Path.Combine(Server.MapPath("~/REPO"), fileName);
            file.SaveAs(path);

            string result = DoStuffWithFile(file);

            ViewBag.FileResult = result;

        }
        return View();
    } 
```

然后在视图中使用`@ViewBag.FileResult`来获取字符串。

# logging - 强制 slf4j 使用 logback

> ID：11433926
> 
> 赞同：31
> 
> 时间：2012-07-11T13:39:15.723
> 
> 标签：logging, log4j, slf4j, logback

无论如何强制 slf4j 使用特定的日志记录提供程序（在我的情况下是 logback）？正如在他们的文档中一样：

> 在类路径上发现了多个绑定
> 
> SLF4J API 旨在一次绑定一个且仅一个底层日志框架。如果类路径上存在多个绑定，SLF4J 将发出警告，列出这些绑定的位置。当类路径上有多个绑定可用时，请选择一个且仅一个您希望使用的绑定，然后删除其他绑定。例如，如果您在类路径上同时具有 slf4j->simple-1.6.6.jar 和 slf4j-nop-1.6.6.jar，并且您希望使用 nop (>no-operation) 绑定，则删除 slf4j-类路径中的 simple-1.6.6.jar。如果无法删除多余的绑定，SLF4J 仍将绑定一个日志框架/实现。从 1.6.6 版本开始，SLF4J 将命名它实际绑定到的框架/实现类。
> 
> 注意 SLF4J 发出的警告只是一个警告。

就我而言，我在类路径中有,`log4j.jar`和所有 logback jar。我知道有和在一起是错误的，但是我的项目很大，找到和排除maven依赖并不总是那么简单。在这种情况下 slf4j 甚至没有打印任何警告，因为我们只使用 logback 配置。我花了一天的时间来理解这个罐子地狱。`slf4j-log4j12.jar``log4j-over-slf4j.jar``slf4j-log4j12.jar``log4j-over-slf4j.jar`

例如，我想要通过 JVM 参数强制 slf4j 使用 logback，这样它就可以打印警告，并且我可以在将来排除 jars。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-20T22:21:06.953

通常，您自己的代码位于类路径的开头。因此，一种方法是创建自己的 org.slf4j.impl.StaticLoggerBinder 类：

```
package org.slf4j.impl;

import org.slf4j.ILoggerFactory;
import org.slf4j.spi.LoggerFactoryBinder;

/**
 * Force tests to use JDK14 for logging.
 */
@SuppressWarnings("UnusedDeclaration")
public class StaticLoggerBinder implements LoggerFactoryBinder {
    private static final StaticLoggerBinder SINGLETON = new StaticLoggerBinder();

    public static String REQUESTED_API_VERSION = "1.6";

    public static final StaticLoggerBinder getSingleton() {
      return SINGLETON;
    }

    private StaticLoggerBinder() {
    }

    @Override
    public ILoggerFactory getLoggerFactory() {
        return new JDK14LoggerFactory();
    }

    @Override
    public String getLoggerFactoryClassStr() {
        return "org.slf4j.impl.JDK14LoggerFactory";
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-11T14:06:45.423

除了清理你的类路径之外，没有办法强制 SLF4J 与给定的实现绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-19T20:19:22.327

我相信如果您将 logback JAR 放在类路径的开头（或在其他包含 slf4j impl 的 JAR 之前），它将是使用的那个。

但是，如果 slf4j 支持 JVM arg 指定包含 impl 的 JAR 并覆盖在类路径中查找，那就太好了，这样您就不必处理在类路径中对 JAR 进行排序以确保使用您想要的 JAR .

# html - 悬停在按钮上而不触发鼠标指针的变化

> ID：11433931
> 
> 赞同：1
> 
> 时间：2012-07-11T13:39:29.683
> 
> 标签：html, css, pointers, mouse

我的网站上有一个按钮，可以激活弹出式联系表格。这个按钮是这样构造的：

```
<a href="" class="button">Contact</a> 
```

虽然我想删除“a href”部分，但它不能被视为链接。

如果我使用以下内容：

```
<p class="button">Contact</p> 
```

然后a href被删除，但鼠标悬停时变为以下内容：
![鼠标悬停选择表单](../Images/3a3e9199d003d5d06e23c05a2dec6a1f.png)

虽然我希望它在悬停时保持正常形式：
![鼠标悬停正常形式](../Images/dde2ebbe2d1ecab1484c8e3c70aa768a.png)

认为它适用于：

```
<img class="button">Contact</img> 
```

但事实并非如此。鼠标悬停时保持正确的形式，但在此示例中看不到“联系人”一词。

任何人都可以想到一个解决方案（无需为按钮制作图像）？

在此先感谢
史蒂文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T13:43:02.813

将 CSS`cursor`属性添加到您的`<p>`标签或相应的类。（[MDN 文档](https://developer.mozilla.org/en/CSS/cursor)）：

```
.button {
  /* your other styles */
  cursor: default
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:52:45.167

试试这个CSS：

```
.button{
   cursor: default;
} 
```

# delphi - 更改 Firemonkey StringGrid 中的文本大小

> ID：11433934
> 
> 赞同：1
> 
> 时间：2012-07-11T13:39:45.570
> 
> 标签：delphi, header, firemonkey, tstringgrid

如何更改字符串网格标题中的文本大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:42:59.317

你可以编写一个[`OnApplyStyleLookup`](http://docwiki.embarcadero.com/Libraries/en/FMX.Types.TControl.OnApplyStyleLookup)类似这样的事件处理程序：

```
procedure TForm1.StringGrid1ApplyStyleLookup(Sender: TObject);
var
  Header: THeader;
  I: Integer;
begin
  Header := THeader((Sender as TStringGrid).FindStyleResource('header'));
  if Assigned(Header) then
  begin
    for I := 0 to Header.Count - 1 do
      with Header.Items[I].Font do
      begin
        Size := 32;
        Style := [TFontStyle.fsBold];
      end;
    Header.Height := 48;
  end;
  TStringGrid(Sender).Realign;
end; 
```

# c# - 什么会导致无法为 UDP 数据报计算 IP 标头校验和？

> ID：11433936
> 
> 赞同：5
> 
> 时间：2012-07-11T13:39:51.457
> 
> 标签：c#, .net, windows-xp, wireshark, udpclient

我正在尝试将 UDP 数据报从 Windows XP 上的 UdpClient 发送到设备，但它没有响应。当我查看 Wireshark 中的流量时，我发现我的出站数据包很糟糕，因为它们的所有 IP 标头校验和都是 0x0000。

这台机器有两个网卡，所以我开始使用另一个网卡并开始遇到同样的问题。

我可以用两个网卡 ping 我的设备就好了，所以我认为我的 C# 代码一定有什么问题，但我不确定是什么。在带有 UdpClient 的 Windows XP 上的 .NET 4 中，您是否可以做错什么事情来导致这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T13:46:26.440

您看到一个空校验和，因为 Windows 正在执行校验和计算的硬件卸载。它将由网络接口​​卡 (NIC) 的处理器执行。使用数据包嗅探器捕获数据包将在数据包被您的 NIC 处理之前显示该数据包。您可以从设备管理器下的设备属性页面关闭卸载：

![在此处输入图像描述](../Images/5f616c13eba61ca8ff08e50da4c6ceb1.png) ![在此处输入图像描述](../Images/4434a123e528734a1dd90440ce514e28.png)

在任何情况下，UDP 协议[都将校验和定义为可选](http://en.wikipedia.org/wiki/User_Datagram_Protocol#IPv4_PSEUDO-HEADER)，并且零是校验和的有效值。这是为了让处理能力较低的设备跳过校验和计算。校验和通常由处理数据包的第一个网络节点（例如路由器）填写。即使它保持为零，您的设备仍应接受有效的数据包。

**编辑**：我刚刚意识到您在谈论 IP 标头，而不是 UPD 标头。这适用于两者，除了 IP 标头校验和不是可选的（并且将由您的 NIC 计算）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T13:42:12.843

看起来是驱动问题。尝试在驱动程序属性中关闭校验和卸载。

或者，如果您在同一台机器上运行 Wireshark，则可能是校验和卸载工作正常，而 Wireshark 没有报告校验和，因为它是在 Wireshark 看到数据包后计算的。

要确认在单独的框中运行 wireshark 以确认校验和为零或不为零。

如果校验和毕竟没问题，那么很可能是防火墙问题。确保在本地计算机上有允许返回流量的防火墙规则。

# vertica - 垂直整体

> ID：11433937
> 
> 赞同：0
> 
> 时间：2012-07-11T13:39:53.487
> 
> 标签：vertica

大家好，我和我的公司正在寻找一种产品，可以帮助减轻 OLTP 数据库的一些负载（一次大）！所以我们偶然发现了 Vertica。经过过去 2 个月的一些测试和研究，我们决定用我们的新产品（不是 Vertica 的产品）来打击我们的客户。好吧，在许可证价格出现之前，一切都很好！众所周知，运行超过 5 TB 的数据库并不多，或者至少我们不需要太多！！或者可能没有！好的，那我就进入正题！！Vertica 在什么时候获得回报！我想将它与 Oracle 进行比较。我们都知道 Oracle 许可证是每年一次的，并且在 core/proc/mem 等之上...；另一方面，Vertica 的许可成本取决于 TB 使用量，我将粗体显示此 ROW DATA 不是压缩数据。

所以问题是：**Vertica 在什么时候（数据库大小）会是一个不错的选择？**

这一点可以假设一个 5 TB 的数据库使用 5 年 Vertica 与 ORACLE 或 SQL SERVER 相比将为您带来 XXX % 的好处。请记住，Vertica 以许可证购买总价的 21% 提供支持服务。我无意冒犯本文中引用的任何公司，也没有试图宣传它们！我只是在寻找意见，如果我的任何陈述有误，请随时纠正我。我毫不怀疑有些公司实施了 Vertica 并进行了市场研究以及强大的基准测试，因此可以自由地分享知识。我也知道这是一个如此笼统的问题，有很多答案和意见，欢迎所有人！谢谢你们！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:48:46.383

在过去的考试中，Vertica 表现出色，因为您可以压缩数据并且可以使用商用硬件，因此 Vertica 的 5 TB 磁盘空间并不等同于 Oracle 的 5 TB 磁盘空间。

首先，不仅仅是成本，还有速度。如果您需要速度，Vertica 是比 Oracle/SQL Server 更好的选择。但要计算成本，您还需要确定 10 TB Oracle 数据库是否实际上是 5-7 TB Vertica 数据库。

压缩级别会因数据的外观而异，因此您需要在 Vertica 的帮助下运行一些测试，以确定这些压缩级别的外观。

也欢迎私信我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T20:38:33.420

我不确定 Oracle 是否可以替代您的 5T 用例，除非您考虑使用 Oracle Exadata（SQLserver 相同），Exadata 应该贵得多（sql server 大数据解决方案相同。

一条关于商品服务器的评论，要获得最大性能的商品服务器是不够的，vertica 非常喜欢大内存地址空间和多核。

每年大约 20% 的额外支持，在 oracle 中也是如此。

最后，我认为 vertica 具有竞争力并且可能更便宜。

抱歉，我无法提供比较数据，但如果您坚持可以从您的垂直销售人员处获得

谢谢

# asynchronous - F# Async.FromBeginEnd 不应该调用 End 函数？

> ID：11433941
> 
> 赞同：3
> 
> 时间：2012-07-11T13:40:12.267
> 
> 标签：asynchronous, f#, io

我正在使用 F# 做一些低级别的套接字工作，并使一切异步。我有一个套接字，用于使用异步工作流来监听连接以处理它们，因此它使用它来包装 Socket.BeginListen() 和 Socket.EndListen()。

```
member socket.AsyncAccept () =
    Async.FromBeginEnd( socket.BeginAccept, endOrDisposed socket.EndAccept null ) 
```

当我想停止收听时，目前我正在对其执行 Socket.Close() ，这将导致由 Socket.BeginAccept() 启动的异步操作完成。

最初我遇到了一个问题，因为无论 BeginXXX() 启动的操作如何完成，FromBeginEnd() 函数都会调用 EndXXX() 函数。在某些情况下，这会导致 EndXXX() 函数发生 ObjectDisposed 异常，因为在调用它时，Socket 已经关闭并被释放。我添加了一个小处理函数，可以过滤掉这些异常：

```
let endOrDisposed endFunc defaultResult iar = try endFunc iar with | _ -> defaultResult 
```

这可以解决问题，但在调试中运行时不行。我很清楚 Just My Code 选项可用于隐藏异常，但这可能会更频繁地发生在其他一些 IO 操作中，因此我也不想将处理器时间浪费在引发和捕获不应该的异常上一开始就真的在那里。此外，我可能不想隐藏在我需要调试的区域中引发其他异常的位置。

我查看了 Async.FromBeginEnd 的代码，无论如何它总是调用 EndXXX() 函数，我不确定这是最好的行为，也许我应该写一个替换它？或者有人对优雅的解决方案有任何其他想法吗？

* * *

我刚刚在文档中发现（当然我以前看过）这个：

> 要取消对 BeginAccept() 方法的挂起调用，请关闭 Socket。当异步操作正在进行时调用 Close() 方法时，将调用提供给 BeginAccept() 方法的回调。对 EndAccept() 方法的后续调用将引发 ObjectDisposedException 以指示操作已被取消。

我仍然不喜欢这个例外，即使它是设计使然。我宁愿找到一种不在已处置对象上调用 EndXXX() 的方法。也许我可以以某种方式将一些 CancellationToken 魔法混入其中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T02:50:37.217

我会在这里使用可选`cancelAction`参数`Async.FromBeginEnd`：

```
type Socket with
  member this.AsyncAccept () =
    let canceled = ref false
    let endAccept iar = if not !canceled then this.EndAccept iar else null
    let cancel () = canceled := true; this.Close ()
    Async.FromBeginEnd (this.BeginAccept, endAccept, cancelAction = cancel) 
```

这样您就可以使用`Async`' 的内置取消功能（当然基于`CancellationToken`），而无需直接触摸 a `CancellationToken`。（即，您**不**`Socket.Close`应该出于取消目的而致电。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T16:45:52.300

需要一种方法来中断 Async.FromBeginEnd 进程并在套接字关闭的情况下阻止它尝试 EndAccept（这可能会扩展到 Accept 之外的其他操作）。

我没有调用 Socket.Close()，而是使用了 CancellationTokenSource 并使用它注册了一个处理程序，该处理程序将调用 Socket.Close()：

```
cts.Token.Register (fun () -> listener.Close()) |> ignore 
```

然后不是直接传递 Async.FromBeginEnd EndAccept 函数，而是现在通过一个函数，如果令牌已被取消，该函数将停止调用 EndAccept。

```
let endOrDisposed endFunc defaultResult iar = try endFunc iar with | _ -> defaultResult
let endIfNotCancelled endFunc defaultResult (token:CancellationToken) iar = if token.IsCancellationRequested then defaultResult else endOrDisposed endFunc defaultResult iar

type Socket with
  member socket.AsyncAccept (cancelToken) =
    Async.FromBeginEnd( socket.BeginAccept, endIfNotCancelled socket.EndAccept null cancelToken) 
```

这仍然使用我的函数来过滤和忽略异常（我不认为异常在网络方面是非常特殊的，在这个应用程序的情况下，无论如何它都不会做任何响应）。

# java - Builder 模式何时比继承和多重实现更可取？

> ID：11433942
> 
> 赞同：0
> 
> 时间：2012-07-11T13:40:17.317
> 
> 标签：java, design-patterns, builder

什么时候使用如下构建器模式有意义：

```
private static final Foo FOO1 = Foo.Builder().setX(...).setY(...).setZ(...).build();
private static final Foo FOO2 = Foo.Builder().setX(...).setY(...).setZ(...).build();
private static final Foo FOO3 = Foo.Builder().setX(...).setY(...).setZ(...).build();
... x100 ... 
```

VS类似的东西

```
public class MyFoos {
  public static class Foo1 implements Foo {
    public String getX() {...}
    public String getY() {...}
    public String getZ() {...}
  }

  public static class Foo2 implements Foo {
    public String getX() {...}
    public String getY() {...}
    public String getZ() {...}
  }

  public static class Foo3 implements Foo {
    public String getX() {...}
    public String getY() {...}
    public String getZ() {...}
  }
  ... x100...
} 
```

Foo 有多复杂有关系吗？例如，假设我们使用了 Foo.Builder()，我们可能需要调用类似：

Foo.Builder().setSpecialFunction(new Function() {...})

其中 Function 类似于[http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Function.html](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Function.html)

这是否表明 Builder 模式在这种情况下不合适？如果没有，什么会更可取？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:45:54.833

第二个设计选择很糟糕——不要滥用继承。构建器模式（根据 Bloch 的“Effective Java”）适用于构造函数中的参数数量超过某个常数（例如，根据 Bloch 的 4 个）时使用。

# objective-c - 为什么 Objective-C 块在不将其复制到堆的情况下仍然可以工作？

> ID：11433943
> 
> 赞同：8
> 
> 时间：2012-07-11T13:40:20.140
> 
> 标签：objective-c, ios, cocoa-touch

我的课堂上有一个简单的方法：

```
- (void)getFormWithBlock:(DataCenterResultBlock)block {
    [SomeClass doSomeLongOperationWithParam:someParam 
                                  completionBlock:^(NSData *data, NSURLResponse *response) {
                                      //Success
                                      block(aVar, YES);
                                  } errorBlock:^(NSError *error) {
                                      //Failed
                                      block(nil, NO);
                                  }];
} 
```

我读到如果您正在异步执行某些操作，您应该将块复制到堆中，因为它们是在堆栈上分配的，并且一旦调用树倒带它就会消失。

但是在这里，我没有将它复制到堆中，但我仍然没有崩溃。为什么？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T14:00:44.733

[块变量由 ARC 编译器自动复制到堆中](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#misc.blocks)：

> 7.5。块
> 
> ...
> 
> 可保留对象所有者类型的 __block 变量通过使用从堆栈副本中移动的结果初始化堆副本而从堆栈中移出。

**编辑**我想我误解了这个问题：你问的是块对象*本身*，而不是块*变量*。在这种情况下，答案略有不同，但归结为相同：ARC 会自动执行正确的操作。

> ARC 知道，如果在当前范围返回后使用块文字，则必须复制它们。非 ARC 代码需要显式复制和自动释放返回的块：

```
return [[^{
    DoSomethingMagical();
} copy] autorelease]; 
```

> 使用 ARC，这简单地变为：

```
return ^{ DoSomethingMagical(); }; 
```

（从[这里](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T20:41:48.483

`[SomeClass doSomeLongOperationWithParam:completionBlock:errorBlock:]`应该复制完成和错误块。

如果您查看该方法的实现，它可能正在做正确的事情并复制您传入的块。ARC 或没有 ARC，该方法应该复制这些块。

# c# - 使用 GetCommandLineArgs() 获取正在运行的应用程序的参数

> ID：11433946
> 
> 赞同：0
> 
> 时间：2012-07-11T13:40:28.797
> 
> 标签：c#, .net, mutex

我使用互斥锁为我的应用程序运行 1 个单个应用程序，当使用命令行或“打开方式”发送参数时，我想将该参数的字符串添加到列表框中，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:27:54.040

由于该方法的返回是一个字符串[]，您应该能够简单地将其设置为列表的数据源。就像是：

```
listbox.DataSource = Environment.GetCommandLineArgs(); 
```

# c - 更改外部变量的值

> ID：11433953
> 
> 赞同：3
> 
> 时间：2012-07-11T13:40:53.480
> 
> 标签：c, extern

我们在 File1.c

```
int arr[10]; 
```

在 File2.c 中

```
extern int *arr;

int main()

{
   arr[0]=10;
   return 0;
} 
```

这可能会出现什么问题，为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T13:47:20.657

数组不是指针。内存访问将是错误的。

在`File1.c`中，您有内存布局：

```
+---+---+---+---+---+---+---+---+---+---+
+ 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 |
+---+---+---+---+---+---+---+---+---+---+
^
arr 
```

在`File2.c`中，您已经告诉编译器您有内存布局：

```
+-------+
|  ptr  |
+-------+
^
arr 
```

其中指针可能指向可以存储整数的地方。

编译器必须做完全不同的事情才能`extern int *arr;`从`extern int arr[];`.

如所写，最可能的结果是由于编译器取消引用空指针而导致崩溃。但是，行为是未定义的，一切皆有可能。你对编译器撒了谎；编译器会得到自己的回报——它不喜欢被骗。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T13:45:21.673

数组不是指针。

`arr`被定义为一个数组，因此也将其声明为一个数组。

```
extern int arr[10];   // file2.c 
```

如果不这样做，您的程序会调用未定义的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:53:03.387

`int arr[10];`形式上，本身`arr`不占用内存空间；它只是一个可以在链接时确定的地址值。假设`arr`是100；`arr[0]`是内存地址 100 中的值。

在`extern int *arr;`表单中，`arr`它本身就是内存中的一个变量。假设 arr 为 100，`arr[0]`是内存地址`ptr`中`ptr`的值，而是地址 100 处的内存单元的值。

**编辑**

gcc 生成的 asm 给出了深刻的见解：

```
extern int a[10];
extern int *b;

int foo(void)
{
    return a[3] + b[5];
}

_foo:
    pushl   %ebp
    movl    %esp, %ebp

    movl    _b, %eax /* 1st memory load for pointer */
    addl    $20, %eax
    movl    (%eax), %eax /* 2nd memory load for pointer  */

    addl    _a+12, %eax /* only one memory load for array */

    popl    %ebp
    ret 
```

# c++ - 一个源需要在多台机器上进行不同的编译

> ID：11433954
> 
> 赞同：3
> 
> 时间：2012-07-11T13:40:55.140
> 
> 标签：c++, git, makefile

我有一个 C++ 程序，旨在为我正在做的暑期项目运行模拟。它的计算量很大，但我已获得使用集群计算机资源来运行它的许可，但我在自己的笔记本电脑上对其进行了测试和开发。该程序生成文本文件作为输出，这就是我遇到麻烦的地方。

我需要将文本文件保存在不同的路径中，具体取决于我是在自己的计算机上还是在集群计算机上运行程序。我现在的解决方案是`$(shell hostname)`在我的 makefile 中使用来检查代码正在哪台机器上编译，并从该输出中使用条件编译以及从 makefile 中的该操作定义的宏。有一次，我使用了两个不同版本的标头，它们在我的计算机和集群上定义了不同的宏，但是我使用 git 存储库来来回传输更改，并且我很难排除一个文件像这样。

我只是想知道在编译时在具有相同源的不同计算机上设置路径的最佳做法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:57:06.727

在我看来，它不需要在不同的机器上进行不同的编译。听起来它需要在运行时从命令行或某种配置文件中获取一些路径。

一个建议是使用[boost 程序选项库](http://www.boost.org/doc/libs/1_50_0/doc/html/program_options.html)，它在一个简单的设置中允许您从命令行或配置文件中读取相同的参数。这是我在大型集群或笔记本电脑上运行类似作业时使用的，它运行良好。

以下是他们文档中的一个简单示例：

```
// Declare the supported options.
po::options_description desc("Allowed options");
desc.add_options()
    ("help", "produce help message")
    ("compression", po::value<int>(), "set compression level")
;

po::variables_map vm;
po::store(po::parse_command_line(ac, av, desc), vm);
po::notify(vm);    

if (vm.count("help")) {
    cout << desc << "\n";
    return 1;
}

if (vm.count("compression")) {
    cout << "Compression level was set to " 
 << vm["compression"].as<int>() << ".\n";
} else {
    cout << "Compression level was not set.\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:50:11.873

我同意 Alex 的观点，最简单的解决方案不是在编译时，而是在运行时通过配置文件或命令行参数。在所有其他条件相同的情况下，您可能更容易尝试通过命令行参数使用`argv`and传递它`argc`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:09:24.043

我对此不是很有经验，但我可以想到一种简单的方法。

在每台机器上设置一个指向相应目录的环境变量，并在您的 makefile 中使用该环境变量。

例如，

在机器 1 的 ~/.bashrc

```
export MY_DIRECTORY = ~/Foo 
```

在机器 2 的 ~/.bashrc

```
export MY_DIRECTORY = ~/Bar 
```

您的 Makefile 将使用运行它的机器的环境变量。例如。$(MY_DIRECTORY) 和（~/.bashrc 不是你存储库的一部分，所以两台机器上可以存在不同的副本）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:57:10.497

如果您可以忍受对 QtCore 的依赖（根据编译选项和平台，库在 750K 和 4MB 之间），您可以使用 QSettings 方便地存储目录路径，而无需每次都设置目录路径。您可以在运行时在命令行上将其传递*一次*，然后让程序将结果存储到设置文件中，然后该设置将成为将来调用程序时无需命令行参数的新默认值。

其他无依赖的替代方案包括编写自己的配置文件解析例程或使用现有的例程，但我总是喜欢依赖经过良好测试的开源代码。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T14:14:48.163

您可以继续使用单独的标头的路线。将两者都包含在您的 Git 存储库中`clusterHeader.h`，`laptopHeader.h`并使用您现有的 Makefile 脚本在每个系统上使用不同的头文件进行构建。为了缓解链接问题，可能会在构建时临时重命名或复制脚本中的文件，或将其复制为`clusterHeader.hpp`普通`laptopHeader.hpp`旧文件`header.h`，并在脚本末尾更改回名称。

如果您想在构建之间保持头文件的更改一致，请将此方法用作*另一个*头文件，并将`#include`该头文件放在与操作系统无关的头文件中。

IE

```
source.cpp
|
-> header.hpp
    |
    -> clusterHeader.hpp OR laptopHeader.hpp 
```

或者，只要系统不是完全相同的操作系统（我假设它们不是，因为一个是集群），您可能很容易让它与一些简单的`#ifdef`语句一起工作。

最后，CMake 或 qmake 始终是选项。

# magento - Magento 在顶部导航下拉列表中添加类别描述

> ID：11433955
> 
> 赞同：0
> 
> 时间：2012-07-11T13:40:55.917
> 
> 标签：magento, add, categories

我在向顶部导航添加类别描述时遇到问题。我正在使用**自定义扩展**magento 扩展（从[http://web-experiment.info/webandpeople-custom-menu-extension.html](http://web-experiment.info/webandpeople-custom-menu-extension.html)获得）

到目前为止，我去了 navigation.php 文件并更改了

```
$html.= '<a class="itemMenuName level' . $level . $active . '" href="' . $this->getCategoryUrl($child) . '"><span>' . $name  . ' </span></a>' ; 
```

到

`$html.= '<a class="itemMenuName level' . $level . $active . '" href="' . $this->getCategoryUrl($child) . '"><span>' . $name . $description . ' </span></a>' ;`

但我仍然只得到类别名称。

[您可以在http://puck.ro/Navigation.txt](http://puck.ro/Navigation.txt)中获得完整的代码

我认为这不是正确的做法！有没有人告诉我这样做的确切方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:50:47.950

我用它来获取描述

```
$category_data =Mage::getModel('catalog/category')->load($id);
$category_data_des = $category_data->getDescription(); 
```

然后像这样添加到循环中

```
$html[] = '<span>'.$category_data_des.'</span>'; 
```

# mysql - 如果没有返回记录，MySQL 返回替代记录

> ID：11433958
> 
> 赞同：0
> 
> 时间：2012-07-11T13:40:57.970
> 
> 标签：mysql

我有一张如下表

```
-------------------------
| 援助| 时间 | 自由度 |
-------------------------
| 1 | 1 | 是 |
-------------------------
| 1 | 2 | N |
-------------------------
| 2 | 3 | 是 |
-------------------------
| 3 | 4 | 是 |
-------------------------
| 3 | 5 | N |
-------------------------

```

我想根据*aid*和*tid查询表以获取**tid* ，但如果该*id*不存在该*aid*则它应该返回默认*tid （由**dft*列中的Y 标识）。

 ***我尝试了以下不会引发错误但返回 NULL

```
选择

如果 （
    t1.tid 不为空，
    t1.tid,
    (
        选择
            t2.tid
        从
            表 t2
        在哪里
            t2.aid = 1
        AND t2.dft = 'Y'
    )
) 作为潮
从
    表 t1
在哪里
    t1.aid = 1
和 t1.tid = 3
```

由于该代码正在使用不存在的*辅助*1查找*tid* 3，因此应返回 1 的*tid ，因为这在**dft*列中标记为 Y。

 ***有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:45:01.480

尝试这个：

```
SELECT tid
 FROM table t1
WHERE t1.aid = 1
  AND t1.tid = 3
UNION   
SELECT tid
 FROM table t1
WHERE t1.aid = 1
  AND t1.tid <> 3
  AND dft = 'Y' 
```

如果 和 的组合`aid`是`tid`唯一的，那么您可以使用此版本：

```
SELECT tid
 FROM table t1
WHERE t1.aid = 1
  AND (t1.tid = 3 OR dft = 'Y')
ORDER BY dft LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:48:30.000

这可以在 MSSQL 中使用，但我无法访问 MySQL 服务器来尝试它

```
SELECT TOP 1 *
FROM table t1
WHERE t1.aid=1
ORDER BY CASE WHEN t1.tid=3 THEN 0 ELSE 1 END, CASE WHEN t1.dft='Y' THEN 0 ELSE 1 END 
```******

# asp.net-mvc - : 索引超出范围。必须是非负数且小于集合的大小。参数名称：索引

> ID：11433963
> 
> 赞同：2
> 
> 时间：2012-07-11T13:41:30.457
> 
> 标签：asp.net-mvc

我在客户通过网站发布更新事件时收到此错误。我调试整个源，但问题没有重现。请帮助在哪种情况下会引发这些类型的问题？

文件：SupportController.cs 方法：详细信息更新（字符串 [] Response_Type，字符串事件 ID，字符串类型，事件信息事件信息）异常消息：索引超出范围。必须是非负数且小于集合的大小。参数名称：索引内部异常：堆栈跟踪：在 System.Collections.ArrayList.get_Item(Int32 index) at System.Collections.Specialized.NameObjectCollectionBase.BaseGetKey(Int32 index) at Syncfusion.Website.MvcApplication.Controllers.SupportController.detailsupdate(String [] Response_Type, String eventid, String type, IncidentInfo eventinfo)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T18:32:18.340

**一般关于此错误：** 当您在集合本身没有值时`item`从“ ”中引用“”时，会发生这种情况。 首先，您应该确保该集合包含至少 1 个项目供您参考。**关于你得到的具体一个：** 通过查看错误，在我看来，“get_Item”被调用但没有什么可得到的。（即集合为空）。确保您通过某种方式添加了项目。`itemcollection`

 **希望这可以帮助！**

# javascript - ExtJS 4.1.1：评估网格中的字段

> ID：11433965
> 
> 赞同：0
> 
> 时间：2012-07-11T13:41:36.520
> 
> 标签：javascript, extjs, extjs4, extjs4.1

我正在努力使用`grid`具有可编辑单元格（[CellEditing 插件](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.plugin.CellEditing)）的 ExtJS 4.1.1。

一个人应该能够在单元格中输入数学公式，并且它应该将结果生成到字段的值中。例如：如果用户键入`(320*10)/4`返回值应该是`800`. 或者类似，如果用户键入`(320m*10cm)/4`函数应该从公式中去除非数学字符然后计算它。

我想用 RegExp 替换（或匹配），但我似乎无法让它工作。它不断返回 NaN，当我这样做时，`console.log(e.value);`它只返回我需要的`originalValue`而不是返回`value`。

我没有太多要附加的代码：

```
onGridValidateEdit : function(editor,e,opts) {
    var str = e.value.toString();
    console.log(str);
    var strCalc = str.match(/0-9+-*\/()/g);
    console.log(strCalc);
    var numCalc = Number(eval(strCalc));
    console.log(numCalc);
    return numCalc;
}, 
```

返回：`str=321` `strCalc=null` `numCalc=0`当我输入`321*2`.

任何帮助表示赞赏，

GR。

* * *

## 更新：

根据Paul Schroeder的[意见，我创建了这个：](https://stackoverflow.com/a/11436041/1341063)

```
onGridValidateEdit : function(editor,e,opts) {
    var str = e.record.get(e.field).toString();
    var strCalc = str.replace(/[^0-9+*-/()]/g, "");
    var numCalc = Number(eval(strCalc));
    console.log(typeof numCalc);
    console.log(numCalc);
    return numCalc;
}, 
```

它计算了数字，但我无法将其打印回网格本身。它显示为“NaN”，即使在控制台中显示`typeof=number`和`value=800`.

* * *

## 最终代码：

这是有效的最终代码：

```
onGridValidateEdit : function(editor,e,opts) {
    var fldName = e.field;
    var str = e.record.get(fldName).toString();
    var strCalc = str.replace(/[^0-9+*-/()]/g, "");
    var numCalc = Number(eval(strCalc));
    e.record.set(fldName,numCalc);
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:25:34.287

让我们分解这段代码。

```
onGridValidateEdit : function(editor,e,opts) {
    var str = e.value.toString(); 
```

这段代码在哪个监听器中使用？这对我们来说非常重要，这是我在插件中设置监听器的方式：

```
listeners: {
            edit: function(editor, e){
                var record = e.record;
                var str = record.get("your data_index of the value");
            }
        } 
```

以这种方式设置它对我有用，所以让我们继续：

```
 var strCalc = str.match(/0-9+-*\/()/g);
    console.log(strCalc); 
```

此时strCalc=null，这也是正确的。str.match 返回 null 因为您的正则表达式与字符串中的任何内容都不匹配。我认为你想要做的是：

```
var strCalc = str.replace(/[^0-9+*-]/g, "");
console.log(strCalc); 
```

这将更改它以替换字符串中不是您的方程式运算符和数字的所有字符。在那之后，我认为它应该适用于整数。我认为您实际上可能也想要十进制数字，但我想不出我头顶上的正则表达式（ . 需要以某种方式转义），但它应该足够简单，可以在谷歌搜索中找到.

# android - Android HTTP-post AsyncHttpClient 新线程问题

> ID：11433970
> 
> 赞同：0
> 
> 时间：2012-07-11T13:41:55.740
> 
> 标签：android, http, android-asynctask, http-post

最近我发布了一个关于 Android HTTP-post AsyncHttpClient 的问题。它位于：[Android HTTP-post AsyncHttpClient](https://stackoverflow.com/questions/11424624/android-http-post-asynchttpclient)下面是更新后的方法。如您所见，这是一个布尔方法。我将 done 变量作为全局变量，当用户单击登录按钮时，我检查 postLoginData 是否返回 true 或 false。如果为真，我需要继续进行另一个活动，否则我会显示一个对话框。但是在一个新线程中将 done 设置为 true，我不能真正让我的主线程等待，因为这会导致另一个错误。我不确定我应该解决什么问题。我希望有人会发布一个使用 AsyncHttpClient 登录的教程。

```
public boolean postLoginData(String userid, String password) {
    done = false;
    params1.put("username", "");
    params1.put("password", ""); 
    Log.d("addteq", "Start Get Post"); 
    AsyncHttpClient myClient = new AsyncHttpClient();
    myClient.post("http://192.168.2.108/htdocs/?action=login",
            params1, new AsyncHttpResponseHandler() {
                @Override
                public void onSuccess(String response) {
                    done = true;
                    System.out.println("login success");
                }
            });
    return done;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T15:05:04.000

我的方法是错误的。该库在后台线程中处理计算： [http://loopj.com/android-async-http/](http://loopj.com/android-async-http/) 一个基于异步回调的 Android Http 客户端，构建在 Apache 的 HttpClient 库之上。所有请求都在您应用的主 UI 线程之外发出，但任何回调逻辑都将在同一线程上执行，因为回调是使用 Android 的 Handler 消息传递创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:30:09.297

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。`postLoginData`在里面运行`doInBackground(..)`并返回布尔值。然后 AsyncTask 将处理它并`postExecute(..)`再次在您的主线程中运行，您可以在其中启动新活动或显示对话框。

# c# - 在命令行参数中传递新行？

> ID：11433977
> 
> 赞同：9
> 
> 时间：2012-07-11T13:42:09.400
> 
> 标签：c#, .net-4.0, command-line-arguments

我加载了一个小型控制台应用程序，它只是读取并打印传递给程序的第一个命令行参数到控制台。

我想将换行符传递给我尝试过的参数：

```
prog.exe \n  --> outputs \n
prog.exe "sfs \n sfff" --> outputs sfs \n sfff
prog.exe "ff \\n ff" --> outputs ff \\n ff
prog .exe "ff \\\\n ff" --> outputs ff \\\\n ff 
```

还有其他一些我想使用的转义吗？或者在将转义字符输出到控制台之前，我必须调用 args[0] 来处理转义字符吗？

为了澄清，我试图将一个字符串传递给我的程序，其中包含换行符。输出到控制台被用作测试。我可以很容易地插入一个调试中断行并检查变量的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:45:36.587

您遇到的问题是您从命令行获得的字符串没有被编译。当您的代码中有字符串文字时，它们会被编译，这是处理转义字符并将其转换为换行符等的时候。您可能需要做一些事情，例如用换行符替换输入字符串中的所有“\n”实例。

**编辑：**

从[这里开始](https://markyourfootsteps.wordpress.com/tag/codedom/)（稍作修改），这将使用 CSharp 编译器编译您的字符串，从而用适当的字符替换转义序列：

```
 public static string ParseString(string input)
    {
        var provider = new Microsoft.CSharp.CSharpCodeProvider();
        var parameters = new System.CodeDom.Compiler.CompilerParameters()
        {
            GenerateExecutable = false,
            GenerateInMemory = true,
        };

        var code = @"
        public class TmpClass
        {
            public static string GetValue()
            {
                return """ + input + @""";
            }
        }";

        var compileResult = provider.CompileAssemblyFromSource(parameters, code);

        if (compileResult.Errors.HasErrors)
        {
            throw new ArgumentException(compileResult.Errors.Cast<System.CodeDom.Compiler.CompilerError>().First(e => !e.IsWarning).ErrorText);
        }

        var asmb = compileResult.CompiledAssembly;
        var method = asmb.GetType("TmpClass").GetMethod("GetValue");

        return method.Invoke(null, null) as string;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:45:56.993

实际上，在命令行参数中传递换行符按预期工作。PowerShell 中的快速测试：

```
PS> ./echoargs "a`nb" b c
arg 1: a
b
arg 2: b
arg 3: c 
```

现在，如果您正在尝试做同样的事情，`cmd`那可能会很困难（并且从您的问题中并不是很明显——`Process.Start`尽管如此）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:46:17.617

如果你通过`prog .exe "ff \\\\n ff"`

您可以`var s = arg[0[.Replace("\" ,@"\\");`像这样从代码中替换它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T13:50:16.787

从 windows 命令行，这是不可能的。为了安全起见，C# 将来自命令行的用户输入完全解析为文字。没有转义字符会自动创建一个新行，除非您编写代码来遍历字符串并替换`\n`为实际的换行符。

如果您在`\n`命令行中输入，C# 会将其解析为`\\n`.

# c++ - 如何获取给定 PIDL 的 IWMDMStorageControl 接口

> ID：11433978
> 
> 赞同：0
> 
> 时间：2012-07-11T13:42:10.847
> 
> 标签：c++, windows, interface, mtp

我使用 SHBrowseForFolder() 在 MTP 设备上选择一个文件夹。然后我想从那里复制文件。IWMDMStorageControl 接口（来自 Windows Media Format 11 SDK）似乎很合适，但是如何从 SHBrowseForFolder() 返回的带有 PIDL 的对象获取它？

（我问过关于获取 IWMDMStorageControl 接口的类似问题：[How to get IPortableDeviceContent interface for given PIDL](https://stackoverflow.com/questions/11434180/how-to-get-iportabledevicecontent-interface-for-given-pidl)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:59:32.247

我们可以通过这种方式从 SHBrowseForFolder() 中获取与 PILD 关联的显示名称：

```
TCHAR DisplayName[MAX_PATH]; // we will get it here
LPITEMIDLIST pidlSelected = SHBrowseForFolder( &bi );
if ( pidlSelected && ! SHGetPathFromIDList(pidlSelected, DisplayName) )
{ // it is media device
    IShellFolder *psfParent;
    LPCITEMIDLIST pidlRelative;
    STRRET str;
    HRESULT hres = SHBindToParent(pidlSelected, IID_IShellFolder, (void**)&psfParent, &pidlRelative);
    if (SUCCEEDED(hres))
    {
        psfParent->GetDisplayNameOf( pidlRelative, SHGDN_FORADDRESSBAR, &str );
        psfParent->Release();
        StrRetToBuf( &str, pidlSelected, DisplayName, sizeof(DisplayName)/sizeof(DisplayName[0]) );
    }
} 
```

然后我们可以解析路径，并通过相同的路径遍历MTP文件结构。这不是优雅的解决方案，但它是我发现的唯一一个。

# android - 在eclipse中逐行调试android应用程序

> ID：11433980
> 
> 赞同：-1
> 
> 时间：2012-07-11T13:42:14.710
> 
> 标签：android, debugging

你能告诉我如何在eclipse中逐行调试android应用程序吗？这很复杂，我搜索了很多但找不到任何有用的东西。从现在开始感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:48:11.907

如果您正在尝试这样做，您不能在运行时暂停执行并分析变量的值。

您可以在每一行之后添加日志，并跟踪您尝试在 logcat 中“观察”的变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:41:41.780

在第一个类的第一行放置一个断点（右键单击该行并选择 Toogle 断点），然后在调试模式下运行 appli（运行->调试）。它将在您的断点处停止，然后使用 F6 逐行导航。（将鼠标放在所需的变量上，它将显示该点的值，甚至添加表达式以每次查看该值）

# php - 通过 html 名称表单检索 php 变量

> ID：11433981
> 
> 赞同：1
> 
> 时间：2012-07-11T13:42:19.780
> 
> 标签：php, html, variables

我只需要知道它的 html 输入名称来检索 php 变量。

如：我知道输入的名字是 admin[username] 所以我想得到变量 $_POST['admin']['username]

我需要这个来对输入进行某种验证。换句话说，我在显示表单时保存了 html 输入名称，但只在下一个服务器请求时测试它，所以我并不总是知道 php 变量名称是什么，因为它可以通过 javascript 或我如果 html 输入名称是 admin[]，则可以有这样的数组

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T15:12:20.570

```
$postdata = get_associative_array_from_post_data($post['admin']);

function get_associative_array_from_post_data($array){
    if(isAssoc($array)){
        /*foreach($array as $key=>$value){
            $your_key = $key;
            $your_value = $value;
        }*/
        return $array;
    }
    else{ //if the post array has no keys, search for arrays within this 
        $key_collection=array();
        foreach($array as $sub_array){

            foreach($sub_array as $key=>$value){
                $key_collection[$key][] = $value;
            }
        }
        return $key_collection;
    }

}    

function isAssoc($arr)
{
    return array_keys($arr) !== range(0, count($arr) - 1);
} 
```

如果您发布：

admin[username] = 'test' 和 admin[email] = 'test@example.com'

你会得到

```
$postdata = array('username'=>'test', 'email'=>'test@example.com'); 
```

如果您发布： admin[][username] = 'test' 和 admin[][username] = 'test2' admin[][email] = 'test@example.com' 和 admin[][email] = 'test2@示例.com'

你会得到：

```
$postdata = array(
                      'username'=>array('test', 'test2'),
                      'email'=>array('test@example.com', 'test2@example.com')
                 ); 
```

# c++ - 使用 Borland C++ 执行 dos 命令并保存输出

> ID：11433983
> 
> 赞同：0
> 
> 时间：2012-07-11T13:42:20.753
> 
> 标签：c++, c++builder

C++ 新手。

我下午大部分时间都在看，有没有人知道执行 DOS 命令并保存到 Windows 窗体应用程序的变量的简单方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:52:10.203

您可以使用`system("dir");`. 这将打开命令提示符并运行 dir 命令。

或者，您可以使用 WinExec。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms687393(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687393(v=vs.85).aspx)

您可以将命令重定向到文本文件，然后读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T19:19:28.263

```
bool execDosCommand(char *command, AnsiString &output)
{
    SECURITY_ATTRIBUTES sa;
    ZeroMemory(&sa,sizeof(SECURITY_ATTRIBUTES));
    sa.nLength=sizeof(SECURITY_ATTRIBUTES);
    sa.bInheritHandle=true;
    sa.lpSecurityDescriptor=NULL;
    HANDLE ReadPipeHandle;
    HANDLE WritePipeHandle;       // not used here

    if(!CreatePipe(&ReadPipeHandle, &WritePipeHandle, &sa, 0))
        return false;

    STARTUPINFOA si;
    ZeroMemory(&si,sizeof(STARTUPINFO));
    si.cb=sizeof(STARTUPINFO);
    si.dwFlags=STARTF_USESHOWWINDOW|STARTF_USESTDHANDLES;
    si.wShowWindow=SW_HIDE;
    si.hStdOutput=WritePipeHandle;
    si.hStdError=WritePipeHandle;

    PROCESS_INFORMATION pi;
    ZeroMemory(&pi,sizeof(PROCESS_INFORMATION));
    text cmd;
    cmd.print("/c %s", command);
    char pathbuf[MAX_PATH];
    _searchenv("CMD.EXE", "PATH", pathbuf);
    if(!CreateProcessA(pathbuf, cmd.t_str(), NULL, NULL, true, 0, NULL, NULL, &si, &pi))
        return false;
    char Data[1024];
    for (;;)
    {
        DWORD BytesRead;
        DWORD TotalBytes;
        DWORD BytesLeft;

        if(!PeekNamedPipe(ReadPipeHandle,Data,sizeof(Data),&BytesRead, &TotalBytes,&BytesLeft)) return false;
        if(BytesRead)
        {
            if(!ReadFile(ReadPipeHandle,Data,sizeof(Data)-1,&BytesRead,NULL))
                return false;
            Data[BytesRead]='\0';
            output += Data;
        }
        else
        {
            if(WaitForSingleObject(pi.hProcess,0)==WAIT_OBJECT_0)
                break;
        }
    }
    CloseHandle(pi.hThread);
    CloseHandle(pi.hProcess);
    CloseHandle(ReadPipeHandle);
    CloseHandle(WritePipeHandle);
    return true;
} 
```

例如： execDosCommand("dir C:\", output);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:13:28.077

正如 roymustang 提到的，您可以使用系统命令从系统执行另一个命令。例如，这可以是一个批处理脚本，它将命令的输出通过管道传输到一个文本文件中。然后，您可以阅读文本文件以实际获取信息。“返回”命令输出的问题是，命令输出看起来如何？你会将它存储在什么数据结构中？大多数情况下，您会得到一堆未格式化的文本，这些文本无法轻松解析，因此没有真正通用的方法可以将应用程序或脚本的输出返回到 C++ 数据结构中。

您不妨看看这里： [http ://docwiki.embarcadero.com/RADStudio/en/System,_wsystem](http://docwiki.embarcadero.com/RADStudio/en/System,_wsystem)

如上所述，我不相信有一种方法可以将应用程序调用的输出返回到您的程序，至少我从未听说过。

问候，

弗洛里安

# xml - RTF 中的页眉

> ID：11433988
> 
> 赞同：0
> 
> 时间：2012-07-11T13:42:28.313
> 
> 标签：xml, rtf, xsl-fo, apache-fop

我有一些需要转换为 RTF 的 XML 文件。我还需要在第一页的页眉中插入一些文本。

```
 <?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:exslt="http://exslt.org/common" xmlns:str="http://exslt.org/strings" xmlns:fo="http://www.w3.org/1999/XSL/Format" version="1.0">
    <xsl:template match="/">
            <xsl:call-template name="document" />
    </xsl:template>
    <xsl:template name="document">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
            <fo:layout-master-set>
                    <fo:simple-page-master margin-right="10mm" margin-left="20mm"
                    margin-bottom="5mm" margin-top="10mm" page-width="210mm"
                    page-height="297mm" master-name="first">
                            <fo:region-body margin-right="0mm" margin-left="0mm"
                            margin-bottom="10mm" margin-top="30mm" region-name="body" />
                            <fo:region-before extent="10mm" region-name="fheader" />
                            <fo:region-after extent="10mm"/>
                    </fo:simple-page-master>
                    <fo:simple-page-master margin-right="25mm" margin-left="10mm"
                    margin-bottom="5mm" margin-top="10mm" page-width="210mm"
                    page-height="297mm" master-name="rest">
                            <fo:region-body margin-right="0mm" margin-left="0mm"
                            margin-bottom="10mm" margin-top="10mm" region-name="body" />
                            <fo:region-before extent="10mm"/>
                            <fo:region-after extent="10mm"/>
                    </fo:simple-page-master>
                    <fo:page-sequence-master master-name="sequence">
                            <fo:repeatable-page-master-alternatives>
                                    <fo:conditional-page-master-reference master-reference="first" page-position="first"/>
                                    <fo:conditional-page-master-reference master-reference="rest" />
                            </fo:repeatable-page-master-alternatives>
                    </fo:page-sequence-master>
            </fo:layout-master-set>
            <fo:page-sequence master-reference="sequence">
                    <fo:static-content flow-name="fheader" >
                            <fo:block text-align="center" font-size="14pt"
                            font-family="Times New Roman">
                                    <fo:inline>
                                    <xsl:value-of select="/obj-xml/object/attribute[name='BUYER_NAME']/value"/>
                            </fo:inline>
                            </fo:block>
                    </fo:static-content>
                    <fo:flow flow-name="body">
                            <xsl:call-template name="report"/>
                    </fo:flow>
            </fo:page-sequence>
</fo:root>
</xsl:template>
                        <xsl:template name="report">
                               <!-- some code here -->
</xsl:template>
</xsl:stylesheet> 
```

当我尝试使用 XSL 和 FOP inot PDF 转换我的 XML 文件时，它看起来没问题，但是当我尝试转换为 RTF 时，没有任何标题。我不知道为什么。

# javascript - 如何获得不包括浏览器细节的计算 CSS？

> ID：11433993
> 
> 赞同：1
> 
> 时间：2012-07-11T13:42:33.437
> 
> 标签：javascript, jquery, css

我正在尝试通过 javascript/jQuery 获取所有计算的 css 属性，而无需浏览器细节。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T13:48:39.317

是的，这是一个跨浏览器的示例：

*   [http://www.quirksmode.org/dom/getstyles.html](http://www.quirksmode.org/dom/getstyles.html)

这个例子很老了。您可能希望将其反转以`getComputedStyle`优先使用`currentStyle`.

# objective-c - 快速枚举比嵌套枚举中的for循环慢（带有测试结果）？

> ID：11433994
> 
> 赞同：4
> 
> 时间：2012-07-11T13:42:38.837
> 
> 标签：objective-c, arrays, performance, for-loop, fast-enumeration

我知道有相当多的主题似乎是关于完全相同的事情，但我没有找到一个真正关于我想要的东西。

所以我很好奇，想将 Fast Enumeration 的性能与 NSEnumerator 和 for 循环进行比较。（这是经常被问到的部分）

首先我比较了快速枚举：

```
for(NSNumber *number in testArray)
{
    assert(number);
} 
```

NSE 分子：

```
NSEnumerator *enumerator = [testArray objectEnumerator];
NSNumber *number;
while (number = [enumerator nextObject]) 
{
    assert(number);
} 
```

循环：

```
for(NSUInteger i = 0; i < [testArray count]; i++)
{
    NSNumber *number = [testArray objectAtIndex:i];
    assert(number);
} 
```

我`testArray`是一个由 0 到 1,000,000 的 NSNumber 组成的数组，我一个接一个地运行了 100 次测试，并计算了每个测试的平均运行时间。

我也在我的 iPad 2 上运行它们

结果：（所有 100 次运行的平均时间）

*   **0.042687s**快速枚举
*   **0.582072s** NSEnumerator
*   **0.627318s** for 循环

正如预期的那样，Fast Enumeration 是迄今为止最快的，并且 NSEnumerator 仍然比 for 循环快一点，但这是用于枚举退出大型数组

所以这是一个不太常见的问题：

**其实我对别的东西很感兴趣：在数组中枚举以比较数组中的每个对象**

第一次尝试使用嵌套的 for 循环：

```
for(int i = 0; i < [testArray count]-1; i++)
{
    NSNumber *number = [testArray objectAtIndex:i];
    for(int j = i+1; j < [testArray count]; j++)
    {
        NSNumber *innerLoopNumber = [testArray objectAtIndex:j];
        assert(innerLoopNumber);
        assert(number);
    }
} 
```

对于这些测试，我必须减小数组的大小和运行次数才能在合理的时间内完成它们，因为迭代次数当然会随着 O(n^2) 的增加而增加。所以我用一个包含 5.000 个 NSNumber 的数组运行它们，并重复测试 5 次。

结果：1 次运行**7.360645 秒**

所以我想，当然，快速枚举应该更快。但是为了实现三角形模式以避免对每对元素进行两次比较，我不得不将外循环中的 Fast Enumeration 与内循环中的 NSEnumerator 混合

```
for(NSNumber *number in testArray)
{
    NSEnumerator *reverseEnumterator = [testArray reverseObjectEnumerator];
    NSNumber *innerLoopNumber = reverseEnumterator.nextObject;
    while(innerLoopNumber && ![innerLoopNumber isEqualToNumber:number])
    {
        innerLoopNumber = reverseEnumterator.nextObject;
        assert(innerLoopNumber);
        assert(number);
    }
} 
```

令我惊讶的是，这要慢得多：**18.086980s** for 1 run

然后我也尝试了一个混合版本，对外部循环使用快速枚举，对内部循环使用 for 循环：

```
int counter = 0;
for(NSNumber *number in testArray)
{
    for(int j = counter +1; j < [testArray count]; j++)
    {
        NSNumber *innerLoopNumber = [testArray objectAtIndex:j];
        assert(innerLoopNumber);
        assert(number);
    }
    counter++;
} 
```

结果：1 次运行**7.079600 秒**

只比普通的 for 循环快一点。

一个地方的数字：

*   **07.360645s for-**循环
*   **07.079600s**混合动力
*   **18.086980s**快速枚举

所以我想知道，这是为什么呢？快速枚举是否仅在“未中断”时才能正常工作，使用 NSEnumerator 是否会干扰快速枚举？还是我只是遗漏了一些东西而我的方法是错误的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:48:39.693

您正在快速枚举循环中调用其他方法。Objective-c 具有重要的方法调用开销，因此您的问题在于嵌套循环的设置。正如您所看到的，快速枚举 + for 循环比 for 循环 + for 循环更快，并且在这里您避免了额外的方法调用。

# sql-server - 将biztalk连接到虚拟PC上的sql server

> ID：11433995
> 
> 赞同：1
> 
> 时间：2012-07-11T13:42:39.243
> 
> 标签：sql-server, biztalk, virtual-machine

我的主机（物理机）上安装了 biztalk 服务器，我需要在我的虚拟 pc 2007 机器上连接或使用 sql 服务器。我一直在环回适配器网络模式下运行虚拟 pc，但是当我尝试在 biztalk 上配置主机它无法连接到虚拟 PC 上的 sql 服务器。它说无法访问您指定的数据库服务器。任何建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:54:27.560

您可能需要更改虚拟机上的网络模式。在 VirtualBox 中，您可以为此配置端口转发。Virtual PC 中可能有类似的东西。

# c# - 实体框架代码优先：如何为这种关系创建一对多？

> ID：11433996
> 
> 赞同：0
> 
> 时间：2012-07-11T13:42:39.563
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first

所以我是代码新手，我有一个已经完成并且无法更改的数据库，当我在控制器中调用客户端时出现此错误，因为它会查找不存在的 Empresa_id，所以我可以告诉如何查找正确的字段？

```
return View(clientes.ToPagedList(pageNumber, pageSize));

it return this select 
SELECT 
[Extent1].[id] AS [id], 
[Extent1].[name] AS [name], 
[Extent1].[empresa] AS [empresa],  
[Extent1].[Empresa_id] AS [Empresa_id]
FROM [dbo].[cliente] AS [Extent1]
ORDER BY [Extent1].[name] ASC}

public class cliente
    {
        [Key]
        public int id { get; set; }
        public string name { get; set; }
        public int empresa { get; set; } // foreing key

        public virtual empresa Empresa { get; set; }
   }

    public class empresa
    {
        [Key]
        public int id { get; set; }

        public string descripcion { get; set; }

        public virtual ICollection<cliente> Clientes { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:45:43.407

您必须告诉 EF 这`empresa`是导航属性的外键`Empresa`，否则它将采用默认外键名称，即 "NavigationPropertyName+UnderScore+KeyNameInTargetClass" = `Empresa_id`。`[ForeignKey]`您可以通过应用属性覆盖此默认值：

```
public class cliente
{
    [Key]
    public int id { get; set; }
    public string name { get; set; }

    [ForeignKey("Empresa")]
    public int empresa { get; set; }

    public virtual empresa Empresa { get; set; }
} 
```

# matlab - 如何在主图形窗口中停靠多个绘图/图像？

> ID：11433997
> 
> 赞同：0
> 
> 时间：2012-07-11T13:42:39.303
> 
> 标签：matlab, user-interface, dock

我有一个 GUI，它包含一个生成绘图作为输出的程序。
每次用户按下“确定”时，都会制作一个新图，并出现在一个新窗口中。我想要的是以下内容：

1.  用户启动 GUI，输入所需的输入参数并按下“确定”。
2.  将打开一个“主”图形窗口，并在主窗口中显示一个停靠图形。
3.  用户更改设置并点击“OK”确认。
4.  另一个显示新绘图的停靠图被添加到主窗口。
5.  *等等*

对我来说，不清楚如何：

*   定义将保存生成的子图图形的主/父图形窗口。
*   将这些绘图图形添加到主图形窗口。

如果我开始：

```
set(0,'DefaultFigureWindowStyle','docked') 
```

那么是否可以进一步自定义主窗口的某些属性？
我想到标题，位置，没有菜单栏，......

谁能帮我一些提示？
谢谢！

* * *

*笔记：*

*   似乎无法将图形停靠在预定义的图形窗口中；您只能停靠到桌面。这是我从网上搜索到现在所理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T13:16:09.970

是的，Matlab 不允许将图形停靠在几个不同的窗口中，但是 Matlab 文件交换上有一个工具可以提供该功能：

[http://www.mathworks.com/matlabcentral/fileexchange/16650](http://www.mathworks.com/matlabcentral/fileexchange/16650)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:15:54.993

是的，您当然可以自定义图形窗口。

您可以通过以下方式使用“名称”属性设置图形窗口的标题：

设置（gcf，'名称'，'标题'）；

同样，您可以使用'Menubar' 属性和'Toolbar' 属性来控制工具栏的显示。

此外，您可以使用“位置”属性设置位置。

有关您可以设置的所有图形属性，请参阅以下链接：

[http://www.mathworks.com/help/techdoc/ref/figure_props.html](http://www.mathworks.com/help/techdoc/ref/figure_props.html)

希望它有所帮助......一切顺利！

# jena - Apache Jena 可以支持软删除吗？

> ID：11433998
> 
> 赞同：1
> 
> 时间：2012-07-11T13:42:39.570
> 
> 标签：jena

Apache Jena 可以支持软删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:49:19.033

假设*软删除*的意思是三元组保留在模型中，但 API 调用或 SPARQL 查询不返回，那么，不，Jena 不支持。在这种情况下，我要做的是为要存储的“已删除”三元组保留一个单独的模型，以便您可以在“取消删除”操作期间将它们添加回来。在这种情况下，唯一需要注意的是 b 节点。*另外，请注意，您可以*从 Jena 模型中删除的唯一内容是三元组：如果您考虑模型中的资源，要删除它们，您需要删除所有提及该模型的三元组。

如果这不是您所说的软删除，那么您需要说更多。