# StackOverflow 问答 11196000-11196999

# ruby - 如何在 Ruby 中将变量附加到另一个变量？

> ID：11196002
> 
> 赞同：0
> 
> 时间：2012-06-25T19:26:38.767
> 
> 标签：ruby

我无法使用谷歌找到答案。

作品！

```
i = 15
appended = "Dark " << "Silk"
appended = appended 
```

不工作。:(

```
i = 15
appended = "Dark " << i
appended = appended 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T19:28:59.040

试试这个：

```
i = 15
appended = "Dark " + "Silk" 
```

或对于非`String`对象：

```
appended = "Dark " + i.to_s 
```

您还可以使用字符串插值（更惯用）：

```
appended = "Dark #{i}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:28:57.690

做

```
"Dark" << i.to_s 
```

做你想做的事？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T19:39:49.147

`"Silk"`是一个字符串并且`15`是一个整数。您只能将字符串连接到另一个字符串。这就是为什么`"Dark" << "Silk"`有效。如果您首先使用 转换`15`为字符串`15.to_s`，则可以将其连接起来。

我建议您阅读[Ruby 的文档](http://ruby-doc.org/core-1.9.3/)以了解有关内置类和方法的更多信息。

# image - 从经典 ASP 中生成 JPG 图像 我有一个带有表格的 ASP 经典页面。是否可以允许用户单击按钮将该表导出为 JPG 文件？

> ID：11196003
> 
> 赞同：0
> 
> 时间：2012-06-25T19:26:40.310
> 
> 标签：image, asp-classic, export, jpeg

我有一个带有表格的 ASP 经典页面。是否可以允许用户单击按钮将该表导出为 JPG 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:17:45.057

在客户端并不容易，当然也不够可靠，以至于您可以在任何浏览器中执行此操作。但是请查看以下内容以获取一些想法！

*   [将 DOM 内容绘制到画布](http://robert.ocallahan.org/2011/11/drawing-dom-content-to-canvas.html)- 博客文章概述了如何使用 SVG 在 HTML5 画布元素中呈现 HTML。
*   [将 HTML Canvas 捕获为 gif/jpg/png/pdf？](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)- StackOverflow 关于从画布获取图像的帖子

您可能需要做的是在服务器端将 HTML 渲染成图像。有关想法，请参见以下内容

*   [将 html 渲染为 png（服务器端）](https://stackoverflow.com/questions/2651173/rendering-html-to-png-server-side)

# ruby-on-rails - pik、ruby 库和 git bash 的正确路径

> ID：11196004
> 
> 赞同：0
> 
> 时间：2012-06-25T19:26:44.430
> 
> 标签：ruby-on-rails, git-bash, pik

为了将我的本地 SQLite3 数据库推送到 Heroku，我安装了 pik 以便我可以使用 ruby​​ -v 192。（我遇到了时区错误，其他帖子表明这可能是由于使用了 ruby​​ 版本 193）。

我按照 github 上的说明进行操作： [http ://rubyonwindowsguides.github.com/book/ch02-03.html](http://rubyonwindowsguides.github.com/book/ch02-03.html)

我现在可以在 v 193 和 v192 之间切换，并且捆绑安装了我知道的必要 gem，包括 pg (0.12.2 x86-mingw32) 和 taps (0.3.24)。

当我在 v193 时，一切都很好。

但是，在 v192 中，当我尝试运行时：

```
Heroku run rake db:migrate 
```

或者

```
Heroku db:push 
```

...我收到一个错误页面，内容如下：

```
Running 'rake db:migrate' attached to terminal... up, run.1
bash: bin/bundle: c:/Users/umezo/.pik/rubies/Ruby-192-p290/bin/ruby.exe: bad interpreter: No such file or directory 
```

这似乎是一个路径问题，因为我的 Ruby 库位于 c:/ 中，而不是 c:/Users/Umezo/.pik。我想我可能已经在 .pik 文件夹中而不是在 c:/ 中安装了 v192 的初始路径。我能做些什么来解决这个问题？

我的相关文件按照 github 说明中的建议保存：

```
c:/Ruby192
c:/Ruby193
c:/tools/pik.bat
c:/tools/pik.ps1
c:/tools/pik_runner.exe
c:/Users/umezo/.bashrc
c:/Users/umezo/.pik/.pikrc
c:/Users/umezo/.pik/config.yml 
```

分别，文件内容为：

.pikrc

```
#!/bin/sh
pik_path=/c/tools
function pik  {
  $pik_path/pik_runner.exe pik.sh $@
  [[ -s $USERPROFILE/.pik/pik.sh ]] && source $USERPROFILE/.pik/pik.sh
  unset GEM_HOME
  unset GEM_PATH
} 
```

配置.yml

```
--- 
"192: ruby 1.9.2p290 (2011-07-09) [i386-mingw32]": 
  :path: !ruby/object:Pathname 
    path: C:/Ruby192/bin

"193: ruby 1.9.3p0 (2011-10-30) [i386-mingw32]": 
  :path: !ruby/object:Pathname 
    path: C:/Ruby193/bin
--- {} 
```

.bashrc

```
[[ -s $USERPROFILE/.pik/.pikrc ]] && source $USERPROFILE/.pik/.pikrc
unset GEM_HOME
unset GEM_PATH 
```

我仍然不确定所有这些文件是如何相互连接的，或者它们中的每一个究竟是做什么的，所以不确定要更改或移动哪些文件。

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:36:53.737

我从来没有弄清楚这个问题的根本原因，所以最终重新安装了我的 ruby​​ 安装。现在它工作正常！

# javascript - 谷歌地图 - 改变瓷砖覆盖的窗格顺序？

> ID：11196005
> 
> 赞同：1
> 
> 时间：2012-06-25T19:26:46.853
> 
> 标签：javascript, google-maps, google-maps-api-3, overlay, pane

我之前的问题的延续：[如何在 Google 地图中更改 KML 和 Tile Overlays 的分层？](https://stackoverflow.com/questions/10638510/)

我目前正在重写一些关于使用数组启用和禁用平铺覆盖的按钮的代码。在这样做时，我试图将按钮的所有单独功能组合成一个功能，但由于我有两种渲染叠加层的方法，我希望尝试只关注一种方法。第一个使用“ [overlayMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes#OverlayMapTypes) ”：

```
map.overlayMapTypes.insertAt(0, beloitMapType); 
```

第二，使用我上一个问题中提供的脚本：

```
this.getPanes().overlayShadow.appendChild(this.settings.div_); 
```

前一种方法是我原来的方法；然而，由于我在卫星视图上使用多边形，我需要一种将图标/名称覆盖层放置在彩色多边形上方的方法。为了实现这一点，我寻求类似于后一种方法的方法，其中某些叠加层可以放置在[比多边形更高的窗格](https://developers.google.com/maps/documentation/javascript/reference#MapPanes)上，从而出现在它们上方。

然而，在我之前的问题和现在之间的时间里，以及通过我自己的一些研究，我已经意识到后一种方法，而不是把瓷砖放在他们的位置，估计瓷砖的位置和地点它作为[图像叠加](https://developers.google.com/maps/documentation/javascript/overlays#Initializing)。结果，无法访问路径中颜色的可访问性图层的一部分错位了一个或两个像素，或者我的建筑物名称叠加层当前在两个图块的边界上有名称，当这两个图块重叠时，它们之间有[一条锐线](http://www.beloit.edu/maps2/?pres)穿过它们轻微地。此外，每次加载地图时，这两个问题都会来来去去，每个瓦片放置在地图上，在任何方向上都有 1-2 像素的差异。

因此，我非常喜欢在所有叠加层上使用前一种方法和overlayMapTypes，这种方法更可靠和准确，但我还需要一种方法使其中一些叠加层高于“overlayLayer”窗格并高于多边形。这可能吗？如果可以，怎么做？

* * *

**另外：**我还需要尝试找到一种方法来使用 overlayMapType 方法实现窗格的重新分配：我用来实现此目的的脚本在 IE7/8 中似乎不起作用。我将自己研究这个角度，但如果可能的话，我仍然希望完全放弃脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:48:15.583

好吧，我已经找到了一个可能的解决方案，为了分享它，请允许我解释一下：

*   多边形不一定需要可见才能仍然具有单击和悬停事件。

*   由于多边形用于在卫星视图中为建筑物和 poi 着色，因此可以通过叠加轻松地完成这样的视觉组件。

因此，一种可能的解决方案是让所有多边形不可见，并简单地将它们用于单击和悬停事件。同样，第二个叠加层或对现有叠加层的修改将替换多边形的原始视觉组件。由于这个视觉组件现在像其他所有东西一样是一个叠加层，因此可以使用“MapType”方法轻松地将它与任何其他叠加层分层。

*（但这并不能回答问题；也就是说，是否只能使用 MapType 方法对平铺叠加层和多边形进行分层？我仍然想知道这一点，但如果没有答案，希望这是一个可能的替代方案。 )*

# c++ - QThread 将数据传入和传出

> ID：11196006
> 
> 赞同：0
> 
> 时间：2012-06-25T19:26:47.067
> 
> 标签：c++, multithreading, qt

我将尝试解释我的程序曾经做什么以及我想要改变什么：

我有这个函数，它在 MainWindow 类的主线程中单击按钮运行： public QMainWindow ：

该函数如下所示，并在另一个文件中指定：

```
void MakeMeshStructure(MeshStructureLayers layers,
                      Handle_AIS_InteractiveContext theContext,
                      Handle_TDocStd_Document aDoc,
                      MyMesh &mesh,
                      int detail_vertex,
                      double insulation_thickness,
                      OpenMesh::VPropHandleT<MyMesh::Scalar> _max_beam_offset);
} 
```

它的作用是：它适用于网格并为网格的每个顶点、面和边缘创建几何图形。此几何图形与上下文一起显示。这个过程需要很长时间（30 分钟）并且会阻塞 gui。

我想做的是拥有与 QThread::idealThreadCount() 一样多的线程，并在计算时释放 gui 并使其更快。（这是正确的想法吗？）

我想将我的网格分成相等的部分，并将这个顶点范围传递给我的函数（上图），以便仅使用一个顶点范围来实现单独的胎面。

我很难弄清楚如何传递这些数据并使其成为线程安全的。我知道它有很多代码，但这是我解决它的尝试：

[http://pastebin.com/u/mzagar](http://pastebin.com/u/mzagar)

问题是以正确的方式获取所有数据并让线程工作。我必须在哪里使用互斥锁。在主线程工作时可以写入的每个数据上？很困惑。泰

编辑：

我编辑了我的代码：[http](http://pastebin.com/u/mzagar) : //pastebin.com/u/mzagar 我制作了一个 struct cadData 来传递数据。这就是我启动线程的方式：

```
connect(this, SIGNAL(startMake1(cadData)), cThreads.at(0), SLOT(MakeMesh(cadData)));
//...
cThreads.at(0)->moveToThread(threads.at(0));
//...
threads.at(0)->start();
 //...
emit startMake1(aCadDatas.at(0));
 //... 
```

问题是线程似乎不能同时工作，而且 gui 也冻结了。流程如下：

*   GUI 冻结
*   线程 1 中的事情完成
*   线程 1 中的事情再次完成
*   线程 2 中的事情完成
*   线程 2 中的事情再次完成
*   ...
*   GUI 解冻

任何想法为什么？

编辑2：

我通过将其移至类构造函数来删除同一线程的多次运行：

```
connect(this, SIGNAL(startMake1(cadData)), cThreads.at(0), SLOT(MakeMesh(cadData)));
//...
cThreads.at(0)->moveToThread(threads.at(0));
//...
threads.at(0)->start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:54:31.787

由于您使用的是 QThread，因此您可以通过使用 Qt 的线程安全槽和信号机制为您完成工作，从而避免显式使用互斥锁等。您基本上会将需要发送到线程的数据打包到一个对象中，然后发出一个以该对象作为参数的信号。线程将在插槽中接收该对象的副本（您之前已连接到您的信号），然后开始使用数据。要将数据从工作线程取回主线程，您需要反过来做同样的事情。 [这](https://web.archive.org/web/20111102145108/http://cdumez.blogspot.com/2011/03/worker-thread-in-qt-using-signals-slots.html)是一篇带有一些示例代码的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-10T20:56:57.497

添加到杰里米的答案：您可以通过在 QObjects 之间发送事件而不是使用信号槽机制来做同样的事情。使用对您最方便的。

关键是利用 Qt 的内置事件循环互斥锁。当您向与发送者不同的线程中的对象发送信号时，信号将转换为 QMetaCallEvent 并发布到接收 QObject 的事件队列中。当然，这是以线程安全的方式完成的，所要做的就是利用它。发送显式事件的工作方式相同。在接收者所在的线程中旋转的事件循环只是获取 QMetaCallEvents 并相应地执行插槽调用，或者将您的事件分派给您的`customEvent()`方法实现。

当您启动 raw`QThread`时，该`run()`方法的默认实现会启动一个事件循环。您会注意到这样的线程实际上是空闲的并且不消耗任何 CPU 资源：事件队列是空的，并且事件循环被阻塞，等待有人将事件发布到它的队列中。一旦将一些 QObject 移动到这样的线程，排队的信号槽传递将通过该线程的事件循环完成。无论是 GUI 线程还是任何其他线程，它的工作原理都是一样的。在接收事件或排队信号时，GUI 线程在任何方面都没有什么特别之处。

# silverlight - 在 Silverlight 应用程序中使用 ssrs 导航返回按钮

> ID：11196008
> 
> 赞同：0
> 
> 时间：2012-06-25T19:26:57.537
> 
> 标签：silverlight, reporting-services, ssrs-2008, reportviewer

我有一个 Silverlight 应用程序，它有一个 RadHtmlPlaceholder 指向 ssrs 以显示如下报告：

```
<telerik:RadHtmlPlaceholder SourceUrl="http://serverName/ReportServer/Pages/ReportViewer.aspx?/Northwind/Employees&amp;rs:Command=render" /> 
```

这工作得很好，但是当我有一个允许您向下钻取以显示子报表的报表时，没有办法返回父报表而不必再次加载整个批次。似乎没有打开导航返回按钮工具栏选项的选项，而且我已经看到了通过使用 javascript 将窗口位置设置回历史记录中的一个来实现返回按钮的其他方法，但显然这不会在 Silverlight 应用程序中工作。反正有实现导航返回按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:48:18.270

在 Telerik 论坛中查看此主题：[http ://www.telerik.com/community/forums/silverlight/htmlplaceholder/html-place-holder-back-forward-refresh.aspx](http://www.telerik.com/community/forums/silverlight/htmlplaceholder/html-place-holder-back-forward-refresh.aspx)

基本上，您需要从演示者那里获得 IFrame 的句柄并注入一些 JavaScript。历史对象还有一个长度属性，你可以使用它来评估你的按钮是否应该被启用。

```
public MainPage()
        {
            InitializeComponent();

            // Get the IFrame from the HtmlPresenter 
            HtmlElement iframe = (HtmlElement)htmlPlaceholder.HtmlPresenter.Children[0];
            // Set an ID to the IFrame so that can be used later when calling the javascript 
            iframe.SetAttribute("id", "myIFrame");
        }

        private void Refresh_Click(object sender, RoutedEventArgs e)
        {
            // Code to be executed 
            string code = "document.getElementById('myIFrame').contentWindow.location.reload(true);";
            HtmlPage.Window.Eval(code); 
        }

        private void Back_Click(object sender, RoutedEventArgs e)
        {
            // Code to be executed 
            string code = "document.getElementById('myIFrame').contentWindow.history.back();";
            HtmlPage.Window.Eval(code); 
        }

        private void Forward_Click(object sender, RoutedEventArgs e)
        {
            // Code to be executed 
            string code = "document.getElementById('myIFrame').contentWindow.history.forward();";
            HtmlPage.Window.Eval(code); 
        }
} 
```

# iphone - 拖动完成时如何确定 UIScrollView 的目标内容偏移量？

> ID：11196013
> 
> 赞同：1
> 
> 时间：2012-06-25T19:27:37.697
> 
> 标签：iphone, ios, uitableview, uiscrollview

我有一个 UITableView，我想确定当视图停止移动时哪些单元格可见，以便我可以提前开始加载缩略图。

我找到了 UIScrollViewDelegate 函数`scrollViewDidEndDragging:willDecelerate`，但我仍然需要一种方法来确定 UIScrollView 的去向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:43:06.053

scrollViewWillEndDragging:withVelocity:targetContentOffset: 怎么样，因为它为您提供了滚动停止位置的估计内容偏移量。

乔纳森

# objective-c - iOS 应用程序是否有任何更新框架？

> ID：11196015
> 
> 赞同：-2
> 
> 时间：2012-06-25T19:27:44.523
> 
> 标签：objective-c, ios

我需要能够从应用程序本身更新我的应用程序。我知道 Sparkle 适用于 Mac 应用程序，但我似乎找不到适用于 iOS 的任何应用程序。

**编辑：** 我不是在问如何绕过审查过程。我在想可能有类似于 Clutch.io 的框架允许从应用程序内更新图像/文档/等。或者像 UrbanAirship 这样的管理应用程序购买数据的东西，允许从应用程序本身扩展应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:48:36.657

您不能用更新的应用替换您的应用（通过 App Store 除外），也不能用更新的部分替换应用的某些部分（这会使应用的代码签名无效）；您只能更新应用程序包之外的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:52:11.773

您不能自己更新应用程序二进制文件，系统负责更新所有应用程序。不过，如果您只是想更新应用程序中的一些数据，您肯定可以这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:33:25.153

取决于你的需要。如果您不想看到该应用程序，您也可以进行企业部署。

公司用于向其客户或员工分发应用程序。

需要一个单独的 Apple 帐户，费用更高。

使用与部署到应用商店相同的过程

存档 > 分发 > 创建 ipa/plist > 将这些复制到带有 html 页面的网络服务器，其中包含指向 plist 的链接，并且用户在 iOS 设备上单击来自 Safari 的链接并安装它。

在那之后回到 CArpp Store 审查过程是痛苦的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-05T16:59:37.103

这是我一直在寻找的：

[http://code.google.com/p/cooliris-toolkit/](http://code.google.com/p/cooliris-toolkit/)

它有一个名为 RemoteUpdater 的类，它允许我下载图像/数据的 zip 文件或任何我喜欢扩展我的内容的文件。

# vb.net - 如何通过用鼠标单击并按住对象来移动元素？

> ID：11196016
> 
> 赞同：4
> 
> 时间：2012-06-25T19:27:44.730
> 
> 标签：vb.net, mousemove

我正在开发一个简单的程序，该程序要求我能够选择一个图片框并通过用鼠标拖动它来将其移动到新位置。这是我目前提出的所有相关代码。但是，当我运行程序时，它会尝试移动到我希望它去的地方，然后它似乎又回到了以前的位置。

编辑：它在一个容器中。如果这有任何相关性。

**变量**

```
Dim startx As Integer
Dim starty As Integer
Dim endy As Integer
Dim endx As Integer
Dim finalx As Integer
Dim finaly As Integer
Dim mdown As Boolean
Dim valx As Boolean
Dim valy As Boolean 
```

**使图像移动的代码**

```
    Private Sub picbox_MouseDown(sender As Object, e As System.Windows.Forms.MouseEventArgs) 处理 picbox.MouseDown
        startx = MousePosition.X
        starty = MousePosition.Y
        mdown = 真
        valx = 假
        值 = 假
    结束子

`Private Sub Main_MouseMove(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseMove

End Sub

Private Sub picbox_MouseMove(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles picbox.MouseMove
    'Check if mouse=down
    If mdown = True Then
        endx = (MousePosition.X - Me.Left)
        endy = (MousePosition.Y - Me.Top)

        If valy = False Then
            starty = endy - sender.top
            valy = True
        End If
        If valx = False Then
            startx = endx - sender.left
            valx = True
        End If
        sender.left = endx - startx
        sender.top = endy - starty

    End If
End Sub

Private Sub picbox_MouseUp(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles picbox.MouseUp
    mdown = False
    valx = False
    valy = False

End Sub` 

            回答 #1

赞同：2

时间：2012-06-25T20:28:06.673

将其从容器中取出。这可能就是给您带来问题的原因，因为您的代码对我来说非常完美。

            回答 #2

赞同：2

时间：2012-06-25T19:48:09.517

关闭`Autosize`属性。

            回答 #3

赞同：2

时间：2017-02-18T15:35:02.073

这对我有用：

```
Private _isMoved As Boolean 
Private _x As Integer
Private _y As Integer

Private Sub Control_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Control.MouseDown
        _isMoved = True
        _x = e.Location.X
        _y = e.Location.Y
    End Sub

Private Sub Control_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Control.MouseMove
    If _isMoved Then
        Control.Location = New Point(Control.Location.X + (e.Location.X - _x), Control.Location.Y + (e.Location.Y - _y))
    End If
End Sub

Private Sub Control_MouseUp(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Control.MouseUp
   _isMoved = False
End Sub 
```

            回答 #4

赞同：1

时间：2012-06-25T19:59:27.003

开启 AutoSize，确保图片框的停靠关闭，并确保 Anchor 位于左上角

```

# php - 限制非管理员用户的页面（PHP 和 MySQL

> ID：11196017
> 
> 赞同：1
> 
> 时间：2012-06-25T19:27:47.163
> 
> 标签：php, mysql, database

我正在开发一个需要多种用户类型的网站。我已经能够在用户登录后根据用户滚动/类型将用户类型重定向到不同的敬意。但是，我需要将站点的管理员部分限制为仅管理员角色类型。我根据用户类型/角色将“1”或“2”存储到数据库中。我正在使用“session_start”和“session_is_registered”来检查用户信息。我需要在此代码中添加什么来限制角色类型为“1”的用户查看页面。

```
session_start();
if(!session_is_registered(username)){
header('Location: ../admin/index.php');
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:34:44.253

将用户角色存储在会话变量中

```
$_SESSION["role"]=1; 
```

或者

```
$_SESSION["role"]=2; 
```

取决于存储的用户信息。

然后，当您检查权限时，您只需检查此变量：

```
if($_SESSION["role"]==2){
  header('Location: ../admin/index.php');
} else {
  echo "you need the admin role to view this page!";
} 
```

**另一个建议：** 如果用户没有管理员角色，最好检查 ../admin/index.php 中的权限并重定向回默认页面。否则，如果用户知道 URL，他们可能能够直接浏览到 ../admin/index.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:33:16.960

只需嵌套您的 if 语句。如果他们是管理员，请将他们引导到管理页面，否则将他们发送到其他地方。

# svg - foreignObject 元素内的奇怪溢出

> ID：11196018
> 
> 赞同：0
> 
> 时间：2012-06-25T19:27:48.947
> 
> 标签：svg

每当我想在`foreignObject`标签内放置一个对象时，我都会得到一些奇怪的溢出。拿下面的代码。盒子没有扩展到 100x100，而是扩展到 120 像素，这是边框宽度的两倍。我已经尝试了几乎所有的想法来抵消这种影响，但似乎没有任何东西可以解决这个问题。

```
<svg width="4in" height="3in" version="1.1"
 xmlns = 'http://www.w3.org/2000/svg'>
    <foreignObject width="100" height="100">
        <div style="width:100%;height:100%;background-color: #fcefa1;border:10px solid     #ff0000;"></div>
    </foreignObject>
</svg> 
```

![溢出问题](../Images/5362aeaa4f710f5a0d5e16c3ddebcba8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:59:46.780

它是边框宽度的两倍，因为两边都有边框，十加十等于二十。 [试试这个](http://jsfiddle.net/robertc/xvYYk/)：

```
<svg width="4in" height="3in" version="1.1"
 xmlns = 'http://www.w3.org/2000/svg'>
    <foreignObject width="100" height="100">
        <div style="width:100%;height:100%;background-color: #fcefa1;border:10px solid #ff0000; -moz-box-sizing: border-box; box-sizing: border-box;"></div>
    </foreignObject>
</svg> 
```

[`box-sizing`CSS 属性](http://css-tricks.com/box-sizing/)允许您控制宽度适用于什么。

# jquery - jQuery：在第 n 个元素之后添加元素

> ID：11196022
> 
> 赞同：6
> 
> 时间：2012-06-25T19:28:04.323
> 
> 标签：jquery

在页面正文的特定位置添加元素时，我需要帮助。

这是我的页面代码。

```
<div id="div1>
  <label id="label1"></label>
  <input type="text1"></input>
  <!-- Insert button here -->
  <span id="span1"></span>
</div> 
```

我想在上面使用 jQuery 发表评论的位置添加一个按钮。如果页面语法是固定的，有没有办法可以将元素添加为父 div 的第三个子元素？我不想放置占位符并进行字符串替换。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T19:32:05.690

```
$('#div1').children(':eq(1)').after('<button/>');​​​​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/hdWTc/1)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:30:50.750

```
button.insertAfter($('#div1').children().eq(1)); 
```

这将在`button`#div1 的第二个孩子之后插入

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:31:18.847

```
function insertAfterNthChild($parent, index, content){
    $(content).insertAfter($parent.children().eq(index));
}

// Usage:
insertAfterNthChild($('#div1'), 1, '<button>Click me!</button'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:33:45.133

使用：[http ://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

```
 $("input:nth-child(1)").after('<input type="button" value="button"/>'); 
```

在这里演示：http: [//jsfiddle.net/epinapala/JB4fr/1/](http://jsfiddle.net/epinapala/JB4fr/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T19:32:35.273

jQuery 已经`nth-child()`为此目的制作了一个选择器。

```
$("input:nth-child(1)").after( "<your html here>" ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T19:32:58.677

您可以通过多种方式实现这一目标。以下是其中之一，

```
//                  v--- Change n to insert at different position
$('#div1 :nth-child(2)').after('<button>Test</button>'); 
```

**演示：http:** [//jsfiddle.net/m5Gyz/](http://jsfiddle.net/m5Gyz/)

# google-website-optimizer - 使用服务器端代码进行 Google 网站优化器 A/B 测试

> ID：11196025
> 
> 赞同：0
> 
> 时间：2012-06-25T19:28:26.243
> 
> 标签：google-website-optimizer, ab-testing

基本上，我们想要 A/B 测试 2 个不同的页面布局标题。存在一些结构差异（不仅仅是切换 CSS）。

我已经能够得到这么多的工作：我们的 Zend 框架（服务器端 PHP）查找某个布尔变量来决定使用哪个 HTML 文件作为布局（原始文件或变体）。这个二进制开关工作得很好。每个不同的布局都能够很好地加载。

我只是无法从您的 GWO utmx("combination") 函数中获取 0 或 1。

在页面加载期间，该功能的结果何时可用？对我来说，无论我何时调用它，它似乎总是返回 0。或者，何时设置 __utmx cookie？设置后我可以简单地刷新页面。utmx() 函数有回调吗？

我尝试了多种策略，但我最近的计划是这样的：

在 PHP 代码中，检查 __utmx cookie 以获取分配的变体编号。将其保存到自定义 cookie。根据该数字决定要渲染的布局。然后，在 javascript 中，页面加载后，它只是检查自定义 cookie 是否存在，如果不存在，它会立即刷新页面（提示服务器端代码查看 __utmx cookie，如上所述）。这样，在用户第二次访问时，我的自定义 cookie 已经存在（包含变体的值），并且可以告诉服务器端代码使用哪种布局。在用户第一次访问时，在 GWO 为变体分配 0 或 1 之后，我会使用 javascript 刷新页面，以便我的服务器端代码可以读取 __utmx cookie。

我还没有弄清楚 __utmx cookie 何时/如何设置（或 utmx("combination") 何时起作用）。

[使用 Google Web 优化器进行 A/B 测试；什么 cookie 告诉我访问者得到了 A 或 B](https://stackoverflow.com/questions/3623447/a-b-test-with-google-web-optimizer-what-cookie-tells-me-visitor-got-a-or-b)并没有帮助。

服务器端代码：

```
 $cookieNameForThisExperiment = 'gwo_variation_header-and-navbar'; //This is for Google Website Optimizer split testing of the header-and-navbar 
    $variation1 = 'variation1';
    if (!isset($_COOKIE[$cookieNameForThisExperiment]) && isset($_COOKIE["__utmx"])) {
        $utmx = explode(':', $_COOKIE["__utmx"]);

        $variation = $utmx[2]; //Careful: this will not work if there are multiple Google experiments running simultaneously and might not even work for testing more than "original" vs 1 "variation".  http://productforums.google.com/forum/#!category-topic/websiteoptimizer/technical-questions/kilJ7lJU2NY
        $variationName = 'original';
        if ($variation == 1) {
            $variationName = $variation1;
        }
        Extrabux_Cookie::setCookie($cookieNameForThisExperiment, $variationName, time() + (60 * 60 * 24 * 30));
    }

    if (isset($_COOKIE[$cookieNameForThisExperiment]) && $_COOKIE[$cookieNameForThisExperiment] == $variation1) {
        $this->_helper->layout()->setLayout('main_new'); //Use new layout only in this variation.
    } //Otherwise, continue using the original layout. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:33:04.583

以下是 utmx cookie 的设置方式。首先，您的页面是从服务器加载的。您的页面包含控制脚本。控制脚本同步执行，并且 document.writes 对 google 托管的 siteopt.js 资源的引用。当 siteopt.js 被加载、解析和执行时，utmx cookie 被设置。因此，控制脚本之后的页面中的任何代码都会看到 utmx cookie。但是，对于 a/b 样式的测试，有一个附加脚本紧跟在标准控制脚本之后，该脚本调用 utmx 函数，这可能会导致重定向发生。这意味着当为该访问者选择备用页面时，原始页面上任何用于询问 utmx cookie 并设置您自己的 cookie 的代码都不会执行。

如果我了解您要正确执行的操作，那么这就是您需要做的。在服务器上，您需要检查您的 cookie（当然在您的域中）是否存在及其价值。0 或 1，指示要提供的页面版本。如果设置了 cookie，则提供适当的页面，但不提供控制脚本。如果您的 cookie 未设置，则仅提供控制脚本。因此，当访问者第一次看到您的页面时，他们将获得带有控制脚本的原始页面。现在，您必须确保控制脚本的最后一部分不是该控制脚本的一部分。它看起来像 utmx("URL", ...。您需要确保它不存在于您的控制脚本中，否则页面会在您不想要它时重定向。

因此，在访问者第一次出现并且您提供修改后的控制脚本的情况下。在控制脚本之后，您有一个用于设置自定义 cookie 的内联脚本。请注意，您实际上不需要设置自己的 cookie，因为您的服务器无论如何都应该获取 utmx cookie，只要它设置在正确的域和路径中。您可以查询 0/1 的 utmx cookie 的值。无论如何，在您使用 utmx("combination") 查询为该访问者选择的页面并设置 cookie 后，您需要重定向回您的服务器。请注意，utmx 函数作为 siteopt.js 文件的一部分提供，并且仅在控制脚本之后出现。

这种技术应该工作得很好。唯一的缺点是，对于选择查看原始页面的访问者，他们第一次会遇到重定向，而标准的 a/b 配置不需要这种重定向。然而，从另一个意义上说，这是一件好事，因为无论访问者使用哪个版本，他们都会体验到重定向。这消除了查看原件的用户的时间优势。这种技术的另一个优点是 a 和 b 页面的 URL 相同，并且后续页面加载没有重定向。

# android - Android 上的 Xml 随机错误

> ID：11196027
> 
> 赞同：-1
> 
> 时间：2012-06-25T19:28:31.327
> 
> 标签：android, xml

我是 xml 和 android 编程的新手。这是我的 xml 代码...我不明白为什么会出现随机错误...我尝试了很多东西（比如用正常的结束方式更改“/>”） . 我也尝试了一个在线 xml 检查器，但我得到了同样的错误，所以我希望你能帮助我。我得到了很多错误，我知道我应该告诉你哪些是错误的，但它们是如此随机。也许它是 Eclipse 的错误... Idk，感谢您阅读本文。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Your total is 0"
android:textSize="45dp"
android:layout_gravity="center"
android:gravity="center"
android:id="@id/tvDisplay"
/>

<Button
android:layout_width="250dp"
android:layout_height="wrap_content"
android:text="Add one"
android:layout_gravity="center"
android:textSize="20dp"
android:id="@id/bAdd"
/>

<Button 
android:layout_width="250dp"
android:layout_height="wrap_content"
android:text="Subtract one"
android:layout_gravity="center"
android:textSide="20dp"
android:id="@id/bSub"
/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:32:49.527

您的 id 声明不正确：`android:id="@id/bSub"`. 应该是这样的`android:id="@+id/bSub"`。注意“+”号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:35:02.693

`android:textSide="20dp"`也改变线`android:textSize="20dp"`

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="Your total is 0"
android:textSize="45dp"
android:layout_gravity="center"
android:gravity="center"
android:id="@+id/tvDisplay"
/>

<Button
android:layout_width="250dp"
android:layout_height="wrap_content"
android:text="Add one"
android:layout_gravity="center"
android:textSize="20dp"
android:id="@+id/bAdd"
/>

<Button
android:layout_width="250dp"
android:layout_height="wrap_content"
android:text="Subtract one"
android:layout_gravity="center"
android:textSize="20dp"
android:id="@+id/bSub"
/>
</LinearLayout> 
```

# javascript - spin.js 多对多关系？

> ID：11196028
> 
> 赞同：0
> 
> 时间：2012-06-25T19:28:32.123
> 
> 标签：javascript, many-to-many, spine.js

我试图弄清楚spine.js是否支持模型之间的多对多关系，或者我是否通过将相关模型ID存储在双方的数组中来更好地实现自己的东西。

文档中的示例显示了非常简单的示例，仅具有一对多的情况，即使在那里我也没有变得更聪明，对我来说，脊椎关系的实现看起来真的很有限。我仍然不明白如何将现有实例添加到关系而不是创建新实例。

我需要做的最简单的例子是带有标签的典型博客。每个帖子可以有很多标签，每个标签可以有很多相关的帖子。当我创建帖子时，我想向帖子添加新的和/或现有的标签。我需要能够获取与特定标签相关的所有帖子。

有没有人能把我带到正确的道路上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:51:31.317

恐怕我无法帮助您解决多对多关系，因为我目前正在尝试解决相同的问题，但就现有实例的一对多而言，您可以添加一个外键作为 hasMany、hasOne 和 belongsTo 函数中的可选参数（默认为 '{className}_id'）。这些示例有点误导，因为它们暗示您必须显式地将项目添加到集合中，但实际上，关系是由外键定义的

```
class Parent extends Spine.Model
  @configure 'Parent', 'id'
  @hasMany 'children', 'Child', 'parent_id'

class Child extends Spine.Model
  @configure 'Child', 'id', 'parent_id'
  @belongsTo 'parent', 'Parent', 'parent_id'

parent = new Parent 
child1 = new Child(parent_id: parent.id)
child2 = new Child(parent_id: parent.id)

@log parent.children().all() #[child1, child2]
@log child1.parent() is child2.parent() #true 
```

据我所见，`new Child(parent_id: parent.id)`并且`parent.children().create()`相当于同一件事，但我对 SpineJS 很陌生，所以我很容易出错......

我认为已经有一些关于多对多关系的拉取请求，但 Alex MacCaw 迄今为止拒绝了它们（我相信他一般不喜欢关系的概念，并且正在考虑将它们从脊椎中删除）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T06:50:16.313

将您的 xxx_yyy_ship 模型镜像到 Spine.Model

```
xxx.coffee include hasMany xxx_yyy_ship
yyy.coffee include hasMany xxx_yyy_ship

xxx::all_yyy -> ship.yyy for ship in @xxx_yyy_ship()
yyy::all_xxx -> ship.xxx for ship in @xxx_yyy_ship() 
```

使用 hasMany 和一个中间船模型来模拟多对多关系。

# google-analytics - Google Analytics API - 如何生成流量来源摘要？

> ID：11196029
> 
> 赞同：1
> 
> 时间：2012-06-25T19:28:33.640
> 
> 标签：google-analytics, google-analytics-api

在谷歌分析中，如果你去

```
Traffic Sources -> Overview 
```

有一个百分比流量来源细分的饼图​​。

我如何通过 API 获取这些信息？

指标/维度是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:43:06.930

看上去

```
ga:medium
ge:visits 
```

做的伎俩，

*   `(none)`是“直接流量
*   `organic`+`cpc`是搜索引擎
*   `referral`是非搜索引擎链接

那么，其他一切的总和就是“运动”

# sql - ASP.NET MVC - 复杂查询

> ID：11196040
> 
> 赞同：-5
> 
> 时间：2012-06-25T19:28:59.607
> 
> 标签：sql, asp.net-mvc, linq

我是 MVC 的新手，我正在尝试为我将要设计的复杂项目找到一个强大的架构。

来自 ASP 2.0 背景，其中数据层和业务逻辑是使用传统的三层架构构建的，我发现很难理解如何将我熟悉的三层系统映射到 ASP.NET/MVC 模型上。

我习惯于在数据层构建类并运行 SQL 存储过程——所以我想知道的是如何在 ASP.NET/MVC 模型中构建这些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:35:56.887

查找在 SQL Server 上创建 CLR 函数。您可以使用 SQL Server 可用于执行各种数据操作的辅助方法创建对象，然后在查询中使用结果。这是一个链接：http: [//msdn.microsoft.com/en-us/library/ms189876.aspx](http://msdn.microsoft.com/en-us/library/ms189876.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:39:53.743

除了像层这样的基本概念之外，忘记你在 ASP 和 VB 中学到的所有知识，并学习 MVC、MVVM 和 LINQ，可能还有后端的实体框架。

# html - 在 Safari 和 Firefox 中定位不同

> ID：11196046
> 
> 赞同：0
> 
> 时间：2012-06-25T19:29:24.527
> 
> 标签：html, css, firefox, safari, css-position

大家好，

我正在为客户制作一个网站，我收到了一个基本模板图像，没有 HTML，CSS :(。

我正在尝试使用自己的 HTML 和 CSS 重现模板，但遇到了问题。

我试图在图像中的文本“LOGIN”上绝对定位一个按钮。我已将不透明度设置为 0.4，以便您可以看到按钮（模糊矩形）和它试图覆盖的文本（登录 >）。

下面的第一张图片是 Safari 中的全部内容。

![苹果浏览器](../Images/78d62f8916a7066b3de5d80e1af6e76a.png)

然而，这张图片在 Firefox 中使用相同的 CSS 是一样的。注意按钮是如何在上面的，在第一种情况下它在下面。

![火狐](../Images/d63d1dc16ea2e61ced440774c028d11b.png)

我该如何解决？这是一个大问题，虽然我可以让它保持原样，但我真的很想解决它。

提前致谢！

****编辑****：

人们在要求代码，所以就在这里。**我在输入文本框方面遇到了同样的问题，所以我发布了代码。**

CSS优先：

```
input.fp-login-u {
    position: relative;
    top: 74px;
    left: 740px;
    width: 100px;
    padding: 3px;
    border-radius: 3px;
    outline: none;
    border: 1px solid #000000;
} 
```

然后是 HTML：

```
<input type="text" class="fp-login-u" /> 
```

一切都在`<header>`标签中，边距和填充是定义的，而不是问题（在那些元素上）。

****再次编辑****：

很抱歉不清楚。

白色文本“LOGIN”是包含所有这些内容的 div 的背景图像。一旦我将褪色的登录按钮正确放置在它上面，我就会将其移除。

正在移动的是新的褪色按钮，而不是白色文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:34:53.923

使用相对定位。这将使您的生活更加轻松，因为您可以将其相对于屏幕尺寸的顶部、左侧、右侧、底部进行定位。确保你在 IE 中检查它，因为它会被抛出一点点，但不幸的是你无法修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:36:55.390

如果您显示一些代码，我可以看看出了什么问题。否则我会说一种解决方法是使用相对定位并设置边距

```
#login {
    margin: 10px 30px 0px 30px;
} 
```

另一种选择是使用它自己的背景图像（您已经使用的相同图像），并且显然根据您的需要更改位置值。这不会花费额外的加载时间，因为他们已经加载了图像。

```
#login {
    margin: 10px 30px 0px 30px;
    background-image: url(images/top_banner.jpg);
    background-position: -30px -233px;
    background-repeat: no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:46:56.710

在不发布代码的情况下，我只能建议您确保您是：

1.  使用 CSS 重置
2.  “绝对位置”按钮的容器项设置为“位置：相对；”
3.  您的“绝对位置”按钮的容器项具有其填充和边距重置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T14:04:27.793

Firefox 对如何呈现按钮和输入有自己的想法。输入元素和 Gecko 引擎中的填充似乎存在问题。*有时*这个片段可以帮助我：

```
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; } 
```

我不能确定它是否会解决您的问题，但值得一试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-06T01:56:05.193

为输入设置样式，使登录按钮图像为背景图像，然后就您的文本而言，您可以执行 text-indent: -9999px;

# linux - 目标文件的 objdump 输出中的标志

> ID：11196048
> 
> 赞同：12
> 
> 时间：2012-06-25T19:29:27.020
> 
> 标签：linux, elf, objdump

在某个目标文件上有 objdump 的输出：

```
$ objdump -h main.o

main.o:     file format elf32-i386

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         0000000b  00000000  00000000  00000034  2**2
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  1 .data         00000000  00000000  00000000  00000040  2**2
                  CONTENTS, ALLOC, LOAD, DATA
  2 .bss          00000000  00000000  00000000  00000040  2**2
                  ALLOC
  3 .note.GNU-stack 00000000  00000000  00000000  00000040  2**0
                  CONTENTS, READONLY, CODE 
```

这些标志 CONTENTS、ALLOC、LOAD 等是什么意思？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-25T20:43:46.637

您看到的是对目标文件中每个部分的 ELF 段标志、段类型和段标志的组合的解释。

*   `LOAD`表示该部分位于可加载段中，即在创建进程时可以将其内容从文件读入内存

节标志在 System V 应用程序二进制接口的[第 4 章](http://www.sco.com/developers/gabi/latest/ch4.sheader.html)中有详细记录，尽管名称与`objdump`显示的名称略有不同。

*   `CODE`表示该部分包含可执行代码；它由`SHF_EXECINSTR`节标题中的标志指示
*   `DATA`表示该部分不可执行但可写，由`SHF_WRITE`标志的存在表示
*   `READONLY`表示该部分既不可执行也不可写，应放置在只读内存页中
*   `ALLOC`表示段占用内存，例如，在创建进程时，实际分配内存页来保存段内容，由`SHF_ALLOC`标志指示。某些部分，例如那些包含调试信息的部分，在正常程序执行期间不会被读入内存，并且没有标记为`ALLOC`节省内存。

类型部分`SHT_PROGBITS`在文件中有对应的内容，显示为`CONTENTS`. 某些部分在文件中没有对应的内容，例如`.bss`类型为 的部分`SHT_NOBITS`。

该`.text`部分包含程序可执行代码。它显示为，`CONTENTS`因为它是 type `SHT_PROGBITS`。应该为这个部分保留内存，因为它是`ALLOC`，并且它的内容应该从文件中加载，因为它被放置在一个`LOAD`-able 段中。程序代码通常是不可修改的，因此该部分被放置在只读存储器中。它包含要执行的指令和`CODE`标志。

*具有静态存储类的初始化*变量进入该`.data`部分。它们的初始值存储在文件中，并在创建过程时从那里读取。在 C/C++ 中，这些是适当初始化的全局变量、静态局部变量和 C++ 静态成员变量，例如`static int a = 10;`. Fortran 放置已初始化的`SAVE`-d 变量和`COMMON`块，这些变量和块在此处通过块`DATA`语句给出初始值。

`.bss`部分（历史名称，*Block Started by Symbol*的缩写）是最简单的部分。它保存具有静态存储类的*未初始化变量。*它是类型的一部分，`SHT_NOBITS`在文件中不占用空间。内存已被`ALLOC`占用，但没有从文件中读取任何内容来预填充内存 - 它只是保持内核内存分配器提供的全零。

常量通常进入该`.rodata`部分（在您的示例中不存在），该部分看起来像`.data`但未标记为可写，因此显示为`READONLY`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T20:32:01.113

找到了一些信息`Ubuntu elf man page`，这只是我的理解。
我认为它们是来自`program header`和的信息`section header`。

```
LOAD: may correspond to PT_LOAD in the Program header table. Brief description:
It specifies the type of that particular element in the program header table.
The array element specifies a loadable segment

ALLOC: may correspond to SHF_ALLOC in the section table. Brief description:
Its specifies the flag of that particular element in the section header.
This  section  occupies  memory during process execution.

CODE/ DATA: indicates the belonging segment

READONLY: specifies a read-only segment

CONTENTS: I didn't find anything to conclude. 
```

希望这可以帮助

# android - SpeechRecognizer 在第一个结果后没有听到

> ID：11196052
> 
> 赞同：3
> 
> 时间：2012-06-25T19:29:47.923
> 
> 标签：android, speech-recognition, voice-recognition, speech

我在 Android 中使用 SpeechRecognizer 和 RecognizerIntent 来实现语音识别。我的目标是在我的语音识别器在屏幕上显示结果后重新开始听语音。为此，我正在使用以下代码。

问题是，第一次运行良好并显示结果，但在第二次开始收听（从 onResults 方法调用）后，由于某种原因，它听不到正在说话的内容。然后它给出一个 ERROR_SPEECH_TIMEOUT 错误，这意味着没有语音输入。在 Logcat 上，我可以看到它进入 onReadyForSpeech() 但不知何故，它听不到我在说什么。

有谁知道为什么会发生这种情况？返回结果后是否继续收听？再次显式调用 startListening 是否正确？

```
public class VR extends Activity implements RecognitionListener {

    private static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;
    private TextView vrtext;
    private SpeechRecognizer speech = null;
    private Intent intent;
    private String TAG = "VR";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.vr);

        vrtext = (TextView) findViewById(R.id.vrtext);  

    }

    @Override
    public void onResume()
    {
        listen();
        super.onResume();
    }

    private void listen()
    {
        speech = SpeechRecognizer.createSpeechRecognizer(this);
        speech.setRecognitionListener(this);
        intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, "en");
        intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, this.getPackageName());
        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
        intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 3);

        speech.startListening(intent);
    }

    @Override
    protected void onPause() {
        super.onPause();
        // TODO Auto-generated method stub

        if(speech != null)
        {
            speech.destroy();
            Log.i(TAG,"destroy");
        }

    }

    public void onBeginningOfSpeech() {
        // TODO Auto-generated method stub
        Log.i(TAG, "onbeginningofspeech");
    }

    public void onBufferReceived(byte[] arg0) {
        // TODO Auto-generated method stub
        //Log.i(TAG, "onbufferreceived");
    }

    public void onEndOfSpeech() {
        // TODO Auto-generated method stub
        Log.i(TAG, "onendofspeech");
    }

    public void onError(int arg0) {
        // TODO Auto-generated method stub
        Log.i(TAG, "error code: " + arg0);
    }

    public void onEvent(int arg0, Bundle arg1) {
        // TODO Auto-generated method stub
        Log.i(TAG, "onevent");
    }

    public void onPartialResults(Bundle arg0) {
        // TODO Auto-generated method stub
        Log.i(TAG, "onpartialresults");
    }

    public void onReadyForSpeech(Bundle arg0) {
        // TODO Auto-generated method stub
        Log.i(TAG, "onreadyforspeech");
    }

    public void onResults(Bundle arg0) {
        // TODO Auto-generated method stub
        Log.i(TAG, "onresults");
        ArrayList<String> matches = arg0.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);
        String s = "";
        for (String result:matches)
            s += result + "\n";

        vrtext.setText(s);

        speech.startListening(intent);

    }

    public void onRmsChanged(float arg0) {
        // TODO Auto-generated method stub
        //Log.i(TAG, "onrmschanged");
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T09:55:26.877

“它返回结果后是否继续收听？” 不

“再次显式调用 startListening 是否正确？” 是的。

此外，如果您想保持识别持续进行，`startListening`如果出现如下错误，您应该再次调用：

```
@Override
public void onError(int errorCode)
{
    if ((errorCode == SpeechRecognizer.ERROR_NO_MATCH)
            || (errorCode == SpeechRecognizer.ERROR_SPEECH_TIMEOUT))
    {
        Log.d(TAG, "didn't recognize anything");
        // keep going
        recognizeSpeechDirectly();
    }
    else
    {
        Log.d(TAG,
                "FAILED "
                        + SpeechRecognitionUtil
                                .diagnoseErrorCode(errorCode));
    }
} 
```

[在此处](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/speech/activation/WordActivator.java)查看我用于`SpeechRecognizer`检测某个口语单词的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T10:31:23.820

确保在活动中使用单个`SpeechRecognizer`对象。快速而肮脏的方法是使其静态。

```
private static SpeechRecognizer speech = null; 
```

更改您的`listen()`方法以在语音对象上检查 null。

```
private void listen()
{
    if (speech == null) {
        speech = SpeechRecognizer.createSpeechRecognizer(this);
        speech.setRecognitionListener(this);
    }
    intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, "en");
    intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, this.getPackageName());
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
    intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 3);

    speech.startListening(intent);
} 
```

调用 in`onResults()`和 in 的监听方法`onError()`。

```
public void onResults(Bundle arg0) {
    // TODO Auto-generated method stub
    Log.i(TAG, "onresults");
    ArrayList<String> matches = arg0.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);
    String s = "";
    for (String result:matches)
        s += result + "\n";

    vrtext.setText(s);

    //speech.startListening(intent);
    listen();

}

public void onError(int arg0) {
    // TODO Auto-generated method stub
    Log.i(TAG, "error code: " + arg0);
    listen();
} 
```

最后不要忘记在`onDestroy()`.

```
@Override
public void onDestroy() {
    super.onDestroy();
    speech.destroy();
} 
```

# java - 将剩余距离推到碰撞平面？

> ID：11196061
> 
> 赞同：3
> 
> 时间：2012-06-25T19:30:34.260
> 
> 标签：java, math, collision-detection, trigonometry

好的，所以我有这个碰撞检测代码，我试图将剩余的距离（从 0 移动到 +5，墙在 +2，剩余 = +3）穿过墙的平面。像这样： ![在此处输入图像描述](../Images/b1381c6c1e90e1ba162ee9caee008b88.png)

现在我把大部分都记下来了，我知道我需要移动的剩余距离，以及墙的法线的叉积，但我需要一些帮助才能正确地解决这个问题。

我的问题是，沿墙平面移动剩余距离的正确公式是什么？

```
if(distRemaining.length() > 0){
            cProduct = cross(distRemaining, wallNormal);
            dest += new Vector3f(cProduct.x, 0, cProduct.z);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T22:58:33.563

调用你`A`的起点、冲击点和壁平面`B`的法线向量。`N`计算取 A 到 B ( `AB`) 的向量，并计算它与 之间的向量积`N`。称之为 X

```
 X = AB x N 
```

这是一个垂直于两者的向量`N`，`AB`也位于墙壁的平面内。取另一个向量 Y 作为 和 之间的向量`X`积`N`

```
 Y = X x N 
```

现在这是墙上的另一个向量，它指向碰撞后粒子沿墙的运动方向。您需要对该向量进行归一化`Y`（计算`Y / |Y|`）并将其乘以您想要沿墙移动的量，然后将其添加到您的碰撞点`B`。这个向量可能会指向相反的方向，但如果你小心使用向量积的顺序，你应该没问题。

这就是你如何在 3D 中做到这一点，我假设你想从你的问题中得到它。在 2D 中，它会简单得多。

# javascript - 如何使用 Google rangy 选择文本？

> ID：11196062
> 
> 赞同：0
> 
> 时间：2012-06-25T19:30:34.447
> 
> 标签：javascript, selection, rangy

如何选择文本并使用 获取所选文本`Rangy`？例如，如果我想构建一个类似于 Stack Overflow 上的文本编辑器，如果我选择一段文本并单击**B**按钮，则该文本将替换为文本前后的两个星号。

我知道底层 Javascript 必须捕获所选文本的偏移量，通过星号添加和附加该文本，并输出替换先前所选文本的新文本。我该如何做到这一点？原生 DOM 3`setSelection`方法提供了一些功能，但这些不是高度跨浏览器兼容的，而是`Rangy`跨浏览器。不幸的是，Rangy 的文档很差。

# objective-c - 如何在 iOS 中的 UIView/UIImageView 上设置像素和获取像素

> ID：11196064
> 
> 赞同：4
> 
> 时间：2012-06-25T19:30:44.323
> 
> 标签：objective-c, ios, uiimage, core-graphics

IOS中UIView/UIImageView上的SetPixel和GetPixel

```
SetPixel(point,color);

color GetPixel(point); 
```

基本上，我想从图片（UIImage）中删除所有蓝色像素并将它们变为红色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:49:38.170

如果您想要一个可绘制的画布（“SetPixel”），您应该忘记`UIImageView`并选择一个`UIView`子类，您可以在其中重载`drawRect:`方法并将像素绘制成任何颜色。

至于“GetPixel”，这里是一个完整的主题指南：[How to get the RGB values for a pixel on an image on the iphone](https://stackoverflow.com/questions/144250/how-to-get-the-rgb-values-for-a-pixel-on-an-image-on-the-iphone)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:11:52.717

要更改像素颜色，请参阅[本页](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-TPXREF101)上的“用颜色遮盖图像” 。

# javascript - 堆叠的 div 都使用 jquery .click 激活

> ID：11196068
> 
> 赞同：1
> 
> 时间：2012-06-25T19:31:14.760
> 
> 标签：javascript, jquery

我正在尝试将 AJAX 用于我正在制作的网络应用程序游戏。

简而言之，我有以下 HTML：

```
<li id='fight'><div id='change'></div></li> 
```

在下面的 JS 中，您会看到当用户单击“战斗”时，会运行一个脚本来替换 'main' 中的内容

我还希望用户能够选择单击应该在“战斗”内部的“更改”并让它也更改为主要内容。

当前，当用户单击“更改”时，它会运行脚本，更改主脚本，然后运行“战斗”并再次更改。

当用户点击它时，我只需要运行“更改”。

JS：

```
$("#fight").click(function() {
    var page = 'fight';
    getmain(page)
});

$("#change").click(function() {
    var page = 'change';
    getmain(page);
    evt.stopPropagation();
});

function getmain(page){
     $.ajax({
            type: "POST",
            async: false,
            url: 'welcome/loadmain',
            dataType: 'json', 
            data: { page: page },
            success: function(content){
                var html = '';
                html += content['content'];
                $('#main').html(html);
            }
        });    
}

$.ajax({
    type: "POST",
    async: false,
    url: 'welcome/loadmain',
    dataType: 'json', 
    data: { page: 'get_zone' },
    success: function(content){
        var html = '';
        html += content['content'];
        $('#fight').html(html);
    }
}); 
```

HTML

```
 public function get_zone()
    {
        $user_id = $this->tank_auth->get_user_id();
        $itemroll = $this->db->query("SELECT current_zone, z.name FROM user_load ul
                                    INNER JOIN zones z
                                    ON z.id = ul.current_zone
                                    WHERE ul.user_id = $user_id");
        $result = $itemroll->row_array();
        $zone['current_zone']= $result['current_zone'];
        $zone['name'] = $result['name'];
        //HTML Formatting
        $content = '';
        $content .= "<div id='zonename'>Zone = ". $zone['name']. "</div>";
        $content .= "<div id='change'>Change Zone</div>";
        return $content;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:34:22.823

改变

```
$("#fight").click(function() {
    var page = 'fight';
    getmain(page)
}); 
```

至

```
$("#fight").click(function(e) {
    if ($(this).is(e.target)) {
        var page = 'fight';
        getmain(page);
    }
}); 
```

这使得仅当事件目标是事件绑定到的元素时才处理事件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T19:35:40.140

您需要将事件传递给更改函数：

```
$("#change").click(function(evt) {
  evt.stopPropagation();
  var page = 'change';
  getmain(page);
}); 
```

# arm - 安装 pcl / 链接错误

> ID：11196070
> 
> 赞同：0
> 
> 时间：2012-06-25T19:31:20.510
> 
> 标签：arm, vtk, point-cloud-library

我正在尝试实现连接到 Pandaboard 的华硕 Xtion 传感器。我将 Ubuntu10.10 服务器与 ROS 一起使用。当我想编译 PCL 时，出现以下错误。与 libmysqlclient 和 libvtk 有些不匹配？我不知道从这里做什么，任何帮助表示赞赏。

```
[ rosmake ] rosdep check passed all system dependencies in packages
[rosmake-0] Starting >>> roslib [ make ]
[rosmake-0] Finished <<< roslib ROS_NOBUILD in package roslib
[rosmake-1] Starting >>> rosbuild [ make ]
[rosmake-0] Starting >>> std_msgs [ make ]
[rosmake-1] Finished <<< rosbuild ROS_NOBUILD in package rosbuild
 No Makefile in package rosbuild
[rosmake-1] Starting >>> roslang [ make ]
[rosmake-1] Finished <<< roslang ROS_NOBUILD in package roslang
 No Makefile in package roslang
[rosmake-1] Starting >>> cpp_common [ make ]
[rosmake-1] Finished <<< cpp_common [PASS] [ 4.86 seconds ]
[rosmake-1] Starting >>> roscpp_traits [ make ]
[rosmake-1] Finished <<< roscpp_traits [PASS] [ 5.73 seconds ]
[rosmake-1] Starting >>> rostime [ make ]
[rosmake-1] Finished <<< rostime [PASS] [ 5.87 seconds ]
[rosmake-1] Starting >>> roscpp_serialization [ make ]
[rosmake-1] Finished <<< roscpp_serialization [PASS] [ 5.32 seconds ]
[rosmake-1] Starting >>> xmlrpcpp [ make ]
[rosmake-0] Finished <<< std_msgs [PASS] [ 25.74 seconds ]
[rosmake-0] Starting >>> rosconsole [ make ]
[rosmake-1] Finished <<< xmlrpcpp [PASS] [ 5.99 seconds ]
[rosmake-1] Starting >>> rosgraph_msgs [ make ]
[rosmake-0] Finished <<< rosconsole [PASS] [ 6.01 seconds ]
[rosmake-0] Starting >>> rosclean [ make ]
[rosmake-0] Finished <<< rosclean ROS_NOBUILD in package rosclean
[rosmake-0] Starting >>> rosgraph [ make ]
[rosmake-1] Finished <<< rosgraph_msgs [PASS] [ 5.75 seconds ]
[rosmake-1] Starting >>> roscpp [ make ]
[rosmake-0] Finished <<< rosgraph [PASS] [ 3.92 seconds ]
[rosmake-0] Starting >>> rospy [ make ]
[rosmake-0] Finished <<< rospy [PASS] [ 3.82 seconds ]
[rosmake-0] Starting >>> rosparam [ make ]
[rosmake-0] Finished <<< rosparam [PASS] [ 6.85 seconds ]
[rosmake-0] Starting >>> rosmaster [ make ]
[rosmake-1] Finished <<< roscpp [PASS] [ 14.17 seconds ]
[rosmake-1] Starting >>> rosout [ make ]
[rosmake-0] Finished <<< rosmaster [PASS] [ 3.88 seconds ]
[rosmake-0] Starting >>> rosunit [ make ]
[rosmake-0] Finished <<< rosunit ROS_NOBUILD in package rosunit
[rosmake-0] Starting >>> eigen [ make ]
[rosmake-0] Finished <<< eigen [PASS] [ 0.05 seconds ]
[rosmake-0] Starting >>> cminpack [ make ]
[rosmake-0] Finished <<< cminpack [PASS] [ 0.08 seconds ]
[rosmake-0] Starting >>> flann [ make ]
[rosmake-0] Finished <<< flann [PASS] [ 0.07 seconds ]
[rosmake-1] Finished <<< rosout [PASS] [ 4.16 seconds ]
[rosmake-1] Starting >>> roslaunch [ make ]
[rosmake-1] Finished <<< roslaunch  No Makefile in package roslaunch
[rosmake-1] Starting >>> rostest [ make ]
[rosmake-1] Finished <<< rostest [PASS] [ 5.58 seconds ]
[rosmake-1] Starting >>> topic_tools [ make ]
[rosmake-1] Finished <<< topic_tools [PASS] [ 14.21 seconds ]
[rosmake-1] Starting >>> rosbag [ make ]
[rosmake-1] Finished <<< rosbag [PASS] [ 7.26 seconds ]
[rosmake-1] Starting >>> rosbagmigration [ make ]
[rosmake-1] Finished <<< rosbagmigration  No Makefile in package rosbagmigration
[rosmake-1] Starting >>> geometry_msgs [ make ]
[rosmake-1] Finished <<< geometry_msgs [PASS] [ 18.90 seconds ]
[rosmake-1] Starting >>> sensor_msgs [ make ]
[rosmake-1] Finished <<< sensor_msgs [PASS] [ 18.10 seconds ]
[rosmake-1] Starting >>> pcl [ make ]
[ rosmake ] Last 40 linesl: 37.8 sec ]               [ 1 Active 30/31 Complete ]
{-------------------------------------------------------------------------------
  make[3]: Entering directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  cd /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/panda/ros_workspace/perception_pcl/pcl/build/pcl /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/surface /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/surface /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/surface/CMakeFiles/pcl_surface.dir/DependInfo.cmake --color=
  make[3]: Leaving directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  make -f surface/CMakeFiles/pcl_surface.dir/build.make surface/CMakeFiles/pcl_surface.dir/build
  make[3]: Entering directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  make[3]: Nothing to be done for `surface/CMakeFiles/pcl_surface.dir/build'.
  make[3]: Leaving directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  /usr/bin/cmake -E cmake_progress_report /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/CMakeFiles  84 85 86 87 88 89 90 91
  [ 83%] Built target pcl_surface
  make -f visualization/CMakeFiles/pcl_visualization.dir/build.make visualization/CMakeFiles/pcl_visualization.dir/depend
  make[3]: Entering directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  cd /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/panda/ros_workspace/perception_pcl/pcl/build/pcl /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/visualization /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/visualization /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/visualization/CMakeFiles/pcl_visualization.dir/DependInfo.cmake --color=
  make[3]: Leaving directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  make -f visualization/CMakeFiles/pcl_visualization.dir/build.make visualization/CMakeFiles/pcl_visualization.dir/build
  make[3]: Entering directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  make[3]: Nothing to be done for `visualization/CMakeFiles/pcl_visualization.dir/build'.
  make[3]: Leaving directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  /usr/bin/cmake -E cmake_progress_report /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/CMakeFiles  92 93 94 95 96 97 98
  [ 90%] Built target pcl_visualization
  make -f visualization/test/CMakeFiles/demo_shapes.dir/build.make visualization/test/CMakeFiles/demo_shapes.dir/depend
  make[3]: Entering directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  cd /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build && /usr/bin/cmake -E cmake_depends "Unix Makefiles" /home/panda/ros_workspace/perception_pcl/pcl/build/pcl /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/visualization/test /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/visualization/test /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/visualization/test/CMakeFiles/demo_shapes.dir/DependInfo.cmake --color=
  make[3]: Leaving directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  make -f visualization/test/CMakeFiles/demo_shapes.dir/build.make visualization/test/CMakeFiles/demo_shapes.dir/build
  make[3]: Entering directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  Linking CXX executable demo_shapes
  cd /home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/visualization/test && /usr/bin/cmake -E cmake_link_script CMakeFiles/demo_shapes.dir/link.txt --verbose=1
  /usr/bin/c++     -Wno-deprecated -O3 -DNDEBUG     CMakeFiles/demo_shapes.dir/test_shapes.cpp.o  -o demo_shapes -rdynamic -L/home/panda/ros_workspace/ros_comm/messages/std_msgs/lib -L/home/panda/ros_workspace/common_msgs/sensor_msgs/lib -L/home/panda/ros_workspace/ros_comm/clients/cpp/roscpp_serialization/lib -L/home/panda/ros_workspace/ros_comm/utilities/cpp_common/lib -L/home/panda/ros_workspace/ros_comm/utilities/rostime/lib -L/home/panda/ros_workspace/ros_comm/clients/cpp/roscpp_traits/lib -L/home/panda/ros_workspace/ros_comm/clients/cpp/roscpp/lib -L/home/panda/ros_workspace/ros_comm/tools/rosconsole/lib -L/home/panda/ros_workspace/ros_comm/tools/rosbag/lib -L/home/panda/ros_workspace/ros_comm/tools/topic_tools/lib -L/home/panda/ros_workspace/perception_pcl/pcl/lib -L/usr/lib/vtk-5.6 ../../common/libpcl_common.so.1.1.1 ../../io/libpcl_io.so.1.1.1 ../../kdtree/libpcl_kdtree.so.1.1.1 ../../range_image/libpcl_range_image.so.1.1.1 ../libpcl_visualization.so.1.1.1 ../../io/libpcl_io.so.1.1.1 -lOpenNI ../../kdtree/libpcl_kdtree.so.1.1.1 /home/panda/ros_workspace/perception_pcl/flann/lib/libflann.so ../../range_image/libpcl_range_image.so.1.1.1 ../../common/libpcl_common.so.1.1.1 -lsensor_msgs -lroscpp_serialization -lrosconsole -lgomp -lboost_system-mt -lboost_filesystem-mt -lboost_thread-mt -lboost_date_time-mt -lvtkWidgets -lvtkHybrid -lvtkParallel -lvtkRendering -lvtkGraphics -lvtkverdict -lvtkImaging -lvtkftgl -lfreetype -lQtGui -lQtCore -lgl2ps -lXt -lX11 -lvtkIO -lpq -lmysqlclient -lvtkFiltering -lvtkDICOMParser -lnetcdf_c++ -lpng -lvtkmetaio -lz -lvtksqlite -ljpeg -ltiff -lexpat -lavformat -lavcodec -lavutil -lswscale -lVPIC -lCosmo -lvtkCommon -lm -lpthread -lvtksys -ldl /usr/lib/openmpi/lib/libmpi.so /usr/lib/openmpi/lib/libopen-rte.so /usr/lib/openmpi/lib/libopen-pal.so -ldl -lnsl -lutil -lm -ldl -lnsl -lutil -lm /usr/lib/openmpi/lib/libmpi_cxx.so -lvtkexoIIc -lnetcdf -lGL -Wl,-rpath,/home/panda/ros_workspace/ros_comm/messages/std_msgs/lib:/home/panda/ros_workspace/common_msgs/sensor_msgs/lib:/home/panda/ros_workspace/ros_comm/clients/cpp/roscpp_serialization/lib:/home/panda/ros_workspace/ros_comm/utilities/cpp_common/lib:/home/panda/ros_workspace/ros_comm/utilities/rostime/lib:/home/panda/ros_workspace/ros_comm/clients/cpp/roscpp_traits/lib:/home/panda/ros_workspace/ros_comm/clients/cpp/roscpp/lib:/home/panda/ros_workspace/ros_comm/tools/rosconsole/lib:/home/panda/ros_workspace/ros_comm/tools/rosbag/lib:/home/panda/ros_workspace/ros_comm/tools/topic_tools/lib:/home/panda/ros_workspace/perception_pcl/pcl/lib:/usr/lib/vtk-5.6:/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/common:/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/io:/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/kdtree:/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/range_image:/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build/visualization:/home/panda/ros_workspace/perception_pcl/flann/lib:/usr/lib/openmpi/lib
  /usr/lib/gcc/arm-linux-gnueabi/4.6.1/../../../../lib/libvtkIO.so: undefined reference to `__aeabi_d2lz@libmysqlclient_16'
  /usr/lib/gcc/arm-linux-gnueabi/4.6.1/../../../../lib/libvtkIO.so: undefined reference to `__aeabi_f2lz@libmysqlclient_16'
  /usr/lib/gcc/arm-linux-gnueabi/4.6.1/../../../../lib/libvtkIO.so: undefined reference to `__aeabi_f2ulz@libmysqlclient_16'
  /usr/lib/gcc/arm-linux-gnueabi/4.6.1/../../../../lib/libvtkIO.so: undefined reference to `__aeabi_d2ulz@libmysqlclient_16'
  collect2: ld returned 1 exit status
  make[3]: *** [visualization/test/demo_shapes] Error 1
  make[3]: Leaving directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  make[2]: *** [visualization/test/CMakeFiles/demo_shapes.dir/all] Error 2
  make[2]: Leaving directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
  make[1]: *** [all] Error 2
  make[1]: Leaving directory `/home/panda/ros_workspace/perception_pcl/pcl/build/pcl/build'
-------------------------------------------------------------------------------}
[ rosmake ] Output from build of package pcl written to: Active 30/31 Complete ]
[ rosmake ]    /home/panda/.ros/rosmake/rosmake_output-20120625-120146/pcl/build_output.log
[rosmake-1] Finished <<< pcl [FAIL] [ 37.88 seconds ]
[ rosmake ] Halting due to failure in package pcl.
[ rosmake ] Waiting for other threads to complete.
[ rosmake ] Results:
[ rosmake ] Built 31 packages with 1 failures.
[ rosmake ] Summary output to directory
[ rosmake ] /home/panda/.ros/rosmake/rosmake_output-20120625-120146 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:52:21.437

请检查您的显卡是否受支持。

然后，去官网下载软件，按照说明正确操作。 [PCL下载](http://pointclouds.org/downloads/) 看ROS官网 [PCL ROS](http://www.ros.org/wiki/pcl)

目前我正在使用 PCL 和 MS Kinect，在 Windows 中一切正常；）但之前我已经在 Linux 上安装了 PCL

我可以说我遇到了问题，但我下载了显卡的最新驱动程序并且工作正常。

快乐的代码！

# java - 轻量级可插拔 Java RIA 框架

> ID：11196072
> 
> 赞同：0
> 
> 时间：2012-06-25T19:31:33.350
> 
> 标签：java, frameworks

我正在寻找一个轻量级的，没有花里胡哨的框架，用 JAVA 为 web 构建，它允许我围绕它构建插件。

理想情况下，我希望包括以下功能： - LDAP 集成 - 用户级访问控制

有什么建议么？

非常感谢，弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:34:51.950

如果您在 Java EE 平台之上构建您的 Web 应用程序，那么您可以使用带有 LDAP 支持的 JAAS，AFAIK。

# c# - 使用实体框架通过 MSSQL 数据库进行级联删除

> ID：11196074
> 
> 赞同：0
> 
> 时间：2012-06-25T19:31:45.527
> 
> 标签：c#, asp.net, sql-server, database, entity-framework

我想从我的数据库中删除一个条目，但它说它不能，因为另一个表已经引用了它的 id。我要删除的表是：

```
Packages(packageID(PRIMARY), package_name, etc. . . .) 
```

我要级联删除的表是

```
PackageVariant(packageID(FOREIGN), variantID(FOREIGN)) //those foreign keys combine to make PRIMARY composite key 
```

从 PackageVariant 删除条目时，我想级联删除相关的变体：

```
Variant(variantID(PRIMARY), variant_name, etc . . .) 
```

这就是我想要的级联。

现在我有一个实体框架模型设置并正常工作，我有数据库设置并正常工作。那么我该如何去改变它们两者或其中之一，以便这个级联删除工作呢？

我还制作了一个 PackageVariantProduct 数据库图。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T08:15:17.827

级联删除是根据数据库中的引用约束处理的，因此您只需将`On Delete`规则设置为`Cascade`. 问题是级联只能从主体到从属实体发生。因此，如果您希望删除（甚至级联删除） from`PackageVariant`将删除`Packages`or `Variants`，它将不起作用。如果您真的需要它，您将不得不为此使用数据库触发器。

# c++ - 使用 cmake 和 Visual Studio 的一个解决方案中的多个项目

> ID：11196076
> 
> 赞同：10
> 
> 时间：2012-06-25T19:31:53.007
> 
> 标签：c++, visual-studio-2010, cmake

我有一个 Visual Studio 2010 解决方案，其中包含 5 个项目、两个库和三个应用程序（取决于库）。我现在想将构建系统迁移到 CMake（也能够在 Linux 下编译）。

我已经找到了如何为一个项目编写 CMakeLists.txt 并从中创建一个在 VS 中编译的 .sln 文件。但是，我找不到在 CMake 文件中指定每个单独项目的解决方案，然后自动让 CMake 创建一个包含这 5 个项目的 VS .sln。

我如何构建我的项目和 CMakelists 来完成这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T19:38:10.723

对于每个库，调用[`add_library`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_library)，对于每个应用程序调用[`add_executable`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_executable)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:38:51.780

每次 cmake 调用`add_library`或`add_executable`在您的解决方案中创建一个新项目。

# android - android-gridview (web.service)

> ID：11196083
> 
> 赞同：0
> 
> 时间：2012-06-25T19:32:10.580
> 
> 标签：android

我在 c#.net 中有一个 Web 服务，在我的 android 表单上，我需要从该服务中提取数据并在 android 表单上填充一个 gridview。我该怎么做？

谢谢你，阿丽娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:47:14.883

决定设备和服务器之间通信的标准方式。

然后，获取项目列表并根据其大小更新 gridview，用空数据填充所有需要的视图。对于每个视图，创建并运行一个异步任务，它将向服务器查询有关项目的更多数据（例如图像），对于[onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)和[onPreExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPreExecute%28%29)，检查项目是否与视图匹配，以便您更新正确的看法。

还可以考虑为收到的每个数据添加缓存机制，以提高响应速度和流畅度。

请观看**[此视频](http://www.google.com/events/io/2010/sessions/world-of-listview-android.html)**以获取更多信息。它是关于 listView 的，但是对于 gridView 和所有扩展 AdapterView 的类来说，同样的技巧也适用。

# mysql - PHP/Codeigniter - 全文搜索时的 MySQL 错误？

> ID：11196090
> 
> 赞同：0
> 
> 时间：2012-06-25T19:32:31.843
> 
> 标签：mysql, codeigniter, full-text-search, boolean

我正在尝试使用 Active Record 方法中内置的 codeigniters 执行全文搜索。在此之前我有一个“自定义”查询字符串，我几乎将其复制到了 codeigniter 代码中（可以这么说）。where 语句中的某处有错误，但我找不到。

```
$this->db->select('movies.*');
$this->db->from('movies');
$this->db->join('movies_genres', 'movies.id = movies_genres.movie_id', 'left');
$this->db->join('genres', 'movies_genres.genre_id = genres.id', 'left');
$this->db->where('MATCH (movies.movie_title) AGAINST (`'.$query.'`) IN BOOLEAN MODE', null, false);
//$this->db->group_by('movies.id');
//$this->db->limit($count, $page); 
```

默认情况下，codeigniter 通过在变量周围添加反引号来帮助它们，以使它们更安全。我也尝试通过将最后一个参数设置为 false 来关闭它，但仍然没有运气。通过注释掉最后两行，我仍然得到同样的错误，如果我注释掉 where 语句，错误就会消失（我得到结果）。

下面是 Codeigniter 生成的查询：

```
SELECT `movies`.* FROM (`movies`) LEFT JOIN `movies_genres` ON `movies`.`id` = `movies_genres`.`movie_id` LEFT JOIN `genres` ON `movies_genres`.`genre_id` = `genres`.`id` WHERE MATCH (movies.movie_title) AGAINST (`the`) IN BOOLEAN MODE 
```

这是错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'BOOLEAN MODE' at line 5 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:34:53.207

这

```
 AGAINST (`'.$query.'`) 
```

不应该用反引号，而应该用引号。尝试

```
AGAINST (\''.$query.'\') 
```

此外，语法似乎是

```
AGAINST ('+MySQL -YourSQL' IN BOOLEAN MODE); 
```

如果我正确阅读[http://dev.mysql.com/doc/refman//5.5/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman//5.5/en/fulltext-boolean.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:32:08.320

我不小心把最后一个括号放在了错误的地方。它应该在“布尔模式”之后，而不是在我放置它的搜索字符串之后。

$this->db->where("MATCH (movies.movi​​e_title) 反对 ('+".$query."' IN BOOLEAN MODE)", null, false);

# ios5 - 在横向模式下，工具栏大小不调整

> ID：11196094
> 
> 赞同：1
> 
> 时间：2012-06-25T19:32:48.077
> 
> 标签：ios5, xcode4.3, landscape-portrait

我在这个 ViewController 的底部有一个工具栏。由于某种原因，当视图旋转到横向位置时，工具栏不想调整。我见过一些底部带有工具栏的应用程序，当它旋转时，它会调整到与导航栏相同的大小！如果有人知道如何做到这一点，请帮助？我已经尝试过 Size Inspector 窗格，但它不起作用。

谢谢！

纵向视图：

![在此处输入图像描述](../Images/b313f91f9f43166470339b937307edd0.png)

景观视图：

![在此处输入图像描述](../Images/b84fedd2e08692897212a5bcc93f24a1.png)

# mongodb - mongodb 使用 AND 和 OR 查询

> ID：11196101
> 
> 赞同：58
> 
> 时间：2012-06-25T19:33:06.477
> 
> 标签：mongodb

我可以在 mongodb 查询中使用 OR 和 AND 的组合吗？

下面的代码不能按预期工作

```
db.things.find({
           $and:[
                {$or:[
                     {"first_name" : "john"}, 
                     {"last_name" : "john"}
                ]},
                {"phone": "12345678"}
            ]}); 
```

**数据库内容：**

```
> db.things.find();
{ "_id" : ObjectId("4fe8734ac27bc8be56947d60"), "first_name" : "john", "last_name" : "hersh", "phone" : "2222" }
{ "_id" : ObjectId("4fe8736dc27bc8be56947d61"), "first_name" : "john", "last_name" : "hersh", "phone" : "12345678" }
{ "_id" : ObjectId("4fe8737ec27bc8be56947d62"), "first_name" : "elton", "last_name" : "john", "phone" : "12345678" }
{ "_id" : ObjectId("4fe8738ac27bc8be56947d63"), "first_name" : "eltonush", "last_name" : "john", "phone" : "5555" } 
```

查询上述查询时 - 我什么也没得到！

```
> db.things.find({$and:[{$or:[{"first_name" : "john"}, {"last_name" : "john"}]},{"phone": "12345678"}]});
> 
```

我正在使用 mongo 1.8.3

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2017-12-28T02:43:56.060

```
 db.things.find( {
      $and : [
               { 
                 $or : [ 
                         {"first_name" : "john"},
                         {"last_name" : "john"}
                       ]
               },
               { 
                 "Phone":"12345678"
               }
             ]
    } ) 
```

**AND采用 2 个表达式****OR**，电话的数组。
**OR**采用 2 个表达式 first_name ， last_name 的数组。

**和**

*   **或者**

    *   名
    *   姓
*   电话号码。

注意：如果这不起作用，请升级到最新版本的 MongoDB。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2018-12-06T09:35:03.047

使用隐式 AND 操作更短：

```
db.things.find({
    $or : [ 
        {"first_name": "john"},
        {"last_name": "john"}
    ],
    "phone": "12345678"         
}) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-02-20T09:31:43.507

这可以通过以下方式实现（mongodb 3.4）

这是一个很好的例子

[https://docs.mongodb.com/manual/reference/operator/query/and/#and-queries-with-multiple-expressions-specifying-the-same-operator](https://docs.mongodb.com/manual/reference/operator/query/and/#and-queries-with-multiple-expressions-specifying-the-same-operator)

```
        db.getCollection('tbl_menu_items').find({
        $和：[
            { $or : [ { price : 0.99 }, { price : 1.99 } ] },
            { $or : [ { sale : true }, { 数量 : { $lt : 20 } } ] }
        ]
    })

```

此查询将选择所有文档，其中：

price 字段值等于 0.99 或 1.99，sale 字段值等于 true 或 qty 字段值小于 20。

这是带有 $or 查询的 $and 条件的示例，例如匹配任何条件

考虑以下查询...

```

        db.getCollection('tbl_menu_items').find(

        {'$或'：
           [ {'$和'：
                [{位置：{'$in'：[ObjectId（“588054c63879f2e767a1d553”）]}}，
                  { is_ryward: 1 },
                  { points_reqiured_to_redeem_reward: { '$lte': 500 } } ] },
             {'$和'：
                [{位置：{'$in'：[ObjectId（“588054c63879f2e767a1d553”）]}}，
                  { is_freebie: 1 } ] } ] }
        )

```

此查询将选择所有文档，其中：

位置数组在 588054c63879f2e767a1d553 和 is_ryward = 1 和 points_reqiured_to_redeem_reward < 500

或者

588054c63879f2e767a1d553 和 is_freebie 中的位置数组

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-25T19:48:27.233

我相信 $and 仅在 MongoDB v2.0+ 中受支持。我很惊讶控制台首先接受了这个表达式。我将尝试针对我拥有的 1.8 服务器重新创建。

另请查看[10Gen 的高级查询文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-$and)以获取`$and`.

*更新*

我将您的示例数据输入到 v1.8x 和 v2.0x MongoDB 服务器中。该查询在 v2.0x 上有效，在 v1.8x 上失败。这证实了我（和 Miikka）的怀疑，即问题出在`$and`您的服务器版本上。

我在[此处](http://christophermaier.name/blog/2010/12/21/mongodb-query-tricks)的 Web 上找到了一个（可以说）聪明的解决方法。我希望这有帮助。

-SethO

# silverlight - Silverlight Windows 的外观和感觉

> ID：11196102
> 
> 赞同：0
> 
> 时间：2012-06-25T19:33:14.357
> 
> 标签：silverlight, look-and-feel

我正在考虑使用 Silverlight 为我们正在开发的一个内部应用程序创建一个多文件上传器。我需要的唯一 Silverlight UI 是一个选择按钮，以便我可以启动 OpenFileDialog 实例。有没有办法让 Silverlight 中的按钮看起来像操作系统标准按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:32:50.310

您可以使用 Silverlight 工具包中的一些主题：[http ://silverlight.codeplex.com/wikipage?title=Silverlight%20Toolkit%20Overview%20Part%203&referringTitle=Home&ProjectName=silverlight](http://silverlight.codeplex.com/wikipage?title=Silverlight%20Toolkit%20Overview%20Part%203&referringTitle=Home&ProjectName=silverlight)

但是这些不会根据用户的操作系统而改变。例如，您将为您的应用程序设置 Vista 外观，但您的用户使用的是 Mac。

# ios - 如何在启动时展示ModalViewController？

> ID：11196104
> 
> 赞同：1
> 
> 时间：2012-06-25T19:33:22.827
> 
> 标签：ios

如果存在某些条件，我想在启动时*首先展示一个模态视图控制器。*我正在使用以下代码：

```
[self presentModalViewController:vc animated:NO]; 
```

**此代码从viewDidAppear**显示模态视图控制器，但是，它在**viewWillAppear**或**viewDidLoad**中不起作用。将代码放入**viewDidAppear**的问题在于它会在加载模式视图之前闪烁父视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:53:00.047

我建议您在应用程序启动后立即执行此操作，但前提是您只需要执行*一次*。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];  
    if (![defaults objectForKey:@"firstLaunch"]){
        [self performSelector:@selector(yourModalView) withObject:nil afterDelay:0.2];
        [defaults setObject:[NSDate date] forKey:@"firstLaunch"];

    }          

    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

如果您需要在某些条件下在每次开始时呈现该 viewController，请使用 bdev 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:50:20.903

我只会在您的 viewDidLoad 中造成一点延迟：

```
[self performSelector:@selector(presentVC) withObject:nil afterDelay:1.0]; 
```

在那种方法中

```
-(void) presentVC{
     [self presentModalViewController:vc animated:NO];
} 
```

# python - Python grep like if 语句

> ID：11196106
> 
> 赞同：0
> 
> 时间：2012-06-25T19:33:35.163
> 
> 标签：python, find, grep

我有以下 python 脚本，它接受一些输入并根据 sys.argv 将它们放入文件中。我想添加一些重复条目检查......就像一个值通过 sys.argv 传递到一个文件中但它已经存在什么都不做，否则将行打印到文件中。

我正在考虑使用 subprocess 执行此操作并使用系统 find/grep 命令（分别适用于 windows/linux），但是我无法让此测试正常工作。

欢迎任何想法/代码。

谢谢

```
# Import Modules for script
import os, sys, fileinput, platform, subprocess

# Global variables
hostsFile = "hosts.txt"
hostsLookFile = "hosts.csv"
hostsURLFileLoc = "urls.conf"

# Determine platform
plat = platform.system()

if plat == "Windows":

# Define Variables based on Windows and process
    #currentDir = os.getcwd()
    currentDir = "C:\\Program Files\\Splunk\\etc\\apps\\foo\\bin"
    hostsFileLoc = currentDir + "\\" + hostsFile
    hostsLookFileLoc = currentDir + "\\..\\lookups\\" + hostsLookFile
    hostsURLFileLoc = currentDir + "\\..\\default\\" + hostsURLFileLoc
    hostIP = sys.argv[1]
    hostName = sys.argv[2]
    hostURL = sys.argv[3]
    hostMan = sys.argv[4]
    hostModel = sys.argv[5]
        hostDC = sys.argv[6]

    # Add ipAddress to the hosts file for python to process 
    with open(hostsFileLoc,'a') as hostsFilePython:

#       print "Adding ipAddress: " + hostIP + " to file for ping testing"
#       print "Adding details: " + hostIP + "," + hostName + "," + hostURL + "," + hostMan + "," + hostModel + " to file"
        hostsFilePython.write(hostIP + "\n")

    # Add all details to the lookup file for displaying on-screen and added value
    with open(hostsLookFileLoc,'a') as hostsLookFileCSV:

        hostsLookFileCSV.write(hostIP + "," + hostName + "," + hostURL + "," + hostMan + "," + hostModel + "," + hostDC +"\n")

    if hostURL != "*":  

        with open(hostsURLFileLoc,'a+') as hostsURLPython:

            hostsURLPython.write("[" + hostName + "]\n" + "ping_url = " + hostURL + "\n") 
```

更新：我正在尝试基于 steveha 提供的调用的一小段，我遇到了 os.rename 部分的问题

```
>>> import os
>>> import sys
>>> in_file = "inFile.txt"
>>> out_file = "outFile.txt"
>>> dir = "C:\\Python27\\"
>>> found_in_file = False
>>> with open(in_file) as in_f, open(out_file,"w") as out_f:
...     for line in in_f:
...             if line.endswith("dax"):
...                     found_in_file = True
...     if not found_in_file:
...             out_f.write("192.168.0.199\tdax\n")
...     os.rename( os.path.join(dir, in_f), os.path.join(dir,out_f)) 
```

我得到以下错误。

```
Traceback (most recent call last):
  File "<stdin>", line 7, in <module>
  File "C:\Python27\lib\ntpath.py", line 73, in join
    elif isabs(b):
  File "C:\Python27\lib\ntpath.py", line 57, in isabs
    s = splitdrive(s)[1]
  File "C:\Python27\lib\ntpath.py", line 125, in splitdrive
    if p[1:2] == ':':
TypeError: 'file' object is not subscriptable 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:36:58.753

直接在 Python 中执行“grep”任务会更容易、更快：

```
with open("filename") as f:
    for line in f:
        if "foo" in line:
           ... # do something to handle the case of "foo" in line 
```

这是一个程序，它将添加一个名为“dax”的主机`/etc/hosts`：

```
import sys
_, in_fname, out_fname = sys.argv

found_in_file = False
with open(in_fname) as in_f, open(out_fname, "w") as out_f:
    for line in lst:
        if line.endswith("dax"):
            found_in_file = True
        out_f.write(line)
    if not found_in_file:
        out_f.write("192.168.0.199\tdax\n") 
```

您指定两个文件名，输出文件名将获得`/etc/hosts`. 如果系统名称“dax”已在 中找到`/etc/hosts`，则副本将是准确的；否则将附加一行。

您可以通过使用正则表达式来检测特定行来扩展此想法，并且可以通过编写不同的行而不是原始行来编辑行。

该程序使用正则表达式来查找`/etc/hosts`文件中从`192.168.0.10`到`192.168.0.59`包含范围内的所有条目。这些行被重写以将它们移动到`192.168.1.*`原始`*`地址不变的位置。

```
import re
import sys
_, in_fname, out_fname = sys.argv

pat = re.compile(r'^192.168.0.(\d+)\s+(\S+)')

with open(in_fname) as in_f, open(out_fname, "w") as out_f:
    for line in in_f:
        m = pat.search(line)
        if m:
            x = int(m.group(1))
            if 10 <= x < 60:
                line = "192.168.1." + str(x) + "\t" + m.group(2) + "\n"
        out_f.write(line) 
```

当您成功写入输出文件并且没有错误时，您可以使用`os.rename()`将新文件重命名为原始文件名，从而覆盖旧文件。如果您发现不需要更改旧文件中的任何行，则可以删除新文件而不是重命名它；如果您总是重命名，即使您实际上没有更改任何内容，您也会更新文件上的修改时间戳。

编辑：这是运行最后一个代码示例的示例。假设您将代码放入一个名为 的文件`move_subnet.py`中，然后在 Linux 或其他 *NIX 上您可以像这样运行它：

```
python move_subnet.py /etc/hosts ./hosts_copy.txt 
```

如果您使用的是 Windows，它将是这样的：

```
python move_subnet.py C:/Windows/system32/drivers/etc/hosts ./hosts_copy.txt 
```

请注意，Windows 可以在文件名中使用反斜杠或正斜杠。我在这个例子中使用了正斜杠。

您的输出文件将`hosts_copy.txt`位于当前目录中。

# mongodb - mongo-hadoop 流式 mapper.py 未找到

> ID：11196107
> 
> 赞同：0
> 
> 时间：2012-06-25T19:33:40.323
> 
> 标签：mongodb, hadoop-streaming

运行 mongo-hadoop 流时出现以下错误：

```
java.io.IOException: Cannot run program "mapper.py": error=2, No such file or directory
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
    at org.apache.hadoop.streaming.PipeMapRed.configure(PipeMapRed.java:214)
    at org.apache.hadoop.streaming.PipeMapper.configure(PipeMapper.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:34)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:88)
    at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:64)
    at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:117)
    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:387)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:325)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:270)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1157)
    at org.apache.hadoop.mapred.Child.main(Child.java:264)
Caused by: java.io.IOException: error=2, No such file or directory
    at java.lang.UNIXProcess.forkAndExec(Native Method)
    at java.lang.UNIXProcess.<init>(UNIXProcess.java:53)
    at java.lang.ProcessImpl.start(ProcessImpl.java:91)
    at java.lang.ProcessBuilder.start(ProcessBuilder.java:453)
    ... 24 more 
```

我通过 dumbo 或常规方式运行标准 Hadoop python 流没有问题。

[在另一篇文章](https://stackoverflow.com/questions/4339788/hadoop-streaming-unable-to-find-file-error)的 Hadoop python 流中提到了这个错误

我正在运行这样的工作：

```
hadoop jar /Volumes/Locodrive/hadoop/mongo-hadoop/streaming/target/mongo-hadoop-streaming-assembly-1.1.0-SNAPSHOT.jar -mapper mapper.py -file mapper.py -reducer reducer.py -file reducer.py -inputURI mongodb://localhost:27017/testdb.docs -outputURI mongodb://localhost:27017/testdb.testhadoop 
```

在 mapper.py/reducer.py 上使用路径/绝对路径，在 -file 参数中添加绝对路径没有帮助。标准 Hadoop 流式传输没有任何问题，所以我没有收到错误。

添加`mapper.py`和`reducer.py`到 hdfs 也没有帮助。

`mapper.py`并且`reducer.py`是可执行的并且在第一行确实有一个shebang：

映射器.py

```
#!/usr/bin/env python

import sys
sys.path.append(".")

from pymongo_hadoop import BSONMapper

def mapper(documents):

    i = 0
    for doc in documents:
        i += 1
        yield {"_id": "test", "count": 1}

BSONMapper(mapper)
print >> sys.stderr, "Done Mapping!!!" 
```

减速器.py

```
#!/usr/bin/env python
# encoding: utf-8

import sys
sys.path.append('.')

from pymongo_hadoop import BSONReducer

def reducer(key, values):
    print >> sys.stderr, "Processing key %s" % key
    _count = 0
    for v in values:
        _count += v["count"]

    return {"_id": key, "count": _count}

BSONReducer(reducer) 
```

我在 OSX 上运行 cloudera Hadoop CDH3u3。Java 示例可以正常工作

**更新**

我尝试了 0.23.1 并得到了同样的错误。

running -debug 不会删除 PackagedJobJar streamjob.jar

当我提取它`mapper.py`并`reducer.py`在那里时

这些文件在运行 std 流作业时也存在。mongo-haddoop-streaming 仍然会产生上述错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:16:01.913

k 让它工作它应该是 -files 而不是 -file

[http://hadoop.apache.org/common/docs/r0.20.0/api/org/apache/hadoop/util/GenericOptionsParser.html][1]

```
hadoop jar /Volumes/Locodrive/hadoop/mongo-hadoop/streaming/target/mongo-hadoop-streaming-assembly-1.1.0-SNAPSHOT.jar -files mapper.py,reducer.py -inputURI mongodb://127.0.0.1:27017/mongo_hadoop.yield_historical.in -outputURI mongodb://127.0.0.1:27017/mongo_hadoop.testhadoop -mapper mapper.py -reducer reducer.py -verbose -debug 
```

# ios - IOS5 UiWebview文字输入，关闭自动更正建议，无法输入文字

> ID：11196110
> 
> 赞同：0
> 
> 时间：2012-06-25T19:33:45.080
> 
> 标签：ios

我在 UIWebView 中有一个文本输入。如果自动更正建议更正，并且我拒绝该建议，则文本输入不再接受键盘输入。

如果我切换到不同的输入，然后返回，那么我可以再次输入文本。

键盘是否发送了某种可用于解决此问题的事件？为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:00:26.197

您无法处理 UIWebView 内的文本字段的键盘事件，但您可以禁用自动更正功能，如下所述：[禁用自动更正](https://stackoverflow.com/a/3428413/454165)

# parsing - 从字节串中读取 Word128

> ID：11196111
> 
> 赞同：0
> 
> 时间：2012-06-25T19:33:48.763
> 
> 标签：parsing, haskell, binary-data

作为一个haskell新手，我遇到了这个问题：我有一个字节串中的二进制数据，我想将它转换为Word128的列表（假设二进制数据是16字节对齐的）。实际上，我什至无法将 16 字节的字节串转换为 Word128。

有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:43:11.077

通常你会为你选择的二进制解析库编写一个实例。例如，对于[Data.Binary](http://hackage.haskell.org/packages/archive/binary/0.5.1.0/doc/html/src/Data-Binary-Get.html#getWord64be)，您可以编写如下内容：

```
-- | Read a Word64 in big endian format
getWord64be :: Get Word64
getWord64be = do
    s <- readN 8 id
    return $! (fromIntegral (s `B.index` 0) `shiftl_w64` 56) .|.
              (fromIntegral (s `B.index` 1) `shiftl_w64` 48) .|.
              (fromIntegral (s `B.index` 2) `shiftl_w64` 40) .|.
              (fromIntegral (s `B.index` 3) `shiftl_w64` 32) .|.
              (fromIntegral (s `B.index` 4) `shiftl_w64` 24) .|.
              (fromIntegral (s `B.index` 5) `shiftl_w64` 16) .|.
              (fromIntegral (s `B.index` 6) `shiftl_w64`  8) .|.
              (fromIntegral (s `B.index` 7) )
{- INLINE getWord64be -} 
```

然后将其粘合到实例二进制文件中。

因此，选择您的二进制解析库（二进制或谷物），并为您的类型编写一个实例。

# objective-c - 使用 Objective-C 的 iOS SDK 中的语音气泡

> ID：11196112
> 
> 赞同：7
> 
> 时间：2012-06-25T19:33:52.310
> 
> 标签：objective-c, ios

我正在开发一个儿童读物应用程序，并希望为角色对话动态填充气泡，如随附的屏幕截图所示。屏幕截图来自我猜是使用 Cocos2D（或 3D）开发的 Cinderella 应用程序。但是，我想使用objective-c 和iOS sdk 来实现这个功能。

一种方法是：

计算给定字体和大小的文本大小（使用 NSString 方法 sizeWithFont:constrainedToSize:），然后绘制一个圆角矩形（使用 CALayer）来包围该大小。

要绘制圆角矩形，请设置具有背景颜色、边框宽度和边框颜色以及颜色半径的 CALayer，并将其添加到 UIView 对象。这将很容易产生语音泡沫效应。

现在，我怎样才能得到一个指向角色嘴的角？我如何从角色的嘴里弹出和弹出 CALayer，我将如何实现这个动画？我的主要场景（插图）将是一个 UIImageview，这个对话弹出窗口应该以动画方式从角色的嘴里出现，几秒钟后它应该消失，就好像它回到角色的嘴里一样。您的建议将不胜感激。

如果您在某个地方知道一些示例代码/文章，请相应地路由我。

这是该应用程序的视频链接，显示了角色对话如何以语音气泡的形式弹出和弹出：[http ://www.youtube.com/watch?v=umfNJLyrrNg](http://www.youtube.com/watch?v=umfNJLyrrNg)

![在此处输入图像描述](../Images/1b5d2297ac97d2cfc01b83ad684b0a49.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-12T01:50:57.543

这是我通过修改这个苹果教程的实现：

[https://developer.apple.com/library/ios/samplecode/quartzdemo/Listings/QuartzDemo_QuartzCurves_m.html](https://developer.apple.com/library/ios/samplecode/quartzdemo/Listings/QuartzDemo_QuartzCurves_m.html)

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context=UIGraphicsGetCurrentContext();
    CGContextSetLineWidth(context, .5f);
    CGContextSetStrokeColorWithColor(context, [UIColor lightGrayColor].CGColor);
    CGContextSetRGBFillColor(context, 1, 1, 1, 1);

    rect.origin.y++;
    CGFloat radius = cornerRadius;

    CGFloat minx = CGRectGetMinX(rect), midx = CGRectGetMidX(rect), maxx = CGRectGetMaxX(rect);
    CGFloat miny = CGRectGetMinY(rect), midy = CGRectGetMidY(rect), maxy = CGRectGetMaxY(rect);

    CGMutablePathRef outlinePath = CGPathCreateMutable();

    if (![User isCurrentUser:message.user])
    {
        minx += 5;

        CGPathMoveToPoint(outlinePath, nil, midx, miny);
        CGPathAddArcToPoint(outlinePath, nil, maxx, miny, maxx, midy, radius);
        CGPathAddArcToPoint(outlinePath, nil, maxx, maxy, midx, maxy, radius);
        CGPathAddArcToPoint(outlinePath, nil, minx, maxy, minx, midy, radius);
        CGPathAddLineToPoint(outlinePath, nil, minx, miny + 20);
        CGPathAddLineToPoint(outlinePath, nil, minx - 5, miny + 15);
        CGPathAddLineToPoint(outlinePath, nil, minx, miny + 10);
        CGPathAddArcToPoint(outlinePath, nil, minx, miny, midx, miny, radius);
        CGPathCloseSubpath(outlinePath);

        CGContextSetShadowWithColor(context, CGSizeMake(0,1), 1, [UIColor lightGrayColor].CGColor);
        CGContextAddPath(context, outlinePath);
        CGContextFillPath(context);

        CGContextAddPath(context, outlinePath);
        CGContextClip(context);
        CGPoint start = CGPointMake(rect.origin.x, rect.origin.y);
        CGPoint end = CGPointMake(rect.origin.x, rect.size.height);
        CGContextDrawLinearGradient(context, [self normalGradient], start, end, 0);
    }
    else
    {
        maxx-=5;
        CGPathMoveToPoint(outlinePath, nil, midx, miny);
        CGPathAddArcToPoint(outlinePath, nil, minx, miny, minx, midy, radius);
        CGPathAddArcToPoint(outlinePath, nil, minx, maxy, midx, maxy, radius);
        CGPathAddArcToPoint(outlinePath, nil, maxx, maxy, maxx, midy, radius);
        CGPathAddLineToPoint(outlinePath, nil, maxx, miny + 20);
        CGPathAddLineToPoint(outlinePath, nil, maxx + 5, miny + 15);
        CGPathAddLineToPoint(outlinePath, nil, maxx, miny + 10);
        CGPathAddArcToPoint(outlinePath, nil, maxx, miny, midx, miny, radius);
        CGPathCloseSubpath(outlinePath);

        CGContextSetShadowWithColor(context, CGSizeMake(0,1), 1, [UIColor lightGrayColor].CGColor);
        CGContextAddPath(context, outlinePath);
        CGContextFillPath(context);

        CGContextAddPath(context, outlinePath);
        CGContextClip(context);
        CGPoint start = CGPointMake(rect.origin.x, rect.origin.y);
        CGPoint end = CGPointMake(rect.origin.x, rect.size.height);
        CGContextDrawLinearGradient(context, [self greenGradient], start, end, 0);
    }

    CGContextDrawPath(context, kCGPathFillStroke);

}

- (CGGradientRef)normalGradient
{

    NSMutableArray *normalGradientLocations = [NSMutableArray arrayWithObjects:
                                               [NSNumber numberWithFloat:0.0f],
                                               [NSNumber numberWithFloat:1.0f],
                                               nil];

    NSMutableArray *colors = [NSMutableArray arrayWithCapacity:2];

    UIColor *color = [UIColor whiteColor];
    [colors addObject:(id)[color CGColor]];
    color = [StyleView lightColorFromColor:[UIColor cloudsColor]];
    [colors addObject:(id)[color CGColor]];
    NSMutableArray  *normalGradientColors = colors;

    int locCount = [normalGradientLocations count];
    CGFloat locations[locCount];
    for (int i = 0; i < [normalGradientLocations count]; i++)
    {
        NSNumber *location = [normalGradientLocations objectAtIndex:i];
        locations[i] = [location floatValue];
    }
    CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();

    CGGradientRef normalGradient = CGGradientCreateWithColors(space, (__bridge CFArrayRef)normalGradientColors, locations);
    CGColorSpaceRelease(space);

    return normalGradient;
} 
```

导致这... ![在此处输入图像描述](../Images/9016a60b55831d4224411d4cdd902d03.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-25T19:43:25.580

另一种方法是使用带有帽子插图的图像。看一下 UIImage 方法：

> resizableImageWithCapInsets:

基本上，您可以创建一个最小尺寸的气泡图像，并让它无限期地拉伸，同时保持“气泡”边界的外观。

下面的代码指定了在拉伸/调整图像大小时保留顶部、左侧、底部和右侧 12 个像素的图像：

```
UIImage *bubble = [[UIImage imageNamed:@"bubble.png"] 
                            resizableImageWithCapInsets:UIEdgeInsetsMake(12, 12, 12, 12)];
UIImageView *imgView = [[[UIImageView alloc] initWithImage:bubble] autorelease];
imgView.frame = CGRectZero; 
```

动画 UIImageView 的大小变化是免费的：

```
[UIView animateWithDuration:0.3
                 animations:^(void) {
                     imgView.frame = CGRectMake(50, 50, 200, 100);
                 } completion:^(BOOL finished) {

                 }]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T19:38:24.337

three20[框架](http://three20.info/)（实际上是 Three20Style）有一个名为 TTSpeechBubbleShape 的形状窗口类，基本上就是你要找的。

现在，正如我所见，您有两个选择：

1.  要么使用 Three20；或者

2.  分析[TTSpeechBubbleShape](https://github.com/facebook/three20/blob/master/src/Three20Style/Sources/TTSpeechBubbleShape.m)类以了解它是如何实现的，并在您的应用程序中执行相同的操作。

# c# - 实体框架 两个查询结果相同，但一个更快

> ID：11196113
> 
> 赞同：3
> 
> 时间：2012-06-25T19:33:54.480
> 
> 标签：c#, .net, sql-server, entity-framework

我最近在查询 SQL Server 2008 的实体框架时遇到了性能问题。我设法解决了这个问题，但我不明白为什么我的修复工作有效。我正在使用带有 .Contains() 方法的 Guid 集合在 SQL 中生成 IN 子句。这是原始代码（更改表名以保护无辜者）：

```
Guid[] values = filter.Split(',').Select<String, Guid>(d => new Guid(d)).ToArray();

returnValue = returnValue.Where(t => values.Contains(t.WorkItem.Requirement.Project.ProjectId)); 
```

当有 > 150 个 ProjectID 时，此查询需要大约 20 秒才能执行。通过更改 .Contains() 的位置，我可以大大加快速度。这是重构：

```
Guid[] values = filter.FilterValue.Split(',').Select<String, Guid>(d => new Guid(d)).ToArray();

var projects = from p in context.DC_DEF_Project
               where values.Contains(p.ProjectId)
               select p;

returnValue = from t in returnValue
              join p in projects on t.DC_DEF_ProjectWorkItem.DC_DEF_ProjectRequirement.ProjectId equals p.ProjectId
              select t; 
```

此代码在与上述查询相同的数据集上花费约 0.125 秒。

我敢肯定这有一个合理的理由，但我的好奇心正在扼杀我。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:48:47.327

我的猜测是，在第二个通过其主键将马赫连接到项目的所有连接之后，第一个结果会导致 sql 中带有一堆或 OR 对工作项上的外键进行评估，并且只评估 150 个 id 然后将其加入其他表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:42:23.430

我认为在第一个示例中，您将整个数据集带到您的应用程序中，然后对其进行内存中 linq 查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:48:01.297

据我了解 Linq 的工作，它必须与查询的延迟执行有关。

在您的固定版本中，您有两个 Linq 表达式，它们将**一个接一个**地被评估和解释，但在您枚举结果时**仅执行一次（***如果有的话*）。这巧妙地**减少了数据库访问**。

第一个版本：

```
returnValue.Where(t => values.Contains(t.WorkItem.Requirement.Project.ProjectId)) 
```

第一步不做任何过滤**。**它将检查`ProjectId`当前表行的是否包含在表`values`的**每一行**中！

# marklogic - 内存使用计划 - 建议？

> ID：11196119
> 
> 赞同：3
> 
> 时间：2012-06-25T19:34:26.817
> 
> 标签：marklogic

对于 MarkLogic 服务器，推荐的林大小与实际内存的比率是多少？例如，我目前有一个 190GB 的数据库，并且随着时间的推移不断增长。我最终需要对这个数据库进行集群，因为数据库会不断增长。因此，我需要为需要多少节点以及使用哪些磁盘和内存配置制定一个计划。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:58:10.223

这取决于。您会听到像 1:10 或 1:16 这样的数字，但内容结构和索引配置的变化可以使该数字在任一方向上摆动 10 倍。

但是由于您已经有一个 190 GB 的数据库，所以这相对容易。检查每个林状态页面的内存大小，然后将它们相加。乘以 8/3（或约 2.7）。

如果您没有现有的数据库，最准确的技术是使用正确的索引配置加载相当大比例（例如 5%）的内容。然后将所有内容合并到一个支架上，并检查林状态页面的内存大小。乘以占总内容的比例。保守地说，这个数字将是所需总物理内存的 3/8。因此，如果您看到 5% 的内容为 1-GB，那么总数将为 20 * 8 / 3 = 53.33-GB，您将需要 64-GB 的服务器。

# windows-phone-7 - 故事板更改目标 WP7

> ID：11196120
> 
> 赞同：0
> 
> 时间：2012-06-25T19:34:31.033
> 
> 标签：windows-phone-7, storyboard

我必须对以下代码进行哪些更改才能使情节提要与 List<> 中的图像一起使用，而不是使其与椭圆一起使用？

```
<Storyboard x:Name="sbMoveImages">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="ellipse">
            <EasingDoubleKeyFrame KeyTime="0" Value="-1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="641"/>
            <EasingDoubleKeyFrame KeyTime="0:0:5" Value="640"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="ellipse">
            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:5" Value="160"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="ellipse">
            <EasingDoubleKeyFrame KeyTime="0:0:3" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:5" Value="359.82"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:28:52.557

只是改变`Storyboard.TargetName`应该就足够了。

# java - 输入流和输出流

> ID：11196122
> 
> 赞同：0
> 
> 时间：2012-06-25T19:34:37.350
> 
> 标签：java, inputstream, outputstream

我写了这个有一个很小的 ​​GUI 的短程序。它应该允许您输入文本，然后您可以将其保存到 txt 文件或从以前保存的文件中读取或删除现有文件。它可以工作，但有一些奇怪的错误。有时创建文件后，如果我尝试删除它，它不会删除该文件。

另外，我完全不确定我是否以一种好的方式编写了代码。我想知道你是否可以看看我写的内容并找到我应该以不同方式写的弱点或领域。而且也许您可以看到为什么在创建文件后删除文件会出现问题。我真的很茫然，我不知道该问谁。这是我的代码：

```
public class InputOutout extends JFrame{

    private static final long serialVersionUID = -7073762217756427192L;

    JLabel label;
    JTextField tf;
    JButton buttonAdd;
    JButton buttonDisplay;
    JButton buttonErase;

    public InputOutout() {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            e.printStackTrace();
        }

        setLayout(new FlowLayout());

        label = new JLabel("Enter text");
        add(label);

        tf = new JTextField(10);
        add(tf);

        buttonAdd = new JButton("Press to save to file");
        add(buttonAdd);

        buttonDisplay = new JButton("Press to display file content");
        add(buttonDisplay);

        buttonErase = new JButton("Press to erase file");
        add(buttonErase);

        eventAdd add = new eventAdd();
        eventDisplay remove = new eventDisplay();
        eventErase erase = new eventErase();

        buttonAdd.addActionListener(add);
        buttonDisplay.addActionListener(remove);
        buttonErase.addActionListener(erase);       
    }

    private class eventAdd implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            try {
                String word = tf.getText()+ " ";
                FileWriter stream = new FileWriter("text.txt",true);
                BufferedWriter out = new BufferedWriter(stream);
                out.append(word);
                out.close();
                tf.setText("");
            } catch (Exception ex){
                JOptionPane.showMessageDialog(null,ex.getMessage());
            }

        }
    }

    private class eventDisplay implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            try {
                FileReader stream = new FileReader("text.txt");
                BufferedReader in = new BufferedReader(stream);
                String text = in.readLine();
                JOptionPane.showMessageDialog(null, text);
                stream.close();
            } catch (Exception ex){
                JOptionPane.showMessageDialog(null,ex.getMessage());
            }

        }
    }

    private class eventErase implements ActionListener {

        public void actionPerformed(ActionEvent e) {
            try {
                File file = new File("text.txt");
                boolean success = file.delete();

                if (!success) {
                    JOptionPane.showMessageDialog(null, "File was not deleted");
                } else {
                    JOptionPane.showMessageDialog(null, "File was deleted");
                }
            } catch (Exception ex) {
                JOptionPane.showMessageDialog(null,ex.getMessage());
            }
        }
    }

    public static void main(String[] args) {

        InputOutout gui = new InputOutout();

        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        gui.setSize(350,100);
        gui.setTitle("SuperWORD 2013");
        gui.setVisible(true);       
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:38:24.820

周围的逻辑`file.delete()`不太正确，`true`只有在删除时才会返回。这意味着如果它不存在，`file.delete()`它将返回。`false`在尝试删除之前检查文件是否存在：

```
File file = new File("text.txt");
if (file.exists())
{
    if (!file.delete())
    {
        JOptionPane.showMessageDialog(null, "File was not deleted");
    }
    else
    {
        JOptionPane.showMessageDialog(null, "File was deleted");
    }
}
else
{
    JOptionPane.showMessageDialog(null, "File does not exist");
} 
```

推荐使用一个`try {} catch() finally {}`构造来确保`BufferedReader.close()`，或者`BufferedWriter.close()`被称为：

```
try
{
    BufferedWriter out = new BufferedWriter(new FileWriter("text.txt",true));
    try
    {
        String word = tf.getText()+ " ";
        out.append(word);
        tf.setText("");
    }
    finally
    {
        try
        {
            out.close();
        }
        catch (IOException ex)
        {
            // Report close failure.
            JOptionPane.showMessageDialog(null, ex.getMessage());
        }
    }
}
catch (Exception ex)
{
    // Report open or write failure.
    JOptionPane.showMessageDialog(null,ex.getMessage());
} 
```

# c# - ExcelLibrary 创建太多工作表

> ID：11196125
> 
> 赞同：1
> 
> 时间：2012-06-25T19:34:43.293
> 
> 标签：c#, excel, excellibrary

我正在尝试使用 ExcelLibrary 将输出写入 Excel 工作簿。我希望此工作簿仅包含一张工作表，但我找不到任何方法来创建只有一张工作表的工作簿或在创建后删除额外的工作表。我发现的所有示例都不起作用。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:38:31.997

Worksheets 可通过`Worksheets`属性提供给您，该属性只是 Worksheet 对象的通用列表 - 即`List<Worksheet>`.

您可以将此列表视为任何通用列表，[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)并使用`Clear()`,`Remove()`等来操作工作表列表。

```
Workbook workbook = new Workbook();
workbook.Worksheets.Clear(); // remove all worksheets

Worksheet mySheet = new Worksheet();
workbook.Worksheets.Add(mySheet); // add a new worksheet
workbook.Worksheets.Remove(mySheet); // remove a particular worksheet
workbook.Worksheets.RemoveAt(4); // remove a worksheet at specific index 
```

# java - 如何在Java中继续登录同一行？

> ID：11196136
> 
> 赞同：12
> 
> 时间：2012-06-25T19:35:30.500
> 
> 标签：java, logging, testng

这类似于[这个问题，它是关于一个 bash 文件](https://stackoverflow.com/questions/3372673/continue-output-on-same-line)。

我们创建了一个在运行 TestNG 测试时输出到控制台的日志：

```
private Log log = LogFactory.getLog(xyz.class); 
```

稍后，在测试期间，日志中充满了详细信息，让我们知道到底在做什么：

```
log.info("Setting browser...");
this.browser = browser;
log.info("Completed."); 
```

现在它正在像您期望的那样打印出来：

```
Setting browser...
Completed. 
```

我想在同一行打印出来：

```
Setting browser... 
```

几毫秒后：

```
Setting browser...Completed. 
```

这对 LogFactory 可行吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T19:39:33.480

在不确切知道您使用的是哪个**日志库**的情况下，我猜答案几乎肯定*不是，除非您想在其他任何地方明确指定换行符*。

( `java.util.logging`and `Log4J`) 框架允许您插入格式化程序来格式化您的语句。您需要指定不以换行符结尾的格式。例如，在[**Log4J**](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)中。他们给出了一个示例模式

```
 %-5p [%t]: %m%n 
```

因此，如果您删除了*除了*`%m`（换行符和其他内容包括时间和`%n`日志级别；我认为分别）之外的所有内容，换行符不会自动附加到每个语句。`%t``%p`

但是，这意味着在其他任何地方，您的其他日志语句必须如下所示：

```
log.info("I want this on one line\n"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T20:29:47.563

不理会日志。如果您希望它更具可读性，请对其进行后处理。

除非您小心，否则弄乱日志文件会丢失信息。以时间戳为例。如果您的`Setting browswer..`日志语句包含时间戳，那么`completed`不带时间戳的语句会丢失信息，并且在同一行上有两个时间戳似乎并不自然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T03:29:55.070

`slf4j-api`这是一个简单的替代方案，如果您将与实现一起使用，则不需要对记录器配置进行任何更改`logback`。

它可以通过使用该`Logger.printf`方法来实现，如下所示：

**进口**

```
import org.slf4j.Logger
import org.slf4j.LoggerFactory

... 
```

**记录器实例**

```
private static final Logger log = LoggerFactory.getLogger(YourClass.class)

... 
```

**循环内**

```
...

log.printf("> Processed %d/%d\r", ++yourCounter, maxCounter) // Will log in the same line due to \r

... 
```

**样本输出**

```
22:12:15.169 [main] INFO  your.package.YourClass - Previous log output a...
22:12:15.170 [main] INFO  your.package.YourClass - Previous log output b...
22:12:15.170 [main] INFO  your.package.YourClass - Previous log output c...
> Processed 1398/4096 
```

# ruby-on-rails - 如何使用 Rspec 和 Cucumber 创建和测试 gem

> ID：11196142
> 
> 赞同：1
> 
> 时间：2012-06-25T19:35:50.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, gem

我创建了一个跨应用程序使用的模型。

```
module WeblabOnRails
  class TimeOnly
    #...
  end
end 
```

我将代码放入 my`lib/weblab_on_rails/time_only.rb`并调用它，每次都来自`application.rb`.

我想将该代码集成到 gem 中并使用 Rspec 和 Cucumber 编写测试。我正在使用 Rails 3.2.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:47:45.847

我建议您使用 bundler 来创建和发布 gem。看看这个 RailsCast：[http:](http://railscasts.com/episodes/245-new-gem-with-bundler) //railscasts.com/episodes/245-new-gem-with-bundler 。一旦你创建了你的 gem 项目，你就可以使用 RSpec、Cucumber 或其他任何东西来测试它。

# python - 直接使用 python 解释器运行 cython 扩展？即“python test.so”

> ID：11196144
> 
> 赞同：1
> 
> 时间：2012-06-25T19:35:57.363
> 
> 标签：python, cython

我想将 main.py 编译成 main.so 并使用 linux 中的 python 解释器运行它，如下所示：“/usr/bin/python main.so”

我怎样才能做到这一点？

到目前为止，运行扩展编译的官方方式给了我这个：

```
root@server:~/TEMP# python test.so 
File "test.so", line 1
SyntaxError: Non-ASCII character '\x8b' in file test.so on line 2,... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:56:05.810

您不能直接执行 .so 。二进制形式的原因，您必须使用以下命令导入它：

```
python -m test 
```

如果要从模块中生成可执行文件，可以使用 cython 的“-embed”选项：

```
cython -embed test.pyx
gcc ...your flags... test.c -o test
./test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:39:41.813

您必须将其作为模块执行。

```
python -m test 
```

# css - 在 CSS、Mosaic jQuery 中正确对齐文本

> ID：11196145
> 
> 赞同：1
> 
> 时间：2012-06-25T19:35:59.283
> 
> 标签：css, alignment, vertical-alignment

好的，所以我正在使用[Mosaic](http://buildinternet.com/project/mosaic/)（用于悬停文本等的 jQuery 插件）无论如何，我已经完成了这项工作，但现在我的问题是文本与我正在尝试做的事情正确对齐。我试图让这些词：“销售项目”以非常小的空间出现在彼此之上。但是，如果我使用换行符“br/”，它会在行之间的空间中留下很大的间隙。我尝试将显示属性设置为阻止。将两个“p”元素设置为“top”和“bottom”并以这种方式对齐它们。我只是想找一个非常精通 CSS 的人来帮忙。

基本上我试图让文本正确对齐。

的HTML：

```
<div class="mosaic-block demo" id="sale">
    <div class="mosaic-overlay">
        <h1 class="mosaic">sale items</h1><br/>
        <p><strong>get them before they're gone!</strong></p>
    </div>
    <div class="mosaic-backdrop"><img src="img/sale.png" /></div>
</div> 
```

CSS：

```
h1.mosaic {
    display: inline;
    font-family: "ONRAMP";
    margin: 0;
    padding-left: 90px;
    padding-top: 0;
    font-size: 60px;
    text-transform: capitalize;
    width: 110px;
}
.mosaic-block {
    position: absolute;
    overflow: hidden;
    width: 320px;
    height: 150px;
    left: 50%;
    top: 475px;
   -webkit-filter: grayscale(1);
}
.mosaic-block:hover {
    -webkit-filter: grayscale(0);
}
.mosaic-backdrop {
    display: none;
    position: absolute;
    top: 0;
    height: 100%;
    width: 100%;
}
.mosaic-overlay {
    display :none;
    z-index: 1;
    position: absolute;
    height: 300px;
    bottom: -150px;
    color: #FFF;
    text-decoration: none;
}
.mosaic-overlay p {
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    text-transform: uppercase;
    color: #fff;
    padding-top: 90px;
    padding-left: 30px;
} 
```

jQuery 方面工作正常，它的工作。但是我的CSS缺少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:38:13.507

您可能正在寻找`line-height`我没有在您的 CSS 中定义的 CSS 属性，所以这应该很容易。首先将两个单词强制分开：

```
<div class="mosaic-block demo" id="sale">
    <div class="mosaic-overlay">
        <h1 class="mosaic">sale<br/> items</h1><br/>
        <p><strong>get them before they're gone!</strong></p>
    </div>
    <div class="mosaic-backdrop"><img src="img/sale.png" /></div>
</div> 
```

添加`line-height`属性并分配一个值，我猜测 60px 字体大小可能会发生什么，但由于我不知道哪种字体，您可能应该将其调高/调低。

```
h1.mosaic {
    display: inline;
    line-height: 50px;
    font-family: "ONRAMP";
    margin: 0;
    padding-left: 90px;
    padding-top: 0;
    font-size: 60px;
    text-transform: capitalize;
    width: 110px;
} 
```

如果文本被框剪裁，您可以在必要时在顶部/底部添加填充以获得所需的外观。

# macos - 如何在 Mac 上更改特定的终端颜色设置

> ID：11196147
> 
> 赞同：2
> 
> 时间：2012-06-25T19:36:05.460
> 
> 标签：macos, vim, colors, terminal

我最近为 VIM 安装了 clang_complete 插件。一切看起来都很好，除了在弹出菜单中我得到一个不舒服的粉红色背景颜色。

![VIM clang_complete 镜像](../Images/57268504c01b6fe4a7330a92823a7ce8.png)

如何更改此颜色？还有一种方法可以更改其他一些颜色，例如手动描述、目录颜色（在 vim 中）等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T19:50:36.443

这些颜色在您的配色方案中定义。

您可以[搜索更好的配色方案](http://www.vim.org/scripts/script_search_results.php?keywords=&script_type=color%20scheme&order_by=rating&direction=descending&search=search)或编辑您现在使用的配色方案。这是一个例子：

```
hi Pmenu      term=NONE cterm=NONE ctermbg=238 ctermfg=231 gui=NONE guibg=#444444 guifg=#ffffff
hi PmenuSel   term=NONE cterm=NONE ctermbg=149 ctermfg=16  gui=NONE guibg=#b1d631 guifg=#000000
hi PmenuSbar  term=NONE cterm=NONE ctermbg=250 ctermfg=fg  gui=NONE guibg=#bebebe guifg=fg
hi PmenuThumb term=NONE cterm=NONE ctermbg=149 ctermfg=149 gui=NONE guibg=#b1d631 guifg=#b1d631 
```

如果你使用默认的颜色方案，你可以将上面的行添加到你的 ~/.vimrc 中。

# winapi - Win32 函数获取 C:\ProgramData 的路径

> ID：11196151
> 
> 赞同：14
> 
> 时间：2012-06-25T19:36:21.937
> 
> 标签：winapi, path, programdata

我的应用程序需要安装一些可以在运行时由应用程序编辑的文件。Install shield 提供了一个别名 [CommonAppDataFolder]，它将在 Vista 和 Windows 7 上解析为 c:\programData，并且也适用于 Windows XP。是否有将返回类似路径的 win32 函数？

也许我需要根据操作系统调用不同的函数？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-25T19:41:02.387

[`SHGetFolderPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)/`SHGetSpecialFolderPath`得到你，有`CSIDL_COMMON_APPDATA`论据。

请参阅此处的代码片段（在底部）：[如何使用 Visual C++ 编写将用户和应用程序数据存储在正确位置的 Windows XP 应用程序](https://web.archive.org/web/20190905002223/https://support.microsoft.com/en-us/help/310294/how-to-write-a-windows-xp-application-that-stores-user-and-application)；原始链接不再有效 - 代码片段被拉到下面）：

```
include <shlwapi.h>
#pragma comment(lib,"shlwapi.lib")
void CreateTemporaryFile()
{
   TCHAR szPath[MAX_PATH];
   // Get path for each computer, non-user specific and non-roaming data.
   if ( SUCCEEDED( SHGetFolderPath( NULL, CSIDL_COMMON_APPDATA, 
                                    NULL, 0, szPath ) ) )
   {
      TCHAR szTempFileName[MAX_PATH];
      // Append product-specific path - this path needs to already exist
      // for GetTempFileName to succeed.
      PathAppend( szPath, _T("\\My Company\\My Product\\1.0\\") );
      // Generate a temporary file name within this folder.
      if (GetTempFileName( szPath, 
                           _T("PRE"),
                           0,
                           szTempFileName ) != 0 )
      {
         HANDLE hFile = NULL;
         // Open the file.
         if (( hFile = CreateFile( szTempFileName, 
                                   GENERIC_WRITE, 
                                   0, 
                                   NULL, 
                                   CREATE_ALWAYS, 
                                   FILE_ATTRIBUTE_NORMAL, 
                                   NULL )) != INVALID_HANDLE_VALUE )
         {
            // Write temporary data (code omitted).
            CloseHandle( hFile );
         }
      }
      else
          DWORD err = GetLastError();
   }
} 
```

*   Windows XP：C:\Documents and Settings\所有用户\应用程序数据
*   Windows Vista：C:\ProgramData
*   Windows 7：C:\ProgramData

另请参阅：[CSIDL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-21T19:01:53.353

自 Delphi **XE5**以来，此功能是框架的一部分。

*   单元：`System.IOUtils`
*   班级：`TPath`
*   功能：**`GetPublicPath`**

有关更多信息，请参阅[embarcadero docwiki](http://docwiki.embarcadero.com/Libraries/XE5/en/System.IOUtils.TPath.GetPublicPath)。

# android - 通过文件配置 Android 电子邮件

> ID：11196153
> 
> 赞同：1
> 
> 时间：2012-06-25T19:36:32.373
> 
> 标签：android, xml, email, configuration

是否有通过 XML 文件配置 Android 电子邮件客户端的方法？

示例是 Apple 生态系统中的功能，[http://www.rootmanager.com/iphone-ota-configuration/iphone-ota-setup-with-signed-mobileconfig.html](http://www.rootmanager.com/iphone-ota-configuration/iphone-ota-setup-with-signed-mobileconfig.html)用于企业设置。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:13:33.183

配置由负责在 Android 设备上设置 Google 帐户的用户完成。从那里，电子邮件/GMail 应用程序会自动与 Google Mail 同步并维护自己的数据和私人设置。

但我猜您是在要求在每部公司电话上自动设置公司电子邮件帐户。据我所知，目前还没有以编程方式设置帐户的解决方案。

但是，您可以创建自己的电子邮件客户端应用程序或修改开源客户端 K-9 以使其成为可能。

# php - PHP mail（）函数不适用于办公室电子邮件

> ID：11196158
> 
> 赞同：0
> 
> 时间：2012-06-25T19:36:41.110
> 
> 标签：php, email

所以我尝试使用 PHP 的 mail() 函数在用户注册时发送电子邮件。但由于某种原因，它拒绝发送到公司的电子邮件。是否有一些我可能缺少的额外参数，我需要这样的东西，或者你认为这是来自公司的电子邮件过滤这些电子邮件吗？

编辑：这是一些代码：

```
$to = 'something@something.com';
$subject = 'New Web Registration';
$from = 'Quote Registration';

$headers = 'Content-type: text/html charset=iso-8859-1\r\n';
$headers .= 'From: ' . $from;

$body = '<table>
        <tr>
            <td style="text-align: right;">WebUserID:</td>
            <td>' . $wuid . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">Name: </td>
            <td>' . $regdata['Name'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">Company:</td>
            <td>' . $regdata['Company'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">Address:</td>
            <td>' . $regdata['Address'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">CSZ:</td>
            <td>' . $regdata['City'] . ', ' . $regdata['State'] . ' ' . $regdata['Zip'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">Phone:</td>
            <td>' . $regdata['Phone'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">Fax:</td>
            <td>' . $regdata['Fax'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">URL:</td>
            <td>' . $regdata['URL'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">Email:</td>
            <td>' . $email . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">Comments:</td>
            <td>' . $regdata['Comments'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">Customer Group:</td>
            <td>' . $regdata['CustomerGroup'] . '</td>
        </tr>
        <tr>
            <td style="text-align: right;">How Heard</td>
            <td>' . $regdata['HowHeard'] . '</td>
        </tr>
        </table>';

if (!mail($to, $subject, $body, $headers)) {
    echo 'Message delivery failed.'; 
} 
```

它确实成功地通过电子邮件发送到其他域，例如 gmail。输送/过滤器问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:55:09.907

如果它成功发送到其他域而不是您公司的邮件服务器有问题。电子邮件可能被过滤为垃圾邮件或类似的东西。

一个简单的解决方案是使用 STMP，或者您可以尝试通过查看邮件服务器的日志来找出过滤的原因。

如果您将它们作为 html 发送，请确保发送完整的 html 消息。（标签和所有）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:44:24.633

我正在为您提供我发送邮件的代码。它在我的应用程序中运行良好。希望它会帮助你。

```
function sendmail($username)
{
    $from     =       "test@test.com";
    $to       =       "mytest@test.com";
    $subject  =       "My Test Subject";
    $body     =       "My Test Body";
    $headers .=      "From:".$from ."". "\r\n";

    if (mail($to ,$subject ,$body,$headers)) 
    {
        $msg = "Your message has been sent.";
    } 
    else
    {
        $msg = "Error in Sending the Message. Please try again.";
    }
    return $msg;
} 
```

# sql - SQL 获取第一个匹配结果

> ID：11196165
> 
> 赞同：1
> 
> 时间：2012-06-25T19:37:40.050
> 
> 标签：sql, asp-classic, odbc, netezza

我有以下 SQL 语句：

```
SELECT ID, NAME FROM myTable
WHERE 
ID LIKE 'R43%' OR 
ID LIKE 'D32%' OR 
ID LIKE 'F22%' 
```

和 ID 可能具有以下值：

```
ID
____

R431
R431
R432
R434
D322
D322
D327
F226
F227 
```

我将如何只获取匹配的第一个 ID 的记录？就像上面的值一样，我只会得到 (R431, R431, D322, D322, F226) 的记录。我从中获取的表中的 ID 值是连续的（因此 R432 将始终出现在表中的 R431 之后）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:55:06.700

对此类查询使用 Oracle 分析函数

```
 select * from (
select id , substr(id,0,3),rank() over ( partition by substr(id,0,3) order by id) rank 
from mytable
WHERE ID LIKE 'R43%' OR ID LIKE 'D32%' OR ID LIKE 'F22%')
where rank = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:39:31.937

MIN 查询和嵌套子查询的组合应该可以满足您的需求。

```
Select ID, 
       Name 
FROM myTable 
WHERE 
     ID IN ( 
       SELECT MIN(ID) From myTable WHERE ID LIKE 'R43%' OR  ID LIKE 'D32%' OR  ID LIKE 'F22%'     
           ) 
```

*如果您要关闭另一个字段，例如 OrderDate 等，请更改子查询。无论哪种方式，外部查询都只会从内部查询中选择的 ID 中选择记录。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:40:43.900

使用不同的：

```
SELECT DISTINCT ID, NAME FROM myTable
WHERE 
ID LIKE 'R43%' OR 
ID LIKE 'D32%' OR 
ID LIKE 'F22%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:53:39.133

尝试使用子查询：

```
SELECT R.ID AS ID, R.NAME AS NAME FROM myTable R
WHERE 
R.ID LIKE 'R43%'
AND R.ID IN 
(
  SELECT DISTINCT A.ID
 FROM myTable A
 WHERE A.ID LIKE 'R43%'
 ORDER BY A.ID
 LIMIT 1
)

UNION 

SELECT D.ID AS ID, D.NAME AS NAME FROM myTable D
WHERE  
D.ID LIKE 'D32%'
AND D.ID IN 
(
  SELECT DISTINCT B.ID
 FROM myTable B
 WHERE B.ID LIKE 'D32%'
 ORDER BY B.ID
 LIMIT 1
)

UNION

SELECT F.ID AS ID, F.NAME AS NAME FROM myTable F
WHERE  
F.ID LIKE 'F22%'
AND F.ID IN 
(
  SELECT DISTINCT C.ID
 FROM myTable C
 WHERE C.ID LIKE 'F22%'
 ORDER BY C.ID
 LIMIT 1
) 
```

# android - 如何在android中引用较低片段中的对象

> ID：11196167
> 
> 赞同：1
> 
> 时间：2012-06-25T19:37:52.093
> 
> 标签：android, android-fragments

我正在尝试构建一个将在媒体播放器上运行的帮助屏幕。这个想法是在当前视图的顶部放置一个具有透明主题的片段。（有关基本思想，请参阅[如何创建类似于您在一些 Android 应用程序和 ICS 中看到的帮助叠加层？](https://stackoverflow.com/questions/10216937/how-do-i-create-a-help-overlay-like-you-see-in-a-few-android-apps-and-ics)）。现在，我了解了上述链接中的步骤，但是如何将每个旁边的圆圈、箭头和段落（解释每个是什么）连接到较低的对象？例如，我有一个对象：

```
R.id.music_button 
```

我希望有指向音乐按钮的箭头。尝试支持与我们一样多的设备将非常困难，仅绘制几张图片作为顶部布局的一部分并期望它们排成一行。同样，如何在顶层以下的片段上引用对象？

谢谢

**更新 1：** 根据 Nobu Games 的建议，我保存了该位置并将其传递给帮助片段。

```
 View helpedButton = getView().findViewById(R.id.my_sources_button);
            int[] location = { 0, 0 };
            helpedButton.getLocationOnScreen(location); 
```

我认为这是对的，但现在我无法绘制箭头：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment_help_main_menu, container, false);
    DebugLog.d(TAG, "View v is: " + v);
    RelativeLayout mainHelp = (RelativeLayout) v.findViewById(R.id.mainHelpLayout);
    DebugLog.d(TAG, "Layout is: " + mainHelp);
    ImageView arrow = new ImageView(getActivity());
    arrow.setX(location[0]);
    arrow.setY(location[1]);
    arrow.setImageResource(R.drawable.arrow1);
    arrow.setVisibility(arrow.VISIBLE);
    DebugLog.d(TAG, "Location x: " + location[0]);
    DebugLog.d(TAG, "Location y: " + location[1]);
    arrow.bringToFront();
    DebugLog.d(TAG, "CIRCLE " + arrow);
    mainHelp.addView(arrow);
    return v;
} 
```

**更新 2** 使用 getLocationOnScreen 和 getLocationInWindow 给了我奇怪的结果。我试图绘制箭头的按钮也位于屏幕的右下方，下方和右侧都有一些填充。我得到的坐标是索尼 GTV 上的 x=1319 和 716。如果我使用

```
 LayoutParams params = new RelativeLayout.LayoutParams(60, 40);
        params.topMargin = y;
        params.leftMargin = x; 
```

箭头绘制，但在一些时髦的地方。我可以使用数学或更改参数，直到它在一个视图中看起来不错，但这只是许多箭头中的第一个，需要支持许多设备。我真的需要传递按钮的位置，而不是在时髦的地方绘制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:10:49.973

如果我对您的理解正确，您正在尝试在 Fragment 顶部覆盖一个半透明的帮助屏幕。该覆盖图说明了下面 Fragment 视图的 UI 元素。

所以有两种可能：

**选项1**

在启动帮助屏幕 Fragment / Activity 之前，您需要获取要为其提供帮助的所有视图元素的位置信息。

您可以为此使用[View.getLocationOnScreen](http://developer.android.com/reference/android/view/View.html#getLocationOnScreen%28int%5b%5d%29)。

然后将位置数据与每个 UI 元素的标识符一起传递到帮助屏幕。例如，作为 Intent 额外值。

您的帮助组件需要获取这些坐标并计算箭头的绝对位置。

**选项 2**

Create a help layout XML file that has the same alignments and dimensions like your Fragment's view. Use that help layout to correctly position your labels and arrow graphics. Use margins / paddings for positioning these elements.

# db2 - 对带有点“.”的 DB2 文件运行 SQL 查询。在名字里？

> ID：11196168
> 
> 赞同：5
> 
> 时间：2012-06-25T19:37:55.443
> 
> 标签：db2, ibm-midrange

我有一个名为“my.test”的 DB2 文件。DB2 文件名包含一个点`'.'`

如果我尝试通过 strsql 运行以下查询：

```
select * from my.test 
```

我收到以下错误：

```
Token . was not valid. Valid tokens: FOR USE SKIP WAIT WITH FETCH ORDER UNION EXCEPT OPTIMIZE. 
```

有没有解决的办法？我尝试用引号括起来，但这没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T02:00:04.813

双引号是转义文件名的正确方法。 **文件名在引号内区分大小写，并且必须以大写形式指定**。

```
SELECT * FROM "MY.TEST" 
```

* * *

请注意，在 IFS 命名约定中，“.” 运算符用于引用文件中的成员，但不适用于 SQL。

如果您需要使用名为“TEST”的成员访问名为“MY”的文件，则需要创建一个别名来查询。

```
CREATE ALIAS QTEMP/MYTEST FOR MY (TEST)
SELECT * FROM QTEMP/MYTEST 
```

# python - 有时我的 pg_restore 或 mongorestore 卡住了

> ID：11196175
> 
> 赞同：2
> 
> 时间：2012-06-25T19:38:34.137
> 
> 标签：python, postgresql, mongodb, popen

```
print 'restore db1'
run_command('pg_restore -i -h localhost -p 5432 -U postgres -d db1 -v "/var/lib/project/backup/db1.backup" -c')
print '--- wait 3 seconds'
time.sleep(3)

print 'restore db2'
run_command('pg_restore -i -h localhost -p 5432 -U postgres -d db2 -v "/var/lib/project/backup/db2.backup" -c')
print '--- wait 3 seconds'
time.sleep(3)

print 'restoring mongodb'
run_command('/var/lib/project/bbds/mongodb-linux/bin/mongorestore /var/lib/project/backup/dump --drop')
print '--- wait 3 seconds'
time.sleep(3) 
```

我`run_command`的基本上是取自[这个](http://pastebin.com/4gLsNb37)。

在我的控制台上：

```
python ignition.py --load-fixtures
For safety, this process will run for about one minute.
setup LDAP
restore db1
['pg_restore', '-i', '-h', 'localhost', '-p', '5432', '-U', 'postgres', '-d', 'db1', '-v', '/var/lib/project/backup/db1.backup', '-c']
Password: 
```

输入密码后就卡住了。之后什么也没有发生。我不确定它是否资源繁忙。`pg_restore`仍在运行，`ps au|grep pg_restore`但`mongorestore`不是。所以它必须坚持第一次恢复。我也不认为它的内存已满，因为我的虚拟机只有 512mb，而且它总是满的，并且总是使用交换内存。

我们怎么知道它在做什么？有时它会停留在恢复 mongo 上。所以所有这些操作都可能导致问题。我应该如何解决这个问题？

谢谢。

* * *

当我终止进程时，我得到了这个回溯：[http](http://pastebin.com/Cnv9P6HW) ://pastebin.com/Cnv9P6HW 重新启动将“解决”问题。它将允许我毫无问题地运行脚本。但这并不稳定。我们有时会陷入困境。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T03:45:47.393

您对`pg_restore`and的使用`mongorestore`似乎是独立的。我会尝试：

*   直接从命令行运行每个命令（即不通过 Python `do_command()`）
*   将它们放入单独的脚本中，以便您可以确定哪个命令挂起

您提到只有 512MB RAM 并且始终使用交换，这表明此 VM 上没有足够的可用内存。“卡住”究竟是什么意思？如果虚拟机实际上被卡住并需要重新启动，那么它很可能已经耗尽了 RAM 和交换空间。如果您仍然可以登录，但恢复脚本的运行时间似乎比预期的要长，我会尝试使用[性能监控工具](http://www.thegeekstuff.com/2011/07/iostat-vmstat-mpstat-examples/)（如`iostat`和）来了解资源使用情况`vmstat`。

# cocoa - 使用 NSPersistentDocument 读写元数据的理想场所？

> ID：11196176
> 
> 赞同：5
> 
> 时间：2012-06-25T19:38:45.277
> 
> 标签：cocoa, core-data

在我的 NSPersistentDocument 子类中，我需要在保存文档时将一些元数据保存到我的文档中，当然，当我打开文档时将其读回。我确实让它工作了，但我不确定这是否是处理它的正确方法。（我的测试反映了一个新的、未保存的文档被保存然后再次打开。新的、未保存的文档在第一次保存之前没有分配 NSPersistentStore。）

这是我的工作代码，其中包含与我的测试和如何处理此问题的思考过程相关的注释：

```
- (BOOL)readFromURL:(NSURL *)absoluteURL ofType:(NSString *)typeName error:(NSError **)outError
{

    // No persistent store available yet

    BOOL result = [super readFromURL:absoluteURL ofType:typeName error:outError];

    // Persistent store available, but metadata may be already altered by configurePersistentStoreCoordinatorForURL: 
    // if I were set the data there instead of in writeToURL:

    if (result == YES)
    {
        // Read metadata
        NSPersistentStore *persistentStore = [self.managedObjectContext.persistentStoreCoordinator persistentStoreForURL:absoluteURL];
        NSString * uuid = [persistentStore metadata][DefaultLocationUUIDKey];
        self.defaultLocationUUID = uuid;
    }

    return result;
}

- (BOOL)writeToURL:(NSURL *)absoluteURL ofType:(NSString *)typeName forSaveOperation:(NSSaveOperationType)saveOperation originalContentsURL:(NSURL *)absoluteOriginalContentsURL error:(NSError **)error
{

    // No persistent store available yet

    BOOL result = [super writeToURL:absoluteURL ofType:typeName forSaveOperation:saveOperation originalContentsURL:absoluteOriginalContentsURL error:error];

    // Persistent store available, but has already been saved by this point

    // Get mutable copy of existing metadata and update with new data
    NSPersistentStore *persistentStore = [self.managedObjectContext.persistentStoreCoordinator persistentStoreForURL:absoluteURL];
    NSMutableDictionary *metadata = [persistentStore.metadata mutableCopy];
    metadata[DefaultLocationUUIDKey] = self.defaultLocationUUID;

    // Use this method because it saves the metadata directly to the file without having to re-save the document, is this correct? It works.
    // Are their negative side effects to altering the metadata in this way while the file is open? I haven't tested all possibilities.
    NSError *metadataError = nil;
    [NSPersistentStoreCoordinator setMetadata:metadata forPersistentStoreOfType:typeName URL:absoluteURL error:&metadataError];

    return result;

}

// Called for both open and save, but not for new documents (which is fine, use initWithType:error:)
- (BOOL)configurePersistentStoreCoordinatorForURL:(NSURL *)url ofType:(NSString *)fileType modelConfiguration:(NSString *)configuration storeOptions:(NSDictionary *)storeOptions error:(NSError **)error
{

    // No persistent store available yet

    BOOL result = [super configurePersistentStoreCoordinatorForURL:url ofType:fileType modelConfiguration:configuration storeOptions:storeOptions error:error];

    // Persistent store available, but how to determine if opening existing or saving a new document?
    // Don't want to alter existing record unless saving a new document.

    return result;
} 
```

在使用 NSPersistentDocument 时如何最好地处理很多事情的文档似乎有点稀疏，因此欢迎提出任何建议。

谢谢。

# php - Web 应用程序中丢失的环境变量

> ID：11196179
> 
> 赞同：-2
> 
> 时间：2012-06-25T19:39:03.153
> 
> 标签：php, python, environment-variables

我写了一个调用python文件的PHP网页，在python文件中我称之为程序“antiword”

antiword 依赖 $HOME 运行，但是在我的浏览器中运行 python 文件时，我发现 $HOME 没有设置，所以 antiword 无法运行。

如何让我的 python 文件识别 $HOME？

我用红帽。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:59:57.817

你在找[`putenv()`](http://php.net/manual/en/function.putenv.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:02:39.273

没关系，我已经硬编码了路径。

# cocoalibspotify-2.0 - SPAsyncLoading waitUntilLoaded 的问题

> ID：11196182
> 
> 赞同：0
> 
> 时间：2012-06-25T19:39:19.817
> 
> 标签：cocoalibspotify-2.0

我在使用 SPAsyncLoading 类加载播放列表时遇到问题。有时电话根本没有返回，有时在很长一段时间后。

我使用以下代码从 url 加载播放列表：

```
NSString *playlistUrl = [Config instance].playlistUrl;
[SPPlaylist playlistWithPlaylistURL:[NSURL URLWithString:playlistUrl] inSession:[SPSession sharedSession] callback:^(SPPlaylist *pl) {
    playlist = pl;
    playlist.delegate = self;

    [SPAsyncLoading waitUntilLoaded:playlist then:^(NSArray *array) {
        NSLog(@"playlist loaded");
    }];
}]; 
```

我使用以下代码加载所有用户播放列表：

```
SPPlaylistContainer *userPlayLists = [[SPSession sharedSession] userPlaylists];

[SPAsyncLoading waitUntilLoaded:userPlayLists then:^(NSArray *result) {

    SPPlaylistContainer *userPlayLists = (SPPlaylistContainer*) [result objectAtIndex:0];

    [SPAsyncLoading waitUntilLoaded:userPlayLists.playlists then:^(NSArray *result) {
          NSLog(@"playlists loaded");
    }];
}]; 
```

在加载所有用户播放列表的情况下，有时会加载 0 个播放列表，有时所有播放列表都可用，但最后一个 waitUntilLoaded 不会返回。

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:35:20.210

在这条线上：`[SPAsyncLoading waitUntilLoaded:userPlayLists.playlists then:^(NSArray *result) {`

…替换`userPlayLists.playlists`为`userPlayLists.flattenedPlaylists`— 文件夹不合`SPAsyncLoading`规。

请注意，`+[SPAsyncLoading waitUntilLoaded:then:]`它已从 CocoaLibSpotify 的最新版本中删除，仅`+[SPAsyncLoading waitUntilLoaded:timeout:then:]`保留。这是为了确保即使没有加载内容，您也*始终会收到回调。*

无法加载的可能原因：

*   网络速度很慢和/或已关闭。
*   元数据服务缓慢和/或停机。
*   播放列表服务很慢和/或关闭。

由于 Spotify 是一项互联网服务，因此您需要在加载元数据和播放列表时对问题做出响应。`+[SPAsyncLoading waitUntilLoaded:timeout:then:]`如果在超时发生时并非所有内容都已完成加载，则可以通过为您提供已加载和未加载的内容列表来帮助您。

# sql - 寻找帮助构造sql查询的指针

> ID：11196187
> 
> 赞同：0
> 
> 时间：2012-06-25T19:39:31.420
> 
> 标签：sql, oracle11g

我在 Oracle 11g 数据库中有一个类似于以下内容的表：

```
process_times:
--------------------------------------------
machine_id | load_id | start_time | end_time 
```

一些示例记录可能如下所示：

```
process_times:
----------------------------------------------------------------
machine_id | load_id | start_time          | end_time
----------------------------------------------------------------
220        | 25      | 06/24/2012 04:29:00 | 06/25/2012 04:42:38
187        | 23      | 06/22/2012 14:41:00 | 06/24/2012 00:34:32
187        | 18      | 06/20/2012 11:57:00 | 06/20/2012 23:53:51 
```

我正在尝试编写一个查询，该查询将返回一个与表示每台机器负载之间的停机时间的属性的关系。停机时间是指给定机器的每个 end_time 和以下 start_time 之间的时间。

因此，对于上面的示例，我会得到如下结果：

```
result:
----------------------
machine_id | down_time
----------------------
220        |  0
187        |  (06/22/2012 14:41:00 - 06/20/2012 23:53:51) -- the actual result, I wrote it like this to be more clear 
```

下午的大部分时间我一直在修补这个问题，这只是我真正想要写的查询的先决条件，所以我想我会发帖看看是否有人有任何指示让我走向正确方向。

**编辑**我应该提到的另一个限制是我需要让结果列出每台机器的单独停机时间，而不仅仅是给定时间段内的停机时间总量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:47:42.167

有趣的问题。您需要首先获取上一个/下一个记录，然后进行减法。幸运的是，Oracle 对此具有领先/滞后功能。

所以：

```
select machine_id, (lastend - start_time) as down_time
from (select pt.*,
             lag(end_time, 1) over (partition by machine_id order by end_time) as lastend
      from process_time pt
     ) pt
where lastend is not null 
```

这会找到之前的记录和结束时间，然后计算停机时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:54:01.950

这未经测试，但根据我的评论，这可以让您获得正常运行时间。如果您知道总时间窗口，则停机时间很容易从正常运行时间得出。

```
SELECT machine_id, SUM(joblen) AS uptime
FROM (
    SELECT machine_id, (end_time - start_time) AS joblen
    FROM process_times
    )
GROUP BY machine_id 
```

事实上，子查询甚至可能不是必需的，你可以做类似的事情

```
SELECT machine_id, SUM(end_time - start_time) AS uptime
FROM process_times
GROUP BY machine_id 
```

不过我不知道。

从那里，您可能会执行以下操作：

```
SELECT machine_id, (lifetime - uptime) AS downtime
FROM (
    SELECT machine_id, 
        SUM(end_time - start_time) AS uptime, 
        (min(start_time) - max(end_time) as lifetime
    FROM process_times
    GROUP BY machine_id
    ) 
```

无论如何，这是我如何处理它的粗略轮廓，它几乎肯定不会是剪切和粘贴式的答案。

# c# - 链接到服务器上的 pdf

> ID：11196198
> 
> 赞同：0
> 
> 时间：2012-06-25T19:40:12.310
> 
> 标签：c#, hyperlink

我正在 VS2010 上用 C# 编写网页。

我有一个从数据库填充的gridview。在加载 gridview Columns 时，我删除了文件的本地地址，并为其提供了可以找到本地文件的服务器名称。所以如果它的本地路径是 E:/secureDocs/depositions/file a.pdf 任何人的计算机可以使用的路径是 \\dmzwimkeweb01\securedocs\depostions\file a.pdf

```
 <Columns >    
      <asp:BoundField DataField="docTypeName" HeaderText="Type" /> 
        <asp:TemplateField HeaderText="Name" >
            <ItemTemplate>               
                <a href='<%#Utility.Clean(((String)Eval("docPath")).Replace("e:", "\\dmzwimkeweb01")) %>'><%# ((String)Eval("docname")).Replace("|^||^||^||^||^||^||^||^|", "&#39;")%></a>
            </ItemTemplate>

        </asp:TemplateField>

        <asp:BoundField DataField="pageName" HeaderText="Folder" />
        <asp:BoundField DataField="docCreateDate" HeaderText="Date" HtmlEncode="false" DataFormatString="{0:MM/dd/yyyy}" /> 
    </Columns> 
```

但是，当我单击进入该列的链接时，它会将我带到 h_ttp://dmzwimkeweb01/secureDocs/depositions/file%20a.pdf

所以现在斜线是错误的方式（不知道这是否重要），当它应该只是到网络上服务器的链接时，它会将我带到“http://”，并将 %20 放​​在有空间的地方在文件名中。此外，当我单击链接时，它会尝试在 IE 中打开它，而不是打开 pdf 阅读器

所以我想要的链接是：\\dmzwimkeweb01\securedocs\depostions\file a.pdf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:44:42.000

假设点击你的链接的人可以访问网络文件位置，让你的链接看起来像这样：

`<a href="file:///dmzwimkeweb01/securedocs/depositions/file a.pdf">My link</a>`

由于 URL 的规范与 Microsoft 的路径规范不同，因此斜线确实会“走错路”。希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:43:25.833

您是否尝试过“smb://dmzwimkeweb01/securedocs/depostions/file a.pdf”

# javascript - 将脚本附加到 visualforce 父页面

> ID：11196199
> 
> 赞同：0
> 
> 时间：2012-06-25T19:40:12.357
> 
> 标签：javascript, salesforce, visualforce

我已将我的 visualforce 页面添加到帐户页面，发现我只能设置固定高度。我为自动高度编写了 javascript 解决方案。我通过使用 {!REQUIRESCRIPT("my_scipt_here")} 添加新按钮添加到 parentAccount 页面的第一部分，我添加到 visualforce 页面的第二部分。

是否可以在不添加自定义按钮的情况下将 javascipt 添加到“父”帐户页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:02:16.887

请记住，页面布局上的 Visualforce 组件以 iframe 的形式出现。如果域匹配（可能是也可能不是） - 您可以将 JavaScript 从 iframe 注入到父级。

这可能会提供更多详细信息： [Inject javascript function into parent window from iframe](https://stackoverflow.com/questions/9539069/inject-javascript-function-into-parent-window-from-iframe)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T00:59:26.830

除了使用按钮（或者可能是作为字段的链接）之外，我不知道有任何方法可以在页面上运行 javascript，尽管很高兴知道是否有一个，但我非常怀疑它是否可用，或者如果支持，则支持。

使用完整的visualforce页面覆盖帐户视图页面是否是您使用`<apex:detail>`标签获取标准字段等的选项？

# jquery - 用于折叠的 Twitter Bootstrap Jquery 代码

> ID：11196200
> 
> 赞同：0
> 
> 时间：2012-06-25T19:40:14.617
> 
> 标签：jquery, twitter-bootstrap, collapse

我希望有人可以解释下面从 Twitter Bootstrap 获取的代码中发生的事情......

```
$(function () {
    $('body').on('click.collapse.data-api', '[data-toggle=collapse]', function ( e ) {
      var $this = $(this), href
        , target = $this.attr('data-target')
          || e.preventDefault()
          || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') //strip for ie7
        , option = $(target).data('collapse') ? 'toggle' : $this.data()
      $(target).collapse(option)
    })
  }) 
```

我在 jquery 中使用“on”点击，但在“click”之后从不使用点符号，从不使用 []

感谢您在弄清楚发生了什么方面提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:14:49.030

点表示法是一个命名空间。

```
$('#myElt').on('click.mynamespace',someFunction); // listening
$('#myElt').off('click.mynamespace'); // not listening any more 
```

例如，它允许您轻松地仅从一个命名空间中删除所有事件侦听器。

jQuery[文档](http://api.jquery.com/on/#event-names)。

* * *

第二个参数是`data-toggle`属性等于的所有元素的选择器`collapse`。[W3C 文档](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)和[jQuery 文档](http://api.jquery.com/category/selectors/attribute-selectors/)

这是它的使用示例

```
$('#myContainer').on('click','.child',someFunction); 
```

如果我没记错的话，这意味着任何指向一个元素的点击事件都会被*这个监听**器拦截*，不管这个元素是不是在绑定时创建的。并且回调将被调用。`.child`*`.child``someFunction`*

 *jQuery[文档](http://api.jquery.com/on/#direct-and-delegated-events)。*

# .net - 可能在另一个线程执行外部库中的方法时产生/睡眠/限制另一个线程 - 特别是侏罗纪？

> ID：11196201
> 
> 赞同：1
> 
> 时间：2012-06-25T19:40:22.970
> 
> 标签：.net, wpf, vb.net, multithreading, jurassic

我正在使用一个名为[Jurassic](http://jurassic.codeplex.com/)的 .Net JavaScript 实现在我用 VB.Net 编码的 .Net 4 WPF 应用程序中运行用户控制的脚本 - C# 答案很好。脚本引擎在自己的线程上运行，并为脚本提供 API 以与我的应用程序交互。在用户执行导致无限循环并取出处理器核心的脚本之前，这一切都非常有效。

在线程中运行的方法看起来像这样，但有更多不相关的位：

```
Sub run()   
    Do While True
        Try
            Do Until queue.Count = 0
                Dim functionName As String = queue(queue.Count - 1)
                queue.RemoveAt(queue.Count - 1)
                scriptEngine.CallGlobalFunction(functionName)
            Loop
            thread.Sleep(Timeout.Infinite)
        Catch ex As ThreadInterruptedException
            ' Wake and loop
        Catch ex As Exception
            ' Log
        End Try
    Loop
End Sub 
```

我在另一个线程上有一个监控类，它通过记录脚本引擎线程何时唤醒和睡眠并标记任何运行时间过长的线程来检测正在使用大量资源的脚本引擎线程。

一旦监视类标记了一个线程，我就有点卡住了。目前我向用户解释情况并给他们终止线程的选项。我使用 Thread.Abort() 执行此操作。但是，我宁愿让线程继续运行，但以某种方式阻止它使用这么多处理器时间。

这里的问题是，一旦线程处于这种状态，我就无法在线程上运行任何代码，因为在侏罗纪代码中的 CallGlobalFunction() 方法中发生了无限循环，所以我不能只将 Thread.Yield() 添加到循环中。我曾短暂考虑过破解侏罗纪代码，看看是否有任何方法可以做到，但这将非常困难，而且很可能是不可能的。

到目前为止，我能够与线程交互的唯一方法是使用如上所述的 Thread.Abort() 和已弃用的 Thread.Suspend()。

那么有什么方法可以在线程执行方法时产生线程，还是我只需要杀死它？

感谢您的帮助，我希望这是有道理的，
山姆。

**额外信息：**
我关心保持线程活跃的原因是因为编写脚本的用户和运行它的用户可能不一样，我希望让运行线程的用户尽可能保持流畅的体验. 也可能存在单个 JavaScript 函数会运行很长时间的合法情况，我不想杀死它，我只想停止被允许占用资源。

涉及停止线程以降低系统速度但仍显示高 CPU 使用率的解决方案并不可取，因为我不希望用户错误地认为应用程序是资源密集型的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:51:36.443

我认为您应该将线程优先级设置为`Lowest`. 这样它就不会从系统中夺走资源。

# packagemaker - 如何为插件（可执行包）包制造商的目的地提供相对路径？

> ID：11196207
> 
> 赞同：0
> 
> 时间：2012-06-25T19:40:40.270
> 
> 标签：packagemaker

从包制造商创建包时如何给出包目的地的相对路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:45:01.193

我不确定你的意思，但也许

```
cp -R ${BUILT_PRODUCTS_DIR}/${PRODUCT_NAME}.bundle ${SRCROOT}/${PRODUCT_NAME}.bundle 
```

是你想要的吗？`${SRCROOT}`可能是你正在寻找的。

我在我的构建脚本中使用它（对于[这个包](https://github.com/pooriaazimi/BetterDictionary/)）将创建的包复制到我的源目录（为了更容易访问，也因为我想要`zip`它）。

# c# - 获取处理程序抽象

> ID：11196210
> 
> 赞同：0
> 
> 时间：2012-06-25T19:40:50.407
> 
> 标签：c#, .net, asp.net-mvc, get, abstraction

我正在阅读如何[清理帖子功能](http://lostechies.com/jimmybogard/2011/06/22/cleaning-up-posts-in-asp-net-mvc/)，这个想法似乎非常有用。`IFormHandler`我通过添加更多方法并使类抽象来添加到 an 的想法。

```
public abstract class FormHandler<T>
{
    private readonly UnitOfWork unit;

    public FormHandler(UnitOfWork unit)
    {
        this.unit = unit;
    }

    protected UnitOfWork Unit
    {
        get
        {
            return this.unit;
        }
    }

    public virtual void PreValidation(ModelStateDictionary modelState, T form)
    {

    }

    public abstract void Handle(T form);

    public virtual void OnValidationFailure(T form)
    {

    }
} 
```

这对于后期功能非常有用，而且我的控制器更轻且更易于理解。我也想清理 GET 函数。有没有人已经尝试过这个或对如何使 GET 函数更清洁有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:49:17.557

我喜欢[这里提到的 IQueryProcessor 模式](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。Steven 还有一篇关于[实现 ICommandHandler 接口](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)的好文章，与您所做的类似，但使用依赖注入而不是具有继承方法的抽象类。

# mysql - 全局变量 MySQL

> ID：11196217
> 
> 赞同：0
> 
> 时间：2012-06-25T19:41:11.200
> 
> 标签：mysql, sql, database, variables

我有这个查询：

```
SELECT 
    qa_invoices.invoice_clientname, 
    (
        SELECT IFNULL(MIN(qa_returns.discount_code),1) 
        FROM qa_returns 
        WHERE qa_returns.invoice_code = qa_invoices.invoice_code 
        AND qa_returns.discount_code <> 1
    ) AS discount_code,
    qa_users.user_name,
    (0.00) AS previous_balance,
    (0.00) AS difference_to_be_paid,
    (0.00) AS client_credit,
    SUM(SubQueryAlias.item_discount) AS invoice_discount,
    SUM(SubQueryAlias.item_subtotal) AS invoice_subtotal,
    SUM(SubQueryAlias.item_total) AS invoice_total,
    DATE_FORMAT(qa_invoices.invoice_date,'%M %e, %Y @ %h:%i %p') AS returnlog_date 
FROM (
        SELECT  qa_returns_items.item_code, 
                qa_returns_items.item_subtotal, 
                qa_returns_items.item_discount, 
                qa_returns_items.item_total 
        FROM qa_returns_items 
        WHERE returnlog_code = (
                                    SELECT MIN(qa_returns.returnlog_code) 
                                    FROM qa_returns 
                                    WHERE qa_returns.invoice_code = 1
                                )
    UNION
        SELECT  qa_returns_residues.item_code, 
                qa_returns_residues.item_subtotal, 
                qa_returns_residues.item_discount, 
                qa_returns_residues.item_total 
        FROM qa_returns_residues 
        WHERE returnlog_code = (
                                    SELECT MIN(qa_returns.returnlog_code) 
                                    FROM qa_returns 
                                    WHERE qa_returns.invoice_code = 1
                                )
        ORDER BY item_code ASC
) AS SubQueryAlias, qa_invoices
LEFT JOIN qa_users USING(user_code)
WHERE SubQueryAlias.item_code NOT IN (
                        SELECT a.item_code 
                        FROM qa_returns_items a 
                        JOIN qa_returns_residues b 
                            ON b.item_code = a.item_code 
                        WHERE a.returnlog_code = (
                                                    SELECT MIN(qa_returns.returnlog_code) 
                                                    FROM qa_returns 
                                                    WHERE qa_returns.invoice_code = 1
                                                 )
                            AND b.returnlog_code = (
                                                    SELECT MIN(qa_returns.returnlog_code) 
                                                    FROM qa_returns 
                                                    WHERE qa_returns.invoice_code = 1
                                                   )
                        )
AND qa_invoices.invoice_code = 1; 
```

查询工作正常，但如果我们查看该值`invoice_code`设置了 5 次。我想知道是否有任何方法可以声明一个全局变量来为所有变量分配相同的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:44:21.363

当然，您可以使用[用户定义的变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)。

例如：

```
SET @invoice_code=1;

SELECT MIN(qa_returns.returnlog_code) 
FROM qa_returns 
WHERE qa_returns.invoice_code = @invoice_code 
```

# java - 如何在请求期间检查 JAAS 中的授权

> ID：11196218
> 
> 赞同：1
> 
> 时间：2012-06-25T19:41:13.733
> 
> 标签：java, servlets, jaas

我已经实现了 JAAS 提供的表单身份验证。由于我将所有页面作为模板处理，因此每次都必须评估代码。因此，当用户直接访问**/login**时，doGet 请求必须处理它并处理登录模板。

现在我想在登录成功后重定向到主页。当用户再次选择**/login**时，他/她应该被重定向到主页。

因此，我需要在 doGet 请求期间知道用户是否被授权，也许还有哪些身份验证。我该如何检查？还是这个成语错了？

* * *

或者这是由**request.isUserInRole(String role)**完成的？既然它同时进行，身份验证和授权？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:26:41.163

您可以通过检查[`HttpServletRequest#getRemoteUser()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRemoteUser%28%29)（用户名）或[`#getUserPrincipal()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getUserPrincipal%28%29)（关联`Princpal`对象）是否**不**返回来检查用户是否已登录`null`。

因此，例如在`doGet()`servlet中，`/login`您可以这样做：

```
if (request.getRemoteUser() != null) {
    // Already logged in, so redirect to some main page.
    response.sendRedirect(request.getContextPath() + "/main");
    return;
}

// ... 
```

[`#isUserInRole()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#isUserInRole%28java.lang.String%29)唯一检查登录用户是否具有某些特定角色，这通常仅用于限制特定角色的某些页面或页面部分。因此，除非您拥有一个由*每个*用户共享的通用角色，否则这是没有用的。

您可能只想添加一条消息来通知最终用户为什么他/她被重定向以及以其他用户身份再次登录的正确方法是什么。例如“您已经登录。如果您需要以其他用户身份登录，请先到注销页面。” 大约在基于某些重定向参数有条件地显示的主页中。

# google-apps-script - 将 getAuthors() 用于 Google Apps 脚本

> ID：11196220
> 
> 赞同：1
> 
> 时间：2012-06-25T19:41:26.583
> 
> 标签：google-apps-script, google-sites, google-sites-2016

Google Apps 脚本中的 getAuthors() 返回一个数组，所以我假设它旨在捕获所有编辑过该页面的人。但是，它只返回一个值，这似乎是创建页面的人。如果另一个人编辑该页面，它仍然返回一个仅包含第一个值的数组。

1.  getAuthor() 是否旨在仅限于创建者？
2.  有没有办法返回一个包含所有在页面上工作过的人（保存编辑的人）的数组？
3.  如果没有，是否可以更改作者？

    ```
    function testAuthor(){
      var site = SitesApp.getSite(DOMAIN, NAME);
      var decendents = site.getAllDescendants();

      for (var i=0;i<decendents.length; i++){
        Logger.log(decendents[i].getAuthors().join(', '));
      };
    } 
    ```

# php - 推荐的 mvc 文件夹结构中的 Zend Action Helper

> ID：11196221
> 
> 赞同：0
> 
> 时间：2012-06-25T19:41:28.437
> 
> 标签：php, model-view-controller, zend-framework, action, helper

Zend[建议](http://framework.zend.com/manual/en/project-structure.project.html)将 mvc 中的控制器动作助手放入`/application/controllers/helpers`. 这是使用这些的正确方法吗？

我必须在 bootstrap/application.ini 中实例化它们吗？

我的助手有一个直接的动作，被称为`Controllers_Helpers_Redirectlogin`.

感谢您的帮助，我很感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:32:51.207

遵循建议是好的。默认情况下，即使您引用的手册页指出，自动加载器似乎并未设置为默认查看推荐的路径：

> *controllers/helpers/*：这些目录将包含操作助手。动作助手将被命名为默认模块的“ **Controller_Helper_ ”或其他模块的“** **_Controller_Helper** ”。

为了解决这个问题，只需将其添加到您的`Bootstrap.php`文件中，向 HelperBroker 提示要查看的其他路径：

```
// for default module in a non-modular structure
Zend_Controller_Action_HelperBroker::addPath(
    APPLICATION_PATH . '/controllers/helpers',
    'Controller_Helper'
);

// for default module if using modular structure
Zend_Controller_Action_HelperBroker::addPath(
    APPLICATION_PATH . '/modules/default/controllers/helpers',
    'Controller_Helper'
);

// for "Admin" module when using a modular structure
Zend_Controller_Action_HelperBroker::addPath(
    APPLICATION_PATH . '/modules/admin/controllers/helpers',
    'Admin_Controller_Helper'
); 
```

另请注意，为了使自动加载器正常工作，您应该命名您的类`Controller_Helper_RedirectLogin`而不是`Controllers_Helpers_RedirectLogin`. 通常自动加载的类会去掉复数形式（例如`models/User.php`映射到`class Model_User`）。

编辑：您也可以告诉助手代理`application.ini`文件中的助手路径。例子：

```
; non-modular structure
resources.frontController.actionHelperPaths.Controller_Helper = APPLICATION_PATH "/controllers/helpers"

; "admin" module in a modular structure
resources.frontController.actionHelperPaths.Admin_Controller_Helper = APPLICATION_PATH "/modules/admin/controllers/helpers" 
```

# javascript - Javascript DatePicker 不起作用

> ID：11196223
> 
> 赞同：0
> 
> 时间：2012-06-25T19:41:53.930
> 
> 标签：javascript, datepicker

我无法让 jquery 的日期选择器在我的页面上工作。如果有人想要更多详细信息，我有一个关于 codecall 的论坛帖子。这是一个链接[http://forum.codecall.net/topic/70462-copy-and-paste-date-picker-javascipt/](http://forum.codecall.net/topic/70462-copy-and-paste-date-picker-javascipt/)。这是与此页面关联的我的代码。当我单击文本字段时，日期选择器不显示。为什么？任何人都可以看到问题吗？

```
<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="Stylesheet" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
$(function() {
$( "#start_date" ).datepicker();
});
$(function() {
$( "#end_date" ).datepicker();
});

<div id="dateField"> 
<p> 
Start Date: <input type="TEXT" 
name="start_date" id="startDate" 
value="" /> 
</p> 
<p> 
End Date: <input type="TEXT" 
name="end_date" id="endDate" 
value="" /> 
</p> 
<small>Dates Should be in the format DD/MM/YYYY</small> 
</p> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:45:53.507

将您的 jQuery UI 日期选择器代码包装在`<script>`标签中，并使用 type 属性将其标记为 javascript。为您的两个日期选择器调用使用单个文档就绪块。确保您使用正确的元素 ID。

```
<script type="text/javascript">
   $(document).ready(function() {

        $("#startDate").datepicker();
        $("#endDate").datepicker();
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:46:36.860

切换您的 ID 和名称标签。ID 属性必须在 $('ID').datepicker() 内部，而不是名称。

```
<link type="text/css" href="css/ui-lightness/jquery-ui-1.8.21.custom.css" rel="Stylesheet" />
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>

<script type="text/javascript">
$(function() {
$( "#start_date" ).datepicker();
});
$(function() {
$( "#end_date" ).datepicker();
});
</script>

<div id="dateField"> 
<p> 
Start Date: <input type="TEXT" 
id="start_date" name="startDate" 
value="" /> 
</p> 
<p> 
End Date: <input type="TEXT" 
id="end_date" name="endDate" 
value="" /> 
</p> 
<small>Dates Should be in the format DD/MM/YYYY</small> 
</p> 
</div> 
```

# html - 为anchor、li和span设置相同的高度

> ID：11196227
> 
> 赞同：3
> 
> 时间：2012-06-25T19:42:11.080
> 
> 标签：html, css

我正在尝试构建这样的屏幕：

![在此处输入图像描述](../Images/bf501a0b6bbe3a97d3c6b8c5d2e28741.png)

我怎样才能让我的跨度和锚元素的高度增长到与 li 相同的高度？

我已经从这个例子开始[http://jsfiddle.net/Gh6mB/1/](http://jsfiddle.net/Gh6mB/1/)

我的中心栏应该在高度和宽度上扩大。左列和右列应在高度上扩展，但应保持宽度固定。

我能做些什么来简化这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:44:59.567

我修改了 css 以匹配`<table><tbody><tr><td>`结构，因为你有一个四级嵌套。我必须在 the和s`div`之间的第一个表中添加一个包装器：`li``span`

[http://jsfiddle.net/Gh6mB/8/](http://jsfiddle.net/Gh6mB/8/)

```
#ListaEventosPorMes ul.vermelho {
    display: table;
}

#ListaEventosPorMes ul.vermelho li {
    display: table-row-group;
}

#ListaEventosPorMes ul.vermelho li div,
#ListaEventosPorMes ul.vermelho li a {
    display: table-row;
}

#ListaEventosPorMes ul.vermelho li   span {
    display: table-cell;
    height: 74px;    
} 
```

# ruby-on-rails - 使用关联数据发布 JSON

> ID：11196229
> 
> 赞同：2
> 
> 时间：2012-06-25T19:42:15.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, rest

我正在尝试向 Rails 脚手架控制器发送一个 POST 请求，该控制器包含一个嵌套数组，表示需要创建并与新创建的父级关联的记录。

下面是一些 JSON 示例：

```
{
    "plan_id":3,
    "weight":60,
    "exercise_sets": [
        {
            "created_at":"2012-06-13T14:55:57Z",
            "ended_at":"2012-06-13T14:55:57Z",
            "weight":"80.0",
            "repetitions":10,
            "exercise_id":1
        }
    ]
} 
```

..和我的模型..

```
class Session < ActiveRecord::Base
  has_many :exercise_sets, :dependent => :destroy
  has_many :exercises, :through => :exercise_sets
end

class ExerciseSet < ActiveRecord::Base
  belongs_to :exercise
  belongs_to :session
end 
```

我正在尝试的可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:59:13.683

这当然不是不可能的，尽管您可能需要稍微改变一下参数命名。

当您将上面的 JSON 传递给控制器​​时，它要么作为参数传递给构造函数：

```
Session.new(params[:session]) 
```

或者传递给持久会话实例上的 #update_attributes 方法：

```
@session = Session.find(params[:id])
@session.update_attributes(params[:session]) 
```

构造函数和#update_attributes 方法都将诸如“plan_id”之类的参数转换为分配方法调用。那是，

```
@session.update_attributes(:plan_id => "1") 
```

变成（在#update_attributes 方法内）：

```
@session.plan_id = "1" 
```

因此，这适用于您的 plan_id 和 weight 属性，因为您同时拥有 #plan_id= 和 #weight= setter 方法。您还有一个由`has_many :exercise_sets`. 但是，#exercise_sets= 方法需要练习集对象，*而不是练习集属性*。

Rails 能够通过#accepts_nested_attributes_for 类方法来做你想做的事情。试试这个：

```
class Session < ActiveRecord::Base
  has_many :exercise_sets, :dependent => :destroy
  has_many :exercises, :through => :exercise_sets

  accepts_nested_attributes_for :exercise_sets
end 
```

这会为您设置（元程序）#exercise_sets_attributes= 方法。因此，只需将您的 JSON 修改为：

```
{
    "plan_id":3,
    "weight":60,
    "exercise_sets_attributes": [
        {
            "created_at":"2012-06-13T14:55:57Z",
            "ended_at":"2012-06-13T14:55:57Z",
            "weight":"80.0",
            "repetitions":10,
            "exercise_id":1
        }
    ]
} 
```

更多信息：[http ://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:59:44.513

完全有可能，您只需在`Session`模型中添加以下行：

```
 accepts_nested_attributes_for :exercise_sets, :reject_if => lambda { |a| a[:exercise_id].blank? }, :allow_destroy => true 
```

现在，当您的控制器这样做时`Session.new(params[:session])`，Rails 将构建（或更新）`Session` *和*相关的`ExerciceSet`（S）。

请查看`:reject_if`条款。这就是您定义将创建哪些记录以及不创建哪些记录的地方。

[这是基础知识，但 Ryan Bates 在此截屏视频](http://railscasts.com/episodes/196-nested-model-form-part-1)中完美（一如既往）解释了嵌套模型形式。

# javascript - 如何通过 websockets 高效处理大量 HTML5 画布像素数据

> ID：11196230
> 
> 赞同：9
> 
> 时间：2012-06-25T19:42:16.630
> 
> 标签：javascript, canvas, compression, websocket, socket.io

> **可能重复：**
> [通过 websocket 接收图像](https://stackoverflow.com/questions/9292133/receiving-image-through-websocket)

使用

```
imageData = context.getImageData(0, 0, width, height);
JSON.stringify(imageData.data); 
```

我抓取像素数据，将其转换为字符串，然后通过 websockets 通过网络发送。但是，此字符串可能非常大，具体取决于画布对象的大小。我尝试使用此处找到的压缩技术：[JavaScript implementation of Gzip](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip) but socket.io throws the error `Websocket message contains invalid character(s).`Is there an effective way to compress this data so it can be sent over websockets?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T21:45:35.340

根据您想要的效率轴（带宽与 CPU 效率），我会推荐几种方法。

**选项 1：**您可以使用画布的 toDataURL 方法。这将返回画布图像数据的 base64 编码图像。它将使用您指定的图像格式（或默认为 PNG）进行压缩，并将预编码为 base64 以通过 WebSocket 发送。

```
canvas = document.getElementById("mycanvas");
b64png = canvas.toDataURL();

ws.send(b64png); 
```

**选项 2：**如果您可以容忍有损压缩，那么您可以通过 toDataURL 方法将图像请求为 base64 编码的 JPEG：

```
canvas = document.getElementById("mycanvas");
b64jpeg = canvas.toDataURL("image/jpeg");

ws.send(b64jpeg); 
```

**选项 3：**如果您使用的浏览器支持二进制 WebSocket 数据（Chrome、Firefox、IE 10），那么您可以直接通过 WebSocket 发送画布数组缓冲区

```
canvas = document.getElementById("mycanvas");
ctx = canvas.getContext('2d');
imgdata = ctx.getImageData(0,0, width, height).data; // This is a Uint8ClampedArray
ws.send(imgdata.buffer); // Send the ArrayBuffer from the Uint8ClampedArray 
```

选项 3 可能在带宽方面效率最低，但在客户端和服务器端的处理能力方面效率最高，因为图像数据是原始发送的，几乎不需要预处理/后处理。

带宽效率最高的选项可能是 #2，但在将图像数据转换为 JPEG 格式的过程中，您会损失一些图像质量。您甚至可以更进一步，将数据 base64 解码为数组缓冲区或 blob，然后通过二进制 WebSocket 发送，这样您就不会获得 33% 的 base64 带宽开销，但这会增加更多的 CPU 开销。

如果您想要有效的带宽而不损失任何图像质量，那么选项 #2 是您最好的选择。

*一些注意事项/注意事项*：

toDataURL 为 base64 数据添加前缀，如下所示：

```
"data:image/png;base64,iVBORw0KGgoAAAA..." 
```

数据 URL 格式的一个好处是您可以将整个内容粘贴到浏览器地址栏中，然后浏览器将呈现图像。

有关 toDataURL 的更多信息，请参阅[MDN 画布页面](https://developer.mozilla.org/en/DOM/HTMLCanvasElement)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T21:58:35.453

**最节省带宽的方法是发送照片，如数据是 JPEG 编码的二进制作为 blob**

您可以将`<canvas>`数据作为二进制 JPEG blob 获取：

[https://github.com/miohtama/Krusovice/blob/master/src/tools/resizer.js#L51](https://github.com/miohtama/Krusovice/blob/master/src/tools/resizer.js#L51)

（对于非照片类内容，您还可以获得 PNG blob）

Blob 始终是原始二进制文件，不涉及 UTF-8 或 base64 废话。

WebSocket.send() 支持 blob 作为输入：

[https://developer.mozilla.org/en/WebSockets/WebSockets_reference/WebSocket](https://developer.mozilla.org/en/WebSockets/WebSockets_reference/WebSocket)

HTTP Blob 发送：

[https://developer.mozilla.org/en/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data](https://developer.mozilla.org/en/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data)

您使用不同浏览器的里程可能会有所不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T21:04:02.693

我不同意关闭的尝试，因为您要求采用更有效的方式。我们至少可以帮助您想出一个更有效的方法。

这真的取决于你在做什么。你能让客户做更多的工作吗？

您真的必须发送*所有*画布像素数据吗？您可以只发送已更改的像素吗？（或者这几乎是全部？）

仅来回发送更改会将其推向计算问题，而不是大量数据传输问题。

* * *

根据您的应用程序，您能否跟踪已更改的区域？如果你有 2-3 个小矩形在画布上发生了变化，那么它应该比整个画布要小得多。

* * *

与任何效率问题一样，首先要问你是否做对了。您真的需要通过网络传输大量像素数据吗？通常使用画布，通过发送更改场景的命令在服务器上重新创建场景比通过位图本身发送更容易。Websockets 应该很适合这个。对于许多绘图应用程序和游戏来说，这可能是一个很好的解决方案，但同样取决于您在这里要完成的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T21:13:27.527

我意识到一种方法可以显着减少通过网络发送的数据。

该`getImageData`方法返回一个具有属性的对象，该`data`属性本身就是一个对象，其中键作为像素的索引，值作为单独的红色、绿色、蓝色或 alpha。键使对象变得非常大，特别是因为 300x300 画布对象将具有 300x300x4 = 360,000 个对象键/值对。

因此，通过仅提取颜色的值并将它们推入数组中：

```
function extractValues(obj){
  var array = [];
  for (var key in obj){
    array.push(obj[key]);
  }
  return array;
} 
```

我能够将数据减少 50% 以上，从而显着提升了性能。

# html - Struts html：具有不同操作的表单

> ID：11196232
> 
> 赞同：1
> 
> 时间：2012-06-25T19:42:26.083
> 
> 标签：html, forms, struts, submit, struts-action

我有一个基于 html:form 操作的带有提交的 jsp。

```
<html:form action="/nextPath"> 
```

我想根据变量或当前路径设置动作..等

```
<d:isActionPath path="/path1" >
    <html:form action="/nextPath1">
</d:isActionPath>

<d:isActionPath path="/path2" >
    <html:form action="/nextPath2">
</d:isActionPath> 
```

这不起作用。但这本质上是我想做的。

有什么建议么？对struts来说很新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:50:24.947

```
<d:isActionPath path="/path1" >
    <c:set var="theAction" value="/nextPath1"/>
</d:isActionPath>

<d:isActionPath path="/path2" >
    <c:set var="theAction" value="/nextPath2"/>
</d:isActionPath>

<html:form action="${theAction}">
    ...
</html:form> 
```

JSP 标记必须正确平衡，就像在 XML 文档中一样。您无法在未关闭标签的情况下打开标签`d:isActionPath`、打开标签`html:form`和关闭标签。`d:isActionPath``html:form`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:40:21.650

我有一个类似的问题：

> 无法检索操作 /${theAction} 的映射

我用 <%= theAction %> 替换了*$* *{theAction}* ，它对我有用（struts 1.2.9、J2SE-1.5 和 jboss-4.2.3.GA）。

 *因此，您可以尝试以下方法：

```
<% String theAction = "/nextPath"; %>
<d:isActionPath path="/path1" >
    <% theAction = "/nextPath1"; %>
</d:isActionPath>

<d:isActionPath path="/path2" >
    <% theAction = "/nextPath2"; %>
</d:isActionPath>

<html:form action="<%= theAction %>">
    ...
</html:form> 
```

编辑：实际上我很困惑，为什么它使用***<%= %>***符号？是因为没有正确解释***html***标签吗？*

# javascript - 使用 jquery 克隆表单字段

> ID：11196237
> 
> 赞同：0
> 
> 时间：2012-06-25T19:42:57.110
> 
> 标签：javascript, jquery, html, clone

我正在尝试使用 Jquery 克隆表单中的字段。

我试图在显示方面实现以下目标：

```
SELECT     SELECT     TEXT INPUT
RADIO      RADIO      RADIO  

Clone 1
SELECT     SELECT     TEXT INPUT
RADIO      RADIO      RADIO

Clone2
SELECT     SELECT     TEXT INPUT
RADIO      RADIO      RADIO

What I end up getting is:
RADIO   RADIO    RADIO 
RADIO   RADIO    RADIO 
RADIO   RADIO    RADIO 
SELECT     SELECT     TEXT INPUT
SELECT     SELECT     TEXT INPUT
SELECT     SELECT     TEXT INPUT 
```

在下面的代码中，我使用了 .after 函数来跟随 Select 选项，但它仍然显示在上面

$('#condition' + num).after(newElem); // 在最后一个“可复制”输入字段之后插入新元素 $('#logical' + num1).after(newElem);

演示在 Jsfiddle [http://jsfiddle.net/noscirre/ATzBA/](http://jsfiddle.net/noscirre/ATzBA/)

**HTML**

```
<table width="100%" cellspacing="4" cellpadding="5" border="0">
          <tbody><tr id="logical1" class="clonedInput1">
              <td class="first-column">&nbsp;</td>
              <td><input type="radio" name="logicalOperator" default>
                AND    &nbsp; &nbsp;
                <input type="radio" name="logicalOperator" >
                OR    &nbsp; &nbsp;
                <input type="radio" name="logicalOperator" >
                NOT
                </td>
            </tr>
            <tr id="condition1" class="clonedInput">
              <td class="first-column">Condition #2</td>
              <td><span style="float:left; padding-right: 10px;">
                <select id="firstname" name="firstname" class="standard_select" style="width:147px; background:#fff;">
                   <option>Blah Name</option>
                   <option>Blah list</option>
                   <option>Blah Type</option>
                   <option>Blah Id</option>
                   <option>Blah Name</option>

                </select>&nbsp;<select id="firstname" name="firstname" class="standard_select" style="width:147px;">
                  <option>Equals =</option>
                  <option>Not Equal &lt;&gt;</option>
                  <option>Greater &gt;</option>
                  <option>Less &lt;</option>
                  <option>Contains</option>
                  <option>In</option>
                  <option>Not In</option>
                </select>&nbsp;<input type="text" id="conValue" name="conValue" class="short_input" value="" style="width:147px;">
                </span>
                </td>
</tr>
<tr>
              <td class="first-column">&nbsp;</td>
              <td>
<div>
                    <input type="button" id="btnAdd" value="Add" />
                    <input type="button" id="btnDele" value="Del" />
                </div>    
                </td>
</tr></tbody>
</table> 
```

**JAVASCRIPT**

```
​`            $('#btnAdd').click(function() {
                var num     = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
                var num1     = $('.clonedInput1').length; // how many "duplicatable" input fields we currently have

                var newNum  = new Number(num + 1);      // the numeric ID of the new input field being added
                var newNum1  = new Number(num1 + 1);      // the numeric ID of the new input field being added

                // create the new element via clone(), and manipulate it's ID using newNum value
                var newElem = $('#condition' + num).clone().attr('id', 'condition' + newNum);
                // create the new element via clone(), and manipulate it's ID using newNum value
                var newElem1 = $('#logical' + num1).clone().attr('id', 'logical' + newNum1);

                // manipulate the name/id values of the input inside the new element
                newElem.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
                // manipulate the name/id values of the input inside the new element
                newElem.children(':first').attr('id', 'name' + newNum1).attr('name', 'name' + newNum1);

                // insert the new element after the last "duplicatable" input field
                $('#condition' + num).after(newElem);
                // insert the new element after the last "duplicatable" input field
                $('#logical' + num1).after(newElem1);

                // enable the "remove" button
                $('#btnDele').attr('disabled','');

                // business rule: you can only add 5 names
                if (newNum == 5)
                    $('#btnAdd').attr('disabled','disabled');
                    // business rule: you can only add 5 names
                if (newNum1 == 5)
                    $('#btnAdd').attr('disabled','disabled');
            });

            $('#btnDele').click(function() {
                var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
                var num1 = $('.clonedInput1').length; // how many "duplicatable" input fields we currently have
                $('#condition' + num).remove();     // remove the last element
                $('#logical' + num).remove();     // remove the last element

                // enable the "add" button
                $('#btnAdd').attr('disabled','');

                // if only one element remains, disable the "remove" button
                if (num-1 == 1)
                    $('#btnDele').attr('disabled','disabled');
                if (num1-1 == 1)
                    $('#btnDele').attr('disabled','disabled');
            });

            $('#btnDele').attr('disabled','disabled');

​` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:54:35.960

newElem1 插入到logicalxxx 项之后，也就是最后插入的条件项之前。如果你更换

```
 // insert the new element after the last "duplicatable" input field
            $('#condition' + num).after(newElem);
            // insert the new element after the last "duplicatable" input field
            $('#logical' + num1).after(newElem1); 
```

和

```
 $('#condition' + num).after(newElem).after(newElem1); 
```

newelem1 直接插入 newelem 之后，我认为这会产生预期的效果（更新的小提琴：http: [//jsfiddle.net/ATzBA/2/](http://jsfiddle.net/ATzBA/2/)）

# java - 如何使用反射确定字段类型是否为列表（或任何其他类型的集合）？

> ID：11196239
> 
> 赞同：1
> 
> 时间：2012-06-25T19:42:59.673
> 
> 标签：java, reflection, collections

我有类似的东西：

```
Field [] fields = claz.getDeclaredFields();
 for(Field f : fields){
    f.setAccessible(true);
    if(f.getType().equals(List.class)){
        Method m = f.getType().getMethod("size");
        int length = (Integer)m.invoke(f.get(node));
        System.out.println("length "+ length);
        }
} 
```

它确实有效，但我想知道是否有任何其他好的方法，比如适用于所有其他集合（TreeSet、HashSet 等）的方法，或者唯一的方法是，我必须检查对于我已经拥有的每种类型？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:46:55.693

您是否考虑过检查该类型是否实现了 Map 或 Collection 接口？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:47:14.200

在一个`Field`对象中，您可以检索 Type 并将其作为参数传递`isAssignableFrom`给`Collection.class`.

像：

```
...
boolean isCollection = Collection.class.isAssignableFrom(f.getType())
... 
```

从文档中获取方法`isAssignableFrom`：

> 确定此 Class 对象表示的类或接口是否与指定的 Class 参数表示的类或接口相同，或者是其超类或超接口。如果是，则返回 true；否则返回false。如果此 Class 对象表示原始类型，则如果指定的 Class 参数正是此 Class 对象，则此方法返回 true；否则返回false。

也应该这样做`Map`：

```
boolean isMap = Map.class.isAssignableFrom(f.getType()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:50:32.997

`Collection.class.isAssignableFrom(f.getType())` 将适用于所有集合类型 - 列表和集合的所有实现。

`Maps`但是，必须单独检查，因为它们不实现`Collection`接口。

# php - 如何使用php从html内容中删除链接

> ID：11196244
> 
> 赞同：3
> 
> 时间：2012-06-25T19:43:27.253
> 
> 标签：php, html, preg-replace

我有以下html内容：

```
<p>My name is <a href="way2project">way2project</a></p> 
```

现在我想要这个文本`<p>My name is way2project</p>`

有没有办法做到这一点？请帮帮我谢谢

我使用了 preg_replace 但徒劳无功。

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:45:41.170

您可以使用[带标签](http://php.net/manual/en/function.strip-tags.php)功能

```
$string = '<p>My name is <a href="way2project">way2project</a></p>';

echo strip_tags($string,'<p>'); 
```

请注意，第二个参数是您不会忽略的允许标签列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:46:16.083

签出[简单的 Html Dom 解析器](http://simplehtmldom.sourceforge.net/)

```
$html = str_get_html('<html><body>Hello!<a href="http://stackoverflow.com">SO</a></body></html>');
echo $html->find('a',0)->innertext; //prints "SO" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:46:18.613

这看起来很奇怪，但不知道您的问题的完整范围并看到您想在 PHP 中执行此操作，您可以尝试：

```
$origstring = '<p>My name is <a href="way2project">way2project</a></p>';
$newstring = str_replace('<a href="way2project">way2project</a>', 'way2project', $origstring);

echo $newstring; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:46:16.630

[strip_tags](http://www.php.net/manual/en/function.strip-tags.php)您可以使用它来删除 html 标签。

# ios - 如果提要还没有上线，苹果可以审查我的应用程序吗？

> ID：11196251
> 
> 赞同：0
> 
> 时间：2012-06-25T19:44:23.163
> 
> 标签：ios, iphone, app-store

我需要向 Apple 应用商店提交我的应用的新版本。我的应用基于 JSON 提要。问题是新应用程序适用于新版本的提要，但是当当前提要仍然适用于当前应用程序时，无法发布新版本的提要。所以我的问题是苹果如何审查我的应用程序？即使提要没有上线，Apple 会批准我的应用程序吗？我的想法是提交应用程序以供审核，即使它不起作用，如果获得批准，则启动新提要并删除旧提要。关于如何解决这个问题的任何建议？另一个想法可能是提交应用程序，并且在排队期间保持旧提要有效，并在 4 天后启动新提要（以便 Apple 可以审查该应用程序），在这种情况下，该应用程序将无法运行几个天。谢谢

弗朗切斯科

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T19:51:28.120

简短回答：不，您的应用将被拒绝。

更长的答案：

您应该提供一种方法，以使当前（过去版本）提要至少与新提要一起工作一段时间，否则不更新应用程序的人（您无法控制）将拥有一个不更新应用程序的应用程序不行。

您可以/应该做的是在一个 url (yourhost.com/feed) 上保留以前的版本，在另一个 url (yourhost.com/feed/v2/) 上保留新版本。

在内部，您可以只保留一个版本，即较新的版本，然后使用某种外观/转换器来处理从新模式到旧模式的转换。这样，您只需要维护一个版本的代码，同时为两个版本的应用程序提供工作方式。

如果 Apple 测试人员发现您的应用程序没有内容，您的应用程序将被拒绝。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T19:46:50.577

我有一个应用程序因为“没有准备好生产”而被拒绝，因为它非常相似。

# vb.net - 读取特定行

> ID：11196257
> 
> 赞同：-1
> 
> 时间：2012-06-25T19:44:50.293
> 
> 标签：vb.net

我想从 html 源代码中读取特定的行。我将源存储到一个字符串文件中，我想读取 X 行。所以我使用我在网上找到的这种方法

```
Public Shared Function ReadSpecifiedLine(file As String, lineNum As Integer) As String
    Dim contents As String = String.Empty
    Try
        Using stream As New StreamReader(file)
            contents = stream.ReadToEnd()
            Dim linesArray As String() = contents.Split(New Char() {ControlChars.Lf})

            If linesArray.Length > 1 Then
                If Not lineNum > linesArray.Length AndAlso Not lineNum < 0 Then
                    Return linesArray(lineNum)
                Else
                    Return linesArray(0)
                End If
            Else
                Return contents
            End If
        End Using
    Catch ex As Exception
        Return ex.ToString()
    End Try
End Function 
```

例如，我试图阅读第 4 行并收到此错误。

> System.ArgumentException：路径中有非法字符。在 System.IO.Path.CheckInvalidPathChars(String path, Boolean checkAdditional) 在 System.IO.Path.GetFileName(String path) 在 System.IO.StreamReader..ctor(String path, Encoding encoding, Boolean detectEncodingFromByteOrderMarks, Int32 bufferSize, Boolean checkHost) 在 System.IO.StreamReader..ctor(String path) 在 C:\Users\Optimus\documents\visual studio 2012\Projects\WindowsApplication1\WindowsApplication1\Form1 中的 WindowsApplication1.Form1.ReadSpecifiedLine(String file, Int32 lineNum)。 VB：第 48 行

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:10:00.047

您发布的方法假定您正在传递文件路径。如果要更改它以接受实际的文件内容，而不是文件路径，则可以通过删除流对象来简化方法：

```
Public Shared Function ReadSpecifiedLine(contents As String, lineNum As Integer) As String
    Dim linesArray As String() = contents.Split(New Char() {ControlChars.Lf})
    If linesArray.Length > 1 Then
        If Not lineNum > linesArray.Length AndAlso Not lineNum < 0 Then
            Return linesArray(lineNum)
        Else
            Return linesArray(0)
        End If
    Else
        Return contents
    End If
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:55:25.117

看起来您正在传递文件的内容而不是文件的路径。

看看你用来调用这个函数的代码而不是这个函数本身会很有用。

# python - Pypy 是否支持 PyTables 和 Numpy？

> ID：11196258
> 
> 赞同：1
> 
> 时间：2012-06-25T19:44:52.700
> 
> 标签：python, cython, pypy, pytables, psyco

如果没有，是否有任何方法可以加快我的 python 代码以在 64 位系统上访问 pytables（所以没有 psyco）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:28:27.823

有一些支持 numpy。运行 pypy 1.9 我在导入 numpy 时收到以下消息：

> ImportError：PyPy 的“numpy”模块正在开发中且不完整。无论如何要尝试一下，您可以从“numpypy”导入，或者只在程序中先写“import numpypy”，然后像往常一样从“numpy”导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:52:05.617

没关系...

[https://bitbucket.org/pypy/compatibility/wiki/Home](https://bitbucket.org/pypy/compatibility/wiki/Home)

答案是不。:(

# ios - iOS 应用内购买 - 判断用户是否购买的最佳方式

> ID：11196260
> 
> 赞同：5
> 
> 时间：2012-06-25T19:45:17.670
> 
> 标签：ios, persistence, in-app-purchase

当用户进行应用内购买时，我需要设置一个全局变量。我可以使用 NSUserDefaults，并且只有一个名为“Purchased”的密钥，但这似乎不太安全。

安全存储数据以便我知道用户是否进行购买的最佳方式是什么？

例如，在特定视图中，我需要知道是否显示“购买”按钮。显然，如果他们已经进行了购买，则应该将其隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:14:51.770

对于安全数据，您应该使用 iOS 钥匙串。这是文档：

[http://developer.apple.com/library/mac/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:18:09.450

无需存储该信息。有一种方法可以恢复所有用户购买。寻找[restoreCompletedTransactions](http://developer.apple.com/library/mac/#documentation/StoreKit/Reference/SKPaymentQueue_Class/Reference/Reference.html)。

您可以在视图中检查用户的所有购买，然后为所有仍可购买的物品显示“购买”按钮。

**更新**：

哦！我误解了你的问题。例如，在重新安装应用程序的情况下，上述方法将为您提供用户购买的信息。关于您的问题，存储与购买的产品相关的信息`NSUserDefaults`以向用户提供商品、级别或他支付的任何东西是完全可以的。

我推荐[这个](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)分步教程，它帮助我实施应用内购买来回答你的所有问题。

# c++ - 嵌套模板专业化

> ID：11196261
> 
> 赞同：0
> 
> 时间：2012-06-25T19:45:18.457
> 
> 标签：c++, templates, template-specialization, explicit-specialization

我有一个模板类，当模板参数与类的类型相同时，它需要一个专门的构造函数。下面的代码不会编译。

当类型为 Dual 时，指定使用特定构造函数的正确语法是什么？特别是，当模板参数的类型为 Dual 时，我需要在初始化器列表中初始化成员 'real'，但如果不是（例如 double 类型）则不需要。

```
template<class X> class Dual {
 public:
  X real;
  size_t N;
  std::vector<X> imag;//don't know N at compile time

  Dual(size_t _N);

};

template <class X>
inline Dual<X>::Dual(size_t _N):  N(_N), imag(N, 0.0)  {}

template <class X>
inline Dual<Dual<X> >::Dual(size_t _N): real(_N), N(_N), imag(_N, 0.0) {}
//syntax error:  
//error: cpptest.cpp:20:24: error: C++ requires a type specifier for all declarations
//inline Dual<Dual<X> >::Dual(size_t _N): real(_N), N(_N), imag(_N, 0.0) {}
//~~~~~~ 

int main(){

  Dual <double> a(5);
  Dual< Dual < double>> b(5);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:02:47.670

你可以为你的构造函数提供一个可选的第二个参数来初始化`real`。

```
template<class X> class Dual {
public:
  X real;
  size_t N;
  std::vector<X> imag;
  Dual(size_t _N, X x = X());
};

template <class X>
inline Dual<X>::Dual(size_t _N, X x):  real(x), N(_N), imag(N, 0.0)  {} 
```

现在，当你有你的 special 时`Dual`，你可以通过传入一个“原型”以你想要的方式初始化它。

```
Dual<double> a(5);
Dual< Dual<double> > b(5, a); 
```

好处是你只需要声明一个`template`。但是，如果您创建了 的特化`Dual< Dual<X> >`，那么您可以像尝试过的那样定义构造函数（除了`imag`初始化错误，并在下面更正）。

```
// Specialize Dual<T> in the case T is a Dual<X>
template <class X> class Dual< Dual<X> > {
public:
    Dual<X> real;
    size_t N;
    std::vector< Dual<X> > imag;
    Dual(size_t _N);
};

template <class X>
inline Dual< Dual<X> >::Dual(size_t _N)
    : real(_N), N(_N), imag(N, Dual<X>(_N)) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:17:01.300

您不能提供非类型模板的部分特化，其中包括您的构造函数。

# ajax - 如何在 HTML 页面上对图像进行 ajax 发布？

> ID：11196262
> 
> 赞同：0
> 
> 时间：2012-06-25T19:45:20.780
> 
> 标签：ajax, image, jquery, post

我正在使用 Alex Michael 出色的 javascript [filtrr 库](http://alexmic.github.com/filtrr/) 来允许我在 HTML 页面上操作图像。我的问题是如何对页面上已内联过滤的图像进行 ajax/jquery 发布？例如：

```
<div>
<img id="myimage" />
</div>
<input type="button" onclick="filterImage();" /> 
```

过滤完成后，如何将 id 为“myimage”的图像内容发布回服务器端 PHP 脚本，以便保存过滤后的图像？我看到的做 ajax 图像 POST 的教程都使用了文件上传器，这不是我想要的。我想从 HTML DOM 发布图像。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:50:36.227

由于您使用的库使用 Canvas 元素，因此此处的解决方案应适用： [将“画布”图像数据上传到服务器](https://stackoverflow.com/questions/1590965/uploading-canvas-image-data-to-the-server)

# sqlite - Python：执行 SQLite 语句时的无限循环

> ID：11196266
> 
> 赞同：0
> 
> 时间：2012-06-25T19:46:14.790
> 
> 标签：sqlite, python-2.7

我有这 2 个 SQLite 脚本：都通过直接输入 SQLite 进行测试。

```
 def getOutgoingLinks(self, hostname):
    t = (hostname,)
    result = self.__cursor.execute("SELECT url.id, hostname.name, url.path, linking_to.keyword, siteId.id " +
                                    "FROM url, hostname, linking_to, " +
                                    "(SELECT url.id FROM url, hostname " +
                                    "WHERE hostname.name = (?) " +
                                    "AND hostname.id = url.hostname_id " +
                                    ") AS siteId " +
                                    "WHERE linking_to.from_id = siteId.id " +
                                    "AND linking_to.to_id = url.id " +
                                    "AND url.hostname_id = hostname.id", t)        
    result = result.fetchall()
    return result

def getIncommingLinks(self, hostname):
    t = (hostname,)
    result = self.__cursor.execute("SELECT url.id, hostname.name, url.path, linking_to.keyword, siteId.id " +
                                    "FROM url, hostname, linking_to, " +
                                    "(SELECT url.id FROM url, hostname " +
                                    "WHERE hostname.name = (?) " +
                                    "AND hostname.id = url.hostname_id " +
                                    ") AS siteId " +
                                    "WHERE linking_to.to_id = siteId.id " +
                                    "AND linking_to.from_id = url.id " +
                                    "AND url.hostname_id = hostname.id", t)
    result = result.fetchall()
    return result 
```

该`getIncommingLinks()`方法效果很好，但是`getOutgoingLinks()`当 python 尝试执行 SQL 语句时会导致无限循环。任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-28T19:17:18.270

如果通过无限循环你的意思是函数永远不会返回一个值，我有同样的问题。

在[为什么 python+sqlite3 非常慢？](https://stackoverflow.com/q/17426087/3894804). 对于大型表，python 2.7 附带的版本会成为性能问题。我通过按照此处指定的升级 sqlite3 解决了这个问题：[https ://stackoverflow.com/a/3341117/3894804](https://stackoverflow.com/a/3341117/3894804)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T08:55:55.510

在没有 select ...( Select ...) 的情况下重写您的 Select 语句 - 这是非常糟糕的风格。结果可能会解决您的问题。

# jquery - jQuery：滚动到 - 更改 div ID

> ID：11196270
> 
> 赞同：1
> 
> 时间：2012-06-25T19:46:27.350
> 
> 标签：jquery, css, html, scroll, scrollto

我对 jQuery 有疑问，我想在滚动条为 20px 时更改一个 DIV（不是 DIV 的内容，而是 DIV NAME div id="DIVNAME"）。

在滚动条 = 20px 之前：

> divname { 宽度：1012px; 边距：25px 自动 0 自动；高度：50px；}

滚动条 + 20px 之后：

> divname2 { 宽度：1012px; 边距：25px 自动 0 自动；高度：50px； **位置：固定；** }

我的具体情况：

[图片 http://i.minus.com/jjjWR2hKWhhFw.jpg](http://i.minus.com/jjjWR2hKWhhFw.jpg)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:48:26.503

您可以这样做，例如向父级添加一个类以`div`使其固定。将很快发布代码和小提琴。

是的，完成了代码：

## JavaScript

```
$(document).ready(function(){
    $(window).scroll(function(){
       if($(".check").offset().top < $(window).scrollTop())
           $(".check").addClass("fixed");
        else
           $(".check").removeClass("fixed"); 
    });
});​ 
```

## CSS

```
​ul, ol, p, li {padding: 5px 0;}
h1 {font: 2em Tahoma bold; text-align: center;}
div.check.fixed h1 {position: fixed; top: 0; width: 100%; background: #fff;} 
```

## HTML

```
<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

<div class="check">
    <h1>To be fixed!</h1>
</div>

<ul>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ul>

<p>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).</p>

<ol>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ol>

<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of "de Finibus Bonorum et Malorum" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, "Lorem ipsum dolor sit amet..", comes from a line in section 1.10.32.</p>

<p>The standard chunk of Lorem Ipsum used since the 1500s is reproduced below for those interested. Sections 1.10.32 and 1.10.33 from "de Finibus Bonorum et Malorum" by Cicero are also reproduced in their exact original form, accompanied by English versions from the 1914 translation by H. Rackham.</p>​ 
```

## 小提琴

[在http://jsfiddle.net/ekeSL/](http://jsfiddle.net/ekeSL/)上观看直播

## 更改名称`div`

不建议更改`id`. `div`但是如果你坚持，你可以这样做：

```
$("div").attr("id", "newId"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:52:22.543

如果您要更改的只是`position`，添加类或附加 css 属性可能会更容易。

```
if (scrollbar > 20px)
    $("#divname").css("position" : "fixed"); 
```

# java - 编写用于分析Java源代码的eclipse插件我必须知道哪一部分？

> ID：11196278
> 
> 赞同：1
> 
> 时间：2012-06-25T19:47:02.807
> 
> 标签：java, eclipse-plugin, code-analysis, static-analysis

我想写一些插件来分析Java源代码。我必须知道eclipse插件的哪一部分？我知道这是一个愚蠢的问题，但我真的不知道我必须从哪里开始，而且我没有太多时间。我不是真正的程序员，我是电脑维修技术员。所以我只能在业余时间写插件（我喜欢它）。

如果有人给我一些指点，我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T19:54:30.570

你需要掌握很多东西——`Builder`挂钩到增量构建过程并在文件更改时收到通知的 API、`IResource`获取源文件的类型层次结构、Java AST 类（其中有很多），关于类型绑定等的一些怪癖。没有简单的指针可以给出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:32:22.243

我不是故意在上面刻薄。因此，我首先建议您了解 Eclipse 架构、插件模型和 API。这是一个旧的但仍然相关的教程：

[http://eclipsepluginsite.com/#](http://eclipsepluginsite.com/#)

它根本不涉及 JDT，但确实让您大致了解 Eclipse 插件。因此，一旦您理解了该教程，您就可以继续学习 JDT：

[http://www.vogella.com/articles/EclipseJDT/article.html](http://www.vogella.com/articles/EclipseJDT/article.html)

# git - 是否可以使用 magit 进一步拆分块？

> ID：11196294
> 
> 赞同：3
> 
> 时间：2012-06-25T19:48:11.797
> 
> 标签：git, emacs, magit

> **可能的重复：**
> [用 magit 分割一个大块](https://stackoverflow.com/questions/9521929/splitting-a-hunk-with-magit)

当您查看更改部分时，您会像默认情况下那样获得块，例如“git add -p”，但我找不到通过选择“s”将块拆分为更小的块的选项使用 -p 发出命令时的选项，有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:08:18.933

正如上面的 phils 所指出的，这是[Splitting a hunk with magit](https://stackoverflow.com/questions/9521929/splitting-a-hunk-with-magit)的副本。

他在那里的解决方案对我很有用：

“您还可以使用`-`and`+`来减少或增加 diff 中大块的程度（和`0`重置）”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:55:47.433

您可以使用“e”手动拆分它。它将使用说明打开您的标准编辑器。

# web-services - Webservice 响应以 --UUID 结尾

> ID：11196295
> 
> 赞同：0
> 
> 时间：2012-06-25T19:48:13.553
> 
> 标签：web-services, cxf

我正在使用 cxf 框架来公开一些 Web 服务。当我使用soap-ui对其进行测试时，效果很好。但是我们的一位使用不同soap客户端的客户抱怨消息以：

> /肥皂：信封>
> 
> --uuid:91c5694a-93f5-404c-ab2b-8c220b7f289f--

我在网上搜索，我发现这条线不仅出现在我们的系统中。但我无法弄清楚这个后缀是否有效且格式正确。

是否有任何参考资料记录了这个问题？它真的有效吗？我怎样才能删除它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:01:19.233

听起来您在服务器端启用了 MTOM。在这种情况下，SOAP 消息被包装在 mime 包装器中（符合规范）。--uuid 是 mime 部分的标记。如果客户端有这些问题，那么听起来客户端无法处理 MTOM。您可以为这些客户关闭 MTOM。

# c# - 对于 Assembly.Location，什么决定值是本地路径还是 UNC 路径？

> ID：11196296
> 
> 赞同：0
> 
> 时间：2012-06-25T19:48:14.143
> 
> 标签：c#, .net

我正在尝试获取程序集的物理路径并正在使用 Assembly.Location [[MSDN]](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.location.aspx)。我的问题是什么决定了返回的是本地路径还是 UNC 路径？我只想要本地路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:10:19.383

来自 CodeBase 上的 MSDN，这里是：[Assembly.CodeBase 上的 MSDN](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.codebase.aspx)

> CodeBase 是指向文件所在位置的 URL，而 Location 是实际加载文件的路径。例如，如果程序集是从 Internet 下载的，则其 CodeBase 可能以“http://”开头，但其 Location 可能以“C:\”开头。如果文件是影子复制的，则 Location 将是影子复制目录中文件副本的路径。
> 
> 还很高兴知道，不能保证为 GAC 中的程序集设置 CodeBase。但是，将始终为从磁盘加载的程序集设置位置。

从这个小例子可以看出，UNC 不用于本地程序集，即使是 GAC 中的程序集：

```
public void WriteAssemblyLocations()
{
    Assembly[] assList = AppDomain.CurrentDomain.GetAssemblies();
    foreach (Assembly assembly in assList)
    {
        Console.WriteLine(assembly.Location);
    }
} 
```

# java - 在另一个时区将 java.sql.Timestamp 转换为 java.sql.Timestamp

> ID：11196302
> 
> 赞同：2
> 
> 时间：2012-06-25T19:48:42.990
> 
> 标签：java, java.util.date, timestamp-with-timezone

我需要在 java.sql.Timestamp 上进行操作。

函数的输入是： java.sql.Timestamp 中的格式化日期时间 [可能的日期格式有：MM/dd/yyyy hh:mm:ss aa、MM/dd/yyyy hh:mm:ss、MM/dd/yyyy hh： mm aa、MM/dd/yyyy HH:mm、MM/dd/yy hh:mm aa、MM/dd/yy HH:mm、MM/dd/yyyy 等]

所需输出：另一个时区中的 java.sql.Timestamp 与输入格式相同的 DateTime

所以基本上我需要在 java.sql.Timestamp 中更改 DateTime 的时区

我看过其他帖子，其中提到使用 JODA，但由于某些限制，我无法使用它。

我试过 - 将 java.sql.Timestamp 转换为 java.date.Calendar， - 然后更改时区， - 然后将其转换为日期 - 将日期格式化为相同的格式化日期时间

请看下面的代码：

```
Timestamp ts = "2012-06-20 18:22:42.0";  // I get this type of value from another function
Calendar cal = Calendar.getInstance();
cal.setTime(ts);
cal.add(Calendar.HOUR, -8);
String string = cal.getTime().toString();     // return value is in " DAY MMM dd hh:mm:ss PDT yyyy " format i.e. Wed Jun 20 10:22:42 PDT 2012
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss");  // This could be any format required
Date date;
try {
   date = formatter.parse(string);             // I am getting exception here on parsing 
} catch (ParseException e1) {
   e1.printStackTrace();
} 
```

谁能告诉我这里出了什么问题，或者还有其他方法可以在 Timezone 上操作 java.sql.Timestamp 吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-04-06T01:34:45.907

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:29:07.053

我解决了，我把代码供参考。

```
Timestamp ts = "2012-06-20 18:22:42.0"; // input date in Timestamp format
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
Calendar cal = Calendar.getInstance();
cal.setTime(ts)
cal.add(Calendar.HOUR,-7); // Time different between UTC and PDT is -7 hours
String convertedCal = dateFormat.format(cal.getTime());  // This String is converted datetime
 /* Now convert String formatted DateTime to Timestamp*/
SimpleDateFormat formatFrom = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
try {    
    Date date = formatFrom.parse(convertedCal);
    Timestamp finalTS = new Timestamp(date.getTime()); // Final value in Timestamp: 2012-06-20 11:22:42.0
} catch (Exception e) {
    e.printStackTrace();            
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:01:35.643

你错过了 formatter.parse 中的一个参数 [http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#parse(java.lang.String,%20java.text.ParsePosition )](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:03:09.230

你不能简单地：

1.  以毫秒为单位获取原始时间
2.  将时区差异转换为毫秒
3.  添加或减去原始时间的差值。
4.  使用新时间（以毫秒为单位）创建新时间戳

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T03:33:15.070

将时间戳视为一个固定的时间点，与您碰巧在看时钟的地方断开连接。

如果您想在特定时区的那个时刻显示某人的日历/时钟上的内容，您可以将日历设置为该时区，然后将您的 SimpleDateFormat 关联到该日历。

例如：

```
public void testFormat() throws Exception {
    Calendar pacific = Calendar.getInstance(TimeZone.getTimeZone("America/Los_Angeles"));
    Calendar atlantic = Calendar.getInstance(TimeZone.getTimeZone("America/New_York"));
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
    Timestamp ts = new Timestamp(System.currentTimeMillis());
    sdf.setCalendar(pacific);
    System.out.println(sdf.format(ts));
    sdf.setCalendar(atlantic);
    System.out.println(sdf.format(ts));
} 
```

我的输出是：

```
2012-06-25 20:27:12.506
2012-06-25 23:27:12.506 
```

# jquery - jquery mouseover 导致闪烁

> ID：11196303
> 
> 赞同：1
> 
> 时间：2012-06-25T19:48:44.163
> 
> 标签：jquery, mouseover

在以下位置查看：http: [//jsfiddle.net/pBt38/5/](http://jsfiddle.net/pBt38/5/)我不知道如何停止 div.message_options_slider 的闪烁，它是一个子元素，所以它不应该保持鼠标悬停活动吗？

此外，任何建议都需要具有 .live() 函数，因为这将应用于动态元素。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:15:13.250

试试这个 JS：

```
$(".network_block_item").on("mouseover", function(){
    //alert("here");
    var cord = $(this).position();

    $(this).find(".message_options_slider").css({
        position: 'absolute',
        top: cord.top,
        left: 0,
        display: 'block'       
    });
});

$(".network_block_item").on("mouseout", function(){
    $(".message_options_slider").css({ display: 'none' });
}); 
```

并将 message_options_slider 添加到每个网络行事物中。

### 编辑

这段代码实际上可能更好，不确定：

```
$(".network_block_item").on("mouseenter", function(){
    //alert("here");
    var cord = $(this).position();

    $(this).find(".message_options_slider").css({
        position: 'absolute',
        top: cord.top,
        left: 0,
        display: 'block'       
    });
});

$(".network_block_item,.message_options_slider").on("mouseleave", function(){
    $(".message_options_slider").css({ display: 'none' });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:06:33.867

the`message_options_slider`是第 3 个 div 的子元素，因此当您将其位置更改为位于当前悬停的顶部时`div`，它会触发“mouseout”（请注意，如果您将鼠标悬停在第 3 个 div 上，则不会出现闪烁）。您可以`message_options_slider`在每个 div 中有一个并更改相应 div 的 CSS，或者您可以将其插入到当前 div 中，这样它就不会闪烁

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T20:31:12.500

你这里有几个问题。如果您只想拥有一个弹出窗口实例，您可以这样做：

[http://jsfiddle.net/pBt38/6/](http://jsfiddle.net/pBt38/6/)

# macos - 改变 NSTextView 的大小

> ID：11196307
> 
> 赞同：3
> 
> 时间：2012-06-25T19:49:08.340
> 
> 标签：macos, cocoa, nstextview

我正在尝试实现一个`NSTextView`调整大小以适应其内容的方法。我正在尝试使它具有最大的行数。意思是，当达到这个限制时，它不会进一步增长，用户将能够滚动它。

似乎有很多人想要这个，但我还没有找到一个完整的实现。

这个想法是获取内容的大小`NSTextView`并调整它的大小以使其匹配。我只是不知道如何设置`NSTextView`. 它似乎不是`frame`需要设置的，也不是人们可能期望的。

谁能告诉我如何设置框架`NSTextView`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:41:47.533

事实证明，应该改变的是滚动视图的高度。`NSTextView`可以通过覆盖`-didChangeText`下面的方法来更改高度。

```
- (void)didChangeText
{
    NSScrollView *scrollView = (NSScrollView *) self.superview.superview;
    NSRect frame = scrollView.frame;

    // Calculate height
    NSUInteger numberOfLines = [self numberOfLines];
    NSUInteger height = frame.size.height;
    if (numberOfLines <= 13)
    {
        height = 22 + (numberOfLines - 1) * 14;
        if (height < 22)
            height = 22;
    }

    // Update height
    frame.size.height = height;
    self.superview.superview.frame = frame;
} 
```

使用常量来获得你想要的结果。

# c# - PInvoke 并加倍*

> ID：11196310
> 
> 赞同：1
> 
> 时间：2012-06-25T19:49:53.263
> 
> 标签：c#, .net, interop, pinvoke

如果这是重复的，我很抱歉。我正在编写一个需要与旧的 c++ 非托管 dll 交互的类。有一种方法我很难映射到托管代码：

```
long DoSomething(int id, double* points, long numberOfPoints, bool useShaping) 
```

到目前为止，我一直无法将其映射到不会引发堆栈不平衡异常的外部方法。问题在于双指针。方法签名会在托管代码中寻找什么？这是我尝试过的不起作用的示例。

```
[DllImport("Something.Dll", EntryPoint = "DoSomething")]
public static extern long DoSomething(int id, double[] points, long numberOfPoints, bool useShaping) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:55:52.750

可能有两个问题——

1.  这很可能需要指定调用约定。
2.  C++ 中的“long”映射到 C# 中的“int”

尝试以下操作：

```
[DllImport("Something.Dll", EntryPoint = "DoSomething", CallingConvention=CallingConvention.Cdecl)]
public static extern int DoSomething(int id, double[] points, int numberOfPoints, bool useShaping); 
```

# java - 如何在java中打印/记录字符串数组？

> ID：11196311
> 
> 赞同：28
> 
> 时间：2012-06-25T19:49:54.720
> 
> 标签：java, string, object

小背景：

我有`csv`很多行的文件，每一行都有字符串元素，这样一行的一个例子是

```
String[] data = [20,11,Clothing,TShirts,Abercombie,Gap]

data.toString() = [Ljava.lang.String;@1152e94] 
```

现在在我的解析器中，我正在解析这个 csv 文件并将文件中存在的每一行作为 `String[] data`. 在我的日志页面中，我需要有 id 以及文件中存在的行。

目前，如果我尝试打印然后得到类似的值 `[Ljava.lang.String;@1152e94`，我的问题是如何获得数组元素的实际列表，例如`[20, 11, Clothing, TShirts, Abercombie, Gap]`？

尝试使用默认值`toString()`，但它仍然提供相同`LString`的数据。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-25T19:51:49.667

用于[`Arrays.toString(array)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)获得更易于阅读的内容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-25T19:52:10.367

使用`Arrays.toString(array);`它会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:57:57.147

可能是：[打印 Java 数组的最简单方法是什么？](https://stackoverflow.com/questions/409784/simplest-way-to-print-an-array-in-java)?

```
String[] data = [20,11,Clothing,TShirts,Abercombie,Gap]
Arrays.toString(data); 
```

或者

```
Arrays.deepToString(data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:05:31.933

读取 csv 文件的一行并在该行上调用 String.split(",") ，这将返回您刚刚读取的行中每个单独字符串的数组，然后您可以简单地遍历数组并在您打印出来时将它们打印出来需要。

```
String csvLine = scanner.nextLine();

String[] values = csvLine.split(",");
for(String s : values){
  System.out.println(s);
} 
```

# python - 从列表中删除项目作为while循环的“触发器”

> ID：11196313
> 
> 赞同：2
> 
> 时间：2012-06-25T19:49:57.770
> 
> 标签：python, list, while-loop

我想做这个：

```
while list:
    for blah in blah:
        things
    list.remove(min(list)) 
```

这个循环直到列表中的所有项目都被删除吗？因为我有我的代码，它只是循环 [list] 次，然后从函数返回。我需要一个循环，直到列表中的所有项目都消失为止。

我应该注意，在最后一次迭代之前，中间没有任何东西（在 for 循环中）被处理。

根据要求，整个算法在运行时：

```
def parsexlsx(address):
    bits = [] 
    i = 0
    while address:
        min_address = False
        for row in ws.iter_rows(row_offset=4,column_offset=3):
            c = row[2]
            d = row[3]
            if not d.internal_value:
                if min_address:     #we set it to true, then kept going until blank row
                    break           #bits is what you want it to be now
                bits = []           #reset bits every time we hit a new row
                continue            #this will just skip to next row

            for bits_cell in row[4:]:
                if bits_cell.internal_value:
                    bits.append(bits_cell.internal_value)
            if c.internal_value:
                if c.internal_value == min(address):
                    min_address = True
        address.remove(min(address))

    print bits
    return bits 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:54:12.770

有什么问题？

您的代码应该可以工作

```
>>> l=[1,2]
>>> while l:
...     print l
...     l.remove(min(l))
... 
[1, 2]
[2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:54:37.660

也许您正在寻找这样的东西？

```
while len(list) > 0:
    for blah in blah:
        things
    list.remove(min(list)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T19:57:01.943

是的，会的，看到字符串`foobar`被打印了 10 次，等于 A 的长度

```
>>> A=[1,1,2,3,3,3,4,5,6,6]
>>> while A:
     print('foobar')
     A.remove(min(A))

foobar
foobar
foobar
foobar
foobar
foobar
foobar
foobar
foobar
foobar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T00:41:02.323

您需要使用一个单独的变量`bits`来保存每条数据。`bits`在整个代码中重置，所以我建议使用类似的东西`all_bits`并更改`bits`为`min_addr_bits`. 此外，您需要确保每一行不为空白，您将位附加到`all_bits`. 应要求发布的示例。

# assembly - 改进汇编代码中的运行时

> ID：11196314
> 
> 赞同：-1
> 
> 时间：2012-06-25T19:50:02.840
> 
> 标签：assembly

考虑以下 80X86 代码段。假设当代码运行时，ECX 是非零的。

```
 L: MOV    AL, [ESI]
 XOR    [EDI], AL
 XOR    AL, [EDI]
 XOR    [EDI], AL
 MOV    [ESI], AL
 INC    ESI
 INC    EDI
 LOOP   L, ECX 
```

在假设 ECX 最初可被 4 整除的情况下，我需要重写上述代码段以获得更好的运行时效率。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:03:14.893

```
L:
MOV    EAX, [ESI]
XOR    [EDI], EAX
XOR    EAX, [EDI]
XOR    [EDI], EAX
MOV    [ESI], EAX
ADD    ESI, 4
ADD    EDI, 4
SUB    ECX, 4
JZ     L 
```

我不知道你用的是什么汇编程序，所以我试着写一个通用的例子。

基本上，上述算法使用整个 EAX 寄存器一次移动 4 个字节。

# java - 为什么我的立方体无法在 LWJGL/OpenGL 中正确绘制？

> ID：11196317
> 
> 赞同：1
> 
> 时间：2012-06-25T19:50:32.537
> 
> 标签：java, opengl, lwjgl

我相信这与抽签顺序有关，但我现在已经放弃了。基本上，四边形正在绘制，但它们的顺序不正确，并且启用了背面剔除但没有帮助。

```
import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.nio.DoubleBuffer;

import javax.imageio.ImageIO;

import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.util.glu.GLU;

public class Main {
public Main() {
    this.start();
}
private void start() {  
    try {
        Display.setDisplayMode(new DisplayMode(640,640));
        Display.setTitle("FPSTest");
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
    }

    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(-5, 5, -5, 5, -1, 5);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    int x=0;
    while (!Display.isCloseRequested()) {
        Display.sync(60);
        //poll for keypresses first, default key is 'forward'
        //if(Keyboard.isKeyDown(Keyboard.KEY_NUMPAD8));

        GL11.glClear(GL11.GL_DEPTH_BUFFER_BIT|GL11.GL_COLOR_BUFFER_BIT);
        GL11.glEnable(GL11.GL_CULL_FACE|GL11.GL_DEPTH_TEST);
        GL11.glColor3f(1, 0, 0);
        GL11.glRotatef(x++, 1, 1, 1);
        GL11.glBegin(GL11.GL_QUADS);
        GL11.glColor3f(0.0f,1.0f,0.0f);          // Set The Color To Green
        GL11.glVertex3f( 1.0f, 1.0f,-1.0f);          // Top Right Of The Quad (Top)
        GL11.glVertex3f(-1.0f, 1.0f,-1.0f);          // Top Left Of The Quad (Top)
        GL11.glVertex3f(-1.0f, 1.0f, 1.0f);          // Bottom Left Of The Quad (Top)
        GL11.glVertex3f( 1.0f, 1.0f, 1.0f);          // Bottom Right Of The Quad (Top)
        GL11.glColor3f(1.0f,0.5f,0.0f);          // Set The Color To Orange
        GL11.glVertex3f( 1.0f,-1.0f, 1.0f);          // Top Right Of The Quad (Bottom)
        GL11.glVertex3f(-1.0f,-1.0f, 1.0f);          // Top Left Of The Quad (Bottom)
        GL11.glVertex3f(-1.0f,-1.0f,-1.0f);          // Bottom Left Of The Quad (Bottom)
        GL11.glVertex3f( 1.0f,-1.0f,-1.0f);          // Bottom Right Of The Quad (Bottom)
        GL11.glColor3f(1.0f,0.0f,0.0f);          // Set The Color To Red
        GL11.glVertex3f( 1.0f, 1.0f, 1.0f);          // Top Right Of The Quad (Front)
        GL11.glVertex3f(-1.0f, 1.0f, 1.0f);          // Top Left Of The Quad (Front)
        GL11.glVertex3f(-1.0f,-1.0f, 1.0f);          // Bottom Left Of The Quad (Front)
        GL11.glVertex3f( 1.0f,-1.0f, 1.0f);          // Bottom Right Of The Quad (Front)
        GL11.glColor3f(1.0f,1.0f,0.0f);          // Set The Color To Yellow
        GL11.glVertex3f( 1.0f,-1.0f,-1.0f);          // Bottom Left Of The Quad (Back)
        GL11.glVertex3f(-1.0f,-1.0f,-1.0f);          // Bottom Right Of The Quad (Back)
        GL11.glVertex3f(-1.0f, 1.0f,-1.0f);          // Top Right Of The Quad (Back)
        GL11.glVertex3f( 1.0f, 1.0f,-1.0f);          // Top Left Of The Quad (Back)
        GL11.glColor3f(0.0f,0.0f,1.0f);          // Set The Color To Blue
        GL11.glVertex3f(-1.0f, 1.0f, 1.0f);          // Top Right Of The Quad (Left)
        GL11.glVertex3f(-1.0f, 1.0f,-1.0f);          // Top Left Of The Quad (Left)
        GL11.glVertex3f(-1.0f,-1.0f,-1.0f);          // Bottom Left Of The Quad (Left)
        GL11.glVertex3f(-1.0f,-1.0f, 1.0f);          // Bottom Right Of The Quad (Left)
        GL11.glColor3f(1.0f,0.0f,1.0f);          // Set The Color To Violet
        GL11.glVertex3f( 1.0f, 1.0f,-1.0f);          // Top Right Of The Quad (Right)
        GL11.glVertex3f( 1.0f, 1.0f, 1.0f);          // Top Left Of The Quad (Right)
        GL11.glVertex3f( 1.0f,-1.0f, 1.0f);          // Bottom Left Of The Quad (Right)
        GL11.glVertex3f( 1.0f,-1.0f,-1.0f);          // Bottom Right Of The Quad (Right)
        GL11.glEnd();
        GL11.glLoadIdentity();
        Display.update();
    }

    Display.destroy();
}

public static void main(String[] argv) {
    new Main();
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T19:58:59.613

`GL11.glEnable(GL11.GL_CULL_FACE|GL11.GL_DEPTH_TEST);`

你不能这样做。您必须将每个 glEnable 作为单独的命令。试试这个，看看它是否对你有帮助。

```
GL11.glEnable(GL11.GL_CULL_FACE);
GL11.glEnable(GL11.GL_DEPTH_TEST); 
```

还用`glGetError`！

# gtk - 使用 cairo 创建 GTK+ Cellrenderer

> ID：11196323
> 
> 赞同：1
> 
> 时间：2012-06-25T19:50:56.717
> 
> 标签：gtk, vala

这已经困扰了我至少几天（不幸的是，还有几个晚上）。我想在 Gtk+ 中编写一个相当简单的 cellrenderer。因为我只绘制文本（加上 cairo 的添加），所以我是 Gtk.CellRendererText 的子类（它是 Vala+Gtk3 btw）。我在这里做了一个最小的例子：

```
class CellRendererTest : CellRendererText{
public override void render (Cairo.Context ctx, Widget tree,
            Gdk.Rectangle background_area, Gdk.Rectangle cell_area,
            CellRendererState flags) {

        base.render (ctx, tree, background_area, cell_area, flags);
        ctx.rectangle(0, 0, 20, 20);
        ctx.fill();

    }
}

class Test : Window{
    public Test(){
        TreeStore store = new TreeStore(1, typeof(string));
        TreeView tv = new TreeView.with_model(store);
        tv.insert_column_with_attributes (-1, "Foo",
        new CellRendererTest(), "text", 0);

        TreeIter iter;
        store.append (out iter, null);
        store.set (iter, 0, "first", -1);
        store.append(out iter, null);
        store.set (iter, 0, "second", -1);
        store.append (out iter, null);
        store.set (iter, 0, "third", -1);

        add(tv);
        this.show_all();
    }

    static void main(string[] args){
        Gtk.init(ref args);
        new Test();
        Gtk.main();
    }
} 
```

所以我认为这会给树视图中的每个条目在左上角一个黑框，但实际上它只绘制了一次框。这个例子并没有说清楚，但是盒子也不可能在同一位置绘制三次（我已经用一些不同的代码尝试过）。

那么，有谁知道如何在这里达到预期的效果？

# android - iOS/Android 与 Delphi/C# 桌面应用程序同步

> ID：11196324
> 
> 赞同：6
> 
> 时间：2012-06-25T19:51:00.070
> 
> 标签：android, .net, ios, delphi, sqlite

不确定这是否是正确的 Stack Exchange 网站，但这里有..

一位客户要求我研究是否有可能使用 iOS 或 Android 应用程序输入存储在 SQLLite 数据库中的信息，然后在通过电缆或其他同步技术插入时与主桌面应用程序同步。

桌面应用程序是目前用 Delphi 7 编写的 Windows 应用程序。

是否有任何 API 可以从 Delphi 可以使用的 iOS/Android 上的 SQLLite 数据库同步数据？

如果不是，那么如果桌面应用程序是用 C# 编写的，因为它是一种可以更轻松地使用 API 的新语言，会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T09:41:49.797

对于单向同步（设备到桌面），我将从一个简单的 Web 服务（基于 HTTP）开始。同样基于 HTTP 的新 Web Sockets 标准稍微复杂一些，但允许双向通信。

设备可以 HTTP POST 数据库更改到服务器，桌面客户端可以提取新数据（使用 HTTP GET）或接收推送通知，例如使用 Web Sockets 客户端。

对于桌面到设备，您还可以查看 Apple Push Notifications 和相应的 Android 技术。

对于高可用性，我建议使用基于云的解决方案，例如 Amazon Elastic Compute Cloud (EC2)、Google App Engine (GAE) 或 Azure。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:31:32.970

这个问题相当广泛，你可以在这里做很多事情。有这么多的技术可以使用它令人眼花缭乱。

从移动设备传输信息的主流技术是 REST（通过 http）。

您还可以在 node.js 或 WFC 中快速创建一些服务，以创建从移动设备收集信息的服务。

我不确定是否有可用的 Delphi 库，但也许通过在您的搜索词中包含 REST，您可能会有更多的运气。您可能想先看看[https://stackoverflow.com/questions/3959851/using-rest-with-delphi](https://stackoverflow.com/questions/3959851/using-rest-with-delphi)。

移动端可能更棘手。如果您正在为多种设备进行开发，您可能希望探索[PhoneGap](http://phonegap.com/)的跨平台开发框架，因为似乎有一些项目旨在将本地数据库同步到云端。如何将这些联系在一起将是一项有趣的任务。

祝你好运！！！

# c++ - 接口虚表

> ID：11196329
> 
> 赞同：15
> 
> 时间：2012-06-25T19:51:13.933
> 
> 标签：c++, interface, polymorphism, vtable

接口（仅具有纯虚函数的多态类）是否具有 vtable？由于接口本身不实现多态函数并且不能直接构造，因此链接器不需要放置 vtable。是这样吗？我特别关心 MSVC 编译器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T20:01:17.787

是的，他们有。这有很多很好的理由。

第一个很好的理由是即使是纯虚方法也有实现。或隐或显。实现调用纯虚函数的技巧相对容易，因此您基本上可以为您的一个定义，调用它并查看会发生什么。出于这个原因，首先应该有一个虚拟表。

将虚拟表放入基类还有另一个原因，即使它的所有方法都是纯虚拟的并且没有其他数据成员。当使用多态性时，指向基类的指针会在整个程序中传递。为了调用虚方法，编译器/运行时应该计算出虚表与基指针的相对偏移量。如果 C++ 没有多重继承，可以假设抽象基类的偏移量为零（例如），在这种情况下，那里可能没有 vtable（但由于原因 #1，我们仍然需要它）。但是由于涉及多重继承，因此“vtable 在 0 偏移处”的技巧将不起作用，因为根据基类的数量（和类型）可能存在两个或三个 vtable。

可能还有其他我没有想到的原因。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T19:55:16.840

从纯粹的 C++ 角度来看，这是一个学术问题。虚拟功能不必用 vtables 实现，如果它们没有可移植的方式来获取它们。

如果您特别关心 MSVC 编译器，您可能希望使用[`__declspec(novtable)`](http://msdn.microsoft.com/en-us/library/k13k85ky%28v=vs.110%29.aspx).

（一般来说，在常见的实现中，一个抽象类可能需要一个 vtable，例如：

```
struct Base {
    Base();
    virtual void f() {}
    virtual void g() = 0;
};

void h(Base& b) {
    b.f(); // Call f on a Base that is not (yet) a Derived
           // vtable for Base required
}

Base::Base() {
    h(*this);
}

struct Derived : Base {
    void g() {}
};

int main() {
    Derived d;
} 
```

)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T08:20:32.000

vtable 不是必需的，但很少优化出来。MSVC 提供了`__declspec(novtable)`扩展，它明确地告诉编译器可以删除 vtable。如果没有，编译器将不得不检查自己是否未使用 vtable。这不是特别难，但仍然远非微不足道。而且由于它在常规代码中没有提供真正的速度优势，因此我知道的任何编译器都没有实现检查。

# android - Twitter关注页面查询

> ID：11196330
> 
> 赞同：-1
> 
> 时间：2012-06-25T19:51:14.043
> 
> 标签：android, twitter4j, twitter-follow

我想知道如何使用 android 应用程序关注 Twitter 上的页面？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:57:17.027

我认为您正在寻找的是[推特中的友谊](http://twitter4j.org/ja/javadoc/twitter4j/api/FriendshipMethods.html#createFriendship%28long%29)

[这里](http://code.google.com/p/android-hackathon-in-fukuoka/source/browse/trunk/sodefuri/src/jp/jagfukuoka/sodefuri/TimeLineActivity.java?spec=svn167&r=167)给出了一个非常简单的函数演示

# ios - AVAudioPlayer 消除声音文件之间的一秒停顿

> ID：11196345
> 
> 赞同：1
> 
> 时间：2012-06-25T19:52:17.230
> 
> 标签：ios, ios5, avfoundation, avaudioplayer

我正在使用多个实例`AVAudioPlayer`连续播放多个声音文件。

我注意到播放两个不同的声音文件时会有大约一秒钟的停顿。有没有可能消除这一秒的停顿？我`[myPlayer prepareToPlay]`已经提前召集了每位球员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:14:58.890

根据[`AVAudioPlayer`文档](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)，您可以[`playAtTime:`](http://developer.apple.com/library/ios/DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008067-CH1-SW26)用于同步播放。

修改后的示例如下所示：

```
- (void) startSynchronizedPlayback {

    NSTimeInterval shortStartDelay = 0.01;            // seconds
    NSTimeInterval now = player.deviceCurrentTime;

    [player       playAtTime: now + shortStartDelay];
    [secondPlayer playAtTime: now + shortStartDelay + player.duration];
} 
```

我没有对此进行测试，但猜想它应该可以工作。你当然应该根据你的名字`player`重命名。`secondPlayer`

# linux - 如何在 Linux 中创建将数据代理到真实设备的虚拟 io 设备？

> ID：11196348
> 
> 赞同：9
> 
> 时间：2012-06-25T19:52:32.663
> 
> 标签：linux, serial-port, pipe, virtual-serial-port

我有一个有趣的问题。我正在开发一个嵌入式机器，其中包含多个 Linux 实例，每个实例都在 ARM 处理器上运行。它们通过内部 1GBps 网络连接。我有一个连接到处理器 A 的串行端口设备节点（假设在其上运行 Linux-A）。我有一个在处理器 B 上运行的程序（比如说在 Linux-B 上）访问串行端口设备，就好像它在本地连接到 Linux-B 一样。
我的程序在设备节点上调用 term i/o type api 调用来控制 tty echo、字符模式输入。我想知道是否有一种方法可以创建在 Linux-B 上可用的虚拟串行设备，以某种方式通过内部网络与 Linux-A 上的真实串行设备通信。

我在想一些事情：Linux-B 有 /dev/ttyvirtual。写入它的任何内容都会通过网络套接字传输到 Linux-A 串行服务器。串行服务器执行真实设备上的 api 调用，比如说 /dev/ttys0。任何在 ttys0 上等待的数据都会被传输回 /dev/ttyvirtual。

快速完成这项工作涉及的所有事项是什么？

谢谢
Videoguy

更新：我在 [http://fixunix.com/bsd/261068-network-socket-serial-port-question.html](http://fixunix.com/bsd/261068-network-socket-serial-port-question.html)找到了一个很好的讨论。
另一个有用的链接是[http://blog.philippklaus.de/2011/08/make-rs232-serial-devices-accessible-via-ethernet/](http://blog.philippklaus.de/2011/08/make-rs232-serial-devices-accessible-via-ethernet/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T20:00:13.397

看看[openpty(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/openpty.3.html)。这使您可以创建一个伪 TTY（如`/dev/pts/0`ssh 连接使用的那种），它将像普通 TTY 一​​样响应，但让您可以直接以编程方式控制连接。

通过这种方式，您可以托管一个串行设备（例如`/dev/pts/5`），您可以在网络连接之间转发数据，然后其他应用程序可以在不知道底层网桥的情况下对其执行串行操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T13:34:35.183

我最终使用了[socat](http://www.dest-unreach.org/socat/doc/socat.html.)

可以在这里找到示例：[socat 示例](http://technostuff.blogspot.com/2008/10/some-useful-socat-commands.html)

你在两台机器上背靠背地socat。一个监听 tcp 端口并将数据转发到本地虚拟端口或 pty。其他盒子上的socat使用真实设备作为输入并将任何数据转发到tcp端口。

# php - iPhone 丢失 Cookie

> ID：11196355
> 
> 赞同：0
> 
> 时间：2012-06-25T19:53:10.703
> 
> 标签：php, iphone, cookies

我正在用 PHP 编写一个 webapp，它会记住用户是否登录。它设置一个 cookie，如果该 cookie 存在并经过验证，则用户不需要登录。

它可以在桌面上正常工作，但在 iPhone 上，只要我关闭选项卡并重新启动它，cookie 就会消失。

有什么我想念的吗？我不明白为什么关闭选项卡时会删除 cookie。这会破坏他们中许多人的目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:43:58.373

其实，我想通了。我将 cookie 设置为仅通过安全连接工作，但我 iPhone 历史记录中的 URL 之一并不安全。

# python - 用 Python 比较多个 CSV 文件

> ID：11196361
> 
> 赞同：0
> 
> 时间：2012-06-25T19:53:54.783
> 
> 标签：python, csv

我希望将多个 CSV 文件与 Python 进行比较，并输出一份报告。要比较的 CSV 文件的数量会有所不同，所以我让它从目录中提取一个列表。每个 CSV 有 2 列：第一列是区号和交易所，第二列是价格。例如

```
1201007,0.006
1201032,0.0119
1201040,0.0106
1201200,0.0052
1201201,0.0345 
```

这些文件不会都包含相同的区号和交换，因此我需要使用第一个字段作为键，而不是逐行比较。然后，我需要生成一个报告，上面写着：file1 与 file2 有 200 个不匹配，比 file2 低 371 个价格，比 file2 高 562 个价格。我需要生成它以将每个文件相互比较，因此将对 file3、file4.... 重复此步骤，然后对 file3 重复 file2 等。我认为自己是 Python 的相对菜鸟。下面是我到目前为止的代码，它只是抓取目录中的文件，并从所有文件中打印价格，总计。

```
import csv
import os

count = 0
#dir containing CSV files
csvdir="tariff_compare"
dirList=os.listdir(csvdir)
#index all files for later use
for idx, fname in enumerate(dirList):
    print fname
    dic_read = csv.reader(open(fname))
    for row in dic_read:
        key = row[0]
        price = row[1]
        print price
        count += 1
print count 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:27:34.690

这假设您的所有数据都可以放入内存中；如果没有，您将不得不尝试一次只加载一些文件集，甚至一次只加载两个文件。

它进行比较并将输出写入一个 summary.csv 文件，每对文件一行。

```
import csv
import glob
import os
import itertools

def get_data(fname):
    """
    Load a .csv file
    Returns a dict of {'exchange':float(price)}
    """
    with open(fname, 'rb') as inf:
        items = (row.split() for row in csv.reader(inf))
        return {item[0]:float(item[1]) for item in items}

def do_compare(a_name, a_data, b_name, b_data):
    """
    Compare two data files of {'key': float(value)}

    Returns a list of
      - the name of the first file
      - the name of the second file
      - the number of keys in A which are not in B
      - the number of keys in B which are not in A
      - the number of values in A less than the corresponding value in B
      - the number of values in A equal to the corresponding value in B
      - the number of values in A greater than the corresponding value in B
    """
    a_keys = set(a_data.iterkeys())
    b_keys = set(b_data.iterkeys())

    unique_to_a = len(a_keys - b_keys)
    unique_to_b = len(b_keys - a_keys)

    lt,eq,gt = 0,0,0
    pairs = ((a_data[key], b_data[key]) for key in a_keys & b_keys)
    for ai,bi in pairs:
        if ai < bi:
            lt +=1 
        elif ai == bi:
            eq += 1
        else:
            gt += 1

    return [a_name, b_name, unique_to_a, unique_to_b, lt, eq, gt]

def main():
    os.chdir('d:/tariff_compare')

    # load data from csv files
    data = {}
    for fname in glob.glob("*.csv"):
        data[fname] = get_data(fname)

    # do comparison
    files = data.keys()
    files.sort()
    with open('summary.csv', 'wb') as outf:
        outcsv = csv.writer(outf)
        outcsv.writerow(["File A", "File B", "Unique to A", "Unique to B", "A<B", "A==B", "A>B"])
        for a,b in itertools.combinations(files, 2):
            outcsv.writerow(do_compare(a, data[a], b, data[b]))

if __name__=="__main__":
    main() 
```

**编辑：** user1277476 说得很好；如果您通过交换对文件进行预排序（或者如果它们已经按排序顺序），则可以同时遍历所有文件，只保留内存中每个文件的当前行。

这将使您可以对每个交换条目进行更深入的比较 - 包含一个值的文件数，或者顶部或底部 N 个值等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:31:12.883

如果您的文件很小，您可以执行类似这样的基本操作

```
data = dict()
for fname in os.listdir(csvDir):
    with open(fname, 'rb') as fin:
        data[fname] = dict((key, value) for key, value in fin.readlines())
# All the data is now loaded into your data dictionary
# data -> {'file1.csv': {1201007: 0.006, 1201032: 0.0119, 1201040: 0.0106}, 'file2.csv': ...} 
```

现在，您可以轻松访问所有内容，以比较数据字典中的键及其结果值。

否则，如果您有更大的数据集要处理，而这些数据集可能无法加载到内存中，您可能需要考虑一次只处理 2 个文件，其中一个文件存储在内存中。[您可以使用itertools.combinations](http://docs.python.org/library/itertools.html#itertools.combinations)创建文件名组合列表，您可以将其命名`combinations(filenames, 2)`为您可以使用的唯一组合中的 2 个文件名对。

从那里你仍然可以进一步优化，但这应该会让你继续前进。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:55:11.227

我可能会在比较它们之前对文件进行排序。然后使用类似于 mergesort 的合并步骤的算法进行比较。

您仍然需要考虑如何处理重复记录 - EG，如果 file1 有 1234567,0.1 两次，file2 也是如此？如果 file1 有 3 个，而 file2 有 5 个 - 反之亦然？

```
http://en.literateprograms.org/Merge_sort_%28Python%29
http://stromberg.dnsalias.org/~strombrg/sort-comparison/
http://en.wikipedia.org/wiki/Merge_sort 
```

# java - Java 7 - JPanel paintComponent 标题栏重叠

> ID：11196365
> 
> 赞同：0
> 
> 时间：2012-06-25T19:54:05.780
> 
> 标签：java, swing, draw, titlebar, overlapping

为什么标题栏与JPanel的像素重叠。这里有一些代码：

```
protected void init() {
    this.setContentPane(new MyPanel());
    this.setSize(915, 725);
    this.setVisible(true);
}

class MyPanel extends JPanel {

    @Override
    public void paintComponent(Graphics _g) {
        super.paintComponent(_g);
        Graphics2D g = (Graphics2D)_g;

        g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        Font font = new Font("Monospaced", Font.PLAIN, 14);

        g.setFont(font);
        g.setColor(Color.red);

        for(int x=0; x<60; x++) {
            for(int y=0; y< 50; y++) {
                g.drawString("█", x*15, 0);
            }
        }
    }
} 
```

我已将 JPanel 添加到 JFrame 并在 y=0 处绘制一些字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:56:51.963

`y = 0`位于面板顶部，坐标向下增长。如果您希望在面板顶部出现 20 像素高的文本行，则需要将其绘制在`y = 20`. 更一般地说，您可以使用`FontMetrics`该类来确定文本行的高度并使用适当的偏移量：

```
FontMetrics metrics = _g.getFontMetrics(font);
int lineHeight = metrics.getHeight(); 
```

在您当前的代码中，您在 1 像素网格的单元格中绘制字符（大约 20 像素高）。这意味着您的角色将彼此显着重叠。您需要在此处按远大于 1 的值对循环进行步进，以便为字符提供足够的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:58:11.560

# python - 处理来自多个进程的单个文件

> ID：11196367
> 
> 赞同：86
> 
> 时间：2012-06-25T19:54:19.440
> 
> 标签：python, multithreading, multiprocessing

我有一个大文本文件，我想在其中处理每一行（做一些操作）并将它们存储在数据库中。由于单个简单程序花费的时间太长，我希望它通过多个进程或线程来完成。每个线程/进程都应该从该单个文件中读取不同的数据（不同的行），并对它们的数据（行）进行一些操作并将它们放入数据库中，这样最后，我就可以处理全部数据和我的数据库转储了我需要的数据。

但我无法弄清楚如何解决这个问题。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-06-25T20:11:29.187

您正在寻找的是生产者/消费者模式

**基本线程示例**

这是使用[线程模块](http://docs.python.org/library/threading.html)（而不是多处理）的基本示例

```
import threading
import Queue
import sys

def do_work(in_queue, out_queue):
    while True:
        item = in_queue.get()
        # process
        result = item
        out_queue.put(result)
        in_queue.task_done()

if __name__ == "__main__":
    work = Queue.Queue()
    results = Queue.Queue()
    total = 20

    # start for workers
    for i in xrange(4):
        t = threading.Thread(target=do_work, args=(work, results))
        t.daemon = True
        t.start()

    # produce data
    for i in xrange(total):
        work.put(i)

    work.join()

    # get the results
    for i in xrange(total):
        print results.get()

    sys.exit() 
```

您不会与线程共享文件对象。[您可以通过向队列](http://docs.python.org/library/queue.html)提供数据行来为他们生产工作。然后每个线程会拿起一行，处理它，然后在队列中返回它。

[多处理模块](http://docs.python.org/library/multiprocessing.html)中内置了一些更高级的工具来共享数据，例如列表和[特殊类型的 Queue](http://docs.python.org/library/multiprocessing.html#multiprocessing.Queue)。使用多处理与线程需要权衡取舍，这取决于您的工作是受 CPU 限制还是 IO 限制。

**基本的 multiprocessing.Pool 示例**

这是一个非常基本的多处理池示例

```
from multiprocessing import Pool

def process_line(line):
    return "FOO: %s" % line

if __name__ == "__main__":
    pool = Pool(4)
    with open('file.txt') as source_file:
        # chunk the work into batches of 4 lines at a time
        results = pool.map(process_line, source_file, 4)

    print results 
```

[池](http://docs.python.org/library/multiprocessing.html#module-multiprocessing.pool)是管理自己的进程的便利对象。由于打开的文件可以遍历其行，因此您可以将其传递给`pool.map()`，它将遍历它并将行传递给工作函数。[映射](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map)块并在完成后返回整个结果。请注意，这是一个过于简化的示例，并且`pool.map()`会在完成工作之前将整个文件一次全部读入内存。如果您希望有大文件，请记住这一点。有更高级的方法来设计生产者/消费者设置。

**具有限制和线路重新排序的手动“池”**

这是[Pool.map](http://docs.python.org/library/multiprocessing.html#multiprocessing.pool.multiprocessing.Pool.map)的手动示例，但是您可以设置队列大小，以便您只以尽可能快的速度逐个喂它，而不是一次性消耗整个可迭代对象。我还添加了行号，以便您稍后可以跟踪它们并在需要时参考它们。

```
from multiprocessing import Process, Manager
import time
import itertools 

def do_work(in_queue, out_list):
    while True:
        item = in_queue.get()
        line_no, line = item

        # exit signal 
        if line == None:
            return

        # fake work
        time.sleep(.5)
        result = (line_no, line)

        out_list.append(result)

if __name__ == "__main__":
    num_workers = 4

    manager = Manager()
    results = manager.list()
    work = manager.Queue(num_workers)

    # start for workers    
    pool = []
    for i in xrange(num_workers):
        p = Process(target=do_work, args=(work, results))
        p.start()
        pool.append(p)

    # produce data
    with open("source.txt") as f:
        iters = itertools.chain(f, (None,)*num_workers)
        for num_and_line in enumerate(iters):
            work.put(num_and_line)

    for p in pool:
        p.join()

    # get the results
    # example:  [(1, "foo"), (10, "bar"), (0, "start")]
    print sorted(results) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-25T20:46:24.610

这是我编造的一个非常愚蠢的例子：

```
import os.path
import multiprocessing

def newlinebefore(f,n):
    f.seek(n)
    c=f.read(1)
    while c!='\n' and n > 0:
        n-=1
        f.seek(n)
        c=f.read(1)

    f.seek(n)
    return n

filename='gpdata.dat'  #your filename goes here.
fsize=os.path.getsize(filename) #size of file (in bytes)

#break the file into 20 chunks for processing.
nchunks=20
initial_chunks=range(1,fsize,fsize/nchunks)

#You could also do something like:
#initial_chunks=range(1,fsize,max_chunk_size_in_bytes) #this should work too.

with open(filename,'r') as f:
    start_byte=sorted(set([newlinebefore(f,i) for i in initial_chunks]))

end_byte=[i-1 for i in start_byte] [1:] + [None]

def process_piece(filename,start,end):
    with open(filename,'r') as f:
        f.seek(start+1)
        if(end is None):
            text=f.read()
        else: 
            nbytes=end-start+1
            text=f.read(nbytes)

    # process text here. createing some object to be returned
    # You could wrap text into a StringIO object if you want to be able to
    # read from it the way you would a file.

    returnobj=text
    return returnobj

def wrapper(args):
    return process_piece(*args)

filename_repeated=[filename]*len(start_byte)
args=zip(filename_repeated,start_byte,end_byte)

pool=multiprocessing.Pool(4)
result=pool.map(wrapper,args)

#Now take your results and write them to the database.
print "".join(result)  #I just print it to make sure I get my file back ... 
```

这里棘手的部分是确保我们将文件拆分为换行符，这样您就不会错过任何行（或只读取部分行）。然后，每个进程读取文件的一部分并返回一个可以由主线程放入数据库的对象。当然，您甚至可能需要分块执行此部分，这样您就不必一次将所有信息保存在内存中。（这很容易实现——只需将“args”列表拆分为 X 块并调用`pool.map(wrapper,chunk)` ——参见[此处](https://stackoverflow.com/questions/2130016/splitting-a-list-of-arbitrary-size-into-only-roughly-n-equal-parts)）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-25T20:09:10.430

将单个大文件分解为多个较小的文件，并在单独的线程中处理每个文件。

# jquery - 如何使用 jQuery 取消选中所有复选框？

> ID：11196368
> 
> 赞同：0
> 
> 时间：2012-06-25T19:54:29.900
> 
> 标签：jquery, multi-select

我有多选列表框，我想在清除按钮单击时清除所有选定的项目。

```
<asp:ListBox id="StatusField" runat="server" SelectionMode="Multiple" Rows="4" /> 
```

我尝试如下。

```
 $("#StatusField option:selected").removeAttr("selected"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T18:30:18.570

我解决了这个问题。

```
$("#[id$=StatusField ]").multiselect("uncheckAll"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:56:12.637

查看您的代码如何用于下拉而不是选择框，您可以尝试：

```
$('#StatusField :selected').attr('selected', ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:15:12.870

由于它是一个下拉列表，您可以尝试：

```
 $("#StatusField").val(""); 
```

# javascript - table.scrollleft 始终为零

> ID：11196378
> 
> 赞同：0
> 
> 时间：2012-06-25T19:54:43.510
> 
> 标签：javascript, html

我有一张固定布局的桌子。列占用的空间比可用空间多，因此会出现水平滚动条。目前，您可以使用键盘箭头在表格中移动。But when a cell is selected that is not in view I need to programmatically tell the scrollbar to move. 我认为这将是 scrollleft 但不可设置并且始终为零。相反，我通过使用 scrollIntoView(false) 实现了我想要的效果。这行得通，但我仍然想知道为什么 scrollleft 不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-25T20:03:28.543

请看我的小提琴。您可能想要使用的函数被调用`scrollLeft()`

[http://jsfiddle.net/ydj5E/](http://jsfiddle.net/ydj5E/)

jQuery 文档：[http ://api.jquery.com/scrollLeft/](http://api.jquery.com/scrollLeft/)

MDN：[https ://developer.mozilla.org/en/DOM/element.scrollLeft](https://developer.mozilla.org/en/DOM/element.scrollLeft)

# c++ - 将数据发送到另一个 C++ 程序

> ID：11196379
> 
> 赞同：3
> 
> 时间：2012-06-25T19:54:57.660
> 
> 标签：c++, inter-process-communicat

是否可以将数据发送到另一个 C++ 程序，***而不能修改另一个程序***（因为有些人似乎错过了这个重要的限制）？如果是这样，你会怎么做？我当前的方法包括创建一个临时文件并以文件名作为参数启动另一个程序。唯一的问题是这会留下一堆临时文件以供稍后清理，这是不想要的。

编辑：此外，提升***不是***一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:04:12.200

显然，如果第二个程序支持它，那么构建一个到 stdin 的管道是要走的路。正如 Fred 在评论中提到的那样，如果没有提供命名文件，或者将`-`其用作文件名，许多程序都会读取 stdin。

如果它**必须**采用文件名，并且您使用的是 Linux，那么试试这个：创建一个管道，然后在命令行上传递`/dev/fd/<fd-number>`或。`/proc/self/fd/<fd-number>`

例如，这里是 hello-world 2.0：

```
#include <string>
#include <sstream>
#include <cstdlib>
#include <cstdio>
#include <unistd.h>
#include <sys/types.h>
#include <sys/wait.h>

int main () {

  int pfd[2];
  int rc;

  if( pipe(pfd) < 0 ) {
    perror("pipe");
    return 1;
  }

  switch(fork()) {
  case -1: // Error
    perror("fork");
    return 1;

  case 0: { // Child
    // Close the writing end of the pipe
    close(pfd[1]);

    // Create a filename that refers to reading end of pipe
    std::ostringstream path;
    path << "/proc/self/fd/" << pfd[0];

    // Invoke the subject program. "cat" will do nicely.
    execlp("/bin/cat", "cat", path.str().c_str(), (char*)0);

    // If we got here, then something went wrong, then execlp failed
    perror("exec");
    return 1;
  }

  default: // Parent
    // Close the reading end.
    close(pfd[0]);

    // Write to the pipe. Since "cat" is on the other end, expect to
    // see "Hello, world" on your screen.
    if (write(pfd[1], "Hello, world\n", 13) != 13)
      perror("write");

    // Signal "cat" that we are done writing
    close(pfd[1]);

    // Wait for "cat" to finish its business
    if( wait(0) < 0)
      perror("wait");

    // Everything's okay
    return 0;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T19:59:03.897

你可以使用套接字。听起来这两个应用程序都在同一主机上，因此您只需将对等方标识为 localhost:portA 和 localhost:port B。如果您这样做，您最终可以毕业做网络 IO。没有临时文件，没有神秘的解析错误或文件删除。TCP 保证数据包的传递并保证它们将被正确排序。

所以，是的，我会考虑创建一个同步套接字服务器（如果您预计有大量对等点，请使用异步）。与面向管道的 IPC 相比，一个好处是 TCP 套接字是完全通用的。管道根据您所在的系统而有很大差异（考虑 Windows 命名管道与隐式和显式 POSIX 管道 -> 非常不同）。

# c# - LINQ - 当前不存在 Proj

> ID：11196380
> 
> 赞同：0
> 
> 时间：2012-06-25T19:54:57.970
> 
> 标签：c#, asp.net-mvc, linq

我有以下代码：

```
 if (pick == null || pick == "active")
    {
       var Proj = db.usp_Train(idnbr)
                 .Where(a => a.Inactive == false).ToList();
     }        
     else 
     {
       var Proj = db.usp_Train(idnbr).ToList();

     }

return PartialView(Proj); 
```

对于我*返回 PartialView(Projs)*的地方，我收到一条消息，说**Proj 在当前不存在**关于如何解决这个问题的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:57:04.920

```
if (pick == null || pick == "active")
{
    return PartialView(db.usp_Train(idnbr).Where(a => a.Inactive == false).ToList());
}
return PartialView(db.usp_Trainin(idnbr).ToList()); 
```

或者，如果您愿意：

```
List<Project> projects;
if (pick == null || pick == "active")
{
    projects = db.usp_Train(idnbr).Where(a => a.Inactive == false).ToList();
}
else
{
    projects = db.usp_Trainin(idnbr).ToList();
}
return PartialView(projects); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T19:57:32.790

您在and块`Proj`的范围内声明-因此它不存在于这些块之外。你想要这样的东西：`if``else`

```
// Or whatever the type is...
List<Train> proj;

if (pick == null || pick == "active")
{
    proj = db.usp_Train(idnbr)
             .Where(a => a.Inactive == false).ToList();
}        
else 
{
    proj = db.usp_Train(idnbr).ToList();
}
return PartialView(proj); 
```

或者，您可以使用条件运算符：

```
bool pickActive = pick == null || pick == "active";
var proj = pickActive ? db.usp_Train(idnbr).Where(a => !a.Inactive).ToList()
                      : db.usp_Train(idnbr).ToList();
return PartialView(proj); 
```

或者有选择地应用条件，这会消除所有冗余：

```
IQueryable<Train> proj = db.usp_Train(idnbr);
if (pick == null || pick == "active")
{
    proj = proj.Where(a => !a.Inactive);
}
return PartialView(proj.ToList()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T19:57:17.760

您定义`Proj`的范围太窄。

```
//define Proj here!
List<Train> Proj = null;

if (pick == null || pick == "active")
    {
       Proj = db.usp_Train(idnbr)
                 .Where(a => a.Inactive == false).ToList();
     }        
     else 
     {
       Proj = db.usp_Train(idnbr).ToList();

     }

return PartialView(Proj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T19:57:32.987

您需要确保您的`Proj`变量在任何被访问的地方都保持在范围内。由于`var`需要在声明变量的位置分配变量，我的建议是重构您的逻辑以避免重复声明：

```
var proj = db.usp_Train(idnbr);

if (pick == null || pick == "active")
    proj = proj.Where(a => a.Inactive == false);

return PartialView(proj.ToList()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T19:57:48.667

Proj 的范围有限。像这样声明它：

```
 (whatever type Proj is) Proj;

    if (pick == null || pick == "active") 
        { 
            Proj = db.usp_Train(idnbr) 
                     .Where(a => a.Inactive == false).ToList(); 
         }         
         else  
         { 
            Proj = db.usp_Trainin(idnbr).ToList(); 

         } 

return PartialView(Proj); 
```

# symfony - 覆盖 symfony2 组件

> ID：11196382
> 
> 赞同：0
> 
> 时间：2012-06-25T19:55:03.877
> 
> 标签：symfony, overriding

你们中的任何人都可以帮助我举一个如何覆盖 symfony 组件的示例。在我的情况下，我需要从 Symfony/Component/HttpFoundation/Session.php 覆盖 Session 类

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T23:11:19.607

您可以覆盖以下`session.class`参数`config.yml`：

```
parameters:
    session.class: Foo\Bar\Session 
```

# c++ - C/C++ 应用程序可以利用 OpenCL 吗？

> ID：11196388
> 
> 赞同：0
> 
> 时间：2012-06-25T19:55:20.677
> 
> 标签：c++, c, opencl

这可能听起来有点傻，但我还没有找到明确的答案。我有一个应用程序，它在很大程度上受益于 OpenCL 的可扩展性。但是我将如何使用现有的代码来实现 OpenCL？我必须使用包装器吗？我必须将代码移植到 OpenCL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T19:07:42.413

一个包装是不够的。您将不得不在 OpenCL C 中重写您的代码，并且很可能重新设计您的算法以进行并行处理（在多个内核/线程上运行）。天下没有免费的午餐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T19:19:03.043

@vocaro 说了什么。

我还想指出，有像[OpenHMPP](http://en.wikipedia.org/wiki/OpenHMPP)这样的尝试来设计一种不同的 GPGPU 编程方法，就像 OpenMP 对多线程所做的那样。但我还没有看到一个体面的实现。

# php - 从没有 ID 号的特定行开始？

> ID：11196391
> 
> 赞同：0
> 
> 时间：2012-06-25T19:55:24.720
> 
> 标签：php, mysql, sql

我正在编写一个代码来查找一个 MYSQL 表，点击一个 API，然后将结果写入一个表。

最初我使用的是：

```
$select = "SELECT Partner, Merchant, IP FROM " .$old_table.  " WHERE ID >= " .$startRow;
mysqli_query($db, $select); 
```

这很好用，但后来我意识到我拥有的所有表可能都没有连续的 ID 号，甚至根本没有 ID 号。

有没有办法从没有 ID 号的特定行开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T19:58:06.103

SQL 中的行不一定按顺序排列。因此，如果没有顺序 ID（或其他标识符，如日期），就无法在某个点之后获取所有行。

所以，不，你不能从一个特定的行开始，而没有一种方法来识别它，并识别应该在它之后的行。

# opencv - 基于模型的姿态估计

> ID：11196394
> 
> 赞同：3
> 
> 时间：2012-06-25T19:55:31.967
> 
> 标签：opencv, pose-estimation

我想通过使用 opencv 来估计已知 3D 对象的位姿。如果给出了 3D 模型的点及其在图像上的对应点，我可以使用 solvePnP。我的问题是：如何找到已知 3D 模型与其在图像上的投影之间的对应关系？十分感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:23:36.603

一旦 3d 模型中的点与场景中的点匹配，您必须应用 cv::findHomography()。此函数计算将 3D 模型中的任何点投影到场景中的矩阵。实际上，单应性计算只需要 4 个匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T03:52:21.070

这一直困扰着我，所以我一直在寻找。SoftPOSIT 算法就是你想要的。 [http://www.cfar.umd.edu/~daniel/Site_2/Code.html](http://www.cfar.umd.edu/~daniel/Site_2/Code.html) 有一个matlab实现，有些人已经翻译成c/c++

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:43:27.180

姿势矩阵 = solvePnP(objectPoints, imagePoints);

imagePoint_computed = objectPoints[i] * poseMatrix * cameraMatrix

找到 j

imagePoints[j] ~= imagePoint_computed。

objectPoints[j] 和 imagePoints[i] 是对应的点。

# c# - Windows 服务中的 NHibernate 会话管理和城堡

> ID：11196399
> 
> 赞同：1
> 
> 时间：2012-06-25T19:56:12.560
> 
> 标签：c#, castle-windsor

我有一个 Windows 服务，它查找某个文件并将其保存到数据库中。我正在使用存储库模式并使用 Castle Windsor 进行 DI。

这就是我注册 NHibernate ISession 和我的工作单元的方式。

```
 container.Register(
            Component.For<ISession>().UsingFactoryMethod(() => NHibernateSessionManager.Instance.GetSession()).LifeStyle.Transient);

            container.Register(
                Component.For<INHibernateSessionManager>().Instance(NHibernateSessionManager.Instance).LifestyleSingleton());

            container.Register(
                Component.For<IUnitOfWork<ISession>>().ImplementedBy<Data.Framework.Nhibernate.UnitOfWork.NHibernateUnitOfWork>().LifeStyle.Transient);

            container.Register(Component.For(typeof(IRepository<>)).ImplementedBy(typeof(NHibernateRepository<>)).LifeStyle.Transient); 
```

这对我不起作用，因为当它尝试解析存储库时，它抱怨已经添加到存储库中的密钥。

你能告诉我如何正确地做到这一点吗？

谢谢，-迈克

# objective-c - 在Objective-C中乘以预处理器常量

> ID：11196401
> 
> 赞同：0
> 
> 时间：2012-06-25T19:56:26.277
> 
> 标签：objective-c, ios, llvm, xcode4.3, llvm-clang

假设我有以下预处理器定义

`#define MYNUMBER 10f;`

然后我想在我的代码中使用它，如下所示：

```
float someResult = MYNUMBER * 3; 
```

当我这样做时，Xcode 认为我试图`*`用作一元指针标记而不是乘号，并导致错误。定义这样一个常数并在乘法表达式中使用它的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T19:57:46.427

#define 后面不应该有分号。它的事情 MYNUMBER 是“10f;”。

# android - 我可以通过代码向同一台 Android 设备发送短信，还是必须使用反向计费？

> ID：11196403
> 
> 赞同：1
> 
> 时间：2012-06-25T19:56:32.110
> 
> 标签：android, android-intent, android-emulator, sms, sms-gateway

我希望在我的应用程序中设置一个电话号码确认系统，就像 WhatsApp 所做的那样，即它向您发送一个 PIN，它到达 Android 设备并证明您是设备的所有者（电话号码）。

这是否有可能通过代码从我自己到我自己伪造短信，这样我就无法在没有用户干预的情况下再次通过代码获取 Pin？

我查看了一些反向计费系统，但我找不到适用于所有国家/地区的任何系统，当然这需要接收方为 SMS 付费。

我在这里最好的选择是什么？这将如何通过模拟器工作？

我在正确的轨道上吗？还是我应该寻找替代解决方案或反向计费？

## 编辑

这是一个解释，更详细地说明了我正在尝试做的事情。

我的应用程序要求用户输入他/她的电话号码，我需要确认这个电话号码是真实的，所以我想向电话号码/设备发送短信。

这基本上正是 WhatsApp 发生的情况，您输入您的电话号码，他们会向您发送 PIN 码。

这是我不确定的过程，如果没有反向计费服务是否可能。

我需要向设备发送消息，我可以通过服务器（网络服务）来完成，但我最终会为发送到设备的 SMS 付费。

所以希望有某种技巧可以从代码中向实际保存的设备发送短信；一旦它到达，我可以拿起 PIN 并对照我服务器上的数据库检查它。如果它是有效的，我可以确认这个用户确实有这个电话号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:22:36.500

我从你的问题中了解到：

您想向用户发送 SMS 并让应用程序拦截它。您想要一种在模拟器上测试它而不实际发送 SMS 的方法。

一种可能的解决方案可能是将 SMS 直接写入手机的收件箱，但我不确定 BroadcastReceiver 是否真的会拦截它。

你为什么不试试，让我们知道。

以下是[如何将 SMS 写入收件箱](https://stackoverflow.com/a/872131/1117415)。

以下是[设置 SMS BroadCastReceiver 的方法](http://androidsourcecode.blogspot.com/2010/10/receiving-sms-using-broadcastreceiver.html)。

# linq-to-sql - sqlmetal 如何生成关联名称？

> ID：11196407
> 
> 赞同：0
> 
> 时间：2012-06-25T19:57:02.100
> 
> 标签：linq-to-sql, sqlmetal

sqlmetal 生成的关联名称一直是令人沮丧的根源。有时关联只是将“Id”去掉末尾的列名，有时它会根据外键约束名称生成关联名称。

我根本无法弄清楚它使用什么步骤来生成这些名称，并且最近的架构更改再次彻底改变了关联名称，所以我想了解一下。

我有两个表，它们在某种链中相互引用。像这样的东西：

```
class In
{
  int Id;
  EntityRef<Out> Yields;    // YieldsId => FK_Out_Source
  EntitySet<Out> In_Source; // FK_In_Source
}
class Out
{
  int Id;
  EntityRef<In> Yields;     // YieldsId => FK_In_Source
  EntitySet<In> Out_Source; // FK_Out_Source
} 
```

这些是架构更改之前的类，其中 In 和 Out 表之间有一个额外的 FK 字段。删除该字段后，sqlmetal 现在生成以下内容：

```
class In
{
  int Id;
  EntityRef<Out> Yields; // YieldsId => FK_Out_Source
  EntitySet<Out> Out;    // FK_In_Source
}
class Out
{
  int Id;
  EntityRef<In> In;         // YieldsId => FK_In_Source
  EntitySet<In> Out_Source; // FK_Out_Source
} 
```

以前的类应该是完全对称的，但现在生成的类是完全不对称的。谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:27:25.610

由于这似乎没有押韵或理由，我创建了一个命令行工具来包装 sqlmetal 并重写关联名称。它包含在我的开源 Sasa 实用程序框架中，称为[sasametal](http://sasa.hg.sourceforge.net/hgweb/sasa/sasa/file/844b57635b42/sasametal)。

# qt - 无法在 Windows 7 上启动 QT .exe 文件

> ID：11196416
> 
> 赞同：1
> 
> 时间：2012-06-25T19:57:30.600
> 
> 标签：qt, qt-creator

我开始使用 Qt 并遇到了以下问题：当我从 QtCreator 中编译和运行我的应用程序时，它运行正常，但是当我转到调试文件夹并双击 .exe 文件以启动应用程序时，出现一个消息框弹出，它说

> 此应用程序无法启动，因为未找到 QtDeclaratived4.dll。重新安装应用程序可能会解决此问题

请注意 - 它是 QtDeclaratived4.dll，在 4 之前带有字母 d，而不是 QtDeclarative4.dll。

在谷歌搜索后，我找到了一个找到所需 dll 并将其放在项目文件夹中的建议。但不幸的是，我的计算机上缺少这样的 .dll。我找到了 QtDeclarative4.dll 并尝试将其放在项目文件夹中，但没有帮助。你能建议我任何其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:07:50.217

**`d`**名称中的 表示 Qt 的调试**版本**，这意味着您使用[debug build](http://doc.qt.nokia.com/qtcreator-2.4/creator-build-settings.html)编译了您的应用程序。

您的计算机上可能有这个 DLL，并且 Qt Creator 知道它在哪里，这就是它能够运行您的应用程序的原因。**但是**，您没有在**`PATH`**环境变量中配置此库的路径，也就是说您无法手动执行您的应用程序（即在 Qt Creator 之外）。

要解决此问题，您有 2 个选择：

*   选择发布版本编译您的应用程序；
*   或者将完整路径添加`QtDeclaratived4.dll`到`PATH`环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:14:03.237

`QtDeclarative4.dll`可以在`C:\[QT_INSTALL_DIR]\bin`

如果您使用 Qt 分发的标准 Windows 安装程序，您绝对应该拥有这个。

# php - 选择一个时间段之间的数据并计算另一个参数（时间）的差异

> ID：11196420
> 
> 赞同：0
> 
> 时间：2012-06-25T19:57:40.653
> 
> 标签：php, mysql, sql

我有一个包含许多表的数据库，其中一个表有字段：

id----编号-----开始-----结束

开始对应处理的日期和时间：2012-06-08 01:16:07

结束对应流程结束：2012-06-08 01:39:47

我需要计算前 4 周内的所有进程，持续时间超过 10 分钟......只要 no: processes 就足够了。

需要从数据库进行 php 查询。尝试了几种方法，但甚至可以接近。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:02:16.713

```
SELECT *
FROM dbtable
WHERE start > TIMESTAMPADD(WEEK, -4, CURDATE())
      AND TIMESTAMPDIFF(MINUTE, start, end) > 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:09:43.303

```
SELECT COUNT(*) AS 'processes' FROM table1
WHERE TIMESTAMPDIFF(MINUTE, start, end) > 10
AND start BETWEEN DATE_SUB(NOW(), INTERVAL 28 DAY) AND NOW() 
```

# c# - 如何减少 True Transparency WinForm 更新时的闪烁？还是有更好的方法来做到这一点？

> ID：11196422
> 
> 赞同：6
> 
> 时间：2012-06-25T19:57:45.740
> 
> 标签：c#, winforms, custom-controls

这一直是我的一个问题，我一直在尝试制作具有良好透明度的自定义绘制表格。

这是我现在可以得到的最接近的地方，我半小时前才开始..

***编辑：*** 我从头开始制作自定义表单设计和控件，例如我最新的 Sunilla [http://i.stack.imgur.com/rqvDe.png](https://i.stack.imgur.com/rqvDe.png)。我想在上面有一个很好的阴影，或者做另一个看起来有点像 windows areo 的设计。

它将 form.opacity 设置为 0%，然后每 500 毫秒直接在表单后面抓取屏幕图像（屏幕上的任何内容、当前正在运行的程序、桌面等），并将其设置为背景并带来透明度恢复到 100%。所以我可以在上面画任何东西，它看起来很完美！但我得到的唯一问题是它在工作时会闪烁。是的，我尝试将 DoubleBuffering 设置为 true，没有区别。

听到主要代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace TTTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

            Opacity = 100;

        }

        private void button1_Click(object sender, EventArgs e)
        {
            timer1.Enabled = !timer1.Enabled;
        }

        private void timer1_Tick(object sender, EventArgs e)
        {

            Opacity = 0;
            Bitmap img = new Bitmap(this.Width, this.Height);
            Graphics gr = Graphics.FromImage(img);
            gr.CopyFromScreen(Location, Point.Empty, Size);
            this.BackgroundImage = img;
            Opacity = 100;
        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            g.SmoothingMode = SmoothingMode.AntiAlias;

            ExtDrawing2D.FillRoundRect(g, new SolidBrush(Color.FromArgb(100, 255, 255, 255)), new RectangleF(1, 1, Width - 3, Height - 3), 4f);
            g.DrawPath(new Pen(Color.FromArgb(100, 0, 0, 0)), ExtDrawing2D.GetRoundedRect(new RectangleF(0, 0, Width - 1, Height - 1), 5f));
            g.DrawPath(new Pen(Color.FromArgb(100, 255,255,255)), ExtDrawing2D.GetRoundedRect(new RectangleF(1,1, Width - 3, Height - 3), 4f));
        }

        private void button2_Click(object sender, EventArgs e)
        {
            timer1_Tick(sender, e);
        }

        private void panel1_Paint(object sender, PaintEventArgs e)
        {
            Graphics g = e.Graphics;
            g.SmoothingMode = SmoothingMode.AntiAlias;

            ExtDrawing2D.FillRoundRect(g, new SolidBrush(Color.FromArgb(150, 255,255,255)), new RectangleF(1, 1, panel1.Width - 3, panel1.Height - 3), 2f);
            g.DrawPath(new Pen(Color.FromArgb(100, 0, 0, 0)), ExtDrawing2D.GetRoundedRect(new RectangleF(0, 0, panel1.Width - 1, panel1.Height - 1), 3f));
            g.DrawPath(new Pen(Color.FromArgb(100, 255, 255, 255)), ExtDrawing2D.GetRoundedRect(new RectangleF(1, 1, panel1.Width - 3, panel1.Height - 3), 2f));
        }
    }
} 
```

***注意：*** *ExtDrawing2D 是一个单独的类，它在绘制几乎完美的圆角方面做了很多繁重的工作。AND 不是问题，我是半年前开发的，在我所有的项目中都没有遇到过问题。*

结果：

![](../Images/a49161ee858f5ff2885f3bd191f3d055.png) ![](../Images/d002e81d4e88560875266aec7590d0e1.png)

如果有更好的方法来解决这个整体问题，我很高兴听到它，尽管我已经在网上寻找了很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T01:20:47.690

我尝试了您的代码，因为我无法弄清楚您要实现的目标，是的，它闪烁很多。但这是因为您将不透明度设置为 0 并每半秒返回 1。如果看起来您正在尝试模拟透明窗口。为什么不直接使用透明窗口？IE。FormBorderStyle=None 并将 BackColor 和 TransparencyKey 设置为相同的颜色（例如红色）。

# xml - 对人员的 GET 请求以 xml 格式返回人员和公司

> ID：11196429
> 
> 赞同：0
> 
> 时间：2012-06-25T19:58:18.873
> 
> 标签：xml, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

因此，如果我有一个 PersonController 和一个 CompanyController 并且我调用 www.example.com/api/person?id=34 它将返回嵌入到 person xml 中的人和公司，如下所示：

```
<Person xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/Example.Models">
    <Name>John Smith</Name>
    <PersonId>34</PersonId>
    <Company>
             <Name>Blah</Name>
    </Company>
</Person> 
```

这将如何在 mvc 4 中完成，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:19:53.080

只需将其添加到代码中以按照我想要的方式格式化 xml 就是 person

```
public string PersonId { get; set; }
public string Name { get; set; }
public Company company { get; set; } 
```

这是公司：

```
public string Name { get; set; } 
```

这是我的控制器

```
cinfo = new Company[] {new Company {Name = CompanyName}};
info.Add(new Person {PersonId = PersonID, Name = PersonName, company = cinfo[0]}); 
```

这一切都缩短了，但这些是变化

# vba - Outlook 对象库不在版本 12 和 14 之间切换

> ID：11196432
> 
> 赞同：7
> 
> 时间：2012-06-25T19:58:34.210
> 
> 标签：vba, outlook, outlook-2010, outlook-2007

我在网络共享上有一个 .dotm 模板文件。有引用 Word、Office 和 Outlook 对象库的宏。我们使用两个不同的平台，Windows XP 和 Windows 7，以及 Microsoft Office 2007 和 Office 2010。当用户打开模板文件时，Word 和 Office 的引用会自动相应地调整（也就是说，它们被设置为 Microsoft Word 12 对象库或 Microsoft Word 14 对象库），并且宏运行没有问题。

Microsoft Outlook 对象库从版本 12 正确切换到 14。它无法从版本 14 正确切换到 12。在这种情况下，它会给出找不到库的错误。这是一个错误吗？有解决方法吗？我忽略了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T22:05:02.087

对于每个循环，

看来您的问题已基本得到解答。为了清楚起见，我将仅添加一些信息，并为这个问题提供答案。微软论坛上的一位用户 Ossiemac 指出 [LateBinding 是一种可行的方法](http://answers.microsoft.com/en-us/office/forum/office_2010-customize/microsoft-110-object-library-in-office-2010/3e67673b-b262-4b2d-a6f8-8fee244f3b74?msgId=56b7d8e7-df26-4bd9-b5e0-283839672148)。正如 Siddarth 所暗示的，这意味着您不必担心引用。

Ossiemac 提供了一些在发送电子邮件时使用 LateBinding 的示例代码，我已将其重新格式化并放置在此处：

```
Private Sub btnLateBindMethod_Click()
    ' Variables used for LateBinding
    Dim objOutlook As Object    'Outlook.Application  
    Dim objEmail As Object      'Outlook.MailItem     
    Dim objNameSpace As Object  'Outlook.NameSpace    
    Const OutLookMailItem As Long = 0    'For Late Binding
    Const OutLookFolderInbox As Long = 6 'For Late Binding
    Const OutLookFormatHTML As Long = 2  'For Late Binding
    Dim strSubject As String
    Dim strAddress As String

On Error Resume Next
Set objOutlook = GetObject(, "Outlook.Application")
On Error GoTo 0     

    If objOutlook Is Nothing Then
        Set objOutlook = CreateObject("Outlook.Application")
        Set objNameSpace = objOutlook.GetNamespace("MAPI")
        objNameSpace.GetDefaultFolder(OutLookFolderInbox).Display
    End If

Set objEmail = objOutlook.CreateItem(OutLookMailItem)

strSubject = "Hello World"

    With objEmail

        '.To = strToAddress  'Commented to prevent accidental send

        .Subject = strSubject

        .BodyFormat = OutLookFormatHTML

        .Display

        'Full Name of window can change depending on Tools -> Options -> Mail Format
        'Changing this option for outgoing mail changes the window name.
        'However, AppActivate appears not to require entire name but needs up to end
        'of - Message which is included in heading following the Subject string
        'irrespective of the Mail Format option chosen.
        AppActivate (strSubject & " - Message")

    End With    
End Sub 
```

Jimmy Pena 有一篇文章讨论[EarlyBinding 和 LateBinding 的对比](http://www.jpsoftwaretech.com/excel-vba/early-late-binding/)——

~乔尔

# python - multiprocessing.Process.__init__(self) 做什么？

> ID：11196438
> 
> 赞同：3
> 
> 时间：2012-06-25T19:58:50.533
> 
> 标签：python, multiprocessing, init

我一直在使用[此链接](http://broadcast.oreilly.com/2009/04/pymotw-multiprocessing-part-2.html)来了解多处理，但我被困在第二个示例中：

```
import multiprocessing
import time

class Consumer(multiprocessing.Process):

    def __init__(self, task_queue, result_queue):
        multiprocessing.Process.__init__(self)
        self.task_queue = task_queue
        self.result_queue = result_queue

    def run(self):
        proc_name = self.name
        while True:
            next_task = self.task_queue.get()
            if next_task is None:
                # Poison pill means we should exit
                print '%s: Exiting' % proc_name
                break
            print '%s: %s' % (proc_name, next_task)
            answer = next_task()
            self.result_queue.put(answer)
        return

class Task(object):
    def __init__(self, a, b):
        self.a = a
        self.b = b
    def __call__(self):
        time.sleep(0.1) # pretend to take some time to do our work
        return '%s * %s = %s' % (self.a, self.b, self.a * self.b)
    def __str__(self):
        return '%s * %s' % (self.a, self.b)

if __name__ == '__main__':
    # Establish communication queues
    tasks = multiprocessing.Queue()
    results = multiprocessing.Queue()

    # Start consumers
    num_consumers = multiprocessing.cpu_count() * 2
    print 'Creating %d consumers' % num_consumers
    consumers = [ Consumer(tasks, results)
                  for i in xrange(num_consumers) ]
    for w in consumers:
        w.start()

    # Enqueue jobs
    num_jobs = 10
    for i in xrange(num_jobs):
        tasks.put(Task(i, i))

    # Add a poison pill for each consumer
    for i in xrange(num_consumers):
        tasks.put(None)

    # Start printing results
    while num_jobs:
        result = results.get()
        print 'Result:', result
        num_jobs -= 1 
```

首先，有人可以解释一下具体是什么`multiprocessing.Process.__init__(self)`吗？另外我不完全确定队列是如何工作的，我很困惑消费者类中的 run 方法是如何执行的，即使它从未被调用过（至少明确地......）

如果有人可以帮助我完成示例以获得给定的输出，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:04:39.107

当一个类的对象被创建时，它的`__init__()`方法被自动调用来初始化它。在第二个示例中，类`Consumer`被定义为继承自`multiprocess.Process`. 初始化的第一件事`Consumer`是初始化它的 base `Process`，以确保它准备好运行。与许多 OO 语言不同，Python 中不会自动调用基类`__init__()`函数。

当在主进程的对象上调用该`run()`方法时，会在新进程中自动调用该方法。那是在[多处理](http://docs.python.org/library/multiprocessing.html#multiprocessing.Process.start)文档中。`start()``Consumer`

这`Queue`就是多个进程通信的方式。通常，单独的进程不能看到彼此的数据，但`Queue`可以让它们来回传递消息。在这个例子中，主进程将几个任务放入一个队列中，其他每个进程将从该队列中拉出一个任务，执行它，并将结果发送回另一个队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:00:56.460

`__init__`是一个类构造函数。[在这里](http://www.penzilla.net/tutorials/python/classes/)查看更多背景信息。

根据[文档，](http://docs.python.org/library/multiprocessing.html#process-and-exceptions)这必须在子类中调用：

> 如果子类覆盖构造函数，它必须确保在对进程执行任何其他操作之前调用基类构造函数（**Process.init** ()）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:11:38.937

好吧，这可能不是您正在寻找的答案……但我认为这是最好的答案。

对象在`Process`创建时应该会产生很多困难。我不知道它应该做什么，但我相当确定它应该创建另一个操作系统进程、通信管道等。默认情况下，所有这些东西都是在初始化方法中执行的（在 Python 中，称为`__init__()`）。因此，如果您创建一个子类，则`Process`应该调用父`__init__()`方法来初始化流程所需的一切。由于您的`Consumer`班级应该做所有`Process`事情，它应该拥有所有的东西`Process`，并且`__init__()`调用保证了它。

实际上，它究竟做了什么是无关紧要的*。*这就是现有方法的全部意义，例如`__init__()`：它们为您执行艰苦的工作，您只需调用它。所以，[我们可以深入了解 Python 源代码，看看它做了什么`__init__()`，](http://hg.python.org/cpython/file/a9a12ad553f0/Lib/multiprocessing/process.py#l62)但对于现在似乎正在开始使用 Python 的你来说，最好的答案是它`__init__()`做了很多你不需要知道的初始化工作。

# symfony - 如何在 symfony2 中实现类型文件

> ID：11196448
> 
> 赞同：0
> 
> 时间：2012-06-25T19:59:22.593
> 
> 标签：symfony

问题是处理文件类型字段。

通过这样做，我现在将该字段设为“浏览以上传文件”以节省时间。如果有人有例子，我不知道如何正确处理它。会非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:45:04.130

食谱有一个很好的教程

[http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)

加上参考中的更多基础知识

[http://symfony.com/doc/current/reference/forms/types/file.html](http://symfony.com/doc/current/reference/forms/types/file.html)

# hyperlink - 我网页上的一些链接不起作用

> ID：11196449
> 
> 赞同：0
> 
> 时间：2012-06-25T19:59:24.297
> 
> 标签：hyperlink

在我新创建的[网页上](http://www.rockwellutilities.com/)，我有一列链接，除了前两个之外，所有链接都可以使用。我已经仔细检查了代码，所有代码似乎都是统一的。我不太清楚为什么它不允许我点击顶部的两个链接，但其余的似乎工作正常。如果有人可以解决问题所在，我将不胜感激！我已经粘贴了我认为可能包含问题的代码部分！谢谢！

```
<!DOCTYPEhtml>
<html>

    <head>
        <title> Rockwell Utilities </title>
        <link href="rockwell.css" rel="stylesheet" type="text/css"/>
    </head>

    <div class="pos_top"><div id="bubbles"><img src="/rockwell/sepiawater.jpg" alt="Water Drop" height="250" width="1000"/></div></div>
    <div id="header"><div id="logo"><img src="/rockwell/Rockwellnewnewedit.png" alt="Rockwell Utilities" height="400" width="500" /></div></div>

    </body>

        <div id="wrapper">
            <h1> Rockwell Utilities Welcomes You! </h1>     
    <div id="intro">

            <p>Rockwell Utilities is your number one choice in water and sewage.<br> We provide service to the Lakemoor, Illinois area,
            <br>and have since 2007.
            </p>    

            <img src="/rockwell/award.png" alt="Illinois Department of Health" height="200" width="500"/>
             <a href="http://www.idph.state.il.us/public/press12/2011_Fluoridation_award_list.pdf"> <p>Rockwell 
            Utilities wins Illinois Department of Health Community Water Fluoridation Award four consecutive years!</p>
            </a>

    </div>          
            <div id="navigation_sidebar">

                    <div id="navigation_links">
                        <p>
                            <a href="email.html" title="Email Us"><img src="/rockwell/emailus.png" alt="Email Us"/></a>
                            <a href="payments.html" title="Pay My Bill"><img src="/rockwell/paymybill.png"alt="Pay My Bill"/></a>
                            <a href="calendar.html" title="Calendar"><img src="/rockwell/calendar.png"alt="Calendar"/></a>
                            <a href="notices.html" title="Notices"><img src="/rockwell/notices.png"alt="Notices"/></a>
                            <a href="paymentop.html" title="Payment Options"><img src="/rockwell/paymentop.png"alt="Payment Options"/></a>
                            <a href="rates.html" title="Our Rates"><img src="/rockwell/ourrates.png"alt="Our Rates"/></a>
                        </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:02:49.560

您的徽标 ( `Rockwellnewnewedit.png`) 与两个链接重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:03:50.063

您是否仔细检查过，`email.html`并且`payments.html`在目录中为`calendar.html`、`notices.html`、`paymenttop.html`和`rates.html`？如果最后 4 个有效，而前 2 个给你一个`404`，那很可能是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:04:26.053

我不知道这是否会导致您描述的问题，但引起我注意的是 src-attribute 值和 alt 属性之间没有空格，如：

```
<img src="/rockwell/paymybill.png"alt="Pay My Bill"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:07:04.767

[http://i46.tinypic.com/dpvgo7.png](http://i46.tinypic.com/dpvgo7.png) 您的图片与此图片中的两个链接重叠 我的建议是缩小图片并使用开发工具查看问题所在，因为这样您就可以看到图片是什么正在做。

# java - Apache Tomcat 上的 Java Web 应用程序

> ID：11196454
> 
> 赞同：0
> 
> 时间：2012-06-25T19:59:44.170
> 
> 标签：java, apache, tomcat, vaadin

我正在使用 Vaadin 框架在 Java 中开发一个 Web 应用程序。

我在 Apache Tomcat 上运行该应用程序。我想问的是，如果我在 Apache Tomcat 上运行该应用程序并在两台不同的计算机上使用两个不同的浏览器访问同一个应用程序，那么该应用程序在 Tomcat 上有两个实例还是只有一个实例？我已经搜索过了，但未能找到满意的答案。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:07:08.610

如果您在 Tomcat 中运行 Web 应用程序，您将拥有一个 Tomcat 实例，它将托管您的应用程序。这个单一的 Tomcat 实例（以及您的 Web 应用程序）将能够从许多不同的计算机发出许多不同的浏览器请求。这正是 Web 服务器的设计目的：处理来自许多不同客户端的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:22:25.037

一个 Tomcat 实例，以及多个 Vaadin 应用程序实例。

要访问您的 Vaadin 应用程序，用户将其 Web 浏览器指向您的 Vaadin 应用程序的 URL。Tomcat 必须已经在运行才能接受来自 Web 浏览器的请求。当已运行的 Tomcat 实例收到该请求时，Tomcat 会启动一个新线程。在该线程中，将创建并运行 Vaadin“应用程序”类的子类的新实例。

因此，如果您有 5 个同时运行您的 Vaadin 应用程序的用户，您将运行一个 Tomcat 实例。并且该 Tomcat 实例将运行 5 个会话，每个会话在其自己的线程中运行自己的 Vaadin“应用程序”子类实例。

应用中标记为“静态”的任何内容都适用于应用的所有 5 个实例，而未标记为“静态”的任何内容仅适用于应用的单个实例（单个用户）。

# nosql - 如何实现经常更新且需要维护顺序的持久化排序列表

> ID：11196460
> 
> 赞同：4
> 
> 时间：2012-06-25T20:00:06.337
> 
> 标签：nosql, rdbms, sortedlist, sortedset

我需要显示按上次访问排序的社区成员。有数百万个社区，每个社区都可以拥有数百万个成员。该列表应该是可滚动的。由于按上次访问时间排序，因此订单经常更新。

在 RDBMS 中，这个功能可以简单地通过普通的 B 树索引来完成。但是如何使用 NoSQL 方法来做到这一点？

我目前的想法是：

由于需要重新排序，使用链接的固定长度存储桶的标准 NoSQL 可滚动列表方法没有多大帮助。

[Cassandra](http://cassandra.apache.org/)保持按列名排序的值。所以理论上我可以使用上次访问时间作为列键，但是对于每次更新，我都需要删除现有列并插入听起来不太有效的新列。

[Apache Lucene](http://lucene.apache.org/core/)不是 NoSQL 存储，但也是一种选择，因为它创建了排序索引。但我不确定它如何针对大规模更新进行扩展。

[Redis Sorted Sets](http://redis.io/topics/data-types)听起来很有前途，但我还没有经验。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T21:30:44.583

如果您在对象中保留最后修改日期，您可以在许多 NoSQL 数据库中的查询时进行排序：

MongoDB（参见[索引文档](http://docs.mongodb.org/manual/core/indexes/)）：

```
db.collection.find({ ... spec ... }).sort({ key: 1 })
db.collection.ensureIndex( { "username" : 1, "timestamp" : -1 } ) 
```

[弹性搜索也对查询进行排序](http://www.elasticsearch.org/guide/reference/api/search/sort/)：

```
{
  "sort" : [
      { "date" : {"order" : "asc"} }
  ],
  "query" : {
      ...
  }
} 
```

像 CouchDB 这样的一些存储似乎完全缺乏内置的排序功能，因此在投资之前查看特定的解决方案是值得的。

# c# - 如何替换文件中 40% 的字符？C＃

> ID：11196462
> 
> 赞同：-5
> 
> 时间：2012-06-25T20:00:12.603
> 
> 标签：c#, .net

我有一个带有这样字符的文本文件（例如）： **嗨，伙计。怎么样了。凉爽的。大声笑。喜欢这个东西。真正的。是的，不可能。这是真的。哈哈。**

这个字符是预先确定的，在这种情况下是“。” 我应该用另一个角色替换这个角色的 40%。40% 的字符是随机选择的（只能从“.”中选择）。我将如何找到这些字符，然后替换它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:06:10.433

您找到 . 的数量，例如：20 并存储 . 的索引。进入一个数组你找到你想删除多少个：例子：8 然后你遍历索引数组 8 次，从该数组中随机获取一个并用空格替换该索引。顺便说一句，您需要在每次更新时从数组中删除更新的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:11:56.660

您想要做的是找到“。”的所有索引。并将它们存储在某个地方，在这种情况下是一个数组。拥有所有这些索引后，您将获取最大的索引并将其用作随机数生成器的最大值。将最大索引除以 40，您就有了需要替换字符的次数。获取您生成的随机数并开始替换这些索引处的字符。

```
int i = 0, chr[] = 0;
while (chr[i] != -1)
{
    if (string.indexof(specifiedChar, chr[i]) != -1)
     {
      chr[i] = string.indexof(specifiedChar, chr);
      i ++; 
     }
    else
     {
      chr = -1;
     } 
} 
```

chr[] 将具有所有 . 的索引（假设我 specificedChar = '.'）。i = '.' 的数量。不要将上面的代码视为准备推出，但它通常对您的问题是正确的。

```
endInt = i;
int x = RandomNumber.Next(startInt, endInt); 
```

然后将 index[x] 处的字符替换为 ' '

# iphone - iOS 视频播放器元数据

> ID：11196466
> 
> 赞同：1
> 
> 时间：2012-06-25T20:00:28.830
> 
> 标签：iphone, ios, video, html5-video

我的问题是 iOS 中的视频播放器是否有任何内置的元数据解释。我知道可以将元数据添加到视频并在自定义应用程序中对其进行解释，如下[所示](http://jmacmullin.wordpress.com/2010/11/03/adding-meta-data-to-video-in-ios/)。

在 ipod 或 iphone 上的 iOS 中，会在本机播放器中打开 HTML 视频。我想在开始时在视频上方或下方短时间显示一条消息。由于我无法控制本机播放器，我认为可能有一些内置的元数据解释可用于执行此操作。我无法找到有关此的任何信息。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:08:40.377

您发布的博客包含有关使用本机播放器 MPMoviePlayerController 显示元数据的详细信息，这实际上非常酷。你每天学习新的东西！如果您正在制作 Phonegap 应用程序，我想您可以编写一个插件来做到这一点？

或者，看看这个其他操作系统问题，这似乎表明这是可能的——尽管似乎没有嵌入实际视频中的元数据。显然这适用于iOS。

[使用 Captionator 从 HTML5 <video> 的 <track> 读取元数据](https://stackoverflow.com/questions/9370260/reading-metadata-from-the-track-of-an-html5-video-using-captionator)

# php - Javascript 多值调用

> ID：11196470
> 
> 赞同：0
> 
> 时间：2012-06-25T20:00:45.130
> 
> 标签：php, javascript, onclick

我正在从输入单选按钮调用一个函数并具有以下功能：

```
onClick=\"changeBilling('".$results['id']."', this.value)\" 
```

但是我的 this.value 不能正常工作。当我在页面中查找时，id 填充正确，但第二个值仍然显示 this.value，而不是调用函数的按钮的值。

我在浏览器元素管理器中看到了这一点：

```
onclick="changeBilling('149', this.value)" 
```

我究竟做错了什么？

单选按钮：

```
<input type='radio' name='billed' value='Yes' onClick=\"changeBilling('".$results['id']."', this.value)\"/> Yes<br /><input type='radio' name='billed' value='No' onClick=\"changebilling('".$results['id']."', this.value)\" checked/> No 
```

理想输出：

```
onclick="changeBilling('149', 'Yes')" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:14:23.663

`this.value`将由客户端评估，作为它的 javascrpt，所以你不会从你的 php 中看到“烘焙”值，你需要在运行时检查这个，你最好的办法是提醒值`this.value`并检查它是否是什么你期望，因为这是将传递给`changeBilling`

```
onClick=\"alert('The value is: '+this.value)\" 
```

您可能遇到的问题是，它`this`可能无法评估您期望的东西，要找出（如果您有像 Element 检查器（chrome）或 firebug（firefox）这样的良好调试器）将放置：

```
 onClick=\"console.log(this)\" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:25:02.493

为什么不直接在 PHP 中输​​出文字值：

```
echo "<input type='radio' name='billed' value='Yes' onClick=\"changeBilling('".$results['id']."', 'Yes')\"/> Yes<br /><input type='radio' name='billed' value='No' onClick=\"changebilling('".$results['id']."', 'No')\" checked/> No"; 
```

**编辑**

我不完全确定您期望发生什么，但是您编写的代码似乎没有任何问题。为了证明这一点，请参阅这个[JSFiddle](http://jsfiddle.net/J5CDN/)，它展示了它是如何`this.value`工作的（请注意，这与 PHP 无关）。

# delphi - 在 C++ Builder 中启用安全异常处理

> ID：11196471
> 
> 赞同：13
> 
> 时间：2012-06-25T20:00:46.097
> 
> 标签：delphi, windows-8, c++builder, seh, aslr

对于 Windows 8 应用程序认证，有（除其他外）以下要求：

*   3.2 必须使用`/SafeSEH`标志编译您的应用程序以确保安全的异常处理
*   3.3 你的app必须使用`/NXCOMPAT`flag编译，防止数据执行
*   3.4 您的应用程序必须使用`/DYNAMICBASE`地址空间布局随机化 (ASLR) 标志进行编译

我无法找到如何在 C++Builder XE 中启用其中任何一个。

对于`/NXCOMPAT`and `/DYNAMICBASE`，可以`editbin.exe`从 VS 或`peflags.exe`Cygwin 使用。虽然我会对可能的副作用更有信心，但如果有本地方法来启用这些。

无论如何，我完全不知所措`/SafeSEH`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T23:45:41.313

首先，/SafeSEH 仅适用于 x86，不适用于 x64 或 ARM。它要求您的编译器生成附加表来指示出于安全原因被视为有效异常处理程序的函数地址。您可以自己执行此操作的可能性很小，但这需要您查看已`fs:0`编译的汇编代码中的异常处理链并枚举该链上曾经推送过的所有地址，然后按照此处记录的方式描述它们： [http:// msdn.microsoft.com/en-us/library/9a89h429(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/9a89h429%28v=VS.80%29.aspx)。您的代码实际上没有任何处理程序的可能性很小，并且它们都在 C++Builder 的运行时中（如果运行时是单独的 DLL，可能会很容易）。

您应该尝试说服 C++Builder 更新他们的编译器以支持 SafeSEH。它自 XP SP2 以来一直存在于 Windows 平台中，并填补了一个非常讨厌的安全漏洞（x86 中的堆栈中存在异常处理程序地址，只是等待缓冲区溢出以将任何随机地址放在那里执行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T21:59:50.547

对于与`/NXCOMPAT`和相关的问题`/DYNAMICBASE`，我在此处创建了一个 C++ Builder 链接器请求以支持这些标志：[https ://quality.embarcadero.com/browse/RSP-13072](https://quality.embarcadero.com/browse/RSP-13072)

从 Visual C++使用`editbin.exe`几乎不是一个理想的解决方案，它们的链接器需要原生支持这些标志。

**更新**：这里创建了一个附加请求，用于分发已设置这些标志的 C++ Builder/Delphi 运行时文件（DLL/BPL），以避免必须使用 Visual C++ 中的 EDITBIN 自行设置它们： [https：/ /quality.embarcadero.com/browse/RSP-13231](https://quality.embarcadero.com/browse/RSP-13231)

# c# - 如何使用 MEF 允许插件覆盖现有功能？

> ID：11196472
> 
> 赞同：7
> 
> 时间：2012-06-25T20:00:50.123
> 
> 标签：c#, mef

我正在使用 MEF 来允许用户扩展我的 C# 库。到目前为止它工作得很好，但现在我正试图以一种我以前从未见过的方式使用它。

到目前为止，我看到的 MEF 的主要用例是：

*   应用程序公开原始接口 ( `IPerson`)
*   外部库使用 MEF 和原始接口来扩展主库的功能（例如`IPoliceman : IPerson`，添加功能）
*   然后应用程序根据它必须做什么`ImportMany`来搜索正确的`IPerson`

但我需要这样的东西：假设我有一个税收计算器，它采用一堆参数并根据这些参数返回估计的税收。我希望用户能够使用 MEF 创建插件来**修改**这些计算的完成方式。任何时候都应该只能加载一个执行此操作的插件。否则，我如何决定使用哪个替代实现？

所以基本上，我的问题归结为：通常 MEF 允许**添加**类和方法的实现。如何使用它来允许用户**替换**实现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T08:27:52.467

通常，当您尝试覆盖应用程序中已经存在的导出时，您将获得一个基数异常，`[Import(typeof(IFoo)]`因为 MEF 期望只有一个匹配的导出可用。

但是，您可以将插件放在单独的导出提供程序中并给予优先权。在这里，我为应用程序文件夹中的“插件”子文件夹执行此操作：

```
Assembly executingAssembly = Assembly.GetExecutingAssembly();
string exeLocation = Path.GetDirectoryName(executingAssembly.Location);
string pluginPath = Path.Combine(exeLocation, "plugins");

var pluginCatalog = new DirectoryCatalog(pluginPath);
var pluginExportProvider = new CatalogExportProvider(pluginCatalog);

var appCatalog = new DirectoryCatalog(exeLocation,"*");
var appExportProvider = new CatalogExportProvider(appCatalog);

var container = new CompositionContainer(
    pluginExportProvider, appExportProvider);

pluginExportProvider.SourceProvider = container;
appExportProvider.SourceProvider = container; 
```

传递给组合容器的导出提供程序的顺序决定了优先级：如果插件和应用程序部分都提供导出，则插件将获得优先级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T20:10:36.053

您所说的实际上只是看待同一问题的不同方式。答案比听起来简单 - 对于您希望客户端能够覆盖的任何行为，只需将该行为放在插件中即可。

没有什么说你不能仅仅因为你是应用程序的作者而编写插件。将您的 TaxCalculator 类放入插件中，并公开一个允许用户编写自己的税务计算器的界面。在运行时，如果您加载了多个，请选择不属于您的那个。开箱即用，您将使用税务计算器插件，因此它将完全按照您的预期工作。如果用户创建自己的税收计算器插件并将其放在正确的目录中，您可以使用它，从而有效地允许他们“覆盖”您的原始功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T20:18:06.687

我不确定会有多大意义，但让我试试。

我会`TaxCalculatorManager`上课。该类可以`ITaxCalculator`从 MEF 加载所有实现。从那里，您可以在`Export`属性中包含一些允许对实现进行排名的东西。然后，当您需要计算税收时，您会调用`TaxCalculatorManager.Calculate`which 将对`ITaxCalculator`实现进行排名并调用`Calculate`获胜者。

如果您需要我澄清任何问题，请告诉我。

# batch-file - ffmpeg 转换 - 保持音频比特率

> ID：11196474
> 
> 赞同：8
> 
> 时间：2012-06-25T20:00:55.347
> 
> 标签：batch-file, ffmpeg

我正在使用 ffmpeg 从不同的视频格式（flv、mp4）中提取音频并将其转换为 mp3。

```
%~dp0ffmpeg.exe -i %1 -ar 44100 -ac 2 -ab 128k "%~dpn1.mp3" 
```

这工作得很好。但是，在我的输入文件中，音频比特率会有所不同，我想相应地调整输出比特率。即使通过广泛的谷歌搜索，我也没有找到任何提示如何保持原始比特率。

我需要的是这样的：

```
-ab copy 
```

当然，这不起作用。

有什么可行的吗？

PS：正如您可能从上面的格式中得出的那样，我使用的是 Windows 批处理文件。会有黑客使用*%~dp0ffmpeg.exe -i*，通过 grep 获取音频比特率并将其插入命令行。我只是认为**必须有**一种更简单、更优雅的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:57:10.897

即使原始线程正在寻找答案而没有任何问题，但 nate 的脚本似乎是最有用的帖子。但它有一些限制，例如并非所有输出都会给你一个比特率grepped，一些投票给你只是结果“默认”。这是一个稍微改进的版本。

```
#!/bin/env bash
ext=$1
for f in *.${ext}; do
    x=${f%.*} ;
    x=${x% - YouTube}; # I usually download some song covers from YouTube.
    x=$x".mp3";
    bit=`ffmpeg -i "${f}" 2>&1 | grep Audio | awk -F", " '{print $5}' | cut -d' ' -f1`
    if [ -n "$bit" ]; then
        ffmpeg -i "$f" -ab ${bit}k "$x"
    else
        ffmpeg -i "$f" "$x" # this is if we don't have an output from the grep line above, ffmpeg will keep the original quality, that is 192k for 192k
    fi        
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T22:33:18.937

这是一个 bash 脚本，它将采用文件扩展名并从具有该扩展名的任何文件中提取音频，当然还要保持比特率。我不能声称代码的关键部分的功劳，因为那是[写这个博客的绅士。](http://blog.kdecherf.com/2012/01/14/ffmpeg-converting-m4a-files-to-mp3-with-the-same-bitrate/)

```
#!/bin/bash

ext=$1

for file in *.${ext}; do
    tmpfn=${file%.*} ; # get rid of file ext
    tmpfn=$tmpfn".mp3"; # add mp3 file ext
    # next line gets bitrate of audio from video using ffmpeg
    bit=`ffmpeg -i "${file}" 2>&1 | grep Audio | awk -F", " '{print $5}' | cut -d' ' -f1`
    # finally, convert to mp3 using proper bitrate
    ffmpeg -i "$file" -ab ${bit}k "$tmpfn"
done 
```

只需在您拥有文件的目录中运行它，如下所示：

```
$bash script.sh flv 
```

其中 flv 是文件扩展名。破解它以使其完全按照您的意愿进行操作，或根据您的内心处理多种文件类型。

编辑：对于 Ubuntu/debian/etc 上的任何人来说只是一个简短的说明。确保您安装了额外的编解码器包，否则它将无法工作，即您必须安装 ffmpeg 和额外的 libav 编解码器包，否则您将度过一段糟糕的时光。这应该可以解决问题：

```
sudo apt-get ffmpeg libavcodec-extra-53 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-31T12:01:40.517

正如 LordNeckbeard 所说，使用相同的比特率以不同的格式进行编码并不一定是明智的。然而...

这是一个批处理文件解决方案，它捕获输入文件比特率并将其用作编码命令行的参数。最初的提问者暗示了这种方法。`mp3`输出文件创建在与输入文件相同的文件夹中。

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
REM Usage: scriptname.cmd "full-quoted-path-to-input-file"
REM Adjust FFMPEG_PATH variable value to match the path to your FFMPEG binary

SET FFMPEG_PATH=C:\Program Files\ffmpeg-20170807-1bef008-win64-static\bin
SET INPUT_FILE_FULL_PATH=%1

REM Get input file bitrate
FOR /F "tokens=5 delims==," %%i IN ('""%FFMPEG_PATH%\ffmpeg.exe" -i %INPUT_FILE_FULL_PATH% 2>&1 | find "Audio:""') DO (
    FOR /F "tokens=1 delims==k" %%j IN ('ECHO %%i') DO ( 
        SET BITRATE=%%j
        SET BITRATE=!BITRATE: =!
        ECHO Input file bitrate is !BITRATE! kb/s
    )
)

REM Encode file using previously captured bitrate
"%FFMPEG_PATH%\ffmpeg.exe" -i %INPUT_FILE_FULL_PATH% -ar 44100 -ac 2 -ab !BITRATE!k "%~dpn1.mp3" 
```

有收紧代码的空间，例如，检查以确保提供了至少一个参数，并且`BITRATE`在开始编码之前它不为空，但作为一个粗略且现成的解决方案，这应该没问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-26T22:46:19.950

当前版本的 ffmpeg（测试 2.1.4）建议使用“-qscale 0”来保持质量。这对我的 mpeg4 视频测试文件有用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-03-17T10:20:49.813

试试这个选项：`-codec copy`或`-acodec copy`仅用于音频。
检查此参考[http://ffmpeg.org/ffmpeg.html#Stream-specifiers-1](http://ffmpeg.org/ffmpeg.html#Stream-specifiers-1)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-26T06:35:41.223

代替

```
-ab copy 
```

尝试

```
-sameq

%~dp0ffmpeg.exe -i %1 -sameq "%~dpn1.mp3" 
```

# python - 直接使用 urllib2 的 urlopen 方法，而不是将 urllib2.request 传递给 urlopen

> ID：11196480
> 
> 赞同：1
> 
> 时间：2012-06-25T20:01:12.837
> 
> 标签：python, http, urllib2

我有点困惑什么时候应该直接调用 urlopen，什么时候应该先调用 request 并将结果传递给 open。我唯一可以肯定的是，我认为如果他们想指定标头参数，必须先调用 request ，但我认为可能还有更多。

# image - MATLAB - 图像哈夫曼编码

> ID：11196481
> 
> 赞同：1
> 
> 时间：2012-06-25T20:01:13.743
> 
> 标签：image, matlab, huffman-code

我有一个作业，我必须将一些图像转换为灰度并使用霍夫曼编码压缩它们。我将它们转换为灰度，然后尝试压缩它们，但出现错误。我使用了在[这里](https://stackoverflow.com/questions/8631044/matlab-image-compression)找到的代码。

这是我正在使用的代码：

```
A=imread('Gray\36.png');
[symbols,p]=hist(A,unique(A))
p=p/sum(p)
[dict,avglen]=huffmandict(symbols,p)
comp=huffmanenco(A,dict) 
```

这是我得到的错误。它发生在第二行。

```
Error using eps
Class must be 'single' or 'double'.

Error in hist (line 90)
    bins = xx + eps(xx); 
```

我究竟做错了什么？

谢谢。

PS我怎样才能找到每个图像的压缩比？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T21:39:12.343

问题是，当您指定 bin 位置（'hist' 的第二个输入参数）时，它们需要是单的或双的。但是，向量 A 本身没有。这很好，因为有时您不想将整个数据集从整数类型转换为浮点精度。这将修复您的代码：

```
[symbols,p]=hist(A,double(unique(A))) 
```

[单击此处](http://www.mathworks.com/support/solutions/en/data/1-2RFPNI/?product=ML&solution=1-2RFPNI)查看此问题的详细讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:09:12.913

第一次尝试 ：

```
whos A 
```

似乎它的类型必须是单的或双的。如果没有，请`A = double(A)`在 imread 行之后执行。应该这样工作，但是我很惊讶 hist 没有进行转换... [编辑] 我刚刚测试过它，我是对的，hist 在 uint8 中不起作用，但是一旦我转换我的就可以了图像加倍。

# c++ - 为什么 malloc_trim() 只适用于主竞技场？

> ID：11196482
> 
> 赞同：3
> 
> 时间：2012-06-25T20:01:17.440
> 
> 标签：c++, c, glibc

glibc 的 malloc 实现支持 'malloc_trim()' 调用，它允许应用程序将未使用的（即释放的内存块）释放回系统（实现细节：通过使用负参数调用 sbrk() 来减少程序的数据段）。但是，此功能仅适用于主竞技场。在多线程程序中，有多个存储释放块的区域。为什么这个调用也不会从其他领域释放内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:23:16.343

除了主要的竞技场之外，其他竞技场可能是从系统分配的，`mmap`因此`sbrk`不能用于将该内存返回给系统。可以使用 glibc`mremap`来缩小这些其他领域。另请注意，`malloc_trim`只能在竞技场结束时返回内存，如果竞技场中间有空块，则无法释放该内存。

# java - 为什么没有生成 OutOfMemoryError？

> ID：11196488
> 
> 赞同：1
> 
> 时间：2012-06-25T20:01:44.520
> 
> 标签：java, linux, shell, out-of-memory

经过一段时间的工作，我的 java 编写的应用程序被“杀死”了。

Java 应用程序是从 Linux 下的 SH 脚本启动的，该脚本运行了一段时间。之后显示PID并说“杀死”字样。

像这样：

```
runMyServer.sh: line 3: 3593 Killed         java -Xmx2024m -cp ... 
```

系统日志中有关于内存不足事件的信息。所以它看起来像内存不足错误。

我的问题是：什么时候不能生成 OutOfMemroyError 异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:09:42.433

您的系统上的内存可能太少，或者运行的进程会耗尽所有内存和交换。当 GNU/Linux 内存不足时，它会杀死占用大量内存的进程。这基本上只是杀死进程，所以不是你的Java进程内存不足，而是操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:15:22.283

为了避免您的 java 应用程序被 OOM 杀手杀死，只需向您的系统添加足够的交换并禁用内存过度使用。

```
dd if=/dev/zero of=/swapfile bs=1M count=2048
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
echo "/swapfile               swap                    swap    defaults        0 0" >> /etc/fstab
echo 2 > /proc/sys/vm/overcommit_memory 
```

# python - 类型是否在python中创建类'Object'

> ID：11196489
> 
> 赞同：2
> 
> 时间：2012-06-25T20:01:44.637
> 
> 标签：python, metaclass

我正在阅读这篇关于元类的优秀文章[什么是 Python 中的元类？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python). 接受的答案显示了如何使用`type`以下签名创建类。

```
type(name of the class, 
      tuple of the parent class (for inheritance, can be empty), 
      dictionary containing attributes names and values) 
```

这让我想知道是谁创建了对象类。对象类也是由`type`类创建的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T20:07:28.800

理论上你是对的。`object`是 的一个实例`type`。但是，当您检查`type`的基类时，您会发现它`type`继承自`object`! 怎么会这样？

事实是，这在 Python 解释器中是硬编码的。两者`object`都`type`给出；两者实际上都没有以任何方式参与创建另一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T20:30:44.727

在对象/类型层次结构的这些稀有级别上要记住的主要事情是，类似的东西`object`根本`type`不是在 .py 文件中创建的，它们是在 C 代码中静态创建的，以及 CPython 的其他基础基础。所以它们不一定是用任何特定的 Python 代码“创建”的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:13:04.640

`type`有点 - 嗯，不知道如何描述它 -语言的*怪人*。

它可以用来做 type(someobj) 或用作某种构造函数（带有 3 个参数）来创建从带有实例的基类派生的新类型。正如您在元类中看到的那样 - 制作工厂类很有用 - 虽然，恕我直言，除非您真的想太聪明，否则使用类装饰器会使这在 2.6+ 中稍微容易一些

# ruby-on-rails - 使用 Rails 和 Mongo 对键进行字符串化的优雅方法？

> ID：11196491
> 
> 赞同：0
> 
> 时间：2012-06-25T20:01:54.057
> 
> 标签：ruby-on-rails, ruby, mongodb

如果您为 Mongo 提供使用符号作为键的哈希并保存文档，它将“字符串化”它，这意味着键将被转换为字符串。总结一下：

```
条件：哈希键将是：
---------- ------------------
初始化文档符号或字符串后
保存文档字符串后
获取文档字符串后

```

这种“不对称”导致我的测试有些丑陋。我希望能够“依赖”始终是字符串的键 - 而不必担心文档是否刚刚初始化。

避免这种情况的一种或多种优雅方法是什么？

注意：就我而言，我使用的是 Mongoid，但我认为这个问题不一定是 Mongoid 特定的。它可能适用于任何使用 MongoDB 的 Rails 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:01:54.493

我目前的解决方案是覆盖每个字段设置器来调用`stringify_keys!`. 例如：

```
def field_name=(x)
  x.stringify_keys! if x
  super(x)
end 
```

这是迄今为止我发现的最好的。我考虑了其他选择：

*   使用[`before_validation`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)回调。但是，我不喜欢这种方法。我不喜欢`valid?`为了触发字符串化而不得不打电话。

*   使用[`after_initialize`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#after_initialize-and-after_find). 但是，这并不能处理初始化后调用 setter 的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:23:00.403

沿着这些路线的东西可能会起作用。基本上这段代码重新定义了 Mongoid 的`field`宏（它的 setter）。

```
require 'mongoid'

module Stringifier
  def field name, args = {}
    super # call mongoid implementation

    define_method "#{name}=" do |val|
      val.stringify_keys! if val && val.respond_to?(:stringify_keys!)
      super(val)
    end
  end
end

class Foo
  include Mongoid::Document
  extend Stringifier

  field :subhash, type: Hash
end

f = Foo.new
f.subhash = {a: 1, b: 2}

puts f.subhash
# >> {"a"=>1, "b"=>2} 
```

这可能不是最干净的实现，但你明白了。

# java - Java 奇怪的 ExceptionInInitializerError

> ID：11196493
> 
> 赞同：0
> 
> 时间：2012-06-25T20:01:59.530
> 
> 标签：java, initialization

我尽一切努力让这段代码正常工作，我希望有人能救我..

我只想初始化我现在在评论中的对象 Street1 和 Street2。

我发现使我的代码工作的唯一方法是像这样初始化它们：

Street1 = 新对象[0];
Street2 = 新对象[0]；

但我无法填充我的对象！我工作了好几天，但是当我决定进入非静态课程时，它只是给了我那个错误..请问有什么问题？

```
public class Maps {

int CurrentMapID ;

int CheckedObjetQuantity=0;

Map[] MapList = new Map[5];

Objects[] Street1; 
Objects[] Street2;

Map CurrentMap;

public Maps(){

    CurrentMapID = 1;

    //Street1 = {new Objects(987,1020,1,2),new Objects(985,1036,3,75/*,true,3*/),new Objects(1259,1028,1,3),new Objects(3391,1036,1,1),new Objects(213,1013,102,1)};  // les Objets de la map Street1      (x,y,IDobjet,quantité)
    //Street2 = {new Objects(1891,1011,1), new Objects (1847,1025,101)};

    Street1 = new Objects[0];
    Street2 = new Objects[0];

    MapList[1]= new Map (1,4,2,Street1,(Main.InstallPath+"maps/street.png"),(Main.InstallPath+"maps/fstreet.png"),(Main.InstallPath+"maps/streetcollision.png"),50,800,3600,800);
    MapList[2]= new Map (2,1,3,Street2,(Main.InstallPath+"maps/street2.png"),(Main.InstallPath+"maps/fstreet2.png"),(Main.InstallPath+"maps/street2collision.png"),50,800,3600,800);
    MapList[3]= new Map (3,2,4,Street2,(Main.InstallPath+"maps/street2.png"),(Main.InstallPath+"maps/fstreet2.png"),(Main.InstallPath+"maps/street2collision.png"),50,800,3600,800);
    MapList[4]= new Map (4,3,1,Street2,(Main.InstallPath+"maps/street2.png"),(Main.InstallPath+"maps/fstreet2.png"),(Main.InstallPath+"maps/street2collision.png"),50,800,3600,800);

    CurrentMap = MapList[CurrentMapID];

} 
```

因此，此代码有效，以下代码无效，我不知道为什么：

```
public class Maps {

int CurrentMapID ;

int CheckedObjetQuantity=0;

Map[] MapList = new Map[5];

Objects[] Street1 = {new Objects(987,1020,1,2),new Objects(985,1036,3,75/*,true,3*/),new Objects(1259,1028,1,3),new Objects(3391,1036,1,1),new Objects(213,1013,102,1)};  // les Objets de la map Street1      (x,y,IDobjet,quantité)
Objects[] Street2 = {new Objects(1891,1011,1), new Objects (1847,1025,101)};

Map CurrentMap;

public Maps(){

    CurrentMapID = 1;

    //Street1 = new Objects[0];
    //Street2 = new Objects[0];

    MapList[1]= new Map (1,4,2,Street1,(Main.InstallPath+"maps/street.png"),(Main.InstallPath+"maps/fstreet.png"),(Main.InstallPath+"maps/streetcollision.png"),50,800,3600,800);
    MapList[2]= new Map (2,1,3,Street2,(Main.InstallPath+"maps/street2.png"),(Main.InstallPath+"maps/fstreet2.png"),(Main.InstallPath+"maps/street2collision.png"),50,800,3600,800);
    MapList[3]= new Map (3,2,4,Street2,(Main.InstallPath+"maps/street2.png"),(Main.InstallPath+"maps/fstreet2.png"),(Main.InstallPath+"maps/street2collision.png"),50,800,3600,800);
    MapList[4]= new Map (4,3,1,Street2,(Main.InstallPath+"maps/street2.png"),(Main.InstallPath+"maps/fstreet2.png"),(Main.InstallPath+"maps/street2collision.png"),50,800,3600,800);

    CurrentMap = MapList[CurrentMapID];

} 
```

它返回此错误：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
        at Maps.<init>(Maps.java:11)
        at Main.main(Main.java:73)
Caused by: java.lang.NullPointerException
        at Box.<init>(Box.java:65)
        at Objects.<clinit>(Objects.java:16) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:09:00.663

看起来你想创建一个`Objects`对象数组，对吧？

在定义其内容之前，您省略了构造新数组的代码：

```
Street2 = new Objects[] { new Objects(1891, 1011, 1), new Objects (1847, 1025, 101) }; 
```

# css - Html div 宽度 100% 不起作用

> ID：11196495
> 
> 赞同：8
> 
> 时间：2012-06-25T20:02:03.040
> 
> 标签：css, html, width

我的 HTML 有一些问题，所以我发布了代码。

第一个标签是`div`with `id="header"`。我给了它 100% 的宽度并给了它一个背景图像。

在标题内还有另一个`div`带有`id="header-contents"`. 我希望它在页面上居中，所以我给它一个宽度，然后`margin:0 auto`. 它适用于最大尺寸的浏览器，但是当我放大或将浏览器宽度调整到大约一半时，标题 div 的背景在某些时候开始消失并且不会填充 100% 的宽度。

这是它最初的样子（并且应该总是看起来）： [![预期外观](../Images/4219a9895df815276b12341188a80787.png)](https://i.stack.imgur.com/Pvsnw.png)

这是我缩放或调整浏览器大小时的样子： [![调整大小后](../Images/65641f7119ea5d5a07f41b0dd4b6e552.png)](https://i.stack.imgur.com/VgVka.png)

它的正确 HTML 和 CSS 是什么？这是代码：

```
<!DOCTYPE HTML>
<html>
<style>
body
{
    margin:0;
    padding:0;
}
.clear
{
    display:block;
    clear:both;
}
#header
{
    min-height:156px;
    width:100%;
    background-image:url('http://www.webdesignideas.org/images/bellevueBg.gif');
}
#head-contents
{
    width:974px;
    margin:0 auto;
    height:156px;
}
#header ul
{
    margin:85px 23px 0 0;
    float:right;
    list-style-type:none;
}
#header ul li 
{
    display:inline;
}
#header ul li a 
{
    margin-left:46px;
    font-size:19px;
    color:#fff;
    text-decoration:none;
}
#header ul li a:hover ,
#header ul li a.active 
{
    color:#FD7600
}
</style>
<body>
<div id="header">

<div id="head-contents">

<img src="http://t1.gstatic.com/images?q=tbn:ANd9GcRRlklPBeTiVsV7dycvDxqFyrU02d0grYf4rTUqL-2ZzGb8Qvbwimb37HgO" />

<ul>
<li><a href="#" class="active">Home</a></li>
<li><a href="#">Products</a></li>
<li><a href="#">About</a></li>
<li><a href="#">Contact</a></li>
</ul>

<div class="clear"></div>

</div>

</div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T08:30:13.390

我找到了解决方案：

```
#header {
  height: 156px;
  min-width: 990px;
  background-image: url('http://www.webdesignideas.org/images/bellevueBg.gif');
  display: block;
}

#head-contents {
  width: 974px;
  margin: 0 auto;
  height: 156px;
} 
```

这完全是#header 中的最小宽度问题。我查看了facebook的登录页面并弄清楚了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-21T02:30:08.897

`**[Working FIDDLE Demo](http://jsfiddle.net/mojtaba/azvB7/)**`

您必须将`width`of your设置`head-contents`为`min-width`of your `header`：

```
#header {
    min-height:156px;  
    display: block;
    width:100%;
    background-image:url('http://www.webdesignideas.org/images/bellevueBg.gif');

    min-width: 974px; /* this is width of head-contents */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-13T15:18:02.457

```
#header {   
    min-height:156px;
    width:100%;
    background-image:url('http://www.webdesignideas.org/images/bellevueBg.gif');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T21:33:39.063

从 #header 中取出 background-image 属性并将此样式应用于 body 标签：

```
background: url('http://www.webdesignideas.org/images/bellevueBg.gif') 0 0 repeat-x #fff; 
```

您将不再遇到您描述的问题。您现在需要做的就是使用 Photoshop 之类的图像编辑软件包将背景图像降低到 156 像素的高度。

编辑：这是显示解决方案的更新 jsfiddle：http: [//jsfiddle.net/eYrg8/35/](http://jsfiddle.net/eYrg8/35/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T20:32:37.883

这是适用于我的样式表：

```
 body{    
    margin:0;    
    padding:0;
}  
    .clear{    
    display:block;   
    clear:both;
}    
    #header{   
    min-height:156px;  
    display: block;
    width:100%;
    background-image:url('http://www.webdesignideas.org/images/bellevueBg.gif');
}
    #head-contents{    
    width:974px;    
    margin-left:200px;
    height:156px;
}
    #header ul {    
    margin:85px 23px 0 0;    
    float:right;
    list-style-type:none;
}
    #header ul li {    
    display:inline;
}    
    #header ul li a {   
    margin-left:46px;
    font-size:19px;
    color:#fff;
    text-decoration:none;
}

    #header ul li a:hover ,    
    #header ul li a.active {    
    color:#FD7600;
} 
```

调整窗口大小并将边距设置为 auto 会影响内部 div 的位置，因为它的宽度不适合窗口。

# python - 您如何找到根目录以便路径可以跨多台计算机工作？

> ID：11196496
> 
> 赞同：3
> 
> 时间：2012-06-25T20:02:04.243
> 
> 标签：python, windows, path, python-2.7

我正在编写一个程序来设置用于存储数据的文件路径。格式如下

```
c://users/username/.../endingpath 
```

当我切换计算机时，用户名会更改。有没有一种方法或方法可以指定我正在使用的特定计算机的用户名？还是有更好的方法使路径计算机独立？

我在 Windows 7 上运行 Python 2.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T20:09:37.097

在 Windows 下，您可以查看几个预定义的环境变量。其中之一是`USERNAME`。

所以：

```
import os
user_name = os.getenv("USERNAME") 
```

Windows 还为某些目录定义了环境变量。如果您的文件应该存储在用户的个人主目录中（在 Windows 7 上，这是：），`%SystemDrive%\Users\{username}`您可以使用`USERDATA`或`USERPROFILE`. 这比尝试使用用户名构建自己的路径要好。

@Matteo Italia 指出这`APPDATA`可能是最好用的；这是一个专门供应用程序存储其数据文件的目录。这对我来说很有意义；我认为他是对的。

所以：

```
import os
appdata_dir_name = os.getenv("APPDATA") 
```

我在 Wikipedia 中找到了 Windows 环境变量列表：

[http://en.wikipedia.org/wiki/Environment_variable#Examples_from_Microsoft_Windows](http://en.wikipedia.org/wiki/Environment_variable#Examples_from_Microsoft_Windows)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:15:55.317

[您应该使用SHGetKnownFolderPath 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)找到适当的目录。您可能可以使用[pywin32](http://sourceforge.net/projects/pywin32/)来使用该功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T20:28:10.120

使用以下

```
os.path.expanduser(path) 
```

确保路径与路径名前面的 ~ 或 ~user 是相对的

[http://docs.python.org/library/os.path.html](http://docs.python.org/library/os.path.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T20:10:26.677

由于您指定了 Windows 7，我假设您在将执行该程序的所有计算机上都使用它，因此，您只需使用`'%UserProfile%/.../endingpath'`. （或`'%UserProfile%\\...\\endingpath'`。）

[http://en.wikipedia.org/wiki/Home_directory#Default_Home_Directory_per_Operating_System](http://en.wikipedia.org/wiki/Home_directory#Default_Home_Directory_per_Operating_System)

# php - 当字段 = 1 时，有没有办法选择 ColName？

> ID：11196499
> 
> 赞同：1
> 
> 时间：2012-06-25T20:02:18.723
> 
> 标签：php, mysql, sql

我一直在玩一些 SQL 查询，试图在行中的字段等于时获取列名`1`。

我的表如下所示：

```
user  | col 1 | col 2 | col 3 | col 4 |
user1 |    1  |    1  |     0 |    1  |
user2 |    0  |    1  |     1 |    1  |
user3 |    1  |    0  |     0 |    1  | 
```

我试图让每个列名在每个值等于时显示`1`。

```
SELECT ColNames
FROM table
WHERE user1 = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:06:22.850

规范化您的数据库！

```
user  | n | value
user1 | 1 | 1
user1 | 2 | 1
user1 | 3 | 0
user1 | 4 | 1
user2 | 1 | 0 
user2 | 2 | 1
user2 | 3 | 1 
user2 | 4 | 1 
user3 | 1 | 1 
user3 | 2 | 0 
user3 | 3 | 0
user3 | 4 | 1 
```

现在很容易！

```
SELECT n
FROM users
WHERE user = 'user1' AND value = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T21:09:04.283

如上所述，您需要三个表。一种用于用户，一种用于物品，另一种用于连接两者。这是我用于类似功能的结构和查询，维护用户定义的邮件列表：

```
CREATE TABLE `tbl_listmembers` (
`listmem_id` int(11) NOT NULL AUTO_INCREMENT,
`list_id` int(11) NOT NULL,
 `user_id` int(11) NOT NULL,

CREATE TABLE `tbl_lists` (
`list_id` int(11) NOT NULL AUTO_INCREMENT,
`user_id` int(11) NOT NULL,
`list_name` varchar(45) DEFAULT NULL,
`list_description` varchar(250) DEFAULT NULL,

CREATE TABLE `tbl_user_accounts` (
 `user_id` int(11) NOT NULL AUTO_INCREMENT,
 `user_first_name` varchar(45) NOT NULL,
 `user_last_name` varchar(45) NOT NULL, 
```

以及从特定列表中提取成员的查询：

```
SELECT lm.list_id, lm.user_id, ua.user_first_name, ua.user_last_name, ua.user_id
FROM test.tbl_listmembers AS lm 
LEFT JOIN test.tbl_user_accounts AS ua ON (ua.user_id = lm.user_id)
WHERE (lm.list_id = combo_box_selected_listnumber) 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:11:37.313

你可以做

```
select case when col1=1 then 'Col 1' else '' end +
    case when col2=1 then 'Col 2' else '' end + 
    case when col3=1 then 'Col 3' else '' end + 
    case when col4=1 then 'Col 4' else '' end 
from users
where user = 'user1' 
```

编辑：哎呀，这是用于事务 SQL，不确定 mysql 是否具有相同的`case`构造，如果没有，我的错

# c# - 重置 onclick 以便 ajax 脚本不使用值

> ID：11196505
> 
> 赞同：0
> 
> 时间：2012-06-25T20:03:11.980
> 
> 标签：c#, javascript, jquery, ajax, asp.net-mvc

我有一个 beginform，它通过 ajax 脚本自动将所有内容发送到控制器。问题是我在表单中有一个按钮，每次点击应该只发送一次它的值。我似乎无法区分其余的自动数据。

**目标：单击一次按钮后，我希望值 10（来自按钮）停止发布到控制器。**

AJAX 功能（将所有数据提交给控制器）

```
 function toconroller() {
    $.ajax({
        type: 'POST',
        url: this.action,
        data: $('form').serialize(),
        success: function (result) {
            $('#box').html(result.info);
            }
        });
    } 
```

按钮功能

```
 Function submitonce() { 
//I want to only submit value of button once.
 } 
```

用按钮开始

```
 @using (Html.BeginForm()) 
    { 
    <input id="data" onkeyup="tocontroller();">
   <input type="submit"  name="clicked" id="clicked" value="10" onclick="submitonce();" />
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:10:03.463

您可以在单击时删除`value`提交按钮的属性：

```
function submitonce() { 
    $('#clicked').removeAttr('value');
} 
```

或者不使用属性但使用 jQuery`onclick`订阅处理程序而不显眼地做到这一点：`.click()`

```
$(function() {
    $('#clicked').click(function() {
        $(this).removeAttr('value');
    });
}); 
```

`value`或者您可能希望将其设置为空或其他内容，而不是删除按钮的属性：

```
$('#clicked').val(''); 
```

由于这是一个提交按钮，您可能希望通过从其单击处理程序返回 false 来取消其提交表单的默认操作（我的第二个不显眼的 jQuery 示例）。

# filter - IE 9 的 RGBA 文本替代方案。无法解决此问题

> ID：11196507
> 
> 赞同：0
> 
> 时间：2012-06-25T20:03:20.847
> 
> 标签：filter, opacity, css

这样做的重点是让透明文本带有浅白色阴影，使文本看起来像是嵌入到背景中。在所有其他浏览器中，我只是对文本执行此操作：

```
#mytext{
color: rgba(10, 10, 10, 0.7);
text-shadow: 0px 1px 0px rgba(200, 200, 200, 0.6);
} 
```

像魅力一样工作，并赋予它巨大的效果。IE，然而......好吧，你知道它是怎么回事。

所以我想为什么不让 div 透明并使用`Shadow`过滤器，我们都可以回家了。一开始看起来很聪明，但微软似乎总是比我领先一步哈哈

```
 #mytext{
font-family: cowboyTimes;
font-size: 50px;
text-shadow: 0px 1px 0px rgba(200, 200, 200, 0.6);
filter:alpha(opacity=90) Shadow(Color=#FFFFFF, Direction=180, Strength=1);
color: rgba(10, 10, 10, .7);
 } 
```

我想我知道这里发生了什么，我声明了 alpha 过滤器，然后阴影过滤器覆盖了它，因为如果我重新排列过滤器，我会得到列表中的最后一个过滤器。我试过用逗号分隔 m ，但根本没有变化。我做错了什么，或者如果有更好的方法可以做到这一点，我全神贯注（或眼睛）！

无论如何，感谢您的帮助！

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:07:53.850

```
#mytext{
font-family: cowboyTimes;
font-size: 50px;
text-shadow: 0px 1px 0px rgba(200, 200, 200, 0.6);
filter: "progid:DXImageTransform.Microsoft.alpha(opacity=90) progid:DXImageTransform.Microsoft.Shadow(Color=#FFFFFF, Direction=180, Strength=1)";
-ms-filter: "progid:DXImageTransform.Microsoft.alpha(opacity=90) progid:DXImageTransform.Microsoft.Shadow(Color=#FFFFFF, Direction=180, Strength=1)";
color: rgba(10, 10, 10, .7);
 } 
```

# java - Java JNI - 返回 jintArray 时出现 EXCEPTION_ACCESS_VIOLATION

> ID：11196512
> 
> 赞同：0
> 
> 时间：2012-06-25T20:03:35.620
> 
> 标签：java, c, java-native-interface, jnienv

这段代码中发生了一件非常奇怪的事情

```
 JNIEXPORT jintArray JNICALL Java_jsdr_SdrLibrary_getTunerGains
     (JNIEnv * env, jclass obj, jlong pointer) {
      rtlsdr_dev_t * dev;
      int * gains;
      jintArray ji;
      jint * buff;
      int i;
      int size;

      dev = (rtlsdr_dev_t *) pointer;
      size = rtlsdr_get_tuner_gains(dev, gains);

      if (size <= 0)
        .. throws an error, irrelevant code ..

      buff = (jint *) malloc(size * sizeof(jint));
      for (i = 0; i < size; i++) buff[i] = gains[i];

      ji = (*env)->NewIntArray(env, size);
      (*env)->SetIntArrayRegion(env, ji, 0, size, buff);
      return ji;
  } 
```

该方法实际上返回一个我可以在 Java 中处理的结果

```
 System.out.println(printArray(SdrLibrary.getTunerGains(pointer))); 
```

其中 printArray 只是一个简单的

```
public static String printArray(int[] arr) {
    String buff = "["+arr[0];
    for (int i = 1; i < arr.length; i++) buff+=", "+arr[i];
    return buff+"]";
} 
```

输出如下

```
[-10, 15, 40, 65, 90, 115, 140, 165, 190, 215, 240, 290, 340, 420, 430, 450, 470, 490]
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d86c2ff, pid=7160, tid=5880
#
# JRE version: 6.0_31-b05
# Java VM: Java HotSpot(TM) Client VM (20.6-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# V  [jvm.dll+0x7c2ff]
#
# An error report file with more information is saved as:
# C:\Users\Marto\workspace\JSDR\hs_err_pid7160.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# 
```

如您所见，它返回一个结果，但之后 JM 立即崩溃并且不再执行任何行。我绝对会感谢任何帮助！谢谢！

**编辑：**如果我删除对 rtlsdr_get_tuner_gains 的调用，而是手动初始化增益数组，则不会观察到错误。由于此方法在 dll 中，我可以防止它以某种方式使 JNI 崩溃吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:45:51.323

我发现了错误的根源。事实证明，原始库没有分配传递给它的缓冲区，从而导致覆盖 JNI 不持有的内存（感谢 QuantumMechanic 给了我一个简单的想法来实际查看库的源）。

解决方案很简单。改变这个

```
 int * gains; 
```

对此

```
 int gains[30]; 
```

# css - CSS：绝对位置不是相对于 div 定位它

> ID：11196516
> 
> 赞同：0
> 
> 时间：2012-06-25T20:03:54.763
> 
> 标签：css

我正在尝试将一个对话框放置在 +（加号）符号的正下方。

这是我正在使用的代码：

```
<div class="container"><div class="projectsContainer">
<div class="sectionTitle">Projects</div>
<div class="project-items">

<div class="project-item">
    <div class="projectTitle"><a href="#">Product Management Tool</a></div>
    <div class="projectDetails">
        <div class="projectCompletion">
            <div class="projectProgressed"></div>
        </div>
        <div class="projectMore"><img src="/images/add_button_shadow_blue.png">

        <div class="dialogContainer dialogEditProject"><div class="dialog editProjectDialog"><ul><li id="editProject">Edit</li><li id="removeProject">Remove</li></ul></div></div>

        </div>
    </div>
    <div class="clearBoth"></div>

    <div class="projectDescription">
    No description    </div>
</div>

</div>
</div></div>​ 
```

In`.projectMore`是`.dialogEditProject`绝对定位的。当我在浏览器中加载页面时，它看起来不是绝对定位的。

这是代码，可以实时查看行为：[jsfiddle](http://jsfiddle.net/E4P7D/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T20:07:23.460

将此 CSS 提供给`.projectMore`：

```
.projectMore {position: relative;}
.dialogEditProject {position: absolute; top: X; left: Y;} /* X and Y relative to .projectmore */ 
```

## 解释

当你给一个元素`relative`位置时，它就成为`absolute`定位元素的边界，这样你就可以在定位元素上相对于相对定位的父元素使用`top`, `left`, `right`, 。:)`bottom``absolute`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:06:51.803

`position:relative`在 div .projectDetails 上设置。

**[jsFiddle 示例](http://jsfiddle.net/j08691/E4P7D/2/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T20:08:32.753

你有

```
position: relative 
```

在项目详情？

试试看[w3schools](http://www.w3schools.com/Css/css_positioning.asp)

# google-apps-script - 库中未定义项目属性的显示方式与项目中未定义项目属性的显示方式不同

> ID：11196519
> 
> 赞同：0
> 
> 时间：2012-06-25T20:04:08.093
> 
> 标签：google-apps-script

我编写了一个函数来检索项目属性。我传递变量名的值。

我写了一个测试例程。在测试例程中，使用相同的变量名执行类似的 getProperty。测试例程与库函数位于不同的项目中。我这样做是为了在真实情况下进行测试。我知道每个项目都有自己的项目属性定义。

以下是库中的 get 例程：

```
function  lib_get(pvar)
{
   return ScriptProperties.getProperty(pvar);
} 
```

以下是测试例程：

```
function lib_test()
{
     var u = ScriptProperties.getProperty("u");

     var t = lib_get("u");  

     Browser.msgBox(" u:"+u+" t: "+t);
} 
```

两个项目中都没有定义变量“u”。

```
The display shows "U" has a value of "null", 

and "t" has a value of "undefined". 
```

这是功能应该工作的方式吗？我是否应该接受这种差异是正常的，并在未来所有时间都在这种假设下运作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T02:18:53.770

当您从该库调用函数时，您需要指定该库的前缀。

```
var t = myLibrary.lib_get("u"); 
```

其中“myLibrary”是您在“管理库”对话框中定义的库的名称。

# ms-access - SQL Server 2012 - 无法创建 OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”的实例（Microsoft SQL Server，错误：7302）

> ID：11196521
> 
> 赞同：4
> 
> 时间：2012-06-25T20:04:13.400
> 
> 标签：ms-access, hyperlink, sql-server-2012

我刚刚安装了 SQL Server 2012 来测试差异并确保它适合我的工作。我可能不是 SQL 专家，但我不知道如何在我的服务器上添加指向 Jet 数据库的链接。我已经导入了 Jet 数据库，但是当通过 GUI 链接 JET 数据库时，我看不到 JET 的提供程序。我正在运行 Access 2003（我不喜欢 2008+ GUI）

我搜索了一个与我的问题相似的东西；至少我什么都不懂。没有提到如何添加 Jet db Provider。

我通过 QA 运行了到 Jet 数据库的连接字符串：

```
sp_addlinkedserver 'USGEScrub', 'Access', 'Microsoft.Jet.OLEDB.4.0', 
'D:\Lead$\SupList\USGEScrub.mdb' 
```

连接字符串一直有效，直到我尝试访问数据然后我得到这个错误当然如果我点击链接什么都没有显示：

```
TITLE: Microsoft SQL Server Management Studio
Failed to retrieve data for this request. (Microsoft.SqlServer.Management.Sdk.Sfc) 
```

如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft%20SQL%20Server&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&LinkId=20476)

```
ADDITIONAL INFORMATION:
An exception occurred while executing a Transact-SQL statement or batch.
Cannot create an instance of OLE DB provider "Microsoft.Jet.OLEDB.4.0" for linked
server "USGEScrub". (Microsoft SQL Server, Error: 7302) 
```

如需帮助，请单击： http: [//go.microsoft.com/fwlink ?ProdName=Microsoft%20SQL%20Server&ProdVer=11.00.2100&EvtSrc=MSSQLServer&EvtID=7302&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft%20SQL%20Server&ProdVer=11.00.2100&EvtSrc=MSSQLServer&EvtID=7302&LinkId=20476)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T15:32:30.177

1.  [从Microsoft](http://www.microsoft.com/downloads/en/details.aspx?FamilyID=c06b8369-60dd-4b64-a44b-84b371ede16d&displaylang=en)下载 2010 Access 数据库引擎
2.  允许“进行中”
3.  使用 ACE OLEDB 提供程序添加链接服务器。

更多细节[在这里](http://www.gregorystrike.com/2010/11/15/access-2007-database-as-linked-server-in-sql-2008-r2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T20:01:23.443

我遇到了类似的问题，在我的情况下，它与运行 SQL Server 服务的帐户的 %TEMP% 文件夹的权限有关。[有关更多详细信息，请参见我的](https://stackoverflow.com/a/26829350/2144390)答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T16:23:15.867

有时，安装了 office x84 版本的 x64 计算机会出现此问题。尝试这个：

[安装被动 OleDb 驱动程序 x64](http://blogs.lessthandot.com/index.php/datamgmt/dbprogramming/mssqlserver/force-ace-installation/)

# php - 通过 css 或 php 函数对齐文本以添加空间

> ID：11196533
> 
> 赞同：1
> 
> 时间：2012-06-25T20:05:24.440
> 
> 标签：php, jquery, css, html

有没有人有一个很好的解决方案来获得价格，它是一个垂直对齐左侧的变量？请不要桌子！

现在行的方式是这样显示的

```
input button $15.00 button
 input button $5.00 button 
```

它应该看起来像这样

```
input button $15.00 button
input button $5.00  button 
```

我尝试了 php 的 sprintf 或 str_pad 但它并没有真正做任何事情。

任何解决方案都是有帮助的。

从查看 php 页面来看，我的视野现在变得模糊

这是html

```
<div class="item-checkout">
                <!--checkout item-->
                <form class="fcheckoutform" id="<?php echo $id_checkoutform;?>" method="post" action="">
                    <div class="naam"><?php echo $naam;?></div>
                    <div class="fr al">
                        <input name="qty" rel="<?php echo $rel;?>" type="text" size="3" class="aantal"
                        value="<?php echo $aantal;?>" maxlength="4" id="<?php echo $id_aantal;?>">
                        <span class="btn">Toepassen</span>
                        <span class="price"><?php echo $price_lbl;?></span> 
                        <span class="verwijder">Remove</span>
                    </div>
                    <div class="cbt"></div>     
                </form>
            </div> 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:17:10.683

您可以只使用边距或填充吗？

```
input.naam{
padding-left: whatever_number_you_want px;
} 
```

# sql - 返回第一个字符为非字母的行

> ID：11196538
> 
> 赞同：6
> 
> 时间：2012-06-25T20:05:54.083
> 
> 标签：sql, sqlite, sql-like, alphanumeric

我正在尝试检索以 SQlite 中任何非字母字符开头但似乎无法正常工作的所有列。我目前有这个代码，但它返回每一行：

```
SELECT * FROM TestTable WHERE TestNames NOT LIKE '[A-z]%' 
```

有没有办法检索 TestNames 的第一个字符不属于字母表的所有行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T20:10:15.850

你只去第一个角色吗？

```
select * from TestTable WHERE substr(TestNames,1) NOT LIKE '%[^a-zA-Z]%' 
```

substr 函数（在某些 SQL 语言中也可以称为 left()）将帮助您隔离字符串中的第一个字符。

编辑：也许是 sqllite 中的 substr(TestNames,1,1)，我没有现成的实例来测试那里的语法。

添加：

```
select * from TestTable WHERE Upper(substr(TestNames,1,1)) NOT in ('A','B','C','D','E',....) 
```

似乎不是最佳的，但在功能上会起作用。不确定有哪些 char 命令可以在 SQLlite 中执行一系列字母。

我使用'upper'来制作它，所以你不需要在not in语句中使用小写字母......有点希望SQLlite知道那是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:07:37.567

尝试

```
SELECT * FROM TestTable WHERE TestNames NOT LIKE '[^a-zA-Z]%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:37:03.647

SELECT * FROM NC_CRIT_ATTACH WHERE substring(FILENAME,1,1) NOT LIKE '[Az]%'; 应该快一点，因为它是 A）首先只从第一列获取所有数据，然后扫描它。B）除非您索引此列，否则仍然是全表扫描。

# java - 简单的 java HttpClient 程序不起作用

> ID：11196544
> 
> 赞同：0
> 
> 时间：2012-06-25T20:06:25.360
> 
> 标签：java, apache-httpclient-4.x

我有 HttpClient 4.1。请看以下程序：

```
import org.apache.http.client.methods.*;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.DefaultHttpClient;

public class SysCommands {
    public static void main(String [] args){
        try{
            HttpClient c = new DefaultHttpClient();
            System.out.println("Initial part");
            HttpGet method = new HttpGet("http://www.google.com");
            HttpResponse resp = c.execute(method);
            System.out.println("Method executed");
            String s = "";
            resp.getHeaders(s);
            System.out.println("headers are "+s);
            BufferedReader rd = new BufferedReader(new InputStreamReader(resp.getEntity().getContent()));
            String line = "";
            while ((line = rd.readLine()) != null) {
                    System.out.println(line);
            }
        }catch(Exception e){
            System.out.println(e);
        }
    }
} 
```

当我运行它时，我得到`org.apache.http.client.ClientProtocolException`. 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:10:38.390

您是否考虑过使用 HttpURLConnection 而不是 HttpClient？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:30:43.910

谷歌可能会将您重定向到您的“本地”谷歌网站。我住在荷兰，当我访问 www.google.com 时，它会响应 HTTP 302 重定向到 www.google.nl。

我不确定默认 http 客户端是如何配置的，但默认情况下它可能不遵循重定向。

# python-2.7 - Python 2.7.3 合并排序接收——“TypeError：‘文件’类型的对象没有 len()”

> ID：11196548
> 
> 赞同：1
> 
> 时间：2012-06-25T20:06:56.050
> 
> 标签：python-2.7, typeerror, mergesort

我即将完成我的第一个合并排序程序，并且在编译时遇到了麻烦。我已经对这个特定错误进行了大量研究，似乎我在代码中的某个地方并不具体。我仍然找不到所说的错误，并希望得到您的帮助。我附上了文件内容、代码和回溯。再次感谢。

文件：

```
999 Message C1 
1033 Message C2 
1054 Message C3 
1056 Message C4 
1086 Message C5 
```

代码：

```
DEBUG = True
out = []

logs = open("C:\Users\----\Desktop\logs.txt", mode ="r")

lines = logs.readline()

def debug(s):
    if DEBUG:
        print "DEBUG: ", s

def get_t (line):
    s = line
    s = s.lstrip()
    debug(s)
    i = s.find(" ")
    debug(s)
    s = s[:i]
    return int(s)

def get_lowest_i(logs):
    lowest_i = -1
    for i in range(len(logs)):
        log = logs[i]
        debug("log=" + repr(log))
        if log:
            t = get_t(log[0])
            debug("t=" + repr(t))
            if lowest_i == -1 or t < lowest_t:
                lowest_i = i
                lowest_t = t
    return lowest_i

def get_line_lowest_t(logs):
    while True:
        i = get_lowest_i(logs)
        if i == -1:
            break
        line = logs[i].pop(0)

def mergesort(logs):
    while True:
        line = get_line_lowest_t(logs)
        if line == None:
            break
        out.append(line)
    return out

print mergesort(logs)

f.close() 
```

追溯：

```
Traceback (most recent call last):
  File "<module1>", line 50, in <module>
  File "<module1>", line 44, in mergesort
  File "<module1>", line 37, in get_line_lowest_t
  File "<module1>", line 24, in get_lowest_i
TypeError: object of type 'file' has no len() 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:12:36.193

`TypeError: object of type 'file' has no len()`该错误说明了您正在尝试读取文件对象的长度...作为`logs = open("C:\Users\----\Desktop\logs.txt", mode ="r")`一个文件，您的意思可能是读取文件的行并对其进行排序...`lines = longs.readlines()` `print mergesort(lines)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:16:48.040

文件没有方法 len()。将其放入字符串或数组中，然后使用 len()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:11:43.120

您正在对文件进行合并排序，而不是对名为`lines`.

# outlook - 有没有办法通过 Outlook/Exchange 以编程方式调用电子邮件？

> ID：11196549
> 
> 赞同：2
> 
> 时间：2012-06-25T20:06:56.507
> 
> 标签：outlook, exchange-server, message

有谁知道这是否可能？除了回忆发件人和收件人都必须使用 Exchange 并且电子邮件必须在收件人端未读之外，我找不到太多有关这样做的信息。很少有需要这样做的情况，但即便如此，知道它还是有用的。

**编辑**

*   Outlook 2010 是我正在使用的版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:13:36.953

“Recall This Message”的 FindControl ID 是`2511`，因此您可以使用如下代码：

```
Sub SendRecall()

  Dim obj As Object
  Dim msg As Outlook.mailItem
  Dim insp As Outlook.Inspector

  ' get selected item
  Set obj = ActiveExplorer.Selection.item(1)

  If TypeName(obj) = "MailItem" Then
    Set msg = obj
    Set insp = msg.GetInspector
    ' execute the command button for "Recall this message"
    With insp
      .Display
      .CommandBars.FindControl(, 2511).Execute
      .Close olDiscard
    End With
  End If
End Sub 
```

**在 Outlook 2003 中工作，您没有发布您的版本，所以我不确定此解决方案是否适合您。**

# internet-explorer-8 - MediaElement.js Internet Explorer 8 显示块状矩形

> ID：11196550
> 
> 赞同：1
> 
> 时间：2012-06-25T20:06:58.903
> 
> 标签：internet-explorer-8, mediaelement.js

我正在使用**MediaElement.js** Wordpress 插件来在我的主页上播放 MP3。

但在 Internet Explorer 8 上，我的插件有问题。

而不是播放按钮和音量按钮，它只显示一个*块状矩形*。我已经在两台不同的计算机上进行了测试，结果相同。

你可以在这里测试它：[http ://www.alatarmusic.com/noise-reduction/](http://www.alatarmusic.com/noise-reduction/)

它适用于 Firefox 和我 iPhone 上的 Safari。而且我知道，其他网站在我的 Internet Explorer 中显示良好。例如，[MediaElementJS.com](http://mediaelementjs.com/)上的播放器看起来是正确的。我的主页好像有问题？

但这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:22:25.873

在 IE7 和 IE8 中遇到同样的问题：

![在此处输入图像描述](../Images/831a886d5bf82944705af5faa84fdff0.png)

我的修复是确保过滤器样式被重置：

```
filter: none; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:59:23.093

您的[样式表](http://www.alatarmusic.com/wp-content/themes/website/data/php/attach.php?f=fancybox.css,flexslider.css,tipsy.css,base.css,structure.css,parts.css,widgets.css,plugins.css,bright.css)包含以下 CSS：

```
.post .content button{background:linear-gradient(top,#ffffff 0%,#e9e9e9 100%);-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#e9e9e9')"; 
```

美化：

```
.post .content button {
    background: linear-gradient(top,#ffffff 0%,#e9e9e9 100%);
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#e9e9e9')";
} 
```

最后一个属性 ,[`-ms-filter`](http://msdn.microsoft.com/en-us/library/ms532847%28v=vs.85%29.aspx)是 Microsoft 的专有 CSS 扩展，仅由 Internet Explorer 解析。

颜色`#ffffff`为白色，颜色[`#e9e9e9`](http://jsbin.com/ewevam/)为浅灰色。

因为该效果只在 Internet Explorer 中有效，所以只有 IE 用户会看到一个浅色矩形而不是播放按钮。

将`filter`to设置`none`为返回按钮： ![截图：](../Images/cdaeb76116cec21dd78420992502f45e.png)

此标记可能会影响您的 Wordpress 博客中的其他按钮，因此删除它可能不是一种选择。相反，您可以将 ; 添加`filter:none`到 CSS 中`.mejs-button`。例如：

```
.mejs-button{
    filter: none;
} 
```

# node.js - 我应该为我的 node.js 应用程序选择哪种 azure 服务？

> ID：11196551
> 
> 赞同：6
> 
> 时间：2012-06-25T20:07:03.307
> 
> 标签：node.js, azure

我是 Microsoft windows azure cloud 的新手，想在 azure cloud 中运行我的 node.js 应用程序。我阅读了 Windows azure Node.js 开发人员中心网站 ( [https://www.windowsazure.com/en-us/develop/nodejs/](https://www.windowsazure.com/en-us/develop/nodejs/) )，看来我的应用程序可以在 azure cloud 中以多种方式运行。

如果我想以较少的 azure 知识快速部署，哪个 azure 选项适合我的 node.js 应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-25T20:35:40.900

如果您是 Windows Azure 的新手，但对 Node.js 开发人员有丰富的知识，那么您肯定可以使用 Windows Azure 来编写您的 Node.js 应用程序。

您有以下选择：

1.  **[Windows Azure 网站（预览版）](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/create-a-website-%28mac%29/)** –<br>
    *   仅在共享时免费，并且如果保留，则与之相关的一些费用
    *   如果您是 Linux 或 Mac 用户，那就太好了
    *   您的 node.js 应用程序将在 Windows Server Farm 上运行
    *   您可以使用 git 部署您的 Node.js 应用程序
2.  **[Windows Azure 云服务](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)**

    *   非常适合使用 Web 和 Worker 角色将逻辑分成多个层的应用程序
    *   这是一项付费服务
    *   您可以使用 PowerShell 直接从 Windows 计算机进行部署
    *   您的 Node.js 应用程序将在 Windows Server 2008 操作系统上运行
    *   您将能够 RDP 您的 Windows Azure VM。
3.  **Windows Azure 虚拟机（预览版）** –

    *   通过这种方式，您可以在 Microsoft Windows 或 Linux（Suse、CentOS、Ubuntu）机器上创建运行您的 node.js 应用程序，或者上传您自己的已经完全安装了 Node.js 应用程序的 Linux VM
    *   使用 Windows 机器，您可以 RDP 到您的机器并安装您的 Node.js 应用程序
    *   使用 Linux 机器，您可以使用 Putty 按照命令连接您的 Linux 机器，然后安装您的应用程序和其他软件包
    *   目前即使使用预览模式，也有一些与之相关的价格

由于您是 Windows Azure 的新手，我建议您尝试使用**免费的 Windows Azure 共享网站**，因为这样您真的不需要了解很多有关 Windows Azure 的知识，并且可以立即开始运行您的应用程序。这可能是上述 3 个选项中最简单的方法，然后如果需要，您可以通过迁移应用程序来跳转到其他方法。

如果您决定使用云服务，您可以使用[Cloud9 IDE](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/deploying-with-cloud9/)将您的 Node.js 应用程序直接发布到订阅中的 Windows Azure 云服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T18:29:47.027

您可以在此处找到决策树：http: [//msdn.microsoft.com/en-us/magazine/jj991974.aspx](http://msdn.microsoft.com/en-us/magazine/jj991974.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:35:05.573

您正在考虑哪些选项？我能想到两个：“云服务”或“网站”。假设您正在构建一个 Web 应用程序，后者可能是更简单、更便宜的选择。前者为您提供了支持您的应用程序的完整虚拟机，您可以在其上运行任何东西（包括在后台处理数据的“工作人员”或通过 Web 套接字甚至原始 TCP 进行通信的应用程序）。它更强大，但也比共享“网站”更难使用、部署更慢、成本更高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:38:39.840

1.  注册 Windows Azure 90 天免费试用[https://www.windowsazure.com/en-us/pricing/free-trial/](https://www.windowsazure.com/en-us/pricing/free-trial/)

2.  登录门户：[https ://manage.windowsazure.com](https://manage.windowsazure.com)

3.  单击*虚拟机*选项卡，然后单击*创建虚拟机*以创建 Windows VM。

4.  在滑出式面板上，选择*快速创建*，然后指定您的 DNS 名称、图像 [Windows Server 2008 R2 SP1]、管理员密码、大小 [小（1 核，1.75GB 内存）]、位置（美国西部）。单击“*创建虚拟机”*按钮完成。

5.  配置完成后，您可以通过单击屏幕底部工具栏上的“*连接*”按钮通过远程桌面协议连接到您的 VM 。

6.  确保安装现代浏览器（如 Firefox）以避免烦人的 IE 默认安全设置，然后像在桌面上一样继续下载并安装[node-js msi。](http://nodejs.org/dist/v0.8.0/node-v0.8.0-x86.msi)

7.  快乐黑客！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T18:02:08.737

最快的入门方法是使用 Windows Azure 网站。您将获得一个已配置为运行 node.js 的网站。您只需使用 ftp 或 git 命令将代码推送到站点的放置文件夹。

您可以使用 Mac、PC 或 Linux 作为开发机器。本教程（使用 mac）展示了最快的入门方法：[https ://www.windowsazure.com/en-us/develop/nodejs/tutorials/create-a-website-(mac)/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/create-a-website-(mac)/)

干杯!

# stream - mpeg-ts 基础

> ID：11196554
> 
> 赞同：2
> 
> 时间：2012-06-25T20:07:07.333
> 
> 标签：stream, mpeg, transport

我阅读了一些关于 mpeg 传输流的教程，但有两个基本问题我不明白： 1\. mpeg-ts muxer 从音频和视频中接收 pes 数据包，并输出 mpeg-ts 数据包。它是如何进行这种混合的？是不是每当来自任何程序的数据包等待其输入时，复用器就会唤醒并将 pes 切片处理成 mpeg-ts ？2\. 用户可以选择mpeg-ts muxer输出的比特率吗？编码速率与 mpeg-ts 速率之间有什么联系？

非常感谢你，

冉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T11:53:51.927

MPEG2-TS 多路复用是一种复杂的艺术形式。建议阅读：MPEG2-TS 规范、SPTS/MPTS、VBR 与 CBR、假设参考解码器和缓冲区（EB、MB、TB）、抖动和漂移。

您的问题的一个非常简短的答案可以总结如下：对于每个编码器，在线路的另一端有一个解码器，它想要在每个帧间隔显示一个视频帧（或音频帧）。这个帧需要在它的呈现时间之前被解码。如果此帧使用其他帧作为参考，则它们也需要在呈现之前进行解码。多路复用时，数据必须在呈现之前有足够的时间到达。要在时间 n 呈现的视频帧必须在时间 n - x 在解码器处可用，其中 x 是时间度量，取决于解码器的缓冲速率（参见 MB、TB、EB）。如果 TS 比特率太低，就会出现“下溢”，视频无法及时进入解码器。如果 TS 比特率太大，就会发生“溢出”，缓冲区必须丢弃数据包，这也会产生视觉伪影。

# ios - 记录 iOS 中的所有套接字调用

> ID：11196560
> 
> 赞同：2
> 
> 时间：2012-06-25T20:07:30.830
> 
> 标签：ios, debugging, sockets, networking, cfnetwork

我正在尝试跟踪我的应用程序中的问题，并且需要跟踪 BSD 套接字 API 的所有调用。我基本上希望在创建套接字时调用我的函数，这将打印包含当时关键变量值的日志记录语句（包括套接字的目标和端口等）

我希望在我的程序直接调用套接字时调用此日志记录（这很容易），但困难的部分是我希望在由于其他高级 API 调用（CFNetwork 等）而间接调用套接字调用时调用它.)

如何才能做到这一点？

# java - 为什么Iterator接口中没有add方法

> ID：11196561
> 
> 赞同：21
> 
> 时间：2012-06-25T20:07:32.150
> 
> 标签：java, collections, iterator

在`Iterator`Sun 中添加了 remove 方法来删​​除集合中最后访问的元素。为什么没有 add 方法向集合中添加新元素？它可能对集合或迭代器产生什么样的副作用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-25T20:42:20.117

好的，我们开始：

设计常见问题解答中明确说明了答案：

为什么不提供 Iterator.add 方法？

语义尚不清楚，因为 Iterator 的合同不保证迭代的顺序。但是请注意，ListIterator 确实提供了添加操作，因为它确实保证了迭代的顺序。

[http://docs.oracle.com/javase/1.4.2/docs/guide/collections/designfaq.html#10](http://docs.oracle.com/javase/1.4.2/docs/guide/collections/designfaq.html#10)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-25T20:11:58.533

Iterator 的唯一目的是枚举一个集合。所有集合都包含`add()`为您服务的方法。添加到 Iterator 是没有意义的，因为集合可能会或可能不会被排序（在 a 的情况下`HashSet`）。

**编辑：**在解决另一个问题时，我想出了另一个`Iterator`缺少`add()`方法的原因。查看[`ArrayList`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/ArrayList.java#ArrayList)（第 111 行）和[`HashMap`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/HashMap.java#HashMap)（第 149 行）的底层，我们看到实现只是围绕对象数组的几个方法。现在我们考虑如何在内存中处理数组。

![从零开始的数组索引](../Images/2f40580522c075003f4de4dc1ff63f18.png)

这是一个包含 5 个元素的数组。但是，有六个指标。这个数组中的字母“a”被列为元素 0，因为为了像计算机一样从左到右读取它，您必须从索引 0 开始。现在，如果我们正在遍历这个数组（是的，集合，但归结为一个数组），我们将从索引 0 开始并继续索引 1。此时在迭代器中，我们要调用`add("f");`. 在这一点上，让我们比较 和 的`add()`含义`remove()`。`remove()`会在数组中留下一个空格，这很容易跳过，因为我们可以立即识别它不是成员。另一方面，`add()`会放入一个以前没有的新元素。这将影响我们正在迭代的数组的长度。当我们到达最后一个元素时会发生什么？我们甚至可以保证它在那里（也就是说，数组没有超过[最大大小](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/ArrayList.java#ArrayList.0MAX_ARRAY_SIZE)）吗？

总而言之，一种或另一种方式的参数都有有效的点，但底线是`add()`方法的行为在所有情况下都没有得到很好的定义。Sun 不得不选择在哪里限制功能，他们选择不包括这种方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-25T20:15:50.350

如果您正在处理列表，则可以使用提供添加和删除操作的[ListIterator 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ListIterator.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-27T07:56:20.167

我想再补充一点。

```
ArrayList<String> arrayList = new ArrayList<String>();
arrayList.add("aa");
arrayList.add("ab");
Iterator<String> iterator = arrayList.iterator();
while (iterator.hasNext()) {
    String string = (String) iterator.next();
} 
```

这里迭代器需要最大到最大 2 次迭代来完成它的迭代。所以迭代器需要一定的时间才能在 N 时间内完成它的迭代。

但是如果我们添加`add()`方法会怎样：

```
while (iterator.hasNext()) {
    String string = (String) iterator.next();
    iterator.add("adding this data means iterator will always have next 
                    element.")
} 
```

因此添加`add()`迭代器将有机会运行无限循环。并且简单地我们使用迭代器来遍历元素，而不是陷入无限循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-07T11:24:52.017

迭代器只有一个指向下一个元素的指针。其中 ListIterator 也有指向前一个元素的指针（请记住，它可以向后遍历）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-19T22:42:41.837

因为 ListIterator 维护插入顺序，因此您可以到达要添加的位置。迭代器不关心顺序，所以如果它在迭代时将对象添加到过去的值中，那将是一场灾难。这就是迭代器只被赋予 remove() 方法的原因，因为你有一个特定的对象和从哪里删除。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-25T20:12:54.047

我想不出任何理论上的理由为什么`add()`不能被包含在`Iterator`. 正如`Iterator`can 允许通过自身从集合中删除元素一样，它可以被设计为处理以相同方式添加的元素。

但我会说，在我所有的 Java 编程生涯中——超过 15 年！——我从来没有想要一种`Iterator.add()`方法。所以我怀疑它根本没有那么有用。

# amazon-ec2 - 如何在 Amazon EC2 上安装支持 PNG 的 GraphicsMagick？

> ID：11196562
> 
> 赞同：6
> 
> 时间：2012-06-25T20:07:32.870
> 
> 标签：amazon-ec2, libpng, graphicsmagick

如果您天真地按照[GraphicsMagick 网站上的步骤操作](http://www.graphicsmagick.org/INSTALL-unix.html)，运行后`./configure`，您最终将不支持 PNG：

```
checking for PNG support ...
checking png.h usability... no
checking png.h presence... no

PNG               --with-png=yes        no 
```

这使得GraphicsMagick 安装变得非常无用。

如何启用 PNG 支持？Libpng 似乎已经安装，但未检测到：

```
> $ sudo yum install libpng
> Package 2:libpng-1.2.49-1.12.amzn1.x86_64 already installed and latest version 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T20:07:33.183

您需要安装该`libpng-devel`软件包，除了`libpng`：

```
sudo yum install libpng-devel 
```

然后当你运行时`./configure`，一切都会如你所愿：

```
checking for PNG support ...
checking png.h usability... yes
checking png.h presence... yes

PNG               --with-png=yes        yes (-lpng12) 
```

<Rant>这就是为什么所有东西都应该在明确指定其依赖关系的包中可用，并且可以使用包管理器轻松安装，而不是要求编译先决条件的晦涩知识。</Rant>

# r - 从与所有其他因子水平相关的值中减去与一个因子水平相关的最简单方法

> ID：11196567
> 
> 赞同：2
> 
> 时间：2012-06-25T20:07:43.663
> 
> 标签：r, plyr

我有一个数据框，其中包含“活”治疗的费率和“死亡”治疗的费率。我想从活的治疗中减去被杀死的治疗：

```
df <- data.frame(id1=gl(2, 3, labels=c("a", "b")),
                 id2=rep(gl(3, 1, labels=c("live1", "live2", "killed")), 2), 
                 y=c(10, 10, 1, 12, 12, 2),
                 otherFactor = gl(3, 2)) 
```

我想从 的所有其他值中减去`y`for的值，由 id1 的级别分隔，同时保留. 我最终会得到`id2=="killed"``y``otherFactor`

```
id1    id2   y otherFactor
  a  live1   9           1
  a  live2   9           1
  b  live1  10           2
  b  live2  10           3 
```

这几乎有效：

```
df_minusKill <- ddply(df, .(id1), function(x) x$y[x$id2!="killed"] - x$y[x$id2=="killed"])
names(df_minusKill) <- c("id1", "live1", "live2")
df_minusKill_melt <- melt(df_minusKill, measure.var=c("live1", "live2")) 
```

除了你失去 otherFactor 的值。也许我可以`merge`用来放回 的值`otherFactor`，但实际上我有大约十几个“otherFactor”列，因此将它们自动保留在那里会不那么麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:38:08.140

```
df2 <- ddply(df, .(id1), transform, y = y-y[id2=="killed"])
df2[-which(df2$id2=="killed"),]
  id1   id2  y otherFactor
1   a live1  9           1
2   a live2  9           1
4   b live1 10           2
5   b live2 10           3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:40:46.983

该`by`函数可以按因素分别处理数据帧的各个部分（或者您可以使用`lapply(split(df , ...))`：

```
>  by(df, df$id1, FUN= function(x) x[['y']]-x[ x$id2=="killed", "y"] )
df$id1: a
[1] 9 9 0
--------------------------------------------------------------------------- 
df$id1: b
[1] 10 10  0
> unlist( by(df, df$id1, FUN= function(x) x[['y']]-x[ x$id2=="killed", "y"] ) )
a1 a2 a3 b1 b2 b3 
 9  9  0 10 10  0 
```

您可以将其分配给 df 中的一列，并将`id2`不等于“killing”的行子集。

# php - php块中的PHP动态链接

> ID：11196568
> 
> 赞同：0
> 
> 时间：2012-06-25T20:07:43.727
> 
> 标签：php, hyperlink, dynamic-linking

我最近学会了通过 php 创建动态链接，但我今天的问题是我不知道如何在 php 块中执行此操作，例如我知道如何执行此操作：

```
 <div><a href="blah.php?id=<?php echo $id; ?>">content</a></div> 
```

但是我在 php 块中的 head 标签上方执行此操作，所以基本上我正在为动态内容创建一个动态链接，本质上我将在主页上动态呈现图像，这些图像是指向产品的链接。这就是我所拥有的：

```
 <?php 
     include_once "scripts/connect_to_mysql.php";
     //Select query for latest items
     $dynamic_newest = "";
     $sql = mysql_query("SELECT * FROM products ORDER BY date_added DESC LIMIT 24");
     $productCount = mysql_num_rows($sql); // count the output amount
     if ($productCount > 0) {
          while($row = mysql_fetch_array($sql)){
              $id = $row["id"];
              $pid = $id;
              $category = $row["category"];
              $subcategory = $row["subcategory"];
              $dynamic_newest .= "<a href="THIS IS WHAT I DONT KNOW HOW TO DO"><img src='inventory_images/$pid.jpg' width='100px' height='100px' /></a>";
        }
          } else {
          $dynamic_newest = "<h1>There are no products to display yet.</h1>";
          }
   ?> 
```

这可能真的很容易，但我找不到它，也许我没有问魔法谷歌正确的问题。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:09:08.857

逃避问题，改变：

```
 $dynamic_newest .= "<a href="THIS IS WHAT I DON'T KNOW HOW TO DO"><img src='inventory_images/$pid.jpg' width='100px' height='100px' /></a>"; 
```

至：

```
 $dynamic_newest .= "<a href=\"blah.php?id=$id\"><img src='inventory_images/$pid.jpg' width='100px' height='100px' /></a>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:11:10.383

不确定这是否是您正在寻找的，但无论如何..

```
$dynamic_newest .= "<a href='blah.php?id=$pid'><img src='inventory_images/$pid.jpg' width='100px' height='100px' /></a>"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T20:18:46.440

虽然您现在不使用它，但我相信您将来会发现它的用途。稍后，当您需要编写大块预格式化的非 php 文本并希望在其中添加 php 变量时，可以执行以下操作：

```
echo<<<YOUR_IDENTIFIER

<h1>Hi!</h1>
<form action='post'>
Welcome to my webpage =).
You can place code here as if it were not inside a PHP block,
but you can also use PHP variables. That means you can even
insert quotes like this --> "", though since this is still HTML,
it would be more accurate to use &gt; and &quot;. Your cleanest
bet and best-practice coding method is to {$encapsulate} php
variables in squiggley brackets. You can even
{$encapsulateArrays['likethis']}.
</form>

YOUR_IDENTIFIER;

echo "Back to regular PHP code."; 
```

确保 . 之前没有空格或制表符`YOUR_IDENTIFIER;`。

不过，要回答您的原始问题（与我上面的废话无关），请务必使用反斜杠正确转义`\`您拥有的任何引号，以免意外终止您的字符串文字。不要忘记`{}`封装你的变量，即使你正在做常规`echo "My {$variable} here";`它不会影响解析，但会让你在下一个项目工作的 2 个月后调试更容易。

# java - 快速排序降序不升序排序

> ID：11196571
> 
> 赞同：2
> 
> 时间：2012-06-25T20:08:00.657
> 
> 标签：java, quicksort

我刚刚从书中实现了快速排序算法并得到了奇怪的输出。它可以工作，但它按降序而不是升序排序。例如： [1, 5, 2, 10, 6, 9, 8, 3, 7, 4] 排序 [10, 9, 8, 7, 6, 5, 4, 3, 2, 1] 似乎不能在我的代码中找到源代码：

```
private void quicksort(int[] A, int p, int r) {
    if (p < r) {
        int q = partition(A, p, r);
        quicksort(A, p, q);
        quicksort(A, q + 1, r);
    }
}

private int partition(int[] A, int p, int r) {
    int x = A[p]; // pivot
    int i = p;
    int j = r;
    while (true) {

        while (A[i] > x) {
            i++;
        }

        while (A[j] < x) {
            j--;
        }
        if (i < j) {
            int temp = A[i];
            A[i] = A[j];
            A[j] = temp;
        } else {
            return j;
        }
    }
} 
```

初次通话：

```
 quicksort(A, 0, A.length - 1); 
```

如何计算快速排序的空间复杂度？

谢谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:14:35.847

它在您的分区函数中，您按降序排序。

```
 while(true) {
 //ignore all the numbers greater than X to left
 while (A[i] > x) {
        i++;
    }
 //ignore all numbers lesser than X to right
 while (A[j] < x) {
        j--;
 }

 //swap a number lesser than X on left with a number greater than X on right
    if (i < j) {
        int temp = A[i];
        A[i] = A[j];
        A[j] = temp;
        i++;
        j--;
    } else {
        //Now the array is so sorted, that all numbers lesser than X are on right of it and greater than X are to left of it. Hence return position of X
        return j;
    }
 } 
```

//对于升序：

```
 while(true) {

 while (A[i] < x) {
        i++;
 }

 while (A[j] > x) {
        j--;
 }

    if (i < j) {
        int temp = A[i];
        A[i] = A[j];
        A[j] = temp;
        i++;
        j--;
    } else {
        return j;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-11T10:24:30.627

这里要注意的关键点是在分区期间创建所有小于枢轴的元素和所有大于枢轴的元素的窗口的部分。您的实现是确保在分区结束时，数组的左半部分将具有大于枢轴的所有元素，而右半部将具有小于枢轴的所有元素。只需执行相反的操作即可使其按升序排列

```
while (A[i] < x) {
    i++;
}

while (A[j] > x) {
    j--;
}
```

# android - 如何在 HTML 中为 Android 手机 iframe 的 youtube 视频以便能够观看和旋转全屏？

> ID：11196573
> 
> 赞同：4
> 
> 时间：2012-06-25T20:08:28.387
> 
> 标签：android, iframe, youtube, fullscreen, rotation

我为 iphone 和 android 开发的新应用程序遇到了一些问题。这个应用程序在这两种情况下都应该获取并显示我的 Wordpress 博客的内容。我有不同的标签，其中之一是“视频”，显示所有“视频”类别的帖子。

我的问题是：要嵌入视频，我`<embed id="yt" src="http://www.youtube.com/V/..." type="application/x-shockwave-flash" width="100%" height="240"></embed>`在帖子的 html 部分使用：“A”

A：与 iphone 完美配合：视频直接全屏启动并旋转，但不适用于 Android（空白）

所以我尝试了：`<iframe width="100%" height="240" src="http://www.youtube.com/embed..." frameborder="0" allowfullscreen></iframe>`“

B：适用于 Android 和 iphone，但不能旋转或全屏

谁能帮我有一个 iphone 和 android 都可以读取的 hmtl 旋转 iframe？

谢谢！

# ruby-on-rails - 在 Rails 中复数“兴趣点”

> ID：11196577
> 
> 赞同：1
> 
> 时间：2012-06-25T20:08:45.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, inflection

我怎样才能复数*兴趣点*？

so that `PointOfInterest`become `PointsOfInterest`, `point_of_interest`should become`points_of_interest`等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:27:49.057

您可以通过这种方式覆盖复数：

在`config/initializers/inflections.rb`

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'PointOfInterest', 'PointsOfInterest'
  inflect.irregular 'point_of_interest', 'points_of_interest'
end 
```

*另请参阅* [在 rails 中更改生成模型的复数形式？](https://stackoverflow.com/questions/3378316/change-plural-form-of-generated-model-in-rails/3378349#3378349)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:26:59.573

从以前的答案：

更改 ActiveRecord 中的变形：

[https://stackoverflow.com/a/3378349/1335244](https://stackoverflow.com/a/3378349/1335244)

[http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html)

直接编辑迁移：

[https://stackoverflow.com/a/3379665/1335244](https://stackoverflow.com/a/3379665/1335244)

# jquery - Jquery UI Accordion 打开一个新创建的选项卡（简单操作）

> ID：11196578
> 
> 赞同：0
> 
> 时间：2012-06-25T20:08:50.307
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion, jquery-tabs

我在哪里使用 Jquery UI。我有一个手风琴菜单，每个手风琴菜单中有多个超链接。

我想要做的是，当我单击这些超链接之一时，我希望它打开我正在调用的页面，即显示在可以用 x 关闭的新选项卡中（就像这些简单的操作)，但在要显示的新选项卡中。

我的目标是我可以通过在手风琴中选择不同的超链接选项来打开多个选项卡，以便用户在需要时关闭它们。

我还没有找到有关如何执行此操作的任何信息。

有人可以帮忙吗。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:49:08.787

嗨，我想我已经解决了。感谢您回复@johnrobinson

我用一个按钮做到了这一点，但会做我需要的。

```
 <!DOCTYPE html>
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
                <title>jQuery UI Example Page</title>
                <link type="text/css" href="css/custom-theme/jquery-ui-1.8.20.custom.css" rel="stylesheet" />
                <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
                <script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script>
                <script type="text/javascript" src="js/jquery.callapse.js"></script>
            <meta charset="utf-8">
            <style>
            #dialog label, #dialog input { display:block; }
            #dialog label { margin-top: 0.5em; }
            #dialog input, #dialog textarea { width: 95%; }
            #tabs { margin-top: 1em; }
            #tabs li .ui-icon-close { float: left; margin: 0.4em 0.2em 0 0; cursor: pointer; }
            #add_tab { cursor: pointer; }
            </style>
            <script>
            $(function() {
                var $tab_title_input = $( "#tab_title"),
                    $tab_content_input = $( "#tab_content" );
                var tab_counter = 2;

                // tabs init with a custom tab template and an "add" callback filling in the content
                var $tabs = $( "#tabs").tabs({
                    tabTemplate: "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",
                    add: function( event, ui ) {
                        var tab_content = "andyContent" || "Tab " + tab_counter + " content.";
                        $( ui.panel ).append( "<p>" + tab_content + "</p>" );
                    }
                });

                // modal dialog init: custom buttons and a "close" callback reseting the form inside
                var $dialog = $( "#dialog" ).dialog({
                    autoOpen: false,
                    modal: true,
                    buttons: {
                        Add: function() {
                            addTab();
                            $( this ).dialog( "close" );
                        },
                        Cancel: function() {
                            $( this ).dialog( "close" );
                        }
                    },
                    open: function() {
                        $tab_title_input.focus();
                    },
                    close: function() {
                        $form[ 0 ].reset();
                    }
                });

                // actual addTab function: adds new tab using the title input from the form above
                function addTab() {
                    var tab_title = "andytitle" || "Tab " + tab_counter;
                    $tabs.tabs( "add", "#tabs-" + tab_counter, tab_title );
                    tab_counter++;
                }

                // addTab button: just opens the dialog
                $( "#add_tab" )
                    .button()
                    .click(function() {
                    addTab();

                    });

                // close icon: removing the tab on click
                // note: closable tabs gonna be an option in the future - see http://dev.jqueryui.com/ticket/3924
                $( "#tabs span.ui-icon-close" ).live( "click", function() {
                    var index = $( "li", $tabs ).index( $( this ).parent() );
                    if(index != 0){
                                $tabs.tabs( "remove", index );
                    }

                });
            });
            </script>
        </head>
        <body>
            <div class="demo">
                <button id="add_tab">Add Tab</button>
                    <div id="tabs">
                        <ul>
                            <li><a href="#tabs-1">Nunc tincidunt</a> </li>
                        </ul>
                    <div id="tabs-1">
                        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
                    </div>
            </div>
        </body>
        </html>

        </div> 
```

# sql - SQL Server 2008：通用转换为日期

> ID：11196585
> 
> 赞同：-2
> 
> 时间：2012-06-25T20:09:19.913
> 
> 标签：sql, sql-server, tsql

我的查询有一个小问题。我在本地开发服务器上的数据库使用法语日期格式 ( `dd/mm/yyyy`)，但我的发布服务器使用北美格式 ( `mm/dd/yyyy`)。

所以这会引发错误

```
SELECT CodPeriodoInsc, 
       CONVERT(VARCHAR, FechaDesde, 103) AS FechaDesde, 
       CONVERT(VARCHAR, FechaHasta, 103) AS FechaHasta 
FROM SedesPeriodosInscripcion
WHERE FechaDesde <= '25/06/2012' 
```

但它适用于开发，这适用于发布

```
SELECT CodPeriodoInsc,
       CONVERT(VARCHAR, FechaDesde, 103) AS FechaDesde, 
       CONVERT(VARCHAR, FechaHasta, 103) AS FechaHasta 
FROM SedesPeriodosInscripcion
WHERE FechaDesde <= '06/25/2012' 
```

但它对开发不起作用。

有没有办法可以使查询在两个数据库上都有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T20:10:47.720

如果您传入`05/06/2012`，您的代码应该如何知道这意味着 5 月 6 日还是 6 月 5 日？它不能。

解决方案是首先停止以这些格式传递/存储日期。如果您`20120605`在所有服务器上输入 6 月 5 日，则无论区域设置、排序规则、语言、日期格式设置等如何...

所以你应该总是说：

```
WHERE FechaDesde <= '20120625' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T20:17:30.853

您可以选择一种格式并使用[SET DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491.aspx)

但是你总是可以为你的日期文字选择一个规范的格式，比如：yyyyMMdd，在你的情况下是'20120625' 这些永远不会模棱两可（甚至对于人类来说也是如此）。

如果您使用的是 SQL Server 2012，则使用ISO[格式](http://msdn.microsoft.com/en-us/library/ms190977%28v=sql.90%29.aspx)或使用[DATETIMEFROMPARTS来构造日期。](http://technet.microsoft.com/en-us/library/hh213233.aspx)

# jquery - 一个函数下的两个 setTimeout

> ID：11196586
> 
> 赞同：0
> 
> 时间：2012-06-25T20:09:31.953
> 
> 标签：jquery, ajax, settimeout

我正在尝试使用 setTimeout 为我的一个小项目获取通知，但它需要我获取两种类型的通知 1\. 消息 2.global 所以我必须编写两个函数，这是否可以在一个函数下使用两个 setTimeout 是我编码的内容

```
// Message Notification Poll 

(function pollmsg() {
    setTimeout(function () {
        var demon = $('.msgnotimore').val();
        var page = "notimsg";
        var a = $('.gvpgvpxgvp').val();
        $.ajax({
            url: 'modules/notifications/beast.php?nid=' + demon + '&id=' + a + '&page=' + page,
            success: function (html) {
                if ($.trim(html) == 'no') {}
                else {
                    $('.msgnotimore').remove();
                    $('.notiloadmsg').prepend($(html).fadeIn('slow'));
                }
            },
            dataType: "html",
            complete: pollmsg
        });
    }, 60000);
})();
// Global Notification Poll
(function pollglobal() {
    setTimeout(function () {
        var demon = $('.globalnotimore').val();
        var page = "notiglobal";
        var a = $('.gvpgvpxgvp').val();
        $.ajax({
            url: 'modules/notifications/beast.php?nid=' + demon + '&id=' + a + '&page=' + page,
            success: function (html) {
                if ($.trim(html) == 'no') {}
                else {
                    $('.globalnotimore').remove();
                    $('.notiloadglobal').prepend($(html).fadeIn('slow'));
                }
            },
            dataType: "html",
            complete: pollglobal
        });
    }, 60000);
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:14:15.913

我想你是在问'可以同时运行两个 setTimeouts' 吗？

如果这是问题，那么答案是肯定的，您可以同时运行任意数量的 setTimeouts。我相信唯一的限制是内存。

# java - JLayeredPane 不绘图

> ID：11196587
> 
> 赞同：1
> 
> 时间：2012-06-25T20:09:35.770
> 
> 标签：java, jframe, jpanel, paint, jlayeredpane

再会，

希望这是一个快速的问题。我正在编写一个在 JFrame 中使用 JPanels 和 JLayeredPane 的应用程序。在我的应用程序最初启动时，其中一个面板不会显示，直到我的鼠标移到面板应该所在的区域上。我什至调用了 validate 和 repaint 方法，但我仍然能够同时显示两个面板。有什么建议么？谢谢你。

**这是我的 JFrame 类（具有 main 方法）**

```
import java.awt.Dimension;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;

public class Application extends JFrame
{
    public Application()
    {   
        this.setSize(500,500);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);

        JLayeredPane lp = new JLayeredPane();
        lp.setBounds(0,0,500,500);
        this.setLayeredPane(lp);

        Mypanel p1 = new Mypanel();
        Mypanel2 p2 = new Mypanel2();

        this.getLayeredPane().add(p1,0);
        this.getLayeredPane().add(p2,1);

        this.validate();
        this.repaint();
        this.validate();
    }

    public static void main(String[] args)
    {
        Application app = new Application();

    }
} 
```

**这是我的小组课程之一**

```
import javax.swing.JButton;
import javax.swing.JPanel;

public class Mypanel extends JPanel
{
    public JButton button;

    public Mypanel()
    {
        this.setLayout(null);
        this.setBounds(0, 0, 500, 500);
        JButton b = new JButton("Hello");
        b.setBounds(20,20,300,300);
        this.add(b);
    }
} 
```

**最后是我的最后一堂小组课**

```
import javax.swing.JButton;
import javax.swing.JPanel;

public class Mypanel2 extends JPanel
{
    public JButton button;

    public Mypanel2()
    {
        this.setLayout(null);
        this.setBounds(0, 0, 500, 500);
        JButton b = new JButton("SUP");
        b.setBounds(20,10,200,200);
        this.add(b);
        this.repaint();
        this.validate();
        this.repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:48:15.077

首先，在一个有效的程序中只`JComponent`重绘自己。如果在某些时候你发现`c.repaint()`从你的控制器代码调用解决了一些问题，你忽略了作为 Swing 框架核心的基本合约。这从来都不是一个好主意。所以删除所有这些`repaint`和`validate`电话是一个好的开始。下一个重要的事情是了解轻量级秋千组件是如何为他们的孩子绘画的。有两种模式：优化和未优化。第一个仅适用于兄弟姐妹在容器中不相互重叠的情况。如果他们这样做了并且优化了绘制，那么当这些组件重新绘制自己时（例如当您将鼠标指针悬停在它们上方时），您将获得各种奇怪的行为。所有轻量级组件都可以通过`setComponentZOrder()`. JLayeredPane 只是引入了层的概念，以更灵活的方式控制 zorder。它试图聪明地选择哪种模式来绘制它的孩子，但遗憾的是，它的工作方式有一些微妙之处。所以这段代码可以满足你的需要：

```
Mypanel p1 = new Mypanel();
Mypanel2 p2 = new Mypanel2();

getLayeredPane().setLayer(p1,0);
getLayeredPane().setLayer(p2,1);

getLayeredPane().add(p1);
getLayeredPane().add(p2); 
```

这不会：

```
Mypanel p1 = new Mypanel();
Mypanel2 p2 = new Mypanel2();

getLayeredPane().add(p1);
getLayeredPane().add(p2);

getLayeredPane().setLayer(p1,0);
getLayeredPane().setLayer(p2,1); 
```

诀窍是`setLayer`在将子项添加到容器之前调用，以便 JLayeredPane 关闭优化绘制。

顺便说一句，我不禁想知道为什么 `JLayeredPane`？如果您需要以编程方式在不同布局之间切换，也许 JTabbedPane 是您的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T18:24:19.170

```
JLayeredPane lp = new JLayeredPane();
JPanel d = new JPanel();
d.setVisible(true);
d.setBounds(10, 10, 556, 386);
lp.add(d, new Integer(0), 0); 
```

# excel - 无法从 Excel 文件中获取色阶条件格式以显示在 Windows 窗体的嵌入式电子表格中

> ID：11196592
> 
> 赞同：0
> 
> 时间：2012-06-25T20:09:54.057
> 
> 标签：excel, conditional-formatting, spreadsheetgear

我有一个当前显示可编辑电子表格的 Windows 窗体。我具有允许用户浏览 Excel 文件以导入表单视图中的电子表格的功能。作为条件格式的结果，导入具有色阶条件格式的 Excel 文件以及单元格的颜色以显示在嵌入的电子表格中，这一点很重要。

我目前正在使用 SpreadsheetGear 的 WorkbookView，但我还发现 SpreadsheetGear 不处理带有色标的条件格式。有没有办法，

1.  从我的 excel 对象中保存生成的单元格颜色，以便稍后应用于我的 SpreadsheetGear 对象中的单元格？或者，
2.  使用 Microsoft.Office.Interop.Excel 命名空间中的控件来处理现有 excel 文件中的颜色缩放条件格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:47:22.153

SpreadsheetGear 在 Excel 2007 及更早版本中赶上了 Excel 的功能。SpreadsheetGear 实现包含颜色缩放的条件格式还需要一段时间，因为直到 2007 年添加之后才将其添加到 Excel。

# php - 页面加载时未加载 JQGrid 数据

> ID：11196594
> 
> 赞同：1
> 
> 时间：2012-06-25T20:10:02.497
> 
> 标签：php, jquery, jqgrid

我正在使用[JQGrid](http://www.trirand.com/)

我在 2 个域上拥有它（相同的代码）......在域 1 上，我在页面加载时加载数据没有问题。

在域 2 上，我有完全相同的代码，但有一个问题。

当页面加载时，它不会加载数据，但是当我单击 JQGrid 上的刷新按钮时，数据加载正常，但在页面加载期间从不加载。

我查看了代码，对我来说似乎是一样的。

有没有人知道什么可以让这件奇怪的事情发生？

我已经没有关于在哪里看的想法了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:22:21.797

运行 fiddler 并查看导致问题的原因。

# android - 如何使用异步任务多次暂停程序

> ID：11196596
> 
> 赞同：0
> 
> 时间：2012-06-25T20:10:10.977
> 
> 标签：android, multithreading, asynchronous

我知道标题有些令人困惑，我的问题是：我想使用 sleep(ms) 多次“暂停”我的程序（通过循环）并更改用户按下的几个按钮。我知道对 UI 的更改只能在主线程中进行，所以我想知道如何将此代码转换为异步任务。我还记得在某处读到异步任务只能调用一次？如果是这样，我可以研究哪些其他解决方案？

```
View.OnClickListener SimulateButtonHandler = new View.OnClickListener() {
        @Override
        public void onClick(View v) {

        for(int j=0;j<169;j++) //169 buttons to click
        {
            if(ClickedPoints[j]!=null) //how I keep track of which buttons has clicked
            {       //clear button color
                Drawable d2 = ClickedPoints[j].getBackground();  
                ClickedPoints[j].invalidateDrawable(d2);  
                d2.clearColorFilter();
            }

        }

        Timer timer = new Timer();

        for(int i=0;i<169;i++)
        {
            if(ClickedPoints[i]!=null)
            {       //change the color after some time
                Simulate(timer, i);
                //clear color again
                Drawable d2 = ClickedPoints[i].getBackground();  
                ClickedPoints[i].invalidateDrawable(d2);  
                d2.clearColorFilter();

            }

        }
}   
};

public void Simulate(Timer timer, final int index)
{
    timer.schedule(new TimerTask()
    {
        public void run() {
            Sim(index);
        }

    }, 1000); //delay for some amount of time, then rehighlight the button
}

private void Sim(int i)
{
    Drawable d1 = ClickedPoints[i].getBackground();  
    PorterDuffColorFilter filter = new PorterDuffColorFilter(Color.RED, PorterDuff.Mode.SRC_ATOP);  
    d1.setColorFilter(filter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:32:22.657

您最好使用 Thread 来运行后台工作（和暂停）并使用 Handler 来访问 UI 线程。

这是一个关于使用线程处理程序的好[教程。](http://www.vogella.com/articles/AndroidPerformance/article.html#handler)

# persistence - 设置 HSQL 脚本换行格式

> ID：11196602
> 
> 赞同：0
> 
> 时间：2012-06-25T20:10:29.080
> 
> 标签：persistence, newline, hsqldb

我们在源代码控制中有一个 HSQL .script 文件。我们的一些开发人员使用 Linux，一些使用 Windows。每次提交时，由于脚本中特定于平台的换行符，我们必须处理冲突（文件中的每一行都有一个）。

有没有办法为 HSQL 脚本文件指定换行符格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:40:44.430

您不能为 HSQLDB 脚本指定行尾 (eol) 格式。无论保存文件时使用的 eol 格式如何，HSQLDB 都可以读取 .script 文件。

源代码控制系统通常允许指定用于文本文件的 eol 格式。例如，Subversion 有一个 svn:eol 风格的属性，可以为所有或单个文件设置为“native”。

# java - 在 Java 应用程序中嵌入可执行文件

> ID：11196607
> 
> 赞同：1
> 
> 时间：2012-06-25T20:10:54.773
> 
> 标签：java, jar, executable, exe

如何在 Java 应用程序中嵌入二进制文件（确切地说是可执行文件）？有没有办法在编译时读取文件，还是必须将十六进制转储复制到应用程序的源代码中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T20:16:23.123

Jar 文件是带有额外元数据的 zip 文件。您可以轻松地将 exe 文件直接嵌入到您的 jarfile 中。

您不能轻易让 Windows在您的 zip 文件中*执行*EXE 文件，但您可以从类路径资源中读取它并将其写入带有“.exe”后缀的临时文件，然后执行该文件。

# sql - 查询调用连接的相同表的两个实例来比较字段，给出镜像结果。如何消除镜像重复？

> ID：11196608
> 
> 赞同：2
> 
> 时间：2012-06-25T20:11:00.793
> 
> 标签：sql, oracle

这是我所拥有的查询的更简单版本。

```
Alias1 as 
(select distinct ID, file_tag, status, creation_date from tables where creation_dt >= sysdate and creation_dt <= sysdate + 1),

Alias2 as 
(select distinct ID, file_tag, status, creation_date from same tables creation_dt >= sysdate and creation_dt <= sysdate + 1)

select distinct Alias1.ID ID_1,
           Alias2.ID ID_2,
           Alias1.file_tag,
           Alias1.creation_date in_dt1,
           Alias2.creation_date in_dt2
    from   Alias1, Alias2
    where Alias1.file_tag = Alias2.file_tag
          and Alias1.ID != Alias2.ID
    order by Alias1.creation_dt desc 
```

这是结果的一个例子。这两者是相同的，尽管它们的值是翻转的。

```
 ID_1 ID_2  File_Tag     in_dt1          in_dt2
    70   66    Apples       6/25/2012 3:06  6/25/2012 2:53:47 PM
    66   70    Apples       6/25/2012 2:53  6/25/2012 3:06:18 PM 
```

查询的目标是找到多个具有匹配文件标签的 ID，并对当天早些时候提交的 ID 进行处理（查询每天运行，只需要当天的重复项）。我对 SQL/Oracle 还是比较陌生，想知道是否有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:22:05.533

```
SELECT *
  FROM (SELECT id, file_tag, creation_date in_dt
             , row_number() OVER (PARTITION BY file_tag 
                                      ORDER BY creation_date) rn
             , count(*) OVER (PARTITION BY file_tag) ct
          FROM tables
         WHERE creation_date >= TRUNC(SYSDATE)) tbls
 WHERE rn = 1
   AND ct > 1; 
```

这应该让您在每个 file_tag 中的第一行（最早的）今天至少有 2 条记录。

内部选择按创建日期计算每组相同的 file_tag 记录的相对行数。外部选择检索每个分区中的第一个。

这从您的目标声明中假设您想要对每个 file_tag 的最早单行执行某些操作。内部查询仅返回 creation_date 为当天某个时间的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T22:00:40.337

这是一个简单的方法，只需更改您的比较操作：

```
select distinct Alias1.ID ID_1, Alias2.ID ID_2, Alias1.file_tag,
       Alias1.creation_date in_dt1, Alias2.creation_date in_dt2
from Alias1 join
     Alias2
     on Alias1.file_tag = Alias2.file_tag and
        Alias1.ID < Alias2.ID
order by Alias1.creation_dt desc 
```

用小于命令替换不等于这两个想法，因此较小的总是第一个。这将消除重复。注意：我还修复了连接语法。

# jquery - 将预定义值设置为另一个文本框

> ID：11196612
> 
> 赞同：0
> 
> 时间：2012-06-25T20:11:19.067
> 
> 标签：jquery, html, textbox

我正在尝试使用 Jquery 将一个已经定义了值的框的值传递给另一个没有定义的框。我尝试了代码，但我一直在文本框中而不是文本中得到“未定义”。

```
<input type="text" ID="readonly" runat="server" class="threeline-two" readonly=
"readonly" value="email@email.com" />
<input type="text" ID="readonlytxt" runat="server" readonly = "readonly"  />

<input type="text" ID="Year" runat="server" class="threeline-two" />
<input type="text" ID="Yeartxt" runat="server"   />
    <script type="text/javascript">

        $(function () {
            $('#Year').change(function () {
                var TxtBox = document.getElementById("Yeartxt");

                TxtBox.value = $(this).val();
                var string = $(this).val()

        var TxtBox2 = document.getElementById("readonlytxt");

                TxtBox2.value = $("readonly").val();
                var string = $("readonly").val()
            });
        });

</script> 
```

[http://jsfiddle.net/YAN2X/](http://jsfiddle.net/YAN2X/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:22:57.843

```
 $(function () {
            $('#Year').change(function () {
               $("#Yeartxt").val($("#Year").val());
               $("#readonlytxt").val($("#readonly").val());
            });
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:17:43.957

```
TxtBox2.value = $("#readonly").val(); 
```

是需要的。JQuery 需要 # 来指示其 ID，而不是类或元素标记。它就像一个 CSS 选择器。更多关于 JQuery 选择器的[信息在这里](http://api.jquery.com/category/selectors/)。

有关固定代码，请参阅[此 jsfiddle](http://jsfiddle.net/Pb474/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:20:54.807

用这个替换脚本：

```
 $(function () {
        $('#Year').change(function () {
            var TxtBox = document.getElementById("Yeartxt");

            TxtBox.value = $(this).val();
            var string = $(this).val();

            $("#readonlytxt").val($("#readonly").val());

/*
var TxtBox2 = document.getElementById("readonlytxt");

//$("readonly") selects no element: "#" is missing
TxtBox2.value = $("readonly").val();
 */

        });
    }); 
```

# jquery - 在 JQuery 中使用 CSS 编写 Html

> ID：11196616
> 
> 赞同：0
> 
> 时间：2012-06-25T20:11:31.043
> 
> 标签：jquery, html, css, jquery-mobile

在我的 HTML 页面中，我想根据计数显示一定数量的按钮。所以我过去常常动态显示这些按钮。我写的脚

```
var html = "<a href='#' data-role='button' data-theme='b' data-inline='true'>Pay</a>";
$("#DivId").append(html); 
```

但是样式不适用于按钮。当我尝试直接在 Div 标签中编写以下代码时，它工作正常

```
<a href='#' data-role='button' data-theme='b' data-inline='true'>Pay</a> 
```

任何帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:19:42.807

您必须允许 JQueryMobile 更新新添加的 DOM 元素。

见[http://jquerymobiledictionary.pl/faq.html](http://jquerymobiledictionary.pl/faq.html)

```
var html = "<a href='#' data-role='button' data-theme='b' data-inline='true'>Pay</a>";
$("#DivId").append(html).trigger('create'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:13:14.733

您是否在`$(document).ready()`函数或其他东西上使用过 JavaScript 的样式？在这种情况下，您需要在执行`$("#DivId").append(html);`.

## 例子

你有这样的功能：

```
$(document).ready(function(){
    $('a[href="#modal"]').click(function(){
        alert("Modal");
    });
}); 
```

它在页面加载后在运行时执行。您正在动态插入另一个`<a>`具有相同内容的标签。例如：

```
$("#result").html('<a href="#modal">Modal Window</a>'); 
```

发生的情况是，这个 HTML 是在处理程序执行后插入的。因此，函数中启动的处理程序`$(document).ready()`不适用于此。因此，为了确保即使执行此操作，您也需要以这种方式重新初始化它：

```
$(document).ready(function(){
    loadPage();
});
function loadPage(){
    $('a[href="#modal"]').click(function(){
        alert("Modal");
    });
}
function something(){
    $("#result").html('<a href="#modal">Modal Window</a>');
    loadPage();
} 
```

希望你明白吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:15:14.867

答案是它应该工作。只要代码在 DOM 中正确输出（请参阅 Firebug 或其他检查器），CSS 就没有理由无法在它上面工作，而且很可能问题出在您尚未共享的 CSS 上。

# sql - 通过不工作的 SQL 分组 - 非常基本

> ID：11196621
> 
> 赞同：0
> 
> 时间：2012-06-25T20:11:55.563
> 
> 标签：sql, group-by

我做了一些搜索，我看到一些人试图做一些嵌套的选择语句来解决这个问题。我不明白。

有人能帮助我吗：

数据已按提供者名称排序，每个提供者名称根据表中的其他各种列多次列出。但是，当我这样做时，每个提供商名称都没有一行。相反，提供者名称重复，就好像我没有使用 group by

这是代码：

```
create table moopnjsummary2 as

select mnj.ProviderName
from moopnj mnj
group by mnj.ProviderName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:05:14.880

```
select mnj.ProviderName, count(*) as Providernamecount
from moopnj mnj 
group by mnj.ProviderName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:21:38.047

你想要一个不重复的 mnj.ProviderName 列表吗？你的最终目标是什么？

你也可以试试[SELECT DISTINCT](http://www.w3schools.com/sql/sql_distinct.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:22:30.370

如果您要寻找的只是不同的 ProviderNames，请尝试运行

```
SELECT DISTINCT moopnj.ProviderName FROM moopnj 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:22:32.623

这不是您问题的完整答案，但如果您想要的只是您应该使用的提供者名称列表：“选择 DISTINCT mnj.ProviderName ...”。这将消除所有重复。

# php - 电子邮件仅在 Outlook 中显示代码/文本

> ID：11196622
> 
> 赞同：0
> 
> 时间：2012-06-25T20:11:56.873
> 
> 标签：php, email, outlook

我在 Outlook 正确显示电子邮件内容和附件时遇到问题，电子邮件内容在 Google Mail 或 Hotmail 等邮件服务提供商上运行良好。

这是 Outlook 产生的电子邮件内容：

```
X-Mailer: simpleEmailClass v1.0

MIME-Version: 1.0

Content-Type: multipart/mixed; boundary="13406541204fe8c2284f5aa"

Message-Id: < - removed - >
Date: Mon, 25 Jun 2012 20:55:20 +0100 (BST)

--13406541204fe8c2284f5aa

Content-Type: multipart/alternative; boundary="13406541204fe8c2284f98f"

--13406541204fe8c2284f98f

Content-Type: text/plain; charset="ISO-8859-1"

Content-Transfer-Encoding: quoted-printable

Dear Rachel
Further to your recent enquiry please accept this email as confirmation of your booking.
Kind Regards
Hanna

--13406541204fe8c2284f98f

Content-Type: text/html; charset="ISO-8859-1"

Content-Transfer-Encoding: quoted-printable

<html>
<body>
<html><body><p>

    <span style="font-family: arial, helvetica, sans-serif; font-size: 12px; ">Dear Rachel</span></p>

<p>

    <span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;">Further to your recent enquiry please accept this email as confirmation of your booking.</span></span></p>

<p>

    <span style="font-size:12px;"><span style="font-family:arial,helvetica,sans-serif;">Kind Regards</span></span></p>

<p>

    <font face="arial, helvetica, sans-serif">Hanna</font></p>

</body></html>
</body>
</html>

--13406541204fe8c2284f98f--

--13406541204fe8c2284f5aa

Content-Type: application/pdf; name="invoice.pdf"

Content-Transfer-Encoding: base64

Content-Disposition: attachment; filename="invoice.pdf"

JVBERi0xLjMKMSAwIG9iago8PCAvVHlwZSAvQ2F0YWxvZwovT3V0bGluZXMgMiAwIFIKL1Bh

^^ This go on and on for a long time, thought it was best not to post it all.

--13406541204fe8c2284f5aa-- 
```

上面的这封电子邮件是在 Outlook 中看到的，在 Google Mail 中，它显示为 HTML 版本。

这是我用于电子邮件类的代码。

```
<?php
class sec {
    var $secVersion = '1.0';
    var $to = '';
    var $Cc = array ();
    var $Bcc = array ();
    var $subject = '';
    var $message = '';
    var $attachment = array ();
    var $embed = array ();
    var $charset = 'ISO-8859-1';
    var $emailboundary = '';
    var $emailheader = '';
    var $textheader = '';
    var $errors = array ();

    function __construct($toname, $toemail, $fromname, $fromemail) {
        $this->emailboundary = uniqid ( time () );
        $this->to = "{$toname} <" . $this->validateEmail ( $toemail ) . ">";
        $email = $this->validateEmail ( $fromemail );
        $this->emailheader .= "From: {$fromname} <{$email}>\r\n";
    }

    function validateEmail($email) {
        if (! preg_match ( '/^[A-Z0-9._%-]+@(?:[A-Z0-9-]+\\.)+[A-Z]{2,4}$/i', $email ))
            die ( 'The Email ' . $email . ' is not Valid.' );

        return $email;
    }

    function Cc($email) {
        $this->Cc [] = $this->validateEmail ( $email );
    }

    function Bcc($email) {
        $this->Bcc [] = $this->validateEmail ( $email );
    }

    function buildHead($type) {
        $count = count ( $this->$type );
        if ($count > 0) {
            $this->emailheader .= "{$type}: ";
            $array = $this->$type;
            for($i = 0; $i < $count; $i ++) {
                if ($i > 0)
                    $this->emailheader .= ',';
                $this->emailheader .= $this->validateEmail ( $array [$i] );
            }
            $this->emailheader .= "\r\n";
        }
    }

    function buildMimeHead() {
        $this->buildHead ( 'Cc' );
        $this->buildHead ( 'Bcc' );

        $this->emailheader .= "X-Mailer: simpleEmailClass v{$this->secVersion}\r\n";
        $this->emailheader .= "MIME-Version: 1.0\r\n";
    }

    function buildMessage($subject, $message = '') {
        $textboundary = uniqid ( time () );
        $this->subject = strip_tags ( trim ( $subject ) );

        $this->textheader = "Content-Type: multipart/alternative; boundary=\"$textboundary\"\r\n\r\n";
        $this->textheader .= "--{$textboundary}\r\n";
        $this->textheader .= "Content-Type: text/plain; charset=\"{$this->charset}\"\r\n";
        $this->textheader .= "Content-Transfer-Encoding: quoted-printable\r\n\r\n";
        $this->textheader .= strip_tags ( $message ) . "\r\n\r\n";
        $this->textheader .= "--$textboundary\r\n";
        $this->textheader .= "Content-Type: text/html; charset=\"$this->charset\"\r\n";
        $this->textheader .= "Content-Transfer-Encoding: quoted-printable\r\n\r\n";
        $this->textheader .= "<html>\n<body>\n{$message}\n</body>\n</html>\r\n\r\n";
        $this->textheader .= "--{$textboundary}--\r\n\r\n";
    }

    function mime_type($file) {
        return (function_exists ( 'mime_content_type' )) ? mime_content_type ( $file ) : trim ( exec ( 'file -bi ' . escapeshellarg ( $file ) ) );
    }

    function attachment($file, $filename = NULL, $direct_input = FALSE, $mime = '') {
        if(!$direct_input)
        {
            if (is_file ( $file )) {
                $basename = $filename? $filename: basename ( $file );
                $attachmentheader = "--{$this->emailboundary}\r\n";
                $attachmentheader .= "Content-Type: " . $this->mime_type ( $file ) . "; name=\"{$basename}\"\r\n";
                $attachmentheader .= "Content-Transfer-Encoding: base64\r\n";
                $attachmentheader .= "Content-Disposition: attachment; filename=\"{$basename}\"\r\n\r\n";
                $attachmentheader .= chunk_split ( base64_encode ( fread ( fopen ( $file, "rb" ), filesize ( $file ) ) ), 72 ) . "\r\n";

                $this->attachment [] = $attachmentheader;
            } else {
                die ( 'The File ' . $file . ' does not exsist.' );
            }
        }
        else
        {
            $basename = $filename;
            $attachmentheader = "--{$this->emailboundary}\r\n";
            $attachmentheader .= "Content-Type: $mime; name=\"{$basename}\"\r\n";
            $attachmentheader .= "Content-Transfer-Encoding: base64\r\n";
            $attachmentheader .= "Content-Disposition: attachment; filename=\"{$basename}\"\r\n\r\n";
            $attachmentheader .= chunk_split ( base64_encode ( $file ), 72 ) . "\r\n";

            $this->attachment [] = $attachmentheader;
        }
    }

    function embed($file) {
        if (is_file ( $file )) {
            $basename = basename ( $file );
            $fileinfo = pathinfo ( $basename );
            $contentid = md5 ( uniqid ( time () ) ) . "." . $fileinfo ['extension'];
            $embedheader = "--{$this->emailboundary}\r\n";
            $embedheader .= "Content-Type: " . $this->mime_type ( $file ) . "; name=\"{$basename}\"\r\n";
            $embedheader .= "Content-Transfer-Encoding: base64\r\n";
            $embedheader .= "Content-Disposition: inline; filename=\"{$basename}\"\r\n";
            $embedheader .= "Content-ID: <{$contentid}>\r\n\r\n";
            $embedheader .= chunk_split ( base64_encode ( fread ( fopen ( $file, "rb" ), filesize ( $file ) ) ), 72 ) . "\r\n";

            $this->embed [] = $embedheader;

            return "<img src=3D\"cid:{$contentid}\">";
        } else {
            die ( 'The File ' . $file . ' does not exsist.' );
        }
    }

    function sendmail() {
        $this->buildMimeHead ();

        $header = $this->emailheader;

        $attachcount = count ( $this->attachment );
        $embedcount = count ( $this->embed );

        if ($attachcount > 0 || $embedcount > 0) {
            $header .= "Content-Type: multipart/mixed; boundary=\"{$this->emailboundary}\"\r\n\r\n";
            $header .= "--{$this->emailboundary}\r\n";
            $header .= $this->textheader;

            if ($attachcount > 0)
                $header .= implode ( "", $this->attachment );
            if ($embedcount > 0)
                $header .= implode ( "", $this->embed );
            $header .= "--{$this->emailboundary}--\r\n\r\n";
        } else {
            $header .= $this->textheader;
        }

        return mail ( $this->to, $this->subject, $this->message, $header );
    }
} 
```

我该怎么做才能使 Outlook 中的电子邮件仅显示纯文本或 html 和附件，而不是当前显示的方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:17:02.843

我不能确定，但​​我似乎记得遇到过同样的问题，结果发现使用 '\n' 而不是 '\r\n' 有帮助，你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:16:50.470

我最近在向较新的电子邮件客户端发送电子邮件时遇到了类似的问题。我使用的是 Thunderbird 3，升级到 v8 或当时的任何版本（肯定是更新的）后，所有的电子邮件都没有附件和一些电子邮件的源代码。

修复更改为单个多部分/混合容器。在示例中，您有 2 个容器。对我来说看起来不错，但删除嵌套容器解决了这个问题。

另外，我使用 \n 而不是 \r\n

# delphi - 如何在 Delphi XE2 上调试 2 个 dll？

> ID：11196628
> 
> 赞同：1
> 
> 时间：2012-06-25T20:12:05.410
> 
> 标签：delphi, debugging, dll, delphi-xe2, delphi-xe

我有这个 EXE 使用的 EXE 和 2 个 DLL。所有二进制文件均由 Delphi XE2 编译。

运行EXE时如何一次调试2个DLL？

第二个 IDE 无法附加到第一个 IDE 正在调试的进程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:29:14.300

事实上，您不需要为此做任何特别的事情。您不需要运行多个 IDE，也不需要附加到进程。开始调试您的可执行文件并简单地进入 DLL 中的代码。调试器会为您处理这一切。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T21:23:58.950

我通过以下步骤解决了调试器问题：

1.  打开两个 DLL 中每一个的任何源文件。
2.  向两个 DLL 中的每一个添加任何断点（可能是可选步骤）。
3.  在两个 DLL 之一上运行主机应用程序。

# php - 使用 MYSQLI 的困惑

> ID：11196631
> 
> 赞同：0
> 
> 时间：2012-06-25T20:12:15.810
> 
> 标签：php, mysql, mysqli

我刚开始使用 mysqli API for PHP。显然，每次实例化 MYSQLI 类的对象时，它都可以建立与数据库的连接，因为它连接到服务器，这与 mysql_connect 不同，mysql_connect 先连接到服务器，然后需要指定要查询的数据库。

现在如果数据库存在，这是一个很好的问题，在我的情况下，数据库在第一次连接到服务器/执行问题时不存在，因此我必须在不指定数据库的情况下连接，这很好，因为 msyqli构造函数不会强制此数据库。

我的挑战本质上是，如何在尝试第一次连接之前检查数据库是否存在。真正做到这一点的唯一方法是建立与服务器的连接，然后使用以下查询的结果来判断数据库是否存在：

```
SELECT COUNT(*) AS `exists` FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMATA.SCHEMA_NAME="dbname" ; 
```

如果返回 true，则数据库存在，但现在的挑战是如何获取 mysqli 对象来查询此数据库，而不是必须在查询中添加数据库名称的前缀。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:17:36.927

`USE databasename`作为查询更改当前的工作数据库。或者你当然可以使用[`$mysqli->select_db('databasename');`](http://nl3.php.net/manual/en/mysqli.select-db.php)

# javascript - 基于子节点存在的过滤元素

> ID：11196635
> 
> 赞同：5
> 
> 时间：2012-06-25T20:12:36.917
> 
> 标签：javascript, d3.js

如果我想根据元素的子节点的存在来过滤元素，我将如何做到这一点`d3.js`？

例如在这个 html 结构中，我将如何选择`<li>`具有子元素的`<a>`元素？

```
<ul>
    <li><a href="#">Link 1</a></li>
    <li>Bullet</li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
    <li>Bullet</li>
</ul> 
```

对于那些不知道的人，[问和回答你自己的问题是完全可以的......](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:13:30.833

使用[`filter()`](https://github.com/mbostock/d3/wiki/Selections#wiki-filter)功能：

```
var ul = d3.select("ul");
var lis = ul.selectAll("li").filter(function() {
    return ! d3.select(this).select("a").empty();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-08T13:02:30.250

您使用本机 Javascript 冷处理问题：

首先，您可以选择“li”元素内的所有“a”元素：

```
var childLinks = document.querySelectorall("ul li a");   // Supported By IE8+ 
```

然后，您可以为它们中的每一个选择父级：

```
childLinks[0].parentNode 
```

本机方法应该更快。

# android - 在 BOOTUP 上启动服务，然后安排服务每 10 分钟运行一次？

> ID：11196636
> 
> 赞同：1
> 
> 时间：2012-06-25T20:12:39.250
> 
> 标签：android, android-intent, android-service

我想在启动时运行一项服务，然后计划每 10 分钟运行一次。我该怎么办？

如果在启动时我可以强制安排 10 分钟，但我想我每次启动时都需要安排这个，因为重新启动后所有的日程都丢失了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:19:00.857

[这里](http://www.androidenea.com/2009/09/starting-android-service-after-boot.html)有一个很好的小教程，它解释了如何在启动时启动一个服务，该服务一直在运行，并在某个固定的时间间隔做一些事情（在教程的情况下写入日志文件）。

正如@CommonsWare 指出的那样，这会给系统带来不必要的负载。更好的方法是使用 AlarmManager 安排重复警报，如[本线程](https://stackoverflow.com/a/10819196/535871)中所述。您可以注册您的应用程序以接收 BOOT_COMPLETED 广播（如上述教程中所述）并作为响应安排警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:54:20.107

在我的应用程序中，我在[ACTION_BOOT_COMPLETED](http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED) Intent 上注册了一个广播接收器，以便在设备启动完成时收到通知。要获得结果，您必须在清单文件中指定以下内容：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
...
<receiver
 android:name=".YOUR_BROADCAST_RECEIVER">
 <intent-filter>
  <action android:name="android.intent.action.BOOT_COMPLETED" />
 </intent-filter>
</receiver> 
```

在 BroadcastReceiver 我启动了服务

```
public void onReceive(Context context, Intent intent) {
 context.startService(new Intent(context, serviceClass));
 ...
} 
```

最后在服务的onStartCommand中

```
public int onStartCommand(Intent intent, int flags, int startId) {
 ...
 setNextSchedule();
 ...
}

private void setNextSchedule() {
 long time = WHEN_YOU WANT_THE SERVICE TO BE SCHEDULED AGAIN;
 AlarmManager am = (AlarmManager) this.getSystemService(Context.ALARM_SERVICE);
 PendingIntent pi = PendingIntent.getService(this, 0,new Intent(this, this.getClass()), PendingIntent.FLAG_ONE_SHOT);
 am.set(AlarmManager.RTC_WAKEUP, time, pi);
} 
```

AlarmManger将使用待处理的[意图](http://developer.android.com/reference/android/app/AlarmManager.html)将您传递的意图发送到您的服务。看看[这里](http://developer.android.com/reference/android/app/AlarmManager.html#set%28int,%20long,%20android.app.PendingIntent%29)

再见

# css - 在 twitter bootstrap 2.0.4 中更改导航栏颜色

> ID：11196638
> 
> 赞同：33
> 
> 时间：2012-06-25T20:12:47.923
> 
> 标签：css, html, twitter-bootstrap

想知道是否有人知道如何在 bootstrap v2.0.4 中更改导航栏颜色

我尝试了这个解决方案，它似乎不起作用：[Twitter Bootstrap 中的导航栏颜色](https://stackoverflow.com/questions/9869610/navbar-color-in-twitter-bootstrap)

还有其他解决方案吗？我已经尝试过定制的引导程序包，但我还处于开发阶段，我可以进行这样的切换。

代码：

```
.navbar-inner {
  background-color: #2c2c2c; /* fallback color, place your own */

  /* Gradients for modern browsers, replace as you see fit */
  background-image: -moz-linear-gradient(top, #333333, #222222);
  background-image: -ms-linear-gradient(top, #333333, #222222);
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#333333), to(#222222));
  background-image: -webkit-linear-gradient(top, #333333, #222222);
  background-image: -o-linear-gradient(top, #333333, #222222);
  background-image: linear-gradient(top, #333333, #222222);
  background-repeat: repeat-x;

 /* IE8-9 gradient filter */
 filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#333333',    endColorstr='#222222', GradientType=0);} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-04T16:20:28.197

导航栏的颜色来自 bootstrap.css 中的 .navbar-inner 行 3582 到 3589（对于版本 2.0.4）

![boostrap.css 中的 .navbar-inner](../Images/4f0bf08da6c453fec2a4ab9327e4fc80.png)

css 属性以特定顺序应用

*   背景颜色（被所有网络浏览器识别）
*   供应商前缀 -moz、-ms、-webkit、-o（用于服务特定的 Web 浏览器）
*   标准（但尚未实施）

**使用 Chrome 的 boostrap.css 中的背景颜色覆盖示例：**

`background-color:#ffffff;`已`background-color:#eab92d`直接替换为 boostrap.css （不推荐，但只是为了说明这一点）。

`background-color: #EAB92D`首先应用

`-moz-linear-gradient`并被`-ms-linear-gradient`忽略

`-webkit-gradient`封面`background: #EAB92D`（回到默认渐变）

`-webkit-linear-gradient`覆盖`-webkit-gradient`

`-o-linear-gradient`并被`linear-gradient`忽略

![.navbar-inner 替换为背景色](../Images/23836d946655c8801fd452c37dc8da3f.png)

![.navbar-inner 与背景颜色替换结果](../Images/629776bc494e7b2d46b91be917988bc4.png)

**从 colorzilla 更改 .navbar-inner 的颜色**

[您可以使用colorzilla](http://www.colorzilla.com/gradient-editor/#eab92d+0,c79810+100;Yellow+3D+#2)轻松创建跨浏览器渐变

在调用 bootstrap.css 后创建一个`<style>`标签。`<head>`

然后将colorzilla生成的css复制到标签`.navbar-inner {}`里面`<style>`。

```
.navbar-inner {
  background: #eab92d; /* Old browsers */
  /* IE9 SVG, needs conditional override of 'filter' to 'none' */
  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2VhYjkyZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNjNzk4MTAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
  background: -moz-linear-gradient(top,  #eab92d 0%, #c79810 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eab92d), color-stop(100%,#c79810)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top,  #eab92d 0%,#c79810 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top,  #eab92d 0%,#c79810 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top,  #eab92d 0%,#c79810 100%); /* IE10+ */
  background: linear-gradient(to bottom,  #eab92d 0%,#c79810 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eab92d', endColorstr='#c79810',GradientType=0 ); /* IE6-8 */
} 
```

colorzilla 生成的 css 覆盖了 boostrap.css 中的所有 css 属性，如下所示

![.navbar-inner large](../Images/d652ee77945d3ee223a2f8e8c2a8dcaa.png)

![.navbar-inner small](../Images/6a05d15029bc44cc735c9ed804b32b6c.png) ![在此处输入图像描述](../Images/aa2b454696cb19d5eba0620e3075c0ef.png)

更改 '.navbar-inner' 是不够的，需要更改其他位。

`.navbar .btn-navbar`（宽度<768px时打开菜单的按钮）与`.navbar-inner`

```
.navbar-inner, .navbar .btn-navbar {
    background: #eab92d; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2VhYjkyZCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNjNzk4MTAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  #eab92d 0%, #c79810 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eab92d), color-stop(100%,#c79810)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #eab92d 0%,#c79810 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #eab92d 0%,#c79810 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #eab92d 0%,#c79810 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #eab92d 0%,#c79810 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eab92d', endColorstr='#c79810',GradientType=0 ); /* IE6-8 */
    } 
```

`.divider-vertical`（垂直分隔符）使用渐变中使用的相同颜色

```
.navbar .divider-vertical {
    background-color: #c79810;
    border-right: 1px solid #eab92d;
    } 
```

`.active`（活动页面上的高亮）对应渐变的深色

```
.navbar .nav .active > a, .navbar .nav .active > a:hover {
    background-color: #c79810;
    } 
```

菜单上链接的颜色也需要更改，在这种情况下，75% 从渐变的公平颜色变为白色。

```
.navbar .nav > li > a {
    color: #f9ed9d;
    } 
```

最后是 的颜色`.brand`，在这种情况下 50% 从渐变的公平颜色变为白色。

```
.navbar-fixed-top .brand {
    color: #634c08;color: #f4dc87;
    } 
```

* * *

链接的 :hover 颜色未更改，但可以使用：

```
.navbar .nav > li > a:hover {color:white;} 
```

活动链接的颜色相同

```
.navbar .nav .active > a, .navbar .nav .active > a:hover {color:white;} 
```

![.navbar-inner 结果大](../Images/42d1a35232100f85ee85ad53f55dea29.png) ![.navbar-inner 结果小](../Images/c199e9ceacb854a8db573b2ff3367e62.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-18T03:44:32.363

一种简单的方法（与得到 baptme 的结果相同）：我在 rails 中使用它进行条件布局（使用 gem bootstrap-sass）。

在您的 scss 文件中，在导入引导程序之前，定义一些变量：

```
$navbarBackground:                #c79810 ;
$navbarBackgroundHighlight:       #eab92d ;
$navbarText:                      #f9ed9d ;
$navbarLinkColor:                 #f9ed9d ;
$navbarSearchPlaceholderColor:    #EEC844 ;

@import 'bootstrap' ; 
```

并得到它:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-27T18:50:49.063

您还可以在[http://stylebootstrap.info/](http://stylebootstrap.info/)上使用 Twitter Bootstrap 主题生成器 并轻松自定义您的主题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T09:50:32.773

如果您只想使用以前版本的 Bootsrap 的深色外观来查找导航栏，您可以在导航栏元素中添加 .navbar-inverse 类。

```
<div class="navbar navbar-inverse"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T00:46:58.943

看看使用萤火虫。您可以单击有问题的确切导航栏，并准确查看适用于它的 css 样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T22:36:44.947

为使用 twitter-bootstrap-rails gem 的人扩展 @Traz 的 LESS 超级简洁答案

```
@navbarBackground:                #c79810 ;
@navbarBackgroundHighlight:       #eab92d ;
@navbarText:                      #f9ed9d ;
@navbarLinkColor:                 #f9ed9d ;
@navbarSearchPlaceholderColor:    #EEC844 ; 
```

# mysql - 在 MySQL 中，如何找到所有行的 `attribute1` 与特定行的 `attribute1` 相同？

> ID：11196643
> 
> 赞同：0
> 
> 时间：2012-06-25T17:54:03.157
> 
> 标签：mysql

在 MySQL 中，如何找到`attribute1`与特定行相同的所有行`attribute1`？我想过做

```
SELECT 
    t1.id 
FROM 
    t AS t1
  , t AS t2 
WHERE 
    t2.id=123 
AND t1.a=t2.a; 
```

但它已经运行了很多年。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T18:16:51.850

这应该可以返回所需的行。

```
SELECT t1.id 
 FROM t AS t1
 JOIN t AS t2 ON (t1.a = t2.a and t1.id <> t2.id)
WHERE t2.id=123; 
```

你的表有多少行？“a”列是否被索引？添加索引应该可以加快连接速度。

[这是关于 SQLFiddle 的示例。](http://sqlfiddle.com/#!2/f6261/2)

# javascript - 将排序日期与它们起源的 div 相关联（排序之前）

> ID：11196646
> 
> 赞同：0
> 
> 时间：2012-06-25T20:13:15.727
> 
> 标签：javascript, jquery

我有一个 parent`div`的集合，它们根据它们的唯一订单号标记`id`，比如，`<div id='parent_uniqueID'>`。它们每个都有包含订单信息的子 div：订单号（同上）、名称和订单日期（mm / dd / yy）。

我正在尝试根据这些列中的每一列对这些父 div 进行排序。

它很容易按订单号排序并重新排列父 div。我对它们进行排序，然后使用 $('#parent_' + order_number);` 之类的东西选择父 div，然后将它们附加到页面上。字母数字也很简单；在字母数字字符串的末尾，我附加了顺序，然后再对其进行排序。这很方便，因为这样如果两个订单具有相同的名称，则父 div 默认按订单号排序。

我不知道如何，一旦完成按日期排序，区分哪个日期属于哪个父 div，以便我可以通过 抓取父 div`ids`并在页面上重新排列它们。

当我试图理解数字排序时，我收到了[这个非常好的解决方案](https://stackoverflow.com/a/11146962/1252748)，我正在尝试适应日期：

```
$('.sortable').click(function () {
    if ($(this).hasClass('sortable_date')) {

        var sort_order = sort_class_distribution($(this)),
            sort_column = this.id.replace("header_", "") + "_div",
            content2 = $('#currentOrdersContent2'),
            date_holder = "",
            i = 0;

        var sorted = $('.' + sort_column).map(function () {

            date_holder = $.trim($(this).text());
            //get order number from parent div
            //only_numbers function strips out everything but numbers
            cur_order = only_numbers($(this).parents('.order_details_bg_trigger').attr('id'));

            //check that the text is not "Not given" or "Unavailable"
            if (date_holder.indexOf("/")) {
                cur_date = date_holder.split(" / ");
                //change the text string into a proper javascript date
                return new Date(cur_date[2], cur_date[0] - 1, cur_date[1]);
            } else {
                //if it is 'Not given', assign it today's date
                return new Date();
            }
        }).toArray().sort(sort_order = "asc" ? date_sort_asc : date_sort_desc);

        //change javascript date back to mm / dd / yy format
        //weak attempt to match sorted dates with dates contained in table
        $.each(sorted, function (i, item) {

            cur_date = ('0' + (item.getMonth() + 1)).slice(-2) + ' / ' + ('0' + item.getDate()).slice(-2) + ' / ' + item.getFullYear();

        });

    }

}); 
```

这些是日期排序函数： *来源：[https ://gist.github.com/1772996](https://gist.github.com/1772996)*

```
function date_sort_asc(date1, date2) {
    if (date1 > date2) return 1;
    if (date1 < date2) return -1;
    return 0;
}

function date_sort_desc(date1, date2) {
    if (date1 > date2) return -1;
    if (date1 < date2) return 1;
    return 0;
} 
```

欢迎任何有关如何执行此操作或新模式的建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:19:44.223

如果您有可能使用 HTML5 功能，您可以做的一件事来简化整个过程，就是将每个父 div 的一些关键数据嵌入到 div 本身中。可以为每个父 div 做这样的事情：

```
<div id='parent_uniqueID' data-date='somedate' data-orderNo='someorderno'> 
```

之后，您可以使用例如 jquery 来收集数据，如下所示：

```
$("#parent_uniqueID").data("date") 
```

并轻松找到您需要比较和排序的内容，而无需在父 div 中查找数据的位置。希望这可以帮助您更接近解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:21:13.710

我可能会使用 jQuery 元数据插件 (http://docs.jquery.com/Plugins/Metadata)。然后给你的包装器（父） div 你可能排序的所有值（例如，日期、价格等）。使用父 div 中包含的所有元数据，您无需做任何计算来决定哪些子与哪个父一起使用，只需重新排序您的父 div。

# nhibernate - Nhibernate不能删除子对象

> ID：11196651
> 
> 赞同：0
> 
> 时间：2012-06-25T20:13:35.990
> 
> 标签：nhibernate

我知道它被问了很多次，我也在这个网站上找到了很多答案，但我就是**无法解决**这个问题。

任何人都可以帮我处理这段代码吗？

非常感谢。

这是我的父映射文件

```
<set name="ProductPictureList" table="[ProductPicture]" lazy="true" order-by="DateCreated" inverse="true" cascade="all-delete-orphan" >
  <key column="ProductID"/>
  <one-to-many class="ProductPicture"/>
</set> 
```

这是我的子映射文件

```
<class name="ProductPicture" table="[ProductPicture]" lazy="true">
<id name="ProductPictureID">
  <generator class="identity" />
</id>
<property name="ProductID" type="Int32"></property>
<property name="PictureName" type="String"></property>
<property name="DateCreated" type="DateTime"></property>
</class> 
```

这是我的 C# 代码

```
 var item = _productRepository.Get(productID);

        var productPictrue = item.ProductPictureList
            .OfType<ProductPicture>()
            .Where(x => x.ProductPictureID == productPictureID);

        // reomve the finding item
        var ok =  item.ProductPictureList.Remove(productPictrue);

        _productRepository.SaveOrUpdate(item); 
```

ok 是假值，这个子对象仍在我的数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:13:37.327

不是 100% 确定，但可能是因为您已将 ProductID 定义为 ProductPicture 的属性，我假设这是 Product 类的 PK。您不需要再次添加它，它将由关系创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T06:38:52.810

我不确定您`table="[ProductPicture]"`在 set 标签中的使用是否正确。

一对多标签已经建立了 ProductPictureList 和 ProductPicture 之间的链接。我认为 table 属性通常用于在建模多对可能关系时使用单独的关系表。

来自 nhibernate.info[文档](http://nhibernate.info/doc/nhibernate-reference/collections.html#collections-mapping)：

> 表（可选 - 默认为属性名称）集合表的名称（不用于一对多关联）

[并且](http://nhibernate.info/doc/nhibernate-reference/collections.html#collections-ofvalues)：

> 任何值集合和对映射为多对多关联的其他实体的任何引用集合都需要集合表

# ios - 构建呈现 Sql Server Reporting Services 报告的 iOS 应用程序

> ID：11196656
> 
> 赞同：0
> 
> 时间：2012-06-25T20:14:11.730
> 
> 标签：ios, reporting-services

我即将开始一个项目，我将尝试创建一个 iPad 应用程序，该应用程序可以呈现来自 SSRS 报表服务器的报表。我真的不知道从哪里开始这个项目。有没有人对这样做的好方法有任何建议？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:31:40.477

在重新发明轮子之前，我可能会下载这个应用程序，看看它是否满足您的需求 - [http://itunes.apple.com/us/app/mobi-ssrs/id457786540?ls=1&mt=8](http://itunes.apple.com/us/app/mobi-ssrs/id457786540?ls=1&mt=8)

# node.js - 让 Hubot 在特定时间说话？

> ID：11196659
> 
> 赞同：15
> 
> 时间：2012-06-25T20:14:23.103
> 
> 标签：node.js, coffeescript, hubot

我正在考虑制作一个基于 Hubot 时钟的通知器（想想“现在是 5 点，该回家了！”但不那么烦人并且出于不同的原因）。在 Hubot 脚本中执行此类操作的最佳方法是什么？

[**编辑**] 这是使用 node-cron 的示例：

```
TIMEZONE = "America/New_York"
QUITTING_TIME = '0 0 17 * * 2-6' # M-F 5pm
ROOM = "Dev"

cronJob = require('cron').CronJob

module.exports = (robot) ->
        gohome = new cronJob QUITTING_TIME,
                ->
                        robot.messageRoom ROOM, "It's 5!  Go home!"
                null
                true
                TIMEZONE 
```

依赖项：

```
"cron": "0.3.3",
"time": "0.8.2" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-25T20:16:31.930

我会使用node-cron。它非常灵活，非常适合您的用例。

> [https://github.com/ncb000gt/node-cron](https://github.com/ncb000gt/node-cron)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-02T06:24:12.340

我只是偶然发现了[hubot-cron](https://github.com/miyagawa/hubot-cron)。

这使您可以在 hubot 中安排消息，但遗憾的是不会通过重新启动来保留作业。

# javascript - 通过javascript更新多个窗口

> ID：11196664
> 
> 赞同：2
> 
> 时间：2012-06-25T20:14:46.573
> 
> 标签：javascript, jquery, browser

我的站点设置了超时，因此在 15 分钟不活动后，会出现一个登录屏幕，要求您刷新会话。

这很好用，但是如果您在网站上打开了多个窗口，则意味着将使用登录详细信息刷新一个页面，但不会刷新另一个页面。

所以问题是这样的，有没有办法在站点上打开的每个窗口上执行以下代码？

```
$jq('#loginbox').hide() 
```

谢谢你的帮助。我还应该声明其他窗口不会通过 JavaScript 打开，用户可能只是在链接上单击在新窗口/选项卡中打开

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:19:21.460

你不能访问你没有用 JS 打开的窗口。

每个窗口都应该检测到它超时并显示一个登录对话框。如果用户在窗口 A 登录，则窗口 B 应该轮询服务器以检测是否已创建会话，并在这种情况下自行恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:17:57.943

在切换到刷新屏幕（弹出？）之前，您可以简单地对服务器进行 ajax 调用以查看用户上次刷新的时间 - 如果用户仍然合法登录，只需将计时器重置为适当的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T20:24:19.180

如果另一个窗口不是通过 JavaScript 打开的，您将无法以编程方式访问它。换句话说，原始窗口将无法调用另一个窗口上的 JavaScript 函数。

但是，如果它们具有相同的域（如果它们在同一个网站上），它们可以共享 cookie。因此，一种可能性是让另一个窗口轮询会话 cookie 的更新，原始窗口可以写入该会话 cookie。一旦会话 cookie 获得特定值，另一个窗口就可以检测到这种变化并按照您认为合适的方式做出反应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:57:09.533

感谢所有发布想法的人，我选择了以下解决方案，如果有人可以增强它并发布代码，那么我会接受它作为答案：

```
$jq(function(){
    $jq(window).bind('blur', function(){checkloginrefreshed();});
    $jq(window).bind('focus', function(){checkloginrefreshed();});
    $jq(document).bind('focusout', function(){checkloginrefreshed();});
    $jq(document).bind('focusin', function(){checkloginrefreshed();});
});
function createCookie(name,value,hours) {
    if (hours) {
        var date = new Date();
        date.setTime(date.getTime()+(hours*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
}

function checkloginrefreshed(){
    if (parseInt(readCookie("loginset")) == 1){
        eraseCookie("loginset");        
        $jq('#timeoutwarning').dialog("close");
        $jq('#timeoutwarning').html(TIMEOUTLOGINFORM);

        clearTimeout(timer);
        clearTimeout(timerWarning);

        setupTimers();
    }
} 
```

# sql-server-2008 - 表继承分布的 SQL INSERT INTO 语句的语法是什么？

> ID：11196678
> 
> 赞同：0
> 
> 时间：2012-06-25T20:16:03.133
> 
> 标签：sql-server-2008, inheritance, entity-framework-4.1

我是初学者，刚刚开始尝试使用 Entity Framework 4.1 中的建模工具。

图片显示了我的数据库的图表，再往下是自动生成的脚本来创建我的数据库（SQL Server 2008）。

![在此处输入图像描述](../Images/1985865b82eb3c68be9c11ed3c7fd724.png)

```
-- --------------------------------------------------
-- Entity Designer DDL Script for SQL Server 2005, 2008, and Azure
-- --------------------------------------------------
-- Date Created: 06/25/2012 21:49:52
-- Generated from EDMX file: D:\Libraries\Documents\Visual Studio 2010\HomeControl\DAL\HomeControlModel.edmx
-- --------------------------------------------------

SET QUOTED_IDENTIFIER OFF;
GO
USE [HomeControl];
GO
IF SCHEMA_ID(N'dbo') IS NULL EXECUTE(N'CREATE SCHEMA [dbo]');
GO

-- --------------------------------------------------
-- Dropping existing FOREIGN KEY constraints
-- --------------------------------------------------

IF OBJECT_ID(N'[dbo].[FK_CameraImage]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[ImageSet] DROP CONSTRAINT [FK_CameraImage];
GO
IF OBJECT_ID(N'[dbo].[FK_EventTypeAction]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[ActionSet] DROP CONSTRAINT [FK_EventTypeAction];
GO
IF OBJECT_ID(N'[dbo].[FK_UnitAction]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[ActionSet] DROP CONSTRAINT [FK_UnitAction];
GO
IF OBJECT_ID(N'[dbo].[FK_UserAction]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[ActionSet] DROP CONSTRAINT [FK_UserAction];
GO
IF OBJECT_ID(N'[dbo].[FK_ScheduleUser]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[UserSet] DROP CONSTRAINT [FK_ScheduleUser];
GO
IF OBJECT_ID(N'[dbo].[FK_UnitCommand]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[CommandSet] DROP CONSTRAINT [FK_UnitCommand];
GO
IF OBJECT_ID(N'[dbo].[FK_Camera_inherits_Unit]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[UnitSet_Camera] DROP CONSTRAINT [FK_Camera_inherits_Unit];
GO
IF OBJECT_ID(N'[dbo].[FK_Tellstick_inherits_Unit]', 'F') IS NOT NULL
    ALTER TABLE [dbo].[UnitSet_Tellstick] DROP CONSTRAINT [FK_Tellstick_inherits_Unit];
GO

-- --------------------------------------------------
-- Dropping existing tables
-- --------------------------------------------------

IF OBJECT_ID(N'[dbo].[UserSet]', 'U') IS NOT NULL
    DROP TABLE [dbo].[UserSet];
GO
IF OBJECT_ID(N'[dbo].[ActionTypeSet]', 'U') IS NOT NULL
    DROP TABLE [dbo].[ActionTypeSet];
GO
IF OBJECT_ID(N'[dbo].[UnitSet]', 'U') IS NOT NULL
    DROP TABLE [dbo].[UnitSet];
GO
IF OBJECT_ID(N'[dbo].[ImageSet]', 'U') IS NOT NULL
    DROP TABLE [dbo].[ImageSet];
GO
IF OBJECT_ID(N'[dbo].[ScheduleSet]', 'U') IS NOT NULL
    DROP TABLE [dbo].[ScheduleSet];
GO
IF OBJECT_ID(N'[dbo].[ActionSet]', 'U') IS NOT NULL
    DROP TABLE [dbo].[ActionSet];
GO
IF OBJECT_ID(N'[dbo].[CommandSet]', 'U') IS NOT NULL
    DROP TABLE [dbo].[CommandSet];
GO
IF OBJECT_ID(N'[dbo].[UnitSet_Camera]', 'U') IS NOT NULL
    DROP TABLE [dbo].[UnitSet_Camera];
GO
IF OBJECT_ID(N'[dbo].[UnitSet_Tellstick]', 'U') IS NOT NULL
    DROP TABLE [dbo].[UnitSet_Tellstick];
GO

-- --------------------------------------------------
-- Creating all tables
-- --------------------------------------------------

-- Creating table 'UserSet'
CREATE TABLE [dbo].[UserSet] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [Name] nvarchar(max)  NOT NULL,
    [Schedule_Id] int  NOT NULL
);
GO

-- Creating table 'ActionTypeSet'
CREATE TABLE [dbo].[ActionTypeSet] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [Name] nvarchar(max)  NOT NULL
);
GO

-- Creating table 'UnitSet'
CREATE TABLE [dbo].[UnitSet] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [Name] nvarchar(max)  NOT NULL
);
GO

-- Creating table 'ImageSet'
CREATE TABLE [dbo].[ImageSet] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [Description] nvarchar(max)  NULL,
    [Data] varbinary(max)  NOT NULL,
    [Camera_Id] int  NOT NULL
);
GO

-- Creating table 'ScheduleSet'
CREATE TABLE [dbo].[ScheduleSet] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [OneOff] datetime  NULL,
    [Cronexpression] nvarchar(max)  NULL
);
GO

-- Creating table 'ActionSet'
CREATE TABLE [dbo].[ActionSet] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [Time] datetime  NOT NULL,
    [Description] nvarchar(max)  NOT NULL,
    [EventType_Id] int  NOT NULL,
    [Unit_Id] int  NOT NULL,
    [User_Id] int  NOT NULL
);
GO

-- Creating table 'CommandSet'
CREATE TABLE [dbo].[CommandSet] (
    [Id] int IDENTITY(1,1) NOT NULL,
    [Description] nvarchar(max)  NOT NULL,
    [Unit_Id] int  NOT NULL
);
GO

-- Creating table 'UnitSet_Camera'
CREATE TABLE [dbo].[UnitSet_Camera] (
    [Login] nvarchar(max)  NOT NULL,
    [Password] nvarchar(max)  NOT NULL,
    [URL] nvarchar(max)  NOT NULL,
    [Id] int  NOT NULL
);
GO

-- Creating table 'UnitSet_Tellstick'
CREATE TABLE [dbo].[UnitSet_Tellstick] (
    [Id] int  NOT NULL
);
GO

-- --------------------------------------------------
-- Creating all PRIMARY KEY constraints
-- --------------------------------------------------

-- Creating primary key on [Id] in table 'UserSet'
ALTER TABLE [dbo].[UserSet]
ADD CONSTRAINT [PK_UserSet]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- Creating primary key on [Id] in table 'ActionTypeSet'
ALTER TABLE [dbo].[ActionTypeSet]
ADD CONSTRAINT [PK_ActionTypeSet]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- Creating primary key on [Id] in table 'UnitSet'
ALTER TABLE [dbo].[UnitSet]
ADD CONSTRAINT [PK_UnitSet]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- Creating primary key on [Id] in table 'ImageSet'
ALTER TABLE [dbo].[ImageSet]
ADD CONSTRAINT [PK_ImageSet]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- Creating primary key on [Id] in table 'ScheduleSet'
ALTER TABLE [dbo].[ScheduleSet]
ADD CONSTRAINT [PK_ScheduleSet]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- Creating primary key on [Id] in table 'ActionSet'
ALTER TABLE [dbo].[ActionSet]
ADD CONSTRAINT [PK_ActionSet]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- Creating primary key on [Id] in table 'CommandSet'
ALTER TABLE [dbo].[CommandSet]
ADD CONSTRAINT [PK_CommandSet]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- Creating primary key on [Id] in table 'UnitSet_Camera'
ALTER TABLE [dbo].[UnitSet_Camera]
ADD CONSTRAINT [PK_UnitSet_Camera]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- Creating primary key on [Id] in table 'UnitSet_Tellstick'
ALTER TABLE [dbo].[UnitSet_Tellstick]
ADD CONSTRAINT [PK_UnitSet_Tellstick]
    PRIMARY KEY CLUSTERED ([Id] ASC);
GO

-- --------------------------------------------------
-- Creating all FOREIGN KEY constraints
-- --------------------------------------------------

-- Creating foreign key on [Camera_Id] in table 'ImageSet'
ALTER TABLE [dbo].[ImageSet]
ADD CONSTRAINT [FK_CameraImage]
    FOREIGN KEY ([Camera_Id])
    REFERENCES [dbo].[UnitSet_Camera]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;

-- Creating non-clustered index for FOREIGN KEY 'FK_CameraImage'
CREATE INDEX [IX_FK_CameraImage]
ON [dbo].[ImageSet]
    ([Camera_Id]);
GO

-- Creating foreign key on [EventType_Id] in table 'ActionSet'
ALTER TABLE [dbo].[ActionSet]
ADD CONSTRAINT [FK_EventTypeAction]
    FOREIGN KEY ([EventType_Id])
    REFERENCES [dbo].[ActionTypeSet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;

-- Creating non-clustered index for FOREIGN KEY 'FK_EventTypeAction'
CREATE INDEX [IX_FK_EventTypeAction]
ON [dbo].[ActionSet]
    ([EventType_Id]);
GO

-- Creating foreign key on [Unit_Id] in table 'ActionSet'
ALTER TABLE [dbo].[ActionSet]
ADD CONSTRAINT [FK_UnitAction]
    FOREIGN KEY ([Unit_Id])
    REFERENCES [dbo].[UnitSet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;

-- Creating non-clustered index for FOREIGN KEY 'FK_UnitAction'
CREATE INDEX [IX_FK_UnitAction]
ON [dbo].[ActionSet]
    ([Unit_Id]);
GO

-- Creating foreign key on [User_Id] in table 'ActionSet'
ALTER TABLE [dbo].[ActionSet]
ADD CONSTRAINT [FK_UserAction]
    FOREIGN KEY ([User_Id])
    REFERENCES [dbo].[UserSet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;

-- Creating non-clustered index for FOREIGN KEY 'FK_UserAction'
CREATE INDEX [IX_FK_UserAction]
ON [dbo].[ActionSet]
    ([User_Id]);
GO

-- Creating foreign key on [Schedule_Id] in table 'UserSet'
ALTER TABLE [dbo].[UserSet]
ADD CONSTRAINT [FK_ScheduleUser]
    FOREIGN KEY ([Schedule_Id])
    REFERENCES [dbo].[ScheduleSet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;

-- Creating non-clustered index for FOREIGN KEY 'FK_ScheduleUser'
CREATE INDEX [IX_FK_ScheduleUser]
ON [dbo].[UserSet]
    ([Schedule_Id]);
GO

-- Creating foreign key on [Unit_Id] in table 'CommandSet'
ALTER TABLE [dbo].[CommandSet]
ADD CONSTRAINT [FK_UnitCommand]
    FOREIGN KEY ([Unit_Id])
    REFERENCES [dbo].[UnitSet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;

-- Creating non-clustered index for FOREIGN KEY 'FK_UnitCommand'
CREATE INDEX [IX_FK_UnitCommand]
ON [dbo].[CommandSet]
    ([Unit_Id]);
GO

-- Creating foreign key on [Id] in table 'UnitSet_Camera'
ALTER TABLE [dbo].[UnitSet_Camera]
ADD CONSTRAINT [FK_Camera_inherits_Unit]
    FOREIGN KEY ([Id])
    REFERENCES [dbo].[UnitSet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
GO

-- Creating foreign key on [Id] in table 'UnitSet_Tellstick'
ALTER TABLE [dbo].[UnitSet_Tellstick]
ADD CONSTRAINT [FK_Tellstick_inherits_Unit]
    FOREIGN KEY ([Id])
    REFERENCES [dbo].[UnitSet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
GO

-- --------------------------------------------------
-- Script has ended
-- -------------------------------------------------- 
```

我的问题不是实体框架本身，而是简单的 SQL 语法。

在我的模型中，**Camera**实体继承自**Unit**。我想对相机表做一个`INSERT`，**像**这样：

```
INSERT INTO UnitSet_Camera
       (Login,
        Password,
        URL)
 VALUES
       ('myLoginName'
       ,'myPassword'
       ,'http://foo.bar:007'); 
```

我也知道这是不完整的，因为我必须以某种方式为我的**相机**实体提供一个“名称”（因为继承自表**Unit**及其属性“名称”）

完整的 SQL`INSERT`语句应该如何查找任意**Camera**实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:27:03.507

有两个表，因为它是继承的 - UnitSet 有一个在派生类中引用的 IDENTITY。基本上你需要这样做：

```
INSERT INTO dbo.UnitSet (Name) VALUES ('The Name');
INSERT INTO UnitSet_Camera
       (Login,
        Password,
        URL,
        Id)
 VALUES
       ('myLoginName'
       ,'myPassword'
       ,'http://foo.bar:007'
       ,SCOPE_IDENTITY()); 
```

但是还有其他的事情，比如[OUTPUT](http://msdn.microsoft.com/en-us/library/ms177564.aspx)可以在单个语句中完成，或者您可以制作一个显示相机所有属性的视图并[使用触发器使其可更新](http://msdn.microsoft.com/en-us/library/ms187956.aspx)。

但是我想知道，当您显然决定通过 ORM 执行此类操作时，为什么要通过 SQL 执行此操作。

# sql-server-2008 - Dynamics AX 2012 财务维度

> ID：11196685
> 
> 赞同：1
> 
> 时间：2012-06-25T20:16:39.833
> 
> 标签：sql-server-2008, ssrs-2008, axapta, dynamics-ax-2012

如何获得与我的 ax09 查询类似的结果，

```
SELECT DIMENSION, DIMENSION2_ FROM CUSTTABLE 
```

在动态 AX 2012 中？

我理解新的动态维度结构的巨大复杂性。有了这种新结构，甚至有办法重现上面的 select 语句吗？

以下是我必须使用的工具：

```
1\. SQL Server Management Studio 2008
2\. DAX AOT
3\. BIDS (MS SQL Server 2008 R2 (SSRS)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:34:46.540

这里有一篇很棒的文章关于创建一个帮助类来解决这个确切的问题；

[http://learnax.blogspot.co.uk/2011/08/dynamics-ax-2012-financial-dimensions.html](http://learnax.blogspot.co.uk/2011/08/dynamics-ax-2012-financial-dimensions.html)

这是 Nagaraj Jadhav 在他的博客上发布的用于实现此目的的新代码；

```
static void DEV_Dimension(Args _args)
{
    CustTable                         custTable = CustTable::find("1101");
    DimensionAttributeValueSetStorage dimStorage;
    Counter i;

    dimStorage = DimensionAttributeValueSetStorage::find(custTable.DefaultDimension);

    for (i=1 ; i<= dimStorage.elements() ; i++)
    {
        info(strFmt("%1 = %2", DimensionAttribute::find(dimStorage.getAttributeByIndex(i)).Name,        
                               dimStorage.getDisplayValueByIndex(i))); 
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:07:50.360

查看白皮书[实施账户和财务维度框架](http://technet.microsoft.com/EN-US/library/hh272858 "实施账户和财务维度框架")，了解如何实施默认维度。有一个视图 DefaultDimensionView 可用于检索维度信息：

```
SELECT DEFAULTDIMENSIONVIEW.NAME, DEFAULTDIMENSIONVIEW.DISPLAYVALUE, CUSTTABLE.ACCOUNTNUM
FROM DEFAULTDIMENSIONVIEW 
INNER JOIN CUSTTABLE 
ON DEFAULTDIMENSIONVIEW.DEFAULTDIMENSION = CUSTTABLE.DEFAULTDIMENSION 
```

# objective-c - 这种情况下合适的 UITableView 委托策略是什么？

> ID：11196690
> 
> 赞同：0
> 
> 时间：2012-06-25T20:17:04.207
> 
> 标签：objective-c, cocoa-touch, ios5

我有一个 UITableView，我想要 UITableViewController 中内置的所有功能，除了我想让委托是一个单独的类。问题是我需要从我的数据源中提取一条识别信息，以便我的委托类能够运行。我应该让 UITableView 委托给 UITableViewController，然后它会提取适当的识别信息，然后从 didSelectRowAtIndexPath 中调用第三个类吗？我只想以适当的方式构造它。

我对 iOS 和 Objective-C 相当陌生，所以我觉得有一个每个人都会使用的解决方案，但这对我来说并不明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:27:54.380

我会让委托和数据源都指向您的自定义类。在一个地方管理表格视图事件会更容易，而且你真的不需要 UITableViewController。如果将它们分开，则委托和数据源之间很可能存在严重耦合，因为听起来您需要在它们之间传输大量信息，这违背了将它们分成单独类的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:35:44.043

当我在同一个 UIViewController 中有两个表视图并且可以满足您的需要时，我通常使用的一种策略是为每个表视图创建一个对象类，例如：MyFirstTableViewManager 和 MySecondTableViewManager。

每个表视图管理器都设置为每个表视图的委托和数据源。

如果我需要在每个 tableview 上显示大量信息，我会在我从 UIViewController 设置的每个 Table View Manager 类上创建属性。

通过这种方式，我拆分了管理每个表视图的逻辑以使其更容易并保持干净，并且从我的 UIViewController 我可以通过设置每个表视图管理器属性来设置要在每个表视图上显示的信息，并使它们在需要时重新加载其数据.

希望这对您有所帮助。

# c# - Math.Pow 采用整数值

> ID：11196700
> 
> 赞同：10
> 
> 时间：2012-06-25T20:17:53.600
> 
> 标签：c#, floating-accuracy, pow

来自[http://msdn.microsoft.com/en-us/library/system.math.pow.aspx](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)

```
int value = 2;
for (int power = 0; power <= 32; power++)
    Console.WriteLine("{0}^{1} = {2:N0}",
                      value, power, (long) Math.Pow(value, power)); 
```

Math.Pow 将双精度数作为参数，但这里我们传递的是整数。

问题：如果隐式转换为 double 发生，是否存在浮点舍入错误的危险？

如果是，最好使用类似的东西：

```
public static int IntPow(int x, uint pow)
{
    int ret = 1;
    while (pow != 0)
    {
        if ((pow & 1) == 1)
            ret *= x;
        x *= x;
        pow >>= 1;
    }
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-02T06:09:24.487

在您的特殊情况下，当您计算 2 的 x 次方时，您可以使用简单的左移。这会将您的代码简化为：

```
public static int TwoPowX(int power)
{
    return (1<<power);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T21:02:29.603

不，转换为`double`. `double`可以精确地表示落在幂函数域内的所有整数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-25T20:20:24.237

是的，有一个隐式转换为双重发生，是的，结果可能会出现浮点舍入错误。

至于是否值得使用您建议的替代方法，这取决于应用程序。浮点舍入误差是完全不可接受的吗？你会使用适合 int32 的数字吗（权力溢出并不需要很多）？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-25T21:00:59.257

```
public static int IntPow(int number, uint power)
        {
            int result = 1;
            for (int i = 0; i < power; i++)
            {
                result *= number;
            }
            return result;
        } 
```

为了可读性！

# c# - VaryByCustom 和模型绑定

> ID：11196701
> 
> 赞同：1
> 
> 时间：2012-06-25T20:17:55.573
> 
> 标签：c#, asp.net-mvc, model-binding, outputcache

我有一个我模型绑定的类，我想对它使用输出缓存。我找不到访问绑定对象的方法`GetVaryByCustomString`

例如：

```
public class MyClass
{
    public string Id { get; set; }
    ... More properties here
}

public class MyClassModelBinder : DefaultModelBinder
{
   public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
   {
      var model = new MyClass();
      ... build the class       
      return model;
    }
} 
```

我在 Global.cs 中设置了活页夹

```
ModelBinders.Binders.Add(typeof(MyClass), new MyClassModelBinder()); 
```

然后像这样使用输出缓存。

```
[OutputCache(Duration = 300, VaryByCustom = "myClass")]
public ActionResult MyAction(MyClass myClass)
{
   .......

public override string GetVaryByCustomString(HttpContext context, string custom)
{
   ... check we're working with 'MyClass'

   var routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(context));
   var myClass = (MyClass)routeData.Values["myClass"]; <-- This is always null 
```

尽管模型绑定器已触发，但 myClass 不在路由表事件中。

一如既往地欢迎任何帮助。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T20:26:08.853

模型绑定器不会将模型添加到 中`RouteData`，因此您不能期望从那里获取它。

一种可能性是将模型存储在`HttpContext`自定义模型绑定器内部：

```
public class MyClassModelBinder : DefaultModelBinder
{
   public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
   {
      var model = new MyClass();
      // ... build the class

      // Store the model inside the HttpContext so that it is accessible later
      controllerContext.HttpContext.Items["model"] = model;
      return model;
    }
} 
```

然后`GetVaryByCustomString`使用相同的键（`model`在我的示例中）在方法中检索它：

```
public override string GetVaryByCustomString(HttpContext context, string custom)
{
    var myClass = (MyClass)context.Items["model"];

    ...
} 
```

# string - 我没有正确逃避什么？

> ID：11196703
> 
> 赞同：1
> 
> 时间：2012-06-25T20:17:56.770
> 
> 标签：string, vb6, escaping, syntax-error

我正在尝试从数据库中创建一个 html 文件，但在转义这一行时遇到问题`"<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />"`

完整代码：

```
Dim filer As Integer, paths As String
filer = FreeFile

paths = App.Path + "\DB"
Open paths + "\test.html" For Output As #filer
    '...
    Print #filer, "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />"
    '...
Close #filer 
```

我不知道为什么它会显示为红色并且不要让我创建`.exe`它甚至运行它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:25:26.067

您的问题是您试图像在 perl 或 c++ 中一样转义双引号。

尝试使用疯狂的 MS 双双引号。
像这样：

```
Print #filer, "<meta http-equiv=""Content-Type"" content=""text/html; charset=UTF-8"" />" 
```

或者

```
str1 = "<meta http-equiv=" & chr(34) & "Content-Type" & chr(34) ' etc
Print #filer, str1 
```

**编辑**：更正报价。

*   两个引号 = 字符串中的 1 个引号字符。当您的引号字符紧邻定义字符串的引号时，这可能会令人困惑。
    *   `"hello "" BOB"`=`Hello " Bob`
    *   `"""Hello "" BOB"""`=`"Hello " BOB"`

# ios - MonoTouch.Dialog 中的德语字符问题

> ID：11196708
> 
> 赞同：1
> 
> 时间：2012-06-25T20:18:07.330
> 
> 标签：ios, xamarin.ios, monotouch.dialog

有没有人解决以下问题：当我想在包含德语变音符号的 StringElement 中显示字符串时，例如：ä、ü 或 ö 或 ß 它在黑色填充的矩形中显示为白色问号。任何如何解决这个问题的建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:33:50.567

找到了解决方案。但是，将其视为黑客！`localizable.strings`如果我从项目文件夹中的文件中提取字符串，则`de.lproj`显示变音符号没有问题，因此我将字符串中的变音符号转换为 ae 或 oe，然后`localizable.strings`通过扩展方法从文件中获取正确的字符。如上所述，我认为这个解决方案是一种 hack，如果有更好的解决方案，我会很高兴了解它们......

# php - Apache 错误日志：仅记录部分服务器

> ID：11196711
> 
> 赞同：0
> 
> 时间：2012-06-25T20:18:13.997
> 
> 标签：php, apache, error-handling, debian, vps

我在 VPS 服务器上运行 Debian，并且在同一台服务器上同时拥有开发和生产代码以及数据库。

是否可以让服务器只记录服务器开发部分的错误，而不是生产。现在，生产端记录了很多错误，这使得很难找到开发错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T21:07:33.563

虽然这确实属于 serverfault.com：

**您绝对应该始终记录所有错误。**

如果您在服务器上托管例如 2 个域，example.com 和 test.example.com，您可以为每个要存储日志的虚拟主机指定。

在 apache 上，您的虚拟主机可能如下所示：

```
<VirtualHost xxx.xxx.xxx.xxx:80>
    // some configuration stuff
    ServerName     example.com
    // some more configuration stuff
    CustomLog      /var/log/httpd/example.com-access_log combined
    ErrorLog       /var/log/httpd/example.com-error_log
</VirtualHost>

<VirtualHost xxx.xxx.xxx.xxx:80>
    // some configuration stuff
    ServerName     test.example.com
    // some more configuration stuff
    CustomLog      /var/log/httpd/test.example.com-access_log combined
    ErrorLog       /var/log/httpd/test.example.com-error_log
</VirtualHost> 
```

`test.example.com`因此，您可以轻松区分来自 的 日志信息`example.com`。

# entity-framework - 为什么 EDMX 不将不为空的更新为可空，反之亦然？

> ID：11196712
> 
> 赞同：0
> 
> 时间：2012-06-25T20:18:22.447
> 
> 标签：entity-framework, entity-framework-4

总是会发生——使用 EF 4.3.1（实际上它无论如何都会回到 4.0）——比如说，当我将 SQL Server 中的列更改为不为空，然后在 edmx 中执行更新模型时，它永远不会更新或删除可以为空的属性，所以必须手动完成。想知道为什么会这样：它是一个错误还是只是一个由于 XML 解析问题或其他原因而没有人费心修复的功能？求知者想知道。

我可以在这里的其他地方看到有一个快速的方法：只需删除表，然后通过更新模型重新添加它——但是——对于 55 个表？;-)

# c++ - CMake：如何只包含 OpenCV 的一部分？

> ID：11196720
> 
> 赞同：5
> 
> 时间：2012-06-25T20:19:07.117
> 
> 标签：c++, opencv, cmake

当我将 CMake 与 一起使用时`FIND_PACKAGE( OpenCV REQUIRED )`，OpenCV 的所有组件都将被包含在内，所有库都已链接，并且所有路径都显示在 VS 的包含目录中。但是，从 OpenCV 2 开始，lib 的每个部分都可以单独包含和链接。因此，如果我的项目只使用 OpenCV 的“核心”和“imgproc”部分，我不想通过链接到所有 OpenCV 来膨胀我的项目（和项目文件）。是否可以只在 CMake 中包含其中的一部分？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T20:29:11.667

从 OpenCV 2.4.0 开始，它很简单：

```
 FIND_PACKAGE( OpenCV REQUIRED core imgproc) 
```

# java - 使用数据值作为键的类似地图的序列化

> ID：11196721
> 
> 赞同：1
> 
> 时间：2012-06-25T20:19:20.607
> 
> 标签：java, json, serialization, jackson

我需要序列化这个：

```
List<Event> 
```

事件类是：

```
public class Event {
  public int id;
  public String foo;
  public String bar;
} 
```

转换成这种形式的 JSON：

```
{
  "123":{"foo":"...","bar":"..."},
  "345":{"foo":"...","bar":"..."}
} 
```

从 Event 中取出“id”属性并存储一个 Map 就可以了，但我需要支持重复的 ID。

是否可以在“id”属性上添加注释以使杰克逊将其视为键，并将对象的其余部分视为关联值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:28:20.760

以您当前的 ID 结构为键，我不确定 JSON 规范中是否可能存在重复的 ID。也许如果你有带有 ID 的数组。我认为您需要重新评估所需的 JSON 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:15:14.377

您可以使用`IdentityHashMap`，因此您可以使用包含相同值的不同字符串实例并获得以下结果：

```
{"1":{"foo":"foo1","bar":"bar"},"2":{"foo":"foo2.1","bar":"bar"},"3":{"foo":"foo2","bar":"baz"},"2":{"foo":"foo2","bar":"baz"}} 
```

你可以执行这个：

```
import java.io.IOException;
import java.util.Arrays;
import java.util.IdentityHashMap;
import java.util.List;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.annotate.JsonIgnoreProperties;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;

public class JacksonTest {

    public static void main(final String[] args) throws JsonGenerationException, JsonMappingException, IOException {
        ObjectMapper om = new ObjectMapper();

        IdentityHashMap<String, Event> ihm = new IdentityHashMap<String, Event>();

        List<Event> list = Arrays.asList( //
                new Event(1, "foo1", "bar"), //
                new Event(2, "foo2", "baz"), //
                new Event(2, "foo2.1", "bar"), //
                new Event(3, "foo2", "baz") //
                );

        for (Event e : list) {
            ihm.put(String.valueOf(e.id), e);
        }

        System.out.println(om.writeValueAsString(ihm));
    }

    @JsonIgnoreProperties({ "id" })
    public static class Event {
        public int id;
        public String foo;
        public String bar;

        public Event(final int id, final String foo, final String bar) {
            super();
            this.id = id;
            this.foo = foo;
            this.bar = bar;
        }

    }

} 
```

# ms-access - 访问 2010 DLookUp

> ID：11196724
> 
> 赞同：2
> 
> 时间：2012-06-25T20:19:25.347
> 
> 标签：ms-access, filtering

第一次使用 MS Access 并遇到一些问题，如果有人能指出我正确的方向。

所以我正在做一个模拟数据库（所以它看起来很傻）只是为了了解细节，目前需要一些关于 DLookUp 的帮助。

我的数据库有两个表，包含以下字段： `C_ID`课程中的 PK 和学生中的 FK

```
tblCourse: C_ID, Title, Subject                              
tblStudent: S_ID, C_ID, Name, EnrollDATE 
```

正如我所说，这只是为了测试/学习。所以我想要的是有一个过滤器，它给我一个`C_ID`基于哪些`EnrollDates`是的列表`NULL`。

所以过滤器是：

```
Expr1: DLookUp("[tblStudent]![C_ID]","tblStudent","isNull([tblStudent]![EnrollDATE])") 
```

我也尝试过的标准是

```
 [tblStudent]![EnrollDATE] = Null 
```

目前我只返回空白字段。非常感谢任何帮助，如果我的解释不正确，请让我详细说明。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:24:06.520

正确的语法如下所示：

```
DLookup("C_ID", "tblStudent", "EnrollDate is null") 
```

1.  指定列时不需要包含表名
2.  在 Access 中，您可以`Null`使用`xxx is null`或检查`xxx is not null`

请注意，`DLookup`只返回**一个**值（如果条件匹配多行，则该值取自任何行），因此您不能使用它来获取`C_ID`s 的列表。

* * *

**编辑：**
您真正想要做的是从一个表中选择数据，然后根据另一个表中的数据进行过滤，对吗？
比如，选择至少一个学生有空的所有课程`EnrollDATE`？

如果是，您根本不需要`DLookup`，有两种不同的方法可以做到这一点：

1）使用子选择：

```
select *
from tblCourse
where C_ID in
(
    select C_ID
    from tblStudents
    where EnrollDATE is null
) 
```

2）通过加入表格：

```
select tblCourse.*
from tblCourse
inner join tblStudent on tblCourse.C_ID = tblStudent.C_ID
where tblStudent.EnrollDATE is null 
```

这是 SQL，所以你需要在 Access 中的查询中[切换到 SQL 视图](http://www.jaffainc.com/SQLStatementsInAccess.htm#Access2007)。

# php - 使用 php 变量值填充表单输入字段

> ID：11196725
> 
> 赞同：0
> 
> 时间：2012-06-25T20:19:31.690
> 
> 标签：php, javascript, jquery

我有一个 html 表单，我需要使用表单所在页面的 url 填充其中一个输入字段。要获取我的网址：

```
<?php $pageURL="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];?> 
```

要填充输入字段，我有：

```
<script type="text/javascript">
// <![CDATA[   
$(document).ready(function(){
    var getLabel = $(".monkForm label:contains('Page URL')");
    var getFor = getLabel.attr('for');
    var splitFor = getFor.split('_');
    var inputID = $("#" + getFor );
    var wrapID = $("#w" + splitFor[1] );
    wrapID.hide();
    inputID.val('<?=$pageURL;?>');
});
// ]]> 
</script> 
```

表单上的输入字段标签是“页面 URL”。问题是页面 URL 没有被添加到输入字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:22:33.540

你而不是使用：

```
inputID.val(window.location.href); 
```

不要使用 php 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:24:45.100

您不能使用 PHP，因为它是服务器端。改为使用 Javascript 获取 URL：

```
inputID.val(window.location.href); 
```

# sql-server-2008 - 保存/更新数据库中的日期列表

> ID：11196727
> 
> 赞同：0
> 
> 时间：2012-06-25T20:19:38.173
> 
> 标签：sql-server-2008, tsql, stored-procedures

我正在使用 SQL Server 2008。我正在寻找一种创造性的方法来保存和更新我们数据库中的日期列表。

我将从应用程序中收集日期列表，我将需要检查每个值是否已经存在，如果不添加，然后删除列表中已存储在数据库中的任何日期。

我能想到的最简单的事情是删除与此特定请求关联的所有日期，然后遍历列表中的每个项目并插入数据库。

有没有人有更优雅的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:37:51.297

您可以使用合并。您还可以将日期加载到临时表中并进行插入，例如：

```
with toinsert as (
    select thedate
    from #newdates nd left outer join
         alldates ad
         on nd.thedate = ad.thedate 
    where ad.thedate is null
)
insert into alldates(thedate)
    select thedate
    from toinsert 
```

toinsert 别名使用左外连接来执行“不在”。我经常发现这样效果更好。无论您如何设置查询（像这样或通过合并），您都应该在日期上放入索引。它应该让事情进展得更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:07:35.093

I would use a combination of table valued parameters and the `NOT EXISTS` function. So pass your dates from your application to a stored procedure as a paramater, the stored procedure will then return a list of all the dates inserted back to your application.#

The first step is to create the type so you can pass a list of dates to your procedure:

```
CREATE TYPE dbo.DateListType AS TABLE (Date DATETIME) 
```

Next create your procedure. I have assumed you date table is called `dbo.Dates`, you'll obviously need to substitute your table in for this.

```
CREATE PROCEDURE dbo.InsertDates (@Dates dbo.DateListType READONLY)
AS
BEGIN
    DECLARE @Inserted TABLE (Date DATETIME)

    INSERT INTO dbo.Dates
    OUTPUT inserted.Date INTO @Inserted
    SELECT  Date
    FROM    @Dates d
    WHERE   NOT EXISTS
            (   SELECT  1
                FROM    dbo.Dates
                WHERE   Dates.Date = d.Date
            )

    SELECT  Date
    FROM    @Inserted
END 
```

Not sure what your application is coded in so unfortunately can't suggest any code to call the procedure

# ios - 创建具有不同单元格类型的分组 UITableview

> ID：11196734
> 
> 赞同：3
> 
> 时间：2012-06-25T20:21:07.530
> 
> 标签：ios, uitableview, foursquare

我需要创建一个分组的 uitableview，其中包括一些部分，并且每个部分中可能包含不同的单元格类型。

我正在尝试创建类似旧的foursquare 应用程序、用户页面（包括“排行榜”、“朋友建议”、“朋友”、“统计”、“最常探索的类别”......部分）。

我对 ios 编程相当陌生，因此该视图可能不是分组的 uitableview。

我特别坚持的是为部分创建不同的单元格，并找出单击了哪些单元格。

我的数据源将是 2 个不同的 NSArray*，它们由不同的数据类型组成，这就是为什么我需要不同的自定义单元格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T21:42:57.290

由于您有两组不同的数据，并且需要在不同的部分中显示它们，因此您必须将数据源方法分成两个。

基本上，选择你想首先成为的数据集，然后就可以了。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if(section)return secondArray.count;
    //Essentially, if statements evaluate TRUE and move forward if the inside is 1 or greater (TRUE == 1)
    return firstArray.count;
    //If the first if statement return hits, then the code will never reach this statement which turns this into a lighter if else statement
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(indexPath.section)
    {
        //do stuff with second array and choose cell type x
    }
    else
    {
        //do stuff with first array and choose cell type y
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Get the cell with: UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if(indexPath.section)
    {
        //perform action for second dataset
    }
    else
    {
        //perform action for first dataset
    }
} 
```

对于标题，您可以使用这些方法中的任何一种，并保持与上述相同的样式类型：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section;
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T20:29:12.923

您可以创建 UITableViewCell 的多个自定义子类，并且在您的 UITableViewDataSource 的[tableView:cellForRowAtIndexPath:](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/tableView%3acellForRowAtIndexPath%3a)方法中，您可以使用 if 语句来确定要使用的单元格类型。

例如，这是我可能会做的事情的大致轮廓：

```
-(UITableViewCell *)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    //First, determine what type of object we're showing
    if (indexPath.section == 0) {
         //Create and return this cell.
    } else if (indexPath.section == 1) {
         //Create and return this cell.
    }...
} 
```

以下是您的实施方式`numberOfRowsInSection`：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

   if (section == 0) {
      return [firstSectionArray count];
   } else if (section == 1) {
      return [secondSectionArray count];
   } ...
} 
```

为了`didSelectRowAtIndexPath`

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
   if (indexPath.section == 0) {
      ObjectSelected *objectSelected = [firstArray objectAtIndex:indexPath.row];

      //Now you've got the object, so push a view controller:
      DetailViewController *dvc = [[DetailViewController alloc] init];
      dvc.objectSelected = objectSelected;
      [self.navigationController pushViewController:dvc];
   } else if (indexPath.section == 1) {
      //Same thing, just call [secondArray objectAtIndex:indexPath.row] instead!
   }
} 
```

# ms-access - 通过单击按钮向 ComboBox 添加值

> ID：11196738
> 
> 赞同：1
> 
> 时间：2012-06-25T20:21:23.850
> 
> 标签：ms-access, combobox, vba

我有一个表单和一个按钮的组合框。我想在单击时向组合框添加值。例如：在组合框中，存在 1、2、3、4 个值。我想在单击按钮时添加 5。

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:30:29.900

双击您的按钮为 click() 事件创建一个事件处理程序，然后将此代码放入事件处理程序中。将 Combo1 替换为您的组合名称。

```
Private Sub Command1_Click()

  Combo1.AddItem ("5")

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:49:22.190

我喜欢使用查询或表作为行源。
在这种情况下，我只需创建一个包含一列的表并将其设置为组合框的行源。

现在，我可以根据需要在运行时编辑表中的数据（删除一些值、插入新值、使用单个查询从其他表中复制值...），完成后，我只需调用`Combo1.Requery`.

使用此解决方案，添加的值在关闭并重新打开表单后不会消失（即使在关闭并重新打开 Access 之后也不会消失！），因为这些值存储在 Access 数据库的表中。

# jquery - 以编程方式选择 适用于 Opera，但不适用于 Chrome

> ID：11196740
> 
> 赞同：1
> 
> 时间：2012-06-25T20:21:32.507
> 
> 标签：jquery, google-chrome

我有一个用户脚本，它必须根据选择中的 1 个选项更改整个选项列表。在 Opera 中这个脚本运行良好，但在 Chrome 中不行（是的，jQuery 可用）。

HTML：

```
<select id="autoConfig-gametype" style="width: 100%;">
    <option value="1" selected="">1\. [RECOMMENDED] All latest Game-settings, Paladin, archers, simple tech smithy</option>
    <option value="2">2\. No paladin, archers, simple tech system [TWMASTERS Settings]</option>
    <option value="3">3\. No paladin, no archers. Packages, 3 lvl tech-system. [CLASSIC]</option>
</select>

<select name="game::tech">
    <option value="0">0: 10 level</option>
    <option value="1">1: 3 level (up to 15)</option>
    <option value="2" selected="selected">2: Simple</option>
</select> 
```

使用 jQuery，我使用了`attr`and `prop`，但在 Chrome 中都没有结果。需要操作的选择不会改变。

jQuery：

```
$("#autoConfig-gametype").change(function()
{
    var value = $(this).val();

    switch(value)
    {
        case "1":
            // Game > Tech
            $("[name='game::tech'] option").removeProp("selected");
            $("[name='game::tech'] option").removeAttr("selected");
            $("[name='game::tech'] option:eq(0)").attr("selected",true); 
            $("[name='game::tech'] option:eq(0)").prop("selected",true); 
            break;
        case "2":
            // Game > Tech
            $("[name='game::tech'] option").removeProp("selected");
            $("[name='game::tech'] option").removeAttr("selected");
            $("[name='game::tech'] option:eq(1)").attr("selected",true); 
            $("[name='game::tech'] option:eq(1)").prop("selected",true);  
            break;
        case "3":
            // Game > Tech
            $("[name='game::tech'] option").removeProp("selected");
            $("[name='game::tech'] option").removeAttr("selected");
            $("[name='game::tech'] option:eq(2)").attr("selected",true); 
            $("[name='game::tech'] option:eq(2)").prop("selected",true);  
            break;
    }
}); 
```

我现在有点卡在这里，因为我正在为只使用 Chrome 的人制作这个脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:27:16.050

试试这个：

```
$("#autoConfig-gametype").change(function()
{
    var value = $(this).val();

    switch(value)
    {
        case "1":
            // Game > Tech
            $("[name='game::tech'] option:eq(0)").prop("selected",true); 
            break;
        case "2":
            // Game > Tech
            $("[name='game::tech'] option:eq(1)").prop("selected",true);  
            break;
        case "3":
            // Game > Tech
            $("[name='game::tech'] option:eq(2)").prop("selected",true);  
            break;
    }
});​ 
```

[jsFiddler 演示](http://jsfiddle.net/Aatck/)

从`[removeProp](http://api.jquery.com/removeProp/)`文档

> 注意：请勿使用此方法删除本机属性，例如选中、禁用或选中。这将完全删除该属性，并且一旦删除，就不能再次将其添加到元素中。使用 .prop() 将这些属性设置为 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:27:27.453

removeProp 和 removeAttr 不工作，使用`.prop('property', true/false)`作品。请参阅 Chrome 中的小提琴。

小提琴-> [http://jsfiddle.net/6bxew/](http://jsfiddle.net/6bxew/)

```
$("#autoConfig-gametype").change(function()
{
  var value = $(this).val();

  switch(value)
  {
    case "1":
        // Game > Tech
        $("[name='game\:\:tech'] option").prop("selected", false); 
        $("[name='game\:\:tech'] option:eq(0)").prop("selected", true);
        break;
    case "2":
        // Game > Tech
        $("[name='game\:\:tech'] option").prop("selected", false);
        $("[name='game\:\:tech'] option:eq(1)").prop("selected",true);  
        break;
    case "3":
        // Game > Tech
        $("[name='game::tech'] option").prop("selected", false);
        $("[name='game::tech'] option:eq(2)").prop("selected",true);  
        break;
  }
}); 
```

​</p>

# ipad - Twitter 是否跟踪源自 IP 地址的推文？

> ID：11196743
> 
> 赞同：0
> 
> 时间：2012-06-25T20:21:43.537
> 
> 标签：ipad, twitter

几个月前我的 iPad 被偷了。几天前，小偷不小心在推特上随机发了一张照片。那台 iPad 禁用了定位服务和 iCloud，所以就这样了。但是，它让我想到了手头的问题......

Twitter 是否跟踪每条推文的原始 IP 地址？如果是这样，有什么直接的方法可以得到它吗？我在任何 API 文档中都没有看到它。

这是我能收集到的关于这条推文的所有数据：http: [//api.twitter.com/1/statuses/show/215632207346270209.json](http://api.twitter.com/1/statuses/show/215632207346270209.json)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:37:30.653

他们当然可以，但是您必须获得法院命令才能将其交给您。另外，您需要法院命令才能从 ISP 获取用户详细信息

# sql - 获取一定数量的连续行

> ID：11196744
> 
> 赞同：2
> 
> 时间：2012-06-25T20:21:56.193
> 
> 标签：sql, oracle, plsql

我有一个学校项目，有点大，只剩下几天了，所以这是我遇到的一个问题，希望你能帮忙。
我有这张桌子：

```
places(id, otherInfo) 
```

很简单，我需要创建一个 SQL 查询或 PL/SQL 函数来检索一定数量的连续行。例如，如果我使用`getContiguousPlaces(3);`在具有行的表上调用该函数：

```
ID
1
4
5
6
18
19 
```

我想得到`ID`4、5 和 6 的行。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:09:07.933

尝试这个：

```
WITH t AS
  (SELECT p.*, LEVEL l,
                     CONNECT_BY_ROOT id AS cbr
   FROM places p CONNECT BY
   PRIOR id = id-1)
SELECT *
FROM t
WHERE cbr IN
    (SELECT cbr
     FROM t
     WHERE l = 3 )
and l <= 3
ORDER BY cbr,
         id 
```

常数 3 应该是一个参数

[这](http://www.sqlfiddle.com/#!4/aa884/14)是一个小提琴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:32:33.280

```
SELECT p.id, p.prev_id1, p.prev_id2
FROM (
        SELECT id, LAG(id, 1) OVER(ORDER BY id) prev_id1, LAG(id, 2) OVER(ORDER BY id) prev_id2
        FROM places
     ) p
WHERE p.prev_id1 = id-1 
AND   p.prev_id2 = id-2 
```

给你：[http ://sqlfiddle.com/#!4/a20e1/1](http://sqlfiddle.com/#!4/a20e1/1)

但我想如果你愿意的话，你可以用不同的方式检索数据。

编辑：这种情况下，如果参数“3”。但是如果你想用数字“n”来调整它，你要么必须在动态查询中使用它，要么可能使用 partition by 子句。我现在要看看这个...

# c++ - 在 GPU 上计算平方欧几里得距离矩阵

> ID：11196748
> 
> 赞同：4
> 
> 时间：2012-06-25T20:22:15.587
> 
> 标签：c++, cuda, gpu, euclidean-distance

让`p`是第一组位置的矩阵，其中每一行给出特定点的坐标。类似地，让`q`是第二组位置的矩阵，其中每一行给出特定点的坐标。

那么成对平方欧几里得距离的公式是：

```
k(i,j) = (p(i,:) - q(j,:))*(p(i,:) - q(j,:))', 
```

其中`p(i,:)`表示`i`矩阵 的第 - 行`p`，`p'`表示 的转置`p`。

我想`k`用 C++ 在支持 CUDA 的 GPU (NVidia Tesla) 上计算矩阵。我有支持 GPU 的 OpenCV v.2.4.1，但我对其他替代方案持开放态度，例如 Thrust 库。但是，我对 GPU 编程不太熟悉。你能建议一种有效的方法来完成这项任务吗？我应该使用哪些 C++ 库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:35:13.540

这个问题看起来很简单，足以使图书馆矫枉过正。

`i`在不知道and的范围的情况下`j`，我建议您将`k`每个块划分为多个 32 个线程的块，计算

```
float sum, myp[d];
int i = blockIdx.x*blockDim.x + threadIdx.x;
for ( int kk = 0 ; kk < d ; kk++ )
    myp[kk] = p(i,kk);
for ( j = blockIdx.y*blockDim.y ; j < (blockIdx.y+1)*blockDim ; j++ ) {
    sum = 0.0f;
    #pragma unroll
    for ( int kk = 0 ; kk < d ; kk++ ) {
        temp = myp[kk] - q(j,kk);
        sum += temp*temp;
        }
    k(i,j) = sum;
    } 
```

我假设您的数据具有`d`维度和写作`p(i,k)`，`q(j,k)`并且`k(i,j)`意味着对二维数组的访问。我还冒昧地假设您的数据类型为`float`.

请注意，根据`k`存储方式，例如行优先或列优先，您可能希望循环`i`每个线程而不是合并写入`k`.

# java - 递归未按预期工作

> ID：11196750
> 
> 赞同：1
> 
> 时间：2012-06-25T20:22:16.630
> 
> 标签：java, android, recursion

我有一个代码应该得到一个线性布局（里面有更多的线性布局），并得到其中的所有视图。有一些带有标签的文本视图，据此，它应该构建 3 个字符串。问题是它在循环后的第一行抛出异常。这是一个代码示例来解释：

```
private void insertToDB(final DataBaseHelper db, LinearLayout layout, 
                              String subject, String term, String meaning) 
{
    View v1 = null;
    for(int i=0; i < layout.getChildCount(); i++) {
        try {
            v1 = layout.getChildAt(i);
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        if(v1 instanceof LinearLayout)
        {
            insertToDB(db, ((LinearLayout)v1), subject, term, meaning);
        }
        if (v1.getTag() != null) {
            String val = v1.getTag().toString();
            if (val.equals("subject")) {
                subject = ((TextView)v1).getText().toString();
            }
            else if (val.equals("term")) {
                term+=((TextView)v1).getText().toString()+"$";
            }
            else if (val.equals("meaning")) {
                meaning+=((TextView)v1).getText().toString()+"$";
            }

        }
    }
    term = term.substring(0, term.length()-1);
    meaning = meaning.substring(0, meaning.length()-1);
    Card c = new Card(subject, term, meaning);
    db.Insert(c);
} 
```

堆栈跟踪：

```
06-25 20:27:59.332: D/AndroidRuntime(269): Shutting down VM
06-25 20:27:59.332: W/dalvikvm(269): threadid=1: thread exiting with uncaught exception (group=0x4001d800)

06-25 20:28:01.551: E/AndroidRuntime(269): FATAL EXCEPTION: main
06-25 20:28:01.551: E/AndroidRuntime(269): java.lang.StringIndexOutOfBoundsException
06-25 20:28:01.551: E/AndroidRuntime(269):  at java.lang.String.substring(String.java:1579)
06-25 20:28:01.551: E/AndroidRuntime(269):  at com.ronEven.iCards.AddRemove$1.insertToDB(AddRemove.java:78)
06-25 20:28:01.551: E/AndroidRuntime(269):  at com.ronEven.iCards.AddRemove$1.insertToDB(AddRemove.java:62)
06-25 20:28:01.551: E/AndroidRuntime(269):  at com.ronEven.iCards.AddRemove$1.onClick(AddRemove.java:46)
06-25 20:28:01.551: E/AndroidRuntime(269):  at android.view.View.performClick(View.java:2408)
06-25 20:28:01.551: E/AndroidRuntime(269):  at android.view.View$PerformClick.run(View.java:8816)
06-25 20:28:01.551: E/AndroidRuntime(269):  at android.os.Handler.handleCallback(Handler.java:587)
06-25 20:28:01.551: E/AndroidRuntime(269):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-25 20:28:01.551: E/AndroidRuntime(269):  at android.os.Looper.loop(Looper.java:123)
06-25 20:28:01.551: E/AndroidRuntime(269):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-25 20:28:01.551: E/AndroidRuntime(269):  at java.lang.reflect.Method.invokeNative(Native Method)
06-25 20:28:01.551: E/AndroidRuntime(269):  at java.lang.reflect.Method.invoke(Method.java:521)
06-25 20:28:01.551: E/AndroidRuntime(269):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-25 20:28:01.551: E/AndroidRuntime(269):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-25 20:28:01.551: E/AndroidRuntime(269):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:33:52.097

循环之后的其中一个 String.substring 调用显然会导致该问题，因为它们试图从空字符串中提取 String 部分。

所以：

emptyString.length() - 1 = -1

这是字符串中的非法索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:35:08.013

确保在这些行中：

```
term = term.substring(0, term.length()-1);
meaning = meaning.substring(0, meaning.length()-1); 
```

你正在检查那个`term.Length() > 0`和那个`meaning.Length() > 0`。

否则，您可能会尝试使用参数为 -1 的子字符串。

# javascript - 从 WebDriverJS 确定会话 ID

> ID：11196751
> 
> 赞同：6
> 
> 时间：2012-06-25T20:22:19.063
> 
> 标签：javascript, node.js, selenium, webdriver

我正在尝试在浏览器上运行 WebDriverJS，但文档对于如何让它控制主机浏览器有些模糊。在这里，它说：

> 启动浏览器以针对另一个浏览器运行 WebDriver 测试有点多余（与简单地使用节点相比）。相反，在浏览器中使用 WebDriverJS 旨在使浏览器自动运行脚本。只要知道服务器的 > URL 和浏览器的会话 ID，就可以完成此操作。虽然这些值可以直接传递给构建器，但它们也可以使用 wdurl 和 wdsid “环境变量”定义，它们是从加载页面的 URL 查询数据中解析的：

```
 <!-- Assuming HTML URL is /test.html?wdurl=http://localhost:4444/wd/hub&wdsid=foo1234 -->
    <!DOCTYPE html>
    <script src="webdriver.js"></script>
    <input id="input" type="text"/>
    <script>
      // Attaches to the server and session controlling this browser.
      var driver = new webdriver.Builder().build();

      var input = driver.findElement(webdriver.By.tagName('input'));
      input.sendKeys('foo bar baz').then(function() {
        assertEquals('foo bar baz',
            document.getElementById('input').value);
      });
    </script> 
```

我想从 Node.js 打开我的测试页面，然后运行客户端脚本中包含的命令。但是，我不知道在构建会话时如何提取会话 ID（wdsid 查询参数）。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T18:58:56.930

经过大量实验和阅读 WebDriverJS 源代码后，终于弄明白了。

```
var webdriver = require('./assets/webdriver');

var driver = new webdriver.Builder().
    usingServer('http://localhost:4444/wd/hub').
    withCapabilities({
        'browserName': 'chrome',
        'version': '',
        'platform': 'ANY',
        'javascriptEnabled': true
    }).
    build();

var testUrl = 'http://localhost:3000/test',
    hubUrl = 'http://localhost:4444/wd/hub',
    sessionId;

driver.session_.then(function(sessionData) {
    sessionId = sessionData.id;
    driver.get(testUrl + '?wdurl=' + hubUrl + '&wdsid=' + sessionId);
}); 
```

driver.session_ 返回一个 Promise 对象，该对象将在实例化时包含会话数据和其他信息。使用 .then(callback(sessionData)) 将允许您根据需要操作数据。

# java - 如何获取表示具有特定 [property,object] 对的对象的 RDF 资源？

> ID：11196754
> 
> 赞同：2
> 
> 时间：2012-06-25T20:22:22.493
> 
> 标签：java, xml, rdf, jena, rdfs

好的，澄清一下，我有一个 XML/RDF 文件，它描述了具有自然分类树结构（如文件夹和文件）的数据。数据不是在树中结构化的，而是有解释如何重建树的信息（即每个节点的嵌套集值）。除了假设文件中的某些语句具有 RootTree 属性，其对象是描述树根节点的语句的 URI，我一无所知。

获取该对象很容易，我只需使用：

```
// Obtain the node describing the root of the Pearltree.
mRootProp = mModel.createProperty(Pearltree.RDF.PearlTreeNS, "rootTree");

NodeIterator roots = mModel.listObjectsOfProperty(mRootProp); 
```

现在，我可以进一步列出所有具有属性`pt:parentTree`和对象的语句`roots.nextNode()`：

```
StmtIterator sit = mModel.listStatements(null, RDF.ParentTree, rootNode); 
```

这给了我所有这些陈述的清单。这些语句是在 RDF/XML 文件中看起来像这样的*元素*的一部分（请注意，它们具有不同的 parentTree 值，但出现在相同的上下文中）：

```
<pt:RootPearl rdf:about="http://www.pearltrees.com/dcow/pearltrees-videos/id5296268#rootPearl">
   <dcterms:title><![CDATA[Pearltrees videos]]></dcterms:title>
   <pt:parentTree rdf:resource="http://www.pearltrees.com/dcow/pearltrees-videos/id5296268" />
   <pt:inTreeSinceDate>2012-06-11T20:25:55</pt:inTreeSinceDate>
   <pt:leftPos>1</pt:leftPos>
   <pt:rightPos>8</pt:rightPos>
</pt:RootPearl>

<pt:PagePearl rdf:about="http://www.pearltrees.com/dcow/pearltrees-videos/id5296268#pearl46838293">
   <dcterms:title><![CDATA[why Pearltrees?]]></dcterms:title>
   <dcterms:identifier>http://www.youtube.com/watch?v%3di4rDqMMFx8g</dcterms:identifier>
   <pt:parentTree rdf:resource="http://www.pearltrees.com/dcow/pearltrees-videos/id5296268" />
   <pt:inTreeSinceDate>2012-06-11T20:25:55</pt:inTreeSinceDate>
   <pt:leftPos>2</pt:leftPos>
   <pt:rightPos>3</pt:rightPos>
</pt:PagePearl>

... 
```

现在，我想做的是获取对所有带有主题 sat.nextStatement() 主题的语句的引用。在这个例子中：

“http://www.pearltrees.com/dcow/pearltrees-videos/id5296268#rootPearl”

和

“http://www.pearltrees.com/dcow/pearltrees-videos/id5296268#pearl46838293”

我的目标是获取每个*元素*的内容，包括它的 rightPos 和 leftPos，以便我可以重建树。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T09:52:54.640

您可以按如下方式简化代码：

```
mRootProp = mModel.createProperty(Pearltree.RDF.PearlTreeNS, "rootTree");
Resource root = mModel.listResourcesWithProperty( mRootProp ).next(); 
```

这假设您知道每个模型只有一个根。如果这可能不是真的，请相应地修改代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T21:37:32.423

方法：

```
getSubject() 
```

的*Statement*将返回*Subject*作为*Resource*。然后，您可以使用

```
getProperty(Property p) 
```

返回*资源*的方法来获取包含相关属性的*语句。*

所以，就我而言，我使用：

```
Resource r;
Statement title, id, lpos, rpos;
while(sit.hasNext()) {
    r = sit.nextStatement().getSubject();

    title = r.getProperty(DCTerms.title);
    id    = r.getProperty(DCTerms.identifier);
    lpos  = r.getProperty(PearlTree.RDF.leftPos);
    rpos  = r.getProperty(PearlTree.RDF.rightPos);
    ...
} 
```

# javascript - 使用 Jquery 获取元素的第 n 个子值

> ID：11196760
> 
> 赞同：-1
> 
> 时间：2012-06-25T20:22:49.107
> 
> 标签：javascript, jquery

我希望将“1”添加到 id conCol 以使其成为 conCol1。请有人告诉我我是怎么做的，因为我下面的陈述不起作用。此外，是否有可能获得“第一列”的值，即条件#0 使其成为条件#1？

```
newElem.children('select :nth-child(2)').attr('id', 'conCol' + newNum).attr('name', 'name' + newNum);

<tr id="condition1" class="clonedInput">
              <td class="first-column">Condition #0</td>
              <td><span style="float:left; padding-right: 10px;">
                <select id="conCol" name="conCol" class="standard_select" style="width:147px; background:#fff;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:29:18.737

假设`newElem`是`tr`元素（包装在 jQuery 中）：

```
newElem.find('select').attr('id', 'conCol' + newNum).attr('name', 'conCol' + newNum);
newElem.find('.first-column').text('Condition #1'); 
```

[.find()](http://api.jquery.com/find/)和[.text()](http://api.jquery.com/text/)的文档

# sql - 通过 SQLFiddle 进行不同计数

> ID：11196765
> 
> 赞同：1
> 
> 时间：2012-06-25T20:23:09.590
> 
> 标签：sql, sql-server, sqlfiddle

这看起来很奇怪：[[SQL FIDDLE]](http://sqlfiddle.com/#!3/b4130/3)

这两个用户肯定是不同的，即 1<>2。那么为什么不同的计数说 1 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:29:00.493

你想用`distinct [User]`

用户是一个特殊的词

[http://sqlfiddle.com/#!3/b4130/20](http://sqlfiddle.com/#!3/b4130/20)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T20:27:09.117

`user`是保留关键字。如果你运行：

```
select DateKey, User from the_table 
```

您会看到用户不是`1`or `2`，而是类似`user_b1234`. 就像 Lamak 建议的那样，使用`[user]`来引用列而不是系统变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-25T20:49:00.420

这是一个带有一些解释的答案...

用户不仅仅是一个保留字。它更像是一个系统定义的只读全局变量。

*   它评估为当前数据库用户的名称。所以每一行都会得到相同的值，并且 count(distinct user) 是 1。

*   User produces the same value as the system defined USER_NAME() function.

So if you want User to be treated as a column name, write [User] as others have suggested, and as you did in your create table statement.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:27:32.067

我想你想要这个：

```
select 
    COUNT(DateKey)
    ,count(distinct User) Cnt
from the_table
where Datekey = 20120103
group by 
    DateKey 
```

[http://sqlfiddle.com/#!3/b4130/14/0](http://sqlfiddle.com/#!3/b4130/14/0)

# syntax - 语法问题 - Razor MVC4

> ID：11196768
> 
> 赞同：6
> 
> 时间：2012-06-25T20:23:33.477
> 
> 标签：syntax, razor, partial-views, html-helper, asp.net-mvc-4

我正在尝试使用自定义辅助方法显示部分视图。唯一的问题是，我无法解决这个语法问题。此 cshtml 文件的模型集是我定义为 Operation 的 IEnumerable 模型集合。我确信这是一个简单的解决方法。这是我所看到的一个例子：

我有这段代码：

```
 @using(Html.BeginForm()) {
       <div id="editor_rows">
          @foreach (var item in Model){
             Html.RenderPartial("OperationEditorRow", item);
          }
       </div>
    } 
```

这在运行时给了我以下错误：

```
 Unexpected "{" after "@" character. Once inside the body of a code block (@if {}, @{}, etc.) you do not need to use "@{" to switch to code. 
```

但是，如果我删除 foreach 语句前面的 @ 符号，所有内容都会被解释为纯文本。所以我尝试在 Html 前面放置一个@，如下所示：

```
 @using(Html.BeginForm()) {
       <div id="editor_rows">
          @foreach (var item in Model){
             @Html.RenderPartial("OperationEditorRow", item);
          }
       </div>
    } 
```

这会带来一个编译错误，上面写着：

```
 Cannot implicitly convert type void to object 
```

如果我从这里运行项目，我会收到一个运行时错误，上面写着：

```
 The best overloaded method match for 'System.Web.WebPages.WebPageExecutingBase.Write(System.Web.WebPages.HelperResult)' has some invalid arguments 
```

我假设这与先前的错误有关。如果有人对我有建议，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:59:14.260

问题解决了。我和一个同事一起做这个。事实证明，写入方法的错误指向了我的局部视图中的问题。我在其中的一段代码周围使用了@{}，这很可能也会引发其他语法错误。感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:42:25.890

在您的渲染调用周围添加 {}，例如 @{RenderPartial...}

# php - MySQL 需要来自多行连接的多个值

> ID：11196769
> 
> 赞同：2
> 
> 时间：2012-06-25T20:23:46.487
> 
> 标签：php, mysql, sql

我有以下表结构。

表 A

```
id    name
1     name1
2     name2 
```

表 B

```
a_id   b_id
1      1
1      2 
```

如何选择表 A 中 b_id 为 1 和 2 的所有行？表B是表A和另一个表的映射表，其内容与本题无关。

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T20:26:59.803

此查询用于`COUNT(DISTINCT)`确保两个值都存在。如果我没有使用 DISTINCT，它可能会错误地将 TableB 中看起来像这样的行计数为不应该匹配的行：

```
a_id   b_id
1      1
1      1  

select a.id, a.name
from TableA a
inner join (
    select a_id
    from TableB
    where b_id in (1, 2)
    group by a_id
    having count(distinct b_id) = 2 #this number matches no. of unique values in IN clause
) b on a.id = b.a_id 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/777b9/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:50:21.803

在这样的问题上，正确性可能很棘手，因为您的示例数据缺少关键案例。B_ID 的重复值以及它可以包含其中一个 id 但不能同时包含两者的可能性

例如

```
| A_ID | B_ID |
---------------
|    1 |    1 |
|    1 |    2 |
|    2 |    1 |
|    2 |    1 | 
```

最好的方法是使用 Have (Distinct Count) = # of ids ( [RedFilter's](https://stackoverflow.com/a/11196812/119477) )，因为它很容易添加更多 ID

另外两个选项是使用多个 EXISTS 或 IN 子句（[NickB's](https://stackoverflow.com/a/11196896/119477)）或多次加入和过滤（如下），但如果您需要添加额外的 id，可能会变得很长。

```
SELECT DISTINCT a.id,
       a.name
FROM TableA a
     INNER JOIN TableB b1
     ON a.id = b1.a_id
        and b1.b_id = 1
    INNER JOIN TableB b2
     ON a.id = b2.a_id
        and b2.b_id = 2 
```

[演示](http://sqlfiddle.com/#!2/52b44/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T20:45:40.590

我也会尝试一下，通过自我加入：

```
SELECT A.* FROM B B1
JOIN B B2 ON B2.a_id = B1.a_id
JOIN A ON A.id = B1.a_id
WHERE B1.b_id = 1 AND B2.b_id = 2 
```

我对此进行了测试，并且可以正常工作。如果 (B.a_id, B.b_id) 不是唯一的，那么您将需要 DISTINCT 以避免重复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T20:26:47.167

```
SELECT * FROM A JOIN B ON A.id=B.a_id WHERE B.b_id IN(1,2); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-25T20:32:12.530

这是我能想到的，它使用一个子查询。

```
SELECT * FROM table_a a1 
    JOIN table_b b1
    ON a1.id = b1.a_id 
WHERE b1.b_id = 1 AND 
    EXISTS( 
        SELECT b2.b_id 
            FROM table_b b2 
        WHERE a1.id = b2.a_id 
            AND b2.b_id = 2
    ) 
```

不知道 SQL Fiddle 存在，但[这里有一个](http://sqlfiddle.com/#!2/a4393/3)显示它工作！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-25T20:29:06.377

```
SELECT TableA.* FROM TableA WHERE TableA.id IN(
SELECT TableB.a_id FROM TableB WHERE TableB.b_id IN(1,2)) 
```

# embed - 每个视频网站的视频 PHP 脚本

> ID：11196771
> 
> 赞同：0
> 
> 时间：2012-06-25T20:23:54.273
> 
> 标签：embed

这令人沮丧...

现在我只有以下内容：

```
$regexes = array();
    //youtube regex, will go to matches[1]
    $regexes[] = '(?:https?:\/\/(?:(?:.+\.(?:youtube\.com|ytimg\.com))|(?:youtu\.be\/))(?:.*?)(?:\??vi?[\/\=]{1}|embed\/)([A-Za-z0-9\-_]{11}))';
    //vimeo regex, will go to matches[2]
    $regexes[] = '(?:https?:\/\/(?:.+\.)vimeo.com(?:\/video\/|(?:.+clip_id=))([a-z0-9-]+))'; 
```

那只是 Youtube 和 Vimeo。但我想要的是 Youtube、Vimeo、Dailymotion ......以及所有其他存在的网站。

我的想法是我有一个网站，允许用户嵌入来自其他网站的视频。我猜有点像不倒翁。我有大约一百个网站。但我不知道从哪里开始寻找这些网站的完整代码列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:38:09.557

很难维护一个包含所有视频网站的数据库。我认为您可以获取 URL 内容并搜索视频标签。不幸的是，这仅适用于使用 html5（而非 flash）呈现视频的网站。

# java - 使用 Java 和 RallyRestApi 对象时如何确认登录到 Rally？

> ID：11196774
> 
> 赞同：0
> 
> 时间：2012-06-25T20:24:14.947
> 
> 标签：java, rest, rally

我正在编写一个使用 Java 和 Rally API 访问 Rally 的 Web 服务客户端，并且想确认用户在登录时输入了正确的用户名/密码（这发生在创建 RallyRestApi 对象期间）。到目前为止，我发现显示他们的凭据是否有效的唯一方法是尝试查询并检查响应。RallyRestApi 是否提供任何表明正确登录的反馈，或者任何人都可以推荐一种验证用户/密码信息的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:10:51.203

现在进行测试查询确实是唯一的方法。出于性能原因，将页面大小指定为 1 以将结果限制为最小。

# android - Android 选项卡/片段生命周期

> ID：11196777
> 
> 赞同：4
> 
> 时间：2012-06-25T20:24:22.323
> 
> 标签：android, android-layout, android-fragments, android-tabhost

就标签/片段而言，它们是否有可能保留信息？例如，如果我有一个选项卡，在第一次选择时进行了 http 调用然后显示信息，那么我是否可以让它在选择时再次显示信息而不进行另一个 http 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T03:07:43.830

简短的回答，是的。

在 Android 中有两种使用选项卡的方法。您可以使用 TabActivity 或 TabHost。由于您提到了片段，因此您很可能会想到 TabHost。但是，为了以防万一，我将包括两者的描述：

## 标签主机：

由于您的所有片段都包含在单个活动中，因此在选项卡之间导航时，不会为您正在导航的片段触发任何生命周期事件，因此无论您是否希望数据都是持久的。

## 选项卡活动：

这是它变得有点棘手的地方。单击新选项卡实际上会停止旧活动，从而清除大部分数据。保存任何特定数据的最佳方式是将其放在*Singleton*或[Application 对象](http://portabledroid.wordpress.com/2012/05/04/singletons-in-android/)中。这是一个扩展 Application 的类，就像您的 Activity 类扩展 Activity 一样。然后所有其他活动都可以访问此类，您可以为您想要的任何数据提供标准的 getter/setter。

如果您想要保存大量数据，您可能需要考虑创建一个[SQLite](http://www.vogella.com/articles/AndroidSQLite/article.html)数据库，因为它会节省内存。

# java - 如何提取JTextArea的元素

> ID：11196778
> 
> 赞同：0
> 
> 时间：2012-06-25T20:24:33.663
> 
> 标签：java, swing, jtextarea

我试图从 JTextArea 中提取最后一行并将其设置为 String 这是我的代码：

```
JTextArea text = new JTextArea();
String text2 = text.getText();
int totalLines = text.getLineCount();
for(int j=0; j < totalLines; j++) {
   int end = text.getLineEndOffset(j);
   String line = text2.substring(end);
} 
```

有人能告诉我错误在哪里吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:44:30.090

您真的很接近，只需用于`JTextArea.getLineStartOffset`获取最后一行的开头，例如：

```
int last  = area.getLineCount() - 1;
int start = area.getLineStartOffset(last);
int end   = area.getLineEndOffset(last);

String lastLine = area.getText().substring(start, end); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:59:51.523

查看[Document](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Document.html)（[JTextComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)的模型）并使用带有方法的[Text Utilities](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Utilities.html)

*   [公共静态最终 int getRowStart(JTextComponent c, int offs)](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Utilities.html#getRowStart%28javax.swing.text.JTextComponent,%20int%29)

*   [公共静态最终 int getRowEnd(JTextComponent c, int offs)](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Utilities.html#getRowEnd%28javax.swing.text.JTextComponent,%20int%29)

( `throws BadLocationException`)

编辑

*   [@Stas 的例子](http://java-sl.com/tip_row_column.html)，

*   [检索 JTextComponent 中的可见行](http://www.exampledepot.com/egs/javax.swing.text/GetWrappedLines.html)

*   [@camickr 的文本组件行号](http://tips4java.wordpress.com/2009/05/23/text-component-line-number/)

编辑 2

> 如何提取JTextArea的元素

`element`可能是`line`或`word`太

# javascript - 关于提交和jquery的问题

> ID：11196780
> 
> 赞同：-1
> 
> 时间：2012-06-25T20:24:51.897
> 
> 标签：javascript, jquery, submit, onsubmit

在检查表单更改的项目上工作。当用户提交表单时，我很难删除已发出警报的更改。

```
$(document).ready(function(){
    changes_made = false;

    $('input, select, textarea').on('change', function() {
        changes_made = true;
    });

    $(window).bind('beforeunload', function() {
        if(changes_made) { return 'You have made changes on this page.'; }
    });

    $('form').each(function() {
        $(this).on('submit', function() {
            changes_made = false; 
        });
    });
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:32:41.680

如果您希望能够恢复用户所做的任何更改，则需要存储表单的原始内容。这样，您无需等待更改事件，只需将旧表单内容与新内容进行比较，并在必要时进行替换。

其他花絮：`var`在变量声明之前需要一个（否则变量最终会附加到窗口对象）。除非您的表单提交是一个 ajax 调用，否则将 changes_made 设置回 false 是没有意义的。该页面将重新加载，并且无论如何 changes_made 将再次为 false。

# android - Android setOnTouchListener

> ID：11196781
> 
> 赞同：1
> 
> 时间：2012-06-25T20:24:59.137
> 
> 标签：android, gesture

对于同一个问题，我已经阅读了一些不同的回答，所以我不知道哪个是正确的，然后我决定再问一次。请尽量不要在此答案中引用任何其他链接。如果你想这样做，我会期待一些额外的解释。

我的问题是：我有一个`ImageView`inside a `ViewPager`，我`ImageView`有一些手势检测（缩放和平移），我使用的是默认的`ViewPager`，默认情况下有滑动检测。 *onTouch 事件链是如何工作的？我的层次结构中的最低视图将始终获得 onTouch，如果方法返回 false，父级会处理它吗？也许相反？*

我问这个，因为我有一个`ImageView`左右手势，当我进入图像边缘时，我必须向父级（a `ViewPager`）发送一个事件来处理分页事件。关于如何做的任何进一步提示，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:10:57.893

所以，我已经以比 onInterceptTouchEvent 更好的方式管理 ViewPager 的子视图中的多次触摸，我是说，因为在我的情况下，为了知道我是否必须滚动子视图而不是 Pager，我需要起点和终点之间的距离，我不想保留这些变量并在之后计算增量。

无论如何，在进入 ViewPager 的源代码之后，我发现有一个非常好的方法，我应该为此实现。这是我的实现：

```
@Override
protected boolean canScroll(View v, boolean checkV, int dx, int x, int y) {
    if (v instanceof ImageViewTouch) {
        return ((ImageViewTouch) v).canScroll(dx);
    } else {
        return super.canScroll(v, checkV, dx, x, y);
    }
} 
```

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/view/ViewPager.java#ViewPager.canScroll%28android。 view.View%2Cboolean%2Cint%2Cint%2Cint%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/support/v4/view/ViewPager.java#ViewPager.canScroll%28android.view.View%2Cboolean%2Cint%2Cint%2Cint%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:56:43.207

它的工作原理相反，ViewPager 先吃触摸事件，然后 ImageView 会得到它。

我会在自定义视图寻呼机上使用 onInterceptTouchEvent(MotionEvent ev)。在 MotionEvent 上，您需要通过 ev.getPointerCount() 分析有多少接触点。

如果您有 ev.getPointerCount() == 2，您可能希望在 ImageView 内进行捏合和缩放。

如果您有 ev.getPointerCount() == 1，那么您可能打算在 View Pager 的页面中滑动或在 ImageView 中执行平移。为了区分这两者，您需要弄清楚您是用一根手指执行滑动手势还是简单的 MotionEvent.MOVE 进行平移。滑动手势要求用户超过预定义的速度。GestureDetector 应该为您解决这个问题。

# c# - EXCEL 数据提取，C# ASP.NET 不工作 控制台工作

> ID：11196783
> 
> 赞同：0
> 
> 时间：2012-06-25T20:25:07.113
> 
> 标签：c#, asp.net, interop

我有一些代码可以解析数据的 excel 文件。它适用于 C# 控制台，但不适用于 ASP.net。

由于某种原因，下面的代码片段在我的 asp.net 应用程序中失败：在 Cells[i,j] 之后没有提供智能感知并且缺少 value2 属性。

帮助，这两个应用程序都使用 Microsoft.Office.Interop.Excel 进行引用；

var g = xlRange.Cells[i, j].value2.ToString();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:38:57.537

[MS 在服务器场景（如 ASP.NET）中不支持互操作。](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)

有许多选项可以在没有 Interop 的情况下读取/编辑/创建 Excel 文件：

MS 提供免费的 OpenXML SDK V 2.0 - 请参阅[http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx](http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx)（仅限 XLSX）

这可以读写 MS Office 文件（包括 Excel）。

另一个免费选项参见[http://www.codeproject.com/KB/office/OpenXML.aspx](http://www.codeproject.com/KB/office/OpenXML.aspx)（仅限 XLSX）

# jquery - 在 ajax 加载的图像上激活 Jcrop

> ID：11196784
> 
> 赞同：0
> 
> 时间：2012-06-25T20:25:08.280
> 
> 标签：jquery, ajax, jcrop

从 ajax 返回的 html img 具有“tocrop”类。目前我在ajax调用成功时调用该函数：

```
$("#imageform").ajaxForm({
        target: '#image_upload_preview',
        success: jcropp(),
})

function jcropp(){
    $('.tocrop').Jcrop();
    } 
```

我尝试使用 .load()、setInterval() 和 clearInterval(当 $('.tocrop').Jcrop())、.bind() 在函数加载后绑定它......似乎没有任何效果

已经有一个[线程](https://stackoverflow.com/questions/2151672/implementing-jcrop-in-ajax-upload)，但解决方案不起作用

任何帮助将不胜感激这是从服务器返回的，已经尝试将 $('.tocrop').load() 绑定到 jcrop 函数：

```
<img class='tocrop' src='/tempupload/".$upload_data['file_name']."'/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:47:49.990

你想要

```
success: jcropp 
```

代替

```
success: jcropp() 
```

喜欢

```
$("#imageform").ajaxForm({
    target: '#image_upload_preview',
    success: jcropp
}); 
```

或类似的东西，如果您想检查图像加载事件是否也成功。请澄清您从服务器返回的内容，如果它是一些 html，那么您应该为图像绑定一个加载事件，因为在触发成功时可能不会加载图像。

```
$("#imageform").ajaxForm({
    target: '#image_upload_preview',
    success: function(data){
        jcropp();
        }
}); 
```

从您的评论“从服务器返回的 html 有类要加载”

```
$("#imageform").ajaxForm({
    target: '#image_upload_preview',
    success: function(data){
        var src = $('.tocrop').attr('src');
        $('.tocrop').load(function(){
            $(this).Jcrop();
            }).attr('src',src);
        }
}); 
```

# java - FTP org.apache.commons.net.MalformedServerReplyException：无法解析响应代码

> ID：11196787
> 
> 赞同：2
> 
> 时间：2012-06-25T20:25:26.913
> 
> 标签：java, ftp

我每天尝试将文件 FTP 到我们的服务器时遇到问题。

这是来自服务器的响应...

org.apache.commons.net.MalformedServerReplyException：无法解析响应代码。服务器回复：ma。

我不确定服务器回复“ma”是什么意思？我可以使用像 Filezilla 这样的客户端登录没问题。

```
FTPClient client = new FTPClient(); 

try { 

    client.connect("IP Address");  

    boolean login = client.login("username", "password"); 

            if (login) {
                do something
            } 
    } catch (IOException e) { 
    e.printStackTrace(); 
    out.println(e.toString()); 

} finally { 

    try { 
        client.disconnect(); 
    } catch (IOException e) { 
        e.printStackTrace(); 
        out.println(e.toString()); 
    }
    } 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:50:39.707

我遇到了完全相同的问题，但事实证明服务器使用的是 SFTP，请检查 filezilla 实际上没有使用 SFTP。

# jquery - 变量更改时显示的 Jquery 变量不会更改

> ID：11196789
> 
> 赞同：0
> 
> 时间：2012-06-25T20:25:37.250
> 
> 标签：jquery, variables, checkbox

我用它来检查选中的框数

```
 var CheckedChecks = $("input:checkbox:checked").length; 
```

然后我将结果放在一长串 HTML 中。我设置了警报，所以我知道变量正在改变。（我在粘贴 html 时遇到问题，但这并不重要......

```
 $(".pt-sel:first").append("HTML CRAP"+ CheckedChecks +"MORE HTML CRAP") 
```

所有 html 都显示正常，复选框数量的初始值 0 是正确的，但是它不会随着变量的更新而更新。var 和 var 的显示都出现在同一个 {} 集中，所以这不是问题。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:36:33.840

好吧，CheckedChecks 只计算一次长度，然后变成静态，直到再次引用长度属性。

所以，如果我对问题的理解是正确的，我认为你应该试试这个。如果我不理解这个问题，请原谅我。

```
var CheckedChecks = function(){
 return $('input:checkbox:checked').length;
};

$('.pt-sel:first').append('HTML CRAP'+CheckedChecks()+'MORE HTML CRAP'); 
```

要不就

```
$('.pet-sel:first').append('HTML CRAP'+$('input:checkbox:checked').length+'MORE HTML CRAP'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:37:54.883

变量不会自动更新。

您必须连接到所有复选框的 onchanged 事件才能更新文本。

```
$("input[type=checkbox]").change(function() {
   var CheckedChecks = $("input:checkbox:checked").length;
   //cant use append, so put a div at bottom, and fill this.
   $(".pt-sel:first #myDiv").html("HTML CRAP"+ CheckedChecks +"MORE HTML CRAP")
}); 
```

（这假设您要应用到所有复选框。如果您需要更具体，请给复选框一个类）

# php - 邮寄 Exchange 服务器 SMTP 服务器响应：550 - 验证失败

> ID：11196790
> 
> 赞同：2
> 
> 时间：2012-06-25T20:25:38.830
> 
> 标签：php, email, sendmail

如何向我的 Exchange 服务器发送电子邮件？当我使用 send_from="x@domain.com" 设置 php.ini 文件时，它说 550 验证失败。我如何验证自己？

我正在使用 SMTP：mail.domain.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:37:57.130

[使用 phpmailer http://sourceforge.net/projects/phpmailer/](http://sourceforge.net/projects/phpmailer/)之类的类来执行此操作可能是个好主意。

这样，如果您有多个项目需要通过不同的帐户或不同的服务器发送，那么您将不会遇到任何问题。

您收到的错误是因为您的交换服务器需要身份验证，而您的脚本未使用身份验证或其使用错误信息。我从来没有真正依赖过内置的 php sendmail 函数，所以我不能 100% 确定，但我认为它不支持身份验证。（在这一点上我可能错了，但我仍然推荐一个类，您可以通过全局配置的邮件帐户为每个脚本配置一个类）

# jquery-ui-dialog - Jquery UI .dialog 使用 .click 立即打开和关闭

> ID：11196795
> 
> 赞同：1
> 
> 时间：2012-06-25T20:25:45.023
> 
> 标签：jquery-ui-dialog

我有一个对话框附加到一个打开但立即关闭的链接。控制台中没有 JS 错误。这是代码：

**JS代码**

```
 <script type="text/javascript">
    $(document).ready(function(){
       $( "##des-#pres_id#" ).dialog({
          autoOpen: false,
          show: "blind",
          hide: "explode"
       });

       $( "##link-des-#pres_id#" ).click(function() {
          $( "##des-#pres_id#" ).dialog( "open" );
          return false;
       });
    });
 </script> 
```

**HTML 代码**

```
<div id="des-#pres_id#" title="Description">#description#</div>
#left(description,30)#
<cfif len(description) GT 30> 
   <a href="" id="link-des-#pres_id#">more...</a>
</cfif> 
```

我在这里想念什么？（我使用 UI 版本 1.7.2）

# jquery - 将值传递给 jquery 对话框

> ID：11196798
> 
> 赞同：1
> 
> 时间：2012-06-25T20:25:49.937
> 
> 标签：jquery, asp.net

我有一个 asp.net gridview 包裹在一个更新面板上，其中包含两个字段：

```
<asp:TemplateField Visible="False">
  <ItemTemplate>
    <asp:Label ID="lblID" runat="server" style="display:none" 
      Text='<%# DataBinder.Eval(Container, "DataItem.ID") %>' Width=".05px">
    </asp:Label>
  </ItemTemplate>
  <ItemStyle Width="1%" />
  <ControlStyle Width="0px" />
  <HeaderStyle Width="0px" />
</asp:TemplateField>

<asp:TemplateField HeaderText="#">
  <ItemTemplate>
  <asp:HyperLink ID="hlSortOrder" runat="server" CssClass="hlDialog" NavigateUrl="javascript:return false;"
    Text='<%# DataBinder.Eval(Container, "DataItem.SortOrder") %>'>
  </asp:HyperLink>
  </ItemTemplate>
  <FooterStyle HorizontalAlign="Center" />
  <HeaderStyle HorizontalAlign="Center" />
  <ItemStyle HorizontalAlign="Center" />
</asp:TemplateField> 
```

第二个字段是一个超链接字段，当我单击它时，我可以打开 jquery ui 对话框。我这样称呼它：

```
$(".hlDialog").click(function () {
    $('#dialog').dialog({
        draggable: true,
        modal: true,
        height: 600,
        width: 800,
        title: "Log file",
        open: function (type, data) {
            $(this).parent().appendTo("form");
        }
    });
}); 
```

但是，这很好用......是否可以将我的第一个 gridview（从上面）的值传递`lblID`给 jquery 对话框？现在我只是拉出一个空的对话屏幕。我希望最终能够获取 lblID 的值（来自上面的网格视图），然后提取一些数据以显示在我的对话框中。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:42:39.317

试穿这个尺寸。我在您现有的功能中添加了一些内容，因为我不完全确定您想要在哪里获得什么价值。

```
<% /* this field could be a simpler <asp:BoundField> or something similar... */ %>
<asp:TemplateField Visible="False">
  <ItemTemplate>
    <asp:Label ID="lblID" runat="server" style="display:none" 
      Text='<%# DataBinder.Eval(Container, "DataItem.ID") %>' Width=".05px">
    </asp:Label>
  </ItemTemplate>
  <ItemStyle Width="1%" />
  <ControlStyle Width="0px" />
  <HeaderStyle Width="0px" />
</asp:TemplateField>

$(".hlDialog").click(function () {
    var that = $(this),
        thatValue = that.val(),
        lblIDValue = that.prev.text(), //should be accurate depending on what else is happening on the page
        aux = 0;

    $('#dialog').dialog({
        draggable: true,
        modal: true,
        height: 600,
        width: 800,
        title: "Log file",
        open: function (type, data) {
            var el = $('<div>').addClass('hiMom').text( thatValue + ' ' + lblIDValue );
            $(this).prepend(el).parent().appendTo("form");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:30:07.637

您的模态窗口应该可以从调用页面访问 DOM。您应该能够在模态窗口上使用 jquery 从调用页面检索 lblID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:31:43.550

据我所知，您可以在点击事件中执行以下操作：

```
$(".hlDialog").click(function () {
    // First parent() is for "td", next for "tr"
    var lblID = $(this).parent().parent().find("span").html();
 .
 .
 .
}); 
```

希望这可以帮助！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:32:30.710

查看[http://blog.nemikor.com/2009/04/08/basic-usage-of-the-jquery-ui-dialog/上的教程](http://blog.nemikor.com/2009/04/08/basic-usage-of-the-jquery-ui-dialog/)

主要是：

```
$(document).ready(function() {
    var $dialog = $('<div></div>')
        .html('This dialog will show every time!')
        .dialog({
            autoOpen: false,
            title: 'Basic Dialog'
        });

    $('#opener').click(function() {
        $dialog.dialog('open');
        // prevent the default action, e.g., following a link
        return false;
    });
}); 
```

这将允许您在对话框中设置 HTML。使用 DOM 获取您的 lblID。

并使用来自另一个答案的值，您可以通过以下方式在 DOM 中获得它：

```
var lblID = $(this).parent().parent().find("span").html(); 
```

然后将该值用于您的 .html

```
.html(lblID) 
```

示例在这里：[http ://example.nemikor.com/basic-usage-of-the-jquery-ui-dialog/](http://example.nemikor.com/basic-usage-of-the-jquery-ui-dialog/)

# google-closure-library - 为什么我不能将另一个类的公共枚举作为静态字段访问？

> ID：11196799
> 
> 赞同：1
> 
> 时间：2012-06-25T20:26:05.643
> 
> 标签：google-closure-library

我在文件中有一个枚举：

```
goog.provide('animals.Fish');

animals.Fish = function(obj) {
  this.name_ = obj[animals.Fish.Properties.NAME];
  this.awesomenessLevel_ = obj[animals.Fish.Properties.AWESOMENESS];
}

/**
 * Public list of properties.
 * @enum {string}
 */
animals.Fish.Properties = {
  NAME: 'name',
  AWESOMENESS: 'awesomenessLevel',
} 
```

为什么我不能像这样在另一个类中访问这个枚举作为 Fish 的静态字段？

```
goog.require('animals.Fish');
...
var tuna = new animals.Fish(
  animals.Fish.NAME: 'tuna',
  animals.Fish.AWESOMENESS: '100'
)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:27:55.670

闭包枚举类型基于来自 Java 和 C++ 等语言的[枚举类型的概念。](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)在 Java 中，枚举类型定义如下：

> *枚举类型*是一种类型，其字段*由*一组固定的常量组成。常见示例包括指南针方向（NORTH、SOUTH、EAST 和 WEST 的值）和星期几。

在上面的示例中，`animals.Fish.Properties`可能应该表示为[记录类型](https://developers.google.com/closure/compiler/docs/js-for-compiler#types)，因为分配的值不是常量。在下面的示例中，`animals.Fish.Properties`已重命名`animals.Properties`，以便它可以应用于任何类型的动物（不仅仅是鱼）。

## 鱼.js

```
goog.provide('animals.Fish');
goog.provide('animals.Properties');

/** @typedef {{name: string, awesomeness: string}} */
animals.Properties;

/**
 * @param {animals.Properties} properties Animal properties.
 * @constructor 
 */
animals.Fish = function(properties) {
  /** @type {string} */
  this.name_ = properties.name;

  /** @type {string} */
  this.awesomenessLevel_ = properties.awesomeness;
};

/**
 * @return {string} The name of the fish.
 */
animals.Fish.prototype.getName = function() {
  return this.name_;
}; 
```

## 动物应用程序.js

```
goog.provide('animals.app');

goog.require('animals.Fish');

animals.app.tuna = new animals.Fish({name: 'tuna', awesomeness: '100'});    
alert(animals.app.tuna.getName()); // alerts 'tuna' 
```

附带说明一下，在原始示例中，`AWESOMENESS: 'awesomenessLevel'`在`animals.Fish.Properties`. 此外，在您的第二个文件中，您需要使用完全限定的枚举名称。所以代替`animals.Fish.NAME`它会是`animals.Fish.Properties.NAME`.

# ruby-on-rails - 任何人都可以推荐在实时服务器环境中在Passenger/nginx组合下分析Ruby on Rails软件的最佳实践吗？

> ID：11196801
> 
> 赞同：4
> 
> 时间：2012-06-25T20:26:11.557
> 
> 标签：ruby-on-rails, performance, amazon-ec2, profiling, profiler

我正在尝试使用 Elasticache 确定位于 EC2 中的 Rails 3 应用程序响应时间超过 20 秒的原因可能是什么。我有理由相信这个问题实际上与缓存有关，但我没有数字可以证明这一点。我想得到那些数字。为了完整起见，我们在 Ubuntu 12.04 上运行应用程序。

搜索谷歌，我没有发现任何与我的情况直接相关的东西，而且我能找到的任何 StackOverflow 主题都与我的情况无关。如果有人可以向我指出有关此事的一些文件，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:36:19.620

您是否有机会访问标准网络日志，包括 URL 和响应时间？

我遇到了类似的情况，在网上搜索，没有发现任何相关内容，最终决定推出我自己的，我在这篇 SO 帖子中分享了它：

[分析多层分布式 Web 应用程序（服务器端）](https://stackoverflow.com/questions/15178903/profiling-a-multi-tiered-distributed-web-application-server-side)

虽然它远非完美，并且对于某些用例来说可能过于高级，但它让我快速而广泛地了解我试图分析的应用程序大部分时间花在哪里，以及最慢的部分是什么. HTH。

它最好的部分是：

*   它是 100% 独立于平台和编程语言的。
*   这是一个 100% 免费的软件解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:29:17.763

我发现最好的工具是 New Relic。

[http://newrelic.com/](http://newrelic.com/)

我不为他们工作，你尝试他们也没有任何好处。

他们有一个免费级别，您可以开始使用。如果您升级到非免费版本，您可以从字面上通过不同的模型跟踪您的所有请求并进入数据库，告诉您应用程序在每个部分花费了多长时间。这是一个很好的分析工具。

# jquery - 如何防止 jQuery UI Dialog 停止其他脚本？

> ID：11196803
> 
> 赞同：0
> 
> 时间：2012-06-25T20:26:16.000
> 
> 标签：jquery, jquery-ui, captcha

我正在使用 jQuery UI 的 Dialog 选项来呈现一个包含验证码的弹出式注册表单。

当我在另一个页面上呈现注册表单时，验证码显示得很好，但它没有显示在对话框弹出表单上。

我检查了 HTML，无论出于何种原因，只有验证码的“noscript”代码块进入了页面。

我缺少的关于 jQuery UI 对话框的内容是否会导致它干扰其他类似的脚本？

这是表单的代码：

```
<%= error_messages_for(@user) %>
<%= form_for(:user, :url => users_path, :remote => true, :html => {:id => 'create_user_form'}) do |f| %>
    <div class="in-field">
        <%= f.label(:first_name) %>
        <%= f.text_field(:first_name) %>
        <div class="field_valid"></div>
    </div>
    <div class="in-field">
        <%= f.label(:last_name) %>
        <%= f.text_field(:last_name) %>
        <div class="field_valid"></div>
    </div>
    <%= f.date_select(:birthday, :start_year => 1912) %><br />
    image stuff<br />
    <div class="in-field">
        <%= f.label(:username) %>
        <%= f.text_field(:username) %>
        <div class="field_valid"></div>
    </div>
    <div class="in-field">
        <%= f.label(:password) %>
        <%= f.password_field(:password) %>
        <div class="field_valid"></div>
    </div>
    <div class="in-field">
        <%= f.label(:password_confirmation) %>
        <%= f.password_field(:password_confirmation) %>
        <div class="field_valid"></div>
    </div>
    <div class="in-field">
        <%= f.label(:email) %>
        <%= f.text_field(:email) %>
        <div class="field_valid"></div>
    </div>
    <div class="in-field">
        <%= f.label(:email_confirmation) %>
        <%= f.text_field(:email_confirmation) %>
        <div class="field_valid"></div>
    </div>
        <div id="test">  
        <script type="text/javascript" src="http://www.google.com/recaptcha/api/challenge?k=6LfLRdMSAAAAAJ2SYOMT2nNhu2aMw6s3XtD1s5Id"></script>
            </div>
    </div>
    <br />

<%= check_box_tag('eula', 'accepted', false) %> I agree to the <%= link_to('terms of service') %> and <%= link_to('privacy policy') %>.<br />
<%= f.submit 'Submit' %>
<% end %> 
```

这是 UI 弹出代码：

```
$('.modal-dupe').click(function(){
var url = this.href;
$('#modal').remove();
var dialog = $('<div id="modal" style="display:none" class="loading"></div>').prepend('#barhappy_container');
dialog.load(url, function(){
    dialog.dialog({
        modal: true,
        draggable: false,
        position: 'center',
        dialogClass: 'no-title',
        width: 'auto',
        height: 'auto',
        resizable: false,
        open: function(){
                $.getScript('/assets/modal/in-modal-open.js');
        },
        close: function(event, ui){
            dialog.remove();
        }
    });
});
return false; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:20:20.060

事实证明，jQuery dialog() 可以在打开时接受一个函数参数，我曾经通过 $.getScript() 调用必要的 JavaScript 位。

您可以使用手动创建 Recaptcha

```
$('SELECTOR FOR AN EMPTY DIV').each(function () {
    Recaptcha.create('YOUR PUBLIC KEY', this
}); 
```

# php - php。如何使用函数结果作为变量？

> ID：11196805
> 
> 赞同：0
> 
> 时间：2012-06-25T20:26:25.083
> 
> 标签：php, function, variables

此函数返回 url: `<?php get_theme_url(); ?>`。如何将其用作变量？

我试过这段代码，但它不起作用：

```
<?php
 $a = get_theme_url();
 $files = glob( '$a/tariffs/tariff-b*.php' );
 foreach( $files as $file ) {
  include( $file );
  echo $tariff_about;     
?> 
```

* * *

**更新：**

谢谢！我将使用双引号。

但现在两者`<?php get_theme_url(); ?>`和

```
<?php
 $a = get_theme_url();
 $files = glob( $a."/tariffs/tariff-b*.php" );
 foreach( $files as $file ) { include( $file );
  echo $tariff_about; }
?> 
```

返回只是`http://localhost/`。

会是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T20:28:19.740

它不起作用的原因是因为变量没有在单引号内解析。试试这个：

```
$files = glob($a."/tariffs/tariff-b*.php"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T20:27:38.547

将第 2 行更改为：

```
$files = glob( "$a/tariffs/tariff-b*.php" ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-25T20:28:21.867

只需将其分配给一个变量！

```
$files = glob("$a/tariffs/tariff-b*.php"); 
```

`}`最后给一个`foreach`！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-25T20:30:22.877

您可能想尝试分隔变量和字符串或使用双引号而不是单引号。另外，检查路径是否正确，返回的值确实是 URL

```
$files = glob($a."/tariffs/tariff-b*.php"); 
```

# c# - Microsoft.SqlServer.Management.Smo.FailedException

> ID：11196813
> 
> 赞同：1
> 
> 时间：2012-06-25T20:27:00.187
> 
> 标签：c#, .net, sql-server

这让我现在很沮丧！

我最初在 C#.NET 中创建了一个用于恢复/备份数据库的应用程序，它之前确实可以工作，但不知何故它现在无法正常工作；即使我的代码是相同的。

我收到错误消息 Microsoft.SqlServer.Management.Smo.FailedOperationException 并且我一直在寻找此错误消息的解决方案几个小时。

谁能帮我吗？

这是我的代码-

```
 //call restore class
            Restore sqlRestore = new Restore();

            //set the restore type to a database restore 
            sqlRestore.Action = RestoreActionType.Database;

            //select database
            Database db = sqlServer.Databases["database"];

            //stop all process on specific database
            sqlServer.KillAllProcesses("database");

            //Backup device type i.e. backup file 
            BackupDeviceItem deviceItem = new BackupDeviceItem(@"C:\Program Files (x86)\" + _filename, DeviceType.File);

            //add device type to restore class 
            sqlRestore.Devices.Add(deviceItem);

            //if database already exists, replace it 
            sqlRestore.ReplaceDatabase = true;               

            //perform the restore 
            sqlRestore.SqlRestore(sqlServer); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:36:05.377

尝试放置除 Program Files 之外的备份文件。我认为您正在使用 Windows Vista/7。对该文件夹的文件操作需要管理员权限。要检查这是否是问题，我建议您这样做：

```
string path = System.Environment.GetEnvironmentVariable("TEMP").ToString() + "\\" + _filename;
BackupDeviceItem deviceItem = new BackupDeviceItem(path, DeviceType.File); 
```

# c# - 为什么我在使用 FormulaArray 时不断收到 COM 异常

> ID：11196822
> 
> 赞同：2
> 
> 时间：2012-06-25T20:27:36.720
> 
> 标签：c#, excel, exception, com-interop, array-formulas

```
try
{
    sheet1.get_Range("M34").FormulaArray =
    "=SUM(IF(Sheet2!D6:D122=M31,IF(Sheet2!P6:P122>0,Sheet2!I6:I122/SUMIFS(Sheet2!I:I,Sheet2!C:C,Sheet2!C6:C122,Sheet2!D:D,Sheet2!D6:D122)*ROUNDUP(SUMIFS(Sheet2!I:I,Sheet2!C:C,Sheet2!C6:C122,Sheet2!D:D,Sheet2!D6:D122)/Sheet2!Q3,0),0),0))";
}
catch (COMException ex) { MessageBox.Show(ex.Message); } 
```

任何人都知道为什么上面的代码会引发 COM 异常。如果我进入 excel 并按 ctrl+shift+enter，该公式可以正常工作，但是当我的程序写入 excel 时，它会引发异常。我在程序的其他地方使用了 Range.FormulaArray，它运行良好。也许有人可以指出问题，因为我快疯了，似乎其他人也有同样的问题，但没有在线解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T21:38:42.957

我尝试了这项工作，它奏效了。

```
try        
{  
sheet1.get_Range("M33").FormulaArray = "=SUMIFS(Sheet2!I:I,Sheet2!C:C,Sheet2!C6:C122,Sheet2!D:D,Sheet2!D6:D122)";

sheet1.get_Range("M34").FormulaArray = "=SUM(IF(Sheet2!D6:D122=M31,IF(Sheet2!P6:P122>0,Sheet2!I6:I122/Sheet1!M33*ROUNDUP(Sheet1!M33/Sheet2!Q3,0),0),0))";        
}        
catch (COMException ex) { MessageBox.Show(ex.ToString); } 
```

# .net - Winforms：试图读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：11196825
> 
> 赞同：1
> 
> 时间：2012-06-25T20:27:47.487
> 
> 标签：.net, winforms, multithreading, visual-studio-2008, .net-4.0

我有一堆背景事件。

他们都调用了一个日志：

```
private void log(string text, params object[] values)
{
    if (editLog.InvokeRequired)
    {
        editLog.BeginInvoke(
            (MethodInvoker)delegate
            {
                this.log(text, values);
            });
    }
    else
    {
        text = string.Format(text, values) + Environment.NewLine;

        lock (editLog)
        {
            editLog.AppendText(text);
            editLog.SelectionStart = editLog.TextLength;
            editLog.ScrollToCaret();               
        }
    }
} 
```

有时我得到这个，但其他时候没有：

```
System.AccessViolationException was unhandled
  Message=Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
  Source=System.Windows.Forms
  StackTrace:
       at System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at System.Windows.Forms.NativeWindow.DefWndProc(Message& m)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.RichTextBox.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.SendMessage(HandleRef hWnd, Int32 msg, Int32 wParam, Object& editOle)
       at System.Windows.Forms.TextBoxBase.ScrollToCaret()
       at Program1.frmMain.log(String text, Object[] values) in 
       ...
       ...
       ... 
```

PD：并不总是停在这一行，随机将是使用 editLog 方法/属性的三次之一。并不总是抛出异常。有时看起来像东西冻结。但不是主 UI，只是消息流（即：日志看起来不再被调用）

该应用程序是单一表单，具有后台进程。我看不出我做错了什么...

**更新**：

我按照 Mangist 的建议，这是代码（定时器在 100 毫秒触发）。结果相同：

```
private Queue<String> logs = new Queue<String>();
private void timerLog_Tick(object sender, EventArgs e)
{
    lock (logs)
    {
        for (int i = 0; i < logs.Count; i++)
        {
            editLog.AppendText(logs.Dequeue());
            editLog.SelectionStart = editLog.TextLength;
            editLog.ScrollToCaret();
        }             
    }
}

private void log(string text, params object[] values)
{
    text = string.Format(text, values) + Environment.NewLine;

    if (editLog.InvokeRequired)
    {
        editLog.BeginInvoke(
            (MethodInvoker)delegate
            {
                lock (logs)
                {
                    logs.Enqueue(text);
                }
                //this.log(text, values);
            });
    }
    else
    {
        logs.Enqueue(text);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:12:05.930

如果日志记录启动得非常快（在创建表单句柄之前），就会发生这种情况。`editLog.IsHandleCreated == true`在调用控件上的任何方法之前检查。这会有所帮助，否则使用线程安全`Queue<string>`（用`lock (obj) {}`语句包围）并在表单中放置一个计时器以定期读取此队列以获取新日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:50:38.237

嗯，终于找到问题了。删除它可以消除问题（并使用正常的 BeginInvoke，没有技巧、锁等）：

```
editLog.SelectionStart = editLog.TextLength;
editLog.ScrollToCaret(); 
```

我尝试使用[http://nlog-project.org/](http://nlog-project.org/)并且我的第一次尝试工作完全正常（使用[http://nlog-project.org/wiki/RichTextBox_target](http://nlog-project.org/wiki/RichTextBox_target)）。当我设置时 `autoScroll="true"`再次得到相同的错误。这就是我发现问题的方式。

# c++-cli - C++/CLI nullptr 被错误地视为“int”

> ID：11196826
> 
> 赞同：2
> 
> 时间：2012-06-25T20:27:48.837
> 
> 标签：c++-cli

我正在用 C++/CLI (VS2010) 为第三方非托管库编写一个托管包装器。在代码中，我有一个如下所示的方法：

```
if(oldState != _state && UnitStateChanged != nullptr)
    UnitStateChanged(this, gcnew UnitStateChangedEventArgs(oldState, _state)); 
```

“nullptr”产生以下错误：

> 错误 C2446：“！=”：没有从“int”转换为“UnitStateChangedEventHandler ^”

编译器似乎将“nullptr”的任何使用视为“int”，即使是这样简单的事情：

```
Object^ temp = nullptr; 
```

我读过的所有内容都表明编译器会自行解决，但似乎并非如此。是否有我缺少的设置（/clr 或 #pragma managed 除外）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:58:59.527

没有 C++11 编译器的人写道

```
#define nullptr (0) 
```

在头文件的某个地方？

（通常的宏是`#define NULL (0)`）

* * *

这当然是被禁止的。

![标准第 17.6.4.3.1 节，禁止使用关键字作为宏名称](../Images/7c5f6d29a6d2a0617b7c0499e0c2f1c8.png) ![C++11 关键字列表（标准中的表 4）](../Images/3cd1d776c96b8c901e408c8f9c9647af.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T21:37:05.203

看起来您正试图触发一个事件。

在 C# 中，有一个标准的习惯用法用于触发事件，同时防止空引用异常和多线程修改：

```
// C#
EventHandler handler = this.MyEvent;
if(handler != null)
    handler(this, new EventArgs(foo)); 
```

看起来您正试图在 C++/CLI 中重新创建它，但这是不必要的。在 C++/CLI 中，一个事件将发出三个“内部方法”（这是它们的正确名称吗？），分别称为`add`、`remove`和`raise`. 在 C# 中，它只创建`add`并且`remove`没有显式的 raise，这就是为什么我们必须一遍又一遍地编写该代码块的原因。

这是在 C++/CLI 中定义的事件，以及 .NET Reflector 在反编译时看到的内容：

```
// C++/CLI:
public ref class Test
{
public:
    event EventHandler^ MyEvent;
};

// Decompiled to C#:
public class Test
{
    // Fields
    private EventHandler <backing_store>MyEvent;

    // Events
    public event EventHandler MyEvent
    {
        [MethodImpl(MethodImplOptions.Synchronized)] add
        {
            this.<backing_store>MyEvent = (EventHandler) Delegate.Combine(this.<backing_store>MyEvent, value);
        }
        [MethodImpl(MethodImplOptions.Synchronized)] remove
        {
            this.<backing_store>MyEvent = (EventHandler) Delegate.Remove(this.<backing_store>MyEvent, value);
        }
        raise
        {
            EventHandler <tmp> = null;
            <tmp> = this.<backing_store>MyEvent;
            if (<tmp> != null)
            {
                <tmp>(value0, value1);
            }
        }
    }
} 
```

内部`raise`方法正在为您进行空值检查，因此您可以跳过它，直接触发事件而不进行检查。

```
if(oldState != _state)
    this->UnitStateChanged(this, gcnew UnitStateChangedEventArgs(oldState, _state)); 
```

# jquery - 带有 document.ready() 函数的 JQuery 多个脚本。只是 IE 中的第一部作品

> ID：11196829
> 
> 赞同：1
> 
> 时间：2012-06-25T20:27:52.477
> 
> 标签：jquery, internet-explorer, scripting

我的新网站存在以下问题：[http](http://clemenshamann.de) ://clemenshamann.de ：

如果页面以 firefox/chrome 等方式加载，一切正常。现在，如果页面在 IE 8 或 9 中加载，例如页面加载，但只有在标题中声明的第一个脚本有效（它使背景图像淡化）。如果我按 F12 打开 IE 的开发者工具，接下来的两个脚本就会开始工作。任何脚本都有自己的 document.ready() 函数。

有没有人建议为什么会导致这种情况？

这是一些代码：（您可以在上面给定的域中观看孔代码）

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<!--    Check for IE and set global variable-->
    <!--[if IE]>
    <script type="text/javascript">
      var is_ie = true;
    </script>
    <![endif]-->
    <script type="text/javascript">
       if (typeof is_ie == "undefined") {
           var is_ie = false
       }
    </script>

<!--    Enable bg image fade for all browsers but IE   -->
    <script type="text/javascript" src="js/bg_fade_resize.js"></script>
<!--    Portfolio Slider Script-->
    <script type="text/javascript" src="js/portfolio_slider.js"></script>
<!--    Seitenscrolling-->
    <script type="text/javascript" src="js/scrolling.js"></script> 
```

如果您需要更多信息，请询问我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:36:50.697

看来`console.log`您的 javascript 中有一些命令。IE 仅`console`在开发人员工具打开时定义对象（它始终在 Firefox 和 Chrome 中定义）。

您将需要删除这些`console.log`行或将它们包装在一个条件中：

```
if(console) console.log("message"); 
```

# javascript - 如何停止我的 xml 文件在刷新时重复但更新？

> ID：11196831
> 
> 赞同：1
> 
> 时间：2012-06-25T20:28:00.170
> 
> 标签：javascript, xml

我有这个包含文本初始化的 xml 文件。

IE

**嗨，我的名字是史蒂文**

当我添加一个**Setinterval**以每 10 秒加载一次 xml 文件时，我得到

**嗨，我的名字是 stevenHi 我的名字是 stevenHi 我的名字是 stevenHi 我的名字是 steven** 这会继续每 10 秒重复一次

这是我的 javascript xml 函数

```
myLoadInteval = setInterval(Xml, 10000);

function Xml(){ 

$(document).ready(function() {  
                  $.ajax({  
                         type: "GET",  
                         url: "http://www.mobilefriendlywebapps.co.uk/tayloredtest1/note.xml",  
                         dataType: "xml",  
                         success: parseXml  
                         });  
                  function parseXml(xml) {  
                  $(xml).find("menu").each(function() {  
                                           //find each instance of loc in xml file and wrap it in a link 
                                           $("div#site_list").append( $(this).find("cd").text() );  
                                           $("div#treatments").append( $(this).find("cd1").text() ); 
                                           $("div#preparation").append( $(this).find("cd2").text() );
                                           $("div#products").append( $(this).find("cd3").text() );
                                           $("div#info").append( $(this).find("cd4").text() );
                                           $("div#price").append( $(this).find("cd5").text() );
                                           $("div#promo").append( $(this).find("cd6").text() );
                                           });  
                  }  

                  }); 
```

}

如何在加载新的 xml 之前删除旧的 xml？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:33:45.903

而不是使用 append() 使用 html()

IE

```
$("div#site_list").html( $(this).find("cd").text() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:37:10.073

如果我理解正确，您将获得重复的内容，因为您每次都附加到 HTML 元素，而不是先清空它们。如果要替换内容，请执行此操作，而不是追加。所以：

```
$("div#site_list").append( $(this).find("cd").text() ); 
```

...会成为

```
$("div#site_list").text($(this).find("cd").text()); 
```

或者，如果您的 XML 包含受 CData 保护的 HTML 标记，请改用该`html()`方法。

# c# - 获取与驱动程序文件详细信息窗口相同的驱动程序详细信息

> ID：11196840
> 
> 赞同：1
> 
> 时间：2012-06-25T20:28:25.310
> 
> 标签：c#, windows

我正在尝试复制下面的确切文件列表，该列表位于设备管理器的“驱动程序详细信息”下，我提出了以下代码，但我无法显示此列表。任何帮助都很棒。

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT * FROM Win32_PnPSignedDriver");

foreach (ManagementObject obj in searcher.Get())
{
    if(obj["DriverProviderName"] != null)

        foreach (PropertyData prop in obj.Properties)
        {
            File.AppendAllText(@"C:\driverusers.txt", prop.Name +"\t" +prop.Value+"\n");
            Console.WriteLine("{0}: {1}", prop.Name, prop.Value);
        }
} 
```

![驱动程序文件详细信息](../Images/c65476b9009f617114aa3050cccf2e4b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:52:41.667

看看这个，有人在做非常相似的事情。

[http://www.dreamincode.net/forums/topic/63149-devices-in-c%23/](http://www.dreamincode.net/forums/topic/63149-devices-in-c%23/)

我能想到的第一件事就是在注册表中寻找它。（我认为他们甚至在上面的文章中说明了这一点）。

另外，检查一下：

[http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I](http://www.codeproject.com/Articles/17973/How-To-Get-Hardware-Information-CPU-ID-MainBoard-I)

# ios - UIWebView：媒体播放器旋转视图控制器

> ID：11196843
> 
> 赞同：0
> 
> 时间：2012-06-25T20:28:36.720
> 
> 标签：ios, uiwebview, rotation

我在使用 webview 时遇到问题。我的应用程序目前是一个纵向应用程序，但是当媒体播放器在我的应用程序内的 web 视图中加载时，用户可以旋转播放器，这也旋转了我的视图控制器。我知道我可以在播放器出现和消失时收到通知，但是有没有办法防止它首先旋转控制器？

似乎没有人有答案。我有所有标准的“除非我告诉你，否则不要旋转”方法和 plist 值，但它仍在旋转。只有当我加载 webview 并且媒体播放器加载它时。如果我旋转我的设备，媒体播放器也会随之旋转，这感觉很自然，但是当我回到 webview 视图控制器时，它会旋转，这并不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:28:45.473

在 info.plist 中添加这个键：

UISupportedInterfaceOrientations 并将其设置为 UIInterfaceOrientationPortrait

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T03:08:37.900

好吧，这是一个盲目的镜头。我已经使用这个技巧来强制系统调整到所需的方向，在 webview 出现或播放器消失时添加以下行：

```
UIViewController *viewController = [[UIViewController alloc] init];
[self presentModalViewController:viewController animated:NO];
[self dismissModalViewControllerAnimated:NO]; 
```

尝试其中一些方法，或者如果不起作用，则尝试 didAppear 或 didDisappear。我知道它看起来像垃圾，但有时有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T00:47:43.117

这个问题似乎没有正确的答案。

# c++ - 运行时的 C++ 变量类型选择

> ID：11196851
> 
> 赞同：2
> 
> 时间：2012-06-25T20:29:21.820
> 
> 标签：c++

我正在升级为特定硬件接口编写的旧应用程序。我现在需要在现有应用程序中添加对现代硬件的支持。

为此，我想为每种硬件类型创建一个类，并在用户选择其系统中的硬件时为一种类型或另一种类型分配一个变量。

例如：

Class`HardwareType1`和 Class`HardwareType2`都存在具有相同的成员函数。

```
object HW;  
if (userHwType = 1)  
    // initialize HW as a HardwareType1 class
}  
else{  
    // initialize HW as a HardwareType2 class  
} 
```

现在`HW.doSomething()`，每次与硬件交互时，我都可以在没有硬件类型条件的情况下使用整个代码。

我敢肯定这是非常基本的，但老实说，我什至不知道这叫什么，也不知道要搜索什么术语。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-25T20:37:51.897

创建一个抽象基类，并从中派生两个具体类：一个实现 type1，另一个实现 type2：

```
class Hardware
{
public:
    virtual ~Hardware() {};
    virtual void doSomething() = 0;
};

class Hardware1: public Hardware
{
public:
    void doSomething() { // hardware type1 stuff. }
};

class Hardware2: public Hardware
{
public:
    void doSomething() { // hardware type2 stuff. }
}; 
```

然后创建必要的实例：

```
std::unique_ptr<Hardware> hardware(1 == userHwType ? new Hardware1() : 
                                                     new Hardware2());

hardware->doSomething(); 
```

* * *

如果您的编译器不支持 C++11，那么[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)您将无法使用。另一种智能指针将[`boost::scoped_ptr`](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/scoped_ptr.htm)（或[`boost::shared_ptr`](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/shared_ptr.htm)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T20:47:53.627

将多态性与通用抽象基类一起使用，如下所示：

```
class HardwareBase
{
public:
    virtual void Open() = 0;
    virtual void Close() = 0;
    virtual ~HardwareBase() {};
}; 
```

然后推导出您的具体硬件类型：

```
class HardwareType1 : public HardwareBase
{
public:
    virtual void Open() {...}
    virtual void Close() {...}
}; 
```

并选择所需的硬件实例：

```
std::unique_ptr<HardwareBase> hw;  
if (userHwType == 1)  
    hw.reset(new HardwareType1());
else
    hw.reset(new HardwareType2());

// And use it like this:
hw->Open(); 
```

请注意，您现在需要一个指向所选对象实例的指针。使用 unique_ptr 在退出时自动删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T20:43:20.533

要搜索的术语是*polymorphism*；这是通过通用接口与不同类型交互的通用术语。

在 C++ 中，如果您需要在运行时选择行为，通常的方法是定义一个*抽象接口*，它充当*具体类型的**基类*，使用*虚函数*- 在运行时根据真实类型选择要调用的函数的对象。

 **```
// Abstract interface
class Hardware {
public:
    virtual ~Hardware() {}  // needed to safely delete objects

    virtual void doSomething() = 0;  // must be implemented by each concrete type
};

// One concrete type
class HardwareType1 : public Hardware
{
    HardwareType1() { /* initialise */ }
    void doSomething() { /* implementation for this type of hardware */ }
};

// Another concrete type
class HardwareType2 : public Hardware
{
    HardwareType2() { /* initialise */ }
    void doSomething() { /* implementation for this type of hardware */ }
}; 
```

现在您可以选择创建哪个，然后使用抽象接口进行交互：

```
// Create the correct type, depending on user input
std::unique_ptr<Hardware> hw
    ((userHwType == 1) ? new HardwareType1 : new HardwareType2);

// Do the right thing depending on the type
hw->doSomething(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T20:37:33.063

您可以搜索工厂方法。这是您尝试实现的模式的名称**

# video - Http Live Streaming EXT-X-STREAM-INF，计算 BANDWITH

> ID：11196852
> 
> 赞同：2
> 
> 时间：2012-06-25T20:29:24.203
> 
> 标签：video, ffmpeg, http-live-streaming, bitrate

最初，我试图找到在其他非 Mac 平台上进行 HLS 分段的可能方法。

为 HLS 分割视频涉及以下步骤：

1) 将编码的视频分割成段

2) 创建播放列表 (.m3u8) 文件，其中仅包含当前再现的片段列表，包括每个片段的持续时间（以秒为单位）

3) 创建一个变体播放列表，其中包含所有演绎版的所有播放列表的相对路径，其中包含有关 BANDWITH 的信息，根据 HTTP Live 流协议为：

*该值是每秒位数的十进制整数。它必须是出现或将出现在播放列表中的每个媒体片段的总比特率的上限（计算为包括容器开销）。*

最新版本的 ffmpeg 包括分割视频的可能性。但是 ffmpeg 不能创建 m3u8 文件。创建简单的播放列表不是问题。但创建变体播放列表可能是：

因此，Mac 上的 variantplaylistcreator 创建了这些，以某种方式计算比特率并将基于该值的值放入 BANDWITH 标签。

我尝试了许多不同的方法，但我无法获得与 variantplaylistcreator 完全相同的数字，此时我找不到任何信息它如何准确计算这些值以及它使用什么算法。我的数字很接近，但仍然略有不同。

从理论上讲，这应该不是问题，但重点是-我不确定。也许 BANDWITH 信息对于完美的视频播放应该是精确的，也许不是必须的。

无论如何，我真的很好奇 variantplaylistcreator 究竟是如何计算它们的：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:40:49.057

我尝试使用最新版本的 Http Live Streaming 命令行工具，并将结果与​​我们当前使用的版本进行比较，结果数字略有不同。因此，这些值不必是精确的。

我想我会没事的，如果我把所有片段的平均比特率值放在那里......

我稍后会测试这个理论，我希望它会奏效......

# java - 使用 gdx render() 方法的 libgdx 出现 NullPointerException

> ID：11196855
> 
> 赞同：3
> 
> 时间：2012-06-25T20:29:36.000
> 
> 标签：java, desktop-application, desktop, libgdx

开始制作游戏。这是我的一些代码。

```
package games.tribe.screens;

import games.tribe.model.World;
import games.tribe.view.WorldRenderer;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.graphics.GL10;

public class GameScreen implements Screen {

private World world;
private WorldRenderer renderer;

/** This was the bit I'd missed --------------------------------------**/
@Override
public void show() {
    world = new World();
    renderer = new WorldRenderer(world);
}
/**------------------------------------------------------------------**/

@Override
public void render(float delta) {
    Gdx.gl.glClearColor(0.1f, 0.1f, 0.1f, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    renderer.render();
}

@Override
public void resize(int width, int height) {
    // TODO Auto-generated method stub

}

@Override
public void hide() {
    // TODO Auto-generated method stub

}

@Override
public void pause() {
    // TODO Auto-generated method stub

}

@Override
public void resume() {
    // TODO Auto-generated method stub

}

@Override
public void dispose() {
    // TODO Auto-generated method stub

}

} 
```

这是 WorldRenderer 类：

```
package games.tribe.view;

import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.graphics.glutils.ShapeRenderer;
import com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
import com.badlogic.gdx.math.Rectangle;

import games.tribe.model.Block;
import games.tribe.model.TribalHunter;
import games.tribe.model.World;

public class WorldRenderer {

private World world;
private OrthographicCamera cam;

/**for debug rendering**/
ShapeRenderer debugRenderer = new ShapeRenderer();

public WorldRenderer(World world) {
    this.world = world;
    this.cam = new OrthographicCamera(10, 7);
    this.cam.position.set(5, 3.5f, 0);
    this.cam.update();
}

public void render()  {
    //render blocks
    debugRenderer.setProjectionMatrix(cam.combined);
    debugRenderer.begin(ShapeType.Rectangle);
    for(Block block : world.getBlocks()) {
        Rectangle rect = block.getBounds();
        float x1 = block.getPosition().x + rect.x;
        float y1 = block.getPosition().y + rect.y;
        debugRenderer.setColor(new Color(1, 0, 0, 1));
        debugRenderer.rect(x1, y1, rect.width, rect.height);
    }
    //render hunter
    TribalHunter hunter = world.getHunter();
    Rectangle rect = hunter.getBounds();
    float x1 = hunter.getPosition().x + rect.x;
    float y1 = hunter.getPosition().y + rect.y;
    debugRenderer.setColor(new Color(0, 1, 0, 1));
    debugRenderer.rect(x1, y1, rect.width, rect.height);
    debugRenderer.end();

}
} 
```

这是我将其作为桌面应用程序运行时遇到的异常：

```
Exception in thread "LWJGL Application" java.lang.NullPointerException
at games.tribe.screens.GameScreen.render(GameScreen.java:19)
at com.badlogic.gdx.Game.render(Game.java:46)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:202)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131)
AL lib: ReleaseALC: 1 device not closed 
```

gdx.Game.render 的第 46 行是这个方法：

```
@Override
public void render () {
    if (screen != null) screen.render(Gdx.graphics.getDeltaTime());
} 
```

任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T21:03:40.790

在`GameScreen`'s`render()`方法中，有没有`renderer`被初始化？如果没有，这可能会导致问题。

**编辑：**根据错误的前两行，您遇到的问题是`NullPointerException`on line `19`of the class `GameScreen`。仅当`NullPointerException`对象本身用于某些操作时才会发生，`null`因为它可能尚未初始化。

的线`19`是`GameScreen`：

```
renderer.render(); 
```

...但是该对象`renderer`尚未在任何地方初始化，因此目前`null`是默认值。为避免出现此错误，您需要`renderer`在运行该行代码之前初始化对象。也许是这样的：

```
@Override
public void render(float delta) {
    Gdx.gl.glClearColor(0.1f, 0.1f, 0.1f, 1);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

    renderer = new WorldRenderer();
    renderer.render();
} 
```

我不熟悉 libgdx，所以我不能确定这就是 a`WorldRenderer`的初始化方式，但你需要做一些类似的事情。我希望这有帮助。

# jquery - 谷歌地图->如何在用户单击按钮后使地图变暗并完全禁用它

> ID：11196856
> 
> 赞同：1
> 
> 时间：2012-06-25T20:29:37.920
> 
> 标签：jquery, google-maps-api-3

因此，我之前创建了许多地图应用程序，但我目前正在开发的应用程序实际上与它有一些交互。

用户可以单击标记并接受它们，并在单击地图外部但在同一页面上的按钮后保存数据。

那时我正在显示一堆关于地图外一些 div 中发生的事情的数据。

我现在想要发生的是，我希望地图变暗，就像透明的黑色一样，让它看起来不再起作用并一起禁用地图。

如果您曾经使用过fancybox，它会类似于fancybox 拉起时的背景屏幕。

任何关于此的想法或想法将不胜感激我一直在寻找，但实际上还没有找到任何方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:39:59.357

我不妨用小提琴来回答它。

jsFiddle -> [http://jsfiddle.net/HB324/](http://jsfiddle.net/HB324/)

**HTML ->**

```
<div id="hide_map">
  <a href="#"> Click Me To Hide Map </a>
</div>
<div id="map_canvas"></div> 
```

**CSS ->**

```
#map_canvas{
 position:relative;
 height:300px;
 width:300px;    
}

.overlay{
  position:absolute;
  top:0;
  left:0;    
  width:100%;
  height:100%;
  background:rgba(0,0,0,.5);
} 
```

**JavaScript ->**

```
var geocoder;
var map;
var latlng;
jQuery(document).ready(function() {

        geocoder = new google.maps.Geocoder();
          var address = 'United States';
          geocoder.geocode( { 'address': address}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              latlng=results[0].geometry.location;
              var myOptions = {
                zoom: 16,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.HYBRID
              }
              map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
              var marker = new google.maps.Marker({
                  map: map,
                  position: latlng,
                  title:address
              });
            }
          });
    }); 
```

*编辑：忘记 CSS，添加 CSS*

# javascript - 避免 JavaScript dojo 中的重复对象

> ID：11196858
> 
> 赞同：3
> 
> 时间：2012-06-25T20:29:52.643
> 
> 标签：javascript, memory, object, dojo, memory-leaks

我正在创建一个 DOM 元素的焦点对象来处理各种后续事件。但是，在元素失去焦点后，我需要以某种方式销毁对象，以便将来对元素的关注创建一个不引用原始对象的新对象。

现在，我遇到的这个问题是随后的点击会创建另一个对象，并且所有函数都被调用了两次。再次单击，三下。等等。下面的代码显示了单击事件和对象创建的示例。

任何帮助，将不胜感激。

```
 var videoTopicsHandler = DojoOn(videoTopicsInput, 'focus', function(e){ 
        dropKeyPress(this, 'video-topics');
    });
    var dropKeyPress = function(input, ulId, scroll) {
        var handler;

        obj = new dropDownObj(ulId, scroll); 
        obj.attachEvents(obj, handler, input);
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T03:51:30.383

尝试这个：

```
var obj = null;
var dropKeyPress = function(input, ulId, scroll) {
        var handler;
        if(obj !== null) obj.destroyRecursively();
        obj = new dropDownObj(ulId, scroll); 
        obj.attachEvents(obj, handler, input);
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:56:55.557

您可能希望缓存您创建的那些对象，并在元素重新获得焦点时从缓存中提取它们，而不是删除它们。优点：速度更快，无需在每次重新聚焦时重新生成对象并销毁它们；缺点：未使用的对象会占用内存，但如果您足够快地转到下一页，或者这些对象的数量很少并且重新聚焦经常发生，所以无论如何您都需要它们，这可能是无关紧要的。

# java - Java：不能调用重载的构造函数

> ID：11196861
> 
> 赞同：2
> 
> 时间：2012-06-25T20:30:03.913
> 
> 标签：java, constructor

在这里，我试图在我的 main() 程序中满足某些条件后调用重载的构造函数，该条件由变量 a 给出。当我只使用默认构造函数时，代码工作正常，但我需要在某些时候调用重载构造函数，但它会失败。以下是代码：

重载构造函数：

```
public Paddle(int a){

   if(a ==1){
       ImageIcon ii = new ImageIcon(this.getClass().getResource(paddle1));
       image = ii.getImage();
   }
   else {
       ImageIcon ii = new ImageIcon(this.getClass().getResource(paddle2));
       image = ii.getImage();
   }
    width = image.getWidth(null);
    height = image.getHeight(null);
  resetState();
  }

//      further initialization -- 
```

默认构造函数：

```
 public Paddle(){

        ImageIcon ii = new ImageIcon(this.getClass().getResource(paddle));
        image = ii.getImage();

        width = image.getWidth(null);
        height = image.getHeight(null);
        System.out.println(height+" "+width);
        resetState();
 } 
```

提前感谢您的帮助，可以提出进一步的查询，但我认为这段代码有一些问题。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:34:21.150

### 回答

您没有`image`在重载的构造函数中设置实例变量。

### 正确的方式

您这样做的方式违反了[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)（不要重复自己）！

最好的方法是让`no arg`构造函数调用重载的构造函数，然后将实例变量设置`image`在一个地方。

```
public Paddle(final int i) 
{ 
   if (i==1) { this.image = one thing } 
   else 
   { this.image = another thing } 
}

public Paddle() { this(0); } 
```

更好的方法是将资源传递给单个构造函数并完成它，而无需查看所有代码，这看起来过于复杂。

# django - Django - 时间戳单元测试

> ID：11196862
> 
> 赞同：1
> 
> 时间：2012-06-25T20:30:03.930
> 
> 标签：django, unit-testing, django-unittest

我的应用程序根据作为自定义 URL 的输入提供的日期和时间提供状态。通常它会使用当前时间（datetime.now()），但我想创建单元测试来验证未来的时间。但是，我在使用时间戳作为测试变量时遇到了问题。想法？这是到目前为止的代码：

网址.py：

```
urlpatterns = patterns('',
   (r'^/(\w+)/status/$', 'app.views.fetch_status'),
   # Normally:
   #(r'^/(\w+)/status/$', 'app.views.fetch_status', {'timestamp': datetime.now() }),
   ... 
```

视图.py：

```
def fetch_status(request, slug, timestamp):
    ... 
```

测试.py：

```
class TimeTests(TestCase):
    fixtures = ['hours.json']

    def testSchedule(self):
        timestamp = datetime(2012, 6, 19, 5, 0)
        client = Client()
        response = client.get('/service/status/', {'timestamp': timestamp})
        self.assertEqual(response.context['status'], 'closed') 
```

结果：

```
TypeError: fetch_status() takes exactly 2 arguments (1 given) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:40:18.263

为什么您将模式更改为不包含时间戳参数？从它的外观来看，并根据您的错误，该函数需要一个参数，但您并没有真正提供该参数，因为您更改了模式。

# c++ - 仅包括头文件的实现代码如何存在

> ID：11196866
> 
> 赞同：3
> 
> 时间：2012-06-25T20:30:12.393
> 
> 标签：c++, header, include

这是一个理论上的怀疑。假设你有一个只有两个文件的小库：lib.h。lib.cpp 的头文件，实现代码。按照惯例，在 C++ 中，我们将 lib.h 包含在 lib.cpp 中，也就是说，lib.h“不知道”“lib.cpp”的存在。因此，要在程序中使用我们的库，假设：myprogram.cpp 和 myprogram.h，我必须只包含“lib.h” 那么，我的程序将如何加载头文件的实现？如果头文件“不知道”实现文件的存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:31:19.507

例如，您必须告诉链接器有关该`lib`文件的信息`lib.lib`或`lib.so`

`.cpp`文件将被编译为对象文件，然后编译为`.lib`或`.so`文件。在项目中，`myprogram.cpp`您必须通知链接器有关`.lib/.so`来自`lib.cpp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:32:24.320

通常，您将实现编译到一个库中并将您的程序链接到该库。因此，除非实现代码实际上位于标头中，或者位于标头包含的文件中并因此也分发，否则您断言“实现代码仅包含头文件”是错误的。

# ios4 - UITextField：无法输入文本，但表情符号、复制/粘贴和退格很好

> ID：11196868
> 
> 赞同：6
> 
> 时间：2012-06-25T20:30:21.357
> 
> 标签：ios4, uitableview, uitextfield, xcode4.3, uitextfielddelegate

我觉得这很奇怪，我创建了自己的继承自 UIAlertView 的类。在这个类中，我添加了一个 UITableView 作为子视图，单元格包含一个 UILabel 和一个 UITextField。

该类实现：UITableViewDelegate、UITableViewDataSource 和 UITextFieldDelegate，

在 cellForRowAtIndexPath 中，每个 cell.uiTxtField.delegate 都设置为 self。

在模拟器和真实的 iPhone 设备上都会发生以下情况：

*   当我在 UITextField 中设置指针/手指时，键盘会弹出并 触发**textFieldDidBeginEditing**，这很好，符合预期。

*   当我离开 UITextField 时，会触发**textFieldDidEndEditing**，这也很好，符合预期。

*   但是当我开始输入文本时，光标停止闪烁，但没有向 UITextField 输入文本。

*   我可以通过在包含文本的 UITextField 中按住指针/手指来**复制和粘贴文本，选择复制然后将其粘贴到另一个 UITextField（或相同）中。**

*   **退格**工作正常。

*   它还让我输入**符号和表情符号**等。

*   我唯一不能输入的是字符/字母和数字

*   返回按钮**不会**触发**textFieldShouldReturn**

由于触发了 textFieldDidBeginEditing 和 textFieldDidEndEditing 我假设我的委托设置很好，但我不明白为什么我不能输入文本以及为什么 textFieldShouldReturn 没有被触发。

[这](https://stackoverflow.com/questions/11194734/uitextfield-keyboard-cant-type-anything)可能是相关的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T12:51:43.757

你把它放在你的自定义类的“init”方法中了吗？

尝试将这样的代码放入您的实现文件中...

```
@implementation CustomAlertClass <UITextFieldDelegate>

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
    //
    self.YourTextField.delegate = self;
}
return self;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T02:05:41.970

**简短回答：**确保您没有任何与 UITextField 上的“编辑”属性混淆的代码。

我有同样的症状，我*确实*正确设置了委托，并且 textFieldDidBeginEditing 和 textFieldDidEndEditing 被调用，但 textFieldShouldReturn 和 shouldChangeCharactersInRange 没有被调用。我也无法输入任何字符，但我可以将粘贴复制到文本字段中。在我的情况下，我也碰巧将文本字段放在 UITableView 中的单元格内。我的情况略有不同，删除按钮不起作用。

我出错的地方是我没有在我的单元格中使用原始 UITextField，我有自己的 UITextField 子类。我的子类有一个属性“isEditing”，我在 UITextFieldDelegate 方法中对其进行了修改，并用于确定在选择文本字段时如何滚动表格视图。这覆盖了 UITextField 上的 'isEditing' 方法，用作 UITextField 'editing' 属性的获取器。一旦我摆脱了我的子类 isEditing 属性，一切都按预期运行。

# html - 3个验证错误-不确定如何纠正

> ID：11196870
> 
> 赞同：-2
> 
> 时间：2012-06-25T20:19:02.230
> 
> 标签：html, validation

1.  第 10 行，第 43 列：元素链接上属性 href 的错误值 FRSH Studio：路径组件中的空格。使用 %20 代替空格。`<link rel="pingback" href="FRSH Studio" />` --- 据我了解，这是从我在 Wordpress 中的设置中提取的。当我将设置更改为包含 % 时，我收到一条错误消息，指出“路径组件包含一个百分号，后面没有两个十六进制数字。” 我该如何解决？

2.  第 146 行，第 7 列：显示主体的结束标签，但有未闭合的元素。`</body>` --- 我相信这是指`<div id="container">`...

3.  第 54 行，第 20 列：未闭合元素 div。`<div id="container">` --- 当我关闭`</div><!-- end container -->`在页脚中使用的容器时，我被告知这是一个流浪标签。应该在哪里`</div><!-- end container -->`？

不知道为什么这是从 Wordpress Stackexchange 发送出去的。该站点验证为 HTML。只有在通过 w3c 的验证器使用 URI 验证站点（即 Wordpress）时，才会出现这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:32:43.173

将完整代码放入 HTML Tidy 中并使其有效。使用这个：http: [//infohound.net/tidy/](http://infohound.net/tidy/)

**HTML Tidy**是一个用于检查和清理 HTML 源文件的工具。它对于查找和纠正深度嵌套的 HTML 中的错误或使怪诞的代码再次清晰易读特别有用。

此在线版本使您无需在 PC 上安装客户端工具即可使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T00:52:20.950

您的网站似乎生成了错误的 HTML 页面。

1) “href”的值应该是一个 URL。

2）如果你有一个“div”开始标签，那么也需要一个“div”结束标签。这可能会丢失。

3）需要查看整个来源才能有所帮助。

正如有人建议的那样，您可以使用[http://validator.w3.org/](http://validator.w3.org/)。另一个验证器（适用于 Windows，因此它是离线的，它可以做更多的事情）是[http://www.htmlvalidator.com/上的 CSE HTML Validator](http://www.htmlvalidator.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T20:35:29.793

“流浪标签”错误可能是由于页面被解析为 XHTML，其中每个开始标签（例如`<!-- end container -->`）都需要一个结束标签。

最好的 HTML 验证器在这里：

[http://validator.w3.org/](http://validator.w3.org/)

正如其他人提到的那样，这将提供一个使用 HTML Tidy 进行清理的选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T22:53:12.333

**1) href 必须是有效的链接。**

```
<link rel="pingback" href="http://frshstudio.com" /> 
```

**2/3）也许你把它关在了错误的地方？**

可以发一下代码吗？

# ios - 在 UINavigationController 上推送许多视图控制器时出现内存问题

> ID：11196871
> 
> 赞同：3
> 
> 时间：2012-06-25T20:30:27.610
> 
> 标签：ios, uiimageview, automatic-ref-counting, uistoryboard

我正在为 iPad 制作一本交互式书籍，并正在使用`UINavigationController`它来实现页面和下一个页面之间的导航。当用户翻页时，下一页被推送到导航堆栈的顶部。

我现在进入应用程序的第 15 页，当我尝试从第 14 页转到第 15 页时应用程序崩溃。控制台中没有错误消息，设备的崩溃日志中也没有任何内容。

故事板中每个视图控制器的场景都`UIImageViews`显示了 5MB 到 20MB 之间的图像。视图控制器的`viewDidLoad`方法只被调用一次。所有应用程序资产的总大小低于 200B。我正在使用ARC。

我已经使用 Instruments 的 Memory Monitor 运行了该应用程序。每次翻页，应用程序的 Real Memory 消耗增加约 80MB，达到 800MB 时会崩溃（设备为 iPad 3）。

*   **为什么会有如此巨大的内存消耗？**这是因为 Storyboard 场景中的 UIImageView 缓存了图像吗？

*   `UINavigationController`使用 a和 ARC时释放内存的最佳方法是什么 ？

我尝试在视图控制器的方法中添加将所有视图控制器的子视图设置为 nil `viewDidDisappear:`，但内存消耗保持不变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T20:38:05.543

当您使用 UINavigationController 时，您推送的每个 ViewController 都会永远留在内存中（嗯，直到您的应用程序退出），除非您的用户按下该特定 ViewController 上的后退按钮。它保留了一堆 ViewController——可见的在顶部。

所以简单的答案是*不要为此使用 UINavigationController*。我建议构建自己的 ViewController 来“知道”下一页和上一页，并在需要时手动加载和删除它们。这样，您可以确保您一次只有一个页面在内存中（除了在转换期间 - 也许您可以将此动画用于转换[http://cocoacontrols.com/platforms/ios/controls/xbpagecurl](http://cocoacontrols.com/platforms/ios/controls/xbpagecurl)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T20:34:49.987

您可能不想为此目的使用 UINavigationController。你真的想要一个视图控制器来管理你的所有页面，并在同一个视图上呈现新页面，同时删除旧页面。

# extjs - Extjs 4.0.7，编辑器网格 - 如何获取更新的单元格值？

> ID：11196873
> 
> 赞同：5
> 
> 时间：2012-06-25T20:30:33.103
> 
> 标签：extjs, grid, extjs4

我需要在控制器中获取（检索）更新的单元格值。(MVC)

所以我尝试了这个，

```
var modified = this.getItemGrid().getStore().getUpdatedRecords();
console.log(modified); // return [] empty array

var modified = this.getItemList_Store().getUpdatedRecords();
console.log(modified); // return [] empty array 
```

但即使我更新了一些单元格值，它也总是返回空数组。

有人知道我做错了什么吗？

这是我的部分视图代码，

```
Ext.define("App.view.orders.ItemList_view", {
    extend: "Ext.grid.Panel",
    alias: "widget.itemList_view",
    plugins: [
            Ext.create('Ext.grid.plugin.CellEditing', {
                clicksToEdit: 1
            })
    ],
    initComponent: function () {
        this.store = "ItemList_store";
        this.columns = [
            {
                xtype: 'checkcolumn', text: "Ship", width: 50, dataIndex: "DR"
            },
            { header: "test", width: 100, dataIndex: "test",
                editor: {
                    xtype : 'textfield'
                }
            }
        ];

        this.selModel = Ext.create("Ext.selection.CheckboxModel");
        //this.selModel = Ext.create("Ext.selection.CellModel"); // It does not works either.

        this.callParent(arguments);
    },
    .
    .
    . 
```

谢谢！

[编辑]

非常感谢您的回答！我还有一些关于编辑器网格的问题。

它与 Ext3 有很大不同。所以我现在很困惑:(

**Q1。如何收集已编辑的记录数据（单击按钮）？**

更改网格单元格后触发的事件。但是我想在单击“更新已编辑单元格”按钮后收集已编辑的网格记录，并且我想一次全部更新。

在 Ext3 中，我确实是这样的，

```
(button) click : function(){
    var modified = mygridStore.getModifiedRecords();

    var recordsToSend = [];
    Ext.each(modified, function(record){
        recordsToSend.push(record.data);
    });

    var grid = Ext.getCmp('grid');
    grid.el.mask('Updating','x-mask-loading');
    grid.stopEditing();

    recordsToSend = Ext.encode(recordsToSend);

    Ext.Ajax.request({
        url : '/test/test',
        params : {
            data : recordsToSend
        },
        success : function(response){
            grid.el.unmask();
            alert(response.responseText);
            mygridStore.commitChanges();
        },
        failure : function(response){
            mygridStore.rejectChanges();
        }
    });
} 
```

如何更改 Extjs4 的代码？

**Q2。我仍然不知道如何找出更改的校验列。**

我试过了，但我不适用于 checkcolumn（因为我在更改复选框后进行了测试）

```
// grid coumn
{
 xtype: 'checkcolumn', header: "My Check Column", width: 50, dataIndex: "CH"
} 
```

-

```
// in control
'myGrid': {
    validateedit: function (plugin, edit) {
        console.log(edit);
    },
    checkchange: function (plugin, edit) {
        console.log(edit);
        console.log(edit.value);
    }
} 
```

**Q3。当我单击要编辑的单元格时，会在 -_-; 中显示一些 HTML 标记；**

![在此处输入图像描述](../Images/c10bce9b656dc638bc68703243b7a1a0.png)

***我非常感谢您的帮助。非常感谢您宝贵的时间！***

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-25T21:27:36.357

编辑器（单元格编辑器或行编辑器）在您完成编辑之前不会将其值提交到存储区 - 这意味着`ENTER`通过单击页面上的其他位置或单击行编辑器表单上的保存按钮来按下或模糊活动的单元格编辑器。

如果您在编辑器中读取更新值的目的是执行某种验证，我建议`validateedit`您只需在网格控制器中收听事件，如此[处](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.plugin.CellEditing-event-validateedit)所述。

此事件传递给您的处理程序的第二个参数包含大量关于编辑的数据，您可以使用这些数据执行验证。如果编辑没有通过您的验证，您可以`false`从处理程序返回，并且 celleditor 中的值将恢复为原始值。该`validateedit`事件是从编辑器网格本身触发的，因此您可以在控制器中为它添加一个事件处理程序，如下所示：

```
Ext.define('MyApp.controller.MyController', {

    init: function() {

        this.control({

            'mygridpanel': {

                validateedit: function(plugin, edit) {

                    // silly validation function    
                    if (edit.value != 'A Valid Value') {
                        return false;
                    }
                },

            },

        });

    },

}); 
```

但是您应该查看上面的链接以查看我命名的第二个参数中可用的所有不同对象`edit`。

该`validateedit`事件在记录被提交到存储之前触发 - 在用户已经单击`ENTER`或模糊编辑器之后，即，当编辑器正在关闭时。

如果您试图在它开始关闭*之前获取 celleditor 的值，例如出于验证以外的某些原因，您可以像这样获取活动的 celleditor 的值：*

```
// myGrid is a reference to your Ext.grid.Panel instance
if (myGrid.editingPlugin.editing) {
    var value = myGrid.editingPlugin.getActiveEditor().field.value

    console.log('value: ' + value);
} 
```

如果没有活动的编辑器，那么`myGrid.editingPlugin.getActiveEditor().field`会抛出一个错误，这就是为什么我在它周围加上一个条件。

我应该提出的另一点是，为了在编辑器网格中进行验证，我发现将`validator`配置放在网格列的`editor`定义中是最简单的。这将在用户设置字段值时为您提供所有方便的验证 CSS，并在他尝试保存之前提醒他该值是否存在问题。

要了解我的意思，请尝试在[此示例](http://docs.sencha.com/ext-js/4-0/#!/example/grid/cell-editing.html)的日期列中输入字母。将鼠标悬停在编辑器单元格上，您将收到错误消息。

**编辑**

看来我误解了你原来的问题，不过我会分解我对你上面问题的回答，

**问题 1**

完成编辑（单击`ENTER`或 ）后，您的调用`mygridStore.getModifiedRecords()`应该可以正常工作，因为记录将已提交到存储。我看到它不起作用，我稍后会介绍。

我应该指出，ExtJS4 有一个`store.sync()`方法，如此[处](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Store-method-sync)所述。

无需从存储中提取修改后的记录、对其进行编码、手动执行 ajax 请求以将它们保存到服务器然后手动提交它们，您可以调用此`sync`方法，它会为您处理所有这些操作。

`load`如果您有不同的 URL 来处理由您的商店和方法触发的不同创建、读取、更新、销毁操作`sync`，您可以使用商店的代理`api`配置将您的 URL 映射到这些操作，如此[处](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.proxy.Server-cfg-api)所述。或者您可以设置您的服务器端控制器，以便能够区分您的商店`load`请求（读取操作默认为 HTTP GET）和同步请求（创建、更新和删除操作默认为 HTTP POST）。

在服务器端可以有许多不同的方法来执行此操作，我通常这样做的方法是为 GET 请求设置一个 SQL 存储过程，为任何给定商店设置一个用于 POST 请求的存储过程。我将商店名称作为额外参数包含在内，然后我的服务器端控制器根据它是 GET 还是 POST 请求运行适当的存储过程。

**问题2**

单元格编辑不支持`checkcolumn`编辑。你必须创建一个不同的处理程序来监听它的变化，像这样：

```
checkchange: function (column, rowIndex, checked) {
    var record = store.getAt(rowIndex),
        state = checked ? 'checked' : 'unchecked'

    console.log('The record:');
    console.log(record)
    console.log('Column: ' + column.dataIndex);
    console.log('was just ' + state)
} 
```

您的调用也`mygridStore.getModifiedRecords()`应该能够获取检查更改，但是，它们在被检查后立即提交到网格的存储中。`store.sync()`还将获取对 checkcolumn 的更改。

**问题 3**

我无法完全说出导致该问题的原因，但您的事件可能发生了一些奇怪的事情`validateedit`，您的处理程序应该返回 true 或 false。

正如我之前所说，我误解了你最初问这个问题的原因。*我以为您在进行*编辑时正在尝试进行某种验证。现在我了解到，在完成所有编辑后，您正试图从存储中获取所有修改过的记录，以便将它们保存到数据库中，我被抛弃了，因为在 ExtJS 4 中，存储通常使用`sync`我提到的方法。

换句话说，您不需要`validateedit`事件或`checkchange`事件来获取修改记录的列表。

在某些 4.07 版本中，您遇到的实际问题可能是商店的 getter 方法（`getModifiedRecords`, `getUpdatedRecords`）出现问题，请查看[这篇文章](http://www.sencha.com/forum/archive/index.php/t-170183.html?s=411caff4c3c5759c6044d958e83785b9)和[这篇](http://www.sencha.com/forum/archive/index.php/t-164251.html?s=05b94218754784752b0e79b8c9eda0a9)文章。

综上所述，我能给你的最好建议是 1) 尝试将`sync`修改后的数据保存到数据库的 stores 方法和 2) 升级到 ExtJS 4.1，有*很多*错误在 4.07 和 4.1 之间得到了纠正你应该能够利用它，当我切换到 4.1 时，我删除了大约 75% 的覆盖来使事情正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T07:57:00.130

```
EditedGrid.plugins[0].completeEdit(); 
```

这将使活动更改提交并调用编辑事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:46:19.957

```
listeners: {
    validateedit: function (editor, e) {
        //console.log(editor);
    var oldVal = editor.originalValue;
    var newVal = editor.value;
    }
} 
```

# c# - 如何使用带有 c# 的 json 使用 odata？

> ID：11196877
> 
> 赞同：0
> 
> 时间：2012-06-25T20:30:56.107
> 
> 标签：c#, api, odata

我正在使用带有 c#/winRT 的 odata v2 api。它工作正常，但它使用 xml 作为读写请求的编码格式。我怎样才能让它使用 json 代替？

我已经尝试将一个事件处理程序附加到 myDataSource.SendingRequest，并添加一个“Accept”标头，但客户端库显式拦截了它并引发了异常。此外，我在客户端找不到任何“接受”属性。

谢谢，

阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T07:11:18.437

假设您使用的是 WCF 数据服务客户端库（根据 Phani 的[博客文章](http://blogs.msdn.com/b/phaniraj/archive/2012/04/26/developing-windows-8-metro-style-applications-that-consume-odata.aspx)），那么这目前是不可能的。客户端库（尚）不支持 JSON。

如果您确实需要使用 JSON，则需要直接使用 ODataLib，它不像 WCF 数据服务客户端那样“易于使用”，但它也为您提供了更大的灵活性。ODataLib 是 OData 有线格式的读写器。有关示例，请参阅此[博客文章](http://blogs.msdn.com/b/astoriateam/archive/2011/10/14/introducing-the-odata-library.aspx)。Metro 本身的 ODataLib - Microsoft.Data.OData.Metro 应该已经是 VS 2012 RC 版本的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:20:50.957

您需要在请求中添加一个接受标头：
'accept: application/json'

# c# - 连接被重置或应用程序池反复停止

> ID：11196878
> 
> 赞同：0
> 
> 时间：2012-06-25T20:30:58.780
> 
> 标签：c#, asp.net, .net

我无法访问服务器选项，所以我希望有人能在服务器人员回复我之前帮助指导我解决一些可能的问题。我的应用程序上周运行良好，直到应用程序池突然停止。它由 IT 重新启动，因此我尝试再次加载我的页面。应用程序池再次停止（收到 503 服务器错误）。它一遍又一遍地发生。他们把我放在我自己的应用程序池中，它仍然在发生，所以它显然是我的应用程序，但我不知道为什么。我没有收到任何错误消息，它的人说他也看不到任何错误。我删除了（在复制到另一个位置后）我的所有文件并重新开始构建它们。它向我显示编译错误，告诉我 xxx 文件不存在。我添加了文件，它移动到下一个错误。当我最终修复最后一个错误时，我收到一条消息（在 Firefox 中），告诉我连接已重置。我不知道发生了什么，我在任何地方都看不到错误消息。有什么地方我应该告诉 IT 人员去看看吗？任何可能让他知道发生了什么的特定服务器日志。据我所知，它神奇地发生了，因为没有出现任何错误——所以我很难解决这个问题。有什么建议么？因为没有出现错误 - 所以我很难解决这个问题。有什么建议么？因为没有出现错误 - 所以我很难解决这个问题。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:33:54.763

如果您可以访问，请查看服务器事件日志以查看正在生成的 ASP 错误。那里通常有一些东西可以为你指明正确的方向。

如果您无法从谷歌搜索事件日志错误中找出答案，请在此处发布，也许我可以提供帮助

# servlets - 登录页面和 Servlet 流程

> ID：11196883
> 
> 赞同：0
> 
> 时间：2012-06-25T20:31:20.320
> 
> 标签：servlets, login, jdeveloper

我试图了解登录用户所涉及的过程。我被告知需要创建一个 servlet 才能访问请求/响应的标头。

所以制作了一个，它获取标题信息，然后检查以确保用户是数据库中的有效用户。如果是这样，它会设置与该用户的会话。如果没有，它会转到注册页面。

我的问题是理解什么叫这个 servlet，是“调用这个 servlet 需要起始页吗？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:46:45.257

> *...访问请求/响应的标头 ...获取标头信息 ...*

您正在描述`BASIC`HTTP 身份验证的工作方式。这是众所周知的 JavaScript 警报外观类似弹出窗口，它要求输入用户名和密码，并在提供不正确的凭据时导致 HTTP 401 Not Authorized 错误。这在 Java EE Web 应用程序中通常根本不由 servlet 执行，而是由特定的`web.xml`配置设置执行。它看起来像这样：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>secured</web-resource-name>
        <url-pattern>/secured/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>someRoleName</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>BASIC</auth-method>
</login-config> 
```

用户和角色的位置在 servlet 容器本身中配置。这可以是 XML 文件或数据库。您需要使用关键字“realm”参考 servletcontainer 特定文档如何配置它。例如，对于 Tomcat，它是[Tomcat Realm HOWTO](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html)。

另一种方法是`FORM`基于身份验证，但这不涉及您最初询问的通过请求标头传递登录信息。此外，通常根本不涉及 servlet，因为这是由容器的内置机制自动执行的。您只需将`<login-config>`上面的内容更改为下面的内容：

```
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/error.jsp</form-error-page>
    </form-login-config>
</login-config> 
```

反过来`login.jsp`应该有一个 HTML 表单，它应该通过 POST 提交到一个预定义的 URL `j_security_check`，其中用户名和密码作为预定义的请求参数`j_username`和`j_password`.

```
<form action="j_security_check" method="post">
    <input type="text" name="j_username" />
    <input type="password" name="j_password" />
    <input type="submit" value="login" />
</form> 
```

这样做的好处是，您可以使用一些漂亮的 HTML/CSS/JS 以您想要的方式显示带有登录表单的页面，而不是显示一个类似 JavaScript 的简单对话框。

仅当通过调用[`request.login(username, password)`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login%28java.lang.String,%20java.lang.String%29). 这种方法是自 Servlet 3.0（Tomcat 7、Glassfish 3 等）以来的新方法。请注意，这仍然需要容器中的`<security-constraint>`in`web.xml`和 realm。Servlet 也仅在您使用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)而不是使用容器管理的身份验证进行家庭验证时使用。然后，在 servlet 中，您应该在会话中存储您自己的登录用户的数据库模型表示，[`session.setAttribute("user", user)`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#setAttribute%28java.lang.String,%20java.lang.Object%29)以便过滤器可以拦截它。

### 也可以看看：

*   [Java EE 6 教程 - 保护 Web 应用程序](http://docs.oracle.com/javaee/6/tutorial/doc/bncas.html)

请注意，JDeveloper与这一切**无关。**它只是一个轻松开发 Java Web 应用程序的工具（IDE）。您可以在 Eclipse、Netbeans、IntelliJ 甚至记事本中做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:09:48.803

它还取决于您要实现哪种安全性。您提到身份存储是 RDBMS（我假设的表），它允许您实现两种类型的身份验证：容器管理和自定义。在自定义身份验证（不太推荐）中，您向用户询问他/她的用户名/密码对，并将其与数据库中的用户进行比较。这里没有自动身份验证检查，需要一个 servlet 过滤器来确保用户在访问受保护的资源时得到身份验证。

容器管理 - 由上一个答案指示 - 允许您将身份验证委托给容器。在这种情况下，您编写的应用程序（您可能会对此更具体）不处理身份验证和身份验证跟踪本身，而只是 - 通过 web.xml 中的配置 - 将请求重定向到容器进行身份验证。

大多数应用程序服务器都允许您配置身份存储以对用户进行身份验证。对于 JDeveloper 中的默认设置 WebLogic 服务器，它可以是 LDAP、Active Directory、OID、WLS 和 SQL/Table 中的集成 LDAP。后者是一个预定义的身份验证提供程序（SQL 身份验证提供程序），它允许您配置 WLS 容器以根据数据库表对您的用户进行身份验证。

因此，我建议您使用 SQL 身份验证提供程序跟进容器管理身份验证，因为这意味着更少的工作

# filter - 在 OpenLayers 中过滤加载的 kml 文件

> ID：11196884
> 
> 赞同：2
> 
> 时间：2012-06-25T20:31:22.383
> 
> 标签：filter, openlayers, kml

我正在尝试创建一个交互式搜索引擎（用于查找活动门票），其中一个功能是使用 OpenLayers 显示相关场地的可视化地图。我在一个 kml 文件中有大量场地（3000+），我想选择性地显示一个过滤的小节。下面是我的代码，但是当我尝试运行它时出现 JavaScript 错误。运行 firebug 和 chrome 开发人员工具让我认为它没有传递我提供的参数，因为它说变量为空。但是，我无法弄清楚为什么他们没有通过。非常感谢任何见解。

```
var map, drawControls, selectControl, selectedFeature, select;
$('#kml').load('venuesComplete.kml');
kml=$('#kml').html();
function showVenues(state, city, venue){
    filterStrategy = new OpenLayers.Strategy.Filter({});
    var kmllayer = new OpenLayers.Layer.Vector("KML", {
    strategies: [filterStrategy,
        new OpenLayers.Strategy.Fixed()],
    protocol: new OpenLayers.Protocol.HTTP({
        url: "venuesComplete.kml",
        format: new OpenLayers.Format.KML({
        extractStyles: true,
        extractAttributes: true
        })
    })
    });
    select = new OpenLayers.Control.SelectFeature(kmllayer);
    kmllayer.events.on({
        "featureselected": onFeatureSelect,
        "featureunselected": onFeatureUnselect
    });
    map.addControl(select);
    select.activate();
    filter = new OpenLayers.Filter.Comparison({
        type: OpenLayers.Filter.Comparison.LIKE,
        property: "",
        value: ""
    });
    function clearFilter(){
        filterStrategy.setFilter(null);
    }
    function setFilter(property, value){
        filter.value = value;
        filter.property = property;
        filterStrategy.setFilter(filter);
    }
    var vector_style = new OpenLayers.Style();
    if(venue!=""){
        setFilter('name', venue);
    }else if(city!=""){
        setFilter('description', city);
    }else if(state!=""){
        setFilter('description', state);
    }
    map.addLayer(kmllayer);
    function onPopupClose(evt) {
        select.unselectAll();
    }
    function onFeatureSelect(event) {
        var feature = event.feature;
        var selectedFeature = feature;
        var popup = new OpenLayers.Popup.FramedCloud("chicken", 
            feature.geometry.getBounds().getCenterLonLat(),
            new OpenLayers.Size(100,100),
            "<h2>"+feature.attributes.name + "</h2>" + feature.attributes.description +'<br>'+feature.attributes, 
            null, 
            true, 
            onPopupClose
        );
        document.getElementById('venueName').value=feature.attributes.name;
        document.getElementById("output").innerHTML=event.feature.id;
        feature.popup = popup;
        map.addPopup(popup);
    }
    function onFeatureUnselect(event) {
        var feature = event.feature;
        if(feature.popup) {
            map.removePopup(feature.popup);
            feature.popup.destroy();
            delete feature.popup;
        }
    }
}
function init() {
    map = new OpenLayers.Map('map');
    var google_map_layer = new OpenLayers.Layer.Google(
        'Google Map Layer',
        {type: google.maps.MapTypeId.HYBRID}
    );
    map.addLayer(google_map_layer);
    state="";
    state+=document.getElementById('stateProvDesc').value;
    city="";
    city+=document.getElementById('cityZip').value;
    venue="";
    venue+=document.getElementById('venueName').value;
    showVenues(state,city,'Michie Stadium');
    map.addControl(new OpenLayers.Control.LayerSwitcher({}));
    map.zoomToMaxExtent();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:37:40.200

如果我理解正确，您的 kml 无法正确加载。如果不是这种情况，请不要考虑我的回答。

检查您的 kml 层是否正确加载非常重要。我有一个加载多个动态（来自 php）kml 图层的地图，并且有一个大图层根本不加载并不罕见。发生这种情况时，操作将中止，但就 openlayers 而言，该层已正确加载。

所以我做了两件事：我检查加载的数据量是否符合我的原始 php kml 解析器中的预期功能数量（我为此使用 jquery 或 ajax 调用），然后，如果有差异，我尝试重新加载（由于这是一个循环，我将其限制为 5 次尝试，以免无限循环）。

[在这里](https://stackoverflow.com/questions/2995238/how-to-refresh-reload-a-kml-layer-in-openlayers-dynamic-kml-layer/11333611#11333611)查看我的一些代码

# recursion - RSpec 是否支持递归近似匹配？

> ID：11196887
> 
> 赞同：1
> 
> 时间：2012-06-25T20:31:34.860
> 
> 标签：recursion, rspec, matching, approximate

在 RSpec 我可以做这样的事情：

```
[1, 2, 3].should =~ [2, 3, 1] 
```

有没有一种内置的方法可以使这个递归近似？例如：

```
x = [
  [1, 2],
  [3, 4]
]

y = [
  [4, 3],
  [2, 1]
]

x.should =~ y 
```

如果没有内置的方法，我意识到我可以（并且将）自己写这个。

# vba - 如何计算excel中非零的数量？

> ID：11196888
> 
> 赞同：0
> 
> 时间：2012-06-25T20:31:35.007
> 
> 标签：vba, excel

我正在尝试制作一个可以遍历整个工作簿并计算员工工作天数的宏。工作表以天为单位完成工作，因此 T 必须找到的天数不为零。我试过使用`COUNTIF(A11:A12,">0")`，我得到了错误`Expected : list separator or )`。我正在使用`For Each`循环来处理工作表。我想将所有信息放在工作簿末尾的新工作表上，其中包含员工姓名和工作天数。我对 Visual Basic 很陌生，但对 C# 非常熟悉。

我现在已经走到了这一步

```
Option Explicit

Sub WorksheetLoop2()
    ' Declare Current as a worksheet object variable.
    Dim Current As Worksheet
    Dim LastColumn As Integer

    If WorksheetFunction.CountA(Cells) > 0 Then
    ' Search for any entry, by searching backwards by Columns.
        LastColumn = Cells.Find(What:="*", After:=[A1], _
        SearchOrder:=xlByColumns, _
        SearchDirection:=xlPrevious).Column
    End If

    ' Loop through all of the worksheets in the active workbook.
    For Each Current In Worksheets
        Current.Range("A27") = Application.WorksheetFunction.CountIf(Current.Range(Cells(11, LastColumn), Cells(16, LastColumn)), ">0")
        Current.Range("A28") = Application.WorksheetFunction.CountIf(Current.Range("Al17:Al22"), ">0")
    Next
End Sub 
```

当我运行它时，我收到一条错误消息`method range of object'_worksheet' failed`。我也无法找到一种方法来获取摘要表上的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:47:08.307

VBA 解决方案，根据您上面的最后一条评论。

良好的 VBA 编程实践需要始终在代码中使用 Option Explicit，这样您就知道什么时候没有正确声明变量，或者有时代码是否不好！在这种情况下，您会发现仅写入 A27 并不意味着您将值返回到单元格 A27，而只是将您获得的值设置为变量 A27。或者，也许您不会确切地知道这一点，但您会很快发现您的问题出在哪里！

此代码应该为您修复它：

```
Option Explicit

Sub WorksheetLoop2()

'Declare Current as a worksheet object variable.
Dim Current As Worksheet

' Loop through all of the worksheets in the active workbook.
For Each Current In Worksheets
    Current.Range("A27") = Application.WorksheetFunction.CountIf(Current.Range("A11:A12"), ">0")
Next

End Sub 
```

如果有帮助，非 VBA 解决方案：

假设您有一个摘要表，并且每个员工都在单独的表中，A 列中的天数和 B 列中的工作时间，请在摘要 B1 的公式栏中输入公式，然后在 A 列中运行名称列表。

![床单](../Images/9282512087ff61167b5371f3594b6e01.png)

# c++ - C/C++ PCRE 是否可以匹配 UTF-8 字符串中彼此相距很远的 2 个或更多 UTF-8 代码点？

> ID：11196891
> 
> 赞同：1
> 
> 时间：2012-06-25T20:31:51.090
> 
> 标签：c++, regex, pcre

下午好，我们在 WINDOWS Visual Studio 8.0 和 9.0 上使用带有 PCRE_CASELESS、PCRE_UTF8、PCRE_UCP 的最新 C/C++ 版本的 PCRE。当我们使用 PCRE 正则表达式 [\x{00E4}]{1} 时，我们能够将标准拉丁代码点 U+00E4 与字符串 DAS tausendschÃ¶ne JungfrÃ¤ulein 匹配，也称为 44 41 53 20 74 61 75 73 65 6E 64 73 63 68 C3 B6 6E 65 20 4A 75 6E 67 66 72 C3 A4 75 6C 65 69 6E。现在我们想同时匹配代码点 U+00E4（即 C3 B6）和 U+00F6（即 C3 A4），这样我们就可以实现一个简单的原型 C/C++ 搜索和替换操作 $1 $2。这可能吗？谢谢你。

我们现在使用`[\x{00F6}\x{00E4}]{1,}`带有以下 C++ 函数的 PCRE 正则表达式：

```
void cInternational::RegExSearchReplace(cOrderedList *RegExList_,char **Input_) {
    const char *replacement;
    char substitution[dMaxRegExSubstitution];
    int subString;
    cPCRE *regEx;
    unsigned char* Buffer;

    Buffer = new unsigned char[1024];
    if (*Input_[0]!='\x0' && RegExList_->ResetIterator()) {
        do {
            regEx=new cPCRE();
            regEx->SetOptions(PCRE_CASELESS);
            if (regEx->Compile(RegExList_->GetCharacterField(1))) {
                // Search for Search RegEx:
                while (regEx->Execute((char *)Buffer)>0) {

                   // Found it, get Replacement expression:
                   replacement=RegExList_->GetCharacterField(2);
                    int subLen=0;
// Build substitution string by finding each $# in replacement and replacing
//   them with the appropriate found substring. Other characters in replacment
//   are sent through, untouched.
    for (int i=0;replacement[i]!='\x0';i++) {
if (replacement[i]=='$' && isdigit(replacement[i+1])) {
      subString=atoi(replacement+i+1);
      if (regEx->HasSubString(subString)) {
strncpy(substitution+subLen,
       *Input_+regEx->GetMatchStart(),
        regEx->GetMatchEnd() - regEx->GetMatchStart());

        subLen+=(regEx->GetMatchEnd() - regEx->GetMatchStart()
     }
     i++
  } else {
     substitution[subLen++]=replacement[i];
  }
}
substitution[subLen]='\x0';

// Adjust the size of Input_ accordingly:
int sizeDiff=strlen(substitution)-(regEx->GetMatchEnd()-regEx->GetMatchStart());
if (sizeDiff>0) {
    char *newInput=new char[strlen(*Input_)+sizeDiff+1];
    strcpy(newInput,*Input_);
    delete[] *Input_;
    *Input_=newInput;
}

memmove(*Input_ + regEx->GetMatchStart() + 1,
        *Input_+regEx->GetMatchEnd() + 1,
        regEx->GetMatchEnd()- regEx->GetMatchStart());
strncpy(*Input_,substitution,strlen(substitution));
(*Input_)[strlen(substitution)] = '\x0';
Buffer = Buffer + regEx->GetMatchEnd();
}
}
delete regEx;
} while (RegExList_->Next());
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:51:15.637

使用 PCRE，您将用于匹配出现在字符串中任何位置的正则表达式如下：`\x{00E4}.*\x{00F6}`

**解释：**

`\x{00E4}`匹配您要查找的第一个 Unicode 字符。

`.`匹配**任何**字符。

`*`修改前一个周期以匹配**0 次或更多**次。这将允许第二个 unicode 字符在任意数量的字符之外。

`\x{00F6}`匹配您要查找的第二个 unicode 字符。

如果它们出现，这将匹配。让我知道它是如何工作的，如果您需要它来做其他事情等。（例如：这对于搜索和替换操作似乎没有那么有用。它只会告诉您这些字符是否存在于字符串中完全没有。您需要修改正则表达式来进行替换。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:16:00.007

昨晚我给 PCRE 的开发者 Phip Hazel 发了一封电子邮件。Hazel 先生表示可以实现对顺序不敏感的 PCRE 正则表达式，例如 \x{00f6}。*?\x{00e4} | \x{00e4}。*?\x{00f6}

解释如下所示。谢谢你的帮助，达蒙。问候， 弗兰克

* * *

发件人：Philip Hazel 日期：2012 年 6 月 26 日星期二上午 8:55 收件人：Frank Chang 抄送：pcre-dev@exim.org

2012 年 6 月 25 日星期一，Frank Chang 写道：

> 晚上好，我们正在使用带有 PCRE_UTF8 的 C/C++ PCRE 8.30 | PCRE_UCP | PCRE_COLLATE.这是一个不区分顺序的
> 
> regex: '(?=. *\x{00F6})(?=.* \x{00E4})' 它尝试使用使用 ?= 或*正向前瞻*来确保两个 UTF-8 代码点以任一顺序匹配。
> 
> PCRE_compile() 返回 OK 并且 PCRE_execute() 在字符串 DAS tausendschÃ¶ne JungfrÃ¤ulein 上返回 OK。在十六进制中，它是 44 41 53 20 74 61 75 73 65 6E 64 73 63 68 C3 B6 6E 65 20 4A 75 6E 67 66 72 C3 A4 75 6C 65 69 6E。但是，GetMatchStart() 返回 0，GetMatchEnd() 返回 0，而不是使用 PCRE '\x{00F6}.*\x{00E4}' 正则表达式时获得的 GetMatchStart() = 14 和 GetMatchEnd() = 27。请告知我们是否可以在 PCRE 正则表达式中对多个 UTF-8 代码点进行顺序不敏感匹配。谢谢你。

我已经通过基本的 pcretest 程序运行了你的正则表达式，并且它匹配。这证实了您使用 PCRE_compile() 和 PCRE_execute() 的发现。

由于您的正则表达式完全由断言组成，因此实际匹配的字符串为空（如 pcretest 所示）。如果您想为您提供匹配的开始和结束，您需要修改您的正则表达式以实际匹配某些内容。如果您想要的是这两个代码点之间的字符串，无论是哪种顺序，都可以像这样简单

\x{00f6}。*?\x{00e4} | \x{00e4}。*?\x{00f6}

（忽略空格）应该做你想做的事。

我意识到这个示例可能是您实际应用程序的简化，而我的简单建议不能很好地扩展。但要点是：如果你想提取字符串，你的正则表达式必须做一些实际的匹配，而不仅仅是断言。

菲利普

——菲利普·黑泽尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:53:17.873

我们编写了一个 PCRE 顺序不敏感的正则表达式。

```
(?=.+(\x{00F6})){1}(?=.+(\x{00E4})){1} 
```

这似乎运行正常。

# linq - Linq 动态 ConnectionString 应用程序设置

> ID：11196892
> 
> 赞同：1
> 
> 时间：2012-06-25T20:31:52.877
> 
> 标签：linq, dynamic, connection-string

我想从 Web.config 或 App.Config 文件中读取我的连接字符串。我试图遵循另一个 Stackoverflow 帖子中的建议。

建议是：

1.  将 Linq to Sql DBML 文件中的应用程序设置设置为 false。（双击Linq to Sql文件将其打开，在设计器表面的空白处右击，选择属性，展开连接属性。）

2.  在 Linq to SQL DBML 文件中将连接设置为（无）。

3.  在数据上下文分部类中添加一个 OnCreated 事件方法，以从 web.config 或 app.config 读取连接字符串。

当我进行上述更改并尝试编译我的代码时，我得到：

错误 2 “对象”类型的表达式不可查询。确保您没有丢失 LINQ 提供程序的程序集引用和/或命名空间导入。

错误发生在下面的第 2 行：

```
 Using DcObj = New HMR_LinqToSql_QuestionDataContext()
        Dim Query = From Q In DcObj.tblQuestions Select Q ' *** Error on this line

        Count = Query.Count()

        DcObj.tblQuestions.DeleteAllOnSubmit(Query)

        DcObj.SubmitChanges()

    End Using 
```

我发现，清除错误的唯一方法是将 Application Settings 设置为 True 并在 Connection 下拉列表中选择一个连接字符串条目。如果我恢复为 Application Settings = True，则意味着 Linq to Sql 文件中仍有连接字符串。

任何解决方案的想法？

埃德

# ruby-on-rails - 关联表：加入或包含在 Rails 中

> ID：11196899
> 
> 赞同：2
> 
> 时间：2012-06-25T20:32:19.553
> 
> 标签：ruby-on-rails, join, activerecord, include

当谈到 rails 和 Active Record 关联时，我感觉有点慢……我有两张桌子。

表 =**环**
表 =带有 foreign_key => "ring_id" 的**变体。**

```
class Ring < ActiveRecord::Base
      has_many :variations
end

class Variation < ActiveRecord::Base
      belongs_to :ring
end 
```

所以在我的“索引/列表”视图中，我想显示所有的环，以及两种变体，我认为可以通过一个 SQL 查询来做到这一点......但是，我已经尝试了连接和包含方法，我想我只是不了解它们如何正常工作。

所以我的问题是，我将如何在我的控制器中编写一个查询，从“变量”中提取我的“标题”和“值”列值并将它们组合成一个简单的对象以便于循环？还是我必须遍历所有环并在循环期间查找变化值？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:40:53.960

在您的控制器中：

```
@rings = Ring.includes(:variations).all 
```

在 index.html.erb 中：

```
@rings.each do |ring|
  ...
  ring.variations.each do |variation|
    ...
  end
end 
```

查询的包含部分将防止 Rails 在您循环并在视图中呈现环和变体时重复查询数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T20:38:57.470

您需要使用`includes`方法：`Ring.inclues(:variations)`。然后，变体将与环一起加载到单个 SQL 查询中。

欲了解更多信息： http: [//guides.rubyonrails.org/active_record_querying.html#eager-loading-associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)

# c# - 发布时 system.io.filenotfoundexception

> ID：11196905
> 
> 赞同：2
> 
> 时间：2012-06-25T20:32:33.693
> 
> 标签：c#

我使用 Visual Studio 2008、第三方 dll、xml 文件和图像在 c# 中编写了一个表单应用程序。图像已作为资源添加到项目中。

`System.IO.FileNotFoundException`当我尝试在另一台机器上运行已发布版本的可执行文件时抛出A。

如果我将 .exe 文件复制到 pc 上的桌面，并将 dll 和 xml 文件复制到桌面，双击 exe 可以正常工作。

在我的项目中，对于所需的 dll 引用，我将 copyLocal 设置为 true。xml 被添加到项目中，如果输出目录较新，则设置为复制。我还检查了发布应用程序文件，一切都在那里。

我用来加载 xml 文件的行是这样的

```
config = new XmlDocument();
config.Load("fileName.xml"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:30:23.997

我假设当您尝试加载 XML 文件时抛出 FileNotFound 异常，对吗？

简单地寻找“filename.xml”对我来说似乎不是一个好主意，特别是如果这是您应用程序的关键配置文件。

我通常会尝试将这些东西移动到我的 App.config 文件中，然后使用完全限定路径或短路径加载它们。例如：

**应用程序配置**

```
<add key="ExternalConfig" value="D:\\config.xml"/> 
```

**.cs 文件**

```
config = new XmlDocument();
config.Load(ConfigurationManager.AppSettings["ExternalConfig"]); 
```

您也可以使用相对路径，但请记住，您始终是相对于当前工作目录的。

或者，根据您的配置中的数据类型，您可以尝试将此信息存储到您的 App.config 文件中并完全取消 config.xml。

# android - 在 Android 中使用 OpenSL ES 而不是 AudioTrack 的原因是什么？

> ID：11196912
> 
> 赞同：13
> 
> 时间：2012-06-25T20:32:45.963
> 
> 标签：android, android-ndk, audiotrack, opensl

目前我正在使用 AudioTrack 将来自本机层的音频数据传递给它来播放。

看来我可以在本机层使用 OpenSL ES 而不是 Java 中的 AudioTrack。与 AudioTrack 相比，OpenSL ES 提供的假定优势是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T06:06:20.913

**OpenSL ES：**

好处：

1.  Android 中的低级音频 API
2.  独立于 Android 手机的设备
3.  适合游戏

缺点：

1.  仅支持 2.3+ 操作系统

**音轨：**

好处：

1.  高级 API

缺点：

1.  在 Java 层工作，本机代码必须调用 javalayer 才能播放音频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-01T13:46:02.033

虽然这是旧的，但其他人会像我一样从搜索中来到这里。我在一个相当慢且低功耗的平板电脑（Onda V10 4G，联发科处理器）上使用 Android 7，没有其他应用程序处于活动状态。在播放从电视录制的 .ts 文件时，我发现音频通过蓝牙连续丢失，尽管通过平板电脑的扬声器（可能是耳机，尽管我没有测试）很好。音频输出设置为默认 OpenSL ES。我更改为 AudioTrack，现在音频很好，即使对于通过网络访问的文件也是如此。VLC 当前日期为 2021 年 8 月 1 日。顺便说一句，通过蓝牙，我发现声音和字幕与屏幕上的内容相匹配（没有像我有时发现的那样大的偏移），尽管口型同步并不准确）。我没有尝试补偿延迟，默认保留。

文件通过 Kodi 播放良好。

所以在这种情况下使用 AudioTrack 的令人信服的理由。可能有一些设置可以让 OpenSL 工作，但我没有打扰。

# wso2 - WSO2 ESB - 数据服务服务器功能 - 如何使用数据源即时交换数据源

> ID：11196914
> 
> 赞同：0
> 
> 时间：2012-06-25T20:32:57.260
> 
> 标签：wso2, wso2esb

我正在使用 WSO2 ESB 4.0.3。我已经在上面安装了 WSO2 数据服务功能并创建了 DS。

ESB 在管理 UI 下的“配置”选项卡下有一个功能，您可以在其中定义“数据源”。

我的问题是在创建新的数据服务时，我无法使用我在 ESB 中配置的这个“数据源”。我们有不同的环境 DEV / TEST / UAT / PROD。每个环境对于相同的数据服务都有不同的数据库。

目前我已手动更改 DS XML 文件以指向新数据库，然后进行部署。

有没有办法指向在 ESB 中配置的数据库并动态更改 DS 的数据库？

感谢 ABhijit

2012 年 7 月 1 日 - 请问有什么更新吗？这是他们大团队中的 Apple POC。如果成功 WSO2 将有 Apple 实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T19:54:18.117

```
#----- Start of the configuration -----

synapse.datasources=TestDS,TestDS1

synapse.datasources.icFactory=com.sun.jndi.rmi.registry.RegistryContextFactory
synapse.datasources.providerPort=2199

#TestDS Configuration
synapse.datasources.TestDS.registry=JNDI
synapse.datasources.TestDS.type=BasicDataSource
synapse.datasources.TestDS.driverClassName=com.mysql.jdbc.Driver
synapse.datasources.TestDS.url=jdbc:mysql://localhost:3306/testDB
synapse.datasources.TestDS.username=dummy_username
synapse.datasources.TestDS.password=dummy_password
synapse.datasources.TestDS.dsName=TestDS
synapse.datasources.TestDS.maxActive=100
synapse.datasources.TestDS.maxIdle=20
synapse.datasources.TestDS.maxWait=10000

#TestDS1 configuration
synapse.datasources.TestDS1.registry=JNDI
synapse.datasources.TestDS1.type=BasicDataSource
synapse.datasources.TestDS1.driverClassName=com.mysql.jdbc.Driver
synapse.datasources.TestDS1.url=jdbc:mysql://localhost:3306/testDB1
synapse.datasources.TestDS1.username=dummy_username
synapse.datasources.TestDS1.password=dummy_password
synapse.datasources.TestDS1.dsName=TestDS1
synapse.datasources.TestDS1.maxActive=100
synapse.datasources.TestDS1.maxIdle=20
synapse.datasources.TestDS1.maxWait=10000

#----- End of the configuration ----- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:37:42.127

如果您已将数据服务功能安装到您一直在使用的同一个 ESB 实例中，那么您应该可以使用通过“配置 > 数据源”菜单创建的数据源。因为，当您通过上述选项创建特定数据源时，所有其他已安装的功能（使用数据源）都可以看到它。但是，如果您将 ESB 和 DSS 放在两个框中，假设 ESB 中定义的数据源在 DSS 节点中不可见，除非您将这些节点安装到同一个注册表。但是，此功能也将在下一个即将发布的版本中提供。

但是，我建议您使用以下模式来完成您的要求。我假设您在所有环境 DEV / TEST / UAT / PROD 中都将 DataServices 功能安装到 ESB 中。如果是这样，您可以使用“相同名称”创建数据源（例如：假设您在所有 4 个环境中创建了一个名为“ds1”的数据源）通过指向不同数据库配置的“配置 > 数据源”菜单在这些环境中的每一个中使用。然后您可以指向 DBS（数据服务描述符）内部创建的数据源，如下所示。

```
<data name="TestDataService">
   <config id="default">
      <property name="carbon_datasource_name">ds1</property>
   </config>
   .....
</data> 
```

完成这些步骤后，无论何时在任何环境中部署数据服务，它都会指向相关数据源，而无需您手动重新配置数据库配置，并且特定于每个环境的相关数据库配置将在以下位置动态加载运行时。

希望以上解释对您有所帮助！

问候， 普拉巴斯

# css - 将 .css 文件导入 .less 文件

> ID：11196915
> 
> 赞同：235
> 
> 时间：2012-06-25T20:33:03.427
> 
> 标签：css, import, less

您可以将 .css 文件导入 .less 文件...吗？

我对 less 非常熟悉，并将其用于我的所有开发。我经常使用如下结构：

```
@import "normalize";

//styles here

@import "mixins";
@import "media-queries";
@import "print"; 
```

所有导入都是其他 .less 文件，并且所有工作都应正常工作。

我当前的问题是：我想将 .css 文件导入 .less 中，该文件引用 .css 文件中使用的样式，如下所示：

```
@import "../style.css";

.small {
    font-size:60%;
    .type;
}
// other styles here 
```

.css 文件包含一个名为的类，`.type`但是当我尝试编译 .less 文件时出现错误`NameError: .type is undefined`

.less 文件不会导入 .css 文件，只有其他 .less 文件...？还是我引用错了……？！

* * *

## 回答 #1

> 赞同：329
> 
> 时间：2013-05-30T08:04:42.223

您可以通过指定一个选项来强制将文件解释为特定类型，例如：

```
@import (css) "lib"; 
```

将输出

```
@import "lib"; 
```

和

```
@import (less) "lib.css"; 
```

将导入`lib.css`文件并将其视为更少。如果您指定文件较少且不包含扩展名，则不会添加任何文件。

* * *

## 回答 #2

> 赞同：255
> 
> 时间：2014-03-23T17:07:51.960

如果你希望你的 CSS 被复制到输出中而不被处理，你可以使用[`(inline)`指令](http://lesscss.org/features/#import-options)。例如，

```
@import (inline) '../timepicker/jquery.ui.timepicker.css'; 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-09-12T15:32:45.710

我必须在 1.7.4 版本中使用以下内容

```
@import (less) "foo.css" 
```

我知道接受的答案是`@import (css) "foo.css"`，但它没有用。如果你想在新的 less 文件中重用你的 css 类，你需要使用`(less)`而不是`(css)`.

检查[文档](http://lesscss.org/features/#import-options-less)。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-06-25T20:34:52.983

~~将您的 css 文件的文件扩展名更改为`.less`. 你不需要在里面写任何LESS；所有CSS都是有效的LESS（除了你必须逃避的MS东西，但这是另一个问题。）~~

**根据[Fractalf 的回答](https://stackoverflow.com/a/16830938/7469)，这已在 v1.4.0 中修复**

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-25T20:36:37.250

来自[LESS 网站](http://lesscss.org/#-importing)：

> 如果你想导入一个 CSS 文件，并且不想让 LESS 处理它，只需使用 .css 扩展名：
> 
> @import "lib.css"; 该指令将保持原样，并最终出现在 CSS 输出中。

正如 jitbit 在下面的评论中指出的那样，这实际上仅对开发目的有用，因为您不希望有不必要`@import`的 s 消耗宝贵的带宽。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-03-05T05:16:23.863

**试试这个 ：**

```
@import "lib.css"; 
```

**来自官方文档：**

> 您可以导入 css 和 less 文件。只处理较少的文件导入语句，css 文件导入语句保持原样。如果你想导入一个 CSS 文件，并且不想让 LESS 处理它，只需使用 .css 扩展名：

* * *

**来源： http:** [//lesscss.org/](http://lesscss.org/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-12-02T12:35:22.027

如果您只想导入一个 CSS 文件作为参考（例如，使用 Mixins 中的类）但**不**包含整个 CSS 文件，您可以使用`@import (less,reference) "reference.css";`：

*我的.less*

```
 @import (less,reference) "reference.css";
 .my-class{
     background-color:black;
     .reference-class;
     color:blue;
 } 
```

*参考.css*

```
.reference-class{
    border: 1px solid red;
} 
```

*结果（my.css）与`lessc my.less out/my.css`*

```
.my-class {
  background-color: black;
  border: 1px solid red;
  color: blue;
} 
```

我正在使用`lessc 2.5.3`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-10-27T14:36:41.163

如果你想导入一个应该被少踩的 css 文件，请使用这一行：

```
.ie {
  @import (less) 'ie.css';
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-04-06T12:27:33.410

从 1.5.0 开始，您可以使用 'inline' 关键字。

示例：@import (inline) "not-less-compatible.css";

当 CSS 文件可能不兼容时，您将使用它；这是因为尽管 Less 支持大多数已知标准 CSS，但它在某些地方不支持注释，并且不支持所有已知的 CSS hacks 而无需修改 CSS。因此，您可以使用它在输出中包含文件，以便所有 CSS 都在一个文件中。

（来源： http: [//lesscss.org/features/#import-directives-feature](http://lesscss.org/features/#import-directives-feature)）

# android - 带有片段的测试用例中的力方向变化

> ID：11196916
> 
> 赞同：1
> 
> 时间：2012-06-25T20:33:07.657
> 
> 标签：android, unit-testing, android-layout, junit, robotium

我有一个 Android 测试项目，我希望以编程方式更改方向。

我的测试：

```
public class MainActivityLandscapeTest extends ActivityInstrumentationTestCase2<MainActivity> {
public MainActivityLandscapeTest() {
    super(MainActivity.class);
}

private MainActivity mActivity;
private Fragment mDetailFragment;
private Fragment mListFragment;
private Solo mSolo;
@Override
protected void setUp() throws Exception {
    super.setUp();
    mSolo = new Solo(getInstrumentation(), getActivity());
    mSolo.setActivityOrientation(Solo.LANDSCAPE);
    mActivity = getActivity();
    mListFragment = (Fragment) mActivity.getSupportFragmentManager()
            .findFragmentById(R.id.listFragment);
    mDetailFragment = (Fragment) mActivity.getSupportFragmentManager()
            .findFragmentById(R.id.detailFragment);     
}

public void testPreConditions() {
    assertTrue(mActivity != null);
    assertTrue(mSolo != null);
    assertTrue(mListFragment != null);
    assertTrue(getActivity().getResources().getConfiguration().orientation == 
            Configuration.ORIENTATION_LANDSCAPE);
}

/**
 * Only show detailFragment in landscape mode
 */
public void testOrientation() {
    assertTrue(mListFragment.isVisible());
    assertTrue(mDetailFragment.isVisible());
}
} 
```

活动的布局位于单独的文件夹中，布局端口和布局土地

*   布局端口
    *   fragment_main.xml
*   布局土地
    *   fragment_main.xml

在横向模式下，布局包含 2 个片段（详细信息和列表），而在纵向则包含 1 个（仅列表）。

如果设备/模拟器在测试开始之前已经处于横向模式，则此测试通过。如果是纵向的，它会在 mListFragment 和 mDetailFragment 上出现 NullPointerException 失败。

添加延迟（waitForIdleSync（）和/或waitForActivity（））似乎并没有解决我的问题。

如何在我的测试中强制方向为横向，同时仍然能够使用 findFragmentById() 找到片段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:58:55.747

问题是当使用标准的 android 方法来查找视图/片段时，不涉及隐式等待，所以如果当它看起来精确到毫秒时它不存在，你会得到一个空值而不是你期望的片段。这就是为什么通常最好使用robotiums 方法来获取视图，因为它们正在等待你。在这种情况下，最简单的方法是添加一个命令，例如

```
solo.waitForFragmentById(R.id.listFragment); 
```

在您的代码设置值之前。如果您经常这样做，那么将其作为一种方法可能是有意义的，因为每次必须有两行代码肯定会在某个时候被遗忘！

还值得注意的是，设置方向在真实设备上无法正常工作！

# java - 在 js 或 java 中为 twitter 的 pentaho 客户端生成 oauth 签名

> ID：11196921
> 
> 赞同：0
> 
> 时间：2012-06-25T20:33:31.900
> 
> 标签：java, twitter, oauth, pentaho, kettle

我希望能够使用 Pentaho 的 REST 客户端请求向 Twitter 发出请求，但是该软件没有任何 oauth 概念。我发现这个（[在 Java 中实现 OAuth](https://stackoverflow.com/questions/2964392/implement-oauth-in-java)）整洁的 java 类，我想用 Pentaho 的 java 类转换来实现，但是我对 Pentaho 很陌生，这项任务将非常困难。我希望有人可以帮助我解决这个问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:20:09.713

我找到了这个很棒的 twitter java 库，名为[twitter4J](http://twitter4j.org/)，并将核心类导入 pentaho 目录 pentaho/design-tools/data-integration/libext 并编写了下面的自定义用户 java 类。

```
// NO COLLECTION TYPE SAFETY ALLOWED, MUST CAST ALL OBJECTS
import twitter4j.*;
import twitter4j.auth.*;
import twitter4j.conf.*;
//import other libs here

//put your vars here

// Variables
private Twitter twitter = null;

public boolean processRow(StepMetaInterface smi, StepDataInterface sdi) throws KettleException 
{

    Object[] r = getRow();
    if (r==null)
    {
        setOutputDone();
        return false;
    }

    if (first) {
        first=false;

        paging = new Paging();
        paging.setCount(100);

    }

    oauth_user_key = get(Fields.In, "oauth_user_key").getString(r); 
    oauth_user_secret = get(Fields.In, "oauth_user_secret").getString(r); 
    consumer_key = get(Fields.In, "consumer_key").getString(r); 
    consumer_secret = get(Fields.In, "consumer_secret").getString(r); 

    //wierd long/string thing here (pentho compiles java wierd)
    user_id =  get(Fields.In, "source_user_id").getInteger(r);
    Long user = user_id;

    ConfigurationBuilder cb = new ConfigurationBuilder();
    cb.setDebugEnabled(true)
        .setIncludeEntitiesEnabled(true)
        .setOAuthConsumerKey(consumer_key)
        .setOAuthConsumerSecret(consumer_secret)
        .setOAuthAccessToken(oauth_user_key)
        .setOAuthAccessTokenSecret(oauth_user_secret);

    twitter = new TwitterFactory(cb.build()).getInstance();

    try {
        //be creative with twitter4j here and output rows with results (may require a loop)

    } catch (TwitterException e){
        logDebug(e.getMessage());
        return true;
    }

    logBasic("twitter collect done" );
    return true;
} 
```

# sharepoint - 自定义 SharePoint SPUserField 未显示在浏览器的 InfoPath 中

> ID：11196929
> 
> 赞同：0
> 
> 时间：2012-06-25T20:34:08.553
> 
> 标签：sharepoint, sharepoint-2010, infopath, peoplepicker

我创建了一个从 SPFieldUser 继承的自定义字段。只要我处于预览模式或选择在 InfoPath 中编辑，站点上的一切工作正常，并且值在 InfoPath 中显示正常。一旦我在浏览器中查看表单，该字段的值就不再显示。有没有人见过这样的事情？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:20:22.907

我可能错了，但这对我来说有点道理，如果在 SharePoint 中编辑发布页面，例如所有者字段是页面上的元数据，可以在编辑模式下填写，但是在显示模式下，除非我明确说明，否则不会显示此元数据展示下。页面的编辑模式和显示模式中显示的字段不同，我假设 InfoPath 表单相同。

# dns - 附加部分中的 CNAME 记录

> ID：11196930
> 
> 赞同：4
> 
> 时间：2012-06-25T20:34:18.093
> 
> 标签：dns, rfc1035

RFC 1034+1035 声明 CNAME 记录不应导致额外的部分处理。但是我看到像 wordpress 这样的服务越来越趋向于发送 CNAME 链，其中一部分链位于附加部分。因此，如果不解析附加部分，您将无法解码 DNS 响应。

例子：

```
;; QUESTION SECTION:
;after12.failblog.org.      IN  A

;; ANSWER SECTION:
after12.failblog.org.   3600    IN  CNAME   chzallnighter.wordpress.com.
vip-lb.wordpress.com.   300 IN  A   72.233.104.123
vip-lb.wordpress.com.   300 IN  A   76.74.255.117
vip-lb.wordpress.com.   300 IN  A   74.200.247.187
vip-lb.wordpress.com.   300 IN  A   74.200.247.59
vip-lb.wordpress.com.   300 IN  A   76.74.255.123
vip-lb.wordpress.com.   300 IN  A   72.233.127.217

;; AUTHORITY SECTION:
wordpress.com.      14400   IN  NS  ns1.wordpress.com.
wordpress.com.      14400   IN  NS  ns2.wordpress.com.
wordpress.com.      14400   IN  NS  ns3.wordpress.com.
wordpress.com.      14400   IN  NS  ns4.wordpress.com.
wordpress.com.      14400   IN  NS  ns5.wordpress.com.
wordpress.com.      14400   IN  NS  ns6.wordpress.com.

;; ADDITIONAL SECTION:
chzallnighter.wordpress.com. 300 IN CNAME   vip-lb.wordpress.com.
ns1.wordpress.com.  14400   IN  A   72.233.69.14
ns2.wordpress.com.  14400   IN  A   76.74.159.137
ns3.wordpress.com.  14400   IN  A   64.34.177.159
ns4.wordpress.com.  14400   IN  A   72.233.104.98
ns5.wordpress.com.  14400   IN  A   69.174.248.140
ns6.wordpress.com.  14400   IN  A   64.34.174.135 
```

注意 chzallnighter.wordpress.com。300 在 CNAME vip-lb.wordpress.com 中。位于附加部分，没有它，您将无法访问答案中的 A 记录。

为什么供应商使用这种策略？它真正购买的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:47:03.243

您正在与之交谈的服务器恰好对这两个域都具有权威性，并为您提供它所拥有的一切。智能客户端可以针对这种类型的响应进行优化，避免往返。其中之一是规范的“使网络更快”类型的东西。

一个天真的客户端可能不会注意到服务器对 CNAME 域具有权威性，丢弃附加数据并重新查询 - 确保正确、安全的结果。智能客户端可以通过注意到它已向服务器 X 请求原始域并且服务器 X**也在**CNAME 域的权威服务器列表中来缩短第二个查询。因此附加部分中的 CNAME 是可信的。

# php - 带有变量的 PHP 字符串的短代码

> ID：11196932
> 
> 赞同：1
> 
> 时间：2012-06-25T20:34:28.437
> 
> 标签：php, string, escaping

我有一个包含这样的变量的查询字符串

```
$field_name = 'features';
$value = '5';
$query = "SELECT * FROM Table WHERE $field_name\_tid = '$value'"; 
```

我的目标是打印出 我放在那里的`$query`类似内容，希望它可以用作转义字符，但它没有用。有没有办法在不使用和修改原始变量值之类的方法的情况下实现这一点？`SELECT * FROM Table WHERE features_tid = '5';``\_``". $field_name ."`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:37:01.027

是的：

```
$query = "SELECT * FROM Table WHERE {$field_name}_tid = '$value'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:37:20.500

您可以使用：

```
$query = "SELECT * FROM Table WHERE {$field_name}_tid = '$value'"; 
```

# wxpython - 重绘 wxframe 内容的推荐方法是什么？

> ID：11196936
> 
> 赞同：0
> 
> 时间：2012-06-25T20:34:40.060
> 
> 标签：wxpython

我有一个`wx.Frame`. 我需要不时更改内容。我有一个计时器，每隔几秒钟我检查一次状态，如果状态已经改变，我需要改变框架的内容。

为了做到这一点，我在名为 的框架中`panel.Reparent(None)`创建了一个面板，并创建了一个包含新内容的面板，但该框架并未使用新创建的面板进行更新。我尝试使用破坏（`panel.Destroy()`），但这没有用。

更改框架内容的推荐方法是什么（不仅是数据，我还需要添加和删除 UI 组件）？

类 TestFrame(wx.Frame): def **init** (self): wx.Frame。**init** (self, None, title="双缓冲绘图") self.counter = 0 self.panel = wx.Panel(self, -1) wx.CheckBox(self.panel, -1, "Alpha", (35, 40), (150, 20))

```
 # Create a timer to update the data values
    self.Bind(wx.EVT_TIMER, self.OnTimeout)
    self.timer = wx.Timer(self)
    self.timer.Start(5000)

def OnTimeout(self, evt):
    p  = self.panel
    self.counter = self.counter + 1
    try:
        p.Reparent(None)
    except e:
        print 'B'
    if self.counter % 2 == 0:
       self.panel = wx.Panel(self, -1)
       wx.CheckBox(self.panel, -1, "Alpha", (35, 40), (150, 20))
       self.Show()  #Tried also self.Layout self.Refresh self.Update 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:10:27.973

在运行时添加或删除小部件时，您几乎总是必须在删除或添加小部件后调用 Layout()。通常在父尺寸器上调用 Layout 就可以了，但有时你必须在框架对象上调用它。[你可以在这里](http://www.blog.pythonlibrary.org/2010/06/16/wxpython-how-to-switch-between-panels/)看到一个例子，我只是隐藏了一个面板并显示了另一个。

[我还写了另一个关于动态删除或添加小部件](http://www.blog.pythonlibrary.org/2012/05/05/wxpython-adding-and-removing-widgets-dynamically/)的教程。这也可能对你有帮助。

编辑（6-26-12）：由于 OP 似乎需要一个例子，我写了一个自毁面板：

```
import wx

########################################################################
class PanelOne(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        self.countdown = wx.StaticText(self, label="This panel will self-destruct in 10 seconds")

########################################################################
class PanelTwo(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        txt = wx.StaticText(self, label="Panel Two")

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Panel Smacker")
        self.panelOne = PanelOne(self)
        self.time2die = 10

        self.timer = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.update, self.timer)
        self.timer.Start(1000)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.panelOne, 1, wx.EXPAND)
        self.SetSizer(self.sizer)

    #----------------------------------------------------------------------
    def update(self, event):
        """"""
        if self.time2die < 0:
            self.panelOne.Destroy()
            self.panelTwo = PanelTwo(self)
            self.sizer.Add(self.panelTwo, 1, wx.EXPAND)
            self.Layout()
            self.timer.Stop()
        else:
            msg = "This panel will self-destruct in %s seconds" % self.time2die
            self.panelOne.countdown.SetLabel(msg)
        self.time2die -= 1

if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    frame.Show()
    app.MainLoop() 
```

# java - 静态和实例方法的同步

> ID：11196937
> 
> 赞同：5
> 
> 时间：2012-06-25T20:34:42.570
> 
> 标签：java, thread-safety

我对同步实例方法和静态方法感到困惑。我想编写一个线程安全类，如下所示：

```
public class safe {

  private final static ConcurrentLinkedQueue<Object> objectList=
      new ConcurrentLinkedQueue<Object>();

  /**
   * retrieves the head of the object and prints it
   */
    public synchronized static  void getHeadObject() {
      System.out.println(objectList.peek().toString());

    }

    /**
     * creates a new object and stores in the list.
     */
    public synchronized void addObject() {
      Object obj=new Object();
      objectList.add(obj);

    }
} 
```

在静态方法上同步将锁定 safe.class 锁，而在实例方法上同步将在 this 上锁定。因此将达到不一致的状态。

如果我想为下面的代码片段实现一致的状态，如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:47:10.460

首先，ConcurrentLinkedQueue 不需要显式同步。看到[这个答案](https://stackoverflow.com/a/435941/1059446)。

其次，您始终可以同步您正在访问的对象：

```
public class safe {

      private final static ConcurrentLinkedQueue<Object> objectList=
          new ConcurrentLinkedQueue<Object>();

      /**
       * retrieves the head of the object and prints it
       */
     public static  void getHeadObject() {
         synchronized(objectList){
          System.out.println(objectList.peek().toString());
         }

     }

        /**
         * creates a new object and stores in the list.
         */
     public void addObject() {
          Object obj=new Object();
       synchronized(objectList){
          objectList.add(obj);
       }

     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:39:29.470

**编辑：**我假设你的意思是`Queue<Object> objectList`而不是`ConcurrentLinkedQueue<Object> objectList`. `ConcurrentLinkedQueue<Object>`已经为您完成了所有线程安全，这意味着您可以`objectList.peek()`随心所欲地调用而不必担心竞争条件。如果您正在开发多线程程序，这很好，但对于学习线程安全性来说不是很好。

您的方法不必是`synchronized`，假设您一次有一个线程在对象的一个​​实例上运行，但是如果您需要有多个类的实例都引用同一个静态类变量，则需要`synchronized`覆盖该类像这样的变量：

```
public static void getHeadObject() {
    synchronized(safe.objectList) {
        System.out.println(objectList.peek().toString());
    }
} 
```

一旦程序位于同步块内，这将锁定`objectList`并不允许在任何其他线程中对其进行读取或写入。对所有其他方法执行相同的操作`synchronized`。

**笔记：**

但是，由于您只执行一个简单的 get 操作`List.peek()`，因此您实际上不需要`objectList`在竞争条件下同步 since，它会得到一个值`List`或另一个值。竞争条件的问题是当执行多个复杂的读/写操作时，它们之间的值会发生变化。

例如，如果您有一个`PairInt`具有`PairInt.x`和`PairInt.y`字段的类，具有约束 that `x = 2y`，并且您想做

```
System.out.println(myIntPair.x.toString() + ", " + myIntPair.y.toString()); 
```

另一个线程同时更新 和 的`x`值`y`，

```
myIntPair.y = y + 3;
myIntPair.x = 2 * y; 
```

`myIntPair`并且在您的读取线程之间修改了写入线程`myIntPair.x.toString()`，`myIntPair.y.toString()`您可能会得到一个看起来像 的输出`(10, 8)`，这意味着如果您在假设`x == 2 * y`可能会使程序崩溃的情况下进行操作。

在这种情况下，您的 read 需要使用 a `synchronized`，但对于更简单的事情，例如在队列中添加或删除、未修改`peek()`的简单内容，*在大多数情况下*可以删除。事实上，对于、、等，应该去掉简单读取的条件。`object``synchronized`*`string``int``bool``synchronized`*

 *但是，写入应该始终`synchronized`针对不是明确线程安全的操作，即已经由 java 处理的操作。一旦您获得了多个资源，或者要求您的资源在整个操作过程中保持不变，因为您对其执行多行逻辑，那么您*必须使用* `synchronized`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T09:18:22.763

几点评论：

*   Java 约定：
    *   类名应该在 CamelCase 中（即调用你的类`Safe`，而不是`safe`）
    *   `static``synchronized`在方法声明之前
    *   `static``final`在字段声明之前
*   正如其他人已经说过的那样，`ConcurrentLinkedQueue`它已经是线程安全的，因此在您给出的示例中不需要同步。
*   混合静态和非静态方法的方式看起来很奇怪。
*   假设您的实际用例更复杂，并且您需要一种方法来运行原子操作，那么您的代码不起作用，正如您所指出的，因为 2 个同步方法不在同一个监视器上同步：

```
public static synchronized getHeadObject(){} //monitor = Safe.class
public static synchronized addObject(){} //monitor = this 
```

因此，要回答您的具体问题，您可以使用单独的静态对象作为锁：

```
public class Safe {

    private static final ConcurrentLinkedQueue<Object> objectList =
            new ConcurrentLinkedQueue<Object>();
    // lock must be used to synchronize all the operations on objectList
    private static final Object lock = new Object();

    /**
     * retrieves the head of the object and prints it
     */
    public static void getHeadObject() {
        synchronized (lock) {
            System.out.println(objectList.peek().toString());
        }
    }

    /**
     * creates a new object and stores in the list.
     */
    public void addObject() {
        synchronized (lock) {
            Object obj = new Object();
            objectList.add(obj);
        }
    }
} 
```*

# clojure - Clojure 中使用惰性序列的整数溢出

> ID：11196940
> 
> 赞同：8
> 
> 时间：2012-06-25T20:34:52.627
> 
> 标签：clojure, lazy-evaluation, integer-overflow

我刚刚学习在 Clojure 中使用惰性序列，我不确定我在以下代码中做错了什么：

```
(defn sum [seqn]
  (reduce + seqn))

(defn fib
  ([] (concat [0 1] (fib 0 1)))
  ([a b] (lazy-seq (cons (+ a b) (fib b (+ a b))))))

(defn up-to [n seqn]
  (filter (fn [x] (< x n)) seqn))

(sum (up-to 100 (fib))) => ArithmeticException integer overflow  clojure.lang.Numbers.throwIntOverflow (Numbers.java:1388) 
```

相加的数字不应大于`100`，那么是什么导致整数溢出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T21:03:32.473

过滤一个无限序列会产生一个无限序列，并且减少它会导致过滤器继续寻找另一个匹配项，即使在谓词停止返回 true 之后也是如此。

替换`filter`为`take-while`。生成的无限序列`(fib)`将导致`filter`永远运行，但在此之前它将因`ArithmeticException`您正在经历而中断。在谓词评估为假`take-while`后，将停止对列表的进一步评估。`(fn [x] (< x n))`

```
(defn up-to [n seqn]
  (take-while (fn [x] (< x n)) seqn))

(sum (up-to 100 (fib))) ;; => 232 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-25T20:59:28.813

从 clojure 1.3.0 开始，数字不会自动升级为 bigInt/bigDecimal。

`+'`改为修复此用途

你的第 100 个 fibinachi 数字对于整数来说太大了

```
user> (nth (fib) 100)
354224848179261915075N 
```

# c - i = post_increment_i() 的行为是指定的、未指定的还是未定义的？

> ID：11196956
> 
> 赞同：6
> 
> 时间：2012-06-25T20:36:19.997
> 
> 标签：c, language-lawyer, undefined-behavior, operator-precedence, sequence-points

考虑以下 C 程序：

```
int i = 0;

int post_increment_i() { return i++; }

int main() {
    i = post_increment_i();
    return i;
} 
```

对于 2011 版本的 C 标准（称为 C11），以下哪个替代方案是正确的：

1.  C11 保证 main 返回 0。
2.  C11 保证 main 返回 0 或 1。
3.  根据 C11，该程序的行为未定义。

C11 标准的相关片段：

*   5.1.2.3 程序执行

    > 访问 volatile 对象、修改对象、修改文件或调用执行任何这些操作的函数都是副作用，它们是执行环境状态的变化。表达式的评估通常包括值计算和副作用的启动。左值表达式的值计算包括确定指定对象的身份。
    > 
    > 之前排序是由单个线程执行的评估之间的不对称、传递、成对关系，这导致这些评估之间存在偏序。给定任意两个评估 A 和 B，如果 A 在 B 之前排序，则 A 的执行应先于 B 的执行。（相反，如果 A 在 B 之前排序，则 B 在 A 之后排序。）如果 A 没有排序在 B 之前或之后，则 A 和 B 是无序的。当 A 在 B 之前或之后排序时，评估 A 和 B 的排序不确定，但未指定哪个。^(13)在表达式 A 和 B 的评估之间存在一个序列点意味着与 A 相关的每个值计算和副作用都在与 B 相关的每个值计算和副作用之前排序。（序列点的摘要在附件 C 中给出.)
    > 
    > 13) 未排序评估的执行可以交错。不确定顺序的评估不能交错，但可以以任何顺序执行。

*   6.5 表达式

    > 表达式是一系列运算符和操作数，它们指定值的计算，或指定对象或函数，或产生副作用，或执行它们的组合。运算符的操作数的值计算在运算符结果的值计算之前排序。
    > 
    > 如果标量对象的副作用相对于同一标量对象的不同副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。如果表达式的子表达式有多个允许的排序，则如果在任何排序中出现这种未排序的副作用，则行为未定义。

*   6.5.2.2 函数调用

    > 在函数指示符和实际参数的评估之后但在实际调用之前有一个序列点。调用函数（包括其他函数调用）中的每个求值，如果在被调用函数的主体执行之前或之后没有特别排序，则相对于被调用函数的执行是不确定的。^(94)
    > 
    > 94) 换句话说，函数执行不会相互“交错”。

*   6.5.2.4 后缀递增和递减运算符

    > 后缀 ++ 运算符的结果是操作数的值。作为副作用，操作数对象的值会递增（即，将相应类型的值 1 添加到其中）。[...]结果的值计算在更新操作数的存储值的副作用之前排序。对于不确定顺序的函数调用，后缀 ++ 的操作是单次求值。

*   6.5.16 作业

    > 赋值运算符将值存储在左操作数指定的对象中。[...]更新左操作数的存储值的副作用是在左操作数和右操作数的值计算之后排序的。操作数的评估是无序的。

*   6.8 语句和块

    > 完整表达式是不属于另一个表达式或声明符的表达式。以下每一项都是完整的表达式： [...] 表达式语句中的表达式；[...] return 语句中的（可选）表达式。在完整表达式的评估和要评估的下一个完整表达式的评估之间存在一个序列点。

上述三种备选方案分别对应以下三种情况：

1.  后缀增量运算符的副作用在 main 中的赋值之前排序。
2.  后缀自增运算符的副作用在 main 赋值之前或之后排序，C11 没有指定哪个。（换句话说，这两种副作用的顺序是不确定的。）
3.  这两种副作用是无序的。

通过以下推理链，第一种选择似乎成立：

*   考虑以下规则**：调用函数（包括其他函数调用）中的每个求值，如果在被调用函数的主体执行之前或之后没有特别排序，则相对于被调用函数的执行是不确定的。**在 6.5.2.2 中。假设 A：main 中赋值运算符的副作用就是这样的“评估”。假设B：短语“被调用函数的执行”既包括后缀自增算子的值计算，也包括后缀自增算子的副作用。根据这些假设和上述规则，要么 I) 后缀增量运算符的值计算和副作用都排在 main 中赋值运算符的副作用之前，要么 II) 值计算和副作用后缀自增运算符都在 main 中赋值运算符的副作用之后排序。

*   考虑规则**更新左操作数的存储值的副作用是在左操作数和右操作数的值计算之后排序的。**该规则排除了上述情况 I。因此，情况 II 成立。量子点

总的来说，这看起来是一个非常有力的论点。此外，它对应于人们直觉上认为最可能的替代方案。

但是，它确实依赖于对术语“评估”和“被调用函数的执行”（假设 A 和 B）的具体解释以及不完全直截了当的推理，所以我想把它放在那里看看人们是否有有理由相信这种解释是不正确的。请注意，脚注 94 仅在它也适用于调用者不与被调用者交错的情况下才与此解释等效，这反过来意味着“交错”意味着“abab”意义上的交错，因为显然调用者与较弱的“aba”意义上的被调用者。还，`i = i++`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-25T20:41:59.043

[*我的回答基于更简单的 C99 标准，而且 C11 极不可能引入重大更改：* ]

这段代码的这种行为是明确定义的：`main`返回`0`。在语句中的完整表达式之后有一个序列点`return`（参见 C99，附件 C），因此副作用在分配到in`i++`之前生效。`i``main`

# format - 数据类型和文件结构

> ID：11196962
> 
> 赞同：0
> 
> 时间：2012-06-25T20:36:42.100
> 
> 标签：format, hex, type-conversion

我有兴趣使用数据类型和文件格式。
例如，我想用 php 打开一个 jpeg 文件并使用它。
例如获取大小，或者将其更改为没有任何库的黑白。
我想知道如何解码文件的字节并获取有关它的信息？
我用 HxD 打开了一个 jpeg 文件，看到了一些十六进制的数据。
请给我参考以了解有关文件和结构的更多信息...
抱歉英语不好。
非常感谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:47:45.267

许多图像文件使用[可交换图像文件格式进行编码](http://en.wikipedia.org/wiki/Exchangeable_image_file_format)

在 PHP 中你可以使用类似这样的方法：

[http://php.net/manual/en/function.exif-read-data.php](http://php.net/manual/en/function.exif-read-data.php)

这将允许您访问存储在图像标题中的图像的不同属性，例如分辨率、字节序等，然后您可以使用这些属性读取原始图像数据。

原始图像数据通常存储在图像标题之后。

这是 Jpeg 文件交换格式 (JFIF) 的规范：

[http://www.jpeg.org/public/jfif.pdf](http://www.jpeg.org/public/jfif.pdf)

此外，在 PHP 中，如果您只是读取原始图像数据，您将使用：

```
$file = 'picture.jpg';
readFile($file); 
```

然后您可以使用以下命令在浏览器中显示它：

```
header('Content-type: image/jpeg'); 
```

# c# - Win 表单选项卡控件页眉布局

> ID：11196967
> 
> 赞同：0
> 
> 时间：2012-06-25T20:37:04.427
> 
> 标签：c#

我希望是一个简单的问题.... 我有一个带有选项卡控件和 12 个选项卡的 Win 表单。当我添加八个表（及更高）时，选项卡标题中的滚动条会出现，您必须使用该控件滚动才能查看额外的选项卡。您如何更改布局以使选项卡全部显示而没有滚动条？是否可以让它们出现“堆叠”或“多行”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:42:32.933

将`Multiline`属性设置为`true`。

```
tabControl1.Multiline = true; 
```

就如此容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:40:12.327

我认为我之前没有看到您所描述的内容，除非由于某种原因我不小心没有设置控件的正确宽度。您是否尝试将宽度设置为小于您所描述区域的宽度......并且也许确保使用像素值与百分比只是为了缩小范围。

# internet-explorer - 在 Visual Basic 中将焦点设置为 Internet Explorer 对象

> ID：11196968
> 
> 赞同：4
> 
> 时间：2012-06-25T20:37:05.120
> 
> 标签：internet-explorer, vba, setfocus

有人知道如何使用 Visual Basic 将焦点设置到 IE 对象上吗？我试过`myieobject.SetFocus`了，但是这个语句的编译器错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-26T02:05:20.317

在执行一个功能后，我需要一个我的电子表格来“设置焦点”到 Internet Explorer，这样我就不必费心点击它了。这就是我发现的工作：

```
 Const myPageTitle As String = "Title of my webpage"
      Const myPageURL As String = "http://www.mywebpage.com"
      Dim myIE As SHDocVw.InternetExplorer
      Dim myIE As InternetExplorer
      Set myIE = GetOpenIEByTitle(myPageTitle, False)

      myIE.visible = false
      DoEvents
      myIE.visible = true  
     'for some reason, making the page invisible then visible always ensures it pops up

    Function GetOpenIEByTitle(i_Title As String, _
                          Optional ByVal i_ExactMatch As Boolean = True) As SHDocVw.InternetExplorer
Dim objShellWindows As New SHDocVw.ShellWindows

  If i_ExactMatch = False Then i_Title = "*" & i_Title & "*"
  'ignore errors when accessing the document property
  On Error Resume Next
  'loop over all Shell-Windows
  For Each GetOpenIEByTitle In objShellWindows
    'if the document is of type HTMLDocument, it is an IE window
    If TypeName(GetOpenIEByTitle.document) = "HTMLDocument" Then
      'check the title
      If GetOpenIEByTitle.document.Title Like i_Title Then
        'leave, we found the right window
        Exit Function
      End If
    End If
  Next
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-30T12:31:33.833

试试这个：

```
'First, hide the object even if it's visible
myieobject.Visible = False
' Second, show the object to focusing
myieobject.Visible = True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T21:40:00.240

设置`.Visible=True`- 如果您在弹出窗口的某处丢失了屏幕，则必须循环浏览窗口标题以激活特定标题。

```
Dim objShell As Shell
Dim objIndex As InternetExplorer

Set objShell = New Shell

For Each objIndex In objShell.Windows
    If TypeName(objIndex.Document) = "HTMLDocument" Then
        If InStr(objIndex.Document.Title, "Stack Overflow") > 0 Then
            objIndex.Visible = True
            Exit For
        End If
    End If
Next objIndex 
```

以下是您*可以*使用 IE 对象执行的操作：[MSDN](http://msdn.microsoft.com/en-us/library/aa752084%28VS.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-27T15:05:38.517

试试这个。通过 shell 命令打开 Internet Explorer，您可以在其中定义焦点（这是焦点和小窗口），然后捕获该 shell/explorer 窗口并将其定义为 Internet Explorer 对象。也许有比睡觉更好的方法来等待。

```
Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Sub call_IE()
Dim IE As InternetExplorer
Dim htmldoc As HTMLDocument

Set IE = Open_Focused_explorer()
IE.Navigate "google.com"
Set htmldoc = IE.Document

End Sub

Function Open_Focused_explorer() As InternetExplorer
Dim shellWins As ShellWindows

'if windows are 64bit IE is on diferent location
#If Win64 Then
     Shell "C:\Program Files (x86)\Internet Explorer\iexplore.exe", vbNormalFocus
#Else
    Shell "C:\Program Files\Internet Explorer\iexplore.exe", vbNormalFocus
#End If

 'wait until explorer is full loaded
 Sleep 4000

 On Error Resume Next
    'create collection of all explorers
  Set shellWins = New ShellWindows

    If shellWins.Count > 0 Then
        ' Get last one
        Set Open_Focused_explorer = shellWins.Item(shellWins.Count - 1)
    End If
On Error GoTo 0

End Function 
```

# ios - 在简单类 object-c 中使用 ARC

> ID：11196975
> 
> 赞同：0
> 
> 时间：2012-06-25T20:37:50.517
> 
> 标签：ios, nsstring, automatic-ref-counting, retain

我想在我的简单类中使用 ARC，在其中存储一些值以传递给另一个类。我想知道我必须在属性中使用什么参考。要在 ARC 中使用它，我有这个：

```
@interface MyItem : NSObject
@property (retain) NSString *valueID;
@property (retain) NSString *itName;
@property (retain) NSDate *creationDate;
@property (assign) float rating; 
```

这是一个非常简单的类，我想知道如何在 ARC 中使用它。我必须使用什么参考？我必须为 NSString 等使用副本吗？

编辑：

如果我有一个 UIViewController，并且我想使用 NSString 和 MyItem 对象的属性，如下所示：

```
@interface MyViewController : UIViewController

@property (nonatomic, retain) NSString *myString;
@property (nonatomic, retain) MyItem *newItem; 
```

对于 NSString 和 MyItem 对象，我必须使用什么参考？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T20:40:31.743

您想使用`strong`而不是`retain`. 是的，你仍然应该使用`copy`for `NSString`s。的使用`copy`与ARC无关；您想要`copy`，因为如果有人将 an 分配`NSMutableString`给您的财产，您不希望字符串在您背后改变。Using`copy`为您提供了分配发生时可变字符串的不可变快照。

* * *

这是在视图控制器示例中声明属性的推荐方法：

```
@interface MyViewController : UIViewController

@property (nonatomic, copy) NSString *myString;
@property (nonatomic, strong) MyItem *newItem; 
```

`NSString`也可以声明`strong`，但对于`copy`字符串（以及实际上任何具有可变变体的不可变类型，例如数组、字典等）几乎总是更可取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T20:41:36.423

（非原子，强）是我使用的，但这里是[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

或快速参考

> 二传手语义
> 
> 这些属性指定集合访问器的语义。它们是相互排斥的。
> 
> **strong**指定与目标对象存在强（拥有）关系。
> 
> **弱**指定与目标对象存在弱（非拥有）关系。
> 
> 如果目标对象被释放，属性值会自动设置为 nil。
> 
> （OS X v10.6 和 iOS 4 不支持弱属性；请改用 assign。）
> 
> **copy**指定应使用对象的副本进行分配。
> 
> 先前的值被发送一个释放消息。
> 
> 复制是通过调用复制方法来制作的。此属性仅对必须实现 NSCopying 协议的对象类型有效。
> 
> **assign**指定 setter 使用简单赋值。此属性是默认值。
> 
> 您可以将此属性用于标量类型，例如 NSInteger 和 CGRect。
> 
> **保留**指定在分配时应在对象上调用保留。
> 
> **原子性**
> 
> 您可以使用此属性来指定访问器方法不是原子的。（没有关键字来表示原子。）
> 
> **nonatomic**指定访问器是非原子的。默认情况下，访问器是原子的。

# typo3 - TYPO3 tx_newscalendar / tt_news - 在 listView 中显示链接

> ID：11196978
> 
> 赞同：0
> 
> 时间：2012-06-25T20:37:52.013
> 
> 标签：typo3, tt-news

新闻站点的 RTE 链接未显示在 tt_news 列表中。我可以用这个 TS for tt_news 显示它

```
plugin.tt_news.displayList {
    content_stdWrap.parseFunc < lib.parseFunc_RTE
}

#or

plugin.tt_news {
   general_stdWrap.parseFunc = < lib.parseFunc_RTE
} 
```

这两种方法都出现在[Ext Manual](http://typo3.org/extension-manuals/tt_news/2.5.0/view/1/7/)中。这就是重点，在tx_newscalendar的[Ext Manual](http://typo3.org/extension-manuals/newscalendar/2.1.6/view/4/1/)中没有这样的东西。)-:

我有一些用 tt_news fe 插件显示的新闻。

但在另一个页面上，我需要使用 tx_newscalendar fe 插件显示新闻。我找不到与 newscalendar 一起工作的解决方案。我希望 newscalendar 的 parseFunc 继承自 tt_news，但不是。

我尝试了类似的东西，它显示在 ts objectbrowser

```
plugin.tx_newscalendar_pi1
   listView.content_stdWrap.parseFunc < lib.parseFunc_RTE
} 
```

但链接在源代码中显示如下：

```
<link htpp:mydomainde="" />Mysite</link> 
```

为什么是**htpp:**，这看起来真的很罕见？

可以在插件的[Ext 手册](http://typo3.org/extension-manuals/newscalendar/2.1.6/view/4/1/)中找到的 plugin.tx_newscalendar_pi1.render.parserFunction 仅适用于 htmlentities，不适用于 parseFunc_RTE。

有人知道，如何在 newscalendar 列表中显示链接？

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:02:18.867

伙计，有时它是类型学的;-)

我得到与上述 tt_news 相同的结果：

```
plugin.tx_newscalendar_pi1 {
    listView.subheader_stdWrap.parseFunc < lib.parseFunc_RTE
} 
```

我在日历列表模板中看到， tx_newscalendar 使用标记子标题获取它的内容......因此它可以覆盖 stdWrap 。

所以问题就解决了。

# jquery-mobile - 从 jQuery Mobile 1.0 升级到 1.1.0 并且按钮没有响应

> ID：11196987
> 
> 赞同：0
> 
> 时间：2012-06-25T20:38:16.947
> 
> 标签：jquery-mobile

所以我看了一遍，似乎没有多少人有这么大的问题，但我认为 jquery.mobile 改变了他们动画按钮按下动作的方式。

在 jQuery Mobile 1.0.0 中，当您按下按钮时，按钮操作立即完成（android 2.x）（我正在处理的网站是 m.schedulicity.com（不是试图做广告，但它的 1.0 并且它工作正常在手机上很好））。

但是当我们升级到移动版 1.1.0 时，按钮并没有像以前那样响应。如果我按住按钮，动作状态最终将设置（如 0.2 秒，但如果只是点击按钮（css 明智）但按钮仍被“点击”只是没有动画，它根本不会响应）。

如果您有任何建议，我将不胜感激。

## 笔记：

我知道你不能自我推销，我也不想自我推销（通过链接），但我想给出一个 jquery1.0 工作的真正例子。1.1.0 还没有发布，所以我不能给。但我将 css 结构和 jquery mobile 升级到 1.1.0，一切正常，只是速度较慢。因此，按钮不会在点击时显示为“按下”，但在按住时会显示为“按下”。

谢谢

# php - htaccess 重定向正在附加一个查询字符串

> ID：11196999
> 
> 赞同：1
> 
> 时间：2012-06-25T20:38:50.280
> 
> 标签：php, apache, .htaccess, codeigniter

如果我访问rocketroofing.us/rocket，它会将我重定向到rocketroofing.us/rochester-minnesota-roofing-contractor?/rocket。为什么要附加该查询字符串，我该如何解决？

.ht 访问：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]

    # redirect from the old controller names to the new ones to try and help our SEO.
    #redirect 301 / http://rocketroofing.us/rochester-minnesota-roofing-contractor
    redirect 301 /rocket http://rocketroofing.us/rochester-minnesota-roofing-contractor
    redirect 301 /about http://rocketroofing.us/about-rochester-rocket-roofing
    redirect 301 /faq http://rocketroofing.us/frequently-asked-questions
    redirect 301 /contact http://rocketroofing.us/contact-minnesota-roofing-company

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

路线：

```
$route['default_controller'] = "rocket";
$route['404_override'] = '';
// used to try and increase my SEO
$route['rochester-minnesota-roofing-contractor'] = 'rocket';
$route['about-rochester-rocket-roofing'] = 'about';
$route['frequently-asked-questions'] = 'faq';
$route['contact-minnesota-roofing-company'] = 'contact'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T20:53:56.423

您在此处请求行为：

```
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

这`$1`是对您在正则表达式中匹配的任何内容的反向引用`.*`。

除非您像这样定义自己的查询字符串，否则将使用该查询字符串：

```
redirect 301 /rocket http://rocketroofing.us/rochester-minnesota-roofing-contractor? 
```

注意尾随的问号。记录[在这里](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)：

> 默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。要组合新旧查询字符串，请使用 [QSA] 标志。