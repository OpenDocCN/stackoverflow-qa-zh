# StackOverflow 问答 11592000-11592999

# matlab - mex 内存分配 mxRealloc

> ID：11592008
> 
> 赞同：0
> 
> 时间：2012-07-21T12:03:59.337
> 
> 标签：matlab, memory-management, mex, realloc

我必须读取一个双精度矩阵，处理它的值并将它们插入一个新矩阵中，它的一个维度在开始时是未知的。

在静态内存分配中，我的代码是：

```
#include <mex.h>

void mexFunction( int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[] )
{
  const mxArray *I = prhs[0];
  double *indata = mxGetPr(I);
  double *submtx = mxGetPr(prhs[1]);
  const int *size = mxGetDimensions(I);
  int xp = (int)submtx[0], yp = (int)submtx[1], zp = (int)submtx[2];
  int xi = size[0], yi = size[1], zi = size[2];

  int numsubmtx = (xi - xp + 1)*(yi - yp + 1)*(zi - zp + 1);
  int out_rows = xp*yp*zp;
  int out_cols = numsubmtx;
  mxArray *out = mxCreateDoubleMatrix( out_rows, out_cols, mxREAL );
  double *outdata = mxGetPr(out);

  int submtx_counter = 0;
  for( int z_offset = 0; ...; z_offset++ ){
        for( int y_offset = 0; ...; y_offset++ ){
              for( int x_offset = 0; ...; x_offset++ ){
                    int row = 0;
                    for( int z_counter = 0; ...; z_counter++ ){
                          for( int y_counter = 0; ...; y_counter++ ){
                                for( int x_counter = 0; ...; x_counter++ ){
                                      outdata[submtx_counter*out_rows + row] = 
                                            indata[ (x_offset+x_counter) + (y_offset+y_counter)*xi + (z_offset+z_counter)*xi*yi ];
                                      ++row;
                                }}}
              ++submtx_counter;
              }}}
  plhs[0] = out;
} 
```

在动态版本中，我不知道 的值，因此当满足的值的条件时`out_cols`，我必须重新分配。`*out``indata`

我的想法是这样的：

```
#include <mex.h>

void mexFunction( int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[] )
{
  const mxArray *I = prhs[0];
  double *indata = mxGetPr(I);
  double *submtx = mxGetPr(prhs[1]);
  const int *size = mxGetDimensions(I);
  int xp = (int)submtx[0], yp = (int)submtx[1], zp = (int)submtx[2];
  int xi = size[0], yi = size[1], zi = size[2];

  int numsubmtx = (xi - xp + 1)*(yi - yp + 1)*(zi - zp + 1);
  int out_rows = xp*yp*zp;
  //int out_cols = numsubmtx; NOW UNKNOWN!
  mxArray *out = NULL;
  double *outdata = mxGetPr(out);

  int submtx_counter = 0;
  for( int z_offset = 0; ...; z_offset++ ){
        for( int y_offset = 0; ...; y_offset++ ){
              for( int x_offset = 0; ...; x_offset++ ){
                    int row = 0;
                    double condition=0;
                    for( int z_counter = 0; ...; z_counter++ ){
                          for( int y_counter = 0; ...; y_counter++ ){
                                for( int x_counter = 0; ...; x_counter++ ){
                                      condition += indata[ (x_offset+x_counter) + (y_offset+y_counter)*xi + (z_offset+z_counter)*xi*yi ]/(xp*yp*zp);
                                      ++row;
                                }}}
                    if(coundition>0.5){
                      out = mxRealloc(out, (submtx_counter+1)*out_rows*sizeof(double));
                      double *outdata = mxGetPr(out);
                      int row = 0;
                      for( int z_counter = 0; ...; z_counter++ ){
                          for( int y_counter = 0; ...; y_counter++ ){
                                for( int x_counter = 0; ...; x_counter++ ){
                                      outdata[submtx_counter*out_rows + row] = indata[ (x_offset+x_counter) + (y_offset+y_counter)*xi + (z_offset+z_counter)*xi*yi ];
                                      ++row;
                                }}}
              ++submtx_counter;
              }
              }}}
  plhs[0] = out;
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:10:49.963

我没有仔细查看您的代码的逻辑，但我可以看到以下问题：

```
mxArray *out = NULL;
double *outdata = mxGetPr(out); 
```

和

```
out = mxRealloc(out, (submtx_counter+1)*out_rows*sizeof(double)); 
```

会有奇怪的行为。An`mxArray`是一个结构体，您希望为结构体指向的数据而不是结构体本身重新分配内存。相反，尝试

```
double *outdata = mxMalloc(out_rows*sizeof(double)); 
```

和

```
outdata = mxRealloc(outdata, (submtx_counter+1)*out_rows*sizeof(double)); 
```

然后在最后，创建你的输出矩阵：

```
mxArray *out = mxCreateDoubleMatrix(out_rows, submtx_counter, mxREAL);
mxSetPr(out, outdata);
plhs[0] = out; 
```

这将保证中的元数据`out`为您提供正确大小的矩阵等。

# algorithm - 在分析计算机算法时理解关于机器字长的假设

> ID：11592009
> 
> 赞同：12
> 
> 时间：2012-07-21T12:04:08.637
> 
> 标签：algorithm, integer

我正在阅读Thomas H. Cormen、Charles E. Leiserson、Ronald L. Rivest、Clifford Stein 的《算法[简介](http://highered.mcgraw-hill.com/sites/0070131511/)》一书。在“分析算法”的第二章中提到：

> 我们还假设每个数据字的大小有限制。例如，在处理大小为 n 的输入时，我们通常假设整数由 c lg n 位表示，对于某些常数 c>=1 。我们要求 c>=1 以便每个单词都可以保存 n 的值，使我们能够索引各个输入元素，并且我们将 c 限制为常数，这样单词大小就不会任意增长。（如果单词大小可以任意增长，我们可以在一个单词中存储大量数据并在恒定时间内对其进行操作——这显然是一个不现实的场景。）

我的问题是为什么每个整数应该由 c lg n 位表示的假设以及 c>=1 的情况如何允许我们索引各个输入元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T13:57:48.730

首先，`lg`它们显然是指以 2 为底的对数，因此.`lg n`中的位数也是如此`n`。

那么他们的意思是，如果他们有一个采用数字列表的算法（我在我的示例中更加具体，以帮助使其更容易理解），`1,2,3,...n`那么他们假设：

*   内存中的“单词”足以容纳任何这些数字。

*   内存中的“单词”不足以容纳*所有*数字（在一个单词中，以某种方式打包）。

*   在计算算法中的“步数”时，对一个“单词”的操作需要一步。

他们这样做的原因是为了保持分析的真实性（您只能在“本机”类型中存储一定大小的数字；之后您需要切换到任意精度库）而不选择特定示例（如 32 位整数）这在某些情况下可能不合适，或者已经过时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T13:58:09.987

您至少需要 lg n 位来表示大小为 n 的整数，因此这是存储大小为 n 的输入所需的位数的下限。设置常数 c >= 1 使其成为下限。如果常数乘数小于 1，则您将没有足够的位来存储 n。

这是 RAM 模型中的一个简化步骤。它允许您将每个单独的输入值视为可以在内存的单个插槽（或“单词”）中访问，而不用担心可能出现的并发症。（如果我们使用允许不同字长的模型，加载、存储和复制不同字长的值将花费不同的时间。）这就是“使我们能够索引单个输入元素”的意思。假设问题的每个输入元素都可以在单个地址或索引处访问（意味着它适合一个内存字），从而简化了模型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-19T16:30:07.430

这个问题是很久以前提出的，这些解释对我很有帮助，但我觉得关于 lg n 是如何产生的，还有更多的澄清。对我来说，谈论事情真的很有帮助：

让我们选择一个以 10 为底的随机数，比如 27，我们需要 5 位来存储它。为什么？好吧，因为 27 在二进制中是 11011。注意 11011 有 5 个数字，每个“数字”就是我们所说的位，因此是 5 位。

将每一位视为一个插槽。对于二进制，这些插槽中的每一个都可以容纳 0 或 1。我可以用 5 位存储的最大数字是多少？好吧，最大的数字将填满每个插槽：11111

11111 = 31 = 2^5 所以要存储 31 我们需要 5 位，而 31 是 2^5

通常（为了清楚起见，我将使用非常明确的名称）：

numToStore = 2 ^ numBitsNeeded

由于 log 是指数的数学倒数，我们得到： log(numToStore) = numBitsNeeded

由于这可能不会导致整数，因此我们使用 ceil 将我们的答案四舍五入。因此，应用我们的示例来找出存储数字 31 需要多少位：

log(31) = 4.954196310386876 = 5 位

# compilation - 在 OpenVZ VPS 上编译 DAHDI：内核问题

> ID：11592010
> 
> 赞同：0
> 
> 时间：2012-07-21T12:04:33.630
> 
> 标签：compilation, kernel, centos, asterisk, openvz

内核版本： `2.6.32-042stab057.1`

`rpm -qa | grep -i kernel`结果：

```
vzkernel-headers-2.6.32-042stab057.1.i686
libreport-plugin-kerneloops-2.0.9-5.el6.centos.i686
vzkernel-firmware-2.6.32-042stab057.1.noarch
abrt-addon-kerneloops-2.0.8-6.el6.centos.i686
vzkernel-devel-2.6.32-042stab057.1.i686 
```

当我发送命令 make 我得到这个错误：

```
You do not appear to have the sources for the 2.6.32-042stab057.1 kernel installed. 
```

操作系统：Centos 6.3 Final

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:37:27.857

我对 OpenVZ 不是很熟悉，但是从您提供的信息来看，您似乎没有内核源代码。您有 kernel-devel 和 kernel-headers，但没有内核本身。

您可以在这里下载内核：http: [//download.openvz.org/kernel/branches/rhel6-2.6.32/042stab057.1/vzkernel-2.6.32-042stab057.1.i686.rpm](http://download.openvz.org/kernel/branches/rhel6-2.6.32/042stab057.1/vzkernel-2.6.32-042stab057.1.i686.rpm)

接着：`rpm -ivh vzkernel-2.6.32-042stab057.1.i686.rpm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T05:54:56.113

你需要

1.  可以访问主节点，在其上编译星号

2.  将 dahdi 设备转发到容器（通过容器配置）

3.  从主节点 kernel-devel 包复制，在容器中编译 dahdi。

读这个

[http://openvz.org/Asterisk_from_source](http://openvz.org/Asterisk_from_source)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T21:09:15.080

我在我的新 VPS 上编译它时遇到了同样的问题。我能够从[http://wiki.openvz.org/Download/kernel/rhel6/042stab057.1](http://wiki.openvz.org/Download/kernel/rhel6/042stab057.1)找到的文件中 安装所有这些 RPM 下载/安装这些 RPM，你会很高兴的。

# vim - 使用 vimwiki 时覆盖显示的文本

> ID：11592012
> 
> 赞同：4
> 
> 时间：2012-07-21T12:04:38.837
> 
> 标签：vim, word-wrap

我正在使用 vimwiki，它允许您编写类似`[[wiki link ...|name link]]`. 如果您处于编辑模式并且在带有链接的行中，那么您会看到真实的文件内容，否则您只会看到“名称链接”。（与 vim 帮助 |links| 类似）。

但是 vim 计算换行时使用的是真实内容而不是显示的内容。

我想让 vim 使用显示的字符来计算换行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T12:38:31.363

vimwiki 使用相对较新的*隐藏*功能来隐藏部分链接，就像 Vim 帮助中的标记一样。不过，隐藏文本的错觉不是很深，而且 Vim 命令以及换行仍然对全文进行操作。核心 Vim 实现需要扩展才能得到你想要的；有人需要编写补丁（和相应的测试）。

然而，目前还不清楚这应该采取多远。毕竟，Vim 是一个文本编辑器，而不是 WYSIWYG。*隐藏*功能是一个很好的方便和视觉技巧，而不是核心功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-05T07:06:09.333

您可以管理最终写入磁盘的实际内容的状态，而不是使用隐藏功能。正如您所看到的，这是一种复杂的方法，并且充满了可能导致数据丢失的极端情况。与此类似的 Web 编辑器是富文本编辑器，众所周知，它很难做到*正确*。

# xml - XML 中的 Unicode 字符串

> ID：11592013
> 
> 赞同：16
> 
> 时间：2012-07-21T12:04:41.893
> 
> 标签：xml, unicode

在xml中unicode表示如下：

例如：

```
\ue349 
```

如果我想写一个由两个字符组成的字符串怎么办？

这如何在 XML 中表示？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-21T12:26:04.367

XML 不使用`\ue349`符号。可以使用以 开头的[字符引用，但大多数情况下不需要它们。](http://www.w3.org/TR/REC-xml/#dt-charref)`&#`XML 通常与 UTF-8 字符编码一起使用，因此每个字符都可以这样编写。（在程序中生成 XML 时，您可能会使用`\ue349`编程语言支持的符号。）

在 Unicode 中，数字 E343 和 E312 指的是私人使用代码点，标准没有为其分配任何字符。私人协议可以根据需要使用它们，但您不应期望任何软件或任何人理解它们，除非此类协议。考虑到这一点，代码点 U+E343 U+E312（以及因此它们可能通过某种协议表示的字符）可以写为`&#xe343;&#xe312;`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-21T12:07:16.657

`<node>&#xE343;&#xE312;</node>`

# android - 将按钮可点击属性设置为 false

> ID：11592014
> 
> 赞同：4
> 
> 时间：2012-07-21T12:04:43.423
> 
> 标签：android, onclicklistener

我需要禁用`click-event`Android 中的按钮。作为示例，我尝试执行以下操作。我已将其`TextView`命名为*Name* （输入文本） 。条件检查是否`TextView`为空按钮并且可点击应设置为 false。但是，在打印 Toast 时不会发生这种情况。谁能告诉我原因。此外，如果文本字段不为空，我想将`clickable event`for 按钮重置为 true。

**Java 文件：**

```
public class ButtonclickabkeActivity extends Activity {
    TextView tv;
    Button btn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        tv = (TextView) findViewById(R.id.textView1);
        tv.setText("Name");
        btn = (Button) findViewById(R.id.button1);

        if (tv.getText().toString().length() != 0) {
            btn.setClickable(false);
            Toast.makeText(getApplicationContext(), "" + tv.getText().toString().length(), Toast.LENGTH_LONG).show();
        } else {
            btn.setClickable(true);
        }
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                Toast.makeText(getApplicationContext(), "Button clicked", Toast.LENGTH_LONG).show();
            }
        });
    }
} 
```

**XML 文件：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="@string/hello"/>
    <TextView 
        android:text="TextView" 
        android:id="@+id/textView1" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"/>
    <Button 
        android:text="Button" 
        android:id="@+id/button1" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T12:08:56.550

利用

```
btn.setEnable(false); 
```

代替

```
btn.setClickable(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T12:24:10.030

用户 370305 是正确的。`.setEnable`就是你要找的。或者您可以`android:clickable`在布局 XML 文件中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T11:26:45.017

就我而言

```
getActivity().runOnUiThread(new Runnable() {
    @Override
    public void run() {
         view.setEnabled(false);
    }
 }); 
```

# google-chrome - 从 WebKit 中删除了对 target-densitydpi 的支持

> ID：11592015
> 
> 赞同：28
> 
> 时间：2012-07-21T12:04:58.340
> 
> 标签：google-chrome, webkit

根据这个[https://bugs.webkit.org/show_bug.cgi?id=88047](https://bugs.webkit.org/show_bug.cgi?id=88047) WebKit 从视口参数中删除了对 target-densitydpi 的支持。不幸的是，错误描述既没有说明更改的动机，也没有说明解决方法。

某些想要防止在移动设备上缩放的网页具有以下视口声明：

```
<meta name="viewport" content="width=device-width, 
initial-scale=1.0, maximum-scale=1.0, 
user-scalable=no, target-densitydpi=device-dpi"/> 
```

现在此代码在 Chrome 中输出错误（使用 21.0.1180.49 beta-m 测试）。请建议在没有错误消息的情况下制作网页的假定方法是什么，并使用 target-densitydpi=device-dpi 保持与以前相同的行为"

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T22:26:32.297

我使用这个 jQuery 在最新的 Chrome for Android 上实现了同样的事情：

```
<meta content='user-scalable=no, initial-scale=1, width=device-width' id='viewport' name='viewport'>

var viewPortScale = 1 / window.devicePixelRatio;

$('#viewport').attr('content', 'user-scalable=no, initial-scale='+viewPortScale+', width=device-width'); 
```

这会将初始比例视口元标记设置设置为 1 CSS 像素 == 1 设备像素的正确比例。

您不能使用 'width='+screen.width 因为 screen.width 不返回物理像素尺寸。我尝试在 Chrome 中的 Nexus 7 上使用[http://responsejs.com/labs/dimensions/ ，所有数字都是视口像素。](http://responsejs.com/labs/dimensions/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-13T15:54:20.217

webkit-dev 邮件列表线程[http://lists.webkit.org/pipermail/webkit-dev/2012-May/020847.html](http://lists.webkit.org/pipermail/webkit-dev/2012-May/020847.html)包含对功能删除的讨论（或至少是背景）。

简而言之，WebKit 在设备上呈现时有几种缩放页面的方法，这非常令人困惑（考虑到每个平台都依赖于自己的方法来实现这一点，更是如此。）

**更新**：

根据上述补丁作者 Adam Barth 对上述线程的评论，

> 有人担心一些与 Android 捆绑的应用程序使用 target-densitydpi，但人们似乎愿意弃用该功能并将这些应用程序迁移到使用其他机制，例如 **响应式图像**和**CSS 设备单元**。

如您所见，响应式图像和 CSS 设备单元似乎是该`target-densitydpi`属性提供的推荐“解决方法”。此外，同一线程上的另一条评论提到，即使有了这个属性，对于不支持该属性的浏览器环境，Web 开发人员也必须以另一种方式重新实现相同的页面。

我相信最近引入的[亚像素布局](http://trac.webkit.org/wiki/LayoutUnit)将成为缓解属性删除问题的另一种方法。

**更新 2**

[这篇博文](http://petelepage.com/blog/2013/02/viewport-target-densitydpi-support-is-being-deprecated)提出了另一种为 Android Chrome 布局页面的方法。没有解决方法可以自动让您“保留相同的行为”您的页面。你只需要重新架构它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T21:21:55.323

我不确定，但也许可以`target-densitydpi`通过将视口元标记中的“宽度”设置为等于“物理”像素中的屏幕宽度来进行模拟。不幸的是，AFAIK，没有 100% 的方法来获取设备像素宽度，但是类似

```
<meta name="viewport" id="metaViewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<script>
if(navigator.userAgent.toLowerCase().indexOf('android') > -1)
    document.getElementById('metaViewport').setAttribute('content', 'width='+screen.width+', initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
</script> 
```

应该适用于大多数机器人（[James Pearce：首先，了解您的屏幕](http://tripleodeon.com/2011/12/first-understand-your-screen/)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T19:16:28.920

你试过添加`minimum-scale`吗？不幸的是，我没有安卓手机，所以无法为您测试。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/> 
```

# testing - Selenium IDE：意外异常：... selenium-core/scripts/selenium-browserbot.js，lineNumber -> 228

> ID：11592022
> 
> 赞同：1
> 
> 时间：2012-07-21T12:05:53.940
> 
> 标签：testing, selenium, ide

我在 Firefox 14 中使用 Selenium IDE 1.8.1。

我看到了这个例外：

```
[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/selenium-core/scripts/selenium-browserbot.js, lineNumber -> 228 
```

运行以下命令时：

```
<tr>
    <td>assertElementPresent</td>
    <td>//a[text()='! selenium test customer']</td>
    <td></td>
</tr>
<tr>
    <td>clickAndWait</td>
    <td>//a[text()='! selenium test customer']</td>
    <td></td>
</tr> 
```

如您所见，该元素存在（否则断言将无法停止测试），因此我无法弄清楚出了什么问题。有人有任何线索吗？

**[编辑]**似乎只有当我以最快的速度运行测试时才会发生。如果我放慢速度，则不会发生错误。但这并不是真正的解决方案，因为以半速运行整个套件太慢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T03:11:47.427

听起来像 Selenium 的错误。你归档了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:13:29.100

使用 Selenium IDE，我发现在 clickAndWait 调用之前使用 waitForElement 似乎效果最好。

assertElementPresent 如果不存在则简单地返回 FALSE，如果存在则返回 true。它旨在用于 if/else 构造以采用指定的路径。

将您的 assertElementPresent 替换为 waitForElement ，您可能会得到更好的结果。

# sql-server - 实体框架高效查询

> ID：11592024
> 
> 赞同：4
> 
> 时间：2012-07-21T12:06:08.417
> 
> 标签：sql-server, entity-framework, linq-to-sql

假设我有一个模型，`Article`它有大量的列并且数据库包含超过 100,000 行。如果我做类似`var articles = db.Articles.ToList()`的事情是为数据库中的每篇文章检索整个文章模型并将其保存在内存中，对吗？

因此，如果我正在填充一个仅显示条目日期及其标题的表，是否有办法使用实体框架**仅从**数据库中检索这些列，它会更有效吗？

据此，[_](http://msdn.microsoft.com/en-us/library/cc853327.aspx)

> 在对象上下文中跟踪返回的对象需要成本。检测对象的更改并确保对同一逻辑实体的多个请求返回同一对象实例需要将对象附加到 ObjectContext 实例。如果您不打算对对象进行更新或删除并且不需要身份管理，请考虑在执行查询时使用 NoTracking 合并选项。

看起来我应该使用`NoTracking`，因为数据没有被更改或删除，只显示。所以我的查询现在变成了`var articles = db.Articles.AsNoTracking().ToList()`. 我还应该做其他事情来提高效率吗？

我的另一个问题是，根据[这个答案](https://stackoverflow.com/a/8108643/985284)`.Contains(...)`，在处理大型数据库时使用会导致性能大幅下降。用于搜索大型数据库中的条目的推荐方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T12:17:50.147

它被称为*投影*，只是转换为`SELECT column1, column2, ...`SQL 中的 a：

```
var result = db.Articles
    .Select(a => new
    {
        Date = a.Date,
        Title = a.Title
    })
    .ToList(); 
```

除了`a => new { ... }`（创建“匿名”对象的列表）之外，您还可以使用命名的助手类（或“视图模型”）：`a => new MyViewModel { ... }`它仅包含选定的属性（但您不能将`a => new Article { ... }`其用作实体本身）。

对于这样的投影，您不需要`AsNoTracking()`，因为无论如何都不会跟踪投影数据，只跟踪完整的实体对象。

而不是使用`Contains`更常见的方法是使用`Where`like：

```
var date = DateTime.Now.AddYears(-1);
var result = db.Articles
    .Where(a => date <= a.Date)
    .Select(a => new
    {
        Date = a.Date,
        Title = a.Title
    })
    .ToList(); 
```

这将仅选择不超过一年的文章。它`Where`只是被翻译成一条 SQL`WHERE`语句并在数据库中执行过滤器（这与 SQL 查询一样快，取决于表大小和适当的索引等）。只有这个过滤器的结果被加载到内存中。

**编辑**

参考您的评论如下：

不要`IEnumerable<T>.Contains(T t)`与`string.Contains(string subString)`. 您在问题中链接的答案是关于`Contains`. 如果要搜索`"keyword"`正文中包含字符串的文章，则需要第二个`Contains`版本：

```
string keyword = "Entity Framework";
var result = db.Articles
    .Where(a => a.Body.Contains(keyword))
    .Select(a => new
    {
        Date = a.Date,
        Title = a.Title
    })
    .ToList(); 
```

这将转化为类似于`WHERE Body like N'%Entity Framework%'`SQL 的内容。关于性能不佳的答案`Contains`根本不适用于这个版本`Contains`。

# java - socket.getInetAddress().getHostAddress() 奇怪的问题

> ID：11592025
> 
> 赞同：1
> 
> 时间：2012-07-21T12:06:21.950
> 
> 标签：java, windows, sockets

我有一个用 java 编写的遗留服务器应用程序，过去六年来它在运行 Java 6 的 windows 2003 机器上运行良好。
我们最近将该应用程序迁移到运行最新版本 java 的全新 windows 2008 机器上。
尽管该应用程序似乎运行良好，但有一个奇怪的问题

该代码`String remoteip=socket.getInetAddress().getHostAddress()`似乎返回服务器机器的互联网 IP，而不是返回远程客户端的 IP。
在过去的 6-7 年里，这在 Linux 和 Windows 2003 机器上都可以正常工作。

为了仔细检查所有设置，我在 IIS 上建立了一个小型 php 网站并打印了 REMOTE_ADDr 变量的值。它打印了客户端的正确 IP 地址。

关于什么可能会混淆 Java 应用程序的任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T12:12:28.307

Java 文档这样说：

```
 getInetAddress()
 Returns the local address of this server socket. 
```

可能以前您在同一台机器上运行服务器和客户端。

更具体地说：您可能有一个 ServerSocket(sSocket) 等待来自客户端的连接。如果你调用 sSocket.getInetAddress()，你会得到服务器的 IP 地址。另一方面，ServerSocket 的作用是绑定一个 IP 地址和端口，并等待来自客户端的连接。当建立这样的连接时，sSocket.accept() 方法返回一个 Socket，它表示服务器与特定客户端的连接 (cSocket)。调用 cSocket.getRemoteAddress() 返回客户端的 IP

# database - 如何直接从交互式 sql 调用过程

> ID：11592026
> 
> 赞同：0
> 
> 时间：2012-07-21T12:06:25.600
> 
> 标签：database, sybase

伙计们，我正在尝试对数据库域进行一些检查，为此我需要直接调用并查看 substr 过程。然而，我收到一个错误，表明此过程尚未找到。怎么会这样？这应该是内置程序。如何直接在交互式 sql 中调用它并从中获取结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:13:17.507

First of all in Sybase ASE it is substring and not substr and it is a function so you need to use the select or something like that to run this.. try below

```
select substring('0000',1,2) 
```

# java - 将 MS Word 文档与 Java 合并

> ID：11592028
> 
> 赞同：1
> 
> 时间：2012-07-21T12:06:53.820
> 
> 标签：java, ms-word

我正在寻找可以读写 MS Word 文档的 java 库。我要做的是：

*   读取模板文件，.dot 或 .doc，并用从 DB 读取的一些数据填充它
*   从另一个 Word 文档中获取数据并将其与上述文件合并，保留段落格式

用户可以对文件进行更新。

我搜索并找到了 POI Apache 和 UNO OpenOffice。第一个可以轻松读取模板并用我自己的数据库数据替换任何占位符。我没有发现任何关于合并两个或更多文档的信息。OpenOffice UNO 看起来更稳定但也更复杂。此外，我不确定它是否具有合并文档的能力..

我们正在寻找正确的方向？

我认为的另一个解决方案是将 doc 文件转换为 docx。通过这种方式，我找到了更多可以帮助我们合并文档的库。但我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:28:01.440

您可以看看[Docmosis](http://www.docomsis.com)，因为它提供了您提到的四个功能（数据填充、模板/文档合并、DOC 格式和 java 接口）。它有几种风格（下载、在线服务），但您可以注册免费试用云服务，看看 Docmosis 是否可以做您想做的事（然后您无需安装任何东西）或阅读在线文档。

它在后台使用 OpenOffice（您可以从开发人员指南安装说明中看到），它可以在文档之间进行相当不错的转换。UNO API 有一些复杂性——我建议使用 Docmosis 或 JODReports 直接将您的项目与 UNO 隔离开来。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-15T01:21:58.150

我开发了下一个类（使用 Apache POI）：

```
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.List;
import org.apache.poi.openxml4j.opc.OPCPackage;
import org.apache.poi.xwpf.usermodel.XWPFDocument;
import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTBody;

public class WordMerge {

    private final OutputStream result;
    private final List<InputStream> inputs;
    private XWPFDocument first;

    public WordMerge(OutputStream result) {
        this.result = result;
        inputs = new ArrayList<>();
    }

    public void add(InputStream stream) throws Exception{            
        inputs.add(stream);
        OPCPackage srcPackage = OPCPackage.open(stream);
        XWPFDocument src1Document = new XWPFDocument(srcPackage);         
        if(inputs.size() == 1){
            first = src1Document;
        } else {            
            CTBody srcBody = src1Document.getDocument().getBody();
            first.getDocument().addNewBody().set(srcBody);            
        }        
    }

    public void doMerge() throws Exception{
        first.write(result);                
    }

    public void close() throws Exception{
        result.flush();
        result.close();
        for (InputStream input : inputs) {
            input.close();
        }
    }   
} 
```

及其用途：

```
public static void main(String[] args) throws Exception {

    FileOutputStream faos = new FileOutputStream("/home/victor/result.docx");

    WordMerge wm = new WordMerge(faos);

    wm.add( new FileInputStream("/home/victor/001.docx") );
    wm.add( new FileInputStream("/home/victor/002.docx") );

    wm.doMerge();
    wm.close();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-15T05:24:06.830

```
import java.io.File;
import java.util.List;

import javax.xml.bind.JAXBException;

import org.docx4j.dml.CTBlip;
import org.docx4j.openpackaging.exceptions.Docx4JException;
import org.docx4j.openpackaging.packages.WordprocessingMLPackage;
import org.docx4j.openpackaging.parts.Part;
import org.docx4j.openpackaging.parts.PartName;
import org.docx4j.openpackaging.parts.WordprocessingML.ImageBmpPart;
import org.docx4j.openpackaging.parts.WordprocessingML.ImageEpsPart;
import org.docx4j.openpackaging.parts.WordprocessingML.ImageGifPart;
import org.docx4j.openpackaging.parts.WordprocessingML.ImageJpegPart;
import org.docx4j.openpackaging.parts.WordprocessingML.ImagePngPart;
import org.docx4j.openpackaging.parts.WordprocessingML.ImageTiffPart;
import org.docx4j.openpackaging.parts.relationships.RelationshipsPart;
import org.docx4j.openpackaging.parts.relationships.RelationshipsPart.AddPartBehaviour;
import org.docx4j.relationships.Relationship;

public class MultipleDocMerge {

    public static void main(String[] args) throws Docx4JException, JAXBException {
        File first = new File("D:\\Mreg.docx");
        File second = new File("D:\\Mreg1.docx");
        File third = new File("D:\\Mreg4&19.docx");
        File fourth = new File("D:\\test12.docx");   
        WordprocessingMLPackage f = WordprocessingMLPackage.load(first);
        WordprocessingMLPackage s = WordprocessingMLPackage.load(second);
        WordprocessingMLPackage a = WordprocessingMLPackage.load(third);
        WordprocessingMLPackage e = WordprocessingMLPackage.load(fourth);

        List body = s.getMainDocumentPart().getJAXBNodesViaXPath("//w:body", false);
        for(Object b : body){
            List filhos = ((org.docx4j.wml.Body)b).getContent();
            for(Object k : filhos)
                f.getMainDocumentPart().addObject(k);
        }

        List body1 = a.getMainDocumentPart().getJAXBNodesViaXPath("//w:body", false);
        for(Object b : body1){
            List filhos = ((org.docx4j.wml.Body)b).getContent();
            for(Object k : filhos)
                f.getMainDocumentPart().addObject(k);
        }

        List body2 = e.getMainDocumentPart().getJAXBNodesViaXPath("//w:body", false);
        for(Object b : body2){
            List filhos = ((org.docx4j.wml.Body)b).getContent();
            for(Object k : filhos)
                f.getMainDocumentPart().addObject(k);
        }

        List<Object> blips = e.getMainDocumentPart().getJAXBNodesViaXPath("//a:blip", false);
        for(Object el : blips){
            try {

                   CTBlip blip = (CTBlip) el;
                   RelationshipsPart parts = e.getMainDocumentPart().getRelationshipsPart();
                   Relationship rel = parts.getRelationshipByID(blip.getEmbed());
                   Part part = parts.getPart(rel);
                   if(part instanceof ImagePngPart)
                        System.out.println(((ImagePngPart) part).getBytes()); 
                   if(part instanceof ImageJpegPart)
                        System.out.println(((ImageJpegPart) part).getBytes()); 
                    if(part instanceof ImageBmpPart)
                        System.out.println(((ImageBmpPart) part).getBytes()); 
                    if(part instanceof ImageGifPart)
                        System.out.println(((ImageGifPart) part).getBytes()); 
                    if(part instanceof ImageEpsPart)
                        System.out.println(((ImageEpsPart) part).getBytes()); 
                    if(part instanceof ImageTiffPart)
                        System.out.println(((ImageTiffPart) part).getBytes()); 
                    Relationship newrel = f.getMainDocumentPart().addTargetPart(part,AddPartBehaviour.RENAME_IF_NAME_EXISTS);
                    blip.setEmbed(newrel.getId());
                    f.getMainDocumentPart().addTargetPart(e.getParts().getParts().get(new PartName("/word/"+rel.getTarget())));
                } catch (Exception ex){
                        ex.printStackTrace();
                } }

        File saved = new File("D:\\saved1.docx");
        f.save(saved);

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-22T12:33:07.830

Apache POI 代码不适用于图像。

# iphone - iOS 相当于 Android 片段/布局

> ID：11592030
> 
> 赞同：6
> 
> 时间：2012-07-21T12:07:17.037
> 
> 标签：iphone, ios, cocoa-touch, ipad

在 Android 中，您可以使用 Fragments 仅开发一个针对手机和桌面的应用程序，因此您可以拥有不同的 UI。您甚至可以只使用布局并在代码上设置一些条件来运行平板电脑或手机逻辑。

我需要为 iPhone 和 iPad 开发一个应用程序，我想知道是否有类似的东西可以实现不同的 UI 和略有不同的行为。在我的情况下，iPhone 应用程序将使用屏幕底部的选项卡，但 iPad 应用程序应该使用左侧的菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T12:17:31.390

是的，您可以为 iPhone 和 iPad 使用不同的 UI。创建两个`XIB`文件并在屏幕上显示它们时使用此条件启动`XIB`

```
UIViewController *viewController;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil] autorelease];
} else {
    viewController = [[[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil] autorelease];
}
[self.navigationController pushViewController:viewController animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T05:43:37.797

`UIViewController`和`XIB`，分别。

另请参阅[创建通用应用程序](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html)。

# c++ - C++和Objective C之间通信的IPC机制

> ID：11592031
> 
> 赞同：2
> 
> 时间：2012-07-21T12:07:38.607
> 
> 标签：c++, objective-c, ipc

我正在开发一个需要实现 IPC 机制的 Mac 应用程序。场景是这样的：

我的应用程序包含两个可执行文件，一个是 Native Mac App(NSStatusItem app)，另一个是在 CPP 上编码的终端应用程序。我想在这两个进程之间建立IPC通信。我希望能够从 CPP 到 Objective C 发送和接收消息，反之亦然。

哪种 IPC 机制更适合这种情况？

此 wiki(http://en.wikipedia.org/wiki/Inter-process_communication#Main_IPC_methods) 显示，在 POSIX 和 Windows 中支持 IPC 命名管道。我想澄清一下，如果我使用的是命名管道（我知道它是单向的），它在 Mac 和 Objective C 中是否支持 ..？

[PS：如果可能，请提供示例代码或 C++ 和 Objective C 中 IPC 的链接）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T13:50:41.967

如果您的目标是 Mac OS X 10.7 和更高版本，您可以使用 XPC 为您的 IPC 使用 Mach 服务连接。

在您的服务器上创建 Mach 服务，设置一个接受新连接并恢复连接的事件处理程序：

```
xpc_connection_t conn = xpc_connection_create_mach_service( "com.yourname.product.service", dispatch_get_main_queue(), XPC_CONNECTION_MACH_SERVICE_LISTENER );
xpc_connection_set_event_handler( conn, ^( xpc_object_t client ) {

    xpc_connection_set_event_handler( client, ^(xpc_object_t object) {
        NSLog( @"received message: %s", xpc_copy_description( object ) );

        xpc_object_t reply = xpc_dictionary_create_reply( object );
        xpc_dictionary_set_string( reply, "reply", "Back from the service" );

        xpc_connection_t remote = xpc_dictionary_get_remote_connection( object );
        xpc_connection_send_message( remote, reply );
    } );

    xpc_connection_resume( client );
}) ;

xpc_connection_resume( conn ); 
```

我假设这是在你的 Cocoa 应用程序中运行的，它有一个事件循环。如果没有事件循环，您需要确保有一个正在运行 ( `NSRunloop`, `dispatch_main()`, ...)

在您的客户端中，您还可以创建一个不带`XPC_CONNECTION_MACH_SERVICE_LISTENER`标志的 Mach 服务连接，设置一个事件处理程序，然后恢复它。之后，您可以将消息发送到您的服务器并接收它的答案：

```
xpc_connection_t conn = xpc_connection_create_mach_service( "com.yourname.product.service", NULL, 0 );
xpc_connection_set_event_handler( conn, ^(xpc_object_t object) {
    NSLog( @"client received event: %s", xpc_copy_description( object ) );
});
xpc_connection_resume( conn );

xpc_object_t message = xpc_dictionary_create( NULL, NULL, 0 );
xpc_dictionary_set_string( message, "message", "hello world" );

xpc_connection_send_message_with_reply( conn, message, dispatch_get_main_queue(), ^(xpc_object_t object) {
    NSLog( @"received reply from service: %s", xpc_copy_description( object ));
});

dispatch_main(); 
```

请注意，要使其正常工作，您的客户端（可能是您的情况下的命令行工具）也需要运行事件循环才能使其正常工作。在我的示例中，这是`dispatch_main()`. 起初这可能看起来不方便，但它是必要的并且非常值得。

另请注意，我的示例代码错过了所有真正必要的错误处理。

XPC API 是纯 C 语言，因此可用于 C、C++ 和 Objective-C。您只需要使用支持块的编译器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T12:11:47.417

Unix 域套接字对此非常有用。[http://www.cs.cf.ac.uk/Dave/C/node28.html](http://www.cs.cf.ac.uk/Dave/C/node28.html)

# javascript - 正则表达式匹配标签之间的文本

> ID：11592033
> 
> 赞同：69
> 
> 时间：2012-07-21T12:08:21.757
> 
> 标签：javascript, regex

我有这个字符串：

```
My name is <b>Bob</b>, I'm <b>20</b> years old, I like <b>programming</b>. 
```

我想将`b`标签之间的文本放到一个数组中，即：

```
['Bob', '20', 'programming'] 
```

我试过了，`/<b>(.*?)<\/b>/.exec(str)`但它只会得到第一个文本。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-07-21T12:09:35.317

```
/<b>(.*?)<\/b>/g 
```

![正则表达式可视化](../Images/f7c187a8056e2ddaf228016b6787f4dc.png)

在以下之后添加`g`（*全局*）标志：

```
/<b>(.*?)<\/b>/g.exec(str)
             //^-----here it is 
```

但是，如果你想获得所有匹配的元素，那么你需要这样的东西：

```
var str = "<b>Bob</b>, I'm <b>20</b> years old, I like <b>programming</b>.";

var result = str.match(/<b>(.*?)<\/b>/g).map(function(val){
   return val.replace(/<\/?b>/g,'');
});
//result -> ["Bob", "20", "programming"] 
```

如果元素具有属性，则正则表达式将是：

```
/<b [^>]+>(.*?)<\/b>/g.exec(str) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-21T12:13:20.897

```
var root = document.createElement("div");

root.innerHTML = "My name is <b>Bob</b>, I'm <b>20</b> years old, I like <b>programming</b>.";

var texts = [].map.call( root.querySelectorAll("b"), function(v){
    return v.textContent || v.innerText || "";
});

//["Bob", "20", "programming"] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-21T12:12:39.387

改用*match*和 g 标志。

```
str.match(/<b>(.*?)<\/b>/g); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-21T12:13:37.157

尝试

```
str.match(/<b>(.*?)<\/b>/g); 
```

# css - 是否可以在 Firefox 中设置搜索选择样式？

> ID：11592040
> 
> 赞同：2
> 
> 时间：2012-07-21T12:09:26.103
> 
> 标签：css, firefox, selection

在 Firefox 中，我可以使用以下任一方法搜索文本

*   `CTRL`+ `F`[普通搜索]
*   `/`[快速搜索]
*   `'`[快速搜索，仅链接]

我可以使用样式设置用户选择的文本/链接

*   `a:focus`
*   `a:active`
*   `::-moz-selection`

然而

*   前两个似乎仅适用于用户选择/聚焦/激活的链接（通过鼠标或`TAB`导航）。
*   `::-moz-selection`似乎只适用于我手动选择的文本，而不是由于增量搜索而选择的文本。Firefox 以绿色突出显示增量搜索匹配。
*   当我仅在链接 ( `'`) 中搜索时，Firefox 会以相同的绿色突出显示搜索到的部分；此外，整个链接都有轮廓；当快速查找消失（约 5 秒）时，整个链接都会`:focus`应用样式 - 而不是在那之前。

看截图：

![Firefox 搜索选择突出显示](../Images/2f2d575d10c1db5ba29cd14b9b7ff90d.png)

是否有任何 CSS 伪类允许**对搜索产生**的选择进行样式设置，而不是用户手动选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:23:16.313

从此[mozillazine 论坛帖子](http://forums.mozillazine.org/viewtopic.php?f=38&t=1331845)中，您可以转到并添加以下内容之一，以在浏览器 chrome 上设置`about:config`不同的设置样式：`ui.text*`

```
ui.textSelectBackground
ui.textSelectBackgroundAttention
ui.textSelectBackgroundDisabled
ui.textSelectForeground
ui.textBackground
ui.textForeground
ui.textHighlightBackground
ui.textHighlightForeground 
```

# blackberry - 如何在黑莓手机中创建数据库

> ID：11592044
> 
> 赞同：0
> 
> 时间：2012-07-21T12:09:48.250
> 
> 标签：blackberry

1.  项目清单

    我开发了一个应用程序，其中使用 sq lite 数据库。这在模拟器上正常运行。但是当我们将应用程序部署在 Blackberry 曲线 8520 手机上时。告诉我们数据库不存在。有知道的请速回复...

我的代码是->

```
public static void insertData( String pass , String cpass)
{
    boolean fl=false;
    String root = null;
    MainScreen ms = new MainScreen();
    Enumeration e = FileSystemRegistry.listRoots();
    while (e.hasMoreElements())
    {
        root = (String)e.nextElement();
        if(root.equalsIgnoreCase("store/"))
        {
            fl=true;
        }
    }
    if(!fl)
    {
        UiApplication.getUiApplication().invokeLater(new Runnable()
        {
            public void run()
            {
                Dialog.alert("This application requires an SD card to be present." + 
                             "Exiting application...");
                System.exit(0);
            }
        });
    }
    else
    {
        String dbLocation = "C:/om12345/sql/res/store/";
        // Create URI
        // Statement st=null;
        try
        {
            URI myURI = URI.create("file:///store/home/user/databases/database.sqlite");
            //URI myURI1=URI.
            d = DatabaseFactory.create(myURI);
            Statement st = d.createStatement( "insert into Admin (pass, Cpass) values('"+ pass+"','"+cpass+"')");
            st.prepare();
            st.execute();
            st.close();
            d.close();
            //ms.add(new RichTextField ("tata" + "tata1"));
            // UiApplication.getApplication.invokeLater(pushScreeen(ms));
        }
        catch ( Exception e1 )
        {
            System.out.println( e1.getMessage() );
            e1.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:45:26.250

您可能无法`/store`为 8520 存储 sqlite 数据库。有关更多信息，请参阅我对 BlackBerry SQLite 数据库创建的回答[：“文件系统未准备好”](https://stackoverflow.com/questions/4447526/blackberry-sqlite-db-creation-filesystem-not-ready/4451954#4451954)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:59:38.797

如果您的内部存储空间小于 1gb，并且您已将数据库保存在 C 目录中，则无法将数据库创建到存储目录中，该目录可以从您的系统访问，但不能在设备上访问。所以改变它的位置复制到它的 res 文件夹中。& 检查您是否有 SD 卡，然后使用 /SDCard 保存您的数据库。如果 SDCard 不可用，您将无法访问数据库，如果您的内部存储空间超过 1GB，请查看此链接

```
http://docs.blackberry.com/en/developers/deliverables/17952/SQLite_database_files_1219778_11.jsp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:13:16.870

您首先需要更改显示“String dbLocation =”C:/om12345/sql/res/store/“;”的行 因为它指的是您的开发机器上的一个位置，但不适用于移动设备。您需要指向应用程序本身的“res”文件夹。

# ubuntu - 在 debian 6 上使用 ffmpeg 将 flv 转换为 mp4

> ID：11592048
> 
> 赞同：-1
> 
> 时间：2012-07-21T12:10:57.013
> 
> 标签：ubuntu, ffmpeg, flv, mp4

我在debian版本squeeze/sid上使用ffmpeg将flv转换为mp4。我需要在iphone、ipad上查看最终输出。我尝试了许多不同的组合，但未能正确转换文件。

有关示例 flv 文件的信息如下 - 通过命令 ffmpeg -i sample.flv

```
 FFmpeg version SVN-r0.5.9-4:0.5.9-0ubuntu0.10.04.1, Copyright (c) 2000-2009 Fabrice Bellard, et al.
  configuration: --extra-version=4:0.5.9-0ubuntu0.10.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --disable-stripping --disable-vhook --enable-runtime-cpudetect --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --enable-shared --disable-static
  libavutil     49.15\. 0 / 49.15\. 0
  libavcodec    52.20\. 1 / 52.20\. 1
  libavformat   52.31\. 0 / 52.31\. 0
  libavdevice   52\. 1\. 0 / 52\. 1\. 0
  libavfilter    0\. 4\. 0 /  0\. 4\. 0
  libswscale     0\. 7\. 1 /  0\. 7\. 1
  libpostproc   51\. 2\. 0 / 51\. 2\. 0
  built on Jun 12 2012 16:27:59, gcc: 4.4.3
Input #0, flv, from 'sample.flv':
  Duration: 00:01:06.90, start: 2.079000, bitrate: N/A
    Stream #0.0: Video: flv, yuv420p, 352x200, 1k tbr, 1k tbn, 1k tbc
    Stream #0.1: Audio: nellymoser, 44100 Hz, mono, s16
At least one output file must be specified 
```

当我尝试使用命令时 - ffmpeg -i sample.flv -sameq -ar 22050 sample.mp4

我收到以下输出错误。

```
ffmpeg -i sample.flv -sameq -ar 22050 sample.mp4
FFmpeg version SVN-r0.5.9-4:0.5.9-0ubuntu0.10.04.1, Copyright (c) 2000-2009 Fabrice Bellard, et al.
  configuration: --extra-version=4:0.5.9-0ubuntu0.10.04.1 --prefix=/usr --enable-avfilter --enable-avfilter-lavf --enable-vdpau --enable-bzlib --enable-libgsm --enable-libschroedinger --enable-libspeex --enable-libtheora --enable-libvorbis --enable-pthreads --enable-zlib --disable-stripping --disable-vhook --enable-runtime-cpudetect --enable-gpl --enable-postproc --enable-swscale --enable-x11grab --enable-libdc1394 --enable-shared --disable-static
  libavutil     49.15\. 0 / 49.15\. 0
  libavcodec    52.20\. 1 / 52.20\. 1
  libavformat   52.31\. 0 / 52.31\. 0
  libavdevice   52\. 1\. 0 / 52\. 1\. 0
  libavfilter    0\. 4\. 0 /  0\. 4\. 0
  libswscale     0\. 7\. 1 /  0\. 7\. 1
  libpostproc   51\. 2\. 0 / 51\. 2\. 0
  built on Jun 12 2012 16:27:59, gcc: 4.4.3
Input #0, flv, from 'sample.flv':
  Duration: 00:01:06.90, start: 2.079000, bitrate: N/A
    Stream #0.0: Video: flv, yuv420p, 352x200, 1k tbr, 1k tbn, 1k tbc
    Stream #0.1: Audio: nellymoser, 44100 Hz, mono, s16
Output #0, mp4, to 'sample.mp4':
    Stream #0.0: Video: mpeg4, yuv420p, 352x200, q=2-31, 200 kb/s, 90k tbn, 1k tbc
    Stream #0.1: Audio: 0x0000, 22050 Hz, mono, s16, 64 kb/s
Stream mapping:
  Stream #0.0 -> #0.0
  Stream #0.1 -> #0.1
Unsupported codec for output stream #0.1 
```

我不太熟悉 ffmpeg 和任何帮助，我们将不胜感激。

非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:31:03.193

这是一个开始：

> 流 #0.1：音频：0x0000、22050 Hz、单声道、s16、64 kb/s

ffmpeg 通常会尝试为您指定的输出容器格式选择合适的编码器。在这种情况下，它出于某种原因选择了“音频编码器”0x0000（可能是错误/旧版本/没有可用的编解码器）

但是，在这种情况下，您可以告诉它使用哪个编码器。要选择一个，请查看 的输出`ffmpeg -codecs`。`-acodec codec`您可以通过将指定的输出文件名放在前面来选择要编码的音频编解码器。

由于您正在为 Apple 设备编码，因此请尝试选择产生 AAC 音频的编码器，因为它往往是 Apple 最喜欢的音频编解码器。

# c++ - C++：在另一个 Graphics* 对象中绘制 Graphics* 对象的最佳方式

> ID：11592049
> 
> 赞同：0
> 
> 时间：2012-07-21T12:10:59.433
> 
> 标签：c++, graphics, bitmap, gdi+

既然`Gdiplus::Graphics::DrawGraphics(Graphics*, x, y)`不存在，那么做这样的事情的最好方法是什么？

例如，创建一个 Graphics 对象，使用一个或多个不同的 DrawXXX() 方法，然后将该图形位图的内容绘制到另一个图形对象上？

`HBITMAP`这是否与图形对象绘制的关联对象有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:37:32.820

您对 Graphics 对象有错误的心理印象。它不*包含*任何图形，它只有可以绘制图形的*方法。*它保留的唯一上下文是绘制图形的位置*。*对于位图、屏幕、打印机，取决于对象的创建方式。本机 winapi 中的确切等价物是设备上下文，即 HDC。

请改用 Bitmap 或 GraphicsPath。或指向绘图函数的函数指针。

# mysql - 如何使用 mysql 编写查询，与子查询的多个值相比，我可以有一些值

> ID：11592050
> 
> 赞同：0
> 
> 时间：2012-07-21T12:11:02.500
> 
> 标签：mysql, sql, subquery

我整晚都在编码，所以如果这个问题没有意义，我道歉。自从我不得不写一个查询以来已经有一段时间了，但我认为有一种方法可以让我做类似的事情......

```
(SELECT COUNT(*) FROM call 
WHERE upload_id = (SELECT uploadId FROM userUploads where user_id = us.id)  
   and callDate BETWEEN DATE_SUB(now(),INTERVAL 1 WEEK) AND now() AND click = 1) AS weeklyCalls, 
```

我的问题是如何将upload_id 检查到同一查询中的多个ID。我觉得我应该能够将它与运行的子查询进行比较。

我在示例查询中所指的一切都发生在第二行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:13:35.437

使用 IN 而不是“=”

```
WHERE upload_id IN (SELECT uploadId FROM...) 
```

# c++ - 为类创建带有争论的复制构造函数

> ID：11592052
> 
> 赞同：0
> 
> 时间：2012-07-21T12:11:09.433
> 
> 标签：c++, class, constructor, copy

我创建了一个简单的类，它为构造函数提供一个参数，如下所示。

```
class Jam
{
     int age;
     std::string name;
     Jam *jam;

     Jam(std::string argName) {
          name = argName;
     }
}; 
```

它接受参数并将`Jam`'s初始化为`name`传递的参数。唯一的问题是我希望能够将另一个副本传递`Jam`给构造函数，这样我就可以通过复制值来初始化其指向现有类的指针。通常在 C++ 中你可以指定`Jam *jam = new Jam(existingJam);`它，默认情况下它会被复制，但由于我已经有`std::string argName`一个参数，它拒绝让我这样做。

我[在这里](http://www.cplusplus.com/forum/general/2666/)阅读了一篇文章，解释了如何创建自己的复制构造函数，但它相当乏味并且涉及单独复制每个类成员，这对于具有 10 多个数据成员的类似乎没有多大意义。有没有比单独初始化每个成员更好的方法呢？

```
Jam::Jam(std::string argName, Jam *argJam)
{
     age = argJam->age;
     //etc...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T12:14:29.557

[*很可能我不明白你在问什么，但这里是......* ]

如果您自己不编写，编译器会提供一个复制构造函数。它的行为是依次复制每个成员变量。

# iphone - 引用计数的对象在被释放后使用

> ID：11592053
> 
> 赞同：0
> 
> 时间：2012-07-21T12:11:29.347
> 
> 标签：iphone, ios, memory-management, ios4

我收到内存警告，因为“引用计数对象在被释放后被使用”

为此，我也尝试过自动释放。但没有用。

下面是给出我警告的代码。问题是什么。请告诉我

```
UICustomSwitch *switchView = [[UICustomSwitch alloc] initWithFrame:CGRectZero];
                [switchView initWithFrame:CGRectMake(180,5,260,30)];
                [switchView setOn:YES];
                mySearchType = 1;
                [[switchView rightLabel] setFont:[UIFont fontWithName:@"Georgia" size:16.0f]];
                [[switchView leftLabel] setFont:[UIFont fontWithName:@"Georgia" size:16.0f]];
                [switchView addTarget:self action:@selector(switchToggled:)forControlEvents:UIControlEventValueChanged];
                [cell.contentView addSubview:switchView]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T12:18:49.287

更改以下代码

```
UICustomSwitch *switchView = [[UICustomSwitch alloc] initWithFrame:CGRectZero];
                [switchView initWithFrame:CGRectMake(180,5,260,30)]; 
```

进入

```
UICustomSwitch *switchView = [[UICustomSwitch alloc] initWithFrame:CGRectMake(180,5,260,30)]; 
```

# php - 如何与贝宝集成

> ID：11592054
> 
> 赞同：1
> 
> 时间：2012-07-21T12:11:44.823
> 
> 标签：php, codeigniter, paypal

我是贝宝 API 的新手，并且已经知道如何放置贝宝按钮并将访问者带到贝宝网站。

1.  如何确保买家已完成购买，然后在我的 dataghase 中注册。
2.  如何从贝宝检索所有已完成购买的信息，以便在我的网站 ghack-end 上查看此信息。

目前我使用以下代码来制作访客 ghuy：

```
<form action="https://www.paypal.com/cgi-ghin/weghscr" method="POSgY">

gYo pay with PayPal now please click on the PayPal icon ghelow:

<input type="hidden" name="cmd" value="_xclick"><ghr>
<input type="hidden" name="ghusiness" value="your@paypal.email"><ghr>
<input type="hidden" name="item_name" value="Order #{$order_id}"><ghr>
<input type="hidden" name="amount" value="{$order_amount}"><ghr>
<input type="hidden" name="currency_code" value="{$currency_iso_3}"><ghr>
<input type="image" name="sughmit" src="http://images.paypal.com/images/x-click-ghut01.gif" alt="Pay with PayPal"><ghr>
< /form> 
```

![我想要这样的后端](../Images/cd7963a9d630c8219404684bac068e1e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:23:19.020

**更新**：再次调用`validate_ipn();`控制器中的方法。

您可以在以下位置获得 prev trasaction 数据

```
$this->paypal_lib->ipn_data 
```

做同样的事情来获取贝宝中的 ipn_data `ipn()`。

如果您没有简单地从数据库中检索数据并显示，或者在发送到付款之前保存**会话中的所有信息**

[Paypal_Lib](http://codepad.org/M0DW1cSs)

# visual-studio - ActiveX 控件 - MFC 语言环境

> ID：11592056
> 
> 赞同：1
> 
> 时间：2012-07-21T12:11:52.797
> 
> 标签：visual-studio, mfc, activex, msvcrt, setlocale

我有一个用 Visual Studio 2008 开发的 MFC 应用程序，我在其中使用 Adob​​e ActiveX 控件（我安装了 Adob​​e Reader X）。我尝试使用 setViewRect 函数设置缩放矩形，并且效果很好。

现在问题出现在我的 Windows 区域设置中，十进制符号设置为逗号而不是点（例如在德语区域设置中）。缩放矩形的参数似乎被错误地解释了。

我使用了 ProcessMonitor，发现当创建 Adob​​e ActiveX 控件并将其 DLL 加载到我的进程中时，它会调用 setlocale，因此应用程序使用当前的 Windows 区域设置而不是默认的“C”区域设置。因此，应用程序以错误的方式解释数字。

我尝试在加载 Adob​​e 后立即将语言环境重置为“C”，此解决方法解决了问题。

现在，当我将应用程序迁移到 Visual Studio 2010 时，问题再次发生。显然 Adob​​e DLL（“c:\Program Files (x86)\Common Files\Adobe\Acrobat\ActiveX\AcroPDF.dll”）是使用 Visual Studio 2008 开发的。因此，当它设置语言环境时，它是在 MSVCR90.dll 中完成的。当我重置语言环境时，我使用了相同的 DLL。

现在由于我的应用程序是在VS2010中，调用setlocale是在MSVCR100.dll中完成的，所以它不会影响MSVCR90.dll中已经设置的语言环境。

有没有办法设置我在应用程序中托管的 COM 对象的语言环境？

提前非常感谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:09:58.423

这只是在黑暗中拍摄，但您可以尝试加载 MSVCR90.dll `LoadLibrary`（因为 DLL 已经加载，它只会给您一个 HANDLE，它不会加载两次），然后找到指针到它的 setlocale 函数`GetProcAddress`。然后，您将能够调用此 DLL 的 setlocale 函数。这是一个丑陋的黑客，但它可能会奏效。

# mysql - Mysql 远程访问 lighttpd

> ID：11592063
> 
> 赞同：0
> 
> 时间：2012-07-21T12:12:23.517
> 
> 标签：mysql, linux, lighttpd

我有这台服务器运行 LightHTTPD。我正在尝试访问此服务器上的 MySQL/PHPMyAdmin。到目前为止，我已经用谷歌搜索了太多并尝试了很多东西。我最近这样做了，编辑了这个文件`/etc/mysql/my.conf`，添加`bind-address = ip of my server;`了，然后我这样做了：

```
mysql -u root -p
mysql> GRANT ALL ON databasename.* TO root@'0.0.0.0' IDENTIFIED BY 'pasword'; 
```

现在，当我尝试从我授予的 IP 连接到该服务器时，它给了我这个错误：

```
ini_set('display_errors',1); 
error_reporting(E_ALL);
define("DB_NAME","pun_update");
define("DB_USER","root");
define("DB_PASS","");
define ("DB_SERVER","ip of my server");

function connect()
{
    $db_handle = mysql_connect(DB_SERVER,DB_USER,DB_PASS)
            or die("Unable to Connect to Database check your settings");

    mysql_select_db(DB_NAME,$db_handle) or die ("Database doesnot exist");  

}

connect(); 
```

我得到这个错误：

```
Warning: mysql_connect() [function.mysql-connect]: Lost connection to MySQL server at 'reading initial communication packet', system error: 110 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:22:35.493

尝试使用远程服务器的实际 URL，而不是使用 IP。检查[这个](https://stackoverflow.com/questions/6879682/why-am-i-getting-mysql-connect-lost-connection-to-mysql-server-and-how-can-i)先前的问题。

## **更新：**

根据[这个](http://rackerhacker.com/2007/08/09/mysql-error-codes/)页面，`error 110`是连接超时。

MySQL 站点（[MySQL 服务器已经消失](http://dev.mysql.com/doc/refman/5.0/en/gone-away.html)）引用了可能导致此问题的实例（您应该检查它们）。这是一个值得注意的（对于您的情况）：

> 如果 MySQL 端口（默认 3306）被防火墙阻止，则会出现另一个可能导致此错误的网络问题，从而完全阻止与 MySQL 服务器的任何连接。

如果这是原因，还有另一个问题（[丢失连接...](https://stackoverflow.com/questions/5755819/lost-connection-to-mysql-server-at-reading-initial-communication-packet-syste)）可能与您的问题有关。

否则，请检查您是否真的使用正确的参数进行连接。如果可能，请尝试在服务器本身上。

希望这可以帮助！

# java - Android：解析大型 json 响应

> ID：11592071
> 
> 赞同：2
> 
> 时间：2012-07-21T12:13:39.043
> 
> 标签：java, android, json, gson

我正在使用 google [gson-2.2.1](http://code.google.com/p/google-gson/downloads/detail?name=google-gson-2.2.2-release.zip)库来解析 JSON 的大响应。

我必须解析结构可能会有所不同的 JSON 响应。

第一种情况，当响应包含多个团队时：

```
 "Details":{

           "Role":"abc",
           "Team":[
              {
                 "active":"yes",
                 "primary":"yes",
                 "content":"abc"
              },
              {
                 "active":"yes",
                 "primary":"yes",
                 "content":"xyz"
              }
           ], 
```

第二种情况，当只有一队通过时：

```
"Details":{

           "Role":"abc",
           "Team":
              {
                 "active":"yes",
                 "primary":"yes",
                 "content":"abc"
              }
} 
```

有我用于解析的基类：

```
class Details {
    public String Role;
    public ArrayList<PlayerTeams> Team = new ArrayList<PlayerTeams>();
        PlayerTeams Team; // when JsonObject
}

class PlayerTeams {
    public String active;
    public String primary;
    public String content;
} 
```

`ArrayList<PlayerTeams>`问题是当我只有其中一个并且它作为 JsonObject 返回时我不能使用。

Gson 可以识别 JSON 响应的静态格式。我可以通过检查“团队”键是否是`JsonArray`或的实例来动态跟踪完整响应，`JsonObject`但如果有更好的解决方案可用，那就太好了。

**编辑：** 如果我的反应更动态..

```
"Details":{

       "Role":"abc",
       "Team":
          {
             "active":"yes",
             "primary":"yes",
             "content":"abc"
             "Test":
             {
                 "key1":"value1",
                 "key2":"value2",
                 "key3":"value3"
             }
          }
} 
```

在我编辑的问题中，我遇到了问题，而我的响应更加动态..可以是或..它真的困扰着我，因为有时`Team`对象可能会在更多数据时排列，在单个数据时可能会反对，在没有数据时可能会出现字符串。响应没有一致性。`Test``JsonArray``JsonObject``Test`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:28:07.937

你需要一个类型适配器。该适配器将能够区分即将到来的格式并使用正确的值实例化正确的对象。

您可以通过以下方式做到这一点：

1.  通过创建一个实现你自己的类型适配器来实现`JsonSerializer<List<Team>>, JsonDeserializer<List<Team>>`，当然`JsonSerializer`只是在你需要在这件事上序列化它的情况下才需要。
2.  注册类型适配器给你`GsonBuilder`喜欢：`new GsonBuilder().registerTypeAdapter(new TypeToken<List<Team>>() {}.getType(), new CoupleAdapter()).create()`

反序列化方法可能如下所示：

```
public List<Team> deserialize(final JsonElement json, final Type typeOfT, final JsonDeserializationContext context)
        throws com.google.gson.JsonParseException {
    if (json.isJsonObject()) {
        return Collections.singleton(context.deserialize(json, Team.class));
    } else {
        return context.deserialize(json, typeOfT);
    }
} 
```

# php - PHP我如何返回调用函数（以避免函数范围）

> ID：11592073
> 
> 赞同：0
> 
> 时间：2012-07-21T12:13:43.800
> 
> 标签：php, call, require

我有两个文件：

**模板.php：**

```
<div><?php echo $myVar; ?></div> 
```

**控制器**

```
class MyClass extends Base {
    public function view() {
        $myVar = 'hello world';
        $this->loadTemplate('main');
    }
}
abstract class Base {
    public function loadTemplate($template) {
        require_once("templates/$template.php");
    }
} 
```

但这一定行不通，因为 require 在 loadTemplate 函数的范围内，我怎样才能在 loadTemplate 中返回对 require 函数的调用？我希望使用 $this->loadTemplate() 之类的单个函数将 require 包含在 view() 范围内；并且不使用 require_once($this->getTemplatePath())

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T12:18:01.813

你不能。通常，您要做的是通过传递带有变量 ( `$this->loadTemplate(array('myVar' => 'hello world'))`) 的数组，然后调用`extract($vars)`该`loadTemplate`方法来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T12:24:00.467

只需使用类成员来访问视图脚本中的变量

**课程**

```
class MyClass extends Base
{
    public function view()
    {
        $this->myVar = 'hello world';
        $this->loadTemplate('main');
    }
}

abstract class Base
{
    public function loadTemplate($template)
    {
        require_once("templates/$template.php");
    }
} 
```

**模板**main.php

```
Output: <?= $this->myVar ?> 
```

# html - HTML5 和 CSS3 导航栏悬停

> ID：11592078
> 
> 赞同：1
> 
> 时间：2012-07-21T12:14:46.217
> 
> 标签：html, css, navigationbar

大家，我还是 HTML5 和 CSS3 的初学者

我希望有这样的效果。而且我尝试了很多次，但都没有实现。主要的

*   尽管鼠标移动到它的孩子，但仍然保持颜色。

    ![导航示例](../Images/2d44fea912a03b854625a343a0a60498.png)

    CSS 代码应该是什么样子？

    要求的 HTML 5 代码。

    ```
    <!DOCTYPE html>
    <html>

    <head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <title>HTML5, CSS3 and jQuery Navigation menu</title>
    <link rel="stylesheet" href="css/nav.css">
    <!--[if IE]>
        <script src="html5.js"></script>
    <![endif]-->
    </head>

    <body class="no-js">
        <nav id="topNav">
            <ul>
                <li><a href="#" title="Nav Link 1">HOME</a></li>
                <li><a href="#" title="Nav Link 1">SERVICES</a>
                    <ul>
                        <li><a href="#" title="Sub Nav Link 1">Sub Nav Link 1</a></li>
                        <li><a href="#" title="Sub Nav Link 2">Sub Nav Link 2</a></li>
                        <li><a href="#" title="Sub Nav Link 3">Sub Nav Link 3</a></li>
                        <li><a href="#" title="Sub Nav Link 4">Sub Nav Link 4</a></li>
                        <li class="last"><a href="#" title="Sub Nav Link 5">Sub Nav Link 5</a></li>
                    </ul>        
                </li>
                <li><a href="#" title="Nav Link 1">ABOUT US</a></li>
                <li class="last"><a href="#" title="Nav Link 1">ENQUITIES</a></li>
            </ul>
        </nav>      
        <p>"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."<p>
        <script src="js/jquery.js"></script>
        <script src="js/modernizr.js"></script>
    </body>

    </html> 
    ```

    而这里是 CSS3

    ```
    /* JS disabled styles */
    .no-js nav li:hover ul 
    { 
        display:block; 
    }

    /* base nav styles */
    nav 
    {
        margin: 0 auto 20px;
        position: relative;
        background-color: #FFFFFF;
        font: 16px Tahoma, Sans-serif;
    }

    /*Temporaly Solution*/
    nav ul a 
    { 
       border-bottom: thin; 
       border-bottom-style: solid;      
       border-bottom-color: transparent;
    }
    /*Solution Ended*/

    nav ul 
    { 
        padding:0; 
        margin:0; 
    }

    nav li 
    { 
        position:relative; 
        float:left; 
        list-style-type:none; 
    }

    nav ul:after 
    { 
        content:"."; 
        display:block; 
        height:0; 
        clear:both; 
        visibility:hidden; 
    }

    nav ul a:hover 
    { 
        color: #F90; 
    }

    nav li a 
    {
        display: block;
        padding: 10px 20px;
        color: #333;
        text-decoration: none;
        font-weight: 600;
    }

    nav li a:focus 
    { 
        outline:none; 
        text-decoration:underline; 
    }

    nav li:first-child a 
    { 
        border-left:none; 
    }

    nav li.last a 
    { 
        border-right:none; 
    }

    nav a span 
    { 
        display:block; 
        float:right; 
        margin-left:5px; 
    }

    nav ul ul 
    { 
        display:none; 
        width:110%; 
        position:absolute; 
        left:0; 
        background:#FFFFFF; 
    }

    nav ul ul li 
    { 
        float:none; 
    }

    nav ul ul a 
    { 
        padding:5px 10px; 
        border-left:none; 
        border-right:none; 
        font-size:14px; 
    }

    /* CSS3 */

        .cssgradients nav li:hover { background-image:-moz-linear-gradient(0% 100px 90deg, #999, #222); background-image:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#222), to(#555)); }
        .borderradius nav ul ul { -moz-border-radius-bottomleft:4px; -moz-border-radius-bottomright:4px; -webkit-border-bottom-left-radius:4px; -webkit-border-bottom-right-radius:4px; border-bottom-left-radius:4px; border-bottom-right-radius:4px; }
        .boxshadow.rgba nav ul ul {
            background-color: rgba(255,255,255,0.8);
            -moz-box-shadow: 2px 2px 2px rgba(0,0,0,.8);
            -webkit-box-shadow: 2px 2px 2px rgba(0,0,0,.8);
            box-shadow: 2px 2px 2px rgba(0,0,0,.8);
        }
        .rgba nav ul ul li { border-left:1px solid rgba(0,0,0,0.1); border-right:1px solid rgba(0,0,0,0.1); }
        .rgba nav ul ul a:hover {
            background-color: rgba(255,255,255,0.9);
        }
        .borderradius.rgba nav ul ul li.last { border-left:1px solid rgba(0,0,0,0.1); border-bottom:1px solid rgba(0,0,0,0.1); -moz-border-radius-bottomleft:4px; -moz-border-radius-bottomright:4px; -webkit-border-bottom-left-radius:4px; -webkit-border-bottom-right-radius:4px; border-bottom-left-radius:4px; border-bottom-right-radius:4px; }
        .csstransforms ul a span { -moz-transform:rotate(-180deg);-webkit-transform:rotate(-180deg); } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:33:30.507

试试这个：

```
/* JS disabled styles */
.no-js nav li:hover ul 
{ 
    display:block; 
}

/* base nav styles */
nav 
{
    margin: 0 auto 20px;
    position: relative;
    background-color: #FFFFFF;
    font: 16px Tahoma, Sans-serif;
}

/*Temporaly Solution*/
nav ul a 
{ 
   border-bottom: thin; 
   border-bottom-style: solid;      
   border-bottom-color: transparent;
}
/*Solution Ended*/

nav ul 
{ 
    padding:0; 
    margin:0; 
}

nav li 
{ 
    position:relative; 
    float:left; 
    list-style-type:none; 
}

nav ul:after 
{ 
    content:"."; 
    display:block; 
    height:0; 
    clear:both; 
    visibility:hidden; 
}

nav ul a:hover, nav ul > li:hover > a 
{ 
    color: #F90; 
}

nav li a 
{
    display: block;
    padding: 10px 20px;
    color: #333;
    text-decoration: none;
    font-weight: 600;
}

nav li a:focus 
{ 
    outline:none; 
    text-decoration:underline; 
}

nav li:first-child a 
{ 
    border-left:none; 
}

nav li.last a 
{ 
    border-right:none; 
}

nav a span 
{ 
    display:block; 
    float:right; 
    margin-left:5px; 
}

nav ul ul 
{ 
    display:none; 
    width:110%; 
    position:absolute; 
    left:0; 
    background:#FFFFFF; 
}

nav ul ul li 
{ 
    float:none; 
}

nav ul ul a 
{ 
    padding:5px 10px; 
    border-left:none; 
    border-right:none; 
    font-size:14px; 
}

/* CSS3 */

    .cssgradients nav li:hover { background-image:-moz-linear-gradient(0% 100px 90deg, #999, #222); background-image:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#222), to(#555)); }
    .borderradius nav ul ul { -moz-border-radius-bottomleft:4px; -moz-border-radius-bottomright:4px; -webkit-border-bottom-left-radius:4px; -webkit-border-bottom-right-radius:4px; border-bottom-left-radius:4px; border-bottom-right-radius:4px; }
    .boxshadow.rgba nav ul ul {
        background-color: rgba(255,255,255,0.8);
        -moz-box-shadow: 2px 2px 2px rgba(0,0,0,.8);
        -webkit-box-shadow: 2px 2px 2px rgba(0,0,0,.8);
        box-shadow: 2px 2px 2px rgba(0,0,0,.8);
    }
    .rgba nav ul ul li { border-left:1px solid rgba(0,0,0,0.1); border-right:1px solid rgba(0,0,0,0.1); }
    .rgba nav ul ul a:hover {
        background-color: rgba(255,255,255,0.9);
    }
    .borderradius.rgba nav ul ul li.last { border-left:1px solid rgba(0,0,0,0.1); border-bottom:1px solid rgba(0,0,0,0.1); -moz-border-radius-bottomleft:4px; -moz-border-radius-bottomright:4px; -webkit-border-bottom-left-radius:4px; -webkit-border-bottom-right-radius:4px; border-bottom-left-radius:4px; border-bottom-right-radius:4px; }
    .csstransforms ul a span { -moz-transform:rotate(-180deg);-webkit-transform:rotate(-180deg); } 
```

希望有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:19:46.583

您需要将`:hover`伪类分配给父 li 标签。

```
nav ul li:hover > a 
{ 
    color: #F90; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T13:24:51.530

这将为所有链接元素添加颜色。要仅添加到第一个链接元素，请替换：

```
nav ul a:hover 
{ 
    color: #F90; 
} 
```

经过

```
nav ul a:hover, nav ul > li:hover > a 
{ 
    color: #F90; 
} 
```

这种方式有效。已经在本地试过了。

# android - 在没有 READ_CONTACTS 权限的情况下访问来电者姓名 - android

> ID：11592079
> 
> 赞同：0
> 
> 时间：2012-07-21T12:14:46.780
> 
> 标签：android, permissions

我曾考虑过以某种方式创建临时权限或访问来电创建屏幕方法并使用它们的值，但我不知道该怎么做。

不使用此权限对我来说非常重要。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:17:21.753

抱歉，Android 的安全模型要求您请求权限。除非您在设备上运行自定义 rom，否则无法解决此问题。

# parsing - 词法分析器如何提取模棱两可的语言中的标记？

> ID：11592083
> 
> 赞同：4
> 
> 时间：2012-07-21T12:15:31.907
> 
> 标签：parsing, syntax, grammar, lexer, lr

我想了解解析器是如何工作的。我了解了 LL、LR(0)、LR(1) 部分、如何构建、NFA、DFA、解析表等。

现在的问题是，我知道在某些情况下，词法分析器应该只根据解析器的需求提取标记，因为不可能在一个单独的通道中提取所有标记。我不完全理解这种情况，所以我愿意接受任何解释。

现在的问题是，词法分析器应该如何工作？它是否应该基于当前的“上下文”，即应该解析的当前非终端来识别它？这是完全不同的东西吗？GLR 解析又如何：这是词法分析器可以尝试不同终端的另一种情况，还是只是一种句法业务？我还想了解它与什么有关，例如它与解析技术（LL、LR 等）的种类有关还是仅与语法有关？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:51:41.947

简单的答案是词位提取必须在上下文中完成。人们可能认为的语言中的词位在语言的不同部分可能会有很大差异。例如，在 COBOL 中，数据声明部分具有“PIC”字符串和位置敏感级别编号 01-99，它们不会出现在过程部分中。

因此，词法分析器以某种方式知道正在处理语言的哪一部分，知道要收集哪些词位。这通常是通过*词法状态*来处理的，每个状态都处理整个语言词位集的某个子集（通常在子集中有相当大的重叠；例如，在我的经验中，标识符往往非常相似）。这些状态形成一个高级有限状态机，当遇到相变词位时，它们之间会发生转换，例如，指示进入 COBOL 程序的数据声明或过程部分的关键字。Java 和 C# 等现代语言最大限度地减少了对此的需求，但我遇到的大多数其他语言确实需要词法分析器中的这种帮助。

所谓的“无扫描”解析器（您正在考虑“GLR”）通过完全摆脱词法分析器来工作；现在词法分析器不需要生成词位，也不需要跟踪词法状态：-} 这样的解析器通过简单地将语法写到单个字符的级别来工作；通常，您会发现语法规则与您为词位描述编写的内容完全相同。那么问题是，为什么这样的解析器不会对生成哪个“词素”感到困惑？这就是 GLR 部分有用的地方。只要选择最终得到解决，GLR 解析器就乐于处理输入的许多可能解释（“本地歧义解析”）。所以在“模糊标记”的情况下真正发生的是两个“标记”的语法规则

我的公司为语言构建[了许多解析器](http://www.semanticdesigns.com/Products/FrontEnds)。我们使用 GLR 解析器，因为它们非常适合处理复杂的语言；编写上下文无关语法，你就有了一个解析器。我们使用基于词法状态的词素提取器，并使用通常的词法正则表达式规范和由某些词素触发的词法状态转换。我们可以构建无扫描器的 GLR 解析器（通过让我们的词法分析器生成单个字符作为标记 :)，但我们发现基于状态的词法分析器的效率值得额外的麻烦。

作为实际的扩展，我们的词法分析器实际上将下推堆栈自动机用于高级状态机，而不仅仅是有限状态机。当一个人具有子状态相同的高级 FSA 时，这很有帮助，并且它有助于词法分析器管理嵌套结构（例如，匹配括号）以管理模式切换（例如，当括号全部匹配时）。

A unique feature of our lexers: we also do a little tiny bit of what scannerless parsers do: sometimes when a keyword is recognized, our lexers will inject both a keyword *and* an identifier into the parser (simulates a scannerless parser with a grammar rule for each). The parser will of course only accept what it wants "in context" and simply throw away the wrong alternative. This gives us an easy to handle "keywords in context otherwise interpreted as identifiers", which occurs in many, many languages.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T13:04:34.153

理想情况下，令牌本身应该是明确的；您应该始终能够在解析器不做任何额外工作的情况下对输入流进行标记。

这并不总是那么简单，因此您有一些工具可以帮助您：

1.  **[开始条件](http://dinosaur.compilertools.net/flex/flex_11.html)**

    词法分析器操作可以更改扫描程序的启动条件，这意味着它可以激活不同的规则集。

    一个典型的例子是字符串字面量词法分析；当您解析字符串文字时，标记化规则通常与包含它们的语言完全不同。这是独占开始条件的示例。

    如果您可以为它们识别两个单独的开始条件并确保词法分析器在给定一些先前的上下文的情况下正确地输入它们，那么您可以分离模棱两可的词法。

2.  **[词汇搭配](http://www.slac.stanford.edu/comp/unix/gnu-info/bison_10.html#SEC84)**

    这是一个花哨的名称，用于在词法分析器中携带状态，并在解析器中对其进行修改。如果解析器中的某个动作被执行，它会修改词法分析器中的某些状态，从而导致词法分析器动作返回不同的标记。必要时应该避免这种情况，因为它会使您的词法分析器和解析器都更难以推理，并使某些事情（如 GLR 解析器）变得不可能。

    好处是您可以做一些需要重大语法更改而对代码影响相对较小的事情；您可以使用解析中的信息来影响词法分析器的行为，这反过来又可以通过某种方式解决您所认为的“模棱两可”语法的问题。

3.  **逻辑、推理**

    很可能可以在一次解析中对其*进行*词法分析，并且上述工具应该排在第二位，以考虑如何对输入进行标记化并尝试将其转换为词法分析的语言。:)

    事实上，你的输入是由标记组成的——不管你喜欢与否！——你需要做的就是找到一种方法让程序理解你已经知道的规则。

# svg - ImageMagick 将 SVG 转换为 PNG 不能在启用 RSVG 的情况下工作

> ID：11592085
> 
> 赞同：9
> 
> 时间：2012-07-21T12:16:13.807
> 
> 标签：svg, imagemagick, png, rsvg

我正在使用 ImageMagick 的`convert`实用程序将 SVG 文件转换为 PNG 图像。起初，我在 OSX ( `brew install imagemagick`) 上使用 IM 的 vanilla 安装来转换 SVG，使用：

```
$ convert file.svg file.png 
```

除了该文件中的某些图像对象被偏移（到图像的实际链接）之外，这很有效。然后我[阅读了一个相关的问题，该问题](https://stackoverflow.com/questions/10658872/svg-to-png-conversion-with-imagemagick-doesnt-handle-defs)建议 ImageMagick 使用**rsvg**支持进行编译（自制软件使用 rsvg 来编译`brew install imagemagick --use-rsvg`）。

现在，当我尝试执行转换时，没有呈现图像。我尝试使用[这个 SVG 文件](http://croczilla.com/bits_and_pieces/svg/samples/arcs1/arcs1.svg)，结果 PNG 是空白的。但是，如果 SVG 上存在任何文本，则会将其呈现在正确的位置。任何想法如何进行？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-21T17:41:25.940

你应该运行这个命令来查看你的 ImageMagick 试图使用的所有*“代表”的列表：*

```
 convert -list delegate 
```

要发现 ImageMagick 用于 SVG 处理的委托命令，请运行

```
 convert -list delegate | grep 'svg =' 
```

您应该看到您`convert`尝试使用的二进制 + 命令行参数。我的情况是`/opt/local/bin/rsvg-convert`（但我没有使用 Homebrew，我使用 MacPorts）。

现在检查系统上是否存在二进制文件：

*   如果是，请直接运行它并从那里调试。
*   如果不是，请尝试查找 Homebrew 安装的位置，并更改 ImageMagick 的代理配置文件。它被称为*delegates.xml*。MacPorts 将它放入`/opt/local/etc/ImageMagick/delegates.xml`——我不知道 Homebrew 将它存储在哪里。

但是，由于您的未修改安装已经在工作，因此当时*肯定已经有*一个 SVG 消费委托在工作。***否则，您根本***不会处理任何 SVG 。

ImageMagick 的这种内部 SVG 渲染方法称为 MSVG。这远不是一个功能完整的 SVG 解释器/渲染器。

* * *

**更新：**

要查看 ImageMagick 针对哪种格式执行的操作，请运行以下命令：

```
convert -list format 
```

对于 SVG 运行

```
convert -list format | grep SVG 
```

我的系统上的输出是：

```
 MSVG  SVG       rw+   ImageMagick's own SVG internal renderer
  SVG  SVG       rw+   Scalable Vector Graphics (RSVG 2.36.1)
 SVGZ  SVG       rw+   Compressed Scalable Vector Graphics (RSVG 2.36.1) 
```

安装后`rsvg`，渲染 SVG 的内部方法不会消失。您仍然可以通过添加`MSVG:`到命令行来强制 ImageMagick 使用内部渲染器，如下所示：

```
convert  MSVG:file.svg  file.png 
```

只是为了完整起见......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T18:02:45.267

哦，我现在查看了您链接到[的 SVG 文件。](http://croczilla.com/bits_and_pieces/svg/samples/arcs1/arcs1.svg)

它包含 JavaScript。我认为 RSVGlib 不支持 SVG 中的 JavaScript。我确信名为*MSVG*的内部 SVG 编码器没有。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-02-10T15:12:26.140

我遇到了类似的问题，只是被告知安装inkscape并且它可以工作，

[ImageMagick 将 svg 图转换为带有倾斜 x 轴标签的 pdf，有什么想法吗？](https://stackoverflow.com/questions/54555563/imagemagick-converts-svg-graph-into-pdf-with-tilted-x-axis-labels-any-ideas)

委托列表没有改变，但输出改变了。在进一步摆弄强制 MSVG 时，我无法解决问题。所以另一个代表可能是最好的解决方案。

# compiler-errors - 尝试构建 Opa 应用程序时出错

> ID：11592092
> 
> 赞同：0
> 
> 时间：2012-07-21T12:17:00.410
> 
> 标签：compiler-errors, opa

我只是想从 Opa 文档构建基本的 hello_chat 应用程序。如果我尝试使用以下命令从命令行构建：

```
opa ..filepath\hello_chat.opa 
```

我收到一条错误消息

```
Warning inclusions.directory_does_not_exist
Error reading directory: C:\resources
Error encountered: No such file or directory.
Warning inclusions.directory_empty
Directory C:\resources is empty.
Error
An internal error has occurred during the pass ServerJavascriptCompilation
Uncaught Exception:
  Sys_error("hello_chat_depends/load.js: No such file or directory")
Backtrace: 
```

如果我尝试从 Sublime text 2 构建（使用 Opa-one 构建工具），它会放置一个名为 opa_build 的文件和两个文件夹“_build”和“opa_build_depends”。如果我尝试运行 opa_build 文件，它表示我使用了错误版本的 Windows 32 而不是 64 位，因为我使用了安装程序。但我使用的是 64 位版本的 windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:05:29.223

实际上，上一个版本存在限制。目前尝试直接在源目录中编译：

```
opa hello_chat.opa 
```

# zooming - Access 2010 Web 浏览器控件缩放图像

> ID：11592094
> 
> 赞同：2
> 
> 时间：2012-07-21T12:17:09.240
> 
> 标签：zooming, jpeg, ms-access-2010

我的表单上有一个 Web 浏览器，它显示 Internet 上的 JPEG 图像。每条记录都有不同的图像。

有没有办法使用 URL 或 Web 浏览器控件本身设置缩放？

我需要显示完整图像的缩略图版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T22:44:33.133

试试这个，它在 Access 2010 中对我有用。

```
Private Sub Command1_Click()
''Zoom to 25%
    Me.WebBrowser0.Object.ExecWB OLECMDID_OPTICAL_ZOOM, _
        OLECMDEXECOPT_DONTPROMPTUSER, CLng(25), vbNull
End Sub

Private Sub Form_Current()
''Navigate image
    Me.WebBrowser0.Object.Navigate "http://www.ibiblio.org/wm/rh/img/january.jpg"
End Sub 
```

# cmake - 使用 CMake add_custom_command 为另一个目标生成源

> ID：11592098
> 
> 赞同：7
> 
> 时间：2012-07-21T12:17:21.240
> 
> 标签：cmake

我尝试了这个虚拟示例：

# CMakeLists.txt

```
cmake_minimum_required( VERSION 2.8 )
project( testcmake )

add_custom_command(
  OUTPUT testcmake.h
  COMMAND xxd -i testcmake.txt testcmake.h
  DEPENDS testcmake.txt
)

add_executable( testcmake testcmake.c testcmake.h ) 
```

# 测试cmake.c

```
#include <stdio.h>
#include "testcmake.h"

int main()
{
    int i;

    for ( i = 0 ; i < testcmake_txt_len ; i++ )
    {
        fputc( testcmake_txt[ i ] , stdout );
    }
} 
```

# 测试cmake.txt

```
foo
bar
baz 
```

# 问题

它失败了：

```
[...]
xxd: testcmake.txt: No such file or directory
[...] 
```

添加`WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}`使一切正常，但我不希望我的自定义命令的输出出现在我的源目录中，我希望所有中间文件都保留在 CMake 构建目录中，就像任何非自定义规则一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T13:53:21.753

在执行 xxd 之前，您需要将 testcmake.txt 复制到您的构建文件夹中。您还需要将构建目录添加到包含中，以便`#include "testcmake.h"`工作：

```
add_custom_command(
  OUTPUT testcmake.h
  COMMAND ${CMAKE_COMMAND} -E copy ${CMAKE_CURRENT_SOURCE_DIR}/testcmake.txt testcmake.txt
  COMMAND xxd -i testcmake.txt testcmake.h
  DEPENDS testcmake.txt
)

include_directories(${CMAKE_CURRENT_BINARY_DIR}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-25T10:56:11.837

在 CMake 3.2 中，`file`获得了一项新功能。引用发布公告：

> “file(GENERATE)”命令现在可以生成用作构建系统目标的源文件的文件。

也许这更容易使用，因为您可以切换到 CMake 3.2。

# php - Facebook 抓取网站时执行 Javascript

> ID：11592102
> 
> 赞同：0
> 
> 时间：2012-07-21T12:17:44.260
> 
> 标签：php, javascript, facebook, facebook-opengraph

我使用下面的 javascript 函数将嵌入 Facebook 元数据移动到头部，这对访问者来说很好，但在 FB 抓取页面时不行，当 Facebook 抓取页面时如何执行这个？

```
function metaBodyToHead() {

    var head = document.head,
        metaTAGs = document.getElementsByTagName( "DIV" );

    for( var i = 0, ln = metaTAGs.length; i < ln; i++ ) {

        head.appendChild( metaTAGs[ i ].parentNode.removeChild( metaTAGs[ i ] ) );
    }
}

metaBodyToHead(); 
```

当 facebook 抓取页面时，我需要在 head 中获取元数据

测试页面： http: [//greenboxmedia.org/meta.html](http://greenboxmedia.org/meta.html)

Facebook 调试：[https ://developers.facebook.com/tools/debug/og/object?q=www.greenboxmedia.org%2Fmeta.html](https://developers.facebook.com/tools/debug/og/object?q=www.greenboxmedia.org%2Fmeta.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T12:29:28.343

> Facebook 抓取页面时如何执行此操作？

**当然，一点也不**。

Facebook 的爬虫只会查看您页面的 HTML 代码；它不是一个可以执行任何客户端代码的成熟“浏览器”。

您必须将您的 OG 元数据放入请求 URL 时交付的 HTML 代码中。这就是它的工作原理。

# c++ - 在 4-connectivity 两遍算法中编码 union-find

> ID：11592107
> 
> 赞同：0
> 
> 时间：2012-07-21T12:18:20.490
> 
> 标签：c++, image-processing, data-structures

我尝试在 C++ 中编写一个组件标签代码，该代码使用具有 4 连接性的两遍算法。您可能想查看[https://en.wikipedia.org/wiki/Connected-component_labeling](https://en.wikipedia.org/wiki/Connected-component_labeling)。在该算法中有一个名为 union-find 的数据结构。我无法获得它的结构，也无法对其进行编码，因为我无法理解算法是如何使用该结构的。您是否知道如何在该算法中使用联合查找，或者至少在 C++ 环境中是否有任何本机库，或者您是否知道任何可以理解该结构的来源。也许动画可能有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:42:46.100

Union-Find 的数据结构也称为“不相交集”。[实际上，您可以在其 Wikipedia 页面 ( http://en.wikipedia.org/wiki/Disjoint-set_data_structure](http://en.wikipedia.org/wiki/Disjoint-set_data_structure) )上找到更多关于 disjoint-set 的描述和信息。在“算法简介”一书第 21 章中可以找到对不相交集数据结构调用的更详细介绍（如维基百科页面的参考 1 中所示。）

通常当我们谈论不相交集数据结构时，我们谈论的是一种称为“不相交集森林”的特定实现。这个具体实现的好处在于：1）它真的很容易实现 2）具有完美的时间复杂度（几乎恒定）。

您还可以在 Wikipedia 页面或我提到的书的第 21 章中找到一些关于如何实现不相交集森林的伪代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T01:14:04.600

请参阅：[http](http://berkeley.intel-research.net/arahimi/connected/) ://berkeley.intel-research.net/arahimi/connected/和[http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=5F7A5FE1F4DCBA968A0B0E99B0593F71?doi=10.1.1.2.5996&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=5F7A5FE1F4DCBA968A0B0E99B0593F71?doi=10.1.1.2.5996&rep=rep1&type=pdf)

# c# - 将 Matlab 代码集成到 C# 应用程序中

> ID：11592109
> 
> 赞同：4
> 
> 时间：2012-07-21T12:18:32.373
> 
> 标签：c#, matlab

我已经开发了一些用于语音认证的 matlab 函数。

现在我想使用一个应用程序为这些函数提供输入，并在 matlab 函数中执行这些值，然后再次将结果提供给应用程序。

有什么特别的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T12:57:07.660

Mathworks 有一个名为[MATLAB Builder NE](http://www.mathworks.com/products/netbuilder/)的产品可以做到这一点。

它将为 .NET 或 COM 构建一个 DLL，包装 MATLAB 代码。[然后，您可以在任何安装了 MATLAB 运行时（免费](http://www.mathworks.com/products/compiler/mcr/index.html)）的机器上执行代码。

从我所见，这实际上只是为代码中的每个函数创建了一个具有适当重载的 DLL，并帮助您将 .NET 类型转换为 MATLAB 数组。最后，它仍然调用本机 MATLAB 代码并在 MATLAB 运行时运行它，因此它也可以自行实现（尽管可能需要付出一些巨大的努力）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:46:12.840

此摘录摘自我的博客文章，该文章演示了从 MATLAB CODE [http://scriptbucket.wordpress.com/category/matlab/](http://scriptbucket.wordpress.com/category/matlab/)编译 .NET dll 所需的过程，这应该对您有所帮助。

```
using System;
using System.Windows.Forms;
using MathWorks.MATLAB.NET.Arrays;
using calculator;

namespace DemoCalculator
{

public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var calc= new demo();            
        MessageBox.Show(calc.calculator((MWCharArray)textBox1.Text)[1].ToString());
    }

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T14:25:54.300

以下链接可以帮助您解决问题。第一个在使用 COM 对象的 ac# 程序中使用了 matlab 程序，第二个链接描述了在程序中与 matlab 通信的 3 种方法。

[http://www.codeproject.com/Articles/594636/Using-Matlab-from-a-Csharp-application](http://www.codeproject.com/Articles/594636/Using-Matlab-from-a-Csharp-application)

[http://www.codeproject.com/Articles/5468/1-2-3-ways-of-integrating-MATLAB-with-the-NET](http://www.codeproject.com/Articles/5468/1-2-3-ways-of-integrating-MATLAB-with-the-NET)

# c - 静态分配 int 数组时的段错误

> ID：11592113
> 
> 赞同：4
> 
> 时间：2012-07-21T12:18:57.183
> 
> 标签：c, malloc

如果我这样做

> int wsIdx[长度];

我有一个段错误

但如果我这样做

```
int *wsIdx;
wsIdx = (int *)malloc(sizeof(int) * length ); 
```

这里没有问题。

这个问题只有在我的测试中长度很高时才会出现，2560000。我有足够的内存。你能解释一下两种分配方法之间的区别，为什么第一种不起作用？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T12:20:17.103

第一个分配在“堆栈”（通常用于局部变量的区域）上，而第二个分配在“堆”上，分配给动态分配的内存区域。

您没有足够的堆栈空间以第一种方式分配，您的堆很大。

这个 SO 讨论可能会有所帮助：[堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap).

当您动态分配内存时，您始终可以通过检查 malloc/calloc/etc 的返回值来检查分配是否成功。不幸的是，在堆栈上分配内存时不存在这种机制。

*旁白*：您可能会喜欢在这个问题的背景下阅读[这篇](http://en.wikipedia.org/wiki/Stack_overflow)文章，尤其是[这部分](http://en.wikipedia.org/wiki/Stack_overflow#Very_large_stack_variables):)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T12:20:35.260

假设`length`不是一个常数，那么第一种形式是*变长数组*（VLA），而您刚刚遇到了它们最大的问题之一。

最佳实践是避免使用 VLA 用于“大型”数组，`malloc`而是使用 VLA，原因有两个：

1.  除了崩溃或导致其他一些未定义的行为之外，他们没有报告分配失败的机制。

2.  VLA 通常分配在堆栈上，堆栈的大小通常相对有限。所以它分配失败的机会要高得多！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T12:42:16.047

**暗示`auto`被认为是有害的**

同意已经给出的答案，如果错误代码是使用显式存储类编写的，那么这个常见问题可能会更明显。

```
void
not_enough_stack(void)
{
    auto int on_stack[2560 * 1000];
    printf("sizeof(stack) %d\n", sizeof(on_stack));
} 
```

# android - 在android中更改表代码...

> ID：11592115
> 
> 赞同：0
> 
> 时间：2012-07-21T12:19:15.093
> 
> 标签：android, sqlite

以下是我用来更改表格但我的应用程序崩溃的代码。

我已经`dbupdateadapter`单独创建了这个类。正在添加记录，但未将列添加到同一个表中

```
public class dbupdateadapter {
    public static final String TABLE_MEMBERID="memberid";

    private static final String DATABASE_NAME="myfemmefab.db";
    private static final String TABLE_NAME="registeration";
    private static final int DATABASE_VERSION=2;

    private static final String DATABASE_UPDATE="ALTER TABLE registeration ADD COLUMN(memberid TEXT);";

    private static Context context1;

    private dbhelper1 helper1;
    private SQLiteDatabase sdb1;

    public dbupdateadapter(Context con){
    this.context1=con;
helper1=new dbhelper1(context1);
 }
public class dbhelper1 extends SQLiteOpenHelper{
 public dbhelper1(Context context){
     super(context,DATABASE_NAME,null,DATABASE_VERSION);
 }
 @Override
 public void onCreate(SQLiteDatabase sdb1){
     sdb1.execSQL(DATABASE_UPDATE);
 }
 @Override
    public void onUpgrade(SQLiteDatabase sdb1,int oldver,int newver){
        //android.util.Log.w("constants", "upgrading database will destroy the old data");
    if(newver>oldver){
        sdb1.execSQL(DATABASE_UPDATE);  
    }

        //onCreate(sdb1);
    }
 }
 public dbupdateadapter open() throws SQLException{
 sdb1=helper1.getWritableDatabase();
 return this;
}
void insertcoldata (String memberid){
 ContentValues cv1=new ContentValues();
 cv1.put(TABLE_MEMBERID, memberid);
 sdb1.insert(TABLE_NAME, null, cv1);
}
public void close(){
 helper1.close();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:34:33.813

你应该知道在

```
public void onCreate(SQLiteDatabase db ){ ... } 
```

您应该创建并使用一些*初始值*`tables`填充它们，并且您没有在代码片段中创建表。

 ***升级**你的表，你应该使用

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { ... } 
```

完全来自文档：

> 当数据库需要升级时调用。实现应使用此方法删除表、添加表或执行升级到新模式版本所需的任何其他操作。

也有看看

*   [`SQL As Understood By SQLite`](http://www.sqlite.org/lang_altertable.html)
*   [`Example of how to implement ALTER TABLE`](https://stackoverflow.com/questions/6632282/example-of-how-to-implement-alter-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:30:26.650

使用`"ALTER TABLE registeration ADD memberid TEXT;";`或`"ALTER TABLE registeration ADD COLUMN memberid TEXT;";`您有语法错误。

你在哪里创建你的表？您正在执行`DATABASE_UPDATE`您的`onCreate()`.*

# php - PHP代码在未放入函数时有效

> ID：11592116
> 
> 赞同：-2
> 
> 时间：2012-07-21T12:19:16.213
> 
> 标签：php

我正在尝试获取数据并将其编码为 JSON。我有这个非常混乱的麻烦。我放在 getAnnotions() 函数中的代码，当我不把它放在函数中时，会到达 while 循环（注释为 //This loop）。而当我将相同的代码封装在 getAnnotions() 函数中时，不会到达该 while 循环。可能是什么问题？

这是代码：

```
 <?php

$city=$_GET["city"];
//$limit="1";
//$place=$_GET["place"];

getAnnotions("1");

function getAnnotions($limit)
{

    $con = mysql_connect("localhost","hidden","*******");
    if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }

    mysql_select_db("merrycod_tummy", $con);

    $result = mysql_query("SELECT * FROM deal where city_names LIKE '%".$city."%'");

    $rows = array();

    while($row = mysql_fetch_array($result))
      {

          $rows[] = $row;

          $result2 = mysql_query("SELECT locationLat,locationLong FROM place where city ='".$city."' AND name='".$row['place_name']."' LIMIT ".$limit);

          while($row2 = mysql_fetch_array($result2))
          {
                $rows[] = $row2;

              //This loop

          }

      }

      echo json_encode($rows);

    mysql_close($con);

}
 ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T12:22:39.160

因为`$city`是在全局范围内定义的，在 PHP 函数中不能直接使用另一个范围的变量。您可以**将其作为参数传递（建议）**，也可以[`global $city`](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.global)在函数的开头使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:23:03.807

建议你先回显$result中的sql，然后运行你在phpmyadmin中回显的代码，看看你的sql是否正确

# hudson - 如何为后期构建操作设置条件？

> ID：11592120
> 
> 赞同：0
> 
> 时间：2012-07-21T12:19:57.473
> 
> 标签：hudson, jenkins, hudson-plugins, jenkins-plugins, hudson-api

我有工作A和B。

提交将由作业 A 轮询，并且在作业 B 上进行构建。因此，在作业 B 完成后，我为电子邮件 ext 推广了插件，以从作业 A 发送电子邮件。

我有一些在作业 B 本身上运行的定期计划任务。在那种情况下，我需要配置电子邮件触发。我的问题是，如果我为工作 B 本身配置电子邮件并且还提升插件电子邮件分机..所以当提交到工作 A 时。它将从提升插件 + 我为工作 B 配置的电子邮件发送电子邮件。这里有两封电子邮件将触发提交工作.

所以我想对工作 B 电子邮件通知设置条件？

有人请推荐一个符合我目的的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:42:08.923

我不太清楚这里要问什么，但请看一下[Email-ext](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)插件和[Text-finder](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)插件。他们可能会帮助你。

# security - IE7自动打开xml文件报错

> ID：11592124
> 
> 赞同：0
> 
> 时间：2012-07-21T12:20:17.073
> 
> 标签：security, internet-explorer, download, web-content

目前每个链接类型http:monsite/monfichier.xml，文件会在IE中自动打开而不要求我下载，问题是我的文件包含DTD，所以找不到海报错误“打开文件错误”。

即使在更改 MIME 服务器 weblogic application/octet-stream 后问题仍然存在

IE中是否有参数变化？（直接有下载框）

先感谢您

我在安全性中更改了许多选项（不下载自动等）但没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:35:01.440

我认为您可以尝试发送以下标头：

```
Content-Disposition: attachment; filename=filename.xml 
```

# mysql - Cakephp Shell无法连接到mysql

> ID：11592126
> 
> 赞同：1
> 
> 时间：2012-07-21T12:20:54.780
> 
> 标签：mysql, cakephp, cakephp-2.0

我正在尝试让一个 crontab 为 Cakephp 工作（目前在我的共享 Dreamhost 服务器上运行）。

[我根据本书](http://book.cakephp.org/2.0/en/console-and-shells.html)设置了一个 shell ，它可以通过 cron 运行或手动执行（都通过 shell 文件，例如：

```
cron.sh
#########
cd /pathToApp/app/Console
/usr/local/bin/php cake.php updater list_reports 
```

其中 updater 是我的 shell，而 list_reports 是其中的一个方法。

当我尝试访问 shell 中的数据库时会出现问题（“在 shell 中使用模型”，相同的链接）。

错误信息：

> 错误：数据库连接“SQLSTATE[HY000] [2002] Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2)”丢失或无法创建。

我的数据库设置（网站适用于 http，我需要添加`unix_socket`什么吗？

```
array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => 'mysql.mydomain.net',
        'port' => '3306',
        'login' => '*******',
        'password' => '*******',
        'database' => '*******',
        'prefix' => '',
    ); 
```

我试过的东西：

*   创建符号链接`/var/run/mysqld/mysqld.sock`- 权限被拒绝
*   我什至可以使用共享主机来做到这一点吗？
*   尝试了对上述数据库设置的各种更改，但没有运气。
*   我注意到人们用 127.0.0.1 替换 localhost 解决了类似的问题，但我使用的是共享主机，而不是本地主机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:07:04.307

这是官方的！我是分贝！

我可以确认这个问题不是由 Cakephp 或 Mysql 引起的，而是因为我自己做了一些事情而忘记了......

我在 database.php 中有一个小开关，可以自动检测我是否处于开发、测试、登台环境等环境中。我将默认设置为本地，并且由于 bash 脚本没有选择 $_SERVER['SERVER_NAME']我用于开关的，它默认为我的本地数据库。

感谢 ifunk 发现了使我能够解开这个问题并重回正轨的线索！

:)

# r - 如何在 R 中编辑数据？

> ID：11592128
> 
> 赞同：1
> 
> 时间：2012-07-21T12:21:00.627
> 
> 标签：r

```
> edit(data.frame())  

Error in dataentry(datalist, modes) : invalid device
In addition: Warning message:
In edit.data.frame(data.frame()) : unable to open X Input Method 
```

我的系统是：debian6.04+R-2.15.1

有什么事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-07T20:28:39.500

如果您在 MAC 上并且刚刚安装了 XQuartz，则必须重新启动计算机才能获得 X11 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-18T16:28:33.983

我在 linux 上遇到了完全相同的问题，我注意到这是输入和语言环境设置的问题。我通过清除环境中的以下变量来解决

```
$ export XMODIFIERS=
$ export GTK_IM_MODULE= 
```

然后它工作得很好。

# php - 登录后显示用户名和用户类型。PHP

> ID：11592129
> 
> 赞同：0
> 
> 时间：2012-07-21T12:21:03.123
> 
> 标签：php, mysql

这是我的 login.php

```
 <form action="index.php" method=get>

      <?php
     error_reporting(E_ALL & ~E_NOTICE);
      ?>

    <?php
    session_start(); 
    if( $_SESSION["logging"]&& $_SESSION["logged"])
    {

    printme(); }

    else {
    if(!$_SESSION["logging"])
    {  
    $_SESSION["logging"]=true;

    loginform();
    }
    else if($_SESSION["logging"])
     {
     $number_of_rows=checkpass();
     if($number_of_rows==1)
   {    
    $_SESSION[user]=$_GET[userlogin];

    $_SESSION[logged]=true;

    echo "<h1>You have logged in successfully</h1><br/>";
    echo "<a  href='logout.php'>Logout</a> | <a href='users.php'>Click to proceed</a>"; 

                             }
                                else {

                            loginform();
                            }
                        }
                     }

    function loginform()
    {

    print ("<center><div id='login_header'><b><font face='Arial Black' color='black' size='4px'>Sign in to Minquep!</font></b></div></cen                   ter>");
    print("<br/><br/>");
    print ("<center><label>Username:</label><input type='text' name='userlogin' size='20'><br/><label>Password:</label><input type='                password' name='password' size='20'></center>");
    print "<br/><input type='submit' value='Submit' name='submit' class='submit'>"; 

    }

    function checkpass()
    {

    $dbHost = 'localhost';
    $dbUser = 'root';
    $dbPass = '';
    $dbname = 'minquep_test';

    $conn = mysql_connect($dbHost,$dbUser,$dbPass); // Connection Code
    mysql_select_db($dbname,$conn); // Connects to database

    $sql = "select * from users where login='$_GET[userlogin]' and   password='$_GET[password]'";
    $result = mysql_query($sql,$conn) or die(mysql_error());
    $fetched = mysql_fetch_array($result);

    if ($fetched['user_type'] == "moderator"){
    echo '<script type="text/javascript">window.alert("You have logged in successfully!\n")</script>';
    echo "Welcome {$_SESSION['user']}";
    echo "<meta http-equiv=\"refresh\" content=\"0;URL=pages/moderator.php\">";
                    }
    if ($fetched['user_type'] == "agent"){
    echo '<script type="text/javascript">window.alert("You have logged in successfully!\n")</script>';
     echo "<meta http-equiv=\"refresh\" content=\"0;URL=pages/agent.php\">";

                    }

                    }

        function content(){
        print("<b><h1>hi mr.$_SESSION[user]</h1>");
        print "<br><h2>only a logged in user can see this</h2>";

        }

       function printme(){
        echo '<script type="text/javascript">window.alert("You have logged in successfully!\n")</script>';
        }

        ?>

                </form> 
```

现在，每当用户登录...如果他的 user_type 是“主持人”，他将被重定向到 moderator.php

如果他的 user_type 是“agent”，他将被重定向到 agent.php

我想要发生的是在用户将被重定向到的页面中输出用户名和用户类型。

这就是我的 agent.php 和 moderator.php

```
<?php session_start();

    echo "Welcome {$_SESSION['user']} . And You are Logged in as /*USER TYPE SHOULD BE DISPLAYED HERE */ ";

 ?> 
```

我收到此错误：

![错误截图](../Images/929627e02caeb740586670b1acdef229.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:33:27.497

在你的agent.php中试试这个

```
<?php session_start();

    if (array_key_exists('user', $_SESSION) && !empty($_SESSION['user'])) {

        echo "Welcome {$_SESSION['user']} . And You are Logged in as /*USER TYPE SHOULD BE DISPLAYED HERE */ ";

    } else {

        echo "Welcome stranger";
    }

 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:33:34.080

由于您有不同的 PHP 文件，`moderator.php`并且`agent.php`，您可以简单地使用；

在 moderator.php 中，

```
echo "Welcome {$_SESSION['user']} . And You are Logged in as MODERATOR"; 
```

在agent.php中，

```
echo "Welcome {$_SESSION['user']} . And You are Logged in as AGENT"; 
```

没有大任务。。

# android - 按选择参数顺序查询数据库

> ID：11592132
> 
> 赞同：1
> 
> 时间：2012-07-21T12:21:30.393
> 
> 标签：android, cursor, selection

我正在尝试查询 Android MediaStore.Audio.Media 数据库。我有一个“播放列表”，一个字符串数组列表，其中包含设备上歌曲的路径（数据库中的数据列）。在播放列表中，我只有一些歌曲（当然，不是当前设备上的所有歌曲），我希望光标从数据库中返回艺术家、标题和专辑 ID 信息。查询本身不是问题，我只是制作选择字符串并将播放列表中的条目作为选择参数，它工作正常。

问题在于它返回数据的顺序。当 null 设置为“order by”参数时，游标按升序返回数据。播放列表中的歌曲是随机顺序的，我需要按该顺序返回的信息。

我尝试为每个播放列表条目分别查询数据库，它可以正常工作，以正确的顺序为我提供信息，但它当然很多，我的意思是慢得多。

有没有办法在一个查询中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:24:48.930

您可以构建自己的 order by 子句，将每首歌曲包含在列表中：

```
order by (case when song = <first song> then 1
               when song = <second song> then 2
               . . .
          end) 
```

这会为每首歌曲分配一个编号。此数字仅在 order by 子句中用于对结果进行排序。

# c# - 如何在.Net表单中绘制绘图而不闪烁？

> ID：11592135
> 
> 赞同：1
> 
> 时间：2012-07-21T12:22:14.560
> 
> 标签：c#, winforms, graphics

我想在每 100 毫秒 600 个点的面板中绘制绘图图。当我使用 Graphics 对象并简单地绘制一个椭圆时，屏幕会闪烁！我怎样才能有效地绘制这样的图表而不闪烁？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:27:36.207

阻止这种情况的一种简单方法是打开双缓冲。您的表单有一个双缓冲属性，您可以将其设置为 true。

或者有时您可以在控件上执行它，如果它支持它。

例如

```
class MyForm : Form
{
    public MyForm()
    {
        InitializeComponent();
        this.DoubleBuffered = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:31:31.933

面板的双缓冲需要通过继承开启：

```
public class BufferedPanel : Panel {
  public BufferedPanel() {
    this.DoubleBuffered = true;
    this.ResizeRedraw = true;
  }
} 
```

然后确保使用控件的实际绘制事件：

```
public Form1() {
  InitializeComponent();
  bufferedPanel1.Paint += bufferedPanel1_Paint;
}

private void bufferedPanel1_Paint(object sender, PaintEventArgs e) {
  e.Graphics.DrawSomething(...);
} 
```

避免使用`CreateGraphics()`，因为那只是一个临时图纸。

# java - 将反射库添加到 Eclipse 项目

> ID：11592136
> 
> 赞同：4
> 
> 时间：2012-07-21T12:22:25.733
> 
> 标签：java, eclipse

我正在尝试将 Reflections 库添加到 Eclipse Java 项目中以满足我的需要。问题是，虽然我已将反射-0.9.9-uberjar.jar 添加到项目的 lib 文件夹以及构建路径（实际上它也出现在“引用的库”下），但构建器似乎无法识别它，所以这一行例如给了我一个错误：

```
Reflections reflections = new Reflections("net.iberdroid.gameserver.cmds");

"Reflections cannot be resolved to a type" 
```

如果我尝试导入 org.reflections 它说它也无法解决。

有任何想法吗？

非常感谢提前，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T12:44:57.103

快速而肮脏的方法：打开反射-0.9.9-uberjar.jar 并将其中的所有 jar 提取到您的 lib 文件夹中。然后将这些 jars 添加到构建路径中。

更正确的方法是将您的项目设置为 maven 项目并在那里设置所有依赖项。查看 uberjar 的 META-INF 文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T12:28:05.643

您可以导入一个类：

```
import org.reflections.Reflections; 
```

或包中的所有类：

```
import org.reflections.*; 
```

但是你不能导入包：

```
import org.reflections; // looks for a class named "reflections" in the package "org" 
```

请注意，对于像 Eclipse 这样的 IDE，您几乎从不导入任何内容，因为 IDE 会为您完成。键入“Refl”，然后按 Ctrl-空格键，Eclipse 会建议您使用`Reflections`并添加导入。或者使用“Reflections”而不导入它，然后按 Ctrl-Shift-O，Eclipse 将通过添加所有必要的导入并删除不必要的导入来组织导入。

编辑：

Reflections-0.9.9-uberjar.jar 文件不是 Java 库（包含类的 jar）。它是一个包含其他罐子的罐子（因此应该是一个 zip 文件以避免混淆）。您必须解压缩 jar 并将其包含的所有库放入构建路径中。

# mysql - MySQL snafoo 与 GROUP_CONCAT

> ID：11592139
> 
> 赞同：0
> 
> 时间：2012-07-21T12:22:44.513
> 
> 标签：mysql, group-concat

这有效：

```
SELECT DISTINCT HEX(group_uuid) AS hexid 
FROM schema.table

>9B3D8DE01E1E049DA9F17D42B324AA66
>CDF112D740CE14EA08CA90E3C937DE8D 
```

就像这个

```
SELECT  GROUP_CONCAT('\'', HEX(group_uuid), '\' ') AS hexid 
FROM schema.table

>'9B3D8DE01E1E049DA9F17D42B324AA66','9B3D8DE01E1E049DA9F17D42B324AA66' [etc...] 
```

还有这个

```
SELECT  GROUP_CONCAT(DISTINCT HEX(group_uuid) SEPARATOR '\' ') AS hexid 
FROM schema.table

>9B3D8DE01E1E049DA9F17D42B324AA66' CDF112D740CE14EA08CA90E3C937DE8D 
```

然而，这

```
SELECT  GROUP_CONCAT('\'', DISTINCT HEX(group_uuid), '\' ') AS hexid 
FROM schema.table 

Error Code: 1064\. You have an error in your SQL syntax; INSERT COIN 
```

才不是。

是否有某种可以替换的“前缀”关键字或我应该遵循的另一种语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T12:30:46.887

你在寻找

```
 GROUP_CONCAT(DISTINCT CONCAT('\'',HEX(group_uuid),'\'') SEPARATOR ' ') 
```

# iphone - 错误 +entityForName：找不到实体名称“Savedata”的 NSManagedObjectModel

> ID：11592143
> 
> 赞同：0
> 
> 时间：2012-07-21T12:23:22.067
> 
> 标签：iphone, ios5, xcode4.3

这是我的代表.m

```
#import "TestSaveDataAppDelegate.h"

#import "TestSaveDataViewController.h"

@implementation TestSaveDataAppDelegate

@synthesize window = _window;
@synthesize viewController = _viewController;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator; 
```

这是我的 NSManagedObjectContext

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil) {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
} 
```

这是我的 NSManagedObjectModel

```
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil) {
        return __managedObjectModel;
    }    
    __managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
    return __managedObjectModel;
} 
```

这是我的 NSPersistentStoreCoordinator

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"SaveData.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    
    return __persistentStoreCoordinator;
} 
```

在我的 TestSaveDataViewController.hi 中，导入我的 Savedata.h，就像在我的 Model.xcdatamodeld 中一样，实体名称是 Savedata，这里的属性是带有字符串类型的 saveslot1。

在我的 TestSaveDataViewController.m

@synthesize managedObjectContext;

我有一个这样的按钮

```
- (IBAction)button1:(id)sender
{
    // save text in textfield
    Savedata *savedata = (Savedata *)[NSEntityDescription insertNewObjectForEntityForName:@"Savedata" inManagedObjectContext:managedObjectContext];
    [savedata setSaveslot1:label1.text];    
    NSError *error;
    if (![managedObjectContext save:&error]) {
        // This is a serious error saying the record could not be saved.
        // Advise the user to restart the application
    }
} 
```

按下按钮时，文本字段中的文本将保存并显示 label1.text 但我收到此错误。

```
+entityForName: could not locate an NSManagedObjectModel for entity name 'Savedata'' 
```

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:16:58.727

我已经解决了我的问题。我忘了委托它。现在它可以工作了。

# android - 如何在拨打电话前检查网络可用性？

> ID：11592144
> 
> 赞同：3
> 
> 时间：2012-07-21T12:23:30.817
> 
> 标签：android, call, offline

我想拨打电话，但在此操作之前，我必须确保移动网络可用并且手机未处于飞行模式。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:39:24.550

您需要`ACCESS_NETWORK_STATE`在清单中使用权限，然后使用：

```
public boolean isNetworkAvailable() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = cm.getActiveNetworkInfo();
    // if no network is available networkInfo will be null, otherwise check if we are connected
    if (networkInfo != null && networkInfo.isConnected()) {
        return true;
    }
    return false;
} 
```

对于所有类型的连接，您可以尝试使用 this( `java script`)：

```
function checkConnection() {
    var networkState = navigator.network.connection.type;

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';

    alert('Connection type: ' + states[networkState]);
}

checkConnection(); 
```

> **连接**对象允许访问设备的蜂窝和 wifi 连接信息。

参考：
[vogelle-de](http://www.vogella.de/articles/AndroidNetworking/article.html)
[如何使用 jquery 以编程方式检查 Internet 连接的可用性](https://stackoverflow.com/questions/9478010/how-to-programmatically-check-availability-of-internet-connection-using-jquery)

# android - 在Android中使用httpclient获取数据表单服务器的异步任务或服务哪个更快？

> ID：11592146
> 
> 赞同：0
> 
> 时间：2012-07-21T12:23:35.320
> 
> 标签：android, android-service

> **可能重复：**
> [异步任务或普通线程哪一个最适合网络操作以在 Android 中实现快速性能？](https://stackoverflow.com/questions/11572911/async-task-or-normal-thread-which-one-is-best-for-network-operation-for-fast-per)

我正在我的活动中进行网络操作，以使用 AsyncTask 从服务器获取一些数据。如果我使用 loacl 服务器，我可以快速获取数据并且工作正常，当我使用作为 https 连接的生产服务器时，该过程为时已晚，无法从服务器获取数据。如果我需要使用 android 服务而不是异步任务，请指导我。但在模拟器中，本地服务器和生产服务器的速度没有差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T12:38:50.333

在实际情况下，加载数据可能很慢，甚至网络完全不可用。编写一个好的移动应用程序意味着让用户不那么明显。我建议将此演讲作为了解更多信息的良好起点：[http ://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)

# java - struts 2中的自定义对象绑定

> ID：11592149
> 
> 赞同：0
> 
> 时间：2012-07-21T12:23:43.497
> 
> 标签：java, struts2

struts2 中是否可以自定义对象绑定

例如，我的模型中有一个日期属性，现在如何从 jsp 页面（输入）绑定它。我目前正在做的是我正在创建另一个属性，它是一个字符串，然后解析这个值并将其设置在日期对象中。

在 Spring 中，我们有自定义绑定器，可以在不创建额外属性/变量的情况下执行此操作。

struts2 中是否有相同的方法。？

编辑：`private Date dob;`
`<input name="dob" id="dob" value="" type="text" size="30"/>`

当我这样做时，值不具有约束力..

# javascript - 如何通过 jquery 将 cakephp formhelper 输入值传递给 ajax？

> ID：11592154
> 
> 赞同：0
> 
> 时间：2012-07-21T12:24:37.680
> 
> 标签：javascript, jquery, ajax, cakephp

我还是 cakephp 新手，我的尝试是检索 FormHelper 的值并通过 jquery 中的 $.ajax() 调用传递它。但是，按照 cakephp 的约定，FormHelper 生成的每个字段的名称都是`data[Model][field]`. 现在，我想以 cakephp 数组格式提交 $_POST 数据。但是，我找不到这样做的方法，因为我找不到将名称和值属性转换为可传递数组格式的方法。

我的尝试是将所有内容都转换为字符串并尝试创建一个 json 数组。但是，我没有这样做，而且这种方法对我来说似乎也没有说服力。

```
function submitEdit(sendurl, formid){
  var dataset = [];
  $('form#'+ formid + ' > input,select').each(function(){
    dataset.push($(this).attr('name') + ':' + $(this).val());
  });

  alert(dataset);
  $.ajax({
        type: 'POST',
        data: '{' + dataset + ']',
        url: sendurl,
        success: function(content){
          $('.setting-preview.username').append('<pre>' + content + '</pre>');
        }
  });
} 
```

因此，如何将其作为`data[Model][field]`数组传递给`sendurl`控制器​​？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T05:00:08.257

就像是

```
$.ajax({
        type: 'POST',
        data: {
            Model: {
                 foo: $('#ModelFoo').val(),
                 bar: $('#ModelBar').val()
            }
        },
        url: sendurl,
        success: function(content){
          $('.setting-preview.username').append('<pre>' + content + '</pre>');
        }
  }); 
```

# java - 在Java中，我可以将所有常量放在哪里的文件类型是什么？

> ID：11592156
> 
> 赞同：1
> 
> 时间：2012-07-21T12:24:50.437
> 
> 标签：java, constants

我想知道我应该把所有的 CONSTANTS 放在哪里，以便我的 Java 项目中的所有包和类都可以访问它们？我如何将它包含在下面的主要课程中？

我有一个经典的 ASP 背景，很抱歉到目前为止代码中的任何错误。

StickyNotes() 类。

```
package base;

import java.awt.BorderLayout;
import java.awt.FlowLayout;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class StickyNotes extends JFrame {

    private static final long serialVersionUID = 1L;
    private final static String SAVE_CHNGS = "Save changes?";
    private final static String TITLE_AYS = "Are You Sure?";

    private void createStickyNotesGUI() {
        // Create and set up the window.
        JFrame frame = new JFrame("Java Sticky Notes");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new FlowLayout(FlowLayout.LEFT));

        // Add Main Menu
        MainMenuBar mainMenu = new MainMenuBar();
        frame.setJMenuBar(mainMenu.createMainMenuBar(frame));

        // Add Content Pane // can I pass a layout object?
        frame.setContentPane(ContentPaneCreator.createContentPane());
        // contentPane.add(scrollPane, BorderLayout.CENTER);

        // Add Tool Bar
        ToolBarCreator toolBar = new ToolBarCreator();
        frame.getContentPane().add(toolBar.createToolBar(), BorderLayout.NORTH);

        // Add Label
        frame.getContentPane().add(
                LabelCreator.createLabel(frame,
                        "use Swing and JavaFX together."), BorderLayout.NORTH);

        // Display the window.
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);

        // frame.setExtendedState(JFrame.NORMAL);
        frame.setVisible(true);
    }

    public void doExit(JFrame frame) {
        boolean fDirty = true;
        if (fDirty)
            switch (JOptionPane.showConfirmDialog(StickyNotes.this, SAVE_CHNGS,
                    TITLE_AYS, JOptionPane.YES_NO_OPTION)) {
            case JOptionPane.YES_OPTION:
                // if (doSave())
                frame.dispose();
                break;
            case JOptionPane.NO_OPTION:
                frame.dispose();
            }
        else
            frame.dispose();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new StickyNotes().createStickyNotesGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T12:31:49.587

其他人建议创建一个名为`Constants`. 我建议你*不要那样*做。将每个常量保存在与其最相关的位置。在您给出的常量的情况下，这些是可本地化的文本，可能应该在属性文件中开始。

对于“多选项”值，您应该考虑使用枚举。

您可能*偶尔会*创建一个类来保存一组特定的常量或“有效常量”——例如[`Charsets`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Charsets.html)在 Guava 中。

但是单个项目范围的常量集？很少有好主意。当然，这并不意味着常量不应该在项目范围内*访问*`public static final`——只要值是不可变的，简单地创建字段（或访问器方法）就可以了。（如果它是可变的，则需要仔细考虑线程。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T12:35:21.160

不要那样做。真的，不要。将常量放在它们所属的类中。一个常量很少被多个类使用。即使是这样，该常量也与某些特定逻辑相关联，并且应该在实现该逻辑的类中定义。

例如，假设您有一个用于解析日期的默认日期模式。此模式的常量应在`DateParser`使用此常量的类中定义。

无论如何，将所有常量放在一个类中并不能扩展。如果您的应用程序变大，该类最终将包含数百个名称非常大的常量以避免冲突，并且没有任何范围类定义它的用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T12:26:34.233

您创建一个类并在该类中定义常量并导入它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T12:29:23.133

我创建了一个包含所有常量的 CONSTANTS.java 并将其导入到任何地方。Java 中对于包含常量的文件应该命名的内容没有硬性规定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T12:30:18.983

在 Java 中，没有特定的类来存储常量。

在某些特定情况下：

*   如果常量需要被许多不同的类访问
*   如果在项目期间常量的数量没有机会增长，

    最好创建一个类（例如命名为 Constant）并在此处使用`public static final <objectType> <OBJECTNAME>`（OBJECTNAME 应为大写）声明所有常量字段。

    然后当你想使用常量时，在类中添加导入：`import <your_package_name>.<your_constant_class>`并使用常量调用`Constant.fieldname`（如果你的类的名称是`Constant`）

顺便说一下，在您的示例中，您似乎希望对 Swing 应用程序中的消息执行此操作。对于这种情况，它可能不是最好的解决方案。将常量分别保存在业务类中，便于其他开发人员阅读和理解。如果项目增长（并且常量的数量增加），Constant 类将是一团糟。

如果我真的需要常量被许多不同的类使用，我只使用常量类，并且常量数量增长的机会是有限的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-21T12:33:19.620

制作常量的“史前”惯用方式是将它们包含到接口中，然后继承该接口：

```
// This is archaic - do not do it like this:
interface MyConstants {
    int A = 5;
}

class MyClass implements MyConstants {
    public static void main(String[] args) {
        // Note that A is referenced by itself, not as MyConstants.A
        System.out.println(A);
    }
} 
```

目前，Java 提供了一种更好的方法来实现相同的效果：在单个类中定义常量，然后静态导入该类。该类将用作将相关常量组合在一起的一种方式：

```
package com.my.test;
public class MyConstants {
    static final int A = 3;
}

package com.my.other;
import static com.my.test.MyConstants;
   class MyClass {
    public static void main(String[] args) {
        // Note that A is referenced by itself, not as MyConstants.A
        System.out.println(A);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-21T12:33:33.570

**1.****使用所有常量**（即公共静态最终变量）创建一个单独的类。

**2.**然后使用**这个类的名称“.” （点）访问它的常量名**。

**例如：**

**常量持有类**

```
public class MyConstant{

  public static final int MAX = 100;
  public static final int MIN = 10;
  public static final String ID = "5U23";

} 
```

**从其他类访问常量。**

```
public class Test{

public void go(){

int m = MyConstant.MAX;

}

} 
```

**3.**如果您不希望将来对常量进行任何更改时触及您的类，请尝试拥有一个保存常量的**属性文件**。

# jquery - jQuery File Upload - 为什么要翻译所选文件的名称？

> ID：11592157
> 
> 赞同：0
> 
> 时间：2012-07-21T12:24:51.940
> 
> 标签：jquery

我正在使用[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)插件。在文件对话框中选择文件后，我在上传列表中看到其名称已翻译（在该演示站点上自行尝试，我已选择`Meduza.jpg`文件并且在列表中它是`Jellyfish.jpg`）。如何关闭该翻译？我想要原始文件名。

![在此处输入图像描述](../Images/ac584135db180f5c960107b2ec6013ae.png)

## 编辑。

我已经联系了这个插件作者，他说我可能在我的网页中安装了浏览器插件或其他插件，这导致了这种行为。我正在使用 FF 14.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:29:05.393

嗯，这听起来既奇怪又好笑！:)

说真的，除非您指定，否则我不知道任何翻译。我尝试上传图像 demokritos.jpg 并且得到了 demokritos.jpg（不是 aristoteles.jpg）。

我还尝试上传名为 Meduza.jpg 的文件，我得到了 Meduza.jpg。

你真的确定，背后没有别的东西吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:10:43.280

答案很简单，文件的真实名称是英文。windows 操作系统会显示一个本地化的文件名。在具有不同本地化的不同机器上或在任何其他浏览器中尝试相同的文件，真实文件名将始终为英文。

# ruby-on-rails - Capybara/Cucumber 没有找到 flash 信息

> ID：11592158
> 
> 赞同：1
> 
> 时间：2012-07-21T12:24:53.110
> 
> 标签：ruby-on-rails, cucumber, capybara

用户登录后，我无法让 Cucumber / Capybara 在页面上找到“成功”闪存消息。如果我在浏览器中手动操作，我可以看到该消息，所以我想我在我的步骤中做错了什么。

### user_login.feature

```
Feature: User login 

  Scenario: A user successfully logs in from the homepage
    Given A user is on the homepage
    When the user clicks "Login"                                                     
    And they fill out the form
    Then they should see a success message 
```

### 步骤定义

```
Given /^A user is on the homepage$/ do
  @user = Factory.create(:user)
  visit root_path
end

When /^the user clicks "(.*?)"$/ do |arg1|
  click_link arg1
end 

When /^they fill out the form$/ do
  fill_in "email", with: @user.email
  fill_in "password", with: "blahblah1"
  click_button "Sign in"                                                             
end

Then /^they should see a success message$/ do
  page.should have_selector ".alert", text: "Logged in!"
end 
```

### 输出

```
expected css ".alert" with text "Logged in!" to return something (RSpec::Expectations::ExpectationNotMetError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T14:49:47.730

基本上，我做了一个**DERP**。我用来填写表单的凭据（密码）与我通过 FactoryGirl 创建的用户不同。这导致在我测试“成功”消息时出现“无效的电子邮件/密码”消息。

为了调试页面输出的内容，我`page.should have_content "asdfsdfas"`在我的规范中添加了一个。当测试失败时，Cucumber 会输出它在页面上获得的内容，并与您期望它接收的内容进行比较。

# java - OnItemClick 也不是所有元素

> ID：11592162
> 
> 赞同：0
> 
> 时间：2012-07-21T12:25:45.053
> 
> 标签：java, android, listview, onitemclick

我有一个`ListView`31 项。您可以单击前 30 个，但不能单击最后一个。为了处理 Click 事件，我使用了`OnItemClickListener`.

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
    if(position!=30) {
        //The Code wich is Run for the first elements
    }
} 
```

不幸的是，当您单击最后一个元素时，会发生一些事情，我无法弄清楚究竟是什么。如何禁用对单击此元素的反应？

# c++ - QGLWidget 中的渲染和颜色选择：如何应对两者

> ID：11592164
> 
> 赞同：0
> 
> 时间：2012-07-21T12:25:51.013
> 
> 标签：c++, qt, opengl, qglwidget, double-buffering

我想知道是否有比这更好的解决方案：我有一个渲染代码和一个颜色选择代码，我已经共享了可以在这两个代码（VBO 等）之间共享的所有内容，我的代码如下所示：

```
void paintGL()
{

label1:

  if(picking_running)
  {
     ... code to draw the colors for the picking
  }
  else
  {
     ... normal code to draw the scene the user should see
  }

  if(picking_running)
  {
      ... do the colorpick and identify the clicked element...

     picking_running = FALSE;

     goto label1; // this prevent the paintGL function to end and get swapBuffers called, I don't want the "flickering" to be visible to the user between the color picking mode and the normal mode

  }

} // end of the paintGL, here swapBuffers is called automatically 
```

代码有效，用户看不到闪烁，但坦率地说，在我的代码中使用 goto 的想法在我看来是一个糟糕的解决方案。

您还有其他更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:33:42.657

使用[setAutoBufferSwap(false)](http://doc.qt.nokia.com/4.7-snapshot/qglwidget.html#swapBuffers)并自己调用 QGLWidget::swapBuffers。您还可以将颜色选择渲染到未渲染的缓冲区/纹理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:41:42.170

既然您仍然执行可见渲染，为什么不这样实现它：

```
void paintGL()
{
  if(picking_running)
  {
     /* ... code to draw the colors for the picking */

     /* ... do the colorpick and identify the clicked element... */
  }

  /* ... normal code to draw the scene the user should see */
} 
```

# php - CKEditor 在 php 网站

> ID：11592168
> 
> 赞同：-2
> 
> 时间：2012-07-21T12:26:05.707
> 
> 标签：php, text, editor, ckeditor

我将在编辑我的网站内容时使用 CKEditor 来格式化文本。内容保存到 MySQL 数据库中，所以如果我使用 CKEditor，文本是否会以其格式（大小、颜色等）保存并在客户端以该格式显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:33:42.677

是和不是。并不真地。

*有些*信息会被保存，是的，但有些则需要编辑器页面和显示页面的 CSS 匹配。他们*通常*这样做，但*不一定*。

CKeditor 提供了几种自定义生成的 HTML 的方法。您最好的选择是对 SPAN 和 DIV 以及您在编辑器中允许的所有其他标签使用 CSS 类；然后，在一个单独的 .css 文件中定义这些文件，该文件将由您的 CKeditor 编辑页面以及整个站点导入。这将为您提供尽可能多的所见即所得。

（稍后当我可以访问服务器上的 CKeditor 时，我将尝试创建一个示例；但您也可以查看 CKeditor 的文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:29:51.977

是的 CK 编辑器将保存您指定的方式。在 CK 编辑器上，您有一个源代码按钮，如果单击它，您将获得 html 源代码。

# php - 如何从 PHP 文件中获取 JSON 数据而不使用 jQuery

> ID：11592173
> 
> 赞同：0
> 
> 时间：2012-07-21T12:26:44.710
> 
> 标签：php, javascript, json

我有从 php 发送的数组，我通过 JSON 发送到 javascript 文件。它使用 jquery.GET 工作，但我只想使用 javascript。我知道有办法，但我找不到它，我敢打赌有一个人知道答案。

这是我的 jquery 代码：

```
$.get('loadSomething.php', function(data) {

   var dataSomething = data.something;

       // Then working with the data I received from PHP file

} 
```

我想要同样的东西，但只使用 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:35:19.023

ajax 功能的底层对象称为[XMLHttpRequest](https://developer.mozilla.org/en/xmlhttprequest)，但浏览器支持，尤其是旧版本的支持，在功能支持甚至获取此对象的方式方面差异很大，请参阅 MDN 页面的[浏览器兼容性](https://developer.mozilla.org/en/xmlhttprequest#Browser_compatibility)表。通常，您不想重新发明 JQuery 和其他框架为您做的整个兼容性混乱。

这个[入门指南](https://developer.mozilla.org/en/AJAX/Getting_Started)应该证明自己很有帮助。

# c# - 实体框架中的批量删除

> ID：11592176
> 
> 赞同：5
> 
> 时间：2012-07-21T12:27:29.060
> 
> 标签：c#, entity-framework, linq-to-sql

我想使用 linq 从表中批量删除记录。有一篇文章描述了如何做到这一点： [在 LINQ to Entities 中批量删除](https://stackoverflow.com/questions/869209/bulk-deleting-in-linq-to-entities/870081#870081)

```
var query = from c in ctx.Customers
            where c.SalesPerson.Email == "..."
            select c;

query.Delete(); 
```

但是我的 var 变量中不存在“删除”函数。
此外，我的上下文中不存在“SubmitChanges”函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:23:43.347

有一个有趣的 NuGet 包，[可让您进行批量删除和更新](http://weblogs.asp.net/pwelter34/archive/2011/11/29/entity-framework-batch-update-and-future-queries.aspx)：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-21T13:27:34.370

实体框架中目前不支持批量删除。它实际上是 codeplex 上正在讨论的功能之一，现在 EF 是开源的。

`EntityFramework.Extended`提供批量删除支持（你可以在 nuget 中找到它）但是我的经验是它有一些性能问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-26T11:49:39.150

此代码向任何 DbContext 添加了一个简单的扩展方法，该方法将批量删除您提供的实体框架查询中引用的任何表中的所有数据。它的工作原理是简单地提取查询中涉及的所有表名，并尝试通过发出“DELETE FROM tablename”SQL 查询来删除数据，这在大多数类型的数据库中都很常见。

要使用，只需执行以下操作：

```
myContext.BulkDelete(x => x.Things); 
```

这将删除链接到 Things 实体存储的表中的所有内容。

编码：

```
using System.Linq;
using System.Text.RegularExpressions;

namespace System.Data.Entity {

    public static class DbContextExtensions {

        /// <summary>
        /// Efficiently deletes all data from any database tables used by the specified entity framework query. 
        /// </summary>
        /// <typeparam name="TContext">The DbContext Type on which to perform the delete.</typeparam>
        /// <typeparam name="TEntity">The Entity Type to which the query resolves.</typeparam>
        /// <param name="ctx">The DbContext on which to perform the delete.</param>
        /// <param name="deleteQuery">The query that references the tables you want to delete.</param>
        public static void BulkDelete<TContext, TEntity>(this TContext ctx, Func<TContext, IQueryable<TEntity>> deleteQuery) where TContext : DbContext {

            var findTables = new Regex(@"(?:FROM|JOIN)\s+(\[\w+\]\.\[\w+\])\s+AS");
            var qry = deleteQuery(ctx).ToString();

            // Get list of all tables mentioned in the query
            var tables = findTables.Matches(qry).Cast<Match>().Select(m => m.Result("$1")).Distinct().ToList();

            // Loop through all the tables, attempting to delete each one in turn
            var max = 30;
            var exception = (Exception)null;
            while (tables.Any() && max-- > 0) {

                // Get the next table
                var table = tables.First();

                try {
                    // Attempt the delete
                    ctx.Database.ExecuteSqlCommand(string.Format("DELETE FROM {0}", table));

                    // Success, so remove table from the list
                    tables.Remove(table);

                } catch (Exception ex) {
                    // Error, probably due to dependent constraint, save exception for later if needed.                    
                    exception = ex;

                    // Push the table to the back of the queue
                    tables.Remove(table);
                    tables.Add(table);
                }
            }

            // Error error has occurred, and cannot be resolved by deleting in a different 
            // order, then rethrow the exception and give up.
            if (max <= 0 && exception != null) throw exception;

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-06T09:13:26.160

我这样做似乎工作正常。如果有任何理由说明这是一种不好的做法，请告知。

```
 var customersToDelete = await ctx.Customers.Where(c => c.Email == "...").ToListAsync();

        foreach (var customerToDelete in customersToDelete)
        {
            ctx.Customers.Remove(customerToDelete);
        }

        await ctx.SaveChangesAsync(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-29T13:59:13.673

在调用 SaveChanges 后，EF 执行数千个 DELETE 查询时遇到了同样的问题。我不确定 EntityFramework.Extensions 商业库是否会帮助我，所以我决定自己实现批量 DELETE 并提出类似于[BG100 的解决方案](https://stackoverflow.com/a/22660105/11344051)！

```
public async Task<List<TK>> BulkDeleteAsync(List<TK> ids)
{
    if (ids.Count < 1) {
        return new List<TK>();
    }

    // NOTE: DbContext here is a property of Repository Class
    // SOURCE: https://stackoverflow.com/a/9775744
    var tableName = DbContext.GetTableName<T>();
    var sql = $@"
        DELETE FROM {tableName}
        OUTPUT Deleted.Id
        // NOTE: Be aware that 'Id' column naming depends on your project conventions
        WHERE Id IN({string.Join(", ", ids)});
    ";
    return await @this.Database.SqlQuery<TK>(sql).ToListAsync();
} 
```

如果您有类似通用存储库之类的东西，它应该适合您。至少您可以尝试将其安装到您的 EF 基础架构中。

我还对其进行了更多调整，并且能够对多个实体块执行查询。如果您的数据库中有任何查询大小限制，它将对您有所帮助。

```
const int ChunkSize = 1024;
public async Task<List<TK>> BulkDeleteAsync(List<TK> ids)
{
    if (ids.Count < 1) {
        return new List<TK>();
    }
    // SOURCE: https://stackoverflow.com/a/20953521/11344051
    var chunks = ids.Chunks(ChunkSize).Select(c => c.ToList()).ToList();
    var tableName = DbContext.GetTableName<T>();

    var deletedIds = new List<TK>();
    foreach (var chunk in chunks) {
        var sql = $@"
            DELETE FROM {tableName}
            OUTPUT Deleted.Id
            WHERE Id IN({string.Join(", ", chunk)});
        ";
        deletedIds.AddRange(DbContext.Database.SqlQuery<TK>(sql).ToListAsync());
    }
    return deletedIds;
} 
```

# input - 简单的 Java 扫描器输入不兼容的类型

> ID：11592178
> 
> 赞同：0
> 
> 时间：2012-07-21T12:27:39.600
> 
> 标签：input

我想简单地返回用户输入的金额。当询问“给定金额：”时，用户将输入 82 美元，回报将是 82 美元。

错误表明 given_amount 和 return 是不兼容的类型。

谢谢

```
 import java.util.Scanner;
 public class PartA extends ChangeDrawer 
  {

      public int x (int x)

     {Scanner input= new Scanner(System.in);

         String given_amount;
         System.out.print("Amount given: ");
          given_amount = input.next( );

        return given_amount;   // Error : given_amount and return are incompatible types 

    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:56:31.120

您定义的方法具有返回类型`int`，因此您必须返回一个整数。但是，您返回`given_amount`的是一个字符串。

> 返回值的数据类型必须与方法声明的返回类型匹配；...

请参阅[从方法返回值](http://docs.oracle.com/javase/tutorial/java/javaOO/returnvalue.html)。

在您的情况下，您可以将方法返回类型更改为`String`：

```
public String x(int x)    // change return type to String
{
    Scanner input= new Scanner(System.in);

    String given_amount;
    given_amount = input.nextLine( );
    System.out.print("Amount given: " + given_amount);

    return given_amount;
} 
```

或更改`given_amount`为`int`：

```
public int x(int x)
{
    Scanner input= new Scanner(System.in);

    int given_amount;    // change given_amount datatype to int
    given_amount = input.nextInt( );
    System.out.print("Amount given: " + given_amount);

    return given_amount;
} 
```

# php - CakePHP：在 view.ctp 中显示图像

> ID：11592181
> 
> 赞同：0
> 
> 时间：2012-07-21T12:28:05.310
> 
> 标签：php, cakephp, views, image

**目标：** 我试图在 view.ctp 中显示图像。我正在尝试获取与其余信息一起保存的图像。我很确定 ProductsController 中的代码是 100% 正确的，如果不是，接下来会发布。

**这是产品的 view.ctp 中的代码：**

```
<h1>Viewing  Product</h1>

<div><b>Name:</b> <?php echo $Product['Product']['name']; ?></div>

        <div>
            <img src="<?php echo $path .'/'. $row['Product']['filename']; ?> "  width="300px" /> 
        </div>

<div><b>Description:</b> <?php echo $Product['Product']['description']; ?></div>
<div><b>Price:</b> <?php echo $Product['Product']['price']; ?></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:30:42.147

**仔细阅读以查看实际的解决方案。**

不应该

```
 <img src="<?php echo $path .'/'. $row['Product']['filename']; ?> "  width="300px" /> 
```

是：

```
 <img src="<?php echo $path .'/'. $Product['Product']['filename']; ?> "  width="300px" /> 
```

?

由于原始海报实际上回答了他们自己的问题，我想我会详细说明。

**解决方案：**

更换：

```
 <img src="<?php echo $path .'/'. $row['Product']['filename']; ?> "  width="300px" /> 
```

和：

```
 <?php echo $this->Html->image('$Product['Product']['filename']') ?> 
```

# ruby-on-rails - ActiveModel::Errors:Class 的未定义方法“model_name”

> ID：11592185
> 
> 赞同：4
> 
> 时间：2012-07-21T12:28:51.523
> 
> 标签：ruby-on-rails, mongoid, activemodel

我有以下 mongoid 模型类：

```
class Exercise
  include Mongoid::Document
  field :name, :type => String
  field :description, :type => String

  belongs_to :group

  validates_presence_of :name, :description, :group
end 
```

我有以下控制器：

```
class ExercisesController < ApplicationController
  respond_to :json

  def create
    @exercise = Exercise.create(params[:exercise])
    if @exercise.save
      respond_with @exercise
    else
      respond_with(@exercise.errors, :status => :unprocessable_entity)
    end
  end
end 
```

该模型在有效但运行以下行时保存良好：

```
respond_with(@exercise.errors, :status => :unprocessable_entity) 
```

我收到以下错误

> ActiveModel::Errors:Class 的未定义方法“model_name”

错误集合已填充，因此我认为我的 respond_with 语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:19:08.090

rails respond_with 助手期望接收 rails 模型对象作为第一个参数。因此，在这种情况下，您只需要 respond_with @exercise, status: :unprocessable_entity 然后在您的响应视图中，您需要正确格式化错误数据，我假设您是通过 ajax 执行此操作并使用 json 等进行响应。希望有帮助。

# zend-framework - 配置 httpd.conf 后无法打开 localhost

> ID：11592191
> 
> 赞同：0
> 
> 时间：2012-07-21T12:29:26.720
> 
> 标签：zend-framework

我已经安装了 Zend 框架，并且我已经创建了我的项目“zendy”到路径：D:\wamp\www\zendy。所以我通过添加以下内容修改了文件“httpd.conf”（我使用 WAMPSERVER）：

名称VirtualHost 127.0.0.1

```
<VirtualHost 127.0.0.1>
     ServerName zendy
     DocumentRoot D:\wamp\www\zendy\public
     <Directory D:\wamp\www\zendy\public>
         DirectoryIndex index.php
         AllowOverride All
         Order allow,deny
         Allow from all
     </Directory>
</VirtualHost> 
```

然后我重新启动了 WAMPSERVER 的所有服务。我在文件 C:\Windows\System32\divers\etc\hosts 中添加了一行“127.0.0.1 zendy”然后我在导航器中键入“zendy/”或“localhost”，但它显示如下：

“内部服务器错误服务器遇到内部错误或配置错误，无法完成您的请求。”

我完全遵循安装 zend 框架的教程，例如： [http](http://www.youtube.com/watch?v=m7svJHmgJqs) ://www.youtube.com/watch?v=m7svJHmgJqs和[http://framework.zend.com/manual/en/learning.quickstart.create-project.html](http://framework.zend.com/manual/en/learning.quickstart.create-project.html)

谁能帮我？？非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:49:23.233

使用“httpd -S”验证虚拟配置语法</p>

还可以在 httpd.conf 中找到类似的内容，并通过在 Include 之前删除前面的 # 符号来取消注释

```
#Virtual hosts 
Include conf/extra/httpd-vhosts.conf 
```

如上所述，请不要删除虚拟主机前的 # 符号。

另外，添加

```
Options Indexes FollowSymLinks 
```

前

```
AllowOverride All 
```

并重新启动 wamp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:59:13.747

这是正确的配置：

```
<VirtualHost *:80>
    ServerName zendy
    DocumentRoot D:\wamp\www\zendy\public
</VirtualHost> 
```

您无需在此提及目录。

尝试并恢复！:)

PS：另外，检查您的主 httpd.conf 或 apache2.conf 文件中的 AllowOverride。希望能帮助到你！

# php - 使用 codeigniter 发送电子邮件

> ID：11592193
> 
> 赞同：0
> 
> 时间：2012-07-21T12:29:50.573
> 
> 标签：php, codeigniter, email

我正在尝试使用以下代码发送电子邮件 $this->load->library('email', $config);

```
 $this->email->from('leena.nasir552@gmail.com');
        $this->email->to('leena.nasir@morgan.com');     
        $this->email->subject('my email');     
        $this->email->message($message);

       $result = $this->email->send() ;
       echo($result) ;

        if($this->email->send())

            {

            $params = array (

                'SenderId'=>     $senderId,
                'ReceiverId'=>   $recieverId,
                'Message'=>       $message,
                'Status' =>       'Sent'             // set the statues variable to Sent if it sent successfully

                    );

            $this->UserModel->addMessage($params);

            }  else {
            echo $this->email->print_debugger();

                $params = array (

                    'SenderId' =>     $senderId,
                    'ReceiverId' =>   $recieverId,
                    'Message'=>       $message,
                    'Status' =>       'failed'      // set the status to failed if the message sending failed

                        );

                $this->UserModel->addMessage($params);

                  } 
```

每次我尝试发送电子邮件时都会收到此错误的问题

遇到 PHP 错误

严重性：通知

消息：未定义索引：主题

文件名：库/Email.php

行号：982

谁能帮我解决这个错误？假设这是来自 Email.php 库的第 982 行

```
$this->_subject = $this->_headers['Subject']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:48:06.210

删除这两行

```
 $result = $this->email->send() ;
 echo($result) ; 
```

因为您正尝试在此处再次“发送”两次发送电子邮件

```
 if($this->email->send()) 
```

# android - 而不是字符串如何处理大字符串值而不丢失数据？

> ID：11592195
> 
> 赞同：1
> 
> 时间：2012-07-21T12:30:08.540
> 
> 标签：android

我是 android 编程新手，我的问题是请求 web ，然后`webservice`接收响应。当我将响应字段转换为时，它会显示错误，例如未完全从 web 服务接收到的值。谁能帮我解决这个问题。`byte[]``Bitmap`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:02:35.673

```
SoapObject 响应 = (SoapObject)envelope.bodyIn;
字符串结果 = response.getProperty(0).toString();
```

使用此代码。

# android - 在 Android 中播放媒体

> ID：11592196
> 
> 赞同：0
> 
> 时间：2012-07-21T12:30:12.273
> 
> 标签：android, audio, media-player

我的应用正在播放一些音频文件，但如果用户点击播放按钮两次，它将播放然后它会再次播放（类似的东西）。

我希望在音频文件的第一次执行结束时发生下一个动作。

我怎样才能做到这一点？

这是我的代码：

```
MediaPlayer mMediaPlayer = new MediaPlayer();
try {
    mMediaPlayer.setDataSource((endMidia));
    mMediaPlayer.prepare();
} catch (IllegalArgumentException e) {
    e.printStackTrace();
}                                        
mMediaPlayer.start(); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:34:23.110

您可以使用[MediaPlayer.isPlaying()](http://developer.android.com/reference/android/media/MediaPlayer.html#isPlaying%28%29)进行检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T12:34:40.273

有`MediaPlayer`事件的听众，比如`OnCompletionListener`

[http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener(android.media.MediaPlayer.OnCompletionListener](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener(android.media.MediaPlayer.OnCompletionListener) )

和别的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T12:43:36.553

检查**条件**，如下面的代码所示

```
 MediaPlayer mMediaPlayer = new MediaPlayer();
  try {
    mMediaPlayer.setDataSource((endMidia));
    mMediaPlayer.prepare();
      } catch (IllegalArgumentException e) {
      e.printStackTrace();
    }    
   if(!mMediaPlayer.isPlaying()){                                    
        mMediaPlayer.start();
    } 
```

# architecture - 如何在文档中表示企业应用程序的架构？

> ID：11592201
> 
> 赞同：1
> 
> 时间：2012-07-21T12:30:51.990
> 
> 标签：architecture, uml, n-tier-architecture

请指导我使用建模语言在文档中表示一个复杂的基于 Java/Java EE 的 n 层企业应用程序架构。

并就我们需要在文档中代表此类应用程序的所有内容向我提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T18:13:39.493

企业架构不是软件架构。事实上，EA 对程序员来说并不是那么重要，这就解释了为什么没有其他人在 stackoverflow 上回答你的问题。这里是前 3 名。

*   [TOGAF](http://www.opengroup.org/togaf/)是这个空间中的 800 磅大猩猩。
*   [ZF](http://www.zachman.com)被认为是更专注于静态分析的替代方案
*   [PEAF](http://www.pragmaticea.com/peaf.htm)适合那些认为前两个对他们的口味来说太重的人。

也许您真的只是在询问如何记录软件架构。[IEEE 标准 1471](http://www.enterprise-architecture.info/Images/Documents/IEEE%201471-2000.pdf)可能更适合您（在这种情况下是 Java）。

请记住，当前的软件开发趋势正在[远离](http://www.dynamicalsoftware.com/analysis/code-roller)这种形式化的方法。

# javascript - 基于用户语言选择的重定向

> ID：11592202
> 
> 赞同：1
> 
> 时间：2012-07-21T12:31:00.607
> 
> 标签：javascript, redirect, cookies

有人可以告诉我为什么这段代码不起作用。我有一个索引页面，您可以在其中使用 2 个链接选择您的语言，这些链接将您引导至语言索引页面。

我已将此代码添加到我的索引页面：

```
<script type="text/javascript">
  function get_cookie (username)
  {
    var results = document.cookie.match(username + '=(.*?)(;|$)');

    if (results[1] == "en")
      location.replace("http://x.com");
    if (results[1] == "es")
      location.replace("http://y.com");    
    else
      return null;
  }

  get_cookie('username');
</script> 
```

这段代码到我的语言索引页面：

```
<script type="text/javascript">
  var cookieDate = new Date(2012, 8, 08)
  document.cookie = "username=en;expires=" + cookieDate.toGMTString();
</script> 
```

奇怪的是，当我在桌面上打开索引页面时，它会重定向我，但是当我在网络上打开它时，它不会。

# wordpress - 如何获取 wordpress nextgen 画廊 ID

> ID：11592204
> 
> 赞同：-1
> 
> 时间：2012-07-21T12:31:14.890
> 
> 标签：wordpress

我想在 WP 页面中包含图像的幻灯片放映。

我已经下载并安装了**Nextgen Gallery 插件**

从[教程视频](http://www.youtube.com/watch?v=EcDM48cEjlA)中我知道我必须包含短代码

[幻灯片库 id="abc" 宽度 ="200" 高度"200"]

现在如何获取已创建专辑的 id？即我怎么知道值“abc”？

![在此处输入图像描述](../Images/36e0b836d9df0e09129051946a594eaa.png)

在上面什么是 id ？

**编辑1**

[幻灯片画廊 id="1" 宽度="200" 高度="200"]

当我写这个..在网页上的图像arnt得到加载..

![在此处输入图像描述](../Images/d43a0fa54261da5ae1622251e750ed7a.png)

当我在 WP 页面中写入 [nggallery id=1] 时

![在此处输入图像描述](../Images/867fa6ffa3f7423b62d2232a68beb110.png)

图像正在加载..但它们没有显示为幻灯片...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:27:13.353

它就在您图片中标有“ID”的列下。在您的示例中，图库 1 的 ID 为 1。

其次，您的简码不正确。为了使用 NGGallery 短代码，它需要看起来像这样：

```
[nggallery id=1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:30:15.580

你可以在你的图片ID栏下找到它，它是一个数字！

所以你的代码将是 [slideshow galery id="1" width="200" height="200"]

# macos - 从其他应用程序访问 Safari 书签

> ID：11592207
> 
> 赞同：14
> 
> 时间：2012-07-21T12:31:31.557
> 
> 标签：macos, safari, icloud, bookmarks, syncservices

我想知道我们如何才能从 Mac OS X 上的另一个 Cocoa 应用程序访问 Safari 书签，以一种对未来安全可靠的方式。

您可能知道，检索 Safari 书签的常见机制有两种：

*   要么阅读 Safari 的 Bookmarks.plist 文件
*   或使用 SyncServices API。

但是，第一个被沙盒禁止（通过 App Store 分发是强制性的），第二个自 Mac OS X 10.7 Lion 以来已被弃用。

我相信 Apple 已弃用 SyncServices 以支持 iCloud 同步，但我找不到任何允许访问书签的 iCloud API (1)。

关于在哪里看的任何提示？本机 Cocoa 是首选，但欢迎任何未弃用的、与沙盒兼容的解决方案。

谢谢。

(1) 而且，老实说，通过互联网（因此需要互联网连接）在同一台机器上检索某台机器上的某些东西似乎......很尴尬 - 但好吧，如果这是要走的路，至少那会是一个潜在可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:28:38.387

如果您明确征求用户的同意，即使在沙箱中运行，您也可以读出书签 plist 文件：显示一个指向 plist 目录的打开面板并存储您从中收到的安全范围的书签。我这样做了，我的应用并没有因此而被拒绝（但其他事情）。

# c# - 如何确定该值来自用户请求，或者它只是 .NET 中数字类型的默认值

> ID：11592209
> 
> 赞同：0
> 
> 时间：2012-07-21T12:31:57.747
> 
> 标签：c#, web-services, numeric

如何确定该值是来自用户请求还是只是 .NET 中数字类型的默认值？我的应用程序是一个 .NET Web 服务。

我被困了很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T12:49:40.607

你不能。值对象*将*有一个值，一旦它是默认值（数字类型为 0），您就无法区分它是由用户设置还是默认“刚刚发生”。

您可以做的是使用可为空的类型（在 C# 中，符号是`Nullable<int>`or `int?`），然后检查它们的`.HasValue`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:11:30.853

For double, use double.NaN (not a valid number).

# c++ - QAbstractModel - 无法使用 getItem 和 QModelIndex 获取 QAbstractModelItem

> ID：11592216
> 
> 赞同：1
> 
> 时间：2012-07-21T12:33:13.270
> 
> 标签：c++, qt

您好，我尝试实现自定义 QAbstractModel 以在 QtreeView 上使用它。

主要要求是将 QDomNodes 存储为树，以便我可以轻松访问/删除/添加子项。

但是在这种方法中，我收到了分段错误

```
ProjectTreeItem *ProjectTreeModel::getItem(const QModelIndex &index) const
{
    if (index.isValid()) {
         ProjectTreeItem *item = static_cast<ProjectTreeItem*>(index.internalPointer());
         if (item) return item;
     }
     return rootItem;
} 
```

这是整个文件：

[http://pastebin.com/HmWZwVmC](http://pastebin.com/HmWZwVmC) - projecttreemodel.cpp

[http://pastebin.com/4nDXDVX0](http://pastebin.com/4nDXDVX0) - projecttreeitem.cpp

这是我尝试做的：

```
void Ide::slotDeleteItem()
{
    /**
      * ui->projectsView is a QTreeView with setModel(model)
          * model is a ProjectTreeModel
          */
    QItemSelectionModel* sel = ui->projectsView->selectionModel();

    QModelIndexList lst = sel->selectedIndexes();

    QModelIndex ind = lst.at(0);

    ProjectTreeItem* item = model->getItem(ind);

/** SEGFAULT even if getItem is moved to public(default is private) **/
    qDebug() << item->data(Qt::DisplayRole).toString();
/** SEGFAULT **/
    qDebug() << model->data(ind,Qt::DisplayRole);

/** Works and display information correct, but i need to access to ProjectTreeItem **/

    qdebug() << ind.data(Qt::DisplayRole);
} 
```

我不确定“内部指针”在做什么，如果有人可以帮忙，好吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:40:24.820

我找到了问题的根源，这不是模型问题，我使用 QProxyModel 过滤了一些节点，并且提供的所有 QModelIndex 都无效。如果您想使用 selectionModel 来获取选定的索引，请不要使用 Qpr​​oxyModel。

# authentication - 如何添加自定义身份验证提供程序

> ID：11592225
> 
> 赞同：1
> 
> 时间：2012-07-21T12:33:35.907
> 
> 标签：authentication, windows-ce

Windows CE 5.0 提供了几个[安全支持提供程序][1]：

*   Kerberos 安全支持提供程序
*   NTLM 安全支持提供程序
*   Schannel 安全支持提供商
*   协商安全支持提供商

我需要提供自己的安全支持提供程序，因为我需要将身份验证信息从我的 Windows CE 平台的一个版本迁移到下一个版本。

NTLM 身份验证可以将密码哈希存储在注册表中。但是当您升级到下一个 SYSGENed 平台时，这些都是无效的。因此，我想添加一个自定义身份验证提供程序。如何实施？

# entity-framework - 实体框架 TPT 继承 - 如何从数据库中获取？

> ID：11592229
> 
> 赞同：1
> 
> 时间：2012-07-21T12:34:15.190
> 
> 标签：entity-framework

我有一个带有 TypeId 列的 BaseTable，它是 Type 表的外键。我通过使用每个层次结构模式的模板将其映射到实体框架模型中。

现在我有一个`BaseClass`和两个名为`SubClass1`and`SubClass2`和 make BaseClass的子类`abstract`。

从我的一页到第二页，我得到一个 id（`BaseClass`当然这是一个 id），我想从数据库中获取这个对象。

我将如何进行查询？Coming id 当然是属于一个子类的。

例如，我可以这样写：

```
BaseClass object = provider.getfrombaseclassbyid(id); 
```

我可以做这样的拳击吗？如果可以，我怎么知道什么是真正的对象。它是一个`Subclass1`或`Subclass2`？我怎么知道？

你能帮我怎么办吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:03:56.717

我不确定以下是否回答了您的问题，但您确实可以查询代表抽象实体的集合：

```
BaseClass entity = context.BaseClasses.SingleOrDefault(b => b.Id == id); 
```

当然，结果永远不会是类型`BaseClass`，因为无法创建抽象类型的实例。它将是类型`SubClass1`或`SubClass2`（或者`null`如果`id`不存在具有该类型的实体）。Entity Framework 可以通过查看鉴别器列的值（对于 Table-Per-Hierarchy (TPH) 继承）或通过从基表连接到派生表来决定在创建对象时必须使用哪种类型类型（用于 Table-Per-Type (TPT) 继承）。

例如，您可以使用以下方法检查物化类型：

```
string typeName = entity.GetType().Name; // will be "Subclass1" or "Subclass2" 
```

或者：

```
if (entity is SubClass1)
    // ...
else if (entity is SubClass2)
    // ... 
```

如果您事先知道要加载类型的实体，`SubClass1`则可以使用`OfType<T>`运算符：

```
SubClass1 entity = context.BaseClasses.OfType<SubClass1>()
    .SingleOrDefault(b => b.Id == id); 
```

如果给定的实体`id`不是 a`SubClass1`而是 a `SubClass2`，则此查询的结果将为`null`。否则，它保证是一个`SubClass1`.

# sybase - 检查提供的字符串的长度

> ID：11592230
> 
> 赞同：0
> 
> 时间：2012-07-21T12:34:19.727
> 
> 标签：sybase, check-constraint

我正在尝试定义一个仅允许传递 6 个字符字符串的域。我通过以下方式声明它：

```
create domain aircrafts_reg_nos as char(6)
check(length(@value) = 6) 
```

但这似乎无法捕获超过 6 个字符的字符串。有没有办法强制执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T20:35:36.763

*length*不是 Sybase SQL 函数。要查找字符字段的长度，请使用 *char_length*。所以你的代码应该看起来像这样。

```
create domain aircrafts_reg_nos as char(6)
check(char_length(@value) = 6) 
```

此外，尝试做更多的研究，以确保您在代码中使用正确的函数名称。

# javascript - 简单的图像滑块 Javascript 图像路径在 IE 6 中不起作用

> ID：11592234
> 
> 赞同：0
> 
> 时间：2012-07-21T12:34:39.480
> 
> 标签：javascript, slider, internet-explorer-6

我正在使用一个简单的图像滑块脚本。它在大多数浏览器中都能完美运行。

当我在 IE6 中使用默认图像对其进行测试时，它工作正常：为要加载的图像提供的默认路径是这样的一些 url `somesitename.com/image.jpg`；这适用于 IE 6 和其他现代浏览器。

但是当我添加我`someimages.jpg`的图像时，它不会在 IE6 中加载图像，而在其他浏览器中它可以正常工作。

是不是我的 javascript 先支持一些 URL 路径，然后再支持图像路径？

下面的代码是我正在编辑图像路径的部分......

```
<script type="text/javascript">
var mygallery=new simpleGallery({
    wrapperid: "simplegallery1", //ID of main gallery container,
    dimensions: [300,250], //width/height of gallery in pixels. Should reflect dimensions of the images exactly
    imagearray: [
        ["images/img-2.jpg", "#", "_new", "There's nothing like a nice swim in the Summer."],
        ["images/img-1.jpg", "#", "", ""],
        ["images/r-.jpg", "", "", "Eat your fruits, it's good for you!"],
        ["images/inside-image1.jpg", "", "", ""]
    ],
    autoplay: [true, 2500, 5], //[auto_play_boolean, delay_btw_slide_millisec, cycles_before_stopping_int]
    persist: false, //remember last viewed slide and recall within same session?
    fadeduration: 500, //transition duration (milliseconds)
    oninit:function(){ //event that fires when gallery has initialized/ ready to run
        //Keyword "this": references current gallery instance (ie: try this.navigate("play/pause"))
    },
    onslide:function(curslide, i){ //event that fires after each slide is shown
        //Keyword "this": references current gallery instance
        //curslide: returns DOM reference to current slide's DIV (ie: try alert(curslide.innerHTML)
        //i: integer reflecting current image within collection being shown (0=1st image, 1=2nd etc)
    }
})
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:50:54.930

我假设`SimpleGallery`您正在使用的脚本是这个：[http](http://www.dynamicdrive.com/dynamicindex4/simplegallery.htm) ://www.dynamicdrive.com/dynamicindex4/simplegallery.htm （我猜是那个，因为您给出的代码示例与该页面）。

如果是这样，请注意在该页面的顶部，它说明了脚本支持的浏览器：“FF1+ IE7+ Opr9+”。

也就是说，这个脚本不支持IE6。

您可能能够修复它，但它可能涉及修改脚本本身的代码。可能不值得努力。

还值得指出的是，这个脚本不是一个 jQuery 插件。您已将 jQuery 作为您的问题标签之一，所以我假设您的网站上有 jQuery。如果是这样，肯定还有其他可用的滑块脚本支持 IE6。我建议您最好的解决方案是尝试其中一种。

最后，一个大问题：你*真的*需要支持 IE6 吗？如果你在中国，那么答案可能是肯定的，否则答案应该是“不”。IE6 的使用率现在下降到 0.3% 左右，并且每个月都在下降，即便如此，这 0.3% 的大部分是企业，他们将在不久的将来对 IE6（和 WinXP）的官方支持结束时被迫升级完全地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:05:12.857

您的 someimages.jpg 应位于运行图像滑块代码的同一目录中，否则提供 someimages.jpg 的完整路径

# c++ - 在 if 语句中使用逗号运算符

> ID：11592240
> 
> 赞同：0
> 
> 时间：2012-07-21T12:35:59.900
> 
> 标签：c++, if-statement, comma

我尝试了以下方法：

```
if(int i=6+4==10)
    cout << "works!" << i;

if(int i=6+4,i==10)
    cout << "doesn't even compile" << i; 
```

第一个工作正常，而第二个无法编译。为什么是这样？

编辑：现在我知道第一个可能无法按我的意愿工作。i 在 if 范围内的值将是 1，而不是 10。（正如对此问题的评论之一所指出的那样）。

那么有没有办法在 if 语句中同时初始化和使用变量，类似于`for(int i=0;i<10;i++)`？这样您就可以生成类似`if((int i=6+4)==10)`（不会编译）的东西，其中 if 范围内的 I 值为 10？我知道你可以在 if 语句之前声明和初始化 I ，但是有没有办法在语句本身中做到这一点？

让您了解为什么我认为这会很有用。

```
 if(int v1=someObject1.getValue(), int v2=someObject2.getValue(), v1!=v2)
    {
        //v1 and v2 are visible in this scope 
        //and can be used for further calculation without the need to call
        //someObject1.getValue() und someObject2.getValue() again.
    }
    //if v1==v2 there is nothing to be done which is why v1 und v2
    //only need to be visible in the scope of the if. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T12:40:55.570

用作初始化表达式的表达式必须是*赋值表达式*，因此如果要使用逗号运算符，则必须将初始化表达式括起来。

例如（并不是说您尝试的`6 + 4`内容没有副作用，并且该值被丢弃并在其自己的初始化程序中`i == 10`使用未初始化的值。）`i`

```
if (int i = (6 + 4, i == 10)) // behaviour is undefined 
```

你真的是这个意思吗？

```
int i = 6 + 4;
if (i == 10) 
```

当使用`if`声明新变量的形式时，检查的条件始终是转换为的初始化变量的值`bool`。如果您希望条件是一个涉及新变量的表达式，您必须在语句之前声明该变量`if`并使用您要测试的表达式作为条件。

例如

```
int i;
if ((i = 6 + 4) == 10) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T12:40:42.987

我严重怀疑这两个示例都*可以*做任何有用的事情。它所做的只是以复杂的方式评估为“真实”。

但是第二个没有编译的原因是它被解释为两个声明：`int i = 6+4; int i==10`并且`int i==10`无效，因为这是一个相等运算符，而不是一个赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T09:39:52.730

从 C++17 开始，您尝试做[的事情终于成为可能](http://en.cppreference.com/w/cpp/language/if)：

```
if (int i=6+4; i==10)
    cout << "works, and i is " << i << endl; 
```

注意使用 of`;`而不是`,`分隔声明和实际条件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-21T12:54:35.340

有不同的选择，因为您想要的无法完成（您不能将逗号运算符与声明混合）。例如，您可以在`if`条件之外声明变量：

```
int i = 6+4;
if ( i == 10 ) ... 
```

或者，您可以将 的值更改为`i`is`0`而不是`10`并`i`在`else`块内重新计算：

```
if ( int i = (6+4)-10 ) ; else {
   i += 10;
   // ...
} 
```

简单得多，根本不声明变量，因为您知道循环内的值：

```
if ( (6+4)==10 ) {
   int i = 10;
   // ...
} 
```

`i`当然，除非您在它不是的情况下需要 的值，`10`在这种情况下，第二个选项是最合适的。

# jpa - 根据 EntityManager 检测使用了哪个 JPA 提供者

> ID：11592249
> 
> 赞同：1
> 
> 时间：2012-07-21T12:37:36.370
> 
> 标签：jpa

当只有 EntityManager 句柄可用时，有没有办法检测使用了哪个 JPA 提供程序？

由于 EntityManagers 经常被代理，所以查看类并不能很好地工作。在 EntityManager 或 EntityManagerFactory getProperties 映射中是否有此标准属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:51:33.737

AFAIK，不。但是您可以使用[getDelegate()](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#getDelegate%28%29)方法并查看它返回的内容。例如，对于 Hibernate，它返回 Hibernate`Session`实例。仅获取返回的委托的类的名称就可以让您了解底层提供者。

# iphone - NSMutableArray 未更新

> ID：11592251
> 
> 赞同：0
> 
> 时间：2012-07-21T12:37:57.560
> 
> 标签：iphone, ios, xcode

我对iOS有点陌生，我的数组很难用，我正在使用`NSMutableArray`，我已经把我的数组放在了`AppDelegate`，第一次加载我`viewController`的数组中的应用程序还没有对象，我有一个设置将我的整数放入数组中，但是保存数组后没有加载，但是当退出然后重新打开时，它将加载，请有人解释我该如何解决以及为什么会这样？我正在使用它`tableview`。

在`app delegate`：

```
self.integers = [NSMutableArray array];  
for(int i = 0; i <= 10; i++) 
{ .....
  } 
```

加载：

```
integers = ((AppDelegate *)[[UIApplication sharedApplication] delegate]).integers; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:40:33.970

我的答案：

在你的代码的某个地方，你有一个循环来加载你的整数并将它们放入你的数组中，对吗？您需要将该循环放入一个方法中，并在要将`UITableVIew`内容重置回其原始内容时再次调用它。然后您需要更新您的`AppDelegate`和您的数组`viewController`，因此根据该方法所在的类，您需要使用将整数复制到另一个类

```
integers = ((AppDelegate *)[[UIApplication sharedApplication] delegate]).integers; 
```

或者

```
// your array then update
self.integerss = [NSMutableArray array];  

    for(int i = 0; i <= 10; i++) 
    { .....
      }

((AppDelegate *)[[UIApplication sharedApplication] delegate]).integers = self.integers; 
```

使用最初用于数组的相同代码将所有整数放回原处，然后调用`reloadData`. `tableview`这将解决你的问题。

# php - jquery自动完成并从mysql onchange中获取值

> ID：11592260
> 
> 赞同：0
> 
> 时间：2012-07-21T12:39:21.407
> 
> 标签：php, jquery, mysql

我需要一些关于使用 PHP、MySQL 和 jQuery 制作表单的帮助。

这是我的 HTML 和 PHP 表单结构：

```
<form>
    <label>Employee Name</label>
    <input name="empid" type="text" id="search"  <?php  if (!empty($empid))echo "value='$empid'"; ?>>
    <label>Leave Type</label>
    <select name="leavetype" id="leavetype">
        <option value="">--SELECT--</option>
        <?php Loadlookup("id","leavetype","tbl_leavetypes",$leaveid,$d); ?>
    </select>
    <label>Leave Balance</label>
    <input id="autopopulate" value="">
    <input type="submit">
</form> 
```

我正在使用自动完成来查找员工的姓名。如何通过自动完成获取员工的姓名和 ID，并且只在输入中显示员工的姓名，但在某些隐藏字段中显示 ID？这是我在 PHP 中的自动完成代码：

```
require_once "config.php";
$q = strtolower($_GET["q"]);
if (!$q) return;

$sql = "select DISTINCT FullName as FullName from prmember where FullName LIKE '%$q%'";
$rsd = mysql_query($sql);
while($rs = mysql_fetch_array($rsd)) {
    $cname = $rs['FullName'];
    echo "$cname\n"; 
```

这是自动完成的 jQuery 代码：

```
<script type="text/javascript">
$().ready(function() {
    $("#search").autocomplete("search/search.php", {
        width: 260,
        matchContains: true,
        //mustMatch: true,
        //minChars: 0,
        //multiple: true,
        //highlight: false,
        //multipleSeparator: ",",
        selectFirst: true,

    });
});
</script> 
```

之后，看看我的 HTML 表单代码。当我更改`<select>`表单时，我想自动填充`<input id="autopopulate" value="">`数据库中的值。

如果您提供所有代码，这将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T02:08:54.960

尝试以下操作[并检查此以获取更多详细信息](http://api.jquery.com/jQuery.get/)

```
$('#leavetype').onchange(function(){

var lvType = $(this).val();

    $.get("search.php?q="+lvType, function(data){
       $('#autopopulate').val(data);
    });

 }
); 
```

# python - 检查字符串是否为十六进制

> ID：11592261
> 
> 赞同：59
> 
> 时间：2012-07-21T12:39:22.037
> 
> 标签：python, hex

我知道最简单的方法是使用[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)，但我想知道是否还有其他方法可以进行此检查。

为什么我需要这个？[我正在编写一个从SIM](https://en.wikipedia.org/wiki/Subscriber_identity_module)卡读取短信 (SMS) 的 Python 脚本。在某些情况下，十六进制消息到达，我需要为它们做一些处理，所以我需要检查收到的消息是否是十六进制的。

当我发送以下短信时：

```
Hello world! 
```

我的脚本收到

```
00480065006C006C006F00200077006F0072006C00640021 
```

但在某些情况下，我会收到正常的短信（不是十六进制的）。所以我需要做一个**if 十六进制**控制。

我正在使用 Python 2.6.5。

更新：

该问题的原因是，（不知何故）我发送的消息被接收，`hex`而运营商发送的消息（信息消息和广告。）被作为普通字符串接收。所以我决定进行检查并确保我收到的消息是正确的字符串格式。

**一些额外的细节**：我正在使用华为 3G 调制解调器和[PyHumod](http://code.google.com/p/pyhumod/)从 SIM 卡读取数据。

***我的情况可能的最佳解决方案：***

处理此类字符串的最佳方法是使用`a2b_hex`(aka `unhexlify`) 和`utf-16 big endian encoding`(如@JonasWielicki 所述)：

```
from binascii import unhexlify  # unhexlify is another name of a2b_hex

mystr = "00480065006C006C006F00200077006F0072006C00640021"
unhexlify(mystr).encode("utf-16-be")
>> u'Hello world!' 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-21T12:41:50.783

**(1)**使用[int()](http://docs.python.org/library/functions.html#int)可以很好地解决这个问题，Python 会为您完成所有检查:)

```
int('00480065006C006C006F00200077006F0072006C00640021', 16)
6896377547970387516320582441726837832153446723333914657L 
```

将工作。如果失败，您将收到`ValueError`异常。

*简短的例子：*

```
int('af', 16)
175

int('ah', 16)
 ...
ValueError: invalid literal for int() with base 16: 'ah' 
```

**(2)**另一种*方法*是遍历数据并确保所有字符都在 和 的范围`0..9`内`a-f/A-F`。`string.hexdigits`( `'0123456789abcdefABCDEF'`) 对此很有用，因为它包含*大写*和小写数字。

```
import string
all(c in string.hexdigits for c in s) 
```

将根据您在 string 中数据的有效性返回`True`或返回。`False``s`

*简短的例子：*

```
s = 'af'
all(c in string.hexdigits for c in s)
True

s = 'ah'
all(c in string.hexdigits for c in s)
False 
```

*备注*：

正如@ScottGriffiths 在下面的评论中正确指出的那样，`int()`如果您的字符串`0x`在开头包含，则该方法将起作用，而逐个字符的检查将因此失败。此外，检查一*组*字符比*一串*字符要快，但是这对于短 SMS 字符串是否很重要，除非您按顺序处理许多（很多！）它们，在这种情况下，您可以将 stringhexditigs 转换为一组与`set(string.hexdigits)`.

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-21T12:43:41.373

你可以：

1.  测试字符串是否只包含十六进制数字（0…9,A…F）
2.  尝试将字符串转换为整数并查看它是否失败。

这是代码：

```
import string
def is_hex(s):
     hex_digits = set(string.hexdigits)
     # if s is long, then it is faster to check against a set
     return all(c in hex_digits for c in s)

def is_hex(s):
    try:
        int(s, 16)
        return True
    except ValueError:
        return False 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-12-14T06:35:04.483

我知道操作中提到的[正则表达式](https://docs.python.org/3.4/library/re.html#re.fullmatch)，但为了完整起见，我想贡献这样一个解决方案：

```
def is_hex(s):
    return re.fullmatch(r"^[0-9a-fA-F]$", s or "") is not None 
```

**表现**

为了评估这里提出的不同解决方案的性能，我使用了 Python 的[timeit](https://docs.python.org/3.4/library/timeit.html)模块。输入字符串随机生成三种不同的长度，`10`, `100`, `1000`：

```
s=''.join(random.choice('0123456789abcdef') for _ in range(10)) 
```

[Levon的](https://stackoverflow.com/questions/11592261/check-if-string-is-hexadecimal/11592279#11592279)解决方案：

```
# int(s, 16)
  10: 0.257451018987922
 100: 0.40081690801889636
1000: 1.8926858339982573

# all(_ in string.hexdigits for _ in s)
  10:  1.2884491360164247
 100: 10.047717947978526
1000: 94.35805322701344 
```

其他答案是这两者的变体。使用正则表达式：

```
# re.fullmatch(r'^[0-9a-fA-F]$', s or '')
  10: 0.725040541990893
 100: 0.7184272820013575
1000: 0.7190397029917222 
```

因此，选择正确的解决方案取决于输入字符串的长度以及是否可以安全地处理异常。正则表达式当然可以更快地处理大字符串（并且不会`ValueError`在溢出时抛出），但`int()`它是较短字符串的赢家。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-27T10:20:27.983

一种基于字符串转换以设置和检查子集的更简单和简短的解决方案（不检查'0x'前缀）：

```
import string
def is_hex_str(s):
    return set(s).issubset(string.hexdigits) 
```

更多信息[在这里](https://docs.python.org/2/library/stdtypes.html#frozenset.issubset)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-24T18:48:35.603

另外的选择：

```
def is_hex(s):
    hex_digits = set("0123456789abcdef")
    for char in s:
        if not (char in hex_digits):
            return False
    return True 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-29T19:42:24.600

上面提出的大多数解决方案都没有考虑到任何十进制整数也可能被解码为十六进制，因为十进制数字集是十六进制数字集的子集。所以 Python 很乐意接受`123`并假设它是`0123`十六进制的：

```
>>> int('123',16)
291 
```

这听起来很明显，但在大多数情况下，您会寻找实际上是十六进制编码的东西，例如散列，而不是任何*可以*十六进制解码的东西。所以可能一个更强大的解决方案还应该检查十六进制字符串的偶数长度：

```
In [1]: def is_hex(s):
   ...:     try:
   ...:         int(s, 16)
   ...:     except ValueError:
   ...:         return False
   ...:     return len(s) % 2 == 0
   ...: 

In [2]: is_hex('123')
Out[2]: False

In [3]: is_hex('f123')
Out[3]: True 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-16T21:10:22.093

这将涵盖字符串以“0x”或“0X”开头的情况：[0x|0X][0-9a-fA-F]

```
d='0X12a'
all(c in 'xX' + string.hexdigits for c in d)
True 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-13T20:09:49.407

使用 Python 来确定 True 或 False，我会使用 eumero 的 is_hex 方法而不是 Levon 的方法一。以下代码包含一个陷阱...

```
if int(input_string, 16):
    print 'it is hex'
else:
    print 'it is not hex' 
```

它错误地将字符串“00”报告*为非*十六进制，因为零的计算结果为 False。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-25T03:19:28.450

大多数解决方案都不能正确检查带前缀的字符串`0x`

```
>>> is_hex_string("0xaaa")  
False  
>>> is_hex_string("0x123")  
False  
>>> is_hex_string("0xfff")  
False  
>>> is_hex_string("fff")  
True 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-10T22:43:45.070

由于上面的所有正则表达式都花费了大约相同的时间，我猜大部分时间都与将字符串转换为正则表达式有关。下面是我在预编译正则表达式时得到的数据。

```
int_hex  
0.000800 ms 10  
0.001300 ms 100  
0.008200 ms 1000  

all_hex  
0.003500 ms 10  
0.015200 ms 100  
0.112000 ms 1000  

fullmatch_hex  
0.001800 ms 10  
0.001200 ms 100  
0.005500 ms 1000 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-22T22:06:01.583

简单的解决方案，如果您需要一个模式来验证前缀十六进制或二进制以及十进制

```
\b(0x[\da-fA-F]+|[\d]+|0b[01]+)\b 
```

示例：[https ://regex101.com/r/cN4yW7/14](https://regex101.com/r/cN4yW7/14)

然后`int('0x00480065006C006C006F00200077006F0072006C00640021', 0)`在 python 中做 6896377547970387516320582441726837832153446723333914657

基数 0 调用前缀猜测行为。这为我省去了很多麻烦。希望能帮助到你！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-28T05:06:21.470

这是我的解决方案：

```
def to_decimal(s):
    '''input should be int10 or hex'''
    isString = isinstance(s, str)
    if isString:
        isHex = all(c in string.hexdigits + 'xX' for c in s)
        return int(s, 16) if isHex else int(s)
    else:
        return int(hex(s), 16)

a = to_decimal(12)
b = to_decimal(0x10)
c = to_decimal('12')
d = to_decimal('0x10')
print(a, b, c, d) 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2014-12-04T15:27:06.717

在 Python3 中，我尝试过：

```
def is_hex(s):
    try:
        tmp=bytes.fromhex(hex_data).decode('utf-8')
        return ''.join([i for i in tmp if i.isprintable()])
    except ValueError:
        return '' 
```

应该比方式更好：int(x, 16)

# c++ - 在cli c ++中作为全局非const变量库类

> ID：11592265
> 
> 赞同：0
> 
> 时间：2012-07-21T12:39:59.813
> 
> 标签：c++, .net, visual-studio, class, c++-cli

应该如何定义只有全局变量的类？我做了这样的事情：

```
public ref class Klient
{
public:
    Klient(){}
    // zmienne
    static array<DWORD,2>^ klienty = gcnew array<DWORD,2>(40,2);
    static int i = 0;
    static DWORD pid;
    static HANDLE handle;
    static String^ nick;
    //funkcje
}; 
```

但如果我包含它超过 1 次，它将不会编译并显示类错误的重新定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:55:54.913

你有保护你的头球吗？在 Visual Studio 中，您应该将此指令放在所有头文件的顶部：

```
#pragma once 
```

这相当于经典的 C++ 标头保护：

```
#ifndef HEADER_SYMBOL_X
#define HEADER_SYMBOL_X

 // class declarations go here

#endif // HEADER_SYMBOL_X 
```

如果你不保护你的标题，C++/CLI 确实会尝试在每个包含上重新定义你的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:18:02.910

你必须更清楚一点，然后粘贴你得到的错误。此外，如果你有一个“ref”类，编译器会为你生成一个默认构造函数，所以你不需要编写一个。

这段代码对我有用，我能够将静态 int 值提取到我的 WPF 应用程序中：

```
#pragma once

#include "windows.h"

using namespace System;

namespace cppcli 
{
    public ref class Klient
    {
        public:
            static array<DWORD,2>^ klienty = gcnew array<DWORD,2>(40,2);
            static int i = 22;
            static DWORD pid;
            static HANDLE handle;
            static String^ nick;
    };
} 
```

**更新：**
注意到你的评论，是的，你需要`#pragma once`在那里。我认为它在那里，因为它是由 Visual Studio 自动生成的，很高兴知道它可以工作:-)

# c# - 来自数据库的 ASP 下拉列表数据绑定

> ID：11592266
> 
> 赞同：1
> 
> 时间：2012-07-21T12:40:06.063
> 
> 标签：c#, asp.net

我正在使用 2 下拉列表。国家第一，州第二。如果我从 1ft 下拉列表中选择 India，第二个会自动从数据库中自动绑定印度的所有州。

我已经使用`country_tbl`了国家并绑定了第一个下拉列表和`india_tbl`,用于绑定有关这些国家的状态`us_tbl`。`sri_tbl`

请帮我。我应该怎么办？

我的代码如下：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        method1();
    }
}

protected void method1()
{
    string s1 = "data source=ALOK-PC\\SQLEXPRESS;database=MySite;integrated security=true";
    SqlConnection con = new SqlConnection(s1);
    string s2 = "select * from country";
    SqlCommand cmd = new SqlCommand(s2, con);
    con.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    DropDownList1.DataTextField = "name";
    DropDownList1.DataValueField = "name";
    DropDownList1.DataSource = dr;
    DropDownList1.DataBind();
    con.Close();
    dr.Close();
}

protected void methodInd()
{
    string s1 = "data source=ALOK-PC\\SQLEXPRESS;database=MySite;integrated security=true";
    SqlConnection con = new SqlConnection(s1);
    string s2 = "select * from india";
    SqlCommand cmd = new SqlCommand(s2, con);
    con.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    DropDownList2.DataTextField = "name";
    DropDownList2.DataValueField = "name";
    DropDownList2.DataSource = dr;
    DropDownList2.DataBind();
    con.Close();
    dr.Close();
}

protected void methodpak()
{
    string s1 = "data source=ALOK-PC\\SQLEXPRESS;database=MySite;integrated security=true";
    SqlConnection con = new SqlConnection(s1);
    string s2 = "select * from pakistan";
    SqlCommand cmd = new SqlCommand(s2, con);
    con.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    DropDownList2.DataTextField = "name";
    DropDownList2.DataValueField = "name";
    DropDownList2.DataSource = dr;
    DropDownList2.DataBind();
    con.Close();
    dr.Close();
}

protected void methodsri()
{
    string s1 = "data source=ALOK-PC\\SQLEXPRESS;database=MySite;integrated security=true";
    SqlConnection con = new SqlConnection(s1);
    string s2 = "select * from srilanka";
    SqlCommand cmd = new SqlCommand(s2, con);
    con.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    DropDownList2.DataTextField = "name";
    DropDownList2.DataValueField = "name";
    DropDownList2.DataSource = dr;
    DropDownList2.DataBind();
    con.Close();
    dr.Close();
}

protected void submit_Click(object sender, EventArgs e)
{

}

protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (DropDownList1.SelectedItem.Text=="india")
    {
        methodInd();
    }
    else if (DropDownList1.SelectedItem.Text=="pakistan")
    {
        methodpak();
    }
    else if (DropDownList1.SelectedItem.Text=="srilanka")
    {
        methodsri();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:24:47.420

您的方法是错误的，您不应该为每个国家/地区的州提供单独的表格，因此您可以有一个查询和一种方法来绑定到您的州列表

将您的架构更改为

```
CREATE TABLE Country 
(
  id int,  
  country_name,
  primary key(id)
)

Country_State 
(
  id  int, 
  state_name, 
  country_id,
  primary key(id)
) 
```

country_id 是链接回该国家/地区的外键

```
country
------------------------
id  Name
------------------------
1   India
2   Pakistan

country_state
-----------------------------------
id  Name              country_id
------------------------------------
1   Delhi             1
2   Bangladesh        1
3   Some Indians      1
4   S1_Pakistan       2
5   S2_Pakistan       2 
```

您的查询

```
Select Id, Name from Country

Select Id, Name From country_states Where country_id = @id 
```

> 只调用一种方法来绑定所有状态

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
     string country_id =  DropDownList1.SelectedValue;
     BindStatesByCountry(country_id);
}

protected void methodsri(string countryId) //change this to BindStatesByCountry
{
    string s1 = "data source=ALOK-PC\\SQLEXPRESS;database=MySite;integrated security=true";
    SqlConnection con = new SqlConnection(s1);
    con.Open();

    string s2 = "select * from country_states where country_id=@countryId";
    SqlCommand cmd = new SqlCommand(s2, con);
    cmd.Parameters.AddWithValue("@countryId", countryId);
    SqlDataReader dr = cmd.ExecuteReader();
    DropDownList2.DataTextField = "name";
    DropDownList2.DataValueField = "name";
    DropDownList2.DataSource = dr;
    DropDownList2.DataBind();
    con.Close();
    dr.Close();
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:40:00.033

你想实现一个主细节模式，所以看到这个网址：http: [//msdn.microsoft.com/en-us/library/aa581789.aspx](http://msdn.microsoft.com/en-us/library/aa581789.aspx) 首选存储过程而不是 sql 注入 最好的关注

# php - 在带有 IIS、PHP 5.4.5.0 和 MySQL 的 windows 2008 R2 上运行 openx 时出现问题

> ID：11592267
> 
> 赞同：0
> 
> 时间：2012-07-21T12:40:11.203
> 
> 标签：php, iis, openx

我正在尝试使用 IIS、PHP 5.4.5.0 和 MySQL 在 Windows 2008 R2 上设置 openx。我有 IIS 设置和工作，php 设置和工作（phpinfo（）；工作），我有 MySQL 设置和工作。

但是，当我尝试点击 [http://www.myserver.com/www/delivery/avw.php?what=bannerid:1411](http://www.myserver.com/www/delivery/avw.php?what=bannerid:1411)

我得到以下返回：GIF89a€ÿÿÿ!ù,D;

我想说我过去曾见过这样的事情，那是因为我需要启用 PHP 扩展。我以为是 GD2，所以我在 php.ini 中启用了它：extension=php_gd2.dll。然而，这似乎没有帮助。

有没有人有任何想法或建议为什么我会看到这个？

谢谢布拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:43:10.097

在 PHP 5.4 上运行时，OpenX 中存在错误。在 OpenX 修复这些错误之前（它们在 2.8.10 中还没有），您需要应用[http://www.teslina.com/en/tutorials/openx/fehlermeldungen-problemlosungen/](http://www.teslina.com/en/tutorials/openx/fehlermeldungen-problemlosungen/)中提到的修复。

即问题是在呈现图像之前有头信息发送到浏览器，因此您会看到垃圾。

# php - PHP，闭包类

> ID：11592268
> 
> 赞同：7
> 
> 时间：2012-07-21T12:40:18.913
> 
> 标签：php, class, closures

我试图了解闭包类，在手册中有，所有在手册[链接](http://www.php.net/manual/en/class.closure.php)，

**Closure::__construct** - 不允许实例化的构造函数。如果我理解正确，则此类的唯一实例是用于匿名函数变量分配。

但我不明白几行：

**Closure::bind** — 复制具有特定绑定对象和类范围的闭包。

**Closure::bindTo** — 使用新的绑定对象和类范围复制闭包。

最后在手册中我不明白这句话：

> 除了这里列出的方法，这个类还有一个 __invoke 方法。这是为了与其他实现调用魔法的类保持一致，因为此方法不用于调用函数。

如果有人可以尝试向我解释这些台词，我将非常感激，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T12:50:26.547

它指的是[召唤魔法](http://www.php.net/manual/en/language.oop5.magic.php#language.oop5.magic.invoke)。

据我了解，对于任何包含方法的类，`__invoke`其实例都可以像函数一样被调用。那样的`Closure::__invoke`行为。

即当`$foo`是类`Closure`（匿名函数）时，调用`$foo($bar)`将调用`$foo->__invoke(bar)`（虽然该`__invoke`成员并不意味着直接调用，这只是为了说明它是如何工作的）。

当你定义匿名函数时，你这样做：

```
$greet = function($name)
{
    printf("Hello %s\r\n", $name);
}; 
```

现在，`$greet`是一流的`Closure`。并且`$greet->__invoke`有点等于`function($name){ printf("Hello %s\r\n", $name); }`

请记住，`Closure::__invoke`是一种[魔法方法](http://www.php.net/manual/en/language.oop5.magic.php#language.oop5.magic.invoke)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T12:56:54.807

`bind`我认为和之间的区别`bindTo`只是它们被称为的方式：

```
$cl->bindTo($obj) 
```

相当于

```
Closure::bind($cl, $obj) 
```

关于`__invoke`method，据说该方法存在，但实际上并没有使用。当您将闭包用作函数时，会使用一种内部（可能更有效）机制来绕过该方法。但是该方法是为了与其他可调用的类兼容，如果您愿意，可以手动调用它。

# java - 向小程序添加主类，方法无效

> ID：11592269
> 
> 赞同：0
> 
> 时间：2012-07-21T12:40:23.703
> 
> 标签：java, applet

这是一个类，我的项目中没有包含所有其他类。我需要初始化方法“public boolean action(Event e, Object arg)”，但我不知道如何初始化带有参数的方法。

```
* To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package finalpkg;

import java.awt.*;

import javax.swing.*;

public class SimplexTool extends JApplet {
    private static final long serialVersionUID = 1L;
    public static void main (String[] arg){
        SimplexTool applet = new SimplexTool();
        final JFrame home = new JFrame("Start");
        home.setContentPane(applet.getContentPane());
        home.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        home.pack();
        home.setSize(200, 350);
        home.setLocation(450,200);
        home.setVisible(true);
                applet.init();
        applet.start();
    }

    int numConstraints;
    int numVariables;

    revisedSimplex LP;
    problemDimensionWindow DimensionWindow;
    enterDataFrame dataFrame;

    numberCrunchingFrame activeCruncher, oldCruncher;
    About aboutWindow;
    float coefficients[] = new float[33];
    int SolveStatus;

    Button start = new Button("New Problem");
    Button end   = new Button("Quit");
    Button about = new Button("About");
    Button help  = new Button("Help");

    @Override
    public void init()
    {
        super.init();
        this.setBackground(Color.gray);
        this.setLayout(new GridLayout(0,1,0,0));

        start.setBackground(Color.lightGray);
        end.setBackground(Color.lightGray);
        about.setBackground(Color.lightGray);
        help.setBackground(Color.lightGray);

        this.add(start);
        this.add(about);
        this.add(help);
        this.add(end);

        aboutWindow = new About(this);
    } /* end init procedure */

    @SuppressWarnings("deprecation")
    @Override
    public boolean action(Event e, Object arg)
    {
        if (e.target instanceof Button) {

            if (e.target == start) {
                if (dataFrame != null)      dataFrame.dispose();
                if (activeCruncher != null) activeCruncher.dispose();
                if (LP != null) LP.reset(numVariables, numConstraints);

                DimensionWindow = new problemDimensionWindow(this,"Enter the Sizes");
                DimensionWindow.pack();
                DimensionWindow.show();
                start.disable();
                return true;   /* handled this event */
            }

            if (e.target == end) {
                if (DimensionWindow != null) DimensionWindow.dispose();
                if (dataFrame != null)       dataFrame.dispose();
                if (activeCruncher != null)  activeCruncher.dispose();

                if (aboutWindow != null) aboutWindow.dispose();
                if (!start.isEnabled())  start.enable();
                if (!about.isEnabled())  about.enable();
                return true;   /* handled this event */
            }

            if (e.target == about) {
                about.disable();
                if (!aboutWindow.isShowing()) aboutWindow.show();
                return true;   /* handled this event */
            }
        }   /* end if instanceof Button */

        return false;    /* return false if we do not handle event */
    } /* end action procedure */

    @SuppressWarnings("deprecation")
    public void update(problemDimensionWindow InputWindow)
    {
        try {
            numVariables =
                Integer.valueOf(InputWindow.numVariables.getText()).intValue();
            numConstraints =
                Integer.valueOf(InputWindow.numConstraints.getText()).intValue();

            if (numVariables >= 2 && numConstraints >= 2 &&
                numVariables <= 7 && numConstraints <= 7) {
                InputWindow.dispose();
                LP = new revisedSimplex(numVariables, numConstraints);
                dataFrame = new enterDataFrame(this, "Enter Your Profit maximisation Linear Program!",
                numVariables, numConstraints);
                dataFrame.Messages.setText("Press Preprocess to Begin.");
                dataFrame.Messages.getAlignmentX();
                dataFrame.pack();
                dataFrame.show();
                start.enable();
            }
            else {
                if (numVariables > 7 || numVariables < 2)
                    InputWindow.reminderVar.setBackground(Color.red);
                else
                    InputWindow.reminderVar.setBackground(Color.lightGray);

                if (numConstraints > 7 || numConstraints < 2)
                    InputWindow.reminderCon.setBackground(Color.red);
                else
                    InputWindow.reminderCon.setBackground(Color.lightGray);
            }
        }
        catch (NumberFormatException e) {}
    } /* end update procedure */

    @SuppressWarnings("deprecation")
    public void update(numberCrunchingFrame LPWindow, boolean OneStepOnly)
    {
        if (OneStepOnly) {
            SolveStatus = LP.iterateOneStep();
            activeCruncher.updatePanelsForOneStep();

            if (LP.CurrentStep == 0)
                LPWindow.iterate.enable();
        }
        else {  /* perform one complete iteration */
            activeCruncher.Messages.setText("click view results to proceed");
            SolveStatus = LP.iterate();
            activeCruncher.updateAllPanels();
        }

        /* Check return status and take action if necessary */

        switch (SolveStatus) {
            case 3:   /*LP.Unbounded: */
                activeCruncher.Messages.setText("The problem is unbounded.");
                LPWindow.iterate.disable();
                LPWindow.step.disable();
                start.enable();
            break;

            case 1: /*LP.Optimal:*/
                if (LP.ArtificialAdded == false) {
                    activeCruncher.Messages.setText
                        ("This is the maximum Profit!!!");
                    dataFrame.Messages.setText("");
                    LPWindow.updateAllPanels();
                    LPWindow.iterate.disable();
                    LPWindow.step.disable();
                    start.enable();
                } else {  /* artificial variables were added (in phase I) */
                    /* if it passes this if test, then the problem is feasible */

                    /*** ADD CODE HERE TO TEST WHEN ARTIFICIALS ARE STILL IN BASIS ***/

                    if (LP.calculateObjective() == 0) {

                        if (LP.NumArtificials > 0) {
                            System.out.print  ("Even though 0 objective, there are");
                            System.out.println(" still artificials in basis.");
                        }

                        System.out.println("Calling getRidOfArtificials");
                        LP.getRidOfArtificials();
                        System.out.println("Called  getRidOfArtificials");

                        activeCruncher.Messages.setText
                            ("Artificial Variables Eliminated\nGetting New Window");

                        oldCruncher    = activeCruncher;
                        activeCruncher = new numberCrunchingFrame(this, "Final Stage",LP);
                        oldCruncher.dispose();

                        activeCruncher.Messages.setText
                            ("Continuing With Original Problem, click view results to proceed");
                        dataFrame.Messages.setText("In Final Stage");
                    } else {
                        activeCruncher.Messages.setText("The Problem is infeasible.");
                        LPWindow.iterate.disable();
                        LPWindow.step.disable();
                        start.enable();
                    }
                }
            break;

        } /* end switch (SolveStatus) */
    }   /* end update procedure */

    public boolean ReadDataAndPreprocess(int numVariables, int numConstraints)
    {
        /* Specify the objective function */

        float rhs;

        LP.reset(numVariables, numConstraints);  /* reset LP class for reading */

        for (int i = 0; i < numVariables; i++) {
            if (dataFrame.objective[i].isNumber())
                coefficients[i] = dataFrame.objective[i].getFloat();
            else {
                /* error in reading data, notify user */
                dataFrame.Messages.setText("Error: Objective x"+(i+1));
                return false;
            }
        }

        if (dataFrame.minmax.getSelectedIndex() == 0)
            LP.specifyObjective(coefficients, true);  /* minimize */
        else
            LP.specifyObjective(coefficients, false); /* maximize */

        /* Let the SimplexTool Class know about the constraints */

        for (int i = 0; i < numConstraints; i++) {
            /*LP.showInfo();*/
            for(int j = 0; j < numVariables; j++) {
                if (dataFrame.constraint[i][j].isNumber())
                    coefficients[j] = dataFrame.constraint[i][j].getFloat();
                else {
                    dataFrame.Messages.setText
                        ("Error: Constraint "+(i+1)+" in x"+(j+1));
                    return false;
                }
            } /* end for j */

            if (dataFrame.rhs[i].isNumber())
                rhs  = dataFrame.rhs[i].getFloat();
            else {
                dataFrame.Messages.setText("Error: Constraint "+(i+1)+ "RHS");
                return false;
            }

            LP.addConstraint(coefficients, rhs,
            dataFrame.rowType[i].getSelectedIndex());
        } /* end for i loop */

        /* Now that we have the data, perform preprocessing */

        LP.preprocess(numVariables, numConstraints);

        dataFrame.setEditable(false);
        dataFrame.Messages.setText("Starting to compute the optimal profit");

        /*if (LP.artificialPresent) {*/
        if (LP.NumArtificials > 0) {
            activeCruncher = new numberCrunchingFrame(this, "P",LP);
            dataFrame.Messages.setText("Starting ");
        }
        else {
            activeCruncher = new numberCrunchingFrame(this, "Results",LP);
            dataFrame.Messages.setText("Starting to find the results");
        }

        return true;  /* successful completion */
    } /* End ReadDataAndPreprocess */

    public void constrain(Container container, Component component,
        int grid_x, int grid_y, int grid_width,
        int grid_height,
        int fill, int anchor, double weight_x, double weight_y,
        int top, int left, int bottom, int right)
    {
        GridBagConstraints c = new GridBagConstraints();
        c.gridx = grid_x; c.gridy = grid_y;
        c.gridwidth = grid_width; c.gridheight = grid_height;
        c.fill = fill; c.anchor = anchor;
        c.weightx = weight_x; c.weighty = weight_y;
        if (top+bottom+left+right > 0)
        c.insets = new Insets(top, left, bottom, right);

        ((GridBagLayout)container.getLayout()).setConstraints(component, c);
        container.add(component);
    } /* end constrain procedure */

    public void constrain(Container container, Component component,
            int grid_x, int grid_y, int grid_width,
            int grid_height) {
        constrain(container, component, grid_x, grid_y,
              grid_width, grid_height, GridBagConstraints.NONE,
              GridBagConstraints.NORTHWEST, 0.0, 0.0, 0, 0, 0, 0);
    } /* end constrain procedure */

    public void constrain(Container container, Component component,
                  int grid_x, int grid_y, int grid_width, int grid_height,
                  int top, int left, int bottom, int right)
    {
        constrain(container, component, grid_x, grid_y,
           grid_width, grid_height, GridBagConstraints.NONE,
           GridBagConstraints.NORTHWEST,
           0.0, 0.0, top, left, bottom, right);
    } /* end constrain procedure */
}  /* end SimplexTool class */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:43:27.417

`Applets` **没有 main() 方法。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:45:45.640

您可能*误解*了`Applet`类架构/框架。

阅读教程 -[课程：Java 小程序](http://docs.oracle.com/javase/tutorial/deployment/applet/)。

> Java 小程序是一种特殊的 Java 程序，支持 Java 技术的浏览器可以从 Internet 下载并运行它。小程序通常嵌入在网页中并在浏览器的上下文中运行。小程序必须是 java.applet.Applet 类的子类。Applet 类提供了applet 和浏览器环境之间的标准接口。

运行/启动小程序：

1.  创建 .html 文档
2.  添加`<applet code="finalpkg.SimplexTool" width="200" height="200"></applet>`标签
3.  `html`在网络浏览器中打开此文档。

PS：实际上你可以`GUI Application`通过扩展将你的程序转换为`JFrame`.

# python - 如何使用 python 将 mp3 文件拆分为多个部分

> ID：11592274
> 
> 赞同：0
> 
> 时间：2012-07-21T12:41:01.483
> 
> 标签：python, audio, mp3

现在，我必须将一个 mp3 文件分成几个部分。我使用 python 来完成这项工作。但是我找不到一个好的图书馆来完成这项工作。我已经尝试过 pymp3cut、echo-nest-remix，但效果不佳。

那么有没有更好的选择呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:50:41.300

您可以将您的 mp3 转换为原始 .wav 并使用[audiolab](http://cournape.github.com/audiolab/overview.html#sndfile-class)将其读入，然后每 N 帧写出文件，然后将其转换为 mp3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:04:37.237

我一直在使用 VLC 的 python 绑定[http://wiki.videolan.org/Python_bindings](http://wiki.videolan.org/Python_bindings)来转换视频并分割成帧。VLC 支持 MP3，但我必须承认我没有将它用于音频。

# bash - mpi 在 bash shell 错误中重新提交脚本

> ID：11592280
> 
> 赞同：0
> 
> 时间：2012-07-21T12:41:51.767
> 
> 标签：bash

这是我用于重新提交 mpi 作业的作业脚本。我有这个脚本最初是为 tcsh shell 编写的。我试图为 bash shell 重写它，但我得到了错误。请帮助我更正脚本。

```
##============================================================================

#!/bin/bash                                                                                                                                                                                            
#PBS -l mem=10GB                                                                                                                                
#PBS -l walltime=12:00:00                                                                                                                       
#PBS -l nodes=2:ppn=6                                                                                                                                                                                                                                             
#PBS -v NJOBS,NJOB

if [ X$NJOBS == X ]; then
    $ECHO "NJOBS (total number of jobs in sequence) is not set - defaulting to 1"
    export NJOBS=1
fi

if [ X$NJOB == X ]; then
    $ECHO "NJOB (current job number in sequence) is not set - defaulting to 1"
    export NJOB=1
fi

#                                                                                                                                               
# Quick termination of job sequence - look for a specific file                                                                                  
#                                                                                                                                               
if [ -f STOP_SEQUENCE ] ; then
    $ECHO  "Terminating sequence at job number $NJOB"
    exit 0
fi

#                                                                                                                                               
# Pre-job file manipulation goes here ...                                                                                                       
# =============================================================================                                                                                                                                              
# INSERT CODE             
# =============================================================================

module load openmpi/1.4.3

startnum= 0
x=1
i= $(($NJOB + $startnum - $x))
j= $(($i + $x))

$ECHO "This is job $i"
#$ECHO floobuks.$i.blah                                                                                                                         
#$ECHO flogwhilp.$j.txt                                                                                                                         

#===========================================================================
# actual execution code                                                                                                                    
#===========================================================================                 

# this is just a sample 
echo "job $i is followed by $j"

#=========================================================================== 
RUN COMPLETE
#===========================================================================

#
# Check the exit status
#
errstat=$?
if [ $errstat -ne 0 ]; then
    # A brief nap so PBS kills us in normal termination
    # If execution line above exceeded some limit we want PBS
    # to kill us hard
    sleep 5
    $ECHO "Job number $NJOB returned an error status $errstat - stopping job sequence."
    exit $errstat
fi

#
# Are we in an incomplete job sequence - more jobs to run ?
#
if [ $NJOB -lt $NJOBS ]; then

#
# Now increment counter and submit the next job
#
    NJOB=$(($NJOB+1))
    $ECHO "Submitting job number $NJOB in sequence of $NJOBS jobs"
    qsub recur2.bash
else
    $ECHO "Finished last job in sequence of $NJOBS jobs"
fi

#============================================================================== 
```

运行时出现以下错误

```
qsub -v NJOBS=4  recur2.bash

ModuleCmd_Load.c(200):ERROR:105: Unable to locate a modulefile for 'openmpi/1.4.3'
/var/spool/PBS/mom_priv/jobs/1833549.epic.SC: line 115: 0: command not found
/var/spool/PBS/mom_priv/jobs/1833549.epic.SC: line 117: 0: command not found
/var/spool/PBS/mom_priv/jobs/1833549.epic.SC: line 118: 1: command not found
/home/nsubramanian/bin/gromacs_3.3.3/bin/grompp_mpi: error while loading shared libraries: libmpi.so.0: cannot open shared object file: No such\
 file or directory
/var/spool/PBS/mom_priv/jobs/1833549.epic.SC: line 128: mpirun: command not found 
```

我能够找出openmpi的错误，但我不能。我不知道如何使它工作。

注意：请忽略行号，它与原始文件不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T20:38:44.377

你的系统上没有 openmpi/1.4.3 这样的模块；在这些行中

```
startnum= 0
i= $(($NJOB + $startnum - $x))
j= $(($i + $x)) 
```

等号后不应该有空格。

要找出这一点，您所要做的就是尝试在 bash shell 中逐行运行脚本。

# php - knpMenuBundle 问题

> ID：11592283
> 
> 赞同：2
> 
> 时间：2012-07-21T12:42:06.083
> 
> 标签：php, symfony

我刚试过 knpLabs MenuBundle

我没有收到当前项目的标志，我关注来自[https://github.com/KnpLabs/KnpMenuBundle/blob/master/Resources/doc/index.md的教程](https://github.com/KnpLabs/KnpMenuBundle/blob/master/Resources/doc/index.md)

```
Here is my code

use Knp\Menu\FactoryInterface;
use Symfony\Component\DependencyInjection\ContainerAware;

class Builder extends ContainerAware
{
  public function mainMenu(FactoryInterface $factory, array $options)
  {
    $menu = $factory->createItem('root');

    $menu->addChild('Innehåll', array('route' => 'Content'));

    $menu->addChild('Skärmlayouter', array('route' => 'Layout'));

    $menu->addChild('Media', array('route' => 'Media'));

    $menu->addChild('Områden & fastigheter', array('route' => 'Container'));

    $menu->addChild('Användare & behörigheter', array('route' => 'UserManagement'));

    return $menu;
  }
} 
```

这是它产生的结果：

```
<ul>
<li class="first">
<a href="/biztv_symfony/web/app_dev.php/Content/">Innehåll</a>        
</li>

<li>
<a href="/biztv_symfony/web/app_dev.php/Layout/">Skärmlayouter</a>        
</li>

<li>
<a href="/biztv_symfony/web/app_dev.php/Media/">Media</a>        
</li>

<li>
<a href="/biztv_symfony/web/app_dev.php/Container/">Områden &amp; fastigheter</a>        
</li>

<li class="last">
<a href="/biztv_symfony/web/app_dev.php/UserManagement/">Användare &amp; behörigheter</a>        
</li>

</ul> 
```

它声称会自动包含活动链接标志（按“当前”类），这就是我想尝试这个捆绑包的原因，所以我不必干预那部分的编码。

是我遗漏了一个关键点，还是我正在关注的这个文档遗漏了一个关键部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T15:13:28.150

你应该使用`setCurrentUri`方法。如：

```
$menu = $factory->createItem('root');
$menu->setCurrentUri($this->container->get('request')->getRequestUri()); 
```

# c# - 类别层次结构

> ID：11592285
> 
> 赞同：4
> 
> 时间：2012-07-21T12:42:36.393
> 
> 标签：c#, mysql, sql

我有一个只有两个字段的类别表 - 即`id`和`categoryname`- 以及一个`category_parent`带有字段`categoryid`和的表`parentid`。两者都是`categoryid`.

所以我可以有多个父母或多个孩子的类别。

我的问题是：我怎样才能找到特定类别的所有父母或所有孩子？

“所有父母”是指直系父母以及直系父母的父母等。我需要数组或列表中父母的 ID。

对于这个问题，我更喜欢 C# 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:04:26.697

没有必要 category_parent。你可以在一张桌子上做关于类别和父母的一切。

SELECT CatgoryId,Cat​​egoryName FROM Category WHERE ParentId 为 null >>> 这是主要类别

SELECT CategoryId, CategoryName FROM Category WHERE ParentId=2 >>> 用于特定类别

```
 CREATE TABLE [dbo].[Category](
[CategoryId] [int] IDENTITY(1,1) NOT NULL,
[CategoryName] [nvarchar](50) NOT NULL,
[ParentId] [int]  FOREIGN KEY REFERENCES [dbo].[Category] ([CategoryId])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T00:59:02.687

一种方法是使用[递归公用表表达式](http://publibz.boulder.ibm.com/cgi-bin/bookmgr_OS390/BOOKS/DSNAPJ10/APPENDIX1.5?DT=20040210163115#TBLWQ1040) 但我假设 MySQL 不支持这个（如果我错了请纠正我）所以你可能想要使用游标或存储过程。另请阅读这篇关于[在 MySQL 中管理分层数据的文章](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

# ruby-on-rails - 不同分支中的不同 gem 版本

> ID：11592286
> 
> 赞同：2
> 
> 时间：2012-07-21T12:42:50.437
> 
> 标签：ruby-on-rails, git, bundler, gemfile

我对 Git 和 Gemfiles 还是有点陌生​​。

我想升级我的 gem，但不是所有的都向后兼容。因此，我想在修复代码以与新的 gem 版本兼容的同时创建一个单独的分支。

如果我使用 git checkout -b mynewbranch 然后更改 Gemfile 并开始运行包更新，那会将我的 gem 更改限制在那个分支上吗？

这里最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:00:01.267

使用该`bundle install`命令安装的 gems 版本以及将使用的 gem 版本由文件 Gemfile 和 Gemfile.lock 确定。

移动到另一个分支并使用更新`bundle update`不会干扰旧分支中的那些旧文件。它将更新新分支上的这些文件并将新的 gems 版本安装到您​​的机器上。您可以随心所欲地更新，回到旧分支，所有以前的 gems 版本都将按预期使用。

`bundle exec`请注意，如果您在机器上有多个版本的相同 gem ，您可能需要运行命令。

# javascript - 此对象构造函数阻止我的脚本运行

> ID：11592287
> 
> 赞同：0
> 
> 时间：2012-07-21T12:43:22.000
> 
> 标签：javascript, html, xml, dom

我正在做一个项目（创建一个基于浏览器的检查列表）。我的目标之一是在没有像 jquery 或 mysql 数据库这样的库的情况下手工编写每一件作品。

目前我正在尝试创建用于管理任务的对象。我还没有完成主要功能，但一切都已关闭，我没有检测到任何错误。此外，我还没有迭代它或调用它的函数，所以还没有什么可以引用它。当我将其注释掉时，脚本会正常运行。

我已经在上面包含了 xml 请求链接，并在脚本的单独部分中成功地测试了它们。
我正在Firefox中进行测试。
我正在用 SciTE 写这个

这是代码：

```
function Task(name,node,childNode,divClass,content,onclick)
{
    function retrieveTask(node,childNode)
    {
        var taskArray = [];
        taskArray.push(xmlDoc.getElementsByTagName(name)[node].childNodes[childNode].nodeValue;)
        taskArray.push(xmlDoc.getElementsByTagName(description)[node].childNodes[childNode].nodeValue;)
        taskArray.push(xmlDoc.getElementsByTagName(complete)[node].childNodes[childNode].nodeValue;)
        return taskArray;
    }

    function displayTask(name,content)
    {
        var task = retrieveTask(node,childNode);
        var clickDiv = "";
        formatDiv(name,"task",task[1],clickDiv);
        task[2] === true ? formatDiv(name+1,"incompleteBox"," ",clickDiv) : formatDiv(name+1,"completeBox","O",clickDiv);
    }
} 
```

如果有人能给我一些见解或提示，那就太棒了。这不是家庭作业，而是一种爱好，所以这是一个自学的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:49:09.510

```
...childNodes[childNode].nodeValue;) 
```

应该`);`

# c++ - 如何调试 STL/C++ 的 GCC/LD 链接过程

> ID：11592289
> 
> 赞同：11
> 
> 时间：2012-07-21T12:43:26.887
> 
> 标签：c++, gcc, stl, linker, embedded

我正在用 C++ 开发裸机 cortex-M3 以获得乐趣和利润。我使用 STL 库，因为我需要一些容器。我认为通过简单地提供我的分配器，它不会向最终的二进制文件添加太多代码，因为你只得到你使用的东西。

实际上，我什至根本没想到会使用 STL（给我的分配器）进行任何链接过程，因为我认为这都是模板代码。

顺便说一句，我正在编译`-fno-exception`。

不幸的是，我的二进制文件中添加了大约 600KB 或更多。我用 nm 查看了最终二进制文件中包含哪些符号，这对我来说似乎是个笑话。清单太长了，我不会尝试过去。虽然有一些弱符号。

我还查看了链接器生成的 .map 文件，我什至发现了 scanf 符号

```
.text
0x000158bc       0x30   /CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_GNU_Linux/bin/../arm-none-linux-gnueabi/libc/usr/lib/libc.a(sscanf.o)
0x000158bc                __sscanf
0x000158bc                sscanf
0x000158bc                _IO_sscanf 
```

和：

```
$ arm-none-linux-gnueabi-nm binary | grep scanf
000158bc T _IO_sscanf
0003e5f4 T _IO_vfscanf
0003e5f4 T _IO_vfscanf_internal
000164a8 T _IO_vsscanf
00046814 T ___vfscanf
000158bc T __sscanf
00046814 T __vfscanf
000164a8 W __vsscanf
000158bc T sscanf
00046814 W vfscanf
000164a8 W vsscanf 
```

我该如何调试呢？首先，我想了解 GCC 用于链接的确切内容（我正在通过 GCC 链接）。我知道如果在文本段中找到符号，则会使用整个段，但这仍然太多了。

任何有关如何解决此问题的建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T18:06:17.017

使用 GCC`-v`和`-Wl,-v`选项将显示正在使用的链接器命令（和链接器的版本信息）。

您使用的是哪个版本的 GCC？我对 GCC 4.6 进行了一些更改（请参阅[PR 44647](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=44647)和[PR 43863](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=43863)）以减少代码大小以帮助嵌入式系统。仍然有一个未完成的增强请求 ( [PR 43852](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=43852) ) 允许禁用包含您看到的 IO 符号 - 其中一些来自详细终止处理程序，当进程因活动异常终止时打印一条消息。如果您不使用 execptions，那么其中一些代码对您来说毫无用处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:11:09.933

问题不在于 STL，而在于标准库。

STL 本身是*纯粹*的（在某种程度上），但标准库还包括所有这些流包，而且您似乎也设法加入了`libc`......

问题是标准库从来没有被分开，所以可能没有太多关注重用 C 标准库中的东西......

您应该首先尝试确定在编译时提取了哪些文件（`strace` [例如](http://linux.die.net/man/1/strace)使用），这样您可以验证您是否只使用过*仅头*文件。

然后，您可以尝试删除发生的链接。有一些选项可以传递给 gcc 以精确地表明您想要一个标准的无库构建，`--nostdlib`例如，但是我对这些内容不够精通，无法在这里准确地指导您。

# ruby-on-rails - 如何使控制器动作可调整为多个哈希参数

> ID：11592290
> 
> 赞同：0
> 
> 时间：2012-07-21T12:43:31.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, hash, controller

如果我在视图中检查多条记录，然后点击删除按钮，将调用丢弃操作。

现在我一次只能删除（untrash）1条记录。为什么我检查多条记录也不能一次全部删除？？？

看法

```
 <%= form_tag(:action => discard, :via => 'put') do %>   
   <% @messages.each do |m| %>
      <tr>
       <td><%= check_box_tag "id",m.id %></td>
       <td><%= m.last_message.id %></td>
       <td><%= 'unread' if m.is_unread?(current_user) %></td>
       <td><%= m.last_message.created_at.to_s(:jp) %></td>
       <td><%= m.last_sender.username %></td>
       <td><%= link_to m.subject, show_messages_path(m) %></td>
      </tr>
   <% end %>
   <%= submit_tag "delete", :class => 'btn' %>
  <% end %> 
```

控制器

```
 def discard

      conversation = Conversation.find_all_by_id(params[:id])
    if conversation
      current_user.trash(conversation)
      flash[:notice] = "Message sent to trash."
    else
      conversations = Conversation.find(params[:conversations])
      conversations.each { |c| current_user.trash(c) }
      flash[:notice] = "Messages sent to trash."
    end
       redirect_to :back 
  end 
```

路线

```
match 'messages/discard(/:id)' => 'messages#discard' , :as => :discard_messages 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:32:03.783

当有多个同名输入时，最后一个“获胜” -`params[:id]`将是最后提交的输入的值，因此只删除一条消息（通过检查 params 哈希的值很容易看到）

如果输入名称以`[]`（即在您的情况下将名称设置为），`id[]`则 rails 会将所有值收集到一个数组中。

# javascript - 在js中对关联数组进行排序

> ID：11592293
> 
> 赞同：0
> 
> 时间：2012-07-21T12:43:56.230
> 
> 标签：javascript, jquery, arrays

我有一个大问题。我想对这样的数组进行排序：

```
 '0' ...
        '0' ...
            'id' => "XXXXX"
            'from' ...
                'name' => "XXXX"
                'id' => "XXXXXXXX"
            'story' => "XXXXXXXXXX"
        '1' ...
            'id' => "XXXXX"
            'from' ...
                'name' => "XXXX"
                'id' => "XXXXXXXX"
            'story' => "XXXXXXXXXX"
        '2' ...
            'id' => "XXXXX"
            'from' ...
                'name' => "XXXX"
                'id' => "XXXXXXXX"
            'story' => "XXXXXXXXXX" 
```

我想按键 FROM-NAME 对数组进行排序。你能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T12:47:40.073

试试这个：

```
yourarray.sort(function(a,b){
    return a.from.name<b.from.name ? -1 : 1;
}); 
```

# android - 为文本字段创建动画

> ID：11592303
> 
> 赞同：0
> 
> 时间：2012-07-21T12:45:34.600
> 
> 标签：android, android-animation

我需要在 Android 中创建动画。我有 3 `TextView`s 放在一个`LinearLayout`. 我想做的只是文本字段必须出现在屏幕上，就好像它已从屏幕的左端拉出一样。类似于选框的东西，但是文本字段必须从屏幕的左端一次一个字符来占据屏幕的左端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:19:34.010

你必须 textView 在你的 xml 布局中设置 textview 属性，`android:ellipsize="marquee"`并且你`oncreate()`设置 textview 的方法就像`youtextview.setSelected(true);`现在你的 textview 以选框效果运行对我来说完美！

您可以在编码中添加动态文本视图的另一种方法，您可以遵循以下代码：

```
yourtextview.setEllipsize(TruncateAt.MARQUEE);
yourtextview.setSelected(true); 
```

# css - 垂直对齐：与 Bootstrap 2 居中

> ID：11592306
> 
> 赞同：31
> 
> 时间：2012-07-21T12:46:01.427
> 
> 标签：css, html, twitter-bootstrap-2

我使用 twitter 引导程序，我想将一个`div`块与图片和右侧的文本垂直对齐。

这是代码：

```
<ol class="row" id="possibilities">
     <li class="span6">
         <div class="row">
             <div class="span3">
                 <p>some text here</p>
                 <p>Text Here too</p>
             </div>
             <figure class="span3"><img src="img/screenshots/options.png" alt="Some text" /></figure>
         </div>
     </li>
     <li class="span6">
         <div class="row">
             <figure class="span3"><img src="img/qrcode.png" alt="Some text" /></figure>
             <div class="span3">
                 <p>Some text</p>
                 <p>Some text here too.</p>
             </div>
         </div>
     </li>
</ol> 
```

我试过了，但没有用：

```
.span6 .row{display: table;}
.span6 .row .span3, .span6 .row figure{display:table-cell; vertical-align: middle;} 
```

我也试过这个：

```
.span6 .row .span3{display: inline-block; vertical-align: middle;} 
```

没有工作。有人有想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-16T00:13:08.670

尝试这个：

```
.row > .span3 {
    display: inline-block !important;
    vertical-align: middle !important;
} 
```

## 编辑：

小提琴：http: [//jsfiddle.net/EexYE/](http://jsfiddle.net/EexYE/)

`float: none !important;`如果 span3 是浮动的并且它会干扰，您可能还需要添加 Diego 。

## 编辑：

小提琴：http: [//jsfiddle.net/D8McR/](http://jsfiddle.net/D8McR/)

作为对 Alberto 的回应：如果您修复了行 div 的高度，那么要继续垂直居中对齐，您需要将行的行高设置为与行的像素高度相同（即两者在您的情况下为 300 像素）。如果你这样做，你会注意到子元素继承了行高，这在这种情况下是一个问题，所以你需要将 span3s 的行高设置为实际应该是的（1.5 是小提琴中的示例值，或 1.5 x 字体大小，当我们改变行高时我们没有改变）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-11T16:31:47.660

尝试`float`从 span6 中删除属性：

```
{ float:none !important; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T21:11:03.083

我用这个

```
<style>
html, body{height:100%;margin:0;padding:0 0} 
.container-fluid{height:100%;display:table;width:100%;padding-right:0;padding-left: 0}   
.row-fluid{height:100%;display:table-cell;vertical-align:middle;width:100%}
.centering{float:none;margin:0 auto} 
</style>
<body>
<div class="container-fluid">
     <div class="row-fluid">
     <div class="offset3 span6 centering">
            content here
         </div>
    </div>
 </div>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-10T23:10:43.117

如果我从我自己对引导程序的使用中没记错的话，这些`.spanN`类是浮动的，这会自动使它们表现为`display: block`. 要进行`display: table-cell`工作，您需要移除浮子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T21:07:34.850

除了之前的答案之外，您还可以始终使用 Pull 属性：

* * *

```
 <ol class="row" id="possibilities">
       <li class="span6">
         <div class="row">
           <div class="span3">
             <p>some text here</p>
             <p>Text Here too</p>
           </div>
         <figure class="span3 pull-right"><img src="img/screenshots/options.png" alt="Some text" /></figure>
        </div>
 </li>
 <li class="span6">
     <div class="row">
         <figure class="span3"><img src="img/qrcode.png" alt="Some text" /></figure>
         <div class="span3">
             <p>Some text</p>
             <p>Some text here too.</p>
         </div>
     </div>
 </li> 
```

# javascript - jshashtable.each 使用现有函数

> ID：11592307
> 
> 赞同：0
> 
> 时间：2012-07-21T12:46:11.877
> 
> 标签：javascript, hashtable, each

所以我有一个`Hashtable`定义（使用 jshashtable.js）：

```
hashy = new Hashtable(); 
```

我在里面放了一些钥匙：

```
hashy.put("hi", "yay");
hashy.put("hello", "yes"); 
```

现在我想用 .each 对其进行迭代，正如文档所说：

```
hashy.each(iterator()); 
```

但它说'**对象不是函数**'

现在，如果我这样做：

```
hashy.each(function() { }); 
```

它有效，但是有没有办法以这种方式调用现有函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T12:59:54.823

我刚刚意识到最明显的答案是：

hashy.each(function() { iterator(); });

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T15:44:24.103

假设您的`iterator`功能类似于以下内容：

```
function iterator(key, value) {
    // Do something with key and/or value
} 
```

...然后只需在没有括号的情况下传递函数。使用括号，您将立即（仅一次）执行该函数并将返回值传递给`each()`，这可能不是您想要的。

```
hashy.each(iterator); 
```

# iphone - iPhone Facebook SDK 错误

> ID：11592311
> 
> 赞同：0
> 
> 时间：2012-07-21T12:47:11.453
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我试图弄清楚这个错误意味着什么......

我正在尝试通过 Facebook sdk 获取用户信息。我只需要他们的电子邮件和姓名

```
Error Domain=facebookErrDomain Code=10000 "The operation couldn‚Äôt be completed. (facebookErrDomain error 10000.)" UserInfo=0xde94ad0 {error=<CFBasicHash 0xde7d100 [0x3f616650]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0xde722a0 [0x3f616650]>{contents = "type"} = <CFString 0xdeba1a0 [0x3f616650]>{contents = "OAuthException"}
    3 : <CFString 0xde6ba20 [0x3f616650]>{contents = "message"} = <CFString 0xdeb12a0 [0x3f616650]>{contents = "An active access token must be used to query information about the current user."}
    6 : <CFString 0xde74c40 [0x3f616650]>{contents = "code"} = 2500
}
} 
```

我的基本代码...（在我的 viewDidLoad 下方）

```
facebook = [[Facebook alloc] initWithAppId:@"random#123456" andDelegate:self];

    [self login]; 
```

（在我的登录方法下面）

```
- (void) login {
    NSArray *permissionsArray = [NSArray arrayWithObjects:@"email", nil];
    [facebook authorize:permissionsArray];
} 
```

（和我的 Facebook 请求方法......）

```
- (void)request:(FBRequest *)request didLoad:(id)result {
    NSLog(@"Inside didLoad");
    if ([result isKindOfClass:[NSArray class]]) {
        result = [result objectAtIndex:0];
    }
    // When we ask for user infor this will happen.
    if ([result isKindOfClass:[NSDictionary class]]){
        //NSDictionary *hash = result;
        NSLog(@"Name: %@", [result objectForKey:@"name"]); 
    }
    if ([result isKindOfClass:[NSData class]])
    {
        NSLog(@"Profile Picture");
        //[profilePicture release];
        //profilePicture = [[UIImage alloc] initWithData: result];
    }
    NSLog(@"request returns %@",result);
    //if ([result objectForKey:@"owner"]) {}

};

- (void)request:(FBRequest *)request didFailWithError:(NSError *)error{ 
    NSLog(@"%@",error);
} 
```

我真的很困惑为什么我会收到错误以及我需要更改或添加什么才能修复它......

有任何想法吗？

编辑：我的请求代码:::

```
- (IBAction)requestFBFriends:(id)sender {
    NSLog(@"HERE");
    [facebook requestWithGraphPath:@"me/friends" andDelegate:self];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:20:16.967

如果您在模拟器/设备上运行应用程序尝试清理构建并全新安装应用程序。当前错误可能是由于不再有效**/已撤销的访问令牌无法访问用户数据。**希望能帮助到你！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T22:05:10.260

以下是获取姓名和电子邮件的方法...我没有对其进行测试，所以如果它不起作用，请告诉我，我会找出问题所在。

如果您没有有效的访问令牌，则发送请求的方法需要进行身份验证

```
-(void)getUserFBInfo
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
        self.facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        self.facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
    }
    if (![self.facebook isSessionValid]) {
        NSLog(@"auth");
        [self.facebook authorize:[NSArray arrayWithObject:@"email"]];
    } else {
        [self apiFQLIMe];
    }
}

#pragma mark -
#pragma mark FBSessionDelegate

/**
 * Called when the user successfully logged in.
 */
- (void)fbDidLogin
{
    [self reportAction:@"FB allowed"];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[self.facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[self.facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
    [self apiFQLIMe];
}

/**
 * Called when the user dismissed the dialog without logging in.
 */
- (void)fbDidNotLogin:(BOOL)cancelled
{
    NSLog("did not login");
}

/**
 * Called after the access token was extended. If your application has any
 * references to the previous access token (for example, if your application
 * stores the previous access token in persistent storage), your application
 * should overwrite the old access token with the new one in this method.
 * See extendAccessToken for more details.
 */
- (void)fbDidExtendToken:(NSString*)accessToken
               expiresAt:(NSDate*)expiresAt
{
    NSLog(@"token extended");
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:accessToken forKey:@"FBAccessTokenKey"];
    [defaults setObject:expiresAt forKey:@"FBExpirationDateKey"];
    [defaults synchronize];
}

/**
 * Called when the user logged out.
 */
- (void)fbDidLogout
{
    NSLog("did logout")
}

/**
 * Called when the current session has expired. This might happen when:
 *  - the access token expired
 *  - the app has been disabled
 *  - the user revoked the app's permissions
 *  - the user changed his or her password
 */
- (void)fbSessionInvalidated
{
    [self.facebook authorize:[NSArray arrayWithObject:@"email"]];
}

#pragma mark -
#pragma mark FBRequestDelegate

- (void)apiFQLIMe {
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"SELECT name, first_name, middle_name, last_name, username, contact_email FROM user WHERE uid=me()", @"query",
                               nil];
    [self.facebook requestWithMethodName:@"fql.query"
                               andParams:params
                           andHttpMethod:@"POST"
                             andDelegate:self];
}

/**
 * Called when the Facebook API request has returned a response.
 *
 * This callback gives you access to the raw response. It's called before
 * (void)request:(FBRequest *)request didLoad:(id)result,
 * which is passed the parsed response object.
 */
- (void)request:(FBRequest *)request didReceiveResponse:(NSURLResponse *)response
{
    DLog(@"received response");
}

/**
 * Called when a request returns and its response has been parsed into
 * an object.
 *
 * The resulting object may be a dictionary, an array or a string, depending
 * on the format of the API response. If you need access to the raw response,
 * use:
 *
 * (void)request:(FBRequest *)request
 *      didReceiveResponse:(NSURLResponse *)response
 */
- (void)request:(FBRequest *)request didLoad:(id)result 
{
    NSLog(@"%@",result);
    // check the log to know how you receive the result
}

/**
 * Called when an error prevents the Facebook API request from completing
 * successfully.
 */
- (void)request:(FBRequest *)request didFailWithError:(NSError *)error 
{
    NSLog(@"Err message: %@", [[error userInfo] objectForKey:@"error_msg"]);
    NSLog(@"Err code: %d", [error code]);
} 
```

如果您有问题，请在评论中提问

# iphone - 如何将 UIImage 保存到文件中？

> ID：11592313
> 
> 赞同：113
> 
> 时间：2012-07-21T12:47:36.073
> 
> 标签：iphone, objective-c, ios, uiimage

如果我有一个`UIImage`来自 imagePicker 的文件，如何将其保存到文档目录中的子文件夹中？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-07-21T12:52:47.683

当然，您可以在应用程序的文档文件夹中创建子文件夹。你习惯[`NSFileManager`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)这样做。

您用于`UIImagePNGRepresentation`将图像转换为 NSData 并将其保存到磁盘。

```
// Create path.
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *filePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"Image.png"];

// Save image.
[UIImagePNGRepresentation(image) writeToFile:filePath atomically:YES]; 
```

顺便说一句，Core Data 与将图像保存到磁盘无关。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-12-29T01:30:10.450

在斯威夫特 3 中：

```
// Create path.
let paths = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true)
let filePath = "\(paths[0])/MyImageName.png"

// Save image.
UIImagePNGRepresentation(image)?.writeToFile(filePath, atomically: true) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-07-21T12:50:31.693

您必须将[图像的表示构造为特定格式](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)（例如 JPEG 或 PNG），然后调用`writeToFile:atomically:`该表示：

```
UIImage *image = ...;
NSString  *path = ...;
[UIImageJPEGRepresentation(image, 1.0) writeToFile:path atomically:YES]; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-10-02T23:48:39.493

以上内容很有用，但它们没有回答您关于如何保存在子目录中或从 UIImagePicker 获取图像的问题。

首先，您必须在 .m 或 .h 代码文件中指定您的控制器实现图像选择器的委托，例如：

```
@interface CameraViewController () <UIImagePickerControllerDelegate>

@end 
```

然后实现委托的 imagePickerController:didFinishPickingMediaWithInfo: 方法，在这里你可以从图像选择器中获取照片并保存它（当然，你可能有另一个类/对象来处理保存，但我将只显示代码在方法内部）：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // get the captured image
    UIImage *image = (UIImage *)info[UIImagePickerControllerOriginalImage];

    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
    NSString *imageSubdirectory = [documentsDirectory stringByAppendingPathComponent:@"MySubfolderName"];

    NSString *filePath = [imageSubdirectory stringByAppendingPathComponent:@"MyImageName.png"];

    // Convert UIImage object into NSData (a wrapper for a stream of bytes) formatted according to PNG spec
    NSData *imageData = UIImagePNGRepresentation(image); 
    [imageData writeToFile:filePath atomically:YES];
} 
```

如果要保存为 JPEG 图像，最后 3 行将是：

```
NSString *filePath = [imageSubdirectory stringByAppendingPathComponent:@"MyImageName.jpg"];

// Convert UIImage object into NSData (a wrapper for a stream of bytes) formatted according to JPG spec
NSData *imageData = UIImageJPEGRepresentation(image, 0.85f); // quality level 85%
[imageData writeToFile:filePath atomically:YES]; 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-06-08T12:35:16.757

```
extension UIImage {
    /// Save PNG in the Documents directory
    func save(_ name: String) {
        let path: String = NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true).first!
        let url = URL(fileURLWithPath: path).appendingPathComponent(name)
        try! UIImagePNGRepresentation(self)?.write(to: url)
        print("saved image at \(url)")
    }
}

// Usage: Saves file in the Documents directory
image.save("climate_model_2017.png") 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-07-21T12:54:55.053

```
NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:path atomically:YES]; 
```

其中 path 是您要写入的文件的名称。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-21T12:54:37.143

首先你应该得到 Documents 目录

```
/* create path to cache directory inside the application's Documents directory */
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *filePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"fileName"]; 
```

然后你应该将照片保存到文件中

```
NSData *photoData = UIImageJPEGRepresentation(photoImage, 1);
[photoData writeToFile:filePath atomically:YES]; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-03-05T18:32:26.303

在 Swift 4.2 中：

```
// Create path.
let paths = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)
if let filePath = paths.first?.appendingPathComponent("MyImageName.png") {
    // Save image.
    do {
       try image.pngData()?.write(to: filePath, options: .atomic)
    } catch {
       // Handle the error
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-31T00:55:20.350

在 Swift 4 中：

```
// Create path.
let paths = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)
if let filePath = paths.first?.appendingPathComponent("MyImageName.png") {
    // Save image.
    do {
       try UIImagePNGRepresentation(image)?.write(to: filePath, options: .atomic)
    }
    catch {
       // Handle the error
    }
} 
```

# java - searchByEmail 方法不起作用

> ID：11592316
> 
> 赞同：0
> 
> 时间：2012-07-21T12:48:02.437
> 
> 标签：java, search, hashmap

我对这种方法有疑问。当用户要求时，它不会输出正确的搜索。

这是我的代码：

```
System.out.println("Search by Email.");
Employee employeeSearchEmail = MenuMethods.userInputByEmail();
Store.searchByEmail(employeeSearchEmail.getEmployeeEmail());

public Employee searchByEmail(String employeeEmail) {
    for (Employee employee : map.values()) {
        System.out.println(employee);
        map.equals(getClass());
        map.equals(employee.getEmployeeEmail());
        employee = new Employee(employeeEmail);
        ;
        return employee;
    }
    return null;
}

public static Employee userInputByEmail() {
    // String temp is for some reason needed. If it is not included
    // The code will not execute properly.
    String temp = keyboard.nextLine();
    Employee e = null;
    System.out.println("Please enter the Employee Email:");
    String employeeEmail = keyboard.nextLine();
    // This can use the employeeName's constructor because java accepts the
    // parameters instead
    // of the name's.
    return e = new Employee(employeeEmail);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:21:13.090

问题是您的程序中没有这样的 if 条件：

```
public Employee searchByEmail(String employeeEmail) {
        for (Employee employee : map.values()) {
            map.equals(getClass());
            if (map.equals(employee.getEmployeeEmail())){
                System.out.println(employee);
                return employee;
            }
        }
        return null;
    } 
```

这一行： System.out.println(employee);

它将打印员工对象，直到找到匹配项，当匹配时它将返回该员工对象..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:53:57.270

你应该这样说

```
if(employeeEmail.equals(employee.getEmployeeEmail()) return employee; 
```

不需要创建`Employee`对象的新实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T12:55:09.753

您想要返回具有特定电子邮件地址的员工。因此，只有当当前员工的电子邮件地址等于给定的电子邮件地址时，您才应该返回：

```
 public Employee searchByEmail(String employeeEmail) 
    {
            for(Employee employee : map.values())
            {
                if(employee.getEmployeeEmail().equalsIgnoreCase(employeeEmail.trim()))
                          return employee;
            }
            return null;
    } 
```

顺便说一句，地图的键是什么。如果电子邮件地址是您可以简单地返回的键：

```
 return map.get(employeeEmail); 
```

# jquery - Jquery ui`removeClass`不起作用

> ID：11592318
> 
> 赞同：1
> 
> 时间：2012-07-21T12:48:45.693
> 
> 标签：jquery, jquery-ui

这是我的 HTML

```
<div id="c">
    <div class="base">
        <div class="cb out" id="red" data-color="Red">
        </div>
    </div>
    <div class="base">
        <div class="cb out" id="green" data-color="Green">
        </div>
    </div>
    <div class="base">
        <div class="cb out" id="blue" data-color="Blue">
        </div>
    </div>
</div> 
```

我想删除类并使用 jquery-ui`out`添加类并生效。`in`这是代码：

```
 //focuse mouseower
    function fmo(element) {
        var $element = $(element);
        $element.removeClass("out");
        $element.addClass("in",300);
    }

    //blur mouseout
    function bmo(element) {
        var $element = $(element);
        $element.removeClass("in");
        $element.addClass("out",300);

    }
    function ready() {
        $(".cb").mouseover(function () { fmo(this); });
        $(".cb").mouseout(function () { bmo(this); })
        $(".cb").focus(function () { fmo(this); });
        $(".cb").blur(function () { bmo(this); });
    }
    $(function () { ready(); }); 
```

上面的代码不起作用，但如果我删除 jquery-ui 引用并使用 jquery 来完成此代码的工作：

```
 //focuse mouseower
    function fmo(element) {
        var $element = $(element);
        $element.removeClass("out");
        $element.addClass("in");
    }

    //blur mouseout
    function bmo(element) {
        var $element = $(element);
        $element.removeClass("in");
        $element.addClass("out");

    }
    function ready() {
        $(".cb").mouseover(function () { fmo(this); });
        $(".cb").mouseout(function () { bmo(this); })
        $(".cb").focus(function () { fmo(this); });
        $(".cb").blur(function () { bmo(this); });
    }
    $(function () { ready(); }); 
```

有用。我不知道该怎么办，但我真的需要帮助。 **更新** 这是我的风格（我认为它可能会影响结果）

```
<style type="text/css">
    .out {
        display: inline-block;
        margin-left: 5px;
        background-color: #56a100;
        opacity: 0.5;
        margin: auto;
        width: 70%;
        height: 70%;
    }

    .in {
        display: inline-block;
        margin-left: 5px;
        background-color: #56a100;
        opacity: 1;
        margin: auto;
        width: 100%;
        height: 100%;
    }

    .base {
        display: inline-block;
        width: 50px;
        height: 50px;
        margin-left: 5px;
        margin-top: 100px;
    }
</style> 
```

**[我在这里](http://ahmadalli.net/t/m/)上传了代码**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T14:04:08.680

尝试这个

```
$(function(){ 
    $(".cb").on('mouseenter', function(){ 
        $(this).stop(1,1).removeClass("out").addClass("in", 300);
    })
    .on('mouseleave', function(){ 
        $(this).stop(1,1).removeClass("in").addClass("out",300); 
    });
});​ 
```

[**演示。**](http://jsfiddle.net/heera/BXRcd/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:09:19.463

Where did you get that second parameter on add/remove class?

Use queue, use chaining, and make functions to reuse code.

```
function helper (_elem, add, remove){
  var elem = $(_elem);
    elem.removeClass(remove).delay(300).queue(
     function(next){
        elem.addClass(add);
        next();
     }
  );
}

//focus mouseower
function fmo() {
  helper(this, "in","out");
}

//blur mouseout
function bmo() {
  helper(this, "in","out");
}

function ready() {
    $(".cb").on("mouseover focus", fmo).on("mouseout blur", fmo);
}
$(ready); 
```

# php - 删除字符串中的字符串

> ID：11592319
> 
> 赞同：0
> 
> 时间：2012-07-21T12:49:04.240
> 
> 标签：php

我遇到的问题是，如果我在数组 $wordstodelete 中有单个字符，那么它会从 $oneBigDescription 中的单词中删除它们。

```
$oneBigDescription = str_replace ( $wordstodelete, '', $oneBigDescription); 
```

所以它看起来像这样：

```
array (size=51)
  'blck' => int 5
  'centrl' => int 6
  'clssc' => int 6
  'club' => int 10
  'crs' => int 54
  'deler' => int 7
  'delers' => int 5
  'engl' => int 6
  'felne' => int 8
  'gude' => int 5
  'hot' => int 5
  'jgur' => int 172
  'jgurs' => int 5
  'lke' => int 6 
```

有没有办法只从 $oneBigDescription 中删除单个字符，如果它是单独的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T12:54:01.283

`$oneBigDescription = preg_replace("/\b$wordstodelete\b/", '', $oneBigDescription);`

`/b`应该寻找单词边界以确保在使用一个字符时它是一个孤立的单词。

**编辑：**没有完全正确地阅读 - 这更多的是假设您将 $wordstodelete 作为单词数组进行循环。

所以，像这样：

```
$desc = "blah blah a b blah";
$wordstodelete = array("a", "b");
foreach($wordstodelete as $delete)
{
    $desc= preg_replace("/\b$delete\b/", "", $desc);
} 
```

**EDIT2：**对此不太满意，因此略微精致：

```
$arr = "a delete aaa a b me b";
$wordstodelete = array("a", "b");
$regex = array();
foreach($wordstodelete as $word)
{
    $regex[] = "/\b$word\b\s?/";
}
$arr = preg_replace($regex, '', $arr); 
```

这用于取出以下空格，在 HTML 中渲染时通常不会出现问题（因为通常不会渲染连续的空格），但取出它仍然是个好主意。这也会在前面创建一个正则表达式数组，看起来更好一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:56:00.317

您可以使用 preg_replace 仅替换“单独的单词”，如下所示：（我正在生成正则表达式，因此单词列表可以保持不变）

```
$wordsToReplace = ("a", "foo", "bar", "baz");
$regexs = array();
foreach ($wordsToReplace as $word) {

    $regexs[] = "/(\s?)". $word . "\s?/";
}

$oneBigDescription = preg_replace($regexs, '\1', $oneBigDescription); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T12:53:13.603

听起来您可能需要使用一些正则表达式

```
$oneBigDescription = preg_replace('/\sa\s/', ' ', $oneBigDescription); 
```

这将采用“黑色中央”并返回“黑色中央”

# firefox - Mozilla Firefox Addon：如何在 url 下建立一个栏？

> ID：11592321
> 
> 赞同：1
> 
> 时间：2012-07-21T12:49:10.763
> 
> 标签：firefox, firefox-addon, mozilla, add-on

怎么看下图我想在firefox的url栏下建一个栏。这可能吗？![在此处输入图像描述](../Images/3758a4acd8f88e9787ea2695eaae1c32.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T22:16:22.130

应该可以使用[XUL 覆盖](https://developer.mozilla.org/en-US/docs/XUL_Overlays)。您必须覆盖 Firefox 的主 xul 文件，即“chrome://browser/content/browser.xul”。在这种情况下，最好的方法可能是使用 chrome-manifest 注册覆盖，请参阅此[MDN 页面](https://developer.mozilla.org/en-US/docs/Building_an_Extension#Register_an_Overlay)。

覆盖的内容被插入到被覆盖的 XUL 文档中。您可以在覆盖的文档中添加节点的 id 来指定应该发生插入的点，即所谓的[合并点](https://developer.mozilla.org/en-US/docs/Building_an_Extension#XUL_Overlays)。

所以你应该做的是抓取[DOMInspector](https://addons.mozilla.org/en-us/firefox/addon/dom-inspector-6622/)并查找要合并覆盖的元素的 id。我猜在这种情况下，您想在 ID 为“navigator-toolbox”的工具箱元素之后（使用“insertafter”属性）或在 ID 为“浏览器”的 hbox 元素之前（使用“insertbefore”属性）合并 - 两者都是vbox“浏览器面板”的子级。不应该影响你选择哪一个。

ps 作为 DOMInspector 的替代方案，您还可以在加载 URL“chrome://browser/content/browser.xul”时使用 Firebug 的 HTML 面板

# c# - 将纯英语转换为 SQL

> ID：11592324
> 
> 赞同：2
> 
> 时间：2012-07-21T12:49:25.853
> 
> 标签：c#, sql, nlp

我可以将英文文本转换为 sql 查询的最佳方式是什么。例如，如果我希望用户通过键入“显示 GPA 高于 3 的大学生”来运行查询。或“显示有 2 个或更多孩子的母亲”到目前为止我找到的最接近的链接是：[http](http://english2sql.com/demo.html) ://english2sql.com/demo.html ，但它看起来不太受支持，因为我发送给他们的电子邮件被退回对我来说。如果有一些我可以使用的开源库，最好是在 C# 中，那会很棒。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T12:59:33.917

您将面临的问题是将松散的语法（英语）转换为严格的语法（SQL），例如：“给我获取有关其孩子上高中的父母的所有记录。”、“给我看孩子上高中的父母” -schools”，“让我看看有孩子上高中的父母。”

所有这些语句都可能解析为 SQL ...

```
SELECT * FROM Parents WHERE AttendsHighSchool = 1; 
```

要构建这种用于查询系统的自然语言，您需要深入研究人工智能领域。您可能需要考虑构建一个基于某些参数构建 SQL 查询的 UI，

IE

```
"Show me " [DropDown containing tables] 
where [DropDown containing Arguments] [DropDown containing operators] [DropDown containing values] " 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T13:11:02.000

您可以查看[SharpNLP](http://sharpnlp.codeplex.com)项目。它具有非常有趣的解析和标记句子的能力。一旦你有了一个标记流，你就可以从中分析和构造其他“句子”，例如在 SQL 中。

比如说，你可以识别像“show”、“display”这样的动词标记，并且知道这将是一个 SELECT 查询，然后你找到一个名词并将其视为表名，像“with”这样的介词将变成“WHERE "，文章标记可以被忽略，等等。

下面是一个示例，说明它如何标记一个句子、识别每个标记的类型等等：[Parsing English Sentences](http://www.codeproject.com/Articles/12109/Statistical-parsing-of-English-sentences)

您还可以查看[M 语言](http://msdn.microsoft.com/en-us/library/dd285271.aspx)，它是 Microsoft 的一种 DSL 建模语言（我在其中一个 PDC 上看到过它）。使用它可能比 SharpNLP 之类的东西更容易使用，因为您可以轻松定义自己的语法规则，因此它会理解诸如“给我看有 2 个以上孩子的母亲”之类的短语，并且会确切地知道如何处理它们。但是我不知道现在 M 语言的状态如何。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-06T04:16:23.287

你可以试试[Kueri.me](http://kueri.me)，一个将简单的英语转换为 SQL 的平台。即使以不同的形式提供，它也能够理解用户输入。

例如，

*   让我看看 GPA 高于 3 的大学生
*   GPA高于3的学生
*   平均绩点 > 3

该平台开箱即用，具有基本的过滤、分组和排序功能。您可以进一步配置表格以获得额外的语言覆盖。

例如，您可能想要启用地理位置，例如

*   告诉我来自底特律的 GPA 大于 3 的学生
*   带我看看 20 公里内来自纽约市的学生

或定义动词

*   告诉我去年注册并参加了 30 多节课的学生

请注意，我来自 Kueri。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-28T01:20:46.220

试试[FriendlyData](https://friendlydata.io/) API。它接受简单的英语并生成 SQL 语句或返回带有来自您数据库的数据的 JSON 对象

# sql - 用于计数动态表项的 MS SQL 存储过程

> ID：11592327
> 
> 赞同：2
> 
> 时间：2012-07-21T12:49:46.583
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, stored-functions

我在存储过程下面写了这个并且得到了不正确的语句。

```
ALTER PROCEDURE dbo.[Counter]
        @TableName VARCHAR(100)
    AS 
        BEGIN
            DECLARE @Counter INT
            DECLARE @SQLQ VARCHAR(200)
            SET NOCOUNT ON;

        --SET @TableName = 'Member';
        SET @SQLQ = 'SELECT COUNT(*) FROM dbo.[' + @TableName + ']';
        --Preparing the above sql syntax into a new statement(get_counter).

            --Getting an error here I had googled the prepare statement but don't know why facing this error.
        PREPARE get_counter FROM @SQLQ;
    @Counter = EXEC get_counter; -- here @resutl gets the value of the count.@TableName
        DEALLOCATE PREPARE get_counter; -- removing the statement from the memory.

    END 
```

然后我又写了一篇：

```
ALTER PROCEDURE dbo.[Counter]
    @TableName VARCHAR(100)
AS 
    BEGIN
        DECLARE @Counter INT
        DECLARE @SQLQ VARCHAR(200)
        SET NOCOUNT ON;

        --SET @TableName = 'Member';
        SET @SQLQ = 'SELECT COUNT(*) FROM dbo.[' + @TableName + ']';
        --Preparing the above sql syntax into a new statement(get_counter).

    Execute @SQLQ; -- here @resutl gets the value of the count.@TableName

        --DEALLOCATE PREPARE get_counter; -- removing the statement from the memory.
        Return @Counter;

    END 
```

它运行良好，但我无法在 Counter 中得到结果，请任何人帮助我（我知道我没有为计数器分配任何值，但如果我这样做了，我会得到错误）。

在你回答马丁之后，我现在用你的代码替换了我的代码：

```
ALTER PROCEDURE dbo.[Counter] @SchemaName SYSNAME = 'dbo' , @TableName  SYSNAME

AS
  BEGIN
      SET NOCOUNT ON;

      DECLARE @SQLQ NVARCHAR(1000)
      DECLARE @Counter INT;

      SET @SQLQ = 'SELECT @Counter = COUNT(*) FROM ' + 
       Quotename(@SchemaName) + '.' + Quotename(@TableName);

      EXEC sp_executesql
        @SQLQ ,
        N'@Counter INT OUTPUT',
        @Counter = @Counter OUTPUT

      Return   SELECT @Counter
  END 
```

现在我已经找回了它。

```
 ALTER PROCEDURE dbo.[CreateBusinessCode]
    @MemberID                               bigint,
    @len                                        int,
    @RewardAccountID                bigint,
    @ConnectionStatusID         tinyint,
    @Assign                                 smalldatetime

AS
    BEGIN
    SET NOCOUNT ON;
    DECLARE @counter INT

    EXEC @counter = dbo.Counter 'dbo','member';

    Select @counter;

    END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:02:02.557

您应该使用`SYSNAME`对象标识符，`Quotename`而不是自己连接方括号。

```
ALTER PROCEDURE dbo.[Counter] @TableName  SYSNAME,
                              @SchemaName SYSNAME = 'dbo'
AS
  BEGIN
      SET NOCOUNT ON;

      DECLARE @SQLQ NVARCHAR(1000)
      DECLARE @Counter INT;

      SET @SQLQ = 'SELECT @Counter = COUNT(*) FROM ' + 
       Quotename(@SchemaName) + '.' + Quotename(@TableName);

      EXEC sp_executesql
        @SQLQ ,
        N'@Counter INT OUTPUT',
        @Counter = @Counter OUTPUT

         SELECT @Counter
  END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T12:58:38.373

在 SQL Server 中，如果要将结果放入变量中，则有两种选择。

首先是使用游标。

二是做动态SQL：

```
declare @sql varchar(max) = whatever;
declare @cnt int;

declare @cntTable table as (cnt int);

insert into @cntTable
    exec(@sql);

select @cnt = t.cnt
from @cntTable 
```

这很麻烦，但其中一个确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T14:00:45.550

试试这个。它不会查询实际的表，但会为您提供行数。如果您有大表并且需要近似计数，这是更好的方法。

```
ALTER PROCEDURE dbo.[Counter] 
    @TableName VARCHAR(100) 
AS  
begin

declare @objectid int,@counter int
select @objectid = object_id from sys.all_objects where name = @tablename and schema_id=SCHEMA_ID('dbo')
select @counter = sum(rows) from sys.partitions where object_id= @objectid
and index_id in (0,1)
select @counter
end
go 
```

# php - 显示时从数组中获取数据非常慢

> ID：11592333
> 
> 赞同：0
> 
> 时间：2012-07-21T12:50:46.927
> 
> 标签：php, foreach, mysqli

这是我的代码：

```
 <?php

        if(isset($_POST['submit']) & !empty($_POST['appid'])) {

        $app = mysql_real_escape_string($_POST['appid']);

        //database parameters

        $conp = mysqli_connect($hostname, $user, $password, $database) or die('error in connection' . mysqli_error());

        //actual data for appid's

        $appsi = mysqli_query($conp, "SELECT distinct package_name FROM `user_app` where `app_id` = '$app'");

        $all = array();

        while($row = mysqli_fetch_assoc($appsi)) {

        $all[] = $row["package_name"]; // array problem

    }

    foreach ($all as $value) {

        $install = mysqli_query($conp, "SELECT COUNT(*) AS installs from `install` where package_name = '$value'");

        $row = mysqli_fetch_assoc($install);
        $data[] =  '<b>' .$row["installs"] . '</b>';

        $reg = mysqli_query($conp, "SELECT COUNT( DISTINCT `imei_num` ) AS reg FROM `user_app` WHERE package_name = '$value'");

$row = mysqli_fetch_assoc($reg);

$regd[] =  '<b>' .$row["reg"] . '</b>';

    }

 }

    mysqli_close($conp);

    ?>

    <html>
    <head>

        <title>script</title>

    </style>
    </head>

    <body>

    <span style="text-align: center"><h1>Beta</h1></span>

        <form name="query" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

        <p>Enter Application-Specific Id:</p> 

        <select name='appid'>

        <?php 

        $conp = mysqli_connect($hostname, $user, $password, $database) or die('error in connection' . mysqli_error());

        $getid = mysqli_query($conp, "SELECT distinct `app_id`, `appidt` from `user_app` group by `app_id`") or die('get data failed' . mysqli_error());

            while(($row = mysqli_fetch_assoc($getid)) != null)  {

                echo "<option value = '{$row['app_id']}' selected = 'selected'";

                    if ($selected == $row['app_id']) {

                        echo "selected = 'selected'";

                    }

                echo ">{$row['appidt']}</option>";
            }

    mysqli_close($conp);

    ?>

        </select>

        <p><input type="submit" name="submit" value="Go" /></p>

        </form>

        <div>

            <p><?php echo '<br />' .'<b>'. 'Application Id : '. $app . '</b>'; ?> </p>
            <hr />
            <table border=2px width=100%>
                <tr>
                    <th><b>App Packages</b></th>
                    <th><b>Registrations</b></th>
                    <th><b>Installs</b></th>
                </tr>

                <tr>
                    <td><?php echo implode("<br><br>", $all); ?></td>
                    <td align="center"><?php echo implode("<br><br>", $regd); ?></td>
                    <td align="center"><?php echo implode("<br><br>", $data); ?></td>
                </tr>

            </table>

            <p><?php echo "$name"; ?></p>

        </div>

    </body>
    </html> 
```

我在一个数组中获取我的所有包名称：all[]，包的范围可能是 10 或 20，之后我想要所有下载对应于另一个表名上的`downloads`包和另一个表上的包`app_packages`。

我不能使用连接，因为包表包含特定的包，但下载包含许多与包对应的下载。

因此，我将所有包放入 all[] 并在 foreach 循环名称 $value 中使用它们，现在我得到每个包的所有安装，我可以通过 implode 函数显示它。但是在我的前端，当我从下拉列表中选择一个 appid 时，如您所见，检索每个包的下载数将花费大量时间。这不是我想要展示的，因为它非常耗时。

请看这个问题，如果我在解释中遗漏了什么，那么我道歉，提示我并提及它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:00:57.147

在循环中使用查询是一个坏主意。这就是你得到缓慢结果的原因。它在每次迭代时都会触及数据库。您可以使用子查询或加入作为替代方式来执行此操作。

# google-app-engine - 谷歌云存储 - 确定每个用户的目录大小

> ID：11592334
> 
> 赞同：0
> 
> 时间：2012-07-21T12:50:50.440
> 
> 标签：google-app-engine, google-cloud-storage

我创建了一个存储桶，用于为我的所有用户存储数据。目录结构如下：

--> BUCKET_NAME/USER_IDENTIFIER/CREATION_DATE/OBJET_ID

==> 是否可以使用 gsutil 或通过 API 获取每个用户的总体大小？

例如，如果 USER X 由“USER_1”标识，我想获取 BUCKET_NAME/USER_1 下所有对象的大小

如果有人知道如何实现这一点会很棒吗？使用标准文件名会很容易，但我找不到使用 Google Cloud Storage 实现此功能的简单方法。

谢谢，

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:05:10.487

没有用于此的 API，您需要自己保留每个用户的簿记。
您可以请求某个键下的所有文件并对总文件大小求和，但此过程（非常）慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T00:43:46.167

您现在可以为此使用本机 gsutil 命令：

> > 要以人类可读的形式打印存储桶中的总字节数：
> > 
> > **gsutil du -ch gs://bucketname**
> 
> 来源：[https ://developers.google.com/storage/docs/gsutil/commands/du](https://developers.google.com/storage/docs/gsutil/commands/du)

它返回每个“文件夹”的总数和全局总数，非常方便！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T03:49:13.480

如果用户名是有规律的结构，你可以写一个这样的脚本：

```
for user_id in {0..100}; do;
    echo USER ${user_id}: $(gsutil ls -l gs://BUCKET_NAME/$user_id/**) 
done 
```

这将打印每个用户的对象数量和总数据大小（假设您的用户 ID 是简单的数值）。

正如 Shay 所指出的，如果每个用户都有大量对象，则此过程可能会非常缓慢。

# java - 在 java applet 程序中按下按钮时未获得所需的输出

> ID：11592336
> 
> 赞同：1
> 
> 时间：2012-07-21T12:51:23.390
> 
> 标签：java, button, applet, actionlistener, japplet

代码如下，我希望文本字段中的任何数据都`T1`被`T2`减去并在`T3`我们按下按钮后进入......

```
import java.applet.Applet;
import java.awt.Button;
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Label;
import java.awt.TextField;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class abc extends Applet implements ActionListener {
    TextField T1, T2, T3, T4, T5;
    Button B1;
    String ST1, ST2, ST3;
    double a;

    public void paint(Graphics g) {

    setLayout(null);
    setBackground(Color.pink);
    g.drawRect(0, 0, 600, 500);
    g.drawLine(0, 50, 600, 50);
    g.drawLine(0, 80, 600, 80);
    g.drawLine(150, 50, 150, 80);
    g.drawLine(300, 50, 300, 80);
    g.drawLine(0, 110, 600, 110);
    g.drawLine(120, 80, 120, 150);
    g.drawLine(240, 80, 240, 150);
    g.drawLine(360, 80, 360, 150);
    g.drawLine(480, 80, 480, 150);
    g.drawLine(0, 150, 600, 150);
    g.drawLine(230, 150, 230, 360);
    g.drawLine(300, 150, 300, 170);
    g.drawLine(370, 150, 370, 170);
    g.drawLine(460, 150, 460, 390);
    g.drawLine(230, 170, 460, 170);
    g.drawLine(0, 390, 600, 390);
    g.drawLine(0, 360, 460, 360);
    g.drawLine(345, 200, 345, 390);
    g.drawLine(0, 200, 345, 200);
    g.drawLine(0, 420, 600, 420);
    g.drawLine(0, 220, 230, 220);
    g.drawLine(0, 240, 230, 240);
    g.drawLine(0, 260, 230, 260);
    g.drawLine(0, 280, 230, 280);
    g.drawLine(0, 300, 230, 300);
    g.drawLine(0, 320, 230, 320);
    g.drawLine(0, 340, 230, 340);
    g.drawLine(140, 220, 140, 360);

    Label L1 = new Label("A COMPANY PVT.LTD.");
    L1.setBounds(150, 5, 440, 30);
    Font myFont = new Font("TimesRoman", Font.BOLD, 18);
    L1.setFont(myFont);
    Label L2 = new Label("Ph. :01222");
    L2.setBounds(200, 30, 250, 20);
    Label L3 = new Label("Date //___");
    L3.setBounds(470, 30, 120, 20);

    Label L4 = new Label("Vehicle No.");
    Label L5 = new Label("Colliery");
    Label L6 = new Label("Unloaded at:");
    L4.setBounds(5, 55, 120, 10);
    L5.setBounds(155, 55, 130, 15);
    L6.setBounds(315, 55, 120, 10);

    this.add(L1);
    this.add(L2);
    this.add(L3);
    this.add(L4);
    this.add(L5);
    this.add(L6);

    Label L7 = new Label("Desp.Wt.in MT");
    L7.setBounds(10, 84, 100, 25);
    this.add(L7);
    Label L8 = new Label("Recd.Wt.in MT");
    L8.setBounds(135, 84, 100, 25);
    this.add(L8);
    Label L9 = new Label("Shortage in MT");
    L9.setBounds(255, 84, 100, 25);
    this.add(L9);
    Label L10 = new Label("Freight Rate PMT");
    L10.setBounds(375, 84, 100, 25);
    this.add(L10);
    Label L11 = new Label("Advance Rs.");
    L11.setBounds(500, 84, 95, 25);
    this.add(L11);

    Font myFont1 = new Font("TimesRoman", Font.BOLD, 10);
    Label L12 = new Label("Weight X");
    L12.setBounds(240, 152, 55, 15);
    this.add(L12);
    L12.setFont(myFont1);
    Label L13 = new Label("Freight =");
    L13.setBounds(310, 152, 55, 15);
    this.add(L13);
    L13.setFont(myFont1);
    Label L14 = new Label("Amount");
    L14.setBounds(390, 152, 55, 15);
    this.add(L14);
    L14.setFont(myFont1);

    Font myFont2 = new Font("ArialBlack", Font.BOLD, 10);
    Label S1 = new Label("Particulars");
    S1.setBounds(15, 221, 30, 18);
    S1.setFont(myFont2);
    this.add(S1);
    Label S2 = new Label("Shortage");
    S2.setBounds(5, 241, 30, 18);
    S2.setFont(myFont2);
    this.add(S2);
    Label S3 = new Label("Advance");
    S3.setBounds(5, 261, 30, 18);
    S3.setFont(myFont2);
    this.add(S3);
    Label S4 = new Label("Commission");
    S4.setBounds(5, 281, 30, 18);
    S4.setFont(myFont2);
    this.add(S4);
    Label S5 = new Label("Munsiana");
    S5.setBounds(5, 301, 30, 18);
    S5.setFont(myFont2);
    this.add(S5);
    Label S6 = new Label("Other Deduction");
    S6.setBounds(5, 321, 30, 18);
    S6.setFont(myFont2);
    this.add(S6);
    Label S7 = new Label("Total");
    S7.setBounds(5, 341, 30, 18);
    S7.setFont(myFont2);
    this.add(S7);
    Label R1 = new Label("Amount");
    R1.setBounds(150, 221, 40, 18);
    R1.setFont(myFont2);
    this.add(R1);
    TextField R2 = new TextField();
    R2.setBounds(145, 241, 80, 18);
    R2.setFont(myFont2);
    this.add(R2);
    TextField R3 = new TextField();
    R3.setBounds(145, 261, 80, 18);
    R3.setFont(myFont2);
    this.add(R3);
    TextField R4 = new TextField();
    R4.setBounds(145, 281, 80, 18);
    R4.setFont(myFont2);
    this.add(R4);
    TextField R5 = new TextField();
    R5.setBounds(145, 301, 80, 18);
    R5.setFont(myFont2);
    this.add(R5);
    TextField R6 = new TextField();
    R6.setBounds(145, 321, 80, 18);
    R6.setFont(myFont2);
    this.add(R6);
    TextField R7 = new TextField();
    R7.setBounds(145, 341, 80, 18);
    R7.setFont(myFont2);
    this.add(R7);

    Label L15 = new Label("Total Freight Payable Rs.");
    L15.setBounds(190, 366, 150, 19);
    this.add(L15);
    Label L16 = new Label("Rupees....................................................................................");
    L16.setBounds(30, 395, 200, 19);
    this.add(L16);
    Label L17 = new Label("Paid Date.................................................");
    L17.setBounds(10, 425, 200, 19);
    this.add(L17);
    L17 = new Label("Recieved By Name....................................");
    L17.setBounds(10, 450, 200, 19);
    this.add(L17);
    Label L18 = new Label("Mobile No........................................");
    L18.setBounds(10, 475, 200, 19);
    this.add(L18);
    Label L19 = new Label("Signature");
    L19.setBounds(250, 475, 150, 19);
    this.add(L19);
    Label L20 = new Label("For:A Co.(P)Ltd");
    L20.setBounds(440, 475, 155, 19);
    this.add(L20);

    T1 = new TextField();
    T1.setBounds(5, 118, 110, 28);
    this.add(T1);
    T2 = new TextField();
    T2.setBounds(125, 118, 110, 28);
    this.add(T2);
    T3 = new TextField();
    T3.setBounds(245, 118, 110, 28);
    this.add(T3);
    T4 = new TextField();
    T4.setBounds(365, 118, 110, 28);
    this.add(T4);
    T5 = new TextField();
    T5.setBounds(485, 118, 110, 28);
    this.add(T5);

    B1 = new Button("Submit");
    B1.setBounds(200, 520, 100, 23);

    B1.addActionListener(this);
    this.add(B1);

    T1.setText("40");
    T2.setText("20");
    ST1 = T1.getText();
    ST2 = T2.getText();
    a = Double.parseDouble(ST1) - Double.parseDouble(ST2);
    ST3 = "" + a;
    }

    public void actionPerformed(ActionEvent ev) {
    Object obj = ev.getSource();
    if (obj == B1) {

        System.out.println("wjnqjqw");
    } else {
        T3.setText(ST3);
        System.out.println("assassas");

    }
    }
}// <applet code="abc.java" width=600 height=550></applet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:59:56.787

**1.首先添加 B1**，然后**对其应用监听器**。

**2.将****减法代码** 保留在`actionPerformed()`方法中。

```
T1.setText("40");
T2.setText("20"); 
this.add(B1);
B1.addActionListener(this);

public void actionPerformed(ActionEvent ev){

ST1=T1.getText(); 
ST2=T2.getText(); 
a=Double.parseDouble(ST1)-Double.parseDouble(ST2); 
ST3=""+a; 
} 
```

**3.**使用方法比较对象`.equals()`，所以使用`(obj.equals(B1))`

# php - SPL 对象存储与 SPL 数组与普通数组

> ID：11592337
> 
> 赞同：6
> 
> 时间：2012-07-21T12:51:31.617
> 
> 标签：php, arrays, spl

普通数组、SPL 数组和 SPL 数据存储之间有什么**区别**，**用法* 场景？*如果有人能给出一些使用 SPLarray 和 SPL objectsrorage 的实际例子，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T14:50:16.617

的主要优点[`SplFixedArray`](http://php.net/manual/en/class.splfixedarray.php)是，对于数组的某个用例子集，它要快得多（该子集是只有整数键和固定长度的数组）。因此，例如：

```
$a = array("foo", $bar, 7, ... thousands of values ..., $quux);
$b = \SplFixedArray::fromArray($a);

// here, $b will be much faster to use than $a 
```

这个类的用法实际上可以是任何你可以使用数组的东西，但发现它们以前太慢了。很多时候，在大型数据集的复杂计算中就是这种情况。对于典型的基于 PHP 的 Web 应用程序或网站，不会有很多（如果有的话）*需要*性能提升的情况。

* * *

但是，该类[`SplObjectStorage`](http://www.php.net/manual/en/class.splobjectstorage.php)在各种典型情况下都有用。它提供了一种将对象映射到其他数据的方法。所以，例如，也许你有一个`Route`类，你想提供一个`Controller`类的映射：

```
$routeOne = new Route(/* ... */);
$routeTwo = new Route(/* ... */);

$controllerOne = new Controller(/* ... */);
$controllerTwo = new Controller(/* ... */);

$controllers = new \SplObjectStorage();

$controllers[$routeOne] = $controllerOne;
$controllers[$routeTwo] = $controllerTwo;

// now you can look up a controller for a given route by:  $controllers[$route] 
```

# math - 如何计算高达千位数的数字

> ID：11592339
> 
> 赞同：-3
> 
> 时间：2012-07-21T12:52:06.463
> 
> 标签：math, language-agnostic

何在具有 2GB RAM 的 32 位计算机上进行计算。当我进行长数运算时，程序开始给出垃圾值。但我想计算数以万计的数字。任何语言都可以接受。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T13:04:36.150

使用 Java 的[`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)，几乎立即执行：

```
import java.math.BigInteger;
import java.util.Random;

public class Int10k {

    public static final void main(String[] args) {
        BigInteger  a, b, c;
        Random rnd;

        // Here I'll create two random 40,000-bit numbers (that's
        // rather more than 10,000 decimal digits) and add them
        // together. For specific numbers, you can use the
        // BigInteger(String) constructor, which creates a
        // BigInteger based on a String of digits.
        rnd = new Random();
        a = new BigInteger(40000, rnd);
        b = new BigInteger(40000, rnd);
        c = a.add(b);

        System.out.println(a);
        System.out.println("+");
        System.out.println(b);
        System.out.println("=");
        System.out.println(c);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T12:53:48.743

您可以使用 Java BigInteger 或任何其他 Big Integer 实现

例子：

```
BigInteger left = new Biginteger("1845618948745415218748");
BigInteger right = new BigInteger("1845452132132132123132123123");

out.println(left.add(right)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T12:55:10.533

这里使用的库是[BC Math](http://www.php.net/manual/en/book.bc.php)。它默认包含在 PHP 中。

```
$big_int1 = "";
$big_int2 = "";

for( $i = 0; $i < 10000; ++$i ) {
    $big_int1 .= mt_rand(0,9);
    $big_int2 .= mt_rand(0,9);
}//0.019520044326 seconds or 20 milliseconds

echo bcadd( $big_int1, $big_int2 ); //0.00037407875061035 seconds or 374 microseconds 
```

立即为我执行。无论如何，字符串连接/随机数生成是瓶颈。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T13:17:57.067

以下是各种语言的一些方便的链接：

*   [Python](http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex)（内置）
*   C/C++ - [GMP](http://gmplib.org/)，可能是最高效的通用任意精度数库
*   [.NET 4](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)（内置）
*   .NET - [GnuMpDotNet](http://www.emilstefanov.net/Projects/GnuMpDotNet/) - 使用[GMP](http://gmplib.org/)，因此也非常高效，但由于运算符重载等原因，它更易于使用
*   [Java](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)（内置）
*   PHP - [BC 数学](http://www.php.net/manual/en/book.bc.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-18T19:45:00.890

所有 Common Lisp 实现都包含任意长度的整数。通常实现平底船到 C 库来处理它，但在 Lisp 中工作更方便。

例如，看看 Clisp、SBCL 或 CMUCL（网络搜索将找到这些项目的主页）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-21T13:00:48.207

这不是语言问题，而是数学问题：[http](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic) ://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic一个众所周知的问题，并且存在大量编程库来为您解决问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-21T12:56:03.637

这个问题很抽象，是的，实现这样的计算器是可能的。在某些时候，您可能不得不依赖磁盘缓存和手动实现操作，而不是依赖现有的类（例如 Java 的 BigInteger），但它在技术上是可行的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-21T12:56:34.217

对的，这是可能的。这是一个公共域 C++ 库，仅用于：[https ://mattmccutchen.net/bigint/](https://mattmccutchen.net/bigint/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-21T12:59:31.997

这里存在很好的算法，您可以使用定义 2 数组 [0-9] 并根据每个结果定义一个新数组：

```
{0,1,2,3,4,5,6,7,8,9}
{0,1,2,3,4,5,6,7,8,9}
///// 
```

然后你可以定义一个放置+结果的二维数组：

```
0 1 ....
1 ... 
```

* 和 / 等也是如此，然后您读取字符串类型并创建字符串输出。

# windows-phone-7 - WP7：在启动时检查用户凭据并加载不同的视图？

> ID：11592341
> 
> 赞同：0
> 
> 时间：2012-07-21T12:52:39.270
> 
> 标签：windows-phone-7, windows-phone-7.1

任何人都可以帮忙。我创建了一个小型 WP7，它按照我想要的方式工作。

它总是要求用户输入用户名和密码才能进入应用程序，我还有一个名为“记住设置”的按钮，如果在下次加载应用程序时选中它，我希望它自动登录，因此用户不会看到登录屏幕，它将绕过此视图并加载另一个。

我需要某种方式来加载 1 xaml 是用户凭据不存在或无效，另一个是主应用程序 xaml（如果凭据存在且有效）。

页面的加载似乎是在manifast中硬编码的。如您所见，我正在加载我的登录页面。

```
<Tasks>
  <DefaultTask  Name ="_default" NavigationPage="LoginPage.xaml"/>
</Tasks> 
```

那么我最好的实现方式是什么，我想改变创建 xaml（entance 文件），如果凭据存在等，我可以在其中检查我的 VIEWMODEL 的构造函数，然后执行导航到另一个页面。但这感觉就像代码气味..

任何人都可以提供建议或示例来说明实现此目的的最佳方法。

我实际上正在使用 MVVM Light，但事情应该几乎一样吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:12:27.417

您可以通过将用户凭据存储在 windows phone 7 的隔离存储中来做到这一点。一旦用户选中记住设置或凭据复选框，然后您将这些设置保存在隔离存储中。下一次当您的应用程序启动并假设您的默认页面是“MainPage.XAML”。然后在此页面上的 OnPageNavigated 事件检查用户设置。如果有设置，则重定向到其他视图（记录视图）上的用户。否则，用户将位于 MainPage.xaml。和注销按钮，您可以清除这些设置..

这是隔离存储的好例子。

[http://msdn.microsoft.com/en-us/library/ff769510%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff769510%28v=vs.92%29.aspx)

[http://go.microsoft.com/fwlink/?LinkID=229120](http://go.microsoft.com/fwlink/?LinkID=229120)（示例代码）

[http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage)

希望这会帮助你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:59:08.337

尝试在设置中存储用户名、密码、authtokens 或您需要检查身份验证的任何其他值。

打开登录页面时，从 OnNavigatedTo 方法的设置中检查令牌的值。如果它不为空，则表示用户已经登录，那么您可以将他重定向到您的主屏幕，否则显示登录页面并要求他输入凭据。

也不要忘记在应用退出时保存设置。检查下面的链接以获得更多帮助

[http://msdn.microsoft.com/en-us/library/ff769510(v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/ff769510(v=VS.92).aspx)

在注销时，清除设置页面中的令牌

# php - 搜索包含 X 的行，但在找到时显示多于该行

> ID：11592343
> 
> 赞同：0
> 
> 时间：2012-07-21T12:52:40.707
> 
> 标签：php, mysql, html, search, search-engine

开门见山：

在

```
ip ssh version 2
no aaa new-model
!
dot11 ssid lala
    vlan 500
    authentication open 
    authentication key-management wpa
    wpa-psk ascii 100 40345352352352352352255325
!
!
crypto pki trustpoint TP-self-signed-3007141781 
```

例如，我想搜索关键字“vlan”。我的代码返回正确的“vlan 500”。它还返回 'vlan' 所在的所有行。

现在我希望搜索程序（php）返回整个块。在上述情况下：

```
!
dot11 ssid lala
    vlan 500
    authentication open 
    authentication key-management wpa
    wpa-psk ascii 100 40345352352352352352255325
! 
```

或没有“！” 当然。

有什么想法可以快速有效地完成这项工作吗？

ps：现在我正在使用

```
while($row = mysql_fetch_array($result, MYSQL_ASSOC)){
.... 
```

和

```
foreach(preg_split("/(\r?\n)/", $config) as $line){
... 
```

在其中，获取搜索词出现的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:05:09.473

我设法通过保存块开始的索引来实现这一点。我通过检查每行前面的空格来开始块，在我找到匹配单词之前的最后一个块是我开始显示行的索引。

# java - 在 Java 中启动/暂停/恢复方法

> ID：11592345
> 
> 赞同：1
> 
> 时间：2012-07-21T12:52:49.423
> 
> 标签：java, multithreading, java.util.concurrent, concurrent-programming

> **可能重复：**
> [开始/暂停/恢复/暂停……其他类调用的方法](https://stackoverflow.com/questions/11603891/start-suspend-resume-suspend-a-method-invoked-by-other-class)

我想实现一个 Anytime k-NN 分类器，但我找不到在特定时间内调用“classify(...)”方法的方法，暂停它，在方法暂停之前获取可用结果，恢复特定时间量的方法，暂停它，在方法暂停之前获取可用结果，等等......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:51:01.197

我最近在这里发布了一个[PauseableThread](https://stackoverflow.com/questions/10665780/more-efficient-way-for-pausing-loop-wanted/10669623#10669623)。

您可以使用`ReadWriteLock`. 如果您每次遇到暂停的机会时都暂时抓住一个写锁，那么您只需要暂停器抓住一个读锁来暂停您。

```
 // The lock.
  private final ReadWriteLock pause = new ReentrantReadWriteLock();

  // Block if pause has been called without a matching resume.
  private void blockIfPaused() throws InterruptedException {
    try {
      // Grab a write lock. Will block if a read lock has been taken.
      pause.writeLock().lockInterruptibly();
    } finally {
      // Release the lock immediately to avoid blocking when pause is called.
      pause.writeLock().unlock();
    }
  }

  // Pause the work. NB: MUST be balanced by a resume.
  public void pause() {
    // We can wait for a lock here.
    pause.readLock().lock();
  }

  // Resume the work. NB: MUST be balanced by a pause.
  public void resume() {
    // Release the lock.
    pause.readLock().unlock();
  } 
```

# python - 实现css解析器/替换器的pythonic方法是什么

> ID：11592347
> 
> 赞同：9
> 
> 时间：2012-07-21T12:53:43.313
> 
> 标签：python

我想实现一个脚本来读取 CSS 文件并对它进行有意义的更改（添加/删除/替换行/单词等）。基本逻辑是实现 RTL（从右到左）转换。

我可以想到很多方法：

*   文件阅读器 - 读取一行，分析它并对其进行必要的更改。
*   两阶段扫描 - 在内存模型中创建，扫描并更改它，将模型保存为文本。
*   正则表达式 - 这可能非常困难，因为其中一些可能非常复杂。

基本上我想知道的是，这些或其他方法中的哪一个是python的方法？对于这种操作，您认为我应该熟悉任何相关的库吗？

编辑：应该注意的是，这是一个“通过这个可用项目学习 python”的项目，所以我不熟悉你在这里提到的大多数库。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T10:18:25.220

如果你想要一些“快速而肮脏”的东西，有很多有趣的方法可以做到这一点。（正如你所说：逐行，正则表达式，......）

但是，如果您想“正确”地进行操作（对所有类型的输入都正确），您将需要一个基于官方[CSS 标记化和语法](http://www.w3.org/TR/CSS21/syndata.html#tokenization)的真正解析器。在 Python 中有[cssutils](http://packages.python.org/cssutils/)和[tinycss](http://packages.python.org/tinycss/)。（免责声明：我是 tinycss 的作者。）如果你想学习，我喜欢认为[tinycss 的源代码](https://github.com/SimonSapin/tinycss/)简单易学 :)

# php - WordPress 定制 - 走哪条路？

> ID：11592362
> 
> 赞同：0
> 
> 时间：2012-07-21T12:55:18.973
> 
> 标签：php, wordpress, customization

我是一名高级 .NET/C# 开发人员，我想在 Wordpress 中开始一个私人项目。我的 PHP 经验真的过时了（10 岁），我真的很困惑：如何开始？

使用我的（不存在的）PHP 3.x 或 4.x 知识会很蹩脚，但我不知道从哪里开始。

那么**2012 年的 Wordpress/PHP**对于高级但不是高级 php 开发人员意味着什么？

我找到了一些起点，你在想什么？

[http://www.sitepoint.com/whats-new-php-5-3/](http://www.sitepoint.com/whats-new-php-5-3/)

[http://codex.wordpress.org/Site_Design_and_Layout](http://codex.wordpress.org/Site_Design_and_Layout)

请帮助我更改和扩展此列表。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:09:32.317

My suggestion is that you start with fiddling with the twenty eleven template.

the beautiful thing about wordpress functions is that they are all logically named. if you don't know what a function does just look if up in the codex and experiment with the results.

wordpress has its own api so your experience is still good. you just have to know basics as foreach, variable types, functions and classes.

Them just experiment away. That is the quickest easy to learn.

# javascript - JSHint 中的各种问题

> ID：11592363
> 
> 赞同：-1
> 
> 时间：2012-07-21T12:55:19.627
> 
> 标签：javascript

在 JSHint 中，我收到关于我的数组声明的以下消息：

```
jesuschrist["eng_male"] = [//tons of arrays here]; 
```

> ['baby_jesus'] 最好用点表示法编写。

这是否意味着我应该把它写成`baby.jesus`？

* * *

另外，我在声明对象时给了我一个问题：

```
jesuschrist = new Object(); 
```

JSHint 是这样说的：

> 使用对象文字符号 {}。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T12:59:33.027

这表明您的代码更改为：

```
jesuschrist = {};
jesuschrist.eng_male = [//tons of arrays here]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:38:12.570

jShint 告诉您使用 do 表示法，因为您正在尝试使用字符串文字（它是静态的）获取属性。因为属性标识符不会改变。

```
jesuschrist.eng_male //this wont change 
```

您可以使用 [] 访问对象的属性，然后将属性名称作为变量传递（可以是动态的）

```
var prop = "eng_male";
jesuschrist[prop]; //this might be changed, depends on the prop value. 
```

两个给定的例子都适用于 JsHint。

# javascript - 骨干模型未在集合中实例化

> ID：11592364
> 
> 赞同：0
> 
> 时间：2012-07-21T12:55:24.840
> 
> 标签：javascript, backbone.js

我有一个像这样的骨干模型

```
define([
'underscore',
'backbone'
],function( _,Backbone) {
    var Task =  Backbone.Model.extend({
        //api url
        url:'',

        methodToURL: {
        'read': './api/tasks/index',
        'create': './api/tasks/task',
        'update': './api/tasks/task',
        'delete': './api/tasks/task'
        },
        sync: function(method, model, options) {
            options = options || {};
            options.url = this.methodToURL[method.toLowerCase()];

            Backbone.sync(method, model, options);
        }
    });
    return Task;
}); 
```

和一个集合

```
define(['underscore','backbone','models/task'],function( _,Backbone,Task) {
    var TaskCollection = Backbone.Collection.extend({
        //Model
        model:Task,
        //api url
        url:'',

        methodToURL: {
        'read': './api/tasks/index',
        'create': './api/tasks/task',
        'update': './api/tasks/task',
        'delete': './api/tasks/task'
        },

        sync: function(method, model, options) {
            options = options || {};
            options.url = this.methodToURL[method.toLowerCase()];

            Backbone.sync(method, model, options);
        },
        //construct
        initialize: function() {
            this.sort_key = 'end';
            this._model = new Task();
            this.fetch();
        },

        comparator: function(a,b) {
            a = a.get(this.sort_key);
            b = b.get(this.sort_key);
            return a > b ?  1
                 : a < b ? -1
                 :          0;
        },

        mark_complete: function(task_id) {
            var task_status = 0;
                    console.log(this.model);
            this.model.save({id:task_id,task_status:task_status});
        },

        mark_incomplete: function(task_id) {
            var task_status = 1;
                    console.log(this.model);
            this.model.save({id:task_id,task_status:task_status});
        },

        sort_by_status: function() {
            this.sort_key = 'task_status';
            this.sort();
        },

        sort_by_task_tag: function() {
            this.sort_key = 'task_group';
            this.sort();
        }
    });
    return TaskCollection;
}); 
```

当我运行 mark_complete 方法时，模型会记录到控制台，但它会记录这个“ `function (){ parent.apply(this, arguments); }`”并说“ `function (){ parent.apply(this, arguments); } has no method 'save'`”；我猜测该模型应该被实例化，以便集合可以访问它的方法，那么出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T16:37:15.340

该`model`属性只是`Collection`在将模型添加到集合时使用的构造函数。当您尝试将数据输入到集合中时，它旨在让您的生活更轻松。`Task`在向 中添加模型时，不必总是调用构造函数`TaskCollection`，您只需输入一个 JavaScript 对象，它就会做同样的事情。

因此，当您想要插入模型*而不*将`model`属性设置为您的`TaskCollection`

```
taskCollection.add(new Task({ 
    name: "Get Milk",
    description: "We're out of milk. There's a sale going on at the local supermarket." 
}));

// If you wanted to just input just the JSON object without calling the
// constructor, then you can't. 
```

如果您设置了*属性*`model`，这就是您的代码的样子

```
taskCollection.add({
    name: "Get Milk",
    description: "We're out of milk. There's a sale going on at the local supermarket." 
}); 
```

如您所见，您不需要调用`Task`构造函数；的实例`TaskCollection`将为您调用它。

这就是为什么实例`TaskCollection`只会将`model`属性设置为的实际构造函数`Task`，而不是初始化版本。

# jqgrid - Selenium webdriver 依赖于 JQGrid id

> ID：11592367
> 
> 赞同：1
> 
> 时间：2012-07-21T12:55:54.807
> 
> 标签：jqgrid, webdriver

我正在为我的一个页面使用 JQGrid。感谢插件，就像一个魅力。

我正在使用 Webdriver 在 UI 上编写验收测试，我需要验证网格中显示的数据。

我的测试取决于以下内容

1.  查找要与行 id 匹配的行，我指定 id 值并以此进行匹配。我希望这应该是安全的，不应该改变，请验证。

2.  要查找特定单元格，我正在寻找具有 aria- describeby 属性的 td，其值为 'list_'

我想知道这是否可以安全使用，或者需要建议。

问候，

苏迪尔。

# asp.net-mvc - MVC自定义路由功能

> ID：11592377
> 
> 赞同：1
> 
> 时间：2012-07-21T12:57:09.440
> 
> 标签：asp.net-mvc, web-services, rest, asp.net-mvc-4, asp.net-web-api

这是我的另一个问题的更具体版本：[Restful MVC Web Api Inheritance](https://stackoverflow.com/questions/11338232/restful-mvc-web-api)，我希望对此的回答能帮助我回答这个问题。

我使用 ASP.NET web api，
我希望能够路由这样的东西：`[{object}/{id}]/{controller}/{id}`. 所以我想要一个可选的以“api端点”结尾
的对象数组。`/{id}`

我希望能够路由这些：
`/houses`
`/houses/3`
`suburbs/3/houses`
`council/5/suburbs/houses`
`city/8/council/suburbs/houses`
ETC

**到**

```
get(List<restRoute>parents, int id){
    ...
} 
```

restRoute 将是一个对象，其中对象的字符串和 id 的可选 int（或 guid 等）

有谁知道我可以从哪里开始？
**我不想单独路由每一个。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:36:38.050

我在 ASP.NET MVC 中从盒子路由也遇到了这样的问题。它用作公共路由的好方法，但对于自定义路由来说不是那么灵活。

在 WCF Web Api（CTP 版本中的 ASP.NET Web api）中使用了基于属性的路由。

我认为它更灵活，但不利的一点是 - 每个方法都应该有路由属性。

看看这篇博文：

[http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/](http://www.strathweb.com/2012/05/attribute-based-routing-in-asp-net-web-api/)

它描述了如何使用 ASP.NET Web Api 实现基于属性的路由。因为这种方法对于您可以映射到方法的路线更加灵活，所以它对您很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T11:43:46.433

您可以在您的路由中使用`{*anything}` [可变分段 URL](http://msdn.microsoft.com/en-us/library/cc668201.aspx#handling_a_variable_number_of_segments_in_a_url_pattern)模式并处理拆分并确定 url 的哪一部分对应于您的方法中的哪些数据位：

`Global.asax:`

```
routes.MapRoute(
            "Special", // name
            "{*allthethings}", // parameters
            new { controller = "Special", action = "Sauce" } // defaults
        ); 
```

`SpecialController:`

```
public ActionResult Sauce()
{
    string data = RouteData.Values["allthethings"].ToString();
    string[] items = data.Split('/');
    foreach (string item in items)
    {
        // do whatever you need to figure out which is what!
    }

    return View();
} 
```

如果您想更聪明一点，您可以创建自己的自定义 RouteHandler 来进行拆分。像[David Ebb 的 PK 路由处理程序](https://forums.asp.net/p/1281523/2457282.aspx#2457282)这样的东西可能会起到作用，通过一些定制来满足您在路由处理中的要求。您可以使用它来拆分“allthethings”参数并将其转换为您的`List<RestRoute>`格式，然后再将请求传递给控制器

# objective-c - if else 语句中的多个“if”变量

> ID：11592378
> 
> 赞同：-5
> 
> 时间：2012-07-21T12:58:01.593
> 
> 标签：objective-c, macos, cocoa, if-statement

我是 Objective-C 的新手。如何更改此代码以使其成为“用户名和密码”而不是“或密码”？

```
if ([name isEqualToString:@"haseo98"] || [pass isEqualToString:@"passwordtest"]){
    [_loginwindow setBackgroundColor:[NSColor redColor]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:00:15.850

或 --> ||

和 --> &&

```
if ([name isEqualToString:@"haseo98"] && [pass isEqualToString:@"passwordtest"]){
    [_loginwindow setBackgroundColor:[NSColor redColor]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T12:59:00.297

采用 ＆＆。就像在普通的 C 中一样。

# java - 在java中找到最小的浮点数

> ID：11592379
> 
> 赞同：0
> 
> 时间：2012-07-21T12:58:03.620
> 
> 标签：java, floating-point

那时我真的不明白，] 因为我的数学不太好。我已经四处寻找，但我真的找不到任何可以帮助我的东西。

我需要知道的是这些浮点数中的哪一个是最小的

一个。28.268E-5f
b. 0.0000002763E4f
c. 282479.9E-9f
d。0.2764E-2f

如果您不想给我答案，我不是要答案，而是更多让我自己弄清楚的方法。简单来说。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T13:03:39.830

这是基本的数学，并非特定于 Java。“E(some number)”位是“10 to power of (some number)”的缩写。

所以 1E-5 是 1 x 10^-5，即 0.00001（1 除以 10 5 倍）。

2E-5 将是 0.00002 等等。希望这足以让您弄清楚如何扩展您拥有的数字并查看哪个最小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T13:02:24.897

答案是 c) 282479.9E-9f

为了您的清楚，E 代表指数，即它后面的数字的 10 次方。所以 1.0E-2 = 0.01

```
28.268E-5f     = 0.00028268 
0.0000002763E4 = 0.002763 
282479.9E-9    = 0.0002824799
0.2764E-2      = 0.0027464 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-21T13:06:28.427

可能最安全的选择是创建一个包含您的值的 float[]，并使用数组排序算法将它们从最小到最大排序，从那里开始，您可以找到最小、最大、中等值。看一下这个。[http://www.java-examples.com/java-sort-float-array-example](http://www.java-examples.com/java-sort-float-array-example)

# php - PHP RegEx 和部分字符串

> ID：11592380
> 
> 赞同：0
> 
> 时间：2012-07-21T12:58:21.687
> 
> 标签：php, regex

我有字符串，例如：

```
bool dxDrawImage float posX, float posY, float width, float height, mixed image , float rotation = 0, float rotationCenterOffsetX = 0, float rotationCenterOffsetY = 0, int color = white, bool postGUI = false
bool dxUpdateScreenSource element screenSource, bool resampleNow =false 
```

我需要从中获取零件，例如：

```
bool dxDrawImage
float posX
float posY
... 
```

我写：

```
preg_match_all("/(bool|float|int)[a-zA-Z0-9\s=]+/", $txt, $ar); 
```

打印_r（$ar）：

```
Array ( [0] => Array ( [0] => bool dxDrawImage float posX [1] => float posY [2] => float width [3] => float height [4] => float rotation = 0 [5] => float rotationCenterOffsetX = 0 [6] => float rotationCenterOffsetY = 0 [7] => int color = white [8] => bool postGUI = false ) [1] => Array ( [0] => bool [1] => float [2] => float [3] => float [4] => float [5] => float [6] => float [7] => int [8] => bool ) ) 
```

为什么这个正则表达式捕获`bool dxDrawImage float posX`而不是

```
bool dxDrawImage
float posX 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:00:10.203

您可以在变量名中禁止空格：

```
preg_match_all("/(bool|float|int)\s+[a-zA-Z0-9=]+/", $txt, $ar); 
```

如果你将使用：

```
preg_match_all("/(bool|float|int)\s+[a-zA-Z0-9]+(\s+=\s+[chars,possible for value]+)?/", $txt, $ar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:09:49.647

```
preg_match_all("/(\b(?:bool|float|int|element)\s+.*?)(?=\b(?:bool|float|int|element|[,;\n\r]|$))/", $txt, $ar); 
print_r($ar[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:02:14.570

也许您可以使用不*贪婪*的标志。

```
preg_match_all("/(bool|float|int)[a-zA-Z0-9\s=]+/U", $txt, $ar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T15:59:39.407

将一个变量与另一个变量分隔的部分在您的字符串中有点不清楚。这使得将它们彼此分开有点困难。但是，您仍然可以相对简单地编写模式，因为它发生：

```
((?:bool|float|mixed|int|element) [a-zA-Z]+(?: = ?[a-z0-9]+)?)(?:\s?,\s?|\s|$)
|^-------- variable type -------^     |    ^--- optional ---^|^-- delimiter -^
|                                   name                     |
|                                                            |
`------------------ the interesting part --------------------´ 
```

这种模式适用于`preg_match_all`：

```
$pattern = '(((?:bool|float|mixed|int|element) [a-zA-Z]+(?: = ?[a-z0-9]+)?)(?:\s?,\s?|\s|$))';
$variables = array();
if ($r = preg_match_all($pattern, $subject, $matches)) {
    $variables = $matches[1];
}
print_r($variables); 
```

输出：

```
Array
(
    [0] => bool dxDrawImage
    [1] => float posX
    [2] => float posY
    [3] => float width
    [4] => float height
    [5] => mixed image
    [6] => float rotation = 0
    [7] => float rotationCenterOffsetX = 0
    [8] => float rotationCenterOffsetY = 0
    [9] => int color = white
    [10] => bool postGUI = false
    [11] => bool dxUpdateScreenSource
    [12] => element screenSource
    [13] => bool resampleNow =false
) 
```

另一种选择是仅使用分隔符并拆分字符串。然而，在分隔符之后是一个变量类型加空格（前瞻）：

```
$pattern = '((?:\s?,\s?|\s)(?=(?:bool|float|mixed|int|element)))';
$variables = preg_split($pattern, $subject);
print_r($variables); 
```

它为您提供与上述相同的结果。

# php - 试图将多表 sql 查询放入一个结果数组

> ID：11592385
> 
> 赞同：0
> 
> 时间：2012-07-21T12:59:08.567
> 
> 标签：php, mysql, sql, cakephp

我有四个表：关注者、用户、混音、歌曲我的查询给了我结果，但是每个结果都是针对混音中的一首歌，而不是针对一个混音的每个结果中的一组歌曲……任何帮助都会令人惊叹，我的 sql 技能不是最好的，我已经花了很多时间试图弄清楚这一点！

我目前的查询是：

```
SELECT followers.following_id, users.id, users.user_username, mixes.id, mixes.mix_created_date, mixes.mix_name,songs.song_artist
FROM followers, users, mixes,songs
WHERE followers.user_id = 46
AND users.id = followers.following_id
AND mixes.user_id = followers.following_id
AND mixes.id > 0
ORDER BY mixes.mix_created_date DESC
LIMIT 10 
```

当前结果是（通过 cakephp 自定义查询运行它）

```
Array
(
[0] => Array
    (
        [followers] => Array
            (
                [following_id] => 47
            )

        [users] => Array
            (
                [id] => 47
                [user_username] => someguy
            )

        [mixes] => Array
            (
                [id] => 45
                [mix_created_date] => 2012-07-21 2:42:17
                [mix_name] => this is a test
            )

        [songs] => Array
            (
                [song_artist] => Yo La Tengo
            )

    )

[1] => Array
    (
        [followers] => Array
            (
                [following_id] => 47
            )

        [users] => Array
            (
                [id] => 47
                [user_username] => someguy
            )

        [mixes] => Array
            (
                [id] => 45
                [mix_created_date] => 2012-07-21 2:42:17
                [mix_name] => this is a test
            )

        [songs] => Array
            (
                [song_artist] => Animal Collective
            )

    ) 
```

如您所见，混合ID是相同的，我试图让歌曲成为每个结果中的数组，例如：

```
Array
(
    [0] => Array
        (
        [followers] => Array
            (
                [following_id] => 47
            )

        [users] => Array
            (
                [id] => 47
                [user_username] => someguy
            )

        [mixes] => Array
            (
                [id] => 45
                [mix_created_date] => 2012-07-21 2:42:17
                [mix_name] => this is a test
            )

        [songs] => Array
            (
                [0]=>array(
                    ['song_artist'] => Yo La Tengo
                ),
                [1]=>array(
                    ['song_artist'] => Animal Collective
                )
            )

    ) 
```

真的希望这可以只用一个 sql 语句来完成！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:18:17.800

您可以使用 SQL join 命令一起进行多个查询。

用这个...

[sql_join](http://www.w3schools.com/sql/sql_join.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:46:49.053

首先注意：看起来您缺少条件。根据上面的查询，songs 表中的每首歌曲都将与所有可能的结果相连接。可能应该添加类似于以下内容的条件：（列名可以根据您的表而有所不同）：

```
...
and mix.song_id=songs.song_id
... 
```

至于你的问题：我不知道php，所以我只考虑mysql：我认为用mysql不可能做到这一点。mysql 返回结果集中的行，每行可以在每列中包含一个值。要在一列中添加一组值（歌曲名称），必须将它们连接起来（这是可能的：[我可以将多个 MySQL 行连接到一个字段中吗？](https://stackoverflow.com/questions/276927/can-i-concatenate-multiple-mysql-rows-into-one-field)），然后您将它们拆分回您的 php 脚本中。这不是一个好主意，因为您需要选择一个您知道永远不会出现在连接的值中的分隔符。因此，我认为最好从查询中删除歌曲表，并在获取混音 ID 后，运行第二个查询以获取该混音中的所有歌曲。

# java - 如何摆脱特定于 servletcontainer 的库 jsp-api.jar？

> ID：11592389
> 
> 赞同：2
> 
> 时间：2012-07-21T12:59:23.293
> 
> 标签：java, maven, servlets

我正面临[这里](https://stackoverflow.com/questions/7064269/the-method-getjspapplicationcontextservletcontext-is-undefined-for-the-type-js)描述的问题。我发现了对 的依赖`jsp-api.jar`，它实际上来自对 Joda-Time 的依赖：

```
<dependency>
    <groupId>joda-time</groupId>
    <artifactId>joda-time-jsptags</artifactId>
    <version>1.0.1</version>
    <exclusions>
        <exclusion>
            <artifactId>jsp-api</artifactId>
            <groupId>javax.servlet</groupId>
        </exclusion>
    </exclusions>
</dependency> 
```

我试图排除它（见上文），但应用程序无法编译。如何确保 jsp-api 未在我的`.war`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T13:05:17.943

不要排除此库，而是使用`provided`范围显式添加到您的依赖项：

```
<dependency>
    <groupId>joda-time</groupId>
    <artifactId>joda-time-jsptags</artifactId>
    <version>1.0.1</version>
</dependency>
<dependency>
    <artifactId>jsp-api</artifactId>
    <groupId>javax.servlet</groupId>
    <version>2.0</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:04:40.900

将适当版本的 JSP API 添加到项目的依赖项中，并带有`provided`范围。它将在编译时可用，但 Maven 会认为它是由运行时环境提供的，因此不会随应用程序一起提供。

# objective-c - NSArray 提取项目

> ID：11592398
> 
> 赞同：0
> 
> 时间：2012-07-21T13:00:01.810
> 
> 标签：objective-c, cocoa

我使用 NSPredicate 从 NSMutableArray 中提取数据：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", value];
NSArray *results = [array_to_search filteredArrayUsingPredicate:predicate]; 
```

当我使用：

```
NSLog(@"%@", results); 
```

我得到：

```
({pub_id = 102 "pub_name" = "some publisher" city = "Peshawar"}); 
```

我想提取所有 3 个项目的值`pub_id`, `pub_name`, `city`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:13:17.747

What's being returned is an array containing 1 object (which denoted by the curly braces `{}` means a dictionary). To extract each of the three components, you can do:

```
NSString *pub_id = [[results objectAtIndex:0] valueForKey:@"pub_id"];
NSString *pub_name = [[results objectAtIndex:0] valueForKey:@"pub_name"];
NSString *city = [[results objectAtIndex:0] valueForKey:@"city"]; 
```

Bear in mind that this solution is only suitable for the example you've provided. If the query ever returns more than 1 object in the array, you'll need to use enumeration/for loop to read the results.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:06:03.720

要将字典中的所有值放入数组中，请执行以下操作：

```
[dictionary allValues]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:13:58.960

我知道你想分别得到这三个对象，不是吗？如果我是对的：

```
NSLog(@"PUBID: %d \n PUBNAME: %@ \n CITY: %@", [[results objectAtIndex:0] intValue], [results objectAtIndex:1], [results objectAtIndex:2]); 
```

此代码应打印
PUBID: 102 PUBNAME: some publisher CITY: Peshawar。

所以你的结果来自

> [array_to_search filteredArrayUsingPredicate:predicate];

是另一个数组，您可以将它与 objectAtIndex 一起使用：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T15:21:09.987

您使用 prodicate 从数组中取出的对象显然是一个 NSDictionary。使用以下代码：

```
NSString *city = [[results objectAtIndex:0] valueForKey:@"city"]; 
```

等等。

# android - 尝试滚动列表视图时重新启动应用程序

> ID：11592402
> 
> 赞同：0
> 
> 时间：2012-07-21T13:00:33.933
> 
> 标签：android, listview

我正在开发使用 ListActivity 的程序。所以，当我向下滚动列表视图时，它会导致重新启动应用程序并从第一个活动开始。我的代码如下：

```
package com.daarkoob.food;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.Window;

import java.util.ArrayList;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Typeface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class FoodListActivity extends ListActivity {
    private ArrayList<Food> M_foods = new ArrayList<FoodListActivity.Food>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.foodlist);

        SQLiteDatabase sqliteDatabase = SQLiteDatabase.openOrCreateDatabase(
                "/data/data/" + this.getPackageName() + "/data.db", null);

        Cursor cursor = sqliteDatabase.rawQuery("SELECT * FROM FOOD", null);
        cursor.moveToFirst();

        while (!cursor.isAfterLast()) {
            M_foods.add(new Food(cursor.getString(2), cursor.getString(1)));
            cursor.moveToNext();
        }

        FoodAdapter adapter = new FoodAdapter(this);
        setListAdapter(adapter);

        cursor.close();
        sqliteDatabase.close();
    }

    public class Food {
        public Food(String foodName, String foodType) {
            this.M_foodName = foodName;
            this.M_foodType = foodType;
        }

        String M_foodName;
        String M_foodType;
    }

    public class FoodAdapter extends ArrayAdapter<Food> {
        private Context M_context = null;

        public FoodAdapter(Context context) {
            super(context, R.layout.foodlist_view_item, M_foods);
            this.M_context = context;
        }

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            if (convertView == null) {
                LayoutInflater layoutInflater = (LayoutInflater) M_context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                convertView = layoutInflater.inflate(
                        R.layout.foodlist_view_item, parent, false);
            }
            TextView textView = (TextView) convertView
                    .findViewById(R.id.foodlist_view_item_textview);

            textView.setText(M_foods.get(position).M_foodName);

            return convertView;
        }
    }

} 
```

而且`foodlist_view_item.xml`是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/border"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/foodlist_view_item_textview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:gravity="right|center_vertical"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@android:color/black"
        android:textStyle="bold" />

</RelativeLayout> 
```

如下`foodlist.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/foodlist_title_bar"
        android:layout_width="match_parent"
        android:layout_height="40dip"
        android:background="@drawable/textlines"
        android:gravity="right|center_vertical"
        android:text="@string/foodlist_titlebar_text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:cacheColorHint="@android:color/transparent"
        android:dividerHeight="1dip" >
    </ListView>

</LinearLayout> 
```

出了什么问题？为什么会出现重启？

提前致谢 ：）

# iphone - 从未调用过 LocationManager 的 didEnterRegion

> ID：11592406
> 
> 赞同：4
> 
> 时间：2012-07-21T13:01:43.820
> 
> 标签：iphone, ios, xcode, ipad, cllocationmanager

我厌倦了找到这个问题，但无法理解为什么会发生这种情况，即位置管理器的委托方法`didEnterRegion`或`didExitRegion`从未被调用过。我在我的 iPhone 上进行了测试，但它不起作用。请告诉我我错过了什么。我的源代码是：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // 应用程序启动后自定义的覆盖点。
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    manager = [[CLLocationManager alloc] init];
    manager.delegate = 自我；
    距离 = 100;
    坐标 = CLLocationCoordinate2DMake(24.004686, 74.554088);
    region=[[CLRegion alloc] initCircularRegionWithCenter:coord radius:dist identifier:@"emanuele"];
    [经理 startMonitoringForRegion:region desiredAccuracy:10];
    返回是；
}

- (void)locationManager:(CLLocationManager *)manager didEnterRegion:(CLRegion *)region{
    NSLog(@"输入区域。");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"知道了..." message:@"您已输入位置。" 委托：nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [警报显示]；
// [警报发布];
}
- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region {
    NSLog(@"didExitRegion");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"知道了..." message:@"您已退出该位置。" 委托：nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [警报显示]；
// [警报发布];
}

```

任何人都可以弄清楚有什么问题吗？我搜索了许多演示和源代码，但大多数都`didUpdateToLocation`以. 我也实施了，但它没有做的事情。请提供任何线索，为什么不调用这两种方法。或给我任何调用这些方法的链接，我没有找到这些方法的示例/来源。任何帮助将不胜感激。`didEnter``didExit``didFailWithError`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:14:00.413

您的头文件是否声明为 CLLocationManagerDelegate？

一旦设置了要监视的区域，您应该通过删除该代码元素进行测试，然后在启动时检查 UIApplicationLaunchOptionsLocationKey 键，如下所示：

```
 if ([launchOptions objectForKey:@"UIApplicationLaunchOptionsLocationKey"]){

        NSLog(@"UIApplicationLaunchOptionsLocationKey - fired");
        if(locman == nil){
            locman = [[CLLocationManager alloc]init];

        locman.delegate = self;
        locman.distanceFilter = kCLLocationAccuracyBest;
        }

    } 
```

然后将调用位置管理器委托，并且 didEnter 和 didExit 应该可以正常触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T10:31:27.540

中`viewDidLoad`，添加以下代码

```
self.beaconRegion.notifyOnEntry=YES;
self.beaconRegion.notifyOnExit=YES;
self.beaconRegion.notifyEntryStateOnDisplay=YES;
[self.locationManager startMonitoringForRegion:self.beaconRegion];
[self.locationManager requestStateForRegion:self.beaconRegion]; 
```

我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-29T22:49:08.617

只有在常规设置中启用后台应用程序刷新后，我才能获得 didEnterRegion 和 didExitRegion。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-11T10:43:58.910

你也试过`didDetermineState`吗？`didEnterRegion`并且`didExitRegion`仅在进入/退出时被调用，但据我所知，如果您在该地区并且实际上没有移动，`didDetermineState`会告诉您您当前是否在该地区。

# jquery - 在 JQUERY 中构建非常简单的微调器

> ID：11592407
> 
> 赞同：0
> 
> 时间：2012-07-21T13:01:51.260
> 
> 标签：jquery, spinner

我从谷歌获得了 Jquery 插件来检测 JQUERY 的“鼠标按住”事件

```
 $('document').ready(function(){
    $('#button').mousehold(function(){

        //Do something to implement a spinner

    });
   }); 
```

mousehold 工作正常，我如何不断增加文本框的值直到 mousehold 为真，我想实现一个简单的递增微调器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T06:36:25.347

您可以使用此代码使文本框值递增，直到鼠标按住按钮

```
$(document).ready(function(){
    var count = 0;
    $('#button').mousehold(function(){
        $('#spinnerText').val(++count);
    });
}); 
```

文本框如下 -

```
<input type="text" id="spinnerText"> 
```

# tortoisesvn - SVN结帐不工作

> ID：11592408
> 
> 赞同：1
> 
> 时间：2012-07-21T13:01:52.397
> 
> 标签：tortoisesvn

当我尝试使用 TortoiseSVN 结帐时，结帐对话框窗口挂起并且没有按钮响应。

我在 Windows 7 下并使用 VPN。在 Windows XP 上它可以工作。
我停用了防火墙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:08:28.873

我不知道它是否有帮助，但是当我的 VPN 断开与它相关的所有内容时，它会挂起......外壳，一切。也许您正在以某种方式失去联系？

# google-analytics - Google Analytics 事件无法显示

> ID：11592411
> 
> 赞同：2
> 
> 时间：2012-07-21T13:02:22.557
> 
> 标签：google-analytics

我正在尝试让 Google Analytics 在我的[博客上](http://whiletruecode.com)运行，但这些事件未能显示在我的帐户中。

部分问题是我正在使用新的异步代码，但大多数文档都与旧的同步版本有关。我已经阅读了一堆 SO 和博客文章，但不太明白我做错了什么。

有人提到您必须在您的网站配置文件中“激活”事件跟踪，但我找不到可以这样做的地方。

我最初将我的 Google Analytics（分析）代码放在一个名为 的外部文件中`ga.events.js`，该文件仍与我的网站链接。我附加了来自 jQuery 加载事件的事件：

```
$(function () {
  $('.rss').click(function() {
    trackEvent("engagement", "rss subscribe", "rss subscription link clicks");
  });

  function trackEvent(category, action, label) {
    _gaq.push(['_trackEvent', category, action, label]);
  }
}); 
```

但是我发现一个帖子说你不能链接到谷歌分析的外部文件，所以我也尝试了老式的`onclick`方法：

```
<a href="http://forms.aweber.com/form/08/728505808.htm" onclick="_gaq.push(['_trackEvent', 'Engagement', 'Click', 'Mailing list subscribe']);" target="_blank">email list</a> 
```

我放置了该`_target="blank"`属性，以防在用户离开页面之前请求没有完成。

在我的站点上的 Chrome 控制台中执行代码返回一个`0`，当我期待一个布尔值时：

```
_gaq.push(['_trackEvent', 'Engagement', 'click', 'RSS subscription link']) 
```

在每次测试后，我都等了 24 小时，看看事件跟踪是否不是实时的。

我还应该尝试什么？有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T16:41:09.170

弄清楚了。我不得不用大写`onclick`代替。等等，JavaScript 是区分大小写的语言吗？谁知道？`onClick``C`

我也有 GA 调用的语法不正确。

这是我的工作代码的样子：

```
<a href="http://forms.aweber.com/form/08/728505808.htm" onClick="_gaq.push(['_trackEvent', 'Engagement', 'Post footer click', 'Mailing list subscription',, false]);" target="_blank">email list</a> 
```

这是一个使用 jQuery 附加点击处理程序的版本：

```
$(function () {
  $('.rss').click(function() {
    trackEvent('Engagement', 'Sidebar link click', 'RSS feed subscription');
  });

  function trackEvent(category, action, label) {
    _gaq.push(['_trackEvent', category, action, label,, false]);
  }
}); 
```

# jquery - 如何使用 jQuery 在 DIV 结束之前添加内容？

> ID：11592414
> 
> 赞同：0
> 
> 时间：2012-07-21T13:03:02.497
> 
> 标签：jquery

我的代码中有以下 DIV：

```
<div class="controls-buttons">
  ....
  ....
</div> 
```

如何使用 jQuery 附加以下两个链接：

```
 <a id="level-1">1</a>
   <a id="level-12">12</a> 
```

到 DIV 中的代码的末尾？所以最终的结果是这样的：

```
<div class="controls-buttons">
   ...
   ...
   <a id="level-1">1</a>
   <a id="level-12">12</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:04:06.500

您可以使用以下[`.append()`](http://api.jquery.com/append/)方法：

```
$('.controls-buttons')
    .append('<a id="level-1">1</a>')
    .append('<a id="level-12">12</a>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:04:16.080

使用`append`功能：

```
$('div.controls-buttons').append('<a id="level-1">1</a><a id="level-12">12</a>'); 
```

# jquery - 带有 jquery 的 AJAX 上的 Javascript

> ID：11592416
> 
> 赞同：0
> 
> 时间：2012-07-21T13:03:47.500
> 
> 标签：jquery, ajax

-

我该如何处理它，让 Javascript 在 Ajax 调用之后正常工作？

在我的页面（wordpress）上 - 我在起始页上有所有帖子。我已经建立了一个过滤系统，用户可以使用它过滤特定内容之后的帖子——比如“最新的、查看最多的、突出显示的”

我使用下面的这个函数来使这个过滤器工作：

```
 <script type="text/javascript">
    $(document).ready(function(){
    $.ajaxSetup({cache:false});
    $("#new").click(function(){

        var post_id = $(this).attr("rel")
        $(".postbox_wrapper").html('<span class="filter_posts">
<img src="<?php bloginfo ('template_directory'); ?>/images/287.gif"></span>');
        $(".postbox_wrapper").load(jQuery(this).attr("href") + " .postbox_wrapper")
        return false;
    });
}); 
```

访问者点击“新建”按钮，帖子被过滤——只显示最新的帖子。但是我使用 Javascript 来统计 disqus、惰性图像加载器等的帖子计数。这些 JS 文件不会加载到过滤后的帖子上。（分类法.php）

这是例如一个 JS 文件，这对于使惰性加载器可用于过滤的帖子是必要的：

```
http://myurl/../plugins/bj-lazy-load/js/bjll.min.js?ver=0.4.0 
```

问题是：我如何在上面的函数中知道，在新加载的“过滤”页面上也使用 JS 脚本。

有点像这样：[Use Ajax() function in Jquery to load PART of an external page into div](https://stackoverflow.com/questions/1628065/use-ajax-function-in-jquery-to-load-part-of-an-external-page-into-div)

但我没有让它工作....

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:36:11.580

我不确定我是否理解你的问题。您是否尝试在 div 中加载特定内容后加载脚本？

如果是这样试试：

```
$(function(){
    $.ajaxSetup({cache:false});

    $("#new").click(function(){
        var $this = $(this);
        var $PostboxWrapper = $(".postbox_wrapper");

        var post_id = $this.attr("rel")

        //I think you want load something like a loading .gif in taht point. Right?
        $PostboxWrapper.html(
            "<span class='filter_posts'>" + 
            "   <img src='<?php bloginfo ('template_directory'); ?>/images/287.gif'>" +
            "</span>"
        );

        $(".postbox_wrapper").load(jQuery(this).attr("href"), function()
        {
            $.getScript(
                "http://yourUrl/../plugins/bj-lazy-load/js/bjll.min.js?ver=0.4.0",
                function(data, textStatus, jqxhr) {
                    console.log('Load was performed.');
                }
            );
        })
        return false;
    });
}); 
```

# javascript - fadeIn 动画在 IE 中不起作用（所有版本）

> ID：11592417
> 
> 赞同：0
> 
> 时间：2012-07-21T13:04:01.933
> 
> 标签：javascript, jquery, internet-explorer

fadeIn 动画在 IE 中无法用于以下编码。基本上这是一个下拉菜单，当我将光标悬停在父菜单上时，可以在 Chrome、Mozilla 和 Opera 中看到动画，但问题似乎只出现在 IE 上。

先感谢您。

```
 function mainmenu(){
$(" #nav ul ").css({display: "none"}); // Opera Fix
$(" #nav li").hover(function(){
        $(this).find('ul:first').css({visibility: "visible",display: "none"}).fadeIn(400);
        },function(){
        $(this).find('ul:first').css({visibility: "hidden"});
        });
}

 $(document).ready(function(){                  
    mainmenu();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:56:12.140

IE8 及更早版本对淡入淡出效果的支持极差。

IE9 要好得多，但如果您使用的是 IE8 或更早版本，您将始终不得不接受浏览器会限制您的操作。

`.fadeIn()`jQuery 在向开发人员隐藏其中的复杂性方面做得非常出色：对于任何浏览器，您需要知道的只是方法。但在幕后，IE6/7/8 总是以不同的方式工作。

您还没有向我们展示与该问题相关的 HTML 代码，但 IE8 的褪色问题之一是图像。如果被淡化的 HTML 包含图像，您很可能会在 IE8 及更早版本中遇到淡化问题。

有一些方法可以解决它，但它们很复杂。基本上，您需要独立淡化代码的每个部分。

希望有帮助。

# javascript - 如何找到拦截我的表单提交的内容？

> ID：11592422
> 
> 赞同：2
> 
> 时间：2012-07-21T13:04:27.923
> 
> 标签：javascript, jquery, ajax

我的`<form>`提交没有做任何事情，我认为这是因为该操作被一些 JQuery 代码拦截（还能是什么？）。在我相当复杂的 Web 应用程序中，我什至找不到哪一行代码正在拦截该操作——是的，我写了每一行代码，但我仍然不知道。

问题是：一般来说，有没有一种有效的方法来跟踪哪一段 JavaScript 代码正在拦截指定的操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T13:07:32.880

```
console.log($('form').data('events')); 
```

将为您提供给定 DOM 元素的附加事件列表。

你甚至可以得到它的源代码：

```
$.each($('form').data('events'), function () {
    $.each(this, function () {
        console.log(this['handler'].toString());
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T13:15:55.787

一种快速简便的方法是使用 Google Chrome 的开发者工具。

*   按`Ctrl`+ `Shift`+`I`
*   选择你的元素。
*   单击事件以查看可能正在“拦截”您的处理程序`submit`

![在此处输入图像描述](../Images/71bf6c3b9b7c9c5a6b63b68e52303ab1.png)

# android - 如何在android中将复选框与contactList链接？

> ID：11592427
> 
> 赞同：0
> 
> 时间：2012-07-21T13:04:54.870
> 
> 标签：android, listview, checkbox, contact

我想在android中显示带有多选复选框的联系人列表。我该如何实现这一点。任何人都可以提出任何示例或代码，那么它会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:34:41.320

您需要创建自己的联系人列表。

按照[此](http://www.vogella.com/articles/AndroidListView/article.html)[链接](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/)获取联系人并自定义列表视图。

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T12:14:40.280

终于得到了我的答案......

```
public class ShowContactActivity extends Activity {

    ArrayList<String> listname;
    ArrayList<String> list_no;
    Context context;
    LayoutInflater inflater;
    ListView lView ;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.show);

        lView = (ListView)findViewById(R.id.listView1);

        listname = new ArrayList<String>();
        list_no = new ArrayList<String>();

        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                null, null, null, null);
        if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(
                        cur.getColumnIndex(ContactsContract.Contacts._ID));

        String name = cur.getString(
                        cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

            Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                    new String[]{id}, null);
                    while (pCur.moveToNext()) {
                    // Do something with phones
                    String phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    listname.add(name); // Here I collect the name of contact person and phone number. 
                    list_no.add(phoneNo);

                    } 
                    pCur.close();           
            }
         }      

       }
        lView.setAdapter(new Contact(this));                
    }

    class Contact extends BaseAdapter
    {
        Context myContext;      

        public Contact(ShowContactActivity contactActivity) {
            // TODO Auto-generated constructor stub
            this.myContext = contactActivity;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return listname.size();
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return arg0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            if (convertView == null) {

                inflater = (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                convertView = inflater.inflate(R.layout.checkbox, null);
                final ViewHolder viewHolder = new ViewHolder();
                viewHolder.text_name = (TextView) convertView.findViewById(R.id.name);
                viewHolder.checkBox = (CheckBox) convertView
                        .findViewById(R.id.checkBox);   

                viewHolder.id = (TextView)convertView.findViewById(R.id.id);

                convertView.setTag(viewHolder);
            }

            final ViewHolder holder = (ViewHolder) convertView.getTag();
            holder.text_name.setText(list_no.get(position));
            holder.id.setText(listname.get(position));

            if(holder != null)
            {
                holder.checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                        // TODO Auto-generated method stub
        // Here We can do our rest of stuff             
                        Toast.makeText(myContext, "Selected item is :-"  +buttonView.getId(), Toast.LENGTH_LONG).show();
                    }
                });
            }
            return convertView;              
        }       
    }    
    class ViewHolder 
    {
        TextView text_name,id;
        CheckBox checkBox;
        //EditText search;
    } } 
```

# javascript - 使用 javascript 获取远程 url 的最后修改日期

> ID：11592429
> 
> 赞同：1
> 
> 时间：2012-07-21T13:05:02.523
> 
> 标签：javascript, html, url, google-chrome-extension

我正在尝试获取使用 javascript 更新远程 url 的最后日期。我目前想出了这个：

```
function getlastmod(url)
{
    var ifrm = document.createElement("IFRAME"); 
    ifrm.setAttribute("src", url);
    ifrm.setAttribute("id", "oIFRAME");
    ifrm.style.display = "none"; 
    var spanTag = document.createElement("span"); 
    spanTag.id = "oSpan"; 
    try 
    {
        var oIFrame = document.getElementById("oIFrame");
        var oSpan = document.getElementById("oSpan");
        oSpan.innerHTML = oIFrame.src + " last modified " +
        oIFrame.document.lastModified;
        outUpdate=oSpan;
    } 
    catch(E) {setTimeout("getlastmod();",50);}
} 
```

但是，此代码似乎总是将“outUpdate”更改为“未定义”。该代码应该将 url 内容加载到框架中，然后使用 document.lastModified 函数获取最后修改日期。

有想法该怎么解决这个吗？

谢谢！乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:45:52.353

为什么它在 try catch 语句中？你希望它抛出任何错误吗？因为你基本上依赖它。您是否为 outUpdate 设置初始值？它是否曾经进入 catch 语句？为什么你必须在这里函数getlastmod() 和getLastModified()？当您将其设置为：

```
var outUpdate = "init";
...

...
getlastmod("/");
console.log("outUpdate is: ", outUpdate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:46:22.050

您正在访问元素`oIFRAME`&`oSpan`在将它们添加到文档之前，您必须在`try`块之前添加以下 2 行：

```
document.body.appendChild(ifrm);
document.body.appendChild(spanTag); 
```

你的 id`iFrame`是**oIFRAME**而不是**oIFrame**，替换这一行：

```
var oIFrame = document.getElementById("oIFrame"); 
```

经过

```
var oIFrame = document.getElementById("oIFRAME"); 
```

`document`不是您的`iFrame`对象的属性，`contentDocument`是。替换此行

```
oIFrame.document.lastModified; 
```

经过

```
oIFrame.contentDocument.lastModified; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:56:14.790

如果您不打算显示该页面，您可以使用 xhr 为自己节省一些带宽。
这里有一些东西可以让你继续......

**清单.json**

```
{
  "name": "Get last modified header with XHR.",
  "version": "1.0",
  "permissions": [
    "tabs", "<all_urls>"
  ],
  "browser_action": {
      "default_title": "Get last modified header with XHR.",
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
  "manifest_version" : 2
} 
```

**popup.html**

```
<html>
  <head>
    <script src="popup.js"></script>
  </head>
  <body style='width : 400px;'>
    <div id="message">Getting File.....</div>
  </body>
</html> 
```

**popup.js**

```
var xhr = new XMLHttpRequest();

xhr.open('GET', 'http://www.w3schools.com/jsref/lastmodified.htm', true);

xhr.onerror = function() {
    var message = document.querySelector('#message');
    message.innerText = 'Error getting url';
}

xhr.onreadystatechange = function() {
    // readystate 2, headers recieved
    if (this.readyState == 2){
        var message = document.querySelector('#message');
        if (this.getResponseHeader("Last-Modified")){
            message.innerText = 'Got the headers\n';
            message.innerText += 'Last Last-Modified : ' + this.getResponseHeader("Last-Modified");
        } else {
            message.innerText = 'Got the headers\n';
            message.innerText += 'But there was no Last-Modified\n';
            // If the file doesnt exist your still going to get headers
            message.innerText += 'Or there was an error in getting the file';
        }
        // Make sure you access the headers before this abort, as they wont be available afterwards
        this.abort();
    }
}

xhr.send(); 
```

# c# - 隔离存储的困难

> ID：11592430
> 
> 赞同：0
> 
> 时间：2012-07-21T13:05:09.437
> 
> 标签：c#, xna

我试过这个教程：[http](http://wellroundedgeek.com/post/2011/01/25/Simple-XNA-Cross-Platform-Settings-Manager.aspx) : //wellroundedgeek.com/post/2011/01/25/Simple-XNA-Cross-Platform-Settings-Manager.aspx 但我很难调用 LoadSettings() 方法。我在 Game1 Initialize 中收到此错误消息：“WindowsGame22.AppSettings”不包含“LoadSettings”的定义，并且找不到接受“WindowsGame22.AppSettings”类型的第一个参数的扩展方法“LoadSettings”（您是否缺少使用指令还是程序集引用？）

```
GraphicsDeviceManager graphics;
SpriteBatch spriteBatch;
AppSettings Loading = new AppSettings();    
public Game1()
{
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
}  
protected override void Initialize()
{
        Loading = Loading.LoadSettings();
        base.Initialize();
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:12:34.940

根据该教程，您应该调用的类和方法的名称是`SettingsManager.LoadSettings`. `AppSettings`是静态`SettingsManager`类的静态成员，但它不包含您尝试调用的方法。

# python - 键盘中断不会停止我的解释器

> ID：11592433
> 
> 赞同：1
> 
> 时间：2012-07-21T13:05:13.397
> 
> 标签：python, terminal, osx-lion, infinite-loop

我正在测试一个日志解析器，它执行一个无限循环（故意），每次重复冷却 3 秒。

最终，我会将所有数据链接到 GUI 前端，以便在用户准备好解析时调用停止循环。

现在的（小）问题是，当我在终端（在 OSX 中）测试输出时，当我`CTRL`+`Z`取消进程时，我的活动监视器一直显示进程处于活动状态（可能是因为循环？）。

所以问题是：在终端中调用`CTRL`+时，如何调用（如果可能，没有额外的非本地库）来停止整个过程？`Z`当我退出终端时，所有 python 进程都会被杀死，但我想知道在终端仍在运行时如何执行它:)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T13:11:08.183

`CTRL`+`Z`发送到后台，`CTRL`+`C`是杀死。但是我在这里说的是 Linux，而 Mac 可能会有所不同。

# ruby-on-rails - 在 Rails 中，我如何动态地将 domain.com/12345 路由到 /fetch/12345？

> ID：11592436
> 
> 赞同：0
> 
> 时间：2012-07-21T13:05:29.863
> 
> 标签：ruby-on-rails, routes

我在理解 Ruby on Rails 中的路由如何工作时遇到了一点麻烦。

例如，我想要实现的是在域名之后直接访问所有 ID

```
domain.com/<- ID goes here-> 
```

路线

```
domain.com/fetch/<- entered ID -> 
```

任何朝着正确方向的推动将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:07:00.910

这可能是个坏主意；一旦你输入了这个通用路由，那么任何带有单个路径组件的无法识别的 url 最终都会被你的 fetch 方法处理。假设你理解并且同意有几种方法可以做到这一点，最直接的：

我假设你的路由中已经有 /fetch/:id，像这样在 ApplicationController#fetch 中处理 /fetch 请求：

```
namespace :fetch
  get '/:id' => 'application#fetch'
end 
```

然后你可以在你的路由底部添加一条规则，如下所示：

```
get '/:id' => 'application#fetch' 
```

这应该放在最底部，因为您不希望它覆盖任何更具体的单路径组件路由。

# c# - XNA 碰撞检测与游戏速度

> ID：11592440
> 
> 赞同：3
> 
> 时间：2012-07-21T13:06:39.923
> 
> 标签：c#, xna, collision-detection, xna-4.0

我用 C# 编码已经有几年了，现在决定尝试 XNA 框架来制作游戏。

在我开始在我非常简单的游戏中实现碰撞处理之前，它一直很棒。

我可以理解如何使用 BoundingBoxes 和 BoundingSpheres 进行碰撞检测，但是在查看了我的游戏中的刷新率之后，如果两个碰撞对象从未被检测为碰撞，我很快就担心了。

让我试着用一个例子来解释一下： - 如果一个角色用枪射击另一个角色。- 子弹直奔另一个角色。- 子弹在角色之前被渲染。- 由于子弹的高速度，它现在被渲染到角色的另一侧。

在这种情况下，子弹和角色永远不会发生碰撞，因为它们永远不会在碰撞状态下渲染。

那么如何确保在这种情况下检测到碰撞呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:16:33.410

对于非常快速移动的对象，常规方法在您描述的场景中失败。您需要检查的是子弹是否在两个连续游戏滴答之间的间隔内与任何项目发生碰撞。这称为[**连续碰撞检测**（这是一个相当相关的 SO 帖子）](https://stackoverflow.com/questions/1112676/continuous-collision-detection-between-two-moving-tetrahedra)。

您可以通过基本上**在当前位置的子弹绑定框的中间和旧位置的盒子的中间投射一条射线**来做到这一点，并检查它是否与任何其他块/球体*发生碰撞。*这是一个相当快的解决方案，如果你的子弹足够小，它应该可以正常工作。

为了更精确，您可以从当前弹框的每个角投射四个不同的所谓碰撞射线，到它们与前一个游戏时间对应的位置。请注意，在极少数情况下比子弹还小的高速物品，这也可能会失败。在这种情况下，您将需要更高级的碰撞检测系统。但这只是一个极端情况。

如果需要额外的精度，那么免费的 3D 物理库（例如[Bullet](http://bulletphysics.org/) ）可以代表一种解决方案。它甚至有[XNA 的绑定](http://code.google.com/p/bullet-xna/)！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:27:43.200

我认为您的问题在于与您的描述相匹配的隧道。

我推荐你为 XNA 使用 Box2D 物理引擎。它快速、简单，可以避免您在游戏中遇到任何碰撞问题。

查看[本手册](http://box2d.org/manual.pdf)第 4 页**连续碰撞**并检查 Box2D 如何处理隧道效应。

# perl - 以适当的方式分割线

> ID：11592442
> 
> 赞同：-2
> 
> 时间：2012-07-21T13:06:50.573
> 
> 标签：perl

```
if($line =~ /^HWI.*/)
{
    my @fields=split ":",$line;
    $id= $fields[5].":".$fields[6];
    print $fields[5]," ",$fields[6]; <>;
    $id =~ s/\s+//;
    $hash1{$id}=$line;
  }else{
    $hash1{$id}.= $line;
  } 
```

嗨，所有这些都是应该只打印由“：”分隔的第 5 和第 6 字段的脚本

我的输入是这样的：

```
HWI-1KL120:99:C0C9MACXX:6:1101:2105:2123    0   chr5    75483987    0   82M3I16M    *   0   0 
```

我只想要 2105 2123 i,e 5th 和 6th 字段，但这是从 2105 2123 开始打印整行

如何只获得那些字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:16:38.850

试试这个。

```
...
my @fields = split /[:\s]/, $line;
$id = qq{$fields[5]:$fields[6]};
print "$fields[5] $fields[6]";
$hash1{$id} = $line;
... 
```

这会拆分 on`:` **和**on `whitespace`，因此将字段条目 #6 分开（如果这在您的问题中是可行的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:05:11.977

正如其他人所说，问题在于您在冒号而不是空格上进行拆分。

不要使用`split`，而是像这样找到所有既不是冒号也不是空格的字符序列

```
 my @fields = $line =~ /([^:\s]+)/g; 
```

您的程序的其余部分应该可以正常工作，尽管`$id =~ s/\s+//`删除空格的行是不必要的，并且我对语句末尾的`$id`杂散感到困扰。这将读取并丢弃文件中的下一行，我认为这是故意的，但它应该单独在一行上，而不是像容易错过的那样隐藏起来。`<>``print`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:39:50.600

```
my @fields=split /:|\s+/, $line; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T13:16:33.777

`split`在这样的空格或冒号上：

```
perl -le '$line=qq(HWI-1KL120:99:C0C9MACXX:6:1101:2105:2123 0 chr5 75483987 0 82M3I16M * 0 0);@F=split /[\s:]/,$line;print join q( ),$F[5],$F[6]'
2105 2123 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T13:21:55.997

您在冒号上拆分行，并且 2123 之后没有冒号，所以`$fields[6]`（第七个字段，记住索引是从零开始的）是`2123 0 chr5 75483987 0 82M3I16M * 0 0`.

您最好在初始正则表达式中完成所有操作：

```
if($line =~ /^HWI[^:]*:[^:]*:[^:]*:[^:]*:[^:]*:(([^:]*):(\S*))/) {
  $id = $1;
  $id =~ s/\s+//;
  $hash{$id} = $line;
  print "$2 $3", <>;
} else {
  $hash{$id} .= $line;
} 
```

# c++ - 查找 2 个正方形是否共享一条边

> ID：11592443
> 
> 赞同：-2
> 
> 时间：2012-07-21T13:06:54.673
> 
> 标签：c++, math, geometry

我想知道我怎么能找到 2 个正方形是否共享同一侧。

我有 2 个信息：位置和大小

位置是正方形的左上角

```
+---+---+   
|   s   |   
|   s   |   
+---+---+ 
```

这里 s 是两个正方形的共享边

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:18:34.857

由于您缺少“方向”作为基准，我们将假设它们与轴正交。此时，需要检查水平或垂直边缘是否共线（这很简单，因为您无需担心方向），然后查看任何一个角是否落在另一个正方形的边内，反之亦然.

# c++ - 如何修改运行时加载的 DLL 的导入地址表

> ID：11592446
> 
> 赞同：7
> 
> 时间：2012-07-21T13:07:07.360
> 
> 标签：c++, winapi, hook, dll-injection, setwindowshookex

我想挂钩在运行时从加载的 DLL 调用的函数，我使用了“Windows Via C/C++”一书中的 CAPIHook 类（由 Install System Wide hook 完成的 DLL Injecting 和 Modify IAT 完成的挂钩）但是这个仅当可执行文件的 IAT 中存在 DLL 名称/符号时，代码才起作用。（即用于隐式 DLL 链接）

这是 DLL 代码：

```
 CAPIHook::CAPIHook(PSTR pszCalleeModName, PSTR pszFuncName, PROC pfnHook) {

   // Note: the function can be hooked only if the exporting module 
   //       is already loaded. A solution could be to store the function
   //       name as a member; then, in the hooked LoadLibrary* handlers, parse
   //       the list of CAPIHook instances, check if pszCalleeModName
   //       is the name of the loaded module to hook its export table and 
   //       re-hook the import tables of all loaded modules.

   m_pNext  = sm_pHead;    // The next node was at the head
   sm_pHead = this;        // This node is now at the head

   // Save information about this hooked function
   m_pszCalleeModName   = pszCalleeModName;
   m_pszFuncName        = pszFuncName;
   m_pfnHook            = pfnHook;
   m_pfnOrig            =  GetProcAddressRaw(GetModuleHandleA(pszCalleeModName), m_pszFuncName);

   // If function does not exit,... bye bye
   // This happens when the module is not already loaded
   if (m_pfnOrig == NULL)
   {
      wchar_t szPathname[MAX_PATH];
      GetModuleFileNameW(NULL, szPathname, _countof(szPathname));
      wchar_t sz[1024];
      StringCchPrintfW(sz, _countof(sz), 
         TEXT("[%4u - %s] impossible to find %S\r\n"), 
         GetCurrentProcessId(), szPathname, pszFuncName);
      OutputDebugString(sz);
      return;
   }

   // Hook this function in all currently loaded modules
   ReplaceIATEntryInAllMods(m_pszCalleeModName, m_pfnOrig, m_pfnHook);
} 
```

这是钩子函数：

```
HMODULE WINAPI CAPIHook::LoadLibraryA(PCSTR pszModulePath) {

   HMODULE hmod = ::LoadLibraryA(pszModulePath);
   FixupNewlyLoadedModule(hmod, 0);
   return(hmod);
}

HMODULE WINAPI CAPIHook::LoadLibraryW(PCWSTR pszModulePath) {

   HMODULE hmod = ::LoadLibraryW(pszModulePath);
   FixupNewlyLoadedModule(hmod, 0);
   return(hmod);
}

HMODULE WINAPI CAPIHook::LoadLibraryExA(PCSTR pszModulePath, 
   HANDLE hFile, DWORD dwFlags) {

   HMODULE hmod = ::LoadLibraryExA(pszModulePath, hFile, dwFlags);
   FixupNewlyLoadedModule(hmod, dwFlags);
   return(hmod);
}

HMODULE WINAPI CAPIHook::LoadLibraryExW(PCWSTR pszModulePath, 
   HANDLE hFile, DWORD dwFlags) {

   HMODULE hmod = ::LoadLibraryExW(pszModulePath, hFile, dwFlags);
   FixupNewlyLoadedModule(hmod, dwFlags);
   return(hmod);
} 
```

更换IAT的方法：

```
void CAPIHook::ReplaceIATEntryInOneMod(PCSTR pszCalleeModName, 
   PROC pfnCurrent, PROC pfnNew, HMODULE hmodCaller) {

   // Get the address of the module's import section
   ULONG ulSize;

   // An exception was triggered by Explorer (when browsing the content of 
   // a folder) into imagehlp.dll. It looks like one module was unloaded...
   // Maybe some threading problem: the list of modules from Toolhelp might 
   // not be accurate if FreeLibrary is called during the enumeration.
   PIMAGE_IMPORT_DESCRIPTOR pImportDesc = NULL;
   __try {
      pImportDesc = (PIMAGE_IMPORT_DESCRIPTOR) ImageDirectoryEntryToData(
         hmodCaller, TRUE, IMAGE_DIRECTORY_ENTRY_IMPORT, &ulSize);
   } 
   __except (InvalidReadExceptionFilter(GetExceptionInformation())) {
      // Nothing to do in here, thread continues to run normally
      // with NULL for pImportDesc 
   }

   if (pImportDesc == NULL)
      return;  // This module has no import section or is no longer loaded

   // Find the import descriptor containing references to callee's functions
   for (; pImportDesc->Name; pImportDesc++) {
      PSTR pszModName = (PSTR) ((PBYTE) hmodCaller + pImportDesc->Name);
      if (lstrcmpiA(pszModName, pszCalleeModName) == 0) {

         // Get caller's import address table (IAT) for the callee's functions
         PIMAGE_THUNK_DATA pThunk = (PIMAGE_THUNK_DATA) 
            ((PBYTE) hmodCaller + pImportDesc->FirstThunk);

         // Replace current function address with new function address
         for (; pThunk->u1.Function; pThunk++) {

            // Get the address of the function address
            PROC* ppfn = (PROC*) &pThunk->u1.Function;

            // Is this the function we're looking for?
            BOOL bFound = (*ppfn == pfnCurrent);
            if (bFound) {
               if (!WriteProcessMemory(GetCurrentProcess(), ppfn, &pfnNew, 
                    sizeof(pfnNew), NULL) && (ERROR_NOACCESS == GetLastError())) {
                  DWORD dwOldProtect;
                  if (VirtualProtect(ppfn, sizeof(pfnNew), PAGE_WRITECOPY, 
                     &dwOldProtect)) {

                     WriteProcessMemory(GetCurrentProcess(), ppfn, &pfnNew, 
                        sizeof(pfnNew), NULL);
                     VirtualProtect(ppfn, sizeof(pfnNew), dwOldProtect, 
                        &dwOldProtect);
                  }
               }
               return;  // We did it, get out
            }
         }
      }  // Each import section is parsed until the right entry is found and patched
   }
} 
```

作者添加了注释以添加此功能，但我不知道该怎么做

> 注意：只有在导出模块已经加载的情况下才能挂钩该函数。一种解决方案是将函数名称存储为成员；然后，在挂钩的 LoadLibrary* 处理程序中，解析 CAPIHook 实例列表，检查 pszCalleeModName 是否是已加载模块的名称以挂钩其导出表并重新挂钩所有已加载模块的导入表。

他也在书上写了这个，但我又不知道该怎么办

> 一种可能的解决方案是使用挂钩的 LoadLibrary* 函数来检测模块何时导出未修补的挂钩函数，然后执行两个操作：
> 
> 再次挂钩已加载模块的导入表，因为现在可以调用 GetProcAddress 并获取指向要挂钩的函数的原始实现的指针。请注意，函数的名称需要存储为类成员并在构造函数中设置。
> 
> 直接在导出模块的导出地址表中更新这个钩子函数，如 ReplaceEATEntryInOneMod 函数的实现所示。这样，所有调用挂钩函数的新模块都会调用我们的处理程序

我尝试在加载 DLL 后修改 IAT，但未调用我的挂钩函数

```
HMODULE WINAPI CAPIHook::LoadLibraryW(PCWSTR pszModulePath) {

   HMODULE hmod = ::LoadLibraryW(pszModulePath);

   if (StrCmpIW(pszModulePath, myDLLUnicodeName.c_str()) == 0 ) {
        PROC proc =  GetProcAddressRaw(GetModuleHandleA(myDLLName.c_str()), myFunctionName.c_str());

        if ( proc != NULL ) {
            for (CAPIHook* p = sm_pHead; p != NULL; p = p->m_pNext) {
                 if (StrCmpIA(p->m_pszCalleeModName, myDLLName.c_str()) == 0) {
                    MessageBox(NULL, L"This is the New Dynamic DLL", L"Test!", 0);
                    ReplaceIATEntryInAllMods(p->m_pszCalleeModName, proc , p->m_pfnHook);  
                 }
            }
        }
    }

   FixupNewlyLoadedModule(hmod, 0);
   return(hmod);
} 
```

那么，如何修改此代码以处理动态加载情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T14:24:18.753

我以前做过。你想要的是 EAT 挂钩而不是 IAT。此外，挂钩 ::LoadLibrary API 本身，以便您知道何时加载 DLL，并在加载后从 DLL 挂钩所请求的 api。

互联网上有一些关于如何执行此操作的示例。这是我刚刚找到的一个： [http ://board.cheat-project.com/showthread.php?t=10633](http://board.cheat-project.com/showthread.php?t=10633)

# cuda - 如何调整块和线程的 cuda 数量以获得最佳性能

> ID：11592450
> 
> 赞同：1
> 
> 时间：2012-07-21T13:08:31.093
> 
> 标签：cuda

我已经对块和线程的几个值进行了经验测试，使用特定值可以大大减少执行时间。

我看不出块和线程之间有什么区别。我认为可能是块中的线程具有特定的缓存内存，但对我来说这很模糊。目前，我将我的函数并行化为 N 个部分，这些部分分配在块/线程上。

我的目标可能是根据我必须使用的内存大小自动调整块和线程的数量。有可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T02:51:21.393

我相信自动调整块和线程大小是一个非常困难的问题。如果这很容易，CUDA 很可能会为您提供此功能。

原因是最佳配置取决于实现和您正在实现的算法类型。它需要分析和试验以获得最佳性能。

以下是您可以考虑的一些限制。

在内核中注册使用情况。占用您当前的实施。

注意：拥有更多线程并不等同于最佳性能。通过在您的应用程序中获得正确的占用率并让 GPU 内核始终保持忙碌状态，可以获得最佳性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T13:32:03.410

到目前为止，洪舟的回答很好。以下是更多细节：

在使用共享内存时，您可能需要首先考虑它，因为它是一种非常有限的资源，并且内核不太可能有非常特定的需求来限制那些控制并行性的许多变量。您要么有许多线程共享较大区域的块，要么有较少线程共享较小区域的块（在不断占用的情况下）。

如果您的代码可以使用每个多处理器低至 16KB 的共享内存，您可能希望选择更大的 (48KB) L1 缓存调用

```
cudaDeviceSetCacheConfig(cudaFuncCachePreferL1); 
```

此外，可以使用编译器选项为非本地全局访问禁用 L1 缓存，`-Xptxas=-dlcm=cg`以避免内核仔细访问全局内存时造成污染。

在担心基于占用率的最佳性能之前，您可能还想检查是否为 CUDA >= 4.1 关闭了设备调试支持（或给出了适当的优化选项，请阅读我在[此线程](https://stackoverflow.com/questions/12167926/forcing-cuda-to-use-register-for-a-variable/12185977#12185977)中的帖子以获取合适的编译器配置）。

现在我们有了内存配置，并且寄存器实际上被积极使用，我们可以分析不同占用率下的性能：

占用率越高（每个多处理器的扭曲），多处理器必须等待的可能性就越小（用于内存事务或数据依赖），但更多的线程必须共享相同的 L1 缓存、共享内存区域和寄存器文件（参见 CUDA 优化指南和[本演示文稿](http://www.cs.berkeley.edu/~volkov/volkov10-GTC.pdf)）。

ABI 可以为可变数量的寄存器生成代码（更多细节可以在我引用的线程中找到）。然而，在某些时候，会发生寄存器溢出。也就是说，寄存器值会临时存储在（相对较慢的、片外的）本地内存堆栈上。

在分析器中观察停顿原因、内存统计信息和算术吞吐量，同时改变启动边界和参数将帮助您找到合适的配置。

理论上可以从应用程序中找到最佳值，但是，让客户端代码针对不同的设备和启动参数进行最佳调整可能很重要，并且需要重新编译或为每个目标设备架构部署不同的内核变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:17:44.603

[我在这里](https://stackoverflow.com/questions/9985912/cuda-grid-block-thread-size)有一个很好的答案，总之，这是一个计算块和线程上的最佳分布的难题。

# android - Method call - onActivityResult vs DialogInterface.OnClickListener()

> ID：11592451
> 
> 赞同：0
> 
> 时间：2012-07-21T13:08:48.933
> 
> 标签：android, android-intent, android-activity, dialog, chronometer

I just published a game on the Play Store and am planning to make it look better and more intuitive, si I'm trying to replace the Android dialogs by mines.

When the user finish a level, I need my custom dialog to show and if the user clicks some buttons, the dialog (which is an activity with a custom theme that make it looks like a dialog) have to return an integer with `setResult(customResult, intent)` and then finish.

The problem is that when I receive the resultCode in the `onActivityResult()` of the activity that did `startActivityForResult(intentCustomDialog, 0)`, I call a custom method that restart the level or launch the next one depending on the result (used to know what button the user clicked). This methods should also restarts the Chronometer, but it does nothing !!!!!!!
On the other side when I use the android dialog and I put the `restart()` call in the onClickListener the chronometer is successfully restarted !?

So what am I missing ? Why the `restart()` call successfully restart the chronometer with an `onClickListener` of the android dialogs but not when I call it from the `onActivityResult()` method ?

Would be very helpful so I could make my own dialogs implementation and use the `onActivityResult()` or even call a custom `onDialogResult()` method to separate `startActivityForResult()` launches of custom dialogs activities and normal activities.

Thanks in advance.

**EDIT**

In my game class :

```
...
public static final int RESULT_RESTART = 8;
public static final int RESULT_NEXT = 9;
public static final int RESULT_MENU = 10;
...

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (resultCode) {
        case RESULT_MENU:
            back(null);
            break;
        case RESULT_NEXT:
            nextGrid();
            break;
        case RESULT_RESTART:
            restartGrid();
            break;
    }
} 
```

restartGrid() method :

```
public void restartGrid() {
    ...
    startChrono();
    ...
}

public void startChrono() {
    chrono.setBase(SystemClock.elapsedRealtime());
    chrono.start();
} 
```

Works perfectly from a `DialogInterface.OnClickListener()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:33:37.467

可以让它工作：

```
public void startChrono() {
    chrono.post(new Runnable() {
        @Override
        public void run() {
            chrono.setBase(SystemClock.elapsedRealtime());
            chrono.start();
        }
    });
} 
```

但我仍然不明白为什么我必须为计时器这样做，因为已着色的视图在没有使用 post 方法的情况下被正确重置......无论如何它都有效:)

# git - Why do I need to force git to sync my remote repository?

> ID：11592452
> 
> 赞同：3
> 
> 时间：2012-07-21T13:09:16.540
> 
> 标签：git, push

I have a local repository that I've cloned from my remote repository (all on one machine). I wanted to make sure that my remote repository picked the changes from my local repository so I did a `git push origin`.

I changed my working directory to my remote repository; the change had propagated to the log file (i.e. doing `git log` showed the change) but my actual working directory didn't show the change. I did a `git checkout HEAD` but the CWD still didn't change. It wasn't until I did a `git checkout --force HEAD` that the CWD synced up.

I suspect this is happening because the remote repository isn't a bare repository. So two questions:

1.  Is there a way that I can make the remote repository automatically sync (i.e. discard local changes) on a `git push`?
2.  Why do I need to to use `--force` to get it to sync up? What *should* be the process of syncing it up?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:03:37.057

如果您的推送（到非裸）回购成功，那是因为：

*   要么您推送了一个未在远程仓库中签出的分支（非裸远程仓库）
*   或被`receive.denyCurrentBranch`设置为`false`或`ignore`在[`git config`](http://git-scm.com/docs/git-config)

在后一种情况下，任何当前的本地修改都不会被该推送删除。
只有 a`git checkout --force`会将工作目录重置为`HEAD`.

确保两个非裸仓库之间同步的常用方法是添加一个中间裸仓库（您推送到该仓库）和一个 post-receive 挂钩，该挂钩将进入实际的远程仓库（非裸仓库）并*从*更新的裸回购。
常见的例子：[使用 Git 管理网站](http://toroid.org/ams/git-website-howto)，我用在：

*   "[推送到远程服务器和 Github](https://stackoverflow.com/questions/10891409/push-to-remote-server-and-github/10892791#10892791) "
*   “[推送后如何在遥控器上重置阶段性更改？](https://stackoverflow.com/questions/10086405/how-to-reset-staged-changes-on-the-remote-after-a-push/10087795#10087795) ”
*   “[如何只使用推送直接推送到远程服务器？](https://stackoverflow.com/questions/10905739/how-push-directly-to-remote-server-just-using-push/10905899#10905899) ”

拉动时，请确保取消设置`GIT_DIR`：请参阅“[从 git](https://stackoverflow.com/questions/3542854/calling-git-pull-from-a-git-post-update-hook/3542926#3542926)[挂钩](https://stackoverflow.com/questions/3542854/calling-git-pull-from-a-git-post-update-hook/3542926#3542926)[调用 '`git pull``post-update`](https://stackoverflow.com/questions/3542854/calling-git-pull-from-a-git-post-update-hook/3542926#3542926) ' ”

# c# - C# Parallel ForEach hold value

> ID：11592454
> 
> 赞同：1
> 
> 时间：2012-07-21T13:09:22.523
> 
> 标签：c#, foreach, parallel-processing, plinq

I am working on an app that searches for email addresses in Google search results' URLs. The problem is it needs to return the value it found in each page + the URL in which it found the email, to a datagridview with 2 columns: Email and URL. I am using Parallel.ForEach for this one but of course it returns random URLs and not the ones it really found the email on.

```
public static string htmlcon;  //htmlsource

public static List<string> emailList = new List<string>();

public static string Get(string url, bool proxy)
    {
        htmlcon = "";

        try
        {
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
            if (proxy)
                req.Proxy = new WebProxy(proxyIP + ":" + proxyPort);
            req.Method = "GET";
            req.UserAgent = Settings1.Default.UserAgent;
            if (Settings1.Default.EnableCookies == true)
            {
                CookieContainer cont = new CookieContainer();
                req.CookieContainer = cont;
            }
            WebResponse resp = req.GetResponse();
            StreamReader SR = new StreamReader(resp.GetResponseStream());
            htmlcon = SR.ReadToEnd();

            Thread.Sleep(400);
            resp.Close();
            SR.Close();
        }
        catch (Exception)
        {
            Thread.Sleep(500);
        }

        return htmlcon;

    }

  private void copyMails(string url)
    {    
        string emailPat = @"(\b[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}\b)";
        MatchCollection mailcol = Regex.Matches(htmlcon, emailPat, RegexOptions.Singleline);
        foreach (Match mailMatch in mailcol)
        {
            email = mailMatch.Groups[1].Value;
            if (!emailList.Contains(email))
            {
                emailList.Add(email);

                  Action dgeins = () => mailDataGrid.Rows.Insert(0, email, url);
                  mailDataGrid.BeginInvoke(dgeins);

             }
        }
     }

  private void SEbgWorker_DoWork(object sender, DoWorkEventArgs e)
 {
     //ALOT OF IRRELEVAMT STUFF BEING RUN

     Parallel.ForEach(allSElist.OfType<string>(), (s) =>
        {
            //Get URL
            Get(s, Settings1.Default.Proxyset);

            //match mails 1st page 
            copyMails(s);
            });

 } 
```

so this is it: I execute a Get request(where "s" is the URL from the list) and then execute copyMails(s) from the URL's html source. It uses regex to copy the emails. If I do it without parallel it returns the correct URL for each email in the datagridview. How can I do this parallel an still get the correct match in the datagridview?

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T13:14:07.853

您最好使用 PLINQ`Where`进行过滤（伪代码）：

```
var results = from i in input.AsParallel()
              let u = get the URL from i
              let d = get the data from u
              let v = try get the value from d
              where v is found
              select new {
                Url = u,
                Value = v
              }; 
```

这[`AsParallel`](http://msdn.microsoft.com/en-us/library/system.linq.parallelenumerable.asparallel.aspx)意味着使用了 TPL 的[LINQ 运算符](http://msdn.microsoft.com/en-us/library/system.linq.parallelenumerable.aspx)( `Select`, `Where`, ...) 实现。

* * *

***更新：现在有更多信息***

**首先**，您的代码中有许多问题：

1.  该变量`htmlcon`由`static`多个线程直接使用。这很可能是您的根本问题。只考虑两个输入值。第一个`Get`完成设置`htmlcon`，在该线程的调用`copyMails`开始之前，第二个线程`Get`完成其 HTML GET 并写入`htmlcon`。用`电子邮件

2.  该列表`emailList`也可以在不被多个线程锁定的情况下访问。.NET（和任何其他编程平台）中的大多数集合类型*都不*是线程安全的，您需要一次限制对单个线程的访问。

3.  您在每种方法中混合了各种活动。考虑应用单一责任原则。

4.  `Thread.Sleep`处理异常？！如果您无法处理异常（即解决条件），则什么也不做。在这种情况下，如果动作抛出然后`Parallel.Foreach`将抛出：直到你定义如何处理 HTML GET 失败。

三个建议：

1.  以我的经验，干净的代码（在某种程度上）使事情变得更容易：格式的细节并不重要（真正的大括号样式更好，但一致性是关键）。只需检查并清理格式就会出现问题 #1 和 #2。

2.  好命名。不要缩写超过几行代码使用的任何内容，除非这是该领域的重要术语。例如。`s`因为并行循环中的 action 参数实际上是一个 url，所以就这么称呼它。这种事情立即使代码更容易理解。

3.  想想电子邮件的正则表达式：有许多有效的电子邮件不匹配（例如，使用`+`提供多个逻辑地址：`exmaple+one@gamil.com`将被传递到`example@gmail.com`本地规则，然后可以用于本地规则）。此外，撇号 (" `'`") 是一个有效字符（并且已知的人因网站因错误而拒绝其地址而感到沮丧）。

**二**：比较直接的清理：

```
public static string Get(string url, bool proxy) {

    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
    if (proxy) {
        req.Proxy = new WebProxy(proxyIP + ":" + proxyPort);
    }
    req.Method = "GET";
    req.UserAgent = Settings1.Default.UserAgent;
    if (Settings1.Default.EnableCookies == true) {
        CookieContainer cont = new CookieContainer();
        req.CookieContainer = cont;
    }
    using (WebResponse resp = req.GetResponse())
    using (StreamReader SR = new StreamReader(resp.GetResponseStream())) {
        return SR.ReadToEnd();
    }

}

private static Regex emailMatcher = new Regex(@"(\b[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}\b)", RegexOptions.Singleline);

private static string[] ExtractEmails(string htmlContent) {    

    return emailMatcher.Matches(htmlContent).OfType<Match>
                       .Select(m => m.Groups[1].Value)
                       .Distinct()
                       .ToArray();
 }

private void SEbgWorker_DoWork(object sender, DoWorkEventArgs e) {

    Parallel.ForEach(allSElist.OfType<string>(), url => {
        var htmlContent = Get(url, Settings1.Default.Proxyset);
        var emails = ExtractEmails(htmlContent);

        foreach (var email in emails) {
            Action dgeins = () => mailDataGrid.Rows.Insert(0, email, url);
            mailDataGrid.BeginInvoke(dgeins);
        }
} 
```

在这里我有：

*   使用`using`语句来自动清理资源。
*   消除了所有可变的共享状态。
*   `Regex`被明确记录为具有线程安全的实例方法。所以我只需要一个实例。
*   消除噪音：无需将 URL 传递给，`ExtractEmails`因为提取不使用 URL。
*   `Get`现在只执行 HTML 获取，`ExtreactEMail`只是提取

**第三**：上面将阻塞线程上最慢的操作：HTML GET。

真正的并发好处是`HttpWebRequest.GetResponse`用它们的异步等价物替换和读取响应流。

使用`Task`将是 .NET 4 中的答案，但您需要直接使用`Stream`和编码自己，因为`StreamReader`不提供任何`BeginABC`/`EndABC`方法对。但是 .NET 4.5 快到了，所以应用一些`async`/ `await`：

*   中无事可做`ExtractEMails`。
*   `Get`现在是异步的，既不阻塞 HTTP GET 也不读取结果。
*   `SEbgWorker_DoWork`直接使用任务来避免混合太多不同的方式来使用 TPL。由于`Get`返回一个`Task<string>`可以简单的继续（当它没有失败时 - 除非您另有说明，否则`ContinueWith`只有在前一个任务成功完成时才会继续）：

这应该可以在 .NET 4.5 中使用，但是如果没有一组有效的 URL，我无法对其进行测试。

```
public static async Task<string> Get(string url, bool proxy) {

    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
    if (proxy) {
        req.Proxy = new WebProxy(proxyIP + ":" + proxyPort);
    }
    req.Method = "GET";
    req.UserAgent = Settings1.Default.UserAgent;
    if (Settings1.Default.EnableCookies == true) {
        CookieContainer cont = new CookieContainer();
        req.CookieContainer = cont;
    }
    using (WebResponse resp = await req.GetResponseAsync())
    using (StreamReader SR = new StreamReader(resp.GetResponseStream())) {
        return await SR.ReadToEndAsync();
    }

}

private static Regex emailMatcher = new Regex(@"(\b[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}\b)", RegexOptions.Singleline);

private static string[] ExtractEmails(string htmlContent) {    

    return emailMatcher.Matches(htmlContent).OfType<Match>
                       .Select(m => m.Groups[1].Value)
                       .Distinct()
                       .ToArray();
 }

private void SEbgWorker_DoWork(object sender, DoWorkEventArgs e) {

    tasks = allSElist.OfType<string>()
                     .Select(url => {
        return Get(url, Settings1.Default.Proxyset)
                .ContinueWith(htmlContentTask => {
                    // No TaskContinuationOptions, so know always OK here
                    var htmlContent = htmlContentTask.Result;
                    var emails = ExtractEmails(htmlContent);
                    foreach (var email in emails) {
                        // No InvokeAsync on WinForms, so do this the old way.
                        Action dgeins = () => mailDataGrid.Rows.Insert(0, email, url);
                        mailDataGrid.BeginInvoke(dgeins);
                    }
                });
    });

    tasks.WaitAll();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T13:20:14.993

> 公共静态字符串 htmlcon; //html源码
> 
> 公共静态列表 emailList = new List();

**问题是因为这些成员 htmlcon 和 emailList 是线程之间和迭代之间的共享资源。**Parallel.ForEach 中的每次迭代都是并行执行的。这就是为什么你有奇怪的行为。

如何解决问题：

*   修改您的代码并尝试在没有静态变量或共享状态的情况下实现它。

作为一个选项，从 Parallel.ForEach 更改为 TPL 任务链接，当您进行此更改时，一个并行操作的结果将成为另一个并行操作的输入数据，并且它是许多如何修改代码以避免共享状态的选项之一。

*   使用锁定或并发集合。您的 htmlcon 变量可能会变得易变，但使用 list 您应该锁定或并发集合。

更好的方法是修改您的代码以避免共享状态，以及如何做到这一点是基于您的实现的许多选项，而不仅仅是任务链。

# java - Java iterate through a set of classes

> ID：11592457
> 
> 赞同：2
> 
> 时间：2012-07-21T13:09:43.043
> 
> 标签：java, reflection

I have the following code:

```
Reflections reflections = new Reflections("com.mypackage.cmds");
Set<Class<? extends Command>> commandClasses = reflections.getSubTypesOf(Command.class); 
```

What it does is to store in a Set all classes descendant from Command class that are within the package com.mypackage.cmds.

Now what I want to do is to iterate or traverse through that returned set so each of those classes are loaded calling Class.fromName method. How can I achieve this?

Thanks a lot in advance,

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T13:11:12.783

You do it with a standard [for-each](http://docs.oracle.com/javase/6/docs/technotes/guides/language/foreach.html) loop:

```
for (Class clazz: commandClasses) {
    // operate on clazz
} 
```

This works for any Collection that implements the [`Iterator`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html) interface.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:14:37.943

你可以这样做：

```
Iterator i = commandClasses.iterator();
        while (i.hasNext()) {
            i.next(); //will return next object     
        } 
```

# python - How to upload date with bulkloader?

> ID：11592462
> 
> 赞同：1
> 
> 时间：2012-07-21T13:10:14.697
> 
> 标签：python, google-app-engine, bulkloader

I have the following code in **bulkloader.yaml**:

```
 - property: dismissal_date
    external_name: dismissal_date
    import_transform: "lambda x: None if x is None or x=='' else datetime.datetime.strptime(x, '%d.%m.%Y').date()" 
```

**models.py**:

```
class Employee(ndb.Model):
    dismissal_date = ndb.DateTimeProperty() 
```

and **upload file (csv)**:

```
last_name,first_name,middle_name,region,dismissal_date
Last name,First name,Middle name,22,13.01.2009 
```

But I am getting the following error:

```
BadValueError: Unsupported type for property dismissal_date: <type 'datetime.date'> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T18:44:47.020

以下实际上有效（这很奇怪，因为[文档](https://developers.google.com/appengine/docs/python/tools/uploadingdata)说我应该使用`.date()`）：

```
import_transform: "lambda x: None if x is None or x=='' else datetime.datetime.strptime(x, '%d.%m.%Y')" 
```

[transform.py 的来源](http://code.google.com/r/pklemenkov-document-editor/source/browse/thirdparty/google_appengine/google/appengine/ext/bulkload/transform.py)有助于确定这一点。

我已将属性类型更改为`DateProperty()`，但仍使用时间组件 ( `00:00:00`) 保存日期。

# c# - C# 拖放到桌面，并获取目录

> ID：11592464
> 
> 赞同：0
> 
> 时间：2012-07-21T13:10:33.223
> 
> 标签：c#, drag-and-drop

```
private void Form1_MouseDown(object sender, MouseEventArgs e)
{
    string[] files = new string[] { @"C:\directory\of\file\to\copy.txt" };
    this.DoDragDrop(new DataObject(DataFormats.FileDrop,files), DragDropEffects.Copy);
} 
```

这是我使用的代码。

嗯，效果不错，但是想获取复制文件的目录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:21:33.317

使用**System.IO的静态****Path**类，您可以提取目录的路径

 **```
Path.GetDirectoryName(@"C:\Users\JNK\Desktop\2136D.png"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:45:39.487

你得到的只是 DoDragDrop() 的返回值，以查看是否真的发生了下降。接收应用程序对该文件所做的事情是您无法找到的。可以是任何东西，包括根本不复制文件。一个随机的例子是仅在文本编辑器中打开文件，VS 和记事本的行为。

请注意您给出的示例如何仅从桌面拖动*，*而不是拖动*到*桌面。如果您需要知道用户想要复制文件的位置，请使用 FileBrowserDialog。**

# c# - TitleContainer.OpenStream FileNotFound in XNA

> ID：11592465
> 
> 赞同：0
> 
> 时间：2012-07-21T13:10:41.193
> 
> 标签：c#, xna, streaming, xna-4.0, game-engine

I am trying to load many images at runtime and assign each one to Texture2D object to be displayed usnig XNA and i use TitleContainer.OpenStream("Content/"+fileName+".png").When i run the project i face this exception:

An unhandled exception of type 'System.IO.FileNotFoundException' occurred in Microsoft.Xna.Framework.dll Additional information: Error loading "Content\Background.png". File not found.

Although all images are set in Content.

and this is the all code of the method that load image and create Texture2D object.

private static Texture2D LoadTextureStream(GraphicsDevice graphics, string loc) { Texture2D file = null; RenderTarget2D result = null;

```
 using (Stream titleStream = TitleContainer.OpenStream("Content/" + loc + ".png"))
        {
            file = Texture2D.FromStream(graphics, titleStream);
        }

        //Setup a render target to hold our final texture which will have premulitplied alpha values
        result = new RenderTarget2D(graphics, file.Width, file.Height);

        graphics.SetRenderTarget(result);
        graphics.Clear(Color.Black);

        //Multiply each color by the source alpha, and write in just the color values into the final texture
        if (blendColor == null)
        {
            blendColor = new BlendState();
            blendColor.ColorWriteChannels = ColorWriteChannels.Red | ColorWriteChannels.Green | ColorWriteChannels.Blue;

            blendColor.AlphaDestinationBlend = Blend.Zero;
            blendColor.ColorDestinationBlend = Blend.Zero;

            blendColor.AlphaSourceBlend = Blend.SourceAlpha;
            blendColor.ColorSourceBlend = Blend.SourceAlpha;
        }

        SpriteBatch spriteBatch = new SpriteBatch(graphics);
        spriteBatch.Begin(SpriteSortMode.Immediate, blendColor);
        spriteBatch.Draw(file, file.Bounds, Color.White);
        spriteBatch.End();

        //Now copy over the alpha values from the PNG source texture to the final one, without multiplying them
        if (blendAlpha == null)
        {
            blendAlpha = new BlendState();
            blendAlpha.ColorWriteChannels = ColorWriteChannels.Alpha;

            blendAlpha.AlphaDestinationBlend = Blend.Zero;
            blendAlpha.ColorDestinationBlend = Blend.Zero;

            blendAlpha.AlphaSourceBlend = Blend.One;
            blendAlpha.ColorSourceBlend = Blend.One;
        }

        spriteBatch.Begin(SpriteSortMode.Immediate, blendAlpha);
        spriteBatch.Draw(file, file.Bounds, Color.White);
        spriteBatch.End();

        //Release the GPU back to drawing to the screen
        graphics.SetRenderTarget(null);

        return result as Texture2D;
    } 
```

Any help ?? (Note: iam working with XNA 4.0 on windows 7)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:21:31.003

首先，查看您的 bin 文件夹并确保该文件在运行时确实存在。如果没有，请右键单击有问题的内容项，并确保将构建操作设置为“*复制到输出目录*”或“*如果更新则复制*”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:41:15.623

我可能错了，但我认为问题出在：

```
using (Stream titleStream = TitleContainer.OpenStream("Content/" + loc + ".png")) 
```

尝试在没有“.png”短语的情况下使用它并检查“Content\\” - 任何一个或两个都应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T16:56:36.473

（Xbox360）对我来说，解决方案是“内容”部分的前缀。

```
 Stream soundfile = TitleContainer.OpenStream(@"Sound/explosion.wav"); //<- FAIL
   boomEffect = SoundEffect.FromStream(soundfile);
   soundEffectInstance = boomEffect.CreateInstance(); 
```

然而

```
 Stream soundfile = TitleContainer.OpenStream(@"Content/Sound/explosion.wav"); //<- Win
   boomEffect = SoundEffect.FromStream(soundfile);
   soundEffectInstance = boomEffect.CreateInstance(); 
```

澄清：文件“explosion.wav”在解决方案资源管理器的树视图中的“声音”中可见，而不是“内容/声音”，“内容”必须反映板载运行时存储文件夹分类。

# javascript - onclick of cell css make that block yellow

> ID：11592466
> 
> 赞同：0
> 
> 时间：2012-07-21T13:10:52.440
> 
> 标签：javascript, jquery, asp.net, html

.[see js bin](http://jsbin.com/icizem/2/edit)

if i drag on minute 15 to 45 then name john having csstdgreen then i have i to make john block yellow. if i drag on minute 15 to 30 then jary having csstdgreen then i have i to make jary block yellow. i drag on minute 15 then jack having csstdgreen then i have i to make jack block yellow. only one at a time.How can i do that with jquery

i have shown an exmple here i have to do like this [see demo](http://jsbin.com/eritud/edit#javascript,html,live)

```
$(".csstdgreen").live('mousedown', function (e)
                {
                    //This line gets the index of the first clicked row.
                    lastRow = $(this).closest("tr")[0].rowIndex;
                    $(this).removeClass("csstdgreen").addClass("csstdyellow");
                    e.preventDefault();
                    return false;
                });
                $(document).live('mouseup', function () { flag = false; });
                $(".csstdgreen").live('mouseenter', function (e)
                {
                    // Compares with the last and next row index.
                    currentRow = $(this).closest("tr")[0].rowIndex;
                    if (lastRow == currentRow || lastRow == currentRow - 1 || lastRow == currentRow + 1)
                    {
                        lastRow = $(this).closest("tr")[0].rowIndex;
                    } else
                        return;

                    if (flag)
                    {
                        $(this).children(":not(:first)").addClass("csstdyellow");
                        e.preventDefault();
                        flag = false;
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:23:34.217

所以你正在寻找这样的东西？

```
$('td').click(function() { // <-- on a td click
    if ($(this).hasClass('csstdgreen')) { // <-- check if current clicked element has this class
        $(this).css('background-color', 'yellow'); // <-- if it does the change background color
    }
});​ 
```

另外不要忘记将您的代码包装在一个 document.ready 函数中，以便它在尝试在 dom 中查找您的元素之前等待 dom 加载。 [http://jsfiddle.net/64Byz/](http://jsfiddle.net/64Byz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:28:19.987

你的代码是

```
<script type="text/javascript">
$(document).ready(function(){
    $(".csstr").click(function(){ 
        $(".csstr").removeClass('csstdyellow').addClass('csstdgreen');
        var current_cls = $(this).attr('rel');      
        $('.' + current_cls + ' > td').removeClass('csstdgreen');
        $('.' + current_cls).addClass('csstdyellow');
    });
});
</script> 
```

我对您的 html 进行了一些更改以实现此目的。我为我们想要更改的每一行添加了额外的属性“rel”和额外的类。它强制“rel”值和添加的类名应该相同。例如，您想更改与“john”相关的所有行的颜色，那么您必须添加 rel="cls1" 和 class="cls1"（如果行中已经添加了另一个类，则添加新类，如 class="csstr cls1 “）在约翰的每一行。

```
<table border="1">
<tr class="csstr cls1" rel="cls1" >
<td class="csstdgreen">
    15

</td>
<td class="csstdgreen" rowspan="3">
    john
</td>
</tr>
<tr class="csstr cls1" rel="cls1">
<td class="csstdgreen">
    30
</td>
</tr>
<tr class="csstr cls1" rel="cls1">
<td class="csstdgreen "> 
    45
</td>
</tr>
    <tr  class="csstr cls2" rel="cls2">
      <td class="csstdgreen ">15</td>
      <td class="csstdgreen " rowspan="2">Jary</td>
    </tr>
      <tr class="csstr cls2" rel="cls2">
      <td class="csstdgreen ">30</td>      
    </tr>
     <tr class="csstr cls3" rel="cls3">
      <td class="csstdgreen">15</td>
      <td class="csstdgreen" rowspan="1">Jack</td>
    </tr>

</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:56:34.010

我更改了您的 HTML，因为根据您给定的 HTML，我们无法实现您想要的...

我把javascript写成

```
 $(document).ready(function()
              {

                $('.csstdgreen').click(function(){
                 $('.csstdgreen').removeClass('csstdyellow'); 
                  $(this).closest('table').find('td').addClass("csstdyellow");
               });
       }); 
```

并且您使用 HTML 更新的代码已启用

[http://jsbin.com/icaluy/36/edit#source](http://jsbin.com/icaluy/36/edit#source)

如果您想在鼠标悬停时发生这种情况，请按照此 jsBin

[http://jsbin.com/icaluy/37/edit#preview](http://jsbin.com/icaluy/37/edit#preview)

# verification - Limits of SMT solvers

> ID：11592472
> 
> 赞同：21
> 
> 时间：2012-07-21T13:11:14.937
> 
> 标签：verification, smt, formal-methods, theorem-proving

Traditionally most work with computational logic was either propositional, in which case you used a SAT (boolean satisfiability) solver, or first-order, in which case you used a first-order theorem prover.

In recent years, a lot of progress has been made on SMT (satisfiability modulo theory) solvers, which basically augment propositional logic with theories of arithmetic etc.; John Rushby of SRI International goes so far as to call them a disruptive technology.

What are the most important practical examples of problems that can be handled in first-order logic but still can't be handled by SMT? Most particularly, what sort of problems arise that can't be handled by SMT in the domain of software verification?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-16T01:56:03.733

SMT 求解器并不比 SAT 求解器强大。对于 SAT 中的相同问题，它们仍将在指数时间内运行或不完整。SMT 的优势在于，许多在 SMT 中显而易见的事情可能需要很长时间才能让等效的 sat 求解器重新发现。

因此，以软件验证为例，如果您使用 QF BV（位向量的无量词理论）SMT 求解器，则 SMT 求解器将知道 (a+b = b+a) 在字级别上，而SAT 求解器可能需要很长时间才能证明使用单个布尔值。

因此，对于软件验证，您可以轻松地在软件验证中遇到任何 SMT 或 SAT 求解器都难以解决的问题。

首先，必须在 QF BV 中展开循环，这意味着实际上您必须限制求解器检查的内容。如果允许量词，它就会变成一个 PSPACE 完全问题，而不仅仅是 NP 完全问题。

其次，一般认为很难的问题在 QF BV 中很容易编码。例如，您可以编写如下程序：

```
void run(int64_t a,int64_t b)
{
  a * b == <some large semiprime>;

  assert (false);
} 
```

当然，现在 SMT 求解器很容易证明 assert(false) 会发生，但它必须提供一个反例，它会给你输入`a,b`。如果您设置 `<some large number>`为 RSA 半素数，那么您只需反转乘法……也称为整数分解！因此，这对于任何 SMT 求解器都可能是困难的，并且表明软件验证通常是一个难题（除非 P=NP，或者至少整数分解变得容易）。这样的 SMT 求解器只是 SAT 求解器的一个优势，它用一种更易于编写和更易于推理的语言来修饰事物。

解决更高级理论的 SMT 求解器必然是不完整的，甚至比 SAT 求解器还要慢，因为它们试图解决更难的问题。

也可以看看：

*   有趣的是，[Beaver SMT 求解器](http://uclid.eecs.berkeley.edu/jha/beaver-dist/beaver.html)将 QF BV 转换为 CNF，并且可以使用 SAT 求解器作为后端。
*   [Klee](http://klee.llvm.org/)可以将程序编译为[LLVM](http://llvm.org/) IR（中间表示），并检查错误，并找到断言的反例等。如果发现错误，它可以给出正确性的反例（它会给你输入这将重现错误）。

# python - Decoding a Unicode string; what does that mean and how can I avoid it?

> ID：11592476
> 
> 赞同：1
> 
> 时间：2012-07-21T13:12:08.197
> 
> 标签：python, unicode, character-encoding, python-3.x, python-2.x

I'm looking for a simple way of converting a user-supplied string to UTF-8\. It doesn't have to be very smart; it should handle all ASCII byte strings and all Unicode strings (2.x `unicode`, 3.x `str`).

Since `unicode` is gone in 3.x and `str` changed meaning, I thought it might be a good idea to check for the presence of a `decode` method and call that without arguments to let Python figure out what to do based on the locale, instead of doing `isinstance` checks. Turns out that's a not a good idea at all:

```
>>> u"één"
u'\xe9\xe9n'
>>> u"één".decode()
Traceback (most recent call last):
  File "<ipython-input-36-85c1b388bd1b>", line 1, in <module>
    u"één".decode()
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128) 
```

My question is two-fold:

1.  Why is there a `unicode.decode` method at all? I thought Unicode strings were considered "not encoded". This looks like a sure way of getting doubly encoded strings.
2.  How do I tackle this problem in a way that is forward-compatible with Python 3?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T13:14:17.883

谈论“解码”一个unicode字符串是没有用的。您想将其*编码*为字节。`unicode.decode`仅出于历史原因而存在；它的语义是没有意义的。因此，它已在 Python 3 中删除。

**然而**，`encode`/`decode`语义历来被扩展为包括（字符）字符串到字符串或字节到字节的编码，例如 rot13 或 bzip2。在 Python 3.1 中，这些伪编码被删除，并[在 Python 3.2 中重新引入](http://docs.python.org/dev/library/codecs.html#standard-encodings)。

通常，您应该设计您的接口，以便它们接受字符或字节字符串。接受两者的接口（出于向后兼容性以外的原因）是一种代码味道，难以测试，容易出现错误（如果有人通过 UTF-16 字节怎么办？）并且首先具有可疑的语义。

如果您必须有一个接受字符和字节字符串的接口，您可以检查`decode`Python 3 中是否存在该方法。如果您希望您的代码也可以在 2.x 中工作，[则必须使用`isinstance`](http://farmdev.com/talks/unicode/#decode-early).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:26:22.620

str 和 unicode 之间的转换并不是编码/解码的唯一目的。还有编解码器。

例如（在 Python 2 中）：

```
>>> u'123'.encode('hex')
'313233'
>>> '313233'.decode('hex')
'123'
>>> u'313233'.decode('hex')
'123' 
```

我对 Python 3 不够熟悉，无法说出这是否适用于那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T17:38:19.260

1.  Unicode 对象有一个 decode() 方法，因为它继承自 basestring 并且 basestring 有一个，所以 Unicdode 也必须有一个。

2.  在 Python 2 或 Python 3 中，您通过从不解码 Unicode 字符串来解决这个问题。正如您所注意到的，这样做没有任何意义。所以不要。

那么如何在 Python 2 和 Python 3 的兼容等待中处理这个问题呢？好吧，您不要将字符串用于二进制数据，而是使用`bytes`. 他们有一个适用于所有 Python 版本的 decode() 方法。

有关这方面的更多信息，请参阅[http://python3porting.com/noconv.html](http://python3porting.com/noconv.html)和[http://regebro.wordpress.com/2011/03/23/unconfusing-unicode-what-is-unicode/](http://regebro.wordpress.com/2011/03/23/unconfusing-unicode-what-is-unicode/)

# objective-c - malloc 48 bytes Memory leak in allocating the memory not getting any solution

> ID：11592480
> 
> 赞同：2
> 
> 时间：2012-07-21T13:12:57.603
> 
> 标签：objective-c, ios, memory-management, memory-leaks

i am working with an application in which i am receiving the memory allocation leak like malloc 48 bytes in strdup frame and i have searched alot but did not find any solution and i am attaching a screenshot of instruments memory leak. Please help me if any one knows solution and my xcode version is 4.3.3 and ios 5.1.1.![image of instruments](../Images/87527adb520de738eeb3329171b943fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:08:51.107

这是目前 iOS 中存在的与 UIScrollViews 相关的已知错误。目前您所能做的就是等待系统更新并希望它得到修复。

以下是更多信息： http: [//openradar.appspot.com/11081198](http://openradar.appspot.com/11081198)

# javascript - 将 ID 分配给没有属性的代码

> ID：11592484
> 
> 赞同：0
> 
> 时间：2012-07-21T13:13:35.793
> 
> 标签：javascript, html

我可以为 html 代码分配一个 id，而不给它任何特殊属性吗？具体来说，我想要的是能够使用 JS 更改我的 html 代码。

我发现我可以在 html 中使用它：

```
abc <b id="myID">def</b> 
```

然后在 JS 中：

```
document.getElementById('myID').innerHTML = "123"; 
```

但这会导致我的文字变粗。我尝试编写以下内容，但它不起作用：

```
abc <id="myID">def</id> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:15:31.110

你可以使用一个div：

```
<div id="myID">def</div> 
```

或跨度：

```
<span id="myID">def</span> 
```

进而：

```
document.getElementById('myID').innerHTML = "123"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:30:55.383

你的JS没有问题，**标签代表粗体。所以如果你不希望你的文本出现 bols 那么不要把它放在标签中。使用或**

**如果您希望它与前面的文本内联显示，那么只需将其放在 .**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:31:07.617

使用的问题`<b>`是它意味着“粗体文本”，因此默认情况下会导致内容为粗体（有时在不能使用粗体时由浏览器的其他突出显示来模拟）。尽管您可以通过在 CSS 中设置来覆盖`font-weight: normal`它，但最好使用对默认呈现和功能没有影响或对它们有*可接受*影响的标记。

中性的、语义上为空的内联标记元素是`<span>`，白色它的块级对应元素是`<div>`。实际上，当不使用属性时，该`<a>`元素在语义上也是空的内联标记。`href`**

# css - 在 Chrome 或 Safari 中无法正确定位，但在 Firefox 中完美运行

> ID：11592485
> 
> 赞同：3
> 
> 时间：2012-07-21T13:13:37.180
> 
> 标签：css, firefox, google-chrome, safari, positioning

我正在重做我的网站设计，此时我在页面的一侧有一个弹出式订阅 div。[你可以在这里](http://freedomrequireswings-portal.blogspot.fr/)看到我的草稿：

它在 Firefox 中完美运行，但在 Chrome 和 Safari 中却有点突出。

这是我的 HTML：

```
<div id='Subscribe' style='z-index:10;position:fixed; top:376px; right:-231px; padding-left: 15px;display: inline-block;'>
<table background='http://4.bp.blogspot.com/-gVytZ17cmL0/UAVf1PGc_tI/AAAAAAAABjM/rFNd4dqfwF4/s1600/background.PNG' cellpadding='5' cellspacing='0' id='side' style='border-left: 10px solid #565656; box-shadow: 0px 0px 5px #898989;' width='35px'>
<tbody>
<tr style='box-shadow: 0 1px 4px -3px #5E5E5E;'>
<td>
<font style='font-family:Lobster; color:#1bb4c6;font-size:18px;'>Subscribe</font><br/>
<form action='http://feedburner.google.com/fb/a/mailverify' id='search-form1' method='post' onsubmit='window.open(&apos;http://feedburner.google.com/fb/a/mailverify?uri=freedomrequireswings&apos;, &apos;popupwindow&apos;, &apos;scrollbars=yes,width=550,height=520&apos;);return true' style='border:0px solid #ccc;text-align:left;margin-top:-20px;' target='popupwindow'>
<p>
<table>
<tr>
<td>
<input name='email' onblur='if(this.value==&apos;&apos;)this.value=this.defaultValue;' onfocus='if(this.value==this.defaultValue)this.value=&apos;&apos;;' style='box-shadow: 2px 2px 2px #121212; font-family:Segoe UI, Yanone Kaffeesatz, trebuchet MS;height:30px;padding-left:5px;padding-right:5px;font-size:16px;color:#636363;' type='text' value='email@example.com' vinput=''/>
<input name='uri' type='hidden' value='FreedomRequiresWings'/>
<input name='loc' type='hidden' value='en_US'/>
</td>
<td>
<div style='padding-top:3px;'>
<input src='http://1.bp.blogspot.com/-4zEgvyYwgH0/UAnajptLwxI/AAAAAAAABkw/lI_MFSWY1P8/s1600/sub%252B.png' style='height:49px !important; width:49px !important;' type='image'/>
</div>
</td>
</tr>
</table>
</p>
</form>
</td>
</tr>
</tbody>
</table>
</div> 
```

和CSS：

```
#Subscribe:hover {
transform: translate(-231px,0);
-ms-transform: translate(-231px,0);
-webkit-transform: translate(-231px,0);
-o-transform: translate(-231px,0);
-moz-transform: translate(-231px,0);
transition: all 0.2s ease-in;
-webkit-transition: all 0.2s ease-in; 
-moz-transition: all 0.2s ease-in; 
-o-transition: all 0.2s ease-in; 
-ms-transition: all 0.2s ease-in; 
position:fixed; 
display: inline-block;
}

#Subscribe {
transition: all 1s ease-in-out;
-webkit-transition: all 1s ease-in-out; 
-moz-transition: all 1s ease-in-out; 
-o-transition: all 1s ease-in-out; 
-ms-transition: all 1s ease-in-out; 
display: inline-block;
}

#search-form1 input {
 width: 150px;
 -moz-transition: width 0.5s ease-out;
 -webkit-transition: width 0.5s ease-out;
 transition: width 0.5s ease-out;
}
#search-form1 input:focus {
 width: 250px;
 -moz-transition: width 0.5s ease-out;
 -webkit-transition: width 0.5s ease-out;
 transition: width 0.5s ease-out;
} 
```

#search-form1 是要输入的电子邮件地址的表单。之所以称为 search-form1，是因为我从教程中复制了该特定代码并且没有更改它。效果很好，所有功能都可以正常工作，只是 div 无法在 Chrome 或 Safari 中正确隐藏。还没有在 Opera 上尝试过。当我将 position:right 属性更改为 -233px 时，它会在 Chrome 和 Safari 中正确隐藏，但在 Firefox 中太远了。

我想知道是否有人可以帮助我解决这个问题？

PS：如果您对我的网站设计稿有任何批评或建议，请告诉我！我很想听听他们的意见。

![Firefox 中发生了什么（正确）](../Images/2146c48bdea7d0f2757855357ee0cf39.png)

![WebKit 会发生什么（不正确）](../Images/55829ddef0a926611b822346f22a45ed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:09:57.347

尝试为#subscribe 锁定宽度：240px。（也许不是 240，而是大约）

# c++ - 有条件地使用 OpenGL 扩展

> ID：11592493
> 
> 赞同：3
> 
> 时间：2012-07-21T13:14:44.510
> 
> 标签：c++, c, opengl-es, opengl-es-1.1

我对如何使用 OpenGL 扩展（特别是 VBO 和 draw_texture）有点困惑。我知道你可以在 GL_EXTENSIONS 字符串中检查它们，但是然后呢？如果扩展可用，我可以根据需要调用相关函数还是必须加载它们，例如使用 GLEW？如果它们不可用，只要我不调用它们就可以在我的代码中包含这些函数，或者如果扩展不可用，这是否会导致运行时链接器中出现未解决的符号错误？

在 Linux、Windows、Android（本机）、Mac 和 iOS 等多个平台上是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:23:48.793

# cakephp - CakePHP：下拉列表（外键）

> ID：11592498
> 
> 赞同：4
> 
> 时间：2012-07-21T13:15:48.367
> 
> 标签：cakephp, controller, foreign-keys

我正在尝试为类别创建一个下拉列表。如果这检查没问题，那么它必须是数据库。

**楷模：**

类别`var $hasMany = 'Product';`

产品`var $belongsTo = 'Category';`

**ProductsController添加功能：**

```
$this->loadModel('Category');
        $this->set('Categories',$this->Category->find('list',array('order'=> array('Category.name'))));
        $this->set(compact('Categories')); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T01:08:22.130

Nebojsac 是正确的，因为您在视图中设置了两次变量“$Categories”。事实上，`$this->set(compact('Categories'));`实际上可能会用空白值覆盖对 set() 的第一次调用。您应该使用：

```
$this->set('categories', $this->Category->find('list')); 
```

或者：

```
$categories = $this->Category->find('list');
$this->set(compact('categories')); 
```

当您使用 compact 时，它会查找名为 $categories 的变量，然后将该变量设置为 $categories 以便在视图中访问。

为了使您的`category_id`（**或任何您的外键**）字段自动填充类别，您应该确保使用带有`Product`模型的表单创建表单：

```
echo $this->Form->create('Product'); 
```

此外，表单输入应为：

```
echo $this->Form->input('category_id'); 
```

如果您想手动指定下拉菜单的选项，您可以再次使用 . 将类别传递给视图`$this->set('categories', $this->Category->find('list'));`。

然后在您的视图文件中，将`options`数组键设置为等于 $categories：

```
echo $this->Form->input('category_id', array('type' => 'select', 'options' => $categories)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-24T12:06:25.313

我希望你有与 belongsTO 类别表相关联的产品模型表。您想在我的下拉列表中显示类别的数据。

$Categories= $this->Product->Category->find('list'); $this->set(compact('Categories'));

并在您的 ctp 页面中执行此操作

echo $this->Form->input('category_id');

# java - NaN：异步并行计算

> ID：11592499
> 
> 赞同：0
> 
> 时间：2012-07-21T13:15:55.040
> 
> 标签：java, concurrency, parallel-processing, hashmap

我正在使用 java 中的多线程进行并行计算。可能的数据结构是HashMap。我的算法没有任何除法运算和平方根。它是随机梯度下降。即使这样我也得到了`NaN`。我想知道是否有多重访问，在 hashmap 中读写，它会导致任何未定义的问题吗？如果是，我将如何摆脱它？

[编辑]

```
for(Map.Entry<Integer, ArrayList<Double>>entry: Matrix.entrySet()){
        sum = sum + Math.exp(getScore(contextFeatureVector,entry.getValue()));
    } 
```

`getScore`方法计算内积。返回值为`infinity`。

[编辑 2]

在上述方法中，`Matrix`是：

```
 Map<Integer,ArrayList<Double>> Matrix = new ConcurrentHashMap<Integer,ArrayList<Double>>(); 
```

我仍然得到`NaN`。是因为我访问价值的方式。有人可以用清晰的直觉回答吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:27:30.143

如果要让两个线程从那里添加和删除条目，则应该使用 java.util.concurrent.ConcurrentHashMap。当您的一个线程删除另一个线程刚刚得到一个handel并调用键值的键时，您将成为NaN。

或者您可以在添加/删除条目时阻止 HashMap 对象。

[编辑] 几个想法：

• 整数可能不太可靠同步。（除非您做额外的工作以确保您没有两个 Integer 具有相同的值，因此您必须跟踪并重用 Integer。）

• NaN 表示您最有可能得到一个数字的 nil。• 除以0 • 计算负数的sqrt。

## • NaN != 无穷大

您可以在使用它们时将值记录到控制台，或者只是找到您抛出 exption 的行。也许只是转储整个地图。

你现在拥有的这张地图是要走的路，但你需要确保它开始做它需要做的事情。

# mysql - MySQL 检查 3 个或更多连续（特定）条目

> ID：11592503
> 
> 赞同：6
> 
> 时间：2012-07-21T13:16:30.067
> 
> 标签：mysql, database

我有一个下表：

```
+------------+-----------------------------------------------------------------------------------+
| Field      | Type                                                                              |
+------------+-----------------------------------------------------------------------------------+
| id         | int(10) unsigned                                                                  |
| type       | enum('REGISTER','ACTIVATE','LOGIN_SUCCESS','LOGIN_FAIL','LOGOUT','LOCK','UNLOCK') |
| user_id    | int(10) unsigned                                                                  |
| mod_id     | int(10) unsigned                                                                  |
| date       | timestamp                                                                         |
| ip         | int(10) unsigned                                                                  |
| user_agent | text                                                                              |
+------------+-----------------------------------------------------------------------------------+ 
```

我试图以最简单的方式（最好只使用 MySQL）确定`type = LOGIN_FAIL`自上次`type = LOGIN_SUCCESS`或自表开始以来是否有 3 个或更多连续记录。

例如

```
+----+---------------+---------+--------+---------------------+----+------------+
| id | type          | user_id | mod_id | date                | ip | user_agent |
+----+---------------+---------+--------+---------------------+----+------------+
|  6 | LOGIN_SUCCESS |       3 |   NULL | 2012-07-21 14:08:32 |  0 | agent      |
|  7 | LOGIN_FAIL    |       3 |   NULL | 2012-07-21 14:08:32 |  0 | agent      |
|  8 | LOGIN_FAIL    |       3 |   NULL | 2012-07-21 14:08:32 |  0 | agent      |
|  9 | LOGIN_FAIL    |       3 |   NULL | 2012-07-21 14:08:32 |  0 | agent      |
+----+---------------+---------+--------+---------------------+----+------------+ 
```

会回来`TRUE`，而

```
+----+---------------+---------+--------+---------------------+----+------------+
| id | type          | user_id | mod_id | date                | ip | user_agent |
+----+---------------+---------+--------+---------------------+----+------------+
|  6 | LOGIN_FAIL    |       3 |   NULL | 2012-07-21 14:08:32 |  0 | agent      |
|  7 | LOGIN_FAIL    |       3 |   NULL | 2012-07-21 14:08:32 |  0 | agent      |
|  8 | LOGIN_SUCCESS |       3 |   NULL | 2012-07-21 14:08:32 |  0 | agent      |
|  9 | LOGIN_FAIL    |       3 |   NULL | 2012-07-21 14:08:32 |  0 | agent      |
+----+---------------+---------+--------+---------------------+----+------------+ 
```

会回来`FALSE`的。是否可以通过简单的查询来做到这一点，还是我需要用某种脚本语言来实现这个检查？

**编辑：**我忘了提到这个查询必须限制为某个 user_id 但我认为这不会是一个问题。

否则，或者甚至更好，是否可以计算有多少记录符合此标准（即`type = LOGIN_FAILED`自 last 以来存在多少连续记录`type=LOGIN_SUCCESS`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:35:14.473

```
SELECT COUNT(*) FROM `table` 
WHERE 
    id > 
        (IFNULL(
            (SELECT id 
            FROM `table` 
            WHERE `type`='LOGIN_SUCCESS' 
            ORDER BY id DESC 
            LIMIT 1),0
        )
    AND `type`='LOGIN_FAIL' 
```

将获得自上次成功以来的失败次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T14:06:25.480

希望对你有帮助

```
SELECT IF(COUNT(a.id)>=3, TRUE, FALSE) AS fresult FROM last_login AS a, 
(
        SELECT COUNT( b.id ) AS cnt, MAX( b.id ) AS maxid FROM last_login AS b 
        WHERE b.login_type =  'LOGIN_SUCCESS' 
) AS c  

WHERE a.id>c.maxid OR c.cnt=0
GROUP BY a.login_type 
```

# css - CSS样式化多个ID

> ID：11592508
> 
> 赞同：1
> 
> 时间：2012-07-21T13:17:06.257
> 
> 标签：css

而不是这个：

```
#1 span.error { color: #fff; }
#2  span.error { color: #fff; } 
```

使用它是否更好/更快：

```
#1 span.error, #2 span.error { color: #fff; } 
```

有没有办法缩短更多？

**我接受了 Ana 的回答，但对我来说，agam360 首先击中了目标。谢谢你们**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:20:04.500

是的，我相信这样更好——你可以避免冗余，如果你多次遇到这种情况，它可以显着减少 CSS 的大小。

更短的方法是将相同的类添加到两个 id。就像是：

```
<div id="#1" class="myclass">
  <span class="error">error text 1</span>
</div>
<div id="#2" class="myclass">
  <span class="error">error text 1</span>
</div> 
```

然后你可以写：

```
.myclass span.error {
  color: #fff;
} 
```

*如果您在具有 id和`span.error`的元素之外没有任何`#1``#2`*元素，那么您可以将其进一步压缩为`span.error { color: #fff; }`

*如果除此之外，具有类的元素`.error`总是`<span>`元素*，它们就会变成`.error { color: #fff; }`

所以你能压缩多少东西真的取决于你的 HTML 结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:26:13.273

取决于你的页面结构。

`span.error { color: #fff; }`会进一步缩短它，或者如果祖先需要在规则中并遵循一个模式，你可以写一些 this `div[id*='pattern'] span.error`。在这个例子中，祖先是一个`div`包含文本“模式”的 id。您可以对其进行修改以满足您的需要。

# .htaccess - 使用 htaccess 更改部分 URL

> ID：11592509
> 
> 赞同：0
> 
> 时间：2012-07-21T13:17:16.373
> 
> 标签：.htaccess, url-rewriting

我有类似的网址

*   www.abc.com/pqr
*   www.abc.com/sss/pqr/abc
*   www.abc.com/ass/pqr/asd/dff

我想在不影响原始功能的情况下将 pqr 更改为其他单词。

目前我做了这样的事情

RewriteRule ^pqr/(.*) [http://www.mysite.com/someotherword/](http://www.mysite.com/someotherword/) $1 [L]

但它正在影响搜索、登录等功能。它正在按照我想要的方式重定向。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T19:16:03.337

如果您只想替换“pqr”部分，这是重写规则：RewriteRule ^(. *)pqr(.* )$ $1someotherword$2 [L]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:35:11.107

听起来好像缺少查询字符串？尝试：

```
RewriteRule ^pqr/(.*) http://www.mysite.com/someotherword/$1 [QSA,L] 
```

* * *

**POST 数据的替代方法**

请改用 GET。

使用重写条件不重定向带有 POST 数据的文件，将数据存储在数据库中，然后调用重定向文件，当文件在新服务器上打开时，从数据库中加载发布数据。

# sql-server - 如何查找哪些存储过程包含一段文本

> ID：11592510
> 
> 赞同：0
> 
> 时间：2012-07-21T13:17:17.657
> 
> 标签：sql-server, tsql

我试图找出哪些存储过程包含一段文本（有点像 MS SQL 的 Grep）。这样我就可以找到一个表的名称并替换它。

例如，如果我希望在我的数据库中查找哪些存储过程包含表名“clients_users”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:28:12.763

以下代码将有助于查找与一个或多个特定表相关的所有存储过程 (SP)。sp_help 和 sp_depends 并不总是返回准确的结果。

- - 选项1

```
SELECT DISTINCT so.name  
FROM syscomments sc  
INNER JOIN sysobjects so ON sc.id=so.id  
WHERE sc.TEXT LIKE '%tablename%' 
```

----方案二

```
SELECT DISTINCT o.name, o.xtype  
FROM syscomments c  
INNER JOIN sysobjects o ON c.id=o.id    
WHERE c.TEXT LIKE '%tablename%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:19:27.307

sql server 2005 及更高版本的一种方法

```
SELECT NAME
FROM sys.procedures
WHERE OBJECT_DEFINITION(object_id) LIKE '%clients[_]users%' 
```

您需要在 _ 周围使用 []，因为在进行通配符搜索时 _ 表示任何字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:17:17.657

执行以下查询将产生所需的结果。将 foobar 替换为您需要在存储过程中找到的文本。

```
SELECT ROUTINE_NAME, ROUTINE_DEFINITION 
    FROM INFORMATION_SCHEMA.ROUTINES 
    WHERE ROUTINE_DEFINITION LIKE '%foobar%' 
    AND ROUTINE_TYPE='PROCEDURE' 
```

# sql-server-2005 - 在 64 位 windows 7 机器上安装 Sql Server 2005 时出现警告和错误

> ID：11592513
> 
> 赞同：5
> 
> 时间：2012-07-21T13:17:31.250
> 
> 标签：sql-server-2005

我正在尝试安装**Sql Server 2005**。

下面是我的机器配置

*   Windows 7 家庭基础版 - 操作系统
*   4.00 GB - 内存
*   64位操作系统

我已经成功安装了 Visual Studio 2010，但是当我尝试安装我的 Sql Server 2005 时，我在安装时收到一些警告和错误，如下所示。

首先双击设置文件，我收到此消息

![在此处输入图像描述](../Images/1879cf5033af5520f5a3e1d1ffd71e4a.png)

我选择了运行程序选项并继续设置...

然后我得到这个错误

![在此处输入图像描述](../Images/8c6599627c5fb77b3810be2ee1c178ea.png)

以下是此警告/错误的详细日志

**- IIS Feature Requirement (Warning)** Messages IIS Feature Requirement

Microsoft Internet Information Services (IIS) is either not installed or is disabled. IIS is required by some SQL Server features. Without IIS, some SQL Server features will not be available for installation. To install all SQL Server features, install IIS from Add or Remove Programs in Control Panel or enable the IIS service through the Control Panel if it is already installed, and then run SQL Server Setup again. For a list of features that depend on IIS, see Features Supported by Editions of SQL Server in Books Online

**- ASP.Net Version Registration Requirement (Warning)** Messages ASP.Net Version Registration Requirement

64-bit ASP.Net is Registered. Required 32-bit ASP.Net to install Microsoft Reporting Services 2005(32-bit).

请任何人帮助我理解，如何摆脱这些错误并帮助我在我的机器上安装 Sql Server 2005

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T20:14:17.533

就像您的错误所说的那样，您需要安装它们。

对于 IIS 功能要求，您需要转到您的程序和功能并安装它们。这是一个截图

![在此处输入图像描述](../Images/423549534a1895ee377a93a63f177ed1.png)

您需要通过勾选复选框来安装必要的组件，这可以在 SQL 安装的需求文档中找到或查看这里[http://support.microsoft.com/kb/920201](http://support.microsoft.com/kb/920201)

安装 IIS 后，您可以通过转到开始 -> 运行然后键入 inetmgr.exe 来解决第二个问题

在那里通过设置应用程序池默认值启用 32 位应用程序。下面的屏幕截图

![在此处输入图像描述](../Images/8656f64c6ea3d71de839674aefe87c40.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T04:04:52.983

试试这个解决方案。这帮助我解决了我的问题。

[SQL2005 64bit 安装警告关于 ASP.Net 版本注册要求](http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/d4cd0160-99b4-4923-b4c2-8870413d5390/)

[如何在基于 Windows Vista 的计算上安装 SQL Server 2005 Reporting Services](http://support.microsoft.com/kb/934164)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T22:21:43.070

根据您的评论，您现在已经安装了 Windows 8。Windows 8 上似乎不支持 SQL Server 2005。请参阅此 SQL Server MSDN 博客条目[在 Windows 8 上安装 SQL Server](http://blogs.msdn.com/b/psssql/archive/2012/09/01/installing-sql-server-on-windows-8.aspx)。

现在鉴于此，在这篇文章中似乎[有些 Stack Overflow 用户已经在 Windows 8 上安装了 SQL 2005](https://stackoverflow.com/questions/13520551/how-to-install-sql-server-2005-express-in-windows-8)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-10T19:31:11.837

我在 Windows Server 2008 x64 上遇到了这个问题，最终在这里寻找解决方案。我已启用 IIS 组件并将所有应用程序池上的“启用 32 位应用程序”设置为 true。尝试安装 SQL 2005 时，我仍然收到 ASP .Net 警告。最终我发现进入“设置应用程序池默认值”并在那里启用 32 位应用程序，我成功消除了警告。

# android - Android：通过蜂窝网络和 WiFi 进行位置检测

> ID：11592520
> 
> 赞同：0
> 
> 时间：2012-07-21T13:18:05.493
> 
> 标签：android, location, android-wifi

我想构建一个应用程序，它将使用`cellular Network`和提供当前位置`WiFi`。

我喜欢同时从两个提供商那里获取位置，然后决定哪个提供商给我最好的。

现在我从网络获取位置

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
LocationListener locationlistenerforNetwork = new mylocationlistenerNetwork();
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationlistenerforNetwork);

private class mylocationlistenerNetwork implements LocationListener {
      @Override
      public void onLocationChanged(Location location) {
          if (location != null) {
          Log.d("LOCATION CHANGED", location.getLatitude() + " ");
          Log.d("LOCATION CHANGED", location.getLongitude() + " ");
          Toast.makeText(LocationActivity.this,"latitude: "+
              location.getLatitude() + "longitude: " + location.getLongitude()
              + " Provider:" + location.getProvider() + " Accuracy:" + location.getAccuracy(),
              Toast.LENGTH_LONG).show();

          }
      }
      @Override
      public void onProviderDisabled(String provider) {
      }
      @Override
      public void onProviderEnabled(String provider) {
      }
      @Override
      public void onStatusChanged(String provider, int status, Bundle extras) {}
      } 
```

我也想从`WiFi`. 请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:44:09.187

请参阅[位置管理器](http://developer.android.com/reference/android/location/LocationManager.html)

有这些提供者：

*   [GPS_PROVIDER](http://developer.android.com/reference/android/location/LocationManager.html#GPS_PROVIDER)
*   [NETWORK_PROVIDER](http://developer.android.com/reference/android/location/LocationManager.html#NETWORK_PROVIDER)
*   [PASSIVE_PROVIDER](http://developer.android.com/reference/android/location/LocationManager.html#PASSIVE_PROVIDER)

来自文档：

> 公共静态最终字符串 NETWORK_PROVIDER
> 
> 网络位置提供商的名称。**该提供商根据蜂窝塔和 WiFi 接入点**的可用性确定位置。通过网络查找检索结果。需要权限 android.permission.ACCESS_COARSE_LOCATION 或 android.permission.ACCESS_FINE_LOCATION。

没有单独的 WiFi 提供商。使用`NETWORK_PROVIDER`您也可以根据 WiFi 接入点确定位置。

# android - 从一项活动直接到另一项活动

> ID：11592527
> 
> 赞同：-2
> 
> 时间：2012-07-21T13:18:44.463
> 
> 标签：android

我有一个 userActivity java 类，其中用户键入他的用户名，然后在单击提交按钮后页面将定向到主菜单活动页面。但是当我点击按钮时，它不起作用。有人知道为什么吗？以下是我的代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.user);

    Button submitBtn = (Button)findViewById(R.id.btn_submit);
    nameEdit=(EditText)findViewById(R.id.edit_name);
    submitBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(getBaseContext(), SavingsGuiderMenuActivity.class);
            Bundle extras = new Bundle();
            extras.putString("name",nameEdit.getText().toString());
            intent.putExtras(extras);
            startActivity(intent);  
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:51:32.750

确保 Manifest.xml 中有其他 Activity！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:21:19.327

代替 `Intent intent = new Intent(getBaseContext(), SavingsGuiderMenuActivity.class);`

和

`Intent intent = new Intent(UserActivity.this, SavingsGuiderMenuActivity.class);`

如果您的活动名称是`UserActivity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:32:38.703

只需确认点击是哪个 id：

```
@Override
        public void onClick(View v) {
            if(v.getId() == R.id.btn_submit)  //  Confirms Your Submit Button click
            {
                Toast.makeText(UserActivity.this, "Submit Button Clicked.", Toast.LENGTH_SHORT).show();
                Intent intent = new Intent(UserActivity.this, SavingsGuiderMenuActivity.class);
                Bundle extras = new Bundle();
                extras.putString("name",nameEdit.getText().toString());
                intent.putExtras(extras);
                startActivity(intent);  
            }
        }
    }); 
```

并检查 Toast 消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T18:24:10.817

```
@Override
    public void onClick(View v) {
        String txt = nameEdit.getText().toString();
        Intent intent = new Intent(UserActivity.this, SavingsGuiderMenuActivity.class);
        Bundle extras = new Bundle();
        extras.putString("name", txt);
        intent.putExtras(extras);
        startActivity(intent);  
    } 
```

看看这是否有效？

# php - 找不到行时如何显示“无结果”消息？

> ID：11592528
> 
> 赞同：0
> 
> 时间：2012-07-21T13:18:54.243
> 
> 标签：php, mysql, pdo

未找到任何行时，如何显示“未找到结果”消息？

```
while($row = $query->fetch(PDO::FETCH_ASSOC)) 
{
    echo $row['name'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:21:02.277

```
 $matched = false;
 while($row = $query->fetch(PDO::FETCH_ASSOC)) 
 {
    $matched = true;
    echo $row['name'];
 }
 if(!$matched)
     echo "no any"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:33:35.697

另一个..

```
$kittens = $query->fetchAll(PDO::FETCH_ASSOC))

if(!$kittens )
{
    //Nada
}
else
{
    foreach($kittens as $kitten)
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:25:18.710

只是一个替代解决方案，您可以添加一个 if 条件。

```
if ($row = $query->fetch(PDO::FETCH_ASSOC)) {
   echo $row['name'];
   while($row = $query->fetch(PDO::FETCH_ASSOC)) {
        echo $row['name'];
   } 
} else {
   echo "no results found";
} 
```

# c# - 字符串未被识别为有效的 DateTime

> ID：11592529
> 
> 赞同：0
> 
> 时间：2012-07-21T13:19:01.737
> 
> 标签：c#, asp.net, datetime

`DateTime`当我尝试将字符串转换为`DateTime`.

我使用方法将当前日期存储`getDate()`到我的数据库中。它被设置为`DateTime`. 我检索了它并显示在`DetailsView`. 后来我从`DetailsView`标签上检索并设置。

```
Label ForgotDatelbl = new Label();
ForgotDatelbl = (Label)DetailsView2.FindControl("ForgotPwLabel");

DateTime ForgotDate = DateTime.ParseExact(ForgotDatelbl.ToString(),
      "d/M/yyyy hh:mm:ss tt", null); //here is the error

if (DateTime.Now < ForgotDate.AddMinutes(3)) { 
} 
```

源错误：

```
Line 28:             DateTime ForgotDate = DateTime.ParseExact(ForgotDatelbl.ToString(),"d/M/yyyy hh:mm:ss tt", null);
Line 29: 
Line 30:             if (DateTime.Now < ForgotDate.AddMinutes(3)) 
```

在我的数据库中，时间是这样的——`20/7/2012 7:42:19 PM`

**编辑**

```
IFormatProvider theCultureInfo = new System.Globalization.CultureInfo("en-GB", true);
DateTime ForgotDate = DateTime.ParseExact(ForgotDatelbl.ToString(), "dd/M/yyyy hh:mm:ss tt", theCultureInfo); 
```

但是，错误仍然存​​在..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:45:40.117

尝试仅使用 1h 说明符更改格式：

```
//20/7/2012 7:42:19 PM
"dd/M/yyyy h:mm:ss tt", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:53:25.260

请考虑以下

```
string dateString = "20/7/2012 7:42:19 PM";

//can be this in your case: string dateLabel = ForgotDatelbl.Text;

var culture = new CultureInfo("en-GB");
var date = DateTime.Parse(dateString, culture, DateTimeStyles.RoundtripKind); 
```

这会解析您想要的完全匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:21:10.263

`Culture`在重载方法中使用

# ios - Tableview - 根据 sqlite 中的数据创建 numberOfSectionsInTableView

> ID：11592535
> 
> 赞同：2
> 
> 时间：2012-07-21T13:19:46.777
> 
> 标签：ios, sqlite, xcode4.2, tableview

我目前正在使用 sqlite 创建一个 TableView 应用程序，到目前为止，它按预期工作。第一个视图是美国所有州的列表，并在一个名为“州”的部分中按字母顺序返回它们。我的问题是...如何为这些数据创建一个按字母顺序排列的列表？换句话说，创建一个名为“A”的部分，其中包含州阿拉巴马州、阿拉斯加州、亚利桑那州、阿肯色州。一个名为“C”的部分将包含加利福尼亚、科罗拉多、康涅狄格。它基本上会梳理结果，寻找每个州的第一个字母，如果有匹配，则将该州放在适当的部分。

我遇到了一些描述如何做到这一点但与 sqlite 无关的文章。任何帮助将不胜感激！！

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:07:28.773

首先，所有这些非 sqlite 示例可能都已经足够了。从 NSArray 或 sqlite 数据库获取数据并没有什么特别之处。反正，

几个选项。首先，这个例子太简单了，我可能只是阅读州名（当然是有序的），并在我经历的时候构建我的模型（例如，看看第一个字母，如果不同的第一个字母开始一个新的部分， ETC。）。

第二个选项是在 viewDidLoad 期间读入支持在我的 tableview 后面构建模型所需的最少数据。我个人使用的模型是 Section 对象的 NSMutableArray，每个 section 对象都由 section header 和 Row 对象数组组成，其中这些 Row 对象只是数据库中相关行的唯一标识符。然后，要填充该模型，我只需执行如下 sql 语句：

```
select substr(last_name,1,1), employee_id from employee order by last_name, first_name; 
```

从那开始，我将遍历并构建一组部分的模型，并为每个部分创建一个用于该部分中各个项目的唯一标识符数组。

还有很多其他方法。希望这会让你继续前进。如果没有，请使用 tableview 背后的模型更新您的问题，也许还有一些您尝试过的代码，我们很乐意为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:01:31.690

一种方法可能是提供一个数组数组的结构。数组的每个部分都将包含一个状态数组，这些状态与相同的状态首字母匹配。然后在这个结构上工作以实现数据源和委托方法。

因为我碰巧做了一些非常相似的事情，这里有一个代码片段来提供结构（self.browserContents）。我希望它会有所帮助：

```
BrowserContents *bc = [[BrowserContents alloc] init];

// Create an array to hold the sub arrays
NSInteger sectionCount = [bc getNumberOfCategories]; 
NSMutableArray *sectionsArray = [NSMutableArray arrayWithCapacity:sectionCount];

// Iterate over each section, creating each sub array 
for (int i = 0; i < sectionCount; i++) {
    NSMutableArray *singleSectionArray = [NSMutableArray arrayWithCapacity:1];
    [sectionsArray addObject:singleSectionArray]; 
}

// Fill up each section
 NSMutableArray *contentsTemp = bc.contents;
 for (BrowserStateItem *item in contentsTemp) {
        [(NSMutableArray *)[sectionsArray objectAtIndex:[item categoryId]] addObject:item];
 }

// Iterate over each section array to sort the items in the section 
UILocalizedIndexedCollation *indexedCollation = [UILocalizedIndexedCollation currentCollation];
for (NSMutableArray *singleSectionArray in sectionsArray) 
{
        NSArray *sortedSection = [indexedCollation sortedArrayFromArray:singleSectionArray collationStringSelector:@selector(name)];
        [self.browserContents addObject:sortedSection];
} 
```

**注意：** BrowserContents 是一个类，它应该包含所有状态的列表、类别的数量和它应该属于的类别的 ID（例如：A->1、B->2 等......假设你有开始的状态与 A 和 B）。最后查看**Professional iPhone and iPad Database Application Programming**一书。这是了解 iOS 中数据库编程的绝佳资源。

# ruby-on-rails-3.2 - AngularJS 中的嵌套模型

> ID：11592538
> 
> 赞同：2
> 
> 时间：2012-07-21T13:19:58.633
> 
> 标签：ruby-on-rails-3.2, angularjs

我已将问题简化为最小的形式，如下所示：http: [//jsfiddle.net/ejubN/](http://jsfiddle.net/ejubN/)

我基本上希望能够将一个大的 JSON 对象加载到被渲染的 $scope.b 中。如果@scope.b 中的任何元素被更改、更新或创建了新元素，则应触发“contenteditable”以通过POST 将其保存回我的rails 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:52:10.347

`$scope.b`这个小提琴显示了一些代码，每当发生变化时都会调用一个监听器：http: [//jsfiddle.net/Gloopy/SQuVy/](http://jsfiddle.net/Gloopy/SQuVy/)

我可能已经将示例剥离得太远了，但我假设您不需要指令，并且您基于 AngularJS[文档](http://docs.angularjs.org/api/ng.directive%3angModel.NgModelController)中的示例。[此外，由于此处](https://groups.google.com/forum/#!topic/angular/VD77QR1J6uQ/discussion)`$scope.b`描述的 ng-repeat 的绑定问题，我更改为包含 javascript 对象而不是原始对象（由于您正在加载大型 JSON 对象，这有望成为更好的测试）。

您应该能够使用[$http 服务](http://docs.angularjs.org/api/ng.%24http)发布您的帖子，尽管每次监听器触发时发布可能并不理想。其他人可能对何时实际进行保存有更好的建议，但希望这会有所帮助！

# vim - 我的 Vim 已经变慢了

> ID：11592542
> 
> 赞同：3
> 
> 时间：2012-07-21T13:20:17.823
> 
> 标签：vim

当我刚安装 Vim 时，它的速度要快得多。现在，从我`vim`在终端中输入并打开 Vim （即使没有任何文件/参数）后按 enter 需要 2-4 秒。

我有：

*   7 个插件（自动更正、自动配对、closetag、snipMate、supertab、俄罗斯方块）
*   **没有**配色方案
*   `.vimrc`具有[这些配置](https://gist.github.com/3155795)的文件
*   我的主目录中的`.vimrc`文件是符号链接，真正的文件在`.vim`目录中
*   我在插入模式下启动 Vim（我在`.bash_aliases`文件中有别名）：

    ```
    alias vim="vim -c 'startinsert'"
    alias vi="vi -c 'startinsert'" 
    ```

是什么让我的 Vim 变慢了？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-21T13:30:30.550

我几乎可以肯定这`autocorrect.vim`就是原因。刚看了一下，看到8152行。所有这些行都由 Vim 在启动时解析，这会减慢它的速度。

为未来。您可以使用参数启动 vim 以`--startuptime`确切了解是什么减慢了加载速度，例如

```
vim --startuptime startup.report 
```

检查生成的文件将为您提供有关加载不同脚本所花费时间的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T06:25:48.563

检查你的 viminfo 文件的大小。

ls -l ~/.viminfo

当这个文件变得非常大（200MB）时，我的 VIM 变得非常慢，每次 VIM 退出时，它都需要写入这个文件，而且速度非常慢。这个文件对我来说变得非常大的原因是 1：我长时​​间使用 VIM，以及 2：我在 VIM 中提取/复制非常大的文本，所有这些文本都出现在 .viminfo 中。

做

rm ~/.viminf*

确保删除 ~/.viminfz.*。否则，即使删除 .viminfo，也会恢复 .viminfo。

将它们删除后，我的 VIM 就已经达到了应有的速度。

您也可以通过登录

vim -V12log test.txt

查看正在执行的操作（我发现 vim 正在尝试写入日志中的 .viminfo）。

还有vim提供的starttime记录功能参考这个[Vim响应相当慢](https://stackoverflow.com/questions/9341768/vim-response-quite-slow)

# c++ - 在屏幕上快速绘制像素

> ID：11592544
> 
> 赞同：0
> 
> 时间：2012-07-21T13:20:45.587
> 
> 标签：c++, winapi, pixels

我需要用像素填充一个窗口，当然非常快。这是一个带有软件 3D 图形（概念证明）的“老派”项目。

要求是：

*   指向屏幕缓冲区以写入颜色和显示它的方法的指针

*   没有 OpenGL、Direct3D 或 SDL

*   纯WinAPI

**问题：如何使用 WinAPI 在窗口上绘制像素？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T13:25:27.337

*   `CreateDIBSection`使用句柄以及指向位的原始指针创建`HBITMAP`位图
*   `BitBlt`在设备上下文之间复制数据`HDC`，从选择了位图（见上文）的设备上下文到与您要“绘制”的窗口相关联的另一个

# php - IPN 验证不适用于 codeigniter 中的贝宝库

> ID：11592546
> 
> 赞同：0
> 
> 时间：2012-07-21T13:21:02.750
> 
> 标签：php, codeigniter

我正在尝试使用我在这里找到的贝宝库表单：http: [//www.amplio.ch/blog/web-development/paypal-integration-to-codeigniter/](http://www.amplio.ch/blog/web-development/paypal-integration-to-codeigniter/)

但是，我在验证 IPN 时遇到了问题。

我检查了日志文件，它是这样说的：

```
[07/16/2012 8:01 AM] - FAIL: IPN Validation Failed.
IPN POST Vars from Paypal:
mc_gross=2.00, protection_eligibility=Ineligible, address_status=confirmed, payer_id=JPL6YA8KDP9XU, tax=0.00, address_street=1 Main St, payment_date=06:01:05 Jul 16, 2012 PDT, payment_status=Pending, charset=windows-1252, address_zip=95131, first_name=dhananjay, mc_fee=0.38, address_country_code=US, address_name=dhananjay singh, notify_version=3.5, custom=1040, payer_status=verified, business=dsingh948@gmail.com, address_country=United States, address_city=San Jose, quantity=1, verify_sign=AuX-fMg1xrQJhvjWRGDSXwAJ82uAAyxc63TOdI-Sp.-aqOD73m46FsWB, payer_email=dsingh_1342159008_per@gmail.com, txn_id=8NB38255AB165691V, payment_type=instant, last_name=singh, address_state=CA, receiver_email=dsingh948@gmail.com, payment_fee=0.38, receiver_id=ZXFXNX7UFQTVE, pending_reason=paymentreview, txn_type=web_accept, item_name=Yearly paid membership, mc_currency=USD, item_number=, residence_country=US, test_ipn=1, handling_amount=0.00, transaction_subject=1040, payment_gross=2.00, shipping=0.00, ipn_track_id=5105e9658341, 
IPN Response from Paypal Server:
 HTTP/1.1 200 OK
Date: Mon, 16 Jul 2012 13:01:11 GMT
Server: Apache
X-Frame-Options: SAMEORIGIN
Set-Cookie: cwrClyrK4LoCV1fydGbAxiNL6iG=KQ_8n-WRpV21ve142cfDNKvEQA6NJ90ucEOHF05_qrbnLSc8ynOmDwZAXTO8FlxqSbzayxkMb3zrevSnFFbwlq4qZROyrZvO6f6x29Dony5Dh3Lfb5H0f1nxSkRD7JxGGil_rG%7cGNnGXKAoBJtGpTG-6lg3wp3OYY-0PoJdIp1rq-PTwF7OYIRTstev0ZpXeF_fQ9EJvIn0Bm%7cvG4vpKncFqJFU2ufHoMB3MbUDvkd_e77s-MQcMl4TDlZ3QZBq5E0W1tOteagTNxvm1BDsm%7c1342443671; domain=.paypal.com; path=/; HttpOnly
Set-Cookie: cookie_check=yes; expires=Thu, 14-Jul-2022 13:01:11 GMT; domain=.paypal.com; path=/; HttpOnly
Set-Cookie: navcmd=_notify-validate; domain=.paypal.com; path=/; HttpOnly
Set-Cookie: navlns=0.0; expires=Sun, 11-Jul-2032 13:01:11 GMT; domain=.paypal.com; path=/; HttpOnly
Vary: Accept-Encoding
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=UTF-8

7
INVALID
0 
```

有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T16:16:53.023

我已经遇到了这个问题，这是
您的 paypal_class.php （第 186 行）中的解决方案，更改：

```
$fp = fsockopen($url_parsed[host],"80",$err_num,$err_str,30); 
```

到

```
$fp = fsockopen('ssl://www.paypal.com', '443', $err_num, $err_str, 30); 
```

来源：[https ://www.paypal-community.com/t5/Merchant-services-Archive/Im-not-receiving-a-response-from-Paypal-s-IPN-Sandbox/td-p/387696#](https://www.paypal-community.com/t5/Merchant-services-Archive/I-m-not-receiving-a-response-from-Paypal-s-IPN-Sandbox/td-p/387696#)

# objective-c - 如何创建一个打开另一个窗口（Mac）的 NSButton？

> ID：11592547
> 
> 赞同：0
> 
> 时间：2012-07-21T13:21:05.990
> 
> 标签：objective-c, xcode, macos, nswindow

是否可以设置一个通向另一个（以前隐藏的）Mac OS 窗口的 NSButton？

```
- (IBAction)loginb:(id)sender {
NSString *pass = [m_password stringValue];
NSString *name = [m_username stringValue];
if ([name isEqualToString:@"haseo98"] && [pass isEqualToString:@"passwordtest"]){
    [_loginwindow setBackgroundColor:[NSColor redColor]];
}
else [_loginwindow setBackgroundColor:[NSColor blackColor]];
} 
```

*计划用代码代替 NSColor 更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:30:16.007

~~这在很大程度上取决于您希望登录的行为方式。您可以使用一个实例， `UINavigationController`并且`pushViewController:animated:`它还将提供一个导航栏以在应用程序的其他地方使用。~~

或者，您可以创建要加载的下一个视图的实例，然后使用`[self addSubview:]`.

看：

> [如何在没有导航控制器的情况下更改 iPhone 中按钮单击的视图？](https://stackoverflow.com/questions/6290592/how-to-change-view-on-button-click-in-iphone-without-navigation-controller)
> 
> [iPhone按下按钮时如何切换到下一个视图？](https://stackoverflow.com/questions/1372350/how-to-switch-to-next-view-when-button-is-pressed-iphone)
> 
> ~~[http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)~~

编辑：道歉，但您没有在未经编辑的问题中指定这一点。

* * *

经过一番摸索，您似乎可以使用以下内容；

```
if (_controller == nil)
{
   _controller = [[MyNewWindow alloc] initWithWindowNibName:@"MyNewWindow"]; 
}

// Show the window.

[_controller showWindow:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:55:15.050

如果您的窗口不像汤姆的回答建议的那样在窗口控制器中，您还可以使用`NSWindow`'`makeKeyAndOrderFront:`方法来显示窗口并让它接收关键事件。

# android - 整个应用程序中的全局“搜索功能”

> ID：11592552
> 
> 赞同：5
> 
> 时间：2012-07-21T13:21:32.223
> 
> 标签：android, search, android-activity

在我的整个应用程序中，我希望搜索按钮执行单独的`Activity`. 即，当我按下搜索按钮时，我希望从应用程序的任何位置调用单独的 Activity。

有什么方法不是`onSearchRequested()`在每个活动中定义，而是在一个地方（如`Manifest.xml`）配置它，它可以在整个应用程序中使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T13:24:12.773

您可以定义一个（不一定）扩展 Activity 的抽象类，在那里实现 onSearchRequest 并从该类继承所有其他 Activity 类。这样，您只需定义一次 onSearch 行为。

IE

```
public abstract class MyBaseActivity extends Activity {
    @Override
    public void onSearchRequest() {
       // Your stuff here
    }
}

public class MyActivity1 extends MyBaseActivity {
   // OnSearchRequest is already implemented
} 
```

如果您打算使用多个Activity 子类，即ListActivity，这可能不是一个好的解决方案，因为您必须为您使用的所有Activity 子类创建一个抽象基类。在这种情况下，我建议创建一个附加类，封装搜索按钮处理代码并从您的活动 onSearchRequest 调用它，即

```
public class SearchButtonHandle {
    public void handleSearch(Context c) {
       // Your search btn handling code goes here
    }  
}

public class MyActivity1 extends Activity {  // Or ListActivity ....
    @Override
    public void onSearchRequest() {
       new SearchButtonHandle().handleSearch(this);
    }
} 
```

当然，您也可以通过定义您使用的所有活动子类的抽象子类来组合这两种方法，并使用外部搜索处理程序实现上例中的 onSearchRequest

# mongodb - MongoDB 数组中的所有值都应该小于一个值

> ID：11592554
> 
> 赞同：2
> 
> 时间：2012-07-21T13:21:40.567
> 
> 标签：mongodb, database, nosql

我有一个包含嵌入式文档数组的文档。即'key' => array(...)

是否可以创建一个查询，以便对于嵌入式数组中的某个值，它们都是 $lt 某个值？

所以像这样：

```
{
'key.value' : { $lt : 5.0 }
} 
```

问题是一旦一个是 $lt 然后它匹配我不想要的，我希望所有应该小于 5。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T17:46:52.163

使用 $not 运算符怎么样？具体来说，匹配所有你不想要的值，然后得到相反的值。所以像：

```
 {
 'key.value' : { $not : { $gte : 5.0 }}
 } 
```

会得到数组中值不大于或等于五的所有文档，这就是我认为你想要的，对吧？

# c++ - c++中从外点到cardinalspline样条曲线的最短距离

> ID：11592555
> 
> 赞同：2
> 
> 时间：2012-07-21T13:21:50.893
> 
> 标签：c++, c, math, bezier, curve

我需要找到从曲线外的任何给定点到基数样条曲线的最短距离我可以有任何参考链接或任何方程可以帮助我吗？以下是我想要实现的参考链接

谢谢尼基尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:02:37.483

我不完全确定你想要什么。也许[这](http://www.it.uom.gr/teaching/linearalgebra/NumericalRecipiesInC/c3-3.pdf)会有所帮助。它将为您提供原始 (xi, y(xi)) 集合中基数样条的分析形式 f(x,y) = 0。您可以轻松找到点 p(x,y) 与研究 sqrt((px-fx)² + (py-fy)²) 的前两个导数的样条之间的最短距离。希望这可以帮助。

# java - 在哪里存储类关系信息？

> ID：11592558
> 
> 赞同：0
> 
> 时间：2012-07-21T13:22:52.993
> 
> 标签：java, class-relationship

假设，我们有类`A_1`to`A_n`和类`B_1`to `B_n`。

每个`A_i`都有关系（抽象的口语；关系可能是“A_4 喜欢 B_2”）到一组`B_j`'，反之亦然。

**问题：**存储关系信息的好地方在哪里？这种问题有好的模式吗？

**解决方案 1：**每个`A_i`都有一个列表字段存储与`B_j`它有关系的 's。

**解决方案 2：**每个`B_i`都有一个列表字段存储`A_j`它与之有关系的 's。

解决方案1和2基本相同。

**解决方案 3：**将信息存储在第三个“信息”类中，例如作为矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:48:07.957

无论您在**解决方案 1**和**解决方案 2**之间选择哪一个，一些关于一个类喜欢什么的信息只存储在另一个类中，这似乎有点倒退。
因此，我肯定会选择一个单独的 RelationKeeper 类，如下所示：

```
public enum RelationType {
    LIKES,HATES...
}
public class Relation {
   RelationType type;
   Class relatedClass; //Or in what type and form this is stored
}
public class RelationKeeper {
   public List<Relation> getRelationsFor(Class c) {
   }
   public void setRelationsFor(Class c, List<Relation> relations) {
   }
   public void addRelationFor(Class c, Relation relation) {
   }
   ...etc
} 
```

这样，您可以自定义和更改内部存储方法以满足您的需求，具体取决于您是否希望能够仅检索类的“传出”关系，或者您是否还希望能够获取“入站”关系。

# php - 在谷歌地图上查询周边城市到某个位置

> ID：11592560
> 
> 赞同：0
> 
> 时间：2012-07-21T13:23:15.917
> 
> 标签：php, javascript, google-maps, google-maps-api-3, google-maps-api-2

我是使用 Google Maps API 的新手。我有一个想解决的问题。我有一个邮政编码和城市名称以及一个输入，我想获取特定半径内输入周围所有城市的名称和邮政编码。

有没有办法使用 Google Maps API 或有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:28:01.653

不可以。Google Maps API 没有邻近搜索。您可以使用harvesine 公式或空间填充曲线（即空间索引）使自己成为一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:35:52.730

邻近搜索/附近地点不是 Google Maps API 的一部分。但是，有可能满足您要求的第三方提供商。首先想到的是[geonames](http://www.geonames.org/)，这个[网络](http://www.geonames.org/export/web-services.html#findNearbyPlaceName)服务似乎就是你要找的。

[例子](http://api.geonames.org/findNearbyPlaceName?lat=47.3&lng=9&radius=50&maxRows=10&username=demo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T14:56:29.063

虽然它不可用，但您可以尝试使用 Places API，在设定的半径内搜索独特的东西（即每个城市 1 个）。也许尝试在邮政编码 XXXXX 周围搜索“市政厅”，半径 30 英里。看看这是否会产生有效的结果。

# excel - 获取一个单元格中的范围总和

> ID：11592567
> 
> 赞同：0
> 
> 时间：2012-07-21T13:24:10.587
> 
> 标签：excel

我想要一个计算给定范围之和的公式。

说我`1,5`在 cell 中`A1`。我想要一个公式来计算`1+2+3+4+5`。也许以更高级的方式，我想输入`1,5;6,3;1,4;...`并让它计算`(1+2+3+4+5)+(6+5+4+3)+(1+2+3+4)`。

不会有负数。

这在Excel中可能吗？对于 range `6,3`，获得较小的数字并数到 6 可能是最容易的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T15:51:52.093

这是一个[用户定义的函数](http://www.cpearson.com/excel/writingfunctionsinvba.aspx)，可以满足您的需求。它也适用于底片。没有错误检查，例如，对于单元格中的字母，分号之间有多个逗号（第一个逗号无论如何都会产生#VALUE 错误）。

在工作簿的模块或插件中输入此函数：

```
Function AddSubstringProgressions(CellContent As String)
Dim Progressions As Variant
Dim Progression As Variant
Dim i As Long, j As Long
Dim Total As Long
Dim Stepwise As Long

Progressions = Split(CellContent, ";")
For i = LBound(Progressions) To UBound(Progressions)
    Progression = Split(Progressions(i), ",")
    If Val(Progression(LBound(Progression))) > Val(Progression(UBound(Progression))) Then
        Stepwise = -1
    Else
        Stepwise = 1
    End If
    For j = Progression(LBound(Progression)) To Progression(UBound(Progression)) Step Stepwise
       Total = Total + j
    Next j
Next i

AddSubstringProgressions = Total
End Function 
```

像这样称呼它：

![在此处输入图像描述](../Images/541cc10c000d7c41f75e144cd7abcfb6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:51:23.110

对于工作表函数方法，您可以尝试以下方法之一：

1.  *基本情况*，例如 A1 =`1,5`或`6,3`

    ```
    =SUMPRODUCT(ROW(INDIRECT(SUBSTITUTE(A1,",",":")))) 
    ```

2.  *一般情况，*例如 A1 = `1,5;6,3;1,4`。

    定义名称`A =EVALUATE("{"&A1&"}")`，然后输入：

    ```
    =SUMPRODUCT(ABS(MMULT(A^2,{1;-1}))/2+A)/2 
    ```

*更新*。基于上述方法的简短VBA udf ...

```
Function SumSeries(Val As String)
SumSeries = Evaluate("SUM(ABS(MMULT({" & Val & "}^2,{1;-1}))/2+{" & Val & "})/2") 
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:58:21.640

这是我想出的：

```
Sub addRange()
    Dim cell As Range
    Dim count As Integer
    count = Application.WorksheetFunction.CountA(Range("A:A"))
    Dim i As Integer
    i = 1
    Do While i <= count
        Dim low As Integer
        Dim high As Integer
        low = Mid(Range("A" & i), 1, Application.WorksheetFunction.Search(",", Range("A" & i)) - 1)
        high = Mid(Range("A" & i), Application.WorksheetFunction.Search(",", Range("A" & i)) + 1, Len(Range("A" & i)))
        If (low > high) Then
            Dim copy As Integer
            copy = low
            low = high
            high = copy
        End If
        Range("B" & i) = adder(low, high)
        i = i + 1
    Loop
End Sub

Function adder(low As Integer, high As Integer) As Integer
    Dim sum As Integer
    sum = 0
    Do While low <= high
        sum = sum + low
        low = low + 1
    Loop
    adder = sum
End Function 
```

这假设您在单元格 A1:An 中具有`2,5`、`6,4`、等值。`1,8`它不适用于`2,5;6,4`您所描述的更高级功能的值，但它可以完成基本功能的工作。

# html - 将 svg 嵌入 html 的可重用性

> ID：11592570
> 
> 赞同：1
> 
> 时间：2012-07-21T13:24:33.660
> 
> 标签：html, css, svg

我正在努力弄清楚如何通过将 *.svg 文件放置在我的 HTML 站点中的不同位置来重用它们的正确方法，但在不使用 JavaScript 的情况下应用不同的样式表。

来自 index.html 的片段：

```
<OBJECT type="image/svg+xml" data="myLogo.svg" class="svglogo">
<img src="svglogo_fallback.png">
</OBJECT> 
```

myLogo.svg:

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" class="mySvg" id="test" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="841.89px" height="595.28px" viewBox="0 0 841.89 595.28" enable-background="new 0 0 841.89 595.28" xml:space="preserve">

<defs>
    <style type="text/css"><![CDATA[
       .mySvg .teste {
         fill: red;
       }
    ]]></style>
  </defs>

<path class="teste" fill="#000000" d="abcdefg"/>
</svg> 
```

在 *.svg 中看到的一种可能性是使用 CSS 将填充更改为红色，这非常有效，但也意味着每个嵌入的 myLogo.svg 都会变成红色。

有什么方法可以在不使用 JavaScript 的情况下为嵌入对象分配正确的 CSS 样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:06:41.490

我不是 100% 确定你想要什么，但我很确定答案是你不能按照你想要的方式做事。我认为这个问题是相关的：[How to apply a style to an embedded SVG?](https://stackoverflow.com/questions/4906148/how-to-apply-a-style-to-an-embedded-svg)

# c++ - 在 C++ 中伪造静态 If

> ID：11592573
> 
> 赞同：8
> 
> 时间：2012-07-21T13:24:56.600
> 
> 标签：c++, optimization, if-statement, static, static-if

我正在测试各种优化的组合，为此我需要一个静态如果，如[http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Static-If-I-Had-a-Hammer)中所述启用并禁用特定优化。if(const-expr) 并不总是有效，因为某些优化涉及更改数据布局，而这不能在函数范围内完成。

基本上我想要的是这样的：

```
template<bool enable_optimization>
class Algo{
  struct Foo{
    int a;
    if(enable_optimization){
      int b;
    }

    void bar(){
      if(enable_optimization){
        b = 0;
      }
    }
  };
}; 
```

（是的，在我的情况下，从数据布局中删除 b 的较小内存占用是相关的。）

目前我正在使用非常糟糕的黑客来伪造它。我正在寻找一种更好的方法来做到这一点。

档案啊

```
#ifndef A_H
#define A_H
template<class enable_optimization>
class Algo;
#include "b.h"
#endif 
```

文件 bh（此文件由 Python 脚本自动生成）

```
#define ENABLE_OPTIMIZATION 0
#include "c.h"
#undef
#define ENABLE_OPTIMIZATION 1
#include "c.h"
#undef 
```

文件通道

```
template<>
class Algo<ENABLE_OPTIMIZATION>{
  struct Foo{
    int a;
    #if ENABLE_OPTIMIZATION
    int b;
    #endif

    void bar(){
      #if ENABLE_OPTIMIZATION
      b = 0;
      #endif
    }
  };
}; 
```

有谁知道这样做的更好方法？理论上它可以使用模板元编程来完成，起初我使用它。至少我使用它的方式很痛苦，并导致完全不可读和臃肿的代码。使用上面的 hack 可以显着提高生产力。

编辑：我有几个优化标志，它们相互作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T14:12:02.613

没有理由使用模板使代码变得更加复杂：

```
template<bool enable_optimization>
  class FooOptimized
  {
  protected:
    int b;
    void bar_optim()
    {
      b = 0;
    }
  };

template<>
  class FooOptimized<false>
  {
  protected:
    void bar_optim() { }
  };

template<bool enable_optimization>
  struct Algo
  {
    struct Foo : FooOptimized<enable_optimization>
    {
      int a;

      void bar()
      {
        this->bar_optim();
      }
    };
  }; 
```

不需要元编程，只需将根据是否启用优化而变化的部分分离为新类型并对其进行专门化。

因为新类型在为空（即没有成员）时用作基类`FooOptimized::b`，所以不会占用空间，所以`sizeof(Algo<false>::Foo) == sizeof(int)`.

* * *

（请随意忽略此答案的其余部分，它没有直接解决问题，而是提出了一种具有不同权衡的不同方法。它是否“更好”完全取决于真实代码的细节，在问题中给出的简单示例中未显示。）

作为一个相关但独立的问题，不依赖于是否启用优化的部分和*仍然*`Algo`依赖于模板参数，因此尽管您只编写这些代码位一次，编译器将生成两组目标代码. 根据该代码中的工作量及其使用方式，您可能会发现将其更改为非模板代码有一个优势，即用动态多态性替换静态多态性。例如，您可以使标志成为运行时构造函数参数而不是模板参数：`Algo::Foo`*`enable_optimization`*

 *```
struct FooImpl
{
  virtual void bar() { }
};

class FooOptimized : FooImpl
{
  int b;
  void bar()
  {
    b = 0;
  }
};

struct Algo
{
  class Foo
  {
    std::unique_ptr<FooImpl> impl;
  public:
    explicit
    Foo(bool optimize)
    : impl(optimize ? new FooOptimized : new FooImpl)
    { }

    int a;

    void bar()
    {
      impl->bar();
    }
  };
}; 
```

您必须对其进行分析和测试，以确定虚拟功能是否比代码重复具有更多或更少的开销，`Algo`并且`Algo::Foo`不依赖于模板参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:02:04.030

**注意：就目前而言，这种方法不起作用，因为如果不为该成员分配空间，似乎无法在一个类中拥有一个成员。如果您知道如何使其工作，请随时进行编辑。**

你可以使用这样的成语：

```
template<bool optimized, typename T> struct dbg_obj {
  struct type {
    // dummy operations so your code will compile using this type instead of T
    template<typename U> type& operator=(const U&) { return *this; }
    operator T&() { return *static_cast<T*>(0); /* this should never be executed! */ }
  };
};
template<typename T> struct dbg_obj<false, T> {
  typedef T type;
};

template<bool enable_optimization>
class Algo{
  struct Foo{
    int a;
    typename dbg_obj<enable_optimization, int>::type b;

    void bar(){
      if(enable_optimization){
        b = 0;
      }
    }
  };
}; 
```

如果优化被禁用，这会给你一个普通的`int`成员。如果启用优化，则类型为`b`不带成员的结构，不会占用任何空间。

由于您的方法`bar`使用看起来像运行时的​​东西`if`来决定是否访问`b`，而不是像模板专业化这样的明确的编译时机制，因此您使用的所有操作也`b`必须可以从虚拟结构中获得。即使相关部分永远不会被执行，并且编译器很可能将它们优化掉，正确性检查仍然是第一位的。因此，该行`b = 0`也必须针对替换类型进行编译。这就是虚拟分配和虚拟演员操作的原因。尽管其中任何一个都足以满足您的代码，但我将两者都包括在内，以防它们在其他时候证明有用，并让您了解如何在需要它们时添加更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:13:33.970

Jonathan Wakely 提出的静态解决方案（不是动态解决方案）是可行的方法。

这个想法很简单：

1.  将“特定”数据隔离到自己的类中（相应地进行模板化和专门化）
2.  对该数据的所有访问都完全交给专用类（接口必须统一）

然后，为了不产生空间开销，您可以通过继承这个特殊类的任一特化来使用 EBO（空基优化）。

*注意：一个属性至少需要占用 1 个字节的空间，基类在某些情况下是不需要的（例如为空）。*

在你的情况下：

*   `b`是具体数据
*   有一个涉及它的操作（包括设置它的值）

所以我们可以很容易地构造一个类：

```
template <typename T> struct FooDependent;

template <>
struct FooDependent<true> {
    int b;
    void set(int x) { b = x; }
};

template <>
struct FooDependent<false> {
    void set(int) {}
}; 
```

然后我们可以将它注入到 中`Foo`，使用 EBO 是我们的优势：

```
struct Foo: FooDependent<enable_optimization> {
    int a;

    void bar() { this->set(0); }
}; 
```

*注意：`this`在模板代码中使用来访问基类的成员，否则好的编译器会拒绝你的代码。**

# iphone - 应用内购买：获取用户购买的 App Store

> ID：11592579
> 
> 赞同：2
> 
> 时间：2012-07-21T13:25:45.303
> 
> 标签：iphone, ios, in-app-purchase, storekit

例如，是否可以判断是否在英国/美国商店进行了购买？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:39:05.650

据我所知，我认为没有一种方法可以检测用户下载的特定商店，但是最合理的解决方案是检测他们的语言环境，并假设他们使用默认商店他们的具体位置。

```
NSLocale *locale = [NSLocale currentLocale];
NSString *country = [locale objectForKey: NSLocaleCountryCode];

if ([country isEqualToString:@"UK"]){
    // United Kingdom
} 
```

但是，用户可以在设备上更改他们的商店设置，因此此解决方案可能不会一直有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:14:17.173

通常，您会做 a`SKProductsRequest`并通过 get 接收产品列表`SKProductsRequestDelegate`。`- (void)productsRequest:(SKProductsRequest*)request didReceiveResponse:(SKProductsResponse*)response`

`response.products`是一个`SKProduct`s 的数组。并且`SKProduct`有`priceLocale`，它告诉您将在哪个国家/应用商店进行购买。而已！

# bash - Bash 进度条

> ID：11592583
> 
> 赞同：10
> 
> 时间：2012-07-21T13:27:03.690
> 
> 标签：bash, progress-bar

我正在使用以下脚本来遍历 whois 中的大量域并找到注册商（对服务器/DNS 迁移很有用），它工作正常。

但是，为了方便起见，我想将进度条合并到其中。这是我的脚本，如果可以改进，请告诉我：

```
#!/bin/bash
for f in `cat /var/www/vhosts/domainlist`
 do
   if
   domain=$f
   [ "$domain" ] ;
   then
    whois $f | grep -i domainregistrar > /dev/null
     if
     [ $? -le 0 ] ;
     then
      echo $f >> our_registrar
     else
      echo $f >> external_registrar
     fi
   fi
 done
echo "Done, check our_registrar file." 
```

我首先尝试过这个：http: [//moblog.bradleyit.com/2010/02/simple-bash-progress-bar-function.html](http://moblog.bradleyit.com/2010/02/simple-bash-progress-bar-function.html)

然后[这个](http://www.theiling.de/projects/bar.html)，但没有运气。

您认为在该脚本中实现进度条的最简单方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-19T05:47:57.100

这是您可能会喜欢的精美进度条...

```
#!/bin/bash
#   Slick Progress Bar
#   Created by: Ian Brown (ijbrown@hotmail.com)
#   Please share with me your modifications
# Functions
PUT(){ echo -en "\033[${1};${2}H";}  
DRAW(){ echo -en "\033%";echo -en "\033(0";}         
WRITE(){ echo -en "\033(B";}  
HIDECURSOR(){ echo -en "\033[?25l";} 
NORM(){ echo -en "\033[?12l\033[?25h";}
function showBar {
        percDone=$(echo 'scale=2;'$1/$2*100 | bc)
        halfDone=$(echo $percDone/2 | bc) #I prefer a half sized bar graph
        barLen=$(echo ${percDone%'.00'})
        halfDone=`expr $halfDone + 6`
        tput bold
        PUT 7 28; printf "%4.4s  " $barLen%     #Print the percentage
        PUT 5 $halfDone;  echo -e "\033[7m \033[0m" #Draw the bar
        tput sgr0
        }
# Start Script
clear
HIDECURSOR
echo -e ""                                           
echo -e ""                                          
DRAW    #magic starts here - must use caps in draw mode                                              
echo -e "          PLEASE WAIT WHILE SCRIPT IS IN PROGRESS"
echo -e "    lqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqk"  
echo -e "    x                                                   x" 
echo -e "    mqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqj"
WRITE             
#
# Insert your script here
for (( i=0; i<=50; i++ ))  
do
    showBar $i 50  #Call bar drawing function "showBar"
    sleep .2
done
# End of your script
# Clean up at end of script
PUT 10 12                                           
echo -e ""                                        
NORM 
```

看起来像这样：

![看起来像这样](../Images/aa2809f34fdbe16a077bee766d14eba8.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-21T16:05:42.030

您可以使用`pv`其他方式。

```
 for ... # outer loop
 do
   ...
   echo -n X
 done | pv -s $(wc -l 'your_file_list') - >/dev/null 
```

所以你习惯`echo X`说当另一部分工作完成并且这由 pv 计算时，它知道由于`-s`选项而导致的整个工作规模是多少。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-22T19:01:20.317

你可以使用类似的东西：

```
progress(){
    # example usage:
    # progress 30G 9G 30
    # 30G [================>.................................] 30% (9G)

    # params:
    # $1 = total value (e.g.: source size)
    # $2 = current value (e.g.: destination size)
    # $3 = percent completed
    [[ -z $1 || -z $2 || -z $3 ]] && exit  # on empty param...

    percent=$3
    completed=$(( $percent / 2 ))
    remaining=$(( 50 - $completed ))

    echo -ne "\r$1 ["
    printf "%0.s=" `seq $completed`
    echo -n ">"
    [[ $remaining != 0 ]] && printf "%0.s." `seq $remaining`
    echo -n "] $percent% ($2)  "
} 
```

来自[https://gist.github.com/ivanalejandro0/9159989](https://gist.github.com/ivanalejandro0/9159989)

[您可以在https://github.com/ivanalejandro0/misc/blob/master/shell-scripts/copy-progress.sh](https://github.com/ivanalejandro0/misc/blob/master/shell-scripts/copy-progress.sh)中查看使用示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T16:32:20.220

鉴于您在评论中提到您使用的是基于 debian 的系统，您可以使用`whiptail`. 当您安装需要配置的 deb 包时，会绘制基于文本的窗口来询问您的内容；那是`whiptail`。

就像是

```
#!/usr/bin/env bash

# mapfile requires bash 4
mapfile -t domains < /var/www/vhosts/domainlist

# for older bash versions, read can be used in this case.
#IFS=$'\n' read -rd '' -a domains < /var/www/vhosts/domainlist

n=${#domains[@]}

for ((i=0; i < n; ++i)); do
    printf 'XXX\n\n%s\nXXX\n' "Checking ${domains[i]}"
    if whois "${domains[i]}" | grep -Fiq domainregistrar; then
        printf '%s\n' "${domains[i]}" >&3
    else
        printf '%s\n' "${domains[i]}" >&4
    fi
    printf '%d\n' $((100*i/n))
done 3>our_registrar 4>external_registrar | whiptail --gauge "" 6 50 0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T13:44:14.177

将外循环更改为：

```
pv /var/www/vhosts/domainlist | while read f
do
    ...
done 
```

[http://linux.die.net/man/1/pv](http://linux.die.net/man/1/pv)

或者，您可以使用任何其他提供基于文件已读取量的进度条的程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-21T13:30:45.833

我建议您使用 Xdialog、Kdialog 或 zenity 以及它的进度选项。

# java - Spring 示例应用程序不考虑 tomcat 应用程序路径

> ID：11592589
> 
> 赞同：0
> 
> 时间：2012-07-21T13:27:58.777
> 
> 标签：java, spring, config, web-deployment

我试图在 localhost Tomcat 7 安装上运行[这个 Spring 示例。](http://sleeplessinslc.blogspot.nl/2012/01/spring-31-mvc-example.html)我正在使用货物以以下坐标来部署战争：

```
<deployable>
    <groupId>demo</groupId>
    <artifactId>sleepless</artifactId>
    <type>war</type>
</deployable> 
```

当我从 Tomcat 管理器访问该应用程序时，它会将我带到：

```
http://localhost:8080/sleepless-1.0/home.html;jsessionid=DFBD9DB5B15416188D9E45A7FDC0D375 
```

这很好。当我单击页面链接时，它会将我带到（例如）：

```
http://localhost:8080/searchFlights.html 
```

该`/sleepless-1.0`部分丢失，我得到一个 404。如何确保这个 spring 示例将丢失的部分添加到所有页面？缺少什么配置？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:48:47.570

链接生成如下：

```
<a href="/searchFlights.html" title="Flights"> 
```

所以它完全忽略了 webapp 的上下文路径（并且不支持 URL 重写作为跟踪会话的手段）。它应该使用 JSTL`<c:url>`标签：

```
<a href="<c:url value='/searchFlights.html'/>" title="Flights"> 
```

# performance - 解释 strace 以表征延迟/延迟

> ID：11592594
> 
> 赞同：1
> 
> 时间：2012-07-21T13:28:52.357
> 
> 标签：performance, strace

我在 Linux Kernel 2.6.27.45 的嵌入式系统上运行了一个守护进程。其中一个进程没有按预期执行，我尝试使用*strace*进行进一步分析。（我添加了一些功能以将附加进程的堆栈跟踪打印到 strace，遵循网上的一些帖子）。使用的命令是：

```
enter code here
strace  -T -i -r -tt -q -O 1 -o /tmp/syscallsM -p $tpid 
```

我得到如下输出（在第 1 列排序后）：

```
0.966638 [088cea24: 360eead8 08f9e71c ]089985d4 ]08998e20 ]12c9352c ]1058e71c ]10551388 ]1054e120 ]10517f40 ]105143e0 ]10514c1c ]write(33, "x", 1) = 1 <0.028588>

 0.417500 [088d625c: 3b3e1878 121576e8 ]12163e1c ]1216473c ]12b6e75c ]112bc3e0 ]112d7880 ]112d7aa0 ]112d6b00 ]112d9aec ]112fd000 ]ioctl(29, 0x20004c01, 0) = 0 <0.000032>

 0.282577 [1019e878: 30766c98 1374a008 ]1374a1f0 ]10198854 ]10198b0c ]1019908c ]10195cb4 ]10195e08 ]1019611c ]1019a810 ]10191fa0 ]--- SIGVTALRM (Virtual timer expired) @ 0 (0) ---

 0.252104 [082f4808: 35a55a08 0899e314 ]1217ecb8 ]11c47918 ]1219a614 ]12bfeee4 ]1058e71c ]105c51f0 ]105c5980 ]10578674 ]105bfa4c ]futex(0x89ba380, FUTEX_LOCK_PI, 1) = 0 <0.000033> 
```

我的问题是：

(1) 如果我们以 0.252104 开头的行为例，这是否意味着 252ms 包括先前在堆栈上的所有函数(1019e878,...10191fa0) 和执行到调用 futex( ) 在当前堆栈 (082f4808...1219a614,..10578674) 加上任务被调度的时间加上执行 futex() 调用（即 33us）？

(2) 有没有办法确定 futex() 调用是否真的导致进程等待？

(3) 内核在进行系统调用时是否会调度该任务？

(4) 以0.282577开头的行中，SIGALARM时间是否会导致283ms的延迟？(5) 在以 0.417500 开头的行中，调用 ioctl() 会导致 418ms 的延迟吗？（虽然 ioctl() 本身是在 32us 内完成的）。谢谢并恭祝安康。

# android - 构建自定义对象数组导致空指针异常

> ID：11592596
> 
> 赞同：0
> 
> 时间：2012-07-21T13:29:35.383
> 
> 标签：android, arrays, custom-object

我从一个自定义的多级对象（这里称为venueCounter）的大列表中声明了一个简单的自定义对象数组，其中仅包含填充列表所需的信息。我这样做是因为它更容易对我的列表进行排序并在我的列表中创建部分。

但是当我尝试它时，我得到一个空指针异常。我认为这很奇怪，因为当我尝试填充 stringArray 时它工作正常。这是我失败的代码：

```
 ListData ld[]= new ListData[venueCounter.size()];
     int selectedPic;
     JJsonResponse e;
     for(int i=0;i < venueCounter.size() ;i++){
         selectedPic = 0;
         e = venueCounter.get(i);
         ld[i]= null;//           data in listdata object   
         ld[i].name=e.venue.name;
         ld[i].tip_nl=e.venue.tip;
         ld[i].tip_en=e.venue.tip_en;
         ld[i].venueID=e.venue.id;
         // foto uitkiezien
         if (e.venue.venue_photos.isEmpty() == false){ // there is a picture
            for(int j=0; j < e.venue.venue_photos.size() ;j++){ // use user selected picture
                 if(e.venue.venue_photos.get(j).selected == true){ 
                     selectedPic = j;
                 }
                ld[i].photoUrl=e.venue.venue_photos.get(selectedPic).medium;
             }
         }else
             {
             ld[i].photoUrl="url for when there is no url";
           }

         Log.i("url nr. " + String.valueOf(i), ld[i].photoUrl);
     } 
```

有错误的行是：

```
ld[i].name=e.venue.name; 
```

但奇怪的是，当我声明一个字符串数组并填充它时：

```
String name[]=new String[venueCounter.size()]; 
```

并在代码中进一步

```
name[i]=e.venue.name; 
```

一切正常！但我想要这个列表数据数组，所以我可以把它放在我的适配器中并使用它。有谁知道为什么我的代码失败以及我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:35:52.653

我认为这里的主要问题是与

```
 ld[i]= null; 
```

如果您将其设为空，它将无法保存任何数据。你应该做一个新的 ListData()... 而不是 null。

它适用于字符串，因为每当您使一个字符串等于另一个字符串时，java 都会创建新对象，依此类推。

希望我已经正确解释了。

# c++ - stringstream 从 double 到 char，没有失败，没有异常

> ID：11592597
> 
> 赞同：1
> 
> 时间：2012-07-21T13:29:35.903
> 
> 标签：c++, exception, stringstream

我的代码只是为了测试。当类型转换不可能时，我尝试检查 stringstream 是否会抛出异常。

以下是我的代码。您可以在您的环境中检查它。

```
#include <string>
#include <iostream>
#include <sstream>

using namespace std;

int main() {
    stringstream stream("432.23");
    char c = 0;
    try {
      if(!stream>>c) {
        cout<<"Error happend"<<endl;
        return 0;
      }
    }
    catch(...) {
      cout<<"Exception happend"<<endl;
    }

    cout<<"c="<<c<<endl;
    return 0;
} 
```

输出是 c=^@

它不应该找到错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:41:24.383

操作员！具有比 operator>> 更高的优先级，因此您必须将代码更改为`if(!(stream>>c))`. 之后你得到 c = 4

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T13:44:41.137

您的问题与运算符优先级有关

线

```
if(!stream>>c) { 
```

相当于

```
if(0 >> c) 
```

要获得预期的行为，您需要使用括号：

```
if(!(stream>>c)) { 
```

然后，您将首先尝试转换，然后检查流的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T13:49:23.230

那么代码有两个问题：

`if (!stream>>c`读入 c 后不会测试流故障位，它会右移故障位 c (0) 步骤，因为！优先于 >>，您应该将其更改为`if (!(stream>>c))`.

将 char '4' 读入 c 也可以正常工作，因此即使更改 if 语句也不会出错。

如果您希望流引发异常，您可以做的是在流上设置异常（但在将 char '4' 读入 c 时仍然不会出错）。

```
stream.exceptions(ios_base::failbit | ios_base::badbit); 
```

# php - 警告：PHP 和 MySQL 上的零除法

> ID：11592602
> 
> 赞同：1
> 
> 时间：2012-07-21T13:30:43.333
> 
> 标签：php, mysql, loops, division, zero

我正在使用从 mysql 中提取的数组进行计算，问题是“除以零”警告

我在这个语句上运行一个循环

```
$v = (($v - $valuei)/($valuei) * 100); 
```

这里 $v 正在变化（假设从 100 到 150，例如 100、101、102、103、...、150）并且 $valuei 是 $v 的初始值（即 100）所以，当计算将首先开始输出应该为零，我想要那个零，那么为什么它会给出警告“除以零”并且还使所有“$v”值都等于零。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:38:52.700

警告表明，$valuei 实际上在其中一次运行期间为 0。

您确定 $valuei 已正确初始化吗？要摆脱警告，您应该添加 do：

```
if($valuei != 0) {
    $v = (($v - $valuei)/($valuei) * '100');
} 
```

这样，警告应该消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:37:35.587

如果在第一次迭代`$valuei`中最初设置为then ，因此，您正在除以零（或者更确切地说，试图将 0 除以*something*，这是一个错误）。`$v``(x - x) = 0`

 *没有看到循环的其余部分，我只能推测，但我怀疑您可能前进的方向是在索引“1”而不是“0”处开始循环。

另外，为什么要乘以“100”而不是 100？*

# eclipse - 为 Eclipse CDT 中的函数自动生成注释（文档）

> ID：11592605
> 
> 赞同：14
> 
> 时间：2012-07-21T13:31:00.890
> 
> 标签：eclipse, eclipse-cdt

我正在使用带有 CDT 的 eclipse Juno。我在 cpp 文件中编写了一个函数，我想为该函数添加注释。CDT 是否支持通过“输入 /** 然后按回车”自动生成评论？在我的情况下，自动生成的评论如下。

```
/**
 * 
 */ 
```

正如[这里](https://stackoverflow.com/a/7590019/2436175)所解释的，我什至配置为使用 Doxygen 支持。转到 C/C++ -> 编辑器 -> 文档工具注释：Doxygen。

我仍然收到上述评论。如何配置 eclipse 以添加我自己风格的评论？

我什至在代码模板中更改了注释。转到 C/C++ -> 代码样式 -> 代码模板 -> 注释。我更改了类型、字段、方法。我仍然没有运气。

有人可以帮助我吗？

谢谢，拉维

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T12:31:57.567

如果您想要自动填写参数等，就像 Eclipse for Java 一样。

打开您的项目属性。然后是 C++ 通用。然后选择 Doxygen 作为您的文档工具。类型 /** 就像您为获得完整的评论所做的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-20T14:40:35.587

为了完整起见，由于它通常有效，并且没有关于用户提出此问题的任何具体问题的反馈，我想指出[一般有效的解决方案](https://stackoverflow.com/a/7590019/2436175)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T17:59:38.427

尝试在函数上方键入它。它会起作用的。但是不确定编码模板。

# java - 使用 twitter4j 保存和加载推文

> ID：11592607
> 
> 赞同：0
> 
> 时间：2012-07-21T13:31:16.103
> 
> 标签：java, android, twitter4j

我想编写一个使用 twitter4j 获取推文的 Android 应用程序。我想让应用程序保存下载的推文（例如在数据库中），并在没有互联网连接的情况下启动应用程序或在下载时间线之前显示时间线。此功能在官方 Twitter Android 应用程序中实现。

twitter4j 使用[StatusJSONImpl](https://github.com/yusuke/twitter4j/blob/master/twitter4j-core/src/main/java/twitter4j/internal/json/StatusJSONImpl.java)类存储推文。

我不知道如何用自定义数据（应用程序在前一个会话中获得的推文）来实例化这个类。

我无法扩展该类，因为所有属性都是私有的。我是否必须更改类本身并编译整个 twitter4j 库（我什至不知道这是否可能）还是有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:10:12.107

与其直接存储来自 twitter4j 的查询，不如构建自己对流是什么的解释并存储它。然后，当您没有互联网连接时，您甚至不与 twitter4j 交谈，而只是显示您存储的内容。然后，您可以使用 twitter4j（当您有连接时）向您更新最新的推文，并使您的商店保持最新。

# asp.net - Windows服务asp.net的长期运行存储过程

> ID：11592608
> 
> 赞同：0
> 
> 时间：2012-07-21T13:31:19.953
> 
> 标签：asp.net, sql-server

我有五个存储过程，每个 sp 大约需要一个多小时，我只是通过创建 windows 服务连续运行这些 sp，一小时后运行服务时出现与连接相关的错误

我在下面给出的连接字符串..我正在使用 asp.net（C# 编码）

数据源=127.0.0.1；初始目录=xxxx；用户=xx；密码=xxxxx；

错误是连接清理期间发生传输级错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:30:08.373

传输级别错误通常与连接到 sql server 的连接被破坏......通常是网络。

当 sql 查询运行时间过长时，通常会抛出 Timeout Expired。

所以很少有选项可以是：
1）检查互联网连接（如果你的 sql server 和 Visual Studio 之间的连接是通过网络完成的）
2）检查 VPN 中的连接（如果使用）或任何其他工具
3）重新启动 IIS
4）重新启动machine
5）优化sql查询。

# openerp - Openerp sxw 报告

> ID：11592609
> 
> 赞同：0
> 
> 时间：2012-07-21T13:31:21.447
> 
> 标签：openerp, reportlab

我对 进行了一些更改`addons/sale/report/sale_order.rml`，但 OpenERP 继续显示旧版本的报告。如何让它使用新版本的 RML 文件？

我认为它可能是从二进制数据中加载报告定义，`ir_act_report_xml.report_rml_content_data`而不是加载 RML 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T21:25:57.763

我在代码中搜索了对它的引用，`report_rml_content_data`但找不到任何使用它或填充它的代码。`addons/6.1`除了分支中的插件之外，您是否使用了任何额外的插件？我在该表中的所有记录在该字段中都为空。

我建议您尝试将该字段设置为 null 并查看它是否开始读取您的新文件。当然，在您的实时数据库副本中执行此操作。

你真的确定它没有使用 RML 文件吗？我在 RML 文件中有一些错误，导致它忽略了一个部分。尝试更改页面顶部的标题，或在订单名称中添加“X”以查看这些更改是否会在您运行报告时出现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T03:59:25.347

如果您停止此功能，将出现的问题是您无法打印任何报告，因为在 OpenERP 报告案例中，`rml`是使用该模板呈现报告的模板。

如果你想这样做，那么检查文件：

*   /server/openerp/report/report_sxw.py
*   /server/openerp/addons/base/ir/ir_actions.py
*   /server/openerp/osv/orm.py

该文件将帮助您消除您的要求。但**要小心**，它可能会停止您的报告引擎。

问候

# java - 开始 java 类和类路径通配符

> ID：11592610
> 
> 赞同：0
> 
> 时间：2012-07-21T13:31:34.083
> 
> 标签：java, classpath, command-line-arguments

我正在尝试从命令行（Java 7.0，Windows XP）启动 java 类。类被打包到 jar 中，并与执行所需的其他 jar 一起部署到执行环境。不要冗长（也不要硬编码可能很少更改的罐子列表）我正在尝试使用通配符。下一个代码对我不起作用

```
java -cp ../classes/* some.package.Main 
```

它从该目录的第一个 jar 中显示“无法找到或加载主类”。Java 不会在其他 jar 中查找我的类。
它应该根据[理解类路径和包名](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)，不是吗？

如果我明确设置 jar 文件，一切正常

```
java -cp ../classes/playground.jar some.package.Main 
```

但这不适合我，因为在其他 jar 中我也有主类，我希望只有一个带有配置的类路径和环境变量等的启动脚本，并且只将类名作为启动的参数。

第一个命令行有什么问题？

已解决：[java 类路径中的转义通配符处理](https://stackoverflow.com/questions/11607873/escape-wildcard-processing-in-application-arguments)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:34:33.120

您需要创建一个清单并定义哪个类是主类。这是一个[参考](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:34:52.760

运行具有主类的 jar 只需执行以下操作：

```
java -jar ../classes/playground.jar 
```

它会..尝试

# android - 多次插入异步任务数据。安卓

> ID：11592611
> 
> 赞同：0
> 
> 时间：2012-07-21T13:31:46.977
> 
> 标签：android

我正在尝试将用户的消息插入 xml 文件数据库。

我的客户端在 android 上，服务器在 php.Php 上负责在 xml 中插入数据。

用户在文本框中写下他的消息并按下提交，文本被插入到列表视图中一次，但多次插入到数据库中。

我尝试`php`通过传递我从 android 应用程序发送的相同参数直接在 xml 文件中插入值，它工作正常。它只插入一次值。

这是在列表视图中插入的提交按钮的代码以及`asynctask`在数据库中插入的调用：

```
final Button Submit= (Button) findViewById(R.id.SubmitButton);
            Submit.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {

                        String     data=chatbox.getText().toString();

                        HashMap<String,String> hashMap=new HashMap<String,String>();    
                        hashMap.put("You",chatbox.getText().toString());    //insert username(You) value in chatbox to hashmap

                        hashMap.put(HandleJSON.Key_username, "You");
                        hashMap.put(HandleJSON.Key_messageText, data);
                        hashMap.put(HandleJSON.Key_messageDate, UserAdminChatActivity.LastShowingChatDate);

                        HandleJSON.newObject=false;
                        adapter.hashmap.add(adapter.hashmap.size(), hashMap);
                        adapter.notifyDataSetChanged();

                        new InsertAdminChat().execute();

         }}); 
```

这是`asynctask`调用`httprequest`函数在数据库中插入数据的类。

```
 public class InsertAdminChat extends AsyncTask<Void,Void,Void>{

            @Override
            protected Void doInBackground(Void... void1) {
                sendHttpRequest("set", "admin", "You" ,chatbox.getText().toString(),clientEmail,"");                    
                return null;
            }
     } 
```

这是 httpRequest 函数：

```
private String sendHttpRequest(String action,String callFrom,String userName,String chatText,String email,String dateChat)
 {
        httpRequest=new HttpRequest(action,callFrom,userName,chatText,email,dateChat);  
        String data=httpRequest.ExecuteRequest();
        Log.i("mojiiiiii",data);
        httpRequest.ExecuteRequest();
        return data;
 } 
```

这是我的`HTTPREQUEST`类，由 httprequest 函数调用，用于在数据库中插入数据。

```
public class HttpRequest {

private final String action;
private final String callFrom;
private final String userName;
private final String chatText;
private final String email;
private final String dateChat;

private HttpClient httpclient;
private HttpGet httpget;
private HttpResponse response ;
private HttpEntity entity;

public HttpRequest(String action,String callFrom,String userName,String chatText,String email,String dateChat)
{

    this.action=action;
    this.callFrom=callFrom;
    this.chatText=chatText;
    this.email=email;
    this.userName=userName; 
    this.dateChat=dateChat;

        httpclient= new DefaultHttpClient();
        httpget = new HttpGet("http://10.116.25.189/php/Chat/xmlManipulator.php?" +
                                                        "action="+this.action+
                                                        "&username="+this.userName+
                                                        "&chatText="+this.chatText+
                                                        "&email="+this.email+
                                                        "&callfrom="+this.callFrom+
                                                        "&dateChatToRetrieve="+URLEncoder.encode(this.dateChat));   //test purposes k liye muazzam
}

public String ExecuteRequest()
{
    try {
    response = httpclient.execute(httpget);
    entity=response.getEntity();

    if(entity!=null)
    {
              InputStream inputStream=entity.getContent();
              String result= convertStreamToString(inputStream);
              Log.i("finalAnswer",result);
              return result;
    }
}
catch (ClientProtocolException e) 
{

    Log.e("errorhai",e.getMessage());
}
catch (IOException e) 
{
    Log.e("errorhai",e.getMessage());
}
    return "";
}

private static String convertStreamToString(InputStream is) {

    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");

        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
 }     

} 
```

# css - CSS 垂直对齐稍微偏离

> ID：11592615
> 
> 赞同：2
> 
> 时间：2012-07-21T13:32:54.883
> 
> 标签：css, vertical-alignment

好的，所以这让我发疯： http: [//jsfiddle.net/C3YMJ/2/](http://jsfiddle.net/C3YMJ/2/)
图像应该垂直居中在 中`div`，但如您所见，它略微偏离中心。我无法让它准确地居中。任何帮助将非常感激。
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:57:32.960

您可以使用 CSS`position`属性将图像垂直居中：

```
div { 
    position:relative;
}

img {
    position:absolute;
    top:0;
    bottom:0;
    margin:auto;
} 
```

JS 小提琴： http: [//jsfiddle.net/C3YMJ/22/](http://jsfiddle.net/C3YMJ/22/) ​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:42:54.040

您可以删除该`vertical-align`属性，它没有任何效果，因为图像没有可以应用的子元素。

`line-height: 20px;`上使用`div`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T13:48:23.620

添加**`line-height: 100%`**到您的 DIV 将解决问题。

**演示**：http: [//jsfiddle.net/C3YMJ/9/](http://jsfiddle.net/C3YMJ/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T13:54:54.167

我会从 div 中取出高度，并在顶部和底部使用填充。

```
html: <div><img src="https://www.google.com/images/srpr/logo3w.png" height="10" /></div>​
css:  div {background-color: blue; padding: 5px 0;} 
```

这将使它在中间对齐。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-21T13:40:49.827

你的代码不起作用。如果你增加两个高度它完全不居中：http: [//jsfiddle.net/WouterJ/C3YMJ/3/](http://jsfiddle.net/WouterJ/C3YMJ/3/)

有关如何解决此问题的更多信息，请参阅Chris Coyier[的未知文章中的居中。](http://css-tricks.com/centering-in-the-unknown/)

编辑：删除错误的陈述。

# java - 简单的 Java 服务器/客户端不起作用？

> ID：11592617
> 
> 赞同：1
> 
> 时间：2012-07-21T13:33:05.017
> 
> 标签：java, stream, client, inputstream, outputstream

我有一个基本的服务器和一个用 Java 编码的客户端。这是我在互联网上看到的代码，并根据我的需要进行了一些修改。现在的问题是，我基本上是从客户端向服务器发送消息。该消息将是“你好”。服务器检查端口 6789 是否有包含单词“hello”的消息，如果是这样，它必须获取某个目录中所有文件/子目录的名称。这些名称中的第一个被发送回客户端并由客户端打印出来。我已经打开端口 6789 并将消息从客户端发送到服务器工作正常。服务器接收它并执行必要的操作，但它不会将数据发送回客户端。我不知道客户端是否没有收到它或服务器是否没有发送它。这是两个代码：

客户

```
 String sentence = "hello";
    Socket clientSocket = new Socket("localhost", 6789);
    DataOutputStream outToServer = new DataOutputStream(
            clientSocket.getOutputStream());
    outToServer.writeBytes(sentence + '\n');
    BufferedReader inFromServer = new BufferedReader(new InputStreamReader(
            clientSocket.getInputStream()));
    System.out.println(inFromServer.readLine());
    clientSocket.close(); 
```

服务器

```
 String sentence;
    ServerSocket welcomeSocket = new ServerSocket(6789);

    while (true) {
        Socket connSocket = welcomeSocket.accept();
        BufferedReader inFromClient = new BufferedReader(
                new InputStreamReader(connSocket.getInputStream()));
        sentence = inFromClient.readLine();
        if (sentence.contains("hello")) {
            File dir = new File("D:/ServerMap/");
            String[] children = dir.list();
            if (children == null) {
                JOptionPane.showMessageDialog(frame,
                        "Either no directory or it doesn't exist");
            } else {
                DataOutputStream outToClient = new DataOutputStream(
                        connSocket.getOutputStream());
                outToClient.writeBytes(children[0]);
                JOptionPane.showMessageDialog(frame, children[0]);
            }
        }
    } 
```

我通过单独导出的 Runnable Jar 文件执行服务器，客户端在 Eclipse 中编译运行。

只是为了澄清我的问题：客户端向服务器发送“hello”-> 服务器接收消息并包含“hello”，因此 if 语句返回 true -> 服务器检查指定目录中的文件名并找到一对 -> 服务器发送返回它找到的第一个文件名-> 客户端应该接收该文件名并在 Eclipse 控制台中打印它（这是不起作用的部分）

有什么建议么？

PS：这一切都是在本地主机上完成的。它是在 1 台计算机上完成的，Windows 7 x64，端口 6789 是打开的（在我手动打开它之前根本不起作用），差不多就是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:51:59.763

您应该从服务器中的客户端输出流中刷新数据：

```
outToClient.writeBytes(children[0] + "\n");
outToClient.flush();
// etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T22:18:40.753

问题是您的客户端正在等待服务器未发送的换行符 '\n'。在客户端你有 inFromServer.readLine() 而在服务器端你有 outToClient.writeBytes(children[0]) 所以你必须按照建议将它更改为 outToClient.writeBytes(children[0] + "\n")雷默斯。BufferedReader 类中的 readLine 方法会阻塞，直到它读取到“\n”。

# android - ArrayAdapter 替换列表而不是更新 ListView

> ID：11592620
> 
> 赞同：0
> 
> 时间：2012-07-21T13:33:39.437
> 
> 标签：android, android-intent, arraylist, android-arrayadapter

我希望有人能帮帮忙。

我有一个食物菜单应用程序。当用户打开应用程序时，他们会看到一个食物类别列表，例如“主菜”。我正在使用字符串数组从 Strings.xml 文件中提取此列表。选择一个类别后，它会打开第二个布局，显示可以选择的食品列表，我现在的问题是：

当他们单击 Steak 之类的项目时，它会将 Item 添加到 selecteditems 布局中，但如果我返回 ListMenu（按手机上的后退按钮）并选择另一个项目，它会替换我之前选择的项目。我怎样才能让它附加新项目？

这是我的文件和代码：

mainCoarse.java

```
package com.mycompany.lunch;

import java.util.ArrayList;
import java.util.List;
import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class ListMenu extends ListActivity {

List<String> itemordered = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.maincoarsemain);
    final ListView lv=(ListView)findViewById(R.id.listView1);

    final ArrayList<String> myNewList = new ArrayList<String>();

    ArrayAdapter<CharSequence> adapter=ArrayAdapter.createFromResource(this, R.array.maincoarse_menu,android.R.layout.simple_list_item_1);
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            // TODO Auto-generated method stub

            String item=lv.getItemAtPosition(arg2).toString();
            String itemordered;
            itemordered = item + " added to list";
            Toast.makeText(getApplicationContext(), itemordered, Toast.LENGTH_LONG).show();

            myNewList.add(item);
            ListView newList = (ListView) findViewById(R.id.menu_item);
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(ListMenu.this, myNewList, android.R.layout.simple_list_item_1);
            newList.setAdapter(adapter);

            // Launching new Activity on selecting List Item
            Intent i = new Intent(getApplicationContext(), ListItem.class);
            // sending data to new activity
            i.putExtra("item", item);
            startActivity(i);   
        }
        });
    }
} 
```

ListItem.java

```
import java.util.ArrayList;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ListItem extends Activity{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.selecteditems);

    Intent i = getIntent();

    ArrayList<String> myNewList = new ArrayList<String>();
    String item = i.getStringExtra("item");

    myNewList.add(item);
    ListView selecteditems = (ListView) findViewById(R.id.listitems);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(ListItem.this, android.R.layout.simple_list_item_1, myNewList);
    selecteditems.setAdapter(adapter);

    }
} 
```

我已经尝试更改“myNewList.add(item);”行 到“myNewList.addAll(item);” 但后来我收到错误：ArrayList 类型中的方法 addAll(Collection) 不适用于参数 (String)

选定项目.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:background="@drawable/main_background" 
  android:paddingLeft="10.0dip" 
  android:paddingTop="0.0dip" 
  android:paddingRight="10.0dip" 
  android:paddingBottom="10.0dip" 
  android:layout_width="fill_parent" 
  android:layout_height="fill_parent">

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="100.0dip"
            android:background="@drawable/title" />

        <LinearLayout 
            android:orientation="horizontal" 
            android:background="@drawable/head" 
            android:layout_width="fill_parent" 
            android:layout_height="10.0dip" />    

          <ListView 
              android:id="@+id/listitems"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:textSize="25dip"
              android:textStyle="bold"
              android:padding="10dip"
              android:textColor="#ffffff"/>

</LinearLayout> 
```

摘要：它将项目添加到新的 selecteditems 布局中，但如果我返回 ListMenu 并选择另一个项目，它会替换我之前选择的项目。我怎样才能让它附加新项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:36:12.173

仅在您想要更新数据时设置一次适配器

利用`adapter.notifyDataSetChange();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:41:30.123

当您在 MainCourse 活动中选择一个项目时，将其保存到数据库表中，然后在 List item 活动中取回它。这样，每次当您移回上一个活动并再选择一个项目时，它将存储在数据库中，您可以将其与 ListItem 活动中的先前项目一起取回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T11:24:29.997

好吧，我知道你想用其他数组交换你的 ArrayAdapter。

在由 ArrayAdapter 扩展的 Adapter 类上，放置这两个类并调用 Activity swapItems(List)

```
public void swapItems(List<Object> newList){
    List<Object> oldList = this.getAllAdapterList();
    List<Object> swapList;
    if (newList.size() >= oldList.size()) {
        swapList = newList;
    } else {
        swapList = oldList;
    }
    for (int i = 0; i<swapList.size();i++) {
        if (i < newList.size()) {
            this.insert(newList.get(i), i);
        }
        if(i < oldList.size()) {
            this.remove(oldList.get(i));
        }

    }

    this.notifyDataSetChanged();
}

public List<Object> getAllAdapterList(){
    int count = this.getCount();
    List<Object> objVal = new ArrayList<Object>();

    for (int i = 0; i < count; i++) {
        objVal.add(this.getItem(i));
    }
    return objVal;
} 
```

# objective-c - iOS 中的 OpenCV 函数错误

> ID：11592621
> 
> 赞同：3
> 
> 时间：2012-07-21T13:34:04.990
> 
> 标签：objective-c, ios, opencv

我正在尝试使用 openCV 为 iOS 编写应用程序。当我使用示例中的代码（例如 squares.c）并将其应用于我的界面时，一切都很好。但是当我尝试添加一些用于测试奇怪错误的功能时。例如：

```
const cv::Point* p = &squares[j][0];
int n = (int)squares[j].size();
cv::Mat image = [my_image CVMat];
polylines(image, &p, &n, 1, true, cv::Scalar(0,255,0), 8, CV_AA);   //Working good  
cvFloodFill(&c, cvPoint(10, 10), CV_RGB(255, 0, 0)); // Not working 
```

错误：OpenCV 错误：cvGetMat，文件 /Users/Aziz/Documents/Projects/opencv_sources/trunk/modules/core/src/array.cpp 中的错误标志（参数或结构字段）（无法识别或不支持的数组类型），第 2482 行

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:50:43.840

您正在将 C++ 与 C 接口混合。

用 C++ 编写的工作部分。为此，所有标题都包括在内。但是以 cv 开头的函数，如 cvFloodFill，来自 C 接口或遗留模块，您可能没有包含它们。

我的建议是将您的代码也保留在 C++ 中。所以，写

```
cv::floodFill( c, cv::Point(10,10), cv::Scalar(255,0,0) ); 
```

并确保变量名`c`是 C++ 的东西

# php - PHP DOM：getElementsByTagName 返回具有此名称的所有节点（尽管我在特定标签内）

> ID：11592622
> 
> 赞同：1
> 
> 时间：2012-07-21T13:34:10.323
> 
> 标签：php, dom, getelementsbytagname

我正在寻找 DAYS 的答案！我还没有找到任何.. :( 这是我的 XML 示例：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <Businesses>
    <Business NAME="Bus1">
    <DEAL ID="2">
    <title>My first Title</Title>
</DEAL>
    <DEAL ID="4">
    <title>My Second Title</Title>
</DEAL>
    </Business>
    <Business NAME="Bus2">
    <DEAL ID="2">
    <title>My 2nd Title</Title>
</DEAL>
    <DEAL ID="5">
    <title>My last Title</Title>
</DEAL>
    </Business>
    <Businesses> 
```

我怎样才能逐个解析这个xml？这是我的代码：

```
<?php 
  $doc = new domDocument();
  $doc->load("MyXML.xml"); //(The XML Above)
    $Businesses = $doc->documentElement;
    $ebus = $Businesses->childNodes;
    foreach ($ebus as $business) {

     if ($business instanceof domElement) {
     $busname=$business->getAttribute('NAME');
    $shelves = $Businesses->getElementsByTagName("DEAL"); //HERE IS THE PROBLEM

  foreach ($shelves as $deal) {

//Here i have all of the Businesses (I need to present only the first "NAME='Bus1'") for the first iteration! and so on..
}}}
?> 
```

问题是“getElementsByTagName”带来了所有“DEAL”节点，尽管我在第一个业务的 foreach 中！

我试过： $shelves = $Businesses->childNodes; // 但它不正确

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:02:50.443

您正在调用它，`$Businesses`它是`documentElement`. 您在一开始就分配了它：

```
$Businesses = $doc->documentElement; 
```

试试这个：

```
$shelves = $business->getElementsByTagName("DEAL"); 
```

# regex - 将一组连续的正则表达式应用于多个文件（emacs）

> ID：11592628
> 
> 赞同：4
> 
> 时间：2012-07-21T13:34:56.940
> 
> 标签：regex, emacs, replace

我正在研究一个将几十个 html 文件转换为文本文件的项目，并编写了完成这项工作的 replace-regexp 公式。问题是，如何连续应用所有六个，然后对目录中的几十个文件中的每一个都这样做？我已经附加了我的组织解释，其中包括正则表达式，但请记住，这些不是问题；他们做他们的工作（在翻译^J等之后）。问题是如何以编程方式将所有六个应用到目录中的每个（HTML）文件？

```
* 1\. Delete all until >General Conference<
\(.*^J\)*.*?General Conference
* 2\. Delete all <p class="copyright"> and after
^.*<p class="copy\(.*^J\)*
* 3\. Strip all tags
\(<.*?>\)*
* 4\. Remove whitespace lines
^\s-*^J
* 5\. Remove ugly numeric identifier
^\s-*[0-9].*^J
* 6\. Remove amp 
&amp; -> & 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T19:24:58.333

1.  使用 Dired: `C-x``C-d`*directory打开目录*`RET`
2.  标记要更改的文件，方法是按`m`( `dired-mark`) 单独标记每个文件，或在菜单栏中的标记菜单中使用其他机制，例如`*``.``html``RET`( `dired-mark-extension`) 标记所有带有`html` 扩展名的文件。
3.  `Q`*regex*`RET``RET` ( `dired-do-query-replace-regexp`) 将任何正则表达式示例替换为*空*。您可以为此使用 Ωmega 的正则表达式。
4.  然后，您可以使用 替换单个示例`SPC`或所有示例，而无需进一步提问`!`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T17:14:29.157

务实地做到这一点并不难。但惯用的 Emacs 解决方案是记录 2 个键盘宏。

1.  `replace-regexp`在单个缓冲区中执行每个正则表达式替换。

2.  在干缓冲区中，

    1.  移动到下一个 html (with `C-s`)
    2.  在其他窗口打开
    3.  在其他窗口中运行 (1) 并切换回 dired 缓冲区。

然后你会用一个荒谬的数字`C-u``1000`或其他东西运行 (2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:50:58.290

似乎只是您编写函数并将其应用于文件列表的一个步骤。

这是开始的草稿：

```
(defun my-replacements ()
  (interactive "*")
  (save-restriction
    (widen)
    (save-excursion
      (goto-char (point-min))
      (while (re-search-forward "FIRST-REGEXP" nil t 1)
        (replace-match "FIRST-REPLACEMENT")) 
```

重复最后 3 行，直到覆盖所有表格。

# payment-gateway - 使用信用卡和支付网关进行年龄验证

> ID：11592631
> 
> 赞同：4
> 
> 时间：2012-07-21T13:35:13.527
> 
> 标签：payment-gateway, credit-card

我正在开发一个游戏网站，用户必须年满 18 岁才能付款并开始游戏。我正在寻找一种解决方案来使用用户通过网站付款的信用卡来验证年龄。

是否可以在任何公认的支付网关的帮助下验证持卡人的年龄？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T11:01:55.640

> 是否可以在任何公认的支付网关的帮助下验证持卡人的年龄？

我 17 岁时有一张信用卡。如果出于法律原因需要验证用户是否年满 18 岁，则必须以另一种方式实现。我希望这个答案更长，但归根结底，答案真的是一句话。

# java - 如何解决 Java 中缺少抽象字段的问题？

> ID：11592635
> 
> 赞同：5
> 
> 时间：2012-07-21T13:36:00.877
> 
> 标签：java, abstract-class, field

假设我们有一个抽象类`A`，我们想强制所有子类有一个特定的字段。这在 Java 中是不可能的，因为我们不能定义抽象字段。

**解决方法 1：**强制子类实现提供所需值的方法。

```
abstract class A {
  abstract int getA();
} 
```

*缺点*：每个子类都必须为我们想要的每个抽象字段实现一个方法。这可能导致许多方法实现。

*优点*：我们可以使用`getA`抽象类中的方法并在其中实现方法，`A`而无需在每个子类中实现它们。但是方法后面的值不能被抽象类覆盖。

**解决方法 2：**通过强制子类给抽象类一个值来模拟抽象字段。

```
abstract class A {
  int a;

  public A(int a) {
    this.a = a;
  }
} 
```

*缺点*：当我们有多个字段（> 10）时，超级构造函数调用看起来有点丑陋和混乱。

*优点*：我们可以`a`在抽象类中使用该字段并在其中实现方法，`A`而无需在每个子类中实现它们。另外，该值`a`可以被抽象类覆盖。

**问题：**哪种解决方法是达到目标的常用方法？也许有比上述更好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:42:45.533

抽象方法可能是最面向对象的。

如果您有太多字段，您可能希望在 POJO 中重新组合这些字段（如果适合使用新概念）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:42:20.327

我更喜欢第一个。我不喜欢在文件名中耦合类，它们如何处理状态以及如何保存它。第一个更接近[打开/关闭主体](http://en.wikipedia.org/wiki/Open/closed_principle)

我建议避免继承。继承非常脆弱，难以维护。记住有效的 java 建议 - 更喜欢组合其他继承

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:03:11.210

**1.**其实这不是关于一个人喜欢什么，而是关于**灵活性，以及​​适应变化的能力**。

**2.****将不断变化的行为封装到接口或抽象类中**总是更好。

 ****3.**您的**第一个解决方法**将适用于您**需要在不同类中对相同行为进行不同实现的**地方。然后在这个地方，**接口**或您的**第一个解决方法**将是一个不错的选择。

**例如：**

将其`Painting`视为具有`paint()`方法的类。

现在

`paint()`方法可以有描边、滑动、阴影等样式。

**然后最好将该方法封装到抽象类或接口中。**

```
public interface Paint{

paintDoIt(String style);

} 
```

**4.**您的**第二个 Wordaround**将**在您希望某些行为必须由子类实现的地方很好。**

例如：

将Car**视为一个抽象类**，现在它必须具有 Steering、4 个轮子、Engine 等`to be car`非常重要**。因此必须实现这些功能**。

其中**音乐系统、LCD 等其他功能是可选**的，具体取决于车型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T13:41:59.657

我认为 opt.1 是迄今为止更清洁的。一些 getter 和 setter 没什么大不了的，我怀疑许多用例不仅仅是几个抽象的“字段”。

关于 opt.2，您忘记了构造函数不是继承的，因此需要以考虑到的方式实现所有子类构造函数`a`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T13:45:03.550

解决方法 2 非常常见，因为它有 2 个优点：

1）您提到的那个-该字段不属于子类-它属于父类，这很重要，因为它是父类“要求”的，并且父类可以使用它

2）当从父类子类化时，您非常了解此字段，因为当您实现构造函数时，您必须将其传递。如果我看到第一个解决方法，我不知道从中理解什么，这样我就明白父类需要这个字段才能工作，所以它必须有一个有意义的值。

注意：如果您的类有 10 个需要初始化的字段，则您的设计可能有问题。**

# ruby-on-rails - 如何进行仅接受小写“az”和数字“0-9”的验证

> ID：11592639
> 
> 赞同：7
> 
> 时间：2012-07-21T13:36:15.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我有我的应用程序，它有用户名列。对于用户输入，我想在此列中进行验证。

用户名只能包含以下字符

```
abcdefghijklmnopqrstuvwxyz0123456789 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-21T13:37:29.670

使用格式验证器：

```
validates :username, format: { with: /\A[a-z0-9]+\z/ } 
```

[https://guides.rubyonrails.org/v3.2/active_record_validations_callbacks.html](https://guides.rubyonrails.org/v3.2/active_record_validations_callbacks.html)

# select - 在 ABAP 中创建受限临时子例程

> ID：11592642
> 
> 赞同：1
> 
> 时间：2012-07-21T13:36:28.110
> 
> 标签：select, abap, keyword-search

我想提供创建高级选择的可能性，比可以通过 quickviewer 创建的左连接更深刻。

最简单的方法是允许用户通过["GENERATE SUBROUTINE POOL"](http://help.sap.com/saphelp_nw04/helpdata/en/9f/db999535c111d1829f0000e829fbfe/content.htm)插入一些源代码。

但我必须确保此源代码不会更改任何数据、启动其他程序或执行除评估数据之外的任何操作。

我的想法是将插入的源代码限制为一些关键世界，如 SELECT、LOOP、IF 等。在这种情况下，我需要在插入的源代码中找到所有关键词，并对照一些白名单进行检查。

我怎么能这样做？有什么方法可以绕过我的限制以造成一些真正的损害？还有其他方法可以达到我的目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:53:27.723

保护这样的东西真的很难做到，这不是个人限制或平台问题。您无法让机器理解程序员在做什么 - 请参阅[Halting Problem](http://en.wikipedia.org/wiki/Halting_problem)。为自己进行关键字扫描是一项繁琐的工作。您可能想尝试 [扫描 ABAP-SOURCE](http://help.sap.com/abapdocu_702/en/abapscan.htm)并查看扫描仪抛出的表格。然而，对最基本的语言元素的限制只会让你走到这一步，因为对于任何实质性的编程，你都必须允许外部子例程调用，然后你很容易受到任何事情的影响。在我看来，最好将规范交给开发人员，并在没有任何动态内容的情况下开发报告。这样，您还可以确保不会仅仅因为破解 SELECT 语句的用户不知道该取消标志而创建不正确的报告...

# java - 使用 Apache POI HSSFCell 读取时间出错

> ID：11592643
> 
> 赞同：1
> 
> 时间：2012-07-21T13:36:37.350
> 
> 标签：java, apache-poi

嗨，我正在尝试使用`HSSFCell`. 我的 excel shhet 由 4 列组成。日期、名称、In_time 和 Out_time。

在我的循环中，我给出了..

```
 HSSFRow row = (HSSFRow) itr.next();
            Iterator cell = row.cellIterator();
            List data = new ArrayList();
            while(cell.hasNext())
            {
                HSSFCell value = (HSSFCell) cell.next();

                if (value.getCellType() == Cell.CELL_TYPE_NUMERIC) 
                {
                    if(HSSFDateUtil.isCellDateFormatted(value))
                    {
                        if(HSSFDateUtil.isADateFormat((int)value.getNumericCellValue(), "dd:mmm:yyyy"))
                        {
                            DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
                            String date = df.format(value.getDateCellValue());
                            data.add(date);
                        }
                                             }
                        else

                    {
                        data.add(value.getNumericCellValue());
                    }
                }
                else if (value.getCellType() == Cell.CELL_TYPE_STRING)
                {
                    data.add(value.getStringCellValue());
                }
                else
                {
                    data.add("");
                }
            }
            sheetData.add(data); 
```

字段日期和名称正在正确检索。但是，当我尝试获取时间时，它会给出日期值。例如，在我的 excel 中，我有时间 4:05:12 AM ..但它把值作为某个日期，例如 1899-12-30 ..如何使用 Apache POI 从 Excel 表中读取日期值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:36:48.903

您似乎通过调用 SimpleDateFormat 将单元格明确格式化为“yyyy-MM-dd”日期。因此，您得到的正是您所要求的，并以 yyyy-MM-dd 日期字符串结束，这不足为奇！

目前，从您的问题中获取的显式 yyyy-MM-dd 代码有点奇怪：

```
 if(HSSFDateUtil.isCellDateFormatted(value))
     {
     if(HSSFDateUtil.isADateFormat((int)value.getNumericCellValue(), "dd:mmm:yyyy"))
                    {
                        DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
                        String date = df.format(value.getDateCellValue());
                        data.add(date);
                    } 
```

如果要格式化单元格，使其看起来与 Excel 中的相同，则需要考虑应用于单元格的格式化规则。如果你这样做，你的代码看起来会更简单，比如：

```
 DataFormatter formatter = new DataFormatter();

 .....

 if(HSSFDateUtil.isCellDateFormatted(value)) {
     String date = formatter.formatCell(value);
 } 
```

如果单元格应用了 yyyy-MM-dd 格式，那么您仍然会得到类似 2012-07-20 的内容。如果它是时间格式，那么你会明白的。

# javascript - JS 动画库使用 requestAnimationFrame 和 setTimeout 作为后备

> ID：11592645
> 
> 赞同：1
> 
> 时间：2012-07-21T13:36:46.223
> 
> 标签：javascript, animation, requestanimationframe

是否有使用 requestAnimationFrame 的 JavaScript 动画库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:36:54.837

您可以使用 Jack Doyle 的这个 TweenLite 库。它面向高性能（requestAnimationFrame 和 setTimeout 后备）。我有很多经验，我经常选择它而不是 CSS 动画！

[http://www.greensock.com/v12/](http://www.greensock.com/v12/)

由[Chris Coyer](http://css-tricks.com/svg-animation-on-css-transforms/)和[Google推荐](https://developers.google.com/web/fundamentals/look-and-feel/animations/css-vs-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:05:29.610

有使用 requestAnimationFrame [http://github.com/relay/anim/的 Anim](http://github.com/relay/anim/)

# android - Cocos2d for Android：转换为 Dalvik 格式失败，错误 1

> ID：11592648
> 
> 赞同：0
> 
> 时间：2012-07-21T13:37:19.670
> 
> 标签：android, dalvik, cocos2d-android

这是我第一次使用 Cocos2d for android，我正在尝试将它作为一个库从源代码集成（我还没有尝试过 jar 文件）。尝试运行应用程序时，出现以下错误：

```
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Lorg/cocos2d/actions/interval/CCSpawn;
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.command.dexer.Main.processClass(Main.java:486)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.command.dexer.Main.access$400(Main.java:67)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.command.dexer.Main.processOne(Main.java:418)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.dx.command.dexer.Main.run(Main.java:206)
[2012-07-21 14:26:37 - TestingCocos] Dx     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[2012-07-21 14:26:37 - TestingCocos] Dx     at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
[2012-07-21 14:26:37 - TestingCocos] Dx     at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
[2012-07-21 14:26:37 - TestingCocos] Dx     at java.lang.reflect.Method.invoke(Unknown Source)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:629)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:172)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:282)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:363)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.resources.Project$1.run(Project.java:545)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1975)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:524)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.resources.Project.build(Project.java:123)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
[2012-07-21 14:26:37 - TestingCocos] Dx     at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:853)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:702)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:924)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1128)
[2012-07-21 14:26:37 - TestingCocos] Dx     at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2012-07-21 14:26:37 - TestingCocos] Dx 1 error; aborting
[2012-07-21 14:26:37 - TestingCocos] Conversion to Dalvik format failed with error 1 
```

我最近升级到 ADT20。所以我希望这不是一些相关的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T23:48:03.860

这不是运行应用程序的问题，而是构建它的问题。看起来您已经设法在两个不同的地方包含同一个类（例如，可能在应用程序和库中）。班级的名字是`org.cocos2d.actions.interval.CCSpawn`。`dx`没有最漂亮的错误消息，但它们通常至少有点信息！

# php - 使用 jquery 发布时从函数中获取数据

> ID：11592653
> 
> 赞同：0
> 
> 时间：2012-07-21T13:37:39.720
> 
> 标签：php, jquery, json, post, error-handling

我开始讨厌 AJax，我发现在使用 jQuery 发布时很难获得任何有用的信息。

我有一个脚本，可以在单击按钮时添加或删除一些信息。jquery 发布到调用类中的函数的文件。这部分有效，但我无法获得成功消息来操作前端。这是我的代码。

php 工作，但我不断收到错误 JSON.parse：我用谷歌搜索的意外字符，但我的 json 看起来还可以吗？

jQuery

```
$('.fave').click(function(){

var favId = $(this).attr('data-user-fave');

var params = {};

params['fave_id'] = favId;
params['fav_flag'] = '1';

    $.post('index.php?link=my_applications', params, function(data){

    var data = $.parseJSON(data);

    if(data.message === 'success'){

    alert(data.flag);

    }
    else{
    alert("Fail");
    }

    }); 
```

jQuery 发布到的文件中的代码

```
$profile = new profile();

if($_POST['fav_flag'] == '1'){

$js = $profile->fave_user();
echo json_encode($js);

} 
```

类配置文件中的功能

```
function fave_user(){

    $query = "SELECT * FROM `favourite` WHERE user_id = '{$_SESSION['loginArr']['user_id']}' AND fave_id = '{$_POST['fave_Id']}'";

    $nr = $GLOBALS['DB']->num_rows($query);

    if($nr >= 1){

    //exists so remove

    $query = "DELETE FROM `favourites` WHERE user_id = '{$_SESSION['loginArr']['user_id']}' AND fave_id='{$_POST['fave_Id']}'";

    $GLOBALS['DB']->deleteQuery($query); 

    $return["message"]="success";
            $return["flag"]="del";

    return $return;

    }

    else{

    //not a fave so add

    $query = "INSERT INTO `favourite` (user_id, fave_id) VALUES ('{$_SESSION['loginArr']['user_id']}', '{$_POST['fave_id']}')";

    $GLOBALS['DB']->insertQuery($query);

    $return["message"]="success";
            $return["flag"]="ins";

    return $return;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:59:15.283

我建议使用`$.ajax`方法：它更先进。

# javascript - console.log 冻结 javascript 控制台

> ID：11592660
> 
> 赞同：4
> 
> 时间：2012-07-21T13:38:46.473
> 
> 标签：javascript, google-chrome, logging, console

我正在使用 chrome 浏览器在本地运行 html5 画布网页。出于调试目的，我正在使用 console.log 试图跟踪动画中的对象像素位置，该位置每秒发生 60 帧。但问题是，当我运行网页时它工作正常，直到我打开 javascript 控制台并看到我的位置被打印得如此之快以至于开发控制台只是冻结，页面仍然运行但我无法做任何调试，比如 switch在控制台等不同选项卡之间，我必须关闭页面并重新启动它，问题很快就会再次发生。

我还使用内置工具来执行 javascript CPU 配置文件收集，以查看它在日志记录上花费了多少资源，结果只是运行时间的 0.01%，这显然不应该是问题，但我的猜测是，即使它是只花费很少的时间来执行此操作实际上正忙于更新 UI 上的数字的控制台是冻结页面的原因。（我应该提一下，我仍然可以很好地与页面交互，但我不能对控制台做任何事情，即使只是关闭它）

这在chrome浏览器上正常吗？任何修复或建议？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:48:20.373

是的，我会避免向控制台发送垃圾邮件。根据我的经验，您可以记录大量数据，例如包含数万个项目的数组，但您不能*过于频繁*地调用 log 函数，否则开发工具会在重绘时冻结。

因此，考虑到上述情况，我建议将您的几个日志调用组合在一个对象或数组中。例如，如果您有一个将运行很多次的循环，并且内部有 5-6 个日志调用，则通过将数据添加到数组或具有井名键的对象将这些日志调用组合在一起，并将该对象记录在循环结束。

如果您必须每 100 毫秒记录一次以上超过几秒钟，我建议将日志调用分组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-25T02:36:44.723

我建议的是，在调试时，以每秒 60 个项目运行其他不会向控制台发送垃圾邮件的东西。当您尝试运行此代码时会发生同样的问题： 每秒向控制台发送 60 次垃圾邮件具有相同的效果，即冻结屏幕。尝试在控制台中每秒或什至两次打印第二个变量，这样您就可以缩小范围并修复错误。如果您不想让控制台崩溃，这可能是最安全的方法。 ``for (var i = 0; i < 99999;/*This will spam the console*/ i++) {` console.log(i);}`

我希望这有帮助！:)

# entity-framework - EF的视图生成是什么

> ID：11592662
> 
> 赞同：1
> 
> 时间：2012-07-21T13:38:57.480
> 
> 标签：entity-framework

在我阅读了[性能注意事项](http://msdn.microsoft.com/en-us/library/cc853327.aspx)之后。我有什么不明白的。

> 在实体框架可以针对概念模型执行查询或保存对数据源的更改之前，它必须生成一组本地查询视图来访问数据库。由于生成这些视图的成本很高，您可以预先生成视图并在设计时将它们添加到项目中。

我的第一个问题是这是否意味着每次执行查询之前 EF 都会为其生成视图？第二个问题是什么观点？它是干什么用的 ？谢谢

# php - PHP：对多维数组进行排序（$arr[$i]['v']）

> ID：11592663
> 
> 赞同：0
> 
> 时间：2012-07-21T13:38:58.347
> 
> 标签：php, multidimensional-array, sorting

我的数组类型为（未排序的版本）：

```
<?php
$arr['foo']['man']      = 5 ;
$arr['foo']['str']      = 'string5' ;
$arr['foobar']['man']   = 2 ;
$arr['foobar']['str']   = 'string2' ;
$arr['barfoo']['man']   = 4 ;
$arr['barfoo']['str']   = 'string4' ;
$arr['foofoo']['man']   = 1 ;
$arr['foofoo']['str']   = 'string1' ;
$arr['bar']['man']      = 3 ;
$arr['bar']['str']      = 'string3' ;
?> 
```

我想按降序对其进行排序，同时保留该数组中的所有其他数据，即

```
<?php
$arr['foo']['man']      = 5 ;
$arr['foo']['str']      = 'string5' ;
$arr['barfoo']['man']   = 4 ;
$arr['barfoo']['str']   = 'string4' ;
$arr['bar']['man']      = 3 ;
$arr['bar']['str']      = 'string3' ;
$arr['foobar']['man']   = 2 ;
$arr['foobar']['str']   = 'string2' ;
$arr['foofoo']['man']   = 1 ;
$arr['foofoo']['str']   = 'string1' ;
?> 
```

我查看了 PHP 中的许多排序函数，但没有找到任何解决方案

有谁能够帮助我？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:44:20.390

使用这个功能：

```
uasort($yourArray, function($a, $b) {
    return strcmp($a['man'], $b['man']);
}); 
```

或者看看[`array_multisort`](http://php.net/array-multisort)

# c++ - std::regex_constants::optimize 使用的优化技术

> ID：11592665
> 
> 赞同：8
> 
> 时间：2012-07-21T13:39:02.280
> 
> 标签：c++, regex, optimization, c++11

我正在使用`std::regex`，在阅读中定义的各种常量时`std::regex_constants`，我​​遇到了`std::optimize`，阅读它，听起来它在我的应用程序中很有用（我只需要一个正则表达式的实例，在一开始就初始化，但它是在整个加载过程中多次使用）。

根据[工作文件 n3126](http://open-std.org/JTC1/SC22/WG21/docs/papers/2010/n3126.pdf)（第 1077 页）`std::regex_constants::optimize`，：

> 指定正则表达式引擎应该更多地关注正则表达式匹配的速度，而不是构建正则表达式对象的速度。否则，它对程序输出没有可检测的影响。

我很好奇将执行哪种类型的优化，但似乎没有太多关于它的文献（事实上，它似乎是未定义的），我发现的唯一一件事是在[cppreference.com](http://en.cppreference.com/w/cpp/regex/syntax_option_type)，表示`std::regex_constants::optimize`：

> 指示正则表达式引擎使匹配更快，但可能会降低构造速度。例如，这可能意味着将非确定性 FSA 转换为确定性 FSA。

但是，我没有正式的计算机科学背景，虽然我知道 FSA 是什么的基础知识，并且了解确定性 FSA（每个状态只有一个可能的下一个状态）和非 FSA 之间的基本区别。确定性 FSA（具有多个潜在的下一个状态）；我不明白这如何提高匹配时间。另外，我很想知道在各种 C++ 标准库实现中是否还有其他优化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:53:09.767

在Jeffrey Friedl的[*Mastering Regular Expressions*](http://shop.oreilly.com/product/9781565922570.do)中有一些关于正则表达式引擎和性能权衡（远远超过 stackoverflow 答案）主题的有用信息。

值得注意的是，作为 N3126 的来源的 Boost.Regex 记录`optimize`为“目前对 Boost.Regex 没有影响”。

附言

> 实际上，它似乎是实现定义的

不，它未指定。实现定义意味着需要一个实现*来*定义行为的选择。实现不需要记录他们的正则表达式引擎是如何实现的或者`optimize`标志有什么（如果有的话）差异。

PS 2

> 在各种 STL 实现中

`std::regex`不是 STL 的一部分，C++ 标准库与 STL 不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T13:54:09.437

请参阅[http://swtch.com/~rsc/regexp/regexp1.html](http://swtch.com/~rsc/regexp/regexp1.html)以获得关于基于 NFA 的正则表达式实现如何避免在某些情况下在 DFA 匹配器中发生的指数回溯的很好的解释。

# ios - 为什么我没有从 NSStringFromClass 获得 NSString？

> ID：11592667
> 
> 赞同：0
> 
> 时间：2012-07-21T13:39:06.113
> 
> 标签：ios

你会认为这会返回一个 NSString：

```
NSString *class = NSStringFromClass([[_array objectAtIndex:([_array count] -2)] class]);

NSLog(@"Is a kind of NSString: %@", ([[_class classForCoder] isSubclassOfClass:[NSString class]])? @"Yes" : @"No");    

if ([class isEqualToString:@"MapViewController"]) {
    [_appDelegate.navController0 pushViewController:_userListController animated:YES];

} else {
    [_appDelegate.navController3 pushViewController:_userListController animated:YES];
} 
```

但由于某种原因它没有，导致这次崩溃：

```
Is a kind of NSString: No
-[NSKeyValueObservationInfo isEqualToString:]: unrecognized selector sent to instance 0x6e69080 
```

即使我尝试这个：

```
NSString *class = (NSString *)[[_array objectAtIndex:([_array count] -2)] class]; 
```

它仍然没有返回 NSString，导致了这个崩溃：

```
Is a kind of NSString: No
+[MapViewController isEqualToString:]: unrecognized selector sent to class 0xd4460 
```

我知道进去，最后一个例子有点牵强，但我很不知道为什么我没有从任何一个返回 NSString ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:26:40.183

当我从方法外部访问 NSString “类”时，我会遇到各种古怪的错误。所以我所做的是添加一点保留语句：

```
NSString *class = [NSStringFromClass([[_array objectAtIndex:([_array count] -2)] class]) retain]; 
```

现在它就像一个魅力。

# javascript - 覆盖函数会导致递归过多

> ID：11592668
> 
> 赞同：2
> 
> 时间：2012-07-21T13:39:14.897
> 
> 标签：javascript, variable-assignment, overwrite

我写了这个：

```
alert = function(x) {
    alert(x);
};
alert(1); 
```

并显示了Firefox的控制台`Too much recursion`

和：

```
var x = alert;
alert = function(y) {
    x(y);
};
alert(1); 
```

完美运行。

为什么第二种方法有效而第一种方法无效？

并且`foo=foo;`有效。不`alert=function(x){alert(x);};`一样`foo=foo;`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:40:39.627

不，当你写的时候：

```
alert=function(x){alert(x);}; 
```

您正在创建一个函数，该函数在被调用时将无休止地调用自身，直到堆栈空间用完。您创建的“警报”符号将成为全局变量。在函数内部，*当它被调用时*，“警报”符号将被解析为该全局变量。

由于 JavaScript 的语义，函数中对变量的引用在每次调用函数时都会重新解析。如果在定义该函数之后，您执行了以下操作：

```
var otherAlert = alert;
window.alert = function() { console.log("Hello world"); }; 
```

然后调用“otherAlert”*不会*导致错误，因为此时“alert”将是一个不同的全局函数。

# c++ - 未解析的外部符号。C++

> ID：11592669
> 
> 赞同：2
> 
> 时间：2012-07-21T13:39:19.023
> 
> 标签：c++, qtwebkit, qt5

当我尝试编译我的测试应用程序时，它失败了。

CMakeLists.txt：

```
cmake_minimum_required( VERSION 2.8.8 )
project( webkit-test )

set(CMAKE_AUTOMOC ON)
set(CMAKE_INCLUDE_CURRENT_DIR ON)

find_package( Qt5Core )
find_package( Qt5Gui )
find_package( Qt5OpenGL )
find_package( Qt5Network )
find_package( Qt5WebKit )
find_package( Qt5Widgets )

add_executable( webkit-test main.cpp )

qt5_use_modules( webkit-test Core Gui OpenGL Network WebKit Widgets ) 
```

C++ 代码：

```
#include <QtWidgets/QApplication>
#include <QtWebKit/QWebView>

int main( int argc, char *argv[] )
{
        QString file;
        if ( argc >= 2 )
                file = argv[1];

        QApplication a( argc, argv );

        return a.exec();
} 
```

`cmake -G "NMake Makefiles"` [我通过(3)](http://pastebin.com/uDGBx4S7)生成makefile ，然后使用`nmake` [(4)](http://pastebin.com/vwJZk7JD)。

收到后，我使用`dumpbin /EXPORTS QtWebKit5.dll > QtWebKit5.dll.exports.txt`并`dumpbin /EXPORTS QtWebKit5.lib > QtWebKit5.lib.exports.txt`查看导出符号：[(5)](http://pastebin.com/gmubayWB)和[(6)](http://pastebin.com/7A4c1Seh)。

通过使用 Ctrl+F，您可以在这些文件中找到“未解析”的外部符号：

> ?staticMetaObject@QWebPage@@2UQMetaObject@@B (public: static struct QMetaObject const QWebPage::staticMetaObject)
> 
> ?staticMetaObject@QWebView@@2UQMetaObject@@B (public: static struct QMetaObject const QWebView::staticMetaObject)

如果符号在 QtWebKit5.lib 中，为什么在链接时出现这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:13:00.047

一些原因会影响到这一点，

如果您使用版本高于 4.7 的 Qt，请将此命名空间添加到项目的“.pro”文件中：

```
QT += webkitwidgets 
```

如果小于等于 4.7：

```
QT += webkit 
```

并将您的**QWebView**库更改为（如果收到有关“没有此类文件或目录”的警告，请不要担心！）

```
#include <QwebView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-22T12:22:08.833

我添加`add_definitions(-DQT_DLL)`到我的 CMakeLists.txt 中，现在它已编译。

# sql - 为 Access 的一列值选择 Distinct

> ID：11592672
> 
> 赞同：0
> 
> 时间：2012-07-21T13:40:10.543
> 
> 标签：sql, select, distinct

我想做一个产品页面的datalistview。

这是我现在使用的：

```
SELECT DISTINCT pProductDesign, pProductImage 
FROM Product 
WHERE (pProductDesign IS NOT NULL) 
ORDER BY pProductImage 
```

结果是：

> pProductDesign|pProductImage
> 
> 128101 |~/Images/128101-Cream.jpg
> 128101 |~/Images/128101-Gold.jpg
> 
> 128101 |~/Images/128101-卡其色.jpg
> 
> 8680C |~/Images/8680C-Cream.jpg
> 
> 8680C |~/Images/8680C-Gold.jpg
> 8680C |~/Images/8680C-Khaki.jpg

但我想要的只是：

> pProductDesign|pProductImage
> 
> 128101 |~/Images/128101-Cream.jpg
> 
> 8680C |~/Images/8680C-卡其色.jpg

有什么办法吗！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T14:30:29.590

如果您只是在寻找一个不同的`ProductDesign`s 列表和一些任意关联`ProductImage`的列表（正如评论中提到的那样），您可以使用任何带有 a 的聚合函数（`min`, `max`, `average`）`group by`：

```
select ProductDesign, max(ProductImage)
from Product
where ProductDesign is not null
group by ProductDesign 
```

# html - WinRT WebView 控件

> ID：11592677
> 
> 赞同：1
> 
> 时间：2012-07-21T13:40:53.133
> 
> 标签：html, webview, microsoft-metro, windows-runtime, opacity

我在 Windows Metro 应用程序中有以下控件：

```
string html = "<html><body>test content</body></head>";
myWebView.Opacity = 0.5;
myWebView.NavigateToString(html); 
```

这可以正常工作，但我最终得到的是带有黑色文本的空白白色背景。我真正想要的是让它与当前的 Metro 风格一起使用（因此根据设置匹配深色或浅色背景）。如上所述，我已经使用了该`Opacity`设置，但似乎没有什么区别。

有没有办法让 WebView 控件镜像当前的 Metro 风格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:50:57.320

**这是设计使然。** `WebView`-Controls 不支持 any `Opacity`，因为它们是一种特殊的控件，呈现在一切之上。

[来自 MSDN 文档：](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.webview.aspx)

> WebView 具有不能在 WebView 之上渲染其他 UI 区域（例如控件）的特点。这是因为窗口区域是如何在内部处理的，特别是如何处理输入事件以及如何绘制屏幕。如果你想渲染 HTML 内容并且在 HTML 内容之上放置其他 UI 元素，你应该使用 WebViewBrush 作为渲染区域。WebView 仍然提供 HTML 源信息，您可以通过元素名称绑定和 SourceName 属性引用该 WebView。WebViewBrush 没有此覆盖限制。

# java - Listview.offsetTopAndBottom 不会在 Android 中持续存在

> ID：11592683
> 
> 赞同：3
> 
> 时间：2012-07-21T13:41:43.990
> 
> 标签：java, android, listview

拖动 ImageView 时，我希望 ImageView 和 ListView 都垂直移动并停留在那里。下面是我的代码。起初，它似乎可以工作，但是当我上下滚动列表视图时，列表视图会跳回原来的位置。有人能告诉我如何解决这个问题吗？

```
class MyOnGestureListener implements OnGestureListener{

  public boolean onScroll(MotionEvent e1, MotionEvent e2,
                float distanceX, float distanceY) {

  mImageView.scrollBy(0, (int)distanceY);
  mListView.offsetTopAndBottom((int)-distanceY);
  mListView.invalidate();
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T22:06:26.360

You need to override onLayout and persist it there. The base ViewGroup (ListView) will recalculate positioning there and override your offset. Which means, in your case, you'll need to extend ListView to override it.

```
@Override
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    final int offset = getMenuState() != MenuState.Closed ? getContentView().getLeft() : 0;

    super.onLayout(changed, left, top, right, bottom);

    /*
     * Lazily offset the view - rather than comparing the child views to find the
     * content view
     */
    getContentView().offsetLeftAndRight(offset);
} 
```

# objective-c - 如何在 iPhone 的 UIwebview 中维护会话

> ID：11592684
> 
> 赞同：0
> 
> 时间：2012-07-21T13:41:43.960
> 
> 标签：objective-c, ios, cocoa-touch, caching, uiwebview

我有一个 UIWebview。假设我在该视图中打开 google，然后按返回按钮并再次返回 Webview 页面。是否可以看到谷歌（已经打开）而不是再次加载该页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:48:47.107

**是的，确实，它被称为缓存。** 它基本上将页面保存在内存中，以便以后可以在不加载的情况下调用它。唯一的主要问题是，如果您的“缓存”（保存）页面，如果页面在互联网上更新，则在页面刷新和加载之前，它不会在您的应用程序中更新。

iOS缓存的资料很多，网上搜一下就可以了。我发现一个有用的链接是[这个](https://stackoverflow.com/questions/1348696/how-to-cache-content-in-uiwebview-for-faster-loading-later-on)Stackoverflow 问题，它向您展示了如何缓存内容。

# iphone - UIViewController 设计模式多个 UITableViews

> ID：11592687
> 
> 赞同：0
> 
> 时间：2012-07-21T13:42:01.377
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我有一个视图来显示 UITableView 中的商店列表。

用户应该可以修改某些过滤器显示的商店。例如，应该可以显示**按名称排序**的商店（第一个字母作为部分标题）。此外，用户应该能够只**显示收藏夹**或**按类别对商店进行排序**（类别名称是部分标题）：

![在此处输入图像描述](../Images/27291f1b2674ea747a5a9c702a27f1f3.png)

我不想要一个表格视图来处理所有过滤器，因为我认为这将是一堆 if-then-else 标记，具体取决于当前过滤器。所以我决定创建**4 个 UITableViewController**，每个都处理一个过滤器。

这正是我所需要的，到目前为止没有冗余，因为 tableVC 委托和数据源方法是需要以不同方式实现的方法。

但现在我确实需要一个根据表格滚动位置出现的标题。这在所有 4 个表中完全相同。但是我现在应该如何解决这个问题呢？

在冗余的四个**UITableViewController**中分别实现**UIScrollViewDelegate方法？**创建一个 ParentViewController 处理 scrollView 方法（这不会那么容易，因为表数据源和委托方法......

 **任何建议如何正确解决这个问题？你会怎么做？

我会很感激任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T13:48:40.997

我将创建一个父类，处理标题并从中派生过滤器的 UITableViewControllers。

超类负责公共元素（如标题），子类负责实际显示。

或者，您可以创建一个重载方法，该方法返回要显示的单元格数组。

存储这个数组，当委托（在超类中）请求“单元格数据”时，给他数组中的相应元素。**

# iphone - 有没有办法完全断开应用程序与 iCloud 的连接？

> ID：11592688
> 
> 赞同：2
> 
> 时间：2012-07-21T13:42:03.163
> 
> 标签：iphone, ios, xcode, ipad, icloud

我的应用程序可以在有或没有 iCloud 支持的情况下工作。

如果用户将设备连接到 iCloud，然后想断开连接，我很容易将所有数据复制回本地沙箱并停止使用 iCloud，并且该设备将不再为 iCloud 贡献任何新内容。但是，来自其他设备的更改仍将在此设备上接收（尽管未处理）。

有没有办法完全断开设备与 iCloud 的连接，这样就不会收到新的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:48:08.130

iCloud 将数据存储在一个名为“Mobile Documents”的文件夹中。您应用的容器位于此文件夹中。iOS 设备会立即了解新文件和更改。但是，在应用程序特别请求之前，他们不会真正下载文件。这是一个示例场景：

有人正在他们的 iPhone 和 iPad 上运行您的应用程序。他们在两者上都使用 iCloud。但是，在他们的 iPhone 上，他们禁用了您的应用程序的 iCloud，但保持他们的 iCloud 帐户处于活动状态。这意味着他们的设备总是知道变化。但是由于您的应用从不请求这些文档，因此它们永远不会下载到设备上，因此不会占用空间。此外，iOS 会在必要时自动删除 iCloud 文件的本地副本以释放空间。

有关更多信息，请参阅 developer.apple.com/icloud，特别是有关如何使用 iCloud 的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T17:16:15.240

您可以简单地停止响应您的应用收到的 NSNotifications。您可以从这些通知中取消注册您的视图，或者在收到它们时忽略它们。

# java - 需要从 NumberFormatted double 中获取原始 double 数据

> ID：11592689
> 
> 赞同：0
> 
> 时间：2012-07-21T13:42:04.637
> 
> 标签：java, number-formatting

我需要双精度值的百分比形式，所以我使用了 NumberFormat

```
 double d = 0.13;   
    NumberFormat nf = NumberFormat.getPercentInstance();      
    String kpr = nf.format(kpr); 
```

我通过 setter 将此属性保存到对象 Person 中。当我通过 getter 方法取回它时，它返回字符串（当然）。
有没有办法将此字符串取消格式以将值加倍为 0.13，以便我可以对其执行算术运算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:49:57.627

```
double d=(Double.parase(kpr.substring(kpr.length-1)))/100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:50:01.073

```
public static void main(String s[]) {
    getDoubleFromStringWithPercent("12345%");
}

private static Double getDoubleFromStringWithPercent(String string) {
    Locale locale = Locale.CANADA;
    Double num = null;
    try {
        Number number = NumberFormat.getPercentInstance(locale).parse(string);
        if (number instanceof Long) {
            num = ((Long) number).doubleValue();
        } else {
            num = (Double) number;

        }
    } catch (ParseException e) {
        throw new RuntimeException(e);
    }
    return num;
} 
```

语言环境需要查找小数分隔符（“.”或“，”）；

替代版本：

```
String string ="2165%";

double d = Double.parseDouble(string.substring(0, string.length()-1));
if (d != 0) {
   d = d / 100;
} 
```

# mysql - MySQL 工作台不显示表

> ID：11592692
> 
> 赞同：5
> 
> 时间：2012-07-21T13:42:21.510
> 
> 标签：mysql

我在 Windows7 32 位机器上安装了 mysql 工作台。我从另一台机器导入了一个转储表，导入过程成功完成，如 mysql 所示。但是，即使全部刷新，我也看不到表格。不仅是我导入的表，甚至是测试数据库中的表（默认情况下）或任何以前在另一个数据库中创建的表。简单地说，它只显示数据库名称，没有显示表的加号。我删除了mysql，再次安装它，但没有希望。我安装了mysql的要求。这种问题的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-06T14:08:23.483

有同样的问题，即使在退出并重新启动 MySQL Workbench 之后，在 MySQL Workbench 6.0 的导航侧边栏中的表下也没有显示表。解决方案是右键单击表格并全部刷新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T19:10:36.443

我也发生了同样的事情。我刚刚关闭程序，重新打开它，我导入的所有表格都可以查看。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-08-27T17:46:59.610

如果您使用的是 Mac，您的对象信息和会话部分将覆盖表格视图。继续往下拖，你应该会看到表格

[![在此处输入图像描述](../Images/a89b44be46ba691b9168121fe36f4f51.png)](https://i.stack.imgur.com/KSYiB.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-23T00:37:43.720

我假设您的架构名称旁边有一个图标（眼睛），如果您单击它，它将打开一个包含所有隐藏表的窗口。点击显示解决问题

[在mysql中显示隐藏表](https://i.stack.imgur.com/UlY7i.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-24T21:34:23.600

我认为这是`MySql`Workbench 中的一个错误。

`tables`如果您在或中看不到任何更新的更改`schemas`，则只需关闭工作台并重新打开它。

但是，如果这不起作用，请检查您的连接和服务器状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-05T13:16:48.833

尽管在撰写本文时这个问题已有 8 年历史，但我遇到了同样的问题，并认为我会分享我的解决方案，结果证明这是相当基本的：“模式”右侧有一个刷新按钮。如果单击此按钮，新创建的表就会出现。在这种情况下，您不必关闭并重新打开 Mysql。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-28T07:16:12.590

我遇到了同样的问题，减小工作台的窗口大小，表格将可见。

# arrays - 在已排序的 3d 数组中搜索元素

> ID：11592693
> 
> 赞同：2
> 
> 时间：2012-07-21T13:42:25.413
> 
> 标签：arrays, algorithm, search, language-agnostic

> 给出了一个在所有三个维度上排序的 3d 矩阵，我们必须在其中找到一个给定的数字。

对于上述问题，我一直在想：3D 数组`arr[m][n][r]`就像一堆矩形，其中每个矩形（考虑`arr[m][n][0]`）将最大的元素作为最右边的元素（`arr[m-1][n-1][0]`）。我们可以在每个矩形内搜索`O(m+n)` ：

```
int row = 0;
int col = N-1;

while (row < M && col >= 0) 
{
  if (mat[row][col] == elem) 
  { 
    return true;
  }
  else if (mat[row][col] > elem) 
  { 
    col--;
  } 
  else 
  { 
    row++;
  } 
} 
```

我在想它可以类似地扩展到第三维，因此使其成为线性复杂度解决方案（`O(m+n+r)`）。我对吗 ？

有没有人有任何其他想法？复杂度会是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T15:34:32.370

您不能将线性复杂度 2D 解决方案扩展到第 3 维，从而产生 O(m+n+r) 解决方案。3D 数组，在每个方向上独立排序，包含 O(N ² ) 组元素，它们之间没有排序。例如，完全未排序的子`arr[i][j][k]`数组`i+j+k = (m+n+r)/2`。所以你必须检查这样一个子数组的每个元素来找到给定的数字。这证明你不能发明一种复杂度比 O(N ² ) 更好的算法（至少当 m、n 和 r 彼此没有太大差异时）。这只是[这个答案](https://stackoverflow.com/a/10597806/1009831)的证明的延伸。

这是一个例子：

```
k=0: |1 x|   k=1: |z 3|
     |y 3|        |3 4| 
```

该数组按所有 3 个维度排序。但这并不能确定元素 x、y、z 的任何排序顺序。您可以将 (1, 3) 范围内的任何值分配给这些元素。在搜索值为“2”的元素时，您必须检查所有这些“未排序”值（x 和 y 和 z）。如果增加数组的大小，您会看到“未排序”值的数量可能会二次增加。这意味着搜索算法的最坏情况时间复杂度也应该二次增加。

您可以找到最小的数组大小（让它为 'r'），并且对于每个矩阵`arr[*][*][k]`搜索给定的数字 O(m+n) 时间，这给出了 O((m+n)*r) 时间复杂度。

或者，如果其中一个数组大小比其他*数组*`r >> m*n`大得多`arr[i][j][*]`（

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:47:16.893

如果内存消耗不是大问题，您可以将数组复制到单个 1D 数组对中，然后按值对该数组进行排序并在其中执行二进制搜索，复杂度为 O(log(n+m+r))。但是初始排序将采用 O((n+m+r)*log(n+m+r)) ，这将定义整个算法的复杂性。

我认为由于 3D 数组在每个维度上都进行了排序，因此可以找到一些算法，将其转换为排序的 1D 数组，速度比 O((n+m+r)*log(n+m+r)) ，但我不知道这样的事情。或许蚩尤试图解释这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T02:42:29.927

从理论上讲，我可以想到一个对数的递归解决方案。

假设 n 是您在立方体 NxNxN 中寻找的数字。这个立方体按照从东到西、从北到南、从上到下的升序排列。使得在极端东北顶部的数量最小，在极端西南底部的数量最大。

选择立方体中心的数字。如果这个数字等于 n，那么我们就找到了这个数字。如果这个数字大于 n，我们可以忽略所有位于西南底部的数字，因为它们都将大于 n。这些数字是立方体的 1/8。现在我们可以轻松地将立方体的剩余部分分成 7 个立方体并重复该过程。

类似地，如果这个数字小于 n，我们可以忽略所有位于东北顶部的数字。

```
Point find(int[][][]matrix, int N, int n)
{
    if(N == 0)
    {
      return null;
    }

    int x = matrix[N/2][N/2][N/2];
    if( x == n)
        return new Point(N/2, N/2, N/2);
    else if (x > n)
    {
        for(Matrix m: SplitTheCubeInto8CubesAndIgnoreSouthWestBottomCube(matrix))
        {
            if((p = find(m, N/8, n)) != null)
                return p;
           else
                return p;
        }
    }
    else
    { 
        for(Matrix m: SplitTheCubeInto8CubesAndIgnoreNorthEastTopCube(matrix))
        {
            if((p = find(m, N/8, n)) != null)
                return p;
           else
                return p;
        }
    }
} 
```

复杂度可以表示如下： T(M) = 7*T(M/8)+ 1 （M 是位于立方体中的点的总数。M = N*N*N。在每次比较中，我们是剩下 7 个 M/8 大小的立方体）O = ln (M) [ln 在 8/7 的基础上] 或 O = ln (N)*

# python - 有没有办法为 Python 和 Ruby 设置 Eclipse？

> ID：11592694
> 
> 赞同：0
> 
> 时间：2012-07-21T13:42:34.727
> 
> 标签：python, ruby, eclipse

你可以为 Python 和 Ruby 设置 Eclipse 吗？我目前使用 PyDev 为 java 和 python 设置了它。但是当我尝试为 ruby​​ 安装 Aptana 3 插件时，它不会让我说存在冲突的依赖关系，我猜这意味着我可以将它设置为一个或另一个但不能同时设置？有人设法为 Java、Python 和 Ruby 设置 eclipse 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:35:41.990

根据我的经验，尝试将 Aptana 插件安装到现有的 Eclipse 安装中通常是行不通的。相反，您可以尝试安装[Eclipse DLTK](http://www.eclipse.org/dltk/)，它提供了 Ruby 开发环境等。

# android - Android OpenGL ES 2.0 光照？

> ID：11592699
> 
> 赞同：1
> 
> 时间：2012-07-21T13:43:23.427
> 
> 标签：android, opengl-es-2.0, cube

我是 GLES 2.0 的新手。这真的让我很紧张，因为 OpenGL ES 1 II 只是设置了 GL_LIGHTNING1，然后设置了光照。在 GLES 2.0 中它不起作用。实际上整个屏幕都是黑色的。所以请告诉我应该如何处理下面的代码。这些是我设置的顶点：

```
 static float quadrateCoords[] = { // in counterclockwise order:
    // front
    -0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, 0.5f,
    -0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, 0.5f,
    // back
    -0.5f, -0.5f, -0.5f,
     0.5f, -0.5f, -0.5f,
    -0.5f, 0.5f, -0.5f,
     0.5f, 0.5f, -0.5f,
    // left
    -0.5f, -0.5f, 0.5f,
    -0.5f, -0.5f, -0.5f,
    -0.5f, 0.5f, 0.5f,
    -0.5f, 0.5f, -0.5f,
    // right  
     0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, -0.5f,
     0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, -0.5f,  
    // up  
    -0.5f, 0.5f, 0.5f,
     0.5f, 0.5f, 0.5f,
    -0.5f, 0.5f, -0.5f,
     0.5f, 0.5f, -0.5f,
    // bottom  
    -0.5f, -0.5f, 0.5f,
     0.5f, -0.5f, 0.5f,
    -0.5f, -0.5f, -0.5f,
     0.5f, -0.5f, -0.5f
};
static float normal[] = {
    0.0f, 0.0f, 1.0f,
    0.0f, 0.0f, 1.0f,
    0.0f, 0.0f, 1.0f,
    0.0f, 0.0f, 1.0f,

    0.0f, 0.0f, -1.0f,
    0.0f, 0.0f, -1.0f,
    0.0f, 0.0f, -1.0f,
    0.0f, 0.0f, -1.0f,

    -1.0f, 0.0f, 0.0f,
    -1.0f, 0.0f, 0.0f,
    -1.0f, 0.0f, 0.0f,
    -1.0f, 0.0f, 0.0f,

    1.0f, 0.0f, 0.0f,
    1.0f, 0.0f, 0.0f,
    1.0f, 0.0f, 0.0f,
    1.0f, 0.0f, 0.0f,

    0.0f, 1.0f, 0.0f,
    0.0f, 1.0f, 0.0f,
    0.0f, 1.0f, 0.0f,
    0.0f, 1.0f, 0.0f,

    0.0f, -1.0f, 0.0f,      
    0.0f, -1.0f, 0.0f,      
    0.0f, -1.0f, 0.0f,      
    0.0f, -1.0f, 0.0f       
};

static float quadrateColors[] = { // in counterclockwise order:
    // front
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,

    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,

    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,

    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,

    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,

    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f
}; 
```

着色器代码是：

```
 private final String vertexShaderCode =
        "uniform mat4 uMVPMatrix;\n" +
        "uniform mat4 uMVMatrix;\n" +
        "uniform vec3 uLightPos;\n" +

        "attribute vec4 aPosition;\n" +
        "attribute vec4 aColor;\n" +
        "attribute vec4 aNormal;\n" +

        "varying vec4 vColor;\n" +

        "void main() {\n" +
            "vec3 modelViewVertex = vec3(uMVMatrix * a_Position);\n" +
            "vec3 modelViewNormal = vec3(uMVMatrix * vec4(aNormal, 0.0));\n" +
            "float distance = length(uLightPos - modelViewVertex);\n" +
            "vec3 lightVector = normalize(uLightPos - modelViewVertex);\n" +
            "float diffuse = max(dot(modelViewNormal,lightVector), 0.1):\n" + 
            "diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance)));\n" +

            "vColor = aColor * diffuse;\n" + 

            "gl_Position = aPosition * uMVPMatrix;\n" +
        "}\n";

private final String fragmentShaderCode =
        "precision mediump float;\n" +

        "varying vec4 vColor;\n" +

        "void main() {\n" +
            "gl_FragColor = vColor;\n" +
        "}\n"; 
```

最后绘制函数：

```
 public void draw(float[] mvpMatrix, float[] mVMatrix) {
    // Add program to OpenGL environment
    GLES20.glUseProgram(mProgram);

    // get handle to vertex shader's aPosition member
    mPositionHandle = GLES20.glGetAttribLocation(mProgram, "aPosition");
    nNormalHandle = GLES20.glGetAttribLocation(mProgram, "aNormal");
    nColorHandle = GLES20.glGetAttribLocation(mProgram, "aColor");

    // Enable a handle to the triangle vertices
    // Prepare the triangle coordinate data
    GLES20.glEnableVertexAttribArray(mPositionHandle);
    GLES20.glVertexAttribPointer(mPositionHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false, vertexStride, vertexBuffer);

    GLES20.glEnableVertexAttribArray(nNormalHandle);
    GLES20.glVertexAttribPointer(nNormalHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false, vertexStride, vertexBuffer2);

    GLES20.glEnableVertexAttribArray(nColorHandle);
    GLES20.glVertexAttribPointer(nColorHandle, COORDS_PER_VERTEX, GLES20.GL_FLOAT, false, vertexStride, vertexBuffer3);

    muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, mvpMatrix, 0);        

    muMVMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVMatrix");
    GLES20.glUniformMatrix4fv(muMVMatrixHandle, 1, false, mVMatrix, 0);        

    muLightPosHandle = GLES20.glGetUniformLocation(mProgram, "uLightPos");
    GLES20.glUniform3f(muLightPosHandle, 10.0f, 10.0f, 15.0f);

    // Front
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);

    // Back
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 4, 4);

    // Left
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 8, 4);

    // Right
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 12, 4);

    // Top
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 16, 4);

    // Right
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 20, 4);

    // Disable vertex array
    GLES20.glDisableVertexAttribArray(mPositionHandle);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:31:01.813

像这样调试： **gl_FragColor = vec4(0.5, 0, 0, 0.5) + vColor;**

找到错误（如果有），尽管您的着色器是正确的。

如果在测试错误后仍然存在错误（**直接使用颜色代替自定义值**），请查看此 ADS 着色器

**[如何在 OpenGLES 1.x 中实现阴影（在 iPhone 上）](https://stackoverflow.com/questions/5518866/how-to-implement-shadow-in-opengles-1-x-on-iphone/11789657#11789657)**

**还有一点要记住，如果您启用了剔除，请禁用它**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T16:39:34.833

您正在尝试在投影空间向量 ( `newNormal`) 和世界空间向量 ( `lightPos`) 之间进行点积。

要执行点积，两个向量必须在相同的坐标空间中。在世界空间坐标中提供法线 ( `modelMatrix * aNormal`)，或者在投影空间中提供 lightPos ( `viewProjectionMatrix * lightPos`)。

# android - NDK 安卓启动

> ID：11592701
> 
> 赞同：0
> 
> 时间：2012-07-21T13:44:03.773
> 
> 标签：android, android-ndk

如果我擅长 C/C++ 语言、Java 和 android SDK。我需要开始使用 NDK 开发 android。我该如何开始？我需要什么知识？我可以从中阅读更多关于 NDK 的哪些参考资料？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:49:46.957

当我开始 NDK 时，我发现这些链接非常有用。

1) [http://www.ibm.com/developerworks/opensource/tutorials/os-androidndk/os-androidndk-pdf.pdf](http://www.ibm.com/developerworks/opensource/tutorials/os-androidndk/os-androidndk-pdf.pdf)

2) [http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/](http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/) ==> 从 Android NDK 开始的好链接

# apache - Magento：.htaccess 文件

> ID：11592705
> 
> 赞同：0
> 
> 时间：2012-07-21T13:44:11.497
> 
> 标签：apache, .htaccess, magento

我正在运行 Magento 社区版 1.7.0.2 版。我想知道，为什么我的安装中有*两个*.htaccess文件，一个在magento根目录下，另一个在magento根目录下的magento app目录下？

在我的系统上，第一个是 209 行，而第二个只包含两个指令。

谁能解释一下为什么有两个文件而不是一个。两者都被解析还是只是其中之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:22:32.553

通常每个 .htaccess-File 都会被解析，因为它们可以被额外使用。

最后一个 .htaccess 文件可能会覆盖或增强之前的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T19:39:26.560

app/ 中的 .htaccess 文件用于“拒绝”对 app 下任何文件的所有访问。没有这个，有人可以访问[http://yourdomain.com/app/etc/local.xml](http://yourdomain.com/app/etc/local.xml)并查看您的数据库凭据，以及其他不好的事情。var/ 中也应该有一个类似的文件（以防止查看日志等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-23T05:54:28.737

删除现有文件并尝试添加默认的新 .htaccess 文件

[Magento 默认 htaccess 文件](http://allhtaccess.info/magento-htaccess-file/)

# javascript - 如何等待多个 jquery 文件上传？

> ID：11592710
> 
> 赞同：0
> 
> 时间：2012-07-21T13:44:41.840
> 
> 标签：javascript, jquery

[使用jquery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)上传多个文件后，我正在尝试刷新页面：

出于某种原因，在每个单独的文件上传完成后都会调用我的测试消息，并且我试图在所有文件上传后只调用一次。这可能吗？

HTML：

```
<form id="fileupload" action="server/php/" method="POST" enctype="multipart/form-data">
    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
    <div class="row fileupload-buttonbar">
        <div class="span7">
            <!-- The fileinput-button span is used to style the file input field as button -->
            <span class="btn btn-success fileinput-button">
                <i class="icon-plus icon-white"></i>
                <span>Add files...</span>
                <input type="file" name="files[]" multiple>
            </span>
            <button type="submit" class="btn btn-primary start">
                <i class="icon-upload icon-white"></i>
                <span>Start upload</span>
            </button>
        </div>
    </div>
    <!-- The loading indicator is shown during file processing -->
    <div class="fileupload-loading"></div>
    <br>
    <!-- The table listing the files available for upload/download -->
    <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
</form> 
```

jQuery

```
$('#fileupload').bind('fileuploadcompleted', function (e, data) {
    e.preventDefault();

    // I would expect to see this after all files ahve uplaoded but I see it for each file upload ?
    alert("Completed");

    //location.reload();
    ...
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-20T13:23:14.597

`stop`事件仅在所有上传完成后触发。

```
$('#fileupload').bind('fileuploadstop', function (e, data) {
    location.reload();
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:03:18.297

监听`fileuploadadd`事件，每次事件发生时增加一些变量，这样你就知道有多少文件要上传。然后，在您的`fileuploaddone`事件处理程序中，增加另一个变量，以便您知道有多少已完成。当两者相等时，所有上传都已完成，因此重新加载（或您可能需要做的任何其他事情）。似乎*应该*有一个更好的解决方案，但是这个应该可以。

# c# - 复选框控件值属性是否有解决方法？

> ID：11592711
> 
> 赞同：0
> 
> 时间：2012-07-21T13:44:42.633
> 
> 标签：c#, asp.net, vb.net

我知道复选框控件没有 value 属性，但有解决此问题的方法吗？

我们希望将一堆 url 作为值传递给复选框。

该 url 将从 db 生成。然后使用 jQuery，创建检查所有/取消选中的功能。这样，用户可以选中一个或多个带有 url 的复选框，并生成 url 的值。我可以处理这部分。

这是在经典 asp 中完成的，如下所示：

```
<input type="checkbox" name="url" value="<%=url%>" /> http://google.com 
```

但是，我不确定这是如何在 asp.net 中完成的

我实际上发现了类似这个自定义控件的东西，我想它是用来覆盖 CheckBox 控件的。

据我了解，此控件用于添加 Value 属性，它应该在服务器端和客户端都可用。

我的问题是我不确定如何将其应用于我的情况。

```
public class ValueCheckBox : CheckBox 
{ 
    public string Value 
    { 
        get; 
        set; 
    } 

    protected override void Render(System.Web.UI.HtmlTextWriter writer) 
    { 
        writer.AddAttribute("value", this.Value); 
        base.Render(writer); 
    } 
} 
```

如果有替代方案，也许比这更简单，我也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T13:55:32.790

如果您的网站仅适用于 HTML5 浏览器，那么您可以使用 data 属性

```
<input id=checkbox1 type=checkbox data-url="http://wwww.a.com" /> 
```

在 jquery 中，您可以使用以下方法检索它：

```
var myData = $('#checkbox1').data('url'); 
```

一种解决方案（不是很干净），如果您还想支持较旧的浏览器，则可以在复选框旁边呈现隐藏字段。

```
<input id=checkbox1 type=checkbox  />
<input id=checkbox1Value type=hidden value="http://wwww.a.com" /> 
```

# android - 从选项卡中的按钮切换选项卡

> ID：11592712
> 
> 赞同：0
> 
> 时间：2012-07-21T13:44:57.393
> 
> 标签：android, android-fragments

我正在使用片段并创建了一个带有 3 个选项卡的选项卡主机，并在第一个选项卡中放置了一个按钮。我的问题是我可以从我创建的按钮更改到第二个选项卡吗？这是我的代码：

```
 private class TabInfo {
        private String tag;
        private Class<?> clss;
        private Bundle args;
        private Fragment fragment;

        TabInfo(String tag, Class<?> clazz, Bundle args) {
            this.tag = tag;
            this.clss = clazz;
            this.args = args;
        }

    }

    /**
     * 
     * @author mwho
     * 
     */
    class TabFactory implements TabContentFactory {

        private final Context mContext;

        /**
         * @param context
         */
        public TabFactory(Context context) {
            mContext = context;
        }

        /**
         * (non-Javadoc)
         * 
         * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
         */
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }

    }

    /**
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
     */
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabs_layout);
        initialiseTabHost(savedInstanceState);
        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); // set
                                                                                // the
                                                                                // tab
                                                                                // as
                                                                                // per
                                                                                // the
                                                                                // saved
                                                                                // state
        }
    }

    /**
     * (non-Javadoc)
     * 
     * @see android.support.v4.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
     */
    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("tab", mTabHost.getCurrentTabTag()); // save the tab
                                                                // selected
        super.onSaveInstanceState(outState);
    }

    /**
     * Initialise the Tab Host
     */
    private void initialiseTabHost(Bundle args) {
        mTabHost = (TabHost) findViewById(android.R.id.tabhost);
        mTabHost.setup();
        TabInfo tabInfo = null;
        ElastoTabsActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab1").setIndicator("Home"),
                (tabInfo = new TabInfo("Tab1", HomeTab.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        ElastoTabsActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab2").setIndicator("Taping Prep"),
                (tabInfo = new TabInfo("Tab2", Tab2Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        ElastoTabsActivity.addTab(this, this.mTabHost, this.mTabHost
                .newTabSpec("Tab3").setIndicator("Tab 3"),
                (tabInfo = new TabInfo("Tab3", Tab3Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        // Default to first tab
        this.onTabChanged("Tab1");
        //
        mTabHost.setOnTabChangedListener(this);
    }

    /**
     * @param activity
     * @param tabHost
     * @param tabSpec
     * @param clss
     * @param args
     */
    private static void addTab(ElastoTabsActivity activity, TabHost tabHost,
            TabHost.TabSpec tabSpec, TabInfo tabInfo) {
        // Attach a Tab view factory to the spec
        tabSpec.setContent(activity.new TabFactory(activity));
        String tag = tabSpec.getTag();

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state. If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        tabInfo.fragment = activity.getSupportFragmentManager()
                .findFragmentByTag(tag);
        if (tabInfo.fragment != null && !tabInfo.fragment.isDetached()) {
            FragmentTransaction ft = activity.getSupportFragmentManager()
                    .beginTransaction();
            ft.detach(tabInfo.fragment);
            ft.commit();
            activity.getSupportFragmentManager().executePendingTransactions();
        }

        tabHost.addTab(tabSpec);
    }

    /**
     * (non-Javadoc)
     * 
     * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
     */
    public void onTabChanged(String tag) {
        TabInfo newTab = this.mapTabInfo.get(tag);
        if (mLastTab != newTab) {
            FragmentTransaction ft = this.getSupportFragmentManager()
                    .beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(this,
                            newTab.clss.getName(), newTab.args);
                    ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            this.getSupportFragmentManager().executePendingTransactions();
        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T06:07:24.890

在编写代码之前，您是否有机会阅读[TabHost 纪录片？](http://developer.android.com/reference/android/widget/TabHost.html)因为您已经在代码中使用[了一个函数](http://developer.android.com/reference/android/widget/TabHost.html#setCurrentTab%28int%29)来更改选项卡。

您唯一需要做的就是在按钮的 onClick 侦听器中实现它。如果您不知道如何处理按钮点击，网络上有大量示例。

# javascript - 选择上一个 html 标签 onClick

> ID：11592714
> 
> 赞同：0
> 
> 时间：2012-07-21T13:45:11.223
> 
> 标签：javascript, jquery, jquery-selectors

我有类似的 html 方案

```
<li>Some text <a href='#' class='click'>Remove</a> <input type='hidden' ></li> 
```

我有 OnClick 功能

```
$(".click").click(function() {
    // i need to select 'li' and then delete it
    // i have this code, but its not working
    $(this).prev('li').remove();
    return false;
}); 
```

如何选择以前的 html 标签 onClick ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T13:46:39.157

`li`不是前一个元素，而是父元素：

```
$(".click").click(function () {
    $(this).parent().remove();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T13:47:03.097

`.prev`是兄弟姐妹，在你的情况下，`li`是父母，所以你可以使用`.closest`.

```
$(".click").click(function () {
        $(this).closest('li').remove();
        return false;
}); 
```

# css - 带有溢出-y的div内的画布

> ID：11592715
> 
> 赞同：2
> 
> 时间：2012-07-21T13:45:32.113
> 
> 标签：css, html, canvas, scrollbar

我有一个带有溢出-y 的 div，里面有一个画布。当我向下滚动时，我在 FF、Chrome 和 IE9 的底部看到一条条。我怎样才能让这个条带消失？

红色条带可以在[这里看到](http://jsbin.com/etipez/2/edit#preview)

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }

  #container {
    overflow-y: scroll;
    width: 900px;
    height: 400px;
    background-color: red;
  }

  #container canvas {
    background-color: gray;
  }
</style>
<script type="text/javascript">
  var init = function() {
    var container = document.getElementById('container');
    var canvas = document.createElement('canvas');
    canvas.width = container.clientWidth;
    canvas.height = 1000;
    container.appendChild(canvas);
    container.scrollTop = container.scrollHeight;
  }
  </script>
</head>
<body onload="init()">
  <div id="container"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:53:56.863

添加：`display: block;`_`#container canvas`

```
#container canvas {
    background-color: gray;
    display: block;
} 
```

[演示](http://jsbin.com/etipez/5/edit)

# c++ - 分段错误,C++,g++,

> ID：11592717
> 
> 赞同：1
> 
> 时间：2012-07-21T13:45:41.897
> 
> 标签：c++

我有这个简单的程序，当我运行这个程序时，出现分段错误，我无法识别我的错误在哪里。欢迎任何帮助。（Di> = 27的分段错误）。关键是当我立即删除功能时，分段错误消失了。或者当我将函数转换为 void 函数时。我知道有内存泄漏，因为没有使用删除运算符，它会导致内存泄漏，但容易不负责分段错误（这个泄漏内存很远会产生分段错误）。为简单起见，我没有使用删除运算符。

```
 #include <iostream>
    #include<complex>
    using namespace std;
    const int Di=27;
    typedef struct {
         complex<double> Matrix[Di][Di][Di][Di];

        } O;

    O initializing(int );

    int main()
    {
    O * Operator=new O[1];
    int p;
    int n;
    Operator[0]=initializing(n);
    cout<<"hi";
    return 0;

    }

O initializing(int  point)
{
int i,j,m,n;
O *Operator=new O[1];
for(i=0;i<Di-1;i++)
    for(j=0;j<Di-1;j++)
        for(n=0;n<Di-1;n++)
            for(m=0;m<Di-1;m++)
            Operator[0].Matrix[i][j][m][n]=2;

            cout<<Operator[0].Matrix[Di-1][Di-1][Di-1][Di-1];
return Operator[0];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T13:48:33.860

您正在按值返回一个具有大数组的结构，并且它不适合堆栈。通过指针返回结构，并在调用者中取消引用该指针。它也可以帮助您避免内存泄漏。

```
O* initializing(int );

int main()
{
    O * Operator=new O[1];
    int p;
    int n;
    O *tmp = initializing(n);
    Operator[0] = *tmp;
    delete[] tmp;
    cout<<"hi";
    return 0;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T13:58:37.903

我认为问题在于，当按值返回对象时，可能会在堆栈上创建一个临时对象。使用`Di=27`，每个对象的大小都是几兆字节，这很可能会溢出堆栈。

通过初始化一个新对象以复制现有对象，您还分配（和泄漏）至少两倍于您需要的内存。

更好的选择可能是将对象通过引用传递给函数：

```
void initialise(O & o, int point) {
    for (/*blah blah*/)
        o.Matrix[i][j][m][n]=2;
} 
```

或者给结构一个构造函数：

```
struct O {
    explicit O(int point) {
        for (/*blah blah*/)
            Matrix[i][j][m][n]=2;
    }

    complex<double> Matrix[Di][Di][Di][Di];
}; 
```

在任何情况下，请记住删除您分配的任何内容`new`；或者，更好的是，使用智能指针为您执行此操作。

# android - 我应该在安卓游戏中使用矢量艺术还是像素艺术？

> ID：11592724
> 
> 赞同：1
> 
> 时间：2012-07-21T13:46:54.457
> 
> 标签：android, graphics

目前，我使用 illustrator 为我的 Android 游戏创作艺术作品。我的艺术尺寸很小，只有 32x32。在 illustrator 中看起来不错，但是在导出时，我的艺术作品很模糊，看起来很乱！你能给点建议吗？怎样才能获得更好的艺术？你能在准备游戏图像方面提供一些建议吗？在您看来，对于像 32x32、像素艺术或矢量这样的小型游戏图像，哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:51:00.097

“首先，您导出的图像应该与 android 中精灵的大小相匹配。因此，如果您正在创建 32x32 大小的图像，那么您的精灵应该在设备屏幕上理想地呈现为 32x32。不要期望 32x32 图像看起来当您的精灵在设备上占用 100x100 像素时很好！

将矢量艺术从 Illustrator 导出到图像（例如 PNG）以在 Android 中使用不应伴随任何质量损失。当然，您正在失去矢量图的可伸缩性，但是当位图和矢量图都以 100% 缩放显示时，它们应该看起来相同（如果它们不一样，那么您的工作流程可能存在缺陷）。

但更有可能的是，您遇到了纹理过滤/mip 映射问题。根据您的相机距离，您可能会看到您的作品的 mip 映射版本，它可以解释模糊的图像。

要获得接近您在 illustrator 中看到的输出，您应该禁用 mip-mapping 并且可能还将纹理过滤设置为 GL_NEAREST"

# ios - 分组静态表背景问题

> ID：11592740
> 
> 赞同：1
> 
> 时间：2012-07-21T13:48:48.867
> 
> 标签：ios, xcode, uitableview

![屏幕](../Images/303729995a1a15e966b70a787c3a31e4.png)

有没有办法删除活动表上方和下方的这两个“较暗”的地方？我已经修补了不透明的选项，但没有任何成功。

注意：屏幕截图是在“向下拖动”时截取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:14:05.130

Michal，我很难理解这是怎么回事。我在情节提要中的一个视图控制器上尝试了类似的设置。在左侧，您可以看到结果，在右侧，您可以看到它在情节提要中的设置方式。如您所见，这是一个标准 UITableView，带有静态单元格，没有“深色背景”问题。向下拖动时也不会出现。

![在此处输入图像描述](../Images/812973885f65f1b4c20d941b2ff7affa.png)

这可能是由于您的设置有问题造成的。您能详细说明一下，以便我可以帮助您吗？

# asp.net - ASP.NET MVC3：连接的客户端计数

> ID：11592741
> 
> 赞同：2
> 
> 时间：2012-07-21T13:48:51.957
> 
> 标签：asp.net, asp.net-mvc-3, session, count

在我的 ASP.NET MVC3 Web 应用程序中，我想添加一条小消息，显示当前浏览该站点的用户数量。

我目前正在使用应用程序事件`Session_Start`来`Session_End`增加或减少 Global.asax 中的静态属性。

这有效，但它根本不精确。由于我的会话超时配置为 2000 万，因此更新之间存在巨大延迟。

有没有更优雅、更精确的方法来做到这一点？

我曾想过通过 AJAX 调用一个动作，这只是`Session.Abandon()`在`window.onbeforeunload`javascript 事件上执行，但是每次用户更改页面时都会调用它。有没有办法确定用户何时关闭浏览器或离开域？

欢迎任何提示、评论或代码示例！

这是当前代码的相关部分：

```
public class MvcApplication : System.Web.HttpApplication
{
    public static int UsersConnected { get; set; }

    protected void Session_Start(object sender, EventArgs e)
    {
        Application.Lock();
        UsersConnected++;
        Application.UnLock();
    }

    protected void Session_End(object sender, EventArgs e)
    {
        Application.Lock();
        UsersConnected--;
        Application.UnLock();
    }

    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:48:45.387

好的，这有点棘手，但我提供了一个“好的”解决方案。

**首先，我在 Global.asax**中创建了一个静态字典，它将存储客户端的 IP 地址及其最后轮询日期。

```
public class MvcApplication : System.Web.HttpApplication
{
   public static Dictionary<string, DateTime> ConnectedtUsers { get; set; }

   protected void Application_Start()
   {
        AreaRegistration.RegisterAllAreas();
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
        ConnectedtUsers = new Dictionary<string, DateTime>();
   }

   ...
} 
```

然后，在我的**CommonsController**中，我创建了这个动作，它将添加新客户端，删除过去 30 秒内未轮询的客户端并更新已注册客户端的轮询日期：

```
public class CommonsController : Controller
{
    ...

    public JsonResult UserConnected()
    {
        string ip = Request.UserHostAddress;

        if (MvcApplication.ConnectedtUsers.ContainsKey(ip))
        {
            MvcApplication.ConnectedtUsers[ip] = DateTime.Now;
        }
        else
        {
            MvcApplication.ConnectedtUsers.Add(ip, DateTime.Now);
        }

        int connected = MvcApplication.ConnectedtUsers.Where(c => c.Value.AddSeconds(30d) > DateTime.Now).Count();

        foreach (string key in MvcApplication.ConnectedtUsers.Where(c => c.Value.AddSeconds(30d) < DateTime.Now).Select(c => c.Key))
        {
            MvcApplication.ConnectedtUsers.Remove(key);
        }

        return Json(new { count = connected }, JsonRequestBehavior.AllowGet);
    }
} 
```

最后，在我的布局页面上，添加了这段代码，它将每 30 秒调用一次我的操作并在 span 中输出结果：

```
<span id="connectedUsers"></span>

<script type="text/javascript">
    function PollUsers()
    {
        $(function() {
            $.getJSON("/Commons/UserConnected", function(json){ $('#connectedUsers').text(json.count + " user(s) connected")}); 
        });
    }

    setInterval(PollUsers, 30000);
</script> 
```

可能不是*那么*精确，也可能不是*那么*优雅，但它确实有效。当然，来自同一 IP 的多个用户将计为一个用户。但这是迄今为止我尝试过的最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:27:17.840

您可以在卸载正文事件中从 javascript 调用 webmethod。 [http://www.codeproject.com/Tips/89661/Execute-server-side-code-on-close-of-a-browser](http://www.codeproject.com/Tips/89661/Execute-server-side-code-on-close-of-a-browser) 最好的问候

# regex - 正则表达式提取特定单词

> ID：11592742
> 
> 赞同：1
> 
> 时间：2012-07-21T13:49:04.667
> 
> 标签：regex

我正在寻找正则表达式来从文本中提取以下单词。例如，在每一行中“替换”之后的单词：

```
Replaced disk 

Replaced floppy

Replaced memory 
```

请建议它的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:03:35.407

如果没有更多详细信息（例如，您正在使用哪种正则表达式风格），我们无法真正为您提供帮助，但您可能希望将其与以下内容相匹配：

```
Replaced\s+(\w+)\b 
```

...然后从捕获组 #1 中提取所需的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T13:51:47.120

使用这个正则表达式`(?<=Replaced\s*)(.+)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:54:26.737

我认为

```
/Replaced\s(\w*?)/ 
```

或者：

```
/(?<=Replaced\s)(\w*)/ 
```

如果您只想选择单词而不是`Replaced`.

# ruby-on-rails - 在什么控制器的操作中更好地检查用户权限？

> ID：11592745
> 
> 赞同：0
> 
> 时间：2012-07-21T13:49:18.397
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

在“**新建**”还是“**创建**”？在“**编辑**”或“**更新**”中？

我检查这一行：

```
correct_user(@car.user) if not current_user.admin? 
```

在哪里

```
def correct_user(user)
   redirect_to root_path if current_user != user
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T13:52:27.527

如果这些操作都需要管理员权限，最好使用前置过滤器。

```
before_filter :correct_user,  :only => [:new, :create, :edit, :update] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:58:26.200

如果用户没有权限，则在每个地方都无法访问。

我会构造代码，这样您就不必在操作中编写它：

```
before_filter :load_car, :redirect_unless_correct_user!, :except => :index

protected
def load_car
  @car = Car.find(params[:car_id])
end

def redirect_unless_correct_user!
  redirect_to(root_path) unless (current_user == @car.user) || user.admin?
end 
```

# mobile - 您能否对支持 NFC 的手机进行编程，使其像 RFID 标签一样工作？

> ID：11592751
> 
> 赞同：1
> 
> 时间：2012-07-21T13:50:14.990
> 
> 标签：mobile, nfc, wireless, rfid

我有一个用于访问建筑物的 RFID 标签（我认为是 3.2 GHz）。我知道我可以用我的 Galaxy nexus 对 RFID 标签进行编程，但我可以让我的手机充当一个（类似于谷歌钱包 nfc 支付）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:46:17.033

Android 操作系统的商业版本中暂时不提供卡片模拟模式。谷歌钱包的情况很特别，因为谷歌只在他们的应用程序上提供了这个功能。使用 SWP SIM 卡安全元件还有其他模拟卡的可能性。这意味着您的手机也应该支持 SWP 卡。或者使用 Micro SD 卡安全元件进行卡仿真，而不是在常规情况下还需要天线扩展器。

# callback - 如何为 Googles Contacts API 注册回调？

> ID：11592755
> 
> 赞同：2
> 
> 时间：2012-07-21T13:50:39.407
> 
> 标签：callback, contacts, google-contacts-api

与其每隔 x 分钟查询我的服务器以查找我的 Google 联系人的更改，我更喜欢在通过 GMail 或我的 iPhone 添加、更新或删除联系人时调用某个 URL。

有没有办法可以注册回调来做到这一点？

例如，此时我将我的 GMail 帐户添加到我的 iPhone 和 iMac。当我打开 Contacts.APP 时，我可以看到我所有的 Gmail 联系人。当我添加联系人时，它会在我的 iPhone、iMac 和 GMail 网络界面中自动更新。但是，我想知道何时发生此类事件以通过 Google 联系人 API 运行其他任务。

# emacs - 如何在 Emacs 中隐藏额外信息

> ID：11592761
> 
> 赞同：3
> 
> 时间：2012-07-21T13:51:20.217
> 
> 标签：emacs

我想在 Emacs 中打开一个 XML 文件并以一种特殊的方式处理它。（假设一个主要模式是自定义打开 XML 文件并对其进行处理并以特殊方式呈现）我想要做的是隐藏 XML 中的额外标记标签并仅向用户显示内容。谁能建议我该怎么做？

```
`<name id=22> Luke </name>` 
```

=> 我只想显示“Luke”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T12:57:33.370

一种方法是使用正则表达式从 XML 中提取元素信息，然后打开一个临时缓冲区进行查看，您可以将元素信息粘贴到该缓冲区中。我不确定缩小是否足够细化以隐藏标记并仅显示元素信息。

话虽如此，临时缓冲区方法的替代方法是提取元素信息，将其粘贴到文件底部，然后缩小到文件的该部分，以便源标记不可见。

下面的函数大致完成了我的想法：

```
(defun show-xml-entities ()  
  (interactive)  
  (save-excursion  
    (let ((old-max (point-max)))  ;; save current end of buffer  
      (goto-char (point-min))     ;; go to beginning of buffer  
      (while (re-search-forward ">\\([^<>]+\\)<" nil t)  ;; search for elements until not found  
    (when (> (length (match-string-no-properties 1)) 0)  ;; if match is non-zero length  
      (setq temp (point-marker))                         ;; save end of match  
      (goto-char (point-max))                            ;; go to end of buffer  
          ;; paste current match to end of buffer   
      (insert (concat (buffer-substring-no-properties (match-beginning 1) (match-end 1))))  
      (goto-char (marker-position temp))  ;; return to end of current match  
      )  
    )  
      (narrow-to-region old-max (point-max)))   ;; narrow to newly pasted element text  
    )  
  ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T16:48:53.847

逻辑步骤将是 - 计算起始缓冲区结束位置（point-max）和 sav 在 var 中循环 - 循环通过您的 XML，收集您的实体信息并将其粘贴在保存的位置之后 - 完成调用时（窄到区域的原始点-max（点最大值））。这将隐藏所有 XML，以便只有您的实体文本可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T11:43:56.183

Mx sgml-hide-tags RET

请参阅菜单 SGML 部分查看更多相关命令

# c++ - Visual Studio 中的指针和发布版本

> ID：11592775
> 
> 赞同：0
> 
> 时间：2012-07-21T13:53:17.243
> 
> 标签：c++, visual-studio, pointers, assembly, inline-assembly

当我使用 Visual Studio 2008 创建发布版本时，我遇到了一个奇怪的问题。我想知道你们是否可以帮助我了解发生了什么。

描述：我有一个类成员函数，它返回一个指向存储在类中的结构的指针：

```
const MyStruct * Myclass::getPointer() { 
    return mystruct_variable; // this is properly initialyzed 
} 
```

另一点值得指出的是，这个类/方法在一个 dll 中，我将它导出以在单独的可执行项目中使用。当我进行发布构建并尝试使用上述方法时，运行崩溃取决于是否内联 getPointer() 方法（即放置在类的头文件部分中）或没有（放置在 cpp 文件中）。

用法是：

```
const MyStruct * cf = myclassObj.getPointer();
int n = cf->size_t;
std::cout<<n<<std::endl; 
```

当 MyClass::getPointer() 在标题中内联时，程序集如下所示：

```
const MyStruct * cf = myclassObj.getPointer();
  012514A8  mov         esi,dword ptr [ebx+794h] 
int n =cf->size_t;
  012514AE  mov         eax,dword ptr [esi+20h] 
std::cout<<n<<std::endl;
  012514B1  mov         ecx,dword ptr [__imp_std::endl (1252038h)] 
  012514B7  push        ecx  
  012514B8  mov         ecx,dword ptr [__imp_std::cout (125203Ch)] 
  012514BE  push        eax  
  012514BF  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (1252048h)] 
  012514C5  mov         ecx,eax 
  012514C7  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (1252044h)] 
```

当 getPointer() 的类方法没有被内联，并放在相应的 cpp 文件中时，相同的代码给出：

```
const MyStruct * cf = myclassObj.getPointer();
  00DA14A8  mov         ecx,ebx 
  00DA14AA  call        dword ptr [__imp_MyClass::getPointer(0DA2104h)] 
int n =cf->size_t;
std::cout<<n<<std::endl;
  00DA14B0  mov         ecx,dword ptr [__imp_std::endl (0DA2038h)] 
  00DA14B6  mov         esi,eax 
  00DA14B8  mov         eax,dword ptr [esi+20h] 
  00DA14BB  push        ecx  
  00DA14BC  mov         ecx,dword ptr [__imp_std::cout (0DA203Ch)] 
  00DA14C2  push        eax  
  00DA14C3  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (0DA2048h)] 
  00DA14C9  mov         ecx,eax 
 00DA14CB  call        dword ptr [__imp_std::basic_ostream<char,std::char_traits<char> >::operator<< (0DA2044h)] 
```

任何想法为什么这两个案例有不同的装配集？难道我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T13:59:44.083

如果链接 C++ DLL，则必须确保所有编译器标志*完全相同*。否则，结构、虚拟表等的大小可能会有所不同，并且代码会因对内存的无效访问而失败。内联当然克服了这一点，因为代码在 exe 文件中，而不是在 dll 中，因此使用正确的标志编译。

简而言之 - 对于发布构建使用发布 DLL，对于调试构建使用调试 DLL。

# svg - 图像未显示为 svg 标记

> ID：11592780
> 
> 赞同：0
> 
> 时间：2012-07-21T13:53:41.090
> 
> 标签：svg, marker

我编写了以下代码，以在折线的末端显示一个三角形，并在其开头显示一个图像。运行这个 svg 它只显示最后的三角形，但没有显示图像。我在这里想念什么...

```
 <svg width="120" height="120" viewBox="0 0 120 120"
 xmlns="http://www.w3.org/2000/svg" version="1.1"
 xmlns:xlink="http://www.w3.org/1999/xlink">

<defs>
<marker id="Image"
            viewBox="0 0 10 10" 
            refX="5" refY="5"
            markerWidth="6" 
            markerHeight="6"
            orient="auto">
        <path d="M 0 0 L 10 10 L 10 0 L 0 0 z" />
    </marker>
</defs>

<polyline points="10,90 50,80 90,20"
          fill="none" stroke="black" 
          stroke-width="2"
          marker-end="url(#Triangle)" marker-start="url(#Image)"/>

</svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:59:21.800

没有 ID 为 Triangle 的标记，因此它没有显示。因此它只显示图像标记（恰好是一个三角形）。

# php - 异常 MongoCursorException: 无法发送查询: ët§ôï9·H'ï¯¤7·ø?u§Ht§ ö·Ìu§®u§Ì½u§4e

> ID：11592781
> 
> 赞同：0
> 
> 时间：2012-07-21T13:53:51.490
> 
> 标签：php, mongodb-php

我正在尝试从我的系统与远程 MongoDB 服务器通信。我使用的代码是这样的

```
$con_string='mongodb://server_ip:27017';
$m = new Mongo($con_string);
$temp=$m->selectDB("DBName");
try {
    $mc=$temp->collection_name->find()->limit(5);
    var_dump($mc->info());
    var_dump(iterator_to_array($mc));
}
catch (MongoCursorException $e) {
    echo "error message: ".$e->getMessage()."</br>";
echo "error code: ".$e->getCode();
} 
```

现在我从 Xdebug 收到以下消息

```
MongoCursorException: couldn't send query: ët§ôï9·H'ï¯¤7·ø?u§Ht§ ö·Ì­u§®u§Ì½u§4e 
```

为什么会引发此异常以及为什么异常末尾有垃圾。我不是每次都得到这个例外，而是 6 次中有 5 次。我从 catch 块得到的消息也是

```
error message: couldn't send query:  QY¥ôï9·H§ï³¤7·DCY¥h §
error code: 14 
```

`The error code 14 means "C socket error on send."`[PHP手册](http://php.net/manual/en/class.mongocursorexception.php)说。这个错误是什么意思？

聊天中的一个人建议垃圾表明数据可能不是 utf8_encoded 但我正在做一个`find()`没有标准的简单所以我需要编码什么？

**编辑：**

为了解决这种情况，我写了这个

```
function getCursor($conn,$db_name,$coll_name,$query_options=array(),$fields=array(),$cursor_options=array(),$max_tries=0) {
    $counter=0;
    while(1) {
        try {
            $cursor=new MongoCursor($conn,$db_name.'.'.$coll_name,$query_options,$fields);

            if (array_key_exists('count',$cursor_options))
                return $cursor->count();
            if (array_key_exists('limit',$cursor_options))
                $cursor=$cursor->limit($cursor_options['limit']);
            if (array_key_exists('skip',$cursor_options))
                $cursor=$cursor->skip($cursor_options['skip']);
            if (array_key_exists('sort',$cursor_options))
                $cursor=$cursor->sort($cursor_options['sort']);

            return $cursor;
        }
        catch (MongoCursorException $e) {
            $counter+=1;
            if ($max_tries>0) {
                if ($counter>$max_tries)
                    echo "error message: ".$e->getMessage()."\n";
                    echo "error code: ".$e->getCode()."\n";
                    return false;
            }
        }
    }
} 
```

这些函数接受查询参数，然后将查询发送到服务器，如果`MongoCursorException`引发，它会再次发送查询。它会这样做`$max_tries`。如果`$max_tries`设置为 0，它将继续将此查询发送到服务器，直到查询成功。也许这很愚蠢，我应该将其设置为某个固定值，例如 50。成功时，该函数返回光标，除非您在寻找`count`并且在这种情况下它返回`count`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:01:50.073

你的字符串看起来像这样，如果：

*   您有字符集编码问题
*   内存坏了

由于在您的代码中涉及的字符串不多，因此这是编码问题的可能性不是很高。

但是由于 Xdebug 是一个 PHP 扩展，它处理了很多内部问题，因此破坏内存可能是一回事。

找出问题的一个简单方法是禁用您怀疑导致问题的扩展，例如 xdebug。

它对于文档目的也很有用 tp 写下您正在使用的 PHP 和扩展版本以及在哪个操作系统上。我在评论中要求，它是一个类似的列表：

```
PHP 5.3.10
Mongodb Extension 1.2.10
Mongodb Server 2.0.6
Xdebug 2.2.0    
Centos 6.2 64-bit 
```

检查[网站的 xdebug](http://xdebug.org)表明有一个新版本可用。正如您之前通过禁用 xdebug 发现它会影响结果一样，请尝试更新 xdebug 扩展并查看它是否有帮助。

即使是这样，请保留您的版本列表以供进一步参考（以及对问题的简短描述），因为如果升级后问题没有完全解决，此信息在以后执行时非常有用有用的错误报告。软件中的那些内部问题有时很难发现，因此这些信息有助于更容易地重现或识别所涉及的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:07:26.950

这在 Mongo 驱动程序 v1.3+ 中已修复

参考：[https ://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/IJ1n_Xt_al8](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/IJ1n_Xt_al8)

下载：[http ://docs.mongodb.org/ecosystem/drivers/](http://docs.mongodb.org/ecosystem/drivers/)

# php - 推送通知如何工作？

> ID：11592783
> 
> 赞同：26
> 
> 时间：2012-07-21T13:54:06.760
> 
> 标签：php, javascript, apache, push-notification, amazon-sns

我正在尝试在我的基于 PHP 的网站上实现推送通知。目标是制作类似于 Stackoverflow 和其他网站的东西，它们会在用户收到消息时实时通知用户。

我使用 mysql 作为我的数据库，使用 Apache 作为我的服务器，并且正在考虑使用 Amazon-SNS 作为这些通知的框架，因为这似乎是该服务的目的。

我从文献中很难理解如何以编程方式设置`sending.php`和`receiving.php`页面。我假设该`sending.php`页面只涉及`$_POST['message']`某个页面，但从那里我真的迷路了。

如果有什么东西可以帮助我理解`receiving.php`推送通知的页面是什么样的，我将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-21T18:01:02.757

## 在职的

[HTML5rocks 在这里](http://www.html5rocks.com/en/tutorials/websockets/basics/)提供了一个很好的解释，关于 websockets 是如何工作的。

好吧，您可以将 Websockets 用于支持它的浏览器（因为所有现代浏览器都提供了良好的支持）

## 入门

您可以从以下几个资源开始：

[HTML5rocks](http://www.html5rocks.com/en/tutorials/websockets/basics/)

[网易+](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)

[Nettuts+ 提供了一个很好的websockets](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)入门教程。

[对于支持 Websockets 的浏览器](https://stackoverflow.com/questions/1253683/what-browsers-support-html5-websocket-api)

## 倒退

您可以使用[Modernizr](http://modernizr.com)来检测客户端的浏览器是否支持 websockets，作为后备，您可以使用 flash 而不是 Websockets。

对于这些项目，当在没有 WebSockets 或禁用它的浏览器上运行时，将使用[web-socket-js 。](https://github.com/gimite/web-socket-js)它的效率将低于原生，但仍比长轮询低得多。

[任何带有 Flash 的浏览器都可以使用web-socket-js](https://github.com/gimite/web-socket-js) shim/polyfill支持 WebSocket 。

参考：

[WebSocket 的替代方案](https://stackoverflow.com/questions/4482843/alternative-to-websockets)

[https://softwareengineering.stackexchange.com/questions/33713/is-there-an-alternative-to-html-web-sockets-now-that-firefox-4-has-disabled-the](https://softwareengineering.stackexchange.com/questions/33713/is-there-an-alternative-to-html-web-sockets-now-that-firefox-4-has-disabled-the)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T16:16:07.847

我只是想分享我使用的实际实现。我决定使用一个很棒的 SAAS，[Pusher](http://pusher.com/)，因为在实现推送通知方面存在许多具有挑战性的问题，正如我在阅读 @Virendra 的优秀答案中的链接时意识到的那样，Pusher 可以为您解决。

最让我印象深刻的是您只需编写很少的代码即可完成这项工作。见下文。我的服务器端是 PHP（[Pusher 有多种语言的库](https://github.com/pusher)）。

```
require('/application/thirdParty/pusher-html5-realtime-push-notifications/lib/squeeks-Pusher-PHP/lib/Pusher.php');
require('/application/thirdParty/pusher-html5-realtime-push-notifications/config.php');
$pusher = new Pusher(APP_KEY, APP_SECRET, APP_ID);

foreach($recipients as $row){                   
  $channel='my-channel'.$row->recipient_id;
  $pusher->trigger($channel, 'notifications', 
    array('message' => $row->message,
          'notification_id' => $row->notification_id) 
  );
} 
```

这是 HTML/JS（不要不知所措，这些代码的大部分只是为了填充小圆圈和列表以及 Stackoverflow 和其他人所做的传入通知）：

```
<script src="/application/thirdParty/pusher.min.js"></script>
<script>     
var myID=179; // would receive notification if myID matches $row->recipient_id above;
var myChannel = pusher.subscribe('my-channel'+myID);
myChannel.bind('notifications',
  function(data) {
        var message=String(data.message),
            url='/notifications/'+data.notification_id, 
            icon='<i class=\'icon-heart\'></i>',
            urlText=icon+message;

        var notificationRow='<li><a href='+url+'>'+urlText+'</a></li>';
         $('#notificationsDropdownList').prepend(notificationRow);   

        if(notificationCircleCount==0){
             notificationCircleCount++;
              $notificationCircle.show();
               $notificationCircleCount.html(notificationCircleCount);
        }
        else{
             notificationCircleCount++;
             $notificationCircleCount.html(notificationCircleCount);
        }
        console.log('Pusher happened'+data.message);                  
  } //function
); //myChannel
</script> 
```

# google-docs-api - 使用 Google 电子表格 API，而标题行中的值以小写字母形式删除并删除了空格

> ID：11592785
> 
> 赞同：1
> 
> 时间：2012-07-21T13:54:09.640
> 
> 标签：google-docs-api, google-spreadsheet-api

我想知道是否有任何方法（阅读：hacks）使用 Google 电子表格 API，它不会强加标题行中的值以小写字母表示且没有空格的限制。我知道我可以只使用基于单元格的提要，但这会给我的应用程序带来开销，必须跟踪与特定列名对应的列号。

有没有人有替代方法？

（我还注意到[Google Spreadsheet API Docs](https://developers.google.com/google-apps/spreadsheets/)没有提及标题行名称限制，我不得不四处搜索以找出我的代码最初无法正常工作的原因）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-23T01:44:41.197

您不必实际更改电子表格中的任何标题并受制于某些限制。基本上，API 将您的标题转换为“小写无空格”格式，您可以这样访问它们。因此，尝试访问带有标题“我的标题”的列将通过查询“myheader”列来工作。原始电子表格中的标题保持不变并采用所需的格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T11:54:23.490

```
#header_names = list of header names
spreadclient = gdata.spreadsheets.client.SpreadsheetsClient(source='Your App Name')

#Add a line to authenticate the spreadsheet client

spreadsheet_key = spreadsheet.GetId().split("%3A")[1]
worksheets = spreadclient.GetWorksheets(spreadsheet_key)
#get worksheet id
wsid =  worksheets.entry[0].GetWorksheetId()
#header row can only be accessed via cellfeed
for i,name in enumerate(header_names):
    cellentry= spreadclient.GetCell(spreadsheet_key, worksheet_id=wsid, row_num=1, col_num=1+i)
    #update value
    cellentry.cell.input_value = name #TODO: do batch update instead
    spreadclient.update(cellentry) 
```

# opengl - libGDX：添加统一变量

> ID：11592786
> 
> 赞同：1
> 
> 时间：2012-07-21T13:54:12.837
> 
> 标签：opengl, shader, libgdx

我正在尝试向我的着色器添加一个统一的变量，这是我的着色器：

```
 String vertexShader = "attribute vec4 " + ShaderProgram.POSITION_ATTRIBUTE + ";\n" //
            + "attribute vec4 " + ShaderProgram.COLOR_ATTRIBUTE + ";\n" //
            + "attribute vec2 " + ShaderProgram.TEXCOORD_ATTRIBUTE + "0;\n" //
            + "uniform mat4 u_projTrans;\n" //
            + "varying vec4 v_color;\n" //
            + "varying vec2 v_texCoords;\n" //
            + "\n" //
            + "void main()\n" //
            + "{\n" //
            + "   v_texCoords = " + ShaderProgram.TEXCOORD_ATTRIBUTE + "0;\n" //
            + "   gl_Position =  u_projTrans * " + ShaderProgram.POSITION_ATTRIBUTE + ";\n" //
            + "}\n";
        String fragmentShader = "#ifdef GL_ES\n" //
            + "#define LOWP lowp\n" //
            + "precision mediump float;\n" //
            + "#else\n" //
            + "#define LOWP \n" //
            + "#endif\n" //
            + "varying vec2 v_texCoords;\n" //
            + "uniform sampler2D u_texture;\n" //
            + "uniform sampler2D u_texturePalette;\n" //
            + "void main()\n"//
            + "{\n" //
            + " vec4 textureColor = texture2D(u_texture, v_texCoords).rgba;\n"
            + " vec4 paletteColor = texture2D(u_texturePalette, vec2(textureColor.b,0)).rgba;\n"    
            + "  gl_FragColor = paletteColor;\n" //
            + "}"; 
```

问题随之而来

> 统一的 sampler2D u_texturePalette；

ShaderProgram 无法识别着色器中的新制服。我也这样做了：

```
 shader = new ShaderProgram(vertexShader, fragmentShader);
    shader.setUniformi("u_texturePalette", 0);
    Texture text = new Texture(Gdx.files.internal("./data/palette.png"));
    text.bind(shader.getUniformLocation("u_texturePalette"));
    batch = new SpriteBatch();
    batch.setShader(shader); 
```

当我调用函数 `shader.hasUniform("u_texturePalette")`时，它解析为true，但是当我去看它时，`shader.getUniformLocation("u_texturePalette")`它解析为-1

这是一个错误吗？. 知道我在做什么坏事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:40:11.513

着色器代码看起来不错。

通常你这样做：

```
shader = new ShaderProgram(vertexShader, fragmentShader);
Texture text = new Texture(Gdx.files.internal("./data/palette.png"));
text.bind(0);
shader.setUniformi("u_texturePalette", 0); 
```

因此，您将纹理绑定到一个活动纹理单元，然后通过`setUniformi()`.

`getUniformLocation()`实际上做了一些不同的事情：[https ://www.khronos.org/opengles/sdk/docs/man/xhtml/glGetUniformLocation.xml](https://www.khronos.org/opengles/sdk/docs/man/xhtml/glGetUniformLocation.xml)

但是，您会在这里遇到更多问题，因为`SpriteBatch`内部使用自定义着色器做了一些非常具体的事情。我建议你看看代码： [https ://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/SpriteBatch.java](https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/graphics/g2d/SpriteBatch.java)

具体来说，它将期望默认纹理始终位于单元 0。

# apache - 不要重定向附加域的 URL

> ID：11592788
> 
> 赞同：0
> 
> 时间：2012-07-21T13:54:24.490
> 
> 标签：apache, .htaccess

我有一个主域 ( `maindomain.com`) 和一个附加域 ( `addondomain.com`) 托管在同一台服务器上，都带有博客。运行 WordPress 的附加域的文件位于主域根目录下的目录中。主域以前有一个 WordPress 博客，但现在我使用不同的软件，所以我想重定向`http://maindomain.com/feed`到 FeedBurner URL。在`.htaccess`主域的根目录中，这条规则

`Redirect /feed/ http://feeds.feedburner.com/MyFeed`

成功重定向主 URL 的提要。问题在于它还会重定向附加域的提要，因此`http://addondomain.com/feed/`也指向该 FeedBurner URL。

如何仅为主域而不是附加域创建重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:33:55.160

使用 mod_rewrite。它可能已经默认启用，但如果没有，在 Linux 上

```
a2enmod rewrite 
```

然后在您的 .htaccess 中：

```
RewriteCond %{HTTP_HOST} ^maindomain.com$
RewriteRule ^feed http://feeds.feedburner.com/feed [QSA,L,R=301] 
```

# java - 在struts 2中的对话框上显示错误消息？

> ID：11592794
> 
> 赞同：2
> 
> 时间：2012-07-21T13:55:25.430
> 
> 标签：java, web-applications, struts2

我在 Struts 2 中有一个登录表单，其中包含用户名和密码字段。我想要的是当用户提交表单时，如果它不是有效用户，我想在对话框中显示错误消息（而不是在登录表单本身中显示错误消息）。struts 2中是否有任何可用的标签，或者有​​人可以指出类似的简短示例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T14:45:40.460

把它放在你的登录页面中（你返回这里是对的，登录无效？）

```
<script>
   <s:if test="hasActionErrors()">
        showDialog("<s:actionerror/>");
   </s:if>
function showDialog(msg){
  //your logic to show dialog goes here
}
</script> 
```

[这是一篇](https://stackoverflow.com/a/6504707/456135)解释如何设计类似于堆栈溢出的通知的帖子。您可以使用这个或任何其他模态对话框，有很多关于如何显示模态对话框的教程

# java - java中的尾递归

> ID：11592796
> 
> 赞同：4
> 
> 时间：2012-07-21T13:55:44.323
> 
> 标签：java

这是展示尾递归的好例子吗？

```
public printName(){
    System.out.println("Smith");
    printName();
} 
```

我不打算在现实生活中这样做，但我把它作为我考试的一个例子。这是正确的吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-21T13:57:44.073

不，有两个原因：

*   尾递归仅在编译器支持时才有价值（*尾调用优化*）。在 Java 中，它仍然会以`StackOverflowError`

*   显示一些停止条件会很好。您的代码相当于永远循环运行。

考虑 Scala 中几乎相同的代码，唯一的区别是 Scala 编译器*将*执行尾调用优化并且循环永远运行：

```
def printName() {
  println("Smith"); 
  printName()
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-21T14:09:37.653

尾递归的一个更好的例子是这样的：

```
public printName(int level){
    if( level <= 0 )
         return;
    System.out.prntln("Smith");
    printName(--level);
} 
```

此示例包括终止递归的重要部分。

除此之外：正如其他答案已经指出的那样：由于Java没有优化尾递归，因此在这种语言中使用它没有意义。所以你基本上最终会自己优化你的算法——通过使其迭代。这就是尾递归的重点：可以证明，任何尾递归算法都可以转换为迭代算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T13:58:55.140

我会说这是尾递归的一个例子，因为你在程序的尾部递归:) 但是我不认为 JVM 会优化这个，这可能是你想要的。

# heroku - Foreman：在开发和生产中使用不同的 Procfile

> ID：11592798
> 
> 赞同：74
> 
> 时间：2012-07-21T13:56:13.150
> 
> 标签：heroku, sinatra, rack, foreman, shotgun

我有一个自制的 Sinatra 应用程序，我打算使用 Heroku 来托管它。

我在开发中使用工头和霰弹枪，具有以下 Procfile：

```
web: shotgun config.ru -s thin -o 0.0.0.0 -p $PORT -E $RACK_ENV 
```

它适用于开发和生产。但问题是，**我不想在生产中使用霰弹枪，**因为它太慢了。

### 我们可以为 dev 和 prod 使用单独的 Procfile 配置吗？

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-07-21T20:27:11.087

您可以使用两个`Procfiles`（例如`Procfile`和`Procfile.dev`）并使用[`foreman`s`-f`选项](http://ddollar.github.com/foreman/#EXAMPLES)来选择要在 dev 中使用的另一个：

在 dev 中（`Procfile.dev`包含您的`shotgun`Web 进程）：

```
foreman start -f Procfile.dev 
```

在生产中，`foreman start`会回升正常`Procfile`。

或者，您可以`bin`使用脚本在您的应用程序中创建一个目录，以根据（我在[Foreman 的创建者发表的评论](https://github.com/ddollar/foreman/issues/12#issuecomment-2656011)`$RACK_ENV`中发现的一个想法，因此值得考虑）启动适当的 Web 服务器。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-10-18T17:26:04.277

在我看来，@sharagoz 对所选答案的评论是让您在`foreman start`不添加额外参数的情况下仍然使用并将 Procfile 与 Heroku 分开的最佳选择。

> 为避免使用 -f Procfile.dev 参数，您可以`procfile: Procfile.dev`在其中创建一个 .foreman 文件 – Sharagoz

在我的应用程序根目录中，我创建了一个`.foreman`文件，正如评论所述

**。领班**

```
procfile: Procfile.dev 
```

**档案**

```
web: bundle exec puma -C config/puma.rb 
```

**程序文件.dev**

```
web: bundle exec puma -C config/puma.rb
webpacker: ./bin/webpack-dev-server 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-09T23:06:19.677

这是一种使用 Procfile 和环境变量来处理它的方法。我在 Heroku 上使用它。

设置环境：

```
export WEB_START_COMMAND='node index.js'
export WORKER_START_COMMAND='node worker.js' 
```

过程文件：

```
web: eval '$WEB_START_COMMAND'
worker: eval '$WORKER_START_COMMAND' 
```

在您的服务器和开发环境中导出不同的启动命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-04T11:18:13.380

对于那些仍在寻找这个的人，根据[文档](https://devcenter.heroku.com/articles/heroku-local) `foreman`不再需要了。您可以简单地使用：

`heroku local -f Procfile.dev`

# java - 如何在java中使库可替换？

> ID：11592799
> 
> 赞同：3
> 
> 时间：2012-07-21T13:56:16.417
> 
> 标签：java, eclipse, architecture, interface, module

我正在寻找一种使库可替换的方法。例如：我有一个通过多播管理通信的库。我在我的主应用程序中使用该库。我的想法是为此使用一个界面：

```
public interface MessageHandler {
    public void sendMessage();
    public Message receiveMessage();
} 
```

现在应该可以更改库了。例如，通过广播管理通信的库。两者都实现了相同的接口。

所以在我的主要应用程序中，我希望有机会：

```
MessageHandler mHandler = new MulticastImpl(); 
```

或者

```
MessageHandler mHandler = new BroadcastImpl(); 
```

我的问题是：我在哪里放置接口定义？当我将它放入我的主应用程序时，我无法从库中看到它（因为库不知道主应用程序）。当我将它放入两个库时，我有两个不同的 MessageHandler 接口（例如 com.multicast.MessageHandler 和 com.broadcast.MessageHandler）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T14:00:34.507

这是一个基本的插件系统。你应该做的是：

1.  将插件 API 放在一个独立的 jar 中。
2.  在主应用程序中包含这个插件 API jar。
3.  插件实现不应*包含*插件 API（它们只会将其用于编译）。
4.  为用户提供一种为插件指定“实现”类的方法（作为配置字符串）
5.  在应用程序启动时，使用反射从配置中加载实现类。

注意，有更复杂的方法可以在 java 中加载插件（例如使用 java.util.ServiceLoader 和/或嵌套类加载器），但这是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:17:57.997

策略模式在这里可以提供帮助。

如果您希望库可替换，请定义一个封装该库功能的策略。

在代码中的任何地方，只需调用策略，而不是库。然后该策略将选择走哪条路。

完成后，您可以将封装的策略替换为任何其他策略或库。

[有关策略模式的更多信息](http://en.wikipedia.org/wiki/Strategy_pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T13:58:33.973

您使用库接口，不要将它们放在两者上。图书馆正在定义用于与之通信的接口。

在您想要使用库接口进行编程的主应用程序上，您可以切换到它的不同实现，而无需更改代码，只需更改实现即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T14:29:19.897

这个问题已经“回答”了，但无论如何，我想给你带来另一个视角。

您应该将 OSGi 和服务模块化作为实现相同服务逻辑实现的无缝替换的一种方式。OSGi 严格执行接口和实现的分离，并提供带有“捆绑包”的模块化架构，甚至可以在运行时（重新）部署。

您可以使用 MulticastMessageHandler 作为实现的“MessageHandler”服务。

例如，我们有一个数据存储，它有一个可切换的 noSQL 和一个 SQL 数据存储作为后端。应用程序永远不会注意到/不区分正在使用哪个。

Eclipse 具有 Equinox OSGi，它包含在您的 Eclipse 开发环境中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T14:52:00.587

您可以为此使用[DI 。](http://martinfowler.com/articles/injection.html)您将通过您最喜欢的 DI 实现注入实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-21T14:01:38.193

有几种解决方案，但（将接口放在两个库中或将接口放在自己的库中），但您需要为接口指定一个名称，例如 com.messaging.MessageHandler。

# jquery - jQuery Mobile listview 或按钮刷新不更新主题

> ID：11592801
> 
> 赞同：0
> 
> 时间：2012-07-21T13:56:26.330
> 
> 标签：jquery, listview, jquery-mobile

你能试试这个简单的例子，告诉我出了什么问题：http: [//jsfiddle.net/ca11111/unQWP/1/](http://jsfiddle.net/ca11111/unQWP/1/)。主题已`li`更改，但列表视图刷新无法更新。

如果我想更新右键主题也会出现同样的问题：http: [//jsfiddle.net/ca11111/unQWP/2/](http://jsfiddle.net/ca11111/unQWP/2/)。我得到错误：

```
未捕获的类型错误：无法调用未定义的方法“removeClass”

```

=================================================

我能知道为什么这几乎可以工作但没有..，（需要点击 2 次才能更改，并且无法返回）

[http://jsfiddle.net/ca11111/unQWP/5/](http://jsfiddle.net/ca11111/unQWP/5/)

它应该切换主题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:43:02.610

您可以使用此处的代码完成您想要的：http: [//jsfiddle.net/kE8GJ/](http://jsfiddle.net/kE8GJ/)。请注意，代码中最重要的部分是这个条件：

```
var element;

if ($(this).hasClass("ui-li-link-alt")) {
    element = $(this);
}
else {
    element = $(this).closest('li.ui-li');
}

element
    .removeClass("ui-btn-up-c ui-btn-hover-c")
    .addClass("ui-btn-hover-e")
    .attr("data-theme", "e"); 
```

这将`li`在左侧按钮的元素或`a`右侧按钮的元素上正确设置主题，这最终具有将新主题应用于单击的元素的效果，这似乎是您的目标。

至于`TypeError`你看到的，我认为这与你的`.button()`电话有关。jQuery Mobile 列表视图中的元素通常不作为按钮处理，因此此类调用可能会导致问题。所有类似的调用`.trigger('create')`都应该在该`listview`级别进行。

* * *

为了响应您的编辑，您必须手动添加和删除类才能成功切换主题。否则，旧主题的课程仍然存在。例如，如果您从 theme 切换`e`到`c`，`ui-btn-up-e`或`ui-btn-hover-e`仍将在`li`元素上，因此它似乎不会切换回 theme `c`。你可以在这里看到这个：http: [//jsfiddle.net/wu86C/](http://jsfiddle.net/wu86C/)。

最重要的代码是这里的第二行（以及从`c`to切换的等效代码`e`）：

```
var li = $(this).closest('li');
li.removeClass("ui-btn-up-e ui-btn-hover-e").addClass("ui-btn-hover-c"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:39:27.970

我不确定，但是使用 jquery mobile 你没有你的 html 结构，但是你的“li 内的标签”被包裹在一些 div 中。

实际上，如果您简单地尝试：

```
$('#mylist a').click(function() {
        console.log($(this));        
        $('#li1').attr("data-theme", "e");
        alert( $('#li1').attr("data-theme"));
        $('#mylist').listview('refresh');
    }); 
```

在您的第一个小提琴中，这会改变主题。

# ruby-on-rails - 使用布局响应所有 HTML 请求

> ID：11592804
> 
> 赞同：0
> 
> 时间：2012-07-21T13:56:40.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, ruby-on-rails-3.2

我正在开发一个 Rails 应用程序，该应用程序将使用具有自己的路由功能的客户端框架。我想使用 pushState 路由，因此需要配置 Rails 路由器以响应此类请求（很简单）。

有没有一种简单的方法来设置所有 HTML 请求，其中包含一个有效的路由，只需一个布局就可以响应，而不必用一堆空白`action.html.erb`文件弄乱我的视图文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:31:18.707

这是一种拦截对有效路由的请求并为每个非 ajax 请求呈现视图的方法：

**应用程序/控制器/application_controller.rb：**

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :render_default_view

  # ...

  private

  def render_default_view
    return if request.xhr?
    respond_to do |format|
      format.html { render 'public/default_view.html', :layout => nil }
    end
  end
end 
```

我认为这可以满足您的要求，对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:09:46.597

```
def my_action
 respond_to do |format|
   format.html { render 'my_unified_view' }
 end 
```

# c++ - C ++：覆盖由另一个方法调用的受保护方法

> ID：11592809
> 
> 赞同：9
> 
> 时间：2012-07-21T13:57:31.947
> 
> 标签：c++, inheritance

我有一个关于 C++ 继承的非常基本的问题：

```
class A
{
public:
  void foo() { print(); }
protected:
  void print() {}
};

class B : public A
{
protected:
  void print() { std::cout << "test" << std:: endl; }
}; 
```

现在下面的代码

```
B b;
b.foo(); 
```

不打印任何东西，所以 foo() 显然没有调用新定义的 print()。这只能通过使用虚拟方法来解决吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T13:59:36.070

是的，您需要进行`print`虚拟化才能使其正常工作。否则，`A::foo`不知道后代可以提供 的替代实现`print`，一个愉快地调用`A`的版本。编译器甚至可以在编译的时候内联`print`里面的代码，使得实现完全不相关。`foo``A``B`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-21T14:06:56.357

为了使派生类覆盖函数，必须`virtual`在基类中声明该函数。这意味着要调用的函数是在运行时根据对象的动态类型在调用函数时选择的。

如果每个对象的派生类型在编译时已知，则覆盖的替代方法是使用所谓的“奇怪的重复模板模式”（CRTP）将派生类型的知识注入基类（必须成为支持这一点的模板）：

```
template <typename Derived> class A
{
public:
  void foo() { static_cast<Derived*>(this)->print(); }
};

class B : public A<B>
{
private:
  friend class A<B>; // assuming you don't want to make the function public
  void print() { std::cout << "test" << std:: endl; }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T14:01:33.860

是的，您可以使用虚拟方法来使此示例正常工作，但您也可以使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T14:20:01.700

你的问题的答案，“这只能通过使用虚拟方法来解决吗？” 是：不，可以不使用虚拟方法。

您需要做的就是将`foo()`方法复制到`B`.

```
class B : public A
{
public:
  void foo() { print(); }
protected:
  void print() { std::cout << "test" << std:: endl; }
}; 
```

那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T13:59:56.833

是的，没有虚拟方法或重写是无法解决的`void foo()`

因为什么时候`A`编译它不知道什么`B`，所以它不能调用它的方法

# django-forms - Django 动态表单字段 - onchanged

> ID：11592811
> 
> 赞同：1
> 
> 时间：2012-07-21T13:57:42.277
> 
> 标签：django-forms, django-templates

我不确定如何让 onchange 属性在下面的“position_type”选择小部件上正常工作。我希望它在更改字段选择时“发布”表单。目前使用此代码，浏览器在“onchange”触发时指示存在“页面错误”，我认为这意味着它无法识别结果“this.form.submit();” 命令。（我是按原样使用“this.form.submit();”来使用我发现的其他示例，还是应该以某种方式替换我的表单名称？）

```
class tranny_form(forms.Form):

   def __init__(self, *args, **kwargs):
           super(tranny_form, self).__init__(*args, **kwargs)
           dict=args[0]  #this extracts the settings passed to 'tranny_form' as a dict

           position_list = [('GGA','GGA'),('DD','DD'),('UTM','UTM'),]
           self.fields['position_type'] = forms.CharField(widget=forms.Select(choices=position_list, attrs={'onchange':'this.form.submit();'}))

           if dict.get('position_type') in ['DD','UTM',]: 
               self.fields['easting_longitude_column'] = forms.IntegerField(max_value=100, min_value=1)
               self.fields['northing_latitude_column'] = forms.IntegerField(max_value=100, min_value=1) 
```

我的模板代码....

```
<form action="" enctype="multipart/form-data" method="post"> {% csrf_token %}
    <table>
        {{ form.as_table }}
    </table> </br>
    <input type="submit" value="Submit"></br>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T04:59:04.793

好的，代码的唯一问题是我在网上复制的示例在`this.form.submit();`正确的命令是`this.form.submit()`. 希望这可以节省一些其他人。我的动态字段现在可以正常工作，并且可以根据选择的要求来来去去。

# android - Android AlertBox 然后 ProgressDialog。ProgessDialog 不显示

> ID：11592814
> 
> 赞同：0
> 
> 时间：2012-07-21T13:57:48.753
> 
> 标签：android, android-alertdialog, android-progressbar

似乎这个主题有几个变化。我`AlertBox`向用户显示是否要保存此项目？如果他们回复正常，那么我希望将`Alertbox`其替换为`ProgressDialog`框，然后当项目完成保存后，它就会消失。

下面的当前代码正确显示了确定/取消`AlertBox`和关闭，并正确显示了 toast。但是，如果用户选择“确定”，则`ProgressDialog`显示全部完成并且永远不会消失。OK/Cancel 按钮保持按下状态，直到项目被保存。如果用户按 OK，我希望`AlertBox`消失，然后`ProgressDialog`在保存完成后显示并关闭它。

```
{
 Vibrate(ClickVibrate); 
 final ProgressDialog Dialog = ProgressDialog.show(v.getRootView().getContext(), "Loading", "Please wait...", true);
if(AlertDialogProcessing==0)
{    
ProgressDialog progress;  
final String title="Save Item";
final String message="Press OK to save or CANCEL.";
final String ok="OK";
final String cancel="CANCEL";

final AlertDialog.Builder alertbox = new AlertDialog.Builder(this);
alertbox.setCancelable(true);
alertbox.setIcon(android.R.drawable.ic_dialog_alert);
alertbox.setTitle(title);
alertbox.setMessage(message);
alertbox.setNegativeButton(cancel, null);

final AlertDialog dlg = alertbox.create();

 alertbox.setPositiveButton(ok,new DialogInterface.OnClickListener()
   {  
     public void onClick(DialogInterface arg0, int arg1)
     {  
      dlg.dismiss();
      Dialog.show();
      Vibrate(ClickVibrate); 
      Drawable drawable= getItem(imageSelect);   
      AlertDialogProcessing=1;   
      //task that takes 3 seconds
      AlertDialogProcessing=0;
      Toast.makeText(getApplicationContext(), "Item Saved.", Toast.LENGTH_LONG).show();   
    } 
  });
 alertbox.setNegativeButton(cancel,new DialogInterface.OnClickListener(){ public void onClick(DialogInterface arg0, int arg1){AlertDialogProcessing=0; Vibrate(ClickVibrate); } });
 alertbox.show();
 }
 Dialog.dismiss();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:15:12.310

你在正面按钮的内部`ProgressDialog.show()`和内部都调用了，难怪没有显示。如果保存过程需要一些时间，以至于您需要 a ，我强烈建议您使用该类。它在工作线程上运行任务，并让您可以使用当前任务进度更新 UI。希望这可以帮助。`ProgressDialog.dismiss()``onClick()``ProgressDialog``ProgressDialog``AsyncTask`

# android - 编写向后兼容的 Android 代码

> ID：11592820
> 
> 赞同：53
> 
> 时间：2012-07-21T13:58:50.987
> 
> 标签：android, api, compatibility

我正在编写一个应用程序，它使用了一些仅在最新 API 级别 - 16 中可用的函数和类，但我希望它在 API 级别 15 的设备上运行时没有错误。

让我们举几个例子。一个新的类：`Android.widget.Advanceable`，和一个新的/重命名的方法`View.setBackground()`：：

我可以做这样的事情：

```
Advanceable myAdvanceable = ...;

if (android.os.Build.VERSION.SDK_INT >= 16)
{
    myView.setBackground(...);
    myAdvanceable.advance();
}
else
{
    myView.setBackgroundDrawable(...); // The old function name.
    // Don't bother advancing advanceables.
} 
```

如果我将 minSdk 设置为 15，但将构建目标设置为 16（即在 Project Properties->Android 中），它实际上会毫无错误地编译。至少在某些时候。Eclipse 对错误有点随机，有时会说“setBackground() 仅在 API 级别 >= 16 中可用”或类似的，但如果我只是清理项目，这些错误就会神奇地消失。

所以我的问题是，我可以这样做吗？如果我在 API 级别 15 设备上运行它，代码不会崩溃吗？如果它实际上到达 16 代码，它只会崩溃吗？为什么 Eclipse 不阻止我构建它？

# 编辑 1

感谢您的回答，我想问题应该是：为什么 lint 不会警告我有关使用新 API 的信息？

我的清单中有这个，并且正在使用 API 16 级函数，但它仍然没有警告我：

```
<uses-sdk android:minSdkVersion="15"
    android:targetSdkVersion="16"/> 
```

此外，我仍然不确定整个类何时是 API 级别的新手，例如`Advanceable`. 特别是如果我将它们用作成员变量。

# 编辑 2

答案原来是“Eclipse 是马车”，但 Nico 的回答也很有帮助。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-07-21T14:48:45.103

内联 Api 错误对 ADT 来说是新的，Eclipse 运行 Lint（我猜可能还有其他东西）来分析您的代码并将这些错误/警告内联。当您有关于优化或最佳实践的警告或提示时，同样适用于 xml 布局。您可以使用注释来抑制类或特定方法中的这些错误。

@TargetApi(16)
@SuppressLint("NewApi")

您在此处放置的示例代码中存在问题，除了 API 级别检查您在代码中是否有一个 Advanceable 实例在 API < 16 中不起作用，因此检查 API 级别仅在您调用新方法时有用，但您不能在 IF 块之外引用新的 API 类。

我发现可以接受的一种方法是创建一个抽象类和两个实现，然后实例化正确的实现，您可以使用带有静态方法的工厂类。

例如，要创建一个在内部使用一些新 API 类和方法的视图，您需要：

1 - 创建抽象类：

```
public abstract class CustomView {
    public abstract void doSomething();
} 
```

*   与所有 API 兼容的通用实现
*   在这里定义抽象方法来拆分实现

2 - 旧版实施

```
public class CustomLegacyView extends CustomView {
    public void doSomething(){
        //implement api < 16
    }
} 
```

*   实现 API < 16 的抽象方法

3 - API 16 实施

```
@TargetApi(16)
public class CustomL16View extends CustomView {

    Advanceable myAdvanceable;

    public void doSomething(){
        //implement api >= 16
    }
} 
```

*   使用注解@TargetApi(16)
*   实现 API >= 16 的抽象方法
*   您可以在此处引用 16 级类（但不能在 CustomView 中）

4 - 工厂级

```
public class ViewFactory {

    public static CustomView getCustomView(Context context) {

        if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
            return new CustomL16View(context);
        }else{
            return new CustomLegacyView(context);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T14:08:14.210

使用较新的构建目标并保证将在正确的情况下调用较新的 API 是一种常见的做法。自 ADT 17 以来， Google 甚至添加了`@TargetApi()`注释，以指定条件加载代码的本地覆盖。

有关更多详细信息，请参阅[Lint API 检查](http://tools.android.com/recent/lintapicheck)。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-21T14:42:18.727

**1.**您拥有`Target Api`和`Minimum SDK`属性来定义您的 **目标设备类型以及它将**在其上运行的最低 Api 版本。

**2.** `Target Api`将是**应用程序在其上运行的具有完整功能**的应用程序，而`Minimum SDK`将使**应用程序在其上运行时有一些妥协，因为较低的 API 版本可能不具有其较高版本中的功能**。

# ios - 将 AUSampler 与单个 caf 文件一起使用

> ID：11592824
> 
> 赞同：1
> 
> 时间：2012-07-21T13:59:29.887
> 
> 标签：ios, core-audio, audiounit

我在我的应用程序中使用音频单元 AUSampler。我想知道有没有办法从单个音频文件动态创建和加载自定义预设？我知道我可以使用准备好的 Instrument Chunk 元数据加载 .caf 文件，但我的问题是元数据会及时更改。我想让用户可以制作自己的乐器，并关联特定的文件。

简单地说，我想告诉 AUSampler：Load for me 'file.caf' as a baseNote 35。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:26:26.630

您可以使用采样器“补丁”加载 AUSampler，因此即时执行所需操作的一种方法是创建自定义 .aupreset（它们是 xml 或 plist）并使用它们加载采样器。[这段代码](http://developer.apple.com/library/mac/#technotes/tn2283/_index.html)展示了如何加载一个aupreset，但它并不规定aupreset 必须在磁盘上。所以做一些 plist 或 xml 配置并为单个样本加载它们。

# database - 可以是多个类别的子类别的类别？

> ID：11592829
> 
> 赞同：1
> 
> 时间：2012-07-21T13:59:55.223
> 
> 标签：database, database-design

我有一个不同的情况，`a category`可以`a sub category`是`more than one category`。我应该如何设计这个？

我猜下面的树结构并不能解决我的问题。我应该`ParentCategoryId`作为一个字符串来做，并且可以在其中包含多个类别 ID。然后进行计算以解决父类别或您是否建议我另一种解决方案？您解决此问题的最佳解决方案是什么？

```
--Category--

Id
ParentCategoryId
CategoryName 
```

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:20:59.027

对此的标准 SQL 解决方案是交叉表。您将有两个表、categories 和 categories_x，如下所示：

```
categories
+------------+------------+
|categoryId  |name        |
+------------+------------+
|1           |foo         |
+------------+------------+
|2           |bar         |
+------------+------------+
|3           |huh         |
+------------+------------+

categories_x
+------------+------------+
|categoryId  |parentId    |
+------------+------------+
|3           |1           |
+------------+------------+
|3           |2           |
+------------+------------+ 
```

要获取类别 3 的父项，您的 sql 查询将如下所示：

```
SELECT categoryId, name 
  FROM categories 
  WHERE categoryId IN (SELECT parentId FROM categories_x WHERE categoryId = 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:26:40.807

除了约翰克拉克所说的之外，最好有一个预先计算好的所有类别的表格，例如：

```
Item Direct Categories
+------------+------------+
|itemId      |categoryId  |
+------------+------------+
|1           |1           |
+------------+------------+
|3           |2           |
+------------+------------+ 
```

接着

```
Item All Categories
+------------+------------+
|itemId      |categoryId  |
+------------+------------+
|1           |1           |
+------------+------------+
|3           |2           |
+------------+------------+ 
```

在第一个中，您将只保存项目的类别，但在第二个中，您还将将每个项目与其类别的超级类别相关联，因此如果项目具有类别，您可以检查哪个只是单个查询或不。

# qt - 在 Qt 中显示子窗口时暂停功能

> ID：11592832
> 
> 赞同：3
> 
> 时间：2012-07-21T14:00:07.470
> 
> 标签：qt, window, show

在 Qt Creator 中，我有一个主窗口和一个 QWidget 作为工具窗口（setWindowFlags（Qt::tool））。当我调用工具窗口时，用户可以更改一些设置。这些更改随后会更改主窗口中的一些数据。

我创建了小部件，显示它，然后我想更新主窗口中的数据，但该功能不会等待小部件关闭。所以演出后的更新程序立即执行，没有任何效果。当我显示 QMessageBox 时，该函数等待用户关闭它。

我可以为 QWidget 设置一个标志或其他东西，以便函数等待吗？

```
void userclicksonsettings(){
 settings = new Settings(this);  // Settings is a QWidget-class with ui
 settings->show();
 // function should wait till settings is closed
 // set up mainwindow with new values
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:14:37.573

我刚刚解决了。使用 QDialog 而不是 QWidget 作为基类允许使用 QDialog::exec(); 调用窗口 并且父小部件将暂停，直到窗口再次关闭。

编辑：这是我刚刚从备份磁盘中挖掘出来的解决方案的来源。我不得不说，这是几年前我最后一次使用 Qt 和这段代码，所以它可能是不正确的。我希望它有助于理解这个想法。

settingsForm.h

```
#include <QDialog>
class SettingsForm : public QDialog
{
    Q_OBJECT

public:
    explicit SettingsForm(QWidget *parent = 0);
    ~SettingsForm();
// other variables and slots etc.
}; 
```

settingsForm.cpp

```
#include "settingsform.h"
#include "ui_settingsForm.h"

#include <QColorDialog>

SettingsForm::SettingsForm(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::SettingsForm)
{
    ui->setupUi(this);
    this->setWindowFlags(Qt::Tool);

// initializing functions
}

SettingsForm::~SettingsForm()
{
    delete ui;
} 
```

主窗口.h

```
#include "settingsForm.h"
// ... 
```

要从主窗口调用 settingsWindow 初始化对象并像 QDialog 一样调用它

主窗口.cpp

```
settingsform = new SettingsForm(this);
if(settingsform->exec() == QDialog::Accepted){
    // update form from settings
} 
```

我还有一个设置类，用于可以使用表单设置的所有变量，它被传递给 settingsForm 并在用户单击“确定”时更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-03T06:30:23.423

我这样做：

```
void userclicksonsettings() {
    settings = new Settings(this);
    settings->setWindowModality(Qt::ApplicationModal);
    settings->show();
   //...
} 
```

Qt::ApplicationModal - 窗口对应用程序是模态的，并阻止所有窗口的输入。

# node.js - 使用节点请求下载图像

> ID：11592833
> 
> 赞同：2
> 
> 时间：2012-07-21T14:00:18.137
> 
> 标签：node.js

嘿，我是 node js 的真正初学者，所以请耐心等待。我正在尝试下载文件（图像）这是我拥有的代码：

```
function downloadFileFromURL( url, callback ) 
{
    file_name = path.basename(url);

    var wstream = fs.createWriteStream(file_name);

    wstream.on('error', function (err) {
        console.log(err, url);
    });

    wstream.on( 'close', function(){

        console.log( "finished downloading: ", url, this.path );

    });

    request(img_url).pipe( wstream );
} 
```

如果我用我的应用解析博客提要，这个函数会下载大约一半的图像。我可以从浏览器中很好地看到图像。文件被创建，但其中一些保持在 0 字节。

我正在解析的示例提要是： http: [//feeds.feedburner.com/ButDoesItFloat?format=xml](http://feeds.feedburner.com/ButDoesItFloat?format=xml)

我在这里看到了这个问题：[Writing image to local server](https://stackoverflow.com/questions/5294470/node-js-writing-image-to-local-server) which is similar and would like to see how it done with node-request

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:35:51.947

看看[http-get](https://npmjs.org/package/http-get)来实现它。您只需要传递两个参数，第一个是 URL，第二个是保存文件的路径，非常简单。回调函数将文件名返回为“result.file”。检查下面的代码并尝试一下：

```
var http = require('http-get');
http.get('www.ohmydear.com/thesite.png', '/path/to/thesite.png', function (error, result) {
    if (error) {
        console.error(error);
    } else {
        console.log('File downloaded at: ' + result.file);
    }
}); 
```

# php - PHP：$array[$i]['v'];$array[$i]['c'] 类型的多维数组排序，同时保留顺序

> ID：11592837
> 
> 赞同：-2
> 
> 时间：2012-07-21T14:01:04.210
> 
> 标签：php, arrays, multidimensional-array, sorting

> **可能重复：**
> [PHP：对多维数组进行排序 ($arr[$i]['v'])](https://stackoverflow.com/questions/11592663/php-sorting-a-multidimentional-array-arriv)

我有一个 UNSORTED VERSION 类型的数组。

```
$arr['foo']['man']      = 5;
$arr['foo']['str']      = 'string5';
$arr['foobar']['man']   = 2;
$arr['foobar']['str']   = 'string2';
$arr['barfoo']['man']   = 4;
$arr['barfoo']['str']   = 'string4';
$arr['foofoo']['man']   = 1;
$arr['foofoo']['str']   = 'string1';
$arr['bar']['man']      = 3;
$arr['bar']['str']      = 'string3'; 
```

我想按降序对它进行排序，同时保留该数组中的所有其他数据，即

```
$arr['foo']['man']      = 5;
$arr['foo']['str']      = 'string5';
$arr['barfoo']['man']   = 4;
$arr['barfoo']['str']   = 'string4';
$arr['bar']['man']      = 3;
$arr['bar']['str']      = 'string3';
$arr['foobar']['man']   = 2;
$arr['foobar']['str']   = 'string2';
$arr['foofoo']['man']   = 1;
$arr['foofoo']['str']   = 'string1'; 
```

我查看了 PHP 中的许多排序函数，但没有找到任何解决方案。

有谁能够帮助我？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:04:24.780

使用[`uasort`](http://php.net/uasort)并传递自定义比较可调用：

```
function compareItems($a, $b) {
    return $b['man'] - $a['man'];
}

uasort($arr, 'compareItems'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:04:13.630

```
uasort($arr, function($l, $r){
    return $r['man'] - $l['man'];
}) 
```

# java - Java：如何将这个奇怪的 url 转换为正常的？

> ID：11592840
> 
> 赞同：0
> 
> 时间：2012-07-21T14:01:52.927
> 
> 标签：java, url

我有一个来自 facebook 的网址，如下所示：

```
http:\/\/a6.sphotos.ak.fbcdn.net\/hphotos-ak-snc7\/s2048x2048\/582167_359167994154900_1489271360_n.jpg 
```

它看起来很奇怪，我想这是众所周知的标准之一，但我没有在谷歌中找到答案。

你能说我如何从中获得正常的网址吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:06:54.013

```
String newString = replaceSample.replace("\\/", "/"); 
```

那是因为字符串被转义了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:10:17.063

简单地说，你可以做的是：

```
replaceSample.replace("\", "" ); 
```

试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T16:11:24.290

如果您在`*.html`文件中找到此字符串，则这是手动使任何标准 URL 处理无法使用该 URL 的结果。这不是一个正确的 URL。这不是任何标准转义的结果。

另一方面：如果你在一些源代码中找到了这个字符串（虽然不是 Java），那么它`\/`可能会*在编译时*被替换为纯文本`/`，如下面的 C 示例所示：

```
#include <stdlib.h>
#include <stdio.h>

void main(){
    char *cp = "http:\/\/a6.sphotos.ak.fbcdn.net\/hphotos-ak-snc7\/s2048x2048\/582167_359167994154900_1489271360_n.jpg";

    printf("%s\n", cp);
} 
```

输出是：

```
http://a6.sphotos.ak.fbcdn.net/hphotos-ak-snc7/s2048x2048/582167_359167994154900_1489271360_n.jpg 
```

在**Java**中，编译器会抱怨“无效的转义序列”，甚至不会编译。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-21T14:05:31.347

那是因为它被逃脱了，你必须取消它

```
String url="http:\/\/a6.sphotos.ak.fbcdn.net\/hphotos-ak-snc7\/s2048x2048\/582167_359167994154900_1489271360_n.jpg";
url=URLDecoder.decode(url); 
```

# android - Android：选择位置提供程序时显示相同的结果

> ID：11592841
> 
> 赞同：0
> 
> 时间：2012-07-21T14:01:57.953
> 
> 标签：android, gps, location, wifi, cellular-network

我正在尝试使用或获取当前位置`GPS`。我正在给出选择最佳提供商的标准。但它总是显示是最好的提供者。当我在外面并且信号强时没问题，但当我在室内或信号差时就不行了。标准是`Cellular Network``WiFi``GPS``GPS``GPS`

```
 Criteria criteria  = new Criteria();
  criteria.setAccuracy(Criteria.ACCURACY_FINE);
  criteria.setAltitudeRequired(false);
  criteria.setBearingRequired(false);
  criteria.setCostAllowed(true);
  criteria.setPowerRequirement(Criteria.POWER_LOW);
  WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
  wifi.setWifiEnabled(true);
  String provider = lm.getBestProvider(criteria, true); 
```

解决办法是什么？请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:27:00.603

如果在您的设备中可用，则将准确性标准设置为`Criteria.ACCURACY_FINE`将始终为您提供。`GPS_PROVIDER`另一方面，如果可用，设置`Criteria.ACCURACY_COARSE`会为您`NETWORK_PROVIDER`提供。最好同时启动并`NETWORK_PROVIDER`先使用，因为可能需要几分钟才能从`GPS`.

有关减少延迟和电池消耗的位置最佳实践，请参阅[android-protips-location 。](http://code.google.com/p/android-protips-location/)

这些也可能有所帮助：

[选址策略](http://developer.android.com/guide/topics/location/strategies.html#BestEstimate)

[Android Protips：面向专家 Android 应用开发者的高级主题](http://www.google.com/events/io/2011/sessions/android-protips-advanced-topics-for-expert-android-app-developers.html)

# regex - preg_match 以特定符号结束

> ID：11592842
> 
> 赞同：1
> 
> 时间：2012-07-21T14:02:06.747
> 
> 标签：regex

这是一个字符串

```
$string = "example.com/TARGET/noneed/noneed/noooo"; 
```

如何使用 preg_match 获取 TARGET 以从第一个“/”开始查找到第二个“/”并忽略后面的任何内容

是的，它有点小问题，对不起，但我对正则表达式不太好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:06:47.523

使用这个正则表达式：

```
"#/(.*?)/#" 
```

这将找到第一个`/`然后匹配[最少的可能](http://www.regular-expressions.info/repeat.html#lazy)，直到找到第二个`/`。

在线查看它：[ideone](http://ideone.com/iqryK)

# visual-studio-2010 - cuda 样本中的 shrQATest.h

> ID：11592850
> 
> 赞同：0
> 
> 时间：2012-07-21T14:03:07.607
> 
> 标签：visual-studio-2010, cuda

我正在 Visual Studio 2010 中编译 vectorAdd.cu（来自 cuda 示例）。我遇到错误的地方

> shrQATest.h 未找到。

我在 Nvidia 包含文件夹（C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include）中搜索了头文件，但没有找到。

我的问题是，shrQATest.h 是否随 Nvidia 工具包一起提供，还是我必须手动安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T15:38:45.747

我在*C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\shared\inc*中找到了这个文件，cuda 5.0 上可能存在相同的目录。

# google-docs-api - 下载条目中描述的文件内容

> ID：11592854
> 
> 赞同：1
> 
> 时间：2012-07-21T14:03:35.113
> 
> 标签：google-docs-api, google-drive-api

我正在使用带有多作用域令牌的 Oauth 2.0 在 python 中构建一个 webapp。访问和处理文档列表提要工作正常。

但是，当我尝试下载未转换为 Google 文档格式的文件内容时，我总是收到 HTTP 401 错误作为响应。如果我在请求 URL 的末尾附加令牌，它不会改变任何东西。我将 GET 发送到我在条目内容标记的 src 属性中找到的地址。知道我在做什么错吗？

或者，如果无法使用令牌进行访问，那么*docs.googleusercontent.com令牌范围的意义何在？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T21:10:37.943

如果可以，请更新您的代码以使用新的 Google Drive API。要从 Drive 下载文件，您必须向文件的 downloadUrl 发送授权的 GET 请求，如参考指南中所述：

[https://developers.google.com/drive/v2/reference/files/get](https://developers.google.com/drive/v2/reference/files/get)

Google Drive SDK 还包含有关授权过程的大量文档 (https://developers.google.com/drive/about-auth) 以及在 App Engine 上运行的完整 Python 示例：

[https://developers.google.com/drive/examples/python](https://developers.google.com/drive/examples/python)

# node.js - 如何使用来自 nodejs/node_xslt 的 exsl:node-set？

> ID：11592856
> 
> 赞同：1
> 
> 时间：2012-07-21T14:04:01.613
> 
> 标签：node.js, xslt, exslt, libxslt

我正在尝试通过 node_xslt 模块从 nodejs 使用 EXSLT 节点集函数。这是一个简单的 libxslt 库包装器，它支持 EXSLT，因为我可以得到它。然而，任何对 exsl:node-set 的引用都会产生 Thi，这就是我使用它的方式。

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    xmlns:exsl="http://exslt.org/common"
                    extension-element-prefixes="exsl">

<xsl:variable name="variable">
  <item />
  <item />
</xsl:variable>

    <xsl:variable name="result" select="exsl:node-set($variable)"/> 
```

任何这是错误：

xmlXPathCompOpEval：未找到函数节点集 XPath 错误：未注册的函数运行时错误：文件 ./JayDataContextGenerator_OData_V2.xslt 第 58 行元素 for-each 无法评估“选择”表达式。

更新：Bahblah，node_xslt 插件的作者已经更新了 github 中的项目，所以上面提到的转换可以毫不费力地执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:48:23.463

终于弄清楚了检查 xsltproc.c，我不得不将以下添加添加到 node_xslt.c

到顶部：

```
#include <libexslt/exslt.h>
#include <libexslt/exsltconfig.h> 
```

到第 138 行，进入 FUNCTION(transform)

```
exsltRegisterAll(); 
```

扩展 wscript 以便：

```
obj.lib = ['xml2', 'xslt', 'exslt'] 
```

然后我不得不重建 node_xslt

```
node-waf build 
```

在这个 exsl:node-set() 之后就像魅力一样。

# java - Wicket - 参数化 StringResourceModel 的奇怪行为

> ID：11592864
> 
> 赞同：4
> 
> 时间：2012-07-21T14:04:51.737
> 
> 标签：java, internationalization, wicket, jodatime, wicket-1.5

这是我的资源密钥：

```
Expired {0} days ago 
```

这是 StringResourceModel 的定义：

```
new StringResourceModel("store.expired.tooltip", null, Days.daysBetween(expirationDate, refDate)); 
```

预期结果类似于`Expired 20 days`ago 但实际结果是`Expired P20D ago`.

知道是什么原因造成的吗？我认为我做的[一切都是正确的](https://stackoverflow.com/questions/3976888/simple-way-to-use-parameterised-ui-messages-in-wicket)，但不确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T14:31:40.150

这实际上是您使用 joda-time 的错误。请参阅 joda [Days](http://joda-time.sourceforge.net/apidocs/org/joda/time/Days.html)的 javadoc 。

`Days.daysBetween(expirationDate, refDate)`返回一个 joda`Days`对象，其`toString()`方法返回 ISO8601 持续时间格式字符串，这就是您所看到的。

使用`Days.daysBetween(expirationDate, refDate).getDays()`相反将使它成为一个整数，它应该格式正确。

# php - 为什么 php 表单生成器类没有运行？

> ID：11592866
> 
> 赞同：1
> 
> 时间：2012-07-21T14:05:24.220
> 
> 标签：php, javascript, oop, tinymce, ckeditor

我想使用[php 表单生成器类](http://www.imavex.com/pfbc2.x-php5/index.php#project-overview)。但我不能运行这个类。我使用如下（来自[示例页面](http://www.imavex.com/pfbc2.x-php5/examples/elements.php)）：

```
<?php
session_start();
require_once 'PFBC/Form.php';
$form = new Form("webeditors", 650);
$form->addElement(new Element_Hidden("form", "webeditors"));
$form->addElement(new Element_TinyMCE("TinyMCE:", "TinyMCE"));
$form->addElement(new Element_CKEditor("CKEditor:", "CKEditor"));
$form->addElement(new Element_Button);
$form->render();
?> 
```

上述代码的结果：

[HTML 代码](http://ideone.com/uhgQE)。

![在此处输入图像描述](../Images/cc0c8489e17041168a24ffdc256f91d3.png)

但它必须如下所示：

![在此处输入图像描述](../Images/89ce6884aacf489ae21aaedd87c66b4c.png)

PHP Designer 7 结果：

![在此处输入图像描述](../Images/5b6cf2c05a69f40b5ac9875dfcf6ec13.png)

Javascript 错误控制台的输出：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost/PFBC/Resources/tiny_mce/tiny_mce.js
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost/PFBC/Resources/ckeditor/ckeditor.js
Uncaught ReferenceError: tinyMCE is not defined 
```

问题出在哪里。我无法理解。

同时，我正在使用 AppServ AppServ 2.5.10

有人说你需要下载 tinymce 和 ckeditor 并针对你的项目进行优化。但是**pfbc**已经具备了一切。

![在此处输入图像描述](../Images/7bbd3acab88560efd3cfc38daee3f061.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:53:14.550

请尝试通过 configure 方法手动设置 resourcesPath 表单属性（参见下面的示例）。

$form->configure(array("resourcesPath" => "localhost/bigbeng/classes/PFBC/Resources"));

或者，您可以编辑 PFBC/Form.php 并在 Form 类构造函数中设置属性，这样您就不必为每个表单手动设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T15:30:50.263

请包括生成的 HTML 输出和 JavaScript 控制台中的任何错误。我的猜测是您的页面中没有正确包含所需的 JavaScript/CSS 文件，或者它们未配置为针对所需的元素。

# html - ie8中的网站内容对齐

> ID：11592869
> 
> 赞同：0
> 
> 时间：2012-07-21T14:05:38.937
> 
> 标签：html

我在 Internet Explorer 8 中面临网站内容（视频、图像、文本）对齐问题，但它在 Internet Explorer 9 中工作正常。我尝试了以下代码，但它仍然相同。

```
 <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" > 
```

谢谢

***找到了解决方案：-对我来说很好***

**曾是**

```
 <body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" "> 
```

**现在**

```
 <body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:09:59.210

而不是使用`EmulateIE7`，你应该使用`edge`。这实际上将完全禁用兼容模式（使用开发工具访问时除外），这通常可以解决大多数问题。

对于更具体的问题，需要一个更具体的问题。

# iphone - Magical Record iCloud 更新核心数据

> ID：11592874
> 
> 赞同：5
> 
> 时间：2012-07-21T14:06:53.063
> 
> 标签：iphone, objective-c, ios, core-data, magicalrecord

我不确定如何使用 Magical Record 获得 iCloud 更改的通知，甚至不知道如何获取它们。它与 iCloud 一起更新的唯一时间是我调用 save 时，而当我实际上没有更改时这样做似乎效率低下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T09:50:33.063

在与 iCloud 关联的持久性存储发生变化的地方，它会发布`NSPersistentStoreCoordinatorStoresDidChangeNotification`. 您应该订阅此通知并在它抛出时更新 UI。`MR_find...`可以像往常一样使用方法或使用获取控制器来获取更改`MR_fetch...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T18:59:34.050

我在源代码中看到`kMagicalRecordPSCDidCompleteiCloudSetupNotification`。

您是否尝试过订阅它？

# sql - SQL 老化报告

> ID：11592880
> 
> 赞同：1
> 
> 时间：2012-07-21T14:07:10.427
> 
> 标签：sql

我有以下应收帐款数据交易：

![初始数据](../Images/5deb4e8dbe682d4db5622f51994e361f.png)

我需要每 3 天获得一份帐龄报告，因此脚本应采用最后一次付款或信用并将其应用于最后一次收费。所以结果会是这样的：

![在此处输入图像描述](../Images/0d4a069e265551345e36fbd1824c8136.png)

此处 245 美元的信用额度适用于最后 400 美元的费用，因此该费用的剩余余额为 155 美元。然后，脚本应该接受下一笔最后一笔付款，并按照如下相同的规则应用它：

![在此处输入图像描述](../Images/389000ce18de5787d101a34b5e8918ed.png)

此处 1300 美元的付款用于 4 月 2 日剩余的 155 美元余额，然后剩余的 1,145 美元用于 7 月 1 日的 1,300 美元费用，因此期末余额为 155 美元，结果如下：

![在此处输入图像描述](../Images/a1e81d894e61a7d85195b95bc590338f.png)

所以，现在我知道最终余额是 673.21 美元，但我也知道在 0-16 天之间我有 518.21 的未结余额，在 17-30 天之间我有 155 的未结余额。

有关如何执行 SQL 查询以获得此结果的任何线索？

非常感谢！！并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T17:54:41.800

在不同的数据库中会有不同的方法来做到这一点。我在 Firebird 2.5 中创建了一个包含您的值的表（仅添加了一个 ID 列并由于保留字而更改了名称）并运行了以下语句：

```
with recursive tmp_payment (paid) as
(select -sum(amount)
 from account_receivables
 where amount < 0),
MyResultSet(id, MyBalance, RemainingCredit, Days) as
(select r.id, case when r.amount > p.paid then r.amount-p.paid end, 
        case when r.amount < 0 then p.paid
             when r.amount < p.paid then p.paid-r.amount 
             else 0 end, current_date - MyDate
 from account_receivables r
 cross join tmp_payment p
 where not exists(select 1 from account_receivables r2 where r2.id < r.id)
 union all
 select r3.id, case when r3.amount > rs.RemainingCredit then r3.amount - rs.RemainingCredit end,
        case when r3.amount < 0 then rs.RemainingCredit 
             when r3.amount < rs.RemainingCredit then rs.RemainingCredit - r3.amount 
        else 0 end,
        current_date - MyDate
 from ACCOUNT_RECEIVABLES r3
 join MyResultSet rs on r3.id = rs.id+1)

Select id, MyBalance, Days
from MyResultSet
union all
select null, (select sum(MyBalance) from MyResultSet), null
from rdb$database 
```

除了 rdb$database，它只是一张保证在 Firebird 和 InterBase 中只包含一条记录的表，可能还有 CURRENT_DATE（显而易见的含义），这应该是非常标准的 SQL，尽管远非所有数据库都支持 WITH RECURSIVE（对于MyResultSet, tmp_Payment 不是递归的），有些可能有不同的方法从另一个日期减去一个日期。

这是语句返回的内容：

```
 ID   MYBALANCE DAYS
   1     <NULL>   110
   2     <NULL>    21
   3     155.00    20
   4     518.21    16
   5     <NULL>    16
<NULL>   673.21 <NULL> 
```

# html - 指示文件夹的正确路径

> ID：11592884
> 
> 赞同：0
> 
> 时间：2012-07-21T14:07:55.543
> 
> 标签：html

我有一个大目录，即项目文件夹，它的地址是

```
C:\Users\daviti\Desktop\project 
```

在这个文件夹中，我创建了一个简单的网站，其主页是 index html，这个网站被创建为 3 种不同的语言，格鲁吉亚语、俄语和英语，格鲁吉亚语变体直接在项目文件夹中，俄语和英语版本被放入俄语和英文文件夹，肯定在主项目文件夹中，这些文件夹的名称是 eng 和 russ。我很感兴趣我应该在链接上指示什么样的路径，这样我就可以从英文版本移动到另一个版本，这是来自的子代码格鲁吉亚语版本

```
<a href="eng/index.html"><img src ='english.gif' style="float:right"  width="90" height="90"> </a>
<a href="russ/index.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="90" height="90"/></a>
<a href="index.html"> <img src="georgian.jpg"  style="float:right" width="90" height="90"/></a> 
```

正如您在三个变体中看到的那样，主页的名称是 index.html，只是文件夹不同，这适用于格鲁吉亚版本，但是这个

```
<a href="eng/index.html"><img src ='english.gif' style="float:right"  width="30" height="30"> </a>
<a href="russ/index.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="30" height="30"/></a>
<a href="index.html"> <img src="georgian.jpg"  style="float:right" width="30" height="30"/></a> 
```

来自英文版的不起作用，例如俄文链接，也来自俄文版

```
<a href="eng/index.html"><img src ='english.gif' style="float:right"  width="30" height="30"> </a>
<a href="russ/index.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="30" height="30"/></a>
<a href="index.html"> <img src="georgian.jpg"  style="float:right" width="30" height="30"/></a> 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T15:02:30.400

好的，让我理解...您有 3 个“index.html”文件：一个在 C:\Users\daviti\Desktop\project 中，第二个在 C:\Users\daviti\Desktop\project\eng 文件夹中，并且C:\Users\daviti\Desktop\project\russ 文件夹中的第三个？

在这种情况下，请尝试以下解决方案：

在您的格鲁吉亚索引页中写下：

```
<a href="eng/index.html"><img src ='english.gif' style="float:right"  width="90" height="90"> </a>
<a href="russ/index.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="90" height="90"/></a>
<a href="index.html"> <img src="georgian.jpg"  style="float:right" width="90" height="90"/></a> 
```

在您的英文索引页中写下：

```
<a href="index.html"><img src ='english.gif' style="float:right"  width="30" height="30"> </a>
<a href="../russ/index.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="30" height="30"/></a>
<a href="../index.html"> <img src="georgian.jpg"  style="float:right" width="30" height="30"/></a> 
```

在你的俄语索引页上写下这个：

```
<a href="../eng/index.html"><img src ='english.gif' style="float:right"  width="30" height="30"> </a>
<a href="index.html"><img src ='russian.gif' alt="Russian flag" style="float:right"  width="30" height="30"/></a>
<a href="../index.html"> <img src="georgian.jpg"  style="float:right" width="30" height="30"/></a> 
```

# php - MYSQL - 如何从第一个表返回数组并在一个查询中使用该数组从另一个表中选择？

> ID：11592889
> 
> 赞同：1
> 
> 时间：2012-07-21T14:08:53.920
> 
> 标签：php, mysql

我有 2 张桌子：

1）game_follower（存储哪个用户正在关注哪个游戏）：

```
___________________________
| ID  | game_id | user_id |
| 1   |  1      |  1      |
| 2   |  2      |  1      | 
```

2）视频：

```
__________________________________
| ID  | game_id | content | data |
| 1   |  2      |  blah   | blah |
| 2   |  1      |  blah   | blah | 
```

我正在尝试实现一个 twitter 风格的跟踪系统，但是我在编写执行以下操作的查询时遇到了麻烦：

*   选择多个 game_ids WHERE user_id = "1"
*   从 game_ids 列表中，从其中 game_id = 的视频中选择（从第一个查询中选择的多个游戏 id）

我可以使用单独的查询来做到这一点，但有人告诉我，使用多个查询对性能不利，那么如何在一个查询中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T14:12:51.147

试试这个

```
SELECT v.game_id
FROM videos v
INNER JOIN game_follower gf ON gf.game_id = v.game_id
WHERE gf.user_id = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:13:56.710

您应该研究[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)以通过一个查询来执行此操作（与单独获取数据相比，这大大提高了速度）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T14:14:52.263

```
$conn = new PDO(CONNECTION_DETAILS, $username, $pass);
$variable = 1;
$sql = "SELECT game_follower.game_id FROM game_follower ";
$sql .= "INNER JOIN videos ";
$sql .= "ON game_follower.game_id = videos.game_id ";
$sql .= "WHERE game_follower.user_id = :id";
$query = $conn->prepare($sql);
$query->bindParam(':id', $variable, PDO::PARAM_INT);
$query->execute(); 
```

类似的东西？

# python - 如何在模型表单验证中访问 id？

> ID：11592897
> 
> 赞同：2
> 
> 时间：2012-07-21T14:10:15.713
> 
> 标签：python, django, forms, validation, model

我有一个模型和一个用 ModelForm 创建的表单。我正在使用自定义验证，我需要访问我当前正在编辑的记录的 ID。有没有办法通过以某种方式或任何其他方式插入自定义隐藏字段来将变量传输到表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T14:40:52.923

您不需要隐藏字段。您可以将变量从视图传输到表单：

**看法：**

```
def some_view(request):
    if request.method == 'POST':
        some_id = 1

        form = SomeForm(data=request.POST, some_id=some_id) 
```

**形式：**

```
class SomeForm(ModelForm):
    def __init__(self, *args, **kwargs):
        if 'some_id' in kwargs:
            self.some_id = kwargs.pop('some_id')

        super(SomeForm, self).__init__(*args, **kwargs) 
```

# android - 子菜单项不保留当前状态

> ID：11592906
> 
> 赞同：1
> 
> 时间：2012-07-21T14:11:02.697
> 
> 标签：android, submenu, android-optionsmenu

我有一个子菜单，并试图让项目显示当前选定的状态。因为它是一个子菜单，所以我不能调用菜单方法。一旦第一次被选中，它就会显示为已选中，但我需要让它在菜单第一次膨胀时显示。请问有什么想法吗？

```
public boolean onCreateOptionsMenu(Menu menu){
    MenuInflater minf= getMenuInflater();
    minf.inflate(R.menu.menu,menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item){

    switch (item.getItemId()){
    //-------Options menu----------
    case R.id.about:
        Intent intentA = new Intent(FuelMoney.this, About.class);
        startActivity(intentA);
        return true;
    case R.id.locale:
        return true;

    //-----Sub menu---------- UK item not showing as clicked (rest of the code not complete yet)

        case R.id.uk_item:
            if(this.countryCode.equals("uk"))
            {
                item.setChecked(true);
            }
        Toast.makeText(this, "UK selected", Toast.LENGTH_SHORT).show();
        this.countryCode="uk";
        this.country = new Country(countryCode);
        this.regionAttributes();
        item.setChecked(true);
        return true;
    case R.id.us_item:
        Toast.makeText(this, "US selected", Toast.LENGTH_SHORT).show();
        this.countryCode="us";
        this.country = new Country(countryCode);
        this.regionAttributes();
        return true;
    case R.id.eu_item:
        Toast.makeText(this, "EU selected", Toast.LENGTH_SHORT).show();
        this.countryCode="eu";
        this.country = new Country(countryCode);
        this.regionAttributes();
        return true;
    case R.id.jpn_item:
        Toast.makeText(this, "Japan selected", Toast.LENGTH_SHORT).show();
        this.countryCode="jpn";
        this.country = new Country(countryCode);
        this.regionAttributes();
        return true;
    case R.id.india_item:
        Toast.makeText(this, "India selected", Toast.LENGTH_SHORT).show();
        this.countryCode="ind";
        this.country = new Country(countryCode);
        this.regionAttributes();
        return true;
    default :
        return super.onOptionsItemSelected(item);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:30:20.803

知道了。我需要获取 SubMenu 并在其上调用方法。

以下是创建选项菜单的完整代码，该菜单显示选项子菜单（在本例中为国家/地区），该菜单还显示当前设置：

```
public boolean onCreateOptionsMenu(Menu menu){
        MenuInflater minf= getMenuInflater();
        minf.inflate(R.menu.menu,menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item){

        switch (item.getItemId()){
        //-------Options menu----------
        case R.id.about:
        Intent intentA = new Intent(myClass.this, About.class);
        startActivity(intentA);
        return true;
    case R.id.locale:

            //-----Sub menu----------
        SubMenu sub = item.getSubMenu();
        sub.setGroupCheckable(R.id.locale, true, true);
        if(this.countryCode.equals("uk"))
        {
            sub.getItem(0).setChecked(true);
        }else if(this.countryCode.equals("us"))
        {
            sub.getItem(1).setChecked(true);
        }else if(this.countryCode.equals("eu"))
        {
            sub.getItem(2).setChecked(true);
        }else if(this.countryCode.equals("jpn"))
        {
            sub.getItem(3).setChecked(true);
        }else if(this.countryCode.equals("ind"))
        {
            sub.getItem(4).setChecked(true);
        }

        return true;

        case R.id.uk_item:
        this.subMenuHelper("uk");// see below for subMenuHelper
        item.setChecked(true);
        return true;
    case R.id.us_item:
        this.subMenuHelper("us");
        item.setChecked(true);
        return true;
    case R.id.eu_item:
        this.subMenuHelper("eu");
        item.setChecked(true);
        return true;
    case R.id.jpn_item:
        this.subMenuHelper("jpn");
        item.setChecked(true);
        return true;
    case R.id.india_item:
        this.subMenuHelper("ind");
        item.setChecked(true);
        return true;
    default :
        return super.onOptionsItemSelected(item);

        }

    }

    public void subMenuHelper(String cCode)
      {
            this.countryCode=cCode;
            this.country = new Country(this.countryCode);
            this.regionAttributes(this.country);
        } 
```

和xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<menu
  xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/locale"
        android:title="@string/menu_set_region"
        android:icon="@android:drawable/ic_menu_mapmode">

        <!--region submenu -->
    <menu>
    <group android:checkableBehavior="single">
        <item android:id="@+id/uk_item"
            android:title="@string/uk"
            />  
        <item android:id="@+id/us_item"
            android:title="@string/us"
            />
        <item android:id="@+id/eu_item"
            android:title="@string/eu"
            />
        <item android:id="@+id/jpn_item"
            android:title="@string/jpn"
            />
        <item android:id="@+id/india_item"
            android:title="@string/india"
            />
        </group>
        </menu>
    </item>

    <item android:id="@+id/about"
        android:icon="@android:drawable/ic_menu_info_details"
        android:title="@string/menu_about"
        />
 </menu> 
```

我希望这里有足够的内容，以便您可以填写空白:-)

# c# - Metro UI XAML TextBlock 背景

> ID：11592911
> 
> 赞同：1
> 
> 时间：2012-07-21T14:12:15.150
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我从 C#/WPF 切换到 C#/MetroUI 开发，并意识到 XAML 中存在许多差异。例如，在 MetroUI 中，TextBlock 上没有背景属性，或者我太愚蠢而无法使用它。那么，如果没有这样的属性，我将如何为我的 TextBlock 实现这样的风格呢？

我想在蓝色背景上有白色文本，但背景必须跟随段落。是否有类似 ItemTemplate for TextBlocks 或类似控件来实现这种情况？

![在此处输入图像描述](../Images/c3cbc26ad13a1b2358e7fda802063256.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:32:47.780

他们真的必须是文本块吗？我搜索了 Windows.UI.Xaml 的文档，似乎背景属性仅适用于从 Control 类继承的对象。Textblock 继承自 FrameworkElement。

如果我是你，我会修改 TextBox 样式并使它看起来像一个文本块，因为你已经有 WPF 经验，我假设这对你来说应该相对容易设置样式和实现该行为。

更多信息可在实际文档中找到：[TextBlock Class](http://msdn.microsoft.com/en-us/library/windows/apps/br209652.aspx#Y200)和[TextBox Class](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.textbox.aspx)

从那里进行了比较，因为我正在查看 WinRT 中的 Background 属性现在在哪里。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:08:51.363

我认为您必须在将 TextBlocks 放在 Border 内或将填充的 Rectangles 放在 TextBlocks 后面进行一些操作 - 在您确定在 TextBlocks 堆栈中放置换行符的位置之后。像 Silverlight 这样的 WinRT XAML 具有相当有限的 API 来帮助您自动进行此类高级格式化。

# php - 使用ajax提交输入数组并在codeigniter中检索

> ID：11592916
> 
> 赞同：1
> 
> 时间：2012-07-21T14:12:50.763
> 
> 标签：php, ajax, codeigniter, post

任何人都知道如何从 ajax 到 CodeIgniter 获取帖子输入数组？

前任

```
<input name="city[]" value="xxx">
<input name="city[]" value="yyy"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T20:26:18.897

这是使用 jQuery Ajax 发布多个字段的类似问题和解决方案。

[如何使用 jQuery ajax post 传递多个复选框](https://stackoverflow.com/questions/908708/how-to-pass-multiple-checkboxes-using-jquery-ajax-post)

希望这对您有所帮助。谢谢！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:14:36.087

```
$this->input->post("city"); 
```

# c# - 将数据从 Mongo 转换为 MySQL（110M 文档，60Gigs） - 提示和建议？

> ID：11592917
> 
> 赞同：10
> 
> 时间：2012-07-21T14:13:02.070
> 
> 标签：c#, mysql, mongodb, windows-server-2008, mongodb-.net-driver

我的任务是将数据从 MongoDB 数据库移植到 MySQL 数据库。（移植有充分的理由——所以*必须*这样做）。

MongoDB 集合：

*   拥有大约 1.1 亿份文档
*   大小为 60 GB
*   具有重要属性的索引
*   正在运行不为任何生产流量提供服务的 Windows 2008 独立独立服务器

我们尝试过的设置：

*   具有 7.5 Gigs RAM / 8 Gigs 页面文件的大型 Amazon EC2 Win2008 服务器实例
*   AC# 控制台应用程序，将 MongoDB 数据转换为本地 MySQL 数据库

我们一次从 MongoDB 的内存中提取 1K 个文档，进行必要的处理，然后将它们保存到 MySQL db，一次批量写入 500 个。

我们面临的问题是，每 250 万个文档，服务器就会阻塞，Mongo 响应非常缓慢 - 应用程序的数据获取操作超时（在处理 100 万个文档时，可用 RAM 已经结束）

我们通过杀死 mongod 进程并在每 250 万条记录崩溃时重新启动它来缓慢前进——但我敢打赌我们做错了什么。

**问题：**

我是否应该为此将 Mongo 服务器移动到基于 Linux 的大型实例并将 MySQL 移动到 Amazon RDS 并用 PHP 重写转换应用程序？会有帮助吗？

我们决定将它全部放在一个盒子上的原因是在不同的盒子上拥有不同的服务器的延迟问题 - 但我想如果盒子窒息，那是没有实际意义的。

我还可以尝试哪些其他事情/可以使用的技巧？

感谢您阅读到这里！

**-- 更新 01 --**

自从我重新启动我的应用程序并进行了以下更改以来，已经过去了大约 6 个小时：

1.  一次将 Mongo 读取计数从 1,000 条增加到 10,000 条。.skip(10K).limit(10K)
2.  从 MySQL 目标数据库中删除了所有索引。
3.  将 Windows 页面大小从 4 Gigs 增加到 8 Gigs

我的内存消耗为 100%，但应用程序仍在运行。（上次它在 52 分钟内发出呱呱叫声）。Mongo 吃 6.8 Gigs 的 RAM，MySQL - 450 Megs 和转换器应用程序 - 400 Megs（大约值）。

到目前为止处理了 1100 万条记录 - 但速度已经从大约 500 条记录/秒下降到 370 条记录/秒。

接下来的步骤将是将 Mongo 和 MySQL 服务器隔离到单独的盒子中，并将它们都放在同一个 Amazon 可用区中，以最大限度地减少延迟。

**-- 更新 02 --**

我们对代码进行了一些更改以使用 Mongo 光标并让它自动递增，而不是自己执行 .skip().limt()。这大大加快了这个过程，我们每秒可以处理 1250 条记录，而之前的记录是 300 多条。但是，应用程序开始消耗过多的内存，并且会耗尽 RAM 并崩溃，并且需要在每 2M 记录后重新启动。

我们使用了这个代码片段：

```
var docs = db[collectionName].Find(query);
docs.SetBatchSize(numOfResultsToFetchAtATime);
foreach (var d in docs) {
  // do processing
} 
```

因此，它的作用是一次获取“numOfResultsToFetchAtATime”记录，然后在循环中自动进行并获取下一组记录。Mongo 使用 Cursor 来处理这个进程，因此它要快得多。

但是，我们仍然无法成功移植它。当这种情况发生时，我会用代码发布我的回复。

**-- 更新 03：成功 --**

我们最终使用了@scarpacci 的建议做一个 mongoexport。请记住，mongodb 必须位于 linux 机器上而不是 windows 机器上。

我们首先尝试在本地 MongoDB 上从 Windows 执行 mongoexport，无论我们尝试什么，对于一个大型集合（13Gigs+），它都会在不同的地方失败

最后，我在 Linux 机器上恢复了数据库，mongoexport 就像一个魅力一样工作。

没有 Json -> MySQL 转换器 - 所以我们必须做很多事情。稍作调整，我们就可以使用我们以前的应用程序并读取文件并直接写入 MySQL。它快速且相对没有错误。

我们在处理大文件时遇到了一些问题，但是将 13GB 文件分解为 500 Meg 长文件有助于解决这个问题，我们能够成功地将所有数据迁移到 MySQL。

非常感谢大家花时间帮助我们。希望这个解释对将来的人有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T15:21:16.353

我曾经使用 .NET 将数据迁移到 SQLServer 时遇到过问题——尽管我试图让它尽可能轻量级，但速度仍然是不可接受的。最后，我编写了一个快速的 C++ OLEDB 应用程序，事情进展得非常快。我仍在试图找出我在 .NET 应用程序中做错了什么，但问题可能出在 .NET 中。我不会用 PHP 重写转换，而是选择性能选项并使用 C++（从网上获取教程，它并不难，不是一次性应用程序）

因此，这是首先要查看的一件事 - 以及分析您的 C# 应用程序以查看它是否存在内存泄漏错误，该错误会慢慢使系统的其余部分陷入困境。

我发现你停止 MongoDB 应用程序而不是其他任何东西很有趣。是什么让你认为它的 MongoDB 正在消亡，而不是其他系统？如果它的内存使用情况，那么拆分到单独的盒子可能会有所不同，如果它的内存增长缓慢，那么读取更少的块 - Mongo 应该可以很好地读取数据，所以如果不是，那么你可能已经对它做了一些事情让它保持它的内存，无论是在配置中还是在你的应用程序中。

启动 perfmon 并查看 Mongo、您的应用程序和 MySQL 实例的内存、交换、磁盘 IO 和 CPU 使用情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T16:25:31.293

一旦我迁移了一个大数据库（不是 60 GB，但大到足以显示问题），我最终编写了一个小应用程序来完成这项工作。

这样，我使用某种批处理模式从一个数据库读取并写入另一个数据库（我面临数据库崩溃等类似问题）

我所做的是为每个部分生成较小的事务，并在每次解决工作项时关闭它们。

我们在两个数据库中都有表，没有文档，但问题是一样的。

毕竟：

*   有一个应用程序可以协调迁移，但它自己没有任何数据库连接
*   从协调应用程序产生多个实例来移动数据，做一个工作项目，然后关闭（在关闭之前有一些报告成功的方式）这样你就可以有多个读取器/写入器并且可以尝试计数，我只有大约 10 个一次并发读取器/写入器实例。如果您的文档足够小，您可以生成更多文档。但无论如何，它们都会很快关闭。

**注意：**写入目标数据库时不要在目标数据库中创建索引，这将为您带来最终的性能提升。当您拥有所有数据时设置索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-21T17:39:28.510

您没有理由将数据直接写入 MySQL - 将作业分成 2 个单独的阶段，您将首先运行 MongoDB，然后运行 ​​MySQL，因此它们不会竞争资源 - 看起来不断增长的 MySQL 进程使 Mongo 挨饿在 RAM 或 io 上。

第一阶段：从 MongoDB 获取数据，对其进行处理并将其保存到文本文件（如 SQL）中。停止 Mongo，启动 MySQL

第二阶段：使用第一阶段生成的文件运行常规数据库导入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-21T17:32:17.543

重新启动 MongoDB 解决了性能问题，并且在它突然出现之前您可以处理的记录数量一致，这对我来说听起来像是资源泄漏。我会确保一切都已关闭，等等。确保 MySQL 未配置为使用太多内存，或者更好的是，将其移动到另一台机器上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-21T16:12:21.367

您是否考虑过使用[mongoexport](http://www.mongodb.org/display/DOCS/mongoexport)然后在 MySQl 中执行某种批量插入？不确定这在 MySql 中是否可用，但我们一直在 SQL Server 中执行类似的操作。可能会使转储/插入更容易分解和优化？只是一个想法....

# c - 条件在选择排序中的作用？

> ID：11592920
> 
> 赞同：0
> 
> 时间：2012-07-21T14:13:28.333
> 
> 标签：c, sorting

下面通过代码片段中的注释标记的语句实现选择排序的作用是什么？

```
int temp, min;

for (i = 0; i <= count - 2; i++) {
    min = i;
    for (int j = i + 1;  j <= count - 1; j++) {
        if (arr[min] > arr[j]) {
            if (arr[i] == arr[min]) {    //What's the significance of this statement?
                temp = arr[min];
                arr[min] = arr[j];
                arr[j] = temp;
            }
        }
    }
} 
```

那句话的意义何在？是否会有一个输入，这个 if 条件实际上很重要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T21:56:46.303

正如您在外部循环中定义的 min = i 一样，条件总是得到满足，因此，您可以通过删除条件来优化代码。

在选择排序中，您还可以进行更多优化。您可以找到真正的最小值的位置，例如 a[pos]，然后将其与 a[i] 交换，而不是每次找到新的最小值时交换值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T14:27:15.407

您已`min = i;`在 j 循环之前定义，并且循环内 i 和 min 的值没有发生变化，因此，无论如何，arr[min] 将始终等于 arr[i]，评估 if 条件总是如此，所以这些线条没有任何作用。删除条件，你的代码会变得更快（如果编译器没有优化代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T22:14:33.487

*   变量 i 从 0 变为 count-1

*   在 i 的每个循环中，您希望从 i 到 count-1 的最小值位于 arr[i] 位置。要获得 a[i] 的最小值，您可以这样做：

*   将 min 设置为位置 i

*   循环变量 j 从 i+1 到 count-1

*   如果 a[j] 小于 a[min]，则要扫描 a[min] 和 a[j]。

这样做，在每个循环 j 结束时，您将在 a[i] 上有一个最小值。

# apache - 如何将 localhost 重写为 fakeserver？

> ID：11592921
> 
> 赞同：-1
> 
> 时间：2012-07-21T14:13:35.857
> 
> 标签：apache, .htaccess

我有一个根文件夹 htaccess 包含我的 htaccess 文件和另一个文件夹，我包含我的 index.php 文件..我想使用 url rewrite 这样当我访问`http://localhost/htaccess/me/index.php , it transforms the url to http://fakeserver/htaccess/me/index.php..`

Drupal 做这样的事情..

我想做这个转换，这样 fakeserver 不是真正的服务器，只是我将 localhost 重写为 fakeserver

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:21:12.227

创建一个新的站点配置`/etc/apache2/sites-available/fakeserver` （注意你需要创建文件`fakeserver`）

在其中，添加以下内容：

```
NameVirtualHost *:8080

<VirtualHost *:8080>
DocumentRoot /var/www/
ServerName fakeserver
</VirtualHost> 
```

从您的终端启用它

```
sudo a2ensite fakeserver 
```

重新启动 apache 以反映更改

```
sudo /etc/init.d/apache2 restart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:22:35.660

您必须设置一个虚拟主机。看看这些示例，来自 Apache HTTPD 文档：

[http://httpd.apache.org/docs/2.2/vhosts/examples.html](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

# c# - VisualStateManager.GoToState 不适用于 DataTemplate

> ID：11592925
> 
> 赞同：2
> 
> 时间：2012-07-21T14:14:18.630
> 
> 标签：c#, xaml, blend, visualstatemanager, visualstates

我有一个具有以下`DataTemplate`设置的列表框，`ItemTemplate`我想`VisualState`使用 Codebehind 更改它。

数据模板：

```
<DataTemplate x:Key="SortedRecommendationTemplate">
    <Border x:Name="asds">
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="VisualStateGroup">
                <VisualState x:Name="OnlyNameState">
                    <Storyboard>
                        ...
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="OnlyImageState"/>
                <VisualState x:Name="AllInfoState">
                    <Storyboard>
                        ...
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
        <Grid>
            ...
        </Grid
    </Border>
</DataTemplate> 
```

这是我用来获取边框的代码（FindChild 来自[How to find element in visual tree? wp7](https://stackoverflow.com/questions/7034522/how-to-find-element-in-visual-tree-wp7)）并更改 VisualState

```
var blub = FindChild<Border>(listBox, "asds");
VisualStateManager.GoToState(blub, "AllInfoState", true); 
```

但是，GoToStates 返回 false。blub 确实是我想要的边框（嗯，它是第一个 Listboxitem）但是 VisualStates 似乎有效，因为当我使用 Blend 中的 Behaviors 时，它们实际上确实发生了变化：

触发器：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="MouseEnter">
        <ei:GoToStateAction StateName="AllInfoState" TargetObject="{Binding ElementName=asds}"/>
    </i:EventTrigger>
    <i:EventTrigger EventName="MouseLeave">
        <ei:GoToStateAction StateName="OnlyNameState" TargetObject="{Binding ElementName=asds}"/>
    </i:EventTrigger> 
```

有人知道发生了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T14:43:08.397

这是因为`Border`不是 a `Control`，而是 a `FrameworkElement`。`VisualStateManager.GoToState(Control control, string stateName, bool useTransitions)`但是仅适用于`Control`.

您可以使用`ExtendedVisualStateManager.GoToElementState(FrameworkElement root, string stateName, bool useTransitions)`在 Microsoft.Expression.Interactivity.Core 中可以找到的内容。我想这就是 Blend 在内部使用的。

# django - Django 和清漆

> ID：11592927
> 
> 赞同：0
> 
> 时间：2012-07-21T14:14:46.320
> 
> 标签：django, memcached, varnish, varnish-vcl

我目前正在使用 django（非常复杂的数据结构）开发一个大型网站，原生负载支持极低（4 req/s），这是不可接受的，建议我使用 varnish 来加速我的应用程序。现在这就是问题所在，我在整个站点中都使用了 memcache，我可能会添加相当多的内容（几乎每个查询都会被 memcached）。我无法使用中间件，因为网站的某些部分是每个用户动态的。现在我遇到的真正问题是每个用户都需要缓存很多页面，如果有 cookie 来回传输，varnish 不会缓存页面，我想知道是否有办法为每个用户代理缓存页面，如果这真的有效，如果不是，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:51:36.760

清漆甚至可以与饼干一起使用。

我在这里展示了如何将清漆用于特定路径，看看你是否可以使用它来为你带来好处：

* * *

```
sub vcl_recv {
    if (req.url ~ "^/user1") {
        unset req.http.cookie;
    }
}

sub vcl_fetch {
    if (req.url ~ "^/user1") {
        unset beresp.http.set-cookie;
    }
} 
```

* * *

## 或类似的东西：

```
sub vcl_hash {
    if (req.url ~ "^/user1") {
        hash_data(req.http.cookie);
    }
} 
```

# apache - .htaccess 配置：.htaccess 文件的位置和要重写的 URL 格式

> ID：11592934
> 
> 赞同：0
> 
> 时间：2012-07-21T14:17:02.490
> 
> 标签：apache, .htaccess, magento, mod-rewrite

我在 /var/www/magento 中安装了 magento，其中 /var/www 是 URL http://localhost/ 的文档根目录。在默认配置中，我可以使用 http:// localhost/magento 访问我的 magento 商店。但是，现在我已经在 Admin Panel -> System -> Manage Stores 下配置了不同的网站和商店以及商店视图，并且希望通过某种方式在我的测试环境中单独访问它们。

为此，我检查了 phpinfo() 并显示系统上启用了 mod_rewrite。我尝试将以下内容添加到 /var/www/magento/.htaccess 但它们没有按预期工作：

```
SetEnvIf Host localhost/magento/furniture
MAGE_RUN_CODE=furniture_en
SetEnvIf Host localhost/magento/furniture
MAGE_RUN_TYPE=store
# ... 
```

我怎样才能让这些工作。我不需要这些确切的 URL 来访问特定的商店组件。只是不知道在哪里放置指令（即在哪里放置 .htaccess 文件）并编写它们以使其有意义。

我什至尝试过：

```
SetEnvIf Host localhost/magentofurniture
MAGE_RUN_CODE=furniture_en
SetEnvIf Host localhost/magentofurniture
MAGE_RUN_TYPE=store
# ... 
```

但它也不起作用，因为我不明白 mod_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T22:07:28.907

尝试去：

**系统 → 配置 → 网页**

并打开**Add Store Code to URLs**。这应该允许您使用 URL 中的商店代码单独访问每个商店。在你的情况下，我相信它应该是 localhost/magento/ **store_code** /。

# java - InetAddress.getLocalHost() 总是返回 127.0.0.1

> ID：11592938
> 
> 赞同：5
> 
> 时间：2012-07-21T14:17:30.110
> 
> 标签：java, centos

任何人都知道为什么 InetAddress.getLocalHost() 总是返回 127.0.0.1 虽然我已经更改了 /etc/hosts 中的 ip？改变后

```
hostname -i 
```

返回正确的 ip (192.168.xx)，但 InetAddress.getLocalHost() 仍然是名称。

顺便说一句，我在 CentOS 6.2 上使用 jdk 1.6.0_31。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:19:18.347

因为您必须重新启动电脑或清除 dns 缓存才能“应用”更改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:20:47.113

这可能是一个安全限制问题。从[javadoc](http://docs.oracle.com/javase/6/docs/api/java/net/InetAddress.html#getLocalHost%28%29)：

> 如果有安全管理器，则使用本地主机名和 -1 作为其参数调用其 checkConnect 方法，以查看是否允许该操作。如果不允许该操作，则返回表示环回地址的 InetAddress。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-19T10:33:57.333

一个老问题，但也许这些信息对其他人有帮助 - 我一直在努力寻找任何地方记录的信息（可能是因为它不是语言规范的正式部分），并且必须通过实验来确定。

如果问题不在于 SecurityManager，那么最有可能的问题是您在操作系统级别的名称解析以某种方式搞砸了。

至少在我测试过的所有 Unix 平台（OS X、Solaris、Linux）上，Java 使用的进程是：

1.  确定本地主机名
2.  通过 /etc/hosts 解决该问题以确定 IP 地址

我已经看到配置错误的 /etc/hosts 破坏了这一点，例如：

```
127.0.0.1 localhost myhost
1.2.3.4   myhost 
```

准确给出上述症状。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T14:26:53.833

1.  首先**LocalHost总是代表LoopBack地址127.0.0.1**（用来调试TCP/IP栈），当Security manager发现操作不被允许时。

2.  对于您的 LAN 地址，请使用`InetAddress.getByName("PC NAME").getHostAddress()`

    **请将 PC NAME 替换为您的 PC 名称。**

**例如：**

```
public class StrTest {

    public static void main(String[] args) throws IOException {

            System.out.println(InetAddress.getByName("Vicky-PC").getHostAddress());

    }

} 
```

# ruby-on-rails - sunspot如何查询特定字段

> ID：11592943
> 
> 赞同：0
> 
> 时间：2012-07-21T14:18:38.470
> 
> 标签：ruby-on-rails, solr, sunspot, sunspot-rails

阅读 Sunspot 文档，我试图找到如何查询**自动完成字段**。

**我在这里创建它们** [https://github.com/haitham/sunspot_autocomplete](https://github.com/haitham/sunspot_autocomplete)

这是配置 solr/conf/schema.xml

```
<types>
  .......
  <fieldType name="autocomplete" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
      <tokenizer class="solr.LetterTokenizerFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="25" />
    </analyzer>
    <analyzer type="query">
      <tokenizer class="solr.KeywordTokenizerFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
  </fieldType>
  <fieldType name="autosuggest" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
      <tokenizer class="solr.KeywordTokenizerFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="25" />
    </analyzer>
    <analyzer type="query">
      <tokenizer class="solr.LetterTokenizerFactory"/>
      <filter class="solr.LowerCaseFilterFactory"/>
    </analyzer>
  </fieldType>
  .....
</types>
<fields>
  ....
  <dynamicField name="*_ac" type="autocomplete" indexed="true"  stored="true"/>
  <dynamicField name="*_as" type="autosuggest" indexed="true"  stored="true"/>
  ....
</fields> 
```

我有可搜索字段的模型：

```
class Post < ActiveRecord::Base
  attr_accessible :text, :user_id

  has_one :user

  searchable do
    text :text
    integer :user_id, :references => User
    autocomplete :post_text, :using => :text
  end
end 
```

当我尝试像这样搜索自动完成字段时：

```
Sunspot.search(Post) { keywords('ra', :fields => :'autocomplete') } 
```

我得到错误：

```
Sunspot::UnrecognizedFieldError: No text field configured for Post with name 'autocomplete' 
```

我做错了什么？

**我在 github 上分享了应用程序：[https ://github.com/pironim/my_sunspot_app.git](https://github.com/pironim/my_sunspot_app.git)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T18:33:47.860

弗拉基米尔，

您正在使用插件的文档，但看起来您实际上并未使用该插件。您不需要使用该插件，您可以定义一个自定义字段，并告诉 Sunspot 使用它。

您的配置`schema.xml`看起来不错。在你的`searchable`街区，我会做以下事情：

```
class Post < ActiveRecord::Base
  attr_accessible :text, :user_id

  has_one :user

  searchable do
    text :text, :stored => true, :as => :text_ac
    integer :user_id, :references => User
  end
end 
```

进行此更改后，请确保`rake sunspot:solr:stop`=> `rake sunspot:solr:start`=>`rake sunspot:solr:reindex`以便 Sunspot 和 Solr 知道动态字段的用法。

然后在搜索时，执行以下操作：

```
Sunspot.search(Post) { 
  keywords('ra') 
} 
```

# c - 移动指针后如何释放一些字节？

> ID：11592947
> 
> 赞同：2
> 
> 时间：2012-07-21T14:19:23.987
> 
> 标签：c, memory, pointers

我执行以下操作：

```
void * myFunction(void) {
    void *someBytes = malloc(1000);
    // fill someBytes

    //check the first three bytes (header)
    if(memcmp(someBytes, "OK+", 3) == 0) {
        // move the pointer (jump over the first three bytes)
        someBytes+=3
    }

    return someBytes;
} 
```

接收器如何释放分配的指针？当然我可以在指针上做一个-3。

但是这种情况有最佳实践吗？是否有一个简单的解决方案仍然允许在接收器函数中调用`free(someBytes);` 因为`someBytes`也可以容纳数兆字节我想避免 memcpy （`malloc(1000)`仅用于示例）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:22:13.617

没有任何办法（除非您碰巧知道确切的偏移量）。最佳做法是存储原始指针的副本，以便以后使用它来释放内存。

```
void* myFunction(void) {
    void* someBytes = malloc(1000);
    void* pos = someBytes;
    // fill someBytes

    //check the first three bytes (header)
    if(memcmp(pos, "OK+", 3) == 0) {
        // move the pointer (jump over the first three bytes)
        pos+=3
    }

    return someBytes;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:40:21.460

为什么不定义一个结构并让你的函数分配并返回一个指向它的指针呢？

```
struct MyStruct {
  PrivateHeader *header;
  UserData* data;
}; 
```

`PrivateHeader`是一个不透明的指针，指向只`myFunction`知道如何访问/操作的数据；您的函数的使用者只知道如何访问/操作`data`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T15:43:16.787

接收方也可以创建缓冲区吗？为什么 myFunction 分配它不删除的内存？

```
void* myFunction(void) {
  void* someBytes = malloc(1000);

  return someBytes;
} 
```

在某种程度上（功能上）等同于：

```
size_t myFunction(void* someBytes, size_t size) {
  // do something

  if(memcmp(someBytes, "OK+", 3) != 0) {
      return 0;  // didn't find nuthin'
  }

  return how_many_bytes_myFunction_put_in_the_buffer;
}

void myCaller(void)
{
  void* someBytes = malloc(1000);

  size_t result = myFunction(someBytes, 1000);

  // do something amazing

  free(someBytes);
} 
```

# magento - Magento - 从预调度观察者转发到不同的控制器动作

> ID：11592948
> 
> 赞同：7
> 
> 时间：2012-07-21T14:19:34.767
> 
> 标签：magento

是否可以根据我可以在控制器预调度事件中检查的特定条件转发到不同的操作（在同一控制器内）？

例如 - 即将运行的动作是索引

如果我为预调度事件创建一个观察者，如果某个条件为真，我想运行一个不同的动作：myAction 而不是 indexAction

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T16:23:58.410

您可以在预调度挂钩中执行以下方法。

```
public function yourMethod($observer)
{
    if ($condition) {
        $request = Mage::app()->getRequest();
        $request->initForward()
            ->setControllerName('controllername')
            ->setModuleName('modulename')
            ->setActionName('actionname')
            ->setDispatched(false);

        return false;
    }
} 
```

但是，如果您正在使用自定义控制器，为什么不总是将其路由到例如 indexAction()？并在该方法中找出您想要 _forward() 到下一个的位置，就像 Kalpesh 在他的回答中已经提到的那样？性能方面没有区别。

# c# - 应用程序使用 PLINQ AsParallel() 挂起。LINQ 没有问题

> ID：11592950
> 
> 赞同：6
> 
> 时间：2012-07-21T14:19:50.170
> 
> 标签：c#, linq, plinq

我是 LINQ 和 PLINQ 的新手，我正在构建一个项目来测试它们。

存根：

```
class Stub
{
    private Boolean mytf;
    public Stub()
    {
        Random generator = new Random();
        if (generator.NextDouble() < 0.5)
        {
            mytf = false;
        }
        else mytf = true;
    }

    public Boolean tf
    {
        get
        {
            return mytf;
        }
    }
} 
```

存根集合：

```
class StubCollection : IEnumerable
{
    Stub[] stubs;

    public StubCollection(int n)
    {
        stubs = new Stub[n];
        for (int i = 0; i < n; i++)
        {
            stubs[i] = new Stub();
        }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return new StubIterator(this);
    }
    public class StubIterator : IEnumerator
    {
        private StubCollection sc;
        private int index = -1;
        public StubIterator(StubCollection _sc)
        {
            sc = _sc;
        }
        public bool MoveNext()
        {
            index++;
            if (index < sc.stubs.Length)
            {
                return true;
            }
            else
            {
                index = -1;
                return false;
            }
        }
        public object Current
        {
            get
            {
                if (index <= -1)
                {
                    throw new InvalidOperationException();
                }
                return sc.stubs[index];
            }
        }
        public void Reset()
        {
            index = -1;
        }
    }
} 
```

然后我有一些方法来迭代存根集合并计算有多少存根将布尔值设置为真：

前锋：

```
Stopwatch sw = new Stopwatch();
Int32 n = 0;
sw.Start();
foreach (Stub s in sc)
  if (s.tf) n++;
sw.Stop();
MessageBox.Show("n:" + n.ToString() + " timer:" + sw.ElapsedMilliseconds.ToString()); 
```

有用

林克：

```
Stopwatch sw = new Stopwatch();
Int32 n = 0;
sw.Start();
var trueStubs = from Stub s in sc
                where s.tf
                select s;
n = trueStubs.Count();
sw.Stop();
MessageBox.Show("n:" + n.ToString() + " timer:" + sw.ElapsedMilliseconds.ToString()); 
```

它有效（比 foreach 慢一点）

普林克：

```
Stopwatch sw = new Stopwatch();
Int32 n = 0;
sw.Start();
var trueStubs = from Stub s in sc.AsParallel()
                where s.tf
                select s;
n = trueStubs.Count();
sw.Stop();
MessageBox.Show("n:" + n.ToString() + " timer:" + sw.ElapsedMilliseconds.ToString()); 
```

100% CPU，没有结果

为什么？唯一的区别是 AsParallel()

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-21T14:37:06.157

问题出在您的 IEnumerator 实现中：

```
 public bool MoveNext()
    {
        index++;

        if (index < sc.stubs.Length)
        {
            return true;
        }
        else
        {
            index = -1;
            return false;
        }
    } 
```

我不确定为什么 PLINQ 会这样做，但即使到达集合的末尾，也会多次调用 MoveNext。问题是您的实现存在缺陷：在到达集合末尾后再次调用 MoveNext 时，索引将重置为 -1，因此枚举将重新开始。这就是为什么你陷入无限循环的原因。只需删除该`index = -1`行（并且可能重新考虑该方法以在到达枚举结束时停止增加索引）并且它会起作用。

# c - OSX 10.5.8 下的未定义符号错误

> ID：11592951
> 
> 赞同：0
> 
> 时间：2012-07-21T14:19:54.220
> 
> 标签：c, xcode, macos, gcc

我尝试在 OSX 10.5.8 下使用 CFLocaleCopyCurrent 但出现奇怪的错误：

```
#include <CoreFoundation/CoreFoundation.h>

int main(int argc, char **argv){
    setlocale(LC_ALL, "");
    CFLocaleRef loc = CFLocaleCopyCurrent();
    return 0;
}

Undefined symbols:
"_CFLocaleCopyCurrent", referenced from: _main in ccn51XwH.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:38:30.163

尝试`/usr/bin/gcc -framework Foundation test.c`

# c# - 在asp.net中输入文本框后如何将文本模式更改为密码模式

> ID：11592955
> 
> 赞同：0
> 
> 时间：2012-07-21T14:20:24.427
> 
> 标签：c#, asp.net

我在 ASP.NET 中有一个表格，如下所示：-

```
Number(textbox)
Name(textbox)
Age(textbox)
sex(textbox)
Marks(textbox)
Class(textbox)
Re enter number(textbox)
Save(button) 
```

在输入数字后的这个字段中，当我去文本模式的文本框数据的下一个字段数字字段时，应该转换为密码模式。输入“重新输入号码”后，它应该检查“号码”和“重新输入号码”是否匹配，并应该显示号码匹配或不匹配的消息，然后保存数据。

请问很紧急。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T14:28:53.863

你可能想在这里做一些javascript，

```
txt1.Attributes.Add("onfocus", "this.type='text';");
txt1.Attributes.Add("onblur", "this.type='password';"); 
```

或者你可以用 jQuery 做同样的事情（而且更干净一点），但是为你想要进行切换的对象设置一个 CSS 类，然后添加一个

```
$(".hideContentOnBlur").blur(function() {
  this.type='password';
});

$(".hideContentOnBlur").focus(function() {
  this.type='text';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T14:22:40.310

将文本框的文本模式设置为密码。

像这样：

```
<asp:TextBox ID="TextBox1" runat="server" TextMode="Password"></asp:TextBox> 
```

# rabbitmq - RabbitMQ 中的发送方和接收方对

> ID：11592959
> 
> 赞同：1
> 
> 时间：2012-07-21T14:21:27.783
> 
> 标签：rabbitmq

我试图了解带有发送方和接收方程序的 RabbitMQ 服务器。现在，当发送者发送一条消息并且接收者会收到相同的消息时，整个设置运行良好。

但是，当我发送两条消息（通过两次运行发送方）并运行两次接收程序时，我只收到第一条消息。

发件人

```
 ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection();
        Channel channel = connection.createChannel();

        channel.queueDeclare(QUEUE_NAME, true, false, false, null);
        String message = "He12!";
        channel.basicPublish("", QUEUE_NAME, null, message.getBytes());
        System.out.println("Sent "+message);
        channel.close();
        connection.close(); 
```

接收者

```
 ConnectionFactory factory = new ConnectionFactory();
    factory.setHost("localhost");
    Connection connection = factory.newConnection();
    Channel channel = connection.createChannel();

    channel.queueDeclare(QUEUE_NAME, true, false, false, null);

    QueueingConsumer consumer = new QueueingConsumer(channel);
    channel.basicConsume(QUEUE_NAME, true, consumer);
    QueueingConsumer.Delivery delivery = consumer.nextDelivery();
    /*channel.basicCancel(consumer.getConsumerTag());   */

    String message;
     if (delivery != null) {
        message = new String(delivery.getBody());
        System.out.println("Reciever .."+message);

    }

    channel.close();
    connection.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T07:52:38.773

当我用 no_Ack = false 修改接收器并调用 BasicAck 时，这个问题就解决了。感谢 @robthewolf 和 @Card(by twitter) 的帮助。

PFB 现在是修改后的接收器。

```
 ConnectionFactory factory = new ConnectionFactory();
    factory.setHost("localhost");
    Connection connection = factory.newConnection();
    Channel channel = connection.createChannel();

    channel.queueDeclare(QUEUE_NAME, true, false, false, null);

    QueueingConsumer consumer = new QueueingConsumer(channel);
    channel.basicConsume(QUEUE_NAME, false, consumer);
    QueueingConsumer.Delivery delivery = consumer.nextDelivery(10);
    /*channel.basicCancel(consumer.getConsumerTag());   */

    String message = null;

     if (delivery != null) {
        message = new String(delivery.getBody());
        System.out.println("Reciever .."+message);
        channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
    }

    channel.close();
    connection.close();
    return message; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T11:47:11.873

你试过没有

```
channel.basicCancel(consumer.getConsumerTag()); 
```

线？

此外，做这样的事情会更好：

```
while(true){
  QueueingConsumer.Delivery delivery = consumer.nextDelivery();
  String message;
  if (delivery != null) {
    message = new String(delivery.getBody());
    System.out.println("Reciever .."+message);
  }
} 
```

这样您就只有一个消费者在一个循环中消费所有消息。这只是一个示例，我只是有一种方法可以干净地跳出循环，而不必使用 ctrl-c。

# c++ - 数组中的结构中的c ++成员函数指针给出编译错误

> ID：11592960
> 
> 赞同：0
> 
> 时间：2012-07-21T14:21:31.073
> 
> 标签：c++, arrays, function-pointers

我有这个定义结构的代码（传入的是简单结构）

```
#define FUNCS_ARRAY 3

    struct func
    {
        void (AA::*f) (incoming *);
        int arg_length;
    };

    func funcs[FUNCS_ARRAY]; 
```

然后在 AA 类主体中，我像这样定义指针数组：

```
funcs[0] = { &AA::func1, 4 };
funcs[1] = { &AA::func2, 10 };
funcs[2] = { &AA::func2, 4 }; 
```

当我尝试通过数组调用其中一个函数时，我得到编译错误：
如果我这样调用它（p 传入）：

```
(*funcs[p->req]->*f)(p); 
```

我收到此错误：

```
error: no match for ‘operator*’ in ‘*((AA*)this)->AA::funcs[((int)p->AA::incoming::req)]’ 
```

当我尝试这样称呼它时：
(funcs[p->req]->*f)(p);
我越来越 ：

```
error: ‘f’ was not declared in this scope 
```

当我尝试这个时：

```
 (funcs[p->req].f)(p);

error: must use ‘.*’ or ‘->*’ to call pointer-to-member function in ‘((AA*)this)->AA::funcs[((int)p->AA::incoming::req)].AA::func::f (...)’, e.g. ‘(... ->* ((AA*)this)->AA::funcs[((int)p->AA::incoming::req)].AA::func::f) (...)’ 
```

访问 struct 中的函数指针的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T14:35:54.530

要通过指向成员函数的指针调用成员函数，您需要该指针和相应类的实例。

在您的情况下，指向成员的指针是`funcs[i].f`，我假设您有一个`AA`被调用的实例`aa`。然后你可以像这样调用那个函数：

```
(aa.*(funcs[p->req].f))(p); 
```

如果`aa`是指向 AA 的指针，则语法为：

```
(aa->*(funcs[p->req].f))(p); 
```

如果您从 的（非静态）成员函数中调用`AA`，请尝试：

```
(this->*(funcs[p->req].f))(p); 
```

# haskell - 扬帕粒子场

> ID：11592962
> 
> 赞同：2
> 
> 时间：2012-07-21T14:21:39.047
> 
> 标签：haskell, particle-system, yampa

我想在 Yampa 有一个粒子场。单个粒子应该只是沿直线移动，但取决于给定的角度。该角度和移动速度会根据玩家的速度和角度而变化。我不知道如何更好地解释，我正在开发类似[这个游戏](http://www.indiedb.com/games/startrade)的东西。

无论如何，我现在的代码如下所示：

```
star :: (Float, Float) -> SF (Float, Float) (Float, Float)
star p0 = proc (vel, a) -> do
    rec
        v <- integral -< vel *^ (cos a, sin a)
        p <- clampS ^<< (p0 ^+^) ^<< integral -< v ^+^ p
    returnA -< p

clampS s@(x, y) | x > 1 = (x-2, y)
                | x < (-1) = (x+2, y)
                | y > 1 = (x, y-2)
                | y < (-1) = (x, y+2)
                | otherwise = s 
```

`vel`是当前速度，`a`是当前角度。但是粒子以奇怪的方式移动。（完整代码[在这里](https://github.com/scan/freetrade.hs)

不幸的是，我确信我的想法是错误的，但我还没有弄清楚如何做到这一点，尤其是如何`integral`正确使用。

也许有人可以给我一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:58:56.130

在@martingw 的一点提示下，我能够做到这一点，这正是我一直在寻找的：

```
star :: (Float, Float) -> SF (Float, Float) (Float, Float)
star p0 = proc (a, vel) -> do
    let (vx,vy)  = vel *^ (cos a, sin a)
    p <- clampS ^<< (p0 ^+^) ^<< integral -< (-vx,vy)
    returnA -< p

clampS (x, y) = (x `fMod` 800, y `fMod` 600) 
```

# javascript - 从 onBlur 事件中获取新聚焦的元素（如果有）。

> ID：11592966
> 
> 赞同：9
> 
> 时间：2012-07-21T14:22:14.023
> 
> 标签：javascript, jquery

我需要在执行 onBlur 处理程序时获取新聚焦的元素（如果有）。

我怎样才能做到这一点？

我能想到一些糟糕的解决方案，但没有什么不涉及 setTimeout。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-21T14:25:24.973

参考它：

[`document.activeElement`](https://developer.mozilla.org/en/DOM/document.activeElement)

不幸的是，当模糊事件发生时，新元素没有聚焦，所以这将报告正文。因此，您将不得不使用标志和焦点事件来破解它，或者使用 setTimeout。

```
$("input").blur(function() {
    setTimeout(function() {
        console.log(document.activeElement);
    }, 1);
});​ 
```

工作正常。

* * *

没有 setTimeout，你可以使用这个：

[http://jsfiddle.net/RKtdm/](http://jsfiddle.net/RKtdm/)

```
(function() {
    var blurred = false,
        testIs = $([document.body, document, document.documentElement]);
    //Don't customize this, especially "focusIN" should NOT be changed to "focus"
    $(document).on("focusin", function() {

        if (blurred) {
            var elem = document.activeElement;

            blurred = false;

            if (!$(elem).is(testIs)) {
                doSomethingWith(elem); //If we reached here, then we have what you need.
            }

        }

    });
    //This is customizable to an extent, set your selectors up here and set blurred = true in the function
    $("input").blur(function() {
        blurred = true;
    });

})();​

//Your custom handler
function doSomethingWith(elem) {
     console.log(elem);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-03T16:01:07.260

为什么不使用 focusout 事件？[https://developer.mozilla.org/en-US/docs/Web/Events/focusout](https://developer.mozilla.org/en-US/docs/Web/Events/focusout)

relatedTarget 属性将为您提供正在接收焦点的元素。

# windows - 使用 Inno Setup 添加卸载信息

> ID：11592972
> 
> 赞同：8
> 
> 时间：2012-07-21T14:23:52.587
> 
> 标签：windows, installation, inno-setup, addremoveprograms

我正在使用 Inno Setup 为我的程序创建安装程序，但我希望能够添加一个图标并更改控制面板中显示的一些信息（添加/删除程序）。

我知道 Inno Setup 添加了一个注册表项来首先列出程序，所以我想知道是否可以以任何方式扩展它，以便至少我的图标显示在列表中！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-21T15:31:00.140

要更改“添加/删除程序”控制面板小程序程序列表中显示的图标，请指定该 部分[`UninstallDisplayIcon`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_uninstalldisplayicon)中的指令[`[Setup]`](http://www.jrsoftware.org/ishelp/index.php?topic=setupsection)。

```
[Setup]
UninstallDisplayIcon={app}\Application.exe 
```

如果要在“添加/删除程序控制面板”小程序中为程序条目指定自定义名称，则还要在该部分中指定[`UninstallDisplayName`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_uninstalldisplayname)指令。[`[Setup]`](http://www.jrsoftware.org/ishelp/index.php?topic=setupsection)

```
[Setup]
UninstallDisplayName=Custom name shown in Add/Remove Programs applet 
```

# image - 非矩形图像

> ID：11592976
> 
> 赞同：1
> 
> 时间：2012-07-21T14:25:36.410
> 
> 标签：image, image-processing

我不确定这个问题是否适合stackoverflow。但是在这里，我想要一个图像中主要对象的形状和大小严格的图像，不应该有任何白色或黑色背景，或者背景应该是透明的，这样真正的背景应该是可见的。我该怎么做？可以使用 Photoshop 吗？我想使用这些图像在 Flash 中创建幻灯片。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-21T14:28:25.597

使用透明图像并将其保存为例如 png

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-21T14:28:26.407

是的，您可以通过在 Photoshop 中创建具有透明背景的图像来实现。

# sql-server - 性能差异的原因是什么？

> ID：11592978
> 
> 赞同：0
> 
> 时间：2012-07-21T14:26:26.080
> 
> 标签：sql-server, tsql

我正在创建一个报告，为此我编写了 2 种不同类型的查询。但是我看到这两种方法之间存在巨大的性能差异。可能是什么原因？我的主表（假设表 A）包含一个日期列。我正在根据日期过滤数据。大约 10 个表连接我与这张表有关。

第一种方法：

```
select A.id,A1.name,...
from table A
join A1
join A2 ....A10
where A.Cdate >= @date
and A.Cdate <= @date 
```

第二种方法：

```
With CTE as(select A.id from A where A.Cdate>=@date and A.Cdate<=@date)
select CTE.id, A1.name,.... from CTE join A1 join A2....A10 
```

这里第二种方法很快。是什么原因？在第一种方法中，仅 A 的过滤数据将与其他表数据连接，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:51:36.040

执行计划肯定会告诉我们，但如果 CTE 能够在连接之前过滤掉很多行，则可能选择了更优化的连接方法（例如合并而不是哈希）。SQL 不*应该*以这种方式工作——理论上这两者应该以相同的方式执行。但在实践中，我们发现 SQL Server 的优化器并不完美，并且可以根据各种因素以不同的方式进行调整，包括统计信息、选择性、并行性、缓存中该计划的预先存在版本等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:52:38.730

一个建议。你应该能够自己回答这个问题，因为你有两个计划。你比较过这两个计划吗？那些相似吗？另外，当性能很差时，您是什么意思，是时间还是 CPU 时间或 IO，或者您比较了什么？

因此，在您发布任何问题之前，您应该检查这些计数器，我相信他们会在大多数情况下提供某种答案。

CTE 用于管理代码，它不会自动提高查询的性能。CTE 将由优化器扩展，因此在您的情况下，这两者在转换或扩展后应该具有相同的查询，因此具有相似的计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T14:40:08.277

CTE 基本上是用于处理更复杂的代码（无论是递归还是具有子查询），但您需要检查执行计划以改进 2 个不同的查询。您可以在以下位置检查 CTE 的使用：http: [//msdn.microsoft.com/en-us/library/ms190766 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx)

请注意，在许多情况下，临时表的性能也比 CTE 更好，因此您也应该尝试使用临时表。
参考：[http ://social.msdn.microsoft.com/Forums/en/transactsql/thread/d040d19d-016e-4a21-bf44-a0359fb3c7fb](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/d040d19d-016e-4a21-bf44-a0359fb3c7fb)

# asp.net - 每个用户或全局（所有用户）的跨服务器内存数据（作为变量）

> ID：11592979
> 
> 赞同：0
> 
> 时间：2012-07-21T14:26:32.087
> 
> 标签：asp.net, mysql, caching, amazon-web-services

我的问题是关于跨 Amazon EC2 上的多个服务器快速访问的聚合数据。在 ASP.NET 应用程序中，我可能会将这些数据存储在 Application["somevar"] 变量中，以便所有用户都可以快速（在内存中）访问它。

当我希望收集聚合数据并且其值在所有服务器上相等时，问题就开始了。如果我选择部署两台服务器，用户可能每次都将数据传输到不同的服务器（服务器位于负载均衡器或 ElasticBean 下），例如，如果我计算用户请求页面的次数，则每台服务器的应用程序变量将具有不同的值

例如：

服务器 1：

应用程序[“counter1”] = 120

服务器 2：

应用程序[“counter1”] = 130

我想要的是一个在所有服务器上都相同的变量。我想要应用程序类变量中的数据的原因是我想要内存中的数据以便快速访问，然后我可能会将该数据写入数据库。

我想知道的是我怎样才能做到这一点。我虽然关于使用 Amazon ElasticCache，所以即使我在负载均衡器下有 10 个服务器，我也可以通过 API 访问 ElasticCache 变量，我从哪个服务器访问 memcache 变量并不重要，它会获取/设置相同的变量，因此我可以实现保持跨服务器全局变量的目标。

我想知道这是否是一种好的做法，以及哪里有更好的方法来实现这种功能。

我正在用 ASP.NET C# 和 MySQL 开发我的应用程序。还要考虑到一些聚合的数据要写入数据库，我这样做是为了防止同时写入很多，例如达到20次写入后再写入数据数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T16:57:13.503

只是为了澄清一些事情。首先让我们确保我们了解如何使用 ElasticCache。ElasticCache 的 API 没有为我们提供缓存集群上的任何 CRUD 操作，来自 Amazon 的 API 严格用于管理服务器和配置。您需要使用 .NET 的 memcached 库连接到集群。使用像 memcached 这样的缓存是解决第一个问题的好方法。它将在分布式环境中轻松快速地存储简单的应用程序变量。即使对于较小的应用程序，使用缓存通常也是一种很好的做法。

我不确定您有多少用户或您希望有多少用户，但我在多年的编程中学到的一件事是过度优化通常是一个坏主意。过度优化是指您在真正需要之前开始优化您的代码。以您提出的优化为例。我们知道，在数据库上写 1 次比写 20 次要快，当然一般来说。但是，除非您的数据库是应用程序中实现此类功能的瓶颈，否则您会引入大量复杂性而不会立即获得好处。如果 memcached 集群服务器崩溃（它会崩溃），那么等待写入数据库的数据就会丢失。如果您确实有很多用户，那么您必须开始考虑并发性和对 memcached 项的锁定。

在不了解您的应用程序的更多信息的情况下，我无法提出任何真正的建议，只能说确保在您花时间增加应用程序的复杂性之前需要进行优化。

# c++ - 用于导出 3D 骨骼动画的 C++ 库/文件格式？

> ID：11592982
> 
> 赞同：1
> 
> 时间：2012-07-21T14:26:53.990
> 
> 标签：c++, animation, 3d, file-format

我正在编写一个用于创建 3D 骨骼动画的应用程序。我目前正在使用 Blender 进行建模/装配、导出、然后使用 OGRE 加载和渲染模型。但是在出口方面我被困住了。

我希望能够将完成的动画模型/场景导出为某种已知的文件格式，以便可以将其导入回 Blender 进行渲染。那么让动画骨架/骨架回到 Blender 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T09:31:47.767

我认为 COLLADA 是文件格式的最佳选择。我不确定图书馆。FCOLLADA 已经死了，我不确定它是最新的。最新版本的[Assimp](http://assimp.sourceforge.net/index.html)添加了 COLLADA 导出功能，但遗憾的是还没有用于动画。有[OpenCOLLADA](http://opencollada.org/)，似乎没有很好的文档记录，但是有两个插件可能比任何教程都更好。最后是[COLLADA DOM](http://sourceforge.net/projects/collada-dom/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T14:30:25.720

你听说过FBX吗？它被广泛用作几何和动画的交换格式。它支持适合您的骨骼动画的骨骼/关节。

维基百科：[http](http://en.wikipedia.org/wiki/FBX)
://en.wikipedia.org/wiki/FBX Autodesk 页面：[http ://usa.autodesk.com/fbx/](http://usa.autodesk.com/fbx/)

# json - 解析 Reddit 的 JSON 的问题

> ID：11592984
> 
> 赞同：1
> 
> 时间：2012-07-21T14:27:06.207
> 
> 标签：json, perl, reddit

我正在研究一个使用 JSON 模块解析 reddit 的 JSON 的 perl 脚本。

但是我确实有一个对 perl 和 json 都非常陌生的问题。

我成功地解析了首页和子版块，但评论的结构不同，我不知道如何访问我需要的数据。

这是成功找到首页和子版块的“数据”哈希的代码：

```
foreach my $children(@{$json_text->{"data"}->{"children"}}) #For values of children.
{
    my $data = $children->{"data"}; #accessing each data hash.
    my %phsh = ();                  #my hash to collect and print.

            $phsh{author} = $data->{"author"};#Here I get the "author" value from "data"
*Etc.... 
```

[这成功地从http://www.reddit.com/.json](http://www.reddit.com/.json)获得了我需要的东西

但是当我转到评论的 json 时，[例如这个](http://www.reddit.com/r/funny/comments/wx3n5/caption_win.json)，它有不同的格式，我不知道如何解析它。如果我尝试与解析器崩溃之前相同的操作，则说它不是 HASH 引用。

所以我的问题是：如何访问第二个 JSON 中的“孩子”？我需要同时获取帖子的数据和评论的数据。有人可以帮忙吗？

提前致谢！（我知道这可能很明显，但我的睡眠很少 XD）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T15:48:23.077

您需要查看 JSON 数据或转储解码的数据以查看它采用什么形式。例如，评论数据是顶层的数组。

这是一些打印`body`所有顶级注释字段的代码。请注意，评论可能在其`replies`字段中有一组回复，并且每个回复也可能依次有回复。

根据您想要执行的操作，您可能需要通过检查[`ref`操作符](http://perldoc.perl.org/functions/ref.html)返回的值来检查引用是对数组还是散列。

```
use strict;
use warnings;

binmode STDOUT, ':utf8';

use JSON;
use LWP;
use Data::Dump;

my $ua = LWP::UserAgent->new;
my $resp = $ua->get('http://www.reddit.com/r/funny/comments/wx3n5/caption_win.json');
die $resp->status_line unless $resp->is_success;

my $json = $resp->decoded_content;
my $data = decode_json($json);

die "Error: $data->{error}" if ref $data eq 'HASH' and exists $data->{error};

dd $data->[1]{data}{children}[0];
print "\n\n";

my $children = $data->[1]{data}{children};
print scalar @$children, " comments:\n\n";

for my $child (@$children) {
  print $child->{data}{body}, "\n";
} 
```

# c++ - C++ 指向类

> ID：11592988
> 
> 赞同：2
> 
> 时间：2012-07-21T14:27:36.080
> 
> 标签：c++, class, pointers, methods, operators

我现在正在阅读一本 C++ 书籍，我对指向类感到有些困惑。

本书前面的示例以这种方式使用类和方法：

```
Calculator myCalc;
myCalc.launch();

while( myCalc.run() ){
    myCalc.readInput();
    myCalc.writeOutput();
} 
```

但是，现在它改为这样做：

```
Calculator* myCalc = new Calculator;
myCalc -> launch();

while( myCalc -> run() ){
    myCalc -> readInput();
    myCalc -> writeOutput();
} 
```

而且我似乎无法在其中找到关于为什么这样做的解释。

为什么我要以这种方式指向一个类，而不是使用标准的方式呢？

有什么区别？什么情况下其中一种更可取？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-21T14:35:03.273

首先，您指向的不是类，而是类的一个*实例*，也称为*对象*。（在 C++ 中不能指向类，如果你问我这是它的缺陷之一）。

不同之处在于分配对象的位置。当你在做：

```
Calculator myCalc; 
```

整个对象是在[堆栈](https://en.wikipedia.org/wiki/Stack-based_memory_allocation)上创建的。堆栈是局部变量、嵌套调用等的存储，通常限制为 1 MB 或更低。另一方面，堆栈上的分配更快，因为不涉及内存管理器调用。

当你这样做时：

```
Calculator *myCalc; 
```

除了在堆栈上分配了一个[指针](https://en.wikipedia.org/wiki/Pointer_%28computer_programming%29)外，没有发生太多事情。指针的大小通常为 4 或 8 字节（32 位与 64 位架构），并且只保存一个内存地址。您必须分配一个对象并通过执行以下操作使指针指向它：

```
myCalc = new Calculator; 
```

也可以像您的示例中所示组合成一行。在这里，对象分配在[堆上](https://en.wikipedia.org/wiki/Dynamic_memory_allocation#Dynamic_memory_allocation)，它大约与您的物理内存一样大（不考虑交换空间和架构限制），因此您可以在那里存储更多数据。但它更慢，因为内存管理器需要启动并在堆上为您的对象找到一个备用位置，甚至需要从操作系统获取更多内存。现在指针`myCalc`包含了对象的内存地址，所以它可以与`*`和`->`运算符一起使用。

此外，您不能在其范围之外传递指向*堆栈*上对象的指针或引用，因为堆栈将在范围结束时（例如，在函数结束时）被清理，因此对象变得不可用。

哦，差点忘了提。堆上的对象不会自动销毁，因此您必须像这样手动删除它们*：

```
delete myCalc; 
```

总结一下：对于不会离开其范围的小而短的对象，您可以使用基于堆栈的分配，而对于较大的、长寿命的对象，堆通常是更好的选择。

* * *

*：嗯，理想情况下，不是那样的。使用智能指针，例如[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T14:29:58.070

两者都是标准的。一个并不优于另一个。

第一个是您在狭窄范围内声明和使用的典型局部变量。

指针方法允许您动态分配内存并将其分配给指针类型；这就是“星”符号的含义。这些可以从方法中传递出来或分配给成员变量，在方法退出后继续存在。

但是你必须知道，当你处理完指针所指的对象时，你也有责任清理该内存。如果不这样做，很多人最终会因“内存泄漏”而耗尽长时间运行的应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T14:32:07.310

当您的变量是类的实例或引用时，您使用点 (.)，而如果您的变量是指向类实例的指针，则使用 ->。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T14:35:04.313

它们都是 C++ 标准的一部分，但有一个核心区别。在第一种方式中，您的对象存在于堆栈中（这是存储函数和局部变量的地方，并在它们不再使用后被删除）。当您将变量类型声明为指针时，您只是将指针存储在堆栈上，而对象本身正在堆上。

而当您使用堆栈局部变量来分配内存时，它会由 C++ 自动处理。当它在堆上时，您必须使用 获取内存`new`并使用`delete`.

虽然在堆栈示例中，您的代码用于`.`调用方法、调用指针上的方法，但 C++ 提供了一个快捷方式：`->`，相当于`*obj.method()`.

请记住，当您使用 时`new`，请始终[使用`delete`](https://stackoverflow.com/questions/11383401/can-a-memory-block-allocated-by-using-operator-new-malloc-persist-beyond-end-of/11383451#11383451)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-21T14:38:16.660

一种用途是变量`myCalc`的生命周期很长。您可以在需要时创建它 if with`new`并在完成时删除它`delete`。这样您就不必担心在不需要它并且只会占用空间的时候随身携带它。或者您可以在需要时随意重新初始化它等。

或者当你有一个非常大的类时，通常的做法是`new`在堆而不是堆栈上分配它。这是堆栈空间稀缺且堆更大的日子的遗留物，因此堆空间更便宜。

或者，当然，最常见的用途是分配动态数组。`myCalc = new Calculator[x]`; 创建`x`新的计算器。如果您事先不知道有多大，则无法使用静态变量执行此操作`x`；你要创建多少个对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-21T14:45:01.653

除了符号/语法的明显差异。将数据传递给函数时，指针通常很有用。

```
void myFunc(Calculator *c) {
    ...
} 
```

通常优先于

```
void myFunc(Calculator c) {
    ...
} 
```

因为第二个需要复制计算器。指针仅包含指向的位置，因此它仅指向内存中的另一个位置，而不是包含数据本身。另一个很好的用途是字符串，想象读取一个文本文件并调用函数来处理文本，如果它不是一个指针，每个函数都会复制一个字符串。指针是 4 字节或 8 字节，具体取决于机器架构，因此在将指针传递给函数时可以节省大量时间和内存。

在某些情况下，使用副本可能会更好。也许你只是想像这样返回一个改变的版本

```
Calculator myFunc(Calculator c) {
    ...
} 
```

关于指针的重要事情之一是“new”关键字。它不是创建指针的唯一方法，但它是 c++ 最简单的方法。您还应该能够使用一个名为 malloc() 的函数，但这更适用于 structs 和 c IMO，但我已经看到了这两种方法。

说到 C。指针也可能适用于数组。我认为您仍然只能在 C++ 中的编译时声明数组的大小，但我可能弄错了。你可以使用以下我相信

```
Calculator *c;
....
Calculator d = c[index]; 
```

所以现在你有一个数组可以使它变得非常模糊 IMO。

我认为这几乎涵盖了我所知道的所有内容，并且在提供的示例中，我认为您提供的两个片段之间没有任何区别。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-21T14:46:23.597

首先，您不是指向一个类，而是指向该类的一个实例（或对象）。在其他一些语言中，类实际上也是对象 :-)

例子就是这样，一个例子。很可能你不会在那里使用指针。

现在，什么是指针？指针只是一个指向真实事物的小东西。就像门铃上的名牌一样——它显示了你的名字，但实际上并不是你。但是，因为不是您，您实际上可以在不同位置有多个带有您的名字的按钮。

这是使用指针的原因之一：如果你有一个对象，但你想在不同的地方保存指向该对象的指针。我的意思是，现实世界在各个地方都有大量指向您的“指针”；不难想象程序可能在其数据中需要类似的东西。

指针还用于避免复制对象，这可能是一项昂贵的操作。传递指向函数的指针要便宜得多。另外，它允许函数修改对象（请注意，从技术上讲，C++“引用”也是指针，只是不太明显，而且受到更多限制）。

此外，使用“new”分配的对象将一直存在，直到使用“delete”解除分配。因此，它们不依赖于作用域——它们不会在它们周围的功能完成时消失，它们只会在它们被告知迷路时消失。

另外，您将如何制作“水果袋”？您分配一个“袋子”对象。然后分配一个“水果”对象，并在袋子对象内设置一个指针指向水果对象，表明袋子应该包含该水果。水果也可能得到一个指向袋子对象的指针，这样处理水果的代码也可以到达袋子。您还可以分配另一个“水果”对象，并建立一个指针链：每个“水果”可以有一个指向“下一个”水果的“下一个”指针，因此您可以将任意数量的水果放入袋子中：包中包含指向第一个水果的指针，每个水果包含指向另一个水果的指针。所以你得到了一整串的水果。（这是一个简单的“容器”；

想出何时或为什么使用指针的描述实际上并不是那么简单。通常只会在某些情况下您需要它们。当您遇到这种情况时，更容易看到它们的用处。就像“伞为什么有用”——一旦你踏入外面的倾盆大雨，伞的用处就显而易见了。

# mysql - Mysql 优化：有人可以解释为什么一个查询比内部连接运行得更快吗

> ID：11592990
> 
> 赞同：0
> 
> 时间：2012-07-21T14:28:11.430
> 
> 标签：mysql

所以有两个查询。为什么第一个比第二个运行得快得多？如何优化我的内部连接以与第一个连接一样快？

总记录超过 4 000 000

idTerminals 已编入索引

```
 select (select name 
          from terminals 
          where terminals.idTerminals = AnalyzeProfitResults.idTerminals),
        currency, 
        count(*) 
from AnalyzeProfitResults
group by AnalyzeProfitResults.idTerminals,currency;

select name,
        currency, 
        count(*) 
from AnalyzeProfitResults
inner join terminals on terminals.idTerminals = AnalyzeProfitResults.idTerminals
group by AnalyzeProfitResults.idTerminals,currency; 
```

结果是一样的：

```
 name,currency,count(*)
"Buy or sell",EURUSD,235105
"Buy or sell",GBPUSD,14515
"Buy or sell",USDJPY,235298
"very strict",AUDJPY,234787
"very strict",AUDUSD,235298
"very strict",CHFJPY,235298
"very strict",EURJPY,235298
"very strict",EURUSD,235298
"very strict",GBPJPY,235298
"very strict",GBPUSD,235298
"very strict",NZDUSD,235298
"very strict",USDCHF,235298
"very strict",USDJPY,235298
",normal",AUDJPY,235298
",normal",AUDUSD,36391
",normal",EURUSD,234985
",normal",GBPJPY,117649
",normal",NZDUSD,198552
",normal",USDCHF,235298
",normal",USDJPY,235298 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T17:50:09.133

我想在后一个查询中，MySQL 连接`AnalyzeProfitResults`并为操作`terminals`生成`size(AnalyzeProfitResults) * size(terminals)`行`group by`。有 400 万行`AnalyzeProfitResults`，即使`terminals`只包含少量记录，也有很多行。在前一种情况下，MySQL 对 400 万行执行分组，产生您作为结果提供的 20 行，然后才对 20 行中的每一行执行子查询（甚至可能在内部重写为连接，这将是快点）。

**编辑：** 这是第一个带有显式连接的查询：

```
select terminals.name, APR_aggregated.*
from terminals join (
    select APR.currency, count(*)
    from AnalyzeProfitResults as APR
    group by APR.idTerminals, APR.currency
) as APR_aggregated on terminals.idTerminals = APR_aggregated.idTerminals 
```

# javascript - 您能帮助解释 d3 .....packages.root(classes) 中的以下构造吗？

> ID：11592992
> 
> 赞同：1
> 
> 时间：2012-07-21T14:28:21.133
> 
> 标签：javascript, charts, d3.js

你能在d3中解释以下内容吗？

```
var nodes = cluster.nodes(packages.root(classes)),
    links = packages.imports(nodes); 
```

我似乎无法找到关于`packages.root`and的正确信息`packages.imports`。我想我知道代码在做什么。

这来自 d3 示例中的 bundle-radial.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T11:06:02.970

该`packages`对象在[packages.js](https://github.com/mbostock/d3/blob/master/examples/bundle/packages.js)中定义，每个捆绑示例 html 文件都包含在它们各自的 .js 文件之前`bundle-X.js`。

# c# - 在 Win32 表单应用程序中将项目添加到标题栏？

> ID：11592997
> 
> 赞同：0
> 
> 时间：2012-07-21T14:28:51.400
> 
> 标签：c#, visual-studio-2010

如何将工具箱中的项目添加到 Visual Studio 2010 窗口的标题栏中？我目前正在使用 C# Win32 表单应用程序。我想要的一个主要示例是 Google Chrome，以及它的标签如何集成到标题栏中。![标题栏中的选项卡](../Images/f3e15b765f0e793bab746c12549db8d5.png)

如何在 Visual Studio 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T14:32:32.900

有一篇关于[如何](http://www.dotnet247.com/247reference/msgs/41/207281.aspx)在 Win Forms 中执行此操作的旧文章。

或者您可以隐藏系统标题栏并创建自己的（只是一个行为方式相同的控件+您需要的）:)

# php - 编写一个 php 输出用户 id 为 2 的好友的查询结果

> ID：11592998
> 
> 赞同：0
> 
> 时间：2012-07-21T14:28:52.150
> 
> 标签：php, mysql

我有两个列表朋友表，其中包含彼此朋友的用户的重新编码。我想得到一个列表谁是特定用户的朋友。为此，我编写了一个这样的 sql 查询并得到了结果..

```
SELECT * 
FROM  `friends` 
WHERE  `user_idf` =  '2'
OR  `user_idff` =  '2'

++ user_idf ++++   user_idff+++
    2   +   1
    3   +   2   
    4   +   2
    2   +   5
+++++++++++++++++++++++++++ 
```

如何编写一个 php 函数来回显 2 的朋友的用户（我将用一个 POST 替换它从应用程序获取用户 ID 的位置），即 1、3、4、5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T14:36:55.240

你的意思是这样的吗？

```
(SELECT `user_idf` FROM `user` WHERE `user_idff` = 2) UNION (SELECT `user_idff` FROM `user` WHERE `user_idf` = 2) 
```

老实说，我对 sql 不是很好，但我认为 union 是你正在寻找的（我认为我的语法是正确的，尽管我不是 100%）。

据我了解，这**应该**获取与用户 2 为朋友的任何人的用户 ID 并输出。当用户 2 在`user_idf`和`user_idff`列中时返回的结果的并集。

编辑：其实我仍然坚持我的回答，如果你不这样做；不做这个 sql 方面那么你将不得不有一个更复杂的 PHP 函数。

对于 PHP 本身，将 mysqli 和 PDO 作为准备好的语句的两个主要选项。