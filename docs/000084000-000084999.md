# StackOverflow 问答 000084000-000084999

# web-services - 使用 web 服务的 curl 命令行？

> ID：84007
> 
> 赞同：47
> 
> 时间：2008-09-17T14:46:03.080
> 
> 标签：web-services, testing, curl

你们知道如何使用 Curl 命令行 POST SOAP 来测试 Web 服务吗？

我有一个文件（soap.xml），其中附有所有的肥皂消息，我似乎无法正确发布它。

谢谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-09-17T14:49:30.857

发布字符串：

```
curl -d "String to post" "http://www.example.com/target" 
```

发布文件内容：

```
curl -d @soap.xml "http://www.example.com/target" 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2011-01-01T15:30:11.093

对于 SOAP 1.2 Web 服务，我通常使用

```
curl --header "content-type: application/soap+xml" --data @filetopost.xml http://domain/path 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-02-20T18:03:34.290

错误的。这对我不起作用。

对我来说，这个工作：

```
curl 
-H 'SOAPACTION: "urn:samsung.com:service:MainTVAgent2:1#CheckPIN"'   
-X POST 
-H 'Content-type: text/xml'   
-d @/tmp/pinrequest.xml 
192.168.1.5:52235/MainTVServer2/control/MainTVAgent2 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-20T14:32:52.160

```
curl -H "Content-Type: text/xml; charset=utf-8" \
-H "SOAPAction:" \
-d @soap.txt -X POST http://someurl 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-04-24T12:43:18.210

如果你想要一个比终端更流畅的界面，[http](http://hurl.it/) ://hurl.it/很棒。

# visual-studio - ReSharper 迟缓

> ID：84009
> 
> 赞同：36
> 
> 时间：2008-09-17T14:46:13.737
> 
> 标签：visual-studio, performance, ide, resharper

我喜欢 ReSharper，但它占用了大量内存。它可以快速膨胀并消耗半 GB 的 RAM，而无需付出太多努力并让 IDE 陷入困境。有人知道有什么方法可以将它配置为不那么慢吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-17T14:47:53.577

关闭即时编译（不幸的是，这是它最好的功能之一）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-13T06:42:03.257

下一个版本 4.5 将基于性能和内存占用。

见[Ilya Ryzhenkov 的](http://resharper.blogspot.com/2008_07_01_archive.html)博客

[Resharper 4.5 已经发布](http://blogs.jetbrains.com/dotnet/2009/04/resharper-45-released/) 根据我的经验，它不是一个内存猪，但我仍然会耗尽内存。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-08-18T04:10:59.007

我遇到了一个问题，加载 100 多个项目的解决方案需要 10 分钟以上的时间。一旦加载 VS 性能就可以了，尽管它会奇怪地在正常和非常糟糕之间来回摆动。

简短的回答：消除 Resharper 警告似乎可以提高整体 VS/R# 性能。

最终最大的问题是我们有许多二进制数据文件（加密的东西）作为嵌入式资源包含在内，而这些文件恰好具有 .xml 扩展名。Resharper 非常努力地分析这些文件。最终它会通过，但会在此过程中产生 100K+ 错误。将扩展名更改为一个 Resharper 并没有自动分析（在这种情况下为 .bin）解决了这个问题。

我们仍然有大约 10 个文件，当它们或它们所依赖的文件被编辑了一段时间时，性能会下降。这些文件是单个类定义的部分部分，其中每个文件平均 3000 LOC。是的，没错，大约是30K线类。由于其他原因，它也恰好是相当糟糕的代码，其中许多 Resharper 标志使右侧排水沟条实际上是一条橙色实线。编辑经常会导致 Resharper 重新分析整个事情。在运行该分析时，性能会受到明显影响。

我得出的结论是，R# 识别的错误/警告越少，它的性能就越好。我在清理/重构这个项目时收集的轶事证据似乎支持它。

很多人抱怨 Resharper 的性能问题。如果您甚至有一些带有大量 Resharper 警告的大而丑陋的代码文件，那么花一点时间清理该代码可能会产生更好的整体性能。它对我们有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-12T23:07:03.807

不确定您的解决方案有多大，但我停止使用 4.5 的原因与我停止使用所有以前的版本、内存使用情况相同。

代码分析和单元测试支持是我购买它的主要原因，关闭它意味着使用它的理由消失了。

Workstation 有 4GB 内存，当在调试器中运行我们的端到端堆栈时，我可以使用 ReSharper 轻松杀死它。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-17T12:03:07.337

您可以查看 ReSharper 使用了多少内存。

ReSharper -> 常规 -> 在状态栏中显示托管内存使用情况。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-09-01T17:19:19.283

如果您正在处理大型源文件，Resharper 确实会变得迟缓（在撰写本文时我正在使用 5.0 版）。

您可以通过单击 Resharper 选项 -> 常规 -> 在状态栏中显示内存使用情况来查看 Resharper 的内存使用情况。

当我第一次这样做时，我注意到 Resharper 已经使用了数百兆字节的内存！但是，下一步对我来说（暂时）修复了呆滞：

**右键单击内存使用情况，然后选择“收集垃圾”** - 这似乎立即解决了我的呆滞问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-27T12:34:28.250

关于内存占用 - 我发现每次关闭一个解决方案并打开另一个解决方案时，我的 VS2008 内存占用都会增加。即使我关闭一个解决方案并重新打开同一个解决方案也是如此。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-17T12:06:18.017

新的 ReSharper 4.5 比之前的 4.x 版本好很多。我建议你试试那个。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-24T16:31:55.350

在以前的版本中，我遇到了同样的问题，当 4.0 出来时，这些问题似乎已经消失了。现在有了 4.1，我感觉不到以前的大幅减速。我的 IDE 不再冻结。

你试过升级吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-12T23:12:13.077

尝试 4.5 测试版。4.1 正在扼杀我的 2GB 开发机器，但它在 beta 版中恢复到令人难以置信的流畅运行。然而，其他人有相反的经历，所以 YMMV。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-11T02:27:39.897

是的，4.5 效果更好。我的理解是 4.5 是为了解决性能问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-11-23T08:26:02.967

我和我的同事在使用 ReSharper 时也遇到了巨大的性能问题，刚才我的 ReSharper 占用了 1.1GB 的内存。Visual Studio 在编写 JavaScript 时特别慢，难以忍受。您可以打开即时编译，但这是它拥有的最佳功能...... ![ReSharper 内存消耗](https://i.stack.imgur.com/DFSi9.png)

编辑：这个线程中的每个人似乎都有 ReShaprper 4.x，我的版本是 6.0。

# c# - 找到两个多边形之间最短笛卡尔距离的最快方法是什么

> ID：84034
> 
> 赞同：20
> 
> 时间：2008-09-17T14:48:13.980
> 
> 标签：c#, algorithm, gis, polygon, distance

我有**1 个红色多边形**和**50 个随机放置的蓝色多边形**- 它们位于地理**2D 空间**中。找到红色多边形与其最近的蓝色多边形之间最短距离的最快/最快算法是什么？

请记住，将构成多边形顶点的点作为值来测试距离并不是一个简单的情况，因为它们不一定是最近的点。

所以最后 - 答案应该将最接近的蓝色多边形归还给奇异的红色多边形。

这比听起来更难！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-17T15:13:56.010

我怀疑有比计算红色和每个蓝色之间的距离并按长度排序更好的解决方案。

关于排序，通常快速排序在性能上很难被击败（一种优化的排序，如果大小低于 7 个项目，它会切断递归并切换到像 InsertionSort 之类的东西，也许是 ShellSort）。

因此我想问题是如何快速计算两个多边形之间的距离，毕竟你需要进行 50 次计算。

以下方法也适用于 3D，但可能不是最快的方法：

[二维空间中的最小多边形距离](http://cgm.cs.mcgill.ca/~orm/mind2p.html)

问题是，您愿意以准确性换取速度吗？例如，您可以将所有多边形打包到边界框中，其中框的边平行于坐标系轴。3D 游戏经常使用这种方法。因此，您需要找到每个坐标 (x, y, z) 的最大值和最小值来构建虚拟边界框。计算这些边界框的距离是一项非常简单的任务。

这是更高级边界框的示例图像，它们不平行于坐标系轴：

[定向边界框 - OBB](http://xna-uk.net/photos/screen_shots/images/1291/original.aspx)

然而，这使得距离计算变得不那么简单。它用于碰撞检测，因为您不需要知道距离，您只需要知道一个边界框的一个边缘是否位于另一个边界框内。

下图显示了一个轴对齐的边界框：

[轴对齐边界框 - AABB](http://www.gamasutra.com/features/20000330/bobic_05.gif)

OOB 更准确，AABB 更快。也许您想阅读这篇文章：

[先进的碰撞检测技术](http://www.gamasutra.com/features/20000330/bobic_pfv.htm)

这始终假设您愿意以精度换取速度。如果精度比速度更重要，您可能需要更先进的技术。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-17T15:19:17.230

您也许可以减少问题，然后对一小部分进行深入搜索。

首先通过查找处理每个多边形：

*   多边形的中心
*   多边形的最大半径（即，距定义中心最远的多边形的边缘/表面/顶点上的点）

现在你可以收集，比如说，最接近红色多边形的 5-10 个多边形（找到中心到中心的距离，减去半径，对列表进行排序并取前 5 个），然后执行更详尽的例程。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-17T15:07:53.963

对于具有合理数量边界点的多边形形状，例如在 GIS 或游戏应用程序中，进行一系列测试可能会更快更容易。

对于红色多边形中的每个顶点，计算到蓝色多边形中每个顶点的距离并找到最近的（提示，比较距离^2，所以你不需要 sqrt() ）找到最近的，然后检查每一边的顶点找到的红色和蓝色顶点来决定哪些线段最近，然后找到两个线段之间的最接近的方法。

请参阅[http://local.wasp.uwa.edu.au/~pbourke/geometry/lineline3d/](http://local.wasp.uwa.edu.au/~pbourke/geometry/lineline3d/) （对于 2d 案例很容易）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-17T14:57:08.483

也许 Frechet 距离是您想要的？

[计算两条多边形曲线之间](http://web.archive.org/web/20120805031535/http://www.cim.mcgill.ca/~stephane/cs507/Project.html)
[的 Fréchet 距离 计算简单多边形之间的 Fréchet 距离](http://eurocg.org/06/delaunay.tem.uoc.gr/~mkaravel/ewcg06/papers/25.pdf)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-17T19:28:14.977

这种筛选技术旨在减少您在平均情况下需要执行的距离计算次数，而不会影响结果的准确性。它适用于凸多边形和凹多边形。

找到每对顶点之间的最小距离，使得一个是红色顶点，一个是蓝色顶点。称它为*r*。多边形之间的距离最多为*r*。从红色多边形构造一个新区域，其中每个线段向外移动*r*并通过以顶点为中心的半径为*r的弧连接到其邻居。*求该区域内的每个顶点到与该区域相交的相反颜色的每个线段的距离。

当然，您可以添加一个近似方法，例如边界框，以快速确定哪些蓝色多边形不可能与红色区域相交。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-17T15:44:29.463

我知道您说“最短距离”，但您真的是指最佳解决方案或“好/非常好”的解决方案适合您的问题吗？

因为如果您需要找到最佳解决方案，您必须计算所有源和目标 poligon 边界（不仅是顶点）之间的距离。如果您在 3D 空间中，则每个边界都是一个平面。这可能是一个大问题（O（n ^ 2）），具体取决于您拥有多少个顶点。

因此，如果您的顶点数使该平方与一个可怕的数字相匹配，并且“好/非常好”的解决方案对您来说很好，请选择启发式解决方案或近似值。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-19T00:12:53.490

你可能想看看 Voronoi Culling。论文和视频在这里：

[http://www.cs.unc.edu/~geom/DVD/](http://www.cs.unc.edu/~geom/DVD/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-07-13T14:17:53.610

我会首先用一个边界圆来限制所有多边形，然后找到最小距离的上限。然后我会简单地检查所有蓝色多边形的边缘，其距离的下限低于最小距离的上限与红色多边形的所有边缘。

```
最小距离的上限 = min {距离（红色的中心，当前蓝色的中心）+ 当前蓝色的半径}

对于距离（红色的中心，当前蓝色的中心）-当前蓝色的半径 < 最小距离上限的每个蓝色多边形
    检查边和顶点的距离

```

但这一切都取决于您的数据。如果蓝色多边形与它们与红色多边形之间的距离相比相对较小，那么这种方法应该可以很好地工作，但如果它们非常接近，您将不会保存任何东西（其中许多会足够接近）。还有一件事——如果这些多边形没有很多顶点（比如它们中的大多数是三角形），那么检查每个红色边缘和每个蓝色边缘几乎一样快。

希望能帮助到你

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-07-13T15:06:23.343

正如其他人提到的那样，使用边界区域（框、圆）可能允许您丢弃一些多边形-多边形交互。为此有几种策略，例如

1.  选择任何蓝色多边形并找到与红色多边形的距离。现在选择任何其他多边形。如果边界区域之间的最小距离大于已找到的距离，则可以忽略此多边形。继续所有多边形。
2.  找到红色多边形和所有蓝色多边形之间的最小距离/质心距离。对距离进行排序并首先考虑最小的距离。计算实际最小距离并继续排序列表，直到多边形之间的最大距离大于目前找到的最小距离。

根据输入多边形的实际布局，您选择的圆形/轴向对齐框或定向框可能会对算法的性能产生很大影响。

对于实际的最小距离计算，您可以使用 Yang 等人的“[基于 Voronoi 图计算两个不相交凸多边形之间距离的新快速算法](http://www.zju.edu.cn/jzus/2006/A0609/A060909.pdf)”，即 O(log n + log m)。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-07-13T15:11:57.110

马上就要去参加葬礼了，但是如果你把多边形分解成凸的子多边形，你可以做一些优化。您可以对每个多边形进行二进制搜索以找到最近的顶点，然后我*相信*最近的点应该是该顶点或相邻边。这意味着您应该能够做到，`log(log m * n)`其中 m 是多边形上的平均顶点数，n 是多边形的数量。这有点仓促，所以可能是错误的。如果需要，稍后将提供更多详细信息。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-17T15:24:20.180

您可以从比较边界框之间的距离开始。测试矩形之间的距离比测试多边形之间的距离更容易，并且您可以立即消除任何超过nearest_rect + its_diagonal 的多边形（可能您可以进一步细化）。然后，您可以测试剩余的多边形以找到最近的多边形。

有一些算法可以找到多边形接近度——我相信维基百科对它们有很好的评论。如果我没记错的话，那些只允许凸多边形的速度要快得多。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-09-16T15:36:11.487

我相信您正在寻找的是 A* 算法，它用于寻路。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-09-17T15:06:34.060

天真的方法是找出红色和 50 个蓝色对象之间的距离——因此您正在查看 50 个 3d 毕达哥拉斯计算 + 排序来找到答案。不过，这只适用于找到中心点之间的距离。

如果你想要任意多边形，也许你最好的方法是光线追踪解决方案，它从红色多边形的表面相对于法线发射光线，并在击中另一个多边形时报告。

混合可能会起作用——我们可以找到与中心点的距离，假设我们对蓝色多边形的相对大小有一些概念，我们可以将结果集剔除到其中最接近的，然后使用光线追踪来缩小真正的最近的多边形。

# java - .NET 是否像 Java 所声称的那样是一次编写、随处运行 (WORA) 平台？

> ID：84058
> 
> 赞同：10
> 
> 时间：2008-09-17T14:50:52.413
> 
> 标签：java, .net, multiplatform

我记得孙杨的口号是如此生动…… [“一次编写，随处运行”](http://en.wikipedia.org/wiki/Write_once,_run_anywhere)。这个想法是，由于程序被编译成标准字节码，任何带有 Java 虚拟机的设备都可以运行它。多年来，Java 似乎已经进入了许多平台/设备。

这是.NET的意图还是曾经的意图。如果是这样，正在采取什么样的努力来实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-17T14:56:43.710

为了在这里纠正其他人的一些评论，.Net 总是打算成为多平台的。这就是为什么 Microsoft 将命名空间分为“System.*”（与平台无关）和“Microsoft.*”（特定于 Windows）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-17T14:53:26.403

[Mono](http://www.mono-project.com/Main_Page)可以在 Linux、Solaris 和 OS X 上运行。实际上，.Net 仍然几乎是一个仅限 Windows 的平台。相反，推动它成为 WORA 并不真正符合微软的利益。然而，似乎是跨平台的。很多人对 Linux 上的 Mono 非常偏执。MS的设想策略是先让它成长为Linux应用平台的重要组成部分，然后再放开律师。我不会把我的未来押在 .Net 的可移植性上。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-05-24T14:19:44.490

答案是一个非常不稳定的Yes。包含外部库的那一刻，答案将变为否。

例如，Microsoft 没有 64 位 JET 驱动程序。.NET 使用 JET 访问 MS Access 数据库。

为使用 MS Access 数据库的 Any CPU 目标编译的任何应用程序在 64 位版本的 Windows 上都将失败。

（这忽略了上述应用程序不能移植到 Mono。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-17T16:43:58.070

微软从未提出过这些要求，但他们正在 WORA 领域采取行动。例如，Silverlight 2.0 将使用 .NET 框架的一个子集，并可在 Windows、Linux（通过 Moonlight 项目）、MacOS、Windows Mobile 和诺基亚手机上使用。

正如其他人所提到的，Mono 项目也将框架带到了多个环境中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-11-22T06:26:35.927

将这一点放在上下文中，在许多人看来，Java 也从未兑现其“Write Once Run Anywhere”的承诺。

充其量你得到的是“Write Once Debug Everywhere”或“Write Once Looks like crap Everywhere”

成功的基于 CLR 的应用程序都是使用目标平台本机的图形框架编写的。

例如，以下非常成功的 linux 应用程序使用 c# 绑定到 GTK 编写，称为 GTK#，而不像您期望的那样使用 winforms：

Banshee - 像 iTunes 一样的音乐播放器

fspot - 照片管理器

TomBoy - 笔记程序

GnomeDo - 快速启动器和扩展坞

同样成功的 windows .net 应用程序不是使用 GTK# 编写的（即使它是跨平台的），它们是使用 winforms 或 WPF 编写的。

当谷歌开始制作 Chrome 时，他们并没有尝试使用跨平台的 GUI 框架，而是选择在每个平台上使用原生的 GUI 框架。为什么？因为这样应用程序就可以正确地融入它的环境，它的外观、感觉和行为就像它在操作系统上的本机一样。

基本上，当您尝试在任何地方运行一次写入时，您必须做出严重的妥协，而您最终得到的东西在任何地方都无法真正正常工作。

该行业已在很大程度上放弃了一次编写随处运行的崇高目标，因为这是一个在实践中没有成功的好主意。

使用 mono/.net 的最佳方法是共享较低级别的二进制文件并在每个目标平台上使用本机 gui 框架。linux 上的 GTK#，windows 上的 winforms 或 WPF，Mac 上的 CocoaSharp。这样，您的应用程序的外观和感觉就像原生应用程序。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-17T14:53:02.737

有了 Mono，我们已经很接近了，有了 SilverLight，我们已经准备好了。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-17T14:53:07.340

我不认为 .NET 的官方“意图”是 WORA。我认为您可以肯定地说 .NET 的设计是为了始终在未来的 MS 操作系统上运行。但是没有什么可以阻止 .NET 在其他平台上运行。Mono 是为 Windows 以外的操作系统实现 .NET 运行时的示例。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-17T14:54:24.700

是的，这是 .NET 的一个目标，尽管我认为它不像 Java 那样强调它。目前，我所知道的唯一努力是 Mono 项目，它正在创建一个在 Linux 上运行的 CLI 版本。

有趣的是，Silverlight 实际上有一个精简版的 CLR，它可以在 Windows 和 Mac 上运行，它允许相同的 Silverlight 应用程序在两个平台上运行而无需更改。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T14:53:15.373

这在理论上是可能的，因为 CLR（.Net 的“虚拟机”）符合开放标准（CLI）。问题是该标准还有哪些其他实现。Mono 是另一项正在进行的工作，但它是我所知道的唯一另一项工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-17T14:53:53.577

我认为 .NET 的想法是它是“一次编写，随处运行（Microsoft 选择）”。然而，[Mono](http://www.mono-project.com/Main_Page)项目正在慢慢改变这种情况。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-17T14:53:54.497

恕我直言，它永远不会在像 Java 一样多的平台上得到支持。

唯一的努力是 Mono，不是由 Microsoft 赞助的。

[在 SO](https://stackoverflow.com/tags/mono)和[官方网站](http://www.mono-project.com)上查看此处

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-17T14:54:00.940

理论上，是的。.Net 程序集是字节码，它在启动时使用 JIT（“即时”）编译器转换为本机代码。

实际上，除了 Windows 之外，没有多少平台具有 .Net JIT 编译器。Linux 有一个，叫做 MONO。

不知道Mac，Sun等...

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-17T14:55:34.087

从理论上讲，该语言被设计为编译成类似 Java 的字节码，由公共语言运行时解释，这种机制还允许多种语言（不仅仅是 C#）一起工作并在 .NET 框架上运行。

但是，Microsoft 只开发了适用于 Windows 的 CLR。还有其他非 MS 替代方案正在开发中，最突出的是[Mono](http://en.wikipedia.org/wiki/Mono_(software))、CLR 实现或许多平台（请参阅链接）。

所以理论上是的，在实践中——我们拭目以待。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-17T14:55:53.197

是和不是。.NET 环境的一部分是标准的，可以公开采用。

例如，运行时 (CLR) 有一个称为[Mono](http://en.wikipedia.org/wiki/Mono_(software))的可移植版本，它是多平台、开源的，并由（例如）Second Life 使用。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-17T14:55:59.047

目的，或者至少是音调，是为了这种情况。现实情况是.NET 不能真正在其他平台上运行。唯一的主要例外是[Mono](http://www.mono-project.com/Main_Page)，它是一个开源项目。它本质上是对适用于 Linux、Solaris、Mac OS X、Windows 和 Unix 的 .NET 运行时（相当于 java 虚拟机）的重写。

它相当成功，但没有得到官方的支持。

如果您正在考虑让您的单体 Acme corp 雇主采用 .Net 和 Linux，那就别管它了。实际上，使用 .NET，您就在 Windows 机器上。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-17T14:57:28.420

是的，.NET 具有公共语言运行时 (CLR)，它是 .NET 等效于 JVM。Microsoft 在与 Java 一样多的平台上不支持它，但在[Mono 项目](http://www.mono-project.com/)的帮助下，可以实现具有通常警告的跨平台应用程序。

请记住，.NET 不仅仅是 CLR。它是一个完整的平台。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-17T16:37:47.027

我不认为这真的是 .NET 的设计目标——微软对为非 Windows 平台编写软件的人没有特别的兴趣......

但是，有一个 Mono 项目 ( [http://www.mono-project.com](http://www.mono-project.com) )，它是“Novell 赞助的一个开放式开发计划，旨在开发一个开放源代码的 UNIX 版本的 .NET 开发平台”。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-17T14:54:07.447

由于 .NET 仅在 Windows 上（正式）可用，因此不是，它不是编写的，可以在任何地方运行。然而，Mono 团队正在努力帮助将 .NET 传播到 Windows 之外，但他们总是落后于官方的东西。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-17T14:54:08.647

我不认为微软最初的计划是为每个平台和设备创建运行时，但他们通过使用有文档的（？）中间语言来鼓励这样做。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-17T14:54:26.120

多平台当然是在愿景中。现在[单声道](http://www.mono-project.com/Main_Page)在为其他操作系统实现运行时方面做得很好。

[单核细胞增多症](http://www.mono-project.com/Main_Page)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-17T14:54:52.060

简短的回答——不，Microsoft 仅支持 .NET 的 MS 操作系统（包括 Windows Mobile）。

长答案 - 有公共开源项目可以为 linux 和其他操作系统复制 .NET 框架，特别是 Rotor 和[Mono](http://www.mono-project.com/)。它们并不支持一切，但您可以部署大量 .NET 代码，包括 silverlight。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-17T15:01:46.833

这取决于您对“任何地方”的定义。有多种 Java 虚拟机和 .Net 框架。而且大多数时候你不能只为桌面虚拟机/框架编写代码并期望它在手机上运行。

所以。从某种意义上说，即使是 Java 也不是真正纯粹的“一次编写，随处运行”。

然而，Java 的虚拟机目前在多个操作系统上运行，而 .Net 框架仅在 Windows 设备上运行，这是事实。

有一个有趣的倡议叫做“Mono”，它在 Linux、Solaris、Mac OS X、Windows 和 Unix 上提供 .Net 支持。在这里阅读：[单站点](http://www.mono-project.com/Main_Page)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2012-04-28T07:59:00.420

我认为这个想法是在不同的编程语言之间创建互操作性，而不是 WORA。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-10-29T06:05:23.423

它肯定是 WORA。现在只是 MS 认为 Anywhere 和 Everywhere 将是 Windows。谁知道 Linux 和 MacOS 仍然存在。但从 PDC 的所有 Mac 来看，我猜他们要么对了一半，要么错了一半！

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-17T15:07:02.563

dotNet 可以，因为 CLR 在功能上与 JVM 类似。但我不相信 MS 有任何意图。 [http://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page) 可能有用，但它不是 MS 产品。顺便说一句，就像广泛的 j2ee 容器如何为 j2ee 应用程序云计算 WORA 概念一样，在 IIS 之外的任何东西上运行的 ASP.NET 应用程序在不同平台上都不会真正工作。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-10-03T23:05:12.213

鉴于其他人的回应，我仍然不清楚微软是否真的打算让 .NET 成为 WORA 倡议。我想真正了解的唯一方法是让**Microsoft .NET 团队中的某个人参与进来**。

由于我们无法明确了解 .NET 的最初 WORA 意图，我们可以指出试图使之成为现实的努力（正如之前的答案所讨论的那样）。

## [单声道]( [http://en.wikipedia.org/wiki/Mono_(software))](http://en.wikipedia.org/wiki/Mono_(software)))

这项工作是在 Microsoft 之外开展的一项举措。

> Mono 是由 Novell（以前由 Ximian）领导的项目，旨在创建符合 Ecma 标准的 .NET 兼容工具集，其中包括 C# 编译器和公共语言运行时。Mono 可以在 Linux、BSD、UNIX、Mac OS X、Solaris 和 Windows 操作系统上运行。

## [银光](http://en.wikipedia.org/wiki/Silverlight)

微软正在大力推行这项工作。Silverlight 2.0 实现了与 .NET 3.0 相同的框架版本，似乎是通过浏览器成功地将框架交付到多个平台的尝试。

> 它与 Microsoft Windows 和 Mac OS X 操作系统上使用的多种 Web 浏览器产品兼容。移动设备，从 Windows Mobile 6 和 Symbian (Series 60) 手机开始，也将得到支持。

[虽然它没有专门解决为 GNU/Linux 带来功能的问题，但显然有一个名为 [Moonlight]( http://en.wikipedia.org/wiki/Moonlight_(runtime))](http://en.wikipedia.org/wiki/Moonlight_(runtime)))的第三方自由软件实现。

这似乎是我们目前所知道的，但如前所述，**如果 .NET 团队中的某个人能够参与其中以正确澄清 WORA 是否实际上是一项原创计划，那将非常有帮助。**

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-11-12T13:15:40.397

如果 WORA 真的是一个最初的目标，那么我想我们现在会在所有主要平台上看到 .NET 实现，并得到 Microsoft 的完全支持。我似乎记得，当 Sun 从屋顶上大喊 WORA 时，微软的回击是“Write Any (language) Run on One (platform)”（WARO:-)。正如其他人所提到的，我认为他们一直是 WORASAIW 的坚定支持者（只要它的 Windows 就可以在任何地方编写一次运行）

正如您所指出的，由于战场已显着从桌面转移到浏览器，他们似乎正在对 Silverlight 进行一些改变，以尝试获得 Flash/Flex 动作的一部分。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-11-12T13:25:50.860

但它是多平台 Win9x/WinNT/Mobile

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2010-05-24T14:13:15.410

如果微软认真对待其他非 Windows 平台上的 dotnet，他们会发布类库以供其他人重用，从而避免再次重写相同的库。另一方面，Sun 已经做到了这一点，这意味着如果没有人希望移植到另一个平台，就会出现更少的障碍。自然地，使用 java 仍然需要编写一个 vm 并做本地的东西，但它有助于避免重新实现整个类库的头痛。语言的标准化是吸引技术人员的营销策略。没有库的语言毫无价值。尝试使用 prjkitive 类型来做你的下一个项目......这是正确的，编写你自己的字符串类等，并告诉我在没有任何可用库的情况下标准化语言有多大帮助......

# c++ - SQLBindParameter 使用 C++ 和 SQL Native Client 为 SQLPutData 做准备

> ID：84064
> 
> 赞同：1
> 
> 时间：2008-09-17T14:51:33.893
> 
> 标签：c++, sql, sql-server, sqlncli

我正在尝试使用`SQLBindParameter`我的驱动程序来准备通过`SQLPutData`. 数据库中的字段是`TEXT`字段。我的函数是根据这里的 MS 示例制作的：http: [//msdn.microsoft.com/en-us/library/ms713824](http://msdn.microsoft.com/en-us/library/ms713824(VS.85).aspx) (VS.85).aspx 。

我已经设置了环境，建立了连接，并成功地准备了我的语句，但是当我调用`SQLBindParam`（使用下面的代码）时，它始终无法报告：`[Microsoft][SQL Native Client]Invalid precision value`

```
int col_num = 1;
SQLINTEGER length = very_long_string.length( );
retcode = SQLBindParameter( StatementHandle,
            col_num,
            SQL_PARAM_INPUT,
            SQL_C_BINARY,
            SQL_LONGVARBINARY,
            NULL,
            NULL,            
            (SQLPOINTER) col_num,     
            NULL,                 
            &length ); 
```

以上依赖于使用中的驱动程序返回“N”中的`SQL_NEED_LONG_DATA_LEN`信息类型`SQLGetInfo`。我的司机返回“Y”。如何绑定以便我可以使用`SQLPutData`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-18T02:17:40.063

虽然它看起来不像文档的示例代码，但我发现以下解决方案适用于我想要完成的工作。感谢 gbjbaanb 让我重新测试 SQLBindParameter 的输入组合。

```
 SQLINTEGER length;
    RETCODE retcode = SQLBindParameter( StatementHandle,
        col_num,      // position of the parameter in the query
        SQL_PARAM_INPUT,
        SQL_C_CHAR,
        SQL_VARCHAR,
        data_length,        // size of our data
        NULL,               // decimal precision: not used our data types
        &my_string,         // SQLParamData will return this value later to indicate what data it's looking for so let's pass in the address of our std::string
        data_length,
        &length );          // it needs a length buffer

    // length in the following operation must still exist when SQLExecDirect or SQLExecute is called
    // in my code, I used a pointer on the heap for this.
    length = SQL_LEN_DATA_AT_EXEC( data_length ); 
```

语句执行后，可以使用 SQLParamData 来确定 SQL 希望您发送什么数据，如下所示：

```
 std::string* my_string;
    // set string pointer to value given to SQLBindParameter
    retcode = SQLParamData( StatementHandle, (SQLPOINTER*) &my_string ); 
```

最后，使用 SQLPutData 将字符串的内容发送到 SQL：

```
 // send data in chunks until everything is sent
    SQLINTEGER len;
    for ( int i(0); i < my_string->length( ); i += CHUNK_SIZE )
    {
        std::string substr = my_string->substr( i, CHUNK_SIZE );

        len = substr.length( );

        retcode = SQLPutData( StatementHandle, (SQLPOINTER) substr.c_str( ), len );
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T16:35:17.780

您将 NULL 作为缓冲区长度传递，这是一个输入/输出参数，应该是 col_num 参数的大小。此外，您应该为 ColumnSize 或 DecimalDigits 参数传递一个值。

[http://msdn.microsoft.com/en-us/library/ms710963(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms710963(VS.85).aspx)

# ssh - 设置默认 ssh 密钥位置

> ID：84096
> 
> 赞同：61
> 
> 时间：2008-09-17T14:53:57.960
> 
> 标签：ssh

默认情况下，ssh 将在 ~/.ssh 文件夹中查找其密钥。我想强迫它总是在另一个位置寻找。

我正在使用的解决方法是将非标准位置的密钥添加到代理：

```
ssh-agent
ssh-add /path/to/where/keys/really/are/id_rsa 
```

（在 Linux 和 Windows 上的 MingW32 shell 上）

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2008-09-17T15:23:23.663

如果您只想为您的身份文件指向不同的位置，您可以使用以下条目修改您的 ~/.ssh/config 文件：

```
IdentityFile ~/.foo/identity 
```

`man ssh_config`找到其他配置选项。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-09-17T15:04:34.533

`man ssh`给我这个选项会很有用。

> -i identity_file 选择从中读取用于 RSA 或 DSA 身份验证的身份（私钥）的文件。协议版本 1 的默认值是 ~/.ssh/identity，协议版本 2 的默认值是 ~/.ssh/id_rsa 和 ~/.ssh/id_dsa。身份文件也可以在配置中基于每个主机指定文件。可以有多个 -i 选项（以及在配置文件中指定的多个身份）。

所以你可以在你的 bash 配置中创建一个别名，比如

> 别名 ssh="ssh -i /path/to/private_key"

我还没有查看 ssh 配置文件，但就像`-i`选项一样，这也可以是别名

> -F configfile 指定一个备用的每用户配置文件。如果在命令行中给出了配置文件，系统范围的配置文件 (/etc/ssh/ssh_config) 将被忽略。每个用户配置文件的默认值是 ~/.ssh/config。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-13T18:19:03.043

**Windows 10**上的 Git Bash 更新：在我的系统上，git bash 应用程序将在 ssh 层（由**OpenSSH**提供）上工作，寻找一个名为**HOME**的环境变量（到 Windows 键并输入“env”以编辑 env vars）。如果这个变量指向一个不存在的地方，git bash 可能永远不会打开。

与 Linux 一样，**Git Bash**应用程序会`config`在`%HOME%\.ssh`.

例如，如果您将 HOME 设置为`C:\Users\Yourname`，那么它将寻找`C:\Users\Yourname\.ssh`

最后，在配置文本文件中，git bash 将查找`IdentifyFile`路径。在 Windows 上，使用 cygwin 表示法设置路径。

例如`/e/var/www/certs/keys/your_passwordless_key.key`

奖励：免费，PHPStorm 将使用该设置。如果您刚刚更改了设置，请重新启动 IDE。

# c# - 什么是惯用代码？

> ID：84102
> 
> 赞同：100
> 
> 时间：2008-09-17T14:54:15.603
> 
> 标签：c#

我会对一些前后 c# 示例、一些非惯用与惯用示例感兴趣。非 c# 示例如果能理解这个想法也很好。谢谢。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2008-09-17T15:10:01.090

惯用语意味着遵循语言的约定。您希望找到完成任务的最简单和最常见的方法，而不是从不同的语言移植您的知识。

使用带有附加的循环的非惯用python：

```
mylist = [1, 2, 3, 4]
newlist = []
for i in mylist:
    newlist.append(i * 2) 
```

使用列表推导的惯用 python：

```
mylist = [1, 2, 3, 4]
newlist = [(i * 2) for i in mylist] 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2008-09-17T15:22:49.093

一些例子：

**资源管理**，非惯用语：

```
string content;
StreamReader sr = null;
try {
    File.OpenText(path);
    content = sr.ReadToEnd();
}
finally {
    if (sr != null) {
        sr.Close();
    }
} 
```

惯用语：

```
string content;
using (StreamReader sr = File.OpenText(path)) {
    content = sr.ReadToEnd();
} 
```

**迭代**，非惯用语：

```
for (int i=0;i<list.Count; i++) {
   DoSomething(list[i]);
} 
```

也非惯用语：

```
IEnumerator e = list.GetEnumerator();
do {
   DoSomenthing(e.Current);
} while (e.MoveNext()); 
```

惯用语：

```
foreach (Item item in list) {
   DoSomething(item);
} 
```

**过滤**，非惯用语：

```
List<int> list2 = new List<int>();
for (int num in list1) {
  if (num>100) list2.Add(num);
} 
```

惯用语：

```
var list2 = list1.Where(num=>num>100); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-09-17T14:57:54.487

惯用代码是以您的语言通用的方式完成一项通用任务的代码。它类似于设计模式，但规模要小得多。习语因语言而异。C# 中的一个习惯用法可能是使用迭代器来遍历集合，而不是循环遍历它。其他没有迭代器的语言可能依赖于循环习语。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-17T15:54:33.383

实际上，这意味着以一致的方式编写代码，即所有在您的代码库上工作的开发人员在编写类似的代码结构时都应该遵循相同的约定。

因此，惯用方式是与其他代码风格相匹配的方式，非惯用方式意味着您正在编写这种函数，但方式不同。

例如，如果你循环一定数量的项目，你可以用几种方式编写循环：

```
for (int i = 0; i < itemCount; i++)

for (int i = 1; i <= itemCount; i++)

for (int i = 0; i < itemCount; ++i) 
```

ETC

最重要的是所选择的风格始终如一地使用。这样人们就会对如何使用它变得非常熟悉和自信，当你发现一个看起来不同的用法时，它可能是一个错误被引入的迹象，也许是一个错误，例如

```
for (int i = 1; i < itemCount; i++) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2010-03-31T13:39:11.357

在 PHP 中，我有时会遇到如下代码：

```
foreach ($array as $value) {
    $trimmed[] = trim($value);
}
return $trimmed; 
```

习惯上可以通过以下方式实现：

```
return array_map('trim', $array); 
```

# php - OO PHP解释 对于一个脑残n00b

> ID：84125
> 
> 赞同：12
> 
> 时间：2008-09-17T14:56:17.893
> 
> 标签：php, oop

我已经编写 PHP 大约六年了，并且已经到了我觉得我应该做更多的事情来编写更好的代码的地步。我知道面向对象的代码是要走的路，但我无法理解这个概念。

任何人都可以用任何白痴都能理解的术语来解释，OO 以及它在 PHP 中是如何工作的，或者指向一个白痴指南教程？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-09-17T15:18:09.277

想一件事。任何事情，你想做的事情。说，早餐。

（所有代码都是伪代码，与任何在银行业中存活、死亡或临床滥用的语言有任何相似之处，纯属巧合，与您的帖子被标记为 PHP 无关）

因此，您为如何表示早餐定义了一个模板。这是一个类：

```
class Breakfast {

} 
```

早餐包含属性。在普通的非面向对象的东西中，您可能会为此使用数组：

```
$breakfast = array(
'toast_slices' => 2,
'eggs' => 2,
'egg_type' => 'fried',
'beans' => 'Hell yeah',
'bacon_rashers' => 3 
); 
```

你会有各种功能来摆弄它：

```
function does_user_want_beans($breakfast){
     if (isset($breakfast['beans']) && $breakfast['beans'] != 'Hell no'){
         return true;
     }
     return false;
} 
```

而且你一团糟，不仅仅是因为豆子。你有一个程序员可以随意使用的数据结构，一个不断扩展的与早餐有关的函数集合，完全脱离了数据的定义。因此，您可以这样做：

```
class Breakfast {
  var $toast_slices = 2;
  var $eggs = 2;
  var $egg_type = 'fried';
  var $beans = 'Hell yeah';
  var $bacon_rashers = 3;

  function wants_beans(){

     if (isset($this->beans) && $this->beans != 'Hell no'){
         return true;
     }

     return true;

  }

  function moar_magic_pig($amount = 1){

     $this->bacon += $amount;

  }

  function cook(){
      breakfast_cook($this);
  }

} 
```

然后操纵程序的早餐概念变得更加清晰：

```
$users = fetch_list_of_users();

foreach ($users as $user){
    // So this creates an instance of the Breakfast template we defined above

    $breakfast = new Breakfast(); 

    if ($user->likesBacon){
       $breakfast->moar_magic_pig(4);
    }

    // If you find a PECL module that does this, Email me.
    $breakfast->cook();
} 
```

我认为这看起来更简洁，并且是一种更简洁的方式来表示我们希望将其视为一致对象的数据块。

关于 OO 实际上是什么以及为什么它在学术上更好，有更好的解释，但这是我的实际原因，它包含培根。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-17T15:12:52.440

有一个警告：如果不学习 OO 设计，你就不会学习 OO 编程！关键概念是定义对数据进行操作的函数以及适当的数据。然后你可以*告诉*你的对象做什么，而不必查询它们的内容。

一定要看看“[告诉，不要问](http://www.pragmaticprogrammer.com/articles/tell-dont-ask)”哲学，“需要知道”原则（又名“得墨忒耳法则”）也是一个非常重要的原则。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-18T16:34:56.883

使用**OO**的一些关键原因是以类似于我们人类喜欢感知和关联事物的方式来构建代码，并利用**经济性**、**可维护性**、**可靠性**和**可扩展性**的好处。

即：人类在数千年前设计了轮子。我们可以一直改进它，但我们当然不需要再次重新发明它......

**1）**我们喜欢对事物进行**分类**：“这个比这个大”、“这个比那个贵”、“这个和那个差不多”。

**2）**我们喜欢**简化**一些事情：“好吧，这是一台V8液冷涡轮驱动的拖拉机，但我仍然只是转动方向盘，把脚踩在踏板上来驱动它，对吧？”。

**3)**我们喜欢将事物**标准化**：“好吧，我们将三角形、圆形和正方形都称为 SHAPES，并期望它们都有 AREA 和 CIRCUMFERENCE”。

**4)**我们喜欢**调整**一些东西：“嗯，我喜欢这样，但我可以在 Racing Green 中使用它吗？”。

**5）**我们喜欢创建**蓝图**：“我还没有时间或金钱（或批准）来建造它，但它会有门和屋顶，还有一些窗户和墙壁”。

**6）**我们喜欢**保护**东西：“好吧，我会让你看到总价，但我对你隐藏了我添加的加价！”。

**7）**我们喜欢互相**交流的东西：“我想通过以下方式访问我的银行余额：我的手机；我的电脑；ATM；银行员工；等等。”。**

要了解如何利用 OO（并看到一些优势），那么我建议您将自己的练习设置为家庭作业——也许是一个基于浏览器的应用程序，它处理诸如圆形、矩形和三角形之类的形状，并跟踪它们的区域，颜色，位置和z-index等。然后添加正方形作为矩形的特殊情况，因为它的大部分定义，面积等都是相同的。只是添加了高度与宽度相同的条件. 为了让它更难，你可以把一个矩形变成一种四边形，它是一种多边形。等等等等

**NOTE:** I wouldn't start using a PHP Framework until you are comfortable with the basics of OO programming first. They are much more powerful when you can extend classes of your own and if you can't then it's a bit like learning something by rote -> much harder!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T15:36:11.760

最好的建议来自：xtofl.myopenid.com ^^^^

如果你不了解模式的目的，你真的不会充分利用对象。您需要知道为什么继承、多态、接口、工厂、装饰器等确实通过解决特定问题使设计更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T20:50:06.967

与其从头开始学习 OO，我认为如果你采用一个促进面向对象编程的框架会更容易。它会“强迫”你使用正确的 OOP 方法；您将能够从框架的编写方式中学习如何最好地进行 OOP。

我推荐 QCodo PHP5 框架[http://www.qcodo.com](http://www.qcodo.com)。它有关于如何设置它的精彩视频教程，以及视频培训 ( [http://www.qcodo.com/demos/](http://www.qcodo.com/demos/) )。

全面披露：我已经在这个框架之上开发了两年，并且我已经为他们的代码库贡献了代码（所以我并不完全公正:-)）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T20:56:54.517

学习OO的另一个指针：

大多数 OO 教程将侧重于继承（例如类 X 扩展类 Y）。我认为这是一个坏主意。继承很有用，但也可能导致问题。更重要的是，继承不是面向对象的重点。关键是抽象；隐藏实现细节，以便您可以使用简单的界面。学习如何为你的数据编写好的抽象，你会处于良好的状态。不要马上为继承的东西出汗。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T22:10:49.470

我一直在你的立场，但我读了这本书后看到了光明（几次！）[http://www.apress.com/book/view/9781590599099](http://www.apress.com/book/view/9781590599099)读完这本书后，我真的“明白”了它并且我没有回头。你会在亚马逊上买到它。

我希望你坚持，得到它，并喜欢它。当它在一起时，它会让你微笑。

组合胜过继承。

# visual-studio - 在 Visual Studio 中查找错误/警告

> ID：84127
> 
> 赞同：0
> 
> 时间：2008-09-17T14:56:25.990
> 
> 标签：visual-studio, rebuild

我在使用 Visual Studio 2005 时遇到了一个烦人的问题...有时当我重建时，即使我执行了重建解决方案，它也会返回时没有错误或警告，但是当我稍后编辑另一个代码文件时，即使没有更改它并重建，它将在该其他文件中发现错误或警告。显然，早期的 Rebuild Solution 没有重新编译该文件！如何强制 VS 完全重新编译每个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-23T03:55:50.060

当您的解决方案中有多个项目并且引用混淆时，我已经看到这种情况发生。

假设您的解决方案中有四个项目，Common、Business、Data 和 UI。假设 Common 被其他三个项目引用。

我们希望 Common 成为其他三个项目的“项目参考”——然后他们将从 Common 的构建输出目录中获取他们的副本。

但是，有时，其中一个项目会混淆它的参考。比如说，在这种情况下，UI 开始引用Data的*构建输出目录中的 Common 副本。*现在，编译“UI”而不编译“Data”的任何更改都将导致“Common”的两个可能不兼容的版本成为 UI 的依赖项。

另一种情况是对二进制文件的引用，例如来自“lib”目录。然后，其中一个项目最终引用了构建输出位置而不是 lib。

我不知道是什么原因造成的 - 但不幸的是，我一直看到它。

**解决**方法是遍历每个项目的引用并找到指向错误位置的一个（或多个）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:01:07.960

在重建之前清理解决方案可能会有所帮助——右键单击解决方案资源管理器中的解决方案并选择“清理解决方案”——这会删除临时文件并应该清除 bin 和 obj 文件夹，因此一切都被重建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:03:51.680

我在这里和 Guy Starbuck 在一起，但要补充一点，重建解决方案应该先做一个干净的解决方案，然后是构建解决方案，然后它应该已经解决了你的问题。但是 VS 2005 在这方面可能很糟糕。有时它只是在几次重建后才开始工作。如果升级到 2008 不是一个选项，请考虑手动清除 bin 文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T14:59:09.040

这与配置管理器有关吗？您可以在此处选择解决方案构建中的哪些项目。不确定这是否有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T15:03:31.480

根据警告的类型，如果我没记错的话是不可能的。

例如，XHTML 合规性警告消息仅在文件打开时显示。您可以检查 VS 中的容差设置，看看是否可以更改它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T15:03:54.957

这听起来很奇怪 - Rebuild 应该构建所有内容而不考虑更改，而 Build 应该只构建已更改的内容。

您所描述的行为只有在您修改了未更改文件引用的某些内容时才会发生，因此它现在不正确。

# sharepoint - 卸载 Sharepoint 基础结构更新

> ID：84132
> 
> 赞同：0
> 
> 时间：2008-09-17T14:56:58.500
> 
> 标签：sharepoint, moss, wss

我安装了 WSS 基础结构更新和 MOSS 基础结构更新 ( [http://technet.microsoft.com/en-us/office/sharepointserver/bb735839.aspx](http://technet.microsoft.com/en-us/office/sharepointserver/bb735839.aspx) )，现在我无法在旧版本上恢复内容数据库。不知道有没有办法卸载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T15:34:13.950

我能想到的唯一选择是在另一台与备份完成时具有相同更新级别的机器上恢复备份，将整个机器升级到基础架构更新，备份此环境并将其恢复到您已经升级的-环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T14:59:03.207

在 MOSS 或 WSS 中不支持卸载更新的方法。您唯一的选择是恢复备份，这就是为什么您应该始终备份所有内容并在安装更新之前测试备份的完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T16:52:42.420

正如其他人指出的那样，没有这样的选择，唯一的选择是从备份中恢复。

当您尝试将内容数据库还原到不同的盒子时，两者都应该安装相同的更新集，否则您可能会遇到各种问题。

# multithreading - 在未来的多核计算机中，哪种编程范式最成功？

> ID：84143
> 
> 赞同：0
> 
> 时间：2008-09-17T14:58:37.480
> 
> 标签：multithreading, multicore, paradigms

今天，我们中的许多人在我们的桌面上有两个或更多的 CPU 内核。大多数应用程序的工作方式与我们只有一个内核时的工作方式非常相似。

但是当一台典型的台式机有 1000 多个内核时呢？

那么我们将使用什么编程范式。我们当前的线程和同步解决方案很少能很好地扩展到这么多内核。

你认为 Thread 类在 JDK 中被弃用了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T15:00:44.013

已经有人问过这个问题：[您今天推荐哪种并行编程模型来利用明天的众核处理器？](https://stackoverflow.com/questions/79999/what-parallel-programming-model-do-you-recommend-today-to-take-advantage-of-the)

# eclipse - org.eclipse.swt.SWTError：未添加项目

> ID：84147
> 
> 赞同：4
> 
> 时间：2008-09-17T14:58:57.543
> 
> 标签：eclipse, swt

当错误“org.eclipse.swt.SWTError: Item not added”再次出现时，有人知道如何恢复永不启动的日食吗？

我正在使用 WebSphere Studio Site Developer (Windows) 5.1.0

.metadata/log 文件中唯一的堆栈跟踪是：

`SESSION ----------------------------------------------------------------------
!ENTRY org.eclipse.core.launcher 4 0 sep 17, 2008 16:39:00.564
!MESSAGE Exception launching the Eclipse Platform:
!STACK
java.lang.reflect.InvocationTargetException: java.lang.reflect.InvocationTargetException: org.eclipse.swt.SWTError: Item not added
at java.lang.Throwable.<init>(Throwable.java)
at java.lang.Throwable.<init>(Throwable.java)
at org.eclipse.swt.SWTError.<init>(SWTError.java:82)
at org.eclipse.swt.SWTError.<init>(SWTError.java:71)
at org.eclipse.swt.SWT.error(SWT.java:2358)
at org.eclipse.swt.SWT.error(SWT.java:2262)
at org.eclipse.swt.widgets.Widget.error(Widget.java:385)
at org.eclipse.swt.widgets.Menu.createItem(Menu.java:464)
at org.eclipse.swt.widgets.MenuItem.<init>(MenuItem.java:77)
at org.eclipse.ui.internal.AcceleratorMenu.setAccelerators(AcceleratorMenu.java:177)
at org.eclipse.ui.internal.WWinKeyBindingService.updateAccelerators(WWinKeyBindingService.java:316)
at org.eclipse.ui.internal.WWinKeyBindingService.clear(WWinKeyBindingService.java:175)
at org.eclipse.ui.internal.WWinKeyBindingService.update(WWinKeyBindingService.java:267)
at org.eclipse.ui.internal.WWinKeyBindingService$1.partActivated(WWinKeyBindingService.java:107)
at org.eclipse.ui.internal.PartListenerList$1.run(PartListenerList.java:49)
at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1006)
at org.eclipse.core.runtime.Platform.run(Platform.java:413)
at org.eclipse.ui.internal.PartListenerList.firePartActivated(PartListenerList.java:47)
at org.eclipse.ui.internal.WorkbenchPage.firePartActivated(WorkbenchPage.java:1180)
at org.eclipse.ui.internal.WorkbenchPage.onActivate(WorkbenchPage.java:1833)
at org.eclipse.ui.internal.WorkbenchWindow$7.run(WorkbenchWindow.java:1496)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:69)
at org.eclipse.ui.internal.WorkbenchWindow.setActivePage(WorkbenchWindow.java:1483)
at org.eclipse.ui.internal.WorkbenchWindow.restoreState(WorkbenchWindow.java:1363)
at org.eclipse.ui.internal.Workbench.restoreState(Workbench.java:1263)
at org.eclipse.ui.internal.Workbench.access$10(Workbench.java:1223)
at org.eclipse.ui.internal.Workbench$12.run(Workbench.java:1141)
at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:1006)
at org.eclipse.core.runtime.Platform.run(Platform.java:413)
at org.eclipse.ui.internal.Workbench.openPreviousWorkbenchState(Workbench.java:1093)
at org.eclipse.ui.internal.Workbench.init(Workbench.java:870)
at org.eclipse.ui.internal.Workbench.run(Workbench.java:1373)
at org.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoader.java:858)
at org.eclipse.core.boot.BootLoader.run(BootLoader.java:461)
at java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:207)
at java.lang.reflect.Method.invoke(Method.java:271)
at org.eclipse.core.launcher.Main.basicRun(Main.java:291)
at org.eclipse.core.launcher.Main.run(Main.java:747)
at org.eclipse.core.launcher.Main.main(Main.java:583)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-22T15:16:11.227

我有完全相同的问题。我没有重新启动我的机器，只是使用“eclipse -clean”来启动 eclipse。有效。感谢乔恩的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T03:45:37.033

重新启动计算机是否可以解决能够打开工作区的问题？有一篇论坛帖子 ( [http://forums.sun.com/thread.jspa?messageID=3131484#3131484](http://forums.sun.com/thread.jspa?messageID=3131484#3131484) ) 描述了与上面显示的相同堆栈跟踪的类似问题。在帖子中，作者提到他们的机器资源不足（他们没有具体说明什么类型的资源资源不足）。

如果重新启动计算机不起作用，您可能需要尝试使用 clean 选项启动 eclipse：

**日食-清洁**

clean 选项将清除 Eclipse 创建的所有缓存。

如果所有其他方法都失败了，您可能需要在[https://bugs.eclipse.org/bugs/](https://bugs.eclipse.org/bugs/)上为这个问题打开一个错误。包括工作区的副本（如果可能），并在错误中包括堆栈跟踪对于试图诊断问题的人来说是有用的信息。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T19:30:32.243

好吧，您可以尝试的一些事情是：

1.  删除工作区 .metadata 目录。显然，您将丢失工作台配置。
2.  重命名您的 .metadata 目录。启动 Eclipse，您将拥有一个新的 .metadata 目录。关闭 Eclipse，删除新目录，然后重命名原始目录。它有时有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-02-17T09:15:33.290

你好，

检查任务管理器，是否有任何 java 进程（java.exe 或 javaw.exe）在工作台关闭后仍在运行。杀死那些进程。您将解决此错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-15T20:29:22.790

当我`eclipse.ini`从 eclipse 安装文件夹（存在 .exe 的位置）中移动时，这很有效。当我试图增加文件中的堆大小时遇到​​了这个问题`eclipse.ini`（尽管我之前已经看到过这个错误）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T03:08:02.287

对我来说，我认为这与我的双显示器设置和我安装的实际多显示器有关。我禁用了它，问题就消失了。

# java - 用于 Java 的 Web 脚本

> ID：84149
> 
> 赞同：0
> 
> 时间：2008-09-17T14:59:04.017
> 
> 标签：java, jsp, scripting

在浏览器中呈现由 Java 进程生成的数据的好方法是什么？

我广泛使用了 JSP 和各种相关框架（[JSTL](http://java.sun.com/products/jsp/jstl/)、[Struts](http://struts.apache.org/)、[Tapestry](http://tapestry.apache.org/)等），以及与 JSP 无关的更全面的框架（[GWT](http://code.google.com/webtoolkit/)、[OpenLaszlo](http://www.openlaszlo.org/)）。没有一个解决方案完全令人满意——在大多数情况下，框架对我的需求来说过于受限或过于复杂，而其他解决方案则需要对现有代码进行大量重构。此外，大多数框架似乎都存在性能问题。

目前，我倾向于通过返回 JSON 的简单 servlet 公开我的 java 数据，然后使用 PHP 或 Ruby 呈现数据的解决方案。这具有立即将我的服务公开为 Web 服务的额外好处，但我想知道我是否在这里重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T20:11:41.613

我个人使用[Tapestry 5](http://tapestry.apache.org/tapestry5/)来使用 Java 创建网页，但我同意它有时可能有点矫枉过正。我会考虑使用 JAX-RS（[java.net 项目](https://jsr311.dev.java.net/)，[jsr311](http://jcp.org/en/jsr/detail?id=311)），它使用起来非常简单，它支持开箱即用地编组和解组 XML 对象。可以通过[Jettison](http://jettison.codehaus.org/)扩展它以支持 JSON 。

我尝试过两种实现：

*   [Jersey](http://jersey.java.net/) - JAX-RS 的参考实现。
*   [Resteasy](http://www.jboss.org/resteasy/) - 我更喜欢的实现，对编组和解组各种格式的良好支持。也相当稳定，并具有泽西岛的更多功能。

查看以下代码，了解 JAX-RS 可以为您做什么：

```
@Path("/")
class TestClass {
    @GET
    @Path("text")
    @Produces("text/plain")
    String getText() {
        return "String value";
    }
} 
```

这个小类将在服务器的根目录（类上的@Path）暴露自己，然后在 URI /text 暴露 getText() 方法并允许通过 HTTP GET 访问它。@Produces 注释告诉 JAX-RS 框架尝试将方法的结果转换为纯文本。

了解 JAX-RS 功能的最简单方法是阅读[规范](http://jcp.org/en/jsr/detail?id=311)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:04:21.023

我们正在使用[条纹](http://www.stripesframework.org/)。它为您提供了比直接 servlet 更多的结构，但它允许您通过 @UrlBinding 注释控制您的 url。我们使用它将 xml 和 json 流式传输回浏览器以获取 ajax 内容。

如果你想走这条路，你可以很容易地用另一种技术来使用它，但你实际上可能喜欢用条纹进行开发。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:04:23.427

查看[Restlet](http://restlet.org)以获得将域模型公开为 REST 服务（包括 JSON 和普通 XML 输出）的良好框架。

为了呈现您的信息，也许您可​​以在客户端使用 GWT 并使用您的数据服务？如果 GWT 不能让你的船浮起来，那么 JQuery 会吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T15:04:00.637

也许您可以将数据生成为 XML 并使用 XSLT 呈现它？

如果 Java 对您来说不够快，我不确定 PHP 或 Ruby 是否是答案！

# php - 如何循环浏览页面？

> ID：84163
> 
> 赞同：9
> 
> 时间：2008-09-17T15:00:30.723
> 
> 标签：php, html

这是我最近负责的一个挑战。我还没有想出最好的方法来做到这一点，也许其他人有一个想法。

使用 PHP 和/或 HTML，创建一个页面，该页面以给定的时间间隔在任意数量的其他页面中循环。

例如，我们会加载这个页面，它需要我们用 google 20 秒，然后到 yahoo 10 秒，然后再到 stackoverflow 180 秒，依此类推。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-17T16:45:33.560

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<title>Dashboard Example</title>
<style type="text/css">
body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
iframe { border: none; }
</style>
<script type="text/javascript">
var Dash = {
    nextIndex: 0,

    dashboards: [
        {url: "http://www.google.com", time: 5},
        {url: "http://www.yahoo.com", time: 10},
        {url: "http://www.stackoverflow.com", time: 15}
    ],

    display: function()
    {
        var dashboard = Dash.dashboards[Dash.nextIndex];
        frames["displayArea"].location.href = dashboard.url;
        Dash.nextIndex = (Dash.nextIndex + 1) % Dash.dashboards.length;
        setTimeout(Dash.display, dashboard.time * 1000);
    }
};

window.onload = Dash.display;
</script>
</head>
<body>
<iframe name="displayArea" width="100%" height="100%"></iframe>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:03:24.193

对内容使用单独的 iframe，然后使用 Javascript 到`delay()`一段时间并设置 iframe 的`location`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:03:53.913

当您被带到另一个站点（例如 Google）时，控制权会传递给该站点，因此为了让您的脚本继续运行，您需要将新站点加载到框架中，并保留您的脚本（我想最容易使用 Javascript 实现）在另一个框架中（可以做得非常小，所以你看不到它）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T17:51:15.367

我设法创造了这个东西。它不漂亮，但它确实有效。

```
<?php
# Path the config file, full or relative.
$configfile="config.conf"; 
$tempfile="tmp.html";
# Read the file into an array
$farray=file($configfile);  
# Count array elements
$count=count($farray);  
if(!isset($_GET['s'])){
    $s=0;
}else{  
    $s=$_GET['s'];
if($s==($count-1)){ # -1 because of the offset in starting our loop at 0 instead of 1
    $s=0;
}else{
    $s=$_GET['s']+1; # Increment the counter
}
}
# Get the line from the array
$entry=$farray[$s];
# Break the line on the comma into 2 entries
$arr=explode(",",$entry);       
# Now each line is in 2 pieces - URL and TimeDelay
$url=strtolower($arr[0]);
# Check our url to see if it has an HTTP prepended, if it doesn't, give it one.
$check=strstr($url,"http://"); 
if($check==FALSE){
    $url="http://".$url;
    }           
# Trim unwanted crap from the time
$time=rtrim($arr[1]);               
# Get a handle to the temp file
$tmphandle=fopen($tempfile,"w");
# What does our meta refresh look like?
$meta="<meta http-equiv=\"refresh\" content=\"".$time.";url=index.php?s=".$s."\">\n";
# The iframe to display
$content="<iframe src =\"".$url."\" height=\"100%\" width=\"100%\"></iframe>";
# roll up the meta and content to be written
$str=$meta.$content;
# Write it
fwrite($tmphandle,$str);
# Close the handle
fclose($tmphandle);
# Load the page
die(header("Location:tmp.html"));            
?> 
```

配置文件看起来像（URL，停留在该页面上的时间）：google.com,5 [http://yahoo.com,10](http://yahoo.com,10)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T15:09:13.290

想到的第一个解决方案是在框架集中执行此操作。隐藏其中一个框架，另一个显示有问题的页面。使用隐藏框架中的 Javascript 驱动页面转换。

```
function RefreshFrame()
{
    parent.VisibleFrame.location.href = urlArray[i];
    i++;

    if(i < urlArray.length) SetTimeout("RefreshFrame()", 20000);
}

var i = 0;
var urlArray = ['http://google.com','http://yahoo.com', 'http://www.search.com'];
RefreshFrame(); 
```

在此示例中，Javascript 将位于隐藏的框架中，您可以将可见框架命名为“VisibleFrame”。

免责声明：我只是在评论窗口写了这段代码，没有测试过

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T15:05:15.640

你可以很容易地用 JavaScript 做到这一点。这将有助于了解部署环境。是售货亭还是什么的？

对于 JavaScript 解决方案，提供一个包含 JavaScript 的页面，该页面将弹出一个新的浏览器窗口。然后控制器页面将导致新的浏览器窗口循环浏览一系列页面。这是我能想到的最简单的方法。

**编辑：** 同意西蒙的评论。此解决方案最适用于信息亭或大型公共显示环境，在这些环境中页面仅在没有任何用户交互的情况下显示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T15:05:34.533

取决于您的具体要求。如果您允许 JavaScript 并允许框架，那么您可以在您加载一些 JavaScript 的页面上的框架集中粘贴一个隐藏框架。然后，此 JavaScript 将使用 window.location 对象和 setTimeout 函数控制主框架的内容。

缺点是用户的地址栏不会更新为新的 URL。我不确定这将如何实现。如果您能澄清限制，我可以提供更多帮助。

**编辑**- Shad 的建议是可能的，除非用户触发该操作，否则浏览器可能会阻止弹出窗口。同样，您必须澄清是否允许弹出窗口。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T15:06:29.147

创建一个包含 IFrame 的包装 HTML 页面，大小为`100% x 100%`. 然后添加一些 javascript`src`在设置的间隔之间更改 IFrame 的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T15:07:39.050

我认为它必须像[gabbly.com](http://gabbly.com)一样工作，它吸收其他网站并在其上显示它们自己的内容。

一旦你读入了另一个站点并准备​​好显示它，你就不能真正用“PHP”来做；您必须发送一个 HTML 重定向元标记：

```
<meta HTTP-EQUIV="REFRESH" content="15; url=http://www.thepagecycler.com/nextpage.html"> 
```

或者您可以使用 Javascript 代替元标记。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T15:07:56.040

这在 PHP 脚本中是不可行的，除非您想编辑重定向。... PHP 是一种后端技术；您将需要在 Javascript 等中执行此操作。

据我所知，您要做的最好的事情是在您的 Web 服务器上创建一个文本文件，并根据该文本文件的超时时间加载不同的 HTTP 地址，然后将浏览器重定向到在该文件中找到的站点文本文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T15:24:12.910

该请求背后的理论基本上是能够从“信息亭”PC 循环浏览各种系统的网页仪表板。我监督一个数据中心，我们有几个监控系统，允许我查看仪表板的临时、系统运行时间等。这个想法是加载一个页面，该页面将在我指定的时间内从一个仪表板循环到另一个仪表板。 ，在这个板上 1 分钟，在下一个板上 30 秒，在下一个板上 2 分钟，依此类推.. Javascript 是绝对允许的（尽管我对此几乎没有经验）。我选择的媒介是 PHP/HTML，但我没有看到一种方法可以仅用它们来干净地实现这一点..

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-02-12T21:05:18.460

有很多方法可以做到这一点，iv 编写了几个脚本和工具，从 JS 到 Ruby

[最后使用http://dashboardrotator.com](http://dashboardrotator.com)要容易得多。它通过一个漂亮的简单 GUI 为我处理了浏览器重启、内存分配和意外关闭窗口。

# c# - 如何防止 .NET 运行时中的静态变量共享？

> ID：84164
> 
> 赞同：1
> 
> 时间：2008-09-17T15:00:40.190
> 
> 标签：c#, .net, multithreading

我正在开发一个使用类似[Robocode 的](http://robocode.sourceforge.net/)编程模型的游戏 (C#)：参与者继承一个基类并添加战略行为。然后游戏加载参与者的类实例，比赛开始。不幸的是，参与者可以通过在竞争对手类的实例之间共享静态变量来“作弊”。

如何防止 .NET 语言中的类实例之间共享静态变量？我知道这是在 Java 中通过为每个实例使用单独的 ClassLoader 来完成的。.NET 等价物是什么？

此外，我的测试表明，单独的 AppDomain 仅在加载扩展 MarshalByRefObject 的类时才有效。我想这是有道理的——如果你只是加载一个可序列化的类，这个类会被复制到当前的 AppDomain 中，所以来自不同 AppDomain 的第二个对象将共享它的静态变量。MarshalByRefObject 保证只有一个代理被加载到当前的 AppDomain 中，而静态数据留在加载的 AppDomain 中。另请参阅：http: [//blogs.msdn.com/ericlippert/archive/2004/05/27/143203.aspx](http://blogs.msdn.com/ericlippert/archive/2004/05/27/143203.aspx)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-17T15:02:14.087

将每个竞争对手加载到不同的 AppDomain。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-17T15:02:29.890

静态变量是每个 AppDomain 的，因此您可以考虑使用不同的 AppDomain，但我完全不知道可能产生的其他后果。

否则，您可以使用反射事先检查类，并拒绝任何具有静态成员的类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T16:40:20.717

```
if(typeof(CompetitorClass).GetFields(BindingFlags.Static))
{
 // take necessary steps against cheater!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T16:36:03.970

我没有具体的答案，但我会看看 .NET [Terrarium](http://www.codeplex.com/terrarium2)项目。所有参与者都是用户加载的 DLL。他们做了很多巧妙的事情来防止加载/执行不安全和作弊的代码。

Justin Rogers[撰写了大量](http://weblogs.asp.net/justin_rogers/archive/tags/Terrarium/default.aspx)关于 Terrarium 实现细节的文章。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-01-15T00:41:08.363

这是我正在研究的真实 Robocode 的 .NET 插件中的[解决方案。](https://robocode.svn.sourceforge.net/svnroot/robocode/robocode/branches/nrobocode-workspace4/plugins/dotnet/robocode.dotnet.nhost/src/host/seed/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-15T01:21:36.810

[ThreadStatic] 属性对您有用吗？只要您的玩家处于不同的线程中，它可能就可以解决问题。从 MSDN 网站：

> 用 ThreadStaticAttribute 标记的静态（在 Visual Basic 中为 Shared）字段不在线程之间共享。每个执行线程都有一个单独的字段实例，并独立设置和获取该字段的值。如果在不同的线程上访问该字段，它将包含不同的值。

# sql - SQL Server 中的跨数据库 information_schema Joins

> ID：84165
> 
> 赞同：2
> 
> 时间：2008-09-17T15:00:42.953
> 
> 标签：sql, sql-server, data-migration

我试图为将数据从一个模式版本迁移到另一个模式提供一个通用的解决方案。当源架构中的列数据类型与目标的列数据类型不匹配时，就会出现问题。我想创建一个查询，该查询将对列数据类型进行初步比较，以返回需要在迁移之前修复哪些列。

我目前的方法是返回目录之间不匹配`information_schema.columns`的表和列名。`DATA_TYPE`但是，`information_schema`直接查询只会返回连接目录中的结果。

有没有人写过这样的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T15:26:38.367

我通过直接查询系统表来做到这一点。查看`syscolumns`和`sysobjects`表。您也可以跨链接服务器加入

```
select t1.name as tname,c1.name as cname
from adventureworks.dbo.syscolumns c1
join adventureworks.dbo.sysobjects t1 on c1.id = t1.id 
where t1.type = 'U' 
order by t1.name,c1.colorder 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T15:08:28.910

我一直很幸运能够[比较 Red Gate Schema](http://www.red-gate.com/products/SQL_Compare/index.htm)，我认为它可以满足您的要求。便宜两倍的价格！

# service-factory - 服务工厂：极长的路径/文件名问题

> ID：84174
> 
> 赞同：1
> 
> 时间：2008-09-17T15:01:15.963
> 
> 标签：service-factory

我一直在尝试[服务工厂](http://www.codeplex.com/servicefactory)，但在长文件名方面遇到了一些问题——超过了 Vista/XP 的限制。问题在于，从模型服务工厂生成代码时，所有内容都带有指定的命名空间。使文件夹结构变得巨大。例如开始于

c:\work\sftest\MyWebService

我在数据合同和服务接口中创建了每个名称长度适中的模型。我将命名空间设置为 MyCompany.SFTest.MyWebservice

生成代码后，我最终得到

```
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Business Logic
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Resource 访问
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service 接口
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service Interface\MyCompany.SFTest.MyWebService.DataContracts
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service Interface\MyCompany.SFTest.MyWebService.FaultContracts
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service Interface\MyCompany.SFTest.MyWebService.MessageContracts
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service Interface\MyCompany.SFTest.MyWebService.ServiceContracts
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service Interface\MyCompany.SFTest.MyWebService.ServiceImplementation
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Tests

```

每个文件夹下都有一个具有相同前缀的项目文件

```
c:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service Interface\MyCompany.SFTest.MyWebService.ServiceImplementation\MyCompany.SFTest.MyWebService.ServiceImplementation.proj

```

这会破坏配方，因为 Windows 不能接受超过特定长度的文件名。

是否有必要在每个文件夹名称中明确包含命名空间？显然，在某些时候，我可能想将服务分支到另一个位置，但出于与上述相同的原因，可能无法做到。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-16T04:05:53.310

我们确实遇到了这个问题，我们通过使我们的服务工厂成为一个非常薄的普通库（已用 WCF 东西标记）的包装器来解决它。这给了我们一个通常很深的项目（工厂），然后是一个非常深的包装器工厂（没有所有提取接口和逻辑等等）。

我们仍然有一些问题——但主要是在客户端——我们的服务器大部分都没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:20:41.687

我不知道服务工厂，所以我不确定这是否会有所帮助。无论如何：也许来自 MSDN的[命名文件或目录的文章可以提供帮助。](http://msdn.microsoft.com/en-us/library/aa365247.aspx)

Windows API 具有路径的最大长度 (MAX_PATH = 260)。如果您想使用更长的路径名，您必须使用 API 的 Unicode 版本，方法是在路径前加上“\\?\”，即使用

`"\\?\C:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service Interface\MyCompany.SFTest.MyWebService.ServiceImplementation\MyCompany.SFTest.MyWebService.ServiceImplementation.proj"`

代替

`"C:\work\sftest\MyWebService\MyCompany.SFTest.MyWebService\Source\Service Interface\MyCompany.SFTest.MyWebService.ServiceImplementation\MyCompany.SFTest.MyWebService.ServiceImplementation.proj"`

服务工厂是否允许这种表示法？

# windows - 如何在 Windows 环境中使用 Trac 和 SVN 实现 Post Commit Hook？

> ID：84178
> 
> 赞同：6
> 
> 时间：2008-09-17T15:01:46.350
> 
> 标签：windows, svn, hook, trac

我在带有 Trac / SVN 的 Windows 环境中运行，我希望提交到存储库以集成到 Trac 并关闭 SVN 注释中记录的错误。

我知道有一些 post commit hooks 可以做到这一点，但没有太多关于如何在 Windows 上做到这一点的信息。

有人成功完成了吗？你采取了哪些步骤来实现它？

这是我需要在 SVN 中放置的钩子，但我不确定如何在 Windows 环境中执行此操作。

[Trac 提交后挂钩](http://trac.edgewall.org/browser/trunk/contrib/trac-post-commit-hook?rev=920)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T16:33:54.833

本杰明的答案很接近，但在 Windows 上，您需要为钩子脚本文件提供可执行扩展名，例如 .bat 或 .cmd。我使用 .cmd。您可以使用模板脚本，即 unix shell 脚本、shell 脚本并将它们转换为 .bat/.cmd 语法。

但要回答与 Trac 集成的问题，请按照以下步骤操作。

1.  确保 Python.exe 在系统路径上。这将使您的生活更轻松。

2.  在 \hooks 文件夹中创建 post-commit.cmd。这是 Subversion 将在提交后事件上执行的实际挂钩脚本。

    ```
    @ECHO OFF

    :: POST-COMMIT HOOK
    ::
    :: The post-commit hook is invoked after a commit.  Subversion runs
    :: this hook by invoking a program (script, executable, binary, etc.)
    :: named 'post-commit' (for which this file is a template) with the 
    :: following ordered arguments:
    ::
    ::   [1] REPOS-PATH   (the path to this repository)
    ::   [2] REV          (the number of the revision just committed)
    ::
    :: The default working directory for the invocation is undefined, so
    :: the program should set one explicitly if it cares.
    ::
    :: Because the commit has already completed and cannot be undone,
    :: the exit code of the hook program is ignored.  The hook program
    :: can use the 'svnlook' utility to help it examine the
    :: newly-committed tree.
    ::
    :: On a Unix system, the normal procedure is to have 'post-commit'
    :: invoke other programs to do the real work, though it may do the
    :: work itself too.
    ::
    :: Note that 'post-commit' must be executable by the user(s) who will
    :: invoke it (typically the user httpd runs as), and that user must
    :: have filesystem-level permission to access the repository.
    ::
    :: On a Windows system, you should name the hook program
    :: 'post-commit.bat' or 'post-commit.exe',
    :: but the basic idea is the same.
    :: 
    :: The hook program typically does not inherit the environment of
    :: its parent process.  For example, a common problem is for the
    :: PATH environment variable to not be set to its usual value, so
    :: that subprograms fail to launch unless invoked via absolute path.
    :: If you're having unexpected problems with a hook program, the
    :: culprit may be unusual (or missing) environment variables.
    :: 
    :: Here is an example hook script, for a Unix /bin/sh interpreter.
    :: For more examples and pre-written hooks, see those in
    :: the Subversion repository at
    :: http://svn.collab.net/repos/svn/trunk/tools/hook-scripts/ and
    :: http://svn.collab.net/repos/svn/trunk/contrib/hook-scripts/

    setlocal

    :: Debugging setup
    :: 1\. Make a copy of this file.
    :: 2\. Enable the command below to call the copied file.
    :: 3\. Remove all other commands
    ::call %~dp0post-commit-run.cmd %* > %1/hooks/post-commit.log 2>&1

    :: Call Trac post-commit hook
    call %~dp0trac-post-commit.cmd %* || exit 1

    endlocal 
    ```

3.  在 \hooks 文件夹中创建 trac-post-commit.cmd：

    ```
    @ECHO OFF
    ::
    :: Trac post-commit-hook script for Windows
    ::
    :: Contributed by markus, modified by cboos.

    :: Usage:
    ::
    :: 1) Insert the following line in your post-commit.bat script
    ::
    :: call %~dp0\trac-post-commit-hook.cmd %1 %2
    ::
    :: 2) Check the 'Modify paths' section below, be sure to set at least TRAC_ENV

    setlocal

    :: ----------------------------------------------------------
    :: Modify paths here:

    :: -- this one *must* be set
    SET TRAC_ENV=D:\projects\trac\membershipdnn

    :: -- set if Python is not in the system path
    SET PYTHON_PATH=

    :: -- set to the folder containing trac/ if installed in a non-standard location
    SET TRAC_PATH=
    :: ----------------------------------------------------------

    :: Do not execute hook if trac environment does not exist
    IF NOT EXIST %TRAC_ENV% GOTO :EOF

    set PATH=%PYTHON_PATH%;%PATH%
    set PYTHONPATH=%TRAC_PATH%;%PYTHONPATH%

    SET REV=%2

    :: Resolve ticket references (fixes, closes, refs, etc.)
    Python "%~dp0trac-post-commit-resolve-ticket-ref.py" -p "%TRAC_ENV%" -r "%REV%"

    endlocal 
    ```

4.  在 \hooks 文件夹中创建 trac-post-commit-resolve-ticket-ref.py。我使用[了 EdgeWall 中的相同脚本](http://trac.edgewall.org/browser/trunk/contrib/trac-post-commit-hook?rev=920)，只是我将其重命名以更好地阐明其用途。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-21T04:28:19.530

好吧，既然我有时间在弄清楚这一切之后发布我的经验，感谢克雷格让我走上正轨。这是您需要做的（至少对于 SVN v1.4 和 Trac v0.10.3）：

1.  找到您要为其启用 Post Commit Hook 的 SVN 存储库。
2.  在 SVN 存储库中有一个名为 hooks 的目录，这是您放置 post commit 钩子的地方。
3.  创建一个文件 post-commit.bat （这是由 SVN post commit 自动调用的批处理文件）。
4.  将以下代码放在 post-commit.bat 文件中（这将调用您的 post-commit cmd 文件，传递 SVN 自动传递的参数 %1 是存储库，%2 是提交的修订版。

%~dp0\trac-post-commit-hook.cmd %1 %2

5.  现在创建 trac-post-commit-hook.cmd 文件，如下所示：

> @ECHO OFF
> ::
> :: 用于 Windows 的 Trac 提交后挂钩脚本
> ::
> :: 由 markus 提供，由 cboos 修改。
> 
> :: 用法:
> ::
> :: 1) 在 post-commit.bat 脚本中插入以下行
> ::
> :: call %~dp0\trac-post-commit-hook.cmd %1 %2
> ::
> :: 2)检查下面的“修改路径”部分，确保至少设置 TRAC_ENV
> 
> :: -------------------------------- --------------------------
> :: 在此处修改路径：
> 
> :: -- 这个*必须*设置
> SET TRAC_ENV=C:\trac\MySpecialProject
> 
> :: -- 如果 Python 不在系统路径中，则
> 设置 :: SET PYTHON_PATH=
> 
> :: -- 如果安装在非标准位置，则设置为包含 trac/ 的文件夹
> :: SET TRAC_PATH=
> :: ------------------------ ----------------------------------
> 
> :: 如果 trac 环境不存在则不执行钩子
> IF NOT EXIST % TRAC_ENV% GOTO :EOF
> 
> set PATH=%PYTHON_PATH%;%PATH%
> set PYTHONPATH=%TRAC_PATH%;%PYTHONPATH%
> 
> SET REV=%2
> 
> :: GET THE AUTHOR AND THE LOG MESSAGE
> for /F %%A in ('svnlook author -r %REV% %1') 设置 AUTHOR=%%A
> for /F "delims==" %%B in ('svnlook log -r %REV% %1') 设置 LOG=%%B
> 
> ::调用 Python 脚本
> Python "%~dp0\trac-post-commit-hook" -p "%TRAC_ENV%" -r "%REV%" -u "%AUTHOR%" -m "％日志％”

这里最重要的部分是设置您的 TRAC_ENV，它是存储库根目录的路径 (SET TRAC_ENV=C:\trac\MySpecialProject)

此脚本中的下一个重要的事情是执行以下操作：

> :: GET THE AUTHOR AND THE LOG MESSAGE
> for /F %%A in ('svnlook author -r %REV% %1') do set AUTHOR=%%A
> for /F "delims==" %%B in (' svnlook log -r %REV% %1') 设置 LOG=%%B

如果您在上面的脚本文件中看到我正在使用 svnlook（它是一个带有 SVN 的命令行实用程序）来获取 LOG 消息和提交到存储库的作者。

然后，脚本的下一行实际上是调用 Python 代码来执行票据的关闭并解析日志消息。我必须修改它以传递日志消息和作者（我在 Trac 中使用的用户名与 SVN 中的用户名匹配，所以这很容易）。

> 调用 Python 脚本
> Python "%~dp0\trac-post-commit-hook" -p "%TRAC_ENV%" -r "%REV%" -u "%AUTHOR%" -m "%LOG%"

脚本中的上述行将向 python 脚本传递 Trac 环境、修订、提交的人以及他们的评论。

这是我使用的 Python 脚本。我在常规脚本之外做的一件事是我们使用了一个自定义字段 (fixed_in_ver)，我们的 QA 团队使用该字段来判断他们正在验证的修复是否在他们在 QA 中测试的代码版本中。因此，我修改了 python 脚本中的代码以更新票证上的该字段。您可以删除不需要的代码，但这是一个很好的例子，说明如果您也想这样做，可以在 Trac 中更新自定义字段。

我通过让用户有选择地在他们的评论中包含以下内容来做到这一点：

> （版本 2.1.2223.0）

然后，我使用 python 脚本与正则表达式一起使用的相同技术来获取信息。还不错。

无论如何，这是我使用的 python 脚本，希望这是一个很好的教程，关于我为使其在 Windows 世界中工作所做的一切，所以你们都可以在自己的商店中利用它......

如果您不想处理我更新自定义字段的附加代码，请从上面 Craig 提到的这个位置获取基本脚本（[来自 Edgewall](http://trac.edgewall.org/browser/trunk/contrib/trac-post-commit-hook?rev=920)的脚本）

```
#!/usr/bin/env python

# trac-post-commit-hook
# ----------------------------------------------------------------------------
# Copyright (c) 2004 Stephen Hansen 
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to
# deal in the Software without restriction, including without limitation the
# rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
# sell copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
#   The above copyright notice and this permission notice shall be included in
#   all copies or substantial portions of the Software. 
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
# IN THE SOFTWARE.
# ----------------------------------------------------------------------------

# This Subversion post-commit hook script is meant to interface to the
# Trac (http://www.edgewall.com/products/trac/) issue tracking/wiki/etc 
# system.
# 
# It should be called from the 'post-commit' script in Subversion, such as
# via:
#
# REPOS="$1"
# REV="$2"
# LOG=`/usr/bin/svnlook log -r $REV $REPOS`
# AUTHOR=`/usr/bin/svnlook author -r $REV $REPOS`
# TRAC_ENV='/somewhere/trac/project/'
# TRAC_URL='http://trac.mysite.com/project/'
#
# /usr/bin/python /usr/local/src/trac/contrib/trac-post-commit-hook \
#  -p "$TRAC_ENV"  \
#  -r "$REV"       \
#  -u "$AUTHOR"    \
#  -m "$LOG"       \
#  -s "$TRAC_URL"
#
# It searches commit messages for text in the form of:
#   command #1
#   command #1, #2
#   command #1 & #2 
#   command #1 and #2
#
# You can have more then one command in a message. The following commands
# are supported. There is more then one spelling for each command, to make
# this as user-friendly as possible.
#
#   closes, fixes
#     The specified issue numbers are closed with the contents of this
#     commit message being added to it. 
#   references, refs, addresses, re 
#     The specified issue numbers are left in their current status, but 
#     the contents of this commit message are added to their notes. 
#
# A fairly complicated example of what you can do is with a commit message
# of:
#
#    Changed blah and foo to do this or that. Fixes #10 and #12, and refs #12.
#
# This will close #10 and #12, and add a note to #12.

import re
import os
import sys
import time 

from trac.env import open_environment
from trac.ticket.notification import TicketNotifyEmail
from trac.ticket import Ticket
from trac.ticket.web_ui import TicketModule
# TODO: move grouped_changelog_entries to model.py
from trac.util.text import to_unicode
from trac.web.href import Href

try:
    from optparse import OptionParser
except ImportError:
    try:
        from optik import OptionParser
    except ImportError:
        raise ImportError, 'Requires Python 2.3 or the Optik option parsing library.'

parser = OptionParser()
parser.add_option('-e', '--require-envelope', dest='env', default='',
                  help='Require commands to be enclosed in an envelope. If -e[], '
                       'then commands must be in the form of [closes #4]. Must '
                       'be two characters.')
parser.add_option('-p', '--project', dest='project',
                  help='Path to the Trac project.')
parser.add_option('-r', '--revision', dest='rev',
                  help='Repository revision number.')
parser.add_option('-u', '--user', dest='user',
                  help='The user who is responsible for this action')
parser.add_option('-m', '--msg', dest='msg',
                  help='The log message to search.')
parser.add_option('-c', '--encoding', dest='encoding',
                  help='The encoding used by the log message.')
parser.add_option('-s', '--siteurl', dest='url',
                  help='The base URL to the project\'s trac website (to which '
                       '/ticket/## is appended).  If this is not specified, '
                       'the project URL from trac.ini will be used.')

(options, args) = parser.parse_args(sys.argv[1:])

if options.env:
    leftEnv = '\\' + options.env[0]
    rghtEnv = '\\' + options.env[1]
else:
    leftEnv = ''
    rghtEnv = ''

commandPattern = re.compile(leftEnv + r'(?P<action>[A-Za-z]*).?(?P<ticket>#[0-9]+(?:(?:[, &]*|[ ]?and[ ]?)#[0-9]+)*)' + rghtEnv)
ticketPattern = re.compile(r'#([0-9]*)')
versionPattern = re.compile(r"\(version[ ]+(?P<version>([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+))\)")

class CommitHook:
    _supported_cmds = {'close':      '_cmdClose',
                       'closed':     '_cmdClose',
                       'closes':     '_cmdClose',
                       'fix':        '_cmdClose',
                       'fixed':      '_cmdClose',
                       'fixes':      '_cmdClose',
                       'addresses':  '_cmdRefs',
                       're':         '_cmdRefs',
                       'references': '_cmdRefs',
                       'refs':       '_cmdRefs',
                       'see':        '_cmdRefs'}

    def __init__(self, project=options.project, author=options.user,
                 rev=options.rev, msg=options.msg, url=options.url,
                 encoding=options.encoding):
        msg = to_unicode(msg, encoding)
        self.author = author
        self.rev = rev
        self.msg = "(In [%s]) %s" % (rev, msg)
        self.now = int(time.time()) 
        self.env = open_environment(project)
        if url is None:
            url = self.env.config.get('project', 'url')
        self.env.href = Href(url)
        self.env.abs_href = Href(url)

        cmdGroups = commandPattern.findall(msg)

        tickets = {}

        for cmd, tkts in cmdGroups:
            funcname = CommitHook._supported_cmds.get(cmd.lower(), '')

            if funcname:

                for tkt_id in ticketPattern.findall(tkts):
                    func = getattr(self, funcname)
                    tickets.setdefault(tkt_id, []).append(func)

        for tkt_id, cmds in tickets.iteritems():
            try:
                db = self.env.get_db_cnx()

                ticket = Ticket(self.env, int(tkt_id), db)
                for cmd in cmds:
                    cmd(ticket)

                # determine sequence number... 
                cnum = 0
                tm = TicketModule(self.env)
                for change in tm.grouped_changelog_entries(ticket, db):
                    if change['permanent']:
                        cnum += 1

                # get the version number from the checkin... and update the ticket with it.
                version = versionPattern.search(msg)
                if version != None and version.group("version") != None:
                    ticket['fixed_in_ver'] = version.group("version")

                ticket.save_changes(self.author, self.msg, self.now, db, cnum+1)
                db.commit()

                tn = TicketNotifyEmail(self.env)
                tn.notify(ticket, newticket=0, modtime=self.now)
            except Exception, e:
                # import traceback
                # traceback.print_exc(file=sys.stderr)
                print>>sys.stderr, 'Unexpected error while processing ticket ' \
                                   'ID %s: %s' % (tkt_id, e)

    def _cmdClose(self, ticket):
        ticket['status'] = 'closed'
        ticket['resolution'] = 'fixed'

    def _cmdRefs(self, ticket):
        pass

if __name__ == "__main__":
    if len(sys.argv) < 5:
        print "For usage: %s --help" % (sys.argv[0])
    else:
        CommitHook() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:13:17.227

提交提交钩子位于“钩子”目录中，只要您将存储库放在服务器端。我不知道你在你的环境中哪里有它们，所以这只是一个例子

例如（窗口）：

```
C:\Subversion\repositories\repo1\hooks\post-commit 
```

例如（llinux/unix）：

```
/usr/local/subversion/repositories/repo1/hooks/post-commit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-10T18:16:34.813

我要添加的一件事是“代码猴子的答案是完美的” - 是要警惕这一点（我的错误）

```
:: Modify paths here:

:: -- this one must be set
SET TRAC_ENV=d:\trac\MySpecialProject

:: -- set if Python is not in the system path
:: SET PYTHON_PATH=**d:\python**

:: -- set to the folder containing trac/ if installed in a non-standard location 
:: SET TRAC_PATH=**d:\python\Lib\site-packages\trac** 
```

我没有设置非系统路径，我花了一段时间才看到明显的：D

只要匹配确定没有人犯同样的错误！感谢代码猴子！1000000000 点 :D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-02T20:22:03.290

首先非常感谢 Code Monkey！

但是，根据您的 trac 版本获取正确的 python 脚本很重要。要获得适当的版本，SVN 检查文件夹：

[http://svn.edgewall.com/repos/trac/branches/xxx](http://svn.edgewall.com/repos/trac/branches/) **-stable** /contrib

其中**xxx**对应于您正在使用的 trac 版本，例如：0.11

否则，您将收到如下所示的提交后错误：

提交失败（详情如下）：“/svn/project/trunk/web/directory/”的合并：200 OK

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-08-21T02:50:34.023

对于所有想要安装最新 trac (0.11.5) 的 Windows 用户：按照 Trac 网站上名为 TracOnWindows 的说明进行操作。

即使您有 64 位 Windows，也请下载 32 位 1.5 Python。注意：我在某处看到了如何编译 trac 以在 64 位系统上本地工作的说明。

当您安装所需的所有内容时，请转到存储库文件夹。有文件夹挂钩。在里面放了 Code Monkey 提到的文件，但不要像他那样创建“trac-post-commit-resolve-ticket-ref.py”。听取 Quant Analyst 的建议，按照他说的做：

“但是，根据您的 trac 版本获得正确的 python 脚本很重要。要获得适当的版本，SVN 检查文件夹： [http](http://svn.edgewall.com/repos/trac/branches/) : //svn.edgewall.com/repos/trac/branches/xxx-stable/contrib其中 xxx 对应于您正在使用的 trac 版本，例如：0.11"

从那里下载文件“trac-post-commit-hook”并将其放入 hooks 文件夹中。

在 trac-post-commit.cmd 中编辑这些行

> SET PYTHON_PATH="python 安装文件夹的路径"
> 
> SET TRAC_ENV="执行 tracd initenv 的文件夹路径"

记住没有最后一个\ !!!

我已将最后一行 -r "%REV%" 中的引号删除为 -r %REV% 但我不知道是否需要这样做。这现在不起作用（至少在我的 win 2008 服务器上），因为钩子会失败（提交会正常）。这与权限有关。默认情况下，权限是受限的，我们需要允许 python 或 svn 或 trac（我不知道）来更改 trac 信息。因此，转到您的 trac 文件夹、项目文件夹、db 文件夹，右键单击 trac.db 并选择属性。转到安全选项卡并编辑权限以允许每个人完全控制。这不是很安全，但我在这个安全问题上浪费了一整天，我不想浪费另一个只是为了找到你应该为哪个用户启用权限。

希望这可以帮助....

# linux - Samba，其他非交互式帐户 - noshell、nologin 还是空白？

> ID：84180
> 
> 赞同：1
> 
> 时间：2008-09-17T15:01:47.490
> 
> 标签：linux, unix, shell, solaris, samba

跨 Solaris 和 Redhat linux 系统执行用户帐户清理，其中许多系统具有许多 Samba 共享。

人们对于为非交互式 Samba 用户创建本地 unix 帐户有什么偏好？特别是外壳条目：

1.  无壳
2.  登录
3.  空白的

为什么？

JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T15:16:58.140

我已经看到 shell 设置为`passwd`命令，因此登录只提供更改密码的机会。这在您的非交互式用户案例中可能合适，也可能不合适，但它的好处是允许人们在不打扰管理员的情况下更改密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:37:31.710

我一直认为 /bin/false 是标准。一些 ISP 使用一个小菜单系统，让他们可以更改密码/联系人/手指信息，检查使用情况等。无论您使用什么，如果您希望用户成为，您可能也希望将其添加到 /etc/shells 文件中例如，能够使用 FTP，因为对于未使用该文件中列出的 shell 的用户，某些服务将被拒绝。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:03:30.527

我通常把我的所有东西都发送到 /dev/null 这样我就不必担心了。我认识一些将其设置为 /bin/logout 的人，这样当有人登录时，他们就会被注销。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-18T18:18:06.403

不要做空。运行 /bin/sh。

# sql-server-2005 - SSRS 2005 - 循环报告参数

> ID：84195
> 
> 赞同：7
> 
> 时间：2008-09-17T15:03:41.417
> 
> 标签：sql-server-2005, reporting-services, parameters

我希望能够遍历报告中所有已定义的参数，并构建参数名称和值的显示字符串。然后我会在报告上显示结果，以便用户知道哪些参数用于该特定执行。唯一的问题是我无法遍历参数集合。Parameters 集合上似乎没有索引器，似乎也没有实现 IEnumerable。有没有人能够做到这一点？我正在使用 SSRS 2005，它必须在报告代码中实现（即，没有外部程序集）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T19:44:23.363

不幸的是，看起来没有简单的方法可以做到这一点。有关详细信息，请参阅[http://www.jameskovacs.com/blog/DiggingDeepIntoReportingServices.aspx](http://www.jameskovacs.com/blog/DiggingDeepIntoReportingServices.aspx)。如果您查看[该帖子的评论](http://www.jameskovacs.com/blog/CommentView.aspx?guid=31eeaafd-a118-4e76-917d-78d54441aee9#commentstart)，有一些方法可以解决这个问题，但它们不是很优雅。最简单的解决方案将要求您在报告代码中的某处有一个报告参数列表，这显然违反了[DRY](http://en.wikipedia.org/wiki/DRY)原则，但如果您想要最简单的解决方案，您可能只需要忍受它。

您可能想重新考虑没有外部程序集的约束，因为在我看来，使用外部程序集执行此操作会容易得多。或者，如果您的报告不会有太大变化，您可以手动创建参数名称和值的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-18T19:54:24.330

如果我理解您的问题，请按照我的操作：在报告上放置一个文本框，然后在设置报告时插入以下内容：="Parameter1: " + Parameters!Parameter.Label + ", Parameter2: " + 参数！Parameter2.Label...

当然，这不是最漂亮的东西，但它在我们的应用程序中运行良好。

而且我使用的是标签而不是值，因为我们有日期时间值，并且用户只关心短日期或月份和年份（取决于情况），而且我已经在设置参数时完成了格式化工作.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-21T23:45:23.630

我至少可以想到两种方法来做到这一点。第一个可能有效，第二个肯定有效。

1.  使用网络服务。我很确定我看到了用于获取参数集合的 API。即使没有直接访问，您也可以始终创建标准集合并在 foreach 循环中将 ReportParameter 对象从一个复制到另一个 - 然后访问 Count，通过取消引用 ReportParameter 实例可以使用各个参数属性。

2.  报告是 RDL。RDL 是 XML。创建一个 XmlDocument 并加载 RDL 文件，然后使用 DOM 来做*任何您喜欢*的事情，包括设置默认值甚至重写连接字符串。

如果您的应用程序没有对 RDL 文件的文件系统访问权限，您可以通过 Web 服务获取它们。

# visual-studio - 在 Visual Studio 中向编辑器添加指南

> ID：84209
> 
> 赞同：355
> 
> 时间：2008-09-17T15:04:28.450
> 
> 标签：visual-studio, ide, registry

**介绍**

我一直在寻找一种方法来让 Visual Studio 在一定数量的字符之后画一条线。

下面是为各种版本的 Visual Studio启用这些所谓的*指南的指南。*

**Visual Studio 2013 或更高版本**

安装 Paul Harrington 的[编辑指南扩展](http://visualstudiogallery.msdn.microsoft.com/da227a0b-0e31-4a11-8f6b-3a149cf2e459/view/Reviews)。

**视觉工作室 2010 和 2012**

1.  [为VS 2010](http://visualstudiogallery.msdn.microsoft.com/0fbf2878-e678-4577-9fdb-9030389b338c)或[VS 2012](http://visualstudiogallery.msdn.microsoft.com/da227a0b-0e31-4a11-8f6b-3a149cf2e459?SRC=Home)安装 Paul Harrington 的 Editor Guidelines 扩展。
2.  在以下位置打开注册表：
    VS 2010: `HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\Text Editor`
    VS 2012:`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\Text Editor`
    并添加一个名为`Guides`value的新字符串`RGB(100,100,100), 80`。第一部分指定颜色，而另一部分 ( `80`) 是行将显示的列。
3.  或者安装[Guidelines UI](http://visualstudiogallery.msdn.microsoft.com/en-us/7f2a6727-2993-4c1d-8f58-ae24df14ea91)扩展（它也是[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)的一部分），它将向编辑器的上下文菜单中添加条目以添加/删除条目，而无需直接编辑注册表。这种方法目前的缺点是不能直接指定列。

**Visual Studio 2008 和其他版本**

如果您使用的是 Visual Studio 2008，请打开注册表`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\9.0\Text Editor`并添加一个名为`Guides`value的新字符串`RGB(100,100,100), 80`。第一部分指定颜色，而另一部分 ( `80`) 是行将显示的列。当您重新启动 Visual Studio 时，将出现垂直线。

只要您使用正确的路径，此技巧也适用于各种其他版本的 Visual Studio：

```
2003: HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\7.1\Text Editor
2005: HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\8.0\Text Editor
2008: HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\9.0\Text Editor
2008 Express: HKEY_CURRENT_USER\Software\Microsoft\VCExpress\9.0\Text Editor 
```

[这也适用于 SQL Server 2005 和可能的其他版本。](https://stackoverflow.com/a/332577/11387)

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2008-09-17T15:26:29.520

这最初来自 Sara 的[博客](http://blogs.msdn.com/b/saraford/archive/2004/11/15/257953.aspx)。

它也适用于几乎任何版本的 Visual Studio，您只需将注册表项中的“8.0”更改为适合您的 Visual Studio 版本的版本号。

指导线也显示在输出窗口中。（Visual Studio 2010 更正了这一点，该行仅显示在代码编辑器窗口中。）

您还可以通过在颜色说明符后列出多个数字来将指南放在多列中：

```
RGB(230,230,230), 4, 80 
```

`Guides`在第 4 列和第 80 列放置一条白线。这应该是“文本编辑器”键中的字符串值的值（见下文）。

确保选择在背景上可见的线条颜色。此颜色不会显示在 VS 中的默认背景颜色上。这是浅灰色的值：RGB(221, 221, 221)。

以下是我知道的注册表项：

**Visual Studio 2010**：HKCU\Software\Microsoft\VisualStudio\10.0\文本编辑器

**Visual Studio 2008**：HKCU\Software\Microsoft\VisualStudio\9.0\文本编辑器

**Visual Studio 2005**：HKCU\Software\Microsoft\VisualStudio\8.0\文本编辑器

**Visual Studio 2003** : HKCU\Software\Microsoft\VisualStudio\7.1\文本编辑器

对于那些运行 Visual Studio 2010 的用户，您可能需要安装以下扩展，而不是自己更改注册表：

*   [http://visualstudiogallery.msdn.microsoft.com/en-us/0fbf2878-e678-4577-9fdb-9030389b338c](http://visualstudiogallery.msdn.microsoft.com/en-us/0fbf2878-e678-4577-9fdb-9030389b338c)

*   [http://visualstudiogallery.msdn.microsoft.com/en-us/7f2a6727-2993-4c1d-8f58-ae24df14ea91](http://visualstudiogallery.msdn.microsoft.com/en-us/7f2a6727-2993-4c1d-8f58-ae24df14ea91)

这些也是[Productivity Power Tools](http://visualstudiogallery.msdn.microsoft.com/en-us/d0d33361-18e2-46c0-8ff2-4adea1e34fef)的一部分，其中包括许多其他非常有用的扩展。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2010-09-30T12:20:15.583

[Productivity Power Tools 扩展](http://visualstudiogallery.msdn.microsoft.com/en-us/d0d33361-18e2-46c0-8ff2-4adea1e34fef)（适用于所有版本的 Visual Studio）无需编辑任何注册表项即可提供指南功能。

安装后，只需在编辑器窗口中单击鼠标右键，然后选择添加指南选项。请注意，无论您在编辑器窗口中的哪个位置单击鼠标右键，该指南都将始终放置在您的编辑光标当前所在的列上。

[![在此处输入图像描述](https://i.stack.imgur.com/S5yyn.png)](https://i.stack.imgur.com/S5yyn.png)

要关闭，请转到选项并`Productivity Power Tools`在该部分中找到并关闭`Column Guides`. 将需要重新启动。

[![在此处输入图像描述](https://i.stack.imgur.com/8Rj4o.png)](https://i.stack.imgur.com/8Rj4o.png)

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2018-07-04T09:16:33.250

**视觉工作室 2017 / 2019**

对于正在寻找更新版本的 Visual Studio 答案的任何人，[请安装 Editor Guidelines 插件](https://marketplace.visualstudio.com/items?itemName=PaulHarrington.EditorGuidelines)，然后在编辑器中右键单击并选择以下内容：

[![在 Visual Studio 2017 中添加指南](https://i.stack.imgur.com/VUxyQ.png)](https://i.stack.imgur.com/VUxyQ.png)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-09-13T08:32:05.140

现在有一个适用于 Visual Studio 2012 和 2013 的扩展：

[http://visualstudiogallery.msdn.microsoft.com/da227a0b-0e31-4a11-8f6b-3a149cf2e459](http://visualstudiogallery.msdn.microsoft.com/da227a0b-0e31-4a11-8f6b-3a149cf2e459)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-11-11T16:11:50.680

如果您是免费 Visual Studio Express 版本的用户，则正确的密钥位于

```
HKEY_CURRENT_USER\Software\Microsoft\VCExpress\9.0\Text Editor 
```

{注意 VCExpress 而不是 VisualStudio) 但它有效！:)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2010-01-21T17:34:35.483

这也适用于 Visual Studio 2010（Beta 2），只要您安装 Paul Harrington 的扩展以启用[来自 VSGallery](http://visualstudiogallery.msdn.microsoft.com/en-us/0fbf2878-e678-4577-9fdb-9030389b338c)或来自 VS2010 中的扩展管理器的指南。由于这是 10.0 版，您应该使用以下注册表项：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\Text Editor 
```

此外，Paul 编写了一个扩展程序，可以将条目添加到编辑器的上下文菜单中，以便添加/删除条目，而无需直接编辑注册表。你可以在这里找到它：http: [//visualstudiogallery.msdn.microsoft.com/en-us/7f2a6727-2993-4c1d-8f58-ae24df14ea91](http://visualstudiogallery.msdn.microsoft.com/en-us/7f2a6727-2993-4c1d-8f58-ae24df14ea91)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-12-05T16:28:27.370

这也适用于[SQL Server Management Studio](https://stackoverflow.com/questions/332574/how-can-i-see-where-the-tab-stops-are-in-the-sql-server-management-studio-editor)。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-04-17T06:22:32.570

我发现了这个 Visual Studio 2010 扩展：Indent Guides

[http://visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30](http://visualstudiogallery.msdn.microsoft.com/e792686d-542b-474a-8c55-630980e72c30)

它工作得很好。 [![在此处输入图像描述](https://i.stack.imgur.com/6uR9P.png)](https://i.stack.imgur.com/6uR9P.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-08-30T10:59:12.647

对于 VS 2013 Express，此键不存在。我看到的是 HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\12.0 并且没有提到文本编辑器。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-01-26T21:14:01.513

对于使用[Visual Assist](https://www.wholetomato.com/)的用户，可以从`Display`Visual Assist 选项中的部分启用垂直指南：

[![在此处输入图像描述](https://i.stack.imgur.com/bb7A1.png)](https://i.stack.imgur.com/bb7A1.png)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-17T15:15:24.913

Visual Studio 2008 的注册表路径相同，但版本号为 9.0：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\9.0\Text Editor 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-17T19:05:31.970

对于 VS 2019，只需使用这个 powershell 脚本：

```
Get-ChildItem "$($env:LOCALAPPDATA)\Microsoft\VisualStudio\16.0_*" | 
Foreach-Object {
  $dir = $_;
  $regFile = "$($dir.FullName)\privateregistry.bin";
  Write-Host "Loading $($dir.BaseName) from ``$regFile``"
  & reg load "HKLM\_TMPVS_" "$regFile"
  New-ItemProperty -Name "Guides" -Path "HKLM:\_TMPVS_\Software\Microsoft\VisualStudio\$($dir.BaseName)\Text Editor" -Value "RGB(255,0,0), 80" -force | Out-Null;

  Sleep -Seconds 5; # might take some time befor the file can be unloaded
  & reg unload "HKLM\_TMPVS_";
  Write-Host "Unloaded $($dir.BaseName) from ``$regFile``"
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-06T15:38:02.360

您可能正在寻找标尺而不是指南。

转到设置>编辑器>标尺>并给出一个字符数数组以提供指定值的行。

# c# - 淡入淡出闪屏

> ID：84211
> 
> 赞同：4
> 
> 时间：2008-09-17T15:04:32.460
> 
> 标签：c#, winforms, .net-2.0, splash-screen

在 C# windows 窗体应用程序中。我有一个闪屏，后台发生了一些多线程进程。我想做的是当我最初显示启动画面时，我想让它看起来“淡入”。然后，一旦所有过程完成，我希望它看起来好像启动屏幕正在“淡出”。我正在使用 C# 和 .NET 2.0。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-17T15:06:27.930

您可以使用计时器来修改[Form.Opacity 级别](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.opacity(VS.80).aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-17T15:20:12.127

使用 Opacity 属性时必须记住它的类型是 double，其中 1.0 是完全不透明，而 0.0 是完全透明。

```
 private void fadeTimer_Tick(object sender, EventArgs e)
    {
        this.Opacity -= 0.01;

        if (this.Opacity <= 0)
        {
            this.Close();
        }            
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T15:05:56.433

您可以使用表单的 Opacity 属性来更改淡入淡出（介于 0.0 和 1.0 之间）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-17T15:08:49.283

```
While(this.Opacity !=0)
{
    this.Opacity -= 0.05;
    Thread.Sleep(50);//This is for the speed of the opacity... and will let the form redraw
} 
```

# visual-c++-6 - 如何在 Visual Studio 6 中设置自定义构建步骤？

> ID：84232
> 
> 赞同：0
> 
> 时间：2008-09-17T15:06:59.427
> 
> 标签：visual-c++-6

不幸的是，由于各种原因，我将不得不使用 Visual Studio 6 而不是较新版本的 VS。

我已经很久没有使用它了。我正在查看它的菜单，并没有看到任何明显的方法来设置任何自定义构建步骤（预构建、构建后、预链接......实际上任何东西都会有所帮助）。

谁能给我关于如何设置这样的步骤的说明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T15:18:40.507

打开您的项目，然后打开项目设置屏幕（项目 → 设置或 ALT-F7）。或者，右键单击 FileView 中的文件并选择设置。

在项目设置屏幕中，转到常规选项卡并选中“始终使用自定义构建步骤”。这意味着您刚刚选择的文件将是自定义构建步骤的输入文件。然后，从“自定义构建”选项卡中，您可以给出要运行的命令并指定将生成哪些文件。

对于预链接、构建后等，从项目设置屏幕中选择一个可执行文件（或库）。然后使用小箭头按钮滚动到最右边的选项卡。从那里您将找到 Pre-link 和 Post-build 步骤。

这很简单，真的，我相信这足以让你开始。

# windows - 是否有一个资源可以彻底解释 Windows 内存？

> ID：84234
> 
> 赞同：1
> 
> 时间：2008-09-17T15:07:05.667
> 
> 标签：windows, memory

说真的，我搜索了 MSDN，只得到了一半的答案 - 任务管理器上的列是什么意思？为什么我不能通过枚举线程、模块、堆等来计算 VM 使用率？如何确保我准确地向内存管理器的客户报告剩余的地址空间量？它们在内存词汇表命名空间中是否存在无数冲突？

在线资源在短期内将是最有用的，尽管书籍在中期是可以接受的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T15:09:29.657

试试 Mark Russinovich 的“Windows Internals”一书，我想还有其他人。深入了解细节非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T15:14:26.897

[Mark Russinovich](http://blogs.technet.com/markrussinovich/)撰写了出色的书籍[Windows Internals](https://rads.stackoverflow.com/amzn/click/com/0735625301)。涵盖 Vista 和 Server 2008 操作系统的新版本目前正在与 David Solomon 合作，因此如果您的问题是关于新的 Windows 操作系统而不是旧的操作系统，您可能需要预订。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:11:06.767

这是一篇关于[Windows 内存管理](http://shsc.info/WindowsMemoryManagement)的快速文章，它深入解释了您在任务管理器或[进程资源](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)管理器中实际看到的内容。

# xml - 如何强制浏览器重新加载更新的 XML 文件？

> ID：84243
> 
> 赞同：3
> 
> 时间：2008-09-17T15:08:08.613
> 
> 标签：xml

我正在开发一个非常依赖 XML 数据的网站。该网站有一个用户可以更新数据的界面。用户提供的数据将更新为相应的 XML 文件。但是，更改直到 1 或 2 分钟后才会反映出来。

任何人都知道如何强制浏览器立即加载最新的 XML 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T15:17:41.850

这不是浏览器问题，而是 HTTP 问题。您似乎在提供动态文件但未指定不应缓存它们。使用`Cache-Control: no-cache`HTTP 标头来表明这一点。 `Pragma: no-cache`是古老的 HTTP 1.0 方式，你可以包含它，但单独它不可能 100% 有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:10:35.177

您可以在每次更新时更改的 url 添加一个随机（或连续）数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:11:13.940

在 HTTP 响应中使用“Pragma: no-cache”标头。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9)

# .net - .NET 抽象类

> ID：84263
> 
> 赞同：2
> 
> 时间：2008-09-17T15:09:33.167
> 
> 标签：.net, inheritance, abstract-class

我正在设计一个网站导航层次结构。它是一棵节点树。

大多数节点都是页面。一些节点是链接（想想 Windows 中的快捷方式）。

大多数页面都包含 HTML 内容。一些执行代码。

我想将这些表示为这个类和抽象（MustInherit）类的集合......

![类图](https://i.stack.imgur.com/0gNAy.gif)

这是我要存储所有这些的数据库表……

[数据库表 http://img178.imageshack.us/img178/8573/nodetablefm8.gif](http://img178.imageshack.us/img178/8573/nodetablefm8.gif)

这就是我难过的地方。PageNodes 可能是也可能不是根。

我应该如何处理根类？

![类图](https://i.stack.imgur.com/1stKR.gif)

我不想拥有所有四个……

*   HtmlPageNode
*   代码页节点
*   Html**根**页面节点
*   代码**根**页面节点

我希望 HtmlPageNode 和 CodePageNode 类从 PageNode*或*从 RootPageNode 继承。那可能吗？

* * *

澄清：有多个根节点，根可能有父节点。每个都是唯一具有不同样式的子树的根。想想不同的、颜色编码的部门。（也许 root 是一个糟糕的名称选择。建议？）

* * *

更新：关于“根”名称......
我问过：[是否有对应于子树的节点的特定名称？](https://stackoverflow.com/questions/86790/is-there-a-specific-name-for-the-node-that-coresponds-to-a-subtree)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T16:18:33.110

如前所述，复合模式可能是一个很好的解决方案。

如果这对您不起作用，那么将 Root 定义为接口并根据需要应用它可能会更简单（如果合适的话）。

当然，这不会让您为 Root 提供任何实现......
如果 Root 必须有实现，您可以使用装饰器模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T15:26:31.580

使用[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)。

* * *

关于您的根节点，是否存在功能差异或完全外观上的差异？如果差异只是外观，我建议您与 PageNode 中的单独样式类关联。

如果功能上存在差异并且您有很多类型的页面，那么请考虑使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:16:18.377

实际上，由于“根”节点是节点的一个特例，也许你需要 RootHtmlPageNode : HtmlPageNode。

另一个想法：由于您没有指定“根”节点和普通节点之间的区别，因此可能只是节点中的一个标志指定它是否是根节点也是一个好的设计。

编辑：根据您的说明，普通节点和根节点之间没有功能差异，因此一个简单的标志就足够了（或属性 IsRootNode）。如果“根”节点仅提供样式数据（或任何其他自身及其子节点的数据），那么您可以将此样式数据放在单独的结构/类中并递归获取它（基于 IsRootNode）：

```
class Node
{
   private bool isRootNode;
   public bool IsRootNode;

   private StylingData stylingData;
   public StylingData StylingData
   {
      set
      {
         if (this.IsRootNode)
            this.stylingData = value;
         else
            throw new ApplicationException("The node is not root.");
      }
      get
      {
         if (this.IsRootNode)
            return this.stylingData;
         else
            return this.parent.StylingData;
      }
   }
} 
```

这假设每个节点都有对其父节点的引用。

它变得超出了问题，因为我不知道确切的设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T15:31:37.263

> 我希望 HtmlPageNode 和 CodePageNode 类从 PageNode 或从 RootPageNode 继承。那可能吗？

是的，这是可能的。您需要让 HtmlPageNode 和 codePageNode 有一个对象，该对象将是 PageNode 将继承的 Abstract 类和 RootPageNode 也是。在 HtmlPageNode 和 codePageNode 的构造函数中，您接受新的抽象类，在您的情况下为 PageNode 或 RootPageNode。这样，您就有了 2 个不同的类，它们具有相同的方法但有两个不同的对象。希望对您有所帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T17:18:08.287

> 澄清：有多个根节点，根可能有父节点。每个都是唯一具有不同样式的子树的根。想想不同的、颜色编码的部门。（也许 root 是一个糟糕的名称选择。建议？）

Root 是一个糟糕的名称选择，因为它（有点讽刺地）被明确地接受为树结构的顶层，因为树从根从地里出来的地方开始。除此之外的任何节点都是分支或叶子，并且不直接连接到根。

更好的名称应该是 IsAuthoritativeStyleNode、IsCascadingStyleNode、IsStyleParentNode 或限定它：例如 IsDepartmentRootNode。给事物起清晰明确的名称是极大地提高可读性/易于理解的事情之一。

你不能仅仅通过抽象基类/继承来真正实现你想要的。根据其他建议，请考虑使用接口。

我还会考虑考虑是否让数据库模式过多地驱动客户端类设计。并不是说在这种情况下需要改变，但至少应该考虑一下。考虑如何将属性分解到引用公共“节点”表的单独表中，并将它们标准化以最小化空值和/或重复的相同数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T15:55:43.897

PageNode 类是否应该只具有 Root 类型的属性？

[![替代文字](https://i.stack.imgur.com/m9LxO.gif)](https://i.stack.imgur.com/m9LxO.gif)

这是否与 PageNode[是](http://en.wikipedia.org/wiki/Is-a)根的想法相反。或者，它们不是“is-a Root”，因为它们中只有*一些*是根吗？

这是否意味着该属性可能会遍历树来寻找根祖先？还是只有我一个人？

# c++ - 在非 Microsoft 平台上使用组件对象模型 (COM)

> ID：84269
> 
> 赞同：34
> 
> 时间：2008-09-17T15:10:00.467
> 
> 标签：c++, com, cygwin, mingw, wine

我经常遇到类似的情况：我有一堆 COM .DLL（没有 IDL 文件），我需要使用和调用它们才能访问一些外部（非开放、非文档化）数据格式。

Microsoft 的 Visual Studio 平台具有非常好的功能，可以导入此类 COM DLL 并在我的项目中使用它们（Visual C++ 的 #import 指令，或使用 Visual Basic .NET 的对话框选择和添加它们）——这是供应商推荐的使用方式。

我有兴趣找到一种在非微软开发平台上使用这些 DLL 的方法。即，在使用 MinGW 或 Cygwin 编译的 C++ 项目中使用这些 COM 类，甚至是 Wine 的 GCC 端口到 linux（将针对 Win32 的 C++ 编译成在 Linux 上本机运行的二进制文件）。

[使用此](http://www.codeproject.com/KB/COM/comdispatchdriver.aspx)驱动程序我取得了一些有限的成功，但这在 100% 的情况下并不成功（我不能使用某些方法返回的 COM 对象）。

有人在类似情况下取得过成功吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-10-31T20:40:24.887

回答自己，但我设法找到了在非 Microsoft 编译器中调用 OLE/COM的**完美库：** [disphelper](http://disphelper.sourceforge.net/)。

（它可以从[sourceforge.net](http://sourceforge.net/projects/disphelper/)在许可的 BSD 许可下获得）。

它适用于 C 和 C++（因此也适用于具有 C 绑定的任何其他语言）。它使用类似 printf/scanf 的[格式字符串语法](http://disphelper.sourceforge.net/readme.htm)。
（只要您在格式字符串中指定它，您就可以传递您想要的任何内容，这与[XYDispDriver](http://www.codeproject.com/KB/COM/comdispatchdriver.aspx)不同，它要求参数与类型库中指定的任何内容完全匹配）。

我对其进行了一些修改，使其也可以在 Linux 下使用 WineGCC 编译（从 Win32 代码中生成本机 Linux 精灵），并自动处理“by ref”调用（股票 disthelper 需要程序员设置他/她自己的 VARIANT） .

我的补丁版本和补丁可作为 github 上的 fork 获得：

*   [https://github.com/DrYak/disphelper](https://github.com/DrYak/disphelper)

这是我的补丁：

*   [单一来源的补丁](https://gist.github.com/DrYak/81f73fff0d572130ff9d)

*   [分裂源补丁](https://gist.github.com/DrYak/532c10720065d18e27bd)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-17T16:51:48.007

与 Visual Studio 和 Windows SDK 一起打包的 Ole/Com 对象查看器的问题在于，它会从 .DLL 中生成损坏的 .IDL，而 MIDL 无法将其进一步编译为 .H/.CPP 对。

Wine 自己对 OleViewer 的重新实现目前不稳定，并且在尝试使用这些库时会崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:39:54.963

我认为您应该能够使用免费工具 Ole/Com Object Viewer 来制作头文件。

# iis - IIS 工作进程在回收时是否会清除会话变量？

> ID：84276
> 
> 赞同：3
> 
> 时间：2008-09-17T15:10:45.393
> 
> 标签：iis, session-variables, worker-process

我们正在 IIS 6 上编写一个 asp.net Web 应用程序，并计划将我们的用户登录变量存储在会话中。当工作进程回收时，这会被删除吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T15:13:17.900

如果会话存储在进程中，则 YES 工作进程回收将删除它。如果要保留会话值，请使用进程外模型或 sql server 来存储会话值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:12:27.417

如果你使用**默认的内存中会话管理**，当工作进程回收时会话变量将被**清除**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:12:28.370

是的，除非您使用的是进程外会话状态。

# .net - 如何将 WPF 绑定与 RelativeSource 结合使用？

> ID：84278
> 
> 赞同：631
> 
> 时间：2008-09-17T15:10:53.583
> 
> 标签：.net, wpf, xaml, data-binding, relativesource

如何使用`RelativeSource`WPF 绑定以及有哪些不同的用例？

* * *

## 回答 #1

> 赞同：833
> 
> 时间：2008-09-17T15:14:51.687

如果要绑定到对象上的另一个属性：

```
{Binding Path=PathToProperty, RelativeSource={RelativeSource Self}} 
```

如果您想获得祖先的属性：

```
{Binding Path=PathToProperty,
    RelativeSource={RelativeSource AncestorType={x:Type typeOfAncestor}}} 
```

如果您想在模板化父对象上获取属性（因此您可以在 ControlTemplate 中进行 2 路绑定）

```
{Binding Path=PathToProperty, RelativeSource={RelativeSource TemplatedParent}} 
```

或者，更短（这只适用于 OneWay 绑定）：

```
{TemplateBinding Path=PathToProperty} 
```

* * *

## 回答 #2

> 赞同：138
> 
> 时间：2009-03-03T09:24:23.417

```
Binding RelativeSource={
    RelativeSource Mode=FindAncestor, AncestorType={x:Type ItemType}
}
... 
```

的默认属性`RelativeSource`是`Mode`属性。此处给出了一组完整的有效值（[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesourcemode.aspx)）：

*   *PreviousData*允许您在显示的数据项列表中绑定上一个数据项（不是包含该数据项的控件）。

*   *TemplatedParent*指应用模板（数据绑定元素所在的元素）的元素。这与设置 TemplateBindingExtension 类似，并且仅在 Binding 位于模板内时适用。

*   *Self*指您设置绑定的元素，并允许您将该元素的一个属性绑定到同一元素的另一个属性。

*   *FindAncestor*指的是数据绑定元素的父链中的祖先。您可以使用它来绑定到特定类型的祖先或其子类。如果您想指定 AncestorType 和/或 AncestorLevel，这是您使用的模式。

* * *

## 回答 #3

> 赞同：137
> 
> 时间：2011-03-16T02:35:12.693

这是 MVVM 架构上下文中更直观的解释：

![在此处输入图像描述](https://i.stack.imgur.com/6Tcc6.jpg)

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2013-10-19T20:34:11.380

[Bechir Bejaoui 在他的文章](http://www.c-sharpcorner.com/UploadFile/yougerthen/relativesources-in-wpf/)中公开了 WPF 中 RelativeSources 的用例：

> 当我们尝试将给定对象的属性绑定到对象本身的另一个属性时，当我们尝试将对象的属性绑定到其相对父对象的另一个属性时，RelativeSource 是一种标记扩展，用于特定的绑定情况，在自定义控件开发的情况下以及最后在使用一系列绑定数据的差异的情况下将依赖属性值绑定到一段 XAML 时。所有这些情况都表示为相对源模式。我将一一揭露所有这些情况。
> 
> 1.  模式自我：
> 
> 想象一下这种情况，一个我们希望它的高度总是等于它的宽度的矩形，比方说一个正方形。我们可以使用元素名称来做到这一点
> 
> ```
> <Rectangle Fill="Red" Name="rectangle" 
>                 Height="100" Stroke="Black" 
>                 Canvas.Top="100" Canvas.Left="100"
>                 Width="{Binding ElementName=rectangle,
>                 Path=Height}"/> 
> ```
> 
> 但在上述情况下，我们必须指明绑定对象的名称，即矩形。我们可以使用 RelativeSource 以不同的方式达到相同的目的
> 
> ```
> <Rectangle Fill="Red" Height="100" 
>                Stroke="Black" 
>                Width="{Binding RelativeSource={RelativeSource Self},
>                Path=Height}"/> 
> ```
> 
> 在这种情况下，我们没有义务提及绑定对象的名称，并且无论何时更改高度，宽度都将始终等于高度。
> 
> 如果要将 Width 参数设置为高度的一半，则可以通过将转换器添加到 Binding 标记扩展来实现。现在让我们想象另一种情况：
> 
> ```
>  <TextBlock Width="{Binding RelativeSource={RelativeSource Self},
>                Path=Parent.ActualWidth}"/> 
> ```
> 
> 上述情况用于将给定元素的给定属性与其直接父元素之一联系起来，因为该元素拥有一个称为 Parent 的属性。这导致我们进入另一种相对源模式，即 FindAncestor 模式。
> 
> 1.  模式 FindAncestor
> 
> 在这种情况下，给定元素的属性将绑定到其父级之一 Of Corse。与上述情况的主要区别在于，由您决定祖先类型和层次结构中的祖先等级以绑定属性。顺便尝试玩一下这段 XAML
> 
> ```
> <Canvas Name="Parent0">
>     <Border Name="Parent1"
>              Width="{Binding RelativeSource={RelativeSource Self},
>              Path=Parent.ActualWidth}"
>              Height="{Binding RelativeSource={RelativeSource Self},
>              Path=Parent.ActualHeight}">
>         <Canvas Name="Parent2">
>             <Border Name="Parent3"
>             Width="{Binding RelativeSource={RelativeSource Self},
>            Path=Parent.ActualWidth}"
>            Height="{Binding RelativeSource={RelativeSource Self},
>               Path=Parent.ActualHeight}">
>                <Canvas Name="Parent4">
>                <TextBlock FontSize="16" 
>                Margin="5" Text="Display the name of the ancestor"/>
>                <TextBlock FontSize="16" 
>                  Margin="50" 
>             Text="{Binding RelativeSource={RelativeSource  
>                        FindAncestor,
>                        AncestorType={x:Type Border}, 
>                        AncestorLevel=2},Path=Name}" 
>                        Width="200"/>
>                 </Canvas>
>             </Border>
>         </Canvas>
>      </Border>
>    </Canvas> 
> ```
> 
> 上述情况是嵌入在一系列边框中的两个 TextBlock 元素和代表其分层父级的画布元素。第二个 TextBlock 将在相对源级别显示给定父级的名称。
> 
> 所以尝试将 AncestorLevel=2 更改为 AncestorLevel=1 看看会发生什么。然后尝试将祖先的类型从 AncestorType=Border 更改为 AncestorType=Canvas，看看会发生什么。
> 
> 显示的文本将根据祖先类型和级别而变化。那么如果祖先级别不适合祖先类型会发生什么？这是个好问题，我知道你要问了。响应是不会抛出异常，并且不会在 TextBlock 级别显示任何内容。
> 
> 1.  模板父
> 
> 此模式允许将给定的 ControlTemplate 属性与应用 ControlTemplate 的控件的属性联系起来。为了很好地理解这个问题，下面是一个例子
> 
> ```
> <Window.Resources>
> <ControlTemplate x:Key="template">
>         <Canvas>
>             <Canvas.RenderTransform>
>                 <RotateTransform Angle="20"/>
>                 </Canvas.RenderTransform>
>             <Ellipse Height="100" Width="150" 
>                  Fill="{Binding 
>             RelativeSource={RelativeSource TemplatedParent},
>             Path=Background}">
> 
>               </Ellipse>
>             <ContentPresenter Margin="35" 
>                   Content="{Binding RelativeSource={RelativeSource  
>                   TemplatedParent},Path=Content}"/>
>         </Canvas>
>     </ControlTemplate>
> </Window.Resources>
>     <Canvas Name="Parent0">
>     <Button   Margin="50" 
>               Template="{StaticResource template}" Height="0" 
>               Canvas.Left="0" Canvas.Top="0" Width="0">
>         <TextBlock FontSize="22">Click me</TextBlock>
>     </Button>
>  </Canvas> 
> ```
> 
> 如果我想将给定控件的属性应用到它的控件模板，那么我可以使用 TemplatedParent 模式。还有一个与此标记扩展类似的，即 TemplateBinding，它是第一个的一种简写，但 TemplateBinding 是在编译时评估的，而 TemplatedParent 是在第一次运行后评估的。如下图所示，背景和内容从按钮内部应用到控件模板。

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2016-01-21T13:41:56.793

***在 WPF`RelativeSource`绑定中公开了三个`properties`要设置的内容：***

**1.模式：**这是一个`enum`可以有四个值：

> ***一种。PreviousData( `value=0`)：***它将先前的值分配给`property`绑定
> 
> ***湾。TemplatedParent( `value=1`)：*** 当定义`templates`任何控件并希望绑定到 的值/属性时使用`control`。
> 
> **例如，**定义`ControlTemplate`：

```
 <ControlTemplate>
        <CheckBox IsChecked="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
 </ControlTemplate> 
```

> ***C。Self( `value=2`)：***当我们想从 self 的 a`self`或 a`property`。
> 
> **例如：**在设置on时发送`checkbox`as的选中状态`CommandParameter``Command``CheckBox`

```
<CheckBox ...... CommandParameter="{Binding RelativeSource={RelativeSource Self},Path=IsChecked}" /> 
```

> ***d。FindAncestor( `value=3`)：***当想要`control` 从`Visual Tree`.
> 
> **例如：**`checkbox`在`records`if a `grid`,if`header` `checkbox`被选中时绑定 a

```
<CheckBox IsChecked="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type iDP:XamDataGrid}}, Path=DataContext.IsHeaderChecked, Mode=TwoWay}" /> 
```

**2\. AncestorType：** 当mode是`FindAncestor`然后定义什么类型的祖先

```
RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type iDP:XamDataGrid}} 
```

***3\. AncestorLevel：*** 当mode是`FindAncestor`什么级别的祖先（如果有两个相同类型的父级`visual tree`）

```
RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type iDP:XamDataGrid, AncestorLevel=1}} 
```

> 以上是***`RelativeSource binding`***.

***[这是一个参考链接](http://www.nbdtech.com/Free/WpfBinding.pdf)。***

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2008-09-17T15:14:34.120

不要忘记 TemplatedParent：

```
<Binding RelativeSource="{RelativeSource TemplatedParent}"/> 
```

或者

```
{Binding RelativeSource={RelativeSource TemplatedParent}} 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2010-04-24T16:02:46.737

值得注意的是，对于那些偶然发现 Silverlight 这种想法的人：

Silverlight 仅提供这些命令的一个缩减子集

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2012-08-06T18:12:51.720

我创建了一个库来简化 WPF 的绑定语法，包括更容易使用 RelativeSource。这里有些例子。前：

```
{Binding Path=PathToProperty, RelativeSource={RelativeSource Self}}
{Binding Path=PathToProperty, RelativeSource={RelativeSource AncestorType={x:Type typeOfAncestor}}}
{Binding Path=PathToProperty, RelativeSource={RelativeSource TemplatedParent}}
{Binding Path=Text, ElementName=MyTextBox} 
```

后：

```
{BindTo PathToProperty}
{BindTo Ancestor.typeOfAncestor.PathToProperty}
{BindTo Template.PathToProperty}
{BindTo #MyTextBox.Text} 
```

这是一个如何简化方法绑定的示例。前：

```
// C# code
private ICommand _saveCommand;
public ICommand SaveCommand {
 get {
  if (_saveCommand == null) {
   _saveCommand = new RelayCommand(x => this.SaveObject());
  }
  return _saveCommand;
 }
}

private void SaveObject() {
 // do something
}

// XAML
{Binding Path=SaveCommand} 
```

后：

```
// C# code
private void SaveObject() {
 // do something
}

// XAML
{BindTo SaveObject()} 
```

您可以在此处找到该库：[http ://www.simplygoodcode.com/2012/08/simpler-wpf-binding.html](http://www.simplygoodcode.com/2012/08/simpler-wpf-binding.html)

请注意，在我用于方法绑定的“BEFORE”示例中，代码已经通过使用`RelayCommand`我检查的最后一个不是 WPF 的本机部分进行了优化。如果没有那个，“之前”的例子会更长。

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2012-10-30T11:22:06.790

一些有用的点点滴滴：

以下是主要在代码中执行此操作的方法：

```
Binding b = new Binding();
b.RelativeSource = new RelativeSource(RelativeSourceMode.FindAncestor, this.GetType(), 1);
b.Path = new PropertyPath("MyElementThatNeedsBinding");
MyLabel.SetBinding(ContentProperty, b); 
```

我主要从*[Binding Relative Source 中的代码Behind 中](http://social.msdn.microsoft.com/Forums/en/wpf/thread/c5a59f07-c932-4715-8774-fa7e8472b75b)*复制了这个。

此外，就示例而言，MSDN 页面非常好：*[RelativeSource Class](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.aspx)*

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2010-08-23T13:05:21.263

我刚刚发布了[**另一个解决方案**](https://stackoverflow.com/questions/3404707/wpf-access-parent-datacontext-from-datatemplate/3547707#3547707)，用于访问 Silverlight 中适用于我的父元素的 DataContext。它使用`Binding ElementName`.

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2016-07-29T08:30:58.943

我没有阅读每个答案，但我只想添加此信息以防按钮的相对源命令绑定。

当您将相对源与 一起使用时`Mode=FindAncestor`，绑定必须类似于：

```
Command="{Binding Path=DataContext.CommandProperty, RelativeSource={...}}" 
```

如果您不在路径中添加 DataContext，则在执行时它无法检索该属性。

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2015-04-29T13:59:41.633

这是在空数据网格上使用此模式的示例。

```
<Style.Triggers>
    <DataTrigger Binding="{Binding Items.Count, RelativeSource={RelativeSource Self}}" Value="0">
        <Setter Property="Background">
            <Setter.Value>
                <VisualBrush Stretch="None">
                    <VisualBrush.Visual>
                        <TextBlock Text="We did't find any matching records for your search..." FontSize="16" FontWeight="SemiBold" Foreground="LightCoral"/>
                    </VisualBrush.Visual>
                </VisualBrush>
            </Setter.Value>
        </Setter>
    </DataTrigger>
</Style.Triggers> 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2017-09-05T10:46:12.447

如果一个元素不是可视化树的一部分，那么 RelativeSource 将永远无法工作。

在这种情况下，您需要尝试由 Thomas Levesque 开创的不同技术。

他在他的博客[[WPF] How to bind to data when the DataContext is not inherit](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)下有解决方案。它工作得非常出色！

万一他的博客出现故障，附录 A 包含[他文章](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)的镜像副本。

*请不要在这里发表评论，请[直接在他的博客文章](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)中发表评论。*

# 附录A：博文镜像

WPF 中的 DataContext 属性非常方便，因为它会被分配给它的元素的所有子元素自动继承；因此，您无需在要绑定的每个元素上再次设置它。但是，在某些情况下，DataContext 是不可访问的：它发生在不属于可视树或逻辑树的元素上。在这些元素上绑定属性可能非常困难......</p>

让我们用一个简单的例子来说明：我们想在 DataGrid 中显示一个产品列表。在网格中，我们希望能够根据 ViewModel 公开的 ShowPrice 属性的值显示或隐藏 Price 列。显而易见的方法是将列的 Visibility 绑定到 ShowPrice 属性：

```
<DataGridTextColumn Header="Price" Binding="{Binding Price}" IsReadOnly="False"
                Visibility="{Binding ShowPrice,
                Converter={StaticResource visibilityConverter}}"/> 
```

不幸的是，更改 ShowPrice 的值没有任何效果，并且该列始终可见……为什么？如果我们查看 Visual Studio 中的“输出”窗口，我们会注意到以下行：

> System.Windows.Data 错误：2：找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=显示价格；数据项=空；目标元素是“DataGridTextColumn”（HashCode=32685253）；目标属性是“可见性”（类型“可见性”）
> 
> 该消息相当神秘，但含义实际上很简单：WPF 不知道使用哪个 FrameworkElement 来获取 DataContext，因为该列不属于 DataGrid 的可视树或逻辑树。

我们可以尝试调整绑定以获得所需的结果，例如通过将 RelativeSource 设置为 DataGrid 本身：

```
<DataGridTextColumn Header="Price" Binding="{Binding Price}" IsReadOnly="False"
                Visibility="{Binding DataContext.ShowPrice,
                Converter={StaticResource visibilityConverter},
                RelativeSource={RelativeSource FindAncestor, AncestorType=DataGrid}}"/> 
```

或者我们可以添加一个绑定到 ShowPrice 的 CheckBox，并尝试通过指定元素名称将列可见性绑定到 IsChecked 属性：

```
<DataGridTextColumn Header="Price" Binding="{Binding Price}" IsReadOnly="False"
                Visibility="{Binding IsChecked,
                Converter={StaticResource visibilityConverter},
                ElementName=chkShowPrice}"/> 
```

但是这些解决方法似乎都不起作用，我们总是得到相同的结果......</p>

在这一点上，似乎唯一可行的方法是更改​​代码隐藏中的列可见性，我们通常在使用 MVVM 模式时更愿意避免这种情况……但我不会这么快就放弃，至少不会虽然还有其他选择需要考虑

我们的问题的解决方案实际上非常简单，并且利用了 Freezable 类。此类的主要目的是定义具有可修改和只读状态的对象，但在我们的例子中有趣的特性是 Freezable 对象可以继承 DataContext，即使它们不在可视树或逻辑树中。我不知道实现这种行为的确切机制，但我们将利用它来使我们的绑定工作......</p>

这个想法是创建一个继承 Freezable 并声明一个 Data 依赖属性的类（我称它为 BindingProxy，原因很快就会变得显而易见）：

```
public class BindingProxy : Freezable
{
    #region Overrides of Freezable

    protected override Freezable CreateInstanceCore()
    {
        return new BindingProxy();
    }

    #endregion

    public object Data
    {
        get { return (object)GetValue(DataProperty); }
        set { SetValue(DataProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Data.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty DataProperty =
        DependencyProperty.Register("Data", typeof(object), typeof(BindingProxy), new UIPropertyMetadata(null));
} 
```

然后我们可以在 DataGrid 的资源中声明这个类的一个实例，并将 Data 属性绑定到当前的 DataContext：

```
<DataGrid.Resources>
    <local:BindingProxy x:Key="proxy" Data="{Binding}" />
</DataGrid.Resources> 
```

最后一步是将此 BindingProxy 对象（可通过 StaticResource 轻松访问）指定为绑定的 Source：

```
<DataGridTextColumn Header="Price" Binding="{Binding Price}" IsReadOnly="False"
                Visibility="{Binding Data.ShowPrice,
                Converter={StaticResource visibilityConverter},
                Source={StaticResource proxy}}"/> 
```

请注意，绑定路径以“Data”为前缀，因为该路径现在是相对于 BindingProxy 对象的。

绑定现在可以正常工作，并且根据 ShowPrice 属性正确显示或隐藏列。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2021-04-16T04:41:04.703

**我不断更新我对绑定的研究。**

原创[在这里](https://github.com/devncore/wpf-xaml-binding)

## 数据上下文

**DataContext 是 FrameworkElement 中包含的 DependencyProperty。**
`PresentationFramework.dll`

```
namespace System.Windows
{
    public class FrameworkElement : UIElement
    {
        public static readonly DependencyProperty DataContextProperty;
        public object DataContext { get; set; }
    }
} 
```

而且，WPF 中的所有 UI 控件都继承了`FrameworkElement`该类。

> 此时在学习 Binding 或 DataContext 时，您不必更深入地学习 FrameworkElement。
> 然而，这里只是简单地提到一个事实，可以包含所有 UI 控件的最接近的对象是 FrameworkElement。

### *DataContext 始终是 Binding 的参考点。*

绑定可以直接调用从最近的 DataContext 开始的 DataContext 类型格式的值。

```
<TextBlock Text="{Binding}" DataContext="James"/> 
```

绑定到的值`Text="{Binding}"`直接从最近的 DataContext 传递`TextBlock`。
因此，Binding 结果值为`Text`'James'。

*   **整数类型**
    直接从 Xaml 为 DataContext 分配值时，首先需要对值类型（例如 Integer 和 Boolean）进行资源定义。因为所有字符串都被识别为字符串。

    1.`mscrolib`在Xaml中 使用系统

    > 标准不支持简单类型变量类型。
    > 你可以用任何词来定义它，但主要是`sys`用词。

    ```
    xmlns:sys="clr-namespace:System;assembly=mscorlib" 
    ```

    `YEAR`2.在xaml中 创建资源键

    > 以 StaticResource 的形式声明要创建的类型的值。

    ```
    <Window.Resources>
        <sys:Int32 x:Key="YEAR">2020</sys:Int32>
    </Window.Resources>
    ...
    <TextBlock Text="{Binding}" DataContext="{StaticResource YEAR"/> 
    ```

*   **所有类型的值**
    很少有将值类型直接绑定到 DataContext 的情况。
    因为我们要绑定一个对象。

    ```
    <Window.Resources>
        <sys:Boolean x:Key="IsEnabled">true</sys:Boolean>
        <sys:double x:Key="Price">7.77</sys:double>
    </Window.Resources>
    ...
    <StackPanel>
        <TextBlock Text="{Binding}" DataContext="{StaticResource IsEnabled}"/>
        <TextBlock Text="{Binding}" DataContext="{StaticResource Price}"/>
    </StackPanel> 
    ```

*   **另一种类型**
    不仅可以是String，还可以是各种类型。因为 DataContext 是一个对象类型。

### 最后...

在WPF中使用Binding时，大部分开发者并没有完全意识到DataContext的存在、作用和重要性。
这可能意味着 Binding 是靠运气连接的。

> **特别是如果您负责或参与大型 WPF 项目，您应该更清楚地了解应用程序的 DataContext 层次结构。此外，没有这个DataContext概念的WPF各种流行的MVVM Framework系统的引入，将会对自由实现功能造成更大的限制。**

* * *

## 捆绑

*   数据上下文绑定
*   元素绑定
*   多重绑定
*   自属性绑定
*   查找祖先绑定
*   TemplatedParent 绑定
*   静态属性绑定

### 数据上下文绑定

`string property`

```
<TextBox Text="{Binding Keywords}"/> 
```

### 元素绑定

```
<CheckBox x:Name="usingEmail"/>
<TextBlock Text="{Binding ElementName=usingEmail, Path=IsChecked}"/> 
```

### 多重绑定

```
<TextBlock Margin="5,2" Text="This disappears as the control gets focus...">
  <TextBlock.Visibility>
      <MultiBinding Converter="{StaticResource TextInputToVisibilityConverter}">
          <Binding ElementName="txtUserEntry2" Path="Text.IsEmpty" />
          <Binding ElementName="txtUserEntry2" Path="IsFocused" />
      </MultiBinding>
  </TextBlock.Visibility>
</TextBlock> 
```

### 自属性绑定

```
<TextBlock x:Name="txt" Text="{Binding ElementName=txt, Path=Tag}"/> 
```

如果必须绑定自己的属性，可以使用`Self Property Binding`，而不是使用`Element Binding`。
您不再需要声明`x:Name`绑定您自己的财产。

```
<TextBlock Text="{Binding RelativeSource={RelativeSource Self}, Path=Tag}"/> 
```

### 根据离它最近的父控件查找 Ancestor Binding Imports。

```
<TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=Title}"/> 
```

除了找到的控件的属性之外，DataContext 对象中的属性（如果存在）也可以使用。

```
<TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext.Email}"/> 
```

### TemplatedParent 绑定

这是一种可以在内部使用的方法`ControlTemplate`，并且您可以导入作为`ControlTemplate`.

```
<Style TargetType="Button">
  <Setter Property="Template">
      <Setter.Value>
          <ControlTemplate TargetType="Button">
              <TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}"/>
          </ControlTemplate>
      </Setter.Value>
  </Setter> 
```

您可以访问所有的 Property 和 DataContext。

```
<TextBlock Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}"/> 
```

### 静态属性绑定

您可以直接访问绑定属性值。

1\. 申报`static`财产。

```
namespace Exam
{
  public class ExamClass
  {
      public static string ExamText { get; set; }
  }
} 
```

2\. 在 XAML 中使用静态类。

```
<Window ... xmlns:exam="clr-namespace:Exam"> 
```

3.绑定属性。

```
<TextBlock Text="{Binding exam:ExamClass.ExamText}"/> 
```

*或者，您可以像使用`Converter`.*

```
<Window.Resource>
  <cvt:VisibilityToBooleanConverter x:Key="VisibilityToBooleanConverter"/>
  <exam:ExamClass x:Key="ExamClass">
</Window.Resource>
...

<TextBlock Text="{Binding Source={StaticResource ExamClass}, Path=ExamText}"/> 
```

> 在正常情况下，我从未使用过静态属性。这是因为偏离其自身 DataContext 的数据会破坏整个 WPF 应用程序的流程并显着降低可读性。但是，这种方法在开发阶段被积极使用，以实现快速测试和功能，以及在 DataContext（或 ViewModel）中。

* * *

## 不良装订和良好装订

### ✔️ 如果要绑定的属性包含在 Datacontext 中，
      则不必使用 ElementBinding。

      *通过连接控件使用 ElementBinding 不是功能问题，
      但它打破了 Binding 的基本模式。*

绑定不良

```
<TextBox x:Name="text" Text="{Binding UserName}"/>
...
<TextBlock Text="{Binding ElementName=text, Path=Text}"/> 
```

良好的装订

```
<TextBox Text="{Binding UserName}"/>
...
<TextBlock Text="{Binding UserName}"/> 
```

### ✔️ 使用属于较高层控件的属性时不要使用 ElementBinding。

绑定不良

```
<Window x:Name="win">
  <TextBlock Text="{Binding ElementName=win, Path=DataContext.UserName}"/>
  ... 
```

良好的装订

```
<Window>
  <TextBlock Text="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext.UserName}"/>
  ... 
```

伟大的！

```
<Window>
  <TextBlock DataContext="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext}" 
             Text="{Binding UserName}"/>
  ... 
```

### ✔️ 使用自己的属性时不要使用 ElementBinding。

绑定不良

```
<TextBlock x:Name="txt" Text="{Binding ElementName=txt, Path=Foreground}"/> 
```

良好的装订

```
<TextBlock Text="{Binding RelativeSource={RelativeSource Self}, Path=Foreground}"/> 
```

# java - 您可以使用什么来让应用程序能够接收 SMS 消息？

> ID：84282
> 
> 赞同：14
> 
> 时间：2008-09-17T15:11:06.967
> 
> 标签：java, sms

*   你需要使用某种提供者吗？
*   您可以设置自己的短信服务器吗？
*   是否存在任何开源解决方案？

我是一个短信新手，所以任何关于如何完成的见解都会很棒。我偏爱 Java，但任何语言都可以。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-17T15:19:21.677

这很简单。是的，您需要一个“短信网关”提供商。那里有很多。这些公司提供 API 供您发送/接收 SMS。

例如，德国公司[Mobilant](http://mobilant.de/)提供了一个简单的 API。如果您想接收短信，只需编写一个简单的 PHP / JSP / s.th.else 动态网页并让 Mobilant 调用它。

例如

*   Mobilant 为您接收短信
*   Mobilant 调用您的网页[http://yourpage.com/receive.php?message=](http://yourpage.com/receive.php?message=) ...
*   你做你需要做的事

你真的不想设置你自己的 SMS 服务器或中心 ;-) 这真的很贵，需要几个月的时间来设置，而且要花一些漂亮的法拉利。

使用提供商并按短信付费。这是最便宜和最快的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-22T14:36:52.320

我在一个 linux 盒子上使用了 kannel，一个旧手机通过串行电缆连接到盒子上。手机里有一张预付卡，因为我只将它用于私人用途。像魅力一样工作！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-10-19T23:53:59.800

如果你在 Linux 机器上运行，你可以看看 Gammu：

[http://www.gammu.org](http://www.gammu.org)

使用 Gammu，您可以将其配置为定期轮询手机以获取新的 SMS 消息。当 Gammu 发现新消息时，它可以将它们存储在 SQL 数据库中。然后，您可以编写另一个程序来定期轮询数据库并对新消息采取措施。

使用这个通用设置，我成功地部署了一个自制的 2-way SMS 应用程序。我将 Gammu 配置为通过蓝牙从手机中提取消息。Gammu 将它们放在 MySQL 数据库中，我有一个 Tomcat Web 应用程序定期轮询新消息。当发现新消息时，系统会处理该消息。

这是一种有点“胶带和捆扎线”的设置，但它工作得很好，并且比我之前测试过的许多“专业”短信网关更可靠。YMMV。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-17T15:47:50.903

我们过去使用过 mBlox ( [http://www.mblox](http://www.mblox) )，因为它们提供全面的国际覆盖、优质 SMS、不同级别的服务质量与价格，以及用于入站和出站 SMS 的可靠的基于 Java 的 API .

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-17T15:18:35.763

你需要一个短信网关，谷歌搜索“短信网关”会发现很多。我使用[http://www.clickatell.com/products/sms_gateway.php](http://www.clickatell.com/products/sms_gateway.php)取得了巨大成功。

我不知道任何开源实现，但会监控这个线程以防其他人这样做！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T15:19:55.527

我不喜欢 Java，所以这里有一个很好的指南，关于如何在 Ruby on Rails 中做到这一点：[http ://www.lukeredpath.co.uk/2007/8/29/sending-sms-messages-from-your -rails-应用程序](http://www.lukeredpath.co.uk/2007/8/29/sending-sms-messages-from-your-rails-application)

如果您想发送“真正的”短信，您需要使用短信网关（上述指南中概述了使用短信网关）。

您可以使用彩信向类似于 1234567890@messages.whatever.com 的电子邮件地址发送消息。您可以使用邮件功能来执行此操作。有一些关于这里的信息：[http ://contentdeveloper.com/2006/06/open-source-sms-text-messaging-application/](http://contentdeveloper.com/2006/06/open-source-sms-text-messaging-application/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T15:20:56.617

首先，您需要一个 SMS 网关。看看[Kannel](http://www.kannel.org/) SMS 网关。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-17T15:50:19.277

同意[坎内尔](http://www.kannel.org/)。您也可以在带有 GSM 调制解调器的 LAMP 服务器上进行设置。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-10-19T06:08:56.103

TextMarks 提供了一项服务，他们将传入的 SMS 映射到 HTTP GET 到您提供的 URL，然后将响应作为另一个 SMS 发送回来。如果您让他们在回复短信中添加一些广告，他们不会向您收费。问题是由于 T-Mobile 向他们收费，他们不再为 T-Mobile 免费提供此服务。我愿意为每条消息付费，但他们向每个用户每月收取 0.20 美元，这相当高昂。有谁知道提供这项服务的人吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-16T03:29:23.940

您实际上不需要 SMS 网关；几乎每部手机都可以向/从任何电子邮件地址发送/接收 SMS 消息。我使用[Nearly Free Speech](http://www.nearlyfreespeech.net)将电子邮件作为 POST 请求转发到 URL 的能力构建了一个 SMS 服务 ( [http://www.txtreg.net )。](http://www.txtreg.net)用户将文本发送到电子邮件地址，PHP 脚本对其进行处理，然后将电子邮件直接发送回他们的手机。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-11T18:20:47.390

试试[SMS Enabler 软件](http://smsenabler.com/)。要接收 SMS 消息，它使用连接到 PC 的 3G/4G/GSM USB 调制解调器。它可以通过 HTTP 将传入消息转发到 URL，或将它们存储在数据库表中，或将它们实时写入 CSV 文件。

# java - 在自己的构造函数中调用 thread.start()

> ID：84285
> 
> 赞同：10
> 
> 时间：2008-09-17T15:11:33.940
> 
> 标签：java, multithreading

线程在自己的构造函数中调用 this.start() 是否合法？如果是这样，这会导致哪些潜在问题？我知道在构造函数运行完成之前，对象不会完全初始化，但除此之外还有其他问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-17T16:16:34.750

出于内存安全的原因，您不应将对对象或该对象的字段的引用从其构造函数中暴露给另一个线程。假设您的自定义线程具有实例变量，通过从构造函数中启动它，您肯定会违反 Java 内存模型准则。有关更多信息，请参阅[Brian Goetz 的安全施工技术](http://www.ibm.com/developerworks/java/library/j-jtp0618.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T17:08:37.683

如果 Thread 类被进一步子类化，您还会看到奇怪的问题。在这种情况下，一旦 super() 退出，您将最终得到线程已经运行，并且子类在其构造函数中可能执行的任何操作都可能无效。

@bill barksdale 如果线程已经在运行，再次调用 start 会给你一个 IllegalThreadStateException，你不会得到 2 个线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T15:33:17.913

我假设您想这样做以使您的代码不那么冗长；而不是说

```
Thread t = new CustomThread();
t.start();
activeThreads.add(t); 
```

你可以说

```
activeThreads.add( new CustomThread() ); 
```

我也喜欢不那么冗长，但我同意其他受访者的观点，即您不应该这样做。具体来说，它打破了惯例；任何熟悉 Java 并阅读过第二个示例的人都会假设该线程尚未启动。更糟糕的是，如果他们编写自己的线程代码以某种方式与您的交互，那么一些线程将需要调用`start`，而其他线程则不需要。

当您自己工作时，这似乎并不引人注目，但最终您将不得不与其他人一起工作，并且养成良好的编码习惯是很好的，这样您就可以轻松地与他人合作并使用标准约定。

但是，如果您不关心约定并且讨厌多余的冗长，那么请继续；即使您`start`错误地尝试多次调用，这也不会导致任何问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T15:38:37.620

顺便说一句，如果想要更低的冗长并且仍然保持构造函数的“标准”语义，可以创建一个工厂方法：

```
activeThreads.add( CustomThread.newStartedThread() ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T15:14:57.740

这是合法的，但并不明智。实例的线程部分将被完全初始化，但您的构造函数可能不会。几乎没有理由扩展 Thread，并且使用这样的技巧对您的代码没有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T15:59:45.993

它*是*“合法的”，但我认为最重要的问题是：一个班级应该做一件事并做好。

如果您的类在内部使用线程，则该线程的存在不应该在公共 API 中可见。这允许在不影响公共 API 的情况下进行改进。解决方案：扩展 Runnable，而不是 Thread。

如果您的类提供了在这种情况下碰巧在线程中运行的通用功能，那么您不想将自己限制为*始终*创建线程。这里的解决方案相同：扩展 Runnable，而不是 Thread。

为了减少冗长，我建议使用工厂方法（例如 Foo.createAndRunInThread()）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-03-03T15:29:31.443

法律...是的（有其他地方提到的警告）。可取的......不。

我只是一种你很容易避免的气味。如果你想让你的线程自动启动，就像[Heinz Kabutz](http://www.javaspecialists.eu/archive/Issue149.html)一样。

```
public class ThreadCreationTest {
  public static void main(String[] args) throws InterruptedException {
    final AtomicInteger threads_created = new AtomicInteger(0);
    while (true) {
      final CountDownLatch latch = new CountDownLatch(1);
      new Thread() {
        { start(); } // <--- Like this ... sweet and simple.
        public void run() {
          latch.countDown();
          synchronized (this) {
            System.out.println("threads created: " +
                threads_created.incrementAndGet());
            try {
              wait();
            } catch (InterruptedException e) {
              Thread.currentThread().interrupt();
            }
          }
        }
      };
      latch.await();
    }
  }
} 
```

# c - 是否有任何工具可以为有效的 C 程序生成报告

> ID：84286
> 
> 赞同：0
> 
> 时间：2008-09-17T15:11:49.603
> 
> 标签：c, parsing, report

是否有任何工具可以解析有效的**C**程序并生成包含*函数*列表、*全局变量*、*`#define`常量*、*每个函数中的局部变量*等的报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T15:13:36.463

Doxygen 可以完成上述所有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T15:24:00.603

尝试带有 -x 选项的 exuberant-ctags 并告诉它生成所有类型。Exuberant CTAGS 是许多 linux 发行版的默认 ctags。

你可以试试： exuberant-ctags -x --c-kinds=cdefglmnpstuvx --language-force=c 文件名

如果文件名没有 .c 扩展名，甚至可以工作。

您可以使用 exuberant-ctags --list-kinds=c 查看可能的标签。

windows下，cygwin环境支持ctags。我不确定是否有不需要 cygwin 的 Windows 构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:32:12.720

有一些工具，这取决于你想要做什么。我不确定你所说的“报告”是什么意思，像[lxr](http://lxr.linux.no/)这样的东西会做 html 等交叉引用的链接。但是对于帮助理解一些代码的人来说，[ncc](http://students.ceid.upatras.gr/~sxanth/ncc/)或[cscope](http://freshmeat.net/projects/cscope/)（后者在大多数 Linux 发行版中）也有一些 IDE 具有其中的一些功能（如 eclipse）。cscope 的旧替代品是 ctags 和 etags。

# ruby-on-rails - 在 Rails 应用程序中获取 URL 的完整列表

> ID：84290
> 
> 赞同：8
> 
> 时间：2008-09-17T15:12:15.670
> 
> 标签：ruby-on-rails, url, listings

如何获得我的 rails 应用程序可以生成的所有 url 的完整列表？

我不希望我得到的路由形成 rake 路由，而是我想获得与我的应用程序中所有动态生成的页面相对应的实际 URL...

这甚至可能吗？

（背景：我这样做是因为我想要一个完整的 URL 列表，用于我想做的一些负载测试，它必须涵盖应用程序的整个广度）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-18T08:12:33.190

我能够使用以下命令产生有用的输出：

```
$ wget --spider -r -nv -nd -np http://localhost:3209/ 2>&1 | ack -o '(?<=URL:)\S+'
http://localhost:3209/
http://localhost:3209/robots.txt
http://localhost:3209/agenda/2008/08
http://localhost:3209/agenda/2008/10
http://localhost:3209/agenda/2008/09/01
http://localhost:3209/agenda/2008/09/02
http://localhost:3209/agenda/2008/09/03
^C 
```

### 参数的快速参考`wget`：

```
# --spider                  don't download anything.
# -r,  --recursive          specify recursive download.
# -nv, --no-verbose         turn off verboseness, without being quiet.
# -nd, --no-directories     don't create directories.
# -np, --no-parent          don't ascend to the parent directory. 
```

### 关于`ack`

`ack`就像`grep`但使用`perl`更完整/更强大的正则表达式。

`-o`告诉`ack`只输出匹配的子字符串，并且我使用的模式查找前面的任何非空格`'URL:'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:27:35.773

您可以非常快速地编写一个程序，该程序获取输出`rake routes`然后解析输出以将 URL 列表放在一起。

通常，我为负载测试所做的是使用[WebLOAD](http://webload.org)之类的工具并编写几种不同类型的用户会话（或用户可以采取的不同路线）的脚本。然后，我创建了一个用户会话组合并在网站上运行它们，以获得接近网站运行方式的准确图片。

通常，我还将在总共 4 台不同的机器上运行大约 80 个并发用户会话，以真实地模拟通过应用程序将发生的事情。这也确保我不会花太多时间优化不常访问的页面，而是可以专注于关键路径上的整体应用程序性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-28T19:58:27.057

查看 Courtnay Gasking 编写的 Spider 集成测试

[http://pronetos.googlecode.com/svn/trunk/vendor/plugins/spider_test/doc/classes/Caboose/SpiderIntegrator.html](http://pronetos.googlecode.com/svn/trunk/vendor/plugins/spider_test/doc/classes/Caboose/SpiderIntegrator.html)

# visual-c++ - 小型公司的代码/文档管理

> ID：84303
> 
> 赞同：2
> 
> 时间：2008-09-17T15:13:25.997
> 
> 标签：visual-c++, version-control

我在一家非常小的公司工作（约 5 名员工，2.5 名程序员）。几年来，我们已经摆脱了没有代码或文档管理的困扰，但随着我们的成长，它开始赶上我们。

对管理系统的任何建议。免费更好，但便宜是可以接受的。我们只是不想花更多的时间在安装/配置上，而不是节省我们的时间。

我们主要使用 VC++ 6，但我们正在扩展到 VC# 2008。此外，我们需要跟踪几个硬件的机械图和电路图，以及硬件和软件的用户手册（但我没有真的希望找到一种工具来完成所有这些工作，只是希望）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T15:27:35.073

Subversion (SVN) 是您的绝佳选择。它是免费的，使用 TortoiseSVN 很好地集成到 Windows 中，并且深受用户的欢迎。

我们将它用于源代码以及文档管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T15:21:13.120

[http://trac.edgewall.org/](http://trac.edgewall.org/) - 可能有点难安装，但如果与 svn 存储库结合使用则非常好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:15:35.287

Mantis 非常适合问题跟踪。用于源代码控制的颠覆。两者都是免费的。

对于文件，我不知道。听起来你会很好地使用网络共享。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-04T14:13:02.457

使用 Git 进行源代码控制，使用 Basecamp/Pivotal Tracker/Unfuddled 进行编码工作流程，使用 Sharepoint/Google Docs 进行文档管理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T15:20:26.727

你可能想看看[Trac](http://trac.edgewall.org/ "追踪")。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T15:25:29.040

我在一家类似规模的公司工作，当我来到这里时，我和你在同一个地方。我很容易实现了 SVN/Subversion [http://subversion.tigris.org/ 。](http://subversion.tigris.org/)如果您使用 svn 协议并使用 svnserve（可以设置为在您的服务器上自动启动的 Windows 服务），根据您想要阅读的内容[http://svnbook.red-需要 1.5-3 小时来设置bean.com/](http://svnbook.red-bean.com/)，请参阅 collabnet [http://www.collab.net/downloads/subversion/](http://www.collab.net/downloads/subversion/)以获取 Windows 软件包下载

使用 Windows，您可以使用集成到 windows shell 中的 Tortoise SVN。还有一个集成到 Visual Studio中的 Ankh SVN (2.0) [http://ankhsvn.open.collab.net/的新版本。](http://ankhsvn.open.collab.net/)Ankh 非常好（有待更改的窗口，有点类似于 Subclipse 之类的功能），但它是一个新版本并且有些错误（我们遇到了一些内存问题和缓慢）。我们目前使用 Tortoise 进行初始结帐或导入，使用 Ankh 进行其他所有操作，并且非常高兴。

如果您有任何 Mac 用户，则有很多选择。我们这里有一个使用版本[http://www.versionsapp.com/](http://www.versionsapp.com/)的 mac 用户，虽然听起来他们一旦退出测试版就会收费。

我会推荐 SVN，因为它在那里被广泛使用，而且我觉得这对于您将每天用于生产目的的开源项目很重要。只是说清楚，提到的所有内容（版本除外）都是免费的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T15:37:36.030

强制！

与大多数其他源代码控制系统相比，它的速度非常快。它远程工作得很好。（就我而言，SSH 隧道）

VS 插件相当不错......我还没有尝试过 Eclipse 那个。

如果您可以与每个拥有 5 个工作区的两个用户相处，那么您可以免费使用它。（我有，目前）

如果那行不通，那么它确实会花费一些……我相信每个用户大约 800 美元。明年某个时候我可能会付钱。（当您在多台带有 VM 的机器上工作时，5 个工作区很困难）

尽管如此，我听说一个客户正在使用的比冰川慢的 ClearCase/ClearQuest 系统每位开发人员大约需要 1 万美元，因此在源代码控制方面成本很高是一个相对概念。

不要吝啬源代码控制，伙计！缓慢的源代码控制是 a$$ 的一个严重痛苦。

避免仅版本文件的类似 SourceSafe 的系统......使用跟踪任务或更改集的系统。将所有内容视为一项任务非常有用。标签不是可接受的替代品。

此外，Perforce 的日志特性使备份和恢复变得更加容易。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T15:15:22.200

如果您获得 MSDN 开发人员许可证，则可以运行 TFS 工作组版。源代码控制和文档管理都集中在一个非常易于使用和管理的软件包中。除了内部 wiki 之外，这也是我公司所做的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T15:18:34.907

使用颠覆。它是免费的，并且是绝大多数开源项目的首选源代码控制系统。

SVN 使用浅拷贝，因此当您在存储库中有大文件并进行分支时，不会完成完整的文件拷贝......只是指向原始文件的指针。至于文本文件（代码），仅存储差异。

使用 TortoiseSVN 进行 Windows 资源管理器集成。

TFS 是一头猪，你需要打开 Visual Studio 才能与源代码浏览器进行交互。愚蠢的 CAD 工程师必须为此需要 TFS 的许可证。

对于文档管理，只需使用 Windows Server 2003（或 2008）附带的 Windows Sharepoint Services。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-30T11:53:27.067

似乎您的“管理”要求的解决方案至少需要以下类别的工具或工具集：（对不起链接，没有足够的声誉在回复中放置适当的工具）

*   源代码管理
*   故障/错误票务
*   文档管理

一定要看看 stackoverflow.com/questions/15024/tools-to-help-a-small-shop-score-higher-on-the-joel-test 帮助小商店在 joel 测试中获得更高分数的工具stackoverflow.com/questions/84303/code-document-management-for-a-very-small-company/84363#84363 Kristopher

每个都有各种免费/开源解决方案，同样也有商业解决方案。

## 源代码管理 (SCM)

源代码管理的一个重要趋势（？）正在从使用诸如 TFS（？）、cvs 或 subversion.tigris.org svn）之类的集中式代码管理演变为使用诸如 www.selenic 之类的工具的分散式“分布式”源代码管理。 com/mercurial/wiki/ 或 git-scm.com/。一些工具要么集成到延续中

上面提到的源代码管理工具都有很好的ms windows集成工具，有的甚至有更紧密的Visual Studio集成（例如Mario提到的TFS、ankhsvn.open.collab.net/ANKH svn）。

当您的编码涉及到与集中式源代码存储库断开连接的大部分时间（例如，当您的存储库无法通过 Internet 访问时，在家中进行大量编码时），一个简单的概括会推荐 git/mercurial。

维基百科有一个 en.wikipedia.org/wiki/Source_code_management 很好地概述了与源代码管理相关的各种问题，以及各种选项的好处。

如果您之前没有使用过 scm，只需选择一两个适合您的团队要求的工具并进行测试。当然，如果您认识附近有特定 scm 解决方案经验的人，这可能有助于团队的学习曲线，以共享经验。

我为您的场景选择：使用 ankhsvn.open.collab.net Ankh SVN 进行 Visual Studio 集成的 Subversion。

## 故障/错误票务

没有可用的工具可以为每个人解决所有问题，每种工具都有其优势，并且大多数都需要开发团队现有的工作方式做出一些妥协。同样，wikipedia 是您的朋友，提供 en.wikipedia.org/wiki/Bug_tracker 通用摘要和 en.wikipedia.org/wiki/Comparison_of_issue_tracking_systems 主要工具比较。

### 安装

基于 php 的工具是最容易启动和运行的（根据我的经验），而 perl 工具涉及更多（？）当然有一个真正易于安装的 python，但需要比我更好的头脑来配置。

我为您选择的方案：trac.edgewall.org/Trac

> Trac 是用于软件开发项目的增强型 wiki 和问题跟踪系统。Trac 使用简约的方法进行基于 Web 的软件项目管理。我们的使命是帮助开发人员编写出色的软件，同时不碍事。Trac 应尽可能少地强加于团队既定的开发流程和政策。
> 
> 它提供了一个到 Subversion（或其他版本控制系统）的接口、一个集成的 Wiki 和方便的报告工具。
> 
> Trac 允许在问题描述和提交消息中添加 wiki 标记，在错误、任务、变更集、文件和 wiki 页面之间创建链接和无缝引用。时间线按顺序显示所有当前和过去的项目事件，使获取项目概览和跟踪进度非常容易。路线图显示了前进的道路，列出了即将到来的里程碑。

## 图纸/文件管理

如果您将 Subversion 与 Trac 一起使用，那么您的大部分文档管理都可以使用这些工具来解决。否则，另一个 stackoverflow 讨论主题：stackoverflow.com/questions/587481/developer-documentation-sharepoint-document-management-vs-screwturn-wiki 对于以 Windows 为中心的环境，开发人员文档共享点文档管理与螺丝转 wiki 是一本不错的读物。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T15:33:36.803

我也在一家小公司工作，我们主要使用 .NET 语言进行开发。我们决定使用 Visual SourceSafe 进行源代码控制，尽管它的名声有问题，因为它与 Visual Studio 很好地集成。VSS 对我们来说效果很好，我们没有遇到任何严重的问题。此外，我们还托管了一个 SharePoint 服务器，用于存储编码标准、故事板甚至我们的 SCRUM 日志等文档。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-17T15:37:04.003

我们使用 HostingPlayground。每月只需​​ 6 美元，我们就可以获得多个 Subversion 存储库和一个 Trac 实例。打不过。由于它是一项服务，因此可以立即使用。

# .net - 如何将 IBM iSeries 2 连接字符串中的 SQL 缺省库指示到 AS/400？

> ID：84310
> 
> 赞同：5
> 
> 时间：2008-09-17T15:14:12.530
> 
> 标签：.net, database, connection-string, ibm-midrange

我正在使用 IBM iSeries Access for Windows 包连接到 AS/400 存储过程层。这为 .NET DLL 提供了与命名空间中的类类似的类`System.Data`。因此，我们使用他们的连接类实现并为其提供连接字符串。

有谁知道我如何修改连接字符串以指示它应该使用的默认库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T23:06:20.373

如果您**通过 .NET**连接：

```
Provider=IBMDA400;Data Source=as400.com;User Id=user;Password=password;Default Collection=yourLibrary; 
```

***默认集合***是设置程序应该开始执行的库的参数。

如果您**从 Windows 通过 ODBC**进行连接（例如在控制面板中设置驱动程序）：

```
DRIVER=Client Access ODBC Driver(32-bit);SYSTEM=as400.com;EXTCOLINFO=1;UID=user;PWD=password;LibraryList=yourLibrary 
```

在这种情况下， ***LibraryList***是要设置的参数，记住这是用于 ODBC 连接的。

IBM 有两个驱动程序可以连接到 AS400，较旧的驱动程序使用上面的连接字符串，如果您有来自 IBM 的名为“System i Access for Windows”的最新版本的客户端软件，那么您应该使用这个连接字符串：

```
DRIVER=iSeries Access ODBC Driver;SYSTEM=as400.com;EXTCOLINFO=1;UID=user;PWD=password;LibraryList=yourLibrary 
```

最后一个几乎相同，只是***DRIVER***参数值发生了变化。

如果您在 .NET 应用程序中使用它，请不要忘记将***providerName***参数添加到您的 XML 标记并定义用于连接的 API，在本例中为 OleDb：

```
providerName="System.Data.OleDb" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T16:05:17.697

使用 Client Access Express 驱动程序从一些 Delphi 源代码中提取片段。可能不完全是您正在寻找的东西，但它可能会帮助其他偶然发现这篇文章的人。**该`DBQ`部分是默认库，该`System`部分是 AS400/DB2 主机名。**

```
ConnectionString :=
  'Driver={Client Access ODBC Driver (32-bit)};' +
  'System=' + System + ';' +
  'DBQ=' + Lib + ';' +
  'TRANSLATE=1;' +
  'CMT=0;' +
  //'DESC=Client Access Express ODBC data source;' +
  'QAQQINILIB=;' +
  'PKG=QGPL/DEFAULT(IBM),2,0,1,0,512;' +      
  'SORTTABLE=;' +
  'LANGUAGEID=ENU;' +
  'XLATEDLL=;' +
  'DFTPKGLIB=QGPL;'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:19:32.127

您是否使用 OLE DB 的目录库列表参数？这就是我的连接字符串通常的样子：

```
<add name="AS400ConnectionString" connectionString="Data Source=DEVL820;Initial Catalog=Q1A_DATABASE_SRVR;Persist Security Info=False;User ID=BLAH;Password=BLAHBLAH;Provider=IBMDASQL.DataSource.1;**Catalog Library List=&quot;HTSUTST, HTEUSRJ, HTEDTA&quot;**" providerName="System.Data.OleDb" /> 
```

# perl - perldoc perlxxx 选项是什么？

> ID：84322
> 
> 赞同：4
> 
> 时间：2008-09-17T15:15:22.230
> 
> 标签：perl, perldoc

似乎使用 perldoc perl 给出了例如 perlre、perlvar 等的列表。

这是查找概述或教程或参考手册部分可用内容列表的最佳位置吗？还有其他更好的清单吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T15:23:20.870

```
perldoc perltoc 
```

关于各种文档文件有点冗长。如果您想要核心模块列表，请尝试

```
perldoc perlmodlib 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T15:18:47.323

另请参阅[学习 perl 的最佳在线资源](https://stackoverflow.com/questions/70573/best-online-source-to-learn-perl)

专门针对 perldoc，您还可以在线查看内容，这可能更容易看：[perldoc online](http://perldoc.perl.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T16:40:03.837

我认为“perldoc perltoc”对于仅查找“perlxxx”主题列表来说太冗长了。而是使用“perldoc perl”。或者[http://perldoc.perl.org/perl.html](http://perldoc.perl.org/perl.html)，这是在线版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T09:58:35.057

[一个更友好的起点是perldoc perlintro](http://perldoc.perl.org/perlintro.html)，它只链接到其他几个 perlxxx 页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T16:06:39.813

这应该是一个好的开始。您还可以在线找到相同的信息：http: [//perldoc.perl.org/perl.html](http://perldoc.perl.org/perl.html)。

我不确定你所说的更好是什么意思。[在http://www.perl.com/](http://www.perl.com/)上也有大量有用的信息。

# macos - 如何保护 Mac OS X 软件不被破解？

> ID：84324
> 
> 赞同：3
> 
> 时间：2008-09-17T15:15:23.667
> 
> 标签：macos, obfuscation, protection

我们正在发布我们的 Windows 应用程序的 Mac 版本。在 Windows 下，有多种可执行文件保护工具，例如 Armadillo、ExeCryptor、AsProtect 等，但这些工具都没有 Mac 版本。所以，我的问题是：

是否有适用于 Mac OS X 的可执行保护/加密工具？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-10-18T18:39:36.063

这是我个人和大多数其他 OS X 开发人员的观点，您应该使窃取软件变得相当困难，但有一点是根本不值得付出努力。事实是，几乎没有什么事情可以完全保护一个软件。您为保护该软件所做的工作越多，您就越难让真正的用户使用您的软件。然后，真正的用户讨厌使用您的软件，因为自从他们的加密狗坏了之后，他们失去了 5 天的生产力。购买它的人越来越少，因为其他真正的用户已经传播了这个严厉的保护计划是不值得的。

著名的 Mac OS X 开发人员 Will Shipley 在这里写了一篇他臭名昭著的观点文章：[http](http://wilshipley.com/blog/2005/06/piracy.html) ://wilshipley.com/blog/2005/06/piracy.html 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T15:21:14.650

这可能很有用：[使用 OpenSSL 获取许可证密钥](http://sigpipe.macromates.com/2004/09/05/using-openssl-for-license-keys/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T15:36:43.303

[AquaticPrime](http://www.aquaticmac.com/)是一个基于非对称密钥加密的开源许可框架，并且很难破解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-18T14:47:39.903

[UPX](http://upx.sourceforge.net/)可以加密/压缩 Mac OSX 可执行文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-07T15:42:47.947

我是 Windows 的 PELock 软件复制保护的制造商，我必须说，在我的一生中，我收到了 2 个要求为 MacOS 制作复制保护的请求......曾经我正在寻找一些 MacOS 可执行文件的加密工具并且没有找不到任何东西（除了不保护可执行文件的巨大许可解决方案），也许这是新产品的一个很好的市场利基，但从我的角度来看，它......不值得努力（我是个混蛋，我知道:D)，但也许由于 x86 现在是默认平台，编写软件保护代码的人会尝试（Rafael [themida]、Pavol [svkp]、Alexey [asprotect] 你读过这个吗？;)) :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-06T10:01:09.327

坦率地说（回复：niko，真的），过分担心 mac 平台的复制保护似乎很愚蠢。这涉及到一种心态，Mac 用户通常比 PC 用户不太可能尝试非法下载/torrent。虽然加密和密钥生成器通常被认为足够远，但在*极端*情况下，您可以查看 PACE 的 iLOK/interLok 复制保护 w/usb 密钥。我认为这是一个愚蠢的极端解决方案，并且往往会使采用者感到沮丧（有关详细信息，请参阅 Amarra）。

不幸的是，在 Mac 或 PC 上，用户体验和开发人员保护之间的平衡不是很好。

# mysql - MySql - 如果不存在则创建表否则截断？

> ID：84330
> 
> 赞同：23
> 
> 时间：2008-09-17T15:15:42.667
> 
> 标签：mysql, truncate, exists

**这是更新的问题：**

当前查询正在执行以下操作：

```
$sql1 = "TRUNCATE TABLE fubar";
$sql2 = "CREATE TEMPORARY TABLE IF NOT EXISTS fubar SELECT id, name FROM barfu"; 
```

第一次运行包含此内容的方法时，它会在截断时生成一条错误消息，因为该表尚不存在。

我唯一的选择是执行`CREATE TABLE`，运行`TRUNCATE TABLE`，然后填写表格吗？（3个单独的查询）

**原来的问题是：**

我一直很难弄清楚在 MySql 中是否可以在不必编写块 sql 的情况下进行以下操作：

```
CREATE TABLE fubar IF NOT EXISTS ELSE TRUNCATE TABLE fubar 
```

如果我在创建表之前单独运行截断，并且该表不存在，那么我会收到一条错误消息。我正在尝试消除该错误消息，而无需添加更多查询。

此代码将使用 PHP 执行。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-17T17:12:09.547

shmuel613，最好更新您的原始问题而不是回复。最好有一个地方包含完整的问题，而不是在讨论中展开。

本的回答是合理的，除了他似乎有一个他不想要的“不”。**仅在表不**存在时才将其删除是不太正确的。

您确实需要多个语句。有条件地创建然后填充：

1.  如果不存在则创建临时表 fubar ( id int, name varchar(80) )
2.  截断表 fubar
3.  插入到 fubar 选择 * 从 barfu

或者只是删除并重新创建

1.  如果存在则删除表
2.  CREATE TEMPORARY TABLE fubar SELECT id, name FROM barfu

使用纯 SQL，这些是您真正的两类解决方案。我更喜欢第二个。

（使用存储过程，您可以将其简化为一条语句。例如： TruncateAndPopulate(fubar) 但是当您为 TruncateAndPopulate() 编写代码时，您将花费更多的时间，而不仅仅是使用上面的 SQL。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T15:22:45.363

您可以在“如果不存在则创建”之后进行截断。这样它就永远存在了……并且在那一点上永远是空的。

```
CREATE TABLE fubar IF NOT EXISTS
TRUNCATE TABLE fubar 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-11-03T10:43:57.080

如果表存在，则执行任何查询。

用法：`call Edit_table(database-name,table-name,query-string);`

*   过程将检查数据库名下的表名是否存在，如果存在则执行查询字符串。以下是存储过程：

> ```
> DELIMITER $$
> 
> DROP PROCEDURE IF EXISTS `Edit_table` $$
> CREATE PROCEDURE `Edit_table` (in_db_nm varchar(20), in_tbl_nm varchar(20), in_your_query varchar(200))
> DETERMINISTIC
> BEGIN
> 
> DECLARE var_table_count INT;
> 
> select count(*) INTO @var_table_count from information_schema.TABLES where TABLE_NAME=in_tbl_nm and TABLE_SCHEMA=in_db_nm;
> IF (@var_table_count > 0) THEN
>   SET @in_your_query = in_your_query;
>   #SELECT @in_your_query;
>   PREPARE my_query FROM @in_your_query;
>   EXECUTE my_query;
> 
> ELSE
>   select "Table Not Found";
> END IF;
> 
> END $$
> DELIMITER ; 
> ```

[更多关于 Mysql](http://kedar.nitty-witty.com/miscpages/mysql-linux-articles.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T15:22:00.733

怎么样：

```
DROP TABLE IF EXISTS fubar;
CREATE TABLE fubar; 
```

或者你的意思是你只想用一个查询来做？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T15:30:16.750

那好吧，还不错。更具体地说，当前查询正在执行以下操作：

```
$sql1 = "截断表 fubar";
$sql2 = "如果不存在 fubar 则创建临时表 SELECT id, name FROM barfu";

```

第一次运行包含此内容的方法时，它会在截断时生成一条错误消息，因为该表尚不存在。

我唯一的选择是执行“CREATE TABLE”，运行“TRUNCATE TABLE”，然后填充表格吗？（3个单独的查询）

PS - 感谢您如此迅速地回复！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-11-03T10:51:10.333

如果您使用的是 PHP，请使用[mysql_list_tables](http://www.php.net/manual/en/function.mysql-list-tables.php)在 TRUNCATE 之前检查该表是否存在。

# excel - 是否有宏可以有条件地将行复制到另一个工作表？

> ID：84331
> 
> 赞同：3
> 
> 时间：2008-09-17T15:16:04.803
> 
> 标签：excel, copy, excel-2003, worksheet, vba

在 Excel 2003 中是否有宏或方法可以有条件地将行从一个工作表复制到另一个工作表？

我通过 Web 查询将 SharePoint 中的数据列表提取到 Excel 中的空白工作表中，然后我想将特定月份的行复制到特定工作表（例如，SharePoint 工作表中的所有 7 月数据到Jul 工作表、从 SharePoint 工作表到 Jun 工作表的所有 6 月数据等）。

**样本数据**

```
Date - Project - ID - Engineer
8/2/08 - XYZ - T0908-5555 - JS
9/4/08 - ABC - T0908-6666 - DF
9/5/08 - ZZZ - T0908-7777 - TS 
```

这不是一次性的练习。我正在尝试组合一个仪表板，我的老板可以从 SharePoint 中提取最新数据并查看每月结果，因此它需要能够一直这样做并干净地组织它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T15:38:42.860

这行得通：它的设置方式我从直接窗格中调用它，但您可以轻松创建一个 sub() 每月调用一次 MoveData，然后调用 sub。

您可能需要添加逻辑以在全部复制后对每月数据进行排序

```
Public Sub MoveData(MonthNumber As Integer, SheetName As String)

Dim sharePoint As Worksheet
Dim Month As Worksheet
Dim spRange As Range
Dim cell As Range

Set sharePoint = Sheets("Sharepoint")
Set Month = Sheets(SheetName)
Set spRange = sharePoint.Range("A2")
Set spRange = sharePoint.Range("A2:" & spRange.End(xlDown).Address)
For Each cell In spRange
    If Format(cell.Value, "MM") = MonthNumber Then
        copyRowTo sharePoint.Range(cell.Row & ":" & cell.Row), Month
    End If
Next cell

End Sub

Sub copyRowTo(rng As Range, ws As Worksheet)
    Dim newRange As Range
    Set newRange = ws.Range("A1")
    If newRange.Offset(1).Value <> "" Then
        Set newRange = newRange.End(xlDown).Offset(1)
        Else
        Set newRange = newRange.Offset(1)
    End If
    rng.Copy
    newRange.PasteSpecial (xlPasteAll)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T20:35:13.023

这是另一种解决方案，它使用一些 VBA 的内置日期函数并将所有日期数据存储在一个数组中以进行比较，如果您获得大量数据，这可能会提供更好的性能：

```
Public Sub MoveData(MonthNum As Integer, FromSheet As Worksheet, ToSheet As Worksheet)
    Const DateCol = "A" 'column where dates are store
    Const DestCol = "A" 'destination column where dates are stored. We use this column to find the last populated row in ToSheet
    Const FirstRow = 2 'first row where date data is stored
    'Copy range of values to Dates array
    Dates = FromSheet.Range(DateCol & CStr(FirstRow) & ":" & DateCol & CStr(FromSheet.Range(DateCol & CStr(FromSheet.Rows.Count)).End(xlUp).Row)).Value
    Dim i As Integer
    For i = LBound(Dates) To UBound(Dates)
        If IsDate(Dates(i, 1)) Then
            If Month(CDate(Dates(i, 1))) = MonthNum Then
                Dim CurrRow As Long
                'get the current row number in the worksheet
                CurrRow = FirstRow + i - 1
                Dim DestRow As Long
                'get the destination row
                DestRow = ToSheet.Range(DestCol & CStr(ToSheet.Rows.Count)).End(xlUp).Row + 1
                'copy row CurrRow in FromSheet to row DestRow in ToSheet
                FromSheet.Range(CStr(CurrRow) & ":" & CStr(CurrRow)).Copy ToSheet.Range(DestCol & CStr(DestRow))
            End If
        End If
    Next i
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:31:10.960

这是部分伪代码，但你会想要类似的东西：

```
rows = ActiveSheet.UsedRange.Rows
n = 0

while n <= rows
  if ActiveSheet.Rows(n).Cells(DateColumnOrdinal).Value > '8/1/08' AND < '8/30/08' then
     ActiveSheet.Rows(n).CopyTo(DestinationSheet)
  endif
  n = n + 1
wend 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T16:40:35.420

我会手动执行此操作的方式是：

*   使用数据 - 自动筛选
*   根据日期范围应用自定义过滤器
*   将过滤后的数据复制到相关的月表
*   每个月重复一次

下面列出的是通过 VBA 执行此过程的代码。

它具有处理每月数据部分而不是单个行的优势。这可以更快地处理更大的数据集。

```
 Sub SeperateData()

    Dim vMonthText As Variant
    Dim ExcelLastCell As Range
    Dim intMonth As Integer

   vMonthText = Array("January", "February", "March", "April", "May", _
 "June", "July", "August", "September", "October", "November", "December")

        ThisWorkbook.Worksheets("Sharepoint").Select
        Range("A1").Select

    RowCount = ThisWorkbook.Worksheets("Sharepoint").UsedRange.Rows.Count
'Forces excel to determine the last cell, Usually only done on save
    Set ExcelLastCell = ThisWorkbook.Worksheets("Sharepoint"). _
     Cells.SpecialCells(xlLastCell)
'Determines the last cell with data in it

        Selection.EntireColumn.Insert
        Range("A1").FormulaR1C1 = "Month No."
        Range("A2").FormulaR1C1 = "=MONTH(RC[1])"
        Range("A2").Select
        Selection.Copy
        Range("A3:A" & ExcelLastCell.Row).Select
        ActiveSheet.Paste
        Application.CutCopyMode = False
        Calculate
    'Insert a helper column to determine the month number for the date

        For intMonth = 1 To 12
            Range("A1").CurrentRegion.Select
            Selection.AutoFilter Field:=1, Criteria1:="" & intMonth
            Selection.Copy
            ThisWorkbook.Worksheets("" & vMonthText(intMonth - 1)).Select
            Range("A1").Select
            ActiveSheet.Paste
            Columns("A:A").Delete Shift:=xlToLeft
            Cells.Select
            Cells.EntireColumn.AutoFit
            Range("A1").Select
            ThisWorkbook.Worksheets("Sharepoint").Select
            Range("A1").Select
            Application.CutCopyMode = False
        Next intMonth
    'Filter the data to a particular month
    'Convert the month number to text
    'Copy the filtered data to the month sheet
    'Delete the helper column
    'Repeat for each month

        Selection.AutoFilter
        Columns("A:A").Delete Shift:=xlToLeft
 'Get rid of the auto-filter and delete the helper column

    End Sub 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-17T15:24:06.297

如果这只是一次性练习，作为一种更简单的替代方法，您可以将过滤器应用于源数据，然后将过滤后的行复制并粘贴到新工作表中？

# ms-access - 什么可以阻止 MS Access 2000 表单关闭？

> ID：84332
> 
> 赞同：1
> 
> 时间：2008-09-17T15:16:10.387
> 
> 标签：ms-access, forms

我的 Access 2000 DB 给我带来了问题 - 有时（尚未查明原因）“书”表单不会关闭。单击其关闭按钮什么也不做，文件->关闭什么也不做，即使关闭 Access 也不会导致任何操作。我没有此表单的 OnClose 处理程序。我能找到的唯一解决方法是打开 Vba 编辑器，更改该表单的代码（甚至添加一个空格，然后立即删除该空格），然后返回关闭“书”表单，将其关闭，然后说“不，我不想保存更改”。只有这样它才会关闭。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T15:43:56.750

我认为，这是一个论坛帖子，描述了您面临的相同问题。下面的摘录说明了一种解决方法。

> 我所做的是将代码放在关闭按钮上，将任何子表单的源对象重新分配给空白表单，例如：
> 
> me!subParts.sourceobject = "subBlank" 'subBlank 是我的完全空白的表单，没有代码和控件等 docmd.close acForm, "fParts", acSaveNo
> 
> 上面 2 行是我发现阻止访问提示弹出的唯一方法。
> 
> [http://bytes.com/forum/thread681889.html](http://bytes.com/forum/thread681889.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T00:29:04.130

另一种选择是

```
(Me.Checkbox) 
```

或我喜欢的语法：

```
(Me!Checkbox) 
```

在我看来，这个主题的帖子中有很多混乱。原发帖人选择的答案引用了一篇文章，其中用户提示将*设计更改*保存到表单，但这里描述的问题似乎是表单关闭失败，而不是保存问题（保存问题仅在描述进入 VBE 并进行代码更改的解决方法中出现）。

我想知道原始用户是否设置了不正确的 VBE 选项？如果您打开 VBE 并转到 TOOLS | 选项，在常规选项卡上，您会看到有关错误处理的几个选项。应该选择 BREAK ON UNHANDLED ERRORS 或 BREAK IN CLASS MODULE，但重要的是要认识到，如果您使用前者，您可能看不到某些类型的错误。

除了对复选框控件的引用似乎是导致问题的原因之外，实际上并没有足够的详细信息来诊断更多信息，但是有许多 Access 编码最佳实践可以帮助您避免其中一些奇怪的情况。[Tony Toews 的最佳实践页面](http://www.granite.ab.ca/access/bestpractices.htm)中与代码相关的建议是一个很好的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:25:56.323

那肯定很奇怪。您在表单上有任何计时器控件吗？如果这样做，请尝试在 OnClose 中禁用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T15:26:17.540

询问您是否要保存更改的消息框可能会显示在表单后面。我相信此消息框是模态的，因此您必须单击是或否才能对表单执行任何操作，这就是您无法关闭它的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T15:42:04.507

您的表单是否有卸载事件？可以取消，如果是，表单在表单视图中时不会关闭。它只会在设计视图中关闭，当您编辑 vba 代码时，当您编辑代码时，表单在 Access 窗口中所做的事情。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T16:12:36.617

您的表单是否有复​​选框、切换按钮或选项按钮？Access 2000 中存在一个错误，如果您在未明确使用 vba 代码中的 Value 属性的情况下测试值，Access 将不会关闭，如下所示：

```
If Me.chkbox Then 
```

相对：

```
If Me.chkbox.Value Then 
```

# windows - 如何实现进程内全文搜索引擎

> ID：84339
> 
> 赞同：2
> 
> 时间：2008-09-17T15:16:31.963
> 
> 标签：windows, winapi, full-text-search

在我们的一个商业应用程序（Win32，用 Delphi 编写）中，我们希望实现全文搜索。该应用程序以某种无法直接识别为文本的二进制格式存储用户数据。

理想情况下，我想找到一个进程内解决方案（DLL 可以）或我可以通过 TCP 访问的本地服务器（最好）。API 应该允许我向服务器提交文本信息（以及表示它来自的二进制 blob 的元数据），当然，它应该允许我进行全文搜索，至少对逻辑运算符的支持最少和子字符串搜索。需要 Unicode 支持。

我在 Stack Overflow 上找到了广泛的搜索引擎列表（[有哪些搜索服务器？](https://stackoverflow.com/questions/66922/what-are-some-search-servers-out-there)），但我并不真正了解哪些引擎可以满足我的需求。在我花一两天时间测试他们每个人之前，我想征求 The Collective 的意见。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T15:37:46.110

市场上有很多选择。完全成熟的商业产品或开源变体。您对搜索提供商的选择在很大程度上取决于您的目标客户。

Microsoft 有一个免费的 Express 版本的 Search Server。据我所知，Express 版仅限于在一台服务器上运行应用程序层。

还有开源的[Apache Lucene](http://lucene.apache.org/java/docs/)项目。它有一个很好用的 API 和一个庞大的用户社区。最初的项目是基于 Java 的，但也有其他的[实现](http://wiki.apache.org/lucene-java/LuceneImplementations)，例如我个人使用的[NLucene for .NET。](http://sourceforge.net/projects/nlucene)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T15:27:38.253

我建议看一下 SQLite——全文搜索包含在最新版本中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:30:31.320

我想答案取决于你的数据库。例如，SQL Server 具有全文搜索功能，如果需要，还可以提供英语语言查询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T15:35:01.513

看看使用 PostgreSQL 和 tsearch。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T15:35:30.840

尝试使用带有 tsearch 的 postgresql

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T16:26:25.023

[Sphinx](http://www.sphinxsearch.com/)可能是最高效和可扩展的选项，而[SQLite - FTS3](http://dotnetperls.com/Content/SQLite-FTS3.aspx)是最直接的选项。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-29T16:14:52.530

虽然不在进程中，但[Solr](http://lucene.apache.org/solr/)非常快（基于 Lucene）并且可以从任何平台（HTTP）轻松访问

# c# - 如果公司使用 C++、C# 或 Java 作为应用程序语言，为什么要学习 Perl、Python、Ruby？

> ID：84340
> 
> 赞同：66
> 
> 时间：2008-09-17T15:16:35.940
> 
> 标签：c#, java, python, ruby, perl

我想知道为什么 C++、C#、Java 开发人员想要学习动态语言？

假设公司不会将其主要开发语言从 C++/C#/Java 切换到动态语言，那么动态语言有什么用？

与使用了几年的静态语言相比，动态语言在学习几天后可以更快或更好地完成哪些辅助任务？

## 更新

在看到最初的几个回复后，很明显有两个问题。我的主要兴趣是对雇主来说是合理的费用。也就是说，我正在寻找雇主资助学习动态语言的理由。除了员工将有更广阔的视野之外，雇主通常在寻找一些“真正的”好处。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-09-17T16:17:05.780

很多时候会出现一些不属于您正在开发的主要软件的快速任务。有时任务是一次性的，即将此文件与数据库进行比较，然后让我知道其中的差异。在 Perl/Ruby/Python 中进行文本解析比在 Java 或 C# 中要容易得多（部分原因是使用正则表达式要容易得多）。使用 Perl/Ruby/Python 解析文本文件（甚至可能是 vbscript *cringe*然后将其加载到数据库中，这可能比创建 Java/C# 程序来完成它或通过它来完成它所花费的时间要少得多手。

此外，由于大多数动态语言解析文本很容易，它们非常适合代码生成。当然，您的最终项目必须使用 C#/Java/Transact SQL，但不是剪切和粘贴 100 次、查找错误，然后再剪切和粘贴 100 次，通常（但并非总是）使用代码生成器更容易。

最近工作中的一个例子是我们需要从一个会计系统中获取数据到我们的会计系统中。该系统有一个导入格式，但旧系统有一个完全不同的格式（固定宽度，虽然有些东西必须匹配）。任务不是创建一个程序来一遍又一遍地迁移数据。就是将数据推送到我们的系统中，然后继续保持下去。因此，即使我们是一家 C# 和 SQL Server 商店，我还是使用 Python 将数据转换为我们的应用程序可以导入的格式。最终，我使用 python 并不重要，重要的是数据在系统中。我的老板很感动。

我经常看到用于测试的动态语言。创建 Python/Perl/Ruby 程序以链接到 Web 服务并向其抛出一些数据比创建等效的 Java 程序要容易得多。您还可以使用 python 来打击命令行程序，生成大量垃圾（但仍然有效）测试数据等。非常容易。

动态语言的另一大优势是代码生成。创建 C#/C++/Java 代码。一些例子如下：

我经常看到的第一个代码生成任务是人们使用动态语言来维护系统中的常量。无需手动编写一堆枚举，可以使用动态语言相当轻松地解析文本文件并使用枚举创建 Java/C# 代码。

SQL 是一个完全不同的球类游戏，但通常你通过剪切和粘贴 100 次而不是尝试执行一个函数来获得更好的性能（由于缓存执行计划或在函数中放置复杂的逻辑导致你逐行而不是在一套）。事实上，使用表定义来自动创建某些存储过程是非常有用的。

购买代码生成器总是更好。但即使你不这样做，花时间剪切/粘贴更有趣还是创建一个 Perl/Python/Ruby 脚本然后让它生成代码更有趣？如果你需要几个小时来编写代码，但创建代码生成器的时间更少，那么即使你使用它一旦你节省了时间并因此节省了金钱。如果您创建代码生成器所花费的时间比处理一次代码所花费的时间要长，但您知道您将不得不多次更新代码，那么它可能仍然有意义。如果你需要 2 个小时来编写代码，4 个小时来编写生成器，但你知道你必须再编写 5 或 6 次代码等效工作，这显然比创建生成器要好。

动态语言也比 Java/C#/C/C++ 更容易。特别是正则表达式浮现在脑海中。如果您开始在 Perl 中使用正则表达式并意识到它们的价值，那么您可能会突然开始使用 Java 正则表达式库（如果您以前没有使用过的话）。如果你有，那么可能还有别的东西。

我将为您提供最后一个对动态语言来说非常有用的任务示例。我的工作伙伴不得不把一个满是文件的目录刻录到不同的 cd 上，供不同的客户使用。有几个客户，但有很多文件，你必须查看它们才能看到它们是什么。他手工完成了这项任务……Java/C# 程序本来可以节省时间，但有一次，加上所有的开发开销，这不值得。然而，在 Perl/Python/Ruby 中将一些东西放在一起可能是值得的。他花了几个小时来做​​这件事。创建 Python 脚本来检查每个文件，匹配它去的客户，然后将文件移动到适当的位置，只需要不到一个时间......同样，这不是标准工作的一部分。但这项任务是一次性完成的。自己做比较好，花更多的时间让 Java/C# 完成任务，或者花更少的时间在 Python/Perl/Ruby 中完成。如果您使用的是 C 或 C++，由于在 C 或 C++ 中编程的额外问题（指针、无数组边界检查等），这一点更加引人注目。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-17T15:18:30.273

让我转过头来问一个说美国英语的人学习另一种语言有什么用？

我们说的语言（以及我们编程的语言）影响了我们的思维方式。这可能发生在基础层面，例如 c++ 与 javascript 与 lisp，或者在实现层面上，其中 ruby​​ 构造为您的“实际工作”中的解决方案提供了一个灵光乍现的时刻。

说到你的真正工作，如果市场向南而你的雇主决定“调整规模”你，你认为你会如何与一个灵活的人抗衡，因为他用数十种语言编写软件，而不是你有限的接触？在所有条件相同的情况下，我认为答案很明确。

最后，你以编程为生，因为你热爱编程……对吧？

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-18T01:46:03.963

我想还没有人提到过这个。学习一门新语言会很有趣！当然，这是尝试新事物的充分理由。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-09-17T15:24:20.150

我主要使用 Java 和 C# 进行编程，但使用动态语言（ruby/perl）来支持更流畅的部署、启动操作系统任务、自动报告、一些日志解析等。

经过短暂的 ruby​​ 或 perl 学习和试验后，您应该能够编写一些正则表达式操作脚本，这些脚本可以改变数据格式或从日志中获取信息。一个可以快速编写的小型 ruby​​/perl 脚本的示例是解析一个非常大的日志文件并仅以人类可读格式或 csv 格式报告少数感兴趣的事件的脚本。

此外，拥有各种不同编程语言的经验应该可以帮助您想出新的方法来解决更多结构化语言（如 Java、C++ 和 C#）中的问题。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-17T15:31:59.367

学习 Perl 或 Ruby 的一个重要原因是帮助您自动执行必须一遍又一遍地完成的任何复杂任务。

或者，如果您必须分析日志文件的内容，并且您需要比使用 grep、sed 等更多的 mungeing。

同样使用其他语言，例如 Ruby，没有太多“设置成本”，可以让您在用 C++、Java 等实现它们之前快速原型化想法。

高温高压

干杯，

抢

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-17T15:18:26.780

你希望永远为这家公司工作吗？如果你曾经在就业市场上出现过，也许一些潜在的雇主会意识到[Python 悖论](http://www.paulgraham.com/pypar.html)。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-18T13:43:56.980

*一个好的曲棍球运动员在冰球所在的地方打球。一个伟大的曲棍球运动员会在冰球所在的地方打球。- 韦恩·格雷茨基*

我们的行业总是在变化。没有一种语言可以永远成为主流。对我来说，Java、C++、.Net 是现在的重点。而 python、ruby、perl 将成为 puck 的所在。自己决定是要优秀还是优秀！

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-09-22T07:33:50.697

Paul Graham 几年前发表了一篇关于 Python 程序员为何成为更好的 Java 程序员的文章。( [http://www.paulgraham.com/pypar.html](http://www.paulgraham.com/pypar.html) )

基本上，无论新语言是否与公司当前的方法论相关，学习一门新语言就意味着学习新思想。愿意学习不被视为“商务舱”的语言的人意味着他对编程感兴趣，而不仅仅是赚取薪水。

引用保罗的网站：

> 人们不学习 Python 是因为它可以让他们找到工作；他们学习它是因为他们真正喜欢编程并且对他们已经知道的语言不满意。
> 
> 这使得他们正是公司应该想要雇用的那种程序员。因此，由于没有更好的名称，我将称之为 Python 悖论：如果一家公司选择用相对深奥的语言编写软件，他们将能够雇用更好的程序员，因为他们只会吸引那些足够关心学习它。而对于程序员来说，悖论更加明显：如果你想找到一份好工作，要学习的语言是一种人们不只是为了找到工作而学习的语言。

如果雇主愿意支付学习一门新语言的费用，那么自愿学习的人（假设这不是强制性课程）很可能是已经走上“快车道”的人。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-09-17T15:22:50.123

当我第一次学习 Python 时，我在一家 Java 商店工作。有时我不得不做一些严肃的文本处理任务，这些任务用 Python 脚本比 Java 程序更容易完成。例如，如果我必须解析一个复杂的 CSV 文件并找出其中的哪些行对应于我们的 Oracle 数据库中的行，那么使用 Python 比使用 Java 更容易做到这一点。

不仅如此，我发现学习 Python 让我成为了一个更好的 Java 程序员；用另一种语言学习了许多相同的概念后，我觉得我对这些概念的理解要好得多。至于是什么让 Python 比 Java 更容易，你可以看看这个问题：[Java -> Python？](https://stackoverflow.com/questions/49824/java-python)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-17T15:35:24.633

**编辑：**我在阅读原始问题的更新之前写了这个。有关更新问题的更好答案，请参阅我的其他答案。我将保持原样，以警告不要成为西方最快的枪=）

十多年前，当我学习计算机的方式时，胡须老智者解释了 C 和 C++ 如何成为该行业的工具。没有人使用 Pascal，只有鲁莽的人才会用汇编程序来冒险他们的公司。

当然，**甚至没有人会提到一种叫做 Java 的可怕的缓慢丑陋的东西**。它不会成为严肃业务的工具。

所以。嗯。替换上面故事中的语言，也许你可以预测未来。也许你不能。关键是，Java 永远不会是最后一种编程语言，而且你也很可能会换雇主。未来每天 24 小时向您收费。做好准备。

学习新语言对你有好处。此外，在某些情况下，它可以让你长时间吹牛。我的第一门大学课程是Scheme。因此，当人们与我谈论新的*语言 du jour*时，我的回答类似于“一流的功能？那是上个世纪的事了。”

当然，您可以使用高级语言**完成更多工作。**

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-17T17:59:36.737

学习一门新语言是一个长期的过程。过几天你就会学到基础知识，是的。但！您可能知道，任何语言的真正实用性都与标准库和其他可用组件相关联。学习如何有效地使用需要大量的实践经验。

也许唯一直接的短期好处是开发人员学会区分需要 Python/Perl/Ruby 锤子的钉子。而且，如果他们有任何好处，他们就可以进一步学习（也许是在线学习！）并成为真正的专家。

长期的好处更容易想象：

1.  员工成为更好的开发人员。更好的开发人员 => 更好的质量。这些天，我们生活在知识经济中。投资于那些已经为你工作的大脑会更明智。

2.  当下一个大语言出现时更容易适应。NBL 很可能具有当今脚本语言中存在的许多特性：一流的函数、闭包、流/生成器等。

3.  新的市场可能性和更快响应的能力。即使你不写 Python，*其他人也是*. 你的客户？项目中的另一个供应商？也许一个关键组件是用其他语言编写的？如果您没有可以理解代码并与之交互的人，那将花费金钱和时间。

4.  招聘。如果您的公司以向人们传授新奇有趣的东西而闻名，那么招聘顶尖人才会更容易。*每个人都*在做 Java/C#/C++。这不是在就业市场上区分自己的一种非常有效的方式。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-17T20:12:23.657

为了回答更新的问题，这是一个鸡/蛋问题。证明费用合理的最佳方法是展示它如何在其他地方降低成本，因此您可能需要花费一些额外/个人时间来首先学习一些东西以构建某种功能原型。

给你的老板看一个演示，比如“嘿，我做了这件事，它节省了我这么多时间[或者更好的是，这么多美元]，想象一下如果每个人都可以使用这个，我们会节省多少钱”

然后在他们同意后，解释它是如何成为其他技术的，并且值得花费更多的培训，并培训其他人如何做得更好。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-17T15:20:17.227

我经常发现学习另一种语言，尤其是动态类型语言，可以教会你其他语言的知识，让你成为一个整体上更好的程序员。例如，学习 ruby​​ 将以 Java 不会的方式教你面向对象编程，反之亦然。总而言之，我相信做一个全面的程序员比拘泥于单一语言要好。它使您对您工作的公司/客户更有价值。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-17T15:23:17.267

查看此主题的答案：

[https://stackoverflow.com/questions/76364/what-is-the-single-most-effective-thing-you-did-to-improve-your-programming-ski#84112](https://stackoverflow.com/questions/76364/what-is-the-single-most-effective-thing-you-did-to-improve-your-programming-ski#84112)

学习新语言就是保持开放的心态和学习新的做事方式。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-17T15:23:30.637

我不确定这是否是您正在寻找的东西，但我们在我工作的小公司中使用 Java 编写了我们的主要应用程序，但使用 python 快速编写了较小的脚本。备份软件，用于操作数据和推出结果的临时脚本。有时坐下来用 python 写一个快速的脚本似乎比在 java 中搞乱类和东西更容易。

不会保留的临时脚本不需要在它们上浪费大量的设计时间。

而且我很懒，但是当然，尽可能多地学习并看看其他语言中存在哪些功能是件好事。了解更多永远不会在未来的职业变化中伤害您:)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-17T15:24:32.600

这一切都是为了拓宽您作为开发人员的视野。如果您将自己限制在只使用强类型语言，那么您最终可能不会成为最好的程序员。

至于任务，Python/Lua/Ruby/Perl 非常适合小型简单任务，例如查找一些文件并重命名它们。当与用于快速开发简单应用程序的框架（例如 Rails、Django、Lua for Windows）搭配使用时，它们也能很好地工作。地狱，37Signals 是基于在 Ruby on Rails 中创建简单但非常有用的应用程序。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-09-17T15:25:05.547

它们对于“快速破解”很有用，该方法用于填补您的主要语言中的空白，以便快速（并且可能是肮脏）修复，而不是用您的主要语言开发相同的东西。一个例子：perl 中的一个简单脚本通过一个大文本文件并用另一个电子邮件地址替换所有实例是微不足道的，花费的时间在 10 分钟范围内。将控制台应用程序一起破解以使用您的主要语言执行相同的操作将需要数倍的时间。

您还有一个好处是，让自己接触其他语言可以拓宽您的能力，并且学习从不同语言的角度解决问题可能与语言本身一样有价值。

最后，脚本语言在扩展领域非常有用。以 LUA 为例。您可以用很少的开销将 lua 解释器固定到您的应用程序中，并且您现在可以创建丰富的脚本功能，这些功能可以向最终用户公开或快速更改和分发，而无需重新构建整个应用程序。这在许多游戏中都有很好的效果，尤其是魔兽世界。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-09-17T15:25:59.287

就我个人而言，我在一个 Java 应用程序上工作，但如果没有 perl 的一些支持脚本，我就无法忍受。

我有脚本可以快速翻转我指向的数据库、运行构建脚本的脚本、抓取数据和比较内容的脚本。

当然，我*可以*使用 java 或 shell 脚本（我也有其中的一些）来完成所有这些，但是当您只需要快速而肮脏的东西时，谁想要编译一个类（确保类路径设置正确等）。了解脚本语言可以消除 90% 的那些无聊/重复的手动任务。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-17T16:42:30.197

使用灵活的 OOP 系统学习一些东西，比如 Lisp 或 Perl（参见 Moose），可以让你更好地扩展和理解你对软件工程的想法。理想情况下，每种语言都有一些独特的方面（无论是 CLOS 还是其他一些技术），可以增强、扩展和发展你作为程序员的能力。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-17T17:41:51.753

如果你只有一把锤子，那么每个问题都开始看起来像钉子。

有时，拥有一把螺丝刀或一把钳子会使复杂的问题变得微不足道。

没有人问承包商、木匠等，“如果我已经有一把锤子，为什么还要学习使用螺丝刀？”。真正优秀的承包商/木匠拥有大量工具，并且知道如何很好地使用它们。所有程序员都应该做同样的事情，学习使用新工具并很好地使用它们。

> 但在我们使用任何电动工具之前，让我们花点时间谈谈商店安全。请务必阅读、理解并遵守电动工具随附的所有安全规则。这样做将大大降低人身伤害的风险。记住这一点：没有比佩戴这些更重要的规则：安全眼镜——规范

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-09-17T19:25:42.770

我认为动态语言的主要好处可以归结为

1.  快速发展
2.  胶水

较短的设计-代码-测试周期使动态语言成为原型设计、工具和快速而肮脏的一次性脚本的理想选择。恕我直言，后两者会对程序员的生产力产生巨大影响。令我惊讶的是，有多少人是手动艰难地完成工作，而不是为他们准备一个工具。我认为这是因为他们的工具箱中没有 Perl 之类的东西。

与几乎任何东西（其他程序或语言、数据库等）交互的能力使得重用现有工作和自动化原本需要手动完成的任务变得容易。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-09-18T05:59:45.863

鉴于越来越关注在 JVM 上运行动态语言（da-vinci vm 等）以及在其上运行的动态语言（JRuby、Grrovy、Jython）的数量不断增加，我认为用例正在增加。我发现真正受益的一些场景是

1.  **原型**设计 - 使用 RoR 或 Grails 构建快速原型，优势在于能够在标准应用服务器上运行它并（可能）重用现有服务等。

2.  **测试**——在动态语言中正确的单元测试要快得多

3.  **性能/自动化测试脚本**——其中一些工具开始允许使用选择的标准动态语言来编写测试脚本，而不是专有的脚本语言。附带的好处可能是能够重用您已经编写的一些单元测试代码。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-09-19T00:20:40.897

不要告诉你的雇主你想学习 Ruby。告诉他您想了解最新的 Web 框架技术。碰巧最热门的是 Django 和 Ruby on Rails。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2010-05-20T04:07:23.217

我发现我玩 Ruby 的次数越多，我对 C# 的理解就越好。

1）当你在这些语言之间切换时，它们每个人在他们试图解决的问题背后都有自己的结构和哲学。这将帮助您找到**适合工作**或**问题领域**的正确工具。

2）**编译器**（或某些语言的解释器）的作用变得更加突出。为什么 Ruby 的类型系统与 .Net/C# 系统不同？这些解决了哪些问题？您会发现自己对编译器的结构及其对语言的影响有了较低层次的理解

3) 在 Ruby 和 C# 之间切换确实帮助我更好地理解**设计模式**。我真的建议用 C# 之类的语言实现通用设计模式，然后再用 Ruby 之类的语言实现。它经常帮助我看穿一些编译器仪式到某种特定模式的哲学。

4) 不同的**社区**。C#、Java、Ruby、Python 等都有不同的社区，可以帮助你发挥能力。这是将您的手艺提升到新水平的好方法。

5) 最后但同样重要的是，因为新语言很有趣 :)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-17T15:20:20.550

撇开哲学问题不谈，我知道我从编写快速而肮脏的 Ruby 脚本来解决 Java 无法解决的蛮力问题中获得了价值。去年我有三个独立的目录结构，它们或多或少都相同，但文件之间有很多差异（客户没有听说过版本控制，剩下的就留给你想象吧）。

用 Java 编写分析器会花费大量开销，但在 Ruby 中，我在大约 40 分钟内完成了一个分析器。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-17T15:22:15.053

通常，动态语言（尤其是 python 和 lua）嵌入在程序中以添加更多类似插件的功能，并且因为它们是高级语言，可以轻松添加某些行为，不需要低/中级语言.

Lua 特别缺少所有低级系统调用，因为它是为易于使用而设计的，可以在程序中添加功能，而不是作为通用编程语言。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-17T15:36:52.430

您还应该考虑学习像 Scala 这样的函数式编程语言。它具有 Ruby 的许多优点，包括简洁的语法和强大的功能（如闭包）。但它会编译成 Java 类文件并无缝集成到 Java 堆栈中，这可能会让您的雇主更容易接受。

Scala 不是动态类型的，但它的“隐式转换”特性提供了动态类型的许多，甚至可能是所有的优点，同时保留了静态类型的许多优点。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-17T17:48:25.903

动态语言非常适合制作原型。通常出于性能原因，它们不适用于永久性解决方案或产品。*但是*，对于像 Python 这样的语言，它允许您在其中嵌入标准 C/C++/Java，反之亦然，您可以加速真正关键的部分，但将其与动态语言的灵活性粘合在一起。

...这样你就可以两全其美了。如果您需要根据为什么更多人应该学习这些语言来证明这一点，只需指出您可以更快地开发相同的软件以及解决方案的强大程度（因为我的经验是在动态语言中调试/修复问题，相当容易！）。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-17T17:58:26.940

了解 grep 和 ruby​​ 可以缩小问题范围，并验证解决方案，该问题涉及某些生产服务器上的大量 java 异常。因为我将解决方案放在 ruby​​ 中，所以它在一个下午而不是几天内完成（设计、实现、测试、运行、错误修复、重新运行、增强、结果分析）。我本可以使用全 Java 解决方案或 C# 解决方案解决相同的问题，但很可能会花费我更长的时间。

拥有动态语言专业知识有时也会让您使用动态较少的语言找到更简单的解决方案。在 ruby​​、perl 或 python 中，您只需直观地使用关联数组（哈希、字典、您想使用的任何单词）来处理最小的事情，当出现问题时，您可能会想在静态类型语言中创建复杂的类层次结构不一定要求它。

另外，您可以将大多数脚本语言插入到大多数运行时中。所以它不必是非此即彼。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-09-17T18:01:03.907

雇主可以看到的“真正好处”是更好的程序员，可以更快地实施解决方案；但是，您将无法提供任何确切的数字来证明费用的合理性，并且雇主很可能会让您从事现在赚钱的工作，而不是让您从事使未来变得更好的事情。

唯一一次你可以得到雇主的一毛钱培训，是当他们认为有必要时，它比雇用一个已经具备这种技能的新人便宜。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-09-17T18:54:08.990

测试。

使用动态语言测试 C#/Java 应用程序通常更快更容易。您可以在交互式提示下进行探索性测试，并快速创建自动化测试脚本。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2008-09-17T19:33:17.727

其他人已经解释了为什么学习更多的语言会让你成为更好的程序员。

至于说服你的老板这是值得的，这可能只是你公司的文化。有些地方将职业和技能进步作为一项政策（向上或退出），有些地方重视它，但将其留给员工的主动性，有些地方非常关注底线。

如果你必须向你的老板解释为什么学习一门语言是一件好事，我的建议是只在必要时继续工作，然后回家自己学习新事物。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2008-09-17T20:17:17.497

对于下班后的工作，对于自由职业...... :) 并最终尽可能地有编程知识......

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2008-09-18T04:25:52.440

动态语言是一种不同的思考方式，有时您从动态或函数式语言中学习的实践可以转移到更静态类型的语言，但是如果您从不花时间学习不同的语言，您将永远无法从拥有知道编码时的思考方式。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2008-09-22T13:29:51.887

不要打扰你的雇主，花 40 美元买一本书，下载一些软件，每天花一些时间阅读/做练习。很快你就会接受培训:)

# linux - 在 Linux 上的 gdb 中加载核心文件时，如何在目录前面添加库路径

> ID：84341
> 
> 赞同：28
> 
> 时间：2008-09-17T15:16:39.840
> 
> 标签：linux, path, gdb, coredump

我在无法直接访问的远程系统上生成了一个核心文件。我还有来自远程系统的库文件的本地副本，以及崩溃程序的可执行文件。

我想在 gdb 中分析这个核心转储。

例如：

```
gdb path/to/executable path/to/corefile 
```

我的库在当前目录中。

在过去，我看到调试器通过提供选项“-p”来实现这一点。或“-p /=。”；所以我的问题是：

在 gdb 中分析核心文件时，如何指定首先从相对于当前目录的路径加载库？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-09-17T15:32:51.207

在不指定可执行文件或核心文件的情况下启动 gdb，然后键入以下命令：

```
set solib-absolute-prefix ./usr
file path/to/executable
core-file path/to/corefile 
```

您需要确保完全从目标系统镜像您的库路径。以上内容用于调试与您的主机不匹配的目标，这就是为什么复制包含库的根文件系统结构很重要的原因。

如果您正在远程调试与您的主机具有相同架构和 Linux/glibc 版本的服务器，那么您可以按照[fd](https://stackoverflow.com/users/13956/fd)的建议进行操作：

```
set solib-search-path <path> 
```

如果您尝试覆盖某些库，但不是全部，则可以将目标库目录结构复制到临时位置并使用上述`solib-absolute-prefix`解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T15:56:45.750

我不确定这在 gdb 中是否可行，但我不是专家。

不过我可以评论*Linux*动态链接器。以下应打印所有已解析共享库和未解析共享库的路径。

```
ldd path/to/executable 
```

我们需要知道您的共享库是如何与您的可执行文件链接的。为此，请使用以下命令：

```
readelf -d path/to/executable | grep RPATH 
```

*   如果命令不打印任何内容，动态链接器将使用标准位置加上 LD_LIBRARY_PATH 环境变量来查找共享库。

*   如果该命令打印了一些行，则动态链接器将忽略 LD_LIBRARY_PATH 并使用硬编码的 rpaths。

    如果列出的 rpath 是绝对路径，我知道的唯一解决方案是将您的库复制（或符号链接）到列出的位置。

    如果列出的 rpath 是相对的，它们将包含一个 $ORIGIN，它将在运行时被可执行文件的路径替换。移动可执行文件或库以匹配。

有关更多信息，您可以从以下内容开始：

```
man ld.so 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T15:48:36.240

[我在developer.apple.com](http://developer.apple.com/documentation/DeveloperTools/gdb/gdb/gdb_16.html)上找到了这段摘录

> ```
> set solib-search-path path 
> ```
> 
> 如果设置了此变量，则 path 是以冒号分隔的目录列表，用于搜索共享库。 `solib-search-path' is used after` solib-absolute-prefix' 找不到库，或者库的路径是相对的而不是绝对的。如果你想使用 `solib-search-path' instead of` solib-absolute-prefix'，请确保将 `solib-absolute-prefix' 设置为一个不存在的目录，以防止 GDB 找到你主机的库。

**编辑：**

我不认为使用上述设置会预先添加我添加的目录，但它似乎确实会附加它们，因此我当前系统中丢失的文件会在我添加的路径中被拾取。我猜想将 solib-absolute-prefix 设置为虚假的内容并按照我需要的顺序在 solib-search-path 中添加目录可能是一个完整的解决方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T15:09:11.877

您也可以在调用 gdb 时将 LD_PRELOAD 设置为每个库或将 LD_LIBRARY_PATH 设置为当前目录。如果 gdb 本身尝试使用您预加载的任何库，这只会导致问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-07-20T18:30:21.110

一个重要的注意事项：

如果您正在进行交叉编译并尝试使用 gdb 进行调试，那么在您完成之后，
`file ECECUTABLE_NAME`如果您看到 smth。像 ：

```
Using host libthread_db library "/lib/libthread_db.so.1" 
```

然后检查您的目标系统是否有 libthread_db。我在网上发现了很多类似的问题。仅使用“set solib-”无法解决此类问题，您还必须使用交叉编译器构建 libthread_db。

# mysql - 根据其内容的长度在 MySQL 列上创建索引？

> ID：84346
> 
> 赞同：2
> 
> 时间：2008-09-17T15:17:11.760
> 
> 标签：mysql, indexing, myisam

如何根据其值的长度在 MySQL v 5.0（myisam db 引擎）中的列上创建索引，它的 TEXT 数据类型最多 7000 个字符，我是否必须添加具有第一列长度的另一列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T15:29:38.547

是的，因为 MySQL 不支持基于函数的索引（例如`ADD INDEX myIndex(LENGTH(text)))`，您需要一个新的 int 列并定义一个[触发器](http://dev.mysql.com/doc/refman/5.1/en/create-trigger.html)以在插入和更新后自动更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T15:21:30.530

听起来对我来说是个好方法（抱歉不知道mysql，但是在oracle中你可以设置一个触发器，这样当你的主列更新时，“长度”列会自动更新）

# css - div的类与id

> ID：84378
> 
> 赞同：51
> 
> 时间：2008-09-17T15:20:03.873
> 
> 标签：css, class, xhtml

什么`divs`时候最好使用`class`vs `id`？

最好使用`class`, 说字体变体或 html 中的元素？然后`id`用于结构/容器？

这是我一直有点不确定的事情，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2008-09-17T15:23:19.810

用于`id`标识页面上只有一个实例的元素。例如，如果您将单个导航栏放置在特定位置，请使用`id="navigation"`.

用于`class`对所有行为都以某种方式的元素进行分组。例如，如果您希望您的公司名称在正文中以粗体显示，您可以使用`<span class='company'>`.

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2008-09-17T15:24:23.037

要理解的最重要的事情是 ID 必须是唯一的：页面中只能存在一个具有给定 ID 的元素。因此，如果您想引用特定的页面元素，这通常是最好的选择。

如果你有多个元素在某种程度上相似，你应该使用元素类来识别它们。

一个非常有用但鲜为人知的事实是，您实际上可以通过在类名之间放置空格来将多个类应用于单个元素。因此，如果您发布了由当前登录用户编写的问题，您可以使用*<div class="question currentAuthor">*来识别它。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2009-02-14T01:47:42.260

### 想想大学。

```
<student id="JonathanSampson" class="Biology" />
<student id="MarySmith" class="Biology" /> 
```

学生**证**是不同的。校园里没有两个学生会拥有同一张学生**证**。但是，许多学生可以并且将彼此共享至少一个**班级**。

可以将多个学生放在一个**班级**名称下，即生物 101。但是将多个学生放在一个学生**ID**下是绝对不能接受的。

在学校对讲系统上给出规则时，您可以将**规则****分配**给**班级**：

> “明天生物课可以穿红衫吗？”

```
.BiologyClass {
  shirt-color:red;
} 
```

或者，您可以通过调用特定学生的唯一**ID**来为特定学生提供规则：

> “请乔纳森·桑普森明天穿一件绿衬衫好吗？”

```
#JonathanSampson {
  shirt-color:green;
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2008-09-17T15:23:04.397

ID 必须是唯一的，但在 CSS 中，它们在确定要遵循的两个冲突指令中的哪一个时也具有优先权。

```
<div id="section" class="section">Text</div> 
```

```
#section {font-color:#fff}
.section {font-color:#000} 
```

文本将是白色的。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-17T15:41:04.510

使用 ID 的另一个好处是能够在锚标记中定位它：

```
<h2 id="CurrentSale">Product I'm selling</h2> 
```

将允许您在其他地方直接链接到页面上的该位置：

```
<a href="#CurrentSale">the Current Sale</a> 
```

这样做的一个常见用途是为博客上的每个标题提供一个带日期戳的 ID（比如 id="date20080408"），这将允许您专门针对博客页面的该部分。

同样重要的是要记住，id 的命名规则更受限制，主要是它们不能以数字开头。请参阅类似的 SO 问题：[What is a valid value for id attributes in html](https://stackoverflow.com/questions/70579/what-is-a-valid-value-for-id-attributes-in-html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-17T15:22:06.303

当您想将相似的样式应用于许多不同的 div 或元素时，类非常有用。当您想要处理用于格式化或使用 javascript 更新的特定元素时，id 非常有用。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-17T15:25:38.027

HTML 标准本身回答了您的问题：

没有两个对象可能具有相同的 ID，但任意数量的对象可能具有相同的类。

因此，如果您只想将某些 CSS 样式属性应用于单个 DIV，那将是一个 ID。如果您希望某些样式属性应用于多个 DIV，那必须是一个类。

请注意，您可以将两者混合使用。您可以让两个 DIV 属于同一个类，但给它们不同的 ID。然后，您可以将两者通用的样式应用于类，并将特定于任何一个的事物应用于它们的 ID。浏览器将首先应用类样式，然后是 ID 样式，因此 ID 样式可以覆盖类之前设置的任何内容。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-17T15:30:52.270

其他一些需要记住的事情：

*   使用 ASP.Net 时，您无法完全控制元素的 ID，因此您几乎必须使用类（请注意，这不像以前那样正确）。
*   最好*两者都不*使用，当您可以提供帮助时。相反，指定*元素类型*及*其父类型*。例如，包含在 div 中的具有 navarea 类的无序列表可以通过以下方式单独列出：

    ```
    div.NavArea ul { /* styles go here */ } 
    ```

现在，您可以使用一个类应用程序为整个 navarea 的大部分设置*逻辑划分样式。*

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-17T15:22:20.357

ID 应该是唯一的。类应该是共享的。因此，如果您有一些将应用于多个 DIV 的 CSS 格式，请使用一个类。如果只有一个（作为要求，而不是偶然），请使用 ID。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-17T19:21:33.760

我想我们都知道类是什么，但如果你将 ID 视为标识符而不是样式工具，那么你就不会大错特错。尝试定位某物时需要一个标识符，如果您有多个具有相同 ID 的项目，则无法再识别它...

在为 ID 和 CLASS 编写 css 时，尽可能使用最少的 css 类是有益的，并且在你必须这样做之前尽量不要让 ID 变得太重，否则你将一直致力于编写更强大的声明和很快就会有一个充满 !important 的 css 文件。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-04-05T20:20:32.683

## 在哪里使用 ID 与类

两者之间的简单区别在于，虽然一个类可以在一个页面上重复使用，但一个 ID 每页只能使用一次。因此，在标记页面主要内容的 div 元素上使用 ID 是合适的，因为只有一个主要内容部分。相反，您必须使用一个类来设置表格上的交替行颜色，因为根据定义它们将被多次使用。

ID 是一个非常强大的工具。具有 ID 的元素可以是一段 JavaScript 的目标，该 JavaScript 以某种方式操纵该元素或其内容。ID 属性可以用作内部链接的目标，将锚标记替换为名称属性。最后，如果您使您的 ID 清晰且合乎逻辑，它们可以作为文档中的一种“自我文档”。例如，如果块的开始标签的 ID 为“main”、“header”、“footer”，则不必在块之前添加注释说明代码块将包含主要内容“， ETC。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-17T15:22:49.763

如果它是您想在页面的多个位置使用的样式，请使用类。如果您想要对单个对象进行大量自定义，例如页面一侧的导航栏，那么 id 是最好的，因为您不太可能在其他任何地方需要这种样式组合。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-17T15:23:14.270

id 应该是页面上的元素唯一标识符，这有助于对其进行操作。任何应该在多个元素中使用的外部 CSS 定义的样式都应该使用 class 属性

```
<div class="code-formatting-style-name" id="myfirstDivForCode">
</div> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-17T15:23:15.970

将 id 用于页面上您想要做一些非常具体的事情的唯一元素，并为您可以在页面的其他部分重用的东西使用类。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-17T15:23:25.083

*id*属性用于元素在文档中唯一标识它们，而class*属性*可以具有由同一文档中的许多元素共享的相同值。

所以，真的，如果每个文档只有一个元素将使用该样式（例如，#title），那么使用*id*。如果多个元素可以使用该样式，请使用*class*。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-17T15:23:43.600

我会说，每当您认为样式元素将在页面上重复时，最好使用一个类。像 HeaderImage、FooterBar 之类的项目很适合作为 ID，因为您只会使用它一次，并且它有助于防止您意外复制它，因为当您有重复的 ID 时，一些编辑器会提醒您。

如果您要动态生成 div 元素并希望针对特定项目进行格式化，我也可以看到它很有帮助；您可以在生成时为其提供正确的 ID，而不是搜索元素然后更新其类。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-17T15:26:46.150

类用于您可以在页面上多次使用的样式，ID 是定义元素特殊情况的唯一标识符。标准规定，ID 只能在页面中使用一次。因此，当您想在页面中的多个元素上使用样式时，您应该使用类，而当您只想使用一次时，您应该使用 ID。

另一件事是，对于类，您可以使用多个值（通过在每个类之间放置空格，a la "class='blagh blah22 blah'）而带有 ID，您只能在每个元素的 ID 上使用。

为 ID 定义的样式会覆盖为类定义的样式，因此在 中，#uniquething 的样式设置将覆盖 .whatever 的样式，如果两者发生冲突。

因此，您可能应该将 ID 用于诸如标题、“侧边栏”之类的东西，等等——每页只出现一次的东西。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-17T15:27:05.790

我的选择是在以相同方式将 css 样式应用于多个 div 时使用类标识。如果结构或容器真的只应用一次，或者可以从默认继承其样式，我认为没有理由使用类标识。

所以这取决于你的 div 是否是几个之一；例如，一个 div 表示对 stackoverflow 网站上答案的问题。在这里，您需要为“Answer”类定义样式并将其应用于每个“Answer”div。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-17T15:29:15.113

如果您使用的是 .Net Web 控件，那么有时仅使用类会容易得多，因为 .Net 在运行时会更改 Web 控件 div id（它们使用 runat="server"）。

使用类可以让您轻松地使用单独的字体、间距、边框等类来构建样式。我通常使用多个文件来存储不同类型的格式信息，例如 basic_styles.css 用于简单的站点范围格式设置，ie6_styles.css 用于浏览器特定样式（在本例中为 IE6）等和 template_1.css 用于布局信息。

无论您选择哪种方式，都尽量保持一致以帮助维护。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-17T15:29:50.153

同样，可以通过 JavaScript 和 DOM 命令（例如 GetElementById）来操作您提供特定 id 的元素。

总的来说，我发现给所有主要的结构 div 一个 id 是很有用的——即使最初我没有任何特定的 CSS 规则可以应用，但我将来也有这种能力。另一方面，我为那些可以多次使用的元素使用类——例如，一个包含图像和标题的 div——我可能有几个类，每个类的样式值略有不同。

但请记住，在所有条件相同的情况下，id 规范中的样式规则优先于类规范中的样式规则。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-17T15:39:00.537

除了 id 和 classes 非常适合在单个项目上设置样式与一组类似的项目，还有另一个需要记住的警告。这在某种程度上也取决于语言。在 ASP.Net 中，您可以输入 Div 并拥有 id。但是，如果您使用 Panel 而不是 Div，您将丢失 id。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2012-12-04T14:17:02.437

**对我来说：**如果在我将在 CSS 中做某事或为元素添加名称并可以在页面中的所有元素中使用时使用类。

所以我用于唯一元素的 ID

**前任 ：**

```
<div id="post-289" class="box clear black bold radius"> 
```

**CSS：**

```
.clear {clear:both;}
.black {color:black;}
.bold {font-weight:bold;}
.radius {border-radius:2px;} 
```

# visual-studio - 从普通命令行使用 Visual Studio 的“cl”

> ID：84404
> 
> 赞同：42
> 
> 时间：2008-09-17T15:22:38.813
> 
> 标签：visual-studio, command-line

Visual Studio 2003 和 2005（据我所知可能是 2008）需要命令行用户在“Visual Studio 命令提示符”中运行。启动此命令提示符时，它会设置 C++ 编译器 cl 在编译时使用的各种环境变量。

这并不总是可取的。例如，如果我想从 Ant 中运行“cl”，我想避免必须从“Visual Studio 命令提示符”中运行 Ant。运行 vcvars32.bat 不是一个选项，因为 vcvars32.bat 设置的环境会在运行 cl 时丢失（如果从 Ant 中运行）。

有没有一种简单的方法来运行 cl 而不必从 Visual Studio 命令提示符中运行？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-09-17T15:29:16.503

编译器可以像任何其他编译器一样从命令行（或 makefile）使用。您需要注意的主要事项是 INCLUDE 和 LIB 环境变量以及 PATH。如果你从 cmd.exe 运行，你可以运行这个 .bat 来设置环境：

> C:\Program Files\Microsoft Visual Studio 9.0\VC\vcvarsall.bat

如果您尝试使用 makefile、Cygwin、MinGW 或类似的编译器，则需要手动设置环境变量。假设编译器安装在默认位置，这应该适用于 Visual Studio 2008 编译器和最新的 Windows SDK：

添加到路径：

*   C:\Program Files\Microsoft SDKs\Windows\v6.1\Bin
*   C:\Program Files\Microsoft Visual Studio 9.0\VC\Bin
*   C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE

添加到包括：

*   C:\Program Files\Microsoft SDKs\Windows\v6.1\Include
*   C:\Program Files\Microsoft Visual Studio 9.0\VC\include
*   C:\Program Files\Microsoft Visual Studio 9.0\VC\atlmfc\include

添加到 LIB：

*   C:\Program Files\Microsoft SDKs\Windows\v6.1\Lib
*   C:\Program Files\Microsoft Visual Studio 9.0\VC\lib

这些是最低限度的，但对于基本的事情应该足够了。研究 vcvarsall.bat 脚本，看看您还想设置什么。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-17T20:04:38.073

创建您自己的批处理文件（例如 clenv.bat），然后调用它而不是 cl：

```
@echo off
:: Load compilation environment
call "C:\Program Files\Microsoft Visual Studio 9.0\VC\vcvarsall.bat"
:: Invoke compiler with any options passed to this batch file
"C:\Program Files\Microsoft Visual Studio 9.0\VC\bin\cl.exe" %* 
```

现在可以像 cl.exe 一样调用 clenv.bat，但它会首先加载所需的环境变量。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-17T15:24:06.953

您可以简单地运行自己设置变量的批处理文件。在 VS08 中，它位于：-

```
C:\Program Files\Microsoft Visual Studio 9.0\VC\vcvarsall.bat 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2021-01-20T15:10:49.220

对于硬设置的全局环境系统变量 - 添加到**Path**并创建**Include, LIB**。

并更改以更正您的 MSVC、Windows SDK 和 x86 或 x64 版本。

要检查您需要的变量 - 只需从 Windows 开始菜单运行 - **x64 Native Tools Command Prompt for VS 2019**，然后键入“set path”或“set lib”或“set include”。

例如，这是我从 cmd 编译的环境。

### 小路

*   C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.24.28314\bin\HostX64\x64

### 包括

*   C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.24.28314\ATLMFC\include
*   C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.24.28314\include
*   C:\Program Files (x86)\Windows Kits\10\include\10.0.18362.0\ucrt
*   C:\Program Files (x86)\Windows Kits\10\include\10.0.18362.0\shared
*   C:\Program Files (x86)\Windows Kits\10\include\10.0.18362.0\um
*   C:\Program Files (x86)\Windows Kits\10\include\10.0.18362.0\winrt
*   C:\Program Files (x86)\Windows Kits\10\include\10.0.18362.0\cppwinrt

### 锂电池

*   C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.24.28314\ATLMFC\lib\x64
*   C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\VC\Tools\MSVC\14.24.28314\lib\x64
*   C:\Program Files (x86)\Windows Kits\10\lib\10.0.18362.0\ucrt\x64
*   C:\Program Files (x86)\Windows Kits\10\lib\10.0.18362.0\um\x64

[![在此处输入图像描述](https://i.stack.imgur.com/EWLoz.png)](https://i.stack.imgur.com/EWLoz.png)

[![在此处输入图像描述](https://i.stack.imgur.com/Tb5gw.png)](https://i.stack.imgur.com/Tb5gw.png)

[![在此处输入图像描述](https://i.stack.imgur.com/NN7Z9.png)](https://i.stack.imgur.com/NN7Z9.png)

您还可以设置**CL /MD**变量以使用动态链接运行时库生成代码，以减少可执行文件的大小 - 因为在默认 /MT 上 - 使用静态链接发布。也可以从 cmd 灵活使用和覆盖选项，但会显示一些有关更改选项的警告消息。 [https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/3600tzxa(v=vs.100)](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/3600tzxa(v=vs.100))

[https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/kezkeayy(v=vs.100)](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/kezkeayy(v=vs.100))

[![在此处输入图像描述](https://i.stack.imgur.com/vEkM6.png)](https://i.stack.imgur.com/vEkM6.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-17T17:36:56.663

vcvars32 或 vsvars32 批处理文件所做的不是火箭科学。他们只需将 PATH、INCLUDE、LIB 以及可能的 LIBPATH 环境变量设置为特定编译器版本的合理默认值。

您所要做的就是确保为您的 Ant 或 makefile 正确设置了这些内容（在调用它们之前或在它们中）。

对于 INCLUDE 和 LIB/LIBPATH，在环境变量中设置这些项目的替代方法是将这些设置作为显式参数传递给命令行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T15:56:42.863

由 Visual Studio 命令提示符运行的 vcvarsall.bat 批处理文件只是试图保持您的系统环境变量和路径干净整洁（如果您有多个版本的 Visual Studio，这很重要）。

如果您乐于将您的设置限制为一个版本并且拥有较长的路径和一组环境变量，请将这些设置（手动）传输到系统环境变量（我的电脑|属性 --- 或 Win-Pause/Break）。

我建议不要这样做！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-07-13T18:55:44.397

诀窍是始终使用正确的 vcvars 批处理文件。如果您只安装了一个版本的 VisualStudio，那不是什么大问题。如果您像我一样处理多个版本，那么在使用 MSVC++ 15 vcvars 文件设置的控制台中运行 MSVC++ 14 构建变得非常容易。它可能有效，也可能无效，但无论您得到什么，都将不同于您在 VisualStudio 中构建的内容。

我们已经在 terp 中通过从所选编译器派生正确的 vcvars 文件并始终在内部为工具调用设置环境来处理[该](http://codemesh.com/products/terp/)问题。这样，您始终拥有适合您正在使用的编译器的 vcvars 文件。

重申一下：我强烈建议不要尝试手动复制 vcvars 文件为您所做的事情。你一定会错过一些东西，或者让它看起来恰到好处，看起来它正在工作，而实际上做的事情与你想要的略有不同。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-15T15:27:09.347

[我在visual-studio-2010](/questions/tagged/visual-studio-2010 "显示标记为“visual-studio-2010”的问题")中为 Visual Studio 命令提示符打开 Visual Studio 命令行的版本。在内部用于构建库/项目，然后对生成的 DLL 文件执行一些额外的步骤。

将这些行复制到您的`Compile and execute other steps.cmd`文件或类似文件中。

```
@echo off

REM Load Visual Studio's build tools
call "%ProgramFiles(x86)%\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86

REM Choose what you want to do, 1 or 2 by (un)commenting

REM     1\. Add your cl.exe (or msbuild.exe or other) commands here
REM msbuild.exe MyProject.csproj
REM cl.exe
REM custom-step.exe  %*
REM pause

REM     2\. Open a normal interactive system command shell with all variables loaded
%comspec% /k 
```

在这个版本的脚本中，我之后“停留”在交互式命令行模式。注释以`REM %comspec% /k`仅将脚本用于非交互目的。

# asp.net-mvc - 如何覆盖 HTML 辅助方法用于模型属性的字符串表示形式？

> ID：84418
> 
> 赞同：2
> 
> 时间：2008-09-17T15:23:23.087
> 
> 标签：asp.net-mvc

html 帮助器方法检查 ViewDataDictionary 的值。该值可以作为属性在字典中或模型中。为了提取值，名为 ViewDataEvaluator 的内部密封类使用 PropertyDescriptor 来获取值。然后，调用 Convert.ToString() 将返回的对象转换为字符串。

### 控制器操作中的所需代码

控制器操作应该只填充模型，而不是格式化它（格式化模型是全局的）。

### 视图中的所需代码

视图可以渲染一个 HTML 文本框并使用这行代码提取属性的字符串表示形式：

```
<%=Html.TextBox(“日期”) %>
<%=Html.TextBox(“时间”) %>
<%=Html.TextBox(“单价”) %>

```

### 将模型的属性绑定到 HtmlHelper.TextBox()

对于文本框的值，模型实例中的 UnitPrice 属性值将转换为字符串。我需要通过自己转换为字符串来覆盖此行为，该字符串是按属性而不是按类型的。例如，对于 UnitPrice ，我需要一个**小数**的不同字符串表示形式，而对于 UnitQuantity ，我需要另一个**小数点的字符串表示形式。**

例如，我需要根据市场来格式化 UnitPrice 的小数精度。

```
string decimalPlaces = ViewData.Model.Precision.ToString ();
<%=Html.TextBox(“UnitPrice”, ViewData.Model.TypeName.UnitPrice.ToString("N" + decimalPlaces)) %>

```

### 2路数据绑定请

就像 IModelBinder 是模型的每个属性的*解析*一样，我需要每个属性的*格式*，有点像 Windows 窗体[绑定](http://msdn.microsoft.com/en-us/library/system.windows.forms.binding_events.aspx)，但基于模型而不是控件。这将使模型能够往返并具有正确的格式。我更喜欢可以覆盖默认格式的设计。此外，我的模型在一个单独的程序集中，因此指定格式化程序的属性属性不是一个选项。

请注意，我需要模型的**属性特定**格式，而不是**类型特定**格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T15:41:00.610

没有办法用助手自己指定格式。你采取的方法会奏效。另一种方法是将预先格式化的值添加到`ModelState`.

**编辑**：您确定要使用货币格式化文本输入吗？例如，您将在输入中看到的是：

```
<input type="text" name="UnitPrice" value="$1.23" /> 
```

当您将其发布回服务器时，我们将无法理解。相反，我将货币符号*放在*文本输入之外。例如：

```
$<%= Html.TextBox("UnitPrice") %> 
```

我确信有一种简单的方法可以渲染“$”而无需对其进行硬编码，因此它是可本地化的，但我不知道它是什么。

**再次编辑** 我团队开发人员的评论：

> 好吧，公平地说，这还不错。通常，当您格式化数字或日期时，它仍然可以理解。例如，将数字（如邮政编码）填充到 5 位，将小数填充到百分之一，将日期格式化为 yyyy-mm-dd，等会进来就好了。添加额外的字符（如货币符号）会中断，但通常输入字段无论如何都不会采用或显示货币符号——这是隐含的。

# ruby - 在 Ruby 中将整数转换为十六进制字符串

> ID：84421
> 
> 赞同：212
> 
> 时间：2008-09-17T15:23:26.360
> 
> 标签：ruby, hex, base-conversion

是否有一种内置方法可以将 Ruby 中的整数转换为等效的十六进制？

类似于相反的东西[`String#to_i`](http://ruby-doc.org/core-2.0.0/String.html#method-i-to_i)：

```
"0A".to_i(16) #=>10 
```

可能像：

```
"0A".hex #=>10 
```

我知道如何自己动手，但使用内置的 Ruby 函数可能更有效。

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2008-09-17T15:27:57.317

您可以给出[`to_s`](http://www.ruby-doc.org/core/classes/Integer.html#method-i-to_s)10 以外的基数：

```
10.to_s(16)  #=> "a" 
```

请注意，在 ruby​​ 2.4中`FixNum`并`BigNum`在`Integer`类中进行了统一。如果您使用的是较旧的 ruby​​，请查看[FixNum#`to_s`](https://ruby-doc.org/core-2.3.8/Fixnum.html#method-i-to_s)和 [BigNum#的文档`to_s`](https://ruby-doc.org/core-2.3.8/Bignum.html#method-i-to_s)

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2008-09-17T15:25:57.633

如何使用[`%`](http://ruby-doc.org/core-2.0.0/String.html#method-i-25)/ [`sprintf`](http://ruby-doc.org/core-2.0.0/Kernel.html#method-i-sprintf)：

```
i = 20
"%x" % i  #=> "14" 
```

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2011-10-24T22:54:59.510

总结一下：

```
p 10.to_s(16) #=> "a"
p "%x" % 10 #=> "a"
p "%02X" % 10 #=> "0A"
p sprintf("%02X", 10) #=> "0A"
p "#%02X%02X%02X" % [255, 0, 10] #=> "#FF000A" 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2011-03-29T15:27:51.060

这是另一种方法：

```
sprintf("%02x", 10).upcase 
```

请参阅`sprintf`此处的文档：[http ://www.ruby-doc.org/core/classes/Kernel.html#method-i-sprintf](http://www.ruby-doc.org/core/classes/Kernel.html#method-i-sprintf)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-04-24T10:49:05.540

以防万一您偏爱负数的格式：

```
p "%x" % -1   #=> "..f"
p -1.to_s(16) #=> "-1" 
```

# xslt - 性能：调用模板与应用模板

> ID：84422
> 
> 赞同：33
> 
> 时间：2008-09-17T15:23:30.370
> 
> 标签：xslt

在 XSLT 处理中，apply-template 和 call-template 之间是否存在性能差异？在我的样式表中，我可以使用许多实例，哪个是最佳选择？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-09-17T17:16:08.320

与所有性能问题一样，答案将取决于您的特定配置（特别是您使用的 XSLT 处理器）和您正在执行的处理类型。

`<xsl:apply-templates>`获取一系列节点并一个接一个地遍历它们。对于每一个，它找到与节点匹配的具有最高优先级的模板，并调用它。所以`<xsl:apply-templates>`就像一个`<xsl:for-each>`有`<xsl:choose>`内部但更模块化的东西。

相反，`<xsl:call-template>`按名称调用模板。上下文节点（no `<xsl:for-each>`）没有变化，也没有选择使用哪个模板。

因此，在完全相同的情况下，您可能会想象这`<xsl:call-template>`会更快，因为它做的工作更少。但是，如果您处于使用其中之一`<xsl:apply-templates>`或`<xsl:call-template>`可以使用的情况，那么您可能会在 XSLT`<xsl:for-each>`中`<xsl:choose>`自己做这件事，而不是处理器在幕后为您做这件事。所以最后我猜它可能会平衡。但正如我所说，这在很大程度上取决于您的处理器已实施的优化类型以及您正在执行的处理。测量一下看看。

关于何时使用匹配模板以及何时使用命名模板，我的经验法则是：

*   `<xsl:apply-templates>`如果您正在处理单个节点以创建结果，请使用和匹配模板；如果需要以多种不同方式处理特定节点（例如在目录与文档正文中），则使用模式
*   `<xsl:call-template>`如果您要处理的不是单个节点，例如字符串、数字或节点集，请使用和命名模板
*   （在 XSLT 2.0 中）`<xsl:function>`在返回原子值或现有节点时使用

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-17T15:37:23.520

apply-template 和 call-template 不执行相同的任务，性能比较在这里并不重要。call-template 采用模板名称作为参数，而 apply-template 采用 xpath 表达式。Apply-template 因此功能更强大，因为您并不真正知道将执行哪个模板。如果您使用复杂的 xpath 表达式，您将遇到性能问题。避免在 xpath 表达式中使用“//”，因为将评估输入文档的每个节点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-17T15:47:58.597

它可能取决于您使用的 xml 解析器。除了 .NET 2003 解析器，我什么都不能说，我在其中对[推送和拉取](http://www.dpawson.co.uk/xsl/sect2/pushpull.html)XSLT 代码进行了一些非正式的性能测试。这与您要问的类似：apply-template = push 和 call-template = pull。我确信 push 会更快，但事实并非如此。差不多了。

对不起，我现在没有确切的测试。我建议使用您选择的解析器进行尝试，看看是否有任何重大差异。我敢打赌不会有。

# c++ - 通过引用函数来传递新构造的对象是否合法？

> ID：84427
> 
> 赞同：16
> 
> 时间：2008-09-17T15:23:57.250
> 
> 标签：c++

具体来说，以下是合法的 C++ 吗？

```
A类{}；

无效 foo(A*);
空栏（常量 A&）；

诠释主要（无效）
{
    富(&A()); // 1
    酒吧（A（））；// 2
}
```

它似乎可以正常工作，但这并不意味着它一定是合法的。是吗？

*编辑 - 更改`A&`为`const A&`*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-17T15:34:34.540

1：不允许取临时地址。Visual C++ 允许它作为语言扩展（语言扩展默认是打开的）。

2：这是完全合法的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-17T15:30:52.473

不，将非常量引用传递给临时对象是违反标准的。您可以使用 const 参考：

```
class A{};

void bar(const A&);

int main(void)
{
    bar(A());  // 2
} 
```

因此，虽然一些编译器会接受它，并且只要不使用分号后的内存它就可以工作，但符合标准的编译器不会接受它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-18T00:58:12.657

*foo*在完全符合标准的 C++ 中是不允许的，而*bar*是可以的。尽管有可能，*foo*会在编译时出现警告，而*bar*也可能会在编译时出现警告，也可能不会。

*A()*创建一个临时对象，除非绑定到引用（如*bar*中的情况）或用于初始化命名对象，否则该对象在创建它的完整表达式的末尾被销毁。为保存引用初始值设定项而创建的临时对象将持续存在，直到其引用范围结束。对于*bar*的情况，这就是函数调用，因此您可以完全安全地使用*A* inside *bar 。*禁止将临时对象（右值）绑定到非常量引用。同样禁止获取右值的地址（作为参数传递以初始化*A*为*foo*）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-07-20T08:00:51.370

简短的回答是肯定的。

如果该对象被函数作为 const 引用参数接收 - 因为您已经修改`bar(const A&)`了方法，那么它是完全合法的。函数可以对对象进行操作，但是函数调用后对象会被破坏（可以取临时地址，但不能在函数调用后存储和使用——原因见下文）。

也是合法的`foo(A*)`，因为临时对象在完全表达式结束时被销毁。然而，大多数编译器都会发出关于获取临时地址的警告。

原始版本`bar(A&)`不能编译，从临时初始化非常量引用是违反标准的。

> **C++ 标准第 12.2 章**
> 
> 3 [...] 临时对象作为评估完整表达式 (1.9) 的最后一步被销毁，该完整表达式 (从词法上) 包含它们被创建的点。[...]
> 
> 4 有两种情况，其中临时对象在与完整表达式结尾不同的点被销毁。第一个上下文是当表达式作为定义对象的声明符的初始值设定项出现时。在这种情况下，保存表达式结果的临时变量将持续存在，直到对象的初始化完成。[...]
> 
> 5 第二个上下文是引用绑定到临时的。引用绑定到的临时对象或作为临时对象绑定的子对象的完整对象的临时对象将在引用的生命周期内持续存在，除非下面指定。临时绑定到构造函数的ctorinitializer (12.6.2) 中的引用成员将持续存在，直到构造函数退出。临时绑定到函数调用 (5.2.2) 中的引用参数将一直持续到包含调用的完整表达式完成为止。在函数返回语句 (6.6.3) 中对返回值的临时绑定将持续存在，直到函数退出。

**完整**表达式是不是另一个表达式的子表达式的表达式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T15:26:59.003

那些 A 对象将只存在直到执行到达分号。因此，调用是安全的，但不要尝试保存指针并在以后使用它。此外，编译器可能要求 bar 采用 const 引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T15:26:43.733

看起来它可以工作，但它没有使用带有 Wall 选项的 g++ 编译，这是我得到的：

```
michael@hardy-lenovo:~/Desktop$ g++ -Wall a.cpp
a.cpp：在函数'int main()'中：michael@hardy-lenovo:~/Desktop$ g++ -Wall a.cpp
a.cpp：在函数“int main()”中：
a.cpp:8：警告：获取临时地址
a.cpp:9：错误：从“A”类型的临时变量中“A&”类型的非常量引用无效初始化
a.cpp:4: 错误：在传递 'void bar(A&)' 的参数 1
michael@hardy-lenovo:~/Desktop$

```

看起来您将需要使用常量引用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-17T15:29:09.157

这是合法的。我们有时会使用它来提供我们可能想要忽略的默认值。

```
int dosomething(error_code& _e = ignore_errorcode()) {
    //do something
} 
```

`error_code`在上述情况下，如果没有传递给函数，它将构造一个空的错误代码对象。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-09-17T15:30:01.243

//2 你需要一个常量引用

for //1 我认为这是合法但没用的

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2008-09-17T15:26:00.113

完全合法。

该对象将在函数调用期间存在于堆栈中，就像任何其他局部变量一样。

# c# - XML 将布尔值序列化为 0 和 1

> ID：84449
> 
> 赞同：26
> 
> 时间：2008-09-17T15:25:35.590
> 
> 标签：c#, xml, serialization, schema, constraints

XML Schema Part 2 指定定义为 boolean 的数据类型的实例可以具有以下合法文字 {true, false, 1, 0}。例如，以下 XML 在反序列化时将布尔属性“Emulate”设置为`true`.

```
<root>
    <emulate>1</emulate>
</root> 
```

但是，当我将对象序列化回 XML 时，我得到`true`的不是数值。我的问题是，有没有一种方法可以控制 XML 中的布尔表示？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2008-09-17T17:11:13.933

您也可以通过使用一些 XmlSerializer 属性黑魔法来做到这一点：

```
[XmlIgnore]
public bool MyValue { get; set; }

/// <summary>Get a value purely for serialization purposes</summary>
[XmlElement("MyValue")]
public string MyValueSerialize
{
    get { return this.MyValue ? "1" : "0"; }
    set { this.MyValue = XmlConvert.ToBoolean(value); }
} 
```

如果您被它冒犯了，您还可以使用其他属性从智能感知中隐藏该成员！这不是一个完美的解决方案，但它可以比实现 IXmlSerializable 更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T15:31:20.493

您可以实现 IXmlSerializable，这将允许您根据需要更改类的序列化输出。这将需要创建 3 个方法 GetSchema()、ReadXml(XmlReader r) 和 WriteXml(XmlWriter r)。当您实现接口时，将调用这些方法而不是 .NET 尝试序列化对象本身。

示例可在以下位置找到：

[http://www.developerfusion.co.uk/show/4639/](http://www.developerfusion.co.uk/show/4639/)和

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:30:40.213

不，不使用默认的 System.Xml.XmlSerializer：您需要将数据类型更改为 int 来实现，或者提供您自己的序列化代码（可能，但不是很有趣）。

但是，您可以简单地对生成的 XML 进行后处理，当然，可以使用 XSLT 或简单地使用字符串替换。有点hack，但在开发时间和运行时间都非常快......

# sql - 跨应用程序重用 SQL 存储过程

> ID：84453
> 
> 赞同：2
> 
> 时间：2008-09-17T15:25:49.880
> 
> 标签：sql, architecture, stored-procedures, code-reuse

我很好奇人们在许多应用程序都可以访问的数据库中使用存储过程的方法。具体来说，您是否倾向于为每个应用程序保留不同的存储过程集，您尝试使用共享集，还是混合使用？

一方面，当发生模型更改或类似的事情时，SP 的重用允许更少的更改，并且理想情况下更少的维护。另一方面，如果应用程序的需求不同，对一个应用程序的存储过程的更改可能会破坏其他应用程序。我应该注意到，在我们的环境中，每个应用程序都有自己的开发团队，他们之间的沟通很差。数据团队虽然有更好的沟通，但主要负责编写存储过程。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T15:28:41.340

存储过程应基于您打算返回的数据而不是发出请求的应用程序创建。如果您有一个 GetAllItems 存储过程，它应该返回数据库中的所有项目。如果其中一个应用程序想要按类别获取所有项目，请创建 GetAllItemsByCategory。存储过程的业务规则没有理由根据请求数据的应用程序而改变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T15:30:27.997

我的经验是，让多个应用程序共享 SP 是一个痛苦的原因。事实上，我认为拥有一个由多个应用程序直接访问的数据库并不是最好的长期架构。

我推荐并实施的模式是只有一个应用程序应该“拥有”每个数据库，并为其他应用程序提供 API（服务等）来访问和修改数据。

这有几个优点：

1.  拥有的应用程序可以应用任何业务逻辑、日志记录等以确保其保持稳定
2.  如果架构发生更改，所有接口都是已知的并且可以进行测试以确保外部应用程序仍然可以工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T15:36:52.430

存储过程应该公开业务规则，这些规则不会根据使用它们的应用程序而改变。这使得规则可以被存储和更新一次，而不是在每个使用它们的地方，这是一场噩梦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T15:32:39.880

可以这样想：您的存储过程是关于它们下面的数据，而不应该真正了解它们上面的应用程序。一个应用程序可能需要以另一种方式不需要的方式读取或更新数据，因此一个应用程序会使用另一个不会使用的 SP。

如果它是我的应用程序/数据库等，并且为了改进一个应用程序而对 SP 进行的更改破坏了另一个应用程序，我会认为这是更深层次的设计问题的证据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T15:30:26.377

我相信你问题的最后一部分已经回答了自己。

由于沟通已经很差，开发团队之间的共享程序只会增加潜在的故障点，并可能导致任何一个团队都遇到困难。

如果我在同一个团队中处理多个项目，我们将节省一些时间并共享程序，但通常我发现一点重复（这里和那里的一些程序）有助于避免以后在应用程序时需要的灾难性更改/重复开始分歧。

LordScarlet 还指出了一个关键元素，如果它是通用的且没有业务逻辑共享，那应该不是问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T15:30:45.517

每当我们有多个应用程序通用的存储过程时，我们都会为这些过程（以及视图和表等）创建一个数据库。然后，该数据库（我们命名为“base”）将有一个开发人员（或团队）负责它（维护和测试）。

如果另一个团队需要新功能，他们可以编写它，基础开发人员要么在基础数据库中实现它，要么提出一种更简单的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T15:34:10.127

这完全取决于您的抽象策略。存储过程是否被视为一个离散的抽象点，或者它们只是被视为调用它们的应用程序的另一部分。

答案将告诉您如何管理它们。如果它们是离散的抽象，则可以共享它们，就好像您需要新功能一样，您将添加新过程。如果它们是调用它们的应用程序的一部分，则不应共享它们。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-17T15:38:33.017

我们尝试尽可能使用单个共享存储过程，但我们也遇到了您描述的情况。我们通过将应用程序前缀添加到存储过程 (ApplicationName_StoredProcName) 来处理它。

通常这些存储过程称为集中或“主”存储过程，但这种方法为应用程序特定的更改留出了空间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T15:31:06.950

我认为在多个应用程序之间共享 Sprocs 没有意义。

我可以看到在相关应用程序中共享数据库的情况，但大概这些应用程序在很大程度上是独立的，因为它们处理数据的方式彼此非常不同。

使用相同的架构可以跨应用程序工作，但想象一下尝试在多个应用程序中使用相同的业务逻辑层。“可是等等！” 你说，“这太傻了……如果我使用同一个 BLL，为什么我会有一个单独的应用程序？他们做同样的事情！”

QED。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T15:34:20.517

理想情况下使用一个过程而不是多个版本。如果您需要每个客户的版本，请研究每个客户 1 db 而不是所有客户 1 db 的想法。这也允许在不同的服务器上进行一些有趣的 db 分段（将较大/较重的使用分配给较大的服务器，而较小的可以共享硬件）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T15:36:31.697

如果您希望能够共享 SQL 代码，请尝试构建一个抽象函数库。这样，您可以重用一些执行通用操作的代码，并使每个应用程序的业务逻辑分开。视图也可以这样做——它们可以保持非常通用并且对许多应用程序有用。

随着您的学习，您可能会发现常用存储过程的用途并不多。

也就是说，我们曾经实施过一个项目，该项目正在使用一个设计非常糟糕的遗留数据库。我们已经实现了一组使信息检索变得容易的存储过程。当其他团队的其他人想要使用相同的信息时，我们重构了我们的存储过程以使其更通用，添加了额外的注释和文档层，并允许其他人使用我们的过程。该解决方案效果很好。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-17T15:41:18.003

许多存储过程是独立于应用程序的，但可能有一些是依赖于应用程序的。例如，CRUD（创建、选择、更新、删除）存储过程可以跨应用程序。特别是您可以投入审计逻辑（有时在触发器中完成，但在触发器中可以达到的复杂程度是有限度的）。如果您的软件商店中有某种类型的标准体系结构，则中间层可能需要一个存储过程来从数据库中创建/选择/更新/删除，而不管在哪种情况下共享该过程的应用程序。

同时可能有一些有用的查看数据的方法，例如 GetProductsSoldBySalesPerson 等。它们也将是独立于应用程序的。对于部门、地址等某些字段，您可能有一堆查找表，因此可能有一个过程来返回包含所有文本字段的表视图。即，程序返回一个视图SalesPersonName、SaleDate、CustomerName、DepartmentName、CustomerAddress，而不是SalesPersonID、SaleDate、CustomerID、DepartmentID、CustomerAddressID。这也可以跨应用程序使用。客户关系系统需要客户姓名/地址/其他属性，就像计费系统一样。因此，在一个查询中完成所有连接并获取所有客户信息的东西可能会跨应用程序使用。

所以基本上，从你的表中删除时，你需要从 3 个或 4 个其他表中删除以确保数据完整性。触发器的逻辑是否过于复杂？那么所有应用程序用来进行删除的存储过程可能很重要。对于需要在创作中完成的事情也是如此。如果有总是完成的公共连接，那么让一个存储过程来完成所有连接可能是有意义的。然后，如果稍后您更改周围的表格，您可以保持程序相同，只需更改那里的逻辑。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-17T16:26:38.300

跨多个应用程序共享数据模式的概念是一个艰难的概念。由于性能原因，您的架构总是会受到损害：非规范化，要创建哪些索引。如果您可以将行的大小减半，则可以将每页的行数加倍，并且很可能将扫描表格所需的时间减半。但是，如果您只在主表上包含“通用”功能，并且只在不同（但相关）表上保留特定应用程序感兴趣的数据，那么您必须在任何地方加入才能回到“单表”的想法。

支持不同应用程序的更多索引将导致从每个表中插入、更新和删除数据的时间不断增加。

数据库服务器也经常会成为瓶颈，因为数据库无法实现负载平衡。您可以将数据分区到多个服务器上，但这也变得非常复杂。

最后，所需的协调程度通常是巨大的，毫无疑问，不同部门之间会就谁的要求优先考虑而发生争执，新的发展将陷入困境。

一般来说，“每个应用程序隔离数据孤岛”模型效果更好。我们所做的几乎所有事情——我在一家合同软件公司工作——都是基于使用我们的应用程序自己的数据库从其他系统导入数据和将数据导出到其他系统。

在数据仓库/决策支持系统中可能更容易；我通常在事务性能至关重要的 OLTP 系统上工作。

# java - Java 1.6 和 Desktop.open() 的问题

> ID：84460
> 
> 赞同：6
> 
> 时间：2008-09-17T15:26:05.810
> 
> 标签：java, windows, desktop

我一直在使用 Destop.open() 在 Windows 机器（包括 Vista 和 XP）上启动 .pdf 查看器，它们中的大多数都可以正常工作。但是，在一台 XP 机器上，调用不起作用，只是返回而不抛出任何异常，并且查看器不会启动。据我所知，在那台机器上，文件关联已正确设置：双击 .pdf 可以正常工作，命令提示符下的“start xxx.pdf”命令也是如此。我认为这一定是 Windows 配置问题，但无法解决。

有没有其他人看到这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T15:31:28.743

这是 XP SP2 早期版本的一个已知问题，ShellExecute 函数停止接受 URI；更新 XP 机器补丁。

要查看异常，请确保 Java 控制台已打开：

```
Control Panel->Java Control Panel->Advanced->Java Console. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-01T04:56:58.847

我在任何地方都找不到答案，但是我有两台运行 Windows 7 64 位的机器，它们在 Desktop.getDesktop().open(file) 上失败，无法打开文件或访问在 java 6 和 java 7 上被拒绝错误。

Windows 资源管理器能够根据带有扩展名的文件名打开应用程序：

```
Runtime rt = Runtime.getRuntime();
rt.exec(new String[]{"explorer", "C:\\myfile.pdf"});
rt.exec(new String[]{"explorer", "C:\\myfile.wmv"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-13T22:24:15.683

我的一位客户仍然有这个问题，我会检查什么版本的 Windows（据我记得他使用的是 Windows 7、64 位）。与 pdf 的文件关联是好的（检查）。而且他使用最新的java版本（检查了java的更新），所以就我而言仍然是一个实际问题.....

但是我遇到了这个错误报告： [sun bug report 6764271](http://bugs.sun.com/view_bug.do?bug_id=6764271)

有人说这可能与某些 adobe 版本的注册有关（在 windows 注册表中使用 READ 而不是 OPEN）。

仍然很遗憾，像这样的错误在 prio 上很低，并且仍然是一个开放的错误（2008 年报告）。

我会尽快与我的客户核实，并在解决问题后立即在此处更新我的答案。

# coldfusion - 如何在不使用 Evaluate() 的情况下动态调用作为实例化 cfc 一部分的函数？

> ID：84463
> 
> 赞同：7
> 
> 时间：2008-09-17T15:26:18.040
> 
> 标签：coldfusion, cfc

例如，我希望能够以编程方式命中如下代码行，其中函数名称是动态分配的，而不使用 Evaluate()。下面的代码当然不起作用，但代表了我想做的事情。

```
application.obj[funcName](argumentCollection=params) 
```

我能找到动态调用函数的唯一方法是使用 cfinvoke，但据我所知，它会即时实例化相关的 cfc/函数，并且不能使用先前实例化的 cfc。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-17T16:03:10.133

根据文档，您可以执行以下操作：

```
<!--- Create the component instance. --->
<cfobject component="tellTime2" name="tellTimeObj">
<!--- Invoke the methods. --->
<cfinvoke component="#tellTimeObj#" method="getLocalTime" returnvariable="localTime">
<cfinvoke component="#tellTimeObj#" method="getUTCTime" returnvariable="UTCTime"> 
```

您应该能够简单地使用 method="#myMethod#" 调用它来动态调用特定函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T16:03:37.513

您可以使用 cfinvoke。您不必指定组件。

```
<cfinvoke method="application.#funcName#" argumentCollection="#params#"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-10-18T03:42:55.370

你也可以按照你想要的方式做一些非常相似的事情。您可以使用您使用的语法访问对象中的方法，只是不能同时调用它。但是，如果将其分配给临时变量，则可以调用它

```
<!--- get the component (has methods 'sayHi' and a method 'sayHello') --->
<cfset myObj = createObject("component", "test_object")>

<!--- set the function that we want dynamically then call it (it's a two step process) --->
<cfset func = "sayHi">
<cfset funcInstance = myObj[func]>
<cfoutput>#funcInstance("Dave")#</cfoutput>

<cfset func = "sayHello">
<cfset funcInstance = myObj[func]>
<cfoutput>#funcInstance("Dave")#</cfoutput> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-10-18T10:41:04.237

在 CFML 中，函数是语言的一等成员。这允许我们像变量一样传递它们。在下面的示例中，我将复制名为“foobar”的函数并将其重命名为“$fn”在同一个对象中。然后，我们可以简单地调用 $fn()。

```
funcName = 'foobar';    
application.obj.$fn = application.obj[funcName];
application.obj.$fn(argumentCollection=arguments); 
```

函数的上下文很重要，尤其是当它引用对象的“变量”或“this”范围内的任何值时。注意：对于共享范围内的 CFC 实例，这不是线程安全的！

最快的方法是使用 Ben Doom 的推荐。我只是想彻底。

# java - 当您在生产环境中测试和运行 jar 时，如何创建可用的 MANIFEST.MF？

> ID：84486
> 
> 赞同：20
> 
> 时间：2008-09-17T15:28:05.210
> 
> 标签：java, ant, jar, versioning, manifest.mf

我花了太多时间试图弄清楚这一点。这应该是最简单的事情，每个在 jar 中分发 Java 应用程序的人都必须处理它。

我只想知道将版本控制添加到我的 Java 应用程序的正确方法，以便我可以在测试时访问版本信息，例如在 Eclipse 中调试**和**从 jar 运行。

这是我的 build.xml 中的内容：

```
<target name="jar" depends = "compile">
    <property name="version.num" value="1.0.0"/>
    <buildnumber file="build.num"/>
    <tstamp>
        <format property="TODAY" pattern="yyyy-MM-dd HH:mm:ss" />
    </tstamp>

    <manifest file="${build}/META-INF/MANIFEST.MF">
        <attribute name="Built-By" value="${user.name}" />
        <attribute name="Built-Date" value="${TODAY}" />                   
        <attribute name="Implementation-Title" value="MyApp" />
        <attribute name="Implementation-Vendor" value="MyCompany" />                
        <attribute name="Implementation-Version" value="${version.num}-b${build.number}"/>                              
    </manifest>

    <jar destfile="${build}/myapp.jar" basedir="${build}" excludes="*.jar" />                   
</target> 
```

这会创建 /META-INF/MANIFEST.MF ，因此我在 Eclipse 中调试时可以读取这些值：

```
public MyClass()
{
    try
    {                        
        InputStream stream = getClass().getResourceAsStream("/META-INF/MANIFEST.MF");
        Manifest manifest = new Manifest(stream);            

        Attributes attributes = manifest.getMainAttributes();

        String implementationTitle = attributes.getValue("Implementation-Title");
        String implementationVersion = attributes.getValue("Implementation-Version");
        String builtDate = attributes.getValue("Built-Date");
        String builtBy = attributes.getValue("Built-By");
   }
   catch (IOException e)
   {            
        logger.error("Couldn't read manifest.");
   } 
```

}

但是，当我创建 jar 文件时，它会加载另一个 jar 的清单（大概是应用程序加载的第一个 jar - 在我的例子中，activation.jar）。

此外，尽管所有正确的值都在清单文件中，但以下代码也不起作用。

```
 Package thisPackage = getClass().getPackage();
    String implementationVersion = thisPackage.getImplementationVersion(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2010-06-18T16:55:19.920

您可以在任意 jar 中获取任意类的清单，而无需解析类 url（这可能很脆弱）。只需在所需的 jar 中找到您知道的资源，然后将连接强制转换为 JarURLConnection。

如果您希望代码在类未捆绑在 jar 中时工作，请添加一个 instanceof 检查返回的 URL 连接类型。未打包类层次结构中的类将返回内部 Sun FileURLConnection 而不是 JarUrlConnection。然后，您可以使用其他答案中描述的 InputStream 方法之一加载清单。

```
@Test
public void testManifest() throws IOException {
    URL res = org.junit.Assert.class.getResource(org.junit.Assert.class.getSimpleName() + ".class");
    JarURLConnection conn = (JarURLConnection) res.openConnection();
    Manifest mf = conn.getManifest();
    Attributes atts = mf.getMainAttributes();
    for (Object v : atts.values()) {
        System.out.println(v);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-03-05T16:06:04.760

[ClassLoader.getResource(String)](http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource(java.lang.String)) will load the first manifest it finds on the classpath, which may be the manifest for some other JAR file. Thus, you can either [enumerate all the manifests](http://java.sun.com/javase/6/docs/api/java/lang/ClassLoader.html#getResources(java.lang.String)) to find the one you want or use some other mechanism, such as a properties file with a unique name.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-18T16:44:23.460

你想用这个：

```
Enumeration<URL> resources = Thread.currentThread().getContextClassLoader().getResources("META-INF/MANIFEST.MF"); 
```

您可以解析 URL 以找出清单是否来自哪个 jar，然后通过 getInputStream() 读取 URL 以解析清单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T16:17:40.897

如果您使用与加载类相同的类加载器，则可以访问 jar 中的清单（或任何其他）文件。

```
this.getClass().getClassLoader().getResourceAsStream( ... ) ; 
```

如果您是多线程的，请使用以下内容：

```
Thread.currentThread().getContextClassLoader().getResourceAsStream( ... ) ; 
```

这也是在 jar 中包含默认配置文件的一种非常有用的技术。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-29T16:28:17.507

这是我发现的有效方法：

包版本.java：

```
package com.company.division.project.packageversion;

import java.io.IOException;
import java.io.InputStream;
import java.util.jar.Attributes;
import java.util.jar.Manifest;

public class packageVersion
{
    void printVersion()
    {
        try
        {         
            InputStream stream = getClass().getResourceAsStream("/META-INF/MANIFEST.MF");

            if (stream == null)
            {
                System.out.println("Couldn't find manifest.");
                System.exit(0);
            }

            Manifest manifest = new Manifest(stream);

            Attributes attributes = manifest.getMainAttributes();

            String impTitle = attributes.getValue("Implementation-Title");
            String impVersion = attributes.getValue("Implementation-Version");
            String impBuildDate = attributes.getValue("Built-Date");
            String impBuiltBy = attributes.getValue("Built-By");

            if (impTitle != null)
            {
                System.out.println("Implementation-Title:   " + impTitle);
            }            
            if (impVersion != null)
            {
                System.out.println("Implementation-Version: " + impVersion);
            }
            if (impBuildDate != null)
            {
                System.out.println("Built-Date: " + impBuildDate);
            }
            if (impBuiltBy != null)
            {
                System.out.println("Built-By:   " + impBuiltBy);
            }

            System.exit(0);
        }
        catch (IOException e)
        {            
            System.out.println("Couldn't read manifest.");
        }        
    }

    /**
     * @param args
     */
    public static void main(String[] args)
    {
        packageVersion version = new packageVersion();
        version.printVersion();        
    }

} 
```

这是匹配的 build.xml：

```
<project name="packageVersion" default="run" basedir=".">

    <property name="src" location="src"/>
    <property name="build" location="bin"/>
    <property name="dist" location="dist"/>

    <target name="init">
        <tstamp>
            <format property="TIMESTAMP" pattern="yyyy-MM-dd HH:mm:ss" />
        </tstamp>
        <mkdir dir="${build}"/>
        <mkdir dir="${build}/META-INF"/>
    </target>

    <target name="compile" depends="init">
        <javac debug="on" srcdir="${src}" destdir="${build}"/>
    </target>

    <target name="dist" depends = "compile">        
        <mkdir dir="${dist}"/>      
        <property name="version.num" value="1.0.0"/>
        <buildnumber file="build.num"/>
        <manifest file="${build}/META-INF/MANIFEST.MF">
            <attribute name="Built-By" value="${user.name}" />
            <attribute name="Built-Date" value="${TIMESTAMP}" />                                
            <attribute name="Implementation-Vendor" value="Company" />
            <attribute name="Implementation-Title" value="PackageVersion" />
            <attribute name="Implementation-Version" value="${version.num} (b${build.number})"/>
            <section name="com/company/division/project/packageversion">
                <attribute name="Sealed" value="false"/>
            </section>          
        </manifest>     
        <jar destfile="${dist}/packageversion-${version.num}.jar" basedir="${build}" manifest="${build}/META-INF/MANIFEST.MF"/>                 
    </target>

    <target name="clean">
        <delete dir="${build}"/>
        <delete dir="${dist}"/>
    </target>

    <target name="run" depends="dist">      
        <java classname="com.company.division.project.packageversion.packageVersion">
            <arg value="-h"/>
            <classpath>
                <pathelement location="${dist}/packageversion-${version.num}.jar"/>
                <pathelement path="${java.class.path}"/>
            </classpath>
        </java>
    </target>

</project> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-06-18T11:30:49.177

我发现 McDowell 的评论是正确的——选择哪个 MANIFEST.MF 文件取决于类路径，可能不是想要的。我用这个

```
String cp = PCAS.class.getResource(PCAS.class.getSimpleName() + ".class").toString();
cp = cp.substring(0, cp.indexOf(PCAS.class.getPackage().getName())) 
              +  "META-INF/MANIFEST.MF";
Manifest mf = new Manifest((new URL(cp)).openStream()); 
```

我改编自[链接文本](http://forums.sun.com/thread.jspa?threadID=642761)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T16:11:22.767

我通常也会使用版本文件。我将为每个 jar 创建一个文件，因为每个 jar 都可以有自己的版本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T15:38:23.690

只是不要使用清单。创建一个 foo.properties.original 文件，内容如 version=@VERSION@

在同样的任务中，您可以对 copu foo.properties.original 进行复制，然后

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-30T09:02:05.250

您可以使用[jcabi-manifests](http://manifests.jcabi.com/index.html)[`Manifests`](http://manifests.jcabi.com/apidocs-0.7.5/com/jcabi/manifests/Manifests.html)中的实用程序类，它可以自动查找和解析类路径中的所有可用文件。然后，您使用单行读取任何属性：`MANIFEST.MF`

```
final String name = Manifests.read("Build-By");
final String date = Manifests.read("Build-Date"); 
```

另外，请查看：[http ://www.yegor256.com/2014/07/03/how-to-read-manifest-mf.html](http://www.yegor256.com/2014/07/03/how-to-read-manifest-mf.html)

# xen - 在 Xen VM 之间共享文件的最佳方式是什么？

> ID：84488
> 
> 赞同：1
> 
> 时间：2008-09-17T15:28:24.773
> 
> 标签：xen, file-sharing

是否有一些内置方式可以在 Xen 来宾之间共享文件？我目前不需要分享实际的图像，只需要一些数据文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T15:57:39.070

你是指Xen和主人之间还是不同客人之间？

如果是客人，我认为没有提供任何东西，但您可能应该使用 NFS，因为它是受支持的最佳文件系统，支持相当数量的权限和属性，但假设是受信任的网络。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-02T16:23:05.990

您还可以尝试[glusterfs](http://www.gluster.org/docs/index.php/Main_Page)或[luster](http://wiki.lustre.org/index.php?title=Main_Page)在 Xen 来宾之间共享文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-31T20:56:04.967

我遇到了同样的问题，我的解决方案是为每个指向共享 lvm 或设备的来宾添加一个额外的虚拟驱动器。

所以在来宾配置文件中`xvda3`被指出。`/dev/md0`您可以轻松地`/dev/vg0/lg0`用于逻辑卷。

# perl - How can I use perldoc to lookup the %ENV variable?

> ID：84506
> 
> 赞同：4
> 
> 时间：2008-09-17T15:30:13.630
> 
> 标签：perl, perldoc

I find from reading perldoc perlvar, about a thousand lines in is help for %ENV. Is there a way to find that from the command line directly?

On my Windows machine, I've tried the following

```
perldoc ENV
perldoc %ENV
perldoc %%ENV
perldoc -r ENV (returns info about Use Env)
perldoc -r %ENV
perldoc -r %%%ENV
perldoc -r %%%%ENV (says No documentation found for "%ENV") 
```

None actually return information about the %ENV variable.

How do I use perldoc to find out about %ENV, if I don't want to have to eye-grep through thousands of line?

I've tried the suggested "perldoc perlvar" and then typing /%ENV, but nothing happens.

```
perl -v: This is perl, v5.8.0 built for MSWin32-x86-multi-thread 
```

Though I've asked about %ENV, this also applies to any general term, so knowing that %ENV is in perlvar for this one example won't help me next time when I don't know which section.

Is there a way to get perldoc to dump everything (ugh) and I can grep the output?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-17T15:57:51.940

Check out the latest development version of [Pod::Perldoc](http://search.cpan.org/~ferreira/Pod-Perldoc-3.14_07/). I submitted a patch which lets you do this:

```
$ perldoc -v '%ENV'

%ENV
$ENV{expr}
The hash %ENV contains your current environment. Setting a value in
"ENV" changes the environment for any child processes you subsequently
fork() off. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T15:55:28.233

perldoc doesn't have an option to search for a particular entry in perlvar (like -f does for perlfunc). General searching is dependent on your pager (specified in the PAGER environment variable). Personally, I like "less." You can get [less for windows](http://gnuwin32.sourceforge.net/packages/less.htm) from the [GnuWin32](http://gnuwin32.sourceforge.net/) project.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T15:53:58.800

The searching for %ENV is a feature of the pager named 'less', not of perldoc. So if perldoc uses a different pager, this might not work.

Activestate Perl comes with HTML documentation, you can open perlvar in your browser, hit Ctrl+f and type %ENV, then hit enter.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-20T20:59:17.160

I use [Apache::Perldoc](http://search.cpan.org/dist/Apache-Perldoc) (old, but still does its job) on my local machine to browse the local documentation. If I have net access though, I just look at [perldoc.perl.org](http://perldoc.perl.org) and search. However, in this case, search isn't useful for the variables and it's better to use the [Special variables](http://perldoc.perl.org/perlvar.html) link at the left of the page.

As you get more experience with Perl, you'll know where to look for the documentation. For know, you might have to refer to perltoc, but after awhile you'll know to look for functions in [perlfunc](http://perldoc.perl.org/perlfunc.html), variables in [perlvar](http://perldoc.perl.org/perlvar.html), and so on.

You might also use my [Perl documentation documentation](http://www.perlmonks.org/index.pl?node_id=408254).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T15:57:11.477

1.  Install [`unixutils`](http://unxutils.sourceforge.net/) for Windows
2.  Call: `perldoc perlvar | grep -A10 %env`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-18T09:26:33.573

```
firefox http://perldoc.perl.org/perlvar.html#%ENV 
```

By the way, many many many bugs have been fixed since 5.8.0.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-17T15:50:54.610

If you'd like to see the contents of your %ENV, you can use Data::Dumper to print it out in a rather readable format:

perl -MData::Dumper -e 'print Dumper \%ENV'

# language-agnostic - 你最喜欢的“程序员”动画片是什么？

> ID：84556
> 
> 赞同：836
> 
> 时间：2008-09-17T15:34:11.467
> 
> 标签：language-agnostic

我个人喜欢这个：

![](https://i.stack.imgur.com/ZNtvc.jpg)

PS 未经本站许可请勿盗链漫画。

* * *

## 回答 #1

> 赞同：1805
> 
> 时间：2008-09-17T15:39:53.030

另一个来自[xkcd](http://xkcd.com/327/) ![妈妈的功劳](https://imgs.xkcd.com/comics/exploits_of_a_mom.png "她的女儿叫Help，我被困在一家驾照工厂。")

* * *

## 回答 #2

> 赞同：1366
> 
> 时间：2008-09-17T15:39:30.923

![](https://i.stack.imgur.com/NFwZj.png)​​​​

* * *

## 回答 #3

> 赞同：934
> 
> 时间：2008-09-17T15:35:41.107

我喜欢这个：http: [//xkcd.com/149/](http://xkcd.com/149/)

[![替代文字](https://imgs.xkcd.com/comics/sandwich.png "正确的用户政策显然意味着西蒙说。")](http://xkcd.com/149/)

（正确的用户政策显然意味着西蒙说。）

* * *

## 回答 #4

> 赞同：802
> 
> 时间：2008-09-21T00:33:33.463

![在此处输入图像描述](https://i.stack.imgur.com/fvdkb.png)

* * *

## 回答 #5

> 赞同：744
> 
> 时间：2008-09-17T15:38:35.640

![代码质量的唯一有效度量：WTFs/minute](https://blog.pengoworks.com/enclosures/wtfm_cf7237e5-a580-4e22-a42a-f8597dd6c60b.jpg)

* * *

## 回答 #6

> 赞同：676
> 
> 时间：2008-09-17T15:51:56.807

因为这部漫画，我写了一个路径为 /dev/random/ return 4 的制作网站。

[![int get_rand_number(){ 返回 4;}](https://imgs.xkcd.com/comics/random_number.png "RFC 1149.5 将 4 指定为标准 IEEE 审查的随机数。")](http://xkcd.com/221/)

* * *

## 回答 #7

> 赞同：597
> 
> 时间：2008-09-17T15:37:03.177

[XKCD 漫画 303 - “编译”](http://xkcd.com/303/)

[![](https://imgs.xkcd.com/comics/compiling.png "“你在偷那些液晶显示器吗？”  '是的，但我在编译代码时正在这样做'")](http://xkcd.com/303/ "“你在偷那些液晶显示器吗？”  '是的，但我在编译代码时正在这样做'")

（“你是在偷那些 LCD 吗？”“是的，但我是在我的代码编译时这样做的”）

我把这个钉在面向我们办公室入口的墙上：）

* * *

## 回答 #8

> 赞同：543
> 
> 时间：2008-09-17T16:00:06.867

[![](https://imgs.xkcd.com/comics/ballmer_peak.png "Apple 使用自动杜松子酒 IV。")](http://xkcd.com/323/)

* * *

## 回答 #9

> 赞同：522
> 
> 时间：2008-09-18T17:31:39.557

[![](https://imgs.xkcd.com/comics/goto.png "Neal Stephenson 认为将他的标签命名为“dengo”很可爱")](http://xkcd.com/292/)

* * *

## 回答 #10

> 赞同：484
> 
> 时间：2008-09-23T12:20:25.523

哦！只可以有一个人：

[![](https://imgs.xkcd.com/comics/duty_calls.png "你想要我做什么？ 离开？ 然后他们会一直错！")](http://xkcd.com/386/)

这太有趣了，因为这是真的:)

* * *

## 回答 #11

> 赞同：474
> 
> 时间：2008-09-17T16:01:36.723

[![替代文字](https://imgs.xkcd.com/comics/regular_expressions.png)](http://xkcd.com/208/)

* * *

## 回答 #12

> 赞同：387
> 
> 时间：2008-09-17T18:20:15.203

宗教辩论总是很有趣！

[![](https://imgs.xkcd.com/comics/real_programmers.png "真正的程序员在开始时就设置了通用常量，这样宇宙就会演变成包含一个包含他们想要的数据的磁盘。")](http://xkcd.com/378/)

* * *

## 回答 #13

> 赞同：330
> 
> 时间：2008-09-17T15:46:25.980

![替代文字](https://i.stack.imgur.com/DIz8X.jpg "开发者生来就勇敢。")

* * *

## 回答 #14

> 赞同：296
> 
> 时间：2008-09-17T19:34:46.290

当然，[xkcd](http://xkcd.com/353/)！

[![353](https://imgs.xkcd.com/comics/python.png "昨天我用 Python 写了 20 个简短的程序。 这太棒了。 Perl，我要离开你了。")](http://xkcd.com/353/)

* * *

## 回答 #15

> 赞同：280
> 
> 时间：2008-10-12T20:29:16.630

![](https://i.stack.imgur.com/AD3Eo.gif)​​​​​​​

* * *

## 回答 #16

> 赞同：261
> 
> 时间：2008-09-17T15:37:10.290

[![替代文字](https://imgs.xkcd.com/comics/lisp_cycles.png "我刚刚收到消息，皇帝永久解散了麻省理工学院的计算机科学项目。")](http://xkcd.com/297/)

* * *

## 回答 #17

> 赞同：246
> 
> 时间：2008-09-17T16:51:29.363

我知道这是真的。[XKCD #224](http://xkcd.com/224/)

![](https://imgs.xkcd.com/comics/lisp.jpg "我们丢失了有关量子力学的文档。 您必须自己解码正则表达式。")

“我们丢失了有关量子力学的文档。你必须自己解码正则表达式。”

* * *

## 回答 #18

> 赞同：244
> 
> 时间：2008-09-17T15:44:02.117

基线预期

![](https://i.stack.imgur.com/nfAh2.gif)

摘自[Dilbert.com，2008 年 9 月 12 日](https://dilbert.com/strip/2008-09-12)

* * *

## 回答 #19

> 赞同：219
> 
> 时间：2008-09-25T18:12:15.693

我不敢相信有人没有放这个：

[替代文字 http://www.jeffiscool.com/pictures/Foxtrot/foxtrot_bluescreenofdeath.JPG](http://www.jeffiscool.com/pictures/Foxtrot/foxtrot_bluescreenofdeath.JPG "蓝屏死机")

* * *

## 回答 #20

> 赞同：214
> 
> 时间：2008-12-12T13:26:33.620

[![指针](https://imgs.xkcd.com/comics/pointers.png "每台计算机都在无法访问的内存地址 0x-1 上存储一个秘密。 我找到了，而且是所有人类都存在——分段错误。")](http://xkcd.com/138/)

* * *

## 回答 #21

> 赞同：209
> 
> 时间：2009-07-20T17:15:09.140

[![估计](https://imgs.xkcd.com/comics/estimation.png "他们可以说")](http://xkcd.com/612/)

XKCD 每次都按下按钮。

* * *

## 回答 #22

> 赞同：201
> 
> 时间：2008-09-17T15:59:20.410

[![](https://imgs.xkcd.com/comics/zealous_autoconfig.png "我听说这是最新 Ubuntu 版本中的一个选项。")](http://xkcd.com/416/)

（我听说这是最新 Ubuntu 版本中的一个选项。）

* * *

## 回答 #23

> 赞同：193
> 
> 时间：2008-09-27T15:45:20.823

我不知道...

[![听你自己](https://imgs.xkcd.com/comics/listen_to_yourself.png "伙计，我只是想知道babby是如何形成的。")](http://xkcd.com/481/)

* * *

## 回答 #24

> 赞同：171
> 
> 时间：2008-09-17T15:51:14.797

关于胜利：​​​​

[![](https://i.stack.imgur.com/EucJ2.gif)](https://phdcomics.com/comics/archive.php?comicid=946)

* * *

## 回答 #25

> 赞同：156
> 
> 时间：2009-02-13T13:47:46.280

xkcd：

[![Windows 7的](https://imgs.xkcd.com/comics/windows_7.png "免责声明：我还没有真正尝试过测试版。 我听说这很令人愉快，一点也不像希特勒。")](http://xkcd.com/528/)

* * *

## 回答 #26

> 赞同：155
> 
> 时间：2008-09-18T21:09:42.590

[![](https://imgs.xkcd.com/comics/travelling_salesman_problem.png "最佳线性规划切割平面技术的复杂度等级是多少？ 我在任何地方都找不到它。 伙计，加菲猫的家伙没有这些问题......")](http://xkcd.com/399/)

* * *

## 回答 #27

> 赞同：138
> 
> 时间：2008-09-19T10:28:02.013

[“当我开始编程时，我们没有任何这些娘娘腔的‘图标’和‘Windows’。我们只有零和一——有时我们甚至没有。我只用零编写了一个完整的数据库程序。” “你有零？我们必须使用字母'O'。” -迪尔伯特（斯科特·亚当斯） http://www.mscha.net/tmp/dt19920908.gif](http://www.mscha.net/tmp/dt19920908.gif)

* * *

## 回答 #28

> 赞同：136
> 
> 时间：2008-09-18T12:17:41.837

Dilbert 是最受欢迎的，但过去几年我也非常喜欢 xkcd 漫画。我在我的立方体里贴了几个……我真的很努力地靠这个生活。

[![编译器投诉](https://imgs.xkcd.com/comics/compiler_complaint.png "检查构建环境是否正常......构建环境正在咧嘴笑着拿着抹刀。 可能不会。")](http://xkcd.com/371/)

* * *

## 回答 #29

> 赞同：130
> 
> 时间：2008-09-24T08:13:05.203

![来自 Brainstuck.com 的条款和条件卡通片](https://i.stack.imgur.com/1y7rt.jpg)

[https://brainstuck.com/2008/08/08/tc/](https://brainstuck.com/2008/08/08/t-c/)

我猜这可能永远不会发生，因为同意条款和条件比实际阅读它们更重要（从软件发行商的角度来看）。

* * *

## 回答 #30

> 赞同：122
> 
> 时间：2008-09-20T10:32:22.750

[![](https://imgs.xkcd.com/comics/nerd_sniping.png "我第一次看到这个问题是在 Google Labs Aptitude Test 上。 一位教授和我填了一块黑板，却一无所获。 玩得开心。")](http://xkcd.com/356)

* * *

## 回答 #31

> 赞同：111
> 
> 时间：2009-05-08T23:53:04.343

我最喜欢的一个:)

![如果机器人有一天会梦到电羊，别忘了将sheepCount 声明为long int。](https://imgs.xkcd.com/comics/cant_sleep.png "如果机器人有一天会梦到电羊，别忘了将sheepCount 声明为long int。")

* * *

## 回答 #32

> 赞同：107
> 
> 时间：2008-09-19T21:51:27.510

[有趣的医生... http://www.ibiblio.org/Dave/Dr-Fun/df200002/df20000210.jpg](http://www.ibiblio.org/Dave/Dr-Fun/df200002/df20000210.jpg)

* * *

## 回答 #33

> 赞同：107
> 
> 时间：2009-05-13T13:51:53.017

![不能也不应该](https://imgs.xkcd.com/comics/cnr.png "不能也不应该。")

如果所有错误都那么容易关闭。

* * *

## 回答 #34

> 赞同：103
> 
> 时间：2009-01-15T17:34:08.817

![替代文字](https://imgs.xkcd.com/comics/flow_charts.png "喝完 8 杯后，您将 torrent 从 FreeBSD 切换到 Microsoft Bob。 来吧，会很有趣的！")

[http://xkcd.com/518/](http://xkcd.com/518/)

* * *

## 回答 #35

> 赞同：102
> 
> 时间：2008-09-23T10:31:57.593

另一个我喜欢的：没有冒犯.. :)

[这个怎么运作](http://xkcd.com/385/)

![替代文字](https://imgs.xkcd.com/comics/how_it_works.png "当然是 pi 加 C。")

* * *

## 回答 #36

> 赞同：98
> 
> 时间：2008-09-17T15:44:28.480

毫无疑问...

![状态机](https://i89.photobucket.com/albums/k220/kipper_308/fran_web.jpg)

* * *

## 回答 #37

> 赞同：96
> 
> 时间：2008-11-20T22:25:49.527

![随着项目的进行，成功的标准越来越低](https://imgs.xkcd.com/comics/success.png "40% 的 OpenBSD 安装会导致鲨鱼攻击。 这是他们唯一的长期安全问题。")

（“40% 的 OpenBSD 安装会导致鲨鱼攻击。这是他们唯一的长期安全问题。”）

* * *

## 回答 #38

> 赞同：85
> 
> 时间：2008-09-19T02:31:11.957

请传真给我一些电力好吗？

![呆伯特传真](https://i.stack.imgur.com/tH8B0.png)

* * *

## 回答 #39

> 赞同：85
> 
> 时间：2009-04-29T20:33:58.353

[![我是个白痴](https://imgs.xkcd.com/comics/im_an_idiot.png "可悲的是，这是一个真实的故事。 至少我了解了 OS X 的“说”命令。")](http://xkcd.com/530/)

* * *

## 回答 #40

> 赞同：83
> 
> 时间：2008-09-17T15:43:58.357

![替代文字](https://codeclimber.net.nz/images/codeclimber_net_nz/WindowsLiveWriter/c506f37540e1.NETvsPHPintheEnterprise_AB36/DotNetPhpCartoon01_3.png)

[替代文字 http://www.netfxharmonics.com/Images/WindowsLiveWriter/ComicStrip2.NETandPHPSourceCode_14857/DotNetPhpCartoon02.png](http://www.netfxharmonics.com/Images/WindowsLiveWriter/ComicStrip2.NETandPHPSourceCode_14857/DotNetPhpCartoon02.png)

* * *

## 回答 #41

> 赞同：80
> 
> 时间：2008-09-19T23:29:52.220

经理幽默...

[http://img261.imageshack.us/img261/7469/1517stripsundayiu1.gif](http://img261.imageshack.us/img261/7469/1517stripsundayiu1.gif)

* * *

## 回答 #42

> 赞同：71
> 
> 时间：2009-05-08T19:42:25.523

充分说明了为什么基于度量的激励措施和工程师不能齐头并进。

![替代文字](https://i.stack.imgur.com/i5UMn.jpg)

* * *

## 回答 #43

> 赞同：70
> 
> 时间：2008-09-21T06:04:34.010

[替代文字 http://www.phdcomics.com/comics/archive/phd120804s.gif](http://www.phdcomics.com/comics/archive/phd120804s.gif)

* * *

## 回答 #44

> 赞同：63
> 
> 时间：2009-06-05T04:07:25.353

![替代文字](https://imgur.com/uhudo.jpg)

* * *

## 回答 #45

> 赞同：63
> 
> 时间：2009-06-18T14:01:42.060

![替代文字](https://i.stack.imgur.com/8142y.png)

*   ( [http://thedailywtf.com](http://thedailywtf.com) )

* * *

## 回答 #46

> 赞同：60
> 
> 时间：2008-12-12T12:55:30.393

[![拥有](https://imgs.xkcd.com/comics/pwned.png "我敢肯定，关于冒险游戏消失而支持角色扮演游戏的原因的讨论会很有趣")](http://xkcd.com/91/)

虽然不是专门关于编程本身....想要对游戏进行编程是我对 IT 感兴趣的原因....

反正这个我看到的时候笑死我了！

* * *

## 回答 #47

> 赞同：60
> 
> 时间：2009-06-17T22:12:46.683

John Martz 有一个与此相关的[博客条目。](http://www.robotjohnny.com/blog/ie6-denial-message-for-momentilecom/)![IE6 拒绝消息](https://farm4.static.flickr.com/3609/3629069606_a72bf52c22_o.jpg)

* * *

## 回答 #48

> 赞同：55
> 
> 时间：2009-01-15T19:20:10.507

这是[恐龙漫画](http://www.qwantz.com/)的新作品：

[女士们先生们：先生。堆栈溢出！http://www.qwantz.com/comics/comic2-82.png](http://www.qwantz.com/comics/comic2-82.png)

* * *

## 回答 #49

> 赞同：53
> 
> 时间：2009-02-03T00:48:11.620

[![](https://imgs.xkcd.com/comics/security.png "现实现实：没有人关心他的秘密。 （另外，我很难以 5 美元的价格找到那个扳手。）")](http://xkcd.com/538/)

* * *

## 回答 #50

> 赞同：53
> 
> 时间：2009-11-18T08:08:54.203

这成就了我的一年。

![那里的一些工程师已经解决了 P=NP 并且它被锁定在电动打蛋器校准程序中。 对于我们了解的每一个 0x5f375a86，有数千个我们从未见过。](https://imgs.xkcd.com/comics/academia_vs_business.png)

> 那里的一些工程师已经解决了 P=NP 并且它被锁定在电动打蛋器校准程序中。对于我们了解的每一个 0x5f375a86，有数千个我们从未见过。

* * *

## 回答 #51

> 赞同：52
> 
> 时间：2008-09-28T20:21:21.383

[替代文字 http://globalnerdy.com/wordpress/wp-content/uploads/2007/11/dilbert-xp02.gif](http://globalnerdy.com/wordpress/wp-content/uploads/2007/11/dilbert-xp02.gif)

* * *

## 回答 #52

> 赞同：51
> 
> 时间：2008-09-18T17:24:46.687

有点旧，但仍然是我的最爱之一：

[http://www.ok-cancel.com/strips/okcancel20031003.gif](http://www.ok-cancel.com/strips/okcancel20031003.gif)

* * *

## 回答 #53

> 赞同：51
> 
> 时间：2008-10-09T15:00:15.217

[http://www.ok-cancel.com/strips/okcancel20031010.gif](http://www.ok-cancel.com/strips/okcancel20031010.gif)

* * *

## 回答 #54

> 赞同：50
> 
> 时间：2008-09-19T22:36:53.423

又一部很棒的狐步舞漫画。可能是最难以理解的非极客漫画潜入报纸搞笑。

![](https://arsecandle.org/~rod/foxtrot_java.JPG)

* * *

## 回答 #55

> 赞同：48
> 
> 时间：2008-09-21T09:07:01.230

我喜欢这个： ![https://imgs.xkcd.com/comics/road_rage.png](https://imgs.xkcd.com/comics/road_rage.png "好吧，现在就在损失打击他的时候，猛踩刹车。")

* * *

## 回答 #56

> 赞同：48
> 
> 时间：2009-05-23T14:03:52.890

[替代文字 http://www.unt.edu/benchmarks/archives/2004/february04/screwupcolor.gif](http://www.unt.edu/benchmarks/archives/2004/february04/screwupcolor.gif)

这是我的日常。

* * *

## 回答 #57

> 赞同：47
> 
> 时间：2009-10-01T08:53:48.733

（这就是人们的感受）

![替代文字](https://i.stack.imgur.com/INdGC.jpg)

* * *

## 回答 #58

> 赞同：45
> 
> 时间：2009-03-04T22:40:38.000

[老黑白版（太阳底下没有新鲜事）http://www.lore.ua.ac.be/Teaching/SE3BAC/SoftwareSpecCartoon.gif](http://www.lore.ua.ac.be/Teaching/SE3BAC/SoftwareSpecCartoon.gif)

* * *

## 回答 #59

> 赞同：43
> 
> 时间：2008-09-23T21:37:05.047

[第一个 bug bash](http://www.bugbash.net/comic/1.html)很棒！

[http://www.bugbash.net/strips/bug-bash20050521.gif](http://www.bugbash.net/strips/bug-bash20050521.gif)

* * *

## 回答 #60

> 赞同：43
> 
> 时间：2009-06-11T14:39:31.657

[替代文字 http://i44.tinypic.com/f07yh3.jpg](http://i44.tinypic.com/f07yh3.jpg)

* * *

## 回答 #61

> 赞同：42
> 
> 时间：2008-09-21T07:30:16.267

[替代文字 http://www.phdcomics.com/comics/archive/phd101305s.gif](http://www.phdcomics.com/comics/archive/phd101305s.gif)

[替代文字 http://www.phdcomics.com/comics/archive/phd101505s.gif](http://www.phdcomics.com/comics/archive/phd101505s.gif)

[替代文字 http://www.phdcomics.com/comics/archive/phd101705s.gif](http://www.phdcomics.com/comics/archive/phd101705s.gif)

* * *

## 回答 #62

> 赞同：41
> 
> 时间：2008-09-17T18:39:15.267

来自xkcd的1337套漫画，开头是： ![我最喜欢的是 Stallman 让 RIAA 特工参与到最后的剑战中的想法 :)](https://imgs.xkcd.com/comics/1337_part_1.png "如果您不够酷，无法手动完成，您可以查找 Upside-Down-Ternet 之类的工具，以便在您的 wifi 上与人玩游戏。")

* * *

## 回答 #63

> 赞同：41
> 
> 时间：2009-02-18T09:53:20.877

![https://www.cartoonstock.com/lowres/bro0048l.jpg](https://www.cartoonstock.com/lowres/bro0048l.jpg)

* * *

## 回答 #64

> 赞同：40
> 
> 时间：2008-09-21T08:11:46.310

[替代文字 http://www.phdcomics.com/comics/archive/phd011406s.gif](http://www.phdcomics.com/comics/archive/phd011406s.gif)

* * *

## 回答 #65

> 赞同：40
> 
> 时间：2008-11-19T09:31:04.457

[二进制中的真正程序员代码 http://zeljkofilipin.com/wp-content/uploads/2008/02/real-programmers-code-in-binary.jpg](http://zeljkofilipin.com/wp-content/uploads/2008/02/real-programmers-code-in-binary.jpg)

根据[http://homepages.strath.ac.uk/~cjbs17/computing/binary.html](http://homepages.strath.ac.uk/~cjbs17/computing/binary.html)，此图像的作者是 Chris Kania，原件位于[http://www.kaniamania.com/html/1190.html](http://www.kaniamania.com/html/1190.html)但目前整个网站都关闭了。

* * *

## 回答 #66

> 赞同：40
> 
> 时间：2009-03-11T12:03:18.770

![表明您的编码员没有足够的工作要做](https://imgs.xkcd.com/comics/not_enough_work.png "如果你是一个发音 <> 括号的混蛋，那就更难了。")

* * *

## 回答 #67

> 赞同：37
> 
> 时间：2009-03-28T01:23:02.070

![我有一场战争要打！](https://www.jpaulmorrison.com/fbp/State_of_the_art.jpg).

* * *

## 回答 #68

> 赞同：36
> 
> 时间：2009-02-04T05:36:27.187

[替代文字 http://img111.imageshack.us/img111/9510/83482523kd2.png](http://img111.imageshack.us/img111/9510/83482523kd2.png)

* * *

## 回答 #69

> 赞同：35
> 
> 时间：2008-09-17T16:55:38.667

从 APP 上的 Apple Desicion 检查此内容。![替代文字](https://www.geekculture.com/joyoftech/joyimages/1151real.jpg)

* * *

## 回答 #70

> 赞同：35
> 
> 时间：2009-07-29T20:28:15.727

[替代文字 http://www.geekherocomic.com/comics/2009-07-29-two-questions.png](http://www.geekherocomic.com/comics/2009-07-29-two-questions.png)

* * *

## 回答 #71

> 赞同：34
> 
> 时间：2008-09-17T15:48:28.890

![绿巨人 MMO 卡通](https://farm4.static.flickr.com/3048/2864970757_2fd6d06367.jpg?v=0)

* * *

## 回答 #72

> 赞同：34
> 
> 时间：2008-10-24T13:49:08.290

忍不住爱上...

![替代文字](https://imgs.xkcd.com/comics/e_to_the_pi_minus_pi.png "另外，我听说 (9^2 + 19^2/22) 的第四个根是 pi。")

* * *

## 回答 #73

> 赞同：33
> 
> 时间：2008-09-18T21:25:20.477

[替代文字 http://www.userfriendly.org/cartoons/archives/08jun/uf011627.gif](http://www.userfriendly.org/cartoons/archives/08jun/uf011627.gif)

* * *

## 回答 #74

> 赞同：33
> 
> 时间：2009-01-29T08:53:07.500

专为研究生设计，但同样适用于程序员

[替代文字 http://www.phdcomics.com/comics/archive/phd012609s.gif](http://www.phdcomics.com/comics/archive/phd012609s.gif)

[PHD 漫画 - 棒上的大脑](http://www.phdcomics.com/comics/archive.php?comicid=1126)

* * *

## 回答 #75

> 赞同：33
> 
> 时间：2009-07-19T15:19:27.353

![替代文字](https://pascalg.files.wordpress.com/2007/06/software-outsourcing-cartoon-3.jpg)

* * *

## 回答 #76

> 赞同：32
> 
> 时间：2008-09-18T06:07:16.330

![程序员生活](https://amoebarepublic.files.wordpress.com/2008/04/programmer.gif)

* * *

## 回答 #77

> 赞同：31
> 
> 时间：2008-09-20T10:39:52.607

[来自User Friendly 的](http://www.userfriendly.org/)“Emacs Thumb”

[Emacs 拇指 http://www.userfriendly.org/cartoons/archives/07sep/uf010710.gif](http://www.userfriendly.org/cartoons/archives/07sep/uf010710.gif)

* * *

## 回答 #78

> 赞同：30
> 
> 时间：2008-09-22T23:53:37.893

[替代文字 http://wondermark.com/comics/190.gif](http://wondermark.com/comics/190.gif)

* * *

## 回答 #79

> 赞同：28
> 
> 时间：2008-11-17T07:23:00.037

![注定失败的项目](https://plg.uwaterloo.ca/~migod/fun/dilbert-reqs.gif)

一个不错的[收藏](http://plg.uwaterloo.ca/~migod/fun/)

* * *

## 回答 #80

> 赞同：28
> 
> 时间：2009-09-29T16:46:35.607

我很惊讶这个失踪了：

[![一堆岩石](https://imgs.xkcd.com/comics/a_bunch_of_rocks.png "我在 Wolfram 的规则 34 上调用规则 34。")](http://xkcd.com/505/)

* * *

## 回答 #81

> 赞同：26
> 
> 时间：2008-09-20T02:57:07.150

我一直最喜欢的可能是 xkcd 的“Sudo make me a sandwich”漫画，但是那里有很多好的网络漫画，我想我会为了好玩而扔掉一些其他的：

一位同事指给我看最近才开始的[Sticks and Stones 。](http://www.arcanology.net/sticksandstones/)这有点像 xkcd 盗版，但里面有一些好东西。 [替代文字 http://www.arcanology.net/sticksandstones/comics/comic-10.gif](http://www.arcanology.net/sticksandstones/comics/comic-10.gif)

[Hackles](http://hackles.org/)经常与编程有关。这可能是我最喜欢的： Hackles ，[作者 Drake Emko 和 Jen Brodzik](http://hackles.org/strips/cartoon334.png) [http://hackles.org/strips/cartoon334.png](http://nodwick.humor.gamespy.com/ffn/)

[Aaron Williams 的正面书呆子 http://nodwick.humor.gamespy.com/ffn/strips/2008-03-12.jpg](http://nodwick.humor.gamespy.com/ffn/strips/2008-03-12.jpg)

* * *

## 回答 #82

> 赞同：26
> 
> 时间：2009-06-06T02:52:11.747

[C++ 森林](https://img-fotki.yandex.ru/get/3502/jim1537.52/0_2805a_2b9e39ea_orig)

![替代文字](https://img-fotki.yandex.ru/get/3502/jim1537.52/0_2805a_2b9e39ea_orig)

* * *

## 回答 #83

> 赞同：25
> 
> 时间：2009-02-04T06:12:03.980

[http://www.qwantz.com/comics/comic2-172.png](http://www.qwantz.com/comics/comic2-172.png "恐龙不应该读苏格拉顿")

[（这个](https://stackoverflow.com/questions/84556/whats-your-favorite-programmer-cartoon/448085#448085)的续集）

* * *

## 回答 #84

> 赞同：24
> 
> 时间：2008-10-13T10:13:57.947

[http://ihooky.com/comics/ihooky06.png](http://ihooky.com/comics/ihooky06.png)

* * *

## 回答 #85

> 赞同：24
> 
> 时间：2008-11-06T15:49:34.377

![](https://imgs.xkcd.com/comics/new_pet.png "每只仓鼠一台笔记本电脑！")

让我哈哈

[关联](http://xkcd.com/413/)

* * *

## 回答 #86

> 赞同：24
> 
> 时间：2009-01-08T03:39:33.770

我不敢相信 6 页的答案，没有人提到[香蕉 jr 6000](http://toastytech.com/guis/bananaad.gif)。我们忘记得有多快。

[http://img17.imageshack.us/img17/3108/bananaadgz4.gi​​f](http://img17.imageshack.us/img17/3108/bananaadgz4.gif)

另一个我喜欢但找不到图片的人有一句妙语“失败的琼斯先生，几乎不是原创的。现在坐下。”

也来自布卢姆县地带。

* * *

## 回答 #87

> 赞同：24
> 
> 时间：2009-09-05T17:20:41.573

我没有看到这是我最喜欢的 xkcd 之一：

![唐纳德·克努特](https://imgs.xkcd.com/comics/donald_knuth.png "他的书有点吓人。 从他的天窗下垂下来似乎是最好的选择。")

（他的书有点吓人；从他的天窗下垂下来似乎是最好的选择。）

* * *

## 回答 #88

> 赞同：23
> 
> 时间：2008-09-22T23:54:38.280

[替代文字 http://wondermark.com/comics/352.gif](http://wondermark.com/comics/352.gif)

* * *

## 回答 #89

> 赞同：23
> 
> 时间：2009-12-02T21:32:28.107

你好我最喜欢的是这个

[替代文字 http://curtis.lassam.net/comics/programmers.png](http://curtis.lassam.net/comics/programmers.png)

* * *

## 回答 #90

> 赞同：21
> 
> 时间：2008-09-17T19:46:00.863

[替代文字 http://www.webcomicsnation.com/memberimages/20070107.png](http://www.webcomicsnation.com/memberimages/20070107.png)

* * *

## 回答 #91

> 赞同：21
> 
> 时间：2009-08-05T16:33:51.883

[替代文字 http://www.geekherocomic.com/comics/2009-07-31-points-of-view.png](http://www.geekherocomic.com/comics/2009-07-31-points-of-view.png)

* * *

## 回答 #92

> 赞同：20
> 
> 时间：2008-09-19T22:57:10.940

[替代文字 http://contikistrip.kjempekjekt.com/images/contikistrip3.png](http://contikistrip.kjempekjekt.com/images/contikistrip3.png)

* * *

## 回答 #93

> 赞同：20
> 
> 时间：2008-09-29T02:33:59.163

什么？！没有博士漫画？[看看这个](http://www.phdcomics.com/comics/archive.php?comicid=13)： [alt text http://www.phdcomics.com/comics/archive/phd1112.gif](http://www.phdcomics.com/comics/archive/phd1112.gif)

记住这是1997年！！

还请阅读以下小条... 搞笑！

* * *

## 回答 #94

> 赞同：20
> 
> 时间：2009-07-11T01:11:40.243

我要用这部 1993 年的经典来表明我的年龄：[在互联网上，没有人知道你是条狗。](http://en.wikipedia.org/wiki/On_the_Internet,_nobody_knows_you%27re_a_dog)

![替代文字](https://upload.wikimedia.org/wikipedia/en/f/f8/Internet_dog.jpg)

* * *

## 回答 #95

> 赞同：19
> 
> 时间：2009-06-08T10:05:25.890

[http://www.irregularwebcomic.net/75.html http://www.irregularwebcomic.net/comics/irreg0075.jpg](http://www.irregularwebcomic.net/comics/irreg0075.jpg)

编辑语法：P

* * *

## 回答 #96

> 赞同：19
> 
> 时间：2009-07-02T07:26:15.833

不是直接关于编程的东西，但我想每个程序员都知道流程图 xD

![替代文字](https://imgs.xkcd.com/comics/flow_charts.png)

* * *

## 回答 #97

> 赞同：18
> 
> 时间：2009-02-04T05:31:47.303

[替代文字 http://img183.imageshack.us/img183/1350/pizzasv6.png](http://img183.imageshack.us/img183/1350/pizzasv6.png)

* * *

## 回答 #98

> 赞同：17
> 
> 时间：2008-09-19T19:30:03.137

[http://cache.g4tv.com/images/ttv/graphics/thescreensavers/3546989.jpg](http://cache.g4tv.com/images/ttv/graphics/thescreensavers/3546989.jpg) [替代文字 http://cache.g4tv.com/images/ttv/graphics/thescreensavers/3546989.jpg](http://cache.g4tv.com/images/ttv/graphics/thescreensavers/3546989.jpg)

* * *

## 回答 #99

> 赞同：17
> 
> 时间：2009-03-10T02:19:50.600

[替代文字 http://i40.tinypic.com/12649i1.png](http://i40.tinypic.com/12649i1.png)

* * *

## 回答 #100

> 赞同：17
> 
> 时间：2009-11-17T18:53:42.973

最近开始看极客英雄漫画。到目前为止我最喜欢的部分：

[替代文字 http://www.geekherocomic.com/comics/2008-10-17-How-to-improve-productivity.png](http://www.geekherocomic.com/comics/2008-10-17-How-to-improve-productivity.png) [替代文字 http://www.geekherocomic.com/comics/2008-10-21-The -art-of-programming.png](http://www.geekherocomic.com/comics/2008-10-21-The-art-of-programming.png)

* * *

## 回答 #101

> 赞同：16
> 
> 时间：2008-09-22T23:54:06.147

[替代文字 http://wondermark.com/comics/128.gif](http://wondermark.com/comics/128.gif)

（猜想你必须努力解决 sev 零错误才能得到这个）

* * *

## 回答 #102

> 赞同：15
> 
> 时间：2008-10-03T06:26:18.213

[呆伯特 http://www.laputan.org/images/pictures/elbonia-900406.gif](http://www.laputan.org/images/pictures/elbonia-900406.gif)

这是我在阅读有关反模式时发现的内容。

* * *

## 回答 #103

> 赞同：15
> 
> 时间：2009-02-03T20:47:15.053

[替代文字 http://www.bugbash.net/strips/bug-bash20060227.gif](http://www.bugbash.net/strips/bug-bash20060227.gif)

* * *

## 回答 #104

> 赞同：15
> 
> 时间：2009-02-17T10:41:57.307

这是旧的，我完全不确定权限，我准备删除它。[替代文字 http://img120.imageshack.us/img120/8456/easycfm4.jpg](http://img120.imageshack.us/img120/8456/easycfm4.jpg)

* * *

## 回答 #105

> 赞同：13
> 
> 时间：2009-02-24T14:14:22.793

我认为IT顾问的形象是最好的：

[使用计算机的人有很多空闲时间的原因](http://eviljaymz.com/files/whypeopleseemtohavefreetime.png)

（链接因为图片很大）

* * *

## 回答 #106

> 赞同：12
> 
> 时间：2008-09-22T20:59:53.677

只好把这个放在这里

[http://www.implementingscrum.com/images/070806-scrumtoon.jpg](http://www.implementingscrum.com/images/070806-scrumtoon.jpg)

从[这里](http://www.implementingscrum.com/section/blog/cartoons/)

* * *

## 回答 #107

> 赞同：12
> 
> 时间：2009-04-29T20:24:05.147

你知道你生活在 2009 年的十大理由

1.  你不小心在微波炉上输入了密码。
2.  你已经好几年没用真牌玩过纸牌了。
3.  您有一个包含 15 个电话号码的列表，用于联系您的 3 口之家。
4.  你给在你旁边办公桌上工作的人发电子邮件。
5.  您不与朋友和家人保持联系的原因是他们没有电子邮件地址。
6.  你把车停在自己的车道上，然后用手机查看是否有人在家。
7.  电视上的每个广告在屏幕底部都有一个网站。
8.  离开家时没有带手机，你在生命的前 20 或 30（或 60）年都没有手机，现在是恐慌的原因，你转身去拿它。
9.  您早上起床并在喝咖啡之前上网。
10.  你读到这里，一边点头一边大笑。:)

* * *

## 回答 #108

> 赞同：11
> 
> 时间：2009-10-08T13:45:46.530

![替代文字](https://imgur.com/mmhM7.jpg)

* * *

## 回答 #109

> 赞同：10
> 
> 时间：2008-12-07T17:56:00.783

[你与技术 http://www.weblogcartoons.com/cartoons/you-v-tech.gif](http://www.weblogcartoons.com/cartoons/you-v-tech.gif)

* * *

## 回答 #110

> 赞同：10
> 
> 时间：2009-05-31T01:53:44.670

对于敏捷商店...这太棒了...作为开发人员，它只是说明问题。

非常有趣：[来自 Clark 和 vizdos 的实施 Scrum](http://www.implementingscrum.com/2006/09/11/the-classic-story-of-the-pig-and-chicken/)。

![替代文字](https://i.stack.imgur.com/3PflD.jpg)

* * *

## 回答 #111

> 赞同：10
> 
> 时间：2009-07-07T19:01:39.717

**剧透警告！！！**

![前沿](https://imgs.xkcd.com/comics/cutting_edge.png "我记得在一两年前尝试登录最初的命令与征服服务器时，感觉就像在敲一个鬼城的木板门。")

* * *

## 回答 #112

> 赞同：8
> 
> 时间：2009-06-05T06:18:44.783

![替代文字](https://www.cartoonstock.com/lowres/nfo0131l.jpg)

* * *

## 回答 #113

> 赞同：8
> 
> 时间：2009-08-19T15:04:29.183

[这很可怕，但我无法移开视线。克莱默 http://www.geekherocomic.com/comics/2009-08-19-a-coding-paradox.png](http://www.geekherocomic.com/comics/2009-08-19-a-coding-paradox.png)

* * *

## 回答 #114

> 赞同：7
> 
> 时间：2008-10-02T14:33:58.817

[在Bash.org.ru](http://bash.org/ "Bash.org")上有[Bash.org](http://bash.org.ru "Bash.org.ru")的俄语版本。他们现在所做的就是把最喜欢的引语变成漫画或连环画。这是我最喜欢的一个： [Tester http://s.bash.org.ru/img/67c5y2emi7vwmrnd263759.jpg](http://s.bash.org.ru/img/67c5y2emi7vwmrnd263759.jpg)

1.  我们现在有了一个聪明的测试者——你是什么意思？

2.  他找到了一堆东西……那里有一个有趣的符号，这里有一个奇怪的组合键。他真的很好

3.  不过有时候……真想砸他的脸

网站链接：http: [//bash.org.ru/comics/20080111](http://bash.org.ru/comics/20080111)

* * *

## 回答 #115

> 赞同：7
> 
> 时间：2008-11-06T09:04:18.487

[来自错误狂欢](http://www.bugbash.net/comic/114.html)：

[替代文字 http://www.bugbash.net/strips/bug-bash20070723.gif](http://www.bugbash.net/strips/bug-bash20070723.gif)

* * *

## 回答 #116

> 赞同：7
> 
> 时间：2009-08-11T17:50:27.323

[替代文字 http://www.geekherocomic.com/comics/2009-08-03-hardcoded-limits.png](http://www.geekherocomic.com/comics/2009-08-03-hardcoded-limits.png)

[我可以在周末做 stackoverflow 是](http://blog.bitquabit.com/2009/07/01/one-which-i-call-out-hacker-news/)这部漫画的灵感吗？

* * *

## 回答 #117

> 赞同：6
> 
> 时间：2008-10-16T00:13:08.640

可悲的是，我最喜欢的卡通片太老了，无法在互联网上发布。

来自Datamation。（还记得 Datamation 吗？）一个人坐在办公桌前。到处都是电子产品。瓦砾散落在房间的每个角落。他的脸和头发都被烧焦了。

他在想“以前从来没有这样*过*”。

* * *

## 回答 #118

> 赞同：6
> 
> 时间：2009-03-06T06:10:38.787

[替代文字 http://images.orkut.com/orkut/albums2/ATgAAAB3idBHMFYig7ck6I4oqJ8HtkBHuqkha0UeOIkUaSj8LqiwUPIFIkQVJp2eMtTyQOpxLY3R6XSqqo6vsgv-wURQAJtU9VCzBj_EgcyVWltZNcREVSR-dAV-1w.jpg](http://images.orkut.com/orkut/albums2/ATgAAAB3idBHMFYig7ck6I4oqJ8HtkBHuqkha0UeOIkUaSj8LqiwUPIFIkQVJp2eMtTyQOpxLY3R6XSqqo6vsgv-wURQAJtU9VCzBj_EgcyVWltZNcREVSR-daV-1w.jpg)

* * *

## 回答 #119

> 赞同：6
> 
> 时间：2009-07-02T07:09:37.117

[http://www.qwantz.com/comics/comic2-1512.png](http://www.qwantz.com/index.php?comic=1491)

* * *

## 回答 #120

> 赞同：6
> 
> 时间：2009-09-24T05:38:34.270

```
HAI
CAN HAS STDIO?
I HAS A VAR
IM IN YR LOOP
    UP VAR!!1
    VISIBLE VAR
    IZ VAR BIGGER THAN 10? KTHXBYE
IM OUTTA YR LOOP
KTHXBAI 
```

取自：[http](http://lolcode.com/) : //lolcode.com/KTHXBAI！！

* * *

## 回答 #121

> 赞同：5
> 
> 时间：2008-09-20T04:20:03.753

**康蒂基地带**

挪威一家小型软件公司的漫画。所有文字均为英文。[在http://contikistrip.kjempekjekt.com](http://contikistrip.kjempekjekt.com)上查看

[Contiki Strip http://contikistrip.kjempekjekt.com/images/contikistrip5.png](http://contikistrip.kjempekjekt.com/images/contikistrip5.png) [Contiki Strip http://contikistrip.kjempekjekt.com/images/contikistrip7.png](http://contikistrip.kjempekjekt.com/images/contikistrip7.png)

* * *

## 回答 #122

> 赞同：5
> 
> 时间：2009-06-04T19:59:16.197

[“帮助”其他编程同事](http://www.businesscasualcomic.com/index.php?date=20090422)

* * *

## 回答 #123

> 赞同：5
> 
> 时间：2009-09-25T22:21:44.903

这是我个人最喜欢的……也是我所有 alpha 版本的名称！ [替代文字 http://www.phdcomics.com/comics/archive/phd071009s.gif](http://www.phdcomics.com/comics/archive/phd071009s.gif)

[原始链接](http://www.phdcomics.com/comics/archive.php?comicid=1197)

* * *

## 回答 #124

> 赞同：5
> 
> 时间：2009-10-22T17:49:15.113

![静止的](https://imgs.xkcd.com/comics/static.png "我坚信，如果您佩戴其中一件手腕物品，项目就不会出错。")

* * *

## 回答 #125

> 赞同：4
> 
> 时间：2008-09-19T14:15:01.087

[http://shortminds.com/comics/2008-09-19.jpg](http://shortminds.com/comics/2008-09-19.jpg)

查看[Shortminds.com](http://www.shortminds.com)了解更多信息

* * *

## 回答 #126

> 赞同：4
> 
> 时间：2009-01-08T17:02:04.353

![https://roodiedoodie.files.wordpress.com/2008/01/robots8.jpg](https://roodiedoodie.files.wordpress.com/2008/01/robots8.jpg)

* * *

## 回答 #127

> 赞同：4
> 
> 时间：2009-05-03T10:24:54.273

[数学漫画](http://catb.org/jargon/html/M/math-out.html#crunchly73-05-18)怎么样？

[替代文字 http://catb.org/jargon/html/graphics/73-05-18.png](http://catb.org/jargon/html/graphics/73-05-18.png)

* * *

## 回答 #128

> 赞同：3
> 
> 时间：2008-09-19T17:04:13.440

[http://hackles.org/cgi-bin/archives.pl?request=75](http://hackles.org/cgi-bin/archives.pl?request=75) [Hackles http://hackles.org/strips/cartoon75.png](http://hackles.org/strips/cartoon75.png)

* * *

## 回答 #129

> 赞同：3
> 
> 时间：2009-08-11T03:41:09.660

**巴贝奇和洛夫莱斯VS客户**

*包括历史注释*

*   [第1部分](http://sydneypadua.com/2dgoggles/babbage-and-lovelace-vs-the-client/)
*   [第2部分](http://sydneypadua.com/2dgoggles/lovelace-and-babbage-vs-the-client-pt-2/)

* * *

## 回答 #130

> 赞同：1
> 
> 时间：2009-10-19T15:56:16.243

[替代文字 http://img17.imageshack.us/img17/879/billgateslastmoments.jpg](http://img17.imageshack.us/img17/879/billgateslastmoments.jpg)

* * *

## 回答 #131

> 赞同：0
> 
> 时间：2008-09-18T10:09:54.547

![替代文字](https://photos1.blogger.com/blogger2/1715/1669/1600/larson-oct-1987.gif)

这是来自[Steve Yegge 谈论 Java 的冗长](http://steve-yegge.blogspot.com/2006/10/egomania-itself.html)。

* * *

## 回答 #132

> 赞同：-2
> 
> 时间：2008-11-25T17:12:00.970

[http://wondermark.com/c/2008-11-25-464forgot.gif](http://wondermark.com/c/2008-11-25-464forgot.gif)

* * *

## 回答 #133

> 赞同：-2
> 
> 时间：2009-05-09T08:26:40.850

*我们在其中讨论了看似已不存在的[标准输出](http://standardout.blogspot.com/)*的计算机科学和编程架构的哲学*：*

 *[我们在其中讨论了计算机科学和编程架构的哲学 http://lh3.ggpht.com/tremendotron/SKFBIbEccOI/AAAAAAAAAI0/qOTa3XJZHho/in%20which%20we%20discuss%20.jpg](http://lh3.ggpht.com/tremendotron/SKFBIbEccOI/AAAAAAAAAI0/qOTa3XJZHho/in%20which%20we%20discuss%20.jpg)

* * *

## 回答 #134

> 赞同：-6
> 
> 时间：2008-12-09T12:20:00.273

对于那些在埃森哲工作过的人，www.bigtimeconsulting.com 有一些很棒的...

这里仅仅是少数：

[大胆的新变化](http://www.bigtimeconsulting.com/?toon_id=85)

[建议](http://www.bigtimeconsulting.com/?toon_id=88)

[晚餐](http://www.bigtimeconsulting.com/?toon_id=94)

[打了就跑](http://www.bigtimeconsulting.com/?toon_id=102)

[技术支持](http://www.bigtimeconsulting.com/?toon_id=119)

[退出者](http://www.bigtimeconsulting.com/?toon_id=124)

* * *

## 回答 #135

> 赞同：-29
> 
> 时间：2008-09-17T16:57:07.540

![替代文字](https://i.somethingawful.com/jeffk/computarfunnys/4-17-00-02.gif)

# sql-server - 数据源锁定时如何部署 SQL Reporting 2005？

> ID：84583
> 
> 赞同：2
> 
> 时间：2008-09-17T15:36:44.363
> 
> 标签：sql-server, visual-studio, reporting-services

这里的 DBA 维护所有 SQL Server 和 SQL 报告服务器。我在 Visual Studio 中有一个自定义开发的 SQL Reporting 2005 项目，该项目在我的本地 SQL 数据库和报告实例上运行良好。我需要部署到生产服务器，所以我在 SQL Reporting 2005 服务器上创建了一个具有上传文件权限的文件夹。通常，只需从 Visual Studio 中进行部署即可上传报告文件。

但是，出于安全目的，数据源由 DBA 明确维护，并存储在报告服务器上单独的锁定公用文件夹中。我让他们为我创建数据源。

当我尝试从 VS 部署时，它给了我错误

> 项目“/数据源”已存在。

无论我是部署整个项目还是仅部署一个报告文件，我都会明白这一点。我已经`OverwriteDataSources=false`在项目属性中设置了。TargetServer URL 和文件夹已验证正确。

我想我可以手动复制文件，但我希望能够从 VS 中进行部署。我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-01T03:08:35.303

将一个名为 ConnectionString 的字符串参数添加到您的报告中并保存。接下来，在文本编辑器中打开您的 RDL 并像这样更改数据源定义。

```
 <DataSources>
    <DataSource Name="preserve the datasource name you've been using">
      <ConnectionProperties>
        <DataProvider>SQL</DataProvider>
        <ConnectString>=Parameters!ConnectionString.Value</ConnectString>
      </ConnectionProperties>
      <rd:DataSourceID>preserve your existing GUID</rd:DataSourceID>
    </DataSource>
  </DataSources> 
```

您现在会发现可以将数据库连接字符串作为报告参数传入。请注意不要向您的 DBA 提及这一点，因为 SSRS 安全系统中没有对此进行控制的规定，当他们发现笼门不仅打开，而且无法关闭时，他们会完全发疯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-23T13:25:26.677

如果数据源上的属性不允许您覆盖数据源，您将收到警告。但是，应该部署项目或报告的其余部分。检查报告的属性，我认为您会发现它是当前版本。这只是一个警告，这对您的报表部署并不致命。

如果您的部署由于数据源的某些安全问题而失败，则将其删除，并且应该部署项目的其余部分。即使您在数据源上遇到错误，VS 也会部署报告或模型。如果项目仍然无法部署，那么问题不在于您的数据源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-23T17:46:30.987

原谅线程死灵法，但这就是谷歌提出的。

虽然我不能相信答案，但我怀疑这是实际发生的事情 [http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/33423ef3-4a28-4c1d-aded-eac33770659d](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/33423ef3-4a28-4c1d-aded-eac33770659d)

我遇到了同样的问题，我的 DBA 现在正在设置我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T16:20:28.800

您是否检查了将 OverwriteDataSource 项目属性设置设置为 False 的配置？默认配置为 Active(DebugLocal)，但您可能必须将 OverwriteDataSource 设置设置为 False 以用于其他配置，例如生产。您可以使用所有配置将所有部署的 OverwriteDataSource 设置强制为 False。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-23T17:50:41.803

这应该只是一个警告（我们在我的商店也有同样的情况）。我可以想象这会导致错误的唯一方法是，如果您将 Visual Studio 设置为将警告视为错误（然后由于错误而不会部署）。如果已设置，请尝试更改此选项。

# c# - 使用 ASP.NET 2.0 / C# 的错误处理报告方法

> ID：84587
> 
> 赞同：2
> 
> 时间：2008-09-17T15:36:54.270
> 
> 标签：c#, asp.net

有谁知道开源模块或处理应用程序错误并将它们通过电子邮件发送给管理员和/或保存到数据库的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T15:39:06.060

[ELMAH](http://code.google.com/p/elmah/)是一个很好的插件工具。bin 目录中的 DLL，以及一些要添加到 web.config 的标记，您就完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T15:39:33.937

[log4net](http://logging.apache.org/log4net/index.html)可以将错误保存到数据库或发送电子邮件。我们在我的工作中使用它（尽管它在 SO 测试版中给 Jeff Atwood 带来了很大的压力）。在 Application Error 方法中捕获 global.asax 页面中的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:39:21.207

您应该查看 global.asax 页面中的 application_error 方法以捕获错误，并查看 log4net 和企业库以您选择的任何形式（例如数据库或电子邮件）将这些错误记录到您选择的任何提供商。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T15:40:29.643

log4net 是开源的，相当容易学习，并且可以很容易地配置为记录到多个源（文件、电子邮件、数据库、事件日志）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T15:41:02.497

[CALM](http://www.nov8r.com/calm.aspx)可以做到这一点以及更多。它不是免费的或开源的，但价格便宜且全面。

警告：我是 CALM 的作者

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T15:45:13.423

MS 企业库肯定提供了这个功能。它有一点学习曲线，但是一旦设置好，就很容易维护。它还提供了几种不同的日志记录源，但不是开源的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T15:45:30.257

我也有一个免费提供程序，可从[我的网站](http://www.iowacomputergurus.com)获得，它是用于错误处理的解决方案。

# sql - 如果执行更改操作，保持分页可重复

> ID：84615
> 
> 赞同：1
> 
> 时间：2008-09-17T15:38:44.640
> 
> 标签：sql, pagination

如果想要对支持分页的数据源的结果进行分页，我们必须执行以下流程：

1.  定义页面大小——即每页显示的结果数量；
2.  使用偏移量 = 页码（基于 0）* 页面大小获取用户请求的每个页面
3.  显示获取页面的结果。

所有这一切都很好，没有考虑到一个操作可能会影响后端系统，从而搞砸正在发生的分页。我说的是有人在页面获取或删除数据之间插入数据。

```
page_size = 10;
get page 0 -> results from 0 to 9;
user inserts a record that due to the query being executed goes to page 0 - the one just shown;
get page 1 -> results from 10 to 19 - the first results on the page is the result on the old page 0. 
```

所描述的行为可能会引起观众的困惑。您知道解决此问题的任何实用解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T15:42:18.937

有一些思想流派。

1.  数据得到更新，顺其自然
2.  您可以实现某种缓存方法来保存整个结果集（如果使用非常大的数据集，这可能不是一个选项）
3.  您可以对每个页面操作进行比较，并在总记录数发生变化时通知用户

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T15:47:22.967

如果您关心的更新主要是新插入（例如，StackOverflow 本身在分页问题和新问题时似乎遇到了这个问题），处理它的一种方法是在发出第一个分页查询时捕获时间戳，然后将后续页面的请求结果限制为在该时间戳之前存在的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T16:49:09.167

只要用户明白底层数据一直在变化，他们就不会感到困惑。因此，只需以简单的方式进行即可。

您可以缓存结果的前几页并将其用于后续视图，但是结果将与数据库不同步，这更加令人困惑。

# c++ - 将 EXE 数据传递给一个或多个 DLL

> ID：84626
> 
> 赞同：1
> 
> 时间：2008-09-17T15:39:37.930
> 
> 标签：c++, windows, visual-studio-2008, dll, windows-xp

我们当前的应用程序是一个包含多个页面的单个 OpenGL EXE。EXE 负责访问通过 UDP 通过网络发送的数据。它累积数据并将其存储在许多单例结构中。EXE 中的各个页面访问单例结构以按照它们认为合适的方式处理数据。

为了减轻我们的 EXE 占用空间并支持我们在配置管理方面的尝试，我们决定将页面拆分为一个单独的 DLL，EXE 将加载该 DLL。我们的目的是让 EXE 成为加载 DLL 页面的 shell。EXE 仍将承担所有通信职责（UDP、Corba、用户等）。这些页面仍将负责显示它们所做的任何事情。

问题（最终）变成了：如何将这些从 EXE 收集的无数数据传递到基于 DLL 的消费页面。单例概念不再成立，因为我们使用的单例 (ACE_Singleton) 不允许这种级别的方向。我们可以整天将单例从 DLL 导出到消耗的 EXE，但我还没有弄清楚相反的情况。我想出了以下选项-我都不喜欢，所以我希望那里的人会有更好的选择:)

1.  将当前存储在单独单例中的所有数据包装到另一个 DLL 中，该 DLL 将导出“真正的”单例。例如。从 DLL 导出的单例将是相同的 - 无论 EXE 加载了什么 - 有点像共享内存。这是一个有趣的选择，但会导致我们的部署方案出现问题。如果人们真的被这个想法迷住了，我可以详细讨论这些问题。
2.  创建一个包含所有相关数据的静态 DLL 级结构。EXE 会在 DLL 加载时将此数据下推到 DLL，以便 DLL 中包含的页面可以访问数据。这似乎是最简单的解决方案——即使它需要编辑我们应用程序中的每一页——超过 100 个。它也似乎有点草率。所有数据都在一个全局范围内。也不是很性感或 C++y。

那么，还有其他人有解决这个问题的方法吗？

该应用程序使用 Visual C++ 9.0 (VisualStudio 2008) 编写，可在 Windows XP 上使用。出于某种原因，我们的实验室还不支持 Vista——即使我们的客户正在使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-01T10:30:41.623

给所有的 DLL 一个函数 SetGlobalDataPointer(Singleton*)。您的 EXE 在调用任何其他 DLL 函数之前调用此函数。在 DLL 代码中，替换所有出现的单例。通过SingletonPtr->

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T16:07:47.847

在您尝试分解 EXE 之前，您应该阅读内存管理和 DLL。

这是一篇讨论 CRT 对象问题的文章，但同样的事情也适用于您自己的 C++ 对象。

[跨 DLL 边界传递 CRT 对象的潜在错误](http://msdn.microsoft.com/en-us/library/ms235460(VS.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T15:57:38.977

您可以：

*   把除了最外层的所有东西都放到一个“通用”DLL中；
*   使用 DEF 文件从您的 EXE 生成导出函数。

第二种非常少见，但可以仅从 DEF 文件生成导入库。使用 LIB /DEF 生成导入库。请参阅[使用导入库和导出文件](http://msdn.microsoft.com/en-us/library/f0z8kac4(VS.85).aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T15:58:14.390

不幸的是，听起来您有很多现有的代码需要修改。在那种情况下，我会选择（2），假设它不会变得太大和笨重。

根据您的描述，听起来 EXE 级别的数据只需要在 DLL 加载时发送一次。

如果 (2) 太混乱，我会对其进行一些重构，使其具有带有 Serialize/UnSerialize() 函数的基本“DLLPage”类。永远不要导出类本身，只导出你需要的单个函数（随着类的变化，这很有帮助......类级导出会发生非常奇怪的中断）。您将需要构造函数/析构函数，可能还需要每个公共成员。

可能存在一些堆管理问题，所以我也喜欢重载 new/delete 并让所有类使用位于帮助 DLL 中的集中式 new/delete。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-01-13T19:04:31.397

第一个选项：将 exe 保存的所有数据放在共享内存中。只要您有适当的锁定，dll 就可以愉快地访问它。

第二种选择：使用导出的函数指针将内存转移到 dll - exe 有一个函数，dll 调用 exe 中的另一个函数，该函数将这个函数作为指针返回，然后 dll 可以调用该函数。该导出函数可以将数据作为堆栈上的正常结构传输。

第三个选项：如果您使用相同的运行时，只需导出一个指针，让您可以直接访问内存。

# php - 如何使用 COM 从 PHP/IIS 读取 Active Directory 组成员身份？

> ID：84641
> 
> 赞同：1
> 
> 时间：2008-09-17T15:40:25.820
> 
> 标签：php, iis, com, adsi

我有以下代码：

```
$bind = new COM("LDAP://CN=GroupName,OU=Groups,OU=Division,DC=company,DC=local"); 
```

当我从命令提示符执行它时，它运行良好。当它在 IIS/PHP/ISAPI 下运行时，它会报错。

```
Fatal error: Uncaught exception 'com_exception' with message 'Failed to create COM object `LDAP://CN=...[cut]...,DC=local':
An operations error occurred. ' in index.php
Stack trace:
  #0 index.php: com->com('LDAP://CN=...')
  #1 {main} thrown 
```

IIS 配置为 Windows 身份验证（无匿名、无基本、无摘要），我以与命令提示符相同的用户身份连接。我在 IIS 日志文件或事件日志中找不到任何特定错误。

本练习的主要目的是避免在我的脚本中保留用户凭据并依靠 IIS 身份验证将它们传递到活动目录。我知道您可以使用 LDAP 来完成同样的事情，但据我所知，无法传递凭据。

也许它在某种程度上与我尝试将其移植到 ASP 时遇到的错误有关。我收到错误 80072020（我目前正在查找）。

事件日志没有显示任何异常。没有警告，没有错误。启用了完整的安全审核（安全策略中每个项目的成功和失败），并且它显示我针对网页进行身份验证的每个用户的成功 Windows 登录（这是预期的。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T15:59:22.577

由于您在 IIS 中使用 Windows 身份验证，因此 Windows 事件日志中可能有一些安全事件。我会检查安全事件和应用程序事件的事件日志，看看您是否遇到任何类型的权限问题。

此外，由于您基本上只是通过 LDAP 与 AD 通信……您可能会考虑使用 PHP 的本地 LDAP 库而不是 COM。

您可能必须在 php.ini 中启用扩展。大概值得一看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T17:34:59.557

它现在似乎正在工作。

我为 Active Directory 中的计算机对象启用了“信任此计算机进行委派”。通常 IIS 不能在没有启用委派信任的情况下对您进行身份验证，然后在网络上模拟您（在我的情况下，通过域控制器查询 Active Directory）。

您只需确保它使用 Kerberos 进行身份验证，而不是 NTLM 或其他一些摘要身份验证，因为不信任摘要用作模拟令牌。

它修复了我的 PHP 和 ASP 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T16:03:43.910

好吧，如果你想使用 LDAP，让我指出我们用于 Maia Mailguard 的 LDAP 身份验证代码：查找名为[lauth_ldap的函数](https://www.maiamailguard.com/maia/browser/branches/1.0/php/auth.php)

我认为它需要 ldap 版本 3，因此您必须为 ldap 设置该参数。为了验证密码，我们使用 ldap 绑定函数让 ldap 服务器进行身份验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T16:14:11.670

我不是 AD/COM/IIS 专家，但这可能是权限问题。例如，IUSR_computername 用户在目录中没有适用的访问权限，或者您没有绑定为特定用户？

对我来说警钟是它从命令行运行正常（例如使用您的权限运行）但在 IIS 上失败（例如不是您的权限）。

# java - Hibernate Query By Example 和 Projections

> ID：84644
> 
> 赞同：23
> 
> 时间：2008-09-17T15:40:33.420
> 
> 标签：java, hibernate, criteria, projection

简而言之：hibernate 不支持投影和示例查询？我找到了这篇文章：

代码是这样的：

```
User usr = new User();
usr.setCity = 'TEST';
getCurrentSession().createCriteria(User.class)
.setProjection( Projections.distinct( Projections.projectionList()
.add( Projections.property("name"), "name")
.add( Projections.property("city"), "city")))
.add( Example.create(usr)) 
```

就像另一张海报说的那样，生成的 sql 一直有一个 where 类只**引用 y0_= ？而不是 this_.city**。

我已经尝试了几种方法，并搜索了问题跟踪器，但一无所获。

我什至尝试使用投影别名和变形金刚，但它不起作用：

```
User usr = new User();
usr.setCity = 'TEST';
getCurrentSession().createCriteria(User.class)
.setProjection( Projections.distinct( Projections.projectionList()
.add( Projections.property("name"), "name")
.add( Projections.property("city"), "city")))
.add( Example.create(usr)).setResultTransformer(Transformers.aliasToBean(User.class)); 
```

有没有人通过示例使用预测和查询？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-06-06T18:41:58.247

当您有一个与 objects 属性同名的别名时，问题似乎就会发生。Hibernate 似乎选择了别名并在 sql 中使用它。[我在此处](http://opensource.atlassian.com/projects/hibernate/browse/HHH-3371;jsessionid=aLJbC8zJhKhanJbr49?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel)和[此处](https://forum.hibernate.org/viewtopic.php?t=988049)找到了此文档，并且我认为这是 Hibernate 中的一个错误，尽管我不确定 Hibernate 团队是否同意。

无论哪种方式，我都找到了一个简单的解决方法，适用于我的情况。你的旅费可能会改变。详细信息如下，我试图简化此示例的代码，因此我对任何错误或错字表示歉意：

```
Criteria criteria = session.createCriteria(MyClass.class)
    .setProjection(Projections.projectionList()
        .add(Projections.property("sectionHeader"), "sectionHeader")
        .add(Projections.property("subSectionHeader"), "subSectionHeader")
        .add(Projections.property("sectionNumber"), "sectionNumber"))
    .add(Restrictions.ilike("sectionHeader", sectionHeaderVar)) // <- Problem!
    .setResultTransformer(Transformers.aliasToBean(MyDTO.class)); 
```

会产生这个sql：

```
select
    this_.SECTION_HEADER as y1_,
    this_.SUB_SECTION_HEADER as y2_,
    this_.SECTION_NUMBER as y3_,
from
    MY_TABLE this_ 
where
    ( lower(y1_) like ? ) 
```

导致错误：*java.sql.SQLException: ORA-00904: "Y1_": invalid identifier*

**但是，当我将限制更改为使用“this”时，如下所示：**

```
Criteria criteria = session.createCriteria(MyClass.class)
    .setProjection(Projections.projectionList()
        .add(Projections.property("sectionHeader"), "sectionHeader")
        .add(Projections.property("subSectionHeader"), "subSectionHeader")
        .add(Projections.property("sectionNumber"), "sectionNumber"))
    .add(Restrictions.ilike("this.sectionHeader", sectionHeaderVar)) // <- Problem Solved!
    .setResultTransformer(Transformers.aliasToBean(MyDTO.class)); 
```

它产生了以下sql，我的问题得到了解决。

```
select
    this_.SECTION_HEADER as y1_,
    this_.SUB_SECTION_HEADER as y2_,
    this_.SECTION_NUMBER as y3_,
from
    MY_TABLE this_ 
where
    ( lower(this_.SECTION_HEADER) like ? ) 
```

就是这样！一个非常简单的解决一个痛苦的问题。我不知道此修复程序如何通过示例问题转化为查询，但它可能会让您更接近。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-17T19:34:29.767

我可以看看你的用户类吗？这只是使用下面的限制。我不明白为什么 Restrictions 与 Example 有任何不同（我认为 null 字段在示例中默认被忽略）。

```
getCurrentSession().createCriteria(User.class)
.setProjection( Projections.distinct( Projections.projectionList()
.add( Projections.property("name"), "name")
.add( Projections.property("city"), "city")))
.add( Restrictions.eq("city", "TEST")))
.setResultTransformer(Transformers.aliasToBean(User.class))
.list(); 
```

我从未使用过 alaistToBean，但我只是读过它。你也可以只循环结果..

```
List<Object> rows = criteria.list();
for(Object r: rows){
  Object[] row = (Object[]) r;
  Type t = ((<Type>) row[0]);
} 
```

如果必须，您可以通过这种方式自己手动填充用户。

如果没有更多信息来诊断问题，就很难调查这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-09-15T17:42:46.880

这里真正的问题是hibernate中有一个错误，它在where子句中使用了选择列表别名：

[http://opensource.atlassian.com/projects/hibernate/browse/HHH-817](http://opensource.atlassian.com/projects/hibernate/browse/HHH-817)

万一有人来这里寻找答案，去看看票。修复花了 5 年时间，但理论上它会在下一个版本中出现，然后我怀疑你的问题会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-10T16:07:38.527

我面临着类似的问题。我正在使用按示例查询，我想按自定义字段对结果进行排序。在 SQL 中，我会执行以下操作：

```
select pageNo, abs(pageNo - 434) as diff
from relA
where year = 2009
order by diff 
```

没有 order-by-clause 可以正常工作。我得到的是

```
Criteria crit = getSession().createCriteria(Entity.class);
crit.add(exampleObject);
ProjectionList pl = Projections.projectionList();
pl.add( Projections.property("id") );
pl.add(Projections.sqlProjection("abs(`pageNo`-"+pageNo+") as diff", new String[] {"diff"}, types ));
crit.setProjection(pl); 
```

但是当我添加

```
crit.addOrder(Order.asc("diff")); 
```

我得到一个*org.hibernate.QueryException: could not resolve property: diff*异常。解决*此*问题的方法也不起作用。

PS：由于我找不到任何关于使用 QBE for Hibernate 的详细文档，以上所有内容主要是试错法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-13T15:11:08.050

```
ProjectionList pl = Projections.projectionList();
pl.add(Projections.property("id"));
pl.add(Projections.sqlProjection("abs(`pageNo`-" + pageNo + ") as diff", new String[] {"diff"}, types ), diff); ---- solution
crit.addOrder(Order.asc("diff"));
crit.setProjection(pl); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2011-07-11T08:11:08.127

我真的不这么认为，我能找到的是“这个”这个词。导致休眠在其查询中不包含任何限制，这意味着它获得了所有记录列表。关于报告的休眠错误，我可以看到它已报告为已修复，但我完全无法下载补丁。

# oracle - 如何避免 PLSQ 中未使用参数的警告？

> ID：84661
> 
> 赞同：2
> 
> 时间：2008-09-17T15:41:59.843
> 
> 标签：oracle, plsql, parameters, function

有时，在 PL SQL 中，您希望将参数添加到包、函数或过程中，以便为将来的功能做好准备。例如：

```
create or replace function doGetMyAccountMoney( Type_Of_Currency IN  char := 'EUR')   return number 
is
  Result number(12,2);
begin
 Result := 10000;  
IF char <> 'EUR' THEN
   -- ERROR NOT IMPLEMENTED YET
  END IF;  
    return(Result);
end doGetMyAccountMoney;also 
```

它可能会导致很多警告，例如

```
Compilation errors for FUNCTION APPUEMP_PRAC.DOGETMYACCOUNTMONEY
Error: Hint: Parameter 'Currency' is declared but never used in 'doGetMyAccountMoney'
Line: 1 
```

避免这些警告的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T15:57:56.153

我相信这是由参数 PLSQL_WARNINGS 控制的，这里记录了 10gR2：http: [//download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams166.htm#REFRN10249](http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams166.htm#REFRN10249)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T23:53:36.370

如果您无法更改警告级别，您只需将参数值绑定到一个虚拟值并记录它们以供将来使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T15:46:41.873

好吧，您的示例有几个错误。最重要的是，您需要在 IF 语句中将“char”更改为“Currency”；据我所知，这也可以避免警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T23:43:29.297

禁用非严重 PL/SQL 警告：

```
ALTER SESSION SET PLSQL_WARNINGS='ENABLE:SEVERE'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T15:45:15.437

那么，您确定您在该声明中具有正确顺序的名称和权利吗？

它抱怨一个名为“货币”的参数，但您实际上并没有使用它，是吗？

另一方面，您正在使用一种叫做*char*的东西，那是什么？

或者也许我对 PL/SQL 的了解还很遥远，如果是这样，请发表评论，我将删除它。

# serialization - 了解 Ada 如何序列化记录

> ID：84677
> 
> 赞同：5
> 
> 时间：2008-09-17T15:43:50.040
> 
> 标签：serialization, record, binaryfiles, ada

当我在 Ada 中调用 Write 以序列化记录时，我希望能够预测生成的二进制文件中的内容。你知道我在哪里可以查到这个吗？

我有一些旧版 Ada 软件通过写入记录来生成二进制文件，我需要调试一个应该编写兼容二进制文件的 C++ 程序。所以，我想了解 Ada 在序列化记录时遵循的规则，以便我可以确保 C++ 代码将生成功能等效的记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-25T23:29:54.310

'Write 的序列化输出的格式与表示子句*完全无关。*

默认情况下，编译器将使用标准未定义的翻译方案，按照它们在记录声明中的写入顺序输出没有对齐填充的记录组件（因此您可能无法获得编译器之间的互操作性）。GNAT（GCC Ada 编译器）以整数字节输出每个组件。

如果您想使用某种不同的格式流式传输类型的值，您可以覆盖 'Write for the type. 作为一个不寻常的示例，您可以流式传输到 XML。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T16:20:11.980

基本上，编译器将对记录类型的组件重新排序，除非您对记录类型使用 pragma PACK 或 pragma PRESERVE_LAYOUT 命令。此外，编译器将填充对象以保持记录组件的对齐。组件如下：

整数：8、16 或 32 位二进制补码有符号数

浮点数：32 位 IEEE 格式

Long_Float：64 位 IEEE 格式

定点：8、16 或 32 位；但是，指定的范围和增量可能会影响 16 或 32

枚举：整数，通常第一个元素用0表示

布尔值：枚举对象，8 位长，LSB 存储值：0 = false，1 = true

字符：枚举对象，8 位长，无符号 0 到 127

访问类型：32位，32位值为0代表NULL

数组：以行优先顺序连续存储，大小取决于基本类型。数组被填充以确保所有元素都对其类型具有正确的对齐方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T22:19:53.410

正如其他人所提到的，如果没有额外的指令，编译器将自行决定记录布局。最好的方法是更改​​原始代码以使用特定布局编写记录。特别是，[记录表示子句](http://adahome.com/rm95/rm9x-13-05-01.html)允许 Ada 程序员准确地指定记录的物理布局。实际上，您应该检查原始代码是否具有相关类型的其中之一。如果是这样，那么这将准确回答您的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-17T16:06:24.060

[Ada95 语言参考手册](http://archive.adaic.com/standards/ada95.html)说（第13.13.2 节）：

“对于基本类型，流元素的表示是实现定义的。对于复合类型，每个组件的写入或读取属性以规范顺序调用。组件的规范顺序是数组的最后一个维度变化最快，并且记录的位置汇总订单。”

# java - 如何使用 Spring Security 对 Active Directory 服务器进行身份验证？

> ID：84680
> 
> 赞同：31
> 
> 时间：2008-09-17T15:44:00.353
> 
> 标签：java, spring, active-directory, ldap

我正在编写一个需要用户登录的 Spring Web 应用程序。我的公司有一台 Active Directory 服务器，我想将其用于此目的。但是，我无法使用 Spring Security 连接到服务器。

我正在使用 Spring 2.5.5 和 Spring Security 2.0.3，以及 Java 1.6。

如果我将 LDAP URL 更改为错误的 IP 地址，它不会抛出异常或任何东西，所以我想知道它是否开始*尝试*连接到服务器。

尽管 Web 应用程序启动得很好，但我在登录页面中输入的任何信息都会被拒绝。我以前使用过一个 InMemoryDaoImpl，它工作得很好，所以我的应用程序的其余部分似乎配置正确。

这是我与安全相关的 bean：

```
 <beans:bean id="ldapAuthProvider" class="org.springframework.security.providers.ldap.LdapAuthenticationProvider">
    <beans:constructor-arg>
      <beans:bean class="org.springframework.security.providers.ldap.authenticator.BindAuthenticator">
        <beans:constructor-arg ref="initialDirContextFactory" />
        <beans:property name="userDnPatterns">
          <beans:list>
            <beans:value>CN={0},OU=SBSUsers,OU=Users,OU=MyBusiness,DC=Acme,DC=com</beans:value>
          </beans:list>
        </beans:property>
      </beans:bean>
    </beans:constructor-arg>
  </beans:bean>

  <beans:bean id="userDetailsService" class="org.springframework.security.userdetails.ldap.LdapUserDetailsManager">
    <beans:constructor-arg ref="initialDirContextFactory" />
  </beans:bean>

  <beans:bean id="initialDirContextFactory" class="org.springframework.security.ldap.DefaultInitialDirContextFactory">
    <beans:constructor-arg value="ldap://192.168.123.456:389/DC=Acme,DC=com" />
  </beans:bean> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-09-17T18:54:15.230

我有同样的撞墙体验，最终编写了一个自定义身份验证提供程序，对 Active Directory 服务器执行 LDAP 查询。

所以我与安全相关的 bean 是：

```
<beans:bean id="contextSource"
    class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
    <beans:constructor-arg value="ldap://hostname.queso.com:389/" />
</beans:bean>

<beans:bean id="ldapAuthenticationProvider"
    class="org.queso.ad.service.authentication.LdapAuthenticationProvider">
    <beans:property name="authenticator" ref="ldapAuthenticator" />
    <custom-authentication-provider />
</beans:bean>

<beans:bean id="ldapAuthenticator"
    class="org.queso.ad.service.authentication.LdapAuthenticatorImpl">
    <beans:property name="contextFactory" ref="contextSource" />
    <beans:property name="principalPrefix" value="QUESO\" />
</beans:bean> 
```

然后是 LdapAuthenticationProvider 类：

```
/**
 * Custom Spring Security authentication provider which tries to bind to an LDAP server with
 * the passed-in credentials; of note, when used with the custom {@link LdapAuthenticatorImpl},
 * does <strong>not</strong> require an LDAP username and password for initial binding.
 * 
 * @author Jason
 */
public class LdapAuthenticationProvider implements AuthenticationProvider {

    private LdapAuthenticator authenticator;

    public Authentication authenticate(Authentication auth) throws AuthenticationException {

        // Authenticate, using the passed-in credentials.
        DirContextOperations authAdapter = authenticator.authenticate(auth);

        // Creating an LdapAuthenticationToken (rather than using the existing Authentication
        // object) allows us to add the already-created LDAP context for our app to use later.
        LdapAuthenticationToken ldapAuth = new LdapAuthenticationToken(auth, "ROLE_USER");
        InitialLdapContext ldapContext = (InitialLdapContext) authAdapter
                .getObjectAttribute("ldapContext");
        if (ldapContext != null) {
            ldapAuth.setContext(ldapContext);
        }

        return ldapAuth;
    }

    public boolean supports(Class clazz) {
        return (UsernamePasswordAuthenticationToken.class.isAssignableFrom(clazz));
    }

    public LdapAuthenticator getAuthenticator() {
        return authenticator;
    }

    public void setAuthenticator(LdapAuthenticator authenticator) {
        this.authenticator = authenticator;
    }

} 
```

然后是 LdapAuthenticatorImpl 类：

```
/**
 * Custom Spring Security LDAP authenticator which tries to bind to an LDAP server using the
 * passed-in credentials; does <strong>not</strong> require "master" credentials for an
 * initial bind prior to searching for the passed-in username.
 * 
 * @author Jason
 */
public class LdapAuthenticatorImpl implements LdapAuthenticator {

    private DefaultSpringSecurityContextSource contextFactory;
    private String principalPrefix = "";

    public DirContextOperations authenticate(Authentication authentication) {

        // Grab the username and password out of the authentication object.
        String principal = principalPrefix + authentication.getName();
        String password = "";
        if (authentication.getCredentials() != null) {
            password = authentication.getCredentials().toString();
        }

        // If we have a valid username and password, try to authenticate.
        if (!("".equals(principal.trim())) && !("".equals(password.trim()))) {
            InitialLdapContext ldapContext = (InitialLdapContext) contextFactory
                    .getReadWriteContext(principal, password);

            // We need to pass the context back out, so that the auth provider can add it to the
            // Authentication object.
            DirContextOperations authAdapter = new DirContextAdapter();
            authAdapter.addAttributeValue("ldapContext", ldapContext);

            return authAdapter;
        } else {
            throw new BadCredentialsException("Blank username and/or password!");
        }
    }

    /**
     * Since the InitialLdapContext that's stored as a property of an LdapAuthenticationToken is
     * transient (because it isn't Serializable), we need some way to recreate the
     * InitialLdapContext if it's null (e.g., if the LdapAuthenticationToken has been serialized
     * and deserialized). This is that mechanism.
     * 
     * @param authenticator
     *          the LdapAuthenticator instance from your application's context
     * @param auth
     *          the LdapAuthenticationToken in which to recreate the InitialLdapContext
     * @return
     */
    static public InitialLdapContext recreateLdapContext(LdapAuthenticator authenticator,
            LdapAuthenticationToken auth) {
        DirContextOperations authAdapter = authenticator.authenticate(auth);
        InitialLdapContext context = (InitialLdapContext) authAdapter
                .getObjectAttribute("ldapContext");
        auth.setContext(context);
        return context;
    }

    public DefaultSpringSecurityContextSource getContextFactory() {
        return contextFactory;
    }

    /**
     * Set the context factory to use for generating a new LDAP context.
     * 
     * @param contextFactory
     */
    public void setContextFactory(DefaultSpringSecurityContextSource contextFactory) {
        this.contextFactory = contextFactory;
    }

    public String getPrincipalPrefix() {
        return principalPrefix;
    }

    /**
     * Set the string to be prepended to all principal names prior to attempting authentication
     * against the LDAP server.  (For example, if the Active Directory wants the domain-name-plus
     * backslash prepended, use this.)
     * 
     * @param principalPrefix
     */
    public void setPrincipalPrefix(String principalPrefix) {
        if (principalPrefix != null) {
            this.principalPrefix = principalPrefix;
        } else {
            this.principalPrefix = "";
        }
    }

} 
```

最后，LdapAuthenticationToken 类：

```
/**
 * <p>
 * Authentication token to use when an app needs further access to the LDAP context used to
 * authenticate the user.
 * </p>
 * 
 * <p>
 * When this is the Authentication object stored in the Spring Security context, an application
 * can retrieve the current LDAP context thusly:
 * </p>
 * 
 * <pre>
 * LdapAuthenticationToken ldapAuth = (LdapAuthenticationToken) SecurityContextHolder
 *      .getContext().getAuthentication();
 * InitialLdapContext ldapContext = ldapAuth.getContext();
 * </pre>
 * 
 * @author Jason
 * 
 */
public class LdapAuthenticationToken extends AbstractAuthenticationToken {

    private static final long serialVersionUID = -5040340622950665401L;

    private Authentication auth;
    transient private InitialLdapContext context;
    private List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();

    /**
     * Construct a new LdapAuthenticationToken, using an existing Authentication object and
     * granting all users a default authority.
     * 
     * @param auth
     * @param defaultAuthority
     */
    public LdapAuthenticationToken(Authentication auth, GrantedAuthority defaultAuthority) {
        this.auth = auth;
        if (auth.getAuthorities() != null) {
            this.authorities.addAll(Arrays.asList(auth.getAuthorities()));
        }
        if (defaultAuthority != null) {
            this.authorities.add(defaultAuthority);
        }
        super.setAuthenticated(true);
    }

    /**
     * Construct a new LdapAuthenticationToken, using an existing Authentication object and
     * granting all users a default authority.
     * 
     * @param auth
     * @param defaultAuthority
     */
    public LdapAuthenticationToken(Authentication auth, String defaultAuthority) {
        this(auth, new GrantedAuthorityImpl(defaultAuthority));
    }

    public GrantedAuthority[] getAuthorities() {
        GrantedAuthority[] authoritiesArray = this.authorities.toArray(new GrantedAuthority[0]);
        return authoritiesArray;
    }

    public void addAuthority(GrantedAuthority authority) {
        this.authorities.add(authority);
    }

    public Object getCredentials() {
        return auth.getCredentials();
    }

    public Object getPrincipal() {
        return auth.getPrincipal();
    }

    /**
     * Retrieve the LDAP context attached to this user's authentication object.
     * 
     * @return the LDAP context
     */
    public InitialLdapContext getContext() {
        return context;
    }

    /**
     * Attach an LDAP context to this user's authentication object.
     * 
     * @param context
     *          the LDAP context
     */
    public void setContext(InitialLdapContext context) {
        this.context = context;
    }

} 
```

您会注意到其中有一些您可能不需要的位。

例如，我的应用程序需要保留成功登录的 LDAP 上下文，以便用户在登录后进一步使用——该应用程序的目的是让用户通过其 AD 凭据登录，然后执行更多与 AD 相关的功能。因此，我有一个自定义身份验证令牌 LdapAuthenticationToken，我可以传递它（而不是 Spring 的默认身份验证令牌），它允许我附加 LDAP 上下文。在 LdapAuthenticationProvider.authenticate() 中，我创建了该令牌并将其传回；在 LdapAuthenticatorImpl.authenticate() 中，我将登录的上下文附加到返回对象，以便可以将其添加到用户的 Spring 身份验证对象中。

此外，在 LdapAuthenticationProvider.authenticate() 中，我为所有登录用户分配了 ROLE_USER 角色——这让我可以在我的拦截 url 元素中测试该角色。您需要匹配您想要测试的任何角色，甚至根据 Active Directory 组或其他内容分配角色。

最后，一个推论，我实现 LdapAuthenticationProvider.authenticate() 的方式为所有具有有效 AD 帐户的用户提供了相同的 ROLE_USER 角色。显然，在这种方法中，您可以对用户执行进一步的测试（即，用户是否在特定的 AD 组中？）并以这种方式分配角色，甚至在完全授予用户访问权限之前测试某些*条件*。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-01-04T22:20:49.493

作为参考，Spring Security 3.1 有一个[专门用于 Active Directory](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ldap-active-directory)的身份验证提供程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-03-03T10:58:06.247

只是为了使它达到最新状态。Spring Security 3.0 有一个[完整的包](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/ldap/authentication/package-summary.html)，其中包含专用于 ldap-bind 以及查询和比较身份验证的默认实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-18T16:57:33.697

我能够使用 spring security 2.0.4 对活动目录进行身份验证。

我记录了设置

[http://maniezhilan.blogspot.com/2008/10/spring-security-204-with-active.html](http://maniezhilan.blogspot.com/2008/10/spring-security-204-with-active.html/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-17T13:20:54.997

正如上面卢克的回答：

> Spring Security 3.1 有一个专门用于 Active Directory 的身份验证提供程序。

以下是如何使用 ActiveDirectoryLdapAuthenticationProvider 轻松完成此操作的详细信息。

在 resources.groovy 中：

```
ldapAuthProvider1(ActiveDirectoryLdapAuthenticationProvider,
        "mydomain.com",
        "ldap://mydomain.com/"
) 
```

在 Config.groovy 中：

```
grails.plugin.springsecurity.providerNames = ['ldapAuthProvider1'] 
```

这就是您需要的所有代码。您几乎可以删除 Config.groovy 中的所有其他 grails.plugin.springsecurity.ldap.* 设置，因为它们不适用于此 AD 设置。

有关文档，请参阅： [http ://docs.spring.io/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ldap-active-directory](http://docs.spring.io/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ldap-active-directory)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-20T09:11:22.103

> 如果您使用的是 Spring **security 4**，您也可以使用给定的类实现相同的功能
> 
> *   安全配置.java

```
@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {

static final Logger LOGGER = LoggerFactory.getLogger(SecurityConfig.class);

@Autowired
protected void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {
    auth.authenticationProvider(activeDirectoryLdapAuthenticationProvider());
}

@Override
protected void configure(HttpSecurity http) throws Exception {
    http
            .authorizeRequests()
              .antMatchers("/").permitAll()
              .anyRequest().authenticated();
            .and()
              .formLogin()
            .and()
              .logout();
}

@Bean
public AuthenticationProvider activeDirectoryLdapAuthenticationProvider() {
    ActiveDirectoryLdapAuthenticationProvider authenticationProvider = 
        new ActiveDirectoryLdapAuthenticationProvider("<domain>", "<url>");

    authenticationProvider.setConvertSubErrorCodesToExceptions(true);
    authenticationProvider.setUseAuthenticationRequestCredentials(true);

    return authenticationProvider;
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-11-16T02:28:28.363

没有 SSL 的 LDAP 身份验证是不安全的，任何人都可以在将用户凭据传输到 LDAP 服务器时看到这些凭据。我建议使用 LDAPS:\ 协议进行身份验证。它不需要对弹簧部分进行任何重大更改，但您可能会遇到一些与证书相关的问题。有关更多详细信息，请参阅[Spring with SSL 中的 LDAP Active Directory 身份验证](http://javarevisited.blogspot.com/2011/11/ldap-authentication-active-directory.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-17T23:26:31.960

从上面卢克的回答：

> 作为参考，Spring Security 3.1 有一个身份验证提供程序 [专门用于 Active Directory][1]。
> 
> [1]： [http ://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ldap-active-directory](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ldap-active-directory)

我在 Spring Security 3.1.1 中尝试了上述方法：ldap 有一些细微的变化 - 用户所属的活动目录组作为原始案例出现。

以前在 ldap 下，这些组大写并以“ROLE_”为前缀，这使得在项目中通过文本搜索很容易找到它们，但如果出于某种奇怪的原因只有 2 个单独的组仅按大小写区分，则显然可能会在 unix 组中出现大小写问题（即帐户和帐户）。

此外，语法需要手动指定域控制器名称和端口，这使得冗余有点可怕。当然有一种方法可以在 java 中查找域的 SRV DNS 记录，即相当于（来自 Samba 4 howto）：

```
$ host -t SRV _ldap._tcp.samdom.example.com.
_ldap._tcp.samdom.example.com has SRV record 0 100 389 samba.samdom.example.com. 
```

然后是常规的 A 查找：

```
$ host -t A samba.samdom.example.com.
samba.samdom.example.com has address 10.0.0.1 
```

（实际上可能也需要查找 _kerberos SRV 记录...）

以上是使用 Samba4.0rc1，我们正在逐步从 Samba 3.x LDAP 环境升级到 Samba AD 环境。

# javascript - 有没有更好的方法来使用 jQuery 创建一个面向对象的类？

> ID：84716
> 
> 赞同：71
> 
> 时间：2008-09-17T15:48:13.323
> 
> 标签：javascript, jquery

我使用 jQuery[扩展](http://docs.jquery.com/Utilities/jQuery.extend)函数来扩展类原型。

例如：

```
MyWidget = function(name_var) {
  this.init(name_var);
}

$.extend(MyWidget.prototype, {
   // object variables
   widget_name: '',

   init: function(widget_name) {
     // do initialization here
     this.widget_name = widget_name;
   },

   doSomething: function() {
     // an example object method
     alert('my name is '+this.widget_name);
   }
});

// example of using the class built above
var widget1 = new MyWidget('widget one');
widget1.doSomething(); 
```

有一个更好的方法吗？有没有一种更简洁的方法来创建上面的类，只用一个语句而不是两个语句？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-09-17T16:01:17.410

我非常喜欢 John Resig 的[Simple JavaScript Inheritance](http://ejohn.org/blog/simple-javascript-inheritance/)。

```
var MyWidget = Class.extend({
  init: function(widget_name){
    this.widget_name = widget_name;
  },

  doSomething: function() {
    alert('my name is ' + this.widget_name);
  }
}); 
```

注意：上面演示的“类”对象不包含在 jQuery 本身中——它是 jQuery 先生本人的 25 行代码片段，在上面的文章中提供。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-23T01:30:27.763

为什么不直接使用 JavaScript 本身提供的简单 OOP……早在 jQuery 之前？

```
var myClass = function(){};
myClass.prototype = {
    some_property: null,
    some_other_property: 0,

    doSomething: function(msg) {
        this.some_property = msg;
        alert(this.some_property);
    }
}; 
```

然后你只需创建一个类的实例：

```
var myClassObject = new myClass();
myClassObject.doSomething("Hello Worlds"); 
```

简单的！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-09-17T22:44:50.527

总结一下我到目前为止所学到的：

这是使 Class.extend() 在 jQuery 中工作的 Base 函数（从John Resig的[Simple JavaScript Inheritance复制）：](http://ejohn.org/blog/simple-javascript-inheritance/)

```
// Inspired by base2 and Prototype
(function(){
  var initializing = false, fnTest = /xyz/.test(function(){xyz;}) ? /\b_super\b/ : /.*/;

  // The base Class implementation (does nothing)
  this.Class = function(){};

  // Create a new Class that inherits from this class
  Class.extend = function(prop) {
    var _super = this.prototype;

    // Instantiate a base class (but only create the instance,
    // don't run the init constructor)
    initializing = true;
    var prototype = new this();
    initializing = false;

    // Copy the properties over onto the new prototype
    for (var name in prop) {
      // Check if we're overwriting an existing function
      prototype[name] = typeof prop[name] == "function" &&
        typeof _super[name] == "function" && fnTest.test(prop[name]) ?
        (function(name, fn){
          return function() {
            var tmp = this._super;

            // Add a new ._super() method that is the same method
            // but on the super-class
            this._super = _super[name];

            // The method only need to be bound temporarily, so we
            // remove it when we're done executing
            var ret = fn.apply(this, arguments);       
            this._super = tmp;

            return ret;
          };
        })(name, prop[name]) :
        prop[name];
    }

    // The dummy class constructor
    function Class() {
      // All construction is actually done in the init method
      if ( !initializing && this.init )
        this.init.apply(this, arguments);
    }

    // Populate our constructed prototype object
    Class.prototype = prototype;

    // Enforce the constructor to be what we expect
    Class.constructor = Class;

    // And make this class extendable
    Class.extend = arguments.callee;

    return Class;
  };
})(); 
```

一旦你运行执行了这个代码，那么这使得[insin 的答案](https://stackoverflow.com/questions/84716/is-there-a-better-way-to-create-an-object-oriented-class-with-jquery#84824)中的以下代码成为可能：

```
var MyWidget = Class.extend({
  init: function(widget_name){
    this.widget_name = widget_name;
  },

  doSomething: function() {
    alert('my name is ' + this.widget_name);
  }
}); 
```

这是一个不错的、干净的解决方案。但我很想看看是否有人有不需要向 jquery 添加任何内容的解决方案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-17T17:00:48.373

jQuery 不提供。但是[Prototype](http://www.prototypejs.org)通过[Class.create 做到了](http://www.prototypejs.org/api/class/create)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T16:43:45.983

我发现这个网站是一个令人印象深刻的 oops 在 javascript [Here](http://jsperf.com/jquery-class-create-vs-pure-js-function/3)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-05-26T21:38:36.117

这早就死了，但如果其他人搜索 jQuery 创建类 - 检查这个插件： http: [//plugins.jquery.com/project/HJS](http://plugins.jquery.com/project/HJS)

# .net - .NET 测试命名约定

> ID：84717
> 
> 赞同：23
> 
> 时间：2008-09-17T15:48:16.537
> 
> 标签：.net, unit-testing, testing, naming, conventions

在 .NET（或任何其他语言或平台）中命名测试程序集的最佳约定是什么？

我主要分为这些选项（请提供其他选项！）：

*   **Company.Website** -*项目*
*   **公司.网站.测试**

*或者*

*   **公司网站**
*   **Company.WebsiteTests**

第一个解决方案的问题在于它看起来像 .Tests 是站点的子命名空间，而在我看来它们确实更平行。当一个新的子命名空间发挥作用时会发生什么，比如**Company.Website.Controls**，例如，我应该将对该命名空间的测试放在哪里？

也许它甚至应该是：**Tests.Company.Website**和**Tests.Company.Website.Controls**等等。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-09-17T16:21:29.857

我会和

```
* Company.Website - the project
* Company.Website.Tests 
```

简短的原因和答案很简单，测试和项目在代码中链接，因此它应该共享命名空间。

如果您想在解决方案中拆分代码并进行测试，无论如何您都可以选择。例如，您可以设置解决方案

-代码文件夹

*   公司网站

-测试文件夹

*   公司.网站.测试

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-09-17T15:51:13.440

我个人会去

公司.测试.网站

这样你就有了一个公共的测试命名空间和里面的项目，遵循与实际项目相同的结构。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-17T15:52:34.717

我实际上有一个备用并行根。

测试公司网站

当您有新的子命名空间时，它可以很好地消除歧义。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-17T15:53:53.510

我非常喜欢这样构建测试命名空间：

**Company.Tests.Website.xxx**

**Company.Tests.Website.Controls**

像您一样，我将测试视为与主代码并行的命名空间结构，这为您提供了这一点。它还有一个优点是，由于命名空间仍然以您的公司名称开头，因此您不应该与 3rd 方库发生任何命名冲突

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T15:59:30.550

我们遵循嵌入式方法：

```
Company.Namespace.Test
Company.Namespace.Data.Test 
```

这样，测试就接近于被测试的代码，而不必在项目之间来回切换或寻找引用以确保有一个覆盖特定方法的测试。我们也不必维护两个独立但相同的层次结构。

我们还可以在增强和开发时测试代码的不同部分。

一开始似乎有点奇怪，但从长远来看，它对我们来说确实很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T16:41:42.570

我也更喜欢在程序集的实际名称前加上“测试”，以便在我批量选择它们以拉入 NUUnit 或您正在使用的任何测试工具时，很容易看到按字母顺序列出的所有单元测试程序集。

因此，如果网站是我的解决方案（和程序集）的名称，我建议 -

**Tests.Website.dll**与实际代码组装**Website.Dll一起使用**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T15:52:34.997

为了简洁起见，我通常在解决方案资源管理器中将测试项目命名为*Project-Tests*，并将*Company.Namespace.Tests*用于命名空间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T15:56:48.870

我更喜欢去：

公司.网站.测试

我不关心像 Company.Website.Controls 这样的子命名空间，所有测试都进入同一个命名空间：Company.Website.Tests。您不希望您的测试命名空间必须与其余代码并行，因为它只会使重构命名空间花费两倍的时间。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T15:59:03.530

我更喜欢 Company.Website.Spec 并且通常每个解决方案都有一个测试项目

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-18T05:03:40.087

随着 MVC 开始在 .net Web 开发世界中成为现实，我将开始沿着这些思路思考。请记住，M、V 和 C 是不同的组件，因此：

*   公司.命名空间.网站
*   公司.命名空间.网站.核心
*   Company.Namspance.Website.Core.Tests
*   公司.命名空间.网站.模型
*   Company.Namespace.Website.Model.Tests

网站是您的轻量级视图。Core 包含控制器、助手、视图接口等。Core.Tests 是您对所述 Core 的测试。模型适用于您的数据模型。这里很酷的是您的模型测试可以自动化您的数据库特定测试。

这对某些人来说可能有点过头了，但我发现它让我可以很容易地分离关注点。

# linux - 我应该在哪个线程处理 RxTx SerialEvent.DATA_AVAILABLE 事件？

> ID：84755
> 
> 赞同：1
> 
> 时间：2008-09-17T15:52:45.603
> 
> 标签：linux, rxtx

我在 Linux 发行版上通过 usbserial 使用 RxTx 库。RxTx 库的行为似乎与它在串行上的工作方式完全不同（以一种糟糕的方式）。

我的应用程序有多个线程，我最大的问题之一是，我的流中似乎突然多了一到两个字节。我无法弄清楚它们来自哪里或为什么。当我使用另一个线程写入 RxTx 流时，这个问题似乎更频繁地发生。

所以我想知道是否应该在当前的 RxTx 线程上处理读取，或者当我收到 DATA_AVAILABLE 事件时是否应该在另一个线程上处理读取。

我希望有人可能有好的或坏的理由这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-19T22:53:35.770

这只是一个猜测，但它可能会给你一个线索。

发送和接收是否有可能共享一个缓冲区，或者当您发送时，字节也会以某种方式在输入上被接收到 - 我以前在某些嵌入式系统上看到过这一点。

您可能会发现最好的办法是最初将发送和接收保持在同一个线程上。另一件事可能是在尝试读取之前确保输出耗尽。

希望这可以给你一些线索。

# java - 从 IWorkspaceRoot 和位置字符串获取 IFile

> ID：84759
> 
> 赞同：2
> 
> 时间：2008-09-17T15:53:42.967
> 
> 标签：java, eclipse

这是一个 Eclipse 问题，您可以假设所有这些 Eclipse 类的 Java 包都是`org.eclipse.core.resources`.

我想获得与我拥有`IFile`的位置相对应的位置`String`：

```
 "platform:/resource/Tracbility_All_Supported_lib/processes/gastuff/globalht/GlobalHTInterface.wsdl" 
```

我有封闭的`IWorkspace`和`IWorkspaceRoot`。如果我有`IPath`与上述位置对应的位置，我可以简单地调用`IWorkspaceRoot.getFileForLocation(IPath)`.

我如何`IPath`从该位置获得对应的`String`？还是有其他方法可以获得相应的`IFile`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T16:32:15.713

```
String platformLocationString = portTypeContainer
        .getLocation();
String locationString = platformLocationString
        .substring("platform:/resource/".length());
IWorkspace workspace = ResourcesPlugin.getWorkspace();
IWorkspaceRoot workspaceRoot = workspace.getRoot();
IFile wSDLFile = (IFile) workspaceRoot
        .findMember(locationString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T17:15:30.477

由于 IWorkspaceRoot 是一个 IContainer，您不能只使用`workspaceRoot.findMember(String name)`并将生成的 IResource 转换为 IFile 吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T16:38:14.433

org.eclipse.core.runtime.Path 实现了 IPath。

```
IPath p = new Path(locationString);
IWorkspaceRoot.getFileForLocation(p); 
```

如果位置字符串不是“平台：”类型的 URL，这将有效

对于这种特殊情况， org.eclipse.core.runtime.Platform javadoc 中的注释表明“正确”的解决方案类似于

```
fileUrl = FileLocator.toFileURL(new URL(locationString)); 
IWorkspaceRoot.getFileForLocation(fileUrl.getPath()); 
```

@[Paul Reiners] 您的解决方案显然假设工作区根将位于“资源”文件夹中

# excel - Excel 2007 数据透视表 - 连接到数据多维数据集时如何使用计算字段？

> ID：84769
> 
> 赞同：2
> 
> 时间：2008-09-17T15:54:57.610
> 
> 标签：excel, pivot-table

当数据源是 SSAS 数据立方体时，您可以在 Excel 2007 数据透视表中使用计算字段吗？

我正在使用 Excel 2007 连接到 SQL Server 2005 数据多维数据集，并通过数据透视表查看数据。我想在我的数据透视表中创建计算字段，但“公式”按钮显示为灰色。

如何创建计算字段（如果可以在连接到数据立方体时）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-18T10:56:38.880

看起来你不能。这是我从 MSDN 得到的答案：

*不可能。所有聚合都由 Analysis Services 处理。由于 XL 不负责聚合，因此它无法进行自定义计算。HTH... Jim Thomlinson*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-03T20:03:32.743

你可以这样做，但这是有代价的。您必须断开数据透视表与 SSAS 多维数据集的连接，然后才能像往常一样使用 Excel。最好的第一步是让数据透视表完全符合您的要求。从数据透视表功能区栏菜单中，单击选项子菜单。单击 OLAP 工具按钮，然后单击“转换为公式”。

您将收到一条单向警告消息。（点击保存的好时机）一旦断开连接，您将丢失所有漂亮的格式和拖放内容，但您始终可以通过手动格式恢复。但是您现在获得的是 Excel 功能。现在在你想要的地方添加公式。当然，关键是确保您拥有新计算所需的元素。

关于它的好处是您可以保存并稍后重新打开。您可以单击刷新以从 SSAS 服务器更新数据。高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:15:52.910

此外，您可以使用“Office Web Components”而不是 Excel。OWC 支持针对 OLAP 多维数据集的客户端公式。我不敢相信他们从本机 Excel 中删除了该功能。

# java - 如何在不导入 Oracle 包的情况下接受 JAVA 中的 REF 游标

> ID：84782
> 
> 赞同：1
> 
> 时间：2008-09-17T15:57:01.320
> 
> 标签：java, oracle, jdbc

我正在编写使用 JDBC 进行数据库连接的 JAVA 程序，我正在调用一个返回 ORACLE REF CURSOR 的存储过程，有没有什么方法可以在不导入 ORACLE PACKAGES 的情况下处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T17:46:05.427

我想我不久前尝试过这样做并且有点放弃了（我想你可以弄清楚 OracleTypes.REF_CURSOR 是什么 int 值，然后使用该 int 值，但这是一个黑客）。如果您有耐心，您可以定义一个记录（或对象）类型并将游标定义为具有类型的游标，因为可以使用 table 将其转换为像常规表一样可选择的值，即

```
select * from table( sp_returning( ? ) ) 
```

我在 ref cursor 和 jdbc 上做了一个快速的 google，它看起来可能是一个 oracle 扩展，可以解释为什么没有标准的方法来访问数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-01-04T14:27:43.513

正在做

```
select * from table( sp_returning( ? ) ) 
```

比返回 ref 游标慢。

我可以将引用游标与 C# 结合使用，为什么你不能用 Java 来做呢？我敢肯定有很多例子。

# .net - 如何加快 ColdFusion 中 .NET AD 的数据检索速度？

> ID：84795
> 
> 赞同：2
> 
> 时间：2008-09-17T15:58:18.057
> 
> 标签：.net, coldfusion, active-directory, ldap

如何优化以下代码，目前需要 2 分钟以上的时间从超过 10 万条记录的池中检索和遍历 800 多条记录，每条记录返回 6 个字段（每个附加字段大约增加 20 秒）：

```
<cfset dllPath="C:\WINDOWS\Microsoft.NET\Framework\v1.1.4322\System.DirectoryServices.dll" />
<cfset LDAPPath="LDAP://" & arguments.searchPath />
<cfset theLookUp=CreateObject(".NET","System.DirectoryServices.DirectoryEntry", dllPath).init(LDAPPath) />
<cfset theSearch=CreateObject(".NET","System.DirectoryServices.DirectorySearcher", dllPath).init(theLookUp) />
<cfset theSearch.Set_Filter(arguments.theFilter) />
<cfset theObject = theSearch.FindAll() />

<cfloop index="row" from="#startRow#" to="#endRow#">
   <cfset QueryAddRow(theQuery) />
   <cfloop list="#columnList#" index="col">
     <cfloop from="0" to="#theObject.Get_Item(row).Get_Properties().Get_Item(col).Get_Count()-1#" index="item">
       <cftry>
         <cfset theQuery[col][theQuery.recordCount]=ListAppend(theQuery[col][theQuery.recordCount],theObject.Get_Item(row).Get_Properties().Get_Item(col).Get_Item(item),"|") />
         <cfcatch type="any">
         </cfcatch>
        </cftry>
      </cfloop>
    </cfloop>
  </cfloop> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T16:32:39.580

很久没接触CF了，不过可以用伪代码给出一些提示。一方面，这个表达式非常低效：

#theObject.Get_Item(row).Get_Properties().Get_Item(col).Get_Count()-1#

以第一部分为例，Get_Item(row) - 您的代码使 CF 为 #columnList# 循环的每次迭代检索行及其属性；最重要的是，您在 columnlist 的每次迭代中都执行 TWICE（一次 for 循环，再次用于内部 cfset）。如果您考虑一下，它只需要为外部循环的每次迭代（从#sfstart# 到#cfend）检索行。所以，在伪代码中这样做：

> 对于开始和结束之间的每一行
> 
> > cfset props = #theobject.get_item(row).get_properties()#
> > 
> > 对于#columnlist# 中的每个列
> > 
> > > cfset currentcol = #props.getitem(col)#
> > > 
> > > cfset count = #currentcol.getcount() - 1#
> > > 
> > > foreach 项目从 0 到 #count#
> > > 
> > > > cfset #currentcol.getItem(item)# 等...

有道理？每次进入循环时，将在该范围（或子范围）中重用的对象缓存在一个变量中。这意味着您在每次列循环迭代时只抓取一次列对象。外部作用域中定义的所有变量都可以在内部作用域中使用，正如您在上面所做的那样。我知道从前几行剪切和粘贴很诱人，但不要。到头来只会伤害你。

希望这可以帮助，

奥辛

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T18:01:25.030

内循环的项目列表有多大？

如果有大量项目，切换到数组*可能会更快。*

我已经与 x0n 的建议一起实施了这个......

```
<cfset dllPath="C:\WINDOWS\Microsoft.NET\Framework\v1.1.4322\System.DirectoryServices.dll" />
<cfset LDAPPath="LDAP://" & arguments.searchPath />
<cfset theLookUp=CreateObject(".NET","System.DirectoryServices.DirectoryEntry", dllPath).init(LDAPPath) />
<cfset theSearch=CreateObject(".NET","System.DirectoryServices.DirectorySearcher", dllPath).init(theLookUp) />
<cfset theSearch.Set_Filter(arguments.theFilter) />
<cfset theObject = theSearch.FindAll() />

<cfloop index="row" from="#startRow#" to="#endRow#">

    <cfset Props = theObject.get_item(row).get_properties() />

    <cfset QueryAddRow(theQuery) />

    <cfloop list="#columnList#" index="col">

        <cfset CurrentCol = Props.getItem(col) />

        <cfset ItemArray = ArrayNew(1)/>
        <cfloop from="0" to="#CurrentCol.getcount() - 1#" index="item">
            <cftry>
                <cfset ArrayAppend( ItemArray , CurrentCol.Get_Item(item) )/>
                <cfcatch type="any">
                </cfcatch>
            </cftry>
        </cfloop>
        <cfset theQuery[col][theQuery.recordCount] = ArrayToList( ItemArray , '|' )/>

    </cfloop>

</cfloop> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T17:57:35.663

此外，在每个循环中使用 cftry 块可能会大大减慢速度。除非您期望个别行失败（并且您需要从那一点继续），否则我建议为整个过程使用单个 try/catch 块。Try/catch 是一项昂贵的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T18:05:14.693

我认为您不想在循环内进行如此多的评估，而是使用变量来保存计数、指向 col 对象的指针并保存管道分隔符字符串，直到您准备好提交查询对象. 如果我正确地完成了重构，如果您使用以下代码，您应该会注意到改进：

```
<cfloop index="row" from="#startRow#" to="#endRow#">
<cfset QueryAddRow(theQuery) />
<cfloop list="#columnList#" index="col">
    <cfset PipedVals = "">
    <cfset theItem = theObject.Get_Item(row).Get_Properties().Get_Item(col)>
    <cfset ColCount = theItem.Get_Count()-1>
    <cfloop from="0" to="#ColCount#" index="item">
        <cftry>
        <cfset PipedVals = ListAppend(PipedVals,theItem.Get_Item(item),"|")>
        <cfcatch type="any"></cfcatch>
        </cftry>
    </cfloop>
    <cfset QuerySetCell(theQuery,col) = PipedVals>
</cfloop> 
```

# java - 什么是 Java 开发人员最好的免费 Eclipse 插件

> ID：84799
> 
> 赞同：56
> 
> 时间：2008-09-17T15:58:44.717
> 
> 标签：java, ide, eclipse-plugin

某些 Eclipse 插件是您的环境要求的。例如，适当的源代码管理插件——我对这些不感兴趣。

有些提供有用的增强，但在特定的利基。我对那些不感兴趣。

有些很棒，但要花钱。我对那些不感兴趣。

有些在旧版本的 Eclipse 上非常有用，但现在是最新 Eclipse 版本（我写这篇文章时为 3.4）的核心构建的一部分。我对那些不感兴趣。

我想要关于每个 Java SE 开发人员应该安装哪些插件的建议，请每个答案一个。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2008-09-17T16:02:24.753

Findbugs 让我今天做了两次愚蠢的事情。

[http://findbugs.sourceforge.net/](http://findbugs.sourceforge.net/)

Eclipse 更新站点为： http: [//findbugs.cs.umd.edu/eclipse/](http://findbugs.cs.umd.edu/eclipse/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-17T16:05:37.710

用我目前最喜欢的 Jadclipse 回答我自己的问题，它与 jad 一起从第三方库中反汇编类文件。

[http://jadclipse.sourceforge.net/](http://jadclipse.sourceforge.net/)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-11-19T14:21:47.787

如果您需要更深入地了解代码覆盖率，[EclEmma](http://www.eclemma.org)非常简单且有用

[http://www.eclemma.org](http://www.eclemma.org)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-17T16:04:39.397

Eclipse 的 Subclipse SVN 更新 URL：[http ://subclipse.tigris.org/update_1.4.x](http://subclipse.tigris.org/update_1.4.x)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2010-12-10T16:46:49.340

[MouseFeed Eclipse 插件](http://www.mousefeed.com/)

我正在使用这个，这对于不使用快捷键的程序员非常有帮助，因为他们不了解它们。

> MouseFeed 有助于养成使用键盘快捷键的习惯。当用户单击按钮或菜单项时，插件会显示一个弹出窗口，提醒您快捷键。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-09-17T21:13:47.907

检查风格。它非常快。

FindBugs 很棒但是很慢

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-09-17T16:35:46.750

我对此的回答显然是[eclim](http://eclim.sf.net)。它将 Eclipse 功能导出到 Vim，使我能够使用 Eclipse 的几个很棒的特性，比如源文件中的自动完成、自动构建和错误标记（使用 Vim 中的位置）、自动格式化、自动导入、JavaDoc 搜索、源代码搜索...废话，我可以永远继续下去。最重要的是：我不必使用糟糕的 Eclipse Java 编辑器（当然，对我来说，编辑器的质量总是主观的）。

如果您喜欢 Vim，但出于某种原因被迫/试图使用 Eclipse，请查看该站点。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2010-03-17T17:58:14.537

**[资源包插件](https://sourceforge.net/projects/eclipse-rbe/)**

[![替代文字](https://i.stack.imgur.com/qP1XP.jpg)](https://i.stack.imgur.com/qP1XP.jpg)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2008-09-17T21:45:53.073

我特别喜欢字节码大纲插件，虽然它并不适合所有口味，因为查看 Java 字节码并不适合所有人。有时查看 Java 类的底层字节码非常有用。

更新站点：http: [//download.forge.objectweb.org/eclipse-update/](http://download.forge.objectweb.org/eclipse-update/)

说明：[http ://asm.objectweb.org/eclipse/index.html](http://asm.objectweb.org/eclipse/index.html)

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2011-03-29T18:40:16.817

谷歌最近刚刚发布了 CodePro，很棒的插件。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2008-09-17T16:29:28.403

[Eclipse TPTP](http://www.eclipse.org/tptp/)对于查找代码中的慢点以及需要调试、分析或基准测试的任何其他事情非常有用。唯一的缺陷是它在mac上不起作用:'(。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-09-17T17:52:38.420

我真的很喜欢 Andrei Loskutov 的插件：

[http://andrei.gmxhome.de/eclipse.html](http://andrei.gmxhome.de/eclipse.html)

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2011-07-05T19:20:49.517

如果您需要在源代码中证明 javadoc 并且需要同时将其添加到一个大类或多个类中，那么 JAutodoc 非常有用。它使用变量的名称来创建 javadoc，因此它并不完美，并且受限于参数名称的意义。即使您必须返回并修复它，它也可以为您节省大量时间。

[http://jautodoc.sourceforge.net/update/](http://jautodoc.sourceforge.net/update/)

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2008-09-17T16:03:38.807

春季IDE

更新网址：[http ://springide.org/updatesite](http://springide.org/updatesite)

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2008-09-17T16:20:04.167

如果你使用 Hibernate，那么[Hibernate Tools](http://www.hibernate.org/255.html)是必须的。我真的很喜欢编写我的 HQL 或 JPQL 并实时查看生成的 SQL 的能力！

如果您不使用 Hibernate，我猜您正在使用某种形式的数据库。因此，我会推荐[Data Tools Platform](http://www.eclipse.org/projects/project_summary.php?projectid=datatools)。事实上，如果不使用[Eclipse Ganymede](http://www.eclipse.org/ganymede/learn.php) Release 提供的所有插件来开发 Java 应用程序，您会发疯的。这是一个很棒的开发平台，无需担心将所有必备插件同步并协同工作。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2011-02-09T05:00:45.527

我发现[sourceHelper](http://hexapixel.com/projects/sourcehelper)插件在开发和调试代码时非常有用。

网站上对插件的描述说，“Source Helper”插件是一个 Eclipse 插件，它把 Intellij IDEA 中存在的一个非常有用的功能放入 Eclipse 中。简而言之，该功能显示了一个输出的代码——通过浮动显示您看不到的代码的窗口来显示可见范围的起始括号。这在尝试识别哪个右括号属于代码的哪个部分时非常有帮助。

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2011-07-23T08:12:50.910

Chronon 时间旅行调试器很棒。我希望将来能看到它移植到其他语言。

[http://www.chrononsystems.com/](http://www.chrononsystems.com/)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2008-09-17T17:11:58.270

如果不专注于在 Eclipse 中的开发，您似乎无法真正回答这个问题。我想每个人都需要一个构建和依赖系统，所以也许 Maven 工具会赢？

*   [http://m2eclipse.codehaus.org/](http://m2eclipse.codehaus.org/) <-- 非常适合管理你的项目 pom.xml
*   [http://code.google.com/p/q4e/](http://code.google.com/p/q4e/) <--- 非常适合从 Eclipse 管理 Maven 存储库

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2008-09-17T19:00:27.277

Eclipse [Metrics Feature](http://www.stateofflow.com/projects/16/eclipsemetrics)（[更新站点](http://www.stateofflow.com/UpdateSite)）。简介：

> 这个 Eclipse 插件在构建周期为您的代码计算各种指标，并通过“问题”视图警告您每个指标的“范围违规”。这使您可以持续了解代码库的健康状况。您还可以将指标导出为 HTML 以供公开显示或导出为 CSV 格式以供进一步分析。

*   在每次构建期间重新计算指标
*   将指标导出为 CSV 或 HTML
*   带有 HTML 导出功能的可视化“仪表板”
*   支持的指标是：
    *   McCabe 的圈复杂度
    *   传出耦合
    *   方法缺乏凝聚力
        *   方法中的代码行
        *   字段数
        *   层数
        *   参数数量
        *   语句数
        *   每类加权方法

（其实我更喜欢 FindBugs，但是这个项目是第二的。）

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2009-10-22T17:47:46.267

我最喜欢的几个是[Mylyn](http://www.eclipse.org/mylyn/)和[CheckStyle](http://checkstyle.sourceforge.net/)

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2010-08-06T16:31:38.237

编辑框

[http://editbox.sourceforge.net/](http://editbox.sourceforge.net/)

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2009-08-13T12:25:23.260

超级辅助。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=159157](https://bugs.eclipse.org/bugs/show_bug.cgi?id=159157)

在我看来，这是使 Eclipse 在实际生产力方面领先于其他所有 IDE 的单一因素。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2009-10-11T11:07:13.283

[事实证明， FileSync](http://andrei.gmxhome.de/filesync/index.html)在使用 Web 应用程序时非常方便，因为它使我能够顺利地对资源类型文件进行增量部署，例如 javascript、JSP、CSS 文件等。它配置简单，功能强大，足以完成工作。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2009-12-08T17:00:14.870

[JBoss 工具](http://www.jboss.org/tools)，用于快速轻松地开发 Web 应用程序。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2010-04-06T12:44:42.450

我推荐了[Spring Source Tool Suite](http://www.springsource.com/products/sts)，它用于使用 Spring 框架进行企业 Java 开发。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2008-10-22T01:34:20.050

我要作弊并说 maven 插件。然后其他一切都可以挂起。

另外，maven-eclipse-plugin 解决了我在 eclipse 中遇到的最大问题：设置类路径。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2008-10-22T08:52:40.117

我刚刚发现了[Byecycle](http://byecycle.sourceforge.net/)。这个依赖查看器让您可以看到您的设计有多漂亮（或其他方面），并突出显示类之间的任何循环依赖关系，从而允许您采取适当的行动。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2008-11-19T14:30:33.853

其他人提到了一些很棒的东西，但我也会把 SQLExplorer 放在那里。可能不如 Maven 或 FindBugs 通常有用，但它非常适合将任何 JDBC 数据源拉入 IDE，以便您可以对其进行测试并探索 DB 结构。它也可作为独立的 RCP 应用程序使用。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2008-11-19T14:33:00.153

用于快速 GUI 开发的[可视化编辑器。](http://www.eclipse.org/vep/)

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2009-05-26T11:52:46.977

java.decompiler.free.fr/?q=jdeclipse 用于 Eclipse 的 Java Decomipler 插件。我想，它是最有用的插件。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2009-10-11T10:57:57.140

[Fast Code eclipse 插件](http://fast-code.sourceforge.net/)可以提供一点帮助。

# php - 如何有效地搜索数组以填写表单字段？

> ID：84800
> 
> 赞同：0
> 
> 时间：2008-09-17T15:59:01.033
> 
> 标签：php, arrays

我正在寻找一种有效的方法来将我想要的数据从名为 $submission_info 的数组中提取出来，这样我就可以轻松地自动填充我的表单字段。数组大小约为 120。

我想找到字段名称并提取内容。在本例中，字段名称为**loanOfficer**，内容为**John Doe**。

```
Output of Print_r($submission_info[1]):

Array ( 
     [field_id] => 2399 
     [form_id] => 4 
     [field_name] => loanOfficer 
     [field_test_value] => ABCDEFGHIJKLMNOPQRSTUVWXYZ 
     [field_size] => medium 
     [field_type] => other 
     [data_type] => string 
     [field_title] => LoanOfficer 
     [col_name] => loanOfficer 
     [list_order] => 2 
     [admin_display] => yes 
     [is_sortable] => yes 
     [include_on_redirect] => yes 
     [option_orientation] => vertical 
     [file_upload_dir] => 
     [file_upload_url] => 
     [file_upload_max_size] => 1000000 
     [file_upload_types] => 
     [content] => John Doe 
     ) 
```

我想找到字段名称并提取内容。在本例中，字段名称为**loanOfficer**，内容为**John Doe**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T16:37:12.283

您最好检查每个条目并从中创建一个新的关联数组。

```
foreach($submission_info as $elem) {
    $newarray[$elem["field_name"]] = $elem["content"];
} 
```

然后，您可以通过从 $newarray[ *<您正在填写的字段>* ] 中获取值来查找表单字段。否则，您将不得不每次都在 $submission_info 中搜索正确的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T16:45:55.337

不确定这是否是最佳解决方案：

```
foreach($submission_info as $info){
  if($info['field_name'] == 'loanOfficer'){ //check the field name
    $content = $info['content']; //store the desired value
    continue; //this will stop the loop after the desired item is found
  }
} 
```

下一次：如果您将问题概括为涵盖一些您和其他人可能不理解的总体主题，那么问题对您和其他人会更有帮助。似乎您可以使用数组进修课程...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T16:31:49.753

我假设 php 有一个关联数组（通常称为字典或哈希表）。最有效的例程是遍历数组一次并将字段放入以字段名称为键的字典中。

然后，当您想要查找特定字段（O（n））操作时，不必搜索原始数组。您刚刚使用字典通过 O(1)（或常量）操作中的字段名称来检索它。当然，第一次遍历数组以填充字典将是 O(n)，但这是一次性成本，而不是为每次查找支付相同的惩罚。

# asp.net - tagName 为 null 或不是对象 -- 使用最新版本的 jQuery (1.2.6) 的 IE7 中的错误消息

> ID：84803
> 
> 赞同：-1
> 
> 时间：2008-09-17T15:59:10.863
> 
> 标签：asp.net, javascript, jquery

有没有其他人看到这个错误信息。用谷歌快速检查并没有告诉我太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T16:11:35.620

你可能正在尝试做这样的事情......

```
alert($("#myElement").tagName); 
```

你应该做这个...

```
alert($("#myElement")[0].tagName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T16:53:51.353

确保在页面呈现后运行脚本。如果您的脚本位于页面顶部并立即运行，并且您的 DIV 在该脚本下方，则 DIV 尚不存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-04-12T19:46:46.913

如果您只在 IE 中看到它，则可能是 DivX 网络插件的错误：

[http://drupal.org/node/1038058](http://drupal.org/node/1038058)

DivX 网站上已确认问题，该网站显示“已在下一版本中修复”（2011 年 4 月）。

[http://labs.divx.com/node/16824](http://labs.divx.com/node/16824)

本质上，该错误是 DivX 将 el.appendChild() 函数替换为一个拦截器，该拦截器试图将标记名小写，但不会检查它是否是一个文本节点。如果您尝试执行类似`$('body').append('hi!')`. 此外，它无法返回一个破坏 SWFObject 的元素。

解决方法是确保您从不使用文本节点或多个顶级元素调用 append()。如果要附加一系列项目：

```
 append($('<div>hi</div><div>there</div>')) 
```

确保将它们包装在顶级 div 中以避免隐含的文本节点：

```
 append($('<div><div>hi</div><div>there</div></div>')) 
```

这是被破坏的完整解决方法`appendChild`，可以使用相同的方法`insertBefore`并且`replaceChild`共享错误。Divx JS 在页面加载后的某个时间插入，因此您可能需要对此进行轮询。

```
window.fixDivxPlayerBug = function () {
    var b = document.getElementsByTagName('body')[0];
    if ( window['ReplaceVideoElements'] && ! b.appendChildDivx ){
        b.appendChildDivx = b.appendChild;
        b.appendChild = function (el) {
            if( el.tagName == null) {
                var wrap = document.createElement('div');
                wrap.appendChild(el);
                b.appendChildDivx(wrap);
            }
            else {
                b.appendChildDivx(el);
            }
            return el;
        };
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T18:02:23.937

抱歉，就我而言，这是一个半途而废的问题。我现在正在浏览我的 .js 文件并消除整个代码块。我已将其隔离到一个特定的 .js 文件中。

非常感谢您阅读此问题并回复。

# vb.net - 可停靠表格

> ID：84804
> 
> 赞同：4
> 
> 时间：2008-09-17T15:59:14.030
> 
> 标签：vb.net, winforms, tabbed-document-interface

如何创建类似于 Visual Studio 中的窗口的“可停靠”表单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-17T16:01:11.543

我用过 Weifen Luo 的“DockPanel Suite”，效果很好。这是一个开源库，很好地模仿了 Visual Studio 的停靠系统，包括嵌套停靠、浮动窗口、选项卡式窗口等。如果您更喜欢自己的更简单的解决方案，您可以下载他的源代码并在那里查看他的方法。

Sourceforge 项目在这里：http: [//sourceforge.net/projects/dockpanelsuite](http://sourceforge.net/projects/dockpanelsuite)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T23:31:11.307

我们正在为我们的项目使用[Weifen Luo 的“DockPanel Suite”](http://sourceforge.net/projects/dockpanelsuite)，并且非常满意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T16:07:08.643

我见过和使用过的最好的之一是[Divelements](http://divelements.com/net/)的 SandDock ，它们同时具有 WinForms 和 WPF 版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T16:07:50.403

我之前使用过 CodeJock 的[DockingPane](http://www.codejock.com/products/dockingpane/) ActiveX 控件来创建停靠窗格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T09:47:57.640

为此，您可能希望使用其他人的组件，而不是尝试使用自己的组件，并且没有本地 WinForms 方法可以做到这一点。

为此目的，CodeProject 上有一个免费库，但我还没有尝试过。

[http://www.codeproject.com/KB/toolbars/DockContainer.aspx](http://www.codeproject.com/KB/toolbars/DockContainer.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T16:02:33.210

winforms中的任何自定义控件（复合的，不是继承的）都可以停靠，因为它实际上只是下面的一个面板。将它与表格布局面板结合起来，用于表单的高级布局，您就拥有了所有的部分。但是您仍然必须自己实现所有的粘合和支持 UI。

# css - 什么工具适用于在 IE6 中实时调整 CSS，类似于 Firebug 为 Firefox 所做的？

> ID：84813
> 
> 赞同：6
> 
> 时间：2008-09-17T15:59:57.333
> 
> 标签：css, internet-explorer, internet-explorer-6, cross-browser, firebug

所有前端开发人员都知道为 Firefox 编码的痛苦，然后在 IE6 中查看我们当时被破坏的页面。IE6 仍然被广泛使用（虽然它正在[缓慢但肯定地](http://www.w3schools.com/browsers/browsers_stats.asp)消失......在写这篇文章的一年半内，它会变得无关紧要，因为使用率会低于 1%）我们通常使用 IE 条件注释来创建为 IE 正确呈现单独的 CSS 文件。如果 IE6 有像 Firebug 这样的工具，那就太好了。Firebug“lite”存在，但它似乎是非常测试版，新的 IE8 有一个优秀的内置开发工具，在很多方面都比 firebug 更好）IE6 最好的工具是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T16:16:35.907

据我所知，[Debugbar](http://www.debugbar.com/)是目前最完善的 IE 调试工具。它绝对比 IE 开发者好，但它仍然不如萤火虫那么光滑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T16:07:52.043

我曾经使用[IE Developer Toolbar](http://blogs.msdn.com/ie/archive/2007/01/09/ie-developer-toolbar-beta-3-now-available.aspx)作为一种 Firebug 替代品。虽然我认为它不允许您输入普通 CSS，但您可以将 CSS 调整为名称/值对列表（添加、编辑、删除等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T16:04:27.980

[Internet Explorer Developer Toolbar](http://www.microsoft.com/en-us/download/details.aspx?id=18359)似乎是最好的选择。

# c++ - Super Robust as chrome c++ 和可移植 - 提示 - 帮助 - 评论

> ID：84817
> 
> 赞同：0
> 
> 时间：2008-09-17T16:00:14.823
> 
> 标签：c++, boost, google-chrome, portability, robust

我们正在制作一个可移植的代码（win+macOs），并且我们正在研究如何使代码更加健壮，因为它经常崩溃......（通常是溢出或错误的初始化）:-(

我读到谷歌浏览器对每个标签都使用一个进程，所以如果出现问题，程序不会完全崩溃，只有那个标签。我认为这很整洁，所以我可以试一试！

所以我想知道是否有人有一些提示、帮助、阅读列表、评论或可以帮助我构建更多 rubust c++ 代码的东西（便携总是更好）。

在同一主题中，我还想知道是否有一个可移植的进程库（如 boost）？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T16:17:49.193

Chrome 的答案更多的是关于故障缓解，而不是代码质量。做 Chrome 正在做的事情就是认输。

1.  更好的质量保证不仅仅是程序员测试他们自己的工作。
2.  单元测试
3.  回归测试
4.  阅读其他公司使用的最佳实践。

坦率地说，如果您的软件经常由于溢出和错误的初始化而崩溃，那么您将遇到一个非常基本的编程质量问题，并且不容易解决。这听起来很杂乱无章，这不是我的意图。我的观点是，错误代码的问题必须是您最关心的问题（我敢肯定）。诸如 Chrome 或自由使用异常处理来捕获程序缺陷之类的东西只会分散您对真正问题的注意力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-17T17:09:16.903

我开发了许多多平台 C++ 应用程序（最大的是 150 万行代码并在 7 个平台上运行——AIX、HP-UX PA-RISC、HP-UX Itanium、Solaris、Linux、Windows、OS X） . 实际上，您的帖子中有两个完全不同的问题。

1.  不稳定。你的代码不稳定。修理它。

    *   使用单元测试在逻辑问题杀死你之前发现它们。
    *   如果不明显，请使用调试器找出导致崩溃的原因。
    *   使用 boost 和类似的库。特别是，指针类型将帮助您避免内存泄漏。
2.  跨平台编码。

    *   同样，尽可能使用为此设计的库。特别是对于任何 GUI 位。
    *   尽可能使用标准（例如 ANSI 与 gcc/MSVC、POSIX 线程与 Unix 特定的线程模型等），即使它需要更多的工作。最小化特定于平台的代码意味着更少的整体工作，以及需要学习的 API 更少。
    *   隔离，隔离，隔离。尽可能避免针对不同平台的内联#ifdefs。相反，将特定于平台的代码粘贴到它自己的头文件/源代码/类中，并使用您的构建系统和#includes 来获取正确的代码。这有助于保持代码的清洁和可读性。
    *   尽可能使用 C99 整数类型，而不是“long”、“int”、“short”等——否则当你从 32 位平台移动到 64 位平台并且 long 突然改变时，它会咬你从 4 个字节到 8 个字节。而且，如果曾经将其写入网络/磁盘/等，那么您将遇到平台之间的不兼容问题。

就个人而言，我会先稳定代码（不添加任何更多功能），然后处理跨平台问题，但这取决于你。请注意，Visual Studio 有一个出色的调试器（正是因为这个原因，上面提到的代码库才被移植到 Windows）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T16:09:47.013

你没有提到目标项目是什么；每个选项卡都有一个进程并不一定意味着更“健壮”的代码。无论可移植性如何，您都应该致力于编写带有测试的可靠代码 - 只需阅读有关编写良好 C++ 代码的信息 :)

至于可移植性部分，请确保您从第一天起就在两个平台上进行测试，并确保在解决特定于平台的问题之前不编写新代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T16:10:09.697

你真的，真的不想做 Chrome 正在做的事情，它需要一个进程管理器，这可能对你想要的东西来说太过分了。

您应该研究使用来自 Boost 的智能指针或其他将为 C++ 提供引用计数或垃圾收集的工具。

或者，如果您经常崩溃，您可能需要考虑使用具有 C++ 绑定的脚本语言编写应用程序的非性能关键部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T16:15:26.470

Scott Meyers 的*Effective C++*和*More Effective C++*非常好，而且读起来很有趣。

Steve McConnell 的*Code Complete*是许多人的最爱，包括 Jeff Atwood。

Boost 库可能是一个很好的选择。我工作的一个项目使用它们。我自己只使用过WIN32线程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-17T16:54:33.227

我同意托拉克的观点。

糟糕的初始化或溢出是代码质量差的迹象。

谷歌这样做是因为有时无法控制页面中执行的代码（由于插件错误等）。因此，如果您使用的是低质量插件（它确实发生了），也许 Google 解决方案对您有好处。

但是一个经常崩溃的没有插件的程序只是写得不好，或者非常非常复杂，或者非常老旧（并且缺少很多维护时间）。您必须停止开发，并调查每一次崩溃。在 Windows 上，使用 PDB（程序数据库）编译模块，每次崩溃时，附加一个调试器。

您还必须添加内部测试。避免模​​式：

```
doSomethingBad(T * t)
{
   if(t == NULL) return ;

   // do the processing.
} 
```

这是一个非常糟糕的设计，因为错误就在那里，而*这次*你只是避免它。但是没有这个守卫的下一个函数会崩溃。最好尽快崩溃以离错误更近。

相反，在 Windows 上（MacOS 上必须有类似的 API）

```
doSomethingBad(T * t)
{
   if(t == NULL) ::DebugBreak() ; // it will call the debugger

   // do the processing.
} 
```

（不要直接使用这段代码...把它放在一个define中以避免将其传递给客户端...）您可以选择适合您的错误API（异常，DebugBreak，assert等），但使用它在代码知道有问题的那一刻停止。

尽可能避免使用 C API。使用 C++ 习语（RAII 等）和库。

ETC..

PS：如果您使用异常（这是一个不错的选择），请不要将它们隐藏在 catch 中。你只会让你的问题变得更糟，因为错误就在那里，但程序会尝试继续，并且有时可能会在之后崩溃，同时破坏它所触及的任何东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T16:12:38.317

你总是可以在你的程序中添加异常处理来捕捉这些类型的错误并忽略它们（尽管细节是特定于平台的）......但这非常是一把两刃剑。而是考虑让程序捕获异常并创建转储文件以进行分析。

如果您的程序以意想不到的方式运行，您对内部状态了解多少？也许崩溃的例程/线程损坏了一些关键数据结构？也许如果您发现错误并尝试继续，用户将保存他们正在处理的任何内容并将损坏提交到磁盘？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T16:21:29.170

除了编写更稳定的代码之外，这里有一个可以回答您问题的想法。

无论您使用的是进程还是线程。您可以编写一个小/简单的看门狗程序。然后您的其他程序向该看门狗注册。如果任何进程死亡，或线程死亡，它可以由看门狗重新启动。当然，您需要进行一些测试以确保您不会继续重新启动相同的错误线程。即：重新启动它 5 次，然后在第 5 次之后，关闭整个程序并记录到文件/syslog。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T16:24:06.560

使用调试符号构建您的应用程序，然后添加异常处理程序或配置 Dr Watson 以生成故障转储（运行 drwtsn32.exe /i 将其安装为调试器，无需 /i 即可弹出配置对话框）。当您的应用程序崩溃时，您可以通过查看调用堆栈和变量来检查它在 windbg 或 Visual Studio 中的问题所在。

谷歌符号服务器了解更多信息。

显然，您可以使用异常处理使其更健壮并使用智能指针，但最好修复错误。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T16:34:52.507

构建它的想法是退出的唯一方法是让程序崩溃并且它可以随时崩溃。当你以这种方式构建它时，崩溃永远不会/几乎永远不会丢失任何数据。一两年前我读过一篇关于它的文章。可悲的是，我没有指向它的链接。

将其与某种故障转储相结合，并通过电子邮件发送给您，以便您解决问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-17T16:42:41.430

我建议您编译一个 linux 版本并在[Valgrind](http://valgrind.org/)下运行它。

Valgrind 将跟踪内存泄漏、未初始化的内存读取和许多其他代码问题。我强烈推荐它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-17T18:29:32.000

经过超过 15 年的 Windows 开发，我最近编写了我的第一个跨平台 C++ 应用程序 (Windows/Linux)。就是这样：

*   STL
*   促进。特别是文件系统和线程库。
*   基于浏览器的 UI。该应用程序“执行”HTTP，其 UI 由 XHTML/CSS/JavaScript（Ajax 样式）组成。这些资源嵌入在服务器代码中，并在需要时提供给浏览器。
*   丰富的单元测试。不完全是 TDD，但很接近。这实际上改变了我的发展方式。

我使用 NetBeans C++ 构建 Linux 并立即拥有完整的 Linux 端口。

# algorithm - 分布式层次聚类

> ID：84820
> 
> 赞同：22
> 
> 时间：2008-09-17T16:00:53.167
> 
> 标签：algorithm, cluster-analysis, hierarchical-clustering

是否有任何算法可以帮助进行层次聚类？Google 的 map-reduce 只有一个 k-clustering 的例子。在层次聚类的情况下，我不确定如何在节点之间划分工作。我发现的其他资源是：http: [//issues.apache.org/jira/browse/MAHOUT-19](http://issues.apache.org/jira/browse/MAHOUT-19) 但是使用了哪些算法并不明显。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-10-10T18:45:39.210

首先，您必须决定是自下而上还是自上而下构建层次结构。

自下而上称为分层凝聚聚类。这是一个简单的、有据可查的算法： http: [//nlp.stanford.edu/IR-book/html/htmledition/hierarchical-agglomerative-clustering-1.html](http://nlp.stanford.edu/IR-book/html/htmledition/hierarchical-agglomerative-clustering-1.html)。

分发自下而上的算法很棘手，因为每个分布式进程都需要整个数据集来选择合适的集群。它还需要当前级别的集群列表，因此它不会将数据点添加到同一级别的多个集群。

自上而下的层次结构称为[分裂聚类](http://nlp.stanford.edu/IR-book/html/htmledition/divisive-clustering-1.html)。[K-means](http://home.dei.polimi.it/matteucc/Clustering/tutorial_html/kmeans.html)是决定如何拆分层次结构节点的一种选择。本文着眼于节点分裂的 K-means 和主方向分裂分区 (PDDP)：http: [//scgroup.hpclab.ceid.upatras.gr/faculty/stratis/Papers/tm07book.pdf](http://scgroup.hpclab.ceid.upatras.gr/faculty/stratis/Papers/tm07book.pdf)。最后，只需将每个父节点拆分成相对均衡的子节点即可。

自上而下的方法更容易分发。在您的第一个节点拆分后，创建的每个节点都可以运送到分布式进程以再次拆分，依此类推......每个分布式进程只需要知道它正在拆分的数据集的子集。只有父进程知道完整的数据集。

此外，每个拆分可以并行执行。k-means 的两个例子：

*   [http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.101.1882&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.101.1882&rep=rep1&type=pdf)
*   [http://www.ece.northwestern.edu/~wkliao/Kmeans/index.html](http://www.ece.northwestern.edu/~wkliao/Kmeans/index.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-09T18:35:10.460

Clark Olson 回顾了几种用于层次聚类的分布式算法：

> CF奥尔森。“分层聚类的并行算法”。*并行计算*, 21:1313-1325, 1995, [doi:10.1016/0167-8191(95)00017-I](http://dx.doi.org/10.1016/0167-8191(95)00017-I)。

帕鲁纳克等人。描述一个受蚂蚁如何分类巢穴的启发的算法：

> H. Van Dyke Parunak、Richard Rohwer、Theodore C. Belding 和 Sven Brueckner：“动态分散的随时分层聚类”。在 *过程中。第四届工程自组织系统（ESOA）国际研讨会*，2006，[doi:10.1007/978-3-540-69868-5](http://dx.doi.org/10.1007/978-3-540-69868-5)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-12T16:56:13.163

[如果Olson (1995) 的评论](http://faculty.washington.edu/cfolson/papers/pdf/pc95.pdf)有点过时，请查看这篇非常易读的评论。从那时起，大多数论文都需要付费才能访问。:-)

如果您使用 R，我建议您尝试使用另一个 R 模块[snow](http://www.sfu.ca/~sblay/R/snow.html)实现并行性的[pvclust 。](http://www.is.titech.ac.jp/~shimo/prog/pvclust/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-05-12T14:35:52.543

您还可以看到Newman 和 Girvan[在网络中寻找和评估社区结构，他们提出了一种评估网络中社区的方法（以及基于此方法的算法集）和衡量网络划分为社区质量（图模块化）的方法。](http://arxiv.org/pdf/cond-mat/0308217)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T16:28:22.023

你可以看看自组织地图（Kohonen 的神经网络方法）所做的一些工作......[维也纳科技大学的](http://www.ifs.tuwien.ac.at/~andi/somlib/experiments_wfb90.html#integration)人已经完成了一些关于他们不断增长的分层地图算法的分布式计算的工作。

这有点在你的聚类问题的边缘，所以它可能无济于事，但我想不出更接近的东西；）

# asp.net - ASP.NET 1.1 Page_ClientValidate 调试

> ID：84837
> 
> 赞同：0
> 
> 时间：2008-09-17T16:03:11.070
> 
> 标签：asp.net, debugging, asp.net-1.1

我有一个 ASP.NET 1.1 应用程序，在我的本地计算机上，我页面上的提交按钮工作正常，但是当我将它部署到我们的开发应用程序服务器时，我单击提交并且没有任何反应。我假设 Page_Validate () 函数失败并禁用 POSTBACK，但是如何调试它并确定失败的原因？这听起来像是一些配置问题，因为它在我的本地机器上运行良好，但在远程服务器上却不行......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-09T19:12:40.073

这就是发生的事情......在 ASP.NET 1.1 中，函数 ValidatorCommonOnSubmit 中的 WebUIValidation.js 文件（由 Microsoft 提供并在您运行 aspnet_regiis.exe 时创建）中存在错误。似乎该方法缺少返回语句！如果您修改此文件并在末尾插入“return event.returnValue”，则您的验证正常。我花了一段时间才找到这个，但一旦我找到它，我就用谷歌搜索它，这是一个众所周知的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T16:38:43.090

我记得过去 1.1 Visual Studio 偶尔会破坏我的事件处理程序连接。

如果您使用的是 Visual Studio 2003，请确保“生成的”代码仍然包含您的控件的事件处理程序连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T02:45:34.793

查看服务器上是否正确安装了脚本的 aspnet_client 目录。你应该有一个像[这样](http://www.eaglemp.co.uk/aspnet_client/system_web/1_1_4322/webuivalidation.js)的js 。否则执行`aspnet_regiis.exe -c`（参见[文档](http://msdn.microsoft.com/en-us/library/k6h9cz8h(VS.71).aspx)）

# .net - XML 节点名称清理代码

> ID：84839
> 
> 赞同：1
> 
> 时间：2008-09-17T16:03:27.187
> 
> 标签：.net, xml, vb.net

我正在尝试基于表中的数据字段创建 XML 文件，并且我希望根据表中字段中的值命名节点。问题是有时在该列中输入的值包含节点名称中不允许的空格和其他字符。

有没有人有任何代码可以清理传入的字符串并用替换文本替换无效字符，以便可以在另一端反转它并取回原始值？

我正在使用.net（vb.net，但我可以读取/转换 c#）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T16:06:51.483

如果原始值作为属性中的节点名称是非法的，则存储原始值可能会更容易。然后你就不用担心有某种复杂的往返翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T16:09:50.743

事实上，我什至会说，除非您完全控制数据，否则任何翻译过程都不会奏效。所以我第二次将原始数据存储为属性或子节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T16:11:01.597

您没有在原始帖子中说什么语言，所以这里有一个正则表达式模式可以帮助您入门。这很快，因此您需要对其进行测试。

```
([^A-Za-z0-9])|(\s)|(\t+)|(\c+) 
```

# c# - 如何在 C# 中以编程方式连接 ToolStripButton 事件？

> ID：84842
> 
> 赞同：2
> 
> 时间：2008-09-17T16:03:39.230
> 
> 标签：c#, events, toolstripbutton, toolstripitem

我以编程方式将 ToolStripButton 项添加到上下文菜单中。

那部分很容易。

```
this.tsmiDelete.DropDownItems.Add("The text on the item."); 
```

但是，我还需要连接事件，以便在用户单击项目时实际发生一些事情！

我该怎么做呢？处理单击的方法还需要接收与用户单击的特定 ToolStripButton 相关的某种 id 或对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T16:12:41.580

您不能只订阅 Click 事件吗？像这样的东西：

```
ToolStripButton btn = new ToolStripButton("The text on the item.");
this.tsmiDelete.DropDownItems.Add(btn);
btn.Click += new EventHandler(OnBtnClicked); 
```

OnBtnClicked 会这样声明：

```
private void OnBtnClicked(object sender, EventArgs e)
{
    ToolStripButton btn = sender as ToolStripButton;

    // handle the button click
} 
```

发件人应该是 ToolStripButton，因此您可以投射它并使用它做任何您需要做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T16:31:43.687

感谢您对安迪的帮助。我现在唯一的问题是 AutoSize 在我添加的 ToolStripButtons 上不起作用！他们都太狭窄了。

这很奇怪，因为它更早地工作。

* * *

更新：对于以编程方式创建的 ToolStripButtons，AutoSize 肯定有问题。但是，我找到了解决方案：

1.  创建工具条按钮。
2.  创建一个标签控件并设置字体属性以匹配您的按钮。
3.  设置标签的文本以匹配您的按钮。
4.  将标签设置为 AutoSize。
5.  读取标签的宽度并使用它来设置 ToolStripButton 的宽度。

这是hacky，但它的工作原理。

# security - 如何为 Windows 上的代码签名创建自签名证书？

> ID：84847
> 
> 赞同：266
> 
> 时间：2008-09-17T16:04:07.403
> 
> 标签：security, code-signing

如何使用 Windows SDK 中的工具为代码签名创建自签名证书？

* * *

## 回答 #1

> 赞同：396
> 
> 时间：2008-10-14T14:03:13.397

## 更新的答案

如果您使用以下 Windows 版本或更高版本：Windows Server 2012、Windows Server 2012 R2 或 Windows 8.1，则[MakeCert 现在已弃用](https://msdn.microsoft.com/en-us/library/windows/desktop/aa386968(v=vs.85).aspx)，Microsoft 建议使用[PowerShell Cmdlet **New-SelfSignedCertificate**](https://docs.microsoft.com/en-us/powershell/module/pki/new-selfsignedcertificate)。

如果您使用的是旧版本，例如 Windows 7，则需要坚持使用 MakeCert 或其他解决方案。有人[建议](https://www.reddit.com/r/PowerShell/comments/3190yr/powershell_40_but_no_newselfsignedcertificate/)使用[Public Key Infrastructure Powershell (PSPKI) Module](https://github.com/PKISolutions/PSPKI)。

## 原始答案

虽然您可以一次性创建自签名代码签名证书（SPC -[软件发布](http://msdn.microsoft.com/en-us/library/8s9b9yaz.aspx)者证书），但我更喜欢执行以下操作：

### 创建自签名证书颁发机构 (CA)

```
makecert -r -pe -n "CN=My CA" -ss CA -sr CurrentUser ^
         -a sha256 -cy authority -sky signature -sv MyCA.pvk MyCA.cer 
```

（^ = 允许批处理命令行换行）

这将创建一个带有可导出私钥 (-pe) 的自签名 (-r) 证书。它被命名为“我的 CA”，应该放在当前用户的 CA 存储中。我们使用的是[SHA-256](http://en.wikipedia.org/wiki/SHA-2)算法。密钥用于签名（-sky）。

私钥应存储在 MyCA.pvk 文件中，证书应存储在 MyCA.cer 文件中。

### 导入 CA 证书

因为如果您不信任 CA 证书就没有任何意义，因此您需要将其导入 Windows 证书存储区。您*可以*使用证书 MMC 管理单元，但从命令行：

```
certutil -user -addstore Root MyCA.cer 
```

### 创建代码签名证书 (SPC)

```
makecert -pe -n "CN=My SPC" -a sha256 -cy end ^
         -sky signature ^
         -ic MyCA.cer -iv MyCA.pvk ^
         -sv MySPC.pvk MySPC.cer 
```

它与上面几乎相同，但我们提供了颁发者密钥和证书（-ic 和 -iv 开关）。

我们还希望将证书和密钥转换为 PFX 文件：

```
pvk2pfx -pvk MySPC.pvk -spc MySPC.cer -pfx MySPC.pfx 
```

如果您使用密码，请使用以下密码

```
pvk2pfx -pvk MySPC.pvk -spc MySPC.cer -pfx MySPC.pfx -po fess 
```

如果要保护 PFX 文件，请添加 -po 开关，否则 PVK2PFX 会创建一个没有密码的 PFX 文件。

### 使用证书签署代码

```
signtool sign /v /f MySPC.pfx ^
              /t http://timestamp.url MyExecutable.exe 
```

（[看看为什么时间戳可能很重要](https://stackoverflow.com/a/4417466/57611)）

如果您将 PFX 文件导入证书存储区（您可以使用 PVKIMPRT 或 MMC 管理单元），您可以对代码进行如下签名：

```
signtool sign /v /n "Me" /s SPC ^
              /t http://timestamp.url MyExecutable.exe 
```

一些可能的时间戳 URL`signtool /t`是：

*   `http://timestamp.verisign.com/scripts/timstamp.dll`
*   `http://timestamp.globalsign.com/scripts/timstamp.dll`
*   `http://timestamp.comodoca.com/authenticode`
*   `http://timestamp.digicert.com`

### 完整的 Microsoft 文档

*   [标志工具](http://msdn.microsoft.com/en-us/library/8s9b9yaz.aspx)
*   [制作证书](http://msdn.microsoft.com/en-us/library/bfsktky3.aspx)
*   [pvk2pfx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550672(v=vs.85).aspx)

### 下载

对于非 .NET 开发人员，您需要一份 Windows SDK 和 .NET 框架的副本。此处提供当前链接：[SDK & .NET][5]（将 makecert 安装在 `C:\Program Files\Microsoft SDKs\Windows\v7.1` 中）。你的旅费可能会改变。

MakeCert 可从 Visual Studio 命令提示符获得。Visual Studio 2015 确实有它，它可以从 Windows 7 的“开始”菜单在“VS 2015 的开发人员命令提示符”或“VS2015 x64 本机工具命令提示符”下启动（可能所有这些都在同一个文件夹中）。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2018-07-20T13:14:12.360

如答案中所述，为了使用不推荐的方式来签署您自己的脚本，应该使用[New-SelfSignedCertificate](https://docs.microsoft.com/en-us/powershell/module/pkiclient/new-selfsignedcertificate?view=win10-ps)。

1.  生成密钥：

```
New-SelfSignedCertificate -DnsName email@yourdomain.com -Type CodeSigning -CertStoreLocation cert:\CurrentUser\My 
```

2.  导出不带私钥的证书：

```
Export-Certificate -Cert (Get-ChildItem Cert:\CurrentUser\My -CodeSigningCert)[0] -FilePath code_signing.crt 
```

当您拥有多个证书时， [0] 将使此工作...显然使索引与您要使用的证书匹配...或使用一种过滤方式（通过指纹或颁发者）。

3.  将其作为受信任的发布者导入

```
Import-Certificate -FilePath .\code_signing.crt -Cert Cert:\CurrentUser\TrustedPublisher 
```

4.  将其作为根证书颁发机构导入。

```
Import-Certificate -FilePath .\code_signing.crt -Cert Cert:\CurrentUser\Root 
```

5.  签署脚本（假设这里它被命名为 script.ps1，相应地修复路径）。

```
Set-AuthenticodeSignature .\script.ps1 -Certificate (Get-ChildItem Cert:\CurrentUser\My -CodeSigningCert) 
```

显然，一旦您设置了密钥，您就可以简单地用它签署任何其他脚本。[您可以在本文](https://sid-500.com/2017/10/26/how-to-digitally-sign-powershell-scripts/)
中获得更详细的信息和一些故障排除帮助。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-11-06T19:15:42.797

[在 Powershell 中使用New-SelfSignedCertificate](https://docs.microsoft.com/en-us/powershell/module/pkiclient/new-selfsignedcertificate?view=win10-ps)命令相当容易。打开 powershell 并运行这 3 个命令。

> 1.  **创建证书**：
>     $cert = New-SelfSignedCertificate -DnsName [www.yourwebsite.com](http://www.yourwebsite.com) -Type CodeSigning -CertStoreLocation Cert:\CurrentUser\My
>     
>     
> 2.  **为其设置密码**：
>     $CertPassword = ConvertTo-SecureString -String "my_passowrd" -Force -AsPlainText
>     
>     
> 3.  **导出它**：
>     Export-PfxCertificate -Cert "cert:\CurrentUser\My$($cert.Thumbprint)" -FilePath "d:\selfsigncert.pfx" -Password $CertPassword

您的证书**selfsigncert.pfx**将位于 @`D:/`

* * *

**可选步骤：**您还需要将证书密码添加到系统环境变量中。通过在 cmd 中输入以下内容来执行此操作：`setx CSC_KEY_PASSWORD "my_password"`

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2013-04-16T01:16:36.060

罗杰的回答很有帮助。

不过，我在使用它时遇到了一点麻烦，并且不断出现红色的“Windows 无法验证此驱动程序软件的发布者”错误对话框。关键是安装测试根证书

```
certutil -addstore Root Demo_CA.cer 
```

罗杰的回答并没有完全涵盖。

这是一个对我有用的批处理文件（我的 .inf 文件，不包括在内）。它展示了如何从头到尾完成所有操作，根本没有 GUI 工具（除了一些密码提示）。

```
REM Demo of signing a printer driver with a self-signed test certificate.
REM Run as administrator (else devcon won't be able to try installing the driver)
REM Use a single 'x' as the password for all certificates for simplicity.

PATH %PATH%;"c:\Program Files\Microsoft SDKs\Windows\v7.1\Bin";"c:\Program Files\Microsoft SDKs\Windows\v7.0\Bin";c:\WinDDK\7600.16385.1\bin\selfsign;c:\WinDDK\7600.16385.1\Tools\devcon\amd64

makecert -r -pe -n "CN=Demo_CA" -ss CA -sr CurrentUser ^
   -a sha256 -cy authority -sky signature ^
   -sv Demo_CA.pvk Demo_CA.cer

makecert -pe -n "CN=Demo_SPC" -a sha256 -cy end ^
   -sky signature ^
   -ic Demo_CA.cer -iv Demo_CA.pvk ^
   -sv Demo_SPC.pvk Demo_SPC.cer

pvk2pfx -pvk Demo_SPC.pvk -spc Demo_SPC.cer ^
   -pfx Demo_SPC.pfx ^
   -po x

inf2cat /drv:driver /os:XP_X86,Vista_X64,Vista_X86,7_X64,7_X86 /v

signtool sign /d "description" /du "www.yoyodyne.com" ^
   /f Demo_SPC.pfx ^
   /p x ^
   /v driver\demoprinter.cat

certutil -addstore Root Demo_CA.cer

rem Needs administrator. If this command works, the driver is properly signed.
devcon install driver\demoprinter.inf LPTENUM\Yoyodyne_IndustriesDemoPrinter_F84F

rem Now uninstall the test driver and certificate.
devcon remove driver\demoprinter.inf LPTENUM\Yoyodyne_IndustriesDemoPrinter_F84F

certutil -delstore Root Demo_CA 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-02-28T16:12:07.213

从 PowerShell 4.0 (Windows 8.1/ [Server 2012 R2) 开始，可以在没有](https://en.wikipedia.org/wiki/Windows_Server_2012)[makecert.exe](https://msdn.microsoft.com/en-us/library/windows/desktop/aa386968%28v=vs.85%29.aspx)的情况下在 Windows 中制作证书。

您需要的命令是[New-SelfSignedCertificate](https://technet.microsoft.com/library/hh848633)和[Export-PfxCertificate](https://technet.microsoft.com/en-us/library/hh848635.aspx)。

*[使用 PowerShell 创建自签名证书中的](https://www.itprotoday.com/blog/creating-self-signed-certificates-powershell)*说明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-12T01:23:41.460

您可以在 Visual Studio 2019 的项目属性中生成一个。在驱动程序签名部分，测试证书字段有一个下拉菜单。生成测试证书是其中一种选择。证书将位于扩展名为“cer”的文件中，通常与可执行文件或驱动程序位于同一输出目录中。

# c# - .NET 进程间通信的最佳选择是什么？

> ID：84855
> 
> 赞同：84
> 
> 时间：2008-09-17T16:05:21.953
> 
> 标签：c#, .net, process, ipc

我应该使用命名管道还是 .NET Remoting 与我机器上正在运行的进程进行通信？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-09-17T16:10:37.370

WCF 是最好的选择。它支持[许多不同的传输机制](http://msdn.microsoft.com/en-us/library/ms733769(VS.85).aspx)（[包括](http://blogs.charteris.com/blogs/chrisdi/archive/2008/05/19/exploring-the-wcf-named-pipe-binding-part-1.aspx) [命名](http://blogs.charteris.com/blogs/chrisdi/archive/2008/06/16/exploring-the-wcf-named-pipe-binding-part-2.aspx) [管道](http://blogs.charteris.com/blogs/chrisdi/archive/2008/06/23/exploring-the-wcf-named-pipe-binding-part-3.aspx)），并且可以完全由配置驱动。我强烈建议您看一下 WCF。

这是一个进行[WCF 与 Remoting 性能比较](http://geekswithblogs.net/marcel/archive/2007/09/26/115651.aspx)的博客。

来自博客的引述：

> WCF 和 .NET Remoting 在性能上确实相当。差异是如此之小（测量客户端延迟）以至于哪个更快一点并不重要。WCF 虽然比 .NET Remoting 具有更好的服务器吞吐量。如果我要开始一个全新的项目，我会选择 WCF。无论如何，WCF 所做的远不止远程处理，而且我喜欢它的所有这些功能。

[WCF 的 MSDN 部分](http://msdn.microsoft.com/en-us/library/ms735119.aspx)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-17T16:08:47.937

如果它在单台机器上，命名管道可以为您提供更好的性能，并且可以使用[远程处理基础结构](http://ivanweb.com/articles/namedpipes/index.cfm)和 WCF 来实现。或者您可以直接使用[System.IO.Pipes](http://bartdesmet.net/blogs/bart/archive/2007/04/12/getting-started-with-named-pipes.aspx)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-17T16:08:43.600

如果您的意思是进程间通信，那么到目前为止，我使用 .NET Remoting 没有任何问题。如果两个进程在同一台机器上，则通信速度非常快。

命名管道肯定更高效，但它们至少需要设计一个基本的应用程序协议，这可能是不可行的。远程处理允许您轻松调用远程方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-17T16:48:51.350

.NET Framework 2.0 中的远程处理为同一机器内的进程间通信提供了**IPC 通道**。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-17T18:52:36.717

如果您使用的是 .NET Framework 3.0 或更高版本，我会使用 WCF。使用 WCF，您可以根据性能/互操作/等之间的权衡使用不同的绑定。你需要的。

如果性能不是很重要，并且您需要与其他 Web 服务技术互操作，那么您将希望使用 WS-HTTP 绑定。对于您的情况，您可以将 WCF 与 net-tcp 绑定或命名管道绑定一起使用。要么应该工作。

我个人的看法是，WCF 方法更简洁，因为您可以执行合同驱动的服务并专注于消息，而不是对象（我在这里根据 WCF/.NET Remoting 的默认编程模型进行概括）。我不喜欢通过网络发送对象，因为很多语义信息会丢失或不清楚。当您所做的只是像使用 WCF 一样发送消息时，将您的关注点与通信和单个节点组成的类/基础架构分开变得更容易。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-07-06T10:02:26.420

WCF 还提供了灵活性。只需更改一些配置（绑定），您就可以在其他机器上拥有相同的服务，而不是在同一台机器上使用 IPC。因此，您的代码保持灵活。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-17T16:09:00.557

.Net 远程处理本身并不是一个协议。它允许您选择使用哪个协议：SOAP、命名管道等。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T16:07:11.217

.net 远程处理内置于 .net 中以进行内部进程通信。如果您使用它，他们将继续支持并可能在未来的版本中增强它。命名管道不会让您承诺在未来的 .net 版本中进行增强

# linux - 使用usbserial在RxTx上写入数据？

> ID：84859
> 
> 赞同：1
> 
> 时间：2008-09-17T16:05:45.790
> 
> 标签：linux, rxtx

我在 Linux 发行版上通过 usbserial 使用 RxTx 库。RxTx 库的行为似乎与它在串行上的工作方式完全不同（以一种糟糕的方式）。

我最大的问题之一是`RxTx SerialPortEvent.OUTPUT_BUFFER_EMPTY`无法通过 USB 串行在 linux 上运行。

我怎么知道什么时候应该写入流？我可能错过的任何指标？

到目前为止，我同时写作和阅读的经验并不是很好。有谁知道我是否应该`DATA_AVAILABLE`在我写流时锁定处理程序不被调用？或者`RxTx`接受并发读/写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-10-09T19:58:08.623

*（也许有点题外话，但这里有）*

我不熟悉那个特定的库，但我可以从可怕的经验中向您保证（我在安全系统（如：硬件安全设备）业务中工作，RS-232 被大量使用）并非所有 USB 串行转换器生而平等。许多此类设备无法正确模拟所有 RS-232 线路，而且许多设备在没有流量控制的情况下甚至无法处理任何通信。在责备图书馆之前，请尝试确认硬件确实做了它应该做的事情。

不想认可特定的产品或品牌，我多年来遇到的最好的（如：最少的错误）USB 串行转换器是[USA-19HS](http://www.tripplite.com/en/products/model.cfm?txtModelID=3914)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-22T14:00:54.590

使用 RxTx over usb-to-serial 您不能将 notifyOnOutput 设置为 true ，否则它会完全锁定。

我已经学会了这个艰难的方式。此问题记录在 Internet 上的一些网站上。

我在 Linux 上运行它，我相信这只是 Linux 的问题，尽管我无法确认。

至于你给我的链接......我看过 SimpleReader 和 SimpleWriter 示例，但这些并不代表真实世界的应用程序。它不是多线程的，假设读取具有所需的完整数据，而不是缓冲读取等。

谢谢，

杰奇！

# c# - 如何从与桌面交互的应用程序与 Windows 服务进行通信？

> ID：84860
> 
> 赞同：17
> 
> 时间：2008-09-17T16:06:12.343
> 
> 标签：c#, .net, windows-services, service, mono

使用 .Net 与服务交互的最佳方式是什么（即大多数托盘应用程序如何与其服务器通信）。如果这种方法也是跨平台的（在 Mono 中工作，所以我猜远程处理已经过时了？）

* * *

### 编辑：

忘了提一下，我们仍然必须在现场支持 Windows 2000 机器，所以 WCF 和任何高于 .Net 2.0 的东西都行不通。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-09-17T18:45:56.513

请注意，如果您计划最终在 Windows Vista 或 Windows Server 2008 上进行部署，那么今天可以完成的许多方法都行不通。这是因为引入了一种称为“会话 0 隔离”的新安全功能。

大多数 Windows 服务现在已移至会话 0 中运行，以便将它们与系统的其余部分正确隔离。对此的扩展是，第一个登录系统的用户不再被放置在 Session #0 中，他们被放置在 Session 1 中。因此，隔离将破坏在服务和桌面应用程序之间进行某些类型通信的代码。

今天，在服务和应用程序之间进行通信时，编写可在 Vista 和 Server 2008 上运行的代码的最佳方法是使用适当的跨进程 API，如 RPC、命名管道等。不要使用 SendMessage/PostMessage，因为那样会在会话 0 隔离下失败。

[http://www.microsoft.com/whdc/system/vista/services.mspx](http://www.microsoft.com/whdc/system/vista/services.mspx)

现在，鉴于您的要求，您将陷入困境。对于跨平台问题，我不确定是否支持远程处理。您可能必须下拉并一直回到套接字：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T18:56:47.317

如果这是一个托盘应用程序，而不是一个真正的服务，请注意在使用管道或 TCP/IP 时如何设置通信。如果多个用户登录到一台机器（Citrix、远程桌面），并且每个用户启动一个托盘应用程序“服务”，那么您可能会遇到多个进程试图使用同一个众所周知的端口或管道的情况。当然，如果您不打算支持多个管道，或者如果您拥有真正的服务而不是在每个用户 shell 中运行的托盘应用程序，那么这不是问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T16:53:06.083

让您的服务使用普通的旧 TCP 流套接字在预定义端口上侦听 127.0.0.1。从您的桌面应用程序连接到该端口。

它非常简单，而且完全跨平台。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-06-26T08:26:11.063

你们中有人真的尝试过使用 Mono 进行远程处理吗？它工作得很好。您可能会遇到一些极端情况，但这不太可能。只需不时测试您的应用程序的跨平台（MS.Net <-> Mono）远程处理，以捕捉任何可能的故障。从最近的 Mono 开始，2.4.2 是最新的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-17T16:08:41.743

远程处理是一种选择，但它不是跨平台的。其他一些方法是使用命名管道、IPC 或内核事件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-17T16:15:06.300

有趣的是，我打算建议远程处理！[Mono 1.0 发行说明](http://web.archive.org/web/20060511120304/http://go-mono.com/archive/1.0/features.html)（来自 archive.org ，因为缺少原始位置）提到 System.Runtime.Remoting.dll 作为受支持的库，并且没有说明任何已知问题。

如果远程处理不可用，那么您可能必须实现自己的 TCP 消息帧协议。Windows 没有等效的 UNIX 域套接字用于在同一台机器上进行通信。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-17T16:16:21.850

大多数具有 GUI 组件的服务都以指定用户身份运行，并允许访问桌面。这使您可以通过 COM 或 .NET 访问它，但只能在本地访问（除非您想变得复杂）

就个人而言，我在服务上打开了一个普通的旧套接字 - 它的跨平台，允许多个客户端，允许任何应用程序访问它，不依赖 Windows 安全性为其打开，并允许您的 GUI 以任何你喜欢的语言（因为一切都支持套接字）。

对于托盘应用程序，您需要一个简单的协议进行通信 - 您不妨使用 REST 样式系统向其发送命令，并将 XML (yuk) 或自定义数据格式流式传输回来。

# sql-server - 您如何维护大型 t-sql 程序

> ID：84880
> 
> 赞同：2
> 
> 时间：2008-09-17T16:08:52.040
> 
> 标签：sql-server, tsql, maintainability

我即将继承一组庞大而复杂的存储过程，它们每月对非常大的数据集进行处理。

我们正在调试它们，以便它们与用 VB6 编写的原始过程相匹配。他们决定在 t-sql 中重新编写它们的原因是因为 vb 过程需要几天时间，而这个新过程需要几个小时。

这一切都很好，但我怎样才能使这些现在大量的 t-sql 代码（1.5k+ 行）甚至远程可读/可维护。

非常欢迎任何使 t-sql 不那么头痛的经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T16:12:51.470

首先，创建一个包含 .sql 文件的目录并在其中维护它们。将这组 .sql 文件添加到修订控制系统。SVN 运行良好。有一个工具可以将这些加载到您的数据库中，覆盖任何现有的。

有一个测试数据库和基线报告，显示每月处理的输出应该是什么样子。您的测试也应该采用受版本控制的 .sql 文件的形式。

您现在可以随心所欲地重构您的过程，然后运行您的测试以确认正确的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T16:16:53.627

对于格式化/漂亮的 SQL，我在**[http://www.sqlinform.com/](http://www.sqlinform.com/)**上取得了成功——您可以试用免费的在线版本，也可以使用桌面版本。

> *SQLinForm 是所有主要数据库（ORACLE、SQL Server、DB2 / UDB、Sybase、Informix、PostgreSQL、MySQL 等）的自动 SQL 代码格式化程序，具有许多格式化选项。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T16:31:01.940

一定要从重新格式化代码开始，尤其是缩进。

然后将 SQL 模块化。在它们自己的独立文件中将块提取到更小的、描述性命名的过程和函数中。我发现仅此一项就可以很好地提高我对大型 SQL 文件的理解。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-18T21:48:42.743

ApexSQLScript 是一个用于编写整个数据库脚本的出色工具 - 然后您可以将其签入源代码控制并管理更改。

我还发现，始终记录存储过程可以让您使用 sys.sql_modules 中有关源代码的数据提取有关它们的信息 - 您可以使用标签或其他任何东西来帮助记录子系统。

此外，使用模式（甚至多个数据库）——这将真正有助于将您的数据库划分为逻辑单元并指出架构问题。

就大型代码而言，我最近发现 SQL2005 CTE 功能在管理具有大量嵌套查询（甚至不是递归）的代码时非常有用。可以声明和构建 CTE，然后在最终语句中使用，而不是管理一堆嵌套和缩进。这也有助于重构，因为删除冗余的嵌套查询和列似乎要容易得多。

存储过程和 UDF 对于管理大型代码库和消除暗角至关重要。我没有发现视图非常有用，因为它们不可参数化（如果结果集很小，则可以在这些情况下使用 UDF）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-17T16:38:00.987

尽量将 SQL 模块化，并进行一组测试，使您能够在需要时维护、重构和添加特性。我曾经有幸继承了一个总计 5000 行的存储过程，但我仍然对它做噩梦。项目结束后，我打印出存储的过程，以便在此过程中破坏 X 树的笑声。在我们公司的一个每周站立会议上，我将它首尾相连，并延伸到整个建筑物的长度。以此为例说明如何不编写和维护存储过程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T16:14:45.490

您可以做的一件事是拥有一个自动化脚本来存储对源代码管理的所有更改，以便您可以查看对过程的更改（使用以前和当前版本的差异）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-18T21:56:43.037

它绝对不是免费的，但是为了保持你的 T-SQL 格式一致，Redgate Software 的[SQL Prompt](http://www.red-gate.com/products/SQL_Prompt/index.htm)非常方便。只要您的 proc 语法正确，几次击键 (Ctrl+K,Y) 就会立即重新格式化它。这些选项使您可以对 SQL 的格式进行大量控制。

# bash - sudo echo "something" >> /etc/privilegedFile 不起作用

> ID：84882
> 
> 赞同：656
> 
> 时间：2008-09-17T16:09:00.840
> 
> 标签：bash, shell, scripting, permissions, sudo

这是一个非常简单的问题，至少看起来应该是，关于 Linux 中的 sudo 权限。

很多时候，我只想将某些内容附加到`/etc/hosts`或类似的文件中，但最终无法做到，因为这两者`>`都是`>>`不允许的，即使使用 root 也是如此。

有没有办法让这项工作无需进入根目录`su`？`sudo su`

* * *

## 回答 #1

> 赞同：979
> 
> 时间：2009-02-15T12:34:20.173

使用`tee --append`或`tee -a`。

```
echo 'deb blah ... blah' | sudo tee -a /etc/apt/sources.list 
```

确保避免引号内的引号。

为避免将数据打印回控制台，请将输出重定向到 /dev/null。

```
echo 'deb blah ... blah' | sudo tee -a /etc/apt/sources.list > /dev/null 
```

记住 ( `-a`/ `--append`) 标志！就像`tee`工作一样`>`，并且会覆盖您的文件。`tee -a`工作方式类似`>>`并将写入文件末尾。

* * *

## 回答 #2

> 赞同：338
> 
> 时间：2008-09-17T16:11:30.177

问题是 shell 确实输出重定向，而不是 sudo 或 echo，所以这是作为您的普通用户完成的。

试试下面的代码片段：

```
sudo sh -c "echo 'something' >> /etc/privilegedfile" 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2008-09-17T16:13:12.093

问题是处理重定向的是你的shell；它正在尝试使用*您的*权限而不是您在 sudo 下运行的进程的权限打开文件。

使用这样的东西，也许：

```
sudo sh -c "echo 'something' >> /etc/privilegedFile" 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2008-09-17T16:11:23.140

```
sudo sh -c "echo 127.0.0.1 localhost >> /etc/hosts" 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2008-09-17T16:14:45.940

正在做

```
sudo sh -c "echo >> somefile" 
```

应该管用。问题是 > 和 >> 由您的 shell 处理，而不是由“sudoed”命令处理，因此权限是您的，而不是您“sudo”进入的用户的权限。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-02-13T20:10:21.420

我会注意到，出于好奇，你也可以引用一个heredoc（对于大块）：

```
sudo bash -c "cat <<EOIPFW >> /etc/ipfw.conf
<?xml version=\"1.0\" encoding=\"UTF-8\"?>

<plist version=\"1.0\">
  <dict>
    <key>Label</key>
    <string>com.company.ipfw</string>
    <key>Program</key>
    <string>/sbin/ipfw</string>
    <key>ProgramArguments</key>
    <array>
      <string>/sbin/ipfw</string>
      <string>-q</string>
      <string>/etc/ipfw.conf</string>
    </array>
    <key>RunAtLoad</key>
    <true></true>
  </dict>
</plist>
EOIPFW" 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2014-03-19T20:53:04.277

在 bash 中，您可以`tee`结合使用`> /dev/null`来保持标准输出干净。

```
 echo "# comment" |  sudo tee -a /etc/hosts > /dev/null 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-09-24T14:41:48.923

一些用户在使用多行时不知道解决方案。

```
sudo tee -a  /path/file/to/create_with_text > /dev/null <<EOT 
line 1
line 2
line 3
EOT 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-09-24T17:50:33.143

使用[Yoo 的答案](https://stackoverflow.com/a/550808/983883)，将其放入您的`~/.bashrc`：

```
sudoe() {
    [[ "$#" -ne 2 ]] && echo "Usage: sudoe <text> <file>" && return 1
    echo "$1" | sudo tee --append "$2" > /dev/null
} 
```

现在你可以运行`sudoe 'deb blah # blah' /etc/apt/sources.list`

* * *

**编辑：**

一个更完整的版本，它允许您通过管道输入或从文件重定向，并包括一个`-a`关闭附加的开关（默认情况下是打开的）：

```
sudoe() {
  if ([[ "$1" == "-a" ]] || [[ "$1" == "--no-append" ]]); then
    shift &>/dev/null || local failed=1
  else
    local append="--append"
  fi

  while [[ $failed -ne 1 ]]; do
    if [[ -t 0 ]]; then
      text="$1"; shift &>/dev/null || break
    else
      text="$(cat <&0)"
    fi

    [[ -z "$1" ]] && break
    echo "$text" | sudo tee $append "$1" >/dev/null; return $?
  done

  echo "Usage: $0 [-a|--no-append] [text] <file>"; return 1
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-04-24T13:43:26.313

通过使用**sed -i****和*****$ a**，您可以在最后一行之后附加包含变量和特殊字符的文本。***

 ***例如，将带有 $NEW_IP 的 $NEW_HOST 添加到 /etc/hosts：

```
sudo sed -i "\$ a $NEW_IP\t\t$NEW_HOST.domain.local\t$NEW_HOST" /etc/hosts 
```

sed 选项解释：

*   ***-i***就地
*   ***$***最后一行
*   ***一个***用于追加

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-06-27T00:41:18.673

您也可以`sponge`从`moreutils`包中使用，而无需重定向输出（即，没有`tee`要隐藏的噪音）：

```
echo 'Add this line' | sudo sponge -a privfile 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-18T05:10:33.613

回声“你好世界” | (sudo tee -a /etc/apt/sources.list)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-08-23T22:55:02.280

怎么样：
回显文本 | sudo dd status=none of=privilegedfile
我想更改/proc/sys/net/ipv4/tcp_rmem。
我做到了：
sudo dd status=none of=/proc/sys/net/ipv4/tcp_rmem <<<"4096 131072 1024000"
用单行文档消除了回声

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-09-16T06:50:35.603

这对我有用：原始命令

```
echo "export CATALINA_HOME="/opt/tomcat9"" >> /etc/environment 
```

工作指挥

```
echo "export CATALINA_HOME="/opt/tomcat9"" |sudo tee /etc/environment 
```

* * *

## 回答 #15

> 赞同：-6
> 
> 时间：2017-01-21T23:05:37.290

`cat >>`您可以更改文件的所有权，然后在使用追加后将其更改回来吗？

```
sudo chown youruser /etc/hosts  
sudo cat /downloaded/hostsadditions >> /etc/hosts  
sudo chown root /etc/hosts 
```

像这样的东西适合你吗？

# jms - JMS（尤其是 Tibco EMS）我可以在消息代理中拥有一个环境吗

> ID：84884
> 
> 赞同：1
> 
> 时间：2008-09-17T16:09:15.423
> 
> 标签：jms, environment, tibco, ems

我有一个带有一些主题的消息代理，以及在其上运行的一组应用程序。现在我想在相同的主题上（如果可以的话，在同一个代理上）运行一组新的相同应用程序（比如 QA 环境）。做这个的最好方式是什么。创建一个新的代理和/或创建一组新的主题很麻烦，因为我们的环境处于严格的官僚主义之下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T22:14:58.713

AFAIK EMS 不支持您建议的任何内容。有几个选项可以得到你正在寻找的东西。

拥有独立的 EMS 服务器将是*理想*的解决方案。这将允许您的非生产环境有一些小问题，而不会在您的生产环境中造成问题。

使用同一台服务器，您可以将特定于环境的前缀添加到所有队列/主题名称上。需要一些应用程序级别设置来使用哪个前缀（qa，dev，test，prod，...）。这可以很好地隔离环境，但如果任何环境的负载真的很重，可能就不会很好地工作。

对于主题，您可以使用一些 JMS 标头属性和消息订阅来确定将它们路由到哪个环境。我不建议这样做，因为它很容易搞砸并破坏两个环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T09:02:06.737

我建议不要在生产和 QA 中同时使用相同的中间件服务器（特别是消息代理），因为在 QA 中，您可能想要进行不想影响生产的负载和浸泡测试。正如约翰所提到的，使用单独的服务器将是最简单的方法。

有点奇怪，为什么在 QA 环境中复制相同的主题集会出现如此严格的官僚主义；你不能只转储EMS的生产安装吗？

FWIW 与一些消息代理，主题和队列的创建有点微不足道。例如，在[Apache ActiveMQ](http://activemq.apache.org/)应用程序开发人员选择他们想要使用的队列和主题名称 - 然后您连接到正确环境的代理，它就可以正常工作（尽管您可以添加安全性以禁止某些用户创建主题/队列，如果您想添加官僚主义:)。

作为旁白; 我一直觉得很可笑的是，在企业环境中，关于允许使用哪些队列/主题名称的政策非常严格——然而在 Web 应用程序中，开发人员可以自由地在他们的应用程序中使用他们想要的任何 URI。毕竟在这两种情况下它们只是逻辑名称——中间件应该能够正常工作并支持审计:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-30T15:19:58.597

此要求可以通过在消息主题/队列或“主题”中作为限定符来实现，因此您可以在同一服务器上将环境模式从 DEV 隔离到 TEST。请记住，不建议跨环境的消息流通过使用相同的 EMS 服务器。

这一特殊要求应在“主题命名约定”中解决，这是 SOA 架构中定义消息格式、消息交换模式和主题设计等的经典任务。

例如，您的主题可以是..... DEV 或 TEST 或 UAT 等在哪里

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T23:24:38.210

我不会为同一个应用程序的多个环境使用相同的服务器，您可能会发生串扰，一个环境的消息最终会出现在另一个环境中。复制队列/主题并不复杂，重新配置应用程序应该是一件快速的事情。

您可能想了解的其他概念是桥（可以将到主题/队列的消息复制到另一个）我已经使用它来将来自一个主题的相同消息自动复制到 2 个不同的队列。我知道您可以在某个主题上使用持久订阅者，但这就是队列的用途（恕我直言）

消息选择：仅在消息具有特定标头时才检索消息的能力。

您还可以在网桥上进行消息选择。

# jdedwards - JDEdwards XMLInterop

> ID：84885
> 
> 赞同：2
> 
> 时间：2008-09-17T16:09:16.627
> 
> 标签：jdedwards

想知道是否有人在使用 JDEdwards XMLInterop 功能方面取得了成功。我已经使用了一段时间（使用一个简单的 PInvoke，稍后将发布代码）。我正在寻找是否有更好和/或更强大的方法。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-30T19:43:16.000

正如所承诺的，这里是使用 XML 与 JDEdewards 集成的代码。这是一项网络服务，但可以根据需要使用。

```
namespace YourNameSpace 
```

{

```
/// <summary>
/// This webservice allows you to submit JDE XML CallObject requests via a c# webservice
/// </summary>
[WebService(Namespace = "http://WebSite.com/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
public class JdeBFService : System.Web.Services.WebService
{
    private string _strServerName;
    private UInt16 _intServerPort;
    private Int16 _intServerTimeout;

    public JdeBFService()
    {
        // Load JDE ServerName, Port, & Connection Timeout from the Web.config file.
        _strServerName = ConfigurationManager.AppSettings["JdeServerName"];
        _intServerPort = Convert.ToUInt16(ConfigurationManager.AppSettings["JdePort"], CultureInfo.InvariantCulture);
        _intServerTimeout = Convert.ToInt16(ConfigurationManager.AppSettings["JdeTimeout"], CultureInfo.InvariantCulture);

    }

    /// <summary>
    /// This webmethod allows you to submit an XML formatted jdeRequest document
    /// that will call any Master Business Function referenced in the XML document
    /// and return a response.
    /// </summary>
    /// <param name="Xml"> The jdeRequest XML document </param>
    [WebMethod]
    public XmlDocument JdeXmlRequest(XmlDocument xmlInput)
    {
        try
        {
            string outputXml = string.Empty;
            outputXml = NativeMethods.JdeXmlRequest(xmlInput, _strServerName, _intServerPort, _intServerTimeout);

            XmlDocument outputXmlDoc = new XmlDocument();
            outputXmlDoc.LoadXml(outputXml);
            return outputXmlDoc;
        }
        catch (Exception ex)
        {
            ErrorReporting.SendEmail(ex);
            throw;
        }
    }
}

/// <summary>
/// This interop class uses pinvoke to call the JDE C++ dll.  It only has one static function.
/// </summary>
/// <remarks>
/// This class calls the xmlinterop.dll which can be found in the B9/system/bin32 directory.  
/// Copy the dll to the webservice project's /bin directory before running the project.
/// </remarks>
internal static class NativeMethods
{
    [DllImport("xmlinterop.dll",
        EntryPoint = "_jdeXMLRequest@20",
        CharSet = CharSet.Auto,
        ExactSpelling = false,
        CallingConvention = CallingConvention.StdCall,
        SetLastError = true)]
    private static extern IntPtr jdeXMLRequest([MarshalAs(UnmanagedType.LPWStr)] StringBuilder server, UInt16 port, Int32 timeout, [MarshalAs(UnmanagedType.LPStr)] StringBuilder buf, Int32 length);

    public static string JdeXmlRequest(XmlDocument xmlInput, string strServerName, UInt16 intPort, Int32 intTimeout)
    {
        StringBuilder sbServerName = new StringBuilder(strServerName);
        StringBuilder sbXML = new StringBuilder();
        XmlWriter xWriter = XmlWriter.Create(sbXML);
        xmlInput.WriteTo(xWriter);
        xWriter.Close();

        string result = Marshal.PtrToStringAnsi(jdeXMLRequest(sbServerName, intPort, intTimeout, sbXML, sbXML.Length));

        return result;
    }
} 
```

}

您必须向它发送如下消息：

```
<jdeRequest type='callmethod' user='USER' pwd='PWD' environment='ENV'>
  <callMethod name='GetEffectiveAddress' app='JdeWebRequest' runOnError='no'>
    <params>
      <param name='mnAddressNumber'>10000</param>
    </params>
  </callMethod>
</jdeRequest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T19:42:40.470

对于任何尝试这样做的人，xmlinterop.dll 都有一些依赖项。

您将在此处的胖客户端上找到这些文件 ->c:\E910\system\bin32

这将创建一个“瘦客户端”

```
PSThread.dll
icudt32.dll
icui18n.dll
icuuc.dll
jdel.dll
jdeunicode.dll
libeay32.dll
msvcp71.dll
ssleay32.dll
ustdio.dll
xmlinterop.dll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-05T05:44:48.533

看到这段代码后，我将我们的 JDE Web 服务更改为使用 XML Interop，从那以后我们没有遇到任何稳定性问题。以前我们使用的是 COM 连接器，它经常出现通信故障（可能是连接池问题？），并且很难正确安装和配置。

我们在尝试使用事务时确实遇到了问题，但如果您正在执行简单的单一业务功能调用，这应该不是问题。

**更新：**详细说明事务问题 - 如果您试图通过多个调用保持事务处于活动状态，并且 JDE 应用程序服务器正在处理适度数量的并发调用，则 xmlinterop 调用开始返回“XML 响应失败”消息并且数据库事务处于打开状态，无法提交或回滚。调整内核数量可能会解决这个问题，但就个人而言，我总是尝试在一次调用中完成事务。

# html - 使 CSS 在所有浏览器中呈现相同的最简单或最快的方法是什么

> ID：84912
> 
> 赞同：26
> 
> 时间：2008-09-17T16:13:01.313
> 
> 标签：html, css, styles, browser

在当今所有主要浏览器中正确显示网页是一项非常耗时的任务。

有没有一种简单的方法来制作在每个浏览器中看起来都相同的 CSS 样式？或者至少你有一些技巧可以让这项工作更容易吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-09-17T17:50:51.983

我同意所有“重置”建议和“网格”框架建议，但我确实想补充一点建议：实际上，*每个浏览器的相同目标是无法实现的，因为您无法控制客户端。*例子：字体。

您在 CSS 中声明您的字体样式，但某些 Linux 机器、某些 Mac、某些移动浏览器 - 将没有您指定的字体。这种变化导致不同的文本长度和换行。然后是浏览器版本和运行每个操作系统的差异；不同的浏览器如何实现缩放功能；最终用户可以调整文本大小。相同的渲染只是一个无法实现的目标。

但请放心！这是 CSS 的“艺术”部分：能够灵活地设计，以便优雅地处理浏览器、操作系统和最终用户调整之间的差异。不要追求相同的渲染——你应该争取品牌一致性+适当的体验+灵活性。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-17T16:15:12.243

尝试使用[eric meyer reset](http://meyerweb.com/eric/tools/css/reset/)或[YUI reset](http://developer.yahoo.com/yui/reset/)之类的 css 重置。将有所帮助，但没有简单或完美的方法可以使每个浏览器中的东西看起来都一样

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-09-17T18:29:50.267

按照以下方式组织您的工作流程，它将减少大量时间浪费。

1.  确保**声明一个 doc-type**。
2.  使用其他人在此处提到的重置方法之一。
3.  在你的结构上工作
4.  尽可能避免在同一元素上使用宽度**和填充。**
5.  始终考虑减少不需要的 HTML 和 css，而不是一直添加。
6.  浮动元素时尽量不要使用左右边距。

如果你坚持这些项目，很多最常见的问题都不会出现。

PS 我忘记提到的一项是在 W3 上使用验证器。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-17T16:21:53.007

我总是创建一个基本的 CSS 样式表，它可以在 W3C 完全兼容的浏览器（如 firefox）中工作，然后创建替代浏览器特定的样式表来修复其他浏览器（即 IE6、IE7 等）中的任何样式问题。

您可以在 HTML 中使用以下代码来选择适当的 IE 样式表。

```
<!--[if lte IE 6]>
<link href="/css/eqtr_ie6.css" rel="stylesheet" type="text/css" />
<![endif]--> 
```

您还可以使用 browsershots 等在线网站在不同的[浏览器](http://browsershots.org/)中查看您的网站。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-12-28T00:58:01.570

一开始很费时间，尤其是当你还在学习 DIV+CSS 的时候。然而，当你做了足够多的练习，遇到了足够多的问题并解决了它们之后，你就会知道什么是可行的，什么是不可行的。

然后您就知道如何编写最兼容的样式，从而节省调试时间，并且很少遇到任何主要现代浏览器的问题：IE6、IE7、FF2、FF3、Opera 9、Safari 3 赢/Mac。

是的，这是可能的，并且尽可能简单。一个一个地练习和征服它们，然后您就知道如何在第一次尝试中正确地做事。

好吧，我猜唯一令人费解的怪物应该是IE6。是浏览器。除此之外，ff2、ff3、opera 9、safari win/mac、ie7、ie8在渲染引擎上都比较相似，至少bug比IE6少很多。

我为您（刚刚开始 CSS 之旅的人）提供了一些编码以获得最大 CSS 兼容性的最佳实践：

1.  首先使用**[重置](http://meyerweb.com/eric/thoughts/2007/05/01/reset-reloaded/)**。它让您头脑清醒，并确保您工作的每一步。
2.  **不要在同一个元素上使用填充（左右）和宽度，**除非你很清楚它是如何工作的。
3.  如果一个元素是浮动的，如果父元素还没有高度，则给它的父元素**overflow:hidden 和 height: 1% 。**
4.  **不要同时给元素margin-top 或margin-bottom**，而只给元素margin-top 或margin-bottom。因为相邻元素的边距相互折叠，使得定位对于新手来说有些不可预测。
5.  如果一个元素是浮动的，给它**display:inline**。
6.  **除非您的脚本需要它，否则**不要依赖 z-index 。****
***   如果在 IE6 中发生任何奇怪的事情，请在该元素上使用**height:1% 。****

 **根据我的经验，这些东西真的会真正帮助你解决潜在的问题。使用它们，它们可以将您遇到任何耗时问题的机会减少**80%**。实际上，在处理特定标签时，还有比这些更琐碎的技巧，但让我们收工。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-17T16:15:39.573

[雅虎 CSS 基金会](http://developer.yahoo.com/yui/base/)将提供帮助。要标准化格式，您将需要重置和基础。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-17T17:51:08.613

首先，您可以尝试重置，就像这里提到的其他人一样，您可以使用这段 css 进行快速边距和填充重置：

```
*{margin: 0; padding: 0} 
```

当你设计你的 css 时，确保你使用的是现代的、符合标准的浏览器（我个人推荐 firefox 3，它有一个优秀的[web 开发工具栏](https://addons.mozilla.org/en-US/firefox/addon/60)，你可以在浏览器中编辑 css）。这样做肯定会使您的网站在所有新浏览器中看起来都不错。

您遇到的大多数布局问题可能是由 Internet Explorer 对框模型的[错误解释](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)引起的，您可以通过从不同时设置宽度和边距或填充来避免这种情况。这可能看起来很烦人，但事实并非如此，只需将填充或边距应用于设置了宽度的元素内部的内容。

当然存在更多问题，但这可能是最常见和最烦人的问题，对于更具体的问题，您可以随时尝试 google。此外，最近我正在考虑忽略 IE6 和旧版浏览器，如果我的网站的观众允许的话，在网页设计网站上你永远找不到任何人使用 IE6，对吧？当然，这通常是不可能的，因为很多（疯狂的；））人仍在使用 IE6。

此外，如果您需要测试您的网站，[browsershots](http://browsershots.org/)是一种快速的免费方式。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-17T21:29:21.863

确保包含正确的 DOCTYPE。

我仍然看到人们经常处理盒子模型问题，因为他们忘记了包含文档类型。如果没有正确的文档类型，Internet Explorer 会以“怪癖模式”呈现，其他浏览器也会在较小程度上呈现。如果您包含正确的文档类型，浏览器会切换到“标准模式”并且表现得非常相似。

除此之外，如果你以此为生，你会很快学会并记住那些微妙的角落案例，其中 IE 解释的东西与 Firefox 等略有不同。有了一些经验，完全有可能在你最喜欢的浏览器中设计整个页面，并且只需对 CSS 进行非常微小的调整，使其在其他浏览器中呈现几乎像素完美。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-17T16:16:44.703

随时在所有浏览器上测试您的 CSS。在你的宠物浏览器中让它像素完美却发现它在其他浏览器中的方式很糟糕。

采用这种方法将使您更容易理解在所有主要浏览器上的工作原理。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-17T16:18:38.180

我已经成功使用[此处](http://meyerweb.com/eric/tools/css/reset/reset.css "CSS 重置")提供的 Eric Meyer CSS 重置。它基本上覆盖了一堆默认的浏览器 CSS 样式。话虽如此，仍然存在很多差异（可能是一些让您感到困扰的差异，例如盒子模型差异等。在这种情况下，使用[Blueprint](http://code.google.com/p/blueprintcss/ "蓝图 css 框架")处理您的大部分 css 可能会更好。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-17T16:18:48.117

使用 CSS 重置将为所有内容提供相同的起点，但对于超出该起点所做的更改无济于事。我不能说真的有任何简单的方法。一种解决方案是坚持使用一组有限的 CSS，您知道这些 CSS 在您想要支持的所有浏览器中都能正常工作。你可能不能做很多更花哨的 CSS 东西，但是你的 CSS 调试时间应该会大大减少。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-09-17T16:20:23.633

您还可以查看 CSS 框架，例如[Blueprint](http://code.google.com/p/blueprintcss/)或[css-boilerplate](http://code.google.com/p/css-boilerplate/)或[yui 网格](http://developer.yahoo.com/yui/grids/)框架。通常，这些框架为您设置了一组标准的 css 类定义，您可以将其应用于元素以特定和定义的方式布置它们。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-09-17T16:20:52.760

如果它需要像素完美，那么您需要在样式表中使用 px 。使用[css 重置样式表](http://developer.yahoo.com/yui/base/)，然后根据像素调整所有内容的大小。

为了确保您的 css 在不同的浏览器中正确呈现，您可能会发现[BrowserShots](http://browsershots.org/)之类的服务很有用，但是，我认为您会发现很难在所有浏览器中获得绝对一致性。

我个人的偏好是使用正确的标记和 css，忽略任何浏览器黑客，并设计布局以优雅地降级。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-09-17T16:23:20.867

遵守严格的文档类型也会处理许多差异。另外，我通常会添加一个 <div> 标签来封装正文中的所有内容，因为我注意到 firefox 与 ie 将正文标签作为顶级元素处理的方式有所不同。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-17T16:36:39.803

我喜欢首先针对 Firefox 进行开发，通常使用 Yahoo 的 YUI 进行重置（以及使用网格来设置页面的基本结构），并使用 IE 条件指令来覆盖 IE 以*不同*方式处理的格式。

**索引.html**

> `<head>
> <link rel="stylesheet" type="text/css" media="all" href="styles/yui/grids/base-min.css" />
> <link rel="stylesheet" type="text/css" media="all" href="styles/yui/grids/grids.css" />
> <link rel="stylesheet" type="text/css" media="all" href="styles/screen.foo.css" />
> <link rel="stylesheet" type="text/css" media="print" href="styles/print.foo.css" />`
> 
> `<!--[if gt IE 5]> <link rel="stylesheet" type="text/css" href="styles/ie.screen.foo.css" /> <![endif]-->
> </head>`

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-18T20:53:25.000

首先为 Firefox 开发。您可以在其他浏览器中进行测试，但不必担心修复，直到它在 Firefox 中按您想要的方式工作。然后转到其他基于标准的浏览器，即 Safari 和 Opera。如果您编写了良好的 HTML 和 CSS，那么在这些浏览器中应该不需要太多工作。

然后继续讨论 IE。使用条件注释来定位特定的 IE 版本。IE 7 应该相当简单，对于 IE 6，您可能会发现您必须牺牲设计的某些部分才能使其轻松工作。没关系，IE 6 即将推出，所以如果您不完全支持它，请不要担心。透明 PNG 通常是最大的问题，AlphaImageLoader 并不是在所有情况下都能解决问题。

如前所述，像 Eric Meyer 的 CSS 重置是一个很好的起点，使用它来根据您的需要构建自己的重置。除此之外，答案很简单：没有灵丹妙药。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2009-01-30T02:22:20.420

[网站是否需要在每个浏览器中看起来都完全相同？](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)

除此之外，我想熟能生巧。并阅读有关您可能偶然发现的潜在问题的所有信息。使用重置文件、正确的文档类型、验证器和框架可能会在一定程度上帮助您，但最终*您*可以控制代码，只有*您*确切知道您希望它看起来像什么。该代码可能是有效的，并且浏览器可能会完全按照您的要求执行，但它看起来仍然不像您想要的那样。

您使用 CSS 进行布局的次数越多，您遇到的问题就越多，您找到的解决方法就越多，您学到的东西就越多。在完全使用结构化、语义化的 HTML 和整洁的 CSS 制作布局几年之后，我很少需要花费大量时间来纠正一个或另一个浏览器中的缺陷。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2009-01-30T03:03:21.787

*   使用重置代码段
*   使用 Web 标准进行开发
*   验证您的标记和 CSS
*   不要在元素的相同部分使用边距和内边距
*   使用 IE 条件句
*   在您想要支持的所有浏览器中进行测试
*   明白没有什么是*完美*的，但你可以非常接近。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-17T16:16:17.623

[雅虎用户界面](http://developer.yahoo.com/yui/)( YUI) 有一个[CSS 重置](http://developer.yahoo.com/yui/reset/)实现，旨在在所有浏览器中形成一个通用基线。这应该让你非常接近。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-09-17T16:16:41.740

这确实是一个很难回答的问题——所有浏览器？这是否意味着所有版本？移动浏览器？只是“主线”（opera、firefox、ie 和 safari）？

您甚至不会发现完全符合 CSS 级别 1 的内容，因此您将不得不进行一些调整。以我的经验，opera、firefox 和 safari 在涉及基本内容（定位、浮动、div 等）时都表现相似，而您必须针对 IE 进行调整。

您还可以使用经过测试的 CSS 库或框架，如 yahoo 网格 ( [http://developer.yahoo.com/yui/grids/](http://developer.yahoo.com/yui/grids/) ) 或谷歌的网络工具包 ( [http://code.google.com/webtoolkit/](http://code.google.com/webtoolkit/)等编程接口）。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-09-17T16:17:40.520

如果我使用浮动将页面布局在框中，我倾向于发现外观相同的 CSS。流模型按照您的想法工作，并且它们在所有主要浏览器中都忠实呈现。我知道有些人会告诉我使用大量浮点数是错误的，但它的效果出奇的好。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-17T16:21:59.980

在基础上，不能保证这样的事情会完美地工作。只要浏览器开发人员找到做自己的事情的方法而不是“标准”的做事方式，就会有差异。

我使用[Yahoo User Interface Base CSS](http://developer.yahoo.com/yui/base/#code)取得了积极的成果，但最终即使这样也无法应对 CSS 应该可以实现的更复杂的项目。

最后，我找到了一个不太完美的解决方案，只是让我的框架检查我是否设置了特定于浏览器的样式表。

这是一个 PHP 片段来说明。很抱歉针对特定语言的解决方案，但我想这个想法很清楚，可以用不同的语言实现：

```
$sHTML .= "\t\t<LINK rel=\"stylesheet\" type=\"text/css\" href=\"".$sURLCSS.$sStyle."\" />\n";
if (file_exists($sPathCSS.$sFileStyle."_".BROWSER_AGENT.".".$sExtension))
  $sHTML .= "\t\t<LINK rel=\"stylesheet\" type=\"text/css\" href=\"".$sURLCSS.$sFileStyle."_".BROWSER_AGENT.".".$sExtension."\" />\n";
if (file_exists($sPathCSS.$sFileStyle."_".BROWSER_AGENT."_".BROWSER_VERSION.".".$sExtension))
  $sHTML .= "\t\t<LINK rel=\"stylesheet\" type=\"text/css\" href=\"".$sURLCSS.$sFileStyle."_".BROWSER_AGENT."_".BROWSER_VERSION.".".$sExtension."\" />\n"; 
```

由于没有丢失文件、没有无法识别的标签或其他可能阻塞某些浏览器的代码，框架中的页面按照我们希望它们在客户请求的所有浏览器中呈现的方式呈现。更重要的是，它们这样做不会产生错误（即 FireFox 中的一个空的错误控制台），这使您在实际遇到错误时进行调试变得容易得多。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-17T16:22:59.400

我建议看一下[Blueprint](http://www.blueprintcss.org/)和[960 Grid System](http://960.gs/)。

除了为 Internet Explorer 进行重置和包含 CSS 修复之外，它们都可以让您轻松使用设计网格，从而在构建基于 CSS 的布局时处理大量繁琐的调整。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-17T18:45:22.960

我通常针对[W3C CSS 验证器](http://jigsaw.w3.org/css-validator/)进行开发，然后在各自的浏览器中验证我希望它们的样子。验证对一致的行为大有帮助。

有时我会将页面剥离为仅在我所针对的主要浏览器中验证和正确显示的样式，有时我会通过其他海报提到的特定于浏览器的调整来补充它。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-17T18:50:34.600

css 框架当然有帮助，尽管它们很容易因为一堆你不需要或不使用的样式而变得沉重。

查看 [使用条件注释定位 IE 并](http://www.positioniseverything.net/articles/cc-plus.html)在 Position 上仅使用一个样式表，这是一种在不使用 CSS hack 的情况下提供 IE 版本特定样式的好方法；这允许您通过选择器而不是浏览器将样式规则保持在一起。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-12-28T01:40:35.870

你问错了问题，因为这是回答这个问题的唯一方法：

```
<!DOCTYPE html>
<html>
<head>
  <style>* { background: #fff }</style>
</head>
<body></body>
</html> 
```

没有太多的答案，是吗？:)

其他人都在这里——让你的 CSS在每个浏览器中都能*工作*，不要试图让它*看起来一样*。你不能。

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2008-10-17T00:25:30.190

应用设计锡箔帽

CSS：

```
*{display:none} 
```

# asp.net - .NET 1.1 中的 RIghtFax 深奥错误消息

> ID：84916
> 
> 赞同：0
> 
> 时间：2008-09-17T16:13:50.110
> 
> 标签：asp.net, vb.net, .net-1.1, rightfax

我对使用 VB .NET 1.1 的 RightFax 组件 Interop.RFCOMAPILib.dll 版本 1.0.0.0 有问题。

它适用于多种环境，但不适用于生产环境。

它在异常中返回此消息 - “？” - 。

我该如何解决？我在手册或互联网上找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-09-17T18:45:23.053

记得 rightfax 和互联网上缺乏信息。这不是您问题的答案，但可以切换到带有专用 isdn 传真板的内置 windows 2003 传真服务器，具有自动邮件转发功能

# perl - 如何获取正在执行的 Perl 脚本的完整路径？

> ID：84932
> 
> 赞同：175
> 
> 时间：2008-09-17T16:16:00.353
> 
> 标签：perl, path, location

我有 Perl 脚本，需要在执行期间确定脚本的完整路径和文件名。我发现，根据您调用脚本的方式，脚本会有所不同，有时`$0`包含. 因为工作目录也可能会有所不同，所以我想不出一种可靠地获取脚本的方法。`fullpath+filename``filename``fullpath+filename`

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：265
> 
> 时间：2008-09-18T07:30:54.413

有几种方法：

*   [`$0`](http://perldoc.perl.org/perlvar.html#$0)是 POSIX 提供的当前正在执行的脚本，如果脚本位于或低于 CWD，则相对于当前工作目录
*   此外，`cwd()`和`getcwd()`由`abs_path()`模块提供，[`Cwd`](http://perldoc.perl.org/Cwd.html)并告诉您从何处运行脚本
*   该模块[`FindBin`](http://perldoc.perl.org/FindBin.html)提供了`$Bin`&`$RealBin`变量，这些变量*通常*是执行脚本的路径；该模块还提供`$Script`&`$RealScript`是脚本的名称
*   [`__FILE__`](http://perldoc.perl.org/perldata.html#Special-Literals)是 Perl 解释器在编译期间处理的实际文件，包括其完整路径。

我已经看到前三个（[`$0`](http://perldoc.perl.org/perlvar.html#$0)，[`Cwd`](http://perldoc.perl.org/Cwd.html)模块和[`FindBin`](http://perldoc.perl.org/FindBin.html)模块）在壮观的情况下失败`mod_perl`，产生无价值的输出，例如`'.'`或空字符串。在这样的环境中，我使用模块[`__FILE__`](http://perldoc.perl.org/perldata.html#Special-Literals)并从中获取路径[`File::Basename`](http://perldoc.perl.org/File/Basename.html)：

```
use File::Basename;
my $dirname = dirname(__FILE__); 
```

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2008-09-17T16:19:48.940

$0 通常是您的程序的名称，那么这个怎么样？

```
use Cwd 'abs_path';
print abs_path($0); 
```

在我看来，这应该作为 abs_path 知道您使用的是相对路径还是绝对路径。

**更新**对于今年以后阅读的任何人，您都应该阅读[Drew 的回答](https://stackoverflow.com/a/90721/2877364)。这比我的好多了。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2008-09-17T16:31:53.327

```
use File::Spec;
File::Spec->rel2abs( __FILE__ ); 
```

[http://perldoc.perl.org/File/Spec/Unix.html](http://perldoc.perl.org/File/Spec/Unix.html)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2008-09-17T16:22:39.853

我认为您正在寻找的模块是 FindBin：

```
#!/usr/bin/perl
use FindBin;

$0 = "stealth";
print "The actual path to this is: $FindBin::Bin/$FindBin::Script\n"; 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-09-17T16:29:15.110

您可以使用[FindBin](http://search.cpan.org/~tty/kurila-1.13_0/lib/FindBin.pm)、[Cwd](http://perldoc.perl.org/Cwd.html)、[File::Basename](http://perldoc.perl.org/File/Basename.html)或它们的组合。它们都在 Perl IIRC 的基础发行版中。

我过去使用 Cwd：

密码：

```
use Cwd qw(abs_path);
my $path = abs_path($0);
print "$path\n"; 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-09-18T07:45:24.393

获得`$0`或的绝对路径`__FILE__`是你想要的。唯一的麻烦是如果有人做了 a`chdir()`并且`$0`是相对的——那么你需要在 a 中获取绝对路径`BEGIN{}`以防止任何意外。

`FindBin`试图做得更好，并在`$PATH`与`basename($0)`.

`File::Fu`有`File::Fu->program_name`并且`File::Fu->program_dir`为此。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-17T16:52:24.057

一些简短的背景：

不幸的是，Unix API 没有为正在运行的程序提供可执行文件的完整路径。事实上，执行你的程序可以在通常告诉你的程序它是什么的领域中提供它想要的任何东西。正如所有答案所指出的那样，寻找可能的候选人有各种启发式方法。但是搜索整个文件系统总是可以工作的，如果可执行文件被移动或删除，即使这样也会失败。

但是你不想要 Perl 可执行文件，它是实际运行的，而是它正在执行的脚本。Perl 需要知道脚本在哪里可以找到它。它存储在 中`__FILE__`，而`$0`来自 Unix API。这仍然可以是相对路径，因此请采纳 Mark 的建议并将其规范化为`File::Spec->rel2abs( __FILE__ );`

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2008-09-17T16:21:33.617

你有没有尝试过：

```
$ENV{'SCRIPT_NAME'} 
```

或者

```
use FindBin '$Bin';
print "The script is located in $Bin.\n"; 
```

这实际上取决于它的调用方式以及它是 CGI 还是从普通 shell 运行等。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-07-18T23:12:45.777

为了获得包含我的脚本的目录的路径，我使用了已经给出的答案组合。

```
#!/usr/bin/perl
use strict;
use warnings;
use File::Spec;
use File::Basename;

my $dir = dirname(File::Spec->rel2abs(__FILE__)); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-17T16:34:54.600

[perlfaq8](http://perldoc.perl.org/perlfaq8.html)`rel2abs()`使用on 函数回答了一个非常相似的问题`$0`。该函数可以在 File::Spec 中找到。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-07-01T16:19:13.760

无需使用外部模块，只需一行即可获得文件名和相对路径。如果您正在使用模块并且需要应用相对于脚本目录的路径，则相对路径就足够了。

```
$0 =~ m/(.+)[\/\\](.+)$/;
print "full path: $1, file name: $2\n"; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-04-01T16:27:08.150

你在找这个吗？：

```
my $thisfile = $1 if $0 =~
/\\([^\\]*)$|\/([^\/]*)$/;

print "You are running $thisfile
now.\n"; 
```

输出将如下所示：

```
You are running MyFileName.pl now. 
```

它适用于 Windows 和 Unix。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-11-26T14:01:34.817

```
#!/usr/bin/perl -w
use strict;

my $path = $0;
$path =~ s/\.\///g;
if ($path =~ /\//){
  if ($path =~ /^\//){
    $path =~ /^((\/[^\/]+){1,}\/)[^\/]+$/;
    $path = $1;
    }
  else {
    $path =~ /^(([^\/]+\/){1,})[^\/]+$/;
    my $path_b = $1;
    my $path_a = `pwd`;
    chop($path_a);
    $path = $path_a."/".$path_b;
    }
  }
else{
  $path = `pwd`;
  chop($path);
  $path.="/";
  }
$path =~ s/\/\//\//g;

print "\n$path\n"; 
```

:DD

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-04-18T07:56:16.510

仅使用的问题`dirname(__FILE__)`在于它不遵循符号链接。我必须在我的脚本中使用它来跟随符号链接到实际文件位置。

```
use File::Basename;
my $script_dir = undef;
if(-l __FILE__) {
  $script_dir = dirname(readlink(__FILE__));
}
else {
  $script_dir = dirname(__FILE__);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-08-09T13:36:04.970

```
use strict ; use warnings ; use Cwd 'abs_path';
    sub ResolveMyProductBaseDir { 

        # Start - Resolve the ProductBaseDir
        #resolve the run dir where this scripts is placed
        my $ScriptAbsolutPath = abs_path($0) ; 
        #debug print "\$ScriptAbsolutPath is $ScriptAbsolutPath \n" ;
        $ScriptAbsolutPath =~ m/^(.*)(\\|\/)(.*)\.([a-z]*)/; 
        $RunDir = $1 ; 
        #debug print "\$1 is $1 \n" ;
        #change the \'s to /'s if we are on Windows
        $RunDir =~s/\\/\//gi ; 
        my @DirParts = split ('/' , $RunDir) ; 
        for (my $count=0; $count < 4; $count++) {   pop @DirParts ;     }
        my $ProductBaseDir = join ( '/' , @DirParts ) ; 
        # Stop - Resolve the ProductBaseDir
        #debug print "ResolveMyProductBaseDir $ProductBaseDir is $ProductBaseDir \n" ; 
        return $ProductBaseDir ; 
    } #eof sub 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-12-13T11:57:26.893

问题`__FILE__`在于它将打印核心模块“.pm”路径，而不一定是正在运行的“.cgi”或“.pl”脚本路径。我想这取决于你的目标是什么。

在我看来，[`Cwd`](http://search.cpan.org/~smueller/PathTools-3.40/)只需要为 mod_perl 更新。这是我的建议：

```
my $path;

use File::Basename;
my $file = basename($ENV{SCRIPT_NAME});

if (exists $ENV{MOD_PERL} && ($ENV{MOD_PERL_API_VERSION} < 2)) {
  if ($^O =~/Win/) {
    $path = `echo %cd%`;
    chop $path;
    $path =~ s!\\!/!g;
    $path .= $ENV{SCRIPT_NAME};
  }
  else {
    $path = `pwd`;
    $path .= "/$file";
  }
  # add support for other operating systems
}
else {
  require Cwd;
  $path = Cwd::getcwd()."/$file";
}
print $path; 
```

请添加任何建议。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-02-06T14:39:11.593

没有任何外部模块，对 shell 有效，即使使用 '../' 也能正常工作：

```
my $self = `pwd`;
chomp $self;
$self .='/'.$1 if $0 =~/([^\/]*)$/; #keep the filename only
print "self=$self\n"; 
```

测试：

```
$ /my/temp/Host$ perl ./host-mod.pl 
self=/my/temp/Host/host-mod.pl

$ /my/temp/Host$ ./host-mod.pl 
self=/my/temp/Host/host-mod.pl

$ /my/temp/Host$ ../Host/./host-mod.pl 
self=/my/temp/Host/host-mod.pl 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-09-04T10:32:56.000

所有无库的解决方案实际上并不能用于编写路径的几种方法（想想 ../ 或 /bla/x/../bin/./x/../ 等。我的解决方案看起来像下面。我有一个怪癖：我不知道为什么我必须运行两次替换。如果我不这样做，我会得到一个虚假的“./”或“../”。除此之外，它对我来说似乎很健壮。

```
 my $callpath = $0;
  my $pwd = `pwd`; chomp($pwd);

  # if called relative -> add pwd in front
  if ($callpath !~ /^\//) { $callpath = $pwd."/".$callpath; }  

  # do the cleanup
  $callpath =~ s!^\./!!;                          # starts with ./ -> drop
  $callpath =~ s!/\./!/!g;                        # /./ -> /
  $callpath =~ s!/\./!/!g;                        # /./ -> /        (twice)

  $callpath =~ s!/[^/]+/\.\./!/!g;                # /xxx/../ -> /
  $callpath =~ s!/[^/]+/\.\./!/!g;                # /xxx/../ -> /   (twice)

  my $calldir = $callpath;
  $calldir =~ s/(.*)\/([^\/]+)/$1/; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-10-23T08:51:38.367

没有一个“最佳”答案适合我。使用 FindBin '$Bin' 或 Cwd 的问题是它们返回的绝对路径已解析所有符号链接。在我的情况下，我需要存在符号链接的确切路径 - 与返回 Unix 命令“pwd”而不是“pwd -P”相同。以下函数提供了解决方案：

```
sub get_script_full_path {
    use File::Basename;
    use File::Spec;
    use Cwd qw(chdir cwd);
    my $curr_dir = cwd();
    chdir(dirname($0));
    my $dir = $ENV{PWD};
    chdir( $curr_dir);
    return File::Spec->catfile($dir, basename($0));
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-10-16T15:39:42.603

在 Windows 上使用`dirname`并`abs_path`一起使用对我来说效果最好。

```
use File::Basename;
use Cwd qw(abs_path);

# absolute path of the directory containing the executing script
my $abs_dirname = dirname(abs_path($0));
print "\ndirname(abs_path(\$0)) -> $abs_dirname\n"; 
```

原因如下：

```
# this gives the answer I want in relative path form, not absolute
my $rel_dirname = dirname(__FILE__); 
print "dirname(__FILE__) -> $rel_dirname\n"; 

# this gives the slightly wrong answer, but in the form I want 
my $full_filepath = abs_path($0);
print "abs_path(\$0) -> $full_filepath\n"; 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-08-23T17:39:37.503

```
use File::Basename;
use Cwd 'abs_path';
print dirname(abs_path(__FILE__)) ; 
```

[德鲁的回答](https://stackoverflow.com/a/90721/871821)给了我：

'。'

```
$ cat >testdirname
use File::Basename;
print dirname(__FILE__);
$ perl testdirname
.$ perl -v

This is perl 5, version 28, subversion 1 (v5.28.1) built for x86_64-linux-gnu-thread-multi][1] 
```

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2013-12-03T10:48:48.963

有什么问题`$^X`？

```
#!/usr/bin/env perl<br>
print "This is executed by $^X\n"; 
```

会给你正在使用的 Perl 二进制文件的完整路径。

翻转

* * *

## 回答 #23

> 赞同：-5
> 
> 时间：2008-09-17T16:18:38.943

在 *nix 上，您可能有“whereis”命令，它会搜索您的 $PATH 以查找具有给定名称的二进制文件。如果 $0 不包含完整路径名，则运行 whereis $scriptname 并将结果保存到变量中应该会告诉您脚本所在的位置。

# sharepoint - 如何临时禁用 SharePoint Webpart？

> ID：84964
> 
> 赞同：2
> 
> 时间：2008-09-17T16:20:46.397
> 
> 标签：sharepoint, web-parts

这可以通过设置属性来完成吗？

我更喜欢这种方法，然后在重新添加之前删除所有安全性。（因为这可能会产生其他后果。）

我能想到的另一种选择是将特定的 webpart dll 替换为临时的，然后重新启动 .net 进程，但这不是我喜欢的方法。

还有哪些其他选择？我错过了一些明显的东西吗？

例如，我正在尝试做的是找到一种方法来禁用 web 部件，同时我们更新它正在使用的底层数据库模式。因此，理想情况下，我们希望为所有用户禁用特定 Web 部件，无论是在 mysite 还是社区站点上，进行必要的更改，然后重新启用它。从而减少用户的停机时间。

无论解决方案是什么，我们都需要能够在多个前端服务器上轻松完成，可能是两个场。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-17T18:11:34.943

转到站点操作-> 编辑页面您可以编辑所有 Web 部件。单击要禁用的 Web 部件的“编辑”下拉菜单，然后选择“关闭”。

Web 部件消失了，但不要害怕！它并没有永远消失！

要恢复它：
-> 单击以添加新的 Web 部件 -> 高级 Web 部件库和选项。
您的第一个选项是在“关闭的 Web 部件”中进行选择。单击该链接时，您将显示已关闭的所有 Web 部件的列表。只需添加您想要返回的那个！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T21:35:35.577

在 web.config 中，您可以为 webpart 的 SafeControl 标记设置 safe="false"。这将导致 Web 部件呈现错误消息，直到您将其设置回 true。

[http://technet.microsoft.com/en-us/library/cc287909.aspx](http://technet.microsoft.com/en-us/library/cc287909.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-11-21T20:20:28.577

编写代码在站点的属性包中设置值，通过代码设置值并在Web部件的页面lode中检查属性包的值，如果设置则显示内容，否则跳过。希望你明白，如果不让我知道，我会说清楚。

# c# - Visual Studio Intellisense，c#，没有代码

> ID：84968
> 
> 赞同：1
> 
> 时间：2008-09-17T16:21:01.683
> 
> 标签：c#, visual-studio, intellisense

如果我在设计视图（Web 表单）中打开一个文件，我会为我的显示代码获得智能感知，但不是我的脚本代码。如果我使用源代码编辑器打开，我偶尔会在脚本标签中获得智能感知。

任何人都知道如何让智能感知一直为我的所有代码工作？

和这个一起生活了很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T17:24:03.467

你用的是什么版本？设计视图用于人类可读的元素，您不会在那里编辑代码，因此不需要智能感知。如果您不使用代码隐藏，则页面上应该只有一个`<script runat="server">`标签，您可以在源视图中编辑它。要启用智能感知，请在第一行添加以下内容：

```
<%@ Page Language="C#" %> 
```

如果您更改它，该标签将带有下划线，并表示您需要关闭文件并重新打开它。

如果您在 VS 2008 中，JavaScript 智能感知也将可供您使用。确保在`<script>`标签中指定语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T18:42:36.133

VS2008。到目前为止，重新安装似乎是最好的建议。我正在使用`<%@ Page Language="C#" MasterPageFile="~/common/masterpages/MasterPage.master" %>`. 当我说设计视图时，我的意思是我右键单击文件并选择“视图设计器”——这使我可以访问设计器、拆分和代码视图的工具箱和选项卡（这是我主要工作的视图）。在这种模式下，我的所有`<asp:`标签都获得了智能感知，但随后我失去了`<script>`标签中的所有智能感知。我从来没有能够在`<script>`标签和我的表单中使用智能感知。

我应该说，当我们创建一个网站时，我们不会通过文件>新建>网站来完成。我提到这一点是因为我想知道 VS 在以这种方式创建网站时是否会以不同的方式配置网站，而不是将 VS 指向现有集合包含我们网站的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T16:32:05.167

一些服务包破坏了 Intellisense，过去我不得不重新安装产品或修复。先尝试修复！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T16:36:25.203

我不确定它是否有帮助，但我最近一直在处理一些代码，这些代码使用了一堆使用 NMake 编译的项目。对于那些，如果您右键单击项目并选择 NMake 选项（我猜您可能在那里有一个 Web 表单选项？），就会有一个选项。我发现智能感知通常不会拾取所有内容，除非我设置了正确的包含目录：

1.  右键单击项目。
2.  从对话框左侧的选项树中选择 NMake（或任何你用来“编译”表单的东西）。
3.  在右侧的窗格中，您有望在“智能感知”列表下看到一堆选项。
4.  确保您对智能感知感兴趣的文件位于“包含搜索路径”选项中列出的目录中。

# excel - Excel XML电子表格文件的条件格式中的数组公式？

> ID：84978
> 
> 赞同：0
> 
> 时间：2008-09-17T16:22:00.277
> 
> 标签：excel, office-2003, conditional-formatting, xml-spreadsheet

Excel 通常将条件格式公式视为数组公式，**除非**从 Excel 2002/2003 XML 电子表格文件加载它们。

这只是 Excel 2002/2003 XML 电子表格格式的一个问题……本机 Excel 格式可以正常工作，较新的 Excel 2007 XML 格式 (xlsx) 也是如此。

加载电子表格后，可以通过选择格式化范围、转到条件格式对话框并单击确定来使其正常工作——但这​​只能解决会话的问题。

**测试用例：**

在新工作表中输入以下内容：

```
 A B C
1 N N N
2 x x x
3 x x x
```

在单元格 A1:C1 上创建此条件格式公式（您为格式选择漂亮的颜色）：

```
=(SUM(($A1:$C1="N")*($A$2:$C$2=A$3))>0)
```

这是一个数组公式，只要其中任何一个具有“N”并且“N”下方的第 2 行中的单元格等于当前列的第 3 行中的单元格，就会为 A1、B1 和 C1 激活。

（这已经从现实世界的业务电子表格中简化了。对于测试用例的复杂性，我很抱歉，我正在尝试在这里找到一个更简单的测试用例。）

它可以工作......您可以以任何您想要的方式更改 N 或 x，并且格式可以正常工作。

将此保存为 XML 电子表格。关闭 Excel，然后重新打开文件。格式现在被破坏了。现在，您只能在 A1 为“N”且 A2 与 A3、B3 或 C3 相同时激活条件格式。B1、B2、C1 和 C2 的值对格式没有影响。

现在，选择 A1:C1 并查看条件格式公式。和以前完全一样。点击确定。条件格式再次开始工作，并将在文件打开的整个会话期间工作。

**考虑的解决方法：**

1.  以本机 (BIFF) Excel 格式提供文件。不是一种选择，这些电子表格是由网络服务器动态生成的，这只是我们系统动态生成的几十种工作簿中的一种。

2.  以 Excel 2007 本机 XML 格式 (xlsx) 提供文件。不是一个选项，当前用户群没有 Office 2007 或兼容性插件。

3.  要求用户选择范围，进入条件格式对话框，然后点击确定。在这种情况下，不成熟的用户不是一个选择。

4.  要求用户打开 XML 电子表格，另存为原生 XLS，关闭并重新打开 XLS 文件。**这不起作用！**如果从 XML 文件加载已损坏的格式，则本机 XLS 格式的格式仍然损坏。如果在保存之前执行上述（3），XLS文件将正常工作。

**我最终重写了条件格式以不使用数组公式。所以我想这在某种程度上是“答案”，但它仍然是 Excel 2002/2003 处理 XML 文件中的一个未记录的（如果模糊的话）错误。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T18:41:26.090

我试图重现你描述的问题。这是我发现的。

*   当另存为 XML 电子表格时，在 Windows XP 上使用 Excel 2003 可以始终如一地重现该问题。

*   当另存为标准 xls 电子表格时，无法**在Windows XP 上使用 Excel 2003 重现该问题。**

*   以本机 xlsx 格式保存文件时，无法**在Windows Vista 上使用 Excel 2007 重现该问题。**

*   以 Excel 97-2003 xls 格式保存文件时，无法**在**Windows Vista 上使用 Excel 2007 重现该问题。

    （注意：*所有 Excel 和 Windows 实例都是最新的所有 Windows 更新。*）

我还为每个测试添加了一个简单的条件格式公式。在每种情况下，在保存文件、关闭 Excel 并重新打开文件后，它都按预期工作。

所以答案似乎是在保存文件时使用标准的 Excel 2003 文件格式。

顺便说一句，这是一个非常奇怪的格式公式。很难想象你会如何使用它。它必须是一个非常具体和不寻常的商业案例。我也觉得你的帖子中缺少一些东西。（我不是在指责你不诚实——只是想知道你是否为了可读性而缩短了公式。）如果这不是你使用的*确切*公式，请用完整的公式编辑你的原始帖子，我很乐意重新审视这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-04T14:01:25.687

您可以在以下页面中找到一些用于自学条件格式问题的教程视频： [条件格式](http://www.free-training-tutorial.com/conditional-formatting.html)

# email - 重新发送邀请/操作电子邮件

> ID：84980
> 
> 赞同：1
> 
> 时间：2008-09-17T16:22:24.253
> 
> 标签：email, web-applications, email-spam

我有一个网络应用程序，它发送电子邮件以响应用户发起的操作。这些电子邮件提示收件人回复（包含与特定操作相关的 URL。）

我有一些用户要求“重新发送”功能再次推送该电子邮件。

我的反对意见是，如果原始电子邮件最终进入垃圾邮件文件夹（或者第一次没有全部发送），那么第二次可能会发生同样的事情。（我已经确认电子邮件没有被退回；它们已被收件人的邮件服务器接受。）

那么社区是怎么想的：重新发送和通过电子邮件发送邀请/通知的能力是有用的还是毫无意义的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-17T16:24:56.870

绝对有用，至少从用户的角度来看。通过手动重新发送电子邮件，他们*知道*它已经发送，并且可以立即检查他们的垃圾邮件文件夹以捕获邮件。否则，他们可能不知道邮件，并且在他们抓住它之前它就会从他们的垃圾邮件中消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T16:25:21.797

它可能很有用。用户可能不小心删除了它。这可能是收件人的邮件服务器中的暂时错误。垃圾邮件过滤器不是丢失邮件的唯一原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T16:23:32.537

完全没有意义。但是，如果用户想要它，并且不需要太长时间，它可能是值得的。用户有时很傻，如果这能让他们开心...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T16:25:24.560

有用 - 任何数量的因素都可以在第一次和第二次发送之间发生变化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-17T16:26:16.087

这绝对是有用的。可能有很多情况。例如，用户不小心删除了原始电子邮件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-17T16:26:42.667

您的反对是假设问题是邀请进入垃圾邮件文件夹。您不确定（或者，至少，您暗示了这一点）。他们可能想要一个重新发送按钮，因为他们想提醒客户付款或再次通知他们某事或其他任何事情。原因并不重要，因为效果应该相当容易实现，并允许他们发送任意数量的消息。

其中之一是“客户想要它，这并非完全不合理，也许您应该实施它而不是质疑他们或提出否决它的理由”交易:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T16:27:38.873

这是绝对需要的。仅仅因为您的申请没有被退回并不意味着邮件实际上已经通过了。许多网站会丢弃触发垃圾邮件过滤器的电子邮件，而不是将它们发送到垃圾邮件文件夹。在这种情况下，可以想象用户可能同时选择退出他的站点垃圾邮件过滤，然后想要重试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-17T16:28:38.997

如果你实现它，我会让用户重新输入并重新确认他们输入的电子邮件地址，并且我不允许它被使用超过几次，否则很容易编写一个滥用脚本来炸弹某人的邮箱。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-17T16:29:36.797

没有反对重新发送它的能力的论据，是吗？假设重新发送它最终会以相同的动作结束 - 重新发送它没有害处。

如果有人支持它，而没有人反对它，那应该是一个容易的决定。

# java - 使用 Java 应用程序中的 P4Package (Java) 来验证 Perforce 目录

> ID：84983
> 
> 赞同：2
> 
> 时间：2008-09-17T16:22:48.170
> 
> 标签：java, perforce

在我正在编写的网络应用程序中，用户应该在 Perforce 存储库中输入他们正在输入的节点的路径。该应用程序应该验证输入的目录是否存在于存储库中。

我有 P4Package (p4.jar) 库，并且我配置它足够正确，它几乎适用于所有东西，除了这个目录验证。我正在使用配置的 Env 和路径创建一个 DirEntry（来自 p4.jar），但是当我调用 DirEntry.sync() 时，它发出了一个不正确的命令。我希望它在哪里发出命令：

p4 [config info] dirs directory_argument <-- 使用 dirs 命令验证目录

相反，它发出：

p4 [config info] dirs directory_argument%1 <-- 注意无关的 %1

这总是失败，因为没有一个目录在它们的末尾有 %1 。

有什么帮助吗？是否有其他方法可以使用此包检查目录是否存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T19:42:30.420

听起来同步命令有一个与目录条目和命令有关的错误。我的建议是自己滚动命令，使用 perforce 命令行，因为无论如何都必须设置它才能使用 java 库。

```
Process p = Runtime.getRuntime().exec("p4 dirs " + directory_argument);
BufferedReader stdOut = new BufferedReader(new InputReader(p.InputStream()));
//Read the output of the command and process appropriately after this 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-20T02:17:19.897

因此，我使用的代码确实有一个错误，需要我进行更改并将代码检查到我的存储库中。

然而，从那时起，Perforce 为 P4 客户端提供了他们自己的 Java 包装器，效果更好。我会试一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-03T20:15:51.890

我会尝试另一个库 P4Java，而不是：

[http://tek42.com/p4java](http://tek42.com/p4java)

P4Java is much newer and I've found works much better than the P4Package. It is used in the Hudson project and I've seen it in the Fisheye source, though, I'm not sure if they are using it or not.

# sql-server - 注册新的 SQL 2000 服务器时更改默认端口

> ID：84992
> 
> 赞同：2
> 
> 时间：2008-09-17T16:23:44.970
> 
> 标签：sql-server, port, sql-server-2000

我正在尝试通过不在默认端口上的企业管理器注册外部托管的 SQL 2000 服务器，并且在企业管理器中看不到任何地方可以更改它。

所以，问题是，如果出现以下情况，我如何连接到数据库：

IP 地址为 123.456.789（示例）

端口是 1334

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-17T16:28:38.640

我通过[谷歌](http://www.avianwaves.com/Blog/Default.aspx?id=25&t=Connecting-SQL-Server-Management-Studio)找到了这个：

> 您将逗号和端口号添加到服务器名称的末尾。
> 
> 因此，如果您想在端口 3821 上连接到 MySqlServer.MyDomain.com，请键入...
> 
> MySqlServer.MyDomain.com,3821

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-17T18:13:45.343

Rob 是正确的 - 我有一个 SQL 2000 服务器在不同实例名称的非默认端口上运行，我访问它的方式是这样的：

> [ip 或 dns 名称]\[实例]，[端口]

例子：

> my.server.com\MSSQLSERVER2, 12345

`\\[instance]`如果安装时使用了默认的 sql server 实例，则不需要。

# .net - 如何使用 .NET 2.0 将 PDF 文件作为二进制流传输到浏览器

> ID：84995
> 
> 赞同：3
> 
> 时间：2008-09-17T16:24:26.480
> 
> 标签：.net

我正在寻找一种使用 .NET 2.0（二进制）将 PDF 文件从我的服务器流式传输到浏览器的方法。

我正在尝试从服务器路径中获取现有的 PDF 文件并将其作为二进制文件推送到浏览器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-17T16:26:54.273

给你：[如何使用 ASP.NET 和 Visual C# .NET 将二进制文件写入浏览器](http://support.microsoft.com/kb/306654)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-17T16:30:30.257

1.  设置**内容类型**：`Response.ContentType = "application/pdf"`
2.  设置**ContentDisposition**，如果你想给文件一个新的名字：`Response.Headers.Add("Content-Disposition", "attachment: filename=file.pdf");`
3.  `Response.OutputStream`用科普先生说的写内容。

第 2 步并非绝对必要，但如果您不希望浏览器尝试使用与 ASPX 文件相同的名称保存 PDF，这可能是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T16:25:23.733

将二进制文件写入输出流，`Response.OutputStream`. 然后只需添加标题`Content-Disposition`标题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-17T16:25:51.720

您可以设置一个处理程序或设置正确响应类型的页面，并将 pdf 输出到响应输出缓冲区。******