# StackOverflow 问答 10872000-10872999

# dll - Could not load type from assembly in Mono

> ID：10872000
> 
> 赞同：8
> 
> 时间：2012-06-03T16:29:49.903
> 
> 标签：dll, mono

I'm running a pre-built application using Mono, and it runs alongside a DLL in the same directory (`mysql.data.dll`). When I run the application with Mono, I get this error:

```
Could not load type 'Snowlight.Storage.SqlDatabaseClient' from assembly 'Snowlight, Version=0.1.0.35857, Culture=neutral, PublicKeyToken=null'.
  at System.Collections.Generic.Dictionary`2[System.Int32,Snowlight.Storage.SqlDatabaseClient].Init (Int32 capacity, IEqualityComparer`1 hcp) [0x00000] in <filename unknown>:0
  at System.Collections.Generic.Dictionary`2[System.Int32,Snowlight.Storage.SqlDatabaseClient]..ctor () [0x00000] in <filename unknown>:0
  at Snowlight.Storage.SqlDatabaseManager.Initialize () [0x00000] in <filename unknown>:0
  at Snowlight.Program.Main (System.String[] args) [0x00000] in <filename unknown>:0 
```

Judging by `<filename unknown>`, I am assuming this happens because the DLL it requires isn't found, so how would I get the application to recognize it and use it?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-04T09:23:07.293

尝试从终端像这样运行它：

```
export MONO_LOG_LEVEL=debug
export MONO_LOG_MASK=asm
mono --debug yourapp.exe 
```

现在每个程序集查找都将打印到终端，因此您将能够找出正在查找的内容。

# android - Android layout got messed up when soft keyboard is shown

> ID：10872001
> 
> 赞同：2
> 
> 时间：2012-06-03T16:30:12.587
> 
> 标签：android, layout, soft-keyboard

My layout is getting messed up when the keyboard is shown. ![enter image description here](../Images/c2fa5d564a3300c58bc4eb991abc80a5.png)

Here is my android manifest:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="org.BJ.Food4All"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />

    <application
        android:name="CookTales"
        android:icon="@drawable/application_icon"
        android:label="@string/app_name" >
        <activity
            android:screenOrientation="portrait"
            android:name=".MyFood4AllActivity"
            android:label="@string/app_name" 
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Activities.Mailbox.MailboxActivity"
            android:screenOrientation="portrait"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.About.AboutDialog"
            android:screenOrientation="portrait"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.Settings.SettingsActivity"
            android:screenOrientation="portrait"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name="org.BJ.Food4All.Share_Facebook" />

        <activity android:name=".NewRecipeActivity" 
            android:screenOrientation="portrait"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.RecipeBookTabHostActivity" 
            android:screenOrientation="portrait"
            android:theme="@style/Theme.Light.NoFrame"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:label="@string/searchRecipe_title" >
        </activity>

        <activity android:name=".Activities.NewRecipe.Ingredients" 
            android:screenOrientation="portrait"
            android:label="@string/ingredients_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.NewRecipe.Instructions" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.NewRecipe.NewRecipeTabHost" 
            android:screenOrientation="portrait"
            android:theme="@style/Theme.Light.NoFrame"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:label="@string/newRecipeTabWidget_title" >
        </activity>

        <activity android:name=".Activities.NewRecipe.General" 
            android:screenOrientation="portrait"
            android:label="@string/newRecipeTabWidget_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.MyBookTab" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@style/Theme.Light.NoFrame" >
        </activity>

        <activity android:name=".Activities.RecipeBook.RecipeBookViewGroup"
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.FavouritesTab"
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.GlobalBookTab" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.ShowRecipeTabHost" 
            android:screenOrientation="portrait"
            android:theme="@style/Theme.Light.NoFrame"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:label="@string/instructions_title" >
            <intent-filter>
                <action android:name="org.BJ.Food4All.myApp.NotifyLikeChanged" />
            </intent-filter>   
        </activity>

        <activity android:name=".Activities.RecipeBook.RecipeGlobalInfoTab" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="org.BJ.Food4All.myApp.NotifyLikeChanged" />
            </intent-filter>   

        </activity>

        <activity android:name=".Activities.RecipeBook.RecipeInstructionsTab" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.RecipeIngredientsTab" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.RecipeInfoTab" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.RateRecipeActivity" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.WriteReviewActivity" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.RecipeBook.UserInfoActivity" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="org.BJ.Food4All.myApp.NotifyUserWasUnfriend" />
            </intent-filter>   
        </activity>

        <activity android:name=".Activities.RecipeBook.GlobalBookCategories" 
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity android:name=".Activities.NewRecipe.SnapShot"
            android:screenOrientation="portrait"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.About.AboutActivity"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:label="@string/about_title" >
        </activity>
        <activity android:name="org.BJ.Food4All.Share_Facebook"/>

        <activity
            android:screenOrientation="portrait"
            android:name=".NewRecipeActivity"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:label="@string/newRecipe_title" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.RecipeBookTabHostActivity"
            android:label="@string/searchRecipe_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@style/Theme.Light.NoFrame" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.NewRecipe.Ingredients"
            android:label="@string/ingredients_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.NewRecipe.Instructions"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.NewRecipe.NewRecipeTabHost"
            android:label="@string/newRecipeTabWidget_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@style/Theme.Light.NoFrame" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.NewRecipe.General"
            android:label="@string/newRecipeTabWidget_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.MyBookTab"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@style/Theme.Light.NoFrame" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.RecipeBookViewGroup"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.FavouritesTab"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.GlobalBookTab"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.ShowRecipeTabHost"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@style/Theme.Light.NoFrame" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.RecipeGlobalInfoTab"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.RecipeInstructionsTab"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.RecipeIngredientsTab"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.RecipeInfoTab"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.RateRecipeActivity"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.WriteReviewActivity"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.UserInfoActivity"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.GlobalBookCategories"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.NewRecipe.SnapShot"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>
        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.Signup.LoginActivity"
            android:label="@string/instructions_title"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.Friends.FriendsActivity"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.Top10.Top10Activity"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity
            android:screenOrientation="portrait"
            android:name=".Activities.RecipeBook.AllReviewsActivity"
            android:configChanges="keyboard|keyboardHidden|orientation"
            android:theme="@android:style/Theme.NoTitleBar" >
        </activity>

        <activity 
            android:screenOrientation="portrait"
            android:name="com.paypal.android.MEP.PayPalActivity"
            android:theme="@android:style/Theme.Translucent.NoTitleBar"
            android:configChanges="keyboardHidden|orientation" />

    </application>

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <supports-screens 
        android:smallScreens="false" 
        android:largeScreens="true"
        android:normalScreens="true" 
        android:anyDensity="true" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T16:32:45.597

将此添加到清单中的活动中：

```
<activity android:windowSoftInputMode="adjustPan|stateHidden" /> 
```

# applescript - AppleScript 在双引号之间将字符串插入应用程序

> ID：10872005
> 
> 赞同：1
> 
> 时间：2012-06-03T16:30:36.707
> 
> 标签：applescript, double-quotes

我刚刚为我的 Mac 购买了 Alfred App，我想使用我在网上找到的这个脚本：

```
---------------------------------------------------
--Modified by: Pontus Sundén, http://psu.se
--Icon from: http://findicons.com/pack/1362/private_eye_act_1
---------------------------------------------------
on alfred_script(strQuery)
    --Get the parameters passed to the script - this is the search query
    set strSearchCriteria to SpaceList(strQuery)

    --Try to populated an existing window with the search query
    tell application "Evernote"
        try
            set query string of window 1 to strSearchCriteria
        on error
            --No existing window, open an new one
            open collection window with query string strSearchCriteria
        end try
    end tell
    tell application "System Events" to set frontmost of process "Evernote" to true
end alfred_script

--Take a list of text items and retrun them as a string with a space between each item
on SpaceList(astrItems)
    --Store what the current list delimiter is
    set tmpDelimiters to AppleScript's text item delimiters

    --Set the list delimiter to a space and build the string we want to pass back
    set AppleScript's text item delimiters to " "
    set strReturn to astrItems as string

    --Set the list delimiter back to what it was previously
    set AppleScript's text item delimiters to tmpDelimiters

    --Return the string we built
    return strReturn
end SpaceList 
```

这应该打开印象笔记并搜索一些东西。它工作正常，但不是搜索单词boat，而是搜索带有双引号的“boat”，显然这不会产生匹配项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:43:37.957

您可以使用 UI 脚本来填充搜索字段，如下所示：

```
set xxx to "boat"
activate application "Evernote"
tell application "System Events" to tell process "Evernote"
    set value of text field 1 of group 4 of tool bar 1 of window 1 to xxx
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:01:36.010

你的脚本是完全正确的——通过 AppleScript 传递的搜索词的虚假引用是客户端版本 3 中**已知的 Evernote 错误**（嗯，“已知”如“我前一段时间为它打开了支持票证，Evernote 承认了这一点”；我会添加一个链接到工单，但这些链接对打开它的用户来说是私有的......不过会更新进度）。

在他们解决它之前，您将不得不使用[建议的 GUI 脚本解决方案](https://stackoverflow.com/a/10872544/990363)作为解决方法，或者手动更正搜索字符串。

# javascript - 如何更改函数内部的全局变量的值

> ID：10872006
> 
> 赞同：155
> 
> 时间：2012-06-03T16:30:52.633
> 
> 标签：javascript

我正在使用 JavaScript，并创建了一个全局变量。我在函数外部定义它，我想从函数内部更改全局变量值并在另一个函数中使用它，我该怎么做？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-06-03T22:41:30.730

只需引用函数内部的变量即可；没有魔法，只是使用它的名字。如果它是全局创建的，那么您将更新全局变量。

您可以通过使用在本地声明它来覆盖此行为`var`，但如果您不使用`var`，则如果该变量已被全局声明，则函数中使用的变量名称将是全局的。

这就是为什么始终使用`var`. 因为如果你忘记了它，你可能会不小心开始弄乱全局变量。这是一个容易犯的错误。但是在您的情况下，这会转过来并成为您问题的简单答案。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-06-03T16:34:13.223

```
var a = 10;

myFunction();

function myFunction(){
   a = 20;
}

alert("Value of 'a' outside the function " + a); //outputs 20 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-06-03T16:35:44.347

只需使用该变量的名称即可。

在 JavaScript 中，如果变量是函数的参数，或者您通过`var`在变量名称前键入关键字将它们显式声明为局部变量，则变量仅对函数是局部的。

如果局部值的名称与全局值同名，则使用`window`对象

看到这个[jsfiddle](http://jsfiddle.net/9ZKDx/)

```
x = 1;
y = 2;
z = 3;

function a(y) {
  // y is local to the function, because it is a function parameter
  console.log('local y: should be 10:', y); // local y through function parameter
  y = 3; // will only overwrite local y, not 'global' y
  console.log('local y: should be 3:', y); // local y
  // global value could be accessed by referencing through window object
  console.log('global y: should be 2:', window.y) // global y, different from local y ()

  var x; // makes x a local variable
  x = 4; // only overwrites local x
  console.log('local x: should be 4:', x); // local x

  z = 5; // overwrites global z, because there is no local z
  console.log('local z: should be 5:', z); // local z, same as global
  console.log('global z: should be 5 5:', window.z, z) // global z, same as z, because z is not local
}
a(10);
console.log('global x: should be 1:', x); // global x
console.log('global y: should be 2:', y); // global y
console.log('global z: should be 5:', z); // global z, overwritten in function a
```

## 编辑

在 ES2015 中出现了另外两个关键字`const`and `let`，它们也会影响变量的范围（[语言规范](http://www.ecma-international.org/ecma-262/6.0/#sec-let-and-const-declarations)）

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-03-28T03:54:22.883

```
var a = 10;

myFunction(a);

function myFunction(a){
   window['a'] = 20; // or window.a
}

alert("Value of 'a' outside the function " + a); //outputs 20 
```

使用 **window['variableName']**或**window.variableName**您可以修改函数内的全局变量的值。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-03-10T08:22:55.003

```
<script>
var x = 2; //X is global and value is 2.

function myFunction()
{
 x = 7; //x is local variable and value is 7.

}

myFunction();

alert(x); //x is gobal variable and the value is 7
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-27T23:52:14.680

一个简单的方法是使用**var**

```
var apple = null;
const some_func =()=>{
      apple = 25
}
some_func()
console.log(apple) 
```

# google-app-engine - Google App Engine“搜索”的测试平台存根

> ID：10872009
> 
> 赞同：4
> 
> 时间：2012-06-03T16:31:10.653
> 
> 标签：google-app-engine, testbed

我正在尝试使用开发应用服务器在 Python 中测试 Google App Engine 的新全文搜索功能。

是否有[`search`](https://developers.google.com/appengine/docs/python/search/)允许使用[`testbed`](https://developers.google.com/appengine/docs/python/tools/localunittesting)本地单元测试对其进行测试的存根？

以下是引发异常的示例代码：

```
#!/usr/bin/python
from google.appengine.ext import testbed

from google.appengine.api import search

def foo():
    d = search.Document(doc_id='X',
        fields=[search.TextField(name='abc', value='123')])
    s = search.Index(name='one').add(d)

tb = testbed.Testbed()
tb.activate()
# tb.init_search_stub() ## does this exist?

foo() 
```

抛出的异常`foo()`是：`AssertionError: No api proxy found for service "search"`. 是否为搜索编写了 api 代理？

想法和评论表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T17:27:55.833

**更新**这在 2012 年有效。事情在 2013 年发生了变化：官方支持存根。请参阅@siebz0r 答案。

它不在[受支持的存根列表中](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/testbed/__init__.py#172)（但我假设），但在 simple_search_stub.py 中有一个[SearchServiceStub](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/search/simple_search_stub.py#686)，看起来就像您所追求的那样。

我自己没有测试过，但你可以尝试做这样的事情：

```
testbed = testbed.Testbed()
testbed.activate()

stub = SearchServiceStub()
testbed._register_stub(SEARCH_SERVICE_NAME, stub) 
```

`SEARCH_SERVICE_NAME`应该是`"search"`，并且它也应该出现在 SUPPORTED_SERVICES 列表中，[否则 testbed 将引发异常](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/testbed/__init__.py#353)。

您“注入”这个新服务存根的方式是修改 SDK 的 testbed/__init__.py 或从您的代码中进行。真的不能说哪种方法更好，因为无论哪种方式都将是一种黑客攻击，直到 init_search_stub() 正式出现在列表中。

此外，它还没有在列表中的事实可能是因为它还没有准备好:) 所以，使用它需要您自担风险。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-29T14:23:42.233

似乎从 SDK 1.8.4 开始，可以从 Testbed 启用搜索存根：

```
from google.appengine.api import search
from google.appengine.ext import testbed

try:
    tb = testbed.Testbed()
    tb.activate()
    tb.init_search_stub()
    index = search.Index(name='test')
    index.put(search.Document())
finally:
    tb.deactivate() 
```

# c# - 在 Windows Phone 中检索设备信息

> ID：10872013
> 
> 赞同：2
> 
> 时间：2012-06-03T16:31:30.777
> 
> 标签：c#, windows-phone-7

我如何检索有关 Windows Phone 中已安装设备的信息（例如 gps、蓝牙、加速度计）？

在 windows mobile 中，我可以使用 Status 或 SystemState 类。那么 Windows Phone 呢？

我是这项技术的初学者，我必须为大学做这件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T16:40:35.983

MSDN 上有一个[设备状态示例，](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29)它可以指导您使用[Devicesstatus](http://msdn.microsoft.com/en-us/library/microsoft.phone.info.devicestatus%28v=vs.92%29)类，该类可用于查询键盘和其他可选硬件组件的存在——[据我了解](http://msdn.microsoft.com/en-us/library/ff637514%28v=vs.92%29)，位置传感器（GPS 或其他），蓝牙和可能的加速度计都是最低硬件规范的一部分，因此不会通过此 API 报告这些（因为没有什么可查询的）

# javascript - 用标签包裹单词，保留标记

> ID：10872014
> 
> 赞同：5
> 
> 时间：2012-06-03T16:31:31.017
> 
> 标签：javascript, html, parsing

例如，我有一个带有标记的字符串（来自 html 节点）：

你好***，***这*是我***的***狗*

 ****```
"h<em>e<strong>llo, thi</strong>s i</em><strong>s d</strong>og" 
```

在其中找到一些单词（比如说“hello”和“dog”），将它们包裹在一个 span 中（突出显示）并保存所有标记的最正确方法是什么？

所需的输出是这样的（注意正确关闭的标签）

```
<span class="highlight">h<em>e<strong>llo</strong></em></span><strong>,</strong> <em><strong>thi</strong>s<em> i</em><strong>s <span class="highlight"><strong>d</strong>og</span> 
```

看起来和它应该的一样：

你好***，******这***是*我***的*****狗****_*

 ******** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T19:13:32.343

干得好：

```
//Actual string
var string = "h<em>e<strong>llo, thi</strong>s i</em><strong>s d</strong>og";

//RegExp to cleanup html markup
var tags_regexp = /<\/?[^>]+>/gi;

//Cleaned string from markup
var pure_string = string.replace(tags_regexp,"");

//potential words (with original markup)
var potential_words = string.split(" ");

//potential words (withOUT original markup)
var potential_pure_words = pure_string.split(" ");

//We're goin' into loop here to wrap some tags around desired words
for (var i in potential_words) {

    //Check words here
    if(potential_pure_words[i] == "hello," || potential_pure_words[i] == "dog")

    //Wrapping...
    potential_words[i] = "<span class=\"highlight\">" + potential_words[i] + "</span>";
}

//Make it string again
var result = potential_words.join(" ");

//Happy endings :D
console.log(result); 
```***********

# ruby-on-rails - 推送到heroku后在rails s上找不到Rubygem railties错误

> ID：10872019
> 
> 赞同：2
> 
> 时间：2012-06-03T16:32:26.093
> 
> 标签：ruby-on-rails, git, heroku

我在 Windows 中使用 rails，我第一次将我的应用程序推送到 heroku，之后每次我尝试在本地环境中运行**rails s**时，我都会收到与**Could not find Rubygem railties**相关的错误。推送到 heroku 似乎也失败了，因为每次我尝试点击应用程序的 url 时，我都会收到“我们很抱歉，但页面出现问题”。有谁知道这可能是什么原因以及解决方案是什么？

# java - 检查一个 XML 文件是否是第二个 XML 的“子集”的最简单方法是什么？

> ID：10872020
> 
> 赞同：2
> 
> 时间：2012-06-03T16:32:38.450
> 
> 标签：java, xml, xmlunit

我有两个 XML 文件。第一个 XML 有一堆节点，这些节点也应该出现在第二个 XML 中。第二个 XML 也可能有一些额外的节点。我需要一个可以自动执行此检查的基于 Java 的程序 - 即它应该告诉我给定两个 XML 文件，第一个文件的所有节点都存在于第二个 xml 中。

我在看 Java + XMLUnit。然而，XMLUnit 对此没有确切的解决方案。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:29:10.220

[这是来自 xmlunit 的示例代码](http://xmlunit.sourceforge.net/example.html)。

一种方法实际上是比较两个`XML`s 并找出差异。

```
 public void testCompareToSkeletonXML() throws Exception {
        String myControlXML = "<location><street-address>22 any street</street-address><postcode>XY00 99Z</postcode></location>";
        String myTestXML = "<location><street-address>20 east cheap</street-address><postcode>EC3M 1EB</postcode></location>";
        DifferenceListener myDifferenceListener = new IgnoreTextAndAttributeValuesDifferenceListener();
        Diff myDiff = new Diff(myControlXML, myTestXML);
        myDiff.overrideDifferenceListener(myDifferenceListener);
        assertTrue("test XML matches control skeleton XML " + myDiff, myDiff.similar());
    } 
```

您可以将一个`XML`与另一个进行比较（将一个保留为 skeletal `XML`）以确定一个是否是另一个的子集。

如果这种方式不令人满意，还有另一种方法可以找到给定两个`XML`s 之间的所有差异。

```
 public void testAllDifferences() throws Exception {
        String myControlXML = "<news><item id=\"1\">War</item>"
            + "<item id=\"2\">Plague</item><item id=\"3\">Famine</item></news>";
        String myTestXML = "<news><item id=\"1\">Peace</item>"
            + "<item id=\"2\">Health</item><item id=\"3\">Plenty</item></news>";
        DetailedDiff myDiff = new DetailedDiff(compareXML(myControlXML, myTestXML));
        List allDifferences = myDiff.getAllDifferences();
        assertEquals(myDiff.toString(), 0, allDifferences.size());
    } 
```

有关更多信息，请参阅[XMLUnit 的文档](http://xmlunit.sourceforge.net/api/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T11:18:58.297

第一件事。让我继续记录并说 XMLUnit 是一个宝石。我爱它。如果您正在查看 XML 值/属性/结构等的一些单元测试。您很可能会找到使用 XMLUnit 的现成解决方案。[这是一个很好的起点](http://xmlunit.sourceforge.net/example.html.)。

它是相当可扩展的。它已经带有身份检查（如在 XML 中具有相同的元素和属性以相同的顺序）或相似性检查（如在 XML 中具有相同的元素和属性而不管顺序）。

但是，就我而言，我正在寻找一种稍微不同的用法。我有一个很大的 XML（几百个节点）和一堆 XML 文件（大约 350,000 个）。我不需要比较可以用 XPATH 识别的某些特定节点。它们在 XML 中不一定总是处于相同的位置，但是有一些通用的方法可以用 XPATH 来识别它们。有时，某些节点将根据其他一些节点的值被忽略。只是给一些想法

1.  这里的逻辑是在我想忽略的节点上，即价格。/书店/书[价格>35]/价格

2.  这里的逻辑是在一个相对位置的节点上。我想根据价格的价值忽略作者。这两者是按位置相关的。/书店/书[价格=30]/./作者

经过大量修补后，我选择了一个低技术的解决方案。在使用 XMLUnit 比较文件之前，我使用 XPATH 来屏蔽要忽略的节点的值。

```
 public static int massageData(File xmlFile, Set<String> xpaths, String mask)
        throws JDOMException, IOException {
    logger.debug("Data massaging started for " + xmlFile.getAbsolutePath());
    int counter = 0;

    Document doc = (Document) new SAXBuilder().build(xmlFile
            .getAbsolutePath());

    for (String xpath : xpaths) {
        logger.debug(xpath);
        XPathExpression<Element> xpathInstance = XPathFactory.instance()
                .compile(xpath, Filters.element());
        List<Element> elements = xpathInstance.evaluate(doc);
        // element = xpathInstance.evaluateFirst(doc);
        if (elements != null) {
            if (elements.size() > 1) {
                logger.warn("Multiple matches were found for " + xpath
                        + " in " + xmlFile.getAbsolutePath()
                        + ". This could be a *potential* error.");
            }
            for (Element element : elements) {
                logger.debug(element.getText());
                element.setText(mask);
                counter++;
            }
        }
    } 
```

希望这可以帮助。

# ruby-on-rails - Rails 上的主干：可排序列表

> ID：10872025
> 
> 赞同：0
> 
> 时间：2012-06-03T16:33:01.740
> 
> 标签：ruby-on-rails, list, backbone.js, jquery-ui-sortable

我正在关注 Backbone Railscasts 和可排序列表 Railscast，但我很难将它们放在一起。

**骨干模板：**

```
<ul id="faqs" data-update-url="/api/faqs/sort">
</ul> 
```

**骨干视图：**

```
render: ->
  $(@el).html(@template())
  @collection.each(@appendFaqs)

  $("#faqs").sortable
    axis: 'y'
    update: ->
      $.post($(this).data('update-url'), $(this).sortable('serialize')) 
```

**导轨控制器：**

```
class FaqsController < ApplicationController

  def sort
   params[:faq].each_with_index do |id, index|
      Faq.update_all({position: index+1}, {id: id})
    end
    render nothing: true
  end 
```

**输出：**

```
Started POST "/api/faqs/sort" for 127.0.0.1 at 2012-06-03 01:17:20 +0200
Processing by FaqsController#sort as */*
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `each_with_index' for nil:NilClass):
  app/controllers/faqs_controller.rb:28:in `sort' 
```

我知道我的参数是零。但我不明白为什么在我克隆的 railscast 代码项目中它正在工作。

我看到我应该覆盖toJSON方法（主干），我应该这样走吗？

老实说，我已经失控了。

使用的 Railscast：

*   [http://railscasts.com/episodes/323-backbone-on-rails-part-1](http://railscasts.com/episodes/323-backbone-on-rails-part-1)
*   [http://railscasts.com/episodes/147-sortable-lists-revised](http://railscasts.com/episodes/147-sortable-lists-revised)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:58:13.907

您需要在`<li>`元素上设置一个 id：

```
<li id="faq_1">...</li>
<li id="faq_2">...</li>
<li id="faq_3">...</li>
<li id="faq_4">...</li> 
```

您应该阅读本文以更好地理解[serialize 方法](http://jqueryui.com/demos/sortable/#method-serialize)。

# php - php通过引用分配，通过引用传递

> ID：10872028
> 
> 赞同：1
> 
> 时间：2012-06-03T16:33:15.277
> 
> 标签：php

我知道有通过引用（）*分配并通过引用**传递变量*`$b = &$a` *`function foo( &$var )`*

 *我不明白这是如何工作的：`return($var & 1) & return(!($var & 1))`？[我在这里](http://www.php.net/manual/en/function.array-filter.php)看到了这个片段。

```
<?php

    function odd($var)
    {
        // returns whether the input integer is odd
        return($var & 1);
    }

    function even($var)
    {
        // returns whether the input integer is even
        return(!($var & 1));
    }

    $array1 = array(1, 2, 3, 4, 5);
    $array2 = array(6, 7, 8, 9, 10, 11, 12);

    print_r(array_filter($array1, "odd"));
    // Array ( [0] => 1 [2] => 3 [4] => 5 ) //1,3,5 ..odd

    echo "<br>";

    print_r(array_filter($array2, "even")); 
    //Array ( [0] => 6 [2] => 8 [4] => 10 [6] => 12 ) 6,8,10,12...even

    // I tested with these variables
    echo "<br><br>";

    $var=22;

    echo(odd($var));     //prints 0
    var_dump(odd($var)); //int 0

    $var=11;

    echo (even($var));   //prints nothing
    var_dump(even($var));//boolean false

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T16:37:49.583

`&`这里是[按位“和”](http://php.net/manual/de/language.operators.bitwise.php)，而不是引用运算符。`& 1`检查它是否设置了最低有效位。对于奇数，它被设置，对于偶数，它不是。*

# c# - 如何从 ViewStart 中访问（自定义）Web 助手？

> ID：10872031
> 
> 赞同：2
> 
> 时间：2012-06-03T16:33:57.223
> 
> 标签：c#, asp.net, asp.net-mvc-3, view-helpers

我在我的 MVC3 Razor 应用程序 (ASP.NET) 和 ViewStart 代码中定义了一些自定义助手，我想访问我的自定义助手。

我注意到它们在 _ViewStart 中无法访问，这似乎可以理解，因为 ViewStart 派生自 ViewStartPage 而不是 WebViewPage。

因此，我尝试在自定义 ViewStart 类中定义助手，但事实证明，我需要访问 ViewDataContainer 才能初始化助手。

所以，问题是，我如何从 ViewStart（或自定义 ViewStartPage）访问我的自定义帮助程序，如果没有，我可以用 NULL 初始化 viewDataContainer 构造函数属性。我不希望在我的自定义 ViewStartPage 中需要任何 ViewData 访问权限。

我也尝试实现自定义 ViewStart 类，但它给了我这个错误：

```
CustomViewStart does not implement inherited abstract member 'System.Web.WebPages.WebPageExecutingBase.Execute()' 
```

我应该在那个执行方法中做什么？我不想在 customViewStart 中做任何花哨的事情，只需访问我的助手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T00:01:27.153

好吧，我怀疑这毕竟是可能的，只是需要先整理一些基本的技术细节。

```
public abstract class CustomViewStartPage : System.Web.Mvc.ViewStartPage {
    public Helpers.InvariantHelper ConfigHelper { get; private set; }

    public CustomViewStartPage() : base() {
        ConfigHelper = new Helpers.InvariantHelper();
    }
} 
```

现在，我在我的 WebViewPage 自定义基本页面中定义了几个自定义助手，它们为视图工作。但是，在 ViewStart 中，我需要做一些不需要访问 ViewContext 的事情（这里只是一个简单的例子）（正如我最初认为的那样）。

所以，有了这个，我现在可以在我的 _ViewStart.cshtml 中有这个：

```
@* Views/_ViewStart.cshtml *@
@inherits MyNamespace.Web.Mvc.CustomViewStartPage
@{
    var something = ConfigHelper.DisableParentLayout;
} 
```

当然，也可以像@MortenMertner 所指出的那样使用类的静态成员（从外部对问题的全新看法），但在某些情况下，这可能不是您真正想要的。这里的这个例子毫无意义，但目的是为了说明如何为有需要的人完成它。

另一方面，如果需要访问 ViewContext（另一个有效场景），您可能需要查看我上面评论中的帖子，该帖子描述了如何修改此自定义视图起始页以访问上下文而不会出现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:19:42.377

据我了解， _ViewStart 文件不是常规视图。它只能用于为其他视图设置默认值，例如布局视图。

例如，这是我的 _ViewStart 文件的完整内容：

```
@{ Layout = "~/Views/Shared/Layouts/Wide.cshtml"; } 
```

如果这是真的，那么文件中就不需要自定义帮助程序，并且您可能正在尝试解决一个您一开始就不应该遇到的问题。

顺便说一句，您可以在 Web.config 中添加程序集和命名空间，以避免在特定视图中导入它们。我用它来导入我的模型、枚举和扩展方法。

# .net - .Net multipart/form-data form enctype 和 UTF-8 “特殊”字符 => �（MVC w/HttpPostedFileBase）

> ID：10872034
> 
> 赞同：7
> 
> 时间：2012-06-03T16:34:07.397
> 
> 标签：.net, asp.net-mvc, file-upload, utf-8, httppostedfilebase

目标：

将带有 UTF-8 字符的 CSV 文件上传/发布到 MVC 操作，读取数据并将其粘贴到数据库表中。

问题：

只有纯文本字符才能通过。像 á 这样的 UTF-8 “特殊”字符在代码和数据库中没有正确通过，它们呈现为这个字符 => �。

更多的：

我确信这不是我的 C# 代码的问题，尽管我已经包含了下面的重要部分。

我认为问题在于上传的文件被编码为纯文本或“纯/文本”MIME 类型，但我可以通过将文件扩展名更改为 .html 来更改它

概括：

如何获得 enctype 属性设置为“multipart/form-data”的表单以正确解释已发布文件中的 UTF-8 字符？

研究：

从我的研究来看，这似乎是一个没有共同和明确解决方案的常见问题。

我也找到了比 .Net 更多的 java 和 PHP 解决方案。

* * *

*   csvFile 变量的类型为 HttpPostedFileBase

*   这是 MVC 动作签名

`[HttpPost]`

`public ActionResult LoadFromCsv(HttpPostedFileBase csvFile)`

* * *

我尝试过的事情：

1)

```
using (Stream inputStream = csvFile.InputStream)
{
    byte[] bytes = ReadFully(inputStream);
    string bytesConverted = new UTF8Encoding().GetString(bytes);
} 
```

2)

```
using (Stream inputStream = csvFile.InputStream)
{
    using (StreamReader readStream = new StreamReader(inputStream, Encoding.UTF8, true))
    {
        while (!readStream.EndOfStream)
        {
            string csvLine = readStream.ReadLine();
            // string csvLine = new UTF8Encoding().GetString(new UTF8Encoding().GetBytes(readStream.ReadLine())); // stupid... this can not be the way!
        }
    }
} 
```

3)

```
<form method="post" enctype="multipart/form-data" accept-charset="UTF-8"> 
```

4)

```
<input type="file" id="csvFile" name="csvFile" accept="UTF-8" />

<input type="file" id="csvFile" name="csvFile" accept="text/html" /> 
```

5)

当文件具有 .txt 扩展名时，HttpPostedFileBase 的 ContentType 属性为“text/plain”

当我将文件扩展名从 .txt 更改为 .csv 时，HttpPostedFileBase 的 ContentType 属性为“application/vnd.ms-excel”

当我将文件扩展名更改为 .html 时，HttpPostedFileBase 的 ContentType 属性为“text/html”——我认为这会成为赢家，但事实并非如此。

* * *

在我的灵魂中，我必须相信这个问题有一个简单的解决方案。令我惊讶的是，我自己无法解决这个问题，在文件中上传 UTF-8 字符是一项常见任务！为什么我在这里失败了？！？！

也许我必须为网站调整 IIS 中的 mime 类型？

也许我需要不同的 DOCTYPE / html 标签 / meta 标签？

* * *

@加布-

这是我的帖子在提琴手中的样子。这真的很有趣，因为 � 很简单，就在 post 值中。

```
http://localhost/AwesomeGeography/GeoBytesCities/LoadFromCsv?adsf HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://localhost/AwesomeGeography/GeoBytesCities/LoadFromCsv?adsf
Content-Type: multipart/form-data; boundary=---------------------------199122566726299
Content-Length: 354

-----------------------------199122566726299
Content-Disposition: form-data; name="csvFile"; filename="cities_test.html"
Content-Type: text/html

"CityId","CountryID","RegionID","City","Latitude","Longitude","TimeZone","DmaId","Code"
3344,10,1063,"Luj�n de Cuyo","-33.05","-68.867","-03:00",0,"LDCU"
-----------------------------199122566726299-- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T19:30:39.130

我有同样的问题，你可以使用

StreamReader reader = new StreamReader(archivo_origen.InputStream, Encoding.GetEncoding("iso-8859-1"));

它有效，“iso-8859-1”适用于拉丁语衍生语言，如西班牙语、aleman、frances

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T17:28:45.387

根据给出的信息，我猜问题出在文件编码本身 - 而不是您的代码。

我进行了一个简单的测试来证明这一点：

1.  我从 Excel 导出了一个包含特殊字符的简单 csv 文件。

2.  然后，我通过下面的表单和操作方法上传了它。

形式

```
<form method="post" action="@Url.Action("UploadFile", "Home")" enctype="multipart/form-data">
    <input type="file" id="file" name="file" />
    <input type="submit" />
</form> 
```

动作方法

```
[HttpPost]
public ActionResult UploadFile(HttpPostedFileBase file)
{
    using (StreamReader reader = new StreamReader(file.InputStream, System.Text.Encoding.UTF8))
    {
        string text = reader.ReadToEnd();
    }

    return RedirectToAction("Index");
} 
```

在这种情况下，我遇到了和你一样的问题 - 特殊字符被替换为�。

我在记事本中打开文件，特殊字符在那里正确显示，所以似乎不是文件问题，但是当我打开“另存为”对话框时，选择的编码是“ANSI”。我将其切换为 UTF-8 并保存，通过上传器运行，一切正常。

# objective-c - 防止键盘分裂并阻止它

> ID：10872036
> 
> 赞同：1
> 
> 时间：2012-06-03T16:34:19.883
> 
> 标签：objective-c, ios, xcode, ios5, uikeyboard

我可以使用 UIKeyboardWillChangeFrameNotification 来阻止用户更改键盘布局吗？我有一些按钮，我不想要拆分键盘，因为它会产生一些 ui 问题。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:38:16.723

不，您无法控制系统键盘的行为。您唯一真正的选择是让您的 UI 与拆分的 UI 一起正常工作。但请记住，由于拆分键盘可以移动，因此它是否覆盖了界面的某些部分并不重要——如果用户拆分他们的键盘，将其移出他们试图与之交互的方式然后成为他们的问题。

# qt - 加载媒体文件

> ID：10872038
> 
> 赞同：0
> 
> 时间：2012-06-03T16:34:24.063
> 
> 标签：qt, memory, media, phonon

我正在使用带有声子的 Qt 来播放一些 mp3 文件。问题是我需要多个 mp3 文件一起运行，并且它们没有以同步的方式播放，尤其是当我命令搜索时。

我注意到从硬盘驱动器同步比从 USB 驱动器更好。该程序似乎没有将整个文件加载到内存中。由于我需要将此程序放在 USB 驱动器上，有没有办法将文件分配到内存中然后从中播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:32:51.673

如果您关心的是从文件系统读取，也许您可​​以提前将声音文件缓存到[QBuffer](http://qt-project.org/doc/qt-4.8/qbuffer.html)对象中，然后在[`Phonon::MediaSource(QIODevice * ioDevice)`](http://qt-project.org/doc/qt-4.8/phonon-mediasource.html#MediaSource-6)

这样您就不再依赖文件系统来维持稳定的 IO。它在你想要的内存中。

# liferay - 在 Quantcast、Alexa 等中查看 Liferay 门户

> ID：10872039
> 
> 赞同：0
> 
> 时间：2012-06-03T16:34:31.273
> 
> 标签：liferay, meta-tags, static-content

我在 Internet 上有一个门户网站，我想在 Alexa、Quantcast 和其他类似网站等网站上注册它以进行排名和网络分析。

但是，在大多数情况下，我必须在门户中放置一个 HTML 文件，但我不知道如何，因为所有上传的文件都是 Liferay 中的 Web 内容，并且地址不是这些站点要查找的地址.

在其他情况下，我必须添加一个额外的元数据标签，但我唯一可以修改的是关键字元标签。

我不知道如何将文件专门放在门户中或在头部添加特殊的元标记。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T09:00:55.123

您可以将它们添加到您的主题中。查看 portal-normal.vm 以在 head 部分添加元标记。如果你想包含任何 javascript 片段，你可以创建一个单独的 footer.vm。

# python - 重构代码/合并函数（例如嵌套的 for 循环顺序）

> ID：10872049
> 
> 赞同：2
> 
> 时间：2012-06-03T16:36:09.970
> 
> 标签：python, for-loop, refactoring, dry

只是一点背景：我正在制作一个程序，用户输入一个框架文本、两个数字（下限和上限）和一个单词列表。输出是对骨架文本的一系列修改。

样本输入：

```
text = "Player # likes @." (replace # with inputted integers and @ with words in list)
lower = 1
upper = 3
list = "apples, bananas, oranges" 
```

用户可以选择先迭代数字：

```
Player 1 likes apples.
Player 2 likes apples.
Player 3 likes apples. 
```

或者先说一句话​​：

```
Player 1 likes apples.
Player 1 likes bananas.
Player 1 likes oranges. 
```

我选择通过基于数字键（用户输入的整数）或单词键（来自输入列表中的单词）创建不同类型的字典来拆分这两种输出方法，然后迭代字典中的值。

以下是两种类型的字典创建：

```
def numkey(dict): # {1: ['Player 1 likes apples', 'Player 1 likes...' ] }

    text, lower, upper, list = input_sort(dict)
    d = {}

    for num in range(lower,upper+1):
        l = []
        for i in list:
            l.append(text.replace('#', str(num)).replace('@', i))
        d[num] = l
    return d

def wordkey(dict): # {'apples': ['Player 1 likes apples', 'Player 2 likes apples'..] }

    text, lower, upper, list = input_sort(dict)
    d = {}

    for i in list:
        l = []
        for num in range(lower,upper+1):
            l.append(text.replace('#', str(num)).replace('@', i))
        d[i] = l
    return d 
```

很好，我有两个单独的函数来创建不同类型的字典，但我看到两者之间有很多重复。有什么方法可以让我创建一个字典函数并将不同的值传递给它，这会改变嵌套 for 循环的顺序以创建我正在寻找的特定 {key : value} 对？

我不确定如何做到这一点。有什么与函数式编程或其他范式相关的东西可能对此有所帮助吗？这个问题有点抽象，比任何东西都更注重风格/设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:00:44.860

您不需要字典来生成输出。你可以使用类似的东西：

```
import itertools

numbers = range(lower, upper + 1)
words = "a, b, c".split(", ")

data = (numbers, words) if numbers_first else (words, numbers)
for n, w in itertools.product(*data):
    if not numbers_first: n, w = w, n
    print("Player %d likes %s." % (n, w)) 
```

为了避免`if`循环内部，您可以动态生成格式字符串，例如：

```
template = "Player # likes @."
subs = ("{n}", "{w}") if numbers_first else ("{w}", "{n}")
format = make_format(template, subs) # escape {}, replace # and @

# ...
for n, w in product(*data):
    print(format.format(n=n, w=w)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:55:21.357

我认为在这种情况下，与其将两个进程强制为一个函数，不如让每个函数更短：

```
def numkey(dict):
    text, lower, upper, list = input_sort(dict)
    d = {x: [text.replace('#',str(x)).replace('@',item) 
            for item in list.split(', ')] for x in xrange(lower,upper+1)}
    return d

def wordkey(dict):
    text, lower, upper, list = input_sort(dict)
    d = {item: [text.replace('#',str(x)).replace('@',item) 
            for x in xrange(lower,upper+1)] for item in list.split(', ')}
    return d 
```

理论上，您可以使用 a 或类似的东西重构 dict 创建`make_dict(dict, outer, inner)`，但我认为对于如此短的代码位最终不太清楚，特别是考虑到您必须以某种方式预处理 int。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T18:00:27.873

这是一个更通用的方法：

```
from itertools import product

def generate(skeleton, replacements):
    values = (product([k], v) for k, v in replacements.items())
    for p in product(*values):
        s = skeleton
        for a, b in p:
            s = s.replace(a, str(b))
        yield s 
```

`replacements`应为字典`{placeholder: list of values}`，例如：

```
gen = generate("Player # likes @.", {'#': range(1,3), '@': ['apples', 'bananas']})    
for phrase in gen:
    print phrase 
```

印刷

```
Player 1 likes apples.
Player 2 likes apples.
Player 1 likes bananas.
Player 2 likes bananas. 
```

如果您需要其中一个值是“静态的”，只需提供一个单元素列表：

```
gen = generate("Player # likes @.", {'#': [1], '@': ['apples', 'bananas']}) 
```

请注意，这适用于任意数量的占位符：

```
gen = generate("Player # likes @ and can $", {
    '#': range(1,3), 
    '@': ['apples', 'bananas'],
    '$': ['swim', 'run', 'jump']
}) 
```

# c++ - 我的浮动操作有问题

> ID：10872053
> 
> 赞同：2
> 
> 时间：2012-06-03T16:36:52.673
> 
> 标签：c++, operators

我一定是错过了什么，这是怎么回事？

```
float controlFrameRate = 1/60; 
```

它应该分配像 0.0166666667 这样的东西，但它的输出是 0.00000 等等。视觉工作室只是在骗我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T16:39:07.247

那是因为`1/60`是一个整数，它是0，因为整数除法会截断。这用于初始化浮点数，`0.`您可以通过首先将 RHS 表达式设为浮点数来修复它：

```
float controlFrameRate = 1.0f/60; 
```

的

```
float controlFrameRate = 1/60.0f; 
```

在 C++ 中，诸如 等的字面量`1`是`42`, `int`, `1.0`are `3.1416`，`double`而`f`in`1.0f`使字面量为 a `float`。请注意，在`f`上面的示例中可能已经省略了。但是，如果双精度值超出浮点数范围，则将双精度值分配给浮点数可能会出现问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T16:40:58.150

一个整数除以另一个整数产生一个整数，并且是一种截断操作。您将获得小于或等于实际值的值。

使至少一个常量浮点来修复它：

```
float controlFrameRate = 1.0 / 60;
float controlFrameRate = 1 / 60.0;
float controlFrameRate = 1.0 / 60.0; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T16:40:18.457

做

```
 float controlFrameRate = 1.f/60; 
```

或者

```
 float controlFrameRate = 1/60.f; 
```

或者

```
 float controlFrameRate = 0.1f/6; 
```

;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T16:40:20.990

你应该使用`1/60.0`. 否则你不会得到`float`结果。

# spring - 延迟加载儿童投掷会话错误

> ID：10872055
> 
> 赞同：0
> 
> 时间：2012-06-03T16:37:10.297
> 
> 标签：spring, hibernate, lazy-loading

在我的 TagController 中调用 purchaseService.updatePurchase(purchase) 时出现以下错误：

```
SEVERE: Servlet.service() for servlet [PurchaseAPIServer] in context with path [/PurchaseAPIServer] threw exception [Request processing failed; nested exception is org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.app.model.Purchase.tags, no session or session was closed] with root cause
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: com.app.model.Purchase.tags, no session or session was closed
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:383)
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:375)
    at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:368)
    at org.hibernate.collection.PersistentSet.add(PersistentSet.java:212)
    at com.app.model.Purchase.addTags(Purchase.java:207)
    at com.app.controller.TagController.createAll(TagController.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

***标签控制器：***

```
@RequestMapping(value = "purchases/{purchaseId}/tags", method = RequestMethod.POST, params = "manyTags")
@ResponseStatus(HttpStatus.CREATED)
public void createAll(@PathVariable("purchaseId") final Long purchaseId, @RequestBody final Tag[] entities)
{
    Purchase purchase = purchaseService.getById(purchaseId);

    Set<Tag> tags = new HashSet<Tag>(Arrays.asList(entities));

    purchase.addTags(tags);
    purchaseService.updatePurchase(purchase);
} 
```

***购买：***

```
@Entity
@XmlRootElement
public class Purchase implements Serializable
{

    /**
     * 
     */
    private static final long serialVersionUID = 6603477834338392140L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @OneToMany(mappedBy = "purchase", fetch = FetchType.LAZY, cascade={CascadeType.ALL})
    private Set<Tag> tags;

    @JsonIgnore
    public Set<Tag> getTags()
    {
        if (tags == null)
        {
            tags = new LinkedHashSet<Tag>();
        }
        return tags;
    }

    public void setTags(Set<Tag> tags)
    {
        this.tags = tags;
    }

    public void addTag(Tag tag)
    {
        tag.setPurchase(this);
        this.tags.add(tag);
    }

    public void addTags(Set<Tag> tags)
    {
        Iterator<Tag> it = tags.iterator();

        while (it.hasNext())
        {
            Tag tag = it.next();
            tag.setPurchase(this);
            this.tags.add(tag);
        }
    }

    ...
} 
```

***标签：***

```
@Entity
@XmlRootElement
public class Tag implements Serializable
{
    /**
     * 
     */
    private static final long serialVersionUID = 5165922776051697002L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumns({@JoinColumn(name = "PURCHASEID", referencedColumnName = "ID")})
    private Purchase purchase;

    @JsonIgnore
    public Purchase getPurchase()
    {
        return purchase;
    }

    public void setPurchase(Purchase purchase)
    {
        this.purchase = purchase;
    }
} 
```

***购买服务：***

```
@Service
public class PurchaseService implements IPurchaseService
{
    @Autowired
    private IPurchaseDAO purchaseDAO;

    public PurchaseService()
    {

    }

    @Transactional
    public List<Purchase> getAll()
    {
        return purchaseDAO.findAll();
    }

    @Transactional
    public Purchase getById(Long id)
    {
        return purchaseDAO.findOne(id);
    }

    @Transactional
    public void addPurchase(Purchase purchase)
    {
        purchaseDAO.save(purchase);
    }

    @Transactional
    public void updatePurchase(Purchase purchase)
    {
        purchaseDAO.update(purchase);
    }
} 
```

***标签服务：***

```
@Service
public class TagService implements ITagService
{
    @Autowired
    private ITagDAO tagDAO;

    public TagService()
    {

    }

    @Transactional
    public List<Tag> getAll()
    {
        return tagDAO.findAll();
    }

    @Transactional
    public Tag getById(Long id)
    {
        return tagDAO.findOne(id);
    }

    @Transactional
    public void addTag(Tag tag)
    {
        tagDAO.save(tag);
    }

    @Transactional
    public void updateTag(Tag tag)
    {
        tagDAO.update(tag);
    }
} 
```

关于如何解决这个问题的任何想法？（我想避免使用 EAGER 加载）。

我是否需要为交易设置某种形式的会话管理？

谢谢

## 基于 JB 建议的更新

***标签控制器***

```
@RequestMapping(value = "purchases/{purchaseId}/tags", method = RequestMethod.POST, params = "manyTags")
@ResponseStatus(HttpStatus.CREATED)
public void createAll(@PathVariable("purchaseId") final Long purchaseId, @RequestBody final Tag[] entities)
{
    Purchase purchase = purchaseService.getById(purchaseId);

    // Validation
    RestPreconditions.checkRequestElementNotNull(purchase);
    RestPreconditions.checkRequestElementIsNumeric(purchaseId);

    Set<Tag> tags = new HashSet<Tag>(Arrays.asList(entities));

    purchaseService.addTagsToPurchase(purchaseId, tags);
} 
```

***采购服务***

```
@Transactional
public void addTagsToPurchase(Long purchaseId, Set<Tag> tags)
{
    Purchase p = purchaseDAO.findOne(purchaseId);

    p.addTags(tags);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:49:55.657

您在不初始化其标签集合的情况下加载购买，然后在您的控制器中，一旦提交事务并且会话关闭，您将向这个未初始化的集合添加标签。所以很明显，这个异常被抛出了。

你有两种可能：

1.  使用 Purchase 加载标签，方法是调用，或执行一个 JPQL 查询，在单个查询 ( )`Hibernate.initialize(purchase.getTags())`中加载标签及其标签。`select distinct p from Purchase p left join fetch p.tags`
2.  `addTagsToPurchase(Long purchaseId, Set<Tag> tags)`添加一个真正的服务方法来重新加载购买并将标签添加到该购买中，而不是提供比 DAO 更多的服务类。这实际上是您的控制器所需的服务方法。

到目前为止，我当然更喜欢第二种解决方案：

*   它显示了为什么服务层很有用，
*   它从表示层中删除业务代码以将其放入服务层，
*   它更有效
*   它更安全，因为它使用附加实体，从而避免了您遇到的那种异常。

一般来说，如果你的控制器为了执行一个原子动作，需要多次调用服务层，这意味着服务层没有提供所需的功能，而服务是在表示层中实现的。

# php - 如何在 PHP 中将单个附加参数传递给 array_map 回调？

> ID：10872057
> 
> 赞同：18
> 
> 时间：2012-06-03T16:37:23.680
> 
> 标签：php, arrays, callback, closures, array-map

如何将**单个附加参数**传递给`array_map`回调？在我的示例中，我想将`$smsPattern`（作为第二个参数，在当前元素 in 之后`$featureNames`）传递给`array_map`带有`$getLimit`闭包的函数：

```
$features = $usage->getSubscription()->getUser()->getRoles();

// SMS regular expression in the form of ROLE_SEND_SMS_X
$smsPattern = '/^ROLE_SEND_SMS_(?P<l>\d+)$/i';

// Function to get roles names and X from a role name
$getNames = function($r) { return trim($r->getRole()); };
$getLimit = function($name, $pattern) {
    if(preg_match($pattern, $name, $m)) return $m['l'];
};

// Get roles names and their limits ignoring null values with array_filter
$featuresNames = array_map($getNames, $features);
$smsLimits     = array_filter(array_map($getLimit,  $featureNames, $smsPattern)); 
```

使用此代码，我收到了一个奇怪的警告：

> 警告：array_map() [function.array-map]：参数 #3 应该是一个数组。

当然，原因是为了将`$getLimit`闭包与另一个正则表达式（如`$smsPattern`. 谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-06-03T16:43:09.950

这正是闭包的意义所在：

```
$getLimit = function($name) use ($smsPattern) {
    if(preg_match($smsPattern, $name, $m)) return $m['l'];
};

$smsLimits = array_filter(array_map($getLimit, $features)); 
```

如果要将其推广到其他模式，请将函数创建包装到*另一个*函数中：

```
function patternMatcher($pattern) {
    return function($name) use ($pattern) {
        if(preg_match($pattern, $name, $m)) return $m['l'];
    };
}

$getLimit = patternMatcher($smsPattern);
$smsLimits = array_filter(array_map($getLimit, $features)); 
```

在这里它被包装为一个匿名函数：

```
$patternMatcher = function($pattern) {
    return function($name) use ($pattern) {
        if(preg_match($pattern, $name, $m)) return $m['l'];
    };
};

$smsLimits = array_filter(array_map($patternMatcher($smsPattern), $features)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-25T18:43:48.403

[`array_map()`](https://www.php.net/manual/en/function.array-map.php)如文档中所述，您可以在数组之后传递其他参数。问题是参数*必须是一个数组*。此数组中的每个值都与正在处理的数组中的相应索引一起传递给回调，因此您希望它们具有相同的长度。如果您只想为每次迭代使用一个参数，则可以使用[`array_fill()`](https://www.php.net/manual/en/function.array-fill.php)如下填充参数数组：

```
$smsLimits = array_map(
    $getLimit,
    $featureNames,
    array_fill(0, count($featureNames), $smsPattern)
); 
```

一个常见的用例是您可能希望`/`从 url 数组中修剪单个字符：

```
$urls = ['http://example.com/','http://sub.example.com/'];
$urls = array_map('rtrim', $urls, array_fill(0, count($urls), '/')); 
```

这将导致：

> ```
> Array
> (
>     [0] => http://example.com
>     [1] => http://sub.example.com
> ) 
> ```

# android - 如何配置 Eclipse 以在 Ubuntu 上使用 Phonegap？

> ID：10872059
> 
> 赞同：6
> 
> 时间：2012-06-03T16:37:40.680
> 
> 标签：android, eclipse, ubuntu, cordova

> **定义**
> 
> *Phonegap = 将诸如 HTML5/Javascript 游戏之类的东西制作成手机的工具。这很酷，因为桌面版本应该可以在手机中使用，而无需为其他平台进行大量重做。*

我可以找到一般说明，但有关 Eclipse 的一切以及类似的东西。我找不到像[这里](http://docs.phonegap.com/en/1.7.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)这样的关于 Ubuntu 的词，除非有大量的谷歌垃圾邮件，其中包含大量关于不同平台的令人困惑的线程，人们或多或少地互相欺负，比如[这里](http://ubuntuforums.org/showthread.php?t=1658366)的红鲱鱼，比如`google`. 我希望有一些不错的 make 文件来做事，但不，自述文件是阅读或多或少模棱两可的入门指南。所以：

**问题**

1.  我在哪里可以找到关于 Ubuntu 设置 Phonegap 的分步说明？

2.  我希望在不同的平台上进行一些概述。

3.  ADT 插件未安装在 Eclipse 中。为什么？

> **Android Eclipse ADT - 问题**
> 
> 我可以在[这里](http://developer.android.com/sdk/eclipse-adt.html#installing)找到说明，但由于某些奇怪的原因无法继续前进，没有说明或帮助文本继续。您可以在照片中看到，尽管我按照说明进行操作，但它不允许我单击“确定”。我希望我能在控制台上做到这一点！
> 
> ![在此处输入图像描述](../Images/8264fa9f3cce7678a452586fc97e608d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T16:37:41.177

> **定义**
> 
> *AVP = Android 虚拟手机（你不需要所有手机来测试你的代码，使用模拟器）*
> 
> *ADB = 应用程序将应用程序从命令行推送到手机*
> 
> *Eclipse 中的 ADT -plugin = 为 Eclipse 添加一些按钮，例如添加 AVP*
> 
> *ADT = Android 开发工具（不确定它们实际上是什么，可能与仿真相关的东西包含诸如 linux 内核、API 等）*

我正在尝试为控制台高级用户提供说明，希望有助于快速设置，而不是在繁琐的说明上浪费大量时间。

> **[1.这里](http://developer.android.com/sdk/index.html)搭建Android SDK等开发环境。**
> 
> ```
> $ wget http://dl.google.com/android/android-sdk_r18-linux.tgz
> 
> $ tar -xvzf *.tgz
> 
> $ ...follow README or some tutorial there... 
> ```
> 
> I. 现在回到 Android SDK 站点，您可以在 [这里](http://developer.android.com/sdk/eclipse-adt.html)找到 ADT Plugin for Eclipse 。如果您现在使用 Android 的搜索栏搜索，则不可点击的按钮变为可点击的。ADT 代表 Android 开发工具，因此请安装您在某些工具或相关工具下获得的所有内容。
> 
> 二、修复 @override -problem（很快需要 1.6 编译器 -compliance-level），更多[here](https://stackoverflow.com/questions/8521131/override-gives-error-in-eclipse)。
> 
> 三、通过加载 Android 示例文件然后插入手机（启用 USB 调试：设置 > 开发 > 单击）或使用 Android 虚拟手机 (=AVP) 来测试您的 Android 安装工作
> 
> > ```
> > $ adb devices   # Shows your physics devices such 
> >                 # as phones with USB -debugging enabled.
> > 
> > $ adb install ~/workspace/yourChosenSampleDemo/bin/*.apk 
> >                 # Your first Android -app emerges to your phone, have FuN! 
> > ```
> 
> **2.使用以下设置Phonegap：**
> 
> > 1.  一些一般性的说明显然[在这里](http://www.nicksays.co.uk/2010/01/building-phonegap-on-ubuntu/)。
> >     
> >     
> > 2.  iOS：你需要的 Xcode 有点有限。
> >     
> >     
> > 3.  也许有用，源代码 [在这里](https://github.com/phonegap/phonegap)和一般下载 [在这里](http://phonegap.com/download)。

Eclipse 的 click-click-something 指令非常难以访问，可怜！在 Eclipse 的符号链接上浪费时间之后，我切换到控制台：

```
$ tree|less
$ search for the files needed, mark them done or use find -command directly ^C
$ copy the files to some dir such as ~/Android/Public so easier to do ^C
$ things at once ^C
$ pwd
/home/xyz/workspace/HelloCordova/res
$ cp ~/Android/phonegap-phonegap-475bfd2/lib/android/xml/* .
$ cp ~/Android/Public/cordova-1.7.0.js assets/www/
$ cp ~/Android/Public/cordova-1.7.0.jar libs/ 
```

# php - Netbeans PHP (Mac OSX) 不包括完整的 PHP 代码完成？

> ID：10872074
> 
> 赞同：0
> 
> 时间：2012-06-03T16:39:15.303
> 
> 标签：php, macos, netbeans, code-completion

我刚刚下载了带有 PHP Bundle 的 Netbeans，但是当我运行它时，没有完整的 php 代码完成。

对于非常基本的示例：

*   `mysql_fetch_array`
*   `substr`
*   `explode`

即使在 PHP 中使用这个基本的函数/方法/等代码完成，它也没有出现。**那么带有 PHP Bundle 的 Netbeans 有什么用呢？**为什么它被捆绑为 PHP，甚至没有将代码完成作为基本需求？

有谁知道我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:14:53.087

我还是不明白你的问题。例如，对于 mysql_fetch_array，NetBeans IDE 提供了代码完成选项 mysql_fetch_array($result) 和 mysql_fetch_array($result, $result_type='MYSQL_BOTH')。对于 substr，NetBeans 提供 substr($string, $start) 和 substr($string, $start, $length=null)。除此之外，您还期待什么？[此外，您在NetBeans PHP 用户论坛](http://forums.netbeans.org/php-users.html)上发帖可能会更成功

# c# - 两个相互关联的组合框中的无效更新数据

> ID：10872076
> 
> 赞同：0
> 
> 时间：2012-06-03T16:39:27.410
> 
> 标签：c#, ado.net, combobox

以两个组合框和一个文本框的形式。1个cb通过Load启动连接到表中获取它们的值​​​：

```
this.cb1TableAdapter.Fill(this.dbDataSet.cb1);
SELECT id, name FROM cb1 
```

2 cb 类似，但加载需要绑定文本框的参数（id 包含选定的行 cb1）：

```
this.cb2TableAdapter.Fill(this.dbDataSet.cb2, Convert.ToInt32(textBox1.Text));
SELECT id, id_cb1 name FROM cb2 WHERE (id_cb1 = @textbox) 
```

我创建了 selectionchangecommitted 事件并编写了他们的 cb2.Refresh()。它有效，但只有在重新选择同一行时才会更新 cb2。如何做出选择是单身？

# java - 关于 struts2 和 stack 中的 valuestack 的一些问题？

> ID：10872078
> 
> 赞同：0
> 
> 时间：2012-06-03T16:39:41.123
> 
> 标签：java, struts2, stack

我是 struts2 的新手，在通过 struts2 进行操作时，我遇到了声明 valuestack 是对象堆栈和声明，其中讨论了当两个具有相同属性名称的对象存储在 value 对象上时如何进行解析。为了澄清这一点，我开始研究它是如何在 struts2 中实现的。当我进入最后一层时，我发现 struts2 在 peek 期间类似地将对象插入到 push 方法中的零位置，它从零位置获取对象。**因此，根据我对 struts2 的理解，值堆栈将仅包含一个对象（这将是动作对象）。那是对的吗？如果不正确，我们什么时候可以在 valuestack 中存储多个对象而不是 action 对象？**

[当我通过http://en.wikipedia.org/wiki/Stack_(abstract_data_type](http://en.wikipedia.org/wiki/Stack_(abstract_data_type) )的堆栈时，我还提出了一些关于堆栈的基本问题。那里指出，在计算机科学中，堆栈是一种后进先出 (LIFO) 抽象数据类型和线性数据结构，其特点是两个基本操作，称为 push 和 pop 。我同意涉及推送和弹出操作的数据结构为堆栈分类。但是对后进先出的东西有疑问。当我在java中看到数组实现（也是堆栈并在同一个链接中声明）时，据我了解，它不遵循后进先出，因为我们可以通过索引访问任何元素，而不是最后一个元素有出来。如果我错了，不要喷我，因为这是我的符号。**如果这是正确的，我们可以说堆栈不必是强制的 LIFO，它应该确认推送和弹出操作吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T17:09:17.530

不，值堆栈在几乎所有情况下都不会包含单个对象，如果*它只*允许单个对象，它就不会是一个太多的堆栈。

当您在位置 0 处*插入*一个对象时，它是一个推送——之前作为位置 0 的对象将位于位置 1，等等。这是一个正常的推送，使用该`insert`方法。

基本上所有正常的动作调用都会在堆栈上有多个对象。使用`<s:debug>`标签（下图）或转储堆栈可以轻松证明这一点。另外，[`<s:push>`标签](http://struts.apache.org/2.x/docs/push.html)将对象添加到JSP页面上的堆栈，拦截器可以添加对象等。

您对堆栈是 LIFO 的观察很有趣，但最终无关紧要：正常的堆栈操作（推送、弹出）是使其成为 LIFO 的原因。这并不排除堆栈实现提供*额外*的访问模式。

* * *

![调试标签值堆栈转储](../Images/d5242274fa60bd7f53cef485186fe158.png)

# iphone - 使用故事板的优点和缺点

> ID：10872090
> 
> 赞同：11
> 
> 时间：2012-06-03T16:40:54.557
> 
> 标签：iphone, ios5, storyboard, uistoryboard

我计划学习使用故事板开发应用程序。任何人都可以在使用 StoryBoards 时发布一些优点和缺点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T16:51:57.887

[何时使用 Storyboard 以及何时使用 XIB](https://stackoverflow.com/questions/9404471/when-to-use-storyboard-and-when-to-use-xibs)

[在 iOS 编程中使用 Storyboard 代替 xib 文件有什么好处？](https://stackoverflow.com/questions/9083759/what-are-the-benefits-of-using-storyboards-instead-of-xib-files-in-ios-programmi)

[iphone-sdk-开发](http://www.iphonedevsdk.com/forum/iphone-sdk-development/93558-storyboard-good.html)

我认为这些链接很有帮助，并且与您的问题相关。就个人而言，我相信故事板比 nib 更好，因为它们消除了编写视图之间转换的需要（除非您使用 CA 的自定义转换），并且它们也具有 nib 文件的所有功能。

希望这有帮助。

- - - - - -编辑 - - - - - -

以下是我找到的更多链接：

这一篇讲述了使用故事板的一些缺点。

[iOS 5 上的 UIStoryboard：好的、坏的和“这简直糟透了”](http://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx)

这主要是关于好处。 [iOS 5.0 故事板与传统 UI 布局相比有哪些优势？](https://stackoverflow.com/questions/8163915/what-are-the-advantages-of-ios-5-0-storyboarding-over-traditional-ui-layout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T13:36:19.233

这主要是缺点。不要使用情节提要。这是他们的问题列表，从[iraycd](https://gist.github.com/iraycd/01b45c5e1be7ef6957b7)复制：

*   **故事板在运行时失败，而不是在编译时**：您的 segue 名称有错字或在故事板中连接错误？它会在运行时爆炸。您使用了故事板中不再存在的自定义 UIViewController 子类？它会在运行时爆炸。如果您在代码中执行此类操作，您将在编译时及早发现它们。***更新***：我的新工具**[StoryboardLint](https://github.com/jfahrenkrug/StoryboardLint)**主要解决了这个问题。

*   **故事板很快就会变得混乱**：随着项目的增长，您的故事板变得越来越难以导航。此外，如果多个视图控制器对多个其他视图控制器有多个 segue，您的故事板很快就会开始看起来像一碗意大利面，您会发现自己放大和缩小并到处滚动以找到您正在寻找的视图控制器并找出 segue 指向的位置。***更新***：这个问题主要可以通过将故事板拆分为多个故事板来解决，如[Pilky](http://pilky.me/37/)的[这篇文章和 Robert Brown](http://robsprogramknowledge.blogspot.pt/2012/01/uistoryboard-best-practices.html)的这篇文章中所述。

*   **故事板使团队工作更加困难**：因为您的项目通常只有一个巨大的故事板文件，所以让多个开发人员定期对一个文件进行更改可能会让人头疼：需要合并更改并解决冲突。当发生冲突时，很难说如何解决它：Xcode 生成故事板 XML 文件，它的设计并不是真正考虑到人类必须阅读的目标，更不用说编辑它了。

*   **故事板使代码审查变得困难或几乎不可能**：同行代码审查对您的团队来说是一件好事。但是，当您对情节提要进行更改时，几乎不可能与其他开发人员一起查看这些更改。你所能得到的只是一个巨大的 XML 文件的差异。破译真正改变了什么以及这些改变是否正确或者它们是否破坏了某些东西真的很难。

*   **故事板阻碍代码重用**：在我的 iOS 项目中，我通常创建一个类，其中包含我在整个应用程序中使用的所有颜色、字体、边距和插图，以使其具有一致的外观和感觉：如果必须的话，只需更改一行调整整个应用程序的任何这些值。如果您在情节提要中设置此类值，则会复制它们，并且在您想要更改它们时需要找到每一个出现的地方。您错过一个的机会很高，因为情节提要中没有搜索和替换。

*   **故事板让你做任何事情两次**：你是否正在构建一个在 iPad 和 iPhone 上运行的通用应用程序？当您使用故事板时，通常会有一个用于 iPad 版本的故事板和一个用于 iPhone 版本的故事板。保持两者同步需要您在两个地方进行每个 UI 或应用程序工作流更改。耶。***更新***：在 iOS 8 和 Xcode 6 中，您可以为 iPhone 和 iPad 使用单个 Storyboard。

*   **故事板需要不断的上下文切换**：我发现自己在代码中的工作和导航速度比在故事板中快得多。当您的应用程序使用故事板时，您会不断切换上下文：“哦，我想点击这个表格视图单元以加载不同的视图控制器。我现在必须打开故事板，找到正确的视图控制器，创建一个新的 segue到另一个视图控制器（我也必须找到），给 segue 一个名字，记住这个名字（我不能在故事板中使用常量或变量），切换回代码，希望我不要打错名字我的 prepareForSegue 方法的那个 segue。我多么希望我可以在我所在的地方输入这 3 行代码！不，这不好玩。在代码和情节提要（以及键盘和鼠标）之间切换会很快变老并减慢您的速度。

*   **故事板很难重构**：当您重构代码时，您必须确保它仍然符合您的故事板所期望的。当您在情节提要中移动内容时，您只会在运行时发现它是否仍然适用于您的代码。我觉得好像我必须让两个世界保持同步。在我的拙见中，它感觉很脆弱并且不鼓励改变。

*   **Storyboards are not searchable**：当您使用 Storyboards 时，Xcode 中的项目范围搜索并不是真正的项目范围搜索。它们不包括在搜索中。因此，当您从代码中删除自定义类或重命名它时，您将不得不手动浏览情节提要或查看其原始 XML 以确保它与您的代码更改一致。不，先生，我不喜欢它。***更新***：故事板在 Xcode 6 中是可搜索的。

*   **故事板不太灵活**：在代码中，您基本上可以做任何您想做的事情！使用情节提要，您仅限于在代码中可以做的事情的一个子集。尤其是当你想用动画和过渡做一些高级的事情时，你会发现自己“与故事板作斗争”以使其工作。

*   **故事板不允许您更改特殊视图控制器的类型**：您想将 a 更改`UITableViewController`为 a`UICollectionViewController`吗？还是变成平原`UIViewController`？在情节提要中不可能。您必须删除旧视图控制器并创建一个新视图控制器并重新连接所有 segue。在代码中进行这样的更改要容易得多。

*   **Storyboard 为您的项目增加了两个额外的负担**：(1) 生成 Storyboard XML 的 Storyboard Editor 工具和 (2) 解析 XML 并从中创建 UI 和控制器对象的运行时组件。这两个部分都可能存在您无法修复的错误。

*   **故事板不允许您将子视图添加到`UIImageView`**：谁知道为什么。

*   **Storyboards 不允许您为单个 View(-Controller)s 启用 Auto Layout**：通过选中/取消选中 Storyboard 中的 Auto Layout 选项，更改将应用​​于 Storyboard 中的所有控制器。（感谢 Sava Mazăre 的这一点！）

*   **Storyboard 破坏向后兼容性的风险更高**：Xcode 有时会更改 Storyboard 文件格式，并且不能以任何方式保证您能够在几年甚至几个月后打开您今天创建的 Storyboard 文件。（感谢这一点的思想进步。[请参阅原始评论](http://stackoverflow.com/questions/9404471/when-to-use-storyboard-and-when-to-use-xibs/19457257?noredirect=1#comment33341639_19457257)）

*   **这是麦当劳**：用史蒂夫乔布斯关于微软的话来说：[这是麦当劳（视频）](http://youtu.be/EJWWtV1w5fw?t=1m31s)！

# php - 有一个“编辑”控制器来处理用户编辑？这种设计有意义吗？

> ID：10872093
> 
> 赞同：0
> 
> 时间：2012-06-03T16:41:34.183
> 
> 标签：php, codeigniter, controller, editing, verification

这是流程：

1.  用户创建基于文本的帖子。

2.  用户编辑基于文本的帖子（显示带有帖子信息的编辑页面）

3.  用户提交对帖子的更改（发送到帖子控制器的请求）

现在，如果我有 MULTIPLE 类型的帖子，我必须在步骤 2 和 3 中检查用户确实在更新 RIGHT 类型的帖子，因为有人可以很好地更改 URL 以编辑 A 类型的帖子，而它真的是类型B.这会导致大量的冗余代码，比如...

```
if(user is indeed the editor && the post type is correct) show the edit page 
```

我认为拥有一个 EDIT 控制器来执行构造函数（或者可能是基类？）中所需的所有验证，然后调用该方法会很有意义。你有没有遇到过类似的问题——如果没有，这是否有任何设计意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:38:47.827

[CodeIgniter 是一个 MVC](http://codeigniter.com/user_guide/overview/mvc.html)。这意味着您的控制器充当模型（您的数据）和您的视图（前端）之间的中间体。“编辑”是您对对象（如数据）执行的操作。数据对象应该组织在一个控制器中，该控制器从模型中调用实际的编辑功能。

我假设你有一个 Post 控制器。它的核心应该是基本的 CRUD 功能，比如添加和编辑帖子。它应该看起来像这样：

```
class Post extends CI_Controller
{
    function __construct()
    {
        parent::__construct();
    }

    function index()
    {
        // List all posts, perhaps?
    }

    function add()
    {
        // Add a post
    }

    function edit($post_id)
    {
        // Edit a post
    }

    function view($post_id)
    {
        // View a post
    }

} 
```

这将为您提供以下页面：

*   [http://example.com/post](http://example.com/post)
*   [http://example.com/post/add](http://example.com/post/add)
*   [http://example.com/post/view/1](http://example.com/post/view/1)
*   [http://example.com/post/edit/1](http://example.com/post/edit/1)

检查用户权限是它自己的章节。如果您使用的是[Tank Auth](http://www.konyukhov.com/soft/tank_auth/)之类的库，则可以像这样检查权限：

```
if ($this->tank_auth->is_logged_in()) {
    // Do stuff
} 
```

That should go at the beginning of each function - or in the `__construct()`, if you want to DRY it up completely.

Good luck.

# javascript - 制作没有href的过渡文本

> ID：10872096
> 
> 赞同：1
> 
> 时间：2012-06-03T16:41:56.473
> 
> 标签：javascript, jquery, html, append

我有一个包含一组 div 的 div。

我希望里面的 div 作为链接在保存此链接的值后移动到另一个页面。

div 由`id`div 属性中的 & div 值中的名称组成，如下所示：

**html:**

```
 <div id="ClasssesList" ></div> 
```

**jQuery：**

```
function GetClassesList(data) {
   var classes = (typeof data) == 'string' ? eval('(' + data + ')') : data;
   $('#ClasssesList').empty();
   for (var i = 0; i < classes.length; i++) {
      var text = '<button class="BigDiv" value="' + classes[i].Cls_ID + '" >' + classes[i].Cls_Name + '</button>';
    $('#ClasssesList').append(text);
   }
} 
```

我想保存单击的值，`id`然后`localStorage`转到下一页：

我试图使它如下，但它似乎没有工作：

```
$("#ClasssesList").bind('click', 'button.BigDiv',CallLink()); 

function CallLink(e) {

        localStorage['ClassID'] = $('Button.BigDiv').attr('value');
        window.location.replace("Teacher_Attendance.htm");
 } 
```

你知道我该怎么做才能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T16:47:23.910

```
function CallLink(e) {

        localStorage.setItem('ClassID', $('Button.BigDiv').attr('value'));

        window.location.replace("Teacher_Attendance.htm");
 } 
```

要获得该项目，请尝试：

```
localStorage.getItem('classID'); 
```

将数据设置为 localStorage 的格式是

```
localStorage.setItem(key, value); 
```

这`value`是`string`格式；

你会在这里得到更多的[微软](http://msdn.microsoft.com/en-us/library/cc197050%28VS.85%29.aspx)、[Mozilla](https://developer.mozilla.org/en/DOM/Storage)和[苹果](https://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/Name-ValueStorage/Name-ValueStorage.html)。

### 还有一张纸条

我认为你的绑定功能

```
$("#ClasssesList").bind('click', 'button.BigDiv',CallLink()) 
```

应该写成

```
$("#ClasssesList").on('click', 'button.BigDiv',CallLink()) 
```

# php - php 解析错误：语法错误，意外的 T_STRING，期望构造上的 T_FUNCTION

> ID：10872097
> 
> 赞同：1
> 
> 时间：2012-06-03T16:42:04.137
> 
> 标签：php, syntax-error

嘿伙计们希望你能帮助我..

只是为了让你提前知道，我是一个相对较新的 php 编码器，正在做一个练习项目，遇到了这个问题，我花了一个小时重新检查和谷歌搜索，但无法弄清楚是什么原因造成的

错误：解析错误：语法错误，意外的 T_STRING，在第 7 行的 C:\wamp\www\forum\classes\ClassUser.php 中需要 T_FUNCTION

导致问题的代码段：

```
include $_SERVER["DOCUMENT_ROOT"]."forum/classes/general.inc";
Class User{

__construct($u,$p){ //this is line 7

    $user=$u;
    if(strlen($p)>30|| empty($p) || !preg_match('/[^a-zA-Z0-9]/i',$p)){
    $password=0;

    }
    else{
    $password=hash_hmac('md5',$p,KEY);

    }

} 
```

哦，因为我是 php 新手，如果我在做一些我不应该做的事情，请推荐..提前谢谢。

注意：我删除了 php 标签，因为它们似乎弄乱了这篇文章的格式：/

注意2：我还收到另一条通知注意：使用未定义的常量 KEY - 在第 20 行的 C:\wamp\www\forum\classes\general.inc 中假定为“KEY”

但我假设这更像是一个警告而不是一个错误......但只是添加它与错误有关

通用公司：

```
//error definations
define("ERROR_FIELD_EMPTY","Error! All required fields not filled");
define("ERROR_INVALID_SIGNIN","Error! Username/password do not match!");
define("ERROR_GENERAL_INPUT", "Error! Invalid input given");
define("ERROR_SQL_CONNECT","Error! Could not connect to sql database");

//field sizes
define("PASSWORD_LENGTH",12);
define("USERNAME_LENGTH",30);

//sql server details
define("SQL_SERVER_NAME","localhost");
define("SQL_SERVER_USERNAME","root");
define("SQL_SERVER_PASSWORD","");
define("SQL_SERVER_DATABASE","forums");

define(KEY,"key");

function __autoload($className){
    require_once($_SERVER["DOCUMENT_ROOT"]."forum/classes/Class$className.php");

} 
```

类用户.php

```
 include $_SERVER["DOCUMENT_ROOT"]."forum/classes/general.inc";
    Class User{

    __construct($u,$p){

        $user=$u;
        if(strlen($p)>30|| empty($p) || !preg_match('/[^a-zA-Z0-9]/i',$p)){
        $password=0;

        }
        else{
        $password=hash_hmac('md5',$p,KEY);

        }

    }

    public function validate(){
        if(strlen($user)>30|| empty($user) || preg_match('/[^a-zA-Z0-9]/i',$password==0 )){
        throw new Exception(ERROR_GENERAL_INPUT);

        }
        $user=mysql_real_escape_string($user);
        return true;

    }

    public function insert(){
       // this->validate();

        $conn= mysqli_connect(SQL_SERVER_NAME,SQL_SERVER_USERNAME,SQL_SERVER_PASSWORD,SQL_SERVER_DATABASE);

        if(empty($conn)){
        throw new Exception(ERROR_SQL_CONNECT);
        }

        $query="INSERT into USERS VALUES ($user,$password)";
        $conn->query($query);

    }

    private $user;
    private $password;

    }; 
```

新用户.php

```
 include $_SERVER["DOCUMENT_ROOT"]."forum/classes/general.inc";

    try{
    $user = new User($_POST['UserName'],$_POST['Password']);
    $user->insert();
    }

    catch(Exception $Error){
    echo $Error->getMessage();

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T16:46:01.463

你`__construct`需要`function`在它前面加上这个词，或者更好的是，与`public function`类中的其他方法相同（即在你的情况下）。`validate``insert`

即您需要以下内容：

```
public function __construct($u,$p){ //this is line 7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:44:45.387

将行更改为：

```
public function __construct($u, $p) { 
```

# jquery - FancyBox iFrame 问题

> ID：10872108
> 
> 赞同：0
> 
> 时间：2012-06-03T16:43:02.033
> 
> 标签：jquery, fancybox

我玩 FancyBox 并偶然发现以下问题：

我尝试使用此代码在 iFrame 中打开网站

```
<a class="various" data-fancybox-type="iframe" href="http://www.golem.de">Iframe</a> 
```

效果很好，但是如果我想使用图像而不是“Iframe”文本，它只会打开一个白框：

```
<a class="various" data-fancybox-type="iframe" href="http://www.golem.de"><img scr="img/1.jpg"></a> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T16:57:12.610

官方文档中没有关于此问题的任何内容：http: [//fancybox.net/](http://fancybox.net/)。看看演示页面（主页）中的“手动调用示例”。顺便说一句，iframe 选项主要用于显示外部内容，而不是图像，您始终可以使用默认选项显示。

# java - Jexcel公式计算错误

> ID：10872112
> 
> 赞同：3
> 
> 时间：2012-06-03T16:43:28.430
> 
> 标签：java, excel, formula, jxl, jexcelapi

我创建了一个工作表*out.xls*，其中单元格 D6=D5*2 和 D5 设置为 1。我的问题是，当我在 jxl 中将一个值插入 D5 时，D6 永远不会计算。当我在 excel 中插入 1 到 D5 时，D6 只是保持它最初计算的值。

注意：我有一个更大的编程问题要解决，这只是一个非常缩小的版本以减少错误。

这是我第一次使用 Jexcel，去年我才刚刚学习 java，所以任何帮助都将不胜感激。我昨天花了 6 个小时试图在网上找到答案，但无济于事。

*输出附在代码下方*
**：（**省略主要和进口）

```
 WorkbookSettings custom= new WorkbookSettings();
        custom.setRationalization(true);
        custom.setRefreshAll(true);
        custom.setUseTemporaryFileDuringWrite(true);
        Workbook workbook = Workbook.getWorkbook(new File("out.xls"),custom); 

        WritableWorkbook copy = Workbook.createWorkbook(new File("output.xls"), workbook); 

        WritableSheet sheet2 = copy.getSheet(0); 
        SheetSettings customsheetsettings=new SheetSettings(sheet2);
        customsheetsettings.setAutomaticFormulaCalculation(true); 
        Number number = new Number(3, 4, 3);
        sheet2.addCell(number); 

        copy.write();
        copy.close(); 
        workbook.close();

        Workbook workbook2 = Workbook.getWorkbook(new File("output.xls")); 
        Sheet sheet=workbook2.getSheet(0);

        System.out.println("D5:"+sheet.getCell(3,4).getContents());
        FormulaCell formula5=(FormulaCell) sheet.getCell(3,5);
        System.out.println("Formula:"+formula5.getFormula());
        System.out.println("D6:"+formula5.getContents()); 

        NumberFormulaCell nfc=(NumberFormulaCell)sheet.getCell(3, 5); 
        System.out.println(nfc.getValue());  
        workbook2.close(); 
```

**输出：**

```
D5:3
Formula:D5*2.0
D6:2
2.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:07:22.367

JExcel 只允许读取或写入 Excel 文件，并给出 Excel 文件内容的 Java 表示。它不会替代 Excel。

添加公式时，将计算此公式，但仅在 Excel 中，当您在 Excel 中打开生成的文件时。该单元格不是由 JExcel 计算的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:23:20.497

如果其他人想知道，POI 使用 FormulaEvaluator 类来实现。

攻击者

# matlab - 如何在 Matlab 中加载分类数据

> ID：10872116
> 
> 赞同：2
> 
> 时间：2012-06-03T16:43:47.773
> 
> 标签：matlab, file-io

我有一个包含数千个属性的文本文件（每列表示一个属性）和一个显示每行标签的列。所有数据都是数字，除了最后一列是标签。此列是字符串。我想使用诸如 gscatter() 之类的 matlab 分类函数对数据进行分类。问题是当我在 matlab 中使用加载文件名来加载我的数据时，我得到了这个错误（其中“no”是标签之一）

ASCII 文件 C:\Program Files\MATLAB\R2011b\train\train.txt 的第 1 行上的未知文本“否”。

事实上，我不知道如何在 matlab 中加载我的数据，以便能够使用 matlab 函数对数据进行分类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:02:56.227

[加载](http://www.mathworks.nl/help/techdoc/ref/load.html)仅适用于只有数字数据的 .mat 文件和文本文件，这就是您收到错误的原因。

不过，有许多函数可以读取文本文件。根据数据文件的格式，您可以使用以下方法之一：

*   [textread](http://www.mathworks.nl/help/techdoc/ref/textread.html)非常通用，但需要您提供格式并打开和关闭文件。
*   [csvread](http://www.mathworks.nl/help/techdoc/ref/csvread.html)仅读取以逗号分隔的数字值，但您不必提供格式。
*   [importdata](http://www.mathworks.nl/help/techdoc/ref/importdata.html)很通用也很方便
*   [fscanf](http://www.mathworks.nl/help/techdoc/ref/fscanf.html)类似于 textread

鉴于您要处理的属性数量，我肯定会选择`importdata`自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:25:08.250

这是一个例子

### 火车.txt

```
1,2,3,4,5,6,no
2,3,4,5,6,7,yes 
```

### myLoadScript.m

```
numAttribs = 6;        %# number of attributes (excluding the label)
frmt = [repmat('%f ',1,numAttribs) '%s'];
fid = fopen('train.txt', 'rt');
C = textscan(fid, frmt, 'Delimiter',',', 'CollectOutput',1);
fclose(fid); 
```

结果：

```
>> C{1}
ans =
     1     2     3     4     5     6
     2     3     4     5     6     7

>> C{2}
ans = 
    'no'
    'yes' 
```

应该很容易适应您的特定文件格式...

# ios - 是否可以确定 SIM/电话号码是否已更改？

> ID：10872117
> 
> 赞同：12
> 
> 时间：2012-06-03T16:44:38.937
> 
> 标签：ios, sim-card, core-telephony

我们有一个产品，用户通过提供他们的电话号码进行注册。

但是，在他们注册后，他们可能会更改他们的 SIM 卡。

是否可以以编程方式确定 SIM 卡是否已被移除或插入？

（谢谢你提供它，但是任何关于首先使用电话号码的题外话评论都与这个讨论无关，我不想讨论这方面的事情，只讨论 sim 方面）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T20:33:55.283

是的，当然有可能。链接 CoreTelephony.framework 以编译以下代码：

```
CTTelephonyNetworkInfo* info = [[CTTelephonyNetworkInfo alloc] init];
CTCarrier* carrier = info.subscriberCellularProvider;
NSString *mobileCountryCode = carrier.mobileCountryCode;
NSString *carrierName = carrier.carrierName;
NSString *isoCountryCode = carrier.isoCountryCode;
NSString *mobileNetworkCode = carrier.mobileNetworkCode;

// Try this to track CTCarrier changes 
info.subscriberCellularProviderDidUpdateNotifier = ^(CTCarrier* inCTCarrier) {
        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"User did change SIM");
        });
}; 
```

通过 mobileCountryCode、mobileNetworkCode、carrierName、isoCountryCode 的值可以判断 SIM 卡的存在。（没有 SIM，它们会变得不正确）。

CoreTelephony 中还有一些未记录的功能/通知，但如果您使用它们，您的应用程序可能会被 Apple 禁止。反正：

```
// Evaluates to @"kCTSIMSupportSIMStatusReady" when SIM is present amd ready; 
// there are some other values like @"kCTSIMSupportSIMStatusNotInserted"
NSString* CTSIMSupportGetSIMStatus(); 

// Use @"kCTSIMSupportSIMStatusChangeNotification" to track changes of SIM status:
[[NSNotificationCenter defaultCenter]
    addObserver:self
    selector:@selector(SIMNotification:)
    name:@"kCTSIMSupportSIMStatusChangeNotification"
    object:nil
]; 
```

~~// 这个复制当前电话号码~~
~~NSString* CTSettingCopyMyPhoneNumber()~~

**附录**另一种可能（且合法）的解决方案：如果您的公司有电话号码数据库，您可以发送短信或呼叫（并切断）任何特定号码，以验证用户是否仍然使用相同的电话号码。

**UPDATE**函数`NSString* CTSettingCopyMyPhoneNumber()`不再起作用（返回空字符串）。

# android - 以编程方式将行添加到表格布局

> ID：10872120
> 
> 赞同：1
> 
> 时间：2012-06-03T16:44:45.900
> 
> 标签：android, tablelayout

嗨，我想在活动第一次开始时获得一个表格布局来填充 XML 的数据，但我是个新手，所以如果有人知道我怎么可能做到这一点，我真的不知道该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:48:03.740

您可以动态添加表格行

```
for(int i=0;i<youxmlArray.size();i++){
    // get a reference for the TableLayout
    TableLayout table = (TableLayout)findViewById(R.id.TableLayout01);
    // create a new TableRow
    TableRow row = new TableRow(this);
    // create a new TextView for showing xml data
    TextView t = new TextView(this);
    // set the text to "text xx"
    t.setText( "YOUR XML DATA  HERE");
    // add the TextView  to the new TableRow
    row.addView(t);
    // add the TableRow to the TableLayout
    table.addView(row, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
} 
```

并在您的 xml 布局中添加一个**TableLayout作为**

```
<TableLayout 
android:id = "@+id/TableLayout01" 
android:layout_width = "fill_parent" 
android:layout_height = "wrap_content"   
android:stretchColumns = "0" >
   < TableRow android:id = "@+id/TableRow01" 
   android:layout_width = "wrap_content" 
   android:layout_height = "wrap_content" >
      < TextView android:id = "@+id/TextView01" 
        android:layout_width = "fill_parent" 
        android:layout_height = "wrap_content" 
        android:text = "textfield 1-1" >
        </ TextView >
   </ TableRow >
</ TableLayout > 
```

# provisioning - 使用 Google Apps 脚本将域用户添加到组织单位

> ID：10872122
> 
> 赞同：0
> 
> 时间：2012-06-03T16:45:24.513
> 
> 标签：provisioning, google-apps-script

我正在尝试将用户（新创建的）添加到我的 Google Apps 域中的特定组织单位，但我似乎找不到任何文档或示例。这甚至可能吗？也许通过使用普通的 REST 调用？

到目前为止，我创建用户的代码：

```
var user = UserManager.createUser(userName, firstName, lastName, "welcome").setChangePasswordAtNextLogin(true); 
```

现在我想将用户附加到特定的组织单位，并使其成为某些组的成员（但这是我正在研究的另一个问题）。

任何帮助将不胜感激！

问候，

基斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T22:48:58.030

UserManager 服务不支持组织单位，但您可以手动构建请求。

以下 Apps 脚本代码将用户添加到 OU。参数是[customerId](https://developers.google.com/google-apps/provisioning/#retrieving_a_customerid_experimental)、要添加到组织单位的用户的电子邮件地址和组织单位路径：

```
function addUserToOU(customerId, email, ou) {
  var oauthConfig = UrlFetchApp.addOAuthService("google");

  var scope = "https://apps-apis.google.com/a/feeds/policies/";
  oauthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);         
  oauthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oauthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");

  oauthConfig.setConsumerKey("anonymous");
  oauthConfig.setConsumerSecret("anonymous");

  var body = "<?xml version=\"1.0\" encoding=\"utf-8\"?><atom:entry xmlns:atom=\"http://www.w3.org/2005/Atom\" xmlns:apps=\"http://schemas.google.com/apps/2006\"><apps:property name=\"orgUnitPath\" value=\"" + ou + "\" /></atom:entry>";

  var requestData = {
    "method": "put",
    "contentType": "application/atom+xml",
    "oAuthServiceName": "google",
    "oAuthUseToken": "always",
    "payload": body
  };

  var url = "https://apps-apis.google.com/a/feeds/orguser/2.0/" + customerId + "/" + email;
  var result = UrlFetchApp.fetch(url, requestData);
  Logger.log(result.getContentText());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-30T09:45:58.683

我认为现在这项任务很容易：这个简单的代码应该可以工作：

```
var emailAddress = 'myuser@mydomain.com';
var user = AdminDirectory.Users.get(emailAddress);
var orgunittomove='myorgunit'   //you can set the whole path;

user.orgUnitPath = orgunittomove;
AdminDirectory.Users.update(user, emailAddress); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-09T16:44:45.273

与上一个答案一样，您可以在创建用户时在用户对象上添加组织单位。在用户对象中，您必须设置 orgUnitPath 属性。

```
var user = {
    primaryEmail: "aperetz@austriajohn.edu",
    orgUnitPath:"/Students", 
        name: {
        givenName: "Albert",
        familyName: "Peretz"
    },
    password: "XWYlkf"
};
userGsuite = AdminDirectory.Users.insert(user); 
```

# c - movndq 有效吗？

> ID：10872124
> 
> 赞同：3
> 
> 时间：2012-06-03T16:45:35.263
> 
> 标签：c, assembly, cpu-architecture, measurement, cpu-cache

我的任务是计算 RAM 读/写速度。我使用 asm 插入来避免编译器优化。为了测量时间，我使用 TSC 和 CPU 频率。为了移动数据，我使用不使用缓存层次结构的 asm 指令 MOVNTDQ。

问题在于结果。数据速率（根据数据表）为 800 Mbps，我通过测试得到 > 2000 Mbps 的写入速度。

```
void memory_notCache_write_128(void* src, long blocks_amount) 
{
    _asm    
    {
        mov ecx, blocks_amount
        mov     esi, src
    a20:
        movntdq [esi], xmm0
        movntdq [esi + 16], xmm1
        movntdq [esi + 32], xmm2
        movntdq [esi + 48], xmm3
        movntdq [esi + 64], xmm4
        movntdq [esi + 80], xmm5
        movntdq [esi + 96], xmm6
        movntdq [esi + 112], xmm7
        add esi,  128
        loop    a20;
    }
}

int main()
{ 
    unsigned __int64 tick1, tick2;
    const long nBytes = 32*KByte;   

    char* source = (char*)_mm_malloc(nBytes*sizeof(char),16);

    tick1 =  getTicks();
    memory_notCache_write_128(source, current_times.t128);
    tick2 =  getTicks();

    double time = (double)(tick2-tick1)/(ProcSpeedCalc());
    cout << "Time WRITE_128[seconds]:" << time << endl;
    cout << (double) nBytes / time / MByte << endl;

    return 0;
} 
```

我使用的 RAM 数据表 - [http://www.alldatasheet.com/datasheet-pdf/pdf/308537/ELPIDA/EBE11UE6ACUA-8G-E.html](http://www.alldatasheet.com/datasheet-pdf/pdf/308537/ELPIDA/EBE11UE6ACUA-8G-E.html)

源代码（为 Win patform 编写）：[https ://bitbucket.org/closed_eyes/ram_speed_for_win/downloads/memory_test.cpp](https://bitbucket.org/closed_eyes/ram_speed_for_win/downloads/memory_test.cpp)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T00:21:44.163

您不应该对此类代码使用非临时操作。构建内存性能测试器的真正方法是使用访问模式来确保您永远不会命中缓存。通常，这是通过循环一个非常大的内存块来完成的，该内存块大于系统中的最后一级缓存，其中您的步幅与缓存行大小相同。如果您这样做，您将确保每次访问都将是所有级别的缓存未命中。不要忘记，当您从内存中读取一个字节时，处理器将获取整个缓存行，因此如果您执行 64 位加载，在具有 64 字节缓存行的机器上（非常常见），您应该从内存中读取 64 字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T10:22:58.523

Yury，您使用 movntdq 测量“物理”内存通道带宽的想法是正确的。我同意 Nathan Binkert 关于如何解决“系统范围”内存性能的观点，但是我想详细说明您关于 movntdq 一般适用性和 800Mbps 混淆的原始问题。

简洁版本：

1.  `movntdq`工作正常，当您想测量“物理”内存通道的带宽时可以使用。
2.  800Mbps 是“位通道”规范。每个（可能有两个）内存控制器通道都是 64 位宽。两个内存控制器通道将提供接近 1600MBytes/s 的原始写入性能，但这仍然与您的实际测量不匹配，因此请查看下面的详细信息。
3.  真的停止使用rdtsc。如果您遇到测量精度问题，请*仅* 使用`QueryPerformanceFrequency`和进行分析并增加测试缓冲区大小。`QueryPerformanceCounter`
4.  请指定您的硬件平台的详细信息（cpu、sodimms 数量等）确保您在 bios 设置中没有任何内存超频。

更长的版本。

1.  简而言之：movntdq 没问题。您必须将一系列 movntdq 写入对齐为 CPU 缓存行（64 字节）的倍数，并且必须将`movntdq`写入开始对齐到 64 字节边界。使用非对齐访问将导致指令的非时间提示无效，因此`memory_notCache_write_32`和`memory_notCache_write_16`函数都不是使用`movndq`指令的正确选择。
2.  简而言之：800Mbps 是单比特通道速度。`SODIMM`数据路径为 64 位，与 cpu/北桥内存通道相同。在谈论`movntdq`指令时，很可能有两个内存通道，但只有在主板上的正确内存插槽中安装了两个匹配的 sodimm 时，它们才会以“双通道”模式运行。两个通道应有效地为您提供 1600 Mbytes/s，而单通道将为您提供 800Mbytes/s 的性能。您的实际数字与 1600Mbytes/s 的估计值相差不大，但仍远未接近。这可能来自不正确的测量方法（见第 3 点）和/或超频内存（不太可能，但以防万一见第 4 点）。
3.  “`QueryPerformanceFrequency`并且`QueryPerformanceCounter`应该对每个人都足够了” :) 说真的，`rdtsc`在项目的这个阶段完全停止使用。`QueryPerformanceFrequency`当您测量超过 10Mbytes 内存区域的内存写入性能时，3+ MHz 计时器精度 ( ) 就可以了。考虑到 1600MBytes/s 的理论内存带宽 3MHz 定时器的每个滴答声将导致 533 字节的“测量错误”，这在写入 10Mbytes 时没什么。rdtsc 是非常棘手的东西，主要是因为它在启用电源管理的 CPU 上随着时间的推移不稳定（我敢肯定你不是在`rdtsc`提供稳定计数的第二代/第三代英特尔核心 CPU 上）。请从系统提供的计时测量功能开始，以正确完成测量。它'`QueryPerformanceFrequency`
4.  由于您正在测量物理内存通道带宽，因此值得指定用于此类测量的硬件平台。请确保您在 bios 设置中没有任何手动内存时序设置（如果内存控制器处于双通道模式，具有 533MHz 内存总线将提供 2+GBytes/s 内存带宽）。鉴于您使用的是嵌入式系统 ( `SODIMM`)，因此可能会在 bios 中调整内存控制器设置。只需仔细检查没有超频设置。

作为结论 - 不要使用`rdtsc`，仅使用`QueryPerformanceFrequency`和`QueryPerformanceCounter`，继续使用对齐版本的内存写入`movntdq`并检查嵌入式系统的配置。我还强烈建议完全避免使用内联汇编并改用使用`_mm_stream_si128`( [http://msdn.microsoft.com/en-us/library/ba08y07y.aspx](http://msdn.microsoft.com/en-us/library/ba08y07y.aspx) )

# php - PHP反转数组数字

> ID：10872125
> 
> 赞同：-3
> 
> 时间：2012-06-03T16:45:36.773
> 
> 标签：php, arrays

这是一个简单的问题，但在这里搜索我发现了不同的变化，但并不是我真正需要的。所以：

假设我有一组数字：[1,4,5,7,9] 我需要的是一个倒数的结果集，最大为 10：[2,3,6,8,10]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T16:48:46.953

```
$initialArray = array(1,4,5,7,9);
$requiredRange = range(1,10);

$invertedArray = array_diff($requiredRange,$initialArray); 
```

# ruby-on-rails - 如何使用 Devise 追溯确认老用户？

> ID：10872128
> 
> 赞同：3
> 
> 时间：2012-06-03T16:46:27.983
> 
> 标签：ruby-on-rails, devise, confirmation-email

我开始使用没有 :confirmable 的设计。现在我已经添加了它，并且我的用户被告知要确认他们的帐户，尽管许多人已经在一年前注册了。

我需要以编程方式确认数据库中的所有旧用户。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T17:08:02.913

最好编写一个迁移来更新用户表的新字段。我认为由于您使用的是设计，因此您必须在创建旧用户时将字段确认_at 和确认发送_at 设置为周围的东西。在将其应用于生产之前为此编写测试也是一个好主意。

最简单的方法可能是启动生产控制台，选择所有旧用户并在每个用户对象上调用确认！这应该将字段设置为当前日期。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T16:23:14.583

您只需将 Confirmed_at 设置为某个过去的日期，它就可以正常工作。如果您打算将其用于其他目的，例如统计，您可以更新 Confirmation_sent_at。

# c - 这个技巧可以在 C 中使用吗？

> ID：10872130
> 
> 赞同：2
> 
> 时间：2012-06-03T16:46:34.497
> 
> 标签：c

我想在 C 中的结构中添加一个字段。例如，我有以下结构。

```
struct A
{
 some_type x;
 some_type y;
} 
```

我声明了一个新结构，就像这样。

```
struct B
{
 A a;
 some_type z;
} 
```

现在说我有这样的功能。

```
int some_function( A * a ) 
```

是否可以在程序中像这样将 B 类型的变量传递给它。

```
B * b;
......
A * a = (A*)b;
some_function( a ); 
```

并且还可以`some_function`通过使用`a->x`例如使用里面的字段？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T16:55:38.430

是的，它是有效的。标准词，C99 6.7.2.1/13：

> ...指向结构对象的指针，经过适当转换，指向其初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。结构对象中可能有未命名的填充，但不是在其开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T16:49:58.043

是的，它会工作。A a 将是结构中的第一个成员

这就是一些人在 C 中模拟 OO 继承的方式

您可以使用

```
 &b->a 
```

而不是演员。并且可能会做一个 ASSERT 之类的

```
 ASSERT (&b->a == b) 
```

当你不小心破坏了这个语义时被警告

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T16:52:40.333

为什么不直接调用成员的方法呢？

```
some_function( &b->a ); 
```

您的代码现在可以工作了，但是如果有人决定更改 的成员`B`怎么办？还是之前添加了新成员`a`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T16:59:24.263

不，它不会工作。如果你稍微改变一下它*会起作用：*

```
struct A
{
 some_type x;
 some_type y;
}; /* <- note semicolon here */

struct B
{
 struct A a;
 some_type z;
}; /* ... and here */

int some_function(struct A *a ); /* ... and here ... */

struct B *b;
......
struct A *a = (struct A*)b;
some_function( a ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T17:14:36.160

是的，这会起作用，但只是偶然。

如果我正确地记得 C99 标准，那么这个特殊情况特别需要按您的预期工作。但很明显，这只是因为在此之前有足够多的人依赖它工作，并且它确实在足够多的实现中偶然工作，C99 标准委员会才觉得有义务为其在法律上和事实上的工作进行立法。

不要让这诱使您认为这是一个好主意。

任何依赖于标准边缘案例的东西都永远在崩溃的边缘摇摇欲坠，因为它看起来很老套（这会让你的代码的未来读者感到不舒服）并且看起来很聪明（这让他们对更改/修复任何东西感到紧张）。它还引导人们做出假设，因为您已经处于合法的边缘，可能会诱使人们越过边界进入损坏的代码。例如，结构中的第一个子结构中的第一个元素按照您的预期对齐，这并不意味着任何其他子元素都对齐。*它适用于您的*编译器这一事实并不意味着它适用于其他任何人的编译器，从而导致令人费解的令人困惑的错误。

写：

```
A *a = &(b->a); 
```

（正如上面的评论所暗示的），你的意思很清楚。

如果出于某种晦涩的原因您必须强制`B*`转换为`A*`，那么请写一个*非常*清晰的评论，解释为什么您别无选择，只能做您必须做的事情，向读者保证它是合法的，并指出 C99 标准的小节许可它。

如果你真的找不到那个小节（并且发现它是你的家庭作业/忏悔），那么评论一下，我会挖掘它。

# java - 使用随机数生成器对整数进行随机排列

> ID：10872132
> 
> 赞同：-3
> 
> 时间：2012-06-03T16:46:57.127
> 
> 标签：java, algorithm, random, permutation

这是我的家庭作业：

> ```
> Random r = new Random();
> public int get100RandomNumber() {
>     return 1 + r.nextInt(100);
> } 
> ```
> 
> 您将获得一个名为 getrand100()（上图）的预定义函数，该函数返回一个整数，该整数是 1-100 之间的一个随机数。您可以根据需要多次调用此函数，但请注意此函数非常耗费资源。您不能使用任何其他随机生成器。您**不能**更改 的定义`getrand100()`。
> 
> 输出：以随机顺序打印数字 1-20。（不是 20 个随机数）

我试过的..

```
public class MyClass {

    static Random r = new Random();
    static HashSet<Integer>;

    public static void main(String args[]) {
        myMethod();
        System.out.println(s);
    }    

    public static void myMethod() {
        boolean b = false;
        s = new HashSet<Integer>();
        int i = getRand100();
        if (i >= 20)
            i = i % 20;
        int j = 0;

        int k, l;
        while (s.size() <= 20) 
        {
            System.out.println("occurence no" + ++j);
            System.out.println("occurence value" + i);
            b = s.add(i);
            while (!b) {
                k = ++i;
                if(k<=20)
                    b = s.add(k);
                if(b==true)
                    break;
                if (!b) {
                    l = --i;
                    if(i>=1&&i<=20)
                        b = s.add(l);
                    if(b==true)
                        break;
                }
            }
        }
        System.out.println(s);
    }

    public static int getRand100()
    {
        return r.nextInt(100) + 1;
    }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:59:50.473

我相信您在问如何使用随机数生成器以随机顺序打印出数字 1 到 20。这也称为“随机排列”。[Fischer-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)就是这样一种算法。

但是，要实现该算法，您首先需要一个随机数生成器，它可以从 N 个项目中以相等的概率挑选一个，其中 N 的范围从 2 到要洗牌的集合的大小，而您只有一个可以挑选100 个项目中的一个等概率。这可以通过模算术和“重滚”的组合轻松获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:38:43.093

假设您被允许使用该`ArrayList`课程，我建议您在列表中填写您想要的数字（在这种情况下为 1 到 20），然后从列表中随机选择数字并将其删除。使用`getRand100() % theList.size()`对于您的原因应该是足够随机的，您只需要调用它 19 次。当只剩下一个元素时，不再需要从列表中“随机”选择它。;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T07:29:32.730

我相信我已经想出了一种方法来转换 1 和 n 之间的任何数字！（假设项目数已知）到 n 个项目的唯一排列。

从本质上讲，这允许对整个牌组进行“立即”随机化，而无需使用任何洗牌算法。目前，它在 O(n^2) 中运行并且需要使用 BigInteger 包（即在 Java 或 Javascript 中），但我正在寻找优化运行时的方法（尽管老实说，现在 2500 次迭代无论如何都不算​​什么）。无论如何，当给定至少 226 位有效的随机数据时，该函数能够在 10 毫秒内生成 52 个整数的混洗数组。

该方法类似于用于将十进制数转换为二进制数（连续除以 2 等）的方法。我很乐意应要求提供我的代码；我觉得有趣的是我以前没有遇到过。

# asp.net-mvc - 在 T4 模板中检索 [DisplayName] DataAnnotation

> ID：10872136
> 
> 赞同：0
> 
> 时间：2012-06-03T16:47:01.673
> 
> 标签：asp.net-mvc, data-annotations, t4, scaffolding

我已经在 VS2010 中下载了[MVCScaffolding](http://nuget.org/packages/MvcScaffolding) nuget 包。我正在尝试从我的模型中检索 [DisplayName 数据注释，以便在 index.cs.t4 模板中使用它。

此页面[OneToMany 关系](http://blog.stevensanderson.com/2011/01/28/mvcscaffolding-one-to-many-relationships/)向我展示了如何修改索引模板以提供一个链接，该链接将我带到我的子对象的控制器索引。在这种情况下，从电子邮件到电子邮件收件人。问题是我已经调用了我的控制器 emailcontroller 和 emailrecipientscontroller，而不是它们的描述性较差的表名称，无论如何我都希望隐藏它们。我已经用这个显示名称（emailrecipients）数据注释同样修饰了t4模板使用的元数据对象（tbl_My_unwieldytablename_emailMetadata），我希望我可以修改模板以替换关系的名称以使用显示名称，这是我的控制器名称，即

```
[MetadataType(typeof(tbl_My_unwieldytablename_emailMetadata))]
public partial class tbl_My_unwieldytablename_email
{
    internal sealed class tbl_My_unwieldytablename_emailMetadata
    {
        [ScaffoldColumn(false)]
        [Required(ErrorMessage="id is required")]
    public Int32 id { get; set; }

        [DataType(DataType.Date)]
    public DateTime send_date { get; set; }

        [StringLength(255)]
    public String title { get; set; }

        [DataType(DataType.MultilineText)]
    public String message { get; set; }

        [StringLength(50)]
    public String author { get; set; }

        [StringLength(80)]
        [DataType(DataType.EmailAddress)]
    public String author_email { get; set; }

        [DataType(DataType.MultilineText)]
    public String attachment { get; set; }

        [DataType(DataType.Date)]
    public DateTime created_date { get; set; }

    public Int32 batches { get; set; }

        [DataType(DataType.Date)]
    public DateTime complete_date { get; set; }

    [DisplayName("emailrecipients")]
    public EntityCollection<tbl_My_unwieldytablename_email_recipients> tbl_My_unwieldytablename_email_recipients { get; set; }

    } 
```

干杯蒂姆

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-04T05:06:26.337

```
[Table("tbl_My_unwieldytablename_email")]
Public Class Email

[Table("tbl_My_unwieldytablename_email_recipients")]
Public Class EmailRecipients 
```

应该将您的类映射到数据库表

# ruby-on-rails - rspec .reload 不重新加载对象

> ID：10872139
> 
> 赞同：1
> 
> 时间：2012-06-03T16:48:03.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

我在 spec/requests/user_pages_spec.rb 中添加了以下测试：

```
require 'spec_helper'

describe "UserPages" do
  subject { page }
  .
  .
  .
  describe "user should be able to update username" do
    before do
      @user = FactoryGirl.create(:user)
      visit new_user_session_path
      fill_in "Email", with: user.email
      fill_in "Password", with: user.password
      click_button "Sign In"
    end

    specify { @user.username.should_not == "New Name" }

    context "after filling in correct details" do
      before do
        visit edit_user_registration_path
        fill_in "Name", with: "New Name"
        fill_in "Current password", with: @user.password
        click_button "Update"
      end

      specify { @user.reload.username.should == "New Name" }
      it { should have_selector('div.alert.alert-notice', text: "You updated your account successfully." ) }
      it { should have_selector('title', text: "Edit account details" ) }
    end
  end

end 
```

第一个指定返回用户名“Person”，但重新加载后的第二个指定返回：

```
1) UserPages user should be able to update username after filling in correct details 
   Failure/Error: specify { @user.reload.username.should == "New Name" }
     expected: "New Name"
          got: "Person" (using ==)
   # ./spec/requests/user_pages_spec.rb:83:in `block (4 levels) in <top (required)>' 
```

如果我更改任何行测试失败，我已经手动检查了应用程序并且更新工作正常。我也试过`@user.reload`在再次获得名字之前打电话。

可能是什么问题呢？我应该把这段代码放在别的地方吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:32:18.743

您应该`@user`在此行中使用实例：

```
fill_in "Email", with: user.email
fill_in "Password", with: user.password 
```

所以，它应该是：

```
fill_in "Email", with: @user.email
fill_in "Password", with: @user.password 
```

# c# - 将日期和时间从 JavaScript 解析为 C#

> ID：10872143
> 
> 赞同：2
> 
> 时间：2012-06-03T16:48:26.377
> 
> 标签：c#, javascript

我有一些 JavaScript 代码试图传递给我的 Web 服务。我的 JavaScript 代码应该以 UTC 格式发送日期。在本地，我生成代码的时间是下午 12:30:43。当我执行我的 JavaScript 代码时，生成了以下日期/时间：

*2012-06-03T20:30:43.000Z*

该日期/时间是从此代码生成的：

```
var now = new Date();
var utcDate = new Date(
  now.getUTCFullYear(),
  now.getUTCMonth(),
  now.getUTCDate(),
  now.getUTCHours(),
  now.getUTCMinutes(),
  now.getUTCSeconds()
); 
```

当我将日期/时间从 JavaScript 传递回我的 Web 服务时，它会被序列化，如下所示：

*20120603163043*

在这一点上，这对我来说是正确的。然后我需要获取该字符串并将其转换为 C# 中的日期/时间。为了做到这一点，我正在使用以下 C# 代码：

```
DateTime _value = DateTime.MinValue;
DateTime.TryParseExact(value, "yyyyMMddHHmmss", CultureInfo.InvariantCulture, DateTimeStyles.AssumeUniversal, out _value) 
```

发生这种情况时，我会得到以下日期/时间。 *2012 年 6 月 3 日下午 12:30:43*

我究竟做错了什么？我预计日期/时间是 2012 年 6 月 3 日下午 4:30:43

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:51:05.667

您得到的结果是正确的，但请检查[`Kind`](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx)您的`DateTime`. 您会注意到它没有设置为，`UTC`而是设置为`Local`。

您可以使用`DateTimeStyles.AdjustToUniversal`生成一个`DateTime`with `Kind`set to `UTC`。

```
DateTime dateTime;
DateTime.TryParseExact(
    value,
    "yyyyMMddHHmmss",
    CultureInfo.InvariantCulture,
    DateTimeStyles.AssumeUniversal | DateTimeStyles.AdjustToUniversal,
    out dateTime); 
```

看到它在[ideone](http://ideone.com/K5xNZ)上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T12:00:03.163

如果您只想使用（例如 webAPI）进行序列化，我发现 JS`toISOString`非常有用且兼容。

```
//JAVASCRIPT
var d = new Date();
$toPut.dateTime = d.toISOString();
$toPut.put()

//C#
[Put("/setup/dateTime"), HttpPut]
public HttpResponseMessage SetDateTime([FromBody]DateTime dateTimeSettings ) 
```

这样你就可以保留你的数据结构而不用处理解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:49:50.043

您必须将日期参数以 ​​UTC 格式传递给 Web 服务，然后使用 TryParse 方法将其转换为 C# 日期对象。

试试这个：

```
//Javascript
var now = new Date(); //just like: 'Thu, 21 Mar 2013 12:44:40 GMT'
var utcNowString = now.toUTCString(); //pass this parameter to your web service 
```

这是 C# 代码：

```
DateTime date;
DateTime.TryParse(jsDateString, out date); //parsed as: '21.03.2013 14:44:40' 
```

希望这可以帮助。

# google-maps - 仅获取带有地理编码的 IATA 代码

> ID：10872154
> 
> 赞同：13
> 
> 时间：2012-06-03T16:49:33.230
> 
> 标签：google-maps, google-maps-api-3, geocoding

我如何才能在 Google 地图中获得 IATA 代码？我刚刚知道如何获取地址和城市，但我只需要获取 IATA 代码，例如 NYC 或 JFK 等。我该怎么做？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-03T16:58:09.490

您可以使用[全球机场数据库](http://www.partow.net/miscellaneous/airportdatabase/)。它有 GPS 坐标。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-11T06:08:42.190

您可以尝试使用此服务：

GET 请求参数：http: [//iatageo.com/getCode/](http://iatageo.com/getCode/) {lat}/{lng}

GET 请求示例：http: [//iatageo.com/getCode/-15.4343434/-47.323232](http://iatageo.com/getCode/-15.4343434/-47.323232)

这将返回一个 JSON，例如：

```
{
  "code": "BSB",
  "distance_meters": "127763.232556459"
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T17:45:25.547

如果您对位置进行反向地理编码，Google 地理编码器将不会返回 IATA 代码。如果你给它一个 IATA 代码，它会返回一个位置。

[您可以在https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)对KJFK 进行地理编码（它会在 40.64384360,-73.78230350 处放置一个标记）。

[如果您使用https://developers.google.com/maps/documentation/javascript/examples/geocoding-reverse](https://developers.google.com/maps/documentation/javascript/examples/geocoding-reverse)对该位置进行反向地理编码，您将获得大量数据，但既不包含三字母代码也不包含四字母代码。（格式化的地址包括“JFK”，但不能保证：您需要它作为可识别的数据项）

如果您想查找特定位置的 IATA 代码，则需要使用其他资源。

# asp.net - 在上传 asp、net 时调整图像大小和裁剪

> ID：10872155
> 
> 赞同：0
> 
> 时间：2012-06-03T16:49:36.447
> 
> 标签：asp.net, image, resize, crop

我有下面的代码，我希望同时裁剪和调整大小，我使用下面的函数，我希望将 150 x 150 px 的图像大小居中裁剪，但如果图像宽度 > 高度，则始终使用下面的函数，输出图像将是 200x150，但我需要它是 150x150 像素，任何帮助

```
Function SavetoDisk(FU As FileUpload, ByVal para_Save_to_Path As String, ByVal maxHeight As Integer, ByVal maxWidth As Integer, para_FileExt As String, anchor As AnchorPosition)

    Using image As Image = image.FromStream(FU.PostedFile.InputStream)

        Dim sourceWidth As Integer = image.Width

        Dim sourceHeight As Integer = image.Height
        Dim sourceX As Integer = 0
        Dim sourceY As Integer = 0
        Dim destX As Integer = 0
        Dim destY As Integer = 0

        Dim nPercent As Decimal = 0
        Dim nPercentW As Decimal = 0
        Dim nPercentH As Decimal = 0

        nPercentW = (Convert.ToSingle(maxWidth) / Convert.ToSingle(sourceWidth))
        nPercentH = (Convert.ToSingle(maxHeight) / Convert.ToSingle(sourceHeight))

        If (nPercentH < nPercentW) Then
            nPercent = nPercentW
            Select Case (anchor)
                Case AnchorPosition.Top
                    destY = 0
                Case AnchorPosition.Bottom
                    destY = Convert.ToInt32(maxHeight - (sourceHeight * nPercent))
                Case Else
                    destY = Convert.ToInt32((maxHeight - (sourceHeight * nPercent)) / 2)
            End Select
        Else
            nPercent = nPercentH
            Select Case (anchor)
                Case AnchorPosition.Left
                    destX = 0
                Case AnchorPosition.Right
                    destX = Convert.ToInt32((maxWidth - (sourceWidth * nPercent)))
                Case Else
                    destX = Convert.ToInt32(((maxWidth - (sourceWidth * nPercent)) / 2))
            End Select
        End If

        Dim destWidth As Integer = Convert.ToInt32((sourceWidth * nPercent))
        Dim destHeight As Integer = Convert.ToInt32((sourceHeight * nPercent))

        Using thumbnailBitmap As Bitmap = New Bitmap(destWidth, destHeight)

            Using thumbnailGraph As Graphics = Graphics.FromImage(thumbnailBitmap)

                thumbnailGraph.CompositingQuality = CompositingQuality.HighQuality
                thumbnailGraph.SmoothingMode = SmoothingMode.HighQuality
                thumbnailGraph.InterpolationMode = InterpolationMode.HighQualityBicubic
                Dim imageRectangle As Rectangle = New Rectangle(0, 0, destHeight, destHeight)
                thumbnailGraph.DrawImage(image, New Rectangle(destX, destY, destWidth, destHeight), New Rectangle(sourceX, sourceY, sourceWidth, sourceHeight), GraphicsUnit.Pixel)

                Dim jpegCodec As ImageCodecInfo = Findcodecinfo("JPEG")
                If Not IsNothing(jpegCodec) Then
                    Dim encoderParameters As EncoderParameters = New EncoderParameters(1)
                    encoderParameters.Param(0) = New EncoderParameter(Encoder.Quality, 80)
                    thumbnailBitmap.Save(para_Save_to_Path, jpegCodec, encoderParameters)
                Else
                    thumbnailBitmap.Save(para_Save_to_Path, ImageFormat.Jpeg)
                End If
            End Using

        End Using

    End Using

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:15:46.780

实现您想要的步骤：

1.  计算高宽比
2.  将较大的尺寸缩小到 150 像素，将较小的尺寸缩小到比率 * 150 像素。
3.  在 150x150 位图的中间绘制结果。

这段代码将完全做到这一点（c#）：

```
using ( Image img = Image.FromStream( FU.PostedFile.InputStream ) )
{
    int sourceWidth = img.Width;
    int sourceHeight = img.Height;

    int desiredHeight = 150;
    int desiredWidth = 150;

    double heightToWidthRatio = sourceHeight / ( double )sourceWidth;

    //This draw method will always center the image horizonally or vertically, as appropriate
    using ( Bitmap thumbnailBitmap = new Bitmap( desiredWidth, desiredHeight ) )
    {
        using ( Graphics thumbnailGraph = Graphics.FromImage( thumbnailBitmap ) )
        {
            thumbnailGraph.CompositingQuality = CompositingQuality.HighQuality;
            thumbnailGraph.SmoothingMode = SmoothingMode.HighQuality;
            thumbnailGraph.InterpolationMode = InterpolationMode.HighQualityBicubic;

            float destWidth = ( heightToWidthRatio > 1f ) ? ( float )( desiredWidth / heightToWidthRatio ) : desiredWidth;
            float destHeight = ( heightToWidthRatio > 1f ) ? desiredHeight : ( float )( desiredHeight * heightToWidthRatio );
            float destX = ( desiredWidth - destWidth ) / 2f;
            float destY = ( desiredHeight - destHeight ) / 2f;

            thumbnailGraph.DrawImage( img, new RectangleF( destX, destY, destWidth, destHeight ),
                                              new Rectangle( sourceWidth, sourceHeight, sourceWidth, sourceHeight ),
                                              GraphicsUnit.Pixel );
        }

    }
} 
```

继续像以前一样写出文件。重要的部分是中间的四个浮点值，以及它在 DrawImage 函数中使用 RectangleF 来真正居中的事实，即使在小数值上也是如此。如果由于过度抗锯齿而不想要这种行为，只需 Math.Floor 值并继续使用 Rectangle 和 int。

# flash - Flash 8 ActionScript - 影片剪辑位置

> ID：10872158
> 
> 赞同：0
> 
> 时间：2012-06-03T16:49:47.757
> 
> 标签：flash, actionscript, drag-and-drop, movieclip

在 Flash 8 中，我创建了一个影片剪辑。在里面我又添加了 3 个符号（电影剪辑）。1个盒子和两个图像，目标是拖放盒子中的rigt图像。我该怎么做？

```
on(press) {
startDrag("_root.FirstMC.RObject");
}

on(release) {
stopDrag();
if (_root.FirstMC.RObject._droptarget == "/Box") {
    gotoAndStop(3);
    }
} 
```

我究竟做错了什么？我可以拖放，但它无法识别放置位置（不会转到第 3 帧）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T21:16:30.037

使用 hitTest，例如

```
onClipEvent (enterFrame){
    if (yourMC.hitTest(yourImage))
    {
        what is supposed to happen here...

    }

} 
```

希望这可以帮助。

# php - PHP：将远程文件写入目录，无需 chmod 777

> ID：10872164
> 
> 赞同：2
> 
> 时间：2012-06-03T16:51:01.360
> 
> 标签：php, permissions, chmod

在我的（共享）虚拟主机上，我使用 PHP 的 curl 和 fopen 下载远程 XML 文件并将其保存到特定目录。系统必须稍后读取并执行它。现在，我已经预先创建了目录（权限：777）并且系统能够在目录中写入 XML 文件。

恐怕授予任何人读、写和执行的权限是一种安全风险。因此，我的问题是：

1.  在这种情况下将 chmod 设置为 777 是否存在安全风险？
2.  有没有办法在不将 chmod 设置为 777 的情况下达到预期的效果？

*（由于我是初学者，我（还）不熟悉文件用户、文件组和文件权限。有没有办法只有“系统”才能读取、执行和写入？）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:00:19.407

1.  你应该完全避免777。
2.  有一种方法。通过 chown 比 chmod 更好地解决此类问题。一种方法是确保写入文件的用户（通常是 apache 或 www）属于文件夹所有者的组，然后将权限设置为 maxiamlly 775。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:53:42.873

要仅允许所有者读取、执行和写入，请将权限更改为 0700。

# java - 如何让通知在活动中打开视图？

> ID：10872167
> 
> 赞同：0
> 
> 时间：2012-06-03T16:51:34.697
> 
> 标签：java, android, android-layout, notifications

现在我的主要活动有一个警报，它启动了一个在状态栏上启动通知的类。当我单击通知时，它会打开我的主要活动，现在我希望它打开该活动中的特定视图。

这是我的通知代码。

```
 String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);
    int icon = android.R.drawable.stat_notify_chat;        // icon from resources
    CharSequence tickerText = "TickerText";              // ticker-text
    long when = System.currentTimeMillis();         // notification time
    CharSequence contentTitle = "My notification";  // message title
    CharSequence contentText = "Hello World!";      // message text

    //This is the intent to open my main activity when the notification is clicked
    final Intent notificationIntent = new Intent(context, mainActivity.class);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

    // the next two lines initialize the Notification, using the configurations above
    Notification notification = new Notification(icon, tickerText, when);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

    mNotificationManager.notify(notifID, notification); 
```

这是我的主要活动使用的布局中的按钮，它打开了我希望打开通知的视图（图形视图）。

```
 <Button
    android:id="@+id/graphsButton"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_below="@id/reviewButton"
    android:layout_toRightOf="@id/medicineButton"
    android:onClick="openGraphs"
    android:text="Graphs" /> 
```

当您单击按钮时。它在主类中执行以下方法。

```
 public void openGraphs(View v) {
    canExit = false;
    setContentView(R.layout.graphs);
} 
```

所以基本上，我收到了打开应用程序并启动主要活动的通知，但我希望它直接启动图形视图。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T17:08:59.493

您可以使用意图的附加功能向通知中设置的待处理意图添加一个标志。在活动开始时评估意图。如果您在起始意图中找到标志，请执行`openGraphs()`. 确保获得最新的意图（不是可能较早开始活动的意图，这里有一些建议：[https](https://stackoverflow.com/a/6838082/1127492) ://stackoverflow.com/a/6838082/1127492 ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:46:02.047

有什么阻止您直接在 Activity 中显示图表吗？

在上面的 Activity 中，没有按钮，点击时显示 Graph，直接在 onCreate() 方法中将视图设置为 R.layout.graphs。

如果您将规定的活动用于其他目的，则创建一个单独的活动以显示图形并从 notificationIntent 指向它。

# c++ - 面向对象的编程逻辑

> ID：10872168
> 
> 赞同：8
> 
> 时间：2012-06-03T16:51:40.837
> 
> 标签：c++, oop

我正在学习 C++ 中 OOP 的基本概念，但遇到了一个逻辑问题。

```
#include <iostream>
#include <conio.h>

using namespace std;

class A {
    int i;
public:
    void set(int x) {
        i=x;
    }
    int get() {
        return i;
    }
    void cpy(A x) {
        i=x.i; 
    }
};

int main()
{
    A x, y;
    x.set(10);
    y.set(20);

    cout << x.get() << "\t" << y.get() << endl;
    x.cpy(y);
    cout << x.get() << "\t" << y.get() << endl;
    getch();
} 
```

我想在上面的代码中知道为什么我能够访问`x.i`[Line 19] ，它是不同对象中的私有成员。即使对象作为参数传递，私有范围是否限制在同一个类中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-03T17:00:50.160

`private`在 C++ 中意味着*类私有*，而不是*对象私有*。两种解释都是可能的，确实有些语言选择了另一种。但是大多数语言在这方面就像 C++，允许同一类的对象访问另一个实例的私有成员。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T16:55:49.523

变量`x`和`y`是同一类的两个实例。它们是*不同的对象*，但它们确实属于*同一类*。这就是为什么可以从成员函数访问私有成员的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-20T10:09:57.413

类的私有属性或方法意味着不能从类范围之外直接访问它。因为公共方法是在一个类中定义的，我们可以通过它访问和操作私有成员的值。

在上面的示例中，您不是直接`'i'`从对象访问，而是通过公共方法对其进行操作。

可以这样想：你有一个银行账户，你在银行里的钱是私人成员。你不能直接去银行自己取钱。银行出纳就像一个公共方法，可以访问私有财产，即你的钱，你可以通过出纳操纵你的钱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T16:53:50.977

`cpy(A x)`是类的成员，它可以访问`private`字段和方法。

`private`关键字限制来自其他类（对象）的实例访问字段。属于一个类的任何代码都可以访问它自己的私有成员（字段或方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-03T16:53:57.723

一个类可以访问它自己的私有数据成员。

这也意味着如果您有任何处理两个或多个实例的函数（`this`以及作为参数传递的东西），您可以访问**对象**的私有（和公共）变量/方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-14T11:04:26.993

> 即使将对象作为参数传递，私有范围是否也仅限于同一个类？

是的，这就是访问同一类（即**A**`x`类）中的私有成员的情况。`i`

# ios5 - 推送/弹出图形上下文

> ID：10872171
> 
> 赞同：0
> 
> 时间：2012-06-03T16:52:13.723
> 
> 标签：ios5

我一直在[学习斯坦福大学的 IOS 课程](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/downloads-2011-fall)，但我一直在理解 UIGraphicsPushContext 和 UIGraphicsPopContext 的作用（第 4 课）。从注释中可以看出，这些方法可用于避免其他实用程序方法影响当前图形状态。以下是注释中提供的示例：

```
- (void)drawGreenCircle:(CGContextRef)ctxt {

    UIGraphicsPushContext(ctxt);

    [[UIColor greenColor] setFill];

    // draw my circle 
    UIGraphicsPopContext();
}

- (void)drawRect:(CGRect)aRect {

    CGContextRef context = UIGraphicsGetCurrentContext();
    [[UIColor redColor] setFill];

    // do some stuff
    [self drawGreenCircle:context];

    // do more stuff and expect fill color to be red
} 
```

但是，当我尝试对此进行测试时，我似乎没有得到这个结果。下面是一个简单的测试用例，它在 drawRect 中获取当前上下文，设置颜色，调用将颜色设置为绿色的实用方法，返回到 drawRect 并绘制一条线。根据斯坦福网站上的注释，我预计该行将是红色的，因为我在 drawGreenCircle 中推送/弹出了上下文。（我意识到我实际上并没有在 drawGreenCircle 中绘制任何圆）但是我在 drawRect 中得到了一条绿线。看来我的 drawGreenCircle 方法确实改变了颜色并且没有将其恢复为红色。我想知道我对这个概念缺少什么。

```
- (void)drawGreenCircle:(CGContextRef)ctxt {
    //Doesn't actually draw circle --Just testing if the color reverts
    //to red in drawRect after this returns
    UIGraphicsPushContext(ctxt);
    [[UIColor greenColor] setStroke];   
    UIGraphicsPopContext();
}

- (void)drawRect:(CGRect)aRect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    [[UIColor redColor] setStroke];
    // do some stuff
    [self drawGreenCircle:context];
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, 100, 100);
    CGContextAddLineToPoint(context, 500, 100);
    CGContextClosePath(context);
    CGContextDrawPath(context, kCGPathFillStroke);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:28:44.693

你需要`CGContextSaveGState`，`CGContextRestoreGState`而不是。以下代码有效：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    [[UIColor greenColor] setFill];
    [[UIColor blackColor] setStroke];
    [self drawBlueCircle:context];
    CGContextMoveToPoint(context, 55, 5);
    CGContextAddLineToPoint(context, 105, 100);
    CGContextAddLineToPoint(context, 5, 100);
    CGContextClosePath(context);
    CGContextDrawPath(context, kCGPathFillStroke);
}

- (void)drawBlueCircle:(CGContextRef)context {
    CGContextSaveGState(context);
    [[UIColor blueColor] setFill];
    CGContextAddEllipseInRect(context, CGRectMake(0, 0, 100, 100));
    CGContextDrawPath(context, kCGPathFillStroke);
    CGContextRestoreGState(context);
} 
```

[资源](https://stackoverflow.com/questions/8464573/how-to-get-context-for-the-parameter-of-uigraphicspushcontext#comment10470014_8465384)

# php - 使用 php 处理 mysql 中由 ajax 引起的错误

> ID：10872174
> 
> 赞同：2
> 
> 时间：2012-06-03T16:52:41.847
> 
> 标签：php, mysql, ajax

我正在使用 ajax 提交表单，

```
 function ajax_post() {
            // ...(code);
        var hr = new XMLHttpRequest();
        var url = "http://domain.com/submit_action.php";
        var vars = "element_1=" + ln + "&element_2=" + fn;
        hr.open("POST", url, true);
        hr.send(vars);
            // ...(code);
} 
```

有 php exc 查询：

```
$sql = 'SELECT *
        FROM ' . table. '
        WHERE ' . $db -> sql_build_array('SELECT', $data);
$result = $db -> sql_query($sql);
$sql = 'INSERT INTO ' . table. ' ' . $db -> sql_build_array('INSERT', $data);
$db -> sql_query($sql); 
```

在我上面的代码中，它将运行。但是当 'fn' 和 'ln' 相同或已经存在于 db 中时，就会出现错误。但是因为我使用 ajax 提交它，所以我停留在表单的当前页面上而不会出现错误，也不知道查询是否为 exc。

问题是，有没有办法让 php 告诉 ajax 在查询的 exc 期间发生了什么样的错误？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T16:58:11.220

在您的 php 脚本中回显的任何内容都将返回到`hr.responseXML`and`hr.responseText`属性中。

只要状态正常，就在回调中捕获这两个值`hr.onreadystatechange`，以了解 php.ini 中发生了什么。

```
hr.onreadystatechange = function() {
    if (hr.readyState == 4 && (hr.status == 200)) {
        //do something with hr.responseText
    }
} 
```

我个人系统地将我的 php 答案封装在一个通用的 xml 响应中，具有自定义状态：错误/确定/业务错误和自定义消息，所以我知道在 javascript 层如何处理它。

除此之外，我建议您捕获 1062 mysql 错误以了解该错误是由于已经存在的值引起的，并提出更用户友好的消息。

# android - Android 光标 - moveToNext() 似乎没有走到光标的末尾

> ID：10872178
> 
> 赞同：3
> 
> 时间：2012-06-03T16:53:49.397
> 
> 标签：android, android-contacts, android-cursor

为什么我的 Android 光标没有一直走到原始“承诺”的末尾？？

我的**cursor.getCount()**与我上次的**cursor.getPosition()**不同。检查我的while循环！这就是我所做的一切！

*注意*：1.它是关于查询联系人内容提供者（android api>5）2.我只显示基本代码

```
Cursor cursor = mContext.getContentResolver().query(mUri, mProjections, null, null, null);
Logger.d(TAG, "***  cursor.getCount(): "+cursor.getCount());
while (cursor.moveToNext()) {
    Logger.d(TAG, "| position: "+cursor.getPosition());
    processMainCursor(serializer, cursor);
}
cursor.close(); 
```

processMainCursor() 将显示来自光标的数据 + 做另一个查询：一个 4 个电话，一个 4 个电子邮件，一个 4 个 IM 帐户：

```
void processMainCursor(XmlSerializer serializer, Cursor main_cursor) {
     writeCursorData(serializer, main_cursor); //writes cursor data, column by column
     writePhoneEntities(serializer, main_cursor);
     writeEmailEntities(serializer, main_cursor);
     writeIMEntities(serializer, main_cursor);
} 
```

在我的任何`writeXXX`方法中，我都不会关闭`main_cursor`或移动下一步！！！..必须相信我..我只是做一个新查询，打印数据并关闭该光标

所以统计：

*   cursor.getCount() = 695（**总是**）
*   评论*writePhoneEntities, writeEmailEntities, writeIMEntities* : cursor.getCount() = last cursor.getPosition() = 695 （**太正确了！**）
*   留下一个/两个/所有我的*writeXEntities*显示随机性；示例：将它们全部保留：last cursor.getPosition() 有时会显示 254、257、253 等；只留下电话和 IM：514、510、511 等（**不同的 RUN -> 不同的最后一个 cursor.getPosition() VALUE**）

所以意见..为什么会这样？和内存有关吗？

*更新*：将我的任何 writeXEntities 显示在 logcat 的末尾： *删除死的内容提供者：联系人*

*更新 2* 添加 `cursor.moveToFirst();`和执行循环

```
do {
    //do whatever you want
} while (cursor.moveToNext()); 
```

没做作业。。

所以也许答案就在这个 logcat 条目中：

```
05-21 23:29:30.209: I/ActivityThread(7085): Removing dead content provider: contacts
05-21 23:29:30.209: I/ActivityThread(7085): Removing dead content provider: com.android.contacts 
```

**删除**了 writeXEntity 的样本****

 ****解决方案**..我没有正确关闭**writeXEntity**的游标（可能在 main while 之后留下很多打开的游标）

实际上我是这样关闭的

```
if(phone_cursor!=null && phone_cursor.getCount() > 0)
{                   
     //... stuff
     phone_cursor.close();
} 
```

我应该在 if 之后关闭

```
if(phone_cursor!=null && phone_cursor.getCount() > 0)
{                   
     //... stuff
}
phone_cursor.close(); 
```

我想打开一个 basilion 光标..是答案吗？！？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T17:02:50.537

您需要将光标移动到第一行。尝试在循环`cur.moveToFirst()`之前添加。`while`

您也可以考虑使用`do-while`循环。这将确保您永远不会跳过游标中的第一行：

```
if (cursor.moveToFirst()) {
    do {
        //do whatever you want
    } while (cursor.moveToNext());               
}
cursor.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T09:58:46.007

在阅读了您已经找到的答案（关闭游标的问题）之后，我认为确保关闭它们的最佳方法是使用以下代码：

```
Cursor c = null;
try {
   c = <your query>;
   if (c.moveToFirst()) { // No point in doing more if empty.
      do {
         <process this cursor row>
      } while (c.moveToNext());
   }
}
finally {
   if (c != null) c.close(); // Not sure the check needed, maybe if query was really wrong.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T17:04:54.637

好吧，它们不会是相同的数字，因为 getCount 是项目数，而位置是位置，（第一个是 0）。所以最终的位置应该总是比计数少一。

如果不是这样，我想我没有正确理解你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T17:09:02.630

使用光标如下图：

```
 if(cursor.getCount() == 0)
              {                   
                 //No entry found
              }
              else  {
                  cursor.moveToFirst();
                  do {
                     //do whatever you want
                     } while (cursor.moveToNext());               
            cursor.close(); 
```**

# python - 如何将numpy数组相互映射？

> ID：10872180
> 
> 赞同：1
> 
> 时间：2012-06-03T16:53:51.827
> 
> 标签：python, multidimensional-array, numpy

我有两个 (A, B) 相同有限但任意大的布尔数组，并且仅在运行时形状和尺寸时才知道。

我想计算 A 和 B 中相应元素的布尔函数的值并将它们存储在 C 中。最后我需要一个 C 为真的元组列表。

如何到那？

我不想遍历单个元素，因为我不知道有多少维度，必须有更好的方法。

```
>>> A = array([True, False, True, False, True, False]).reshape(2,3)
>>> B = array([True, True, False, True, True, False]).reshape(2,3)
>>> A == B
array([[ True, False, False],
       [False,  True,  True]], dtype=bool) 
```

根据需要，但是：

```
>>> A and B
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all() 
```

如何获得“A 和 B”？

我尝试了“map”、“zip”、“nditer”，并没有成功搜索其他方法。

至于元组的东西，我需要像“argmax”这样的布尔值，但也没有找到任何东西。

你知道一些事情，这可能会有所帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T07:23:03.427

您还可以使用 & 运算符：

```
In [5]: A & B

array([[ True, False, False],
       [False,  True, False]], dtype=bool) 
```

logical_and 调用的最大优势在于您可以使用 out 参数：

```
In [6]: C = empty_like(A)

In [7]: logical_and(A, B, C)

array([[ True, False, False],
       [False,  True, False]], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T17:20:41.893

是的，NumPy 中有一个函数：

```
numpy.logical_and(A,B) 
```

# ruby-on-rails-3 - 如何在 rails 上安装 devise 2.1.0 ruby

> ID：10872181
> 
> 赞同：1
> 
> 时间：2012-06-03T16:53:53.907
> 
> 标签：ruby-on-rails-3, devise, gem

我尝试安装与我安装 1.1.rc0 相同的原因，但是当我编写代码时我得到了味精

```
rails generate devise_install
Could not find generator devise_install. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T16:55:31.480

尝试：

```
rails generate devise:install 
```

# javascript - 逗号优先的 JS 格式化程序

> ID：10872184
> 
> 赞同：13
> 
> 时间：2012-06-03T16:54:12.480
> 
> 标签：javascript, coding-style, formatting

你知道支持[逗号优先](https://gist.github.com/357981)编码风格的 JS 格式化程序吗？

```
var a = 'ape'
  , b = 'bat'
  , c = 'cat'
  , d = 'dog'
  , e = 'elf'
  , f = 'fly'
  , g = 'gnu'
  , h = 'hat'
  , i = 'ibu'
  ; 
```

到目前为止，我已经查看了[JS Beautifier](http://jsbeautifier.org/)和[SourceFormatX](http://www.sourceformat.com/)，但找不到它的选项。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T17:14:15.513

我在这里稍微修改了 jsbeautifier 代码：

[http://jsfiddle.net/RabTN/29/](http://jsfiddle.net/RabTN/29/)

按`doit`查看美化代码。

我专门修改了第 1080 行：

```
 if (flags.var_line) {
            if (token_text === ',') {
                if (flags.var_line_tainted) {
                    flags.var_line_reindented = true;
                    flags.var_line_tainted = false;
                    print_newline();
                    print_token();
                    print_single_space();
                    break;
                } else { 
```

和第 1123 行

```
 if (token_text === ',') {
            if (flags.var_line) {
                if (flags.var_line_tainted) {
                    print_newline();
                    print_token();
                    print_single_space();

                    flags.var_line_tainted = false;
                } else {
                    print_newline();
                    print_token();
                    print_single_space();
                }
            } else if (last_type === 'TK_END_BLOCK' && flags.mode !== "(EXPRESSION)") {
                print_token();
                if (flags.mode === 'OBJECT' && last_text === '}') {
                    print_newline();
                } else {
                    print_single_space();
                }
            } else {
                if (flags.mode === 'OBJECT') {
                    print_newline();
                    print_token();
                    print_single_space();
                } else {
                    // EXPR or DO_BLOCK
                    print_token();
                    print_single_space();
                }
            }
            break 
```

# mysql - MySQL 与基于文件的 CMS

> ID：10872186
> 
> 赞同：0
> 
> 时间：2012-06-03T16:54:40.040
> 
> 标签：mysql, performance, content-management-system, blogs

我正在寻找一个新的 CMS 来托管我的新博客，我正在决定使用 MySQL 或基于文件的 CMS 的最佳途径。

我可能会每隔一天在博客上写一篇文章，所以我正在寻找速度。

有谁知道哪个对速度/安全性更好？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:06:36.210

我强烈推荐一种流行的方法，例如[Joomla](http://www.joomla.org/)、Wordpress 或 Drupal（为什么要重新发明轮子？）。它们受到社区的大力支持，因此通常在您意识到它们存在之前就发现并修复了诸如安全性等标准问题。我个人最喜欢的是 Joomla，因为有大量可用的[扩展程序](http://extensions.joomla.org/)，其中很多都专注于社交媒体，如 twitter 和 facebook，以从您在网站上发布的内容“传播信息”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-03T17:06:02.497

为了安全起见，我认为将内容存储在数据库中更安全，因为数据库访问需要的身份验证级别比简单地将内容存储在文件中要多一层。

如果用户在您的系统中四处寻找并找到您的包含文件夹，那么所有内容都可能通过猜测路径而暴露。由于数据库通常是从您的前端应用程序中抽象出来的，因此通过简单地猜测 url 路径来访问其内容要困难得多。

此外，您的应用程序可能只会将数据库中的某些字段暴露给前端（假设您的数据库访问函数已正确编写以防止 SQL 注入等事情）。

除非您期望站点上的访问量非常大，否则您可能不会注意到从文件读取与从数据库读取之间有太大区别。

# objective-c - 为什么有时在 Xcode 4.3 中很难看到变量的内容

> ID：10872191
> 
> 赞同：0
> 
> 时间：2012-06-03T16:55:29.313
> 
> 标签：objective-c, xcode4.3

![在此处输入图像描述](../Images/eaef7d935eb977904d7a28277c146a03.png)

有时显示有时不显示

我想知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:06:31.187

LLDB 在显示变量的正确状态方面似乎不如 GDB - 例如，有时，通常在方法开始附近，LLDB 无法确定类型，`self`并且您看不到实例变量；而具有相同代码的 GDB 很好。

有时还有其他原因；与访问内存、锁等有关；调试器无法向您显示变量。

我不能说您的特定情况是 LLDB 失败还是 GDB 也会失败的情况之一，但是如果这在特定项目中对您造成很大影响，那么切换到 GDB 对项目来说可能是值得的。

# ruby-on-rails - 用于导轨的 Evercookie

> ID：10872194
> 
> 赞同：4
> 
> 时间：2012-06-03T16:55:31.940
> 
> 标签：ruby-on-rails, cookies

我正在寻找一种解决方案来检测在我的网站上创建许多帐户的作弊者。

我找到了永久的跨浏览器 cookie：[http](http://samy.pl/evercookie/) ://samy.pl/evercookie/ 但它是用 JS 编写的，我需要在 rails 控制器中使用一些东西。有没有像evercookie这样的gem或插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T13:54:16.073

一旦我为 Rails 搜索 Evercookie 解决方案，没有找到并写了一个 gem 'evercookie'。你可以[试试](https://rubygems.org/gems/evercookie "试试看")。文档在[github上可用](https://github.com/daddyz/evercookie "github")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T01:26:39.637

### 电子邮件令牌（设计，巫术）

您可以向新用户发送电子邮件吗？

许多网站使用的一个简单解决方案是向用户发送带有安全令牌的电子邮件。一个很好的 Rails gem 是 Devise，另一个是 Sorcery，它可以很容易地构建你自己的自定义身份验证。

### 第三方登录（OmniAuth、OpenId、Facebook Connect、Twitter 等）

您可以使用第三方服务对用户进行身份验证吗？

OmniAuth gem 可以连接到许多第三方服务，并允许用户使用 Google、Yahoo、Facebook、Twitter、LinkedIn 上的现有帐户以及包括 LDAP 和 Shibboleth 在内的开放服务进行身份验证。

OpenId gem 可以很好地与 Google、Yahoo 和许多其他大型提供商配合使用；您还可以在 OmniAuth 中使用 OpenId。

在所有这些情况下，您都会跟踪发送情况，这样用户就不会使用相同的电话号码、邮政地址、信用卡等太快地再次申请。

### 电话留言 (Twilio)

你可以给你的用户发短信吗？

Twilio gem 可以向电话号码发送短信。这个概念是您的应用程序向他们发送带有验证码的短信。

### 蜗牛邮件（邮寄方式）

postalmethods gem 可让您在邮政邮件中发送真实的实物明信片。您可以发送带有验证码的明信片。这可能需要几天的时间，因此一些网站将其与新用户的“试用期”结合使用，在这种情况下，他们在某种程度上被沙盒化，不会造成任何麻烦。（例如，他们可以阅读信息，但不能发布信息）。

### 信用卡（BrainTree）

相关的想法是让用户向您发送需要信用卡的东西，例如使用支付网关，如 BrainTree 或 ActiveMerchant。

您可以验证该卡是否开放且有效，而无需向其收取任何费用。或者，您可能需要最低限度的付款，例如要求用户通过 PayPal、Google Payments、Amazon Dev Pay 等向您发送一美元。

信用卡号码具有内部结构（如校验和），因此您可以验证该号码的格式和校验和是否正确。一个简单的脚本是flame.org

### 图片验证码（recaptcha）

为了阻止机器人，Ruby recaptcha 等验证码非常有效。

Ruby 有其他验证码解决方案，其中任何一个都可以。

### 业力 (hypothes.is)

这不是一个宝石，而是一个概念。授予新用户有限的权限，例如只读访问权限。让用户通过成为会员一段时间，或通过贡献内容，或通过与您网站内的朋友和同行联系等方式获得新的特权。

这就是像 StackOverflow 这样的网站的工作方式，在 http://hypothes.is 上有很多关于这些方法的好信息

### 连击

最强大的方法是这些技术的组合。

也许给一个新用户一些基本的能力，比如阅读信息，然后让他通过上面的一个或多个身份验证来获得新的能力。这就是 Google 和 Facebook 添加一些功能的方式：您可以轻松注册，然后验证其他电子邮件，然后验证您的电话号码，然后验证您的邮政地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T13:45:17.157

不，没有 Rail drop-in 解决方案，它没有多大意义。

> evercookie 是用 JavaScript 编写的，另外使用 SWF (Flash) 对象作为本地共享对象，并使用 PHP 来在服务器端生成缓存的 PNG 和 ETag。

几乎所有的 Evercookie 技术都依赖于浏览器的特殊 Javascript API，因此无法将它们移植到服务器端技术（除了小的 PHP 部分）。

gem 可能使集成和更新更容易，但它仍然是客户端的 Javascript。

请考虑 Evercookie 的道德影响。在我看来，它是一个概念证明，而不是一个被广泛使用的工具。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-03T19:50:31.537

如果您想推出自己的解决方案，一个好的起点（使用 cookie）将是：

```
def create
  if cookies[:xyz]
    render :text => 'cheater!'
  else
    # save the user first (you may need to display the form again), and then set the cookie
    cookies[:xyz] = { :value => "1", :expires => 1.day.from_now }
   end
end 
```

编辑：这与evercookie 无法相比，只是一个简单的替代方案。

编辑 2：我已经说过验证码是作者可能应该使用的，所以我是否因为展示如果他仍然想使用 cookie 的起点是什么而被否决？

# java - JAR到EXE转换器？

> ID：10872204
> 
> 赞同：1
> 
> 时间：2012-06-03T16:56:33.603
> 
> 标签：java, jar

> **可能重复：**
> [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)

对不起一个新手问题，刚从windows下的Java开始......将可执行jar文件转换为windows exe文件的最佳方法是什么？

如果可能的话，让 GUI 也变成 windows 风格，因为 java 的 gui 看起来有点丑。:)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T16:59:43.517

尝试[JSmooth](http://jsmooth.sourceforge.net)或[launch4j](http://launch4j.sourceforge.net)。

两者都是免费的，允许您创建 java 可执行文件，并会自动在用户的工作站上查找/下载 JRE。

另请注意，Java 应用程序的*外观*由您决定。您声明外观使用

```
UIManager.setLookAndFeel(
        UIManager.getCrossPlatformLookAndFeelClassName()); 
```

这样你就可以替换默认*的外观*（我认为是*Metal*）。将它放在`main()`方法开始的某个位置（或至少在 swing 初始化之前）。

另请阅读有关[更改 Java 外观的其他方法](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)。

# .net - Neo4jRestClient：如何在节点和连接已经创建后添加索引？

> ID：10872206
> 
> 赞同：0
> 
> 时间：2012-06-03T16:56:38.003
> 
> 标签：.net, neo4j

我对 neo4j 很陌生，目前正在使用 Neo4jRestNet 客户端。为了学习，我创建了一个小型网络：

```
private static void GenerateNetwork()
        {
            var rootNode = Node.GetRootNode();

            // Create a User Node with Properties
            var prop = new Properties();
            prop.SetProperty(NodeProperty.Name.ToString(), "Madeline J. Parnell");
            prop.SetProperty(NodeProperty.Age.ToString(), "25");
            prop.SetProperty(NodeProperty.LivesIn.ToString(), "LA");

            var nodeUserWithName1 = Node.CreateNode(NodeType.Person.ToString(), prop);

            prop = new Properties();
            prop.SetProperty(NodeProperty.Name.ToString(), "Jack S. Waldrop");
            prop.SetProperty(NodeProperty.Age.ToString(), "28");
            prop.SetProperty(NodeProperty.LivesIn.ToString(), "San Francisco");

            var nodeUserWithName2 = Node.CreateNode(NodeType.Person.ToString(), prop);

            prop = new Properties();
            prop.SetProperty(NodeProperty.Name.ToString(), "Willis O. Hicks");
            prop.SetProperty(NodeProperty.Age.ToString(), "33");
            prop.SetProperty(NodeProperty.LivesIn.ToString(), "Ann Arbor");

            var nodeUserWithName3 = Node.CreateNode(NodeType.Person.ToString(), prop);

            prop = new Properties();
            prop.SetProperty(NodeProperty.Name.ToString(), "Leroy P. Wagner");
            prop.SetProperty(NodeProperty.Age.ToString(), "40");
            prop.SetProperty(NodeProperty.LivesIn.ToString(), "Hattiesburg");

            var nodeUserWithName4 = Node.CreateNode(NodeType.Person.ToString(), prop);

            prop = new Properties();
            prop.SetProperty(NodeProperty.Name.ToString(), "Nancy J. Rose");
            prop.SetProperty(NodeProperty.Age.ToString(), "25");
            prop.SetProperty(NodeProperty.LivesIn.ToString(), "Cornish");

            var nodeUserWithName5 = Node.CreateNode(NodeType.Person.ToString(), prop);

            prop = new Properties();
            prop.SetProperty(NodeProperty.Name.ToString(), "Sally G. Gee");
            prop.SetProperty(NodeProperty.Age.ToString(), "48");
            prop.SetProperty(NodeProperty.LivesIn.ToString(), "Charlestown");

            var nodeUserWithName6 = Node.CreateNode(NodeType.Person.ToString(), prop);

            prop = new Properties();
            prop.SetProperty(NodeProperty.Name.ToString(), "Blanche T. Perez");
            prop.SetProperty(NodeProperty.Age.ToString(), "35");
            prop.SetProperty(NodeProperty.LivesIn.ToString(), "Philadelphia");

            var nodeUserWithName7 = Node.CreateNode(NodeType.Person.ToString(), prop);

            prop = new Properties();
            prop.SetProperty(NodeProperty.Name.ToString(), "Robert S. Johnston");
            prop.SetProperty(NodeProperty.Age.ToString(), "22");
            prop.SetProperty(NodeProperty.LivesIn.ToString(), "Lancaster");

            var nodeUserWithName8 = Node.CreateNode(NodeType.Person.ToString(), prop);

            // Create Relationships to Nodes
            rootNode.CreateRelationshipTo(nodeUserWithName1, RelationshipType.Knows.ToString());
            rootNode.CreateRelationshipTo(nodeUserWithName2, RelationshipType.Knows.ToString());
            rootNode.CreateRelationshipTo(nodeUserWithName3, RelationshipType.Knows.ToString());
            rootNode.CreateRelationshipTo(nodeUserWithName4, RelationshipType.Knows.ToString());
            rootNode.CreateRelationshipTo(nodeUserWithName5, RelationshipType.Knows.ToString());
            rootNode.CreateRelationshipTo(nodeUserWithName6, RelationshipType.Knows.ToString());
            rootNode.CreateRelationshipTo(nodeUserWithName7, RelationshipType.Knows.ToString());
            rootNode.CreateRelationshipTo(nodeUserWithName8, RelationshipType.Knows.ToString());

            // Create Relationship with Properties
            //var relProp = new Properties();
            //relProp.SetProperty(RelationshipProperty.Name.ToString(), "MyRelationship");
            //relProp.SetProperty("CustomRelProp", "CustomPropValue");

            nodeUserWithName1.CreateRelationshipTo(nodeUserWithName2, RelationshipType.Knows.ToString());
            nodeUserWithName1.CreateRelationshipTo(nodeUserWithName3, RelationshipType.Knows.ToString());
            nodeUserWithName2.CreateRelationshipTo(nodeUserWithName3, RelationshipType.Knows.ToString());
            nodeUserWithName5.CreateRelationshipTo(nodeUserWithName6, RelationshipType.Knows.ToString());
            nodeUserWithName6.CreateRelationshipTo(nodeUserWithName8, RelationshipType.Knows.ToString());
            nodeUserWithName7.CreateRelationshipTo(nodeUserWithName1, RelationshipType.Knows.ToString());
            nodeUserWithName7.CreateRelationshipTo(nodeUserWithName1, RelationshipType.Knows.ToString());
            nodeUserWithName7.CreateRelationshipTo(nodeUserWithName3, RelationshipType.Knows.ToString());
            nodeUserWithName7.CreateRelationshipTo(nodeUserWithName4, RelationshipType.Knows.ToString());
            nodeUserWithName7.CreateRelationshipTo(nodeUserWithName5, RelationshipType.Knows.ToString());
            nodeUserWithName7.CreateRelationshipTo(nodeUserWithName6, RelationshipType.Knows.ToString());
            nodeUserWithName7.CreateRelationshipTo(nodeUserWithName8, RelationshipType.Knows.ToString());

        } 
```

我试图找到一种创建索引的方法，它相当于以下java方法：

IndexManager 索引 = graphDb.index(); 索引人= index.forNodes（“人”）；关系索引角色 = index.forRelationships(“角色”);

并将其添加到使用 GenerateNetwork() 方法创建的人员中，该方法在 java 中使用以下方法完成：

```
people.add( nodeInstance, "valueName", reeves.getProperty( "valueName" ) ); 
```

无论如何，到目前为止，我还没有找到使用 Neo4jRestClient 处理索引的方法。有谁知道如何使用 Neo4jRestClient 检查现有索引并将节点分配给索引？

如果有人分享一个例子，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:10:18.450

您可以使用该`AddToIndex`方法将节点/关系添加到索引。例如：

```
var node1 = Node.CreateNode();
node1.AddToIndex("nodes", "name", "jack"); 
```

或者你可以使用静态函数`Node`：

```
Node.AddToIndex(node1, "nodes", "name", "jack"); 
```

其中`"nodes"`是索引的名称，`"name"`/`"jack"`是键/值对。

如果您`Enum`为 value 参数传递一个值，它将使用节点上属性集合中的值。

注意：我刚刚在 2012 年 6 月 6 日推送了新代码，您应该尝试开始使用它。它现在支持命令的批处理，我将很快更新 API 以支持密码变异命令。我也将尽快更新文档，因为它们目前已过时。

hth。

# python - Python 2.7 中的 UnicodeDecodeError

> ID：10872208
> 
> 赞同：3
> 
> 时间：2012-06-03T16:56:48.533
> 
> 标签：python, unicode, python-2.7

我正在尝试在 python 中读取一个 utf-8 编码的 xml 文件，并且我正在对从文件中读取的行进行一些处理，如下所示：

```
next_sent_separator_index =  doc_content.find(word_value, int(characterOffsetEnd_value) + 1) 
```

其中 doc_content 是从文件中读取的行，而 word_value 是来自同一行的字符串之一。每当 doc_content 或 word_value 有一些 Unicode 字符时，我都会收到上述行的编码相关错误。因此，我尝试先使用 utf-8 解码（而不是默认的 ascii 编码）对它们进行解码，如下所示：

```
next_sent_separator_index =  doc_content.decode('utf-8').find(word_value.decode('utf-8'), int(characterOffsetEnd_value) + 1) 
```

但我仍然收到 UnicodeDecodeError 如下：

```
Traceback (most recent call last):
  File "snippetRetriver.py", line 402, in <module>
    sentences_list,lemmatised_sentences_list = getSentenceList(form_doc)
  File "snippetRetriver.py", line 201, in getSentenceList
    next_sent_separator_index =  doc_content.decode('utf-8').find(word_value.decode('utf-8'), int(characterOffsetEnd_value) + 1)
  File "/usr/lib/python2.7/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 8: ordinal not in range(128) 
```

谁能建议我一种合适的方法/方式来避免 python 2.7 中的此类编码错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T17:05:36.680

```
codecs.utf_8_decode(input.encode('utf8')) 
```

# javascript - 使用链接打开标签的 Javascript

> ID：10872213
> 
> 赞同：0
> 
> 时间：2012-06-03T16:57:22.020
> 
> 标签：javascript, html

以下选项卡适用于外部 js 文件。如何添加链接，以便当用户单击链接 www.ll.com/#comments 时，他将看到评论..tab [http://www.dynamicdrive.com/动态索引17/tabcontent/tabcontent.js](http://www.dynamicdrive.com/dynamicindex17/tabcontent/tabcontent.js)

```
<ul id="countrytabs" class="shadetabs">
<li><a href="#movies" rel="tutorial" class="selected">Tutorial</a></li>
<li><a href="#Comments" rel="comments">Comments</a></li>  
</ul>
<div class="contentbox">
<div id="movies" class="tabcontent">
Download movies here
</div>
<div id="comments" class="tabcontent">
</div>

<script type="text/javascript">
var countries=new ddtabcontent("countrytabs")
countries.setpersist(true)
countries.setselectedClassTarget("link") //"link" or "linkparent"
countries.init()
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:04:54.723

试试这个，之后`countries.init()`：

```
var tagIndex = window.location.toString().indexOf('#');
if (tagIndex >= 0)
    countries.expandit(window.location.toString().substring(tagIndex).toLowerCase()); 
```

编辑：您提供的示例代码中存在一些问题（您没有等待文档 onload 事件。您没有遵循 ddtabcontent 文档站点上的 A 链接的命名约定，...）

我创建了这个例子来测试它的功能：

```
<html>
    <head>
        <script type="text/javascript" src="tabcontent.js"></script>
        <script type="text/javascript">
             function onload()
             { 
                var countries = new ddtabcontent("countrytabs");
                countries.setpersist(true);
                countries.setselectedClassTarget("link");
                countries.init();
                var url = window.location.toString();
                var tagIndex = url.indexOf('#');
                if (tagIndex >= 0)
                    countries.expandit(url.substring(tagIndex).toLowerCase());
            }
        </script>
        <style type="text/css">
            div.tabcontent
            {
                display: none;
            }
        </style>
    </head>
    <body onload="onload()">
        <ul id="countrytabs" class="shadetabs"> 
            <li><a href="#movies" id="#movies" rel="movies" class="selected">Movies</a></li> 
            <li><a href="#comments" id="#comments" rel="comments">Comments</a></li>   
        </ul> 
        <div class="contentbox"> 
            <div id="movies" class="tabcontent"> 
                Download movies here 
            </div>
            <div id="comments" class="tabcontent">
                Put comments here
            </div>
        </div>
    </body>
</html> 
```

# php - 如何使用 PHP 在 mongoDB 上的多个字段中搜索相同的值？

> ID：10872216
> 
> 赞同：0
> 
> 时间：2012-06-03T16:58:06.410
> 
> 标签：php, mongodb

我正在为我的应用程序及其使用 MongoDB 创建一个搜索页面。所以我需要在多个字段中搜索字符串数组。

当我在单个字段中搜索时，我会这样做：

```
$docs = $collection->find(array('username' => new MongoRegex("/^query/")); 
```

但是当我搜索多个字段时，我需要做什么？像这样的东西？

```
$docs = $collection->find(array('username','name', 'email' => new MongoRegex("/^query/")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:52:57.213

这是一个记录如何从 PHP 查询 MongoDB 的页面：http: [//php.net/manual/en/mongocollection.find.php](http://php.net/manual/en/mongocollection.find.php)

你可能会想，因为你想将多个字段与相同的值进行比较，所以会有一个特殊的（更短的）语法（就像你想将单个字段与多个值进行比较时一样，比如在范围查询中）。

但是，情况并非如此——您仍然必须列出每个字段以及您要与之比较的值，就好像每个字段都在与不同的值进行比较一样。

唯一要考虑的另一件事是，您是在搜索所有字段与此正则表达式匹配还是所有字段与正则表达式匹配的所有文档。在第一种情况下，您必须执行“$or”查询。有关语法，请参见[手册页](http://php.net/manual/en/mongocollection.find.php)底部的最后一个示例。

# asp.net-mvc-3 - 具有唯一 ID 的多个提交按钮

> ID：10872217
> 
> 赞同：0
> 
> 时间：2012-06-03T16:58:08.953
> 
> 标签：asp.net-mvc-3

在我的应用程序中，我试图创建一个包含一些文本字段和一组附件的表单。用户将能够从数据库加载现有表单，编辑字段，还可以从附件集合中添加/删除单个附件。

为此，在我看来，我有一个用于呈现附件详细信息（id、名称）的 foreach 循环，还有一个用于删除附件的提交按钮。表单底部还有一个主提交按钮，用户可以在完成编辑表单后单击该按钮。

我已经按照[这个解决方案](http://blog.ashmind.com/2010/03/15/multiple-submit-buttons-with-asp-net-mvc-final-solution/)在我的表单中实现了多个提交按钮。但是我遇到的问题是，当用户想要删除附件时，当用户单击附件旁边的提交按钮时，我需要将附件 ID 作为参数传递给“RemoveAttachment”操作。但实际上，应用程序将主表单 ID 传递给 RemoveAttachment 操作。当用户单击按钮时，有没有办法传递附件 ID？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:09:58.917

使用一点 javascript，首先在表单中添加一个隐藏字段：

```
<input type="hidden" name="attachmentID" id="attachmentID"> 
```

然后，在每个提交按钮上：

```
<input type="submit" onclick="document.getElementById('attachmentID').value='@ATTACHMENT_ID'" /> 
```

当然，您可以将 ATTACHMENT_ID 替换为包含 id 的任何变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:05:22.913

`<form>`您可以为每个删除按钮制作一个单独的按钮，并使用隐藏的输入（或 URL 参数）指定 ID。

注意`<form>`s 不能嵌套。

# jakarta-ee - Java EE EJB 部署错误：容器已注册

> ID：10872220
> 
> 赞同：0
> 
> 时间：2012-06-03T16:58:29.303
> 
> 标签：jakarta-ee, jboss, ejb

我在本地计算机上运行 JBoss 5 服务器，我需要从我的 Java EE 项目到 postgresql 数据库的有效数据库连接。我开发了一个名为 UserManager 的 java 类，它的代码是：

```
导入 javax.ejb.Local；
导入 javax.ejb.Stateless；
导入 javax.persistence.EntityManager；
导入 javax.persistence.PersistenceContext；

@Stateless(name="UserManager1")
@Local(UserManagerItf.class)
公共类 UserManager 实现 UserManagerItf {

    @PersistenceContext
    私人 EntityManager em;

    公共布尔addUser（Joueur j）{
        Joueur jexist = em.find(Joueur.class, j.getLogin());
        如果（jexist==null）{
            em.persist(j);
            返回真；
        } 别的 {
            返回假；
        }

    }

}

```

问题是，在我使用 eclipse 导出我的 .war 文件并在部署中使用我的 .war 文件运行 jboss 后，我收到此部署错误：

```
18:47:27,645 INFO [BeanInstantiatorDeployerBase] 将 org.jboss.ejb3.instantiator.impl.Ejb31SpecBeanInstantiator@57b08b4f 安装到 MC 的 org.jboss.ejb.bean.instantiator/JEE/JEE/UserManager1
18:47:27,650 WARN [InterceptorInfoRepository] ​​EJBTHREE-1852：InterceptorInfoRepository 已弃用
18:47:28,062 INFO [BeanInstantiatorDeployerBase] 从 org.jboss.ejb.bean.instantiator/JEE/JEE/UserManager1 的 MC 卸载 org.jboss.ejb3.instantiator.impl.Ejb31SpecBeanInstantiator@57b08b4f
18:47:28,063 错误 [AbstractKernelController] 安装到 Real 时出错：name=vfs:///home/tuxer/jboss/jboss6/server/default/deploy/JEE.war state=PreReal mode=Manual requiredState=Real: org. jboss.deployers.spi.DeploymentException：部署 JEE.war 时出错：创建 ejb 容器时出错 UserManager1：容器 jboss.j2ee:jar=JEE.war,name=UserManager1,service=EJB3,VMID=11d1def534ea1be0:-3567a2b:137b33e6929:-7ffd + 已注册

```

感谢您提供的任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T18:36:56.150

自行回答，以防有人感兴趣。我以错误的方式将 jboss 包含在我的 eclipse 库中，即一个一个地添加 jar，而不是在 Librairies 中添加服务器运行时选项。

我重新创建了项目并正确添加了我的库，现在它可以工作了。

# mysql - 从 DB 中选择最近的经度/纬度值

> ID：10872227
> 
> 赞同：0
> 
> 时间：2012-06-03T16:59:39.863
> 
> 标签：mysql, sql

我有一个包含几千个职位的数据库。这些是公共汽车站。我想要做的是获得最接近 LON/LAT 位置的 X 个值。

这是我的桌子的布局：

```
CREATE TABLE IF NOT EXISTS `buss_StopPoints` (
  `Name` varchar(50) NOT NULL,
  `LocationNorthing` varchar(30) NOT NULL,
  `LocationEasting` varchar(30) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

这些是一些示例行：

```
INSERT INTO `buss_StopPoints` (`Name`, `LocationNorthing`, `LocationEasting`) VALUES ('Some station', '59.3195952318672', '18.0717401337168');
INSERT INTO `buss_StopPoints` (`Name`, `LocationNorthing`, `LocationEasting`) VALUES ('Some station 2', '59.3195772927918', '18.0717389396547');
INSERT INTO `buss_StopPoints` (`Name`, `LocationNorthing`, `LocationEasting`) VALUES ('Some station 3', '59.3234014331742', '18.0671617033088');
INSERT INTO `buss_StopPoints` (`Name`, `LocationNorthing`, `LocationEasting`) VALUES ('Some station 4', '59.3233921590479', '18.0671786573678');
INSERT INTO `buss_StopPoints` (`Name`, `LocationNorthing`, `LocationEasting`) VALUES ('Some station 5', '59.3313179695727', '18.061677395945'); 
```

我的问题：如何创建一个 select 语句，从 DB 中选择最近的 X 行，无论是在负方向还是正方向。（例如，假设我要求 59.3234014331742,18.0671617033088 并想要最近的 4 个站，在这种情况下应该全部返回）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:46:20.083

```
LAT = latitude value
LON = longitude value

SELECT Name, (6371 * acos( cos( radians(LAT) ) * cos( radians( LocationNorthing ) ) * cos( radians( LON ) - radians(LocationEasting) ) + sin( radians(LAT) ) * sin( radians(LocationNorthing) ) )) AS distance order by distance 
```

# php - 如何在 IIS 上同时运行多个版本的 PHP

> ID：10872230
> 
> 赞同：8
> 
> 时间：2012-06-03T17:00:05.960
> 
> 标签：php, windows, iis-7, mysqli

我用 PHP开发了一个名为[vishwasthali.org](http://www.vishwasthali.org)的网站，并将其托管在第三方服务器上的**IIS7中。****除了我使用MySQLi** API编写的数据库访问代码外，其他一切都很好。该代码在本地主机上运行良好，但在服务器上却不行。在服务器和我的机器上使用`phpinfo()`，我发现：

(1) 在我的机器上（运行在 Windows 7 32 位，Apache 主机环境），PHP 版本是**5.3.8**，mysqli 版本是**5.0.8-dev**，并且

（2）服务器端（运行Windows Server 2008，IIS7宿主环境），PHP版本为**5.2.14**，mysqli版本为**5.0.51a**。

* * *

以下是服务器上的截图`phpinfo()`： ![在此处输入图像描述](../Images/8af0bca2f3bc36316a607b26dd6eea93.png) ![在此处输入图像描述](../Images/d214c8f8128fd5b11a33f1b93a72b03c.png)

* * *

这是**mysqli**代码的示例。

```
session_start();
include_once 'code_files/conn.php';
$stmt = $mysqli->prepare('SELECT * FROM adminusers WHERE Username = ? AND `Password` = ?');
$stmt->bind_param('ss', $_POST['Username'], $_POST['Password']);
$stmt->execute();
$result = $stmt->get_result();
if($result->num_rows > 0)
    ........
else
    ........ 
```

使用`echo get_class($mysqli);`确实显示**mysqli**。这意味着，代码确实检测到了 mysqli。但声明`$stmt`没有准备好。即使`$mysqli->error;`没有显示任何错误，也可能是因为 PHP 在 IIS 上运行。

现在我有两个选择，要么将数据库访问代码更改为经典的**mysql API，要么通过从****php.net**下载最新的 PHP 二进制文件来升级服务器上的 PHP 和 MySQLi 版本。我不喜欢第一个选项（这绝对有效），希望你知道为什么。后者不在我手中。想不到这些了。

我想更换 php_mysqli.dll 可能会升级 mysqli 版本，不确定。但是PHP版本呢？

在这种情况下我能做什么。服务器上的 PHP 和 MySQLi 版本升级会解决我的问题吗？如果是，是否会影响服务器上运行的其他 PHP 网站？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-04T14:51:12.113

好的。这是解决方案。可以在 IIS7 中启用和并行运行不同的 PHP 版本。这是我在我的机器上成功测试的过程。考虑到您熟悉 IIS 和 FastCGI，我只是简要介绍了该过程。如果没有，请查看链接：[http://learn.iis.net/page.aspx/246/using-fastcgi-to-host-php-applications-on-iis'](http://learn.iis.net/page.aspx/246/using-fastcgi-to-host-php-applications-on-iis)

1.  [从http://www.php.net/downloads.php](http://www.php.net/downloads.php)下载任何不同版本的带有 PHP 二进制文件的非线程安全 zip 包。
2.  将它们提取到硬盘中的单独文件夹中，例如**C:\PHP5.2.14**、**C:\PHP5.4.3**等。
3.  打开所有文件夹中的**php.ini**文件并添加/取消注释并更改所有文件夹中的以下设置。

    session.save_path = "C:\Windows\Temp"
    expose_php = Off
    ;; 在这里选择任何路径，但最喜欢的是这个
    open_basedir = "C:\inetpub\wwwroot"
    extension_dir = "ext"
    fastcgi.impersonate = 1
    cgi.fix_pathinfo=1
    cgi.force_redirect = 0
    ;; 您可以为不同的网站选择不同的时区
    date.timezone = "you time zone"
    ;; 启用您希望每个网站的任何扩展，例如
    extension=php_mysql.dll
    extension=php_mysqli.dll

4.  打开**IIS 管理器**。添加与要安装的 PHP 版本数一样多的处理程序映射。只需在**Edit Module Mapping**对话框中更改**Executable的路径。**将映射命名为方便识别它们，例如通过 FastCGI 的**PHP 5.2.14 和通过 FastCGI**的**PHP 5.4.3**。

*******   在 IIS 管理器的 IIS 部分中，打开**FastCGI Settings**。在这里，检查是否有与您要运行的 PHP 版本数一样多的条目。如果没有，请单击右窗格中的**添加应用程序。**在“添加 FastCGI 应用程序”对话框的**完整路径**字段中，从所需 PHP 版本的文件夹中选择一个**php-cgi.exe 。**单击确定。

    ***   现在，将您的网站文件夹复制到**C:\inetpub\wwwroot**或您在 php.ini的**open_basedir**设置中选择的任何路径。在 IIS 管理器中，从左窗格展开站点-> 默认网站。选择要定位到特定 PHP 版本的网站。

    *   打开**Handler Mapping**，从左侧窗格中选择一个网站。你会在这里找到很多映射。仅查找您创建的条目（路径为***.php**的条目）。其中，保留所选特定网站所需的唯一一个并**删除**其他。这不会从您的机器上删除映射，而只会从所选的网站中删除。您的网站现在将仅在您保留其映射的 PHP 版本上运行。对您想要定位到特定 PHP 版本的任何网站执行相同的操作。**`phpinfo()`**您可以通过在网站上运行来测试它。******** 

 ****将新网站添加到**wwwroot**后，它们不会附加任何处理程序。添加一个针对所需 PHP 版本的新处理程序。你完成了。

这可能不是最好的程序。但它对我有用。如需验证，请参阅此链接：
[http://learn.iis.net/page.aspx/246/using-fastcgi-to-host-php-applications-on-iis/#PHP_Versioning'](http://learn.iis.net/page.aspx/246/using-fastcgi-to-host-php-applications-on-iis/#PHP_Versioning%27)

希望它有所帮助，以防有人需要。

问候

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T17:17:40.130

这里有几件事很不对劲！

a) 你的开发环境和你的现场的差别太大了！至少使用相同的 Web 服务器和**相同的 PHP 5.x**版本！

b) 永远不要公开让您的 phpinfo() 可访问，这是一个非常大的安全风险！黑客可以从中获取大量重要信息。

c) 即使使用准备好的语句，您也应该在查询中使用用户数据之前对其进行清理！

我认为您的问题与不同的 mysqli 版本无关。也许您应该首先确保在两个环境中使用相同的 Web 服务器和 php 版本，然后再次询问更多代码（例如，您如何建立连接）是否仍然无法正常工作。

是的，更新 PHP 会影响服务器上的其他项目，但这只是意味着您需要更新这些项目，无论如何您都应该这样做！

不，从 php.net 下载 PHP 在您的情况下不是正确的方法。您应该使用各自存储库提供的经过测试和批准的版本。****

# apache - 停止我从未启动的服务器？

> ID：10872233
> 
> 赞同：0
> 
> 时间：2012-06-03T17:00:31.393
> 
> 标签：apache, ubuntu, lighttpd

我最近安装了 lighttpd 但我无法运行它，因为有一个启动 Apache2 服务器的守护进程。我从系统中删除了 Apache 2，但仍有一个服务器在运行。我该如何停止这个，以便我可以启动 lig​​httpd？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:02:30.667

`/etc/init.d/apache2 stop`大多数情况下都可以在 linux 操作系统上运行。

还 using `ps aux`，查找进程 ID 并使用`kill -9 id`（不是 100% 发送的优雅终止信号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T13:55:15.923

`/etc/init.d/httpd stop`如果上面的评论不起作用，请尝试。当然，这取决于发行版。

还要在重新启动后停止 apache 重新启动，您需要运行：

`update-rc.d -f apache2 remove`

# c# - 我们如何创建自定义共享对象？

> ID：10872240
> 
> 赞同：2
> 
> 时间：2012-06-03T17:02:16.807
> 
> 标签：c#, facebook

**在不知道正确名称的情况下**，我们如何创建那些自定义的小片段，就像**Spotify**一样，不仅在底部显示自定义链接，还显示自定义片段。

![在此处输入图像描述](../Images/8d09b5018805c503eb294925b6b04047.png)

除了*Like*和*Comment*之外，还有**Share**和**Listen**。

这是一个带有简单自定义链接的链接

![在此处输入图像描述](../Images/f5e7c13af688c96cfe220ab91814ef35.png)

这个有**Giv et givekort**（赠送礼品卡）作为新链接。

> 我们在哪里/如何创建这样的自定义链接？

* * *

只是自己尝试一下，我的目标是[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)`properties`中的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T01:34:45.307

您基本上是在寻找[动作链接](http://developers.facebook.com/docs/opengraph/actionlinks/)，它允许您指定要在时间线中列出的自定义动作以及 Facebook 上的其他标准动作。

您必须转到应用程序仪表板并配置要用于操作链接的操作/措辞/措辞。

完成所有这些后，您可以使用自定义操作将项目发布到时间线。

# php - 在 Wordpress 插件中将 AJAX 发布到回调函数

> ID：10872244
> 
> 赞同：1
> 
> 时间：2012-06-03T17:02:40.910
> 
> 标签：php, ajax, jquery, wordpress

再一次用 AJAX 把我的头发拉出来。这是我正在开发的一个简单的列表插件。我正在尝试使用 AJAX 回调将 JQUERY 添加到简码中。

最有趣的部分是 Javascript/JQuery 没有进入页面。例如，当在页面上调用短代码时应该会出现一个警告框（这样我就知道它正在工作），并且应该说“至少这是工作”。它应该在文件准备好后立即发生。但是由于某种原因，没有警告框，让我相信我永远不会到达 AJAX 回调，因为指定 AJAX 回调的原始 JQuery 代码不知何故被破坏了。

您可以在下面的第 34 行附近看到这一点。如果我能弄清楚为什么 javascript 无法正常工作，我敢打赌其余的都会排成一行。我尝试将 JQuery 放入一个变量中并返回它、回显它等。还尝试将 JQuery 代码放在代码中的表单之前和之后。还是不行。

***这是代码：***

```
/*
*
*
SHORTCODE
*
*
*/

add_shortcode('list-up-down', 'cb_lud_scfunc');

function cb_lud_scfunc() {
global $wpdb;
$cb_lud_prefix = $wpdb->prefix;
$cb_lud_table = $cb_lud_prefix . 'cb_list_up_down';
$cb_lud_homeurl = home_url();
$cb_lud_upimg = plugins_url('list-up-down/images/up-arrow.png', _FILE_);
$cb_lud_downimg = plugins_url('list-up-down/images/down-arrow.png', _FILE_);
$cb_lud_sample_query = $wpdb->query('SELECT * FROM '.$cb_lud_table);
$cb_lud_field1_name = $wpdb->get_col_info('name',1);
$cb_lud_field2_name = $wpdb->get_col_info('name',2);

/*
CREATE THE JAVASCRIPT/JQUERY
*/
//Create the Javascript and AJAX
add_action('init', 'cb_lud_action_javascript');

function cb_lud_action_javascript() {
?>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script type='text/javascript' >

$(document).ready(function(){
alert('at least this is working');
//JQuery for the submission of a new list item.
$('#list-up-down-form').submit(function(e){
    e.preventDefault(); //Works to prevent normal submission of the form.

    var field1_input = $('#field1_input').val();
    var field2_input = $('#field2_input').val();

    var data = {
        action: 'cb_lud_ajax_action',
        field1: field1_input,
        field2: field2_input,
        };

    $.ajax ({
        type: 'POST',
        url: ajaxurl,
        data: data,
        success: function() {
            alert('It worked!');
            }
        });
});
});
</script>
<?php
//End Javascript function.  
}

/*
CREATE THE FORM
*/
//Create the form to allow users to add records
    $cb_lud_sc_form = '
        <form id="list-up-down-form" name="list-up-down-form" action="" method="post">
        <table border="0">
            <tr>
                <td><h2>'.$cb_lud_field1_name.':</h2><input id="field1_input" name="field1_input" type="text"></input></td>
                <td><h2>'.$cb_lud_field2_name.':</h2><input id="field2_input" name="field2_input" type="text"></input></td>
                <td valign="bottom"><input name="add_record" type="submit" value="Add Record" /></td>
            </tr>
        </table>
        </form>
        ';

/*
DISPLAY THE LIST
*/          
//Get the list from the database, and set the variables for display in the output.
$get_list = $wpdb->get_results('SELECT entry_ID, '.$cb_lud_field1_name.' AS "field1", '.$cb_lud_field2_name.' AS "field2", up_votes, down_votes, up_votes - down_votes AS "total_votes"
    FROM '.$cb_lud_table.'
    GROUP BY entry_ID
    ORDER BY total_votes DESC
    ',OBJECT);

//Check if list is null, and if so, set a variable to display a warning. Otherwise, display the list.
if (empty($get_list)) {
    $cb_lud_sc_output .= "<em>Warning: You don't seem to have any records for this list. Why don't you add some now?</em>";
    $cb_lud_sc_output .= $cb_lud_sc_form;
    return $cb_lud_sc_output;
}
else {
    $cb_lud_sc_output .= $cb_lud_sc_form;
    $cb_lud_sc_output .= '</br>';
    $cb_lud_sc_output .= '<table border="1" cellpadding="10">';
    $cb_lud_sc_output .= '<tr><td align="center"><strong>'.$cb_lud_field1_name.'</strong></td><td align="center"><strong>'.$cb_lud_field2_name.'</strong></td><td align="center"><strong>Score</strong></td></tr>';
        foreach ($get_list as $list_items) {
            $cb_lud_sc_output .= '<tr><td>'.$list_items->field1.'</td><td>'.$list_items->field2.'</td><td>'.$list_items->total_votes.'</td></tr>';
        }
    $cb_lud_sc_output .= '</table>';
    return $cb_lud_sc_output;
}
return $cb_lud_sc_output;   

/*
CREATE THE AJAX
*/

//Use the Wordpress AJAX functions
add_action('wp_ajax_cb_lud_ajax_action', 'cb_lud_ajax_callback');
add_action('wp_ajax_nopriv_cb_lud_ajax_action', 'cb_lud_ajax_callback');

//Create the function that executes the AJAX Callback
function cb_lud_ajax_callback() {
global $wpdb;
$prefix = $wpdb->prefix;
$cb_lud_table = $prefix . 'cb_list_up_down';

        $field1_data = $_POST['field1'];
        $field2_data = $_POST['field2'];
        $up_votes = 0;
        $down_votes = 0;
        $new_data = array(
            $cb_lud_field1_name => $field1_data,
            $cb_lud_field2_name => $field2_data,
            'up_votes' => $up_votes,
            'down_votes' => $down_votes,
            );
        $format = array('%s', '%s', '%f', '%f');

        /*$wpdb->insert(
            $cb_lud_table, $new_data, $format
        );*/

        $wpdb->query('INSERT INTO
            '.$cb_lud_table.' ('.$cb_lud_field1_name.', '.$cb_lud_field2_name.', up_votes, down_votes)
            VALUES ('.$field1_data.', '.$field2_data.', '.$up_votes.', '.$down_votes.')
        ');
die(); // this is required to return a proper result
}
};
/*
END SHORTCODE
*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:47:07.610

在重新考虑短代码之后，没有理由为这部分代码包含 AJAX 调用。让表单在提交时将数据插入数据库并使用“if”语句来控制表单是否实际填写正确会更容易。

下面的代码注释掉了所有的 AJAX 和回调，并且运行良好。

另外，我想出了一种调试 javascript/jquery 的方法。我没有让另一个函数调用它，而是定义了该函数，并直接调用它，这很有效。

**工作代码（万岁！）：**

```
/*
*
*
SHORTCODE
*
*
*/

add_shortcode('list-up-down', 'cb_lud_scfunc');

function cb_lud_scfunc() {
global $wpdb;
$cb_lud_prefix = $wpdb->prefix;
$cb_lud_table = $cb_lud_prefix . 'cb_list_up_down';
$cb_lud_homeurl = home_url();
$cb_lud_upimg = plugins_url('list-up-down/images/up-arrow.png', _FILE_);
$cb_lud_downimg = plugins_url('list-up-down/images/down-arrow.png', _FILE_);
$cb_lud_sample_query = $wpdb->query('SELECT * FROM '.$cb_lud_table);
$cb_lud_field1_name = $wpdb->get_col_info('name',1);
$cb_lud_field2_name = $wpdb->get_col_info('name',2);

/*
CREATE THE JAVASCRIPT/JQUERY
*/
//Create the Javascript and AJAX
//add_action('init', 'cb_lud_action_javascript');
/*  
function cb_lud_action_javascript() {
?>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script> 
<script type='text/javascript' >

$(document).ready(function(){
alert('at least this is working');
//JQuery for the submission of a new list item.
$('#list-up-down-form').submit(function(e){
    e.preventDefault(); //Works to prevent normal submission of the form.

    var field1_input = $('#field1_input').val();
    var field2_input = $('#field2_input').val();

    var data = {
        action: 'cb_lud_ajax_action',
        field1: field1_input,
        field2: field2_input,
        };

    $.ajax ({
        type: 'POST',
        url: ajaxurl,
        data: data,
        success: function() {
            alert('It worked!');
            }
        });
});
 });
</script>
<?php
//End Javascript function.  
}

//Call the javascript function
cb_lud_action_javascript();
*/

/*
CREATE THE FORM
*/
//Create the form to allow users to add records
    $cb_lud_sc_form = '
        <form id="list-up-down-form" name="list-up-down-form" action="" method="post">
        <table border="0">
            <tr>
                <td><h2>'.$cb_lud_field1_name.':</h2><input id="field1_input" name="field1_input" type="text"></input></td>
                <td><h2>'.$cb_lud_field2_name.':</h2><input id="field2_input" name="field2_input" type="text"></input></td>
                <td valign="bottom"><input name="add_record" type="submit" value="Add Record" /></td>
            </tr>
        </table>
        </form>
        ';

/*
DEFINE HOW THE FORM HANDLES THE INPUT(S)
*/
$field1_data = htmlspecialchars($_POST['field1_input'], ENT_QUOTES);
$field2_data = htmlspecialchars($_POST['field2_input'], ENT_QUOTES);
$up_votes = 0;
$down_votes = 0;
$new_data = array(
    $cb_lud_field1_name => $field1_data,
    $cb_lud_field2_name => $field2_data,
    'up_votes' => $up_votes,
    'down_votes' => $down_votes,
    );
$format = array('%s', '%s', '%f', '%f');

if (isset($field1_data) && !empty($field1_data) && isset($field2_data) &&!empty($field2_data)) {
    $wpdb->insert(
        $cb_lud_table, $new_data, $format
    );
}
else {
}
/*$wpdb->query('INSERT INTO
    '.$cb_lud_table.' ('.$cb_lud_field1_name.', '.$cb_lud_field2_name.', up_votes, down_votes)
    VALUES ('.$field1_data.', '.$field2_data.', '.$up_votes.', '.$down_votes.')
');*/

/*
DISPLAY THE LIST
*/          
//Get the list from the database, and set the variables for display in the output.
$get_list = $wpdb->get_results('SELECT entry_ID, '.$cb_lud_field1_name.' AS "field1", '.$cb_lud_field2_name.' AS "field2", up_votes, down_votes, up_votes - down_votes AS "total_votes"
    FROM '.$cb_lud_table.'
    GROUP BY entry_ID
    ORDER BY total_votes DESC
    ',OBJECT);

//Check if list is null, and if so, set a variable to display a warning. Otherwise, display the list.
if (empty($get_list)) {
    $cb_lud_sc_output .= "<em>Warning: You don't seem to have any records for this list. Why don't you add some now?</em>";
    $cb_lud_sc_output .= $cb_lud_sc_form;
    return $cb_lud_sc_output;
}
else {
    $cb_lud_sc_output .= $cb_lud_sc_form;
    $cb_lud_sc_output .= '</br>';
    $cb_lud_sc_output .= '<table border="1" cellpadding="10">';
    $cb_lud_sc_output .= '<tr><td align="center"><strong>'.$cb_lud_field1_name.'</strong></td><td align="center"><strong>'.$cb_lud_field2_name.'</strong></td><td align="center"><strong>Score</strong></td></tr>';
        foreach ($get_list as $list_items) {
            $cb_lud_sc_output .= '<tr><td>'.stripslashes($list_items->field1).'</td><td>'.stripslashes($list_items->field2).'</td><td>'.$list_items->total_votes.'</td></tr>';
        }
    $cb_lud_sc_output .= '</table>';
    return $cb_lud_sc_output;
}
return $cb_lud_sc_output;   

/*
CREATE THE AJAX
*/

/*
//Use the Wordpress AJAX functions
add_action('wp_ajax_cb_lud_ajax_action', 'cb_lud_ajax_callback');
add_action('wp_ajax_nopriv_cb_lud_ajax_action', 'cb_lud_ajax_callback');
*/

//Create the function that executes the AJAX Callback
/*
function cb_lud_ajax_callback() {
global $wpdb;
$prefix = $wpdb->prefix;
$cb_lud_table = $prefix . 'cb_list_up_down';

        $field1_data = $_POST['field1'];
        $field2_data = $_POST['field2'];
        $up_votes = 0;
        $down_votes = 0;
        $new_data = array(
            $cb_lud_field1_name => $field1_data,
            $cb_lud_field2_name => $field2_data,
            'up_votes' => $up_votes,
            'down_votes' => $down_votes,
            );
        $format = array('%s', '%s', '%f', '%f');

        $wpdb->insert(
            $cb_lud_table, $new_data, $format
        );

        $wpdb->query('INSERT INTO
            '.$cb_lud_table.' ('.$cb_lud_field1_name.', '.$cb_lud_field2_name.', up_votes, down_votes)
            VALUES ('.$field1_data.', '.$field2_data.', '.$up_votes.', '.$down_votes.')
        ');
die(); // this is required to return a proper result
}
*/
};

/*
END SHORTCODE
*/ 
```

# css - 对齐 twitter bootstrap 进度条和徽章

> ID：10872248
> 
> 赞同：5
> 
> 时间：2012-06-03T17:03:05.173
> 
> 标签：css, twitter-bootstrap, progress-bar, badge, twitter-bootstrap-2

我正在为我的网站使用 twitter 引导程序。我想使用进度条来指示该过程的完成百分比。

在进度条中，我想显示进程中步骤的名称，并在进度条的末尾或开始处使用徽章来显示完成百分比。这是我正在尝试做的JS小提琴链接

[http://jsfiddle.net/KBTy7/12/](http://jsfiddle.net/KBTy7/12/)

```
<div id="coolstuff" style="margin-top: 10px;">
    <span class="badge" style="padding: 3px; width: 10px">10%</span>
    <div class="progress" id="prgbar">
        <div title="PO Details" class="bar" style="width: 20%;" id="prgwidth">Add New PO Detail</div>
    </div><!-- end of progress bar -->
</div> <!-- end of cool stuff --> 
```

但是 bade 和进度条不会并排对齐。我不太擅长css，所以我不确定我能做些什么来将它们对齐在同一行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T17:06:02.297

试试这个 - [http://jsfiddle.net/KBTy7/412/](http://jsfiddle.net/KBTy7/412/)

```
<html>
    <body>
        <div id="coolstuff" style="margin-top: 10px;">
            <span class="badge" style="padding: 3px; float: left; width: 25px; text-align: center;">10%</span>
            <div class="progress" id="prgbar">
                <div title="PO Details" class="bar" style="width: 20%;" id="prgwidth"> Add New PO Detail </div>
            </div><!-- end of progress bar -->
        </div> <!-- end of cool stuff -->
    </body>
</html>​ 
```

# javascript - 有什么方法可以遍历所有不可枚举的属性？

> ID：10872254
> 
> 赞同：3
> 
> 时间：2012-06-03T17:04:44.953
> 
> 标签：javascript

在编写 JavaScript 时，我经常忘记内置对象的一些属性，不得不在[mdn](https://developer.mozilla.org/en/JavaScript/Reference/)中查找它们，这很麻烦，因为它会减慢我的工作速度。

`for ... in`与其引用文档，不如创建一个对象并使用它来检查它 更方便`console.log()`。但是当涉及到不可枚举的属性时，甚至`for ... in`无济于事。

所以我的问题是，除了谷歌和文档之外，还有什么方法可以检查不可枚举的属性吗？

```
for(var i in Object){
    console.log([i,Object[i]]);
    // ["wtbind", function()]
}
console.log(Object.hasOwnProperty('create'));
// true
// Here Object.create is a non–enumerable property,
// and I have to look it up in documents if I forget it. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T17:13:50.553

这

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)

似乎很有用，虽然它是一个相当新的添加，显然在 Opera 中不起作用。虽然它只列出了**自己的**属性，但你总是可以爬上原型链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-13T01:31:17.950

我知道这是旧的，但您可以使用 ES6 的新功能，我认为 ES2018 可以：

**如果**`for...of`你实现了一个可迭代的对象，你可以在迭代器的帮助下使用 a （因为对象是不可迭代的）

 **假设您有以下具有一个可枚举属性和不可枚举属性的对象

```
const obj = Object.defineProperties({}, {
  enumerableKey: {
    enumerable: true,
    value: 'hello'
  },
  nonEnumerableKey: {
    enumerable: false,
    value: 'world'
  }
}); 
```

`Symbol.iterator`您可以使用和定义自己的实现使其可迭代。在下面的示例中，我将生成每个键的值（但您可以生成任何您想要的值）

```
obj[Symbol.iterator] = function* () {
  for(const key of Object.getOwnPropertyNames(this)) {
    yield this[key]
  }
} 
```

在此之后，您可以使用`for...of`循环遍历它：

```
// This will log:
// 'hello'
// 'world'
for(const val of obj) {
  console.log(val);
} 
```

或使用扩展运算符（因为扩展使用迭代 via `Symbol.iterator`）

```
[...obj] //[ 'hello', 'world' ] 
```

如果您想了解更多关于它的信息，我建议您阅读以下内容：

*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator)
*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)**

# java - 导出 CSV 格式真的很奇怪

> ID：10872257
> 
> 赞同：0
> 
> 时间：2012-06-03T17:04:59.383
> 
> 标签：java, android, opencsv

我在做什么？我正在将我的 sqlite 数据库导出到 csv - 至少我*尝试*

我已经手动和使用["OpenCSV"](http://opencsv.sourceforge.net/)完成了这项工作。

使用这两种方法，我得到了非常奇怪的结果。它们似乎格式不正确。列（通常由 ',' ? 分隔）和特殊字符（据说在 opencsv 中处理）看起来都不像它们应该的那样。代码：

```
CSVWriter writer = new CSVWriter(new FileWriter(file),'\n',',');

        String[] items = new String[11];
        c.moveToFirst();

        while(!c.isAfterLast()){

        items[0] = c.getString(c.getColumnIndex(BaseColumns._ID));
        items[1] = c.getString(c.getColumnIndex(DepotTableMetaData.ITEM_QRCODE));
        items[2] = c.getString(c.getColumnIndex(DepotTableMetaData.ITEM_NAME));
        items[3] = c.getString(c.getColumnIndex(DepotTableMetaData.ITEM_AMOUNT));
        items[4] = c.getString(c.getColumnIndex(DepotTableMetaData.ITEM_UNIT));
        items[5] = c.getString(c.getColumnIndex(DepotTableMetaData.ITEM_PPU));
        items[6] = c.getString(c.getColumnIndex(DepotTableMetaData.ITEM_TOTAL));
        items[7] = c.getString(c.getColumnIndex(DepotTableMetaData.ITEM_COMMENT));
        items[8] = c.getString(c.getColumnIndex(DepotTableMetaData.ITEM_SHOPPING));
        items[9] = c.getString(c.getColumnIndex(DepotTableMetaData.CREATED_DATE));
        items[10] = c.getString(c.getColumnIndex(DepotTableMetaData.MODIFIED_DATE));

        c.moveToNext();
        writer.writeNext(items);

        }

        writer.close(); 
```

结果就是：

[![在此处输入图像描述](../Images/cd58f4b567c3b5e1a2ed02f81820a28a.png)](https://i.stack.imgur.com/N309c.png)

我也通过 FileWriter 和 StringBuffer 完成了它，但它似乎给出了完全相同的结果......如果你能帮助我，我会很高兴；）

我查看了stackoverflow，但找不到任何匹配的问题；/

编辑：是的，我知道我使用的是“旧的，不推荐使用的”光标，但这不是这里的问题。谢谢。

编辑2：**解决了**！你必须分配一些常见的编码！

```
CSVWriter writer = new CSVWriter(new OutputStreamWriter(new FileOutputStream(destination+"/output.csv"),"UTF-8")); 
```

完美地完成了这项工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T17:10:05.967

您使用 OpenCSV 编写器，它将 CSV 文件的一行作为字符串数组，并自动生成列和行之间的分隔符，但不是让 OpenCSV 为您完成，而是通过附加所有值来明确地完成单个字符串中的一行。很明显，OpenCSV 采用您的唯一值并认为它包含一个列，其中必须对逗号和换行符进行编码。

您应该使用一个字符串数组进行调用`writer.writeNext()`，数组中的每个字符串都是表中的一个单元格。作者将为您生成逗号和换行符。

# iphone - 使用 GData API 将视频上传到 youtube 错误 400 InvalidRequestUriException

> ID：10872261
> 
> 赞同：3
> 
> 时间：2012-06-03T17:05:33.917
> 
> 标签：iphone, gdata-api

我正在尝试使用 GData API 从我的 iPhone 应用程序内部将视频发布到 youtube。这是我正在使用的代码：

```
GDataServiceGoogleYouTube* service = [self youTubeService];
[service setYouTubeDeveloperKey:youtubeAppKey];

NSString *username = service.username;
NSURL *url = [GDataServiceGoogleYouTube youTubeUploadURLForUserID:username];

NSData *data = [NSData dataWithContentsOfFile:self.videoPath];
NSString *filename = @"My Cool Video";
NSString *titleStr = @"Title";
GDataMediaTitle *mediaTitle = [GDataMediaTitle textConstructWithString:titleStr];

NSString *categoryStr = @"Comedy";
GDataMediaCategory *mediaCategory = [GDataMediaCategory mediaCategoryWithString:categoryStr];
[mediaCategory setScheme:kGDataSchemeYouTubeCategory];

NSString *descStr = @"Description";
GDataMediaDescription *mediaDesc = [GDataMediaDescription textConstructWithString:descStr];

NSString *keywordsStr = @"iOS";
GDataMediaKeywords *mediaKeywords = [GDataMediaKeywords keywordsWithString:keywordsStr];

GDataYouTubeMediaGroup *mediaGroup = [GDataYouTubeMediaGroup mediaGroup];
[mediaGroup setMediaTitle:mediaTitle];
[mediaGroup setMediaDescription:mediaDesc];
[mediaGroup addMediaCategory:mediaCategory];
[mediaGroup setMediaKeywords:mediaKeywords];
[mediaGroup setIsPrivate:isPrivate];

NSString *mimeType = [GDataUtilities MIMETypeForFileAtPath:self.videoPath
                                           defaultMIMEType:@"video/mp4"];

GDataEntryYouTubeUpload *entry = [GDataEntryYouTubeUpload uploadEntryWithMediaGroup:mediaGroup
                                                                               data:data
                                                                           MIMEType:mimeType
                                                                               slug:filename];

GDataServiceTicket *ticket = [service fetchEntryByInsertingEntry:entry
                                                      forFeedURL:url
                                                        delegate:self
                                               didFinishSelector:@selector(uploadTicket:finishedWithEntry:error:)];
[self setUploadTicket:ticket]; 
```

我有这样的回应：

serviceBase: objectFetcher:GTMHTTPUploadFetcher 0x48af0a0 (https://uploads.gdata.youtube.com/resumable/feeds/api/users/myCoolMail@gmail.com/uploads?upload_id=heregoesidiremoved) failedWithStatus:400 data:GData`InvalidRequestUriException`异常消息不可用

我试过谷歌示例代码并得到相同的结果。我使用了设备和模拟器（5.0）。只要从 iPhone 录制，我就尝试过准备视频。我在 google API 部分创建了项目并获得了应用程序密钥。

请帮助我找到问题的解决方案！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T16:05:07.820

问题出在这里：

```
NSString *username = service.username;
NSURL *url = [GDataServiceGoogleYouTube youTubeUploadURLForUserID:username]; 
```

不知道为什么会这样，但我已经将用户 ID 从“用户名”更改为 kGDataServiceDefaultUser 并且事情开始工作了。如此简单又如此奇怪，但它成功了。

正确代码：

```
NSURL *url = [GDataServiceGoogleYouTube youTubeUploadURLForUserID:kGDataServiceDefaultUser]; 
```

# java - 简单的 java.lang.NullPointerException 错误

> ID：10872263
> 
> 赞同：-6
> 
> 时间：2012-06-03T17:05:46.673
> 
> 标签：java

所以我正在尝试为我的 java 2d 游戏创建一个主菜单。我正在考虑使用卡片布局在主菜单和游戏本身之间进行切换。但是在遇到这个错误之前我没有走那么远。我试图为标题屏幕绘制背景图像，但发生了这个错误。让我参考这两个类。

第一类，加载 JFrame 和卡片布局：

```
 import javax.swing.*;
import java.awt.*;

public class MainScreen extends JFrame{

    public static CardLayout cardLayout = new CardLayout();//set a new cardlayout

    // *** JPanel to hold the "cards" and to use the CardLayout:
    static JPanel cardContainer = new JPanel(cardLayout);//some variable for the cardlayout
    public static JComboBox cardCombo = new JComboBox();//some variable for the cardlayout
    public static JPanel comboPanel = new JPanel();;//some variable for the cardlayout

    public MainScreen() {

        setTitle("Project");//Title of the screen
        setSize(800,600);//Size of the window
        setResizable(false);//Is the window resizable?
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);//Exit the frame when the default red cross is clicked
        setVisible(true);//is the frame visible?
        getContentPane().add(cardContainer, BorderLayout.CENTER);//add the cardcontainer to flip panels
    }

public static void debug(){//makes an extra card, this is a debug card and is not used for anything but debugging

        JPanel debugPanel = new JPanel(new BorderLayout());//Debug panel, not used for anything, script does not work if not here
        debugPanel.setBackground(Color.BLACK);//set the background color to black
        String debug = "Debug Panel";//name the card or something like that
        cardContainer.add(debugPanel, debug);//add the card to the panel
        cardCombo.addItem(debug);//add the item??
    }

    public static void main(String[] args){//this runs when the script opens

        new MainScreen();//run the main screen class, that loads the window and card layout
        debug();//run the next class that initializes the mainmenu
        new MainMenu();//load the main menu
    }
} 
```

加载菜单屏幕并尝试绘制背景图像的类：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import javax.swing.JComponent;
import javax.swing.JPanel;

public class MainMenu extends JComponent{

    Image background = Toolkit.getDefaultToolkit().createImage("data/images/title.png");//loads the background image

    public MainMenu(){
        JPanel menuPanel = new JPanel();//This is the menu panel, where the main menu is loaded
        menuPanel.setBackground(Color.BLACK);//set the background color to black
        String menu = "Menu Panel";//name the card or something
        menuPanel.setLayout(new GridLayout(1, 1, 0, 0));
        MainScreen.cardContainer.add(menuPanel, menu);//add the card to the panel
        MainScreen.cardCombo.addItem(menu);//add the item??

        MainScreen.cardLayout.show(MainScreen.cardContainer, menu);//choose what card to show. For this instance show the mainmenu

        paint(null);
    }

    public void paint(Graphics g){
        Graphics2D g2 = (Graphics2D) g;
        g2.drawImage(background, 0, 0, null);
        g2.finalize();
    }
} 
```

这是我在运行程序时遇到的错误：

```
Exception in thread "main" java.lang.NullPointerException
    at MainMenu.paint(MainMenu.java:34)
    at MainMenu.<init>(MainMenu.java:29)
    at MainScreen.main(MainScreen.java:37) 
```

## 

******编辑******

我删除了这条线

```
paint(null); 
```

当我运行程序时，没有显示错误消息，但没有绘制背景。只出现黑色背景。完整编辑的文件：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import javax.swing.JComponent;
import javax.swing.JPanel;

public class MainMenu extends JComponent{

    Image background = Toolkit.getDefaultToolkit().createImage("data/images/title.png");//loads the background image

    public MainMenu(){
        JPanel menuPanel = new JPanel();//This is the menu panel, where the main menu is loaded
        menuPanel.setBackground(Color.BLACK);//set the background color to black
        String menu = "Menu Panel";//name the card or something
        menuPanel.setLayout(new GridLayout(1, 1, 0, 0));
        MainScreen.cardContainer.add(menuPanel, menu);//add the card to the panel
        MainScreen.cardCombo.addItem(menu);//add the item??

        MainScreen.cardLayout.show(MainScreen.cardContainer, menu);//choose what card to show. For this instance show the mainmenu
    }

    public void paintThis(Graphics g){
        Graphics2D g2 = (Graphics2D) g;
        g2.drawImage(background, 0, 0, null);
        g2.finalize();
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:08:51.943

当你打电话时你期望会发生什么

```
paint(null); 
```

在构造函数的末尾？

将绘制调用留给事件调度程序线程。并且不要只在你不知道使用什么时放在那里（然后在放入随机方法时`null`不要感到惊讶）`NullPointerException``null`

# objective-c - 条件值（如 while 循环）作为方法参数

> ID：10872270
> 
> 赞同：0
> 
> 时间：2012-06-03T17:06:56.937
> 
> 标签：objective-c, loops, boolean, truthiness

所以，我试图有一种有效地做到这一点的方法：

```
- (void)doWhile: (/*some magical type*/)condition
{
    while (condition)
    {
        // do some magical things
    }
} 
```

虽然您的第一个建议可能是`BOOL`考虑以下例外情况：

```
[someObject doWhile: someOtherObject];
// yes, I know that I could just do (someOtherObject != nil), but
// I should be able to just use (someOtherObject), right?
// seeing as how ifs/fors/whiles can use just the object.

[someObject doWhile: [someOtherObject isValid]];
// since -isValid returns a BOOL, this will work, but it will only
// pass the value of -isValid at the time of calling to the while loop.
// if the value of -isValid changes, -doWhile: will have no idea of the change,
// whereas while() would. 
```

原语的使用`_Bool`使我能够解决前一个问题，但后一个问题仍然存在。是否有某种方法可以评估与类型无关的参数的真实性与`while()`工作方式相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:15:19.010

正如评论中所指出的，传递一个块是获得所需结果的一种通用方法，即使更简单的方法可能适用于不需要完全动态评估的测试用例。

# filter - Biquad 到 4quad 滤波器

> ID：10872271
> 
> 赞同：0
> 
> 时间：2012-06-03T17:06:58.997
> 
> 标签：filter, signal-processing

我有一个带通双二阶滤波器，其表达式为：

```
Result    = Nominator[0] * Input + FState[0];
State[0] = Nominator[1] * Input - Denominator[1] * Result + State[1];
State[1] = Nominator[2] * Input - Denominator[2] * Result; 
```

如何在不制作两个相同过滤器的阶梯的情况下改进此过滤器的顺序？我可以为此保存一些计算吗？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T20:06:33.743

尽管可以直接实现高阶滤波器，但它们往往需要极其高精度的算术，因此大多数滤波器设计人员更喜欢将高阶滤波器分解为一系列双二阶。

[https://ccrma.stanford.edu/~jos/filters/filters.html](https://ccrma.stanford.edu/~jos/filters/filters.html)有一个很好的教程

# servlets - Servlet 与 Bean

> ID：10872273
> 
> 赞同：4
> 
> 时间：2012-06-03T17:07:37.747
> 
> 标签：servlets, managed-bean

我是 java 新手（学习 JSF 和其他 JAVA EE 组件）并且有一个非常基本的问题。

当很多事情都可以用 Bean 完成时，为什么我们需要一个 Servlet。servlet 中有什么不能通过 Bean 完成，或者如何在基于 Web 的应用程序中使用 Servlet 比 Beans 更好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T21:44:00.970

使用 JSF，您基本上已经在使用 servlet，`FacesServlet`您很可能已经在`web.xml`自己中注册了该 servlet，以便让 JSF 运行。正是这个 servlet 消除了编写一堆 servlet 来执行重复任务的需要，例如收集请求参数、转换/验证它们、更新 javabean 属性、调用操作和导航到正确的视图。

在 JSF 中，您不需要创建额外的 servlet 来执行这些任务。您只需创建一个托管 bean 并将其声明为控制器，该控制器又将一个简单的 javabean 类作为模型绑定到视图中的 UI 组件。

但有时 JSF 过于矫枉过正或太难了，因为以前从未学过 JSF，只想要两个、三个或四个只有一个联系表的网页。JSF 的学习曲线相对陡峭，这也需要对 HTTP servlet 有深入的了解。有了“plain vanilla” servlet 和 JSP，就更容易开发了。但是，每当站点超出其边界并且您开始复制粘贴/重构常见任务时，如果您事先选择了 MVC 框架，您会很高兴。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T17:15:07.127

Beans 用于表示您的数据。应该使用 Servlet 来控制您的进程。

在 MVC（模型、视图、控制器）模式中，Bean 将是您的模型，它以数据为中心并代表您的数据，充当域对象或简单的数据结构。

Servlet 是调用正确模型并按正确顺序分派它们的控制器。它们可用于获取用户请求并将其转换为模型进行操作的正确输入。

我知道答案非常高级，但是尝试阅读 MVC 模式，您会更好地理解。

# javascript - JQuery 下一个选择器或类似的东西

> ID：10872278
> 
> 赞同：2
> 
> 时间：2012-06-03T17:08:03.973
> 
> 标签：javascript, jquery, jquery-selectors

我有类似的html代码

```
 <ul>
    <li>Some Name <a class="rud" href="#">remove</a><input type="text" value="one" readonly="readonly" name="array" /></li>
     <li>Some other name <a class="rud" href="#">remove</a><input type="text" value="two" readonly="readonly" name="array" /></li>
</ul> 
```

当我点击`<a>`重命名输入名称和值时，我想要。

结果应该是

```
<li>Some Name <a class="rud" href="#">undo</a><input type="text" value="one" readonly="readonly" name="deleted" /></li> 
```

Jquery 上的文档就绪点击事件

```
 $(document).ready(function() {
        $(".rud").click(function() {
           // alert(this).next().val();
           // get input button in this <li></li>.
           // change name
           $(this).text("undo");

        });
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T17:13:18.360

```
$(".rud").click(function() {
    $(this)
        .text("undo")  // change link text
        .next(':input') // go to nex input
        .attr('name','deleted'); // chage name attr 
});​ 
```

**[演示](http://jsfiddle.net/XAYvV/4/)**

# c++ - 为了在 C++ 代码中使用 std::set 需要重写哪个运算符？

> ID：10872279
> 
> 赞同：0
> 
> 时间：2012-06-03T17:08:10.743
> 
> 标签：c++, class, set, overriding

这是一道面试题。

> > 参考示例代码，其中一个运算符需要被覆盖才能使用 `std::set<Value>`

```
 #include<iostream>

 class Value
 {
      std::string   s_val;
      int           i_val;
  public:
      Value(std::string s, int i): s_val(s) , i_val(i){}
 };

 // EOF

 /*
 a       operator !=
 b       operator >
 c       operator <=
 d       operator >=
 e       operator <
 */ 
```

实际上，我不明白为什么需要在这里覆盖运算符。"set" 不允许重复元素，也许 operator != 需要被覆盖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T17:11:24.470

您不必重写任何运算符，***类***`std::set`模板允许您提供比较函数作为模板参数。但是，如果您要提供运算符，则需要的是`bool operator<()`. 该运算符必须执行[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)。请参阅此[std::set](http://en.cppreference.com/w/cpp/container/set)文档。

使用严格弱排序的原因是因为 set 是一个有序容器，通常实现为自平衡二叉树。所以仅仅知道两个元素是否相同是不够的。该套装必须能够订购它们。并且小于运算符或比较器函子也用于测试元素是否相等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T17:12:18.190

您需要`operator<`为您的类型实现。实现必须遵循**严格的弱排序**才能与标准库中的关联容器（例如`std::set`和`std::map`.

阅读：

*   [严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)

这里有一个例子：

*   [标准映射复合键](https://stackoverflow.com/questions/10276358/std-map-composite-key)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T17:15:08.337

一个集合在不需要`operator=`或`operator!=`使用等价概念的情况下将重复项排除在外。如果两个项目都不小于另一个，则两个项目是等价的：

```
if (!(a < b || b < a))
    // equivalent! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T17:12:05.437

为了加快执行不重复元素的速度，并通常检查元素是否在其通常某种树中并且只需要运算符 <。（less 的唯一用法是由标准强制执行的，其余的只是平均实现）

# javascript - 在 Javascript 数据模型中设置数据下载

> ID：10872280
> 
> 赞同：0
> 
> 时间：2012-06-03T17:08:15.820
> 
> 标签：javascript

页面上的一些 Javascript 从服务器获取大量数据。在某些时候，我希望允许用户单击以下载这些数据，例如可以被 Excel 消化的格式。

我的信念是，这将要求数据位于服务器上并由浏览器重新获取，但我希望我缺少一些东西，并且 Javascript 有某种方法可以让浏览器提供“保存” as'对话框来保存在那里生成的一些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:12:42.960

[data URI](http://en.wikipedia.org/wiki/Data_URI)方法可能是最直接的。尽管有替代方案，例如[https://github.com/dcneiner/Downloadify](https://github.com/dcneiner/Downloadify)使用 flash 实现了这一点。[pimvdb 的评论](https://stackoverflow.com/questions/10872280/setting-up-a-download-of-data-already-in-the-javascript-data-model#comment14166589_10872280)链接到他漂亮的 HTML5 实现。

# google-chrome - webkit 添加额外的标签

> ID：10872286
> 
> 赞同：0
> 
> 时间：2012-06-03T17:09:06.687
> 
> 标签：google-chrome, safari, webkit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:18:03.793

```
<li><a href="home.html">Home<a></li> 
```

难道不应该是

```
<li><a href="home.html">Home</a></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T17:20:33.013

看起来你可能只是有一个错字。在这段代码中：

```
 <div>
      <ul>
        <li><a href="home.html">Home<a></li>
        <li><a href="photos.html">Photos</a></li><li><a href="videos.html">Videos</a></li>      
      </ul>
    </div> 
```

看起来最后一个`<a>`标签 `<a href="home.html">Home<a>`需要关闭。因此，当 Webkit 遇到最后一个`<a>`时，它会为您打开和关闭它。

试试这个：

```
 <div>
      <ul>
        <li><a href="home.html">Home</a></li>
        <li><a href="photos.html">Photos</a></li>
        <li><a href="videos.html">Videos</a></li>      
      </ul>
    </div> 
```

# python - 在 Flask 中实现单工作者的最佳方式

> ID：10872287
> 
> 赞同：1
> 
> 时间：2012-06-03T17:09:16.047
> 
> 标签：python, multithreading, multiprocessing, flask, celery

我有一些蜘蛛下载页面并将数据存储在数据库中。我创建了带有显示数据库的管理面板（通过 Flask-Admin 扩展）的烧瓶应用程序。现在我想将函数附加到我的烧瓶应用程序以控制蜘蛛状态：打开/关闭。

我认为它可以通过线程或多处理来实现。Celery 不是一个好的决定，因为整个程序必须使用最少的内存。

选择哪种方法来实现这个功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T20:46:11.490

根据内存使用情况对 Celery 进行折扣可能是一个错误，因为 Celery 在时间和空间上的开销都很低。事实上，使用 Celery+Flask 并不会比单独使用 Flask 使用更多的内存。

此外，Celery 还提供了几种选择，这些选择可能会影响使用的内存量。例如，有 5 种不同的池实现，它们都有不同的优势和权衡，池的选择是：

*   **多处理**

默认情况下，Celery 使用多处理，这意味着它将产生子进程来卸载工作。这是最昂贵的内存选项 - 仅仅是因为每个子进程都会复制所需的基本内存量。

但是 Celery 还带有一个**自动缩放**功能，它会在没有什么工作要做时杀死工作进程，并在有更多工作时产生新进程：

```
$ celeryd --autoscale=0,10 
```

其中 0 是最小进程数，10 是最大进程数。这里 celeryd 将开始时没有子进程，并根据负载增长到最多 10 个进程。当负载减少时，工作进程的数量也会减少。

*   **小事件/gevent**

当使用 eventlet/gevent 池时，只会使用一个进程，因此它会使用更少的内存，但缺点是调用阻塞代码的任务会阻塞其他任务的执行。如果您的任务主要受 I/O 限制，您应该没问题，您还可以组合不同的池并将问题任务发送到多处理池。

*   **线程**

Celery 还带有一个使用线程的池。

将成为 2.6 版本的开发版本包括很多优化，不再需要 Flask-Celery 扩展模块。如果您在接下来的几天内不投入生产，那么我鼓励您尝试必须像这样安装的开发版本：

```
$ pip install https://github.com/ask/kombu/zipball/master
$ pip install https://github.com/ask/celery/zipball/master 
```

新 API 现在也受 Flask 启发，因此您应该阅读**新的入门**指南：

[http://ask.github.com/celery/getting-started/first-steps-with-celery.html](http://ask.github.com/celery/getting-started/first-steps-with-celery.html)

综上所述，到目前为止，大多数优化工作都集中在执行速度上，并且可能还有更多可以进行的内存优化。到目前为止，这还不是一个请求，但万一 Celery 不符合您的内存限制，您可以在我们的错误跟踪器上打开一个问题，我相信它会得到关注，或者您甚至可以帮助我们这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:41:06.103

您可以使用多进程或子进程来管理进程，然后只需将句柄交给会话即可。

# c# - Need an if statement inside GotFocus event

> ID：10872291
> 
> 赞同：0
> 
> 时间：2012-06-03T17:09:32.490
> 
> 标签：c#, windows-phone-7

In my windows phone 7 application, i have created a grid(named as **Holder**), and i have created a GotFocus event. So i need an if statement that, if the grid is touched by the user, i need a message box to be didplayed. Can anybody help me? Thanks in advance for your help!

In my app, i have web browser control, in that if the user **GotFocus** on the browser control, then i want to hide an image. But **Tap** event is not working for the browser control. Need help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:18:07.773

The event you should use is the [Tap Event](http://msdn.microsoft.com/en-us/library/system.windows.uielement.tap%28v=vs.95%29.aspx), it's meant for user interaction on Windows Phone.

Hook up the event with your grid in XAML:

```
<Grid x:Name="Holder" Tap="Holder_Tap">

</Grid> 
```

And in your code:

```
private void Holder_Tap(object sender, GestureEventArgs e)
{
  MessageBox.Show("This message");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:11:42.397

It's not equal to the GotFocus event, but I think this will fit your needs: use the Tap event, it will be fired when the user taps the grid.

# android - java.lang.String 无法转换为 java.util.HashMap 异常

> ID：10872292
> 
> 赞同：1
> 
> 时间：2012-06-03T17:09:55.773
> 
> 标签：android, string, hashmap

我喜欢将所选项目值从 ListView 传递给另一个活动。我正在使用具有 idCity 和 nameCity 属性的 City 类，我喜欢将所选城市的值传递给另一个活动 此代码正在抛出 java.lang.ClassCastException: java .lang.String 不能转换为 java.util.HashMap

```
public ListView cities;
ArrayList<City> cityList=new ArrayList<City>();

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cities_view);
    Resources r = getResources();
    String[] c = r.getStringArray(R.array.cities);

    for(int i=0;i<c.length;i++)
    {
        cityList.add(new City(i,c[i]));
    }
    for(int i=0;i<c.length;i++)
    {
        System.out.println(cityList.get(i).idCity);
        System.out.println(cityList.get(i).nameCity);
    }

    cities = (ListView) findViewById(R.id.listCities);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, c);
    cities.setAdapter(adapter);

    File file = new File(Environment.getExternalStorageDirectory()
            .getAbsolutePath(), getString(R.string.exchangeOfficesFile));

    if (!file.exists()) {
        startService(new Intent(this, DownloadAsyncService.class));
    }

try{
    List<Map<String, String>> data = new ArrayList<Map<String, String>>();
    for (City c : cityList) {
        Map<String, String> map = new HashMap<String, String>(2);
        map.put("idCity", Integer.toString(c.getIdCity()));
        map.put("nameCity", c.getNameCity());

        data.add(map);
    }

    cities.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Intent intent = new Intent(getApplicationContext(),
                    CitiesDetails.class);

            HashMap<String,String> map=(HashMap<String, String>) parent.getItemAtPosition(position);

            intent.putExtra("idCity", map.get("idCity"));

            intent.putExtra("nameCity", map.get("nameCity"));

            startActivity(intent);
        }

    });

}catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();
}
} 
```

也许有人有同样的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T17:20:10.807

您的数组适配器是一个字符串列表：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, c); 
```

`getItemAtPosition(int position)`将返回一个`Object`与`Adapter`. 所以在这种情况下它会返回一个字符串，但你正试图将它转换为`HashMap<String, String>`

```
HashMap<String,String> map=(HashMap<String, String>) parent.getItemAtPosition(position); 
```

将其更改为：

```
String result = (String) parent.getItemAtPosition(position); 
```

# mvvm - MVVM 依赖注入

> ID：10872293
> 
> 赞同：2
> 
> 时间：2012-06-03T17:09:58.730
> 
> 标签：mvvm, dependencies, code-injection

我正在通过将模式划分为其核心方面并一一学习这些方面来自学 MVVM 模式。

我的问题与依赖注入有关。它是什么，为什么/何时应该使用它？我看过 Jason Dolinger 出色的 MVVM 介绍视频，我看到他使用 Unity。问这个问题可能很奇怪，但我如何在不使用 Unity 的情况下实现依赖注入？我基本上想了解依赖注入的概念以及如何使用它而无需实现其他框架/工具（目前）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:25:21.710

我认为你想在不使用框架的情况下理解 DI 很好，这个概念并不难理解。

假设您想使用某种形式的交通工具。

```
interface ITransportation 
{
  Transport();
} 
```

使用某种交通工具的方法的初始实现可能如下所示：

```
public void Move()
{
  ITransportation car = new Car();
  car.Transport();
} 
```

该方法的问题在于它现在依赖于 Car 类。我们应该传递我们的运输对象以增加灵活性。这是控制反转，与 DI 密切相关。

```
public void Move(ITransportation tr)
{
  tr.Transport();
} 
```

如您所见，我们不需要了解任何关于特定 DI 框架的信息。您可能还想查看[ninject DI 手动](https://github.com/ninject/ninject/wiki/Dependency-Injection-By-Hand)教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:50:02.253

Just to extend @Andy's answer

Dependency Injection is one of the forms of the [Dependency Inversion Principle](http://en.wikipedia.org/wiki/Dependency_inversion_principle)

To achieve the decoupling of dependencies (as typically found in layered architecture), DI is commonly used for instantiation scenarios such as basic new() and patterns like Factory method. In addition to being able to inject a new dependency instance every time (e.g. like factory), containers can also be set up to inject named instances, singleton instances, etc - i.e. IoC containers usually also take on the responsibility of managing the lifespans of objects as well.

One potential 'mindset shift' is that dependencies now potentially become publicly visible on concrete classes, since DI typically injects via constructors or public Get / Set properties. This may seem strange if you are used to using OO encapsulation, where dependencies of a class are seen as implementation and should be hidden from the 'outside' i.e. class method signatures. However, by implementing Interface / Concrete class separation (as you should, not only for decoupling but also for testing / mocking purposes), the injection constructors / property injection methods will not be on the interface, so encapsulation is again in place.

**Re : "Doing DI by hand" without Unity etc**

What you would need to do is to code your own IoC container, which then is responsible for 'building up' instances of classes - during each 'build up', you would scan the class for dependencies (which are configured in the container, e.g. by config, by attributes, or simply just by convention, e.g. all public settable properties, or any class parameters on a constructor will be assumed to be dependencies). You would then create (if necessary) and inject this 'dependency' instance onto the object (e.g. by using reflection). And then recursively, all dependencies of these dependencies need to be built up etc. You would then also need to provide lifespan management for each of the objects, e.g. Singletons etc.

# wordpress - 如何在循环内循环（显示子项，然后是孙子项）

> ID：10872295
> 
> 赞同：1
> 
> 时间：2012-06-03T17:10:03.877
> 
> 标签：wordpress

我正在尝试为 WordPress 开发一个查询，该查询将允许我显示仅包含标题的子页面列表，然后在每个子页面标题下显示孙子（子项的子项）页面标题及其内容的列表。

例如，输出应该是这样的：

```
<ul>
  <li>
    <h1>Page 1</h1>
    <ul>
      <li>
        <h2>Child Page 1</h2>
      </li>
      <li>
        <h2>Child Page 2</h2>
        <ul>
          <li>
            <h3>Grandchild</h3>
            <p>Hello, welcome to this grandchild page</p>
          </li>
          <li>
            <h3>Grandchild #2</h3>
            <p>Hello, welcome to this grandchild page</p>
          </li>
        </ul>
      </li>
      <li>
        <h2>Child Page 3</h2>
      </li>
    </ul>
  </li>
  <li>
    <h1>Page 2</h1>
  </li>
</ul> 
```

它需要动态完成，这意味着我不想将帖子 ID 号指定为查询的一部分。

我尝试使用标准的 WordPress 查询，然后在第一个查询中嵌套第二个查询 - 这失败了。

此外，我还尝试修改此处看到的代码：[http ://wordpress.org/support/topic/query-child-pages-of-a-current-page-and-loop-through-each-child-page](http://wordpress.org/support/topic/query-child-pages-of-a-current-page-and-loop-through-each-child-page)

最后，我也尝试修改这段代码：

```
<?php if ( have_posts() ) {  while ( have_posts() ) { the_post(); $thispage=$post->ID; }} ?>
<?php $childpages = query_posts('post_per_page=3&orderby=menu_order&order=asc&post_type=' . get_post_type( $post->ID ) . '&post_parent='.$thispage);
    if($childpages){ /* display the children content  */
            foreach ($childpages as $post) :
            setup_postdata($post); ?>
          <li><a class="" href="#<?php echo($post->post_name) ?>">
            <?php the_title(); ?>
            </a></li>
          <?php
      endforeach;
     } ?> 
```

我一直在努力让这个工作超过一天，我真的只是在绕圈子。

非常感谢帮助您完成这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T19:59:16.840

这应该对你有用，它只有 1 级深，但你应该明白要点。

```
echo "<ul>";    
if ( have_posts() ) {
    while ( have_posts() ) {
        the_post();
        echo "<li><h1>".get_the_title()."</h1>";

        $args=array(
                'orderby' => 'menu_order',
                'order' => 'ASC',
                'posts_per_page' => 3,
                'post_type' => get_post_type( $post->ID ),
                'post_parent' => $post->ID
        );

        $childpages = new WP_Query($args);

        if($childpages->post_count > 0) { /* display the children content  */
            echo "<ul>";
            while ($childpages->have_posts()) {
                 $childpages->the_post();
                 echo "<li><h2>".get_the_title()."</h2></li>";
            }
            echo "</ul>";
        }
        wp_reset_query();

        echo "</li>";
    }
}
echo "</ul>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T09:49:37.890

我尝试了某种东西并深入了几个层次。

```
第 1 页
|
|-儿童 1
|
|-孩子2
    |
    |-孙子1
    |
    |-孙子2
        |
        |-曾孙1
        |
        |-曾孙2

```

完整代码在此链接 [https://gist.github.com/bahiirwa/3aee9cd7732b1f438dfcb5909075cc61](https://gist.github.com/bahiirwa/3aee9cd7732b1f438dfcb5909075cc61)

# graph - 包含多个循环的图中的循环检测

> ID：10872298
> 
> 赞同：0
> 
> 时间：2012-06-03T17:10:13.223
> 
> 标签：graph, cycle, depth-first-search

我有以下图表：

![腺嘌呤分子显示的示例图。 原子是顶点，键是边](../Images/cbeeeaa2e8affb59d669d2a1b7d6e122.png)

有没有办法可以识别此图中的所有周期？我知道 DFS 可用于通过简单地执行 DFS 直到找到后边缘来检测循环，但我想知道是否有一种计算上有效的方法来返回单个循环，考虑到图中实际上有 3 个循环（1 -2-3-4-5-6、4-5-7-8-9、1-2-3-4-9-8-7-5-6）。我有点卡住了，因为碳原子似乎属于多个图，除了暴力破解源自每个顶点的所有可能路径之外，我想不出任何办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:18:53.587

您不必从每个顶点找到所有路径。

只有引用 3 个或更多其他的顶点可能属于多个循环

您只需检查 4,5,6(,9)

# tridion - 为什么发布事务会从“传输服务无法传输”变为“成功”？

> ID：10872299
> 
> 赞同：4
> 
> 时间：2012-06-03T17:10:26.950
> 
> 标签：tridion

有时在批量发布时会暂时出现错误的失败项目

> 运输服务无法运输

然后刷新发布队列几次将导致返回成功。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T17:44:20.747

我假设一旦发布事务达到错误状态，它将“无法修复”。但很明显，你的情况并没有发生这种情况。您在 Publish Queue 窗口中重新加载事务这一事实对发布者的操作没有影响，因此发布者和传输服务很可能仍在处理该事务。

我的建议是将传输服务的日志级别切换到 DEBUG 并查看与这些事务相关的任何内容是否显示在其中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-03T17:53:53.420

作为弗兰克回答的插件，请检查交易文件夹是否为空或运输包仍在此文件夹中。

似乎传输包无法解压缩数据。

# xml - 在 flex 3 中计算来自 HTTPService.lastresult 的 xml 标记

> ID：10872303
> 
> 赞同：0
> 
> 时间：2012-06-03T17:11:09.140
> 
> 标签：xml, apache-flex, count, flex3, httpservice

我有一个回显以下 XML 的 PHP 文件：

```
header("content-type:xml-text");
echo '<?xml version="1.0" encoding="UTF-8"?>
<pages>
    <page>
        <user>1</user>
        <name>book1</name>
        <theme>mariage</theme>
        <width>20</width>
        <height>25</height>
        <images>
            <image>image1.jpg</image>
            <image>image2.jpg</image>
            <image>image3.jpg</image>
            <image>image4.jpg</image>
        </images>
    </page>
</pages>'; 
```

我正在使用 flex **HTTPService**来获取 xml 文件，我需要计算其中的图像数量（在这种特殊情况下为 4）。

我使用了以下代码，每次都显示 0。

```
var pages_xml:XML = XML(httpservice.lastResult);
Alert.show(pages_xml.page.images.image.length()); 
```

有人可以帮忙吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T11:53:16.020

您的回复有问题，请检查一下，因为显示孩子数量的代码完全可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T13:31:18.143

以下代码运行良好。

```
Alert.show(httpservice.lastResult.pages.page.images.image.length); 
```

# javascript - 使用 Javascript 和 jQuery 自动填充选择框

> ID：10872304
> 
> 赞同：3
> 
> 时间：2012-06-03T17:11:16.897
> 
> 标签：javascript, jquery, html, html-select

我有一个选择框：

```
<select id="translationOptions" name="translationOptions"></select> 
```

我有一个 js 数组

```
var translationOptions = ["Egyptian Hieroglyphs", "Al Bhed (Final Fantasy X)", "Futurama"]; 
```

我将如何根据 ? 自动填充选择框`var translationOptions`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T17:15:00.770

```
$.each(translationOptions, function(key, value) {   
    $('#mySelect')
         .append($("<option></option>")
         .attr("value",key)
         .text(value)); 
}); 
```

[使用 jQuery 从数组中添加选项的最佳方法是什么？](https://stackoverflow.com/questions/170986/what-is-the-best-way-to-add-options-to-a-select-from-an-array-with-jquery)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T17:16:26.463

```
$.each(translationOptions, function(index, value) {
    $('#translationOptions').append($("<option />").val(index).text(value));
}); 
```

这使用文本显示和数组中的索引作为值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T17:55:39.650

您也可以通过这种方式动态创建选项并附加到选择框。

```
jQuery.each(translationOptions, function(key, value) {
    jQuery('<option/>', {
       'value': key,
       'text' : value
}).appendTo('#translationOptions'); 
```

# java - 如何在 Java 中旋转椭圆形状？

> ID：10872311
> 
> 赞同：3
> 
> 时间：2012-06-03T17:12:19.507
> 
> 标签：java, awt, ellipse

如何在java中旋转椭圆形状？即它的半轴不平行于坐标轴？

PS 我不仅需要绘制这个椭圆，还需要将它作为形状对象存储在内存中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T17:21:09.020

只需取一个`Ellipse2D`对象并对其应用`AffineTransform`旋转，不是吗？

```
AffineTransform.getRotateInstance(Math.PI / 4)
  .createTransformedShape(new Ellipse2D.Double(0, 0, 2, 1)); 
```

# c# - 数学方程到图像

> ID：10872322
> 
> 赞同：0
> 
> 时间：2012-06-03T17:13:59.980
> 
> 标签：c#, .net, windows-phone-7, math

我正在为 Windows Phone 开发一个应用程序，该应用程序使用不同类型的数学问题，例如硬方程式。问题是我希望这个应用程序既漂亮又酷，因此很明显，您不能使用 *（雪花）作为乘法符号，也不能使用 ^（屋顶）作为指数符号。不，我想要的是我想把方程解析成很酷的图像。我的意思是这样的：

![数学方程解析为图像](../Images/967b2ef871d57c1f15f9cd161d16842e.png)

我知道有几种解析数学的方法，包括 Latex、MathML 等等，我也知道有很多基于 javascript 的策略来创建这样的图像，但我仍然没有找到与 Windows Phone 兼容的7 基于 C#。而且我不想有任何基于服务器的东西，我希望在客户端完成等式到图像之间的转换。

如果您有任何建议，请留下答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:22:51.023

所以“*”变成了“.”？不确定这是否更酷，但你仍然不需要图像生成器，一个漂亮的字体就可以了。

# android - android中的SAX解析器不返回值

> ID：10872323
> 
> 赞同：0
> 
> 时间：2012-06-03T17:14:03.190
> 
> 标签：android, sax, saxparser

我是在 android 中使用 SAX 解析器的新手。问题是，在我解析本地 xml 文件后，我想检查它是否包含带有 的值`System.out.println`，但它返回 null。

所以，基本上如果我尝试`ArrayList<PlaceEntry> pl = PlacesXMLHandler.places;`然后检查`system.out.print(pl)`，它有一个空数组。我试图做同样的事情`PlaceEntry`，它也给了我 null 。我猜我在创建 XMLHandler 时犯了一个错误，但我不确定在哪里。

我的xml：

```
 <?xml version="1.0" encoding="utf-8"?>

    <nodes>
        <entry>
             <title>My Title</title>
             <description>Description</description>
         <webpage>www.google.com</webpage> 
             <coordinates>
                 <latitude>100.00</latitude>
                 <longitude>100.00</longitude>
             </coordinates>
       </entry>
   </nodes> 
```

我的扩展处理程序类：

```
 public class PlacesXMLHandler extends DefaultHandler
    {
private Boolean currentElement = false;
private String currentValue = null;
public static PlaceEntry placeEntry = null;
public static ArrayList<PlaceEntry> places = null;
private String[] coord = null;

public static PlaceEntry getPlaceEntry()
{
    return placeEntry;
}

public static void setSitesList(PlaceEntry placeEntry)
{
    PlacesXMLHandler.placeEntry = placeEntry;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException
{
    currentElement = true;

    if (localName.equals("nodes"))
    {
        places = new ArrayList<PlaceEntry>();
    }
    else if (localName.equals("entry"))
    {
        placeEntry = new PlaceEntry();
        places.add(placeEntry);
    }
    else if (localName.equals("coordinates"))
    {
        coord = new String[2];
    }
}

@Override
public void endElement(String uri, String localName, String qName)
    throws SAXException
{

    currentElement = false;

    if (localName.equalsIgnoreCase("title"))
        placeEntry.setTitle(currentValue);
    else if (localName.equalsIgnoreCase("description"))
        placeEntry.setSubtitle(currentValue);
    else if (localName.equalsIgnoreCase("webpage"))
        placeEntry.setWebpage(currentValue);
    else if (localName.equalsIgnoreCase("latitude"))
        coord[0] = currentValue;
    else if (localName.equalsIgnoreCase("longitude"))
        coord[1] = currentValue;

    if (!coord.equals(null))
        placeEntry.setCoordinates(coord[0], coord[1]);
}

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException 
{
    if (currentElement) 
    {
        currentValue = new String(ch, start, length);
        currentElement = false;
    }
}

} 
```

我的 PlaceEntry 类：

```
 public class PlaceEntry implements Serializable
{
public String title;
public String subtitle;
public String[] coord; 
public String webpage;

public PlaceEntry()
{
    setTitle(null);
    setSubtitle(null);
    setWebpage(null);
    setCoordinates(null, null);
}

public void setTitle (String title)
{
    this.title = title;
}

public String getTitle()
{
    return title;
}

public void setSubtitle (String subtitle)
{
    this.subtitle = subtitle;
}

public String getSubtitle ()
{
    return subtitle;
}

public void setWebpage (String webpage)
{
    this.webpage = webpage;
}

public String getWebpage ()
{
    return webpage;
}

public void setCoordinates (String lat, String lng)
{
    this.coord[0] = lat;
    this.coord[1] = lng;
}

public String[] getCoordinates()
{
    return coord;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:18:57.870

# 停止手动编写解析器

对于初学者来说，Android 提供了“基础”——并且——有可用的框架等。

这个简短的例子展示了如何使用`android.sax`框架而不是子类化`DefaultHandler`和花费不必要的时间调试你的解析器。

```
class EntryParser {
    public static class Entry {
        public String mTitle;
        public String mDescription;
        public String mWebPage;
        public String mLatitude;
        public String mLongitude;
    }
    private List<Entry> mEntries = new ArrayList<EntryParser.Entry>();
    private Entry mEntry;
    public List<Entry> parse(String xml) throws SAXException {
        Xml.parse(xml, init());
        return Collections.unmodifiableList(mEntries);
    }
    public List<Entry> parse(InputStream xml) throws SAXException, IOException {
        Xml.parse(xml, Encoding.UTF_8, init());
        return Collections.unmodifiableList(mEntries);
    }
    private ContentHandler init() {
        mEntries.clear();
        RootElement nodes = new RootElement("nodes");
        Element entry = nodes.getChild("entry");
        entry.setElementListener(new ElementListener() {
            public void start(Attributes attributes) {
                mEntry = new Entry();
            }
            public void end() {
                // Validation goes here
                mEntries.add(mEntry);
            }
        });
        Element title = entry.getChild("title");
        title.setEndTextElementListener(new EndTextElementListener() {
            public void end(String body) {
                mEntry.mTitle = body;
            }
        });
        Element description = entry.getChild("description");
        description.setEndTextElementListener(new EndTextElementListener() {
            public void end(String body) {
                mEntry.mDescription = body;
            }
        });
        Element webpage = entry.getChild("webpage");
        webpage.setEndTextElementListener(new EndTextElementListener() {
            public void end(String body) {
                mEntry.mWebPage = body;
            }
        });
        Element coordinates = entry.getChild("coordinates");
        Element latitude = coordinates.requireChild("latitude");
        latitude.setEndTextElementListener(new EndTextElementListener() {
            public void end(String body) {
                mEntry.mLatitude = body;
            }
        });
        Element longitude = coordinates.requireChild("longitude");
        longitude.setEndTextElementListener(new EndTextElementListener() {
            public void end(String body) {
                mEntry.mLongitude = body;
            }
        });
        return nodes.getContentHandler();
    }
} 
```

像这样调用：

```
EntryParser ep = new EntryParser();
List<EntryParser.Entry> entries = ep.parse(..); // String or InputStream 
```

# javascript - 难以阅读的 javascript 代码 - 单行逻辑来“揭秘”

> ID：10872324
> 
> 赞同：1
> 
> 时间：2012-06-03T17:14:04.583
> 
> 标签：javascript, jquery

有人可以为我揭开这条线的神秘面纱吗？
它是 javascript，它工作正常，我只是不明白代码背后的确切逻辑。也许将代码分成几行或用c＃或delphi编写以进行“比较”会有所帮助。

（我从这里得到它：http: [//www.learningjquery.com/2009/02/slide-elements-in-different-directions](http://www.learningjquery.com/2009/02/slide-elements-in-different-directions)）

非常感谢！

```
$('#inlay-container').animate(
{
    left: parseInt($('#container').css('left'),10) == 0 ? +$('#container').outerWidth() : 0
}... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:22:08.117

This is basically just a ternary expression. The form is `(bool) ? (true val) : (false val)`. What it is doing is animating the `#inlay-container` by setting the left value to either `+$('#container').outerWidth()` or `0` depending on the return of the statement `parseInt($('#container').css('left'),10) == 0` where we are comparing the left value of the `#container` to 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T17:21:34.497

用简单的语言：

```
if #container's css left property is 0

   animate #inlay-container to right equal to the outer width of #container
else

   animate #inlay-container to left 0 from it's current position 
```

我们可以将该代码详细说明为

```
var moveLeft;
if(parseInt($('#container').css('left'),10) == 0)
  moveLeft = $('#container').outerWidth();
else
  moveLeft = 0;
$('#inlay-container').animate(
{
    left: moveLeft
} 
```

它使用的是 if else 赋值的简写。`ternary operator`它被称为

```
val =  condition? this : that 
```

Read more [Operator precedence with Javascript Ternary operator](https://stackoverflow.com/questions/1788917/javascript-ternary-operator) and [http://msdn.microsoft.com/en-us/library/be21c7hw(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/be21c7hw(v=vs.94).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T17:23:23.130

What it means is

> Use `container`'s width as `inlay-container`'s `left` if `container`'s `left` is `0`, or else `inlay-container`'s `left` will be `0`.

* * *

## *Problem: "Demystified".*

```
parseInt($('#container').css('left'),10) == 0 ?  //if its left is 0
    +$('#container').outerWidth() :              //then use container's width
    0                                            //else use 0 
```

This is what we called *Ternary operation* (or Ternary expression).
Read more: [Ternary operation](http://en.wikipedia.org/wiki/Ternary_operation) ^([**(A Wikipedia search always comes in handy!)**])

* * *

Syntax:

```
(condition) ? ture : false ;

//which is the same as:
if(condition){
    true
}else{
    false
} 
```

However, the **main difference** between them is that ternary expression can be used **inline**.

```
var txt = a>1 ? a : 0;  //Yup!

var txt = 0;            //Too long.
if(a>1){
    txt = a;
} 
```

* * *

*Unrelated:*
Actually your code is a bit long IMO. I can shorten it even more:

```
left: +$('#container').css('left')?0:+$('#container').outerWidth() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T17:26:49.773

```
$('#inlay-container').animate(
{
    left: parseInt($('#container').css('left'),10) == 0 ? + $('#container').outerWidth() : 0
} 
```

`$('#container').css('left')` get the `left` position of `#container` set by `CSS`.

`parseInt($('#container').css('left'),10)` convert to integer that `left`.

Now you should know about ternary operator `--- ? --- : ---`:

General if-else:

```
if(something) {
  alert('done');
} else {
  alert('not done');
} 
```

In ternary it written as:

```
something ? alert('done') : alert('not done'); 
```

So `?` act as `if` and `:` act as `else`.

`$('#container').outerWidth()` get the width of `#container` including `padding` and `border`.

So therefore,

```
 parseInt($('#container').css('left'),10) == 0  ?  // if left of #container is 0

                   + $('#container').outerWidth() // then left increase to outerwidth

                    : 0                             // else left will set to 0 
```

So above condition can also be written as

```
if($('#container').css('left'),10) == 0) {
   left = $('#container').outerWidth();
} else {
   left = 0;
} 
```

### At last, whole statement can be written as

```
var left = null;
if($('#container').css('left'),10) == 0) {
   left = $('#container').outerWidth();
} else {
   left = 0;
}

$('#inlay-container').animate({
    left: left
}); 
```

**Related refs:**

*   **[Ternary operator](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Conditional_Operator)**

*   **[.css()](http://api.jquery.com/css/)**

*   **[.outerWidth()](http://api.jquery.com/outerWidth/)**

# php - 更改为字符串 url php

> ID：10872325
> 
> 赞同：-2
> 
> 时间：2012-06-03T17:14:12.183
> 
> 标签：php, mod-rewrite

你好吗？

我想改变我网站的链接，因为它很丑，我希望它像wordpress一样，我不知道如何改变它，所以请你帮助我

`http://example.com/?id=43434`=>`http://example.com/?category=sport`

如何将其更改为：

`http://example.com/post/43434`=>`http://example.com/category/sport`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:23:08.080

你可以这样做，

```
RewriteEngine on
RewriteRule ^post/(\d+) index.php?id=$1 [L]
RewriteRule ^category/([a-zA-Z0-9]+) index.php?category=$1 [L] 
```

我还推荐使用 php 框架。它们使使用漂亮的网址变得容易。您可以从 codeigniter 开始。

此外，这是一篇适合初学者的好文章：[http ://www.workingwith.me.uk/articles/scripting/mod_rewrite](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

# jakarta-ee - EJB 注入 JAX-RS 不起作用

> ID：10872328
> 
> 赞同：4
> 
> 时间：2012-06-03T17:14:45.530
> 
> 标签：jakarta-ee, glassfish, ejb, jax-rs

当我尝试运行 JAX-RS 时，我收到错误消息，我怎样才能让它工作？PlayerManagementLocal 是 ejb PlayerManagement 的 @Local 工作正常。

错误信息

```
com.sun.jersey.api.container.ContainerException: An instance of EJB class rest.JSONService could not be looked up using simple form name or the fully-qualified form name.Ensure that the EJB/JAX-RS component implements at most one interface 
```

jaxrs.java

```
 package rest;

import javax.ejb.EJB;
import javax.ejb.Stateful;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;
import prayForHunt.model.Person;
import prayForHunt.sb.PlayerManagement;
import prayForHunt.sb.PlayerManagementLocal;

@Stateless
@Path("/json")
public class JSONService {

@EJB
PlayerManagementLocal playerManagement;

@GET
@Path("/get/login/{login}/{heslo}")
@Produces(MediaType.APPLICATION_JSON)
public String getTrackInJSON(@PathParam("login") String login, @PathParam("heslo") String heslo) {
    return "ahojky";
}

@GET
@Path("/get/{param}")
@Produces(MediaType.APPLICATION_JSON)
public String getting(@PathParam("param") String msg) {
    System.out.println("");

    if(playerManagement.checkPlayer(msg)){
        return  "yes";
    }
    return "no";
}
} 
```

这是代码，无法弄清楚如何让它工作 - 例如....在数据库中找到一些东西并将其与 POST/GET 服务中的字符串进行比较。

playerManagementLocal.java

```
@Local
 public interface PlayerManagementLocal {

PlayerDTO getPlayers(String login);

List<PlayerDTO> getAllPlayers();

String getPassword(String login);

void newPlayer(PersonDTO user, String password);

void updatePlayer(PlayerDTO player);

void updatePlayerCard(PlayerCardDTO playerCard);

public void removePlayer(PlayerDTO player);

boolean checkPlayer(String login);

boolean checkPlayer(String login, String password);

void saveLocation(FavoriteLocationDTO loc);

List<FavoriteLocationDTO> getPlayerLocations(String login);

void removeLocation(int id);
} 
```

playerManagemet.java

```
package prayForHunt.sb;

import java.util.ArrayList;
 import java.util.Iterator;
import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import prayForHunt.DTO.FavoriteLocationDTO;
import prayForHunt.DTO.PersonDTO;
import prayForHunt.DTO.PlayerCardDTO;
import prayForHunt.DTO.PlayerDTO;
import prayForHunt.model.*;

/**
*
* @author Nell
*/
@Stateless
public class PlayerManagement implements PlayerManagementLocal {

@PersistenceContext
EntityManager em;

@Override
public PlayerDTO getPlayers(String login) {
    Player playerHelp = em.find(Player.class, login);
    if (playerHelp == null) {
        return null;
    } else {
        return new PlayerDTO(playerHelp);
    }
}

@Override
public List<PlayerDTO> getAllPlayers() {
    List<Player> list = (List<Player>) em.createNamedQuery(Player.Q_GET_ALL_PLAYERS).getResultList();
    ArrayList<PlayerDTO> listDTO = new ArrayList<PlayerDTO>();
    Iterator it = list.iterator();
    while (it.hasNext()) {
        listDTO.add(new PlayerDTO((Player) it.next()));
    }
    return listDTO;
}

@Override
public void newPlayer(PersonDTO user, String password) {
    Player player = user.toPlayer();
    player.setPassword(password);
    PlayerCard card = new PlayerCard();
    player.setPlayerCard(card);
    em.merge(player);
}

@Override
public void updatePlayer(PlayerDTO player) {
    Player en = em.find(Player.class, player.getLogin());
    player.toEntity(en);
    em.merge(en);
}

@Override
public void updatePlayerCard(PlayerCardDTO playerCard) {
    PlayerCard en = em.find(PlayerCard.class, playerCard.getCardId());
    playerCard.toEntity(en);
    em.merge(en);

}

@Override
public void removePlayer(PlayerDTO player) {
    Player en = em.find(Player.class, player.getLogin());
    player.toEntity(en);
    en = em.merge(en);
    em.remove(en);
}

@Override
public boolean checkPlayer(String login) {
    Player help = em.find(Player.class, login);
    if (help != null) {
        return true;
    }
    return false;
}

@Override
public boolean checkPlayer(String login, String password) {
    Player help = em.find(Player.class, login);
    if (help != null) {
        return false;
    }
    if (password.equals(help.getPassword())) {
        return true;
    }
    return false;
}

@Override
public String getPassword(String login) {
    return em.find(Player.class, login).getPassword();
}

@Override
public void saveLocation(FavoriteLocationDTO loc) {
    FavoriteLocation en = em.find(FavoriteLocation.class, loc.getId());
    if (en == null) {
        en = new FavoriteLocation();
        en.setPlayer(em.find(Player.class, loc.getPlayer()));
    }
    en.setLat(loc.getLat());
    en.setLng(loc.getLng());
    en.setTitle(loc.getTitle());
    en.setDescription(loc.getDescription());
    em.merge(en);
}

@Override
public List<FavoriteLocationDTO> getPlayerLocations(String login) {
    Player pl = em.find(Player.class, login);
    List<FavoriteLocation> list =       em.createNamedQuery(FavoriteLocation.Q_GET_ALL_PLAYERS_LOCATIONS).setParameter("player", pl).getResultList();
    ArrayList<FavoriteLocationDTO> listDTO = new ArrayList<FavoriteLocationDTO>();
    Iterator it = list.iterator();
    while (it.hasNext()) {
        listDTO.add(new FavoriteLocationDTO((FavoriteLocation) it.next()));
    }
    return listDTO;
}

@Override
public void removeLocation(int id) {
    FavoriteLocation en = em.find(FavoriteLocation.class, id);
    em.remove(en);

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T06:58:27.817

从 GlassFish 2.1 迁移到 GlassFish3.1 时，我也遇到了类似的问题。所以根据以下链接：

[https://blogs.oracle.com/sandoz/entry/jersey_glassfish_and_ejbs_as](https://blogs.oracle.com/sandoz/entry/jersey_glassfish_and_ejbs_as)

第 1 步：创建本地或远程接口：

```
@Remote
@Path("/json")
public interface JSONServiceRemote
{

   @GET
   @Path("/get/login/{login}/{heslo}")
   @Produces(MediaType.APPLICATION_JSON)
   public String getTrackInJSON(@PathParam("login") String login, @PathParam("heslo")   String heslo);

   @GET
   @Path("/get/{param}")
   @Produces(MediaType.APPLICATION_JSON)
   public String getting(@PathParam("param") String msg) ;

} 
```

Step2：现在在You无状态EJB JSONService中实现接口

```
@Stateless
public class JSONService implements JSONServiceInterface
{

    @Override
    public String getTrackInJSON(@PathParam("login") String login, @PathParam("heslo")     String heslo)
   {

     ...
   }

   @Override
   public String getting(@PathParam("param") String msg) 
   {
       .......
   }

} 
```

# xml - 使用 XSLT 根据节点数转换 XML

> ID：10872330
> 
> 赞同：4
> 
> 时间：2012-06-03T17:15:06.427
> 
> 标签：xml, xslt

我希望根据元素的数量来转换节点。即5，然后关闭节点并重新打开一个新节点。见下面的例子

```
<root>
  <branch>
    <foo>bar</foo>
    <foo>bar2</foo>
    <foo>bar3</foo>
    <foo>bar4</foo>
    <foo>bar5</foo>
    <foo>bar6</foo>
    <foo>bar7</foo>
  </branch>
<root> 
```

应该成为

```
<root>
  <branch>
    <foo>bar</foo>
    <foo>bar2</foo>
    <foo>bar3</foo>
    <foo>bar4</foo>
    <foo>bar5</foo>
   <branch>
   </branch>
    <foo>bar6</foo>
    <foo>bar7</foo>
  </branch>
<root> 
```

请帮助了解如何在 XSLT 中完成此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T18:45:42.147

**I. 这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <root>
   <xsl:apply-templates/>
  </root>
 </xsl:template>

 <xsl:template match="foo[position() mod 5 = 1]">
  <branch>
    <xsl:copy-of select=
     ". | following-sibling::*[not(position() > 4)]"/>
  </branch>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时（更正为格式正确）：**

```
<root>
    <branch>
        <foo>bar</foo>
        <foo>bar2</foo>
        <foo>bar3</foo>
        <foo>bar4</foo>
        <foo>bar5</foo>
        <foo>bar6</foo>
        <foo>bar7</foo>
    </branch>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <branch>
      <foo>bar</foo>
      <foo>bar2</foo>
      <foo>bar3</foo>
      <foo>bar4</foo>
      <foo>bar5</foo>
   </branch>
   <branch>
      <foo>bar6</foo>
      <foo>bar7</foo>
   </branch>
</root> 
```

**说明**：

这是“位置分组”的情况，其中组的每个起始元素都是 5 元组中的第一个（因此它的位置满足：`position() mod 5 = 1`.

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <root>
    <xsl:for-each-group select="*/*"
         group-adjacent="(position() -1) idiv 5">
          <branch>
            <xsl:sequence select="current-group()"/>
          </branch>
    </xsl:for-each-group>
  </root>
 </xsl:template>
</xsl:stylesheet> 
```

**当这个 XSLT 2.0 转换应用于同一个 XML 文档（上图）时，会产生同样想要的正确结果**。

**说明**：

正确使用带有属性和功能的**[`<xsl:for-each-group>`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#xsl-for-each-group)**XSLT 2.0 指令。`group-adjacent`**[`current-group()`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#function-current-group)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T16:54:08.597

XSLT 中没有“打开”或“关闭”节点这样的操作。你对处理模型有一个错误的想法，除非你把它弄清楚，否则你将很难解决这类问题。特别是，您还没有理解 XSLT 是（在概念上）创建结果树，而不是包含带有开始和结束标记的词法 XML 的文件。您需要做的是在结果树中创建一个节点，对应于源树中的每组五个节点（或等效地，在结果树中创建一个节点，对应于源树中位置为倍数的每个节点5）。

Dimitre 的解决方案是完全正确的，但我个人认为，在不解释你的想法哪里出错的情况下给你一个可行的解决方案并不是回答你问题的最佳方式。

# fluent-nhibernate - Fluent Nhibernate map 列表列表

> ID：10872334
> 
> 赞同：0
> 
> 时间：2012-06-03T17:15:56.160
> 
> 标签：fluent-nhibernate, nhibernate-mapping

我正在使用 Fluent Nhibernate 为类编写映射：

```
public class UniqueFeaturesSet : IEntity
    {
        public UniqueFeaturesSet(List<List<double>> mfcc)
        {
            MFCC = mfcc;
        }

        public virtual List<List<double>> MFCC { get; set; }

        public virtual int Id { get; set; }
    } 
```

如何映射`List<List<double>>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T07:47:38.407

无法使用 [Fluent][N]Hibernate 映射嵌套集合。内部集合需要在自己的类中。

# android - 移动设备：创建“可复制”文本字段的最用户友好方式？

> ID：10872337
> 
> 赞同：1
> 
> 时间：2012-06-03T17:16:19.077
> 
> 标签：android, ios, html, mobile, jquery-mobile

我正在开发一个基于 servlet 的应用程序，该应用程序提供旨在被移动设备上的用户复制和重用的内容。截至目前，我正在输入字段中提供内容（字符串）。

这在 iOs 设备上效果相当好，但在 Android 上效果不佳。因此，我想知道是否有更好的方法使选择和复制更容易？

我尝试过使用 jQuery 来执行选择和复制部分，但据我所知，这只能在各自平台上使用 flash 和本机语言的组合。由于此应用程序旨在（希望）在所有平台（W7P 也是）上兼容，因此这是最不受欢迎的选择。

# log4net - Log4Net 不关注 app.config 文件修改

> ID：10872343
> 
> 赞同：0
> 
> 时间：2012-06-03T17:16:53.730
> 
> 标签：log4net, log4net-configuration

让我首先解释我的目标是什么。我正在尝试允许对我的配置文件的修改生效，而无需重新启动我的程序/调试。现在我尝试通过两种方式来解决这个问题，第一种方式是在我的 Assemblyinfo.cs 文件的底部添加以下代码

```
[assembly: log4net.Config.XmlConfigurator(Watch=true)] 
```

现在记录器按预期工作，但是，当我在调试期间修改 .config 文件时，我所做的修改没有被使用。

我最初的假设是 app.config 文件在程序运行时无论出于何种原因都不能被“监视”。因此，我决定尝试创建一个外部配置文件并将 Log4Net 信息放在那里。为此，我将所有 Log4Net 信息从 app.config 文件中移出，并将其移至我创建的文件“Log4Net.config”中。然后我修改了 Assemblyinfo.cs 中的代码如下：

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "Log4Net.config", Watch = true)] 
```

但是，现在记录器说它在启动时找不到配置文件。所以，这就是我要问的。

1）如果确实可以监视 app.config 的修改，我做错了什么？为什么我的修改在程序运行时没有被注意到和实施？

2）如果需要外部配置文件，为什么Log4Net找不到我创建的新配置文件？

这是我关于stackoverflow的第一个问题，我环顾四周，但找不到直接解决我问题的东西。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T10:57:24.997

如果您使用 Visual Studio 调试应用程序，则需要修改 `YourApplication.vshost.exe.config`输出文件夹中的文件（即在调试期间处于活动状态的文件）。

# wordpress - WordPress主页没有出现

> ID：10872344
> 
> 赞同：0
> 
> 时间：2012-06-03T17:17:01.623
> 
> 标签：wordpress, installation, migration

我刚刚在 GoDaddy 上安装了一个 WordPress 网站，但不幸的是，该网站的主页没有出现 - 只是停留在等待模式，进度轮在旋转。

但是，如果我降低到 的级别`http://example.com/about-us`，该站点会按要求显示，但返回到只是`http://example.com/`不显示任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:29:06.990

也许主页设置为从不可用的位置查找数据？尝试查找主页的来源，看看它是否正在尝试解析不存在的页面。此外，您可能希望在继续之前使用[W3C Validatior](http://validator.w3.org/)检查错误。否则您的错误似乎很模糊。

# c++ - 我的 Eclipse 程序无法识别“NULL”

> ID：10872345
> 
> 赞同：0
> 
> 时间：2012-06-03T17:17:10.053
> 
> 标签：c++, eclipse, null

> **可能重复：**
> [错误：未在此范围内声明“NULL”](https://stackoverflow.com/questions/462165/error-null-was-not-declared-in-this-scope)

我有这段代码，它是在 Visual Studio 中编写的，但我在 Eclipse 中工作，我正试图让它为 Eclipse 编译，我抛出了这个错误

```
..\heap.cpp:104:10: error: 'NULL' was not declared in this scope 
```

代码：

```
#include"heap.h"

using namespace std;

template<class T>
Heap<T>::Heap() // constructor
{
    root = NULL;
    size = 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:21:44.803

Eclipse 不是编译器，只是一个 IDE。我猜您正在将它与 Visual Studio 之外的其他编译器一起使用，并且系统头文件有些不同，导致您的 VC++ 工作包括不包括 NULL 上的声明`<the other compiler>`。正如 Martinho Fernandes 所说，您需要包含`<stdlib.h>`or`<cstdlib>`或包含这些标题的某些标题。正如另一个问题所说，C++ 11 的方式是`<stddef.h>`or `<cstddef>`。

# javascript - 我可以添加两个变量来在 JavaScript 中创建一个变量名吗？

> ID：10872346
> 
> 赞同：0
> 
> 时间：2012-06-03T17:17:28.500
> 
> 标签：javascript, string, variables, add

我是一名为学校项目学习 JavaScript 的新程序员。我有两个变量，一个叫 colourA1，另一个叫 playerOneColour。问题是，除了 colourA1 （colourA2、 colourA3 等）之外，我还有许多变量，所以我试图与之比较的函数无法真正比​​较 2，因为所有变量都是不同的。我试图通过添加 2 个变量在 checkColour 函数中重新创建字符串名称。所以我想我的问题是：你可以添加 2 个变量来创建一个新的变量名吗？

感谢您的帮助，如果您对此有任何疑问，请随时提出。我知道我并没有真正完美地表达这个...

```
function drawA1() {
    colourA1 = "red";
}

function checkColour(x) { // <- the HTML passes the id to JavaScript, in this case, it's A1
    alert(variables here); // <- i need this to become colour A1
    alert(playerOneColour);
    if (variables here == playerOneColour) {
        alert("Yes");
    } else {
        alert("No");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:26:15.027

这可以通过数组来完成。

```
var color = ['red', 'green', 'blue']; 
```

那么，`color[0]`就红了。

# css - JSF 2.0 根据 CSS 动态控制回发哪些值

> ID：10872355
> 
> 赞同：2
> 
> 时间：2012-06-03T17:18:49.397
> 
> 标签：css, jsf-2, filter, myfaces, phaselistener

我有这个表单，其中包含约 170 个单独的文本框，其中包含会话范围 bean 中的值。要求仅在组件具有特定 CSS 类时才提交值。

我最初的方法是在 UPDATE_MODEL_VALUES 创建一个 PhaseListener 并在那里测试 CSS 类。如果该类是受影响的类，我将组件的值设置为 null。然后在前端，我使用通用 JavaScript 方法将类切换为焦点。这意味着我只需要添加对每个组件的更改：

```
... styleClass="examfieldgrey" onfocus="whiteField(this);" 
```

考虑到我需要更改多少组件，这很好。

在我重构我的 e 表单以使用多个 h 表单标签之前，这一切正常。现在 CSSclass 正在前端切换，但没有保存此更改。相位侦听器正在获取旧类。

我认为这显然与我在 jQuery/javascript 中切换类有关。我想知道的是：

1.  有没有更好的方法来做到这一点？一个最好意味着我不必修改 170 多个组件？
2.  如果我必须继续使用 Javascript 来切换课程，有没有办法可以将更改从 javascript 发布回来？

抱歉，如果这是一个明显的问题，我对 JSF 生命周期还是有点陌生​​。

我正在使用 JSF 2.0 MyFaces

作为参考，这里是我的表单上需要过滤的组件的示例：

```
<h:inputTextarea 
  id="inputVal" 
  styleClass="midTextArea examfieldgrey"
  onfocus="whiteField(this);"
  value="#{bean.form.val}"/> 
```

其中“examfieldgrey”是我在确定是否要阻止组件时测试的类。

和 whiteField 方法：

```
function whiteField(field){
    if(! jQuery(field).hasClass("examfieldgrey")){
        return;
    }
    jQuery(field).removeClass("examfieldgrey");
    jQuery(field).addClass("examfieldwhite");
} 
```

以及我过滤的阶段方法之前的阶段侦听器：

```
// TODO: make whatever mode allows ghosting to be configurable outside of
// the system (perhaps in the config file)
/**
 * Before the model is updated, test each component's CSS on the form.  If the 
 * CSS style is 'examfieldgrey' set the value to null so it doesn't get submitted
 */
@Override
public void beforePhase(PhaseEvent arg0) {

    //We need the session to get the backing bean
    if (arg0.getFacesContext().getExternalContext().getSessionMap() == null) {
        return;
    }

    //get the measurements bean so we can determine the form mode 
    if (arg0.getFacesContext().getExternalContext().getSessionMap()
            .get("measurements") == null) {
        return;
    }

    //ensure the bean is the expected data type, it should always be this type.  I'm just paranoid ;)
    if (!(arg0.getFacesContext().getExternalContext().getSessionMap()
            .get("measurements") instanceof MeasurementsController)) {

        return;
    }

    //get, convert and check the backing bean's mode.  We only filter if the mode is COPY
    if (((MeasurementsController) arg0.getFacesContext()
            .getExternalContext().getSessionMap().get("measurements"))
            .getMode() != FormMode.COPY) {

        return;
    }

    //recursivly traverse the componenets and filter the ones who have the CSS class
    traverseChildren(arg0.getFacesContext().getViewRoot().getChildren());
}

/**
 * Traverse a List of UIComponenets and check the CSS.  If it's the 'examfieldgrey' class
 * and the component is a UIInput component, set the value to null. 
 * @param children  a List of the componenets to filter on the form.
 */
private void traverseChildren(List<UIComponent> children) {
    debugLevelCount++;
    if (children == null || children.size() == 0) {
        debugLevelCount--;
        return;
    }

    for (UIComponent component : children) {
        if (component instanceof UIInput) {
            if (component.getAttributes() != null
                    && component.getAttributes().get("styleClass") != null
                    && component.getAttributes().get("styleClass")
                            .toString().contains("examfieldgrey")) {
                ((UIInput) component).setValue(null);
            } else {
                debugPrintAllow(component);
            }
            continue;
        }
        traverseChildren(component.getChildren());
    }
    debugLevelCount--;
} 
```

忽略打印​​功能，它们什么都不做；）

多谢你们！

## 编辑

这是一个复制操作，因此支持 bean 在构建 bean 之后在其中具有值。如果我点击提交并且支持 bean 尚未填充，则使用 primefaces 选择器的选项非常好。但我不确定它是否能够真正清除这些值。

需要注意的另一件事是，我在表单对象的实例中引用了值。我不知道这是否有帮助，但它没有出现在我的原始帖子中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T18:14:18.917

> *要求仅在组件具有特定 CSS 类时才提交值。*

如果您碰巧已经使用[PrimeFaces](http://primefaces.org)或愿意使用它，从最新的 3.3 版本开始，您可以使用[新的`@()`选择器](http://www.primefaces.org/showcase/ui/selectors.jsf)语法，该语法接受基于 jQuery 的 CSS 选择器`process`和`update`PrimeFaces ajax 组件的属性（相当于JSF 标准组件的`execute`和属性） ）。`render``<f:ajax>`

例如

```
<p:commandButton ... process="@(.foo)" /> 
```

或者

```
<p:ajax ... process="@(.foo)" /> 
```

将指示 JSF**仅**处理类名为`foo`.

* * *

> *现在 CSSclass 正在前端切换，但没有保存此更改。相位侦听器正在获取旧类。*

那是因为您没有使服务器端的 JSF 组件树与客户端的 HTML DOM 树保持同步。您只是在客户端进行更改，而不通知 JSF。CSS 类不会作为请求参数发送到服务器端，只有 HTML 表单输入值。您基本上需要通过 JSF 而不是 JS/jQuery 更改 CSS 类，以便更改也反映在 JSF 组件树中。

然而，实现这一点并不完全是微不足道的，而且可能是浪费的。因此，最简单的方法是使用带有`@()`选择器支持的 PrimeFaces。此选择器在客户端进行评估并转换为与选择器匹配的 JSF 可理解的组件客户端 ID 字符串。因此，这充分考虑了客户端的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T14:57:49.220

我能够通过为表单上的每个字段创建一个布尔值映射来解决这个问题，其中字符串键是字段的 ID。每个值代表天气或不复制字段。我在模糊上使用 ajax 更新这个值。我将 CSS 类设置为基于地图中该字段的布尔值。

渲染效果不太好。最初我是在焦点上做这一切，但很快就很明显，试图渲染一个焦点上的文本框实际上会失去对文本框的焦点。所以，在焦点上，我只是调用了一个快速的 js 函数来切换类，就像我最初所做的那样。

由于 css 类是根据前端的映射选择的，因此在调用阶段侦听器之前会更新它并正确过滤组件。

感谢BalusC的帮助！

# parsing - 使用 Scala 解析器的运算符关联性

> ID：10872359
> 
> 赞同：1
> 
> 时间：2012-06-03T17:19:03.320
> 
> 标签：parsing, scala, operators, context-free-grammar, ll

所以我一直在尝试用 Scala 的解析器编写一个计算器，这很有趣，除了我发现运算符关联性是向后的，当我尝试让我的语法左递归时，即使它完全明确，我得到堆栈溢出。

澄清一下，如果我有这样的规则： def 减法： Parser[Int] = num ~ "-" ~ add { x => x._1._1 - x._2 } 然后评估 7 - 4 - 3 出来6 而不是 0。

我实际实现的方式是我正在组成一个二叉树，其中运算符是非叶节点，叶节点是数字。我评估树的方式是左孩子（运算符）右孩子。在为 7 - 4 - 5 构建树时，我希望它看起来像：

```
-
-   5
7   4   NULL   NULL 
```

其中 - 是根，它的孩子是 - 和 5，第二个 - 的孩子是 7 和 4。

但是，我可以轻松构建的唯一树是

```
-
7   -
NULL   NULL   4   5 
```

这是不同的，而不是我想要的。

基本上，简单的括号是 7 - (4 - 5) 而我想要 (7 - 4) - 5。

我怎么能破解这个？我觉得无论如何我都应该能够编写一个具有正确运算符优先级的计算器。我应该先对所有内容进行标记，然后再反转我的标记吗？我可以通过将右孩子的所有左孩子变成右孩子父母的右孩子并使父母成为前右孩子的左孩子来翻转我的树吗？它似乎很适合第一个近似值，但我并没有真正考虑过它。我觉得一定有一些我失踪的案例。

我的印象是我只能用 scala 解析器制作一个 LL 解析器。如果你知道另一种方法，请告诉我！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T18:17:38.343

Scala 的解析器组合器（`Parsers`特征）的标准实现不支持左递归语法。但是，[`PackratParsers`](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.util.parsing.combinator.PackratParsers)如果您需要左递归，则可以使用。也就是说，如果您的语法是一个简单的算术表达式解析器，那么您绝对不需要左递归。

**编辑**

有一些方法可以使用右递归并保持左结合性，如果你热衷于此，只需查找算术表达式和递归下降解析器。当然，正如我所说，**您可以使用`PackratParsers`**允许左递归。

但是在不使用的情况下处理关联性的最简单方法`PackratParsers`是避免使用递归。只需使用其中一个重复运算符来获得`List`, 然后`foldLeft`或`foldRight`根据需要。简单的例子：

```
trait Tree
case class Node(op: String, left: Tree, right: Tree) extends Tree
case class Leaf(value: Int) extends Tree

import scala.util.parsing.combinator.RegexParsers

object P extends RegexParsers {
  def expr = term ~ (("+" | "-") ~ term).* ^^ mkTree
  def term = "\\d+".r ^^ (_.toInt)
  def mkTree(input: Int ~ List[String ~ Int]): Tree = input match {
    case first ~ rest => ((Leaf(first): Tree) /: rest)(combine)
  }
  def combine(acc: Tree, next: String ~ Int) = next match {
    case op ~ y => Node(op, acc, Leaf(y))
  }
} 
```

[您可以在scala-dist](https://github.com/scala/scala-dist/tree/master/examples/src/main/scala/parsing)存储库中找到其他更完整的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T00:35:48.423

我将您的问题解释如下：

如果您编写规则`def expression = number ~ "-" ~ expression`，然后对语法树的每个节点进行评估，那么您会发现在 中`3 - 5 - 4`，`5 - 4`首先计算 ，结果为 1，然后`3 - 1`计算结果为 2。

另一方面，如果您编写类似`def expression = expression ~ "-" ~ number`的规则，则这些规则是左递归的并且会溢出堆栈。

这个问题有三种解决方案：

1.  对抽象语法树进行后处理，将其从右关联树转换为左关联树。如果您使用语法规则上的操作来立即进行计算，这对您不起作用。

2.  定义规则`def expression = repsep(number, "-")`，然后在评估计算时，以任何方向循环解析的数字（将出现在平面列表中）为您提供所需的关联性。如果会出现一种以上的运算符，则不能使用它，因为运算符将被丢弃。

3.  将规则定义为`def expression = number ~ ( "-" ~ number) *`。您将拥有一个初始编号，以及一组平面列表中的操作员编号对，以便在您想要的任何方向上进行处理（尽管在这里从左到右可能更容易）。

4.  `PackratParsers`按照 Daniel Sobral 的建议使用。这可能是您最好和最简单的选择。

# ruby - 创建 Ruby 脚本以将 Word 文档内容转换为文本文件

> ID：10872360
> 
> 赞同：1
> 
> 时间：2012-06-03T17:19:23.353
> 
> 标签：ruby, text, ms-word

在工作中，我有两个 Word 文档，它们代表相同文档的不同版本。我想比较并提取差异，我想我想将 word 文档转换为文本文件，然后对其进行比较。这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:55:04.403

如果您在系统中安装了 Word，您可以使用 activeX Word 自动化对象来提取文本。使用这个简单的、未经测试的代码来帮助您入门

```
word = WIN32OLE.new('Word.Application');
worddoc = word.Documents.Open(filename);
text = worddoc.content.text; 
```

如果您没有 Word 或不想要求您的用户安装 Word，那么您不妨多花点力气提取文本。该词使用的最新 .docx 格式只不过是 zip 存档中的 Open XML Office 文件。所以，你只需要解压 .docx 文件，在 word 文件夹中搜索代表文档内容的 xml 文件；并通过解析 XML（DOM 或 SAX 或 PORO 或 ..）简单地提取文本。

# ruby - 为我正在开发的 rails ORM gem 创建 railtie 的问题

> ID：10872361
> 
> 赞同：0
> 
> 时间：2012-06-03T17:19:23.913
> 
> 标签：ruby, ruby-on-rails-3, orm, redis

我正在开发一个 Ruby gem，Ampere，它充当 Redis 数据库的 ORM。我正在尝试支持它的 Rails 集成，并且能够绑定初始化程序和控制台挂钩，但是我的生成器还不能工作。我有一个生成器，`ampere:config`它安装一个默认配置 YAML 文件，以及一个模型生成器的替代品。

当我将我的 gem 安装到一个测试 Rails 应用程序中时，当我在命令行上`ampere:config`运行时，生成器会显示在列表中，但是当我输入 时，我得到：`rails generate``rails g ampere:config`

```
Could not find generator ampere:config. 
```

没有别的了。我的生成器位于 gem 中的“lib/rails/generators/config/”中，很明显 Rails 知道它，因为它出现在`rails g`列表中，但有些地方不对劲。如果有人可以帮助或知道一些比 Rails 指南更好的文档，至少可以说很少，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:30:32.613

好的，所以我终于明白了。为了使生成器工作，它们必须`source_root`使用模板的相对路径进行调用，并且它们必须存在于 中`lib/rails/generators/your_gem_name/`，那么其中的目录结构`your_gem_name/`就是您阅读文档（或`rails g generator`在 Rails 项目中运行）所期望的。

文档对此不是很清楚，所以有点混乱，但是在查看了一些示例之后，我尝试了这个并且它起作用了。

# javascript - 使用带有一个附加参数的函数的 map() 的 JS 回调

> ID：10872370
> 
> 赞同：9
> 
> 时间：2012-06-03T17:20:37.143
> 
> 标签：javascript, arrays, map, parameters, callback

我正在尝试找到一种方法来使用 JS 的`Array.prototype.map()`功能，该函数具有一个额外的参数（如果可能的话，我想*避免*重写 built-in `Array.prototype.map()`）。该文档非常好，但不包括“一个或多个附加参数”的情况：

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)

```
function doOpSingle(elem)
{
 // do something with one array element
}

var A = ["one", "two", "three", "four"];
var x = A.map(doOpSingle); // this will execute doOpSingle() on each array element 
```

到目前为止，一切都很好。但是，如果所讨论的函数有**两个**参数，例如您可能想要对它进行或的标志（想想位掩码）怎么办？

```
function doOpSingle2(arrelem,flag)
{
 // do something with one array element
}

var A = ["one", "two", "three", "four"];
var theFlag = util.getMask(); // call external function
var y = A.map(doOpSingle2(theFlag)); // this does not work! 
```

当然，任何解决方案都应该**没有** `for`循环，因为这就是为什么我们有`map()`, 以使我们的代码更干净/摆脱这些！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-03T17:22:02.427

使用匿名函数：

```
A.map(function(a) {return doOpSingle2(a,theFlag);}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-03T17:27:18.253

`A.map(doOpSingle2.bind(null, theFlag))`

`theFlag`将是第一个参数：

`function doOpSingle2( flag, elem ) { ... }`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T17:29:50.457

编辑：没关系，你真的不需要 Closure 。请参阅 Esailija 的回答。

如果您碰巧使用[Closure 库](https://developers.google.com/closure/library/)，还有另一种选择。首先，您必须重写 doOpSingle2 以便标志位于第一位：

```
function doOpSingle2(flag, arrelem)
{
 // do something with one array element
} 
```

那么你可以做

```
var y = A.map(goog.partial(doOpSingle2, theFlag)); 
```

goog.partial*部分应用*函数，所以`goog.partial(doOpSingle2, theFlag)`等价于这个函数：

```
function(arrElem) {
  return doOpSingle2(theFlag, arrElem);
} 
```

在这种特殊情况下，我可能不会推荐这种方法，但可能在类似的情况下效果很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T17:23:05.463

使用匿名函数。

```
var y = A.map(function(x){doOpSingle2(x,theFlag);}); 
```

# primefaces - primefaces 输入组件在验证时显示旧数据

> ID：10872377
> 
> 赞同：1
> 
> 时间：2012-06-03T17:21:12.943
> 
> 标签：primefaces

我正在使用 primefaces3.3 版本。我有一个数据表来显示详细信息，并将 CRUD 按钮作为数据表页脚的一部分。在数据表中选择特定行后，单击 CRUD 按钮将显示一个对话框。

此对话框包含具有 requiredMessage 和 validationMessage 属性的输入字段以及保存按钮。当我不输入任何输入并单击对话框中的保存按钮时，将显示验证消息。但是，关闭对话框后，即使在数据表中选择了不同的行，也只会显示旧数据。我已经附加了 BackingBean 和 xhtml 代码。

帐户.xhtml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org  /TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui">
 <h:head>
 </h:head>
 <h:body>
 <ui:composition template="/template.xhtml">
    <ui:define name="body">
        <h:form id="form" prependId="false">
            <p:contextMenu for="dataTable">
                <p:menuitem value="View" update=":form2:accountDisplay"
                    icon="ui-icon-search" oncomplete="accountDialog.show()"
                    process="@this">
                    <f:setPropertyActionListener value="#{account}"
                        target="#{accountBean.selectedAccount}" />
                </p:menuitem>
                <p:menuitem value="Edit" update=":form2:accountDisplay"
                    icon="ui-icon-edit" oncomplete="accountDialog.show()"
                    process="@this" immedeate="true">
                    <f:setPropertyActionListener value="#{account}"
                        target="#{accountBean.currentAccount}" />
                </p:menuitem>
                <p:menuitem value="Delete" update=":dialogForm:confirmDialog"
                    icon="ui-icon-close" oncomplete="confirmation.show()" />
            </p:contextMenu>

            <h:panelGroup id="dataPanel">
                <p:dataTable var="account" value="#{accountBean.accounts}"
                    paginator="true" rows="20" rowKey="#{account.accountCode}"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    selection="#{accountBean.selectedAccount}" selectionMode="single"
                    id="dataTable">
                    <p:column id="accountCode" headerText=" Account Code"
                        sortBy="#{account.accountCode}" filterBy="#{account.accountCode}"
                        filterMatchMode="startsWith" footerText="startsWith">
                        <h:outputText value="#{account.accountCode}" />
                    </p:column>
                    <p:column id="accountCode" headerText=" Account Code"
                        sortBy="#{account.accountDescription}" filterBy="#{account.accountDescription}"
                        filterMatchMode="startsWith" footerText="startsWith">
                        <h:outputText value="#{account.accountDescription}" />
                    </p:column>
                <f:facet name="footer">
                    <p:toolbar>
                    <p:toolbarGroup align="left">
                                    <p:commandButton id="btnAdd" value="Add" title="Add New Account"
                            icon="ui-icon-add"
                            oncomplete="accountDialog.show()" />                        
                        <p:commandButton id="editButton" value="Edit" icon="ui-icon-edit"
                            update=":form2:accountDisplay" oncomplete="accountDialog.show()">

                        </p:commandButton>
                        <p:commandButton id="showDialogButton" icon="ui-icon-delete"
                            value="Delete"
                            title="Delete Account Details" oncomplete="confirmation.show()">
                        </p:commandButton>
                        <p:commandButton id="viewButton" value="View"
                            icon="ui-icon-search" update=":form2:display"
                            oncomplete="accountDialog.show()" />
                        <p:commandButton id="btnRefresh" styleClass="refreshButton"
                            title="Refresh Account Information" value="Refresh"
                            icon="ui-icon-refresh"
                            actionListener="#{accountBean.populateAccounts}"
                            update=":form:dataTable"/>                          
                    </p:toolbarGroup>
                    </p:toolbar>    
                    </f:facet>
                </p:dataTable>

            </h:panelGroup>
        </h:form>
        <h:form id="form2">
            <!--  <p:growl id="growl" showDetail="true" sticky="true" /> -->   
            <p:dialog id="basicDialog" header="Account Details"
                widgetVar="detailDialog" resizable="false">

                <h:panelGrid id="display" columns="2">
                    <h:outputText value="#{bundle.AccountLabel_accountCode}" />
                    <h:outputText value="#{accountBean.selectedAccount.accountCode}"
                        title="#{bundle.AccountTitle_accountCode}" />

                    <h:outputText value="#{bundle.AccountLabel_accountDescription}" />
                    <h:outputText value="#{accountBean.selectedAccount.accountDescription}"
                        title="#{bundle.AccountTitle_alertCode}" />
                </h:panelGrid>
            </p:dialog>
            <p:dialog header="Account Detail" widgetVar="accountDialog"
                resizable="false" height="600" width="600" showEffect="clip"
                hideEffect="fold" id="dialog" modal="true">

                <h:panelGrid id="accountDisplay" columns="2" cellpadding="4">

                    <f:facet name="header">
                        <p:messages id="messages" autoUpdate="true" />
                    </f:facet>

                    <h:outputLabel value="Account Code:" for="accountCode" />
                    <p:inputText label="Account Code" id="accountCode"
                        value="#{accountBean.selectedAccount.accountCode}"
                        title="Account Code" required="true"
                        validatorMessage="#{bundle.AccountValidationAccountCode}" requiredMessage="#{bundle.AccountRequiredMessage_accountCode}">

                    </p:inputText>
                    <h:outputLabel value="Account Description:" for="accountDescripition" />
                    <p:inputText label="Account Description" id="accountDescription"
                        value="#{accountBean.selectedAccount.accountDescription}"
                        title="Account Description" required="true"
                        validatorMessage="#{bundle.AccountValidationAccountDescription}" requiredMessage="#{bundle.AccountRequiredMessage_accountDescription}">

                    </p:inputText>
                    <f:facet name="footer">
                        <!-- <p:commandButton value="New" icon="ui-icon-check"/> -->
                        <h:outputLabel />
                        <p:commandButton styleClass="saveButton" value="Save"
                            icon="ui-icon-check" 
                            actionListener="#{accountBean.createOrUpdate}" 
                            update=":form:dataTable,:form2:accountDisplay" oncomplete="if (!args.validationFailed) {accountDialog.hide();}"/>

                        <p:commandButton styleClass="cancelButton" value="Cancel"
                            icon="ui-icon-cancel" oncomplete="accountDialog.hide()" process="@this"/>

                    </f:facet>
                </h:panelGrid>
            </p:dialog>

        </h:form>

        <h:form id="dialogForm">
            <p:confirmDialog id="confirmDialog" header="Confirm Delete Account"
                severity="alert" widgetVar="confirmation">
                <f:facet name="message">
                    <h:outputText
                        value="Delete #{accountBean.selectedAccount.accountCode}?" />
                </f:facet>

                <p:commandButton id="confirm" value="Yes"
                    oncomplete="confirmation.hide()" update=":form:dataTable"
                    actionListener="#{accountBean.remove}" ajax="false"/>
                <p:commandButton id="decline" value="No"
                    onclick="confirmation.hide()" type="button" ajax="false"/>
            </p:confirmDialog>
        </h:form>
    </ui:define>
</ui:composition> 
```

AccountBean.java

```
 package com.cba.web.beans;

   import java.io.Serializable;
   import java.util.List;

   import javax.faces.bean.ManagedBean;
   import javax.faces.bean.ViewScoped;
   import javax.faces.context.FacesContext;
   import javax.faces.event.ActionEvent;

   import org.primefaces.context.RequestContext;

   import com.cba.services.AccountService;
   import com.cba.utils.ServiceLocator;
   import com.cba.web.model.Account;

   @ManagedBean(name = "accountBean")
   @ViewScoped
   public class AccountBean implements Serializable {

   private transient AccountService accountService;

   private List<Account> accounts;

   private Account selectedAccount = new Account();

private Account currentAccount = new Account();

public Account getSelectedAccount() {
    return selectedAccount;
}

public void setSelectedAccount(Account selectedAccount) {
    this.selectedAccount = selectedAccount;
}

public Account getCurrentAccount() {
    return currentAccount;
}

public void setCurrentAccount(Account currentAccount) {
    this.currentAccount = currentAccount;
}

public AccountBean() {

    populateAccounts();
}

public AccountService getAccountService() {
    return accountService;
}

public void setAccountService(AccountService accountService) {
    this.accountService = accountService;
}

public List<Account> getAccounts() {
    return accounts;
}

public void populateAccounts() {
    accountService = (AccountService) ServiceLocator.getInstance().getBean(
            "accountService");
    accounts = accountService.getAccountDetails();
}

public void createOrUpdate(ActionEvent e) {
    try {

        System.out.println("entering createOrUpdate in AccountBean");
        accountService = (AccountService) ServiceLocator.getInstance()
                .getBean("accountService");
        accountService.updateAccountDetails(selectedAccount);
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

public void remove(ActionEvent e) {
    try {
        accountService = (AccountService) ServiceLocator.getInstance()
                .getBean("accountService");
        accountService.deleteAccountDetails(selectedAccount);
        selectedAccount = new Account();
        populateAccounts();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

}

我正在使用 Google Chrome 19 和 IE 8。对此的任何输入将不胜感激。提前致谢

# php - 选择使用 Yii 重定向到 2 loginUrl？

> ID：10872378
> 
> 赞同：1
> 
> 时间：2012-06-03T17:21:13.193
> 
> 标签：php, login, yii

我读过一篇文章，[它展示了如何重定向到指定的登录页面](http://www.tipstank.com/2010/05/23/make-yii-redirect-to-the-login-page-i-want/)。但是，我想要的是如果用户来到前端，他们应该被重定向到前端登录页面，类似的情况也适用于后端。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T04:29:51.867

请在您的配置文件 ( `main.php`) 上设置登录 URL。

```
// user
    'user'=>array(
    // enable cookie-based authentication
    'allowAutoLogin'=>true,
    // set the url where user must be redirected if authentication needed
    // use null to force 403 HTTP error 
    'loginUrl'=>'/site/login',
    // set here the name of a class
    // that extends CWebUser and it is stored in
    // protected/components/<classname>
    // see: http://www.yiiframework.com/doc/cookbook/60/
    'class' => 'WebUser',
    ), 
```

请看这个网址：[http ://www.yiiframework.com/wiki/59/](http://www.yiiframework.com/wiki/59/)

然后在您的 Home Controller( `SiteController.php`) 上添加此代码以使您的 Index Home 只能由经过身份验证的用户访问。

```
public function filters()
{
    return array(
        'accessControl', // perform access control for CRUD operations
    );
}

/**
 * Specifies the access control rules.
 * This method is used by the 'accessControl' filter.
 * @return array access control rules
 */
public function accessRules()
{
    return array(
        array('allow', // allow authenticated user to perform 'create' and 'update' actions
            'actions'=>array('index', 'action1', 'action2', 'anotherAction'),
            'users'=>array('@'),
        ),
        array('deny',  // deny all users
            'users'=>array('*'),
        ),
    );
} 
```

请看这个网址：[http ://www.yiiframework.com/doc/guide/1.1/en/topics.auth](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:39:28.390

最简单的方法应该是根据需要确定用户值

```
Yii::app()->getUser()->setState('LoginReturnUrl', 'frontend/login'); 
```

或者

```
Yii::app()->getUser()->setState('LoginReturnUrl', 'backend/login'); 
```

并在您的控制器内重定向：

```
$this->redirect(Yii::app()->createUrl(Yii::app()->getUser()->getState('LoginReturnUrl'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T08:25:35.587

```
'components' => [
    ...
    'user' => [
        'identityClass' => 'app\models\User',
        'loginUrl' => [ 'YourController\YourLogin' ],
    ],
] 
```

在 main.php 中。

loginUrl 必须用数组声明

# php - 使用php在mysql中存储电话号码时出错

> ID：10872380
> 
> 赞同：1
> 
> 时间：2012-06-03T17:21:25.293
> 
> 标签：php, mysql

我有一些电话号码（经过验证，所有都只包含整数，没有`-`或`+`在其中）作为文本文件中的字符串。

我正在对电话号码列为 int(12) 的 mysql 表进行简单的 mysql 更新。请注意，我使用 intval() 将从文本文件中提取的每个电话号码转换为整数。

我面临的问题是，我没有插入数字，而是将**2147483647**插入每列。我想我在某个地方犯了一个愚蠢的小错误，但我仍然无法弄清楚。谁能解释我犯了什么错误？

**编辑：**这是我正在使用的一段代码（它没有给出任何 sql 错误）：

```
$sql="UPDATE ".$table." SET mobile = ".intval($smob).", phone = ".intval($sphone)." WHERE roll='".$sroll."'";
mysql_query($sql, $con) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:33:57.643

手册摘录`intval()`：

> 最大值取决于系统。32 位系统的最大有符号整数范围为 -2147483648 到 2147483647。例如，在这样的系统上，intval('1000000000000') 将返回 2147483647。64 位系统的最大有符号整数值为 9223372036854775807。

您得到的是 32 位机器上的有符号整数的最大数量。

我强烈建议您不要使用此功能进行电话号码转换。一个简单的原因是我的手机号码是 11 位数字（国际访问没有前导 + 或双零），我相信有些国家的数字更多。

为什么需要将电话号码存储为`int`'s？由于您很可能没有对客户中可能拥有最大电话号码的人进行一些计算和统计，并且此数据可能仅用于发票或联系信息，因此您可以将其保留为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:40:11.457

电话号码**不是整数**，不应使用整数类型存储。

发生观察到的行为是因为您尝试存储的值超出了列类型接受的范围。我建议将 MySQL 置于严格模式 - 这会强制它在插入的数据等无法存储时返回错误，而不是默默地尝试做任何最不坏的事情而不会失败。

# java - 使用 Javascript 获取最终 HTML 将 Java 呈现为字符串

> ID：10872382
> 
> 赞同：12
> 
> 时间：2012-06-03T17:21:37.523
> 
> 标签：java, javascript, web-scraping

我想从 HTML 页面获取数据（抓取它）。但它包含 javascript 中的评论。在普通的 java url fetch 中，我只得到没有执行 Javascript 的 HTML（实际的）。我想要执行 Javascript 的最后一页。

示例：- [http://www.glamsham.com/movies/reviews/rowdy-rathore-movie-review-cheers-for-rowdy-akki-051207.asp](http://www.glamsham.com/movies/reviews/rowdy-rathore-movie-review-cheers-for-rowdy-akki-051207.asp)

此页面包含作为 facebook 插件的评论，这些评论作为 Javascript 获取。

甚至在this上也类似this。 [http://www.imdb.com/title/tt0848228/reviews](http://www.imdb.com/title/tt0848228/reviews)

我应该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T17:31:47.330

使用**phantomjs**：[http ://phantomjs.org](http://phantomjs.org)

```
var page = require('webpage').create();
page.open("http://www.glamsham.com/movies/reviews/rowdy-rathore-movie-review-cheers-for-rowdy-akki-051207.asp")
setTimeout(function(){
    // Where you want to save it    
    page.render("screenshoot.png")  
    // You can access its content using jQuery
    var fbcomments = page.evaluate(function(){
        return $(".fb-comments iframe").contents().find(".postContainer") 
    }) 
},10000) 
```

您必须使用 phantom 中的选项`--web-security=no`来允许跨域交互（即对于 facebook iframe）

要从 phantomjs 与其他应用程序通信，您可以使用 Web 服务器或发出 POST 请求：[https ://github.com/ariya/phantomjs/blob/master/examples/post.js](https://github.com/ariya/phantomjs/blob/master/examples/post.js)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-04T06:38:13.013

您可以使用[HTML Unit](http://htmlunit.sourceforge.net/)，一个基于 java 的“GUI LESS 浏览器”。您可以轻松获得任何页面的最终渲染输出，因为这会像 Web 浏览器那样加载页面并返回最终渲染输出。不过，您可以禁用此行为。

**更新：**例如，您是在问吗？你不必为此做任何额外的事情：

**例子：**

```
WebClient webClient = new WebClient();
HtmlPage myPage = ((HtmlPage) webClient.getPage(myUrl)); 
```

**更新 2：**您可以按如下方式获取 iframe：

```
HtmlPage myFrame = (HtmlPage) myPage.getFrameByName(myIframeName).getEnclosedPage(); 
```

请阅读上述链接中的文档。在 HTMLUnit 中获取页面内容没有什么不能做的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-24T20:44:50.980

**解决该问题的简单方法。** 您好，您可以使用**[HtmlUnit](https://tenet.dl.sourceforge.net/project/htmlunit/htmlunit/2.38.0/htmlunit-2.38.0-bin.zip)**是 java API，我认为它可以帮助您访问执行的 js 内容，作为一个简单的 html。

```
WebClient webClient = new WebClient();
HtmlPage myPage = (HtmlPage) webClient.getPage(new URL("YourURL"));
System.out.println(myPage.getVisibleText()); 
```

# wpf - 如何使用 WPF 为具有多个固定值的标签内容设置动画？

> ID：10872385
> 
> 赞同：5
> 
> 时间：2012-06-03T17:21:58.460
> 
> 标签：wpf, animation

我想在以下连接对话框中以红色为文本设置动画，因此标签内容将显示...

```
Frame 1: Connecting
Frame 2: Connecting.
Frame 3: Connecting..
Frame 4: Connecting...
Go to frame 1 if connection isn't established yet.
When connection is established: display "Connected". 
```

![截屏](../Images/fc627b2a80a3e7339c5c7897a844bfa1.png)

我找到了有关动画文本的教程，但没有找到有关文本内容的教程。使用 WPF 可以轻松实现吗？任何帮助/教程链接将不胜感激。

这是我用来生成屏幕截图的 WPF 代码。

```
<Window x:Class="radar_test_ui.SerialConnectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Connection" SizeToContent="WidthAndHeight">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Label Grid.Row="0" Content="COM:" Margin="5,0,5,0" />
        <ComboBox Grid.Row="1" Margin="10,0,10,0">
            <ComboBoxItem Content="COM1" IsSelected="True" />
            <ComboBoxItem Content="COM2" />
            <ComboBoxItem Content="COM3" />
        </ComboBox>
        <Label Grid.Row="2" Content="Baud rate:" Margin="5,10,5,0" />
        <ComboBox Grid.Row="3" Margin="10,0,10,0">
            <ComboBoxItem Content="9600" IsSelected="True" />
            <ComboBoxItem Content="19200" />
        </ComboBox>
        <Separator Grid.Row="4" Margin="0,15,0,15" />
        <Grid Grid.Row="5" Margin="10,0,10,10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Label Content="Connecting..." FontSize="10" Width="100" VerticalAlignment="Bottom" Margin="0,0,0,-5" Name="LabelStatus" />
            <Button Grid.Column="1" Content="Connect" Padding="10,3,10,3" Margin="0,0,10,0" Click="ConnectClick" />
            <Button Grid.Column="2" Content="Cancel" Padding="10,3,10,3" Click="CancelClick" />
        </Grid>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T18:50:56.950

You could use `ObjectAnimationUsingKeyFrames` and set whatever `Duration` you like for the key frames.

Here's a simple example. When you click the connect button the `Label` animation for "Connecting.." will start and when you click it again the `Label` will say "Connected".

```
<Label Name="LabelStatus" FontSize="10" Width="100" VerticalAlignment="Bottom" Margin="0,0,0,-5">
    <Label.Style>
        <Style TargetType="Label">
            <Setter Property="Content" Value="Connecting..."/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Connecting}" Value="True">
                    <DataTrigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard Storyboard.TargetProperty="Content">
                                <ObjectAnimationUsingKeyFrames Duration="00:00:04"
                                                                RepeatBehavior="Forever">
                                    <DiscreteObjectKeyFrame KeyTime="00:00:00"
                                                            Value="Connecting"/>
                                    <DiscreteObjectKeyFrame KeyTime="00:00:01"
                                                            Value="Connecting."/>
                                    <DiscreteObjectKeyFrame KeyTime="00:00:02"
                                                            Value="Connecting.."/>
                                    <DiscreteObjectKeyFrame KeyTime="00:00:03"
                                                            Value="Connecting..."/>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.EnterActions>
                    <DataTrigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard Storyboard.TargetProperty="Content">
                                <ObjectAnimationUsingKeyFrames Duration="00:00:00">
                                    <DiscreteObjectKeyFrame KeyTime="00:00:00"
                                                            Value="Connected"/>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </BeginStoryboard>
                    </DataTrigger.ExitActions>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Label.Style>
</Label>
<Button Grid.Column="1" Content="Connect" Padding="10,3,10,3" Margin="0,0,10,0"
        Click="ConnectClick"/> 
```

And in the code behind I added the boolean property `Connecting` and implemented `INotifyPropertyChanged`.

**Update**
`PropertyChanged` is null because the window doesn't have a `DataContext`.

```
public MainWindow()
{
    InitializeComponent();
    this.DataContext = this;
}

private bool _connecting;
public bool Connecting
{
    get { return _connecting; }
    set
    {
        _connecting = value;
        OnPropertyChanged("Connecting");
    }
}

private void ConnectClick(object sender, RoutedEventArgs e)
{
    Connecting = !Connecting;
}

public event PropertyChangedEventHandler PropertyChanged;
private void OnPropertyChanged(string propertyName)
{
    if (PropertyChanged != null)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

# google-maps-api-3 - 如何在谷歌地球 api 中显示瓦片层？

> ID：10872389
> 
> 赞同：1
> 
> 时间：2012-06-03T17:22:24.753
> 
> 标签：google-maps-api-3, google-earth-plugin

我正在为非营利组织“诺克斯山公园之友”创建交互式地图，但我在使用 Google 地球视图时遇到了问题。

这是项目： http: [//www.virtualbc.ca/knoxmountain/](http://www.virtualbc.ca/knoxmountain/)

这是与谷歌地图代码相关的代码：

```
google.load('earth', '1');
var map;
var googleEarth;

var gmarkers = [];

var iconShadow = new google.maps.MarkerImage('icons/shadow.png',
      // The shadow image is larger in the horizontal dimension
      // while the position and offset are the same as for the main image.
new google.maps.Size(46, 42),
new google.maps.Point(0,0),
new google.maps.Point(13, 42));

var sites = [
['1',49.905305,-119.491191, 37, '<img src="images/parking.jpg" />','parking'],
['2',49.905842,-119.481927, 36, '<img src="images/viewpoint.jpg" />','viewpoint'],
['3',49.907366,-119.490439, 35, '<img src="images/shelter.jpg" />','shelter'],
['4',49.907878,-119.491058, 34, '<img src="images/viewpoint.jpg" />','viewpoint'],
['5',49.908405,-119.491083, 33, '<img src="images/parking.jpg" />','parking'],
['6',49.910402,-119.492423, 32, '<img src="images/viewpoint.jpg" />','viewpoint'],
['7',49.911380,-119.480236, 31, '<img src="images/shelter.jpg" />','shelter'],
['9',49.911389,-119.480571, 30, '<img src="images/playground.jpg" />','playground'],
['a',49.911417,-119.485104, 29, '<img src="images/shelter.jpg" />','shelter'],
['b',49.911578,-119.479905, 28, '<img src="images/parking.jpg" />','parking'],
['8',49.911656,-119.480227, 27, '<img src="images/picnic.jpg" />','picnic'],
['c',49.91174271,-119.48507050, 26, '<a href="vtours/apex_trail_shelter/index.html?iframe=true&width=88%&height=98%" rel="prettyPhoto"><img src="images/apex_point_high.jpg" /></a>','icon'],
['d',49.911916,-119.485581, 25, '<img src="images/viewpoint.jpg" />','viewpoint'],
['e',49.912234,-119.485175, 24, '<img src="images/viewpoint.jpg" />','viewpoint'],
['f',49.912662,-119.485008, 23, '<img src="images/viewpoint.jpg" />','viewpoint'],
['g',49.91286999,-119.48413424, 22, '<a href="vtours/apex_trail_1/index.html?iframe=true&width=88%&height=98%" rel="prettyPhoto"><img src="images/apex_point_low.jpg" /></a>','icon'],
['h',49.913207,-119.482843, 21, '<img src="images/parking.jpg" />','parking'],
['i',49.914174,-119.472531, 20, '<img src="images/viewpoint.jpg" />','viewpoint'],
['j',49.914445,-119.482013, 19, '<img src="images/information.jpg" />','information'],
['k',49.914687,-119.482042, 18, '<img src="images/washroom.jpg" />','washroom'],
['l',49.914747,-119.482432, 17, '<img src="images/shelter.jpg" />','shelter'],
['m',49.914814,-119.483070, 16, '<img src="images/viewpoint.jpg" />','viewpoint'],
['n',49.915162,-119.482393, 15, '<img src="images/viewpoint.jpg" />','viewpoint'],
['o',49.916277,-119.481530, 14, '<img src="images/viewpoint.jpg" />','viewpoint'],
['p2',49.919028,-119.479564, 13, '<img src="images/viewpoint.jpg" />','viewpoint'],
['p',49.919065,-119.478622, 12, '<img src="images/viewpoint.jpg" />','viewpoint'],
['q',49.91971281,-119.47954356, 11, '<a href="vtours/gordon_trail_1/index.html?iframe=true&width=88%&height=98%" rel="prettyPhoto"><img src="images/gordon_trail_1.jpg" /></a>','icon'],
['r',49.919778,-119.479044, 10, '<img src="images/viewpoint.jpg" />','viewpoint'],
['s',49.920243,-119.480118, 9, '<img src="images/viewpoint.jpg" />','viewpoint'],
['t',49.922075,-119.481165, 8, '<img src="images/viewpoint.jpg" />','viewpoint'],
['u',49.924514,-119.478223, 7, '<img src="images/swim.jpg" />','swimming'],
['v',49.924599,-119.477396, 6, '<img src="images/washroom.jpg" />','washroom'],
['w',49.924867,-119.477636, 5, '<img src="images/picnic.jpg" />','picnic'],
['x',49.925053,-119.477334, 4, '<img src="images/picnic.jpg" />','picnic'],
['y',49.925211,-119.476506, 3, '<img src="images/picnic.jpg" />','picnic'],
['z',49.925446,-119.476789, 2, '<img src="images/swim.jpg" />','swimming'],
['z2',49.92555541,-119.47710250, 1, '<a href="vtours/paul_tomb_bay_1/index.html?iframe=true&width=88%&height=98%" rel="prettyPhoto"><img src="images/tomb_bay.jpg" /></a>','icon']
];

var infowindow = null;

var overlay;

// Used to make Google Map quard coords to MapCruncher/BingMaps quard coords    
function TileToQuadKey ( x, y, zoom)
{
    var quad = "";
    for (var i = zoom; i > 0; i--)
    {
        var mask = 1 << (i - 1);
        var cell = 0;
        if ((x & mask) != 0)
            cell++;
        if ((y & mask) != 0)
            cell += 2;
        quad += cell;
    }
    return quad;
}

function init() {
    var centerMap = new google.maps.LatLng(49.909671,-119.482241);

    var myOptions = {
        zoom: 10,
        center: centerMap,
        mapTypeId: google.maps.MapTypeId.SATELLITE
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

        // Create the tile layers     

    // ASTER Tile Layer  
    myASTEROptions = {
     getTileUrl : function (a,b) { 
return  "http://www.virtualbc.ca/knoxmountain/map/" + TileToQuadKey(a.x,a.y,b) + ".png"; 
},
     isPng: true,
     opacity: 1.0,
     tileSize: new google.maps.Size(256,256),
     name: "ASTER",
     minZoom:13,
     maxZoom:20
     }

    ASTERMapType = new google.maps.ImageMapType( myASTEROptions );
    map.overlayMapTypes.insertAt(0, ASTERMapType);

     // Aerial Tile Layer  
    myAerialOptions = {
     getTileUrl : function (a,b) { 
return  "http://www.virtualbc.ca/knoxmountain/map/" + TileToQuadKey(a.x,a.y,b) + ".png"; 
},
     isPng: true,
     opacity: 1.0,
     tileSize: new google.maps.Size(256,256),
     name: "Aerial",
     minZoom:15,
     maxZoom:21
     }

   AerialMapType = new google.maps.ImageMapType( myAerialOptions );
   map.overlayMapTypes.insertAt(1, AerialMapType);

    var panorama = new google.maps.StreetViewPanorama(map.getDiv()); 
    panorama.setVisible(false); 
    panorama.set('enableCloseButton', true); 
    map.setStreetView(panorama); 
    panorama.setPosition(centerMap); 

    setMarkers(map, sites);     
    setZoom(map, sites);

    infowindow = new google.maps.InfoWindow({
        content: "Loading..."
    });

    googleEarth = new GoogleEarth(map);

    google.maps.event.addListenerOnce(map, 'tilesloaded', addOverlays);

}

/*
This functions sets the markers (array)
*/
function setMarkers(map, markers) {
    for (var i = 0; i < markers.length; i++) {
        var site = markers[i];
        var siteLatLng = new google.maps.LatLng(site[1], site[2]);

        var marker = new google.maps.Marker({
            position: siteLatLng,
            map: map,
            title: site[0],
            zIndex: site[3],
            html: site[4],
            // Markers drop on the map
            animation: google.maps.Animation.DROP,
            icon: 'http://www.virtualbc.ca/knoxmountain/icons/'+site[5]+'.png',
            shadow: iconShadow
        });

        gmarkers.push(marker);

        google.maps.event.addListener(marker, "click", function () {
            infowindow.setContent(this.html);
            infowindow.open(map, this);
        });
    }
}

/*
Set the zoom to fit comfortably all the markers in the map
*/
function setZoom(map, markers) {
    var boundbox = new google.maps.LatLngBounds();
    for ( var i = 0; i < markers.length; i++ )
    {
      boundbox.extend(new google.maps.LatLng(markers[i][1], markers[i][2]));
    }
    map.setCenter(boundbox.getCenter());
    map.fitBounds(boundbox);
}

// This function picks up the click and opens the corresponding info window

function myclick(i) {
    google.maps.event.trigger(gmarkers[i-1], "click");
//  gmarkers[i].setAnimation(null);
//  gmarkers[i-1].setAnimation(google.maps.Animation.BOUNCE);
//  value = i-1;
}

google.maps.event.addDomListener(window, 'load', init); 
```

问题：

*   如何使图块在 Google Earth API 中可见？

*   或者如何**仅**在 Google 地球选项卡中显示 KML 文件？

*   只有在选择 Google 地球选项卡时，有什么方法可以运行代码？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:13:35.367

有几种方法可以实现您的目标。为了稍微澄清原始问题，此页面使用[Google Maps v3 Utility Library 的 GoogleEarth 部分](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#GoogleEarth)，因此我的回答将利用其功能。

首先，只有在选择 Google Earth 视图时才可以运行代码。如果您在地球视图中，您可以随时通过检查当前的[MapTypeId](https://developers.google.com/maps/documentation/javascript/reference#MapTypeId)进行测试。实用程序库提供了一个自定义 id，它表明用户正在使用地球视图，如果

```
map.getMapTypeId() === GoogleEarth.MAP_TYPE_ID 
```

这就是被动测试。要在用户切换到地球地图类型时收到通知，您可以像这样注册一个事件侦听器：

```
google.maps.event.addListener(map, 'maptypeid_changed', function() {
  if (map.getMapTypeId() === GoogleEarth.MAP_TYPE_ID) {
    // using the Earth plugin, can run custom code
  } else {
    // some other map type (roadmap, satellite, etc)
  }
}); 
```

最后，如果您通过 Maps API 添加它们，实用程序库只会在 Maps 和 Earth 之间同步 KML 叠加层。如果您改为将 KML 直接添加到 Earth 插件，它*只会*显示在 Earth 插件中，而不是在常规地图视图中。为此，您需要一个对实际插件实例的引用，您可以通过以下方式从实用程序库中获取它

```
var ge = googleEarth.getInstance(); 
```

（这是使用您的代码，其中 googleEarth 是您使用实用程序库创建的实例的名称）。此时，您可以像通常使用[Earth API](https://developers.google.com/earth/documentation/reference/)一样使用该插件。请参阅此加载 KML 的示例，例如：[Fetch Good KML](http://code.google.com/apis/ajax/playground/#fetch_good_kml)

# java - Android 2D 图像数组

> ID：10872394
> 
> 赞同：0
> 
> 时间：2012-06-03T17:22:54.350
> 
> 标签：java, android, arrays, image, 2d

我将一个简单的游戏作为我的第一个 android 项目。它使用来自drawables中可能5个不同图像的“平铺”图形（一个用于墙壁，一个用于门等），图像垂直平铺8 x 15。这需要大量编码来设置 120 个单独的 imageView，因此我一直在寻找数组类型的解决方案（最好是 2d）。如果有人有创建二维图像视图数组的经验，我会很感激一些建议或指向一些文献的指针，让我开始，因为我还没有发现任何有用的东西。

谢谢，祝Spencer D编码愉快

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:11:57.967

ImageView[] arrayOfImageViews= new ImageView[size];

可以在此处找到有关如何使用数组的更多信息：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)

# algorithm - 使用 IDDFS 创建路径数组

> ID：10872398
> 
> 赞同：0
> 
> 时间：2012-06-03T17:23:10.467
> 
> 标签：algorithm, path-finding

我的 IDDFS 算法使用邻接矩阵找到我的图的最短路径。它显示了解决方案的深度（我知道这是从起点到终点连接在一起的点数）。
我想在数组中获取这些点。

例如：
假设在深度 5 中找到了解决方案，所以我想要一个带有点的数组：{0,2,3,4,6}。
深度 3：数组 {1,2,3}。

这是C ++中的算法：（
我不确定该算法是否“知道”在搜索时是否再次访问了访问过的点-我几乎是图形的初学者）

```
int DLS(int node, int goal, int depth,int adj[9][9])
{
    int i,x;

    if ( depth >= 0 )
    {
        if ( node == goal )
            return node;

        for(i=0;i<nodes;i++)
        {
            if(adj[node][i] == 1)
            {
                child = i;
                x = DLS(child, goal, depth-1,adj);

                if(x == goal)
                    return goal;
            }
        }
    }
    return 0;
}

int IDDFS(int root,int goal,int adj[9][9])
{
    depth = 0;
    solution = 0;
    while(solution <= 0 && depth < nodes)
    {
        solution = DLS(root, goal, depth,adj);
        depth++;
    }
    if(depth  == nodes)
        return inf;

    return depth-1;
}

int main()
{
    int i,u,v,source,goal;

int adj[9][9] = {{0,1,0,1,0,0,0,0,0},
       {1,0,1,0,1,0,0,0,0},
       {0,1,0,0,0,1,0,0,0},
       {1,0,0,0,1,0,1,0,0},
       {0,1,0,1,0,1,0,1,0},
       {0,0,1,0,1,0,0,0,1},
       {0,0,0,1,0,0,0,1,0},
       {0,0,0,0,1,0,1,0,1},
       {0,0,0,0,0,1,0,1,0}
    };

    nodes=9;
    edges=12;

    source=0;
    goal=8;

    depth = IDDFS(source,goal,adj);

    if(depth == inf)printf("No solution Exist\n");
    else printf("Solution Found in depth limit ( %d ).\n",depth);

    system("PAUSE");
    return 0;
} 
```

我使用 IDDFS 而不是其他寻路算法的原因是我想将深度更改为指定的数字以搜索精确长度的路径（但我不确定这是否可行）。

* * *

如果有人建议使用邻接矩阵查找指定长度的路径的其他算法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:33:27.130

获取从寻路算法中检索到的实际路径的想法是使用一个`map:V->V`这样的键是一个顶点，而值是用于发现键的顶点（源不会是键，或者是具有`null`值的键，因为它不是从任何顶点发现的）。

寻路算法将在运行时修改此地图，完成后-您可以通过迭代地从表中读取来获取路径-从目标开始-一直到源-并且您以相反的顺序获得路径.

在[DFS](http://en.wikipedia.org/wiki/Depth-first_search)`(key,value)`中：每次发现新顶点（即）时插入该对`key`。请注意，如果`key`已经是地图中的键 - 您应该跳过此分支。
一旦你完成了对某个路径的探索，并“关闭”了一个顶点，你需要把它从列表中取出，但是 - 有时你可以优化算法并跳过这部分（它会使分支因子更小）。

由于 IDDFS 实际上是在迭代地进行 DFS，因此您可以遵循相同的逻辑，并且每次进行新的 DFS 迭代时——为了获得更高的深度，您只需清除旧地图，然后从头开始新的地图。

其他寻路算法有[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)、[A*](http://en.wikipedia.org/wiki/A%2a_search_algorithm)和[dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)。请注意，最后 2 个也适用于加权图。所有这些都可以在达到一定深度时终止，就像在 IDDFS 中达到一定深度时终止 DFS 一样。

# c# - 十六进制到块中的字节

> ID：10872400
> 
> 赞同：1
> 
> 时间：2012-06-03T17:23:26.373
> 
> 标签：c#, hex, bytebuffer

我正在使用以下代码将写入 txt 文件的十六进制字符串转换为字节文件。问题是它不处理大的 txt 文件，我得到“内存不足异常”。我知道它应该以“块”的形式完成，但我就是做错了。

请帮忙！编码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    {
        string tempFileName = (Server.MapPath("~\\Tempfolder\\" + FileUpload2.FileName));

        using (FileStream fs = new FileStream(tempFileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
        using (StreamReader sr = new StreamReader(fs))
        {

            string s = (sr.ReadToEnd());
            if (s.Length % 2 == 1) { lblispis.Text = "String must have an even length"; }
            else
            {
               string hexString = s;
                File.WriteAllBytes(tempFileName + ".bin", StringToByteArray(hexString));
                lblispis.Text = "Done.";
            }
        }
    }                            
 }
public static byte[] StringToByteArray(String hex)
{
    int NumberChars = hex.Length;
    byte[] bytes = new byte[NumberChars / 2];
    for (int i = 0; i < NumberChars; i += 2)
        bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
    return bytes;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:15:52.737

如果文件格式允许，您可以替换`ReadToEnd`调用并将其包装在一个循环中。`ReadLine`

如果不是这种情况，则始终可以选择读取偶数个字符 ( `Read(char[], int, int)`)，直到您到达文件末尾。当然，这样你在完成相当多的工作之后很晚才检测到奇数个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:35:10.133

要添加到@Wormbo 的答案，请注意十六进制字符串仅包含两倍于字节数组的字符。在 .NET 中，对象大小限制为 2GB（2GB 实际上是 32 位机器上的进程大小限制），但由于堆碎片，即使分配 ~800MB 连续块也很容易出现问题。

换句话说，您将希望在转换后立即直接写入磁盘：

```
using (StreamReader reader = new StreamReader(hex))
using (BinaryWriter writer = new BinaryWriter(File.Open(bin, FileMode.Create)))
{
     string line;
     while ((line = reader.ReadLine()) != null)
         writer.Write(StringToByteArray(line));
} 
```

**[编辑]**

我已经修复了它，必须在赋值周围添加括号（检查`while`上面的语句）。

请注意，这只是以下内容的简写：

```
 string line = reader.ReadLine();
     while (line != null) 
     {
          writer.Write(...);
          line = reader.ReadLine();
     } 
```

# php - 将分页集成到 mysql 查询中

> ID：10872401
> 
> 赞同：0
> 
> 时间：2012-06-03T17:23:29.277
> 
> 标签：php, mysql, pagination

我有以下 mysql 查询，并从这里添加了分页： [http ://www.tonymarston.net/php-mysql/pagination.html](http://www.tonymarston.net/php-mysql/pagination.html)

```
$DBQuery3 = mysqli_query($dblink, "SELECT * FROM images WHERE project_id = '$FormProjectID'");

if (mysqli_num_rows($DBQuery3) < 1) {
    $ProjectContent = '
        <p>This project is empty. <a href="index.php?page=upload&id='.$FormProjectID.'">Upload</a> some files to get started.</p>
    ';
} else {

    //if no page number is set, start at page 1
    if (isset($_GET['pageno'])) {
        $pageno = $_GET['pageno'];
    } else {
        $pageno = 1;
    }

    //This code will count how many rows will satisfy the current query.
    $DBQuery3b = mysqli_query($dblink, "SELECT count(*) FROM images WHERE project_id = '$FormProjectID'");
    $query_data = mysqli_fetch_row($dblink, $DBQuery3b);
    $numrows = $query_data[0];

    //This code uses the values in $rows_per_page and $numrows in order to identify the number of the last page.
    $rows_per_page = 2;
    $lastpage = ceil($numrows/$rows_per_page);

    //This code checks that the value of $pageno is an integer between 1 and $lastpage.
    $pageno = (int)$pageno;
    if ($pageno > $lastpage) {
       $pageno = $lastpage;
    }
    if ($pageno < 1) {
       $pageno = 1;
    }

    //This code will construct the LIMIT clause for the sql SELECT statement.
    $limit = 'LIMIT ' .($pageno - 1) * $rows_per_page .',' .$rows_per_page;

    $DBQuery3c = "SELECT * FROM images WHERE project_id = $FormProjectID $limit";
    $DBQuery3d = mysqli_query($dblink, $DBQuery3c);

        //set this variable to empty and so we can latwe loop and keep adding images to it
        $ProjectContent ='';
        while($row = mysqli_fetch_array($DBQuery3d)) {
            $DBImageID = $row['image_id'];
            $DBProjectID = $row['project_id'];
            $DBImageName = $row['image_name'];
            $DBImageDescription = $row['image_description'];
            $DBDateCreated = $row['date_created'];
            $DBLinkToFile = $row['link_to_file'];
            $DBLinkToThumb = $row['link_to_thumbnail'];
            $DBGivenName = $row['given_name'];

            //if the image was given a name by the user, display it
            //otherwise display the generated name

            if (strlen($DBGivenName) > 1) {
                $FileName = $DBGivenName;
            } else {
                $FileName = $DBImageName;
            }

            $ProjectContent .= '
                <a href="index.php?page=image&id='.$DBImageID.'"><img src="uploads/'.$DBLinkToThumb.'" width="150px" height="150px" alt="'.$FileName.'" title="'.$FileName.'"/></a>
            ';

            //Finally we must construct the hyperlinks which will allow the user to select other pages. We will start with the links for any previous pages.
        if ($pageno == 1) {
           $FirstPrev = " FIRST PREV ";
        } else {
           $First = " <a href='{$_SERVER['PHP_SELF']}?page=project&id=$FormProjectID&pageno=1'>FIRST</a> ";
           $prevpage = $pageno-1;
           $Prev = " <a href='{$_SERVER['PHP_SELF']}?page=project&id=$FormProjectID&pageno=$prevpage'>PREV</a> ";
        }

        //Next we inform the user of his current position in the sequence of available pages.
        $PageNumb = " ( Page $pageno of $lastpage ) ";

        //This code will provide the links for any following pages.
        if ($pageno == $lastpage) {
           $NextLast = " NEXT LAST ";
        } else {
           $nextpage = $pageno+1;
           $Next = " <a href='{$_SERVER['PHP_SELF']}?page=project&id=$FormProjectID&pageno=$nextpage'>NEXT</a> ";
           $Last = " <a href='{$_SERVER['PHP_SELF']}?page=project&id=$FormProjectID&pageno=$lastpage'>LAST</a> ";
        }
    }
} 
```

然后在我的html中我有：

```
<div id="projectview">
        <?php echo $ProjectContent; ?>

        <?php echo $FirstPrev; ?>
        <?php echo $First; ?>

        <?php echo $Prev; ?>

        <?php echo $PageNumb; ?>

        <?php echo $NextLast; ?> 

        <?php echo $Next; ?> 
        <?php echo $Last; ?> 
        <div class="clear-div"></div>
    </div> 
```

例如，在这种情况下输出 2 张图像，但分页链接如下所示：

```
FIRST PREV ( Page 1 of 0 ) NEXT LAST 
```

单击链接不会循环浏览任何其他图像，它仍然显示相同的 2 个图像。

我无法弄清楚我在这里做错了什么。我不明白为什么它说“1 of 0”显然应该有更多结果。

# cakephp - App::import 不适用于控制器

> ID：10872402
> 
> 赞同：0
> 
> 时间：2012-06-03T17:23:56.877
> 
> 标签：cakephp, cakephp-2.0

我需要加载控制器类并尝试：

```
App::import('Controller','AppController'); 
```

或者

```
App::import('Controller','PagesController'); 
```

但这每次都返回false。当我尝试这个时：

```
App::import('Model','AppModel'); 
```

它返回 true，所以它似乎不适用于控制器 - 为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T17:43:50.500

用于`App::import(type, name)`控制器时，无需在导入的名称中包含“Controller”，只需在创建实例变量时即可。

```
App::import('Controller', 'Pages');
$Pages = new PagesController; 
```

# django - Django：允许用户在表单字段中提交有效的 HTML

> ID：10872405
> 
> 赞同：8
> 
> 时间：2012-06-03T17:24:24.227
> 
> 标签：django, django-forms

使用 Django，用户是否可以在表单字段中提交 HTML，保存，然后在模板中呈现 HTML？

一个示例是用户在文本字段中添加一个链接，然后该链接应呈现为文本其余部分中的标签。

用户会输入如下内容：

```
this is a site called <a href="http://stackoverflow.com">SO</a>. 
```

SO 链接将是一个链接，而不是将其呈现为文本。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-03T17:37:47.960

Django 默认转义。您可以将字符串标记为`safe`通过[过滤器或标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#autoescape)来防止自动转义行为。

```
{{ my_text_with_html|safe }}

{% autoescape off %}
    {{ my_test_with_html }}
{% endautoescape %} 
```

如果您接受用户输入的 html，则需要对其进行清理，以便他们无法编写脚本等。为此，只需搜索 python html 清理并在将数据发送到模板之前应用它。

[Python HTML sanitizer/scrubber/filter](https://stackoverflow.com/questions/699468/python-html-sanitizer-scrubber-filter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T17:46:56.293

您可以通过使用[适当的过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#std%3atemplatefilter-safe)标记 HTML 来告诉 Django HTML 是安全的：

```
{{ variable|safe }} 
```

您还可以使用[autoescape 标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#autoescape)来禁用自动转义：

```
{% autoescape off %}
    {{ variable }}
{% endautoescape %} 
```

但是，如果您为其他（未知）用户启用此功能，我强烈建议您使用其他东西，因为从 Javascript 或其他您不想要的 HTML 内容（例如，on* -参数等）。Django 实际上附带了对您可以提供给用户的一些[标记语言的基本支持。](https://docs.djangoproject.com/en/dev/ref/contrib/markup/)我猜[降价](http://en.wikipedia.org/wiki/Markdown)是最受欢迎的。

# c# - EF - 3 层不安全

> ID：10872408
> 
> 赞同：0
> 
> 时间：2012-06-03T17:25:00.337
> 
> 标签：c#, entity-framework, repository-pattern

假设一个经典的 3 层应用程序。在 DAL 中，您有一个 GenericRepository，其中 T 代表您的 POCO 类，它包括一些方法，如 Insert(T entity)、Delete(T entity)、Update(T entity) 等。然后，您的 BLL（业务逻辑类）包含类似 CustomerRepositor 的内容。好吧，所有权利。

现在，图像您的 aspx 页面：

```
var customers = BLL.CustomerRepository.GetAll();
customers.First().Name = "some name"; 
```

不好，您必须通过 CustomerRepository.Update、Insert 或 Delete 方法才能对所有 CRUD 操作执行一些验证。通过这种方式，所有业务逻辑都不会像我认为的那样工作。

我注意到没有人从未考虑过这一点，但我认为这是一个重要的问题。如果您可以绕过它们，那么拥有用于 CRUD 操作的业务方法是没有意义的。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:55:06.447

好吧，让我们开始吧。

```
var customers = BLL.CustomerRepository.GetAll(); 
```

这是上个千年的一段很好的代码。在泛型和 LINQ 出现之前。认真的。

这些天来，我希望它至少是这样的：

```
var customers = BLL.Repository<Customer>.ToList (); //IF you have to materialize 
```

根本不需要“全部”方法；）

> 我错过了什么吗？

在很大程度上理解您仍在应用程序中，因此妥协是可以接受的。这不像您在这里运行应用程序之间的信任边界。其次，您应该编写一个更好的抽象。

```
Repository repository = BLL.GetRepository ();
var customer s repository.Entity<Customer>.ToList ();
customer[0].Name = null;
repository.ValidateU ();
repository.Commit (); 
```

会是更好的抽象。创造不是用“新”完成的，而是用

```
var newCustomer = repository.Create<Customer> (); 
```

然后提交。

可以在 Validate 方法中检查所有验证。

最后，这是关于您如何为存储库设计界面 - 如果您坚持不保留任何状态（这是某些操作的有效模式），那么这会给您带来问题。是的，您可以拥有不进行完全验证的存储库 - 完全有效。这真的取决于。您可能会感到惊讶，但我主要处理的应用程序中，出于性能原因，存储库通常甚至不会在与对象相同的事务中更新，更新是排队然后批处理的，而内存中的版本是相关的。操作。

最后，它表明，对如何设计 DAL 接口进行更多思考是有序的，请停止使用完全过时且只会导致方法蠕变的方法（因为您需要大量的方法，否则只是消失在泛型 + linq 表达式树中。

# character-encoding - gedit中的土耳其语字符编码

> ID：10872413
> 
> 赞同：0
> 
> 时间：2012-06-03T17:25:51.750
> 
> 标签：character-encoding, gedit, turkish

我有一个土耳其文字，但我有一些奇怪的字符，例如：ý 而不是 ı，Ý 而不是 İ 等...我试图将编码转换为 iso 8859-9，但它没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:41:19.190

如果您正在运行 UNIX/Linux 机器，请尝试以下 shell 命令：

```
you@somewhere:~$ file --mime yourfile.txt 
```

它应该输出类似于下面的代码片段，`iso-8859-1`您的系统假定的实际字符集在哪里：

```
yourfile.txt: text/plain; charset=iso-8859-1 
```

现在您可以将文件转换为更灵活的字符集，例如`UTF-8`：

```
you@somewhere:~$ iconv -f iso-8859-1 -t utf-8 yourfile.txt > converted.txt 
```

上面的代码片段指定了要转换`-f`rom 的字符集（应该等于`file`命令的输出）以及要转换`-t`o 的字符集。然后将转换的结果`yourfile.txt`存储在 中`converted.txt`，您应该可以使用它打开`gedit`。

如果这不起作用，您可以将`file`命令的输出以及文件的某些真实行粘贴到评论部分...

# json-rpc - 使用 bash 向 boxeebox 发送 json 命令

> ID：10872416
> 
> 赞同：0
> 
> 时间：2012-06-03T17:25:58.637
> 
> 标签：json-rpc

我正在尝试让我的 callerid 脚本向我的 boxee 盒子连接的电视发送通知。我已经在我的几台计算机上使用 mgetty 和 notify-send 使脚本正常工作。

这是我的 cidscript.sh，它由 mgetty 触发

```
#!/bin/sh

# send message to computer
ssh -o ConnectTimeout=10 mrplow@192.168.1.10 "DISPLAY=:0 notify-send 'Phone call from...      $CALLER_NAME      $CALLER_ID'" &
sleep 0.2
ssh -o ConnectTimeout=10 christine@192.168.1.3 "DISPLAY=:0 notify-send 'Phone call from...      $CALLER_NAME      $CALLER_ID'" &
sleep 0.2
ssh -o ConnectTimeout=10 mrplow@192.168.1.120 "DISPLAY=:0 notify-send 'Phone call from...      $CALLER_NAME      $CALLER_ID'" &
sleep 0.2
su mrplow -c "DISPLAY=:0.0 notify-send 'Phone call from...      $CALLER_NAME      $CALLER_ID'" &
sleep 5

# update logs
echo `date +"%F %a %r"`"|$CALLER_ID|$CALLER_NAME" >> /home/mrplow/answering_machine/logs/incoming-calls.log
scp -o ConnectTimeout=10 /home/mrplow/answering_machine/logs/incoming-calls.log christine@192.168.1.3:/home/christine/Desktop/incoming-calls.log

sleep 0.2

exit 1 
```

我认为 json rpc 将是让它工作的唯一方法我已经设法在原始端口 9090 上远程登录到 boxee 盒子然后配对我的设备

所以脚本需要发送连接命令

```
{"jsonrpc": "2.0", "method": "Device.Connect", "params":{"deviceid": "############"}, "id": 1} 
```

然后是实际的通知

```
{"jsonrpc": "2.0", "method": "GUI.NotificationShow", "params":{"msg" : "Phone call from...      $CALLER_NAME      $CALLER_ID"}, "id": 1} 
```

我试过这个无济于事

```
curl -d '{"jsonrpc": "2.0", "method": "Device.Connect", "params":{"deviceid": "00112fa696c9"}, "id": 1}\
{"jsonrpc": "2.0", "method": "GUI.NotificationShow", "params":{"msg" : "test"}, "id": 1}' -i 192.168.1.6 9090 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T02:24:31.947

弄清楚了...

```
echo { \"jsonrpc\": \"2.0\", \"method\": \"Device.Connect\", \"params\":{\"deviceid\": \"############\"}, \"id\": 1}\
{ \"jsonrpc\": \"2.0\", \"method\": \"GUI.NotificationShow\", \"params\":{\"msg\" : \"Phone call from...      $CALLER_NAME      $CALLER_ID\"}, \"id\": 1 } | telnet 192.168.1.6 9090 &> /dev/null 
```

# iphone - iOS中UI控件状态管理的设计模式

> ID：10872421
> 
> 赞同：9
> 
> 时间：2012-06-03T17:27:07.443
> 
> 标签：iphone, objective-c, ios, user-interface

与此[问题](https://stackoverflow.com/questions/3225596/uibutton-how-to-prevent-double-actions-taking-place)类似，但我正在寻找通用解决方案或设计模式或框架。

问：如何在我的 iOS 应用程序中自动将状态管理添加到所有 UI 控件中，而无需重写现有控件的类？

例子：

例如，当我点击 a`UIButton`时，它将创建一个新的`UIWebView`显示 Google 主页。这很容易，但是当用户有时会出现问题..单击按钮**太快**，因此将显示两个 webview。

为了解决这个问题，我需要创建一个包含 webview 的单例类，并且有一个状态变量`isOpended`，如果它是真的，重用现有的 webview 而不是创建一个新的。

但问题是：如果我希望在其他控件中也有这种行为，那么我需要创建许多单例类。我只是在想是否有更好的方法来处理这个问题，而无需重新发明轮子。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T19:19:53.060

我认为你在这里解决了错误的问题。为什么不禁用按钮，直到 UIWebView 完成处理。这样用户就不能单击它两次。

```
- (IBAction)showMapHomepage:(UIButton*)sender
{
    sender.enabled = NO;
    [self taskThatTakesALongTimeWithCompletion:^{
        sender.enabled = YES;
        // Finish processing
    }];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T04:30:49.843

您误解了解决问题的最佳方法。首先，您永远不应该发现自己处于创建*许多单例*的情况。单例是一种必要的邪恶，但你不应该过度使用或滥用它们。[这是一篇](http://cocoawithlove.com/2008/11/singletons-appdelegates-and-top-level.html)关于objective-c中单例的好文章。

当用户单击您的按钮时，您可以采取多种方法来防止显示第二个 UIWebView。

正如其他人所说，一种解决方案是禁用该按钮，以便用户无法“双击”它。你这样做使用：

```
button.enabled = NO; 
```

您还可以使用以下方法隐藏您的按钮：

```
button.hidden = YES; 
```

或者，在包含 UIButton 的类的标题中，您可以创建一个布尔值来处理按钮是否被按下的逻辑；

```
// declare this in your header
BOOL buttonPressed;

// this is the IBAction that your button hooks up to
- (IBAction)createWebViewButtonPressed:(id)sender {
    if(!buttonPressed) {
        buttonPressed = YES;
        // insert code here to create your UIWebView
    }
} 
```

同样，有很多方法可以完成您正在尝试做的事情。您只需要确定哪种方法最适合您。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T20:01:22.587

我同意其他答案，如果您不希望它被激活两次，您可能应该禁用该控件。但是，如果您确实想要回答有关可以在所有控件上使用的通用模式的实际问题，那么您可以使用关联对象...

```
- (IBAction)buttonAction:(UIButton*)sender
{
    NSString* webViewKey = @"AssociatedWebView";
    // See if there is web view already
    id webView = objc_getAssociatedObject(sender, webViewKey);
    if(webView == nil)
    {
        // There is no existing web view, create it
        webView = [self theWebView];
        // Associate it with the button
        objc_setAssociatedObject(sender, webViewKey, webView, OBJC_ASSOCIATION_RETAIN);
        // Add the web view
        [self.view addSubview:webView];
    }
} 
```

上面显示了一种将对象关联到实例的通用方法，`UIButton`因此您可以检查它是否已经关联并重新使用现有的。如果您打算以问题中未完全描述的其他方式使用它，我会提供此答案，但实际上，您可以使用控制器的属性`webView`来延迟加载（`webView`如果还没有）加载。

如果您**真的**想模拟您在问题中讨论的单例样式（这样您可以有许多`UIButton`实例，如果它已经存在，它们都共享同一个`webView`对象），那么您可以将 关联`webView`到`[UIButton class]`对象甚至`[UIControl class]`对象而不是您的特定实例。您可以通过替换上面代码中的`sender`with来做到这一点。`[UIControl class]`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-12T09:38:47.030

一种可能的解决方案是将指向 webview 的指针存储在 viewController 的属性中。在 webview 的 getter 中，如果 webview 尚不存在，则创建它。按钮操作只需要显示 webview，因为如果 webview 已经存在，它将重新显示 webview，如果不存在，它将创建 webview。完成 webview 后，只需将其设置为 nil。

# cordova - Cordova 1.7 在模拟器上构建成功，在设备上失败

> ID：10872422
> 
> 赞同：3
> 
> 时间：2012-06-03T17:27:09.737
> 
> 标签：cordova

我已经使用 PhoneGap 1.0 很长时间了，它在模拟器和我的设备上都没有问题。（即，我做了配置文件等）现在我正在尝试使用 Phonegap/Cordova 1.7 做同样的事情，并且构建在模拟器上成功，但在配置的测试设备（iPhone 3GS - iOS 4.3）上没有成功。无法弄清楚发生了什么。这是一个干净的新项目。

我在构建失败时收到的错误消息是： `Command /usr/bin/lipo failed with exit code 1`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T07:01:11.297

我通过将 Project > Build Settings > Architectures 中的 Valid Architectures 的值从默认的“armv6 armv7”更改为“armv7”，解决了这个 Phonegap/Cordova 问题。

# c# - asp.net listview 不更新其页面

> ID：10872426
> 
> 赞同：0
> 
> 时间：2012-06-03T17:27:20.750
> 
> 标签：c#, asp.net, listview

我有一个包含 12 个条目的列表视图。

每页设置为最多显示 5 页，因此有 3 页。

现在，每次我单击页码时，我都必须单击它两次才能真正进入它，而且它始终只显示前 5 个条目。例如，在第 1 页和第 2 页上，它显示相同的前 5 个条目（条目 1 - 5），在第 3 页上它只显示 2 个条目，但它们是前 2 个条目（条目 1 和 2）而不是最后一个（即条目 11 和12)

为什么不更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:37:59.737

您需要正确实现分页。在您的示例中，如果您想显示第 2 页，则跳过前 5 个条目（位于第 1 页中），然后获取接下来的 5 个（页面大小）条目并显示它们。

使用 LINQ 这看起来像：

```
entries.Skip(pageNumber * pageSize).Take(pageSize); 
```

# css - 将图像调整为 div 并将其居中

> ID：10872427
> 
> 赞同：0
> 
> 时间：2012-06-03T17:27:38.890
> 
> 标签：css, image, html

好吧，我有一个尺寸宽度：200 像素和高度：110 像素的 div 支架。

当我加载图像时，通常它会超过这样的尺寸，所以我需要根据图像的尺寸通过宽度或高度将图像调整为这样的内容。所以，如果用with调整，可能会出现三种情况：

1.-高度高于110px，所以div溢出设置为隐藏，需要垂直居中。

2.-高度等于110px，没问题。

3.-（**问题**）高度小于110px。在这种情况下我应该怎么做？因为我想覆盖所有的 div 内容。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:29:51.537

如果将图像加载为容器的背景，则可以随意使用`background-size: cover`or`background-size: contain`并将`background-position: center center`其保持在中间，而不管大小。

或者，您可能想要使用表格单元格，因为这些允许内容在内部垂直对齐（使用带有一个单元格的表格，或`display: table-cell`在容器上）。

# xcode - XCode (iPhone) 将 JSON 对象发布到 cakePHP 服务器？

> ID：10872428
> 
> 赞同：0
> 
> 时间：2012-06-03T17:27:54.343
> 
> 标签：xcode, cakephp

我的服务器上运行了 cakePHP。我试图让我的 iPhone 应用程序向服务器发布一个 JSON 对象，然后让服务器回显它。（暂时保持简单。）我已经使用普通 URL 访问了很多服务器，并获得了包括 JSON 对象在内的视图。这是我第一次尝试将 JSON 发布到服务器。但它不起作用。它总是回显一个空值。

**在我的 iPhone 应用程序中**

```
NSDictionary* myDict = [NSDictionary dictionaryWithObjects:dictObjects forKeys:dictKeys];

NSData* jsonObject = [NSJSONSerialization dataWithJSONObject:myDict options:NSJSONWritingPrettyPrinted error:nil];

NSData *requestData;

// I've tried it both ways with this stringified or not
/*
NSString* jsonString = [[NSString alloc]initWithData:jsonObject encoding:NSUTF8StringEncoding];
requestData = [NSData dataWithBytes:jsonString length:[jsonString length]];
*/
requestData = [NSData dataWithData:jsonObject];

urlString = [NSString stringWithFormat:@"http://www.myServer.com/json_tests/echo_json"];
NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

[urlRequest setHTTPMethod:@"POST"];
[urlRequest setHTTPBody:requestData];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[urlRequest setValue:[NSString stringWithFormat:@"%d",[jsonObject length]] forHTTPHeaderField:@"Content-Length"];
currentConnection = [NSURLConnection connectionWithRequest:urlRequest delegate:self]; 
```

**我的 CakePHP 服务器**

这是在我的控制器文件中

```
public function echo_json() {
   $rawData = $this->params['form'];
   $decodedData = json_decode($rawData);

   $this->layout = 'json';
   $this->set(compact('rawData', 'decodedData'));
} 
```

我的观点已经...`echo $rawData; echo json_encode($decodedData);`

但是你知道这里没有显示原始的 html 源代码。

# c# - MvvM 模型启动对话框

> ID：10872432
> 
> 赞同：1
> 
> 时间：2012-06-03T17:28:15.833
> 
> 标签：c#, wpf, mvvm, dialog

我知道有很多关于 ViewModel 应该如何打开对话框、Model 如何启动对话框的问题？

模型是否应该调用一个对话服务，它调用视图模型的对话服务，一直到视图？模型是否应该引用 mvvm-light 工具包？

特别是针对我的情况 - 当我的模型被传递一些数据以恢复/解释和构建模型对象时（我认为这应该是模型的工作） - 有可能引发错误。

* * *

更新 #1：根据 fmunkert 的评论，我接受了以下答案。我意识到我问错了问题，根本问题是为模型设计一个范式来发出错误信号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:29:37.570

由于 MVVM 不是标准，并且由于没有明确的权威来决定 MVVM 中什么是正确的，什么是错误的，所以您可以以您认为合适的任何方式实现对话框，只要您不直接从ViewModel 或模型。

在我最近编写的应用程序中，我使用了以下两种方法（使用我自己的 MVVM 框架库）：

*   模态对话框通过“服务”从 ViewModel 调用。即 ViewModel 有一种方法可以通过方法获取`IFrontend`指针`ShowModalDialog()`。有两种通用实现`IFrontend`：一种用于 WPF（打开对话框），另一种用于单元测试环境（仅模拟对话框）。

*   有时可以在 ViewModel 不知道的情况下打开非模态对话框。例如，如果您有一个 ViewModel 用于需要能够打开字体选择对话框的表单，那么这是一个用户界面细节，而 ViewModel 确实需要了解该细节。ViewModel 不关心字体是使用对话框还是使用下拉列表选择的。

如果您使用的是 MVVM Light 或 Prism 等第三方库，您可能应该遵循库文档中的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:17:23.137

我不确定您是否仍在寻求任何帮助，但我在对话框方面采取的方法是让视图模型引发视图可以处理的事件。视图现在可以做任何它想要将数据获取到视图模型的操作，因此您可以毫无问题地在视图中显示对话框。您将对话框中的响应传递给事件的 EventArgs，以便视图模型拥有它正在寻找的数据以便继续。

例如：

```
Public Class View

   Private WithEvents _VM AS new ViewModel()

   Private Sub _VM_AddingItem(Sender AS Object, E AS ViewModel.ItemEventArgs)
      Dim Dialog As new SomeDialog()

      If Dialog.ShowDialog then 
         E.Item = Dialog.Item
      Else
         E.Cancel = True
      End If
   End Sub 

End Class

Public Class ViewModel 
   Public Sub AddItem(Item AS Object) 
       Do Some Work here 
    End Sub 

    Private Sub _AddItem() 
       Dim Args AS New ItemEventArgs()

       OnAddingItem(Args)

       If not Args.Cancel Then AddItem(Args.Item)
    End Sub 

    Protected Sub OnAddingItem() 
       RaiseEvent AddingItem(me, ItemEventArgs)
    End Sub

    Public Event AddingItem(Sender AS Object, E As ItemEventArgs)

    Public Class ItemEventArgs
       Public Property Item AS Object
       Public Property Cancel AS Boolean = false
    End Class
End Class 
```

然后只需将您的命令连接到`_AddItem`仅引发事件以收集该方法所需数据的私有`AddItem`方法。我希望这有帮助 ：）

# jquery - asp.net mvc中的jQuery水平滚动

> ID：10872434
> 
> 赞同：0
> 
> 时间：2012-06-03T17:28:41.223
> 
> 标签：jquery, asp.net-mvc-3

是否可以在 asp.net mvc 中实现 jQuery 水平滚动？我认为在这种情况下，它是同一个页面，其中包含不同的 div。但在我的情况下，单击按钮我想通过水平滚动加载不同的页面。

jQuery 示例：

[http://tympanus.net/Tutorials/WebsiteScrolling/index.html](http://tympanus.net/Tutorials/WebsiteScrolling/index.html)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:34:59.423

您可以尝试在 css 中创建水平滚动动画，然后当单击按钮时，在通过 ajax 加载下一页时显示该动画，一旦页面完成下载，使用下一个 div 中的页面内容填充 dom，然后结束css动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T21:30:18.770

凉爽的，

查看了您的参考页面（http://tympanus.net/Tutorials/WebsiteScrolling/index.html），它真正所做的只是将 div 滚动到放置在视口之外的视图中。有许多滚动 jquery 插件可以做到这一点，在您的情况下，您所需要的只是与参考页面上的核心概念类似的设置。我看了看，这就是基本上发生的所有事情：

```
<script type="text/javascript">
    $(function () {
        $('ul.nav a').bind('click', function (event) {
            var $anchor = $(this);
            /*
            if you want to use one of the easing effects:
            $('html, body').stop().animate({
            scrollLeft: $($anchor.attr('href')).offset().left
            }, 1500,'easeInOutExpo');
            */
            $('html, body').stop().animate({
                scrollLeft: $($anchor.attr('href')).offset().left
            }, 1000);
            event.preventDefault();
        });
    });
</script> 
```

即对于该演示中的 3 个区域，通过 jquery/js 脚本调用了 3 个非常不同的“动作”。充其量，该演示确实将您的问题简化为一种非常清晰且可演示的方法来解决您的问题-仔细查看它，答案就在那里！如果需要 ajax，那么只需扩展上述核心代码以包含它（当然还有 html 语义）。

希望这会有所帮助，因为我确信无论如何你已经完成了 90% 的工作。

# javascript - 如何将 .find() 与使用 .get() 的数据一起使用？

> ID：10872435
> 
> 赞同：0
> 
> 时间：2012-06-03T17:29:08.930
> 
> 标签：javascript, ajax, jquery

我在使用 .find() 时遇到问题，因为在控制台中它说 .find 不是一个函数。

我的代码如下所示：

```
$.get('/est.html', function(data) {
$.each(['rental', 'deposit', 'data', 'build'], function(i, key) {
    $('#lot-' + key).html(data.find('#est-' + key));
});
}, 'html'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:31:55.507

你只需要用 $() 包装使它成为一个 jquery 对象：

```
$(data).find('..'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T17:32:03.573

`find`应该适用于 jQuery 对象/选择器。所以用`$`

```
 $('#lot-' + key).html($(data).find('#est-' + key)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T17:32:31.347

```
 $('#lot-' + key).html(data.find('#est-' + key)); 
```

应该

```
 $('#lot-' + key).html($(data).find('#est-' + key)); 
```

# function - 函数参数在 knockout.js 中未定义

> ID：10872436
> 
> 赞同：0
> 
> 时间：2012-06-03T17:29:16.463
> 
> 标签：function, knockout.js, design-patterns, undefined, revealing-module-pattern

我正在使用 Revealing Module Pattern 在我的 knockout.js 代码中获取一些结构。这是一个非常简单的示例目标：返回 Object 的 Name-Property 的值。问题：函数参数 x 未定义。

[http://jsfiddle.net/ThomasDeutsch/8hzhp/](http://jsfiddle.net/ThomasDeutsch/8hzhp/)

这里到底有什么问题？请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:37:19.487

也许你应该写

```
x.Name 
```

代替

```
x.getElementsByName('Name') 
```

因为我看不到 x 应该从哪里获取此方法，因为 x 不是文档树的元素。但我不是这方面的专家。

好的，这对我有用：

```
// My Model
function Customer(id, name, lastname) {
    this.Id = ko.observable(id);
    this.Name = ko.observable(name);
    this.LastName = ko.observable(lastname);
}

// My ViewModel
ViewModel = (function () {
    var customer = new Customer(1, "Thomas", "D")
    var getName = ko.computed(function () {
        return customer.Name ();
    })
    ;
    return {
        getName: getName
    };
})();

ko.applyBindings(ViewModel); 
```

return 语句中的 getName 必须是函数，而不是函数的结果。可能框架（我不知道）调用函数（不带参数）以获得值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:13:48.640

I have the solution. The Problem was that i have not defined a function. ko.computed will not do the job. So this is the solution: [Knockout.js: Function parameter undefined](https://stackoverflow.com/questions/10873214/knockout-js-function-parameter-undefined)

# eclipse - 如何在 Eclipse IDE 中默认将 Scala 项目作为 Scala 应用程序运行？

> ID：10872438
> 
> 赞同：6
> 
> 时间：2012-06-03T17:29:41.513
> 
> 标签：eclipse, scala, scala-ide

我是 Eclipse IDE 的新手，问题是如何在默认情况下将 Scala 项目作为 Scala 应用程序运行？当我按 ⌘R 键运行项目时，它总是询问如何运行它，作为 Scala 或 Java 应用程序。有没有办法跳过这个并在默认情况下始终将其作为 Scala 运行？

我想它与启动配置有某种关系，但是当我尝试为项目创建新的启动配置时，它没有给我 Scala 的选项：只有 Java 小程序和 Java 应用程序显示为选项。

我提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:41:24.123

`Window > Preferences > General > Keys`

向下滚动并选择`Run Scala Application`

编辑绑定到`⌘R`或任何您想要的。

这会更改整个工作区的绑定，因此它不会区分 Java 和 Scala 应用程序。如果跑步者有一个可以勾选以选择默认值的框，那就太好了，但这是一个不错的解决方法。

# javascript - 我的代码适用于 Firefox，但不适用于 Internet Explorer

> ID：10872442
> 
> 赞同：0
> 
> 时间：2012-06-03T17:30:23.783
> 
> 标签：javascript

此代码在 Firefox 中运行良好，但 IE9 返回错误“_area”未定义

```
function dbasetype(){

    var dbasedata = document.forms[0]._dbase_name.value;
    dbasedata = dbasedata.toUpperCase();
    dbasedata = dbasedata.replace(/\s/g, "");

    if  (dbasedata.indexOf("UK_CONTACTS")==-1) {
        _area.value = _dbase_name.value;            
    } else {
        setarea();
    } 
```

在您的回复之后，我现在已更改为此代码并且它可以工作。我无法弄清楚为什么它在没有定义的情况下在 Firefox 中工作。我猜它是从调用这个函数的函数中携带它们的？

```
function dbasetype(){

var dbasedata = document.forms[0]._dbase_name.value;
        dbasedata = dbasedata.toUpperCase();
        dbasedata = dbasedata.replace(/\s/g, "");

var area = document.forms[0]._area;     
var _dbase_name = document.forms[0]._dbase_name;

if  (dbasedata.indexOf("UK_CONTACTS")==-1) {
        area.value = _dbase_name.value;         
     } else { setarea(); }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:32:34.257

在哪里`_area`定义？`_area`您是否依赖页面上元素 ID 的非标准行为？如果是这样切换到`document.getElementById('_area')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:35:29.020

就我而言，IE 不支持`document.forms[]`数组...

# android - Android自定义Json listview - 1搜索和2全选

> ID：10872443
> 
> 赞同：1
> 
> 时间：2012-06-03T17:30:42.097
> 
> 标签：android, android-listview

嗨，我是安卓新手。

1）我有一个带有名称和复选框的列表视图。我想在此列表上有一个搜索功能，用户可以在其中搜索特定名称。

2）我希望用户能够一键选择列表视图中的所有名称。当用户按下 selectAll 按钮时，应选中所有复选框。

我是一个完全的初学者，完全糊涂了。

谢谢

```
public class NewstipsActivity extends Activity {
CheckboxAdapter listItemAdapter;
ArrayList<String> listData;

Button getValue;
Button getchoice;
Button selectAll;
EditText edt;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    getchoice = (Button) findViewById(R.id.getchoice);
    getValue = (Button)findViewById(R.id.get_value);
    selectAll = (Button)findViewById(R.id.selectAll);

    edt=(EditText)findViewById(R.id.EditText01);

    ListView list = (ListView) findViewById(R.id.list);        
    ArrayList<HashMap<String, Object>> listData = new ArrayList<HashMap<String,Object>>();

    JSONObject json = getJSON.getJSONfromURL("http://test.com/myurl.php");

    try {

        JSONArray results = json.getJSONArray("results");

        for(int i = 0; i < results.length(); i++){
            // creating new HashMap
            HashMap<String, Object> map=new HashMap<String, Object>();
            JSONObject e = results.getJSONObject(i);

            // adding each child node to HashMap key => value
            map.put("n_id",  String.valueOf(i));
            map.put("friend_image", R.drawable.icon);
            map.put("friend_username", " " + e.getString("n_newspaper"));
            map.put("friend_id", " " +  e.getString("n_id"));
            map.put("selected", false);
            listData.add(map);
        }

    } catch (JSONException e) {
        e.printStackTrace();
    }

    listItemAdapter = new CheckboxAdapter(this, listData);
    list.setAdapter(listItemAdapter);

    //problem1 search
    list.setTextFilterEnabled(true);
    edt.addTextChangedListener(new TextWatcher()
    {
        @Override
        public void onTextChanged( CharSequence s, int arg1, int arg2, int arg3)
        {

            Toast.makeText (NewstipsActivity.this, "On Search", Toast.LENGTH_LONG).show();

        }

        @Override
        public void beforeTextChanged( CharSequence arg0, int arg1, int arg2, int arg3)
        {

        }

        @Override
        public void afterTextChanged( Editable arg0)
        {

        }
    });

    getValue.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub          
            HashMap<Integer, Boolean> state =listItemAdapter.state;         
            String options="Newspapers: ";

            for(int j=0; j<listItemAdapter.getCount(); j++){
                System.out.println("state.get("+j+")=="+state.get(j));
                if(state.get(j)!=null){
                    @SuppressWarnings("unchecked")
                    HashMap<String, Object> map=(HashMap<String, Object>) listItemAdapter.getItem(j);
                    String username=map.get("friend_username").toString();  
                    String id=map.get("friend_id").toString();  
                    options+="\n"+id+"."+username;
                }               
            }

            Toast.makeText(getApplicationContext(), options, Toast.LENGTH_LONG).show();

            Intent intent = new Intent(NewstipsActivity.this, NewstipsPhoto.class);
            startActivity(intent);
        }

    });

    getchoice.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {

            Intent intent = new Intent(NewstipsActivity.this, NewstipsPhoto.class);
            startActivity(intent);
        }
    });

    selectAll.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    });

}

public class CheckboxAdapter extends BaseAdapter {

    Context context;
    ArrayList<HashMap<String, Object>> listData;    
    HashMap<Integer, Boolean> state = new HashMap<Integer, Boolean>();      

    public CheckboxAdapter(Context context, ArrayList<HashMap<String, Object>> listData) {
        this.context = context;
        this.listData = listData;   
    }

    @Override
    public int getCount() {

        return listData.size();
    }

    @Override
    public Object getItem(int position) {

        return listData.get(position);
    }

    @Override
    public long getItemId(int position) {

        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        LayoutInflater mInflater = LayoutInflater.from(context);
        convertView = mInflater.inflate(R.layout.item, null);

        ImageView image = (ImageView) convertView.findViewById(R.id.friend_image);
        image.setBackgroundResource((Integer) listData.get(position).get("friend_image"));

        TextView username = (TextView) convertView.findViewById(R.id.friend_username);
        username.setText((String) listData.get(position).get("friend_username"));

        TextView id = (TextView) convertView.findViewById(R.id.friend_id);
        id.setText((String) listData.get(position).get("friend_id"));

        CheckBox check = (CheckBox) convertView.findViewById(R.id.selected);        
        check.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                // TODO Auto-generated method stub
                if (isChecked) {
                    state.put(position, isChecked);                 
                } else {
                    state.remove(position);             
                }
            }
        });
        check.setChecked((state.get(position) == null ? false : true));
        return convertView;
    }
} 
```

}

# java - JavaFX 中的 MVC 模式与 Scene Builder

> ID：10872444
> 
> 赞同：14
> 
> 时间：2012-06-03T17:30:42.457
> 
> 标签：java, model-view-controller, architecture, javafx

我是 JavaFX 的新手，考虑到我当前的设置，我正在努力创建一个合适的 MVC 架构。我使用 Scene Builder 一起单击了一个 UI，并指定了一个 Controller 类。

启动：

```
public class Portal extends Application {
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("PortalUI.fxml"));

        stage.setTitle("Portal");
        stage.setScene(new Scene(root));
        stage.show();
    }
} 
```

Controller 类包含其余的代码。

```
public class AccommodationPortalView implements Initializable {
    @Override
    public void initialize(URL url, ResourceBundle resources) {
    // Work here.
    }
} 
```

我的教授要求我进一步区分这个应用程序的关注点和责任。Controller 不仅管理状态和与后端对话，还更新 View。

我的第一反应是让 Controller 类成为 View 并为 Controller 和 Model 创建另外两个类。

但是，我不知道如何连接这些部分。例如，我从不需要实例化视图，因此没有可以传递给控制器​​的视图实例。接下来，我尝试将它们全部设为单例，并简单地让 Controller 在运行时获取它们，但这给了我一个错误。

```
public class Portal extends Application {
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("PortalUI.fxml"));

        stage.setTitle("Portal");
        stage.setScene(new Scene(root));
        stage.show();

        // Controller gets a View and Model instance in initialize();
        // Error: Instantiation and Runtime Exception...
        PortalController.INSTANCE.initialize();
    }
} 
```

如何使用当前配置正确设置 MVC 模式？是否需要不同的架构？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-03T21:20:51.573

Your,
-- **View**`Stage`是JavaFX 平台在启动时提供的主要视图。这个阶段只有一个`Scene`（你已经创建和设置），它又具有一个父节点内容`root`（你的变量）。该`root`节点由 FXMLLoader 设置，代表“PortalUI.fxml”文件中定义的布局/节点结构。
换句话说`Stage -> Scene -> PortalUI.fxml(root)`，将定义视图部分。

-- **Controller是您在 PortalUI.fxml 文件中使用****fx:controller=" "**属性实现`Initializable`和指定的类。您在此处指定的类（我想是 PortalController）将由 FXMLLoader 创建并调用其方法。即在加载 PortalUI.fxml 文件时会创建 Controller，因此您不需要自己创建和初始化它。要从 FXMLLoader 获取控制器的创建/初始化实例，请查看[Accessing FXML 控制器类](https://stackoverflow.com/q/10751271/682495)。 **`initialize()`**

 **--**模型**是控制器存储和管理的底层数据结构。它可以是任何代表“数据”的东西。例如，Person、PortalInfo 等类。**

# html - Css - 跨浏览器的样式问题 - 导航栏

> ID：10872445
> 
> 赞同：0
> 
> 时间：2012-06-03T17:31:06.177
> 
> 标签：html, css

我一直在思考如何解决这个问题，但我不知道该怎么做才能解决它......

问题是在 Chrome 上我的导航和 css 样式可以完美运行，但在其他浏览器上它看起来很糟糕。

在 Chrome 上 - 看起来正确！

在 IE 上 - 我失去了导航栏样式

在 Firefox 上 - 导航栏在那里，但没有显示任何站点图像

我的网站在这里：

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T20:20:07.737

我马上就看到了一些问题。您的图像未显示，因为相对路径的格式不正确。你有“imgVideoTagger\CenterCredits.png”（带有反斜杠）。它应该是一个正斜杠。此外，对于 HTML 中的宽度和高度属性，它应该只是数字，因此应该是“315”而不是“315px”。

您还会遇到一些基本的 HTML 错误，例如杂散的结束标记。

为了调试您的问题，我建议使用 W3C html 验证器服务：http: [//validator.w3.org/](http://validator.w3.org/)

修复您发现的错误也可以解决您在 IE 中的导航问题。

此外 - 由于您要声明您的页面 HTML 5，我建议利用更多的 HTML5 语义优势，放弃任何已贬值的标签，如`<center>`，并使用诸如 modernizr 之类的东西，以便 IE 可以识别那些较新的元素。这也可能有助于导航，因为`<nav>`它是一个 HTML5 标记。

# php - 如何使用本地服务器的 PHP API 在 Facebook 墙上发布消息？

> ID：10872446
> 
> 赞同：1
> 
> 时间：2012-06-03T17:31:11.473
> 
> 标签：php, facebook, facebook-graph-api

如何使用本地服务器的 PHP API 在我的 Facebook 墙上发布消息？
我使用本地 PHP 服务器 Apache。

请给我一个例子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:36:11.190

您调用连接和[文档](http://developers.facebook.com/docs/reference/api/user/#posts)`/me/feed`中调用的正确参数

```
$parameters = array('message' => 'Test message');

$facebook->api('/me/feed/','post', $parameters); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T17:35:14.927

那当然是可能的。在哪里运行 PHP 并不重要。您只需为您的个人资料提供一个访问令牌即可。也许您必须将开发人员中心的 facebook 应用程序的 url 设置为您的 localhost url。

# c - 您可以使用 LD_PRELOAD 更改结构吗

> ID：10872449
> 
> 赞同：2
> 
> 时间：2012-06-03T17:31:23.353
> 
> 标签：c, linux, gcc

> **可能重复：**
> [是否可以 LD_PRELOAD 使用不同参数的函数？](https://stackoverflow.com/questions/10871938/is-it-possible-to-ld-preload-a-function-with-different-parameters)

我有一个结构，我们称之为**my_struct**，声明如下。

```
struct my_struct
{
 int a;
 int b;
} 
```

出于某种原因，我想为其添加一个新字段，因此我想对其进行如下更改。

```
struct my_struct
{
 int a;
 int b;
 int c;
} 
```

假设我在我的共享对象库中执行此操作，然后我使用 LD_PRELOAD 运行程序。我的程序将使用第二个定义还是原始定义。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T17:32:22.073

不，原始代码不会使用新定义。想象一下，如果确实如此，那么必须改变什么。首先，`my_struct`堆上的每个都必须扩展以包含新字段。这可能意味着必须调整数据部分的大小，并且所有向前移动的数据都需要重新定位其引用。`sizeof struct my_struct`，在编译时评估的值将与新定义不一致。这些只是使您尝试做的事情变得不可能的一些原因（至少在您尝试的方式上）。

针对旧定义编译和链接的原始代码将继续使用旧的`my_struct`. **共享对象中的**任何新代码都将根据新定义进行编译并使用新定义，因此将具有一个`c`字段。

原始程序编译完成后，它对`my_struct`. 编译器仅使用该信息来生成访问结构成员的偏移量，并允许它知道如何在内存中布局。信息可能仍以符号的形式提供，但这不会影响定义的获取方式。与函数解析不同，结构的代码/数据生成和解析严格来说是编译时操作。

# wolfram-mathematica - 使用 Manipulate 的悬链线

> ID：10872464
> 
> 赞同：2
> 
> 时间：2012-06-03T17:32:44.117
> 
> 标签：wolfram-mathematica, curve

我想在 Mathematica 中表示悬链线曲线，然后允许用户操作每个参数，例如悬挂点的位置 (A,B)、电缆的重量、重力等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:08:55.333

我会这样做：

首先，定义悬链线：

```
catenary[x_] := a*Cosh[(x - c)/a] + y 
```

现在我可以找到参数`a`和这条曲线的数值，`c`使用：`y``FindRoot`

```
Manipulate[
 Module[{root},
  (
   root = FindRoot[
             {
                catenary[x1] == y1, 
                catenary[x2] == y2
             } /. {x1 -> pt[[1, 1]], y1 -> pt[[1, 2]], x2 -> pt[[2, 1]], y2 -> pt[[2, 2]], a -> \[Alpha]}, 
             {{y, 0}, {c, 0}}];
   Show[
    Plot[catenary[x] /. root /. a -> \[Alpha], {x, -2, 2}, 
     PlotRange -> {-3, 3}, AspectRatio -> 3/2],
    Graphics[{Red, Point[pt]}]]
   )], {{\[Alpha], 1}, 0.001, 10}, {{pt, {{-1, 1}, {1, 1}}}, Locator}] 
```

或者，您可以准确求解参数：

```
solution = Simplify[Solve[{catenary[x1] == y1, catenary[x2] == y2}, {y, c}]] 
```

然后在 Manipulate 中使用这个解决方案：

```
Manipulate[
 (
  s = (solution /. {x1 -> pt[[1, 1]], y1 -> pt[[1, 2]], 
      x2 -> pt[[2, 1]], y2 -> pt[[2, 2]], a -> \[Alpha]});
  s = Select[s, 
    Im[c /. #] == 0 && 
      Abs[pt[[1, 2]] - catenary[pt[[1, 1]]] /. # /. a -> \[Alpha]] < 
       10^-3 &];
  Show[
   Plot[catenary[x] /. s /. a -> \[Alpha], {x, -2, 2}, 
    PlotRange -> {-3, 3}, AspectRatio -> 3/2],
   Graphics[{Red, Point[pt]}]]
  ), {{\[Alpha], 1}, 0.001, 10}, {{pt, {{-1., 1.}, {1., 0.5}}}, 
  Locator}] 
```

不过，该`FindRoot`版本更快、更稳定。结果如下所示：

![在此处输入图像描述](../Images/e6c889cbd7d0cc610c83d75e51007d3e.png)

为了完整起见：也可以通过 3 点找到悬链线：

```
m = Manipulate[
  Module[{root},
   (
    root = 
     FindRoot[
      catenary[#[[1]]] == #[[2]] & /@ pt, {{y, 0}, {c, 0}, {a, 1}}];
    Show[
     Plot[catenary[x] /. root, {x, -2, 2}, PlotRange -> {-3, 3}, 
      AspectRatio -> 3/2],
     Graphics[{Red, Point[pt]}]]
    )], {{pt, {{-1, 1}, {1, 1}, {0, 0}}}, Locator}] 
```

![在此处输入图像描述](../Images/ac0f6ad289629dc1b15eac531e98e431.png)

# java - 如何进一步优化此代码

> ID：10872465
> 
> 赞同：0
> 
> 时间：2012-06-03T17:32:50.590
> 
> 标签：java, algorithm

如何进一步优化这段代码。如果可能的话，请建议我通常应该记住的内容。

```
public void funct(String str, int[] arr) {
        String temp = "saved";
        for (int i = 0; i < arr.length; i++) {
            if (str.equals(temp) && arr[i] * 2 > 10) {
                Integer num = new Integer(arr[i]);
                num = num * 2;
                System.out.print(num.toString());
            }
        }
    } 
```

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T17:38:01.000

您的代码没有多大意义，例如`str`，`temp`并不真正需要。所以优化它们的第一步是删除它们......也使用`int`，而不是`Integer`：

```
public void funct(int[] arr) {
        for (int i = 0; i < arr.length; i++) {
            if (arr[i] > 5) {
                System.out.print(arr[i] * 2);
            }
        }
    } 
```

如果您关心代码的简洁性：

```
public void funct(int[] arr) {
    for(int i: arr) {
        if (i > 5) {
            System.out.print(i * 2);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T17:36:39.933

两个观察：

1.  将装箱的`Integer`对象替换为`int`.
2.  `str.equals(temp)`每次循环时，您都在做同样的检查。为什么不在里面做整个循环`if(str.equals(temp))`呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T18:52:54.170

请注意，由于溢出，表达式`arr[i] * 2 > 10`实际上等同于`(arr[i] > 5 && arr[i] < 1073741824) || (arr[i] > -2147483643 && arr[i] < -1073741824)`，这可能不是您想要的，但以防万一，建议的优化`arr[i] > 5`不是保留语义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T19:14:34.720

如果您真的关心字符串比较，那么您的代码可以编写如下。

```
public void funct(String str, int[] arr)
{
    if (!str.equals("saved"))
        return; //just return if String value is not "saved", reduces the loop execution.
    for(int i: arr) {
        if (i>5)
            System.out.println(""+(i<<1)); //Left shift is faster than multiplication. Concatenation is just for printing as SOP will not print integers directly.
    }
} 
```

希望这可以帮助。

# wcf - WCF datacontractserializer 反序列化方向

> ID：10872468
> 
> 赞同：0
> 
> 时间：2012-06-03T17:32:57.313
> 
> 标签：wcf, web-services, rest, datacontractserializer

我无法理解如何在 WCF REST 中使用 DataContractSerializer

我正在使用这样的通道工厂：

```
 Uri uri = new Uri("http://localhost:50000/people");
        WebChannelFactory<IPersonService> chFactory = new WebChannelFactory<IPersonService>(uri);

 IPersonService iPerson = chFactory.CreateChannel(); 
```

比可以像这样直接从通道调用通道方法

```
 List<Person> allPeople = new List<Person>();
 allPeople = iPerson.getAll(); 
```

到目前为止，这有我所知道的如何使用 DataContractSerializer 以便我可以输出响应

```
MemoryStream stream = new MemoryStream();
<--------------- how to i read iPerson.getAll() into stream? --------->                        
XmlDictionaryReader reader = XmlDictionaryReader.CreateTextReader(stream, new XmlDictionaryReaderQuotas());
DataContractSerializer dcs = new DataContractSerializer(typeof(Person));
List<Person> allpeople2 = (List<Person>)dcs.ReadObject(reader, true);
reader.Close();
stream.Close(); 
```

我不完全确定如何将这些部分组合在一起以使其正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:53:35.723

我觉得你说的有点复杂...

我将在此介绍页面之后开始一个新项目：http: [//msdn.microsoft.com/en-us/magazine/dd315413.aspx](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx)

当您在 web.config 上配置序列化问题时，您只需在接口/类上声明属性，并且您不必为您的对象编写一行序列化/反序列化代码（除非您需要自定义序列化在你的情况下不需要）

通过提供“http://localhost:50000/people”的 url，我假设您正在寻找 RESTful 服务，所以以防万一您需要一些更高级的功能，您也可以查看：[https://github。 com/mikeobrien/WcfRestContrib](https://github.com/mikeobrien/WcfRestContrib)

# iphone - 返回 AppDelegate

> ID：10872471
> 
> 赞同：0
> 
> 时间：2012-06-03T17:33:16.213
> 
> 标签：iphone, objective-c, ios, xcode, uiapplicationdelegate

我正在制作一个标签栏应用程序。在`AppDelegate`方法**-(void)applicationDidBecomeActive**我有一串代码：

```
[self.window addSubview:pass.view]; 
```

因此，每当应用程序处于活动状态时，都会`pass.view`出现。当用户在这个视图中完成所有工作时，我想关闭这个视图并返回到`AppDelegate`应用程序中的任何选项卡。我如何返回`pass.view`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:38:32.203

由于您所做的只是在窗口顶部放置一个 UIView，您所要做的就是将其删除以“返回”，您可以使用 removeFromSuperview 方法来实现这一点。

```
[pass.view removeFromSuperview]; 
```

# node.js - 在“一切都完成”之后退出node.js脚本的好方法是什么

> ID：10872472
> 
> 赞同：11
> 
> 时间：2012-06-03T17:33:19.757
> 
> 标签：node.js, asynchronous, control-flow

我的 node.js 脚本从数据库 1 的表中读取行，进行一些处理并将行写入数据库 2。

一切完成后脚本应该退出。

我怎么知道一切是否已经完成并退出节点呢？

如果我有这样的回调函数：

```
function exit_node() {
  process.exit();
} 
```

（编辑：与此同时，很明显 process.exit() 也可以用 db.close() 代替 - 但这不是要放什么的问题。问题是在什么时候准确地做到这一点，即如何以及在何处执行此回调。）

但是将它附加到某个地方并不容易。上次从 db1 读取之后是不正确的，因为处理和写入仍然必须发生。

把它附加到对db2的写入中并不容易，因为它必须在最后一次写入之后附加，但每次写入都是独立的，不知道是否是最后一次写入。

理论上也可能发生，最后一次写入完成，但之前的另一次写入仍在执行。

* * *

编辑：对不起，我可以看到问题的解释不完整并且可能令人困惑，但有些人仍然理解并且下面有很好的答案。请继续阅读评论和答案，它应该为您提供全貌。

* * *

编辑：我可以想到一些“阻塞”控制器机制。脚本的不同部分为每个打开的“作业”向控制器添加阻塞器，并在作业完成后释放它们，控制器在没有更多阻塞器时退出脚本。也许异步可以帮助：[https ://github.com/caolan/async](https://github.com/caolan/async)

我也担心这会炸毁代码和不合理的逻辑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T02:41:03.513

JohnnyHK 给出了很好的建议；除了 Node.js 已经为你做了选项 2。

当没有更多的 i/o、计时器、间隔等（预期没有更多工作）时，进程将退出。如果您的程序在所有工作完成后没有自动退出，那么您就有一个错误。也许您忘记关闭数据库连接，或者忘记关闭或关闭数据库`clearTimeout()`连接`clearInterval()`。但是，与其打电话给`process.exit()`您，不如利用这个机会来确定您的泄漏。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-03T18:36:13.720

两个主要选项是：

1.  使用异步处理协调模块，如[async](https://github.com/caolan/async)（如您所述）。
2.  保留自己的未完成写入计数，然后在计数达到 0 时退出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-04T01:27:04.443

尽管使用计数器可能很诱人（简单、易于实现的想法），但它会用不相关的逻辑污染您的代码。

```
db1.query(selector, function(err, results) {
  db1.close();

  // let's suppose callback gets array of results;
  // once all writes are finished, `db2.close` will be called by async
  async.forEach(results, processRow, db2.close);
});

// async iterator
function processRow(row, cb) {
  // modify row somehow
  var newRow = foo(row);

  // insert it in another db;
  // once write is done, call `cb` to notify async
  db2.insert(newRow, cb);
} 
```

虽然，`process.exit`在这里使用感觉就像`new`没有`delete`我的 C++。也许不好的比较，但无济于事:)

# java - Tomcat 7 无法创建工作目录

> ID：10872473
> 
> 赞同：3
> 
> 时间：2012-06-03T17:33:25.740
> 
> 标签：java, servlets, tomcat7

我正在尝试在我的 Tomcat 7 webapps 目录中部署使用 Eclipse 生成的 WAR。有几个例外是这样的：

> 警告：无法为上下文 [/QAServlet] 创建工作目录 [C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.22\work\Catalina\localhost\QAServlet]

当我在 Eclipse 中启动 tomcat 时，它工作正常。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T17:41:45.923

这是因为`Program files`是受保护的系统文件夹。`C:\tomcat`最简单的解决方案是在一些不安全的文件夹（例如）中安装 tomcat 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T17:43:13.267

可能是您的战争不包含清单文件。在 Eclipse 中，请务必检查清单是否存在于战争中的选项。

# java - javafx 预加载器

> ID：10872475
> 
> 赞同：2
> 
> 时间：2012-06-03T17:33:28.240
> 
> 标签：java, javafx, javafx-2, preloader

我正在学习 javafx，我正在尝试制作应用程序的启动画面，但我做不到。

你能给我一个如何制作基本闪屏的想法吗？

在飞溅后面做工作，完成后更改场景并显示应用程序的场景我希望您的帮助谢谢。

# c# - 获取未设置宽度的控件宽度

> ID：10872478
> 
> 赞同：0
> 
> 时间：2012-06-03T17:34:16.320
> 
> 标签：c#, asp.net

我在它下面有gridview和图表。

我希望 gridview 根据列数（未设置宽度）进行拉伸，然后将该宽度分配给图表。

如果我做：

```
chart.Width = gridview.Width.Value; 
```

我得到 0.0 像素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:51:03.787

它不会以这种方式工作，您需要的宽度是客户端值，您无法从服务器端获取它。尝试将调整大小图表逻辑移动到 javascript，使用表格 (gridview) 的 .offsetWidth/.clientWidth 属性。或者您可以修改标记以使图表自动拉伸（将网格和图表放入一个公共容器中并拉伸图表以填充容器的宽度）。

# php - 多个文件名匹配

> ID：10872479
> 
> 赞同：1
> 
> 时间：2012-06-03T17:34:17.163
> 
> 标签：php, regex

我将如何完成评论中的以下内容：

更新：评论中有错误的文件命名约定

```
// Do any of the file names in the list match the file name for this run?
// Full file name is cs1212-42173-TVCS.csv or cs1212-42173-TVWK.csv
$pattern = '/cs'.date('md').'-\d{5}-TVCS\.csv/i'; 
```

现在它只获取 TVCS 文件名，但我需要它来查找 TVCS 和 TVWK。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:35:37.787

```
$pattern = '/cs' . date('md') . '-\d{5}-TV(CS|WK)\.csv/i'; 
```

# html - 为什么一个标准的“样板”模板在 CSS3 中包含如此多的声明？

> ID：10872480
> 
> 赞同：3
> 
> 时间：2012-06-03T17:34:20.767
> 
> 标签：html, css, html5boilerplate

这个问题是针对 CSS3 的，我一直在查看一些样板模板和指南，其中大多数在进入您想要编辑的内容之前声明了很多属性。

*   为什么会这样？声明所有可用的属性会使浏览器加载更快还是什么？

*   有什么好处？为什么不“按原样”使用 CSS3（就像在 HTML 部分声明正在使用的内容）？

*   如果基础属性在后续版本中发生更改，这是否意味着您必须不断检查已弃用的属性并每隔一段时间不断声明和更改属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T17:45:50.113

HTML5Boilerplate 包含一个[normalize.css](http://necolas.github.com/normalize.css/)版本。它不仅仅是将所有内容都重置为 0（即边距、填充等），它具有最少的更改集，以确保所有浏览器中的设置都相同。用他们自己的话来说：

> “Normalize.css 是一个可定制的 CSS 文件，它使浏览器能够更一致地呈现所有元素并符合现代标准。我们研究了默认浏览器样式之间的差异，以便仅针对需要规范化的样式。”</p>

此处使用的样式示例如下：

```
/*
 * 1\. Correct text resizing oddly in IE6/7 when body font-size is set using em units
 * 2\. Prevent iOS text size adjust on device orientation change, without disabling user zoom: h5bp.com/g
 */

html {
    font-size: 100%;
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
} 
```

这修复了旧版 IE 和 iOS 中的一些奇怪问题。这是您可能会遇到的问题，阅读负载，找到解决方案并最终自己添加。通过使用这组默认值，您可以避免很多奇怪的事情。

除了错误，它还包括你可能想要的东西：

```
nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
    margin: 0;
    padding: 0;
} 
```

在 nav 中使用 ul 是一种常见的模式，您通常不希望那里有项目符号。这为你排序。

总而言之，我建议使用您自己的自定义代码版本——它会为您省去很多烦恼！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T02:54:30.907

[此外，如果您想添加 CSS3 功能，您可以使用html5shiv](http://code.google.com/p/html5shiv/)或[html5shim](http://code.google.com/p/html5shim/)使用 javascript 将其添加到 ie5（并不是说这没有缺点） 。

还让我们检查首字母缩写词 CSS 的定义。级联样式表。您可以按回退的顺序声明样式。IE

```
body {
    style-1: new browsers (this renders yay!)
    style-2: semi-new browsers (don't understand style-1 I will ignore ahh style2)
    style-3: ie5(me want to crash soon or BOD you. but me not get either 1 or 2 they smart but i think i can work         on style 3) 
```

# html - CSS - 按字符对齐行

> ID：10872481
> 
> 赞同：0
> 
> 时间：2012-06-03T17:34:44.530
> 
> 标签：html, css

我有一个这样的页面：

[页面 http://ompldr.org/vZTJtdw](http://ompldr.org/vZTJtdw)

我需要用“>”字符对齐线条。我认为这可以使用表格来完成，但我想有更好的解决方案吗？

到目前为止我所拥有的：[https ://gist.github.com/2864265](https://gist.github.com/2864265)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:15:55.493

添加

```
.title { display: inline-block; width: 2.8em;} 
```

或者使用更灵活（无需猜测宽度）、更健壮（即使在 CSS 关闭或不支持派对时也能工作）、更合乎逻辑（您拥有的是二维数据数组）的表格）。

我认为对齐意味着您希望将 GREATER THAN 符号垂直放在同一行上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:18:29.073

使用一张桌子。将左列向右对齐，使其与最右边的字符对齐。

# iphone - 单击“确定”后首次运行 GPS 未启动

> ID：10872491
> 
> 赞同：2
> 
> 时间：2012-06-03T17:36:04.743
> 
> 标签：iphone, ios, gps, core-location

单击“**想使用您当前的位置**”消息的“确定”后，GPS 在第一次运行时未启动。我有一个表格视图来显示当前位置周围的地名。表中没有地图视图，只是使用了 CoreLocation 框架。当我第一次构建并运行我的应用程序并进入表格视图时，著名的消息“ **“myApp”想使用您当前的位置**“跳出来。单击“确定”按钮后，GPS 未运行。但是当我再次进入表格视图时，GPS 运行良好。

**问题是**：单击“确定”按钮后，如何让 GPS 在第一次启动时运行？提前致谢！

编辑 1

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    CLLocationManager *locationManager = [[[CLLocationManager alloc] init] autorelease];
    [locationManager setDelegate:self];    

    [locationManager startUpdatingLocation];    
} 
```

**有没有检测到“想使用您当前的位置**”消息的“确定”按钮被点击了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T12:49:00.160

给你看一些代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusNotDetermined) {

         [NSTimer scheduledTimerWithTimeInterval:2 target:self     selector:@selector(timerFired:) userInfo:nil repeats:YES];

    }
}

- (void)timerFired:(NSTimer*)theTimer{

if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized) {
        [self startUpdatingCurrentLocation];
        [theTimer invalidate];
    } 
    [self startUpdatingCurrentLocation];

} 
```

计时器会一直等到某个时间间隔过去，然后触发，将指定的消息发送到目标对象。[NSTimer 参考。](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

如果用户按下“确定”按钮，计时器可以以透明的方式第二次执行启动 GPS。如果没有，计时器将继续检查 GPS 状态，直到应用程序获得用户的选择。

# javascript - 如何在 JavaScript 中为找到的字符串获取周围的文本？

> ID：10872496
> 
> 赞同：1
> 
> 时间：2012-06-03T17:37:05.380
> 
> 标签：javascript, regex, string

这是一个菜鸟问题

假设我在一个字符串中搜索`S`一个模式`P`。现在我想显示一个字符串的子字符串，它围绕着`P`. 子字符串应该只有一行（即`N`字符）并包含*整个*单词。你将如何编码`JavaScript`？

例如：
Let `S`= "Hello world, welcome to the universe", `P`= "welcome", and `N`= 15\. 天真的解决方案给出了 "ld, welcome to "（在 之前和之后添加 4 个字符`P`）。我想把它“四舍五入”到“世界，欢迎来到”。

正则表达式可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:50:22.623

这是您想要的正则表达式：

```
/\s?([^\s]+\swelcome\s[^\s]+)\s?/i    //very simple, no a strange bunch of [] and {} 
```

***解释：***

你试图匹配的实际上是

> 《世界，欢迎来到》

前后没有空格，因此：

```
\s?       //the first space (if found)
(         //define the string position you want
[^\s]+    //any text (first word before "welcome", no space)
\s        //a space
welcome   //you word
\s        //a space
[^\s]+    //the next world (no space inside)
)         //that's it, I don't want the last space
\s?       //the space at the end (if found) 
```

***申请：***

```
function find_it(p){
    var s = "Hello world, welcome to the universe",
        reg = new RegExp("\\s?([^\\s]+\\s" + p + "\\s[^\\s]+)\\s?", "i");

    return s.match(reg) && s.match(reg)[1];
}

find_it("welcome");   //"world, welcome to"

find_it("world,");    //"Hello world, welcome"

find_it("universe");  //null (because there is no word after "universe") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T17:50:16.103

我想，这就是你要找的东西。

```
$a = ($n - length of $p)/2
/[a-zA-Z0-9]{$a}$p[a-zA-Z0-9]{$a}/ 
```

我用美元来显示变量在哪里。您没有提供足够的代码来编写具体示例。

# iphone - iOS uiwebview goBack 历史控件

> ID：10872498
> 
> 赞同：10
> 
> 时间：2012-06-03T17:37:14.980
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我在 uiwebview 上加载“webpage1”并将其第一个请求保存在实例变量“webviewHistory”上。然后，我必须重用那个 webview 来加载另一个页面，“webpage2”（也将它的第一个请求保存到“webviewHistory”），历史应该从这个请求开始。问题是如果我从“webpage2”执行 goBack（按钮 IBAction），我可以继续返回到“webpage1”历史并关注。如果我检查请求并与初始保存的比较，工作！但不是重定向，例如，如果我触发对 www.youtube.com 的请求，请求将被重定向到 m.youtube.com 并且第一个不会保存为导航历史记录！如何解决？

```
if (![webViewSocial.request.URL.absoluteString isEqualToString:self.webviewHistory]){
    [webViewSocial goBack];
    } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-03T21:31:26.240

UIWebviews 具有实例方法，允许您在历史记录中前后移动，而无需跟踪最后一个请求。您是否有特殊原因专门保存最后一个请求？

示例代码：

```
if ([webView canGoBack]) {
    [webView goBack];
} 
```

如果您想使用它，这是一个简单的 uiwebview 浏览器项目： [https ://github.com/msencenb/UIWebView-Example](https://github.com/msencenb/UIWebView-Example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-25T20:10:01.033

对于 swift 3 版本的 Msencenb 答案：

```
if webView.canGoBack {
    webView.goBack()
} 
```

# ibatis - iBatis [+Spring] Transaction 中的多个“数据库操作”

> ID：10872501
> 
> 赞同：0
> 
> 时间：2012-06-03T17:37:44.457
> 
> 标签：ibatis

如何使用 iBatis 和 Spring实现涉及*多个数据库操作到 >1 个表的事务？*

让我详细解释一下：
我有 2 个表 A 和 B 具有主从关系。[单个数据库中的两个表]。

/* 表 A: */

a_id [主键]
[加其他列]

/* 表 B: */

```
b_id [Primary Key]  
a_id [Foreign Key = PK of table A]  
[plus other columns] 
```

在我的 Dao 中，我有以下方法（我使用 iBatis sqlMap 来执行数据库操作）：

```
insertA();  
insertB();  
updateA();  
updateB();  
deleteA();  
deleteB(); 
```

上述每个操作都是原子的（& 可以由客户端调用& 提交到数据库中 - 通过 Spring/iBatis）。

到目前为止，一切正常！[即我能够在每个表上执行*单独*的插入/更新/删除。]

-- 接下来，我需要将上述两个 DB 操作组合为一个 ATOMIC 操作；
这是我想从 SVC 层实现的目标：

```
start Tranaction  
    operation on Table-A (via method of Dao class) - op #1  
    operation on Table-B (via method of Dao class) - op #2  
end Transaction 
```

示例 1：

```
start Tranaction  
    insertA();  
    insertB();  
end Transaction 
```

示例 2：

```
start Tranaction  
    updateA();  
    updateB();  
end Transaction 
```

在这里，如果 op#2 失败，我希望 op#1 也被回滚。即完全回滚。

因此，我在 Service 层中编写了额外的方法，它调用了上面的 DAO 方法。在运行（Svc）代码之前，我手动 [通过 cmd-line] 更改数据库上的一些数据，因此由于 DB 约束，第二次操作失败。

现在，op #2 [Table-B] 失败，但 op #1 已在 DB 中提交。即没有完全回滚，只有部分回滚。

如果 op#2 失败，op#1 不应该也回滚吗？

这是我在 ApplicationContext.xml 中使用的内容：

*   “DataSourceTransactionManager” [Spring] 用于事务。
*   iBatis 2.3.x [SqlMapClient]
*   春天 3.0
*   DefaultAutoCommit 设置为 FALSE。
*   在“tx:method”中：[要执行 ATOMIC 操作的服务方法）
    propagation="REQUIRED" [也尝试使用其他值，但没有用]
    rollback-for=Exception-Name-for-which-to-rollback

还有什么需要做的吗？
难道我做错了什么？
这是正确的方法还是有更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T07:47:48.587

<

在我看来，你应该考虑数据完整性，如果 op #2 使系统失去数据完整性，那么它应该根据 op #1 回滚。

要实现您想要的，只需在 try/catch 块上调用 op #1 和 #2、wrapper #2，如下所示：

```
try {

    start Tranaction ;
    //pkA is primary key of A
    Object pkA = insertA();  
    updateA(pkA);  

    try {
        Object pkB = insertB(pkA); 
        updateB(pkB);  
    }
    catch(Exception e) {
        logger.ERROR("Error when inserting and updating B.Ignore. ",e);
    }
    commit transaction;
}
catch(Exception e) {
   logger.ERROR(e);
   rollback Transaction;
} 
```

HTH。

# .htaccess - .htaccess 和“查找”这个词

> ID：10872503
> 
> 赞同：0
> 
> 时间：2012-06-03T17:37:57.813
> 
> 标签：.htaccess

我有以下不起作用的 .htaccess：

```
RewriteEngine on
RewriteBase /
RewriteRule ^find /findgames.php [L]
RewriteRule ^find/ /findgames.php [L] 
```

如果我删除“查找”中的字母“d”，一切都会很好：

```
RewriteEngine on
RewriteBase /
RewriteRule ^fin /findgames.php [L]
RewriteRule ^fin/ /findgames.php [L] 
```

我错过了什么？是找关键字吗？第二个我连续有字母“find”，我的网站上出现“内部服务器错误”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:10:21.340

在您的情况下，这是绝对正确和预期的行为（“内部服务器错误”消息）。尽管即使没有 letter ，您也应该看到相同的错误`d`。

原因——糟糕的匹配模式——这是一种广泛的方式。什么`^find`意思？这意味着 -- 匹配以`find`(Apache 去除前导斜杠) 开头的 URL。这将匹配`/find`,`/find/`等`/findme`- 以及您的目标 - `/findgames.php`。

最有可能（在这种特殊情况下）您有**无限的重写循环**，Apache 必须在某个时候中断，因此出现错误。您可以检查 Apache 的错误日志以获取**确切的**错误消息——它会很好地解释它。

在任何情况下——这*应该*对你有用——它会将请求`/find`以及`/find/`（完全匹配）重定向到`/findgames.php`.

```
RewriteEngine on
RewriteBase /
RewriteRule ^find/?$ /findgames.php [L] 
```

# java - 服务器连接

> ID：10872507
> 
> 赞同：-1
> 
> 时间：2012-06-03T17:38:13.820
> 
> 标签：java, sockets, connection, objectinputstream

我正在用 Java 做自己的服务器。我需要做一个套接字连接并从客户端接收很多对象。我做到了，它有效，但我不知道这是否是最好（最快）的解决方案。这是我的代码示例：

```
try {
    serverSocket=new ServerSocket(18234, 1000);
} catch (IOException e) {
    System.out.print("Server failed..");
    e.printStackTrace();
}

Object x;
ObjectInputStream ois;
System.out.println("Waiting for connection...");
Socket connection= serverSocket.accept();
System.out.println("Connection received from " + connection.getInetAddress().getHostName());

while(true){
    ois = new ObjectInputStream(connection.getInputStream());
    x=ois.readObject();
    System.out.println(x.getString());
    if(x.getString().equals("END")) break;
} 
```

问题是，当我尝试接收新对象时，我必须一直做新的 ObjectInputStream.. 这个解决方案是否正确？我必须做非常快的服务器，在我看来，一直做新的 ObjectInputStream 太贵了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T22:43:57.393

在两端的套接字的生命周期中使用相同的 ObjectOutputStream 和 ObjectInputStream。您关于每个对象都必须使用一个新对象的说法是不正确的。

# c++ - C++：虚拟指针的原型

> ID：10872510
> 
> 赞同：0
> 
> 时间：2012-06-03T17:38:47.343
> 
> 标签：c++, inheritance, virtual, vtable, vptr

我不确定这是否记录在任何地方。我们都知道在虚函数的情况下，每个类都有一个 vptr，它指向一个称为虚表的函数指针数组。我想知道vptr的原型是什么。例如，如果一个类声明如下，

```
class A
{
   int a;
   public: A(){}
   virtual void display();
   virtual void setValue(int x);
}; 
```

现在我们在 A 类的 vtable 中有两个函数指针。单个 vptr 如何能够定义不同原型的两个定义？

如果我的理解有误，请告诉我。

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T17:40:55.917

vptr 是一个实现细节，因此它没有原型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:13:31.353

正如 Oli Charlesworth 所指出的，虚拟指针是一个实现细节，所以这个问题在 C++ 方面并没有真正的意义。也就是说，以下虚拟功能（某些功能）的手动实现可能有助于您的理解：

```
struct vtable {
    void (*display)(void*);
    void (*setValue)(void*, int);
};

void A_display(void *this_) { /*Cast this_ to A* and do A stuff*/ }
void A_setValue(void *this_, int x) { /*Cast this_ to A* and do A stuff*/ }

vtable A_vtable = {A_display, A_setValue};

struct A {
    vtable *vptr = &A_vtable;
    int a;
    public: A(){}
};

void B_display(void *this_) { /*Cast this_ to B* and do B stuff*/ }
void B_setValue(void *this_, int x) { /*Cast this_ to B* and do B stuff*/ }

vtable B_vtable = {B_display, B_setValue};

struct B {
    vtable *vptr = &B_vtable;
    int a;
    public: B(){}
};

void display(void *obj) {
    ((*static_cast<vtable**>(obj))->display)(obj);
}
void setValue(void *obj, int) {
    ((*static_cast<vtable**>(obj))->setValue)(obj, int);
} 
```

当然，这只是提供了虚函数功能的一小部分，但是应该相当简单地看到它`vptrs`指向具有固定类型的函数的指针集合。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T18:16:29.243

虚拟表（在使用这种东西的实现中）是“编译器魔法”的产物。它不需要有特定的原型，因为没有 C++ 代码直接使用它。相反，编译器自定义生成一个以符合每个需要一个的类。编译器还生成访问每个元素的代码，因此它可以保证以类型安全的方式访问每个元素。

例如，编译器知道该`A::setValue`方法的槽包含一个指向与`setValue`签名匹配的函数的指针，因为编译器是首先将它放在那里的那个。此外，直接访问该槽的唯一代码是编译器生成的机器代码，并且在生成此类代码之前，编译器已经确认原始 C++ 代码正在调用该`setValue`函数。因此，无需担心该`setValue`插槽可能会保存除`setValue`-conformant 函数指针之外的任何内容。也不担心可能会访问其他插槽；如果发生这种情况，那将是一个编译器错误，而不是普通用户代码的结果。

表的元素永远不会被视为一个组，因此不需要它们都具有相同的类型。充其量，它们都有一种“适合 CPU 跳转的通用指针或偏移量”。由于那时它还不是真正的 C++，因此“类型”不必适合任何特定的 C++ 类型。

# objective-c - 在 CATransform3DRotate 旋转的 UIView 中的 UIImageView 上使用 convertRectToView

> ID：10872512
> 
> 赞同：1
> 
> 时间：2012-06-03T17:39:00.253
> 
> 标签：objective-c, transform, frame, subview, bounds

我有一个 UIImageView `draggableImageView`，它是一个 UIView 的子视图，它通过并带有 perspective`tiltedView`向后倾斜。这样，当我四处拖动时，它的视角和绝对大小会发生变化，因此它看起来像是在.`CATransform3DRotate``transform.m34 = -1 / 400.0``draggableImageView``tiltedView`

我想计算框架`draggableImageView`内`tiltedView`但使用不同的坐标系（在这种情况下，调用的 UIView`viewForCoordinates`不倾斜并包含整个屏幕）。但是，无论my位于何处，都使用`[self convertRect:self.frame toView:self.viewForCoordinates]`from inside`draggableImageView`输出相同大小的框架。`tiltedView``draggableImageView`

我认为 using`self.frame`比`self.bounds`因为`bounds`它与 superview 无关而`frame`依赖于它更合适。但是，基于以上所述，我猜这`convertRect`只是将`self.frame`透视操作应用于`self.frame`'s superview' 的转换不可知论者。

我不确定在这种情况下哪些代码会有所帮助，所以请让我知道我可以提供哪些代码来帮助回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:38:56.797

我解决了这个！

所以我认为有两个主要问题：

1）当`DraggableImageView`对象被触摸时，确保对象确实被通过`if ([touch view] == self)`inside`- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event`

2) 通过 将触摸位置转换为`superview`坐标系`self.touchLocation = [[touches anyObject] locationInView:self.superview]`。

3) 将`DraggableImageView`' 框架从`superview`坐标转换为`viewForCoordinates`坐标系。<<<***我认为我的错误是我从而`self`不是`superview`.***

4) 如果`DraggableImageView`基于 对 ' 框架或位置进行`viewForCoordinates`更改，则计算`viewForCoordinates`' 坐标系 m 内的变化，然后转换回`DraggableImageView`' `superview`。<<<***我想我忘了做这个转换：S***

# php - 按类别显示详细信息

> ID：10872514
> 
> 赞同：0
> 
> 时间：2012-06-03T17:39:27.553
> 
> 标签：php

我只是想知道如何做到这一点：

我几乎完成了我的 php 分类广告。一切都很完美，感谢您的帮助。

我的数据库：类别、子类别、州、城市、分类

分类表包含以下内容：

ID、标题、描述、价格、品牌、里程、表面、卧室、姓名、号码、州、城市。

现在，如果有人点击广告，它会重定向到显示广告详细信息的 details.php。

我想要做的是，如果有人选择与汽车相关的广告，details.php 将仅显示与汽车相关的详细信息，甚至不会回显与房地产类别相关的表面和卧室。像这样：

标题名称：数字：州：城市：价格：里程：品牌：描述：反之亦然，如果选择房地产广告，我只想要标题，描述，价格，表面，卧室......像这样：

标题名称： 编号： 州： 城市： 价格： 表面： 卧室： 描述：

到目前为止，如果我在描述中指定汽车和房屋选项，但我希望每个类别都是唯一的。这是与广告详细信息相呼应的代码：

```
 <td>
       <div><a href='details-" . $id . ".php'><img src='" . $picture . "'          

     width='110' height='90' /></a></div>
      </td>

     <td><a href='details-" . $id . ".php'>" . $title . "</a><br />

      <a href='details-" . $id . ".php'>" . $description . "</a>" . 
      </td>

      <td>
      <div>$" . $price . "  </div>
  </td> 
```

我什至不知道如何形成一个问题，对不起。

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:45:25.443

显示 php 变量时忘记添加 php 标签`<?php ?>`试试这个

```
 <td>
       <div><a href='details-" <?php echo $id ?> ".php'><img src='" <?php echo $picture ?>"'          
     width='110' height='90' /></a></div>
      </td>
     <td><a href='details-" <?php echo $id ?> ".php'>" <?php echo $title ?> "</a><br />
      <a href='details-" <?php echo $id ?> ".php'>" <?php echo $discription ?>"</a>" . 
      </td>
      <td>
      <div>$" <?php  echo $price ?> "  </div>
  </td> 
```

# python - 知道是否有列表列表 - Python

> ID：10872516
> 
> 赞同：1
> 
> 时间：2012-06-03T17:39:47.763
> 
> 标签：python, list

假设我们有两个列表：

```
A = [2, 3, [6, 7], 0]
B = [4, 7, 10, 2] 
```

我想将这些值输入到这样的函数中：

```
def gettype(self, a):
 for x in a:
    if isinstance(x, list):
     ident = True
    else:
     ident = False
  return ident 
```

如果存在列表列表，则返回 True，否则返回 false。

```
ident = gettype(A)
print ident
True

ident = gettype(B)
print ident
False 
```

PS：上面的那个函数不起作用，它在两种情况下都返回 False

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T17:44:23.723

像

```
A = [2, 3, [6, 7], 0]
B = [4, 7, 10, 2]

def has_lists(lst):
    return any(isinstance(x, list) for x in lst)

print has_lists(A) # True
print has_lists(B) # False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T17:41:59.080

问题是您更改了`ident`列表中每个成员的值。所以事实上，如果列表的最后一个元素是一个列表，你只会得到 True 。

试试这个。如果列表中有列表，则返回 True。如果到达列表末尾而没有遇到列表，则返回 False。

```
def gettype(self, a):
 for x in a:
    if isinstance(x, list):
     return True
  return False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T17:43:36.110

您正在迭代列表的所有元素。问题是您正在覆盖 的值，`ident`因为列表的最后一个值是`integer`函数返回的`False`。

当您像其他答案中的其他实现一样`True`找到第一个元素案例时，您必须返回。`list`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T17:47:34.060

您的代码的问题是您`ident`在每次迭代时更新，并且最后一个值`A`不是列表，因此是`False`结果。以下是您可能想要的：

```
def gettype(self, a):
    for x in a:
        if isinstance(x, list):
            return True
    return False 
```

请注意，一旦遇到列表元素，该`return True`语句就会立即跳出循环并终止算法。`for`

# c# - 当数据库似乎没有冲突时，为什么 LINQ to SQL 会在 Windows Phone 上报告冲突？

> ID：10872518
> 
> 赞同：0
> 
> 时间：2012-06-03T17:39:51.120
> 
> 标签：c#, linq-to-sql, sql-server-ce, windows-phone-7.1

我有一个为我返回对象的 Web 服务，以及一个候选键，我已将其标记为：

```
[Column(IsPrimaryKey = true)]
public int EventId { get; set; } 
```

从 web 服务加载数据一切都很好，但是在迭代新的和更新的项目以将它们放入 SQL CE 数据库中作为缓存时，如下所示：

```
foreach (var e in results)
{
    var ev = (from evt in context.Events where evt.EventId == e.EventId select evt).FirstOrDefault();
    if (ev == null)
    {
        // Brand new
        context.Events.InsertOnSubmit(e);
    }
    else
    {
        // Update data
        ...
    }
} 
```

出于某种原因，它*偶尔会*认为一个事件是全新的，但它会在以下期间抛出异常`InsertOnSubmit`：

> **System.InvalidOperationException 未处理**
> 
> 无法添加已存在的实体。

我已经使用 Windows Phone Power Tools 将数据库从模拟器中拉出，在 Visual Studio 中加载了数据库，并且主键似乎没有任何冲突的值，所以为什么我得到一个暗示的异常有冲突，调试器显示没有任何跨线程问题？

**编辑**

我发现的一件事是，我的实体有一个`Equals()`未覆盖主键的覆盖（它对自然键进行了比较），并且看起来 Web 服务有两条记录在记录为候选键的内容上.

如果我也调整 Equals 方法以考虑主键，则异常更改为 a`SqlCeException`并告诉我：

> 不能将重复值插入唯一索引。[表名 = SpecialEvent，约束名 = PK_SpecialEvent]

即使主键仍然没有被复制，这让我更加困惑（特别是因为这种类型的异常不容易被捕获）

**编辑2**

我什至尝试`lock() {}`在执行更新的代码周围使用 a，但我仍然遇到奇怪的冲突，所以我很困惑为什么我偶尔会遇到冲突，尤其是当 SDF 没有反映相同的冲突时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:59:04.397

就我而言，事实证明这取决于几个因素的结合——我的实体没有属性，`IsVersion = true`也`UpdateCheck = UpdateCheck.Never`没有不构成我主键一部分的列。似乎存在时间问题，导致它仅在列与预期的旧值匹配时才尝试更新。

# javascript - 如何将 jQuery 添加到 glassfish

> ID：10872519
> 
> 赞同：1
> 
> 时间：2012-06-03T17:39:55.800
> 
> 标签：javascript, jquery, eclipse, jakarta-ee, glassfish

好吧，这听起来很愚蠢，但这让我发疯。

过去几天我一直在使用 glassfish，我决定将 jQuery 和一些 css 文件包含到 glassfish 项目中。这很简单：我只是将 jQuery-1.7.2.min.js 和其他 css 文件复制到项目文件夹中，并将它们链接到 .jsp、.html 或 .xhtml。

但这行不通。

我试图通过相对路径和绝对路径包含，而 .jsp、.html 或 .xhtml 拒绝识别该 jquery 文件或 css 文件。

我应该在 glassfish 中以特殊方式添加 js 和 css 文件吗？

我的页面在 /WebContent 下，js 文件夹在 /WebContent/WEB-INF 下。

![在此处输入图像描述](../Images/7028ceb0f1354ae9c125cab245605a98.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:45:01.123

您需要确保这些文件夹最终位于已部署的 webapp 文件夹中。这将取决于您的构建系统。在 maven 布局中，这意味着您将它们放在 src/main/webapp 中，并且在部署时它们会被复制。

# redirect - 重定向到 symfony 中的默认操作

> ID：10872524
> 
> 赞同：0
> 
> 时间：2012-06-03T17:41:22.847
> 
> 标签：redirect, symfony-1.4

我正在使用 Symfony 1.4 构建一个 Web 应用程序。此应用程序的主页操作如下。

```
Module = content
Action = indexAction.php

/localhost/myapp/web/index.php/content/ 
```

当有人使用 Web 浏览器访问应用程序文件夹时，我需要将此操作用作默认操作。如果有人按如下方式访问 myapp 文件夹。

```
/localhost/myapp 
```

它应该在内部重定向到

```
/localhost/myapp/web/index.php/content/ 
```

并访问主页。

我猜 Symfony 路由在这里不起作用。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:29:49.713

使用 symfony 路由系统，您可以为`/`.

在 中`myapp/config/routing.yml`，定义主页路由（默认定义）：

```
# default rules
homepage:
  url:            /
  param:          { module: content, action: index } 
```

这样，访问`/myapp`不会重定向您，但您将在您的主页上。

# php - 从 MySQL 加载动态 Google 标记

> ID：10872525
> 
> 赞同：1
> 
> 时间：2012-06-03T17:41:23.457
> 
> 标签：php, google-maps-api-3

我想知道是否有人可以帮助我。

我正在使用下面的脚本从 MySQL 数据库中动态加载 Google 标记，并且该脚本运行良好。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Map My Finds - My Finds Per Location</title>
        <link rel="stylesheet" href="myfindsperlocation.css" type="text/css" media="all" />
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=en"></script>
        <script type="text/javascript"> 

            function load() { 
            var map = new google.maps.Map(document.getElementById("map"), { 
            center: new google.maps.LatLng(54.312195845815246,-4.45948481875007), 
            zoom:14, 
            mapTypeId: 'satellite' 
            }); 

            var infoWindow = new google.maps.InfoWindow;

            downloadUrl("loadmyfindsperlocation.php", function(data) { 
            var xml = data.responseXML; 
            var markers = xml.documentElement.getElementsByTagName("marker"); 
            var bounds = new google.maps.LatLngBounds(); 
            for (var i = 0; i < markers.length; i++) { 
            var locationid = markers[i].getAttribute("locationid"); 
            var point = new google.maps.LatLng( 
            parseFloat(markers[i].getAttribute("findosgb36lat")), 
            parseFloat(markers[i].getAttribute("findosgb36lon")));
            var marker = new google.maps.Marker({ 
            map: map, 
            position: point
            }); 
            bounds.extend(point); 
            map.fitBounds(bounds); 
            bindInfoWindow(marker, map, infoWindow, html);
            } 
            }); 
            } 

            function bindInfoWindow(marker, map, infoWindow, html) {     
            google.maps.event.addListener(marker, 'click', function() {         
            infoWindow.setContent(html);         
            infoWindow.open(map, marker, html);     
            }); 
            } 

            function downloadUrl(url, callback) { 
            var request = window.ActiveXObject ? 
            new ActiveXObject('Microsoft.XMLHTTP') : 
            new XMLHttpRequest; 

            request.onreadystatechange = function() { 
            if (request.readyState == 4) { 
            request.onreadystatechange = doNothing; 
            callback(request, request.status); 
            } 
            }; 

            request.open('GET', url, true); 
            request.send(null); 
            } 

            function doNothing() {} 

            </script> 
            </head> 
            <body onLoad="load()">

                            <div id="map"></div>
                        </body> 
                        </html> 
```

您会看到它是一个相对简单的表单，它从外部 PHP 文件中调用数据，该文件显示在我的脚本中：`downloadUrl("loadmyfindsperlocation.php", function(data) {`

我现在要做的是将 PHP 脚本合并到上面，但我似乎无法加载地图，我怀疑将文件作为 URL 调用是有必要的。

请原谅我的提问，我对 PHP 和 XML 比较陌生，但有人可以告诉我如何在不将其加载为外部 URL 的情况下调用它。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:51:20.443

我没有你的 CSS 或 PHP，所以我只能猜测。您是否在 Javascript 控制台中看到错误？

我所做的是添加以下样式并加载地图，即使 PHP 丢失并给我错误。

```
html, body, #map { margin: 0; padding: 0; height: 100% } 
```

关于加载 PHP，它必须返回一个有意义的 XML。您可以有一个预先编写的 XML 并加载它。

# java - 如何创建与其他计算机的网络连接 (JAVA)？

> ID：10872528
> 
> 赞同：4
> 
> 时间：2012-06-03T17:41:41.827
> 
> 标签：java, swing, sockets, connection

我正在开发一款可以在电脑上玩或与其他玩家对战的游戏。GUI 是 Swing 但与此事无关。我的问题是：我如何与网络中的其他玩家联系？

我熟悉客户端/服务器、套接字等术语，我可以编写一个基本的客户端/服务器程序，但它只能在一台计算机上运行。我不知道如何从一台计算机连接到这个网络，比如说，在全国的一半。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T18:50:20.600

您可能设置在一个路由器后面，该路由器对世界其他地方隐藏了您的本地 IP 地址（查找[NAT](http://en.wikipedia.org/wiki/Network_address_translation)以获取更多信息）。基本上，全世界只看到您的 YOUR_ROUTER_IP，您的路由器负责将所有 IP 数据包从外界传送给您，反之亦然。您将需要更改路由器设置，以便您的计算机/服务器获得路由器 IP 地址。通过这种方式，您可以使用简单的套接字操作从世界任何地方访问您的服务器应用程序。我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T17:47:06.887

我喜欢使用[Kryonet](http://code.google.com/p/kryonet/)进行网络连接，它工作得很好并且有很好的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T17:57:32.847

您表示您知道如何使用客户端和服务器套接字，所以我将在那里抛出您应该尝试使用“真实”IP 地址而不是 localhost (127.0.0.1) 进行连接。在本地网络上使用两台机器，获取“服务器”机器的 IP 地址并使用该地址从客户端连接。

这将在全球范围内一直有效，除了您可能位于某些网络地址转换 (NAT) 防火墙之后，并且可能需要“打开”或“转发”您需要的端口。如果您需要有关 NAT 的更多信息，google 和 serverfault 将非常有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T19:22:31.233

如果您的客户端和服务器位于同一台机器上，那么您可以使用环回地址（即 127.0.0.1），在 LAN 中您可以使用私有 IP 地址

```
Private ip address for LAN 
```

A 类 - 10.xxx

B 类 - 172.16.0.0 - 172.31.255.255

C 类 - 192.168.0.0 - 192.168.255.255

您可以将其用于 LAN 环境

要通过 Internet 连接某人，您将需要`Public ip addresses`. 每个范围内除私有 ip 外的地址都是公共地址。

现在，如果您有一台服务器，`static ip`那么客户端通过互联网从世界任何地方访问它都不会成为问题。

但是，如果它通过 LAN 并从网关访问互联网，那么将有一个`NAT`，那么您将需要设置`inbound and outbound traffic rules`at `gateway`，以让客户端访问服务器。

# c - gdb 调试器多个源文件

> ID：10872531
> 
> 赞同：16
> 
> 时间：2012-06-03T17:42:06.467
> 
> 标签：c, gdb

当我将 gdb 附加到使用许多源文件（例如 PHP）的进程时，有时我想在文件 y 的第 x 行设置断点。如何为 gdb 指定文件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-03T17:43:39.613

它很简单：

```
b filename.c:XYZ 
```

有关更多信息，请参阅[文档](http://sourceware.org/gdb/current/onlinedocs/gdb/Specify-Location.html#Specify-Location)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-04T02:36:46.420

1.  `gdb ./test.exe` //test.exe 由您的程序创建。
2.  `b 117`//如果只有单个文件和第 117 行是您要运行的函数 `b filename.c:110`//filename:line NO
3.  `r`//运行程序
4.  `n`
5.  `c`//继续
6.  `s`//登录你要测试的函数
7.  `until 1120`//如果有`for`分支，你想跳过品牌，给定1120在`for`分支之后

您可以将 GDB 中的几乎所有命令缩短到它们保持明确的程度。

# java - 如何衡量执行的操作数量

> ID：10872536
> 
> 赞同：3
> 
> 时间：2012-06-03T17:43:10.397
> 
> 标签：java, profiling, complexity-theory

在我目前的项目中，我正在测量用 Java 编写的算法的复杂性。我以渐近复杂度（预期结果）进行操作，并且我想通过与实际操作次数进行比较来验证预期。在我看来，每次操作都使用 Incrematation 有点笨拙。有没有更好的方法来衡量运营复杂性？

谢谢

* * *

编辑：更多信息

*   算法可能在不同的机器上运行
*   分治算法的某些部分可能会被预先缓存，因此该过程很可能比预期的要快
*   对我来说，找出乘法常数（或加法常数）也很重要，这在渐近复杂性中没有考虑到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:53:03.100

是否有特别的理由不只测量 CPU 时间？时间实用程序或分析器将为您提供数字。只需使用足够的输入范围运行每个算法并捕获所花费的 cpu 时间（不是挂钟时间）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:02:01.080

在您想要测量执行时间的实际计算机上，getCurrentTimeMillis()。改变 N 参数，获得可靠的统计数据。做一个误差估计。你的基本最小二乘就可以了。

算法上的计数操作很好，但它的用途有限。不同的处理器以不同的速度做事。计算您实现的算法执行的表达式或语句的数量几乎是无用的。在算法中，您可以使用它来进行比较以进行调整，在您的实现中不再是这种情况，编译器/JIT//CPU 技巧将占主导地位。

如果您进行良好的测量，渐近行为应该非常接近计算/预期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T14:56:46.517

[ByCounter](https://sdqweb.ipd.kit.edu/wiki/ByCounter)可用于检测 Java（跨多个类）并计算 JVM 在运行时执行的字节码数量。

# c#-4.0 - 使用 c# 检索回收站大小

> ID：10872538
> 
> 赞同：1
> 
> 时间：2012-06-03T17:43:24.363
> 
> 标签：c#-4.0, recycle-bin, shell32.dll

我想使用 c# windows 应用程序检索回收站的大小

我用 shell32.dll 试过了，但它引发了一个异常

因此，我们可以接受任何使用 shell32.dll 的替代方案或解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:49:50.107

我知道你说你试过 shell32.dll 但你看到了吗： [http ://www.dreamincode.net/forums/topic/164491-working-with-the-windows-recycle-bin-with-c%23/](http://www.dreamincode.net/forums/topic/164491-working-with-the-windows-recycle-bin-with-c%23/)

# google-app-engine - 在实体组的引擎盖下 - 如何在 Cassandra 上实现它？

> ID：10872540
> 
> 赞同：1
> 
> 时间：2012-06-03T17:43:30.300
> 
> 标签：google-app-engine, cassandra

我目前正在为 App Engine 实现一个数据存储连接器以使用 Cassandra。

我正在考虑如何实现*Ancestor Paths*。我想在 Cassandra 中使用**Ordered Partitioners**并构造我的密钥`parent/{key_name or id}`，我可以使用Cassandra [http://wiki.apache.org/cassandra/API#KeyRange](http://wiki.apache.org/cassandra/API#KeyRange) API 中的**KeyRange**。

你认为这是个好主意吗？因为在 datastax 上我们可以使用 Ordered Partitioners 读取，所以并不推荐[http://www.datastax.com/docs/0.8/cluster_architecture/partitioning](http://www.datastax.com/docs/0.8/cluster_architecture/partitioning)。

我真的很想知道谷歌是否这样做，因为我认为实体是按键排序的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:53:43.640

HBase is much closer to Google's Bigtable than Cassandra is. Cassandra only uses the data model from Bigtable, and Dynamo's distribution model. If one of your primary operations is to scan over key ranges you should not go with Cassandra.

If you must use Cassandra, one way of scanning over key ranges is to use columns to create hierarchy. Basically you create a row for the lowest level, then map the rest of the hierarchy to column names. "parent" would be the row key and the "key_name or id" part would be the column keys. With that model you can scan over a key range by loading a column slice.

Whether or not this is a good idea depends a lot on how your data model looks, I'm not familiar with ancestor paths in GAE, but if you have lots of "parent" things you will get a good balance across the cluster, but if you have few, and lots "key_name or id" it will be inefficient.

# google-apps-script - 使用 UrlFetchApp.fetch 方法的错误请求

> ID：10872541
> 
> 赞同：1
> 
> 时间：2012-06-03T17:43:32.187
> 
> 标签：google-apps-script

我正在尝试使用它的 api 从 Pinboard.in 获取标签列表，但是在执行 fetch 方法时出现错误。

代码是：

```
function getTags(user, password) {
  var url ="https://"+user+":"+password+"@api.pinboard.in/v1/tags/get"
  var response=httpGet(url);
  return response;
}
function httpGet(theUrl)
    {
      var options = { "contentType" : "application/xml; charset=utf-8"} ;
      var response = UrlFetchApp.fetch(theUrl,options);
      return response.getContentText();
    } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:04:44.737

不幸的是，UrlFetchApp 不支持 user:password@ 前缀表示法。相反，您必须手动构建 Authorization 标头，使用如下代码：

```
var response = UrlFetchApp.fetch('https://api.pinboard.in/v1/tags/get', {
  headers: {
    Authorization: 'Basic ' + Utilities.base64Encode(user + ':' + password)
  }
}); 
```

# css - 验证码创建的 CSS 样式在哪里？

> ID：10872542
> 
> 赞同：0
> 
> 时间：2012-06-03T17:43:32.707
> 
> 标签：css, captcha

我刚刚注册了验证码。它给了我 php 代码来在页面上显示验证码框和放在服务器上的代码。它工作正常，但输入框未对齐（它可能基于页面的其余样式。）我想手动修改它但我不能。

当我在 google chrome 中执行检查代码时，它会显示我需要的输入框的样式。我取消选中了特定样式

```
position: absolute!important 
```

现在看起来不错。现在我需要实际修改代码。但它说位置是registration.php:1。这是哪里？Registration.php 是为页面创建 html 代码的文件，它对验证码 php 文件执行“要求”。但我也没有在该文件中看到 css 样式！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T18:46:34.250

查看这 2 张图片以了解 CSS 的来源：

1- 在元素选项卡下的 Chrome 控制台中

![铬控制台](../Images/7589486f412cc0f816103d997beec437.png)

2- 在资源选项卡下的 Chrome 控制台中

![铬控制台](../Images/5b3d84c6718e416e44911c8c8522ad7c.png)

# azure - WadLogsTable 的最后记录

> ID：10872547
> 
> 赞同：1
> 
> 时间：2012-06-03T17:43:57.027
> 
> 标签：azure, azure-storage

如何从 WADLogsTable 中获取按日期排序的最后 100 条记录？

我试图用这段代码来做，但它不起作用

```
 var query = (from entity in tsc.CreateQuery<LogsObject>("WADLogsTable")
                        where entity.PartitionKey.CompareTo(startTime.ToUniversalTime().Ticks.ToString("D19")) >= 0
                        orderby entity.EventTickCount descending
                        select entity); 
```

其中 tsc 是 TableServiceContext。

我可以获得记录，但我对最近的日志感兴趣。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:47:56.570

Windows Azure 表存储不支持排序，因此实体返回时总是按其 PartitionKey+RowKey 排序。但我怀疑日志条目已经按时间倒序排列。不是吗？

[**编辑**]显然他们不是。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T12:17:38.490

```
 CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ATCommon.DiagnosticConfig);
    CloudTableClient cloudTableClient = storageAccount.CreateCloudTableClient();
    TableServiceContext serviceContext = cloudTableClient.GetDataServiceContext();
    IQueryable<WadLogEntity> traceLogsTable = serviceContext.CreateQuery<WadLogEntity>("WADLogsTable");
    var selection = from row in traceLogsTable where row.PartitionKey.CompareTo("0" + DateTime.UtcNow.AddHours(hours).Ticks) >= 0 select row;
    //var selection = from row in traceLogsTable where row.PartitionKey.CompareTo("0" + DateTime.UtcNow.AddMinutes(-5.0).Ticks) >= 0 select row;
    CloudTableQuery<WadLogEntity> query = selection.AsTableServiceQuery<WadLogEntity>();
    IEnumerable<WadLogEntity> output = query.Execute();
 return output.OrderByDescending(s => s.Timestamp).Take(100).ToList(); 
```

# android - Android：在同一个活动中读取两个数据库

> ID：10872548
> 
> 赞同：0
> 
> 时间：2012-06-03T17:43:58.993
> 
> 标签：android, sql

我已经创建了几个数据库，并试图让用户查看所有数据库中的信息。在下面的代码中，您可以看到我正在打开、获取信息并关闭每个数据库。问题是它只向我显示来自第一个调用的数据库的信息，并将其放入两个 TextViews 中。我似乎无法找到解决此问题的方法或为什么会发生这种情况。有什么建议么？

```
public class SQLView extends Activity {

protected void onCreate(Bundle savedInstanceState){
    //TODO
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqlview);

    ViewAbsData();
    ViewBicepsData();

 }

public void ViewAbsData(){
    //list ab exercises in database
    TextView tvAbs = (TextView)findViewById(R.id.absDatabaseView);
    AbsDatabase absinfo = new AbsDatabase(SQLView.this);
    try {
        absinfo.open();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String absdata = absinfo.getData();
    absinfo.close();
    tvAbs.setText(absdata);
}

public void ViewBicepsData(){
    //list biceps exercises in database
    TextView tvBiceps = (TextView)findViewById(R.id.bicepsDatabaseView);
    BicepsDatabase bicepsinfo = new BicepsDatabase(SQLView.this);
    try {
        bicepsinfo.open();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String bicepsdata = bicepsinfo.getData();
    bicepsinfo.close();
    tvBiceps.setText(bicepsdata);
}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:43:06.903

一个数据库绰绰有余。正确构建表将提供对数据的有效关系访问。

# css - 如何给具有固定填充或边距或边框的整个窗口的 div 宽度？

> ID：10872549
> 
> 赞同：0
> 
> 时间：2012-06-03T17:44:12.043
> 
> 标签：css

我想要一个 div 占据窗口的整个宽度，并有一些填充或边距或边框。我知道我可以通过给 div 设置 90% 的宽度和 5% 的填充或边距或边框来获得它。这很好用，但是当我减小窗口大小时，边框或边距或填充开始缩小。我不想要这个。所以我向专家提出的问题是我如何使用固定的填充或边距或边框？

如果窗口较窄，我宁愿选择媒体查询来检测宽度，然后为某个宽度提供另一个固定的填充或边距或边框。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:55:40.567

而不是百分比宽度，`width:auto`然后使用 div 将扩展到其容器的宽度，同时考虑填充和边距以使其足够宽以适合它们。

然后，如果你的 body 和 html 元素的宽度为 100%，你的 div 的边距和内边距应该总是正好适合视口。

# ruby-on-rails-3 - Rails3 SQLite3 DROP TABLE CASCADE 错误

> ID：10872553
> 
> 赞同：1
> 
> 时间：2012-06-03T17:44:27.763
> 
> 标签：ruby-on-rails-3, sqlite, foreign-keys, cascade

我有一个关于 Rails 3.0.2 的项目。它相当大并且与 MySQL 数据库配合得很好。但是当我尝试使用 SQLite 数据库运行它时，迁移过程中出现错误：

```
SQLite3::SQLException: near "CASCADE": syntax error: DROP TABLE "table_name" CASCADE 
```

我搜索并发现可能`'PRAGMA foreign_keys = ON'`对 SQLite 会有所帮助。所以我之前尝试过添加`'execute("PRAGMA foreign_keys = ON")'`迁移，`'DROP TABLE table_name'`但这没有帮助。

如何在 Rails3 中为 SQLite 打开 foreign_keys？

宝石版本

*   sqlite3 (1.3.6)
*   sqlite3-ruby (1.3.3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:47:29.300

Here's the syntax diagram for [SQLite's DROP TABLE](http://www.sqlite.org/lang_droptable.html):

![enter image description here](../Images/8ede355751cf582331d8817f88b1911f.png)

In case the image moves, the syntax is like this:

```
drop table if exists db_name.table_name 
```

where the `if exists` and `db_name.` parts are optional. There is no CASCADE in there so SQLite simply doesn't support CASCADE when using DROP TABLE and there's nothing you can do to add it (unless, of course, you want to hack the SQLite C source and add it yourself). You have to accept certain limitations when using SQLite, this is one of them.

If you want to use one migration for both SQLite and MySQL then you'll have to check which database is being used and execute the appropriate SQL or find something that works everywhere (i.e. perform the CASCADE by hand). The easy way to check which database you're using that I can think of right now would be:

```
case connection
when ActiveRecord::ConnectionAdapters::PostgreSQLAdapter
    # PostgreSQL things go here
when ActiveRecord::ConnectionAdapters::AbstractMysqlAdapter
    # MySQL things go here
when ActiveRecord::ConnectionAdapters::SQLiteAdapter
    # SQLite things go here
...
end 
```

# asp.net - 显示来自数据库的未知数量的图像？

> ID：10872554
> 
> 赞同：0
> 
> 时间：2012-06-03T17:44:33.040
> 
> 标签：asp.net, html

我对 aspx 页面很陌生，但对 c# 不熟悉。

我有一个 SQL 语句，可以从 ms sql 数据库中获取图像，我可以很好地做到这一点，并且有一个图像的字节数组列表或数据表。

我想我想用一个

我最困惑的部分是如何将字节数组显示为图像？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:16:22.153

您需要编写一个处理程序 (*.ashx) 来完成获取图像字节并将它们写入响应流的工作。然后你在你的 .src="" 属性中引用这个处理程序。这是有关如何执行此操作的教程：

[http://www.developerfusion.com/code/5223/using-ashx-files-to-retrieve-db-images/](http://www.developerfusion.com/code/5223/using-ashx-files-to-retrieve-db-images/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:16:45.230

如果数据库中的图像相当小，您可以使用内联图像。

```
// This is just example, you get it from DB
byte[] image = System.IO.File.ReadAllBytes(@"c:\\test.png");
string imageBase64 = Convert.ToBase64String(image);
...
// Output in your HTML page
<img src="data:image/png;base64,<%= imageBase64 %>" alt="Test inline" /> 
```

# android - putExtra 方法值？

> ID：10872556
> 
> 赞同：0
> 
> 时间：2012-06-03T17:44:51.130
> 
> 标签：android, listview, sqlite

```
 public class Breakfast extends Activity implements OnItemClickListener {

DBOpener dbopener;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //for fullscreen view
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.dinner);

    dbopener = new DBOpener(this);
}

// Open the DB, query all subject codes and refresh the listview when app resumes
@Override
protected void onResume() {
    super.onResume();

    // Configure the listview
    ArrayList<String> mealNames = new ArrayList<String>();
    ListView lstDine = (ListView)this.findViewById(R.id.dine);
    lstDine.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, mealNames));

    // Open/create the DB
    try
    {
      dbopener.createDatabase(); // Create DB if necessary
      dbopener.openDatabase(); // Open the DB

      Cursor dinners = dbopener.getBreakfastNames();
      while (dinners.moveToNext()) {
          mealNames.add(dinners.getString(0)); // Get the Lunch Name & adds to list                                                 
      }
      dinners.close();

      // Update the listview
      ArrayAdapter<String> ad = (ArrayAdapter<String>)lstDine.getAdapter();
      ad.notifyDataSetChanged();     
      lstDine.setOnItemClickListener(this);
    }
    catch (Exception e)
    {
        Toast.makeText(this, "Could not open DB", //Display when Database Cannot be opened
        Toast.LENGTH_LONG).show();
    }
}

//Close the DB when app pauses
@Override
protected void onPause() {
    super.onPause();        
    dbopener.close();
}

// When user clicks on an item
public void onItemClick(AdapterView<?> parent, View v, int pos, long id) {

    switch(pos)
    {

        case 0 :
        Intent event1 = new Intent("com.edu.tp.iit.mns.Display");
        //event1.putExtra("name" , ???);
        //event1.putExtra("nutrition" , ???);
        //event1.putExtra("rating" , ???);
        startActivity(event1);
        break; 
```

这只是代码的一部分。我想知道我应该在（？？？）里面放什么。它是一个列表视图项..所以对于案例 0，我希望名称营养和评级显示在 Display 类中。这是我使用 SQLite 数据库浏览器完成的数据库。

```
 public class DBOpener extends SQLiteOpenHelper {

    private static String DB_PATH = 
   "/data/data/com.edu.tp.iit.mns/databases/"; //path of our database
    private static String DB_NAME ="finals"; // Database name
    private final Context myContext;
    private SQLiteDatabase db;

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}

public DBOpener(Context context) {
    super(context, DB_NAME, null, 1);
    myContext = context;
}

public void createDatabase() throws IOException {
    boolean dbExists = checkDatabase();
    if (dbExists) {
        // Do nothing, DB already exists
        Log.d("DBOpener", "DB exists");
    } else {
        // By calling this method an empty database will be created
            // in the default system path of your application, which we
            // will overwrite with our own database.
        Log.d("DBOpener", "DB does not exit - copying from assets");
        this.getReadableDatabase();
        copyDatabase();
        }
}

private boolean checkDatabase() {
    SQLiteDatabase checkDB = null;
    try {
        // Try opening the database
        String path = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(path, null, 
            SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        // If it fails, DB does not exist
    }
    if (checkDB != null)
        checkDB.close(); // Close the DB; we don’t need it now
    return checkDB != null;
}

private void copyDatabase() throws IOException {
    InputStream istream = myContext.getAssets().open(DB_NAME);
    OutputStream ostream = new FileOutputStream(DB_PATH + DB_NAME);
    // Transfer bytes from istream to ostream
    byte[] buffer = new byte[1024];
    int length;
    while ((length = istream.read(buffer)) > 0) {
        ostream.write(buffer, 0, length);
    }
    // Close streams
    istream.close();
    ostream.flush();
    ostream.close();
}

public void openDatabase() throws SQLiteException {
    db = SQLiteDatabase.openDatabase(DB_PATH + DB_NAME, null, 
        SQLiteDatabase.OPEN_READWRITE);
}

@Override
public synchronized void close() {
    if (db != null)
        db.close();
    super.close();
}

// Retrieve all subject codes
public Cursor getDinnerNames() {
    if (db == null)
        return null;
    return db.query("dinner", new String[] {"name"},
        null, null, null, null, null);
}

// Get details of specific subject
public Cursor getDinnerDetails(String name) {
    if (db == null)
        return null;
    return db.query("dinner", new String[] {"name", "nutrition", "rating"},
        "name = ?", new String[] {name}, null, null, null);
}

// Retrieve all subject codes
public Cursor getLunchNames() {
    if (db == null)
        return null;
    return db.query("lunch", new String[] {"name"},
        null, null, null, null, null);
}

// Get details of specific subject
    public Cursor getLunchDetails(String name) {
        if (db == null)
            return null;
        return db.query("dinner", new String[] {"name", "nutrition", "rating"},
            "name = ?", new String[] {name}, null, null, null);
    }

    // Retrieve all subject codes
    public Cursor getBreakfastNames() {
        if (db == null)
            return null;
        return db.query("breakfast", new String[] {"name"},
            null, null, null, null, null);
    }

    // Get details of specific subject
    public Cursor getBreakfastDetails(String name) {
        if (db == null)
            return null;
        return db.query("breakfast", new String[] {"name", "nutrition", "rating"},
            "name = ?", new String[] {name}, null, null, null);
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:55:58.100

所以`putExtra()`方法将扩展数据添加到意图中。因此，当您想通过 传递数据时使用它`Activities`，您可以放置​​所有原始类型，如浮点、整数、短或引用类型，如`String`. 您可以使用其他方法添加`Bundle`对象。**所以你添加到你需要的意图数据类型**。`putExtras()``Objects`

 **看到这个：

![在此处输入图像描述](../Images/b51a1cf7418b46b36afa64189f30116e.png)

`Object`添加到的示例`Intent`：

```
Intent intent = new Intent(DownloadingActivity.this, DownloadService.class);
                        intent.putExtra("url", "http://dl.dropbox.com/u/67617541/DOR0023.rar");
                        intent.putExtra("receiver", new DownloadReceiver(new Handler())); 
```

您应该[在此处阅读有关 Intent 的内容](http://developer.android.com/reference/android/content/Intent.html)

因此，您创建`ArrayAdapter`了字符串并使用`getBreakfastNames()`该返回仅早餐名称，因此您可以仅添加到意图

```
String name = (String) parent.getItemAtPosition(pos);
event1.putExtra("name", name); 
```

但我建议您创建从例如扩展的类`SimpleCursorAdapter`并使用设计模式`Holder`来完全控制您的数据`ListView`。它更干净，更快。**

# windows - 与 Windows 上本地 IPC 的命名管道相比，TCP 套接字有多慢？

> ID：10872557
> 
> 赞同：39
> 
> 时间：2012-06-03T17:44:54.633
> 
> 标签：windows, performance, sockets, named-pipes

我正在开发一个 TCP 代理，放在一个 TCP 服务前面，该服务应该处理来自野外 Internet 的 500 到 1000 个活动连接。

代理与服务在同一台机器上运行，并且大部分是透明的。该服务在很大程度上不知道代理，唯一的例外是通知客户端的真实远程 IP 地址。

这意味着，对于每个入站打开的 TCP 套接字，服务器上还有两个套接字：代理中的第二个套接字，以及代理后面的真实服务上的一个。

两个代理套接字上的发送和接收窗口大小设置为 1024 字节。

这对性能有何影响？这个配置有多慢？我是否应该努力将服务更改为使用命名管道（或其他 IPC 机制），或者 localhost TCP 套接字在很大程度上是一个高效的 IPC？

两个应用程序的合并不是一种选择。现在我们被两个进程配置困住了。

**编辑**：在同一硬件上拥有两个独立进程的原因是 100% 的经济性。我们只有一台服务器，我们不打算获得更多（没有钱）。

TCP 服务是 Visual Basic 6 中的遗留软件，其发展超出了我们的预期。代理是 C++。我们没有时间、金钱和人力来重写 VB6 代码并将其迁移到现代编程环境。

代理是我们试图缓解服务上的特定性能问题的尝试，这是我们不时遇到的[DDoS 攻击。](http://en.wikipedia.org/wiki/Denial-of-service_attack)

代理是开源的，[这里是项目源码](http://code.google.com/p/mago-blanco-proxy/)。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-04T01:03:39.353

它将是相同的（或至少没有明显不同）。Winsock 足够聪明，可以知道它是否正在与同一主机上的套接字通信，在这种情况下，它将使 IP 以下的几乎所有内容短路并直接将数据复制到缓冲区。在命名管道与套接字方面，如果您将来可能需要能够与不同的机器进行通信，请选择套接字。如果您知道您永远不需要这样做，请选择您的开发人员最熟悉或最熟悉的那个。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-27T15:33:18.120

对于稍后阅读本文的任何人，我想添加一些回答原始问题的发现。

对于我们正在开发的实用程序，我们有一个可以使用命名管道或具有相同调用的 TCP 的网络类。

这是我们测试系统上的典型环回文件传输：

TCP/IP 传输时间：2.5 秒
命名管道传输时间：3.1 秒

现在，如果您离开机器并连接到网络上的远程计算机，命名管道的性能会更差：

TCP/IP 传输时间：12 秒
命名管道传输时间：2.5 分钟（是的分钟！）

我意识到这只是一个系统（Windows 7）但我认为它是命名管道有多慢的一个很好的指标……而且似乎 TCP 是要走的路。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-03-30T17:07:47.777

我知道这个话题很老了，但它对我来说仍然很重要，也许其他人将来也会关注这个。

我通过 TCP 连接和命名管道在 Excel (VBA) 和同一台机器上的另一个进程之间实现了 IPC。

在一个快速的性能测试中，我从客户端（Excel）向服务器（不是 Excel）提交了一条包含 26 个字节的消息，并等待来自其他进程的回复消息（在示例中由 12 个字节组成）。我在一个循环中执行了很多次并测量了平均执行时间。

使用 localhost 上的 TCP（Windows 7，无快速路径），一次“对话”（请求+回复）大约需要 300-350 微秒。尤其是发送数据非常慢（通过 TCP 发送 26 个字节大约需要 200 微秒）。使用命名管道，一次对话平均需要大约 60 微秒 - 所以要快很多。

我不完全确定为什么差异如此之大。我在其中测试过的公司环境有严格的防火墙、包检查等等，所以我*认为*这可能是因为即使是基于 localhost 的 TCP 连接也通过了显着减慢它的安全措施，而命名管道可能没有.

TL:DR: 在我的例子中，命名管道比 TCP 小包快 5-6 倍（还没有用更大的包测试）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-03T18:25:42.963

[http://msdn.microsoft.com/en-us/library/aa178138(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa178138(v=sql.80).aspx)

让我为你总结一下。如果您担心性能，请使用 TCP/IP。但是，如果您有一个非常快的网络并且您不担心性能，那么命名管道将是“整洁的”，因为它可能会为您节省一些代码。

更不用说，如果您坚持使用 TCP，那么您将拥有可以扩展的东西，甚至在时机成熟时进行负载平衡。

干杯，

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-04T00:48:31.507

在您描述的场景中，本地 TCP 连接不太可能成为瓶颈。当然，它会引入一些开销，但这应该可以忽略不计，除非你的 CPU 已经很热了。

猜测一下，如果您的服务器的 CPU 使用率通常低于 50% 左右（使用代理），则不必担心最小化与本地 TCP 连接相关的开销。

如果 CPU 使用率经常超过 80%，您可能应该进行一些分析。我将首先比较代理到位时的 CPU 负载（或者，如果可以有意义地测量它，性能更好）。除非代理正在执行一些复杂的处理，否则与额外 TCP 连接相关的开销可能是代理引入的总开销的很大一部分，因此这应该至少为您提供一个数量级的估计值d 通过使用更有效的 IPC 形式获得收益。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-03T18:26:23.920

在同一台机器上有代理的原因是什么，只是好奇？

反正：

IPC有几种方法，TCP/IP，命名管道在速度和复杂度上是相当的。如果您真的想要可扩展且几乎没有开销的东西：使用共享内存。最好与无锁算法结合使用以推进指针（或为每个读取器（代理/服务）和写入器（服务/代理）使用一个缓冲区）。

# c++ - C++ 结构数组的分配

> ID：10872559
> 
> 赞同：2
> 
> 时间：2012-06-03T17:45:09.080
> 
> 标签：c++, arrays, struct, allocation

我必须在 C++ 中分配一个结构数组，任何结构都包含两个 int 向量。这是我的结构：

```
typedef struct _Sample{
vector<int> contourX;
vector<int> contourY;
}Sample; 
```

为了分配这个数组，我编写了以下代码：

```
data = (struct _Sample*) malloc(sizeof(struct _Sample) * nsamples); 
```

当我尝试将 Sample 元素分配给 data[0] 时，运行时出现错误。哪里有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T17:48:17.907

您正在尝试创建一个数组，为此，您应该使用它`new[]`来分配内存（并`delete []`取消分配它）。

这样你的代码应该是：

```
Sample* data = new Sample[nsamples]; 
```

然后你可以像任何数组一样迭代数组的每个元素：

```
for(int i = 0; i < nsamples; i++)
{
    data[i].contourY // do something
    data[i].contourX // do something
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T17:47:14.933

经验法则：永远不要`malloc`在 C++ 中使用。¹ 它是一个 C 函数，因此，它并没有像调用构造函数那样做所有 C++ 的事情。

如果必须动态分配内存，请`new`改用。

* * *

^(1\. 这是一条规则，有少数例外，但在大多数情况下，可以安全地视为一揽子规则。)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T17:48:44.747

您需要使用`new`- 需要执行向量的构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T17:47:42.010

如果您使用 C++ 编程，您可以使用“new”...例如：_Sample* data = new _Sample[size];

# php - 为什么全文搜索找不到？

> ID：10872565
> 
> 赞同：1
> 
> 时间：2012-06-03T17:45:54.470
> 
> 标签：php, mysql, search, wampserver, full-text-search

我需要一个适用于 MySql 数据库的搜索引擎，并且我在列上有 FULLTEXT 索引，但出于某种原因 - 有时他会找到我要求的内容，有时他没有 - 我真的不明白为什么。

例如，我的 MyIsam`songs`表中有一个`name`索引 FULLTEXT 的列。

我有这些记录：

亲爱的孩子，别哭

当我做这个查询时：

```
$query = $msi->query("SELECT `name` FROM songs WHERE MATCH(`name`) AGAINST ('Mine') ");
while($fetch = $query->fetch_assoc())
echo $fetch['name']."<br />"; 
```

它找到它。

但是当我这样做时：

```
$query = $msi->query("SELECT `name` FROM songs WHERE MATCH(`name`) AGAINST ('Dont') "); // or 'don\'t' , 'dont cry' , 'Don\'t Cry' , etc..
while($fetch = $query->fetch_assoc())
echo $fetch['name']."<br />"; 
```

它没有。

而且我真的不明白为什么..另一个例子是我`artist`在同一张桌子上有另一列有一条记录 - 'Sia'。即使我进行查询以查找 'Sia' ，它也不起作用！有人可以解释一下为什么吗？？（这不是因为最小长度 - 我使用 in_boolean_mode）

顺便说一句，我使用 wampserver，所以我认为这可能与他们的 MySql 没有更新到它的最新版本或类似的东西有关..

请帮忙！我很绝望.. ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T17:52:16.587

`Dont`是停用词

您应该编辑停用词列表

# algorithm - 有向循环图或锦标赛（图）中的边消除

> ID：10872566
> 
> 赞同：0
> 
> 时间：2012-06-03T17:46:04.703
> 
> 标签：algorithm, graph, directed-graph, tournament

我想要一种算法来消除循环有向图或主要是锦标赛的边，并输出一种边数最少的树状结构。

消除应基于侧面的重量，如下面的简单现实示例所述。

如果有三个朋友 A,B,C。以彼此之间借钱和还钱为例。

A 人必须转移 B 人 - 10 美元。B 人必须转移 C 人 - 20 美元。个人 C 必须转移个人 A - 20 美元。

在最终结算中，为了尽量减少彼此之间的转账次数，我们可以将上述内容重新安排为“B 人将向 A 人转账 - 10 美元”，一切都已解决。

我正在寻找一些算法，当给定每边的权重和方向时，它适用于任意数量的节点。

鉴于该图可以重新排列，并且该图很可能是一个“[锦标赛](http://en.wikipedia.org/wiki/Tournament_%28mathematics%29)”，其中每个节点都连接到图中的所有节点，那么我遵循的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:23:39.147

n - 1 条边很容易获得。首先计算每个人的“净资产”，将借款人放在一个列表中，将贷方放在另一个列表中，然后反复从排在最前面的借款人转移到贷方，如果饱和则删除一个或两个（返回为零）。

前面的算法是一个 2 近似。最小化传输的数量意味着最大化双饱和传输的数量，这是一个类似背包的问题，​​至少是弱 NP-hard。有一个指数时间动态程序可能适用于小 n（天真的更像 n^n）。

# python - 旋转后Python PIL保存图像

> ID：10872568
> 
> 赞同：1
> 
> 时间：2012-06-03T17:46:16.560
> 
> 标签：python, image, save, rotation, python-imaging-library

我在旋转图像后保存图像时遇到问题。我的意思是，当我在旋转图像后调用函数 save 时，什么也没有发生。旧图像保持不变，我的另存为功能也出现了同样的问题。我想问题出在我的旋转功能上：

```
 def right90 (root, image, panel, filemenu):
        image = image.transpose(Image.ROTATE_90)
        image1 = ImageTk.PhotoImage(image)
        root.geometry("%dx%d+%d+%d" % (image.size[0], image.size[1], 0, 0))
        panel.configure(image = image1)
        panel.pack(side='top', fill='both', expand='yes')
        panel.image = image1 
```

下面是我使用的保存功能。我猜它似乎没有任何问题。

```
def save(image, filename):
    image.save(filename) 
```

但是，我似乎无法弄清楚问题出在哪里。我真的希望有人能帮我找到它。谢谢。

**已编辑**

下面是我声明全局变量的函数。这用于打开图像文件并使用文件的信息为变量赋值。

```
def display(root):
    global filename
    filename = askopenfilename(filetypes=[("All Files","*"),("All Picture Files","*bmp; *.png; *.jpg; *.jpeg; *.jpe; *.tif; *.tiff")])

    global image
    global panel
    try:
        image = Image.open(filename)
        image1 = ImageTk.PhotoImage(file=filename)
        root.geometry("%dx%d+%d+%d" % (image.size[0], image.size[1], 0, 0))
        panel.configure(image = image1)
        panel.pack(side='top', fill='both', expand='yes')
        panel.image = image1

    except NameError:        
        image = Image.open(filename)
        image1 = ImageTk.PhotoImage(file=filename)
        root.geometry("%dx%d+%d+%d" % (image.size[0], image.size[1], 0, 0))
        panel= Label(root, image = image1)
        panel.pack(side='top', fill='both', expand='yes')
        panel.image = image1 
```

以下是我编写的调用旋转函数的代码。以防有人需要。

```
rotatemenu.choices.add_command(label="rotate right 90°", command = lambda:img.right90(root, image, panel, filemenu)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T17:57:05.417

我怀疑当您调用 时`save`，您传递了一个引用原始图像的变量。只是猜测，因为`right90`没有`return image`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:15:24.250

是否必须同时具有变量名`image`和`image1`？我认为这可能是问题的根源，我同意@janne Karila，您很可能不会返回更改后的图像。

你能在你的函数里面做一个`image.show()`/看看它显示了什么吗？`image1.show()``right90`

# azure - 无法在服务总线队列上获取消息

> ID：10872571
> 
> 赞同：0
> 
> 时间：2012-06-03T17:46:35.187
> 
> 标签：azure, jsp, azure-servicebus-queues

我有一个小型 Java Web 应用程序，当用户单击按钮时，我在服务总线队列上发送消息。我想在我的 jsp 页面上显示消息。但是当我打电话时

`resultQM = service.receiveQueueMessage(queueName, opts);`

我得到以下异常。在此先感谢您的帮助。

```
 java.lang.IllegalArgumentException: org.codehaus.jackson.map.JsonMappingException: Can not construct instance of java.util.Date from String value 'Sun, 03 Jun 2012 13:54:40 GMT': not a valid representation (error: Can not parse date "Sun, 03 Jun 2012 13:54:40 GMT": not compatible with any of standard forms ("yyyy-MM-dd'T'HH:mm:ss.SSSZ", "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'", "EEE, dd MMM yyyy HH:mm:ss zzz", "yyyy-MM-dd"))
 at [Source: [B@8719e; line: 1, column: 70] (through reference chain: com.microsoft.windowsazure.services.serviceBus.implementation.BrokerProperties["LockedUntilUtc"])
    com.microsoft.windowsazure.services.serviceBus.implementation.BrokerPropertiesMapper.fromString(BrokerPropertiesMapper.java:41)
    com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusRestProxy.receiveMessage(ServiceBusRestProxy.java:187)
    com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusRestProxy.receiveQueueMessage(ServiceBusRestProxy.java:151)
    com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusExceptionProcessor.receiveQueueMessage(ServiceBusExceptionProcessor.java:108)
    messaging.QueueListener.getMessage(QueueListener.java:22)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:116)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T02:20:26.160

我建议您检查本地机器的时钟是否正确。还尝试创建一个 SimpleDateFormat，如[Jersey + Jackson deserialization failure with date object](https://stackoverflow.com/questions/4788175/jersey-jackson-deserialization-problem-with-date-object)中所述（类似的例外）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:37:31.790

`US`在调用 receiveQueueMessage 之前将默认系统语言环境设置为：

```
Locale.setDefault(Locale.US); 
```

**原因：**

适用于 Java 的 Windows Azure SDK 使用 Jackson，它在创建用于解析日期的 SimpleDateFormat 对象时使用默认系统区域设置。Windows Azure 服务总线返回使用 RFC-1123 和英语语言环境格式化为字符串的日期。RFC-1123 日期格式包含星期几，当您的默认语言环境不是英语并且具有不同的星期几名称时，解析器将失败。

资料来源：[Alexander Racheev](http://social.msdn.microsoft.com/Forums/sv-SE/servbus/thread/fad66738-e881-4e6a-af79-c9aeaed58f98)在 MSDN 论坛中的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:52:14.977

在最新版本的 Windows Azure SDK for Java 中，版本 0.4.2。这应该已经修复，让我们知道是否有人仍然可以复制这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T17:49:47.353

我认为例外情况已经足够清楚了？有一条消息包含一个包含日期的字符串，并且库无法将字符串解析为有效日期。

```
"Sun, 03 Jun 2012 13:54:40 GMT": not compatible with any of standard forms ("yyyy-MM-dd'T'HH:mm:ss.SSSZ", "yyyy-MM-dd'T'HH:mm:ss.SSS'Z'", "EEE, dd MMM yyyy HH:mm:ss zzz", "yyyy-MM-dd") 
```

# php - 从数组构造多维树

> ID：10872574
> 
> 赞同：0
> 
> 时间：2012-06-03T17:47:06.777
> 
> 标签：php, arrays, multidimensional-array, tree, iteration

我正在尝试从这样的数组创建一棵树：

> array('admin/home', 'admin/home/page', 'admin/test', 'team/tree/template', 'site');

或者更直观地视为：

> 管理员/主页
> 
> 管理员/主页/页面
> 
> 管理/测试
> 
> 团队/树/模板
> 
> 地点

但是，我还需要将每个数组的最后一个嵌套字符串变为粗体，以表示它本身就是一个网页。

最终产品应如下所示：

```
    管理员
        主页
            测试_
        团队
        树
            **模板**
    **网站** 
```

 **我使用了该站点上的一些不同解决方案，但未能获得正确的结果。

任何关于我应该从哪里开始的想法或例子将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:17:19.837

您可能正在寻找这样的东西：

```
<?php

$items = array('admin/home', 'admin/home/page', 'admin/test', 'site', 'team/tree/template');
sort($items);

$previous = array();
foreach ($items as $item) {
    $path = explode('/', $item);

    // $i is common nesting level of the previous item
    // e.g. 0 is nothing in common, 1 is one level in common, etc.
    for ($i = 0; $i < min(count($path), count($previous)) && ($path[$i] == $previous[$i]); $i++) { }

    // close <ul> from previous nesting levels:
    // that is, we close the amount of levels that the previous and this one have NOT in common
    for ($k = 0; $k < count($previous)-$i-1; $k++) { echo "</ul>"; }
    // $j is the current nesting level
    // we start at the common nesting level
    for ($j = $i; $j < count($path); $j++) {
        // open <ul> for new nesting levels:
        // i.e., we open a level for every level deeper than the previous level
        if ($j >= count($previous))
            echo "<ul>";
        echo "<li>";
        // make the path bold if the end of the current path is reached
        if (count($path)-1 == $j)
            echo "<b>" . $path[$j] . "</b>";
        else
            echo $path[$j];
        echo "</li>";
    }
    $previous = $path;
}
// close remaining <ul>
for ($k = 0; $k < count($previous); $k++) { echo "</ul>"; }
?> 
```

请注意，我对数组进行排序以确保所有嵌套项彼此相邻。

它可能有一些错误，但我想你可以自己解决它们。请注意，我在打开嵌套的`<ul>`. 这不是应该的。我猜你实际上应该在那个级别打开嵌套`<ul>`在决赛`<li>`中，但你可以自己弄清楚。

**更新**`<ul>`我更新了代码以在某些情况下正确关闭's。**

# javascript - javascript单词到数字转换器中缺少空格

> ID：10872586
> 
> 赞同：0
> 
> 时间：2012-06-03T17:49:22.593
> 
> 标签：javascript, math, numbers, converter

我已经为 0-999 创建了一个数字到单词的转换器，并且除了一个错误之外，它几乎可以完美地工作。

在某些超过一百的数字中，“百”部分和“十/单位”部分之间缺少空格。

例如 864 给出“eth canspajar ha tri ugens”，其中罐和 pajar 之间需要有空间（百 = 罐）

这似乎是一个常规问题，因为它发生在 164、264、364 等以及其他数字的范围内。

任何对 Javascript 或数学有更好了解的人都可以看看我的代码，看看他们是否能发现模式或解决方案？该代码取自我没有制作的法语数字转换器，而且我对 Javascript 相对较新，因此我很难完全理解那里的所有内容。

[您可以在下面或http://jsfiddle.net/nickykw/tMXmj/2/](http://jsfiddle.net/nickykw/tMXmj/2/)上查看代码

非常感谢

```
 function num2Letters(number) {

        if (isNaN(number) || number < 0 || 999 < number) {
            return 'Veuillez entrer un nombre entier compris entre 0 et 999.';
        }

        var units2Letters = ['', 'onen', 'dew', 'tri', 'pajar', 'pemp', 'whegh', 'seyth', 'eth', 'naw', 'deg', 'udnek', 'dowdhek', 'tredhek', 'peswardhek', 'pemthek', 'whetek', 'seytek', 'etek', 'nownsek'],
            tens2Letters  = ['', 'deg', 'ugens', 'warn ugens', 'dew ugens', 'ha dew ugens', 'tri ugens', 'ha tri ugens', 'pajar ugens', 'ha pajar ugens'];
            twenties2Letters  = ['', 'deg', 'ugens', 'warn ugens', 'dew ugens', 'ha dew ugens', 'tri ugens', 'ha tri ugens', 'pajar ugens', 'ha pajar ugens', 'pemp ugens', 'ha pemp ugens', 'whegh ugens', 'ha whegh ugens', 'seyth ugens', 'ha seyth ugens', 'eth ugens', 'hag eth ugens', 'naw ugens', 'ha naw ugens'];
            hundreds2Letters  = ['', 'cans', 'dew cans', 'tri hans', 'pajar cans', 'pemp cans', 'whegh cans', 'seyth cans', 'eth cans', 'naw cans'];

        var units    = number % 10,
            tens     = (number % 100 - units) / 10,
            twenties = (number % 200 - units) / 10,
            hundreds = (number % 1000 - number % 100) / 100;

        var unitsOut, tensOut, twentiesOut, hundredsOut;

        if (number === 0) {

            return 'mann';

        } else {

            // THE UNITS

        unitsOut = units2Letters[units];

            // THE TENS

            if (tens === 1 && units > 0) {

                tensOut = units2Letters[10 + units];
                unitsOut = '';

            } else if (tens === 2 && units !== 0 ) {

                tensOut = units2Letters[units] + ' warn ' + tens2Letters[tens];
                unitsOut = '';

            } else if (tens === 3) {

                tensOut = units2Letters[10 + units] + ' ' + tens2Letters[tens];
                unitsOut = '';

            } else if ((tens === 4 && units !== 0) || (tens === 6 && units !== 0) || (tens === 8 && units !== 0)) {

                tensOut = units2Letters[units] + ' ha ' + tens2Letters[tens];
                unitsOut = '';

            } else if (tens === 5 || tens === 7 || tens === 9) {

                tensOut = units2Letters[10 + units] + ' ' + tens2Letters[tens];
                unitsOut = '';

            } else {

                tensOut = tens2Letters[tens];

            }

            // THE TWENTIES - used only for 120-199

           if ((number >= 121 && number <= 199) && (tens === 2 || tens === 4 || tens === 8) && units > 0) {

                twentiesOut = units2Letters[units] + ' ha ' + twenties2Letters[twenties];

            } else if ((number >= 121 && number <= 199) && (tens === 3 || tens === 5 || tens === 7 || tens === 9) ) {

                twentiesOut = units2Letters[10 + units] + ' ' + twenties2Letters[twenties];

            } else if ((number >= 121 && number <= 199) && (tens === 6 ) ) {

                twentiesOut = units2Letters[units] + ' hag ' + twenties2Letters[twenties];

            } else {

                twentiesOut = twenties2Letters[twenties];

            }

            // THE HUNDREDS

        //if the number is x01-09 or number is x1x or number is x2x or number is x3x then add a hag/ha after the number (hag if the number is xx1 or xx8 or x20)
            if ((hundreds >= 1 && tens === 0 && units >= 1) || hundreds >= 1 && tens === 1 || hundreds >= 1 && tens === 2 || hundreds >= 1 && tens === 3) {

                hundredsOut = hundreds2Letters[hundreds] + (hundreds >= 1 && (units === 1 || units === 8) || hundreds >= 1 && tens === 2 && units === 0 ? ' hag ' : ' ha ');

           // insert a ha for 40, 60 and 80 above 200
            } else if (hundreds >= 2 && (tens === 4 || tens === 6 || tens === 8) && units === 0) {

                hundredsOut = hundreds2Letters[hundreds] + ' ha ';

            } else {

                hundredsOut = hundreds2Letters[hundreds];

            }

            // GET TOTAL

            if (number === 50) {

                return hundredsOut + (hundredsOut && tensOut ? ' ': '') + tensOut + (hundredsOut && unitsOut || tensOut && unitsOut ? '' : '') + unitsOut + ' <i>or</i> hanter cans';

            } else if (number === 150) {

                return hundredsOut + (hundredsOut && tensOut ? ' ': '') + tensOut + (hundredsOut && unitsOut || tensOut && unitsOut ? '' : '') + unitsOut + ' <i>or</i> deg ha seyth ugens <i>or</i> onen cans ha hanter';

            } else if (hundreds > 1 && tens === 5 && units === 0 ) {

                return hundredsOut + (hundredsOut && tensOut ? ' ': '') + tensOut + (hundredsOut && unitsOut || tensOut && unitsOut ? '' : '') + unitsOut + ' <i>or</i> ' + hundredsOut + ' ha hanter';

            } else if (hundreds === 1 && (tens === 2 || tens === 3 || tens === 4 || tens === 5 || tens === 6 || tens === 7 || tens === 8 || tens === 9) ) {

                return twentiesOut + ' <i>or</i> ' + hundredsOut + (hundredsOut && tensOut ? '': '') + tensOut + (hundredsOut && unitsOut || tensOut && unitsOut ? '' : '') + unitsOut;

            } else {

            return hundredsOut + (hundredsOut && tensOut ? '': '') + tensOut + (hundredsOut && unitsOut || tensOut && unitsOut ? '' : '') + unitsOut;

            }

        }

    }

    var userEntry;

    while (userEntry = prompt('Enter a number between 0 and 999:')) {

        alert(num2Letters(parseInt(userEntry, 10)));

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T17:55:13.427

而不是试图找到丢失的空间，我建议您重构代码，以便您不会即时编写字符串，而是将短语的组件添加到数组中（使用`push`或`concat`根据需要），然后调用`join`数组.

例如

```
var result = ['eth','cans'];
result.push('pajar');
result = result.concat(['ha','tri','ugens']);
alert(result.join(' ')); 
```

这里的优点是您的代码*更*干净，您不必担心修剪可能会在这里和那里结束某些输入的前导和尾随空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:31:21.180

你有吗？'' : '' 这没有意义，我猜其中一个需要是 ' ' （空格），如果不是，那么你甚至不需要三元运算符，只需放在那里 ''

```
 } else if (hundreds === 1 && (tens === 2 || tens === 3 || tens === 4 || tens === 5 || tens === 6 || tens === 7 || tens === 8 || tens === 9) ) {

        return twentiesOut + ' <i>or</i> ' + hundredsOut + (hundredsOut && tensOut ? '': '') + tensOut + (hundredsOut && unitsOut || tensOut && unitsOut ? '' : '') + unitsOut; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T18:31:35.397

我相信你在这里有两个问题：

1.  在“THE HUNDREDS”部分中，您将连接“hag”和“ha” - 您需要删除尾随空格。作为连接中的最后一项，您当时无法预测是否在末尾附加空格。
2.  在“GET TOTAL”部分，回报应更新如下：

`return hundredsOut + (hundredsOut && tensOut ? ' ': '') + tensOut + (hundredsOut && unitsOut || tensOut && unitsOut ? ' ' : '') + unitsOut;`

这是插入空格的正确位置。

# opengl - 每次调用 glDrawElements 时，如何将不同的统一 vec4 传递给着色器？

> ID：10872587
> 
> 赞同：-1
> 
> 时间：2012-06-03T17:49:34.367
> 
> 标签：opengl, glsl

正如标题所说，每次调用 glDrawElements 时，我如何将不同的统一 vec4（或其他）值传递给着色器？可以这样做：

着色器：

```
uniform vec4 material_ambident;

void main(void)
{
// Do somethings
} 
```

和 render() 像这样：

```
glUseProgram(program);
glUniform4fv(unf_matrial_ambident, 2, &float_array[0]);
// Bind buffer or somethings ...
glDrawElements(..);

glUniform4fv(unf_matrial_ambident, 2, &another_float_array[0]);
// Bind another buffer
glDrawElements(..); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T17:56:24.290

是的，您可以按照您的想法在不同批次的图纸之间更换制服。

# android - 在文件内部存储中创建目录

> ID：10872588
> 
> 赞同：0
> 
> 时间：2012-06-03T17:49:45.777
> 
> 标签：android, file, storage, internal, directory

如何在内部存储中创建目录？

我试过这个：

```
File file = getFilesDir(); 
```

这让我进入文件夹“/data/data/com.mypackages/files/”

然后我想在该目录中再次创建一个文件夹，假设我想在其中创建“myfiles”文件夹，使其变为“/data/data/com.mypackages/files/myfiles/”。

谁能告诉我怎么做？

我也试过这个：

```
File file = getDir("myfiles", MODE_PRIVATE); 
```

它创建了文件夹，但它是使用“app_”创建的，因此目录变为“/data/data/com.mypackages/app_myfiles”。我不希望这样，因为如果文件夹中有“app_”，我将无法读取该文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:00:47.653

解决方案就在您的眼前：D

```
m_applicationDir = new File(this.getFilesDir() + "");
m_picturesDir = new File(m_applicationDir + "/pictures"); 
```

使用此代码，我将包的目录保存在 m_applicationDir 中（在您的情况下，目录保存在文件中）。然后只需创建一个名为pictures 的子目录。

所以 m_picturesDir 指向：

```
/data/data/com.mypackages/files/pictures 
```

# sql - 用 ruby on rails 建模对称关系的最佳方法是什么？

> ID：10872596
> 
> 赞同：2
> 
> 时间：2012-06-03T17:51:03.443
> 
> 标签：sql, ruby-on-rails, database, schema, modeling

我正在寻找一种优雅的方法来在 Rails 中建模**对称关系**（如用户之间的友谊）（尽管这可能更像是一个一般的数据库问题）。我知道几种方法，但没有一种方法看起来很优雅：

1.  使用用户的外键创建 user_user 关系表。我不喜欢它，因为它本质上是一个不对称的解决方案。我看到了一种方法，它强制具有较低 id 的用户进入第一列，另一个进入第二列，并使用 union 从两端查询关系。这感觉就像一个黑客。

2.  创建一个友谊表，其中每一行代表一个关系，并且：

    *   **一对一：**向用户表添加一列以引用关系
    *   **对于多对多：**添加一个 user_friendship 表，该表将保存用户和友谊表的外键。

    这种方法的问题是看起来很麻烦，而且没有任何东西强制要求友谊将完全由 2 个用户共享。

我希望有比这些更优雅的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:23:32.893

我将创建一个模型 Friendship ，它包含作为朋友的用户的外键，您可以通过执行以下操作进行验证，以确保与相同用户只有一个友谊：

```
validates :friend_id, :uniqueness => { :scope => :user_id } 
```

在我看来，这是一个非常优雅的解决方案，提供了很大的灵活性。 如果您想模拟友谊之类的东西，请查看rails guide [A Guide to Active Record Associations](http://guides.rubyonrails.org/association_basics.html)中的 has_one :through 关联。

当然还有 has_and_belongs_to_many 关联。但它没有提供像创建模型那样的灵活性，因此通常不是一个好主意。

# spring - bean 类 [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] 的无效属性“packagesToScan”

> ID：10872598
> 
> 赞同：4
> 
> 时间：2012-06-03T17:51:08.053
> 
> 标签：spring, configuration, packages, spring-data-jpa, spring-orm

我试图找到解决方案，但仍然没有运气。

我正在关注[“Pro Spring 3”](http://books.google.co.uk/books?id=k7KZkl4PyhYC&printsec=frontcover#v=onepage&q=the%20database%20name%20is%20not%20required&f=false)一书（Appress）[第351页]

我已经将该项目生成为 jpa 项目。

据我了解，我可以`persistence.xml`在 bean 内部使用或管理它，这就是我想要的。

对于最新的我们需要定义`packagesToScan`属性。

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaPersonService': Injection of persistence dependencies failed; nested exception is 
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'emf' defined in class path resource [META-INF/app-context.xml]: Error setting property values; nested exception 
is **org.springframework.beans.NotWritablePropertyException: Invalid property 'packagesToScan' of bean class [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean]: Bean property 'packagesToScan' is not writable or has an invalid setter method. Does the parameter type of the setter match the return type of the getter? 
```

当我尝试询问建议 (ctrl+space) 时，它没有 packagesToScan 属性。![在此处输入图像描述](../Images/3e9804c2a346fafac557ffd4cbc4c2f8.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T18:13:21.900

`'packagesToScan'`属性是在 Spring 3.1 中添加的（比较[3.0](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/orm/jpa/LocalContainerEntityManagerFactoryBean.html)和[3.1](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/orm/jpa/LocalContainerEntityManagerFactoryBean.html#setPackagesToScan(java.lang.String...))）。

确保在 CLASSPATH 中包含最新的 3.1 Spring JAR。

# rest - 来自定义语言文档的 REST 客户端/服务器代码

> ID：10872600
> 
> 赞同：1
> 
> 时间：2012-06-03T17:51:31.597
> 
> 标签：rest, definition

我正在寻找一个编译器/框架，它能够从定义文件中生成 java rest/json 客户端和服务器代码，就像在 Apache Thrift 或 Google Protocol Buffers 中一样。

# python - json.dump 在看似有效的对象上抛出“TypeError: {...} is not JSON serializable”？

> ID：10872604
> 
> 赞同：49
> 
> 时间：2012-06-03T17:52:15.567
> 
> 标签：python, json, typeerror

**背景**：我正在编写一个 python 程序来管理我的音乐文件。它爬取目录并将文件及其元数据（通过诱变剂）以 JSON 编码，作为简单的“数据库”放入文件中。我的目录搜索得很好，但是当我尝试保存数据库或编码为 JSON 时，它会抛出“TypeError: {...} is not JSON serializable”（... 是 dict 中的一些键和值，更多内容如下）

**问题**：程序按照以下格式构建一个大字典对象：

```
{
    "<song id>":{
        "artist":"<song artist>",
        "album":"<song album>",
        "title":"<song title>"},
    ...
} 
```

每首歌曲文件都通过这种格式进行索引。当我尝试将数据库转储到文件时，我得到了这个：

```
Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    sit()
  File "D:\workbench\ideas\musicmanager\v0\spider.py", line 116, in sit
    json.dump(js.db,f,True)
  File "C:\Python27\lib\json\__init__.py", line 181, in dump
    for chunk in iterable:
  File "C:\Python27\lib\json\encoder.py", line 428, in _iterencode
    for chunk in _iterencode_dict(o, _current_indent_level):
  File "C:\Python27\lib\json\encoder.py", line 402, in _iterencode_dict
    for chunk in chunks:
  File "C:\Python27\lib\json\encoder.py", line 402, in _iterencode_dict
    for chunk in chunks:
  File "C:\Python27\lib\json\encoder.py", line 436, in _iterencode
    o = _default(o)
  File "C:\Python27\lib\json\encoder.py", line 178, in default
    raise TypeError(repr(o) + " is not JSON serializable")
TypeError: {'album': [u"Rooney's Lost Album"], 'title': [u'The Kids
After Sunset'], 'artist': [u'Rooney']} is not JSON serializable 
```

该特定歌曲条目的键是

```
Rooney|Rooney's Lost Album|The Kids After Sunset|The Kids After Sunset.itunes.mp3 
```

（id 的格式有点大，我可能最终会散列...）

所以我试图

```
json.dumps({'album': [u"Rooney's Lost Album"], 'title': [u'The Kids
After Sunset'], 'artist': [u'Rooney']}) 
```

效果很好，就像

```
json.dumps({"Rooney|Rooney's Lost Album|The Kids After Sunset|The Kids
After Sunset.itunes.mp3":""}) 
```

然后我尝试了这个：

```
rooney = "Rooney|Rooney's Lost Album|The Kids After Sunset|The Kids
    After Sunset.itunes.mp3"
json.dumps({rooney:js.db['songsbyid'][rooney]}) 
```

再次因类型错误而失败。

为什么该对象会因 json.dump 而失败？我有很多其他对象，其键包含管道“|” 和撇号“'”......目前，我无法让其他任何人对此进行测试，我应该发布数据库对象的腌制版本吗？

**补充笔记**

*   json.dumps 下面的结果对象很好，所以我想知道这个问题是否与数据库的大小有任何关系？

    > > > {rooney:js.db['songsbyid'][rooney]} {"Rooney|Rooney's Lost Album|The Kids After Sunset|The Kids After Sunset.itunes.mp3": {'album': [u"Rooney's Lost Album" ], 'title': [u'The Kids After Sunset'], 'artist': [u'Rooney']}}

*   如果我通过重命名扩展名来排除歌曲以便脚本忽略它，另一首任意歌曲会导致相同的错误。我重命名&排除了这首新歌，又遇到了另一首新歌……我不知道有多少。

*   我更改了我的程序以抓取包含原始问题歌曲的下一个最远的子目录，并且 json.dump 在完全不同的歌曲上引发了 TypeError ......

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-03T17:57:07.980

因为它实际上不是字典；*它是另一种看起来*像字典的映射类型。用于`type()`验证。将其传递给以`dict()`从中获取真正的字典。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-08-21T15:53:30.610

就我而言，我的 Python dict 中的布尔值是问题所在。JSON 布尔值是小写的（“true”、“false”），而在 Python 中它们是大写的（“True”、“False”）。在网上的任何地方都找不到此解决方案，但希望对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-06T16:00:07.040

我写了一个类来规范化字典中的数据。下面的 NormalizeData 类中的“元素”需要是 dict 类型。并且您需要在 __iterate() 中替换为您的自定义类对象或您想要规范化的任何其他对象类型。

```
class NormalizeData:

    def __init__(self, element):
        self.element = element

    def execute(self):
        if isinstance(self.element, dict):
            self.__iterate()
        else:
            return

    def __iterate(self):
        for key in self.element:
            if isinstance(self.element[key], <ClassName>):
                self.element[key] = str(self.element[key])

            node = NormalizeData(self.element[key])
            node.execute() 
```

# php - 工匠：找不到驱动程序

> ID：10872606
> 
> 赞同：5
> 
> 时间：2012-06-03T17:52:20.537
> 
> 标签：php, laravel, laravel-3, laravel-artisan

我正在使用 Laravel 最新版本：3.2.1。

当我在终端上运行它时：

`php artisan migration:install`

我有这个错误：

`could not find driver`

我在谷歌和 Laravel 的论坛上进行了一些搜索，没有。

**编辑**

我已经激活了扩展，这就是我所拥有的。`phpinfo()` `--with-iconv' '--with-pdo-mysql=mysqlnd' '--with-pdo-pgsql=/opt/lampp/postgresql' '--with-pdo`看起来我的 pdo 已经设置好了。

这是我的图像`phpinfo()`

![在此处输入图像描述](../Images/3c399e03dd1d5e0c901c3f1907865ee2.png)

**编辑 2** 我做了一个小测试：

```
<?php
try {
    $dbh = new PDO("mysql:host=localhost;dbname=jjimobiliaria", "root", "");
    foreach($dbh->query('SELECT * from pdo_test') as $row) {
        print_r($row);
    }
    $dbh = null;
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
} 
```

和回报：

```
Array ( [id] => 1 [0] => 1 [test_column] => TESTING!!! [1] => TESTING!!! ) 
```

所以我的 PDO 运行良好

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T16:31:37.910

在 Ubuntu 12.04 上，我所要做的就是安装 php5-mysql：

```
sudo apt-get install php5-mysql 
```

然后它起作用了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T00:07:42.180

问题是我的电脑有另一个版本的 PHP 而我没有使用 XAMPP PHP，sugin XAMPP PHP 解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-04T02:27:01.700

这不是 Laravel 错误，而是 PDO 问题。很可能，您的 php.ini 文件没有加载您正在使用的任何数据库驱动程序所需的扩展名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-08T14:11:27.957

可能是因为你没有安装扩展 mysql

```
sudo apt-get install php-mysql 
```

# iphone - 在 iPhone 上使用 FMDB 创建表不起作用

> ID：10872608
> 
> 赞同：1
> 
> 时间：2012-06-03T17:52:29.350
> 
> 标签：iphone, ios, sqlite, fmdb

我只是试图在我的 iPhone 应用程序中创建一个数据库，但无法构建它。我使用了以下教程：[教程](http://www.icodeblog.com/2011/11/04/simple-sqlite-database-interaction-using-fmdb/)

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsPath = [paths objectAtIndex:0];
    NSString *path = [docsPath stringByAppendingPathComponent:@"database.sqlite"];
    FMDatabase *database = [FMDatabase databaseWithPath:path];
    [database open]; 
```

但是在运行应用程序时，我收到以下错误消息：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_FMDatabase", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

是因为我使用的是64位系统吗？只是在寻找另一个版本的 FMDB，但只能在 gitHub [FMDB 存储库上找到那个](https://github.com/ccgus/fmdb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:34:42.253

确保 FMDataBase.m 在“构建阶段”部分的编译源中

# javascript - 加载框架时 iPad 中的 window.open() 不起作用

> ID：10872609
> 
> 赞同：4
> 
> 时间：2012-06-03T17:52:37.070
> 
> 标签：javascript, jquery, ipad, window.open

我正在尝试修改一个站点，该站点使用“Morten 的 JavaScript 树形菜单”在使用 Adob​​e Reader 插件的框架集中显示 PDF。

在 iPad 上，框架没用，所以我想在新选项卡中打开 PDF。不想弄乱树形菜单，我想我可以在查看器框架中打开的网页中使用 JavaScript 来打开带有 PDF 的新选项卡。

我在 $(document).ready(function() 中使用 window.open() 在新选项卡中打开 pdf。问题是 window.open() 不想在 iPad 上工作。

HTML 的正文通常看起来像这样......

```
<body>
    <object data="MypdfFileName.pdf#toolbar=1&amp;navpanes=1&amp;scrollbar=0&amp;page=1&amp;view=FitH" 
    type="application/pdf" 
    width="100%" 
    height="100%">
    </object>
</body> 
```

我将其更改为只有这样的 div ...

```
<body>
    <div class="myviewer" ></div>
</body> 
```

然后使用以下脚本...

```
$(document).ready(function() {
    var isMobile = {
        Android : function() {
            return navigator.userAgent.match(/Android/i) ? true : false;
        },
        BlackBerry : function() {
            return navigator.userAgent.match(/BlackBerry/i) ? true : false;
        },
        iOS : function() {
            return navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;
        },
        Windows : function() {
            return navigator.userAgent.match(/IEMobile/i) ? true : false;
        },
        any : function() {
            return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Windows());
        }
    };

    if(isMobile.any()) {
        var file = "MypdfFileName.pdf";
            window.open(file);
    }else {
        var markup = "<object   data='MypdfFileName.pdf#toolbar=1&amp;navpanes=1&amp;scrollbar=0&amp;page=1&amp;view=FitH' type='application/pdf' width='100%' height='100%'></object>";
        $('.myviewer').append(markup);
    };
}); 
```

除了 iPad 上的 window.open() 之外，一切都有效。如果我在 widow.open() 周围进行切换，则可以在计算机上正常工作。在另一个项目中，我通过 onclick 函数在 iPad 上成功使用了 window.open()。

我尝试使用计时器功能。我还尝试将 onclick 函数添加到 div 并发布点击事件。在这两种情况下，他们都在电脑上工作，而不是 iPad。我难住了。

我知道在树形菜单框架中处理 ipad 会更有意义，但是该代码太复杂了，我无法弄清楚在哪里放置/修改 onclick 事件。

有没有办法更改对象以使其在新选项卡中打开？

是否有人对 Mortens Tree 菜单代码足够熟悉，可以告诉我如何更改点击事件，以便它在新选项卡中打开 pdf 而不是在框架中打开页面？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T22:38:22.230

可能 Safari 会尝试阻止弹出窗口。这意味着当用户单击时，执行操作时 window.open 有效，但在“发生”时无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T22:49:45.403

您还应该检查您的元素和父元素，并确保那里没有 ":hover" 伪类。当您触摸期望发生“单击”事件的元素时，它将触发元素上的悬停状态。如果您再次触摸，它将触发点击事件。

# iphone - 从键数组添加到字典

> ID：10872611
> 
> 赞同：0
> 
> 时间：2012-06-03T17:53:00.743
> 
> 标签：iphone, objective-c, arrays, dictionary

在过去的几天里，我一直在努力解决以下问题

我需要在字典的字典深处设置一个键和一个值。我知道要设置键的字典的键，但我不知道如何到达那里。密钥存储在一个数组中。

说，我有一个包含以下键的字典，每个键的值是另一个字典。

```
- myDict
    - A
      - A
        - A
        - B
      - B
        - A
        - B
    - B
      - A
        - A
        - B
      - B
        - A
        - B 
```

我还有以下数组：

```
[A, A, B] 
```

这意味着，我想在 A->A->B 处为字典中的键设置一个值。这等于以下内容：

```
[[[[myDict objectForKey:@"A"] objectForKey:@"A"] objectForKey@"B"] setValue:myValue forKey:myKey] 
```

有谁知道我可以实现这一目标的方法？我想我应该保留对字典的引用，遍历数组中的对象并转到字典中的“下一级”并保留对此的引用，当到达数组中的最后一个对象时，设置键的值。我的问题是，我不知道如何解决这个问题。为了保持对字典的引用，当我进入下一个级别时，我需要初始化一个新字典，对吗？这导致我创建一个只包含当前级别的对象的新字典，因此我最终不会为原始字典中的键设置值。

任何代码示例或伪代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:22:34.923

在我看来，您只需`[yourArray componentsJoinedByString:@"."]`获取一个密钥路径，然后使用它`valueForKeyPath:`来获取适当的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:20:49.983

你会做这样的事情，而不是说这是“确切”的答案，但应该让你弄清楚你的确切需求。

```
for(NSString* key in [myDict allKeys]) {

    NSString *yourValue = ....
    NSDictionary *dict = [[myDict objectForKey:key] objectForKey:key];// Will get you to A->A

    for(NSString *levelKey in [dict allKeys]) {

    //Setting Value for A->A->(A) & A->A->(B)

          [dict setValue:yourValue forKey:levelKey];      
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:14:27.430

**这个答案应该被忽略。相反，请使用@Chuck 发布的方法。**

我最终编写了以下两种方法来解决问题。这是受到@nhahtdh 的启发。这些方法非常适合一个类别，但我以前从未写过一个类别。有一天，我可能会将这些归为一类。如果有人想这样做，请在此处发布结果。

```
/**
 *  Sets the value in a dictionary with a keypath. Uses either the first or the last key in the keypath as the key to set the value for.
 *  @param value Value to set.
 *  @param dictionary Dictionary to set the value in.
 *  @param path Path for the key. Last or first object is used as the key for the value.
 *  @param readFromEnd Whether or not to read the path from the end.
 */
 + (void)setValue:(id)value inDictionary:(NSMutableDictionary *)dictionary withKeyPath:(NSArray *)path readFromEnd:(BOOL)readFromEnd
{
    NSMutableArray *mutablePath = [NSMutableArray arrayWithArray:path];
    NSString *key;
    if (readFromEnd)
    {
        key = [mutablePath lastObject];
        [mutablePath removeLastObject];
    }
    else
    {
        key = [mutablePath objectAtIndex:0];
        [mutablePath removeObjectAtIndex:0];
    }
    [self setValue:value forKey:key inDictionary:dictionary withKeyPath:mutablePath readFromEnd:readFromEnd];
}

/**
 *  Sets the value in a dictionary with a keypath.
 *  @param value Value to set.
 *  @param key Key for the value.
 *  @param dictionary Dictionary to set the value in.
 *  @param path Path for the key.
 *  @param readFromEnd Whether or not to read the path from the end.
 */
+ (void)setValue:(id)value forKey:(NSString *)key inDictionary:(NSMutableDictionary *)dictionary withKeyPath:(NSArray *)path readFromEnd:(BOOL)readFromEnd
{
    if (path.count == 0)
        [dictionary setValue:value forKey:key];
    else
    {
        NSMutableArray *mutablePath = [NSMutableArray arrayWithArray:path];
        NSString *currentKey;
        if (readFromEnd)
        {
            currentKey = [mutablePath lastObject];
            [mutablePath removeLastObject];
        }
        else
        {
            currentKey = [mutablePath objectAtIndex:0];
            [mutablePath removeObjectAtIndex:0];
        }
        [self setValue:value forKey:key inDictionary:[dictionary objectForKey:currentKey] withKeyPath:mutablePath readFromEnd:readFromEnd];
    }
} 
```

# zend-framework - Zend 插件帮助的堆栈顺序

> ID：10872613
> 
> 赞同：1
> 
> 时间：2012-06-03T17:53:24.783
> 
> 标签：zend-framework, zend-controller-plugin

我有几个插件，我试图弄清楚它们应该应用的顺序。它们是：

*   Acl 和身份验证
*   自定义 ErrorHandler 以在模块中使用错误控制器
*   国际化插件
*   查看设置
*   区域设置（设置区域（前端、后端或安装），以便我可以访问它并将其用于整个应用程序中的逻辑辅助）
*   维护插件（只是将请求重新路由到维护页面）

你会按什么顺序排列这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T22:13:30.730

将其分解为职责...

运行所需：

*   查看设置

系统行为：

*   错误报告
*   i18n

应用行为：

*   acl

很高兴有：

*   区域设置（不确定这是什么）
*   维护重定向

# javascript - Mustache.render() 和 Mustache.to_html() 有什么区别？

> ID：10872615
> 
> 赞同：24
> 
> 时间：2012-06-03T17:53:51.703
> 
> 标签：javascript, mustache

[文档](https://github.com/janl/mustache.js/)没有提到 Mustache.to_html()，但是 Mustache.js 在线的每个教程[都](http://coenraets.org/blog/2011/12/tutorial-html-templates-with-mustache-js/)使用 Mustache.to_html()。因此，我肯定错过了一些珠宝。

代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-03T17:59:32.630

查看[源代码](https://github.com/janl/mustache.js/blob/master/mustache.js)，似乎**to_html**基本上已被弃用：

```
// This is here for backwards compatibility with 0.4.x.
exports.to_html = function (template, view, partials, send) {
    var result = render(template, view, partials);

    if (typeof send === "function") {
      send(result);
    } else {
      return result;
    }
}; 
```

如您所见，它调用了*render*。一个区别是额外的（可选）*发送*参数，它是它调用的回调（将结果作为参数发送）。

# sql - 在 INSERT INTO 表中使用 Select

> ID：10872621
> 
> 赞同：0
> 
> 时间：2012-06-03T17:54:34.560
> 
> 标签：sql, insert

我从来没有试过这个，我不知道它是否错了。

```
INSERT INTO produits(produit_id, fournisseur_id, marque_id, categorie_id,produit_nom,
                     produit_prix, produit_description, quantite_stock,
                     date_production, date_expiration)
    VALUES (seq_produits.nextval,
            SELECT fournisseur_id FROM fournisseurs WHERE fournisseur_nom='LebanoCop',
            SELECT marque_id FROM marques WHERE marque_nom='Hyper-Products',
            SELECT categorie_id FROM categories WHERE categorie_nom='viandes',
            'Mortadella', 2000, 'tres delicieuse', 100, '25-MAY-2012', '25-MAY-2013') 
```

这能行吗？我收到缺少表达式的错误。我正在使用甲骨文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:15:19.923

您似乎想要三个选定的值，这些值将来自三个子查询中的每一个的单例结果。我相信应该工作的符号是：

```
INSERT INTO produits(produit_id, fournisseur_id, marque_id, categorie_id,produit_nom,
                     produit_prix, produit_description, quantite_stock,
                     date_production, date_expiration)
   VALUES (seq_produits.nextval,
           (SELECT fournisseur_id FROM fournisseurs WHERE fournisseur_nom='LebanoCop'),
           (SELECT marque_id FROM marques WHERE marque_nom='Hyper-Products'),
           (SELECT categorie_id FROM categories WHERE categorie_nom='viandes'),
           'Mortadella', 2000, 'tres delicieuse', 100, '25-MAY-2012', '25-MAY-2013') 
```

与原始 SQL 相比，每个子查询都需要一组额外的括号。这避免了加入不可连接的结果集的任何问题。

在一般情况下，您尝试选择可能要插入的大量行，您根本不会使用 VALUES 子句，而只会在 INSERT 列列表之后列出 SELECT 语句：

```
INSERT INTO produits(produit_id, ...)
    SELECT ... 
```

# cellid - 基于位置的服务 - 如何使用 RSSI、TA 和 ARFCN 改善位置？

> ID：10872623
> 
> 赞同：0
> 
> 时间：2012-06-03T17:54:45.053
> 
> 标签：cellid

我从我的设备获得 LAC,CellId。通过这些值，我可以知道 Lat/Lng，并通过三角测量了解设备所在的区域。
我还得到 ARFCN、TA 和 RSSI。是否可以通过使用这些值来改善位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T03:40:47.590

您需要从移动网络运营商处访问 cellid 到 lat/lng db，才能获取设备的 lat/long。其他方法是使用 android、iphone 等提供的位置 api。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:47:31.583

信号强度可能会告诉您距离塔有多远，从而提高准确性

你用的是什么平台？

# html - jquery mobile中的小加号按钮

> ID：10872624
> 
> 赞同：1
> 
> 时间：2012-06-03T17:55:01.627
> 
> 标签：html, jquery-mobile

我想在表格的每一行之前有一个小的加号或减号按钮，如下图所示。我是 jqm 的初学者，请帮助

![在此处输入图像描述](../Images/c85ffe481345096c11abebffc1280679.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:22:00.997

由于您没有发布任何 html，我会假设您的元素是按钮，这是设置图标的简单方法。因此，您的元素是一个带有 data-role=button 的链接。然后添加 data icon="plus" 和 data iconpos="notext" 来隐藏文本内容。

```
<a href="#" data-role="button" data-icon="plus" data-iconpos="notext" data-mini="true">ButtonTitleIsNotShown</a> 
```

# php - 为什么包含文件中的“会话控制”不起作用？

> ID：10872629
> 
> 赞同：0
> 
> 时间：2012-06-03T17:55:22.647
> 
> 标签：php, session, include

我不想在所有文件中逐个控制会话，而是想控制`header.php`每个文件中包含的会话。所以，在`header.php`我编码的顶部：

```
if($session->is_logged_in()) {//is_logged_in is a function controlling session
   echo "logged";
} else {
    echo "not logged";
} 
```

index.php 这里：

```
<?php define('REALLY_INCLUDED', true);?>
<?php require_once  $_SERVER['DOCUMENT_ROOT'].'/includes/initialize.php'; ?>
<?php include_layout_template("index_header.php"); ?>
<?php include_layout_template("sidebar.php"); ?>
<?php include_layout_template("index_content.php"); ?>
<?php include_layout_template("footer.php");?> 
```

index_header.php 在这里：

```
<?php require_once  $_SERVER['DOCUMENT_ROOT'].'/includes/initialize.php'; ?>
<?php header("Content-Type: text/html; charset=latin5"); ?>
<?php
if(!defined('REALLY_INCLUDED') || !REALLY_INCLUDED) {
    exit();
}
if($session->is_logged_in()) {
 echo "logged in";
} else {
echo "logged not!";
}

?>
<html>
Here is html code
</html> 
```

session.php 的某些部分：

```
private $logged_in=false;
function __construct() {
session_start();
$this->check_login();
}

public function is_logged_in() {
return $this->logged_in;
}

private function check_login() {
if(isset($_SESSION['user_id'])) {
  $this->user_id = $_SESSION['user_id'];
  $this->logged_in = true;
} else {
  unset($this->user_id);
  $this->logged_in = false;
  }
} 
```

问题是，当我单击 URL index.php 时，浏览器中没有任何内容。如果，我删除该`is_logged_in()`功能，它会显示页面。如果我将`is_logged_in()`函数放入 index.php 并从 index_header.php 中删除，它也会显示页面。`index_header.php`如果，我单击它显示的 URL 。有趣的是，这个函数不包含 index_header.php。我的功能没有问题。

# ruby - 如何使用 sql server 将默认值设置为 getdate()

> ID：10872630
> 
> 赞同：0
> 
> 时间：2012-06-03T17:55:24.293
> 
> 标签：ruby, sequel

我正在使用带有 sql server 的 ruby​​ orm 续集。我想知道如何在迁移中将 datetime 字段的默认值设置为 sql server 函数 getdate()：

```
create_table(:table) do
  primary_key :id
  datetime :last_update, null: false, default: ???
end 
```

谢谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T14:58:13.883

您可能想要`default: Sequel.function(:getdate)`，假设您正在使用当前版本的 Sequel。

# c# - 从第一个应用程序启动第二个应用程序，然后关闭第一个应用程序

> ID：10872634
> 
> 赞同：0
> 
> 时间：2012-06-03T17:56:02.833
> 
> 标签：c#, multithreading, c#-2.0, launching-application

在 C#.Net 中从应用程序 A 启动应用程序 B，然后关闭应用程序 A 是一种好习惯吗？最终会出现线程问题/错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:59:20.580

这种事情没有任何指导。

如果您从应用程序 A开始一个*新进程（应用程序 B），则它们被认为是完全独立的。*

如果您随后终止应用程序 A 进程，它不会干扰应用程序 B。

我能看到的唯一问题是应用程序 B 是否正在尝试访问应用程序 A 仍打开的文件（当它关闭时）。

# mysql - 同时连接wordpress数据库和我自己的mysql数据库

> ID：10872636
> 
> 赞同：0
> 
> 时间：2012-06-03T17:56:32.323
> 
> 标签：mysql, wordpress, connection

我正在构建一个将 wordpress 和我自己的设计混合在一起的网站。有些部分将有一个使用自定义主题的完整 wordpress 页面，而其他部分将是我的 php 站点，只有部分帖子从 wordpress 数据库中提取。我遇到的问题是当我通过包含 wp-blog-header.php 连接到 wordpress 时，我无法连接到我自己的自定义 MySQL 数据库。如何同时保持与两个数据库的活动连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:02:05.170

我不确定 wp-blog-header.php 中有什么，但我猜你需要更明确地管理与 mysql 的连接。

mysql_connect 返回一个资源句柄，您应该能够为每个数据库使用一次它并存储这些资源句柄，使用合适的任何一个。wordpress 站点的数据库连接凭据将在 wp-config.php 中，只需将它们作为 mysql_connect 的参数插入即可。

# javascript - javascript array.sort 不适用于整数

> ID：10872637
> 
> 赞同：2
> 
> 时间：2012-06-03T17:56:34.570
> 
> 标签：javascript, jquery

我遇到了 javascript 数组排序和整数的问题。我定义了这些功能：

```
function sortA(a,b){ 
  return a - b;
}
function sortD(a,b){ 
  return b - a;
} 
```

然后在 jquery $.each 中，我将一些内容放入数组中：

```
$('.'+sort_column).each(function(index, value) {

    var current_num = $.trim($(this).text())

    current_num = parseInt(current_num, 10); //convert to integer for numeric sorting.

    valuesArr.push(current_num);  

    console.log(typeof index); //just checking...this shows number in the console
});

var sort_asc = valuesArr.sort(sortA);
var sort_desc = valuesArr.sort(sortD);
console.log(sort_asc);
console.log(sort_desc); 
```

但在控制台中，我以相同的顺序获取数组。

```
//console
[1214500, 1214499, 1214497, 1214481, 1214432, 1214421, 1214419, 1214418, 1214369, 1214045, 1205691]
[1214500, 1214499, 1214497, 1214481, 1214432, 1214421, 1214419, 1214418, 1214369, 1214045, 1205691] 
```

奇怪的是，如果我在末尾附加一个字符串，排序工作

```
console.log( valuesArr.sort(sortD)  + "asdf");
console.log( valuesArr.sort(sortA)  + "asdf");

//console
[1214500,1214499,1214497,1214481,1214432,1214421,1214419,1214418,1214369,1214045,1205691asdf] 
[1205691,1214045,1214369,1214418,1214419,1214421,1214432,1214481,1214497,1214499,1214500asdf] 
```

我不知道为什么我什至尝试过，但是你去。这是我第一次使用这种方法，所以我可能错过了一些非常基本的东西。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T18:13:55.150

您正在对同一个数组的实例进行排序，这就是顺序相同的原因。基本上[sort](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)改变了数组本身的内容。

所以它们都将按 desc 顺序排列（这是你正在做的最后一个排序）。如果要保持原始实例完整，则应创建新数组：

```
var sort_asc = valuesArr.slice(0).sort(sortA);
var sort_desc = valuesArr.slice(0).sort(sortD);

console.log(valuesArr);
console.log(sort_asc);
console.log(sort_desc); 
```

另请参阅[切片](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T18:00:23.977

[`.sort()` *^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)对数组**进行就地**。两个变量都`sort_asc`引用`sort_desc`同一个数组，因此输出是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T20:02:33.180

你可以简单地改变你的`sortA()`和`sortD()`如下：

```
function sortA(arr) {
    return arr.sort(function(a, b) {
       return a - b;
    });
}

function sortD(arr) {
    return arr.sort(function(a, b) {
       return b - a;
    });
} 
```

然后使用如下：

```
var myarr = [1214500, 1214499, 1214497, 1214481, 1214432, 1214421, 
             1214419, 1214418, 1214369, 1214045, 1205691];

sortA(myarr);

sortD(myArr); 
```

**[演示](http://jsfiddle.net/thecodeparadox/3RTkH/3/)**

# c# - 想要一个用于 Web 浏览器控制的 if 语句

> ID：10872638
> 
> 赞同：1
> 
> 时间：2012-06-03T17:56:47.380
> 
> 标签：c#, windows-phone-7

在我的 windows phone 7 应用程序中，我有一个 web 浏览器控件（命名为**Holder**），如果用户**GotFocus**在浏览器控件上，那么我想隐藏一个图像。但是**Tap**事件不适用于浏览器控件。需要一个 if 语句或其他可以提供帮助的东西。有人可以帮我吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T12:35:53.843

您可以使用这种方式：向您添加对 Microsoft.Phone.Controls.Toolkit.dll 的项目引用并使用 GestureListener 类：

```
GestureListener listener = new GestureListener();
listener.Tap += (sender, args) =>
        {
               // some logic here
        };
this.browser.SetValue(GestureService.GestureListenerProperty, listener); 
```

点击事件将起作用。

# php - 用于从字符串解析价格的 PHP 正则表达式帮助

> ID：10872639
> 
> 赞同：1
> 
> 时间：2012-06-03T17:56:52.323
> 
> 标签：php, regex

我知道这个话题在某种程度上已经被涵盖了，但是几天后我仍然无法找出从文本块中解析价格的最佳方法。

以下是一些示例： 这辆车售价 15,000 美元，升级费用为 200 美元 这些皮带是 500.00 美元，我要 50 美元的运费

我的方法是进行三个单独的正则表达式匹配：

1.  查找缩写为 K 的价格
2.  查找带有前缀的价格
3.  查找带有后缀的价格

# 寻找带有千位缩写的美元

```
preg_match_all('/^[0-9,]+(\.[0-9]{2})?(k)+$/', 
                    strtolower($description), $price_array1); 
```

# 寻找带前缀的美元

```
preg_match_all('/^(\$|\$ |price|price |price is |price:|price: |us|us |usd|usd |asking|asking |wanting|wanting |want|want |sgd|euro|euro |£|£ |€|€ |gbp|gbp |cdn|cdn |)+[0-9,]+(\.[0-9]{2})?$/', strtolower($description), $price_array2); 
```

# 寻找带后缀的美元

```
preg_match_all('/(\$[0-9,]+(\.[0-9]{2})?)( eur|eur| firm| obo| shipped| \$|\$| €|€| £|£| gbp|gbp| dollar| aud)+/', strtolower($description), $price_array3); 
```

但实际上这些似乎都不起作用。我想我的正则表达式正确吗？但不知道为什么他们不匹配任何东西。我承认我对是否应该使用 ^ 和 $ 有点困惑，但我已经尝试过使用和不使用它，它似乎没有任何区别。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:26:53.263

这是我**严格**匹配类似金钱的数字的解决方案（它不会注意到任何前缀或后缀，甚至 k 表示千）：

`/(?<![0-9.,])(?:[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]*)?|[0-9]{1,3}(?:\.?[0-9]{3})*(?:,[0-9]*)?)(?![0-9.,])/`

它将接受`34563745,34534`, `283947982.234`, `283.432`, `234424.`, `4234,4324`, `2.234.434,23442`, `3,234,234.234`, `324849000`. 但它会拒绝`.453985`, `..,.,.434.,.34`, `234,43.234`, `23467,4443.234`.

除普通数字外，以下内容将匹配**不区分大小写的前缀和 k（千）：**

`/(?<= |^)(?:(?i)(?:\$|USD) *)?(?:[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]*)?|[0-9]{1,3}(?:\.?[0-9]{3})*(?:,[0-9]*)?)(?:(?i)k)?(?![0-9.,])/`

如果要添加更多前缀，可以更改正则表达式的这一部分：

`(?:\$|USD)`

只需添加更多前缀，无需前导或尾随空格。即使有很多空格，正则表达式也会尝试匹配。

以下将**仅**匹配带后缀的数字（带有可选的千位指示符）：

`/(?<= |^)(?:[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]*)?|[0-9]{1,3}(?:\.?[0-9]{3})*(?:,[0-9]*)?)(?:(?i)(?:k )? *(?:\$|USD))(?= |$)/`

如果要添加更多后缀，同上。

测试输入并[尝试一下](http://www.functions-online.com/preg_match_all.html)：

`Here's are some examples: This car is $15k and has $200 in upgrades Those belts are USD 500.00 and I'm asking 50 for shipping 345,345.45 495.344,424 ..,5435 878,543.455.345 345345435.545 234728394,34345 345, 453\. 0.4355 .453 sdfsd usd 23423423K`

# php - 将 sql 行作为页面 url 回显

> ID：10872640
> 
> 赞同：0
> 
> 时间：2012-06-03T17:57:04.503
> 
> 标签：php, mysql, sql, where-clause

我有一个索引页面，它链接到一个名为 categories.php 的页面。在 categories.php 中，论坛站点的每个不同类别都有一个基于其 id (cat_id) 的唯一 url。但是，我想将此 url 更改为基于其名称（cat_name）。但是，当我这样做时，我收到错误“无法显示类别，请稍后再试。'where 子句'中的未知列'thenameofacategory'”。这是因为 cat_id 是主键吗？我该如何更换

```
 <a href="category.php?id=' . $row['cat_id'] . '"> 
```

使用 cat_name 以便我不会在 category.php 页面上收到错误消息？

index.php 的摘录（重要部分）：

```
 echo '<tr>';
            echo '<td class="leftpart">';
                echo '<h3><a href="category.php?id=' .                        $row['cat_id'] . '">' . $row['cat_name'] . '</a></h3>' . $row['cat_description'];
            echo '</td>';
            echo '<td class="rightpart">';

            //fetch last topic for each cat
                $topicsql = "SELECT
                                topic_id,
                                topic_subject,
                                topic_date,
                                topic_cat
                            FROM
                                topics
                            WHERE
                                topic_cat = " .  $row['cat_id'] . "
                            ORDER BY
                                topic_date
                            DESC
                            LIMIT
                                1";

                $topicsresult = mysql_query($topicsql);

                if(!$topicsresult)
                {
                    echo 'Last topic could not be displayed.';
                }
                else
                {
                    if(mysql_num_rows($topicsresult) == 0)
                    {
                        echo 'no topics';
                    }
                    else
                    {
                        while($topicrow = mysql_fetch_assoc($topicsresult))
                        echo '<a href="topic.php?id=' . $topicrow['topic_id'] . '">' . $topicrow['topic_subject'] . '</a> at ' . date('d-m-Y', strtotime($topicrow['topic_date']));
                    }
                }
            echo '</td>';
        echo '</tr>';
    } 
```

这是页面 category.php：

```
 <?php
      //category.php
      include 'connect.php';

      //first select the category based on $_GET['cat_id']
      $sql = "SELECT
        cat_name,
        cat_id,
        cat_description
    FROM
        categories
    WHERE
        cat_id = " . mysql_real_escape_string($_GET['id']);

      $result = mysql_query($sql);

      if(!$result)
      {
echo 'The category could not be displayed, please try again later.' .                     mysql_error();
      }
      else
      {
  if(mysql_num_rows($result) == 0)
  {
    echo 'This category does not exist.';
  }
  else
  {
    //display category data
    while($row = mysql_fetch_assoc($result))
    {
        echo '<h2>Topics in &prime;' . $row['cat_name'] . '&prime;           category</h2><br />';
    }

    //do a query for the topics
    $sql = "SELECT  
                topic_id,
                topic_subject,
                topic_date,
                topic_cat
            FROM
                topics
            WHERE
                topic_cat = " .           mysql_real_escape_string($_GET['id']);

    $result = mysql_query($sql);

    if(!$result)
    {
        echo 'The topics could not be displayed, please try again later.';
    }
    else
    {
        if(mysql_num_rows($result) == 0)
        {
            echo 'There are no topics in this category yet.';
        }
        else
        {
            //prepare the table
            echo '<table border="1">
                  <tr>
                    <th>Topic</th>
                    <th>Created at</th>
                  </tr>';   

            while($row = mysql_fetch_assoc($result))
            {               
                echo '<tr>';
                    echo '<td class="leftpart">';
                        echo '<h3><a href="topic.php?id=' .           $row['topic_id'] . '">' . $row['topic_subject'] . '</a><br /><h3>';
                    echo '</td>';
                    echo '<td class="rightpart">';
                        echo date('d-m-Y',           strtotime($row['topic_date']));
                    echo '</td>';
                echo '</tr>';
            }
        }
    }
}
    }

    ?> 
```

是不是因为 cat_id 是我不能在 WHERE 子句中使用 cat_name 作为 url 和 row 的主键？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:16:00.107

在 categories.php 中，更改

`WHERE cat_id = " . mysql_real_escape_string($_GET['id']);`

到

`WHERE cat_name = '" . mysql_real_escape_string($_GET['id']) ."'";`

问题是，在第一行代码中，cat_id 可能是一个整数，但 cat_name 是一个字符串。当你这样做时`cat_id = $_GET['id']`，它试图做`cat_id = somecatname`而不是`cat_id = 'somecatname'`

# php - 传入关键字的空返回

> ID：10872642
> 
> 赞同：-1
> 
> 时间：2012-06-03T17:57:06.117
> 
> 标签：php, performance, seo

通过`$_SERVER['HTTP_REFERER']`用于检测传入的谷歌关键字，它返回一个显示`q=`为空的字符串。

它返回一个这样的网址：

```
http://www.google.com/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=29&ved=0CGUQFjAIOBQ&url=http%3A%2F%2Fwww.myurl.com%2Fq%h2F%2Bsvxhk&ei=i6HLT43kC4bHswb9tZnCBg&usg=AFQjCNFecbCFrl6ijGLa57krctOcXiDZ0A&sig2=xprGQXlaVyxxYK646t1Oaw 
```

如您所见，没有任何可检测的关键字。有什么问题和解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:34:35.110

没有错，这是[Google 文章](http://googlewebmastercentral.blogspot.com/2011/10/accessing-search-query-data-for-your.html)的预期行为。

Google 建议使用：[搜索查询](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=35252)

# dynamic - libmergestream.so：未定义符号：XUnlockDisplay

> ID：10872647
> 
> 赞同：0
> 
> 时间：2012-06-03T17:57:58.963
> 
> 标签：dynamic, shared-libraries

我环顾四周并尽力而为，但我无法解决这个问题：

我正在编译一个应用程序，它将动态加载用户创建的共享对象，例如 libmergestream.so。

mergestream.cpp（libmergestream.so 从中派生）包含 CImg 库调用。`-lpthread -lX11 -lXext -lXrandr`我用标志编译共享对象。

接下来，我将应用程序的第二部分构建为可执行文件，并提供相同的标志和库：`-L/usr/lib/x86_64-linux-gnu`通过链接器标志。

当我运行应用程序时，共享对象的加载失败并显示以下消息：

```
Sun Jun  3 19:35:24 2012[1,6]<stdout>:0x7f46705e4180 ../DALProcesses/lib/libmergestream.so: undefined symbol: XUnlockDisplay 
```

为了确保没有遗漏任何内容，我采用了一个小型 CImg 库示例，并将其构建为可执行文件（无共享对象）。它运行良好。作为参考，我将其称为 CImgExample 二进制文件。

我在 CImgExample 二进制文件中查找符号：

```
nm CImgExample | grep 'XUn'
         U XUngrabKeyboard
         U XUnlockDisplay
         U XUnmapWindow 
```

二进制文件本身有未定义的符号，我仍然可以让它执行。

对于 CImgExample 上的 ldd：

```
linux-vdso.so.1 =>  (0x00007fff988f5000)
libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f4f08e61000)
libX11.so.6 => /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007f4f08b2d000)
libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f4f0882c000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f4f08532000)
libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f4f0831c000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f4f07f5e000)
/lib64/ld-linux-x86-64.so.2 (0x00007f4f090ab000)
libxcb.so.1 => /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007f4f07d40000)
libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f4f07b3c000)
libXau.so.6 => /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f4f07938000)
libXdmcp.so.6 => /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f4f07732000) 
```

为了比较，这里是 libmergestream.so 的 nm 输出：

```
nm libmergestream.so | grep 'XUn'
                 U XUngrabKeyboard
                 U XUnlockDisplay
                 U XUnmapWindow 
```

这是应用程序的 ldd（称为“main”），它将动态加载 libmergestream.so：

```
linux-vdso.so.1 =>  (0x00007fff8dfff000)
libmpi.so.1 => not found
libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fa79c69a000)
libmpi_cxx.so.1 => not found
libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fa79c495000)
libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fa79c195000)
libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fa79bf7e000)
libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fa79bbc1000)
/lib64/ld-linux-x86-64.so.2 (0x00007fa79c8e4000)
libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fa79b8c7000) 
```

我注意到“main”中缺少这两个库引用：

```
libXau.so.6 => /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f4f07938000)
libXdmcp.so.6 => /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f4f07732000) 
```

有趣的是，我在 Linux 服务器上为共享库和“主”运行相同的构建过程，一切顺利。是我的笔记本讨厌某些东西，我不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:09:05.707

此外，如果您的库中不需要 CImg 的显示功能，您可以禁用 X11，只需放置一个

```
#define cimg_display 0 
```

就在“CImg.h”文件的包含之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:54:33.633

你没有说，但看起来你在 Linux 上使用 gcc。如果是这样，请尝试使用 --no-undefined 标志构建 libmergestream.so 到 ld（如果您通过编译器驱动程序传递它，请使用 -Wl,--no-undefined）。这将使 libmergestream.so 的链接失败，除非在链接行上提供了满足其未定义符号所需的所有库。您可能会发现该链接现在因对这些相同符号的投诉而失败。您现在可以将任何所需的库添加到 libmergestream.so 的库列表中，直到链接成功。这些新的依赖项将被添加到库的“需要”集中，并在运行时与它一起加载。

这应该可以工作，除非 libmergestream.so 中有一些符号可以通过加载可执行文件本身来满足（在这种情况下应该使用 --export-dynamic 编译）。如果是这种情况，您可能无法使用 --no-undefined 一直到完整的链接，但您可以使用它来确定您仍需要添加哪些库：当唯一的符号链接失败是可执行文件提供的链接，您可以删除 --no-undefined ，此时您应该没问题。但是将支持抽象到另一个共享库中而不是依赖于可执行文件确实更好。对于您打算在运行时加载的库，如果可能的话，您应该使用 --no-undefined。

# racket - 球拍和花栗鼠的 FFI 问题

> ID：10872648
> 
> 赞同：5
> 
> 时间：2012-06-03T17:58:10.203
> 
> 标签：racket, ffi, chipmunk

我正在尝试使用它提供的 FFI 在 Racket 中使用 Chipmunk 物理库。但是，我目前在实际让 FFI 查找 Chipmunk 库中的函数时遇到问题，即使它似乎正确加载了库。

我正在使用最新版本的 Chipmunk (6.1.1)，它基于 Windows 8 和 Visual Studio 2008。我设置了“CHIPMUNK_FFI”标志，以便加载 chipmunk_ffi.h 文件。我正在使用“多线程 DLL”和“构建为 dll”选项在 Release DLL 配置下构建代码。我使用的球拍代码如下：

```
#lang scheme

(require ffi/unsafe
         ffi/unsafe/define)

(define chipmunk (ffi-lib "./chipmunk"))
(define-ffi-definer define-chipmunk chipmunk)

(define _cpFloat _double)
(define cpFloat? real?)
(define _cpDataPointer _pointer)
(define _size_t _ulong)
(define _cpHashValue _size_t)

(define-cstruct _cpVect
                ([x _cpFloat]
                 [y _cpFloat]))

(define cpv
  (get-ffi-obj "cpvadd" chipmunk (_fun _cpVect _cpVect -> _cpVect))) 
```

我得到了错误：

```
ffi-obj: couldn't get "cpvadd" from "chipmunk.dll" (The specified procedure could not be found.; errno=127)

 === context ===
C:\Program Files (x86)\Racket\collects\ffi\unsafe.rkt:180:2: get-ffi-obj*
C:\Users\me.000\AppData\Roaming\Racket\planet\300\5.2.1\cache\jaymccarthy\chipmunk.plt\1\0\chipmunk-ffi-new.ss: [running body]
C:\Users\me.000\AppData\Roaming\Racket\planet\300\5.2.1\cache\jaymccarthy\chipmunk.plt\1\0\chipmunk-new.rkt: [traversing imports]
C:\Users\me.000\AppData\Roaming\Racket\planet\300\5.2.1\cache\jaymccarthy\chipmunk.plt\1\0\main.rkt: [traversing imports]
C:\Users\me.000\Dropbox\Code\workspace-racket\learning\main.rkt: [traversing imports] 
```

如果您需要任何进一步的信息，请告诉我。我真的很感激这方面的一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:33:59.113

一些函数（例如`cpvadd`导出为`_cpvadd`）。

请参阅[http://code.google.com/p/chipmunk-physics/source/browse/trunk/include/chipmunk/chipmunk_ffi.h](http://code.google.com/p/chipmunk-physics/source/browse/trunk/include/chipmunk/chipmunk_ffi.h)

# c# - ViewStartPage 只能与从 WebViewPage 或另一个 ViewStartPage 派生的页面一起使用

> ID：10872649
> 
> 赞同：3
> 
> 时间：2012-06-03T17:58:30.883
> 
> 标签：c#, asp.net, asp.net-mvc-3, webview

由于某些需要，我创建了自己的自定义视图开始，如下所示：

```
public abstract class MyViewStart : System.Web.Mvc.ViewStartPage {
    public My.Helpers.ThemeHelper Themes { get; private set; }

    public MyViewStart() : base() {
        Themes = new Helpers.ThemeHelper(base.ViewContext)
    }
} 
```

需要的是，在 _ViewStart 中我需要做一些取决于主题的布局文件查找，它所做的与问题无关。

我的 Views/Shared/_ViewStart.cshtml 看起来像这样（删除了不相关的东西）：

```
@inherits MyNamespace.MyViewStart
@{
    Layout = Themes.ThemeLayout;
} 
```

因此，我们有一个派生自标准 ViewStartPage 的自定义 ViewStart 类。标准的 _ViewStart.cshtml 是一个 ViewStartPage。新的 _ViewStart.cshtml 是一个 MyViewStart 页面，它又是一个标准的 ViewStartPage，因此所有内容都包含在继承中。

但是，当我运行应用程序时，出现错误：

ViewStartPage 只能与从 WebViewPage 或另一个 ViewStartPage 派生的页面一起使用

这是由我的自定义视图启动类的构造函数中的“Themes = new Helpers.ThemeHelper”行抛出的。那么，当我的自定义视图开始类是 ViewStartPage 的子类时，为什么会引发该异常？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T21:20:54.990

您无法在构造函数中访问 ViewContext，但如果您覆盖 ExecutePageHierarchy，则可以在那里进行。我像这样修改了您的代码以使其正常工作：

```
public abstract class MyViewStart : System.Web.Mvc.ViewStartPage {
    public My.Helpers.ThemeHelper Themes { get; private set; }

    public override void ExecutePageHierarchy()
    {
        this.Themes = new Helpers.ThemeHelper(this.ViewContext);
        base.ExecutePageHierarchy();
    }
} 
```

# javascript - 与图像 Onmouseover 关联的传递链接

> ID：10872652
> 
> 赞同：0
> 
> 时间：2012-06-03T17:59:10.680
> 
> 标签：javascript

我需要将与 5 个不同图像关联的链接动态传递给不同的图像。我已经创建了更改图像的功能，但这是我无法找到答案的最后一部分。到目前为止，这是我的代码：

```
<html>
<head><title>Revolving Pictures</title>
   <script type="text/javascript">          
        function changeBigPic(newPic){
            var big = document.getElementById("bigPic");
            big.src = newPic;
    //***How do I get the href of the 'album' images to 'bigPic'? I'm also trying to double the size of bigPic and using 200% makes the image enormous! Thanks in advance   
}
    </script>
</head>
    <body>
        <img name="bigPic" id="bigPic" src="album1.jpg" height="200%" width="200%"><br />

<A HREF="http://stevenseagal.com/"><img src="album1.jpg" id="segal" onmouseover="changeBigPic(document.getElementById('segal').src);">

&nbsp <A HREF="http://www.richardcheese.com/" target="_blank"><img src="album2.jpg" id="cheese" onmouseover="changeBigPic(document.getElementById('cheese').src);">

&nbsp <A HREF="http://www.myspace.com/etjusticepourtous" target="_blank"><img src="album3.jpg" id="justice" onmouseover="changeBigPic(document.getElementById('justice').src);">

&nbsp <A HREF="http://www.bestcoast.us/" target="_blank"><img src="album4.jpg" id="bestCoast" onmouseover="changeBigPic(document.getElementById('bestCoast').src);">

&nbsp <A HREF="http://www.van-halen.com/" target="_blank"><img src="album5.jpg"       id="vanHalen" onmouseover="changeBigPic(document.getElementById(this.id).src);">

 </body>
<html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:19:07.363

我认为最简单的方法是传递 img 对象而不仅仅是它的源。

将 onmouseovers 替换`onmouseover="changeBigPic(this);"`为新的 changeBigPic 函数将类似于：

```
function changeBigPic(element){
    var big = document.getElementById("bigPic");
    big.src = element.src;

    // To get the href of the parent node:
    var href = element.parentNode.href;
} 
```

# c# - 将文件放入 C# 上的特定文件夹

> ID：10872657
> 
> 赞同：-2
> 
> 时间：2012-06-03T17:59:41.670
> 
> 标签：c#, visual-studio-2010

> **可能重复：**
> [从 WPF 应用程序获取应用程序的目录](https://stackoverflow.com/questions/938421/getting-the-applications-directory-from-a-wpf-application)

我想在不使用“C：\ Path”的情况下从项目目录中访问文件，就像在java中一样，因为它会在我的图片框中创建文件异常这是我的计时器中的代码

```
if (imagecount == 30)
{
    this.pictureBox1.Image = System.Drawing.Image.FromFile(@"C:\Users\Baloi\Documents\visual studio 2010\Projects\WinEX\WinEX\" + image() + ".jpg");
    imagecount = 0;
}

else if (imagecount < 30)
    imagecount++; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:17:43.463

[应用目录](http://msdn.microsoft.com/en-us/library/system.appdomain.basedirectory.aspx)：

```
string baseDirectory = AppDomain.CurrentDomain.BaseDirectory; 
```

[可执行目录](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.executablepath.aspx)：

```
string executableDirectory = Path.GetDirectoryName(Application.ExecutablePath); 
```

根据您的要求，您可以将上述之一与[Path.Combine 结合](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)使用并构建图像位置的完整路径。

或者，您可以将图像嵌入资源文件中。然后您可以将它们加载为

```
Stream imgStream = 
    Assembly.GetExecutingAssembly().GetManifestResourceStream(
    "YourNamespace.resources.ImageName.bmp");
pictureBox.Image = new Bitmap(imgStream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:36:10.713

您可以使用以下代码：

```
this.pictureBox1.Image = System.Drawing.Image.FromFile(image() + ".jpg"); 
```

您的文件应与程序位于同一文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T18:41:57.587

你有几个选择：

1.  在项目中嵌入图片（将编译操作设置为 Embedded Data）

2.  使用相对路径引用您的图片。由于在调试时二进制程序集位于 bin\Debug 文件夹中，这稍微复杂了一点。

对于选项 1：

```
System.Reflection.Assembly thisExe;
thisExe = System.Reflection.Assembly.GetExecutingAssembly();
System.IO.Stream file = 
    thisExe.GetManifestResourceStream("AssemblyName.ImageFile.jpg");
this.pictureBox1.Image = Image.FromStream(file); 
```

[http://msdn.microsoft.com/en-us/library/aa287676(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287676(v=vs.71).aspx)

对于选项 2：

```
string appPath = Path.GetDirectoryName(Application.ExecutablePath);
if (System.Diagnostics.Debugger.IsAttached)
{
    contentDirectory = Path.Combine(appPath + @"\..\..\content");
}
else
{   
    contentDirectory = Path.Combine(appPath, @"content");
} 
```

# c++ - C++ 虚函数无法识别

> ID：10872660
> 
> 赞同：0
> 
> 时间：2012-06-03T17:59:57.713
> 
> 标签：c++, class, virtual, overriding

我正在使用 CodeBlocks，并且我有以下无法编译的代码。

（这是关于一些 C++ 的陷阱，所以我唯一想问的是为什么它不能编译）

代码如下：

```
#include <iostream>
using namespace std;

class Shape
{
        public:
                Shape();
                virtual void reset();
        private:
                int color;
};

class Point : public Shape
{
        private:
        double a,b;
};

void Shape::reset()
{
        cout<<"Shape reset\n";
}

void Point::reset()
{
        Shape::reset();
        cout<<"Point reset";
}

Shape::Shape()
{
        reset();
}

int main()
{
        Shape s;
        Point o;
} 
```

我收到以下错误：

```
no `void Point::reset()' member function declared in class `Point' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T18:01:22.287

您需要在`Point`类主体中添加函数声明：

```
class Point : public Shape
{
public:
    virtual void reset();
private:
    double a,b;
}; 
```

（`virtual`不需要，因为它是`virtual`在基类中声明的。但添加它作为提醒会很有帮助。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:20:26.690

它应该这样声明：

```
class Shape
{
       public:
               Shape();
               virtual void reset(){};
       private:
               int color;
}; 
```

注意括号，因为虚函数什么都不做，你可以在声明中添加括号。由于它是一个虚函数，它被设计为在继承基类时重新定义。所以不能真正调用`Shape::reset()`你的`Point::reset()`函数。同样在您的`Point`班级中，您需要重新定义新功能。像这样：

```
class Point : public Shape
{
     public:
         void reset();
} 
```

然后你可以使用函数 as `Point::reset`。

# php - 对所有文件使用 PHP 强制下载

> ID：10872666
> 
> 赞同：0
> 
> 时间：2012-06-03T18:00:53.377
> 
> 标签：php

我的问题是，有没有办法对所有文件类型使用标头下载 PHP 方法；

```
 <?php

$fileid = $_GET['fid'];
$filename = $_GET['fn'];
 $auth_code = $_GET['dlauth'];
$folder = $_GET['fi'];
echo $file = $folder."/".$filename;

if (empty($fileid) || empty($filename) || empty($auth_code) || empty($folder)) {

    echo "Malformed ID, please go back and try to download again";

    } else {

        if (strlen($auth_code) > 25) {

            echo "Download session has expired or is malforned";

            }  else {

  header("Content-Disposition: attachment; filename=$filename");

  header('Content-Length: ' . filesize($file));
  header("Pragma: no-cache");
  header("Expires: 0");

  readfile($file);

                }

        }

?> 
```

因为这会下载压缩文件等，所以非常好。但是，当涉及到其他任何事情时，它只会腐败。

任何人都可以在不使用 switch 语句来确定文件扩展名的内容类型的情况下获得任何线索。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:32:08.823

你真的必须用PHP来做吗？如果没有，那么我建议使用 a`.htaccess`来处理这个问题：

```
AddType application/octet-stream .csv
AddType application/octet-stream .xls
AddType application/octet-stream .doc
AddType application/octet-stream .avi
AddType application/octet-stream .mpg
AddType application/octet-stream .mov
AddType application/octet-stream .pdf 
```

否则，我建议将 设置`Content-Type`为您的文件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:23:02.517

```
header("Content-Disposition: attachment; filename=$filename"); 
```

应该足以在未加密的连接上强制下载。像往常一样设置`Content-Type`（例如`image/jpeg`）。其余的不是必需的，也不需要由您的网络服务器根据需要设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T18:34:21.340

可以使用文件信息扩展名来完成。

[http://www.php.net/manual/en/ref.fileinfo.php](http://www.php.net/manual/en/ref.fileinfo.php)

# php - PHP如何从var_dump stdclass获取数据

> ID：10872679
> 
> 赞同：0
> 
> 时间：2012-06-03T18:12:45.603
> 
> 标签：php

我使用 Dropbox API，当我使用 metaData 方法时，我需要列出文件夹中的所有文件 var_dump(); 比如：var_dump($metaData);

我得到这些：

```
object(stdClass)#26 (9) { 
    ["hash"]=> string(32) "d36517b72d827dc28b1e0681a23e463a" 
    ["thumb_exists"]=> bool(false) 
    ["bytes"]=> int(0) 
    ["path"]=> string(1) "/" 
    ["is_dir"]=> bool(true) 
    ["size"]=> string(7) "0 bytes" 
    ["root"]=> string(10) "app_folder" 
    ["contents"]=> array(1) { 
        [0]=> object(stdClass)#27 (12) { 
            ["revision"]=> int(1) 
            ["rev"]=> string(9) "10815f504"  
            ["thumb_exists"]=> bool(false)  
            ["bytes"]=> int(7332680)  
            ["modified"]=> string(31) "Sun, 03 Jun 2012 17:51:47 +0000"  
            ["client_mtime"]=> string(31) "Sun, 03 Jun 2012 17:51:47 +0000"  
            ["path"]=> string(9) "/etmh.pdf"  
            ["is_dir"]=> bool(false)  
            ["icon"]=> string(18) "page_white_acrobat"  
            ["root"]=> string(7) "dropbox"  
            ["mime_type"]=> string(15) "application/pdf"  
            ["size"]=> string(4) "7 MB"  
        }  
    } 
    ["icon"]=> string(6) "folder" 
} 
```

我该如何处理这些数据，例如我需要列出这个文件夹中的所有文件，现在，上例中只有一个文件 (["path"]=> string(9) "/etmh.pdf" ： : ["mime_type"]=> string(15) "application/pdf" )

我需要像 foreach 这样的东西来获取和处理所有数据..

谢谢 ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T18:18:09.307

您可以使用[get_object_vars()](http://de.php.net/manual/en/function.get-object-vars.php)然后`dump()`它

```
<?php
    var_dump(get_object_vars($object));
?> 
```

`get_object_vars()`返回一个具有相应`$key=>$value`对的数组，然后您可以遍历该数组来做一些更明智的事情，例如读取存储在该对象中的信息。阅读[手册](http://de.php.net/manual/en/function.get-object-vars.php)以获得更好的理解，它只有几行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T18:19:01.757

您可以使用该函数`get_object_vars()`从对象中提取变量。

文档链接[http://de.php.net/manual/en/function.get-object-vars.php](http://de.php.net/manual/en/function.get-object-vars.php)

# ipad - iPad：如果我以模态方式展示 ADInterstitialAd，我可以重复使用它吗？如果没有，为什么我会遇到限制错误？

> ID：10872680
> 
> 赞同：0
> 
> 时间：2012-06-03T18:12:53.393
> 
> 标签：ipad, iad

我有点不清楚围绕`ADInterstitialAd`. 目前，这是我启用 ARC 的应用程序对开发 iAD 所做的：

1.  在启动时，我的应用程序分配一个`ADInterstitialAd`并保持对它的引用。
2.  经过一些用户交互后，我的应用程序模态显示`ADInterstitialAd`.
3.  当`interstitialAdDidUnload`被调用时，我的应用程序消除了步骤 #1 中的引用，从而有效地导致 ARC 释放`ADInterstitialAd`.
4.  然后我的应用程序 allocs`ADInterstitialAd`并存储该引用以供将来使用。

步骤 2-4，冲洗并重复。

我采用这种方式是因为我发现如果我跳过第 3 步（从不发布`ADInterstitialAd`），**下次**我模态显示广告时，用户将无法与广告互动，从而有效地阻止了我的应用程序的使用。

苹果的文档[`interstitialAdDidUnload`](https://developer.apple.com/library/ios/documentation/iAd/Reference/ADInterstitialAdDelegate_Ref/Introduction/Introduction.html#//apple_ref/occ/intfm/ADInterstitialAdDelegate/interstitialAdDidUnload%3a)说：

> 此方法的实现应该释放广告对象。

对我来说，我读到上面的 1-4 序列是正确的。但是，我从 iAd [测试] 网络收到了很多限制错误。我希望我得到这些错误仅仅是因为它是测试网络 - 但我担心我会以某种方式调用限制，因为我没有重复使用广告。

我不确定。有什么想法/启示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:27:23.453

[我的理解是，根据http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/iAd_Guide/Full-ScreenAdvertisements/Full-ScreenAdvertisements.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/iAd_Guide/Full-ScreenAdvertisements/Full-ScreenAdvertisements.html)，您只能每 5-15 分钟展示一次

所以我在我的应用程序中所做的是在我的应用程序委托上创建一个 ADInterstitialAd 属性，并安排一个 5 分钟的计时器来重新分配它。

我在 viewwillappear 上将我的委托设置为它。

然后在 - (void)interstitialAdActionDidFinish:(ADInterstitialAd *)interstitialAd 中，我要做的第一件事就是取消该属性。然后在显示广告时，如果我有一个添加并加载它，我会显示它，否则跳过它。

根据他们的文档，您也不能重复使用相同的 ADInterstitialAd。

# html - 如何在页面上居中？

> ID：10872688
> 
> 赞同：31
> 
> 时间：2012-06-03T18:13:49.003
> 
> 标签：html, css, center, centering

我正在尝试将 body 元素放在我的 HTML 页面上。

![在此处输入图像描述](../Images/96f3fb9b4031f2a338dbb5d4dfc5f3fc.png)

基本上，在 CSS 中，我将 body 元素设置为`display: inline-block;`使其仅与内容一样宽。这很好用。但是，`margin: 0px auto;`它不会在页面上居中。

有谁知道如何解决这一问题？我希望蓝色的大方块位于页面的中心，而不是像现在这样向左浮动。

这是我的CSS：

```
body {
    display: inline-block;
    margin: 0px auto;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-20T23:38:21.240

```
 body
    {
        width:80%;
        margin-left:auto;
        margin-right:auto;
    } 
```

这适用于大多数浏览器，包括 IE。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-03T18:16:13.337

同时应用 text-align: center; 在 html 元素上，如下所示：

```
html {
  text-align: center;
} 
```

更好的方法是有一个内部容器 div，它将是集中的，而不是 body。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-03T18:16:48.563

您必须指定正文的宽度才能使其在页面上居中。

[或者将所有内容放在div中并居中。](http://jsfiddle.net/gA9La/4/)

```
<body>
    <div>
    jhfgdfjh
    </div>
</body>​

div {
    margin: 0px auto;
    width:400px;
} 
```

​</p>

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-26T20:04:20.673

对于那些**知道**宽度的人，你可以做类似的事情

```
div {
     max-width: ???px; //px,%
     margin-left:auto;
     margin-right:auto;
} 
```

我也同意不要在正文上设置**text-align:center**，因为它可能会弄乱您的其余代码，并且您可能必须在当时或将来在很多事情上单独设置**text-align:left 。**

# javascript - 如何在命令行中测试 AJAX？

> ID：10872694
> 
> 赞同：4
> 
> 时间：2012-06-03T18:14:31.850
> 
> 标签：javascript, ajax, unit-testing, node.js

假设我有一些代码`JavaScript`，用于`jQuery.ajax`调用服务器 REST API。

为了测试它，我想

*   使用一个虚拟的 HTTP 服务器，它从静态 XML 文件中读取响应；
*   运行`JavaScript`代码“无头”，即没有浏览器；
*   在命令行中运行所有这些测试。

看起来我可以使用`node.js`嵌入式虚拟 HTTP 服务器。是否有意义？您知道此类项目的任何示例（在 github 或其他地方）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:11:40.963

老实说，我还没有做过这样的事情，但我正在评估以下方法：

[http://blog.stevensanderson.com/2010/03/30/using-htmlunit-on-net-for-headless-browser-automation/](http://blog.stevensanderson.com/2010/03/30/using-htmlunit-on-net-for-headless-browser-automation/)

这真的很有趣，我希望这个链接可以帮助你开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:27:43.267

使用 node.js 的主要问题是它没有提供浏览器将提供的所有东西……包括 XMLHttpRequest。

我正在开发一个我试图用 node.js 测试的库（专有的，仅供内部使用）。

对于缺乏 XHR 支持，我的解决方法是结合使用[此 XHR 实现](https://github.com/driverdan/node-XMLHttpRequest)与一些 Microsoft 提供的代码[，为旧 IE 添加标准 XHR 的向后兼容性](http://blogs.msdn.com/xmlteam/archive/2006/10/23/using-the-right-version-of-msxml-in-internet-explorer.aspx)。

如果您使用的是 jQuery，那么您可能需要修改它，因为 jQuery 稍后会为旧 IE 添加自己的兼容性。

结果如下所示：

```
var XMLHttpRequest;

if (typeof window !== 'undefined') {
    XMLHttpRequest = window.XMLHttpRequest;
}
if (typeof XMLHttpRequest === "undefined") {
    console.log("Undefined"); (function() {
        try {
            XMLHttpRequest = new ActiveXObject("Msxml2.XMLHTTP.6.0");
        } catch(e) {}
        try {
            XMLHttpRequest = new ActiveXObject("Msxml2.XMLHTTP.3.0");
        } catch(e) {}
        try {
            XMLHttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch(e) {}
        try {
            XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest;
        } catch(e) {}
        //Microsoft.XMLHTTP points to Msxml2.XMLHTTP and is redundant
        if (typeof XMLHttpRequest === "undefined") {
            throw new Error("This browser does not support XMLHttpRequest.");
        }
    })();
}; 
```

除此之外，在测试套件中运行一个简单的 HTTP 服务器是解决此类问题的常用方法。我还没有实现这一点，并且正在处理在测试服务器上运行的 httpd。

# c - 将字段添加到共享库中的结构的最简单方法是什么？

> ID：10872696
> 
> 赞同：-4
> 
> 时间：2012-06-03T18:14:43.803
> 
> 标签：c, linux, gcc

我想在`pthread_mutex_t`结构中添加一个新字段。`pthread.h`为此目的更改头文件是否足够？但我想这不是一个好主意，因为那样我会篡改编译器附带的头文件。

还有什么其他方法可以做到这一点？

我这样做是因为我是 LD_PRELOADing`pthread_mutex_lock`并且我的自定义`pthread_mutex_lock`需要一个额外的字段`pthread_mutex_t`。当然我可以编写代码以便使用除 之外的结构`pthread_mutex_t`，但我不希望用户修改其程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T18:18:09.593

如果不重新编译可能依赖它的**所有内容**，就无法扩展`pthread_mutex_t`结构。这意味着您的所有系统库、第三方库和您的应用程序。根本没有办法解决这个问题。

 **你能解释一下你试图通过这样做解决什么实际问题吗？这可能会让某人给你一个可以接受的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T23:53:17.327

这是一个长镜头。但是您可以执行以下操作：

```
struct my_pthread_mutex_t {
   pthread_mutex_t mutex;
   ...
   /* insert fields here */
   ...
}; 
```

这应该允许您为`pthread_mutex_t`和拥有相同的地址`my_pthread_mutex_t`。因此，如果一个函数知道这一点`hack`（也就是说，如果结构声明在范围内），您可以强制转换为 my_pthread_mutex_t，否则您可以使用与简单 pthread_mutex_t 相同的东西。

这样做的好处是，通过扩展这样的结构，您不必重新编译任何代码，并且您不会冒险为合法使用的其他程序搞砸事情`pthread_mutex_t`**

# php - 使用 PHP 会话存储和更新复选框数组

> ID：10872701
> 
> 赞同：0
> 
> 时间：2012-06-03T18:15:23.417
> 
> 标签：php, session, checkbox

我有一个注册表单，其中包含复选框形式的运动列表（从 mysql 表中提取）。在发布后，我创建了一个会话，其中包含与可以验证的表单相关的变量。除了存储运动的复选框外，一切都按计划进行。我已经通过一个数组传递我的帖子值，所以它就像通过一个数组传递一个数组，这就是我没有运气的地方。我只想要从帖子到显示的检查运动。此外，如果该列表在第二次或第三次验证时更新，我希望它更新数组。代码如下，先谢谢了。

邮政编码

```
if(isset($_POST['signup']) == 'Finish') { 

//start session to store variables for post-submit validation
session_start();

//sanitizes input and prevents sql injection attacks
foreach($_POST as $key => $value) {
    $data[$key] = filter($value);
    $_SESSION[$key] = $value;
}

$_SESSION['sport'] = array_unique(array_values(array_merge($_SESSION['sport'], $data['sport']))); 
```

表格代码

```
 <table class="signup_sportstable" border="0" cellpadding="0" cellspacing="4">';

        $result = mysql_query("SELECT * FROM sports ORDER BY sport ASC");

        $i = 0;
        $max_columns = 3;
        while($row = mysql_fetch_array($result)) {
            foreach ($_SESSION['sport'] as $sport_id) {
                $checked = 'checked';
            }

            // make the variables easy to deal with
            extract($row);

            // open row if counter is zero
            if($i == 0)
            $content .= '<tr>';

            // make sure we have a valid product
            if($sport != "" && $sport != null)
            $content .= '<td><input type="checkbox" name="sport[]" value="'.$sport_id.'" id="sport[]" '.$checked.'>'.$sport.'</td>';

            // increment counter - if counter = max columns, reset counter and close row
            if(++$i == $max_columns) {
             $content .= '</tr>';
             $i=0;
            }  // end if 
        } // end while

        // clean up table
        if($i > 0) {
                for($j=$i; $j<$max_columns;$j++) $content .= "<td>&nbsp;</td>";
            $content .= '</tr>';
        }

    $content .= '
    </table> 
```

**更新！！！**

我一开始忘了提到，一旦创建会话，我的代码就会检查每个框，而不是只检查最初选中的框。我被告知这是因为我根据我的代码检查的条件总是正确的，所以......

替换：

```
foreach ($_SESSION['sport'] as $sport_id) {
            $checked = 'checked';
        } 
```

和：

```
if (in_array($sport_id, $_SESSION['sport'])) {
    $checked = 'checked';
} else {
    $checked = ''; 
```

现在，它记住了两个复选框，但在每次提交后，它会立即检查我第一次检查的那个右侧的一个。如果我再次点击提交，它在右边的另一个位置。}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:28:39.987

首先，以下对我来说似乎很奇怪：

```
//sanitizes input and prevents sql injection attacks
foreach($_POST as $key => $value) {
    $data[$key] = filter($value);
    $_SESSION[$key] = $value;
} 
```

这是否意味着您将所有内容都保存`$_POST`到您的`$_SESSION`? 这不是您想要的，因为如果您在站点的另一部分使用会话获取登录信息，例如将用户名存储在 中`$_SESSION['username']`，那么有人可以通过使用“用户名”参数提交表单来覆盖它. 所以你可能不想这样做；我建议只检查你真正想要的 POST 变量并将它们清理到你想要的位置。

我建议将您的代码更改为：

```
$sports = array();
if (isset($_POST['sport']) && is_array($_POST['sport'])) {
    foreach ($_POST['sport'] as $sport) {
        if (is_numeric($sport)) // example sanitation, since only numeric ids are allowed
            $sports[] = $sport;
    }
    $_SESSION['sports'] = $sports;
} elseif (isset($_SESSION['sports'])) {
    $sports = $_SESSION['sports'];
} 
```

如果用户提交任何运动，这将允许用户覆盖会话中的运动。如果您想在会话中允许一个空的运动数组，您需要将第一个 if 语句中的检查更改为类似的`if (isset($_POST['submit'])`内容，以检查表单是否已提交（并且您的提交按钮名为“提交”）。

如果第一个条件失败（即没有传递新的运动数组），将使用存储在会话中的运动数组。

然后，检查是否检查了一项运动的代码的第二部分将类似于：

```
$checked = in_array($id, $sports);
$content .= '<td><input type="checkbox" name="sport[]" value="'.$id.'" id="sport'.$id.'" '.($checked?'checked="checked':'').'>'.$name.'</td>'; 
```

（假设`$id`和`$name`设置正确。）

**更新：**还要检查来自的运动数组`POST`是否实际上是一个数组。

# c++ - cpp 快速访问磁盘上的二进制数据

> ID：10872705
> 
> 赞同：0
> 
> 时间：2012-06-03T18:16:05.030
> 
> 标签：c++, database, binary, indexing

目前，我的程序在内存中有很多会话。Session 是带有`unsigned int ID`一些变量 + 可能的长尺寸的对象`std::map`（从会话到会话的大小不同）。

我想将一些会话卸载到磁盘，但不知道如何组织磁盘上的结构以便有机会在磁盘上快速查找会话以在需要时加载它。如何通过磁盘上的 ID 快速查找会话？也许是一些索引，但不知道如何使用它们......或者可能是一些额外的变量？

* *SQL 数据库 **不是我的变体，因为稳定性、资源过度使用、可移植性、可兼容性等等等等，都需要像其他数据库一样在磁盘上进行组织。

*谢谢，对不起我的英语。如果有错误，请编辑我的文字*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T18:17:35.420

使用数据库，这正是他们擅长的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T18:19:00.827

您可以[`SQLite`](http://www.sqlite.org/)为此目的使用库。它也有[C/C++ 接口](http://www.sqlite.org/cintro.html)。

此外，SQLite 是一个[跨平台和可移植的](http://www.sqlite.org/onefile.html)数据库。它只是一个文件（您可以拥有一个文件），就像您硬盘上的任何其他文件一样。您无需为此安装任何大型软件。它轻巧方便。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T14:27:15.497

为什么在如此多的网站上，如此多的人回答了一个简单的问题，“你为什么要这样做？” 或提供不回答该人的替代方案？（阅读本页底部的“您的答案”框）可能有更好的方法，或者这个人几乎是在浪费时间。但是，他们可能只是为了尝试并想出解决方案的乐趣而尝试，无论它运行得多么好。@abrahab 显然想尝试一下（他试图说得很清楚）所以让他回答他的问题，或者如果你不知道答案，请保持安静。

@abrahab，一种方法是使用二进制文件格式来存储会话数据。对保存在单独文件中的会话 id（Google btree）使用 btree 索引，每个会话 id 下的 btree 中存储的值是一个文件指针，指向数据文件中二进制记录开始的位置。从文件中读取的第一个字节（short int、int、long）告诉您记录的字节长度，读取这些字节并处理它们。由您来定义会话记录的格式（结构等）。如果您编辑/删除/插入一条记录，您必须更新该记录的 btree 以及在数据文件中重新定位的任何记录。

使用数据库更容易，但如果这是您想要做的，这将起作用并且性能应该非常好。如果您想在记录中搜索特定值，您可以使用这些值构建另一个 btree，但这将是认真考虑沿着 DB 路线走的时候。

# r - 拉对齐字符位置

> ID：10872710
> 
> 赞同：0
> 
> 时间：2012-06-03T18:16:33.057
> 
> 标签：r, bioconductor, protein-database

我使用成对对齐来获得以下信息：

```
> alignment <-pairwiseAlignment(pattern = canonical.protein, subject=protein.extracted)
> alignment
Global PairwiseAlignedFixedSubject (1 of 1)
pattern: [448]          DDWEIPDGQITVGQRIGSGSFGTVYKGKWHGDVAVKMLNVTAPTPQQLQAFKNEVGV...FMVGRGYLSPDLSKVRSNCPKAMKRLMAE  CLKKKRDERPLFPQILASIELLARSLPK 
subject:   [1]     DDWEIPDGQITVGQRIGSGSFGTVYKGKWHGDVAVKMLNVTAPTPQQLQAFKNEVGV...FMVGRGYLSPDLSKVRSNCPKAMKRLMAECLKKKRDERPLFPQILASIELLARSLPK 
score: -912.3752 
```

然后我可以使用：

```
toString(pattern(alignment))
toString(subject(alignment)) 
```

获取模式和主题的完整字符串序列。但是，如何从对象中获取数字 448 和 1 作为整数？我需要使用这些数字，但似乎没有办法得到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:38:53.513

我相信这些是`start`对齐的 s，所以

```
start(pattern(alignment)) 
```

通过完全可重现的示例，您的问题会更清楚，例如，

```
library(Biostrings)
example(pairwiseAlignment)
aln <- pairwiseAlignment(AAString("PAWHEAE"), AAString("HEAGAWGHEE"),
    substitutionMatrix = "BLOSUM50", gapOpening = 0, gapExtension = -8) 
```

然后

```
> aln
Global PairwiseAlignedFixedSubject (1 of 1)
pattern: [1] PA--W-HEAE
subject: [2] EAGAWGHE-E
score: 1
> start(subject(aln))
[1] 2 
```

此外，[Bioconductor 邮件列表](http://bioconductor.org/help/mailing-list)更适合这些问题；无需订阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:03:29.730

由于您可以从对齐中创建一个字符串，因此您可以使用 R 的字符串函数。您可以执行 substr(toString(pattern(alignment)), 448, 448) 来获取第 448 个字符。我不熟悉那个库，所以可能有一种我不知道的内置方式。有关R 中的字符串函数，请参见[http://www.statmethods.net/management/functions.html 。](http://www.statmethods.net/management/functions.html)

# java - 如何在 Java 中获取呈现的 html（由 Javascript 处理）

> ID：10872712
> 
> 赞同：1
> 
> 时间：2012-06-03T18:16:53.307
> 
> 标签：java, javascript, web-scraping

> **可能重复：**
> [使用 Javascript 获取最终 HTML 将 Java 呈现为字符串](https://stackoverflow.com/questions/10872382/getting-final-html-with-javascript-rendered-java-as-string)

我在这两个链接中都有以下 2 个链接，评论部分是使用 Javascript 生成的。有没有一种方法可以让我获得页面的最终输出，即用 Java 呈现 javascript 的页面？

[http://www.glamsham.com/movies/reviews/rowdy-rathore-movie-review-cheers-for-rowdy-akki-051207.asp](http://www.glamsham.com/movies/reviews/rowdy-rathore-movie-review-cheers-for-rowdy-akki-051207.asp)

[http://www.imdb.com/title/tt0461936/reviews](http://www.imdb.com/title/tt0461936/reviews)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:21:23.150

您应该可以为此使用[PhantomJS](http://phantomjs.org)。它作为无头浏览器（使用 WebKit）运行，并原生支持各种 Web 标准，如 DOM 处理、CSS 选择器、JSON、Canvas 和 SVG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:25:23.147

您可以使用[HTML Unit](http://htmlunit.sourceforge.net/)，一个基于 java 的“GUI LESS 浏览器”。您可以轻松获得任何页面的最终渲染输出，因为这会像 Web 浏览器那样加载页面并返回最终渲染输出。不过，您可以禁用此行为。

**更新：**例如，您是在问吗？你不必为此做任何额外的事情：

**例子：**

```
WebClient webClient = new WebClient();
HtmlPage myPage = ((HtmlPage) webClient.getPage(myUrl)); 
```

**更新 2：**您可以按如下方式获取 iframe：

```
HtmlPage myFrame = (HtmlPage) myPage.getFrameByName(myIframeName).getEnclosedPage(); 
```

请阅读上述链接中的文档。在 HTMLUnit 中获取页面内容没有什么不能做的

# r - R 2.15 的 StatEt

> ID：10872713
> 
> 赞同：2
> 
> 时间：2012-06-03T18:06:54.287
> 
> 标签：r

有人知道是否有任何（简单的）方法可以使 StatEt 与 R 2.15 一起使用？当前的 StatEt 版本被冻结为 R 2.14 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:16:35.117

我使用带有RJ 1.1的StatET 3.0的测试版，它正式支持R 2.15。[安装说明](http://www.walware.de/it/statet/installation.mframe?jump=install-rj-rpkg)建议StatET 2.0 正式支持 R 2.12 - 2.14。StatET 3.0 的更新站点取决于您的 Eclipse 版本：

[http://download.walware.de/eclipse-3.8/testing](http://download.walware.de/eclipse-3.8/testing)

[http://download.walware.de/eclipse-3.7/testing](http://download.walware.de/eclipse-3.7/testing)

[http://download.walware.de/eclipse-3.6/testing](http://download.walware.de/eclipse-3.6/testing)

StatET 3.0 需要 rj 和 rj.gd 1.1 版，可以从 R 中安装：

```
install.packages(c("rj", "rj.gd"), repos="http://download.walware.de/rj-1.1") 
```

有关 StatET 3.0 的更多详细信息，请参阅以下两个线程：

[http://lists.r-forge.r-project.org/pipermail/statet-user/2012-May/001408.html](http://lists.r-forge.r-project.org/pipermail/statet-user/2012-May/001408.html)

[http://lists.r-forge.r-project.org/pipermail/statet-user/2012-February/001284.html](http://lists.r-forge.r-project.org/pipermail/statet-user/2012-February/001284.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:51:34.983

I had a few issues with setting up StatET in Windows and wrote therefore a small blog-tutorial about it that might be of use, you can find it [here](http://gforge.se/2012/05/setting-up-statet-eclipse-in-windows/).

The setup is 64-bit Windows 7, R 2.15 64-bit & 64-bit Indigo Eclipse.

# javascript - 自动填充选择框

> ID：10872714
> 
> 赞同：1
> 
> 时间：2012-06-03T18:17:30.030
> 
> 标签：javascript, jquery, html-select

我正在尝试使用 Jquery 和 JavaScript 自动填充选择框。

我进行了一些搜索并遇到了[这个问题](https://stackoverflow.com/questions/170986/what-is-the-best-way-to-add-options-to-a-select-from-an-array-with-jquery)并遵循了所选答案的建议。

我最初设置了一个 jsFiddle 来说明我的问题：http: [//jsfiddle.net/GJdBR/](http://jsfiddle.net/GJdBR/)

在收到关于以下答案的一些建议后，我创建了一个新的 jsfiddle 并且它起作用了。[http://jsfiddle.net/2UbqP/](http://jsfiddle.net/2UbqP/)

但是，在我的计算机上，我使用的是全新安装的 Windows 7，到目前为止，我所做的只是安装 chrome、apanta 和 xampp。我去 localhost/website 并且该站点出现了，但是 js 功能不起作用，即使我证明代码是正确的，因为上面的 jsfiddle，选择框也没有填充 var。

我收到一个错误：

```
$(document).ready(function() {
    populateTranslationOptions();
}); 
```

错误内容如下：

```
Uncaught SyntaxError: Unexpected token ILLEGAL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:21:13.943

```
$.each(translationOptions, function (index, value) {   
        $('#translationOptions')
            .append($("<option></option>")
            .attr("value",value)
            .text(value)); 
    }); 
```

你试过了

```
$.each(translationOptions, (value) ) 
```

这是错误的，因为正确的结构是`$.each(mapData, callbackFunction)`，这里`mapData`是指对象或数组。

下一个问题是：

```
 $(document).ready(function() {
   populateTranslationOptions;
 });​ 
```

它应该

```
$(document).ready(function() {
   populateTranslationOptions(); // you missed () here
 });​ 
```

请注意，`populateTranslationOptions`不调用函数，因此要调用函数，您需要`populateTranslationOptions()`.

**[演示](http://jsfiddle.net/GJdBR/15/)**

### 一个重要的注意事项

> 函数后面的 () 表示执行函数本身并返回它的值。没有它，您只需拥有该函数，该函数可用于作为回调传递。

**相关参考：**

*   **[$.each()](http://api.jquery.com/jQuery.each/)**

*   **[调用带/不带括号的javascript函数](https://stackoverflow.com/questions/593509/javascript-syntax-function-calls-and-using-parenthesis)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:21:20.130

您的代码中有几个问题。检查这个

```
function populateTranslationOptions ()
{
    var translationOptions = ["Egyptian Hieroglyphs", "Al Bhed (Final Fantasy X)", "Futurama"];
    $.each(translationOptions ,function(i,value) {   
        $('#translationOptions')
            .append($("<option></option>")
            .attr("value",value)
            .text(value)); 
    });
}

$(document).ready(function() {
   populateTranslationOptions();
 });​ 
```

您的代码中的问题：

*   [$.each](http://api.jquery.com/jQuery.each/)语法错误

    $.each(translationOptions (value)) {

应该

```
$.each(translationOptions ,function(i,value) { 
```

*   你没有调用函数`populateTranslationOptions;`不会调用函数 `populateTranslationOptions();`。

[工作小提琴](http://jsfiddle.net/joycse06/GJdBR/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T18:29:58.777

对于数组， $.each 是不必要的。您可以使用简单的循环。如下-

```
function populateTranslationOptions()
{
    var translationOptions = ["Egyptian Hieroglyphs", "Al Bhed (Final Fantasy X)", "Futurama"];
    for (var i = 0; i < translationOptions.length; i++) {
        $('#translationOptions')
            .append('<option value="' + translationOptions[i] + '">' + translationOptions[i] + '</option>');
    };
}

$(document).ready(function() {

   populateTranslationOptions();
 });​ 
```

# cmake - CMAKE 项目依赖

> ID：10872719
> 
> 赞同：2
> 
> 时间：2012-06-03T18:17:46.270
> 
> 标签：cmake

我正在尝试使用 CMake 为一个中等规模的项目建立一个构建系统，该项目由几个较小的项目组成，其中一些是外部开发的。我想要的目录结构是这样的：

* * *

基于的

```
 |--libA
  |     |-src   ( .cxx, source files )
  |     |-libA  ( header files, such that #include statements are "libA/headerA.h" )
  |     |-bin   ( executable, binary, object files )
  |     |-build ( CMake output, makefiles, platform specific stuff, not in CVS/SVN )
  |     |-CMakeLists.txt
  |
  |--libB
  |     |-- ..similar structure 
```

* * *

我认为 libA 和 libB 是独立的项目。潜在地，libA 的配置还将描述链接到外部库（如 libxml2 等）并设置适当的链接选项并包含这些包的路径。我想让 libB 依赖于 libB 并能够获取一组宏以自动附加到，例如，它的 LD_LIBRARY_PATH、INCLUDES 变量等......这样它就可以适当地链接到 libA 和 libA 需要的所有内容一种可扩展的方式。

我使用过另一个配置管理工具，它做得很好，但没有成为行业标准，因此想转向 cmake。我还没有看到 CMake 如何处理这些相互依赖关系的一个很好的例子——有人知道一个好的起点吗？我只需要'include($(CMAKE_MODULES_PATH) libA/CMakeLists.txt)' 还是需要创建另一个文件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:38:49.187

不确定这是否是您要查找的内容，但按照此处所述创建 libAConfig.cmake： [如何创建项目配置文件](http://www.cmake.org/Wiki/CMake/Tutorials/How_to_create_a_ProjectConfig.cmake_file)可能会成功。

# asp.net-mvc - 如何定义单个操作来处 理到达此控制器的所有 http GET 请求？

> ID：10872720
> 
> 赞同：1
> 
> 时间：2012-06-03T18:18:03.287
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-web-api

这是路由定义：

```
routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{*data}",
            defaults: new { data= RouteParameter.Optional }
        ); 
```

现在，在产品控制器中，我定义了一个动作，如下所示：

```
public string Get(string data="")
{
    return "value";
} 
```

我`http-get`使用以下 URL进行测试

```
api/product/   
api/product/apple 
```

两者都在工作

但是，如果我使用这个 URL

```
api/product/?p=5 
```

它会抛出一个异常

```
No action was found on the `controller` 'product' that matches the request. 
```

我知道我可以定义另一个像这样的动作来解决问题

```
public string Get(int p,string data="")
{
    return "value";
} 
```

但是，这对我不起作用，因为参数上的参数`url`是不可预测的，无论是参数的名称还是参数的值。

所以，我的问题是

`http-get`无论 URL 中使用哪种查询字符串，是否有一种方法可以定义单个操作来处​​理到达此控制器的所有请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:31:49.483

您可以使用 WebAPI 重载 Get：

```
public string Get(int p) {}
public string Get(string data) {} 
```

尽管这排除了您不传递任何参数的情况，但根据我对您的场景的理解，应该应用任何一种方法（名称或值），所以这应该没问题。

# mysql - 来自大型数据集的报告 - Mysql

> ID：10872723
> 
> 赞同：0
> 
> 时间：2012-06-03T18:18:16.037
> 
> 标签：mysql

我一直在尝试根据一些日志文件（约 5000 万条记录，并且可以增长十倍）来制作一些报告 - 我已将其加载到表中并进行必要的更改（删除重复数据等） - 的表应该包含每种类型和每天每种产品的请求数，因此我试图将其缩减为仅具有表示请求数的计数列的不同产品

这是包含日志数据的原始表：

```
*************************** 1\. row ***************************
       Table: cdnlog2
Create Table: CREATE TABLE `cdnlog2` (
  `serial` int(32) DEFAULT NULL,
  `ip` varchar(100) DEFAULT NULL,
  `country` varchar(100) DEFAULT NULL,
  `productid` int(11) DEFAULT NULL,
  `type` varchar(100) DEFAULT NULL,
  `query_date` date DEFAULT NULL,
  KEY `aaa` (`country`),
  KEY `ccc` (`productid`),
  KEY `type` (`type`),
  KEY `date_index` (`query_date`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

目的地表：

```
*************************** 1\. row ***************************
       Table: cdnlogfinal
Create Table: CREATE TABLE `cdnlogfinal` (
  `country` varchar(100) DEFAULT NULL,
  `productid` int(11) DEFAULT NULL,
  `type` varchar(100) DEFAULT NULL,
  `request_count` int(11) DEFAULT NULL,
  `query_date` date DEFAULT NULL,
  KEY `aaa` (`country`),
  KEY `ccc` (`productid`),
  KEY `type` (`type`),
  KEY `date_index` (`query_date`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 
```

我现在试图将记录数减少为仅具有不同行及其计数的分组值（日志可以包含重复，因为可以在同一天多次选择相同的产品），但是，插入到辅助表已经运行了几个小时，状态为“正在复制到磁盘上的 tmp 表”-我已更改临时目录以留出足够的空间-任何指针？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:07:01.403

您的想法很好，最终结果将大大加快您的报告查询速度。您只需要多一件就可以解决这个难题：

问题是基表中的行太多，无法在一个查询中创建派生表中的所有行 - 事务需要很长时间，并且创建的行数很大，它会超时和/或日志空间交易超出。

相反，您必须一天一次地这样做：

```
insert into cdnlog2 (country, productid, type, query_date)
select country, productid, type, date(transaction_time)
from cdnlog
where transaction_time between '2012-01-01 00:00:00' and '2012-01-01 23:59:59'
group by country, productid, type 
```

为您的数据范围内的每一天单独运行此查询，相应地更改开始/结束时间戳。

计算出历史数据后，在前一天每天运行一次，作为批处理的一部分。

您正在做的是创建一个[数据仓库](http://en.wikipedia.org/wiki/Data_warehouse)。考虑强烈地将这些数据放在单独的专用服务器上。这样做有很多好处 - 阅读以了解什么。

# c++ - 可以在 C++ 中调用缺少模板参数的模板函数吗？

> ID：10872730
> 
> 赞同：1
> 
> 时间：2012-06-03T18:19:38.807
> 
> 标签：c++, class, templates, function-templates

这是一个面试问题，已经完成了。

哪一行有错误？

```
 #include<iostream>
  template<class T> void foo(T op1, T op2)
  {
      std::cout << "op1=" << op1 << std::endl;
      std::cout << "op2=" << op2 << std::endl;
  }

  template<class T>
  struct sum
  {
      static void foo(T op1, T op2)
      {
              std::cout << "sum=" << op2 << std::endl ;
      }
  };

  int main()
  {
      foo(1,3);  // line1
      foo(1,3.2);  // line2
      foo<int>(1,3);  // line3
      foo<int>(1, '3') ; // line 4
      sum::foo(1,2) ; // line 5  , 

      return 0;
  } 
```

第 2 行有错误，因为模板参数与定义不匹配。第 5 行有错误，因为缺少模板参数。

但是，第 1 行不是错误，我不知道为什么，它不是也错过了模板参数吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T18:21:07.970

这叫做类型推导。

在第 1 行，`T`可以推断出 的类型，因为参数和`op1`都是`op2`，`int`使得.`T``int`

而在第 2 行，您同时传递了 int 和 double 而函数接受两个参数 as `T`，编译器不知道`T`应该是 a`double`还是 an `int`。

第 3 行很好，因为您指定了`int`专业化并同时传入`int`了 s（使专业化变得多余但完全可以）。

第 4 行是可以的，因为您声明`T`为 int，然后将`char`值`'3'`转换为其数值`int`。

第 5 行是一个错误，因为您正在访问一个从其所在的模板化结构中获取其类型的函数，而类型推导仅适用于函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:17:46.157

当我们使用函数模板时，编译器会推断出要绑定到模板参数的模板参数**。**一旦编译器确定了实际的模板参数，它就会为我们**实例化**一个函数实例。本质上，编译器会计算出使用什么类型来代替每个类型参数。因此，如果`op1`和`op2`具有相同的类型，则可以省略模板参数（这就是第 #2 行导致错误的原因）。

来自*C++ 入门*

# iphone - drawRect 导致滚动缓慢，即使它没有被调用

> ID：10872731
> 
> 赞同：4
> 
> 时间：2012-06-03T18:19:40.900
> 
> 标签：iphone, objective-c, ios, cocoa-touch, drawrect

在我的应用程序中，我有一个滚动视图，其中包含大约 20 个子视图。这些子视图中的每一个都有一个 drawRect 方法，目前看起来像这样：

```
- (void)drawRect:(CGRect)rect
{
    NSLog(@"drawRect called");
} 
```

添加子视图时，会调用drawRect，但是当我滚动时，即使没有再次调用drawRect，它也会很慢。

如果我删除 drawRect 的实现，那么滚动是完全正常的。即使我无法摆脱缓慢的滚动，是否有可以替代 drawRect 的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:32:31.957

如果它只是记录它被调用，你为什么要调用drawRect？如果那是它对您的唯一目的，那么就不要调用它。事实上，我相信当你第一次创建一个继承自 UIView 的类时，它里面有 drawRect 方法，它被注释掉了，在被注释掉的 drawRect 方法之上，它说的是“不要调用这个方法，如果它不会在屏幕上进行任何绘图，因为它会占用大量内存”。基本上，不要在你的情况下调用它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T01:37:41.883

在视图首次出现之前，您可以尝试将预先绘制的 CGImages 分配给每个自定义视图的 CALayer 的内容。这可能比使用 drawRect 自定义视图的外观更快。

# ruby-on-rails-3 - Neo4j.rb 2.0 和设计 2.0。有什么办法吗？

> ID：10872733
> 
> 赞同：0
> 
> 时间：2012-06-03T18:19:49.493
> 
> 标签：ruby-on-rails-3, devise, jruby, neo4j

我想使用 Neo4j 数据库和 JRuby on Rails 来构建一个新的 Web 项目。（为此我真的需要 Neo4j 或其他图形数据库）

我正在使用 neo4j 2.0 gem 并尝试使用 Devise 和 Omniauth 进行身份验证。这种组合有什么办法吗？

我尝试了 devise-neo4j，但它与 neo4j.rb 2.0 不兼容。我知道[这里](https://github.com/andreasronge/devise-neo4j)的最后一次提交说它是针对 neo4j.rb 2.0 但是

```
gem 'neo4j'
gem 'devise-neo4j' 
```

捆绑时出现以下错误：

```
 Bundler could not find compatible versions for gem "neo4j":
  In Gemfile:
    devise-neo4j (>= 1.0.2) java depends on
      neo4j (~> 1.1.1) java

    neo4j (2.0.0.rc2) 
```

我还尝试了使用 neo4j 的普通设计 gem：

```
gem 'neo4j'
gem 'devise' 
```

但是当我跑步时，`rails g devise:install`我得到了`NameError: uninitialized constant User`.

我搜索并尝试了很多，但无法正常工作。

有谁知道一个好的解决方案？或者获得此功能的*正确*方法是什么（使用电子邮件/密码和 facebook、google、yahoo 和 twitter 登录）？*哦，我知道我可以自己编码，但我真的很想使用已经完成的东西。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T11:52:30.100

我的 devise-neo4j fork 未发布到 ruby​​gems.org，这意味着您必须在 Gemfile 文件中将其指定为：

```
gem 'devise', '1.5.3'
gem 'devise-neo4j', :git => 'git://github.com/andreasronge/devise-neo4j.git' 
```

请注意，devise-neo4j 目前不适用于 devise 2.0。

# xcode - Xcode 4.3：Clang LLVM 1.0 错误

> ID：10872735
> 
> 赞同：0
> 
> 时间：2012-06-03T18:20:12.260
> 
> 标签：xcode, sdl, llvm, clang

我想在项目中使用 SDL，所以我创建了一个 Cocoa 项目并添加了所有需要的框架，但 XCode 告诉我：

```
ProcessPCH /Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Intermediates/PrecompiledHeaders/projetCS2-Prefix-auneaovyjutgotajcmkllwxdblci/projetCS2-Prefix.pch.pth projetCS2/projetCS2-Prefix.pch normal i386 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/aurelien/Documents/Programmation/projetC-S2/projetCS2
    setenv LANG en_US.US-ASCII
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch i386 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-sign-compare -Wshorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.7.sdk -fasm-blocks -Wprotocol -Wdeprecated-declarations -mmacosx-version-min=10.7 -g -Wno-conversion -Wno-sign-conversion "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -I/Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Intermediates/projetCS2.build/Debug/projetCS2.build/projetCS2.hmap -I/Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Products/Debug/include -I/Library/Frameworks/SDL.framework/Headers -I/Library/Frameworks/SDL_image.framework/Headers -I/Library/Frameworks/SDL_ttf.framework/Headers -I/Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Intermediates/projetCS2.build/Debug/projetCS2.build/DerivedSources/i386 -I/Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Intermediates/projetCS2.build/Debug/projetCS2.build/DerivedSources -F/Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Products/Debug -F/Library/Frameworks --serialize-diagnostics /Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Intermediates/PrecompiledHeaders/projetCS2-Prefix-auneaovyjutgotajcmkllwxdblci/projetCS2-Prefix.pch.dia -c /Users/aurelien/Documents/Programmation/projetC-S2/projetCS2/projetCS2/projetCS2-Prefix.pch -o /Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Intermediates/PrecompiledHeaders/projetCS2-Prefix-auneaovyjutgotajcmkllwxdblci/projetCS2-Prefix.pch.pth -MMD -MT dependencies -MF /Users/aurelien/Library/Developer/Xcode/DerivedData/projetCS2-gdnozsjskcozmxcvmlmmpsmmkcvk/Build/Intermediates/PrecompiledHeaders/projetCS2-Prefix-auneaovyjutgotajcmkllwxdblci/projetCS2-Prefix.pch.d

error: -fobjc-arc is not supported with fragile abi
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:29:59.533

该错误表明您在项目中使用 ARC（自动引用计数），并且不支持使用脆弱的 ABI（模拟器）。

您肯定正在为 32 位构建您的应用程序。
ARC 仅为 64 位。

尝试更新您的项目设置，并为 64 位而不是 32 或通用构建。

# css - 为什么我的 div 显示垂直滚动条虽然有足够的垂直空间

> ID：10872736
> 
> 赞同：1
> 
> 时间：2012-06-03T18:20:12.743
> 
> 标签：css, scrollbar, overflow, dynatree

我正在使用谷歌浏览器 19.x 或 IE9.x

我已经设置了 Html5 Doctype。

我的 TreeDiv 中有一个 jquery dynatree 插件。

尽管有足够的空间来垂直显示更多树项而无需滚动，但这些滚动条是可见的。

这是为什么？

问题还在于，当垂直空间变得如此之少时，也会从 ul-tag 内的 dynatree 显示垂直滚动条。因此 ul-dynatree 做得正确，只有我的 div 对滚动条发疯了！

我什至可以设置溢出：隐藏；在没有帮助的 TreeDiv 上。垂直滚动条始终可见：/

![在此处输入图像描述](../Images/4a88188972ac198ad4fda092e0538205.png)

```
function loadUnits(data) {       
        $('#TreeDiv').dynatree({
            onActivate: function (node) {
                getEmployees(node.data.key);
            }, children: data
        });
    }

#TreeDiv{      
    width: 200px;
    position: fixed;
    left: 100px;
    top: 50px;
    bottom: 0px;  
    overflow: hidden;       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T20:59:28.470

请发现如果你的内部`div`有一个样式。`overflow:auto`这通常会导致这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:11:41.323

这是解决方案：

去 .css 的 dynatree ..\src\skin-vista\ui.dynatree.css

并编辑标签：

```
ul.dynatree-container
{
font-family: tahoma, arial, helvetica;
font-size: 10pt; /* font size should not be too big */
white-space: nowrap;
padding: 3px;
margin: 0; /* issue 201 */
background-color: white;
border: 1px dotted gray;
width: 480px;
height: 580px;
overflow: scroll;   

} 
```

你完成了。你会自动长出收缩树

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T20:30:06.883

我遇到了一个问题，即在检查复选框项目时会出现滚动条。

我将此添加到我的 onSelect

```
$("ul.dynatree-container").css("overflow", "hidden"); 
```

# spring - Spring数据JPA java.lang.IllegalArgumentException：不是实体

> ID：10872740
> 
> 赞同：13
> 
> 时间：2012-06-03T18:20:52.837
> 
> 标签：spring, jpa, entity, spring-data-jpa

我已经创建了 spring data JPA 示例项目。为此，我使用了 eclips。有两个项目，一个是只有带注释的实体类的领域对象项目。其他项目是实际的 spring data jpa 项目，它对项目一具有依赖性。实际上它通过 maven 依赖获取域项目实体类。

项目 1：人力资源管理域

实体类：

```
package com.hrm.ws.data.domain;

import javax.persistence.Basic;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Inheritance;
import javax.persistence.InheritanceType;
import javax.persistence.Table;

@Entity(name = "Employee")
@Table(name = "employee")
@Inheritance(strategy = InheritanceType.JOINED)
public class Employee {

    protected long id;

    protected String firstName;

    protected String lastName;

    /**
     * Gets the value of the id property.
     * 
     */
    @Id
    @Column(name = "id", scale = 0)
    @GeneratedValue(strategy = GenerationType.AUTO)
    public long getId() {
        return id;
    } 
```

项目 2：hrm-ws-service

持久性上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"

       xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/data/jpa
                           http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

        <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
            <property name="driverClassName" value="${jdbc.driverClassName}"/>
            <property name="url" value="${jdbc.url}"/>
            <property name="username" value="${jdbc.username}"/>
            <property name="password" value="${jdbc.password}"/>
        </bean>

        <jpa:repositories base-package="com.hrm.ws.data.repository" />

        <bean id="employeeDao" class="com.hrm.ws.data.repository.EmployeeRepositoryImpl"/>      

        <bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">

              <property name="entityManagerFactory" ref="entityManagerFactory" />
              <property name="jpaDialect">
                <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
              </property>

        </bean>

        <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">

              <property name="dataSource" ref="dataSource" />

              <property name="jpaVendorAdapter">
                <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                  <property name="generateDdl" value="${jdbc.generateDdl}" />
                  <property name="showSql" value="${jdbc.showSql}"/>
                </bean>
              </property>
              <property name="persistenceUnitName" value="jpa.sample" />

        </bean>

</beans> 
```

所以我的包的设置如下：

src/main/java - 包含 spring 存储库

src/main/resources - 包含应用程序上下文

src/test/java - 包含单元测试

以及项目 1（hrm-domain）的依赖项

我的问题是当我运行这个项目时，我收到如下错误：

```
... 38 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeRepository': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalArgumentException: Not an entity: class com.hrm.ws.data.domain.Employee
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1429)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:844)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    ... 40 more

**Caused by: java.lang.IllegalArgumentException: Not an entity: class** com.hrm.ws.data.domain.Employee
    at org.hibernate.ejb.metamodel.MetamodelImpl.entity(MetamodelImpl.java:160)
    at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:52)
    at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getMetadata(JpaEntityInformationSupport.java:61)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:145)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:83)
    at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:66)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:146)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:120)
    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.getObject(RepositoryFactoryBeanSupport.java:39)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 48 more 
```

我想知道这个问题，因为当我将域对象（Employee.java）放在我的 spring 项目中时，它自己而不是单独的 jar 它工作正常。这个问题只发生在它作为一个单独的 jar 文件中。如果有人对这种情况有经验，请给我帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T16:39:19.533

我也有同样的问题。我的是我没有`packagesToScan`在 bean 中提供属性`entityManagerFactory`，所以 Spring 无法加载实体。查看`emf`spring 配置 xml 中的 bean 声明。以下是 EMF 声明，希望它可以帮助您摆脱错误：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
    </property>
    <property name="packagesToScan" value="com.hrm.ws.data.domain" />
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T04:14:00.230

您没有在 com.hrm.ws.data.domain 包中扫描带有 @Entity 注释的 bean，因此 spring 容器不知道您的实体，因此会产生异常。将以下行添加到您的 persistence-context.xml 配置文件中：

```
<context:annotation-config />
<context:component-scan base-package="com.hrm.ws.data.domain" /> 
```

您还需要按如下方式更改根 xml 元素，以便识别上下文元素：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/data/jpa
                           http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 
```

而且，如果您还没有，请将 spring-context 依赖项添加到您的 pom 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T17:13:06.010

使用以下选项之一：-

1.  context:component-scan base-package="Your Base Package Name" in spring.xml 文件

2.  在 entityManagerFactory 上设置 packagesToScan 属性

3.  使用 persistence.xml 并在那里列出所有实体。

# java - 将 TextView 放在 View 中

> ID：10872746
> 
> 赞同：0
> 
> 时间：2012-06-03T18:21:32.540
> 
> 标签：java, android, android-layout, view, textview

我正在尝试这个 SnowFall 项目。[http://code.google.com/p/android-30days-apps/source/browse/trunk/08day/src/com/bakhtiyor/android/snowfall/SnowFall.java?r=27](http://code.google.com/p/android-30days-apps/source/browse/trunk/08day/src/com/bakhtiyor/android/snowfall/SnowFall.java?r=27)

而且我需要将 TextView 放在 View 类中（SnowFallView 类扩展 View，第 42 行），我该怎么做。

我可以实例化 TextView 并像这样添加它吗？

```
 package in.isuru.animate;

 public class SnowFall extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            SnowFallView snowFallView = new SnowFallView(this);
            setContentView(snowFallView);
            snowFallView.setBackgroundDrawable(getResources().getDrawable(R.drawable.background_image));

    }

    private class SnowFallView extends View {
            private int snow_flake_count = 5;
            private final List<Drawable> drawables = new ArrayList<Drawable>();
            private int[][] coords;
            private final Drawable snow_flake;
            private TextView countDownView;

            public SnowFallView(Context context) {
                    super(context);
                    setFocusable(true);
                    setFocusableInTouchMode(true);

                    snow_flake = context.getResources().getDrawable(R.drawable.snow_flake);
                    snow_flake.setBounds(0, 0, snow_flake.getIntrinsicWidth(), snow_flake
                            .getIntrinsicHeight());

                    countDownView = new TextView(context);
                    countDownView.setText("It's working");
                    addContentView(countDownView, null);

                    //LayoutInflater inflater = getLayoutInflater();
                    //getWindow().addContentView(inflater.inflate(R.layout.text_layout, null), new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT,
                    //ViewGroup.LayoutParams.FILL_PARENT));
            }

            @Override
            protected void onSizeChanged(int width, int height, int oldw, int oldh) {
                    super.onSizeChanged(width, height, oldw, oldh);
                    Random random = new Random();
                    Interpolator interpolator = new LinearInterpolator();

                    snow_flake_count = Math.max(width, height) / 20;
                    coords = new int[snow_flake_count][];
                    drawables.clear();
                    for (int i = 0; i < snow_flake_count; i++) {
                            Animation animation = new TranslateAnimation(0, height / 10
                                    - random.nextInt(height / 5), 0, height + 30);
                            animation.setDuration(10 * height + random.nextInt(5 * height));
                            animation.setRepeatCount(-1);
                            animation.initialize(10, 10, 10, 10);
                            animation.setInterpolator(interpolator);

                            coords[i] = new int[] { random.nextInt(width - 30), -30 };

                            drawables.add(new AnimateDrawable(snow_flake, animation));
                            animation.setStartOffset(random.nextInt(20 * height));
                            animation.startNow();
                    }
            }

            @Override
            protected void onDraw(Canvas canvas) {
                    for (int i = 0; i < snow_flake_count; i++) {
                            Drawable drawable = drawables.get(i);
                            canvas.save();
                            canvas.translate(coords[i][0], coords[i][1]);
                            drawable.draw(canvas);
                            canvas.restore();
                    }
                    invalidate();
            }

    } 
} 
```

但是当我这样做时，我得到一个错误。

06-04 00:22:22.364: E/AndroidRuntime(359): java.lang.RuntimeException: 无法启动活动 ComponentInfo{in.isuru.animate/in.isuru.animate.SnowFall}: java.lang.NullPointerException

PS。所有导入完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:20:24.263

我不确定这是否 100% 正确，但你需要做这样的事情......

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LinearLayout linearLayout = new LinearLayout(this);
    linearLayout.setOrientation(LinearLayout.VERTICAL);
    SnowFallView snowFallView = new SnowFallView(this);
    TextView txt1 = new TextView(this);
    linearLayout.addView(snowFallView);
    linearLayout.addView(txt1);
    setContentView(linearLayout);
    snowFallView.setBackgroundDrawable(getResources().getDrawable(R.drawable.background_image));
} 
```

`SnowFallView`还要从类中删除这些行。

```
countDownView = new TextView(context);
countDownView.setText("It's working");
addContentView(countDownView, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:38:01.147

是的，您可以`TextView`像这样在运行时添加一个。这假设`MyClass`子类`android.content.Context`. 我不确定您在问题的第二部分中询问的是什么布局。您已经有了容器布局（linearLayout）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:03:10.930

```
countDownView = new TextView(context);
countDownView.setText("It's working");
addContentView(countDownView, null); 
```

我认为你的问题出在这里：

```
addContentView(countDownView, null); 
```

你应该使用

```
addView(countDownView) 
```

代替`addContentView`

# javascript - jQuery将函数添加到动画队列

> ID：10872749
> 
> 赞同：9
> 
> 时间：2012-06-03T18:21:41.050
> 
> 标签：javascript, jquery

问题是当我尝试制作多个动画时，它们都会同时发生。
有没有办法让动画一个接一个地进行而不使用回调？

这是我想要做的：

```
$('#a1').click(function() { $('#div1').hide(3000); });
$('#a2').click(function() { $('#div2').hide(3000); });
$('#a3').click(function() { $('#div3').show(3000); }); 
```

如果您在第一个动画完成之前`#a1`单击然后单击`#a2`then `#a3`，则它不应立即开始，而是等到动画队列为空后再开始下一个。

## [以这个演示为例](http://jsfiddle.net/nqh6x/)

我希望能够一个接一个地单击，`a1`然后首先让它完全隐藏第一个 div，然后完全隐藏第二个，然后显示第三个。`a2``a3`

我的例子过于简单，虽然这可以通过回调来完成，但我真正的问题不能，所以回调不是一个选项。

本质上，如果您单击所有三个动画应该在 9 秒内完成。

## [此演示应提醒 (`'took around 9 seconds to complete')`](http://jsfiddle.net/nqh6x/4/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T18:14:00.303

[`.queue()`](http://api.jquery.com/queue/)在一个常见的 jQuery 对象上使用：

```
var q = $({}); // this could also be a common parent, e.g. $('body')
$('#a1').click(function() {
    q.queue(function(next) {
        $('#div1').hide(3000, next);
    });
    return false;
});
$('#a2').click(function() {
    q.queue(function(next) {
        $('#div2').hide(3000, next);
    });
    return false;
});
$('#a3').click(function() {
    q.queue(function(next) {
        $('#div3').show(3000, next);
    });
    return false;
});​ 
```

[演示](http://jsfiddle.net/jefferyto/nqh6x/7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T08:54:54.837

使用[.promise()](http://api.jquery.com/promise/)`show`回避和上的回调`hide`：

> .promise() 方法返回一个动态生成的 Promise，一旦绑定到集合的特定类型的所有操作（无论是否排队）都结束，该 Promise 就会被解析。
> 
> **默认情况下，type为“fx”，这意味着当被选元素的所有动画都完成时，返回的Promise被解析**

使用[.queue()](http://api.jquery.com/queue/#queue2)限制每个 promise 解析的动画数量（另见[**jsFiddle**](http://jsfiddle.net/nqh6x/9/)）：

```
var promises = $({});

$('#a1').click(function() {
    promises.queue(function(next) {
        $('div').promise().done(function() {
            $('#div1').hide(3000);
            next();
        });
    });
    return false;
});
$('#a2').click(function() {
    promises.queue(function(next) {
        $('div').promise().done(function() {
            $('#div2').hide(3000);
            next();
        });
    });
    return false;
});
$('#a3').click(function() {
    promises.queue(function(next) {
        $('div').promise().done(function() {
            $('#div3').show(3000);
            next();
        });
    });
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T13:18:50.827

尝试用队列创建一些数组，并检查其中是否有东西，作为动画的回调，如果有，则再次运行它。我已经玩过你的例子了。

看看这个：

[http://jsfiddle.net/acrashik/nqh6x/6/](http://jsfiddle.net/acrashik/nqh6x/6/)

```
var queue = {
    q: [],
    run: function(elem, type, time, recall) {
        if (queue.isRunning && !recall) {
            console.log('pushed: ' + elem + type + time);            
            queue.q.push({elem:elem, type:type, time:time});
        } else {
            console.log('running:' + elem);
            queue.isRunning = true;
            if (type=='hide') {
                $(elem).hide(time, function(){
                    queue.recall();
                })
            } else {
                $(elem).show(time, function(){
                    queue.recall();
                })             
            }
        }                    
    },
    recall: function(){
        console.log(queue.q.length);                    
        if (queue.q.length > 0) {
            queue.run(queue.q[0].elem, queue.q[0].type, queue.q[0].time, true);
            queue.q = queue.q.splice(1,queue.q.length);
        } else {
            queue.isRunning = false;
            queue.q = [];
        }
    },            
    isRunning: false
}
$('#a1').click(function() { queue.run('#div1','hide',2200) });
$('#a2').click(function() { queue.run('#div2','hide',2200) });
$('#a3').click(function() { queue.run('#div3','show',2200) }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-18T22:38:47.197

我会使用该`animate()`函数，因为它带有一个完整的函数，当动画完成时调用它[http://api.jquery.com/animate/](http://api.jquery.com/animate/)。

所以要使用 jQuery 文档示例：

```
$('#clickme').click(function() {
  $('#book').animate({
   opacity: 0.25,
   left: '+=50',
   height: 'toggle'
}, 5000, function() {
// Animation complete this is where you call the next animation...
  });
});

function another_animation () {
  $('xyz').animate({
   opacity: 0.25,
   left: '+=50',
}5000, function() {
// Animation complete this is where you call the next animation 
```

我认为这是最干净的方法...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T12:39:55.027

你可以这样做：

```
(function(){
    var col=(function(){
        var i=1;
        return function(n){alert("you clicked link nr " + n + ", total clicks: "+i++)};
    })();
    $('#a1').click(function(){col(1)});
    $('#a2').click(function(){col(2)});
    $('#a3').click(function(){col(3)});
})(); 
```

我不会为你编写整个代码，但这应该让你很好地了解如何去做。此外，任何变量或函数都不能从全局范围或任何其他范围内访问。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-03T18:25:34.727

在动画前添加 stop()：

```
$('#a1').click(function() { $('#div1').stop().hide(3000); });
$('#a2').click(function() { $('#div2').stop().hide(3000); });
$('#a3').click(function() { $('#div3').stop().show(3000); }); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-03T19:01:29.870

用这个 `$(element).promise().done(function () {...})`

在你的情况下

```
$('#a1').click(function () {
    $('#div1').hide(3000);
});
$('#a2').click(function () {
    $("#div1").promise().done(function () {
        $('#div2').hide(3000);
    });
});
$('#a3').click(function () {
    $("#div2").promise().done(function () {
        $('#div3').hide(3000);
    });
}); 
```

仅当所选元素上的上一个动画完成时，才会执行下一个动画。

# android - Android：初始化本机 AudioRecord 对象时的 AudioRecord 错误代码 -20

> ID：10872751
> 
> 赞同：5
> 
> 时间：2012-06-03T18:22:12.760
> 
> 标签：android, avaudiorecorder, android-audiorecord

Android：我想从麦克风读取缓冲区，以便我可以对其执行处理，以下是我的代码

```
int sampleRateInHz = 8000;// 44100, 22050 and 11025
        int channelConfig = AudioFormat.CHANNEL_CONFIGURATION_MONO;
        int audioFormat = AudioFormat.ENCODING_PCM_16BIT;

        //int bufferSize =11025 + 
        int bufferSize = AudioRecord.getMinBufferSize(sampleRateInHz,channelConfig, audioFormat);

        short[] buffer = new short[bufferSize];

        AudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, sampleRateInHz,channelConfig, audioFormat, bufferSize);

        if(audioRecord.getState()== AudioRecord.STATE_INITIALIZED){
            audioRecord.startRecording();
            Log.e("recording", "before");

            boolean flag = true;
            while (flag) {
                int bufferReadResult = audioRecord.read(buffer, 0, bufferSize);
                System.out.println(buffer);
            }

            audioRecord.stop();
            audioRecord.release();
        }
        Log.e("recording", "stopeed");

<uses-permission android:name="android.permission.RECORD_AUDIO"></uses-permission> 
```

每次我尝试测试程序时都会出现以下错误

06-04 00:18:17.222: E/AudioRecord-Java(488): [android.media.AudioRecord] 初始化本机 AudioRecord 对象时出现错误代码 -20。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-17T07:14:46.980

如果出现此异常，也会引发

1.  录音已在进行中或
2.  录音不可用或
3.  应用程序没有适当的权限例如：应用程序没有记录权限等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:06:45.787

据我了解， CHANNEL_CONFIGURATION_MONO 已贬值，您应该在读入缓冲区时改用 CHANNEL_IN_MONO 。我在实例化 AudioRecord 对象时遇到了类似的问题，结果证明这是我的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-31T22:04:42.173

可能这可以回答吗？：

参数：

audioSource – 录音源。有关录制源定义，请参阅 MediaRecorder.AudioSource。

sampleRateInHz – 以赫兹表示的采样率。**44100Hz 是目前唯一保证适用于所有设备的**速率，但其他速率（例如 22050、16000 和 11025）可能适用于某些设备。

AudioFormat.SAMPLE_RATE_UNSPECIFIED 表示使用与路由相关的值，该值通常是源的采样率。getSampleRate() 可用于检索选择的实际采样率。

channelConfig – 描述音频通道的配置。请参阅 AudioFormat.CHANNEL_IN_MONO 和 AudioFormat.CHANNEL_IN_STEREO。AudioFormat.CHANNEL_IN_MONO 保证适用于所有设备。

audioFormat – 要返回的音频数据的格式。请参阅 AudioFormat.ENCODING_PCM_8BIT、AudioFormat.ENCODING_PCM_16BIT 和 AudioFormat.ENCODING_PCM_FLOAT。

bufferSizeInBytes – 在录制期间写入音频数据的缓冲区的总大小（以字节为单位）。新的音频数据可以从这个缓冲区中以小于这个大小的块读取。请参阅 getMinBufferSize(int, int, int) 以确定成功创建 AudioRecord 实例所需的最小缓冲区大小。 **使用小于 getMinBufferSize() 的值将导致初始化失败。**

# javascript - 将类添加到标签

> ID：10872753
> 
> 赞同：1
> 
> 时间：2012-06-03T18:22:26.073
> 
> 标签：javascript, jquery, css

为什么这不起作用？当我更改并`"$(this).toggleClass('checked');"`单击`alert('test')`标签时，我会看到警报窗口：-/

```
$(document).ready(function(){
    $("label").click(function(){
        $(this).toggleClass('checked');
    });
});

<input type="radio" name="hours" id="hours1" value="xyz" style="display: none" />
<label for="hours1">10:00</label>
<input type="radio" name="hours" id="hours2" value="xyz" style="display: none" />
<label for="hours2">11:00</label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:30:21.007

请参阅此[工作代码](http://jsfiddle.net/4pQt8/)。希望能满足你的需求

```
$(document).ready(function(){
    $("label").click(function(){
        if(!$(this).hasClass('checked')){
            $(this).addClass('checked');
        }else{
               $(this).toggleClass('checked');
        }
    });
});

<input type="radio" name="hours" id="hours1" value="xyz" style="display: block" />
<label for="hours1">10:00</label>
<input type="radio" name="hours" id="hours2" value="xyz" style="display: block" />
<label for="hours2">11:00</label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:59:29.060

假设您想要做的是让当前选中的复选框的标签具有“选中”类：

[http://jsfiddle.net/4pQt8/3/](http://jsfiddle.net/4pQt8/3/)

注意：您需要优化`$("label")`选择器，因为现在它会从文档中的所有标签中删除选中的类。

```
$(document).ready(function(){
    $("input[name=\"hours\"]").change(function(){
        if ($(this).attr("checked")) {
            $("label").removeClass("checked");
            $("label[for=\"" + $(this).attr("id") + "\"]").addClass("checked");
        }
    });
}); 
```

​</p>

# opengl-es - 使用 GLSL ES 2.0 的图元的内发光效果

> ID：10872754
> 
> 赞同：1
> 
> 时间：2012-06-03T18:22:31.630
> 
> 标签：opengl-es, glsl, primitive

我正在尝试使用 GLSL ES 2.0 为三角形扇形图元创建内部发光效果 - 尽管只有外边缘会受到手头效果的影响。我想有很多方法可以做到这一点，但到目前为止还没有找到任何描述。

[在 OpenGL ES 2.0 中使纹理多边形的边缘发光中](https://stackoverflow.com/questions/9130567/make-the-edges-of-a-textured-polygon-glow-in-opengl-es-2-0)描述了一种技术，但是，这对我不起作用，因为我在这个阶段纯粹是在使用图元。

我最初的想法是在片段着色器中以某种方式计算到最近边缘的距离，然后根据距离是否落在某个阈值的范围内来设置颜色。（当然，颜色和 alpha 是与最近边缘的距离的函数——此时精确的渐变轮廓并不重要。）

这种方法存在两个问题：

1）如何计算从片段到最近边缘的距离？2）我如何排除这个过程中的共同边，即两个（或更多）三角形共有的边？

这是一种明智的方法吗？如果是，我该如何解决我的两个问题？对替代方法的建议也非常感谢。（例如，我一直在阅读纹理数据不必是图像，并且它可以用于自定义目的。非图像纹理可以成为解决方案的一部分吗？）:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T21:12:48.807

要回答您的两个问题，我认为没有任何 glsl 魔术可以为您做到这一点。当您到达片段着色器时，不再有任何关于边缘的信息，特别是试图将真实边缘与内部边缘分离。

我建议为您的风扇添加更多顶点，并使用新的自定义属性来定义“发光级别”。例如，参见图片，我会在边缘周围放置一排顶点，将这些（和风扇的中心）定义为具有最大辉光，然后将边缘定义为具有零辉光，然后您可以获得插值辉光值在边和新顶点之间。![在此处输入图像描述](../Images/926239098aa36a38a049189ef9b4c54e.png)

# jquery-mobile - jquery移动插件创建

> ID：10872755
> 
> 赞同：0
> 
> 时间：2012-06-03T18:22:44.927
> 
> 标签：jquery-mobile

我正在尝试为 JQuery Mobile 创建一个插件。有没有人可以提供帮助的模板或示例？目前，我在 myplugin.js 中定义了以下内容

```
(function ($) {
    $.fn.myPlugin = function (options) {
        var defaults = { e: 0 },
        settings = $.extend({}, defaults, options);

        var h= $.myPlugin.getHtml(options.e);
        alert("here 1");
        if ((h != null) && (h != undefined) && (h.length > 0)) {
            alert("here 2");
            this.html(h);
        }
    };

    $.myPlugin = {
        getHtml: function (e) {
            var s = "";
            return s;
        }
    };
})(jQuery); 
```

我正在尝试像这样初始化这个插件的一个实例：

```
$("#pluginInstance", "#myPage").myPlugin({ e: 0 }); 
```

奇怪的是，两个警报对话框都没有出现。控制台中也没有任何错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:40:47.060

[这个](https://gist.github.com/1416414)或[这个](https://gist.github.com/1559887)怎么样？

如果您查看 JQM 的设计方式，就会发现语法非常相似。在我正在做的插件上工作时，我也坚持使用它。

# javascript - 得到所有 之内 使用 jQuery Ajax

> ID：10872756
> 
> 赞同：0
> 
> 时间：2012-06-03T18:22:50.393
> 
> 标签：javascript, ajax, jquery

我正在使用 jQuery Ajax 调用来获取图像列表。现在它可以工作，但会获取 XML 文件中的所有图像。如何更改我的代码以获取给定主题的所有图像，而不是显示所有主题中的所有图像。

因此，对于每个“主题”标签，我想列出所有“图像”标签。

我知道我必须用 jQuery 更改第 11 行

```
$(data).find('image').each(function(){ 
```

完整的jQuery函数

```
 <script type="text/javascript">
        $("#ARTH1520").live('pagebeforecreate', function() {
        $.get('data/ARTH1520.xml',function(data){
            $('.content').empty();
            $(data).find('subject').each(function(){
                var $subject = $(this);
                var html = '<div class="data">';                      
                html += '<div data-role="collapsible" data-collapsed="true" data-theme="b"><h3>' + $subject.attr('title') + '</h3>';
                html += '<ul data-role="listview">';

                    $(data).find('image').each(function(){
                    var $image = $(this);
                    html += '<li><img src="' + $image.attr('img') + '" />';
                    html += '<h3>' + $image.attr('title') + '</h3><p>' + $image.attr('description') + '</p></li>';

                    }); 

                html += '</ul>';
                html += '</div></div>';
                $('#result').append(html).trigger( "create" );
                $('#result .loading').remove();
            });                        
        });
        });
    </script> 
```

XML 文件

```
<subjects>
<subject title="At History One">
    <images>
        <image title="Mona Lisa" img="lisa.jpg" id="s1i1" description="image 1"></image>
        <image title="" img="" id="s1i2" description=""></image>
    </images>
</subject>  
<subject title="Renaissance">
        <images>
        <image title="" img="" id="s1i3" description=""></image>
    </images>
</subject> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:32:57.723

尝试`$subject.find('image').each(function(){ }`遍历主题标签内的图像。如您所述，您必须替换第 11 行。

# php - Apache/PHP 添加处理程序不适用于 PHP5

> ID：10872759
> 
> 赞同：0
> 
> 时间：2012-06-03T18:23:29.383
> 
> 标签：php, apache, addhandler

我的客户主机使用 PHP4 和 5，所有 *.php 文件都通过 5 运行，但是当我使用它时

> <FilesMatch "edit.js"> AddHandler application/x-httpd-php .js </FilesMatch>

它作为 PHP 4.4.9 运行，但不在我的个人 Web 服务器 (VPS) 上运行，我需要这个文件。

> <FilesMatch "edit.js"> AddHandler application/x-httpd-php5 .js </FilesMatch>

似乎不起作用，只显示 PHP 的源代码。

和帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:27:49.130

尝试

```
AddHandler application/x-httpd-php5 .js
                                  ^--- 
```

正如您所说，由于您的主机同时具有 PHP 4 和 PHP 5，因此您需要明确说明您要使用哪个版本。

# c - C：switch语句中的exit case

> ID：10872762
> 
> 赞同：0
> 
> 时间：2012-06-03T18:24:24.773
> 
> 标签：c, switch-statement

我只是有一个关于开关盒的快速问题。我可以这样做吗？我无法让它工作。当我输入退出时，程序只是说无效 3 次。原谅伪代码。哎呀，我忘了提到 printf 函数在那部分之前看起来像这样。

```
char choice;
printf("list, add, delete, write, quit\n");

do
{
scanf("%c", &choice);
//if (&choice== "quit"){exit(1);}

switch(choice)
    {
        case "list":
        case "add":
        case "delete":
        case "write":
        default:
            printf("Invalid\n");
            break;
        case "quit":
        exit (1);

    }while(&choice !="quit"); 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T18:26:37.240

你不能像那样比较字符串。字符串比较应该用`strcmp`和它的亲属来完成。在这种情况下，您正在比较字符串的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:56:04.180

尽管您不能按照您想要的方式直接比较字符串，但有一种方法可以使用字典和定义/枚举来进行切换（看看我在那里做了什么）：

```
enum choices { LIST, ADD, DELETE, WRITE, QUIT, INVALID };

int
getchoice(char *input)
{
    static struct choices {
        enum choices val;
        const char *string;
    } choices [] = {
        { LIST, "list" },
        { ADD, "add" },
        { DELETE, "delete" },
        { WRITE, "write" },
        { QUIT, "quit" },
        { -1, NULL }
    };
    int i;

    for (i = 0; choices[i].val != -1; i++)
        if (strcmp(input, choices[i].string) == 0)
            break;
    if (choices[i].val == -1)
        return INVALID;
    return (choices[i].val);
} 
```

然后为您的 switch 语句：

```
switch (getchoice(choice)) {
case LIST:
case ADD:
case WRITE:
case DELETE:
case INVALID:
default:
    printf("Invalid\n");
    break;
case QUIT:
    exit(1);
} 
```

警告购买者，因为这还没有通过编译器运行，但总体思路应该足够清楚以适应您的具体情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T18:29:10.860

此外，由于您不使用`break`其他`default`情况，因此您将自动“删除”到默认情况（即使您的输入`choice`匹配“列表”、“添加”、“删除”和“写入”）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-03T19:13:40.200

要回答您的问题：

是的，您可以`exit()`在任何地方调用，包括在 switch-case 语句中。

但是该代码有很多问题，请参阅我对问题本身的评论。

# php - 使用 jQuery 从数据库记录中克隆表单

> ID：10872763
> 
> 赞同：0
> 
> 时间：2012-06-03T18:24:47.943
> 
> 标签：php, jquery, mysql, populate

这应该很容易，但我错过了一些东西。

我有以下表格：

```
<div id="rsvp">
<form class="form-inline">    
    <fieldset>
        <label class="control-label" for="input01" id="rsvp_label">John Smith</label>
        <label class="control-label">Attending?:</label>          
        <label class="radio"><input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>Yes</label>
        <label class="radio"><input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">No</label>            
        <label class="control-label small" for="select01" id="meal">&nbsp;&nbsp;Meal Selection:</label>
        <select id="selectMeal" class="input-small">
            <option>Chicken</option>
            <option>Beef</option>
        </select>
        <button type="submit" class="btn btn-primary" id="btnrsvp">Save / Confirm Changes</button>                      
    </fieldset>
</form>
</div> 
```

我成功地提取了数据库中与我的查询匹配的记录，并且我有 1 -> n 条记录。我想为每条记录克隆这个表格。所以我可以遍历记录，但是在弄清楚如何实际克隆字段集然后增加 id 以便我可以将表单操作附加到每个记录时遇到了麻烦。或者也许有更好的方法来做到这一点......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:27:12.367

控件将是表单标记 - 放置一个`data-id="3"`3 代表 john smith 的用户 ID。然后将所有输入 id 也更改为 data-id，在表单提交处理程序上，只需将所述数据提交到映射到`<form>`标记`data-id`属性的任何记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T22:13:00.800

如果整个表单使用类而不是 ID 作为元素，您可以随意克隆和重用，而无需解析 ID。在每个表单中使用数据属性或隐藏输入来跟踪记录 ID。

如果您在依赖于表单中其他字段的任何表单字段元素上有事件处理程序，您只需在单个表单的上下文中查找它们

事件处理程序示例（选择 ID 更改为类）：

```
 <select class="input-small selectMeal">
    <option>Chicken</option>
     <option>Beef</option>
 </select> 
```

JS

```
$('.selectMeal').change(){
   var rsvp_name= $(this).closest('.form-inline').find('.rsvp_label').text();
   if( rsvp_name=='John Smith')  doSomething();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T22:51:48.697

看看[SheepIt](http://www.mdelrosso.com/sheepit/index.php?lng=en_GB)，一个表单克隆 jQuery 插件。

# python - subprocess 模块、envoy、sarge 和 pexpect 的区别？

> ID：10872767
> 
> 赞同：8
> 
> 时间：2012-06-03T18:25:22.627
> 
> 标签：python, subprocess, pexpect, python-envoy

我正在考虑制作一个需要从各种 aircrack-ng 套件工具发送输入和输出的程序。我知道一些 python 模块，例如 subprocess、envoy、sarge 和 pexpect，它们可以提供必要的功能。任何人都可以就我应该使用或不使用什么提供建议，特别是因为我是 python 新手。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-14T11:32:00.387

作为 的维护者`sarge`，我可以告诉您，它的目标大致类似于`envoy`（在易用性方面`subprocess`），并且（IMO）在`sarge`以下方面具有更多功能：

*   对类 bash 语法的跨平台支持（例如命令行中的`&&`, `||`, ）`&`
*   更好地支持捕获`subprocess`输出流并异步处理它们
*   更多文档，尤其是关于使用子进程的上下文中的线程+分叉等内部和外围问题
*   支持防止外壳注入攻击

当然是 YMMV，但您可以查看[文档](http://sarge.readthedocs.org/en/latest/index.html)，它们相当全面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-11T11:29:15.447

## 期待

在 2015 年，pexpect 不适用于 Windows。传闻[下个版本](https://github.com/pexpect/pexpect/issues/17)会增加“实验性”支持，不过这已经是谣言很久了（我没有屏住呼吸）。

在使用 pexpect 编写了许多应用程序（并且喜欢它）之后，我现在很抱歉，因为我喜欢 python 的一件事（它是跨平台的）不适用于我的应用程序。

如果您打算暂时添加 Windows 支持，请避免使用 pexpect。

## 使者

去年活动不多。自 2012 年以来，很少有提交（总共 12 次）。对它的未来不太有希望。

在内部，它以与 Windows 路径不兼容的方式使用 shlex（命令必须使用“/”而不是“\”作为目录分隔符）。一种解决方法（使用 pathlib 时）是在将路径对象作为命令传递之前对路径对象调用[as_posix() 。](https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.as_posix)看到[这个答案](https://stackoverflow.com/a/23811981/880509)。

访问内部流（即我想解析输出以获得一些更新滚动条），似乎是可能的，但没有记录。

## 中士

在开箱即用的 Windows 上工作，并且有一个 expect() 方法，该方法应该提供类似于 pexpect 的功能（允许我更新滚动条）。最近的活动，但它托管在[gitlab](https://github.com/vsajip/sarge)和[bitbucket](https://bitbucket.org/vinay.sajip/sarge/)上（非常混乱）。

# 个人结论

我正在*从* **pexpect 转变** *为* **sarge**以谋求未来的发展。似乎提供了与 pexpect 类似的功能集并支持 windows。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T21:18:08.133

**subprocess** - 是一个标准库模块，所以它可以在 python 安装中使用。但它有一个难以使用的名声，因为它的 api 不直观。

**envoy** - 是一个围绕子流程的第三方模块。它被编写为一个易于使用的替代子流程。特使 Kenneth Reitz 的作者以他的[Python for Humans](http://python-for-humans.heroku.com/)哲学而闻名。

其他两个我不熟悉。

# sql - 存储二维稀疏数组（二维稀疏矩阵）的最佳方法是什么？它将在 VoltDB 中有多少大小？

> ID：10872769
> 
> 赞同：2
> 
> 时间：2012-06-03T18:25:25.683
> 
> 标签：sql, database, matrix, sparse-matrix, voltdb

**问题一：是否有专门的数据库来存储密集和稀疏矩阵？**我用谷歌搜索但没有找到任何...

有问题的矩阵很大（10 ^ 5 x 10 ^ 5）但它很稀疏，这意味着它的大部分值都是零，我只需要存储非零值。所以我想制作一个这样的表：

```
 2D Matrix
---------------
  X   Y   val
---------------
  1   2    4.2
  5   1    91.0
  9   3    139.1 
```

等等。3 列，两列用于坐标，第三列用于稀疏矩阵中该单元格的值。**问题 2：这是存储稀疏矩阵的最佳方式吗？**我也考虑过 MongoDB，但似乎为矩阵的每个单元格制作一个文档会产生太多开销。面向表的数据库很慢，但我可以使用 VoltDB :) 侧节点：我想到了 Redis 哈希，但不能使它成为二维的（找到了一种序列化 2D 矩阵并使其成为 1D 的方法，这样我可以存储在Redis 哈希甚至列表）

**问题 3：VoltDB 将使用每行多少字节？**坐标将是从 0 到 10^5 的整数，可能更多，单元格的值将是浮点数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T18:19:45.043

两个最相关的问题是 1）有多稀疏？2）你想如何使用数据？

首先，我假设您想从数据库中读取/写入/处理数据。如果没有，那么有许多稀疏矩阵编码甚至可以打包成一个 blob 并可选地压缩。

假设您的数据相当稀疏，并且假设您想使用数据库中的数据，那么 x,y,value 元组存储可能是最好的。VoltDB 规划指南的第 4 章涵盖了估计内存使用量和调整硬件大小。

[http://community.voltdb.com/docs/PlanningGuide/ChapMemoryRecs](http://community.voltdb.com/docs/PlanningGuide/ChapMemoryRecs)

简短的回答是带有数字数据的表格非常紧凑。每行有 12 个字节的实际数据（短、短、双）。您应该看到平均每行开销超过 1 个字节。您还需要添加任何索引的大小。该文档描述了最坏的情况。我认为对于两个短整数（例如 X 和 Y 列）的索引，每个键的存储空间将接近 28 个字节，包括开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T17:32:37.363

关于问题 3，根据您的示例，X 和 Y 列可能是 VoltDB 中的 INTEGER 数据类型，即 4 个字节。value 列可以是一个 FLOAT 数据类型，它是 8 个字节。

因此，每条记录将是 16 字节，因此内存中的标称大小将为 16 字节 * 行数。通常，您增加 30% 的开销，然后每台服务器增加 1GB 的堆大小以确定所需的整体内存。有关详细信息，请参阅下面的参考资料。

你可能想要索引这个表，所以假设你想要一个 (x,y) 的复合索引，大小如下：

树索引：(sum-of-column-sizes + 8 + 32) * rowcount 哈希索引：(((2 * rowcount) + 1) * 8) + ((sum-of-column-sizes + 32) * rowcount)

(x,y) 的列大小总和为 8 个字节。

参考：

可用的数据类型在使用 VoltDB 的附录 A 中列出：http: [//community.voltdb.com/docs/UsingVoltDB/ddlref_createtable#TabDatatypes](http://community.voltdb.com/docs/UsingVoltDB/ddlref_createtable#TabDatatypes)

估计内存大小的指南和公式在 VoltDB 规划指南中：http: [//community.voltdb.com/docs/PlanningGuide/ChapMemoryRecs](http://community.voltdb.com/docs/PlanningGuide/ChapMemoryRecs)

# php - if 语句触发，即使它不应该触发

> ID：10872770
> 
> 赞同：0
> 
> 时间：2012-06-03T18:25:27.993
> 
> 标签：php, header, get

这是它的工作原理。如果用户单击链接以列出产品，那么他们将被定向到产品页面。为了安全起见，我在开头设置了一些内容以确保设置了“cid”或“sid”。我确信用户会转到与 cid 或 sid 链接的页面，因为当我在浏览器中将鼠标悬停在它上面时，它会说出来。这是代码

```
<?php require("includes/header.php"); ?>
<?php

if(!isset($_GET['cid'])||!isset($_GET['sid'])) {
    header("Location: index.php");
} 
```

不幸的是，用户仍然是定向的。如有必要，我将发布更多代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T18:30:45.140

您的代码需要*同时* `$_GET['cid']`定义和`$_GET['sid']`，而不是其中之一。替换`||`为`&&`您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:31:37.613

它应该是：

```
if (!(isset($_GET["sid"]) || isset($_GET["cid"]))) 
```

在您的情况下，假设 url 带有`?sid=foo`：

*   `!isset($_GET["sid"])`评估为假
*   `!isset($_GET["cid"])`评估为真
*   `true || false`评估为真，因此用户被重定向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T18:32:25.250

将运算符更改为 &&。像这样

```
If(!isset($_GET... && !isset($_GET...) 
```

# javascript - 在这种情况下，为什么绑定在淘汰赛中不起作用？

> ID：10872776
> 
> 赞同：0
> 
> 时间：2012-06-03T18:26:16.657
> 
> 标签：javascript, jquery, knockout.js

我的 ViewModel 之一为：

```
Models.DayP = function (data) {
    var self = this;

    this.Mapping = {
        'Actions': {
            create: function (options) {
                return new App.Models.Action(self, options.data);
            }
        }
    };
} 
```

我有一个 ViewModel 作为：

```
MPViewModel = function () {
      this.Model = {};
   this.Model.Test = ko.observable();

   //ajax request made below to set the data. Testis type of Models.DayP
} 
```

我将绑定设置为：

`<div data-bind="visible: Model.Test().Actions.length <= 0" style="display:none;"> </div>`

问题是即使`Model.Test().Actions`在 Ajax 请求之后设置，这个 div 也总是显示，我的 div 永远不会隐藏自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:40:26.527

尝试将 Actions 作为函数调用以获取底层数组：

```
<div data-bind="visible: Model.Test().Actions().length <= 0" style="display:none;"> </div> 
```

# android - 无法完成安装android ddms for eclipse

> ID：10872783
> 
> 赞同：0
> 
> 时间：2012-06-03T18:27:17.337
> 
> 标签：android

我基本上是在最后一步，我已经安装了 eclipse 并去安装新软件 ADT 以在屏幕上获取 android 项目，我收到了这条消息

说操作无法完成。阅读详情

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Android DDMS 18.0.0.v201203301601-306762 (com.android.ide.eclipse.ddms.feature.group 18.0.0.v201203301601-306762) 缺少要求：Android DDMS 18.0.0.v201203301601-306762 (com. android.ide.eclipse.ddms.feature.group 18.0.0.v201203301601-306762) 需要 'org.eclipse.ui 3.6.2' 但找不到

我尝试安装这个程序已经差不多整整一周了，有人请缓解这种挫败感

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:58:33.567

转到 --> Eclipse 帮助 --> 检查更新 --> 更新 Eclipse IDE 包，它将显示在可用更新列表中。重新启动 Eclipse，现在尝试安装包含 DDMS 的 ADT 插件。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:40:55.983

为什么不试试最新的 Eclipse 3.7.2（[下载链接](http://www.eclipse.org/downloads/packages/eclipse-classic-372/indigosr2)）？

您使用的是什么版本的 Eclipse？

SDK页面建议使用经典版，好像你用的是不同的。

苏达克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T18:32:36.660

在 Eclipse 中，如果您无法访问`Android SDK`管理器，我建议您卸载 Eclipse 并重新启动。

另一方面，如果您可以访问`SDK`管理器，那么您将希望安装大多数（如果不是全部）eclipse 的软件开发工具包环境。

安装后，您必须启动一个新的 AVD，然后为该 AVD 选择您喜欢的 SDK，然后您就可以开始使用了。

# c++ - Book 中的 C++ 中的堆栈示例？

> ID：10872784
> 
> 赞同：-5
> 
> 时间：2012-06-03T18:27:21.343
> 
> 标签：c++, stack, copy-constructor

这是书中的一个例子：

```
template <class T>
class stack
{
public:
stack();
stack(const stack&);
stack & operator=(const stack&);
~stack();
T& top();
void push(const T&);
void pop();

//few more functions 

} 
```

我有以下问题：

为什么顶部的返回类型不是 stack& 以及为什么重载赋值的参数不是 T& ？

Rgds，软软的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T18:29:12.280

> 为什么top的返回类型不是stack&

因为 的目的`top`是返回栈顶的元素，而不是栈本身！

# ruby-on-rails - 此 ruby 代码如何用于设置配置

> ID：10872787
> 
> 赞同：2
> 
> 时间：2012-06-03T18:27:48.677
> 
> 标签：ruby-on-rails, ruby

我看到如下所示的 ruby​​ 代码。这似乎是用于创建配置或设置的某种习惯用法，但我不太明白。另外，`Application.configure`这段代码的部分看起来如何？

```
MyApp::Application.configure do
  config.something = foo
  config.....
  config....
  .
  config....
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:05:55.030

首先，这种配置方式并不是 Ruby 特有的；选择使用或不使用它的是应用程序（或库、gem）。

为了向您解释该代码的作用，我将以您的代码段为例：

```
MyApp::Application.configure do
  config.something = foo
end 
```

在这里，您正在调用`MyApp::Application.configure`方法，没有参数。通话后，您给它一个*block*。

您可以将块视为一段代码，您可以随意使用它。
它们可以写成一行或多行：

```
{ puts 'hello' }
{ |param| puts param } # with passing it a param

# or 

do |param|
  puts param
end 
```

（记得`my_array.each do ... end`吗？这是你通过它的一个障碍。;））

现在，`configure`由于`yield`.

`yield`使用（或执行）已传递给方法的块的指令。

示例：让我们定义一个内部带有 yield 的方法：

```
def hello
  puts "Hello #{yield}"
end 
```

如果你调用这个方法，你会得到一个`'hello': no block given (yield) (LocalJumpError)'`.

你需要给它一个块：`hello { :Samy }`.
结果将是`Hello Samy`。如您所见，它只是使用了传递给方法的块中的内容。

这正是 Rails 配置代码中发生的事情。您只需将`config.something`( `config`is a method) 设置为某个值，同样`config.something = foo`在内部执行`configure`。

[您可以在此处](http://www.tutorialspoint.com/ruby/ruby_blocks.htm)以及这本[好书](http://pragprog.com/book/ruby3/programming-ruby-1-9)上了解更多关于`yield`和*块* 的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T18:51:48.883

The part from "do" until "end" is called a block, and is getting passed to the `configure` class method on `Application`. (all ruby methods can accept arguments and a block)

so the `Application.configure` method is creating a configuration object with a set of defaults, and then calling the block. The block is then setting the values you see, having the effect of overriding them.

It's then setting that configuration object as a class variable (like a global variable) so that other classes can use the configuration object later in the application lifecycle.

Hope that simplified description helps!

# java - 测试不同的垃圾收集算法？

> ID：10872790
> 
> 赞同：3
> 
> 时间：2012-06-03T18:28:01.117
> 
> 标签：java, garbage-collection

如何创建一个专门用于测试 Java 中的垃圾收集算法的程序？任何已完成此操作的文章也将不胜感激

# mongodb - 复制 Mongodb 在参数列表 (shell):1 之后给出 SyntaxError: missing )

> ID：10872798
> 
> 赞同：0
> 
> 时间：2012-06-03T18:29:18.450
> 
> 标签：mongodb

我正在尝试将 MongoDB 数据库从我的（本地）开发机器复制到我的（远程）测试服务器。

当我登录到我的测试服务器时，我执行以下操作：

> db.copyDatabase("myDB","myDB",xxx.xxx.xxx.xxx);

其中 xxx.xxx.xxx.xxx 是我的外部 IP。

我得到错误：

> SyntaxError: missing ) after argument list (shell):1

这似乎没有意义。我尝试添加一个额外的）（尽管我很确定这实际上并不能解决它）但有趣的是它给出了完全相同的错误。我完全被难住了，因为这似乎没有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:31:43.793

当看到第一个小数点时，shell 会感到困惑（不知道如何将其解析为参数）。您只需要将 IP 地址用引号括起来。

```
db.copyDatabase("myDB","myDB", "xxx.xxx.xxx.xxx"); 
```

# c++ - 调整 QGLWidget 的大小以适合我拥有的每个精灵大小

> ID：10872805
> 
> 赞同：1
> 
> 时间：2012-06-03T18:30:15.947
> 
> 标签：c++, qt, opengl, scrollbars

我正在使用opengl创建2D地图编辑器来绘制简单的32x32精灵，但似乎我无法将我的QGLWidget调整为大尺寸（即尺寸*精灵尺寸-> 1024 * 32），仅使用1024似乎工作正常（使用glwidget ->setMinimumSize(...))。我已经在谷歌上搜索了一段时间，我发现唯一有趣的事情是将 QAbstractScrollArea 子类化并将我的 QGLWidget 设置为它的视口（这就是 QGraphicsView 所做的），我也看到了所有 Qt opengl 示例，但我找不到任何可以帮助（除了不是我想要的图像查看器示例），我还尝试了以下操作： `horizontalScrollBar()->setMaximum(width * 32); verticalScrollBar()->setMaximum(height * 32);` 在滚动区域上将可调整大小的小部件设置为真/假，但仍然没有。有什么想法我会怎么做？如果您要求我，我可以显示更多代码。

使用 Qt v4.7.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:45:35.317

我有两个想法：

如果可能的话，放弃使用 QGLWidget 的想法并将精灵直接放置在图形场景中（QGraphicsPixmapItem）。可能不是你想要的，但是图形场景是用来处理很多项目的，所以你需要的大多数东西（例如在项目上触发鼠标事件）已经实现了。

或者只是使用 QGraphicsWidget 将 QGLWidget 放置在图形场景中。这应该自动告诉场景它的大小，然后告诉视图场景的大小。如果场景不适合视图，滚动条会自动出现。

**更新：**

[如此链接](http://doc.qt.nokia.com/qq/qq26-openglcanvas.html#turbocharginggraphicsview)中所述，您可以在任何图形视图中使用 OpenGL：

```
view.setViewport(new QGLWidget(QGLFormat(QGL::SampleBuffers)));
view.setViewportUpdateMode(QGraphicsView::FullViewportUpdate); 
```

# c# - 如何在执行枚举时管理不断变化的列表？

> ID：10872812
> 
> 赞同：4
> 
> 时间：2012-06-03T18:31:19.610
> 
> 标签：c#, multithreading, list, enumeration

我有一个对象（音符）列表，在播放它们时在单独的线程上枚举。我这样做是为了让 UI 线程保持响应。

当一个音符正在播放时（作为枚举的一部分），我怎么能允许一个新的音符可能被添加到列表中（没有明显的集合修改例外）。

我知道我可以将列表复制到一个临时列表并枚举它，但我实际上希望列表随着用户选择的更多而增长（这将在播放第一个音符时发生等）。

伪逻辑原样：

```
onClick()
{
 Queue.Add(theClickedNote)
 Queue.Play() <-- on another thread
}

Play()
{
 if(Playing==true){return ;}

 foreach(note theNote in Queue)
 {
  Note.Play();
  Queue.Remove(theNote);
 }
} 
```

正如您在上面看到的，每个 Click 事件都会向队列添加一个注释，然后调用队列上的播放方法。

队列枚举音符并在删除音符之前依次播放每个音符

我希望我已经清楚地解释了我想要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T19:17:55.543

这样的东西可以`ConcurrentQueue<T>`在.Net 4中使用。

```
ConcurrentQueue<Note> Queue = new ConcurrentQueue<Note>();

void onClick()
{
  Queue.Enqueue(theClickedNote);

  // start Play on another thread if necessary
}

void Play()
{
  if (Playing) return;

  Note note;
  while(Queue.TryDequeue(out note))
  {
     note.Play();
  }
} 
```

ConcurrentQueue 是线程安全的，因此不需要实现锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:18:04.323

正如 mike z 所建议的，使用.NET 4.0 中添加 的[ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)
以及其他并发集合，此队列允许您异步添加/删除项目 + 使用底层集合的快照，通过使用 GetEnumerator 方法并使用它进行迭代. 请注意，您可能仍然需要处理不同的情况，例如队列为空，这可以通过[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd287085.aspx)解决，只要集合为空，take 方法就会阻塞线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T19:03:07.117

而不是使用列表，您应该使用真正的队列然后您的代码将如下所示：

```
 Queue<Note> queue = new Queue<Note>();
    void onClick()
    {
        queue.Enqueue(note);
    }

    void Play()
    {
        if (Playing == true) { return; }

        while (queue.Peek() != null)
        {
            var note = queue.Dequeue();
            note.play();
        }
    } 
```

此代码不是线程安全的，因此您应该在队列上添加锁，但这是一般的想法。

# http-headers - 自定义 http 标头

> ID：10872816
> 
> 赞同：1
> 
> 时间：2012-06-03T18:31:42.550
> 
> 标签：http-headers, meteor

我正在查看流星示例应用程序。我真的只是在玩。我如何能够将自定义 http 标头添加到页面（例如排行榜示例）？

编辑：我没有使用 Apache 或 Nginx 我使用流星（meteor.com）它有自己的内置服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T17:20:30.607

我不知道您要做什么，但是如果您想一直添加标题，请尝试...

NGINX： [http ://www.cyberciti.biz/faq/nginx-send-custom-http-headers/](http://www.cyberciti.biz/faq/nginx-send-custom-http-headers/)

APACHE：[http ://httpd.apache.org/docs/2.0/mod/mod_headers.html](http://httpd.apache.org/docs/2.0/mod/mod_headers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T21:33:55.030

HTTP 方法接受标头的字典对象，例如：

```
 HTTP.call(method,route,{
          headers:{
              "Content-Type":"application/json"
          }
        }) 
```

# java - Android Facebook API - 使用有效令牌时出现活动令牌错误

> ID：10872827
> 
> 赞同：0
> 
> 时间：2012-06-03T18:32:27.997
> 
> 标签：java, android, facebook, facebook-graph-api

我收到一条错误消息，说我必须有一个活动的访问令牌才能查询有关当前用户的信息，但是 Facebook 对象说我的会话是有效的。

代码是：

```
private List<Integer> getFriendsList() throws FacebookError,
        MalformedURLException, JSONException, IOException {
    System.out.println(fbActivity.getFacebookConnector().getFacebook()
            .isSessionValid());
    JSONObject json = fbActivity.getFacebookConnector().makeRequest(
            "me/friends?fields=installed");
} 
```

isSessionValid() 返回 true，但是在下一行 makeRequest() 会因使用无效令牌而引发 FacebookError 异常。

非常感谢任何帮助。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T11:37:33.467

要阅读好友列表，您需要在请求权限时添加扩展权限。

[浏览此](https://developers.facebook.com/docs/authentication/permissions/)链接以获取有关权限的简要信息，最后还有有关 access_tokens 的信息。

您可能已请求仅获取基本信息的权限，因此您的登录会话有效，但您无权阅读好友列表。

如果您有权限但仍然收到错误，请添加其他日志信息，以便我可以指导您正确的方向。

# facebook-graph-api - 在 facebook 上获取地点的位置并将其集成到 window phone 应用程序中

> ID：10872832
> 
> 赞同：0
> 
> 时间：2012-06-03T18:33:06.420
> 
> 标签：facebook-graph-api, windows-phone-7.1

我正在尝试获取用户当前位置的信息我已经有了用户的纬度和经度我想知道的是该地区是否有任何企业（餐馆、服装店等）。我只是在查看开放图 api，它说您可以使用[https://graph.facebook.com/search](https://graph.facebook.com/search)搜索社交图中的所有公共对象。我们支持搜索以下类型的对象：地点[https://graph.facebook.com/search?q=coffee&type=place](https://graph.facebook.com/search?q=coffee&type=place)但是我真正想使用的那些 type=location¢er=37.76,-122.427&distance=1000 在 API Explorer 中不起作用，谁能告诉我可能是什么问题以及如何在 windows phone 7 应用程序中使用它？链接、代码片段、博客文章、电子书、其他允许我发送 lat 和 long 并返回位置或业务的 Web 服务 任何东西都会非常有帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:18:59.937

[https://graph.facebook.com/search?q=coffee&type=place¢er=37.76,-122.427&distance=1000](https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000)

此查询应为您提供所需的结果。

# api - 'download' 查询字符串参数是否应该在 HTML5 SoundCloud 播放器中工作？

> ID：10872834
> 
> 赞同：1
> 
> 时间：2012-06-03T18:33:14.243
> 
> 标签：api, download, soundcloud

我正在查看 Soundlcoud Widget 文档 [http://developers.soundcloud.com/docs/widget#](http://developers.soundcloud.com/docs/widget#)

我注意到有一个“下载”参数。我在没有打开下载链接的 HTML5 共享小部件上尝试了它。有没有办法显示下载链接？

示例 [http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F46911134&auto_play=false&show_artwork=true&color=ff7700&download=true&sharing=false](http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F46911134&auto_play=false&show_artwork=true&color=ff7700&download=true&sharing=false)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T03:39:46.710

这实际上是预期的行为。很多时候，小部件显示在一个相对较小的框架中，并且显示所有按钮会造成过多的视觉混乱。重新设计（例如使用图标）即将到来，但我无法告诉您何时准备好。与此同时，文档将被更新。

# php - PHP - 如果未登录则删除元素

> ID：10872839
> 
> 赞同：0
> 
> 时间：2012-06-03T18:34:03.987
> 
> 标签：php, login, content-management-system, backend

我对CMS后端的php文件使用相同的header.php和footer.php，所以当用户想要登录时，他们将成为我不希望他们看到的header.php的一部分它是后端的一部分，例如

```
<section id="sidebar">
<p>Not to be seen</p>
</section>

<section id="content">
<p>Login here</p>
</section> 
```

是否有一个PHP函数，如果用户登录，可以看到#sidebar，而那些没有登录的人会删除它。使用显示：无；毫无意义，因为如果有人要删除该 CSS 样式，它仍然可见。

## 更新：

我发现了如何做到这一点。该功能是

```
<?php if(($user = Users::authed()) !== false): ?>
<section id="sidebar">
    <p>Not to be seen</p>
</section>
<?php endif; ?>

<section id="content">
    <p>Login here</p>
</section> 
```

感谢那些回答的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:41:59.623

答案取决于您如何登录用户，即使用 cookie 或会话或其他方式。

然而，基本的工作流程将是

```
if(user_logged_in())
echo "<section id=\"sidebar\">
<p>Not to be seen</p>
</section>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:42:07.040

您必须使用本机会话尝试这种情况，我希望它对您有用

```
if(isset($_SESSION['username'])){
  <section id="sidebar">
  <p>Not to be seen</p>
  </section>
}else{
 <section id="content">
 <p>Login here</p>
 </section>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T18:45:37.100

最简单的形式。

1.  `$_SESSION["UserID"]`登录后，使用一些用户 ID 或用户名填充会话变量

2.  修改您的代码如下：

    <section id="侧边栏">

    <p>看不见</p>

    </节>

    <?php

    if ($_SESSION["UserID"]) {

    ?>

    <section id="内容">

    <p>在这里登录</p>

    </节>

    <?php } ?>

# windows - 需要制作一个简单的 Windows 应用程序，我应该使用什么语言？

> ID：10872845
> 
> 赞同：0
> 
> 时间：2012-06-03T18:34:44.260
> 
> 标签：windows

我需要制作一个非常简单的应用程序，用户可以在画布上拖放 PNG 文件，在画布上拖动、缩放和旋转它们，并将它们的名称和坐标导出到 XML。

我非常擅长 Android(java) 编程，但是当我第一次尝试使用 windowsBuilder 的纯 java 时，它似乎相当不方便，可能至少需要几天时间才能找到我的方法。

所以我想，也许你可以建议一些简单的“程序制造商”风格的语言/IDE，可以快速用于这种目的？

现在我正在考虑 Flash ......还有其他想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:39:49.100

我会使用 C#，使用 .NET 框架。

正如您已经了解 Java 一样，它不应该那么难，因为 C# 也是一种面向对象的语言。

当然，它们之间存在一些差异，我不会在这里解释它们。
但是，如果您想要一个真正的 Windows 应用程序，它可能是您的最佳选择，因为您可以通过 .NET 框架访问所有 Windows 功能。
一切都有很好的记录。

您也可以选择 C++（托管），但它可能有点困难，来自 Java。

关于 IDE，只需使用 VisualStudio（速成版是免费的）。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:44:20.690

我首先学习了 JavaScript（我知道它不是 Java，但仍然类似并且仍然是面向对象的），然后是 C++。过渡非常容易，因为两者或多或少都是面向对象的。就像 Macmade 说的，Visual Studio 是很好的开始，但我更喜欢使用 gedit，然后用 G++ 编译。它比 Visual Studio 更宽容，您不必创建项目等，而不仅仅是开始编写代码。使用像 gedit 这样的文本编辑器和独立的编译器 G++，编写代码然后构建程序要容易得多。

我会远离 Flash。我非常了解 AS2/3，我可以说 C 语言更容易编码，至少对我来说是这样。不过，每个人都有自己的个人喜好。C 的一个优点是您不必购买 Flash。

# asp.net - ASP.NET 初学者问答

> ID：10872847
> 
> 赞同：-1
> 
> 时间：2012-06-03T18:34:48.133
> 
> 标签：asp.net

我正在尝试使用 ASP.NET 创建我的第一个 Web 应用程序。我创建了新的示例 ASP.NET 项目应用程序。

首先，我想了解如何从本地 App_Data 文件切换到正确的数据库以及整个身份验证过程是如何工作的。

1.  数据库开关。我所做的是，通过服务器上的 SQL 管理工作室附加了 .mdf 文件的当前示例。但我不确定我应该如何修改我的连接字符串。请问你能帮帮我吗？

    connectionString="数据源=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;用户实例=true"

2.  你能解释一下身份验证是如何工作的吗？说在用户输入其凭据并按 Enter 后，它必须在代码中的某处验证用户名和密码，但我找不到它发生的位置。

假设我的用户 A 是版主，用户 B 是简单用户。我应该如何检测它是哪一个？我如何为用户 A 显示额外的功能，因为他是 Moderato？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:43:06.250

1.) 连接字符串因使用的数据库和实际服务器设置而异。如果您自己无法解决，请咨询您的托管服务提供商

2.) 这取决于实际的实现。基本思路如下：

为用户提供登录表单。用户发回填写了凭据的表单。在服务器上有一个函数，它将这些凭据与存储在持久性介质（如数据库）中的凭据进行比较，如果它们匹配，则对用户进行身份验证。如果它们不匹配，则会出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:46:56.887

1.  对于连接字符串，最好的选择是使用 Visual Studio。转到数据 -> 添加新数据源并按照 UI。如果做不到这一点，[connectionstrings.com](http://connectionstrings.com/)是一个很好的参考。

2.  ASP.net 中有不同类型的身份验证，但鉴于您要实现角色（用户/主持人），Forms 身份验证可能是一个不错的选择。有很多关于如何设置的资源，例如 ，请参见[此处。](http://support.microsoft.com/kb/301240)

3.  最后一步是实现[角色](http://msdn.microsoft.com/en-us/library/5k850zwb.aspx)，以便您的应用程序知道谁是用户，谁是主持人。正确配置后，您的应用程序可以使用简单的逻辑，例如*if (User.IsInRole("moderator"))* ...

# xcode - 关于裁剪/裁剪 uiview

> ID：10872849
> 
> 赞同：1
> 
> 时间：2012-06-03T18:34:58.283
> 
> 标签：xcode, uiview, drawrect, bounding-box

所以我有一个 uiview，它使用一个框架初始化，该框架具有为用户提供的高度和宽度，我希望用户能够在此框架内绘制，但是当用户按下按钮时，我希望视图剪切消除多余的浪费空间，使框架仅与用户绘制的一样大。我试图做这样的事情

```
CGRect boundbox = CGPathGetBoundingBox([myPath CGPath]);
boundbox.origin.x = self.frame.origin.x;
boundbox.origin.y = self.frame.origin.y;
self.frame = boundbox; 
```

然而，这并没有消除额外浪费的空间，它只是调整视图的大小，使绘制的内容看起来比以前更小。我想做的是删除那个“空白”，我在想是否可以扩大uiview的内容，但我不确定。

为了澄清我的意思：

![在此处输入图像描述](../Images/eb67f983ad342b6079aca3841d2851c8.png)

红色边框是用户可以绘制的区域/框架，中间的文本是一幅图画，当用户按下按钮时，我希望框架只包围图画，如图 2 所示。

![在此处输入图像描述](../Images/f920233bd1448b7bfeada591ead60a52.png)

现在假设我有以下场景，我在屏幕中间画了一个圆圈。

![在此处输入图像描述](../Images/81db73a08fc54d61c0a76de9176b1fc2.png)

然后当我按下按钮时，比例保持不变，但圆圈仍然在相同的位置，但我们现在已经更改了绘图区域，所以圆圈/绘图看起来像图 4 中的截断。

![在此处输入图像描述](../Images/aa83429063d32a53e476c9e9e70ab48f.png)

我想要做的是移动绘图/贝塞尔路径，使其位于框架的中间。使红色区域包围蓝色圆圈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:42:35.423

**[编辑]** 鉴于您的图纸。当您更改它的 frame 属性（或它的 CGRect）时，UIView 不会重新定位其中的项目。在这种情况下，您需要跟踪自己绘制的项目，然后在按下按钮时自己执行对象翻译。

这意味着您必须找到最左边的对象，最上面的对象，然后将所有对象向左移动该数量，然后向上移动该数量，以便所有对象（作为一个分组）左上对齐在视图的框架内。在此之后，您将需要自我识别哪个对象最右边以及哪个对象最底部触摸。

现在，由于您已经将项目左上角移动，最右边的点将定义您的框架宽度，最底部的点将定义您的框架高度。

如果您愿意，您应该可以在完成此操作后使用下面的属性进行放大。

**[第一个答案]** 如果我正确理解您的问题，您可能仍希望执行框框操作，但如果您希望缩放，您可能需要查看

```
contentScaleFactor or
contentStretch 
```

特性。

contentScaleFactor 应该基于单个浮点值（即 xWidth * scaleFactor、yHeight * 比例因子）缩放两个维度。

contentStretch 是一个 CGRect ，这意味着它应该分别缩放每个维度（轴）。

# javascript - 谷歌应用引擎（python）中的实时更新图表

> ID：10872850
> 
> 赞同：0
> 
> 时间：2012-06-03T18:35:05.950
> 
> 标签：javascript, python, google-app-engine, charts, live-update

我希望图表在每个特定的时间间隔（比如 10 秒）后更新。在此期间，应用程序将进行处理以确定即将到来的图形值（包括使用 urlfetch 从某些网页获取信息）或保持空闲状态。

是否可以在 GAE 中制作这样的图表？如果是这样，如果有人能引导我走向正确的方向，我将不胜感激。此外，每个应用程序请求的正常 1 分钟截止日期如何应用在这里（以及基本上如何避免它？因为我希望图表保持更新一段时间，比如 2-5 分钟..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T19:38:12.013

二思要做：

1.  在服务器上进行数据处理：[使用 Cron 调用您的数据处理代码](https://developers.google.com/appengine/docs/python/config/cron)。Cron 调用的请求有 10 分钟的截止日期。

2.  客户端重新加载 - 有很多方法可以做到：

    一个。最简单的方法 - 让 HTML 页面定期重新加载：

    ```
    <META HTTP-EQUIV="refresh" CONTENT="15"> 
    ```

    湾。使用[javascript timer](http://www.w3schools.com/js/js_timing.asp)仅更新页面的一部分：

    ```
    setTimeout("javascript statement to update part of page",milliseconds); 
    ```

    C。使用[Channels API](https://developers.google.com/appengine/docs/python/channel/overview)，以便数据处理任务在完成后通知客户端重新加载页面。

选项 A. 和 b。实现起来很简单，但是即使没有新数据要显示，它们也只是盲目地更新页面。它们还会定期更新，而不是在有新数据要显示时更新。如果只有少数客户使用此页面，您可以使用其中之一。

选项 C. 它是最难实现的，但 IMO 是正确的方式，因为它仅在实际显示新内容时才会重新加载页面。如果您有很多客户使用此页面，您应该使用此选项。

# c# - 如何在 C# 中使用 Yahoo REST Api

> ID：10872855
> 
> 赞同：0
> 
> 时间：2012-06-03T18:35:39.130
> 
> 标签：c#, api, rest, key, yahoo

我只是想制作一个雅虎启动，向我的应用程序的注册用户发送即时消息。我花了几个小时在网上搜索如何做到这一点，但雅虎开发人员文档很烂。首先，我不知道我应该使用哪些服务器进行授权、登录和消息传递。我有一个消费者密钥，我尝试按照[这些](http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html)步骤操作，但没有任何效果。

欢迎任何意见/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:47:30.233

The documentation looks to be very good, I think the issue here is that your knowledge of how REST API's work in general is a bit lacking.

**Let's talk about diagram #2: Get a request token using:** `get_request_token`.

`get_request_token` is part of an HTTP endpoint, and in their diagram they want you to pass in a handful of parameters to validate your request.

*   oauth_consumer_key
*   oauth_nonce
*   oauth_signature_method
*   etc

*(If you need more clarification of any step you can find it in the tree view on the left hand side of the page)*

**The request URL:**

`https://api.login.yahoo.com/oauth/v2/get_request_token`.

Now at this point you can either use the HTTP `GET` or `POST` verb. If you decide to use `GET` you will need to include those above parameters as a query string.

`?oath_consumer_key=myConsumerKey&oauth_nonce=oathNonce` etc

I will leave it to you to write the associated C# code. You'll want to start off with the `HttpWebRequest.Create()` method

# php - 使用 Zend Framework 将所有 URL 重写为 SSL，但特定文件夹除外

> ID：10872859
> 
> 赞同：1
> 
> 时间：2012-06-03T18:36:11.917
> 
> 标签：php, zend-framework, mod-rewrite, apache2

提前感谢您的帮助。我已经为我们的 Web 应用程序设置了 Zend Framework，并且到目前为止使用基本的 SSL 重定向工作得很好。我们希望将所有 URL 重定向到 SSL，除了几个路径。一个路径工作正常，只是加载图像文件。但另一条路径没有，它是一个 Zend 框架控制器，其动作需要请求参数。

这是我们当前的工作配置：

```
RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteCond %{REQUEST_URI} !(/images)
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

以上适用于排除图像并允许 ZF 运行，但我们还想排除 URI 路径 /wsrv/itemdata 中的任何内容，我们尝试使用此条件：

```
RewriteCond %{REQUEST_URI} !(/wsrv/itemdata) 
```

/wsrv/itemdata 可能包含以下格式的多个参数：

```
/wsrv/itemdata/item_nbr/111111/some_other_arg/a-value 
```

我们的问题是它总是重定向到 /index.php，它被定向到 SSL。我们需要重定向到 index.php 以使框架正常工作，但不能仅对单个控制器和操作 /wsrv/itemdata 使用 ssl。

我很感激任何帮助。谢谢！

**编辑 6-4-12：（已解决！主要是）** 它不是 URL 重写，它在我的 Zend Framework 加载器中。我添加了下面的规则并使用了一些测试文件，规则有效。但是我的框架设置中的某些东西正在重定向它。

```
RewriteCond %{HTTPS} !=on
RewriteCond %{REQUEST_URI} !(/images/)
RewriteCond %{REQUEST_URI} !(/wsrv/itemdata/)
RewriteCond %{REQUEST_URI} !(/test/make/)
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

上述工作，除了 /wsrv/itemdata 行，它正在通过框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T21:23:11.493

我找到了解决我的问题的方法。另一个用户发布的这个问题有帮助并且是相关的，但我无法让他的解决方案起作用：

[htaccess https 仅在特定 Zend Frameworks 控制器/操作上重定向](https://stackoverflow.com/questions/6580154/htaccess-https-redirect-only-on-specific-zend-frameworks-controller-actions)

我的解决方案有效，除了一个问题，这并没有阻止我继续前进。下面列出的重写规则允许我在特定的 Zend Framework 控制器和操作方法下省略 SSL 连接，同时强制任何其他不存在的东西使用正常的 SSL 连接。（基本上，强制一切使用 SSL，但只有一条路径）

此解决方案的唯一例外是发送的 URL 中的尾随“/”。如果我不发送斜杠，它仍然会自动将我转发到 index.php。因为无论如何我都需要传入参数，所以斜杠就在那里，所以对我有用。作品：/wsrv/itemdata/ 作品：/wsrv/itemdata/item_nbr/123456/otherarg/otherval 无效：/wsrv/itemdata

这是最终的、复杂的重写规则：

```
 RewriteEngine On

#if req is normal file, dir
#then pass in request unchanged (show css, js, img, etc, no ZF)
#do not proc more rules
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

#if req is ssl
#   and not wsrv/itemdata
#   and not images
#   and not test/make
# then rewrite req to index.php to use ZF
#do not proc more rules
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !wsrv/itemdata/
RewriteCond %{REQUEST_URI} !images/ 
RewriteCond %{REQUEST_URI} !test/make/ 
RewriteRule ^.*$ index.php [L]

#NOTE: itemdata/ must have trailing / in client requsts
# In other words, requesting /wsrv/itemdata will redirect to index
# I don't know how to fix that yet
# But / is always used anyway because request args are used
# Ex: /wsrv/itemdata/item_nbr/12345678

#if req is NOT ssl
#   and we want wsrv/itemdata/
#then rewrite without ssl to ZF index.php
#do not proc more rules
RewriteCond %{HTTPS} !=on
RewriteCond %{REQUEST_URI} wsrv/itemdata/
RewriteRule ^.*$ index.php [L]

# Last if none above match, check for non-ssl
#if req is ssl
#   and not wsrv/itemdata
#   and not images
#   and not test/make
# then REDIRECT to https:// using same URI
#do not proc more rules
RewriteCond %{HTTPS} !=on
RewriteCond %{REQUEST_URI} !wsrv/itemdata/
RewriteCond %{REQUEST_URI} !images/ 
RewriteCond %{REQUEST_URI} !test/make/ 
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# java - Java：无法让我的主要方法工作

> ID：10872862
> 
> 赞同：0
> 
> 时间：2012-06-03T18:36:21.293
> 
> 标签：java, exception, main

我正在使用 Fedora，但在让 javac 工作时遇到了一些问题（我终于通过创建别名成功了）。但现在我无法执行我的 java 代码。我得到标题中的错误。这是包含主要方法的类：

```
public class test
{
    public static void main(String args)
    {
       int res[]= {4,2,6};
       res=Trieur.tri(res);
       for(int i: res)
          System.out.println(i);
    }
} 
```

我在这个论坛上尝试了很多解决方案，但似乎都没有奏效。程序编译成功。你能帮我么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T18:36:50.420

改变这个：

`public static void main(String args[])`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T18:41:46.027

或作为`public static void main(String[] args)`. 这两种语法在 Java 中都是有效的，尽管这种格式可以说更流行一些。

# java - 如何从 JUnit 线程中中断信号量？

> ID：10872863
> 
> 赞同：0
> 
> 时间：2012-06-03T18:36:23.483
> 
> 标签：java, multithreading, junit, semaphore

我有一个要测试的方法的实现。

```
 @Override
public void onMessage(final Message message) {
    try {
        LOG.fine("waiting on semaphore for " + message);
        semaphore.acquire();
        LOG.fine("semaphore acquired for " + message);
        listener.onMessage(message);
        LOG.fine(message + " processed");
    } catch (final InterruptedException e) {
        throw new RuntimeException(e);
    } finally {
        semaphore.release();
    }
} 
```

但是，我不确定如何从 JUnit 测试中触发 InterruptedException。理论上我可以添加钩子来终止它，但这会污染代码库，代码只用于我想避免的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T19:31:15.360

你应该模拟信号量。你伪造的信号量应该抛出 InterruptedException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:38:05.150

在我的测试中，在调用 onMessage 之前中断当前线程，即使它不需要阻塞也会导致获取方法抛出，但我不知道这是否会在所有 jres 中发生。

另一种选择是为此使用多个线程。让线程一调用 onMessage，并在它的侦听器信号线程二中调用 onMessage，然后阻塞直到线程 2 完成。让线程二阻塞，直到线程一锁定信号量。然后它应该中断自己并调用 onMessage。一旦它得到预期的运行时异常，它应该通知线程一停止阻塞。

我会使用两个 CountDownLatches 让两个线程进行通信。

如果测试失败，请确保终止两个线程。

# flash - Red5：Flash 流发布立即停止

> ID：10872864
> 
> 赞同：1
> 
> 时间：2012-06-03T18:36:35.147
> 
> 标签：flash, actionscript, red5, netstream

几年前，我制作了一个小闪存小程序，可以将网络摄像头视频流式传输到 red5 服务器。现在我试图“复制”我的作品，但当前的 Red5 或 Flash 版本可能出现问题。

发布流后，它会在不到一秒的时间内停止。

ActionScript 代码（更详细： http: [//pastebin.com/ua70kFHu](http://pastebin.com/ua70kFHu)）：

```
...
myStream.addEventListener(NetStatusEvent.NET_STATUS, myStreamStatus);
myStream.addEventListener(AsyncErrorEvent.ASYNC_ERROR, myAsyncErrorHandler);
myStream.attachCamera(myCamera);
myStream.publish('1234567890123456789012345678901234567890', 'live');
... 
```

Red5 日志显示（更详细： http: [//pastebin.com/eLqmCfqB](http://pastebin.com/eLqmCfqB)）：

```
...
2012-06-03 20:30:57,408 [NioProcessor-1] INFO  org.red5.demos.oflaDemo.Application - W3C x-category:stream x-event:publish c-ip:10.0.0.5 x-sname:832c7d0c-ae26-4650-9570-a983c2c751d8 x-name:1234567890123456789012345678901234567890
2012-06-03 20:30:57,410 [NioProcessor-1] INFO  o.r.s.stream.ClientBroadcastStream - Close
2012-06-03 20:30:57,411 [NioProcessor-1] INFO  org.red5.demos.oflaDemo.Application - W3C x-category:stream x-event:unpublish c-ip:10.0.0.5 cs-bytes:3552 sc-bytes:3500 x-sname:832c7d0c-ae26-4650-9570-a983c2c751d8 x-file-length:0 x-name:1234567890123456789012345678901234567890
... 
```

如果您对问题有任何线索（或如何调试它），请告诉我。

# ruby-on-rails - rake db:schema:load 导致表再次以 table_prefix 为前缀

> ID：10872865
> 
> 赞同：1
> 
> 时间：2012-06-03T18:36:47.413
> 
> 标签：ruby-on-rails, activerecord, schema

我需要在模式中为表添加前缀，但出于某种原因，rails 想在 db:schema:load 期间再次为表添加前缀。有没有办法将 rails 配置为使用 db 前缀但不将其放入 schema.rb 或不再次为表添加前缀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T21:11:15.650

看起来没有——一个积极开放的 Rails 问题。（见[https://github.com/rails/rails/issues/4259](https://github.com/rails/rails/issues/4259)）

对您的潜在修复：[https ://github.com/rails/rails/pull/4396](https://github.com/rails/rails/pull/4396)

因此，您可以分叉 Rails 并应用该拉取请求并使用它

# java - Struts - 额外属性

> ID：10872869
> 
> 赞同：0
> 
> 时间：2012-06-03T18:37:54.780
> 
> 标签：java, struts

如果我在 HTML 中发送一个（或多个）在 struts 中映射的操作表单中不存在的属性，会发生什么情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:08:00.490

你甚至无法发送它们。您的 JSP 页面不会编译，因为如果您在表单中声明的​​任何属性未在 struts 操作表单中定义，它就不会知道它们。

# java - 在 PC 上运行的 Bluez 应用程序用于监听 Android 设备

> ID：10872871
> 
> 赞同：1
> 
> 时间：2012-06-03T18:38:03.517
> 
> 标签：java, android, bluetooth, rfcomm, bluez

我想开发一个使用 Linux 蓝牙 API Bluez 的应用程序，意味着允许 Android 设备发送和接收数据。

对于 PC 端，我查看了以下代码： http: [//people.csail.mit.edu/albert/bluez-intro/x502.html](http://people.csail.mit.edu/albert/bluez-intro/x502.html) 因为 Android 使用 RFCOMM 协议，或者我猜因为无法手动设置协议.

由于在 Android 中只能使用 Java API（Bluez API 锁定）并且 SDP 不能很好地工作，所以我必须使用这个调用：

```
InsecureBluetooth.createRfcommSocket(BlueDevice , Channel , false); 
```

例如，当我将频道设置为 0xC (12) 时，这是命令返回的频道之一：

```
sdptool browse local | grep Channel 
```

android应用程序可以正确连接到PC。

问题是我无法弄清楚允许两个应用程序通信的参数是什么。对于 PC 端，我只有一个值为 1 的端口号。对于 Android 端，我有一个分配给 SDP 可用服务的通道。但是 SDP 在 Android 中不起作用，所以我该怎么做呢？

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T09:27:36.633

我以这种方式解决了：

对于PC端使用SDP记录。我们必须将服务记录到必须免费的知名频道，我的意思是其他服务不使用。要检查它，请执行以下命令：

```
sdptool record local 
```

执行此操作的代码位于[http://people.csail.mit.edu/albert/bluez-intro/x604.html](http://people.csail.mit.edu/albert/bluez-intro/x604.html)

第**4-9 节。描述服务**

这两行必须在**// 设置通用服务 ID之后添加**

```
// set the service class ID
sdp_list_t service_class = {NULL, &svc_uuid};
sdp_set_service_classes( record, &service_class); 
```

我们必须将频道更改为其他服务未使用的频道。例如频道 1 ：

```
uint8_t rfcomm_channel = 1; 
```

现在我们有一些东西可以监听 PC 端，我们必须通过众所周知的反射方法将 Android 设备直接连接到通道一，因为不幸的是，SDP 现在完全可以在 android 中工作。

```
Method bluetoothConnect;

bluetoothConnect = BlueDevice.getClass().getMethod("createRfcommSocket", new Class[]{int.class} );
CommunicationChannel = (BluetoothSocket) bluetoothConnect.invoke(BlueDevice, 1);

CommunicationChannel.connect(); 
```

当然**BlueDevice**是一个被**startDiscovery()**方法破坏的设备，“1”代表通道 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:56:14.597

我知道这不能回答你的问题，我认为 bluecove (http://bluecove.org/) 会是更好的选择。它支持大多数操作系统，并为 Java 提供了不错的库。

我认为 bluez 不适用于 Windows，您需要 WIDCOMM 或 BlueSoleil 堆栈，而 bluecove 将为您使用适当的堆栈。

# c++ - MK_CONTROL 我 WM_MOUSEWHEEL

> ID：10872874
> 
> 赞同：0
> 
> 时间：2012-06-03T18:38:48.920
> 
> 标签：c++, winapi

我尝试使用 ctrl+ 鼠标滚轮来实现缩放功能。如果我使用此代码，则活动窗口正在滚动，但没有缩放 - 看起来所有收到此消息的应用程序都无法识别 MK_CONTROL 标志。有人可以告诉我我做错了什么吗？

```
#include "stdafx.h"
#include<Windows.h>
#include<iostream>
using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
while(true)
    {
    WORD wLow=MK_CONTROL;
    WORD wHigh=240;
    WPARAM par= MAKEWPARAM(wLow, wHigh);
    HWND WindowToScroll =  GetForegroundWindow();
    SendMessage(WindowToScroll, WM_MOUSEWHEEL,par,NULL);
    Sleep(1000);
    cout<<WindowToScroll<<endl;
    }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T18:57:28.680

您假设程序使用 MK_CONTROL 标志。然而，这并不典型，程序通常会检查实际的键盘状态以检查修饰符。GetKeyState() 函数。

这是一个问题，您不能使用 SendMessage() 为另一个进程伪造键盘状态。您需要改用 SendInput() 并实际发送控制键的 keydown。也很好伪造鼠标滚轮输入。不要忘记 keyup 来恢复键盘状态。

# mysql - 将 Oracle SQL 连接查询转换为 MySQL 查询

> ID：10872879
> 
> 赞同：2
> 
> 时间：2012-06-03T18:39:47.103
> 
> 标签：mysql, sql, oracle, join

鉴于 Oracle Pl/SQL 中的以下联接：

```
select a.field1, b.field1, b.field2
from table_a a, table_b b
where a.field2 = b.field3; 
```

在 MySQL 中执行此代码时，完成任务需要很长时间，而在 Pl/SQL 中则不需要时间。两个环境中的表相同。没有字段被索引。

两种方言中的连接有区别吗？在标准 SQL 中正确的翻译是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:51:39.803

MySQL 无法应对没有索引的情况。Oracle 可以进行散列连接并且仍然很快。在连接列上添加索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:55:25.643

您需要 MySql 中的索引来避免您面临的问题。

# linux - 模拟 USB 设备以实现自动化

> ID：10872883
> 
> 赞同：6
> 
> 时间：2012-06-03T18:40:16.167
> 
> 标签：linux, kernel, driver, simulation, libusb

我必须模拟 USB 设备以实现自动化和测试目的（在 Linux 中）。该设备的原始驱动程序/应用程序使用“libusb”与其通信。

我在Linux和模拟方面没有太多经验，经过一番搜索，我了解到我需要在用户空间编写内核级驱动程序和应用程序来模拟该设备。这是正确的吗？如果是，如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:06:26.047

最后通过修改“libusb”实现它，修改为从消息队列而不是usbfs发送和接收usb传输。对我的模拟器进行编程以创建 libsub 类型传输并使用消息队列发送/接收它们。

模拟器现在解释传入的传输并将其发送到命令解析器，该解析器使用特定格式的套接字将请求/消息发送到自动化系统。自动化系统通过使用套接字发送到命令解析器来发送它的指令。这个套接字调用模拟器中每个请求的特定方法，现在模拟器形成一个适当的传输结构并通过消息队列传递给设备插件（通过 libusb）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:05:12.000

我认为您正在寻找的将被称为虚拟 USB 设备。目前标准内核中没有任何内容。一些虚拟机提供USB仿真。例如KVM提供USB仿真。有框架[小工具](http://www.linux-usb.org/gadget/)可以在其中寻找您的解决方案。或者在[Linux USB 项目中找到一些东西](http://www.linux-usb.org/)

谢谢， 阿比吉特

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T01:03:02.260

如果您希望设备以与真实硬件相同的方式呈现给内核，那么[usb-vhci项目可能会很有用。](http://sourceforge.net/projects/usb-vhci/)

# javascript - 如何从 jquery 插件中删除 x 按钮

> ID：10872884
> 
> 赞同：0
> 
> 时间：2012-06-03T18:40:16.690
> 
> 标签：javascript, jquery, jquery-plugins, plugins

我[在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/QandATable3.php)有一个应用程序，如果您在大约 20 秒内不做任何事情，它将显示一个空闲超时插件消息，说明您是要继续还是注销。

问题是它在角落的顶部按钮上显示 ax 按钮，如果用户单击 x 按钮，则消息会消失，但在选项卡中，计时器仍会继续。

那么我的问题是如何删除消息右上角的 x 按钮？

下面是应用程序的代码：

```
<head>
<script type="text/javascript">

$(document).ready(function()

{

    $("#dialog").dialog({
    autoOpen: false,
    modal: true,
    width: 400,
    height: 200,
    closeOnEscape: false,
    draggable: false,
    resizable: false,
    buttons: {
        'Yes, Keep Working': function(){
            // Just close the dialog. We pass a reference to this
            // button during the init of the script, so it'll automatically
            // resume once clicked
            $(this).dialog('close');
        },
        'No, Logoff': function(){
            // fire whatever the configured onTimeout callback is.
            $.idleTimeout.options.onTimeout.call(this);
        }
    }
});

$.idleTimeout('#dialog', 'div.ui-dialog-buttonpane button:first', {
    idleAfter: 5, // user is considered idle after 5 minutes of no movement
    pollingInterval: 60, // a request to keepalive.php (below) will be sent to the server every minute
    onTimeout: function(){

        // redirect the user when they timeout.
        window.location = "timeout.htm";

    },
    onIdle: function(){

        // show the dialog when the user idles
        $(this).dialog("open");

    },
    onCountdown: function(counter){

        // update the counter span inside the dialog during each second of the countdown
        $("#dialog-countdown").html(counter);

    },
    onResume: function(){

        // the dialog is closed by a button in the dialog
        // no need to do anything else

    }
});

});

</script>

</head>

<body>

<div id="dialog" title="Your session is about to expire!">
    <p>You will be logged off in <span id="dialog-countdown"></span> seconds.</p>
    <p>Do you want to continue your session?</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T00:14:31.467

您可以在打开对话框时隐藏 X。

```
$("#div2").dialog({
   closeOnEscape: false,
   open: function(event, ui) { $(".ui-dialog-titlebar-close").hide(); }
}); 
```

[这是原始的SO问题和答案](https://stackoverflow.com/questions/896777/remove-close-button-on-jqueryui-dialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T13:54:58.983

或者干脆放一个

```
<style>
     .ui-dialog-titlebar-close { display: none ; }
</style> 
```

# javascript - Django：初始化后上传3.1内部服务器错误

> ID：10872889
> 
> 赞同：0
> 
> 时间：2012-06-03T18:40:55.887
> 
> 标签：javascript, jquery, python, django, uploadify

我很困惑为什么我在初始化后立即出现错误 500，`JQuery Uploadify`因为`uploadify`尝试请求不存在的 url，也尝试设置`preventCaching: false`但没有帮助

![错误截图](../Images/899b42dd700012ea3ce061aca73b2288.png) `.../document/1/`不存在且当前页面 url 不同

**Http 数据**

```
Request URL:http://localhost:8000/document/1/
Request Method:GET
Status Code:500 INTERNAL SERVER ERROR
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Host:localhost:8000
Pragma:no-cache
Referer:http://localhost:8000/static/g/plugins/uploadify/uploadify.swf 
```

从上面我们看到，`Referer:http://localhost:8000/static/g/plugins/uploadify/uploadify.swf`为什么uploadify会提出我没有要求它提出的额外请求？

**JS代码**：

```
$('#id_file').uploadify({
    swf: '{% static 'g/plugins/uploadify/uploadify.swf' %}',
    uploader: '{% url upload_file object.id %}',
    //...
}); 
```

uploadify 有什么问题或者我做错了什么？

谢谢，

苏丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:21:43.550

它会产生错误，因为`uploadify`通过您设置使用的上传处理程序上传文件

```
uploader: '{% url upload_file object.id %}', 
```

也许`'{% url upload_file object.id %}',`正在生产类似`.../document/1/`. 您应该为此选项提供一个有效的 url，并且在该处理程序脚本中，您必须像处理普通文件上传一样处理文件上传，例如保存上传的文件等。

阅读更多关于[http://www.uploadify.com/documentation/uploadify/uploader/](http://www.uploadify.com/documentation/uploadify/uploader/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:26:21.543

一直在调试，发现 Uploadify 寻找`button_image_url`属性，我只是为空，就是这样我不再有这个错误了

**上传调试跟踪**

```
---SWFUpload Instance Info---
Version: 2.2.0 2009-03-25
Movie Name: SWFUpload_0
Settings:
    upload_url:               /document/1/add-file
    flash_url:                /static/g/plugins/uploadify/uploadify.swf
    use_query_string:         false
    requeue_on_error:         false
    http_success:             
    assume_success_timeout:   30
    file_post_name:           file
    post_params:              [object Object]
    file_types:               *.*
    file_types_description:   All Files
    file_size_limit:          0
    file_upload_limit:        0
    file_queue_limit:         999
    debug:                    true
    prevent_swf_caching:      false
    button_placeholder_id:    id_file
    button_placeholder:       Not Set
    button_image_url:         /document/1/
    button_width:             120
    button_height:            30
    button_text:              
    button_text_style:        color: #000000; font-size: 16pt;
    button_text_top_padding:  0
    button_text_left_padding: 0
    button_action:            -110
    button_disabled:          false
    custom_settings:          [object Object]
Event Handlers:
    swfupload_loaded_handler assigned:  false
    file_dialog_start_handler assigned: true
    file_queued_handler assigned:       true
    file_queue_error_handler assigned:  true
    upload_start_handler assigned:      true
    upload_progress_handler assigned:   true
    upload_error_handler assigned:      true
    upload_success_handler assigned:    true
    upload_complete_handler assigned:   true
    debug_handler assigned:             true

SWF DEBUG: SWFUpload Init Complete
SWF DEBUG: 
SWF DEBUG: ----- SWF DEBUG OUTPUT ----
SWF DEBUG: Build Number:           SWFUPLOAD 2.2.0
SWF DEBUG: movieName:              SWFUpload_0
SWF DEBUG: Upload URL:             /document/1/add-file
SWF DEBUG: File Types String:      *.*
SWF DEBUG: Parsed File Types: 
```

感谢您的关注。

# screen - css媒体类型“手持”关心什么参数？

> ID：10872893
> 
> 赞同：6
> 
> 时间：2012-06-03T18:41:18.807
> 
> 标签：screen, media-queries, screen-resolution, screen-size, handhelddevice

我需要根据页面是手持设备（如手机）还是大屏幕设备（如笔记本电脑、固定电脑或平板电脑）来更改页面样式。

我知道我可以通过 css max-width 查询等检测分辨率，但这并不令人信服。主要是因为今天的智能手机拥有如此高分辨率的屏幕。即索尼 Xperia S，它有一个 720p x 1280 的屏幕，但它只有 4,3"。因此，在普通计算机屏幕上可以阅读的 10px 字体将变得太小而无法阅读。

因此，我需要知道的不仅仅是分辨率，才能知道它是否是小屏幕设备。（我认为 media="handheld" css 样式是要走的路。如果我错了，请纠正我）。

那么：css媒体类型“手持”关心什么参数呢？

*   设备屏幕尺寸？
*   浏览器窗口大小？
*   带宽？
*   设备是否“手持”的信息是否只是客户端传递的参数？
*   平板电脑是否包含在“手持”设备中？

等等

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T19:05:41.653

媒体类型在`handheld`很大程度上是无用的，因为当前一代的智能手机和类似设备（至少 Android 和 iOS 股票浏览器）不使用它来避免为旧设备设计的超最小格式。

我建议使用媒体查询。请注意，您可以查询分辨率和大小，并且可以以物理单位（in、pt、cm）和像素为单位查询大小。（但是，我不知道设备是否报告了相当准确的物理单位尺寸。）

**但是**，只要可行，您不应该针对特定设备进行设计，而是要让您的网站在*任何*规模上都能正常运行（当前流行的流行词是*响应式设计*，并且已经写了很多关于此技术的文章）。我个人的做法是几乎完全按照`em`（行高单位）来编写我的样式表，然后在特定布局仅在特定大小范围内运行良好的情况下使用媒体查询来切换布局；并且由于大小是根据 定义的`em`，*因此媒体查询也应该根据 来编写`em`。*这样做的好处是字体大小是屏幕上项目的合理显示大小的合理代理——反映了观看距离和（如果用户花时间配置他们的浏览器）用户的眼睛/手的能力。

# android - 比较选项卡名称

> ID：10872894
> 
> 赞同：0
> 
> 时间：2012-06-03T18:41:24.037
> 
> 标签：android, android-tabhost

有没有人知道我如何将当前标签与另一个标签进行比较？像

```
 if(tabhost.getCurrenttabtag().equals( tabhost.gettabtag() )) 
```

我找不到任何答案：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:45:31.577

```
String currentTabTag = tabhost.getCurrentTabTag();
if (currentTabTag.equals("Tab1")) {
   // do something
} 
```

或者您可以比较 OnTabChangedListener 中的选项卡索引：

```
tabhost.setOnTabChangedListener(new OnTabChangeListener() {

@Override
public void onTabChanged(String tabId) {

int i = getTabHost().getCurrentTab();
    switch(i) {
        case 1:
          break:
        case 2:
          break:
    }
  }
}); 
```

# java - 在java中对两个文件的内容进行排序

> ID：10872895
> 
> 赞同：-3
> 
> 时间：2012-06-03T18:41:24.737
> 
> 标签：java, sorting

我有 2 个名为“text1”的文本文件，内容如下

```
1191196800.681 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D
1191196800.683 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D
1191196800.685 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D 
```

和具有以下内容的“text2”

```
1191196800.682 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D
1191196800.684 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D
1191196800.686 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D 
```

我想创建一个排序后的第三个文件，其中包含以下内容

```
 1191196800.681 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D
 1191196800.682 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D
 1191196800.683 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D
 1191196800.684 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D
 1191196800.685 - !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D 
```

任何人都可以帮我提供伪代码来解决上述问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T18:53:13.173

在 Unix 机器上：

```
sort -n -k1 file1 file2 > results.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T19:01:20.633

将文件读入列表，调用：

```
Collections.sort(yourList); 
```

然后遍历排序列表并将内容写入文件。

读取文件示例：[http](http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml) ://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml 写入文件示例：[http ://www.roseindia.net/java/beginners/java -write-to-file.shtml](http://www.roseindia.net/java/beginners/java-write-to-file.shtml)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-03T19:02:11.367

试试这个。

1.  您从 file1 读取并将其存储在临时文件中，然后读取 file2 并将其也存储在同一个临时文件中。

2.  现在使用 Scanner (ie. `next()`) 来读取这个临时文件，只使用 next() ，这将只读取每行中的第一个单词，将其转换为 double`Double.parseDouble()`使用 this 进行比较，同时将整行放入`TreeSet()`as 字符串中

3.  将 TreeSet() 内容写入文件 3。

4.  最终结果将是你想要的。

只是认为这会有所帮助，我也在展示我阅读和附加的方式。

从文件中读取

```
File f = new File("my.txt");
FileReader fr = new FileReader(f);
BufferedReader br  = new BufferedReader(fr);

String s = null;

while ((br=readLine())!=null) {

// Do whatever u want to do with the content of the file,eg print it on console using SysOut...etc

}

br.close(); 
```

对于写入文件：

```
Boolean isDone = true;
Scanner scan = new Scanner(System.in);
File f = new File("my.txt");
FileWriter fr = new FileWriter(f,true);
BufferedWriter br  = new BufferedWriter(fr);

while (b) {

   if (!b) {

 br.append(new Scanner(System.in).nextLine());

 }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T18:51:43.937

未测试：

```
BufferedReader reader1 = new BufferedReader(new FileReader("file1.txt"));
BufferedReader reader2 = new BufferedReader(new FileReader("file2.txt"));
PrintWriter out = new PrintWriter ("out.txt");

String line1 = reader1.readLine();
String line2 = reader2.readLine();

while(line1 !=null && line2 != null) {
  out.println(line1);
  out.println(line2);
  line1 = reader1.readLine();
  line2 = reader2.readLine();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-03T18:59:39.917

读取这两个文件将其存储到哈希映射中，如下所示

```
HashMap<Double,String> hash=new Hashmap<Double,String> (); 
```

Double 是第一部分 Double(1191196800.681), String(- !AIVDM,1,1,,,13aG?N0rh20E6sjN1J=9d4<00000,0*1D)

```
 Map<String, String> sortedMap = new TreeMap<String, String>(hash);

out.println(sortedMap); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-04T09:30:08.380

这是完成上述工作的简单程序。

```
public class RunSysCmd {

/**Executes the Linux command necessary for sorting
 * @param String
 */
public static void main(String[] args) {

    try {
        // command to be executed
        String cmd = "/usr/bin/sort -n -k1 /home/General_DataStructure/r1.nmea /home/General_DataStructure/r2.nmea";

        // new file where the result will be stored
        BufferedWriter out = new BufferedWriter(new FileWriter(new File("/home/General_DataStructure/r3.nmea")));
        String line;

        // run the command specified in the cmd variable
        final Process process = Runtime.getRuntime().exec(cmd);

        // read the result executed by the previous command
        BufferedReader buf = new BufferedReader(new InputStreamReader(process.getInputStream()));

        // write the output of the command to new file
        while ((line = buf.readLine())!=null) {
            out.write(line);
            out.newLine();

        }

        // close the file
        buf.close();
        out.close();

        // causes the thread to wait until the process represented by this Process object the is terminated
        process.waitFor();

        // get the return value of the process. The value 0 means successful execution of the thread
        int returnCode = process.exitValue();
        System.out.println(returnCode);

    } catch (IOException e) {
        e.printStackTrace();

    }

    catch (InterruptedException e) {
        e.printStackTrace();

    }

  }// main ends here
 } 
```

谢谢

# .htaccess - .htaccess 漂亮的网址，空格？

> ID：10872904
> 
> 赞同：1
> 
> 时间：2012-06-03T18:42:31.243
> 
> 标签：.htaccess, mod-rewrite, friendly-url, pretty-urls

这是我的代码，可让我更改

```
mydomain.com/?name=something&action=something&other=something 
```

到

mydomain.com/something/something/something

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} -d [OR] 
RewriteCond %{SCRIPT_FILENAME} -f [OR]
RewriteRule .* - [L]

RewriteRule ^(\w+)/(\w+)/(\w+)/?$ /index?name=$1&action=$2&other=$3
RewriteRule ^(\w+)/(\w+)/?$ /index.php?name=$1&action=$2
RewriteRule ^(\w+)/?$ /index.php?name=$1 
```

但有时第一个“东西”可能是其中有空格的东西，我不太确定如何格式化它。例如“非常随机的东西”。我知道 url 用 a 格式化它，`%20`但我怎么能用 .htaccess 做到这一点，所以 url 可以是

mydomain.com/something 非常随机/something/something

第一个单词也将带有一个`-`和一个随机数，例如`-4738`

例如`mydomain.com/something very random-4738/something/something`

我将如何使用我正在使用的 .htaccess 代码来获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:55:38.260

用这个替换你的代码

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{SCRIPT_FILENAME} -d [OR] 
RewriteCond %{SCRIPT_FILENAME} -f [OR]
RewriteCond %{SCRIPT_FILENAME} -l
RewriteRule .* - [L]

RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /index.php?name=$1&action=$2&other=$3 [L,QSA]
RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?name=$1&action=$2 [L,QSA]
RewriteRule ^([^/]+)/?$ /index.php?name=$1 [L,QSA] 
```

# erlang - Erlang 读标准输入 写标准输出

> ID：10872909
> 
> 赞同：13
> 
> 时间：2012-06-03T18:43:26.750
> 
> 标签：erlang, stdout, stdin, getline

我正在尝试通过[interviewstreet](https://www.interviewstreet.com/challenges/dashboard/#problems)学习 erlang 。我现在只是学习语言，所以我几乎一无所知。我想知道如何从标准输入读取并写入标准输出。

我想写一个简单的程序来写“Hello World！” 在标准输入中接收的次数。

所以使用标准输入：

```
6 
```

写入标准输出：

```
Hello World!
Hello World!
Hello World!
Hello World!
Hello World!
Hello World! 
```

理想情况下，我将一次读取一行标准输入（即使在这种情况下它只是一位数字），所以我想我将使用 get_line。这就是我现在所知道的。

谢谢

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-03T19:30:31.273

这是另一种解决方案，可能更实用。

```
#!/usr/bin/env escript

main(_) ->
    %% Directly reads the number of hellos as a decimal
    {ok, [X]} = io:fread("How many Hellos?> ", "~d"),
    %% Write X hellos
    hello(X).

%% Do nothing when there is no hello to write
hello(N) when N =< 0 -> ok;
%% Else, write a 'Hello World!', and then write (n-1) hellos
hello(N) ->
   io:fwrite("Hello World!~n"),
   hello(N - 1). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:18:30.470

这是我的镜头。我使用了 escript 所以它可以从命令行运行，但它可以很容易地放入一个模块中：

```
#!/usr/bin/env escript

main(_Args) ->
    % Read a line from stdin, strip dos&unix newlines
    % This can also be done with io:get_line/2 using the atom 'standard_io' as the
    % first argument.
    Line = io:get_line("Enter num:"), 
    LineWithoutNL = string:strip(string:strip(Line, both, 13), both, 10),

    % Try to transform the string read into an unsigned int
    {ok, [Num], _} = io_lib:fread("~u", LineWithoutNL),

    % Using a list comprehension we can print the string for each one of the
    % elements generated in a sequence, that goes from 1 to Num.
    [ io:format("Hello world!~n") || _ <- lists:seq(1, Num) ]. 
```

如果您不想使用列表推导，这是与最后一行代码类似的方法，使用 lists:foreach 和相同的序列：

```
 % Create a sequence, from 1 to Num, and call a fun to write to stdout
    % for each one of the items in the sequence.
    lists:foreach(
        fun(_Iteration) ->
            io:format("Hello world!~n")
        end,
        lists:seq(1,Num)
    ). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-04T18:48:31.397

```
% Enter your code here. Read input from STDIN. Print output to STDOUT 
% Your class should be named solution

-module(solution).
-export([main/0, input/0, print_hello/1]).

main() ->
    print_hello(input()).

print_hello(0) ->io:format("");
print_hello(N) ->
    io:format("Hello World~n"),
    print_hello(N-1).
input()->
    {ok,[N]} = io:fread("","~d"),
N. 
```

# actionscript-3 - 在阶段 AS3 之外生成

> ID：10872911
> 
> 赞同：0
> 
> 时间：2012-06-03T18:43:40.703
> 
> 标签：actionscript-3, flash, actionscript

使用 actionscript 3 在舞台之外生成模式的最佳方法是什么？我正在尝试创建用户正在移动的无尽楼梯。第一组步骤在运行时使用：

```
for(i=0; i<40 ; i++)
{
    var _block:Platform=new Platform("Platform",{x:i*20 ,y: 400 - i * 20, view:"../assets/art/step.png"});  
    add(_block)
} 
```

楼梯从舞台的左下角一直延伸到舞台的右上角。我不确定是否可以绘制更多楼梯，例如当用户在 40 个楼梯的中途生成以生成另一个 40 之后，有效地作为一组永无止境的楼梯工作。有人可以举例说明如何创建这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T22:24:28.103

您要做的不是生成更多楼梯，而只是将不再使用的楼梯*移动*到您将要使用的区域。本质上，您需要的是一个对象池，例如[此处](http://www.flashandmath.com/flashcs4/fireworks/)所示的对象池。请注意，此示例中使用的可能是用于动态绘制像素的数据对象池，但概念是相同的（您可能会发现表示要绘制的像素的数据对象的想法在您的任务中很有用有在你面前）。

# java - 是否有任何类似于 HashMap 的数据结构，我可以在其中添加重复键

> ID：10872914
> 
> 赞同：7
> 
> 时间：2012-06-03T18:44:40.057
> 
> 标签：java, hashmap, key-value

```
HashMap<String, String> roleRightsID = new  HashMap<String, String>(); 
```

是否有任何类似于 HashMap 的数据结构，我可以在其中添加重复的键

例如

```
USA, New York
USA, Los Angeles
USA, Chicago
Pakistan, Lahore
Pakistan, Karachi 
```

ETC

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-03T18:52:37.313

您需要的称为 multimap，但它在标准 Java 中不存在。`Map<String, List<String>>`在你的情况下，它可以用 a 来模拟。

您可以在此处找到一个示例：http: [//docs.oracle.com/javase/tutorial/collections/interfaces/map.html](http://docs.oracle.com/javase/tutorial/collections/interfaces/map.html)，在 Multimaps 部分。

如果您不想重用前面的示例，可以使用[Apache Commons Collections](http://commons.apache.org/collections/)中的[MultiMap 。](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-03T18:47:59.603

`HashMap<String,List<String>>`如果您需要在一个键中保留几个值，则可以使用。

例子

```
HashMap<String,List<String>> map=new HashMap<String,List<String>>();

//to put data firs time
String country="USA";
//create list for cities
List<String> cityList=new ArrayList<String>();
//then fill list
cityList.add("New York");
cityList.add("Los Angeles ");
cityList.add("Chicago");

//lets put this data to map
map.put(country, cityList);

//same thind with other data
country="Pakistan";
cityList=new ArrayList<String>();
cityList.add("Lahore");
cityList.add("Karachi");
map.put(country, cityList);

//now lets check what is in map
System.out.println(map);

//to add city in USA
//you need to get List of cities and add new one 
map.get("USA").add("Washington");

//to get all values from USA
System.out.println("city in USA:");
List<String> tmp=map.get("USA");
for (String city:tmp)
    System.out.println(city); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T18:50:26.387

重复键通常是不可能的，因为它违反了唯一键的概念。您可以通过创建一个结构来表示您的数据并将 ID 号或唯一键映射到另一组对象来完成类似的操作。

例如：

```
class MyStructure{
      private Integer id
      private List<String> cityNames
} 
```

然后你可以这样做：

```
 Map<Integer, MyStructure> roleRightsId = new HashMap<Integer, MyStructure>()
 MyStructure item = new MyStructure()
 item.setId(1)
 item.setCityNames(Arrays.asList("USA", "New York USA")
 roleRightsId.put(item.getId(), item) 
```

但我可能会错过你想要完成的事情。您能否进一步描述您的需求？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-03T18:49:04.947

在常规哈希图中使用字符串-> 列表映射。这可能是一种存储数据的方式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-03T18:50:19.313

`get()`问题变成了，当您使用其中一个重复键时，您希望返回什么？

通常最终发生的事情是你返回一个`List`项目。

# javascript - jQuery mouseout 和 setTimeout

> ID：10872918
> 
> 赞同：1
> 
> 时间：2012-06-03T18:45:18.257
> 
> 标签：javascript, delay, mouseout

我有以下代码。

```
$("#login").mouseout(function() {
    setTimeout(function() {
        $("#login").animate({
            height: "toggle"
        })
    }, 500);
}); 
```

当鼠标离开 #login 时，它将等待 500 毫秒，然后它会隐藏该元素。我想要的是，如果鼠标离开元素并在 500 毫秒内回到那里，它不会隐藏元素。否则，如果鼠标离开元素的“范围”超过 500 毫秒，它将调用 animate 函数并隐藏该元素。

如果我把这段代码放在那里

```
$("#login").mouseover(function() {
    clearTimeout(t);
}); 
```

当它关闭时我将鼠标悬停在元素上，动画完成后它会再次弹出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:48:48.190

Declare a variable for `setTimeout`, so that you can use `clearTimeout`:
(Plus solved your "it'll pop up again" problem)

```
$("#login")
    .mouseout(function() {
        window.t = setTimeout(function() {
            $("#login").animate({
                height: "toggle"
            })
        }, 500);
    })
    .mouseover(function(){
        if(window.t){
            clearTimeout(window.t);
            window.t = undefined;
        }else{
            //Do your menu popup thing here
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:49:44.150

You can clear the timeout in the `mouseenter` or `mouseover` events.

```
var t;
$("#login").mouseenter(function() {
    clearTimeout(t);
});
$("#login").mouseout(function() {
    t = setTimeout(function() {
        $("#login").animate({
            height: "toggle"
        })
    }, 500);
}); 
```

# java - 将 SQL 与 Java 代码分离

> ID：10872919
> 
> 赞同：4
> 
> 时间：2012-06-03T18:45:25.247
> 
> 标签：java, sql, database

这是我必须连接数据库时经常遇到的问题；如何将 SQL 与普通的 java 代码分开？我通常为数据库连接使用单独的类，但是，当您有多个数据库和每个数据库中的多个表时，总是很难做到 100%

举个例子，如果我们想把所有的 java SQL 放在一个名为 DBConnector.java 的类中，我们如何为不同的插入、删除、数据检索等进行通用编码？我认为理想情况是所有 SQL 语句都应该在同一个类中，并且应该与数据库应用程序范围内的不同风格的相同操作兼容，从而提供与其余代码的逻辑分离。

```
public void insertData (String db, String table, <Whatever Fields to be Inserted>)
{
  //generic SQL INSERT statement and execution 
}

public ResultSet retrieveData (String db, String table, <Whatever Fields Relevant>) 
{
  //generic retrieval of data
} 
```

有没有办法做到这一点？还是我们应该只为不同风格的插入、查询等添加功能？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-03T18:57:13.737

如果你想要一个健全的架构，你至少需要几层来分离关注点。

首先，从模型类开始（大多数时候，您需要为数据库中的每个表创建一个）。自己编写它们，或者使用 ORM（例如 EclipseLink、Hibernate）自动生成它们。这些应该是 POJO（普通旧 Java 对象），这意味着它们是`simple`具有属性的对象（例如`Name`字符串`Id`类型、整数类型等）。您的模型对象应该是数据的载体，仅此而已（当然没有逻辑或处理）。

然后，为所有模型类创建 DAO（数据访问对象）（如果需要，您可以构建一个 GenericDao 类来继承）。*在这里，您将通过将模型*对象作为参数的方法提供 CRUD 操作（插入、更新、删除） 。这是特定于数据库后端的，尽管您可以根据需要插入与数据库无关的 DAO 层。

第三，为每个逻辑类组有一个*服务*或*管理层*（这是所有前端和控制器代码应该为所有想要的功能与之交谈的层）。可以调用一个典型的方法`registerCustomer(...)`（可能使用不同的 DAO 类）。或者`findCustomerByName()`等等。

以这种方式构建应用程序称为`MVC`（模型 - 视图 - 控制器），如果您想了解更多信息，这就是谷歌的术语。

这样，您通常不会有比 DAO 层更高的 SQL 查询，这意味着您的应用程序 a) 可维护 b) 以后更容易更改后端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T18:54:51.867

Izza，这里有一个关于将 SQL 与 java 代码分离的讨论：[Java - 在外部文件中存储 SQL 语句](https://stackoverflow.com/questions/1544335/java-storing-sql-statements-in-an-external-file) 您的解决方案是可以理解的，但如果查询不是标准的（例如，不仅仅是 a = 10，但包含在 (...) 或 group by 所以我建议你避免它。为了在 Java 中使用 DB 时最小化样板代码，你应该使用 Spring JDBC。如果你的情况可以接受，你也可以使用 Hibernate ，它可以让你避免一些 sql 的用法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T19:15:26.267

您应该使用 some `DAOFactory`，此类用于获取连接。为了反映数据库中的表，您应该创建`DTO - Data Tranfer Objects`表示实体的表。因此，如果您有 table `User`，只需`UserDTO.java`使用属性、getter 和 setter 进行创建。与数据库通信的类是`DAO - Data Access Object`. 您应该只在此处创建用于从数据库中获取数据的 SQL 语句和方法。**首先是精心设计的结构**。然后你的代码会变得更干净、更快速、更安全。我建议您创建自己的`ORM`. 所以，看看和一些不同框架的测试

* * *

**易ORM**

```
double count = 0;
TransDB trans = new TransDB() ;
List<Trans> list = new ArrayList<Trans>();
list = trans.getAll();
for (Trans element : list)
{
count+= element.getData();
}
... 
```

**休眠**

```
double count = 0;
Session session = null;
List<Trans> list = new ArrayList<Trans>();
list = HibernateUtil.getSessionFactory().openSession();
list = (List<Trans>) session
.createQuery("from Trans").list();
for (Trans element : list)
{
count += element.getData().doubleValue();
}
... 
```

**并比较？？**

**评估（以毫秒为单位）**

EasyORM：MySQL：init - 6344，avg - 4868 MS SQL：init - 8126，avg - 6752

休眠： MySQL：init - 27406，avg - 23728 MS SQL：init - 28605(+250%)，avg - 24912

所以你自己的`ORM`实际生成`SQL script`的顺序比 Hibernate(to 10) 快，**为什么**？通过在层间插入肯定不能去提高吞吐量。这只是一项测试，我还有其他测试。所以对我来说，我建议您创建自己的`ORM`，这里还有一些缺点，例如时间消耗或使用的有问题的更改，`DMS`但作为对生成的命令的完全控制的优点，您可以使用特定于特定的功能`DMS`（ORDM、特殊命令等）。所以我认为这不是`Hibernate`最好的，真的不是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-03T18:52:19.240

The best approach is to use [Hibernate](http://www.hibernate.org), which is now the industry standard.

In a nutshell, it generates the SQL needed and the code deals with java objects that represent rows. If you call setters, Hibernate figures out the SQL needed to accomplish the update.

For getters, your code might look like for example:

```
shoppingCart.getCustomer().getCountry().getCode(); 
```

And hibernate figures out the SQL joins needed to get from the `shopping_cart` table to the `country` table via the `customer` table.

It is really awesome and worth transitioning to.

# javascript - 使用 jQuery 发布所有输入的数据？

> ID：10872924
> 
> 赞同：2
> 
> 时间：2012-06-03T18:45:46.383
> 
> 标签：javascript, jquery, html, post, input

我确实`<input>`在页面上生成了一些带有随机名称的 s（一次近十个）。

卡在关于提交它们的问题上。

我使用此代码提交：

```
$('.table_data').submit(function(event)
{
    event.preventDefault();
    // some validation check and then

    $.post(url, {user_mail: mail}, function()
    {
        alert('done);
    });
}); 
```

问题是，它只提交`user_mail`。

**如何提交所有`<input>`s的数据？**

尝试使用`$.post(url, function(){})`，它什么也没发送。

可以将所有输入放入数组中，然后扔给`$.post`函数，但我不确定如何做好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-03T18:48:07.450

如果您的表单的类名是`table_data`然后使用这个

```
$.post(url,$('.table_data').serialize(), function(){}) 
```

您将获得表单输入`names`作为`global POST`数组的键。

**完整代码**

```
$('.table_data').submit(function(event)
{
    event.preventDefault();
    // some validation check and then

    $.post(url, $(this).serialize(), function()
    {
        alert('done');
    });
}); 
```

阅读更多关于[$.serialize](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:54:07.487

```
$.post(
   url,                  // url to submit
   $(this).serialize(),  // make a standard-looking query string using all inputs value
   function(response) {        
     // success function
     // in parameter response is to capture data send from capture
  },
  'json'  // dataTyep in which format you're accepting 
          // data from server may be html, xml ans so on
); 
```

**相关参考：**

*   [$.serialize()](http://api.jquery.com/serialize)

*   [$.post()](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T18:51:12.427

您正在使用 ajax 阻止表单提交的默认行为`event.preventDefault()`，然后仅将 usermail 值发送到服务器。

据我了解，您需要对表单进行序列化，以便获取所有名称及其值，然后将其发送到服务器。为此，您需要jQuery 中的[序列化函数](http://api.jquery.com/serialize/)

# git - 无法再在 bitbucket 上使用 GIT 拉/推/克隆

> ID：10872925
> 
> 赞同：3
> 
> 时间：2012-06-03T18:45:48.367
> 
> 标签：git, bitbucket, git-push, git-pull, git-clone

虽然我之前克隆了一个存储库，但现在每当我尝试再次使用推送、拉取甚至克隆存储库时，它都会要求输入密码，我提供它然后我很长一段时间都没有得到任何反馈。虽然我之前确实克隆了同一个存储库，现在上述命令都不起作用。

这个问题的原因可能是什么？如果我输入错误的密码，它甚至不会告诉我任何事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T21:18:20.017

SSH 连接要求输入密码的常见原因是 SSH 找不到您的公钥/私钥。

由于您没有更改任何内容，因此在您当前的 shell 会话（例如，对于 Windows 的 DOS 或 msysgit bash）中，您可能还没有定义 HOME。

对于 DOS 会话

```
set HOME=C:\Users\username 
```

对于 msysgit bash 会话

```
set HOME=/C/Users/username 
```

另一个原因是您的私钥受密码保护，而您的代理未运行。
Atlassian[在 BitBucket 和 SSH 上有关于 Git 的](https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git)所有详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T02:10:00.153

问题是我使用的是 HTTPS 而不是 SSH，一旦我`rsa`在 bitbucket 上添加了我的密钥，我就使用 SSH 再次克隆，现在我可以正常推送了。

# javascript - 加号登录 URL 转移到空间

> ID：10872928
> 
> 赞同：0
> 
> 时间：2012-06-03T18:46:42.870
> 
> 标签：javascript, gwt, xmlhttprequest

尽管我将加号编码为 %2B，但服务器将其读取为空格。我使用 javascript XMLHttpRequest 发送请求。

为什么会发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:52:21.403

编码/解码不是一件花哨的事情。基础很简单。因此，只要您通过**单一**算法进行编码/解码，那么您就必须获得原始文本。

也许你的**解码算法**有问题。

我建议您安装[Fiddler](http://www.fiddler2.com/fiddler2/)，看看您的客户端计算机发生了什么。您还可以记录您的 Web 服务器的请求的第一次到达，以查看您到达那里的内容。

# ios - 如何在 iOS 上的一个 tableview 中放置 2 个不同的标签

> ID：10872929
> 
> 赞同：0
> 
> 时间：2012-06-03T18:46:54.580
> 
> 标签：ios, label, tableview, cell, subview

我正在解析一个 xml 文件，并尝试在表格视图中显示 xml 文件的“标题”和“摘要”。我为每个“标题”制作一个子视图，为每个“摘要”制作一个子视图，并尝试将它们都放在一个单元格上。如果我只尝试放置“标题”或“摘要”，但当我尝试同时放置两者时，它会起作用。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath {

UITableViewCell *cell;
UILabel *label=nil , *secondLabel = nil;

cell = [tv dequeueReusableCellWithIdentifier:@"Cell"];
if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"Cell"] autorelease];

    label = [[UILabel alloc] initWithFrame:CGRectZero];
    [label setLineBreakMode:UILineBreakModeWordWrap];
    [label setMinimumFontSize:FONT_SIZE];
    [label setNumberOfLines:0];
    [label setFont:[UIFont boldSystemFontOfSize:FONT_SIZE]];
    [label setTag:1];

    [[cell contentView] addSubview:label];

    secondLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    [secondLabel setLineBreakMode:UILineBreakModeWordWrap];
    [secondLabel setMinimumFontSize:FONT_SIZE];
    [secondLabel setNumberOfLines:0];
    [secondLabel setFont:[UIFont systemFontOfSize:FONT_SIZE]];
    [secondLabel setTag:2]; 

    [[cell contentView] addSubview:secondLabel];    
}

int storyIndex = [indexPath indexAtPosition: [indexPath length]-1];
NSString *text1 = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];  
NSString *text2 = [[stories objectAtIndex: storyIndex] objectForKey: @"summary"];

CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

CGSize size1 = [text1 sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
CGSize size2 = [text2 sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];    

if (!label)
    label = (UILabel*)[cell viewWithTag:1];
if (!secondLabel)
    secondLabel = (UILabel*)[cell viewWithTag:2];    

[label setText:text1];
[secondLabel setText:text2];

[label setFrame:CGRectMake(CELL_CONTENT_MARGIN, CELL_CONTENT_MARGIN, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAX(size1.height, 44.0f))];
[secondLabel setFrame:CGRectMake(CELL_CONTENT_MARGIN, CELL_CONTENT_MARGIN, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAX(size2.height, 44.0f))]; 

return cell;  } 
```

和 ：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
NSString *text1 = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];
NSString *text2 = [[stories objectAtIndex: storyIndex] objectForKey: @"summary"];    

CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

CGSize size1 = [text1 sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
CGSize size2 = [text2 sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];    
CGFloat height = MAX(size1.height + size2.height, 44.0f);

return height + (CELL_CONTENT_MARGIN * 2);} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T18:52:38.743

代替

```
cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"Cell"] autorelease]; 
```

采用

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"] autorelease];

//Now you can use 2 different texts    
cell.textLabel.text = @"Text1";
cell.detailTextLabel.text = @"Text2"; 
```

# jquery-ui - jsFiddle 的环境似乎正在影响我的小提琴

> ID：10872931
> 
> 赞同：1
> 
> 时间：2012-06-03T18:47:05.610
> 
> 标签：jquery-ui, resize, jsfiddle

听起来不太可能，但我创建了这个小提琴来演示它：http: [//jsfiddle.net/dlchambers/rDpbh/](http://jsfiddle.net/dlchambers/rDpbh/) （在 Win7 下使用 Chrome 19.0）

当小提琴第一次加载时，我的垂直调整大小的 div 上有一个意外的上限。如果我改变 jsFiddle 面板的大小，限制就会解除。

其他人也有遇到同样的状况吗？如果是这样，任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:55:30.260

发生这种情况是因为您将其设置`containment`为父级，并且由于您没有指定父级，因此它成为`<body>`结果窗格中的节点。你可以在这里看到这个 - [http://jsfiddle.net/mfsfu/1/](http://jsfiddle.net/mfsfu/1/)。

如果您删除`containment: 'parent'`，则不受限制 - [http://jsfiddle.net/mfsfu/2/](http://jsfiddle.net/mfsfu/2/)。

# ruby-on-rails-3 - What is the primary use of JSON in Rails

> ID：10872932
> 
> 赞同：0
> 
> 时间：2012-06-03T18:47:18.050
> 
> 标签：ruby-on-rails-3, json

I have been reading a bit on JSON and rails (I am new to both) and I am trying to understand why JSON is useful and how it is used. I know this is a fairly vague question however I would like to understand it's principal application and why it is preferred over other methods. I've watched and read numeral tutorials on how to use it, but haven't come across anything that explains the fundamentals as to why it is used. If any of you have specific links on JSON with rails and how the two interact and more importantly why it is used it would be very much appreciated. Cheers.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T18:54:14.703

为什么使用它？因为它是一种简单、普遍、易于解析的数据交换方式。

Rails 和 JSON 之间没有内在关系——它是它支持的一种正常格式，因为很多东西都可以*使用*JSON，比如 JS 库（例如 jQuery UI）。

# matlab - MatLab - 可变精度算术

> ID：10872933
> 
> 赞同：1
> 
> 时间：2012-06-03T18:47:18.230
> 
> 标签：matlab, numbers, arbitrary-precision

`vpa`关于在 MatLab 中评估符号表达式时可以使用的命令，我有一个简短的问题。

我的教科书是这样说的：

“在使用数字等函数时需要小心`sqrt`，默认情况下会产生双精度浮点数。您需要将此类输入`vpa`作为符号字符串传递给以进行正确评估：`vpa('sqrt(5)/pi')`.”

我不太明白这里的行话。`vpa(input)`为什么对于大多数输入，无论我输入or ，我都会得到完全相同的答案`vpa('input')`，但对于平方根却不是？例如，如果我输入`vpa(sin(pi/4))`or `vpa('sin(pi/4)')`，我会得到完全相同的答案，但如果我输入上面给出的问题作为`vpa(sqrt(5)/pi)`，我不会得到与输入时相同的答案`vpa('sqrt(5)/pi')`。

如果有人能比我上面的书更详细地解释这一点，我将不胜感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-03T20:25:24.393

永远不要假设像 vpa(sin(pi/4)) 这样的数字精确到全精度，因为 MATLAB 通常会使用浮点运算计算调用 vpa 中的数字，因此只能精确到大约 16 位。

但是，这里似乎是正确的。例如，我们知道

```
sin(pi/4) == sqrt(2)/2 
```

让我们测试一下这个结果。我将使用 100 位精度，比较 vpa 和我自己的 HPF 工具。

```
>> vpa(sin(pi/4),100)
ans =
0.7071067811865475244008443621048490392848359376884740365883398689953662392310535194251937671638207864

>> vpa(sqrt(sym(2))/2,100)
ans =
0.7071067811865475244008443621048490392848359376884740365883398689953662392310535194251937671638207864

>> sqrt(hpf(2,100))/2
ans =
0.7071067811865475244008443621048490392848359376884740365883398689953662392310535194251937671638207864

>> sin(hpf('pi',100)/4)
ans =
0.7071067811865475244008443621048490392848359376884740365883398689953662392310535194251937671638207864 
```

所以，我的猜测是解析器已经将输入识别为符号工具箱可以更准确地计算的东西。正如我之前所说，但要小心。什么是罪（pi/12）？

```
>> vpa(sin(pi/12),100)
ans =
0.25881904510252073947640383266843855381011962890625

>> vpa('sin(pi/12)',100)
ans =
0.2588190451025207623488988376240483283490689013199305138140032073150569747488019969223679746942496655

>> vpa(sin(sym('pi')/12),100)
ans =
0.2588190451025207623488988376240483283490689013199305138140032073150569747488019969223679746942496655

>> sin(hpf('pi',100)/12)
ans =
0.2588190451025207623488988376240483283490689013199305138140032073150569747488019969223679746942496655 
```

看到在第一种情况下，解析器没有拯救我们。在其他情况下，我强制 MATLAB 计算正确的值。事实上，稍加努力就能得到 sin(pi/12) 的值，如 sqrt(2)*(sqrt(3) - 1)/4。

```
>> DefaultNumberOfDigits 100
>> (sqrt(hpf(3)) - 1)*sqrt(hpf(2))/4
ans =
0.2588190451025207623488988376240483283490689013199305138140032073150569747488019969223679746942496655 
```

关键是，不要相信解析器会把你救在这里。

编辑：作为对 Amro 评论的测试，我恭敬地声明 MATLAB 在这里做了一些有趣的事情。看到 vpa 能够返回正确的前 100 位 pi，即使将 pi 作为双精度数传递也是如此。由于 pi（作为双精度数）在第 16 位十进制数字之后不正确，因此发生了一些可疑的事情。

```
>> vpa(pi,100)
ans =
3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117068

>> vpa('pi',100)
ans =
3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117068

vpa('pi',100) - vpa(pi,100)
ans =
0.0 
```

作为对这一事实的测试，让我们看看 HPF 发现了什么。HPF 实际上采用 IEEE 754 值，存储在双精度数中，然后将其转换为 HPF 数。

```
>> hpf(pi,100)
ans =
3.141592653589793115997963468544185161590576171875

>> hpf('pi',100)
ans =
3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117068

>> hpf('pi',100) - hpf(pi,100)
ans =
0.0000000000000001224646799147353177226065932275001058209749445923078164062862089986280348253421170679821480800000000 
```

很明显，MATLAB 能够将 pi 识别为不仅仅是将传入的双精度值。

编辑2：

事实上，一点游戏告诉我这里发生了什么。VPA 是一个棘手的问题，而不是解析器。考虑分数 7/13。如果我们将其构建为 double，然后打印出存储在其全部荣耀中的浮点值，我们会发现它并不完全准确。这正如预期的那样。

```
>> sprintf('%.100f',7/13)
ans =
0.5384615384615384359179302009579259902238845825195312500000000000000000000000000000000000000000000000 
```

7/13 是重复的十进制值。以下是正确的数字：

```
>> vpa('7/13',100)
ans =
0.5384615384615384615384615384615384615384615384615384615384615384615384615384615384615384615384615385 
```

现在，假设我们尝试创建相同的数字。在这里，我会以双精度形式传递 7/13，但我会在底部的十进制数字中出错

```
>> sprintf('%.100f',0.538461538461538461777777777)
ans =
0.5384615384615384359179302009579259902238845825195312500000000000000000000000000000000000000000000000 
```

在这里，我们看到 vpa 捕获并纠正了我所做的“错误”，认识到我传入的值实际上与我在 7/13 传入时的值相同。

```
>> vpa(0.538461538461538461777777777,100)
ans =
0.5384615384615384615384615384615384615384615384615384615384615384615384615384615384615384615384615385 
```

当然，如果我将值作为字符串传递，那么 vpa 就会出错。

```
>> vpa('0.538461538461538461777777777',100)
ans =
0.538461538461538461777777777 
```

这就解释了为什么 vpa 能够捕获并正确计算 vpa(sin(pi/4),100)，达到所要求的全部精度。sin(pi/4) 被计算为双精度，但随后 vpa 将其视为与 sqrt(2)/2 的双精度版本相同的数字。

当然要小心。例如，vpa 不够聪明，无法捕捉到 pi 的这种简单变化。

```
>> vpa(pi + 1,100)
ans =
4.141592653589793115997963468544185161590576171875

>> vpa(pi,100)
ans =
3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117068 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-03T18:51:45.610

我不是 MatLab 专家，但没有引号，您将*结果*传递`sqrt(5)/pi`到`vpa()`：

```
 vpa(sqrt(5)/pi)
= vpa(0.7117625434171772) 
```

使用引号，您将*表达式* `sqrt(5)/pi`（未计算且以精确形式）传递给`vpa()`MatLab，然后告诉 MatLab 以`sqrt(5)/pi`可变精度进行计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-03T18:55:45.043

如果您得到完全相同的答案，则不需要可变精度算术开始。

但是，`sin(pi/4)`应该是`sqrt(2)/2`，这是不合理的。你不应该从不同的精度得到完全相同的答案。也许你应该检查你是如何显示（和四舍五入）结果的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-25T13:49:40.540

[关于数字到符号](http://www.mathworks.com/help/symbolic/numeric-to-symbolic-conversion-1.html)转换的最新文档有答案。

> sym 尝试纠正浮点输入中的舍入误差以返回精确的符号形式。具体来说，sym 纠正与 p/q、pπ/q、(p/q)^(1/2)、2^q 和 10^q 形式匹配的数字输入中的舍入误差，其中 p 和 q 是适度的大小的整数。

因此，is orso`sin(pi/4)`命令`2^(1/2)/2`可以识别它。但是，根据文档，它不是公认的输入表单。`(1/2)^(1/2)``vpa``sqrt(5)/pi`

# objective-c - Iterating over views in NSTableView

> ID：10872941
> 
> 赞同：0
> 
> 时间：2012-06-03T18:48:44.530
> 
> 标签：objective-c, cocoa, nstableview

I am trying to resize all NSTextFields in an NSTableView that is view based. I want to call [myTextfield sizeToFit] on all textfields. My question is how to iterate over all views in my tableview. I tried enumerateAvailableRowViewsUsingBlock: but it doesn't work. What can i do to solve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T00:42:33.597

尝试这个。在 IB 中，将文本字段的标签设置为您想要的任何内容（在此示例中，我使用 1）。然后，您将能够`NSTableCellView`通过调用来访问每一行的`viewAtColumn:row:makeIfNecessary:`。确保`makeIfNecessary:`设置为`YES`.

代码：

```
int x;
for (x = 0; x < [tableView numberOfRows]; x++) {
    NSTableCellView *cellView = [tableView viewAtColumn:0 row:x makeIfNecessary:YES];
    NSTextField *tField = [cellView viewWithTag:1];
    [tField sizeToFit];
} 
```

这对我有用，所以如果它不适合你，我会感到惊讶。如果有人可以就为什么`makeIfNecessary:`必须`YES`访问应该已经创建的行视图提供一些见解，我将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T21:02:30.543

您可以通过 获得总行数`int numberOfRows = [yourTableView numberOfRows]`。然后用它来迭代它们并调用你的方法。（假设您在 IB 中为您的 NSTextField 提供了一个唯一**标签**，以将其与您的 NSTableCellView 的其他子视图区分开来）。

```
 for (int i = 0; i < numberOfRows; i++) {
        NSTableCellView *someTableCellView = [[yourTableView viewAtColumn:(NSInteger) row:i makeIfNecessary:FALSE];
        NSTextField *yourTextField = [someTableCellView viewWithTag:(NSInteger)];
    } 
```

另一个地方是在 NSTalbeView 委托方法`tableView:viewForTableColumn:row:`中，每次调用`reloadData`tableView 时都会调用该方法。

# php - alert when close page/window

> ID：10872946
> 
> 赞同：-2
> 
> 时间：2012-06-03T18:49:31.357
> 
> 标签：php, javascript, javascript-events

how can I call code when I close page/window

```
alert("its close now"); 
```

but not onunload or onbeforeunload , cause this also call when refresh I want to call this alert when close only

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T18:53:22.883

> but not onunload or onbeforeunload , cause this also call when refresh I want to call this alert when close only

When you Refresh, the current page is essentially closed and re-opened causing the `onunload` and `onbeforeunload` events to fire. AFAIK, you can't avoid that when users *refresh* the page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:57:08.840

这是给您的注意事项：

```
Refresh = Closing window and reopening it 
```

所以你将不得不使用`onbeforeunload`，因为不可能告诉用户已经刷新或关闭了窗口。

## 更新

根据您的评论：

> 我想知道用户何时打开页面以及何时关闭页面，以及在页面中停留的时间，与刷新页面的次数无关。

这可能是您所期望的：

```
localStorage["t"] || (localStorage["t"] = 0);
var start = new Date();
window.onbeforeunload = function(){
    localStorage["t"] = +localStorage["t"] + (new Date() - start);
} 
```

用户停留在页面的时间存储在 中`localStorage["t"]`，每次离开时都会更新。但是因为无法知道用户何时关闭了页面，所以你必须设置一个时间间隔。例如，将其重置为`0`24 小时后。

# jquery - 获取不同容器内相同元素类的jquery索引

> ID：10872947
> 
> 赞同：11
> 
> 时间：2012-06-03T18:49:35.257
> 
> 标签：jquery, indexing

在“点击”事件中，我想获取可以在多个容器中的元素的索引。返回的索引位置应该相对于它的容器而不是body标签来计算。

我在这里写了一个例子：http: [//jsfiddle.net/zUGcK/](http://jsfiddle.net/zUGcK/)

我的问题是，当我单击第二个块容器中的行时，返回的行索引是：3、4、5，而我希望返回 0、1、2。

我应该在 jquery index() 参数中进行哪些更改以获取为两个容器中的每一行返回的 0、1、2？

谢谢

[http://jsfiddle.net/zUGcK/](http://jsfiddle.net/zUGcK/)

```
$('.line').click(function()
{
    alert('index: '+$(this).index('.container .line'));
});

<div class="container">
<div class="header">block #1</div>
<div class="line">line #0</div>
<div class="line">line #1</div>
<div class="line">line #2</div>
</div>

<div class="container">
<div class="header">block #2</div>
<div class="line">line #0 (index 3 returned instead of 0)</div>
<div class="line">line #1 (index 4 returned instead of 1)</div>
<div class="line">line #2 (index 5 returned instead of 2)</div>
</div> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-03T18:56:04.153

您可以使用它来获取其容器中元素的索引值

```
$(function()
{
    $('.line').click(function()
    {
        //alert('index: '+$(this).index('.container .line'));

        alert($(this).closest('.container').find('.line').index(this));
    });
}); 
```

您必须使用[$.index的这种语法](http://api.jquery.com/index/)

```
.index( element )
element The DOM element or first element within the jQuery object to look for.
​ 
```

[工作小提琴](http://jsfiddle.net/joycse06/zUGcK/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T18:57:13.750

使用 $this 更新索引。

```
 $('.line').click(function()
{
    var $this=$(this);
   var indx= $this.parent('.container').find('.line').index($this);

    alert('index: '+indx);
}); 
```

# android - CursorLoaders and AsyncTaskLoaders using same LoaderManager

> ID：10872949
> 
> 赞同：2
> 
> 时间：2012-06-03T18:49:52.787
> 
> 标签：android, android-cursorloader, asynctaskloader

I have a fragment that uses multiple CursorLoaders. All works fine. Now I need to add an AsyncTaskLoader as well, to the same fragment.

Question is, how can I use the same LoaderManager.LoaderCallbacks interface to manage both my CursorLoaders and AsyncTaskLoader?

My thought is that since CursorLoader is-a AsyncTaskLoader, then I should be able to adapt the LoaderCallBacks to both, but I may be miss the boat...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T12:40:48.360

这仅在所有加载器返回相同类型时才有效。如果这是真的，那么您只需为您启动的每个加载程序指定唯一的 ID。相同的 ID 被传递到 onCreateLoader() 调用中，因此您只需检查该 ID 以确定要创建的加载程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-27T02:49:20.013

看来我这个问题太晚了，希望它可以帮助一些人。

我刚刚在同一个 Activity 中完成了一个带有多个加载器的项目，一个 CursorLoader 用于数据库，另一个 AsynctaskLoader 用于网络作业。

```
 class YourActivity extends AppCompatActivity implements LoaderManager.LoaderCallbacks {
    // you still implements LoaderManager.LoaderCallbacks but without add <returnType> 
    //and you have to cast the data into your needed data type in onLoadFinished()

        Private int loader1 = 1;   // eg. CursorLoaderId
        private int loader2 =2;    //eg. AsynctaskLoaderId

        @Override
        protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_detail);

// init loader with different Id
        getSupportLoaderManager().initLoader(yourLoaderId, null, this);
    }
        @Override
        public Loader onCreateLoader(int id, Bundle args) {
            if (id == loader1 ) {

                //YourLoaderClass1 is you loaderClass where you implement onStartLoading and loadingInBackground() 
                return new YourLoaderClass1();  
            } else if (id == loader2 ) {

                return new YourLoaderClass2();
            }
            return null;
        }

        @Override
        public void onLoadFinished(Loader loader, Object data) {
            int id = loader.getId();// find which loader you called
            if (id == loader1 ) {

                yourMethod1((List< >) data); // eg. cast data to List<String>
            } else if (id == loader2 ) {
                yourMethod1((String) data); // eg. cast data to String
            }
        }

        @Override
        public void onLoaderReset(Loader loader) {
            int id = loader.getId();
            if (id == loader1 ) {

            } else if (id == loader2 ) {

            }
        }
    } 
```

这是我在其他问题下的[回答](https://stackoverflow.com/questions/15643907/multiple-loaders-in-same-activity/46125296#46125296)和我的项目[链接](https://github.com/lixw1021/Movies/blob/master/app/src/main/java/com/xianwei/movies/MainActivity.java)

# java - How to bind swing.JTextArea to PrintStream to accept data

> ID：10872951
> 
> 赞同：4
> 
> 时间：2012-06-03T18:49:58.400
> 
> 标签：java, multithreading, swing, user-interface, jtextarea

Client has gui and extra thread (to process socket input and print it out to passes object of type PrintStream). The gui form has `new javax.swing.JTextArea()`. I need to pass to thread the object `PrintStream` to write to: `ClientThreadIn(PrintStream inOutput){...}`. How to create/bind gui JTextArea to accept data form `ClientThreadIn` using `PrintStream`?

* * *

Client:

```
 in = new BufferedReader(new InputStreamReader(s.getInputStream())); 
    out = new PrintWriter(new OutputStreamWriter(s.getOutputStream()));
ClientThreadIn threadIn = new ClientThreadIn(in, System.out); // client passes it's System.out to thread for writing 
```

So JTextArea should be similar to console. It should be able to accept data from Thread (actually Thread writes to PrintStream of gui)... Is there something similar to JTextArea.getInputStream()?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-03T19:27:04.303

一种方法是创建一个将JTextArea 链接到OutputStream 的类，例如TextAreaOutputStream，并让它扩展OutputStream。给它一个 StringBuilder 对象来保存它在覆盖中构造的字符串`write(int b)`，并给它一个对要写入文本的 JTextArea 的引用。然后当遇到换行符时，将 String 写入 JTextArea，但一定要*在 Swing 事件线程*或 EDT 上执行此操作。

例如：

```
import java.io.IOException;
import java.io.OutputStream;

import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class TextAreaOutputStream extends OutputStream {

   private final JTextArea textArea;
   private final StringBuilder sb = new StringBuilder();
   private String title;

   public TextAreaOutputStream(final JTextArea textArea, String title) {
      this.textArea = textArea;
      this.title = title;
      sb.append(title + "> ");
   }

   @Override
   public void flush() {
   }

   @Override
   public void close() {
   }

   @Override
   public void write(int b) throws IOException {

      if (b == '\r')
         return;

      if (b == '\n') {
         final String text = sb.toString() + "\n";
         SwingUtilities.invokeLater(new Runnable() {
            public void run() {
               textArea.append(text);
            }
         });
         sb.setLength(0);
         sb.append(title + "> ");

         return;
      }

      sb.append((char) b);
   }
} 
```

然后将它包装在 PrintStream 对象中并让您的套接字使用它是微不足道的。

# asp.net - ASP.NET 表单向导可选字段？

> ID：10872968
> 
> 赞同：0
> 
> 时间：2012-06-03T18:52:00.833
> 
> 标签：asp.net, visual-studio-2010, formwizard

我制作了一个包含多页字段的 ASP.NET 表单向导。其中一些字段是必需的，有些是可选的。默认情况下，向导似乎使每个字段都成为必需的。如何将它们更改为可选？ ![表单向导](../Images/b90d9d41b833c949a6d6a3aa697d9850.png)

我认为`required=false`in`<input runat="server" ID="txtDriverLicenseNumber" type="text" required="false" size="24"></input>`会产生预期的效果，但它似乎什么也没做。

此外，即使我没有填写当前页面上的字段，我也希望表单允许我点击“上一个”。

一些帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T03:20:17.150

1.  字段的HTML5 属性`required`在`input`客户端（浏览器）上进行验证。并非所有浏览器都这样做。如果您不希望它被要求，请不要包含该属性（将其保留，**不要**说`required="false"`）

    此输入是必需的：

    ```
    <input required name=... /> 
    ```

    此输入不是必需的：

    ```
    <input name=... /> 
    ```

2.  您可以在 HTML 服务器控件或 ASP.Net 控件中使用该属性来为支持它的浏览器添加**客户端验证：**

    在 HTML 服务器控件上使用：

    ```
    <input id="input1" name="input1" type="text" required runat="server" /> 
    ```

    在 ASP.net 控件上使用：

    ```
    <asp:TextBox runat="server" ID="tbox1" required /> 
    ```

    这就是 Firefox (v12) 呈现`required`属性验证的方式（您的屏幕截图是 Chrome？）：

    ![所需输入属性的Firefox渲染](../Images/36865b9490cd54506d252cc487e43818.png)

3.  您可以使用 ASP.Net Validation Controls 来验证服务器上的 HTML 服务器和 ASP.net 控件（也称为**服务器端验证**），这是您应该执行的操作以正确验证您的输入。

    *无论浏览器是否支持 HTML5`required`属性*，服务器端验证都将起作用：

    **ASP.Net HTML 服务器控件的**服务器端验证（必需）：****

     **```
    <input id="input1" name="input1" type="text" required runat="server" />

    <asp:RequiredFieldValidator ID="rf1" runat="server" 
    Text="input required" ControlToValidate="input1" ForeColor="Red" /> 
    ```

    **ASP.Net 控件的服务器端**验证（必需）：

    ```
    <asp:TextBox runat="server" ID="tbox1" required />

    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
    Text="textbox required" ControlToValidate="tbox1" ForeColor="Red" /> 
    ```** 
***   验证将通过 ASP.Net 向导控制您的进度 - 必须（仅）提供必填字段，以便您进入“下一步”（并返回）。这就是它应该如何工作的方式。

    我认为您只是遇到了困难，因为您错误地设置了所有必填字段（因为您正在设置`required="false"`属性*而不是忽略它* **，并且**您正在使用 Chrome - 它确实验证了它）。** 

 **嗯...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T20:03:17.737

您正在使用 HTML 输入标记属性，它不是 ASP.NET 服务器控件属性。如果存在 required 属性，则无论其值如何，该字段都是必需的。请注意，Required 属性仅在 HTML 5 中受支持。

[http://www.w3schools.com/html5/att_input_required.asp](http://www.w3schools.com/html5/att_input_required.asp)

ASP.NET 向导控件不需要字段，ASP.NET 正在使用验证控件，最好使用它。对于验证器，您必须使用 ASP.NET 服务器控件（TextBox、CheckBox 等），请参见此处：

[http://msdn.microsoft.com/en-us/library/debza5t0.aspx](http://msdn.microsoft.com/en-us/library/debza5t0.aspx)

如果您使用 ASP.NET 验证器，则只需将 CausesValidation 按钮属性设置为 false，该按钮将不会触发验证。**

# iphone - Creating a spectrogram in iphone for a fixed length of data samples

> ID：10872971
> 
> 赞同：1
> 
> 时间：2012-06-03T18:52:30.693
> 
> 标签：iphone, objective-c, ios, xcode

I am pretty new to iOS programming and i need to create and display a spectrogram given a fixed length array of samples. Is it possible to display it using core plot? If so, how? I would really love to have some help on this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T01:32:43.870

尝试创建一个 2D 彩色位图并使用核心图形而不是使用核心绘图来显示该位图。

# python - 如果它们是正值 k 分开，我如何从排名系统中删除值？

> ID：10872973
> 
> 赞同：0
> 
> 时间：2012-06-03T18:52:34.843
> 
> 标签：python

假设我有以下代码：

```
def compute_ranks(graph, k):
    d = .8 #dampening factor
    loops = 10
    ranks = {}
    npages = len(graph)
    for page in graph:
        ranks[page] = 1.0 / npages
    for c in range(0, loops):
        newranks = {}
        for page in graph:
            newrank = (1-d) / npages
            for node in graph:
                if page in graph[node]:
                    newrank = newrank + d * (ranks[node]/len(graph[node]))
            newranks[page] = newrank
        ranks = newranks
     return ranks 
```

好吧，现在假设我不想允许任何可以相互勾结的项目。如果我有一个项目字典

```
g = {'a': ['a', 'b', 'c'], 'b':['a'], 'c':['d'], 'd':['a']} 
```

对于任何路径 A==>B，我不想允许来自 B==>A 的路径位于或低于我的数字 k 的距离。

例如，如果 k = 0，那么我不允许的唯一路径是 A==>A。

但是，如果 k = 2，那么我不会像以前那样允许链接 A==>A，但也不允许链接如 D==>A、B==>A 或 A==>C。

我知道这很令人困惑，我的大部分问题来自于不理解这意味着什么。

这是问题的记录：

```
# Question 2: Combatting Link Spam

# One of the problems with our page ranking system is pages can 
# collude with each other to improve their page ranks.  We consider 
# A->B a reciprocal link if there is a link path from B to A of length 
# equal to or below the collusion level, k.  The length of a link path 
# is the number of links which are taken to travel from one page to the 
# other.

# If k = 0, then a link from A to A is a reciprocal link for node A, 
# since no links needs to be taken to get from A to A.

# If k=1, B->A would count as a reciprocal link  if there is a link 
# A->B, which includes one link and so is of length 1\. (it requires 
# two parties, A and B, to collude to increase each others page rank).

# If k=2, B->A would count as a reciprocal link for node A if there is
# a path A->C->B, for some page C, (link path of length 2),
# or a direct link A-> B (link path of length 1).

# Modify the compute_ranks code to 
#   - take an extra input k, which is a non-negative integer, and 
#   - exclude reciprocal links of length up to and including k from 
#     helping the page rank. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T00:19:24.550

一种可能的解决方案是引入一种检测合谋的递归方法。就像是：

```
def Colluding(p1,p2,itemDict,k):
    if p1 == p2:
        return True
    elif k == 0:
        return False
    else p2 in itemDict[p1]:
        return True
    for p in itemDict[p1]:
        if Colluding(p1,p,itemDict,k-1):
            return True
    return False 
```

然后它说`if item in itemDict[node]`你会拥有`if item in itemDict[node] and not Colluding(item,node,itemDict,k)`或类似的东西。

如果在小深度（例如 A->B->A）处存在大量共谋链接，则进行[深度优先搜索可能不是最佳选择，因为它们可能仅在经过几次全深度搜索后才能找到。](http://en.wikipedia.org/wiki/Depth-first_search)在这种情况下，您也许可以找到另一种进行[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)的方法。此外，如果您有很多链接，则可能值得尝试转换为循环，因为如果您使用递归，Python 可能会出现堆栈溢出问题。递归算法是我首先想到的，因为使用递归遍历树似乎很自然。

注意：由于这是对家庭作业的帮助，因此我没有对其进行测试，并且某些比较可能不太正确，需要以某种方式进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T06:21:29.070

我想到了：

```
def Colluding(p1,p2,itemDict,k, time):
if k >= len(itemDict)/2:
    return True
if k == 0:
    if time == 0:
        if p1 == p2 and p1 in itemDict[p2]:
            return True
        else:
            return False
    if time == 1:
        if p1 in itemDict[p2]:
            return True
        else:
            return False
for p in itemDict[p1]:
    if Colluding(p1,p,itemDict,k-1,1) and p == p2:
        return True
    else:
        return False
return False

def compute_ranks(graph, k):
    d = 0.8 # damping factor
    numloops = 10
    ranks = {}
    npages = len(graph)
    for page in graph:
        ranks[page] = 1.0 / npages
    for i in range(0, numloops):
        newranks = {}
        for page in graph:
            newrank = (1 - d) / npages
            for node in graph:
                if page in graph[node] and not Colluding(page, node, graph, k,0):
                    newrank = newrank + d * (ranks[node]/len(graph[node]))
            newranks[page] = newrank
        ranks = newranks
    return ranks 
```

感谢@Ken 为我指明了正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T13:26:33.247

我也参加了这门课程。我提出了以下解决方案。基本上，我们需要的只是“所有互惠链接”。给定图形和级别 k，以下过程计算所有互惠链接。它返回一个元组列表，表示相互链接（node1，node2）。您需要做的就是检查（节点，页面）是否不在此列表中以计算排名。

```
def get_reciprocal_links(graph, k):
reci=[]
for node in g:
    for ele in g[node]:
        got = False
        work = []
        i=0
        if node == ele and i == k:
            reci.append((node,ele))
            break
        if ele in g:
            for e in g[ele]:
                work.append(e)

        while i < k:
            if node in work:
                reci.append((node,ele))
                got = True
                break
            else:
                i=i+1
                check=work.pop()
                if check in g:
                    for e in g[check]:
                        work.append(e)
        if got == True:
            continue
return reci 
```

# html - 这些数字在 png 图像路径之后是什么意思？

> ID：10872981
> 
> 赞同：2
> 
> 时间：2012-06-03T18:53:14.820
> 
> 标签：html, css, png

我在两个网站上看到了以下 CSS 规则

```
/* First example */
background: #F8F8F8 url('/images/noise.png?1333540701') top left;
/* Second example from a different site */
background: #F8F8F8 url('/images/noise.png?1326131369') top left; 
```

`*.png?randomNumbers`png图像路径后是什么意思？他们在这里服务的目的是什么？

第一个来自[bastsov](http://batsov.com/)，另一个来自[Matt Gemmell](http://mattgemmell.com/)。两者都使用 Octopress 框架。

**编辑** 这两个规则并不是在同一个站点上使用的。每个规则来自不同的站点。

此外，似乎他们在任何地方都使用相同的数字，无论何时`noise.png`提及。例如，

```
/* rule for navigation bar */
background: url('/images/noise.png?1333540701'),linear-gradient(#E0E0E0,#CCC,#B0B0B0)
/* rule for #main */
background: #F2F2F2 url('/images/noise.png?1333540701') top left; 
```

[我在Matt Gemmell](http://mattgemmell.com/)的网站上观察到了相同的模式，但数字不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T18:54:27.560

很可能这是对图像进行版本控制的一种方式，因为它们可能正在缓存图像。这样，如果图像被更新，他们可以更改数字以避免获取较旧的缓存图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T18:55:10.290

随机数是`GET`发送到图像路径的请求。由于图像只是一个静态资源，因此当您将参数传递给它时，除了它的 URL 之外，什么都不会改变。

浏览器缓存图像以加快页面加载速度，但如果您更改图像的 URL，浏览器会重新下载图像。似乎`noise.png`每次都需要重新加载。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T19:01:19.097

该数字只是发送到服务器以获取图像的 URL 的一部分。

这样做有两个常见的原因：

*   服务端的资源不是静态文件，是由代码处理的，根据数量返回不同的图片。
*   服务器会忽略该数字，它只是用于生成不同的 URL。这通常是出于缓存原因，因此更改数字将强制向服务器发出新请求。

在这种情况下，第二个原因似乎更有可能。当查询字符串用于返回不同的图像时，资源名称通常更通用。

# c# - .net 更改 ListView 按钮

> ID：10872983
> 
> 赞同：0
> 
> 时间：2012-06-03T18:53:24.377
> 
> 标签：c#, asp.net, listview, button

更改诸如插入、删除 ListView 之类的按钮很好，因为它们只是普通的 asp:buttons，但是如果在 ListView 上启用了分页，如何更改页面按钮（即第一个和最后一个）？

它们的类型：

```
<asp:DataPager ID="DataPager1" runat="server">
     <Fields>
           <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" 
                      ShowNextPageButton="False" ShowPreviousPageButton="False" />
                 <asp:NumericPagerField />
                 <asp:NextPreviousPagerField ButtonType="Button" ShowLastPageButton="True" 
                      ShowNextPageButton="False" ShowPreviousPageButton="False" />
     </Fields>
</asp:DataPager> 
```

只需要更改 ForeColor 和 BackColor 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T18:57:59.277

您必须使用它的模板功能，就像任何其他 ASP.NET 服务器控件一样。看到[这个问题](https://stackoverflow.com/questions/987386/customize-asp-net-datapager-generated-html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T19:28:58.623

您可以添加自己的 css 类并将其分配给 DataPager 控件的 Button 标记。DataPager 中的按钮标签有一个名为 ButtonCssClass 的属性。

NumericPagerField 样式可以通过为 NumericPagerField 的 NumericButtonCssClass 属性分配 css 类来更改。

```
<asp:DataPager ID="DataPager1" runat="server">
    <Fields>
        <asp:NextPreviousPagerField ButtonType="Button" ButtonCssClass="DataPagerbtnStyle"
            ShowFirstPageButton="True" ShowNextPageButton="False" ShowPreviousPageButton="False" />
        <asp:NumericPagerField NumericButtonCssClass="DataPagerNumericStyle" />
        <asp:NextPreviousPagerField ButtonCssClass="DataPagerbtnStyle" ButtonType="Button"
            ShowLastPageButton="True" ShowNextPageButton="False" ShowPreviousPageButton="False" />
    </Fields>
</asp:DataPager> 
```

# vb.net - 多音频 VB.NET

> ID：10872994
> 
> 赞同：0
> 
> 时间：2012-06-03T18:55:05.270
> 
> 标签：vb.net, audio

我正在开发一个游戏，我正在使用：

```
My.Computer.Audio.Play("mul.wav", AudioPlayMode.BackgroundLoop) 
```

在所有关卡中播放背景音乐，而且，每当用户单击按钮时，它也会通过播放另一种声音

```
My.Computer.Audio.Play("butao.wav") 
```

但是当这种情况发生时，后台循环就会停止。有任何解决这个问题的方法吗？

最好的问候，乔奥。

# php - PHP：包含函数不起作用

> ID：10872997
> 
> 赞同：2
> 
> 时间：2012-06-03T18:55:09.773
> 
> 标签：php, html, include

我已经离开网络世界一段时间了，但我正在尝试使用 HTML5 和 PHP 制作一个网站。这是一个简单的 html 文件，其中包含链接到 PHP 文件的 PHP 包含语句。这基本上是我的 index.html 文件：

```
<!DOCTYPE HTML>
    <html>
    <head>
         <title>Title</title>
         <link rel="stylesheet" href="style.css" />
     </head>
     <body>
                  <?php include("header.php"); ?>
                  TEST
     </body>
     </html>
     </html> 
```

为了简单起见，假设 header.php 只有以下内容：

```
 <div class="header">
     Hello
 </div> 
```

所以 index.html 中的文本会显示出来，但 header.php 中什么也没有。我已经下载了 PHP5，所以我不明白问题是什么。在尝试加载此本地文件之前是否需要设置一些配置设置？它与 HTML5 有关吗？我大学时所有的 PHP 项目都不加载，而且它们曾经在本地加载。感谢帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T18:56:59.587

> 这基本上是我的 index.html 文件：

除非通过设置另外指定用作php 文件，否则您的文件不需要具有`.php`扩展名。`.html``.html`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:04:53.287

正如 Sarfraz 所说，您需要将文件保存为 .php 而不是 .html，这应该可以。

我假设您已经安装了 Apache 或一些网络服务器以及 PHP。如果没有，最好使用 XAMPP 或 WAMP。

并`http://localhost/index.php`在保存默认 Web 服务器目录（www、htaac​​cess 等）后运行它。

# iphone - 更新苹果应用商店元数据

> ID：10872999
> 
> 赞同：1
> 
> 时间：2012-06-03T18:55:11.993
> 
> 标签：iphone, ios, xcode

我是 iOS 新手，无法找到这些问题的答案。一旦我向苹果应用商店提交了一个应用程序：

1.  我可以在“等待审核”时更改应用描述吗？
2.  我可以在商店和销售中更改应用描述，还是需要提交更新？我特指“描述”字段。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T18:56:29.027

1.  是的

2.  您无需提交更新即可更改描述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-03T19:08:41.043

你的两个问题的答案都是肯定的。

当应用程序等待审核时，您可以根据需要编辑应用程序元数据。

应用程序获得批准后，您将无法添加任何本地化，也无法更改应用程序标签，但您仍然可以更改其余元数据（包括描述）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T13:01:26.607

在 iTunesConnect 中，截至 2017 年 6 月，**iOS 11**现在支持促销文本。

> 您可以添加文本而无需更新提交。

[![在此处输入图像描述](../Images/835b6c26515f91c4a376b5edf39ff727.png)](https://i.stack.imgur.com/aUizT.png)